# StackOverflow 问答 14603000-14603999

# extension-methods - 通用列表上的 TakeWhile 扩展方法

> ID：14603007
> 
> 赞同：0
> 
> 时间：2013-01-30T11:33:22.483
> 
> 标签：extension-methods, generic-list

我试图弄清楚如何在下面的代码段中使用 lambda 编写正确的 TakeWhile 语法，这样我就可以让这个过滤工作并返回过滤后的字典。这里有人可以帮忙吗？提前致谢..

```
List<KeyValuePair<int, int>> myList = myHashList.ToList();
myList.Sort( (x,y) => x.Value.CompareTo(y.Value) );
var temp = myList.TakeWhile(x => x.Value >= keyToFind);
Dictionary<int, int> outDict = temp.ToDictionary(y => y.Key, y => y.Value); 
```

我还要在这里提一下，myHashList 是一个字典 (int,int)，具有 n 个整数值和整数键。好的，这里我使用的 lambda myList.TakeWhile(x => x.Value >= KeyToFind) 只执行一次。也就是说，x 在运行时只保存第一条记录，比较只进行一次，temp 有 0 条记录，尽管在第 2 行之后，myList 有 n 条记录。但是在运行时，当 lambda 比较完成时，myList 不在上下文中。但是同样，当执行返回到第 4 行时，myList 又回到了上下文中，但 temp 始终有 0 条记录。TakeWhile 不工作。我需要更正 lambda 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T08:35:45.820

好的，我自己在这里添加答案。事实上，这是一件愚蠢的事情。lambda 应该是 (x => keyToFind >= x.Value) 而不是相反，因为我的列表总是从按升序排序的值 0 开始，因此永远不会 >= keyToFind （这又应该是 ValueToFind的 keyToFind，因为我打算找到 Value 而不是 Key），所以再次感谢！

# mysql - 根据 3 个不同的列选择不同的行

> ID：14603017
> 
> 赞同：2
> 
> 时间：2013-01-30T11:33:55.093
> 
> 标签：mysql, sql

我有一张这样的桌子

```
 id     userid     cc    cop    
    1       23        0.5   0.9
    2       23        0.5   0.9
    3       29        2.6   9.4
    4       75        4.8   8.9
    5       29        2.6   9.4
    6       45        6.7   9.0 
```

我想要cc和cop不同的所有角色1.e结果应该是这样的

```
 id     userid     cc    cop    
    1       23        0.5   0.9
    3       29        2.6   9.4
    4       75        4.8   8.9
    6       45        6.7   9.0 
```

我想要任何具有 cc,cop,userid 的行都应该只选择一个伪代码：select * from table where userid,cc,cop 与结果不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T11:35:14.477

无论记录是如何保存在表上的，这将返回所需的结果。

```
SELECT MIN(ID) ID, userid, cc, cop
FROM   tableName
GROUP  BY userid, cc, cop 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/01900/1)

其他来源

*   [MySQL GROUP BY 子句](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T11:37:12.403

也许你可以尝试这样的事情

```
SELECT MIN(id), userid, cc, cop 
FROM table 
GROUP BY userid, cc, cop; 
```

它将选择每个出现的第一个 id。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T11:43:43.900

您将需要使用使用 GROUP BY 子句的 select 语句。

```
SELECT *
FROM Table
GROUP BY userid 
```

它们显示为单独的条目，因为每一行至少有一个不同的列（在本例中为 id）。您可以通过使用上面的语句或通过从 SELECT 语句中省略“id”列来避免这种情况，例如：

```
SELECT userid, cc, cop
FROM Table 
```

如果您选择没有像上面这样的 id 列的数据，那么数据将自动分组，因为会有完全重复的行。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T11:36:14.697

用 group by 试试这个查询

```
select * from mytable group by userid , cc , cop 
```

# ios - 在真正的 iOS 设备上找不到 UIKit.h 文件

> ID：14603018
> 
> 赞同：2
> 
> 时间：2013-01-30T11:33:58.503
> 
> 标签：ios, xcode, uikit

我正在尝试测试一个示例 iOS 应用程序，该应用程序在模拟器上运行没有问题，而在真实的 iOS 设备上构建失败，出现以下错误：“未找到 UIKit/UIKit.h”。产生错误的文件是“TestRealDevice-Prefix.pch”

```
//
// Prefix header for all source files of the 'TestRealDevice' target in the 'TestRealDevice' project
//
#import <Availability.h>
#ifndef __IPHONE_4_0
#warning "This project uses features only available in iOS SDK 4.0 and later."
#endif

#ifdef __OBJC__
#import <UIKit/UIKit.h>
#import <Foundation/Foundation.h>
#endif 
```

UIKit.framework、Foundation.framework 和 CoreGraphics.framework 在“构建阶段”选项卡中有红色！

我试图运行一个示例项目而不修改其中的任何内容，但我有同样的错误

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T11:55:35.370

确保您不是为 OSX 而不是 iOS 构建应用程序。这可能会发生或有多种原因，包括更新 XCode。如果感到困惑，XCode 似乎默认为 OSX。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T12:09:57.110

我重新安装了x-code，之后它工作正常！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T11:36:50.860

从 Build Phases 选项卡中删除 UIKit、Foundation 和 CoreGraphics 框架并再次添加它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-09T13:35:27.727

可能在 Build Settings -> Valid Architecture 中有 arm64。所以只需删除架构 arm64 即可解决问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-20T00:49:15.753

这是我所做的导致此错误的操作。解决方案是：[如何再次添加已删除的框架](https://stackoverflow.com/questions/10433804/how-to-add-deleted-frameworks-again)

如果您还没有清空垃圾箱，请关闭 Xcode 并在 Finder 中打开垃圾箱。找到您不小心删除的框架文件夹。在 Finder 中，为 Macintosh HD\System\Library\Frameworks 打开另一个窗口，然后将框架从 Trash 拖放到 Frameworks 文件夹。重新打开 Xcode，您应该能够在目标设置中再次添加框架。

![在此处输入图像描述](../Images/484a8fcc4161709c51d2bb1809b0fbd3.png)

# c# - 从 DisplayTemplates 获取完整的模型实例

> ID：14603025
> 
> 赞同：1
> 
> 时间：2013-01-30T11:34:06.207
> 
> 标签：c#, asp.net-mvc, razor

在 DisplayTemplate 中，我始终可以通过访问`ViewData.Model`.
有没有办法从模板内部访问我正在渲染的属性所属的模型实例？例如：

```
public class IndexModel
{
    public DateTime Date { get; set; }

    [UIHint("Value")]
    public double? Value { get; set; }
} 
```

然后在 Index.cshtml 我有：

```
@model TestMVC3.Models.Home.IndexModel

@Html.DisplayFor(m => m.Value) 
```

我想知道是否有一种方法可以从 Value.cshtml DisplayTemplate 访问 IndexModel 类型的实例（我可以使用 Model 属性从 Index.cshtml 访问）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T13:57:50.020

找到它：ViewContext.Controller.ViewData.Model

# database - 当存在具有相同数据的另一个用户时如何将数据导入用户

> ID：14603029
> 
> 赞同：3
> 
> 时间：2013-01-30T11:34:17.917
> 
> 标签：database, oracle11g

当另一个用户使用相同的表时，我在尝试将数据导入用户时遇到 ORA-39151 错误

```
ORA-39151: Table "HR"."EMPLOYEES" exists. All dependent metadata and data will be skipped due to table_exists_action of skip 
```

当另一个用户存在相同的数据时，如何将所有表导入不同的用户。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T13:52:42.853

`impdp user/password DUMPFILE=file_name directory=dir LOGFILE=test.log REMAP_SCHEMA=USERA:USERB TABLE_EXISTS_ACTION=APPEND`

USER A 是现有用户 USER B 是新用户

# html - IE/Chrome for i 标签的差异行为

> ID：14603032
> 
> 赞同：0
> 
> 时间：2013-01-30T11:34:21.873
> 
> 标签：html, css

我在 Internet Explorer 和 Google Chrome 之间存在一些行为差异。

我有一张带有“i”标签的桌子。在这个标签中，我有 2 个字母：E + F

在 Internet Explorer 上：如果我将鼠标悬停在“X”或“F”上——> 它们会显示为蓝色。这对我来说没问题。

在谷歌浏览器上：如果我将鼠标悬停在“X”上——>什么也没发生。（只有“F”是可以的）

如何调整 css 使其具有与 IE 相同的行为？

这是jsfiddle：http: [//jsfiddle.net/Kvehr/2/](http://jsfiddle.net/Kvehr/2/)

```
<table class="search-transport">
  <tbody>
   <tr>
       <td><input type="checkbox" value="0"/></td>   
       <td>A1</td>
       <td><i class="icon-flag-3">F</i></td>
       <td>A2</td>
    </tr>
    <tr>
       <td><input type="checkbox" value="0"/></td>   
       <td>B1</td>
       <td><i class="icon-flag-3">F</i></td>
       <td>B2</td>
    </tr>
  </tbody>
</table>

.icon-flag-3:before {
    content: "X";
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:09:15.397

就像我在评论中提到的那样，这似乎是一个 IE 错误。

我建议按如下方式更改您的 HTML：

```
[...]
<td class="has-icon-flag-3"><i class="icon-flag-3">F</i></td>
[...] 
```

还有你的 CSS：

```
.has-icon-flag-3:hover i { color: blue } 
```

另外，让你的 CSS 不那么严格。[这是一个小提琴](http://jsfiddle.net/zySk4/1/)。

# css - 边界半径不适用于 Internet Explorer 9。

> ID：14603036
> 
> 赞同：-1
> 
> 时间：2013-01-30T11:34:40.823
> 
> 标签：css

```
<head>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
     </head>
      <fieldset class="fieldset_New_border"> 
      <legend> Specimen Actions</legend>
               My  Table Goes Here ..............
      </fieldset>

      .fieldset_New_border{
            -webkit-border-radius: 25px;
             -moz-border-radius: 25px;
             border-radius:25px;
        } 
```

是否有任何特定方法可以让 IE9 显示边框半径？它在 mozila 和其他浏览器上运行良好。我似乎无法让它自己工作。请在下面找到两个文件。这有什么不对吗。相同的代码在其他浏览器上使用弯曲边框，但不适用于 ie 9。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T11:39:18.953

第一个：添加背景或边框颜色，第二个：这应该在没有“x-ua-compatible”的情况下工作，在 IE 中按 f12 并查看文档模式和浏览器模式并查看数十个要求相同的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T12:06:09.713

s 上的圆角`fieldset`在 IE v9 及更低版本中不起作用。尝试将其更改为`div`，看看会发生什么。

# fluent-security - 如何将数据从流畅的安全自定义策略传递到控制器

> ID：14603038
> 
> 赞同：1
> 
> 时间：2013-01-30T11:34:47.697
> 
> 标签：fluent-security

我在我的项目中使用流利的安全性，在每个索引操作中，我想获取访问权限信息并将其传递给控制器​​，以根据当前登录用户的角色启用或禁用按钮。有没有办法从控制器的策略。请帮忙

提前致谢，阿努普

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T21:43:30.943

`SecurityContext.Current`您可以通过和访问 FluentSecurity 在执行期间使用的所有信息`SecurityConfiguration.Current`。但是正如 Brett 已经提到的，您还可以将所需的信息存储在其他地方并直接访问它。

[https://github.com/kristofferahl/FluentSecurity/wiki/SecurityContext](https://github.com/kristofferahl/FluentSecurity/wiki/SecurityContext)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T14:38:06.477

您可以将角色存储在会话中并将它们拉出会话。这就是流畅的安全性如何从您那里获得角色以进行基于角色的身份验证。

如果您查看他们的示例应用程序，他们就是这样做的。

# jquery - 如何操作jquery偏移结果

> ID：14603039
> 
> 赞同：0
> 
> 时间：2013-01-30T11:34:51.197
> 
> 标签：jquery

嗨，我有一个图像，我得到并使用它存储到变量中

```
var position = $(".portfolio-items a").offset(); 
```

但由于某种原因它返回

```
Object { top=1227.5, left=416.5} 
```

我将如何四舍五入并在末尾添加 px 以便我可以将其分配给一个新元素以将其放置在当前元素的顶部？

谢谢。

我已将该站点上传到 www.pixelcoding.co.uk，以便您可以查看问题所在。当您单击 AJLComputers 投资组合链接时，新图像应显示在旧图像之上，但垂直偏移约 200 像素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T11:37:04.353

您可以按原样使用该对象。

```
var position = $(".portfolio-items a").offset();
$( '#new-item' ).offset( position ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T11:36:57.770

只需`Math.round()`在返回的位置上使用：

```
var position = $(".portfolio-items a").offset(),
    top = Math.round(position.top) + 'px',
    left = Math.round(position.left) + 'px'; 
```

这将始终适当地四舍五入（因此向下*四舍五入*`0.4`到，向上*四舍五入*）；如果你总是想四舍五入，那么你可以使用代替：*`0``0.5`*`1``Math.ceil()``Math.round()`**

 **```
var position = $(".portfolio-items a").offset(),
    top = Math.cel(position.top) + 'px',
    left = Math.ceil(position.left) + 'px'; 
```

`Math.floor()`正如您可能想象的那样，还有一个总是*向下舍*入为整数。

但是，虽然您*可以*使用这些函数，但没有必要这样做，因为 jQuery 可以并且将按原样使用它们。

参考：

*   [`Math.ceil()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/ceil).
*   [`Math.floor()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/floor).
*   [`Math.round()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/round).**

# android - 在android中可以同时读取然后写入NFC标签吗？

> ID：14603042
> 
> 赞同：0
> 
> 时间：2013-01-30T11:34:54.397
> 
> 标签：android, nfc

我有一张 Mifare Desfire EV1 卡，用作 4A 型标签。我想立即阅读然后写入标签，而无需在阅读后重新点击。这是否可以在android中编写一个应用程序来做这样的事情......请帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T12:16:07.827

是的。基本上（NDEF）读取是由 Android 子系统默认完成的，然后您可以选择写入。

[如果您有兴趣，我在这里](http://code.google.com/p/ndef-tools-for-android/)放了一些模板，尽管您必须将其中两个结合起来才能达到预期的效果。

# vba - 超出文件共享锁定计数

> ID：14603044
> 
> 赞同：1
> 
> 时间：2013-01-30T11:34:55.690
> 
> 标签：vba, ms-access

我不断收到“文件共享锁定计数已超过”的错误消息。有一些变通方法可以增加每个会话的注册表或更改注册表文件，但我不希望用户必须经历这些。有谁知道为什么我可能会收到这样的错误？

这是我的代码：

```
Dim rst As DAO.Recordset
Dim rstCopy As DAO.Recordset
Dim Counter As Long

Set rst = dbs.openrecordset("SELECT * FROM [Qry_Calculate_Picking_Times]", dbopendynaset)
Set rstCopy = dbs.openrecordset("SELECT * FROM [Qry_Calculate_Picking_Times]", dbopendynaset)

rst.MoveLast
Counter = rst.RecordCount
rst.MoveFirst

rst.MoveNext
Counter = Counter - 1

While Counter > 0

With rst

If ![OWPPCK] <> rstCopy![OWPPCK] Or ![JustDate] <> rstCopy![JustDate] Or DateDiff("s", rstCopy![TIMESTAMP], ![TIMESTAMP]) > 3600 Then
    .Edit
    ![Time Difference Seconds] = Null
    .Update
Else
    .Edit
    ![Time Difference Seconds] = DateDiff("s", rstCopy![TIMESTAMP], ![TIMESTAMP])
    .Update
End If

If ![OWPFID] <> rstCopy![OWPFID] Then
    If ![OWPPCK] <> rstCopy![OWPPCK] Then
    Else
        .Edit
        ![NewLocation] = True
        .Update
    End If
End If

End With

rst.MoveNext
rstCopy.MoveNext

Counter = Counter - 1

Wend

rst.Close
rstCopy.Close 
```

似乎在这个阶段发生了错误

```
 Else
       .Edit
       ![Time Difference Seconds] = DateDiff("s", rstCopy![TIMESTAMP], ![TIMESTAMP])
       .Update
    End If 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-05T01:03:54.377

不确定，但似乎像您正在比较两个记录集的记录会导致问题。它不应该，但我们并不生活在一个完美的世界中。

您尝试完成的工作应该足够容易，只需使用一个记录集即可执行。只需在执行 movenext 之前将先前的记录存储在变量中......然后与当前记录进行比较。我已经发布了我认为可行的代码。

注意：1）我还将字段存储在当前记录集中您正在比较的变量中，以使代码更易于阅读，并且......如果您稍后参考这些字段值，它应该加快速度没有为相同的值多次点击记录集（或者，我认为。） 2）当前记录变量的前缀为“This ...”，以前的记录变量的前缀为“Prev ...” 3）我使用了一个“Do until ... Loop”而不是“While ... wend”，因为那是我的编程风格。

希望它有效。这里是：

```
Sub DoIt
    Dim rst As DAO.Recordset
    Dim ThisOWPPK, PrevOWPPK
    Dim ThisJustDate, PrevJustDate
    Dim ThisTIMESTAMP, PrevTIMESTAMP
    Tim ThisOWPFID, PrevOWPFID

    Set rst = dbs.openrecordset("SELECT * FROM [Qry_Calculate_Picking_Times]", dbopendynaset)

    rst.MoveFirst

    Do Until rst.EOF
        PrevOWPPCK = ![OWPPCK]
        PrevJUSTDate = ![JustDate]
        PrevTIMESTAMP = ![TIMESTAMP]
        PrevOWPFID = ![OWPDIF]

        rst.MoveNext
        ThisOWPPCK = ![OWPPCK]
        ThisJUSTDate = ![JustDate]
        ThisTIMESTAMP = ![TIMESTAMP]
        ThisOWPFID = ![OWPDIF]

        If ThisOWPPCK <> PrevOWPPCK Or ThisJustDate <> PrevJustDate Or DateDiff("s", PrevTIMESTAMP, ThisTIMESTAMP) > 3600 Then
            .Edit
            ![Time Difference Seconds] = Null
            .Update
        Else
            .Edit
            ![Time Difference Seconds] = DateDiff("s", PrevTIMESTAMP, ThisTIMESTAMP)
            .Update
            End If

            If ThisOWPFID <> PrevOWPFID Then
            If ThisOWPPCK <> PrevOWPPCK Then
                Else
                    .Edit
                    ![NewLocation] = True
                    .Update
            End If
        End If

    Loop

End Sub 
```

# c++ - Ruby 'inline' 3.12 数组返回？

> ID：14603050
> 
> 赞同：0
> 
> 时间：2013-01-30T11:35:06.690
> 
> 标签：c++, ruby, inline

如何从 Ruby 中的 C 代码返回一个数组？我正在使用内联 v3.12。

```
require 'inline'
class Object
inline(:C) do |builder|
  builder.c "
    VALUE some_method(VALUE s) {
      int s_len = RARRAY_LEN(s);
      int result = 0;
      int i = 0;

      VALUE *s_arr = RARRAY_PTR(s);

      for(i = 0; i < s_len; i++) {
        result += NUM2INT(s_arr[i]); 
      }

      return rb_float_new(result); // HERE I NEED ARRAY RETURN !!!!!
    }"
    end
end

a = Object.some_method([1,2,3,4])
puts a 
```

*   项目清单
*   项目清单
*   项目清单
*   项目清单

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T22:33:35.197

试试这个： rb_ary_new4(long length, VALUE *values") - 返回给定长度的新数组并填充 C 数组值。

它取自这里：[http](http://rubycentral.com/pickaxe/ext_ruby.html) ://rubycentral.com/pickaxe/ext_ruby.html （部分常用方法）

# apache - 我是如何在 yii 上进行重定向的

> ID：14603057
> 
> 赞同：0
> 
> 时间：2013-01-30T11:35:25.783
> 
> 标签：apache, mod-rewrite, url-rewriting, yii, rewrite

我有一个网址。

```
http://www.example.org/index.php/
http://www.example.org/index.php
http://www.example.org/
http://www.example.org
http://example.org/index.php/
http://example.org/index.php 
```

我需要重写

```
http://example.org/ 
```

在 yii 上工作，包括 css 样式和 js。现在我使用这个 .htaccess

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . index.php 
```

我发现这个解决了

```
RewriteEngine On
Options +FollowSymLinks
RewriteCond %{HTTP_HOST} ^www.yoursite.org(.*)
RewriteRule ^(.*)$ http://yoursite.org/$1 [R=301,L] 
```

这怎么能结合？如何在路径的（全部）末尾放置“/”斜杠或删除斜杠？

# c# - 如何强制 InitializeComponent 代码在我的用户组件上使用 IContainer (this.components) 构造函数？

> ID：14603060
> 
> 赞同：1
> 
> 时间：2013-01-30T11:35:35.323
> 
> 标签：c#, winforms

我制作了一个需要访问表单上所有其他组件/控件的组件，它继承了 Component 并有两个构造函数

```
public MyComponent(IContainer container) 
```

和

```
public MyComponent() 
```

前者从未在设计器生成的代码中使用。我怎样才能告诉设计师始终使用它（并在需要时实例化 this.components）？我需要的结果是这样的：

```
this.myComponent1 = new MyComponent(this.components); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T11:54:48.037

您可以在 InitializeComponent 之后显式调用构造函数。我仍然想知道您正在使用和传递什么组件？

# php - codeigniter - 简单的数据库插入失败且没有错误

> ID：14603061
> 
> 赞同：1
> 
> 时间：2013-01-30T11:35:43.927
> 
> 标签：php, database, codeigniter

我正在运行一个 codeigniter 应用程序，但我无法让这个简单的插入正常工作。

```
if(!$this->db->insert('myTable',$entry)){
    $p3 = 0;
}else{
    echo $this->db->last_query();
    var_dump($this->db->_error_message());
} 
```

“else”子句中的调试总是向我显示错误消息的空字符串，如果我在 phpmyadmin 中测试 last_query，则插入效果很好。

但是当我正常运行应用程序时插入没有发生，即使启动了“else”，也意味着请求成功。

有什么线索吗？

更新：$entry 数组的示例：

```
$entry = array(
    'id' => '',
    'id_devis' => $current[0]->id,
    'metier' => $_POST[$i+1 . '_create_metier'],
    'days' => $_POST[$i+1 . '_create_daycount'],
    'price' => $_POST[$i+1 . '_create_price'],
    'cr_date' => date('Y-m-d H:i:s'),
    'user' => ''
); 
```

$current 是另一个表的提取（使用 $this->db->get），所有数据都很好，因为我可以通过 last_query() 的回声插入它们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:26:56.957

放

```
error_reporting(E_ALL);
ini_set('display_errors', '1'); 
```

在插入的行之前。您应该会看到一条错误消息。

我的猜测是您尝试为 id 插入非法值。可能的原因： - 它不应为空。- 它不能是字符串（即，如果类型是整数）

大多数情况下，数据库中的 id 是 int 类型，并且是一个自增字段。如果是这样，您不应该尝试插入 id。它将为您创建。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T16:03:26.540

才发现问题，没有。一个脚本正在删除我刚刚在代码中进一步插入的行，插入成功。谢谢大家的回答

# java - 我的 JDK 中没有 javax.servlet 包

> ID：14603062
> 
> 赞同：2
> 
> 时间：2013-01-30T11:35:48.620
> 
> 标签：java, eclipse, environment-variables

我正在关注`Head First: Servlet and JSP`并且正在编写我的第一个 Servlet。
我尝试使用命令行对其进行编译，但出现了一个`package javax.servlet`不存在的错误。

到目前为止，我已经将`JAVA_HOME`变量设置为值：`C:\Program Files\Java\jdk1.7.0_11` 并且`PATH` 变量也设置为`C:\Program Files\Java\jdk1.7.0_11\bin`

**我如何获得`javax.servlet`包裹？**

另外，我`JDK 7 update 11`在被利用的小程序错误之后安装了。
我都有`JDK Update 11`并`JDK Update 9`安装了。
我应该摆脱`Update 9`还是不需要？

## 杂项

**操作系统：** Windows 7 家庭高级版 32 位

*我也尝试过：*

`javac -cp .;D:\Program Files\apache-tomcat-7.0.35-windows-x86\apache-tomcat-7.0.35\lib\servlet-api.jar Ch1servlet.java`

我尝试了正斜杠和反斜杠。在这两种情况下，我都收到了无效标志错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T11:45:58.517

```
javac -cp .;D:\Program Files\apache-tomcat-7.0.35-windows-x86\apache-tomcat-7.0.35\lib\servlet-api.jar Ch1servlet.java 
```

您已经完成了 99%，您只需要添加一些额外的引号，因为您的 servlet API jar 的路径包含空格。试试这个：

```
javac -cp ".;D:\Program Files\apache-tomcat-7.0.35-windows-x86\apache-tomcat-7.0.35\lib\servlet-api.jar" Ch1servlet.java 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T11:41:14.847

不会是因为

*   Servlet 是 Java-EE 的一部分，而不是 Java-SE
*   如果需要使用 servlet，则需要下载并添加 java-ee 库

# c# - 水晶报表组排序公式

> ID：14603063
> 
> 赞同：0
> 
> 时间：2013-01-30T11:35:49.840
> 
> 标签：c#, crystal-reports-2010

我已经设置了组排序公式并且工作正常，但是每次运行报告时都会询问参数的值，我的报告中已经有一个包含排序值的字段，我想将参数值设置为此字段但没有成功，每次出现提示时，我都必须再次编写排序值，然后它才能工作。

```
if{?Sort}="Mortgage Advisor Ascending"
then 
crAscendingOrder else crDescendingOrder 
```

我可以将值设置为该字段的任何方法吗？我是否也必须编写一个公式来将此字段设置为此参数？如果是，如何以及在哪里？我的等值公式是：

```
{ActiveApplicationsReportDT.SortField} = {?Sort} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T04:41:52.667

我刚刚找到了相同的答案，我必须从代​​码本身传递一些参数值，所以我在查询字符串中传递排序顺序，然后我通过拆分查询字符串来设置参数，所以我只是在我的报告参数中给出了一个排序参数，现在工作完成了。

```
ParameterFields Fields = new ParameterFields();
ParameterField ItemFd= new ParameterField();
ItemFd.ParameterFieldName = "NewParameter"; 
ParameterDiscreteValue DItemFd = new ParameterDiscreteValue();
DItemFd.Value = SortOrder;// this a sort parameter
ItemFd.CurrentValues.Add(DItemFd);
Fields.Add(ItemFd); 
```

# jquery - 点击功能上的Jquery将类添加到特定的div

> ID：14603068
> 
> 赞同：2
> 
> 时间：2013-01-30T11:36:07.223
> 
> 标签：jquery

我有代码html

```
<div class="mobile"></div>
    <ul id="nav">
        <li><a href="index.php">Home</a></li>
        <li><a href="about.php">About</a></li>
        <li><a href="work.php">Work</a></li>
        <li><a href="contact.php">Contact</a></li>
    </ul>
</div> 
```

我需要：单击将类添加到 ul

```
<div class="mobile"></div>
    <ul id="nav" class="visible">
        <li><a href="index.php">Home</a></li>
        <li><a href="about.php">About</a></li>
        <li><a href="work.php">Work</a></li>
        <li><a href="contact.php">Contact</a></li>
    </ul>
</div> 
```

我试过了：

```
jQuery(document).ready(function() {
    jQuery('.mobile').click(function(){
        jQuery('#nav').removeClass('selected')
        jQuery('#nav').addClass('selected');
    });
}); 
```

当我第一次单击 js 添加所需的类时；但是当我再次单击它什么都不做时，它应该删除该类，但它不起作用。我怎样才能做到这一点？

有谁知道这个问题的答案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T11:41:28.200

使用`toggleClass()`：

```
jQuery(document).ready(function() {
    jQuery('.mobile').click(function(){
         jQuery('#nav').toggleClass('selected');
    });
}); 
```

虽然我不清楚你想要`visible`上课还是`selected`上课。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T11:41:37.470

您在代码中所做的是每次单击时都会删除并添加类。因此，它在第一次点击后保持添加。您可以这样做以获得所需的行为：

```
$(document).ready(function() {
    $('.mobile').click(function(){
        $('#nav').toggleClass('selected');
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-06T06:44:29.537

你究竟想要什么。如果你想添加班级，点击不止一次，班级就会被添加。如果您想在未添加类的情况下添加并在已为每次单击添加类的情况下删除，那么下面的代码应该可以工作。

```
$('.mobile').click(function() {
   $('#nav').toggleClass('selected');
}); 
```

# xcode - Xcode：如何创建图像处理应用程序？移动、调整大小和放置图像

> ID：14603069
> 
> 赞同：-1
> 
> 时间：2013-01-30T11:36:10.170
> 
> 标签：xcode, image

嘿，我想创建一个类似于这些“面部杂耍者”应用程序的应用程序，以及其他为用户拍摄照片的应用程序，然后您可以将图像拖到顶部以添加效果。我见过一个戴太阳镜的，我想做一个戴帽子的（为我的品牌）。所以基本上我需要能够拍照或从库中选择，然后将其放入，然后将此图像添加到可以调整大小和移动的顶部，然后我需要将最终图像导出到相机胶卷或 Facebook等等。有人知道我应该从哪里开始吗？我对此很陌生，找不到任何指南或相关问题感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T12:30:16.127

一个非常有用的来源是 Apple 的 Core Image Programming Guide。在这些文档中，您将找到有关图像过滤器和图像处理的所有内容。但首先你必须实现一个 UIImagePickerConroller。使用此控制器，您的应用程序的用户可以使用设备相机或从库中选择图像来拍照。

# .net - 为什么 DataContractSerializer 会忽略 XmlWriterSettings 设置？

> ID：14603073
> 
> 赞同：0
> 
> 时间：2013-01-30T11:36:26.680
> 
> 标签：.net, newline, encode, datacontractserializer

我的数据实体包含一个字典，但 XmlSerializer 不支持它们开箱即用。所以我决定使用 DataContractSerializer。问题是我无法让它按照我的需要运行。

我从以下代码开始：

```
public static string SerializeObject<T>(T serialisable)
{
    var serializer = new DataContractSerializer(serialisable.GetType());
    using (var writer = new StringWriter())
    using (var stm = new XmlTextWriter(writer))
    {
        serializer.WriteObject(stm, serialisable);
        return writer.ToString();
    }
} 
```

它似乎工作正常，直到我注意到如果我将“\r\n”放在一个字符串中，它不会被序列化为 XML 实体。根据我使用 XmlSerializer 的经验，我知道我可以使用 NewLineHandling = NewLineHandling.Entitize 设置 XmlWriterSettings。所以我将我的代码转换为以下内容：

```
public static string SerializeObject<T>(T serialisable)
{
    var serializer = new DataContractSerializer(serialisable.GetType());
    using (var writer = new StringWriter())
    {
        using (var stm = XmlWriter.Create(writer,
            new XmlWriterSettings()
            {
                NewLineHandling = NewLineHandling.Entitize
            }))
        {
            serializer.WriteObject(stm, serialisable);
            return writer.ToString();
        }
    }
} 
```

现在的问题是我得到一个空字符串。没有例外，没有 - 只是一个空字符串。stm 变量保存 XmlWellFormedWriter。也许 DataContractSerializer 不支持它？

然后我尝试执行 XmlTextWriter 如下：

```
public static string SerializeObject<T>(T serialisable)
{
    var serializer = new DataContractSerializer(serialisable.GetType());
    using (var writer = new StringWriter())
    using (var stm = XmlWriter.Create(new XmlTextWriter(writer),
        new XmlWriterSettings()
        {
            NewLineHandling = NewLineHandling.Entitize
        }))
    {
        serializer.WriteObject(stm, serialisable);
        return writer.ToString();
    }
} 
```

这让我回到了开始的地方——我取回了 XML 字符串，但“\r\n”字符串又没有被转换为实体。

如何使 DataContractSerializer 实体化换行符并将 XML 作为字符串返回？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-01T22:56:01.920

我知道这是一个相当古老的线程，但我偶然发现它正在寻找答案，并认为我会回答我发现的问题。

\n 没有被实体化的原因是因为它们在文本节点值中。如果 \n 字符在属性中，则序列化程序只会实体化它们。

这是我发现在每个 NewLineHandling 值中会发生的情况

***文本节点***

```
NewLineHandling.Replace (Default) 
\r \n \r\n all go to \r\n
\t remains as \t

NewLineHandling.Entitize
\r\n goes to &#D;
\n remains as \n
\r goes to &#D;
\t remains as \t

NewLineHandling.None
\r remains \r
\r\n remains \n
\r\n remains \r\n
\t remains as \t 
```

***属性***

```
NewLineHandling.Replace (Default) 
\r\n goes to &#D;&#A;
\n goes to &#A;
\r goes to &#D;
\t remains &#9;

NewLineHandling.Entitize
\r\n goes to &#D;&#A;
\n goes to &#A;
\r goes to &#D;
\t remains &#9;

NewLineHandling.None
\r remains \r
\r\n remains as \n
\r\n remains as \r\n
\t remains as \t 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T13:09:23.680

看来，问题主要是因为处理 XmlWriter 的工作方式 - 如果我使用 XmlWriter.Create 创建它，它在关闭之前不会刷新，因此 StringWriter 是空的。奇怪的是 - 如果我用新的 XmlTextWriter 创建它，它会以某种方式将其内容刷新到 StringWriter，所以我的初始方法工作得很好。

这次我只需要重新排列一行代码：

```
 public static string SerializeObject<T>(T serialisable)
    {
        var serializer = new DataContractSerializer(serialisable.GetType());
        using (var writer = new StringWriter())
        {
            using (var stm = XmlWriter.Create(writer,
                new XmlWriterSettings()
                {
                    NewLineHandling = NewLineHandling.Entitize,
                    Encoding = UTF8Encoding.UTF8
                }))
            {
                serializer.WriteObject(stm, serialisable);
                // <- previously writer.ToString() was here and I got an empty string
            }     

            return writer.ToString();
        }
    } 
```

现在 "\r" 字符被正确编码为`&#xD;`，但 "\n" 不是。而且编码还是utf-16，虽然我设置为UTF8。我想，那是另一个问题。

# jquery - Jquery通过部分名称获取类名

> ID：14603075
> 
> 赞同：3
> 
> 时间：2013-01-30T11:36:33.373
> 
> 标签：jquery

您好，我正在制作一个脚本来检查与主复选框相关的所有从复选框。这将使用类来完成。所以主复选框将具有“master1”、“master2”等类。相关的从复选框将具有“slave1”类（与 master1 相关）、“slave2”（与 master2 相关）等。

所以我将从：

```
jQuery('.checks_div input[type="checkbox"].^="master"').click(function(){ 
```

因此，当单击主节点时，我想选择所有相关的从节点并检查它们。但是怎么做？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T11:41:23.243

```
$('input[type="checkbox"][class^="master"]').on("click",function(){}) 
```

但委派更好

```
$(document.body).on('click','input[type="checkbox"][class^="master"]',function(){}) 
```

然后在点击功能中&如果你的奴隶在与主复选框相邻的 div 中

```
var $slaves=$(this).next().find('input[type="checkbox"][class*="slave"]') 
```

如果 html 不同，那么就想办法从刚刚选中的 $(this) 中选择那些奴隶

一旦你的奴隶在一个 jquery 对象中，检查他们：

```
$slaves.prop('checked', true); 
```

请参阅[使用 jQuery 为复选框设置“已选中”？](https://stackoverflow.com/questions/426258/how-do-i-check-a-checkbox-with-jquery-or-javascript)

如果你除了检查它们什么都不做，你甚至不需要在 jquery 对象中缓存你的奴隶

```
 $(this).//chain to select slaves
        .prop('checked', true) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T22:03:03.787

好吧，这是我来的代码：

```
$(document.body).on('click','input[type="checkbox"][class^="master"]',function(){
  var slaves = $(this).next('label').next('div.slaves').find('input[type="checkbox"][class*="slave"]');
  var master = $(this);
  $(slaves).attr('checked', $(this).is(':checked'));
}); 
```

这很好用。虽然我在 jquery 1.9.0 及更高版本中发现了一个错误。在这里：http: [//jsfiddle.net/x3NpL/](http://jsfiddle.net/x3NpL/)

1.8.3 工作正常，如果你走得更高，它将工作两次并停止工作.. 很奇怪。顺便说一句，如果使用 $(slaves).click() 则不会发生这种情况，但 click() 没有所需的结果。

无论如何，我使用的解决方案是添加一个 div 来包含相关的奴隶，但我仍然想知道如何在没有 div 的情况下做到这一点。这个想法很简单：点击master，获取它的类号（master14 - number 14 etc..），检查所有具有这个数字的slave（slave14）。我只是不知道如何从中获取数字，考虑到该班级可能拥有多个班级，例如 class="class1 class2 master14" ..

谢谢

# php - php脚本文件不在服务器上运行

> ID：14603076
> 
> 赞同：0
> 
> 时间：2013-01-30T11:36:43.847
> 
> 标签：php

我已经在我的服务器上上传了 php 文件，但是当我在服务器上运行它时没有执行。但图像文件正确打开。我还检查了 zip、xml 和其他文件是否正常工作，但`.php`扩展文件不工作。

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T11:40:09.360

您必须检查您的主机是否安装了 php 模块，如果没有，当您尝试访问 php 文件时会看到一个下载对话框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T11:40:35.723

最可能的原因是：

*   您的 Web 服务器未配置为支持 PHP
*   您文件的权限不会赋予服务器执行 PHP 程序的权限

如果文件是由浏览器下载的，则前者更有可能。如果服务器向用户显示 500 错误，则后者更有可能发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T11:40:56.627

在 php.ini 中寻找这一行

```
engine = On 
```

在 apache 模块中 `php5_module`这应该被勾选（打开）。

还

如果您在 Apache 模块中勾选了 mime_module

检查您在 httpd.conf 中是否正确设置了 mime 类型

此行是必需的

```
AddType application/x-httpd-php .php 
```

# sql - 使用 SQL 将第三个表中的两个表与附加标志列合并

> ID：14603079
> 
> 赞同：1
> 
> 时间：2013-01-30T11:36:50.490
> 
> 标签：sql, sql-server

我有 2 张桌子：

一是促销

```
| PromoId |Promo Decription|
----------------------
|   101   |  abc|
|   102   |  pqr|
|   103   |  alp|
|   104   |  adc|
|   201   |  abc| 
```

另一个是 PromotionType

```
| PromoId | PromoType  | 
----------------------
|   101   |  1   |  
|   121   | 2    |  
|   188   | 3    |  
|   104   | 4    |  
|   191   | 4    |  
|   102   | 4    | 
```

我想要一个结果表

```
| PromoId | Flag |Promo Decription |PromoType  |    
----------------------
|   101   |  1   |                 | 1 |
|   121   | 0    |                 | 2 | 
|   188   | 0    |                 | 3 | 
|   104   | 1    |  adc            | 4 |  
|   191   | 0    |                 | 4 |  
|   102   | 1    |  pqr            | 4 | 
|   103   | 1    |  alp            |   |
|   201   | 0    |  abc            |   | 
```

即我想要一个结果表，它是两个表的并集。它不应该包含重复的值，并且对于两个表共有的 PromoId 的所有值，flag 的值都设置为 true。

我使用 Sql Server 作为我们的数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T11:41:39.933

您可以使用 a`FULL OUTER JOIN`来执行此操作：

```
select 
  coalesce(p.promoid, t.promoid) promoid,
  case when p.promoid = t.promoid then 1 else 0 end flag
from promotion p
full outer join promotiontype t
  on p.promoid = t.promoid
order by promoid 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/eec7a/2)

结果：

```
| PROMOID | FLAG |
------------------
|     101 |    1 |
|     102 |    1 |
|     103 |    0 |
|     104 |    1 |
|     121 |    0 |
|     188 |    0 |
|     191 |    0 |
|     201 |    0 | 
```

编辑，即使您对数据样本进行了更改，查询仍会产生结果：

```
select 
  coalesce(p.promoid, t.promoid) promoid,
  case when p.promoid = t.promoid then 1 else 0 end flag,
  isnull(p.[Promo Decription], '') [Promo Decription],
  isnull(t.PromoType, null) PromoType
from promotion p
full outer join promotiontype t
  on p.promoid = t.promoid
order by 
  case when PromoType is not null then 0 else 1 end, promotype, promoid 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/160f7/8)

结果是：

```
| PROMOID | FLAG | PROMO DECRIPTION | PROMOTYPE |
-------------------------------------------------
|     101 |    1 |              abc |         1 |
|     121 |    0 |                  |         2 |
|     188 |    0 |                  |         3 |
|     102 |    1 |              pqr |         4 |
|     104 |    1 |              adc |         4 |
|     191 |    0 |                  |         4 |
|     103 |    0 |              alp |    (null) |
|     201 |    0 |              abc |    (null) | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T14:18:30.100

您可以使用以下脚本：

```
 select a.PromoID,
    coalesce((case when b.promoID=a.promoID then '1'
          when b.promoID<>a.promoID then '0'
    end),'0') flag
    from hr.promotion_type a
    LEFT OUTER join hr.promotion b
    on(a.promoID= b.promoid) 
```

这里，HR是我用的schema，可以用你对应的schema

# javascript - Dojo 网格：更新后的松散选择

> ID：14603086
> 
> 赞同：0
> 
> 时间：2013-01-30T11:37:07.177
> 
> 标签：javascript, dojo, dojox.grid.datagrid, dojox.grid

我目前正在使用带有分页、过滤和单元格编辑的 Dojo EnhancedGrid。

问题是在一个页面中，我需要在编辑单元格时更新另一个值。当我更新这个值时，我失去了选择的单元格，所以我需要单击下一个单元格来选择它并修改它。无法执行 Enter / edit / enter / down / enter / edit（Excel 类似版本）。

这是我的代码的一部分：

```
var store = new dojo.data.ItemFileWriteStore({'data':data});
var grid = new dojox.grid.EnhancedGrid({
    id: 'grid',
    store: store,
    structure: structure,
    columnReordering: true,
    autoHeight: true,
    autoWidth: true,
    initialWidth: '100%',
    escapeHTMLInData: false,
    plugins: {
            pagination: {
                pageSizes: ["10", "25", "50", "All"],
                description: true,
                sizeSwitch: true,
                pageStepper: true,
                gotoButton: true,
                maxPageStep: 4,
                position: "bottom"

            },
            filter : {}
    },
    onStartEdit: function(inCell, inRowIndex)
    {
        item = grid.selection.getSelected()[0];
        currentVal = item[inCell['field']][0];
    },
    doApplyCellEdit: function(inValue, inRowIndex, inAttrName) {
          if(inValue != currentVal){
               [...]
               $.ajax(url, data, {
                           success:function(data, textStatus) {
                                val = parseInt(data["info"]);
                                if(!isNaN(val)) {
                                    grid.store.setValue(item, 'info', val);
                                    grid.update();
                                } else {
                                    grid.store.setValue(item, 'info', 0);
                                    grid.update();
                                }
                            }
                });
            }

        }

    });
    dojo.byId("gridDiv").appendChild(grid.domNode);
    grid.startup(); 
```

您是否看到任何解决方案来处理此问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T07:11:19.010

我也使用增强的道场网格，在那里我遇到了类似的问题。我用它来重新加载数据：

```
require(["dijit/registry"],function(registry)   {
            var grid = registry.byId('grid');
            grid._lastScrollTop=grid.scrollTop;
            grid._refresh();
        }); 
```

有了这个，你总是应该得到你操纵的最后一行，最终也是最后一个选择的......。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T16:09:11.303

经过多次研究，我找到了以下解决方案：

```
 $.ajax(url, data, {
                       success:function(data, textStatus) {
                            val = parseInt(data["info"]);
                            if(!isNaN(val)) {
                                grid.store.setValue(item, 'info', val);
                                grid.update();
                                window.setTimeout(function() {
                                    grid.focus.next();
                                }, 10);
                            } else {
                                grid.store.setValue(item, 'info', 0);
                                grid.update();
                                window.setTimeout(function() {
                                    grid.focus.next();
                                }, 10);
                            }
                        }
            }); 
```

需要计时器，因为在网格更新之前有很短的延迟，从而失去了焦点。

# javascript - 将函数内部原型分配给函数原型对象

> ID：14603091
> 
> 赞同：1
> 
> 时间：2013-01-30T11:37:20.093
> 
> 标签：javascript, jquery

1.为什么下面的赋值是假的？

2.下一条路是什么？

```
var A = function(name) {
    this.name = name

    }

     A.prototype == A.__proto__; //false 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:40:13.443

您正在尝试使用方程式运算符来比较两个对象。在 javascript 中，您不能使用 '==' 运算符比较两个对象。

看看这里： [JavaScript 中的对象比较](https://stackoverflow.com/questions/1068834/object-comparison-in-javascript)

# c# - 使用字符串作为 IEnumerable

> ID：14603093
> 
> 赞同：20
> 
> 时间：2013-01-30T11:37:38.757
> 
> 标签：c#, .net, string, windows-8, windows-store-apps

在 .NET for Windows Store Apps 中——看起来——你不能再将字符串用作 Enumerables。以下代码适用于桌面应用程序，但不适用于应用程序：

```
public static bool SolelyConsistsOfLetters(string s)
{
    return s.All(c => char.IsLetter(c));
} 
```

错误是

> “string”不包含“All”的定义，并且找不到接受“string”类型的第一个参数的扩展方法“All”（您是否缺少 using 指令或程序集引用？）

但我并没有错过程序集参考或`using System.Linq;`. 以下代码**确实**有效：

```
public static IEnumerable<char> StringAsEnumerable(string s)
{
    foreach (char c in s)
    {
        yield return c;
    }
}

public static bool SolelyConsistsOfLetters(string s)
{
    return StringAsEnumerable(s).All(c => char.IsLetter(c));
} 
```

问题是，`s as IEnumerable<char>`不起作用（错误：“无法将类型'字符串'转换为'System.Collections.Generic.IEnumerable'（..）”）并且`s.GetEnumerator()`不可用。

我的问题：

1.  真的没有优雅的方式将字符串用作 Enumerables（没有上面的辅助方法）吗？我觉得我一定错过了一些非常明显的东西。
2.  由于字符串的行为不像 Enumerable，为什么/如何在这里工作？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-30T11:54:42.463

[`String.IEnumerable<Char>.GetEnumerator`](http://msdn.microsoft.com/en-us/library/cc672334.aspx)Windows Store 应用程序的 .NET 不支持该方法，但是[`String.IEnumerable.GetEnumerator`](http://msdn.microsoft.com/en-us/library/bb344612.aspx)支持非泛型，这就是该`foreach`方法有效的原因。

基于此，我认为也应该可以这样做：

```
s.Cast<char>().All(c => char.IsLetter(c)) 
```

* * *

**更新**（关于 Jani 评论）`foreach`已经通过将每个变量定义为`char`. 非泛型`IEnumerable`版本返回对象，并且在编译时从对象到任何其他类型的每次转换都是可以接受的，这就是它起作用的原因。

以下代码也可以正常编译，但在运行时会失败：

```
var valid = new object[] {'1', '2', '3'};

foreach (char c in valid)
    Console.WriteLine(c);

var invalid = new object[] { 1, 2, 3 };

foreach (char c in invalid)
    Console.WriteLine(c); // Fails at runtime; InvalidCastException 
```

# c# - Monotouch - 在网络共享上播放视频

> ID：14603097
> 
> 赞同：1
> 
> 时间：2013-01-30T11:37:46.087
> 
> 标签：c#, xamarin.ios, video-streaming

我们正在构建一个仅在我们的基础设施中使用的应用程序。我们在 Windows 文件共享中有视频，我们想在应用程序中播放这些视频。这些视频在嵌入应用程序时可以正常工作，但由于其中一些视频太大，我们想将它们移出。

我正在尝试使用 smb:// url 引用视频，但这似乎不起作用。

我也尝试使用 file:// url 来引用它们，但无济于事。我可以从 dev mac 中看到该文件夹​​。

这应该起作用还是我需要做更多的工作才能实现它？比如流媒体？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T12:04:26.990

iOS 无法访问任何类型的共享目录（smb:// 或 file://），如果您想使用这样的共享目录，则必须向您的应用程序添加代码以自行连接和传输文件。

但是 iOS 可以访问 Web 服务器，因此如果您可以设置一个简单的 http 服务器（Apache 或 IIS），并使用 http 协议提供文件，它应该可以正常工作。

# servlets - Digester startElement Begin 事件抛出异常

> ID：14603098
> 
> 赞同：2
> 
> 时间：2013-01-30T11:37:49.983
> 
> 标签：servlets

在 WAS7.0 服务器上发布 EAR 文件时，我遇到了异常。

org.apache.commons.digester.Digester startElement Begin 事件抛出异常

我已经在 WEB-INF/lib 文件中包含了 commons-digester.jar 文件，但仍然出现此异常。

任何解决方案请......

# actionscript-3 - stage.loaderInfo.parameters 有效，但 LoaderInfo(this.root.loaderInfo).parameters 无效

> ID：14603100
> 
> 赞同：1
> 
> 时间：2013-01-30T11:37:52.457
> 
> 标签：actionscript-3

我在我的 game.html 文件中传递 Flashvars。

MyClass 是我的 game.swf 的文档类名称

```
public class MyClass extends MovieClip {
  public function MyClass() {
    loaderInfo.addEventListener(Event.COMPLETE, _Init);
  }

  public function _Init(e:Event) {
    var parameters:Object = LoaderInfo(this.root.loaderInfo).parameters;
    // There is nothing in parameters object.
  }
} 
```

我的 game.fla 包含主时间轴上的各个层。我有另一个只有一层的游戏，并且该游戏正确加载了参数。我觉得这很奇怪。

笔记：

1.  跟踪上面代码中的root.name -> instance8（时间线有8层）
2.  在另一个游戏中跟踪 root.name（其中 flashvars 正在工作）-> root1 是跟踪的输出

我在这里错过了一些非常基本的东西吗？

**解决了这个问题，但无法理解原因**

所以，我改变了线路

```
var parameters:Object = LoaderInfo(this.root.loaderInfo).parameters; 
```

至

```
var parameters:Object = stage.loaderInfo.parameters; 
```

为什么第一种方法不起作用？

# aem - 如何在 CQ 5.5 中反向复制表单数据和用户配置文件

> ID：14603101
> 
> 赞同：1
> 
> 时间：2013-01-30T11:37:57.977
> 
> 标签：aem

我在 CQ 5.5 中创建反向复制，用于将表单数据和用户配置文件从 CQ5 发布复制到作者实例。

（点击链接 - [http://www.wemblog.com/2011/10/how-to-set-up-usergroupprofile-reverse.html][1]

以下是问题场景：

1.  **在用户**和**组**的作者实例中创建了**2 个启动器**。
*****   在发布实例的 CRXDE 中，为 Profile 文件夹下新创建的用户配置文件添加了属性：路径 = /home/user/*/profile 属性为：i)。cq:distribute=true ii)。来源=作者名（作为 key=value ）*   在发布实例中再创建 1 个启动器：将工作流启动器配置添加为****

 ****> 事件类型：修改节点类型：sling：文件夹路径：/home/users/(.*)/profile 条件：cq:distribute!= 工作流：/etc/workflow/models/reverse_replication 运行模式：发布

1.  在作者实例中创建了另外 1 个启动器：将工作流模型创建为

> 一个流程步骤实现：com.day.cq.wcm.workflow.process.ActivatePageProcess 添加工作流启动器配置：事件类型：修改节点类型：吊索：文件夹路径：/home/users/(.*)/profile 条件：source!=工作流程：选择您在上面创建的模型运行模式：作者

完成所有步骤后，反向复制不会发生。在发布实例中创建新用户后，它会给出错误 200 页面。

如果我缺少任何步骤或此反向复制的解决方案是什么或 CQ 版本 5.5 和 5.4 存在一些兼容性问题，请帮助并纠正我。目前我正在开发 5.5。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:10:49.283

您是否设置并启用了反向复制代理？CQ5.5的官方文档页面上有很好的说明：

[http://dev.day.com/docs/en/cq/5-5/deploying/configuring_cq/replication.html](http://dev.day.com/docs/en/cq/5-5/deploying/configuring_cq/replication.html)

**更新链接：** [https ://web.archive.org/web/20150907032514/http://docs.adobe.com/docs/en/cq/5-6-1/deploying/replication.html](https://web.archive.org/web/20150907032514/http://docs.adobe.com/docs/en/cq/5-6-1/deploying/replication.html)****

# c# - 客户端断开连接时关闭服务器套接字

> ID：14603102
> 
> 赞同：0
> 
> 时间：2013-01-30T11:37:58.440
> 
> 标签：c#, client-server

我有这个代码：

```
 private void startServer()
    {
        new Thread(() => StartListening()).Start();
    }

    void StartListening()
    {
        serverSocket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
        serverSocket.Bind(new IPEndPoint(0, serverPort));
        serverSocket.Listen(100);

        Accept();
    }

    void Accept()
    {
        while (true)
        {
            acceptedMessages = serverSocket.Accept();

            Buffer = new byte[acceptedMessages.SendBufferSize];
            int bytesRead = acceptedMessages.Receive(Buffer);

            byte[] formatted = new byte[bytesRead];

            for (int i = 0; i < bytesRead; i++)
            {
                formatted[i] = Buffer[i];
            }
            string command = Encoding.ASCII.GetString(formatted);
            string[] splittedCommand = command.Split(' ');

            jobsHistory.Items.Add(Encoding.ASCII.GetString(formatted));
            jobsHistory.Refresh();

            Process processToRun = new Process();
            processToRun.StartInfo.FileName = splittedCommand[0];
            processToRun.StartInfo.WorkingDirectory = Path.GetDirectoryName(splittedCommand[0]);
            processToRun.StartInfo.Arguments = "";
            for (int i = 1; i < splittedCommand.Length; i++)
            {
                processToRun.StartInfo.Arguments += " " + splittedCommand[i];
            }

            processToRun.Start();

            if (!isSocketConnected(serverSocket))
            {
                connectionStatusColor.BackColor = Color.Red;
                isConnected = false;
                startStopListnening.Text = "Listen";
                break;
            }

        }

        acceptedMessages.Shutdown(SocketShutdown.Both);

        // If you want to start listening again
        serverSocket.Shutdown(SocketShutdown.Both);
        startServer();
    } 
```

当应用程序检测到客户端已断开连接时，我试图寻找一种安全关闭套接字的方法。

我看到了一些关于`serverSocket.close()`和`serverSocket.shutdown(SocketShutdown.Both);`

但是每次客户端断开连接时，应用程序都会崩溃。

有任何想法吗？

# javascript - 如何使用 .mousemove 根据与中心页面的距离淡化背景图像？

> ID：14603103
> 
> 赞同：3
> 
> 时间：2013-01-30T11:37:58.237
> 
> 标签：javascript, jquery, trigonometry

我设置了这个功能

```
if (window.innerWidth && window.innerHeight) {
 var winW = window.innerWidth;
 }

var xM = winW/180; 

var axis = 0;
$(window).bind('mousemove',function(e){
 var xCoord =  Math.floor(e.pageX/xM);
 axis = 0.6 * Math.sin(xCoord);
 var pageCoords = "( " + e.pageX + ", " + e.pageY + ", " + xCoord + " )";
     $("span#showme").text(pageCoords);
 });
    setInterval(function() {
     $("#welcome-background").fadeTo(0, 0.4 + axis);
 }, 100); 
```

（用于额外的参考和工作视觉- [http://jsfiddle.net/ySjqh/2/](http://jsfiddle.net/ySjqh/2/)）

该代码理论上可以将页面均匀地划分为 0-180 的段，然后计算鼠标出现在哪个段中。然后使用 Math.sin() 函数得出要应用多少不透明度，基于填充的起点0.4 不透明度（jQuery 样式），并且*应该*使用鼠标位置来确定剩余 0.6 的多少，基于其与中心的距离，其中鼠标在中心页面*应*产生完全不透明度。

我不明白为什么脚本会以这种方式运行，当我将 Math.sin(x) 函数的输入限制为 1 < x < 180 时，会滚动整个正弦波。如果将 xCoord 替换为 axis in在我为#showme 构建 jQuery 文本的地方，你会看到它抛出了负数——这不应该发生！...所以我不知道问题/行为的结果是什么！！！令人沮丧！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T12:07:45.937

只需使用：

```
xCoord = (xCoord * Math.PI) / 180;  // Convert value to Radians 
```

它有效..

**[样本](http://jsfiddle.net/jUKVy/1/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T11:47:09.843

[http://jsfiddle.net/ySjqh/4/](http://jsfiddle.net/ySjqh/4/)

```
axis = 0.6 * (1 - Math.abs(e.pageX - winW/2)/(winW/2)); 
```

使用距中心的 X 距离而不是`sin`。

# python - 以非交互方式使用 pexpect 和 passwd 更改密码？

> ID：14603104
> 
> 赞同：0
> 
> 时间：2013-01-30T11:38:01.997
> 
> 标签：python

我正在尝试学习 python 以非交互方式更改用户密码，但似乎没有任何效果。
`pexepect`python 的模块似乎很有前途，所以我只是想使用它。
本[教程](http://linux.byexamples.com/archives/346/python-how-to-access-ssh-with-pexpect/)很好，但它不起作用。
互联网上有很多关于此的代码，但它们似乎都不起作用。
我的代码也没有：

```
#!/usr/bin/python
import pexpect
import time
def ChangePassword(user, pass):
    passwd = pexpect.spawn("/usr/bin/passwd %s" % user)

    for x in xrange(2):
        # wait for password: to come out of passwd's stdout
        passwd.expect("password: ")
        # send pass to passwd's stdin
        passwd.sendline(pass)
        time.sleep(0.1)

ChangePassword('rajesh', 'bar') # changes user "foo"'s password to "bar" 
```

错误：

```
bash-3.00# ./solpas7.py
  File "./solpas7.py", line 4
    def ChangePassword(user, pass):
                                ^
SyntaxError: invalid syntax 
```

编辑：我将 pass 更改为 pa 但不是我得到了很多并且密码没有更改。

```
bash-3.00# ./solpas7.py
Traceback (most recent call last):
  File "./solpas7.py", line 14, in ?
    ChangePassword('rajesh', 'bar') # changes user "foo"'s password to "bar"
  File "./solpas7.py", line 9, in ChangePassword
    passwd.expect("password: ")
  File "/usr/lib/python2.4/site-packages/pexpect.py", line 1311, in expect
    return self.expect_list(compiled_pattern_list, timeout, searchwindowsize)
  File "/usr/lib/python2.4/site-packages/pexpect.py", line 1325, in expect_list
    return self.expect_loop(searcher_re(pattern_list), timeout, searchwindowsize                                              )
  File "/usr/lib/python2.4/site-packages/pexpect.py", line 1409, in expect_loop
    raise TIMEOUT (str(e) + '\n' + str(self))
pexpect.TIMEOUT: Timeout exceeded in read_nonblocking().
<pexpect.spawn object at 0x80e306c>
version: 2.3 ($Revision: 399 $)
command: /usr/bin/passwd
args: ['/usr/bin/passwd', 'rajesh']
searcher: searcher_re:
    0: re.compile("password: ")
buffer (last 100 chars): New Password:
before (last 100 chars): New Password:
after: pexpect.TIMEOUT
match: None
match_index: None
exitstatus: None
flag_eof: False
pid: 4683
child_fd: 3
closed: False
timeout: 30
delimiter: pexpect.EOF
logfile: None
logfile_read: None
logfile_send: None
maxread: 2000
ignorecase: False
searchwindowsize: None
delaybeforesend: 0.05
delayafterclose: 0.1
delayafterterminate: 0.1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T11:43:52.803

不能[`pass`](http://docs.python.org/3/reference/simple_stmts.html#pass)用作变量名。这是一个保留关键字。

编辑：pexpect 正在等待字符串`"password: "`，但正如您可以从系统上的错误消息`passwd`输出`"New Password: "`（注意大写 p）中看出的那样。

```
buffer (last 100 chars): New Password:
before (last 100 chars): New Password: 
```

而不是`passwd.expect("password: ")`你需要使用`passwd.expect("Password: ")`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-13T18:11:25.060

您还可以使用它来使您的搜索不区分大小写：

```
passwd.expect('(?i)password:') 
```

# javascript - javascript中类型的默认值

> ID：14603106
> 
> 赞同：9
> 
> 时间：2013-01-30T11:38:12.967
> 
> 标签：javascript, types, default-value

JavaScript 中是否有一个函数可以返回传递给它的类型名称的默认值？例如：

```
var defaultValue = built_in_getDefaultValue("number");
console.log(defaultValue); // Logs the number 0 to the console. 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2015-02-25T00:03:36.557

先前的两个答案都正确地指出，JavaScript 中变量的默认（未分配）值是`undefined`，但都没有解决您似乎正在寻找的内容 - 相当于`default`C# 中的运算符。

幸运的是，JavaScript 有一个非常简单的类型系统：所有不是七种原始类型之一的东西都是一个对象，可以通过它的构造函数调用。¹下面的函数，给定一个字符串表示

*   JS 原始类型的名称，例如`'string'`or `'null'`;
*   操作员的任何有效产品`typeof`，例如`'function'`；
*   函数名称在`this`调用它的值或其本地范围中²

将对“默认”值产生合理的解释：

```
function defaultVal(type) {
    if (typeof type !== 'string') throw new TypeError('Type must be a string.');

    // Handle simple types (primitives and plain function/object)
    switch (type) {
        case 'bigint'    : return BigInt(0);
        case 'boolean'   : return false;
        case 'function'  : return function () {};
        case 'null'      : return null;
        case 'number'    : return 0;
        case 'object'    : return {};
        case 'string'    : return "";
        case 'symbol'    : return Symbol();
        case 'undefined' : return void 0;
    }

    try {
        // Look for constructor in this or current scope
        var ctor = typeof this[type] === 'function'
                   ? this[type]
                   : eval(type);

        return new ctor;

    // Constructor not found, return new object
    } catch (e) { return {}; }
} 
```

你可以这样称呼它：

```
defaultVal( typeof 1 ); // -> 0
defaultVal( 'bigint' ); // -> 0n
defaultVal( 'object' ); // -> {}
defaultVal( 'RegExp' ); // -> /(?:)/ 
```

* * *

不幸的是，`typeof`对于我们的目的来说，JS 操作符可能有点……anameic。例如，`typeof null === 'object'`¹ 和`typeof [] === 'object'`，这可能不是您想要的。

为了解决这个问题，这里有一个函数，它返回调用`typeof`一个值的结果，*除非*`'null'`结果是'object'，在这种情况下，如果值是，它将返回`null`，`obj.constructor.name`否则（ `'object'`如果所有其他方法都失败，则作为后备值）：

```
function getType(obj) {
    var type = typeof obj;

    if (type !== 'object') return type; // primitive or function
    if (obj === null) return 'null';    // null

    // Everything else, check for a constructor
    var ctor = obj.constructor;
    var name = typeof ctor === 'function' && ctor.name;

    return typeof name === 'string' && name.length > 0 ? name : 'object';
} 
```

现在我们可以拥有：

```
defaultVal( getType( 1234 ) );  // -> 0
defaultVal( getType( [99] ) );  // -> []
defaultVal( getType( 'ab' ) );  // -> ""
defaultVal( getType( null ) );  // -> null   (Not possible with typeof!)
defaultVal( getType( /.*/ ) );  // -> /(?:)/ (Not possible with typeof!)

function T () {}
defaultVal( getType( new T ) ); // -> T {}   (Not possible with typeof!) 
```

我怀疑这与您将要获得的内容一样接近。另外，为了避免任何批评：上面使用 eval 可能看起来有点脏，但这是从当前范围获取命名值的唯一方法。

* * *

¹`null`有点奇怪。ECMAScript 2020 规范明确将[其称为原语](https://www.ecma-international.org/ecma-262/#sec-primitive-value)；但是，`typeof null`这是`'object'`由于[原始 JavaScript 实现中的错误造成的](https://2ality.com/2013/10/typeof-null.html)。有一次，[MDN 从它的原语列表中排除了 null](https://web.archive.org/web/20210119094631/https://developer.mozilla.org/en-US/docs/Glossary/Primitive)，只计算了六个原语，并声明`null`应该将其视为“每个元素的特殊情况`Object`”。

根据规范，我`null`在此答案中将其称为原语，并且 MDN 已更新以同意此立场。

² 该函数不能调用在另一个作用域中实例化的构造函数；相反，我可以通过`this`绑定到包含它可能引用的任何此类构造函数的对象来调用它：

```
function innerScopeCtor() {
    function T () {}

    return defaultVal.call( { T : T }, 'T' );
}

innerScopeCtor(); // T {} 
```

如果你不这样做，它只会退回到返回一个新对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T11:40:05.153

我不明白你为什么要问这样的问题。无论如何，JavaScript 中变量的默认值为`null`或`undefined`。

出于学习目的，我从 WikiBooks [JavaScript/Variables and Types](http://en.wikibooks.org/wiki/JavaScript/Variables_and_Types)中获取了这个：

> 变量通常由 var 语句显式声明，如下所示：
> 
> ```
> var c; 
> ```
> 
> 上述变量已创建，但默认值为`undefined`. 为了有价值，变量需要初始化：
> 
> ```
> var c = 0; 
> ```
> 
> 声明后，可以为变量分配一个新值，该值将替换旧值：
> 
> ```
> c = 1; 
> ```
> 
> 但是请确保在分配给它之前（或同时）使用 var 声明一个变量；否则您将创建一个“范围错误”。

现在，当你问为什么这个值不是`0`时，那是因为，甚至`null`或者`undefined`是没有定义的值。未定义不同于已定义和为空。`0`当值被声明但未定义时，它可能会返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T11:38:52.837

javascript 中任何变量的默认值都是`undefined`. 你也可以得到它

```
var defaultValue = void 0; 
```

# vb.net - 对象引用未设置为对象的实例 [VB.NET]

> ID：14603107
> 
> 赞同：4
> 
> 时间：2013-01-30T11:38:23.903
> 
> 标签：vb.net, ctype

```
 Public Class Form1
    Private Function AllEnabled(ByVal b As Boolean) As Boolean
        For i As Integer = 0 To 2
            Dim c As CheckBox = CType(Me.Controls("CheckBox" & i.ToString), CheckBox)
            c.Enabled = b
        Next
    End Function

    Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
        Call AllEnabled(False)
     End Sub
    End Class 
```

在（对象引用未设置`b`为`c.Enabled = b` 对象的实例。）

但是当我使用`checkbox1.enabled = b`而不是`c.enabled = b`工作正常时。

所以当我看到错误不是`b`正确的？

＆ 我怎样才能解决这个问题 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T11:56:33.667

尝试这个：

```
For Each ctl In Me.Controls
  If TypeOf ctl Is CheckBox Then
   ctl.Enabled = b
  End If
Next 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T11:50:26.953

两个可能的原因。您的 for 循环创建此控件名称：

1.  “复选框0”
2.  “复选框1”
3.  “复选框2”

也许你想要 1-3 或 0-1。

也许您想递归地找到您的复选框，然后您可以使用`Find`：

```
For i As Integer = 0 To 2
    Dim ctrl = Me.Controls.Find("CheckBox" & i.ToString, True)
    If ctrl.Length <> 0 Then
        ctrl(0).Enabled = b 'Find returns an aray' 
    End If
Next 
```

旁注：2013 我不会再使用这种 VB6 风格了：

```
Call AllEnabled(False) 
```

只是

```
AllEnabled(False) 
```

# javascript - javascript 打包程序如何使用“void 0”？

> ID：14603108
> 
> 赞同：2
> 
> 时间：2013-01-30T11:38:26.370
> 
> 标签：javascript, error-handling

我正在查看已最小化的某人的 javascript 代码，但我看到的语法没有任何意义。

```
firstObject.init = function() {
  void 0 === secondObject.properties && thirsObject.reportError("Something is wrong");
  firstObject.doSomething();
} 
```

我的猜测是，packer 正在检查一个未定义的属性，在这种情况下打破执行上下文并返回 null。

```
if (secondObject.properties === undefined) {
  thirdObject.reportError("Something is wrong");
  return NULL;
} 
```

这里发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T11:41:10.497

如果你看一下`void 0`它的结果很快就会清楚发生了什么：

```
> void 0
undefined 
```

因此，写

```
void 0 === secondObject.properties 
```

只是一种不同的写作方式

```
typeof secondObject.properties === "undefined" 
```

* * *

> 这会结束函数的执行，还是在执行 && 运算符右侧的代码后继续执行？

条件评估通常是~~懒惰的~~“短路”，也就是说，如果已经确定某个条件将评估为真或假，则不再评估进一步的子条件。例如：

```
false && alert("foo"); // Will never alert foo
true && alert("foo"); // Will always alert foo 
```

如果您有任何两个由`&&`运算符组合的条件，如果第一个（左）条件为假，则无论其值如何，整个条件都将为假。因此，第二个条件的评估是不必要的，因此被丢弃。

### 更多信息：

*   ~~维基百科上的[懒惰评价](http://en.wikipedia.org/wiki/Lazy_evaluation)~~
*   [短路评估](http://en.wikipedia.org/wiki/Short-circuit_evaluation)

# android - ListView setOnItemClick 问题

> ID：14603112
> 
> 赞同：1
> 
> 时间：2013-01-30T11:38:35.370
> 
> 标签：android, android-listview

所以我正在`Listview`使用我的自定义适配器。适配器布局如下图所示

```
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/textViewName"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

然后我设置`onItemClickListener`为`ListView`，它做得很好。然后当我在布局中添加一个按钮时

```
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/textViewName"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <Button
        android:text="edit"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

`ListView`不再可点击。我想要实现的是当我单击 ListView 时将显示配置文件描述。然后当我点击按钮时，它将导致配置文件编辑活动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T11:41:57.970

这是打字错误，还是您忘记关闭按钮？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T11:45:07.380

你能检查一下按钮是否带走了行上产生的所有点击吗？

`android:focusable="false"`如果您希望按钮不可点击，请尝试将按钮触摸区域限制为一行或尝试设置按钮。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T11:45:20.943

像这样修改：

```
<Button
    android:text="edit"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"/> 
```

# ios - 使用 NSPredicate 从 NSFetchedResultscontroller 更新 NSManagedObject 时出现 CoreData 错误

> ID：14603122
> 
> 赞同：4
> 
> 时间：2013-01-30T11:39:04.637
> 
> 标签：ios, core-data, nsfetchedresultscontroller

我们有 UITableViewController，它的 DataSource 是一个 NSFetchedResultsController。单击 UITableView 中的对象后，您将被定向到 UIViewController，您可以在其中设置一个标志 (YES/NO)，这可能会导致从 NSFetchedResultsController (NSPredicate) 中删除：

*   带有标志的对象：YES 显示在 UITableView
*   带有标志的对象：NO 未在 UITableView 中显示

我们更新对象如下：

```
objectEntity updatedObject = self.oldobject;
[updatedObject setFlag: [NSNumber numberWithBool: NO]];

NSError *error;
[self.managedObjectContext save:&error]; 
```

保存更新会导致以下错误：

```
CoreData: error: Serious application error. Exception was caught during Core Data change processing. This is usually a bug within an observer of NSManagedObjectContextObjectsDidChangeNotification
*** -[__NSPlaceholderArray initWithObjects:count:]: attempt to insert nil object from objects[0] with user Info (null)
*** Terminating app due to uncaught exception 'NSInvalidArgumentException'. reason: '*** -[_NSPlaceholderArray initWithObjects:count:]: attempt to insert nil object from objects[0]' 
```

有任何想法吗？

**更新：**

异常发生在 NSFetchedResultsController 委托方法中

```
controller()didChangObject()atIndexPath... case: NSFetchedResultsChangeDelete tableView
deleteRowsAtIndexPaths:@[newIndexPath] withRowAnimation:UITableViewRowAnimationFade]; 

*** First throw call stack:
(0x334af2a3 0x3b1cc97f 0x333f934d 0x33407559 0x5e5e5 0x33326fe7 0x33400037 0x33d16599 0x332b4717 0x332b3c77 0x33235bf9 0x332a84cf 0x6174d 0x35478e1b 0x353a20c5 0x353a2077 0x353a2055 0x353a190b 0x353a1e01 0x352ca5f1 0x352b7801 0x352b711b 0x36fcd5a3 0x36fcd1d3 0x33484173 0x33484117 0x33482f99 0x333f5ebd 0x333f5d49 0x36fcc2eb 0x3530b301 0x20abd 0x3b603b20)
libc++abi.dylib: terminate called throwing an exception 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T12:43:29.937

在`NSFetchedResultsChangeDelete`FRC`didChangeObject`委托方法的情况下，被删除对象的索引路径是 in `indexPath`，而不是 in `newIndexPath`。所以你应该改变

```
[tableView deleteRowsAtIndexPaths:@[newIndexPath] withRowAnimation:UITableViewRowAnimationFade]; 
```

到

```
[tableView deleteRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationFade]; 
```

# javascript - Chrome 扩展程序：如何摆脱 FOUC？

> ID：14603127
> 
> 赞同：3
> 
> 时间：2013-01-30T11:39:25.947
> 
> 标签：javascript, google-chrome-extension

问题的实质如下：

有一个页面，我需要修改浏览器扩展的内容，可以使用jQuery。

试过了`$(document).ready()`，但内容仍会显示一小段时间（FOUC）。我无法更改服务器上的页面样式。

我正在使用 kango 框架来构建扩展。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T11:46:08.300

仅使用 ECMAscript，您无法可靠地避免它。如果您等待`DOMContentLoaded`事件，您将没有任何机会，因为此时 DOM 几乎已被渲染和显示（这是您在短时间内看到的）。

最好的办法是尽快修改*CSS*。如果*样式表定义*在 DOM 被渲染之前被加载并且你会设置为

```
body {
    display: none;
} 
```

你不会看到任何东西。你可以试试

```
<body>
    <script>
        document.body.style.display = 'none';
    </script>
    <!-- more html -->
</body> 
```

如果这对您来说是任何可行/可用的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T16:41:45.153

我建议您结合使用 CSS 和 JavaScript。我在我正在构建的网站上使用 jQueryUI 时遇到了同样的问题，发现其中的许多解决方案会使没有 JavaScript 的人无法使用这些内容。

所以，这就是我所做的：

CSS：

```
.flash #wrapper {
     display: none;
} 
```

`<div id="wrapper">`仅当它是`flash`该类的死者时才设置为隐藏。因此，为了防止它对那些没有 JavaScript 的人隐藏，我将`flash`类添加到`<html>`元素中。因此，只有在最终用户启用了 JavaScript 时才能将其物理隐藏，否则他们至少可以通过无样式的内容进行访问。

JavaScript：

```
$('html').addClass('flash');
$(document).ready(function() {
     /* Do all your stuff */

     /* When done show the wrapper with the content styled */
     $(#wrapper).show();
}); 
```

根据您的页面加载时间，您可能会得到一点闪光，但不会是无样式内容的闪光，这很丑陋。在我的情况下，我有一个 jQueryUI 菜单项，它会`<ul>`先闪烁普通元素，然后是 menuUI 项，并且我的`<div>`元素使用 jQuery 调整大小，以便每`<div>`列的高度相等，但它会首先闪烁不同的高度。这修复了它，同时仍然为非 JavaScript 浏览器提供可访问性。

# ruby - 使用 Rubymine 调试 Rails 应用程序时的堆栈跟踪

> ID：14603128
> 
> 赞同：4
> 
> 时间：2013-01-30T11:39:31.840
> 
> 标签：ruby, ruby-on-rails-3, debugging, stack-trace, rubymine

我使用 Rubymine 作为我的 IDE，并使用它来调试我正在处理的任何 Rails 应用程序。每当遇到断点时，我都想查看堆栈跟踪并了解代码流。但是，我注意到堆栈跟踪中大部分都充满了 Rails 方法，例如 activesupport 等，而那些来自应用程序（我的代码）的方法最终会丢失。当涉及任何过滤器或请求开始时（当它进入控制器时）时尤其如此。

是否可以从填充堆栈跟踪中排除 rails 代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-22T16:07:55.467

RubyMine 不区分（不沙箱）框架代码。这就是为什么您不能在 RubyMine 中逐步执行 Rails 程序并排除框架代码的原因。

# c++ - 创建特殊文件夹的快捷方式，如控制面板或计算机管理

> ID：14603129
> 
> 赞同：1
> 
> 时间：2013-01-30T11:39:33.343
> 
> 标签：c++, windows, winapi

有很多示例可以创建文件或文件夹的快捷方式，但我所拥有的只是对象 GUID，例如 {9438384-39393-394848-439498}（不是真实的）。[在本教程](http://msdn.microsoft.com/en-us/library/bb776891%28VS.85%29.aspx#Shellink_Creating_Shortcut_Nonfile)中，关于创建非文件对象的快捷方式，我无法理解在哪里可以将 guid 解析为 idlist 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T02:19:11.903

所以，解决方案很简单。使用**shell:::{94308384-3939-3948-4394-4498}**作为文件夹的路径并像往常一样创建它。

# opencl - OpenCL 用户事件/无法释放对象？

> ID：14603131
> 
> 赞同：1
> 
> 时间：2013-01-30T11:39:44.340
> 
> 标签：opencl

> `event_wait_list`注意：在命令的参数中 指定用户事件的入队 `clEnqueue***`命令必须确保 在调用`clSetUserEventStatus`任何释放除事件对象之外的 OpenCL 对象的 OpenCL API 之前使用设置这些正在等待的用户事件的状态；否则行为未定义。

因此，如果我在队列中等待用户事件，我不能在任何 OpenCL 对象上调用 release 吗？

这似乎是一个奇怪的要求？它的目的是什么？或者，为什么会这样？

他们给出的例子是：

```
ev1 = clCreateUserEvent(ctx, NULL);
clEnqueueWriteBuffer(cq, buf1, CL_FALSE, ..., 1, &ev1, NULL);
clEnqueueWriteBuffer(cq, buf2, CL_FALSE,...);
clReleaseMemObject(buf2); // <--- UNDEFINED
clSetUserEventStatus(ev1, CL_COMPLETE); 
```

哪个导致未定义的行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T19:48:05.110

考虑他们给出的例子。

我们有一个有序队列，我们​​创建了一个用户事件：

```
ev1 = clCreateUserEvent(ctx, NULL); // (1) 
```

然后我们想要将写入队列到缓冲区，但我们希望它等待我们的事件：

```
clEnqueueWriteBuffer(cq, buf1, CL_FALSE, ..., 1, &ev1, NULL); // (2) 
```

我们想在前一个缓冲区（等待我们的事件）之后写入另一个缓冲区：

```
clEnqueueWriteBuffer(cq, buf2, CL_FALSE,...); // (3) 
```

`clEnqueueWriteBuffer`我们从尚未通过的第二个缓冲区释放缓冲区，因为我们仍在等待用户事件。在这种情况下，(4) 发生在 (3) 之前，所以我们不知道释放内存对象时会发生什么。

```
clReleaseMemObject(buf2); // <--- UNDEFINED // (4) 
```

我们最终完成了导致（2）和（3）在（4）已经完成之后发生的用户事件。

```
clSetUserEventStatus(ev1, CL_COMPLETE); // (5) 
```

基本上，以这种方式执行计算可能会导致问题，因为`clReleaseMemObject`不会插入到`clCommandQueue`并且可能会破坏我们期望的依赖关系。

# delphi - 具有自定义位置的 TTrackBar？

> ID：14603133
> 
> 赞同：9
> 
> 时间：2013-01-30T11:39:51.703
> 
> 标签：delphi, delphi-7, trackbar

我正在尝试在 Win 7 缩放轨迹栏中复制 PAINT 应用程序的行为：（我知道这是一个常见的轨迹栏控件）

![100% 缩放](../Images/26d4878820b4305787f00a250a692fc8.png)

100% 位于**中心**。它有 11 个可用位置：

![50% 缩放](../Images/64537332a36e970077854f066155e6c0.png) ![200% 缩放](../Images/b7716065e65a8689797fdff7b5d6772e.png)ETC...

`12.5%, 25%, 50%, 100%, 200%, 300%, 400%, 500%, 600%, 700%, 800%`

所以我的缩放值 ( `ZoomArray`) 是：
`0.125, 0.25, 0.5, 1, 2, 3, 4, 5, 6, 7, 8`

这很容易，我可以将 Min 设置为 1 并将 Max 设置为 11 并获得我需要的值：
`ZoomArray[TrackBar1.Position]`

问题是如何将 100% 保持在**中心**位置，而唯一可用的位置是上面的位置？

我试图在数组中使用虚拟值以将 1 保持在中心，例如：
`0.125, 0.25, 0.5, -1, -1, -1, -1, 1, 2, 3, 4, 5, 6, 7, 8`
并在 Change 事件上重新定位轨迹栏，但我的逻辑似乎无法正常工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-30T12:09:43.797

设置`TrackBar.Max`为`14`, 并实现`OnChange`和`OnKeyDown`处理程序，以及一些用于放大和缩小的按钮 OnClick 处理程序。此外，设置`TrackBar.PageSize = 4`为使 PageUp 和 PageDown 键正常工作。

```
const
  ZoomTickCount = 15;

function ZoomLevelPos(Position: Integer; GoneUp: Boolean): Integer;
const
  Ticks: array[0..ZoomTickCount - 1] of Integer =
    (0, 1, 1, 2, 2, 2, 2, 9, 10, 11, 12, 13, 14, 15, 16);
begin
  Result := Position;
  if GoneUp then
    while (Result < High(Ticks)) and (Ticks[Result] = Ticks[Position - 1]) do
      Inc(Result)
  else
    while (Result > Low(Ticks)) and (Ticks[Result - 1] = Ticks[Position]) do
      Dec(Result);
end;

procedure TForm1.ZoomTrackBarChange(Sender: TObject);
const
  Zooms: array[0..ZoomTickCount - 1] of Single =
    (0.125, 0.25, 0.25, 0.5, 0.5, 0.5, 0.5, 1, 2, 3, 4, 5, 6, 7, 8);
begin
  ZoomTrackBar.Position := ZoomLevelPos(ZoomTrackBar.Position, False);
  Label1.Caption := Format('%.1n%%', [Zooms[ZoomTrackBar.Position] * 100]);
end;

procedure TForm1.ZoomTrackBarKeyDown(Sender: TObject; var Key: Word;
  Shift: TShiftState);
begin
  if Key in [VK_DOWN, VK_RIGHT] then
  begin
    ZoomTrackBar.Position := ZoomLevelPos(ZoomTrackBar.Position + 1, True);
    Key := 0;
  end;
end;

procedure TForm1.ZoomInButtonClick(Sender: TObject);
begin
  ZoomTrackBar.Position := ZoomLevelPos(ZoomTrackBar.Position + 1, True);
end;

procedure TForm1.ZoomOutButtonClick(Sender: TObject);
begin
  ZoomTrackBar.Position := ZoomTrackBar.Position - 1;
end; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-30T13:37:07.380

这是从 派生新控件的另一种选择，它`TTrackbar`删除了自动抽动并处理滚动消息中的滑动，其行为几乎与 Paint 中的控件相同。用D2007编译，试着评论一下：

```
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Classes, Controls, Forms, ComCtrls, StdCtrls;

type
  TCNHScroll = TWMHScroll;

  TTrackBar = class(comctrls.TTrackBar)  // interposer class for quick test
  protected
    procedure CreateParams(var Params: TCreateParams); override;
    procedure CreateWnd; override;
    procedure CNHScroll(var Message: TCNHScroll); message CN_HSCROLL;
  public
    constructor Create(AOwner: TComponent); override;
  end;

  TForm1 = class(TForm)
    Label1: TLabel;
    TrackBar1: TTrackBar;
    procedure TrackBar1Change(Sender: TObject);
  end;

var
  Form1: TForm1;

implementation

uses
  commctrl;

{$R *.dfm}

procedure TForm1.TrackBar1Change(Sender: TObject);
begin
  // account for non-linear scaling for a sensible value
  if TrackBar1.Position <= 8 then
    Label1.Caption := IntToStr(TrackBar1.Position * 125)
  else
    Label1.Caption := IntToStr(TrackBar1.Position * 1000 - 7000)
end;

{ TTrackBar }

constructor TTrackBar.Create(AOwner: TComponent);
begin
  inherited;

  // We'll have 15 positions which should account for the following values 
  // 125 250 - 500 - - - 1000 2000 3000 4000 5000 6000 7000 8000
  // positions 3, 5..7 will be skipped when tracking
  Min := 1;
  Max := 15;
  LineSize := 1;
  PageSize := 1;
end;

procedure TTrackBar.CreateParams(var Params: TCreateParams);
begin
  inherited;
  // remove automatic ticks so that we don't have ticks at 3 and 5..7
  Params.Style := Params.Style and not TBS_AUTOTICKS;
end;

procedure TTrackBar.CreateWnd;
begin
  inherited;
  // first and last tick not required
  SetTick(2);  //  250
  SetTick(4);  //  500
  SetTick(8);  // 1000
  SetTick(9);  // 2000
  SetTick(10); 
  SetTick(11);
  SetTick(12);
  SetTick(13);
  SetTick(14); // 7000
end;

procedure TTrackBar.CNHscroll(var Message: TCNHScroll);
var
  Pos: Integer;
begin
  // prevent jumping back and forth while thumb tracking, do not slide to the
  // next tick until a threshold is passed
  if Message.ScrollCode = SB_THUMBTRACK then begin
    case Message.Pos of            
      5: SendMessage(Handle, TBM_SETPOS, 1, 4);
      6, 7: SendMessage(Handle, TBM_SETPOS, 1, 8);
    end;
  end;

  // for line and page and rest of the scrolling, skip certain ticks
  Pos := SendMessage(Handle, TBM_GETPOS, 0, 0);
  if Pos > Position then      // compare with previous position
    case Pos of
      3: SendMessage(Handle, TBM_SETPOS, 1, 4);
      5..7: SendMessage(Handle, TBM_SETPOS, 1, 8);
    end;
  if Pos < Position then
    case Pos of
      3: SendMessage(Handle, TBM_SETPOS, 1, 2);
      5..7: SendMessage(Handle, TBM_SETPOS, 1, 4);
    end;

  inherited;
end;

end. 
```

如果需要，垂直实施将是类似的。这并不是真正的成品，只是模拟上述控件行为的试验。

# java - 用于带缓存的流媒体播放器

> ID：14603134
> 
> 赞同：1
> 
> 时间：2013-01-30T11:39:58.847
> 
> 标签：java, android, video-streaming, media-player

我想构建一个允许查看在线视频并缓存它的应用程序。

但我需要帮助：当用户点击神奇的“播放”按钮时，我想开始在外部存储上下载视频并同时播放。我如何管理整个过程？我应该使用什么回调`MediaPlayer`？有什么提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-26T11:28:26.897

看我的项目：

1.  [https://github.com/master255/ImmortalPlayer](https://github.com/master255/ImmortalPlayer)一个线程读取、发送和保存缓存数据。最简单的方法和最快的工作。复杂的逻辑 - 最好的方法！
2.  [https://github.com/master255/VideoViewCache](https://github.com/master255/VideoViewCache)带缓存的简单视频视图。两个线程用于播放和保存数据。逻辑不好，但是如果您需要，请使用它。

# actionscript-3 - 全局事件调度器

> ID：14603135
> 
> 赞同：1
> 
> 时间：2013-01-30T11:40:01.260
> 
> 标签：actionscript-3, apache-flex, events, design-patterns, air

使用全局事件调度程序的缺点是什么，如下所述： [http](http://www.riaspace.com/2010/11/unframework-so-how-to-getaway-without-any-framework/) ://www.riaspace.com/2010/11/unframework-so-how-to-getaway-without-any-framework/ 请 记住，我只从事小型（ish）应用程序。

```
// eventDispatcher.as script file

package 
{
    import flash.events.IEventDispatcher;

    public function get eventDispatcher():IEventDispatcher
    {
        return _eventDispatcher;
    }
}

import flash.events.EventDispatcher;
import flash.events.IEventDispatcher;

var _eventDispatcher:IEventDispatcher = new EventDispatcher(); 
```

* * *

```
public class MyViewPM
{
    public function btn_clickHandler():void
    {
        eventDispatcher.dispatchEvent(new MyEvent(MyEvent.EVENT_TYPE));
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T11:58:52.310

如果您正在自己处理较小的项目，那么全局调度员可能会很好，并且可以为您节省一些时间。

问题在于更大的应用程序和多个开发人员在同一代码库上工作。我的经验是（经验较少的）开发人员会很快滥用全局事件系统并通过它发送真正应该是本地事件的事件（主要是视图事件）。这使得代码难以理解、测试和修改，因为您几乎无法控制谁调度和谁侦听某些事件。与全局状态一样，数据可以同时在不同的地方被修改，这可能导致调试噩梦。

如果您对增强的全局调度程序感兴趣，请查看[AS3Commons EventBus](http://as3commons.org/as3-commons-eventbus/index.html)。

# shell - 使用shell脚本将十六进制数转换为十进制

> ID：14603140
> 
> 赞同：4
> 
> 时间：2013-01-30T11:40:08.330
> 
> 标签：shell, sh

我需要使用 shell 脚本将数字从十六进制形式转换为十进制形式

例如 ：

```
convert()
{
    ...
    echo x=$decimal
} 
```

结果 ：

```
convert "0x148FA1"
x=1347489 
```

怎么做？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-30T11:44:36.070

您可以通过多种不同的方式进行转换，都在 bash 中，而且相对容易。

要将数字从十六进制转换为十进制：

```
$ echo $((0x15a))
346

$ printf '%d\n' 0x15a
346

$ perl -e 'printf ("%d\n", 0x15a)'
346

$ echo 'ibase=16;obase=A;15A' | bc
346 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-30T11:46:41.387

你可以检查这个[链接](http://www.cyberciti.biz/faq/linux-unix-convert-hex-to-decimal-number/)。从根本上说，以下代码将对您有所帮助。

```
h2d(){
  echo "ibase=16; $@"|bc
}
d2h(){
  echo "obase=16; $@"|bc
} 
```

它是纯 shell 脚本解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T11:45:29.780

如果您有可用的 python 解释器，您可以随时执行以下操作：

```
#!/bin/sh
x="0x23"
val=`python -c "print int('$x', 16)"`
echo $val 
```

# iphone - 如何使用 stackmob 将用户对象添加到事件中

> ID：14603142
> 
> 赞同：1
> 
> 时间：2013-01-30T11:40:15.403
> 
> 标签：iphone, ios, core-data, stackmob

我正在使用 stackmob 进行后端服务。我使用这些代码创建了一个新用户：

```
User *newUser = [[User alloc] initIntoManagedObjectContext:self.managedObjectContext];
[newUser setValue:info.username forKey:[newUser primaryKeyField]];
[newUser setValue:info.email forKey:@"email"];
[newUser setPassword:info.password];
NSError *error = nil;
if ([self.managedObjectContext save:&error]) {
} 
```

用户使用以下代码登录：

```
[self.client loginWithUsername:info.username password:info.password onSuccess:^(NSDictionary *result) {
    [userDefaults setBool:YES forKey:@"signedin"];
    NSLog(@"user signed in");
} onFailure:^(NSError *error) {
    NSLog(@"login error");
}]; 
```

目前该活动有很多用户。

所以，我想`[self.event addUsersObject:(User *)]`。但是我如何获得当前的日志用户，所以我可以将当​​前用户添加到这个事件中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T04:35:54.380

在 loginWithUsername 的 onSuccess 块中，您需要使用您登录的用户名查询 User 实体。像这样的东西...

```
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription entityForName:@"User" inManagedObjectContext:self.managedObjectContext];
[fetchRequest setEntity:entity];

NSPredicate *predicate = [NSPredicate predicateWithFormat:@"username=%@", info.username];
[fetchRequest setPredicate:predicate];

[self.managedObjectContext executeFetchRequest:fetchRequest onSuccess:^(NSArray *results){
    ///there should be only 1 result, but the code should really check
    NSLog(@"%@",results[0]);
    User* loggedInUser = results[0];
    [self.event addUserObject:loggedInUser];

} onFailure:^(NSError *error) {
    NSLog(@"Error fetching: %@", error);
}]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T17:13:27.477

我是 StackMob 的平台布道者。

我刚刚创建了一个项目，在其中获取了当前登录的用户并将该对象添加到关系中。您可以自己下载并查看代码。

[https://github.com/SidneyAllen/hollagram-ios](https://github.com/SidneyAllen/hollagram-ios)

在 JustSayinViewController.m 文件中查找适当的代码。

# java - 为应用程序选择什么样的摇摆布局结构？

> ID：14603145
> 
> 赞同：1
> 
> 时间：2013-01-30T11:40:25.363
> 
> 标签：java, swing, layout, layout-manager, jcomponent

这是我真正想放在面板上的内容：

第一个逻辑块：

> 单选按钮 1 文本字段图标按钮
> 
> 单选按钮 2 文本字段图标按钮
> 
> 复选框

第二个逻辑块：

> 标签微调器
> 
>         按钮

我的第一个决定是制作垂直框布局，并为每个逻辑块放置两个水平框布局。但问题在于这些块，选择什么布局来描述这种结构？我不喜欢 GridBagLayout - 它非常复杂且难以理解，尤其是当代码不是你的时。目前我看到可以使用流布局和网格布局。但是网格布局，例如，将按钮拉伸到单元格的宽度，如果一个按钮只有它的图标，那么它看起来很奇怪。

希望你能给我一些建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T11:54:51.480

对于第一种情况，您可以在 上使用简单`GridLayout`的`JPanel`，`3 Rows`每个都有单独`JPanel`的带有`FlowLayout`约束的`FLowLayout.LEFT`. 看看这个代码示例：

```
import java.awt.*;
import javax.swing.*;

public class ExampleLayout
{
    private void displayGUI()
    {
        JFrame frame = new JFrame("Example Layout");
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);

        JPanel contentPane = new JPanel();
        contentPane.setLayout(new GridLayout(0, 1, 5, 5));

        JPanel topPanel = new JPanel();
        topPanel.setLayout(new FlowLayout(FlowLayout.LEFT, 5, 5));

        JRadioButton rbut1 = new JRadioButton("RadioButton 1", false);
        JTextField tfield1 = new JTextField(10);
        JButton button1 = new JButton("Button 1");

        topPanel.add(rbut1);
        topPanel.add(tfield1);
        topPanel.add(button1);

        JPanel middlePanel = new JPanel();
        middlePanel.setLayout(new FlowLayout(FlowLayout.LEFT, 5, 5));

        JRadioButton rbut2 = new JRadioButton("RadioButton 2", false);
        JTextField tfield2 = new JTextField(10);
        JButton button2 = new JButton("Button 2");

        middlePanel.add(rbut2);
        middlePanel.add(tfield2);
        middlePanel.add(button2);

        JPanel bottomPanel = new JPanel();
        bottomPanel.setLayout(new FlowLayout(FlowLayout.LEFT, 5, 5));
        JCheckBox cbox = new JCheckBox("CheckBox 1", false);
        bottomPanel.add(cbox);

        contentPane.add(topPanel);
        contentPane.add(middlePanel);
        contentPane.add(bottomPanel);

        frame.setContentPane(contentPane);
        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    public static void main(String... args)
    {
        EventQueue.invokeLater(new Runnable()
        {
            @Override
            public void run()
            {
                new ExampleLayout().displayGUI();
            }
        });
    }
} 
```

输出 ：

![第一块](../Images/37f1eca9a19456750b60180226f67cfb.png)

对于第二种情况，只需将前两个组件添加到`JPanel`具有默认布局。对于第三个组件，只需将组件添加到 have 上`JPanel`，`GridBagLayout`没有任何限制。

**编辑＃1：**

或者，您可以将这种方法用于您的**第二个 block**。

```
import java.awt.*;
import javax.swing.*;

public class ExampleLayout
{
    private void displayGUI()
    {
        JFrame frame = new JFrame("Example Layout");
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);

        JPanel contentPane = new JPanel();
        contentPane.setLayout(new BorderLayout(5, 5));

        JPanel basePanel = new JPanel();
        basePanel.setLayout(new GridLayout(0, 1, 5, 5));

        JPanel topPanel = new JPanel();
        //topPanel.setLayout(new FlowLayout(FlowLayout.LEFT, 5, 5));

        JLabel label1 = new JLabel("Label 1", JLabel.CENTER);
        JRadioButton rbut1 = new JRadioButton("RadioButton 1", false);

        topPanel.add(label1);
        topPanel.add(rbut1);        

        JPanel middlePanel = new JPanel();
        middlePanel.setLayout(new GridBagLayout());

        JButton button1 = new JButton("Button 1");

        middlePanel.add(button1);

        basePanel.add(topPanel);
        basePanel.add(middlePanel);

        contentPane.add(basePanel, BorderLayout.PAGE_START);

        frame.setContentPane(contentPane);
        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    public static void main(String... args)
    {
        EventQueue.invokeLater(new Runnable()
        {
            @Override
            public void run()
            {
                new ExampleLayout().displayGUI();
            }
        });
    }
} 
```

# html - NVelocity 弄乱了我的 html，或者我的浏览器无法加载所有脚本？

> ID：14603148
> 
> 赞同：0
> 
> 时间：2013-01-30T11:40:32.887
> 
> 标签：html, asp.net-mvc, castle-monorail, nvelocity

所以，我有以下布局（Monorail 2.1，NVelocity View Engine）：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>$Title</title>
<link rel="stylesheet" type="text/css" href="/Content/Site.css">
<link rel="stylesheet" type="text/css" href="/Content/Bootstrap/bootstrap.min.css">
<link rel="stylesheet" type="text/css" href="/Content/Bootstrap/bootstrap-responsive.min.css">
<link rel="stylesheet" type="text/css" href="/Content/Bootstrap/bootstrap-image-gallery.min.css">
<link rel="stylesheet" type="text/css" href="/Content/FileUpload/jquery.fileupload-ui.css">
<script type="text/javascript" src="/Scripts/jquery-1.7.1.min.js">
<script type="text/javascript" src="/Scripts/jquery-ui-1.8.11.js">
<script type="text/javascript" src="/Content/FileUpload/load-image.min.js">
<script type="text/javascript" src="/Content/FileUpload/canvas-to-blob.min.js">
<script type="text/javascript" src="/Content/FileUpload/tmpl.min.js">
<script type="text/javascript" src="/Content/Bootstrap/bootstrap.min.js">
<script type="text/javascript" src="/Content/Bootstrap/bootstrap-image-gallery.min.js">
<script type="text/javascript" src="/Content/FileUpload/jquery.fileupload.js">
<script type="text/javascript" src="/Content/FileUpload/jquery.iframe-transport.js">
<script type="text/javascript" src="/Content/FileUpload/jquery.fileupload-ip.js">
<script type="text/javascript" src="/Content/FileUpload/jquery.fileupload-ui.js">
<script type="text/javascript" src="/Content/FileUpload/locale.js">
<script type="text/javascript" src="/Content/FileUpload/main.js">
</head>
<body>
        $childContent

</body>
</html> 
```

以及以下观点：

```
<body>

    <div class="page">
        <div id="header">
            <div id="title">
                <h1>jQuery-File-Upload MVC3 Demo</h1>
            </div>
        </div>
        <div id="main">
<!-- Shim to make HTML5 elements usable in older Internet Explorer versions -->
<!--[if lt IE 9]><script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

<form id="fileupload" action="/Upload/UploadHandler.ashx" method="POST" enctype="multipart/form-data">
        <!-- The fileupload-buttonbar contains buttons to add/delete files and start/cancel the upload -->
        <div class="row fileupload-buttonbar">
            <div class="span7">
                <!-- The fileinput-button span is used to style the file input field as button -->
                <span class="btn btn-success fileinput-button">
                    <i class="icon-plus icon-white"></i>
                    <span>Add files...</span>
                    <input type="file" name="files[]" multiple>
                </span>
                <button type="submit" class="btn btn-primary start">
                    <i class="icon-upload icon-white"></i>
                    <span>Start upload</span>
                </button>
                <button type="reset" class="btn btn-warning cancel">
                    <i class="icon-ban-circle icon-white"></i>
                    <span>Cancel upload</span>
                </button>
                <button type="button" class="btn btn-danger delete">
                    <i class="icon-trash icon-white"></i>
                    <span>Delete</span>
                </button>
                <input type="checkbox" class="toggle">
            </div>
            <div class="span5">
                <!-- The global progress bar -->
                <div class="progress progress-success progress-striped active fade">
                    <div class="bar" style="width:0%;"></div>
                </div>
            </div>
        </div>
        <!-- The loading indicator is shown during image processing -->
        <div class="fileupload-loading"></div>
        <br>
        <!-- The table listing the files available for upload/download -->
        <table class="table table-striped"><tbody class="files" data-toggle="modal-gallery" data-target="#modal-gallery"></tbody></table>
    </form>

    <!-- modal-gallery is the modal dialog used for the image gallery -->
    <div id="modal-gallery" class="modal modal-gallery hide fade">
        <div class="modal-header">
            <a class="close" data-dismiss="modal">&times;</a>
            <h3 class="modal-title"></h3>
        </div>
        <div class="modal-body"><div class="modal-image"></div></div>
        <div class="modal-footer">
            <a class="btn btn-primary modal-next">
                <span>Next</span>
                <i class="icon-arrow-right icon-white"></i>
            </a>
            <a class="btn btn-info modal-prev">
                <i class="icon-arrow-left icon-white"></i>
                <span>Previous</span>
            </a>
            <a class="btn btn-success modal-play modal-slideshow" data-slideshow="5000">
                <i class="icon-play icon-white"></i>
                <span>Slideshow</span>
            </a>
            <a class="btn modal-download" target="_blank">
                <i class="icon-download"></i>
                <span>Download</span>
            </a>
        </div>
    </div>
#include("_templates.html")
        </div>
        <div id="footer">
        </div>
    </div> 
```

其中包括以下 html 文件 (_templates.html)：

```
<!-- The template to display files available for upload -->
<script id="template-upload" type="text/x-tmpl">
{% for (var i=0, file; file=o.files[i]; i++) { %}
    <tr class="template-upload fade">
        <td class="preview"><span class="fade"></span></td>
        <td class="name"><span>{%=file.name%}</span></td>
        <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
        {% if (file.error) { %}
            <td class="error" colspan="2"><span class="label label-important">{%=locale.fileupload.error%}</span> {%=locale.fileupload.errors[file.error] || file.error%}</td>
        {% } else if (o.files.valid && !i) { %}
            <td>
                <div class="progress progress-success progress-striped active"><div class="bar" style="width:0%;"></div></div>
            </td>
            <td class="start">{% if (!o.options.autoUpload) { %}
                <button class="btn btn-primary">
                    <i class="icon-upload icon-white"></i>
                    <span>{%=locale.fileupload.start%}</span>
                </button>
            {% } %}</td>
        {% } else { %}
            <td colspan="2"></td>
        {% } %}
        <td class="cancel">{% if (!i) { %}
            <button class="btn btn-warning">
                <i class="icon-ban-circle icon-white"></i>
                <span>{%=locale.fileupload.cancel%}</span>
            </button>
        {% } %}</td>
    </tr>
{% } %}
</script>
<!-- The template to display files available for download -->
<script id="template-download" type="text/x-tmpl">
{% for (var i=0, file; file=o.files[i]; i++) { %}
    <tr class="template-download fade">
        {% if (file.error) { %}
            <td></td>
            <td class="name"><span>{%=file.name%}</span></td>
            <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
            <td class="error" colspan="2"><span class="label label-important">{%=locale.fileupload.error%}</span> {%=locale.fileupload.errors[file.error] || file.error%}</td>
        {% } else { %}
            <td class="preview">{% if (file.thumbnail_url) { %}
                <a href="{%=file.url%}" title="{%=file.name%}" rel="gallery" download="{%=file.name%}"><img src="{%=file.thumbnail_url%}"></a>
            {% } %}</td>
            <td class="name">
                <a href="{%=file.url%}" title="{%=file.name%}" rel="{%=file.thumbnail_url&&'gallery'%}" download="{%=file.name%}">{%=file.name%}</a>
            </td>
            <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
            <td colspan="2"></td>
        {% } %}
        <td class="delete">
            <button class="btn btn-danger" data-type="{%=file.delete_type%}" data-url="{%=file.delete_url%}">
                <i class="icon-trash icon-white"></i>
                <span>{%=locale.fileupload.destroy%}</span>
            </button>
            <input type="checkbox" name="delete" value="1">
        </td>
    </tr>
{% } %}
</script> 
```

问题？当我将脚本和链接标签留在头标签中时，如上所示，浏览器会向我显示：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>File Upload Tests</title>
<link href="/Content/Site.css" type="text/css" rel="stylesheet">
<link href="/Content/Bootstrap/bootstrap.min.css" type="text/css" rel="stylesheet">
<link href="/Content/Bootstrap/bootstrap-responsive.min.css" type="text/css" rel="stylesheet">
<link href="/Content/Bootstrap/bootstrap-image-gallery.min.css" type="text/css" rel="stylesheet">
<link href="/Content/FileUpload/jquery.fileupload-ui.css" type="text/css" rel="stylesheet">
<script src="/Scripts/jquery-1.7.1.min.js" type="text/javascript">
<script id="template-download" type="text/x-tmpl">
</head>
<body>
<div id="footer"> </div>
</body>
</html> 
```

什么……？我的页面的其余部分在哪里？NVelocity 吃了吗？

但是如果我将脚本和链接标签放在正文标签的末尾，它会给我这个（调用视图的内容在那里，但为了清楚起见，没有在这篇文章中显示）：

```
 <html xmlns="http://www.w3.org/1999/xhtml">
<head>
<body>
<div class="page">
<div id="header">
<div id="main">
<form id="fileupload" enctype="multipart/form-data" method="POST" action="/Upload/UploadHandler.ashx">
<div id="modal-gallery" class="modal modal-gallery hide fade">
<script id="template-upload" type="text/x-tmpl">
<script id="template-download" type="text/x-tmpl">
</div>
<div id="footer"> </div>
</div>
<link href="/Content/Site.css" type="text/css" rel="stylesheet">
<link href="/Content/Bootstrap/bootstrap.min.css" type="text/css" rel="stylesheet">
<link href="/Content/Bootstrap/bootstrap-responsive.min.css" type="text/css" rel="stylesheet">
<link href="/Content/Bootstrap/bootstrap-image-gallery.min.css" type="text/css" rel="stylesheet">
<link href="/Content/FileUpload/jquery.fileupload-ui.css" type="text/css" rel="stylesheet">
<script src="/Scripts/jquery-1.7.1.min.js" type="text/javascript">
</body>
</html> 
```

其余的脚本标签在哪里？

# meteor - 从客户端访问 Meteor.users 的正确方法

> ID：14603151
> 
> 赞同：7
> 
> 时间：2013-01-30T11:40:45.257
> 
> 标签：meteor

为了方便起见，我在`users`集合中定义了一些有用的字段。允许客户访问相应字段的正确方法是什么？我正在使用`autopublish`包，但从`Meteor.user()`客户端只显示`emails`数组。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T11:58:14.380

在查询用户集合时，您必须明确告诉 Meteor 要包含哪些用户字段。

例如在客户端发布自定义“头像”字段：

```
// Client only code
if (Meteor.isClient) {

Meteor.subscribe("currentUserData");
...
} 

// Server-only code
if (Meteor.isServer) {

  Meteor.publish("currentUserData", function() {
    return Meteor.users.find({}, {
      fields : {
        'avatar' : 1
      }
    });
  });   
...
} 
```

# ios - 将 iphone 绘图放入浏览器

> ID：14603155
> 
> 赞同：0
> 
> 时间：2013-01-30T11:40:53.760
> 
> 标签：ios, ruby-on-rails, ipad

我需要建立一个系统，我们的客户可以在我们员工的 ipad 或 Galaxy-tab 上签署合同。

我是一名 ruby​​-on-rails 网络开发人员，因此将其作为在线应用程序对我来说很容易。

大问题是：我的家伙说，他的 ipad 的笔功能非常棒，他可以写/签署东西。

是否可以使用浏览器获取此输入？就像我制作一个绘图画布一样，当提交表单时，ipad 将其生成为图像并将其发送到服务器？

否则我需要建立一个本机应用程序。我的家伙想保留他的 ipad，所以当每个应用程序都需要通过应用程序商店下载时，我遇到了麻烦——这意味着我不能为他开发应用程序，只有他可以得到它。对？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T08:15:13.527

好的，建立我自己的格式输入

```
**canvas to image** – An input plugin to use a canvas for drawings (mostly autographs). the 
drawing will be submitted to the server

Link to Gist: https://gist.github.com/4678219 
```

# ruby - 遏制给我奇怪的错误

> ID：14603162
> 
> 赞同：0
> 
> 时间：2013-01-30T11:41:15.880
> 
> 标签：ruby, windows, curl, libcurl, curb

我安装`curb on ruby`了这行代码，它说它安装好了。

```
C:\>gem install curb --platform=ruby -- --with-curl-lib=C:\curl\bin --with-curl-include=D:\curl\include 
```

然后我去运行一个`require 'curb'`顶部的脚本，我得到一个错误说 `the procedure entry point curl_easy_escape could not be located in the dynamic link library libcurl.dll`

有谁知道这个错误是什么意思？我在网上找不到任何关于它的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-10T10:40:03.647

听起来你需要更新你的 libcurl.dll

# c++ - 如何使用 sfinae 选择构造函数？

> ID：14603163
> 
> 赞同：30
> 
> 时间：2013-01-30T11:41:16.830
> 
> 标签：c++, c++11, constructor, sfinae

*在模板元编程中，可以在返回类型*上使用 SFINAE来选择某个模板成员函数，即

```
template<int N> struct A {
  int sum() const noexcept
  { return _sum<N-1>(); }
private:
  int _data[N];
  template<int I> typename std::enable_if< I,int>::type _sum() const noexcept
  { return _sum<I-1>() + _data[I]; }
  template<int I> typename std::enable_if<!I,int>::type _sum() const noexcept
  { return _data[I]; }
}; 
```

但是，这不适用于构造函数。假设，我想声明构造函数

```
template<int N> struct A {
   /* ... */
   template<int otherN>
   explicit(A<otherN> const&); // only sensible if otherN >= N
}; 
```

但不允许它为`otherN < N`.

那么，**这里可以使用 SFINAE 吗？**我只对允许自动模板参数推导的解决方案感兴趣，这样

```
A<4> a4{};
A<5> a5{};
A<6> a6{a4};  // doesn't compile
A<3> a3{a5};  // compiles and automatically finds the correct constructor 
```

*注意：这是一个非常简化的示例，其中 SFINAE 可能是多余的，`static_assert`但可能就足够了。但是，我想知道是否**可以**改用 SFINAE。*

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-30T11:46:46.083

您可以向模板添加默认类型参数：

```
template <int otherN, typename = typename std::enable_if<otherN >= N>::type>
explicit A(A<otherN> const &); 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2018-05-28T08:33:44.650

触发 SFINAE 的方法有很多，这`enable_if`只是其中之一。首先：

## Wats 是 std::enable_if 吗？

就是这样：

```
template<bool, class T=void> enable_if{ typedef T type; };
template<class T> enable_if<false,T> {};
template<bool b, class T=void> using enable_if_t = typename enable_f<b,T>::type; 
```

这个想法是为了`typename enable_if<false>::type`成为一个错误，因此跳过任何包含它的模板声明。

那么这个触发功能怎么选呢？

## 禁用功能

这个想法在某些方面使声明错误：

### 按返回类型

```
template<class Type>
std::enable_if_t<cond<Type>::value,Return_type> function(Type); 
```

### 通过实际参数

```
template<class Type>
return_type function(Type param, std::enable_if_t<cond<Type>::value,int> =0) 
```

### 通过模板参数

```
template<class Type, 
    std::enable_if_t<cond<Type>::value,int> =0> //note the space between > and =
return_type function(Type param) 
```

## 选择功能

您可以使用以下技巧参数化不同的替代方案：

```
tempplate<int N> struct ord: ord<N-1>{};
struct ord<0> {};

template<class T, std::enable_if<condition3, int> =0>
retval func(ord<3>, T param) { ... }

template<class T, std::enable_if<condition2, int> =0>
retval func(ord<2>, T param) { ... }

template<class T, std::enable_if<condition1, int> =0>
retval func(ord<1>, T param) { ... }

template<class T> // default one
retval func(ord<0>, T param) { ... }

// THIS WILL BE THE FUCNTION YOU'LL CALL
template<class T>
retval func(T param) { return func(ord<9>{},param); } //any "more than 3 value" 
```

如果满足，这将调用第*一个/第二个/第三个/第四个*函数，而不是没有一个。`condition3``condition2``condition1`

## 其他 SFINAE 触发器

编写编译时条件可以是显式特化的问题，也可以是未评估的表达式成功/失败的问题：

例如：

```
template<class T, class = void>
struct is_vector: std::false_type {};
template<class X>
struct is_vector<vector<X> >:: std::true_type {}; 
```

所以那`is_vector<int>::value`是`false`但是`is_vecttor<vector<int> >::value`是`true`

或者，通过*自省*，比如

```
template<class T>
struct is_container<class T, class = void>: std::false_type {};

template<class T>
struct is_container<T, decltype(
  std::begin(std::declval<T>()),
  std::end(std::declval<T>()),
  std::size(std::declval<T>()),
  void(0))>: std::true_type {}; 
```

所以如果给定，你`is_container<X>::value`可以编译等。`true``X x``std::begin(x)`

诀窍是只有当所有子表达式都是可编译的时，`decltype(...)`实际上才是`void`（运算符丢弃先前的表达式）。`,`

* * *

甚至可以有许多其他选择。希望在这一切之间你能找到一些有用的东西。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-01-30T23:09:15.013

在 C++11 中，您可以使用默认模板参数：

```
template <int otherN, class = typename std::enable_if<otherN >= N>::type>
explicit A(A<otherN> const &); 
```

但是，如果您的编译器还不支持默认模板参数，或者您需要多个重载，那么您可以使用这样的默认函数参数：

```
template <int otherN>
explicit A(A<otherN> const &, typename std::enable_if<otherN >= N>::type* = 0); 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2019-04-06T21:19:59.017

> 在大多数情况下，公认的答案是好的，但如果存在两个具有不同条件的构造函数重载，则会失败。我也在寻找这种情况下的解决方案。

是：接受的解决方案有效，但不适用于两个替代构造函数，例如，

```
template <int otherN, typename = typename std::enable_if<otherN == 1>::type>
explicit A(A<otherN> const &);

template <int otherN, typename = typename std::enable_if<otherN != 1>::type>
explicit A(A<otherN> const &); 
```

因为，如[本页](https://en.cppreference.com/w/cpp/types/enable_if)所述，

> 一个常见的错误是声明两个仅在默认模板参数上有所不同的函数模板。这是非法的，因为默认模板参数不是函数模板签名的一部分，并且用相同的签名声明两个不同的函数模板是非法的。

正如在同一页面中提出的那样，您可以应用 SFINAE 解决此问题，修改签名，到值（不是类型）模板参数的类型，如下所示

```
template <int otherN, typename std::enable_if<otherN == 1, bool>::type = true>
explicit A(A<otherN> const &);

template <int otherN, typename std::enable_if<otherN != 1, bool>::type = true>
explicit A(A<otherN> const &); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-04-09T20:27:11.863

## 使用 C++20，您可以使用`requires`关键字

使用 C++20，您可以摆脱 SFINAE。

*`requires`*关键字是*`enable_if`*!的简单替代品

请注意，***otherN == N*** 的情况是一种特殊情况，因为它属于*默认副本 ctor*，所以如果你想处理它，你必须单独实现它：

```
template<int N> struct A {
   A() {}    

   // handle the case of otherN == N with copy ctor
   explicit A(A<N> const& other) { /* ... */ }

   // handle the case of otherN > N, see the requires below
   template<int otherN> requires (otherN > N)
   explicit A(A<otherN> const& other) { /* ... */ }

   // handle the case of otherN < N, can add requires or not
   template<int otherN>
   explicit A(A<otherN> const& other) { /* ... */ }
}; 
```

该*`requires`*子句得到一个`constant expression`评估`true`或`false`决定是否在重载决议中考虑此方法，如果 requires 子句为真，则该方法优于另一个没有 requires 子句的方法，因为它更专业。

代码：[https ://godbolt.org/z/RD6pcE](https://godbolt.org/z/RD6pcE)

# memory - Cocos2d X .自发卸载资源

> ID：14603171
> 
> 赞同：0
> 
> 时间：2013-01-30T11:41:55.070
> 
> 标签：memory, resources, textures, cocos2d-x, preload

在加载场景时，我预加载了所有资源，如精灵、声音等。但是我的一个测试设备（HTC Desire，Android 2.2.2）在加载后会卸载资源，所以当游戏尝试播放一些声音或绘制精灵时，它会冻结片刻再次加载资源。此问题仅在 HTC Desire 上出现，我在其他设备（Samsung Galaxy Ace、Android 2.3.6 和 Acer A100 标签、Android 4.0.3）上没有遇到此问题。

有人能告诉我为什么会这样吗？谢谢。

这就是我预加载资源的方式：

```
for (.....)
{
            CCString* file = CCString::create(path.c_str());
            if(file) {
                CCTexture2D* texture = CCTextureCache::sharedTextureCache()->addImage(file->getCString());
            }
} 
```

我也试过这样，但它给出了保存结果：

```
for (.....)
{
            CCString* file = CCString::create(path.c_str());
            if(file) {
                CCSpriteFrame* frame = new CCSpriteFrame();
                CCSpriteFrameCache::sharedSpriteFrameCache()->addSpriteFrame(frame, file->getCString());
                frame->retain();
            }
} 
```

CCTextureCache::sharedTextureCache()->dumpCachedTextureInfo() 两种方式都表示所有纹理都已加载：

01-29 15:18:36.111: D/cocos2d-x 调试信息(7579): cocos2d: CCTextureCache dumpDebugInfo: 53 个纹理，为 103840 KB (101.41 MB)

我还尝试将预加载的纹理数量减少到 31 个（42.76 MB），但没有任何改变。

PS：我再说一遍，这个问题只出现在 2.2 Android OS 的 Desire 上......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:59:05.217

[此处描述](http://www.learn-cocos2d.com/2012/11/optimize-memory-usage-bundle-size-cocos2d-app/)了此行为的一种可能解释，在“避免在内存警告期间清除缓存”下。

默认情况下，cocos2d（我想 cocos2d-x 也不例外）会在收到内存警告时清除所有缓存。这意味着您可以根据需要预加载资源，只需要一个内存警告，并且所有预加载（和当前未使用的）纹理都将被卸载。

# ajax - 没有结束标记的 MVC3 Razor 和 Ajax.ActionLink

> ID：14603176
> 
> 赞同：2
> 
> 时间：2013-01-30T11:42:07.250
> 
> 标签：ajax, asp.net-mvc

我需要在 ajax 动作链接中呈现大量内容 -`<a ...>`和`</a>`.

**如何在没有结束`</a>`标记的情况下呈现 ajax 操作链接？**

例如：

```
@Ajax.ActionLinkWithNoClosingTag(....)
  <image ... />
  <span ... />
  @Html.Partial(...)
</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T11:54:39.583

AFAIK 你需要一个像 Helper.BeginForm() 这样的助手。也许没有 IDisposable 功能，但可以在其中包含其他元素。我建议您查看这个[SO question](https://stackoverflow.com/questions/7196276/creating-mvc3-razor-helper-like-helper-beginform)并根据您的需要进行调整。

# php - PHP文档中的javascript验证问题

> ID：14603180
> 
> 赞同：1
> 
> 时间：2013-01-30T11:42:26.207
> 
> 标签：php, javascript, validation, email, passwords

我有这个 .php 文档，您可以在其中在网上商店注册。我想为其添加 javascript 验证，但该站点完全由 .php 组成，因此没有 html 头和正文标记。通常您可以将 javascript 源代码放在 head 标记中，但不能放在 .php 中。（或者至少我不知道如何）测试代码时，javascript文档看起来不错，但是当我把它放在.php文档中时，它给出了关于（“）和（'）的某些错误。当我尝试链接时对于单独的 javascript 文档，代码似乎根本不起作用。

（我已经添加了整个 php 页面） PHP 文档开始：

```
<?php

include 'header.php';
include 'menu.php';

    echo ' 
```

```
function checkEmail(myForm) 
{
    if (/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(registration.emailAddress.value))
    {
    return (true)
    }
        alert("Invalid E-mail Address! Please re-enter.")
        return (false)
}

function validatePwd() 
{
    var invalid = " "; // Spatie mag niet
    var minLength = 6; // Minimaal 6 tekens
    var pw1 = document.registration.password.value;
    var pw2 = document.registration.passwordConfirm.value;
// Beide velden gelijke waarde
    if (pw1 == "" || pw2 == "") 
    {
        alert("Please enter your password twice.");
        return false;
    }
// Minimale lengte variabele
    if (document.registration.password.value.length < minLength) 
    {
        alert("Your password must be at least " + minLength + " characters long. Try again.");
        return false;
    }
// spatiegebruik variabele
    if (document.registration.password.value.indexOf(invalid) > -1); 
    {
        alert("Spaces are not allowed.");
        return false;
    }

    else 
    {
    if (pw1 != pw2) 
        {
        alert ("You did not enter the same new password twice. Please re-enter your password.");
        return false;
        }
    else 
    {
        return true;
    }
    }
} 
```

```
 <div id="main">

    <form name="registration" action="registerconfirm.php" method="post" id="form" onSubmit="return validatePwd()">

        <h2>Personal Information</h2>

        <fieldset class="login_register">

            <label for="firstName" class="form">First name:</label> 

                <div class="registrationForm" id= "firstNameCheck"></div>

                    <input type="text" name="firstname" id="register_first_name"/>

            <label for="lastName" class="form">Last name:</label>

                <div class="registrationForm" id="lastNameCheck"></div>

                    <input type="text" name="lastname" id="register_last_name"/>

            <label for="email" class="form">E-mail:</label>

                <div class="registrationForm" id="emailCheck"></div>

                    <input type="text" name="emailAddress" id="register_email"/>

        </fieldset>

        <h2>Login Information</h2>

        <fieldset class="login_register">

            <label for="password" class="form">Password:</label>

                <div class="registrationForm" id="lastNameCheck"></div>                 

                    <input type="password" name="password" id="password"/>

            <label for="passwordCheck" class="form">Confirm password:</label>

                <div class="registrationFormAlert" id="divPassCheck"></div>

                    <input type="password" name="passwordConfirm" id="passwordConfirm"/>

            <input type="submit" class="button" value="SUBMIT"/>

        </fieldset>

    </form>

</div>

';

include 'footer.php'; 
```

?>

和Javascript代码：

```
<SCRIPT LANGUAGE="JavaScript">

function checkEmail(myForm) 
{
    if (/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(registration.emailAddress.value))
    {
    return (true)
    }
        alert("Invalid E-mail Address! Please re-enter.")
        return (false)
}

function validatePwd() 
{
    var invalid = " "; // Invalid character is a space
    var minLength = 6; // Minimum length
    var pw1 = document.myForm.password.value;
    var pw2 = document.myForm.passwordConfirm.value;
// check for a value in both fields.
    if (pw1 == '' || pw2 == '') 
    {
        alert('Please enter your password twice.');
        return false;
    }
// check for minimum length
    if (document.myForm.password.value.length < minLength) 
    {
        alert('Your password must be at least ' + minLength + ' characters long. Try again.');
        return false;
    }
// check for spaces
    if (document.myForm.password.value.indexOf(invalid) > -1) 
    {
        alert("Sorry, spaces are not allowed.");
        return false;
    }

    else 
    {
    if (pw1 != pw2) 
        {
        alert ("You did not enter the same new password twice. Please re-enter your password.");
        return false;
        }
    else 
    {
        return true;
    }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T11:46:59.117

JavaScript 在客户端的浏览器（也称为客户端）中执行，PHP 是一种服务器端语言。

除非您打算为 PHP 编写 JS 解释器，否则您无法从 PHP 运行 JS。
更好的选择是用 PHP 重写 JS。

* * *

除非您在包含文件时遇到问题，否则您只需将 a:
`<script type="text/javascript" src="myJSFile.js"></script>`标签编辑到您的`header.php`.

所以：

```
echo '<script type="text/javascript" src="myJSFile.js"></script>'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T11:48:45.273

有几件事：您可以在`<script>`任何您喜欢的地方添加标签。但是，属性`language`并不真正存在，但这并不*重要*。都一样，应该是`<script type="text/javascript">`。
如果您的网站是（一堆）PHP 脚本的输出，为什么不简单地`echo`使用脚本呢？

```
echo '<script type="text/javascript" src="path/to/script.js"></script>'; 
```

或者，在头文件中：

```
 echo '<title>Title</title>';
?>
<script type='text/javascript'>
    var script ='just add it here';
</script>
<?php
    echo '</head>';//continue php 
```

也没有什么能阻止你这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T11:48:45.217

尝试使用 PHPs HEREDOC 语法来输出函数。 [http://www.php.net/manual/it/language.types.string.php#language.types.string.syntax.heredoc](http://www.php.net/manual/it/language.types.string.php#language.types.string.syntax.heredoc)

# python - 负载测试 gevent 套接字

> ID：14603186
> 
> 赞同：1
> 
> 时间：2013-01-30T11:42:50.870
> 
> 标签：python, gevent

如何加载测试 gevent 套接字？我编写了一个简单的服务器，我想在调整代码之前对其进行负载测试以找出可以进行哪些改进。

负载测试套接字服务器是否有任何细节？我将如何对这段代码进行负载测试，以便在应用调整后比较结果？

```
from gevent import server
from gevent.monkey import patch_all; patch_all()
import gevent

class Client(object):
    def __init__(self, socket, address, server_handler):
        self.socket = socket
        self.address = address
        self.server_handler = server_handler
        gevent.spawn(self.listen)

    def listen(self):
        f = self.socket.makefile()
        while True:
            line = f.readline()
            if not line:
                print 'client died'
                break
            line = line.rstrip()
            for addr, c in self.server_handler.users.iteritems():
                msg = '<%s> says: %s' % (self.address, line)
                c.send(msg)

            print '<%s>: %s' % (self.address, line)

    def send(self, msg):
        f = self.socket.makefile()
        f.write('%s\r\n' % msg)
        f.flush()

class ServerHandler(object):
    def __init__(self):
        self.users = {}

    def __call__(self, socket, address):
        client = Client(socket, address, self)
        self.users[address] = client
        self.socket = socket
        self.address = address
        print 'connection made'

if __name__ == '__main__':
    server = server.StreamServer(('0.0.0.0', 5000), ServerHandler())
    server.serve_forever() 
```

# android - AudioFlinger 无法创建效果，状态：-22

> ID：14603188
> 
> 赞同：6
> 
> 时间：2013-01-30T11:43:04.577
> 
> 标签：android

请帮助我，如何解决这个问题？

```
public class VisualizerCapture extends Activity implements Visualizer.OnDataCaptureListener
private Visualizer mVisualizer;

@Override
public void onCreate(Bundle savedInstanceState){
 super.onCreate(savedInstanceState);
    mVisualizer = new Visualizer(0);
    setupVisualizer();

private void setupVisualizer() {
    mVisualizer.setEnabled(false);
    mVisualizer.setCaptureSize(8);      //test
    mVisualizer.setDataCaptureListener(this,250,false,true);        
            Log.v("ABS","setupVisualizer" + mVisualizer.getEnabled());    //log 
```

此代码抛出错误：ERROR/AudioEffect(2393): set(): AudioFlinger could not create effect, status: -22

那是在xml中

```
 <uses-permission android:name="android.permission.RECORD_AUDIO"/>             
<uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS"/> 
```

日志猫：

java.lang.RuntimeException：无法启动活动 ComponentInfo{blabla}：java.lang.RuntimeException：无法初始化 Visualizer 引擎，错误：-4 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956) 在 android.app。 ActivityThread.handleLaunchActivity(ActivityThread.java:1981) 在 android.os.Handler 的 android.app.ActivityThread.access$600(ActivityThread.java:123) 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)。 dispatchMessage(Handler.java:99) at android.os.Looper.loop(Looper.java:137) at android.app.ActivityThread.main(ActivityThread.java:4424) at java.lang.reflect.Method.invokeNative(Native方法）在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller 的 java.lang.reflect.Method.invoke(Method.java:511)。在 dalvik.system.NativeStart.main(Native Method) 的 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551) 处运行（ZygoteInit.java:784） 原因：java.lang.RuntimeException：无法初始化可视化引擎，错误：-4 at android.media.audiofx.Visualizer.(Visualizer.java:182) at com.blablabeta.gui.VisualizerCapture.onCreate(EqVisualizerCaptureAudio.java:27) at android.app.Activity.performCreate(Activity .java:4465) 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049) 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)无法初始化 Visualizer 引擎，错误：-4 at android.media.audiofx.Visualizer.(Visualizer.java:182) at com.blablabeta.gui.VisualizerCapture.onCreate(EqVisualizerCaptureAudio.java:27) at android.app.Activity.performCreate (Activity.java:4465) 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049) 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)无法初始化 Visualizer 引擎，错误：-4 at android.media.audiofx.Visualizer.(Visualizer.java:182) at com.blablabeta.gui.VisualizerCapture.onCreate(EqVisualizerCaptureAudio.java:27) at android.app.Activity.performCreate (Activity.java:4465) 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049) 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)

这就对了？以及如何解决这个错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T12:13:36.987

使用`Visualizer`on session 0 时，您需要拥有权限`MODIFY_AUDIO_SETTINGS`，`RECORD_AUDIO`但我猜您的应用程序具有这些权限，否则您会收到`PERMISSION_DENIED`错误消息（`-1`如果我没记错的话）。

状态 -22 应该是`BAD_VALUE`. 从问题中提供的信息中，我并不完全清楚为什么会发生这种情况。除了您粘贴的那一行之外，logcat 输出中可能还有更多可用信息。您最终获得状态的潜在原因`BAD_VALUE`是，例如未找到效果，或者效果已经插入效果链中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T08:01:55.903

问题消失了，然后我在真机上测试了我的应用程序。模拟器有问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-27T13:55:15.047

如果没有记错，您还必须向用户请求权限？我有同样的问题添加

```
<uses-permission android:name="android.permission.RECORD_AUDIO"/> 
```

只是所需内容的一部分。看看这里：[无法在 Android 中请求 RECORD_AUDIO 权限](https://stackoverflow.com/questions/51304399/unable-to-request-record-audio-permission-in-android)

几乎可以提供您需要的一切。

# java - 如何动态显示/隐藏 GXT 面板？

> ID：14603193
> 
> 赞同：0
> 
> 时间：2013-01-30T11:43:23.633
> 
> 标签：java, gxt

我正在创建 ContentPanel 并将其隐藏：

```
final ContentPanel infoPanel = new ContentPanel(); 
final TabPanel infoTabPanel = new TabPanel();
...
//Adding TabItems with some forms
infoPanel.add(infoTabPanel);
infoPanel.hide();
add(infoPanel); 
```

然后在一些事件监听器中，我尝试显示这个隐藏的面板：

```
infoPanel.show();
infoPanel.layout(); 
```

但是这个面板没有任何数据显示。只有当我点击标签数据时才会出现。

那么如何正确隐藏/显示这个面板呢？

**编辑：**

我正在使用 GXT 2.2.4。
我正在使用包含 FormPanel 并隐藏 ContentPanel 的 TabPanel 创建 ContentPanel。

然后在事件侦听器中，我尝试显示这个隐藏的面板，但它没有表单显示。只有当我点击标签表单时才会出现。

这是代码：

```
protected void onRender(Element parent, int pos) {
    super.onRender(parent, pos);
    final ContentPanel infoPanel = new ContentPanel();
    infoPanel.setAutoHeight(true);
    final TabPanel infoTabPanel = new TabPanel();
    infoTabPanel.setAutoHeight(true);

    final FormPanel testForm = new FormPanel();

    FieldSet fieldSet = new FieldSet();
    fieldSet.setHeading("Information");

    FormLayout fLayout = new FormLayout();
    fieldSet.setLayout(fLayout);

    LabelField field1 = new LabelField();
    LabelField field2 = new LabelField();

    field1.setFieldLabel("Field1:");
    field1.setName("field1");

    fieldSet.add(field1);

    field2.setFieldLabel("Field2:");
    field2.setName("field2");
    fieldSet.add(field2);
    testForm.add(fieldSet);

    TabItem formTab = new TabItem("Form Tab");
    formTab.add(testForm);
    infoTabPanel.add(formTab);

    TabItem longText = new TabItem("Long Text");
    longText.addStyleName("pad-text");
    longText.addText("Long Text" + "<br>" + "Long TextLong Text");
    infoTabPanel.add(longText);

    infoPanel.add(infoTabPanel);
    infoPanel.hide();

    Button buttonShow = new Button("show");
    buttonShow.addSelectionListener(new SelectionListener<ButtonEvent>() {
        @Override
        public void componentSelected(ButtonEvent ce) {
            infoPanel.show();
        }
    });

    Button buttonHide = new Button("hide");
    buttonHide.addSelectionListener(new SelectionListener<ButtonEvent>() {
        @Override
        public void componentSelected(ButtonEvent ce) {
            infoPanel.hide();
        }
    });

    add(infoPanel);
    add(buttonShow);
    add(buttonHide);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T16:33:13.833

你有哪个 GXT 版本？我无法在 GXT 3.x 上重现您的问题。我写了一个小示例代码，它完全符合您的要求。

```
public void onModuleLoad() {

    final ContentPanel infoPanel = new ContentPanel();
    final TabPanel infoTabPanel = new TabPanel();

    infoTabPanel.add(new TextButton("moo"), "moo");
    infoTabPanel.add(new TextButton("boo"), "boo");
    infoPanel.add(infoTabPanel);
    infoPanel.hide();

    VerticalLayoutContainer vlc = new VerticalLayoutContainer();
    vlc.setPixelSize(300, 250);

    TextButton buttonShow = new TextButton("show");
    buttonShow.addSelectHandler(new SelectHandler() {

        @Override
        public void onSelect(SelectEvent event) {
            infoPanel.show();
        }
    });

    TextButton buttonHide = new TextButton("hide");
    buttonHide.addSelectHandler(new SelectHandler() {

        @Override
        public void onSelect(SelectEvent event) {
            infoPanel.hide();
        }
    });

    vlc.add(infoPanel, new VerticalLayoutData(1, 1));
    vlc.add(buttonShow);
    vlc.add(buttonHide);
    RootPanel.get().add(vlc);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T11:01:58.523

好的我明白了。

好的，我明白了，既然单击选项卡会显示它，为什么不以编程方式在侦听器中选择选项卡？

```
infoTabPanel.setSelection(formTab); 
```

[http://dev.sencha.com/deploy/gxt-2.2.5/docs/api/com/extjs/gxt/ui/client/widget/TabPanel.html#setSelection(com.extjs.gxt.ui.client.小部件.TabItem)](http://dev.sencha.com/deploy/gxt-2.2.5/docs/api/com/extjs/gxt/ui/client/widget/TabPanel.html#setSelection(com.extjs.gxt.ui.client.widget.TabItem))

---------下面没有工作------------

所以试试`infoPanel.repaint();`

# mod-wsgi - apache服务器中的wsman请求

> ID：14603194
> 
> 赞同：2
> 
> 时间：2013-01-30T11:43:30.767
> 
> 标签：mod-wsgi, wsman

我在 apache 服务器中配置了 mod_wsman 模块。在浏览器中输入 IP 地址时收到 xml 错误响应。我还为 web.py python web 框架配置了 mod_wsgi 模块来渲染网页。所以我在浏览器中给出了有效的网址，它没有显示。是否有任何机构在 mod_wsman 上工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T10:16:04.630

Apache 和 WSMAN 服务在单独的进程状态下运行。Apache 工作在 80 个端口，而 WSMAN 服务工作在其他端口，例如端口 8889。

模块写最重要的就是写wsman一个钩子函数wsman_handler(request_rec * r)，它的传入参数是一个指向Apache消息的指针，函数的开头是判断请求的类型，如果不是就是wsman 请求，模块返回 DECLINED 如下所示的代码，

if(strcmp(r->handler, "wsman-handler")) if (strcmp (r-> handler, "wsman-handler")) return DECLINED; 退货已拒绝

# javascript - javascript 与关键字 this 混淆

> ID：14603197
> 
> 赞同：-1
> 
> 时间：2013-01-30T11:43:42.637
> 
> 标签：javascript, function, this, keyword

```
var chapter = {
    num: 7,
    title: ‘Creating Functions’,
    getNum: function() { return num; }\\without this keyword
}; 
```

没有关键字 this 的输出是未定义的

```
var chapter = {
    num: 7,
    title: ‘Creating Functions’,
    getNum: function() { return this.num; }\\with this keyword
}; 
```

为什么需要这个关键字，请用简单的方式解释一下。我知道这是重复的问题，但我看到他们都从不满意。所以请......

还有一件事，这段代码实际上做了什么。

```
(function() {
    // Function body goes here.
})(); 
```

我知道它立即调用的函数，但我需要一些详细的解释。提前谢谢大家

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T11:45:36.780

`num`是当前*作用域中的**变量* （由定义函数的位置决定）。`num`

 *`this.num`是当前*上下文的**属性* （由函数的*调用*方式决定）。`num`

 **> 立即调用的函数，但我需要一些详细的解释

JavaScript 中的作用域由函数决定。立即调用的函数会创建一个新的作用域，并用于避免向当前作用域添加额外的变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T11:50:45.593

回答你问题的最后一部分：那个“技巧”被称为闭包。

首先：`(...)()`在第一组括号内创建一些东西，然后调用它的结果。如果我们用一个函数代替`...`，它将调用该函数。

有人这样做的原因是创建一个范围，允许人们在不污染全局范围的情况下定义各种事物（只需将变量放在`var myVar = 1;`某个位置即可将变量分配给全局范围。在闭包中，您可以自由地制作所有您想要的混乱，而不会将全局范围变成任何其他脚本的混乱。***

# android - 将计划添加到 android 应用程序

> ID：14603201
> 
> 赞同：0
> 
> 时间：2013-01-30T11:43:50.877
> 
> 标签：android, android-service, android-alarms

我想为我的应用程序创建一个调度程序。我目前的想法是创建一个在启动时启动并监听日期和时间的后台服务。这会触发我的应用程序。但我猜这不是最有效的方法。我用谷歌搜索了很多，没有想出任何不同的东西。有没有比创建服务更有效的方法？

**[编辑]**

让我的问题更清楚。我想做这样的东西。

假设我想在每周一上午 10:00 运行应用程序，我该怎么做？我炮制的方法还是更有效的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T11:45:03.327

您所需要的只是系统的[AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)和一个启动[IntentService的](http://developer.android.com/reference/android/app/IntentService.html)[BroadcastReceiver](http://developer.android.com/reference/android/content/BroadcastReceiver.html)。

*更新：在第二次阅读时，**触发我的应用程序*是什么意思？我假设它是非交互式的，但如果它是交互式的，你可以在 BroadcastReceiver 的帮助下启动你的 Activity；那时不需要 IntentService。无论哪种方式都可以节省您的时间监控。

**更新**您必须问自己的核心问题之一是，我是否要唤醒设备，以便我的 {app, service} 在该时间点准确运行，还是可以在如果“另一个星期一上午 10 点”已经过去，设备是否被用户唤醒？

无论该问题的答案如何，您都将使用系统的 AlarmManager 设置重复警报，使用`setRepeating()`or`setInexactRepeating()`和使用`RTC`or `RTC_WAKEUP`。`triggerAtMillis`是下周一上午 10 点的时间增量，`intervalMillis`是一周的毫秒数。

就是这样。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-30T12:04:43.677

我认为您需要修复代码的时间表。尝试使用此代码来安排特定功能。

```
 Timer mTimer = new Timer();
    TimerTask mTimerTask = new TimerTask() {
        @Override
        public void run() {
            /*your code here..*/
        }
    };
    mTimer.scheduleAtFixedRate(mTimerTask, getTomorrowMorning2AM(), 1000*60*60*24);

}
private static java.util.Date getTomorrowMorning2AM(){
    Calendar c = Calendar.getInstance();
    java.util.Date date2am =  c.getTime(); 
       date2am.setHours(2); 
       date2am.setMinutes(0); 

       return date2am;
  } 
```

# java - 哪个 Eclipse 包与谷歌应用引擎一起使用？

> ID：14603202
> 
> 赞同：1
> 
> 时间：2013-01-30T11:43:51.593
> 
> 标签：java, eclipse, google-app-engine

我打算用java在谷歌应用引擎平台上开发，我不知道我应该得到哪个eclipse下载包。

我不知道 Google 提供的插件是否具备所需的一切，并且经典软件包就足够了，或者是否可以通过下载标准 Java 软件包获得一些优势。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T14:28:49.550

[Google Eclipse 在https://developers.google.com/eclipse/](https://developers.google.com/eclipse/)上提供的插件拥有开发 GAE 应用程序所需的一切。

我不确定您所说的经典包是什么，但如果您正在谈论的是 Eclipse Classic，那么它就足够了。

其他几点：

*   确保为您正在使用的 Eclipse 版本下载正确的插件版本。转到[https://developers.google.com/eclipse/docs/download](https://developers.google.com/eclipse/docs/download)并使用与您安装的 Eclipse 版本相匹配的版本。
*   当您开始安装插件的过程时，您将看到类似[https://developers.google.com/eclipse/docs/install-eclipse-4.2](https://developers.google.com/eclipse/docs/install-eclipse-4.2)的屏幕截图，您可以在其中选择要安装哪些组件。您可以看到其中一个是必需的，但其余的是可选的。我建议您至少选择 SDKs 组件。

一切顺利。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T12:50:32.667

我开发了一些使用谷歌应用引擎的应用程序，根据我的经验，谷歌提供的 eclipse 插件就足够了，但你需要安装它的所有组件。

# javascript - 如何将十六进制字符串转换为字节数组，以及十六进制字符串中的字节数组？

> ID：14603205
> 
> 赞同：28
> 
> 时间：2013-01-30T11:43:58.537
> 
> 标签：javascript, arrays, string, hex

以下代码过程**bytes = parseHexString (createHexString (bytes))**导致**更新 bytes**，这是我想避免的。结果计算不正确。

```
<html>
<head>
<SCRIPT SRC="http://eu.static.mega.co.nz/sjcl_1.js"></SCRIPT>
<SCRIPT SRC="http://eu.static.mega.co.nz/crypto_1.js"></SCRIPT>
<SCRIPT SRC="http://eu.static.mega.co.nz/rsa_1.js"></SCRIPT>
<SCRIPT SRC="http://eu.static.mega.co.nz/hex_1.js"></SCRIPT>
<SCRIPT>
function parseHexString(str) { 
    var result = [];
    while (str.length >= 2) { 
        result.push(parseInt(str.substring(0, 2), 16));
        str = str.substring(2, str.length);
    }

    return result;
}

function createHexString(arr) {
    var result = "";
    for (i in arr) {
        var str = arr[i].toString(16);
        str = str.length == 0 ? "00" :
              str.length == 1 ? "0" + str : 
              str.length == 2 ? str :
              str.substring(str.length-2, str.length);
        result += str;
    }
    return result;
}

function t()
{
    var json_k     = 'aOrP5yLtNQT53WMQfufSlA';
    var json_csid  = 'CABD6JUMldvI_eqP0537xl9P8x7kgk2OjOq99Fy7kosphj6AFUtlbwRRDpg4EIifXRLO6FNpdD22WwtUlJ_1Mgye2Y87trEqLCbhahuEFJVQNMDtNbIem7xY2ER9uF-cdgBXZWuzp7XIBybSh7W8MSUlv_eGS6LcLGJ81Q49dSzVhcswHTJ_IJl04p3c0axR6ZIJ8dH5bJ_vXvgQsypUVVtdfMacKhB9cXdEtRZ6iWLKCKqscXdo6CNXlbIdzRhro0gxfmhfB_miysFAiSQrbtuYnIgYBU3i9p3jRlPD4ti3CUcnj0SomV61w1aEYNvo56HPMUZlVkVHA7BFzvHGHo0J';
    var json_privk = 'K7LDtk2M2QhjJx_v_Hqf0LKUBaZx76U_vBDjQty9HpFDy2MntF5HxxuyHQ9-1HmXeYzbL1pZnAxsZ7LRUbDnkR6qtJVaGdWuQhrytkuq0l5zBp-O--gZxoQPRGTsVgVRdAvpsRTkQI_q8fxADLCe0womFxtvvnD_FJgjaMsm7vkYchXkoq33WWyHijb3JMkymjl0_GtiSamT0qEL6sm_l5Z1lehqBGUEHfYAa0ub8IDx_yqy2R9Nh8Lwzmz4s24sShVxjaNsMBlSE-sEvTziOsnNWK1Zl_XUYadlENkweuIoxYx_lt8XIV71TzjEFuVTd-pXhzVlqePmIu3SM3bO1Kzq_DnGfB62RmzlmbtHU4iyw4Hd1wQFRhTeSRrvMjsMPFKN-SIIQU7CRNaMuaDxZbNZcOKhMg_h9mApM0rRS3VZaGZzFTL9rSaDMYHw4pL3aOkSFPMY3w785Tss7Zqwuo9HFUWUVbnYAb97JkgCohlMotORrMMtual1dQ4sG1sIYXyWTckAGGL0ZAGurhtSKiyz1m8Lb39pXPacqFh_nCHqqb2_RdrKTj0PdGZESKkU8YedeqC1I9nR4v38DuQc-pBBR5DOwgNjJMvzvsUehs_PxIL8THjgIcr7ONc4hWV9o2v_l81Vo2cCW2I99Iz84IFN2fV1dTqHIG_tnLzz8ljBVygETUqrFdZ0JlQJkurZ7RBku5krm-k9CZmDezCIzPPil-RcYzVIk00gNYAxfiZE48Or4WEiGjgKLnHCYVtSlvlMF4bPGB4SVCZ-68j49EjfSWaMK0OoMkpGhqf7KchgxYBZq6o3AhLgp4t0BClvsdee6VTz1SFqc3m2A-TMG6fNdbCT_Q9nYCYdZIROdOc';

    var aes = new sjcl.cipher.aes( prepare_key_pw("oEyoo9cQcw") );
    k = decrypt_key(aes, base64_to_a32(json_k) );

    aes = new sjcl.cipher.aes(k);

    var t = mpi2b(base64urldecode(json_csid));

    var privk = a32_to_str(decrypt_key(aes,base64_to_a32(json_privk)));

    var rsa_privk = Array(4);
    for (var i = 0; i < 4; i++)
    {
        var l = ((privk.charCodeAt(0)*256+privk.charCodeAt(1)+7)>>3)+2;

        rsa_privk[i] = mpi2b(privk.substr(0,l));
        if (typeof rsa_privk[i] == 'number') break;
        privk = privk.substr(l);    
    }

    var p = parseHexString(createHexString(rsa_privk[0]));  // !!!!!!!!!!!!!!!!!!!!!!!!!!!!
    var q = parseHexString(createHexString(rsa_privk[1]));  // !!!!!!!!!!!!!!!!!!!!!!!!!!!!
    var d = parseHexString(createHexString(rsa_privk[2]));  // !!!!!!!!!!!!!!!!!!!!!!!!!!!!
    var u = parseHexString(createHexString(rsa_privk[3]));  // !!!!!!!!!!!!!!!!!!!!!!!!!!!!
    sid = base64urlencode(b2s(RSAdecrypt(t,d,p,q,u)).substr(0,43));
    if (sid!=='tajetAbW0qTQGFlwp8iD5lQ0TFV1QUZJZFVvjRX7Xx-bPzYBoau7qog09w')
        console.log("ERROR");

    p = rsa_privk[0];
    q = rsa_privk[1];
    d = rsa_privk[2];
    u = rsa_privk[3];
    sid = base64urlencode(b2s(RSAdecrypt(t,d,p,q,u)).substr(0,43));
    if (sid=='tajetAbW0qTQGFlwp8iD5lQ0TFV1QUZJZFVvjRX7Xx-bPzYBoau7qog09w')
        console.log("OK");
}
</script>

</head>
<body onload="t();"></body>
</html> 
```

我不是 javascript 开发人员，也没有在 google 代码中找到**对这些数据**无效的人。

**更新 1**

```
console.log(createHexString(rsa_privk[0])); = e5d109c673d8ef03df564beb9e36e9983a23842b0a724efa45ff76bbe5ad72ed62d2757968 
```

但如果这样做

```
parseHexString('e5d109c673d8ef03df564beb9e36e9983a23842b0a724efa45ff76bbe5ad72ed‌​62d2757968'); 
```

然后代码`if (sid!== ...`出错

**更新 2**

```
console.log(rsa_privk[0].toString(16)); 
```

输出：123676133,198914513,129998601,245147334,11918451,206998232,96766191,75984899,177840095,106709334,10180427,208237547,119814814,127003446,189062377,84099480,220452154,250519075,267883908,115471915,165124106,238628722,169382478,42320122， 95982405,80725759,89608310,85166267,200925925,254033325,86971506,191278317,127411298,180195794,142776693,188738169,39016

**更新 3**

```
console.log(parseHexString(createHexString(rsa_privk[0])));
console.log(rsa_privk[0]); 
```

输出：

```
[229, 209, 9, 198, 115, 216, 239, 3, 223, 86, 75, 235, 158, 54, 233, 152, 58, 35, 132, 43, 10, 114, 78, 250, 69, 255, 118, 187, 229, 173, 114, 237, 98, 210, 117, 121, 104]

[123676133, 198914513, 129998601, 245147334, 11918451, 206998232, 96766191, 75984899, 177840095, 106709334, 10180427, 208237547, 119814814, 127003446, 189062377, 84099480, 220452154, 250519075, 267883908, 115471915, 165124106, 238628722, 169382478, 42320122, 95982405, 80725759, 89608310, 85166267, 200925925, 254033325, 86971506, 191278317, 127411298, 180195794, 142776693, 188738169, 39016] 
```

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2015-12-18T13:02:57.320

**将十六进制字符串转换为字节数组，反之亦然**

*注意：来自**crypto-js 的实现***

```
// Convert a hex string to a byte array
function hexToBytes(hex) {
    for (var bytes = [], c = 0; c < hex.length; c += 2)
        bytes.push(parseInt(hex.substr(c, 2), 16));
    return bytes;
}

// Convert a byte array to a hex string
function bytesToHex(bytes) {
    for (var hex = [], i = 0; i < bytes.length; i++) {
        var current = bytes[i] < 0 ? bytes[i] + 256 : bytes[i];
        hex.push((current >>> 4).toString(16));
        hex.push((current & 0xF).toString(16));
    }
    return hex.join("");
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-30T11:46:25.907

***更新：向下滚动以获取解决方案...[现场演示](http://jsfiddle.net/7Xnrq/)***

问题：您正在使用有损转换为十六进制，这是无法逆转的。

```
var p = parseHexString(createHexString(rsa_privk[0])); 
```

这永远不会与`rsa_privk[0]`.

因为，`createHexString()`只使用`last 2 bytes`from 每个数组元素。

例子：

```
rsa_privk[0] : [123676133, 198914513, 129998601, 245147334, 11918451, 206998232, 96766191, 75984899, 177840095, 106709334, 10180427, 208237547, 119814814, 127003446, 189062377, 84099480, 220452154, 250519075, 267883908, 115471915, 165124106, 238628722, 169382478, 42320122, 95982405, 80725759, 89608310, 85166267, 200925925, 254033325, 86971506, 191278317, 127411298, 180195794, 142776693, 188738169, 39016]

createHexString(rsa_privk[0]) : e5d109c673d8ef03df564beb9e36e9983a23842b0a724efa45ff76bbe5ad72ed62d2757968

parseHexString(createHexString(rsa_privk[0])) : [229, 209, 9, 198, 115, 216, 239, 3, 223, 86, 75, 235, 158, 54, 233, 152, 58, 35, 132, 43, 10, 114, 78, 250, 69, 255, 118, 187, 229, 173, 114, 237, 98, 210, 117, 121, 104] 
```

* * *

**更新：工作解决方案...**

这两个函数...十六进制始终包含 8 个字节块，每个块用于数组中的每个元素...

```
function parseHexString(str) { 
    var result = [];
    while (str.length >= 8) { 
        result.push(parseInt(str.substring(0, 8), 16));

        str = str.substring(8, str.length);
    }

    return result;
}

function createHexString(arr) {
    var result = "";
    var z;

    for (var i = 0; i < arr.length; i++) {
        var str = arr[i].toString(16);

        z = 8 - str.length + 1;
        str = Array(z).join("0") + str;

        result += str;
    }

    return result;
} 
```

测试代码...

```
function test() {   
    a = [123676133, 198914513, 129998601, 245147334, 11918451, 206998232, 96766191, 75984899, 177840095, 106709334, 10180427, 208237547, 119814814, 127003446, 189062377, 84099480, 220452154, 250519075, 267883908, 115471915, 165124106, 238628722, 169382478, 42320122, 95982405, 80725759, 89608310, 85166267, 200925925, 254033325, 86971506, 191278317, 127411298, 180195794, 142776693, 188738169, 39016];

    console.log("Input");
    console.log(a);

    b = createHexString(a);

    console.log("Hex");
    console.log(b);

    c = parseHexString(b); 

    console.log("Output");
    console.log(c);

    if(checkIfEqual(a, c)) {
        alert("Same");
    }
}

function checkIfEqual(arr1, arr2) {
    if (arr1.length != arr2.length) {
        return false;
    }
    //sort them first, then join them and just compare the strings
    return arr1.sort().join() == arr2.sort().join();
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-03-17T01:35:58.697

我只是想插话，在[https://github.com/dcodeIO/bytebuffer.js](https://github.com/dcodeIO/bytebuffer.js)有一个库可以轻松帮助进行这样的转换，因此您不需要编写自己的函数（这可能不会如果您的解决方案已通过 GitHub 上的开源社区进行审核，则可能是最优的，或者更优）。

```
var ByteBuffer = require("bytebuffer");

var bb = ByteBuffer.fromHex(yourHexString);

// need to convert it to base 64?
// bb.toBase64(); 
```

请参阅[https://github.com/dcodeIO/bytebuffer.js/wiki/API#bytebufferfromhexstr-littleendian-noassert](https://github.com/dcodeIO/bytebuffer.js/wiki/API#bytebufferfromhexstr-littleendian-noassert)以获取 API 文档以及对我上面使用的方法的更多见解。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-10-20T16:15:05.583

澄清一下，如果您只是想对一个简单的字符串（如`48656C6C6F20576F726C6421`( `Hello World!`)）进行十六进制解码，您可以使用 OP 函数，但不要使用 8 的长度，而应该使用 2 的长度。

代码：

```
var DecodeHexStringToByteArray = function (hexString) {
   var result = [];
   while (hexString.length >= 2) { 
       result.push(parseInt(hexString.substring(0, 2), 16));
       hexString = hexString.substring(2, hexString.length);
   }
   return result;
} 
```

输出将是`[72, 101, 108, 108, 111, 32, 87, 111, 114, 108, 100, 33]`

我知道这段代码已经在 OP 问题中，但它不在接受的答案中。我在这里的意图只是直接回答所问问题的第一部分（`How to convert a hex string into a bytes array`）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-11-15T21:05:03.903

我在这里找到了解决方案 在此处[输入链接描述](http://www.java2s.com/example/nodejs/string/convert-hex-string-to-byte-array.html)

```
function hexStringToByteArray(hexString) {
    if (hexString.length % 2 !== 0) {
        throw "Must have an even number of hex digits to convert to bytes";
    }
    var numBytes = hexString.length / 2;
    var byteArray = new Uint8Array(numBytes);
    for (var i=0; i<numBytes; i++) {
        byteArray[i] = parseInt(hexString.substr(i*2, 2), 16);
    }
    return byteArray;
} 
```

再次感谢`http://www.java2s.com`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-13T18:34:02.073

这是此测试的实时示例。

[http://jsfiddle.net/vincentwang2020/eks1z4g2/](http://jsfiddle.net/vincentwang2020/eks1z4g2/)

```
function testcreateHexString()
{
    alert('test function createHexString');
    var key = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24];
    var result = createHexString(key);
    alert ('Hex value:' + result);

    alert('test function parseHexString');

    var key2 = parseHexString(result);

    if (key.sort().join() == key2.sort().join())
        alert ('Matched');

} 
```

# php - 从数据库表 MYSQL 中选择 2 个随机成员

> ID：14603207
> 
> 赞同：0
> 
> 时间：2013-01-30T11:44:03.933
> 
> 标签：php, mysql, performance

我在下面有一个查询。在执行它时，它会返回所有结果，我可以看到每个成员 ID 的多条记录。

我想选择随机选择的两个成员的个人资料，而不会出现任何性能问题。

```
SELECT
  a.memberid,
  a.category_id,
  a.content,
  a.count_cid,
  a.importance
FROM tb_profilingdata a,
  tb_member b
WHERE a.memberid = b.memberid
    AND a.category_id IN($catstr)
    AND a.memberid NOT IN('$mid',$seen)
    AND b.gender = 'male'
ORDER BY a.memberid, a.category_id 
```

![此查询的结果](../Images/7a32e309f8c853c572150ef7d646ff9d.png)

我尝试了一些查询来选择一条随机记录

```
SELECT
  r1.memberid
FROM tb_profilingdata AS r1
  JOIN (SELECT
      (RAND() * (SELECT MAX(DISTINCT(memberid)) FROM tb_profilingdata)) AS memberid) AS r2
WHERE r1.memberid >= r2.memberid
ORDER BY r1.memberid ASC
LIMIT 1 
```

但它总共从**tb_profilingdata**中选择了 1 条记录，而我想要一个随机选择的成员的记录。

**我用tb_member**尝试了相同的查询，但是 tb_member 中存在的成员可能在 tb_profilingdata 中没有它的条目**。**

请建议我一个性能问题最少的好方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T11:47:47.657

可能会帮助你：

SELECT [something] FROM [source] WHERE [conditions] **ORDER BY RAND()** LIMIT 2

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T12:19:03.043

除非您提供一些示例数据，否则此查询未经测试

```
SELECT
  a.memberid,
  a.category_id,
  a.content,
  a.count_cid,
  a.importance
FROM tb_profilingdata a
  left join (select
           memberid
         from tb_member
         group by memberid
         order by rand()) b
    on a.memberid = b.memberid
WHERE a.category_id IN($catstr)
    AND a.memberid NOT IN('$mid',$seen)
    AND b.gender = 'male'
ORDER BY a.memberid, a.category_id 
```

# c# - 将未知数量的 DropDownLists 声明为具有某些样式

> ID：14603212
> 
> 赞同：0
> 
> 时间：2013-01-30T11:44:13.133
> 
> 标签：c#, asp.net-mvc, razor, styling

介绍一些背景知识，我有一个内部网站部分，用户可以在其中向个人资料添加技能，但由于技能的性质，总是会添加新技能，所以我永远无法确切知道我将拥有多少技能。

我有一个适用于我的自定义样式`Html.DropDownLists`：

```
<script>

    $(function () {
        $(".response").combobox();
    }); 

</script> 
```

这通常工作正常，但由于我试图捕获的数据的性质，我必须用增量数组命名我的 DropDownLists。在绘制 HTML 时，它的工作原理如下：

```
//Declare int answerIndex as 0

//foreach answer in questions ViewBag

@Html.DropDownList("answers[" + answerIndex + "].Response", new SelectList(ViewBag.Responses, "Id", "Name"), "")

//answerIndex++;

//end foreach 
```

我的控制器类上的 UpdateSkills 方法接受变量：

```
SQEPanswer[] 答案
```

这认为上述内容是必要的——它包含了答案的所有细节。

但是，最初引用的简单样式选项 - 我无法找到可靠应用它的方法，我想我可以在我的 js 中声明一组样式选项，但这会让我的脊椎爬行......

如果有人知道我如何将我的样式应用到我的 DropDownLists，我将非常感激 - 我是一个足够称职的程序员，但这个编程领域并不是我的强项。

我在 MVC #4 上使用 Razor 标记，欢迎任何问题/评论帮助我到达我想要的地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T14:46:07.493

离开一段时间后，我最终弄清楚了这个问题，对于问题的含糊之处感到抱歉-

```
@Html.DropDownList("answers[" + answerIndex + "].Response", new SelectList(ViewBag.Responses, "Id", "Name"), "", new { @class = "response" }) 
```

这会将样式应用于所有 DropDownList，无论生成了多少。

# ms-word - 无法在 MS Word 文件中用 Apache POI 替换阿拉伯字符

> ID：14603214
> 
> 赞同：5
> 
> 时间：2013-01-30T11:44:15.860
> 
> 标签：ms-word, apache-poi, arabic

我需要使用数据库中的值或用户输入的值动态修改 Word 文件。值和文件是阿拉伯语。

问题是它并非一直都在工作。每次，我都会遇到一个新的和不同的阿拉伯字符问题。

我正在使用的代码：

```
 FileInputStream in = new FileInputStream(path+"\\fiches\\"+fileName.trim()+".doc");
        POIFSFileSystem fs = new POIFSFileSystem(in);
        HWPFDocument doc = new HWPFDocument(fs);
        Range  r = doc.getRange();
         r.replaceText("<matricule>","  "+agent.getMatriculeAgent());
        r.replaceText("<cin>","  "+agent.getCin());
        r.replaceText("<الإسم الشخصي>", " "+agent.getPrenomAgentArabe());
        OutputStream out = response.getOutputStream();
        response.setContentType("application/rtf");
        response.setHeader("Content-Disposition","attachment; filename="+fileName);
        doc.write(out);
        out.flush(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T17:00:41.570

不幸的是，这不是 poi 问题，问题的根源是我使用的模板，我发现文本区域或某些单词特征可能导致此问题，模板必须是最简单的，例如：插入文本区域中的单词一个表可以创建一个奇怪的行为或不被替换，

# java - 使用 java 问题中的 wc 命令计算行数

> ID：14603216
> 
> 赞同：2
> 
> 时间：2013-01-30T11:44:20.023
> 
> 标签：java, wc

我想使用 java 计算文件的行数，我使用的代码是：

```
String[] wcCommand = new String[]{"/usr/bin/wc","-l" , filePath};
Process wcProcess=Runtime.getRuntime().exec(wcCommand);
wcProcess.waitFor();
BufferedReader bufferedReader = new BufferedReader(new InputStreamReader( wcProcess.getInputStream()));
String numberOfRowsline;
while((numberOfRowsline = bufferedReader.readLine()) != null) {
      System.out.print(numberOfRowsline);
} 
```

如果我有 5000000 行的大文件，则命令返回错误的数字。为什么会发生这种情况？当我直接从终端执行命令时，返回的值是正确的。

java的输出是：3288079 /PathToFile

终端的输出：5000000 /PathToFile

# java - 在 Adob e CQ 5 移动应用程序开发中获取移动设备属性时需要帮助

> ID：14603217
> 
> 赞同：0
> 
> 时间：2013-01-30T11:44:20.060
> 
> 标签：java, jakarta-ee, aem

我是 CQ 5 移动应用程序开发的新手，我想要实现的是，当移动设备向页面发送请求时，它会捕获移动设备的属性，如移动浏览器、移动浏览器版本、移动操作系统和移动操作系统版本。我想记录这些信息，并在稍后阶段使用它来将它们分类到不同的设备组中，并在不同的设备组中呈现不同的组件。

**注意我已经浏览了其中一些链接** [CQ5 Mobile Development Docs](http://dev.day.com/docs/en/cq/5-5/developing/mobile.html)

[http://www.cognifide.com/blogs/cq/adobe-cq-5-5-mobile-improvements/](http://www.cognifide.com/blogs/cq/adobe-cq-5-5-mobile-improvements/) [http://wurfl.sourceforge.net/help_doc.php](http://wurfl.sourceforge.net/help_doc.php)

我已经尝试过抛出空指针异常的代码，因为设备具有空值。如果我在某处做错了，请纠正我

```
SlingHttpServletRequest slingRequest = this.request.getSlingRequest();
    Device device = slingRequest.adaptTo(Device.class);
    Map<String, String> deviceAttributes = device.getAttributes();
    LOG.info("Request is sent from Device with OS"+deviceAttributes.get("device_os")); 
```

这是我测试此代码的方式，每当将请求发送到具有此组件的页面时，该组件从其中一个模拟器记录移动设备的属性，我检查我的日志文件

如果我在获取移动设备属性的代码或方法中出错，请帮助我。如果您需要更多详细信息，请告诉我。

问候， 亚什

嗨，这是堆栈跟踪：

```
Caused by: org.apache.sling.api.SlingException: An exception occurred processing JSP page /apps/companyname/components/content/mobilebreadcrum/mobilebreadcrum.jsp at line 5
at org.apache.sling.scripting.jsp.jasper.servlet.JspServletWrapper.handleJspExceptionInternal(JspServletWrapper.java:571)
at org.apache.sling.scripting.jsp.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:496)
at org.apache.sling.scripting.jsp.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:448)
at org.apache.sling.scripting.jsp.JspServletWrapperAdapter.service(JspServletWrapperAdapter.java:59)
at org.apache.sling.scripting.jsp.JspScriptEngineFactory.callJsp(JspScriptEngineFactory.java:173)
at org.apache.sling.scripting.jsp.JspScriptEngineFactory.access$100(JspScriptEngineFactory.java:84)
at org.apache.sling.scripting.jsp.JspScriptEngineFactory$JspScriptEngine.eval(JspScriptEngineFactory.java:388)
at org.apache.sling.scripting.core.impl.DefaultSlingScript.call(DefaultSlingScript.java:358)
... 147 more Caused by: javax.el.ELException: Error reading 'modelName' on type com.companyname.www.components.content.mobilebreadcrumb.MobileBreadCrum
at javax.el.BeanELResolver.getValue(BeanELResolver.java:66)
at javax.el.CompositeELResolver.getValue(CompositeELResolver.java:53)
at org.apache.el.parser.AstValue.getValue(AstValue.java:97)
at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:186)
at org.apache.sling.scripting.jsp.jasper.runtime.PageContextImpl.proprietaryEvaluate(PageContextImpl.java:923)
at org.apache.jsp.apps.companyname.components.content.mobilebreadcrum.mobilebreadcrum_jsp._jspService(mobilebreadcrum_jsp.java:160)
at org.apache.sling.scripting.jsp.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:802)
at org.apache.sling.scripting.jsp.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:419)
... 152 more Caused by: java.lang.NullPointerException
at com.companyname.www.components.content.mobilebreadcrumb.MobileBreadCrum.getModelName(MobileBreadCrum.java:35)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at javax.el.BeanELResolver.getValue(BeanELResolver.java:62)
... 160 more 
```

JSP代码是：

```
<%@include file="/apps/companyname/components/global.jsp"%><ct:component
className="com.companyname.www.components.content.mobilebreadcrumb.MobileBreadCrum"
name="mobilebreadcrum" />${mobilebreadcrum.modelName} 
```

Java代码是：

```
 public String getModelName() {
    SlingHttpServletRequest slingRequest = this.request.getSlingRequest();
    String resourceType = slingRequest.getResource().getResourceType();
    String resourceSuperType = slingRequest.getResource().getResourceSuperType();
    LOG.info("RESOURCE TYPE:"+resourceType);
    LOG.info("RESOURCE SUPER TYPE:"+resourceSuperType);
    Device device = request.getCurrentPage().adaptTo(Device.class);
    device.getAttributes();
    return modelName;
} 
```

如果您还想要别的东西，请告诉我

问候， 亚什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T09:37:32.520

为此，您应该使用真实设备，而不是模拟器。要检测设备 CQ 会查看请求中的用户代理数据，因此当您在桌面浏览器上打开页面时，您会发送带有非移动设备用户代理数据的请求。要测试此功能，您可以使用用户代理切换器（例如[用于 chrome](https://chrome.google.com/webstore/detail/user-agent-switcher-for-c/djflhoibgkdhkhhcedjiklpkjnoahfmg)），但在这种情况下，CQ 不会使用并绘制模拟器包装器，因为它会假设您使用移动设备。现在我想如何结合正确的用户代理和在桌面上绘制模拟器。将按结果发布。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T14:50:01.937

您能否转到 /system/console/adapters 并确保有适当的适配器 SlingHttpServletRequest → 设备？我会从那里开始诊断。在我的情况下，相应的行如下所示：

适配类：org.apache.sling.api.SlingHttpServletRequest

适配器类：com.day.cq.wcm.mobile.api.device.DeviceGroup、com.day.cq.wcm.mobile.api.device.DeviceGroupList、com.day.cq.wcm.mobile.api.device.Device

提供捆绑包：com.day.cq.wcm.cq-wcm-mobile-core (190)

谢谢，马克斯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-31T04:56:24.543

考虑上面的步骤，如果您能够解决此问题，您将如何处理请求？您将始终为来自发布 Aem 服务器的请求提供服务，还是要使用 Dispatcher 缓存？由于您的代码正在识别服务器端的设备，我怀疑您是否能够利用调度程序缓存。你能想到在 apache 级别识别设备并在请求中添加选择器吗？例如。如果请求来自 iphone5，则在 apache 上编写重写规则以检查用户代理标头并将选择器 [http://somesite.com/my/page/url.html](http://somesite.com/my/page/url.html)添加到[http://somesite.com/my/page /url.iphone.html](http://somesite.com/my/page/url.iphone.html)

如果请求来自 ipad，则添加其他选择器 [http://somesite.com/my/page/url.ipad.html](http://somesite.com/my/page/url.ipad.html)

Dispatcher 将为不同的选择器创建不同的缓存，并开始从缓存中提供页面。

在您的组件中，您可以为不同的选择器实现不同的视图。

只是一个想法，请重新考虑...

# ios - iOS非弧：当self.property = [[Obj alloc] init]时我应该使用自动释放吗？

> ID：14603218
> 
> 赞同：0
> 
> 时间：2013-01-30T11:44:33.167
> 
> 标签：ios, objective-c

如果我有以下属性：

```
@property (nonatomic, retain) MyObject *theObject; 
```

那么如果我想创建一个新的 MyObject，我是否：

```
self.theObject = [[MyObject alloc] init]; 
```

或者：

```
self.theObject = [[[MyObject alloc] init] autorelease]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T11:48:11.893

你必须使用自动释放。如果你不这样做，该对象将有两个释放计数（一个来自`alloc`，一个来自`retain`setter），因此当属性未设置时，它将被泄露。

这仅适用于强或保留和复制属性。分配和弱属性应该只分配一个分配初始化的对象，因为它们不会改变其引用计数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T11:48:44.520

如果你必须 - 第二个。

如果您使用的是生成的 setter，则已将其标记为`retain`. 这意味着存储在该属性中的值将为您保留，因此您无需将其传递给拥有的对象。

由于它被保留，您需要在您的 dealloc 中释放它。

# android - ANDROID：逐帧动画不起作用？

> ID：14603220
> 
> 赞同：1
> 
> 时间：2013-01-30T11:44:35.430
> 
> 标签：android, animation, frame

我正在尝试逐帧动画，但它给了我一个关闭的力，我不确定它为什么给我一个关闭的力。在我看来一切都很好。

这是我的代码，希望有人可以提供帮助？提前致谢。

动画测试.java

```
import android.app.Activity;
import android.graphics.drawable.AnimationDrawable;
import android.graphics.drawable.BitmapDrawable;
import android.os.Bundle;
import android.widget.ImageView;

public class AnimationTest extends Activity {

AnimationDrawable animation;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    AnimationDrawable animation = new AnimationDrawable();
    animation.addFrame(getResources().getDrawable(R.drawable.up), 500);
    animation.addFrame(getResources().getDrawable(R.drawable.down), 500);

    animation.setOneShot(false);

    ImageView imageAnim =  (ImageView) findViewById(R.id.imageView1);
    imageAnim.setBackgroundDrawable(animation);

    // start the animation!
    animation.start();
} 

} 
```

activity_main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent">

    <ImageView android:id="@+id/imageView1"
        android:src="@drawable/down"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"/>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T11:50:03.790

您正在 onCreate 方法中启动动画，这将不起作用，因为您的活动尚未显示，请改用延迟的可运行文件或 clickListener。

您可以使用以下代码测试动画：

```
// inside onCreate
   setContentView(R.layout.activity_main);

final AnimationDrawable animation = new AnimationDrawable();
animation.addFrame(getResources().getDrawable(R.drawable.up), 500);
animation.addFrame(getResources().getDrawable(R.drawable.down), 500);

animation.setOneShot(false);

ImageView imageAnim =  (ImageView) findViewById(R.id.imageView1);
imageAnim.setBackgroundDrawable(animation);
Handler handler = new Handler();
handler.postDelayed(new Runnable(){

public void run(){

animation.start();

}
}, 3000); 
```

请确保您的 ImageView 有大小，并且没有设置 src 以查看发生了什么，在您的布局 xml 文件中执行以下操作：

```
 android:layout_width="50dp"
    android:layout_height="50dp" 
```

并删除 src 属性（如果有）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T11:48:20.090

您不能从 onCreate 方法开始动画。还没有视图，也看不到活动。[阅读本文并稍微更改您的代码，它将起作用。](http://damianflannery.wordpress.com/2011/06/08/start-animation-in-oncreate-or-onresume-on-android/)但愿如此 ）

# android - Android Google Analytics v2 手动管理会话而不使用 EasyTracker

> ID：14603224
> 
> 赞同：1
> 
> 时间：2013-01-30T11:44:45.873
> 
> 标签：android, session, google-analytics, session-timeout, google-analytics-api

**我需要在特定时间开始和停止会话。**
在[官方文档](https://developers.google.com/analytics/devguides/collection/android/v2/sessions)中，我发现我只能开始一个新会话：

```
// Called after a user successfully signs in to your app.
private void onSignIn() {
  ... // The rest of your onSignIn() code.
  myTracker.setStartSession(true); // Where myTracker is an instance of Tracker.
  myTracker.sendEvent("app_flow", "sign_in", "", null); // First activity of new session.
} 
```

但我在 API 中没有方法来停止会话或更改会话超时。
我已经尝试设置`ga_sessionTimeout`为 1 天，但没有成功，
大约 8 分钟后会话关闭，即使活动仍在屏幕上。我在 Google Analytics（分析）仪表板的实时概览中看到了它。

其他想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T16:44:58.253

> 默认情况下，Google Analytics 会将在 **30 分钟**内收到的点击分组到同一会话中。

我的目标是在某些事件发生之前保持会话处于活动状态，
因此我决定实现 Heartbeat 机制。
这将每 X 分钟发送一次事件以保持会话处于活动状态。

它解决了我的问题。

PS：我发现了另一个具有相同解决方案的[线程。](https://stackoverflow.com/questions/9448007/does-google-analytics-have-a-heartbeat-function-for-long-running-web-applicati)

# javascript - Garlic.js 关于动态生成的字段

> ID：14603227
> 
> 赞同：4
> 
> 时间：2013-01-30T11:44:56.753
> 
> 标签：javascript, jquery, ruby-on-rails

如何让[garlic.js](http://garlicjs.org/)处理使用 Javascript 动态生成的字段，例如在[这个 Railscast](http://railscasts.com/episodes/196-nested-model-form-revised?view=asciicast)中或使用[Cocoon](https://github.com/nathanvda/cocoon)？我已经尝试在嵌套字段部分中明确包含 js 文件，但没有运气：

```
= javascript_include_tag 'garlic'
.nested-fields
  = f.inputs do
    = f.input :client_id #etc 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T11:37:25.693

一旦加载到 DOM 中，您是否尝试过为这些动态字段显式调用 Garlic？

```
$( '#yourloadeddiv' ).garlic(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T12:14:10.707

问题是每当您重新加载或重新启动浏览器时，`get`请求`edit/new`都会提供给服务器，因此相应视图文件中的静态字段会加载数据，而动态添加的字段将丢失。因此，数据将永远丢失。我不确定**garglic.js**是否会将数据添加到页面加载时不在 DOM 中的字段中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-24T07:02:25.863

我如何解决这个问题是使用 jquery 存储 api：[https](https://github.com/julien-maurel/jQuery-Storage-API) ://github.com/julien-maurel/jQuery-Storage-API除了调用大蒜来保存表单状态之外，还可以持久保存动态生成的表单的 HTML。

页面加载后，我检查本地存储中是否存在持久化表单。如果是，则将 html 加载到表单元素中，然后调用大蒜恢复表单状态！

# search-engine - “DHT 搜索引擎”是如何工作的？

> ID：14603232
> 
> 赞同：18
> 
> 时间：2013-01-30T11:45:16.027
> 
> 标签：search-engine, dht

我对名为 a的**Btdigg.org**`"DHT search engine"`感兴趣。根据[这篇文章](http://activepolitic.com:82/blog/2011-08-23b/BTDigg_a_DHT_Based_Search_Engine.html)，它不存储任何内容，甚至没有数据库。那么它是如何工作的呢？它不需要像其他普通搜索引擎一样收集元信息并将它们存储在数据库中吗？用户提交查询后，它会扫描 DHT 网络并“实时”返回结果？这可能吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-17T20:56:29.483

我对 BTDigg 没有具体的见解，但我认为没有数据库（或类似数据库的东西）的说法是错误的陈述。那篇文章的作者可能指的是您在传统的 torrent 站点中可能遇到的更具体的内容，例如实际的 .torrent 文件存储在该站点中。

这就是类似 BTDigg 的网站的工作方式：

1.  你运行了一堆 DHT 节点，特别是为了对 DHT 流量进行“窃听”，将其引入人们谈论的信息散列。
2.  加入这些群并使用 ut_metadata 扩展下载元数据（.torrent 文件）
3.  索引您在其中找到的信息，将其映射到 info-hash
4.  为该索引提供前端

如果你想稍微奢侈一点，你也可以定期刮取你知道的信息哈希，以随着时间的推移收集统计数据，也许还可以找出群体何时消亡，应该从索引中删除。

因此，您不存储 .torrent 文件或任何内容的说法是正确的。

实时搜索 DHT 是不现实的，因为 DHT 不是围绕关键字搜索组织的，您需要“在后台”不断地构建和维护索引。

**编辑：**

自此答案以来，已在一些 DHT 客户端中实施了优化（[BEP 51](http://bittorrent.org/beps/bep_0051.html)），可让您查询它们托管的信息散列，从而显着降低索引成本。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-08-12T17:58:09.100

要深入了解 DHT 及其应用，请参阅 Scott Wolchok 的论文和演示文稿“Crawling BitTorrent DHTs for Fun and Profit”。他将自主搜索引擎的想法作为他对 DHT 安全性研究的旁注提出：

他论文的PDF：

*   [https://www.usenix.org/legacy/event/woot10/tech/full_papers/Wolchok.pdf](https://www.usenix.org/legacy/event/woot10/tech/full_papers/Wolchok.pdf)

他在 DEFCON 18 上的演讲（第 1 部分和第 2 部分）

*   [http://www.youtube.com/watch?v=v4Q_F4XmNEc](http://www.youtube.com/watch?v=v4Q_F4XmNEc)
*   [http://www.youtube.com/watch?v=mO3DfLtKPGs](http://www.youtube.com/watch?v=mO3DfLtKPGs)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-06-09T22:58:18.853

[https://www.usenix.org/legacy/event/woot10/tech/full_papers/Wolchok.pdf](https://www.usenix.org/legacy/event/woot10/tech/full_papers/Wolchok.pdf)

第 3 节中使用的方法似乎表明需要一个数据库来存储所有 torrent 数据。虽然性能更好，但它可能不是真正的 DHT 搜索引擎。

第 8 节虽然效率较低，但似乎是一个 DHT 搜索引擎，只要关键字是存储值。

从第 3 节，引导 Bittorent 搜索：

> “该系统通过将每个 torrent 的文件名和描述的连接视为典型信息检索模型中的文档并使用倒排索引将关键字与 torrent 匹配来处理用户查询。这具有得到流行的开源关系良好支持的优势DBMS。我们根据种子的受欢迎程度对搜索结果进行排名，我们可以从 DHT 中列出的对等点数量推断出来"

来自第 8 节，相关工作：

> 使用 DHT 分布搜索的常用方法是使用倒排索引，通过将每个（关键字、匹配文档列表）对存储为 DHT 中的键值对。琼等人。[17]描述了这种方法并指出了它的性能问题：Zipf在文件之间的关键字分布导致负载平衡非常倾斜，文档信息为文档中的每个关键字复制一次，并且在分布式环境中难以对文档进行排名

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-05-04T15:16:01.967

它分为两个步骤。

1.  要实现 bep_0005 协议得到了 infohash，你不需要实现所有协议，只需要现在`find_node (request)`, `get_peers (response)`, `announce_peer (response)`. 这是我的一个开源[dhtspider](https://github.com/alanyang/dhtspider)。

2.  实现bep_0009协议得到metainfo索引吧，这里是我自己的一个**[bittorrent搜索引擎](http://engiy.com)**，每天可以得到唯一的infohash 300w+，有效metainfo 50w+。

# jquery - JQuery Datepicker 本地化德语

> ID：14603233
> 
> 赞同：14
> 
> 时间：2013-01-30T11:45:18.120
> 
> 标签：jquery, localization

首先，我想声明，我已经阅读了很多关于这个主题的主题，但没有一个能解决我的问题。

所以我需要一个德语`JQuery Datepicker`。所以我在 Datepicker 中设置了区域属性：

```
<script>
    $(function() {
        $("#datepicker").datepicker({
            numberOfMonths : 3,
            showButtonPanel : true,
            altField : "#datepicker_input",
            dateFormat : "dd-mm-yy"
        }, $.datepicker.regional['de']);
    });
</script> 
```

但这似乎不起作用。我也找了一个德国`JQuery UI`人，但没有找到任何东西。

你能给我一个起点吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-30T11:57:23.393

检查您是否包含了德语的本地化 js 文件

如果你不意味着包括这个

```
<script type="text/javascript"
        src="http://jquery-ui.googlecode.com/svn/tags/latest/ui/minified/i18n/jquery-ui-i18n.min.js">
</script> 
```

和代码应该是

```
 $(function() {
  $('#datepicker').datepicker({
       prevText: '&#x3c;zurück', prevStatus: '',
        prevJumpText: '&#x3c;&#x3c;', prevJumpStatus: '',
        nextText: 'Vor&#x3e;', nextStatus: '',
        nextJumpText: '&#x3e;&#x3e;', nextJumpStatus: '',
        currentText: 'heute', currentStatus: '',
        todayText: 'heute', todayStatus: '',
        clearText: '-', clearStatus: '',
        closeText: 'schließen', closeStatus: '',
        monthNames: ['Januar','Februar','März','April','Mai','Juni',
        'Juli','August','September','Oktober','November','Dezember'],
        monthNamesShort: ['Jan','Feb','Mär','Apr','Mai','Jun',
        'Jul','Aug','Sep','Okt','Nov','Dez'],
        dayNames: ['Sonntag','Montag','Dienstag','Mittwoch','Donnerstag','Freitag','Samstag'],
        dayNamesShort: ['So','Mo','Di','Mi','Do','Fr','Sa'],
        dayNamesMin: ['So','Mo','Di','Mi','Do','Fr','Sa'],
      showMonthAfterYear: false,
      showOn: 'both',
      buttonImage: 'media/img/calendar.png',
      buttonImageOnly: true,
      dateFormat:'d MM, y'
    } 
  );

}); 
```

[演示](http://jsfiddle.net/muthusamy/73SsQ/1/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-03-12T19:32:46.303

有必要在这里结合已经给出的答案，如下所示：

添加到标题：

```
<script type="text/javascript" src="http://jquery-ui.googlecode.com/svn/tags/latest/ui/minified/i18n/jquery-ui-i18n.min.js"></script> 
```

和你的代码：

```
$.datepicker.setDefaults($.datepicker.regional["de"]); 
```

就是这样！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-09T21:12:42.303

要从 muthu 的答案中隐藏中文字符，请在选项中添加：

```
 weekHeader: "W",
  yearSuffix: "" 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-11-27T08:23:57.957

好的，有点晚了，但也许有人需要它，试试这个：

```
$.datepicker.setDefaults($.datepicker.regional["de"]); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-30T22:40:45.673

原始代码

```
$("#datepicker").datepicker({
    numberOfMonths : 3,
    showButtonPanel : true,
    altField : "#datepicker_input",
    dateFormat : "dd-mm-yy"
}, $.datepicker.regional['de']); 
```

应固定为以下

```
$("#datepicker").datepicker($.extend({}, $.datepicker.regional["de"], {
    numberOfMonths : 3,
    showButtonPanel : true,
    altField : "#datepicker_input",
    dateFormat : "dd-mm-yy"
})); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-03-13T11:10:47.970

Eclose 中的“$.datepicker.setDefaults”调用：

```
jQuery(function ($) { initialization; }); 
```

最后结果：

```
jQuery(function ($) {
    $.datepicker.setDefaults($.datepicker.regional["de"]);
}); 
```

# ios - 创建一个简单的界面，如设置（ios）

> ID：14603234
> 
> 赞同：-4
> 
> 时间：2013-01-30T11:45:18.183
> 
> 标签：ios, interface, uistoryboard, uiswitch, uitableview

我正在尝试创建与屏幕截图中相同的界面：http: [//i.imgur.com/6OIcNb0.png](http://i.imgur.com/6OIcNb0.png) 这是我运行 uiswitch、导航栏和默认背景设置的第一个应用程序。如何用左侧的文本创建一个单元格并将其与 uiswitch 结合？我使用故事板。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:22:36.750

H2CO3 的评论完全正确。

好吧，我仍然为您找到了一些东西，希望对您有所帮助。

检查[链接1](https://github.com/futuretap/InAppSettingsKit)和[链接2](https://github.com/jakemarsh/JMStaticContentTableViewController)

# jquery - 包含动态图形的 Canvas HTML 5 缩放

> ID：14603238
> 
> 赞同：0
> 
> 时间：2013-01-30T11:45:29.937
> 
> 标签：jquery, html, html5-canvas

我浪费了 2 天的时间在谷歌上搜索我的问题，但没有得到任何线索。实际上，我有在画布上绘制圆形、正方形、鼠标向下和向上事件的工作代码（此绘图是在画布上动态绘制的）。现在我想随机放大包含此图形的画布。

当我尝试这个时，我才知道......在画布缩放后需要重新绘制图形。有没有办法以简单的方式做到这一点？

画布中是否有任何方法可以维护与绘制的图形相关的所有信息？

我可以在缩放后按相应的比例绘制这些数字吗？

请帮助我...任何有助于我进一步工作的线索或任何代码片段。谢谢你的任何帮助......

我有以下代码片段，其中包含一条在缩放时一次又一次调用的曲线。但是这个数字是静态的，所以每次坐标都是相同的。但在我的情况下，数字坐标随着数字的变化而变化。

```
function draw(scale, translatePos){
                var canvas = document.getElementById("myCanvas");
                var context = canvas.getContext("2d");

                // clear canvas
                context.clearRect(0, 0, canvas.width, canvas.height);

                context.save();
                context.translate(translatePos.x, translatePos.y);
                context.scale(scale, scale);
                context.beginPath(); // begin custom shape
                context.moveTo(-119, -20);

                context.bezierCurveTo(-159, 0, -159, 50, -59, 50);
                context.bezierCurveTo(-89, -95, -139, -80, -119, -20);

        context.closePath(); // complete custom shape
                context.fill();
                context.stroke();
                context.restore();
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T11:53:03.643

再有一个参数 Zoom in draw 函数并在您想要放大时再次调用 draw 函数。传递您想要放大多少的值，例如 2x 并根据例如 2x 乘以所有值，将所有值乘以 2。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T13:59:22.113

我不是很清楚你在问什么。我想这就是你要问的。

在使用画布的应用程序中，用户可以使用鼠标绘制正方形、圆形和线条等图形。用户在画布上绘制了一个正方形和一个圆形。用户应该能够重新调整正方形的大小，使其变大或变小，而无需更改圆的大小。用户应该能够将正方形重新设置为其原始大小。这是否可能仅使用 Canvas 对象的属性和方法？

这是你要问的吗？

如果不尝试描述您希望应用程序的用户能够做什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T14:02:09.940

画布只是像素，绘图方法只是设置这些像素的颜色。

如果您想*正确地*重新调整原始形状，您必须记住您绘制的形状，并在调整大小时从头开始重新绘制它们。

如果可以，请使用画布的转换矩阵支持为您处理缩放 - 这将避免您自己重新计算任何坐标。

# c# - c# 中组合框的 AutoCompleteMode 不可用

> ID：14603240
> 
> 赞同：0
> 
> 时间：2013-01-30T11:45:33.487
> 
> 标签：c#, wpf, autocomplete, combobox, intellisense

我希望我`ComboBox`的可搜索，因此我发现设置的`AutoCompleteMode`属性可以`ComboBox`做到这一点。但是当我尝试获取该属性时，`IntelliSense`并没有显示该属性。有人可以帮我得到这个吗？

```
<ComboBox
          Grid.Column="3"
          ItemsSource="{Binding Path=Students, Mode=OneWay}"
          SelectedValuePath="ID"
          Name="Combobox"
          DisplayMemberPath="Name"
          SelectedValue="{Binding Path=SelectedStudentId, Mode=TwoWay}"
          Visibility="{Binding Path=IssuesVisible,UpdateSourceTrigger=PropertyChanged}">
</ComboBox> 
```

在代码隐藏文件中，我尝试过，`Combobox.AutoCompleteMode`但在`IntelliSense`我开始输入时显示错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:19:05.643

查看`Combobox` [MSDN 文档](http://msdn.microsoft.com/en-us/library/system.windows.controls.combobox.aspx)，没有`AutoCompleteMode`. 试试[StaysOpenOnEdit](http://msdn.microsoft.com/en-us/library/system.windows.controls.combobox.staysopenonedit.aspx)和[IsEditable](http://msdn.microsoft.com/en-us/library/system.windows.controls.combobox.iseditable.aspx)

```
<ComboBox StaysOpenOnEdit="True" IsEditable = "True"  /> 
```

# cordova - 长度不适用于jquery mobile？

> ID：14603242
> 
> 赞同：0
> 
> 时间：2013-01-30T11:45:40.383
> 
> 标签：cordova, jquery-mobile

（我使用 Jquery mobile 和 Phonegap）。

我正在尝试将行插入数据库，但如果包含的内容不为空，我想插入。这是我下面的代码

```
for (var i = 0; i < id_textarea_commenter.length ; i++)
         {                
           var sql ="INSERT INTO Commenter (IdPrestation, IdTypeCommentaire, IdGroupe,  Commentaire,  rowguid)" +
                    "VALUES (?,?,?,?,?)";

           Commentaire        =$('textarea#'+id_textarea_commenter[i]+'').val();
           IdTypeCommentaire  =id_textarea_commenter[i];

           if(  (Commentaire!= " ") || (Commentaire!= "") || (Commentaire.length!= 0) ) 
               {
                  console.log(Commentaire   +"--------"+ IdTypeCommentaire );
               params = [IdPrestation,IdTypeCommentaire, IdGroupe, Commentaire, rowguid];
               tx_commenter.executeSql(sql, params);
               console.log("I= "+i);
               }

          } 
```

我正在尝试将行插入数据库，但如果包含的内容不为空，我想插入。这是我下面的代码

即使插入字段也是空的问题！

我应该如何解决这个问题并提前谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T04:11:04.767

我想你想使用 && 而不是 ||

```
if(  (Commentaire!= " ") && (Commentaire!= "") && (Commentaire.length!= 0) ) 
```

根据您的页面，您可能还需要`Commentaire != undefined`检查

# r - X11无法显示任何图像

> ID：14603243
> 
> 赞同：2
> 
> 时间：2013-01-30T11:45:45.393
> 
> 标签：r, x11, cairo

最近，当我想通过 显示任何图像时`X11`，我只看到一个白色的大窗口，没有别的。例如：

```
 #Running X11() or not doesn't matter
 #X11()
 #plot anything
 plot(1:10) 
```

然后，我只得到一个白色的窗口，就像我纯粹运行一样`X11()`。当我使用其他设备（`pdf()`, `png()`）时，我可以在`dev.off()`.

问题解决了。这是开罗的问题。添加`grDevices::X11.options(type="ncairo")`到`~/.Rprofile`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T13:40:37.960

拥有一个空白窗口是调用`X11()`. 通常，您不需要调用该函数，但这意味着您可以在创建绘图之前指定绘图窗口的高度/宽度。

如果您尝试绘制某些内容后仍然有一个空白窗口，那么您可能正在写入不同的设备。

您是否打开过另一台设备（可能使用`png`等）并忘记关闭它？

返回什么`dev.cur()`？

一个可重现的例子：

```
png("foo.png")
x11()
dev.set(dev.list()[names(dev.list()) == "png:foo.png"])
plot(1:10)

#Make sure you call this afterwards
graphics.off() 
```

# java - 如何将意图传递给另一个意图

> ID：14603246
> 
> 赞同：-1
> 
> 时间：2013-01-30T11:46:02.357
> 
> 标签：java, android

嘿伙计们，我正在尝试创建一个测验，但我的意图有问题，在用户单击按钮后，它会自动意图进行另一个活动.. 我该怎么做？

请帮助大家...提前谢谢..

这是代码：

```
if(btn1.isClickable())
    {
        img1.setVisibility(View.VISIBLE);
        img1.setImageResource(R.drawable.check);

        img2.setVisibility(View.INVISIBLE);
        img2.setImageResource(R.drawable.wrong);

        img3.setVisibility(View.INVISIBLE);
        img3.setImageResource(R.drawable.wrong);

        btn1.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                Scorecount++;
                Intent i = getIntent();
                startActivity(i);
                Scorecount = i.getIntExtra("score",0);

            }
        });

    }
    else if (btn2.isClickable())
    {
        img2.setVisibility(View.VISIBLE);
        img2.setImageResource(R.drawable.wrong);

        img1.setVisibility(View.INVISIBLE);
        img1.setImageResource(R.drawable.wrong);

        img3.setVisibility(View.INVISIBLE);
        img3.setImageResource(R.drawable.wrong);
    }
    else if (btn3.isClickable())
    {
        img3.setVisibility(View.VISIBLE);
        img3.setImageResource(R.drawable.wrong);

        img2.setVisibility(View.INVISIBLE);
        img2.setImageResource(R.drawable.wrong);

        img1.setVisibility(View.INVISIBLE);
        img1.setImageResource(R.drawable.wrong);
    }
    btn1.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

            Intent i = getIntent();
            startActivity(i);
            Scorecount = i.getIntExtra("score",0);

        }
    });
    btn2.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            Intent i = getIntent();
            startActivity(i);

        }
    });
    btn3.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            Intent i = getIntent();
            startActivity(i);
        }
    });
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T11:51:08.033

第一项活动

```
Intent i= new Intent(CurrentActivity.this,
                    NextActivity.class);

            i.putExtra("quiz", array[0]);
            i.putExtra("pass_value","Pass value");
            startActivity(i); 
```

第二次活动

```
String getvalue= getIntent().getSerializableExtra("pass_value").toString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T11:56:47.367

我不确定我是否完全理解你想要什么，但你可以将一个意图添加到另一个意图，因为意图实现 parceable。你可以这样做：

```
intent.putExtra("INTENT_KEY", someOtherIntent); 
```

接着：

```
intent = getIntent();
Intent someOtherIntent = (Intent)intent.getParcelableExtra("INTENT_KEY"); 
```

它有帮助吗？

PS你的代码很奇怪......（我的意思有时是错误的和毫无意义的）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T12:00:29.987

为了传递参数，您创建新意图并放置参数映射：

```
Intent myIntent = new Intent(this, NewActivityClassName.class);
myIntent.putExtra("firstKeyName","FirstKeyValue");
myIntent.putExtra("secondKeyName","SecondKeyValue");
startActivity(myIntent); 
```

为了获取参数值，您必须`get[type]Extra()`以相同的意图调用：

```
Intent myIntent= getIntent(); // gets the previously created intent
String firstKeyName = intent.getStringExtra("firstKeyName"); // will return "FirstKeyValue"
String firstKeyName = intent.getStringExtra("firstKeyName"); // will return "SecondKeyValue" 
```

如果您的参数是整数，您将使用`getIntExtra()`等。现在您可以像往常一样使用您的参数。

# c# - 如何将 WPF 弹出窗口锚定到控件？

> ID：14603253
> 
> 赞同：1
> 
> 时间：2013-01-30T11:46:24.933
> 
> 标签：c#, wpf, popup, wpf-positioning

我决定使用模板化弹出窗口来显示我的控件的验证错误，而不是工具提示（似乎在样式方面提供了更大的灵活性）。**我正在寻找一种干净的方法来确保弹出窗口被锚定到它们所指的控件上，因此当窗口移动时，它们会随之移动**......

我的一个想法是遍历可视化树并手动将所有 PopUps IsOpen 属性设置为 false ......这似乎有点“黑客”。它不太理想，因为它可能会在其他事情中闪烁......话虽如此，我到目前为止在stackoverflow上看到的很多解决方案似乎也有它们的缺陷。想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T11:55:28.067

```
// Reference to the PlacementTarget.
DependencyObject myPopupPlacementTarget;

// Reference to the popup.
Popup myPopup; 

Window w = Window.GetWindow(myPopupPlacementTarget);
if (null != w)
 {
w.LocationChanged += delegate(object sender, EventArgs args)
{
    var offset = myPopup.HorizontalOffset;
    myPopup.HorizontalOffset = offset + 1;
    myPopup.HorizontalOffset = offset;
    };

} 
```

从这个[链接](https://stackoverflow.com/q/1600218/1064610)

# javascript - 将值从 javascript 传递到 ASP.NET 中的代码

> ID：14603256
> 
> 赞同：6
> 
> 时间：2013-01-30T11:46:37.940
> 
> 标签：javascript, asp.net, jqgrid-asp.net

`aspx.cs`当我单击 Datagrid 特定行时，我有一个变量；
然后从 javascript 中，我应该获取该值并传递给 aspx.cs 变量。

这个怎么做？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-30T14:10:35.267

## 使用 html 控件

首先，您将隐藏的输入控件用作：

```
<input type="hidden" value="" id="SendA" name="SendA" /> 
```

其次，您向该控件添加您希望使用 javascript 在代码后面发送的值，如下所示：

```
document.getElementById("SendA").value = "1"; 
```

然后在回发时，您将获得该值：

```
Request.Form["SendA"] 
```

## 使用 asp.net 控件

如果你使用 asp.net 控件，同样的方法可以是：

```
<asp:HiddenField runat="server" ID="SendA" Value="" />
<script>
   document.getElementById("<%=SendA.ClientID%>").value = "1";
</script> 
```

并在后面的代码中使用`SendA.Value;`

当然，您可以使用 ajax 调用来发送值背后的代码，或者使用不返回任何内容的 url 参数的简单调用 url。

# java - SAML 2.0 - 如何验证发件人证书？

> ID：14603262
> 
> 赞同：2
> 
> 时间：2013-01-30T11:47:07.027
> 
> 标签：java, saml, saml-2.0, opensaml

我用 Java 实现了一个 SAML SP。
我向 SAML 2.0 IDP 发送 AuthnRequest 并获得加密响应。
我的问题是：
如何确保响应确实来自 IDP 而不是来自黑客？
验证签名是不够的，因为这只告诉我发送者有一对匹配的私钥/公钥，但它可以是任何人。
因此，我需要 IDP 提前向我提供我上传到 jks 文件的证书，并将其每次与我从响应的 ds:X509Certificate 元素中提取的证书进行比较。
现在，是否有一种标准方法可以将发件人的证书与存储在我的密钥库中的证书进行比较？
我看到了以下代码：

```
 KeyStore keyStore = getKS();
 PKIXParameters params = new PKIXParameters(keyStore);
 params.setRevocationEnabled(false);
 CertPath certPath = certificateFactory.generateCertPath(Arrays.asList(certFromResponse));
 CertPathValidator certPathValidator = CertPathValidator.getInstance(CertPathValidator.getDefaultType());
 CertPathValidatorResult result = certPathValidator.validate(certPath, params); 
```

够了吗？如果验证没有抛出异常，它会验证发件人的身份吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T12:59:01.997

这就是我用 OpenSAML 解决签名验证的方法

[https://blog.samlsecurity.com/2012/11/verifying-signatures-with-opensaml.html](http://blog.samlsecurity.com/2012/11/verifying-signatures-with-opensaml.html)

我还写了一本书，[A Guide to OpenSAML](https://blog.samlsecurity.com/a-guide-to-opensamlv3.html)，其中我详细解释了使用 OpenSAML 的加密和签名等。

OpenSAML 验证方法的重要之处在于它们仅验证签名的加密有效性（即内容未更改）。但是，它不会验证发件人是否是您信任的人。

签名验证器使用发送者的公钥实例化，以验证发送者的公钥。这通常交换是使用[SAML 元数据建立身份联合](http://www.oasis-open.org/committees/download.php/35391/sstc-saml-metadata-errata-2.0-wd-04-diff.pdf)

# .net - 虚拟机和无虚拟机 - 堆栈和跟踪

> ID：14603264
> 
> 赞同：2
> 
> 时间：2013-01-30T11:47:10.473
> 
> 标签：.net, vb.net, heap-memory, stack-memory

我在这里阅读了很多问题，这些问题解释了堆栈和堆是什么，例如这个：堆栈和堆是[什么以及在哪里？](https://stackoverflow.com/questions/79923/what-and-where-are-the-stack-and-heap)，这非常有帮助。

我知道高级语言被编译成中间语言，例如 Java 的字节码和 .NET 程序的 MSIL。然后将 MSIL 和字节码编译成机器码。

我的理解是中间语言使用堆栈和堆，然后程序被编译成机器代码，这取决于平台，例如基于 Windows 的寄存器。

但是，在我已经链接到一些回答者的问题中，例如 Brian R. Bondy 提供了 C 和 C++ 示例。我知道C++没有虚拟机，直接编译成机器码。我的问题是：没有虚拟机的编程语言有堆栈和堆吗？在这些编程语言的情况下，它们是否使用堆栈和堆作为中间表示，同时直接编译为机器代码？

更新我意识到有基于堆栈和基于寄存器的虚拟机。我要问的问题是：所有物理机器都基于寄存器吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:51:20.117

我发现有一些物理机器的例子，其中处理器具有基于堆栈的指令集，例如 RTX2000 系列、UCSD Pascal p-Machine 和 Burroughs 的 B5000 和 B6000 系列机器（取自这个问题：[Stack-based机器依赖于基于寄存器的机器？](https://stackoverflow.com/questions/5101908/stack-based-machine-depends-on-a-register-based-machine)）。看来处理器使用的实际指令集可以是基于堆栈的。

# c - 在打包/解包结构之间切换

> ID：14603272
> 
> 赞同：1
> 
> 时间：2013-01-30T11:48:16.217
> 
> 标签：c, c99, structure, packed

我在 EEPROM (4KB) 中有很多配置数据，我以打包结构读取这些数据。在我的固件中，我需要非常频繁地读取/更改这些值，并且打包结构的性能不是最佳的，所以我有第二个完全相同的结构，只是没有打包。我必须将每个值从打包结构一个一个地复制到未打包的结构中，这很容易出错，因为当我向打包结构添加一个值时，我还必须记住将它添加到复制函数中。

有没有更聪明的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T12:00:45.930

这是使用预编译器执行此操作的过度智能方法：

### mydata-fields.h

```
FIELD(int, one)
FIELD(char, two)
FIELD(long, three) 
```

### 我的数据.h

```
#define FIELD(t, n) t n;
struct MyData
{
#include "mydata-fields.h"
};
struct __attribute__((packed)) MyDataPacked /*or whatever your compiler needs */
{
#include "mydata-fields.h"
};
#undef FIELD

#define FIELD(t, n) a->n = b->n;
static inline void Unpack(MyData *a, MyDataPacked *b)
{
#include "mydata-fields.h"
}
static inline void Pack(MyDataPacked *a, MyData *b)
{
#include "mydata-fields.h"
}
#undef FIELD 
```

**更新**：有一点想象力，你甚至可以编写一个通用的 packed.h 来*接收*结构和字段文件的名称作为参数：

### packed.h 的提取物

```
/* ... */
struct UNPACKED
{
#include FIELDS_H
};
/* and so on... */ 
```

然后简单地在真实文件中：

### 我的数据.h

```
#define UNPACKED MyData
#define PACKED MyDataPacked
#define FIELDS_H "mydata-fields.h"
#include "packed.h"
#undef FIELDS_H
#undef PACKED
#undef UNPACKED 
```

如果你有很多打包/解包的结构并且想要避免一些输入，这将很有用。

一个不那么邪恶的解决方案是编写一个脚本（在 Python 中！），从某个输入文本文件中的字段规范生成代码。

# android - 在模拟器 2.3.3 上未发现 android 反向地理编码服务异常

> ID：14603279
> 
> 赞同：1
> 
> 时间：2013-01-30T11:48:27.720
> 
> 标签：android

我目前正在使用 android 模拟器 2.3.3 。我想从坐标中获取位置。但我得到了这个“服务不可用”的例外。这是我的代码：

```
 @Override
    public boolean onTouchEvent(MotionEvent e, MapView mapView) {
        if (e.getAction() == 1) {
            GeoPoint point = mapView.getProjection().fromPixels(
                    (int) e.getX(), (int) e.getY());
            Geocoder coder = new Geocoder(GoogleMaps.this, Locale.ENGLISH);
            try {
                List<Address> addresses = coder.getFromLocation(
                        point.getLatitudeE6() / 1E6,
                        point.getLongitudeE6() / 1E6, 1);
                String address = "";
                Address a = addresses.get(0);
                Toast.makeText(GoogleMaps.this, a.getCountryName(), 300).show();
            } catch (IOException e1) {
                Toast.makeText(GoogleMaps.this, e1.getMessage(), Toast.LENGTH_LONG).show();
            }

        }

        return false; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:01:52.993

前段时间我也遇到过同样的问题，我发现Android 2.3.3的模拟器确实存在这样的问题。我可以找到比使用具有不同 Android 版本的另一个模拟器更好的解决方案。

# java - 在 Vaadin 日历中禁用特定时间段

> ID：14603280
> 
> 赞同：0
> 
> 时间：2013-01-30T11:48:27.977
> 
> 标签：java, vaadin

我正在 Java Vaadin 框架中开发一个应用程序，我正在使用它的 Calander 插件。现在我想禁用该日历中的特定时间段。例如，我希望用户不能选择从下午 4 点到下午 6 点的时间段，所以下午 4 点到 6 点的时间段应该在日历上显示为禁用。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T20:34:23.393

我不认为直接禁用是可能的，因此您可能应该使用一种解决方法。您可以创建一个“禁用”事件并使用 CSS 类名称来设置与保留时间不同的样式。此外，您可能应该实现在 CalendarComponentEvents 中定义的 EventResizeHandler、EventMoveHandler 和 DateClickHandler 以取消与保留时间槽重叠的所有事件。

# javascript - 为什么将元素推入空对象会在 Firefox 中挂起？

> ID：14603282
> 
> 赞同：0
> 
> 时间：2013-01-30T11:48:35.227
> 
> 标签：javascript, jquery, arrays, firefox, loops

我有以下代码：

```
var select_ids = [];
// syntax.filter.select_list is ["elem1", "elem2"]
for (var o = 0; o < syntax.filter.select_list.length; o += 1) {
    element = syntax.filter.select_list[o];
    if (priv.getPositionInArray(element,select_ids) === null ) {
      // this line hangs up the browser
      select_ids.unshift(element);
    }
} 
```

我不明白为什么在循环两次迭代时将 push() 或 unshift() 放入一个空数组会使浏览器挂起 3-4 秒。

如果我离开这条线：

```
select_ids.unshift(element); 
```

脚本立即运行，所以

**问题：**
为什么 push/unshift 到一个空数组会产生这样的延迟？仅供参考，这是在另一个循环中进行 3 次迭代。对于每个父循环，我将 select_ids 重置为要填充的空对象。

谢谢！

**编辑：**
我正在做 if 子句以确保我不会将双精度数添加到数组中。

**编辑：（完整代码）**

```
priv.findBestIndexForQuery = function (indices, syntax) {
    var i, j, k, l, m, n, p, o, element,
      search_ids = [], select_ids = [], use_index = [],
      index, query_param, search_param,
      // need to parse into object
      current_query = jIO.ComplexQueries.parse(syntax.query);

    // loop indices
    for (i = 0; i < priv.indices.length; i += 1) {
      index = {};
      index.reference = priv.indices[i];
      index.reference_size = index.reference.fields.length;

      // rebuild for iteration
      if (current_query.query_list === undefined) {
        search_ids.push(current_query.id);
      } else {
        for (j = 0; j < current_query.query_list.length; j += 1) {
            if (priv.getPositionInArray(current_query.query_list[j].id, 
                search_ids) === null ) {
                search_ids.push(current_query.query_list[j].id);
            }
        }
      }
      for (o = 0; o < syntax.filter.select_list.length; o += 1) {
         element = syntax.filter.select_list[o];
         if (priv.getPositionInArray(element,select_ids) === null ) {
              // line causing problems
              select_ids.unshift(element);
         }
      }
// there is a lot more, but I'm hanging on the line above
} 
```

**编辑（getPostionInArray）**

```
 priv.getPositionInArray = function (element, array) {
     var i;
     for (i = 0; i < array.length; i += 1) {
        if (array[i] === element) {
           return i;
        }
     }
     return null;
  }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:07:08.977

根据 OP 的要求，问题确实是`unshift`：过去曾出现过此功能的错误（其上下文是临时的），并且[此错误报告](https://bugzilla.mozilla.org/show_bug.cgi?id=685204)仍标记为*NEW*。

至于你的`getPositionInArray`功能，为什么不使用标准`indexOf`方法？大多数浏览器都支持它，对于那些不支持的浏览器，您可以随时将其添加到您的脚本中：

```
if (!Array.prototype.indexOf)
{
    Array.prototype.indexOf = function(search)
    {
        var i;
        for (i = 0; i < this.length; i++)
        {
            if (this[i] === search)
            {//I use type & value check...
                return i;
            }
        }
        return -1;//-1 is the standard behaviour
    };
} 
```

或者，如果您希望此方法返回`null`, 而不是`-1`在所有浏览器中：

```
Array.prototype.indexOf = (function (nativeFunc)
{
    return function(search)
    {
        var retVal = nativeFunc.apply(this,[search]);//use native method
        return (retVal === -1 ? null : retVal);//return null if the native method returned -1
    };
}(Array.prototype.indexOf));//pass initial method to IIFE 
```

只是一个旁注，一些原型的乐趣:)

# javascript - ExtJS setStyle 瞬间改变，然后返回到以前的样式

> ID：14603290
> 
> 赞同：0
> 
> 时间：2013-01-30T11:48:50.967
> 
> 标签：javascript, extjs, extjs4

我有一个 ID 为“alerts”的 dataview 组件，其中包含一组带有“alert”类的 div。

当我使用以下内容时：

```
Ext.getCmp("alerts").getEl().down('.alert').setStyle({background: 'yellow'}); 
```

数据视图中第一个警报的背景会在一瞬间发生变化，然后返回到之前的样式。

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T11:55:15.307

意识到我做错了什么......我在设置样式之前调用了商店的加载。由于是异步的，当样式改变时这并不完整。它很快就完成了并重新设置了样式。

# c# - ASP.NET MVC4 Web API 接口作为数据契约

> ID：14603292
> 
> 赞同：2
> 
> 时间：2013-01-30T11:48:54.047
> 
> 标签：c#, .net, asp.net-mvc, asp.net-mvc-4, asp.net-web-api

我有一个适用于具体数据类型的 MVC4 Web API 服务。但是当我将接口指定为合同并尝试从操作中返回具体类型时，它会引发错误

```
public interface IData
{
  string NameText {get;set;}
}

[KnownType(typeof(IData))]
public class Data : IData 
{
  string NameText {get;set;}
} 
```

> “ObjectContent`1”类型无法序列化内容类型“application/xml”的响应正文；字符集=utf-8'。
> 
> 考虑使用 DataContractResolver 或将任何静态未知的类型添加到已知类型列表中 - 例如，通过使用 KnownTypeAttribute 属性或将它们添加到传递给 DataContractSerializer 的已知类型列表中。

我尝试在指定接口类型的具体类型上添加 KnownType 合同，但它不起作用。

是否可以在 MVC Web API 中将接口指定为服务的 DataContracts？这曾经在 WCF 中工作

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T11:56:09.003

`[KnownType]`用于指定具体类，而不是接口。如果您指定哪些类使用 实现 IData `[KnownType]`，那么至少 MVC 知道它必须序列化/反序列化哪些类型：

```
[KnownType(typeof(MyDataThingy1))]
public class MyDataThingy1 : IData
{ ... }

[KnownType(typeof(MyDataThingy2))]
public class MyDataThingy2 : IData
{ ... } 
```

这应该可以解决问题！

# php - 散列或使用 SSL 将用户名和密码发送到外部站点

> ID：14603293
> 
> 赞同：1
> 
> 时间：2013-01-30T11:49:05.293
> 
> 标签：php, security, ssl, https, passwords

我现在在一个网站上工作，我已经对登录框进行了编码以登录到另一个页面（例如 www.domain.com 上的登录框以登录到 subdomain.domain.com）

子域使用 HTTPS，而目前域没有。

我的问题是，我应该对密码进行哈希处理并将其发送到子域以避免使用纯文本，还是应该在使用 POST 请求时要求域也使用 HTTPS？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T11:54:06.760

散列密码客户端并不能阻止攻击者嗅探“你发送到服务器的东西”并复制它。不要那样做。

使用 SSL 加密客户端和服务器之间的通信。做这个。

在不使用 SSL 的情况下向用户提供表单会使其容易受到中间人攻击（例如，可以添加 JavaScript，在输入密码时和在安全提交表单之前窃取密码）。不要那样做。

当人们想要登录时，请先将他们重定向到安全站点*，然后再*要求他们输入凭据。

# c# - Playing sounds: accessing length and position

> ID：14603295
> 
> 赞同：0
> 
> 时间：2013-01-30T11:49:12.013
> 
> 标签：c#, winforms, audio, soundplayer

I'm using the `System.Media.SoundPlayer` for playing sounds in C# desktop application passing the sound location.

Everything works fine. But how can I access the total file length (in milliseconds) and the player position?

Theses properties are accessible?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T14:07:52.467

The System.Media.SoundPlayer class is not suitable for providing this information.

[http://msdn.microsoft.com/en-us/library/system.media.soundplayer.aspx](http://msdn.microsoft.com/en-us/library/system.media.soundplayer.aspx)

> The SoundPlayer class provides a simple interface for loading and playing a .wav file. The SoundPlayer class supports loading a .wav file from a file path, a URL, a Stream that contains a .wav file, or an embedded resource that contains a .wav file.

You may want to look at some other libraries for audio playback, suggested here: [C# Audio Library](https://stackoverflow.com/questions/466458/c-sharp-audio-library)

# php - 正则表达式替换 '.' 在行首

> ID：14603303
> 
> 赞同：0
> 
> 时间：2013-01-30T11:49:56.963
> 
> 标签：php, regex

我正在尝试用点（。）“123”替换行号。使用正则表达式。例如这条线是，

```
123\. <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"> 
```

在这里，我想摆脱“123”。这是在行的开头。目前，我拥有替换行中任何位置的任何数字和点（。）的代码，但我只想在行首删除数字和点（。）。这是我的代码，

```
<?php
$pattern = '/[0-9\. |0-9.](?:\d{0})/';
$replacement = ' ';
$try= preg_replace($pattern, $replacement, $line);
echo "\r\n" . html_entity_decode($try);
?> 
```

如果有人能指出我正确的方向，我将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T12:18:36.070

为什么你的模式不起作用？你有两个问题：

```
[0-9\. |0-9.] 
```

括号是一个字符类。他们的意思是“匹配任何字符之一”。因此，您的正则表达式的这一部分所做的是匹配单个字符，即数字、点、空格或 |。

您似乎正在尝试创建一个匹配组。在这种情况下，您将需要括号而不是方括号。这样的事情会做你想要完成的事情：

```
([0-9]+\.|[0-9]+\. ) 
```

这将匹配一些数字，后跟一个点，并且可能后跟一个空格。但是，您可以让它变得更简单：

```
[0-9]+\. ? 
```

使`?`您可以消除长表达式，因为它表示“可能模式包含空格”。

不过，您可以走得更远：

```
\d+\.\s* 
```

`\d`匹配任何数字，并`\s`匹配任何空格。 `*`意味着您将匹配任意数量的空格，而不是单个空格。

最后，您的模式中也有这个：

```
(?:\d{0}) 
```

我不确定您要做什么，但这表示“匹配包含恰好零位的组”。这没有多大意义，也没有必要。

您的最终模式可以简单地是这样的：

```
'/^\d+\.\s*/' 
```

最后一个添加是`^`在开始时。这可确保您仅匹配位于行首的数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T11:52:31.037

试试这个模式：

```
$pattern = '/^\d+\.\s?/'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T12:02:27.290

试试这个代码..

```
$line = '123\. <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">';
$pattern = '/^[0-9]+\./';
$replacement = "";
$try= preg_replace($pattern, $replacement, $line);
echo "\r\n" . html_entity_decode($try); 
```

**结果**
`<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">`

[**键盘**](http://codepad.org/yWs7CBSt)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T11:52:49.747

这里不需要任何正则表达式，[`ltrim`](http://php.net/manual/en/function.ltrim.php)可以：

```
$line = ltrim($line, "0123456789\. "); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T11:53:10.873

一行开头的数字后跟一个句点将是：

```
^[0-9]+\. 
```

请注意转义句点，使其匹配句点而不是任何字符。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-30T11:53:32.560

你为什么不使用[爆炸](http://php.net/manual/en/function.explode.php)？

如果您知道您的行以数字开头：

```
$initial_string = '123\. <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">';
$desired_string = explode('.', $initial_string, 2)[1];
print $desired_string; 
```

**编辑：**如果您不确定一行是否以数字开头：

```
$initial_string = '<html xmlns="http://wwww3org/1999/xhtml" xml:lang="en" lang="en">';
$initial_arr = explode('.', $initial_string, 2);

if (count($initial_arr)>0 && ctype_digit($initial_arr[0])){
    $desired_string = $initial_arr[1];
}else{
    $desired_string = $initial_string;
}
print $desired_string; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-30T11:53:53.333

您需要使用反斜杠 (\) 转义点 (.)，否则点匹配任何字符。所以使用“\”。匹配一个点和“。” 匹配任何字符。

# websphere - 需要多次部署 Websphere 7 应用程序才能在 SunOS 上运行

> ID：14603307
> 
> 赞同：0
> 
> 时间：2013-01-30T11:50:14.640
> 
> 标签：websphere, websphere-7, sunos

我的工作有一个ear 文件，在WAS7 / SunOS 上安装ear 文件时，它会成功安装，当尝试访问应用程序时，我得到一个空白页，在重新安装应用程序2-3 次后应用程序工作。

在 WAS7 / AIX 上测试了相同的 ear 文件，它工作得很好。

WAS 版本是 7.0.0.15

# .net - 为什么 SSIS 在将数据从 Excel 传输到 CSV 时将最后一行保存为 NULL？

> ID：14603312
> 
> 赞同：1
> 
> 时间：2013-01-30T11:50:41.357
> 
> 标签：.net, excel, csv, ssis

### 电子表格：

输入文件包含如下所示的数据。

```
Column
------
123456
234567
ADCDEF 
```

### CSV/文本：

输出文件包含如下所示的数据

```
Column
------
123456
234567
NULL 
```

为什么SSIS包在传输数据时在最后一行写入**NULL**值而不是**ABCDEF**？`Excel``CSV`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T14:02:38.010

问题是 Excel 文件包含数值和字符串的混合数据，这导致 Excel 读取前几行并将列的数据类型推断为数值，在这种情况下不正确。当您创建一个*Excel 数据源*来读取此 Excel 文件时，您会注意到该列被定义为数字并以这种方式处理它。因此，字符串永远不会进入输出文件。

您需要修改 Excel 连接管理器的 ConnectionString 属性以包含**`IMEX=1`**以指示数据源可能包含不同数据类型的值。

`IMEX`代表在**`intermixed`**这里阅读更多信息：[**Excel的连接字符串**](http://www.connectionstrings.com/excel)

这里有一个例子来说明差异。

我根据问题中提供的数据创建了两个相同的 Excel 文件。

![Excel_1](../Images/26416679cc230f9cf66ced1706ae6fd4.png)

![Excel_2](../Images/0c2a4ab7b5a763a07b1fb324af1c2093.png)

使用以下连接管理器创建了一个 SSIS 包。

**Excel_1**具有以下连接字符串

```
Provider=Microsoft.Jet.OLEDB.4.0;Data Source=C:\temp\ExcelFile_1.xls;Extended Properties="Excel 8.0;HDR=YES"; 
```

**Excel_2**具有以下连接字符串。不同之处在于额外的 IMEX=1;。您需要手动将此添加到 Excel 连接管理器的 ConnectionString 属性。要查看属性，请单击*Excel 连接管理器*并按**F4**。

```
Provider=Microsoft.Jet.OLEDB.4.0;Data Source=C:\temp\ExcelFile_2.xls;Extended Properties="EXCEL 8.0;IMEX=1;HDR=YES"; 
```

![连接](../Images/200ff9c99302cd31353841868a21586f.png)

设计了如下所示的数据流传输`Excel_1.xls`到`FlatFile_1.csv`和`Excel_2.xls`到`FlatFile_2.csv`

![包裹](../Images/af01ab41274327a1217945c91e0b723f.png)

您可以在输出中看到第一个平面文件的第三行没有任何值，但第二个文件有。原因是第一个 Excel 连接管理器推断列类型为数值，这是不正确的。但是，第二个文件处理了

![平面文件_1](../Images/549d455c80acf81b95cca0637db80486.png)

![平面文件_2](../Images/1adf62305bc0c3131fc1afcfc3481343.png)

您可以右键单击*Excel 数据源*，然后单击`Show Advanced Editor...`

![Excel 数据源](../Images/202b7d3838934d59e5c1b003d18710ae.png)

在高级编辑器上，单击`Input and Output Properties`，展开 Excel 源输出，然后展开`External Columns`。单击`Column`。

您会注意到第一个 Excel 数据源上的列的数据类型在第**`double-precision float [DT_R8]`**一个 Excel 连接管理器上设置为`Excel_1`

![Excel_1 高级](../Images/2e36f5c104944b97a0cf9f0b349efd00.png)

您会注意到第二个 Excel 数据源上的列的数据类型**`Unicode string [DT_WSTR]`**在第一个 Excel 连接管理器上设置为`Excel_2`

![Excel_2 高级](../Images/a297879e815a8bca20d2f42d0abe44a8.png)

希望有帮助。

# ruby - ruby 类实例变量不是线程安全的？

> ID：14603313
> 
> 赞同：0
> 
> 时间：2013-01-30T11:50:44.800
> 
> 标签：ruby

我只是想知道类实例变量是否是线程安全的。最近，我遇到了一个由自定义 ORM 模型引起的数据库锁定问题。（反正没有活动记录或续集模型，只是我自己创建的 ORM 的简单版本）。

为了简单起见，我只是在这里包装了一个简单的版本：

我使用一个简单的类实例变量来保存一个数据库实例（可能是一个 Sequel::Database 对象）。

```
class TestORM
  class << self
    attr_accessor :db 
    def self.db=( db )
      @db = db
    end 
  end 
end 
```

我为它创建了一个测试脚本来验证这个数据库是否是线程安全的。

```
require 'test_orm.rb'
t1 = Thread.new do  
  db = 'db string 1'
  p "Thread 1: before assign, thread = #{Thread.current.object_id}, TestORM.db.object_id = #{TestORM.db.object_id}"
  TestORM.db = db
  p "Thread 1: after assign, thread = #{Thread.current.object_id}, TestORM.db.object_id = #{TestORM.db.object_id}"
  sleep( 0.5 )
  p "Thread 1: TestORM.db.object_id =  #{TestORM.db.object_id}"
end 
t2 = Thread.new do  
  db = 'db string 2'      
  p "Thread 2: before assign, thread = #{Thread.current.object_id}, TestORM.db.object_id = #{TestORM.db.object_id}"
  TestORM.db = db
  p "Thread 2: after assign, thread = #{Thread.current.object_id}, TestORM.db.object_id = #{TestORM.db.object_id}"
  sleep( 0.5 )
  p "Thread 2: TestORM.db.object_id =  #{TestORM.db.object_id}"
end

t1.join
t2.join 
```

运行上面的代码产生以下结果：

```
"Thread 1: before assign, thread = 70332471940100, TestORM.db.object_id = 4"
"Thread 2: before assign, thread = 70332471939980, TestORM.db.object_id = 4"
"Thread 1: after assign, thread = 70332471940100, TestORM.db.object_id = 70332471939840"
"Thread 2: after assign, thread = 70332471939980, TestORM.db.object_id = 70332471939520"
"Thread 1: TestORM.db.object_id =  70332471939520"
"Thread 2: TestORM.db.object_id =  70332471939520" 
```

从上面的结果来看，似乎类实例变量不是线程安全的，因为线程 2 覆盖了线程 1 的 TestORM.db 实例。

关于这种包装的任何提示或任何解决方案？

红宝石版本：红宝石1.9.2p320

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T12:05:51.537

`TestORM`是线程之间共享的常量。也就是说，您正在更改同一个对象。

如果您使用的是实例，则可以使用不同的实例，每个线程一个。既然你创建了那个 ORM，我建议你为不同的数据库使用实例；所以你的代码看起来像这样：

```
require 'test_orm.rb'
t1 = Thread.new do  
  db = 'db string 1'
  orm = TestORM.new   
  p "Thread 1: before assign, thread = #{Thread.current.object_id}, orm.db.object_id = #{orm.db.object_id}"
  orm.db = db
  p "Thread 1: after assign, thread = #{Thread.current.object_id}, orm.db.object_id = #{orm.db.object_id}"
  sleep( 0.5 )
  p "Thread 1: orm.db.object_id =  #{orm.db.object_id}"
end 
t2 = Thread.new do  
  db = 'db string 2'
  orm = TestORM.new   
  p "Thread 2: before assign, thread = #{Thread.current.object_id}, orm.db.object_id = #{orm.db.object_id}"
  orm.db = db
  p "Thread 2: after assign, thread = #{Thread.current.object_id}, orm.db.object_id = #{orm.db.object_id}"
  sleep( 0.5 )
  p "Thread 2: orm.db.object_id =  #{orm.db.object_id}"
end 
```

您可能希望在以下位置定义您的数据库`initialize`：

```
orm = TestORM.new(db) 
```

# mysql - 用于自定义元键 => 值查询的 MySQL 数据库设计

> ID：14603316
> 
> 赞同：1
> 
> 时间：2013-01-30T11:50:52.693
> 
> 标签：mysql, database-design, metadata, key-value

我正在为我的网站制作产品数据库。我目前有：

产品表：产品 ID、产品名称、价格

Product_meta 表：Pmeta_id、产品 ID、metaKey、metaValue

我基本上想要它，所以我可以通过指定元键来查询产品，然后给它放一个 key=>value 对，或者通过键获取值。

我相信 Wordpress 有类似的方法，但不太确定如何制作函数来获取数据。我认为它将涉及表连接？？？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T11:56:14.273

```
SELECT * FROM Product_meta AS M
LEFT OUTER JOIN Products AS P ON ( P.Product_ID = M.Product_ID )
WHERE M.metaKey = ... 
```

或者如果 Products 表领先，则将其翻转：

```
SELECT * FROM Products AS P
LEFT OUTER JOIN Product_meta AS M ON ( P.Product_ID = M.Product_ID )
WHERE M.metaKey = ... 
```

您也可以更改`LEFT OUTER JOIN`为`INNER JOIN`只显示 Products 表和 Product_meta 表中的记录

如果您想在子句中有多个值，请`WHERE`使用以下查询：

```
... WHERE M.metaKey IN (..,..,..) 
```

确保您的数据以逗号分隔

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T12:01:32.573

它会影响`JOIN`，但更重要的是，您需要*旋转*所有行，以便将这些元键作为列而不是行。就像是：

```
SELECT 
  p.productid, 
  p.productname, 
  p.price,
  MAX(CASE WHEN m.metaname = 'Type' THEN pm.metavalue END) AS 'Type',
  MAX(CASE WHEN m.metaname = 'Size' THEN pm.metavalue END) AS 'Size',
  MAX(CASE WHEN m.metaname = 'Quantity' THEN pm.metavalue END) AS 'Quantity'
FROM products p 
INNER JOIN product_meta pm ON p.productID = pm.productid
INNER JOIN metakeys m ON pm.metakey = m.metakey
GROUP BY p.productid, 
         p.productname, 
         p.price; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/19cdf/5)

* * *

您也可以为您拥有的所有键动态地执行此操作，而不是手动编写它们：

```
SET @sql = NULL;

SELECT
  GROUP_CONCAT(DISTINCT CONCAT('MAX(IF(m.metaName = ''',
      m.metaName, ''', pm.metavalue, NULL)) AS ',
      m.metaName )
  ) INTO @sql
FROM products p 
INNER JOIN product_meta pm ON p.productID = pm.productid
INNER JOIN metakeys m ON pm.metakey = m.metakey
;

SET @sql = CONCAT('SELECT p.productid, p.productname,',
                  'p.price, ', @sql,
                  ' FROM products p  ',
                  ' INNER JOIN product_meta pm ON p.productID = pm.productid ',
                  ' INNER JOIN metakeys m ON pm.metakey = m.metakey ',
                  ' GROUP BY p.productid, p.productname, p.price; ');
PREPARE stmt 
FROM @sql; 

EXECUTE stmt; 
```

## [更新的 SQL Fiddle 演示](http://www.sqlfiddle.com/#!2/19cdf/11)

# ios - 在呈现之前添加视图控制器视图

> ID：14603318
> 
> 赞同：1
> 
> 时间：2013-01-30T11:50:58.670
> 
> 标签：ios, modalviewcontroller

下面是我的代码..

```
TestTemp1ViewController *temp=[[TestTemp1ViewController alloc]init]; 
[self.view addSubview:temp.view];
[self presentModalViewController:temp animated:FALSE]; 
```

此代码在 iOS 5.0 中运行良好，但在 iOS 6.0 中崩溃。

```
Crash report: [UIViewController loadViewIfRequired]-- bad excess 
```

我不明白为什么这在 iOS 6.0 中不起作用。伙计们，是的，我知道这不是好方法，但我想做的是呈现具有增长和收缩动画的视图控制器。如果我在演示后这样做，那么我将获得视图控制器的白色背景。

下面是我的代码...

```
-(void)animateGrowAndShrink:(ViewController *)controller1 {
    //self.view.userInteractionEnabled=NO;
    [self.view addSubview:controller1.view];
    [self presentModalViewController:self.controller animated:FALSE];
    if (dayTimeLineIsShown) {
        //shrink dayTimeLineIsShown=FALSE;
        [UIView beginAnimations:@"animationShrink" context:NULL];
        [UIView setAnimationDuration:.61f];
        controller1.view.transform=CGAffineTransformMakeScale(.01f,.01f);
    } else {
        //expand dayTimeLineIsShown=TRUE;
        controller1.view.transform=CGAffineTransformMakeScale(0.01,0.01);
        [UIView beginAnimations:@"animationExpand" context:NULL];
        [UIView setAnimationDuration:.60f];
        timeLine.view.transform=CGAffineTransformMakeScale(1, 1);
    }
    [UIView setAnimationDelegate:self];
    [UIView setAnimationDidStopSelector:@selector(animationDidStop:finished:context:)];     
    [UIView commitAnimations];
}

-(void)animationDidStop:(NSString *)animationID finished:(BOOL)finished context:(void *)context{
    self.view.userInteractionEnabled=YES;
   if ([animationID isEqualToString:@"animationExpand"]) {
        [self presentModalViewController:self.controller1 animated:FALSE];
    } else {
        self.controller.view.hidden=true;
    }
}. 
```

此外，如果我删除它，我正在执行此操作的控制器也会以模态方式呈现，那么它可以在 ios 6 中使用。实现缩放和缩小的任何其他想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T12:20:34.453

`-presentModalViewController`并且`-addSubview`完全不同的是它们不应该一起使用。请参阅：[何时应该使用视图控制器的 addSubview 方法？](https://stackoverflow.com/questions/2178883/when-should-i-use-the-addsubview-method-of-a-view-controller)

我认为删除第二行**或**第三行将消除错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T14:50:18.167

我设置的演示风格错误..应该是这样的..

self.modalPresentationStyle = UIModalPresentationCurrentContext;

它应该在当前上下文中。所以，现在呈现的视图控制器视图将在透明背景上绘制，而不是在白色背景上，所以在缩小它的视图时，它后面不会有白色背景。

# java - 从 ZipInputStream 获取 ZipEntry 的 getInputStream（不使用 ZipFile 类）

> ID：14603319
> 
> 赞同：32
> 
> 时间：2013-01-30T11:50:59.197
> 
> 标签：java, inputstream, zipfile, zipinputstream

我如何在不使用课程的情况下从 a中获得`InputStream`a ？`ZipEntry``ZipInputStream``ZipFile`

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-30T11:58:51.047

呃，`ZipInputStream`已经是`InputStream.`你不需要另一个了。获取下一个`ZipEntry`将流定位在条目的开头。请参阅 Javadoc。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-01-30T12:06:45.393

它是这样工作的

```
static InputStream getInputStream(File zip, String entry) throws IOException {
    ZipInputStream zin = new ZipInputStream(new FileInputStream(zip));
    for (ZipEntry e; (e = zin.getNextEntry()) != null;) {
        if (e.getName().equals(entry)) {
            return zin;
        }
    }
    throw new EOFException("Cannot find " + entry);
}

public static void main(String[] args) throws Exception {
    InputStream in = getInputStream(new File("f:/1.zip"), "launch4j/LICENSE.txt");
    Scanner sc = new Scanner(in);
    while(sc.hasNextLine()) {
        System.out.println(sc.nextLine());
    }
    in.close();
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-03-16T13:11:49.357

要返回以后可以使用的输入流列表，我使用了以下内容

```
public static List<InputStream> listResourcesInJar(URL jar) throws IOException{
    ZipInputStream zipInputStream = new ZipInputStream(jar.openStream());
    ZipEntry zipEntry = null;

    List<InputStream> inputStreams = new ArrayList<>();

    while ((zipEntry = zipInputStream.getNextEntry()) != null) {
        String entryName = zipEntry.getName();
        if (entryName.endsWith(".xsd")) {
            inputStreams.add(convertToInputStream(zipInputStream));
        }
    }
    return inputStreams;
}

private static InputStream convertToInputStream(final ZipInputStream inputStreamIn) throws IOException {
    ByteArrayOutputStream out = new ByteArrayOutputStream();
    IOUtils.copy(inputStreamIn, out);
    return new ByteArrayInputStream(out.toByteArray());
} 
```

# java - Maven Central 是否有正确的 mybatis-3.1.1 工件？

> ID：14603326
> 
> 赞同：0
> 
> 时间：2013-01-30T11:51:17.067
> 
> 标签：java, mybatis

我在 pom.xml 中配置了 mybatis 依赖，如下：

```
<dependency>
<groupId>org.mybatis</groupId>
<artifactId>mybatis</artifactId>
<version>3.1.1</version>
</dependency> 
```

根据 MyBatis 文档[http://www.mybatis.org/core/statement-builders.html](http://www.mybatis.org/core/statement-builders.html)我尝试使用 org.apache.ibatis.jdbc.SQL 类而不是使用 SelectBuilder/SqlBuilder 类来构建动态 SQL 查询。

但是从 Maven Central 下载的 mybatis-3.1.1.jar 根本没有 org.apache.ibatis.jdbc.SQL.java 类。然后我从 mybatis 网站下载了 mybatis-3.1.1-bundle.zip，并且该包中的 mybatis-3.1.1.jar 也没有 SQL.java。

我可以在他们的源代码库中找到那个 SQL.java 类：[http ://code.google.com/p/mybatis/source/browse/trunk/src/main/java/org/apache/ibatis/jdbc/?r= 5407](http://code.google.com/p/mybatis/source/browse/trunk/src/main/java/org/apache/ibatis/jdbc/?r=5407)

org.apache.ibatis.jdbc.SQL.java 类是 mybatis-3.1.1.jar 的一部分还是将成为下一个版本的一部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T13:42:02.473

您正在搜索的课程似乎[已于](http://code.google.com/p/mybatis/source/detail?r=5407&path=/trunk/src/main/java/org/apache/ibatis/jdbc/SQL.java)2012 年 9 月 7 日添加；而 myBatis-3.1.1 于 2012 年 4 月 15 日发布。

# c# - LINQ - 将字符串列表与冒号分隔的字段进行比较

> ID：14603327
> 
> 赞同：0
> 
> 时间：2013-01-30T11:51:17.470
> 
> 标签：c#, linq

是否可以执行 LINQ where 子句并将 : 上的 varchar 字段拆分为一个集合并将其与另一个集合进行比较以查看是否有任何值匹配。

例如，我们有一个`List<string>`名为 AllowedHolders，其中包含 ARR ACC 等。但是数据库中的字段（**不幸的是我们无法更改**）是一个 varchar，但具有用冒号分隔的值：即“：ARR：ACC：”

我们想做的是编写一个 LINQ where 子句，它可以检查字段中是否出现任何 AllowedHolders。因为我们希望将结果限制为仅带回字段包含 AllowedHolders 集合中的值的记录。

我们在字段仅包含单个值的情况下完成了以下操作

```
searchResults = searchResults.Where(S => searchParams.AllowedBusinessAreas.Contains(S.SIT_BusinessArea)); 
```

但以下内容将不起作用，因为 SIT_HolderNames 包含由冒号分隔的值：

```
searchResults = searchResults.Where(S => searchParams.AllowedHolders.Contains(S.SIT_HolderName) 
```

任何想法将不胜感激。如果您需要我进一步解释，请告诉我。

安迪

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T11:53:03.313

使用和。`Intersect()`_`Any()``String.Split()`

```
searchResults = searchResults.Where(s => searchParams.AllowedHolders.Intersect(S.SIT_HolderName.Split(':')).Any()); 
```

例如：

```
":ACC:TEST::ARR:".Split(':') -> string[] { "", "ACC", "TEST", "", "ARR", "" }; 
```

您可以注意到空字符串，如果您不想考虑使用 String.Split(char[], StringSplitOptions.RemoveEmptyEntries)：

```
":ACC:TEST::ARR:".Split(new char[] {':'}, StringSplitOptions.RemoveEmptyEntries) -> string[] { "ACC", "TEST", "ARR" }; 
```

### 更新

`String.Split()`在调用using之前，您必须获取数据`ToList()`。

```
searchResults = searchResults.ToList().Where(s => searchParams.AllowedHolders.Intersect(S.SIT_HolderName.Split(':')).Any()); 
```

如果里面的数据`searchResults`太大，你可以做的是只获取一个主键和`SIT_HolderName`.

```
var keys = searchResults.Select(s => new { Key = s.SIT_PKey, SIT_HolderName = s.SIT_HolderName })
                        .ToList()
                        .Where(s => searchParams.AllowedHolders.Intersect(s.SIT_HolderName.Split(':')).Any())
                        .Select(s => s.Key)
                        .ToList();

searchResult = searchResults.Where(s => keys.Contains(s.SIT_PKey)); 
```

我不知道上述查询的表现是什么。否则，您可以尝试使用`Join()`：

```
searchResult = searchResults.Join(keys, s => s.SIT_PKey, key => key, (s, key) => s); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T12:15:45.657

也许你可以使用：

```
searchResults = searchResults.Where(S => searchParams.AllowedHolders
  .Any(H => S.SIT_HolderName.Contains(H))
  ); 
```

或者

```
searchResults = searchResults.Where(S => searchParams.AllowedHolders
  .Any(S.SIT_HolderName.Contains)
  ); 
```

正如第一条评论所指出的，这*仅*在没有持有人姓名包含另一个持有人姓名作为子字符串的情况下才有效。我隐含地假设您的所有持有人姓名都是三字母字符串，例如`ARR`and `ACC`。如果不是这种情况，请考虑使用`(":" + H + ":")`，或找到更安全的解决方案。

**编辑：**为了完整起见，这里有两个带有冒号的版本：

```
// OK if some name is contained in another name as a substring
// Requires colon before the first and after the last name
searchResults = searchResults.Where(S => searchParams.AllowedHolders
  .Any(H => S.SIT_HolderName.Contains(":" + H + ":"))
  ); 
```

和：

```
// OK if some name is contained in another name as a substring
// Ugly checks included to handle cases where no colons are present in the extreme ends
searchResults = searchResults.Where(S => searchParams.AllowedHolders
  .Any(H => S.SIT_HolderName.Contains(":" + H + ":") || S.SIT_HolderName.StartsWith(H + ":") || S.SIT_HolderName.EndsWith(":" + H) || S.SIT_HolderName == H)
  ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T11:57:16.643

如果在 DB 列的值中，分隔符确实采用以下格式：

```
:AAA:BBB:CCC:DDD: 
```

而不仅仅是（请注意第一个和最后一个字符！）

```
AAA:BBB:CCC:DDD 
```

那么您可以执行`LIKE`查找：

```
select .... from ... where column LIKE '%:BBB:%' 
```

转化为 LINQ：

```
var idWithColons = ":" + "BBB" + ":";

from ... where .... column.Contains(idWithColons) 
```

对于许多可能的 IDS，您必须生成：

```
select .... from ... where column LIKE '%:BBB:%' OR column LIKE '%:DDD:%' OR .. 
```

转化为 LINQ：

```
var idWithColons = ":" + "BBB" + ":";
var idWithColons2 = ":" + "DDD" + ":";

from ... where .... column.Contains(idWithColons) or column.Contains(idWithColons2) 
```

但这仅适用于少数替代品。对于未知的 ID 列表，您可以尝试将其重写为动态构建的过滤器，但如果您不熟悉这并不容易`Expression<Func<>>`.. 无论如何，通过 LIKE 搜索无论如何都不是一个好主意.. 但这不是很多其他选择：/

否则，好吧，那很不漂亮..您可能会在 sql 服务器上准备一个标量值函数并以某种方式在您的 linq 提供程序中注册它，但我认为这不值得..

编辑：

解释动态构建 where 子句，即。在这里[http://www.albahari.com/nutshell/predicatebuilder.aspx](http://www.albahari.com/nutshell/predicatebuilder.aspx) - 寻找 PredicateBuilder。构建器实际上是通用的，可以直接使用，但您仍然必须自己编写连接 OR-LIKE 的小循环。我认为这篇文章写得很好，如果您发现任何问题，请给我留言。除了表演。LIKE %% 并不快。

# java - 对于有关构建搜索引擎的学术项目，什么是好的基于 Java 的爬虫？

> ID：14603330
> 
> 赞同：2
> 
> 时间：2013-01-30T11:51:29.990
> 
> 标签：java, multithreading, web-crawler, nutch, heritrix

好的，所以我最近两天一直在寻找适合我需要的爬虫。我想建立一个搜索引擎，我想自己做索引。这将是一个学术项目的一部分。虽然我没有爬取整个网络的处理能力，但我想使用一个实际上能够做到这一点的爬虫。所以我正在寻找的是一个爬虫：

1.  支持多线程
2.  不错过很多链接
3.  让我有机会（重写一个方法，以便我可以）访问爬取的页面的内容，以便我可以保存它、解析它等。
4.  服从 robots.txt 文件
5.  抓取 html 页面（还有 php、jsp 等）。
6.  识别具有相同内容的页面并且只返回一个。

它不需要（必须）做的是：

1.  支持页面排名。
2.  指数结果。
3.  抓取图像/音频/视频/pdf等。

我发现了一些非常接近我需要的库/项目，但据我所知，它们并不支持我需要的一切：

1.  首先我遇到了[crawler4j](http://code.google.com/p/crawler4j/)。这个唯一的问题是它不支持每个主机的礼貌间隔。因此，通过将礼貌级别设置为 1000 毫秒的合适值，会使爬虫变得非常缓慢。
2.  我还找到[了 flaxcrawler](http://code.google.com/p/flaxcrawler/)。这确实支持多线程，但在网页中查找和跟踪链接似乎存在问题。

我还研究了更完整和更复杂的“爬虫”，例如 Heritrix 和 Nutch。虽然我不太擅长处理更复杂的东西，但如果我确定它能够完成我需要它做的事情，我肯定愿意使用它：抓取网络并给我所有页面以便我可以阅读他们。

长话短说：我正在寻找一个爬虫，它可以非常快速地浏览网络上的所有页面，并让我有机会对它们做一些事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T18:06:35.023

AFAIK，Apache Nutch 适合您的大部分要求。Nutch 也有一个插件架构，如果你需要，它可以帮助你自己编写。您可以浏览 wiki [0] 并在邮件列表中询问您是否有任何问题

[0] [http://wiki.apache.org/nutch/FrontPage](http://wiki.apache.org/nutch/FrontPage)

# c# - 为什么我会从 ImportPfxDataAsync 获得 UnauthorisedAccessException？

> ID：14603331
> 
> 赞同：2
> 
> 时间：2013-01-30T11:51:34.803
> 
> 标签：c#, windows-runtime, certificate

我正在尝试将 X.509 证书导入我的 WinRT 应用程序。该证书是通过从 Windows 中的证书管理器中以 PXCS #12 格式导出证书及其私钥来生成的。

我正在使用[`FileOpenPicker`](http://msdn.microsoft.com/library/windows/apps/BR207847)来选择文件。为了便于测试，我将证书的密码硬编码到我的方法中：

```
private async void LoadCertificateAsync()
{
    var picker = new FileOpenPicker();

    picker.SuggestedStartLocation = PickerLocationId.Desktop;
    picker.FileTypeFilter.Add(".pfx");
    picker.ViewMode = PickerViewMode.List;

    var file = await picker.PickSingleFileAsync();
    var buffer = await FileIO.ReadBufferAsync(file);

    string certificateData = CryptographicBuffer.EncodeToBase64String(buffer);

    string password = "47679005-c8b8-47b5-b54c-277b12854973";

    await CertificateEnrollmentManager.ImportPfxDataAsync(
            certificateData,
            password,
            ExportOption.NotExportable,
            KeyProtectionLevel.NoConsent,
            InstallOptions.None,
            "Client Certificate");
} 
```

代码运行到调用[`ImportPfxDataAsync`](http://msdn.microsoft.com/en-gb/library/windows/apps/windows.security.cryptography.certificates.certificateenrollmentmanager.importpfxdataasync)，此时我收到`UnauthorisedAccessException`如下：

> mscorlib.dll 中出现“System.UnauthorizedAccessException”类型的未处理异常
> 
> WinRT 信息：_InstallResponse
> 
> 附加信息：访问被拒绝。（来自 HRESULT 的异常：0x80070005 (E_ACCESSDENIED)）

我要上传的证书在我的 SkyDrive [here](https://skydrive.live.com/redir?resid=36238DD7C12215C3!170&authkey=!ABFR4Pm-TmsF8UM "客户证书")上。

我找不到任何文档来解释为什么我可能会收到此错误，并且没有建议我需要做什么来解决它，无论是导出的证书、应用程序的配置还是环境中的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-03T15:20:49.353

我的代码中有同样的错误。我的解决方案是检查*Package.appxmanifest*中的**共享用户证书**和**企业身份验证功能**

# java - 比较列表中的元素，如果某些属性相同则删除

> ID：14603334
> 
> 赞同：1
> 
> 时间：2013-01-30T11:51:46.137
> 
> 标签：java, collections, traversal

我有一个对象数组列表，其中包含例如：

*   姓名
*   地址
*   电话
*   许多其他属性...

如果某些属性与数组列表中的其他对象具有相同的值，我希望删除此列表中的某些对象。我需要遍历整个列表并查看名称、地址和电话是否已存在于此列表中。我不能做一个简单的：

```
for (...)
if (!newlist.contains(element)) { newlist.add(element); } 
```

因为我只需要在添加`element`到新列表之前检查特定属性是否相同。

谁能指导我正确的方向？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T11:55:01.873

将 Set 与自定义 Comparator 一起使用怎么样？让您的对象类实现 Comparable。在 compare 方法中，您可以编写测试以完全匹配您需要的对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T12:28:12.227

创建一个 Key Class，让我们用下面的代码说**Employee.java 。**

```
package com.innovation;

public class Employee {
private String name;
private String address;
private String phone;

public Employee() {
    super();
}

public Employee(String name, String address, String phone) {
    super();
    this.name = name;
    this.address = address;
    this.phone = phone;
}

public String getName() {
    return name;
}

public void setName(String name) {
    this.name = name;
}

public String getAddress() {
    return address;
}

public void setAddress(String address) {
    this.address = address;
}

public String getPhone() {
    return phone;
}

public void setPhone(String phone) {
    this.phone = phone;
}

@Override
public int hashCode() {
    final int prime = 31;
    int result = 1;
    result = prime * result + ((address == null) ? 0 : address.hashCode());
    result = prime * result + ((name == null) ? 0 : name.hashCode());
    result = prime * result + ((phone == null) ? 0 : phone.hashCode());
    return result;
}

@Override
public boolean equals(Object obj) {
    if (this == obj)
        return true;
    if (obj == null)
        return false;
    if (getClass() != obj.getClass())
        return false;
    Employee other = (Employee) obj;
    if (address == null) {
        if (other.address != null)
            return false;
    } else if (!address.equals(other.address))
        return false;
    if (name == null) {
        if (other.name != null)
            return false;
    } else if (!name.equals(other.name))
        return false;
    if (phone == null) {
        if (other.phone != null)
            return false;
    } else if (!phone.equals(other.phone))
        return false;
    return true;
}

@Override
public String toString() {
    return "Employee [name=" + name + ", address=" + address + ", phone="
            + phone + "]";
}

} 
```

现在创建一个要应用逻辑的客户端类，让我们假设一个包含主方法的类，比如**Client.java**

```
package com.innovation;

import java.util.ArrayList;
import java.util.HashSet;
import java.util.List;
import java.util.Set;

public class Client {

    public static void main(String[] args) {

        Set<Employee> empSet = new HashSet<Employee>(populateList());

        for (Employee employee : empSet)
        {
            System.out.println(employee);
        }

    }   

    public static List<Employee> populateList()
    {
        List<Employee> lsts = new ArrayList<Employee>();

        lsts.add(new Employee("rais","gurgaon","123456"));
        lsts.add(new Employee("alam","Delhi","123685"));
        lsts.add(new Employee("shyam","Mumbai","1257456"));
        lsts.add(new Employee("ramesh","Ahmadabad","196356"));
        lsts.add(new Employee("rais","gurgaon","123456"));
        lsts.add(new Employee("rais","gurgaon","123456"));
        lsts.add(new Employee("rais","gurgaon","123456"));

        return lsts;

    }

} 
```

你会看到下面的输出。可以清楚地看到列表中存在的重复条目在集合中被删除。这一切都是很好地实现equals和hashcode方法的魔力。

```
Employee [name=rais, address=gurgaon, phone=123456]
Employee [name=ramesh, address=Ahmadabad, phone=196356]
Employee [name=alam, address=Delhi, phone=123685]
Employee [name=shyam, address=Mumbai, phone=1257456] 
```

# datetime - 如何在 Gridview 中插入日期和时间

> ID：14603338
> 
> 赞同：0
> 
> 时间：2013-01-30T11:52:18.460
> 
> 标签：datetime, gridview, time, record

再次，新问题。请参考下图。

![在此处输入图像描述](../Images/aeee5bdc2f2fb689ae51493b4fea0d41.png)

这是输出（见下图）： ![在此处输入图像描述](../Images/ff7af1b6c020a8d9ebd340fc68f432f7.png)

这是我在 results.aspx 中的 Gridview 的代码

```
<asp:GridView runat="server" id="GridView1" AutoGenerateColumns="False" DataSourceID="AccessDataSource1" DataKeyNames="ID" BorderStyle="Ridge" BackColor="White" BorderColor="Black" BorderWidth="3px" CellPadding="3" Width="1000px" AllowPaging="True" PageSize="2">
            <RowStyle BackColor="White" ForeColor="#003399" HorizontalAlign="Center" VerticalAlign="Middle" />
            <Columns>
                <asp:boundfield DataField="Time In" HeaderText="Time In" SortExpression="Time In">
                    <ItemStyle Width="100px" />
                </asp:boundfield>
                <asp:boundfield DataField="Username" HeaderText="Bar Code No." SortExpression="Username">
                </asp:boundfield>
                <asp:boundfield DataField="FirstName" HeaderText="First Name" SortExpression="FirstName">
                </asp:boundfield>
                <asp:boundfield DataField="LastName" HeaderText="Last Name" SortExpression="LastName">
                </asp:boundfield>
                <asp:boundfield DataField="MiddleName" HeaderText="Middle Name" SortExpression="MiddleName">
                </asp:boundfield>
                <asp:boundfield DataField="ContactNumber" HeaderText="Contact No." SortExpression="ContactNumber">
                </asp:boundfield>
                <asp:boundfield DataField="PlateNumber" HeaderText="Plate No." SortExpression="PlateNumber">
                </asp:boundfield>
                <asp:boundfield DataField="Color" HeaderText="Color" SortExpression="Color">
                </asp:boundfield>
                <asp:boundfield DataField="Brand" HeaderText="Brand" SortExpression="Brand">
                </asp:boundfield>
                <asp:boundfield DataField="LiscensedNumber" HeaderText="Liscensed No." SortExpression="LiscensedNumber">
                </asp:boundfield>
                <asp:templatefield>
                    <HeaderTemplate>
                        Image
                    </HeaderTemplate>
                    <ItemTemplate>
                        <img src="data:image/jpg;base64,<%# Eval("Image") != System.DBNull.Value ? Convert.ToBase64String((byte[])Eval("Image")) : string.Empty %>" alt="image" height="85" width="85" />
                    </ItemTemplate>
                </asp:templatefield>
            </Columns>
            <FooterStyle BackColor="#CCCCCC" ForeColor="Black" />
            <PagerStyle HorizontalAlign="Center" BackColor="#999999" ForeColor="#003399" />
            <EmptyDataTemplate>
                No data found!
            </EmptyDataTemplate>
            <SelectedRowStyle BackColor="#008A8C" Font-Bold="True" ForeColor="White" />
            <HeaderStyle BackColor="#A0A0A0" Font-Bold="True" ForeColor="#003399" HorizontalAlign="Center" />
            <AlternatingRowStyle BackColor="#DCDCDC" />
        </asp:GridView> 
```

请帮忙。我不知道有关“日期和时间”的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T11:58:49.080

```
<asp:boundfield datafield="Your_Date_Column" dataformatstring="{0:MMMM d, yyyy}" htmlencode="false" /> 
```

还要确保数据字段名称中没有空格

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T11:57:02.683

尝试删除数据字段中的空格，如 Rahul R 所言。在标题文本中无关紧要，但在数据字段中却可以。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T14:13:12.700

抱歉在这里问，我解决了。

我转换了模板字段中的列，然后添加了这段代码

```
Text='<%# DateTime.Now.ToString("dddd<br /> MMMM dd,  yyyy<br /> hh:mm tt") %> 
```

：） 感谢大家。

# c# - 墓碑化后是否重新创建了 Application.Resources？

> ID：14603339
> 
> 赞同：1
> 
> 时间：2013-01-30T11:52:26.020
> 
> 标签：c#, windows-phone-8, lifecycle

我有一个关于在墓碑发生时如何管理中提到的资源的`Application.Resources`问题`App.xaml.cs`。它们是通过构造函数重新创建的吗？还是它们被序列化和反序列化？还是它们被保存在某个地方`PhoneApplicationService.Current.State`？

我很担心，因为我通过一个包装器对象在那里存储了一个 Ninject 内核。内核在该对象的构造函数中构造并完全绑定。该内核保留对我的视图模型的引用。我想在墓碑之前缓存视图模型，最好是完整的（它们是可序列化的）。我不确定 Ninject 的内核是否可序列化，但这是另一个问题。

因此，如果我的内核的包装器将被重构和重新绑定，它将破坏缓存视图模型实例的目的。这就是为什么我需要知道。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T04:04:51.010

您将通过构造函数获得一个新实例。通过将项目属性设置为在停用时强制墓碑化，在模拟器中设置和测试它相当简单。

![在此处输入图像描述](../Images/dc3b84f2db54b72be52711f5efd94ffc.png)

# android - 如何在android中以离线模式查看webview缓存？

> ID：14603341
> 
> 赞同：1
> 
> 时间：2013-01-30T11:52:31.380
> 
> 标签：android, android-webview

> **可能重复：**
> [WebView 在线时加载网站，离线时加载本地文件](https://stackoverflow.com/questions/14670638/webview-load-website-when-online-load-local-file-when-offline)

我想在缓存中查看网站，即离线模式。我试过了，但是离线失败了

显示`"www.google.com"`网页不可用。通常使用缓存是为了显示

网页暂时处于离线状态。但我找不到解决方案。请帮助我。我的代码如下：

```
{ wt=(WebView)findViewById(R.id.webViewt);
  wt.getSettings().setAppCacheMaxSize(1024*1024*8);
  wt.getSettings().setAppCachePath("/data/data/"+ getPackageName() +"/cache");
  wt.getSettings().setAllowFileAccess(true);
  wt.getSettings().setAppCacheEnabled(true);
  wt.getSettings().setJavaScriptEnabled(true);
  wt.getSettings().setCacheMode(WebSettings.LOAD_DEFAULT);
  wt.loadUrl("http://www.google.com");  
  } 
```

# android - 图像将在长文本的右侧对齐

> ID：14603342
> 
> 赞同：0
> 
> 时间：2013-01-30T11:52:34.657
> 
> 标签：android

我有一个很长的单个文本和图像，我必须将图像与文本左侧对齐，就像文本包裹图像意味着当图像高度完成时，文本应该从左侧开始，就像没有图像问题是空白空间图像宽度的左侧是屏幕左侧。如何在图像高度完成后打破文本以从左侧写入。

# smalltalk - Web 网格中的就地可编辑字段

> ID：14603348
> 
> 赞同：2
> 
> 时间：2013-01-30T11:53:01.327
> 
> 标签：smalltalk, aida

我正在尝试将就地可编辑字段添加到这样的网络网格中：

```
WebGrid new
  columnNames: #('Test');
  columnAspects: #(nil);
  column: 1 addBlock: [:o | WebInPlaceEditableText aspect: #test for: o];
  collection: self objects. 
```

但是，将浏览器指向包含此元素的页面时，我得到：

> 添加页眉为时已晚，页面已经在流式响应！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T12:37:16.360

在代码所在方法的开头添加以下代码：

```
ScriptaculousLibrary ensure 
```

此库初始化调用由 WebInPlaceEditableText 自动完成，但因为在您的情况下，它驻留在页面流阶段后期执行的块中，当页面已经组成时，会发生此错误。因此需要手动库初始化。

# r - 子集化规则

> ID：14603353
> 
> 赞同：5
> 
> 时间：2013-01-30T11:53:09.367
> 
> 标签：r, dataframe, subset

具有`df1`和`df2`如下：

```
df1 <- read.table(text =" x y z
                          1 1 1
                          1 2 1
                          1 1 2
                          2 1 1
                          2 2 2",header=TRUE)

df2 <- read.table(text =" a b c
                          1 1 1
                          1 2 8
                          1 1 2
                          2 6 2",header=TRUE) 
```

我可以询问数据一堆东西，比如：

```
 df2[ df2$b == 6 | df2$c == 8 ,] #any rows where b=6 plus c=8 in df2
 #and additive conditions
 df2[ df2$b == 6 & df2$c == 8 ,] # zero rows 
```

数据帧之间：

```
 df1[ df1$z %in% df2$c ,] # rows in df1 where values in z are in c (allrows) 
```

这给了我所有的行：

```
 df1[ (df1$x %in%  df2$a) &
      (df1$y %in%  df2$b) &
      (df1$z %in%  df2$c) ,] 
```

但这不应该给我所有的行`df1`：

```
 df1[ df1$z %in% df2$c | df1$b == 9,] 
```

我真正希望做的是对三列条件进行子集`df1`化`df2`，这样我只能在 df1 中获得行，其中 a,b,c 在一行中同时等于 x,y,z。在实际数据中，我将有超过 3 列，但我仍然希望在 3 个附加列条件上进行子集化。

因此，将我的示例数据`df1`对`df2`我的结果进行子集化将是：

```
df1
   1 1 1
   1 1 2 
```

玩语法让我更加困惑，SO 帖子都是我想要的东西，实际上给我带来了更多的困惑。

我发现我可以这样做：

```
 merge(df1,df2, by.x=c("x","y","z"),by.y=c("a","b","c")) 
```

这给了我想要的东西，但我想了解为什么我的`[`尝试是错误的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T12:24:05.250

除了您使用的不错的解决方案`merge`（感谢您，我总是忘记`merge`）之外，这可以在 base using 中实现，`?interaction`如下所示。可能还有其他变体，但这是我熟悉的变体：

```
> df1[interaction(df1) %in% interaction(df2), ] 
```

现在回答你的问题：首先，我认为有一个错字（更正）：

```
df1[ df1$z %in% df2$c | df2$b == 9,] # second part should be df2$b == 9 
```

你会得到一个错误，因为第一部分评估为

```
[1] TRUE TRUE TRUE TRUE TRUE 
```

第二个评估为：

```
[1] FALSE FALSE FALSE FALSE 
```

您`|`对不等长度进行操作会得到错误：

```
longer object length is not a multiple of shorter object length 
```

**编辑：**如果您有多个列，那么您可以选择交互。例如，如果您想从前`df1`两列与 的行匹配的行中获取`df2`，那么您可以简单地执行以下操作：

```
> df1[interaction(df1[, 1:2]) %in% interaction(df2[, 1:2]), ] 
```

# wpf - WPF 组合框上的选定项目

> ID：14603355
> 
> 赞同：1
> 
> 时间：2013-01-30T11:53:12.867
> 
> 标签：wpf, xaml, combobox, selecteditem, selectedvalue

我有一些 wpf 组合框（xaml）：

```
<ComboBox ItemsSource="{Binding Path=NonPositionedConcentrators}"
          SelectedValue="{Binding Path=SelectedNonPositionedConcentrator}"
          DisplayMemberPath="SerialNumber" /> 
```

`SelectedNonPositionedConcentrator`- 是集中器类型。就像是：

```
class Concentrator
{
...
public string SerialNumber {...}
...
public override ToString{ return "Some needed text..."; }
} 
```

`NonPositionedConcentrators`- 集中器对象列表。

因此，在应用程序中，我看到带有 NonPositionedConcentrators 序列号的组合框（因为`DisplayMemberPath="SerialNumber"`），但是当我选择某些东西时，选择`"Some needed text..."`的项目显示为 ，请参见图像：

![在此处输入图像描述](../Images/8806d9cb421ae6a58b1bb48990172592.png)

我已经尝试过 SelectedValuePath="SerialNumber"，但它不起作用......而且我无法删除它 - `public override ToString{ return "Some needed text..."; }`，因为我需要......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T13:37:26.987

看起来您有一个可能导致您的问题的自定义 ComboBox 模板。如果它使用 TextBlock 或 ContentPresenter 来显示仅绑定 SelectedItem 属性而不拉入任何模板或其他设置的选定项目，那么无论如何您都只会获得 ToString 值。正确构建的模板将具有类似于默认模板在此位置使用的内容：

```
<ContentPresenter ContentTemplate="{TemplateBinding SelectionBoxItemTemplate}" ContentTemplateSelector="{TemplateBinding ItemTemplateSelector}"
    Content="{TemplateBinding SelectionBoxItem}" ContentStringFormat="{TemplateBinding SelectionBoxItemStringFormat}"
    HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" IsHitTestVisible="false" Margin="{TemplateBinding Padding}"
    SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T12:01:50.920

试试这个：

```
<ComboBox ItemsSource="{Binding Path=NonPositionedConcentrators}"
      SelectedItem="{Binding Path=SelectedNonPositionedConcentrator}"
      DisplayMemberPath="SerialNumber" /> 
```

**编辑：** 我已经复制了你的例子。我的集中器类：

```
public class Concentrator
{
    public string SerialNumber
    {
        get
        {
            return "123";
        }
    }
    public override string ToString()
    {
        return "Some needed text...";
    }
} 
```

我的视图模型：

```
public class TestViewModel : ViewModelBase
{
    public ObservableCollection<Concentrator> NonPositionedConcentrators { get; set; }
    public Concentrator SelectedNonPositionedConcentrator { get; set; }
    public TestViewModel()
    {
        NonPositionedConcentrators = new ObservableCollection<Concentrator>();
        NonPositionedConcentrators.Add(new Concentrator());
        NonPositionedConcentrators.Add(new Concentrator());
        NonPositionedConcentrators.Add(new Concentrator());
    }
} 
```

组合框：

```
 <ComboBox Height="23" Margin="25,12,103,0" Name="comboBox1" VerticalAlignment="Top" 
              ItemsSource="{Binding Path=NonPositionedConcentrators}"
              SelectedItem="{Binding Path=SelectedNonPositionedConcentrator}"
              SelectedValuePath="SerialNumber"
              DisplayMemberPath="SerialNumber" /> 
```

它对我来说很好用！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-30T12:12:10.773

您可以包含一个项目模板：

```
 <ComboBox.ItemTemplate>
            <DataTemplate>
                //your stuff
            </DataTemplate>
        </ComboBox.ItemTemplate> 
```

# python - 将int数组从python发送到.net

> ID：14603359
> 
> 赞同：1
> 
> 时间：2013-01-30T11:53:40.623
> 
> 标签：python, .net, sockets

我有一个简单的 python 脚本连接到 .net 套接字服务器（用 VB 编写），连接和发送/接收整数、布尔值和其他简单数据类型（使用`struct.unpack()`）没有问题，但服务器需要和 int 数组，但我不能似乎为它创建了正确的格式。

服务器上实际接收代码的行是：

```
_IOarray = CType(bformat.Deserialize(networkStream), Integer()) 
```

我不能以任何方式修改服务器，所以我必须在 python 中构造一个 .net 数组并发送它。没有额外的元数据，没有数组大小等，只有数组。

Python 版本 2.7.3 和 .net 4

任何帮助将不胜感激。

# python - apache2 上带有 mod_wsgi 的 webpy - 奇怪的 pymongo bson 错误

> ID：14603364
> 
> 赞同：0
> 
> 时间：2013-01-30T11:54:14.857
> 
> 标签：python, mod-wsgi, pymongo, web.py

我正在使用 apache2 运行 webpy。这是一个非常奇怪的错误，让我感到困惑。以前从未见过这样的错误，我想知道可能是什么原因。

错误在 bson pymongo 模块中。

```
[Wed Jan 30 11:40:28 2013] [error] [client 111.93.158.52] mod_wsgi (pid=27117): Target WSGI script '/var/www/webpy-app/borg/src/app.py' cannot be loaded 
as Python module.
[Wed Jan 30 11:40:28 2013] [error] [client 111.93.158.52] mod_wsgi (pid=27117): Exception occurred processing WSGI script '/var/www/webpy-app/borg/src/ap
p.py'.
[Wed Jan 30 11:40:28 2013] [error] [client 111.93.158.52] Traceback (most recent call last):
[Wed Jan 30 11:40:28 2013] [error] [client 111.93.158.52]   File "/var/www/webpy-app/borg/src/app.py", line 1, in <module>
[Wed Jan 30 11:40:28 2013] [error] [client 111.93.158.52]     import web,json,csv,pymongo,pdb,sys
[Wed Jan 30 11:40:28 2013] [error] [client 111.93.158.52]   File "/opt/python2.7/lib/python2.7/site-packages/pymongo-2.4.1-py2.7-linux-x86_64.egg/pymongo
/__init__.py", line 61, in <module>
[Wed Jan 30 11:40:28 2013] [error] [client 111.93.158.52]   File "/opt/python2.7/lib/python2.7/site-packages/pymongo-2.4.1-py2.7-linux-x86_64.egg/pymongo
/connection.py", line 39, in <module>
[Wed Jan 30 11:40:28 2013] [error] [client 111.93.158.52]   File "/opt/python2.7/lib/python2.7/site-packages/pymongo-2.4.1-py2.7-linux-x86_64.egg/pymongo
/mongo_client.py", line 44, in <module>
[Wed Jan 30 11:40:28 2013] [error] [client 111.93.158.52]   File "/opt/python2.7/lib/python2.7/site-packages/pymongo-2.4.1-py2.7-linux-x86_64.egg/bson/__
init__.py", line 41, in <module>
[Wed Jan 30 11:40:28 2013] [error] [client 111.93.158.52]   File "/opt/python2.7/lib/python2.7/site-packages/pymongo-2.4.1-py2.7-linux-x86_64.egg/bson/_c
bson.py", line 7, in <module>
[Wed Jan 30 11:40:28 2013] [error] [client 111.93.158.52]   File "/opt/python2.7/lib/python2.7/site-packages/pymongo-2.4.1-py2.7-linux-x86_64.egg/bson/_c
bson.py", line 6, in __bootstrap__
[Wed Jan 30 11:40:28 2013] [error] [client 111.93.158.52] AttributeError: PyCapsule_Import "datetime.datetime_CAPI" is not valid 
```

这是 httpd.conf 中的 WSGI 配置

```
LoadModule wsgi_module modules/mod_wsgi.so
WSGIScriptAlias /borg /var/www/webpy-app/borg/src/app.py/
WSGIPythonPath /opt/python2.7/lib/python2.7/site-packages/
Alias /borg/static /var/www/webpy-app/borg/src/static/
AddType text/html .py

<Directory /var/www/webpy-app/>
      Order deny,allow
      Allow from all
</Directory> 
```

错误是因为 python 库不兼容问题吗？我不确定。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T04:05:31.247

通过将 WSGIPythonHome 设置到适当的位置来解决这个问题。WSGI 正在查看一个旧的 Python 库。

# events - jQuery 防止所有事件冒泡

> ID：14603366
> 
> 赞同：0
> 
> 时间：2013-01-30T11:54:25.453
> 
> 标签：events, jquery, event-bubbling

我将 jQuery 与它的小部件工厂一起使用，并使用自定义事件来处理我的应用程序中的事件。

这意味着我所有的事件绑定看起来很像：

```
//...in the widget factory code

$(this.element).addClass('customEventClass');
$(this.element).bind('mysite.loadNextPage', $.proxy(this, 'loadNextPage'); 
```

并且通过执行以下操作触发事件：

```
$('.customEventClass').trigger('mysite.loadNextPage'); 
```

因为事件直接绑定到需要接收它们的元素，所以我不需要让这些自定义事件通过 DOM 冒泡。我知道我可以通过在事件处理程序代码中执行此操作来检查偶数是否冒泡：

```
if (event.target != event.currentTarget) {
    event.stopPropagation();
    event.preventDefault();
    return;
} 
```

但目前，由于大多数正在侦听自定义事件的元素没有为“mysite.loadNextPage”注册的处理程序，因此生成了 51 个事件，其中只有 1 个事件实际执行任何操作。有没有办法：

1.  告诉 jQuery 根本不要冒泡这些事件或
2.  为所有具有类“customEventClass”的 DOM 对象添加一个默认的“停止传播”处理程序，以阻止它们冒泡他们没有特定处理程序的事件。

或者是否有任何其他好的做法可以仅在对这些事件感兴趣的元素上触发事件，而不是为对这些事件不感兴趣的元素触发大量事件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-24T03:56:49.400

您还可以从事件处理函数返回 false 以停止传播，这就是我通常使用的：

> 从事件处理程序返回 false 将自动调用 event.stopPropagation() 和 event.preventDefault()。也可以为处理程序传递一个 false 值作为 function(){ return false; 的简写。}。所以，$("a.disabled").on("click", false); 将事件处理程序附加到所有具有“已禁用”类的链接，以防止在单击它们时跟踪它们并阻止事件冒泡。

见[http://api.jquery.com/on/](http://api.jquery.com/on/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T02:47:25.420

看起来没有什么好的方法可以用 jQuery 来做到这一点，但是编写一个新函数来实现这一点非常容易。

首先，我编写了一个新函数来阻止事件冒泡（并记录事件为什么不冒泡）。

```
function    eventWrapper(event){

    var logString = 'Event called: ' + event.type + ":" + event.namespace;

    if (jQuery.isFunction(this.log) == true) {
        this.log(logString);
    }
    else if (jQuery.isFunction(Logger.log) == true) {
        Logger.log(logString);
    }
    else{
        console.log(logString);
    }

    event.stopPropagation();
} 
```

现在添加到 jQuery 中的一个新函数。

```
// A global GUID counter for objects
guidWrapper: 1,

proxyWrapper: function(wrappedFn, fn, context, wrapFn ) {

    var args, proxy, tmp;

    if ( typeof context === "string" ) {
        tmp = fn[ context ];
        context = fn;
        fn = tmp;
    }

    // Quick check to determine if target is callable, in the spec
    // this throws a TypeError, but we will just return undefined.
    if ( !jQuery.isFunction( fn ) ) {
        return undefined;
    }

    // Simulated bind
    args = core_slice.call( arguments, 3 );
    proxy = function() {
        wrappedFn.apply( context || this, args.concat( core_slice.call( arguments ) ) );
        return fn.apply( context || this, args.concat( core_slice.call( arguments ) ) );
    };

    // Set the guid of unique handler to the same of original handler, so it can be removed
    proxy.guid = fn.guid = fn.guid || jQuery.guid++;

    return proxy;
}, 
```

然后不是像这样绑定函数：

```
$(this.element).bind('click', $.proxy(this.click, this)); 
```

而是像这样绑定它。

```
$(this.element).bind('click', $.proxyWrapper(eventWrapper, this.click, this)); 
```

这意味着当事件被触发时，正在侦听该事件的第一个元素将在该事件上调用 event.stopPropagation，因此它不会冒泡到可能也在侦听该事件的其他元素。

# jsf - 从 jsf 页面访问支持 bean 中的变量

> ID：14603368
> 
> 赞同：0
> 
> 时间：2013-01-30T11:54:29.160
> 
> 标签：jsf, managed-bean

我在jsf页面中有两个primefaces面板组件。我想通过单击primefaces commandButton在面板上显示一些数据，并在页面加载时显示panel1。单击commandbutton时，我不想显示其他面板。所以我在backing bean中定义了布尔变量在面板的可见属性中使用。但它不起作用。

支持豆：

```
 @ManagedBean
 @SessionScoped
 public class Bean implements Serializable {
   private boolean show;

   @PostConstruct
   public void init(){
      this.show=true;
   }
   public void action_commandButton(){
      this.show=false;
   }
  } 
```

jsf页面

```
 <p:commandButton style="text-align: center;font-size:12px;"  
                             action="#{bean.action_commandButton()}"  value=""/>

 <!--panel 1 -->
  <p:panel visible="#{bean.show}">
      <p:dataGrid>
        <!-- data from datbase-->
      </p:dataGrid>
  </p:panel>

  <!-- panel 2-->
  <p:panel visible="#{!bean.show}">
      <p:dataGrid>
        <!-- data from datbase-->
      </p:dataGrid>
  </p:panel> 
```

如何解决这个问题呢？提前致谢。

# c - JM H.264参考编码器，复杂度计算

> ID：14603371
> 
> 赞同：1
> 
> 时间：2013-01-30T11:54:38.267
> 
> 标签：c, h.264, precision

阅读 JM 18.4 参考软件代码时，我偶然发现了以下表达式：

```
return ((int) floor(nbits * p_quad->m_Qc + 0.5)) 
```

类型有：

```
int nbits
int p_quad->m_Qc 
```

为什么要加 0.5，然后对两个整数的乘积取底？检查结果，它们与单独的乘法相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T12:17:45.917

一般来说，`floor(x + 0.5)`可以用来模拟`round(x)`. `x`但是，这仅在可以采用非整数值时才有用，因此在您的情况下似乎是多余的！

# javascript - Google Maps JS API v3 和循环动画 gif

> ID：14603383
> 
> 赞同：0
> 
> 时间：2013-01-30T11:55:14.673
> 
> 标签：javascript, google-maps-api-3, google-maps-markers

我似乎无法使用 Google Maps API 循环播放动画 gif。它第一次播放动画，但之后不会再播放。

谁能指出我正确的方向？我在这个文件中有很多代码，所以我已经拖出了重要的部分，如果需要，我会很乐意提供更多。

```
var marker = new google.maps.MarkerImage(
    'library/img/gmap_marker.gif',
    new google.maps.Size(100, 100),
    new google.maps.Point(0, 0),
    new google.maps.Point(100, 100)
);

var shadow = new google.maps.MarkerImage(
    'library/img/gmap_shadow.png',
    new google.maps.Size(100, 100),
    new google.maps.Point(0, 0),
    new google.maps.Point(100, 100)
);

// set the personmarker
var person = new google.maps.Marker({
    position: currentPos,
    icon: marker,
    draggable: false,
    raiseOnDrag: false,
    shadow: shadow,
    animation: google.maps.Animation.DROP,
    map: app.map,
    optimized: false
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T15:35:16.947

关键是要设置`optimized: false`，但既然你已经拥有并且它不工作 - 我测试了创建自己的简单示例并且它工作。

```
<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <title>Google Maps JavaScript API v3 Example: Marker Simple</title>
    <link href="https://google-developers.appspot.com/maps/documentation/javascript/examples/default.css" rel="stylesheet">
    <script src="http://maps.googleapis.com/maps/api/js?v=3&sensor=false"></script>
    <script>
      function initialize() {
        var myLatlng = new google.maps.LatLng(-25.363882,131.044922);
        var mapOptions = {
          zoom: 4,
          center: myLatlng,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        }
        var map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);

        var marker = new google.maps.Marker({
            position: myLatlng,
            map: map,
            title: 'Hello World!',
            icon: "http://gwtportlets.googlecode.com/svn-history/r46/trunk/src/org/gwtportlets/portlet/public/img/portlet-loading-32x32.gif",
          optimized: false
        });
      }
    </script>
  </head>
  <body onload="initialize()">
    <div id="map_canvas">

    </div>
   </body>
</html> 
```

随意编辑它以满足您的需要，您也可以尝试使用 to 交换，`google.maps.MarkerImage`因为`google.maps.icon`MarkerImage 似乎已被弃用，请参阅：[MarkerImage](https://developers.google.com/maps/documentation/javascript/reference#MarkerImage)和[Icon](https://developers.google.com/maps/documentation/javascript/reference#Icon)。

祝你好运！

# c#-4.0 - 在共享点布局中创建一个新文件夹

> ID：14603390
> 
> 赞同：1
> 
> 时间：2013-01-30T11:55:40.617
> 
> 标签：c#-4.0, sharepoint

我需要在布局文件夹中保留一些数据/文件。我的 SharePoint 项目是“MyProject”因此目录结构包括

"C:\Program Files\Common Files\microsoft shared\Web Server Extensions\14\TEMPLATE\LAYOUTS\MyProject"

现在我需要以编程方式创建一个名为“Data”的新文件夹。但我收到“拒绝访问”错误。

```
SPSecurity.RunWithElevatedPrivileges(delegate
  {
String path = SPUtility.GetGenericSetupPath(String.Empty) + "TEMPLATE\\LAYOUTS\\MyProject\\Data";
bool IsExists = System.IO.Directory.Exists(path);
if (!IsExists)
  System.IO.Directory.CreateDirectory(path);// Access denied!
 }); 
```

谁能告诉我为什么我的访问被拒绝？即使我已将代码包装在 RunWithElevatedPrivileges 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T08:08:36.167

我已经尝试过您的代码并且运行良好。

窗口文件夹安全设置应该有一些东西。在我的文件夹中，我有下一个具有读/写权限的用户：

1.  创作者所有者 - 特殊权限
2.  系统 - 完全控制
3.  WSS_ADMIN_WPG - 除了完全控制和特殊权限之外的所有权限
4.  当前用户（农场管理员）- 完全控制

如果没有任何帮助，请尝试将每个人临时添加到读/写访问权限中！只是为了检查它是否真的是安全问题！

希望能帮助到你，

安德鲁

# c# - 在 GridView 的空单元格中显示消息

> ID：14603391
> 
> 赞同：3
> 
> 时间：2013-01-30T11:55:45.343
> 
> 标签：c#, winforms, devexpress, xtragrid

我`GridView`从 excel 导入我需要在每个空单元格附近显示一条消息，以向用户提供有关它应该写什么的信息..

```
void simpleButton1_Click(object sender, System.EventArgs e)
{
    string[] msg = new string[60];
    string[] error = new string[400];
    for (int i = 0; i < gridView3.RowCount ; i++)
    {
        System.Data.DataRow Rows = gridView3.GetDataRow(i);
        string cellvalue = Rows[0].ToString();
        if (cellvalue == "")
        {
            msg[0] = "Missing 'First Name'";
            error[i] = msg[0] + " - ";  
        }   
        cellvalue = Rows[1].ToString();
        if (cellvalue == "")
        {
            msg[1] = "Missing 'Last Name'";
            error[i] += msg[1] + " - ";
        }
        //...
    }
} 
```

如何将变量放入`msg[]`带有小图像或`"!"`图形的特定单元格，或者我可以为单元格着色

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T12:02:07.570

更改单元格的颜色

```
Rows[1].Interior.Color = System.Drawing.ColorTranslator.ToOle(System.Drawing.Color.Red); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T12:57:45.983

[您可以使用条件格式](http://documentation.devexpress.com/#WindowsForms/CustomDocument2406)功能为 XtraGrid 单元格着色：

```
gridControl1.DataSource = new List<Person> { 
    new Person(){ Name = "John", Age = 25 },
    new Person(){ Name = "Mary", Age = 17 },
    new Person(){ Age = 17  },
    new Person(){ Name = "Ann" },
    new Person(){ Name = "Pit", Age = 5 },
};
StyleFormatCondition nameCondition = new StyleFormatCondition();
nameCondition.Column = gridView1.Columns["Name"];
nameCondition.Condition = FormatConditionEnum.Expression;
nameCondition.Expression = "IsNullOrEmpty([Name])";
nameCondition.Appearance.BackColor = Color.Red;
nameCondition.Appearance.Options.UseBackColor = true;

StyleFormatCondition ageCondition = new StyleFormatCondition();
ageCondition.Column = gridView1.Columns["Age"];
ageCondition.Condition = FormatConditionEnum.Expression;
ageCondition.Expression = "[Age]<10";
ageCondition.Appearance.BackColor = Color.Maroon;
ageCondition.Appearance.Options.UseBackColor = true;

gridView1.FormatConditions.AddRange(new StyleFormatCondition[] { 
    nameCondition, ageCondition
}); 
```

结果：
![XtraGrid 条件格式](../Images/a972c41ac8e405f210446fdf03739410.png)

相关链接：
[自定义单个行和单元格的外观](http://documentation.devexpress.com/#WindowsForms/CustomDocument3495)
[样式格式条件](http://documentation.devexpress.com/#WindowsForms/CustomDocument759)
[自定义绘画（示例）](http://documentation.devexpress.com/#WindowsForms/CustomDocument763)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T13:10:06.693

参考：[如何：为数据单元格提供自定义显示文本](http://documentation.devexpress.com/#WindowsForms/CustomDocument3077)

> 通过 [ColumnView.CustomColumnDisplayText](http://documentation.devexpress.com/WindowsForms/DevExpressXtraGridViewsBaseColumnView_CustomColumnDisplayTexttopic.aspx)事件为数据单元格提供自定义显示文本。有关自定义绘图和单元格样式的更多信息，请参阅[自定义绘画样本](http://documentation.devexpress.com/#WindowsForms/CustomDocument763)、[自定义单个行和单元格的外观](http://documentation.devexpress.com/WindowsForms/CustomDocument758.aspx) 文档部分。

检查示例空字符串是否显示在“折扣”列的单元格中，如果它们包含零值。

```
using DevExpress.XtraGrid.Views.Base;

private void gridView1_CustomColumnDisplayText(object sender, 
CustomColumnDisplayTextEventArgs e) {
   if(e.Column.FieldName == "Discount")
      if(Convert.ToDecimal(e.Value) == 0) e.DisplayText = "";
} 
```

如果要同时显示`Image and text`两者，则需要处理 GridView 的[GridView.CustomDrawCell](http://documentation.devexpress.com/WindowsForms/DevExpressXtraGridViewsGridGridView_CustomDrawCelltopic.aspx)事件，这里是根据其他列值（年龄列）更改名称列颜色的代码片段

```
private void gridView_CustomDrawCell(object sender, RowCellCustomDrawEventArgs e)
    {
        if (e.Column == colName)
        {
            var age = Convert.ToInt32(gridView.GetRowCellValue(e.RowHandle, colAge));
            if (age < 18)
                e.Appearance.BackColor = Color.FromArgb(0xFE, 0xDF, 0x98);
            else
                e.Appearance.BackColor = Color.FromArgb(0xD2, 0xFD, 0x91);
        }
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T12:12:11.840

也许您可以使用 a`ToolTip`来显示您的警报：

```
toolTip1.ToolTipIcon = ToolTipIcon.Warning;
toolTip1.ToolTipTitle = "Warning!";
toolTip1.Show("Missing 'First Name'", x, y); 
```

您只需要根据`DataGridView`.

![示例 1](../Images/aa08badf48451e26cdbcf7ab2eddfa34.png) ![示例 2](../Images/c904e3096a2d8b29add7b5ece2af0673.png)

`ToolTip`在`System.Windows.Forms`命名空间中。

# jquery - asp.net textbox.text 和 jquery.val()

> ID：14603392
> 
> 赞同：1
> 
> 时间：2013-01-30T11:55:52.963
> 
> 标签：jquery, asp.net

我正在网页代码隐藏中的按钮单击事件上阅读 asp.net TextBox 的内容。

如果我在框中输入一些内容，我可以通过 TextBox.Text 阅读其中的内容，这很好用。

但是，如果我使用 jquery 复制到输入文本框中，使用 val() 设置内容，我可以看到文本出现在框中，但是当点击事件触发并且我尝试读取文本框的内容时，它总是空白。如果我自己输入，里面只有所有的东西。

相关的代码位是： - 输入框

```
<asp:TextBox runat="server" ID="deliveryAddress3" CssClass="required radius disabled sugestedAddressTargetCity bcity2" /> 
```

Javascript

```
var bfields = ['.baddress', '.bcity', '.bcountry', '.bpostcode'];
    var dfields = ['.baddress2', '.bcity2', '.bcountry2', '.bpostcode2'];
for (var i in dfields) {
                    $(dfields[i]).prev('label').hide();
                    $(dfields[i]).val($(bfields[i]).val());
                    $(dfields[i]).attr('disabled', 'disabled');
                    $(dfields[i]).addClass('disabled');
                    $(dfields[i]).attr('disabled', 'disabled'); 
```

代码隐藏的按钮单击方法中的代码：-

```
customer.DelTown = deliveryAddress3.Text; 
```

这里发生的事情是客户可以将他们的地址从一组盒子复制到另一组盒子。如果他们这样做（通过单击按钮），则分机会显示在框中，但后面的代码是空白的。但是，如果我在这些框中输入一些内容，则可以在后面的代码中找到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T12:21:33.003

我启动了一个新的 ASP.net 应用程序，如果您`value`使用 jQuery 设置文本框的属性，它就可以工作`attr()`。

该脚本会更新文本框中的值，并且后面的代码也可以读取它。

设计器 HTML（将以下内容添加到 default.aspx）：

```
<asp:TextBox runat="server" ID="MytextBox"></asp:TextBox>
<asp:Button runat="server" ID="MyButton" Text="Click Me"/> 
```

渲染的 HTML 输出：

```
<input name="ctl00$MainContent$MytextBox" type="text" value="NewValue" id="MainContent_MytextBox">
<input type="submit" name="ctl00$MainContent$MyButton" value="Click Me" id="MainContent_MyButton"> 
```

脚本：

```
$("#MainContent_MytextBox").attr("value", "NewValue"); 
```

来自 default.aspx.cs 的代码后面：

```
protected void Page_Load(object sender, EventArgs e)
{
    // Place Debugger here:
    if (MytextBox.Text == "NewValue")
    {
        // hurray
    }
} 
```

# php - PHP日期函数无法正常工作

> ID：14603394
> 
> 赞同：-5
> 
> 时间：2013-01-30T11:56:08.457
> 
> 标签：php, date, datetime

为什么我的 PHP 代码给我错误的结果如下代码：

```
date_default_timezone_set('UTC');
echo date('d-m-Y'); 
```

正在工作和生产：

```
30-01-2013 
```

但是这段代码：

```
date_default_timezone_set('UTC');
echo date('d-m-Y',strtotime("+1 month")); 
```

正在生产这个日期：

```
02-03-2013 
```

代替：

```
28-02-2013 
```

但是我只需要月份数。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T11:58:28.157

它实际上是正确的。

今天是`30-01`。+1 个月应该是`30-02`. 该日期不存在，因此变为`02-03`（28-02 + 2 天）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T12:01:06.730

通过使用解决

```
http://derickrethans.nl/obtaining-the-next-month-in-php.html 
```

代码：

```
echo date('d-m-Y',strtotime("first day of next month")); 
```

因为我只需要月份数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T12:01:10.957

[PHP 开发人员在此处](http://derickrethans.nl/obtaining-the-next-month-in-php.html)解释了该问题。您可以使用一些变通方法，但您必须解释得出结论的逻辑，即 1 月 31 日 + 1 个月是 2 月 2 日。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T12:00:39.477

因为二月只有28天。strtotime +1 月增加 30 天，尝试使用 DateTime 类代替： http: [//php.net/manual/en/class.datetime.php](http://php.net/manual/en/class.datetime.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T12:09:00.817

查看 ，

```
<?php   
    date_default_timezone_set('UTC');

    //Current date
    $date= date("Y-m-d");

    // Timestamp of new date after adding 1 month
    $timestamp= strtotime(date("Y-m-d", strtotime($date)) . "+1 month");

    //Converting timestamp of new date to readable date.
    $newdate= date("Y-m-d",$timestamp);
?> 
```

# c++ - 向量 ::operator[] 行为不端？

> ID：14603395
> 
> 赞同：7
> 
> 时间：2013-01-30T11:56:08.777
> 
> 标签：c++, vector, c++11, boolean, auto

> **可能重复：**
> [为什么 vector<bool>::reference 不返回对 bool 的引用？](https://stackoverflow.com/questions/8399417/why-vectorboolreference-doesnt-return-reference-to-bool)

我曾经认为`std::vector::operator[]`我们可以获得访问项目的**深层**副本，但似乎并非总是如此。至少，使用`vector<bool>`下面的测试代码给出了不同的结果：

```
#include <iostream>
#include <vector>
using namespace std;

template <typename T>
void Test(const T& oldValue, const T& newValue, const char* message)
{
    cout << message << '\n';

    vector<T> v;
    v.push_back(oldValue);
    cout << " before:  v[0] = " << v[0] << '\n';

    // Should be a deep-copy (?)       
    auto x = v[0];   
    x = newValue;

    cout << " after:   v[0] = " << v[0] << '\n';
    cout << "-------------------------------\n";
}

int main()
{
    Test<int>(10, 20, "Testing vector<int>");
    Test<double>(3.14, 6.28, "Testing vector<double>");
    Test<bool>(true, false, "Testing vector<bool>");
} 
```

输出（用VC10/VS2010 SP1编译的源代码）：

> ```
> Testing vector<int>
>  before:  v[0] = 10
>  after:   v[0] = 10
> -------------------------------
> Testing vector<double>
>  before:  v[0] = 3.14
>  after:   v[0] = 3.14
> -------------------------------
> Testing vector<bool>
>  before:  v[0] = 1
>  after:   v[0] = 0
> ------------------------------- 
> ```

我原以为分配`v[0]` *后*`x = newValue`仍会等于其先前的值，但这似乎不正确。这是为什么？为什么`vector<bool>`特别？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-30T11:58:26.673

`vector<bool>`是一个可怕的可憎和特殊。委员会将其专门用于打包位，因此它不支持正确的引用语义，因为您不能引用位，这意味着它具有不符合标准的接口并且实际上不符合标准容器的资格。大多数人使用的解决方案就是永远不要使用`vector<bool>`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-30T12:03:50.870

`vector<bool>::operator[]`既不产生 a`bool`也不产生对 a 的引用`bool`。它只是返回一个像引用一样的小**代理对象。**这是因为没有对单个位的引用，并且`vector<bool>`实际上`bool`以压缩方式存储 s。因此，通过使用`auto`您刚刚创建了该类引用对象的副本。问题是 C++ 不知道该对象充当引用。`auto`您必须通过替换为来强制“衰减到一个值” `T`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-30T12:01:09.133

`operator[]`为except for`T&`的每个值返回一个，它提供一个引用代理。请参阅Herb Sutter 的这篇[旧专栏](http://www.gotw.ca/gotw/050.htm)，了解为什么在通用代码中使用是个坏主意（以及为什么它甚至不是容器）。Scott Meyers 在 Effective STL 中也有一个关于它的特殊项目，以及在 SO 上的大量[问题。](https://stackoverflow.com/questions/8399417/why-vectorboolreference-doesnt-return-reference-to-bool?lq=1)`T``bool``vector<bool>`

# css - 使用 css 进行标签定位不起作用

> ID：14603397
> 
> 赞同：0
> 
> 时间：2013-01-30T11:56:11.533
> 
> 标签：css, html, label

我在 div 中有一个标签。我想将标签放在 div 的中间，将文本放在标签的左侧，垂直对齐到中心。在没有填充和边距的情况下如何做到这一点？

[http://jsfiddle.net/E3Wb4/](http://jsfiddle.net/E3Wb4/)

```
<div class="center">    
    <label style="width:255px;height:40px;display:inline-block;float:center">Test</label>           
</div>

.center {
padding:0px;
background:#B3B3B3;
height:44px;
width:400px;
border-top:2px solid red;
border-bottom:2px solid red;
border-left:2px solid red;
border-right:2px solid red;
}

label{
    border-top:2px solid yellow;
    border-bottom:2px solid yellow;
    border-left:2px solid yellow;
    border-right:2px solid yellow;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T12:00:04.143

你可以为 div.center 设置 line-height: 44px

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T12:08:56.643

最好的方法是添加`margin: 0px auto;`到标签。

[http://jsfiddle.net/WZ5MU/](http://jsfiddle.net/WZ5MU/)

您还可以使用拍摄代码边框`border: 2px solid red;`

`border: <border-width> || <border-style> || <color>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T12:01:44.957

```
.center{
  position: relative;
}
label{
    position: absolute;
    margin: auto;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
} 
```

这是使元素居中的好方法。

# uiviewcontroller - 如何从 segue 方法初始化模型

> ID：14603401
> 
> 赞同：0
> 
> 时间：2013-01-30T11:56:23.637
> 
> 标签：uiviewcontroller, model, uitableview, uipageviewcontroller, uistoryboardsegue

嗨，我有一个 UITableViewController，它由 Playlist 对象填充，它们包含 Song 对象。我想要的是当用户在我的 TVC 中点击播放列表名称时触发 UIPageViewController，我将通过在 UITableViewController 中点击的播放列表初始化其模型。然后它会在另一个 ViewController 中显示我想要的东西。

UIPageViewController 实现在我的应用程序中的工作方式如下：

ModelController --> RootViewController --> DataViewController (就像苹果的例子)

到目前为止，我已经启动并运行了所有内容，但是我无法使用被点击的播放列表正确初始化模型。在我的 PlaylistsTVC 中，我有一个 prepareForSegue 方法，它定义了目标视图控制器，并且 arr 保存了被点击的播放列表的歌曲，但我不知道如何将它传递给 ModelController。

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
     if (sender)
     {
         if ([segue.identifier isEqualToString:@"Segue"])
        {
            NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];
            NSArray *arr = @[[[self.pdc.playlistMasterList objectAtIndex:indexPath.row] songs]];
            NSLog(@"arr: %@", arr);
            RootViewController *rvc = (RootViewController *)segue.destinationViewController;
            rvc.hidesBottomBarWhenPushed = YES;
        }
    } 
```

}

我试图在我的 PlaylistDataController 类中设置一个数组，然后在 ModelController 类中创建一个新实例，但它不起作用。我还尝试在 NSUserDefaults 中对充满歌曲的数组进行编码和解码，然后将其传递给 ModelController，只是想看看它是否可以工作，但也没有运气。

任何人都可以从我上面描述的 segue 方法中帮助如何初始化页面视图控制器的模型吗？或者任何其他关于此事的想法都会受到欢迎。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T21:53:58.787

(I'm a bit confused by your controller naming...)

If you want to work with the array in `RootViewController`, then your approach was basically correct. You need a property in rvc and set it in `prepareForSegue`. E.g.:

```
...
RootViewController *rvc = (RootViewController *)segue.destinationViewController;
[rvc.theArray initWithArray:arr];
... 
```

# php - 显示 wordpress 搜索结果

> ID：14603406
> 
> 赞同：1
> 
> 时间：2013-01-30T11:56:35.277
> 
> 标签：php, wordpress, function, search

我正在尝试通过为我的 wordpress 模板创建所有新的 search.php 文件来制作自定义搜索页面......到目前为止，一切都很好。

问题是，当我搜索某些内容时，它没有显示任何结果。我猜它与一些 php 脚本或我不知道的东西有关。

我该如何解决？

PS结果数量的功能工作正常，但没有任何结果。

这是search.php的内容

```
<?php 

    get_header(); 

?>
 <?php if (have_posts()) : ?>
               <?php while (have_posts()) : the_post(); ?>
<h1>Search Results</h1>
<?php endwhile; ?> 

<?php else : ?> 

<?php _e( 'Nothing Found' ); ?> 
<?php endif; ?>

<?php
    get_footer(); 

?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T12:31:02.987

问题是你的循环中没有任何东西可以打印结果，即

```
<?php while (have_posts()) : the_post(); ?>
  <h1>Search Results</h1>
  <!-- Needs something here -->
<?php endwhile; ?> 
```

要解决此问题，只需替换`<!-- Needs something here -->`为以下内容

```
<a href="<?php the_permalink() ?>">
  <h2><?php the_title(); ?></h2>
</a>
<p><?php the_excerpt(); ?></p> 
```

您还需要移动`<h1>Search Results</h1>`到循环上方以阻止它多次显示。如果您不打算将它也添加到 else 语句中，最好将它移到 if 语句上方。

# c++ - 为什么 InterlockedAdd 在 vs2010 中不可用？

> ID：14603407
> 
> 赞同：8
> 
> 时间：2013-01-30T11:56:41.357
> 
> 标签：c++, c, windows, visual-studio-2010, interlocked

我已经包含 windows.h 并想在 vs2010 中使用 InterlockedAdd 并编译错误“找不到标识符”，但`InterlockedIncrement`可以正常工作。我尝试使用：

```
#include <intrin.h>
#pragma intrinsic(_InterlockedAdd) 
```

并编译错误：

> 警告 C4163：“_InterlockedAdd”：不能作为内部函数使用
> 1>test10.cpp(107)：错误 C3861：“InterlockedAdd”：找不到标识符

代码有什么问题？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-30T12:10:38.920

该`InterlockedAdd`功能仅在 Itanium 平台上可用。在 x86 和 x86-64 平台上，您可以`InterlockedExchangeAdd`改用。这也会向目标变量添加一个值，但它返回原始值而不是新值。

# mysql - 关于 MySQL 和多对多填充关联实体的建议

> ID：14603410
> 
> 赞同：1
> 
> 时间：2013-01-30T11:56:53.463
> 
> 标签：mysql, many-to-many, associative-table

我正在设计一个包含食谱及其成分列表的数据库，现在我正在处理将各个成分链接到它们各自的食谱。但是，我无法决定如何填充关联实体表的最佳行动方案。

我有我的 3 张桌子，

```
CREATE TABLE Ingredient
(
ingredientID int PRIMARY KEY AUTO_INCREMENT,
ING VARCHAR(100)
);

CREATE TABLE Recipe
(
recipeID int PRIMARY KEY AUTO_INCREMENT,
recipeTitle VARCHAR(200),
prepText VARCHAR(10000),
cuisineType VARCHAR(100)
);

CREATE TABLE recipeIng
(
recipeID int,
ingredientID int,
PRIMARY KEY (recipeID, ingredientID)
); 
```

成分表由包含 200 多种单独成分的 XML 文件填充，每种成分从 1 开始自动分配不同的 ID。

食谱表由另一个 XML 文件填充，其中包含食谱标题、制备方法和菜肴类型。

recipeIng 表是我遇到的麻烦，我认为它必须手动填充。即手动将所有成分与他们的食谱相匹配。像这样：

```
INSERT INTO recipeIng
VALUES(1, 1);
INSERT INTO recipeIng
VALUES(1, 2);
INSERT INTO recipeIng
VALUES(1,3);
INSERT INTO recipeIng
VALUES(1, 4); 
```

'1' 是第一个配方的 ID，'1'、'2' 等是单个成分 ID。

但是我不确定这是否是填充表格的最佳方法，任何建议都会有所帮助。

**注意：**当与填充此查询的使用方法结合使用时，效果很好。

```
SELECT r.recipeTitle
FROM Recipe r
INNER JOIN recipeIng e ON e.recipeID=r.recipeID
INNER JOIN Ingredient i ON i.ingredientID = e.ingredientID
WHERE 'brown sugar' IN (i.ING); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T12:51:03.450

通过查看您的最后一个问题，我认为这种方法至少比在其中一个表中使用逗号分隔的 id 列表更好。拥有一个以逗号分隔的值列表会限制您的连接数，具体取决于您对存储值列表的字段的配置。

您在这里展示的方式也是我在关系数据库中设计 mn 关系的方式。这也是您使用 MySQL Designer 等工具所获得的，所以我认为这是存储多对多关系的最佳方式。

除了这篇文章，我还没有真正找到很多关于这个的文档，这篇文章链接在 Wikipedia 页面上的多对多关系：[http://www.tomjewett.com/dbdesign/dbdesign.php?page=manyany。 php](http://www.tomjewett.com/dbdesign/dbdesign.php?page=manymany.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-11T23:54:59.117

我在我的网站上经历了这种确切的情况，但我处理的是推荐而不是食谱。到目前为止，我想出的唯一可能对您有所帮助的方法是一次进行大量插入。例如，如果您的大多数食谱都需要面粉，那么您可以使用 select insert 语句将“面粉”插入到多个 recipeID 的 recipeIng 中。

祝你好运！

# javascript - js中的if语句无法正常工作

> ID：14603422
> 
> 赞同：1
> 
> 时间：2013-01-30T11:57:38.190
> 
> 标签：javascript, jquery, html, css, if-statement

我`if (i>0)`在这里的陈述不起作用，有什么建议吗？

[http://jsfiddle.net/qup2R/](http://jsfiddle.net/qup2R/)

我希望它防止我的初始表单框对 `$('.remove').click(function() if`i = 0 做出反应

```
<html>
  <head>
    <script src="jquery.js"></script>
    <script type="text/javascript">
      var i = 0;
      $('document').ready(function () {
        if (i > 0) {
          $('.remove').click(function () {
            i--;
            $(this).closest('form').remove();
          });
        }
        $('.clickme').click(function () {
          if (i < 5) {
            i++;
            $(".form1").last().clone(true, true).appendTo("body");
          } else {
            $(".form1")
          }
        });
      });
    </script>
  </head>

  <body>
     <h3>Invite your friends</h3>

    <form class="form1">
      <input id="email" name="email" />
      <a class="remove" href="#">Remove</a>
      <br/>
      <br/>
      <a class="clickme" href="#">Add</a>
    </form>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T12:03:00.183

在 click 函数中使用语句并添加逻辑运算符，例如`&&`以获得准确的结果。

```
 $('.remove').click(function () {
     if (i > 0 && i < 5 ) {
         i--;
         $(this).closest('form').remove();
     }
 });

 $('.clickme').click(function () {
     if (i < 5 && i > 0) {
          i++;
          $(".form1").last().clone(true, true).appendTo("body");
     }
 }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T12:05:24.953

再看看你的代码：

```
 if (i > 0) {
      $('.remove').click(function () {
        i--;
        $(this).closest('form').remove();
      });
    } 
```

这`.remove`只会在`i > 0`. 在 DOM 就绪时，`i == 0`处理程序*永远不会被绑定*。您实际上想要实现的是检查是否*单击*`i > 0` *a`.remove`*。因此，该检查需要在处理程序*内部*，而不是在外部。

```
 $('.remove').click(function () {
      if (i > 0) {
        i--;
        $(this).closest('form').remove();
      }
    }); 
```

**编辑 1：**好的，看起来你在追求别的东西。您希望您的第一个`form`表单不会从页面中删除，因为此后您无法再添加新表单。问题是您`i`代表*页面上表单的数量*（减 1，因为您从 HTML 中已有的 1 个表单开始）而不是*插入索引*。有几种方法可以解决这个问题：

*   给第一个表单一个额外的类，并在克隆表单中删除该类。然后，您可以检查单击的是否`.remove`是`form`具有类似`$(this).closest('form').hasClass('firstForm')`.
*   仅手动将`.remove`链接添加到动态生成的表单。您可以构建一个模板元素，将其存储在一个变量中，然后将克隆附加到新表单中。
*   检查被点击`form`的索引。`.remove`如果是第一个，请不要删除它。

**编辑 2：**好的，所以您实际上并不关心第一个表单是否被删除，您只想确保至少有一个表单仍在页面上。这就是为什么您要跟踪表格的数量。说真的，真的很混乱。如果您至少解释一下您对代码的推理是什么，这会有所帮助，评论不是事后的想法！

无论如何，您应该对我的初始修复有足够的了解（在编辑之上）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T12:10:08.520

将jquery更改为此并尝试

```
$('document').ready(function () {
       var i = 0;
      $('.remove').click(function () {
        if (i > 0) {
          i--;
        $(this).closest('form').remove();
        }
      });

    $('.clickme').click(function () {
      if (i < 5) {
        i++;
        $(".form1").last().clone(true, true).appendTo("body");
      } else {
        $(".form1")
      }
    });
  }); 
```

# rest - ZF2中授权不成功时如何跳过控制器动作

> ID：14603424
> 
> 赞同：2
> 
> 时间：2013-01-30T11:57:39.593
> 
> 标签：rest, controller, authorization, zend-framework2

我正在 ZF2 上实现 REST API。现在我需要检查 Module.php 上的授权令牌，如果授权失败则返回错误。但我不知道如何从 Module.php 返回响应。

我编写了代码来检查 onBootstrap 的 DISPATCH 事件中的授权。现在，如果授权失败，如何在不访问控制器的情况下从 Module.php 返回错误。因为只有`exit`函数/调用可以在不访问控制器的情况下返回。但在那种情况下，我没有得到任何回应。使用 json_encode(array) 看起来不像标准，因为我已经启用 ViewJsonStrategy 并在控制器中使用 JsonModel。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T12:16:36.533

您可以通过让您的侦听器返回响应来缩短事件，例如...

```
public function onBootstrap(EventInterface $e)
{
    $eventManager = $e->getApplication()->getEventManager();
    // attach dispatch listener 
    $eventManager->attach('dispatch', function($e) {
        // do your auth checks...
        if (!$allowed) {
            // get response from event
            $response = $e->getResponse();
            // set status 403 (forbidden) 
            $response->setStatusCode(403);
            // shortcircuit by returning response
            return $response;
        }
    });
} 
```

# java - 文件到 JTable，JTable 到文件

> ID：14603425
> 
> 赞同：0
> 
> 时间：2013-01-30T11:57:41.707
> 
> 标签：java, database, swing, file-io, jtable

我一直在做`JTable`，我的项目：

1.  从`database`（我完成了这项任务并能够在 JTable 中显示）读取数据。
2.  然后将数据显示并保存到子组`file`中（文本/excel）。

我对一些示例代码有基本的了解`JTable`并使用了一些示例代码，我可以设法完成我的第一项任务。然后开始了第二个任务。

例如

> 姓名| 电子邮件|
> 
> 姓名 1|email@email.com
> 
> 姓名2|email2@email.com

（我完成了这项任务并能够显示在`JTable`）

然后当用户单击任何行然后显示新表

姓名|邮箱

展示 - -

然后用户应该能够保存组`groupname`

谁能知道如何动态更新表格和任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T13:58:54.727

> 谁能知道如何动态更新表格和任何建议？

如果您正在使用，`DefaultTableModel`那么您有类似的方法`addRow(..)`将在`JTable`. `JTable`使用`setValueAt(..)`方法更新现有行。无需调用`fireXXXMethod`。`DefaultTableModel`

或者

如果您正在使用，`AbstractTableModel`则使用该`setValueAt(..)`方法并`fireXXXMethod`在表模型中调用以刷新表数据。

# c++ - 如何静态编译链接除了一个库（G ++）

> ID：14603431
> 
> 赞同：0
> 
> 时间：2013-01-30T11:58:00.257
> 
> 标签：c++, linux, g++

现在我使用这个命令编译我的应用程序：

```
g++  -o newserver  test.cpp ... -lboost_system -std=c++0x 
```

但是我如何静态编译它（glibc 和其他）但`boost::system`应该动态链接。

谢谢！

**更新**

当我这样编译时：

```
g++  -o newserver  test.cpp ... -lboost_system -static -std=c++0x 
```

我有一个错误：

```
/tmp/cc1hTPLw.o: In function `NativesResolveDns(std::basic_string<char, std::char_traits<char>, std::allocator<char> >)':
Natives.cpp:(.text+0x1498): warning: Using 'gethostbyname' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking
/tmp/ccHzlUIU.o: In function `boost::asio::detail::posix_tss_ptr<boost::asio::detail::call_stack<boost::asio::detail::task_io_service<boost::asio::detail::epoll_reactor<false> > >::context>::~posix_tss_ptr()':
stdafx.cpp:(.text._ZN5boost4asio6detail13posix_tss_ptrINS1_10call_stackINS1_15task_io_serviceINS1_13epoll_reactorILb0EEEEEE7contextEED2Ev[boost::asio::detail::posix_tss_ptr<boost::asio::detail::call_stack<boost::asio::detail::task_io_service<boost::asio::detail::epoll_reactor<false> > >::context>::~posix_tss_ptr()]+0x15): undefined reference to `pthread_key_delete'
/tmp/ccHzlUIU.o: In function `boost::asio::detail::posix_tss_ptr<boost::asio::detail::call_stack<boost::asio::detail::task_io_service<boost::asio::detail::epoll_reactor<false> > >::context>::posix_tss_ptr()':
stdafx.cpp:(.text._ZN5boost4asio6detail13posix_tss_ptrINS1_10call_stackINS1_15task_io_serviceINS1_13epoll_reactorILb0EEEEEE7contextEEC2Ev[boost::asio::detail::posix_tss_ptr<boost::asio::detail::call_stack<boost::asio::detail::task_io_service<boost::asio::detail::epoll_reactor<false> > >::context>::posix_tss_ptr()]+0x28): undefined reference to `pthread_key_create'
/tmp/cczd8U27.o: In function `Helper::Initialize()':
Helper.cpp:(.text+0x179): undefined reference to `pthread_create'
/tmp/cczd8U27.o: In function `boost::asio::detail::posix_mutex::posix_mutex()':
Helper.cpp:(.text._ZN5boost4asio6detail11posix_mutexC1Ev[boost::asio::detail::posix_mutex::posix_mutex()]+0x28): undefined reference to `pthread_mutex_init'
/tmp/cczd8U27.o: In function `boost::asio::detail::posix_mutex::~posix_mutex()':
Helper.cpp:(.text._ZN5boost4asio6detail11posix_mutexD1Ev[boost::asio::detail::posix_mutex::~posix_mutex()]+0x14): undefined reference to `pthread_mutex_destroy'
/tmp/cczd8U27.o: In function `boost::asio::detail::posix_mutex::lock()':
Helper.cpp:(.text._ZN5boost4asio6detail11posix_mutex4lockEv[boost::asio::detail::posix_mutex::lock()]+0x17): undefined reference to `pthread_mutex_lock'
/tmp/cczd8U27.o: In function `boost::asio::detail::posix_mutex::unlock()':
Helper.cpp:(.text._ZN5boost4asio6detail11posix_mutex6unlockEv[boost::asio::detail::posix_mutex::unlock()]+0x17): undefined reference to `pthread_mutex_unlock'
/tmp/ccvfBQyf.o: In function `boost::asio::detail::posix_event::posix_event()':
NetworkServer.cpp:(.text._ZN5boost4asio6detail11posix_eventC1Ev[boost::asio::detail::posix_event::posix_event()]+0x30): undefined reference to `pthread_cond_init'
/tmp/ccvfBQyf.o: In function `boost::asio::detail::posix_event::~posix_event()':
NetworkServer.cpp:(.text._ZN5boost4asio6detail11posix_eventD1Ev[boost::asio::detail::posix_event::~posix_event()]+0x14): undefined reference to `pthread_cond_destroy'
/tmp/ccvfBQyf.o: In function `boost::asio::detail::posix_thread::~posix_thread()':
NetworkServer.cpp:(.text._ZN5boost4asio6detail12posix_threadD1Ev[boost::asio::detail::posix_thread::~posix_thread()]+0x26): undefined reference to `pthread_detach'
/tmp/ccvfBQyf.o: In function `boost::asio::detail::posix_thread::join()':
NetworkServer.cpp:(.text._ZN5boost4asio6detail12posix_thread4joinEv[boost::asio::detail::posix_thread::join()]+0x2b): undefined reference to `pthread_join'
/tmp/ccvfBQyf.o: In function `boost::asio::detail::posix_tss_ptr<boost::asio::detail::call_stack<boost::asio::detail::task_io_service<boost::asio::detail::epoll_reactor<false> > >::context>::operator boost::asio::detail::call_stack<boost::asio::detail::task_io_service<boost::asio::detail::epoll_reactor<false> > >::context*() const':
NetworkServer.cpp:(.text._ZNK5boost4asio6detail13posix_tss_ptrINS1_10call_stackINS1_15task_io_serviceINS1_13epoll_reactorILb0EEEEEE7contextEEcvPS9_Ev[boost::asio::detail::posix_tss_ptr<boost::asio::detail::call_stack<boost::asio::detail::task_io_service<boost::asio::detail::epoll_reactor<false> > >::context>::operator boost::asio::detail::call_stack<boost::asio::detail::task_io_service<boost::asio::detail::epoll_reactor<false> > >::context*() const]+0x15): undefined reference to `pthread_getspecific'
/tmp/ccvfBQyf.o: In function `void boost::asio::detail::posix_event::wait<boost::asio::detail::scoped_lock<boost::asio::detail::posix_mutex> >(boost::asio::detail::scoped_lock<boost::asio::detail::posix_mutex>&)':
NetworkServer.cpp:(.text._ZN5boost4asio6detail11posix_event4waitINS1_11scoped_lockINS1_11posix_mutexEEEEEvRT_[void boost::asio::detail::posix_event::wait<boost::asio::detail::scoped_lock<boost::asio::detail::posix_mutex> >(boost::asio::detail::scoped_lock<boost::asio::detail::posix_mutex>&)]+0x53): undefined reference to `pthread_cond_wait'
/tmp/ccvfBQyf.o: In function `boost::asio::detail::posix_tss_ptr<boost::asio::detail::call_stack<boost::asio::detail::task_io_service<boost::asio::detail::epoll_reactor<false> > >::context>::operator=(boost::asio::detail::call_stack<boost::asio::detail::task_io_service<boost::asio::detail::epoll_reactor<false> > >::context*)':
NetworkServer.cpp:(.text._ZN5boost4asio6detail13posix_tss_ptrINS1_10call_stackINS1_15task_io_serviceINS1_13epoll_reactorILb0EEEEEE7contextEEaSEPS9_[boost::asio::detail::posix_tss_ptr<boost::asio::detail::call_stack<boost::asio::detail::task_io_service<boost::asio::detail::epoll_reactor<false> > >::context>::operator=(boost::asio::detail::call_stack<boost::asio::detail::task_io_service<boost::asio::detail::epoll_reactor<false> > >::context*)]+0x20): undefined reference to `pthread_setspecific'
/tmp/ccvfBQyf.o: In function `void boost::asio::detail::posix_event::signal<boost::asio::detail::scoped_lock<boost::asio::detail::posix_mutex> >(boost::asio::detail::scoped_lock<boost::asio::detail::posix_mutex>&)':
NetworkServer.cpp:(.text._ZN5boost4asio6detail11posix_event6signalINS1_11scoped_lockINS1_11posix_mutexEEEEEvRT_[void boost::asio::detail::posix_event::signal<boost::asio::detail::scoped_lock<boost::asio::detail::posix_mutex> >(boost::asio::detail::scoped_lock<boost::asio::detail::posix_mutex>&)]+0x49): undefined reference to `pthread_cond_signal'
/usr/lib/gcc/x86_64-linux-gnu/4.4.5/libstdc++.a(locale.o): In function `std::locale::_Impl::_M_install_cache(std::locale::facet const*, unsigned long)':
(.text._ZNSt6locale5_Impl16_M_install_cacheEPKNS_5facetEm+0x4e): undefined reference to `pthread_mutex_lock'
/usr/lib/gcc/x86_64-linux-gnu/4.4.5/libstdc++.a(locale.o): In function `std::locale::_Impl::_M_install_cache(std::locale::facet const*, unsigned long)':
(.text._ZNSt6locale5_Impl16_M_install_cacheEPKNS_5facetEm+0x83): undefined reference to `pthread_mutex_unlock'
/usr/lib/gcc/x86_64-linux-gnu/4.4.5/libstdc++.a(locale.o): In function `std::locale::_Impl::_M_install_cache(std::locale::facet const*, unsigned long)':
(.text._ZNSt6locale5_Impl16_M_install_cacheEPKNS_5facetEm+0x1ca): undefined reference to `pthread_mutex_unlock'
/usr/lib/gcc/x86_64-linux-gnu/4.4.5/libstdc++.a(locale_init.o): In function `std::locale::locale()':
(.text._ZNSt6localeC1Ev+0x2b): undefined reference to `pthread_mutex_lock'
/usr/lib/gcc/x86_64-linux-gnu/4.4.5/libstdc++.a(locale_init.o): In function `std::locale::locale()':
(.text._ZNSt6localeC1Ev+0x4c): undefined reference to `pthread_mutex_unlock'
/usr/lib/gcc/x86_64-linux-gnu/4.4.5/libstdc++.a(locale_init.o): In function `std::locale::global(std::locale const&)':
(.text._ZNSt6locale6globalERKS_+0x47): undefined reference to `pthread_mutex_lock'
/usr/lib/gcc/x86_64-linux-gnu/4.4.5/libstdc++.a(locale_init.o): In function `std::locale::global(std::locale const&)':
(.text._ZNSt6locale6globalERKS_+0xa5): undefined reference to `pthread_mutex_unlock'
/usr/lib/gcc/x86_64-linux-gnu/4.4.5/libstdc++.a(locale_init.o): In function `std::locale::global(std::locale const&)':
(.text._ZNSt6locale6globalERKS_+0x1a4): undefined reference to `pthread_mutex_unlock'
/usr/lib/gcc/x86_64-linux-gnu/4.4.5/libstdc++.a(locale_init.o): In function `std::locale::locale()':
(.text._ZNSt6localeC2Ev+0x2b): undefined reference to `pthread_mutex_lock'
/usr/lib/gcc/x86_64-linux-gnu/4.4.5/libstdc++.a(locale_init.o): In function `std::locale::locale()':
(.text._ZNSt6localeC2Ev+0x4c): undefined reference to `pthread_mutex_unlock'
/usr/lib/gcc/x86_64-linux-gnu/4.4.5/libstdc++.a(eh_alloc.o): In function `__gnu_cxx::__scoped_lock::~__scoped_lock()':
(.text._ZN9__gnu_cxx13__scoped_lockD1Ev[__gnu_cxx::__scoped_lock::~__scoped_lock()]+0x12): undefined reference to `pthread_mutex_unlock'
/usr/lib/gcc/x86_64-linux-gnu/4.4.5/libstdc++.a(eh_alloc.o): In function `__cxa_free_dependent_exception':
(.text.__cxa_free_dependent_exception+0x48): undefined reference to `pthread_mutex_lock'
/usr/lib/gcc/x86_64-linux-gnu/4.4.5/libstdc++.a(eh_alloc.o): In function `__cxa_free_dependent_exception':
(.text.__cxa_free_dependent_exception+0x6b): undefined reference to `pthread_mutex_unlock'
/usr/lib/gcc/x86_64-linux-gnu/4.4.5/libstdc++.a(eh_alloc.o): In function `__cxa_free_exception':
(.text.__cxa_free_exception+0x47): undefined reference to `pthread_mutex_lock'
/usr/lib/gcc/x86_64-linux-gnu/4.4.5/libstdc++.a(eh_alloc.o): In function `__cxa_free_exception':
(.text.__cxa_free_exception+0x6a): undefined reference to `pthread_mutex_unlock'
/usr/lib/gcc/x86_64-linux-gnu/4.4.5/libstdc++.a(eh_alloc.o): In function `__cxa_allocate_exception':
(.text.__cxa_allocate_exception+0xac): undefined reference to `pthread_mutex_lock'
/usr/lib/gcc/x86_64-linux-gnu/4.4.5/libstdc++.a(eh_alloc.o): In function `__cxa_allocate_exception':
(.text.__cxa_allocate_exception+0x11a): undefined reference to `pthread_mutex_unlock'
/usr/lib/gcc/x86_64-linux-gnu/4.4.5/libstdc++.a(eh_alloc.o): In function `__cxa_allocate_dependent_exception':
(.text.__cxa_allocate_dependent_exception+0x5c): undefined reference to `pthread_mutex_lock'
/usr/lib/gcc/x86_64-linux-gnu/4.4.5/libstdc++.a(eh_alloc.o): In function `__cxa_allocate_dependent_exception':
(.text.__cxa_allocate_dependent_exception+0xcb): undefined reference to `pthread_mutex_unlock'
/usr/lib/gcc/x86_64-linux-gnu/4.4.5/libgcc_eh.a(unwind-dw2-fde-glibc.o): In function `__register_frame_info_bases':
(.text+0x42): undefined reference to `pthread_mutex_lock'
/usr/lib/gcc/x86_64-linux-gnu/4.4.5/libgcc_eh.a(unwind-dw2-fde-glibc.o): In function `__register_frame_info_table_bases':
(.text+0xdb): undefined reference to `pthread_mutex_lock'
/usr/lib/gcc/x86_64-linux-gnu/4.4.5/libgcc_eh.a(unwind-dw2-fde-glibc.o): In function `_Unwind_Find_FDE':
(.text+0x1776): undefined reference to `pthread_mutex_lock'
/usr/lib/gcc/x86_64-linux-gnu/4.4.5/libgcc_eh.a(unwind-dw2-fde-glibc.o): In function `_Unwind_Find_FDE':
(.text+0x17c7): undefined reference to `pthread_mutex_unlock'
/usr/lib/gcc/x86_64-linux-gnu/4.4.5/libgcc_eh.a(unwind-dw2-fde-glibc.o): In function `__deregister_frame_info_bases':
(.text+0x1992): undefined reference to `pthread_mutex_lock'
/usr/lib/gcc/x86_64-linux-gnu/4.4.5/libgcc_eh.a(unwind-dw2-fde-glibc.o): In function `__deregister_frame_info_bases':
(.text+0x1a16): undefined reference to `pthread_mutex_unlock'
/usr/lib/gcc/x86_64-linux-gnu/4.4.5/libgcc_eh.a(unwind-dw2-fde-glibc.o): In function `__register_frame_info_bases':
(.text+0x61): undefined reference to `pthread_mutex_unlock'
/usr/lib/gcc/x86_64-linux-gnu/4.4.5/libgcc_eh.a(unwind-dw2-fde-glibc.o): In function `__register_frame_info_table_bases':
(.text+0xfa): undefined reference to `pthread_mutex_unlock'
collect2: ld returned 1 exit status 
```

如您所见，静态链接有问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:13:32.970

尝试这个。

```
g++ -o newserver -static <libname> -dynamic <libname> 
```

这应该是命令。但是 gcc 可能不会将所有内容都视为动态的

# ios - 通过 IOS Google Drive SDK 列出 Google Drive 中指定文件夹中的所有文件

> ID：14603432
> 
> 赞同：2
> 
> 时间：2013-01-30T11:58:02.877
> 
> 标签：ios, google-drive-api, google-api-objc-client

实际上，我将 google drive sdk 与我的 ios 应用程序集成在一起。我可以通过 google drive ios sdk 检索/上传 google drive 中的文件。但是从指定的父文件夹中检索文件列表需要花费很多时间。

**这是我正在使用的步骤和代码。**

首先获取指定父文件夹的子文件夹，然后获取每个子文件夹的**GTLDriveChildReference**，然后使用子引用标识符进行查询。

这对我来说是一个巨大的过程。它也每次都请求谷歌服务器。任何更好的方法都可以在查询中传递父文件夹 ID 并从该父文件夹中提取文件。

```
 -(void)getFileListFromSpecifiedParentFolder {
        GTLQueryDrive *query2 = [GTLQueryDrive queryForChildrenListWithFolderId:<some_id or root>];
        query2.maxResults = 1000;

        // queryTicket can be used to track the status of the request.
        [self.driveService executeQuery:query2
            completionHandler:^(GTLServiceTicket *ticket,
                            GTLDriveChildList *children, NSError *error) {
                NSLog(@"\nGoogle Drive: file count in the folder: %d", children.items.count);
                //incase there is no files under this folder then we can avoid the fetching process
                if (!children.items.count) {
                    return ;
                }

                if (error == nil) {
                    for (GTLDriveChildReference *child in children) {

                        GTLQuery *query = [GTLQueryDrive queryForFilesGetWithFileId:child.identifier];

                        // queryTicket can be used to track the status of the request.
                        [self.driveService executeQuery:query
                            completionHandler:^(GTLServiceTicket *ticket,
                                                GTLDriveFile *file,
                                                NSError *error) {

                                                NSLog(@"\nfile name = %@", file.originalFilename);
                                                }];
                    }
                }
            }];
    } 
```

任何可能不胜感激的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-05T23:04:56.187

我一直在使用以下代码（只需要一个查询而不是多个查询）：

```
GTLQueryDrive *query = [GTLQueryDrive queryForFilesList];
query.q = [NSString stringWithFormat:@"'%@' IN parents", <the folderID>];

[self.driveService executeQuery:query completionHandler:^(GTLServiceTicket *ticket,
                                                          GTLDriveFileList *files,
                                                          NSError *error) {
...
}]; 
```

到目前为止似乎运作良好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T18:04:34.767

尝试在[批处理查询](http://code.google.com/p/google-api-objectivec-client/wiki/Introduction#Batch_Operations)中组合查询，例如

```
GTLBatchQuery *batchQuery = [GTLBatchQuery batchQuery];
for (GTLDriveChildReference *child in children) {
  GTLQuery *query = [GTLQueryDrive queryForFilesGetWithFileId:child.identifier];
  query.completionBlock = ^(GTLServiceTicket *ticket, GTLDriveFile *file, NSError *error) {
    NSLog(@"error=%@, file name = %@", error, file.title);
  };
  [batchQuery addQuery:query];
}
[driveService executeQuery:batchQuery completionHandler:...] 
```

如果启用了自动获取[结果页面](http://code.google.com/p/google-api-objectivec-client/wiki/Introduction#Result_Pages)`service.shouldFetchNextPages = YES`( )，则尝试设置查询的 maxResults 属性以避免库需要进行多次获取。例如，如果查询的结果为 100 或更少，则 maxResults 值为 100 将通过一次提取来检索它们。

[对部分响应](http://code.google.com/p/google-api-objectivec-client/wiki/Introduction#Partial_Responses)的请求也更快一些，并且使用更少的内存，特别是对于大型结果。

查看[http 日志](http://code.google.com/p/google-api-objectivec-client/wiki/Introduction#Logging_HTTP_Server_Traffic)以更好地了解查询的响应大小。

# javascript - 如何使用Javascript将html表格单元格的公式解析为像Excel一样

> ID：14603433
> 
> 赞同：1
> 
> 时间：2013-01-30T11:58:05.893
> 
> 标签：javascript, jquery, html, excel, html-table

我正在寻找一种使用 Javascript（首选 Jquery）使 html 表表现得像 excel 的方法。这是我的问题。我做了一个这样的表：

```
 <table>
       <tr>
          <td id="A1">10</td>
          <td id="B1">10.5</td>
       </tr>
       <tr>
          <td id="A2">5</td>
          <td id="B2" formula="A1+B1+A2"></td>
       </tr>
 </table> 
```

每个 td 都有一个 id，其中一些 td 添加了一个公式属性。我想计算那些公式，把公式的值给td。

在上表中，在这里，我想分配**B2**值**25.5(B2=A1+B1+A2)**。

看起来像这样：

```
<td id="B2" formula="A1+B1+A2">25.5</td> 
```

任何人都可以给我一个线索吗？谢谢。

PS：这是我找到的一些资源，但它们并没有解决我的问题

1.  [DOM 上类似电子表格的公式](https://stackoverflow.com/questions/8930016/spreadsheet-like-formulas-on-the-dom)

2.  [http://zaach.github.com/jison/docs/](http://zaach.github.com/jison/docs/)

* * *

非常感谢@palindrom。我终于根据您的回答解决了我的问题。

这是我的代码：

```
 $("td[formula]").each(function(){
        //1 get formula attribute
        var formula = $(this).attr('formula');

        //2 use regex to make expression, with the surpport of "A122"， "AB1" and more
        var expression = formula.replace(/([A-Z]+[0-9]+)/g, "parseFloat(\$('#$1').html())") ;

        //3 eval the expression
        var result = eval( expression );

        //4 set the value
        $(this).html(result);
     }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T12:13:23.070

应该适用于简单的数学，没有尝试：

```
$("td[formula]").each( function() {
  this.html( eval( this.attr("formula").replace(/[a-z][0-9]/g, "\$('#$0').html()") ) );
} ); 
```

**编辑：** 如果您在公式中有 sum 之类的函数，请将它们实现为 javascript 函数，它们也应该可以工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-29T14:17:17.133

即使为时已晚，试试这个插件[https://github.com/xsanisty/jquery-calx](https://github.com/xsanisty/jquery-calx)

我已经在其核心中使用 jison 解析器开发它，它会像你想要的那样解析 data-formula 属性中的公式

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-09T08:20:15.750

[这是我编写的一个 html 表格](http://papou.byethost9.com/notes/hosting/)，其中为每一行计算了一个公式（请参阅 iframe 源代码）。
该公式是用 JavaScript 编写的（尽可能复杂），其中 [abc] 被替换为 id=abc （来自标题的权重）的单元格的值，而 {abc} 被替换为来自同一列的单元格中的文本线。
列是可排序
的 权重可由用户修改，它们会被记录在 cookie 中。

希望这能有所帮助。

# android - 对话框在方向更改时被破坏

> ID：14603435
> 
> 赞同：0
> 
> 时间：2013-01-30T11:58:09.170
> 
> 标签：android

我有两个类，一个适配器和一个活动，我的适配器中有一个对话框，amd iam 在我的活动中调用此适配器，当我在对话框启动时更改方向时，对话框被破坏。我试过了

```
<activity android:name=".activity.SearchAttraction" android:configChanges="keyboardHidden|orientation|screenLayout|screenSize" /> 
```

和

```
 @Override
        public void onConfigurationChanged(Configuration newConfig) {
            super.onConfigurationChanged(newConfig);

        }
   Noting is working, getting error at line `dialog.show();`    

public void performAction(View v, Activity activity) {

        Context myContext = v.getContext();
        PopUpMenu popUpMenu = (PopUpMenu) v.getTag();
        String result = popUpMenu.getMenuName();
        if (result != null
                && result.equalsIgnoreCase(myContext.getResources().getString(
                        R.string.savecurrentlocation))) {
            getCurrentLocation();

        }
        // For Manage Menu..
        else if (result != null
                && result.equalsIgnoreCase(myContext.getResources().getString(
                        R.string.addnewplace))) {
            AttractionData attractionData = new AttractionData();
            createDiloag(attractionData,
                    activity.getResources().getString(R.string.addnewplace));
            this.activity.finish();

        }
        // For About Us..
        else if (result != null
                && result.equalsIgnoreCase(myContext.getResources().getString(
                        R.string.fromaddressbook))) {

            Intent callIntent = new Intent(activity, ProfileActivity.class);
            callIntent.putExtra("ProfileType", Constants.FROM_CONTATCS);
            Log.d(TAG, "start to call On Activity Result Method : ");
            parentActivity.startActivityForResult(callIntent, 100);
            Log.d(TAG, "end to call On Activity Result Method : ");
            this.activity.finish();

        }

        else if (result != null
                && result.equalsIgnoreCase(myContext.getResources().getString(
                        R.string.distancebetween))) {
            AttractionService service = AttractionService
                    .getInstance(parentActivity.getApplicationContext());
            ArrayList<AttractionData> allMenuSearchList = service
                    .getAllAttractions(true, Constants.field, Constants.order);

            if (allMenuSearchList != null && !allMenuSearchList.isEmpty()) {

                dialog.setContentView(R.layout.pickdestination);
                ListView listPlace = (ListView) dialog
                        .findViewById(R.id.listPlace);
                PlaceAdapter placeAdapter = new PlaceAdapter(parentActivity,
                        allMenuSearchList, R.layout.pickcity, dialog,
                        R.string.pickstartingpoint, null);
                listPlace.setAdapter(placeAdapter);
                dialog.show();

            } else {
                Toast.makeText(parentActivity, R.string.nonavigationtolink,
                        Toast.LENGTH_SHORT).show();

            }

            this.activity.finish();
        } 
```

这是我的日志

```
01-30 16:38:31.690: E/WindowManager(2791): android.view.WindowLeaked: Activity org.app.mycity.activity.ABActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@420c3948 that was originally added here
01-30 16:38:31.690: E/WindowManager(2791):  at android.view.ViewRootImpl.<init>(ViewRootImpl.java:412)
01-30 16:38:31.690: E/WindowManager(2791):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:312)
01-30 16:38:31.690: E/WindowManager(2791):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:224)
01-30 16:38:31.690: E/WindowManager(2791):  at android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:149)
01-30 16:38:31.690: E/WindowManager(2791):  at android.view.Window$LocalWindowManager.addView(Window.java:554)
01-30 16:38:31.690: E/WindowManager(2791):  at android.app.Dialog.show(Dialog.java:277)
01-30 16:38:31.690: E/WindowManager(2791):  at org.appright.myneighborhood.adaptor.AddressPopUpAdapter.performAction(AddressPopUpAdapter.java:169)
01-30 16:38:31.690: E/WindowManager(2791):  at org.appright.myneighborhood.adaptor.AddressPopUpAdapter$1.onClick(AddressPopUpAdapter.java:93) 
```

我很震惊，任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:04:58.623

基本假设，

我认为，`onConfigurationChanged(Configuration newConfig)`当您更改方向时不会调用它，只需通过调试或将日志放入其中进行检查。

参数

```
android:configChanges="keyboardHidden|orientation|screenLayout|screenSize" 
```

在 Android 4.0+ 中是不够的

尝试在清单文件`android:configChanges`的**活动标记**中使用其他参数。

就像是，

```
android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize" 
```

试试这个，让我知道会发生什么..

# c# - 如何在 asp.net 中为不同的浏览器定义不同的 css 文件？

> ID：14603437
> 
> 赞同：1
> 
> 时间：2013-01-30T11:58:14.733
> 
> 标签：c#, javascript, asp.net, css, cross-browser

如何为不同的浏览器定义 css 文件？例如，如果用户使用 div 为 width='1000px' 的 firefox，并且如果用户使用 IE 7-9 或更高版本具有 div witdh='800px'，我希望这样。

我使用 ASP.NET 和 C#。如果我想为更多浏览器制作应用程序，我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T12:03:32.153

您想按每个种姓使用条件 css 这可能对您有所帮助

[http://css-tricks.com/how-to-create-an-ie-only-stylesheet/](http://css-tricks.com/how-to-create-an-ie-only-stylesheet/)

# android - Android 上的双启动 onAnimationEnd

> ID：14603441
> 
> 赞同：5
> 
> 时间：2013-01-30T11:58:17.637
> 
> 标签：android, animation

我正在尝试创建一种幻灯片放映。为此，我需要在每个动画结束时随着图像的变化使循环成为动画。但无论出于何种原因，每个动画都会发生两次相同的事件

```
public cPhotoSlide(Activity _activity, DBHelper _helper, int idMenu, cItemViewer _ItemViewer){
    activity        = _activity;
    helper          = _helper;
    ImageManager    = helper.ImageManager;
    ItemViewer      = _ItemViewer;
    cursor          = 0;        
    itemIds         = ChildsItemsToTable(idMenu);
    MainLayout      = (RelativeLayout) activity.findViewById(R.id.fon);
    SliderObj       = activity.getLayoutInflater().inflate(R.layout.photo_slide, MainLayout, true);
    SlideImage      = (ImageView) SliderObj.findViewById(R.id.slide_image);
    SlideImage.setImageBitmap(ImageManager.loadImage(activity.getApplicationContext(),itemIds.get(cursor)));

    animationSlide  = (AnimationSet) AnimationUtils.loadAnimation(activity.getApplicationContext(), R.anim.slide);

    animationSlide.getAnimations().get(1).setAnimationListener(
            new AnimationListener() {
                public void onAnimationStart(Animation animation) {}
                public void onAnimationRepeat(Animation animation) {}
                public void onAnimationEnd(Animation animation) {
                    Log.d(LOG_TAG,"Cursor = "+cursor+"/"+itemIds.size());
                    if (cursor >= itemIds.size()-1) {
                        cursor = 0;
                    } else {
                        cursor += 1;
                    }
                    if (itemIds.get(cursor).content != 0) {
                        SlideImage.setImageBitmap(ImageManager.loadImage(itemIds.get(cursor)));
                    }
                    SlideImage.startAnimation(animationSlide);
                }
            }
    );

    SlideImage.startAnimation(animationSlide);
} 
```

在 XML 中：

```
<set xmlns:android="http://schemas.android.com/apk/res/android"
    android:interpolator="@android:anim/decelerate_interpolator">
    <alpha
        android:duration="250"
        android:fromAlpha="0.0"
        android:toAlpha="1.0">
    </alpha>
    <alpha
        android:startOffset="2000"
        android:duration="250"
        android:fromAlpha="1.0"
        android:toAlpha="0.0">
    </alpha>
</set> 
```

在日志中：

```
01-30 15:52:26.700: D/cPhotoSlide(22301): Cursor = 0/207
01-30 15:52:26.716: D/cPhotoSlide(22301): Cursor = 1/207
01-30 15:52:28.990: D/cPhotoSlide(22301): Cursor = 2/207
01-30 15:52:29.005: D/cPhotoSlide(22301): Cursor = 3/207
01-30 15:52:31.279: D/cPhotoSlide(22301): Cursor = 4/207
01-30 15:52:31.302: D/cPhotoSlide(22301): Cursor = 5/207
01-30 15:52:33.575: D/cPhotoSlide(22301): Cursor = 6/207
01-30 15:52:33.591: D/cPhotoSlide(22301): Cursor = 7/207
01-30 15:52:35.865: D/cPhotoSlide(22301): Cursor = 8/207
01-30 15:52:35.888: D/cPhotoSlide(22301): Cursor = 9/207
01-30 15:52:38.161: D/cPhotoSlide(22301): Cursor = 10/207
01-30 15:52:38.177: D/cPhotoSlide(22301): Cursor = 11/207 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T12:09:04.133

您的动画集由两个动画组成，并且每个动画都在调用您的代码，要解决此问题，您可以这样做：

```
animationSlide.getAnimations().get(1).setAnimationListener(.....); 
```

安装的

```
animationSlide.setAnimationListener(.....); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-04-06T12:55:46.733

我的解决方案是从**.setAnimationListener**更改为**.withEndAction**

例子：

```
 my_button.animate()
     .setDuration(10)
     .scaleX(1)
     .scaleY(1)
     .withEndAction(() -> (your action goes here) ).start(); 
```

> 解释：

.withEndAction() is runnable 在启动后被删除。所以 Runnable 只执行一次，而 Listener 可能会被调用多次。

# x3dom - 将属性附加到 x3dom 对象

> ID：14603444
> 
> 赞同：1
> 
> 时间：2013-01-30T11:58:27.787
> 
> 标签：x3dom

这听起来可能很愚蠢，但我正在寻找一种方法来为 x3dom 对象的每一侧提供 ID，比如说立方体，这样我就可以为每个人的脸创建不同的属性。到目前为止，我看到的唯一方法是“def”函数。如果任何人都可以提供一个简单的立方体样本，那将非常有帮助。提前谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T22:57:25.863

def 用于定义形状以供重用，您可以定义对象然后在场景中重用它。用于制作类似树木的森林。x3dom 网站上的一个示例在这里只是看看源代码。

## [http://x3dom.org/x3dom/example/x3dom_defUse.xhtml](http://x3dom.org/x3dom/example/x3dom_defUse.xhtml)

如果你只使用一个 x3d Box 定义每一面是不可能的，因为它是一个原始形状，盒子上的 def 或 id 将无法影响单个面

如果您使用索引三角形集，它们中的每一个都可以通过这种方式分配一个 id

更多关于他们在这里

## [http://x3dgraphics.com/examples/X3dForWebAuthors/Chapter13-GeometryTrianglesQuadrilaterals/_pages/page03.html](http://x3dgraphics.com/examples/X3dForWebAuthors/Chapter13-GeometryTrianglesQuadrilaterals/_pages/page03.html)

了解如何使用 css id

[http://x3dom.org/docs/dev/tutorial/styling.html](http://x3dom.org/docs/dev/tutorial/styling.html)

这是一个简单的例子，同时使用标签和id的getelement

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link rel="stylesheet" type="text/css" href="http://x3dom.org/x3dom/example/x3dom.css"></link>
<script type="text/javascript" src = "http://x3dom.org/x3dom/example/x3dom.js"></script>
</head>
<body>
<X3D width="500px" height="400px" showLog='true' showStat="true">
<Scene DEF='scene' >
<Shape >
<Box onclick="toggleRendering();" onmouseover="toggleRendering2();" onmouseout="toggleRendering3();" />        
<Appearance><Material id="themat" diffuseColor='0 1 0' /></Appearance>
</Shape>
</Scene>
</X3D>
<script>
var flag = true;

function toggleRendering()
{
flag = !flag;

var aMat = document.getElementById("themat");

if (flag) aMat.diffuseColor = "1 0 0";
else aMat.diffuseColor = "0 0 1";

return false;
}

function toggleRendering2()
{
var mat = document.getElementsByTagName("Material");
var aMat = mat[0];

aMat.diffuseColor = "1 1 1";

return false;
}

function toggleRendering3()
{
var mat = document.getElementsByTagName("Material");
var aMat = mat[0];

aMat.diffuseColor = "0 0 0";

return false;
}
</script>

</body>
</html> 
```

# c# - 使用 `COMFileReference` 而不是 `COMReference` 进行自动构建？

> ID：14603451
> 
> 赞同：3
> 
> 时间：2013-01-30T11:58:38.347
> 
> 标签：c#, jenkins, windows-mobile, continuous-integration, tlbimp

我正在尝试将 Windows Mobile 6.0 C# 项目放在我们的持续集成服务器 (Jenkins) 上。

尝试编译引用 TLB 的项目时出错： `ResolveComReferences`总是返回`TYPE_E_LIBNOTREGISTERED`。即使在不同的开发者之间传递项目，也必须再次添加引用。

我发现了一些关于可以在项目文件中完成的更改，使用`COMFileReference`而不是`COMReference`.

有没有办法在不修改 .csproj 文件的情况下解决这个问题？

# ios - 通过 Application Loader 将 phonegap ios 应用程序上传到 AppStore 时要存档/压缩哪些文件？

> ID：14603456
> 
> 赞同：0
> 
> 时间：2013-01-30T11:58:57.617
> 
> 标签：ios, cordova

我看到两个文件**my-app.dSYM**和**libCordova.a**和一个文件夹**include**，以及我在**Release-iphoneos**文件夹中的应用程序。我应该只存档应用程序吗？
还是我也应该包括其他人？
我以为 .app 文件会包含 phonegap **libCordova.a**但我没有在包内容中找到它，所以我很困惑？
我正在使用cordova-2.2.0。
提前致谢。

# r - 相同高度的堆叠条形图

> ID：14603457
> 
> 赞同：1
> 
> 时间：2013-01-30T11:58:58.190
> 
> 标签：r, graph, plot, ggplot2

我有一组看起来像这样的数据：

```
col1  col2   col3   col4     cr
84  88.242  9.833   4.194     A
94  107.571 10.917  3.708     B
188 240.288 16.917  6.333     A
245 371.005 22.333  10.389    A
114 131.599 9.167   4.25      A
71  100.751 8.167   3         B
118 138.543 11.167  4.278     A
162 203.435 14.667  6.444     B
123 152.032 12.167  4.639     B
115 126.945 11.667  5.056     A
125 134.178 10      4.639     B
119 138.926 9.5     4.222     A
106 129.19  9.833   3.833     A
146 162.319 9.833   4.118     A 
```

我尝试使用简单的`barplot`命令绘制数据，但它没有给出我真正想要的图表。我希望生成一个图，假设每列有 10 个条形图（每个条形图代表一个范围，例如 0-20、20-40 等），`X`轴为`column values`，`Y`轴为`% frequency`(of`A`和`B`) . `A and B stacked`用不同的颜色（请注意，条形的高度必须相同，因为 Y 轴是百分比频率）。

这就是我想要生成的

![google_image_stacked_barplot](../Images/8a612f0666a51457f7f91e8230b7f74d.png)

每列 1 条...知道我应该为此使用什么命令。

（请忽略照片中的坐标轴名称，这只是我在谷歌上找到的一张照片，代表我需要的）

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T12:28:17.487

请尝试以易于复制和粘贴的格式发布您的数据，就像我在下面所做的那样：

```
mydata <- structure(list(col1 = c(84L, 94L, 188L, 245L, 114L, 71L, 118L, 
162L, 123L, 115L, 125L, 119L, 106L, 146L), col2 = c(88.242, 107.571, 
240.288, 371.005, 131.599, 100.751, 138.543, 203.435, 152.032, 
126.945, 134.178, 138.926, 129.19, 162.319), col3 = c(9.833, 
10.917, 16.917, 22.333, 9.167, 8.167, 11.167, 14.667, 12.167, 
11.667, 10, 9.5, 9.833, 9.833), col4 = c(4.194, 3.708, 6.333, 
10.389, 4.25, 3, 4.278, 6.444, 4.639, 5.056, 4.639, 4.222, 3.833, 
4.118), cr = structure(c(1L, 2L, 1L, 1L, 1L, 2L, 1L, 2L, 2L, 
1L, 2L, 1L, 1L, 1L), .Label = c("A", "B"), class = "factor")), .Names = c("col1", 
"col2", "col3", "col4", "cr"), class = "data.frame", row.names = c(NA, 
-14L)) 
```

现在。来解决你的问题。您需要先`aggregate`获取数据，然后将其转换为 a `matrix`，然后将矩阵中的每个值计算为该列中总和的比例（使用`prop.table`）：

```
mydataAgg <- aggregate(cbind(col1, col2, col3, col4) ~ cr, mydata, sum)
mydata2 <- as.matrix(mydata1[-1])
rownames(mydata2) <- mydataAgg[[1]]
mydata2
#   col1     col2    col3   col4
# A 1235 1527.057 110.250 46.673
# B  575  697.967  55.918 22.430
prop.table(mydata2, 2)
#        col1      col2      col3      col4
# A 0.6823204 0.6863103 0.6634851 0.6754121
# B 0.3176796 0.3136897 0.3365149 0.3245879 
```

绘图很容易：

```
barplot(prop.table(mydata2, 2)) 
```

或者，使用颜色：

```
barplot(prop.table(mydata2, 2), col = c("slateblue", "palevioletred")) 
```

![在此处输入图像描述](../Images/2433383dd3b6db143220b9ea6ee2a4d1.png)

嗯。不是最有趣的情节，但我想绝对是一个清晰的比例模式......

* * *

## `lattice`

@Arun`ggplot2`以完整性的名义展示了解决方案，但如果是这种情况，那么我们至少应该`barchart`从“lattice”添加。;)

为此，我们需要转置`prop.table(mydata2, 2)`我们之前计算的输出：

```
barchart(t(prop.table(mydata2, 2)), stack = TRUE, horizontal = FALSE) 
```

结果如下：

![在此处输入图像描述](../Images/328db1d1b72cec943cf277b0035d7a45.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-30T13:30:57.100

为了完整起见，这里是 ggplot2 解决方案（使用@AnandaMahto 的数据，感谢您的`dput`输出）。我`melt`先用，再`data.table`用来计算和获取比例（基本上都是内部计算）：

```
require(ggplot2)
require(reshape2)
require(data.table)

df.m <- melt(df, names(df)[5], names(df)[1:4])
dt <- data.table(df.m)
setkey(dt, "cr", "variable")
dt.m <- dt[, list(count = sum(value)), by=list(cr,variable)]
dt.m <- dt.m[, list(cr=cr, prop = count/sum(count)), by=variable]
p <- ggplot(data = dt.m, aes(factor(variable))) + 
         geom_bar(aes(group = cr, weights=prop, fill=cr))
p <- p + scale_fill_brewer(palette = "Set1")
p 
```

![ggplot2_barplot_stacked](../Images/e32e71f8e6dc0000a52abaa17a200342.png)

# python - 在 Django 中使用 `settings/dev.py` 而不是 `settings.py` 运行独立脚本执行模型查询

> ID：14603458
> 
> 赞同：5
> 
> 时间：2013-01-30T11:59:00.250
> 
> 标签：python, django, django-settings

请注意以下 Django(1.4.3) 项目中的`settings/dev.py`而不是一个`settings.py`文件和`script.py`in ：`my_app`

```
.
├── my_project
│   ├── my_app
│   │   ├── __init__.py
│   │   ├── models.py
│   │   ├── tests.py
│   │   ├── views.py
│   │   └── script.py
│   ├── __init__.py
│   ├── settings
│   │   ├── dev.py
│   │   ├── __init__.py
│   │   └── prod.py
│   ├── urls.py
│   └── wsgi.py
├── manage.py
└── requirements.txt 
```

当我只有**一个`settings.py`文件代替*设置文件夹*时，我能够运行以下脚本而没有任何错误**：

**脚本.py：**

```
###################################################################
# set up for making it possible to run a model query from my script. 
###################################################################
import os
import sys
sys.path.append(os.path.abspath(os.path.join(os.path.dirname(__file__), os.path.pardir)))
from django.core.management import setup_environ
import settings
setup_environ(settings)
####################################################################  
from my_app.models import MyModel

all_entries = MyModel.objects.all() 
```

顺便说一句，我从[本文](http://www.b-list.org/weblog/2007/sep/22/standalone-django-scripts/)的第二种方法中得到了这一点，我的设置要长几行，因为我`script.py`的设置在`my_app`文件夹中，而不是直接在`my_project`文件夹下。

因为我现在**正在使用我将脚本中设置的最后两行更改`settings/dev.py instead`为`settings.py`**以下内容：

```
import settings.dev
import setup_environ(settings.dev) 
```

但是当我**现在运行我的脚本**时，我得到了这个错误：

```
Traceback (most recent call last):
  File "my_script.py", line 12, in <module>
    all_entries = MyModel.objects.all()
  File "/home/my_username/.virtualenvs/my_project/local/lib/python2.7/site-packages/django/db/models/manager.py", line 131, in get
    return self.get_query_set().get(*args, **kwargs)
  File "/home/my_username/.virtualenvs/my_project/local/lib/python2.7/site-packages/django/db/models/query.py", line 358, in get
    clone = self.filter(*args, **kwargs)
  File "/home/my_username/.virtualenvs/my_project/local/lib/python2.7/site-packages/django/db/models/query.py", line 624, in filter
    return self._filter_or_exclude(False, *args, **kwargs)
  File "/home/my_username/.virtualenvs/my_project/local/lib/python2.7/site-packages/django/db/models/query.py", line 642, in _filter_or_exclude
    clone.query.add_q(Q(*args, **kwargs))
  File "/home/my_username/.virtualenvs/my_project/local/lib/python2.7/site-packages/django/db/models/sql/query.py", line 1250, in add_q
    can_reuse=used_aliases, force_having=force_having)
  File "/home/my_username/.virtualenvs/my_project/local/lib/python2.7/site-packages/django/db/models/sql/query.py", line 1122, in add_filter
    process_extras=process_extras)
  File "/home/my_username/.virtualenvs/my_project/local/lib/python2.7/site-packages/django/db/models/sql/query.py", line 1304, in setup_joins
    field, model, direct, m2m = opts.get_field_by_name(name)
  File "/home/my_username/.virtualenvs/my_project/local/lib/python2.7/site-packages/django/db/models/options.py", line 311, in get_field_by_name
    cache = self.init_name_map()
  File "/home/my_username/.virtualenvs/my_project/local/lib/python2.7/site-packages/django/db/models/options.py", line 341, in init_name_map
    for f, model in self.get_all_related_m2m_objects_with_model():
  File "/home/my_username/.virtualenvs/my_project/local/lib/python2.7/site-packages/django/db/models/options.py", line 429, in get_all_related_m2m_objects_with_model
    cache = self._fill_related_many_to_many_cache()
  File "/home/my_username/.virtualenvs/my_project/local/lib/python2.7/site-packages/django/db/models/options.py", line 443, in _fill_related_many_to_many_cache
    for klass in get_models(only_installed=False):
  File "/home/my_username/.virtualenvs/my_project/local/lib/python2.7/site-packages/django/db/models/loading.py", line 181, in get_models
    self._populate()
  File "/home/my_username/.virtualenvs/my_project/local/lib/python2.7/site-packages/django/db/models/loading.py", line 64, in _populate
    self.load_app(app_name, True)
  File "/home/my_username/.virtualenvs/my_project/local/lib/python2.7/site-packages/django/db/models/loading.py", line 86, in load_app
    app_module = import_module(app_name)
  File "/home/my_username/.virtualenvs/my_project/local/lib/python2.7/site-packages/django/utils/importlib.py", line 35, in import_module
    __import__(name)
ImportError: No module named my_project.my_app 
```

为什么会出现这个错误？**如何使用而不是****在 Django 中运行我的脚本？`settings/dev.py``settings.py`**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-30T12:06:38.943

如果您只想在 django 环境中运行脚本，那么完成此操作的最简单方法是创建一个`./manage.py`子命令，如下所示

```
from django.core.management.base import BaseCommand
from my_app.models import MyModel

class Command(BaseCommand):
    help = 'runs your code in the django environment'

    def handle(self, *args, **options):
        all_entries = MyModel.objects.all()
        for entry in all_entries:
            self.stdout.write('entry "%s"' % entry) 
```

[文档](https://docs.djangoproject.com/en/dev/howto/custom-management-commands/)对解释这一点很有帮助。

但是，您可以指定要使用的设置文件运行

```
$ django-admin.py runserver --settings=settings.dev 
```

它将使用其中的设置运行测试服务器，`dev`但我担心您的问题比简单的问题更深层次。我不建议更改`manage.py`文件，因为这会导致不一致和未来的麻烦。

另请注意，`dev.py`如果您要这样做，它应该是一个完整的设置文件。我个人会推荐这样的结构：

```
|-settings
|    |- __init__.py
|    |- base.py
|    |- dev.py
|    |- prod.py 
```

并保留您的所有常规设置，并将您的etc`base.py`的第一行更改为类似`dev.py`

```
# settings/dev.py
from .base import *

DEBUG = True
... 
```

### 编辑

如果您只是想测试一下，为什么不尝试

```
$ ./manage.py shell 
```

或使用您的开发设置

```
$ django-admin.py shell --settings=settings.dev 
```

因为这将为您设置所有操作系统环境变量，`settings.py`然后您可以测试/调试

```
>>> from my_app.models import MyModel
>>> all_entries = MyModel.objects.all()
>>> for entry in all_entries:
...   print entry 
```

# ruby - Ruby nomethoderror "each" 用于 nil 类

> ID：14603459
> 
> 赞同：1
> 
> 时间：2013-01-30T11:59:00.837
> 
> 标签：ruby

我有一些返回错误的代码，我不明白为什么。我是 Ruby 的新手，但我觉得我到了那里：

```
line 27: NoMethodError "each" for NilClass 
```

我正在使用的代码如下：

```
require 'rubygems'
require 'nokogiri'
require 'sqlite3'

FIELDS = [['cityselect', 'VARCHAR'],['match', 'VARCHAR'], ['num_phone', 'NUMERIC'], ['name', 'VARCHAR'],['address', 'VARCHAR'] ]

DIV_ID = "#dgrSearch" 
FILE_O = File.open('hold-data/directory-tel.txt', 'w')
FILE_O.puts( FIELDS.map{|f| f[0]}.join("\t") )

DB_NAME = "hold-data/directory-tel.sqlite"
File.delete(DB_NAME) if File.exists?DB_NAME
DATAB = SQLite3:Database.new( DB_NAME )

TABLE = "records_telephone"
DB_INSERT_STATEMENT = "INSERT into #{TABLE} values
(#{FIELDS.map{'?'}.join(',')})"

DATAB.execute "CREATE TABLE #{TABLE}(#{FIELDS.map{|f| "`#{f[0]}` #{f[1]}"}.join(', ')});"
FIELDS.each do |fn| 
DATAB.execute "CREATE INDEX #{fn[2]} ON #{TABLE}(#{fn[0]})" unless fn[2].nil?
end

Dir.glob("hold-data/pages/*.html").reject{|f| f =~ /All match/}.each do |fname|
meta_stuff = File.basename(fname, '.html').split('--')
page = Nokogiri::HTML(open(fname))

page.css("#{DIV_ID} tr")[1..-2].each do |tr| # this is line #27
data_tds = tr.css('td').map{ |td| 
td.text.gsub(/[$,](?=\d)/, '').gsub(/\302\240|\s/, ' ').strip
}

row_data = meta_stuff + data_tds
FILE_O.puts( data_row.join("\t")) 
DATAB.execute(DB_INSERT_STATEMENT, row_data)

end 
end

FILE_O.close 
```

谁能看到我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T12:00:28.843

如果您告诉我们错误发生在**哪一行**，下次会很有用。

从它的外观来看，这里只有 1 行您调用的表达式`each`可能返回**nil**：

```
page.css("#{DIV_ID} tr")[1..-2].each do 
```

如果为**空**，请记住`the_array[1..-2]`将返回**nil**。`the_array`

 **因此`page.css("#{DIV_ID} tr")`可能会返回一个空数组，因此会出现错误。

如果没有预料到这种行为，我会考虑调查为什么会发生这种情况，或者在调用 它**之前检查数组是否为空**`[1..-2]`（见下文）。只是一个建议。

```
if page.css("#{DIV_ID} tr").empty?
   #empty array
else
   #not empty
end 
```**

# cucumber - 如何在 cucumber-jvm 中管理过去和现在时态

> ID：14603460
> 
> 赞同：0
> 
> 时间：2013-01-30T11:59:05.423
> 
> 标签：cucumber, bdd, cucumber-jvm

使用 cucumber-jvm（或任何其他 BDD 工具），如何管理过去和现在文本的使用？

例如：

```
Given that I have logged in as "admin"
And I have navigated to the "editor" page
When I drag an "image component" to my page
Then I see it appear 
```

这很好，但是在进一步的功能中，这成为了前兆：

```
Background: 
  Given that I have logged in as "admin"
  And I am editing a page
  And I have added an "image component" to my page 
```

...

所以这些动作实际上是相同的，但是使用了两组域语言。如何管理这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T20:53:36.013

假设操作相同，您可以在步骤中使用非捕获组：

```
And /^I (?:drag|have added) an "image component" to my page$/ do
  # code
end 
```

# mysql - 无法读取函数 odbc - 星号

> ID：14603462
> 
> 赞同：0
> 
> 时间：2013-01-30T11:59:07.520
> 
> 标签：mysql, odbc, sip, asterisk

我正在从软电话获取号码，然后插入 mysql db。所有驱动程序和东西都可以。我配置它们。我可以选择/轮询我的所有数据。但我无法插入我的新数据。我的 func_odbc.conf 喜欢这样；

```
[ADDX];

dsn=asterisk
writesql = INSERT INTO aktarma (musterino,aktartel) values (${VAL1},${VAL2}) 
```

我的 extensions.conf 是；

```
exten=>_X.,n(sqlekle),SET(a=${ODBC_ADDX(${digit},${aktartel})}) 
```

我检查了我的变量 ${digit} 和 ${aktartel} 是正确的，它给出了错误；

```
[Jan 30 05:43:21] ERROR[4601]: pbx.c:3380 ast_func_read: Function ODBC_ADDX cannot be read
-- Executing [XXXXXXXXX@phones:30] Set("SIP/out-0000001a", "a=") in new stack 
```

那么有什么不对啦。我找不到解决这个问题的方法非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-06T22:06:28.763

已经晚了一年，但我会回答这个问题，以帮助像我一样来自搜索领域的任何人。

在您的 func_odbc.conf 中，您正在尝试编写`VAL1`，`VAL2`但实际上您想使用`ARG1`and `ARG2`; 在随后的拨号计划中，`VAL1`并且`VAL2`没有设置（它们会在 之后`=`）

```
[ADDX]
dsn=asterisk
writesql = INSERT INTO aktarma (musterino,aktartel) VALUES (${ARG1},${ARG2}) 
```

还有一点要注意，转义和引用您的 SQL 输入始终是一种好习惯；你永远不知道什么时候某个混蛋会在他的 DTMF 键盘上按“A”，只是为了让你保持警觉！在您的查询中使用`'${SQL_ESC(${ARG1})}'`：

```
INSERT INTO aktarma (musterino, aktartel) VALUES ('${SQL_ESC(${ARG1})}', '${SQL_ESC(${ARG2})}') 
```

继续您的拨号方案：您试图从函数中读取一个值，该函数只是一个写入函数。即使您没有读取值，您仍然需要`=`在 Set 命令中添加一个以避免错误，但它应该在最后。此外，该函数不需要被包裹起来`${}`进行编写。

```
exten=>_X.,n(sqlekle),Set(ODBC_ADDX(${digit},${aktartel})=) 
```

* * *

关于 ARG 与 VAL，这是一个同时使用两者的示例：

```
[ADDX]
dsn=asterisk
writesql = INSERT INTO aktarma SET ${ARG1}='${VAL1}', ${ARG2}='${VAL2}' 
```

我们同时使用 VAL 和 ARG；然后把它放在拨号计划中：

```
exten=>_X.,n(sqlekle),Set(ODBC_ADDX(musterino,aktartel)=${digit},${aktartel}) 
```

所以`ARGx`作为参数传递给函数，而`VALx`在调用的右侧`Set`。

关于它如何工作的文档很少；希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T15:30:49.810

您在分配的左侧使用了只写函数。

```
[PRESENCE]
dsn=mydb
writesql=UPDATE `locationtable` SET `location`=${SQL_ESC(${VAL1})}` WHERE `username`='${SQL_ESC(${ARG1})}' 
```

extensions.conf：

```
exten => 1234,1,NoOp(Set and read location)
exten => 1234,n,Set(ODBC_PRESENCE(${EXTEN})=office) 
```

# arrays - 使用 Bash 对数组中的日期进行排序

> ID：14603463
> 
> 赞同：0
> 
> 时间：2013-01-30T11:59:09.513
> 
> 标签：arrays, bash, shell, sorting

我正在为一些自动化编写一个 bash 脚本，但我似乎找不到对包含日期的数组进行排序的最佳方法。

一个示例数组：

```
dates=('180212', '110112', '040312') 
```

输出应如下所示：

```
110112
180212
040312 
```

我尝试过使用`sort`，但它只是将其排序为整数。

任何人都可以建议使用的最佳方法吗？它也不一定要排序，我只需要数组中最旧的日期。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T12:08:44.570

您可以交换年份和日期数字，并用于`sort`对结果值进行排序。然后取最旧的值并撤消交换。您可以`sed`像这样使用来进行交换：

```
echo 112233 | sed 's/\(..\)\(..\)\(..\)/\3\2\1/' 
```

这将前两位与后两位数字交换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T12:15:32.947

示例 bash 脚本：

```
dates="180212 110112 040312"
min="999999"
for d in $dates
do
    rdate="${d:4}${d:2:2}${d:0:2}"
    if [ "$min" -gt "$rdate" ]
    then
        min=$rdate
    fi
done

min="${min:4}${min:2:2}${min:0:2}"
echo $min 
```

仅适用于 ddmmyy 日期。这个想法是以 yymmdd 格式反转日期，然后找到最小值。在 bash 中完成这项工作。虽然不漂亮。

# javascript - 动态应用图像 src 在 FF 和 IE 中不起作用

> ID：14603470
> 
> 赞同：0
> 
> 时间：2013-01-30T11:59:27.740
> 
> 标签：javascript, jquery

在 FF、IE 和 chrome 中尝试 w3schools 中的以下代码。观察行为。在 chrome 中，图像正在重新加载。但在 IE 和 FF 中它不起作用。

```
<!DOCTYPE html>
<html>
<head>
<script>
    function changeSrc()
    {
        document.getElementById("myImage").src="some captcha url";
    }
</script>
</head>
<body>
<img id="myImage" src="compman.gif" width="107" height="98">
<br><br>
<a href="#" onclick="changeSrc();">reload</a>
</body>
</html> 
```

谢谢，斯拉凡提。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:08:52.503

这应该做你需要的。不要忘记在脚本中包含最新版本的 jQuery：

```
$(function () {
//REFRESH CAPTHCA IMAGE
$("div#refresh").on("click", function()
    {
        var newSrc= "some captcha url";
        $("#myImage").attr("src",newSrc);
    });

  });

    <img id="myImage" src="compman.gif" width="107" height="98">

    <div id="refresh"> Refresh </div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T12:02:48.483

尝试关闭最后的报价并`;`在最后一个之前添加 ,`}`

```
function changeSrc()  
{
    document.getElementById("myImage").src="some captcha url";
} 
```

# .net - 应用程序因错误模块“PresentationFramework.ni.dll”而崩溃

> ID：14603471
> 
> 赞同：0
> 
> 时间：2013-01-30T11:59:28.000
> 
> 标签：.net, wpf, .net-4.0, crash

> **可能重复：**
> [错误模块名称：PresentationFramework.ni.dll](https://stackoverflow.com/questions/13396688/faulting-module-name-presentationframework-ni-dll)

我有一个客户，我的应用程序不时崩溃。我现在在 Windows 事件日志中找到了闲置条目：

> ```
> Name der fehlerhaften Anwendung: proconact.exe, Version: 1.0.0.1359, Zeitstempel: 0x5108214a
> Name des fehlerhaften Moduls: PresentationFramework.ni.dll, Version: 4.0.30319.550, Zeitstempel: 0x4f17f745
> Ausnahmecode: 0xc00000fd
> Fehleroffset: 0x002eed3b
> ID des fehlerhaften Prozesses: 0xb60
> Startzeit der fehlerhaften Anwendung: 0x01cdfecc60631116
> Pfad der fehlerhaften Anwendung: C:\proconact_sck\proconact.exe
> Pfad des fehlerhaften Moduls: C:\Windows\assembly\NativeImages_v4.0.30319_32\PresentationFramewo#\d4417b9c53da6268abb1c7c2154ab37d\PresentationFramework.ni.dll
> Berichtskennung: e9c9fefe-6acb-11e2-b3e2-18a9051d2feb 
> ```

我想知道错误模块“PresentationFramework.ni.dll”的名称

有人可以帮助我，这可能是什么原因？

# python - Firefox 不会使用 Selenium 网络驱动程序“驱动”

> ID：14603478
> 
> 赞同：2
> 
> 时间：2013-01-30T12:00:04.103
> 
> 标签：python, firefox, selenium, webdriver

我以前在这台机器上使用过带有 Webdriver 的 Firefox，但突然间，当我使用任何使用 Firefox 作为驱动程序的代码时，Firefox 会打开并只是呆呆地呆在那里。绝对没有加载，我的程序挂起，直到我关闭窗口，此时它引发“浏览器未打开”错误。

尝试重新安装。Chrome/IE 驱动程序可以工作，但我真的不想使用它们。

例如，包括一张我使用任何代码时发生的确切情况的图片

```
from selenium import webdriver
from selenium.webdriver.common.keys import Keys

driver = webdriver.Firefox()
url = "http://google.com" 
driver.get(url) 
```

即便如此，我也一无所获。 ![在此处输入图像描述](../Images/cfbbb6366630322b7f52864efd7e576a.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T12:07:51.627

升级到硒版本 2.29.0

```
pip install -U selenium 
```

以前的版本中有一个错误修复

# jquery - 隐藏 jquery UI 引导选项卡

> ID：14603480
> 
> 赞同：9
> 
> 时间：2013-01-30T12:00:09.727
> 
> 标签：jquery, twitter-bootstrap

有什么方法可以隐藏 Jquery UI 引导选项卡我在下面编写了代码以显示特定选项卡

```
 $('#myTab a:last').tab('show') 
```

所以我尝试使用下面的代码来隐藏选项卡，但它给出了它没有方法隐藏的错误

```
 $('#myTab a:last').tab('hide') 
```

我在我的 html 中以下列方式声明了标签

```
 <ul class="nav nav-tabs" id="myTab">
        <li><a href="#product" data-toggle="tab">Company</a></li>
        <li><a href="#version" data-toggle="tab">Employee</a></li>
  </ul> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-30T12:10:04.437

你试过了吗`$('#myTab a:last').hide()` ？ `$('#myTab a:first').hide()`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-07-03T16:20:45.343

或者，您可以简单地`active`从元素中删除该类：

```
$('.nav-tabs li.active').removeClass('active');
$('.tab-content div.active').removeClass('active'); 
```

这样你就不会有任何仍然标记为的隐藏元素`active`，这可能会干扰其他 JS 或 CSS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-27T06:18:41.617

无需特别隐藏选项卡，您只需显示您想要的选项卡，其他选项卡将自动隐藏。您可以使用 ：

```
$("a[href='#tabToBeShown']").tab("show"); 
```

# python - 类级别变量上的 Python 装饰器作为反射的元数据？

> ID：14603481
> 
> 赞同：4
> 
> 时间：2013-01-30T12:00:10.080
> 
> 标签：python, reflection, decorator, python-decorators

我有一个 python 类（实际上它是一个 Google App Engine 模型），它看起来像这样：

```
class MyClass(ParentClass):
    variable_one = PropertyClass(...)
    variable_two = PropertyClass(...) 
```

我打算建立一个系统来描述这个类的两个实例之间的差异，这些实例代表不同时间点实体的两个版本。最终它会产生一个像

```
"Variable One changed from 'foo' to 'bar', Variable Two changed from empty to 'baz'" 
```

所以，我需要在某个地方存储“variable_one”应该显示为“Variable One”等事实。来自 C# 背景，我的直觉是使用属性，例如：

```
class MyClass : ParentClass
{
    [DisplayName("Variable One")]
    public PropertyClass variable_one;

    [DisplayName("Variable Two")]
    public PropertyClass variable_two;
} 
```

起初，python 等价物似乎是装饰器：

```
class MyClass(ParentClass):
    @display_name("Variable One")
    variable_one = PropertyClass(...)

    @display_name("Variable Two")
    variable_two = PropertyClass(...) 
```

但是，装饰器实际上是在进行函数柯里化，并且由于类变量定义只是将 PropertyClass 的一个实例分配给 variable_one 和 variable_two 它看起来不像是有效的 python。无论如何，我不确定我会怎么写。

一种选择似乎是扩展 PropertyClass ...

```
class MyClass(ParentClass):
    variable_one = MyPropertyClass("Variable One", ...)
    variable_two = MyPropertyClass("Variable Two", ...) 
```

但是有几个不同的属性类被使用，我想为它们添加一个共同的行为，所以这似乎太费力了。

我想我可以定义一个字典：

```
class MyClass(ParentClass):
    variable_one = PropertyClass(...)
    variable_two = PropertyClass(...)
    variable_display_names = {
        "variable_one": "Variable One",
        "variable_two": "Variable Two"
    } 
```

但我希望听到一些更有经验的pythoners关于实现这一目标的最佳最pythonic方式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T12:51:08.833

数据存储属性类是描述符（如 python`@property`装饰器），但作为未实现的自定义类，`__setattr__`您可以在这些对象上设置任意属性：

```
 class MyClass(ParentClass):
     variable_one = PropertyClass(...)
     variable_one.display_name = "Variable One"

     variable_two = PropertyClass(...)
     variable_two.display_name = "Variable Two" 
```

这可以推广到一个装饰器：

```
def display_name(dispname):
    def decorate_with_display_name(prop):
        prop.display_name = dispname
        return prop
    return decorate_with_display_name 
```

只要您通过类（而不是实例）访问属性，您就可以再次检索这些值；例如，给定一个您可以做`print type(instance).variable_two.display_name`的实例。

# activiti - 如何在 Activiti Modeler 中添加自定义任务

> ID：14603484
> 
> 赞同：0
> 
> 时间：2013-01-30T12:00:18.643
> 
> 标签：activiti

如何在 Activiti Modeler 中添加自定义项？activiti 建模器链接[http://activiti.org/userguide/index.html#activitiModeler](http://activiti.org/userguide/index.html#activitiModeler)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T10:57:10.417

Activiti Modeler 是 Signavio 的分支。所以你真正要问的是如何定制Signavio Modeler。您可以通过在 Modeler 中操作 Json 文件来实现。也许[这](http://forums.activiti.org/en/viewtopic.php?f=6&t=2715)会给你一个方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-18T17:01:09.350

如果您将 activiti 与*jenkins*一起使用，那么创建和编辑工作流程将非常容易。*只需在Jenkins*中创建一个新的 BPMN 工作流模型，然后打开 Activiti Explorer 并单击流程。你会在activiti中看到这个新创建的工作流模型。在右上角的面板上会有一个选项“将其转换为可编辑模型”点击它就可以了！现在您可以根据您的要求进行编辑！

# java - Java String：创建了多少个对象

> ID：14603485
> 
> 赞同：-3
> 
> 时间：2013-01-30T12:00:24.620
> 
> 标签：java

我在问一个重复的问题，但我在 Stack Overflow 上解决了所有类似的问题，但我无法理解。

我的代码是：

```
String s1 = "a";
String s2 = "b";
String s3 = s1 + s2; 
```

1\. 创建了多少个对象？2\. 我们怎么能说对象已经存在于 String Table 中？

-**真的很抱歉重复，但我必须知道正确的答案**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T12:03:02.917

三个对象将在`String`池中创建。

```
String s1 = "a"; // 1st Object
String s2 = "b"; // 2nd Object
String s3 = s1 + s2; // "ab" 3rd Object. 
```

如果字符串在池中可用，那么它会自动指向该对象而不是创建新对象。

```
String str1 = "abc";
String str2 = "abc"; 
```

将有一个“abc”，`string`str1 和 str2 都指向同一个“abc”。万一发生任何修改`str2 +="d";`，它将在池中创建一个新对象，`"abcd"`因为一旦创建了对象，我们就无法更改它的值。

注意：`String`是不可变的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T12:07:33.327

这里创建了 3 个对象。

前两个对象很明显：

```
String s1 = "a"; // First
String s2 = "b"; // Second 
```

第三个对象是一个新对象

```
String s3 = "a" + "b"; // Third 
```

`s1`它与它们的唯一关系`s2`是它包含与它们相同的字母，但它是一个完全独立的对象。它基本上是这样构建的：

```
String s3 = new String(s1.toString() + s2.toString()); 
```

即使 2 个字符串包含相同的字符序列，它们也不是相同的字符串。

```
String s4 = "foo";
String s5 = "foo"; 
```

**编辑**

```
s4 == s5;       // Evaluates to true
s4.equals(s5);  // Evaluates to true 
```

由于字符串池，上述两者都将评估为 true，但仍然是单独的对象。他们使用享元设计模式来节省内存。

另一方面：

```
String s6 = new String("foo");
String s7 = new String("foo");

s6 == s7;      // Evaluates to false
s6.equals(s7); // Evaluates to true 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T12:08:38.803

在上面的示例中将创建三个对象。由于 String 是不可变的，每次您尝试更改字符串的值时，都会创建一个新对象。

```
String s1 = "a" // 1st object
String s2 = "b" // 2nd object
String s3 = s1+ s2 // in this case a new onject with value "ab" will be created 
```

# wordpress - Wordpress 嵌套循环：循环两次而不是一次

> ID：14603486
> 
> 赞同：0
> 
> 时间：2013-01-30T12:00:24.547
> 
> 标签：wordpress, loops, nested, duplicates

我正在努力实现这一目标

作者.php

*   作者循环：

    *   帖子循环

    *   爱好循环

    *   调度循环

author.php 模板文件有作者循环。我需要为作者循环一些自定义帖子类型，然后将它们放入自己的选项卡中。

但是，当我在 Authors 循环中放入查询时，它会循环两次，我不知道为什么。

这是我正在使用的循环：

```
 <?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>

            <div class="twelvecol first clearfix"><hr />

              <?php $looped = new WP_Query(array('post_type' => 'post', 'posts_per_page' => -1 ));
               if ( $looped->have_posts() ) { 
                   while ( $looped->have_posts() ) { 
                       $looped->the_post();
                       the_title();the_content();
                   }
               }
               wp_reset_postdata(); ?>
           </div> 
```

我是否错过了可以阻止它循环两次的东西？

* * *

### 笔记：

我必须在 AUTHORS LOOP 中有这些循环，因为它们是特定于该作者的，我不希望 STEVE 的帖子出现在 HARRY 的页面等

*   在整个网站生命周期中可能会添加和删除多个作者，因此它必须是动态的，我可以在查询中包含一个作者

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T09:53:03.637

经过多次讨论并盯着屏幕，似乎主 Author Loop 包含一个 WHILE，然后在嵌套循环中，查询也有一段时间。

现在从我收集的信息来看，第一个 WHILE 询问作者创建了多少帖子，然后循环了很多次，

嵌套循环中的 WHILE 行为正常。

所以我最终得到了嵌套循环中的帖子数量，由它的父级循环...

如果作者发布了 5 个帖子，则嵌套循环将有 5 个副本。

```
<?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?> 
```

应该：

```
<?php if ( have_posts() ): the_post(); ?> 
```

希望这可以帮助人们在未来解决这个问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T12:29:24.753

你不能像这样嵌套循环，你需要在`WP_Qwery`.
检查`$wp_query`当前作者的全局并将其包含在 WP_Query 中。

这应该足以让你开始。
如果您有任何问题或需要更多信息，请询问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T12:45:16.703

您根本不需要外部循环（循环 = 不止一次迭代）。只需将[`author`](http://codex.wordpress.org/Class_Reference/WP_Query#Author_Parameters)ID 作为参数添加到查询中即可。

# c# - 访问接口的方法

> ID：14603490
> 
> 赞同：1
> 
> 时间：2013-01-30T12:00:30.573
> 
> 标签：c#, interface

我开始使用接口，但我真的不明白......情况是这样的：有一个 web 控件（称为 TableControl），它使用转发器显示项目表。TableControl 还包括一行实现分页的游标（第一个、上一个、下一个、最后一个）。游标是从另一个 webControl (CursorControl) 导入的。TableControl 还实现了一个接口，我在其中声明了一些方法来进行分页。

*) 光标控制

```
 public class CursorControl 
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }

    private string cursor_value;

    public string CursorValue
    {
        get { return cursor_value; }
        set { cursor_value = value; }
    }

    // Called when cursor is clicked.
    protected void lnkClick_Command(object sender, CommandEventArgs e)
    {
        cursor_value = e.CommandArgument.ToString();
    }

} 
```

*) 表格控件

```
public partial class TableControl : System.Web.UI.UserControl, IPageableControl
{
    protected void Page_Load(object sender, EventArgs e)
    {
        if(isPostBack)
         {
               currentPage = CursorControl.CursorValue;
               OtherPage(currentPage);
          }
    }

    public int currentPage;

    void IPageableControl.OtherPage(int i)
    {
        if (i == 0)
            currentPage = 2;
        else if (i == 1 || i == (-1))
            currentPage += i;
        else
            currentPage = 25;

    }

 } 
```

*） 界面

```
 public interface IPageableControl
{
    // Summary:
    //     Go to page
    void OtherPage(int i);
} 
```

当用户单击光标时，我将值传递给 TableControl，它应该启动方法 OtherPage。但它不起作用，它说 OtherPage 不在当前上下文中。

如何访问接口的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T12:04:34.290

你需要做这一行：

```
void IPageableControl.OtherPage(int i) 
```

进入这个：

```
void OtherPage(int i) 
```

第一个是显式的，第二个是隐式的。（[有什么区别？](https://stackoverflow.com/questions/143405/c-interfaces-implicit-and-explicit-implementation)）

*   当您明确提及接口类型时，您需要将类型转换为它才能访问这些方法。（[为什么要显式实现接口？](https://stackoverflow.com/questions/4103300/c-sharp-why-implement-interface-explicitly)）
*   当您隐式实现时，您只需将其视为常规方法（实现完全相同，编译器将确保它存在，因此您不必担心它。**在代码中您不会看到任何区别。** *如果您确实想查看（这有帮助），您可以获得一个插件。ReSharper 做得很好*）。

* * *

顺便说一句，在 Visual Studio 上，当你想实现一个接口时，在接口名称上按`Ctrl`+ `.`（点），它会询问你如何实现它。它使它变得不那么乏味，因为您不必自己输入签名（方法名称）。

![Visual Studio 实现接口](../Images/1af16546758b0bfbf29fb7ba2df20459.png)

# fitnesse - 如何在 FitNesse + DbFit 中获取 sql 查询的输出？

> ID：14603496
> 
> 赞同：4
> 
> 时间：2013-01-30T12:00:54.823
> 
> 标签：fitnesse, dbfit

我正在尝试使用 ie 在 DBfit 中获取 sql 查询输出，`!|Execute|select * from abc|`但不知道它将如何在 DBfit 中显示。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-09T08:13:18.290

我认为您正在寻找`Inspect Query`表格（您可以在[此处](http://dbfit.github.com/dbfit/docs/reference.html#inspect)找到有关它的参考文档）。

`!|Inspect Query|select * from abc|`

执行时，这将打印查询的结果集。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-31T12:40:43.723

首先，执行夹具通常用于不返回数据的操作，例如：

```
!|Execute|insert into tablename values (…)| 
```

或者

```
!|Execute|update tablename st... where...| 
```

然而，即使是一些非数据动作也有更具体的命令。上述更新可以通过以下方式完成，例如：

```
!|Update|tablename               |
|field_to_change=|field_to_select|
|new value       |matching value | 
```

要返回数据，请使用查询夹具

```
!|query|select Id, BatchNum from tablename|
|Id    |BatchNum?                         |
|1     |>>Bat1                            |
|2     |<<Bat1                            | 
```

如图所示，只需将您的字段名称放在夹具下方的行中，然后将您的数据行放在其下方。

# php - 浏览器关闭后wordpress删除cookies

> ID：14603504
> 
> 赞同：0
> 
> 时间：2013-01-30T12:01:16.533
> 
> 标签：php, wordpress, cookies

我只想在浏览器选项卡关闭后删除我的 wordpress cookie，

在 pluggable.php 文件第 653 行：

if ( $remember ) { $expiration = $expire = time() + apply_filters('auth_cookie_expiration', 1209600, $user_id, $remember); } else { $expiration = time() + apply_filters('auth_cookie_expiration', 500, $user_id, $remember); $过期 = 0;

我将所有我喜欢的东西都更改为 $expirtation 为 "" 或 1
并过期为 ""

但它在 wordpress 上没有任何作用
我什至尝试调用 wp_clear_auth_cookie() 函数 onunload 事件但它不起作用

浏览器/标签关闭后我应该怎么做才能删除cookie？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:06:15.047

我不知道 wordpress 但在 php 中，如果您将过期时间设置为 0，cookie 将在**浏览器关闭**后销毁（而不是标签关闭）。所以尝试设置

```
$expirtation = 0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T12:07:21.620

会话通常用于此目的。根据维基百科，当没有设置过期日期时，当用户关闭浏览器时，cookie 会被清除。

cookie 设置者可以指定删除日期，在这种情况下，cookie 将在该日期被删除。如果 cookie 设置器未指定日期，则一旦用户退出其浏览器，cookie 就会被删除。

浏览器上的更多[清除 cookie 关闭](https://stackoverflow.com/questions/1783302/clear-cookies-on-browser-close)

# jakarta-ee - 如何为多个用户保留待处理的更改

> ID：14603506
> 
> 赞同：0
> 
> 时间：2013-01-30T12:01:18.680
> 
> 标签：jakarta-ee, ejb, persistence

我正在研究 Java 上的企业应用程序。对于与数据库的交互，我使用 EJB。

数据库中有很多表，其中的值可以通过 web ui 进行编辑。目前，当用户进行一些更改时，这些更改会立即写入数据库。

但是在用户按下网页上的大“保存”按钮之前，我需要所有更改都处于待处理状态（不持久化）。同时要求所有更改都应跨用户会话保存，因此我不能只将它们存储在 bean 或客户端中。即使用户重新启动计算机或从其他设备访问我的应用程序，所有更改也应保留。所以我需要以某种方式坚持待处理的更改。

我想到的第一个解决方案是创建所有可编辑表的副本，并带有一些前缀，例如“tmp”。当用户更改某些内容时，我会将新值存储在“tmp_something”中。当用户最终按下“保存”时，我会将他的更改从“tmp_something”移动到主“something”表。为了在 tmp_ 表中分离来自不同用户的记录，所有这些都将有一个名为“user_id”的附加列。因此，对于所有用户，我都必须拥有一份我的表格。

实际上，我根本不喜欢这个解决方案！我将不得不重写很多代码，为每个新表创建新类......

我的问题是：有没有更好的方法来做我想做的事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:11:07.183

1.你为什么不试试[Multiton Pattern](http://en.wikipedia.org/wiki/Multiton_pattern)。使用包含 Singleton 的 Singleton Bean`Map<Key, Object>`将在应用程序范围内可用，对象将可以通过它们的唯一键访问，并且只有在您明确告诉它时才会持久化。我希望这有帮助

[2.我对Java Transaction API](http://en.wikipedia.org/wiki/Java_Transaction_API)不太熟悉。但我认为这可能是您可以查看的另一种选择。

问候

# windows - 从 Windows 客户端向网页传递参数

> ID：14603510
> 
> 赞同：0
> 
> 时间：2013-01-30T12:01:29.787
> 
> 标签：windows, model-view-controller, client, webget

我在 MVC 网站的控制器中有以下方法：

```
[WebGet]
public void SaveInfo()
{
    string make = Request.QueryString["Make"];
    string model = Request.QueryString["Model"];

    // Do stuff....
} 
```

当我在地址栏中键入 URL 时它工作正常，但我需要做的是从 Windows 客户端调用它。我如何在 C# 中做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:11:55.243

使用[`WebClient`](http://msdn.microsoft.com/en-us/library/system.net.webclient.aspx)该类从客户端发出 HTTP 请求。如果您的客户项目还没有 System.Web 的引用，您需要添加一个引用。

```
using System.Net;
using System.Web;

    static void SaveInfo(string make, string model)
    {
        using (WebClient webClient = new WebClient())
        {
            string response = webClient.DownloadString(
                String.Format(
                    "http://yoursite/ControllerName/SaveInfo?make={0}&model={1}",
                    HttpUtility.UrlEncode(make),
                    HttpUtility.UrlEncode(model)
                )
            );
        }
    } 
```

# android - PhoneGap Build Push Notification Plugin Class not found 错误

> ID：14603513
> 
> 赞同：0
> 
> 时间：2013-01-30T12:01:35.337
> 
> 标签：android, cordova, google-cloud-messaging

我遵循了新插件上的示例代码，用于在 phonegap 构建上为 android 推送通知。

我上传了代码，当我在测试手机上运行 apk 时，它给了我一条错误消息：找不到错误处理程序类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:20:22.420

您需要配置您的 config.xml 文件以包含对插件的引用，以便 phonegap build 知道它需要编译它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-29T20:17:36.163

有同样的问题。为了让它工作，您需要构建应用程序并将其放在真实设备上。我使用 phonegap 服务功能在 android 上的 phonegap 应用程序中运行我的应用程序，但它不是那样工作的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-14T09:24:43.240

在 Eclipse 中选择 Project->Clean。它对我有用。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-11-16T13:52:39.773

如果您使用的是 Visual Studio 2013，请安装推送插件版本 2.4。去上班！同样在 OnNotification 方法的调用上添加“window”

```
window.onNotification = function (and) { 
```

# facebook - 申请的 Facebook seo 网址

> ID：14603515
> 
> 赞同：1
> 
> 时间：2013-01-30T12:01:37.620
> 
> 标签：facebook, url, seo

我想创建一个星座 facebook 应用程序，现在我正在寻找一些关于如何在 facebook 应用程序上重写链接的文档，比如这个应用程序在这里？

> [https://apps.facebook.com/daily-horos/horoscope/pis](https://apps.facebook.com/daily-horos/) **_**
> 
> [https://apps.facebook.com/daily-horos/horoscope/tau](https://apps.facebook.com/daily-horos/) **_**

等等。每个星座都有不同的网址？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:50:21.343

> 例子：

要使您的应用程序 URL 像这样[https://apps.facebook.com/dailyhoros](https://apps.facebook.com/dailyhoros)，您必须在“应用程序命名空间”框中键入“dailyhoros”。

# xaml - 将 svg 路径矩形转换为 xaml

> ID：14603531
> 
> 赞同：-1
> 
> 时间：2013-01-30T12:02:26.767
> 
> 标签：xaml, svg

目标：将 svg 矩形（写为路径）转换为 xaml 矩形并计算以下属性。

X，Y，RX，RY，高度，宽度

现在，对于给定的示例路径

```
<path d="M0 585.9 A9.42477 9.37886 -180 0 0 9.42 595.28 L141.37 595.28 A9.42477 9.37886 -180 0 0 150.79 585.9          L150.79 377.79 A9.42477 9.37886 -180 0 0 141.37 368.41 L9.42 368.41 A9.42477 9.37886 -180 0 0 0          377.79 L0 585.9 Z" class="st1" /> 
```

关于如何进行此计算的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:23:24.547

好吧，我不是 C# 方面的专家，也不是矢量对话方面的专家。我唯一的建议是：使用[inscape](http://inkscape.org/)脚本转换为 xaml。但是据我所知，xaml 并不支持 svg 的所有属性（例如，非缩放笔画）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-17T00:34:18.163

我目前正在开发一个`SVG`转换`xaml`器，所以这主要是基于我自己的试错经验。

您可以替换为`d=`并`Data=`使用[XamlReader](https://msdn.microsoft.com/en-us/library/system.windows.markup.xamlreader(v=vs.110).aspx)。
既然`xaml`有`Path` `object(Shape)`，我建议你将 转换`SVG` `Path`为`xaml` `Path`。

如果您选择这样做，请记住包括以下内容：

```
xmlns=\"http://schemas.microsoft.com/winfx/2006/xaml/presentation\" 
```

到字符串 - XamlReader 必须读取 - 包含您的`xaml`代码。
这样你最终会得到一个`Path` `object(Shape)`.

# asp.net-mvc - 为什么在 Razor 中使用 Html.RenderAction 时会出现 StackOverflowException？

> ID：14603534
> 
> 赞同：7
> 
> 时间：2013-01-30T12:02:40.860
> 
> 标签：asp.net-mvc, razor, stack-overflow

我正在将 WebForms 应用程序转换为 Razor 并且一切正常，除非我尝试使用`Html.RenderAction`. 每当我调用它时，我都会得到一个`StackOverflowException`. 有没有人知道可能导致这种情况的原因？

我的操作模板如下所示：

```
@model dynamic   

should be rendering this 
```

在我的 _Layout.cshtml 文件中，我呈现如下操作：

```
@{Html.RenderAction("MyPartialAction");} 
```

我的`_ViewStart.cshtml`文件如下所示：

```
@{
    this.Layout = "~/Views/Shared/_Layout.cshtml";
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-30T12:02:40.860

问题是您的操作模板没有定义要使用的布局。因此，它会自动获取 _ViewStart.cshtml 文件中指定的那个。这实际上会导致 _Layout.cshtml 文件*无限*地嵌套在其自身中。因此`StackOverflowException`. 解决方案很简单。将操作模板中的布局设置为`null`：

```
@model dynamic
@{
   Layout = null;
}
should be rendering this 
```

现在模板不会要求嵌入到布局文件中，一切正常。

# asp.net - 如何访问 wwroot 之外的文件夹？

> ID：14603535
> 
> 赞同：2
> 
> 时间：2013-01-30T12:02:43.350
> 
> 标签：asp.net, iis, relative-path

我的网站支持查看和编辑包含大量图像的大量文档 大量图像文件夹大小等于 500 giga 当我开发我的网站时我在我的网站中创建了图像文件夹以访问图像但是当发布我的网站时客户需要一个页面指​​定图像文件夹的任何文件夹路径，导致他很难复制所有图像，并且分区c的大小是另一个问题。所以他在外部硬盘中有这些图像，并想在设置图像文件夹的页面路径中进行设置，然后我的网站查看此路径（在服务器上）我如何在外部硬盘上访问这些图像

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T12:05:07.860

在您的网站内创建一个虚拟目录，并提供位于您的网站文件夹之外的包含图像的文件夹路径。现在这个文件夹将作为您网站的一部分，您将能够提供虚拟路径。如何创建虚拟目录请参阅此[msdn](http://msdn.microsoft.com/en-us/library/zwk103ab%28v=vs.100%29.aspx)链接

假设您有网站文件夹 d:\Yoursites\Testsite 并且您想访问 d:\Images\first\file\a.jpgpdf 中的文件，请在 TestWebsite 侧创建一个虚拟目录，指向 d:\images\files 并访问其中的文件它通过虚拟目录。

图片 pdf 的 URL 类似于 [http://yoursite.com/yourvirtualdirectoryname/first.jpg](http://yoursite.com/yourvirtualdirectoryname/first.jpg)

# api - 如何按城市或 州获得谷歌趋势结果？

> ID：14603543
> 
> 赞同：0
> 
> 时间：2013-01-30T12:03:03.257
> 
> 标签：api, state, city, trend

我正在使用 [http://www.google.com/trends/hottrends/atom/hourly](http://www.google.com/trends/hottrends/atom/hourly) //为我们 [http://www.google.co.in/trends/hottrends/atom/hourly](http://www.google.co.in/trends/hottrends/atom/hourly) //为印度

这些按国家/地区提供结果，工作正常，但我想按城市或州获得结果，谁能帮我按城市或州获得结果

我需要地铁底特律地区的趋势结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-17T22:43:17.187

我能为您的问题找到的最接近的解决方案是使用谷歌趋势中的“探索”功能通过状态浏览相关术语（顶部和上升）。不幸的是，没有供您集成的 atom 提要，但是 embed 选项有一些指向 javascript 文件的 html。根据您的预期用途，您可以通过探索这条途径获得您想要的东西。

探索[阿拉巴马州](http://www.google.com/trends/explore#geo=US-AL&date=today%207-d&cmpt=geo)的趋势。

# c++ - 使用 static_cast 的类型转换无效，我应该使用什么正确的转换？

> ID：14603546
> 
> 赞同：1
> 
> 时间：2013-01-30T12:03:10.443
> 
> 标签：c++, casting, typedef, static-cast

我有一个类型定义，`typedef vector<Object*> ObjList;`我也有一个函数`vector<BigObject*>* ObjectBox::getBigObjectList();`。`BigObject`继承自`Object`

我想要做的是获取一个`vector<BigObject*>*`from`getBigObjectList()`并将其转换为`vector<Object*>*`，这是一个向上转换，并且这种类型被定义为`ObjList`所以我基本上想将它转换为一个`ObjList`类型

我尝试了两种方法，第一种是

```
ObjList *normalObjectList = (ObjList*) box->getBigObjectList(); 
```

这个编译，我从这篇文章中读到（[When should static_cast, dynamic_cast, const_cast and reinterpret_cast be used?](https://stackoverflow.com/questions/332030/when-should-static-cast-dynamic-cast-and-reinterpret-cast-be-used)），它说 C 风格的转换很少需​​要，因为它可以被开发成`reinterpret-cast`

然后我尝试使用`static_cast`，但我得到一个错误说无效类型转换

```
ObjList *normalObjectList = static_cast<ObjList*> (box->ClipObjectInRect()); 
```

这也行不通

```
ObjList *normalObjectList = static_cast<vector<Object*>*> (box->ClipObjectInRect()); 
```

为什么这不起作用？这是因为`static_cast`只能用于转换直接类（如其`Object`自身）而不是嵌套类（我只是在这里完全猜测）？在这种情况下我该怎么办？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-08-27T15:24:09.860

如果编译器不知道（或假装不知道）类型之间的关系，静态转换也会失败。如果您的继承未在两者之间声明为**公共**，编译器会将它们视为不相关的类型并给您相同的神秘警告。

这只是咬我，所以想我会分享。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T12:33:44.863

你的推理有一个非常常见的缺陷；我想我们都曾在某个时候犯过同样的错误。您`std::vector<>`只是将其视为一个输出容器，因为这是您现在想要使用它的方式，但事实并非如此。

想象一下下面的代码会编译：

```
vector<BigObject*>* bigVector = box->ClipObjectInRect(); // OK
ObjList* objVector = static_cast<ObjList*>(bigVector);   // Not OK; we'll now see why
objVector->push_back(new SmallObject()); // OUCH 
```

如您所见，允许该演员表将允许您尝试将 a`SmallObject*`放入只能包含 的内容中`BigObject*`。这肯定会导致运行时错误。

顺便说一句：您实际上可以在相关类型的数组之间进行转换。这是从 C 继承的行为。它会导致运行时错误:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T12:13:40.510

我可能是错的，但我认为您可能需要将每个单独的对象投射到向量中。我会尝试重载 getBigObjectList() 以返回 ObjList*。所以你的重载函数看起来像

```
ObjList* ObjectBox::getBigObjectList()
{
 vector<Object*> return_vec
 for(vector<BigObject*>::iterator itr = ObjectBox.bigObjectList.begin(); itr != ObjectBox.bigObjectList.end(); itr++)
 {
  return_vec.push_back(static_cast<Object*> (itr));
 }
 return return_vec
} 
```

您将向量描述为列表的任何特殊原因？还是首先使用向量而不是列表？

编辑：基本上，丹尼斯所说的。

# java - Java/Eclipse 如何在项目中获取类型方法的用法？

> ID：14603548
> 
> 赞同：3
> 
> 时间：2013-01-30T12:03:15.177
> 
> 标签：java, eclipse, static-code-analysis

在 Eclipse 中，我可以 Ctrl+Shift+G（或 r-click -> `References-> Workspace`）来获取对工作区中类型（或字段等）的所有引用。

我需要的是一种方法来获取在工作区中使用给定类型的*任何方法的所有位置的列表。*也就是说，我想获得对 type 方法的所有调用`java.math.BigDecimal`。

Eclipse 是否支持这种情况？

FWIW：我可以使用 VS + Resharper 为 C# 代码做类似的事情：
r-click on type -> `Find Usages Advanced -> Usages of members`。

## 更新

让我重新表述一下这个问题，似乎不是很清楚。

我想找到调用*任何*BigDecimal**方法**的所有代码。
（从这个信息中，我将手动（？）派生我的代码实际使用的 BigDecimal 的公共接口的子集）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T12:27:27.903

不确定这是否是您想要的，但在这里找到：[https ://stackoverflow.com/a/11836545/1360074](https://stackoverflow.com/a/11836545/1360074)

按`Ctrl`+`H`或从菜单栏`Search`- `Search ...`，然后选择`Java Search`：

![在此处输入图像描述](../Images/a944ddb5c78ff5357c4437e3ce1f9034.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T16:50:59.660

与其他答案一样，++`Ctrl`是您要查找的内容，但是，请尝试将光标悬停在类名上。`Alt``H`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T14:20:14.083

我不认为日食支持这一点。最多可以使用`ctrl`++`alt`来`h`获取单个方法的调用层次结构。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T12:24:11.763

在 Eclipse 中，当光标位于方法名称上时，您可以使用 Ctrl+Alt+H。这将为您带来调用层次结构视图。

# spring - Spring MVC-当我尝试使用 proxyMode=ScopedProxyMode.TARGET_CLASS 时出现错误

> ID：14603552
> 
> 赞同：3
> 
> 时间：2013-01-30T12:03:34.477
> 
> 标签：spring, spring-mvc

我在 java web 应用程序中使用 Spring 3.1

现在，根据这个网站--> [http://tedyoung.me/2011/10/19/practici...rt-5-sessions/](http://tedyoung.me/2011/10/19/practi...rt-5-sessions/) 我可以将以下注释用于全局会话范围类..

代码：

```
@Component
@Scope(value="session", proxyMode=ScopedProxyMode.TARGET_CLASS)
public class UserPreferences {
....remaining code.... 
```

但是，在我的 Java 类中，当我使用上述注释时，我在 Eclipse IDE 中收到此错误-->

> ScopedProxyMode 无法解析为变量

我在这里做错了什么？我基本上想在全局会话中使用特定对象 - 即，在基于 Spring MVC 的 Web 应用程序中的多个控制器中。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-30T12:46:09.837

我认为您缺少 import `org.springframework.context.annotation.ScopedProxyMode`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-09T08:17:37.920

您应该刷新您的项目并在eclipse中的错误代码行上单击ctrl + 1并选择要导入的包。否则您应该显式导入org.springframework.context.annotation.ScopedProxyMode

# java - DNS 查询在 Java 中使用 DnsContextFactory 冻结

> ID：14603553
> 
> 赞同：1
> 
> 时间：2013-01-30T12:03:41.510
> 
> 标签：java, dns, nslookup

下面的程序执行 DNS 查找。除了主机名和 dns 的一种特定组合外，它运行良好：

```
import javax.naming.directory.InitialDirContext;
import javax.naming.NamingException;
import java.util.Hashtable;

public final class StackOverflow {
 public static void main(String args[]) throws NamingException {
  Hashtable<String, Object> env = new Hashtable<String, Object>();
  env.put("java.naming.factory.initial", "com.sun.jndi.dns.DnsContextFactory");
  env.put("java.naming.provider.url", "dns://ns.dnssek.org");
  System.out.println(new InitialDirContext(env).getAttributes("dnsseccert.us", new String[]{"NS","A"}));
 }
} 
```

我试图设置超时：

```
env.put("com.sun.jndi.dns.timeout.initial", "220"); 
```

但是它的行为很奇怪。当它抛出时，它有时适用于小值：

```
DNS error [Root exception is java.net.SocketTimeoutException: Receive timed out]; 
```

但在大多数情况下，程序只是冻结并挂在内存中。

其他人有同样的问题并解决了吗？是否有任何其他设置我可以尝试阻止它？我可以尝试其他一些替代*java.naming.factory.initial吗？*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T20:37:32.383

我花了几个小时，但我终于找到了一个可以接受的解决方案。我下载了*com.sun.jndi.dns包的源代码，并在**DnsClient*类中添加了一行：

```
...
Tcp(InetAddress server, int port, int timeout) throws IOException {
    sock = new Socket(server, port);
    sock.setSoTimeout(timeout);  // <-- missing timeout
    sock.setTcpNoDelay(true);
    out = new java.io.BufferedOutputStream(sock.getOutputStream());
    in = new java.io.BufferedInputStream(sock.getInputStream());
}
... 
```

我设置了套接字的超时。实际上，我还在 Tcp 构造函数中添加了一个参数并修改了它的调用，因此它现在由*com.sun.jndi.dns.timeout.initial*的值初始化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-17T14:12:07.013

请尝试同时设置`com.sun.jndi.dns.timeout.initial`和`com.sun.jndi.dns.timeout.retries`值。例如，我看到以下一致的超时：

```
$ cat StackOverflow.java 
import javax.naming.directory.InitialDirContext;
import javax.naming.NamingException;
import java.util.Hashtable;

public final class StackOverflow {
 public static void main(String args[]) throws NamingException {
  Hashtable<String, Object> env = new Hashtable<String, Object>();
  env.put("java.naming.factory.initial", "com.sun.jndi.dns.DnsContextFactory");
  env.put("java.naming.provider.url", "dns://ns.dnssek.org");

  env.put("com.sun.jndi.dns.timeout.initial", "220");
  env.put("com.sun.jndi.dns.timeout.retries", "1");

  System.out.println(new InitialDirContext(env).getAttributes("dnsseccert.us", new String[]{"NS","A"}));
 }
} 
```

* * *

```
$ java -version
java version "11" 2018-09-25
Java(TM) SE Runtime Environment 18.9 (build 11+28)
Java HotSpot(TM) 64-Bit Server VM 18.9 (build 11+28, mixed mode) 
```

* * *

```
$ java StackOverflow
Exception in thread "main" javax.naming.CommunicationException: DNS error [Root exception is java.net.SocketTimeoutException: Receive timed out]; remaining name    'dnsseccert.us'
    at jdk.naming.dns/com.sun.jndi.dns.DnsClient.query(DnsClient.java:313)
    at jdk.naming.dns/com.sun.jndi.dns.Resolver.query(Resolver.java:81)
    at jdk.naming.dns/com.sun.jndi.dns.DnsContext.c_getAttributes(DnsContext.java:434)
    at java.naming/com.sun.jndi.toolkit.ctx.ComponentDirContext.p_getAttributes(ComponentDirContext.java:235)
    at java.naming/com.sun.jndi.toolkit.ctx.PartialCompositeDirContext.getAttributes(PartialCompositeDirContext.java:141)
    at java.naming/com.sun.jndi.toolkit.ctx.PartialCompositeDirContext.getAttributes(PartialCompositeDirContext.java:129)
    at java.naming/javax.naming.directory.InitialDirContext.getAttributes(InitialDirContext.java:142)
    at StackOverflow.main(StackOverflow.java:14)
    Caused by: java.net.SocketTimeoutException: Receive timed out
    at java.base/java.net.PlainDatagramSocketImpl.receive0(Native Method)
    at java.base/java.net.AbstractPlainDatagramSocketImpl.receive(AbstractPlainDatagramSocketImpl.java:181)
    at java.base/java.net.DatagramSocket.receive(DatagramSocket.java:814)
    at jdk.naming.dns/com.sun.jndi.dns.DnsClient.doUdpQuery(DnsClient.java:423)
    at jdk.naming.dns/com.sun.jndi.dns.DnsClient.query(DnsClient.java:212)
    ... 7 more 
```

您当然会想要配置在您自己的环境中有意义的超时和重试值。上述值仅用于演示目的。

# assembly - 直接通过堆栈指针访问局部变量而不使用基指针？

> ID：14603558
> 
> 赞同：0
> 
> 时间：2013-01-30T12:04:06.100
> 
> 标签：assembly, x86, stack, x86-16

在编写汇编代码时，是否可以直接使用堆栈指针访问函数参数和局部变量，而无需将基指针保存到堆栈中并在被调用函数中设置新的基指针？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T12:10:24.477

在 32 位 (IA-32) 和 64 位代码 (x86-64) 中是，在 16 位代码 (8086 ... 80286) 中没有。`sp`不能以任何方式用于寻址，`esp`并且`rsp`可以。

[维基百科有一个有用的 x86 和 x86 寻址模式列表](http://en.wikipedia.org/wiki/X86#Addressing_modes)。

仅在 16 位代码中需要使用`bp`或其他可用于寻址 ( `bx`, `si`, ) 的寄存器。`di`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T23:03:41.783

是的，在 32 位和 64 位汇编中，您可以分别使用带有 ESP 和 RSP 的堆栈指针来访问局部变量。使用基本堆栈指针访问变量的原因是它始终位于一个恒定位置，而堆栈指针可能会在推送或弹出时改变位置。这将导致您跟踪您执行了多少次推送和弹出，并相应地调整变量位置。看一个例子：（这是x64）

```
sub rsp, 16   ; Align stack

mov DWORD PTR[rsp], 4
mov DWORD PTR[rsp + 4], 20
mov QWORD PTR[rsp + 8], 175

push 25     ; Push 25 to the stack.
push 50     ; Push 8 to the stack.
... 
```

现在，如果稍后在您的代码中您想访问您在开始时放入堆栈的变量，它们的位置会因为 push 语句而改变。一个 push 语句等价于：

```
sub rsp, 8
mov QWORD PTR[rsp], 45 
```

如果您在将变量放入堆栈时尝试访问它们，您将得到错误的数字。

```
mov rax, QWORD PTR[rsp + 8]   ; This is not 175, since you did two pushes
                              ; and moved the stack pointer back another 16 bytes.
                              ; You will get 25 as the answer. 
```

现在您将不得不手动跟踪您完成了多少次推送并调整变量位置以访问它们。当您的项目变得更大时，您可以看到这将导致多少问题。

现在，如果您使用堆栈基指针来访问变量，它的位置是恒定的，并且您每次都可以在同一位置访问它们（只要您不修改基指针本身）

```
push rbp      ; Save the old value of RBP.
mov rbp, rsp
sub rsp, 16   ; Align stack

mov DWORD PTR[rbp - 4], 4
mov DWORD PTR[rbp - 8], 20
mov QWORD PTR[rbp - 16], 175

push 25     ; Push 25 to the stack.
push 50     ; Push 8 to the stack.
...

mov eax, DWORD PTR[rbp - 8]  ; This will give you 20 because the
                             ; stack base pointer's location is constant to
                             ; the variables in the stack. The push statements
                             ; only affect the stack pointers location, not the
                             ; base pointer.
...
mov rsp, rbp
pop rbp    ; After you pop the previous pushed values. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T12:14:11.980

如果您使用 ESP 或 RSP，但不是 SP，您可以这样做，因为没有 SP 相对内存寻址，只有 ESP 相对和 RSP 相对。

# excel - 隐藏列时，excel UsedRange 未正确显示

> ID：14603561
> 
> 赞同：-1
> 
> 时间：2013-01-30T12:04:16.053
> 
> 标签：excel, excel-2007, office-interop, excel-2010, vba

当我隐藏一个列（比如说 N ）然后如果我使用 activesheet.usedrange 函数找到使用的范围，那么它不会给我正确的使用范围。但是，当我隐藏一行并使用上述功能时，它会给出正确的使用范围。

要尝试这个请隐藏一列让我们说 N。然后按键盘上的 ctrl + END，您将看到焦点转到单元格 A1。好像你隐藏一行（在新工作表上）让我们说第 10 行并按 ctrl + end 然后它会带你到第 9 行。或者，您可以使用 VBA 代码检查 UsedRange，或者通过编写 c# addin 来尝试此操作，并在上述两种情况下查看 UsedRange 的内容。

为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T12:48:10.453

Worksheet的属性的行为`UsedRange`似乎不一致。

隐藏超出的列`UsedRange`不会导致属性更改。

隐藏超出的行`UsedRange` **确实**会导致属性扩展到隐藏的行。

[规范](http://msdn.microsoft.com/en-us/library/office/ff840732.aspx)中没有进一步提及这一点。

# javascript - JQuery 代码在 IE9 或更低版本中不起作用

> ID：14603565
> 
> 赞同：0
> 
> 时间：2013-01-30T12:04:26.937
> 
> 标签：javascript, jquery

编辑*

在我们网站的一个页面中，有一个带有讲笑话的泡泡的海盗。单击气泡时，笑话会在列表中随机更改为另一个笑话。由于某种原因，这在 IE9 或更低版本中不起作用。谁能告诉我为什么？

我检查了控制台，出现了这个错误

```
"CE2.w.external.InPrivateFilteringEnabled is not a function" 
```

这是脚本：

```
$(document).ready(function () {
    var list = $(".joke-list li").toArray();
    var elemlength = list.length;

    // Encapsulate random value assignment within a function
    var setRandomValue = function(element) {
        var randomnum = Math.floor(Math.random() * elemlength);
        var randomitem = list[randomnum];
        $(element).html($(randomitem).text());
    }

    // Bind click button
    $('.speech').click(function () {
        setRandomValue(this);
    });

    // Set random value for the first time
    setRandomValue($('.speech'));
    $('.speech').css("width: 1000px;");
}); 
```

这是我拼凑起来以显示故障的小提琴：http: [//jsfiddle.net/uRd6N/116/](http://jsfiddle.net/uRd6N/116/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T12:42:06.517

试试这个，更简单和更干净的代码

```
$(document).ready(function () {

var list = $(".joke-list").find("li").map(function(){return $(this).text();});

 // Bind click 
$(document.body).on('click','.speech', function () {
  var rndnum=Math.floor(Math.random() * list.length);
  console.log(rndnum); 
   $(this).html(list[rndnum]);
});
//first rand joke 
$(".speech").trigger("click"); 
```

});

看到你的 html 后，我想你的问题是你的语音 div 是你的笑话列表的父级

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T12:11:30.957

我想这是函数分配中缺少的分号。试试这个：

```
// Encapsulate random value assignment within a function
var setRandomValue = function(element) {
   [...]
}; // add semicolon here 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T12:24:48.300

您在下面的函数中缺少 a `;`。

试试这个：

```
$(document).ready(function () {
var list = $(".joke-list li").toArray();
var elemlength = list.length;

// Encapsulate random value assignment within a function
var setRandomValue = function(element) {
    var randomnum = Math.floor(Math.random() * elemlength);
    var randomitem = list[randomnum];
    element.html($(randomitem).text());
};// <----';' is missing here ie will create issues here

// Bind click button
$('.speech').click(function () {
    setRandomValue($(this));
});

    // Set random value for the first time
    setRandomValue($('.speech'));
    $('.speech').css("width","1000px"); //<---apply css this way;
}); 
```

看看这是否能解决您的问题。

# .htaccess - 密码保护特定 URL

> ID：14603568
> 
> 赞同：44
> 
> 时间：2013-01-30T12:04:28.690
> 
> 标签：.htaccess, password-protection

该网站位于共享主机上。我需要对单个 URL 进行密码保护。

```
http://www.example.com/pretty/url 
```

显然，这不是我要保护的物理文件路径，它只是那个特定的 URL。

.htaccess 有什么快速的解决方案吗？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2013-01-30T13:20:56.597

您应该能够使用 mod_env 和`Satisfy any`指令的组合来做到这一点。即使它不是物理路径，您也可以使用它`SetEnvIf`来检查。`Request_URI`然后，您可以检查变量是否在`Allow`语句中设置。因此，要么您需要使用密码登录，要么`Allow`无需密码即可登录：

```
# Do the regex check against the URI here, if match, set the "require_auth" var
SetEnvIf Request_URI ^/pretty/url require_auth=true

# Auth stuff
AuthUserFile /var/www/htpasswd
AuthName "Password Protected"
AuthType Basic

# Setup a deny/allow
Order Deny,Allow
# Deny from everyone
Deny from all
# except if either of these are satisfied
Satisfy any
# 1\. a valid authenticated user
Require valid-user
# or 2\. the "require_auth" var is NOT set
Allow from env=!require_auth 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2014-11-17T19:22:54.910

您可以使用`<LocationMatch>`或简单地`<Location>`在您的`<VirtualHost>`指令中执行此操作（假设您可以访问您的 httpd.conf / vhost.conf - 或者，如果您必须以这种方式配置您的站点，您可以在文档根目录中的 .htaccess 中放置类似的内容） .

例如：

```
<VirtualHost *:80>
  ServerName www.example.com
  DocumentRoot /var/www/blabla
  # Other usual vhost configuration here
  <Location /pretty/url>
    AuthUserFile /path/to/.htpasswd
    AuthGroupFile /dev/null
    AuthName "Password Protected"
    AuthType Basic
    require valid-user
  </Location>
</VirtualHost> 
```

`<LocationMatch>`如果您想将正则表达式与漂亮的 URL 进行匹配，您可能会发现它更有用。文档在[这里](http://httpd.apache.org/docs/2.2/mod/core.html#locationmatch)。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2017-07-21T15:22:27.113

由于 Rick 在评论中表示此问题的答案无效，因此这是我使用的代码段：

```
AuthName "Protected Area"
AuthType Basic
AuthUserFile /path/to/your/.htpasswd
AuthGroupFile /dev/null

SetEnvIf Request_URI .* noauth
SetEnvIf Request_URI the_uri_you_want_to_protect !noauth
SetEnvIf Request_URI another_uri !noauth
SetEnvIf Request_URI add_as_many_as_you_want !noauth

<RequireAny>
  Require env noauth
  Require valid-user
</RequireAny> 
```

如果您需要对 Apache 2.2 和 Apache 2.4 的支持（显然有两个版本并行运行的设置......）：

```
AuthName "Protected Area"
AuthType Basic
AuthUserFile /path/to/your/.htpasswd
AuthGroupFile /dev/null

SetEnvIf Request_URI .* noauth
SetEnvIf Request_URI the_uri_you_want_to_protect !noauth
SetEnvIf Request_URI another_uri !noauth
SetEnvIf Request_URI add_as_many_as_you_want !noauth

<IfModule mod_authz_core.c>
    <RequireAny>
        Require env noauth
        Require valid-user
    </RequireAny>
</IfModule>

<IfModule !mod_authz_core.c>
    Order Deny,Allow
    Deny from all
    Satisfy any
    Require valid-user
    Allow from env=noauth
</IfModule> 
```

Apache 2.2 的代码取自[Jon Lin](https://stackoverflow.com/a/14605066/1886765)。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-08-10T12:41:20.820

所有提供的解决方案都不适合我。我认为以下指令可以解决问题：

```
SetEnvIf Request_URI ^/page-url auth=1

AuthName "Please login"
AuthType Basic
AuthUserFile "/www/live.example.com/files/html/.htpasswd"

# first, allow everybody
Order Allow,Deny
Satisfy any
Allow from all
Require valid-user
# then, deny only if required
Deny from env=auth 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-01-30T10:00:12.843

我更新了[Jon Lin](https://stackoverflow.com/users/851273/jon-lin)的代码，以保护除一个之外的所有 URL - 例如虚拟主机根目录下的 robots.txt。这些是 Apache 2.2 兼容指令。

```
<ifmodule mod_setenvif.c>
SetEnv  require_no_auth=false
SetEnvIf Request_URI "^/robots.txt" require_no_auth=true

AuthType Basic
AuthName "Restricted"
AuthUserFile /home/someuser/.htpasswd

# Setup a deny/allow
Order Deny,Allow
# Deny from everyone
Deny from all
# 1\. a valid authenticated user
Require valid-user
# or 2\. the "require_no_auth" var is set
Allow from env=require_no_auth
# except if either of these are satisfied
Satisfy any
</ifmodule> 
```

Apache 2.4 的相同代码

```
<ifmodule mod_setenvif.c>
SetEnv  require_no_auth=false
SetEnvIf Request_URI "^/robots.txt" require_no_auth=true

AuthType Basic
AuthBasicProvider file
AuthName "Restricted"
AuthUserFile /home/someuser/.htpasswd

# grant access if either of these are satisfied
# 1\. a valid authenticated user
Require valid-user
# or 2\. the "require_no_auth" var is set
Require env require_no_auth
</ifmodule> 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-05-26T06:34:12.533

在 Apache2.4 中你可以这样做：

```
<If "%{REQUEST_URI} =~ m#/pretty/url/?#i">
    AuthUserFile /var/www/htpasswd
    AuthName "Password protected"
    AuthType Basic
    Require valid-user
</If> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-02-23T23:44:48.700

将用户重定向到受密码保护的子文件夹怎么样？

.htaccess

```
RewriteCond %{HTTP_COOKIE} !BadHorsie=secret_cookie_key
RewriteRule ^(pretty/url)$ /protected/login.php?url=$1 [R=307,L] 
```

受保护/.htaccess

```
AuthUserFile /usr/www/{YOUR_PATH}/protected/.htpasswd
AuthGroupFile /dev/null
AuthName "Protected"
AuthType Basic
require user BadHorsie 
```

受保护/.htpasswd

```
BadHorsie:$apr1$fFbaaVdF$Q5ql58g7R4qlpMUDb/5A0/ 
```

受保护/login.php

```
<?php
if (isset($_GET['url']) && $_GET['url'] && $_GET['url'][0] != '/' && strpos($_GET['url'], '//') === false) {
    setcookie('BadHorsie', 'secret_cookie_key', 0, '/');
    header('Location: /' . $_GET['url'], true, 307);
    exit;
}
?> 
```

**发生什么了**

1.  用户请求`example.com/pretty/url`
2.  307重定向到`example.com/protected/login.php?url=pretty/url`
3.  登录
4.  成功时：用户使用密钥获取会话 cookie
5.  307重定向回`example.com/pretty/url`
6.  用户获取机密内容

*注意：当然，“会话 cookie 和反向重定向”机制是完全可选的。最后，您可以直接通过`protected/login.php`. 我展示这种方式只是为了获得灵感。*

*可选：不要使用 PHP 并[通过 .htaccess 设置 cookie。](https://httpd.apache.org/docs/trunk/rewrite/flags.html#flag_co)*

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-07-08T07:23:34.053

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2015-10-06T18:28:42.653

不幸的是，我无法评论@jon-lin 的答案。因此，我创建了一个新答案。我在 apache 2.4 环境中的适应解决方案是：

```
#
# password protect /pretty/url URIs
#

AuthType Basic
AuthName 'Authentication required'
AuthUserFile /path/to/.htpasswd

# Restrict access to some urls
SetEnvIf Request_URI ^/pretty/url  auth=1

<RequireAll>
  # require the auth variable to be set
  Require env auth
  # require an valid-user
  Require valid-user
</RequireAll> 
```

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2013-05-24T14:33:17.113

上面的解决方案太忙了，有点混乱。我喜欢这样简单明了

```
<Files "protected.html">
 AuthName "Username and password required"
 AuthUserFile /home/fullpath/.htpasswd
 Require valid-user
 AuthType Basic
</Files> 
```

以上内容将被放入您的 htaccess 文件中，其中“protected.html”是您要保护的文件（可以是您想要的任何文件，例如 myphoto.jpg 或 document.zip，只需将其重命名为您的偏爱）。AuthUserFile 是密码文件的完整路径。你完成了。

尽管您可能必须确保已设置此先决条件。Apache 目录标签配置中需要 AllowOverride 和 AuthConfig 才能使代码正常工作，但通常它是开箱即用的，因此除非您正在制作自己的自定义构建，否则您应该安全无虞。

# c# - 如何使用参数化构造函数对从基类继承的类执行 Nunit 测试

> ID：14603570
> 
> 赞同：1
> 
> 时间：2013-01-30T12:04:33.630
> 
> 标签：c#, nunit

```
namespace TestBI
{
 [TestFixture]
 class ClassChild:ClassParent
 {
    public ClassChild(DataRow row, string name): base(row, detail) { }
    [Test]
    public void Test()
    {
        DataRow dr = new DataRow();
        dr[0] = 1;
        dr[1] = "ram"  
        ClassChild ch = new ClassChild(dr,"student");

        :
        :
        :
        Assert.AreEqual(string1,string2);
     }

 }
} 
```

当我运行测试时，我收到一个错误，因为“找到了 TestBI.ChildClass.Test 合适的构造函数”

我如何需要在这里将参数传递给子类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T12:09:14.780

为您的测试类提供一个零参数构造函数。如果它调用超类的多参数构造函数是可以的，只要它为它提供适当的参数。

# php - 在共享主机帐户上安装 xcache

> ID：14603572
> 
> 赞同：1
> 
> 时间：2013-01-30T12:04:34.997
> 
> 标签：php, apache, shared-hosting, opcode, xcache

我想在共享主机帐户上安装 xcache。我已按照此处的说明进行操作：http: [//xcache.lighttpd.net/wiki/InstallFromSource](http://xcache.lighttpd.net/wiki/InstallFromSource)但请注意差异：

*   您不能在共享主机上运行“su”，因为 make install 想要将 xcache.* 文件移动到共享模块目录。
*   但是，您可以将 xcache.* 文件复制到您帐户的目录中，并告诉 php.ini 使用该库

我遇到的问题是以下 php 错误：

```
[30-Jan-2013 04:35:52 America/Denver] PHP Warning:  PHP Startup: XCache: Unable to    initialize module
Module compiled with module API=20060613
PHP    compiled with module API=20090626
These options need to match
in Unknown on line 0 
```

此共享主机使用多个 php 版本。我想将特定的 php 二进制文件作为编译的参考。

在我的服务器上：

```
Configuration File (php.ini) Path   /usr/php/53/etc
Loaded Configuration File   /home4/scoobydo/public_html/php.ini
Scan this dir for additional .ini files /usr/php/53/etc/php.d 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-05T03:53:34.123

很简单，如果你不能运行 'su'，那么你不能 make & make install xcache 来从源代码安装。

您可能可以为您的发行版使用预编译的二进制文件，但同样，这些可能需要安装“su”或“sudo”命令。

# cluster-computing - 在 linux 集群中运行并行作业 - mpich 错误

> ID：14603573
> 
> 赞同：1
> 
> 时间：2013-01-30T12:04:37.237
> 
> 标签：cluster-computing, ubuntu-12.04, mpich

首先我想说我不确定这是问这个问题的正确地方，我猜是我们，但是......如果它更适合另一个 stackexchange 站点，请告诉我。

三个月前，我负责一个由六台计算机 (Suse Linux 9.2) 组成的集群，该集群以预报模式运行气象模型。最近，由于电源中断，其中一个节点崩溃了。安装 Lubuntu 12.04（Suse 9.2 磁盘不可用，只有 10.2）后，我尝试将此计算机重新连接到集群：

*   安装openssh服务器
*   无需密码即可运行 ssh-keygen 到 ssh
*   已安装 NFS 支持
*   编辑 /etc/fstab
*   编辑 /etc/hosts

然后我尝试运行遇到的模型，但收到以下错误消息：

```
rm_1993: p4_error: Could not gethostbyname for host thalassa; may be invalid name : 61
p0_12316: p4_error: Child process exited while making connection to remote process on thalassa3: 0 
```

谷歌搜索后，我发现了一些关于 /etc/resolv.conf 的问题，然后编辑了这个文件：

> 域 ceam.es dns 名称服务器 192.168.1.1 名称服务器 127.0.0.1

但是错误信息仍然出现。我想我遗漏了一些东西，我不是专家系统管理员，但我必须处理。

你可以在这里找到[错误日志](http://ubuntuone.com/0HlGLscuW27t2ECaWbimtM)、[主机](http://ubuntuone.com/4GxhYMLrXoocYEQb4gSXHh)和[resolv.conf](http://ubuntuone.com/3JVv7jKOMYZ1NPiThVr3JA)。

任何帮助或想法将不胜感激，我将继续在网上搜索解决方案。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T23:50:18.430

这些消息表明您正在运行原始 MPICH 软件（通常称为 MPICH1）。尽管您可以将其重新组合在一起以使您的系统正常工作，但您真的不应该运行这种长期以来不受支持的软件。

我建议升级到现代 MPICH（以前称为 MPICH2）v3.0.1 或更高版本。安装和配置应该相当容易，尽管您正在运行的任何旧应用程序代码都有可能不欣赏现代 MPICH 包含的额外错误检查。

[http://www.mpich.org/](http://www.mpich.org/)

# ruby-on-rails - 骨干 router.navigate 不会触发

> ID：14603574
> 
> 赞同：2
> 
> 时间：2013-01-30T12:04:37.303
> 
> 标签：ruby-on-rails, backbone.js, coffeescript

当我打电话给导航时，我的路由器没有重定向的问题。

我使用'backbone-on-rails' gem 运行 Rails 设置。

问题似乎与应用程序的初始化方式有关。

**应用程序**

```
window.App =
  Models: {}
  Collections: {}
  Views: {}
  Routers: {}
  initialize: ->
    new App.Routers.Main()
    Backbone.history.start({pushState: true})

$ ->
  App.initialize() 
```

**路由器**

```
class App.Routers.Main extends Backbone.Router

  routes:
    '': 'index'
    'login': 'login'

  initialize: ->
    # Check login status
    @check_login_status()

  initialize_layout: ->
    # Default layout template
    layout        = new App.Views.Layout
    $('#main').html( layout.render().el )

    # Navigation template
    navigation  = new App.Views.Navigation(user: @current_user)
    $('#main nav[role="top"]').html( navigation.render().el )

    # Return this
    this

  index: ->
    @initialize_layout() unless @current_user.get('company_id') is null
    this

  login: ->
    layout        = new App.Views.Layout
    $('#main').html( layout.render().el )

    login       = new App.Views.Login
    $('#main .container-fluid').html(login.render().el)

  check_login_status: ->
    @current_user = new App.Models.CurrentUser
    @current_user.fetch({
      async: false
      success: (data, status, xhr) ->

        # If no user is logged in, and we arent on the login page, redirect to it
        if data.get('company_id') is null and window.location.pathname isnt '/login'
          # Navigate to login page
          window.location.href = '/login'

    }) 
```

在我的路由器中，我有一个初始化功能，可以检查用户是否已登录。我 console.log 一个简单的状态以轻松验证它，实际上它会注销“未登录”。

尽管如此，导航不会重定向到 /login。

如果我在启动路由器之前启动主干历史，那么导航部分可以工作，但是当我刷新页面（cmd + r）时，路由器不会运行索引方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T13:33:03.090

导航到`/login`不触发路线的原因`login`是前导正斜杠。如果省略正斜杠，它应该可以工作：

```
self.navigate('login', {trigger: true}) 
```

正斜杠前缀的 URL 意味着应该在域的根目录中找到路由，即`domain.com/login`. 为了保持在不在应用程序根目录中的 URL 中运行应用程序的灵活性，例如`domain.com/en/login`，您应该更喜欢相对 URL 格式。

你还说：

> 在我启动路由器之前启动主干历史，然后导航部分工作

这可能不是一个好主意。我不确切知道它是如何“工作”的，但是[Backbone 文档](http://backbonejs.org/#Router)在这个主题上非常清楚：

> 在页面加载期间，**在您的应用程序完成所有路由器的创建后**，请务必调用 Backbone.history.start() 或 Backbone.history.start({pushState: true}) 来路由初始 URL。

# android - Android Facebook 分享：未找到活动

> ID：14603576
> 
> 赞同：3
> 
> 时间：2013-01-30T12:04:40.063
> 
> 标签：android, facebook, android-intent, android-activity

我在 Facebook 上发布数据的功能有问题：

```
 public void postData() {
    try {
        Intent i = new Intent(Intent.ACTION_SEND);
        i.setClassName("com.facebook.katana",
                "com.facebook.katana.ShareLinkActivity");
        i.setType("text/*");
        i.putExtra(android.content.Intent.EXTRA_TEXT, "http://sample_url.com");
        startActivity(i);
    } catch (Exception e) {
        Intent i= new Intent(Intent.ACTION_VIEW);
        i.setData(Uri.parse("http://sample_url.com));
        startActivity(i);
    }
} 
```

每次我获得活动 com.facebook.katana.ShareLinkActivity 无法运行的信息时，我都应该将代码添加到 Android 清单中。Facebook 应用程序安装在手机上。

在 AndroidManifest.xml 中：

```
 <activity android:name="com.facebook.katana.ShareLinkActivity" >
    </activity> 
```

LogCat 中的异常：

```
01-30 14:46:00.903: E/AndroidRuntime(11626): FATAL EXCEPTION: main
01-30 14:46:00.903: E/AndroidRuntime(11626): android.content.ActivityNotFoundException: Unable to find explicit activity class {com.facebook.katana/com.facebook.katana.ShareLinkActivity}; have you declared this activity in your AndroidManifest.xml?
01-30 14:46:00.903: E/AndroidRuntime(11626):    at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1634)
01-30 14:46:00.903: E/AndroidRuntime(11626):    at android.app.Instrumentation.execStartActivity(Instrumentation.java:1510)
01-30 14:46:00.903: E/AndroidRuntime(11626):    at android.app.Activity.startActivityFromChild(Activity.java:3531)
01-30 14:46:00.903: E/AndroidRuntime(11626):    at android.app.Activity.startActivityForResult(Activity.java:3283)
01-30 14:46:00.903: E/AndroidRuntime(11626):    at android.app.Activity.startActivity(Activity.java:3370) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-19T07:02:10.380

最后我得到了这段代码：

```
 Intent sharingIntent = new Intent(Intent.ACTION_SEND);
        sharingIntent.setType("text/plain");
        sharingIntent.putExtra(Intent.EXTRA_SUBJECT, "Subject");
        sharingIntent.putExtra(Intent.EXTRA_TEXT, "Text...");
        sharingIntent.setPackage("com.facebook.katana");
        startActivity(sharingIntent); 
```

要点是`setPackage`-`setType`现在 Android 从 Facebook 包中选择正确的活动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T11:03:16.483

对于所有在这里使用 appcelerator 的人来说，它是如何工作的......

```
var intFB = Ti.Android.createIntent({
                       action : Ti.Android.ACTION_SEND,
                        packageName : "com.facebook.katana",                        
                        type : "text/plain"
                    });                    
                    intFB.putExtra(Ti.Android.EXTRA_TEXT, "http://www.google.com");
                    //facebook only supports LINKS(!!!)
                    Ti.Android.currentActivity.startActivity(intFB); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T12:33:29.733

是的...你应该`com.facebook.katana.ShareLinkActivity`在`AndroidManifest.xml`文件中声明。这应该做。

**编辑：**

O o ...问题在于`setClassName`方法。替换您的以下行

```
 i.setClassName("com.facebook.katana","com.facebook.katana.ShareLinkActivity"); 
```

有了这个：

```
 i.setClassName("com.facebook.katana","ShareLinkActivity"); 
```

由于方法中的第二个参数是`className`，并且您还传递了带有调试器无法找到的类名的包名。由于类名`ShareLinkActivity` **不是** `com.facebook.katana.ShareLinkActivity`.

这将最终解决您的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-12T09:59:16.880

就这样我们都在同一个页面上。Facebook 故意打破了这一点，并拒绝修复它，并为此感到羞耻。

[https://developers.facebook.com/bugs/332619626816423](https://developers.facebook.com/bugs/332619626816423)

# c# - 如何使图片框透明？

> ID：14603584
> 
> 赞同：0
> 
> 时间：2013-01-30T12:05:01.293
> 
> 标签：c#, windows, forms, controls, transparent

你好我试图在我的项目中做 2 层图片框控件。

1 用于移动物体， 1 用于画线。

但是，即使我将 BackColor 设置为透明，上 PB 也会隐藏下 PB。

有没有其他方法或特殊控制来克服这个问题？

我在谷歌搜索了一些答案，但没有找到我需要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:30:25.940

[也许您可以使用此代码](http://www.codeproject.com/Questions/198575/C-Opacity-Of-Picturebox)设置图片框的不透明度。

# devexpress - devexpress xtragrid 使用循环以编程方式创建

> ID：14603585
> 
> 赞同：1
> 
> 时间：2013-01-30T12:05:01.597
> 
> 标签：devexpress, xtragrid

我使用带有高级带状网格视图的 devexpress xtragrid。网格将在运行时以编程方式创建。我写了代码，它工作。但是现在我需要使用循环创建网格，我的意思是我不知道列号，这取决于用户。

这是我的第一个代码（它有效）：

```
DevExpress.XtraGrid.Views.BandedGrid.AdvBandedGridView advBandedGridView1 = new DevExpress.XtraGrid.Views.BandedGrid.AdvBandedGridView();
        DevExpress.XtraGrid.Views.BandedGrid.GridBand gridBand1 = new DevExpress.XtraGrid.Views.BandedGrid.GridBand();
        DevExpress.XtraGrid.Views.BandedGrid.GridBand gridBand2 = new DevExpress.XtraGrid.Views.BandedGrid.GridBand();
        DevExpress.XtraGrid.Views.BandedGrid.BandedGridColumn colTrademark = new DevExpress.XtraGrid.Views.BandedGrid.BandedGridColumn();
        DevExpress.XtraGrid.Views.BandedGrid.BandedGridColumn colModel = new DevExpress.XtraGrid.Views.BandedGrid.BandedGridColumn();
        DevExpress.XtraGrid.Views.BandedGrid.BandedGridColumn colTrademark2 = new DevExpress.XtraGrid.Views.BandedGrid.BandedGridColumn();
        DevExpress.XtraGrid.Views.BandedGrid.BandedGridColumn colModel2 = new DevExpress.XtraGrid.Views.BandedGrid.BandedGridColumn();       

        advBandedGridView1.Bands.AddRange(new DevExpress.XtraGrid.Views.BandedGrid.GridBand[] { gridBand1, gridBand2 });
        //advBandedGridView1.Columns.AddRange(new DevExpress.XtraGrid.Views.BandedGrid.BandedGridColumn[] {colTrademark,colModel});       

        advBandedGridView1.GridControl = xgc;
        advBandedGridView1.Name = "advBandedGridView1";
        xgc.MainView = advBandedGridView1;

        gridBand1.Caption = "Model";
        gridBand1.Columns.Add(colTrademark);
        gridBand1.Columns.Add(colModel);
        gridBand1.Name = "gridBand1";
        gridBand1.Width = 217;

        gridBand2.Caption = "Model2";
        gridBand2.Columns.Add(colTrademark2);
        gridBand2.Columns.Add(colModel2);
        gridBand2.Name = "gridBand2";
        gridBand2.Width = 217;

        colTrademark.Caption = "Trademark";
        colTrademark.FieldName = "Trademark0";
        colTrademark.Name = "colTrademark";
        colTrademark.SummaryItem.SummaryType = DevExpress.Data.SummaryItemType.Count;
        colTrademark.Visible = true;
        colTrademark.Width = 113;

        colModel.Caption = "Model";
        colModel.FieldName = "Model0";
        colModel.Name = "colModel";
        colModel.Visible = true;
        colModel.Width = 104;

        colTrademark2.Caption = "Trademark2";
        colTrademark2.FieldName = "Trademark1";
        colTrademark2.Name = "colTrademark2";
        colTrademark2.SummaryItem.SummaryType = DevExpress.Data.SummaryItemType.Count;
        colTrademark2.Visible = true;
        colTrademark2.Width = 113;

        colModel2.Caption = "Model2";
        colModel2.FieldName = "Model1";
        colModel2.Name = "colModel2";
        colModel2.Visible = true;
        colModel2.Width = 104;

        DataTable dtCars = new DataTable("Cars");
        dtCars.Columns.Add("Trademark0");
        dtCars.Columns.Add("Model0");
        dtCars.Columns.Add("Trademark1");
        dtCars.Columns.Add("Model1");

        DataRow drCars = dtCars.NewRow();
        drCars["Trademark0"] = "BMW";
        drCars["Model0"] = "530i";
        drCars["Trademark1"] = "aaaa";
        drCars["Model1"] = "111";
        dtCars.Rows.Add(drCars);

        drCars = dtCars.NewRow();
        drCars["Trademark0"] = "Cadillac";
        drCars["Model0"] = "Seville";
        drCars["Trademark1"] = "cccc";
        drCars["Model1"] = "2222";
        dtCars.Rows.Add(drCars);

        drCars = dtCars.NewRow();
        drCars["Trademark0"] = "Cadillac";
        drCars["Model0"] = "Deville";
        drCars["Trademark1"] = "ddddd";
        drCars["Model1"] = "3333";
        dtCars.Rows.Add(drCars);

        xgc.DataSource = dtCars; 
```

和循环一个（它不起作用）：

```
 DevExpress.XtraGrid.Views.BandedGrid.GridBand[] gridBand = new DevExpress.XtraGrid.Views.BandedGrid.GridBand[2];
            for (int i = 0; i < 2; i++)
            {
                gridBand[i] = new DevExpress.XtraGrid.Views.BandedGrid.GridBand();

                DevExpress.XtraGrid.Views.BandedGrid.BandedGridColumn colTrademark = new DevExpress.XtraGrid.Views.BandedGrid.BandedGridColumn();
                DevExpress.XtraGrid.Views.BandedGrid.BandedGridColumn colModel = new DevExpress.XtraGrid.Views.BandedGrid.BandedGridColumn();

                colTrademark.Caption = "Trademark" + i.ToString();
                colTrademark.FieldName = "Trademark" + i.ToString();
                colTrademark.Name = "colTrademark" + i.ToString();
                colTrademark.SummaryItem.SummaryType = DevExpress.Data.SummaryItemType.Count;
                colTrademark.Visible = true;
                colTrademark.Width = 113;

                colModel.Caption = "Model" + i.ToString();
                colModel.FieldName = "Model" + i.ToString();
                colModel.Name = "colModel" + i.ToString();
                colModel.Visible = true;
                colModel.Width = 104;

                gridBand[i].Caption = "Model" + i.ToString();
                gridBand[i].Columns.Add(colTrademark);
                gridBand[i].Columns.Add(colModel);
                gridBand[i].Name = "gridBand" + i.ToString();
                gridBand[i].Width = 217;
            }
            advBandedGridView1.Bands.AddRange(gridBand);
            advBandedGridView1.GridControl = xgc;
            advBandedGridView1.Name = "advBandedGridView1";
            xgc.MainView = advBandedGridView1;

DataTable dtCars = new DataTable("Cars");
            dtCars.Columns.Add("Trademark0");
            dtCars.Columns.Add("Model0");
            dtCars.Columns.Add("Trademark1");
            dtCars.Columns.Add("Model1");

            DataRow drCars = dtCars.NewRow();
            drCars["Trademark0"] = "BMW";
            drCars["Model0"] = "530i";
            drCars["Trademark1"] = "aaaa";
            drCars["Model1"] = "111";
            dtCars.Rows.Add(drCars);

            drCars = dtCars.NewRow();
            drCars["Trademark0"] = "Cadillac";
            drCars["Model0"] = "Seville";
            drCars["Trademark1"] = "cccc";
            drCars["Model1"] = "2222";
            dtCars.Rows.Add(drCars);

            drCars = dtCars.NewRow();
            drCars["Trademark0"] = "Cadillac";
            drCars["Model0"] = "Deville";
            drCars["Trademark1"] = "ddddd";
            drCars["Model1"] = "3333";
            dtCars.Rows.Add(drCars);

            xgc.DataSource = dtCars; 
```

我该如何修复第二个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:59:55.557

我解决了这个问题。它可能会有所帮助..

```
DevExpress.XtraGrid.Views.BandedGrid.AdvBandedGridView advBandedGridView1 = new DevExpress.XtraGrid.Views.BandedGrid.AdvBandedGridView();
        DevExpress.XtraGrid.Views.BandedGrid.GridBand[] bandArray = new DevExpress.XtraGrid.Views.BandedGrid.GridBand[2];
        DataTable dtAralik = (DataTable)xgcAralik.DataSource;
        for (int i = 0; i < bandArray.Length; i++)
            bandArray[i] = new DevExpress.XtraGrid.Views.BandedGrid.GridBand();
        advBandedGridView1.Bands.AddRange(bandArray);

        advBandedGridView1.GridControl = xgc;
        advBandedGridView1.Name = "advBandedGridView1";
        xgc.MainView = advBandedGridView1;
        for (int i = 0; i < bandArray.Length; i++)
        {
            bandArray[i].Caption = "Aralık" + i.ToString();
            bandArray[i].Columns.Add(new DevExpress.XtraGrid.Views.BandedGrid.BandedGridColumn());
            bandArray[i].Columns.Add(new DevExpress.XtraGrid.Views.BandedGrid.BandedGridColumn());
            bandArray[i].Name = "gridBand" + i.ToString();
            bandArray[i].Width = 217;
        }

        for (int i = 0; i < bandArray.Length; i++)
        {
            bandArray[i].Columns[0].Caption = "TradeMark";
            bandArray[i].Columns[0].FieldName = "Trademark" + i.ToString();
            bandArray[i].Columns[0].Name = "colTrademark" + i.ToString();
            bandArray[i].Columns[0].SummaryItem.SummaryType = DevExpress.Data.SummaryItemType.Count;
            bandArray[i].Columns[0].Visible = true;
            bandArray[i].Columns[0].Width = 113;

            bandArray[i].Columns[1].Caption = "Model";
            bandArray[i].Columns[1].FieldName = "Model" + i.ToString();
            bandArray[i].Columns[1].Name = "colModel" + i.ToString();
            bandArray[i].Columns[1].Visible = true;
            bandArray[i].Columns[1].Width = 113;
        }

        DataTable dtCars = new DataTable("Cars");
        dtCars.Columns.Add("Trademark0");
        dtCars.Columns.Add("Model0");
        dtCars.Columns.Add("Trademark1");
        dtCars.Columns.Add("Model1");

        DataRow drCars = dtCars.NewRow();
        drCars["Trademark0"] = "BMW";
        drCars["Model0"] = "530i";
        drCars["Trademark1"] = "aaaa";
        drCars["Model1"] = "111";
        dtCars.Rows.Add(drCars);

        drCars = dtCars.NewRow();
        drCars["Trademark0"] = "Cadillac";
        drCars["Model0"] = "Seville";
        drCars["Trademark1"] = "cccc";
        drCars["Model1"] = "2222";
        dtCars.Rows.Add(drCars);

        drCars = dtCars.NewRow();
        drCars["Trademark0"] = "Cadillac";
        drCars["Model0"] = "Deville";
        drCars["Trademark1"] = "ddddd";
        drCars["Model1"] = "3333";
        dtCars.Rows.Add(drCars);

        xgc.DataSource = dtCars; 
```

# android - 用于 android 崩溃的 Chrome 开发者工具

> ID：14603586
> 
> 赞同：4
> 
> 时间：2013-01-30T12:05:04.220
> 
> 标签：android, debugging, google-chrome

我按照以下说明安装了开发人员工具：[https](https://developers.google.com/chrome-developer-tools/docs/overview) ://developers.google.com/chrome-developer-tools/docs/overview 。当我转到我的页面时，`http://localhost:9222`我看到了我想要检查的页面，但是当我点击一个页面时，我得到一个空白页面，并且平板电脑上的 Chrome 关闭。我在我的设备中打开了 USB 调试，并且 ADB 服务器工作正常并且可以识别我的设备。我错过了什么？

# c# - 不显示版本信息

> ID：14603587
> 
> 赞同：1
> 
> 时间：2013-01-30T12:05:05.000
> 
> 标签：c#, wmi

以下代码未正确显示版本信息。

```
 ManagementObjectSearcher mos = new ManagementObjectSearcher(new SelectQuery("Win32_Processor"));
        ManagementObjectCollection moc = mos.Get();
        foreach (ManagementObject mo in moc)
        {
Console.WriteLine("Version: " +mo["Version"].ToString());
} 
```

它显示空白屏幕。

我用的是windows 7版本...

怎么解决……？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T12:25:47.523

希望这可以帮助您：

[MSDN EnumerationOptions 类](http://msdn.microsoft.com/en-us/library/system.management.enumerationoptions%28v=vs.80%29.aspx)

```
 // Enumerate the Win32_Processor class
        EnumerationOptions opt = new EnumerationOptions();
        ManagementClass c = new ManagementClass("Win32_Processor");
        foreach (ManagementObject o in c.GetInstances(opt))
        {
            foreach (var item in o.Properties)
            {
                Console.WriteLine(item.Name + " " + item.Value);
            }
        } 
```

# linq - n 级子实体上的 Linq 表达式

> ID：14603592
> 
> 赞同：-1
> 
> 时间：2013-01-30T12:05:24.903
> 
> 标签：linq, entity-framework-4, linq-to-entities, linq-expressions

以下查询需要通用表达式。

```
I don't want to use the Dynamic library and Predicate builder. 
```

我正在动态生成表达式。

```
var test = entity.User.Where(PUser => PUser.Role.TeamRoles.Any(PTeamRoles => PTeamRoles.TeamId == "222"))); 
```

我想为一对一然后很多关系查询生成动态表达式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T07:14:32.163

我得到了解决方案

表达式 proeprtyexpression = Expression.Property(PTeamRoles, "TeamId"); 表达式值express = Expression.Constant("A"); //表达式内部表达式 = Expression.Lambda(Expression.Equal(proeprtyexpression, valueexpress), PTeamRoles); 表达式内部表达式 = Expression.Lambda(ExcelExpressionHelper.ApplyOperator(proeprtyexpression, valueexpress, "StartsWith"), PTeamRoles);

```
 Type winnertype = PTeamRoles.Type;
        Type woutertype = PRole.Type;
        var wouterProperty = Expression.Property(PRole, "TeamRoles");

        var outerMethodExpression = Expression.Call(typeof(Enumerable), "Any", new[] { winnertype }, wouterProperty, innerexpression); 
```

# teamcity - Teamcity 自动生成信息到仪表板

> ID：14603595
> 
> 赞同：0
> 
> 时间：2013-01-30T12:05:30.910
> 
> 标签：teamcity

我有一个由非技术人员手动运行的 Teamcity 构建。这些用户通过环境变量提示向构建提供运行时值。这些值用于编排构建操作，然后，当构建完成时（假设成功），我需要向用户输出一些关于构建结果的信息（松散地，构建创建了一些网站，所以这些是输出）。理想情况下，我还需要标记构建，以便其他用户稍后可以访问仪表板并快速找到构建和上述输出。

我正在使用 Teamcity 7.1.3 版

所以，一个两部分的问题：

首先，除了在构建运行后手动执行之外，是否可以在 Teamcity 中向构建添加标签或注释？

如果没有，那么其次，有没有办法自动生成任何“类似评论”的输出到特定构建的仪表板？

我试图通过[这个](http://confluence.jetbrains.com/display/TCD7/Build+Script+Interaction+with+TeamCity)来做到这一点：

```
"You can use special progress messages to mark long-running parts in a build script. 
These messages will be shown on the projects dashboard for corresponding build and 
on the build results page.

To log single progress message use:"

##teamcity[progressMessage '<message>'] 
```

但是这样做时，我只能将消息输出到构建日志，而不是仪表板。

我也可以通过推出文本文件工件来完成此操作，但我想知道是否可以先使用非工件方法。

欢迎任何建议 - 如果需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T19:26:02.587

您可以将其输出为内部编号格式吗？在我使用 %build.vcs.number% 的屏幕截图中，您可以使用您的变量（通过仪表板，我假设您的意思是概览页面）

![内部版本号格式](../Images/a1772ffb17522a5e033fa053e0b5b020.png)

# android - Android - 哪些 Activity 方法需要超级构造函数？

> ID：14603598
> 
> 赞同：0
> 
> 时间：2013-01-30T12:05:41.790
> 
> 标签：android, methods, constructor, overriding, super

在大多数 Android 应用程序中，`onCreate()`被第一部分代码覆盖，`super.onCreate(savedInstanceState)`我知道这收集了 savedInstanceState Bundle，并且是编译所必需的，但是所有的构造函数呢？

`onResume()`, `onStop()`,`onStop()`等等。哪些被覆盖的方法需要包含重要的超级构造函数？

某处有清单吗？

我看到超级构造函数包含在某些代码中，而不是其他代码中。我有时自己也包含它们，而其他代码则没有，并且从未真正注意到有什么不同。

任何可以散发的光都会受到好评！

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T12:13:16.497

检查此[文档](http://developer.android.com/reference/android/app/Activity.html)。

Activity 的整个生命周期由以下 Activity 方法定义。所有这些都是您可以覆盖的钩子，以便在活动更改状态时进行适当的工作。所有活动都将实现 onCreate(Bundle) 以进行初始设置；许多人还将实现 onPause() 以提交对数据的更改，否则准备停止与用户交互。在实现这些方法时，您应该始终调用您的超类。

```
public class Activity extends ApplicationContext {
    protected void onCreate(Bundle savedInstanceState);

    protected void onStart();

    protected void onRestart();

    protected void onResume();

    protected void onPause();

    protected void onStop();

    protected void onDestroy();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T12:52:19.540

`onCreate()`,用于在开启时启动 Activity`onStart()`并用于停止或清理 Activity。`onResume()``onStop()``onDestroy()`

根据文档，您需要为每个方法调用 super 。

> 派生类必须调用该方法的超类实现。如果他们不这样做，将引发异常。

欲了解[更多信息](http://developer.android.com/reference/android/app/Activity.html#onStop%28%29)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T13:00:02.507

如果您阅读源代码，您会注意到`Activity.java`这 6 个方法中如何包含代码，所以我想说您应该为每个被覆盖的`onXXX`方法调用 super。

# css - 如何合并字体？

> ID：14603600
> 
> 赞同：13
> 
> 时间：2013-01-30T12:05:45.597
> 
> 标签：css, fonts, truetype

我有很多字体，

*   OpenSans-bold.ttf
*   OpenSans-boldItalic.ttf
*   OpenSans-extrabold.ttf
*   OpenSans-italic.ttf
*   OpenSans-light.ttf

我将如何继续创建一个文件，而不是这么多不同的文件？也许像我通常那样在 CSS 上使用它们，或者像你在 Photoshop 上一样？

例如

```
small{font-family:"OpenSans"; font-weight: normal;}
strong{font-family:"OpenSans"; font-weight: bold;}
h2 {font-family:"OpenSans"; font-weight: bolder;} 
```

任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-30T15:34:21.513

如果您希望使用不同的字体（常规、斜体、粗体等），则需要不同的字体文件，因为每种字体都是作为单独的字体文件实现的（实际上，您甚至需要不同的字体格式，以涵盖不同的浏览器）。

但是您*可以*将它们用作单个字体系列，就像您使用 Arial 并对其应用斜体和粗体一样，直接或间接地使用 CSS（通过 HTML，例如`h2`元素默认为粗体）。为此，您需要*声明*一个字体系列。

例如，FontSquirrel 生成将每个字体定义为字体系列的 CSS 代码。这是可能的，但不合逻辑且不方便。例如，它生成

```
@font-face {
    font-family: 'open_sansbold';
    src: url('opensans-bold-webfont.eot');
    src: url('opensans-bold-webfont.eot?#iefix') format('embedded-opentype'),
         url('opensans-bold-webfont.woff') format('woff'),
         url('opensans-bold-webfont.ttf') format('truetype'),
         url('opensans-bold-webfont.svg#open_sansbold') format('svg');
    font-weight: normal;
    font-style: normal;
} 
```

为了使事情更合乎逻辑，请更改`font-weight`值，并将`font-family`名称更改为您在不同`@font-face`规则中使用的名称（针对系列的不同字体）。例如，

```
@font-face {
    font-family: 'Open Sans';
    src: url('opensans-bold-webfont.eot');
    src: url('opensans-bold-webfont.eot?#iefix') format('embedded-opentype'),
         url('opensans-bold-webfont.woff') format('woff'),
         url('opensans-bold-webfont.ttf') format('truetype'),
         url('opensans-bold-webfont.svg#open_sansbold') format('svg');
    font-weight: bold;
    font-style: normal;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-30T12:18:12.467

在一个文件中组合多种字体的一种简单方法是将它们编码为 base64 并将它们嵌入到 CSS 中。不过，它们仍然是*不同*的字体，并且总大小会增加。有各种在线工具可以为您上传的字体文件创建 css，比如[这个](http://www.fontsquirrel.com/fontface/generator)。

# c# - 将 for 循环从 c# 转换为 vb.net

> ID：14603605
> 
> 赞同：-3
> 
> 时间：2013-01-30T12:05:51.587
> 
> 标签：c#, vb.net, for-loop

我在 C# 中有以下循环

```
for (int i = 0; i <= n; d[i, 0] = i++)
{} 
```

这是我使用但不清楚（离题）的 levenshtein 算法的一部分，我需要将此行翻译成 vb.net。似乎无法确定我需要使用两个循环中的哪一个：

```
for i as integer to n step 1
  d(i,0) = i
next 
```

或者

```
for i as integer to n step 1
 d(i,0) = i +1
next 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T12:09:36.230

这将是：

```
For i As Integer 0 To n
  d(i,0) = i
Next 
```

在`d[i, 0] = i++`,`d[i, 0]`获取它`i` *之前*的值，所以 VB 循环应该做同样的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T12:08:52.953

这是等效的 VB.NET 代码：

```
For i As Integer = 0 To n
    d(i,0) = i
Next 
```

# android - glReadPixels alpha 值问题

> ID：14603610
> 
> 赞同：1
> 
> 时间：2013-01-30T12:06:13.913
> 
> 标签：android, opengl-es, opengl-es-2.0, glreadpixels

我在从 Android 上的 OpenGL 纹理读取 alpha 通道时遇到问题。我`glReadPixels`这样称呼：

```
glReadPixels(0, 0, width, height, GL_RGBA, GL_UNSIGNED_BYTE, buffer); 
```

作为一个测试，我做了一个片段着色器，看起来像这样：

```
gl_FragColor = vec4(0.5, 0.5, 0.5, 0.5); 
```

对于每个像素，我返回 { 64, 64, 64, -1 }。

我已经尝试了各种方法来弄清楚为什么 alpha 的返回方式与 RGB 值不同，包括在每次渲染之前：

```
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT | GL_STENCIL_BUFFER_BIT);
//Tried various blend functions
glEnable(GL_BLEND);
glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA); 
```

但无论我做什么，它都会返回-1。

这是Android限制还是我错过了什么？

请注意，如果有任何区别，我将使用屏幕外 FBO。

编辑：如果我这样做：

```
int[] bits= new int[4];
glGetIntegerv(GL_RED_BITS, bits, 0);
glGetIntegerv(GL_GREEN_BITS, bits, 1);
glGetIntegerv(GL_BLUE_BITS, bits, 2);
glGetIntegerv(GL_ALPHA_BITS, bits, 3); 
```

我回来了 { 8, 8, 8, 0 }。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T12:10:55.023

Alpha 通道控制混合，它们通常在使用的那一刻就丢失了。Alpha 通道中的数据已用于将您的颜色与数据集中已有的颜色混合。您不能使用：

```
glEnable(GL_BLEND);
glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA); 
```

并恢复您的 Alpha 通道。我还要注意，这就是为什么您的 RGB 值返回 64 而不是 128，每个原始值 (128) 已与现有黑色混合 50/50 以产生 64 的 RGB。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T14:22:11.540

找出了问题所在。我的渲染缓冲区存储设置为 24 位模式。将其更改为 32 位模式时，它开始工作：

```
glRenderbufferStorage(GL_RENDERBUFFER, GLES11Ext.GL_RGBA8_OES, w, h); 
```

# jenkins - 在詹金斯/哈德森重命名工作

> ID：14603615
> 
> 赞同：35
> 
> 时间：2013-01-30T12:06:36.033
> 
> 标签：jenkins, hudson

我试图重命名一个 hudson/jenkins 工作。但是它未能重命名。

有什么办法可以重命名工作吗？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-01-30T12:07:07.250

您可以按照以下步骤通过 jenkins UI 重命名选定的作业：

```
job>configure>Advanced Project Options>Display Name 
```

另一种方法是重命名`Jenkins/hudson`服务器上的目录，然后`restart`将`Jenkins`.

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2019-02-04T06:05:47.527

为了快速理解，我使用了一些截图：

我使用 Jenkins 版本：2.148

**第1步：**

在主屏幕/工作列表上，只需单击工作选项。

[![在此处输入图像描述](../Images/ebe2e82173fd724465ddecf83ef86b4d.png)](https://i.stack.imgur.com/ooL9l.png)

或者

只需打开工作详细信息，您将看到左侧的重​​命名选项。

[![在此处输入图像描述](../Images/dea8cc4645d9084e153fbce90908e2ec.png)](https://i.stack.imgur.com/VvcwP.png)

**第2步：**

输入新名称，然后单击**重命名按钮**

[![在此处输入图像描述](../Images/1c6e70076206eeef0a0f15294207f356.png)](https://i.stack.imgur.com/SvzFN.png)

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-04-29T16:34:56.830

为了完整起见，想提一下使用 Groovy[脚本控制台](http://wiki.hudson-ci.org/display/HUDSON/Hudson+Script+Console)更新 Hudson 作业名称：

```
// Groovy script to rename job in Hudson
import hudson.model.*;

def JOB_PATTERN = ~/^MY_JOB.*$/; //find all jobs starting with "MY_JOB".
def NEW_PART = "_NEW"

(Hudson.instance.items.findAll { job -> job.name =~ JOB_PATTERN }).each { job_to_update -> 
    println ("Updating job " + job_to_update.name);
    def new_job_name = job_to_update.name + NEW_PART; //Append new part to the job name
    println ("New name: " + new_job_name);
    job_to_update.renameTo(new_job_name);
    println ("Updated name: " + job_to_update.name);
    println("="*80);
} 
```

如果您需要同时更新数十个作业，这将很有帮助。

**注意**：以下代码将不起作用：

```
job_to_update.name = new_job_name;
job_to_update.save(); 
```

将作业名称设置为新并保存配置不会重命名当前作业，而是使用新名称创建作业配置的副本。此外，在这种情况下，可能存在损坏的引用，因此 Hudson 需要重新加载配置。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2013-04-29T16:11:20.137

重命名作业的常规方法：

转到**配置**屏幕并编辑顶部的**项目名称字段。**然后单击**Save**并单击**Yes**确认。*（不要**点击**Save 旁边的**Apply**按钮**，**这会给你一个错误信息：[JENKINS-17474](https://issues.jenkins-ci.org/browse/JENKINS-17474)）*

 **更改**显示名称**不会重命名作业，只会更改其显示方式。例如，它仍会通过搜索框在其原始名称下找到，并且也会显示在 url 中。

在文件系统级别重命名目录实际上应该没有必要。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2018-02-13T13:04:19.300

1.  用新名称创建一个新工作，将有`copy from`一个现有工作的选项。
2.  `copy from`您要重命名的作业。
3.  删除原始作业。

现在您有一个名称不同的相同工作。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-04-07T20:41:41.457

我不能让 Marc 的脚本工作，所以写一个基于禁用所有作业脚本，如下所示。这是将任何带有“Findur.OpenComponent”的项目重命名为“Findur.OpenComponents”。

```
import hudson.model.*

renameChildren(Hudson.instance.items)

def renameChildren(items) {
  for (item in items) {
    if (item.class.canonicalName != 'com.cloudbees.hudson.plugins.folder.Folder') {     
      if (( m = item.name =~ /^(Findur.OpenComponent)(\..*)$/)){
        println(item.name)
        println m.group(1) + " " + m.group(2)
        newname = m[0][1] + 's' + m.group(2)
        item.renameTo(newname)
      }

    } else {
        renameChildren(((com.cloudbees.hudson.plugins.folder.Folder) item).getItems())
    }
  }
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-30T12:31:38.010

根据要求，我通常会选择：

*作业*>*配置* - 修改*项目名称*属性 -**高级项目选项**，点击*高级...*，设置*显示名称的值*

然后*保存*作业。无需在文件系统级别重命名。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-04-12T18:40:14.270

使用该函数[`Job.previousNames()`](https://github.com/jenkinsci/job-dsl-plugin/blob/b354ca01bf75efbe8cd8a3b58738dc3b323fbb27/job-dsl-core/src/main/groovy/javaposse/jobdsl/dsl/Job.groovy#L65)在 [job generator](Job Generator Plugin) (factory) 中使用 Groovy 脚本重命名多个作业。

以下示例将作业重命名`ci.*_2`为`ci.*`（它删除了结尾的`_2`）。

```
[
    [env: '01', hostname: 'host01.intranet'],
    [env: '02', hostname: 'host02.intranet'],
    [env: '03', hostname: 'host03.intranet'],
    [env: '04', hostname: 'host04.intranet'],
    [env: '05', hostname: 'host05.intranet'],
    [env: '06', hostname: 'host06.intranet'],
    [env: '07', hostname: 'host07.intranet'],
    [env: '08', hostname: 'host08.intranet'],
    [env: '09', hostname: 'host09.intranet'],
    [env: '10', hostname: 'host10.intranet'],
    [env: '11', hostname: 'host11.intranet'],
    [env: '12', hostname: 'host12.intranet'],
    [env: '13', hostname: 'host13.intranet'],
    [env: '14', hostname: 'host14.intranet'],
    [env: '15', hostname: 'host15.intranet'],
    [env: '16', hostname: 'host16.intranet'],
    [env: '17', hostname: 'host17.intranet'],
    [env: '18', hostname: 'host18.intranet'],
    [env: '19', hostname: 'host19.intranet'],
    [env: '20', hostname: 'host20.intranet'],
].each { Map config ->
    job("ci.${config.env}") {
        previousNames("ci.${config.env}_2")
        description("Continuous Integration on host ${config.env}")
        logRotator {
            numToKeep(5)
            daysToKeep(45)
        }
        label('build')
        wrappers {
            colorizeOutput('gnome-terminal')
        }
    }
} 
```**

# tcp - linux内核中的RTT：单位

> ID：14603616
> 
> 赞同：2
> 
> 时间：2013-01-30T12:06:37.220
> 
> 标签：tcp, linux-kernel, roundtrip

我正在尝试获取 linux 内核正在使用的 rtt 值。在那里我看到了两个变量，它们给出了 rtt 值：

srtt -- (smoothed RTT) rcv_rtt_est，其实就是Receiver端RTT估计

现在，我实际上没有看到这些变量输出的单位。我认为这些是即时的，如果我将它们转换为毫秒，值会变得非常低（几乎为零）。

因此，我只想确认这两个值是否以 jiffies 或其他单位为单位，因为我需要以毫秒为单位使用它们，即使我直接使用它们或以毫秒或微秒为单位，我也无法获得令人满意的输出。

我在代码的注释中没有发现任何内容，但我在那里看到一条注释，显示右移 3。

因此，我使用以下方式将其转换为毫秒：

```
jiffies_to_msecs(tp->srtt >> 3)) 
```

# ruby - 写冒泡排序更简洁的方法？

> ID：14603617
> 
> 赞同：-2
> 
> 时间：2013-01-30T12:06:37.807
> 
> 标签：ruby, algorithm, functional-programming

有没有更简洁的方法来使用冒泡排序算法实现按元素大小编写数组排序方法？我也不是在寻找速度优化，只是为了更紧凑的代码，首选功能风格。

```
def sort_by_size(arr)
  # bubble sort
  (arr.length - 1).downto 1 do
    |ix|
    arr = arr[1..ix].inject([[],arr[0]]) {|(ac,g),e| g.size < e.size ? [ac << g, e] : [ac << e, g]}.flatten.concat(arr[ix+1..-1])
  end
  arr
end 
```

任何想法 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T13:40:55.173

我会这样做：

```
def sort_by_size!(a)
  loop do
    swapped = false

    a.size.times do |n|
      if a[n].size < a[n-1].size
        a[n], a[n-1] = a[n-1], a[n]
        swapped = true
      end unless n == 0
    end

    break unless swapped
  end

  array
end 
```

这里的主要方法是可读性。`array.sort_by! { |e| e.size }`甚至`array.sort!`（大部分时间）做同样的工作。如果您关心性能（或者如果您不关心），则有一些基准：

```
n = 100_000

Benchmark.bmbm do |x|
  x.report('my bubble sort')    { n.times { sort_by_size! array.dup           } }
  x.report('your bubble sort')  { n.times { sort_by_size array.dup            } }
  x.report('sort_by!')          { n.times { array.dup.sort_by! { |e| e.size } } }
  x.report('sort')              { n.times { array.dup.sort!                   } }
end

                         user     system      total        real
my bubble sort       0.200000   0.000000   0.200000 (  0.196077)
your bubble sort     0.520000   0.000000   0.520000 (  0.524635)
sort_by!             0.090000   0.000000   0.090000 (  0.092452)
sort                 0.030000   0.000000   0.030000 (  0.024854) 
```

我认为核心 ruby​​ 排序方法在可读性和性能方面都胜过我的自定义冒泡排序。

# php - .htaccess 一个目录有扩展名，其他没有

> ID：14603618
> 
> 赞同：0
> 
> 时间：2013-01-30T12:06:38.370
> 
> 标签：php, .htaccess, redirect

在您的帮助下，我已经设法获得了这个 .htaccess，但我还需要 1 个带有扩展名的目录。例如：www.url.com/beheer/index.php，因此 /beheer 下的所有内容都必须带有扩展名。

这是当前的 .htaccess：

```
# remove trailing slash if not directory
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)/$ /$1 [L,R=301]

# remove index.php
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\ /(.*)index\.php/?([^\?\ ]*)
RewriteRule ^ /%1%2 [L,R=301]

# remove php extension
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\ /(.*)\.php($|\ |\?)
RewriteRule ^ /%1 [L,R=301]

RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^\.]*)(\.php)?(\?*)$ index.php/$1$3 [L,QSA] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T12:25:59.997

将此添加到您的 .htaccess 中。它不会对 /beheer 文件夹中的请求执行任何操作。

```
RewriteCond %{REQUEST_URI} ^/beheer
RewriteRule .* - [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T23:01:22.037

工作:) 我也可以从 htaccess 中排除一些脚本吗？以便一些脚本具有 .php 扩展名？

# jsf - 在验证 bean 集合时，如何在错误消息中指出集合的哪个元素有误？

> ID：14603621
> 
> 赞同：1
> 
> 时间：2013-01-30T12:06:48.720
> 
> 标签：jsf, richfaces, bean-validation, hibernate-validator

我有一个引用其他 bean 集合的 bean。我使用`@Valid`在验证中包含所有引用的 bean。

```
public class MasterBean {
    @Valid
    private Collection<DetailBean> details;
    ... 
}

public class DetailBean {
    private String id;

    @NotBlank(message = "{name_not_blank_message_key}")
    private String name;
    ...
} 
```

到目前为止，这工作正常，用户从所有`DetailBean`实例中获取所有验证错误消息。但是，错误消息不包含有关它们与哪些实例相关的任何指示。理想情况下，用户应该看到类似“缺少*某事物的名称”的内容，其中**某事物*是给定实例的属性（例如`id`）。不幸的是，普通的 MessageInterpolator 只允许静态注释参数的占位符（如`{min}`）并且不支持替换 bean 属性。

我已经阅读了几篇相关的帖子，也许[这一篇](https://stackoverflow.com/questions/5226797)是最接近的，但在我的情况下似乎没有一个建议是可行的（除了自己的 MessageInterpolator 实现 - 我更害怕......）。

更多背景知识：我正在开发一个广泛使用 RichFaces 标记的 JSF 2 项目。要验证的 bean 是 JSF 页面的支持 bean 的一部分，验证由`<rich:graphValidator>`表单提交时的标记触发。后端是 Hibernate Validator。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:52:47.450

如果您只想插入已验证的值并且您使用的是 Hibernate Validator 4.x，则可以使用[ValueFormatterMessageInterpolator](http://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-message-interpolator)。它也是一个自定义的 MessageInterpolator，但您不必自己实现任何东西。

Bean Validation 1.1 和 Hibernate Validator 5 将提供完全可定制的渲染（包括使用表达式语言导航 bean 属性）。这些功能已实现，但尚未在最终版本中可用。另见[BVAL-223](https://hibernate.onjira.com/browse/BVAL-223)和[HV-676](https://hibernate.onjira.com/browse/HV-676)。

# android - URL 在电脑上工作，但在安卓手机上不行

> ID：14603622
> 
> 赞同：0
> 
> 时间：2013-01-30T12:06:57.150
> 
> 标签：android, webview, user-agent

我试图加载这个网址：

```
www.televisaofutebol.com/xuuby.php?chname=vh1&height=500&width=650 
```

在我的手机上，但它说页面无法加载，但它可以在我的电脑上运行！

所以我更改了我的 webview 的用户代理来模拟我是一台计算机，但它也没有工作

```
browser.getSettings().setUserAgentString("Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; en-US; rv:1.9.1.8) Gecko/20100202 Firefox/3.5.8"); 
```

有人能帮我吗 ？^^

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:45:19.543

尝试检查`what is the Phone Screen size ?`因为在这里你传递参数`height=500 and width=650`所以它会`not support for all device screen size`。

首先你必须`get the Default Height & Width of Device`然后基于你可以传递参数。

希望您会根据一些更改获得输出。

**祝你好运。！！！**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T13:01:34.747

添加http://后尝试加载

```
http://www.televisaofutebol.com/xuuby.php?chname=vh1&height=500&width=650 
```

# pattern-matching - SML 大小写和模式匹配

> ID：14603623
> 
> 赞同：1
> 
> 时间：2013-01-30T12:06:58.813
> 
> 标签：pattern-matching, sml, smlnj

我有以下函数，假设返回卡片的值。我不确定为什么案例 Num => Num 会出现以下错误：

> 错误：规则类型不一致，较早的规则rank->int 此规则rank->int->rank

为什么 Num=>Num 会有返回类型 rank->int->rank

```
 datatype suit = Clubs | Diamonds | Hearts | Spades
 datatype rank = Jack | Queen | King | Ace | Num of int 
 type card = suit * rank

 fun card_value (suit, rank)=
 case rank of
    Ace =>11
     | Jack =>10
     | King =>10
     | Queen =>10
     | Num => Num ;

card_value(Clubs,Ace); //calling function 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-30T12:29:12.963

错误消息是指示性的。您需要对所有模式具有相同的返回类型。

```
fun card_value (suit, rank) =
  case rank of
      Ace => 14
    | King => 13
    | Queen => 12
    | Jack => 11
    | Num i => i 
```

所以你必须指定正确的构造函数`Num i`（`Num`不仅仅是）并`i`作为一个返回`int`

# macos - 如何在蚂蚁复制任务中保留 exec 文件

> ID：14603625
> 
> 赞同：7
> 
> 时间：2013-01-30T12:06:59.983
> 
> 标签：macos, ant, file-copying

我已经使用 Ant 为 Mac OS X 创建了 Java FX 包。它使用两个文件创建包 - 1\. MyApplication.app 2\. MyApplication.dmg

我希望将这两个文件都复制到其他文件夹中，所以我在 build.xml 中将命令写为 -

```
<copy todir="my_new_folder">
   <fileset dir="old_folder\bundles"/>
</copy> 
```

它在“my_new_folder”成功复制了这两个文件。但是在从“my_new_folder”运行.app 时，虽然它从“old_folder”正确启动，但并没有启动我的应用程序。

在比较复制的应用程序时，我发现在 exec（Unix 可执行文件）上驻留在**MacOS**文件夹（“显示包内容/内容/MacOS”）中没有保留，它的类型在文档文件中发生了变化。

当我只是执行简单的复制目录时，如何将其保存到**Unix 可执行文件中。**

谢谢，尼拉姆夏尔马

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T13:53:42.123

如*蚂蚁副本任务* [指南](http://ant.apache.org/manual/Tasks/copy.html)中所述：

> Unix 注意：复制文件时不保留文件权限；他们最终获得了默认的 UMASK 权限。这是由于在当前 Java 运行时中缺乏任何查询或设置文件权限的方法造成的。如果您需要保留权限的复制功能，请改用：

```
<exec executable="cp" ... > 
```

因此，在您的情况下，替换`<copy>`为：

```
<exec executable="cp">
    <arg line="-R old_folder/bundles my_new_folder"/>
</exec> 
```

（请注意，您应该使用正斜杠，即使此 ant 脚本正在 Windows 下使用）。

# struts2 - 如何保留分页状态 - 显示标签

> ID：14603629
> 
> 赞同：1
> 
> 时间：2013-01-30T12:07:11.960
> 
> 标签：struts2, pagination, jsp-tags, displaytag

我没有使用 DisplayTag 库 1.2，它具有名为“keepStatus”的内置属性，当设置为 true 时，将保留最后查看的页面编号。在会话中，这样当用户返回到这个 displayTag 表时，他应该直接显示最后查看的页面，而不是默认的第一页。

我在我的应用程序中使用 struts2。有人可以让我知道我们如何在我们的应用程序中以编程方式实现此功能。

# ruby - setter 方法的“反私有”属性

> ID：14603633
> 
> 赞同：0
> 
> 时间：2013-01-30T12:07:17.873
> 
> 标签：ruby, setter, accessor

**除非有同名的局部变量，否则可以在没有显式接收器的情况下使用**Getter方法：****

 **```
class A; attr_reader :foo end
A.new.instance_eval do
  @foo = :foo
  p foo
end
# => :foo 
```

当存在同名的局部变量时，这将不成立，因为只要存在歧义，作为局部变量的解释优先于作为方法调用的原则。

```
class A; attr_reader :foo end
A.new.instance_eval do
  foo = :bar
  @foo = :foo
  p foo
end
# => :bar 
```

但是，即使没有在相关表达式之前分配具有相同名称的局部变量，也不能在没有显式接收器的情况下使用**setter方法：**

```
class A; attr_writer :foo end
A.new.instance_eval do
  foo = :foo  # <= No local variable named `foo` has been assigned before this point
  p @foo
end
# => nil 
```

setter 方法的这种“反私有”属性如何证明是合理的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T12:15:26.800

如果 ruby​​ 将您在最后一条语句中的赋值解释为对 的赋值`self`，那么您将无法设置局部变量。

它的方式让解释器处理起来没有歧义：没有`self`的赋值总是局部变量，对 self 的赋值总是试图在对象上使用编写器。

## 如果反过来

解释器必须查找上下文编写器方法并通过编写器分配它（如果有的话），这几乎肯定会对性能产生负面影响

```
class A
  attr_writer :foo
end

A.new.instance_eval do
  # for each of these assignments, the interpreter has to look up if there's
  # a writer method defined
  foo = 'bar' 
  bar = 'baz'
  fib = 'buz'
end 
```

在分配局部变量之前，程序员还有一项相当愚蠢的任务是找出他所在上下文的每个 setter 方法，以确保他不会无意中使用 setter。

```
class C
  attr_writer :something
end

class B < C
  attr_writer :foo
end

class A < B
  attr_writer :bar
end

A.new.instance_eval
  something = 'something' 
  #you just (almost certainly with no intention) assigned a value to an attribute
end 
```

另外，你的问题是：

> 即使在有问题的表达式之前没有分配具有相同名称的局部变量时，如果没有显式接收器也不能使用 setter 方法：

如果反过来，则不能在相关表达式之前分配具有相同名称的局部变量，因为分配将使用 setter（如本答案第一段所述）

关于实现/访问属性方法使用的变量：Getter 和 Setter 使用实例变量。因此，例如`attr_accessor`实际上定义了这样的东西：

```
 def foo
   @foo
 end

 def foo=(data)
   @foo = data
 end 
```

那么，属性被声明为实例变量而不是局部变量，为什么程序员可以像局部变量一样赋值呢？这会留下错误的印象，即您可以通过分配局部变量来分配对象的实例变量。如果 ruby​​ 会这样做，那几乎肯定会导致严重的内存管理问题。简而言之：`foo = 'bar'`并且`@foo = 'bar'`不一样，并且正是因为`attr`方法 use `@foo = 'bar'`，您不能通过 using 调用它们`foo = 'bar'`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-01T21:09:54.283

我认为@sawa 终于澄清了“反私人”的含义。

萨瓦评论：

> 私有意味着它**不能**有明确的接收者。对此的否定是它**可能**有一个明确的接收者，这不是我要提到的。我提到了一个方法**必须**有一个显式接收器的情况，这是对私有的。我觉得你很困惑。

我很困惑，显然和所有其他评论者一样，因为“反私人”和“反对私人”不是标准术语，意思也不是很明显。

我认为原始问题的意思是：“**既然setter需要一个显式的接收器，并且`private`禁止显式的接收器，我怎么能调用一个`private`setter呢？** ”换句话说，“anti-private”的意思是“*不兼容`private`*”，或者“*无法使用`private`*” ”。

Jörg W Mittag 雄辩地解释了[正常`private`规则](https://stackoverflow.com/a/10814553/498594)的一个例外。基本上，`self`即使 setter 是私有的，也可以调用它们，因为没有其他方法可以调用它们（除非您使用繁琐的`send`）。

因此，setter 对显式接收者的要求与 setter 完全兼容`private`，只是因为规则的例外。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-11-01T18:25:39.807

Beat Richartz 的回答已经非常完整，但我想强调一点关于你提出的行为。

在您的问题中，您有以下示例代码：

```
class A; attr_writer :foo end
A.new.instance_eval do
  foo = :foo  # <= No local variable named `foo` has been assigned before this point
  p @foo
end 
```

您建议分配调用 setter 方法。如果`foo`尚未分配局部变量，您希望这种情况发生。

**但是在那之前你会**使用什么语法来分配本地？

如果无接收分配`foo = :foo`意味着调用 setter（当它存在时），您需要另一个语法结构来表示“*分配这个局部变量，不管是否有 setter* ”。

如果你有提议，我真的很想听听你的提议（我不是在讽刺）。听到关于语言设计的不同观点会很有趣。

我并不是说您的方式必然比当前的 ruby​​ 方式“更糟”。但是在某些时候，语言设计者必须为模棱两可的情况决定默认行为，而 Matz 决定无接收者分配分配本地。**

# android - 相同的选择器不适用于 Android

> ID：14603636
> 
> 赞同：0
> 
> 时间：2013-01-30T12:07:21.870
> 
> 标签：android, selector

我正在使用一个在所有活动中都能正常工作的选择器，您可以在下面看到它的 XML。

```
<selector
xmlns:android="http://schemas.android.com/apk/res/android">
<item
    android:state_pressed="true"
    android:drawable="@drawable/active_date_horizontal_5_pressed" /> <!-- pressed -->
<item
    android:state_focused="true"
    android:drawable="@drawable/active_date_horizontal_5_pressed" /> <!-- focused -->
<item
    android:drawable="@drawable/active_date_horizontal_5" /> <!-- default --> 
```

除了一项活动外，它的作用并不可笑。您可以在下面的三个屏幕截图中看到选择器在前两个屏幕截图中正常工作，而在最后一个屏幕截图中不起作用。

1)![第一个屏幕截图](../Images/4f56aadf3500d1109366b2648fb51fa9.png)

2)![第二个屏幕截图](../Images/fe46bcf09a7998eafbce87346763389d.png)

3)![最后的屏幕截图，选择器不起作用](../Images/5d0409439cb9170dd2ee12df83cfb6cb.png)

这些是自定义的 GridView，其中填充了自定义的 BaseAdapter。GridViews 中的单元格有一个 Xml 布局，其背景是选择器。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T12:34:11.953

看来我解决了自己的问题。

您可以看到我在下面的选择器中应用的 Xml 布局

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="60dp"
android:orientation="vertical"
android:background="@drawable/calendar_cell_selector" >

<TextView
    android:id="@+id/txtWeeklyEventName"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_centerInParent="true"
    android:gravity="center"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<ImageView
    android:id="@+id/imgCornerWeekly"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/txtWeeklyEventName"
    android:layout_alignRight="@+id/txtWeeklyEventName"
    android:src="@drawable/corner_orange"
    android:visibility="visible" />

</RelativeLayout> 
```

您可以看到 RelativeLayout 的背景是选择器，但 TextView 会填充整个布局，因此 Android 无法处理选择器。

因此，我从 RelativeLayout 中删除了背景并将其设置为 TextView，它完全可以工作。

谢谢我！

# android - Web 服务 SocketTimeOutException 导致数据库不一致

> ID：14603642
> 
> 赞同：7
> 
> 时间：2013-01-30T12:07:37.823
> 
> 标签：android, web-services, ruby-on-rails-3.2, http-post, httpclient

在 Apache HTTP 客户端库的帮助下从 Android 设备调用 Rails Web 服务时，我想克服以下情况

设想 ：

客户端（Android）：发起 HTTP POST 请求（使用 Apache HTTP 客户端，JSON 作为交换格式）将少量记录插入服务器数据库（MySQL）。

`(SocketTimeOutException)`服务器（Rails 中的 Web 服务）：处理请求并将记录成功插入数据库，但同时在客户端发生超时。

客户端（Android）：超时时，重试执行相同的 HTTP POST 请求，并再次将相同的记录插入数据库并发生数据库不一致。

任何人都可以帮助我克服这种情况。

提前致谢

**编辑：**

我目前的情况：

1) 用户尝试通过填写和提交数据使用 Android 应用进行注册。所以基本上 POST 服务包含发送到服务器的所有必需用户（Rails 和 MySql）

2) POST 请求由服务器处理，该过程主要负责将记录插入数据库，并使用插入数据的 USER_ID 向客户端提供响应。

3) 轰隆隆！！数据已插入 MySql 数据库，但由于某种原因存在`SocketTimeOutException`于 Android 端，因此 Android 端没有 USER_ID，用户尝试再次注册........ 数据库不一致，我很伤心:(

注意：步骤 3) 的发生非常罕见。但是当服务器太忙或有一些处理负载时，这种情况很常见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T12:51:35.137

对于您上面描述的特定情况，我建议您在程序中添加一个会话 cookie。当用户发布数据时，您检查该会话是否已经存在 USER_ID，如果是，则返回它，如果没有，则执行数据库插入。因此，即使初始插入发生，然后在用户获得响应之前超时，您也可以在用户重试注册时提供响应。没有让你的数据库被破坏。

您还可以在数据库中查找相同（或其他唯一）记录（最近创建）并在第二个请求中返回该 USER_ID。这将取决于用户发送的数据。但是，如果它是注册并且您在短时间内连续收到两篇具有相同电子邮件的帖子，那么可以肯定它来自同一个用户......

**编辑前：**

由于您使用的是 Rails，您可以简单地利用[create_or_update](http://apidock.com/rails/ActiveRecord/Base/create_or_update)方法来创建记录。基本上，您检查记录是否已经存在，然后更新它们，而不是盲目地插入新记录。

这是一个您可能无论如何都必须处理的问题，因为即使您没有转发问题，两个客户也可能同时发布相同的信息。

如果您想更详细地说明其工作原理，则必须提供有关帖子包含内容的更多信息。在这种情况下，键和唯一字段很有趣，以及有关记录是否绑定到特定用户等的任何信息......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T15:45:23.013

**#rule**始终允许 php 和 mysql 脚本在您的客户端（Android 或任何其他）之前超时。您可以通过在系统的所有端点上适当地设置超时来轻松确保这一点。

专门针对您的方案，您可以向您的用户表添加一个布尔值并将其命名为***`verified`***。

1.  用户注册时，***`verified=false`***默认未设置验证（ ）。
2.  当用户第一次登录时，已验证设置为 ( ***`verified=true`***)。
3.  当用户注册并且`username`指定的已经存在时，**如果*验证==false*则允许注册，否则**不允许注册。
4.  （**成本**）用户注册时，他应该登录。最好删除注册页面并向用户显示一个视觉指示器，表明注册已完成，现在我们正在登录。我通常通过在注册时显示一个进度对话框来显示“注册...”然后进入登录页面并向用户显示一个进度对话框，上面写着“正在登录...”。

这应该确保问题不再发生。如果登录屏幕上发生错误（超时），用户应留在该屏幕上以便他可以重试。这确实是 android (Intent) 上的正常流程。

* * *

*   您当然可以强制登录在注册页面上保持静音并继续重试直到它工作。
*   您还可以删除额外的登录步骤，并在第一次交易时验证用户，但这会花费很多（您必须检查每个请求）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T10:54:12.143

请尝试使用以下代码

```
HttpParams httpParameters = new BasicHttpParams();
            int timeoutConnection = 30000;
            HttpConnectionParams.setConnectionTimeout(httpParameters, timeoutConnection);
            int timeoutSocket = 30000;
            HttpConnectionParams.setSoTimeout(httpParameters, timeoutSocket);
            HttpClient httpclient = new DefaultHttpClient(httpParameters);
            HttpPost httppost = new HttpPost(url);
            StringEntity se = new StringEntity((JSONRequest));
            httppost.setEntity(se);
            httppost.setHeader("Accept", "application/json");
            httppost.setHeader("Content-type", "application/json; charset=utf-8");
            ResponseHandler<String> responseHandler = new BasicResponseHandler();
            strResponse = httpclient.execute(httppost, responseHandler); 
```

根据您的要求设置超时。

# javascript - 将正常日期转换为纪元时间

> ID：14603645
> 
> 赞同：0
> 
> 时间：2013-01-30T12:07:47.450
> 
> 标签：javascript, jquery

我试图使用一个图形插件，它只接受格式为“ `1196463600000`”的输入日期，我猜这是纪元时间戳。但是我的日期格式是“ `2005-01-01`”格式，我已经搜索了很多以找到将正常时间格式转换为纪元的方法，bt 找不到任何.. 使用javascript可以进行时间转换吗？任何人都可以提出一个好的方法吗？

我试过`new Date('2005.01.01').getTime() / 1000;` BT它没有用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T12:14:06.137

您的示例中有两个错误：

1.  您不需要除以 1000，因为您的图形插件接缝使用毫秒作为输入
2.  正确的日期格式是 YYYY-MM-DD 而不是 YYYY.MM.DD（连字符而不是点）

固定示例：

```
new Date('2005-01-01').getTime() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T12:10:05.217

这应该有效：

```
var date = new Date ( '2005-01-01' );
var timeStamp = Math.round ( date.getTime () / 1000 ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T12:13:44.063

```
new Date('2005-01-01').getTime() 
```

在 Firefox 中为我工作。

JSFiddle[在这里](http://jsfiddle.net/cYQMU/1/)

和转换器在[这里验证](http://www.epochconverter.com/)

# postgresql - 显示特定用户拥有的所有表的命令

> ID：14603647
> 
> 赞同：2
> 
> 时间：2013-01-30T12:07:59.280
> 
> 标签：postgresql, psql

当我使用 in 中的`\d`命令时`psql`，我会得到所有用户的表和序列的列表。

是否有一个命令只显示特定用户是所有者的表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T12:44:37.297

不是 psql 命令：

```
select c.relname, relkind
from
    pg_class c
    inner join
    pg_roles r on r.oid = c.relowner
where
    r.rolname = 'that_owner'
    and
    c.relkind = 'r'
order by c.relname 
```

如果你想要表格和序列：

```
 and
    c.relkind in ('r', 'S') 
```

# silverlight - Silverlight SDK DataGrid 不总是触发 MouseLeftButtonUp 事件？

> ID：14603657
> 
> 赞同：0
> 
> 时间：2013-01-30T12:08:39.163
> 
> 标签：silverlight, datagrid, mouseevent

为什么不`DataGrid`总是触发`MouseLeftButtonUp`事件？

我尝试在此事件上实现单击行为`DataGridTextColumn`并绑定到该事件。

```
dataGrid.MouseLeftButtonUp += OnDataGridMouseLeftButtonUp; 
```

在处理程序中，我调用`BeginEdit()`并将焦点放在`TextBox`元素上。当我收到事件时它会起作用，但它并不总是被触发？有谁知道如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T02:01:40.987

尝试改用 AddHandler。

```
 dataGrid.AddHandler(UIElement.MouseLeftButtonUpEvent,
      new MouseButtonEventHandler(OnMouseLeftButtonUp), true) 
```

...

```
private void OnMouseLeftButtonUp(object sender, MouseButtonEventArgs e)
{
  // etc...
} 
```

# iphone - 如何在应用程序的首次发布时显示 UIView？

> ID：14603661
> 
> 赞同：-5
> 
> 时间：2013-01-30T12:08:48.650
> 
> 标签：iphone, ios, uiview

我想为应用程序的首次登录显示登录视图。我在 stackoverflow 本身中找到了几个答案。但是他们每个人都会产生只有状态栏的黑屏或显示我的另一个主页..有没有办法解决这个问题..

解释：

当有人安装应用程序并第一次启动它时，它应该显示一个登录页面。从下一次启动开始，应用程序应该从其主页开始。（就像我们在许多应用程序中看到的那样，会有一个“入门页面”或“如何玩”视图）。

谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T12:32:40.297

这样做：

```
if (![[NSUserDefaults standardUserDefaults] boolForKey:@"HasLaunchedOnce"]) {
 //first launch
 //show your login view
 [[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"HasLaunchedOnce"]
 }
 else
{
  // app already launched
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T12:21:24.443

我从你的问题中了解到的是，当你第一次运行你的应用程序时，你想加载登录视图，而在第一次运行后，你想加载另一个视图。在这种情况下，您可以使用`NSUserDefaults`iOS 中的可用功能。

当您的应用程序第一次运行时，您可以即当您显示登录视图时，您可以将一些整数值存储在`NSUserDefaults`. 并且当您下次加载应用程序时，您可以检查`NSUserDefaults`For eg中的值存储

```
if(value == 0)
  // load Login View
else
  // load other view 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T12:37:00.993

--首先在appdelegate文件中导入你的登录页面.h文件

之后

在 appdelegate.m 文件中

```
-(BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions

//Here create ur login page class's object like below code

  YourLoginPage *Login=[[YourLoginPage alloc]initWithNibName:@"YourLoginPage" bundle:nil];

self.window.rootViewController = Login; 
```

这将工作，试试吧..

# ruby - 使对象在 sinatra 范围内可用

> ID：14603667
> 
> 赞同：1
> 
> 时间：2013-01-30T12:09:02.637
> 
> 标签：ruby, sinatra

在 sinatra 中，我有以下内容：

```
config = YAML.load_file('sinatra_resources/server.yml')
usernamedk = config["dkuser"]
passworddk = config["dkpass"]
passwordse = config["sepass"]
usernamese = config["seuser"]
database = config["database"]

cpooldk = OCI8::ConnectionPool.new(1, 5, 2, usernamedk, passworddk, database)
cpoolse = OCI8::ConnectionPool.new(1, 5, 2, usernamese, passwordse, database) 
```

当我在路由中使用这些值中的任何一个时，它都可以正常工作。但是我想在函数中使用它们，当我引用这些变量等时。

作为我的问题的一个例子，如果我有一个函数

```
def getuser(lang)
 if lang == "se" then
   return usernamese
 else
   return usernamedk
end 
```

在一条路线内我有 user = getuser(lang)

然后当我尝试用 lang = "se" 调用它时，我发现变量 usernamese 是未定义的。同样的事情适用于我想在多个路由之间共享的函数中使用的所有变量。

我尝试了以下方法：配置做

```
set :env, "local"

set :usernamedk, config["dkuser"]
set :passworddk, config["dkpass"]
set :passwordse, config["sepass"]
set :usernamese, config["seuser"]
set :database, config["database"]

set :cpooldk, OCI8::ConnectionPool.new(1, 5, 2, setting.usernamedk, setting.passworddk, setting.database)
set :cpoolse,  OCI8::ConnectionPool.new(1, 5, 2, setting.usernamese, setting.passwordse, setting.database)

end 
```

但我得到了错误 undefined local variable or method `usernamedk' for main:Object (NameError)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T16:29:25.633

当您可以将配置作为哈希访问时，为什么还要打扰所有变量？

```
configure do
  # no need to set the env as local if you're trying to affect the scope

  config = YAML.load_file('sinatra_resources/server.yml')
  set :config, config

  set :cpooldk, OCI8::ConnectionPool.new(1, 5, 2, config["dkuser"], config["dkpass"], config["database"])
  set :cpoolse, OCI8::ConnectionPool.new(1, 5, 2, config["seuser"], config["sepass"], config["database"])
end

helpers do
  def getuser(lang)
    if lang == "se" then
      settings.config["seuser"] # no need for the explicit returns in Ruby
    else
      settings.config["dkuser"]
    end
  end
end

get "/some-route" do
  get_user("se")
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T18:25:38.070

您的变量只有本地范围，它们不是实例变量。您可以通过添加前缀将它们用作实例变量，`@`或者`@ usernamedk`您可以使用所有这些变量作为设置（参见[https://github.com/sinatra/sinatra#configuration](https://github.com/sinatra/sinatra#configuration)）：

```
configure do
  set :usernamedk = config["dkuser"]
  set :passworddk = config["dkpass"]
  set :passwordse = config["sepass"]
  set :usernamese = config["seuser"]
  set :database = config["database"]
end

def getuser(lang)
  if lang == "se" then
    return settings.usernamese
  else
    return settings.usernamedk
end 
```

希望有帮助

# c++ - 移动语义澄清

> ID：14603669
> 
> 赞同：2
> 
> 时间：2013-01-30T12:09:05.380
> 
> 标签：c++, c++11, move-semantics

我已经阅读了下面的帖子，它很好地了解了移动语义：

> [有人可以向我解释一下移动语义吗？](https://stackoverflow.com/questions/3106110/can-someone-please-explain-move-semantics-to-me)

但是我仍然无法理解有关移动语义的以下内容-

1.  复制省略和 RVO 是否仍然适用于没有移动构造函数的类？

2.  即使我们的类没有移动构造函数，但 STL 容器有一个。对于像这样的操作

std::vector vt = CreateMyClassVector();

并执行排序等操作。为什么 STL 不能在内部利用移动语义来使用不需要移动构造函数的复制省略或 RVO 等操作在内部改进此类操作？

3\. 在以下情况下，我们是否受益于移动语义 -

std::vector<int> vt1(1000000, 5); // 创建并初始化 100 万个值为 5 的条目

std::vector<int> vt2(std::move(vt1)); // 移动 vt1 到 vt2

由于整数是原始类型，移动整数元素不会提供任何优势。或者在移动操作之后 vt2 只是指向堆中的 vt1 内存，并且 vt1 设置为 null。实际发生了什么？如果是后者，那么即使第 2 点也认为我们的类可能不需要移动构造函数。

4\. 当使用 std::move 左值调用 push_back() 时，例如：

```
 std::vector<MyClass> vt;

    for(int i=0; i<10; ++i)
    {
        vt.push_back(MyClass());
    }

    MyClass obj;

    vt.push_back(std::move(obj)); 
```

现在，由于向量具有连续的内存分配，并且 obj 在内存中的其他位置定义，移动语义如何将 obj 内存移动到向量 vt 连续内存区域，在这种情况下不移动内存与复制内存一样好，移动如何证明通过简单地移动指向堆的不同区域中的内存的指针来向量连续的内存需求。？

感谢您提前解释！[按要求编辑问题。]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T12:29:22.507

大多数语义不是移动*记忆*的方式。这完全是关于将对象的所有权从一个对象实例转移到另一个对象实例。当你这样做时：

```
std::string str1("Some string.");
std::string str2(std::move(str1)); 
```

`std::string`分配和管理字符缓冲区。因此，每个人都`std::string` *拥有*一个内存缓冲区，其中包含字符串本身。

调用来构造的移动构造函数`str2`将获取分配的字符缓冲区`str1`并将其从该对象中删除。因此`str2`现在有了`str1`最初分配的指针，并且`str1`不再有那个指针了。这就是移动语义的全部内容：转移对象拥有的内存的所有权。

如果您的类没有移动构造函数，`std::vector`则不会调用它。明显地。因此，它不能利用移动构造函数可能带来的任何潜在优化。但是这些优化机会*只*存在于具有值语义并且包含必须管理的资源的对象。否则，运动对你没有帮助。

一般规则是使用智能指针和容器对象，如`vector`、`string`等，以避免编写移动构造函数。因此，（如果您的编译器正确支持生成移动构造函数）资源管理会自动发生。

# c# - c#和javascript中的常规exp

> ID：14603674
> 
> 赞同：2
> 
> 时间：2013-01-30T12:09:24.857
> 
> 标签：c#, javascript, .net, regex

我在 javascript 中有一个用于电子邮件验证的正则表达式。

```
/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/; 
```

现在，我已经在项目中实现了客户端验证，但是根据某人的建议，我想添加额外的服务器端验证。

这是我在 c# 中发现/修改的

```
 @"^([A-Za-z0-9]([-._\w]*[0-9a-zA-Z])*@([A-Za-z0-9][-\w]*[A-Za-z0-9]\.)+[A-Za-z]{2,9})"; 
```

我希望它完全像 javascript 代码一样工作。

谁能帮我修改代码？

.

ps：如果本网站仅用于将我的问题标记为否定，因为它不是高保真问题（这是我过去 6 个月的经验，而 2-3 年前不是这种情况）那么请告诉我在哪里可以去寻求一些基本的帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T12:14:52.203

如果您希望正则表达式完全像在 JavaScript 中一样工作，您可以几乎不加改动地使用它，只需删除分隔符：

```
@"^([A-Za-z0-9_\-.])+@([A-Za-z0-9_\-.])+\.([A-Za-z]{2,4})$" 
```

（顺便说一下，您不需要转义`@`点或点（当它在字符类中时）。对于 .NET 和 JavaScript 都是如此。）

# c# - 对于表中的每一行，返回包含值 +21 的所有行（通过使用 SQL）

> ID：14603675
> 
> 赞同：0
> 
> 时间：2013-01-30T12:09:24.420
> 
> 标签：c#, sql

这似乎很容易，但我被困在这里。我正在使用 VS2010，C# 环境。

所以，基本上，我们有包含表“masses”的数据库。此表包含列“质量”（值类型为双精度）。对于每一行，我必须在特定行 PLUS 21 中找到“质量”等于“质量”值的所有记录。并将这些结果记录放入同一数据库中的现有表中。

它可以通过 SQL 完成还是我必须使用迭代来完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T12:12:43.050

您可以使用`in`语句来执行此操作。

```
INSERT INTO SomeOtherTable (<columns you want>)
SELECT <columns you want>
FROM   Masses
WHERE  Mass IN (SELECT mass + 21
                FROM   masses) 
```

或者，这可以使用以下方式编写`EXISTS`：

```
INSERT INTO SomeOtherTable (<columns you want>)
SELECT <columns you want>
FROM   Masses
WHERE  EXISTS
(
    SELECT NULL
    FROM   masses M
    WHERE  Masses.Mass = M.Mass + 21 
) 
```

或使用派生表：

```
INSERT INTO SomeOtherTable (<columns you want>)
SELECT <columns you want>
FROM   Masses
       INNER JOIN (SELECT Mass + 21 AS NewMass
                   FROM   masses) AS NewMasses
         ON NewMasses.NewMass = Masses.Mass 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-30T12:20:23.847

您可以使用游标遍历表。游标可以将行中列的值分配给 SQL 变量。然后对每一行进行过滤，然后对结果进行任何您想要的操作。

```
-- Create a cursor that iterates through the table and only reads the 'mass' column
DECLARE C1 CURSOR FOR 
SELECT mass FROM masses
DECLARE @current decimal

OPEN C1

-- Copy the value from the 'mass' column to a vaiable
FETCH NEXT FROM C1 INTO @current

WHILE @@fetch_status = 0
BEGIN

    -- Select the rows that have mass = current row mass + 21
    SELECT * -- This ca be improved by selecting only the rows you need
    FROM masses
    WHERE mass = @current + 21

    FETCH NEXT FROM C1 INTO @current
END
CLOSE C1
DEALLOCATE C1 
```

在嵌套选择中，您可以将所有行复制到目标表，例如通过更改以下行：

```
INSERT INTO DESTINATION_TABLE(row1, row2, ..., rown)
SELECT (row1, row2, ..., rown)
FROM masses
WHERE mass = @current + 21 
```

# asp.net - 仅将预定义的值传递给用户控件属性

> ID：14603680
> 
> 赞同：0
> 
> 时间：2013-01-30T12:09:41.107
> 
> 标签：asp.net, properties, user-controls

我创建了一个用户控件并定义了属性，以便从 .aspx 页面传递值。作为下一步，我想定义用户控件可以在这些属性中接受的值。

例如，如果它是一个期望 bool 值的属性，我希望能够选择 true 或 false 等。

不太确定如何开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T13:30:45.967

你的问题有点模糊，但这里是：

1.  如果您的属性是布尔值，则只有 2 个可能的值，因此您无需再做任何事情。
2.  如果您有一组整数值，则可以将它们设置为枚举。
3.  如果您有一组字符串值，最好将它们重新加工成 Enum 并使用几种技术之一（询问您是否需要）将文本与数值相关联。

所有这些都假设离散值。如果您有一系列连续值（-1.000 到 1.000 或类似的值），您可能需要在属性的 Getter 和 Setter 中编写验证代码。另一种选择是在您的基础模型上使用 DataAnnotations。

如果您只需要知道如何防止将不良数据输入到用户控件中的 Web 控件中，则需要研究验证控件。

# c# - 如何知道我的应用程序代码中何时调用了任何方法？

> ID：14603683
> 
> 赞同：0
> 
> 时间：2013-01-30T12:09:50.067
> 
> 标签：c#, .net, .net-4.0, aop

只是为了好玩，我想写一个方面，比如日志记录、跟踪或检测/分析。但是我不想使用任何已经可用的 AOP 框架。

我过去使用过 PostSharp，现在 ASP.NET MVC 引入了动作过滤器，它非常类似于 aspect/advise 注入，而 .NET 4 有 CodeContracts，它们也非常类似于 aspect，我有一个很好的主意我希望我的方面 API 看起来像什么。

唯一我还没有弄清楚的事情，我相信它是构建 AOP 库的核心，是*如何知道一个方法何时被调用？*

什么，我要一直看调用堆栈吗？我是否要查看主 UI 线程及其同步上下文以查看它是否已分配一些工作，即是否已获得进入的方法？知道一个方法是否会被调用的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T12:30:22.693

有两种方法可以知道一个方法是否会被调用。

1.  您可以从 ContextBoundObject 继承，但您失去了基类的唯一机会。你可以检查[这个](http://www.codeproject.com/Articles/8414/The-simplest-AOP-scenario-in-C)

2.  您可以继承您的类并覆盖您的方法。新方法可以在调用基方法之前调用拦截器。幸运的是，这个派生类可以在运行时构建。实际上，这就是 Castle 的 DynamicProxy 所做的。详细地，您构建一个继承您的类的类型，以便在运行时拦截并实例化这个派生类。您将 IL 代码发送到新生成的类的方法中。

我不知道是否允许粘贴长代码，但这是我编写的 DynamicProxy 的一个小版本。它依赖的唯一库是`System`. 你可以像这样使用它。

```
// typeof obj: public class TestClassProxy : TestClass, IInterface1, IIterface2
var obj = Proxy.Of<TestClass>(new CallHandler(), typeof(IInterface1), typeof(IInterface2));

obj.MethodVoid();
Console.WriteLine(obj.PublicSquare(3));
Console.WriteLine(obj.MethodString()); 
```

触发处理程序方法：

1.  在调用方法之前（BeforeMethodCall）
2.  调用方法后（AfterMethodCall）
3.  如果方法中发生异常（OnError）

所有这些方法都接受参数、具有该方法的对象、当前方法的 MethodInfo 以及传递给方法的参数。另外，AfterMethodCall 采用返回值，而 OnError 采用已引发的异常。

这里是魔法`Proxy`课

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Reflection;
using System.Reflection.Emit;

namespace emit
{
public class Proxy
{
    #region static

    private static readonly AssemblyBuilder AssemblyBuilder;
    private static readonly ModuleBuilder ModuleBuilder;

    private static readonly object LockObj = new Object();
    private static readonly Dictionary<string, Type> TypeCache = new Dictionary<string, Type>();

    static Proxy()
    {
        lock (LockObj)
        {
            AssemblyBuilder = AppDomain.CurrentDomain.DefineDynamicAssembly(
                new AssemblyName("Taga.Proxies"),
                AssemblyBuilderAccess.Run);

            var assemblyName = AssemblyBuilder.GetName().Name;

            ModuleBuilder = AssemblyBuilder.DefineDynamicModule(assemblyName);
        }
    }

    private static Type GetImplementedType(Type baseType, Type[] interfaceTypes)
    {
        var key = GetTypeKey(baseType, interfaceTypes);
        return TypeCache.ContainsKey(key) ? TypeCache[key] : null;
    }

    private static void AddImplementation(Type baseType, Type[] interfaceTypes, Type implementationType)
    {
        var key = GetTypeKey(baseType, interfaceTypes);
        TypeCache.Add(key, implementationType);
    }

    private static string GetTypeKey(Type baseType, Type[] interfaceTypes)
    {
        var key = String.Empty;
        key += baseType.FullName;
        key = interfaceTypes.Aggregate(key, (current, interfaceType) => current + interfaceType);
        return key;
    }

    public static TBase Of<TBase>(ICallHandler callHandler, params Type[] interfaceTypes) where TBase : class
    {
        var builder = new Proxy(typeof(TBase), interfaceTypes);
        var type = builder.GetProxyType();
        return (TBase)Activator.CreateInstance(type, callHandler);
    }

    public static object Of(ICallHandler callHandler, Type[] interfaceTypes)
    {
        if (interfaceTypes == null || interfaceTypes.Length == 0)
            throw new InvalidOperationException("No interface type specified");
        return Of<object>(callHandler, interfaceTypes);
    }

    #endregion

    #region Proxy

    private TypeBuilder _typeBuilder;
    private FieldBuilder _callHandlerFieldBuilder;
    private readonly Type _baseClassType;
    private readonly Type[] _interfaceTypes;

    private Proxy(Type baseClassType, Type[] interfaceTypes)
    {
        if (interfaceTypes == null || !interfaceTypes.Any())
            _interfaceTypes = Type.EmptyTypes;
        else if (interfaceTypes.Any(it => !it.IsInterface || !it.IsPublic || it.IsGenericType))
            throw new InvalidOperationException("Interface Types must be public and non generic");
        else
            _interfaceTypes = interfaceTypes;

        if (baseClassType == null)
            _baseClassType = typeof(object);
        else if (!baseClassType.IsClass || baseClassType.IsAbstract || baseClassType.IsGenericType || baseClassType.IsSealed || !baseClassType.IsPublic || !baseClassType.HasDefaultConstructor())
            throw new InvalidOperationException("Base Class Type must be a public, non-sealed, non-abstract, non-generic class with a public default constructor");
        else
            _baseClassType = baseClassType;
    }

    private string _typeName;
    private string TypeName
    {
        get { return _typeName ?? (_typeName = BuildTypeName()); }
    }

    private string BuildTypeName()
    {
        var typeName = "__";

        if (_baseClassType != null)
            typeName += _baseClassType.Name + "__";

        foreach (var interfaceType in _interfaceTypes)
            typeName += interfaceType.Name + "__";

        return typeName + "Proxy__";
    }

    private Type GetProxyType()
    {
        var type = GetImplementedType(_baseClassType, _interfaceTypes);
        if (type != null)
            return type;

        type = BuildType();

        AddImplementation(_baseClassType, _interfaceTypes, type);
        return type;
    }

    private Type BuildType()
    {
        InitTypeBuilder();
        DefineCallHandlerField();
        BuildConstructor();
        ExtendBase();
        ImplementInterfaces();

        return _typeBuilder.CreateType();
    }

    private void InitTypeBuilder()
    {
        // public class __BaseClass__Interface1__Interface2__Proxy__ : BaseClass, Interface1, Interface2
        _typeBuilder = ModuleBuilder.DefineType(
            TypeName,
            TypeAttributes.Public | TypeAttributes.Class,
            _baseClassType,
            _interfaceTypes);
    }

    private void DefineCallHandlerField()
    {
        // private ICallHandler _callHandler;
        _callHandlerFieldBuilder = _typeBuilder.DefineField("_callHandler", typeof(ICallHandler), FieldAttributes.Private);
    }

    private void BuildConstructor()
    {
        var constructorBuilder = DeclareContsructor();   // public ProxyClass(ICallHandler callHandler)
        ImplementConstructor(constructorBuilder);       // : base() { this._callHandler = callHandler; }
    }

    private void ExtendBase()
    {
        foreach (var mi in _baseClassType.GetVirtualMethods())
            BuildMethod(mi);
    }

    private void ImplementInterfaces()
    {
        foreach (var methodInfo in _interfaceTypes.SelectMany(interfaceType => interfaceType.GetMethods()))
            BuildMethod(methodInfo);
    }

    private ConstructorBuilder DeclareContsructor()
    {
        var constructorBuilder = _typeBuilder.DefineConstructor(
            MethodAttributes.Public,
            CallingConventions.HasThis,
            new[] { typeof(ICallHandler) });
        return constructorBuilder;
    }

    private void ImplementConstructor(ConstructorBuilder constructorBuilder)
    {
        var baseCtor = _baseClassType.GetConstructor(Type.EmptyTypes);

        var il = constructorBuilder.GetILGenerator();

        // call base ctor
        il.Emit(OpCodes.Ldarg_0); // push this
        il.Emit(OpCodes.Call, baseCtor); // Call base constructor this.base(); pops this

        // set _callHandler
        il.Emit(OpCodes.Ldarg_0); // push this
        il.Emit(OpCodes.Ldarg_1); // push callHandler argument
        il.Emit(OpCodes.Stfld, _callHandlerFieldBuilder); // this._callHandler = callHandler, pop this, pop callhandler argument

        il.Emit(OpCodes.Ret); // exit ctor
    }

    private void BuildMethod(MethodInfo mi)
    {
        var methodBuilder = CallHandlerMethodBuilder.GetInstance(_typeBuilder, mi, _callHandlerFieldBuilder);
        methodBuilder.Build();
    }

    #endregion
}

class CallHandlerMethodImplementor : CallHandlerMethodBuilder
{
    internal CallHandlerMethodImplementor(TypeBuilder typeBuilder, MethodInfo methodInfo, FieldBuilder callHandlerFieldBuilder)
        : base(typeBuilder, methodInfo, callHandlerFieldBuilder)
    {
    }

    protected override void SetReturnValue()
    {
        // object res = returnValue;
        ReturnValue = IL.DeclareLocal(typeof(object));
        if (MethodInfo.ReturnType != typeof(void))
            IL.Emit(OpCodes.Stloc, ReturnValue); // pop return value of BeforeCall into res
        else
            IL.Emit(OpCodes.Pop); // pop return value of BeforeCall
    }
}

class CallHandlerMethodOverrider : CallHandlerMethodBuilder
{
    internal CallHandlerMethodOverrider(TypeBuilder typeBuilder, MethodInfo methodInfo, FieldBuilder callHandlerFieldBuilder)
        : base(typeBuilder, methodInfo, callHandlerFieldBuilder)
    {
    }

    protected override void SetReturnValue()
    {
        // ReturnValue = base.Method(args...)
        CallBaseMethod();
        // stack'ta base'den dönen değer var
        SetReturnValueFromBase();
    }

    private void CallBaseMethod()
    {
        IL.Emit(OpCodes.Pop); // pop return value of BeforeCall

        // base'den Method'u çağır
        // returnValue = base.Method(params...)
        IL.Emit(OpCodes.Ldarg_0); // push this 
        for (var i = 0; i < ParameterCount; i++)  // metoda gelen parametreleri stack'e at
            IL.Emit(OpCodes.Ldarg_S, i + 1);// push params[i]
        IL.Emit(OpCodes.Call, MethodInfo); // base.Method(params) pop this, pop params push return value
    }

    private void SetReturnValueFromBase()
    {
        ReturnValue = IL.DeclareLocal(typeof(object));

        if (MethodInfo.ReturnType == typeof(void))
            return;

        // unbox returnValue if required
        if (MethodInfo.ReturnType.IsValueType)
            IL.Emit(OpCodes.Box, MethodInfo.ReturnType);
        IL.Emit(OpCodes.Stloc, ReturnValue); // pop return value into res
    }
}

abstract class CallHandlerMethodBuilder
{
    private ParameterInfo[] _parameters;
    private MethodBuilder _methodBuilder;
    private readonly TypeBuilder _typeBuilder;
    private readonly FieldBuilder _callHandlerFieldBuilder;

    protected readonly MethodInfo MethodInfo;

    protected ILGenerator IL { get; private set; }
    protected int ParameterCount { get; private set; }

    private MethodInfo _beforeCall;
    private MethodInfo BeforeCall
    {
        get
        {
            return _beforeCall ?? (_beforeCall = typeof(ICallHandler).GetMethods().First(m => m.Name == "BeforeMethodCall"));
        }
    }

    private MethodInfo _afterCall;
    private MethodInfo AfterCall
    {
        get
        {
            return _afterCall ?? (_afterCall = typeof(ICallHandler).GetMethods().First(m => m.Name == "AfterMethodCall"));
        }
    }

    private MethodInfo _onError;
    private MethodInfo OnError
    {
        get
        {
            return _onError ?? (_onError = typeof(ICallHandler).GetMethods().First(m => m.Name == "OnError"));
        }
    }

    protected CallHandlerMethodBuilder(TypeBuilder typeBuilder, MethodInfo methodInfo, FieldBuilder callHandlerFieldBuilder)
    {
        _typeBuilder = typeBuilder;
        MethodInfo = methodInfo;
        _callHandlerFieldBuilder = callHandlerFieldBuilder;
    }

    private void Declare()
    {
        // public override? ReturnType Method(arguments...)
        _methodBuilder = _typeBuilder.DefineMethod(MethodInfo.Name,
                                                      MethodAttributes.Public | MethodAttributes.HideBySig | MethodAttributes.Virtual,
                                                      MethodInfo.ReturnType,
                                                      MethodInfo.GetParameterTypes());
        IL = _methodBuilder.GetILGenerator();

        _parameters = MethodInfo.GetParameters();
        ParameterCount = _parameters.Length;
    }

    private LocalBuilder _objParameter;
    private void SetObjectParameter()
    {
        // CallHandlera verilecek object obj
        _objParameter = IL.DeclareLocal(typeof(object)); // object obj;
        IL.Emit(OpCodes.Ldarg_0); // push this
        IL.Emit(OpCodes.Stloc, _objParameter); // obj = this; pops this
    }

    private LocalBuilder _methodInfoParameter;
    private void SetMethodInfoParameter()
    {
        // CallHandlera verilecek MethodInfo methodInfo
        _methodInfoParameter = IL.DeclareLocal(typeof(MethodInfo)); // MethodInfo methodInfo;
        IL.Emit(OpCodes.Ldtoken, MethodInfo);
        IL.Emit(OpCodes.Call, typeof(MethodBase).GetMethod(
            "GetMethodFromHandle", new[] { typeof(RuntimeMethodHandle) })); // MethodBase.GetMethodFromHandle(new RuntimeMethodHandle());
        IL.Emit(OpCodes.Stloc, _methodInfoParameter);
    }

    private LocalBuilder _argsParameter;
    private void SetArgsParameters()
    {
        // CallHandlera verilecek object[] args
        _argsParameter = IL.DeclareLocal(typeof(object[])); // object[] args;
        IL.Emit(OpCodes.Ldc_I4, ParameterCount); // push parameterCount as Int32
        IL.Emit(OpCodes.Newarr, typeof(object)); // push new object[parameterCount]; pops parameterCount
        IL.Emit(OpCodes.Stloc, _argsParameter); // args = new object[ParameterCount]; pops new object[parameterCount]

        // Metoda gelen parametreleri args'a doldur
        for (var i = 0; i < ParameterCount; i++)
        {
            var parameterInfo = _parameters[i];

            IL.Emit(OpCodes.Ldloc, _argsParameter); // push args
            IL.Emit(OpCodes.Ldc_I4, i); // push i
            IL.Emit(OpCodes.Ldarg_S, i + 1); // push params[i]; pops i; metoda gelen parametrelerin i'incisi. 0'ıncı parametre this olduğu için  "+1" var
            if (parameterInfo.ParameterType.IsPrimitive || parameterInfo.ParameterType.IsValueType)
                IL.Emit(OpCodes.Box, parameterInfo.ParameterType); // (object)params[i]
            IL.Emit(OpCodes.Stelem_Ref); // args[i] = (object)params[i]; pops params[i]
        }
    }

    private void Try()
    {
        IL.BeginExceptionBlock(); // try {
    }

    private void InvokeBeforeMethodCall()
    {
        // this._callHandler.BeforeCall(obj, methodInfo, args);
        IL.Emit(OpCodes.Ldarg_0); // push this
        IL.Emit(OpCodes.Ldfld, _callHandlerFieldBuilder); // push _callHandler; pops this
        IL.Emit(OpCodes.Ldloc, _objParameter); // push obj
        IL.Emit(OpCodes.Ldloc, _methodInfoParameter); // push methodInfo 
        IL.Emit(OpCodes.Ldloc, _argsParameter); // push args
        IL.Emit(OpCodes.Call, BeforeCall); // _callHandler.BeforeCall(obj, methodInfo, args); push return value
    }

    protected LocalBuilder ReturnValue;
    protected abstract void SetReturnValue();

    private void InvokeAfterMethodCall()
    {
        // this._callHandler.AfterCall(obj, methodInfo, args, returnValue);
        IL.Emit(OpCodes.Ldarg_0); // push this
        IL.Emit(OpCodes.Ldfld, _callHandlerFieldBuilder); // push _callHandler; pops this
        IL.Emit(OpCodes.Ldloc, _objParameter); // push obj
        IL.Emit(OpCodes.Ldloc, _methodInfoParameter); // push methodInfo 
        IL.Emit(OpCodes.Ldloc, _argsParameter); // push args
        IL.Emit(OpCodes.Ldloc, ReturnValue); // push res
        IL.Emit(OpCodes.Call, AfterCall); // _callHandler.AfterCall(obj, methodInfo, args, returnValue); push return value (void değilse)
    }

    private void Catch()
    {
        var ex = IL.DeclareLocal(typeof(Exception)); 

        IL.BeginCatchBlock(typeof(Exception));          // catch 
        IL.Emit(OpCodes.Stloc_S, ex);                   // (Exception ex) {
        InvokeOnError(ex);                              //     _callHandler.AfterCall(obj, methodInfo, args);
        IL.EndExceptionBlock();                         // }
    }

    private void InvokeOnError(LocalBuilder exception)
    {
        // this._callHandler.OnError(obj, methodInfo, args);
        IL.Emit(OpCodes.Ldarg_0); // push this
        IL.Emit(OpCodes.Ldfld, _callHandlerFieldBuilder); // push _callHandler; pops this
        IL.Emit(OpCodes.Ldloc, _objParameter); // push obj
        IL.Emit(OpCodes.Ldloc, _methodInfoParameter); // push methodInfo 
        IL.Emit(OpCodes.Ldloc, _argsParameter); // push args
        IL.Emit(OpCodes.Ldloc, exception); // push ex
        IL.Emit(OpCodes.Call, OnError); // _callHandler.AfterCall(obj, methodInfo, args);
    }

    private void Return()
    {
        if (MethodInfo.ReturnType != typeof(void))
        {
            IL.Emit(OpCodes.Ldloc, ReturnValue); // push returnValue
            IL.Emit(OpCodes.Unbox_Any, MethodInfo.ReturnType); // (ReturnType)returnValue
        }

        IL.Emit(OpCodes.Ret); // returns the value on the stack, if ReturnType is void stack should be empty
    }

    internal void Build()
    {
        Declare();                   // public override? ReturnType Method(arguments...) {
        SetObjectParameter();        //     object obj = this;
        SetMethodInfoParameter();    //     MethodInfo methodInfo = MethodBase.GetMethodFromHandle(new RuntimeMethodHandle());
        SetArgsParameters();         //     object[] args = arguments;
        Try();                       //     try {
        InvokeBeforeMethodCall();    //         object returnValue = _callHandler.BeforeMethodCall(obj, methodInfo, args);
        SetReturnValue();            //         !IsAbstract => returnValue = (object)base.Method(arguments);
        InvokeAfterMethodCall();     //         _callHandler.AfterMethodCall(obj, methodInfo, args, returnValue);
        Catch();                     //      } catch (Exception ex) { _callHandler.OnError(obj, methodInfo, args, ex); }
        Return();                    //     IsVoid ? (return;) : return (ReturnType)returnValue; }
    }

    internal static CallHandlerMethodBuilder GetInstance(TypeBuilder typeBuilder, MethodInfo methodInfo, FieldBuilder callHandlerFieldBuilder)
    {
        if (methodInfo.IsAbstract)
            return new CallHandlerMethodImplementor(typeBuilder, methodInfo, callHandlerFieldBuilder);
        return new CallHandlerMethodOverrider(typeBuilder, methodInfo, callHandlerFieldBuilder);
    }
}

public interface ICallHandler
{
    object  BeforeMethodCall    (object obj, MethodInfo mi, object[] args);
    void    AfterMethodCall     (object obj, MethodInfo mi, object[] args, object returnValue);
    void    OnError             (object obj, MethodInfo mi, object[] args, Exception exception);
}

static class ReflectionExtensions
{
    public static bool HasDefaultConstructor(this Type type)
    {
        return type.GetConstructors(BindingFlags.Public | BindingFlags.Instance).Any(ctor => !ctor.GetParameters().Any());
    }

    public static Type[] GetParameterTypes(this MethodInfo methodInfo)
    {
        return methodInfo.GetParameters().Select(pi => pi.ParameterType).ToArray();
    }

    public static MethodBuilder GetMethodBuilder(this TypeBuilder typeBuilder, MethodInfo mi)
    {
        // MethodAttributes.Public | MethodAttributes.HideBySig | MethodAttributes.NewSlot | MethodAttributes.Virtual
        return typeBuilder.DefineMethod(mi.Name, mi.Attributes, mi.ReturnType, mi.GetParameterTypes());
    }

    public static MethodInfo[] GetVirtualMethods(this Type type)
    {
        return type.GetMethods().Where(mi => mi.IsVirtual).ToArray();
    }

    public static object GetDefaultValue(this Type t)
    {
        return typeof(ReflectionExtensions).GetMethod("Default").MakeGenericMethod(t).Invoke(null, null);
    }

    public static T Default<T>()
    {
        return default(T);
    }
}
} 
```

这是测试代码

```
using System;
using System.Collections.Generic;
using System.Globalization;
using System.Reflection;
using System.Threading;

namespace emit
{
public class Program
{
    private static void Main()
    {
        Thread.CurrentThread.CurrentUICulture = new CultureInfo("en-GB");
        try
        {
            TestProxy();
            Console.WriteLine("OK");
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex);
        }
        Console.ReadLine();
    }

    private static void TestProxy()
    {
        var obj = Proxy.Of<TestClass>(new CallHandler(), typeof(IInterface1), typeof(IInterface2));

        obj.MethodVoid();
        Console.WriteLine();
        Console.WriteLine(obj.PublicSquare(3));
        Console.WriteLine();
        Console.WriteLine(obj.MethodString());
        Console.WriteLine();
        Console.WriteLine(obj.MethodInt());
        Console.WriteLine();
        Console.WriteLine(obj.MethodComplex(45, " Deneme ", new Ogrenci { Name = "Ali" }).Name);
        Console.WriteLine();
        obj.PropInt = 78;
        Console.WriteLine();
        Console.WriteLine(obj.PropInt);
        Console.WriteLine();

        var int1 = obj as IInterface1;
        int1.Name = "Interface";
        Console.WriteLine();
        Console.WriteLine("Got: " + int1.Name);
        Console.WriteLine();
        int1.Name = "Interface333";
        Console.WriteLine();
        Console.WriteLine("Got3: " + int1.Name);
        Console.WriteLine();
        Console.WriteLine(int1.MethodString(34, "Par", new Ogrenci { Name = "Veli" }));

        var int2 = obj as IInterface2;
        int2.Value = 14;
        Console.WriteLine();
        Console.WriteLine("Got: " + int2.Value);
        Console.WriteLine();
        int2.Value = 333;
        Console.WriteLine();
        Console.WriteLine("Got3: " + int2.Value);
        Console.WriteLine();
        Console.WriteLine(int2.MethodInt(34, "Par", new Ogrenci { Name = "Veli" }));
        Console.WriteLine();

        obj.ThrowException();
    }
}

public class CallHandler : ICallHandler
{
    private readonly SortedDictionary<string, object> _propertyValues = new SortedDictionary<string, object>();

    public object BeforeMethodCall(object obj, MethodInfo mi, object[] args)
    {
        WriteParameterInfo(mi, args);
        return SetReturnValue(mi, args);
    }

    public void AfterMethodCall(object obj, MethodInfo mi, object[] args, object returnValue)
    {
        if (mi.ReturnType == typeof(void))
            Console.WriteLine(mi.Name + " returns [void]");
        else
            Console.WriteLine(mi.Name + " returns [" + (returnValue ?? "null") + "]");
    }

    public void OnError(object obj, MethodInfo mi, object[] args, Exception exception)
    {
        Console.WriteLine("Exception Handled: " + exception.Message);
        throw new ApplicationException(exception.Message, exception);
    }

    private object SetReturnValue(MethodInfo mi, object[] args)
    {
        object res = null;

        if (mi.Name.StartsWith("get_"))
        {
            var propName = mi.Name.Replace("get_", "");
            if (_propertyValues.ContainsKey(propName))
                res = _propertyValues[propName];
        }
        else if (mi.Name.StartsWith("set_"))
        {
            var propName = mi.Name.Replace("set_", "");
            if (!_propertyValues.ContainsKey(propName))
                _propertyValues.Add(propName, args[0]);
            else
                _propertyValues[propName] = args[0];
        }
        else if (mi.IsAbstract && mi.ReturnType != typeof(void))
        {
            res = mi.ReturnType.GetDefaultValue();
            var methodName = mi.Name;
            if (!_propertyValues.ContainsKey(methodName))
                _propertyValues.Add(methodName, res);
            else
                _propertyValues[methodName] = res;
        }

        if (mi.ReturnType == typeof(void))
            Console.WriteLine(mi.Name + " should return [void]");
        else
            Console.WriteLine(mi.Name + " should return [" + res + "]");

        return res;
    }

    private void WriteParameterInfo(MethodInfo mi, object[] args)
    {
        Console.Write(mi.Name + " takes ");
        if (args.Length == 0)
        {
            Console.WriteLine("no parameter");
        }
        else
        {
            Console.WriteLine("{0} parameter(s)", args.Length);
            var paramInfos = mi.GetParameters();
            for (int i = 0; i < args.Length; i++)
            {
                Console.WriteLine("\t[{0} {1}: '{2}']", paramInfos[i].ParameterType.Name, paramInfos[i].Name, args[i]);
            }
        }
    }
}

public interface IInterface1
{
    string Name { get; set; }
    string MethodString(int i, string s, object o);
}

public interface IInterface2
{
    int Value { get; set; }
    int MethodInt(int i, string s, Ogrenci o);
}

public class TestClass
{
    public virtual int PropInt { get; set; }

    public virtual void ThrowException()
    {
        throw new Exception("Custom Error");
    }

    protected virtual double ProtectedSquare(int x)
    {
        Console.WriteLine("Executing Method ProtectedSquare");
        return x * x;
    }

    public virtual double PublicSquare(int x)
    {
        Console.WriteLine("Executing Method PublicSquare");
        return ProtectedSquare(x);
    }

    public virtual string MethodString()
    {
        Console.WriteLine("Executing String Method");
        return "Hele";
    }

    public virtual int MethodInt()
    {
        Console.WriteLine("Executing Int Method");
        return 985;
    }

    public virtual void MethodVoid()
    {
        Console.WriteLine("Executing Void Method");
    }

    public virtual Ogrenci MethodComplex(int x, string f, Ogrenci o)
    {
        Console.WriteLine("Executing Parameter Method");
        return new Ogrenci { Name = o.Name + x + f };
    }
}

public class Ogrenci
{
    public string Name { get; set; }

    public override string ToString()
    {
        return Name;
    }
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T12:17:45.330

如果每次只放置一个断点是不够的：

如您所说，请注意调用堆栈。只需在您认为合适的时候放置一个断点。

在 Visual Studio 中，这很容易......只需运行程序，当你想要一个断点时，将它设置在你知道即将发生的一行中的调试中间。

第三种选择是调用`Console.WriteLine`^([MSDN](http://msdn.microsoft.com/en-us/library/system.console.writeline.aspx))，即使它不是控制台应用程序。您将在[输出窗口](http://msdn.microsoft.com/en-us/library/vstudio/3hk6fby3.aspx)( `Ctrl`+ `W`, `O`) 中看到结果。

您还可以使用`System.Diagnostics.Trace`^([MSDN](http://msdn.microsoft.com/en-us/library/system.diagnostics.trace.writeline.aspx))在“输出”窗口中进行写入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T12:18:22.187

放置一个断点和您想要查看它是否被调用的方法

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T12:27:27.140

以上招数也不错，

您还可以在您的方法中放置 JavaScript 的警告框。这样你就会知道调用的方法。

如果要维护日志，您可以在数据库中创建日志表，并将插入查询与系统时间放在日志表的日志时间列中。因此，您现在将在过去调用您的方法时。

# android - 如何在 Android 中实现 NSUserDefaults 概念

> ID：14603686
> 
> 赞同：4
> 
> 时间：2013-01-30T12:10:01.510
> 
> 标签：android, sharedpreferences, nsuserdefaults

在 iPhone 中，我们使用 NSUserDefaults 来临时存储自定义列表视图的数据（大约 30 个图像和文本）。我们如何在 Android 中实现这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T12:18:32.163

通过使用 sharedpreferences 概念，您可以实现这一点。

看到这个链接：[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)

并参考这个例子：[共享偏好的例子](http://www.vogella.com/articles/AndroidFileBasedPersistence/article.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-30T12:28:13.993

文本的 SharedPreferences 但对于 30 张图像，我建议使用 sdcard 中的文件夹

```
SharedPreferences userPreference = getSharedPreferences("preference name", MODE_PRIVATE); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T12:34:36.273

使用 SharedPreferences 的概念。这将包含首选项。类似于 NSUserDefaults 的用户。像这样的东西：

```
SharedPreferences sharedPreference = getSharedPreferences("Sample Preference", MODE_PRIVATE); 
```

# javascript - OnMouseOver 暂停或停止 setTimeOut 函数

> ID：14603697
> 
> 赞同：0
> 
> 时间：2013-01-30T12:10:23.137
> 
> 标签：javascript

嗨，我在这里有 twitter 引导警报，其中我实现了持续时间/延迟，1 秒后它消失了......

但我想要完成的是，当我悬停闪光警报时，setTimeOut 会暂停一段时间或停止。

这是我的js文件：

```
var hideFlashes;

$(document).ready(function() {
  return setTimeout(hideFlashes, 1000);
});

hideFlashes = function() {
  return $(".alert").fadeOut(4000);
}; 
```

我正在调用 div 类 `alert

```
<div class="alert alert-info" id="info">
        <button type="button" class="close" data-dismiss="alert">&times;</button>
        <p><strong>Oppcis Tips:</strong>
        You have the privileges to view, add, edit or delete specific agencies.
        </p>
    </div> 
```

我真的很想知道如何`stop`使用某个褪色计时器。

任何解决方法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:22:43.710

尝试这样的事情：

```
$(".alert").hover(function(){$(".alert").stop();}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T13:00:48.343

仍然感谢 ^ @drasick 上面的方法..

分叉我的要点：[https ://gist.github.com/4672970](https://gist.github.com/4672970)

对于那些想要和我一样的方法的人。

我用过`mouseenter`和`mouseleave`功能

而不是`mouseover`和`mouseout`或`hover`

[https://gist.github.com/4672970](https://gist.github.com/4672970)

# jquery - 获取行的第一个单元格和列的顶部单元格

> ID：14603699
> 
> 赞同：1
> 
> 时间：2013-01-30T12:10:29.670
> 
> 标签：jquery

我有一个大表（id=PersonValue），第一行是数字值，每行的第一个单元格是一个名称。当我单击表中的某个单元格时，我想检索该行第一个单元格中的名称和该列顶部单元格中的数值。

我找到了这个脚本来检索名称并相应地对其进行了调整，但它没有给我名称。

```
$('#PersonValue').click(function(){
    var name = $(this).closest('tr').find('td:first').text();
    console.log('Name is '+ name); // returns 'Name is ' while something like 'Name is Niko' is expected

  //var number = ??
}); 
```

正如您在脚本中看到的那样，我不知道如何获取顶部单元格。

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T12:34:45.673

这是一个完整的[工作解决方案](http://jsfiddle.net/Czv8R/1/)：

```
$('table').on('click', 'td', function() {
    var $this = $(this),
        name = $this.siblings(':first-child').text(),
        pos = $this.index() + 1,
        num = $this.parent().siblings().first().children(':nth-child('+pos+')').text();

    alert(num + ' & ' + name);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T12:14:08.937

尝试使用此代码块：

```
$('#PersonValue').click(function(){
    var name = $(this).siblings('tr').find('td:first-child').text();
    console.log('Name is '+ name); // returns 'Name is ' while something like 'Name is Niko' is expected

  //var number = ??
}); 
```

我使用`siblings()`并添加了选择器`:first-child`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T12:21:50.730

```
 $('#PersonValue tr').on("click","td",function() {

        var $td=$(this);
        var $tr=$td.parent();
        var tdindex=$td.prevAll().length;
        //or try $td.index();

        var name = $tr.find('td:first-child').text();
        var colheader =  $('#PersonValue').find("thead > th:nth-child("+tdindex+")").text(); 
 }) 
```

没有测试过，也没有看到你的 html （th in thead ？）但你明白我希望的想法。编辑：从表 tr 委派时尝试索引方法

编辑：这种获取索引的 prevall 方法实际上听起来更好

# codeigniter - 如何在 CodeIgniter 中显示一个类以便我可以检索数据

> ID：14603700
> 
> 赞同：0
> 
> 时间：2013-01-30T12:10:34.950
> 
> 标签：codeigniter

在 controllers\home.php 中有一个名为的类和一个名为 的`home`函数`index`。我就在那里`$data['users'] = $this->users->table();`

而且里面`Class Users extends CI_Model`有`models\users.php`。

但是 CodeIgniter 说`Call to a member function table() on a non-object in C:\Program Files (x86)\EasyPHP-12.1\www\HCAWebApp\application\controllers\home.php`在第 22 行，也就是该`$data['users'] = $this->users->table();`行所在的位置。

我的代码有什么问题？我认为它无法找到 users.php。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T12:20:19.760

您需要在调用`$this->users`via之前加载模型`$this->load->model('users')`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T12:21:52.950

查看您有或没有加载模型的错误，首先加载它

`$this->load->model('users');`

其他 ..

或者如果您有很多模型要加载，请使用类似的数组

`$this->load->model(array('users','model1','model2'));`

如果您想自动加载它只需打开`config/autoload.php`

`$autoload['model'] = array('users');`

那么您现在可以将其用作`$data['users'] = $this->users->table();`

您还可以为模型分配不同的名称，例如：

`$this->load->model('users','foobar');`

然后将其用作`$data['users'] = $this->foobar->table();`

# iphone - 如何访问 NSArray 中的某个值？

> ID：14603701
> 
> 赞同：0
> 
> 时间：2013-01-30T12:10:38.210
> 
> 标签：iphone, ios, objective-c, nsarray

我有一个名为`someArray`. 我想访问`NSArray`. 我正在尝试使用以下方法访问它，但没有任何运气。我该如何正确地做到这一点？

```
cell.textLabel.text = [[someArray objectAtIndex:indexPath.row] objectForKey:@"name"];

some array {
    haserror = 0;
    headers =     {
        code = 0;
        haserror = 0;
        nodeid = "fe1.aaaaaa.2.undefined";
        time = 16;
    };
    results =     (
                {
            coords =             (
                "44.916667",
                "8.616667"
            );
            id = 2;
            key = alessandria;
            name = Alessandria;
            state = Piemonte;
            zip = 1512;
        },
                {
            coords =             (
                "43.616944",
                "13.516667"
            );
            id = 3;
            key = ancona;
            name = Ancona;
            state = Marche;
            zip = 601;
        },

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T12:17:36.313

据我从您的数据模型中看到，键`name`是键下的一个节点`results`。您可以将此数据模型用作字典映射，下面的代码片段必须为您提供所需的内容。

```
NSDictionary *myObject = [[someArray objectAtIndex:indexPath.row] objectForKey:@"results"];
cell.textLabel.text = [myObject objectForKey:"name"]; 
```

**重要提示：** *如果您有一些 lopps 或其他一些接收数据的机制，可能会有更有效的方法来解决您的问题，所以请提供更多关于您正在尝试做什么的附加信息*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T16:00:18.360

正如其他人所指出的，`someArray`是字典，`results`而是指向字典内部数组的键。如果您想要数组中所有名称字段的`results`数组，您可以`valueForKeyPath:`在`someArray`变量上使用，如下所示：

```
NSArray *names = [someArray valueForKeyPath:@"results.name"]; 
```

该`names`变量现在应该包含来自您在示例代码中显示的数据集中的“Alessandria”和“Ancona”。

# c++ - c++中的getdir，选择保存目录

> ID：14603703
> 
> 赞同：0
> 
> 时间：2013-01-30T12:10:42.697
> 
> 标签：c++, getdirectories

我有一个`qdialog`用户`qlineedit`可以在其中编写他选择的路径来保存文件的地方。我想实现一个`pushbutton`（打开），如果用户按下它，它将类似于`uigetdir`in `matlab`。它返回在字符串中选择的路径。c++中有什么建议吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T12:12:27.627

[QFileDialog](http://doc.qt.digia.com/qt/qfiledialog.html)提供了选择目录的能力。特别是[getExistingDirectory](http://doc.qt.digia.com/qt/qfiledialog.html#getExistingDirectory)应该涵盖您的用例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T12:15:18.923

[QFileDialog::getExistingDirectory](http://doc.qt.digia.com/qt/qfiledialog.html#getExistingDirectory)

# r - 分类变量（因子）崩溃水平

> ID：14603708
> 
> 赞同：3
> 
> 时间：2013-01-30T12:11:01.780
> 
> 标签：r

在回归问题中，我有许多分类预测变量（因子）。其中许多因素还具有大量水平（其中一个变量为 2000 个水平）。由于使用这样一个变量作为预测变量的回归将过于高度参数化，我想知道是否有某种方法可以将这样一个变量的许多罕见级别折叠为“其他”级别。

我可以在 R 中使用 factor 函数，例如：

```
newx <- factor(oldx, levels=c(1,2,3,rep(4,1996))) 
```

对于所有变量，将保留更常见级别的级别并映射到不太常见级别的“其他”（查看`table(oldx)`）。但是，我想知道在 R 中是否已经有标准的方法可以做到这一点。另外，还有什么需要注意的吗？

谢谢

# c++ - 未处理的异常使用 OpenCV 2.4.3 C++ 接口中的 fillPoly 绘制非凸多边形

> ID：14603709
> 
> 赞同：1
> 
> 时间：2013-01-30T12:11:05.583
> 
> 标签：c++, opencv, drawing

我正在尝试使用 OpenCV 2.4.3 c++ 接口在二进制图像中绘制一些通过 findContours 找到的连接组件。代码是这样的。

```
std::vector<std::vector<cv::Point> > contours;
std::vector<cv::Vec4i> hierarchy;
cv::findContours( tempOR, contours, hierarchy, CV_RETR_EXTERNAL , CV_CHAIN_APPROX_TC89_L1, cv::Point(0, 0) );

bgs_detection_or=cv::Mat::zeros(cv::Size(m_frame_width, m_frame_height), CV_8UC1);
for( int i = 0; i < contours.size(); i++ )
{
    if (pointPolygonTest(contours[i], cv::Point2f(m_car_coords.x, m_car_coords.y-1), false)>-1)
    {
        std::vector<cv::Point> contours_poly;
        approxPolyDP( cv::Mat(contours[i]), contours_poly, 3, true );           

        //cv::fillConvexPoly(bgs_detection_or, contours_poly, cv::Scalar(255));
        cv::fillPoly(bgs_detection_or, contours_poly, cv::Scalar(255));
        break;
    }
} 
```

如您所见，我也尝试使用 fillConvexPoly。fillConvexPoly 不会抛出任何错误，但它不会正确绘制策略。之后我尝试使用fillPoly，仅此而已，我无法管理未处理的异常。

我也尝试以这种方式调用 fillPoly：

```
cv::fillPoly(bgs_detection_or, contours_poly, contours_poly.size(), 1, cv::Scalar(255)); 
```

但后来我有一个编译错误：错误 35 错误 C2665：'cv::fillPoly'：2 个重载都不能转换所有参数类型

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T12:57:24.407

我找到了实现最终目标的解决方法：

```
drawContours( bgs_detection_or, contours, i, cv::Scalar(255), CV_FILLED); 
```

但我不明白为什么 fillPoly 会抛出未处理的错误，而 fillConvexPoly 不会。

# ios - 我看不到popover segue

> ID：14603710
> 
> 赞同：2
> 
> 时间：2013-01-30T12:11:11.203
> 
> 标签：ios, uipopovercontroller, uistoryboard, uistoryboardsegue

我使用的是 xcode 4.5.2。在故事板中工作时，我试图显示弹出窗口。

但是在 segue 样式列表中，“popover”样式不存在。

![我的转场截图](../Images/10d50c379560188dde42bafbc4212b15.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T15:14:07.400

仅在 iPad 上，使用操作表或自定义视图。

# javascript - 显示页面预览并在另一个站点中对其进行操作

> ID：14603712
> 
> 赞同：0
> 
> 时间：2013-01-30T12:11:28.020
> 
> 标签：javascript, html, cross-domain

我想向用户展示另一个页面（来自不同域）的小预览，让他控制页面的元素。例如：更换顶部的标志。

我尝试了两种方法：

1.  使用 iFrame 会导致我出现跨域问题。
2.  我也无法在该页面上“预安装”javascript 函数。

很想得到更多的想法。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T05:21:49.253

可以参考[http://jsbin.com/](http://jsbin.com/)

输出 div 有一个 iframe，您的页面从其他域克隆。

另一方面，您应该拥有您的管理界面，用户在其中更改任何内容都会更改 iframe 内容的 HTML（因为它是不直接来自其他域浏览器的克隆，允许您进行修改）。因此可以向用户显示实时预览。

在这里，关于如何更改 iframe HTML 有很多示例，否则请参阅 jsbin.com 代码。

我刚看到这篇文章。这可能会帮助你。[http://www.sitepoint.com/how-to-safeguard-your-site-with-html5-sandbox/](http://www.sitepoint.com/how-to-safeguard-your-site-with-html5-sandbox/)

# windows-phone-7 - 在 Windows Phone 8 中重命名 MainPage.xaml？

> ID：14603718
> 
> 赞同：0
> 
> 时间：2013-01-30T12:11:50.233
> 
> 标签：windows-phone-7, windows-phone-8

我想重命名主页，我已经重命名了 xaml 名称、cs 名称和内部代码，以及 WMAppManifest 中的导航页面名称。但我仍然在 App.xaml 中收到错误消息：“clr-namespace:project1 中不存在 LocalizedStrings”。还有什么我需要修复的还是无法重命名主页？

# sharepoint-2010 - 将查询字符串传递给页面查看器 Web 部件

> ID：14603719
> 
> 赞同：0
> 
> 时间：2013-01-30T12:11:50.793
> 
> 标签：sharepoint-2010, web-parts

我有一个共享点页面，其中添加了一个页面查看器 Web 部件。除了静态 URL 之外，还需要为该 Web 部件提供查询字符串。

我尝试放置一个 QueryString 过滤器 Web 部件，但它确实让我连接到页面查看器 Web 部件（消息 -*连接类型发送参数值与页面上的任何 Web 部件不兼容*）

我想知道实现这一目标的正确方法是什么。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:21:11.717

我开始了... 解决方案是创建您自己的可视化 Web 部件。可视 Web 部件不是 Web 部件在 CreateChildControl 方法中加载的用户控件。

现在您可以访问背后的代码，Sharepoint Context，您可以做任何您想做的事情。

[如何创建可视 Web 部件](http://msdn.microsoft.com/en-us/library/gg413295%28v=office.14%29.aspx)

# c# - 如何根据数组对随机数进行加权

> ID：14603723
> 
> 赞同：3
> 
> 时间：2013-01-30T12:12:04.607
> 
> 标签：c#, .net, algorithm, random, weighted

坦率地说，我一直在考虑如何实现超出我数学技能的东西。因此，请随时尝试为我指明正确的方向，而不是完整的代码解决方案，我将不胜感激。

所以，假设我已经对文本进行了分析，并生成了一个不同的两个字符组合的频率表。我已将这些存储在 26x26 数组中。例如。

```
 A B C D E F G H I J K L M N O P Q R S T U V W X Y Z
A 1 15 (frequency of AA, then frequency of AB etc.)
B 12 0 (freq of BA, BB etc..)
... etc. 
```

所以我想随机选择这两个字符的组合，但我想根据频率“加权”我的选择。IE。上面的 AB 应该是 AA 的“可能性”的 15 倍。而且，显然，选择永远不应该返回类似 BB 的东西（即频率为 0 - 在这个例子中，显然 BB 确实出现在 Bubble 之类的词中！！:-)）。对于 0 的情况，我意识到我可以循环直到我得到一个非 0 的频率，但这并不优雅，因为我有一种感觉/直觉，有一种方法可以扭曲我的平均值。

我正在考虑选择我的第一个字符 - 即。该行 - （我最终生成一个 4 对序列）我可以只使用系统随机函数（Random class.Next）然后使用“加权”随机算法来选择第二个字符。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T12:18:22.297

鉴于您的示例样本，我将首先创建所有数字的累积系列（1、15、12、0 => 1、16、28、28）。

然后我会产生一个介于 0 和 27 之间的随机数（比如说 19）。

然后我会计算出 19 >=16 但<28，给我桶 3 (BA)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-30T15:14:51.070

对于您的具体问题，其他答案中有一些很好的建议。要解决“我有一个符合均匀概率分布的随机数源，但我希望它符合给定的非均匀概率分布”的*一般问题，那么你可以计算出**分位数函数*，它是执行该转换。我做一个温和的介绍，解释为什么分位数函数是你想要的函数：

[*在 C# 中生成随机非均匀数据*](http://ericlippert.com/2012/02/21/generating-random-non-uniform-data/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T12:23:16.290

如何将所有频率相加并使用从 AA 到 ZZ 的频率来生成您的频率对。

可以说，如果 rnd 返回 0，您将获得 AA，如果它返回 1-14，那么您将获得对的总频率，然后是 AB 等

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T12:28:44.160

使用您的频率矩阵生成一组完整的值。通过 Random.Next() 对集合进行排序。将随机集存储在数组中。然后，如果该数组基于 Random.Next(randomarray.Length)，您可以只选择一个元素。

如果有一种数学方法来计算频率，你也可以这样做。但是如果重复调用，创建一个预编译和缓存的集合会减少计算时间。

请注意，根据最大频率，这可能需要大量存储空间。您还想在循环构建集合之前创建 random 的实例。这样您就不会重新设置随机生成器的种子。

...

另一种方法（类似于您在问题末尾建议的方法）是分两次执行此操作，第一次选择行，第二次使用您的加权频率选择列。那将只是在一个范围内限定的行频率的总和。第一个建议应该根据重量给出更均匀的分布。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T12:36:45.197

取概率之和。取一个介于零和该总和之间的随机数。将概率相加，直到你得到它大于或等于你的随机数。然后使用你的项目。

例如伪代码：

```
b = getProbabilites()
s = sum(b)
r = randomInt() % s
i = 0
acc = 0
while (acc < r) {
    acc += b[i]
    i++
}

return i 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-16T14:15:39.383

如果效率不是问题，您可以创建一个 key->value 散列而不是一个数组。这样做的好处是（如果您在文本中很好地格式化它）如果需要更新值将非常容易。就像是

```
{
    AA => 5, AB => 2, AC => 4,
    BA => 6, BB => 5, BC => 9,
    CA => 2, CB => 7, CC => 8
} 
```

这样，您可以轻松检索所需序列的值，并快速找到要更新的条目。如果表是自动生成的并且非常大，它可能有助于了解/熟悉 vim 对正则表达式的使用。

# android - Android 发送带有自定义表情的文本

> ID：14603729
> 
> 赞同：0
> 
> 时间：2013-01-30T12:12:21.197
> 
> 标签：android, keyboard, emoticons

我用我的自定义表情符号图标制作了一个自定义键盘。我有两个设备，并且都在它们上安装了键盘。但是当我尝试通过普通文本将我的图标发送给其他人时，它们显示为框而不是表情符号。我该怎么做才能让其他人也看到我的表情符号？Android 在默认文件夹（res/drawables）中查找。选择我的键盘后，是否有让它查看我自己的文件夹？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:15:55.977

其他人也必须将您的表情符号存储在他/她的手机中的某个位置，否则您无法显示它们。也就是说，如果其他人没有安装您的自定义键盘，他/她将不会拥有您的表情符号。

如果他/她没有表情符号，另一种解决方案是在第一次使用时发送整个表情符号（如果您使用的任何聊天程序都支持这一点）。

# jquery - Monkey Patch Chosen jQuery 库 - Chosen 始终未定义

> ID：14603738
> 
> 赞同：3
> 
> 时间：2013-01-30T12:12:55.077
> 
> 标签：jquery, monkeypatching, jquery-chosen

我正在尝试修补 Chosen jQuery 库中的两个函数，但是，无论我尝试引用什么原始函数，控制台返回的 Chosen 都是未定义的。

这是我的代码。

```
 function(){
        var _no_results = window.jQuery.fn.chosen.prototype.no_results;
        var _no_results_clear = window.jQuery.fn.chosen.prototype.no_results_clear;

        window.jQuery.fn.chosen.prototype.no_results = function (terms) {
            console.log('nr');
            var no_results_html;
            no_results_html = $('<li class="no-results">' + this.results_none_found + ' "<span></span>"</li>');
            no_results_html.find("span").first().html(terms);
            if (this.options.no_results_callback) {
                this.options.no_results_callback(no_results_html, terms);
            }
            return this.search_results.append(no_results_html);
            //return _no_results.apply(terms);
        }

        window.jQuery.fn.chosen.prototype.no_results_clear = function (terms) {
            console.log('nrc');
            var no_results_html;
            no_results_html = $('<li class="no-results">' + this.results_none_found + ' "<span></span>"</li>');
            no_results_html.find("span").first().html(terms);
            if (this.options.no_results_clear_callback) {
                this.options.no_results_clear_callback(no_results_html, terms);
            }
            return this.search_results.find(".no-results").remove();
            //return _no_results_clear.apply(terms);
        }
    } 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-03-22T20:01:11.660

似乎所选库的旧版本（例如 v0.9.14）用于公开`Chosen`和`AbstractChosen`，但最新版本（截至 2019 年 3 月 25 日的 v1.8.7）都没有公开。相反，当前版本利用`.data(key, value)` [jQuery 方法](https://api.jquery.com/data/)`Chosen`在键下存储对对象的引用`chosen`。您可以尝试将其与已初始化的选择列表和用于覆盖或函数的`Object.getPrototypeOf` [JavaScript 方法结合使用。](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/getPrototypeOf)`Chosen``AbstractChosen`

例如，假设您页面上的某处有：

```
<select id="futureChosenSelect" ... >
  <option value="HiMom">Hi Mom!</option>
  ...
</select> 
```

并且您已经使用以下选项进行`<select>`了配置：

```
$('#futureChosenSelect').chosen(); 
```

您应该能够使用以下内容覆盖这些功能：

```
Object.getPrototypeOf( $('#futureChosenSelect').data('chosen') ).no_results = function(terms) { ... }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T12:20:14.210

不要复制原型，这不是 jQuery 的工作方式。在内部，它将插件和变量存储在映射中（名称-> 函数）。这应该有效：

```
 var _no_results = window.jQuery.jQuery.fn['chosen'].no_results;
 var _no_results_clear = window.jQuery.fn['chosen'].no_results_clear;

 window.jQuery.fn['chosen'].no_results = function (terms) { 
    ...
    _no_results.apply(this, terms);
 }

 window.jQuery.fn['chosen'].no_results_clear = function (terms) { 
    ...
    _no_results_clear.apply(this, terms);
 } 
```

我这样做一次是为了替换选择器链内部日志的 jQuery 内部函数。[在这里检查它是如何工作的（github）](https://github.com/fmsf/jQueryLog/blob/master/jquery.log.js#L78)

# mysql - 如何获取视图之间的mysql依赖关系？

> ID：14603740
> 
> 赞同：7
> 
> 时间：2013-01-30T12:13:03.913
> 
> 标签：mysql, sql, view, graph

我有一个 mysql 数据库，有 60 多个视图，一些是辅助的，一些是最终的。它们之间存在依赖关系。当然，这给了我性能问题，但我没有设计这个数据库和系统。

为了加快一些报告的速度，我将最终视图具体化为表格。我也可以通过物化辅助视图来加快这个过程，然后使用它们来物化其他视图，从而避免重新处理辅助视图。

为此，我需要一种方法来查看视图之间的依赖关系，以便以正确的顺序实现视图。如果我可以将该信息输入到图表中（例如，使用 Graphviz 或 Tikz 等工具），那就太好了。

**除了手动分析每个视图之外，还有什么方法可以做到这一点？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-11-11T10:40:19.547

我使用以下查询从 FROM 子句中获取依赖项：

```
SELECT  views.TABLE_NAME As `View`, tab.TABLE_NAME AS `Input`
FROM information_schema.`TABLES` AS tab 
INNER JOIN information_schema.VIEWS AS views 
ON views.VIEW_DEFINITION LIKE CONCAT('%',tab.TABLE_NAME,'%') 
```

然后我将输出提供给一个 python 脚本，该脚本使用 ete2 模块将依赖关系可视化为树结构。如果有人感兴趣，我可以分享脚本。编辑：注意，我刚刚意识到，如果视图名称是另一个视图名称的子字符串，此查询可能会导致问题。如果任何机构可以建议改进，请这样做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-05-18T13:39:39.713

> 编辑：注意，我刚刚意识到，如果视图名称是另一个视图名称的>子字符串，则此查询可能会导致问题。如果任何机构可以建议改进，请这样做。

```
SELECT  views.TABLE_NAME As `View`, tab.TABLE_NAME AS `Input`
FROM information_schema.`TABLES` AS tab 
INNER JOIN information_schema.VIEWS AS views 
ON views.VIEW_DEFINITION LIKE CONCAT('%`',tab.TABLE_NAME,'`%') 
```

我认为 % 旁边的 ` 符号确实消除了您的子字符串问题和其他一些问题。在实践中，这将起作用。我看到的唯一问题是，当您有一个数据库，其中某些表名与列名相同时，但在适当的数据库设计中，情况并非如此。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-16T18:52:22.597

可以在许多查询设计器中可视化单独视图的查询，但数据库中的整个视图结构保持不可观察。

*   [MySQL Workbench](http://www.mysql.com/products/workbench/)和 Oracle SQL Developer 似乎将视图呈现为单独的对象。
*   [SchemaSpy](http://schemaspy.sourceforge.net/)呈现视图图，它基于字段名称，而不是 FROM 子句。

很难管理约 50 个相互关联的视图。我还没有找到任何舒适的工具来完成这项任务。

# mysql - 仅当同一表的行数低于某个值时才更新表

> ID：14603742
> 
> 赞同：0
> 
> 时间：2013-01-30T12:13:13.820
> 
> 标签：mysql

我有一张必须确认他们对事件的帮助的人的表格。本次活动容量有限。我想计算确认人数并在同一个原子查询中更新确认状态。

假设 PEOPLE 表有 id 和确认字段。

我尝试过这样的事情：

```
UPDATE PEOPLE
SET confirmed = 'Y'
WHERE
    id = 'ID_VALUE'
AND
    (
        SELECT amount
        FROM
        (
            SELECT
                COUNT(*) AS amount
            FROM
                PEOPLE AS p
            WHERE
                p.confirmed = 'Y'
        ) AS aux1
    ) < CAPACITY_LIMIT 
```

表格示例：

```
-------------------
| id  | confirmed |
-------------------
| 1   | N         |
-------------------
| 2   | N         |
-------------------
| ... | ...       |
-------------------
| 10  | N         |
------------------- 
```

如果 CAPACITY_LIMIT = 5 并且我尝试从 id = 1 到 id = 10 依次确认，我想执行更新（确认 = 'Y'）直到 id = 5。

我确定我错过了一些东西，但我不知道它是什么。

提前致谢。问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T12:40:44.350

试试这个：

```
UPDATE
    PEOPLE AS p1
INNER JOIN
    (SELECT COUNT(*) AS numConfirmed FROM PEOPLE AS p2 WHERE p2.confirmed = 'Y') aux
SET
    p1.confirmed = 'Y'
WHERE
    p1.id = 'ID_VALUE'
    AND aux.numConfirmed < CAPACITY_LIMIT; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T12:43:42.870

试试这个

```
SET @ct := (SELECT
                COUNT(*) AS amount
            FROM
                PEOPLE AS p
            WHERE
                p.confirmed = 'Y');
UPDATE PEOPLE
SET confirmed = 'Y'
WHERE
    id = '1'
AND CAPACITY_LIMIT < @ct
     ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T12:52:19.353

falvarez，您可能想要验证您的输入（'ID_VALUE',CAPACITY_LIMIT）是否正确，包括数据类型和实际值，因为相同的查询对我来说没有问题。以下是我对测试表运行的查询（您可以看到查询框架与您的完全相同）：

update t_order set customer ='NewCustomerName' where id = 124 and (select amount from (select count(*) as amount from t_order where customer is not null) as total) < 10

# c# - 强制浏览器从外部服务器下载大文件

> ID：14603744
> 
> 赞同：0
> 
> 时间：2013-01-30T12:13:15.473
> 
> 标签：c#, asp.net, html

我正在尝试从外部服务器下载和重命名一个文件（大约 3-4GB），但我不想在我的网络服务器上复制文件然后发送到浏览器，因为这需要太多时间。

我试过这个

```
<a class="downloads" download="SomeName.m4v" href="http://Externalserver/file.m4v">Download!</a> 
```

但它仅适用于谷歌浏览器。

有没有办法做这样的事情？

# iphone - 我们可以在 IOS 5.0 中集成 Facebook SDK 3.1 吗？

> ID：14603746
> 
> 赞同：0
> 
> 时间：2013-01-30T12:13:20.403
> 
> 标签：iphone, ios, facebook, ios5

> **可能重复：**
> [适用于 iOS 的 Facebook SDK 3.1 - 在 iOS6 上运行，但在 iOS 5.x 上崩溃](https://stackoverflow.com/questions/12610078/facebook-sdk-3-1-for-ios-runs-on-ios6-but-crashes-on-ios-5-x)

我已经集成并且工作正常，但我的问题是我们可以将相同的集成`Facebook sdk 3.1`到吗？ `iOS 6.0``sdk 3.1``iOS 5.0`

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-30T12:36:29.660

您是否将框架设置为可选？当您添加 AdSupport.framework、Social.framework 和 Accounts.framework 时，右侧有一个下拉菜单，您可以在“必需”和“可选”之间进行选择...

请查看以下链接添加遵循所有步骤...

[http://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/3.1/](http://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/3.1/)

# c++ - 元编程继承限制

> ID：14603752
> 
> 赞同：3
> 
> 时间：2013-01-30T12:13:34.427
> 
> 标签：c++, visual-studio-2010, stl, metaprogramming, instantiation

我在 C++ 中使用模板元编程从使用类型列表生成类的层次结构，如下所示：

```
//! Basic typelist class
template<class H, class T>
class Typelist
{
public:
    typedef H Head;
    typedef T Tail;
};

//! Terminating type
class NullType {};

//! Forward declaration
template<class Types>
class Recur;

//! Specialisation to terminate the recursion
template<>
class Recur<NullType>
{
};

//! General recursive class 
template<class Types>
class Recur: public Recur<typename Types::Tail>
{
};

// Dummy classes 
class Type1{};
class Type2{};
class Type3{};
int main()
{
    // Defines the typelist
    typedef Typelist<Type1,Typelist<Type2,Typelist<Type3,NullType>>> Types;

    // Instantiate the recursion
    Recur<Types> recur;
    return 1;
} 
```

这将产生一个类层次结构，如下所示：

`Recur<Typelist<Type2,Typelist<Type3,NullType>>>`源自： `Recur<Typelist<Type3,NullType>>`源自：

```
Recur<NullType> (base class) 
```

**问题：Visual Studio 2010 编译器是否对使用这种递归技术的类派生深度有任何限制？换句话说，如果我的类型列表包含 N 个类型，即使 N 等于 100,000，上面的代码是否会编译和构造 N 个类？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T12:27:52.353

[该标准](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3376.pdf)的附件 B仅指定了最低级别的直接和间接基类以及嵌套模板实例化，并且特定编译器是否超出此范围是实现质量问题。请参阅您的特定编译器自己的文档以获取 precies 编号。以下遵循标准要求的最低数量。

**附件 B（资料性）实施数量 [implimits]**

> 1 由于计算机是有限的，C++ 实现不可避免地受限于它们可以成功处理的程序的大小。每个实施都应在已知的情况下记录这些限制。本文档可能会引用存在的固定限制，说明如何根据可用资源计算可变限制，或者说固定限制不存在或未知。
> 
> 2 限制可能会限制包括以下描述的数量或其他数量。建议将每个数量后面的括号中的数字作为该数量的最小值。但是，这些数量仅作为指导，并不能确定合规性。
> 
> — 直接和间接基类 [16 384]。
> 
> — 单个类的直接基类 [1 024]。
> 
> — 递归嵌套的模板实例化，包括模板参数推导期间的替换 (14.8.2) [1 024]。

# java - LibGdx 如何重复背景？

> ID：14603759
> 
> 赞同：5
> 
> 时间：2013-01-30T12:13:59.170
> 
> 标签：java, libgdx

几天前，我想出了如何在 LibGdx 中进行一些滚动。现在我正在尝试做一些相关的事情。我想重复背景。我的滚动跟随一艘船（是一个 s[ace 船游戏）。在背景中有一张作为纹理加载的空间照片。当船到达背景的尽头时，它继续前进，没有背景了。我已经阅读了有关 wrap 的内容，但我并不真正了解它是如何工作的。我这样做了：

```
 px=new Pixmap(Gdx.files.internal("fondo.jpg"));
    background=new Texture(px);
    background.setWrap(TextureWrap.Repeat, TextureWrap.Repeat); 
```

然后，在我的渲染方法中

```
spriteBatch.begin();
    spriteBatch.draw(background,0,0,500,50);
    drawShip();
spriteBatch.end(); 
```

当然它不起作用，它只绘制一次背景。我不知道如何使这种包装方法起作用。有什么帮助吗？

# 解决方案

我想到了。这不是一个很好的代码，但它可以工作。

首先我声明两个具有相同图像的纹理

```
 bck1=new Texture(Gdx.files.internal("fondo.jpg"));
 bck2=new Texture(Gdx.files.internal("fondo.jpg")); 
```

我还声明了两个这样的变量来指定每个 bck 位置的 X 值

```
 int posXBck1=0,posXBck2=0; 
```

然后我在 Render() 中使用它

```
 public void calculoPosicionFondos(){
    posXBck2=posXBck1+ANCHODEFONDO;
    if(cam.position.x>=posXBck2+cam.viewportWidth/2){
        posXBck1=posXBck2;
    }
} 
```

在哪里：

ANCHODEFONDO 是我背景的宽度

Cam 是一个 OtrhoCam。

所以我说如果凸轮在 bck2 中（这意味着你再也看不到 bck1）它会改变位置，给出 bck2 的 bck1 位置，并在下一个渲染循环中重新计算 bck2

然后只需在渲染模式下绘制两个 bck 即可。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2014-05-18T13:37:38.743

就像 Teitus 说的，永远**不要多次加载你的纹理**！无论如何，你在正确的轨道上使用包装器：

```
texture.setWrap(TextureWrap.Repeat, TextureWrap.Repeat); 
```

现在您可以将 draw 方法与源位置一起使用。源位置是您选择在纹理上绘制的区域。

```
batch.draw(texture, x, y, srcX, srcY, srcWidth, srcHeight) 
```

要从右到左滚动纹理，您所要做的就是逐渐增加 srcX。因此，创建一个在 update/render 方法中递增的 int。

```
int sourceX = 0;

//render() method

//Increment the variable where to draw from on the image.
sourceX += 10;

//Simply draw it using that variable in the srcX.    
batch.draw(YourTexture, 0, 0, sourceX, 0, screenWidth, screenHeight); 
```

因为您正在包裹纹理，所以它将无限期地包裹/循环和滚动。如果游戏运行很长时间，sourceX int 可能存在问题，因为 int 只能容纳 2147483647。这需要一段时间，但您可以通过在每次数字超过总图像宽度时减去图像宽度来修复它.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-31T13:33:24.927

不要这样，请：

```
bck1=new Texture(Gdx.files.internal("fondo.jpg"));
bck2=new Texture(Gdx.files.internal("fondo.jpg")); 
```

这将加载你的大背景纹理两次。这完全是浪费。如果您想保留您的解决方案，请至少执行以下操作：

```
bck1=new Texture(Gdx.files.internal("fondo.jpg"));
bck2=bkg1; 
```

关于纹理包装。如果你的纹理是 500px 宽，并且你绘制了一个 500px 的精灵，你不会看到任何重复。如果你想让它重复 2 次，用 0-2 纹理坐标绘制 1000px 宽。我不确定 spriteBatch 如何处理您发布的调用，您可以尝试那个，或者可能使用使用纹理区域的重载并手动设置您的区域。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-24T00:14:47.060

我看到这是一个很老的问题，但我认为有一种更简单的方法来完成背景滚动。只需使用 Sprite 类。这是我用于从右到左滚动的分层背景图像的片段。

```
public class LevelLayer 
{
    public float speedScalar = 1;

    private List<Sprite> backgroundSprites = new ArrayList<Sprite>();

    public LevelLayer()
    {

    }

    public void addSpriteLayer(Texture texture, float startingPointX, float y, int repeats)
    {
        for (int k = 0; k < repeats; k++)
        {
          Sprite s = new Sprite(texture);
          s.setX(startingPointX + (k*texture.getWidth()));
          s.setY(y);

          backgroundSprites.add(s);
        }
    }

  public void render(SpriteBatch spriteBatch, float speed)  
  { 
    for (Sprite s : backgroundSprites)
    {
        float delta = s.getX() - (speed * speedScalar);
        s.setX(delta);

        s.draw(spriteBatch);
    }
  }
} 
```

然后您可以使用相同的纹理或一系列纹理，如下所示：

```
someLayer.addSpriteLayer(sideWalkTexture1, 0, 0, 15);
someLayer.addSpriteLayer(sideWalkTexture2, 15 * sideWalkTexture1.getWidth(), 0, 7); 
```

我在代码中随机更改背景重复部分，并在它们离开屏幕时制作新的或重置现有集。所有层都进入一个池，并在需要新层时随机抽取。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-30T18:01:17.773

# 解决方案

我想到了。这不是一个很好的代码，但它可以工作。

首先我声明两个具有相同图像的纹理

```
 bck1=new Texture(Gdx.files.internal("fondo.jpg"));
 bck2=new Texture(Gdx.files.internal("fondo.jpg")); 
```

我还声明了两个这样的变量来指定每个 bck 位置的 X 值

```
 int posXBck1=0,posXBck2=0; 
```

然后我在 Render() 中使用它

```
 public void calculoPosicionFondos(){
    posXBck2=posXBck1+ANCHODEFONDO;
    if(cam.position.x>=posXBck2+cam.viewportWidth/2){
        posXBck1=posXBck2;
    }
} 
```

在哪里：

ANCHODEFONDO 是我背景的宽度

Cam 是一个 OtrhoCam。

所以我说如果凸轮在 bck2 中（这意味着你再也看不到 bck1）它会改变位置，给出 bck2 的 bck1 de 位置，并在下一个渲染循环中重新计算 bck2

然后在你的 render() 中绘制两个 bck

# android - Android Spinner 选项值就像选择标签

> ID：14603761
> 
> 赞同：4
> 
> 时间：2013-01-30T12:14:01.370
> 
> 标签：android, android-layout, android-spinner

有没有可能我可以创建一个带有选项和值的微调器。

```
<select name=test>
<option value="1">Baran</option>
<option value="2">Khan</option>
</select> 
```

使用微调器 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
<string-array name="test">
    <item Value="1">Baran</item>
    <item value="2">Khan</item>
</string-array>
</resources> 
```

我怎样才能完成这样的目标。因为我需要将 ID 传递给服务器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T13:12:59.740

您必须管理两个列表，并且两者都是动态的。

**实现步骤：**

*   `Create`两个`ArrayList<String>`。取决于您的数据类型，我在这里制作为字符串数组。
*   `Add value`到数组列表。
*   `Create custom adapter`并在其中传递两个列表适配器并据此获取值。
*   `Add list`到微调器适配器。获取 Spinner 的索引或位置。
*   跟随`same index to get value from second list value`。
*   `Send that value to server`.
*   任务结束

[请参阅演示示例，该示例将指导您轻松实现。](http://ashvinhinsu.blogspot.in/2012/04/custom-spinner-example.html)

享受 ！！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T12:29:58.297

不是最好的，但一种方法是使用 id 创建另一个字符串数组：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
<string-array name="test">
    <item Value="1">Baran</item>
    <item value="2">Khan</item>
</string-array>
<string-array name="testIDS">
    <item>1</item>
    <item>2</item>
</string-array>
</resources> 
```

现在，当`i`从数组中选择项时，您可以从数组中的项中`test`获取 id 。`i``testIDS`

# java - 在构造函数之外使用 .setVisible() 会破坏我的 GUI

> ID：14603762
> 
> 赞同：5
> 
> 时间：2013-01-30T12:14:03.593
> 
> 标签：java, swing, user-interface, jframe, multiple-instances

我现在正在学习 java GUI 的基础知识。我有这种奇怪的情况，我无法真正解释。

我有一个 GUI 类，我在其中构建了一个简单的 JFrame。如果我`.setVisible(true)` **在构造函数中**使用一切正常，如果我在**外面**使用它，则*不会加载任何内容*（窗口可见，但按钮和其他不可见）。

为什么会这样？

```
public class GUI extends JFrame {

    private JTextField humanYears_TextField = new JTextField(3);
    private JTextField dogYears_TextField = new JTextField(3);
    private JButton convert_Button = new JButton("Convert");
    private JLabel greeting = new JLabel ("Dog years to Human years!");

    public GUI () {

        JFrame window = new JFrame();
        JPanel content = new JPanel();

        content.setLayout(new FlowLayout());
        content.add(this.greeting);
        content.add(new JLabel("Dog Years: "));
        content.add(this.dogYears_TextField);
        content.add(this.convert_Button);
        content.add(new JLabel("Human Years: "));
        content.add(this.humanYears_TextField);

        window.setContentPane(content);
        pack(); // aplica contentPane-ul
        window.setLocationRelativeTo(null);

        window.setTitle("Dog Year Converter");
        window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        window.setVisible(true); // IF IT'S HERE IT WORKS
    }
}

public static void main(String[] args) {

    GUI dogYears = new GUI();
    //dogYears.setVisible(true); // IF IT'S HERE
                                 //NOTHING EXCEPT THE WINDOW LOADS
} 
```

**为什么会这样？**

在此示例中，这无关紧要，但是如果我想让窗口仅在单击按钮或其他内容时才可见怎么办？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T12:22:16.537

1）您创建 2 个实例，`JFrame` 第一个实例来自扩展`JFrame`类，第二个实例来自`JFrame window=..`. 然后你继续调用并且`setVisible(..)`在`window`你的主中你尝试调用`setVisible(...)`你的`dogYears`.

**解决方案**

您应该只`JFrame`为每个 Swing GUI 创建一个。摆脱`extends JFrame`（以及随之而来的代码），因为它不是`JFrame`在 Swing 中扩展的好习惯。因此，你当然不能调用`setVisible(true)`你的构造函数，这很好，要么在构造函数中创建 GUI 之后调用它，要么`setVisible`在 GUI 类中创建一个方法，它将成为你`JFrame`的 s`setVisble(boolean b)`方法的包装器。

**其他建议**

*   始终创建您`Event Dispatch Thread`应该在 via`SwingUtilitites.invokeLater(Runnable r)`块中执行的 Swing 组件。阅读[Swing 中的并发](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)。

*   `JFrame`记得在设置可见之前和添加组件之后调用 pack 。

*   `setLocationRelativeTo(..)`应该之后`pack()`。

*   `JFrame.DISPOSE_ON_CLOSE`除非使用计时器，否则最好使用。

*   也不需要简单地`setContentPane`调用实例。`add(..)``JFrame`

这是带有上述修复的代码：

![在此处输入图像描述](../Images/356ec5661416ed709320644487c60fb0.png)

```
import java.awt.FlowLayout;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;

public class GUI {

    private JTextField humanYears_TextField = new JTextField(3);
    private JTextField dogYears_TextField = new JTextField(3);
    private JButton convert_Button = new JButton("Convert");
    private JLabel greeting = new JLabel("Dog years to Human years!");
    private JFrame window = new JFrame();
    private JPanel content = new JPanel();

    public GUI() {
        content.setLayout(new FlowLayout());
        content.add(this.greeting);
        content.add(new JLabel("Dog Years: "));
        content.add(this.dogYears_TextField);
        content.add(this.convert_Button);
        content.add(new JLabel("Human Years: "));
        content.add(this.humanYears_TextField);

        window.add(content);

        window.setTitle("Dog Year Converter");
        window.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);

        window.pack();
        window.setLocationRelativeTo(null);
        //window.setVisible(true); //works here now
    }

    //our wrapper method so we can change visibility of our frame from outside the class
    void setVisible(boolean visible) {
        window.setVisible(visible);
    }

    public static void main(String[] args) {
        //Create Swing components on EDT
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                GUI dogYears = new GUI();
                dogYears.setVisible(true);//works here too
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-30T12:23:18.107

你有两个`JFrame`s，GUI 类本身和内部变量“window”。只使用一个。

确保 GUI 没有扩展`JFrame`（不需要这样做），并为类提供一个公共的 void`setVisible(boolean)`方法，将窗口设置为可见。

```
public class GUI {

    private JTextField humanYears_TextField = new JTextField(3);
    private JTextField dogYears_TextField = new JTextField(3);
    private JButton convert_Button = new JButton("Convert");
    private JLabel greeting = new JLabel ("Dog years to Human years!");
    private JFrame window = new JFrame();

    public GUI () {

        JPanel content = new JPanel();

        content.setLayout(new FlowLayout());
        content.add(this.greeting);
        content.add(new JLabel("Dog Years: "));
        content.add(this.dogYears_TextField);
        content.add(this.convert_Button);
        content.add(new JLabel("Human Years: "));
        content.add(this.humanYears_TextField);

        window.setContentPane(content);
        pack(); // aplica contentPane-ul
        window.setLocationRelativeTo(null);

        window.setTitle("Dog Year Converter");
        window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        // window.setVisible(true); // IF IT'S HERE IT WORKS
    }

    public void setVisible(boolean visible) {
        window.setVisible(visible);
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-30T12:22:45.220

你有两个不同的实例:-)

在您的构造函数中：

```
JFrame window = new JFrame();
window.setVisible(true); // IF IT'S HERE IT WORKS 
```

在你的主要：

```
GUI dogYears = new GUI();
dogYears.setVisible(true); 
// dogYears != local var window in constructor 
```

这可能会让我开始*不*扩展类，而是使用它们。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-30T12:25:23.793

您的类`GUI`从 a 扩展`JFrame`，但在构造函数中，您正在初始化另一个 JFrame，这导致有**两个不同** `JFrame`**的 s**。

试试这个：

```
public class GUI {

    private JTextField humanYears_TextField = new JTextField(3);
    private JTextField dogYears_TextField = new JTextField(3);
    private JButton convert_Button = new JButton("Convert");
    private JLabel greeting = new JLabel ("Dog years to Human years!");

    public GUI () {
        JFrame window = new JFrame();
        JPanel content = new JPanel();

        content.setLayout(new FlowLayout());
        content.add(this.greeting);
        content.add(new JLabel("Dog Years: "));
        content.add(this.dogYears_TextField);
        content.add(this.convert_Button);
        content.add(new JLabel("Human Years: "));
        content.add(this.humanYears_TextField);

        window.setContentPane(content);
        pack(); // aplica contentPane-ul
        window.setLocationRelativeTo(null);

        window.setTitle("Dog Year Converter");
        window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        window.setVisible(true);
    }

    // main

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T12:38:18.543

您正在 GUI 的构造函数中创建 JFrame 的实例，该实例也扩展了 JFRame。现在您正在创建不同的组件并将它们添加到“窗口”对象上。如您所知，框架设置为可见 = 假和未装饰 = 假。因此，要设置特定的 JFrame 实例，您需要在该实例上调用 setVisible() 方法。

在这里，您只是创建了一个 GUI 实例，并没有在其上添加任何组件。在构造函数中编写如下语句，而不是***“window.setContentPane(content);”*** ：

设置内容窗格（内容）；

然后在您的 GUI 类实例上调用 setVisible() 方法，即 d* *ogYears.setVisible(true);* *！！

# javascript - CSS：文本背景：隐藏其他文本；

> ID：14603767
> 
> 赞同：-3
> 
> 时间：2013-01-30T12:14:14.170
> 
> 标签：javascript, html, css

是否可以将多个文本相互重叠，但只有其中一个可读/可见，而无需设置所需可读文本容器的背景颜色？

我梦想着这样的事情：

```
text-background: hide-other-text; 
```

更多信息：我需要文本后面元素的背景颜色，并且“下面”的文本需要上升到顶部的文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:49:22.587

如果需要，您可以使用 jQuery 隐藏一段文本，并添加另一段文本。在这种情况下，这可能要简单得多。

# jsf-2 - 添加验证后目标无法访问错误

> ID：14603770
> 
> 赞同：0
> 
> 时间：2013-01-30T12:14:20.717
> 
> 标签：jsf-2, richfaces, facelets, cdi, composite-component

`"/resources/components/hostForm.xhtml @25,84 value="#{cc.attrs.host.hostName}": Target Unreachable, 'host' returned null"`我添加后出现错误

```
 <f:validateLength minimum="1" maximum="200"/> 
```

到自定义标签中的 inputText 字段。没有验证一切正常。

```
 <!-- INTERFACE -->
    <composite:interface>
        <composite:attribute name="host" />
        <composite:attribute name="prefix" />
    </composite:interface>
    <!-- IMPLEMENTATION -->
    <composite:implementation>
        <h:panelGrid columns="3" columnClasses="titleCell">
            <h:outputLabel for="#{cc.attrs.prefix}hostName" value="Host Name" />
            <h:inputText id="#{cc.attrs.prefix}hostName" value="#{cc.attrs.host.hostName}">
                <f:validateLength minimum="1" maximum="200"/>
                <rich:validator />
            </h:inputText>
            <rich:message for="#{cc.attrs.prefix}hostName" />
        </h:panelGrid>
    </composite:implementation> 
```

该字段声明为

```
 @Named
  @Produces
  private Host newHost; 
```

自定义标签调用：

```
<my:hostForm prefix="c" host="#{newHost}"/> 
```

我需要更改什么才能通过验证来完成这项工作？

编辑：

Bean 已经有了`@ConversationScoped`注解。向字段添加`@ConversationScoped`注释会导致此错误：

hostForm.xhtml @20,74 value="#{cc.attrs.host.id}": org.jboss.weld.exceptions.IllegalProductException: WELD-000052 不能从非依赖生产者方法返回 null：[field] @命名为@ConversationScoped @Produces

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T14:22:10.533

尝试为其添加范围，可能是请求或对话。您所拥有的是默认范围，它本质上就像在`new`每次需要它的实例时创建一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T15:26:32.707

我将注释从属性移到了getter，并自己实例化了对象。这行得通。

```
@Produces
@Named("newHost")
public Host getNewHost() {
    if ( newHost == null ) {
        newHost = new Host();
    }
    return newHost;
} 
```

[https://community.jboss.org/thread/179527](https://community.jboss.org/thread/179527)

# jquery - 将 3 个 div 与自动边距对齐

> ID：14603771
> 
> 赞同：0
> 
> 时间：2013-01-30T12:14:23.677
> 
> 标签：jquery, html, css

我想将 3 个部分对齐在一行中：一个在左侧，一个在中心，一个在右侧。我怎样才能做到这一点？

```
<div id="container">
    <div class="div1"></div>
    <div class="div2"></div>
    <div class="div3"></div>
</div> 
```

CSS：

```
#container{
    border:1px solid #ff0000;
    width: 100%;
    display: inline-block;
    height:auto;
  }

.div1{background: lime;border: 1px solid #ccc;width:100px;height: 100px; float: left}
.div2{background: yellow;border: 1px solid #ccc;width:100px;height: 100px; float:left}
.div3{background: orange;border: 1px solid #ccc;width:100px;height: 100px; float: right} 
```

小提琴：http: [//jsfiddle.net/ux4DD/164/](http://jsfiddle.net/ux4DD/164/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T12:19:01.463

将 div 3 移动到所有 div 的顶部并添加`margin: 0px auto;`到第二个 div。

[http://jsfiddle.net/ux4DD/165/](http://jsfiddle.net/ux4DD/165/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T12:22:38.943

添加`text-align:center`到 #container 并`float:left`从中间 div 中删除

```
 #container{
    border:1px solid #ff0000;
    width: 100%;
     text-align:center; padding:0; font-size:0
  }
.div1{background: lime;border: 1px solid #ccc;width:100px;height: 100px; float: left; font-size:14px }
.div2{background: yellow;border: 1px solid #ccc;width:100px;height: 100px; display:inline-block; font-size:14px}
.div3{background: orange;border: 1px solid #ccc;width:100px;height: 100px; float: right; font-size:14px } 
```

**[演示](http://jsfiddle.net/ux4DD/169/)**

# twitter-bootstrap - 如何更改导航栏和菜单上的字体、背景颜色？

> ID：14603773
> 
> 赞同：0
> 
> 时间：2013-01-30T12:14:27.970
> 
> 标签：twitter-bootstrap

我发现了另一个 SO question，它回答了如何更改导航栏的背景颜色，但是如何更改导航栏和子菜单的字体、字体大小等？

谢谢，

乔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T12:22:05.907

最简单的方法可能是通过 Bootstrap 的自定义页面来完成：

[http://twitter.github.com/bootstrap/customize.html](http://twitter.github.com/bootstrap/customize.html)

或者，您可以将 CSS 规则添加到 main.css 文件以覆盖 bootstrap.css 上的规则

使用 Firebug 检查 Navbar 元素并获取类名/样式等，并将它们替换为您想要使用的任何样式。

# jquery - Jquery：添加 .toggle使其消失

> ID：14603775
> 
> 赞同：3
> 
> 时间：2013-01-30T12:14:40.083
> 
> 标签：jquery, twitter-bootstrap, toggle

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-30T12:25:17.407

您正在使用已弃用的`.toggle`功能。它在 jQuery >= 1.9.0 中被删除，因此如果您使用该版本，此代码将调用`.toggle`动画函数，其中第二个函数是回调（在这种情况下将立即执行）。

相反，您应该自己实现这样的功能：

```
var toggleState = true;
$('#autoUpdate').on("click", function() {
  if(toggleState) {
    alert('a');
  } else {
    alert('b');
  }
  toggleState = !toggleState;
}); 
```

# android - SQLCipher 是否允许其他应用程序访问数据库。（如果数据库在 SD-CARD 中）

> ID：14603777
> 
> 赞同：6
> 
> 时间：2013-01-30T12:14:43.477
> 
> 标签：android, sqlcipher

我在 SQLCiper 中尝试一件事。

这个东西在 SQLite 数据库中是成功的`SD-CARD`

1-创建了一个应用程序`firstApp`。与数据库`SD-CARD`

2-创建第二个应用程序`secondApp`。

我正在尝试在我的第二个应用程序中从 SD-CARD 读取数据。

编辑：- 我在 SDCARD 中的数据库。

```
public class SdcardCipherDataBase extends SQLiteOpenHelper
{

    public static final String  DATABASE_FILE_PATH = "/sdcard";
    public static final String  DATABASE_NAME = "sdCipherDatabase";
    public final static String NAME ="name";
    public final static String ADDRESS ="address";
    public final static String CITY ="city";

    public SdcardCipherDataBase(final Context context) {
        super(context,Environment.getExternalStorageDirectory()+File.separator+DATABASE_FILE_PATH + File.separator + DATABASE_NAME, null, 1);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        try
        {  
            db.execSQL( "CREATE TABLE information(_id INTEGER PRIMARY KEY AUTOINCREMENT,name TEXT, address TEXT,city TEXT);");

        }

        catch (SQLiteException ex)
        {
            Log.e("Hello", "error -- " + ex.getMessage(), ex);
        }
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub
        db.execSQL("DROP Table mylistdata");
        onCreate(db);
    }
} 
```

我在同一个应用程序中使用这个数据库：-

```
public void databasCollection()
    {
        SQLiteDatabase.loadLibs(this);
        File file = getDatabasePath("/mnt/sdcard/sdcard/sdCipherDatabase");
        file.mkdir();
        file.delete();
        db = SQLiteDatabase.openOrCreateDatabase(file, "myapp", null);
        sdb = new SdcardCipherDataBase(this);

        sdb.getWritableDatabase("myapp");
        ContentValues c = new ContentValues();
        c.put(SdcardCipherDataBase.NAME,"monty");
        c.put(SdcardCipherDataBase.ADDRESS,"BTM");
        c.put(SdcardCipherDataBase.CITY,"Bangalore");
        db.insert("information", SdcardCipherDataBase.NAME, c);
        db.close();
    } 
```

但我也想在其他应用程序中使用相同的数据库。

我正在尝试做这样的事情

```
public void databaseFromOtherApp()
{
    SQLiteDatabase.loadLibs(this);
    File file = getDatabasePath("/mnt/sdcard/sdcard/sdCipherDatabase");
    db = SQLiteDatabase.openOrCreateDatabase(file, "myapp", null);
    dh = new DatabaseHelper(this);

    Cursor cursor = db.rawQuery("select * from information", null);
    cursor.moveToFirst();
    String s = cursor.getString(cursor.getColumnIndex(NAME));
    Toast.makeText(this,"Name is "
            +s, Toast.LENGTH_LONG).show();

    cursor.close();
    db.close();
} 
```

但显示错误。

```
 Caused by: net.sqlcipher.database.SQLiteException: no such table: information: , while compiling: select * from information 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T12:34:49.343

您的第二个应用程序中的这一行是错误的：

```
dh = new DatabaseHelper(this); 
```

您还需要在您的第二个应用程序中的实例`SdcardCipherDataBase`，因为该类知道表和表名。目前，您正在使用`DatabaseHelper`不知道要寻找什么的平原。

更新：
即使你可以做你需要的，这也不是明智之举。如您所见，您需要将所有与数据库相关的逻辑复制到使用它的任何其他应用程序。如果您需要第三个应用程序来做同样的事情怎么办？再次复制所有课程？如果您需要修改表以添加新列怎么办？您必须修改所有三个应用程序中的类。通常，您希望将数据库访问层保留在第一个应用程序中，并通过内容提供程序提供对其他应用程序的访问。

# c#-4.0 - 从对象列表中提取对象属性列表

> ID：14603779
> 
> 赞同：2
> 
> 时间：2013-01-30T12:14:47.703
> 
> 标签：c#-4.0, linq-to-entities, generic-list

如果我有学生对象列表

```
var List<Student> = new List<Student>(); 
```

这是学生对象数据**（ID，名称）**

如何仅使用 Linq To Entities 提取学生 ID 列表

请指教，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T12:17:22.133

只需使用`Enumerable.Select`：

```
List<int> studentIDs = students.Select(s => s.ID)
                               .ToList(); 
```

（虽然我不确定它与 linq-to-entities 有什么关系）

# c# - 编译具有不同名称的相同程序集

> ID：14603781
> 
> 赞同：2
> 
> 时间：2013-01-30T12:14:51.470
> 
> 标签：c#, compilation, .net-assembly

我有一个编译两次的 C# winform 应用程序。

第一次以全屏模式运行第二次以正常尺寸模式运行；在winform的大小范围内。

目前，每个编译都在其自己的文件夹中。

我需要将这两个版本编译到一个/相同的文件夹中。所以文件 GUI.exe 和 GUI-FULL_SCREEN.exe 将在同一个文件夹中。

我试过的：

*   首先我编译了程序集名称为 GUI.exe 的普通模式应用程序
*   然后我将程序集名称更改为 GUI-FULL_SCREEN.exe（在应用程序属性/应用程序/程序集名称中）并将其编译到同一目录中。这删除了第一个程序集 GUI.exe 并创建了新的 GUI-FULL_SCREEN.exe。

我想要实现的是 GUI.exe 和 GUI-FULL_SCREEN.exe 将保留在同一目录中。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:59:15.890

您可以使用命令行参数来切换此设置并仅创建一个快捷方式而不是新的 exe 文件。

例如，如果通过了*全屏*，则以全屏方式启动应用程序，否则以正常模式启动。您可以使用[Environment.GetCommandLineArgs](http://msdn.microsoft.com/en-us/library/system.environment.getcommandlineargs.aspx)来获取参数。

然后只需创建 exe 文件的快捷方式，将其命名为 GUI-FULL_SCREEN 并使用所需参数启动应用程序：*'".\GUI.exe" /fullscreen'*

# ipad - 让 iPad 只使用一个应用程序并禁用设置

> ID：14603783
> 
> 赞同：0
> 
> 时间：2013-01-30T12:14:52.070
> 
> 标签：ipad, security, settings

在我工作的办公室，我们正在尝试部署 iPad。现在，我们公司拥有 16 台 iPad，我们使用 Sophos Mobile Control 来监控和管理这些 iPad。

然而，我们发现这还不够。每次我遇到给员工的 iPad 时，他都会对设备或软件进行更改。尽管我们确实有这方面的政策，但 iPad 不受允许在公司内部进行此类事情的 BYOD 政策的涵盖。

在多次尝试禁用 iPad 中的各种功能（从尝试禁用设置应用程序到使用一个应用程序使用“某种”信息亭模式）之后，我找到的所有解决方案都不适合清洁设备。

尝试禁用设置时，您无法禁用所有内容，并且背景等内容仍然可以由员工更改。我们不希望这样，因为这款 iPad 有点像我们公司的商标——我们努力在开发和实施新设备以及完成工作的方法方面保持稳定的步伐——客户决不能面临这些员工在 iPad 上设置的非专业背景。

只要有可能，人们就会尝试（ab）使用它。我想控制 iPad 用户可以查看/使用哪些应用程序、设置和网页。我们有什么办法可以改变 iPad 保护自己的方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T12:19:53.287

我想你是在“苹果企业配置器”之后

[http://www.apple.com/support/ipad/enterprise/](http://www.apple.com/support/ipad/enterprise/)

我没有使用它，但它听起来像是（唯一的）选项。

[http://help.apple.com/configurator/mac/1.2/](http://help.apple.com/configurator/mac/1.2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T12:28:54.083

您是否尝试过引导访问？我对它不是很熟悉，所以这可能只是用于临时会话。我了解员工可以更长时间地使用设备？

[iOS：关于引导式访问](http://support.apple.com/kb/HT5509?viewlocale=en_US&locale=en_US)

另一种选择是将 iPad 锁定在单个应用程序中。我早些时候写了一篇关于这个的博客文章。它适用于 iOS 5，不确定 iOS 6。虽然企业配置器可能也有启用此功能的选项：

[适用于 iOS 的 Kiosk 模式](http://joris.kluivers.nl/blog/2012/03/02/kiosk-mode-for-ios/)

# jquery - JQuery UI Draggable 自定义助手在 IE7 中无法正常工作

> ID：14603785
> 
> 赞同：0
> 
> 时间：2013-01-30T12:14:57.143
> 
> 标签：jquery, jquery-ui, internet-explorer-7

我想在我正在处理的 Web 应用程序中使用自定义帮助器来显示一些关于突出显示的项目的文本，在这种情况下是一个“友好”的名称。我选择了 JQuery UI 作为我的插件。不幸的是，我需要支持 IE7 上的用户，这是没有商量余地的。Jquery 网站上的演示在 IE7 中按预期工作：

```
$( "#draggable3" ).draggable({
cursor: "move",
cursorAt: { top: -12, left: -20 },
helper: function( event ) {
return $( "<div class='ui-widget-header'>I'm a custom helper</div>" );
}
}); 
```

但是，当我复制它并将其放在我自己的网站上时，它在 IE7 中不起作用，但在 FireFox、Chrome 和 Opera 中起作用。不工作是指光标正确更改并且“可拖动”状态处于活动状态，但未显示帮助文本。

为了解决这个问题，我尝试使用 'zoom:1;', 'z-index:9999;' 还有'位置：相对;' 和“位置：绝对；”，这让我想知道“我错过了什么吗？” 希望其他人遇到过这个问题，并且可以为我们所有人提供一些启示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T11:31:08.030

不知道你是否还有这个问题，但添加这一行。

```
$( "#draggable3" ).draggable({
    appendTo: 'body',
    cursor: "move",
    cursorAt: { top: -12, left: -20 },
    helper: function( event ) {
        return $( "<div class='ui-widget-header'>I'm a custom helper</div>" );
    }
}); 
```

你的助手 div 被附加到一个奇怪的地方；我的在桌子的底部，因为它抬高了我的桌子边框，所以只能看到它。

# javascript - WordPress 的 video.js：IE 8 中的 JavaScript 错误

> ID：14603787
> 
> 赞同：1
> 
> 时间：2013-01-30T12:15:01.537
> 
> 标签：javascript, internet-explorer-8, wordpress, video.js

我正在使用[Video.js - HTML5 Video Player for WordPress](http://wordpress.org/extend/plugins/videojs-html5-video-player-for-wordpress/)和 WordPress 3.5 。我的 MP4 视频在 Chrome、Firefox 和 Safari 中正常播放，但在 Internet Explorer 8 中不能正常播放。它显示 JavaScript 错误：

```
Invalid Argument
video.js     Line: 21
Code: 0   Char: 29906
URI: http://vjs.zencdn.net/c/video.js 
```

正如我在 video.js 支持论坛的这篇[文章](http://help.videojs.com/discussions/problems/384-javascript-error-in-ie8)中看到的，许多用户报告了同样的错误，但似乎没有提供解决方案。有没有人可以给我一些灯？

**更新：**这是我使用的简码：

> [视频 mp4="http://video/path/here.mp4" width="95%"]

帖子内容中没有其他内容。WordPress 版本：3.5

当前安装的激活插件：

*   Fancybox for WordPress v3.0.2
*   批量水印 v1.5.1
*   AP Extended Mime Types v1.1（互联网上的一些人建议安装它可以解决问题，但根本无法解决）
*   Video.js - 用于 WordPress v3.2.2 的 HTML5 视频播放器

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T17:42:16.497

**问题是以下代码：**

```
el.style.width=initWidth+"px" 
```

此代码可以在 video.js 文件中找到。您需要在本地托管文件才能进行下面的编辑。

您可能在视频中使用了 100% 的宽度。因此 videojs 试图将父 div 的宽度设置为“100%px”。这当然行不通。

**将上面的行更改为：**

```
el.style.width=initWidth.indexOf('%') !== -1 ? initWidth : initWidth+"px"; 
```

# functional-programming - 使用 Play 2 Iteratees 时如何从 List[T] 中获取 Enumerator[T]

> ID：14603790
> 
> 赞同：1
> 
> 时间：2013-01-30T12:15:19.863
> 
> 标签：functional-programming, playframework-2.0, enumerator, iterate

我对 Play 2 很陌生，正在尝试 Iteratees。

Q1。我怎样才能得到一个`Enumerator[Person]`from `List[Person]`？

Q2。当我尝试将一个传递`Enumerator(Option[String])`给`Ok.stream`我时，我在控制台上收到一个错误，指出

> 无法将 Option[String] 的实例写入 HTTP 响应。尝试定义一个 Writeable[Option[String]]

有人可以指出我如何为自定义类型定义可写到 HTTP 响应的正确方向吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T08:49:17.510

A1。您可以使用`Enumerator#enumerate`为每个运行 Iteratee`Person`

```
val persons: List[Person] = List(person0, person1)  
Enumerator.enumerate(persons) |>>> Iteratee.foreach(println _) 
```

[https://github.com/playframework/Play20/blob/2.1.0/framework/src/iteratees/src/test/scala/play/api/libs/iteratee/EnumeratorsSpec.scala#L74-L83](https://github.com/playframework/Play20/blob/2.1.0/framework/src/iteratees/src/test/scala/play/api/libs/iteratee/EnumeratorsSpec.scala#L74-L83)

A2。而不是定义`Writeable[Option[String]]`，提取`String`自`Option[String]`

```
Ok.stream(
   Enumerator(Option("kiki"), Option("foo"), Option("bar")).map(_.get) >>> Enumerator.eof
) 
```

# apache - .htaccess 重写规则以停止执行

> ID：14603795
> 
> 赞同：2
> 
> 时间：2013-01-30T12:15:33.803
> 
> 标签：apache, .htaccess, mod-rewrite

我的大多数 htaccess 规则将未签名的用户重定向到`index.html`.
但是当我将它们重定向到 时`index.html`，所有这些规则也会针对该页面重新运行。我需要为访问索引文件的用户运行最少的规则集。

很明显，这会`[L]`阻止 htaccess 规则的运行。

解决这个问题的更好方法是什么？这是一种正确的方法还是您有更好的建议？

```
RewriteCond %{REQUEST_URI} index\.html
RewriteRule ^(.*)$ index.html [L] 
```

我的完整 htaccess：

```
<IfModule mod_rewrite.c>
    RewriteEngine On

    RewriteCond %{HTTP_HOST} ^www\.(.*)$ [NC]
    RewriteRule ^(.*)$ http://%1/$1 [R=301,L]

    RewriteCond %{REQUEST_URI} (\/onefolder|\/secondfolder) [NC]
    RewriteCond %{REMOTE_ADDR} !111\.22\.33\.44 [NC]
    RewriteCond %{REQUEST_URI} !(index\.html) [NC]
    RewriteRule ^(.*)$ index.html [F]

    RewriteCond %{HTTP_USER_AGENT} oneagent|otheragent [NC]
    RewriteCond %{REQUEST_URI} !(index\.html) [NC]
    RewriteRule ^(.*)$ index.html? [R=301,L]

    RewriteCond %{HTTP_USER_AGENT} betteragent|otherbetterganet [NC]
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_URI} !(index\.html) [NC]
    RewriteRule ^(.*)$ index.html? [R=301,L]

    RewriteCond %{HTTP_COOKIE} !username [NC]
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_URI} !(\/importantone|\/somefolder|index\.html) [NC]
    RewriteRule ^(.*)$ index.html [L]

    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)$ index.php [QSA,L]
</IfModule> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T12:22:45.437

你可以做几件事。如果您只想停止重写 for `index.html`，您可以在规则的最顶端做一些类似于您所拥有的（但更简单）的事情：

```
RewriteRule ^/?index.html$ - [L] 
```

这`-`只是为了“通过”，本质上是让它在那里重写。

或者，您可以通过将其添加到规则顶部来完全防止循环：

```
RewriteCond %{ENV:REDIRECT_STATUS} 200
RewriteRule ^ - [L] 
```

做类似的事情，但检查是否有任何类型的内部重定向。

# java - Jaxb 元素注释

> ID：14603800
> 
> 赞同：1
> 
> 时间：2013-01-30T12:15:58.373
> 
> 标签：java, jaxb, jaxb2

我如何注释我的类来归档这个 xml 结构：

```
<elementTag attribute="false">Testvalue</elementTag> 
```

我试图将 elementTag 放入一个单独的类中，但是“Testvalue”不像我的示例中那样是内联的。

谢谢和最好的问候，米

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T12:17:55.630

您可以使用`@XmlValue`注释。

```
@XmlRootElement(name="elementTag")
public class Root {

     @XmlAttribute
     public String getAttribute {
         return attribute;
     }

     @XmlValue
     public String getValue() {
         return value;
     }

} 
```

# java - Java文件删除错误

> ID：14603801
> 
> 赞同：4
> 
> 时间：2013-01-30T12:16:04.603
> 
> 标签：java

我想删除java中的一个文件。它会生成这个结果。我怎样才能删除该文件。这是什么原因。

```
File l_file = new File(path);
System.out.println(l_file.exists()); //returns true
System.out.println(l_file.delete()); //returns false 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T12:17:47.347

文件删除失败的原因有多种。例如，如果另一个进程正在持有它的句柄，或者您无权删除此文件。在这两种情况下，您都可以检查文件是否存在，但不能删除它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T12:18:46.773

无法删除文件的原因有很多。最有可能的情况是该文件在另一个进程中打开，或者您的进程启动时使用的权限低于删除该文件所需的权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T12:22:35.097

第一个原因是`path`可以是目录

从[javadoc](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/File.html#isDirectory%28%29) `File#delete()`：

`If this pathname denotes a directory, then the directory must be empty in order to be deleted.`

检查路径是否为空目录：

```
if (l_file.isDirectory()) {
   String[] files = l_file.list();
      if (files.length > 0) {
         System.out.println("The " + l_file.getPath() + " is not empty!");
      }
} 
```

* * *

您无法删除 a 的另一个原因`path`是您没有许可证

检查您的许可：

```
if (l_file.canWrite())
   l_file.delete(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T12:24:18.470

也许您可以尝试使用以下`File`方法检查它是否是文件（而不是目录）其权限：

```
boolean isFile() // if it is a directory it must be empty
boolean canWrite()
boolean canRead()
boolean canExecute() 
```

此外，正如您在 Java API 中所读到的：“在某些操作系统上，当该 Java 虚拟机或其他程序打开并使用该文件时，可能无法删除该文件。”

如果您在 Linux 中，您可以尝试`lsof <file_name>`以了解哪个进程打开了此文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T13:17:24.830

您也可以尝试`FileChannel.lock()`或`FileChannel.tryLock()`查看是否可以在删除之前获取锁。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-12-13T01:48:24.917

有两种方法可以解决它。

1.  转到文件并将其属性更改为完全控制
2.  如果您打开了 PrintWriter 或 Scanner 类，您应该关闭该类，尤其是 Scanner 对象`.Close` ![在此处输入图像描述](../Images/60593ef17883e84895865fdc4472328d.png)

# r - 查找两个 1 之间的行数的聪明方法

> ID：14603802
> 
> 赞同：1
> 
> 时间：2013-01-30T12:16:06.590
> 
> 标签：r, xts

我有一个 xts 对象，它只包含 1 和 0，但主要是零，我想知道是否有一种智能/有效的方法来计算两个 1 之间的行数（而不是天数）

以及对象外观的一部分示例...

```
 x1
2012-12-13       0
2012-12-14       0
2012-12-17       0
2012-12-18       1
2012-12-19       0
2012-12-20       0
2012-12-21       0
2012-12-24       0
2012-12-26       0
2012-12-27       0
2012-12-28       0
2012-12-31       0
2013-01-02       0
2013-01-03       0
2013-01-04       0
2013-01-07       0
2013-01-08       0
2013-01-09       0
2013-01-10       0
2013-01-11       0
2013-01-14       0
2013-01-15       1
2013-01-16       0
2013-01-17       0
2013-01-18       0
2013-01-22       0
2013-01-23       0
2013-01-24       0
2013-01-25       0
2013-01-28       0
2013-01-29       0 
```

基本上我想在 2012 年 12 月 19 日至 2013 年 1 月 15 日的 1 和 0 旁边有一个向量/xts 对象，其编号为 18，因为在示例中的两个 1 之间有 18 行......还有更多1s 和 0s 你去的时间越早......但基本上希望看到，对于每一天，vector/xts 列的值将是直到下一个 1 的行数......我希望说得通？所以像这样的东西..

```
 x1   x2
2012-12-13       0   19
2012-12-14       0   19
2012-12-17       0   19
2012-12-18       1   19
2012-12-19       0   18
2012-12-20       0   18
2012-12-21       0   18
2012-12-24       0   18
2012-12-26       0   18
2012-12-27       0   18
2012-12-28       0   18
2012-12-31       0   18
2013-01-02       0   18
2013-01-03       0   18
2013-01-04       0   18
2013-01-07       0   18
2013-01-08       0   18
2013-01-09       0   18
2013-01-10       0   18
2013-01-11       0   18
2013-01-14       0   18
2013-01-15       1   18
2013-01-16       0   20
2013-01-17       0   20
2013-01-18       0   20
2013-01-22       0   20
2013-01-23       0   20
2013-01-24       0   20
2013-01-25       0   20
2013-01-28       0   20
2013-01-29       0   20 
```

ETC...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T12:40:53.450

这是一种方法：

```
object$x2 <- ave(object$x1, cumsum(object$x1), FUN=nrow) 
```

但我看到你想在组中包含右侧间隔，而不是左侧，所以你需要这样做：

```
object$x2 <- ave(object$x1, rev(cumsum(rev(object$x1))), FUN=nrow) 
```

# jquery - 使用 jQuery 自动绑定按钮。问号处放什么代码？

> ID：14603806
> 
> 赞同：0
> 
> 时间：2013-01-30T12:16:23.510
> 
> 标签：jquery, binding, getelementsbytagname

我正在尝试自动绑定按钮。我需要在问号处填写什么才能获得特定于按钮 1 和 2 的警报？

在 HTML 头部

```
jQuery(document).ready(function()
{
    var myButton = document.getElementsByTagName("button");

    for (var i = 0; i < myButton.length; i++)
    {
        jQuery("#" + myButton[i].id).bind("click", function()
        {                
            alert(jQuery( --???-- ).data("text"));
        });
    }
}); 
```

在 HTML 正文中

```
<button type = "button" id = "btn1">btn1</button>
<script type="text/javascript">
    jQuery("#btn1").data("text", "Howdy");
</script>

<button type = "button" id = "btn2">btn2</button>
<script type="text/javascript">
    jQuery("#btn2").data("text", "Poo");
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T12:18:51.127

只需使用`$(this)`：

```
alert(jQuery(this).data("text")); 
```

请记住，您通过混合使用 jQuery 和 JavaScript 使这有点复杂化。您可以轻松地使用以下方法：

```
jQuery('button').click(function(){
    alert(jQuery(this).data('text');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T12:17:34.077

以这种方式附加的事件处理程序的上下文是事件处理程序附加到的元素，因此基本上您选择上下文`$(this)`来获取`jQuery`按钮的元素。

```
alert(jQuery(this).data("text")); 
```

您还可以通过以下方式减少代码：

```
$(document).ready(function () {
    $('button').click(function (event) {
         alert($(this).data('text'));
    }
}); 
```

这会将点击处理程序附加到页面中的所有按钮（与每个按钮相同`getElementsByTagName`然后循环）。

# php - PHP/MSSQL - 过滤用户输入 (HTML)

> ID：14603807
> 
> 赞同：0
> 
> 时间：2013-01-30T12:16:25.503
> 
> 标签：php, sql, sql-server, filter, user-input

我被分配了这个任务，通过用户输入对我当前的 SQL 查询进行某种过滤。基本上，我正在寻找一个过滤选项，无论是某种菜单还是按钮，都无所谓。我的mssql如下：

```
SELECT TOP 10 Test_Database.Distributor, Test_Database.Value
    FROM Test_Database
    WHERE Test_Database.Week = '(USER INPUT GOES HERE)'
    GROUP BY Distributor 
    ORDER BY Value desc 
```

我怎样才能使`WHERE`语句成为用户输入？例如.. 客户想要查看某个分销商的给定值，但在客户选择的周/月/年。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:24:47.557

我不确定，但也许你可以试试。

```
<input type="text" name="week"/> 
```

在选择页面中发布此文本框值并将该值设置在关闭位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T12:31:53.920

```
 You can do that simply by introducing if else statement
 $where  = "";
 //receive filter option  example $_GET['week']  
  //Do some sanitizing for $_GET['week']
  if ($_GET['week']) {
  $where  =  "WHERE Test_Database.Week = $_GET['week']"
 } else if (somecondition) {
  $where  = "some query";
  } 
```

//你可以通过连接$where来添加多个条件，但要确保where不重复

```
$query = "SELECT TOP 10 Test_Database.Distributor, Test_Database.Value
FROM Test_Database
$where  
GROUP BY Distributor
ORDER BY Value desc " 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T12:53:41.113

sql查询中不应该有来自用户的任何数据

没有通过过滤器

sql-injection 不是空词

*所以如果你没有清除它，sql 中没有 $_GET['week']*

# c# - 使用反射创建不同项目中的类对象？

> ID：14603808
> 
> 赞同：2
> 
> 时间：2013-01-30T12:16:33.147
> 
> 标签：c#, .net, c#-4.0, reflection

我在 C# 中有 2 个不同的项目。我正在编写代码以在第一个项目中使用反射创建类对象。现在我想创建第二个项目中的类对象。我怎样才能做到这一点。我正在使用如下代码

```
Type type = Type.GetType("qualified class name");
var obj = Activator.CreateInstance(type);
Type objType = obj.GetType(); 
```

当我在项目 1 中创建类的对象时，此代码正在工作，但是当我在项目 2 中创建类的对象时，**类型**为空，即使我正在传递像 xxx.xx.classname 这样的全名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:21:05.893

您可能需要首先引用第二个项目的 .dll。右键单击引用文件夹并单击“添加引用...”，然后找到第二个项目的已编译 dll 并添加它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-05T10:04:48.337

也许它不完全是您正在寻找的，但我通过在源项目中创建类型并将类型传递给另一个项目中的方法解决了我的问题。

```
 SomeObject.MethodInTargetProject(Type.GetType(FullTypeName));

    public void MethodInTargetProject(Type formType)
    {
        if (newFormType == null)
            return;
        var obj = Activator.CreateInstance(newFormType);
        ...
    } 
```

我希望这有帮助。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-10-01T11:57:05.923

可能是您传递的类名可能不正确...首先创建一个测试方法并如下标识类名。

```
string fullName=typeof(YourClass).FullName; 
```

然后复制“fullName”的值，然后在您的代码中使用。

# qt4 - 如何使用 qmake 创建自定义 Makefile 目标

> ID：14603809
> 
> 赞同：4
> 
> 时间：2013-01-30T12:16:35.387
> 
> 标签：qt4, qmake

据我了解，**qmake**处理一个**.pro**文件以生成用于构建实际 qt 应用程序的 Makefile。

也就是说，我怎样才能让 qmake 生成带有一些自定义 Makefile 目标的 Makefile？

具体来说，我希望在 Makefile 中有一个名为“*包*”的目标，它将运行为我新编译的 qt 应用程序创建包所需的所有步骤

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T16:17:00.643

尝试使用“QMAKE_EXTRA_TARGETS”，如[The Power of QMake 中所述](https://blog.qt.io/blog/2008/04/16/the-power-of-qmake/)。

# javascript - 阻止浏览器检查清单文件

> ID：14603812
> 
> 赞同：1
> 
> 时间：2013-01-30T12:16:45.637
> 
> 标签：javascript, html, manifest

我正在开发一个 iOS 网络应用程序，并且正在使用 HTML 5 缓存功能。由于“服务器”端（GPRS 上行链路）的互联网连接速度非常慢，我希望阻止浏览器在从应用程序缓存加载 Web 应用程序时检查清单文件。我试图取消该活动，但这不起作用：

```
window.applicationCache.addEventListener('checking', checkingEvent, false);
function checkingEvent(e) {
   //alert('checking manifest file');
   //return false;
   e.preventDefault();
} 
```

事件侦听器有效，但事件的调用无效。

有任何想法吗？

# android - 每次我的应用在 Android 中启动时，如何使更改默认值出现

> ID：14603813
> 
> 赞同：1
> 
> 时间：2013-01-30T12:16:47.383
> 
> 标签：android

我想要的只是在我的应用程序运行时阻止主页按钮

```
 <category android:name="android.intent.category.HOME" />
            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.LAUNCHER" >
            </category>
        </intent-filter> 
```

当我第一次启动我的应用程序并按下主页按钮时，我已经在清单中编写了上述代码，它要求我将我的应用程序或默认移动应用程序设置为主页的默认值。一旦我选择了默认值以外的其他内容我的应用程序并选中始终复选框.. 下次我启动我的应用程序时，此对话框永远不会出现..

```
public void onAttachedToWindow() {
        window.setType(LayoutParams.TYPE_KEYGUARD|LayoutParams.FLAG_FULLSCREEN|LayoutParams.FLAG_LAYOUT_IN_SCREEN|LayoutParams.FLAG_KEEP_SCREEN_ON);

        super.onAttachedToWindow();
    } 
```

不适用于 Android 4.0 及更高版本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T12:27:10.290

出于安全原因，您无法覆盖 Android4.0 及更高版本的主页按钮，以便在应用程序被证明是恶意软件的情况下启用用户退出。

另外，不让用户离开应用程序并不是一个很好的做法。但是，如果您的应用程序需要，您可以将活动声明为 Launcher ，这样当按下 HomeButton 时，它会简单地重新启动您的应用程序并自行保留在那里

# c# - 如何以通用方式编写以下逻辑？

> ID：14603815
> 
> 赞同：3
> 
> 时间：2013-01-30T12:16:56.677
> 
> 标签：c#, .net, generics, generic-programming

我有一个像下面这样的模型

```
public sealed class Person
{
        public string MobileNo { get; set; }
        public string Firstname { get; set; }
        public string Lastname { get; set; }
} 
```

在我的实现类中，我有一个以 a`IEnumerable`作为参数的方法

```
public string PersonList(string listName, IEnumerable<Person> persons)
{
   dictionary.Add("name", new String[1] { listname }); 
   dictionary.Add("list", persons.ToArray());

    PrivateMethod("personList", dictionary);
} 
```

我有另一个私有方法

```
private string PrivateMethod(string value, Dictionary<string, object[]> parameters)
{
    foreach (KeyValuePair<string, object[]> kvp in parameters)
    {
           Person[] persons = kvp.Value.Cast<Person>().ToArray();

           [...]
    }

[...]
} 
```

我想让上述方法可重用，并且不想将**“Person”**模型紧密耦合。

我可以使用**动态**吗？

```
ContactList(string listName, IEnumerable<dynamic> persons) 
```

并且在私有方法中

`dynamic[] persons = kvp.Value.Cast<`**如何在这里传递模型**`>().ToArray();`

**解决方案：**

这会奏效的，太好了。

```
 dynamic[] persons = kvp.Value.Cast<dynamic>().ToArray(); 
```

感谢 **usr** & **Rune FS**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T12:23:29.427

你可以使`PrivateMethod`通用：

```
private string PrivateMethod<T>(string value, Dictionary<string, object[]> parameters)
{
    foreach (KeyValuePair<string, object[]> kvp in parameters)
    {
           T[] items = kvp.Value.Cast<T>().ToArray();
           [...]
    }

    [...]
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T12:47:17.187

您是否尝试过在 c# 中使用“接口”？您可以将任何对象转换为任何类型，只要它们都派生到相同类型的接口。

```
interface IPerson
{
    string MobileNo { get; set; }
    string Name { get; set; }
    string LastName { get; set; }
}

class Person : IPerson
{
    public string MobileNo { get; set; }
    public string Name { get; set; }
    public string LastName { get; set; }
}

class execute
{
    private Dictionary<string, object[]> dictionary = new Dictionary<string,object[]>();

    public void run()
    {
        List<IPerson> persons = new List<IPerson>();
        persons.Add(new Person()
        {
            LastName = "asdf",
            Name = "asdf",
            MobileNo = "123123"
        });

        persons.Add(new Person()
        {
            LastName = "aaaa",
            Name = "dddd",
            MobileNo = "1231232"
        });

        string x = PersonList("somelistname", persons);
    }

    public string PersonList(string listName, IEnumerable<IPerson> persons)
    {
        //dictionary.Add("name", new String[1] { listName });
        dictionary.Add("list", persons.ToArray());

        return PrivateMethod("personList", dictionary);
    }

    private string PrivateMethod(string value, Dictionary<string, object[]> parameters)
    {
        foreach (KeyValuePair<string, object[]> kvp in parameters)
        {
            IPerson[] persons = kvp.Value.Cast<IPerson>().ToArray();

        }

        return "somestring";
    } 
```

# database - 如何将 .DBF 文件格式转换为 .dbf 文件格式？

> ID：14603816
> 
> 赞同：-3
> 
> 时间：2013-01-30T12:17:03.710
> 
> 标签：database, foxpro, dbf, dbase

我想访问 dBase 数据库。它没有直接有任何数据库名称。它有表名基础数据文件。通常 dBase 文件格式在 msaccess 和 msexcel 中打开。但它有 .DBF 文件扩展名，所以它没有在 msaccess 或 msexcel 中打开。所以我想将 .DBF 文件转换为 .dbf 文件格式。否则如何获取数据库名称？因为数据应该通过foxpro输入。我没有任何编码 - 我只访问数据库文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T16:21:52.007

通常 .DBF 文件扩展名用于 dBASE 或 FoxPro（或 Visual Foxpro）。

如果您尝试通过 .Net（C#、VB 等）访问，Microsoft 有一个 OleDB 提供程序，您可以下载和使用。

连接字符串通常指向 .dbf 文件所在的 PATH，然后您的查询可以直接引用表名（无需显式 .dbf 后缀）。

关于使用 OleDB、Visual Foxpro、ConnectionStrings 和创建（参数化）查询还有很多其他答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T20:00:28.757

基本上，**Xbase** *数据库*是三种不同类型文件的集合：

`xxx.dbf`数据文件

`xxx.dbt`备忘录文件（即包含全文字段的单独文件）

`xxx.ndx` 指向相关 xxx.dbf 中某个字段的索引文件

与大多数其他数据库不同，此集合不会组合成单个实体（数据库）名称。

`xxx.DBF`并且 `xxx.dbf`与 xxx 是表的名称相同。

# android - Cocos2d android中的动画精灵

> ID：14603821
> 
> 赞同：4
> 
> 时间：2013-01-30T12:17:38.497
> 
> 标签：android, sprite, cocos2d-android

我想使用 android`sprite`为**cocos2d中的移动制作动画，请帮助，这是我的代码：**

```
public void setMoveAnimation(CCSprite target) {
    //CCSprite target = CCSprite.sprite("Target.png");
    CCAnimation OpenAnim = CCAnimation.animation("", 0.1f);

    for (int i = 1; i <= 2; i++) {
        OpenAnim.addFrame(CCSpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("target.0" + i + ".png"));

        CCAction MoveAction = CCAnimate.action(1, OpenAnim, false);
        target.runAction(MoveAction);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-04T16:41:33.163

*你可以这样做。这对我有用。恶魔1.png,devil2.png 像这样直到devil4.png*

```
CCAnimation animation = CCAnimation.animation("dance", 0.2f);
    for (int i = 1; i < 5; i++) {
        animation.addFrame(CCFormatter.format(devil%d.png, i));
    }

    CCIntervalAction action = CCAnimate.action(animation);
    target.runAction(CCRepeat.action(action, 9)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T10:45:34.367

你可以这样做：

```
public void openScrPpr(float duration, CCSprite player) {
    CCAnimation scrPprAnim = CCAnimation.animation("", 2 / 20f);
    CGSize size = CCDirector.sharedDirector().displaySize();
    CCMoveTo moveTo = CCMoveTo.action(1,
            CGPoint.ccp(size.getWidth(), (size.getHeight() - 40)));

    for (int i = 1; i <= 7; i++) {
        scrPprAnim.addFrame(CCSpriteFrameCache.sharedSpriteFrameCache()
                .spriteFrameByName(i + ".png"));

        if (i == 7) {
            for (int j = 7; j >= 1; j--) {
                scrPprAnim.addFrame(CCSpriteFrameCache
                        .sharedSpriteFrameCache().spriteFrameByName(j + ".png"));
            }
        }
    }

    CCIntervalAction scrPprAction = CCAnimate.action(duration, scrPprAnim, false);
    CCRepeatForever forever = CCRepeatForever.action(scrPprAction);
    CCRepeatForever forever2 = CCRepeatForever.action(moveTo);
    player.runAction(forever);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-17T11:53:13.320

Vaishali 我正在使用这个：

```
 ArrayList<CCSpriteFrame> jumpForwardAnimation=jumpForwardDown();
                 CCAnimation crocodileEatFrogJumpsUpAnimation = CCAnimation.animation("throw", 0.14f, jumpForwardAnimation);

                 COUNTdOWNaCTION=CCAnimate.action(crocodileEatFrogJumpsUpAnimation, false);

    CCBezierConfig bezier = new CCBezierConfig();   

                 bezier.controlPoint_1=CGPoint.ccp(frog.getPosition().x+frog.getContentSize().width*0.5f,frog.getPosition().y+frog.getContentSize().height*0.6f);
                 bezier.controlPoint_2=CGPoint.ccp(frog.getPosition().x+frog.getContentSize().width*0.5f,frog.getPosition().y+frog.getContentSize().height);
                 bezier.endPosition=location;

                 CCBezierTo  action = CCBezierTo.action(0.5f, bezier);
                 CCFiniteTimeAction action2=CCSpawn.actions(COUNTdOWNaCTION,action );

                 CCFiniteTimeAction actionMoveDone = CCCallFunc.action(this, "frogMoveDone");
                 CCAction COUNTdOWNaCTION1=CCSequence.actions(action2, actionMoveDone);
                 frog.runAction(COUNTdOWNaCTION1);

public void frogMoveDone(){

        frog.setPosition(point);
        } 
```

但是我的青蛙首先用贝泽路径动画到下一个位置，然后返回到之前的位置，然后它改变了它的位置。

你能告诉我在这里做错了什么吗？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-07-17T09:22:02.937

我有一个使用以下代码在屏幕上显示动画的对象：

```
 CCSpriteFrameCache.sharedSpriteFrameCache().addSpriteFrames("ninjastar.plist");
 CCSpriteSheet projectileSheet = CCSpriteSheet.spriteSheet("ninjastar.png");
 addChild(projectileSheet);
 ArrayList<CCSpriteFrame> projectileSprites = new ArrayList<CCSpriteFrame>();

 for (int i = 1; i <= 4; i++) 
 {
     projectileSprites.add(CCSpriteFrameCache.spriteFrameByName("ninjastar" + i + ".png"));
 }

  CCAnimation projectileAnimation = CCAnimation.animation("throw", 0.1f, projectileSprites);
  CCSprite projectile = CCSprite.sprite(projectileSprites.get(0));
  CCAction projectileAction = CCRepeatForever.action(CCAnimate.action(projectileAnimation, false));
  projectile.setPosition(CGPoint.ccp(winSize.width + (projectile.getContentSize().width / 2.0f), actualY));
  actionMove = CCMoveTo.action(actualDuration, CGPoint.ccp(-      projectile.getContentSize().width / 2.0f + 320, actualY));
  projectileSheet.addChild(projectile);
  projectile.setTag(1);
  projectiles.add(projectile);

  CCCallFuncN actionMoveDone = CCCallFuncN.action(this, "spriteMoveFinished");
  CCSequence actions = CCSequence.actions(actionMove, actionMoveDone);
  projectile.runAction(actions);
  projectile.runAction(projectileAction); 
```

我正在使用“spriteMoveFinished”来删除精灵，一旦它完成穿过屏幕：

```
 public void spriteMoveFinished(Object sender) 
  {
    CCSprite sprite = (CCSprite)sender;
    projectiles.remove(sprite);
    sprite.stopAllActions();
    sprite.removeFromParentAndCleanup(true);
  } 
```

# javascript - 骨干逆视图

> ID：14603824
> 
> 赞同：4
> 
> 时间：2013-01-30T12:17:45.723
> 
> 标签：javascript, backbone.js, backbone-views

骨干新手在这里。我想开始在 Web 应用程序（后端是 Ruby on Rails）上使用骨干网，到目前为止，它的客户端功能非常少（一些用于执行 slideToggles 的 jquery 和几个 ajax 调用）。

我面临的问题之一是 Backbone 似乎是为了让你加载你的 javascript，然后让它向服务器请求数据（通常是 JSON），然后它呈现视图。在我的情况下这是不可接受的。我想获取源自服务器的 html，将其呈现给用户，然后使用该 html 填充我的模型（之后，我对从服务器请求 JSON 内容的模型很好）。

我猜我需要的是某种“逆视图”。给出这个 html 的东西：

```
<ul class="people">
  <li><span class="name">Peter</span></li>
  <li><span class="name">John</span></li>
</ul> 
```

一个 People Collection 和一个带有 name 属性的 Person 模型，可以从中解析出 Peter 和 John（可能使用 View）。

这是存在的东西吗？我是以错误的方式处理整个事情吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T14:06:19.500

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T15:56:14.313

我最终只是在每个视图的元素上添加了我需要的每个模型的 json。

换句话说：

```
<ul class="people" data-collection="people">
  <li data-model="person" data-attributes='{"name":"Peter"}'>Peter</li>
  <li data-model="person" data-attributes='{"name":"John"}'>John</li>
</ul> 
```

在我的例子中，每个属性上的 JSON 片段在服务器上生成是微不足道的。

我更喜欢在 html 中包含嵌入的 json 而不是在开始时将它返回到一个大数组中的原因是，这样我可以很容易地将模型附加到他们的视图中。

其余的从那里流出。

我使用 jquery 来检测`data-collections`并创建与 DOM 元素关联的相应视图。然后我解析模型，最后我开始在集合视图上监听事件。

```
$(function(){
  $('[data-collection="people"]').each(function() {
    var view = new PeopleView({el: this});
    view.parse();
    view.listen();
  });
}); 
```

和方法如下所示`parse`：`listen`

```
MyApp.PeopleView = Backbone.View.extend({
  collection: MyApp.Collections.People,
  ...
  parse: function() {
    var people = this.$("[data-model='person']").map(function(i,el){
      return new MyApp.Models.Person($(el).data('attributes'));
    };
    this.collection.reset(comments, {silent: true});
  },
  listen: function() {
    this.listenTo(this.collection, 'add',   this.showNewPerson, this);
    this.listenTo(this.collection, 'reset', this.renderEveryone, this);
    this.delegateEvents();
  }
  ...
}); 
```

在这种特殊情况下，我不需要为列表中的每个人创建特定的 Backbone 视图。但如果我需要，我可以在`parse`方法中这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T13:35:07.327

您可以使用服务器或客户端代码预渲染 HTML。尽管我不确定为什么在您的情况下必须通过 AJAX 加载 HTML。无论如何，Backbone`Model`或`Collection`在您对其进行获取之前并不真正了解其定义。

底线是，您可以预加载预定义的`View`并使用 Backbone 进行更改。在您的情况下，如果您希望 Backbone 对您的 进行操作`$('.people')`，您只需在加载新记录之前追加新行或清空元素即可。

至于`Models`从渲染中解析您的实际`View`值，不确定为什么要这样做，但您可以使用`jQuery`并选择`html()`or遍历它`text()`。

如果您可以执行`AJAX`请求，我不明白为什么发送实际`Model`会是一个问题。

```
var json = { people: [{name: 'Peter' },{name: 'John' }]}; 
```

Backbone 在使用和主要结构基础方面没有任何限制。希望这可以解决您的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T15:02:24.210

我正在使用[Backbone LayoutManager](https://github.com/tbranyen/backbone.layoutmanager/wiki)来执行此操作。您可以定义一个 fetch() 函数，可以远程获取视图（即您的服务器）。例如，它们然后被缓存在 Javascript 模板对象中。

一些取自[Backbone BoilerPlate](https://github.com/tbranyen/backbone-boilerplate)的代码：

```
var app = { root: "/" };
var JST = window.JST = window.JST || {};

// Configure LayoutManager
Backbone.LayoutManager.configure({

  ....

  fetch: function(path) {
    var done;
    path = path + ".html";

    if (!JST[path]) {
      done = this.async();
      $.ajax({ url: app.root + path }).then(function(contents) {
        JST[path] = _.template(contents);
        done(JST[path]);
      });
    }
    return JST[path];

  }
}); 
```

# php - 声明全局变量 php (wordpress)

> ID：14603826
> 
> 赞同：1
> 
> 时间：2013-01-30T12:17:49.560
> 
> 标签：php, wordpress, wordpress-theming

在 wordpress`functions.php`文件中，我有以下变量：

```
$MediSHOP_settings_db_theme = (get_option("MediSHOP_settings")); 
```

但是当我尝试在里面回显它时，`footer.php`什么都没有显示：

```
<?php echo $MediSHOP_settings_db_theme['shoptel']; ?> 
```

除非我在 footer.php 中将其声明为全局

有没有办法让这个变量持久化，所以我不必在 header.php、footer.php、index.php 和其他模板文件中声明这个变量为全局变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:33:02.577

您可以将这样的重要内容包装在`class`. 所以尽快声明这个变量，也许是在`init`钩子上：

```
$this->MediSHOP_settings_db_theme = (get_option("MediSHOP_settings")); 
```

将在 footer.php 中轻松获得

```
<?php $this->MediSHOP_settings_db_theme: ?> 
```

推荐 tut：[http ://wp.tutsplus.com/tutorials/a-beginners-oop-class-framework/](http://wp.tutsplus.com/tutorials/a-beginners-oop-class-framework/)

# sql - SQL Server 2008 - 内部联接

> ID：14603827
> 
> 赞同：2
> 
> 时间：2013-01-30T12:17:51.400
> 
> 标签：sql, sql-server-2008, inner-join

早上好，

我使用 SQL Server 2008，我有 2 个表加入 App#

T2 的结构是，它具有以下值：

```
App #   code
---------------    
123     8
123     16
123     32
124     16
125     8
125     16 
```

我只需要打印代码为 16 的应用程序。我的代码如下：

```
Select appID, Code from T1
Inner join T2 on
T1.AppID = T2.AppID and Code = 16 
```

但是我得到的结果包括 app# 123、124 和 125，但我只需要显示 124（我只需要提取代码为 16 而不是其他内容的应用程序。）

谢谢你的帮助乔

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T12:26:36.107

```
SELECT T1.appID
FROM T1
  JOIN T2
    ON  T2.AppID = T1.AppID 
    AND T2.Code = 16
WHERE NOT EXISTS
      ( SELECT *
        FROM T2 
        WHERE T2.AppID = T1.AppID 
          AND T2.Code <> 16
      ) ; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-30T12:31:59.550

这也应该有效；这是[Sql-Demo](http://sqlfiddle.com/#!3/010c4/5)

```
select T2.appId,code
from T2 join T1 on T2.appId = T1.appId
where code = 16 and 
    T2.appId not in (select appId from T2 where code != 16) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T12:20:00.997

请尝试条件在哪里

```
select appId, code from (
    select T2.appId, code, count(*) over (partition by T2.appId) CNT
    from T2 join T1 on T2.appId = T1.appId
    where code=16 
)x where CNT=1 
```

或者同样可以使用有

```
select 
    T2.appId, code
from T2 join T1 on T2.appId = T1.appId
where code=16 
group by T2.appId, code
having count(T2.appID)=1 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-30T12:29:10.340

选择语句的**条件**不是**AND**

**试试这个**

```
Select appID, Code from T1
Inner join T2 on
T1.AppID = T2.AppID
where t1.code=16 
```

# java - 我正在尝试在 Java 1.4.2 中为一个项目创建一个学生组织者，但我似乎被难住了

> ID：14603829
> 
> 赞同：0
> 
> 时间：2013-01-30T12:18:00.673
> 
> 标签：java, syntax

我为这个项目回收了一些旧代码，但我仔细检查了所有整数和字符串是否为这个项目重新定义。你们能告诉我我做错了什么吗？我不太擅长编程。我得到的错误包括“排序”、“显示”和“打印”不能应用于（`java.lang.String[],int[],java.io,BufferedReader`）。任何帮助将不胜感激。

编辑：这是堆栈跟踪

```
C:\java\bin>javac CourseOrganizer.java
CourseOrganizer.java:23: getdata(int[],java.lang.String[],int) in CourseOrganize
r cannot be applied to (int[],java.lang.String[])
        getdata(Grade,Course);
        ^
CourseOrganizer.java:28: cannot resolve symbol
symbol  : method display (int[],java.lang.String[],java.io.BufferedReader)
location: class CourseOrganizer
        display(Grade,Course,in);
        ^
CourseOrganizer.java:34: sort(int[],java.lang.String[],int,java.io.BufferedReade
r) in CourseOrganizer cannot be applied to (int[],java.lang.String[],java.io.Buf
feredReader)
        sorttype=sort(Grade,Course,in);
                 ^
CourseOrganizer.java:87: sortstring(int[],java.lang.String[],int) in CourseOrgan
izer cannot be applied to (int[],java.lang.String[])
     {sortstring(Grade,Course);
      ^
CourseOrganizer.java:88: print(int[],java.lang.String[],int,java.io.BufferedRead
er) in CourseOrganizer cannot be applied to (int[],java.lang.String[],java.io.Bu
fferedReader)
      print(Grade,Course,kb);
      ^
CourseOrganizer.java:92: sortint(int[],java.lang.String[],int) in CourseOrganize
r cannot be applied to (int[],java.lang.String[])
     {sortint(Grade,Course);
      ^
CourseOrganizer.java:93: print(int[],java.lang.String[],int,java.io.BufferedRead
er) in CourseOrganizer cannot be applied to (int[],java.lang.String[],java.io.Bu
fferedReader)
      print(Grade,Course,kb);
      ^
7 errors 
```

* * *

```
import java.io.*;
import java.util.StringTokenizer;
class CourseOrganizer {
public static void main(String args[]) throws Exception
{
InputStreamReader kb = new InputStreamReader(System.in);
BufferedReader in = new BufferedReader(kb);   
String buffer;
char choice;
boolean fileread=false;
int quantity=8;
int[]Grade=new int[quantity];
String[]Course=new String[quantity];
String sorttype="";
do
//Setup Menu
{choice=menu(in);
if(choice=='E')
   {if(fileread)
        System.out.println("Data already has been entered");
     else
        {fileread=true;
        getdata(Grade,Course);
         }
    }
else if(choice=='D')
    {if(fileread)
        display(Grade,Course,in);
     else
        System.out.println("Must enter data before it is displayed");
         }
else if(choice=='S')
    {if(fileread)
        sorttype=sort(Grade,Course,in);
     else
        System.out.println("Must enter data before it is sorted");
    }

}while(choice!='X');
}
//Sort Data
public static void sortint(int Grade[],String Course[],int quantity)
{int i,j;
for(i=0;i<quantity-1;i++)
    for(j=i+1;j<quantity;j++)
         if(Grade[i]>Grade[j])
              {swap(Grade,i,j);
                swap(Course,i,j);

                }
}
public static void sortstring(int Grade[],String Course[],int quantity)
{int i,j;
for(i=0;i<quantity-1;i++)
    for(j=i+1;j<quantity;j++)
         if(Course[i].compareToIgnoreCase(Course[j])>0)
              {swap(Grade,i,j);
                swap(Course,i,j);

                }
}
public static void swap(int[] a,int i,int j)
{int t;
t=a[i];
a[i]=a[j];
a[j]=t;
}
public static void swap(String[] a,int i,int j)
{String t;
t=a[i];
a[i]=a[j];
a[j]=t;
}

public static String sort(int Grade[],String Course[],int quantity,BufferedReader kb)throws Exception
{String buffer;
do
{
//Allow user to sort the criminals
System.out.println("What do you want to sort by?");
System.out.println("Course");
System.out.println("Grade");
System.out.print("Enter>>");
buffer=kb.readLine();
if(buffer.equalsIgnoreCase("Course"))
     {sortstring(Course,Grade);
      print(Course,Grade,kb);
      return buffer;
      }
else if(buffer.equalsIgnoreCase("Grade"))
     {sortint(Course,Grade);
      print(Course,Grade,kb);
      return buffer;
      }

System.out.println("Invalid entry");
}while(true);

}
public static String gettype(BufferedReader kb)throws Exception
{String buffer;
do
{
//Allow users to search for course
System.out.println("What course would you like to see?");
System.out.print("Enter>>");
buffer=kb.readLine();
if(buffer.equalsIgnoreCase("Calculus")||buffer.equalsIgnoreCase("Advanced Functions")||buffer.equalsIgnoreCase("Computer Science")||buffer.equalsIgnoreCase("Physics")||buffer.equalsIgnoreCase("Biology")||buffer.equalsIgnoreCase("Chemistry")||buffer.equalsIgnoreCase("History")||buffer.equalsIgnoreCase("English")||buffer.equalsIgnoreCase("Economics")||buffer.equalsIgnoreCase("Data Management"))
     return buffer;
System.out.println("Invalid entry");
}while(true);
}
public static void print(int Grade[],String Course[],int quantity,BufferedReader kb)throws Exception
{System.out.println("Sorted data");
System.out.println("Grade\tCourse");
for(int i=0;i<quantity;i++)
        System.out.println(Grade[i]+"\t"+Course[i]);
}
//Load criminal text file
public static void getdata(int Grade[],String Course[],int quantity)throws Exception
{FileReader file = new FileReader("courses.txt");
BufferedReader input = new BufferedReader(file);
int i;
String buffer;
for( i=0;i<quantity;i++)
  {buffer=input.readLine();
   StringTokenizer st = new StringTokenizer(buffer, ",");
   Course[i]=st.nextToken();
   Grade[i]=Integer.parseInt((st.nextToken()).trim());
    }
input.close();
}

public static char menu(BufferedReader kb)throws Exception
{String buffer;
char input;
do
{
System.out.println("\nWhat would you like to do?");
System.out.println("E-Enter course data");
System.out.println("D-Display course data");
System.out.println("X-Exit program");
System.out.println("S-Sort list");
System.out.print("Enter E, D, X, S>>");
buffer=kb.readLine();
input=(buffer.toUpperCase()).charAt(0);
if(input=='E'||input=='D'||input=='X'||input=='S')
     return input;
System.out.println("Invalid entry");
}while(true); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T12:23:29.790

> 'sort', [...] 不能应用于 (java.lang.String[],int[],java.io,BufferedReader)

这很合理，因为`sort`有另一个签名：

```
int Grade[], String Course[], int quantity, BufferedReader kb) 
```

如果你注意到，`sort`期望 a`int[]`是它的第一个参数，而 a`String[]`是它的第二个参数。所以，去任何你调用它的地方，改变你传递的参数的顺序。这可能是其他方法也显示此错误的原因。

# php - 如何使用 Mailgun 解析电子邮件？

> ID：14603836
> 
> 赞同：0
> 
> 时间：2013-01-30T12:18:16.803
> 
> 标签：php, parsing, email, mailgun

通过参考[这篇](http://hasin.me/2012/11/16/parsing-inbound-emails-with-mailgun-how-to/)文章，我试图解析电子邮件，但我没有这样做。

我在 mailgun 上创建了免费帐户，创建了域、邮箱等。我从我的个人电子邮件 ID 发送了一封邮件说，`mgtest1@my_domain_name.mailgun.com`

我已将帐户配置为将所有邮件转发到`"http://project_name/controller_name/action_name" (in case of zend)` OR

```
"http://localhost/project_name/file_name.php" (for plain PHP) 
```

据说我可以使用 访问邮件`$_POST (for PHP)`，但**我得到的是空白数组。**

我哪里错了？

我尝试使用 Zend 和普通 PHP。我只是使用 print_r($_POST)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T20:01:25.130

print_r() 用于打印到屏幕。由于 web 挂钩处理程序正在发布到您的脚本，处理程序看到了发布的数据，但您没有。;)

您应该通过序列化数组并将其存储在文件中来存储数据。

```
<?PHP
$data = serialize($_POST);
$fp = fopen('data.txt', 'w');
fwrite($fp, $data);
fclose($fp);
?> 
```

或直接访问数据：

```
<?PHP
$data = $_POST['recipient'];
$fp = fopen('data.txt', 'w');
fwrite($fp, $data);
fclose($fp);
?> 
```

希望有帮助！如果您仍有问题，请与我们聊天，或向我们发送票证。

谢谢！
Travis S
Mailgun 支持

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-16T08:52:13.393

Mailgun 无法将消息发布到本地主机。您需要将项目迁移到在线服务器。现在，您提供的路由是您的本地主机服务器，mailgun 无法访问它。

# mobile - 我的网站在移动版中显示不同的内容

> ID：14603844
> 
> 赞同：1
> 
> 时间：2013-01-30T12:18:40.180
> 
> 标签：mobile, dotnetnuke

我用 dotnetnuke 创建了一个具有响应式皮肤的网站。在“正常”版本中，它可以正常工作，但是有一个页面没有像在移动版本中那样显示其内容。

这是有问题的页面，[http://www.ikuben.no/Bedriftene.aspx](http://www.ikuben.no/Bedriftene.aspx)

当我在我的电脑上浏览它时，这就是我得到的![在此处输入图像描述](../Images/e151404d1014d36befbe1b9deb893d28.png)

当我在模拟器中浏览它时，这就是我得到的![在此处输入图像描述](../Images/8c7ef4522096239e24b645244efd3bbc.png)

这是用于进入 Html Pro 模块的每个图像/文本的 html/css，

```
<div class="bottomborder">
<div class="marginright">
<img alt="" width="139" height="139" src="/portals/85/Bedrifter/Logoer/AkerMidsund_hvit.png" class="Images" />
</div>
<div class="overflow">
<a class="LinksMenu LeftMenu HoverLinkH1" href="http://www.akermidsund.no">Aker Midsund</a>
<br />
<br />
<p> Aker Midsund er verdensledende innen v&aring;rt fagomr&aring;de! Gjennom 40 &aring;r har vi tilegnet oss ekspertise innen mekanisk design og fabrikasjon av trykktanker o.l.  </p>
<br />
<a class="LinksMenu LeftMenu HoverLink" href="http://www.akermidsund.no">www.akermidsund.no</a><br />
</div>
</div>

.bottomborder {
    border-bottom:#dfdede solid 1px;
    margin-top: 30px;
    padding-bottom: 10px;
    padding-left: 10px;
    width: auto;
    height:auto;
}

.marginright
{
    margin-right: 30px;
    float: left;
}

.overflow
{
    overflow: hidden;
}

.LinksMenu.LeftMenu.HoverLinkH1, A.LinksMenu.LeftMenu.HoverLinkH1:link, A.LinksMenu.LeftMenu.HoverLinkH1:visited, A.LinksMenu.LeftMenu.HoverLinkH1:active 
{
    padding-left: 0px;
    color: #472676;
    font-size: 22px;
    border-bottom: 0px;
} 
```

文字应该保留在移动版本中的图像下方。但是我怎样才能让图像留在左边呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:53:07.900

这就是全部。现在它正在工作。

```
@media handheld, only screen and (max-width:450px) {
.marginright{float:left;}

} 
```

# c# - 正则表达式从字符串中获取值

> ID：14603848
> 
> 赞同：0
> 
> 时间：2013-01-30T12:19:01.367
> 
> 标签：c#, regex

我试图从字符串中获取价值`1-1:0.0.0(123123)` 这是代码

```
string str = "\r\n1-1:0.0.0(123123)\r\n";
string patt = @"1-1:0.0.0(\(.*?)\)\s";
Match match = Regex.Match(str, patt,RegexOptions.IgnoreCase);
string v = match.Groups[1].Value; 
```

问题是我没有得到明确的价值=`"(123123"`
有人可以解释为什么开头有圆括号吗？：/

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T12:23:29.230

您的开头圆括号匹配`\(`位于您的捕获组的*开头*`(`。

替换`(\(`为`\((`。

也替换`0.0.0`为`0\.0\.0`良好的措施。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T12:21:51.260

括号的转义是不正确的。

将您的模式更改为以下内容（请注意，反斜杠位于第一个开头的前面`(`）：

```
@"1-1:0.0.0\((.*?)\)\s"; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T12:21:51.570

您的转义字符`(\(`放错了位置：

请尝试以下

```
string str = "\r\n1-1:0.0.0(123123)\r\n";
string patt = @"1-1:0.0.0\((.*?)\)\s";
Match match = Regex.Match(str, patt, RegexOptions.IgnoreCase);
string v = match.Groups[1].Value; 
```

这将打印

```
123123 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T12:22:17.030

您的捕获组是`(\(.*?)`，即创建捕获组的一对括号，其内容为`\(.*?`- 匹配文字左括号和任何字符的非贪婪序列。

另请注意，`.`您的模式中的字符不匹配文字点，而是任何字符，我指出这一点，因为目标字符串似乎包含点。

# dns - gTLD 注册期？

> ID：14603852
> 
> 赞同：-3
> 
> 时间：2013-01-30T12:19:11.827
> 
> 标签：dns, tld

我只是在阅读 gTLD，似乎该申请已于 2012 年 6 月关闭。在 ICANN 网站上（这是 UX 的噩梦），没有迹象表明申请程序是否/何时重新开放，有人知道吗?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:43:45.957

讽刺！- ICANN 终于在我发布此问题后不到 5 分钟回复了我的电子邮件。仅供参考，以下是他们的回复：

```
Thank you for your email and interest in the New gTLD Program.

You are correct, the application window for New gTLDs has closed.

No dates have been set for the next application round. Please monitor our website at newgtlds.icann.org for updates and announcements regarding the next application round.

You can also participate in the Program through Program processes such as Application Comments. Please visit our website at newgtlds.icann.org and http://www.icann.org/en/about/participate/how to learn about how to participate in the New gTLD Program and ICANN's processes, respectively.

Best regards,

New gTLD Customer Service` 
```

# iphone - 自动滚动 UIScrollView 以适应原生 iOS Mail.app 中的内容

> ID：14603855
> 
> 赞同：1
> 
> 时间：2013-01-30T12:19:14.947
> 
> 标签：iphone, ios, objective-c, cocoa-touch, uiscrollview

原生 iOS`Mail.app`在创建新字母时有一个很棒的功能。整个屏幕是a `UIScrollView`，写信体的地方是a `UITextView`，滚动被禁用。

![在此处输入图像描述](../Images/e4647ff6311c6bf88ad0f10c92223f52.png)

当您输入此高度`TextView`以及`UIScrollView`动态更改的高度时，`UIScrollView`向下滚动会在键盘上方留下一些像素以用于新文本。

我知道这个过程必须在`textViewDidChange`方法中完成，但是在尝试做同样的事情时，我的代码出现了问题 -`UITextField`有时可能会在`UIScrollView`. 这是我尝试执行此操作的方法：

```
-(void)textViewDidChange:(UITextView *)textView {

    CGRect frame = emailTextView.frame;
    frame.size.height = emailTextView.contentSize.height;
    emailTextView.frame = frame;
    mainScrollView.contentSize = CGSizeMake(320, emailTextView.contentSize.height + rightKeyboardSize.height + 20);

} 
```

关于这里出了什么问题的任何想法？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T12:47:05.623

好的，我实现了自己的示例项目来找到答案。你应该替换你的名字。

首先，我将添加观察者来检测键盘何时显示或隐藏：

```
- (void)addKeyboardObserver
{
    // This could be in an init method.
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardDidShow:) name:UIKeyboardDidShowNotification object:nil];

    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardDidHide:) name:UIKeyboardDidHideNotification object:nil];
}

- (void)keyboardDidShow:(NSNotification*)notification
{
    NSDictionary* keyboardInfo = [notification userInfo];
    NSValue* keyboardFrameBegin = [keyboardInfo valueForKey:UIKeyboardFrameBeginUserInfoKey];
    _keyboardFrameBeginRect = [keyboardFrameBegin CGRectValue];
    UIScrollView *_scrollView = (UIScrollView*)self.view;
    _scrollView.frame = CGRectMake(_scrollView.frame.origin.x,
                                   _scrollView.frame.origin.y,
                                   _scrollView.frame.size.width,
                                   _scrollView.frame.size.height - _keyboardFrameBeginRect.size.height);
}

- (void)keyboardDidHide:(NSNotification*)notification
{
    UIScrollView *_scrollView = (UIScrollView*)self.view;
    _scrollView.frame = CGRectMake(_scrollView.frame.origin.x,
                                   _scrollView.frame.origin.y,
                                   _scrollView.frame.size.width,
                                   _scrollView.frame.size.height +
                               _keyboardFrameBeginRect.size.height);
} 
```

然后，将 textViewDidChange: 方法更改为：

```
- (void)textViewDidChange:(UITextView *)textView
{
    UIScrollView *_scrollView = (UIScrollView*)self.view;
    _textView.frame = CGRectMake(_textView.frame.origin.x,
                                 _textView.frame.origin.y,
                                 _textView.contentSize.width,
                                 _textView.contentSize.height);
    _scrollView.contentSize = _textView.frame.size;

    if (_scrollView.frame.size.height < _textView.frame.size.height) {
        CGPoint bottomOffset = CGPointMake(0,_textView.frame.size.height-_keyboardFrameBeginRect.size.height);
        [_scrollView setContentOffset:bottomOffset animated:NO];
    }
} 
```

祝你好运！

# php - 检查数组中的空值

> ID：14603859
> 
> 赞同：1
> 
> 时间：2013-01-30T12:19:38.047
> 
> 标签：php, cakephp-2.3

我有下一个数组（一个 CakePHP 数组）：

```
Array
(
    [id] => 1
    [username] => hank
    [password] => c9f3fa9ff1cc03389b960f877e9c909e6485ag6h
    [email] => user_email@hotmail.com
    [country] => 
    [city] =>
    [phone] => 666666666
    [other] =>
) 
```

我想知道某些字段是 NULL 还是空的（比如`country`or `city`）。我试过这个：

在我的控制器中：

```
...
$user = $this->User->findById($id);
$this->set('user', $user['User']); # $user['User'] returns the array seen before. 
```

在我看来

```
<?php $fields = array('country', 'city', 'phone'); ?>
<?php if (!in_array($fields, $user, true)): ?>
   <p>Bad, some fields of $fields are empty</p>
<?php else: ?>
  <p>Ok</p
<?php endif;?> 
```

但这不起作用。我需要知道其中的任何字段`$fields`是否为 NULL 或空。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T12:31:07.340

在你的情况下，你想要这样的东西：

```
$fields = array('country', 'city', 'phone');
$check = array_filter(array_intersect_key($user, array_flip($fields)));

if (count($check) !== count($fields)) {
    // Bad; some fields are empty
} else {
    // OK
} 
```

您还可以传递自定义过滤器功能；默认情况下`array_filter`删除任何等于`false`.

**编辑**：[这是一个例子](http://codepad.org/GmvO94SI)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T12:31:52.340

似乎您以错误的方式使用 in_array 。

我建议遍历 $fields 并检查 $user 中的值：

```
<?php $bad_fields = false; ?>
<?php $fields = array('country', 'city', 'phone'); ?>
<?php foreach($fields as $field): ?>
<?php if !$user[$field]: ?>
<?php $bad_fields = true; ?>
<?php endif; ?>
<?php endforeach; ?>
<?php if $bad_fields: ?>
    <p>Bad, some fields of $fields are empty</p>
<?php else: ?>
<p>Ok</p>
<?php endif;?> 
```

# knockout.js - 防止计算收集依赖项

> ID：14603860
> 
> 赞同：5
> 
> 时间：2013-01-30T12:19:39.743
> 
> 标签：knockout.js, computed-observable

有没有好办法大致实现如下概念：

```
var computed = ko.computed(function() {
    readSomeObservables(); //<-- if these change, notify computed
    ko.stopCollectingDependencies();
    readSomeMoreObservables(); //<-- if these change, do not notify computed
    ko.resumeCollectingDependencies();
}); 
```

我知道`peek()`，但在这种情况下，计算调用的是从外部模块提供的方法，并且如果这些方法碰巧涉及可观察对象，则设计要求它纯粹是偶然的。

我有一个解决方案，大致是这样做的：

```
window.setTimeout(function() {
    readSomeMoreObservables();
}, 0); 
```

但由于显而易见的原因，这并不理想，并且在某些情况下会导致不良行为。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-08-04T03:25:39.257

对于以后的访客...

3.3 版公开了 ko.ignoreDependencies(callback, callbackTarget, callbackArgs)。这是绑定处理程序处理在内部使用的方法，以避免从 init 函数调用创建依赖关系。

见[http://www.knockmeout.net/2015/02/knockout-3-3-released.html](http://www.knockmeout.net/2015/02/knockout-3-3-released.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-30T14:30:53.510

怎么组合。为您需要阅读但不想订阅的可订阅内容创建一个临时计算。更改它们会更新计算的温度，但这可能是一个便宜的操作。您的实际计算读取 tempComputed 并 peek 访问当前缓存的值。

```
// this one is updated 
// if any of the subscribeables used in readSomeMoreObservables changes
// but that is hopefully cheap
var tempComputed = ko.computed(function() {
    readSomeMoreObservables();
});

var computed = ko.computed(function() {
    readSomeObservables(); //<-- if these change, notify computed

    // do not update on readSomeMoreObservables
    tempComputed.peek(); 
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-13T04:36:53.083

我有点晚了，但这是我在这种情况下使用的解决方案：

```
var computed = ko.computed(function() {
    var a = readSomeObservables(); //<-- if these change, notify computed
    var b;

    // capture any dependencies from readSomeMoreObservables
    // in a temporary computed, then immediately dispose
    // of it to release those captured dependencies
    ko.computed(function() { b = readSomeMoreObservables(); }).dispose();

    return a + b; // or whatever
}); 
```

这会创建一个临时计算对象，我们在其中调用`readSomeMoreObservables`. 临时计算设置了一个新的依赖捕获帧，因此所有读取的 observables 都被捕获到我们的临时计算中。然后我们立即处理临时计算以释放它捕获的任何依赖项。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T13:31:39.277

Knockout 的依赖检测有一个`ko.dependencyDetection.ignore`功能。如果我理解正确，您可以使用它来读取可订阅的值，而无需创建对它们的依赖。

至少运行以下测试：

```
it('Should not subscribe to subscribeables called by ignore', function() {

    var observableInner = ko.observable('initial'),
        observableOuter = ko.observable(),
        called = 0,
        computedInner = ko.computed(function() { return observableInner(); }),
        computedOuter = ko.computed(function() { 
            called += 1;
            // read dependend
            observableOuter();

            // read ignored
            var result = ko.dependencyDetection.ignore(computedInner, null)
            expect(result).toEqual('initial');

            return true;
        });

    expect(called).toEqual(1);

    // update the one we are depending on
    observableOuter(1);
    expect(called).toEqual(2);        

    // update the inner one which should trigger an update to computedInner but not to computedOuter
    observableInner('ignore');
    expect(called).toEqual(2);
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T13:08:11.507

如果您对这些可观察对象的新值不感兴趣，为什么不将可观察对象的读数移到计算范围之外呢？

[http://jsfiddle.net/uUXWv/2](http://jsfiddle.net/uUXWv/2)

```
var observableTwoInitialState = this.observableTwo(); 

this.computed = ko.computed(function() {
    return this.observableOne() + observableTwoInitialState;
}, this); 
```

# c++ - 链表、向量和指针的问题

> ID：14603864
> 
> 赞同：0
> 
> 时间：2013-01-30T12:19:56.707
> 
> 标签：c++, class, pointers, vector

好的，这是我的问题：

*   我已经实现了一个`Move class`, 变量`Move *subMove`指向一个“subMove”
*   我有一个列表（我正在循环使用`vector`的s ）`Move``vector<Move>::iterator`
*   我有一个**全局 Move 对象**（假设我们的链表的“根”），我们的函数最初是用它调用的
*   我正在尝试将当前移动（从循环）分配给我当前根的*subMove 字段*。

这就是问题出现的方式......

**我的代码（大致）如下所示：**

```
int Game::doSth(Move & pv)
{
    vector<Move> moves;
    this->possibleMoves(moves);
    for (std::vector<Move>::iterator move = moves.begin(); move!=moves.end(); ++move)
    {
        // Do sth
        int subResult = this->doSth(*move);
        if (someConditionIsTrue)
        {
            // yep, we want to store THIS move as a submove

            // This works - without memory errors - 
            // but still something goes weird, so I'd prefer creating a new object
            pv.subMove = &(*move);

            // Also tried something along the lines of `pv.subMove = new Move(*move)`
            // - yes there is an appropriate copy constructor - 
            // but this leads to a `segmentation fault` error
        }
    }

    // return something;
} 
```

有任何想法吗？

# c# - 如何强制调用接口实现的方法？

> ID：14603872
> 
> 赞同：0
> 
> 时间：2013-01-30T12:20:32.427
> 
> 标签：c#

考虑： EqualityComparer.Default 属性，它在 MSDN 中写道：

> Default 属性检查类型 T 是否实现了 System.IEquatable 接口，如果是，则返回使用该实现的 EqualityComparer。否则，它返回一个使用 T 提供的 Object.Equals 和 Object.GetHashCode 覆盖的 EqualityComparer。

我的理解：因为它会返回 EqualityComparer“对象”，所以它应该调用 T 提供的 Object.Equals 和 Object.GetHashCode 的覆盖（如果它覆盖或 Object.Equals 和 Object.GetHashCode，否则）。它怎么会调用 IEquatable 的实现方法呢？是强行做吗？如果是，如何？如果我错了，请纠正我。

这是 MSDN 链接：http: [//msdn.microsoft.com/en-us/library/ms224763.aspx](http://msdn.microsoft.com/en-us/library/ms224763.aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:43:22.277

首先，在如下的泛型类中，实际上`IEquatable<T>`无论如何都会选择正确的方法 ( )：

```
 private class MyEqualityComparer<T> : IEqualityComparer<T> where T : IEquatable<T>
    {
        public bool Equals(T x, T y)
        {
            return x.Equals(y);
        }
        // Hashcode...
    } 
```

而如果您将 y 转换为`object`，则引用将是`object.Equals`。这只是一个重载方法，因此在编译时解决。

# c - 与 c 的数值积分

> ID：14603874
> 
> 赞同：1
> 
> 时间：2013-01-30T12:20:34.383
> 
> 标签：c, numerical-methods

我必须对文本文件中的一组数据点进行数值积分。

我的数据点看起来像

```
0.5   0.479425539
1     0.841470985
1.5   0.997494987
2     0.909297427
2.5   0.598472144
3     0.141120008
3.5   -0.350783228
4     -0.756802495
4.5   -0.977530118
5     -0.958924275 
```

我的尝试是

```
#include <stdlib.h>
#include <stdio.h>
#include <math.h>
#include <conio.h>

double trapezoidalRule (double size, double *x, double *y)
{
    double sum = 0.0,increment;
    int k;
    for (k=1; k<size; k++)
    {
        increment = 0.5 * (x[k]-x[k-1]) * (y[k]+y[k-1]);
        sum += increment;
    }
    return sum;
    _getch();
}
int main ( int argc, char * argv[])
{
    char*  fileName = argc > 1 ? argv[1] : "C:\\Users\\g\\Desktop\\test.txt";
    FILE*  inputFile = fopen (fileName, "r");
    int  k;
    double size,*x, *y;
    double integral;
    if ( inputFile ==NULL)
    {
        fprintf (stderr, "Open failed for %s\n", fileName);
        exit(666); 
    }
    fscanf (inputFile, "%d", &size);
    printf (" Number of points: %d\n", size);

    x = (double *) calloc (size, sizeof(*x));
    y = (double *) calloc (size, sizeof(*y));

    for (k=0; k< size; k++)
        fscanf (inputFile, "%lg%lg" , x+k, y+k);
    integral = trapezoidalRule (size, x, y);
    printf ("Integral:", "\n", integral);
    printf ("\n");
    //printf ("check: ","\n", x[size-1], log(x[size-1]) );
    _getch();
} 
```

但我没有得到所需的输出......我不知道出了什么问题......它会计算积分值，但它不是......点数也是错误的......它只是取第一个数字，而不是计算点数...请帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T13:28:15.260

我认为你离解决方案并不远。这个公式至少看起来不错。

也许您的代码中最大的错误是您的数据中缺少要读取的点数。因此，您的代码可能将“0.5”读作点数。然后，k 上的循环只适用于 k=0（然后 k=1>0.5），这可能是您只有一个点的原因。为了使它工作，我做了以下更改：

*   在数据文件的开头添加点数。
*   更改大小的类型`int size`
*   打印积分值`printf ("Integral: %lg \n", integral);`

这使它对我有用。

（大编辑，因为它已被重新编为 C 而不是 C++）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T12:22:16.167

您不应该`%d`使用格式说明符来读取双精度值`%lf`。我也不明白为什么`size`是双重的。它似乎只能是一个非负整数，所以可能`unsigned`会在这里做得最好。

# url-rewriting - 网址重写 - 也添加查询字符串

> ID：14603877
> 
> 赞同：1
> 
> 时间：2013-01-30T12:20:49.663
> 
> 标签：url-rewriting

我想重写所有的 URL，比如

```
www.example.com/pages/foo 
```

进入

```
www.example.com/go.php?q=foo 
```

我通过使用规则 belove 做到了，但我也无法通过查询。

```
RewriteRule     ^pages/(.*)$            /go.php?q=$1  [L] 
```

我想重写：

```
www.example.com/pages/foo?bar=baz 
```

进入

```
www.example.com/go.php?q=foo&bar=baz 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T12:36:22.827

找到了！

网址：`/pages/foo?bar=baz`

```
RewriteRule ^pages/(.*) /go.php?q=$1 [QSA,L,R] 
```

变成：`/go.php?q=foo&bar=baz`

正在发生的事情是：

*   捕获斜线后的所有内容并将其存储在 $1 中
*   在 /go.php?q= 请求资源并添加我们捕获的值
*   [R] 更改显示的 URL（否则我们会看到 URL 没有变化，尽管我们会点击正确的页面）
*   QSA 表示 Query String Append，这是缺少的链接 :)
*   [L] 表示“最后一条规则”：不要寻找更多匹配项

希望有帮助！

有用的网址：

*   [http://www.simonecarletti.com/blog/2009/01/apache-rewriterule-and-query-string/](http://www.simonecarletti.com/blog/2009/01/apache-rewriterule-and-query-string/)
*   [http://wiki.apache.org/httpd/RewriteQueryString](http://wiki.apache.org/httpd/RewriteQueryString)

* * *

**第二种选择是：**

```
RewriteCond %{QUERY_STRING} ^(.*)$
RewriteRule ^pages/(.*) /go.php?q=$1&%1 [R] 
```

*   将整个查询字符串捕获为**%1**
*   将 /path/ 之后的 URL 捕获为**$1**
*   组装替换字符串并重写 URL

*"除了纯文本之外，Substition 字符串还可以包括*

*   *对 RewriteRule 模式的反向引用 ($N)*
*   *对最后匹配的 RewriteCond 模式的反向引用 (%N)"*

[http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html#rewriterule](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html#rewriterule)

# php - 在地址栏中将 url “localhost/rootdirectory/folder1/two.html”更改为“localhost/rootdirectory-folder1-two”

> ID：14603879
> 
> 赞同：0
> 
> 时间：2013-01-30T12:20:50.283
> 
> 标签：php, .htaccess, mod-rewrite, url-shortener

我对这个论坛很陌生，对 PHP 开发也很陌生。
我想`.htaccess`充分学习概念，我知道`.htaccess`是用来配置apache的。
我尝试了很多网站，但无法清楚地理解。

我有一个查询，`project`是我的根目录，其中包含`index.html`文件和包含子文件夹的文件夹，如下所示：

```
project
   |__index.html
   |__one
       |__two
           |__two.html 
```

`index.html`包含指向的锚链接`two.html`，然后我可以`localhost/project/one/two/two.php`在地址栏中看到 url 链接

我想更改网址

`localhost/project/one/two/two.php`

至

```
localhost/project-one-two-two 
```

如果我得到确切的结果，那将非常有帮助。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T14:59:19.527

这里是最简单的静态映射，容易理解。

```
RewriteEngine On
RewriteRule project-one-two-two /project/one/two/two.php [L] 
```

对于更动态的规则，它适用于任何“dir-dir-dir-file”类型的 url：

```
RewriteRule ([a-z]*)-([a-z]*)-([a-z]*)-([a-z]*) /$1/$2/$3/$4.php [L] 
```

您可以使用[Htaccess Tester](http://htaccess.madewithlove.be/)来测试 RewriteRules 的结果

# jakarta-ee - 使用 liquibase 在生产中扩展项目的最佳实践

> ID：14603880
> 
> 赞同：0
> 
> 时间：2013-01-30T12:20:51.573
> 
> 标签：jakarta-ee, maven, liquibase

我有一个带有现有数据库的 java ee 项目。现在我使用 liquibase-maven-plugin 在本地扩展我的项目。该项目会自动创建一个`tag`并生成一个`update`.

在生产中部署此项目之前，我是否需要采取任何步骤或准备工作？

Local fe 我使用了这个`generateChangeLog`命令，它创建了一个现有数据库的 xml-schema 文件。我是否出于任何目的需要此文件？

实际上我可以首先设置一个标签，然后继续使用 liquibase 和数据库。我想念这里的东西还是真的那么容易？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T07:08:41.060

应该就这么简单。目标应该是在您进行更改时对您的开发和 QA 数据库运行 liquibase update，然后在部署新代码时对您的生产数据库运行 liquibase update，它就会正常工作。

# c++ - C ++如何将参数隐式转换为比较器，例如 我原以为这将是一个通过 Google 轻松解决的问题，但我似乎找不到明确的（甚至是推测的）答案： 使用比较器语句时，隐式转换发生的顺序是什么？ int i = -1; size_t t = 1; bool result = i < t; 这是否等同于： bool result = i 问问题 问问题 2013-01-30T12:21:01.333 1454 次 This question shows research effort; it is useful and clear 7 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我原以为这将是一个通过 Google 轻松解决的问题，但我似乎找不到明确的（甚至是推测的）答案： 使用比较器语句时，隐式转换发生的顺序是什么？ int i = -1; size_t t = 1; bool result = i < t; 这是否等同于： bool result = i < int(t); // equals true 或者： bool result = size_t(i) < t; // equals false 这是问题的简单部分 - 第二部分是“一般规则是什么”，因为它可能是： “更简单”的参数总是被转换成“更复杂”的参数（即 size_t->int），或者 第一个（或第二个）参数始终转换为第二个（或第一个）参数的类型，或 诸如 size_t 和 ints 之类的内置原语具有特定的比较器运算符，它们指定逐个转换。 这三个似乎都是合理的，尽管第二个会产生与大多数人直觉预期的明显不同的行为。 当您将 int 与 size_t 进行比较时，VC++ 编译器似乎认为值得发出 3 级警告 - 但是当您从返回 size_t 的函数返回负数时它只会给出 4 级警告（这会导致数字只是超过返回的最大整数的一半）。 为了摆脱所有 4 级警告，我现在无论如何都明确地投射了所有内容，但我想知道“真相”。这必须在某处定义...... 尝试发布包含 XML 的 JSON 数据时，Http Post 失败 我正在尝试使用以下功能发布 http 帖子。它适用于我的帖子数据包含正常的 JSON 数据（只是文本）。但现在我的 json 数据在其中一个字段中也包含 xml。 public string postJSON(string username, string password, string endPoint, string json) { HttpWebRequest request = CreateWebRequest(endPoint, "POST", "text/json"); request.Credentials = new NetworkCredential(username, password); try { using (var streamWriter = new StreamWriter(request.GetRequestStream())) { streamWriter.Write(json); streamWriter.Flush(); streamWriter.Close(); var httpResponse = (HttpWebResponse)request.GetResponse(); using (var streamReader = new StreamReader(httpResponse.GetResponseStream())) { var result = streamReader.ReadToEnd(); return result; } } } catch (Exception ex) { logger.WriteToLog("RequestMaker", "postJason function: " + ex.Message); return "error"; } } 但是当我尝试这样做时，我收到了一个错误的 url 错误 (400)。我的端点 URL 如下所示： http : //se.api.anpdm.com/v1/import/mailinglist/#####/demographicmapping/### 并且必须发布的示例 Json 代码如下所示。 "{\"XMLData\":\"<subscribers><subscriber><name>Pedram</name><email>mobedi@live.com</email><demographicdata><demographic mapto="Urval">30</demographic></demographicdata></subscriber><subscriber><name>Anders Svensson</name><email>pmobedi@yahoo.com</email><demographicdata><demographic mapto="Urval">27</demographic></demographicdata></subscriber></subscribers>\"}" 还有什么我应该做的吗？ c++castingcomparatorimplicit-conversion 4 2 回答 2 This answer is useful 10 规则相当复杂，并且取决于实施。然而，基本上： 这两种类型都是“提升”的。这意味着任何小于 的东西int都会被提升为int. size_t（在小于的不太可能的情况下int，它将被提升为有符号的int，并失去其无符号性。） 如果其中一种类型可以包含另一种类型的所有值，则另一种类型将转换为此类型。 如果其中一种类型是无符号的，而另一种是有符号的，并且它们具有相同的大小，则将有符号转换为无符号。 对于intand size_t（必须是无符号的），这意味着除非size_t小于int，否则int将转换为 a size_t。 于 2013-01-30T12:35:15.960 回答 This answer is useful 4 $18.2/6- size_t 类型是实现定义的无符号整数 类型，它大到足以包含任何对象的字节大小。 $5.9 - 否则，如果具有无符号整数类型的操作数的等级大于或等于另一个操作数类型的等级，则具有符号整数类型的操作数应转换为具有无符号整数类型的操作数的类型。对于第一部分，在 C++ 标准指定的转换之前，bool 被提升为 int。 因此，这意味着 'i' 被转换为 'size_t' 的类型（假设 size_t 的类型为 'unsigned int' 或更大）。然后将“unsigned int”类型的结果转换为“bool”（即 的类型result）。 请注意，标准规定的等级signed int和unsigned int相同。 有关转换/升级的确切规则，请参阅 C++ 标准的第 4 节和第 5 节。 于 2013-01-30T12:27:04.830 回答 Related 1 ios - 如何将用户信息添加到 S3GetObjectRequest 以识别请求 2 javascript - 检测字符串中的“模式”并将其包装在 javascript(angular) 中 1 ios - Restkit - 发布对象 3 javascript - Javascript 淡入文本，一次一个词，适用于一个 div，但不能用于多个 div？ 1 sql-server - 如何在 SQL 语句中将变量传递到 XQuery 的 XPath 0 tfs - TFS 2012 对受信任的域用户进行身份验证，但对组不进行身份验证 - 为什么？ 1 unit-testing - 错误：参数 'Ctrl' 不是函数，得到未定义的单元测试 4 php - 在 WHILE LOOP 中设置适当的条件语句 3 internet-explorer - 录制 Siebel VUgen 脚本 2 c# - 继承类——复制数据 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：14603882
> 
> 赞同：7
> 
> 时间：
> 
> 标签：c++, casting, comparator, implicit-conversion

我原以为这将是一个通过 Google 轻松解决的问题，但我似乎找不到明确的（甚至是推测的）答案：

使用比较器语句时，隐式转换发生的顺序是什么？

```
int i = -1;
size_t t = 1;

bool result = i < t; 
```

这是否等同于：

```
bool result = i < int(t);    // equals true 
```

或者：

```
bool result = size_t(i) < t;    // equals false 
```

这是问题的简单部分 - 第二部分是“一般规则是什么”，因为它可能是：

1.  “更简单”的参数总是被转换成“更复杂”的参数（即 size_t->int），或者
2.  第一个（或第二个）参数始终转换为第二个（或第一个）参数的类型，或
3.  诸如 size_t 和 ints 之类的内置原语具有特定的比较器运算符，它们指定逐个转换。

这三个似乎都是合理的，尽管第二个会产生与大多数人直觉预期的明显不同的行为。

当您将 int 与 size_t 进行比较时，VC++ 编译器似乎认为值得发出 3 级警告 - 但是当您从返回 size_t 的函数返回负数时它只会给出 4 级警告（这会导致数字只是超过返回的最大整数的一半）。

为了摆脱所有 4 级警告，我现在无论如何都明确地投射了所有内容，但我想知道“真相”。这必须在某处定义......

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-30T12:35:15.960

规则相当复杂，并且取决于实施。然而，基本上：

1.  这两种类型都是“提升”的。这意味着任何小于 的东西`int`都会被提升为`int`. `size_t`（在小于的不太可能的情况下`int`，它将被提升为有符号的`int`，并失去其无符号性。）

2.  如果其中一种类型可以包含另一种类型的所有值，则另一种类型将转换为此类型。

3.  如果其中一种类型是无符号的，而另一种是有符号的，并且它们具有相同的大小，则将有符号转换为无符号。

对于`int`and `size_t`（必须是无符号的），这意味着除非`size_t`小于`int`，否则`int`将转换为 a `size_t`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-30T12:27:04.830

> $18.2/6- size_t 类型是实现定义的**无符号整数** 类型，它大到足以包含任何对象的字节大小。
> 
> $5.9 - 否则，如果具有无符号整数类型的操作数的等级大于或等于另一个操作数类型的等级，则具有符号整数类型**的操作数应转换为具有无符号整数类型的操作数的类型。**对于第一部分，在 C++ 标准指定的转换之前，bool 被提升为 int。

因此，这意味着 'i' 被转换为 'size_t' 的类型（假设 size_t 的类型为 'unsigned int' 或更大）。然后将“unsigned int”类型的结果转换为“bool”（即 的类型`result`）。

请注意，标准规定的等级`signed int`和`unsigned int`相同。

有关转换/升级的确切规则，请参阅 C++ 标准的第 4 节和第 5 节。

# c# - 尝试发布包含 XML 的 JSON 数据时，Http Post 失败

> ID：14603883
> 
> 赞同：0
> 
> 时间：2013-01-30T12:21:02.583
> 
> 标签：c#, json, http, http-post

我正在尝试使用以下功能发布 http 帖子。它适用于我的帖子数据包含正常的 JSON 数据（只是文本）。但现在我的 json 数据在其中一个字段中也包含 xml。

```
 public string postJSON(string username, string password, string endPoint, string json)
    {
        HttpWebRequest request = CreateWebRequest(endPoint, "POST", "text/json");
        request.Credentials = new NetworkCredential(username, password);
        try
        {
            using (var streamWriter = new StreamWriter(request.GetRequestStream()))
            {
                streamWriter.Write(json);
                streamWriter.Flush();
                streamWriter.Close();
                var httpResponse = (HttpWebResponse)request.GetResponse();
                using (var streamReader = new StreamReader(httpResponse.GetResponseStream()))
                {
                    var result = streamReader.ReadToEnd();
                    return result;
                }
            }
        }
        catch (Exception ex)
        {
            logger.WriteToLog("RequestMaker", "postJason function: " + ex.Message);
            return "error";
        }          
    } 
```

但是当我尝试这样做时，我收到了一个错误的 url 错误 (400)。我的端点 URL 如下所示： [http](http://se.api.anpdm.com/v1/import/mailinglist/#####/demographicmapping/###) : //se.api.anpdm.com/v1/import/mailinglist/#####/demographicmapping/### 并且必须发布的示例 Json 代码如下所示。

```
"{\"XMLData\":\"<Subscribers><Subscriber><Name>Pedram</Name><Email>mobedi@live.com</Email><DemographicData><Demographic mapTo='Urval'>30</Demographic></DemographicData></Subscriber><Subscriber><Name>Anders Svensson</Name><Email>pmobedi@yahoo.com</Email><DemographicData><Demographic mapTo='Urval'>27</Demographic></DemographicData></Subscriber></Subscribers>\"}" 
```

还有什么我应该做的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T14:14:54.927

我得到了答案，愚蠢的小事：“XMLData”是错误的。它应该是与服务器中写入的 Json 参数完全相同的“XmlData”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T12:49:08.033

如果您使用的是 Framework 4.0，这可能是因为您的 Web 服务器验证配置设置拒绝在您的请求正文中发送 xml 或其他标签。如果是这样，请尝试在 web.config 的 web 部分中将 RequestValidationMode 更改为 2.0：

```
 <httpRuntime requestValidationMode="2.0" /> 
```

# javascript - 使用字符串拆分而不是带有子字符串的数组声明数组

> ID：14603884
> 
> 赞同：13
> 
> 时间：2013-01-30T12:21:05.007
> 
> 标签：javascript, arrays, string, split

我经常注意到人们拆分一串子字符串而不是仅仅声明一个必要字符串的数组。

[moment.js](https://raw.github.com/timrwood/moment/1.7.2/moment.js)中的示例：

```
langConfigProperties = 'months|monthsShort|weekdays|weekdaysShort|weekdaysMin|longDateFormat|calendar|relativeTime|ordinal|meridiem'.split('|'), 
```

[jQuery](http://code.jquery.com/jquery-1.7.2.js)中的示例

```
 "Boolean Number String Function Array Date RegExp Object".split(" ") 
```

有什么理由喜欢这种方式？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-30T12:26:00.557

[使用 的方式比较慢`.split`](http://jsperf.com/string-split-vs-array-declaration)，但它的优点是代码可以更短（更少的字符）：

```
var array = 'months|monthsShort|weekdays|weekdaysShort|weekdaysMin|longDateFormat|calendar|relativeTime|ordinal|meridiem'.split('|');
var array = ['months','monthsShort','weekdays','weekdaysShort','weekdaysMin','longDateFormat','calendar','relativeTime','ordinal','meridiem']; 
```

在此示例中，差异并不大，但如果您有 100 个变量，则差异会变得更加显着。

拆分版中分隔符添加的长度为`11 + 1 * n`，其中`n`为元素个数，11 为`.split('|')`
数组版本，`2 + 3 * (n - 1)`即`2`为`[]`。

这意味着只要你有 6 个元素，`.split`版本就会更短：

```
for(var i = 5; i < 8; i++){
    console.log('Elements:', i, 'split:', 11 + (i-1), 'array:', 2 + 3 * (i-1));
}
// Elements: 5 split: 15 array: 14
// Elements: 6 split: 16 array: 17
// Elements: 7 split: 17 array: 20 
```

# spring - 使用tomcat在spring中进行预加载和延迟加载

> ID：14603886
> 
> 赞同：1
> 
> 时间：2013-01-30T12:21:23.013
> 
> 标签：spring

我在spring框架中使用了预加载，所以我的bean是在容器中加载时创建的。我的 bean 实例是单例的。但我想使用延迟加载。据我了解，当使用延迟加载时，bean 的实例是在请求 bean 时创建的，但容器中不存在。

但我的要求是当对那个 bean 的操作完成时，我想垃圾收集那个 bean 实例。同样，当请求该 bean 时，我想以延迟加载的方式再次创建 bean。

因此，据我所知，当 bean 实例被垃圾收集后再次部署到容器中以创建 bean 实例时，我们必须在容器中重新部署它。我想在使用后在运行时对 bean 实例进行垃圾收集，并在请求时再次创建它的实例。是否可以在不重新部署的情况下使用spring和tomcat？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T13:58:22.313

[Bean 作用域](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/beans.html#beans-factory-scopes)可能是最直接的方法。您可能需要“原型”，但“会话”和“请求”也可以在 Web 容器中使用。

如果您使用“会话”或“请求”并将 bean 注入单例 bean，则需要使用`<aop:scoped-proxy/>`：

```
<bean id="userPreferences" class="com.foo.UserPreferences" scope="session">
    <aop:scoped-proxy/>
</bean> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T12:42:31.027

您需要使用`prototype`范围 bean - 这些是在请求时创建的 bean，并且像常规对象一样被垃圾收集。

看看[文档页面](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html#beans-factory-scopes-prototype)。您可以将 bean 声明为原型，将范围设置为原型：

```
<bean id="accountService" class="com.foo.DefaultAccountService" scope="prototype"/> 
```

# c++ - 当 a 和 b 是联合时 a = b 的行为是什么？

> ID：14603889
> 
> 赞同：2
> 
> 时间：2013-01-30T12:21:27.313
> 
> 标签：c++, c, unions

据我了解有关联合的 C 和 C++ 标准，如果我尝试访问与实际写入的字段不同的联合的特定字段，这在技术上是未定义的行为。最近一直在查看别人写的一些旧代码，类似如下：

```
 union myunion {
     float myfloat;
     unsigned int myuint;
 };

 myunion a;
 a.myfloat = 1.01;

 myunion b = a; 
```

简而言之，我试图找出以这种方式在联合上使用赋值运算符是否实际上是明确定义的行为。当我自己编写这样的代码时，我会努力存储联合实例主动使用的字段类型，并确保我只读取或写入该值。我猜测使用上面的赋值运算符可能只会导致按位复制（因为在此示例中，字段大小相同），因为在调试器中单步执行代码表明这是正在发生的事情。这段代码一直表现出微妙的错误，所以我很想通过以这种方式直接将联合分配给另一个联合来找出在 UB 意义上是否存在任何固有风险。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T12:23:21.343

正如你所期望的那样。行为是明确定义的。

b 现在与 a 具有相同的值，myfloat 值为 1.01。赋值是按位的。如果您想以“安全”的方式比较 a 和 b，您可以进行按位比较。（`operator==`在 float 成员上使用不太安全，部分原因是如果其中一个实际上不包含浮点数，它就是 UB，部分原因是比较浮点数的问题）。实际上并没有为联合自动定义比较相等性，因此您必须编写重载。

联合中总是只有允许分配工作的原始类型。唯一的问题可能是类型是否可以是指针并且您在某处管理该指针。然后，如果您有两个持有此指针的联合实例，则必须小心。（但是，如果您甚至有一个包含指针的常规变量，这也适用）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T12:26:04.107

在 C++11 之前的版本中，`union`只能包含 POD（或类似的东西）——限制的设计使得按位复制可以工作。在 C++11 中，一些限制已经解除，但是如果你违反了旧的限制，复制和赋值都会被删除（除非你自己定义了操作符）。

# java - 如何将自定义类型的数组从一个活动传递到另一个活动？

> ID：14603890
> 
> 赞同：0
> 
> 时间：2013-01-30T12:21:31.417
> 
> 标签：java, android, android-intent

> 这就是我将自定义数据类型 Items ** Items[] itemsArr ** 数组传递给意图的方式

```
Intent pruchadeDetails = new Intent(getApplicationContext(),PurchaseHistoryDetails.class);
pruchadeDetails.putExtra("item",itemsArr[position].getShoppingItems());
startActivityForResult(pruchadeDetails, 0); 
```

> 无法使用这两种方法检索它

```
Item[] itemArr = (Item[])getIntent().getSerializableExtra("item"); //method 1
String json = pruchadeDetails.getStringExtra("item");//method 2 
```

> 任何帮助都非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T12:37:43.473

希望这段代码对您有所帮助。

```
 intent.putCharSequenceArrayListExtra("ListName", ArrayList)
    Intent purchaseDetails= new Intent(getApplicationContext(), PurchaseHistoryDetails.class);
    purchaseDetails.putCharSequenceArrayListExtra("items", yourArrayList);
    startActivityForResult(purchaseDetails,0); 
```

传递您的自定义数据类型的数组列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T12:41:01.027

试试这个代码

```
 intent.putCharSequenceArrayListExtra("ArrayListName", ArrayList)
Intent purchaseDetails= new Intent(getApplicationContext(), this.class);
purchaseDetails.putCharSequenceArrayListExtra("items", ArrayList);
startActivityForResult(purchaseDetails,0); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T12:38:18.333

对于下面的第一个活动使用。

```
List<String> itemList = new ArrayList();
for(int i=0;i<5;i++){
itemList.add("i'th List"+i);
}

Intent intent= new Intent(this,ReportsActivity.class);
intent.putStringArrayListExtra("items", (ArrayList<String>) itemList);
startActivity(intent); 
```

并将此数组用于另一个活动

```
Bundle bundle = getIntent().getExtras();
    List<String> itemList= bundle.getStringArrayList("items");

    for(int i=0;i<itemList.size();i++){
       Log.i("TAG", itemList.get(i));       
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T12:27:23.723

如果您想在内存中执行此操作，我想到了三个解决方案：

1.  *如@takecare*所述，使您的数据可打包。另请参阅[http://developer.android.com/reference/android/os/Parcelable.html](http://developer.android.com/reference/android/os/Parcelable.html)
2.  使用 JSON 序列化您的数据。参见，例如， http: [//developer.android.com/reference/org/json/JSONTokener.html](http://developer.android.com/reference/org/json/JSONTokener.html)
3.  使用单例类作为数据的持有者。您还可以使用应用程序对象。参见，例如，[Android 中的 Singletons vs. Application Context？](https://stackoverflow.com/questions/3826905/singletons-vs-application-context-in-android)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T12:25:23.967

使您的自定义项目可打包，然后将数组作为 Parcelable 数组放入 Bundle 中，以将其传递给活动。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-30T12:25:57.017

你需要看看这个

[http://developer.android.com/reference/android/os/Parcelable.html](http://developer.android.com/reference/android/os/Parcelable.html)

使您的模型可包裹。链接中给出了一个示例。

# git - 在共享 Linux 文件夹上从 Windows 运行时 Git/Bash 很慢

> ID：14603895
> 
> 赞同：0
> 
> 时间：2013-01-30T12:21:45.270
> 
> 标签：git, mingw, msysgit

1.  我的 Ubuntu 机器以`\\ubuntubox\codebase`完全读/写权限 (samba) 共享我的代码库。
2.  在我的 Windows 7 64 位机器上，我已将上述共享文件夹映射到 X:。我可以随心所欲地访问/写入/执行/删除文件。
3.  在 Linux 中从终端运行简单`git status`：1 到 3 秒即可获得状态
4.  从 Windows 框中的MINGW`git status`终端（默认情况下由 Git for windows 安装的内容）在共享文件夹上运行：**10-15 seconds**。

我是否缺少使 git.exe （Windows可执行文件）在共享文件夹上更快地工作的“技巧”？

目前我正在使用 putty ssh 进入 ubuntu 框并从命令行执行所有 git 操作。但是，我选择的 IDE（很棒的 PHPStorm）有一个非常有用的 git 集成，我想继​​续使用它，而不必为每个 git 命令等待 10 秒以上。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T12:40:42.377

在位于网络共享上的 git 存储库上工作没有任何技巧，因为 git 不是为这样工作而设计的。

它被设计为在本地工作，并与远程位置通信更改。为此，您需要：

*   确保您已连接到`\\ubuntubox\codebase`
*   `git clone //ubuntubox/codebase`从本地文件夹运行（注意，没有反斜杠）

然后您将拥有存储库的本地副本，并且您将能够使用远程位置（存储库）推送/拉回您的更改`origin`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T13:06:34.713

尝试使用 NFS 而不是 Samba 来共享您的文件。

我从来没有像这样用 git 尝试过，但在其他情况下，当我从 Samba 切换到 NFS 时，我看到了很大的性能改进。

# java - 为什么组件的绘制延迟？

> ID：14603905
> 
> 赞同：0
> 
> 时间：2013-01-30T12:22:07.140
> 
> 标签：java, multithreading, swing, awt, event-dispatch-thread

我想将面板涂成蓝色，然后等待五秒钟，然后再做其他事情。
现在我有了以下代码，我希望它可以做我想做的事。这里是：

```
JPanel somePanel = getSomePanel();
somePanel.setBackground(Color.BLUE);
Object lock = new Object();
synchronized (lock) {
    try {
        lock.wait(5000);
    }
    catch (InterruptedException exc) { }
}
// Do other stuff 
```

但相反，它会等待五秒钟，*然后*将组件绘制为蓝色。

*   为什么先等待，*然后*画蓝色，而不是反过来呢？（我猜它与 Swing 机制有关......？）
*   如何“更改该顺序”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T12:27:46.360

不要在 GUI 事件处理程序中等待 - 它会阻止处理消息，例如。重绘请求。

当您等待锁定时，GUI 不会完成任何操作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-30T12:28:30.123

不要在 Swing 事件线程上锁定同步代码，因为您所做的只是锁定 Swing 本身并冻结 GUI。谷歌“Concurrency in Swing”了解详情。我自己我会为此使用Swing Timer。请注意，您的帖子使用[多线程](/questions/tagged/multithreading "显示标记为“多线程”的问题")标签，但您实际上并没有在任何地方进行多线程。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-30T12:47:45.747

其他的都是对的，如果你在事件派发线程上等待，那么这个线程在此期间不会做任何绘画。

但是，有一个技巧可以帮助您，而无需启动新线程：在设置背景颜色后立即调用[paintImmediately 。](http://docs.oracle.com/javase/6/docs/api/javax/swing/JComponent.html#paintImmediately%28int,%20int,%20int,%20int%29)

```
somePanel.paintImmediately(0, 0, somePanel.getWidth(), somePanel.getHeight()); 
```

# java - 无法将文件上传到嵌入式 OpenEJB

> ID：14603906
> 
> 赞同：0
> 
> 时间：2013-01-30T12:22:07.660
> 
> 标签：java, jax-rs, multipartform-data, openejb

我正在使用嵌入式 openejb 运行一组 jax-rs 服务的集成测试。其中之一需要接收二进制文件。看下面的方法：

```
@POST
@Path("signOff")
@Consumes(MediaType.MULTIPART_FORM_DATA)
public void signOffDeliveries(
    @Encoded @FormParam("signature") File signature) {

} 
```

现在，此方法在 Websphere 上运行良好，但对嵌入式 openejb 运行测试失败。获取一个包含整个图像二进制数据的`signature`文件名（很多乱码）。

现在阅读这个文件给出了一个`FileNotFoundException`，正如预期的那样。那么我的问题是，这是嵌入式 openejb 中的错误，还是我以错误的方式设置测试？顺便说一句，这是测试代码：

```
@RunWith(ApplicationComposer.class)
public class DeliveryServiceIT {

    private HttpClient httpClient;
    private DeliveryServiceClient client;

    @Configuration
    public Properties config() throws Exception {
        Properties properties = new Properties();
        properties.put(Context.INITIAL_CONTEXT_FACTORY, "org.apache.openejb.client.RemoteInitialContextFactory");
        properties.setProperty(OpenEjbContainer.OPENEJB_EMBEDDED_REMOTABLE, "true");
        return properties;
    }

    @MockInjector
    public Class<?> mockitoInjector() {
        return MockitoInjector.class;
    }

    @Module
    public EjbModule createModule() throws Exception {
        EjbJar ejbJar = new EjbJar();
        ejbJar.addEnterpriseBean(new StatelessBean(DeliveryService.class));
        EjbModule module = new EjbModule(ejbJar);
        return module;
    }

    @Before
    public void setup() {
        //this is where I create the http client that makes the actual http request
    }

    @Test
    public void signOffDeliveries_givenSignatureImageAndDeliveries_expectsValidRequest() throws FileNotFoundException, IOException {
        File f = new File("/signature.png");

        client.signOffDeliveries(file);
        //the client will take the file, get the bytes, create 
        //multipart/form-data request and send the request to the 
        //service method posted above
    } 
```

由于这适用于我的 websphere，我认为它要么是我在（4.5.0）中运行我的集成测试的 openejb 版本的问题，要么是测试的设置方式存在问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:08:16.993

您希望您的客户通过 HTTP 发送文件完整的服务器路径吗？这正是正在发生的事情。在 HTTP POST 正文中编码的表单参数`signature`用作构造类对象的单个参数`File`。当然找不到该文件。

改用`String`并在您的 JAX-RS 资源中构建特定于服务器的文件路径。

# javascript - Parsley.js - 在指定元素中显示错误

> ID：14603908
> 
> 赞同：11
> 
> 时间：2013-01-30T12:22:12.643
> 
> 标签：javascript, jquery, jquery-plugins, parsley.js

使用[Parsley.js](http://parsleyjs.org/)，是否可以指定应该保存错误消息的元素？我试过了：

```
$('#myForm').parsley({
    errors: {
        container: {
            $('#errorMessages')
        }
    }
}); 
```

但是错误消息仍然放在我的表单输入之后。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-02T15:11:35.157

我添加了另一个数据属性，`data-parsley-errors-container="#element"`. 这可以让您修改 DOM 以指定错误消息的显示位置。

更多信息在这里： http: [//parsleyjs.org/doc/index.html#ui-for-field](http://parsleyjs.org/doc/index.html#ui-for-field)

最好的

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-01T18:36:14.770

我从**容器**键提供的函数中返回了**true 。**

 ****我的 HTML 元素**

```
<input type="text" class="input-small" errorSpan="yyy"  id="ddd" name="ddd" value="" data-required="true">
<span id="yyy"></span> 
```

**Javascript**

```
$('#abc').parsley({
            errors: {
                classHandler: function ( elem ) {}
              , container: function ( elem, template, isRadioOrCheckbox ) {
                   //here i have span msg. id to be displayed as custom attribute in input element
                    $('#' + $(elem).attr('errorSpan')).html(template);
                    return true;//returning back boolean makes it work
                  }
              , errorsWrapper: '<ul></ul>'
              , errorElem: '<li></li>'
              }
        }); 
```

***如果我回来，它也有效***

```
return $('#' + $(elem).attr('errorSpan')).html(template); 
```

希望这可以帮助......

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-31T11:46:15.377

您需要使用回调函数来执行此操作

这是一个简单的例子，例如将错误消息附加到元素父级。

```
$('#myForm').parsley({
    errors: {
        container: function ( elem ) {
            return $( elem ).parent();
        }
    }
}); 
```

编辑：在 1.1.10-dev 上工作，我改变了定义错误容器的方式，就像上面一样。小心，这是 BC Break；

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-10-23T12:25:24.420

`data-parsley-errors-container="#your-div-id"`为我工作

```
<div class="form-group">
  <label for="middle-name" class="control-label col-md-3 col-sm-3 col-xs-12">Start Time</label>
  <div class="col-md-6 col-sm-6 col-xs-12">
       <div class=" datetimepicker3 input-append timepick">
          <input class="form-control" data-format="hh:mm" placeholder="HH:MM" type="text" name="startTime" data-parsley-errors-container="#startTimeErrorContainer" required="required"  id="startTime" />
          <span class="add-on"><i class="fa fa-clock-o icon-time"></i></span>  
       </div>   
      <div id="startTimeErrorContainer"></div>                                            
  </div> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-01T06:12:23.957

@guillaumepotier 我已经在 jquerymobile 上尝试了您的代码，但屏幕上没有显示任何错误消息。我想将错误消息添加到类“help-inline”

**索引.html**

```
<script src="js/vendor/parsley.message.th.js"></script>
<script src="js/vendor/parsley.extend.min.js"></script>
<script src="js/vendor/parsley.min.js"></script>

...

<div class="control-group">
    <label class="control-label" for="A0_C1">From<i class="required-icon"></i></label>
    <div class="controls">
        <input type="text" id="A0_C1" name="A0_C1" value="" required="required" />
        <span class="help-inline"></span>
    </div>
</div> 
```

**欧芹.message.th.js**

```
window.ParsleyConfig = $.extend( true, {}, window.ParsleyConfig, { 
    errors: {
        container: function ( elem ) {
            return $(elem).parent().find(".help-inline");
        }
    }
}); 
```

**更新 - v1.1.9-dev 上的工作解决方案**

```
return $(elem).closest('.controls').find('.help-inline').append(template); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-09-05T11:37:47.717

**只需在 Parsley 库导入之前**定义 classHandler 函数，就我而言，我使用的是引导程序，它是在父 div 上应用错误和有效类（它有“form-group”类）。

```
<script>
    window.ParsleyConfig = {
      classHandler: function ( parsleyField) {
      // specify where parsley error-success classes will be set
      return parsleyField.$element.parent();
      // Change this to change the element to apply too
      },
    };
</script> 
```

现在只需将 data-parsley validate 添加到您的表单标签：

```
<form  method="post" id="form1" data-parsley-validate> 
```

使用引导程序时，您还需要指定引导程序错误和有效类

```
<form method="post" id="form1" data-parsley-error-class="has-error" data-parsley-success-class="has-success" data-parsley-validate> 
```

为了在父 div 上设置无效/错误状态的“has-error”类（同样适用于有效状态）：

```
<div class="form-group has-error">
    <label>Name</label>
    <input class="form-control" type="text" id="name" name="name" required="" data-parsley-trigger="keyup" data-parsley-minlength="5">
    <p class="help-block">Example help text here.</p>
</div> 
```

该解决方案适用于所有领域。**

# php - 如何将“OR”条件运算符附加到 MySQL 动态查询（PHP）？

> ID：14603924
> 
> 赞同：0
> 
> 时间：2013-01-30T12:22:45.797
> 
> 标签：php, mysql

我正在构建一个动态查询字符串，并且在如何附加 OR 条件运算符时遇到问题。

对于 AND 运算符来说，这很容易，如下所示：

```
$base_query = "SELECT * FROM `tropical_fruits` WHERE 1 " 
```

然后，要附加另一个查询，我只需执行以下操作：

```
$query_1 = "AND `colour` = $fruit_colour;
$final_query = $base_query . $query_1; 
```

但是如何附加 OR 运算符？

例如，如果我像这样简单地附加 OR：

```
$query_1 = "OR `colour` = $fruit_colour; 
```

...查询不再产生正确的结果（这意味着查询将检索表中的每条记录）。

所以问题是...

***基本查询应该是什么，以便它足够灵活地附加一个 AND 和/或 OR 条件，记住用户可以提交两个 OR 条件***

如果这个问题不清楚，我很抱歉......我很难解释它！;-)

主要的问题是，我正在编写一个接受搜索查询并返回结果的函数。搜索功能需要能够接受以下查询：

```
并且在哪里 =
 以及喜欢的地方
 或在哪里 =
 或喜欢的地方

```

基本上，我需要将上述查询附加到如下所示的基本查询中：

```
$base_query = 'SELECT * FROM `' 。$table_name 。'` 哪里 1 '; 

```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T12:31:43.480

> SELECT * FROM Persons WHERE LastName='Svendson'AND (FirstName='Tove' OR FirstName='Ola')

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T12:34:48.683

“OR”旁边的条件始终是可选的。在您的基本查询中，“where”条件将允许您的表中的所有文档。您仍然想限制选择查询的结果尝试如下，

```
$query_1 = " AND (`colour` = $fruit_colour OR 'type'=$some_type)"; 
```

您可以使用混合括号和条件运算符来限制结果。

并确保这些运算符的执行优先级。

# php - 插入表 - 错误：调用本机函数“md5”时的参数计数不正确

> ID：14603926
> 
> 赞同：0
> 
> 时间：2013-01-30T12:22:48.527
> 
> 标签：php, mysql, md5

我正在尝试构建一个将用户插入用户表的 php 表单。用户名和用户电子邮件将通过 HTML 表单手动输入，用户密码将同时随机生成。这是我的代码：

```
<?php
if (isset($_POST['insert'])) {
require_once 'dblogin.php'; 

  $OK = false;
  $conn = new mysqli ($host, $user, $password, $database) or die("Connection Failed");
  $stmt = $conn->stmt_init();

  $sql = 'INSERT INTO users (user_email, user_name, user_password)
          VALUES(?, ?, des_encrypt(substring (md5(rand(),1,8))))';
  if ($stmt->prepare($sql)) {
    // bind parameters and execute statement
    $stmt->bind_param('sss', $_POST['user_email'], $_POST['user_name'], $_POST['user_password']);
    // execute and get number of affected rows
    $stmt->execute();
    if ($stmt->affected_rows > 0) {
      $OK = true;
    }
  }
  if ($OK) {
    header('Location: confirm.php');
    exit;
  } else {
    $error = $stmt->error;
  }
}
?>
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<title>Add User</title>
</head>

<body>
<h1>Add User</h1>
<?php if (isset($error)) {
  echo "<p>Error: $error</p>";
} ?>
<form id="form1" method="post" action="">
  <p>
    <label for="user_email">User email:</label>
    <input name="user_email" type="text" class="widebox" id="user_email">
  </p>
    <p>
    <label for="user_name">User name:</label>
    <input name="user_name" type="text" class="widebox" id="user_name">
  </p>
  <p>
    <input type="submit" name="insert" value="Register New User" id="insert">
  </p>
</form>
</body>
</html> 
```

我得到的错误是：错误：调用本机函数'md5'时参数计数不正确。我是初学者，我从未使用过md5，有人可以帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T12:26:35.307

我认为您正在尝试这样做...

```
SUBSTRING( MD5( RAND( ) ) , 1, 8 ) 
```

代替

```
substring (md5(rand(),1,8)) 
```

你的查询应该是这样的......

```
$sql = 'INSERT INTO users (user_email, user_name, user_password)
      VALUES (?, ?, DES_ENCRYPT( SUBSTRING( MD5( RAND( ) ) , 1, 8 ) ) )'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T12:28:02.883

我从未使用过 mysqli .. 但是，错误是“参数计数不正确”.. 如果您查看代码：

`(user_email, user_name, user_password)`- 那是 3 列和 `(?, ?, des_encrypt(substring (md5(rand(),1,8))))`.. 3 列

与：

`$stmt->bind_param('sss', $_POST['user_email'], $_POST['user_role'], $_POST['user_password']);`. . 4个参数..

删除`'sss'`?

此外，查看匹配项，一旦您删除`'sss'`您仍将发布的内容： user_email = $_POST['user_email'] user_password = $POST['user_role'] 。.

所以你需要做到

``$stmt->bind_param($_POST['user_email'], $_POST['user_name']);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T12:30:30.450

问题在这里：

```
$sql = 'INSERT INTO users (user_email, user_name, user_password)
          VALUES(?, ?, des_encrypt(substring (md5(rand(),1,8))))'; 
```

MD5 只接受一个参数——要散列的字符串。

试试这个 ：

```
 $sql = 'INSERT INTO users (user_email, user_name, user_password)
          VALUES(?, ?, des_encrypt(substring(md5(rand()),1,8)))'; 
```

# c# - 使用 AutoFac 自动绑定接口

> ID：14603928
> 
> 赞同：25
> 
> 时间：2013-01-30T12:22:55.953
> 
> 标签：c#, asp.net, asp.net-mvc, autofac

我有一些类，如 UserQuery、CustomerQuery 分别实现 IUserQuery、ICustomerQuery 等接口。在我的绑定配置中，我需要将每个接口与相应的查询绑定：

```
builder.RegisterType<UserQuery>().As<IUserQuery>().InstancePerRequest();
builder.RegisterType<CustomerQuery>().As<ICustomerQuery>().InstancePerRequest(); 
```

这工作得很好，但我想知道是否有一种方法可以进行基于约定的绑定来代替绑定每个类 XXX[Query] -> [I]XXX[Query]。

我使用 AutoFac 作为我的 DI 容器。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-01-30T12:27:37.297

我不是 AutoFac 经验丰富的用户。然而，经过一些研究，成功地测试了下面的代码：

```
var assembly = Assembly.GetExecutingAssembly();

builder
    .RegisterAssemblyTypes(assembly)
    .AssignableTo<IQuery>()
    .AsImplementedInterfaces()
    .InstancePerRequest(); 
```

上面的 IQuery 接口只是一个标签接口，应该从您拥有的每个查询接口继承。使用您的示例：

接口

```
IUserQuery: IQuery
ICustomerQuery: IQuery 
```

课程

```
UserQuery: IUserQuery
CustomerQuery: CustomerQuery 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-30T12:26:46.397

您需要使用 Autofac 的[程序集扫描功能](http://code.google.com/p/autofac/wiki/Scanning)。

如果您的接口或您的实现共享基类（例如`QueryBase`）或基接口（例如`IQuery`），那么您可以使用令人信服的方法进行注册，例如：`AssignableTo<>`等。请参阅[gustavodidomenico 的](https://stackoverflow.com/a/14604014/872395)答案。

但是，有时您无法拥有通用的基接口/类，在这种情况下，您可以使用`Where`可以拥有任何自定义逻辑的方法来检测应该注册哪些类以及如何注册。

在这种情况下，您的注册大致如下所示：

```
builder.RegisterAssemblyTypes(yourAssembly)
       .Where(t => t.IsClass && t.Name.EndsWith("Query"))
       .As(t => t.GetInterfaces().Single(i => i.Name.EndsWith(t.Name))); 
```

它将注册名称以`"Query"`匹配接口结尾的给定程序集的所有类型，因此它将注册`SomeNiceQuery`到接口`ISomeNiceQuery`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-22T10:06:16.367

或者，您可以将每种类型注册为它的第一个实现接口或它自己的接口。

```
builder.RegisterAssemblyTypes(new[] { Assembly.GetAssembly(typeof(IUserQuery))})
        .Where(x=> x.IsClass && x.Name.EndsWith("Query"))
        .As(t => t.GetInterfaces().Any() ? t.GetInterfaces()[0] : t); 
```

# java - 维护远程 MBeanServer 和 JVM 上的 JMX 连接和负载

> ID：14603930
> 
> 赞同：1
> 
> 时间：2013-01-30T12:23:00.790
> 
> 标签：java, performance, jmx

在我的应用程序中，我创建和维护与远程 JVM 的 MBeanServer 的多个连接。我想汇集这些连接。但不确定他们是否对远程 MBeanServer 施加了任何负载。

我想知道维护与远程 JVM MBean 服务器的空闲 rmi JMX 连接是否会给远程 JVM 带来任何负载？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T13:14:40.350

这取决于实际的 JMX 远程协议。**JMX/RMI**实际上非常健谈，并且会启动连接检查线程。**JMXMP**效率更高，但您仍会看到额外连接的一些累积开销，因此它将在资源利用率和建立新（或共享）连接的成本之间进行权衡。

你能详细说明你为什么要合并吗？

**==== 更新 ====**

您可以使用[Apache Commons Pool](http://commons.apache.org/proper/commons-pool/)。创建一个[GenericKeyedObjectPool的](http://commons.apache.org/proper/commons-pool/api-1.4/org/apache/commons/pool/impl/GenericKeyedObjectPool.html)[实例。 PoolableObjectFactory](http://commons.apache.org/proper/commons-pool/api-1.4/org/apache/commons/pool/PoolableObjectFactory.html)实现应该包装[JMXConnectorFactory](http://docs.oracle.com/javase/1.5.0/docs/api/javax/management/remote/JMXConnectorFactory.html)并且您可以创建一个复合键类，其中包含[JMXServiceURL](http://docs.oracle.com/javase/1.5.0/docs/api/javax/management/remote/JMXServiceURL.html)和借用连接时要使用的凭据。然后对象工厂可以在[借用](http://commons.apache.org/proper/commons-pool/api-1.4/org/apache/commons/pool/impl/GenericKeyedObjectPool.html#addObject%28java.lang.Object%29)调用上分解密钥，并在[激活](http://commons.apache.org/proper/commons-pool/api-1.4/org/apache/commons/pool/PoolableObjectFactory.html#activateObject%28java.lang.Object%29)调用上获取经过身份验证的连接。

实际的池化对象应该是某种包装器，因为您需要在 makeObject 调用中创建一个“断开连接”的实例（并且在标准 JMX 远程处理中没有这样的东西），然后如果它没有连接则在激活时“连接”它已经。

# http - 如何为本地 Web 应用程序定义 Microsoft Live OAuth 重定向 URL？

> ID：14603932
> 
> 赞同：9
> 
> 时间：2013-01-30T12:23:06.117
> 
> 标签：http, oauth, onedrive, windows-live-id

使用 OAuth，ClientID 和 redirect_url 有很强的联系：您需要为每个 redirect_url 设置一个单独的 ClientID。对于在多个域中具有多个部署的本地应用程序来说，这是一个问题。

有什么方法可以实现来自未知域的 OAuth 身份验证？我能想出的唯一替代方案需要在固定域中使用专用的“身份验证服务器”，该服务器可以用作 redirect_url，然后可以执行新的、不受限制的重定向到客户域。

桌面应用程序通过提供一个虚拟的 redirect_url 来解决这个问题，然后将实时身份验证窗口托管在一个专用的 Web 框架中，让它们可以监听重定向请求。这允许他们从重定向 URL 读取授权代码，即使 URL 本身无效。我相信由于跨域限制，这在网络浏览器中是不可能的。

基本上需要 OAuth 来支持本地 Web 应用程序中的 SkyDrive 发布。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-05T22:11:15.067

[RFC 6749](https://www.rfc-editor.org/rfc/rfc6749#section-3.1.2.2) (OAuth 2.0) 规定，授权服务器必须要求将 redirect_uri 预先注册为[Public Clients](https://www.rfc-editor.org/rfc/rfc6749#section-2.1)而不是[Confidential Clients](https://www.rfc-editor.org/rfc/rfc6749#section-2.1)，只要它们不使用隐式授权。根据您是在安装过程中提供客户端凭据还是系统管理员输入他们自己的客户端凭据，您的系统最终会分为不同的类别。然而，RFC 建议始终需要预先注册的 redirect_uri，因此您很可能在任一分类中都遇到相同的问题。

我想说对您来说唯一可行的解​​决方案是要求系统的系统管理员在配置系统时提供他们自己的客户端凭据。如果他们提供自己的客户端凭据，他们还需要向授权服务器注册自己的 redirect_uri，从而解决了问题。

您不应该**实现**中间身份验证服务器，因为这会打开应用程序的安全性。如果用户授权您的系统的一次安装，他们将自动授权所有安装，这反过来又可以将他们的个人数据提供给其他组织，而不是他们授权的组织。

# html - 具有浮动右侧内容的自动宽度

> ID：14603933
> 
> 赞同：1
> 
> 时间：2013-01-30T12:23:06.333
> 
> 标签：html, css, css-float, width

我正在尝试将 a`span`与元素的右侧对齐，`a`而不将其推到另一行上，也无需手动设置包含的宽度`div`。

`white-space`我已经尝试了, `position`,等的各种组合`float`，`text-align`但我根本无法让它工作。

这是该问题的一个示例：

[http://jsfiddle.net/QgzbY/2/](http://jsfiddle.net/QgzbY/2/)

请注意，“Ctrl+Shift+S”在“将文档另存为”下方的行上，我希望它位于同一行，与上一行一样向右对齐。换句话说，它需要增加包含元素的宽度以适应快捷方式文本。

**简而言之：**如何将元素浮动到父元素的右侧，同时始终将内容保持在一行？

***如果这不能使用 CSS 实现，那么请不要浪费您的时间帮助我使用 Javascript，因为 Stack 上有更多的人需要帮助，我可以自己编写这部分。我只是希望没有必要:-)***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T12:45:00.163

我`<p>`在“将文档另存为”文本周围添加了一个标签，然后为某些元素添加了一个 ID，以便您知道我正在更改/影响什么。我只修复了一行，所以你可以看到我改变了什么，然后也修复了其余的。

基本上，你想删除浮动`.shortcut`，并显示块/浮动离开 img 和 span 内`<a>`。我用 ID 而不是复杂的选择器来做这个，所以你可以看到我在做什么。

```
.shortcut {
    float: none !important; // over riding your declaration elsewhere
}

#lol, #lolimg {
    display: block;
    float: left;
} 
```

[演示](http://jsfiddle.net/QgzbY/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T12:37:51.477

请看这个是你需要的吗？

```
<li>
    <a href="javascript:void(0)" class="key-ctrl-s">
       <img src="//beta.example.net/_images/_icons/save-20x20.png"/>
       <span class="text-hint">Save Document</span>
       <span class="shortcut">Ctrl+S</span></a>
    </li> 
```

css

```
.text-hint{display: inline; float: left;}
.shortcut{display:inline;float:right;} 
```

[http://jsfiddle.net/LFkkL/](http://jsfiddle.net/LFkkL/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T12:44:40.277

我利用位置属性来实现一些值得一看的东西。给父母一个相对位置，给它的孩子一个绝对位置，然后使用正确的值将其设置在适当的位置。

此外，我还增加了下一行的宽度

```
.win_menu li {
    display:block !important;
    float:none !important;
    padding:0 !important;
    margin:0 !important;
    height:20px !important;
    min-width:200px !important;
    white-space:nowrap !important;
    border:1px solid transparent !important;
    z-index:10 !important;
} 
```

[**演示**](http://jsfiddle.net/refhat/N3MrD/2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T13:19:40.030

感谢您的所有回答。不幸的是，如果不操纵菜单的宽度，我试图实现的似乎是不可能的。我认为可能是这种情况:-(

无论如何，谢谢你的所有提示

# google-maps-api-3 - google maps api 在本地主机上工作，但在网络服务器上不起作用

> ID：14603936
> 
> 赞同：2
> 
> 时间：2013-01-30T12:23:16.310
> 
> 标签：google-maps-api-3, authorization, markers, api-key, driving-directions

我使用谷歌地图 api 在地图上选择一些点并找到最短的驾驶路线。

一切都在本地主机中工作，但是当我发布并上传它服务器时，它不起作用......

为什么会发生？没有任何错误。地图即将出现在页面上，但我看不到标记，并且 directionResult 没有加载结果。是关于授权吗？我有有效的帐户和 api 密钥等。我允许我的域的引用。

编辑：我用 crome JS 调试器检查脚本。这里没有回应；

```
directionsService.route(request, function (response, status) {
if (status == google.maps.DirectionsStatus.OK) 
{
    directionsDisplay.setDirections(response);    }
}); 
```

状态在实时服务器上返回“”值，而不是“OK”。在本地主机它的工作！有人知道是什么原因吗？

您可以在此处查看 google.maps.api 的示例；查看源代码：[https ://google-developers.appspot.com/maps/documentation/javascript/examples/directions-simple](https://google-developers.appspot.com/maps/documentation/javascript/examples/directions-simple)

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T11:55:15.573

我解决了这个问题。它关于 Web 服务器的十进制符号。在我的本地主机中，我使用“。” 作为十进制符号。但是在网络服务器中它是“，”所以在谷歌地图中，​​纬度和纬度点有错误的值，地图 api 无法找到这些点。

从区域和语言设置（适用于所有用户）更改 Web 服务器十进制符号后。它开始工作...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-16T09:30:24.353

最近我遇到了同样的问题。
创建我的 api 密钥后，它也开始在我的服务器上工作。
奇怪的事实是，本地总是完美地工作，不需要密钥。

# database - 为自动化 TFS 构建过程设置测试数据库的最佳方式

> ID：14603951
> 
> 赞同：1
> 
> 时间：2013-01-30T12:24:09.213
> 
> 标签：database, unit-testing, nhibernate, tfs, build-automation

我正在使用运行几个测试项目的自定义工作流程。其中一些项目使用数据库（我知道这应该在单独的上下文中，但我无法更改测试代码）来运行一些测试用例。

我不知道它是否相关，但我使用 XUnit 作为测试框架并使用 nhibernate 作为 ORM。

我所做的是创建一个自定义活动，该活动在 SQLEXPRESS 服务器中为测试项目设置所有必要的数据库并临时附加它们，该活动还修改了指向我创建的临时数据库的 .config 文件。到现在为止还挺好。

这里的问题是我不想拥有不幸过时的 .mdf 模板（由于逻辑数据库更改）并且必须手动更新。

我面临的另一个问题是，模板不仅破坏了这个过程的自动化，而且从构建定义中访问这些项目的开发人员也无法轻松地在他们的机器上本地启动测试。他们必须获取 MDF、挂载数据库、配置测试项目并运行。太多的操作无法让开发人员有意愿对他们的代码进行单元测试。

最好的方法是什么，或者有人对我应该从哪里开始寻找可能的解决方案有任何建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:37:59.083

在我看来，在本地很好地测试数据库的唯一方法是模拟它们或使用包含一些简单数据的嵌入式数据库。

实际上，这两种方法都需要您的开发团队的工作。

我强烈建议模拟数据库，因为它不需要在运行测试之前进行备份和恢复数据库。如果您使用代码模拟数据库，测试将几乎立即运行，您将无需管理任何外部依赖项。

您希望您的开发人员找到一个可以模拟的具有 nhibernate 的现有接口（Moq 是一个很好的模拟库 - [http://code.google.com/p/moq/](http://code.google.com/p/moq/)）或在数据访问级别引入接口，所以他们可以伪造数据库调用。

我认为嵌入式方法在这里非常不合适。

# silverlight - Visual Studio 2012 中的 Ria 服务（Silverlight 4 工具）？

> ID：14603952
> 
> 赞同：1
> 
> 时间：2013-01-30T12:24:09.893
> 
> 标签：silverlight, visual-studio-2012, wcf-ria-services

拥有 Visual Studio 2010 SP1，一切都很好，我可以创建 Silverlight 单元测试项目、RIA 服务类库等我安装了 Visual Studio 2012，然后当我注意到不存在时我正在创建一个 RIA 服务类库'域服务类”，也不是 Silverlight 单元测试。使用 Visual Studio 2012 开发 RIA 服务需要什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T07:26:03.620

Silverlight 5 工具随 Visual Studio 2012 一起安装。您可能需要再次重新安装 Silverlight 4 工具。

您可以通过创建新的 Silverlight 应用程序项目来检查您的 Visual Studio 2012 安装是否支持 Silverlight 4。在弹出的对话框中，您可以选择（组合框）要在项目中使用的 Silverlight 版本。

另请参阅[此帖子](http://www.kunal-chowdhury.com/2012/06/do-i-need-to-install-silverlight-tools.html)以获取更多参考。

# drupal-7 - 如何在节点中显示正文和预告片--contentType.tpl.php

> ID：14603956
> 
> 赞同：1
> 
> 时间：2013-01-30T12:24:18.650
> 
> 标签：drupal-7, drupal-theming

我正在为特定内容类型的节点模板设置主题。我想访问主体和摘要（预告片）。目前，当我如下渲染正文时，Drupal 仅输出正文而不输出摘要。

由于这是一个完整的节点页面，我希望同时呈现正文和摘要。我不明白为什么这一天不清楚，还是我错过了一些关于预告片和身体应该如何工作的东西？

```
print render($content['body']); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-30T12:39:38.853

这行得通。

```
$body = field_get_items('node', $node, 'body');
$teaser= $body[0]['safe_summary'];
print $teaser; 
```

# sql - 复合键 SQL 服务器

> ID：14603958
> 
> 赞同：1
> 
> 时间：2013-01-30T12:24:22.730
> 
> 标签：sql, sql-server, sql-server-2008, indexing, key

我为多对多关系创建了一个连接表。

该表只有 2 个列，`ticketid`并且`groupid`

典型的数据是

```
groupid    ticketid
20         56  
20         87
20         96
24         13
24         87
25         5 
```

我的问题是在创建复合键时我应该`ticketid`遵循`groupid`

```
CONSTRAINT [PK_ticketgroup] PRIMARY KEY CLUSTERED 
    (
        [ticketid] ASC,
        [groupid] ASC
    )WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
    ) ON [PRIMARY] 
```

或以另一种方式，`groupid`然后`ticketid`

```
CONSTRAINT [PK_ticketgroup] PRIMARY KEY CLUSTERED 
        (
            [groupid] ASC,
                    [ticketid] ASC
        )WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
        ) ON [PRIMARY] 
```

在选项 1 中搜索索引是否会更快，因为`ticketid's`它们比 groupid 更有可能是唯一的，并且它们将位于复合键的开头？或者这可以忽略不计？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T12:33:42.790

差异很可能可以忽略不计。

但是，对于 SQL Server，建议将最具选择性的列放在首位。如果首先放置选择性低的列，优化器可能会确定您的索引不是很有选择性，并会选择忽略它。有关详细信息，请参阅此[sqlserverpedia.com Wiki 文章](http://sqlserverpedia.com/wiki/Index_Selectivity_and_Column_Order#Which_Field_Goes_First_in_an_Index.3F)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T12:52:52.523

我实际上会创建两个索引。鉴于工单 ID 更可能是唯一的，聚集索引将按该顺序为 GroupID,TicketID。然后我会在 TicketID 上创建一个非聚集非唯一索引。

原因是如果您只想根据组 ID 进行查询，它们在逻辑上将是连续的，并且会有一个块。仅指定 TicketID 时，另一个索引将为您提供最快的速度。

我确实认为根据查询数据的方式（即是否始终提供 groupid 和 ticketid），总体上它可能可以忽略不计。

# vb.net - 在表单中处理用户控件的控件事件

> ID：14603960
> 
> 赞同：3
> 
> 时间：2013-01-30T12:24:41.567
> 
> 标签：vb.net, winforms, events, controls

我有一个按钮`UserControl1`。我正在使用`UserControl1`. `Form1`我想处理 Button 的 Click 事件`Form1`。

我试图通过以下方式做同样的事情：

```
AddHandler userControl1.Button1.Click, AddressOf Button1_Click 
```

和：

```
Public Sub Button1_Click(ByVal sender As Object, ByVal args As EventArgs) Handles userControl1.Button1.Click

End Sub 
```

但得到错误。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-30T12:37:27.623

在以下位置创建您的活动`UserControl`：

```
Public Class UserControl1

    Public Event UC_Button1Click()

    Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
        RaiseEvent UC_Button1Click()
    End Sub

End Class 
```

然后使用新事件：

```
AddHandler userControl1.UC_Button1Click, AddressOf Button1_Click 
```

* * *

或者您可以简单地在 上定义它`UserControl`并从外部访问它（不推荐）：

```
Public WithEvents Button1 As System.Windows.Forms.Button 
```

进而：

```
AddHandler uc.Button1.Click, AddressOf Button1_Click 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-10T13:44:14.890

在我将“AddHandler”放在主程序（而不是 UserControl）中之前，我发现这非常令人困惑。

因此，为了澄清起见，确保您可以在主程序中“感知”用户控件中发生的事件的步骤是：

1.  确保用户控件中您希望更改其属性的任何对象（例如 PictureBox.Image 或 TextBox.Text）都将其修饰符属性设置为“Public”。这是允许其他程序更改属性的唯一方法。

2.  对于您想要识别的事件（例如“Click”、“DblClick”等），请在您的用户控制代码的顶部放置一个公共事件的声明行。举个例子，

    ```
     Public Event UC_MySub(.....parameters.....) 
    ```

“UC_”是我用来帮助强调它是在“UserControl”中定义的前缀。名称的其余部分（“MySub”）可以是任何东西，不需要以任何方式与点击事件相关。如果你愿意，你甚至可以称它为“CreamedCheese”！包括任何你喜欢定义公共事件的参数，同样它们可以是任何类型的名称。当您单击用户控件的对象时，这些将被传递到主程序。

3.  现在，转到当您“单击” GroupBox（在本例中）时运行的事件，您将启动该公共事件，如下所示：

    ```
    Private Sub GroupBox_Click(sender As Object, e As EventArgs) Handles GroupBox1.Click
           RaiseEvent UC_MySub(....Paramaters.....)
    End Sub 
    ```

您必须确保在此调用中传递给公共事件的参数在数量（和类型）上与在公共事件声明本身中定义的每个参数相同。

4.  现在，您重建您的用户对象，然后转到您的主程序。在主窗体的“加载”例程中，为您正在使用的用户定义对象的每个对象添加以下行。例如，在我的程序中，我有 4 个 UDO（用户定义对象）实例。所以我添加了（假设我的 UDO 名为“MyUDO”）：

    ```
     AddHandler MyUDO1.UC_MySub, AddressOf SwapHands 'This is my sub accepting the values from the public event
     AddHandler MyUDO2.UC_MySub, AddressOf SwapHands
     AddHandler MyUDO3.UC_MySub, AddressOf SwapHands
     AddHandler MyUDO4.UC_MySub, AddressOf SwapHands 
    ```

“SwapHands”例程在我的主程序中定义，并接受存储在 UC Public 事件中的参数。“AddressOf”指向您的常驻子例程。在所有这些定义中唯一要确保的是，在每种情况下，您具有相同数量的参数（如果有的话），以相同的顺序，并且属于相同的类型）。（每个参数可以是不同的类型，但必须在每个定义中声明的类型中“排列”）。（例如 1 个布尔值、1 个字符串、另一个字符串）。在定义和调用中，必须有（在这种情况下）“布尔、字符串、字符串”的 3 个参数 - 按此顺序。

现在，当您运行程序并单击 UDO（用户定义对象）中的 GroupBox（或您使用过的任何东西）（在本例中为四个对象中的任何一个）时，您将启动存储在主程序中的例程.

很难解释，但在花了 HOURS 时间了解它是如何工作的之后，我想我会留下我的评论，以防其他人遇到同样的困惑。

# android-ndk - 无法为 67 个库加载共享库符号，例如 libstdc++.so

> ID：14603961
> 
> 赞同：6
> 
> 时间：2013-01-30T12:24:42.067
> 
> 标签：android-ndk

我已经阅读了很多文章，但不知道如何解决这个问题：

```
$ /cygdrive/e/adt-bundle-windows-x86/android-ndk-r8d/ndk-build

Gdbserver      : [arm-linux-androideabi-4.6] libs/armeabi/gdbserver    
Gdbsetup       : libs/armeabi/gdb.setup    
Cygwin         : Generating dependency file converter script    
Compile++ thumb  : Andest1 <= Andest1.cpp    
StaticLibrary  : libstdc++.a    
SharedLibrary  : libAndest1.so    
Install        : libAndest1.so => libs/armeabi/libAndest1.so

$ /cygdrive/e/adt-bundle-windows-x86/android-ndk-r8d/ndk-gdb --project=e:/workspace/Andrd1 --port=5000 --start --force --verbose      

0xafd0c52c in epoll_wait () from E:\workspace\Andrd1/./obj/local/armeabi/libc.so    
warning: .dynamic section for "E:\workspace\Andrd1/./obj/local/armeabi/libAndrd1.so" is not at the expected address (wrong library or version mismatch?)
warning: Could not load shared library symbols for 67 libraries, e.g. libstdc++.so. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-31T09:02:05.283

当我在 Eclipse 上调试本机代码时，我也遇到了这个问题。最后我发现我们应该忽略它。

> 重要提示：GDB 提示符之前会出现一长串错误消息，其中 gdb 抱怨它找不到各种系统库（例如 libc.so、libstdc++.so、liblog.so、libcutils.so 等...）
> 
> ```
>  This is normal, because there are no symbol/debug versions of
>        these libraries corresponding to your target device on your
>        development machine. You can safely ignore these messages. 
> ```

阅读 ANDROID-NDK-DOCUMENT 你会发现它。

希望我有所帮助。

**编辑：**

1.  该报价可以在 android-ndk-r8d/documentation.html 的 NDK-GDB 部分找到

# php - 如何使用“查看批量操作”模块批量删除Feed项？

> ID：14603964
> 
> 赞同：0
> 
> 时间：2013-01-30T12:24:51.243
> 
> 标签：php, mysql, drupal

Drupal 7.x，如何使用“查看批量操作”模块批量删除Feed项？我已经安装了 VBO 模块，但我不知道如何使用它，它没有配置菜单，而且我没有找到任何明确的说明如何使用它来完成我的任务。此外，VBO 模块需要 Entity API 模块作为依赖项。任何人都可以发布详细说明如何配置 VBO 以删除提要项目吗？

# mysql - 如何在两列上加入

> ID：14603965
> 
> 赞同：-1
> 
> 时间：2013-01-30T12:24:53.453
> 
> 标签：mysql, sql, select, join

在我的系统中有三层

```
BDM can add Agent
DSA can add Agent

Agent can add customer 
```

在代理中有两列 agent_bdm_id 和 agent_dsa_id 如果代理由 BDM 添加，我将存储零，反之亦然

我需要用代理和 bde/dsa 名称打印客户

```
BDM bdmid, bdmname
DSA dsaid, dsaname

Agent agent_id, agent_name, agent_bdm_id, agent_dsa_id

customer cust_is, cust_name, cust_agent_id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T12:35:37.483

```
SELECT  a.cust_is, a.cust_name,
        b.agent_name,
        COALESCE(c.bdmname, d.dsaname) `BDM/DSA`
FROM    customer a
        INNER JOIN Agent b
            ON a.cust_agent_id = b.agent_id
        LEFT JOIN BDM c
            ON b.agent_bdm_id = c.bdmid
        LEFT JOIN DSA d
            ON b.agent_dsa_id = d.dsaid 
```

*我有点困惑。为什么`0`？不是是`ID`谁加的`Agent`吗？*

# perl - 如何在 Wx 中清除和刷新面板？

> ID：14603967
> 
> 赞同：1
> 
> 时间：2013-01-30T12:25:04.093
> 
> 标签：perl, wxwidgets, wxperl

我正在构建一个新闻阅读器应用程序，并且我有一个 wxScrolledWindow 来显示新闻。但是，我有类别，当单击一个类别时，我想用当前类别的新闻更新此面板。我在 wxScrolledWindow 上使用 DeleteChildren 实现了这一点，但这似乎不能正常工作。

问题是在重新生成新闻时会闪烁，并且除非我拉伸整个窗口，否则滚动条不会出现。此外，有时除非我手动调整新闻大小，否则不会显示。我尝试了刷新，但它仍然是一样的。这是我的代码：

```
our ($self);

sub new {
    my ($class, $parent_window) = @_;
    $self = $class->SUPER::new($parent_window, -1);
    $self->SetScrollRate(10, 10);

    my @news = (...);
    regenerate_news_list(@news);

    return $self;
}

sub regenerate_news_list($) {
    my (@news) = @_;

    $self->DestroyChildren();

    my $vbox = Wx::BoxSizer->new(wxVERTICAL);
    for my $news_item (@news) {

        my $news_panel = Wx::Panel->new($self, wxID_ANY);

        my $news_sizer = Wx::BoxSizer->new(wxVERTICAL);
        my $news_title = Wx::HyperlinkCtrl->new($news_panel, wxID_ANY, $news_item{'title'}, $news_item{'url'},  wxDefaultPosition, wxDefaultSize, wxBORDER_NONE);
        my $news_description = Wx::StaticText->new($news_panel, wxID_ANY, $news_item{'description'}, wxDefaultPosition);
        $news_description->Wrap(560);

        $news_sizer->AddSpacer(5);
        $news_sizer->Add($news_title, 0);
        $news_sizer->AddSpacer(5);
        $news_sizer->Add($news_description, 0);
        $news_sizer->AddSpacer(5);

        $vbox->Add($news_panel, 0, wxEXPAND|wxALL);
    }

    $self->SetSizer($vbox);
    $vbox->Fit($self);
    $self->Refresh();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T21:59:15.033

在更新之前调用`$self->Freeze()`before`DestroyChildren()`以停止重绘，然后`Thaw()`在完成后调用 after `Refresh()`。它应该更快，并且不会有任何闪烁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T13:45:18.080

使用两个面板，一个显示给用户，一个用于准备新的显示。新显示完成后，显示新面板并隐藏旧面板。备用。

# delphi - Delphi - URL 的文件大小 - 错误 12150

> ID：14603969
> 
> 赞同：1
> 
> 时间：2013-01-30T12:25:13.393
> 
> 标签：delphi, download, wininet, content-length

德尔福 6 教授，Win7 操作系统。

我有这段代码可以通过 URL 获取文件大小：

```
function TDDWIToolObject.GetFileSize(out Size: Int64): boolean;
var
    hInet: HINTERNET;
    hRequest : HINTERNET;
    lpdwBufferLength: DWORD;
    lpdwReserved    : DWORD;
    ServerName: string;
    Resource: string;
    FileSizeBuffer : array[0..32] of char;
    //SizeCard : Cardinal;
begin
    ParseURL(Url, ServerName, Resource);
    Result := False;
    Size := 0;

    hInet := InternetOpen(PChar(_UserAgent), INTERNET_OPEN_TYPE_PRECONFIG, nil, nil, 0);
    if hInet=nil then begin
        FErrorCode := GetLastError;
        Exit;
    end;

    try

        hRequest := InternetOpenUrl(hInet, PChar(URL), PCHar(Headers), Length(HEaders), 0, 0);

        try

            FillChar(FileSizeBuffer, SizeOf(FileSizeBuffer), #0);
            lpdwBufferLength := SizeOf(FileSizeBuffer);
            lpdwReserved :=0;

            if not HttpQueryInfo(
                hRequest,
                HTTP_QUERY_CONTENT_LENGTH,
                @FileSizeBuffer, lpdwBufferLength, lpdwReserved) then begin

                FErrorCode:=GetLastError;
                Exit;
            end;

            Size := StrToInt64(StrPas(FileSizeBuffer));
            Result := True;

        finally
            InternetCloseHandle(hRequest);
        end;

    finally
        InternetCloseHandle(hInet);
    end;

end; 
```

它适用于我的机器 + DSL 连接。

但是当我在其他完全受保护的地方检查此代码（代理+许多策略）时，我得到错误代码 12150... :-(

有趣的是，当我使用此代码时，我可以下载此文件：

```
function TDDWIToolObject.DownloadFile;
var
    hInet: HINTERNET;
    hFile: HINTERNET;
    pbuffer: Pointer;
    bytesRead: DWORD;
    Stm : TFileStream;
    TotalBytes : Int64;
    AbortIt : boolean;
begin
    Result := False;
    FErrorCode := -1;
    FAborted := False;
    hInet := InternetOpen(PChar(_UserAgent), INTERNET_OPEN_TYPE_PRECONFIG, nil, nil, 0);
    if hInet = nil
        then begin
            FErrorCode := GetLastError;
            Exit;
        end;
    try
        hFile := InternetOpenURL(hInet, PChar(URL), PChar(FHeaders), Length(FHeaders), 0, 0);
        if hFile = nil
            then begin
                FErrorCode := GetLastError;
                Exit;
            end;
        try
            Stm := TFileStream.Create(FN, fmCreate);
            try
                GetMem(pbuffer, FBufferSize);
                try
                    TotalBytes := 0; AbortIt := False;
                    while (not FAborted) do begin
                        if not InternetReadFile(hFile, pbuffer, FBufferSize, bytesRead) then begin
                            FErrorCode := GetLastError;
                            Exit;
                        end;
                        if bytesRead > 0 then begin
                            Stm.WriteBuffer(pbuffer^, bytesRead);
                            if Assigned(FOnBytesArrived)
                                then begin
                                    inc(TotalBytes, bytesRead);
                                    FOnBytesArrived(Self, TotalBytes, AbortIt);
                                    if AbortIt
                                        then Abort;
                                end;
                        end else begin
                            break;
                        end;
                    end;
                finally
                    FreeMem(pbuffer);
                end;
                if not FAborted
                    then Result := True;
            finally
                Stm.Free;
            end;
        finally
            InternetCloseHandle(hFile);
        end;
    finally
        InternetCloseHandle(hInet);
    end;
end; 
```

这很有趣，因为系统管理员允许在代理中对这个 URL 的请求，并且下载对我有用 - 只有内容长度请求失败。

我想问一个问题，但很难做到，因为其中很多都在我的脑海中......你知道我们可以做些什么来允许这些请求吗？也许 HttpRequest 使用另一个端口，或者一些“非法”的不可代理？或者我的代码似乎是错误的？为什么它在非保护区工作？下载和获取内容长度请求有什么区别？

所以问题是总结格式：你知道在下载之前我能做些什么来获取文件大小吗？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T15:27:00.737

此错误可能是由许多因素（[ERROR_HTTP_HEADER_NOT_FOUND](http://support.microsoft.com/kb/193625)）引起的，在您的代码中，您`InternetOpenUrl`在调用该`HttpQueryInfo`方法之前没有检查函数的结果，并且我没有看到`_UserAgent`and`Headers`变量的内容来给您更准确的答案。无论如何尝试使用`HttpOpenRequest`and`HttpSendRequest`函数而不是`InternetOpenURL`.

试试这个样本

```
uses
  Windows,
  SysUtils,
  WinInet;

const
  sUserAgent = 'Mozilla/5.001 (windows; U; NT4.0; en-US; rv:1.0) Gecko/25250101';

function GetWinInetError(ErrorCode:Cardinal): string;
const
   winetdll = 'wininet.dll';
var
  Len: Integer;
  Buffer: PChar;
begin
  Len := FormatMessage(
  FORMAT_MESSAGE_FROM_HMODULE or FORMAT_MESSAGE_FROM_SYSTEM or
  FORMAT_MESSAGE_ALLOCATE_BUFFER or FORMAT_MESSAGE_IGNORE_INSERTS or  FORMAT_MESSAGE_ARGUMENT_ARRAY,
  Pointer(GetModuleHandle(winetdll)), ErrorCode, 0, @Buffer, SizeOf(Buffer), nil);
  try
    while (Len > 0) and {$IFDEF UNICODE}(CharInSet(Buffer[Len - 1], [#0..#32, '.'])) {$ELSE}(Buffer[Len - 1] in [#0..#32, '.']) {$ENDIF} do Dec(Len);
    SetString(Result, Buffer, Len);
  finally
    LocalFree(HLOCAL(Buffer));
  end;
end;

procedure ParseURL(const lpszUrl: string; var Host, Resource: string);
var
  lpszScheme      : array[0..INTERNET_MAX_SCHEME_LENGTH - 1] of Char;
  lpszHostName    : array[0..INTERNET_MAX_HOST_NAME_LENGTH - 1] of Char;
  lpszUserName    : array[0..INTERNET_MAX_USER_NAME_LENGTH - 1] of Char;
  lpszPassword    : array[0..INTERNET_MAX_PASSWORD_LENGTH - 1] of Char;
  lpszUrlPath     : array[0..INTERNET_MAX_PATH_LENGTH - 1] of Char;
  lpszExtraInfo   : array[0..1024 - 1] of Char;
  lpUrlComponents : TURLComponents;
begin
  ZeroMemory(@lpszScheme, SizeOf(lpszScheme));
  ZeroMemory(@lpszHostName, SizeOf(lpszHostName));
  ZeroMemory(@lpszUserName, SizeOf(lpszUserName));
  ZeroMemory(@lpszPassword, SizeOf(lpszPassword));
  ZeroMemory(@lpszUrlPath, SizeOf(lpszUrlPath));
  ZeroMemory(@lpszExtraInfo, SizeOf(lpszExtraInfo));
  ZeroMemory(@lpUrlComponents, SizeOf(TURLComponents));

  lpUrlComponents.dwStructSize      := SizeOf(TURLComponents);
  lpUrlComponents.lpszScheme        := lpszScheme;
  lpUrlComponents.dwSchemeLength    := SizeOf(lpszScheme);
  lpUrlComponents.lpszHostName      := lpszHostName;
  lpUrlComponents.dwHostNameLength  := SizeOf(lpszHostName);
  lpUrlComponents.lpszUserName      := lpszUserName;
  lpUrlComponents.dwUserNameLength  := SizeOf(lpszUserName);
  lpUrlComponents.lpszPassword      := lpszPassword;
  lpUrlComponents.dwPasswordLength  := SizeOf(lpszPassword);
  lpUrlComponents.lpszUrlPath       := lpszUrlPath;
  lpUrlComponents.dwUrlPathLength   := SizeOf(lpszUrlPath);
  lpUrlComponents.lpszExtraInfo     := lpszExtraInfo;
  lpUrlComponents.dwExtraInfoLength := SizeOf(lpszExtraInfo);

  InternetCrackUrl(PChar(lpszUrl), Length(lpszUrl), ICU_DECODE or ICU_ESCAPE, lpUrlComponents);

  Host := lpszHostName;
  Resource := lpszUrlPath;
end;

function GetRemoteFileSize(const Url : string): Integer;
var
  hInet    : HINTERNET;
  hConnect : HINTERNET;
  hRequest : HINTERNET;
  lpdwBufferLength: DWORD;
  lpdwReserved    : DWORD;
  ServerName: string;
  Resource: string;
  ErrorCode : Cardinal;
begin
  ParseURL(Url,ServerName,Resource);
  Result:=0;

  hInet := InternetOpen(PChar(sUserAgent), INTERNET_OPEN_TYPE_PRECONFIG, nil, nil, 0);
  if hInet=nil then
  begin
    ErrorCode:=GetLastError;
    raise Exception.Create(Format('InternetOpen Error %d Description %s',[ErrorCode,GetWinInetError(ErrorCode)]));
  end;

  try
    hConnect := InternetConnect(hInet, PChar(ServerName), INTERNET_DEFAULT_HTTP_PORT, nil, nil, INTERNET_SERVICE_HTTP, 0, 0);
    if hConnect=nil then
    begin
      ErrorCode:=GetLastError;
      raise Exception.Create(Format('InternetConnect Error %d Description %s',[ErrorCode,GetWinInetError(ErrorCode)]));
    end;

    try
      hRequest := HttpOpenRequest(hConnect, PChar('HEAD'), PChar(Resource), nil, nil, nil, 0, 0);
        if hRequest<>nil then
        begin
          try
            lpdwBufferLength:=SizeOf(Result);
            lpdwReserved    :=0;
            if not HttpSendRequest(hRequest, nil, 0, nil, 0) then
            begin
              ErrorCode:=GetLastError;
              raise Exception.Create(Format('HttpOpenRequest Error %d Description %s',[ErrorCode,GetWinInetError(ErrorCode)]));
            end;

             if not HttpQueryInfo(hRequest, HTTP_QUERY_CONTENT_LENGTH or HTTP_QUERY_FLAG_NUMBER, @Result, lpdwBufferLength, lpdwReserved) then
             begin
              Result:=0;
              ErrorCode:=GetLastError;
              raise Exception.Create(Format('HttpQueryInfo Error %d Description %s',[ErrorCode,GetWinInetError(ErrorCode)]));
             end;
          finally
            InternetCloseHandle(hRequest);
          end;
        end
        else
        begin
          ErrorCode:=GetLastError;
          raise Exception.Create(Format('HttpOpenRequest Error %d Description %s',[ErrorCode,GetWinInetError(ErrorCode)]));
        end;
    finally
      InternetCloseHandle(hConnect);
    end;
  finally
    InternetCloseHandle(hInet);
  end;

end; 
```

# oauth - 如何使用 oAuth 2.0 在 whootin 中创建登录身份验证？

> ID：14603970
> 
> 赞同：-1
> 
> 时间：2013-01-30T12:25:14.953
> 
> 标签：oauth, oauth-2.0

我在[whootin.com](http://whootin.com)中创建了一个应用程序，我有

*   消费者密钥
*   消费者秘密
*   请求令牌 URL
*   访问令牌 URL
*   授权网址

我想对拥有 whootin 帐户的用户进行身份验证，并在我的网站上显示他们的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T21:14:31.310

因为 OAuth 只是一个规范，所以您可以使用许多不同的客户端。例如：[https](https://github.com/vznet/oauth_2.0_client_php) ://github.com/vznet/oauth_2.0_client_php 。

# android - 在android中实现facebook

> ID：14603972
> 
> 赞同：0
> 
> 时间：2013-01-30T12:25:19.507
> 
> 标签：android, facebook-graph-api

嗨，我正在使用 facebook 的新 sdks 进行发布。一切正常，除了如果已经安装了 facebook，我无法从我的 android 应用程序登录，这意味着如果*手机上没有安装***facebook**应用程序* 我可以**成功地将数据发布**到facebook 通过我的移动应用程序，但如果用户**安装了 facebook 应用程序，我无法发布我的数据**。

 *****请帮我解决这个问题..

对不起英文不正确..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T12:36:34.557

看着你的问题，我建议你看看[这个](http://p-xr.com/implementing-facebook-into-your-app-invalid-key-with-keytool/)。问题的症结在于windows上的keytool弄乱了key hash。做

`"keytool -export ..."`代替`"keytool -exportcert ...";`

两者都生成密钥，但第二个把它搞砸了。

您也可以通过将其放入您的活动中来获取密钥

```
try {
   PackageInfo info = getPackageManager().getPackageInfo("com.yourcompany.client", PackageManager.GET_SIGNATURES);
   for (Signature signature : info.signatures) {
        MessageDigest md = MessageDigest.getInstance("SHA");
        md.update(signature.toByteArray());
        Log.d("Hash Key:", Base64.encode(md.digest()));
   }
} catch (NameNotFoundException e) {

} catch (NoSuchAlgorithmException e) {

} 
```*****

# c - 在 C 中使用 LAME 的问题

> ID：14603974
> 
> 赞同：1
> 
> 时间：2013-01-30T12:25:23.630
> 
> 标签：c, mp3, speech, pcm, lame

我正在`pcm`尝试`mp3`使用`Lame`. 虽然 pcm 数据确实被转换为 mp3 文件，但输出非常刺耳。在我发布问题之前，以下是我的代码：

```
/*
Sample program to generate a single sinusoid and encode it in mp3.
*/

#include <stdio.h>
#include <stdlib.h>
#include <math.h>
#include <include/lame/lame.h>
#include <assert.h>
#include <string.h>

int main(int argc, char *argv[]) {

  unsigned int sampleRate = 16000;  /*assumed.*/
  unsigned int nSecondsAudio = 4;
  float *arr;
  lame_global_flags *gfp;
  unsigned char mp3buffer[2304]; /*some odd buffer sizes hard-coded.*/
  int pcm_samples_1d[2*1152];
  int pcm_samples_2d[2][1152];
  int read = 0, write = 0;
  int return_code = 1;
  int mp3buf_size;
  FILE *mp3;
  FILE *pcm;
  int framesize = 0;
  int i = 0, j = 0, num_samples_encoded = 0;

  /*Step 1\. Generate sinusoid.*/
  /*arr = (float *) malloc(sizeof(float) * nSecondsAudio * sampleRate);
  arr = generateSinusoid(sampleRate, nSecondsAudio);*/

  /*Step 2\. See if encoder exists.*/
  char *s = (char *) malloc(sizeof(char)*200);
  s = get_lame_version();
  printf("Lame version = %s\n", s);

  /* Init lame flags.*/
  gfp = lame_init();
  if(!gfp) {
    printf("Unable to initialize gfp object.");
  } else {
    printf("Able to initialize gfp object.\n");
  }

  /* set other parameters.*/
  lame_set_num_channels(gfp, 1);
  /*lame_set_num_samples(gfp, (nSecondsAudio * sampleRate));*/
  lame_set_in_samplerate(gfp, sampleRate);
  lame_set_quality(gfp, 5);  /* set for high speed and good quality. */
  lame_set_mode(gfp, 3);  /* the input audio is mono */

  lame_set_out_samplerate(gfp, sampleRate);
  printf("Able to set a number of parameters too.");
  framesize = lame_get_framesize(gfp);
  printf("Framesize = %d\n", framesize);
  assert(framesize <= 1152);

  /* set more internal variables. check for failure.*/
  if(lame_init_params(gfp) == -1) {
    printf("Something failed in setting internal parameters.");
  }

  /* encode the pcm array as mp3.*
   * Read the file. Encode whatever is read.
   * As soon as end of file is reached, flush the buffers.
   * Write everything to a file.
   * Write headers too.
  */

  /* Open PCM file for reading from.*/
  pcm = fopen("out.pcm", "rb");   /*hard-coded to the only available pcm file.*/
  if(!pcm) {
    printf("Cannot open pcm file for reading.");
    return 1;
  }

  mp3 = fopen("out.mp3", "wb+");
  if(!mp3) {
    printf("Cannot open file for writing.");
    return 1;
 }

  do {
   read = fread(pcm_samples_1d, sizeof(short), 2304, pcm); /*reads framesize shorts from pcm file.*/
   printf("Read %d shorts from file.\n", read);

   /* check for number of samples read. if 0, start flushing, else encode.*/
   if(read > 0) {
     /* got data in 1D array. convert it to 2D */
     /* snippet below taken from lame source code. needs better understanding. pcm_samples_2d[0] = contents of buffer. pcm_samples_2d[1] = 0 since number of channels is always one.*/
     memset(pcm_samples_2d[1], 0, 1152 * sizeof(int));  /*set all other samples with 0.*/
     memset(pcm_samples_2d[0], 0, 1152 * sizeof(int));
     i = 0, j = 0;
     for(i = 0; i < 1152; i++) {
       pcm_samples_2d[0][i] = pcm_samples_1d[i];
     }

     /* encode samples. */
     num_samples_encoded = lame_encode_buffer_int(gfp, pcm_samples_2d[0], pcm_samples_2d[1], read, mp3buffer, sizeof(mp3buffer));

     printf("number of samples encoded = %d\n", num_samples_encoded);

     /* check for value returned.*/
     if(num_samples_encoded > 1) {
       printf("It seems the conversion was successful.\n");
     } else if(num_samples_encoded == -1) {
       printf("mp3buf was too small");
       return 1;
     } else if(num_samples_encoded == -2) {
       printf("There was a malloc problem.");
       return 1;
     } else if(num_samples_encoded == -3) {
       printf("lame_init_params() not called.");
       return 1;
     } else if(num_samples_encoded == -4) {
       printf("Psycho acoustic problems.");
       return 1;
     } else {
       printf("The conversion was not successful.");
       return 1;
     }

     printf("Contents of mp3buffer = \n");
     for(i = 0; i < 2304; i++) {
       printf("mp3buffer[%d] = %d\n", i, mp3buffer[i]);
     }

     write = (int) fwrite(mp3buffer, sizeof(char), num_samples_encoded, mp3);
     if(write != num_samples_encoded) {
       printf("There seems to have been an error writing to mp3 within the loop.\n");
       return 1;
     } else {
       printf("Writing of %d samples a success.\n", write);
     }
   }
 } while(read > 0);

 /* in case where the number of samples read is 0, or negative, start flushing.*/
 read = lame_encode_flush(gfp, mp3buffer, sizeof(mp3buffer)); /*this may yield one more mp3 buffer.*/
 if(read < 0) {
   if(read == -1) {
     printf("mp3buffer is probably not big enough.\n");
   } else {
     printf("MP3 internal error.\n");
   }
   return 1;
 } else {
   printf("Flushing stage yielded %d frames.\n", read);
 }

 write = (int) fwrite(mp3buffer, 1, read, mp3);
 if(write != read) {
   printf("There seems to have been an error writing to mp3.\n");
   return 1;
 }

  /*samples have been written. write ID3 tag.*/
  read = lame_get_id3v1_tag(gfp, mp3buffer, sizeof(mp3buffer));
  if(sizeof(read) > sizeof(mp3buffer)) {
    printf("Buffer too small to write ID3v1 tag.\n");
  } else {
    if(read > 0) {
      write = (int) fwrite(mp3buffer, 1, read, mp3);
      if(read != write) {
        printf("more errors in writing id tag to mp3 file.\n");
      }
    }
  }

  lame_close(gfp);
  fclose(pcm);
  fclose(mp3);

  return 0;
} 
```

我的问题：
1\. 我的输入 pcm 数据以 16kHz 采样，单声道并以 16 位编码。鉴于只有一个通道，lame_encode_buffer_int 的输入中的左右通道是什么？
2\. 我不确定我是否理解从一维数组到二维数组（代码中的 pcm_samples_1d 到 pcm_samples_2d）的“转换”过程，正如[这个问题](https://stackoverflow.com/q/11485456/350685)中给出的那样。
3\. 为什么我的声音很刺耳？在代码中，使用的库是使用`--enable-debug`标志从源代码编译的。但是，我无法使用`gdb`. 我还应该做什么？

到目前为止我所尝试的：
1\. 阅读 LAME 项目的文档（或网络上可用的内容）。
2\. 通读 SO 和其他论坛上发布的问题。
3\. 浏览源代码：`lame.h`、`frontend/main.c`frontend/get_audio.c`等。

非常欢迎对此提供任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T13:15:41.583

这个：

```
char *s = (char *) malloc(sizeof(char)*200);
s = get_lame_version(); 
```

错了，它会泄漏内存。删除`malloc()`调用，无论如何您都没有使用分配的内存，因为您用`get_lame_version()`返回的任何内容覆盖了指针。

此外，[不要强制转换`malloc()`in C](https://stackoverflow.com/a/605858/28169)的返回值，并避免`sizeof (char)`因为它始终为 1。如果您想将分配“锁定”到指针类型，请使用：

```
s = malloc(200 * sizeof *s); 
```

为了更具体地了解您的代码，1d/2d 数组简直太可怕了，如果不了解我没有的 LAME API，就不可能知道该代码是否正确。它可能与单声道/立体声有关，因为它似乎就是这样做的。

不确定 MP3 是否可以使用静音通道，这可能是出于某种原因（产生点击）的非法输入数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T12:12:29.537

这是我为解决问题所做的：
尝试以`Audacity`. 将该文件的“速度”降低 50% 得到正确的输出。这意味着问题可能是输入和输出采样率不同，并且重采样操作不在`lame_encode_buffer_int`. 将该例程更改为`lame_encode_buffer`在其他例程中处理重采样。这使得编码工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-12T02:15:15.380

我认为您的问题确实是 LAME 不支持 16kHz 并且该`lame_encode_buffer_int()`功能不会自动重新采样数据。

也可能是设置输出采样率：

```
lame_set_out_samplerate(gfp, sampleRate); 
```

当与 MP3 不兼容时会产生问题。

有效的 MP3（MPEG-1，第三层）采样率是：

*   32kHz,
*   44.1kHz（LAME 默认使用），以及
*   48kHz。

LAME 可能选择了 32kHz，这就是为什么将 Audacity 中的速率减半可以将您的音频恢复到完美的速率。

* * *

`NULL`关于单声道/立体声问题，只要您只有单声道数据，就不要指定正确的缓冲区（使用）。只要您定义了一个通道，它就可以工作：

```
lame_set_num_channels(gfp, 1);
...snip...
lame_encode_buffer_int(gfp, pcm_samples_1d, NULL,
                       read, mp3buffer, sizeof(mp3buffer)); 
```

`lame_encode_buffer()`也可以将正确的缓冲区设置为`NULL`。

```
lame_encode_buffer(gfp, pcm_samples_1d, NULL
                   read, mp3bufer, sizeof(mp3buffer)); 
```

在内部，这意味着您的 1d 缓冲区将用于两个通道，但低级采样无论如何都会忽略正确的缓冲区。

* * *

正如 unwind 在他的回答中提到的那样，该代码还有一些与 LAME 没有直接关系的问题......如果您仍然拥有它并且您有兴趣并想要进行审查，您可以尝试将其发布在[代码审查堆栈](https://codereview.stackexchange.com/)上。

# mysql - GROUP BY 子句中使用的所有属性都必须出现在 SELECT 子句中吗？

> ID：14603977
> 
> 赞同：2
> 
> 时间：2013-01-30T12:25:29.113
> 
> 标签：mysql

在我正在准备的竞争性考试的前一年的论文中给出了以下问题：

> GROUP BY 子句中使用的所有属性都必须出现在 SELECT 子句中吗？

有人可以澄清这个疑问吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T12:30:54.027

不，但是如果您确实使用 GROUP BY 子句，那么您可以在 SELECT 子句中添加的内容会受到限制

# ruby-on-rails - omn iauth 回调的长时间延迟

> ID：14603978
> 
> 赞同：3
> 
> 时间：2013-01-30T12:25:33.950
> 
> 标签：ruby-on-rails, ruby-on-rails-3, omniauth, thin

OmniAuth（Facebook 和 LinkedIn）为我工作了几个月。

在没有任何代码更改的情况下，我开始看到来自 Facebook/LinkedIn 的回调有很长的延迟。

现在大约需要 40 秒：

```
Started GET "/auth/facebook/callback?state=e600c4acbb0e10f40.... 
```

至：

```
Processing by AuthenticationsController#create as HTML.... 
```

我看到[了一个问题](https://github.com/mkdynamic/omniauth-facebook/issues/31)，但没有解决方案对我有用。

有人见过吗？我该如何解决这个问题/弄清楚发生了什么？

**--编辑1--**

我使用 curl 运行流程，发现调用 Facebook 需要很长时间：

```
time curl --data "grant_type=authorization_code&client_id=[MY CLINET ID]&client_secret=[MY CLIENT SECRET]&redirect_uri=[MY REDIRECT URI]&code=[THE CODE I GOT]" https://graph.facebook.com/oauth/access_token
>> access_token=AAAA....ZDZD&expires=5183693
real 0m20.459s
user 0m0.004s
sys 0m0.008s

time curl -H "Authorization: Bearer AAAA....ZDZD" https://graph.facebook.com/me
>> {....}
real 0m20.706s
user 0m0.012s
sys 0m0.008s 
```

**--编辑2--**

似乎每次使用 curl 的调用都比它应该花费的时间多 20 秒。我试过谷歌：

```
time curl http://www.google.com
>> <HTML>....</HTML>

real    0m20.253s
user    0m0.012s
sys 0m0.004s 
```

但是当我尝试使用 IP 时：

```
time curl http://173.194.44.17
>> <HTML>....</HTML>

real    0m0.647s
user    0m0.012s
sys 0m0.000s 
```

我在一些网站上发现了一个提示，它可能与慢速 DNS 解析有关。同一台机器上的浏览器似乎工作正常。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T17:36:52.243

我找到了解决方案。这是一个本地问题，与 Ubuntu 12.04 中的慢速 DNS 解析有关，这是一个已知问题。为我解决的问题是将我的系统配置为使用 google DNS 而不是自动配置。

# sql-server-2008 - 如何根据特定模式格式化 SQL Server 日期？

> ID：14603979
> 
> 赞同：2
> 
> 时间：2013-01-30T12:25:38.397
> 
> 标签：sql-server-2008, date, format

在 MySQL 中有 DATE_FORMAT() 函数允许根据指定的模式表示给定的日期值。

MS SQL Server 中有类似的东西吗？

我试图格式化的语句是：

`SELECT TOP 1 CONVERT(VARCHAR(20), ot.Timestamp,110) AS 'TS' FROM ot, cl WHERE ot.CompID = cl.CompID;`

输出为 MM-DD-YYYY。还有其他款式，但我还没有找到适合我的款式。

我需要输出为 DD/MM/YYYY HH:MM 的东西。其中 HH 是 24 小时格式。

我怎样才能最好地做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T12:35:15.890

在 SQL Server 2012 中，您可以使用[FORMAT](http://msdn.microsoft.com/en-us/library/hh213505.aspx?ppud=4)函数。

```
 SELECT getdate(), FORMAT (getdate(), ' dd/MM/yyyy HH:mm'). 
```

[http://www.sql-server-helper.com/sql-server-2012/format-function-vs-convert-function.aspx](http://www.sql-server-helper.com/sql-server-2012/format-function-vs-convert-function.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T12:32:48.913

请参阅[MSDN](http://msdn.microsoft.com/en-us/library/ms187928.aspx)。看起来您可以使用以下内容：

```
select convert(varchar(10), getdate(), 103) + ' ' + convert(varchar(8), getdate(), 108) 
```

# java - 使用 Java 将文档上传到共享点的 API

> ID：14603986
> 
> 赞同：1
> 
> 时间：2013-01-30T12:26:08.667
> 
> 标签：java, web-services, sharepoint, jakarta-ee

我需要使用**Java在****Sharepoint**中上传一些文档。我不知道如何实现同样的目标。

 **请让我了解一些市场上可用的知名 API（仅限免费使用）以及它们的优缺点，以便我可以深入研究他们的文档并继续使用它。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T07:39:49.303

Sharepoint 支持 webdav 写入/读取文件。

因此，您可以在写入/读取文件时使用任何 webdav 库。

我建议从[这里使用沙丁鱼](https://code.google.com/p/sardine/)

或使用来自 apache 的 jackrabbit。**

# c# - 如何将选定上下文菜单项的索引传递给绑定命令？

> ID：14603987
> 
> 赞同：0
> 
> 时间：2013-01-30T12:26:11.443
> 
> 标签：c#, wpf, data-binding, contextmenu

我如何将所有上下文菜单项绑定到一个命令，该命令获取调用的菜单项的索引？我有一个 WPF/MVVM 项目。

```
<ContextMenu x:Key="cm" ItemsSource="{Binding ActionItems}" 
DisplayMemberPath="ActionDescription">    
</ContextMenu> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T12:33:35.557

您应该将其作为`CommandParameter`：

```
<ContextMenu x:Key="cm" ItemsSource="{Binding ActionItems}" DisplayMemberPath="ActionDescription"
Command="{Binding YourCommand}" CommandParameter="{Binding YourParameter}">
...
</ContextMenu> 
```

*更新* 您需要此处描述的解决方案：[MVVM binding command to contextmenu item](https://stackoverflow.com/q/9994241/502950)

*评论后更新*

复发 - 比你应该实现它，如下所示：[WPF ContextMenu with ItemsSource - how to bind to Command in each item?](https://stackoverflow.com/questions/1580753/wpf-contextmenu-with-itemssource-how-to-bind-to-command-in-each-item) . 请注意，该链接是其他问题的重复。所以请阅读两者。

# mysql - 在字段名中转换 var @var

> ID：14603989
> 
> 赞同：0
> 
> 时间：2013-01-30T12:26:12.887
> 
> 标签：mysql, sql

在此查询中：

```
set @myVars := '';
SELECT C.Id,
      IF((select count(CA.Id) from mytable_2 CA where CA.IdC=C.Id and CA.IdA=10), 
      @myVars:='option_1' , 
      @myVars:='option_2')  as myTempField
FROM mytable_1 C where CONCAT('fied_',@myVars) = 5 
```

在这种情况下，我希望“ **CONCAT('fied_',@myVars)** ”成为我要查询的字段的名称，但它不起作用。

根据“if”的结果，将被质疑的字段必须是“field_option_1”或“field_option_2”

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:31:17.797

您可以添加一个额外的列

```
set @myVars := '';
SELECT
  C.Id,
  IF((select count(CA.Id) from mytable_2 CA where CA.IdC=C.Id and CA.IdA=10), @myVars:='option_1', @myVars:='option_2') as myTempField,
  CONCAT('fied_',@myVars) as AColumn
FROM mytable_1 C
where @myVars = 5 
```

这会给你 id ， myTempField 和 AColumn

# python - 用 HiddenInput 覆盖 ModelChoiceField 不起作用

> ID：14603990
> 
> 赞同：1
> 
> 时间：2013-01-30T12:26:17.270
> 
> 标签：python, django-models, django-forms

我有从模型生成的表格

```
class UserProfile(models.Model):
    company = models.ForeignKey(Company)
    user = models.OneToOneField(User)
    department = models.CharField(max_length=100)
    position = models.CharField(max_length=100)

class UserProfileForm(ModelForm):
    company_id = ModelChoiceField(queryset=Company.objects.all(),
                                            widget=HiddenInput())
    class Meta:
        model = UserProfile
        exclude = ('user') 
```

但它不起作用，并且 company_id 保持可见选择字段。如何使用公司 ID 创建隐藏字段？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T13:31:00.213

模型和表单之间的字段名应该匹配。使用 company 而不是 company_id ，它会工作。