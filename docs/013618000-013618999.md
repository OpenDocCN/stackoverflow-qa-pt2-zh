# StackOverflow 问答 13618000-13618999

# python - 我的代码应该有一个（非常糟糕的）AI 将他的 O for tic-tac-toe 放置在板上的随机位置

> ID：13618000
> 
> 赞同：1
> 
> 时间：2012-11-29T02:43:33.210
> 
> 标签：python, while-loop

但是在我赢了比赛之后，（我每次都有电脑打印号码）电脑不断地挑选号码，试图获得一个位置，即使没有剩下的了。我不知道该怎么做，非常感谢任何帮助。

```
if board[computer] != 'X' and board[computer] != 'O':
        print computer
        board[computer] = 'O'
    else:
        while board[computer] == 'O' or board[computer] == 'X':
            computer = random.randint(0, 8)
            print computer
            if board[computer] != 'X' and board[computer] != 'O':
                board[computer] = 'O'
                break 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T02:52:31.540

你需要看看你的逻辑......

你的时候说...`board[computer] == 'O' or board[computer] == 'X'`

和你的 break if 语句：

```
if board[computer] != 'X' and board[computer] != 'O': 
```

既不检查董事会是否已满。

您需要循环浏览您的“板”并检查它是否已满

例如...

```
emptyposition = True
for position in board :
    if not position == Null : # Your board position is empty 
        emptyposition = False

if not emptyposition :
    break 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T02:48:23.870

一开始，游戏还没有结束。当有人获胜时，游戏就结束了。当打出 9 个棋子时，游戏结束。如果游戏结束了，就不要再玩了。

# compiler-errors - IPv4 和 IPv6 地址的 lex 模式

> ID：13618002
> 
> 赞同：0
> 
> 时间：2012-11-29T02:43:50.397
> 
> 标签：compiler-errors, lex, flex-lexer

我有一个 lex 模式文件 (test.l)，我想在其中识别 IPv4 地址和 IPv6 地址的模式。

目前我使用二进制模式符号，例如

```
src -ip of 192.168.156.203 is to be written as 
1 src-ip {11000000 10101000 10011100 11001011} 
```

其中“1”是我用于分类的标签。我想扩展此模式以包括 IPv4 地址（点分十进制）和 IPv6 地址（四进制表示法）

目前我的词法分析器文件（test.l）的相关部分如下所示。

```
 BINARY_PATTERN [ \t]*[ \t0-1\-\*]+[ \t]*

    <S_src_ip>\{{BINARY_PATTERN}\}  {

         /*Some code here*/
    } 
```

我稍微扩展了代码如下。

```
<S_dst_ip>\{{BINARY_PATTERN}\}|\{[0-255]\\.[0-255]\\.[0-255]\\.[0-255}\} 
```

支持 IPv4 地址。上面的代码有问题吗？另外我如何扩展它以支持 IPV6 模式。

我无法编译上面的代码。它显示

```
flex --header-file="test.h" test.l 
test.l:50: bad character class 
```

有人可以指出错误是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T16:27:36.540

我想我看到了一个错字。

```
<S_dst_ip>\{{BINARY_PATTERN}\}|\{[0-255]\\.[0-255]\\.[0-255]\\.[0-255}\} 
```

应该：

```
<S_dst_ip>\{{BINARY_PATTERN}\}|\{[0-255]\\.[0-255]\\.[0-255]\\.[0-255]\} 
```

但除此之外，我认为角色类`[0-255]`不会完成你想要的。它将匹配单个数字 0、1、2 或 5。

# c++ - 能够将 C++ 类转换为 json。阿杜诺？

> ID：13618005
> 
> 赞同：0
> 
> 时间：2012-11-29T02:44:17.027
> 
> 标签：c++, json, arduino

首先，很抱歉，我不太了解 C++。我正在寻找一个能够从类创建 json 的 Arduino 库。有谁知道有没有这样的图书馆？aJson 不包括这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T15:47:57.423

我相信他的意思是他希望将数据定义为 C++ 类中的属性，并使它们成为要流式传输的 JSON 数据结构。为此，您要求进行某种内省。

所以你问的问题从一个不同但相关的问题开始，这里：

[如何向 C++ 应用程序添加反射？](https://stackoverflow.com/questions/41453/how-can-i-add-reflection-to-a-c-application)

对于结构：

[C++ 中的变量转储](https://stackoverflow.com/questions/740120/variable-dumping-in-c)

[使用带有 C 结构的 C++ 模板进行自省？](https://stackoverflow.com/questions/11353062/using-c-templates-with-c-structs-for-introspection)

# three.js - 三.js：在场景中间显示物体

> ID：13618007
> 
> 赞同：1
> 
> 时间：2012-11-29T02:44:24.093
> 
> 标签：three.js

我尝试用OBJLoader加载3D模型，成功了。模型是用三维建模软件绘制的，用转换软件转换成.obj格式。因为模型是绝对定位的，所以显示模型总是有问题。

在这种情况下，如何在场景中间显示对象并使模型看起来正常？

你能给我一些帮助，试图让这个工作。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T12:20:43.953

我会提出一些思路，但我不知道您所说的“显示模型总是有问题”和“使模型看起来正常”是什么意思。

在我对 Three.js 的（小）经验中，我偶然发现了两大类问题：
- 定位，即你最终得到不正确的坐标，比如太大/太小超出范围：为此，研究你的模型，计算并显示 Bounding Box 和/或 Bounding Sphere（尝试在浏览器的错误窗口中写入日志），并根据找到的值调整相机，
- 灯光，有时您会看到几乎不可见的黑底黑字显示：为此，从材质和灯光开始，环境为 {1,1,1}，因此模型在黑色背景上清晰地显示为纯白色，然后细化材质和灯光以提供所需的效果。

现在不能多说，直到我更准确地知道你的问题是什么......

用于输出错误日志的小代码：

```
function log(msg) {
    setTimeout(function() {
        throw new Error(msg);
    }, 0);
} 
```

像这样使用：

```
log('Radius = ' + radius); 
```

# gcc - 强制 GCC 在调用函数之前将参数压入堆栈（使用 PUSH 指令）

> ID：13618009
> 
> 赞同：0
> 
> 时间：2012-11-29T02:44:40.740
> 
> 标签：gcc, arguments, push, inline-assembly

我已经开始在 GCC/G++ 下开发一个小型的 16 位操作系统。我正在使用我在 Cygwin 下编译的 GCC 交叉编译器，我将 asm(".code16gcc\n") 作为每个 .CPP 文件的第一行，使用 Intel ASM 语法和用于编译和链接的命令行.CPP 文件如下所示：

```
G++: i586-elf-g++ -c $(CPP_FILE) -o $(OBJECT_OUTPUT) -nostdinc -ffreestanding -nostdlib -fno-builtin -fno-rtti -fno-exceptions -fpermissive -masm=intel

LD: i586-elf-ld -T $(LD_SCRIPT) $(OBJECT_OUTPUT) -o $(BINARY_OUTPUT) 
```

我目前面临的问题是 GCC 将函数调用代码转换为汇编的方式。

更具体地说，GCC 不是使用 PUSH 指令来传递参数，而是“计算”相对于参数应该位于的 ESP 的偏移量，然后使用 MOV 指令手动写入堆栈。

这对我没有好处，因为我依赖汇编代码中的 PUSH 指令。为了更清楚地说明我的问题，请使用以下两个功能：

```
void f2(int x);

void f1(){
    int arg = 8;
    asm("mov eax, 5");
    asm("push eax");
    f2(arg);
    asm("pop eax");
}
void f2(int x){
} 
```

在函数 f1 中，我使用 PUSH 指令保存 EAX，我希望在调用 f2 并执行“POP EAX”指令后将其恢复为 5。然而事实证明，EAX 变为 8，而不是 5。那是因为 GCC 生成的汇编代码看起来像这样（为了清楚起见，我也包含了源代码）：

```
void f1()
C++: {
    push ebp
    mov ebp,esp
    sub esp,byte +0x14

    C++: int arg = 8;
        mov dword [ebp-0x4],0x8

    C++: asm("mov eax, 5");
        mov eax,0x5

    C++: asm("push eax");
        push eax

    C++: f2(arg);
        mov eax,[ebp-0x4]
        mov [dword esp],eax =======>>>>>> HERE'S THE PROBLEM, WHY NOT 'PUSH EAX' ?!!
        call f2

    C++: asm("pop eax");
        pop eax

C++: }
    o32 leave
    o32 ret

void f2(int x)
C++: {
    push ebp
    mov ebp,esp
C++: }
    pop ebp
    o32 ret 
```

我曾尝试使用一些 G++ 编译标志，例如 -mpush-args 或 -mno-push-args 以及另一个我不记得但 GCC 仍然不想使用 PUSH 的标志。我正在使用的版本是`i586-elf-g++ (GCC) 4.7.2`（在 Cygwin 中重新编译的交叉编译器）。

先感谢您！

**更新**：这是我找到的网页：http: [//fixunix.com/linux/6799-gcc-function-call-pass-arguments-via-push.html](http://fixunix.com/linux/6799-gcc-function-call-pass-arguments-via-push.html)

考虑到它限制了内联汇编对复杂内容的可用性，这对 GCC 来说似乎真的很愚蠢。:(如果您有建议，请留下答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T03:49:16.293

我很幸运找到了解决这个问题的方法，但它最终完成了我想要它做的事情。以下是 4.7.2 版 GCC 手册的说明：

```
-mpush-args
-mno-push-args
Use PUSH operations to store outgoing parameters. This method is shorter
and usually equally fast as method using SUB/MOV operations and is enabled
by default. In some cases disabling it may improve performance because of
improved scheduling and reduced dependencies.

-maccumulate-outgoing-args
If enabled, the maximum amount of space required for outgoing arguments will
be computed in the function prologue. This is faster on most modern CPUs
because of reduced dependencies, improved scheduling and reduced stack usage
when preferred stack boundary is not equal to 2\. The drawback is a notable
increase in code size. This switch implies ‘-mno-push-args’. 
```

我说我很幸运，因为 -mpush-args 不起作用，而是“-mno-accumulate-outgoing-args”，它甚至没有记录！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-27T15:22:38.013

我最近有类似的问题，我猜人们并不觉得它很重要，我至少发现了 GCC 4.8.1 的未记录选项，不知道最新的 4.9 版本。

有人说他收到“警告：堆栈探测需要 -maccumulate-outgoing-args 以确保正确性 [默认启用]”错误消息。

要禁用堆栈探测，请使用 -mno-stack-arg-probe，因此我想通过这些选项以确保：

```
-mpush-args -mno-accumulate-outgoing-args -mno-stack-arg-probe 
```

对我来说，它现在可以工作了，它使用 PUSH，更小更好的代码，并且更容易使用 OllyDbg 进行调试。

# c - 创建通用循环缓冲区

> ID：13618012
> 
> 赞同：4
> 
> 时间：2012-11-29T02:44:55.537
> 
> 标签：c, circular-buffer

鉴于希望从其内容中抽象出循环缓冲区的结构，并从以下代码段开始（由[this](http://en.wikipedia.org/wiki/Circular_buffer "圆形缓冲器") wikipedia entry提供）：

```
typedef struct
{ 
    int value;
} ElemType;

typedef struct
{
    int         size;      /* total number of elements */
    int         start;     /* index of oldest element */
    int         count;     /* index at which to write new element  */
    ElemType   *elements;  /* vector of elements */
} CircularBuffer;

void cbInit(CircularBuffer *cb, int size) {
    cb->size  = size;
    cb->start = 0;
    cb->count = 0;
    cb->elements = (ElemType *)calloc(cb->size, sizeof(ElemType));
} 
```

如何抽象元素类型以便在定义 CircularBuffer 实例时指定它？到目前为止，我的尝试如下：

```
CircularBuffer *cbInit(uint16 size, void *element)
{
    CircularBuffer *buffer;

    buffer = malloc(sizeof(*buffer));

    if (buffer != NULL)
    {
        buffer->size = size;
        buffer->start = 0;
        buffer->count = 0;
        buffer->elements = (void *)calloc(size, sizeof(???));

        if (buffer->elements == NULL)
        {
            free(buffer);
            buffer = NULL;
        }
    }

    return buffer;
} 
```

但我不知道如何确定未知类型的大小，它可能是 int、struct 或介于两者之间的任何类型。我正在尝试做的事情甚至可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-29T02:53:13.330

正如您所发现的，您无法自动判断未知数据的大小。您将需要一个固定的元素类型（`void*`将是一个很好的通用选择），或者让用户传递每个元素的大小：

```
CircularBuffer *cbInit(uint16 size, int elementSize)
{
    ...
    buffer->elementSize = elementSize;
    buffer->elements    = calloc(size, elementSize);  
} 
```

# css - 如何制作和使用 LESS 模板？

> ID：13618013
> 
> 赞同：4
> 
> 时间：2012-11-29T02:44:55.280
> 
> 标签：css, less

我想大致了解如何制作和使用 LESS 模板。我猜一个模板应该由使用less @variables的css规则组成，当你简单地将该模板@import到另一个包含已定义变量的.less文件中时......是这样吗？有什么例子吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T02:51:39.997

你是对的！在这里查看文档：http: [//lesscss.org/#-importing](http://lesscss.org/#-importing)

然后你可以找到一些预编码的[mixin](http://lesscss.org/#-mixins)集合，你可以通过导入它们来重用它们，这里是一个例子：http: [//lesselements.com/](http://lesselements.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T09:19:42.837

看看 Bootstrap 的 less 文件结构 [https://github.com/twbs/bootstrap](https://github.com/twbs/bootstrap)

这是一个更好的例子

# php - 尝试使用 mysqli 编写查询时出现的通知

> ID：13618014
> 
> 赞同：0
> 
> 时间：2012-11-29T02:44:57.090
> 
> 标签：php, mysqli

下面我有一个代码，我正在尝试使用 mysqli 运行查询。

```
 if (isset($_POST['module']))
    {
        $query = "SELECT ModuleNo, ModuleName FROM Module WHERE ModuleId = ?";

        $stmt = $mysqli->prepare($query); //line 99

        $stmt->bind_param('s', $_POST['module'] );

        if ( $stmt->execute() )
        {   
            $stmt->bind_result($moduleno, $modulename); 

            $stmt->fetch();

}
    } 
```

问题是它给了我这两个未定义的错误：

```
Notice: Undefined variable: mysqli in ... on line 99 
Fatal error: Call to a member function prepare() on a non-object in ... on line 99 
```

我的问题是是什么导致了 mysqli 代码中的两个错误，因为我没有看到我编译的代码有问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T03:42:49.537

确保您`$mysqli`在脚本中正确设置。

# php - 使用 PHP 导航 XAMPP htdocs 文件 - Eclipse

> ID：13618016
> 
> 赞同：0
> 
> 时间：2012-11-29T02:45:02.590
> 
> 标签：php, eclipse, wordpress, xampp

我刚开始使用 wordpress 教程，我不熟悉使用 Eclipse-PHP。似乎 eclipse 作为编辑器比 notepad++ 更容易，所以我想学习如何使用 eclipse 编辑器。

我的问题是，弄清楚如何使用 Eclipse 简单地导航我的文件非常痛苦。如何使用 PHP-Eclipse 浏览我的 XAMPP 文件。

下图显示了导航器窗口的预期输出：

![在此处输入图像描述](../Images/c90c9cf58afb3ab3e1191e786bb2079b.png)

我将使用它在 xampp 的 localhost 服务器中自动更新我的 htdocs 文件。

[我在这里](https://stackoverflow.com/questions/8110063/publishing-php-files-from-eclipse-to-apache-htdocs)看到了链接，它提供了切换工作场所的说明，但我不知道如何浏览具有以下类别的文件：

![在此处输入图像描述](../Images/88cf916432f9a0cb339c859e46da8227.png)

请帮我解决这个问题，我正在探索 php eclipse 大约一个小时。

对于像我这样的初学者，您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T02:56:02.473

在 Eclipse 中，您创建“项目”而不是浏览整个文件系统。因此，在这种情况下，假设您有一个博客可以在`htdocs/theblog.com`.

您可以右键单击项目资源管理器窗口并“创建新项目”，然后选择适当的项目类型 - 在本例中为 PHP。然后，您将选择使用现有位置并以典型方式浏览到的选项`htdocs/theblog.com`。然后继续完成向导的其余部分。并完成。

然后 Eclipse 将索引该项目并运行一系列验证器和东西......本质上是“构建”项目。之后，您将在项目资源管理器窗格中看到该项目。您可以对所有单个项目重复此操作。

同样明智的是，您可以关闭和打开项目，以在您处理一个或另一个项目时不妨碍它们。

# python - 使用 Rscript.exe shell 在 Python 中执行 .R 脚本

> ID：13618020
> 
> 赞同：1
> 
> 时间：2012-11-29T02:45:19.337
> 
> 标签：python, r, rscript

我在以下路径本地保存了一个 .R 文件：

```
Rfilepath = "C:\\python\\buyback_parse_guide.r" 
```

RScript.exe 的命令是：

```
RScriptCmd = "C:\\Program Files\\R\\R-2.15.2\\bin\\Rscript.exe --vanilla" 
```

我尝试运行：

```
subprocess.call([RScriptCmd,Rfilepath],shell=True) 
```

但它返回 1 - 并且 .R 脚本没有成功运行。我究竟做错了什么？我是 Python 新手，所以这可能是一个简单的语法错误......我也尝试了这些，但它们都返回 1：

```
subprocess.call('"C:\Program Files\R\R-2.15.2\bin\Rscript.exe"',shell=True)

subprocess.call('"C:\\Program Files\\R\\R-2.15.2\\bin\\Rscript.exe"',shell=True)

subprocess.call('C:\Program Files\R\R-2.15.2\bin\Rscript.exe',shell=True)

subprocess.call('C:\\Program Files\\R\\R-2.15.2\\bin\\Rscript.exe',shell=True) 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T02:49:38.107

RScriptCmd 需要只是可执行文件，没有命令行参数。所以：

```
RScriptCmd = "\"C:\\Program Files\\R\\R-2.15.2\\bin\\Rscript.exe\"" 
```

然后 Rfilepath 实际上可以是所有参数 - 并重命名：

```
 RArguments = "--vanilla \"C:\\python\\buyback_parse_guide.r\"" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-16T16:56:37.070

看起来你和我有类似的问题。我不得不将 RScript 重新安装到没有空格的路径。

请参阅：[使用 os.system() 或 subprocess() 通过 Python 运行 Rscript](https://stackoverflow.com/questions/28514769/running-rscript-via-python-using-os-system-or-subprocess)

这就是我如何解决 Python 和 Rscript 之间的通信：

在 Python 中的一部分：

```
from subprocess import PIPE,Popen,call
p = subprocess.Popen([ path/to/RScript.exe, path/to/Script.R, Arg1], stdout=subprocess.PIPE, stderr=subprocess.PIPE, stdin=subprocess.PIPE)
out = p.communicate()
outValue = out[0] 
```

`outValue`包含执行 Script.R 后的输出值

在 R 脚本中的一部分：

```
args <- commandArgs(TRUE)
argument1 <- as.character(args[1])
...
write(output, stdout()) 
```

`output`是要发送到 Python 的变量

# c++ - 使用 C++ 从我的可执行文件中通过其资源 ID 获取图标索引

> ID：13618024
> 
> 赞同：2
> 
> 时间：2012-11-29T02:45:44.640
> 
> 标签：c++, windows, winapi, icons

我正在尝试使用 Visual Studio 编译的 C++ 中创建我的 GUI 应用程序的快捷方式。我正在使用[IShellLink::SetIconLocation](http://msdn.microsoft.com/en-us/library/windows/desktop/bb761047%28v=vs.85%29.aspx)方法来创建采用图标索引的链接。但问题是，当我只有来自 .res 文件的图标 ID 时，如何获取此索引？

```
#define IDR_ICON_CLEAR                  130 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-29T03:37:04.653

尝试使用资源 ID 的负值，即 -130。看看这篇 [文章](https://devblogs.microsoft.com/oldnewthing/20100505-00/?p=14153)，它解释了如何通过资源 ID 获取图标。

> 在 Windows 95 中，ExtractIcon 函数得到了增强，因此您还可以通过将它的负数作为图标索引传递它的资源 ID 来指定一个图标。换句话说，如果您在逗号后放置一个负数，则其绝对值将被解释为资源 ID。

# linux - 为什么没有分配给 pci 设备的 BAR 地址？

> ID：13618027
> 
> 赞同：1
> 
> 时间：2012-11-29T02:46:01.850
> 
> 标签：linux, linux-kernel, powerpc, pci

问题描述如下：
linux 启动后，运行命令“lspci -v”，我们可以看到 pci 设备可以找到，但没有分配地址给设备。通过进一步检查 linux 启动消息，可以发现许多类似“bridge window mem ...”的消息。不确定这些消息是正常的还是实际上是地址分配失败的迹象。

我正在运行的处理器是飞思卡尔 p2010，它是 powerpc 架构。bootloader是我们自己设计的，没有接触pci相关的东西。所以我们完全依赖Linux内核自己做完整的pci枚举。

在 Linux 内核 pci 枚举开始之前，我们唯一做的就是为 pci 空间使用配置一个 LAW 窗口（特别是 LAW4）。此外，当然，根据我们的硬件配置对 dts 文件进行适当的修改。我们认为完成所有这些准备后，Linux 内核应该能够使所有 pci 东西正常工作，但事实并非如此。

那么，有没有人知道如何解决这个问题或曾经遇到过类似的问题并且可以对此有所了解？非常感谢！

更多信息附在下面：
========内核启动参数===============

```
root=/dev/ram rw ip=off console=ttyS0,9600 
```

========dts中的PCI部分设置=======

```
pci0: pcie@fbf0a000 {
    interrupt-map-mask = <0xf800 0x0 0x0 0x7>;
    interrupt-map = <
        00000 0x0 0x0 0x1 &mpic 0x0 0x1
        00000 0x0 0x0 0x2 &mpic 0x1 0x1
        00000 0x0 0x0 0x3 &mpic 0x2 0x1
        00000 0x0 0x0 0x4 &mpic 0x3 0x1>;

    interrupt-parent = <&mpic>;
    interrupts = <26 2>;
    bus-range = <0 255>;
    ranges = <0x2000000 0x0 0x80000000 0x80000000 0x0 0x40000000
          0x1000000 0x0 0x0 0xd3000000 0x0 0x100000>;
    clock-frequency = <33333333>;
    #interrupt-cells = <1>;
    #size-cells = <2>;
    #address-cells = <3>;
    reg = <0xfbf0a000 0x1000>;
    compatible = "fsl,mpc8548-pcie";
    device_type = "pci";
        fsl,pcie-access-big-endian;

    pcie@0 {
        reg = <0x0 0x0 0x0 0x0 0x0>;
        #size-cells = <2>;
        #address-cells = <3>;
        device_type = "pci";
        ranges = <0x2000000 0x0 0x80000000
              0x2000000 0x0 0x80000000
              0x0 0x40000000

              0x1000000 0x0 0x0
              0x1000000 0x0 0x0
              0x0 0x100000>;
    };
}; 
```

==============“lspci -v”的结果===============

```
# lspci -v
0000:00:00.0 Class 0b20: 1957:007b (rev 21)
        !!! Invalid class 0b20 for header type 01
        Flags: bus master, fast devsel, latency 0
        Memory at <ignored> (32-bit, non-prefetchable)
        Bus: primary=00, secondary=01, subordinate=07, sec-latency=0
        I/O behind bridge: 00000000-00000fff
        Memory behind bridge: 00000000-000fffff
        Prefetchable memory behind bridge: 0000000000000000-0000000000000000
        Capabilities: [44] Power Management version 2
        Capabilities: [4c] #10 [0041]

0000:01:00.0 Class 0604: 10b5:8606 (rev ba)
        Flags: bus master, fast devsel, latency 0
        Bus: primary=01, secondary=02, subordinate=07, sec-latency=0
        Capabilities: [40] Power Management version 3
        Capabilities: [48] Message Signalled Interrupts: 64bit+ Queue=0/2 Enable+
        Capabilities: [68] #10 [0052]
        Capabilities: [a4] #0d [0000]

0000:02:01.0 Class 0604: 10b5:8606 (rev ba)
        Flags: bus master, fast devsel, latency 0
        Bus: primary=02, secondary=03, subordinate=03, sec-latency=0
        Capabilities: [40] Power Management version 3
        Capabilities: [48] Message Signalled Interrupts: 64bit+ Queue=0/2 Enable+
        Capabilities: [68] #10 [0162]
        Capabilities: [a4] #0d [0000]

0000:02:04.0 Class 0604: 10b5:8606 (rev ba)
        Flags: bus master, fast devsel, latency 0
        Bus: primary=02, secondary=04, subordinate=04, sec-latency=0
        Capabilities: [40] Power Management version 3
        Capabilities: [48] Message Signalled Interrupts: 64bit+ Queue=0/2 Enable+
        Capabilities: [68] #10 [0162]
        Capabilities: [a4] #0d [0000]

0000:02:05.0 Class 0604: 10b5:8606 (rev ba)
        Flags: bus master, fast devsel, latency 0
        Bus: primary=02, secondary=05, subordinate=05, sec-latency=0
        Capabilities: [40] Power Management version 3
        Capabilities: [48] Message Signalled Interrupts: 64bit+ Queue=0/2 Enable+
        Capabilities: [68] #10 [0162]
        Capabilities: [a4] #0d [0000]

0000:02:07.0 Class 0604: 10b5:8606 (rev ba)
        Flags: bus master, fast devsel, latency 0
        Bus: primary=02, secondary=06, subordinate=06, sec-latency=0
        Capabilities: [40] Power Management version 3
        Capabilities: [48] Message Signalled Interrupts: 64bit+ Queue=0/2 Enable+
        Capabilities: [68] #10 [0162]
        Capabilities: [a4] #0d [0000]

0000:02:09.0 Class 0604: 10b5:8606 (rev ba)
        Flags: bus master, fast devsel, latency 0
        Bus: primary=02, secondary=07, subordinate=07, sec-latency=0
        Capabilities: [40] Power Management version 3
        Capabilities: [48] Message Signalled Interrupts: 64bit+ Queue=0/2 Enable+
        Capabilities: [68] #10 [0162]
        Capabilities: [a4] #0d [0000]

0000:03:00.0 Class 0580: 10ee:7011
        Subsystem: 10ee:0007
        Flags: fast devsel, IRQ 17
        Capabilities: [40] Power Management version 3
        Capabilities: [48] Message Signalled Interrupts: 64bit+ Queue=0/0 Enable-
        Capabilities: [60] #10 [0002]

0000:04:00.0 Class 0580: 10ee:7011
        Subsystem: 10ee:0007
        Flags: fast devsel, IRQ 16
        Capabilities: [40] Power Management version 3
        Capabilities: [48] Message Signalled Interrupts: 64bit+ Queue=0/0 Enable-
        Capabilities: [60] #10 [0002]

0000:05:00.0 Class 0200: 14e4:8372 (rev 13)
        Subsystem: 14e4:8372
        Flags: fast devsel, IRQ 17
        Memory at <ignored> (64-bit, non-prefetchable)
        Capabilities: [48] Power Management version 3
        Capabilities: [50] Vital Product Data
        Capabilities: [58] Message Signalled Interrupts: 64bit+ Queue=0/3 Enable-
        Capabilities: [ac] #10 [0002]

0000:06:00.0 Class 0200: 14e4:8372 (rev 13)
        Subsystem: 14e4:8372
        Flags: fast devsel, IRQ 18
        Memory at <ignored> (64-bit, non-prefetchable)
        Capabilities: [48] Power Management version 3
        Capabilities: [50] Vital Product Data
        Capabilities: [58] Message Signalled Interrupts: 64bit+ Queue=0/3 Enable-
        Capabilities: [ac] #10 [0002]

# 
```

=======================Linux内核启动消息====================

```
irq: irq 47 on host /soc@fbf00000/pic@40000 mapped to virtual irq 47
PCI: Probing PCI hardware
pci 0000:00:00.0: ignoring class b20 (doesn't match header type 01)
pci 0000:00:00.0: supports D1 D2
pci 0000:00:00.0: PME# supported from D0 D1 D2 D3hot D3cold
pci 0000:00:00.0: PME# disabled
pci 0000:01:00.0: reg 10: [mem 0x00000000-0x0001ffff]
pci 0000:01:00.0: PME# supported from D0 D3hot D3cold
pci 0000:01:00.0: PME# disabled
pci 0000:00:00.0: PCI bridge to [bus 01-ff]
pci 0000:00:00.0:   bridge window [io  0x0000-0x0000] (disabled)
pci 0000:00:00.0:   bridge window [mem 0x00000000-0x000fffff] (disabled)
pci 0000:00:00.0:   bridge window [mem 0x00000000-0x000fffff pref] (disabled)
irq: irq 0 on host /soc@fbf00000/pic@40000 mapped to virtual irq 16
pci 0000:02:01.0: PME# supported from D0 D3hot D3cold
pci 0000:02:01.0: PME# disabled
pci 0000:02:04.0: PME# supported from D0 D3hot D3cold
pci 0000:02:04.0: PME# disabled
pci 0000:02:05.0: PME# supported from D0 D3hot D3cold
pci 0000:02:05.0: PME# disabled
pci 0000:02:07.0: PME# supported from D0 D3hot D3cold
pci 0000:02:07.0: PME# disabled
pci 0000:02:09.0: PME# supported from D0 D3hot D3cold
pci 0000:02:09.0: PME# disabled
pci 0000:01:00.0: PCI bridge to [bus 02-ff]
pci 0000:01:00.0:   bridge window [io  0xf000-0x0000] (disabled)
pci 0000:01:00.0:   bridge window [mem 0xfff00000-0x000fffff] (disabled)
pci 0000:01:00.0:   bridge window [mem 0xfff00000-0x000fffff pref] (disabled)
irq: irq 1 on host /soc@fbf00000/pic@40000 mapped to virtual irq 17
irq: irq 3 on host /soc@fbf00000/pic@40000 mapped to virtual irq 18
pci 0000:03:00.0: reg 10: [mem 0x00000000-0x00003fff]
pci 0000:03:00.0: PME# supported from D0 D1 D2 D3hot
pci 0000:03:00.0: PME# disabled
pci 0000:02:01.0: PCI bridge to [bus 03-ff]
pci 0000:02:01.0:   bridge window [io  0xf000-0x0000] (disabled)
pci 0000:02:01.0:   bridge window [mem 0xfff00000-0x000fffff] (disabled)
pci 0000:02:01.0:   bridge window [mem 0xfff00000-0x000fffff pref] (disabled)
pci 0000:04:00.0: reg 10: [mem 0x00000000-0x00003fff]
pci 0000:04:00.0: PME# supported from D0 D1 D2 D3hot
pci 0000:04:00.0: PME# disabled
pci 0000:02:04.0: PCI bridge to [bus 04-ff]
pci 0000:02:04.0:   bridge window [io  0xf000-0x0000] (disabled)
pci 0000:02:04.0:   bridge window [mem 0xfff00000-0x000fffff] (disabled)
pci 0000:02:04.0:   bridge window [mem 0xfff00000-0x000fffff pref] (disabled)
pci 0000:05:00.0: reg 10: [mem 0x80400000-0x8043ffff 64bit]
pci 0000:05:00.0: PME# supported from D0 D3hot D3cold
pci 0000:05:00.0: PME# disabled
pci 0000:02:05.0: PCI bridge to [bus 05-ff]
pci 0000:02:05.0:   bridge window [io  0xf000-0x0000] (disabled)
pci 0000:02:05.0:   bridge window [mem 0xfff00000-0x000fffff] (disabled)
pci 0000:02:05.0:   bridge window [mem 0xfff00000-0x000fffff pref] (disabled)
pci 0000:06:00.0: reg 10: [mem 0x80500000-0x8053ffff 64bit]
pci 0000:06:00.0: PME# supported from D0 D3hot D3cold
pci 0000:06:00.0: PME# disabled
pci 0000:02:07.0: PCI bridge to [bus 06-ff]
pci 0000:02:07.0:   bridge window [io  0xf000-0x0000] (disabled)
pci 0000:02:07.0:   bridge window [mem 0xfff00000-0x000fffff] (disabled)
pci 0000:02:07.0:   bridge window [mem 0xfff00000-0x000fffff pref] (disabled)
pci 0000:02:09.0: PCI bridge to [bus 07-ff]
pci 0000:02:09.0:   bridge window [io  0xf000-0x0000] (disabled)
pci 0000:02:09.0:   bridge window [mem 0xfff00000-0x000fffff] (disabled)
pci 0000:02:09.0:   bridge window [mem 0xfff00000-0x000fffff pref] (disabled)
PCI: Cannot allocate resource region 0 of device 0000:05:00.0, will remap
PCI: Cannot allocate resource region 0 of device 0000:06:00.0, will remap
pci 0000:01:00.0: BAR 8: can't assign mem (size 0x400000)
pci 0000:01:00.0: BAR 0: can't assign mem (size 0x20000)
pci 0000:02:01.0: BAR 8: can't assign mem (size 0x100000)
pci 0000:02:04.0: BAR 8: can't assign mem (size 0x100000)
pci 0000:02:05.0: BAR 8: can't assign mem (size 0x100000)
pci 0000:02:07.0: BAR 8: can't assign mem (size 0x100000)
pci 0000:03:00.0: BAR 0: can't assign mem (size 0x4000)
pci 0000:02:01.0: PCI bridge to [bus 03-03]
pci 0000:02:01.0:   bridge window [io  disabled]
pci 0000:02:01.0:   bridge window [mem disabled]
pci 0000:02:01.0:   bridge window [mem pref disabled]
pci 0000:04:00.0: BAR 0: can't assign mem (size 0x4000)
pci 0000:02:04.0: PCI bridge to [bus 04-04]
pci 0000:02:04.0:   bridge window [io  disabled]
pci 0000:02:04.0:   bridge window [mem disabled]
pci 0000:02:04.0:   bridge window [mem pref disabled]
pci 0000:05:00.0: BAR 0: can't assign mem (size 0x40000)
pci 0000:02:05.0: PCI bridge to [bus 05-05]
pci 0000:02:05.0:   bridge window [io  disabled]
pci 0000:02:05.0:   bridge window [mem disabled]
pci 0000:02:05.0:   bridge window [mem pref disabled]
pci 0000:06:00.0: BAR 0: can't assign mem (size 0x40000)
pci 0000:02:07.0: PCI bridge to [bus 06-06]
pci 0000:02:07.0:   bridge window [io  disabled]
pci 0000:02:07.0:   bridge window [mem disabled]
pci 0000:02:07.0:   bridge window [mem pref disabled]
pci 0000:02:09.0: PCI bridge to [bus 07-07]
pci 0000:02:09.0:   bridge window [io  disabled]
pci 0000:02:09.0:   bridge window [mem disabled]
pci 0000:02:09.0:   bridge window [mem pref disabled]
pci 0000:01:00.0: PCI bridge to [bus 02-07]
pci 0000:01:00.0:   bridge window [io  disabled]
pci 0000:01:00.0:   bridge window [mem disabled]
pci 0000:01:00.0:   bridge window [mem pref disabled]
pci 0000:00:00.0: not setting up bridge for bus 0000:01
pci_bus 0000:00: resource 0 [io  0xffafd000-0xffbfcfff]
pci_bus 0000:00: resource 1 [mem 0x80000000-0xbfffffff]
Registering qe_ic with sysfs...
bio: create slab <bio-0> at 0
vgaarb: loaded
Generic PHY: Registered new driver 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-04-11T13:33:51.937

在我们的 SuperMicro 之一上：启用以下 BIOS 选项：

高级 -> PCIe/PCI/PnP 配置：

```
PCI PERR/SERR Support   - Enabled    - event log pci errors.

Above 4G Decoding       - Enabled    - 64bit O/S and many pcie devices.

SR-IOV Support          - Enabled    - Linux gets dmesg "no space for" errs. 
```

第一个是建议...

# scala - 覆盖 bang (!) 运算符。查找发件人

> ID：13618035
> 
> 赞同：0
> 
> 时间：2012-11-29T02:47:11.197
> 
> 标签：scala

当我在 Scala 中重写 bang (!) 运算符时，它会在作为消息接收者的 actor 上调用。有没有办法可以找出是谁在覆盖的 bang 运算符中将此消息发送给了这个演员？

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T07:33:36.150

请在此处查看如何覆盖 bang 运算符的行为。在您的特定情况下，您可以通过将原始消息包装在包含发件人的信封中来覆盖它。

> > [如何在 scala 中为不同类型的输入覆盖 bang 运算符（！）](https://stackoverflow.com/questions/13428419/how-to-override-bang-operator-for-different-type-of-inputs-in-scala/13429976#13429976)
> > 
> > [如何在 Scala Actor 模型中重载 bang(!) 运算符？](https://stackoverflow.com/questions/13371797/how-to-overload-bang-operator-in-scala-actor-model)

另外，请注意 Scala 2.9 的演员 API 将被弃用。考虑改用[Akka](http://akka.io/)，它确实提供了您正在寻找的功能。

# javascript - 加载时停止执行页面

> ID：13618038
> 
> 赞同：0
> 
> 时间：2012-11-29T02:47:28.060
> 
> 标签：javascript, asp.net

实际上，当单击提交按钮时，如果页面加载数据的时间过长，我想为用户提供一个“取消按钮”以停止加载。我在下面写了一些代码，但是在加载大数据时它不起作用。

```
Loading...Please wait a moment...<br/>
<input id="btnModules_Cancel" type="button" value="Cancel" 
  onclick="window.location.href=document.URL;"/> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T03:00:20.370

当用户单击取消按钮时会发生什么？我是说，你想将用户重定向到不同的页面吗？
如果您正在执行 Ajax 请求，您可以尝试使用[abort()](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest?redirectlocale=en-US&redirectslug=XMLHttpRequest#abort%28%29)方法`XMLHttpRequest`

此外，如果您希望服务器停止处理您的请求，您可以尝试使用[IsClientConnected](http://msdn.microsoft.com/en-us/library/system.web.httpresponse.isclientconnected.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T08:04:53.440

After a few hours, I found this works great for me.

Changed `onclick="window.location.href=document.URL;"` To `onclick="StopLoading();"`

```
function StopLoading() {
    if (navigator.appName == 'Microsoft Internet Explorer') {
        document.execCommand('Stop');
    } else {
        window.stop();
    }
    alert('Operation Aborted.');
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-29T03:00:54.613

```
<input type="button" value="Stop" onclick="window.stop();" /> 
```

停止加载..如果您想停止然后重定向到其他页面，您可以在脚本中创建一个函数。

[http://www.w3resource.com/javascript/client-object-property-method/window-stop.php](http://www.w3resource.com/javascript/client-object-property-method/window-stop.php)

```
function stopLoad(){
    window.stop(); //stop loading the page
    window.location = "url.asp"; //takes you somewhere
} 
```

通过..执行功能

```
 <input type="button" value="Stop" onclick="stopLoad()" /> 
```

# php - 关闭后 IntelliJ PHP 应用程序丢失模块

> ID：13618039
> 
> 赞同：4
> 
> 时间：2012-11-29T02:47:30.650
> 
> 标签：php, intellij-idea

不知道如何解决此问题。我有一个 IntelliJ Ultimate Edition，用于 64 位，我将它用于具有多个模块的 PHP 项目。这个项目有3个模块，但是每次关闭Intellij 11，当我再次打开IntelliJ时，发现模块已经消失了。

我用来添加此 PHP 模块的步骤：文件->添加模块->从现有源创建模块，然后选择包含模块的目录。或 File->Add Module_>Import Module from IML（我已经尝试为消失的模块导入模块级 IML 文件），但无论我尝试哪个，我仍然无法在我的重启时保留第三个模块IntelliJ 和我最终不得不再次添加模块。

编辑：解决此问题的一个技巧是将**顶级 IML**文件导入您的项目。IntelliJ 将重新组织项目以显示文件夹的整个树结构。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T02:50:02.887

PHPStorm 比 IntelliJ Ultimate 更有效地处理这个问题。我想说，这是它不比 PHPStorm 本身更好的唯一方法。

这并不直观，但您需要做的是在包含现有源代码的目录中[创建一个新项目，然后选择“Web Module”。](http://www.jetbrains.com/idea/webhelp/php-specific-guidelines.html)

# javascript - 检查 Bakcspace 或删除键

> ID：13618041
> 
> 赞同：1
> 
> 时间：2012-11-29T02:48:06.023
> 
> 标签：javascript, textarea, keycode, onkeydown

我正在玩一个 textarea 并试图使它成为用户不能超过 maxLength 除非按下的键是退格键或删除键。问题是我的 keyCode 条件总是出来为真。这是为什么？

```
var maxLength = 500;
window.onload = init;                // this seems to be a problem
commentBox.onkeydown = checkLength;

function checkLength(e)
{
    var evt = e || window.event;

    if(countText() < maxLength) //countText successfully returns number of nonwhitespace text.
        return true;
    else if(evt.keyCode == 46 || evt.keycode == 8)  // 46 = delete, 8 = backspace.
        return true;
    else
        return false;
} 
```

这是一个[JSFiddle](http://jsfiddle.net/3E7Ve/3/)以帮助更好地理解。删除键在 JSFiddle 中有效，但由于某种原因在本地无效。另一方面，删除仍然不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T03:05:52.050

终于找到了......

您正在使用**evt.keycode**这是一个小的拼写错误

```
 else if(evt.keyCode == 46 || evt.keyCode == 8)  // 46 = delete, 8 = backspace. 
```

干杯

# dart - 有没有教如何在 Dart 中使用 Web 组件的 codelab？

> ID：13618046
> 
> 赞同：3
> 
> 时间：2012-11-29T02:48:26.103
> 
> 标签：dart, web-component

听说有个 codelab 教你如何在 Dart 中使用 Web Components？真的吗？如果是这样，如果我被卡住了怎么办？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-29T02:50:31.977

是的！这是真的！我知道，因为我是写它的人！

这是代码实验室的 PDF：[https ://github.com/dart-lang/web-ui-code-lab/blob/master/dart_web_ui_codelab.pdf?raw=true](https://github.com/dart-lang/web-ui-code-lab/blob/master/dart_web_ui_codelab.pdf?raw=true)

下面是 codelab 的源代码：[https ://github.com/dart-lang/web-ui-code-lab](https://github.com/dart-lang/web-ui-code-lab)

如果您有任何问题，只需使用“dart”标签将您的问题发布到 Stack Overflow！

快乐黑客！

# xquery - Marklogic：添加响应标头所需的权限

> ID：13618047
> 
> 赞同：2
> 
> 时间：2012-11-29T02:48:29.170
> 
> 标签：xquery, marklogic

当我尝试将响应头设置`content disposition`为附件并给它一个文件名（考虑`abc.xlsx`）时，marklogic 会抛出一条异常消息，说明设置响应头所需的权限。对于应用程序，我设置`Authentication`为`application-level`，因为我无法将其设置为基本或摘要或其他任何内容。那么可能的替代品清单是什么？我想向最终用户提示下载对话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T03:26:04.843

转到管理 UI 并找到您的应用服务器正在运行的用户的名称。默认情况下，可能没有人。然后转到管理 UI 中的安全部分，找到用户，并授予该用户设置响应标头的权限。或者，您可以使用已经拥有该权限的其他用户（或者您可以创建一个新用户）。

# c# - MS 在 c#/.net 中访问 MDB 到 Sqlite

> ID：13618053
> 
> 赞同：2
> 
> 时间：2012-11-29T02:49:02.760
> 
> 标签：c#, .net, sqlite, ms-access

我可以通过仅使用 c#/.net 将 MSAccess MBD 文件（仅一个表）导出到 Sqlite（实体框架）。我只想务实地做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T02:50:55.260

当然，对 MS Access 使用 OLE DB 提供程序，对 SQLite 使用实体框架。这是Access 部分[的示例，](http://www.dscripts.net/2009/01/20/connect-to-microsoft-access-mdb-database-using-csharp/)[这是](http://www.codeproject.com/Articles/236918/Using-SQLite-embedded-database-with-entity-framewo)SQLite的示例

# r - arrayInd 显示 which.max 结果的一些列

> ID：13618056
> 
> 赞同：0
> 
> 时间：2012-11-29T02:49:20.533
> 
> 标签：r, indexing

我很确定我应该能够使用 arrayInd() 来做到这一点，但我仍然围绕着 R，我在这里错过了一些基本的东西。

我有一个包含两个日期列的数据框。我用它们之间的差异计算了一个新列。所以现在我有`df$before_date`和。`df$after_date``df$days_out`

我可以这样做来查看最大值和最小值的索引`df$days_out`：

```
> which.min(df$days_out)
[1] 18704
> which.max(df$days_out)
[1] 80183 
```

然后我可以通过查看日期信息：

```
> df[80183, 5]
[1] "1973-12-17"
> df[80183, 6]
[1] "2010-08-13"
> df[80183, 12]
Time difference of 13388 days 
```

我正试图一口气弄清楚如何做到这一点，所以我会得到如下结果：

```
 df$before_date    df$after_date    df$days_out
[80183]  1973-12-17        2010-08-13       13388 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T02:56:15.773

也许是这样的？

```
df[80183, c(5,6,12)] 
```

或者您可以一次性计算最大值和最小值：

```
df[
  c(which.max(df$days_out),which.min(df$days_out)), 
  c('days_out','before_date','after_date')
  ] 
```

# c++ - 数据拼接时输出成员变量c++

> ID：13618065
> 
> 赞同：0
> 
> 时间：2012-11-29T02:50:06.720
> 
> 标签：c++, inheritance, operator-overloading, splice, member-access

您好我目前面临一个问题，我想从 2 个单独的类输出数据，一个是基类，一个是派生类，我想重载 << 运算符以一次输出所有数据，但似乎有麻烦所以，我有这样的事情：

```
#include <iostream>
using namespace std;

class A
{
    char* A;
    char* B;

public:
    A() {A = ' '; B = ' ';}
    A(char* pLast, char* pFirst)
    {

        A = new char [strlen(pLast) + 1];
        B = new char [strlen(pFirst) + 1];

        strcpy(A,pLast);
        strcpy(B,pFirst);
    };
}

class C:public A
{
    int X;
    char Y;
    int Z;
public:
    C(char* A, char* B, int X, char Y, int Z)
        :A(A,B)
    {
        //do stuff here
    }
    friend std::ostream& operator<<(std::ostream& out, const C& outPut)
    {
        out << outPut.A << "," << outPut.B << "," <<outPut.X<< "," << outPut.Y << "," << outPut.Z << endl;
        return out;
    }
}; 
```

当我尝试运行它时，它告诉我 A 和 B 超出范围这是有道理的，因为这些成员在 A 类中是私有的，我不知道如何解决这个问题。我尝试创建 getter 方法来访问 A 和 B，但数据显示为空白。我什至尝试将 A 类的对象添加为 B 类的成员，以尝试允许访问 B 类中的成员，但数据仍然为空白。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T03:08:16.837

有几种方法可以解决这个问题。一种方法显然是使成员`A`受保护而不是私有。然后派生类`B`可以访问它们。

另一种方式确实是吸气剂功能。它们对您不起作用的事实与您的构造函数中的问题和代码中的其他问题有关。但是公共 getter 也有一个缺点，即使*任何人*（不仅仅是派生类）都可以访问您的数据成员的值。

这是第三种方法，我认为这对您的情况有意义：定义一个单独`operator<<`的 in `A`，并在定义 for 时使用该运算符`B`：

```
#include <cstring>
#include <iostream>

using namespace std;

class A
{
  char* _a;
  char* _b;
public:
  A()
    : _a(),_b()
  { }

  A(const char *pLast, const char *pFirst)
    : _a(new char [std::strlen(pLast)]),
      _b(new char [std::strlen(pFirst)])
  {
    strcpy(_a,pLast);
    strcpy(_b,pFirst);
  }

  friend std::ostream& operator<<(std::ostream& out, const A& obj) 
  {
    out << obj._a << "," << obj._b;
    return out;
  }
};

class B : public A
{
  int  _x;
  char _y;
  int  _z;

public:
  B(const char *pLast, const char *pFirst, int x, char y, int z)
    : A(pLast,pFirst),
      _x(x),_y(y),_z(z)
  { }

  friend std::ostream& operator<<(std::ostream& out, const B& obj)
  {
    out << static_cast<const A&>(obj) << ','
        << obj._x << ','
        << obj._y << ','
        << obj._z;
    return out;
  }
};

int main()
{
  B b("hello","world",1,'a',3);
  std::cout << b << std::endl;
  return 0;
} 
```

我还纠正了我发现的其他问题，所以上面的方法确实有效。

# android - 如何在 Android 中自定义 ListView 选择

> ID：13618066
> 
> 赞同：0
> 
> 时间：2012-11-29T02:50:10.300
> 
> 标签：android, android-listview

想自定义listView中item的选择效果，不知道怎么弄。

如果我应该在用户选择项目时使用不同的 png 更改选择项目背景，这将很有用。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T03:47:59.907

您正在寻找的是选择器在 res 中创建一个选择器 xml，并将列表项的背景设置为选择器 xml。例子：

`<?xml version="1.0" encoding="utf-8"?> <selector xmlns:android="http://schemas.android.com/apk/res/android"> <item android:state_pressed="true" android:drawable="@drawable/selected" /> <item android:drawable="@drawable/normal" /> </selector>` 

另请查看：http: [//developer.android.com/guide/topics/resources/drawable-resource.html#StateList](http://developer.android.com/guide/topics/resources/drawable-resource.html#StateList)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T04:52:33.353

为此使用选择器：

```
<ListView android:id="@+id/list" 
      android:layout_width="fill_parent"
      android:layout_height="wrap_content" 
      android:layout_gravity="center"
      android:divider="@null" 
      android:dividerHeight="0dip"
      android:listSelector="@drawable/list_selector" /> 
```

选择器：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_focused="true" 
        android:state_pressed="false"
        android:drawable="@drawable/yourdrawable" />
    <item android:state_focused="true" 
        android:state_pressed="true"
        android:drawable="@drawable/yourdrawable" />
    <item android:state_focused="false" 
        android:state_pressed="true"
        android:drawable="@drawable/yourdrawable" />
    <item android:drawable="@drawable/yourdrawable" />
</selector> 
```

这是一个[很好的教程](http://android-journey.blogspot.jp/2009/12/android-selectors.html)。

# php - PHP正则表达式匹配字符串的最后一次出现

> ID：13618077
> 
> 赞同：4
> 
> 时间：2012-11-29T02:52:10.837
> 
> 标签：php, regex, preg-match, preg-split

我的字符串是`$text1 = 'A373R12345'`
我想找到这个字符串最后没有出现的数字。
所以我使用这个正则表达式`^(.*)[^0-9]([^-]*)`
然后我得到了这个结果：
1.A373
2.12345

但我的预期结果是：
1.A373R
（它有'R'）
2.12345

另一个例子是`$text1 = 'A373R+12345'`
然后我得到了这个结果：
1.A373R
2.12345

但我的预期结果是：
1.A373R+
（它有'+'）
2.12345

我想包含最后一个无数字！
请帮忙 ！！谢谢！！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-29T02:59:52.083

```
$text1 = 'A373R12345';
preg_match('/^(.*[^\d])(\d+)$/', $text1, $match);
echo $match[1]; // A373R
echo $match[2]; // 12345

$text1 = 'A373R+12345';
preg_match('/^(.*[^\d])(\d+)$/', $text1, $match);
echo $match[1]; // A373R+
echo $match[2]; // 12345 
```

正则表达式分解的解释：

```
^ match from start of string
(.*[^\d]) match any amount of characters where the last character is not a digit 
(\d+)$ match any digit character until end of string 
```

![在此处输入图像描述](../Images/ec5c4da3820b1522528412dcc8480e35.png)

# sql - 查询外键列可以为 NULL 的位置

> ID：13618078
> 
> 赞同：7
> 
> 时间：2012-11-29T02:52:11.743
> 
> 标签：sql, postgresql, null, left-join

`orgid = 2`如果或根本没有行，我想获取数据`uid`。`orgid`是一个`integer`。我能想到的最接近的事情是做，`IS NULL`但我没有得到`uid`没有`orgid`行的数据。任何想法？

```
select u.uid,u.fname,u.lname from u 
inner join u_org on u.uid = u_org.uid 
inner join login on u.uid = login.uid 
where u_org.orgid=2 or u_org.orgid is NULL 
and login.access != 4; 
```

基本上`OR`是如果`u_org.orgid`行不存在。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T03:22:56.233

如果“uid 根本没有行”，并且您`JOIN`喜欢这样做，则结果将*没有行*。改用[**`LEFT [OUTER] JOIN`**](http://www.postgresql.org/docs/current/interactive/sql-select.html#SQL-FROM)：

```
SELECT u.uid, u.fname, u.lname
FROM   u 
LEFT   JOIN u_org o ON u.uid = o.uid 
LEFT   JOIN login l ON u.uid = l.uid 
WHERE (o.orgid = 2 OR o.orgid IS NULL)
AND    l.access IS DISTINCT FROM 4; 
```

此外，由于[**运算符优先级**](http://www.postgresql.org/docs/current/interactive/sql-syntax-lexical.html#SQL-PRECEDENCE)，您需要我添加的括号。（`AND`之前绑定`OR`）。

我在最后一个 WHERE 条件中使用`IS DISTINCT FROM`而不是，`!=`因为再次`login.access`可能是`NULL`，这不符合条件。

但是，由于您似乎只对表中的列感兴趣`u`，所以这个替代查询会更优雅：

```
SELECT u.uid, u.fname, u.lname
FROM   u
WHERE (u.uid IS NULL OR EXISTS (
   SELECT 1
   FROM   u_org o
   WHERE  o.uid = u.uid
   AND    o.orgid = 2
   ))
AND NOT EXISTS (
   SELECT 1
   FROM   login l
   WHERE  l.uid = u.uid
   AND    l.access = 4
   ); 
```

这种替代方案还有一个额外的优势，即您总是从 中获得一行*，*`u`即使在`u_org`or中有多行`login`。

# perl - 如何将文件拖放到 perl 脚本中以解析它并将输出文件写入同一目录

> ID：13618079
> 
> 赞同：2
> 
> 时间：2012-11-29T02:52:27.580
> 
> 标签：perl, parsing, drag-and-drop, par

我有一个工作 perl 脚本，它打开一个输入文件，解析它，然后打开一个输出文件并将解析的输出写入它。现在我希望能够将文件拖放为脚本。应该读取该文件，写入的文件应该具有相同的名称但扩展名不同，并存储在删除文件的同一目录（！）中。脚本本身使用 PAR:Packer 转换为 exe。我正在使用 Windows 7 和最新版本的 Strawbery Perl (5.16.2)

我检查文件名的方式是：

```
unless ($#ARGV == -1) {
    $filename = $ARGV[0];
} 
```

这就是我打开输入文件的方式：

```
open (my $mel, "<", $filename) or die "\nFile does not exist.\n"; 
```

这就是我打开输出文件的方式：

```
open (my $out, ">", 'majorEventLog.Prs') or die "Can't open output file: $!"; 
```

我面临的问题是输入文件根本无法识别。其次，我需要做什么才能在同一目录中创建输出文件？当我创建一个 cmd 文件时，输入文件可以工作，但它将输出文件存储在我的主目录中。但我不喜欢使用 CMD，而且我也希望输出文件与输入文件位于同一目录中。我需要如何更改我的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T10:38:22.020

使用它来获取输入文件名：

```
my $filename = shift;
die ("Please provide input file\n") unless defined $filename;
die ("$filename does not exist\n")  unless -f $filename; 
```

使用它在同一目录中生成输出文件名：

```
use File::Basename;
use File::Spec;

my ($name, $directory, $suffix) = fileparse($filename);
my $outfile = File::Spec->catfile($directory, "output.txt"); 
```

# php - PHP 无法加载 php_oci8_11g.dll 和 php_pdo_oci.dll

> ID：13618083
> 
> 赞同：2
> 
> 时间：2012-11-29T02:52:57.340
> 
> 标签：php, oracle11g

我用过 php-5.3.16-Win32-VC9-x86 和 Oracle11gXE。

昨天我将 Oracle 更改为标准版。

自从我更改了 Oracle 产品后，我的应用程序就停止了。

我在 apache 的日志中看到了这些消息，如下所示。

PHP 启动：无法加载动态库 'C:\PHP\PHP-5.3.16\ext\php_oci8_11g.dll'

PHP 启动：无法加载动态库 'C:\PHP\PHP-5.3.16\ext\php_pdo_oci.dll'

有谁知道如何解决这个问题？

我需要 Oracle Instant 客户端吗？

实际上，当我安装产品时，我并不关心 Oracle Instant Client。

我检查了环境变量，PATH是正常的。

路径=C:\oracle\product\11.2.0\dbhome_1\bin;C:\PHP\php-5.3.16;·····</p>

# python-2.7 - Python 错误：“TypeError：'int' 对象没有属性 '__getitem__'”

> ID：13618089
> 
> 赞同：1
> 
> 时间：2012-11-29T02:54:05.343
> 
> 标签：python-2.7

我已经在网站上阅读了您之前关于此错误的答案，但不确定如何更改我的代码以修复它。这是一个很长的代码，很抱歉：$

```
import random

#QUESTION 1a:

#CONSTRUCTOR FUNCTION:

    def makestk():                  #This function returns a new stack in the form of a tagged tuple.
        stk=('stack',[])            #Inserts the tagged tuple into a variable.
        return stk                  #Returns variable holding tagged tuple(empty stack).

#PREDICATE FUNCTION: 

    def emptystk(stk):              #This function returns True if the stack is empty or false if the stack is not empty.
        if stk[1] == []:            #Checks if the second variable of the tagged tuple is an empty list or not.
            return True             #Returns True if the second variable of the tagged tuple is indeed an empty list.
        else:
            return False            #Returns False if the second variable of the tagged tuple is a list containing element(s).

#MUTATOR FUNCTIONS:

    def contents(s):                #This function is created to aid the mutator functions.
        return s[1]                 #Returns the second variable of the tagged tuple.

    def pushstk(stk,ele):           #This function accepts a stack and an element and adds the element to the stack at position0.
        contents(stk).insert(0,ele) #Uses the helper function to get the second variable of the tagged tuple and inserts the element to the stack at position0.
        #return stk                 #Returns the updated version of the tagged tuple entered.

    def popstk(stk):                #This function accepts a stack and an element; and adds the element to the stack at position0.
        contents(stk).pop(0)        #Uses the helper function to get the second variable of the tagged tuple and removes the element in position0 of the stack.
        #return stk                 #Returns the updated version of the tagged tuple entered.

#QUESTION 1b:

#CONSTRUCTOR FUNCTION:

    def makecell((x,y)):                        #This function accepts a tuple which consists of the x and y co-ordinate of the cell being created.
        cell=('cell',(x,y),['t','b','r','l'])   #Inserts the tagged tuple into a variable.(The list represents the four walls of the cell: t-top,b-bottom,r-right,l-left)
        return cell                             #Returns a cell in the form of a tagged tuple.

#ACCESSOR FUNCTIONS:

    def getx(cell):                #This function returns the x co-ordinate of the cell.
        return cell[1][0]          #Returns the first value of the second variable in the tagged tuple.

    def gety(cell):                #This function returns the y co-ordinate of the cell.
        return cell[1][1]          #Returns the second value of the second variable in the tagged tuple.

    def getwalls(cell):            #This function returns the lsit of walls that are intact for a given cell.
        return cell[2]             #Returns the third variable of the tagged tuple.

#MUTATOR FUNCTIONS:

    def removetw(cell):            #This function removes the top wall of the cell.
        getwalls(cell).remove('t') #Uses the 'getwalls' function and removes the first value of list.
        return cell                #Returns the updated version of the list.

    def removebw(cell):            #This function removes the bottom wall of the cell.
        getwalls(cell).remove('b') #Uses the 'getwalls' function and removes the second value of the list.
        return cell                #Returns the updated version of the list.

    def removerw(cell):            #This function removes the right wall of the cell.
        getwalls(cell).remove('r') #Uses the 'getwalls' function and removes the third values of the list.
        return cell                #Returns the updated version of the list.

    def removelw(cell):            #This function removes the left wall of the cell.
        getwalls(cell).remove('l') #Uses the 'getwalls' function and removes the fourth values of the list.
        return cell                #Returns the updated version of the list.

#QUESTION 2:

    def makegrid(w,h):              #This function accepts the width and height of the desired grid/matrix of cells and creates it.
        grid=[]                     #Inserts an empty list into a variable.
        for x in range (0,(w)):     #Allows x to traverse through the range of 0 to the width value.
            for y in range (0,(h)): #Allows y to traverse through the range of 0 to the height value.
                tup=(x,y)                     #Inserts the values x and y into a variable.
                grid.append(makecell(tup))    #Inserts/updates the variable 'tup' into the list 'grid' and runs function until x and y have completely traversed through the ranges.
        return grid                           #Returns the updated version of grid.

#QUESTION 3:

    def getneighbours (cell,w,h):                 #This function accepts a cell and the width and height of the grid.
        lst = []
        x = getx(cell)
        y = gety(cell)
        if y + 1 <= h:
            lst = lst + [makecell((x,y + 1))]
        if y - 1 >= 0:
            lst = lst + [makecell((x,y - 1))]
        if x + 1 <= w:
            lst = lst + [makecell((x + 1,y))]
        if x - 1 >= 0:
            lst = lst + [makecell((x - 1,y))]
        return lst                                   #Returns the neighbouring cell walls.

#QUESTION 4: 

    def removewalls(c1,c2):                       #This function accepts two cells and removes the walls common between the two.accepts two cells
        if gety(c1)==gety(c2)-1:                  #Checks if c1 is above c2.
            removetw(c2) and removebw(c1)         #Removes the corresponding common wall shared between the cells.
        elif gety(c1)==gety(c2)+1:                #Checks if c1 is below c2.
            removetw(c1) and removebw(c2)         #Removes the corresponding common wall shared between the cells.
        elif getx(c1)==getx(c2)-1:                #Checks if c1 is to the left of c2.
            removerw(c1) and removelw(c2)         #Removes the corresponding common wall shared between the cells.
        elif getx(c1)==getx(c2)+1:                #Checks if c1 is to the right of c2.
            removerw(c2) and removelw(c1)         #Removes the corresponding common wall shared between the cells.
    cell0=makecell((0,0))
    cell1=makecell((0,1))

#QUESTION 5:

    def wallsintact(grid,neighbours):
        return [x for x in grid if x in neighbours and getwalls(x)==['t','b','r','l']]

#QUESTION 6:

    def createmaze(w,h):
        stack=makestk()
        totalcells=w*h
        grid=makegrid(w,h)
        cell=grid[random.randrange(totalcells)]
        strt=1
        while (strt<totalcells):
            neighbours=getneighbours(cell,w,h)
            intact=wallsintact(grid,neighbours)
            while intact!=[]:
                maze=intact[random.randrange(len(intact))]
                intact.remove(maze)
                removewalls(cell,maze)
                pushstk(stack,maze)
            strt=strt+1
            cell=popstk(stack)
        return grid 
```

# php - 在 PHP 中保留基于文件的数据缓存最多 1 分钟

> ID：13618090
> 
> 赞同：0
> 
> 时间：2012-11-29T02:54:45.283
> 
> 标签：php, caching, file-io, disqus

我已经基于[Github 上的示例](https://github.com/disqus/DISQUS-API-Recipes/blob/master/php/get_and_write_popular_threads_to_cache.php)编写了一些 PHP 代码来访问 DISQUS API，获取 JSON 响应，并将其写入平面`*.txt`文件作为缓存。我也有[来自 Github 的类似代码](https://github.com/disqus/DISQUS-API-Recipes/blob/master/php/get_popular_threads_from_cache.php)来打开该缓存文件并将结果输出到页面。现在我很难找到一种方法来逻辑地持久化和/或驱逐该缓存文件。如果在过去 60 秒内修改/创建了该文件，我希望访问该缓存文件的代码可以从该文件中读取。如果从创建/修改日期起超过 60 秒读取它，请使用新数据重新创建它。所以我的基本目标是将该缓存最多保留 1 分钟。我怎样才能用 PHP 做到这一点？

仅供参考，我是一名 ASP.NET 开发人员，可以使用本机 C# 缓存工具轻松完成此操作，但我不熟悉 PHP 方法。

**编辑**：根据下面的评论，这里有更多关于我的预期用途的详细信息：

*   要缓存的数据平均大小：几 kb 的 HTML (5-10kb)
*   要缓存的数据总大小：几 kb 的 HTML (5-10kb)
*   我期望对缓存的请求发生的速率：我不太确定！这里的重点是不要达到 DISQUS API 每小时 1000 个请求的限制，所以我使用文本文件来缓存每一分钟。

以便获得更多关于一个好的解决方案的指导

# android - 如何设置显示器开启按钮？

> ID：13618097
> 
> 赞同：-1
> 
> 时间：2012-11-29T02:56:08.363
> 
> 标签：android, button

我在android中添加按钮动态。如何设置显示器开启按钮？

我想实现一个功能，比如我在主界面中添加一个按钮，如何在这个按钮上添加一个监视器。

然后我接受语音消息。如何播放语音留言？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T05:03:12.040

```
myBtn.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                //Start accepting voice message
            }
        }); 
```

# facebook - FB.init(...) 错误：“应用程序配置不允许给定 URL。”

> ID：13618098
> 
> 赞同：7
> 
> 时间：2012-11-29T02:56:11.073
> 
> 标签：facebook, init

我正在尝试按照[此处](https://developers.facebook.com/docs/reference/javascript/)的教程进行操作。但是，当我使用似乎有效且正确的参数调用 FB.init(...) 时，我收到错误消息：“*应用程序配置不允许给定 URL。：一个或多个给定 URL 不允许应用程序的设置。它必须与网站 URL 或画布 URL 匹配，或者域必须是应用程序域之一的子域。* “我已经搜索 ( [1](https://stackoverflow.com/questions/3610858/facebook-login-given-url-not-allowed-by-application-configuration) [2](https://stackoverflow.com/questions/7184632/given-url-is-not-allowed-by-the-application-configuration) ) 以查找此错误，但其他所有人似乎都无法简单地设置Facebook 应用程序配置的站点 URL。我有 99% 的把握我已经正确设置了这个 - 但显然我做错了什么。

这是我的导致问题的代码。出于隐私原因，我用“XXX”和“YYY”替换了一些信息。

```
<html>
<body>
<h1>Facebook</h1>
<div id="fb-root"></div>
<script>
  // Additional JS functions here
  window.fbAsyncInit = function() {
    FB.init({
      appId      : 'XXX', // App ID
      channelUrl : '//YYY.com/channel.html', // Channel File
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML
    });

  };//window.fbAsyncInit()

  // Load the SDK Asynchronously
  (function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "http://connect.facebook.net/en_US/all/debug.js";
     ref.parentNode.insertBefore(js, ref);
   }(document));
</script>
</body>
</html> 
```

请注意，我必须更改教程中给出的示例中靠近代码底部的 js.src 参数。我怀疑这会导致我的具体问题，但对教程中的代码质量提出了一些担忧。（当教程代码不起作用时，我讨厌它 - 有什么意义？）

您可以在上面的代码中看到我已将域名的根替换为“YYY”。保持这个简单的替换是我的 Facebook 应用程序配置中的一些值：

```
App ID: "XXX"
Display Name: "[blah blah blah]"
Namespace: "YYY"
App Domains: "YYY.com"
Sandbox Mode: "Enabled"
Canvas Page: "http://apps.facebook.com/YYY"
Canvas URL: "http://YYY.com/canvas/" 
```

我不确定您可能需要哪些其他细节来帮助我。列出的所有 URL 都可以正常工作。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-29T11:05:28.567

> 请注意，我必须更改教程中给出的示例中靠近代码底部的 js.src 参数。

为什么？您是否只是通过从文件系统调用浏览器中的页面而不是通过本地 Web 服务器通过 HTTP 进行测试？

如果是后者，那么您*没有*“域”可供 Facebook 验证您的请求来源。设置本地 Web 服务器，通过它调用您的文档，然后重试，

# mysql - 通过 SQL 重新索引 Magento

> ID：13618101
> 
> 赞同：0
> 
> 时间：2012-11-29T02:56:17.600
> 
> 标签：mysql, sql, tsql, magento

有没有办法通过 SQL 语句调用可以在 magento 的后端启动的重新索引？

我有一堆将产品添加到magento的脚本，我们需要在它之后重新索引，我们有一个运行这些脚本的预定作业，我想在它们完成后进行重新索引，这样脚本完成后它总是会重新索引不管它们需要多长时间（有时可能需要几分钟，有时是半小时，具体取决于需要更改、插入或删除哪些数据）

任务调度程序在 Microsoft SQL Server 上，magento 在 MySQL 服务器上（我们显然使用链接服务器）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-29T03:16:14.383

不，那里没有。

在 Magento 中，“重新索引”意味着“运行 PHP 类列表并运行它们的`reindexAll`方法”。索引策略因索引器类型而异。大多数需要读取某种数据，进行程序计算，然后将值插入到平面表中。

例如，目录/URL 重写重新索引器是类

```
app/code/core/Mage/Catalog/Model/Indexer/Url.php
(alias of catalog/indexer_url, PHP class of Mage_Catalog_Model_Indexer_Url) 
```

其`reindxAll`方法包含

```
public function reindexAll()
{
    /** @var $resourceModel Mage_Catalog_Model_Resource_Url */
    $resourceModel = Mage::getResourceSingleton('catalog/url');
    $resourceModel->beginTransaction();
    try {
        Mage::getSingleton('catalog/url')->refreshRewrites();
        $resourceModel->commit();
    } catch (Exception $e) {
        $resourceModel->rollBack();
        throw $e;
    }
} 
```

实际的索引是在`refreshRewrites`方法中处理的，它创建了所需的 Magento 重写。

# javascript - 如何访问自己对象中的某些内容？

> ID：13618103
> 
> 赞同：1
> 
> 时间：2012-11-29T02:56:22.030
> 
> 标签：javascript

如果我想访问其自身（一个对象）中的一个值，我将如何去做呢？

这是我所拥有的（简化）：

```
options = {
    'image' : {
        'height' : {
        'upper' : 100,
        'lower' : 25
        },
        'width'  : {
        'upper' : 100,
        'lower' : 25
        },
    'dimensions' : (Math.floor(Math.random() * (options.image.height.upper - options.image.height.lower) + options.image.height.lower)) + 'x' +                                                         (Math.floor(Math.random() * (options.image.width.upper - options.image.width.lower) + options.image.width.lower())),
        'color' : 'fff'
}; 
```

如果您查看 options.dimensions，我正在尝试访问高度和宽度的值，但我相信我的范围是错误的。

有没有办法以我正在做的方式访问我需要的东西？如果没有，有什么更好的方法来解决这个问题？

谢谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T03:00:34.627

分两步进行：

```
options = {
    'image' : {
        'height' : {
            'upper' : 100,
            'lower' : 25
        },
        'width'  : {
            'upper' : 100,
            'lower' : 25
        },
        'color' : 'fff'
    }
};

options.dimensions = (Math.floor(Math.random() * 
    (options.image.height.upper - options.image.height.lower) + options.image.height.lower)) + 
    'x' + (Math.floor(Math.random() * (options.image.width.upper - options.image.width.lower) +
    options.image.width.lower())); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T03:02:41.127

你为什么不试试

```
options = {
    'image' : {
        'height' : {
        'upper' : 100,
        'lower' : 25
        },
        'width'  : {
        'upper' : 100,
        'lower' : 25
        },
        'color' : 'fff'
};

options['dimensions'] = (Math.floor(Math.random() * (options.image.height.upper - options.image.height.lower) + options.image.height.lower)) + 'x' + (Math.floor(Math.random() * (options.image.width.upper - options.image.width.lower) + options.image.width.lower())); 
```

我认为没有任何方法可以引用仍未创建的对象。

# .net - 定位一个 在底部

> ID：13618107
> 
> 赞同：0
> 
> 时间：2012-11-29T02:57:14.770
> 
> 标签：.net, html, nav

有人可以向我解释如何在 a 的底部移动 a ！我不敢相信我正在为一些我认为很简单的事情而苦苦挣扎。

我正在使用 .net 中提供的 mvc 模板（html5），代码如下：

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>@ViewBag.Title</title>
    <link href="~/favicon.ico" rel="shortcut icon" type="image/x-icon" />
    <meta name="viewport" content="width=device-width" />
    @Styles.Render("~/Content/css")
    @Scripts.Render("~/bundles/modernizr")
</head>
<body>
    <header>
        <div class="content-wrapper">
            <div class="float-left" style="border: 2px solid red">
                <p class="site-title">
                    @Html.ActionLink("My website", "Index", "Home")
                </p>
            </div>
            <div class="float-right" style="border: 2px solid red;">
                <section id="login">
                    @Html.Partial("_LoginPartial")
                </section>
                <nav>
                    <ul id="menu">
                        <li>@Html.ActionLink("Home", "Index", "Home")</li>
                        <li>@Html.ActionLink("About", "About", "Home")</li>
                        <li>@Html.ActionLink("Contact", "Contact", "Home")</li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>
    <div id="body">
        @RenderSection("featured", required: false)
        <section class="content-wrapper main-content clear-fix">
            @RenderBody()
        </section>
    </div>
    <footer>
        <div class="content-wrapper">
            <div class="float-left">
                <p>
                    &copy; @DateTime.Now.Year - MyWebsite.com</p>
            </div>
        </div>
    </footer>
    @Scripts.Render("~/bundles/jquery")
    @RenderSection("scripts", required: false)
</body>
</html> 
```

虽然没有在上面的代码中显示，但我的 div 的高度将为 101px，我希望导航菜单显示在 div 内的右下方，但我尝试在 site.css 中使用各种设置并使用内联样式，正如我所说，我无法让它显示在我想要的位置！我仍在谷歌搜索，但希望有人能为我提供解决方案。我在这上面花了太多时间！

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T06:21:41.087

看看这个：工作示例：http: [//jsfiddle.net/YNBxz/792/](http://jsfiddle.net/YNBxz/792/)

首先，我将 div 的位置设为相对位置。然后我将导航向右浮动，将位置设置为绝对位置和底部：0，右侧：0。

HTML：

```
<div id ="div1" >
        Here is a div with height 101px

        <nav>
           <a href="http://www.google.com/">Google</a> |
           <a href="http://www.bing.com/">Bing</a>
        </nav>  
</div> 
```

CSS：

```
#div1 {
   position:relative;
   height:101px;
   width:100%;
   border:2px solid black;
}

#div1 nav {

float:right;
position:absolute;
bottom:0;
right:0;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T03:03:24.417

```
<div style="border: 2px solid red;float:right;">
           <nav>
                <ul id="menu">
                    <li>Home</li>
                    <li>about</li>
                    <li>contact</li>
                </ul>
            </nav>
        </div>​ 
```

[http://jsfiddle.net/YNBxz/792/](http://jsfiddle.net/YNBxz/792/)

# git - Git master 分支合并后根本没有新文件

> ID：13618108
> 
> 赞同：11
> 
> 时间：2012-11-29T02:57:40.997
> 
> 标签：git

假设我有 2 个分支，`master`并且`other`.

我进入`other`分支，添加 2 个文件，提交并推送。

现在我进入`master`分支，将文件添加到不同的目录，然后提交它们。然后我合并`other`。

问题是我添加的文件`other`没有显示出来。Git 说它是最新的，但它不是！文件丢失。

如何强制`master`添加文件`other`或以某种方式手动添加它们？

**为卡尔编辑：**

据我所知，我做了以下事情，尽管没有出现的变化是几周前的事情。我才意识到他们今天不在那里。

```
$ git branch
*other
master
$ git add .
$ git commit -m 'cool new features'
$ git push origin other
$ git checkout master
$ git merge other
$ git add .
$ git commit -m 'merged cool new features from other'
$ git push origin master 
```

我去Github，文件不在那里。其他文件已提交并显示，但两个文件夹没有匹配的内容。这些文件存在于`other`但不存在于`master`. 澄清一下，这些文件并不新鲜。`master`但我认为如果文件不存在，合并至少会将文件复制到！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-11-30T15:21:24.810

有点晚了，但是对于发现这个问题的其他用户，我将描述一个AJcodez观察到的问题会发生的情况。如果您执行 a `git checkout master; git merge other`，在此期间或之后您删除了一些新文件`master`（并且可能忘记了这一事实）`git checkout master; git merge other`，然后再次执行 a ，那么“新”文件将不会重新出现在 中`master`，因为它们不是新文件。合并只关心与合并基础相关的更改，合并基础是可通过两个分支访问的最年轻的提交。在您的第二次合并期间，合并基础与您的第一次合并期间不同，在所描述的场景中第二次合并期间的合并基础是第一次合并期间的提交`other`。如果`other`此后没有更改新文件，则删除`master`是最新的更改，因此新文件的删除将是第二次合并后的状态。

如果这看起来不方便，您可以通过创建一个临时分支（我们称之为它`merge_branch`）、`other`使用`--squash`、提交、合并`master`和删除临时分支来解决它。这可能不是理想的解决方案（例如，已经解决的合并冲突可能必须再次解决），但原来的情况可能已经是错误的结果。这是我在代码中的意思：

```
git log other # find the commit where 'other' originally branched off
git checkout -b merge_branch COMMIT_ID # go there & create branch
# without '--squash', the following merge would simply be a fast-forward
# merge and wouldn't solve our problem, because 'merge_branch' would then
# point to the same commit as 'other' and so the later merge into
# 'master' would produce the same unsatisfactory result.
git merge --squash other # does not create a new commit by itself
git commit # better add an explanation for what you did and why
# 'merge_branch' now contains everything you did in 'other' since it
# branched off from 'master', but squashed into a single new commit
git checkout master
git merge merge_branch
git branch --delete merge_branch 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-29T04:45:18.433

像这样：

```
karl@Bielefeldt-Server:~/stackoverflow$ git init .
Initialized empty Git repository in /home/karl/stackoverflow/.git/
karl@Bielefeldt-Server:~/stackoverflow$ touch common_file_a
karl@Bielefeldt-Server:~/stackoverflow$ touch common_file_b
karl@Bielefeldt-Server:~/stackoverflow$ git add .
karl@Bielefeldt-Server:~/stackoverflow$ git commit -m "commit common files"
[master (root-commit) 89a5cd0] commit common files
 0 files changed
 create mode 100644 common_file_a
 create mode 100644 common_file_b
karl@Bielefeldt-Server:~/stackoverflow$ git checkout -b other
Switched to a new branch 'other'
karl@Bielefeldt-Server:~/stackoverflow$ mkdir other
karl@Bielefeldt-Server:~/stackoverflow$ touch other/other_file_a
karl@Bielefeldt-Server:~/stackoverflow$ touch other/other_file_b
karl@Bielefeldt-Server:~/stackoverflow$ git add .
karl@Bielefeldt-Server:~/stackoverflow$ git commit -m "commit other files"
[other 9c7409c] commit other files
 0 files changed
 create mode 100644 other/other_file_a
 create mode 100644 other/other_file_b
karl@Bielefeldt-Server:~/stackoverflow$ git checkout master
Switched to branch 'master'
karl@Bielefeldt-Server:~/stackoverflow$ touch master_file_a
karl@Bielefeldt-Server:~/stackoverflow$ touch master_file_b
karl@Bielefeldt-Server:~/stackoverflow$ git add .
karl@Bielefeldt-Server:~/stackoverflow$ git commit -m "commit master files"
[master 3558768] commit master files
 0 files changed
 create mode 100644 master_file_a
 create mode 100644 master_file_b
karl@Bielefeldt-Server:~/stackoverflow$ ls
common_file_a  common_file_b  master_file_a  master_file_b
karl@Bielefeldt-Server:~/stackoverflow$ git merge other
Merge made by the 'recursive' strategy.
 0 files changed
 create mode 100644 other/other_file_a
 create mode 100644 other/other_file_b
karl@Bielefeldt-Server:~/stackoverflow$ ls
common_file_a  common_file_b  master_file_a  master_file_b  other
karl@Bielefeldt-Server:~/stackoverflow$ ls other
other_file_a  other_file_b 
```

如果你得到不同的结果，你要么错过了一个步骤，在某个地方多出了一个步骤，要么你得到了一些你没有告诉我们的错误，比如合并冲突。我们无法知道为什么这么基本的东西不适合你，除非你发布你得到的*确切*命令和输出，就像我上面所做的那样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-08T09:35:30.447

我通过在 master 分支创建具有相同名称的空文件解决了这个问题：

假设，分支`other`包含一个新文件 newfile.txt，它没有以某种方式合并到`master`.

```
git checkout master
touch newfile.txt
git add newfile.txt
git commit -m "create newfile.txt"
git merge other 
```

这有点脏，但有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-12-14T14:13:35.197

碰巧我只做一个

```
git merge other 
```

是不足够的。在合并之前，我必须从**分支中****提取更改`other`**

```
git checkout other
git pull
git checkout first 
```

然后我能够

```
git merge other 
```

# php - 在数据库中保存 HTML 页面

> ID：13618111
> 
> 赞同：2
> 
> 时间：2012-11-29T02:58:10.367
> 
> 标签：php, html, mysql

我想稍后从数据库中显示一个 HTML 页面，用户只需输入页面的 ID。

除了将其作为文本保存在数据库中之外，还有更好的方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T02:59:36.397

在数据库中存储大量文本（尤其是标记）往往会带来许多烦人的问题。相反，我只是将文件名存储在数据库中，并将实际文件存储在文件系统上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T03:18:32.230

您可以将文件中的实际有用信息存储在数据库中。就像页面的标题和页面每个部分的内容一样，然后使用磁盘上某处的模板对其进行渲染。这意味着您可以从每个 HTML 文件中提取所有相同的信息并节省磁盘空间。（虽然这是一个小小的好处，但按照其他答案的建议可能会更简单，只需将文件名保存在数据库中并将文件保存在文件系统中。）将信息保存在数据库本身可能意味着它将得到备份与数据库，这可能对您有用。谁知道...

类似于 django 框架中的平面页面。[https://docs.djangoproject.com/en/dev/ref/contrib/flatpages/?from=olddocs](https://docs.djangoproject.com/en/dev/ref/contrib/flatpages/?from=olddocs)

# jquery - jQuery 对话框只显示一次

> ID：13618116
> 
> 赞同：0
> 
> 时间：2012-11-29T02:58:42.760
> 
> 标签：jquery, dialog

我有一个表格，其中包含来自用户的动态消息，管理员可以通过单击回复来回复这些消息。完美运行。问题是有链接可以在对话框中打开用户消息，因此他们可以看到完整的用户消息，与他们的回复相同（如果他们已回复）。他们只能看到一次对话框。再次单击它时，它不会显示。

任何帮助，将不胜感激

桌子

```
foreach($content as $row)
{
    //print_r($row);
    echo '<tr data-id="'.$row['ConID'].'" input type="hidden" value="'.$row['ConID'].'">';
    echo '<td data-cn="'.$row['ConName'].'">'.$row['ConName'].'</td>';
    echo '<td data-em="'.$row['ConEmail'].'">'.$row['ConEmail'].'</td>';
    echo '<td data-cm="'.$row['ConMessage'].'" >'.substr($row['ConMessage'],0,30).'<a href="#" class = "open"> ...more</a><div class = "dialog"> <p>'.$row['ConMessage'].'</p></div></td>';
    echo '<td data-dt="'.$row['ConDate'].'">'.date('d/m/y', strtotime($row['ConDate'])).'</td>';
    if($row['Replied'] == 0){
        echo '<td data-rp="'.$row['Replied'].'">No</td>';
    }
    else{
        echo '<td><a href="#" class="openReply">See Reply</a><div class = "dialogReply"><p>'.$row['Reply'].'</p></div></td>';
    }
    if($row['Replied'] == 0){
        echo '<td><input type="button" class="replySender" id="replySender" value="Reply"/></td>';
    }
    else{
        echo'<td>Replied</td>';
    }
    echo '</tr>';
} 
```

查询

```
$(".dialog").hide(); $(".open").click(function(){
    $(this).next(".dialog").dialog();  
});
$(".dialogReply").hide(); $(".openReply").click(function(){
    $(this).next(".dialogReply").dialog();  
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T03:34:52.850

第二次不起作用的原因是，当你第一次“运行”它 $('#my_div').dialog() 时，这会将元素 #my_div 移动到 body 的根目录到一个包装器（DIV），所以 $.next() 将第二次失败，因为该元素不再存在！；我的建议是将 ID 设置为对话框并将这些 ID 保存在您的锚点（）中。IE

```
<td>
    <a href="#" class="openReply" data-dlg-id="random-id-1">See Reply</a>
    <div class="dialogReply" id="random-id-1">
        <p>My Reply</p>
    </div>
</td>
<td>
    <a href="#" class="openReply" data-dlg-id="random-id-2">See Reply</a>
    <div class="dialogReply" id="random-id-2">
        <p>Other Reply</p>
    </div>
</td> 
```

你的javascript可能看起来像：

```
$(".dialogReply").hide();

$(".openReply").click(function(){
      var $dlg = $('#'+ $(this).attr('data-dlg-id'));
      if ($dlg.hasData('dialog'))
        $dlg.dialog('open');
      else
        $dlg.dialog();
}); 
```

我希望这有帮助。最好的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T03:52:34.993

谢谢大家的回复。我已经整理好了。

因此，一旦单击该 div 就会被删除。通过使用 jquery clone() 修复它：

> $(".dialog").hide();
> 
> $(".open").click(function(){ $(this).next(".dialog").clone().dialog(); }); $(".dialogReply").hide(); $(".openReply").click(function(){ $(this).next(".dialogReply").clone().dialog(); });

# objective-c - 转发关于@class 的类声明

> ID：13618120
> 
> 赞同：1
> 
> 时间：2012-11-29T02:59:07.787
> 
> 标签：objective-c, ios

我知道在 .h 中放置前向类声明 (@class ClassA) 并在 .m 中放置 #import "ClassA.h" 是正确的做法。而且我知道这样做可以使编译器稍后编译它（直到#import它在.m中）。

通常我们在Ah中使用@class ClassA同时在Am中添加#import ClassA.h，虽然编译器不会在Ah中编译ClassA，但编译器还是要在Am中编译，那么为什么不直接在Ah中使用#import呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T04:07:08.590

你几乎从不使用`@Class A`in Ah 通常的做法是使用`@Class B`in Ah 和`@Class A`in Bh 这样做的原因是为了避免 .h 文件中的循环依赖。如果 Ah 导入 Bh 和 Bh 导入 Ah，编译器将从循环依赖中爆炸。

你的最后一句话似乎在问为什么我们从不导入 Ah in Ah 我认为很明显为什么没有这样做。

请记住，头文件 (.h) 旨在告诉全世界您的声明的最低限度。它在那里告诉编译器 - “嘿，我们有一个类（@interface），其中包含一些方法和属性。这些方法使用这些其他类。我们对那些其他类使用@class，因为此时我们只需要知道最终会有这样的类。这足以让编译器高兴，这样它就可以完成它的工作。最终，链接器会最终决定这些类是否真的存在于某个地方。

源文件 (.m) 需要进行实际的导入，因为编译器需要验证确实存在您尝试使用的方法和属性。但是头文件不调用方法，也不调用属性。它只是声明-“这些东西存在”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T10:02:55.350

我在 .h 中使用 @class 而不是 #import 有两个原因：

1.  使循环依赖成为可能。

2.  减少编译时间。

我通常发现有相互链接 A->B 和 B->A 很有用，如果没有前向声明，这是不可能的。

# android - 带有 FragmentActivity 的 ActionBar 选项卡

> ID：13618121
> 
> 赞同：0
> 
> 时间：2012-11-29T02:59:12.543
> 
> 标签：android, android-fragments

```
class MyTabsListener implements ActionBar.TabListener {
    public Fragment fragment;

    public MyTabsListener(Fragment fragment) {
        this.fragment = fragment;
    }

    public void onTabReselected(Tab tab, FragmentTransaction ft) {
        Toast.makeText(DashboardFragmentActivity.appContext, "Reselected!", Toast.LENGTH_LONG).show();
    }

    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        ft.replace(R.id.fragment_container, fragment);
    }

    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        ft.remove(fragment);
    } 
```

是否可以改为将 Fragment 更改为 FragmentActivity？你将如何实现这一点，我对这两个感到困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T05:40:16.583

Fragment 始终在 FragmentActivities 中使用，因此您不能用**FragmentActivity**替换**Fragment**，因为不推荐使用嵌套活动。

而且您始终可以选择使用**getActivity();** 在**Fragments**中获取父 Activity，因此无论出于何种原因，您想用 FragmentActivity 替换**Fragment**都**可以**通过**Fragment**来实现。

# matlab - 下标索引必须是实数正整数或matlab中的logicalsi

> ID：13618122
> 
> 赞同：0
> 
> 时间：2012-11-29T02:59:14.330
> 
> 标签：matlab, octave

为什么我不能运行这个功能？和标题显示之类的错误信息？

```
function y = contrast_stretching(citra)
double_citra = double (citra);
[m n] = size (citra);
for i = 1:m
    for i =1:n
        y(i,j) = double_citra(i,j) + 100;
    end;
end;
y=uint8 (y);
imshow(y); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T03:48:23.227

首先，您的第二个 for 循环是

```
for i=1:n 
```

我怀疑你的意思是：

```
for j=1:n 
```

两者都`i`具有Matlab`j`中的默认值`sqrt(-1)`。当您尝试分配给 时`y(i,j)`，您正在分配给 的`sqrt(-1)`第 列`y`。

# ubuntu - 腻子致命错误已断开连接：没有可用的受支持的身份验证方法。

> ID：13618123
> 
> 赞同：2
> 
> 时间：2012-11-29T02:59:32.227
> 
> 标签：ubuntu, ssh, amazon-web-services, putty, ssh-keys

我正在通过 Putty 连接到 Ubuntu 服务器并不断收到“断开连接：没有可用的支持的身份验证方法。服务器拒绝了我们的密钥。” 我能够以 ubuntu（超级用户）身份连接，但不能以任何其他用户身份连接。如果有帮助，我正在使用亚马逊网络服务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-06T16:09:04.917

亚马逊实际上有一个指南，用于在 Windows 上设置 Putty 以连接到您的 AWS 实例。它甚至详细说明了用于安全传输文件的 WinSCP。很有帮助的指南。

[http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/putty.html](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/putty.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-08T20:05:00.713

.ssh 中文件的权限也需要限制。手册页对此有所了解。还可以尝试登录腻子，让我们看到来自客户端的错误。还要检查服务器端 /var/logs 消息或 syslog 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-24T22:20:01.450

看起来 sshd 服务器不接受**ssh-dss**公钥进行身份验证。只需添加到 /etc/ssh/sshd_config 键**PubkeyAcceptedKeyTypes**并添加值**ssh-dss**

```
PubkeyAcceptedKeyTypes ssh-ed25519,ssh-ed25519-cert-v01@openssh.com,ssh-rsa,ssh-dss,ecdsa-sha2-nistp256,ecdsa-sha2-nistp384,ecdsa-sha2-nistp521,ssh-rsa-cert-v01@openssh.com,ssh-dss-cert-v01@openssh.com,ecdsa-sha2-nistp256-cert-v01@openssh.com,ecdsa-sha2-nistp384-cert-v01@openssh.com,ecdsa-sha2-nistp521-cert-v01@openssh.com 
```

查看服务器支持哪些公钥：

```
ssh -Q key 
```

# android - 适用于 iOS/Android 的可重排 epub SDK

> ID：13618125
> 
> 赞同：2
> 
> 时间：2012-11-29T02:59:43.747
> 
> 标签：android, ios, epub

我知道 Adob​​e® Reader Mobile 软件开发套件能够为 iOS / Android 呈现可回流的 epub。但是它们的高成本是普通用户无法使用的。

支持可重排内容的 epub SDK 是否有任何免费/超值替代方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T14:35:23.643

我还没有使用它，但我找到了这个：

[http://epub.anfengde.com/](http://epub.anfengde.com/)

看起来真的很有趣。

# java - KeyListener 未添加

> ID：13618127
> 
> 赞同：0
> 
> 时间：2012-11-29T03:00:17.680
> 
> 标签：java, swing, keylistener

我很确定我在这里遗漏了一些非常简单的东西，但我就是找不到！

这是我`GamePanel`班级的声明：

```
private class GamePanel extends JPanel implements KeyListener { 
```

在它的构造函数中是：

```
addKeyListener(this); 
```

同样在构造函数中：

```
 new Thread(new Runnable() {

            @Override
            public void run() {
                while (true) {
                    index ++;
                    index = index >= 15 ? 0 : index;
                    if (aPress) {
                        playerX --;
                    }
                    if (dPress) {
                        playerX ++;
                    }
                    repaint();
                    try {
                        Thread.sleep(25);
                    } catch (InterruptedException e) {}
                }
            }

        }).start(); 
```

在课堂里：

```
 @Override
    public void keyPressed(KeyEvent e) {
        System.out.println("Key pressed!");
        if (e.getKeyCode() == KeyEvent.VK_A) {
            aPress = true;
        }
        if (e.getKeyCode() == KeyEvent.VK_D) {
            dPress = true;
        }
    }
    @Override
    public void keyReleased(KeyEvent e) {
        if (e.getKeyCode() == KeyEvent.VK_A) {
            aPress = false;
        }
        if (e.getKeyCode() == KeyEvent.VK_D) {
            dPress = false;
        }
    } 
```

最后：

```
JFrame f = new JFrame();
//set up f
f.add(new GamePanel());
f.setVisible(true); 
```

我什`System.out.println`至在我的`keyPressed`方法中添加了一个，它不会打印！我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T03:16:19.650

`KeyListener`是一个善变的情妇。注册的组件`KeyListener`必须是可聚焦的，并且必须具有焦点才能接收关键事件。

注册监听器后尝试添加`setFocusable(true);`和。`requestFocusInWindow();`

一个更好的主意是使用[key bindings](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)，这将解决焦点问题。

```
InputMap im = getInputMap(WHEN_IN_FOCUSED_WINDOW);
ActionMap am = getActionMap();
im.put(KeyStroke.getKeyStroke(KeyEvent.VK_A, 0, false), "a.pressed");
am.put("a.pressed", new AbstractAction() {
    public void actionPerformed(ActionEvent evt) {
        aPress = true;
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T03:15:51.140

添加`setFocusable(true);`到 GamePanel 构造函数。

# google-app-engine - 减小 Google 应用引擎 Datastore 存储数据的大小

> ID：13618133
> 
> 赞同：1
> 
> 时间：2012-11-29T03:01:02.163
> 
> 标签：google-app-engine, google-cloud-datastore

我正在使用 Google 应用引擎，现在“Datastore 存储数据”的大小已接近超过免费配额限制。所以我想通过删除一些实体元素来减少数据存储区中数据的大小。

我尝试删除一些成本约为 100MB 的实体元素（从 1GB 限制大约 10%），但它仍然显示早期使用情况，并且仍然接近超过免费配额限制。

请建议我，如何减少数据存储大小。

提前致谢。

那拉卡

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T03:30:28.723

要减小您的情况的大小：

1）NDB可以压缩属性，所以你可以为非索引属性创建一个对象并压缩它：[https ://developers.google.com/appengine/docs/python/ndb/properties?hl=nl](https://developers.google.com/appengine/docs/python/ndb/properties?hl=nl)

2）我不知道你的型号。但是一个选项是分发您的模型并创建一个网络服务来从其他应用程序中获取实体。

3）如果它只有一个模型，则将索引属性保留在主 appid 中，并从辅助 appid 获取数据。

但当然，一切都是有代价的。性能、url 获取、CPU ......所以很容易从一个瓶颈运行到另一个瓶颈。

# c# - 使用 linq to sql 查找常用数据

> ID：13618134
> 
> 赞同：0
> 
> 时间：2012-11-29T03:01:24.540
> 
> 标签：c#, linq

我正在使用 linq to sql 从我的 mvc 项目中的 IQueryable 对象中提取数据。在这种情况下，我试图找到用户共有的专辑。谢谢你的帮助。

```
Albums.Where(x=>x.userid == _userid && x.userid == _otheruserid);
//This will pull all the respected albums from each user. 
//I just would like to pull the albums they have in common 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T03:05:56.947

您可以使用[相交](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.intersect.aspx)。挺容易：

```
Albums.Where(x=>x.userid ==_userid) 
.Intersect(Albums.Where(x=>x.userid== _otheruserid)); 
```

编辑：
对于您提供的代码，您希望使用特定字段进行匹配，因为您不能拥有一个分配有两个不同用户的相册。如果您想根据名称查找常见的专辑，您可以尝试使用此：

```
 Albums.Where(x=>x.userid ==_userid).Select(x=>x.Name) 
    .Intersect(Albums.Where(x=>x.userid== _otheruserid).Select(x=>x.Name)); 
```

但正如@EvilPenguin 所提到的，您最好为您的表格创建一个更好的结构。

# hibernate - hibernate：乐观并发控制

> ID：13618135
> 
> 赞同：1
> 
> 时间：2012-11-29T03:01:27.340
> 
> 标签：hibernate, optimistic-locking

我正在尝试学习乐观并发控制。

以下程序

1.  打开一个会话，在表中创建一行：id=1 name = "raj"，提交并关闭会话
2.  启动一个线程，最初休眠 3 秒。然后打开 session2，用 name = "raj10" 更新 id = 1 的人。然后 session2 关闭。
3.  在 session3 中，我修改了相同的数据库行（id=1）。但问题是，这一行是在步骤 2 中的线程加载相同的数据库行之前加载的。并且在 session3 中，加载的 db 行被更新（现在这是陈旧的，因为 step2 中的线程已经修改了它）。所以我抓住了staleObjectStateException。在 catch 块中，我再次加载它，更新然后保存它。

我得到以下异常：线程“main”中的异常 org.hibernate.StaleObjectStateException：行已被另一个事务更新或删除（或未保存的值映射不正确）：[com.raj.hibernate.optimistic.OptPerson#1]

请告诉我

1.  我应该在我的 catch 块中成功更新新值。
2.  session.merge 会在这里帮助我吗？

    ```
    final SessionFactory factory = new Configuration().configure()
            .buildSessionFactory();
    Session session = factory.openSession();
    session.beginTransaction();
    OptPerson optP1 = new OptPerson();
    optP1.setName("raj");
    session.save(optP1);
    session.getTransaction().commit();
    session.close();
    System.out.println("done saving, closed session");

    new Thread() {
        public void run() {
            try {
                Thread.sleep(3000);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            Session session2 = factory.openSession();
            session2.beginTransaction();
            OptPerson p1 = (OptPerson) session2.get(OptPerson.class, 1);
            p1.setName("raj10");
            session2.save(p1);
            session2.getTransaction().commit();
            session2.close();
            System.out.println("modified person in session2");
        }
    }.start();

    Session session3 = factory.openSession();
    session3.beginTransaction();
    OptPerson p1 = (OptPerson) session3.get(OptPerson.class, 1);
    System.out.println("read person in session3");
    Thread.sleep(8000);
    try {
        p1.setName("man");
        session3.save(p1);
        session3.getTransaction().commit();
    } catch (StaleObjectStateException ex) {
        System.out.println("inside catch block");
        OptPerson p3 = (OptPerson) session3.get(OptPerson.class, 1);
        p3.setName("man");
        session3.saveOrUpdate(p3);
        //OptPerson p4 = (OptPerson) session3.merge(p1);
        session3.getTransaction().commit();
    } finally {
        session3.close();
    } 
    ```

# javascript - 使用 Javascript 进行动态元素翻译

> ID：13618137
> 
> 赞同：0
> 
> 时间：2012-11-29T03:01:41.903
> 
> 标签：javascript, html

假设我有一个大 div，并且根据用户的鼠标位置，我希望 div 的位置发生变化。我正在尝试找出最有效的方法。

目前我正在获取鼠标位置，计算 x 和 y 速度，然后开始一个循环，根据计算的速度逐像素移动元素。div 可能有很多内容，我认为这个循环可能会让事情变得太慢。

有什么方法可以更有效地做到这一点吗？我应该使用网络工作者吗？

谢谢

# php - CakePHP：根据数据库表中的最后一个值正确递增（检查正确的数字基数）

> ID：13618138
> 
> 赞同：1
> 
> 时间：2012-11-29T03:01:46.740
> 
> 标签：php, mysql, cakephp

简而言之，我正在制作一个预订应用程序。Booking id 需要从 10000 开始，每个新的预订增加 1。

我已经开始编写一种方法来生成这个预订号。我正在努力的是：

1.  在第一次运行时，不会有预订号码，所以我不能简单地将 1 添加到数据库表中的最后一个 id。我需要一种方法来检查最后一个数字是否确实以 10000 为基数。

我正在使用 cake php，我获取 id 号的方式正在使用

```
$ids = $this->find('first', array('order' => 'Booking.id DESC', 'fields' => 'Booking.id')); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T03:08:46.133

您可以重新创建`Booking`表或更改它以使`id`字段从 10000 开始。

重新创建：

```
DROP TABLE IF EXISTS Booking;
CREATE TABLE IF NOT EXISTS Booking (
    id INT NOT NULL AUTO_INCREMENT,
    /* Other fields here */
    PRIMARY KEY (id)
) AUTO_INCREMENT = 10000; 
```

或改变：

```
ALTER TABLE Booking AUTO_INCREMENT = 10000; 
```

你只需要这样做一次。之后，您可以更加确定最后一个 Booking id 是 10000 或更大。

# c# - 如何使用 C# 在 Excel 文本框中设置多行文本

> ID：13618140
> 
> 赞同：0
> 
> 时间：2012-11-29T03:02:03.403
> 
> 标签：c#, winforms, excel

这是我的代码：

```
using Excel = Microsoft.Office.Interop.Excel;

private void button1_Click(object sender, EventArgs e)
{
    Excel.Application xlApp = new Excel.Application();
    Excel.Workbook wb = xlApp.Workbooks.Add(System.Type.Missing);
    Excel.Worksheet ws = (Excel.Worksheet)wb.Sheets[1];
    xlApp.Visible = true;

    Excel.Shape textBox = ws.Shapes.AddTextbox(
        Microsoft.Office.Core.MsoTextOrientation.msoTextOrientationHorizontal,
        10 + 10 + 10, 36, 600, 100);
    textBox.TextFrame.Characters(System.Type.Missing, System.Type.Missing).Text
        = "testing";

    xlApp.ActiveWindow.Activate();
    xlApp.UserControl = true;
    ws = null;
    wb = null;
    xlApp = null;
} 
```

但是使用此代码，我只能添加一行文本“测试”：

```
---------------------------------
|Testing                        |
|                               |
|                               |
--------------------------------- 
```

现在我想添加 3 行文本，如下所示：

```
---------------------------------
|Test1                          |
|Test2                          |
|Test3                          |
--------------------------------- 
```

来人帮帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T03:08:25.133

`System.Environment.NewLine`可能是您正在寻找分隔 3 个字符串的常量。

# windows-8 - 如何在 XAML 中的 TextBlock 周围添加阴影

> ID：13618142
> 
> 赞同：4
> 
> 时间：2012-11-29T03:02:12.793
> 
> 标签：windows-8, microsoft-metro, winrt-xaml

我注意到一个名为 PressPlay Video 的 Windows 应用商店应用程序：http: [//apptivate.ms/apps/76/pressplay-video](http://apptivate.ms/apps/76/pressplay-video)

它能够在文本周围显示带有阴影的文本（用于字幕和覆盖）。

由于 WinRT 中没有阴影效果，我想知道如何做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T19:50:42.367

他们只是简单地堆叠 TextBlocks 并调整它们的边距和颜色来模拟阴影效果。就像是：

```
 <Grid VerticalAlignment="Center" HorizontalAlignment="Center">
        <TextBlock FontSize="50" Text="My Marvelous Shadow" />

        <TextBlock FontSize="50" Text="My Marvelous Shadow" Margin="6 6 0 0" Opacity="0.1" />
        <TextBlock FontSize="50" Text="My Marvelous Shadow" Margin="5 5 0 0" Opacity="0.1" />
        <TextBlock FontSize="50" Text="My Marvelous Shadow" Margin="4 4 0 0" Opacity="0.1" />
        <TextBlock FontSize="50" Text="My Marvelous Shadow" Margin="3 3 0 0" Opacity="0.1" />
    </Grid> 
```

它不是全方位的，但你应该明白。

PS 深入了解 Program Files\WindowsApps 并查看一些应用程序有时会有所帮助。

# unix - 在unix中更改文件扩展名

> ID：13618145
> 
> 赞同：2
> 
> 时间：2012-11-29T03:03:13.597
> 
> 标签：unix, file-extension

我正在对 Unix 课程进行介绍，并坚持完成最后的作业。我需要编写一个脚本来更改脚本运行时输入的文件名的文件扩展名。运行脚本时也会输入新的文件扩展名。该脚本调用 chExt1.sh 。我们第一次试用脚本运行如下

```
./chExt1.sh cpp aardvark.CPP 
```

该脚本假设将第二个输入文件扩展名更改为第一个输入中给出的文件扩展名。文件名与文件扩展名或文件扩展名作为新扩展名无关紧要，也不仅仅是将大写字母更改为小写字母。如果给出以下内容，希望能非常清楚地说明这一点：

```
./chExt1.sh istink helpme.plEaSe 
```

该脚本会将 helpme.plEaSe 更改为 helpme.istink 。我在这个论坛和谷歌上搜索过，并没有尝试我发现的不同示例。以下是我尝试过的一些示例以及我目前拥有的示例。当前的

```
#!/bin/sh
fileExtension="$1"
shift
oldName="$2"
shift
newName=${oldName%%.*}${fileExtension}
echo $newName 
```

echo 只是为了看看它是否有效，如果我让它有效，我将添加一个 mv 来保存它。我尝试过的其他人：

```
newName=`${oldName%.*}`
newName=`${oldName#.*}`
sed 's/\.*//' $oldName > $newName 
```

我似乎找不到我用过的其他一些 sed 但它们涉及很多反斜杠和 () 与 .* 在那里。我没有尝试 basename 命令，因为我不知道要输入的文件扩展名，而且我看到的所有示例都要求您指定要删除的内容，而我不能。我没有列出我使用的所有不同的报价变体，但我已经尝试了很多。我的说明说要使用 sed 命令，因为我们应该知道如何在课堂上使用它，但是当我尝试这样做时，我不会只隔离文件的结尾，而且我相信（因为它需要很长时间才能完成）它正在浏览整个文件并寻找 .'s 和之后的任何内容，因为我一直在做 .* 作为模式。谢谢你提供的所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T03:12:09.580

`shift`移动位置参数，因此在调用 shift 之后，第二个参数 ($2) 现在是第一个 ($1)。第二个班次不是必需的，因为您已经完成了对参数的访问。您需要删除班次

```
#!/bin/sh
fileExtension="$1"
oldName="$2"
newName=${oldName%%.*}${fileExtension}
echo $newName 
```

或将 2 美元更改为 1 美元。

```
#!/bin/sh
fileExtension="$1"
shift
oldName="$1"
newName=${oldName%%.*}${fileExtension}
echo $newName 
```

但是，您的新文件名中仍然缺少一个点。这留给读者作为练习。

# ruby-on-rails - 如何在 ActiveRecord 中用符号表示否定？

> ID：13618149
> 
> 赞同：0
> 
> 时间：2012-11-29T03:04:07.800
> 
> 标签：ruby-on-rails, activerecord

除了名称等于字符串“summary”的那一天，我如何查询给定一周的活动？

```
Activity.where(:week => wk, :day => "Summary").each do |daily_activity|
end 
```

你如何表达否定？并显示一周中每一天的活动，但不是当这一天是“摘要”时（因为它不是实际的一天）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T05:17:27.307

您不能直接使用哈希来执行此操作，但您可以使用以下内容来执行此操作：

```
Activity.where(:week => wk).where('day != ?', 'Summary') 
```

如果您想扩展查找器的选项，请查看[squeel gem](https://github.com/ernie/squeel)。

# python - 如何过滤django中的日期时间字段

> ID：13618152
> 
> 赞同：1
> 
> 时间：2012-11-29T03:04:31.197
> 
> 标签：python, django

我有一个名为Task的模型，并且在queryset函数中，我想通过时间过滤器获取所有任务，我想过滤（任务的结束时间是现在之前）

下面是代码，但这现在可以工作，过滤后没有任务显示。

```
EstEndTime = models.DateTimeField('End Time', null=True)

def queryset(self, request, queryset):
    from django.utils import timezone
    now = timezone.now()
    return queryset.filter(Owner=str(current_user_name),EstEndTime = now) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T03:06:35.490

这只会返回现在创建的项目（精确到微秒，具体取决于您的数据库）。

您可能正在寻找这个：

```
queryset.filter(EstEndTime__lte=now) 
```

作为记录，命名字段`EstEndTime`违反 Django（以及 Python）命名约定，我建议使用如下命名模式：`est_end_time`

# java - 文本字段溢出时缺少单词

> ID：13618158
> 
> 赞同：2
> 
> 时间：2012-11-29T03:05:59.873
> 
> 标签：java, jasper-reports, overflow, ireport, textfield

我目前正在使用该`jasperreports-4.5.1`库，但遇到文本字段溢出问题。

我有一个带内的文本字段，用于显示用英文写的地址。此文本字段自动将其宽度调整为文本，因为该属性`isStrechWithOverFlow`设置为 true。发生的情况是，当地址的长度比文本字段稍长（例如 4 个字符）时，文本字段不会自动拉伸并隐藏那些最终字符。虽然，当您有超过 6 个字符时，句子被正确包装，隐藏部分被粘贴到下面的行。

[![截屏](../Images/671313ce32147699ba47c46cfb8d576a.png)](https://i.stack.imgur.com/2tgLd.png)

在随附的图像中，您会看到一个红色圆圈，标记了问题发生的位置。应该出现的完整地址是：

```
EDF. KUAI TAK TAK (TAK TAK KAK CHKK), 2 ANDAR c 
```

如您所见，该`ANDAR c`零件丢失了。以下是生成这些字段的代码：

```
<textfield isstretchwithoverflow="true" isblankwhennull="true">
    <reportelement uuid="82599625-2379-4c37-b390-5fece5e8e828" style="FontStyle" positiontype="Float" mode="Transparent" x="227" y="151" width="224" height="11"></reportelement>
    <textelement verticalalignment="Top">
        <font size="6" isitalic="false"></font>
    </textelement>
    <textfieldexpression></textfieldexpression>
</textfield> 
```

word wrapper 或 strech textfield 算法有什么问题吗？我是新来的，所以这只是疯狂的猜测。也许问题出在我的代码中。

请帮助我，因为我不知道如何解决这个问题！

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T16:53:59.963

如果您使用的是 iReport，问题是否同时出现在 iReport 内部预览器和 PDF 预览器中？如果它在内部预览器中格式正确但在 PDF 中格式不正确，我怀疑您没有使用字体扩展名。您必须使用字体扩展名才能正确格式化 PDF。

[您可以在此处](http://jasperreports.sourceforge.net/sample.reference/fonts/index.html#fontextensions)找到字体扩展的分步说明。

[Alex K 在此处](https://stackoverflow.com/questions/8985497/use-custom-fonts-when-creating-pdf-using-ireport)提供了有关使用 iReport 和字体扩展的很好的文档。

JasperReports 项目 zip 文件的 demo/fonts 目录中提供了有关如何组织和编程字体扩展的演示，可在[发布页面上找到](http://community.jaspersoft.com/project/jasperreports-library/releases)。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T07:12:32.480

尝试`stretchType`指定`reportElement`

```
 stretchType="RelativeToTallestObject" 
```

# mysql - 需要优化的单个 mysql 查询

> ID：13618159
> 
> 赞同：-1
> 
> 时间：2012-11-29T03:06:05.630
> 
> 标签：mysql, sql

我想了解如何构建一个单个 mysql 查询来检索数据库上所有 TESTID 的 *。因此，我可以简单地运行一个查询，而不是为每个唯一的 TESTID 生成多个数据库调用（如下所示）运行 for 循环。

```
select * from test_results where TESTERID='3' and TESTID='5'
select * from test_results where TESTERID='3' and TESTID='9'
select * from test_results where TESTERID='3' and TESTID='10'
select * from test_results where TESTERID='3' and TESTID='12'
select * from test_results where TESTERID='3' and TESTID='15'
select * from test_results where TESTERID='3' and TESTID='4' 
```

感谢您的任何意见。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T03:08:18.630

如果列的数据类型是数字（*number*），则可以删除单引号，否则将其换行。

```
SELECT *
FROM   test_results 
WHERE  testerID = 3 AND
       testID IN (5,9,10,12,15,4) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T03:08:10.097

我会假设你正在寻找这个？

```
SELECT *
FROM test_results
WHERE
    TESTERID = '3'
    AND TESTID IN ('5', '9', '10', '12', '15', '4') 
```

如果您使用的是数字类型的字段，您可能应该使用它来代替：

```
SELECT *
FROM test_results
WHERE
    TESTERID = 3
    AND TESTID IN (5, 9, 10, 12, 15, 4) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T03:20:41.413

如果要从 testerid='3' 获取所有记录

```
select * from test_results where TESTERID='3' 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-29T03:15:16.943

谢谢，我想出了以下工作解决方案：

```
SELECT * FROM test_results WHERE testerID = 3 AND testID IN (select TESTID from test_results) 
```

# ruby-on-rails - Rails：渲染超类部分

> ID：13618161
> 
> 赞同：1
> 
> 时间：2012-11-29T03:06:31.237
> 
> 标签：ruby-on-rails, partial

我有两个类（Impressions 和 Replies），它们继承自父类 Comment：

```
class CommentsController < ApplicationController
  . . . .
end

class ImpressionsController < CommentsController
  . . . .
end

class RepliesController < CommentsController
  . . . .
end 
```

在我看来，我希望它们以相同的方式呈现。现在，我正在接近它：

```
<%= render @comment %> 
```

理想情况下，这将呈现部分“/comments/_comment”，但 Rails 想要呈现诸如“/impressions/_impression”或“/replies/_replies”之类的东西。有什么方法可以让 Rails 强大起来做“/comments/_comment”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T03:41:46.950

我认为这样的事情会有所帮助：

```
<%= render :partial => '/comments/comment', :collection => @impressions,
           :as => :comment %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-10T21:41:56.030

使用 :collection 可以渲染对象的集合。给定一个对象，您应该使用 :object 代替。

```
<%= render partial: '/comments/comment', object: @impression %> 
```

只要将部分命名为“注释”，就不需要 :as。如果您将部分命名为“my_comment”，则可以通过局部变量“my_comment”访问@impression，并且您必须使用 :as 来定义不同的本地名称。

但是，在您的情况下，我更愿意为 Impression 和 Replies 模型定义部分路径，如下所示（Rails >3.2.?）：

```
class Impression < ActiveRecord::Base
  ...  

  def to_partial_path
    "comments/comment"
  end
end 
```

然后您可以对对象或集合使用标准渲染

```
<%= render @comment %> 
```

# django - Django表单保存与post_save信号导致冲突

> ID：13618166
> 
> 赞同：2
> 
> 时间：2012-11-29T03:06:57.037
> 
> 标签：django, django-models, django-forms, django-signals

我有一个 Physical_therapy_order 模型和一个 Event 模型（一个事件具有 Physical_therapy_order 的外键）。我有一个允许用户创建新事件的视图。它还有一个包含来自 Physical_therapy_order 模型的 3 个字段的表单。

```
def PTEventCreateView(request, pt_pk):
    #get the pt order and create an a form for that order
    pt_order = get_object_or_404(Physical_therapy_order, pk=pt_pk)
    ptform = PT_schedule_form(instance=pt_order)

    if request.POST:
        eventform = PTEventForm(data=request.POST)
        ptform = PT_schedule_form(data=request.POST, instance=pt_order)

        if eventform.is_valid() and ptform.is_valid():
            #I do some checks here that compare data across the two forms.
            # if everything looks good i mark keep_saving=True so I can 
            # continue to save all the data provided in the two forms
            if keep_saving:
                ptform.save()
                eventform.save()
            #...send user to succss page 
```

这工作得很好，除了：我的 PTEvent 模型有一个附加到它的 post_save 信号的函数。此函数拉取事件的相关 pt_order 并对其进行一些修改。现在，如果我先保存事件表单，那么信号的变化就不会发生。如果我先保存 ptform，则 ptform 更改将被丢弃，并且信号的更改会发生。

这很重要：ptform 正在编辑三个与 post_save 信号完全不同的字段。所以它不像他们正在修改相同的数据，只是相同的模型实例。我认为表单仅将字段保存在其 meta.fields 属性中。为什么会发生这种情况？另外，如果我先保存 ptform，那么当保存 eventsform 时，信号不应该使用更新的物理治疗顺序吗？我不确定我是否走在正确的轨道上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T04:40:59.990

我认为这是因为缓存对象。

我建议的是

*   `eventform`先保存
*   获取`pt_order`查询数据库的新实例或通过保存的 eventform 实例
*   然后重新创建表单并保存。

示例代码更改：

```
# your code
if keep_saving:
    evt = eventform.save()
    # I'm not sure exact name of your field name for pt_order in Event model, change appropriately
    newptform = PT_schedule_form(data=request.POST, instance= evt.pt_order)
    newpt = newptform.save() 
```

# html - 更改背景大小：从左上角到右上角的覆盖锚点

> ID：13618167
> 
> 赞同：4
> 
> 时间：2012-11-29T03:06:59.117
> 
> 标签：html, css, background

我正在创建一个单页网站，其图像覆盖整个背景（并与窗口成比例地延伸）。为此，我使用了“背景尺寸：封面；”

现在，当我将窗口调整为最小尺寸时，背景图像似乎锚定在默认的左上角。

我有什么办法可以将锚定位置更改为右上角？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T03:24:22.930

尝试将您的 css 代码更改为如下所示：

```
body
{
   background:#ffffff url('img_tree.png') no-repeat right top;
   margin-right:200px;
} 
```

这里的演示：[http ://www.w3schools.com/css/tryit.asp?filename=trycss_background_shorthand](http://www.w3schools.com/css/tryit.asp?filename=trycss_background_shorthand)

# c - 使用 Valgrind 进行分段故障和调试

> ID：13618168
> 
> 赞同：0
> 
> 时间：2012-11-29T03:07:01.623
> 
> 标签：c, debugging, networking, network-programming, valgrind

我可能在这部分代码中遇到分段问题，使用 Valgrind 但我是新手，无法理解它的含义。有人可以帮我从以下代码中删除错误。Valgrind 的回应也在那里。在代码之后给出 valgrind 的响应。

```
send_file1=fopen("Document.txt","rb");
cout<<"what";
if(send_file1==NULL) 
{
if(int nofile = sendto(conn_sock , NoFile , sizeof(NoFile) , 0 ,(struct sockaddr *)&client_addr , sizeof(client_addr))==-1) //Sendin ACK
{
    cout<<"ERROR"<<endl;
    exit(1);
}

}
if(int accept = sendto(conn_sock , accepted , sizeof(accepted) , 0 ,(struct sockaddr *)&client_addr , sizeof(client_addr))==-1) //Sendin ACK
{
    cout<<"ERROR"<<endl;
    exit(1);
}
cout<<"CHECK"<<endl;
fseek (send_file1 , 0 , SEEK_END);
length = ftell (send_file1);
rewind (send_file1);

// allocate memory to contain the whole file:
Buffer = (char*) malloc (sizeof(char)*length);
if (Buffer == NULL) {fputs ("Memory error",stderr); exit (2);}

// copy the file into the buffer:
Read_byt = fread (Buffer,1,length,send_file1);
if (Read_byt != length) {fputs ("Reading error",stderr); exit (3);}

==11113== Invalid read of size 2
==11113==    at 0x41C924D: fseek (fseek.c:40) 
==11113==    by 0x8049B34: main (in /home/mishal/Downloads/Work Moby/Computer     Networks/Project/Phase 1/execute)
==11113==  Address 0x0 is not stack'd, malloc'd or (recently) free'd
==11113==  
==11113== 
==11113== Process terminating with default action of signal 11 (SIGSEGV)
==11113==  Access not within mapped region at address 0x0
==11113==    at 0x41C924D: fseek (fseek.c:40)
==11113==    by 0x8049B34: main (in /home/mishal/Downloads/Work Moby/Computer Networks/Project/Phase 1/execute)
==11113==  If you believe this happened as a result of a stack
==11113==  overflow in your program's main thread (unlikely but
==11113==  possible), you can try to increase the size of the
==11113==  main thread stack using the --main-stacksize= flag.
==11113==  The main thread stack size used in this run was 8388608.
==11113== 
==11113== HEAP SUMMARY:
==11113==     in use at exit: 9,067 bytes in 8 blocks
==11113==   total heap usage: 9 allocs, 1 frees, 9,419 bytes allocated
==11113== 
==11113== LEAK SUMMARY:
==11113==    definitely lost: 500 bytes in 5 blocks
==11113==    indirectly lost: 0 bytes in 0 blocks
==11113==      possibly lost: 0 bytes in 0 blocks
==11113==    still reachable: 8,567 bytes in 3 blocks
==11113==         suppressed: 0 bytes in 0 blocks
==11113== Rerun with --leak-check=full to see details of leaked memory
==11113== 
==11113== For counts of detected and suppressed errors, rerun with: -v
==11113== ERROR SUMMARY: 1 errors from 1 contexts (suppressed: 19 from 8) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T03:22:17.143

使用 (debug flag)编译代码以`-g`从 valgrind 获取更多信息，例如源代码中错误的位置。您打开的文件似乎不存在，因此请确保您正在检查外部调用的返回值（即，、、`fopen`... `fseek`）。

# php - php QR 码 - 显示文本而不是图像

> ID：13618171
> 
> 赞同：1
> 
> 时间：2012-11-29T03:07:25.267
> 
> 标签：php

我正在尝试让 QR 码正常工作。

当我像这样运行它时：

```
<?php
include 'phpqrcode/qrlib.php';

QRcode::png('hwllo');
?> 
```

它正在工作。但是，如果我使用其他一些 php 代码运行它

```
<?php
include 'phpqrcode/qrlib.php';

echo 'Hello world';

QRcode::png('hwllo');
?> 
```

它显示：

Hello world‰PNG IHDRWWKK/PLTEÿÿÿUÂÓ~²IDAT8ÍÒ1„ Ðo(èô&^ƒŽ+0r¸× ávÆYbÖÝ-phêM÷ùð´ˆLHD'qá,XÁZ'ç“Ë › š¶H CX™¾ª.ùú½¥êsUT<±eqhÖy|áÓÃ ;š¶¼wž3d„D8÷ŠÈ—*ÀøÌEEÆgãL `\ú4a_ÀZ§UŠãúw¶35l|ìër_Lë•¡ê’ßQœçgÍü#Ãò¡IEND®B`‚</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T03:09:08.613

您不能将这样的文本放在图像中，它会使其格式错误/损坏并且无法显示。使用您以前的代码，不要在图像内回显任何内容。如果您需要在图像旁边放置文本，请使用 HTML 并使用 IMG 标签链接到 QR 图像文件，就像 HTML 页面的普通图像文件一样。

# php - PHP 依赖注入。我的代码实际上是依赖注入容器吗？

> ID：13618173
> 
> 赞同：2
> 
> 时间：2012-11-29T03:07:44.127
> 
> 标签：php, dependency-injection

所以 - 我想将我的代码切换到依赖注入、依赖注入容器 (DIC) 范式。而且我一直在阅读它……在我看来，我一直在这样做……也许……

我在做什么 - 我正在为每个单独的项目创建命名空间类（容器？），我通常称之为 Api，然后我将实例化并从中获取配置的对象。实际示例：

```
<?php

/**
 * @namespace
 */
namespace SomeNamespace;

/**
 * api
 */
class api {
    public function __construct() {
        /*
         * Requiring all of the common files.
         */
        require_once( VENDORS_PATH . DIRECTORY_SEPARATOR . 'PHPMailer' . DIRECTORY_SEPARATOR . 'class.phpmailer.php' );
        require_once( VENDORS_PATH . DIRECTORY_SEPARATOR . 'PHPMailer' . DIRECTORY_SEPARATOR . 'class.smtp.php' );
    }

    private function getPostgresqlPreprocessor() {
        $spp = new \SomeNamespace\Utils\PostgresSearchPreProcessor();
        $settingsService = $this->getSettingsService();
        $settings = $settingsService->readSettings();
        $spp->setValidator( new \Auro\Validation\Validator() )
            ->setSettings( $settings )
            ->setConfig( require( CONFIGS_PATH . DIRECTORY_SEPARATOR . 'models_craig_config.php' ) );
        return $spp;
    }

    public function getDalApi() {
        return new \DalServices\Api();
    }

    public function getFeedsService() {
        $fc = \Auro\Mvc\Front::getInstance();
        $feedsService = new \SomeNamespace\Feeds();
        $renderer = new \Auro\View\Renderer();
        $renderer->setBasePath( VIEWS_PATH . DIRECTORY_SEPARATOR . 'feeds' );

        $feedsService
            ->setDalApi( new \DalServices\Api() )
            ->setSomeNamespaceApi( $this )
            ->setResponse( $fc->getResponse() )
            ->setPaginator( new \Auro\View\Paginator() )            
            ->setConfig( require( CONFIGS_PATH . DIRECTORY_SEPARATOR . 'models_feeds_config.php' ) )
            ->setCams( require( CONFIGS_PATH . DIRECTORY_SEPARATOR . 'webcams.php' ) )
            ->setRenderer( $renderer );
        return $feedsService;
    }

    public function getSettingsService() {
        $fc = \Auro\Mvc\Front::getInstance();
        $settingsService = new \SomeNamespace\Settings;
        $renderer = new \Auro\View\Renderer();
        $renderer->setBasePath( VIEWS_PATH . DIRECTORY_SEPARATOR . 'settings' );

        $settingsService
            ->setSomeNamespaceApi( $this )
            ->setValidator( new \Auro\Validation\Validator() )
            ->setConfig( require( CONFIGS_PATH . DIRECTORY_SEPARATOR . 'models_craig_config.php' ) )
            ->setDalApi( new \DalServices\Api() )
            ->setResponse( $fc->getResponse() )
            ->setRenderer( $renderer );
        return $settingsService;
    }

    public function getUsersService() {
        $fc = \Auro\Mvc\Front::getInstance();
        $usersService = new \SomeNamespace\Users();
        $renderer = new \Auro\View\Renderer();
        $renderer->setBasePath( VIEWS_PATH . DIRECTORY_SEPARATOR . 'users' );
        $usersService
            ->setSomeNamespaceApi( $this )
            ->setValidator( new \Auro\Validation\Validator() )
            ->setConfig( require( CONFIGS_PATH . DIRECTORY_SEPARATOR . 'models_craig_config.php' ) )
            ->setAvailableCurrencies( require( CONFIGS_PATH . DIRECTORY_SEPARATOR . 'currencies.php' ) )
            ->setLanguages( require( CONFIGS_PATH . DIRECTORY_SEPARATOR . 'languages.php' ) )           
            ->setPostgersqlPreprocessor( $this->getPostgresqlPreprocessor() )
            ->setResponse( $fc->getResponse() )
            ->setDalApi( new \DalServices\Api() )
            ->setRenderer( $renderer );
        return $usersService;
    }

    public function getVrcommentsService() {
        $fc = \Auro\Mvc\Front::getInstance();
        $vrcommentsService = new \SomeNamespace\Vrcomments();
        $renderer = new \Auro\View\Renderer();
        $renderer->setBasePath( VIEWS_PATH . DIRECTORY_SEPARATOR . 'vrcomments' );
        $vrcommentsService
            ->setSomeNamespaceApi( $this )
            ->setValidator( new \Auro\Validation\Validator() )
            ->setConfig( require( CONFIGS_PATH . DIRECTORY_SEPARATOR . 'models_craig_config.php' ) )
            ->setPostgersqlPreprocessor( $this->getPostgresqlPreprocessor() )
            ->setPaginator( new \Auro\View\Paginator() )
            ->setResponse( $fc->getResponse() )
            ->setDalApi( new \DalServices\Api() )
            ->setRenderer( $renderer );
        return $vrcommentsService;
    }

    public function getVrentalsService() {
        $fc = \Auro\Mvc\Front::getInstance();
        $renderer = new \Auro\View\Renderer();
        $renderer->setBasePath( VIEWS_PATH . DIRECTORY_SEPARATOR . 'vrentals' );
        $vrentalsService = new \SomeNamespace\Vrentals();
        $vrentalsService
            ->setSomeNamespaceApi( $this )
            ->setValidator( new \Auro\Validation\Validator() )
            ->setConfig( require( CONFIGS_PATH . DIRECTORY_SEPARATOR . 'models_craig_config.php' ) )
            ->setPostgersqlPreprocessor( $this->getPostgresqlPreprocessor() )
            ->setPaginator( new \Auro\View\Paginator() )
            ->setDalApi( new \DalServices\Api() )
            ->setRenderer( $renderer )
            ->setResponse( $fc->getResponse() )
            ->setMailConfig( require( CONFIGS_PATH . DIRECTORY_SEPARATOR . 'models_craig_mail.php' ) )
            ->setMailer( new \PHPMailer( true ) );
        return $vrentalsService;
    }

    public function getNoAikService() {
        $fc = \Auro\Mvc\Front::getInstance();
        $renderer = new \Auro\View\Renderer();
        $renderer->setBasePath( VIEWS_PATH . DIRECTORY_SEPARATOR . 'noaik' );
        $AikService = new \SomeNamespace\Noaik();
        $noAikService
            ->setSomeNamespaceApi( $this )
            ->setValidator( new \Auro\Validation\Validator() )
            ->setConfig( require( CONFIGS_PATH . DIRECTORY_SEPARATOR . 'models_craig_config.php' ) )
            ->setPostgersqlPreprocessor( $this->getPostgresqlPreprocessor() )
            ->setPaginator( new \Auro\View\Paginator() )
            ->setResponse( $fc->getResponse() )
            ->setDalApi( new \DalServices\Api() )
            ->setRenderer( $renderer )
            ->setMailConfig( require( CONFIGS_PATH . DIRECTORY_SEPARATOR . 'models_craig_mail.php' ) )
            ->setMailer( new \PHPMailer( true ) );
        return $noAikService;
    }

    public function getTotalauthService() {
        $fc = \Auro\Mvc\Front::getInstance();
        $renderer = new \Auro\View\Renderer();
        $renderer->setBasePath( VIEWS_PATH . DIRECTORY_SEPARATOR . 'totalauth' );
        $totalauthService = new \SomeNamespace\Totalauth();
        $totalauthService
            ->setSomeNamespaceApi( $this )
            ->setValidator( new \Auro\Validation\Validator() )
            ->setRenderer( $renderer )
            ->setResponse( $fc->getResponse() )
            ->setDalApi( new \DalServices\Api() )
            ->setConfig( require( CONFIGS_PATH . DIRECTORY_SEPARATOR . 'models_totalauth_config.php' ) )
            ->setMailConfig( require( CONFIGS_PATH . DIRECTORY_SEPARATOR . 'models_totalauth_mail.php' ) )
            ->setMailer( new \PHPMailer( true ) );
        return $totalauthService;
    }

    public function getQuickmailService() {
        $fc = \Auro\Mvc\Front::getInstance();
        $quickmailService = new \SomeNamespace\Quickmail();
        $quickmailService
            ->setSomeNamespaceApi( $this )
            ->setValidator( new \Auro\Validation\Validator() )
            ->setResponse( $fc->getResponse() )
            ->setMailConfig( require( CONFIGS_PATH . DIRECTORY_SEPARATOR . 'models_quickmail_mail.php' ) )
            ->setMailer( new \PHPMailer( true ) );
        return $quickmailService;
    }
}

?> 
```

有人可以确认这实际上是依赖注入容器，还有什么可以改进的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T03:51:40.207

To me this looks like a collection of methods to instantiate objects needed by the specific API. I don't know that I would consider it dependency injection in and of itself. It is hard to tell though without seeing how this class is actually used. To me, a dependency injection container would basically containe metadata about how to instantiate various classes that implement a common interface.

So a sample set of classes that might interact to achieve dependency injection might look like:

```
class db_dependency_provider {
    private static $class_map = array(
        'postgres' => 'postgres_abstraction_class',
        'mysql' => 'mysql_abstraction_class',
        'oracle' => 'oracle_abstraction_class'
    }

    public static function get_db_abstraction($type) {
        $class = self::$class_map[$type];
        return new $class();
    }
}

interface db_abstraction_interface {
    public function connect();
    public function query($query);
    // etc.
}

class mysql_db_abstraction implements db_abstraction_interface {
    // actual implementation
}

class postgres_db_abstraction implements db_abstraction_interface {
    // actual implementation
}

class some_class_that_needs_a_db {
    $db = null;
    public function __construct($db) {
        $this->db = $db;
    }
    // other methods
}

// use dependency injection container
$class = new some_class_that_needs_a_db(db_dependency_provider::get_db_abstraction('mysql')); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T02:11:46.460

I posted an answer to a similar question earlier this year. I believe it should address your concern. [How can I use "Dependency Injection" in simple php functions, and should I bother?](https://stackoverflow.com/questions/2255771/how-can-i-use-dependency-injection-in-simple-php-functions-and-should-i-bothe/9982218#9982218)

It looks like you could also benefit from PHP autoloading, which is also available from the [Bart](https://github.com/box/bart) project as well as other open source projects like Composer.

For a general dependency injection primer, you might check out Martin Fowler: [http://martinfowler.com/articles/injection.html](http://martinfowler.com/articles/injection.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T21:43:01.573

This isn't really dependency injection.

Dependency Injection is when a piece of code relies on some other piece of code. The method signatures and expected return values are known, but the implementation is not. You can totally do this in php but its different from what you have done.

This is what dependency injection might look like(Entirely contrived example):

```
<?php
class PartnerAttachmentReader implements AttachmentReader{
  private $titleParsingStrategy; 

  private function __construct($titleParsingStrategy){
    $this->titleParsingStrategy = $titleParsingStrategy;
  }

  public static function getInstance($titleParsingStrategy){
    return new PartnerAttachmentReader($titleParsingStrategy);
  }

  public function getTitle($attachment){
    $this->titleParsingStrategy->parseTitle($attachment)
  }

  public function parseAttachment(){
     //Do Some Parsing
  }

} 
?> 
```

What is `$titleParsingStrategy`? how does it work? unknown. The point is I don't have to care. I can substitute other implementations at my leisure including mock ones at test time.

DI is also useful when dealing with volatile things like disk or network. You can separate the disk and network access in a "dependecy" and test the target of the injection for completeness and correctness without being beholden to network drops or state changes on disk.

# php - 在 Wordpress 帖子中获取类别

> ID：13618174
> 
> 赞同：0
> 
> 时间：2012-11-29T03:07:44.837
> 
> 标签：php, wordpress

好的，我在这里有一个标准的帖子：

[http://www.ticketyoda.co.uk/concerts/rihanna-tickets/rihanna-tickets-manchester-2013-06-12-united-kingdom/970](http://www.ticketyoda.co.uk/concerts/rihanna-tickets/rihanna-tickets-manchester-2013-06-12-united-kingdom/970)

我试图使每个帖子都独一无二，并包含城市（曼彻斯特）和艺术家（蕾哈娜）的类别信息。

目前，场地下方的框包含从类别中获取的信息（请参阅面包屑）。所以我有 2 个中的 1 个。我现在需要的是下面的一个额外的框来显示艺术家的类别信息。

我用 ： `<?php $category = get_the_category(); echo $category[0]->category_description; ?>`

获得第一类。

你可以在这里的帖子下看到蕾哈娜的描述：

[http://www.ticketyoda.co.uk/concerts/rihanna-tickets/](http://www.ticketyoda.co.uk/concerts/rihanna-tickets/)

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T17:05:08.693

我认为您只获得一个类别的原因是由于您的回声声明。它只需要 1 个值 $category[0]，以便获得第二个类别 try [1]。出于好奇，第二类是第一类的孩子吗？

# c - 轮询时间调度中的时间片

> ID：13618175
> 
> 赞同：7
> 
> 时间：2012-11-29T03:07:49.690
> 
> 标签：c, operating-system, scheduling, job-scheduling, round-robin

如果循环调度程序的时间片非常大（比如说太大），我应该在操作系统中期望什么样的性能影响？

我唯一的想法是需要大量时间的流程会受益，但大多数流程使用的时间很少，所以会导致完成所有较小流程的延迟？

示例：时间片为 50，进程 P1=400, P2=10, P3 = 150, P4 = 20, P5 = 10, P6 = 10

这是我最好的猜测，我想知道你们是否可以分享任何关于时间片太小或太大的东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-29T05:58:45.463

循环法的问题是任务不相等。

对于 CPU 密集型任务；如果你有一项极其重要的任务和数千个不重要的任务，那么所有这些不重要的任务都会削弱重要任务的执行。对于这种情况，时间片有多大并不重要。

对于 IO 绑定任务，轮询会导致不良延迟。如果一个重要任务解除阻塞（例如在调用“sleep()”后唤醒，接收它正在等待的文件 IO 等），那么它可能必须等待数千个不重要的任务在重要任务之前完成它们的时间片有机会做任何事。减少时间片长度将减少重要任务开始做一些有用的事情所需的时间，但也会减少重要任务做一些有用的事情的时间。

*注意：您可能想通过将解除阻塞的任务放在列表的开头来“修复”这个问题。在这种情况下，一项重要的任务可能会因为不重要的任务一直在睡觉和醒来而永远被饿死。*

从本质上讲，循环是一堆“无用”的热气腾腾的东西，除非你用完全不同的调度算法替换它，否则你做什么都不重要，至少对不同任务的重要性/优先级有一定的尊重。

举一个过于简单的例子；您可以有 3 个不同的任务优先级，其中操作系统只运行它可以运行的最高优先级任务（包括确保较高优先级的任务立即抢占较低优先级的任务），并且循环用于具有相同优先级的任务。在这种情况下，您可以为不同的优先级设置不同的时间片长度（例如，高优先级任务仅获得 1 毫秒，中优先级任务获得 10 毫秒，低优先级任务获得 125 毫秒）。

对于“不太简单”的示例；您可以有几种完全不同的调度策略（例如，一种用于实时任务，一种用于普通任务，一种用于后台/空闲任务），它们都使用不同的方法（例如，最早的截止日期优先，可变时间片等）；每个调度策略有 256 个任务优先级。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-18T04:26:55.517

从时间切片的角度来看，有两种极端情况会降低性能。如果时间片是：

1.  太大：导致小进程等待很长时间，如果时间片更小，它们本可以更早完成。此外，这对于需要更小但频繁的 CPU 时间的交互式进程也是不利的。
2.  太小：导致频繁的上下文切换，这相当于显着的开销。

从历史上看，操作系统开发人员一直在努力在这两个极端之间取得平衡，并且有各种基于优先级的算法被循环吸收以获得更好的性能。

# notation - 符号 T(n) 是什么意思？

> ID：13618183
> 
> 赞同：13
> 
> 时间：2012-11-29T03:08:30.743
> 
> 标签：notation

我们学习了大 O 表示法，但我也经常看到 T(n)。例如，

```
public static Comparable[] mergeSort(Comparable[] A, int low, int high) {
  if (low < high) { //at least 2 elements?                //cost = c
    int mid = (low + high)/2;                             //cost = d
    Comparable[] A1 = mergeSort(A, low, mid);             //cost = T(n/2) + e
    Comparable[] A2 = mergeSort(A, mid+1, high);          //cost = T(n/2) + f
    return merge(A1,A2);                                  //cost = g n + h
  }
  .... //cost = i 
```

我相信 c,d,e,... 是任意命名的常量。

T(n/2) 是什么意思？T符号与大O有什么关系？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-29T03:13:52.607

这种表示法指的是函数运行所需的最大时间量（或更具体地说，是步骤）。

T(n) 可能比 O(n) 更具体；例如，假设您有一个程序，对于任何输入，都需要`n^2+n+1`运行以下步骤：

```
T(n) = n^2+n+1
O(n) = n^2 
```

更多信息可以在[这里](http://en.wikipedia.org/wiki/Time_complexity)找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T03:14:00.430

我个人以前从未见过这种表示法，但我怀疑它指的是“big-Theta”（Θ），它既是渐近上界（big-O）又是渐近下界。

也相关：Big-Omega (Ω) 仅用于表示渐近下界（镜像 big-O）。

# android - Android 使用按钮进行导航（意图）

> ID：13618184
> 
> 赞同：0
> 
> 时间：2012-11-29T03:08:31.500
> 
> 标签：android, button, android-intent

如果我使用按钮来浏览我的应用程序（启动不同的活动）会不会有任何复杂性？我尝试过使用 tabhost，但如果我想更改选项卡中的某些内容，由于不推荐使用 tabactivitygroup，可能会遇到一些困难。如果按钮工作得很好，我可以在所有活动中重复它们。不过，我注意到使用这种方法在改变活动方面略有滞后。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T15:37:57.590

您是否尝试过使用 Fragments ( [http://developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html) ) 而不是启动不同的活动？您可以在活动中根据需要使用按钮，并且可以使用片段来更改主要内容。这可以提高您的布局性能。

# opengl - OpenGL - 透明纹理重叠的问题

> ID：13618186
> 
> 赞同：1
> 
> 时间：2012-11-29T03:08:51.657
> 
> 标签：opengl, texturing

我对 OpenGL 很陌生，我一直在[http://open.gl/](http://open.gl/)上阅读教程。我试图将它们扩展为一个学校项目。我遇到了多个纹理无法正确渲染的问题。由于某种原因，前一个纹理在下一个纹理下方“徘徊”。我不确定这里发生了什么真的很感激一些洞察力。我在下面有一张问题的图片，我认为它清楚地显示了问题和下面的代码。

这是imgur上的链接，因为我还不能在这里发布图片： [问题图片](http://i.imgur.com/Hjkuq.jpg)

这是代码：

```
 //Needed for SDL GLEW Support
 #define NO_SDL_GLEXT

//Headers
#include <GL/glew.h>
#include <SDL.h>
#include <SDL_opengl.h>
#include <iostream>
#include <ctime>
#include <SOIL.h>
#include <glm/glm.hpp>
#include <glm/gtc/matrix_transform.hpp>
#include <glm/gtc/type_ptr.hpp>

// Shader sources
const char* vertexSource =
"#version 150\n"
"in vec2 position;"
"in vec3 color;"
"in vec2 texcoord;"
"out vec3 Color;"
"out vec2 Texcoord;"
"uniform mat4 trans;"
"void main() {"
"   Color = color;"
"   Texcoord = texcoord;"
"   gl_Position = vec4( position, 0.0, 1.0 );"
"}";

const char* fragmentSource =
"#version 150\n"
"in vec3 Color;"
"in vec2 Texcoord;"
"out vec4 outColor;"
"uniform sampler2D texture;"
"uniform int texNum;"
"void main() {"
"   outColor = texture( texture, Texcoord );"
"}";

int main( int argc, char *argv[] )
{
//Create the SDL Window
SDL_Init( SDL_INIT_VIDEO );
SDL_Surface* surface = SDL_SetVideoMode( 1280, 720, 32, SDL_HWSURFACE | SDL_DOUBLEBUF | SDL_OPENGL );
SDL_WM_SetCaption( "OpenGL", 0 );

// Initialize GLEW
glewExperimental = GL_TRUE;
glewInit();

//Enable transparency
glEnable (GL_BLEND);
glBlendFunc (GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);

// Create Vertex Array Object
GLuint vao;
glGenVertexArrays( 1, &vao );
glBindVertexArray( vao );

// Create a Vertex Buffer Object and copy the vertex data to it
GLuint vbo;
glGenBuffers( 1, &vbo );

float backgroundVertices[] = {
//  Position      Color             Texcoords
    //Background
    -1.0f, -1.0f, 1.0f, 1.0f, 1.0f, 0.0f, 1.0f, //Bottom-left
     1.0f, -1.0f, 1.0f, 1.0f, 1.0f, 1.0f, 1.0f, //Bottom-right
     1.0f,  1.0f, 1.0f, 1.0f, 1.0f, 1.0f, 0.0f, //Top-right
     1.0f,  1.0f, 1.0f, 1.0f, 1.0f, 1.0f, 0.0f, //Top-right
    -1.0f,  1.0f, 1.0f, 1.0f, 1.0f, 0.0f, 0.0f, //Top-left
    -1.0f, -1.0f, 1.0f, 1.0f, 1.0f, 0.0f, 1.0f, //Bottom-left

    //X
    -0.8f, -0.8f, 1.0f, 1.0f, 1.0f, 0.0f, 1.0f, //Bottom-left
    -0.2f, -0.8f, 1.0f, 1.0f, 1.0f, 1.0f, 1.0f, //Bottom-right
    -0.2f, -0.6f, 1.0f, 1.0f, 1.0f, 1.0f, 0.0f, //Top-right
    -0.2f, -0.6f, 1.0f, 1.0f, 1.0f, 1.0f, 0.0f, //Top-right
    -0.8f, -0.6f, 1.0f, 1.0f, 1.0f, 0.0f, 0.0f, //Top-left
    -0.8f, -0.8f, 1.0f, 1.0f, 1.0f, 0.0f, 1.0f, //Bottom-left

    //Y
     0.2f, -0.8f, 1.0f, 1.0f, 1.0f, 0.0f, 1.0f, //Bottom-left
     0.8f, -0.8f, 1.0f, 1.0f, 1.0f, 1.0f, 1.0f, //Bottom-right
     0.8f, -0.6f, 1.0f, 1.0f, 1.0f, 1.0f, 0.0f, //Top-right
     0.8f, -0.6f, 1.0f, 1.0f, 1.0f, 1.0f, 0.0f, //Top-right
     0.2f, -0.6f, 1.0f, 1.0f, 1.0f, 0.0f, 0.0f, //Top-left
     0.2f, -0.8f, 1.0f, 1.0f, 1.0f, 0.0f, 1.0f, //Bottom-left

    //Logo
    -0.25f, -0.1f, 1.0f, 1.0f, 1.0f, 0.0f, 1.0f, //Bottom-left
     0.25f, -0.1f, 1.0f, 1.0f, 1.0f, 1.0f, 1.0f, //Bottom-right
     0.25f,  0.7f, 1.0f, 1.0f, 1.0f, 1.0f, 0.0f, //Top-right
     0.25f,  0.7f, 1.0f, 1.0f, 1.0f, 1.0f, 0.0f, //Top-right
    -0.25f,  0.7f, 1.0f, 1.0f, 1.0f, 0.0f, 0.0f, //Top-left
    -0.25f, -0.1f, 1.0f, 1.0f, 1.0f, 0.0f, 1.0f  //Bottom-left
};

glBindBuffer( GL_ARRAY_BUFFER, vbo );
glBufferData( GL_ARRAY_BUFFER, sizeof( backgroundVertices ), backgroundVertices, GL_STATIC_DRAW );

glBindBuffer( GL_ELEMENT_ARRAY_BUFFER, vbo );
glBufferData( GL_ELEMENT_ARRAY_BUFFER, sizeof( backgroundVertices ), backgroundVertices, GL_STATIC_DRAW );

// Create and compile the vertex shader
GLuint vertexShader = glCreateShader( GL_VERTEX_SHADER );
glShaderSource( vertexShader, 1, &vertexSource, NULL );
glCompileShader( vertexShader );

// Create and compile the fragment shader
GLuint fragmentShader = glCreateShader( GL_FRAGMENT_SHADER );
glShaderSource( fragmentShader, 1, &fragmentSource, NULL );
glCompileShader( fragmentShader );

// Link the vertex and fragment shader into a shader program
GLuint shaderProgram = glCreateProgram();
glAttachShader( shaderProgram, vertexShader );
glAttachShader( shaderProgram, fragmentShader );
glBindFragDataLocation( shaderProgram, 0, "outColor" );
glLinkProgram( shaderProgram );
glUseProgram( shaderProgram );

// Specify the layout of the vertex data
GLint posAttrib = glGetAttribLocation( shaderProgram, "position" );
glEnableVertexAttribArray( posAttrib );
glVertexAttribPointer( posAttrib, 2, GL_FLOAT, GL_FALSE, 7 * sizeof( float ), 0 );

GLint colAttrib = glGetAttribLocation( shaderProgram, "color" );
glEnableVertexAttribArray( colAttrib );
glVertexAttribPointer( colAttrib, 3, GL_FLOAT, GL_FALSE, 7 * sizeof( float ), (void*)( 2 * sizeof( float ) ) );

GLint texAttrib = glGetAttribLocation( shaderProgram, "texcoord" );
glEnableVertexAttribArray( texAttrib );
glVertexAttribPointer( texAttrib, 2, GL_FLOAT, GL_FALSE, 7 * sizeof( float ), (void*)( 5 * sizeof( float ) ) );

// Load textures
GLuint textures[4];
glGenTextures( 4, textures );

int width, height;
unsigned char* image;

glActiveTexture( GL_TEXTURE0 );
glBindTexture( GL_TEXTURE_2D, textures[0] );
    image = SOIL_load_image( "menubackground.png", &width, &height, 0, SOIL_LOAD_RGBA );
    glTexImage2D( GL_TEXTURE_2D, 0, GL_RGBA, width, height, 0, GL_RGBA, GL_UNSIGNED_BYTE, image );
    SOIL_free_image_data( image );

glTexParameteri( GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE );
glTexParameteri( GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE );
glTexParameteri( GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR );
glTexParameteri( GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR );

glActiveTexture( GL_TEXTURE1 );
glBindTexture( GL_TEXTURE_2D, textures[1] );
    image = SOIL_load_image( "winona.png", &width, &height, 0, SOIL_LOAD_RGBA );
    glTexImage2D( GL_TEXTURE_2D, 0, GL_RGBA, width, height, 0, GL_RGBA, GL_UNSIGNED_BYTE, image );
    SOIL_free_image_data( image );

glTexParameteri( GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE );
glTexParameteri( GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE );
glTexParameteri( GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR );
glTexParameteri( GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR );

glActiveTexture( GL_TEXTURE2 );
glBindTexture( GL_TEXTURE_2D, textures[2] );
    image = SOIL_load_image( "kombat.png", &width, &height, 0, SOIL_LOAD_RGBA );
    glTexImage2D( GL_TEXTURE_2D, 0, GL_RGBA, width, height, 0, GL_RGBA, GL_UNSIGNED_BYTE, image );
    SOIL_free_image_data( image );

glTexParameteri( GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE );
glTexParameteri( GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE );
glTexParameteri( GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR );
glTexParameteri( GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR );

glActiveTexture( GL_TEXTURE3 );
glBindTexture( GL_TEXTURE_2D, textures[3] );
    image = SOIL_load_image( "logo.png", &width, &height, 0, SOIL_LOAD_RGBA );
    glTexImage2D( GL_TEXTURE_2D, 0, GL_RGBA, width, height, 0, GL_RGBA, GL_UNSIGNED_BYTE, image );
    SOIL_free_image_data( image );

glTexParameteri( GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE );
glTexParameteri( GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE );
glTexParameteri( GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR );
glTexParameteri( GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR );

glActiveTexture( GL_TEXTURE4 );
glBindTexture( GL_TEXTURE_2D, textures[4] );
    image = SOIL_load_image( "JaredSpriteSheet.png", &width, &height, 0, SOIL_LOAD_RGBA );
    glTexImage2D( GL_TEXTURE_2D, 0, GL_RGBA, width, height, 0, GL_RGBA, GL_UNSIGNED_BYTE, image );
    SOIL_free_image_data( image );

glTexParameteri( GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE );
glTexParameteri( GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE );
glTexParameteri( GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR );
glTexParameteri( GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR );

SDL_Event windowEvent;
while(true)
{
    if (SDL_PollEvent(&windowEvent))
    {
        if (windowEvent.type == SDL_QUIT ) break;
    }

    // Clear the screen to black
    glClearColor( 0.0f, 0.0f, 0.0f, 1.0f );
    glClear( GL_COLOR_BUFFER_BIT );

    //Draw rectangles from the 2 triangles using 6 indices and set textures
    //glActiveTexture( GL_TEXTURE0 );
    //glBindTexture( GL_TEXTURE_2D, textures[0] );
    glUniform1i( glGetUniformLocation( shaderProgram, "texture" ), 0 );
    glDrawArrays( GL_TRIANGLES, 0, 6 );

    //glActiveTexture( GL_TEXTURE1 );
    //glBindTexture( GL_TEXTURE_2D, textures[1] );
    glUniform1i( glGetUniformLocation( shaderProgram, "texture" ), 1 ); 
    glDrawArrays( GL_TRIANGLES, 6, 12 );

    //glActiveTexture( GL_TEXTURE2 );
    //glBindTexture( GL_TEXTURE_2D, textures[2] );
    glUniform1i( glGetUniformLocation( shaderProgram, "texture" ), 2 );
    glDrawArrays( GL_TRIANGLES, 12, 18 );

    //glActiveTexture( GL_TEXTURE3 );
    //glBindTexture( GL_TEXTURE_2D, textures[3] );
    glUniform1i( glGetUniformLocation( shaderProgram, "texture" ), 3 );
    glDrawArrays( GL_TRIANGLES, 18, 24 );

    glBindTexture( GL_TEXTURE_2D, 0 );

    SDL_GL_SwapBuffers();
}

SDL_Quit();
return 0;

glDeleteTextures( 4, textures );

glDeleteProgram( shaderProgram );
glDeleteShader( fragmentShader );
glDeleteShader( vertexShader );

glDeleteBuffers( 1, &vbo );

glDeleteVertexArrays( 1, &vao ); 
```

}

# objective-c - 有没有一种简单的方法可以在代码运行时更新进度条

> ID：13618188
> 
> 赞同：1
> 
> 时间：2012-11-29T03:09:07.850
> 
> 标签：objective-c, for-loop, nstextfield, nsprogressindicator

> **可能重复：**
> [带有 For 循环的 NSProgressIndicator 进度？](https://stackoverflow.com/questions/7142183/nsprogressindicator-progress-with-for-loops)

这次我有一个简单的问题（希望如此）。我有一个 NSProgressIndicatorView （进度条），我想在 for 循环运行时更新它的值和状态标签：

```
for(int i=0; i<[nameArr count]; i++)
{
    NSString* str = [nameArr objectAtIndex:i];
    [text setStringValue:str];
    [status setStringValue:[NSString stringWithFormat:@"Processing names...%d of %ld",(i+1),[nameArr count]]];
    [progress setDoubleValue:i];
} 
```

此代码有效，但在整个 for 循环完成之前，状态标签和进度条不会更新。如果我将它们作为 发送，我可以观察它运行时的工作情况`NSLog`，所以我认为应该有一种简单的方法（不创建`NSOperation`）来类似地更新我的状态标签和进度条。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T03:17:56.787

在进行了一些挖掘之后，可以使用以下代码通过 for 循环异步更新 UI：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^(void) {
    for(int i=0; i<max; i++)
    {
        //Run for loop stuff here

        dispatch_async(dispatch_get_main_queue(), ^(void) {
           //Run UI updates in here 
        });
    }
}); 
```

# objective-c - 如何将数组/字典传输到其他视图控制器？

> ID：13618191
> 
> 赞同：0
> 
> 时间：2012-11-29T03:09:45.213
> 
> 标签：objective-c, ios

> **可能的重复：**
> [在视图控制器之间传递数据](https://stackoverflow.com/questions/5210535/passing-data-between-view-controllers)

我有一个数组/字典需要从 转移`viewController1`到`viewController3`. 存入plist还是`NSUserDefault`太复杂了，想找个更有效的处理方法。小伙伴们有什么建议吗？感谢您的提示提前帮助。

**解决方案：** 最后我找到了修复传输的方法，这是我认为最有效的方法。首先，我们创建一个单例类并创建一个保存数组/字典的方法。然后，在 *.h 文件中声明一个数组对象。下一步，调用这个单例方法来保存你的数组。最后一步，调用方法，你会得到你的数据~

它似乎工作得很好。我们不再需要传输数据视图来查看了，cooll~

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T03:16:59.673

```
@interface ViewController3 : UIViewController

//Add a public property for your ViewController3
@property (strong, nonatomic) NSArray *nameArray;

@end

// transfer it like this
NSArray *nameArray = @[@"Green", @"Gordan"];
ViewController3 *viewController3 = [[ViewController3 alloc] init];
viewController3.nameArray = nameArray; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T03:17:22.623

这很简单。声明一个 NSDictionary 指针变量`viewController3`，然后赋值。

# z3 - ctx-solver-simplify 中的不对称行为

> ID：13618192
> 
> 赞同：2
> 
> 时间：2012-11-29T03:09:49.017
> 
> 标签：z3

我从[https://git01.codeplex.com/z3](https://git01.codeplex.com/z3) (89c1785b)`ctx-solver-simplify`的 master 分支中看到了相当令人惊讶的行为，其中 z3.And() 的参数顺序似乎很重要：

```
#!/usr/bin/python
import z3

a, b = z3.Bools('a b')
p = z3.Not(a)
q = z3.Or(a, b)
for e in z3.And(p, q), z3.And(q, p):
  print e, '->', z3.Tactic('ctx-solver-simplify')(e) 
```

产生：

```
And(Not(a), Or(a, b)) -> [[Not(a), Or(a, b)]]
And(Or(a, b), Not(a)) -> [[b, Not(a)]] 
```

这是Z3的错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T07:54:51.197

不，这不是错误。这种策略`ctx-solver-simplify`非常昂贵并且本质上是不对称的。也就是说，访问子公式的顺序会影响最终结果。这个策略在文件中实现`src/smt/tactic/ctx_solver_simplify_tactic.cpp`。代码可读性很强。请注意，它使用“SMT”求解器 ( )，并在遍历输入公式时`m_solver`进行多次调用。`m_solver.check()`这些调用中的每一个都可能非常昂贵。对于特定的问题域，我们可以实施这种策略的一个版本，它甚至更昂贵，并避免您的问题中描述的不对称性。

**编辑：**

你也可以考虑战术`ctx-simplify`，它比 便宜`ctx-solver-simplify`，但它是对称的。该策略`ctx-simplify`基本上将应用以下规则：

```
A \/ F[A] ==> A \/ F[false]
x != c \/ F[x] ==> F[c] 
```

哪里`F[A]`是一个可能包含的公式`A`。它比它更便宜，`ctx-solver-simplify`因为它在遍历公式时不调用 SMT 求解器。这是使用此策略的示例（也可[在线](http://rise4fun.com/Z3Py/Ghzz)获得）：

```
a, b = Bools('a b')
p = Not(a)
q = Or(a, b)
c = Bool('c')
t = Then('simplify', 'propagate-values', 'ctx-simplify')
for e in Or(c, And(p, q)), Or(c, And(q, p)):
  print e, '->', t(e) 
```

关于人类可读性，在实施任何策略时，这从来都不是目标。请告诉我们上述策略是否不足以满足您的目的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T16:18:24.983

我认为编写自定义策略会更好，因为当您本质上要求规范性时还有其他权衡。Z3 没有任何将公式转换为规范形式的策略。因此，如果您想要始终为等效的公式产生相同答案的东西，则必须编写一个新的规范化器来确保这一点。

The ctx_solver_simplify_tactic furthermore makes some tradeoffs when simplifying formulas: it avoids simplifying the same sub-formula multiple times. If it did, it could increase the size of the resulting formula significantly (exponentially).

# sql - 列出从事项目的员工最多的部门名称

> ID：13618194
> 
> 赞同：1
> 
> 时间：2012-11-29T03:10:09.047
> 
> 标签：sql, oracle11g

因此，此语句适用于三个表。包含部门名称和部门 ID 的部门表，包含与项目相关的项目和员工 ID 的 workon 表，以及包含员工 ID、部门 ID 和名称的员工表。我试图找到从事项目工作的员工最多的部门。

这是我的代码：

```
select distinct 
    (dname) as "Division Name"
from 
    employee e, division d
where 
    d.did = e.did and 
    d.did in (
        select did from employee where empid in (
            select empid from workon having count(pid) >= all(pid)
        )
    ) 
```

我应该得到“人力资源”的答案，但无论我使用什么代码，我似乎都无法得到这个答案。

```
Workon table

PID EMPID   HOURS
3   1   30
2   3   40
5   4   30
6   6   60
4   3   70
2   4   45
5   3   90
3   3   100
6   8   30
4   4   30
5   8   30
6   7   30
6   9   40
5   9   50
4   6   45
2   7   30
2   8   30
2   9   30
1   9   30
1   8   30
1   7   30
1   5   30
1   6   30
2   6   30

Employee Table

EMPID   NAME    SALARY  DID
1   kevin   32000   2
2   joan    42000   1
3   brian   37000   3
4   larry   82000   5
5   harry   92000   4
6   peter   45000   2
7   peter   68000   3
8   smith   39000   4
9   chen    71000   1
10  kim 46000   5
11  smith   46000   1

Division
DID DNAME   MANAGERID
1   engineering 2
2   marketing   1
3   human resource  3
4   Research and development    5
5   accounting  4 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T04:11:15.160

请检查此参考。

[SQLFIDDLE](http://sqlfiddle.com/#!2/b3717/1)

```
select d.id, d.name, p.maxcounts
from dept d, 
(select we.dep, max(we.counts) as maxcounts 
 from (select w.eid, count(w.pid) as counts, 
 e.dep as dep from employee e, workon w
where e.id = w.eid
group by e.dep) as we) as p
where d.id = p.dep
; 
```

结果：

```
ID      NAME                MAXCOUNTS
111     human resoruces     5 
```

## 以下是根据您自己的数据进行的编辑：

参考：[SQLFIDDLE_Based_ON_OP_Data](http://sqlfiddle.com/#!2/e6f88d/1)

您可以通过三种方式实现这一目标。要么使用嵌套选择，将 Max(count) 保存到变量中，要么按 desc 排序数据并将其限制为 1。

方法一：

-- 使用嵌套选择

--**子查询 1**向 OP 解释如何得出最终答案

```
select e.dep, count(w.eid) as num_emp
from employee e, workon w
where e.id = w.eid
group by e.dep
order by e.dep
;
-- **results of sub query 1:**

DEP     NUM_EMP
1           4
2           5
3           7
4           5
5           3 
```

--**最终的嵌套选择查询**

```
select ee.dep, dd.name, count(ww.eid)
from employee ee, dept dd, workon ww
where ee.id = ww.eid
and ee.dep = dd.id
group by ee.dep, dd.name
having count(ww.eid) = 
(select distinct max(t.num_emp)
from (select e.dep, count(w.eid) as num_emp
from employee e, workon w
where e.id = w.eid
group by e.dep
order by e.dep)as t)
; 
```

**-- 使用嵌套选择的结果**

```
DEP     NAME            COUNT(WW.EID)
3       human resource  7 
```

**-- 使用变量查询**

```
select max(x.num_emp) into @myvar from 
(select e.dep, count(w.eid) as num_emp
from employee e, workon w
where e.id = w.eid
group by e.dep) as x
;

select x.dep, x.name, x.num_emp as num_emp from 
(select e.dep, d.name, count(w.pid) as num_emp
from employee e, workon w, dept d
where e.id = w.eid
and e.dep = d.id
group by e.dep) as x
where x.num_emp = @myvar
; 
```

**-- 使用变量的结果**

```
DEP     NAME              NUM_EMP
3       human resource    7 
```

**-- 使用限制 1 和有序 desc 表查询**

```
select e.dep, d.name, count(w.eid) as num_emp
from employee e, workon w, dept d
where e.id = w.eid
and e.dep = d.id
group by e.dep
order by num_emp desc 
limit 1 
```

**-- 使用 order by desc 和 limit 1 的结果：**

```
DEP     NAME              NUM_EMP
3       human resource    7 
```

现在，当使用方法 3 时，有时会有两个部门在项目中工作的员工人数最多，这对您来说可能或可能无关紧要。因此，在这种情况下，您可以使用嵌套方法或变量方法。

* *PS 我没有全职在 StackOverFlow 上的特权，因此很抱歉迟到了 :) **

# wpf - 如何知道哪个项目在 ListBox 视图的顶部？

> ID：13618196
> 
> 赞同：0
> 
> 时间：2012-11-29T03:10:18.007
> 
> 标签：wpf, wpf-controls

我在 WPF 中使用 ListBox 控件来显示某些内容，并且此 ListBox 中的每个项目都有相同的高度，当我拖动滚动条时，我如何知道哪个项目位于当前 ListBox 视图的顶部？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T04:40:25.767

```
 <Grid DataContext="{Binding ElementName=This}">
    <StackPanel>
        <ListBox Height="100" ScrollViewer.ScrollChanged="ListBox_ScrollChanged">
            <ListBoxItem>1</ListBoxItem>
            <ListBoxItem>2</ListBoxItem>
            <ListBoxItem>3</ListBoxItem>
            <ListBoxItem>4</ListBoxItem>
            <ListBoxItem>5</ListBoxItem>
            <ListBoxItem>6</ListBoxItem>
            <ListBoxItem>7</ListBoxItem>
            <ListBoxItem>8</ListBoxItem>
            <ListBoxItem>9</ListBoxItem>
            <ListBoxItem>10</ListBoxItem>
            <ListBoxItem>11</ListBoxItem>
            <ListBoxItem>12</ListBoxItem>
            <ListBoxItem>13</ListBoxItem>
            <ListBoxItem>14</ListBoxItem>
            <ListBoxItem>15</ListBoxItem>
            <ListBoxItem>16</ListBoxItem>
            <ListBoxItem>17</ListBoxItem>
            <ListBoxItem>18</ListBoxItem>
        </ListBox>
        <TextBlock Text="{Binding TopMostItem}"/>            
    </StackPanel>        
</Grid>

    public partial class MainWindow : Window, INotifyPropertyChanged
{
    public MainWindow()
    {
        InitializeComponent();
    }

    private String _topMost;

    public String TopMostItem
    {
        get { return _topMost; }
        set { _topMost = value; RaisePropertyChanged("TopMostItem"); }
    }

    private void ListBox_ScrollChanged(object sender, ScrollChangedEventArgs e)
    {
        var lb = sender as ListBox;
        foreach (var lbi in lb.Items)
        {
            var container = lb.ItemContainerGenerator.ContainerFromItem(lbi) as ListBoxItem;
            if (container != null && IsUserVisible(container, lb))
            {
                TopMostItem = container.Content as String;
                return;
            }
        }
    }

    private bool IsUserVisible(FrameworkElement element, FrameworkElement container)
    {
        if (!element.IsVisible)
            return false;
        Rect bounds = element.TransformToAncestor(container).TransformBounds(new Rect(0.0, 0.0, element.ActualWidth, element.ActualHeight));
        Rect rect = new Rect(0.0, 0.0, container.ActualWidth, container.ActualHeight);
        Rect fudgybounds = new Rect(new Point(bounds.TopLeft.X, bounds.TopLeft.Y), new Point(bounds.BottomRight.X, bounds.BottomRight.Y - 5));
        return rect.Contains(fudgybounds.TopLeft) || rect.Contains(fudgybounds.BottomRight);
    } 

    #region INotifyPropertyChanged Members

    public event PropertyChangedEventHandler PropertyChanged;
    protected void RaisePropertyChanged(string name)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null) handler(this, new PropertyChangedEventArgs(name));
    }

    #endregion 
```

IsUserVisible 方法提供： [Find WPF Controls in Viewport](https://stackoverflow.com/questions/4204342/find-wpf-controls-in-viewport)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T04:54:35.590

您可能会使用以下代码：

```
public static FrameworkElement GetFirstItem(ListBox listBox)
{
   if (listBox.Items.Count == 0)
      return null;
   VirtualizingStackPanel vsp = VisualTreeHelper.GetParent(listBox.Items[0] as FrameworkElement) as VirtualizingStackPanel;
   if (vsp != null)
   {
      int fvi = (int)vsp.VerticalOffset;
      int vic = (int)vsp.ViewportHeight;
      int index=-1;
      foreach (FrameworkElement item in listBox.Items)
      {
         index++;
         if (index >= fvi && index <= fvi + vic)
           {
              return item;
           }
      }
   }
   return null;
} 
```

# ruby-on-rails - 在 Rails 中使用 SimpleRSS 解析提要，出现数字代码，无法正确编码

> ID：13618199
> 
> 赞同：2
> 
> 时间：2012-11-29T03:10:44.917
> 
> 标签：ruby-on-rails, utf-8, character-encoding, rss

我正在使用 SimpleRSS gem 来解析 WordPress RSS 提要。唯一的问题是该提要中的许多字符是使用数字代码编码的，例如

```
&#8217; 
```

代替

```
' 
```

### 文件

*rss_helper.rb*

```
module RssHelper
  require 'rubygems'
  require 'simple-rss'
  require 'open-uri'

  def rss
    rss = SimpleRSS.parse open('http://example.com/feed/')
  end
end 
```

*show.html.slim*

```
...
-rss.entries.each do |entry|
  =entry.title 
```

使用 entry.title，我尝试过：

```
=entry.title.encode("UTF-8")

=entry.title.encode(Encoding::UTF_8, :invalid => :replace, :undef => :replace, :replace => '') 
```

两者都没有奏效。我找到了很多关于 iconv gem 的资源，但据我所知，它现在已被弃用。

我也尝试使用该`.force_encoding`方法而不是`.encoding`，但无论我选择什么，它总是直接从提要中显示该数字代码。

如何强制它呈现正确的字符？

编辑：这是我使用所选答案建议的 gem 的最终帮手，包括在此处，因此查看此内容的任何人都可以看到我所做的。

*rss_helper.rb*

```
def decode(string) 
  coder = HTMLEntities.new 
  return coder.decode(string) 
end 
```

*show.html.slim*

```
...
decode(entry.title)
... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T03:14:27.513

通过[HTMLEntities](http://htmlentities.rubyforge.org/)运行它。

```
HTMLEntities.new.decode(rss_feed_content) 
```

这会将实体编码的字符转换为其文字等价物。

# android - 如何通过 sdcard 中的文件路径通过电子邮件发送音频文件？

> ID：13618200
> 
> 赞同：0
> 
> 时间：2012-11-29T03:10:49.687
> 
> 标签：android

无论如何，当我使用 sdcard 中的 OUTPUT_FILE 路径按下保存按钮时，我是否可以发送电子邮件。（我还没有实现保存按钮）我应该将 String 更改为 Uri 来发送电子邮件吗？我不知道应该如何实现保存按钮，使其发送带有音频文件附件的电子邮件。有什么建议么？提前致谢！

```
public class FulfillAudioTaskActivity extends Activity {

    private MediaPlayer mediaPlayer;
    private MediaRecorder recorder;
    private String OUTPUT_FILE;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_fulfill_audio_task);

        OUTPUT_FILE = Environment.getExternalStorageDirectory()+"/audiorecorder.3gpp";

    }

    public void buttonTapped(View view){
        switch(view.getId()) {
        case R.id.startBtn:
            try {
                beginRecording();           
            }catch (Exception e){
                e.printStackTrace();
            }
            break;
        case R.id.finishBtn:
            try {
                stopRecording();

            } catch (Exception e){
                e.printStackTrace();
            }
            break;
        case R.id.playBtn:
            try {
                playRecording();

            } catch (Exception e){
                e.printStackTrace();
            }
            break;
        case R.id.stopBtn:
            try {
                stopPlayback();

            } catch (Exception e){
                e.printStackTrace();
            }
            break;
        }
    }

    private void stopPlayback() {
        if(mediaPlayer != null)
            mediaPlayer.stop();

    }

    private void playRecording() throws Exception{
        ditchMediaPlayer();
        mediaPlayer = new MediaPlayer();
        mediaPlayer.setDataSource(OUTPUT_FILE);
        mediaPlayer.prepare();
        mediaPlayer.start();
    }
    private void ditchMediaPlayer() {
        if(mediaPlayer != null)
        {
            try {
                mediaPlayer.release();

            }catch(Exception e){
                e.printStackTrace();
            }
        }
    }

    // stop recording if there's a recorder running
    private void stopRecording() {

        if (recorder != null)
            recorder.stop();
    }

    private void beginRecording() throws Exception {

        ditchMediaRecorder();
        File outFile = new File(OUTPUT_FILE);

        //check if there's a file already recorded, and if it is we want to get rid of it.
        if(outFile.exists())
            outFile.delete();

        //create a new MediaRecorder object.
        recorder = new MediaRecorder();
        recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
        recorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
        recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_WB);
        recorder.setOutputFile(OUTPUT_FILE);
        recorder.prepare();
        recorder.start();

    }

    private void ditchMediaRecorder() {
        // TODO Auto-generated method stub
        if(recorder != null)
            recorder.release();

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_fulfill_audio_task, menu);
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T06:37:22.717

```
 Intent i = new Intent(Intent.ACTION_SEND);
    i.setType("audio/rfc822");
    i.putExtra(Intent.EXTRA_EMAIL, new String[] {"someone@gmail.com"} );
    i.putExtra(Intent.EXTRA_SUBJECT, "MySubject");
    i.putExtra(Intent.EXTRA_STREAM, Uri.parse(Environment.getExternalStorageDirectory().getAbsolutePath() + File.separator + "audiorecorder.3gpp");
    startActivity(i); 
```

希望这可以帮助！

# java - PNG文件格式和图像字节？

> ID：13618203
> 
> 赞同：2
> 
> 时间：2012-11-29T03:11:37.560
> 
> 标签：java, file, format, png, byte

我目前正在尝试编写一个程序来将文本编码为 png 文件，只更改我想在图片中编码的每个字母的最低有效位，例如我有一个 65 的“A”，我使用 8 个不同的字节进行编码字母 A. 所以 01010100<- 10101101<- 11011010<- 10101010<- 每一个我都改变了最后一位，然后把 10110110<- 01010100<- 01010100<- 01010101<- 它们放在一起，所以 65 是 01000001 每个数字箭头根据65改变。

如果我应该以不同的方式解决这个问题，建议会很棒:)。这只是我想做的一个有趣的小项目。但无论如何，回到我的问题。

当我读入一张只有 4 像素大的图像时，我会得到 680 字节，这太疯狂了，或者至少我认为是这样，也许我错了？4 个像素，每个 8 位的 ARGB 应该是 16 个字节，其中几个字节肯定会告诉操作系统它是一个 png 以及如何处理它。所以我期待可能像 30 个字节。也许更少。我看错了吗？当png图像被压缩时，如果它是一张小图片，它们会变得更大吗？而且，当我将它保存回硬盘时，我总是得到一个更大的文件。原来的图片是8,554 kb，然后我保存回来时变成了16kb。这是获取图像字节和保存图像的代码。也许我做错了什么，或者我只是没有正确理解它。

这些是我获取图像的方式（我尝试了两种不同的方法）

> // BufferedImage img = ImageIO.read(new File("image.png"));
> BufferedImage img=robot.createScreenCapture(new Rectangle(1,2,2,2));

我如何再次以两种不同的方式保存。

> 尝试 {
> InputStream in = new ByteArrayInputStream(imgBytes);
> BufferedImage bImageFromConvert = ImageIO.read(in);
> ImageIO.write(bImageFromConvert, "png", new File("image.png"));
> 
> //FileOutputStream fos = new FileOutputStream("image.png");
> //fos.write(b);
> //fos.close();
> }catch（异常 e）{}

我如何从图像中获取字节，我再次尝试了两种不同的方法，被注释掉的第二种方法实际上确实给了我想要的 16 个字节，但是当我保存它时，Windows 无法打开它，因为它不知道它是什么我猜？不确定，只是说文件不支持。

> 字节[] imageBytes = null;
> 尝试{
> ByteArrayOutputStream baos = new ByteArrayOutputStream();
> ImageIO.write(image, "jpg", baos);
> baos.flush();
> imageBytes = baos.toByteArray();
> baos.close();
> }catch(IOException e){System.out.println(e.getMessage());}
> 
> // imageBytes = ((DataBufferByte) image.getData().getDataBuffer()).getData();
> 返回图像字节；

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T03:17:56.330

png 包含大量图像元数据以及原始图像数据。这就是给你疯狂的 680 字节的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T11:59:57.020

我的条形码字体几乎有同样的问题。我只是想将 5 位数据编码成我能得到的最小的 PNG。我不想做的是编写一个基于 libpng 的自定义程序。我尝试了很多编辑器，我能得到的最小文件大小约为 170 字节。

最后我找到了 Gimp 2.0。您可以使用一项功能来导出没有所有元数据的 PNG 文件。我也改成8位灰度。我想我可以通过切换到 2 位灰度来减少几个字节，但 Gimp 不会为我这样做。最后，我对每个字符约 75 个字节感到满意。

# c++ - 使用 Cin 和 Argv

> ID：13618204
> 
> 赞同：-3
> 
> 时间：2012-11-29T03:11:38.060
> 
> 标签：c++, cin, argv

如何在脚本中结合 cin 和 argv？

```
int main(int argc, char* argv[])
c == argv[1];
cin >> c; 
```

如果有命令行参数，你如何忽略 cin，或者如果没有命令行参数，你如何做 cin？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T03:14:08.063

```
string s;

if(argc == 2) 
    s = argv[1];
else
    cin >> s;

... do stuff here ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T03:15:35.377

类的对象`std::cin`和对象`std::ifstream`都共享一个共同的基类：`std::istream`. 您可以使用这个事实将其中一个`cin`或一个传递`ifstream`给一个通用函数：

```
void DoOne(std::istream& in) {
  int x;
  in >> x; // etc etc
}

int main (int ac, char **av) {
  if(ac == 1)
    DoOne(std::cin);
  else {
    for(i = 1; i < ac; ++i) {
      std::ifstream inFile(av[i]);
      DoOne(inFile);
    }
} 
```

# python - 使用 python subprocess/sh 作为 bash 包装器的问题

> ID：13618208
> 
> 赞同：1
> 
> 时间：2012-11-29T03:12:08.987
> 
> 标签：python, bash, subprocess

我正在尝试执行以下代码行：

```
subprocess.call(["java", "-cp", "/home/me/somepath/file.jar", ..., "-someflag somevalue"]) 
```

代码失败，我试图运行的 jar 给了我使用信息。但是，如果我展开字符串并将其粘贴到终端中，它就可以工作（我知道我正在正确展开字符串，因为 sh 模块在出错时将它吐回给我）。所以这是 subprocess 或 sh 如何操作的问题。

这是您应该如何使用它的示例：

```
subprocess.call(["ls", "-l"]) 
```

这是描述：

```
subprocess.check_call(args, *, stdin=None, stdout=None, stderr=None, shell=False) 
```

> 所有调用都需要 args，它应该是一个字符串或一系列程序参数。提供一系列参数通常是首选，因为它允许模块处理任何所需的参数转义和引用（例如，允许文件名中的空格）。如果传递单个字符串，shell 必须为 True（见下文），否则字符串必须简单地命名要执行的程序而不指定任何参数。

[http://docs.python.org/2/library/subprocess.html](http://docs.python.org/2/library/subprocess.html)

我不清楚是否应该将列表中的字符串与不同位置的标志和值分开。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T03:18:43.563

```
subprocess.call(["java", "-cp", "/home/me/somepath/file.jar", ..., "-someflag", "somevalue"]) 
```

您的原始代码对应于

```
java -cp /home/me/somepath/file.jar ... "-someflag somevalue" 
```

在外壳中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T03:14:56.460

`shell`将标志切换为真

IE，

`subprocess.check_call(["java", "-cp", cp_arg, ..., "-someflag somevalue"], shell=True)`

另外，提示，您可以使用该`split()`函数拆分字符串命令：

`subprocess.check_call("java -cp blah blah".split(), shell=True)`

# java - 调整 Swing 窗口大小时如何避免闪烁？

> ID：13618211
> 
> 赞同：3
> 
> 时间：2012-11-29T03:12:22.677
> 
> 标签：java, swing, dialog

我有一个对话框，其中附加控件会导致对话框在出现时调整大小。有一天我可能会找到一种方法来制作动画，但现在我只满足于调整大小。问题是，它闪烁。

我将问题简化为测试：

```
import java.awt.BorderLayout;
import java.awt.Component;
import java.awt.Window;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JPanel;
import javax.swing.JRootPane;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;

/**
 * Shows flickering when resizing a dialog.
 */
public class FlickerTest extends FakeJDialog
{
    public FlickerTest()
    {
        super((Window) null, "Flicker Test");

        JButton button = new JButton("Bigger!");
        button.addActionListener(new ActionListener()
        {
            @Override
            public void actionPerformed(ActionEvent event)
            {
                Window window = SwingUtilities.getWindowAncestor((Component) event.getSource());
                window.setSize(window.getWidth(), window.getHeight() + 20);
            }
        });

        JPanel contentPane = new JPanel(new BorderLayout());
        contentPane.setOpaque(true);
        contentPane.add(button, BorderLayout.PAGE_START);

        JRootPane rootPane = new JRootPane();
        rootPane.setContentPane(contentPane);

        add(rootPane);

        setResizable(false);
        pack();
        setLocationRelativeTo(null);
    }

    public static void main(String[] args) throws Exception
    {
        UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());

        SwingUtilities.invokeLater(new Runnable()
        {
            @Override
            public void run()
            {
                new FlickerTest().setVisible(true);
            }
        });
    }
} 
```

每次单击按钮时，窗口都会改变大小。在相当长的一段时间内，对话框底部变黑。通过录制我的屏幕，我能够得到一个截图来展示它：

![在此处输入图像描述](../Images/457c768882036ccedca34fbc663bc7b7.png)

我怎样才能避免这种情况？

*进一步的调查：*

Dialog 的以下子类表现出与 JDialog 相同的闪烁：

```
import java.awt.Component;
import java.awt.Container;
import java.awt.Dialog;
import java.awt.Window;

import javax.swing.JLayeredPane;
import javax.swing.JRootPane;
import javax.swing.RootPaneContainer;

/**
 * Minimal subclass of Dialog required to cause the flickering.
 * If you comment out "implements RootPaneContainer", the flickering goes away.
 */
public class FakeJDialog extends Dialog implements RootPaneContainer
{
    public FakeJDialog(Window owner, String title)
    {
        super(owner, title, Dialog.ModalityType.MODELESS);
    }

    public JRootPane getRootPane()
    {
        throw new UnsupportedOperationException();
    }

    public Container getContentPane()
    {
        throw new UnsupportedOperationException();
    }

    public void setContentPane(Container contentPane)
    {
        throw new UnsupportedOperationException();
    }

    public JLayeredPane getLayeredPane()
    {
        throw new UnsupportedOperationException();
    }

    public void setLayeredPane(JLayeredPane layeredPane)
    {
        throw new UnsupportedOperationException();
    }

    public Component getGlassPane()
    {
        throw new UnsupportedOperationException();
    }

    public void setGlassPane(Component glassPane)
    {
        throw new UnsupportedOperationException();
    }
} 
```

我觉得这很有趣，因为仅仅注释掉就`implements RootPaneContainer`足以完全改变行为。Swing 或 AWT 中的某些东西显然是在寻找这个接口并专门处理这些组件。所以这表明没有 JDialog 的子类可以避免这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T04:08:57.640

我不相信有办法解决这个问题`JDialog`。不过，`java.awt.Dialog`没有这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-10T12:08:13.997

试试这个，我做了一个几乎完全消除闪烁的例子

此外，您将获得标记清晰的调整大小角

![在此处输入图像描述](../Images/6e1c0a9a2eb810b276a63388bd4597d9.png)

```
/*
 * resizing swing trick in Win7+Aero demo
 * @author: s1w_
*/
import java.awt.event.*;
import java.awt.*;
import javax.swing.event.*;
import javax.swing.*;

class ResizeHookDemo extends JDialog {
  private final static int width = 580, height = 350;
  private final JFileChooser fc;
  private java.awt.geom.GeneralPath gp;

  public ResizeHookDemo() {
    super((JDialog)null, "Choose File", true);

    fc = new JFileChooser() {

     @Override
     public void paint(Graphics g) {
       super.paint(g);
       int w = getWidth();
       int h = getHeight();
       g.setColor(new Color(150, 150, 150, 200));
       g.drawLine(w-7, h, w, h-7);
       g.drawLine(w-11, h, w, h-11);
       g.drawLine(w-15, h, w, h-15);

       gp = new java.awt.geom.GeneralPath();
       gp.moveTo(w-17, h);
       gp.lineTo(w, h-17);
       gp.lineTo(w, h);
       gp.closePath();
     }

    };
    fc.addActionListener(new ActionListener() {

      public void actionPerformed(ActionEvent e) {
        if (e.getActionCommand().equals("CancelSelection")) {
          setVisible(false);
          // action...
        }
        else if (e.getActionCommand().equals("ApproveSelection")) {
          setVisible(false);
          // action...
        }
      }
    });

    MouseInputListener resizeHook = new MouseInputAdapter() {
      private Point startPos = null;

      public void mousePressed(MouseEvent e) {
        if (gp.contains(e.getPoint()))
          startPos = new Point(getWidth()-e.getX(), getHeight()-e.getY());
      }

      public void mouseReleased(MouseEvent mouseEvent) {
        startPos = null;
      }

      public void mouseMoved(MouseEvent e) {
        if (gp.contains(e.getPoint()))
          setCursor(Cursor.getPredefinedCursor(Cursor.SE_RESIZE_CURSOR));
        else
          setCursor(Cursor.getDefaultCursor());
      }

      public void mouseDragged(MouseEvent e) {
        if (startPos != null) {

          int dx = e.getX() + startPos.x;
          int dy = e.getY() + startPos.y;

          setSize(dx, dy);
          repaint();
        }
      }
    };

    fc.addMouseMotionListener(resizeHook);
    fc.addMouseListener(resizeHook);
    fc.setBorder(BorderFactory.createEmptyBorder(10, 10, 10, 20));
    add(fc);

    setResizable(false);

    setMinimumSize(new Dimension(width, height));
    setDefaultCloseOperation(HIDE_ON_CLOSE);
    setLocationRelativeTo(null);
  }

  public static void main(String args[]) {
    System.out.println("Starting demo...");
    SwingUtilities.invokeLater(new Runnable() {

      @Override
      public void run() {
        new ResizeHookDemo().setVisible(true);
      }
    });
  }
} 
```

# windows - 为复杂调用设置别名

> ID：13618213
> 
> 赞同：1
> 
> 时间：2012-11-29T03:12:27.713
> 
> 标签：windows, powershell

我正在尝试设置一个别名来访问我的方案解释器。我尝试了以下方法：

```
set-alias scheme '& "C:\Program Files (x86)\MIT-GNU Scheme\bin\mit-scheme.exe" --library "C:\Program Files (x86)\MIT-GNU Scheme\lib"' 
```

调用时，`scheme`我收到以下错误消息：

```
Cannot resolve alias 'scheme' because it refers to term '& "C:\Program Files (x86)\MIT-GNU Scheme\bin\mit-scheme.exe" -
-library "C:\Program Files (x86)\MIT-GNU Scheme\lib"', which is not recognized as a cmdlet, function, operable program,
 or script file. Verify the term and try again.
At line:1 char:7
+ scheme <<<<
    + CategoryInfo          : ObjectNotFound: (scheme:String) [], CommandNotFoundException
    + FullyQualifiedErrorId : AliasNotResolvedException 
```

`& "C:\Program Files (x86)\MIT-GNU Scheme\bin\mit-scheme.exe" --library "C:\Program Files (x86)\MIT-GNU Scheme\lib"`另一方面，直接调用可以正常工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T04:03:13.533

别名功能适用于简单的名称别名，不允许使用参数。您需要的是一个功能，例如：

```
function scheme {
    & "C:\Program Files (x86)\MIT-GNU Scheme\bin\mit-scheme.exe" --library "C:\Program Files (x86)\MIT-GNU Scheme\lib"
} 
```

# android - 在活动之间传递一个字符串

> ID：13618215
> 
> 赞同：0
> 
> 时间：2012-11-29T03:12:51.070
> 
> 标签：android, string, android-activity

嗨，我想通过两个活动传递一个字符串，我一直在另一个答案中寻找它并尝试了这个：

```
public class GlobalVars extends Activity {
private static String winename;

public static String getWineName(){
    return winename;
}
public static void setWineName(String s){
    winename=s;
} 
```

}

并将活动 1 中的字符串设置为：

```
EditText searchbox=(EditText) findViewById(R.id.buscarmainText);
String searchb=searchbox.getText().toString();
GlobalVars.setWineName(searchb); 
```

但是，当我在活动 2 中调用 getWineName 方法时，字符串 winename 似乎是空的，这样调用：

```
public String sbuscar=GlobalVars.getWineName(); 
```

不知道我做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T03:16:50.707

最好在有意图的活动之间传递字符串

在您的第一个活动课程中：

```
Intent i = new Intent(this, activity2.class);
i.putExtra("KEY",YourData); 
```

在下一个活动课上

```
Bundle extras = getIntent().getExtras();
if(extras !=null) {
    String value = extras.getString("KEY");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T03:46:51.713

你应该把你的全局变量放在这样的持有者类上。

```
public class GlobalVars {
     public static final String KEY_WINENAME = "winename";
     private static HashMap<String, String> globalVars = new HashMap<String, String>();

     public static String getGlobalVariable(String key) {
         return globalVars.get(key);
     }
} 
```

然后从您的应用程序的任何组件中，您可以调用`GlobalVars.getGlobalVariable(GlobalVars.KEY_WINENAME);`

如果您只想将字符串从一个活动传递到下一个活动，您应该使用 Ram kiran 回答的 Intent。通常这是最佳实践。

您还应该查看这段代码的调用位置：

```
EditText searchbox=(EditText) findViewById(R.id.buscarmainText);
String searchb = searchbox.getText().toString();
GlobalVars.setWineName(searchb); 
```

例如，如果您更改方向，您可能不会保持 EditText 状态，因此其中的文本再次变空，并且您的代码再次被调用以清空变量。如果你不确定在里面放一个日志行`setWinename()`来检查它是否被调用了两次。

# java - wicket 和 db 访问的最佳实践

> ID：13618216
> 
> 赞同：1
> 
> 时间：2012-11-29T03:13:06.907
> 
> 标签：java, database, jpa, wicket

所以我正在编写一个简单的应用程序，而不是摸索它，我想看看是否有人可以就如何设置它提供建议。

我有一个 wicket 应用程序，我基本上会做一些类似论坛应用程序的事情（我一直在查看 wicket 留言簿示例）但是我想将这些消息保存到数据库中。我想使用列表视图（或者可能是转发器）来显示消息。我已经创建了数据库（mysql）和表，并为它们创建了实体对象。

将检票口与数据库连接的最佳实践是什么？我想我需要一个可加载的可拆卸模型，但我愿意接受建议。

我是否应该创建一个实现 loadabledetachable 接口的类并在该类中对数据库进行事务处理？我应该做一个DAO吗？并通过调用DAO中的方法加载模型中的数据？我一直在看例子，我对如何做到这一点感到困惑。我已经在学习 wicket 和整个 JPA 的东西，所以我真的不想在这上面扔像 Spring 这样的东西。我需要能够添加/更新/删除，而我只是想找出最好的地方。

任何帮助或指导表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T16:08:18.790

我建议您使用最简单的模型，例如`Model`or `PropertyModel`。渲染页面时，将数据库中的数据加载到模型中并显示数据。当用户按下更新按钮时，从模型中读取新值，然后更新到数据库。

您现在不需要任何`LoadableDetachableModel`东西，因为您仍在学习 wicket 框架的基本部分。

关于 DAO 部分，如果你只是想专注于学习 wicket，创建一个没有 DAO 类的简单 CRUD 应用程序是可以的。无论如何，您总是可以稍后将这些代码重构为 DAO 类。但是，如果您正在尝试学习开发 Web 应用程序，那么您应该创建一个 DAO 类并了解[多层架构](http://en.wikipedia.org/wiki/Multitier_architecture)的概念。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-11T09:02:49.420

德语有一个很好的解释 - 但代码是英文的：

该解决方案通过存储类名并在 load() 上执行查找来扩展 LoadableDetachableModel 以保存 EntityFacade。

我认为这里的例子：http: [//hotchpotch-blog.de/2012/10/09/wrapping-eines-ejb-in-ein-loadabledetachablemodel/](http://hotchpotch-blog.de/2012/10/09/wrapping-eines-ejb-in-ein-loadabledetachablemodel/)

可以扩展到这样的东西（不准备生产）：

```
public class EjbModel extends LoadableDetachableModel {

/**
 * Get the name of the EJBInterface  type suitable for lookup.
 * 
 */
protected String ejbName;

public EjbModel(EJBInterface bean){
    //store the bean so it will get detached 
    super(bean)
    ejbName = bean.getSimpleName() + "Facade"; //not sure if + "Facade" is needed
}

@Override
protected EJBInterface  load() {
    EJBInterface  result = null;
    try {
        InitialContext ctx = new InitialContext();
        result = (EJBInterface ) ctx.lookup("java:module/" + ejbName);
    } catch (NamingException ex) {
        Logger.getLogger(this.getClass().getName()).log(Level.SEVERE, "Error at JNDI lookup for " + getEjbName(), ex);
    }
    return result;
}
} 
```

# c - 为什么我不能用 std=c99 声明 sigset_t？

> ID：13618219
> 
> 赞同：3
> 
> 时间：2012-11-29T03:13:18.857
> 
> 标签：c, linux, gcc

如果我用 std=c99 编译下面的程序，我会得到一个错误，但程序在没有 c99 标志的情况下编译得很好。为什么？

```
#include <signal.h>
void x()
{
    sigset_t dd;
}

int main(void)
{
    x();
    return 0;
}

jim@cola temp]$ gcc -std=c99 blah.c -o blah
blah.c: In function ‘x’:
blah.c:9: error: ‘sigset_t’ undeclared (first use in this function)
blah.c:9: error: (Each undeclared identifier is reported only once
blah.c:9: error: for each function it appears in.)
blah.c:9: error: expected ‘;’ before ‘dd’ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T03:16:52.203

因为`sigset_t`不是`<signal.h>`标准 C 的一部分，并且您要求与`-std=c99`. 也就是说，一个严格标准的 C 程序可以做到：

```
#include <signal.h>

int sigset_t;
int main(void) { return 0; } 
```

并期望它起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T03:16:52.580

`sigset_t`不在 C99 标准中，但在[POSIX](https://pubs.opengroup.org/onlinepubs/9699919799/basedefs/signal.h.html)中可用。您可以定义`_POSIX_SOURCE`或`_POSIX_C_SOURCE`使其`sigset_t`可用。

这是定义：

```
#define _NSIG 64 
#define _NSIG_BPW 32 
#define _NSIG_WORDS (_NSIG / _NSIG_BPW) 

typedef unsigned long old_sigset_t; /* at least 32 bits */ 

typedef struct { 
unsigned long sig[_NSIG_WORDS]; 
} sigset_t; 
```

另请参阅[#define _POSIX_SOURCE 是什么意思？](https://stackoverflow.com/q/48332332/608639)

# frama-c - frama-c影响分析不能分析控制依赖？

> ID：13618221
> 
> 赞同：2
> 
> 时间：2012-11-29T03:13:58.667
> 
> 标签：frama-c

当我使用 frama-c 分析我的 c 程序时。似乎在 frama-c 的影响插件中存在错误。这是我的程序。

```
#include<stdio.h>
int global;
int main()
{
    global = 12;
    int result = 0;
    if(global > 1)
    {
         result += 100;
    }
    else
    {
        result += 200;
    }
    return 0;
} 
```

我想找到受变量“全局”影响的所有状态。显然，语句“结果 += 100;” 在与变量“global”相关的“if condition”范围内，所以语句“result += 100;” 应该是高光。但是，运行结果似乎不正确。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T00:24:02.893

我假设您没有使用任何特殊选项，并且您已经在 Frama-C 的 GUI 中的声明中开始了影响分析`global = 12`。如果不是这种情况，请提供更详细的说明。

在您的程序中，该`if (global > 1)`指令被选中，因为该语句存在数据依赖性`global = 12`。`result += 100`但是，影响插件不会选择该语句。这是预期的行为，因为在这种情况下*没有*控制依赖性。请注意，`else`分支`if`已死。因此， 的执行`result += 100`并不真正依赖于 的评估`if (global > 1)`，因为条件始终为真。由于控制流总是到达`result += 100`指令，因此不存在控制依赖。

如果您想在此示例中展示控件依赖关系，最简单的方法是将您的行更改`global = 12`为

```
global = Frama_C_interval(0,100); 
```

并将文件添加`$(SHARE)/frama-C/libc/__fc_builtin.c`到命令行。在每种情况下，由于控制相关性，这两个指令将被`result += 100`选中 。`result += 200`

# c# - 如何使用 vb.net 或 c# 从 excel 2007 (*.xlsx) 获取工作表名称

> ID：13618224
> 
> 赞同：3
> 
> 时间：2012-11-29T03:14:17.480
> 
> 标签：c#, vb.net, excel-2007

我尝试使用 vb.net 从文件 excel 中获取工作表名称并将它们显示到文本框中。我尝试使用此代码：

```
Imports Microsoft.Office.Interop
Private Sub GetSheetsName
Dim efa As New Excel.Application
Dim ewb As Excel.Workbook
Dim ews As Excel.Worksheet
Dim fileName as string
fileName="D:\test.xls"
ewb = efa.Workbooks.Open(fileName)
For Each ews In ewb.Worksheets
   ExcelSheetName += ews.Name & vbNewLine
Next ews
TextBox1.text=ExcelSheetName
end sub 
```

该代码适用于文件 excel *.xls，在文本框中显示文件 test.xls 中的表格名称

```
Sheet1
Sheet2
Sheet3 
```

但是当我尝试使用 excel 2007 (*.xlsx) 时，会显示这样的错误消息。 ![错误信息](../Images/84985615df7a02a5c8b6624f909b4ff4.png)

我应该怎么办？你能帮我吗。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-03T05:48:56.710

试试这个代码：

```
Private Sub GetExcelSheetNames(ByVal fileName As String)
    Dim strconn As String = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" & 
          fileName & ";Extended Properties=""Excel 12.0 Xml;HDR=YES"";"
    Dim conn As New OleDbConnection(strconn)

    conn.Open()

    Dim dtSheets As DataTable = 
              conn.GetOleDbSchemaTable(OleDbSchemaGuid.Tables, Nothing)
    Dim listSheet As New List(Of String)
    Dim drSheet As DataRow

    For Each drSheet In dtSheets.Rows
        listSheet.Add(drSheet("TABLE_NAME").ToString())
    Next

    //show sheetname in textbox where multiline is true
    For Each sheet As String In listSheet
        TextBox1.Text = TextBox1.Text & sheet & vbNewLine
    Next

    conn.Close()

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T04:46:17.700

尝试使用

```
For Each ews In ewb.Sheets
   ExcelSheetName += ews.Name & vbNewLine
Next ews 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T04:12:19.300

处理 xlsx 文件的优秀库是 EPPlus。

这是一个示例代码：

```
var existingFile = new FileInfo(path);
var sheets = new List<string>();
using (var package = new ExcelPackage(existingFile))
{
    sheets.AddRange(from worksheet in package.Workbook.Worksheets where worksheet.Dimension != null select worksheet.Name);
} 
```

你可以在这里找到它：http: [//epplus.codeplex.com/](http://epplus.codeplex.com/)

# php - 使用 isset() 但仍然得到未定义的索引

> ID：13618226
> 
> 赞同：0
> 
> 时间：2012-11-29T03:14:33.410
> 
> 标签：php

在下面的代码中，我试图检索 moduleid，使用它来运行查询，以便能够找到属于该模块 id 的模块编号和模块名称，然后包含 moduleid、模块编号和模块的会话变量姓名。

我遇到的问题是，即使我正在使用`(isset()`，我得到未定义的索引，`$_SESSION['idmodule']`并且 '$_SESSION['namemodule'] `. Now`$_SESSION['module']` 工作正常，该会话变量没有问题，但另一个2 个会话变量我遇到了问题。

现在查询是正确的，所以查询没有问题，只是我猜测我如何尝试调用 $_SESSION 变量的问题。

下面是代码：

```
if (isset($_POST['module']))
{
    $query = "SELECT ModuleNo, ModuleName FROM Module WHERE ModuleId = ?";

    $stmt = $mysqli->prepare($query);

    $stmt->bind_param('s', $_POST['module'] );

    $stmt->execute();

    $stmt->bind_result($moduleno, $modulename); 

     while ( $stmt->fetch() ) { 
           // session data
          if (isset($moduleno)){
          $_SESSION['idmodule'] = $moduleno;
      }
      if (isset($modulename)){
          $_SESSION['namemodule'] =  $modulename;
            }
    }

    $_SESSION['module'] = $_POST['module'];

} 
```

.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T03:18:38.663

```
if (isset($moduleno)){
    $_SESSION['idmodule'] = $moduleno;
}
if (isset($modulename)){
    $_SESSION['namemodule'] =  $modulename;
} 
```

这两个语句都可能阻止`$_SESSION['idmodule']`或`$_SESSION['namemodule']`不设置，因此当您稍后引用它们时，您可能会收到警告。

为防止这种情况发生，稍后在代码中您可能需要这样做：

```
if (isset($_SESSION['idmodule'], $_SESSION['namemodule']) {
    // your code here 
```

更好的方法是清理一些东西：

```
while ( $stmt->fetch() ) {
    // inside here $moduleno and $modulename are already set
    $_SESSION['idmodule'] = $moduleno;
    $_SESSION['namemodule'] = $modulename;
} 
```

如果未找到该模块，最好跳过其余代码并仅显示错误消息。

# html - youtube 视频无法在 mozilla firefox 上播放：html 嵌入

> ID：13618228
> 
> 赞同：0
> 
> 时间：2012-11-29T03:14:50.280
> 
> 标签：html, firefox, youtube, embed, mozilla

我有这个代码：

```
echo '<embed src="'.$data['band_video_1'].'" height="300" width="453">'; 
```

显示 Youtube 视频。它在 Google Chrome 中运行良好，但在 Mozilla Firefox 中运行良好。这里有什么问题？我应该在这里使用另一个 html 元素吗？如何检查用户也在使用什么浏览器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T05:44:49.633

如果你想检查浏览器，你可以尝试一些像这样的java脚本

```
<script type="text/javascript">'.
   var canPlay = false;
   var v = document.createElement('video');
   if(v.canPlayType && v.canPlayType('video/mp4').replace(/no/, '')) {
       canPlay = true;
   }

   alert(canPlay);

</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T06:57:21.433

看起来您正试图直接嵌入 Flash 对象。嵌入标签是一个过时的标签，大部分已被弃用。（[在此处解释](https://stackoverflow.com/a/1244854)。）如果您想要一种更可靠的方式来嵌入 Flash 对象，请查看[SWFObject](http://code.google.com/p/swfobject/wiki/documentation)。

但是，更好的解决方案是将视频嵌入为 iframe。这样，YouTube 将找出嵌入播放器的最佳方式，而您不必担心浏览器检测。它甚至会在必要时使用 HTML5 视频，因此它可以在 iPad 和其他没有 Flash 的系统上运行。

最终结果将如下所示：

```
<iframe width="420" height="315" src="http://www.youtube.com/embed/U0x9HtYgVqA" frameborder="0" allowfullscreen></iframe> 
```

所以你的服务器端代码看起来更像这样：

```
echo '<iframe width="420" height="315" src="http://www.youtube.com/embed/' . $data['band_video_1'] . '" frameborder="0" allowfullscreen></iframe>'; 
```

只需确保`band_video_1`是 YouTube 视频 ID，而不是完整的 URL。

# php - 如果使用 jquery 提交时 textarea 为空，如何禁用提交按钮

> ID：13618230
> 
> 赞同：0
> 
> 时间：2012-11-29T03:14:55.477
> 
> 标签：php, javascript, jquery, html

应该有一种简单的方法可以在不使用插件的情况下验证此 textarea，一直在尝试检查 textarea 是否为空或具有空值，但我无法完成这项工作。我有一个[http://jsfiddle.net/creativestudio/f3qQ5/](http://jsfiddle.net/creativestudio/f3qQ5/)

希望有人能帮忙。

这是我的html：

```
<div class="post-container">
    <form class="reply-form">
        <div class="reply-box">
            <textarea placeholder="Reply box 1..." columns="10" rows="1" name="comment-input"></textarea>
            <input type="submit" value="Send">
        </div>
        <div class="post-dropdown"></div>
        <div class="post-dropdown-content">
            <div class="post-dropdown-reply">1</div>
        </div>
    </form>
</div>

<div class="post-container">
    <form class="reply-form">
        <div class="reply-box">
            <textarea placeholder="Reply box 2..." columns="10" rows="1" name="comment-input"></textarea>
            <input type="submit" value="Send">
        </div>
        <div class="post-dropdown"></div>
        <div class="post-dropdown-content">
            <div class="post-dropdown-reply hidden">1</div>
        </div>
    </form>
</div>

        ​ 
```

这是我的JS：

```
function gettingReplyVal() {
    $('.reply-form').submit(function(e) {
        var textAreaValue = $(this).find('textarea').val();
        post = $("<div>").addClass("post-dropdown-reply");
        post.html(textAreaValue);
        $(this).find('.post-dropdown-content').prepend(post);
        e.preventDefault();
        $('textarea').val('');
    });
}

gettingReplyVal();​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T03:30:40.643

如果您想在空时禁用提交按钮，您可以使用事件 keyup()：

```
$('textarea[name=comment-input]').keyup(function(e){
    $(this).parent().find("#submit").attr("disabled", true);
    val = $(this).val().trim();    
    if(val.length > 0){
        $(this).parent().find("#submit").attr("disabled", false);
    }
}); 
```

在这里查看演示[http://jsfiddle.net/aanred/NpvsF/](http://jsfiddle.net/aanred/NpvsF/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T03:21:21.903

```
$('.reply-form').submit(function(e) {
  if($(this).find('textarea').val().trim() == '')
    return false;
  //submit code here
} 
```

您可以只使用 .val()，但我添加了 trim() 只是为了补偿空格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T03:27:54.017

试试这个验证

```
if($(this).find('textarea').val()=='')
  return false; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T03:40:36.063

尝试以下 jquery 脚本：

```
if($('textarea[name=comment-input]').val().trim()==''){
   $("#submit").attr("disabled", true);  
}

$('textarea[name=comment-input]').keyup(function(){
    $("#submit").attr("disabled", true);
    val = $(this).val().trim();    
    if(val.length > 0){
        $("#submit").attr("disabled", false);
    }
}); 
```

它为我工作。我希望它也为你工作。

# c# - 如何在 C# 中使用索引传递字节数组的子字符串？

> ID：13618231
> 
> 赞同：0
> 
> 时间：2012-11-29T03:14:59.227
> 
> 标签：c#

我想发送一个 APDU 并得到响应。我想通过一个将记录比较的 API 检查最后两个字节。

```
byte[] response = Transmit(apdu);

//response here comes will be 0x00 0x01 0x02 0x03 0x04 
//response.Length will be 5

byte[] expectedResponse = { 0x03, 0x04 };

int index = (response.Length)-2;

Log.CheckLastTwoBytes(response[index],expectedResponse);

//The declaration of CheckLastTwoBytes is 
//public static void CheckLastTwoBytes(byte[] Response, byte[] ExpResp) 
```

这是无效参数的错误。如何将最后 2 个字节传递给 API？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T03:18:39.287

使用[Array.Copy](http://msdn.microsoft.com/en-us/library/z50k9bft%28v=vs.90%29.aspx)

```
byte[] newArray = new byte[2];
Array.Copy(response, response.Length-2, newArray, 2);
Log.CheckLastTwoBytes(newArray,expectedResponse); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T03:23:41.040

由于 of 的类型`response[index]`是`byte`( **not** `byte[]` )，因此您会收到该错误也就不足为奇了。

如果`Log.CheckLastTwoBytes`确实只检查其`Response`参数的最后两个字节，那么您应该只通过`response`：

```
 Log.CheckLastTwoBytes(response, expectedResponse) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T03:44:51.727

你不能像那样有一个子数组，不......

第一个解决方案，显而易见的一个：

```
var tmp = new byte[] { response[response.Length - 2],
                       response[response.Length - 1] };

Log.CheckLastTwoBytes(tmp, expectedResponse); 
```

或者，您可以这样做：

```
response[0] = response[response.Length - 2];
response[1] = response[response.Length - 1];

Log.CheckLastTwoBytes(response, expectedResponse); 
```

可能是这个函数不检查确切的长度等，所以如果你不关心破坏数据，你可以把最后两个字节作为前两个字节。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-29T03:26:32.220

```
new ArraySegment<byte>(response, response.Length - 2, 2).Array 
```

编辑：没关系，显然`.Array`只是返回原始的整个数组而不是切片。您必须修改其他方法以接受 ArraySegment 而不是 byte[]

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-29T03:22:29.500

或者，您也可以使用 linq：

```
byte[] lastTwoBytes = response.Skip(response.Length-2).Take(2).ToArray(); 
```

# android - 无法通过联系人 api (ContactsContract) 访问电话号码列

> ID：13618233
> 
> 赞同：2
> 
> 时间：2012-11-29T03:15:17.590
> 
> 标签：android, contactscontract

我正在尝试将联系人光标分配给适配器。我无法访问它。

**它抛出以下错误。无法启动活动 java.lang.IllegalArgumentException：列 'data1' 不存在**

在行
*dataAdapter = new SimpleCursorAdapter(this, R.layout.contact_xml, cCursor, columns, to);*

下面是联系人的列表视图是我试图通过适配器实现的。

```
---------------------------------------
Contact_name_1         
Phone_no
---------------------------------------
Contact_name_2         
Phone_no2
---------------------------------------
Contact_name_3         
Phone_no3
--------------------------------------- 
```

代码如下。

```
public class NewContactTest1 extends Activity{

    ArrayAdapter<String> adapter;
    private SimpleCursorAdapter dataAdapter;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

    Cursor cCursor = getAllCont();

    String[] columns = new String[]{

                ContactsContract.Contacts.DISPLAY_NAME,
                ContactsContract.CommonDataKinds.Phone.NUMBER
               };

        int[] to = new int[] { 
                R.id.name,
                R.id.phnumber
        };

    dataAdapter = new SimpleCursorAdapter(this, R.layout.contact_xml, cCursor, columns, to);   // I am getting error in here. 

    ListView listView = (ListView) findViewById(R.id.list_view);
    listView.setAdapter(dataAdapter);
    }

    public Cursor getAllCont()
    {
        Cursor cursor =
                getContentResolver().query(ContactsContract.Contacts.CONTENT_URI,
                        null, null, null, null);
         if (cursor != null) 
         {  
             cursor.moveToFirst();
         }
         return cursor;
    } 
```

它抛出以下错误。

**联系人xml.xml**

```
<RelativeLayout  xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="#FFF"
    android:orientation="horizontal"
    android:padding="5dip"
>

    <TextView 
        android:id="@+id/name"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="id"
        android:visibility="invisible"
    />
    <TextView 
        android:id="@+id/phnumber"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Sent_to"
        android:textColor="#333333"
        android:typeface="serif"
        android:textSize="15dip"
        android:background="#FFF"
    />

</RelativeLayout> 
```

**主要的.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >

  <ListView 
    android:id="@+id/list_view"
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 

  ></ListView>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T03:50:04.727

访问联系人可能有点棘手，但幸运的是，这已经在 StackOverflow 上解决了：

*   [Android联系人在单个数据库查询中显示姓名和电话号码？](https://stackoverflow.com/questions/6587674/android-contacts-display-name-and-phone-numbers-in-single-database-query)

[最佳答案](https://stackoverflow.com/a/6588402/1270789)似乎回答了您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T04:14:59.127

正如你所说的那样，我正在获取所有联系人

```
 Cursor phones = getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null, null, null, null);
    while (phones.moveToNext()) {

        String name = phones.getString(phones.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));
        String phoneNumber = phones.getString(phones.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));

        ContactBean objContact = new ContactBean();
        objContact.setName(name);
        objContact.setPhoneNo(phoneNumber);
        list.add(objContact); 
       //here you get all contacts for cursor and display listview

    }
    phones.close();

    ContanctAdapter objAdapter = new ContanctAdapter(ContactListActivity.this, R.layout.alluser_row, list);
    listView.setAdapter(objAdapter); 
```

# cordova - 科尔多瓦 2.2.0 中的插件不起作用

> ID：13618234
> 
> 赞同：-1
> 
> 时间：2012-11-29T03:15:26.217
> 
> 标签：cordova, phonegap-plugins

我升级到 Cordova 2.2.0 后发现我的插件不起作用！

它不会加载，但可以正确编译。我似乎无法让我的插件工作。有任何想法吗？

我之前使用的是 1.9.0，然后尝试更新我所做的是创建项目，然后将我的代码存储在项目文件夹中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T18:07:35.970

我有几乎同样的问题。我在 CDVBarcodeScanner.mm 中设置断点但没有结果，我只是没有进入该文件。甚至尝试了用cordova替换Cordova，将Cordova.plist中的键从'org.apache.cordova.barcodeScanner'更改为'CDVBarcodeScanner'，并且在barcodescanner.js文件中也做了相应的更改，但不幸的是没有任何帮助。正如人使用 github 源代码一样。已安装 Cordova 2.2.0 和 iOS。

# linux - 在 Linux 中将多个 jpg 合并为单个 pdf

> ID：13618236
> 
> 赞同：83
> 
> 时间：2012-11-29T03:15:27.457
> 
> 标签：linux, shell, ubuntu

我使用以下命令将`jpg`目录中的所有文件转换并合并为单个 pdf 文件。

```
convert *.jpg file.pdf 
```

目录中的文件从`1.jpg`到编号`123.jpg`。转换很顺利，但转换后页面都混在一起了。我希望 pdf 的页面从`1.jpg`到到`123.jpg`的顺序与它们的命名顺序相同。我也尝试使用以下命令：

```
cd 1 
FILES=$( find . -type f -name "*jpg" | cut -d/ -f 2)
mkdir temp && cd temp 
for file in $FILES; do 
    BASE=$(echo $file | sed 's/.jpg//g');
    convert ../$BASE.jpg $BASE.pdf; 
    done && 
pdftk *pdf cat output ../1.pdf && 
cd .. 
rm -rf temp 
```

但仍然没有运气。操作平台Linux。

* * *

## 回答 #1

> 赞同：138
> 
> 时间：2014-01-22T09:47:53.687

或者只是阅读`ls`手册并查看：

> -v 文本中（版本）数字的自然排序

因此，在单个命令中执行我们需要的操作。

```
convert `ls -v *.jpg` foobar.pdf 
```

玩得开心;) F.

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-11-29T03:32:21.730

问题是因为您的 shell 以纯字母顺序扩展通配符，并且由于数字的长度不同，因此顺序将不正确：

```
$ echo *.jpg
1.jpg 10.jpg 100.jpg 101.jpg 102.jpg ... 
```

解决方案是根据需要用零填充文件名，以便在运行转换命令之前它们的长度相同：

```
$ for i in *.jpg; do num=`expr match "$i" '\([0-9]\+\).*'`;
> padded=`printf "%03d" $num`; mv -v "$i" "${i/$num/$padded}"; done 
```

现在文件将以正确的顺序与通配符匹配，为转换命令做好准备：

```
$ echo *.jpg
001.jpg 002.jpg 003.jpg 004.jpg 005.jpg 006.jpg 007.jpg 008.jpg ... 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-10-21T23:18:59.140

你可以使用

```
convert '%d.jpg[1-132]' file.pdf 
```

通过[https://www.imagemagick.org/script/command-line-processing.php](https://www.imagemagick.org/script/command-line-processing.php)：

> 引用其他图像文件的另一种方法是在文件名中嵌入带有场景范围的格式化字符。考虑文件名`image-%d.jpg[1-5]`。命令
> 
> `magick image-%d.jpg[1-5]`导致 ImageMagick 尝试读取具有以下文件名的图像：
> 
> `image-1.jpg image-2.jpg image-3.jpg image-4.jpg image-5.jpg`

另见[https://www.imagemagick.org/script/convert.php](https://www.imagemagick.org/script/convert.php)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-12-14T14:31:25.710

当我想合并许多高分辨率 jpeg 图像（来自扫描的书）时，以上所有答案对我来说都失败了。

Imagemagick 试图将所有文件加载到 RAM 中，因此我使用了以下两步方法：

```
find -iname "*.JPG" | xargs -I'{}' convert {} {}.pdf
pdfunite *.pdf merged_file.pdf 
```

请注意，通过这种方法，您还可以使用 GNU 并行来加速转换：

```
find -iname "*.JPG" | parallel -I'{}' convert {} {}.pdf 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-10-28T14:11:53.260

这就是我的做法：
第一行将所有 jpg 文件转换为使用 convert 命令的 pdf。
第二行是将所有 pdf 文件合并为一个，作为每页的 pdf。这是使用 gs（（PostScript 和 PDF 语言解释器和预览器））

```
for i in $(find . -maxdepth 1 -name "*.jpg" -print); do convert $i ${i//jpg/pdf}; done
gs -dNOPAUSE -sDEVICE=pdfwrite -sOUTPUTFILE=merged_file.pdf -dBATCH `find . -maxdepth 1 -name "*.pdf" -print"` 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-29T23:10:47.010

将第一个想法与他们的回复混合在一起，我认为这段代码可能令人满意

```
jpgs2pdf.sh

#!/bin/bash

cd $1
FILES=$( find . -type f -name "*jpg" | cut -d/ -f 2)
mkdir temp > /dev/null
cd temp

for file in $FILES; do
 BASE=$(echo $file | sed 's/.jpg//g');
 convert ../$BASE.jpg $BASE.pdf;
done &&

pdftk `ls -v *pdf` cat output ../`basename $1`.pdf
cd ..
rm -rf temp 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2021-10-29T04:11:33.340

**如何从图像列表创建 PDF 文档**

> 第 1 步：`parallel`从存储库安装。这将加快进程

> 第 2 步：将每个 jpg 转换为 pdf 文件

```
find -iname "*.JPG" | sort -V | parallel -I'{}' convert -compress jpeg -quality 25 {} {}.pdf 
```

`sort -V`将按自然顺序对文件名进行排序。

> 第 3 步：将所有 PDF 合并为一个

```
pdfunite $(find -iname '*.pdf' | sort -V) output_document.pdf 
```

*信贷[格雷戈尔风暴](https://stackoverflow.com/a/47815792/8229399)*

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2021-11-22T22:05:20.393

结合 Felix Defrance 和 Delan Azabani 的回答（从上面）：

```
convert `for file in $FILES; do echo $file; done` test_2.pdf 
```

# swing - 如何在 netbeans 拖放中为 JLayeredPane 使用 setLayout？

> ID：13618239
> 
> 赞同：0
> 
> 时间：2012-11-29T03:15:43.487
> 
> 标签：swing, netbeans-7, jlayeredpane

我尝试将 JLayeredPane 与 netbeans 拖放一起使用

我需要设置它的布局和设置层（在设计视图中）

但我找不到 setLayout

如果我手动编写 setLayout（在源代码视图中），

它不会影响设计视图

（我需要设计视图中的效果让我更简单）

我可以这样做吗？如何？

非常感谢任何帮助

编辑 ：

例如，我想在 microsoft office 2007 中创建一个按钮 ..（它位于角落（西北））位于工具栏和某些东西（可能是容器）之间的按钮..所以我认为我必须使用 layeredpane 使组件可以在前面彼此的..如果我可以使用netbeans拖放（在设计视图中）和JLayeredPane的setLayout效果会更有帮助..（我只想用gridbaglayout使许多组件可以在彼此前面）（只是尝试创建可爱的用户界面）

# asp.net-mvc-3 - C# Entity Framework 和 Predicate Builder - 在 IQueryable / Pagination 问题中查找匹配行的索引

> ID：13618241
> 
> 赞同：0
> 
> 时间：2012-11-29T03:15:54.327
> 
> 标签：asp.net-mvc-3, c#-4.0, predicatebuilder

我有一个`PredicateBuilder`表达式，它返回一个`IQueryable`这样的（人为的例子）：

```
var predicate = PredicateBuilder.True<CoolEntity>();
predicate = predicate.And(x => x.id > 0);
IQueryable<CoolEntity> results = CoolEntityRepository
                                    .FindBy(predicate)
                                    .OrderByDescending(x => x.id); 
```

然后我使用它来生成一个分页列表，其中只包含给定页面的结果，使用 MVC 索引控制器来处理`CoolEntity`实体，如下所示：

```
int total = results.Count(); //Used by my controller to show the total number of results
int pageNumber = 2;
int pagesize = 20;
//Only get the entities we need for page 2, where there are 20 results per page
List<CoolEntity> resultList = results
                                .Skip(pageNumber * pageSize)
                                .Take(pageSize)
                                .ToList() 
```

此查询确保每个页面只返回相关结果，因为通过存储库从 SQL 数据库返回了数千条记录。它一直运行良好。

问题是，我现在希望能够找出我需要为特定实体返回的索引的哪些分页页面。例如，假设我的 CoolEntity 对象之一的 ID 为 5 -`pageNumber`如果我想为我的 Index 控制器加载该实体所在的分页页面，我如何确定该值需要是什么？

具体来说，我怎样才能发现对于`results`，ID 为 5 的实体是第 651 行，并因此使用这个数字来确定`pageNumber`（即`Math.Ceiling(651/pagesize)`或类似的东西）？有更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T23:57:09.497

我的一位同事为此提出了一个似乎非常快的解决方案。

```
results 
   .Select( x => x.id)
       .ToList()
       .Select((entry, index) => new { ID = entry, Rank = index + 1, PageNumer = ((index+ 1) / pagesize ) + 1 })
       .Where(x => x.id== 5) 
```

在 Linqpad 中进行测试时，这发现了大约 00:00.191 秒内约 100000 条记录的结果。如果您有更有效的方法，请告诉我。

# scala - Scala 2.9：解析器子类不识别“Elem”覆盖？

> ID：13618242
> 
> 赞同：1
> 
> 时间：2012-11-29T03:16:11.630
> 
> 标签：scala, parser-combinators

我写了一个解析器来充当词法分析器。这个词法分析器解析一个文件并返回一个标记列表，每个标记都是一个扩展公共特征的案例类或对象。

我现在正在尝试为词法分析器的输出编写一个解析器，但我遇到了一个非常令人困惑的问题。解析器很乐意隐式转换我的案例对象，但如果我什至尝试`apply(classHere)`手动调用，它就会抛出一个合适的。

以下是我的代码的简化版本：

```
// CODE
trait Token

case class StringWrapperIgnoresCase(val string: String) {
  private case class InnerWrapper(s: String)

  lazy val lower = string.toLowerCase

  override lazy val hashCode = InnerWrapper(lower).hashCode

  override def equals(that: Any) =
    that.isInstanceOf[StringWrapperIgnoresCase] &&
      lower == that.asInstanceOf[StringWrapperIgnoresCase].lower
}

case class ID(val text: String)
  extends StringWrapperIgnoresCase(text)
  with Token {
    override def toString = "ID(" + text + ")"
  }

case object PERIOD extends Token

object Parser extends Parsers {
  type Elem = Token

  def doesWork: Parser[Token] = PERIOD

  def doesNotWork: Parser[Token] = ID
} 
```

编译器报告以下有关的消息`doesNotWork`：

```
// ERROR MESSAGE
type mismatch;  found   : alan.parser.ID.type (with underlying type object alan.parser.ID)  required: alan.parser.Parser.Parser[alan.parser.Token] 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T04:13:55.600

更新：从你的问题中我不清楚你在问什么，但既然你已经指定你想要一个与`ID`你的答案匹配的解析器，这里有一个更惯用的解决方案：

```
val id: Parser[ID] = accept("ID", { case i: ID => i }) 
```

在这里，您提供了解析器所需内容的描述（用于错误消息）以及以`ID`s 作为域的部分函数。您也可以使用`acceptIf`xiefei 在对您的答案的评论中提供的版本。

* * *

当您引用没有参数列表的案例类（与案例对象相反）时，您将获得自动生成的伴随对象，它*不是*类本身的实例。考虑以下：

```
sealed trait Foo
case class Bar(i: Int) extends Foo
case object Baz extends Foo 
```

现在`Baz: Foo`很好，但`Bar: Foo`会给出与您所看到的非常相似的错误。

另请注意，这里发生的事情并不是严格的*cast*。该`Parsers`特征具有具有以下签名的方法：

```
implicit def accept(e: Elem): Parser[Elem] 
```

当你写这个：

```
def doesWork: Parser[Token] = PERIOD 
```

您正在尝试键入 an `Elem`as a ，然后隐式转换开始（有关隐式转换的更多信息，请参见[规范](http://www.scala-lang.org/docu/files/ScalaReference.pdf)`Parser[Elem]`的第 7.3 节）。另一方面，当你写这个时：

```
def doesNotWork: Parser[Token] = ID 
```

您正在尝试将`ID`伴随对象（具有 type `ID.type`，not `ID`or `Token`，因此 not `Elem`）键入为 a `Parser[Elem]`，并且没有使这成为可能的隐式转换。

你可能最好写出`accept(PERIOD)`and `accept(ID("whatever"))`，至少现在，并在尝试编译代码时遵守以下弃用警告：

> 逐案继承具有潜在的危险错误，这些错误不太可能被修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T04:42:51.960

使用 TravisBrown 和 drstevens 所说的，我在解析器中添加了一个新的产品：

```
def id = {
  acceptIf(
    _ match {
      case ID(_) => true
      case _ => false
    }
  )("'ID(_)' expected but " + _ + " found")
}

def nowWorks = id 
```

我暂时不会接受这个作为答案，以允许某人提供比这更优雅的解决方案。这对我的口味来说看起来有点乱，我敢肯定，更习惯于函数式编程方法的人会将它变成优雅的单线。

# drupal-7 - drupal 7 omega子主题设置标记

> ID：13618245
> 
> 赞同：0
> 
> 时间：2012-11-29T03:16:17.327
> 
> 标签：drupal-7, drupal-themes

新安装的 drupal 7 和 omega 主题。我将 omega-html5 复制到 sites/all/theme 文件夹并按照说明对信息文件进行了更改。然后我更改了css文件名。我刷新了外观页面，我的主题出现了。我启用并设置默认值。Alpha 和 Core 被禁用。当我单击设置选项时，屏幕只显示标记语言，没有其他内容。
我的系统是运行 Apache 2.2.16 PHP 5.3.17 和 mySql 5 的 vista。我尝试过但没有解决方案，

1.  清除缓存
2.  一个一个和两个都启用（Alpha 和 Core Omega 主题）
3.  将 PHP 内存更改为 128 到 256 MB
4.  之前尝试过Omega工具创建子主题，

当我在启用并设置默认欧米茄核心主题后尝试设置时显示相同的标记，但是当我设置默认欧米茄的 Alpha 主题时，我可以看到设置。
我真的很喜欢 Omega 主题的 GUI 功能并希望使用它，但这个问题让我秃头（因为我正在拔头发）
提前谢谢，

（刚刚尝试发现如果我使用 Alpha-xhtml starterkit 它可以正常工作，但不确定我应该使用它吗？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T23:04:04.667

每个子主题必须具有唯一的配置。例如，如果您的子主题名称是“ **mytheme** ”，那么您应该：

主题文件夹名称：mytheme 主题信息文件：mytheme.info

CSS 文件必须在 mytheme.info 文件中设置它们的名称。

此外，**base_theme**必须存在于主题文件夹中！

# haskell - 递归回溯 Haskell

> ID：13618247
> 
> 赞同：1
> 
> 时间：2012-11-29T03:16:40.877
> 
> 标签：haskell

好的，所以我试图在 Haskell 中创建一个数独求解器，但我收到一条错误消息，指出我无法将预期类型 [[Int]] 与实际类型 IO () 匹配。这是我对递归求解器、错误消息和其他相关代码的尝试：

递归求解器尝试：

```
test i j q s_board = if ((valid_row i q s_board )&&(valid_column j q s_board)&&  (valid_sub_board i j q s_board)) then (solve (set_value i j q s_board)) else s_board

foo i j s_board = if ((get_value i j s_board) == 0) then [test i j q s_board | q <- [1..9]] else s_board  

solve s_board = if (full_board s_board) then (print_board s_board) else [foo i j s_board | i <- [0..8], j <- [0..8]] 
```

如果我包含有效列、行等函数的所有定义，这个问题将非常长，但我已经检查以确保这些函数有效。使用此代码，我收到以下错误消息：

```
 Couldn't match expected type `[[Int]]' with actual type `IO ()'
 In the return type of a call of `print_board'
 In the expression: (print_board s_board)
 In the expression:
   if (full_board s_board) then
       (print_board s_board)
   else
       [foo i j s_board | i <- [0 .. 8], j <- [0 .. 8]] 
```

这也是我用来打印我的板的代码：

```
 -- showLine: this function provides formating for a single row 
showLine :: [Int] -> String
showLine = intercalate " | "
         . map unwords
         . chunksOf 3
         . map show

-- showBoad: this function provides formating for the entire board       
showBoard :: [[Int]] -> String
showBoard = intercalate "---------------------\n"
          . map unlines
          . chunksOf 3
          . map showLine

-- print_board: this function is meant to print out the entire board 
print_board :: [[Int]] -> IO ()   
print_board s_board = putStrLn $ showBoard s_board 
```

你们看到我到目前为止的问题有什么问题吗？我对 Haskell 完全陌生，这是我尝试过的第一个真正的程序。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-29T04:19:30.773

an 的两个分支`if`必须具有相同的类型，但在

```
if (full_board s_board) then
    (print_board s_board)
else
    [foo i j s_board | i <- [0 .. 8], j <- [0 .. 8]] 
```

`True`分支具有 IO () 类型，而分支`False`是事物列表（在这种情况下可能是板），所以类型是`[a]`, if `foo :: Int -> Int -> [[Int]] -> a`。

你应该分离关注点，递归回溯应该给你一个（完整的）板列表，打印应该从另一个调用`solve`.

我的建议将类似于

```
type Grid = [[Int]]

solve :: Grid -> [Grid]
solve s_board = if full_board s_board
                    then [s_board]    -- full means no branches, singleton list
                    else concat [foo i j s_board | i <- [0 .. 8], j <- [0 .. 8]]

test :: Int -> Int -> Int -> Grid -> [Grid]
test i j q s_board
    | valid_row i q s_board
      && valid_column j q s_board
      && valid_sub_board i j q s_board = solve $ set_value i j q s_board
    | otherwise = []

foo :: Int -> Int -> Grid -> [Grid]
foo i j s_board
    | get_value i j s_board == 0 = concat [test i j q s_board | q <- [1 .. 9]]
    | otherwise                  = [] 
```

所以这些函数中的每一个都返回一个`Grid`s 列表，并且通过返回一个可以从当前网格到达的解决方案的空列表来修剪死胡同。当还没有诊断出死胡同时，尝试所有允许的组合。

然后你可以有

```
solve_and_print :: Grid -> IO ()
solve_and_print s_board = case solve s_board of
                            [] -> putStrLn "Sorry, that board had no solution."
                            (g:_) -> print_board g 
```

但是，这会产生多次相同的解决方案，并且对于穷举搜索来说效率*非常*低，因为每个猜测组合都会按照所有可能的顺序进行。

那么，让我们来看看如何提高效率。如果我们有一个算法来选择我们猜测值的下一个位置，我们可以修剪结果列表中解决方案的排列和重复。最简单的算法是选择第一个空闲单元格。因此，让我们编写一个函数来查找网格的空闲单元格。

```
free_cells :: Grid -> [(Int,Int)]
free_cells s_board = [(i,j) | i <- [0 .. 8], j <- [0 .. 8], get_value i j s_board == 0] 
```

顺便说一句，我们还测试了网格是否已满`full_board = null . free_cells`。所以我们可以开始我们的解决方案

```
solve :: Grid -> [Grid]
solve s_board
    | null frees = [s_board]
    | otherwise  = guesses s_board (head frees)
      where
        frees = free_cells s_board 
```

接下来，我们找到可能放在单元格中的值`(i,j)`，

```
possible_values :: Grid -> (Int, Int) -> [Int]
possible_values s_board (r,c) = [q | q <- [1 .. 9], isPossible s_board q]
  where
    isPossible v = valid_row r v s_board
                   && valid_column c v s_board
                   && valid_sub_board r c v s_board 
```

并将它们放在牢房中并继续进行

```
guesses :: Grid -> (Int, Int) -> [Grid]
guesses s_board (r,c) = [solution | v <- possible_values s_board (r,c)
                                  , solution <- solve $ set_value r c v s_board] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-29T04:13:15.417

如果您是 Haskell 的新手，最好在处理*Monads*之前花点时间。IO 需要单子。

*在不*使用 IO monad（`putStrLn`等）的情况下，首先将一个工作程序放在一起是个好主意。只需加载您的程序`ghci`并简单地调用您的函数。当您对此感到满意时，并且您在 REPL 上有一个功能可以为您提供答案，您可以考虑将其打印到 STDOUT（与“世界”交互 - Haskell 需要对此有一些了解单子）。

因此，将您的`solve`功能作为初学者：

就这样吧`solve`——不要更多。所以不要在这里做 IO，比如：

```
solve s_board = 
  if (full_board s_board) then (print_board s_board) 
  else [foo i j s_board | i <- [0..8], j <- [0..8]] 
```

问题是`if`和`else`子句的类型不同。`else`返回`[[Int]]`一个；和`if`一个`IO`单子（`print_board` is *not* `[[Int]]`的结果）

将其更改为：

```
-- sometimes it helps to be explicit - solve takes a puzzle, returns a solved one.
solve :: [[Int]] -> [[Int]]  
solve s_board = 
  if (full_board s_board) then s_board                -- type of s_board is [[Int]]
  else [foo i j s_board | i <- [0..8], j <- [0..8]]   -- and so is this 
```

只需返回结果。然后你弄乱了`solve`inside `ghci`，继续修复你的程序并重新加载它直到它工作，一旦它工作，只需编写一个函数来使用所需的参数调用solve并打印它。

因此，一旦您的程序真正开始工作，您就可以解决 IO 的干扰问题：

```
print_board s_board = putStrLn $ show $ solve s_board 
```

那么这将是一个很好的下一步阅读：[http ://www.haskell.org/tutorial/io.html](http://www.haskell.org/tutorial/io.html)

# php - MySQL：简化复杂查询

> ID：13618258
> 
> 赞同：0
> 
> 时间：2012-11-29T03:17:27.310
> 
> 标签：php, mysql, infinite-loop, large-data

我根据博客中的许多教程和 stackoverflow 上的答案进行了以下查询。

```
$query = mysql_query("SELECT COUNT(user_id) FROM $table f1".
"WHERE (user_id = '$userA')".
"AND EXISTS (SELECT 1 FROM $table f2 WHERE user_id = '$userB'"
"AND f1.$field = f2.$field)")  

or die(mysql_error());  
while($row = mysql_fetch_array($query)){
    $com = $row['COUNT(user_id)'];
} 
```

userA、userB 等参数由 4000 个值的一维数组获取。但实际上，我在循环内使用循环来制作一个 4000x4000 大小的表格。

由于数据库中的数据很多，总查询量将是 17.000.000。所以，我尝试执行完整的脚本，但我看到在上面的查询中花了很多秒（1 或 2）。

您有什么建议可以通过更正上述查询来提高执行速度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T03:20:15.440

我认为您可以使用`INNER JOIN`如下查询：

```
 SELECT COUNT(f1.user_id) 
 FROM $table f1 JOIN $table f2 
    ON f1.$field = f2.$field
 WHERE f1.user_id = '$userA'
    AND f2.user_id = '$userB' 
```

# android - 如何允许通过资源 id 或值指定自定义视图的 XML 属性？

> ID：13618260
> 
> 赞同：4
> 
> 时间：2012-11-29T03:17:46.240
> 
> 标签：android, android-layout, attributes, android-xml, android-custom-view

我正在实现我自己的自定义 DialogPreference 子类，如下所示：

```
public class MyCustomPreference extends DialogPreference
{
    private static final String androidns = "http://schemas.android.com/apk/res/android";

    private String mDialogMsg;

    public MyCustomPreference(Context context, AttributeSet attrs)
    {
        super(context, attrs);

        mDialogMsg = attrs.getAttributeValue(androidns, "dialogMessage");

        ...
    }

    ...
} 
```

如您所见，我获取了`dialogMessage`XML 属性并将其保存在成员变量`mDialogMsg`中。

**我的问题是：**我当前的代码不允许将`dialogMessage`XML 属性指定为 XML 中的字符串资源 ID。

换句话说，这有效：

```
android:dialogMessage="Hello world!" 
```

但这不会：

```
android:dialogMessage="@string/hello_world" 
```

如果我在 XML 中将其指定为资源 id，则资源*id*将保存到`mDialogMsg`，而不是字符串资源本身。现在，我知道我可以这样做：

```
context.getString(attrs.getAttributeValue(androidns, "dialogMessage")) 
```

但随后用户将无法在 XML 中输入普通字符串（即非资源 ID）。我想给用户两种选择。我该怎么做呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-29T04:08:01.930

```
int resId = attrs.getAttributeResourceValue(androidns, "dialogMessage", 0);
if(resId != 0){
    mDialogMsg = getContext().getResources().getString(resId);
} else{
    mDialogMsg = attrs.getAttributeValue(androidns, "dialogMessage");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T03:57:01.633

我不确定我是否完全理解您的问题，但如果我理解了，字符串资源实际上会保存为整数值。我在应用程序中创建了以下函数来获取字符串值

```
public static String getToastString(int res, Context c)
    {
        String toast = "";
        toast = c.getResources().getString(res);

        return toast;
    } 
```

然后我可以传递资源和上下文来获取值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-06T07:19:06.570

1）声明自定义属性：

```
<declare-styleable name="CustomItem">
  <attr name="item_text" format="string"/>
</declare-styleable> 
```

2）获取它的值：

```
public CustomItem(Context context, AttributeSet attrs) {
  super(context, attrs);

  mTextView = (TextView) findViewById(R.id.text_view);

  final TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.CustomItem);
  try {
    setText(a.getString(R.styleable.CustomItem_item_text));
  } finally {
    a.recycle();
  }
}

public final void setText(String text) {
  mTextView.setText(text);
}

public final void setText(@StringRes int resId) {
  mTextView.setText(resId);
} 
```

3）在布局中使用它：

```
<com.example.CustomItem
  android:layout_width="wrap_content"
  android:layout_height="wrap_content"
  app:item_text="@string/welcome_text"
  />

<com.example.CustomItem
  android:layout_width="wrap_content"
  android:layout_height="wrap_content"
  app:item_text="Hello!"
  /> 
```

# erlang - 我应该使用哪个退出、错误或抛出？

> ID：13618261
> 
> 赞同：11
> 
> 时间：2012-11-29T03:17:52.810
> 
> 标签：erlang

你能告诉我什么时候使用`throw`,`exit`和`error`?

```
1> catch throw ({aaa}).
{aaa}
2> catch exit ({aaa}).
{'EXIT',{aaa}}
3> catch gen_server:call(aaa,{aaa}).
{'EXIT',{noproc,{gen_server,call,[aaa,{aaa}]}}}
4> catch exit("jaj")
{'EXIT',"jaj"} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-30T22:18:18.177

有**3 个**类可以用`try ... catch`:`throw`和.`error``exit`

*   `throw`使用生成`throw/1`并且旨在用于*非本地返回*并且不会生成错误，除非它没有被捕获（当您收到`nocatch`错误时）。

*   `error`当系统检测到错误时生成。您可以使用显式生成错误`error/1`。系统还在生成的错误值中包含堆栈跟踪，例如`{badarg,[...]}`.

*   `exit`是使用生成`exit/1`的，旨在表明该进程将终止。

和之间的区别`error/1`并`exit/1`没有那么大，更多的是关于错误生成的堆栈跟踪增强的意图。

它们之间的区别实际上在执行时更明显`catch ...`：当`throw/1`使用时，则`catch`返回抛出的值，正如非本地返回所期望的那样；当`error/1`使用 an 时，`catch`返回包含堆栈跟踪的`{'EXIT',Reason}`位置；`Reason`while from`exit/1` `catch`也返回`{'EXIT',Reason}`，但`Reason`仅包含实际退出原因。`try ... catch`看起来它等同于它们，但它们/曾经非常不同。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-29T03:46:41.390

**[更新]**

*Robert Virding 指出，我忽略了**throw**和**error**之间的重要区别。此编辑仅用于记录！*

~~throw~~ `error`将用于`throw`在其他语言中使用的地方。您的代码检测到正在运行的进程中的错误，这表示异常，带有`error/1`. 同一个进程捕获它（可能在堆栈中更高），并且错误将在同一个进程中处理。`error`总是带来一个堆栈跟踪。

`throw`不用于发出错误信号，而只是从深度嵌套的函数中返回一个值。由于它展开堆栈，调用`throw`将抛出的值返回到它被捕获的位置。与 的情况一样`error`，我们正在捕获被抛出的东西，只有被抛出的不是错误，而只是一个向上传递到堆栈的值。这就是为什么 throw 不会带来堆栈跟踪。

作为一个人为的例子，如果我们想`exists`为列表实现一个函数，（类似于什么`list:any`）并且作为一个练习而不自己进行递归，并且使用 just `list:foreach`，那么`throw`可以在这里使用：

```
exists(P, List) ->
  F = fun(X) -> 
    case P(X) of 
      true -> throw(true); 
      Whatever -> Whatever 
    end
  end,
  try lists:foreach(F, List) of
    ok -> false
  catch
   true -> true
  end. 
```

抛出但未捕获的值被视为`error`：`nocatch`将生成异常。

*EXIT 将在进程“放弃”*时发出信号。***父***进程处理 EXIT，而子进程只是死掉。这就是 Erlang 让它崩溃的哲学。

所以`exit/1`'s EXIT 不是在同一个进程中被捕获，而是留给父进程。`error/1`的错误是进程本地的 - 即，发生了什么以及*进程本身如何处理它的*问题；`throw/1`用于跨堆栈的控制流。

**[更新]**

1.  本教程解释得很好： http: [//learnyousomeerlang.com/errors-and-exceptions](http://learnyousomeerlang.com/errors-and-exceptions)
2.  请注意，还有一个`exit/2`- 调用了一个*`Pid`*将 EXIT 发送到的进程。 `exit/1`表示父进程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-08T21:11:44.090

我是 Erlang 的新手，但以下是我对这些东西是什么、它们的区别、它们的用途等的看法：

`throw`：应该在本地处理的条件（即在当前进程中）。例如，调用者正在寻找集合中的元素，但不知道集合中是否真的包含这样的元素；然后，如果这样的元素不存在，被调用者可以抛出，并且调用者使用`try[/of]/catch`. 如果调用者忽略了这样做，那么这将变成一个`nocatch` `error`（解释如下）。

`exit`: 当前进程完成。例如，它刚刚完成（在这种情况下，您将传递`normal`，它被视为与返回的原始函数相同），或者它的操作被取消（例如，它通常无限循环但刚刚收到一条`shut_down`消息）。

`error`: 进程做了一些事情和/或达到了程序员没有考虑到的状态（例如 1/0），认为不可能（例如`case ... of`遇到一个不匹配任何情况的值），或者某些先决条件不满足（例如输入是非空的）。在这种情况下，本地恢复没有意义。因此，既不合适`throw`也`exit`不合适。由于这是出乎意料的，堆栈跟踪是原因的一部分。

如您所见，上面的列表是按升级顺序排列的：

`throw`适用于调用者应该处理的正常情况。即处理发生*在*当前进程中。

`exit`也是理智的，但应该仅仅因为过程完成就结束当前过程。

`error`疯了。发生了无法合理恢复的事情（通常是错误？），并且本地恢复不合适。

* * *

与其他语言相比：

`throw`类似于 Java 中使用检查异常的方式。然而，`error`以更类似于未经检查的异常的方式使用。已检查异常是您希望调用者处理的异常。Java 要求您将调用包装起来`try/catch`或声明您的方法`throws`出现此类异常。然而，未经检查的异常通常会传播到最外层的调用者。

`exit`在 Java、C++、Python、JavaScript、Ruby 等更“传统”的语言中没有一个很好的类比。`exit`模糊地像一个 uber- `return`：你可以从函数的中间返回，而不是在最后返回，除了你不要只从当前函数返回，而是从它们全部返回。

* * *

`exit`例子

```
serve_good_times() ->
  receive
    {top_of_the_mornin, Sender} ->
      Sender ! and_the_rest_of_the_day_to_yourself;
    {you_suck, Sender} ->
      Sender ! take_a_chill_pill;
    % More cases...

    shut_down ->
      exit(normal)
  end,
  serve_good_times()
end 
```

由于`serve_good_times`几乎在所有消息之后都会调用自身，因此程序员决定我们不想在每个接收情况下都重复该调用。因此，她在接听电话*后*打了那个电话。但是，如果`serve_good_times`决定停止调用自己呢？这就是`exit`救援的地方。传递`normal`给`exit`会导致进程终止，就像最后一个函数调用已经返回一样。

因此，`exit`在通用库中调用通常是不合适的，例如`lists`. 该过程是否应该结束与图书馆无关。这应该由应用程序代码决定。

* * *

异常`exit`怎么办？

如果另一个进程（“远程”进程）链接到调用`exit`（并且`process_flag(trap_exit, true)`未被调用）的“本地”进程，这很重要：就像最后一个函数返回一样，`exit(normal)`不会导致远程进程退出。但是如果本地进程进行`exit(herp_derp)`调用，那么远程进程也会以`Reason=herp_derp`. 当然，如果远程进程链接到更多进程，它们也会获得退出信号`Reason=herp_derp`。因此，`normal`不退出会导致连锁反应。

让我们看一下实际情况：

```
1> self().   
<0.32.0>
2> spawn_link(fun() -> exit(normal) end).
<0.35.0>
3> self().
<0.32.0>
4> 
4> 
4> spawn_link(fun() -> exit(abnormal) end).
** exception exit: abnormal
5> self().
<0.39.0>
6> 
```

我们生成的第一个进程并没有导致 shell 退出（我们可以看出，因为`self`在 之前和之后返回了相同的 pid `spawn_link`）。但是第二个进程确实导致 shell 退出（并且系统用新进程替换了 shell 进程）。

当然，如果远程进程使用，`process_flag(trap_exit, true)`那么它只会收到一条消息，而不管本地进程是否通过`normal`或其他`exit`。设置此标志会停止连锁反应。

```
6> process_flag(trap_exit, true).
false
7> spawn_link(fun() -> exit(normal) end).  
<0.43.0>
8> self().
<0.39.0>
9> flush().
Shell got {'EXIT',<0.43.0>,normal}
ok
10>                                         
10> 
10> spawn_link(fun() -> exit(abnormal) end).
<0.47.0>
11> self(). 
<0.39.0>
12> flush().
Shell got {'EXIT',<0.47.0>,abnormal} 
```

回想一下，我说过它`exit(normal)`被视为原始函数返回：

```
13> spawn_link(fun() -> ok end).
<0.51.0>
14> flush().
Shell got {'EXIT',<0.51.0>,normal}
ok
15> self().
<0.39.0> 
```

你知道什么：和`exit(normal)`被叫时发生了同样的事情。精彩的！

# meteor - 更新到 0.5.2 后，按键事件在 Meteor 中的“输入”元素之外停止工作

> ID：13618262
> 
> 赞同：3
> 
> 时间：2012-11-29T03:17:53.880
> 
> 标签：meteor

我刚刚发现，在升级到 Meteor 0.5.2（从 0.5）之后，按键事件（'keypress'、'keydown'、keyup'）的事件处理停止了对我的工作。其他事件，如 ('click' & 'blur') 工作得很好。

即使在示例应用程序中，这样的代码也不会做任何事情：

```
Template.someTemplate.events = {
  'keydown' : function(e) {
      console.log(e);
  }
}; 
```

有趣的是，这段代码对于我在*input type="text"*或*textarea中输入的按键**确实*有效（函数触发） 。但在其他地方 - 什么也没有发生。

 **我正在 Ubuntu 12.10 中测试最新的 Crome。

有没有其他人遇到过这个问题？

谢谢，乔治

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-14T02:34:45.777

keydown 事件适用于可编辑的 html。输入字段或 contenteditable 标签触发 keydown 事件。

但是，如果您要问如何处理 body 上的 keydown 事件，这个线程可能会有所帮助：

你可以看看这个帖子：[https](https://groups.google.com/forum/?fromgroups=#!topic/meteor-talk/uHy--xIGH8o) ://groups.google.com/forum/?fromgroups=#!topic/meteor-talk/uHy--xIGH8o 。

基本上，现在，您可以直接将事件处理程序附加到 body 元素。在上面链接的示例中，他一直等到模板渲染完毕，然后使用 jQuery 附加处理程序：

```
Template.myTemplate.rendered = function() { 
        // Assuming you're using jQuery 
        $('body').on('keydown',function() { 
                console.log('key pressed'); 
        }); 
} 
```

Meteor 团队显然将很快为附加身体级事件提供更好的支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-10T08:15:47.640

你可以简单地封闭

> $('body').on('keydown',function() { console.log('keypressed'); });

在meteor.startup函数中**

# javascript - 根据单元格的值显示/隐藏表格行

> ID：13618266
> 
> 赞同：1
> 
> 时间：2012-11-29T03:18:03.140
> 
> 标签：javascript, jquery

我正在使用用户用来选择价格范围的 JQuery-UI (http://jqueryui.com/slider/#range) 中的范围滑块，我想根据它们是否下降来显示/隐藏表格行在用户选择的范围内。

这是我从其他答案中发现的：以下代码隐藏了表格行，该行在第 9 列中包含值 10 的单元格。

```
$("tr").find("td:nth-child(9):contains(10)").parent().hide(); 
```

我想要做的是“隐藏单元格中的值小于 10 的位置”。

我尝试了以下方法：

```
$("tr").find("td:nth-child(9):lt(10)").parent().hide(); 
```

但是“：lt”是一种适用于索引而不是值的方法（我认为）。

谁能帮帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T03:26:01.117

使用上面的一些代码，您可能会执行类似的操作：

```
for(var i = 0; i < 10, i++) {
   $("tr").find("td:nth-child(9):contains(" + i + ")").parent().hide();
} 
```

您可能需要添加一些东西才能获得所需的东西，但我认为这应该为您指明正确的方向！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T03:26:07.250

仅使用选择器是无法做到这一点的。您可以使用`.filter`更具体的功能：

```
$("tr").find("td:nth-child(9)").filter(function () {
   return parseInt($(this).text()) < 10;
}).parent().hide(); 
```

一个简短的说明，`:contains`对于您的第一个示例也不是很好，因为它将适用于包含“100”的元素。

# ios - 有没有办法改变 UITabBar 或 UITabBarItem 中的文本位置？

> ID：13618268
> 
> 赞同：30
> 
> 时间：2012-11-29T03:18:27.493
> 
> 标签：ios, objective-c, xcode4.5, uitabbar, uitabbaritem

![在此处输入图像描述](../Images/47ba39d2fddb28b086ed1c8bf44c498f.png)

这是我打算放在屏幕上的自定义标签栏。但是，我的伙伴希望文本稍微向上。我该怎么做？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-11-29T03:27:00.740

为什么不为视图控制器设置一个空的标题属性并将标题添加到选项卡的自定义图像中？

**更新：**为了回答的完整性；没有图像时，来自评论和[ios 标签栏将文本放在中间](https://stackoverflow.com/questions/12586411/ios-tabbar-put-text-in-the-middle-when-no-image)

`[tab.tabBarItem setTitlePositionAdjustment:UIOffsetMake(0, -10)]`

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2015-03-19T11:18:24.940

你可能想在全球范围内应用这个偏移量，所以我建议

对象-C

```
[UITabBarItem appearance].titlePositionAdjustment = UIOffsetMake(0, -4); 
```

迅速：

```
UITabBarItem.appearance().titlePositionAdjustment = UIOffset(horizontal: 0, vertical: -4) 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-10-25T16:10:23.110

这是 Interface builder 的相同技巧：

[![在此处输入图像描述](../Images/4bda482018cbcfa303fa5a4d34fa2fa2.png)](https://i.stack.imgur.com/rQ9hj.png)

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2016-11-22T19:49:33.927

您可以直接从 Interface Builder（标题位置的自定义偏移量）中执行此操作，如下所示： ![关联](../Images/f62aee39ae6a50b70c757b63259291ae.png)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2020-04-02T09:58:06.727

对于 iOS 13 及更高版本：

```
if #available(iOS 13, *) {
        let appearance = UITabBarAppearance()
           appearance.stackedLayoutAppearance.selected.titlePositionAdjustment = UIOffset(horizontal: 0, vertical: -10)
           appearance.stackedLayoutAppearance.normal.titlePositionAdjustment = UIOffset(horizontal: 0, vertical: -10) 
     } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-29T03:28:52.640

我在这里找到了答案：[ios tabbar put text in the middle when no image](https://stackoverflow.com/questions/12586411/ios-tabbar-put-text-in-the-middle-when-no-image) will tr​​y this one and see how it goes :)

更新：它有效。只有 1 行代码。

# matlab - 如何在matlab中将图像旋转45度两次并在最后保持相同的大小？

> ID：13618270
> 
> 赞同：3
> 
> 时间：2012-11-29T03:18:30.720
> 
> 标签：matlab, image-processing, octave

我想要 ：

1.  将图像（尺寸 512x512）旋转 45 度。
2.  对其进行一些处理。
3.  将图像旋转 -45 度。

我的问题是当我应用 45 度和 -45 度的旋转时，图像的大小会发生变化，我希望它是相同的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T05:28:44.473

旋转图像的通常过程是放大图像，旋转图像并缩小图像。这样，您可以避免旋转时出现的暗边距。

Matlab 会自动执行此过程。因此，如果您想要图像的特定尺寸，则必须在旋转图像后选择图像的适当区域。

假设我们想要旋转图像并想要保留与原始图像相同的尺寸，我们可以这样做：

```
 img = imread('image.png'); 
    r = numel(img(:,1));
    c = numel(img(:,2));
    nimg = imrotate(img, 45);
    nimg = imrotate(nimg, 45);
    n_R = numel(nimg(:,1));
    n_C = numel(nimg(:,2));
    n_R = n_R+mod(n_R, 2); %to avoid dimensions being in double datatype
    n_C = n_C+mod(n_C, 2);
    oimg = nimg(((n_R/2)-(r/2)):((n_R/2)+(r/2)), ((n_C/2)-(c/2)):((n_C/2)+(c/2)),:);
    imwrite(oimg, 'rot_image.png'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T04:59:05.147

你不能这样做。这没有意义。简单实验：

1.  拿一张正方形的纸，把它靠在白墙上
2.  在墙上画出正方形的边界
3.  将这张纸旋转 45 度
4.  在墙上画出另一个正方形，将旋转的纸包起来
5.  把那张纸从墙上拿出来，看看为什么你不能这样做
6.  在墙上留下痕迹，这样你就不会忘记

# android - 带有进度条问题的 Android 通知

> ID：13618276
> 
> 赞同：1
> 
> 时间：2012-11-29T03:18:44.090
> 
> 标签：android, notifications, progress-bar

我正在使用[链接](http://united-coders.com/nico-heid/show-progressbar-in-notification-area-like-google-does-when-downloading-from-android/)教程

显示带有进度条的通知。

但是当我运行这个演示时，我看不到进度条

我使用 API 8

有什么问题吗？

我怎样才能做到这一点？

注意：在我发帖之前，我确实在这个论坛中搜索了一些主题。每个人都说好的，那么这里有什么问题？我想可能是通知不能与 API8 一起正常工作。

谁能帮我弄清楚这个？谢谢

# c# - Windows 服务和获取更新的逻辑

> ID：13618277
> 
> 赞同：0
> 
> 时间：2012-11-29T03:18:49.817
> 
> 标签：c#, vb.net, winforms, windows-services

我使用 vb.net 开发了一个 Windows 服务，它使用**OnStart** Even 执行以下操作...

*   从 SQL 表中获取所有条目
*   从返回的行创建计划

它工作正常，安排他们的时间和东西。

**问题：**每当我必须向表中添加新行时，我必须重新启动服务，以便它可以抓取新创建的行。这给我带来了问题......可能有一个任务已经在运行并且重新启动服务可能会破坏系统。

那么处理这个问题的最佳方法是什么？可以在不重新启动的情况下将新行加载到服务中吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T03:47:09.000

使用*轮询*到数据库的概念。使用`System.Threading.Timer`该类，设置一些间隔，在此之后将调用*回调方法并负责轮询数据库以获取新条目。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T04:15:40.577

[此](https://stackoverflow.com/questions/649935/windows-services-onstart-loop-do-i-need-to-delegate)OnStart由 Marc Gravell 提供：

```
public void OnStart(string[] args) // should this be override?
{
    var worker = new Thread(DoWork);
    worker.Name = "MyWorker";
    worker.IsBackground = false;
    worker.Start();
}
void DoWork()
{
    // do long-running stuff
} 
```

请注意，`OnStart`可以启动多个线程，也可以根据需要使用启动的第一个线程来启动其他线程。这允许您设置数据库轮询或在消息队列上等待数据的线程。

* * *

一个有用的提示：

将 a 添加`Main`到您的服务允许您在 Visual Studio 中将其作为控制台应用程序运行。这大大简化了调试。

```
 static void Main(string[] args)
    {
        ServiceTemplate service = new ServiceTemplate();
        if (Environment.UserInteractive)
        {
            // The application is running from a console window, perhaps creating by Visual Studio.
            try
            {
                if (Console.WindowHeight < 10)
                    Console.WindowHeight = 10;
                if (Console.WindowWidth < 240) // Maximum supported width.
                    Console.WindowWidth = 240;
            }
            catch (Exception)
            {
                // We couldn't resize the console window.  So it goes.
            }

            service.OnStart(args);
            Console.Write("Press any key to stop program: ");
            Console.ReadKey();
            Console.Write("\r\nInvoking OnStop() ...");
            service.OnStop();

            Console.Write("Press any key to exit: ");
            Console.ReadKey();
        }
        else
        {
            // The application is running as a service.
            // Misnomer.  The following registers the services with the Service Control Manager (SCM).  It doesn't run anything.
            ServiceBase.Run(service);
        }
    } 
```

# c - const 可以应用于类型吗？

> ID：13618279
> 
> 赞同：0
> 
> 时间：2012-11-29T03:19:08.703
> 
> 标签：c, constants, c99

我知道`const`限定符只影响一个对象，但不影响它的类型：

例如：

```
// Only the elements of an array are constant not the array itself
const int a[5]; 
```

假设我有：

```
float *const p1; // 1
float const *p2; // 2 
```

在上面的第一种情况下，这是否意味着指针*类型*是常量而不是对象`p1`？当类型不允许被限定时，这怎么可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T03:20:39.510

```
float *const p1; // 1 
```

意味着指针`p1`是常量，它不能（而不应该）指向另一个地址。
不是指针*类型*是常量，而是该类型的实例是常量`p1`。

使用**[顺时针螺旋规则](http://c-faq.com/decl/spiral.anderson.html)**可以更好地理解这一点。

> **当类型不允许被限定时，这怎么可能？**

这是不正确的。实际上，限定符是*类型限定符*的缩写形式（第 6.7.3 节）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T03:28:07.760

有了这个声明：

```
const int a[5]; 
```

a 具有类型“5 个 const int 的数组”。

有了这个声明

```
float *const p1; 
```

p1 的类型为“指向浮点的常量指针”。

有了这个声明

```
const float *p2; 
```

p2 具有“指向 const float 的指针”类型。

无法将数组声明为 const，但无论如何也无法更改数组。只能更改数组中的元素。

# java - 为什么 PackageInfo.signatures 字段是一个数组，这里什么时候会有一个值以外的值？

> ID：13618281
> 
> 赞同：10
> 
> 时间：2012-11-29T03:19:26.930
> 
> 标签：java, android

我正在相互检查包签名以确定它们是否不兼容（针对不同的密钥库编译）。我注意到这`PackageInfo.signatures`几乎总是一个包含单个条目的集合，这对我来说很有意义。我使用调试或生产密钥库构建我的应用程序，这决定了包的签名（这是我此时对 apk 签名过程的简单理解）。我知道如果我不特别询问此信息（通过传递`PackageManager.GET_SIGNATURES`标志），这将是空的，但我不太明白会有多个信息的情况。

我编写了一些调试代码并在我的个人 Android 手机上运行它。在我手机上安装的 300 多个软件包中，除了一些似乎来自我的服务提供商（com.verizon.* 命名空间）的软件包外，所有软件包都只有一个签名。

我觉得我的用例（包管理）考虑应用程序包将具有单个签名是可以接受的，但我想确保我没有遗漏可能引入边缘案例错误的东西。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-29T04:35:26.240

出于您的目的，假设 Android 应用程序具有单个签名似乎是完全可以接受的。一个 Android APK*可以*用多个签名编译，但既不推荐也不广泛测试。（Verizon 为什么要这么做？谁知道呢。）

我从[Dianne Hackborn那里找到](https://plus.google.com/105051985738280261832/posts)[了这个档案](http://www.mail-archive.com/android-security-discuss@googlegroups.com/msg00131.html)，她是 Android 开发的首选女士：

> **问**：我知道 jar 签名者支持在一个 jar 文件中进行多个签名。如果一个 APK 文件有两个有效的签名，这是否意味着这个 APK 可以访问两个签名者提供的签名级别权​​限？
> 
> **A** : 理论上，可以通过多个签名完成某些事情，但没有人使用过它，所以它可能不起作用。这也具有将两个签名别名为同一事物的副作用（如果它确实有效），因为它们可能来自同一所有者，这可能不是您想要的。

[Dianne 的另一点](https://groups.google.com/forum/?fromgroups=#!topic/android-platform/2CBVZONdktw)（注意使用“it”，而不是“they”，以及“certificate”而不是“certificates”）：

> **问**：PackageInfo.signatures：它返回什么？
> 
> **答**：它是用于签署 .apk 的证书。

然而。值得注意的是，我在 Android 源码 Git 中找到了多个签名的测试参考：[Test for Checking Package Signatures (Bug 4596332)](https://android.googlesource.com/platform/cts/+/9803e0f8e364fa919dc942643de13652add52e9f%5E!)。此外，[Android`BackupManagerService`代码](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.1_r1/com/android/server/BackupManagerService.java#2683)（和[其他 Android 源代码](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.1_r1/com/android/server/BackupManagerService.java#3984)）确保它检查多个签名。

因此，这是我的结论：您不必担心多重签名，除非您在特定包的安全性和编译很重要的情况下进行编码。（但是，如果需要，容纳多个签名似乎也不会有太大问题。）

希望这至少有点令人满意。

# c++ - 在一行上声明多个对象指针会导致编译器错误

> ID：13618282
> 
> 赞同：26
> 
> 时间：2012-11-29T03:19:36.387
> 
> 标签：c++, oop, sfml

当我这样做时（在我的课堂上）

```
public:
    Entity()
    {
        re_sprite_eyes = new sf::Sprite();
        re_sprite_hair = new sf::Sprite();
        re_sprite_body = new sf::Sprite();
    }

private:
    sf::Sprite* re_sprite_hair;
    sf::Sprite* re_sprite_body;
    sf::Sprite* re_sprite_eyes; 
```

一切正常。但是，如果我将声明更改为：

```
private:
    sf::Sprite* re_sprite_hair, re_sprite_body, re_sprite_eyes; 
```

我得到这个编译器错误：

```
error: no match for 'operator=' in '((Entity*)this)->Entity::re_sprite_eyes = (operator new(272u), (<statement>, ((sf::Sprite*)<anonymous>))) 
```

然后它说候选`re_sprite_eyes`对象`sf::Sprite`和/或引用。

为什么这不起作用？声明不一样吗？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-11-29T03:20:36.533

`sf::Sprite* re_sprite_hair, re_sprite_body, re_sprite_eyes;`

不声明 3 个指针 - 它是 1 个指针和 2 个对象。

`sf::Sprite*`不幸的是，不适用于在它之后声明的所有变量，仅适用于第一个。它相当于

```
sf::Sprite* re_sprite_hair;
sf::Sprite re_sprite_body;
sf::Sprite re_sprite_eyes; 
```

你想做：

`sf::Sprite *re_sprite_hair, *re_sprite_body, *re_sprite_eyes;`

您需要为每个变量添加一颗星。在这种情况下，我更愿意将星号保留在变量一侧，而不是类型，以明确这种情况。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-11-29T03:59:11.780

在 C 和 C++ 中，`*`绑定到*声明*符，而不是类型说明符。在这两种语言中，声明都是基于*表达式*的类型，而不是对象。

例如，假设您有一个指向`int`named的指针`p`，并且您想要访问指向的 `int`值`p`；您可以通过使用一元运算符取消引用指针来做到这一点`*`，如下所示：

```
x = *p; 
```

*表达式* 的类型`*p`是`int`; 因此，声明`p`是

```
int *p; 
```

无论您在同一声明语句中声明了多少个指针，这都是正确的；如果`q`并且`r`还需要声明为指针，那么它们还需要将一元`*`作为声明符的一部分：

```
int *p, *q, *r; 
```

因为*表达式* `*q`和`*r`有类型`int`。这是 C 和 C++ 语法的意外，您可以编写`T *p`、`T* p`或`T * p`; 所有这些声明都将被解释为`T (*p)`.

这就是为什么我不喜欢将指针和引用类型声明为的 C++ 风格

```
T* p;
T& r; 
```

因为它暗示了对 C 和 C++ 声明语法如何工作的错误看法，从而导致您刚刚遇到*的那种*混乱。但是，我已经编写了足够多的 C++ 来意识到有时这种风格*确实*使代码的意图更加清晰，尤其是在定义容器类型时。

但这仍然是错误的。

* * *

`T* p`这是对轨道上的轻量级竞赛（以及反对我将公约标记为“错误”的任何其他人）的（迟了两年）的回应......

首先，您有一大堆问题*，就像这个*问题一样，*专门*由使用`T* p`约定而引起，以及它如何不像人们期望的那样工作。这个网站上有多少问题是按“为什么不将两者都`T* p, q`声明为指针？”的顺序？`p``q`

它*引入了*混乱——这*本身*就足以阻止它的使用。

但除此之外，它是*不一致*的。您无法将数组或函数与声明符分开，为什么要将指针与它分开？

“嗯，那是因为`[]`and`()`是后缀运算符，而 while`*`是一元的”。是的，是的，那么*为什么不将运算符与其操作数相关联*呢？在声明`T* p`中，`T`不是 的操作数`*`，那我们为什么要写声明就好像它是呢？

如果`a`是“指针数组”，我们为什么要写`T* a[N]`？如果`f`是“返回指针的函数”，我们为什么要写`T* f()`？如果您将这些声明编写为和，则声明器系统*更有意义*并且*内部一致*。从我可以用作任何类型的替身（实际上，任何声明说明符序列）的事实来看，这一点应该很明显。`T *a[N]``T *f()``T`

然后你有指向数组的指针和指向函数的指针，其中`*`必须显式绑定到声明符¹：

```
T (*a)[N];
T (*f)(); 
```

是的，指针性是你要声明的东西的一个重要属性，但数组性和函数性也是如此，强调一个而不是另一个会产生比它解决的问题更多的问题。同样，正如这个问题所示，`T* p`约定*引入了混淆*。

因为`*`它本身是一元且单独的标记，所以您可以编写`T* p`, `T *p`, `T*p`,`T * p`并且它们都将被编译器接受，但它们都将被解释为`T (*p)`. 更重要的是，`T* p, q, r`将被解释为`T (*p), q, r`. 如果你写的话，这种解释会更明显`T *p, q, r`。是的，是的，是的，“每行只声明一件事，这不会有问题。” 你知道还有什么办法不让它成为问题吗？ *正确地编写你的声明器*。声明器系统本身将更有意义，您将不太可能犯错误。

我们不是在争论这种语言的“古老古怪”，它是语言语法及其哲学的基本组成部分。Pointer-ness 是*declarator*的一个属性，就像 array-ness 和 function-ness 一样，假装它*不仅*会导致混淆，而且会使 C 和 C++ 都比它们需要的更难理解。

我会争辩说，将取消引用运算符设为一元而不是后缀是一个错误²，但这就是它在 B 中的工作方式，Ritchie 希望尽可能多地保留 B 。我还将争辩说，Bjarne 对`T* p`公约的宣传是一个错误。

* * *

 ^(1.  在讨论的这一点上，有人会建议使用 typedef

    ```
    typedef T arrtype[N]; 
    arrtype* p;
    ```

    这完全没有抓住重点，并在“C：完整参考”的第一版中赢得了建议者的殴打，因为它又大又重，对其他任何东西都没有好处。
2.  `T a*[N]*()`与 相比，写作`T (*(*a)[N])()`绝对不那么刺眼，并且更容易扫描。) 

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-29T04:52:36.543

在 C++11 中，您有一个很好的解决方法，它可能比来回移动空格更好：

```
template<typename T> using type=T;
template<typename T> using func=T*;

// I don't like this style, but type<int*> i, j; works ok
type<int*> i = new int{3},
           j = new int{4};

// But this one, imho, is much more readable than int(*f)(int, int) = ...
func<int(int, int)> f = [](int x, int y){return x + y;},
                    g = [](int x, int y){return x - y;}; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-03-25T05:49:50.057

> 可能引起您注意的另一件事是以下行：
> 
> ```
> int * p1, * p2; 
> ```
> 
> 这声明了前面示例中使用的两个指针。但请注意，`*`每个指针都有一个星号 ( )，以便两者都有类型`int*`（指向 int 的指针）。由于优先规则，这是必需的。请注意，如果代码是：
> 
> ```
> int * p1, p2; 
> ```
> 
> `p1`确实是 type `int*`，但`p2`会是 type `int`。为此目的，空间根本不重要。但无论如何，对于大多数有兴趣在每个语句中声明多个指针的指针用户来说，只需记住每个指针放一个星号就足够了。甚至更好：为每个变量使用不同的 statemet。

来自[http://www.cplusplus.com/doc/tutorial/pointers/](http://www.cplusplus.com/doc/tutorial/pointers/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-29T04:14:20.800

星号绑定到指针变量名称。记住这一点的方法是注意在 C/C++ 中，声明模仿用法。

指针可以这样使用：

```
sf::Sprite *re_sprite_body;
// ...
sf::Sprite sprite_bod = *re_sprite_body; 
```

相似地，

```
char *foo[3];
// ...
char fooch = *foo[1]; 
```

在这两种情况下，都有一个基础类型说明符，以及在表达式中“获取”该类型的对象所需的一个或多个运算符。

# c - 访问结构成员时出现段错误

> ID：13618289
> 
> 赞同：0
> 
> 时间：2012-11-29T03:20:40.667
> 
> 标签：c, pointers, struct, heap-memory

我正在尝试创建一个空闲列表来实现堆分配器。到目前为止，这是我定义结构的方式：

```
typedef struct headerT headerT;

struct headerT{
   size_t payloadSize;
   struct headerT* next; // unused field to make struct 8 bytes, simplifies alignment                                      
};

headerT* freeList; 
```

这是我初始化堆的方式：

```
int myinit()
{
  freeList = InitHeapSegment(0); // InitHeapSegment resets heap segment to empty, no pages                                                  
                              //allocated                                                                             
  freeList->payloadSize = 0;
  freeList->next=NULL;
  return 0;
} 
```

当函数尝试将有效负载大小更改为零时，我立即收到段错误。我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T03:27:08.323

问题在这里：

```
 freeList = InitHeapSegment(0); // InitHeapSegment resets heap segment to empty, no pages                                                  
                              //allocated 
```

你说`InitHeapSegment`“重置”堆段为空，但没有分配页面。可能它没有`malloc()`。因此`freeList`可能指向您无权访问的垃圾值，从而给您一个 SIGSEGV 或 SEGMENTATION VIOLATION 错误。在 Windows 中，此错误的类型为 Cx00000005

# azure - Azure 移动服务 + 带指南的数据

> ID：13618291
> 
> 赞同：1
> 
> 时间：2012-11-29T03:20:41.307
> 
> 标签：azure

我正在尝试使用 Guid ids 而不是 bigint，并且名称与 id 不同，这是否可以为客户端模型使用 Guids 和不同的 id 名称？

谢谢

# php - 遍历多个上传 $_FILES 数组

> ID：13618292
> 
> 赞同：1
> 
> 时间：2012-11-29T03:20:45.887
> 
> 标签：php, file-upload, foreach

我的网站上有两种表格，一种上传单个文件，另一种上传多个文件。两种形式都上传到同一个目录，并且单个文件形式可以完美地工作。为了优化多文件上传表单的代码，以便我不会单独写出每个文件的处理，我有以下代码：

```
foreach($_FILES['multi']['name'] as $uploaded_file){
     if(!move_uploaded_file($uploaded_file, "/var/www/uploads/".$uploaded_file."")){
         echo "Could not move File: ".$uploaded_file."<br />";
     }else{
         // Do additional processing
     }  
} 
```

脚本没有将文件移动到有效且适用于单个文件上传表单的目录，而是出错并显示我的停止消息：

```
"Could not move File: <filename here>" 
```

一直在挠头，非常感谢任何见解和帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T03:30:16.943

您没有正确定位上传的临时文件位置：

```
foreach ($_FILES['multi']['name'] as $idx => $uploaded_file) {
    move_uploaded_file($_FILES['multi']['tmp_name'][$idx], "/var/www/uploads/$uploaded_file");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T03:24:13.647

尝试类似：

```
$count=0; 
foreach($_FILES['multi']['name'] as $uploaded_file) {
   $tmp=$_FILES['file']['tmp_name'][$count];
   if(!move_uploaded_file($tmp, "/var/www/uploads/".$uploaded_file)){
     echo "Could not move File: ".$uploaded_file."<br />";
   }else{
     // Do additional processing
   }   
   $count=$count + 1;
} 
```

# jquery - 如何在通过razor mvc中的foreach语句循环时将自定义id标签分配给html标签

> ID：13618295
> 
> 赞同：0
> 
> 时间：2012-11-29T03:21:41.467
> 
> 标签：jquery, html, razor

在我的 cshtml 视图中，如果我有：

```
 foreach (var x in mycollection)
  { 

      <li id="a + @x.id"></li>

   } 
```

如果你看看我是如何设置这个 id 的，我正在分配 'a' 加上 id 所以 a1，或 a2，或 a3，等等......给每个元素单独的 id。但是，当我在 jquery 中使用它时，这对我不起作用：

```
 function(id) {
       $('#a' + id).css({ "visibility": "hidden" });
      } 
```

我不能只使用'@x.Id'，因为我已经在其他地方使用它了。我怎样才能使这些 id 的自定义？感谢您的任何提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T03:31:30.280

我想`<li id="a + @x.id"></li>`应该是`<li id="a-@x.id"></li>`然后`$('#a-' + id)`。

因为`<li id="a + @x.id"></li>`创建了一个类似`<li id="a + 1"></li>`not的元素`<li id="a1"></li>`

# java - 试图向另一个类中的 GUI 显示 hashmap 值

> ID：13618298
> 
> 赞同：0
> 
> 时间：2012-11-29T03:22:19.780
> 
> 标签：java, swing, user-interface, hash, hashmap

问题是：我想检查我所有的客户名单。因此，我将使用哈希映射并输出它们的 ic num 和它们的名称。如果我尝试使用终端，输出运行良好。

但现在我想将这些哈希映射的结果输出到 GUI

到目前为止，这是我的编码。您可以跳过 viewNumCust 的操作事件。那就是我试图将haspmap输出到jtextarea的地方。

```
import javax.swing.*;
import java.io.*;
import java.util.*;

import java.awt.*;
import java.awt.event.*;
import java.io.FileReader;
import java.util.HashMap;
import java.util.Scanner;
import java.util.StringTokenizer;

public class manageClientAccGui extends JFrame
{
ImageIcon image;
JLabel imgLabel,clientLabel,helloLabel,greetingLabel;
JButton createCustProfileButt,editClientAccButt,deleteClientButt,backClientButt,viewNumCust;
JPanel panel1,panel2,panel3,panel4,panel5,panel6,panel7;
JTextArea viewListCust;

public manageClientAccGui()
{

    super("Team Garoking Manage Customer");

    Container con = getContentPane();
    con.setLayout(new BorderLayout());

    image = new ImageIcon("images/garokingLogo.jpg");
    imgLabel = new JLabel(image);

    clientLabel = new JLabel("Manage Client Account");
    clientLabel.setForeground(Color.WHITE);

    helloLabel = new JLabel("Hello! ");
    helloLabel.setForeground(Color.WHITE);

    greetingLabel = new JLabel("What would you like to do? ");
    greetingLabel.setForeground(Color.WHITE);

    JScrollPane scrollPane = new JScrollPane(viewListCust,
            JScrollPane.VERTICAL_SCROLLBAR_ALWAYS,
            JScrollPane.HORIZONTAL_SCROLLBAR_AS_NEEDED);
    scrollPane.setPreferredSize(new Dimension(100, 100));

    JLabel empty = new JLabel("");
    JLabel empty1 = new JLabel("");
    JLabel empty2 = new JLabel("");
    JLabel empty3 = new JLabel("");
    JLabel empty4 = new JLabel("");

    createCustProfileButt = new JButton("Create Customer");
    editClientAccButt = new JButton("Edit Customer Details");
    deleteClientButt = new JButton("Remove Customer");
    viewNumCust = new JButton("View Number of Customers");
    backClientButt = new JButton("Back");
    viewListCust = new JTextArea();
    viewListCust.setEditable(false);

    panel1 = new JPanel();
    panel2 = new JPanel(new GridLayout(12,3));
    panel3 = new JPanel(new GridLayout(12,3,0,3));
    panel4 = new JPanel();
    panel5 = new JPanel();

    panel6 = new JPanel(new GridLayout(1,2));
    panel7 = new JPanel(new GridLayout(1,2));

    panel1.add(imgLabel);
    panel1.setBackground(new Color(90,18,18));

    panel2.add(clientLabel);
    panel2.add(empty);
    panel2.add(createCustProfileButt);
    panel2.add(empty1);
    panel2.add(editClientAccButt);
    panel2.add(empty2);
    panel2.add(deleteClientButt);
    panel2.add(empty3);
    panel2.add(viewNumCust);    
    panel2.add(empty4);
    panel2.add(backClientButt);
    panel2.setBackground(new Color(90,18,18));

    panel6.add(helloLabel);
    panel6.setBackground(new Color(90,18,18));

    panel7.add(greetingLabel);
    panel7.setBackground(new Color(90,18,18));

    panel3.add(panel6);
    panel3.add(panel7);
    panel3.setBackground(new Color(90,18,18));
    panel3.add(scrollPane);

    panel5.add(panel3);
    panel5.setBackground(new Color(90,18,18));

    panel4.add(panel2);
    panel4.setBackground(new Color(90,18,18));

    con.add(panel4, BorderLayout.WEST);
    con.add(panel1, BorderLayout.NORTH);
    con.add(panel5, BorderLayout.CENTER);

    Action act = new Action();

    createCustProfileButt.addActionListener(act);
    editClientAccButt.addActionListener(act);
    deleteClientButt.addActionListener(act);
    backClientButt.addActionListener(act);
    viewNumCust.addActionListener(act);

    setVisible(true);
    Dimension dim = Toolkit.getDefaultToolkit().getScreenSize();
    setLocation(((dim.width-1024)/2), ((dim.height-650)/2));
    setSize(1024,650);

}

//  public static void main(String args[])
//  {
//      new manageClientAccGui();
//  }

class Action implements ActionListener
    {
        public void actionPerformed(ActionEvent e)
        {   
            if(e.getSource() == createCustProfileButt)
            {
                dispose();
                new Log("Accessing create customer");
                new addCustGui();
            }

            if(e.getSource() == editClientAccButt)
            {
                dispose();
                new Log("Accessing edit customer");
                new editCustGui();
            }

            if(e.getSource() == deleteClientButt)
            {
                dispose();
                new Log("Accessing remove customer");
                new removeCustGui();
            }

            if(e.getSource() == backClientButt)
            {
                dispose();
                new Log("Accessing main menu");
                new menuGarokingGui();
            }

            if(e.getSource() == viewNumCust)
            {
                int enumer = 0;
                HashMap<String, String> map = new HashMap<String, String>();

                try
                {
                    Scanner scanner = new Scanner(new FileReader("IndividualDetails.txt"));

                    while (scanner.hasNextLine()) {
                        String[] columns = scanner.nextLine().split("\t");
                        map.put(columns[1,], columns[2])
                        enumer++;
                    }
                }catch (FileNotFoundException ex)
                    {
                    }
                    new Log("View latest");
                    viewListCust.append("The clients are : " + map.values());
                    viewListCust.append("The total number of clients are : " + enumer);         
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T03:33:18.507

`Map#values`返回一个`Collection`对象。

调用`viewListCust.append("The clients are : " + map.values())`只是调用`Collection#toString`返回集合的方法，这不太可能提供内容的漂亮视图。

相反，您将不得不自己迭代集合。

```
viewListCust.append("The clients are :");
for (String value : map.values()) {
    viewListCust.append("\n" + value);
} 
```

现在请记住，当您读取文件并附加内容时，您正在阻塞事件调度线程，这将使您的程序看起来像是挂起。

您可能希望在更新 UI 之前利用 a`SwingWorker`在后台加载文件。查看[Swing 中的并发性](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T03:54:49.670

您需要`viewListCust`在将其传递给之前进行实例化，`JScrollPane`如下所示：

```
viewListCust = new JTextArea();
viewListCust.setEditable(false);

JScrollPane scrollPane = new JScrollPane(viewListCust,
                    JScrollPane.VERTICAL_SCROLLBAR_ALWAYS,
                    JScrollPane.HORIZONTAL_SCROLLBAR_AS_NEEDED);
scrollPane.setPreferredSize(new Dimension(100, 100)); 
```

`viewListCust``JScrollPane`当您将其传递给构造函数时，当前为 null 。

# android - 某些真实设备的 Monkeyrunner 错误

> ID：13618301
> 
> 赞同：0
> 
> 时间：2012-11-29T03:22:34.617
> 
> 标签：android, monkeyrunner

代码很简单

```
from com.android.monkeyrunner import MonkeyRunner, MonkeyDevice, MonkeyImage
device = MonkeyRunner.waitForConnection()
device.touch(84, 712, "DOWN_AND_UP") 
```

可以在模拟器和我的 SE Xperia Ray 上运行，

但是当我在另一台设备上运行时，市场上不卖。

错误信息弹出。

运行一些命令是可以的，例如，采取“snapShot”

但对于“触摸”“按”，总是失败。

对于某些设备来说，是不是一些monkeyruuner错误，它只是不起作用

或者问题出在设备上，可能修改后的设备源代码有问题。

我在互联网上搜索过，找不到解决方案，

我需要决定是否在设备上使用monkeyruuner，

所以，我需要一些帮助。

对不起我的英语不好 ： ）

错误日志是

```
121129 10:56:42.227:S [main] [com.android.chimpchat.adb.AdbChimpDevice] Error se
nding touch event: 84 712 DOWN_AND_UP
121129 10:56:42.227:S [main] [com.android.chimpchat.adb.AdbChimpDevice]java.net.
SocketException: Software caused connection abort: socket write error
121129 10:56:42.227:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at java.
net.SocketOutputStream.socketWrite0(Native Method)
121129 10:56:42.227:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at java.
net.SocketOutputStream.socketWrite(SocketOutputStream.java:92)
121129 10:56:42.227:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at java.
net.SocketOutputStream.write(SocketOutputStream.java:136)
121129 10:56:42.227:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at sun.n
io.cs.StreamEncoder.writeBytes(StreamEncoder.java:202)
121129 10:56:42.227:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at sun.n
io.cs.StreamEncoder.implFlushBuffer(StreamEncoder.java:272)
121129 10:56:42.227:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at sun.n
io.cs.StreamEncoder.implFlush(StreamEncoder.java:276)
121129 10:56:42.227:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at sun.n
io.cs.StreamEncoder.flush(StreamEncoder.java:122)
121129 10:56:42.227:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at java.
io.OutputStreamWriter.flush(OutputStreamWriter.java:212)
121129 10:56:42.227:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at java.
io.BufferedWriter.flush(BufferedWriter.java:236)
121129 10:56:42.227:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at com.a
ndroid.chimpchat.ChimpManager.sendMonkeyEventAndGetResponse(ChimpManager.java:18
6)
121129 10:56:42.227:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at com.a
ndroid.chimpchat.ChimpManager.sendMonkeyEvent(ChimpManager.java:234)
121129 10:56:42.227:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at com.a
ndroid.chimpchat.ChimpManager.tap(ChimpManager.java:329)
121129 10:56:42.227:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at com.a
ndroid.chimpchat.adb.AdbChimpDevice.touch(AdbChimpDevice.java:361)
121129 10:56:42.227:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at com.a
ndroid.monkeyrunner.MonkeyDevice.touch(MonkeyDevice.java:136)
121129 10:56:42.227:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at sun.r
eflect.NativeMethodAccessorImpl.invoke0(Native Method)
121129 10:56:42.227:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at sun.r
eflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
121129 10:56:42.227:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at sun.r
eflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)

121129 10:56:42.227:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at java.
lang.reflect.Method.invoke(Method.java:597)
121129 10:56:42.227:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at org.p
ython.core.PyReflectedFunction.__call__(PyReflectedFunction.java:175)
121129 10:56:42.227:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at org.p
ython.core.PyObject.__call__(PyObject.java:355)
121129 10:56:42.227:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at org.p
ython.core.PyMethod.__call__(PyMethod.java:215)
121129 10:56:42.227:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at org.p
ython.core.PyMethod.instancemethod___call__(PyMethod.java:221)
121129 10:56:42.227:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at org.p
ython.core.PyMethod.__call__(PyMethod.java:206)
121129 10:56:42.227:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at org.p
ython.core.PyObject.__call__(PyObject.java:432)
121129 10:56:42.227:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at org.p
ython.core.PyObject.__call__(PyObject.java:436)
121129 10:56:42.227:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at org.p
ython.pycode._pyx0.f$0(d:\1234.py:18)
121129 10:56:42.227:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at org.p
ython.pycode._pyx0.call_function(d:\1234.py)
121129 10:56:42.227:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at org.p
ython.core.PyTableCode.call(PyTableCode.java:165)
121129 10:56:42.227:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at org.p
ython.core.PyCode.call(PyCode.java:18)
121129 10:56:42.227:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at org.p
ython.core.Py.runCode(Py.java:1197)
121129 10:56:42.227:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at org.p
ython.core.__builtin__.execfile_flags(__builtin__.java:538)
121129 10:56:42.227:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at org.p
ython.util.PythonInterpreter.execfile(PythonInterpreter.java:156)
121129 10:56:42.227:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at com.a
ndroid.monkeyrunner.ScriptRunner.run(ScriptRunner.java:116)
121129 10:56:42.227:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at com.a
ndroid.monkeyrunner.MonkeyRunnerStarter.run(MonkeyRunnerStarter.java:77)
121129 10:56:42.227:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at com.a
ndroid.monkeyrunner.MonkeyRunnerStarter.main(MonkeyRunnerStarter.java:189) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T04:53:48.623

问题可能在于获取连接

```
device = MonkeyRunner.waitForConnection() 
```

不幸的是 device is never ，因此要验证它，您可以使用与[ViewClient](https://github.com/dtmilano/AndroidViewClient)`None`相同的方法，使用此代码段

```
device = MonkeyRunner.waitForConnection()
try:
        device.wake()
except java.lang.NullPointerException, e:
        print >> sys.stderr, "%s: ERROR: Couldn't connect to %s: %s" % (progname, serialno, e)
        sys.exit(3) 
```

# c - 如何处理 C 中的堆栈数组分配失败？

> ID：13618302
> 
> 赞同：3
> 
> 时间：2012-11-29T03:22:41.853
> 
> 标签：c, stack, stack-overflow

如果我必须编写如下代码：

```
int a[10000000]; 
```

我知道代码有时可能会由于堆栈溢出而失败。问题是如何在运行时处理此类错误，并避免段错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T03:28:21.577

一般来说，堆栈溢出异常很难以优雅的方式处理。这是因为堆栈*已经*溢出，为了运行更多代码（甚至是异常处理代码），需要有可用的堆栈空间。

通常，程序员设计程序时不会溢出堆栈。这涉及：

*   将分配在堆栈上的自动变量的大小保持在最低限度（如果需要大型数据结构，则使用其他类型的分配）
*   避免不必要的递归，如果使用递归，确保对最大深度有合理的约束

如果您需要在函数内存储一千万个整数的空间，请不要在堆栈上分配它 - 使用`malloc()`or分配它`new`（取决于您实际使用的是 C 还是 C++）。当然，当你完成它时，`free()`它也是你的责任。`delete`

如果您真的在使用 C++ ^([1])，那么您可能应该使用`std::vector`：

```
std::vector a(10000000); 
```

底层标准库实现将在空闲存储上分配空间，*并*在您的函数返回时自动为您解除分配。

[[1] 我希望人们不要仅仅因为拼写相似而用[c](/questions/tagged/c "显示标记为“c”的问题")和[c++标记问题。](/questions/tagged/c%2b%2b "显示标记为“c++”的问题")]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T03:28:20.557

在运行时没有办法处理这个问题。在 C 中使用自动存储持续时间的对象的唯一理智、安全的方法是让它们足够小，以确保它们永远不会超过你知道你将拥有的堆栈数量（例如，永远不要使用超过 10% 或所以你期望拥有的东西）。

# html - 这是什么CSS错误？

> ID：13618306
> 
> 赞同：2
> 
> 时间：2012-11-29T03:23:09.297
> 
> 标签：html, css, firefox

```
XUL box for div element contained an inline br child, forcing all its children to be wrapped in a block. 
```

这只是一个警告，但不是致命错误，网页不会出现任何问题，但它发生在我的 firebug 控制台中，这很烦人，如何防止这种情况发生？或者如何忽略萤火虫中的这些错误？

我怀疑这是因为：

```
#top_icon01{
    position:relative;
    background-image : url('../hill_header/img/top_Icon_i01.png');
    background-repeat : no-repeat;
    background-size : 56px 56px;
    background-position: 50% 20px;
    width : 172px;
    height : 130px;
    padding-top : 25px;
    text-align: center;
    display:block;
    display:-webkit-box;
    display:-moz-box;
    -webkit-box-pack:center;
    -webkit-box-align:center;
    -moz-box-pack:center;
    -moz-box-align:center;
} 
```

我提供了更多细节：我**没有勾选 show chrome error**，看到这很烦人。 ![在此处输入图像描述](../Images/39705263dfd283cc4e95f85338a4de96.png) 如果我删除顶部标题：

```
<div id='topHeader'>
    <section id='top_middle_panel'>
        <div id='top_ryan'>
        <span class='float'> 
            <div id='top_icon01' class='top_icons'> 
                <h1>Design</h1><br><h6>Create Value</h6>
            </div>
        </span>
        <span class='float'> 
            <div id='top_icon02' class='top_icons'> 
                <h1>Multimedia</h1><br><h6>Amazing Presentation</h6>
            </div>
        </span>
        <span class='float'> 
            <div id='top_icon03' class='top_icons'> 
                <h1>Marketing</h1><br><h6>Connect to The World</h6>
            </div>
        </span>
        </div>
    </section>
</div> 
```

没有**更多的错误。**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T03:39:00.083

*编辑：改变我的答案*

我已经在 jsFiddle 中复制了它！[http://jsfiddle.net/brianpeiris/KEsZh/show/](http://jsfiddle.net/brianpeiris/KEsZh/show/)

由于您已将 top_icon div 设置为使用灵活框模型（显示：-moz-box），Firefox 会警告您已将 a`<br />`直接放入其中，然后强制它将这些 div 的内容包装在另一个块中，所以它抱怨这一点（也许是不必要的）。

因此，为了阻止 Firefox 抱怨，您可以将 top_icon div 的内容明确地包装在另一个 div 中。这让 Firefox 很高兴。

```
<div id='topHeader'>
    <section id='top_middle_panel'>
        <div id='top_ryan'>
        <span class='float'> <div id='top_icon01' class='top_icons'><div><h1>Design</h1><br><h6>Create Value</h6></div></div></span>
        <span class='float'> <div id='top_icon02' class='top_icons'><div><h1>Multimedia</h1><br><h6>Amazing Presentation</h6></div></div></span>
        <span class='float'> <div id='top_icon03' class='top_icons'><div><h1>Marketing</h1><br><h6>Connect to The World</h6></div></div></span>
        </div>
    </section>
</div> 
```

或者，您可以删除`<br />`并找到另一种解决方案来格式化您的内容。

# php - PHP 中的可隐藏数组（下拉菜单）

> ID：13618310
> 
> 赞同：0
> 
> 时间：2012-11-29T03:23:56.860
> 
> 标签：php, arrays

我会尽量简明扼要。

我不太了解PHP。我有一个看起来太长的数组：

[http://i.stack.imgur.com/u4y11.jpg](http://i.stack.imgur.com/u4y11.jpg)（图片还不能发，请点击）

如您所见，有7个选项，看起来又丑又长。

我想将它们分成可隐藏的扇区。喜欢：

3 个第一个选项 [单击此处进入下拉选项] 4 个最新选项 [单击此处进入下拉选项]

代替

选项 1 选项 2 选项 3 选项 4 选项 5 选项 6 选项 7

你知道？

如果有人可以让我了解这件事，我将不胜感激：

它基本上是这样的 7 个复制和粘贴：

```
    $url_bgcolor = get_bloginfo('stylesheet_directory') 。'/admin/images/bgcolor/';
    $options[] = array("name" => "Cor da letra do titulo da pagina",
                        "desc" => "Selecione a cor secundária do seu 网站。",
                        "id" => $shortname."_style2",
                        “标准” => “”，
                        “类型”=>“图像”，
                        “选项” => 数组（
                                'default2.css' => $url_bgcolor 。'dark.png',
                                'black2.css' => $url_bgcolor 。'黑色.png',
                                'green2.css' => $url_bgcolor 。'绿色.png',
                                'blue2.css' => $url_bgcolor 。'蓝色.png',
                                'purple2.css' => $url_bgcolor 。'紫色.png',
                                'orange2.css' => $url_bgcolor 。'橙色.png',
                                'red2.css' => $url_bgcolor 。'红色.png'
                ));

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T06:04:21.410

为了`hide/show`在您的页面上添加元素，您需要使用像 javascript 这样的客户端脚本。这是一个简单的 javascript 函数，用于在您的数组`showing`之间切换。`hiding`

在`<head>`您的 html 中添加以下脚本/函数-

```
<script type="text/javascript"> 
function toggleView(aid, id, text) {
    var divView = document.getElementById(id);
    var anchor = document.getElementByID(aid);

   if (divView.style.display != "block") {
       divView.style.display = "block";
       anchor.innerHTML = "click here to hide " + text + " options";
   } else {
      divView.style.display = "none";
      anchor.innerHTML = "click here to show " + text + " options";
   }
}
</script> 
```

然后在你的`<body>`你会创建一个`<a>`锚点，和一个`<div>`

您的锚标记和 div 将如下所示：

```
<a id="toggle3" onclick="toggleView('toggle3', 'options3', 'first 3')">click here to show first 3 options</a>
<div id="options3" style="display: none">
Option 1
Option 2
Option 3
</div>

<a id="toggle4" onclick="toggleView('toggle4', 'options4', 'last 4')">click here to show last 4 options</a>
<div id="options4" style="display: none">
Option 4
Option 5
Option 6
Option 7
</div> 
```

* * *

**11/30 编辑**

这是我的做法 -

**Javascript**
On line #438 of `admin-interface.php`, 在`<?php }`添加 javascript之前`function()`

```
 <?php  
    //Hide/Show Image Groups  
    ?>  
<script type="text/javascript">   
function toggleView(aid, id, text) {  
    var divView = document.getElementById(id);  
    var anchor = document.getElementByID(aid);  

if (divView.style.display != "block") {
   divView.style.display = "block";
   anchor.innerHTML = "click here to hide " + text + " options";
} else {
  divView.style.display = "none";
  anchor.innerHTML = "click here to show " + text + " options";
}
}
</script> 
```

**Anchor/DIV**
在第 #603 行`admin-interface.php`，在`//$output .= '<div class="section ...`添加`anchors`and之前*注意：*如果您已经添加了上面的 javascript `<div>`，它可能是第 #621 行而不是 #603
*`function()`*

 *```
if ($value['type'] == "images" && $counter == 1)
{$output .= '<a id="toggle3" onclick="toggleView(\'toggle3\', \'options3\', \'first 3\')">click here to show first 3 options</a>'."\n" . '<div id="options3" style="display: none">'."\n";}
if ($value['type'] == "images" && $counter == 4)
{$output .= '<a id="toggle4" onclick="toggleView(\'toggle4\', \'options4\', \'last 4\')">click here to show last 4 options</a>'."\n" . '<div id="options4" style="display: none">'."\n";} 
```

在第 #957 行`admin-interface.php`，`}$output .= '</div>';return array($output,$menu);`在 #958-960 之前，添加`</div>`结束标签
*注意：*如果您已经添加了 javascript`function()`和上面的`anchors`and `<div>`，它可能是第 #979 行而不是 #957

```
if ($value['type'] == "images" && ($counter == 1 || $counter == 4))
{$output .= '</div>'."\n";} 
```*

# android - 为什么 c.moveToFirst() 不会跳过第一行

> ID：13618315
> 
> 赞同：3
> 
> 时间：2012-11-29T03:24:24.960
> 
> 标签：android, sqlite, cursor

我总是*使用下面的代码*来获取所有信息
但我有疑问**c.movetoNext**导致跳过结果集的第一行
请告诉我***表面背后到底发生了什么，***以便我能完全理解它

```
 SQLiteDatabase db;
    Cursor c = db.query("pic", null, null, null, null,null, null);
    c.moveToFirst();
    while(c.movetoNext)
    {
    //do something
    //example: String a=c.getString(0);
    } 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-29T03:30:16.477

您正在调用`moveToFirst()`，它将光标定位在第一行，然后`moveToNext()`在进入循环之前调用您的 while 循环，这会导致第一行被跳过。

您可以使用 do...while 循环或 for 循环来解决它，例如

```
for( c.moveToFirst(); !c.isAfterLast(); c.moveToNext() ) {
    // Stuff
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-21T18:32:20.353

一个迟到的答案，但希望对其他找到此页面的人有用。我一直在使用：“if () do { } while();” 环形。如果游标中没有返回行，“moveToFirst()”函数将返回 false。当光标结束时，“moveToNext()”函数返回 false：

```
Cursor c = db.query(......);

if (c.moveToFirst()) do {
   data = c.getString(0) // eg. get value from first column in cursor
   // do something more
} while (c.moveToNext());

c.close(); 
```

（这类似于 TactMayers 的回答）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T03:30:27.913

根据[游标](http://www.androidjavadoc.com/1.0_r1/android/database/sqlite/SQLiteDatabase.html)文档，“查询...返回：一个游标对象，位于第一个条目之前”。进一步看来，[只有在 cursor 上调用方法时才会执行查询](https://stackoverflow.com/questions/7211158/why-does-a-delete-rawquery-need-a-movetofirst-in-order-to-actually-delete-the-ro)。希望有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T03:32:25.163

```
c.moveToFirst(); 
```

此行将光标移动到第一行。

```
while(c.movetoNext) 
```

运行这行代码后，光标将移动到下一行（第 2 行是 while 循环的第一次运行。）所以当代码进入循环时，光标已经指向第 2 行，并且永远无法访问第一排。

尝试像这样替换while循环

```
do {
    // do something
} while(c.movetoNext()) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-29T04:42:30.757

实际上，您不必调用**c.moveToFirst();** 根本

# android - Android SQLite 数据库管理

> ID：13618320
> 
> 赞同：1
> 
> 时间：2012-11-29T03:25:43.367
> 
> 标签：android, database, sqlite

这是卡提克。我的应用程序有两件事离线和在线。每当没有网络时，我都会使用离线数据库事务。因此，当我使用在线登录时，我会创建数据库。如果网络关闭，那么在线插入的记录（已交易）我用来离线工作以显示它们并与它们进行交易. 我的问题是能够在 mobile 和 emulator 中以调试模式运行我的应用程序。但是当我在移动端运行应用程序时没有调试，我收到错误要求我关闭应用程序。

这是我的代码。

## 这是我离线的仪表板...

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.offline_dash_board);
    try {
    mySQLiteAdapter = new MySQLiteHelper(OfflineDashBoard.this);
    mySQLiteAdapter.openToWrite();
    ddEducationalLevels = (Spinner) findViewById(R.id.offLineEduLevel);
    ddRegions = (Spinner) findViewById(R.id.offLineRegions);
    ddDistricts = (Spinner) findViewById(R.id.offLineDistricts);
    listView = (ListView) findViewById(R.id.offlineLstSchools);
    cursorRegions = mySQLiteAdapter.getRegions();
    cursorEduLevels = mySQLiteAdapter.getEducationalLevels();

    mArrayListEducationalLevel = new ArrayList<String>();
    mArrayListRegions = new ArrayList<String>();
    mArrayListDistricts = new ArrayList<String>();
    thread = new Thread(this);
    thread.start();
    }catch(Exception e) {

    }
}

public void run() {

    if (bindLevels == false) {
        try {
            mArrayListEducationalLevel.add("---Select---");
            cursorEduLevels.moveToFirst();
            while (!cursorEduLevels.isAfterLast()) {
                mArrayListEducationalLevel.add(cursorEduLevels
                        .getString(cursorEduLevels
                                .getColumnIndex("txtEducationalLevels")));
                cursorEduLevels.moveToNext();
            }
            aaprovEduLevel = new ArrayAdapter<String>(
                    OfflineDashBoard.this,
                    android.R.layout.simple_spinner_item,
                    mArrayListEducationalLevel);
            aaprovEduLevel
                    .setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
            ddEducationalLevels.setAdapter(aaprovEduLevel);
        } catch (Exception e) {
        }
    }

    // =====================================================
    if (bindRegions == false) {
        try {
            mArrayListRegions.add("---Select---");
            cursorRegions.moveToFirst();
            while (!cursorRegions.isAfterLast()) {
                mArrayListRegions.add(cursorRegions.getString(cursorRegions
                        .getColumnIndex("txtRegion")));
                cursorRegions.moveToNext();
            }
            handler1.sendEmptyMessage(0);

        } catch (Exception e) {
        }
    }
    // ========================================================
    if (bindDistrict == true) {
        try {
            cursorDistricts = mySQLiteAdapter.getDistricts(district);
            mArrayListDistricts.add("---Select---");
            cursorDistricts.moveToFirst();

            while (!cursorDistricts.isAfterLast()) {
                mArrayListDistricts.add(cursorDistricts
                        .getString(cursorDistricts
                                .getColumnIndex("txtDistrictName")));
                cursorDistricts.moveToNext();
            }
            handler2.sendEmptyMessage(0);

        }

        catch (Exception e) {

        }
    }
    if (bindSchools == false) {
        try {
            String txtDistrictName = ddDistricts.getSelectedItem()
                    .toString();
            // ArrayList<String> catalogueData=new ArrayList<String>();
            cursorSchools = mySQLiteAdapter.getSchools(txtDistrictName);

            handler3.sendEmptyMessage(0);

        }

        catch (Exception ex) {

        }

    }
}

private Handler handler1 = new Handler() {

    @Override
    public void handleMessage(Message msg) {

        ArrayAdapter<String> aaprov;
        try {
            aaprovRegions = new ArrayAdapter<String>(OfflineDashBoard.this,
                    android.R.layout.simple_spinner_item, mArrayListRegions);
            aaprovRegions
                    .setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
            ddRegions.setAdapter(aaprovRegions);
            ddRegions.setOnItemSelectedListener(selectDistrictListener);
        } catch (Exception e) {

        }

    }
};
private Handler handler2 = new Handler() {
    @Override
    public void handleMessage(Message msg) {
        ArrayAdapter<String> aaprov;
        try {
            aaprovDistricts = new ArrayAdapter<String>(
                    OfflineDashBoard.this,
                    android.R.layout.simple_spinner_item,
                    mArrayListDistricts);
            aaprovDistricts
                    .setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
            ddDistricts.setAdapter(aaprovDistricts);
            ddDistricts.setOnItemSelectedListener(selectSchoolListener);
        } catch (Exception e) {

        }

    }
};
private Handler handler3 = new Handler() {
    @Override
    public void handleMessage(Message msg) {
        try {
            SimpleCursorAdapter mAdapter = new SimpleCursorAdapter(
                    OfflineDashBoard.this, R.layout.row, cursorSchools,
                    new String[] { "_id", "txtSchoolName" }, new int[] {
                            R.id.name_entry, R.id.number_entry });
            listView.setAdapter(mAdapter);
            listView.setOnItemClickListener(new OnItemClickListener() {
                public void onItemClick(AdapterView<?> parent, View view,
                        int position, long id) {
                    Cursor cur = (Cursor) parent
                            .getItemAtPosition(position);
                    String SchoolCode = cur.getString(cur
                            .getColumnIndex("_id"));
                    String SchoolName = cur.getString(cur
                            .getColumnIndex("txtSchoolName"));
                    Intent view_school = new Intent(OfflineDashBoard.this,
                            OfflineViewSchool.class);
                    Bundle b = new Bundle();
                    b.putString("EducationalLevel", ddEducationalLevels
                            .getSelectedItem().toString());
                    b.putString("Region", ddRegions.getSelectedItem()
                            .toString());
                    b.putString("District", ddDistricts.getSelectedItem()
                            .toString());
                    b.putString("SchoolName", SchoolName);
                    b.putString("SchoolCode", SchoolCode);
                    view_school.putExtras(b);
                    startActivity(view_school);
                }
            });
        } catch (Exception e) {

        }
    }
};

private OnItemSelectedListener selectDistrictListener = new OnItemSelectedListener() {

    public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2,
            long arg3) {
        // TODO Auto-generated method stub
        district = arg0.getSelectedItem().toString();
        if (district != "---Select---") {
            // Toast.makeText(getApplicationContext(), district,
            // Toast.LENGTH_SHORT).show();
            bindLevels = true;
            bindRegions = true;
            bindDistrict = true;
            // bindSchools=false;
            thread = new Thread(OfflineDashBoard.this);
            thread.start();
        }
    }

    public void onNothingSelected(AdapterView<?> arg0) {
        // TODO Auto-generated method stub

    }
};
private OnItemSelectedListener selectSchoolListener = new OnItemSelectedListener() {
    public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2,
            long arg3) {

        school = arg0.getSelectedItem().toString();
        if (school != "---Select---") {
            bindLevels = true;
            bindRegions = true;
            bindDistrict = false;
            bindSchools = false;
            thread = new Thread(OfflineDashBoard.this);
            thread.start();
        }

    }

    public void onNothingSelected(AdapterView<?> arg0) {
        // TODO Auto-generated method stub

    }

};

public boolean onKeyDown(int keyCode, KeyEvent event)  {
    if (  Integer.valueOf(android.os.Build.VERSION.SDK) < 7 //Instead use android.os.Build.VERSION.SDK_INT < android.os.Build.VERSION_CODES.ECLAIR
            && keyCode == KeyEvent.KEYCODE_BACK
            && event.getRepeatCount() == 0) {
        // Take care of calling this method on earlier versions of
        // the platform where it doesn't exist.
        onBackPressed();
    }

    return super.onKeyDown(keyCode, event);
}
@Override
public void onBackPressed() {
      // This will be called either automatically for you on 2.0
    // or later, or by the code above on earlier versions of the
    // platform.
    mySQLiteAdapter.close();
   this.finish();
    return;
}

public boolean onCreateOptionsMenu(Menu menu) {

    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.menu1, menu);
    //
    // MenuItem itemaddSchool =(MenuItem)menu.findItem(R.id.addSchool);
    // itemaddSchool.setTitle("Add School");
    // itemaddSchool.setIcon(R.drawable.classroom);
    //
    MenuItem item = (MenuItem) menu.findItem(R.id.exit1);
    // item.setVisible(false);
    item.setTitle("Map View");
    item.setIcon(R.drawable.map1);
    item.setVisible(false);
    // ===================//
    MenuItem itemAddSchool = (MenuItem) menu.findItem(R.id.addSchool);
    itemAddSchool.setTitle("Add School");
    itemAddSchool.setIcon(R.drawable.school);
    itemAddSchool.setVisible(false);
    // =================//

    MenuItem item1 = (MenuItem) menu.findItem(R.id.school);
    item1.setVisible(false);
    item1.setIcon(R.drawable.school);

    MenuItem item2 = (MenuItem) menu.findItem(R.id.homepage);
    item2.setIcon(R.drawable.addhome);
    item2.setVisible(false);

    MenuItem item5 = (MenuItem) menu.findItem(R.id.addTeacher);
    item5.setIcon(R.drawable.newteacher);
    item5.setVisible(false);

    MenuItem item6 = (MenuItem) menu.findItem(R.id.Logout1);
    item6.setIcon(R.drawable.logout);

    MenuItem iteminfra = (MenuItem) menu.findItem(R.id.schInfra);
    iteminfra.setIcon(R.drawable.classroom);
    iteminfra.setVisible(false);

    MenuItem itemstud = (MenuItem) menu.findItem(R.id.studEnrollment);
    itemstud.setIcon(R.drawable.student);
   itemstud.setVisible(false);

    MenuItem itemstaff = (MenuItem) menu.findItem(R.id.staffEnrollment);
    itemstaff.setIcon(R.drawable.teacherenroll);
    itemstaff.setVisible(false);

    MenuItem itemrpt = (MenuItem) menu.findItem(R.id.rpt);
    itemrpt.setVisible(false);
    return true;

}
public boolean onOptionsItemSelected(MenuItem item) {

    Intent myIntent;
    Bundle b = new Bundle();
    switch (item.getItemId()) {
    case R.id.Logout1:
        ((MyApplication) OfflineDashBoard.this.getApplication()).setusername("");
        ((MyApplication) OfflineDashBoard.this.getApplication()).setpassword("");
    //  mySQLiteAdapter.close();
        myIntent = new Intent(this.getApplicationContext(), Login.class);
        myIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivityForResult(myIntent, 0);
        this.finish();
        return true;  
    }

    return true;

} 
```

}

这是我的原木猫**KIRAN**

```
11-29 09:02:32.542: D/dalvikvm(17303): GC_EXTERNAL_ALLOC freed 82K, 48% free 2806K/5379K, external 0K/0K, paused 38ms
11-29 09:02:32.592: D/ATRecorder(17303): com.htc.autotest.dlib.RecordEngine in loader dalvik.system.DexClassLoader@40513918
11-29 09:02:42.512: D/Database(17303): dbopen(): path = /data/data/Com.SEMISliteUganda/databases/offlineEMISLITE, flag = 6, file size = 23552
11-29 09:02:42.522: D/dalvikvm(17303): GC_CONCURRENT freed 152K, 47% free 3028K/5639K, external 405K/917K, paused 2ms+4ms
11-29 09:02:42.562: I/Database(17303): sqlite returned: error code = 0, msg = Recovered 19 frames from WAL file /data/data/Com.SEMISliteUganda/databases/offlineEMISLITE-wal
11-29 09:02:42.562: D/Database(17303): dbopen(): path = /data/data/Com.SEMISliteUganda/databases/offlineEMISLITE, mode: wal, disk free size: 1063 M, handle: 0x3d11f0
11-29 09:02:47.917: D/dalvikvm(17303): GC_CONCURRENT freed 310K, 47% free 3166K/5959K, external 405K/917K, paused 3ms+2ms
11-29 09:02:48.848: D/dalvikvm(17303): GC_CONCURRENT freed 445K, 49% free 3146K/6087K, external 405K/917K, paused 2ms+1ms
11-29 09:02:51.751: D/dalvikvm(17303): GC_CONCURRENT freed 542K, 50% free 3082K/6087K, external 405K/917K, paused 4ms+6ms
11-29 09:02:57.877: D/dalvikvm(17303): GC_CONCURRENT freed 361K, 48% free 3191K/6087K, external 405K/917K, paused 2ms+5ms
11-29 09:03:03.632: D/dalvikvm(17303): GC_FOR_MALLOC freed 184K, 46% free 3330K/6151K, external 405K/917K, paused 45ms
11-29 09:03:03.903: D/dalvikvm(17303): GC_CONCURRENT freed 412K, 46% free 3391K/6279K, external 405K/917K, paused 2ms+2ms
11-29 09:03:06.645: W/KeyCharacterMap(17303): Can't open keycharmap file
11-29 09:03:06.645: W/KeyCharacterMap(17303): Error loading keycharmap file '/system/usr/keychars/cy8c-touchscreen.kcm.bin'. hw.keyboards.65538.devname='cy8c-touchscreen'
11-29 09:03:06.655: I/KeyCharacterMap(17303): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
11-29 09:03:06.926: D/dalvikvm(17303): GC_CONCURRENT freed 479K, 48% free 3313K/6279K, external 405K/917K, paused 5ms+2ms
11-29 09:03:13.202: D/Database(17303): dbopen(): path = /data/data/Com.SEMISliteUganda/databases/offlineEMISLITE, flag = 6, file size = 15360
11-29 09:03:13.202: D/Database(17303): dbopen(): path = /data/data/Com.SEMISliteUganda/databases/offlineEMISLITE, mode: wal, disk free size: 1062 M, handle: 0x422f58
11-29 09:03:21.069: W/KeyCharacterMap(17303): Can't open keycharmap file
11-29 09:03:21.069: W/KeyCharacterMap(17303): Error loading keycharmap file '/system/usr/keychars/cy8c-touchscreen.kcm.bin'. hw.keyboards.65538.devname='cy8c-touchscreen'
11-29 09:03:21.069: I/KeyCharacterMap(17303): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
11-29 09:03:25.764: D/Database(17303): dbopen(): path = /data/data/Com.SEMISliteUganda/databases/offlineEMISLITE, flag = 6, file size = 15360
11-29 09:03:25.764: D/Database(17303): dbopen(): path = /data/data/Com.SEMISliteUganda/databases/offlineEMISLITE, mode: wal, disk free size: 1062 M, handle: 0x4a44a0
11-29 09:03:32.841: D/dalvikvm(17303): GC_CONCURRENT freed 155K, 44% free 3549K/6279K, external 810K/917K, paused 2ms+5ms
11-29 09:03:32.871: E/Database(17303): close() was never explicitly called on database '/data/data/Com.SEMISliteUganda/databases/offlineEMISLITE' 
11-29 09:03:32.871: E/Database(17303): android.database.sqlite.DatabaseObjectNotClosedException: Application did not close the cursor or database object that was opened here
11-29 09:03:32.871: E/Database(17303):  at android.database.sqlite.SQLiteDatabase.<init>(SQLiteDatabase.java:1954)
11-29 09:03:32.871: E/Database(17303):  at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:902)
11-29 09:03:32.871: E/Database(17303):  at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:936)
11-29 09:03:32.871: E/Database(17303):  at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:929)
11-29 09:03:32.871: E/Database(17303):  at android.app.ContextImpl.openOrCreateDatabase(ContextImpl.java:601)
11-29 09:03:32.871: E/Database(17303):  at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:203)
11-29 09:03:32.871: E/Database(17303):  at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:118)
11-29 09:03:32.871: E/Database(17303):  at Com.SEMISliteUganda.MySQLiteHelper.openToWrite(MySQLiteHelper.java:56)
11-29 09:03:32.871: E/Database(17303):  at Com.SEMISliteUganda.OfflineDashBoard.onCreate(OfflineDashBoard.java:64)
11-29 09:03:32.871: E/Database(17303):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1072)
11-29 09:03:32.871: E/Database(17303):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1794)
11-29 09:03:32.871: E/Database(17303):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1851)
11-29 09:03:32.871: E/Database(17303):  at android.app.ActivityThread.access$1500(ActivityThread.java:132)
11-29 09:03:32.871: E/Database(17303):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1038)
11-29 09:03:32.871: E/Database(17303):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-29 09:03:32.871: E/Database(17303):  at android.os.Looper.loop(Looper.java:143)
11-29 09:03:32.871: E/Database(17303):  at android.app.ActivityThread.main(ActivityThread.java:4293)
11-29 09:03:32.871: E/Database(17303):  at java.lang.reflect.Method.invokeNative(Native Method)
11-29 09:03:32.871: E/Database(17303):  at java.lang.reflect.Method.invoke(Method.java:507)
11-29 09:03:32.871: E/Database(17303):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
11-29 09:03:32.871: E/Database(17303):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
11-29 09:03:32.871: E/Database(17303):  at dalvik.system.NativeStart.main(Native Method)
11-29 09:03:32.871: D/Database(17303): dbclose(): path = /data/data/Com.SEMISliteUganda/databases/offlineEMISLITE, handle = 0x422f58
11-29 09:03:32.881: E/Database(17303): close() was never explicitly called on database '/data/data/Com.SEMISliteUganda/databases/offlineEMISLITE' 
11-29 09:03:32.881: E/Database(17303): android.database.sqlite.DatabaseObjectNotClosedException: Application did not close the cursor or database object that was opened here
11-29 09:03:32.881: E/Database(17303):  at android.database.sqlite.SQLiteDatabase.<init>(SQLiteDatabase.java:1954)
11-29 09:03:32.881: E/Database(17303):  at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:902)
11-29 09:03:32.881: E/Database(17303):  at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:936)
11-29 09:03:32.881: E/Database(17303):  at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:929)
11-29 09:03:32.881: E/Database(17303):  at android.app.ContextImpl.openOrCreateDatabase(ContextImpl.java:601)
11-29 09:03:32.881: E/Database(17303):  at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:203)
11-29 09:03:32.881: E/Database(17303):  at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:118)
11-29 09:03:32.881: E/Database(17303):  at Com.SEMISliteUganda.MySQLiteHelper.openToWrite(MySQLiteHelper.java:56)
11-29 09:03:32.881: E/Database(17303):  at Com.SEMISliteUganda.home1.onCreate(home1.java:127)
11-29 09:03:32.881: E/Database(17303):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1072)
11-29 09:03:32.881: E/Database(17303):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1794)
11-29 09:03:32.881: E/Database(17303):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1851)
11-29 09:03:32.881: E/Database(17303):  at android.app.ActivityThread.access$1500(ActivityThread.java:132)
11-29 09:03:32.881: E/Database(17303):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1038)
11-29 09:03:32.881: E/Database(17303):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-29 09:03:32.881: E/Database(17303):  at android.os.Looper.loop(Looper.java:143)
11-29 09:03:32.881: E/Database(17303):  at android.app.ActivityThread.main(ActivityThread.java:4293)
11-29 09:03:32.881: E/Database(17303):  at java.lang.reflect.Method.invokeNative(Native Method)
11-29 09:03:32.881: E/Database(17303):  at java.lang.reflect.Method.invoke(Method.java:507)
11-29 09:03:32.881: E/Database(17303):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
11-29 09:03:32.881: E/Database(17303):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
11-29 09:03:32.881: E/Database(17303):  at dalvik.system.NativeStart.main(Native Method)
11-29 09:03:32.881: D/Database(17303): dbclose(): path = /data/data/Com.SEMISliteUganda/databases/offlineEMISLITE, handle = 0x3d11f0
11-29 09:03:38.887: D/Database(17303): dbopen(): path = /data/data/Com.SEMISliteUganda/databases/offlineEMISLITE, flag = 6, file size = 15360
11-29 09:03:38.887: D/Database(17303): dbopen(): path = /data/data/Com.SEMISliteUganda/databases/offlineEMISLITE, mode: wal, disk free size: 1062 M, handle: 0x3a2ad0
11-29 09:03:47.175: W/KeyCharacterMap(17303): Can't open keycharmap file
11-29 09:03:47.175: W/KeyCharacterMap(17303): Error loading keycharmap file '/system/usr/keychars/cy8c-touchscreen.kcm.bin'. hw.keyboards.65538.devname='cy8c-touchscreen'
11-29 09:03:47.175: I/KeyCharacterMap(17303): Using default keymap: /system/usr/keychars/qwerty.kcm.bin 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T05:04:01.177

LogCat 说：

```
close() was never explicitly called on database 
```

当您完成数据库调用以关闭它时，我在您提供的代码`SQLiteDatabase.close()`中看不到它。`SQLiteDatabase.close().`

见这篇[文章](http://laaptu.wordpress.com/2011/11/12/android-database-error-close-was-never-explicitly-called-on-database/)。

# python - 在 python django 中用 pdftk 填写 pdf 表单的最佳方法是什么

> ID：13618321
> 
> 赞同：1
> 
> 时间：2012-11-29T03:25:44.963
> 
> 标签：python, django, pdftk

我有两种形式

1.  一种用于上传未填写表格的PDF模板
2.  其他用于提交填写的数据

现在我的团队负责人告诉我，我必须保存模板案例的文件，但是当用户提交填写的表格时，我需要使用 pdftk 从 pdf 文件中提取数据，然后当用户想要下载它时，我必须重新填写表格那个数据。

目前我正在使用

`pdftk sample.pdf dump_data_feilds`

我正在将该字段保存到数据库中。

现在我不知道如何使用该数据从模板中重新生成 pdf。

我该如何进行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T02:34:26.080

您需要[FDFGEN](https://github.com/ccnmtl/fdfgen)从字段创建 FDF

您可以从以前生成的 FDF 生成 PDF`PDFTK`

`pdftk form.pdf fill_form data.fdf output output.pdf flatten`

# javascript - javascript 数字、字符串、数学和正确的方法

> ID：13618323
> 
> 赞同：1
> 
> 时间：2012-11-29T03:25:47.250
> 
> 标签：javascript, jquery, string

我有一个 javascript / jquery 代码，它从用户那里接受一个公式和数字并求解方程。我在 jquery 中的代码可以得到实数的解决方案，但是以字符串的形式，我无法让 javascript 以数学方式求解方程。

我有类似的东西

```
1000 * (200+3928)/2333 
```

但是，这些数字都是字符串格式，并且将它们中的每一个强制转换为浮点数或整数并重新插入它们只会将它们转换回字符串。尝试使用 valueOf 和其他东西，但没有任何效果。有没有更好的方法或我缺少的东西？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T03:29:34.357

你会发现这一点`parseInt()`并且`parseFloat()`很有帮助。请务必包含您的基数，以便正确解析值。

```
var first = "1000", // String
    secnd = "25.2", // String
    third = parseInt(first, 10) * parseFloat(secnd); // Number 
```

如果您想简洁，以牺牲一些可读性为代价，您还可以使用`+`运算符将​​字符串转换为数字：

```
+"23"; // 23
+"2.3"; // 2.3 
```

演示：http: [//jsfiddle.net/bj74v/1/](http://jsfiddle.net/bj74v/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T04:08:34.527

当你有一个字符串形式的简单方程时，最实用的方法是将字符串解析为`prefix`或`postfix`符号，然后对其进行相应的评估......

假设原始字符串是`infix`（人类用来学习基本数学的符号），例如......

`1000 * (200+3928)/2333`

然后，您将其转换`postfix`为获得...

`1000, 200, 3928, +, *, 2333, /`

使用这种表示法，计算机可以使用简单的循环和堆栈轻松评估表达式......

我不会发布实际代码，因为我想把有趣的部分留给你，但如果你想用伪代码先行一步，这里就...

```
infix to postfix :

  create empty array `postfix` and `temp`

  split the expression up into an array `A` by each operand/operator

  foreach token in `A`:
    if char is operand :
      push to postfix stack
    if char is open parenthesis:
      push to temp stack
    if char is close parenthesis:
      while top of temp stack != '(' :
        push top of temp stack to postfix stack
        pop top of temp stack
      end while
      pop top of temp stack
    if char is operator:
      while temp stack isn't empty *and* top of temp stack != '(' *and* precendence(char) <= precendence(top of temp stack) :
        push top of temp stack to postfix stack
        pop top of temp stack
      end while
      push char to temp stack

  end for loop

  while temp stack is not empty
    push top of temp stack to postfix stack
    pop top of temp stack
  end while

  return postfix stack (will be your postfix stack to evaluate)

evaluate postfix stack:
  create array A
  foreach token in postfix stack:
    if char is operand:
      push to A stack
    if char is operator:
      int x = pop A stack
      int y = pop A stack
      result = x (operation) y
      push result to A stack
  end for loop

  return top of A stack (this will be the final result) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T03:36:33.033

如果你想制作一个自由形式的计算器，你有两个选择。您可以使用`eval()`直接计算结果，就像 elclanrs 说的那样。但随后用户可以输入任意 Javascript 代码，因此不建议这样做。您的第二个选项是创建表达式解析器和评估器。如果你想处理括号之类的东西，这并不难，但也不是微不足道的。这是我通过搜索“javascript 算术解析器”找到的一个示例： [http](http://code.google.com/p/js-equation-parser/) ://code.google.com/p/js-equation-parser/ 。它是开源的，所以如果您想了解它是如何完成的，请查看代码。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-29T03:31:27.413

您的意思是用户实际键入`1000 * (200+3928)/2333`还是从不同输入中获取的数字并存储在变量中然后计算结果？

如果是第一种情况，那么您可以使用`eval`：

```
eval('1000 * (200+3928)/2333') 
```

如果是第二种情况，您可以将 a`+`添加到您的字符串中，从而将其转换为如下数字：

```
var num = +'1000' 
```

# c - 如何获取调用当前函数的函数名？

> ID：13618324
> 
> 赞同：1
> 
> 时间：2012-11-29T03:25:52.117
> 
> 标签：c, function

在函数内部，可以放（对于 gcc）

```
printf("%s: I am here!", __FUNCTION__); 
```

指示特定消息的来源。现在，假设我有薮函数 A1、A2、A3、...，它们都可能调用函数 B()。我想知道是否有一种简洁的方法来指示哪个函数在运行时调用 B() 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T03:33:04.110

没有便携的方法可以做到这一点。但是，如果您想深入研究非便携式黑客领域，GCC 提供`__builtin_return_address()`了您可以获得返回地址的工具。随后将该地址传递给`dladdr`（也是一个非标准函数，但在大多数类 unix 系统上可用）将为您提供二进制级别的函数名称（如果有任何类型的内联，这可能与抽象程序级别的函数不同，发生了基于过程间分析的优化等）。我不建议将这些技巧用于调试/分析之外的任何事情。

我怀疑其他平台和编译器上也存在类似的机制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T03:35:56.780

您可以简单地使用`backtrace()`（也不是完全可移植的）

请参阅此链接： [http ://www.kernel.org/doc/man-pages/online/pages/man3/backtrace.3.html](http://www.kernel.org/doc/man-pages/online/pages/man3/backtrace.3.html)

# jquery - 我有带有下拉菜单的 css 菜单，但是我的下拉菜单被我的 jquery 幻灯片阻止了有什么方法可以解决它吗？

> ID：13618329
> 
> 赞同：0
> 
> 时间：2012-11-29T03:26:17.903
> 
> 标签：jquery, asp.net, css

嗨，我正在帮助一个朋友建立一个网站，但是我对此很陌生，任何指针都会有所帮助，谢谢。该网站位于 asp.net

我的子菜单被阻止我的图像以任何方式使子菜单显示在图像前面？

使用 JQuery 做幻灯片

我的 CSS 代码

```
#cssmenu ul {margin: 0; padding: 7px 6px 0; background: #7d7d7d url('../images/overlay.png') repeat-x 0 -110px; line-height: 100%; border-radius: 1em; font: normal .8em/1.5em Arial, Helvetica, sans-serif; -webkit-border-radius: 5px; -moz-border-radius: 5px; border-radius: 5px; -webkit-box-shadow: 0 1px 3px rgba(0,0,0, .4); -moz-box-shadow: 0 1px 3px rgba(0,0,0, .4);}
#cssmenu li {margin: 0 5px; padding: 0 0 8px; float: left; position: relative; list-style: none; }
#cssmenu a,
#cssmenu a:link {font-weight: bold; color: #e7e5e5; text-decoration: none; display: block; padding:  8px 20px; margin: 0; border-radius: 5px; -webkit-border-radius: 5px; -moz-border-radius: 5px;   text-shadow: 0 1px 1px rgba(0,0,0, .3); }
#cssmenu a:hover {background: #000; color: #fff;}
#cssmenu .active a, 
#cssmenu li:hover > a {background: #666 url('../images/overlay.png') repeat-x 0 -40px; color: #444; border-top: solid 1px #f8f8f8; -webkit-box-shadow: 0 1px 1px rgba(0,0,0, .2); -moz-box-shadow: 0 1px 1px rgba(0,0,0, .2); box-shadow: 0 1px 1px rgba(0,0,0, .2); text-shadow: 0 1px 0 rgba(255,255,255, 1); }
#cssmenu ul ul li:hover a,
#cssmenu li:hover li a {background: none; border: none; color: #666; -webkit-box-shadow: none; -moz-box-shadow: none;}
#cssmenu ul ul a:hover {background: #8f8f8f url(images/overlay.png) repeat-x 0 -100px !important; color: #fff !important; -webkit-border-radius: 5px; -moz-border-radius: 5px; border-radius: 5px; text-shadow: 0 1px 1px rgba(0,0,0, .1);}
#cssmenu li:hover > ul {display: block;}
#cssmenu ul ul {display: none; margin: 0; padding: 0; width: 185px; position: absolute; top: 40px; left: 0; background: #ddd url('../images/overlay.png') repeat-x 0 0; border: solid 1px #b4b4b4; -webkit-border-radius: 5px; -moz-border-radius: 5px; border-radius: 5px; -webkit-box-shadow: 0 1px 3px rgba(0,0,0, .3); -moz-box-shadow: 0 1px 3px rgba(0,0,0, .3); box-shadow: 0 1px 3px rgba(0,0,0, .3);}
#cssmenu ul ul li {float: none; margin: 0; padding: 3px; }
#cssmenu ul ul a {font-weight: normal; text-shadow: 0 1px 0 #fff; }
#cssmenu ul:after {content: '.'; display: block; clear: both; visibility: hidden; line-height: 0; height: 0;}
* html #cssmenu  ul {height: 1%;} 
```

主页代码

```
<div id='cssmenu'>
    <ul>
       <li class='active'><a href="Default.aspx"><span>Home</span></a></li>
       <li class='has-sub'><a href='#'><span>Wholesale</span></a>
          <ul>
             <li><a href="#"><span>Phones</span></a></li>
             <li><a href="#"><span>Sim Cards</span></a></li>
          </ul>
       </li>
       <li><a href='#'><span>About</span></a></li>
       <li><a href="#"><span>Contact Us</span></a></li>
       <li><a href="#"><span>Dealer Login</span></a></li>
       <li><a href="#"><span>Dealer Application</span></a></li>
    </ul>
    </div>
    <br /><br />
    <div id="slider">
      <!-- start slideshow -->
      <div id="slideshow">
        <div class="slider-item"><a href="#"><img src="#" alt="icon" width="950" height="304" border="0" /></a></div>
        <div class="slider-item"><a href="#"><img src="#" alt="icon" width="950" height="304" border="0" /></a></div>
        <div class="slider-item"><a href="#"><img src="#" alt="icon" width="950" height="304" border="0" /></a></div>
        <div class="slider-item"><a href="#"><img src="#" alt="icon" width="950" height="304" border="0" /></a></div>
      </div>
      <!-- end #slideshow -->
      <div class="controls-center">
        <div id="slider_controls">
          <ul id="slider_nav">
            <li><a href="#"><img src="#" width="205" height="70" /></a></li>
            <!-- Slide 1 -->
            <li><a href="#"><img src="#" width="205" height="70" /></a></li>
            <!-- Slide 2 -->
            <li><a href="#"><img src="#" width="205" height="70" /></a></li>
            <!-- Slide 3 -->
            <li><a href="#"><img src="#" width="205" height="70" /></a></li>
            <!-- Slide 4 -->
          </ul>
        </div>
      </div>
      <div class="clr"></div>
    </div>
    <!--/slider --> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T06:15:18.407

尝试z-index：999；我相信 z-index 只会上升到 999，但值得一试。

另一种选择是将“z-index”应用于其中一个子类。如果您在 .active 或任何包含下拉列表的类上设置 z-index，它应该可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T03:29:13.233

只需将 cssmenu 的 z-index 设置为大于幻灯片的 z-index 即可。例如：

```
#cssmenu { z-index: 10; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T08:14:58.597

z-index 是你想把它放在 z 维度的地方。它就像一张 3d 图片。如果你想将一个对象放在另一个之上，只需将其中一个设为 z-index: 10; 另一个z-index：5；（每件事都有一个默认的 z-index: 0;）所以只需将 z-index 值设置为大于 jquery 幻灯片的值。

# python - 如何处理 什么应该是有效的 utf-8？我究竟做错了什么？

> ID：13618330
> 
> 赞同：2
> 
> 时间：2012-11-29T03:26:29.427
> 
> 标签：python, unicode, utf-8, pdftotext

我正在使用`pdftotext`选项“-enc utf-8 -htmlmeta -raw”并将其传递给解析输出的python脚本。（即使您不熟悉 pdftotext，也请继续阅读，因为这可能不相关。）

对于我们正在处理的一些 pdf，pdftotext 正在输出如下所示的元数据：

```
<meta name="CreationDate" content="<FE><FF>"> 
```

在python中，我正在这样做（基本上）：

```
attrib[name] = content.decode('utf-8') 
```

上述元数据中的字符串在`content`哪里。`<FE><FF>`Python引发了一个异常：

```
UnicodeDecodeError: 'utf8' codec can't decode byte 0xfe in position 0: unexpected code byte 
```

在这一点上，我不确定问题是 PDF 本身，还是 pdftotext 的输出，还是 Python 解释 utf-8 的方式。

我用谷歌搜索并没有发现任何结论。

本质上，我希望`pdftotext -enc utf-8`只输出有效*的*utf-8。我希望 Python 在解码时能够理解如何处理该 utf-8。我缺少其中的某些部分吗？

我将不胜感激任何帮助理解为什么会发生这种情况，并帮助解决方案。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T03:31:57.143

两件事情：

首先，不要使用 ，而是`content.decode('utf-8')`使用：

```
content.decode('utf-8-sig') 
```

这将自动删除 BOM（如果存在）。

其次，它看起来像是`pdftotext`在输出 UTF-16 BOM，而不是 UTF-8。UTF-8 BOM 是 '\xEF\xBB\xBF'。您需要弄清楚为什么要使用 UTF-16，或者将脚本更改为从 UTF-16 解码。

# android - PreferenceFragment - getPreferenceManager() 和 getPreferenceScreen() 之间的区别？

> ID：13618335
> 
> 赞同：37
> 
> 时间：2012-11-29T03:26:50.790
> 
> 标签：android, android-preferences, android-sharedpreferences

我已经实现了我自己的 PreferenceFragment 子类（[在此处](https://stackoverflow.com/questions/13596250/)详细介绍），并希望在其中监听偏好更改。PreferenceFragment 为您提供了两种方法：

```
getPreferenceManager().getSharedPreferences().registerOnSharedPreferenceChangeListener(this); 
```

和

```
getPreferenceScreen().getSharedPreferences().registerOnSharedPreferenceChangeListener(this); 
```

应该使用哪一个？有什么不同？我不太了解[Android 文档中的区别](http://developer.android.com/reference/android/preference/PreferenceFragment.html#getPreferenceManager%28%29)。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-18T22:04:25.997

核心区别在于它们的名称，`PreferenceManger`授予开发人员对不同功能的访问权限以进行管理`SharedPreferences`，例如检索当前偏好值的映射或设置用户偏好。到他们的默认值。`PreferenceScreen`处理显示用户偏好的屏幕，以便用户可以为它们分配值。有时这意味着在具有其他首选项的屏幕上显示一个列表项，单击时会打开另一个具有更多首选项的屏幕，就像`PreferenceScreen`嵌套 s 的情况一样。

您的问题意味着您认为 what`PreferenceManager.getSharedPreferences()`和`PreferenceScreen.getSharedPreferences()`does 之间存在差异，但根据源代码，它们是相同的。

`PreferenceScreen`：

```
public SharedPreferences getSharedPreferences() {
     if (mPreferenceManager == null) {
         return null;
     }

     return mPreferenceManager.getSharedPreferences();
 } 
```

所以`PreferenceManger`and`PreferenceScreen`是不同的实体，但是`SharedPreference`那些方法返回应该是同一个对象，因为`PreferenceScreen`从`PreferenceManager`. 我希望这就是你一直在寻找的答案。

如果您有选择，请使用`PreferenceManager.getSharedPreferences()`，它更明显并且内部方法调用更少。

有趣的事实：

`PreferenceFragment`：

```
public PreferenceManager getPreferenceManager() {
    return mPreferenceManager;
}

public PreferenceScreen getPreferenceScreen() {
    return mPreferenceManager.getPreferenceScreen();
} 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-12-02T23:36:33.783

第一个从`PreferenceManager`. 第二个，来自，从类`PreferenceScreen`继承这个方法。`Preference`

我认为这不是功能上的差异，因为两者都可能返回相同的`SharedPreferences`对象实例，但我认为使用第一个（使用`PreferenceManager`而不是`PreferenceScreen`）更清楚。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-12-03T06:47:02.720

**PreferenceScreen**[在这里](http://developer.android.com/reference/android/preference/PreferenceScreen.html)看到 domentation

PreferenceScreen 类可以出现在两个地方：

*   当 PreferenceActivity 指向它时，它被用作根并且不显示（仅显示包含的首选项）。
*   当它出现在另一个首选项层次结构中时，它会被显示并用作另一个首选项屏幕的网关（通过将另一个首选项屏幕显示为对话框或通过 getIntent() 中的 startActivity(android.content.Intent)）。此 PreferenceScreen 的子项不会显示在显示此 PreferenceScreen 的屏幕中。相反，单击此首选项时将显示一个单独的屏幕。

**PreferenceManager**[在此处](http://developer.android.com/reference/android/preference/PreferenceManager.html)查看文档：

**区别**：

`getPreferenceManager ()`返回与片段关联的当前首选项管理器。

`getPreferenceScreen ()``PreferenceScreen`从首选项 xml 文件 (preferences.xml)返回片段中使用的根，即根首选项屏幕。

# php - PHP - 如何从参考号中将其打印在表格中？

> ID：13618343
> 
> 赞同：0
> 
> 时间：2012-11-29T03:27:59.403
> 
> 标签：php, postgresql, shopping-cart

```
echo '<td><input type="checkbox" name="items[]" value="' . $row['0'] .  '" /></td>'; 
```

嗨，我正在尝试从另一个页面中名为 items 的数组中获取参考号，如上所示，并在表中找到它并打印出参考行，例如“标题，平台 ....”进入另一张桌子，但我似乎无法让它工作......任何帮助都将不胜感激

```
if (isset($_POST['items'])) {
    $n = count($_POST['items']);

    for($i=0; $i < $n; $i++){
      //  echo $_POST['items'][$i]; 
    }

    $items = array();
    foreach ($_POST['items'] as $item) {
        $items[] = pg_escape_string($con, $item);
    }

    if (!$_SESSION["selectingrows"]) {

        $item_string = "'" . implode("','", $items) . "'";

        $result = pg_query ($con, "SELECT title, platform, description, price FROM CSGames    WHERE 'refnumber' IN ($item_string)");

        while($rows = pg_fetch_assoc($result))
        {
            echo "<tr>";
            echo "<td>" . $rows['1'] . "</td>"; 
            echo "<td>" . $rows['2'] . "</td>"; 
            echo "<td>" . $rows['3'] . "</td>"; 
            echo "<td>" . $rows['4'] . "</td>";
            echo "</tr>";
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T03:39:12.050

一件事，您需要在循环`{}`之后放置大括号`while`。

这是你正在做的事情：

```
while($rows = pg_fetch_assoc($result))

    echo"<tr>"; echo "<td>" . $rows['1'] . "</td>"; echo "<td>" . $rows['2'] . "</td>"; echo "<td>" . $rows['3'] . "</td>"; echo "<td>" . $rows['4'] . "</td>";
    echo"</tr>"; 
```

通过在语句之后不在代码周围放置大括号`while`，这就是您的代码的真正作用：

```
while($rows = pg_fetch_assoc($result))
{
    echo"<tr>";
}
echo "<td>" . $rows['1'] . "</td>"; echo "<td>" . $rows['2'] . "</td>"; echo "<td>" . $rows['3'] . "</td>"; echo "<td>" . $rows['4'] . "</td>";
echo"</tr>"; 
```

您应该始终使用大括号来定义 while 循环中的代码。

你希望你的代码是这样的：

```
while($rows = pg_fetch_assoc($result))
{
    echo "<tr>";
    echo "<td>" . $rows['1'] . "</td>"; 
    echo "<td>" . $rows['2'] . "</td>"; 
    echo "<td>" . $rows['3'] . "</td>"; 
    echo "<td>" . $rows['4'] . "</td>";
    echo "</tr>";
} 
```

整齐、正确地格式化您的代码。通过这样做，您的代码更清晰，并且更容易注意到可能出现的上述错误。始终为`if`, `while`,`for`语句使用大括号。当放置一个结束行分号时，`;`放入一个新的换行符。正确缩进你的代码。像格式化这样的小事情使编码更容易。

现在我可以看到的下一个问题是您从`$rows`数组中获得的值：

```
 $rows['1'];
    $rows['2'];
    $rows['3'];
    $rows['4']; 
```

这是试图从具有string*键*`$rows`的数组中获取一些东西。*`'1'`*

 *通常您通过索引访问数组值，该索引使用从 . 开始的整数`0`。或者您通过密钥访问它。

你可以试试这个：

```
 $rows[0];
    $rows[1];
    $rows[2];
    $rows[3]; 
```

或这个：

```
 $rows['title'];
    $rows['platform'];
    $rows['description'];
    $rows['price']; 
```*

# android - 避免在列表视图中加载位图时出现内存不足错误

> ID：13618345
> 
> 赞同：0
> 
> 时间：2012-11-29T03:28:04.187
> 
> 标签：android, android-memory

我有一个列表视图，我正在从网络上加载位图..但现在的问题是我在列表视图中有 1000 个项目，所以它导致我内存不足错误..我也使用了图像缓存。 .

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T03:31:04.523

我认为使用以下任何一种都可以解决您的问题

[懒惰列表](https://github.com/thest1/LazyList)

[通用图像加载器](https://github.com/nostra13/Android-Universal-Image-Loader)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T03:56:58.857

试试下面的代码：

```
 public class ListFivePictureNameDetailsPassFail extends ListActivity {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setListAdapter(new StudentListAdapter(this));
}

private class StudentListAdapter extends BaseAdapter {
    private Context mContext;
    private String[] mStudents = { "DurgaPrasad", "Raghu", "Vivek",
            "Satish", "Naga Jyothi", "Vardhika", "Nikhil" };
    private String[] mDetailsStudent = { "Details of DurgaPrasad",
            "Details of  Raghu This row is not created using java",
            "Details of Vivek", "Details of Satish",
            "Details of Naga Jyothi", "Details of Vardhika",
            "Details of Nikhil" };

    public StudentListAdapter(Context context) {
        mContext = context;
    }

    public int getCount() {
        return mStudents.length;
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        View v = convertView;
        if (v == null) {
            System.out.println("111111111111 : "+position);
            LayoutInflater vi = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);

            /*if (position == 0) {
                System.out.println("111111111111 : "+position);
                v = vi.inflate(R.layout.studentdetailsrow, null);
                System.out.println("111111111111 : "+position);
            } else*/
                v = vi.inflate(R.layout.studentdetailsrowother, null);
        }

        ImageView iv = (ImageView) v.findViewById(R.id.icon);
        ImageView iv2 = (ImageView) v.findViewById(R.id.icon2);
        if (position == 0) {
            iv.setImageResource(R.drawable.newicon);
            iv2.setImageResource(R.drawable.icon);
        } else {
            iv.setImageResource(R.drawable.newicon);
            iv2.setImageResource(R.drawable.icon);
        }

        TextView tvname = (TextView) v.findViewById(R.id.stuname);
        TextView tvdetail = (TextView) v.findViewById(R.id.studetail);
        tvname.setText(mStudents[position]);
        tvdetail.setText(mDetailsStudent[position]);
        return v;
    }
};

   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T03:45:12.760

您还可以尝试通过尽可能缩小图像来最小化内存使用量。[这](https://stackoverflow.com/a/4837803/356224)是有关如何执行此操作的示例。

# ruby-on-rails - 多张图片上传载波

> ID：13618347
> 
> 赞同：0
> 
> 时间：2012-11-29T03:28:10.050
> 
> 标签：ruby-on-rails, database, ruby-on-rails-3, carrierwave, rails-models

我有两个模型“帖子”和“图像”我希望“帖子”有多个“图像”所以我现在有它所以“帖子”有很多“图像”和“图像”属于“帖子”。我有载波处理文件上传部分,我想知道是否有人知道我如何将许多图像上传到“帖子”模型。到目前为止我已经尝试使用 jquery-file-upload 并只保留“帖子”模型,但这只是创建了许多无用的未关联图像。我还尝试创建 2 个模型（如顶部所述）并具有嵌套形式（遵循[railscasts 教程](http://railscasts.com/episodes/73-complex-forms-part-1?view=similar))，这最终无法正常工作我收到错误“无法批量分配受保护的属性”。无论如何，如果有人知道如何或在哪里可以学习如何添加与“帖子”模型相关联的多个图像，我将不胜感激。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T05:43:28.040

尝试添加

```
attr_accessible :images_attributes 
```

进入`Post`模型以摆脱“无法批量分配受保护的属性”。

# jquery - 在打开 jqueryUI 对话框按钮后更改文本

> ID：13618349
> 
> 赞同：3
> 
> 时间：2012-11-29T03:28:20.743
> 
> 标签：jquery, jquery-ui, jquery-ui-dialog

如何将取消按钮的文本从 CANCEL 更改为 CLOSE？谢谢！

```
$("#dialog").dialog({
    buttons     : [
        {
            text    : 'SAVE',
            click    : function() {}
        },
        {
            text    : 'CANCEL',
            click    : function() {}
        }
    ]    
});
$("#button").click(function(){alert('Please change cancel button text from "CANCEL" to "CLOSE"');});

<div id="dialog"><button id="button">Change cancel button text from "CANCEL" to "CLOSE"</button></div> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-29T04:04:41.907

为您的对话框指定类名，然后从类中选择 UI 按钮。

```
$('#foo').dialog({
    buttons: {
        CANCEL: function() {
            alert(1);
        }
    },
    dialogClass: 'my-dialog'
});
$('.my-dialog .ui-button-text:contains(CANCEL)').text('CLOSE'); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-10-14T11:56:25.343

这是一件非常简单的事情:)

```
$( "#dialog" ).dialog( {
    "buttons" : [
    {
        id: "my-button",
        text: "My button",
        click:function() {
            $("#my-button span").text( "Our button!:)" );
        }
    } ]
} ); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-29T04:10:18.243

您可以在初始化（[文档](http://api.jqueryui.com/dialog/#option-buttons)）之外设置按钮的文本：

```
$( "#dialog" ).dialog({
    autoOpen: true,
    buttons: [{
        text: "Cancel",
        click: function() {
            $( this ).dialog( "close" );
        }
    }]
});
$( "#dialog" ).dialog( "option", "buttons", [ { text: "Close", click: function() { $( this ).dialog( "close" ); } } ] ); 
```

您还可以将其绑定到事件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-27T00:01:17.180

重要的是添加 []

```
buttons: [{
            text: "Close",
            click: function () {
                $(this).dialog("close");
            }
        }] 
```

# jquery - 用jquery滚动div

> ID：13618351
> 
> 赞同：1
> 
> 时间：2012-11-29T03:28:25.080
> 
> 标签：jquery

我有一个 div 目前正在使用`overflow: auto`CSS 中的和设置的高度滚动。我有一个按钮，想要单击并使 div 稍微向上滚动。我试过使用 animate 和 scrollTop ，但都没有奏效。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T04:26:05.310

下面的 JavaScript/jQuery 将允许你逐渐滚动一个 div `overflow:auto`：

```
// The <div> with (overflow:auto)
var scrollBox = $("#leDiv");

// height of the scrollable area
var boxHeight = scrollBox.height();

// height of the scrollable content
var contentHeight = scrollBox[0].scrollHeight;

$('#scrollButton').click(function() {

    // Get the current position of the scroll
    var currentPos = scrollBox.scrollTop();

    // Dont scroll if were at the top    
    if (currentPos <= 0) {
        currentPos = 0;
    } else {
        scrollBox.animate({
            scrollTop: currentPos - 80
        }, 600);
    }
});​ 
```

工作示例：http: [//jsfiddle.net/B5sR9/4/](http://jsfiddle.net/B5sR9/4/)

# spring - 如何使用 findByNamedParam 获取聚合值对象？

> ID：13618354
> 
> 赞同：0
> 
> 时间：2012-11-29T03:28:28.170
> 
> 标签：spring, hibernate

我试图通过实际上使用另一个对象的休眠查询来获取 count(*) 和 sum() 的对象。这就是我正在做的事情：

```
String query = select new org.rangde.domain.AggregatedCount(count(*), sum(lps.loanAmount - lps.loanPledged - lps.loanRaised)) from LoanProfileSnapshot lps where  lps.loanState in (:loanStates) 
List<AggregatedCount> counts = getHibernateTemplate().findByNamedParam(query, params, values);
return counts.size() > 0 ? counts.get(0) : null; 
```

这是 AggregatedCount 类（已删除 getter 和 setter）

```
public class AggregatedCount {
    private int id;
    private BigInteger count;
    private BigDecimal sum;

    public AggregatedCount(){}

    public AggregatedCount(BigInteger count, BigDecimal sum){
        this.count = count;
        this.setSum(sum);
    }
} 
```

这是我运行查询时遇到的异常。

```
Unable to locate appropriate constructor on class [org.domain.AggregatedCount] ...  nested exception is org.hibernate.hql.ast.QuerySyntaxException: Unable to locate appropriate constructor on class [org.domain.AggregatedCount] ... 
```

我尝试将总和设为 Double 和 BigInteger，但仍然遇到同样的异常。

任何帮助，将不胜感激。我更愿意为此坚持使用 findByNamedParam，因为在生成最终查询之前，我在代码中检查了很多条件。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-04T09:57:51.060

虽然我的回答似乎有点晚了，但也许它会对其他人有所帮助.. 必要的数据类型是 Long ，因为计数和总和取决于实体中的数据类型。

它还取决于您使用的休眠版本： [https ://community.jboss.org/wiki/HibernateCoreMigrationGuide35?_sscc=t](https://community.jboss.org/wiki/HibernateCoreMigrationGuide35?_sscc=t)

```
public class AggregatedCount {

private Long count;
private Long sum;

   public AggregatedCount(Long count, Long sum){
      this.count = count;
      this.setSum(sum);
   } 
```

}

# javascript - html提交按下并刷新

> ID：13618355
> 
> 赞同：0
> 
> 时间：2012-11-29T03:28:41.647
> 
> 标签：javascript, html, forms, popup

我有一个带有下拉选择和提交按钮的表单的网页。该页面还具有自动刷新功能（每 10 秒）以检索和显示来自服务器的最新信息。单击提交按钮时，会弹出一个带有是/否选项的确认警报。用户然后选择yes 将信息提交到服务器。提交到服务器有效

如果在刷新的同时点击了提交，会弹出确认对话框但不提交表单信息。确认框是否仍与表单绑定？

这是我的代码。它可能不完全相同，因为我的代码是离线的，但 geess 是

```
<html>
<head>
    <script type="text/javascript">
    function confirmSubmit(message)
    {
        var ans = confirm(message);
        if (ans == true)
        {
            return true;
        }
        else
        {
            return false
        }
    } //end of function
    </script>
</head>
<body>
    <form name="myForm" method="GET" action="GET">
        <input type="submit" name="btnSubmit" value="submit" onclick="javascript:confirmSubmit()" />
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T03:40:49.410

最好的办法是摆脱自动刷新，这样您就不必担心没有提交表单。使用 AJAX 来获取需要更新的新信息，这样页面就不需要刷新。

如果出于某种原因您不想删除自动刷新，我会做的是：无论您在哪里进行自动刷新，检查下拉/表单是否正在显示，如果是，不要自动刷新.

# wordpress - 警告：使用 require 或 require_once 时无法修改标头信息

> ID：13618362
> 
> 赞同：0
> 
> 时间：2012-11-29T03:29:48.363
> 
> 标签：wordpress

我是 WordPress 新手。

我正在创建一个插件，该插件重定向到每个未注册用户访问网站的自定义登录页面，比如说自定义登录页面：custom_login.php。

我能够创建一个代码来重定向它，但似乎在 custom_login.php 中没有 wordpress 函数起作用。所以，我想我必须通过文件加载一些东西。我猜是 wp-load.php。

然后我在页面顶部添加了一些代码：

```
<?php
require( 'd:\xampp\htdocs\wordpress\wp-load.php' );
?> 
```

但是后来我收到了这个错误：警告：无法修改标题信息.....

我更改为 require_once 但仍然收到类似的错误。

此论坛线程的一些解决方案建议删除任何空格。坦率地说，我不知道这是什么意思，但我还是尝试删除所有空格，以便代码变为：

```
<?php require('d:\xampp\htdocs\wordpress\wp-load.php');?> 
```

但这并不能解决任何问题。错误仍然存​​在。

请高手帮帮我。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T03:36:38.277

它们是正确的 - 您在其中一个文件中的开始 php 标记之前有一个空格。找到可能有点棘手，但请仔细寻找。

如果找不到，请尝试寻找 ob_clean() php 函数来提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T05:12:24.377

尝试插入相对于 localhost 的系统路径，如下所示：

```
require( '/wp-load.php' ); // or just
require( 'wp-load.php' ); // 
```

一切都取决于您尝试从中包含 wp-load.php 的位置。

另一方面，如果您放置文件 custom_login.php，则不必包含 wp-load.php。在样式表目录中作为模板或自定义页面。这样做的方法是：

.1 将文件重命名为 page-custom-login.php

.2 将文件移动到样式表目录（主题目录）

.3 转到管理员并创建一个标题为“自定义登录”的新页面

就这样。现在 WP 会将该文件视为单个自定义页面。

# c# - 我需要用于 .NET 4.5 的 Visual Studio 2012 还是适合 4.5 的 Visual Studio 2010？

> ID：13618363
> 
> 赞同：6
> 
> 时间：2012-11-29T03:29:50.870
> 
> 标签：c#, .net

我已经安装了 .NET Framework 4.5，但我只能在我的项目中使用 .NET Framework 4.0，它不支持 BigInteger。我需要适用于 4.5 的 Visual Studio 2012 还是适用于 4.5 的 Visual Studio 2010？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-29T03:33:44.043

是的，您需要 VS 2012 才能使用 .NET 4.5，但是，BigInteger 是在 .NET 4 中引入的

Visual Studio 的每个现代版本（VS 2002 上）都被锁定到特定的 .NET Framework 版本，并且无法“查看”/使用在该 VS 版本之后发布的较新版本。较新的 VS 版本，VS 2008 及更高版本可以“看到”一些较旧的框架版本，但不能“看到”较新版本的 .NET。

VS 2008 键入 .NET 3.5，可以使用 2.0 和 3.0。不能使用 4.0 或 4.5

VS 2010 键入 .NET 4.0，可以使用 3.5、3.0 和 2.0。不能使用 4.5

VS 2012 键入 .NET 4.5，可以使用 4.0、3.5、3.0 和 2.0

如果需要 .NET Framework 4.5 中引入的功能，则需要 VS 2012。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T03:35:13.567

1.  **[Biginteger 是在 .net 4.0 中引入的](http://msdn.microsoft.com/en-us/library/system.numerics.biginteger%28v=vs.100%29.aspx)**
2.  对于 .net 4.0 之前的版本，请尝试[intX](http://intx.codeplex.com/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-30T18:28:28.643

正如其他人所指出的，BigInteger 是在 .NET 4.0 中引入的，而不是在 .NET 4.5 中引入的。通过我们在评论中的交流，您似乎没有在您的项目中引用 System.Numerics.dll。

VS 项目引用告诉 C# 编译器哪些程序集定义了将在正在编译的 C# 代码中使用的类型。默认的 Visual Studio 项目模板不包括对整个 .NET 框架的引用。省略了几个更专业的程序集，例如 System.Numerics；如果你想使用它们，你必须自己添加引用。

人们经常将 using 指令 ​​( `using System.Numerics;`) 与引用本身混淆。using 指令仅帮助编译器解析类型名称；它涉及一个*命名空间*。为了让编译器自己找到类型，您需要一个引用，它标识一个*程序集*。

该信息应有助于澄清错误消息“名称空间'System'中不存在类型或名称空间名称'Numerics'（您是否缺少程序集引用？）”。这意味着编译器检查了所有引用的程序集，并且没有找到名为`System.Numerics`.

要在 VS 2010 中添加程序集引用：

1.  打开解决方案资源管理器
2.  展开相关项目的节点
3.  右键单击引用节点
4.  选择“添加参考...”。将打开一个对话框。
5.  打开“.NET”选项卡
6.  在组件名称列表中找到“System.Numerics”
7.  单击“确定”按钮。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-29T03:32:23.057

.NET 4.5 需要 VS2012。VS2010 仅支持 .NET 4.0。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-29T05:39:21.403

但是一旦安装了 .NET 4.5，所有 .NET 4 应用程序实际上都在新版本的 .NET 上运行，系统 DLL 的位置是`C:\Windows\Microsoft.NET\Framework\v4.0.30319`

你的意思是VS2010只能引用系统DLL`C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0`吗？

在设计时看不到新类型/新库，但可以在运行时使用反射加载？

# r - 基于 2 列数据框和一个键值列表添加列

> ID：13618375
> 
> 赞同：2
> 
> 时间：2012-11-29T03:31:15.613
> 
> 标签：r, dataframe

假设我有一个键值对列表，如下所示：

```
l <- list("A" = 10, "B" = 20, "C" = 30) 
```

以及具有值向量和相应类型向量的数据框：

```
df <- data.frame (type=c("A","A","B","B","B","C"),value=c(1,2,3,4,5,6))
df
  type value
1    A     1
2    A     2
3    B     3
4    B     4
5    B     5
6    C     6 
```

我想根据列表中它们的类型值来划分这些值，这样我最终得到一个如下所示的数据框：

```
df
  type value newval
1    A     1   0.10
2    A     2   0.20
3    B     3   0.15
4    B     4   0.20
5    B     5   0.25
6    C     6   0.20 
```

我怀疑这很容易，但谷歌让我失望了，我一直在拔头发一段时间试图弄清楚。在我更熟悉的python中，我可以遍历行并为我的列表使用字典，但如何做到这一点也不明显，在R中也不合适。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T03:40:12.197

如果您考虑加入或合并的条款，它就会变得直截了当。

请注意，我假设值是数字，而不是您的示例中的字符。

我喜欢`data.table`这样将展示一种使用该 pacakge 的方法

```
library(data.table)
# df with value as numeric
df <- data.frame (type=c("A","A","B","B","B","C"),value=1:6)
# create the data.table
DT <- data.table(df, key = 'type')
#  create the key-value list as a data.table (specifying the levels the same 
# as in DT[,type]
byl <- data.table(type = factor(names(l), levels = levels(DT[,type])), value = unlist(l), key = 'type')
# note they are both keyed by type, so we can join by type and then
# create a column that is value/ (value in the i component)
# so we use value / i.value
# i.value references value from the i argument (byl in this case)
DT[byl, newval := value / i.value ]
# look in DT now
DT
   type value newval
1:    A     1   0.10
2:    A     2   0.20
3:    B     3   0.15
4:    B     4   0.20
5:    B     5   0.25
6:    C     6   0.20 
```

# php - Codeigniter 购物车 - 将数据保存在数据库中 - 如何处理？

> ID：13618379
> 
> 赞同：2
> 
> 时间：2012-11-29T03:31:48.237
> 
> 标签：php, mysql, codeigniter

我需要在我的 Web 应用程序中处理订单和购物车方面的帮助。

我决定使用 Codeigniter 2 中内置的 Cart 库。

我看过一些关于那个购物车库的教程，我知道如何使用它，但我不知道：

*   我什么时候应该在数据库中创建/保存该订单？当用户将商品添加到购物车时，或者我应该将所有订单数据保留在会话中并在用户接受订单时“移动”它做数据库？
*   我应该在数据库中存储会话 ID 或其他内容吗？

我试图了解如何在 PrestaShop 中实现购物车/订单功能，但它看起来对我来说太复杂了，我是业余 PHP 程序员。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-29T03:51:59.317

使用购物车的理想和好方法是将其保持在会话中，codeigniter 的购物车类正在做同样的事情，当用户下订单时，使用此数据将此订单放入数据库并执行其他操作，如支付网关、运输。如果您想使用用户在下一个会话中保留他的订单，例如如果用户在购物车中添加了一些产品并且他在下订单之前退出并且他是注册用户，那么您可以每次将他的购物车保存在数据库中，这样如果他没有下订单就走了，您可以在他下次登录时向他展示他的订单。

`$this->cart->contents();`您可以使用购物车类的方法将用户购物车数据存储在数据库中。像这样使用

```
$cartContentString = serialize($this->cart->contents()); 
```

您将获得一串购物车内容，您可以将此字符串保存在数据库中，然后像这样使用它

```
$cartArray = unserialize($cartContentString); 
```

# javascript - Javascript - 在写入画布之前旋转一个矩形

> ID：13618380
> 
> 赞同：2
> 
> 时间：2012-11-29T03:31:54.243
> 
> 标签：javascript, html, canvas

我一直很难让一组矩形面对画布块上的某个点。我正在遍历一组点，并绘制矩形，它们应该都面向某个点。

首先我设置了半径、焦点和矩形

```
var Angle = Math.PI;

_.each(Points, function(Point) {
var Radius = 10;

var Focus = {
    X: 500,
    Y: 1000
}

var Rect = [
{
    X: (Point.X - Radius/2),
    Y: (Point.Y - Radius/2)
},
{
    X: (Point.X + Radius/2),
    Y: (Point.Y - Radius/2)
},
{
    X: (Point.X + Radius/2),
    Y: (Point.Y + Radius/2)
},
{
    X: (Point.X - Radius/2),
    Y: (Point.Y + Radius/2)
}
]; 
```

然后，使用下划线，我遍历并使用我在另一个响应中读到的方法。

```
var index = 0;
_.each(Rect, function (V) {
    var dx2 = Focus.X - V.X;
    var dy2 = Focus.Y - V.Y;
    var dx2_ = dx2 * Math.cos(Angle) - dy2 * Math.sin(Angle);
    var dy2_ = dy2 * Math.sin(Angle) + dy2 * Math.cos(Angle);

    V.X = dx2_ + V.X;
    V.Y = dy2_ + V.Y; 

    Rect[index] = V;
    index++;
}); 
```

然后将其全部设置在正常的画布中。上下文和填充样式是预先定义的。

```
ctx.beginPath();
ctx.moveTo(Rect[0].X, Rect[0].Y);
ctx.lineTo(Rect[1].X, Rect[1].Y);
ctx.lineTo(Rect[2].X, Rect[2].Y);
ctx.lineTo(Rect[3].X, Rect[3].Y);
ctx.lineTo(Rect[0].X, Rect[0].Y);

ctx.fill();

}); 
```

这些是初始方块（每个循环没有旋转）

无旋转 ![无旋转](../Images/f37bdbab92a2699a1db589e16e373097.png)

这就是我得到的（似乎矩形是围绕该点旋转而不是向该点旋转）

角度设置为 pi [![角度设置为 pi](../Images/fc5aa7c99356ef5c9784bc3bfebd738e.png)](https://i.stack.imgur.com/bMbzL.png)

我试图得到的行为是让它们面向底部中间。(500,1000) 如果画布是 1000x1000。

JSFiddle：http: [//jsfiddle.net/nmartin413/cMwTn/7/](http://jsfiddle.net/nmartin413/cMwTn/7/)

我无法终生弄清楚出了什么问题。如果有什么让你印象深刻的，请告诉我:)。很抱歉这个问题很长，但这真的让我很沮丧。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T14:58:35.777

尽量不要自己绘制矩形，使用`ctx.rotate(angle);`and`ctx.fillRect(-Radius/2, -Radius/2, width, height);`因为它更简单，代码更明智 - 更易于阅读和管理。要完成这种旋转，每次对矩形应用变换时，保存并重绘画布，使用`ctx.save();`和`ctx.restore();`

JS：

```
$(document).ready(function() {
    var Canvas = $('canvas')[0];
    var Focus = {
        X: 500,
        Y: 1000
    };
    var f = Focus;
    var angle = 0;
    var Radius = 10;
    _.each(Points, function($Point) {
        var ctx = Canvas.getContext('2d');
        var x = $Point.X;
        var y = $Point.Y;
        var width = Radius;
        var height = Radius;
        var cx = x - 0.5 * width;
        var cy = y - 0.5 * height;
        ctx.save();
        ctx.translate(x,y);
        var angle = (Math.atan2(f.Y-y,f.X-x));
        ctx.rotate(angle);
        ctx.fillStyle = "#ED1B24";
    ctx.fillRect(-Radius/2, -Radius/2, width, height);
        ctx.restore();
    });
}); 
```

JSFiddle：http: [//jsfiddle.net/mJNas/](http://jsfiddle.net/mJNas/)

# objective-c - NSWindowController showWindow：闪烁窗口

> ID：13618382
> 
> 赞同：11
> 
> 时间：2012-11-29T03:32:19.453
> 
> 标签：objective-c, xcode, macos

所以我试图像这样打开一个新的 NSWindow：

```
NSWindowController *winCon = [[NSWindowController alloc] initWithWindowNibName:@"NewWindow"];
[winCon showWindow:self]; 
```

当我这样做时，新窗口会在屏幕上闪烁，就像它出现然后很快消失一样。我知道我在 IB 和所有内容中正确引用了我的窗口。就像它想显示窗口一样，但随后它几乎立即被释放或发生了一些奇怪的事情。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-29T04:35:37.513

首先，初始化器的名称不是`-initWithNibName:`，而是`-initWithWindowNibName:`。

其次，如果您使用 ARC，这是正确的，您的窗口会变得模糊，因为您的`NSWindowController`. 当方法结束时，您的参考也会结束。

例如，如果您要在应用程序委托界面中执行此操作：

```
@property(strong) NSWindowController *winCon; 
```

并在您的实现文件中合成它：

```
@synthesize winCon; 
```

然后你可以这样设置：

```
self.winCon = [[NSWindowController alloc] initWithWindowNibName:@"NewWindow"];
[self.winCon showWindow:self]; 
```

现在你的窗口不会消失。当应用程序关闭时，窗口控制器将被释放。

# asp.net - 重新启动应用程序池后登录的奇怪行为

> ID：13618388
> 
> 赞同：0
> 
> 时间：2012-11-29T03:33:06.113
> 
> 标签：asp.net, asp.net-mvc

我正在使用表单身份验证构建一个简单的 asp.net mvc3 应用程序。将其发布到 IIS 7.5 后，我发现即使在我为我的网站重新启动应用程序池之后（停止它然后启动）。已登录的用户无需重新登录。这不是我所期望的，我不记得我已将 cookie 配置为持久性。

我使用简单的 asp.net mvc3 Web 应用程序模板，并没有做太多配置身份验证的事情。以下是一些与身份验证相关的代码：

在 web.config 中：

```
<authentication mode="Forms">
  <forms loginUrl="~/Account/LogOn" timeout="2880" />
</authentication> 
```

在登录操作中：

```
 FormsAuthentication.SetAuthCookie(userName, false); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T06:30:54.077

我想我得到了你的答案，cookie 是在客户端设置的，重置服务器 IIS 不会破坏 cookie，因为它在服务器上不可用。您可以设置 cookie 过期时间，它会在客户端被销毁。我希望这能解决问题。

# java - 使用java将单链表转换为双向链表

> ID：13618389
> 
> 赞同：0
> 
> 时间：2012-11-29T03:33:06.673
> 
> 标签：java, list, linked-list

我了解 LinkedList 和单/双链表的概念。但是，我不明白如何在我的代码中实现它？

我必须将此单列表转换为双向链表：

```
public class MyLinkedList<E> extends MyAbstractList<E> {
  private Node<E> head, tail;

  /** Create a default list */
  public MyLinkedList() {
  }

  /** Create a list from an array of objects */
  public MyLinkedList(E[] objects) {
    super(objects);
  }

  /** Return the head element in the list */
  public E getFirst() {
    if (size == 0) {
      return null;
    }
    else {
      return head.element;
    }
  }

  /** Return the last element in the list */
  public E getLast() {
    if (size == 0) {
      return null;
    }
    else {
      return tail.element;
    }
  }

  /** Add an element to the beginning of the list */
  public void addFirst(E e) {
    Node<E> newNode = new Node<E>(e); // Create a new node
    newNode.next = head; // link the new node with the head
    head = newNode; // head points to the new node
    size++; // Increase list size

    if (tail == null) // the new node is the only node in list
      tail = head;
  }

  /** Add an element to the end of the list */
  public void addLast(E e) {
    Node<E> newNode = new Node<E>(e); // Create a new for element e

    if (tail == null) {
      head = tail = newNode; // The new node is the only node in list
    }
    else {
      tail.next = newNode; // Link the new with the last node
      tail = tail.next; // tail now points to the last node
    }

    size++; // Increase size
  }

  @Override /** Add a new element at the specified index 
   * in this list. The index of the head element is 0 */
  public void add(int index, E e) {
    if (index == 0) {
      addFirst(e);
    }
    else if (index >= size) {
      addLast(e);
    }
    else {
      Node<E> current = head;
      for (int i = 1; i < index; i++) {
        current = current.next;
      }
      Node<E> temp = current.next;
      current.next = new Node<E>(e);
      (current.next).next = temp;
      size++;
    }
  }

  /** Remove the head node and
   *  return the object that is contained in the removed node. */
  public E removeFirst() {
    if (size == 0) {
      return null;
    }
    else {
      Node<E> temp = head;
      head = head.next;
      size--;
      if (head == null) {
        tail = null;
      }
      return temp.element;
    }
  }

  /** Remove the last node and
   * return the object that is contained in the removed node. */
  public E removeLast() {
    if (size == 0) {
      return null;
    }
    else if (size == 1) {
      Node<E> temp = head;
      head = tail = null;
      size = 0;
      return temp.element;
    }
    else {
      Node<E> current = head;

      for (int i = 0; i < size - 2; i++) {
        current = current.next;
      }

      Node<E> temp = tail;
      tail = current;
      tail.next = null;
      size--;
      return temp.element;
    }
  }

  @Override /** Remove the element at the specified position in this 
   *  list. Return the element that was removed from the list. */
  public E remove(int index) {   
    if (index < 0 || index >= size) {
      return null;
    }
    else if (index == 0) {
      return removeFirst();
    }
    else if (index == size - 1) {
      return removeLast();
    }
    else {
      Node<E> previous = head;

      for (int i = 1; i < index; i++) {
        previous = previous.next;
      }

      Node<E> current = previous.next;
      previous.next = current.next;
      size--;
      return current.element;
    }
  }

  @Override /** Override toString() to return elements in the list */
  public String toString() {
    StringBuilder result = new StringBuilder("[");

    Node<E> current = head;
    for (int i = 0; i < size; i++) {
      result.append(current.element);
      current = current.next;
      if (current != null) {
        result.append(", "); // Separate two elements with a comma
      }
      else {
        result.append("]"); // Insert the closing ] in the string
      }
    }

    return result.toString();
  }

  @Override /** Clear the list */
  public void clear() {
    size = 0;
    head = tail = null;
  }

  @Override /** Return true if this list contains the element e */
  public boolean contains(E e) {
    System.out.println("Implementation left as an exercise");
    return true;
  }

  @Override /** Return the element at the specified index */
  public E get(int index) {
    System.out.println("Implementation left as an exercise");
    return null;
  }

  @Override /** Return the index of the head matching element in 
   *  this list. Return -1 if no match. */
  public int indexOf(E e) {
    System.out.println("Implementation left as an exercise");
    return 0;
  }

  @Override /** Return the index of the last matching element in 
   *  this list. Return -1 if no match. */
  public int lastIndexOf(E e) {
    System.out.println("Implementation left as an exercise");
    return 0;
  }

  @Override /** Replace the element at the specified position 
   *  in this list with the specified element. */
  public E set(int index, E e) {
    System.out.println("Implementation left as an exercise");
    return null;
  }

  @Override /** Override iterator() defined in Iterable */
  public java.util.Iterator<E> iterator() {
    return new LinkedListIterator();
  }

  private void checkIndex(int index) {
    if (index < 0 || index >= size)
      throw new IndexOutOfBoundsException
        ("Index: " + index + ", Size: " + size);
  }

  private class LinkedListIterator 
      implements java.util.Iterator<E> {
    private Node<E> current = head; // Current index 

    @Override
    public boolean hasNext() {
      return (current != null);
    }

    @Override
    public E next() {
      E e = current.element;
      current = current.next;
      return e;
    }

    @Override
    public void remove() {
      System.out.println("Implementation left as an exercise");
    }
  }

  private static class Node<E> {
    E element;
    Node<E> next;

    public Node(E element) {
      this.element = element;
    }
  }
} 
```

所以我明白要添加一个先前的指针，我必须这样做：

```
 private static class Node<E> {
    E element;
    Node<E> next;
    Node<E> previous;

    public Node(E element) {
      this.element = element;
    } 
```

现在，我很困惑 - 我如何实际实现双向链表的必要方法？我不是要求某人完成整个作业，但有人可以向我展示一个已制定方法的示例吗？

我也无法理解，当我这样做时，程序如何知道我引用了前一个元素`Node<E> previous`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T03:39:30.137

> 我也不明白，就因为我做了“Node previous”，程序怎么知道我引用了前一个元素？

该程序*不*知道您正在引用前一个元素。您，程序员，需要维护（保持最新和正确）该参考。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T08:07:07.237

每个节点也将具有对前一个节点的引用，因为它具有对下一个节点的引用。更改 Node 的数据结构，为前一个节点添加一个额外的 Node 引用。因此，现在当有人调用该`add(E e)`方法时，您将在尾部添加该元素并将之前的引用`e` ***（将是新的尾部节点）***设置为旧的尾部节点（这是调用 add 之前的尾部）。

因此，通过这种方式，您可以管理对前一个节点和下一个节点的两个引用。还向您的双链接列表类`pervious()`和相关类添加一个新方法。

# windows-phone-7 - WP7如何检测音轨何时结束？

> ID：13618390
> 
> 赞同：2
> 
> 时间：2012-11-29T03:33:12.577
> 
> 标签：windows-phone-7, events, audio, agent

我`BackgroundAudioPlayer`在我的 Windows Phone 7 应用程序中使用代理。当track结束时，agent端接收到`TrackEnded`event，而UI端没有接收到任何event。

另外，当我故意将音轨的位置设置为它的末尾，然后调用`Play()`时，代理端接收`TrackEnded`事件（因为轨道已经结束），但 UI 端确实`Stopped`在其`PlayStateChanged`处理程序中接收。太奇怪了 ！

如何让 UI 知道一首曲目已经结束？通过隔离存储进行通信不是我的最爱！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T00:57:25.247

通过研究和一些测试，使用独立存储作为后台和前台实例之间的中间人`BackgroundAudioPlayer`仍然是 Windows Phone 7 的唯一途径。这里提到了这些选项（我知道你知道）......

[http://blogs.msdn.com/b/wpukcoe/archive/2012/02/10/background-audio-in-windows-phone-7-5-part-2.aspx](http://blogs.msdn.com/b/wpukcoe/archive/2012/02/10/background-audio-in-windows-phone-7-5-part-2.aspx)

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202944(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202944(v=vs.105).aspx)

[https://stackoverflow.com/a/11419680/247257](https://stackoverflow.com/a/11419680/247257)

Peter Torr 也证实了这一点，他说：

> 例如，代理可能需要告诉前台“我刚刚开始预下载下一首曲目”或“我更新了数据库表，你应该刷新你的状态”。Windows Phone OS 7.1 无法创建此类通知；充其量您可以使用轮询技术对它们进行建模，但是这种方法效率低下并且容易出错。

唯一的好消息是，在同一篇文章中，他为 Windows Phone 8 提供了一个更可靠的解决方案（使用 IPC 的命名事件）......

[http://blogs.windows.com/windows_phone/b/wpdev/archive/2013/03/27/using-named-events-to-coordinate-foreground-apps-and-background-agents.aspx](http://blogs.windows.com/windows_phone/b/wpdev/archive/2013/03/27/using-named-events-to-coordinate-foreground-apps-and-background-agents.aspx)

# objective-c - ios - UIActivityIndi catorView 是否应该默认显示？

> ID：13618394
> 
> 赞同：0
> 
> 时间：2012-11-29T03:33:46.150
> 
> 标签：objective-c, ios, uiactivityindicatorview

通常当我过去使用 UIActivityIndi​​catorView 时，我不得不让它隐藏/显示。

但是现在我把它拖到了故事板上的屏幕上，当我运行模拟器时，它只是显示在屏幕上而没有旋转。

知道为什么会发生这种情况以及我可能做错了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T03:38:51.987

你有`hidesWhenStopped`设置`NO`吗？

`UIActivityIndicatorView`有一个属性`hidesWhenStopped`，默认情况下设置为`YES`- 所以当`UIActivityIndicatorView`没有动画时，它将被隐藏。

也许您设法不小心将此属性更改为`NO`?

# ruby - 执行位于捆绑 gem 中的 Thor 任务

> ID：13618395
> 
> 赞同：4
> 
> 时间：2012-11-29T03:33:59.360
> 
> 标签：ruby, gem, bundler, command-line-interface, thor

我有一个 gem，**my_gem**，它具有**thor**作为运行时依赖项。我有一个托尔的子类位于宝石中：

`lib/tasks/task.thor`

从 gem 的源目录我可以运行：

```
bundle
thor task:my_task 
```

并且 my_task 将被执行。

但是，如果我将**my_gem**包含在另一个项目的 Gemfile 中，当我运行时：

```
bundle
thor task:my_task 
```

我得到：

> 没有可用的雷神任务

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-18T22:52:17.367

在我看来，如果我理解正确，您的 lib/tasks/task.thor 实际上是 gem 本身的一部分，并且您希望 thor 找到埋在 gem 中的 thor 文件。

如果是这种情况，这将不起作用，因为 thor 不会自动查看您的 gem 目录。

您可能需要考虑根本不使用 thor 文件，而只需编写一个命令来使用 thor 来处理您的命令行参数，例如 Rails 所做的那样。

如果您真的需要以这种方式运行 thor，那么您的 gem 必须执行将您的 thor 文件放在 thor 搜索路径中的“魔法”。

# jsf-2 - 在 JSF2 xhtml 页面中声明和使用变量

> ID：13618397
> 
> 赞同：20
> 
> 时间：2012-11-29T03:34:10.900
> 
> 标签：jsf-2

我`<s:set var="buttonText" value="getText('person.button.add')"/>`在 JSTL 中使用 buttonText 变量来设置文本。

**有人告诉我如何在 JSF EL 中完成这个吗？**

此处以 JSF 形式提出的问题[IF-ELSE 条件。需要知道正确的方法](https://stackoverflow.com/questions/13591618/if-else-condition-in-jsf-form-need-to-know-right-approach/13595477#comment18649867_13595477)，但被告知作为一个单独的问题提出。

**编辑：**

我已经在上面添加了一个链接以获取详细信息，但这里又是一个。

我在 struts2 项目中使用 JSTL

```
 <s:if test="person==null || person.id==null || person.id==''">
                <s:set var="buttonText" value="getText('person.button.add')"/>
            </s:if>
            <s:else>
                <s:set var="buttonText" value="getText('person.button.edit')"/>
            </s:else> 
```

我想在 JSF2 中使用相同的方法，但使用表达式语言。我将值保存在一个名为的变量中`buttonText`，并在下面的某个地方访问它`#{buttonText}`。我需要解决如何写入变量`EL`和使用它的方法。希望它清楚。

我只需要`<s:set var="buttonText" value="getText('person.button.add')"/>`代码行的解决方案。

谢谢

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-11-29T06:40:56.590

您可以使用`ui:param`

通过以下方式：

```
<ui:param name="buttonText" value="#{myBean.MyValue}" /> 
```

或者

```
<ui:param name="buttonText" value="someText" /> 
```

或者

```
<ui:param name="buttonText" value="someText#{myBean.MyValue}" /> 
```

然后像这样使用

```
<h:outputText value="#{buttonText}"/> 
```

* * *

另一种选择`<c:set`是以下列方式使用

```
<c:set var="buttonText" value="#{myBean.MyValue}" /> 
```

但请注意，这`<c:set`是一个 JSTL 标签，

> JSTL 标记在构建视图期间运行（当 XHTML 文件转换为 JSF 组件树时）

此外，您可能想[在 JSF2 Facelets 中阅读此 JSTL……有意义吗？](https://stackoverflow.com/a/3343681/617373)

# publish - 应该使用什么令牌将新闻提要发布到应用程序用户的墙上

> ID：13618401
> 
> 赞同：2
> 
> 时间：2012-11-29T03:34:30.630
> 
> 标签：publish, access-token, facebook-access-token

我有一个关于应该使用哪个访问令牌通过 PHP SDK 将新闻提要发布到用户墙上的问题。

基本上，在连接到应用程序的用户与发布新闻提要之间存在延迟，比如说 7 天。我的理解是我们可以先将 60 天的长寿命令牌存储到数据库中，然后在 7 天后使用它。

但是，这里的文章建议可以使用应用令牌（没有过期时间）来发布新闻需要。

所以，我的问题是

1.  在当前情况下我应该使用哪个令牌？
2.  使用哪一种会更安全？
3.  使用长期令牌或应用令牌是否有风险？

非常感谢！

# android - 无法使用 PhoneGap 2.2 创建新的 Android 项目

> ID：13618408
> 
> 赞同：3
> 
> 时间：2012-11-29T03:35:40.117
> 
> 标签：android, windows, cordova, sdk

当我尝试使用 PhoneGap 创建一个 android 项目时遇到问题。（我有 Windows 8 64 位）。

我在我的`PATH`环境变量中放置了正确的路径，但是当我尝试创建一个新项目时，这就是我得到的：

> 找不到 Cscript 作为内部或外部命令...（法语翻译不好，但您明白了。）

这个错误对我来说是新的，因为在它总是返回之前：

> 缺少以下一项...

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T17:59:55.417

尽管您可能拥有正确的 PATH 变量，但您可能没有最新版本的 ANT 或缺少`commons-codec`. [我在另一个线程中回答了这个问题](https://stackoverflow.com/a/13650568/535467)，所以你可能想看看那里，看看是否有任何适用。

# javascript - Javascript删除html表格行

> ID：13618409
> 
> 赞同：0
> 
> 时间：2012-11-29T03:35:50.100
> 
> 标签：javascript, html-table

我动态创建了一个 html 表，并且每行中的一个单元格存储一个按钮，我想在按下时删除该行。在知道从按下的删除按钮中删除哪个表行时，我有哪些选择？

我是否能够以某种方式获得按钮所在的行？也许然后在点击中我可以使用事件'this'属性来获取按钮，然后找出它在哪个单元格中，以及从那里该单元格在哪一行？不知道我会怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T03:39:35.077

可以使用本机 JS 来完成，但这里有一个 jQuery 解决方案。确保 clone(true) 以确保您的事件得到保留。

```
<tr><td>hello</td><td><span class="deleteMe">Delete</td></tr>

$(".deleteMe").click(function(){$(this).parent().parent().remove();}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T03:39:41.727

把它放在按钮的 onclick 处理程序中：

```
this.parentNode.parentNode.parentNode.removeChild(this.parentNode.parentNode); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T03:39:51.517

如果您使用的是 jQuery，这将是有关如何实现此目的的示例代码。

```
$('#my_table_id').on('click', 'button', function() {
    $(this).closest('tr').remove();
}); 
```

希望这会有所帮助，最好！

# objective-c - 如何在类之间共享方法

> ID：13618416
> 
> 赞同：0
> 
> 时间：2012-11-29T03:37:15.763
> 
> 标签：objective-c, ios, xcode, xcode4.5

我想将标签的文本设置为来自不同类的单元格的文本。

在我的 MasterViewController 我有：

```
// SAVE TEXT OF SELECTED CELL

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
    cellString = cell.textLabel.text;
}

//SHARES VARIABLES BETWEEN CLASSES

- (ChemProjectMasterViewController*) sharedVariable
{
    static ChemProjectMasterViewController *myVariable = nil;

    if (myVariable == nil)
    {
        myVariable = [[[self class] alloc] init];
        myVariable.sharedCellString = cellString;
    }

    return myVariable;
} 
```

我也有这个在.h

```
@interface ChemProjectMasterViewController : UITableViewController

@property (nonatomic)NSString *cellString;
@property (nonatomic)NSString *sharedCellString;
+(ChemProjectMasterViewController*) sharedVariable;

@end 
```

现在我想访问这个方法的类是 DetailViewController。我有：

```
detailDescriptionLabel.text = [ChemProjectMasterViewController sharedVariable].sharedCellString; 
```

其中 detailDescriptionLabel 只是一个文本标签。

** 程序编译得很好，但是当我单击按钮时，我将标签文本设置为更改。该应用程序运行平稳，直到我按下导致它崩溃的按钮。主要目标是将 DetailViewController 中的标签文本设置为 MasterViewController 中的单元格文本。感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T05:04:24.260

我看到的东西很少。

第一个，在 .h 中您已声明为类方法 (+)，而在 .m 中它是实例 (-)。

第二个`@property (nonatomic)NSString *sharedCellString;`是不安全的未保留，使其坚固。

如果它有效，请告诉我？

# java - 用classpath编译java找不到所有jar文件

> ID：13618420
> 
> 赞同：4
> 
> 时间：2012-11-29T03:37:48.337
> 
> 标签：java, javac, jakarta-mail

我有一个包含许多 .jar 文件的 lib 文件夹，其中一个文件是 mail.jar（用于 javax.mail）

当我编译我的源代码时，我使用

```
javac -cp .:../lib/ server/MyFile.java 
```

然后我得到一堆错误

```
server/MyFile.java:22: error: package javax.mail.internet does not exist
import javax.mail.internet.InternetAddress;
                          ^
server/MyFile.java:23: error: package javax.mail.internet does not exist
import javax.mail.internet.MimeMessage;
                          ^
server/MyFile.java:24: error: package javax.mail does not exist
import javax.mail.Authenticator;
                 ^
etc
etc 
```

但是 javax.mail 应该在里面（通过 mail.jar）。我在 lib 文件夹中也有activation.jar。请注意，我今天刚刚从 sun 网站下载了这个 mail.jar 文件。这是最近的。

有什么问题？

**更新：**

我已经在类路径中手动添加了所有 jar 文件，并且编译得很好。但是现在当我运行 MyFile.java 时，使用这个命令

```
java server.MyFile 
```

我收到此错误：

```
 Exception in thread "main" java.lang.NoClassDefFoundError: javax/mail/Authenticator
    at java.lang.Class.getDeclaredMethods0(Native Method)
    at java.lang.Class.privateGetDeclaredMethods(Class.java:2442)
    at java.lang.Class.getMethod0(Class.java:2685)
    at java.lang.Class.getMethod(Class.java:1620)
    at sun.launcher.LauncherHelper.getMainMethod(LauncherHelper.java:492)
    at sun.launcher.LauncherHelper.checkAndLoadMain(LauncherHelper.java:484)
Caused by: java.lang.ClassNotFoundException: javax.mail.Authenticator
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    ... 6 more 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T03:47:53.790

> 有没有更简单的方法来做到这一点？

从版本 6 开始，您可以使用[*类路径通配符*](http://docs.oracle.com/javase/6/docs/technotes/tools/solaris/classpath.html)。

```
    javac -cp .:../lib/* server/MyFile.java

```

另请参阅此相关[问答](https://stackoverflow.com/q/1064481/230513)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-12-20T17:16:31.960

您可以`CLASSPATH=/path/to/java/jar;/path/to/other/jar`为 Unix 设置（注意分号）。

另请查看[http://javarevisited.blogspot.in/2013/02/windows-8-set-path-and-classpath-java-windows-7.html](http://javarevisited.blogspot.in/2013/02/windows-8-set-path-and-classpath-java-windows-7.html)

# c++ - 排列ID..？C++

> ID：13618421
> 
> 赞同：2
> 
> 时间：2012-11-29T03:37:50.600
> 
> 标签：c++

我正在使用排列生成一个字符串（使用它的每个字符）到“helloworld！”，但是它花了...176791 到“helloworld！” 有没有办法让我可以输入：176791 快速排列为“helloworld！”？

```
 ...
176790\. helloworl!d
176791\. helloworld! 
```

我的代码：

```
#include <windows.h>
#include <string>
#include <iostream>
#include <algorithm>

int main( void )
{
    ::UINT64 Count = 0;
    std::string SomeString = "eohldo!lwrl";
    do
    {
        Count ++;
        std::cout << Count << ". " << SomeString << std::endl;
        if( SomeString == "helloworld!" )
            break;
    } while( std::next_permutation( SomeString.begin( ), SomeString.end( ) ) );

    ::getchar( );
    return( 0 );
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T03:49:12.157

我不确定这个问题是关于什么的。基本上，看起来您正在寻找一种通过整数“编码”排列的方法。但尚不清楚这种编码是否需要与顺序调用生成的排列序列同步`std::next_permutation`。是吗？即您是否要求该数字`176791`编码由`176791`应用程序产生的排列`std::next_permutation`？

排列可以用几种不同的方式用整数编码。正确构造的编码都将占用相同的位数。但是不同的编码可能会使用不同的整数来编码相同的排列。

无论如何，如果您不关心特定的编码方法，那么`N`元素的任何排列都可以按以下方式编码：

*   想象一下排列的规范表示：描述序列元素新位置的索引数组`N`，即`index[old position] = new position`.

*   现在只需将该数组解释为 base 中的 N 位数字`N`。即排列由一个整数值表示

    ```
    index[0]*N^0 +  index[1]*N^1 + index[2]*N^2 + ... + index[N-1]*N^(N-1) 
    ```

基本上，原始排列的规范数组表示被*打包*成一个足够大的整数值。（如果`N`是 2 的幂，则此表示将简单地将原始数组值打包到位数组中）。打包和拆包都是一个简单的过程。

**不幸的是，我上面描述的表示结构并不完善。**它需要比必要更多的位，因为它试图“无损”编码`index`具有非唯一值的数组。置换的有效表示在索引数组中不会有重复值。这立即意味着上述表示是过度的。更紧凑的表示应该是可能的。无论如何，这应该是一个经过充分研究的主题，一个简单的谷歌搜索应该会找到很多关于编码排列的信息。

* * *

这是一个 SO 链接，提供了对该主题的更深入分析

[快速排列 -> 数字 -> 排列映射算法](https://stackoverflow.com/questions/1506078/fast-permutation-number-permutation-mapping-algorithms)

# windows - 尝试使用 boost 文件系统。找不到 -lboost_system

> ID：13618423
> 
> 赞同：0
> 
> 时间：2012-11-29T03:38:08.777
> 
> 标签：windows, boost, codeblocks

我已经查看了文件库以获取 boost，它确实有文件系统，但它没有任何用于系统的东西。但是，当我在不包含系统的情况下运行代码时，我收到一条错误消息，指出文件系统需要 boost 系统才能正常运行。我正在使用 GNU GCC 编译器运行 Code::Blocks 10.05。我尝试在我的项目的链接中包含 -lboost_system 但它也找不到系统。如何解决这个问题？

# javascript - Javascript：生成随机数并存储在多维数组中

> ID：13618424
> 
> 赞同：0
> 
> 时间：2012-11-29T03:38:25.170
> 
> 标签：javascript, arrays, random, associative

我正在尝试生成随机数并将数字存储在多维数组o中（需要示例帮助）

```
[ 8, 52, 9, 34, 51, 19 ] 
[ 8, 52, 9, 34, 51, 19 ]
[ 8, 52, 9, 34, 51, 19 ] 
```

1.  我想要实现的是从数组中生成一组 6 个数字并将它们存储在 numOfResults 集中。
2.  我想避免在每个集合中生成重复的数字。

当前代码生成集合，但 3 个集合是相同的。

```
[ [ 8, 52, 9, 34, 51, 19 ], [ 8, 52, 9, 34, 51, 19 ], [ 8, 52, 9, 34, 51, 19 ] ] 
```

**我的代码如下：**

```
 var yourNum = {
    yP : [3, 5, 8, 9, 12, 14, 17, 19, 21, 23, 26, 27, 29, 31, 32, 33, 34, 35, 36, 37, 38, 39, 41, 42, 43, 44, 45, 46, 48, 50, 51, 52, 53, 54, 55, 57, 59],
    numOfResults: [],
    yPvalue : [],
    generateRandom: function () {
        var nRandom = Math.floor(Math.random() * (yourNum.yP.length));
        return nRandom;
    }
};

var genResults = function (num) {
    var count = num; 
    for (var i = 0; i < count; i++) {
        for (var j = 0; j < 6; j++) {
            if(yourNum.yPvalue.length < 6) {
                yourNum.yPvalue.push(yourNum.yP[yourNum.generateRandom()]);
            }
        }
        yourNum.numOfResults[i] = yourNum.yPvalue;
    }
    console.log("---------NEW---------");
    console.log(yourNum.numOfResults);
};

//var random = Math.floor(Math.random() * (yourNum.yP.length));
//var yPvalue = yourNum.yP[random];
//console.log("Your random number" + " " + random + " " + yPvalue);

genResults(3); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T03:42:47.910

你需要

```
yourNum.yPvalue = []; 
```

后

```
yourNum.numOfResults[i] = yourNum.yPvalue; 
```

否则，多维数组的成员都将是同一个数组。因此，当您的程序尝试获取接下来的六个随机数时，什么都不会发生，因为它们会使数组的长度超过六个元素，这是您的程序阻止的。

# c - opengl 使聚光灯像手电筒一样

> ID：13618425
> 
> 赞同：3
> 
> 时间：2012-11-29T03:38:51.727
> 
> 标签：c, opengl, graphics

我正在尝试在opengl中模仿手电筒。基本上我希望聚光灯与相机处于相同的位置，并指向相机指向的相同方向。

这是我的代码：

```
gluLookAt (xAt, yAt, zAt, xLookAt, yLookAt, zLookAt, 0, 1, 0);
light_pos [4] = {xAt, yAt, zAt, 1.0};
glLightfv (GL_LIGHT0, GL_POSITION, light_pos);

spotDir [] = {xLookAt - xAt, yLookAt - yAt, zLookAt - zAt};
glLightfv (GL_LIGHT0, GL_SPOT_DIRECTION, spotDir); 
```

我已调用初始化灯光，并计算了所有对象的表面法线。

现在上面的代码可以工作了，当相机移动时，聚光灯随之而来。但是，当我将相机移近一个物体时，物体上的光线就会减少。当我将相机移得更远时，物体会变得更亮。

我希望相反的情况发生——相机离物体越远，照射在物体上的光就越少。这是怎么做到的？或者这不是opengl聚光灯的行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T04:29:50.010

所以我研究了这一点，显然修改光的衰减会产生正确的结果。希望这可以帮助任何偶然发现这一点的人。

# javascript - 如何检查其父标签中是否允许嵌套标签？

> ID：13618427
> 
> 赞同：1
> 
> 时间：2012-11-29T03:38:56.937
> 
> 标签：javascript, jquery, html

如果我将 JavaScript 中的标签添加到另一个标签，我如何检查它是否有效。

IE 我有这个块：

使用 JQuery：

`var fragment = $("<p>Some text is <strong>here</strong></p>");`

有没有办法使用 JavaScript 或一些库来查询这个片段并获取允许的标签列表？

例如：

`fragment.wrapInner('<em></em>');`

将生成有效的 HTML，但是：

`fragment.wrapInner('<div></div>');`

不会，因为 P 标签内不允许使用 div。

我想这样做的原因与 Range#surroundContents 有关，因为它不允许我`span`直接在 div 内插入标签，只能在标签内插入标签`p`，反之亦然，但我需要一个解决方案，将正确的类型元素插入到标签。IE`div`不应该插入`p`，反之亦然，但这些远非我需要关心的唯一情况，因为我正在处理通用内容，所以我需要一个通用的解决方案。

# bison - lex中无法识别的规则错误

> ID：13618437
> 
> 赞同：1
> 
> 时间：2012-11-29T03:39:43.640
> 
> 标签：bison, yacc, lex, flex-lexer

我有一个 lex 模式文件 (test.l)，我想在其中识别 IPv4 地址和 IPv6 地址的模式。

目前我使用二进制模式符号，例如

```
src -ip of 192.168.156.203 is to be written as 
1 src-ip {11000000 10101000 10011100 11001011} 
```

其中“1”是我用于分类的标签。我想扩展此模式以包括 IPv4 地址（点分十进制）和 IPv6 地址（四进制表示法）

目前我的词法分析器文件（test.l）的相关部分如下所示。

```
 BINARY_PATTERN [ \t]*[ \t0-1\-\*]+[ \t]*

    <S_src_ip>\{{BINARY_PATTERN}\}  {

         /*Some code here*/
    } 
```

我稍微扩展了代码如下。

```
dec-octet     [0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5]
IPv4address   {dec-octet}\.{dec-octet}\.{dec-octet}\.{dec-octet}

h16           [0-9A-Fa-f]{1,4}
ls32          {h16}:{h16}|{IPv4address}
IPv6address   ({h16}:){6}{ls32}|
              ::({h16}:){5}{ls32}|
              ({h16})?::({h16}:){4}{ls32}|
              (({h16}:){0,1}{h16})?::({h16}:){3}{ls32}|
              (({h16}:){0,2}{h16})?::({h16}:){2}{ls32}|
              (({h16}:){0,3}{h16})?::{h16}:{ls32}|
              (({h16}:){0,4}{h16})?::{ls32}|
              (({h16}:){0,5}{h16})?::{h16}|
              (({h16}:){0,6}{h16})?::

<S_dst_ip>\{{BINARY_PATTERN}\}|\{{IPv4address}\}|\{{IPv6address}\}   { 

                /*Some code here*/

    } 
```

支持 IPv4 地址和 IPv6 地址。当我尝试编译代码时

```
flex --header-file="test.h" test.l 
test.l:665: unrecognized rule 
```

错误在行`"<S_dst_ip>\{{BINARY_PATTERN}\}|\{{IPv4address}\}|\{{IPv6address}\}"`

有人可以向我指出错误是什么或如何解决吗？

有人可以指出错误是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T23:51:18.827

问题可能与您对`IPv6address`多行的定义有关——这样的定义只会到行的末尾，所以之后的额外行会导致问题。我希望这些行有错误......

# perl - 如何解释替换？

> ID：13618439
> 
> 赞同：0
> 
> 时间：2012-11-29T03:39:53.547
> 
> 标签：perl

```
$test='abc="def"';
$replacement='$1="ghj"';
$test =~ s/(.+)="(.+)"/"$replacement/;
print $test; 
```

它打印：

```
$1=ghj 
```

我该如何对待`$replacement`被解释？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T03:41:37.823

您将`/e`修饰符添加到您的正则表达式。您还需要修改替换字符串，以便对其进行正确评估。需要双重评估来插入变量。

```
my $test='abc="def"';
my $replacement='"$1=ghj"';
$test =~ s/(.+)="(.+)"/$replacement/ee;
print $test; 
```

**输出：**

```
abc=ghj 
```

应该注意的是，这有点不安全，特别是如果其他人会影响您的替换价值。然后他们可以在您的系统上执行任意代码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-29T03:56:48.330

这个问题大约有3个答案。

*   您的替换“字符串”实际上是要在匹配时评估以生成替换字符串的代码。也就是说，它更好地表示为一个函数：

 *```
my $test = 'abc="def"';
my $replacement = sub { $1 . '="ghj"' };
$test =~ s/(.+)="(.+)"/$replacement->()/e;
print $test; 
```

*   如果您不需要任意 Perl 表达式的全部功能（或者如果您的替换字符串来自外部源），您也可以将其视为模板来填充匹配结果。有一个模块以类似 JavaScript 的`replace`函数的形式封装了它，[Data::Munge](https://metacpan.org/module/Data%3a%3aMunge)：

 *```
use Data::Munge qw(replace);
my $test = 'abc="def"';
my $replacement = '$1="ghj"';
$test = replace $test, qr/(.+)="(.+)"/, $replacement;
print $test; 
```

*   最后，您可以将 Perl 代码表示为要[`eval`](http://perldoc.perl.org/functions/eval.html)'d 的字符串。这不仅效率低下，而且还充满了引用问题（您必须确保 $replacement 中的所有内容在语法上都是有效的 Perl）和安全漏洞（如果 $replacement 是在运行时生成的，特别是如果它来自外部源）。我最不喜欢的方法：

 *```
my $test = 'abc="def"';
my $replacement = '$1 . "=\\"ghj\\""';
$test =~ s/(.+)="(.+)"/eval $replacement/e;
print $test; 
```

（这`s//eval $foo/e`部分也可以写成`s//$foo/ee`。我不喜欢这样做，因为`eval`它是邪恶的，不应该比现在更隐蔽。）***

# internet-explorer - IE9 a > span 不会触发右键链接菜单

> ID：13618440
> 
> 赞同：5
> 
> 时间：2012-11-29T03:40:08.867
> 
> 标签：internet-explorer, anchor, html, right-click

好吧，这将是一个有趣的...

几乎我似乎遇到了一个有趣的 IE 错误（功能），涉及跨度位于锚点内时，例如。

```
<a href='#'>
    <span style="float:left;">Super cool link</span>
    <span style="float:right;">10</span>
</a> 
```

在 IE 中，您似乎可以左键单击，但无法右键单击该项目并获取链接菜单，此问题似乎在 Google 的服务中也存在，例如。

![IE 错误示例](../Images/f7e9546368c0ea98542b15378cc5b769.png)

我想知道是否有人可以阐明

1.  发生这种情况的原因
2.  对此的解决方案或解决方法

到目前为止，我已经尝试`&nbsp;`在锚点中添加 a 并摆弄 z-indexes 无济于事。

我能找到的唯一解决方案/解决方法是，如果您删除 Doctype，问题似乎就消失了。（不会发生）

忍者编辑 - 您似乎也无法按 CTRL + 单击

好的另一个编辑：

看起来像`display: block;`跨度杀死它 - [http://jsfiddle.net/vdfhz/4/](http://jsfiddle.net/vdfhz/4/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T02:11:24.867

您的锚元素的 hasLayout（IE 属性）为 false。

当您在 hasLayout=false 的锚点中只有 hasLayout=true 的元素时，就会出现此问题。

```
a *{float:left;} 
```

演示（在 IE 中运行）：http: [//jsfiddle.net/52A6L/](http://jsfiddle.net/52A6L/)（注意链接周围的边框，这是您的可点击区域）

关于 hasLayout： http: [//msdn.microsoft.com/en-us/library/ie/ms530764 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ie/ms530764(v=vs.85).aspx)

您可以通过为锚点设置布局或不为跨度设置布局来解决这种情况。没有跨度的布局：http: [//jsfiddle.net/52A6L/1/](http://jsfiddle.net/52A6L/1/) 有锚的布局：http: [//jsfiddle.net/52A6L/2/](http://jsfiddle.net/52A6L/2/)

这些例子只是例子。请参阅 MSDN 上的文档并选择对其余布局造成最少麻烦的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T04:12:17.197

好的，回答我自己的问题，应该花更多时间在上面。

看起来如果除了`display: inline;`跨度之外还有其他任何东西，它就不起作用。

[http://jsfiddle.net/vdfhz/9/](http://jsfiddle.net/vdfhz/9/)

感谢大家的尝试，希望这对将来的人有所帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T21:59:11.413

首先我需要说我无法测试以下信息是否会对您有所帮助，因为我现在没有 IE。

`zoom : 1` 但是，如果您添加到行为错误的元素，IE 中的许多错误都可以解决 。

有时可能导致 IE 中的错误行为的另一件事是，当元素被呈现为内联元素内的块元素时。因此，如果`<a>`仍然是内联的并且`<span>`呈现为块元素，这可能是您的问题的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T21:47:51.000

你总是可以使用 display:inline-block; 只是为了安全起见。

此外，如果您在包装元素（如 a 标签）中有浮动元素，则需要将其清除。

因此，一种快速而肮脏的方法是：

```
<a href='#'>
    <span style="float:left;">Super cool link</span>
    <span style="float:right;">10</span>
    <div style="clear:both;"></div>
</a> 
```

希望这会有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-29T03:46:44.847

不知道为什么它会关闭，但是使用段落标签怎么样？

# gdb - 如何使用 gdb 对运行另一个程序的 ELF 进行逆向工程？

> ID：13618442
> 
> 赞同：2
> 
> 时间：2012-11-29T03:40:33.727
> 
> 标签：gdb, reverse-engineering

我是初学者，在 RE 中遇到了一些麻烦。我有一个 ELF“炸弹”和一个未知文件“model.abc”。运行炸弹的正确方法是：

`bomb model.abc`

现在我想在运行时使用 gdb 来查看一些地址的值。谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T03:42:01.337

首先`gdb`从 shell 提示符开始：

```
$ gdb bomb 
```

然后`(gdb)`使用您想要的命令行从提示符运行您的程序：

```
(gdb) run model.abc 
```

您需要以这种方式启动程序，因为`gdb`不允许您在命令行上为程序指定命令*行*参数`gdb`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T11:51:11.957

使用参数调试程序的另一种更方便的方法：

```
gdb --args program <arguments> 
```

如果您没有符号，则必须从入口点开始。要弄清楚我们的位置，请使用：

```
(gdb) info file
Symbols from "/.../tesprog".
Local exec file:
    `/.../tesprog', file type elf32-i386.
    Entry point: 0x804abc0 
```

然后你可以在运行前设置断点：

```
break *0x804abc0 
```

请注意，该条目通常是库启动代码（ctr0.s），可能需要一段时间才能到达程序员编写的实际代码。

# android - 如何在android中的多个imageview上进行捏缩放和滑动？

> ID：13618447
> 
> 赞同：3
> 
> 时间：2012-11-29T03:41:01.967
> 
> 标签：android, android-viewpager, pinchzoom

我在寻呼机中制作多个图像视图，并对其进行缩放功能。但是，如果我在寻呼机中的 imageview 上保持缩放功能而不是在 zoom.so 上剪切位图。那么如何在没有剪切的情况下在 imageview 中显示整个缩放位图。我在寻呼机中使用 Mike Ortiz 的 TouchImageView 进行缩放。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T10:07:19.287

主要活动

```
public class MainActivity extends Activity {
private AwesomePagerAdapter awesomeAdapter;
public static NonSwipeableViewPager awesomePager;
RelativeLayout v;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    awesomeAdapter = new AwesomePagerAdapter();
    awesomePager = (NonSwipeableViewPager) findViewById(R.id.awesomepager);
    awesomePager.setAdapter(awesomeAdapter);
}
public class AwesomePagerAdapter extends PagerAdapter{

    private int NUM_VIEWS =2;
    @Override
    public int getCount() {
        return NUM_VIEWS ;
    }

    @Override
    public Object instantiateItem(View container, int position) {
        if(position == 0){
        TouchImageView.b = true;
        LayoutInflater inflater = (LayoutInflater)getSystemService(LAYOUT_INFLATER_SERVICE);
        v = (RelativeLayout) inflater.inflate(R.layout.item_gallery_image, null);
        TouchImageView tm = (TouchImageView) v.findViewById(R.id.image);
        Bitmap bm = BitmapFactory.decodeResource(getResources(),
                R.drawable.swami);
        tm.setImageBitmap(bm);
        ((ViewPager) container).addView(v, 0);
        }else if(position == 1){
            TouchImageView.b = true;
            LayoutInflater inflater = (LayoutInflater)getSystemService(LAYOUT_INFLATER_SERVICE);
            v = (RelativeLayout) inflater.inflate(R.layout.item_gallery_image, null);
            TouchImageView tm = (TouchImageView) v.findViewById(R.id.image);
            Bitmap bm = BitmapFactory.decodeResource(getResources(),
                    R.drawable.swami);
            tm.setImageBitmap(bm);
            ((ViewPager) container).addView(v, 0);
        }
        return v;
    }
    @Override
    public void destroyItem(View container, int position, Object view) {
        View v = (View) view;
        ((ViewPager) container).removeView(v);
        TouchImageView.b = true;
    }
    @Override
    public boolean isViewFromObject(View view, Object object) {
        return view == ((View) object);
    }

}
 } 
```

刷卡器

```
public class NonSwipeableViewPager extends ViewPager {

private boolean enabled = true;

public NonSwipeableViewPager(Context context, AttributeSet attrs) {
    super(context, attrs);
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    if (TouchImageView.b) {
        return super.onTouchEvent(event);
    }
    return false;
}

@Override
public boolean onInterceptTouchEvent(MotionEvent event) {
    if (TouchImageView.b) {

        try {
            enabled = super.onInterceptTouchEvent(event);
        } catch (Exception e) {
        }
        return enabled;
    }
    return false;
}

public void setPagingEnabled(boolean enabled) {
    this.enabled = enabled;
}

} 
```

触摸图像视图

```
public class TouchImageView extends ImageView {
Matrix matrix = new Matrix();

// We can be in one of these 3 states
static final int NONE = 0;
static final int DRAG = 1;
static final int ZOOM = 2;
int mode = NONE;
static  NonSwipeableViewPager PagerLeft;
// Remember some things for zooming
PointF last = new PointF();
PointF start = new PointF();
float minScale = 1f;
float maxScale = 3f;
float[] m;
static boolean b =false, c= false;
float redundantXSpace, redundantYSpace;

float width, height;
static final int CLICK = 3;
float saveScale = 1f;
float right, bottom, origWidth, origHeight, bmWidth, bmHeight;

ScaleGestureDetector mScaleDetector;

Context context;
ViewGroup vp;

public TouchImageView(Context context) {
    super(context);
    sharedConstructing(context);
}

public TouchImageView(Context context, AttributeSet attrs) {
    super(context, attrs);
    sharedConstructing(context);
}

public void setChild(ViewGroup vp) {
    this.vp = vp;
}

private void sharedConstructing(Context context) {
    super.setClickable(true);
    this.context = context;
    mScaleDetector = new ScaleGestureDetector(context, new ScaleListener());
    matrix.setTranslate(1f, 1f);
    m = new float[9];
    setImageMatrix(matrix);
    setScaleType(ScaleType.MATRIX);
    setOnTouchListener(new OnTouchListener() {
        @Override
        public boolean onTouch(View v, MotionEvent event) {
            mScaleDetector.onTouchEvent(event);
            matrix.getValues(m);
            float x = m[Matrix.MTRANS_X];
            float y = m[Matrix.MTRANS_Y];
            /*Log.v("log_tag",  event.getX()+" matrix "
                    + x);*/
            PointF curr = new PointF(event.getX(), event.getY());
            switch (event.getAction()) {
            case MotionEvent.ACTION_DOWN:
                TouchImageView.b = false;
                Log.v("event","ACTION_DOWN");
                last.set(event.getX(), event.getY());
                start.set(last);
                mode = DRAG;
                break;
            case MotionEvent.ACTION_MOVE:
                if (mode == DRAG) {
                    float deltaX = curr.x - last.x;
                    float deltaY = curr.y - last.y;
                    float scaleWidth = Math.round(origWidth * saveScale);
                    float scaleHeight = Math.round(origHeight * saveScale);
                    if (scaleWidth < width) {
                        deltaX = 0;
                        if (y + deltaY > 0){
                            TouchImageView.b = true;
                            Log.v("event","ACTION_MOVE  scaleWidth < width   y + deltaY > 0");
                            deltaY = -y;
                        }
                        else if (y + deltaY < -bottom){
                            TouchImageView.b = false;
                            Log.v("event","else ACTION_MOVE  scaleWidth < width   y + deltaY < -bottom");
                            deltaY = -(y + bottom);
                        }else{
                            TouchImageView.b = false;
                        }
                    } else if (scaleHeight < height) {
                        deltaY = 0;
                        if (x + deltaX > 0){
                            TouchImageView.b = true;
                            Log.v("event","ACTION_MOVE  scaleWidth < height x + deltaX > 0");
                            deltaX = -x;
                        }
                        else if (x + deltaX < -right){
                            TouchImageView.b = true;
                            Log.v("event","ACTION_MOVE  scaleWidth < height x + deltaX < -right");
                            deltaX = -(x + right);
                        }else{
                            TouchImageView.b = false;
                        }
                    }else {
                        if (x + deltaX > 0){
                            TouchImageView.b = true;
                            Log.v("event","scaleWidth > width");
                            deltaX = -x;
                        }
                        else if (x + deltaX < -right){
                            TouchImageView.b = true;
                            Log.v("event","else scaleWidth > width");
                            deltaX = -(x + right);
                        }
                        else{
                            TouchImageView.b = true;
                        }
                        if (y + deltaY > 0){
                            TouchImageView.b = true;
                            Log.v("event","y + deltaY");
                            deltaY = -y;
                        }
                        else if (y + deltaY < -bottom){
                            TouchImageView.b = true;
                            Log.v("event","y + deltaY < -bottom");
                            deltaY = -(y + bottom);
                        }else{
                            TouchImageView.b = false;
                        }
                    }
                    /*Log.v("log_tag",height + " matrix "
                            + (int) getHeightFromMatrix(matrix, TouchImageView.this));*/
                    matrix.postTranslate(deltaX, deltaY);
                    last.set(curr.x, curr.y);
                }
                break;

            case MotionEvent.ACTION_UP:
                Log.v("event","ACTION_UP");
                TouchImageView.b = true;
                mode = NONE;
                int xDiff = (int) Math.abs(curr.x - start.x);
                int yDiff = (int) Math.abs(curr.y - start.y);
                if (xDiff < CLICK && yDiff < CLICK){
                    Log.v("event","ACTION_UP  xDiff < CLICK && yDiff < CLICK");
                    performClick();
                }
                break;

            case MotionEvent.ACTION_POINTER_UP:
                //TouchImageView.b = false;
                Log.v("event","ACTION_POINTER_UP");
                mode = NONE;
                break;
            case MotionEvent.ACTION_POINTER_3_DOWN:
                Log.v("event","ACTION_HOVER_MOVE");
                break;
            }
            /*getLayoutParams().height = (int) getWidthFromMatrix(matrix,
                    TouchImageView.this);
            getLayoutParams().width = (int) getHeightFromMatrix(matrix,
                    TouchImageView.this);*/
            setImageMatrix(matrix);
            invalidate();
            return true;
        }
    });
}
@Override
public void setImageBitmap(Bitmap bm) {
    super.setImageBitmap(bm);
    if (bm != null) {
        bmWidth = bm.getWidth();
        bmHeight = bm.getHeight();
    }
}

public void setMaxZoom(float x) {
    maxScale = x;
}

private class ScaleListener extends
        ScaleGestureDetector.SimpleOnScaleGestureListener {
    @Override
    public boolean onScaleBegin(ScaleGestureDetector detector) {
        mode = ZOOM;
        return true;
    }

    @SuppressLint("NewApi")
    @TargetApi(8)
    @Override
    public boolean onScale(ScaleGestureDetector detector) {
        float mScaleFactor = (float) Math.min(
                Math.max(.95f, detector.getScaleFactor()), 1.05);
        float origScale = saveScale;
        saveScale *= mScaleFactor;
        if (saveScale > maxScale) {
            saveScale = maxScale;
            mScaleFactor = maxScale / origScale;
        } else if (saveScale < minScale) {
            saveScale = minScale;
            mScaleFactor = minScale / origScale;
        }
        right = width * saveScale - width
                - (2 * redundantXSpace * saveScale);
        bottom = height * saveScale - height
                - (2 * redundantYSpace * saveScale);
        if (origWidth * saveScale <= width
                || origHeight * saveScale <= height) {
            matrix.postScale(mScaleFactor, mScaleFactor, width / 2,
                    height / 2);
            if (mScaleFactor < 1) {
                matrix.getValues(m);
                float x = m[Matrix.MTRANS_X];
                float y = m[Matrix.MTRANS_Y];
                if (mScaleFactor < 1) {
                    if (Math.round(origWidth * saveScale) < width) {
                        if (y < -bottom)
                            matrix.postTranslate(0, -(y + bottom));
                        else if (y > 0)
                            matrix.postTranslate(0, -y);
                    } else {
                        if (x < -right)
                            matrix.postTranslate(-(x + right), 0);
                        else if (x > 0)
                            matrix.postTranslate(-x, 0);
                    }
                }
            }
        } else {
            matrix.postScale(mScaleFactor, mScaleFactor,
                    detector.getFocusX(), detector.getFocusY());
            matrix.getValues(m);
            float x = m[Matrix.MTRANS_X];
            float y = m[Matrix.MTRANS_Y];
            if (mScaleFactor < 1) {
                if (x < -right)
                    matrix.postTranslate(-(x + right), 0);
                else if (x > 0)
                    matrix.postTranslate(-x, 0);
                if (y < -bottom)
                    matrix.postTranslate(0, -(y + bottom));
                else if (y > 0)
                    matrix.postTranslate(0, -y);
            }
        }
        return true;
    }
}

@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    super.onMeasure(widthMeasureSpec, heightMeasureSpec);
    width = MeasureSpec.getSize(widthMeasureSpec);
    height = MeasureSpec.getSize(heightMeasureSpec);
    // Fit to screen.
    float scale;
    float scaleX = (float) width / (float) bmWidth;
    float scaleY = (float) height / (float) bmHeight;
    scale = Math.min(scaleX, scaleY);
    matrix.setScale(scale, scale);
    setImageMatrix(matrix);
    saveScale = 1f;

    // Center the image
    redundantYSpace = (float) height - (scale * (float) bmHeight);
    redundantXSpace = (float) width - (scale * (float) bmWidth);
    redundantYSpace /= (float) 2;
    redundantXSpace /= (float) 2;

    matrix.postTranslate(redundantXSpace, redundantYSpace);

    origWidth = width - 2 * redundantXSpace;
    origHeight = height - 2 * redundantYSpace;
    right = width * saveScale - width - (2 * redundantXSpace * saveScale);
    bottom = height * saveScale - height
            - (2 * redundantYSpace * saveScale);
    setImageMatrix(matrix);
}

public static void setPager(NonSwipeableViewPager pagerLeft) {
    PagerLeft = pagerLeft;
}
  } 
```

主要的

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:gravity="fill"
>
<com.example.swipegallery.NonSwipeableViewPager
    android:id="@+id/awesomepager"
    android:layout_width="fill_parent"
    android:layout_height="match_parent" /> 
```

风俗

```
<?xml version="1.0" encoding="utf-8"?>
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:gravity="fill"
>

   <com.example.swipegallery.TouchImageView
    android:id="@+id/image"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_centerInParent="true"
    android:layout_gravity="center"
     /> 

</RelativeLayout> 
```

# php - 导入 CSV 是否对浏览器有问题？

> ID：13618448
> 
> 赞同：0
> 
> 时间：2012-11-29T03:41:11.600
> 
> 标签：php, cakephp, browser, csv, import

我正在开发一个允许导入 csv 文件的应用程序（使用 cakephp）。我正在运行一台装有 Windows 7 七操作系统的机器。导入 CSV 对我来说看起来不错，但在我的客户端上说它不能正常工作......这是他使用的浏览器

视窗：

IE 6.0 Safari 4

苹果电脑

Safari 6 火狐 9

我现在的问题是，浏览器真的很重要吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T04:56:27.017

没有浏览器没关系，它只是一个普通的文件上传，最好的方法是获取您的客户端正在使用的确切 csv 并尝试上传和打印文件的数据，问题似乎在 csv 文件或代码中，但绝对不在浏览器中。

# html - 图像悬停在 Chrome 中的 Stange 问题

> ID：13618450
> 
> 赞同：0
> 
> 时间：2012-11-29T03:41:36.853
> 
> 标签：html, css, image, google-chrome, hover

我有一个 html/css 网站，当您将鼠标悬停在图像上时，它会使用一种效果来放大图像。它工作正常，但在使用 Chrome 时，它​​会导致图像在页面加载时抖动和调整大小。在其他浏览器中似乎没有这样做，在 Dreamweaver 浏览器测试中也没有这样做。如果我删除效果页面加载正常。有什么想法可能导致这种情况吗？

这是该页面的链接： http: [//carissalyn.com/Landing.html](http://carissalyn.com/Landing.html)

这是图像的html：

```
<tr>
<td><a href="" class="imghover"><img src="images/leaf.jpg" alt="portrait" class="border"></a></td>
<td><a href="" class="imghover"><img src="images/DSC_2280-Edit-Edit-Final.jpg"  alt="portrait" class="border"></a></td>
<td><a href="" class="imghover"><img src="images/DSC_2685.jpg" alt="blog" class="border"></a></td>
</tr> 
```

这是悬停的CSS：

```
.imghover img{
-webkit-transition-duration: 1s; 
-moz-transition-duration: 1s; 
-o-transition-duration: 1s; 
}
.imghover img:hover{
-webkit-transform:scale(1.1);
-moz-transform:scale(1.1); 
-o-transform:scale(1.1); 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T22:56:46.460

我遇到了类似的问题。[在此](http://www.mennovanslooten.nl/blog/post/78)站点上找到了修复程序。这有点骇人听闻，但似乎有效。关键是在缩放的同时添加一点点旋转。

```
.imghover img:hover {
    transform: scale(2) rotate(0.1deg);
} 
```

# .net - .NET 的 HttpClient 节流

> ID：13618454
> 
> 赞同：6
> 
> 时间：2012-11-29T03:41:49.267
> 
> 标签：.net, async-ctp, throttling, dotnet-httpclient

我正在开发一个基于 .NET4 的应用程序，它必须请求第三方服务器才能从它们那里获取信息。我正在使用 HttpClient 发出这些 HTTP 请求。

我必须在短时间内创建一百或一千个请求。我想将这些请求的创建限制在一个限制（由常量或其他东西定义），这样其他服务器就不会收到很多请求。

我已经检查了[这个链接](http://msdn.microsoft.com/en-us/library/ee789351.aspx)，它显示了如何减少随时创建的任务数量。

这是我的非工作方法：

```
// create the factory
var factory = new TaskFactory(new LimitedConcurrencyLevelTaskScheduler(level));

// use the factory to create a new task that will create the request to the third-party server
var task = factory.StartNew(() => {
    return new HttpClient().GetAsync(url);
}).Unwrap(); 
```

当然，这里的问题是，即使当时创建了一个任务，也会同时创建和处理很多请求，因为它们运行在另一个调度程序中。我找不到将调度程序更改为 HttpClient 的方法。

我应该如何处理这种情况？我想将创建的请求数量限制在一定范围内，但不要阻止等待这些请求完成。

这可能吗？有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T13:33:48.977

您可以考虑创建一个新的 DelegatingHandler 来放置在 HTTPClient 的请求/响应管道中，该管道可以计算待处理请求的数量。

通常使用单个 HTTPClient 实例来处理多个请求。与 HttpWebRequest 不同，释放 HttpClient 实例会关闭底层 TCP/IP 连接，因此如果要重用连接，则确实需要重用 HTTPClient 实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T18:38:30.183

如果您可以使用 .Net 4.5，一种方法是使用[`TransformBlock`](http://msdn.microsoft.com/en-us/library/hh194782)TPL Dataflow 并设置其`MaxDegreeOfParallelism`. 就像是：

```
var block = new TransformBlock<string, byte[]>(
    url => new HttpClient().GetByteArrayAsync(url),
    new ExecutionDataflowBlockOptions { MaxDegreeOfParallelism = level });

foreach (var url in urls)
    block.Post(url);

block.Complete();

var result = new List<byte[]>();

while (await block.OutputAvailableAsync())
    result.Add(block.Receive()); 
```

还有另一种看待这个问题的方式，通过[`ServicePointManager`](http://msdn.microsoft.com/en-us/library/system.net.servicepointmanager). 使用该类，您可以设置限制`MaxServicePoints`（一次可以连接多少个服务器）和`DefaultConnectionLimit`（每个服务器可以有多少个连接）。这样，您可以`Task`同时启动所有 s，但实际上只有有限数量的 s 会做某事。虽然限制`Task`s 的数量（例如，通过使用 TPL 数据流，正如我上面所建议的）将很可能更有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T04:25:51.357

您可能会考虑启动一组固定的线程。每个线程串行执行客户端网络操作；可能还会在某些点暂停以进行节流。这将为您提供对加载的特定控制；您可以更改节流策略并更改线程数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T04:13:12.813

首先，您应该考虑根据网站对工作负载进行分区，或者至少公开一个抽象，让您选择如何对 url 列表进行分区。例如，一种策略可以是二级域，例如 yahoo.com、google.com。

另一件事是，如果您要进行认真的爬网，则可能要考虑在云上进行。这样，云中的每个节点都可以爬取不同的分区。当你说“短时间”时，你已经为失败做好了准备。你需要确定你想要达到的目标。

良好分区的另一个关键好处是，您还可以避免在高峰时段访问服务器并在其路由器级别冒 IP 禁令的风险，以防网站不简单地限制您。

# android - PhoneGap 转换 - HTML 到 .apk

> ID：13618455
> 
> 赞同：2
> 
> 时间：2012-11-29T03:41:56.820
> 
> 标签：android, cordova, camera

我正在使用[https://build.phonegap.com](https://build.phonegap.com)将 HTML 应用程序转换为 .apk ，并且从我的文件选择器中一切正常。

```
<input name="file" type="file" id="file"> 
```

我希望能够从相机和文件系统中仅选择图像（它是否可以选择更多 - 但它是我正在寻找的图像）。

在网络版本[http://carbonyzed.co.uk/websites/assent/1/photos.html](http://carbonyzed.co.uk/websites/assent/1/photos.html)这在我的手机上效果很好，但是当转换为 .apk 时，这个功能就丢失了，我似乎找不到此处或在线与此问题相关的任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T15:30:56.283

至少对我来说，输入文件在 Phonegap 中不起作用。

您需要使用 Phonegap API 来获取图片并选择来源，例如照片库、相机或保存的相册。

查看有关 camera.getPicture 的更多信息：http: [//docs.phonegap.com/en/2.1.0/cordova_camera_camera.md.html#camera.getPicture](http://docs.phonegap.com/en/2.1.0/cordova_camera_camera.md.html#camera.getPicture) 以及有关 cameraOptions 方法的 Camera.PictureSourceType 参数：[http://docs.phonegap .com/en/2.1.0/cordova_camera_camera.md.html#cameraOptions](http://docs.phonegap.com/en/2.1.0/cordova_camera_camera.md.html#cameraOptions)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T18:29:50.050

最终像这样使用子浏览器系统

在头上

```
<script src="childbrowser.js"></script> 
```

在身体里

```
<button class="button-big"     onClick="window.plugins.childBrowser.showWebPage('URL_TO_GO_HERE',
                                    { showAddress: false });" style="width: 100%;">UPLOAD     PHOTOS</button> 
```

它有一个标准的文件上传器，比如

```
<input name="file" type="file" id="file"> 
```

然后它让我从根存储中进行选择，适用于 iOS 和 Android 操作系统的 phonegap 2.2 及更高版本

为了捕捉图像，我在头部使用了这个

```
<script type="text/javascript" charset="utf-8" src="json2.js"></script>
<script type="text/javascript" charset="utf-8">

// Called when capture operation is finished
//
function captureSuccess(mediaFiles) {
    var i, len;
    for (i = 0, len = mediaFiles.length; i < len; i += 1) {
        uploadFile(mediaFiles[i]);
    }       
}

// Called if something bad happens.
// 
function captureError(error) {
    var msg = 'An error occurred during capture: ' + error.code;
    navigator.notification.alert(msg, null, 'Uh oh!');
}

// A button will call this function
//
function captureImage() {
    // Launch device camera application, 
    // allowing user to capture up to 2 images
    navigator.device.capture.captureImage(captureSuccess, captureError, {limit: 2});
}

// Upload files to server
function uploadFile(mediaFile) {
    var ft = new FileTransfer(),
        path = mediaFile.fullPath,
        name = mediaFile.name;

    ft.upload(path,
        "http://my.domain.com/upload.php",
        function(result) {
            console.log('Upload success: ' + result.responseCode);
            console.log(result.bytesSent + ' bytes sent');
        },
        function(error) {
            console.log('Error uploading file ' + path + ': ' + error.code);
        },
        { fileName: name });   
}

</script> 
```

这在体内

```
<input type="button" class="button-big" style="width: 100%;" onclick="captureImage();" value="TAKE PHOTO"> 
```

复制和过去，它是一个梦想，

在这张图片中查看

![在此处输入图像描述](../Images/63e9ba273730eca5b44f178d20e79d50.png)

任何问题，只需电子邮件评论，

或给我发电子邮件... support@carbonyzed.co.uk

# jquery - 从函数获取 UI 对话框中的最新字段值

> ID：13618460
> 
> 赞同：0
> 
> 时间：2012-11-29T03:42:38.467
> 
> 标签：jquery, jquery-ui

基于此链接：[如何构建一个 jQuery 对话框以确认（是/否）可以在应用程序的任何位置工作？](https://stackoverflow.com/questions/7919845/how-to-build-a-jquery-dialog-for-confirmation-yes-no-that-can-work-anywhere-in)
我有以下代码，使用 IE 8

HTML

```
<ol>
    <li>
        <span class="title">Item 1</span>
        <span class="test">test dialog</span>
    </li>
</ol> 
```

Javascript

```
function MergeRenameDialog(button1, button2) {
    var btns = {};
    btns[button1] = function() {
        alert($('#mergedPreDefinedNewFilterName').val())
        $(this).dialog("close");
    };
    btns[button2] = function() {
        // Do nothing
        $(this).dialog("close");
    };
    $("<div id='MergeRenameDiv' style='text-align:left'><label>Keyin your New Filter Name.</label><br><br><input id='mergedPreDefinedNewFilterName' /></div>").dialog({
        autoOpen: true,
        width: 450,
        height: 200,
        modal: true,
        resizable: false,
        position: 'center',
        title: 'xxx',
        modal: true,
        buttons: btns
    });
}
$('.test').click(function() {
    MergeRenameDialog('Check Value ', 'Close ');
}) 
```

在页面加载：
1.点击**测试对话框**，在输入字段中键入一个值，然后点击检查值按钮，它会给你当前输入字段的值，然后对话框将关闭
2.再次点击**测试对话框**，在输入一个**新**值输入字段并单击检查值按钮，它将为您提供以前的**输入**字段值，然后对话框将关闭

JsFiddle[在这里](http://jsfiddle.net/aeris/HHAYS/)

问：如何在对话框中获取**最新**的字段值？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T04:07:58.960

您可以尝试像这样打开对话框

```
<ol>
<li>
    <span class="title">Item 1</span>
    <span class="test">test dialog</span>
</li>
</ol>
<div id='dialogshow'></div>

function MergeRenameDialog(button1, button2) {
document.getElementById('dialogshow').innerHTML = "<div id='MergeRenameDiv' style='text-align:left'><label>Keyin your New Filter Name.</label><br><br><input id='mergedPreDefinedNewFilterName' /></div>";
$( "#dialogshow" ).dialog({
    width: 450,
    height: 300,
    modal: true,
    resizable:false,
    title: 'xxx',
    buttons: {
        Checkvalue: function()
        {
            alert($('#mergedPreDefinedNewFilterName').val());
                            $( this ).dialog( "close" );
        },
        Close: function() {
            $( this ).dialog( "close" );
        }
    }
}); 
```

}

```
$('.test').click(function() {
MergeRenameDialog('Check Value ', 'Close ');
})​; 
```

[检查这个小提琴](http://jsfiddle.net/Dineshkani/HHAYS/8/)

# php - copy() & getcwd() 在本地工作，而不是在线工作

> ID：13618461
> 
> 赞同：0
> 
> 时间：2012-11-29T03:42:43.543
> 
> 标签：php

这行代码在本地对我有用：

```
$copythumb = copy($externalsource, getcwd().'\\img\\covers\\'.$id.'thumb.jpg');
if (!$copythumb) {echo 'Couldn\'t add thumbnail';} 
```

但是当我将它上传到我的服务器时，我只是得到“无法添加缩略图”并且它没有被复制。我试图改变`\\img\\covers\\`，`/img/covers/`但没有运气。我也搞砸`dirname(realpath(__FILE__))`了`$_SERVER['DOCUMENT_ROOT']`

当地的：

```
echo getcwd(); //returns D:\Server\www\project 
```

服务器：

```
echo getcwd(); //returns /storage/content/xx/xxxxxx/xxx.com/public_html/project 
```

如果有人可以提供任何帮助，将非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T04:02:49.520

更改您的 img 或覆盖目录权限

```
<?php
// Read and write for owner, nothing for everybody else
chmod("/somedir/somefile", 0600);

// Read and write for owner, read for everybody else
chmod("/somedir/somefile", 0644);

// Everything for owner, read and execute for others
chmod("/somedir/somefile", 0755);

// Everything for owner, read and execute for owner's group
chmod("/somedir/somefile", 0750);
?> 
```

# php - 将表单发布到 url 和数据库或 url

> ID：13618466
> 
> 赞同：0
> 
> 时间：2012-11-29T03:42:56.333
> 
> 标签：php, javascript, html, forms

我有一个我主持的表格。为了满足我的客户需求，我必须发布到特定的网址。我希望能够同时发布到数据库或谷歌电子表格，这样我就可以跟踪结果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T03:44:59.097

我要做的是将数据记录在数据库中，然后为 Google 电子表格提供一个提要。

Google Docs 电子表格能够通过 HTTP 加载各种格式的数据。您可以提供该数据的提要，电子表格将在新数据可用时自动更新。

例如，在您的电子表格中：

```
=importHTML("http://www.google.com/search?q=define:live", "list", 1) 
```

示例来自：http: [//googlesystem.blogspot.com/2007/09/google-spreadsheets-lets-you-import.html](http://googlesystem.blogspot.com/2007/09/google-spreadsheets-lets-you-import.html)

# xcode - 选择文件供Application Loader将iOS App上传到商店时选择哪个文件？

> ID：13618474
> 
> 赞同：3
> 
> 时间：2012-11-29T03:44:14.210
> 
> 标签：xcode, app-store, application-loader

我正在将 iPhone 和 iPad 应用程序上传到商店，并已完成所有步骤，直到应用程序加载器。我打开应用程序加载器，登录到我的 iTunes Connect 帐户，选择要上传的应用程序，它会显示应用程序的数据。它看起来像这样： ![应用程序加载器 - 个人信息被屏蔽的应用程序信息](../Images/7e973930ae2390cfd8c1ead9baac99ca.png)

我点击选择并... ![在此处输入图像描述](../Images/3de4f7e0463898435e37b3a5747b3b32.png)

我不知道该选择哪个文件，并且花了很多时间在网上冲浪。有人可以帮我吗？

任何帮助都将不胜感激；）

谢谢，
德鲁夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T05:32:53.330

您应该选择您之前创建并使用您的应用商店身份签名的 IPA。

# android - 如何使用 onclickListener 调用 ListFragment

> ID：13618477
> 
> 赞同：0
> 
> 时间：2012-11-29T03:44:55.607
> 
> 标签：android, fragment, onclicklistener

我调用的片段都可以使用。但是我不会用成为List片段。为什么不能直接调用 不是什么错

这是调用的类型

```
 teamp.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {
    FragmentManager AS = getFragmentManager();
    FragmentTransaction USA = AS.beginTransaction();
//planA
    ListFragment UF =(ListFragment) AS.findFragmentById(R.id.frameLayout2);
//planB    
//Fragment UF = AS.findFragmentById(R.id.frameLayout2); 
//planA and planB Two ways to type over will not work
                    if (UF == null) {
                        String title = "Fragment A";
                        templistview usermune = new templistview(title);
                        USA.add(R.id.frameLayout2, usermune);
                        USA.addToBackStack(null);
                        USA.commit();
                        } 
```

这是代码片段控件 templistview.java

```
public class templistview extends ListFragment  {
    String title1;
    TextView textView;
      private ListView listView;
        private View v;

    public templistview() {

    }

    public templistview(String title) {
        this.title1 = title;

    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        super.onCreateView(inflater, container, savedInstanceState);
        View view = inflater.inflate(R.layout.templist, container, false);
        listView = (ListView)view.findViewById(R.id.listView);
        String[] arr = new String[]{
             "A","B","C","D","E","F","G"
        };
        ArrayAdapter<String> adapter = 
            new ArrayAdapter<String>(getActivity(),
                android.R.layout.simple_list_item_1,arr);
        listView.setAdapter(adapter);
        return view;

    }

    @Override
    public void onAttach(Activity activity) {
        super.onAttach(activity);

    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);

    }

    @Override
    public void onStart() {
        super.onStart();

    }

    @Override
    public void onResume() {
        super.onResume();
    }

    @Override
    public void onPause() {
        super.onPause();

    }

    @Override
    public void onStop() {
        super.onStop();
    }

    @Override
    public void onDestroyView() {
        super.onDestroyView();
    }

    @Override
    public void onDestroy() {
        super.onDestroy();
    }

    @Override
    public void onDetach() {
        super.onDetach();
    }

    public static Fragment findFragmentById(int framelayout) {
        // TODO Auto-generated method stub
        return null;
    }

} 
```

这是错误的日志

```
11-29 11:29:30.208: E/AndroidRuntime(22541): FATAL EXCEPTION: main
11-29 11:29:30.208: E/AndroidRuntime(22541): java.lang.RuntimeException: Content has view with id attribute 'android.R.id.list' that is not a ListView class
11-29 11:29:30.208: E/AndroidRuntime(22541):    at android.app.ListFragment.ensureList(ListFragment.java:402)
11-29 11:29:30.208: E/AndroidRuntime(22541):    at android.app.ListFragment.onViewCreated(ListFragment.java:203)
11-29 11:29:30.208: E/AndroidRuntime(22541):    at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:842)
11-29 11:29:30.208: E/AndroidRuntime(22541):    at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:1032)
11-29 11:29:30.208: E/AndroidRuntime(22541):    at android.app.BackStackRecord.run(BackStackRecord.java:622)
11-29 11:29:30.208: E/AndroidRuntime(22541):    at android.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1382)
11-29 11:29:30.208: E/AndroidRuntime(22541):    at android.app.FragmentManagerImpl$1.run(FragmentManager.java:426)
11-29 11:29:30.208: E/AndroidRuntime(22541):    at android.os.Handler.handleCallback(Handler.java:605)
11-29 11:29:30.208: E/AndroidRuntime(22541):    at android.os.Handler.dispatchMessage(Handler.java:92)
11-29 11:29:30.208: E/AndroidRuntime(22541):    at android.os.Looper.loop(Looper.java:137)
11-29 11:29:30.208: E/AndroidRuntime(22541):    at android.app.ActivityThread.main(ActivityThread.java:4511)
11-29 11:29:30.208: E/AndroidRuntime(22541):    at java.lang.reflect.Method.invokeNative(Native Method)
11-29 11:29:30.208: E/AndroidRuntime(22541):    at java.lang.reflect.Method.invoke(Method.java:511)
11-29 11:29:30.208: E/AndroidRuntime(22541):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
11-29 11:29:30.208: E/AndroidRuntime(22541):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
11-29 11:29:30.208: E/AndroidRuntime(22541):    at dalvik.system.NativeStart.main(Native Method) 
```

UI界面代码templist.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
    <ListView  
        android:layout_width="fill_parent" 
        android:layout_height="fill_parent"
        android:id="@+id/listView"
    />
</LinearLayout> 
```

我已经更新了两个位置但仍然错误

```
11-29 11:55:18.583: E/AndroidRuntime(25053): FATAL EXCEPTION: main
11-29 11:55:18.583: E/AndroidRuntime(25053): java.lang.NullPointerException
11-29 11:55:18.583: E/AndroidRuntime(25053):    at com.example.tr.templistview.onCreateView(templistview.java:43)
11-29 11:55:18.583: E/AndroidRuntime(25053):    at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:828)
11-29 11:55:18.583: E/AndroidRuntime(25053):    at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:1032)
11-29 11:55:18.583: E/AndroidRuntime(25053):    at android.app.BackStackRecord.run(BackStackRecord.java:622)
11-29 11:55:18.583: E/AndroidRuntime(25053):    at android.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1382)
11-29 11:55:18.583: E/AndroidRuntime(25053):    at android.app.FragmentManagerImpl$1.run(FragmentManager.java:426)
11-29 11:55:18.583: E/AndroidRuntime(25053):    at android.os.Handler.handleCallback(Handler.java:605)
11-29 11:55:18.583: E/AndroidRuntime(25053):    at android.os.Handler.dispatchMessage(Handler.java:92)
11-29 11:55:18.583: E/AndroidRuntime(25053):    at android.os.Looper.loop(Looper.java:137)
11-29 11:55:18.583: E/AndroidRuntime(25053):    at android.app.ActivityThread.main(ActivityThread.java:4511)
11-29 11:55:18.583: E/AndroidRuntime(25053):    at java.lang.reflect.Method.invokeNative(Native Method)
11-29 11:55:18.583: E/AndroidRuntime(25053):    at java.lang.reflect.Method.invoke(Method.java:511)
11-29 11:55:18.583: E/AndroidRuntime(25053):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
11-29 11:55:18.583: E/AndroidRuntime(25053):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
11-29 11:55:18.583: E/AndroidRuntime(25053):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T03:50:22.157

将 xml 中的列表视图更改为

```
<ListView  
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent"
    android:id="@android:id/list" // == here is the change
/> 
```

并将活动中的列表视图初始化为

```
listView = (ListView)view.findViewById(android.R.id.list); 
```

# jquery - jquery 在使用 load() 加载外部页面时重新初始化。外部页面中也添加了 Jquery lib。

> ID：13618480
> 
> 赞同：0
> 
> 时间：2012-11-29T03:45:22.557
> 
> 标签：jquery

我无法控制外部页面中的代码，因此我无权从外部页面中删除 jquery 库。因此，原始页面插件丢失了。

为了更清楚，页面A在包含jquery.js后有以下代码

```
<script type="text/javascript" src="/jquery.ezpz_tooltip.js"></script>
<script type="text/javascript" src="/jquery.layout-latest.js"></script>
<script type="text/javascript" src="/jquery.contextmenu.js"></script>
<script type="text/javascript" src="/jquery.dynDateTime.js"></script> 
```

页面 B 刚刚添加了 jquery.js。页面 B 也是一个独立页面

现在使用 load() 将页面 A 中的页面 B 加载到页面 A 中的 div 会导致页面 A 中的上下文菜单、工具提示功能丢失。

我理解 jquery 将被重新加载的原因，因此，它被重新初始化。有没有办法可以阻止它或将 jquery 的状态重置为 - 在加载条件之前？ -

感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T03:54:48.063

`jQuery.noConflict()`加载页面 B 后尝试运行。

# joomla - 修改 joomla mod_banner 以计数横幅

> ID：13618481
> 
> 赞同：0
> 
> 时间：2012-11-29T03:45:23.587
> 
> 标签：joomla, joomla2.5, joomla-extensions

我正在使用默认的 joomla `mod_banner`。我想修改模块，以便可以为每个横幅图像提供特定的 css 类，因此如果模块显示 3 个横幅图像，则第一个横幅（图像）将具有`class="banner1"`，第二个图像将具有`class="banner2"`第三个图像`class="banner3"`，依此类推. 我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T04:06:56.387

如果您决定修改您的`mod_banners`模块，那么只需按照以下步骤操作：

1.  `/modules`从你的根目录打开。
2.  找到名为的`mod_banners`目录`modules/mod_banners`
3.  找出tmpl目录`modules/mod_banners/tmpl`
4.  `default.php`是将图像显示到您的 joomla 网站前端的文件。

只需编辑此文件。查看`img`标签，然后更改您想给班级起的任何名称..

**更新：**看看给定的代码：

```
// Add variable before
$unique_number = 1;
// Provide the Provides the images URL or related information
foreach($list as $item): 
```

现在只需找出`<img`标签并添加一个类似的类

```
<img class='banner-<?php echo $unique_number?>' 
```

并在文件的末尾找到`endforeach;`并添加类似的代码

```
<?php
$unique_number++;
endforeach;
?> 
```

为您提供类名等`banner-1, banner-2, ....`。

**重要提示**：如果您注意到`default.php`模块的最顶部将图像提供到数组中，如果您熟悉 Joomla 模块结构，那么您可以轻松修改它。

# python - 为什么我不能从我的道路列表中删除道路？

> ID：13618483
> 
> 赞同：1
> 
> 时间：2012-11-29T03:45:31.770
> 
> 标签：python, list, graph

为什么这不会从我的道路对象列表中删除项目？

相关信息

道路对象取（self，city1，city2，length），City对象取（self，name，population）；

我将这些对象保存到列表 _cities 和 _roads 中，以便我可以修改它们。

此定义应该删除连接到城市的任何道路，然后删除该城市。

但是，我的代码不想删除我的道路（而且我没有收到任何错误），所以我的逻辑一定是有缺陷的。

你能帮我吗？

```
class Network:

    def __init__(self):

        self._cities = []  # list of City objects in this network
        self._roads = []   # list of Road objects in this network

    def hasCity(self, name):

        for x in self._cities:
            if x.name == name:
                return True
        return False

    def hasRoad(self, road):

        for x in self._roads:
            if x.city1 == road[0] and x.city2 == road[1]:
                return True
            elif x.city1 == road[1] and x.city2 == road[0]:
                return True
            else:
                return False

    def addCity(self, name, pop):
        if self.hasCity(name) == True:
            return False
        else:
            self._cities.append(City(name, pop))
            return True

    def addRoad(self, road, length):

        if self.hasRoad(road) == True:
            return False
        else:
            self._roads.append(Road(road[0], road[1], length))
            return True

    def delRoad(self, road):
        if self.hasRoad(road) == False:
            return False
        else:
            for x in self._roads:
                if x.city1 == road[0] and x.city2 == road[1]:
                    self._roads.remove(x)
                    return True
                elif x.city1 == road[1] and x.city2 == road[0]:
                    self._roads.remove(x)
                    return True
                else:
                    return False

    def delCity(self, city):

        if self.hasCity(city) == False:
            return False
        else:
            for x in self._cities:
                if x.name == city:
                    for j in self._roads:
                        if j.city1 == x.name:
                            self.delRoad((j.city1, j.city2))
                            self.delRoad((j.city2, j.city1))
                        elif j.city2 == x.name:
                            self.delRoad((j.city1, j.city2))
                            self.delRoad((j.city2, j.city1))
                    self._cities.remove(x)
                    return True 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T03:56:12.650

原因可能是您删除了您迭代的列表中的一个元素。这通常是一种不好的做法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T04:11:19.887

delCity 可以改进，但它似乎工作正常。我相信您需要发布更多代码。我编写了示例代码来测试 delCity。这是城市类：

```
class City(object):
    def __init__(self, name, population):
        self.name = name
        self.population = population

    def __repr__(self):
        return "City(%r, %r)" % (self.name, self.population) 
```

这是道路类：

```
class Road(object):
    def __init__ (self, city1, city2, length):
        self.city1 = city1
        self.city2 = city2
        self.length = length

    def __repr__(self):
        return "Road(%r, %r, %r)" % (self.city1, self.city2, self.length) 
```

这是我将 delCity 方法粘贴到的 Test 类：

```
class Test(object):
    def __init__(self, cities, roads):
        self._cities = cities
        self._roads = roads

    def hasCity(self, city_name):
        for c in self._cities:
            if c.name == city_name:
                return True
        return False

    def delRoad(self, pair):
        for x in self._roads:
            if x.city1 == pair[0] and x.city2 == pair[1]:
                self._roads.remove(x)

    def delCity(self, city):
        if self.hasCity(city) == False: #checks to see if city isn't in list
            return False
        else:
            for x in self._cities:
                if x.name == city:
                    for j in self._roads:
                        if j.city1 == x.name:
                            self.delRoad((j.city1, j.city2)) ##delRoad takes a tuple
                            self.delRoad((j.city2, j.city1))
                        elif j.city2 == x.name:
                            self.delRoad((j.city1, j.city2))
                            self.delRoad((j.city2, j.city1))
                    self._cities.remove(x)
                    return True 
```

现在我在这里测试你的代码：

```
>>> t = Test([City('x', 1), City('y', 1), City('z', 1)],
             [Road('x', 'y', 1), Road('y', 'z', 1)])
>>> t.delCity('x')

>>> print t._cities
[City('y', 1), City('z', 1)]
>>> print t._roads
[Road('y', 'z', 1)] 
```

如您所见，前往该城市的城市和单条道路已被删除。

# c++ - C++ 服务器不显示数据包

> ID：13618486
> 
> 赞同：1
> 
> 时间：2012-11-29T03:45:56.563
> 
> 标签：c++, sockets, winsock

我正在用 C++ winsock 制作服务器
现在我正在尝试调试并查看客户端发送的数据包。

这是我的代码

```
int iSendResult;
char recvbuf[DEFAULT_BUFLEN];
int recvbuflen = DEFAULT_BUFLEN;

(...)

iResult = recv(ClientSocket, recvbuf, recvbuflen, 0);
if (iResult > 0) {
    cout << "The packet is: " << hex << recvbuf << endl; 
```

但是在客户端连接后的控制台上，显示只是：

```
The packet is: 
```

什么都没有显示。我错过了什么？

如果我做：

```
int iSendResult;
char recvbuf[DEFAULT_BUFLEN];
int recvbuflen = DEFAULT_BUFLEN;

(...)

iResult = recv(ClientSocket, recvbuf, recvbuflen, 0);
if (iResult > 0) {
    cout << "The packet size: " << iResult << endl;
//result is "The packet size: 10" 
```

现在我想看看那个数据包是什么。

* * *

**更新**

我试过这个：

```
iResult = recv(ClientSocket, recvbuf, recvbuflen, 0);
if (iResult > 0) {
    string packet = recvbuf;
    cout << "The packet is: " << packet.c_str() << endl; 
```

仍然没有返回字符串。只是“数据包是：”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T03:55:55.940

您在该缓冲区中收到的字节可能是不可打印的，并且可能不是以零结尾的。`0`将它们打印为整数，例如，以十六进制格式，在从to的循环中`iResult - 1`。

### 编辑0：

重要的部分是您需要打印确切的字节数。像下面这样简单的事情会做（`unsigned char`避免值的符号扩展大于 then `127`）：

```
unsigned char buf[BSIZE];
// ... get data of size iResult
for ( int i = 0; i < iResult; i++ ) {
    printf( "%02x ", buf[i] );
}
printf( "\n" ); 
```

# web-services - 如何处理对象上的宁静“动作”。

> ID：13618487
> 
> 赞同：4
> 
> 时间：2012-11-29T03:46:16.910
> 
> 标签：web-services, api, rest

所以我想知道在不改变对象状态的对象上执行操作的最佳实践是什么。如果这对我没有意义，我认为推文示例解释了我想说的。

我了解这里描述的基础知识：

[什么是最好的/常见的 RESTful url 动词和动作？](https://stackoverflow.com/questions/256349/what-are-the-best-common-restful-url-verbs-and-actions)

以及在更新/获取/删除等对象时它是如何工作的。但是不改变对象状态的动作呢？

例如，假设我们有一个 tweet 对象：

```
GET     `/tweets  (gets a list of tweets)
GET     `/tweets/new (gets a new page to create a new tweet)
POST    `/tweets (posts data to server to create new tweet)
GET     `/tweets/:id (get a single tweet)
GET    `/tweets/:id/edit (get a page to edit an exisiting tweet)
PUT    `/tweets/:id (put data to server to edit exisiting tweet)
Delete `/tweets/:id (delete an exisiting tweet) 
```

这对我来说很有意义。但是我如何形成回复/关注/转发/收藏的 URL，其中一些实际上并没有改变推文的状态？

我应该做下面的事情吗？

```
POST   `/tweets/:id/reply       (post the reply message to the server)
POST    `/tweets/:id/follow     (post a boolean? yes I follow?)
POST    `/tweets/:id/retweet    (again post a boolean?)
POST    `/tweets/:id/favorite   (ditto) 
```

或者做一个

```
POST     `/tweet/:id/actions  (Do a post with the action I want to take as a parameter) 
```

还是没有“标准方式”。无论如何感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T16:43:11.057

好问题。

与往常一样，它有助于将框架切换为名词而不是动词。当您回复/等时，您使用的资源是什么？这些资源也可以获取/寻址吗？

在你提到的每个案例中，我认为第二个问题的答案是肯定的。事实上，[Facebook 的 Graph API](https://developers.facebook.com/docs/reference/api/)和[GitHub 的 REST API](http://developer.github.com/v3/)都遵循这种方法。

例如回复：

*   `GET /tweets/:id/replies`获取回复给定推文的推文列表

*   `POST /tweets/:id/replies`创建一条新推文来回复给定的推文。这里的重要部分是成功是一个`201 Created`带有`Location`设置为创建的推文端点的标头，例如`/tweets/1234`.

*   （删除回复只是删除推文。）

关注/转发/收藏有点棘手，因为“名词”是轻量级连接，事实上，我只是问了一个 Stack Overflow 问题，以寻找“最好”的方式来公开这些：

[RESTful API 设计：CRUD 轻量级连接的最佳方式？](https://stackoverflow.com/questions/13657861/restful-way-to-crud-lightweight-connections)

您可以在该线程上看到您可能实现关注/转发/收藏的特定方式。

希望这可以帮助！

# r - 你可以用 data.frame 做什么而不能用 data.table 做什么？

> ID：13618488
> 
> 赞同：79
> 
> 时间：2012-11-29T03:46:18.923
> 
> 标签：r, dataframe, data.table

我刚开始使用 R，遇到了 data.table。我发现它很棒。

一个非常幼稚的问题：我可以忽略 data.frame 来使用 data.table 来避免两个包之间的语法混淆吗？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-11-29T21:58:22.783

来自[data.table 常见问题](http://datatable.r-forge.r-project.org/datatable-faq.pdf)

## FAQ 1.8 好的，我开始了解 data.table 是关于什么的，但是你为什么不在 R 中增强 data.frame 呢？为什么它必须是一个新的包？

> 正如 FAQ 1.1 强调的那样，`j`in与in`[.data.table`根本不同。甚至像 破坏许多包和用户代码中的现有代码这样简单的事情。这是设计使然，我们希望它以这种方式工作，以便更复杂的语法工作。还有其他差异（参见常见问题解答 2.17）。`j``[.data.frame``DF[,1]`
> 
> 此外，`data.table`继承自`data.frame`. 它也是一个 `data.frame`。A`data.table`可以传递给任何只接受的包，`data.frame`并且该包可以`[.data.frame` 使用`data.table`.
> 
> 我们也尽可能地提出了对 R 的增强。其中一个被接受为 R 2.12.0 中的新功能：
> 
> > `unique()`现在`match()`在所有元素都在全局`CHARSXP`缓存中并且具有无标记编码 (ASCII) 的字符向量上更快。感谢 Matthew Dowle 建议改进在`unique.`c 中生成哈希码的方式。
> 
> 第二个建议是使用`memcpy`in `duplicate.c`，它比 C 中的 for 循环快得多。这将改进 R 在内部复制数据的方式（在某些方面提高了 13 倍）。r-devel 的主题在这里：[http](http://tolstoy.newcastle.edu.au/R/e10/devel/10/04/0148.html) ://tolstoy.newcastle.edu.au/R/e10/devel/10/04/0148.html 。

## `data.frame`和 data.table之间较小的语法差异是什么

> *   `DT[3]`指的是第 3*行*，但`DF[3]`指的是第 3*列*
> *   `DT[3, ] == DT[3]`, 但是`DF[ , 3] == DF[3]`（在 data.frame 中有些混乱，而 data.table 是一致的）
> *   出于这个原因，我们说逗号在 中是*可选*的`DT`，但在`DF`
> *   `DT[[3]] == DF[, 3] == DF[[3]]`
> *   `DT[i, ]`，其中`i`是单个整数，返回单行，就像`DF[i, ]`，但不同于返回向量的矩阵单行子集。
> *   `DT[ , j]`其中`j`是单个整数返回单列 data.table，与`DF[, j]`默认情况下返回向量不同
> *   `DT[ , "colA"][[1]] == DF[ , "colA"]`.
> *   `DT[ , colA] == DF[ , "colA"]`（目前在 data.table v1.9.8 中，但即将更改，请参阅发行说明）
> *   `DT[ , list(colA)] == DF[ , "colA", drop = FALSE]`
> *   `DT[NA]`返回 1 行`NA`，但返回包含`DF[NA]`的整个副本。该符号是 R 中的类型，因此被. 用户的意图大概是。为方便起见，它会自动转向这个可能的意图。`DF``NA``NA``logical``[.data.frame``DF[NA_integer_]``[.data.table`
> *   `DT[c(TRUE, NA, FALSE)]`将`NA`as 视为`FALSE`，但为每个`DF[c(TRUE, NA, FALSE)]`返回 `NA`行`NA`
> *   `DT[ColA == ColB]`比简单`DF[!is.na(ColA) & !is.na(ColB) & ColA == ColB, ]`
> *   `data.frame(list(1:2, "k", 1:4))`创建 3 列，data.table 创建一`list`列。
> *   `check.names`为方便起见，默认情况下在`TRUE`data.table中。`data.frame``FALSE`
> *   `stringsAsFactors`默认情况下`TRUE`，`data.frame`但`FALSE`在 data.table 中，以提高效率。由于将全局字符串缓存添加到 R 中，字符项是指向单个缓存字符串的指针，转换为`factor`.
> *   使用in打印时，列中的原子向量`list`会折叠，但在 data.table 中，在第 6 项之后带有尾随逗号，以避免意外打印大型嵌入对象。在我们很多时候设置。当我们忘记时，在选择单列并且突然返回向量而不是单列的极端情况下可能会出现错误。在我们借此机会使其保持一致并放弃。当一个 data.table 被传递给一个 data.table-unaware 包时，这个包不关心任何这些差异；它只是工作。`", "``data.frame``","``[.data.frame``drop = FALSE``data.frame``[.data.table``drop`

* * *

## 小警告

在某些情况下，某些包使用的代码在给定 data.frame 时会崩溃，但是，鉴于`data.table`不断维护以避免此类问题，可能出现的任何问题都会及时修复。

例如

*   [看到这个问题并及时回复](https://stackoverflow.com/questions/13106018/data-table-error-when-used-through-knitr-gwidgetswww)

*   来自 v 1.8.2 的新闻

> *   base::unname(DT) 现在可以根据 plyr::melt() 的需要再次工作。感谢 Christoph Jaeckel 的报道。添加了测试。
> *   为 ITime 添加了 as.data.frame 方法，以便将 ITime 传递给 ggplot2 而不会出错，#1713。感谢 Farrel Buchinsky 的报道。添加了测试。ITime 轴标签仍然显示为从午夜开始的整数秒；我们不知道为什么 ggplot2 不调用 ITime 的 as.character 方法。为 ggplot2 将 ITime 转换为 POSIXct 是一种方法。

# c# - 在 C# 中刷信用卡后使用什么文本框事件

> ID：13618489
> 
> 赞同：1
> 
> 时间：2012-11-29T03:46:30.733
> 
> 标签：c#, winforms, textbox

示例：在我刷完信用卡后，价值会显示在上面`textBox1`，我想要发生的是焦点会自动转到`textBox2`.

我应该为此使用什么文本框事件？

谢谢！

这是我使用 textchange 事件和我使用测试卡的屏幕截图 ![在此处输入图像描述](../Images/f42b78b7df5d53507cc4f5c6c3678143.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T03:56:59.980

您应该收听 Text Changed 事件，但如果您获得了当前文本框所需的所有信息（即输入了所有数字），则仅关注下一个文本框

```
private void TxtBox1TextChanged(object sender, EventArgs e)
{
    if (txtBox1.Text.Length == LENGTH_OF_CREDIT_CARD_NUMBER)
    {
        txtBox2.Focus();
    }
} 
```

我建议将最大长度设置为 txtBox1 然后检查：

```
if (txtBox1.Text.Length == txtBox1.MaxLength) 
```

# assembly - 如何使用 x86 程序集从数据段中读取数据？

> ID：13618493
> 
> 赞同：1
> 
> 时间：2012-11-29T03:46:50.663
> 
> 标签：assembly, x86, nasm, data-segment

我使用 nasm32、x86 汇编语言。我想从数据段中读取一些数字。

```
.model small 
.stack
.data 
  DATA1 DB 53H,"$"
  DATA2 DB 17H,"$"
.code
.startup
  mov dx, @data
  mov dx, offset DATA1
  add dl,30h
  mov ah, 02h
  int 21h

  mov dl, dh
  add dl, 30h
  mov ah, 02h
  int 12h
  .exit
end 
```

此代码仅返回

20

我想 DATA1 53h (= 83 (decimal)) 值会返回。（ASCII字符）

但奇怪的数字是返回。发生了什么？我不明白这个结果。

以及如何修复此代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T04:06:43.003

您没有设置 ds。

```
mov dx, @data 
```

你的意思是这样的：

```
push @data
pop ds 
```

# html - 删除 Gmail 和 Yahoo 的 HTML 邮件中的文本装饰

> ID：13618494
> 
> 赞同：4
> 
> 时间：2012-11-29T03:46:52.420
> 
> 标签：html, css, email, html-email, email-client

我以前创建过 HTML 邮件程序，但我无法弄清楚如何使用 Gmail/Yahoo 客户端的内联样式从链接中删除文本装饰。我正在按照我想要的方式获取链接颜色，但是 gmail 在每个链接下都插入了那条难看的蓝线。我努力了

```
<a href="link" target="_blank" style="color:red;text-decoration:none">link</a> 
```

和

```
<a href="link" target="_blank" style="color:red;text-decoration:none"><span style="text-decoration:none">link</span></a> 
```

我正在使用 F12 工具检查电子邮件，并且内联样式被电子邮件客户端完全吹走并且不出现。我有一个非常基本的模板，没有覆盖属性 - 我是否遗漏了 Gmail 所需的内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-11T06:23:31.443

您的代码似乎是正确的，我怀疑实际上是您发送电子邮件的客户端正在剥离代码。

例如，Outlook 2013 将`text-decoration:none`在发送 HTML 电子邮件时去除锚标记。尝试从其他客户发送电子邮件，看看是否仍然存在标签被剥离的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T15:42:26.293

尝试使用真实的颜色代码。不确定结束分号是否也有影响......这对我总是有效（至少在Gmail中）

```
<a href="" style="color: #770000; text-decoration: none;">click here</a> 
```

附带说明一下，众所周知，Gmail 会破坏 #FFFFFF 和 #000000（纯黑色或白色）。在这种情况下，我使用 #FFFFF9 和 #000001 代替。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-17T22:54:38.417

尝试这个：

```
<a href="link" target="_blank" style="text-decoration:none;">
    <span style="color:red;">link</span>
</a> 
```

# jsf - 重新渲染丰富的部分：popupPanel

> ID：13618500
> 
> 赞同：2
> 
> 时间：2012-11-29T03:48:01.857
> 
> 标签：jsf, jsf-2, richfaces, rerender, popuppanel

我正在与：

```
- RichFaces 4.2.2
- Mojarra 2.1.14 
```

让我们看下面的简单代码：

```
<h:form>
    <h:selectOneRadio value="#{testBean.option}" >
        <f:selectItem itemValue="0" itemLabel="Option 0"/>
        <f:selectItem itemValue="1" itemLabel="Option 1"/>
        <f:ajax execute="@this" render="infoPanelId"/>
    </h:selectOneRadio>
    <a4j:outputPanel id="infoPanelId">
        <h:outputText value="Option 0 selected" rendered="#{testBean.option == '0'}"/>
        <h:outputText value="Option 1 selected" rendered="#{testBean.option == '1'}"/>
    </a4j:outputPanel>
</h:form> 
```

和豆代码：

```
@ManagedBean(name="testBean")
@ViewScoped
public class TestBean implements Serializable{

    private String option;

    public String getOption() {
        return option;
    }

    public void setOption(String option) {
        this.option = option;
    }
} 
```

它工作正常，而且很简单。重新渲染按预期工作。但是如果我们把这个简单的代码放在 rich:popupPanel 标记中，那段代码就不起作用了。这是代码片段：

```
<h:form>
    <a4j:commandButton 
        value="show popup" 
        oncomplete="#{rich:component('testPopup')}.show()"
        render="testPopup"
    />

    <rich:popupPanel id="testPopup" modal="false" autosized="true" resizable="false">
        <f:facet name="header">
            <h:outputText value="popup"/>
        </f:facet>
        <h:panelGrid columns="1">
            <h:selectOneRadio value="#{testBean.option}" >
                <f:selectItem itemValue="0" itemLabel="Option 0"/>
                <f:selectItem itemValue="1" itemLabel="Option 1"/>
                <f:ajax execute="@this" render="infoPanelId"/>
            </h:selectOneRadio>
        <a4j:outputPanel id="infoPanelId">
                <h:outputText value="Option 0 selected" rendered="#{testBean.option == '0'}"/>
                <h:outputText value="Option 1 selected" rendered="#{testBean.option == '1'}"/>
            </a4j:outputPanel>
        </h:panelGrid>
    </rich:popupPanel>
</h:form> 
```

所以popupPanel里面的代码不起作用。我无法重新渲染 popupPanel 的一部分。所以我有两个问题：

1.  为什么？
2.  我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T06:23:30.313

1）因为默认情况下`popupPanel`显示在`<body>`元素内部

2）添加`domElementAttachment="form"`到`rich:popupPanel`应该有帮助

# java - 在我的程序中获取空指针异常。我究竟做错了什么？

> ID：13618501
> 
> 赞同：1
> 
> 时间：2012-11-29T03:48:01.887
> 
> 标签：java, exception, null

我的程序在粗体部分出现空指针异常，我做错了什么？任何见解都会很好。谢谢你。关于我的一些背景，我是一名生物化学家，对编程非常陌生。如果在某处创建了一个空值，我该如何处理它并且不允许它终止并在程序上创建运行时错误。我究竟做错了什么？

```
 public class DNASequence {

//create a private static variable that can be accessed
private static String DNASequence;

public static void main(String[] args){

    DNASequence DNAStrandInput;
    DNAStrandInput = new DNASequence(DNASequence);

    System.out.println(DNAStrandInput);

     // Invoke the countLetters method to count each letter
    **int[] countsofDNA = countsLetters(DNASequence.toUpperCase());**

    // Display results
    for (int i = 0; i < countsofDNA.length; i++) {
      if (countsofDNA[i] != 0)
        System.out.println((char)('a' + i) + " appears  " +
          countsofDNA[i] + ((countsofDNA[i] == 1) ? " time" : " times"));
    }   

}

//Constructor Method that takes parameter a string and checks to see if its only A, T, C, G.
public DNASequence(String DNAStrand){

    DNASequence = DNAStrand;

    Scanner input = new Scanner(System.in);
    System.out.println("Please enter a sequence of DNA: ");
    String UserInputDNA = input.nextLine();

    boolean checkStrand = true;

    if (UserInputDNA.matches(".*A.*") && UserInputDNA.matches(".*C.*") && UserInputDNA.matches(".*T.*") && UserInputDNA.matches(".*G.*")){
        checkStrand = true;
    }

    else{
        checkStrand = false;
        System.err.println("You did not enter a valid sequence.");
    }

    //      // Invoke the countLetters method to count each letter
    //      int[] counts = countLetters(DNAStrand.toUpperCase());
    //
    //      // Display results
    //      for (int i = 0; i < counts.length; i++) {
    //        if (counts[i] != 0)
    //          System.out.println((char)('a' + i) + " appears  " +
    //            counts[i] + ((counts[i] == 1) ? " time" : " times"));
    //      }
    //    }
    //
    //    /** Count each letter in the string */
    //    public static int[] countLetters(String s) {
    //      int[] counts = new int[26];
    //
    //      for (int i = 0; i < s.length(); i++) {
    //        if (Character.isLetter(s.charAt(i)))
    //          counts[s.charAt(i) - 'a']++;
    //      }
    //
    //      return counts;
          }

// toString Method that just returns the stored sequence
public String toString(){
    return DNASequence;     
}

//Counts method that keeps track of how many of each appear in the DNA Strand
private static int[] countsLetters(String string){

          // Count each letter in the string    
        // I thought this was maybe easier but idk if it actually works..
            **int countA = DNASequence.indexOf('A');**
            int countC = DNASequence.indexOf('C');
            int countT = DNASequence.indexOf('T');
            int countG = DNASequence.indexOf('G');

            int []counts = new int [4];
                counts [0] = 'A' + countA;
                counts [1] = 'C'+ countC;
                counts [2] = 'T'+ countT;
                counts [3] = 'G'+ countG;           

            return counts;
}

private static boolean isSubsequenceOf(String DNAStrand){

    //if the second strand is smaller than the one that is supposed to be a     subsequence of, it cannot be true.
    if (DNAStrand.length() < DNASequence.length()){
        return false;
    }

    //I know how to do the substring but i dont know how to get it to be true or false. it won't let me do an if statement
    DNAStrand.indexOf(DNASequence);
    String subString = DNAStrand.substring(0, DNASequence.length());
    return true;
}

private static String[] dissolve(String letter){

    String [] dissolved;
    //if statement says that if the letter is either "a" "T" "C" or "G", to delete that character and print out the new string.
     if (letter == 'A' || 'T' || 'C'|| 'G'){
         DNASequence.split(letter);
     }

    return dissolved;

    }
    } 
```

给我带来麻烦的代码行是：

```
int[] countsofDNA = countsLetters(DNASequence.toUpperCase());

int countA = DNASequence.indexOf('A'); 
```

**编辑：**

在构造函数中使用此代码使其工作。

```
 public DNASequence(String DNAStrand){

    DNASequence = DNAStrand;

    Scanner input = new Scanner(System.in);
    System.out.println("Please enter a sequence of DNA: ");
    DNASequence = input.nextLine();

    boolean checkStrand = true;

    if (DNASequence.matches(".*A.*") && DNASequence.matches(".*C.*") && DNASequence.matches(".*T.*") && DNASequence.matches(".*G.*")){
        checkStrand = true;
    }

    else{
        checkStrand = false;
        System.err.println("You did not enter a valid sequence.");
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T03:54:14.707

如果您查看声明，`DNASequence`您可以看到该字符串最初为空：

```
private static String DNASequence; 
```

因此，在尝试对其调用任何方法之前，您需要确保设置`DNASequence`为非空字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T03:59:45.743

```
private static String DNASequence; 
```

和

```
private static String DNASequence = null; 
```

对于java来说是一样的

```
int[] countsofDNA = countsLetters(DNASequence.toUpperCase()); 
```

在这里你的 DNASequence 代表 null 因此你得到空指针异常。

因此你像这样调用构造函数`DNASequence(null)`和内部构造函数

null 再次分配给 DNASequence 变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T03:52:29.827

您应该新建 DNASequence 的每个单元格（使用 for 循环）。有

`DNAStrandInput = new DNASequence(DNASequence);`

是不足够的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T06:23:54.980

```
private static String DNASequence; 
```

你还没有初始化 DNASequence String 变量——你只是声明了它，所以它在你的程序中算作 null。您尝试使用 DNASequence，但它被设置为`null`，这就是您得到空指针异常的原因。

一个更好的方法是：

```
private static String DNASequence = ""; 
```

你得到一个空白字符串，你可以使用它而不用担心空指针异常，我认为这可以解决你的问题。希望有帮助！

# c++ - 是否可以将 std::move 对象移出函数？(C++11)

> ID：13618506
> 
> 赞同：13
> 
> 时间：2012-11-29T03:48:42.357
> 
> 标签：c++, function, c++11, move-semantics, rvalue-reference

该程序尝试将字符串移出函数并将其用于构造另一个字符串：

```
#include <iostream>
#include <string>
#include <utility>

std::string && Get_String(void);

int main(){

    std::string str{Get_String()};
    std::cout << str << std::endl;

    return 0;
}

std::string && Get_String(void){

    std::string str{"hello world"};

    return std::move(str);
} 
```

该程序可以编译，但在执行时会出现段错误。

* * *

这是我的理由： `Get_String`将创建一个本地字符串。在字符串超出范围之前，需要制作并返回该字符串的副本。该副本将用于构造 main 中的字符串。但是，如果我将字符串移出函数，则不需要进行复制。

为了理解移动语义，有人可以解释为什么我在做什么，可能没有意义。是否可以将对象移出函数？

* * *

**编辑：**
如果我从以下位置更改函数签名，它将正确编译并运行：

```
std::string && Get_String(void); 
```

至

```
std::string Get_String(void); 
```

在这种情况下，在返回期间移动字符串是否更有效？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-29T03:57:25.803

鉴于这个例子，

```
X foo ()
{
  X x;    
  return x;
} 
```

保证以下行为：

> • 如果`X`具有可访问的副本或移动构造函数，编译器可能会选择省略副本。这就是所谓的（命名的）返回值优化（(N)RVO），它甚至在 C++11 之前就已经指定，并且被大多数编译器支持。
> • 否则，如果`X`有移动构造函数，`x`则被移动。
> • 否则，如果`X`具有复制构造函数，`x`则被复制。
> • 否则，会发出编译时错误。

另请注意，如果返回的对象是本地非静态对象，则返回右值引用是错误的：

```
X&& foo ()
{
  X x;
  return x; // ERROR: returns reference to nonexistent object
} 
```

右值引用是一个引用，在引用本地对象时返回它意味着您返回一个对不再存在的对象的引用。是否`std::move()`使用无所谓。

`std::move()`并没有真正移动物体；它只会将左值转换为右值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T03:58:04.570

该`Get_String`函数将右值引用绑定到函数本地对象。右值引用对于即将被销毁的事物很有用，但对于已经被销毁的事物，它与左值引用一样糟糕。

要将本地对象移出函数，只需按类类型返回：

```
std::string Get_String(void) {
    std::string str{"hello world"};
    return str;
} 
```

如果编译器无法完全消除复制/移动，则调用者获取的返回值将使用移动构造函数而不是复制构造函数构造，只要返回表达式为：

*   临时的，或
*   单个标识符命名具有自动存储持续时间的事物（`str`如上），或
*   `std::move(something)`

（所以你仍然必须`return std::move(str);`明确，但这里没有必要。）

# sql - 选择列值不变的记录

> ID：13618511
> 
> 赞同：0
> 
> 时间：2012-11-29T03:49:39.390
> 
> 标签：sql

我有一个列名 ID、日期和值的表。该值预计每天都会发生变化。但是，在某些情况下，该值保持不变。所以我想创建一个sql查询来选择值3天没有改变的ID。我将表格说明如下。提前感谢您的帮助。

例如，当前日期是 11 月 29 日。因此查询必须检查过去 3 天的值。

```
 ID   Date   Value
    B99  28nov  400
    B99  27nov  120
    B99  26nov  120
    B99  25nov  300
    A12  28nov  800
    A12  27nov  800
    A12  26nov  800
    A12  25nov  800
    C45  28nov  100
    C45  27nov  260
    C45  26nov  230
    C45  25nov  230 
```

所以查询应该返回 A12。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T04:00:16.647

如果您要添加带有更改日期的列怎么办？您可以使用下一个条件 `WHERE ((GetDate() - dateOfChange) / 86400) > 3.`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T05:52:57.783

您没有指定您的 RDBMS，但此解决方案可能可以转换为大多数。我假设`null`每天都存在非读数：

**PostgreSQL 9.1 架构设置**：

```
create table foo(id text, changed_on date, val integer);
insert into foo(id, changed_on, val)
values ('B99', to_date('2012-11-28','yyyy-mm-dd'), 400),
       ('B99', to_date('2012-11-27','yyyy-mm-dd'), 120),
       ('B99', to_date('2012-11-26','yyyy-mm-dd'), 120),
       ('B99', to_date('2012-11-25','yyyy-mm-dd'), 300),
       ('A12', to_date('2012-11-28','yyyy-mm-dd'), 800),
       ('A12', to_date('2012-11-27','yyyy-mm-dd'), 800),
       ('A12', to_date('2012-11-26','yyyy-mm-dd'), 800),
       ('A12', to_date('2012-11-25','yyyy-mm-dd'), 800),
       ('B99', to_date('2012-11-28','yyyy-mm-dd'), 100),
       ('B99', to_date('2012-11-27','yyyy-mm-dd'), 260),
       ('B99', to_date('2012-11-26','yyyy-mm-dd'), 230),
       ('B99', to_date('2012-11-25','yyyy-mm-dd'), 230)
; 
```

**查询**：

```
select id
from foo
where changed_on>=to_date('2012-11-29','yyyy-mm-dd')-3
group by id
having count(distinct val)=1 
```

**结果**：

```
|  ID |
-------
| A12 | 
```

如果您想尝试或调整另一个 RDBMS 的语法，[这里是 SQL Fiddle 。](http://sqlfiddle.com/#!1/e3cfb/3)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T05:27:10.443

怎么样

```
SELECT t1.ID
FROM   Table t1
       INNER JOIN
       Table t2 ON t1.ID=t2.ID AND t2.Date=DATEADD(day, -1, t1.Date) AND t1.Value=t2.Value
       INNER JOIN
       Table t3 ON t1.ID=t3.ID AND t3.Date=DATEADD(day, -2, t1.Date) AND t1.Value=t3.Value
WHERE  t1.Date=@WhateverDateYouWant 
```

如果值相同，则第一个连接与昨天的相同 ID 匹配，下一个与前一天匹配。如果您不将日期存储为日期 a) 为什么不呢？b）您还需要将文本转换为。

# javascript - 如何更改 JavaScript 对象的顺序？

> ID：13618515
> 
> 赞同：7
> 
> 时间：2012-11-29T03:50:01.127
> 
> 标签：javascript, javascript-objects

我的 JavaScript 对象如下所示：

```
"ivrItems": {
  "50b5e7bec90a6f4e19000001": {
    "name": "sdf",
    "key": "555",
    "onSelect": "fsdfsdfsdf"
  },
  "50b5e7c3c90a6f4e19000002": {
    "name": "dfgdf",
    "key": "666",
    "onSelect": "fdgdfgdf",
    "parentId": null
  },
  "50b5e7c8c90a6f4e19000003": {
    "name": "dfdf",
    "key": "55",
    "onSelect": "dfdffffffffff",
    "parentId": null
  }
} 
```

现在我想动态更改对象的顺序。

排序后，对象应如下所示：

```
"ivrItems": {
  "50b5e7bec90a6f4e19000001": {
    "name": "sdf",
    "key": "555",
    "onSelect": "fsdfsdfsdf"
  },
  "50b5e7c8c90a6f4e19000003": {
    "name": "dfdf",
    "key": "55",
    "onSelect": "dfdffffffffff",
    "parentId": null
  }
  "50b5e7c3c90a6f4e19000002": {
    "name": "dfgdf",
    "key": "666",
    "onSelect": "fdgdfgdf",
    "parentId": null
  }
} 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T03:55:35.347

要获取然后更改对象枚举的顺序，您需要手动定义顺序。这通常通过将对象的属性添加到数组来完成。

```
var keys = Object.keys(data.ivrItems); 
```

现在您可以迭代`keys`数组，并使用键来访问`irvItems`对象的成员。

```
keys.forEach(function(key) {
    console.log(data.irvItems[key]);
}); 
```

现在订单将始终是由 给出的订单`Object.keys`，但不能保证订单将是您想要的。

您可以使用该数组并使用您需要的任何顺序对其进行重新排序。

```
keys.sort(function(a, b) {
    return +data.irvItems[a].key - +data.irvItems[b].key;
}); 
```

这种排序将`key`在数字转换后按每个对象的嵌套属性对键进行排序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T03:51:40.240

Javascript 对象本质上是无序的。
你不能那样做。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-29T03:54:37.220

你应该使用一个数组。对象键没有顺序

像这样：

```
{
    "ivrItems": [
        {
            "id": "50b5e7bec90a6f4e19000001",
            "name": "sdf",
            "key": "555",
            "onSelect": "fsdfsdfsdf"
        },
        {
            "id": "50b5e7c8c90a6f4e19000003",
            "name": "dfdf",
            "key": "55",
            "onSelect": "dfdffffffffff",
            "parentId": null
        },
        {
            "id": "50b5e7c3c90a6f4e19000002",
            "name": "dfgdf",
            "key": "666",
            "onSelect": "fdgdfgdf",
            "parentId": null
        }
    ]
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-29T03:57:29.937

如果您在浏览器中执行此操作，您可能会在跨浏览器兼容性方面遇到困难。但是计算机大多是确定性的，因此您可能可以在一个 javascript 引擎实现中可靠地完成此任务。例如，在 Chrome REPL / 控制台中，您可以简单地通过顺序添加属性来获得此顺序：

```
var n = {}
n.b = 2
n.c = 3
var m = {}
m.c = 3
m.b = 2
JSON.stringify(n)
> "{"b":2,"c":3}"
JSON.stringify(m)
> "{"c":3,"b":2}" 
```

所以你可以重建你的对象，按照你以后想要找到它们的顺序添加键。

但是其他人是对的，如果你想要真实的、可预测的顺序，你应该使用数组。

# function - 从脚本调用时找不到 .zshrc 中定义的函数

> ID：13618518
> 
> 赞同：0
> 
> 时间：2012-11-29T03:50:19.470
> 
> 标签：function, scripting, zsh

我在 .zshrc 文件中定义了一些变量、别名和函数：

```
export MY_VAR="example"

alias my_alias="echo an example"

function say_hello
{
    echo "say hello"
} 
```

我已经验证了所有三个都已定义，并且在从终端调用时都没有。但是，当我尝试从另一个脚本（它本身是从同一个终端调用）调用函数 say_hello 时，该函数似乎没有被定义。我看到“找不到命令”错误。当从这个其他脚本引用时，别名和变量 MY_VAR 似乎定义得很好。

关于可能发生的事情有什么想法吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T15:37:00.763

当从终端调用 zsh 时，它会以交互模式调用，这会导致 zsh 获取其他配置文件，包括`$ZDOTDIR/.zshrc`( `$HOME/.zshrc`)。默认情况下（在非登录 shell 中的非交互模式下）它只获取`/etc/zsh/zshenv`* 和`$ZDOTDIR/.zshenv`（`$ZDOTDIR`大部分时间`$HOME`）文件，请参阅最后但两个部分`man zsh`named `STARTUP/SHUTDOWN FILES`。我不知道为什么要定义别名（您到底是如何检查的？），但是 MY_VAR 是在脚本中定义的，因为您导出了它。

*`/etc/zshenv`根据文档，很可能他们是 zsh 包的 Gentoo 维护者，将其更改为`/etc/zsh/zshenv`.

注意：将此类函数放入`.zshenv`文件中是个坏主意，因为它会创建*隐式*依赖关系。您应该改用脚本库：将其放入

```
~/.zsh/say_hello.zsh 
```

做

```
source ${ZDOTDIR-$HOME}/.zsh/say_hello.zsh 
```

在您的脚本和`.zshrc`.

# rtos - RTOS 任务管理

> ID：13618520
> 
> 赞同：0
> 
> 时间：2012-11-29T03:50:25.930
> 
> 标签：rtos, task-switching

如果一个任务试图交出处理器，实时操作系统需要执行哪些步骤来确保另一个任务有机会运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T09:35:42.983

一个线程让出 CPU 是一个*调度事件*；所有调度事件都会导致*调度程序*运行。

# migration - 如何将单个 DotNetNuke 门户移动到新服务器？

> ID：13618521
> 
> 赞同：3
> 
> 时间：2012-11-29T03:50:30.813
> 
> 标签：migration, export, dotnetnuke

我有一个托管多个不同门户的 DotNetNuke 系统 (v 5.6)，我想将其中一个移至另一个托管提供商。最简单的方法是什么？

我发现每个声称解释如何移动 DotNetNuke 站点的网站基本上都说“将整个数据库复制到新系统中”。如果您在数据库中只有一个门户，那就太好了，但我有十几个。我只想移动一个门户，而不是全部。

将网站导出为 .template 是另一个流行的建议。这会导出站点的结构（例如所有选项卡定义），但它不包含任何实际的 HTML 内容。因此，这基本上毫无价值。

必须有一种合理的方法来做到这一点，而不是尝试从每个 DNN 表中剥离一个单独的门户数据。正确的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T14:05:32.703

当您导出站点模板时，您也可以包含站点的内容（对于支持可移植性的模块，包括标准 HTML 模块）。这就是默认站点模板具有其所有内容的方式。执行此操作时`.template.resources`，您将需要一个文件以及该`.template`文件。

另一种选择是进行完整备份和还原，然后在还原后删除其他站点。如果您在不支持可移植性的模块中有重要内容，我认为这将是您最好的选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T14:15:25.473

仅供参考，我确实在[DotNetNuke 论坛](http://www.dotnetnuke.com/Resources/Forums/forumid/107/postid/473498/scope/posts.aspx)上从某人那里找到了解决方案。

> 创建该安装的第二个版本，然后删除所有其他门户。使用一个门户移动安装。我们已经用大量门户安装了几次，它工作得很好。是的，数据库中仍然存在一些噪音，但这是一种快速有效的做事方式。
> 
> *编辑*请注意，这将为您提供 1 个门户的安装。您不能从一个安装中分离门户并将其重新附加到现有安装（嗯，您可以，但基本上您必须将门户导出为模板，这不是 100%）

这是我采用的方法，果然，它有效。

简而言之：

1.  将网站的文件镜像到另一台服务器。
2.  将 DNN 数据库镜像到另一台服务器。
3.  在新设置上登录主机并删除所有门户，但要迁移的门户除外。
4.  删除其余门户未使用的任何模块定义。
5.  打开您最喜欢的 SQL 工具并删除`Users`和`UserProfile`表中不再有匹配行的任何条目`UserPortals`。默认情况下，DNN 不会删除这些，这令人沮丧。
6.  进入 Windows 资源管理器并删除您不再需要的所有 Portal 文件夹（即：/Portal/1、/Portal/2 等）
7.  使用 Enterprise Manager 备份数据库以创建 .bak 文件
8.  制作整个 DNN 安装文件夹的 .zip。

您现在有一个包含数据库的 .bak 和一个包含文件的 .zip。将这些发送到新的托管公司，你应该一切准备就绪。只需确保更新您`web.config`以正确设置连接字符串以指向新托管公司的新数据库服务器。

就是这么简单。;)

# iphone - 使用 3 个图像视图正确放大滚动视图

> ID：13618524
> 
> 赞同：0
> 
> 时间：2012-11-29T03:50:33.637
> 
> 标签：iphone, uiscrollview, zooming

我有一个包含视图的滚动视图。在视图中有 3 个图像视图（屏幕大小）。在任何时候，用户都站在第二个图像视图上。我想让用户缩放这个图像视图。

如何在我的情况下正确实现缩放？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T04:29:06.623

请参考本教程，希望对您有所帮助:)

[如何使用 uiscrollview-to-scroll-and-zoom-content](http://www.raywenderlich.com/10518/how-to-use-uiscrollview-to-scroll-and-zoom-content)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T04:35:00.347

您可以设置滚动视图的最大和最小缩放比例，如下所示。

在第二张图片的第二页上，只需使用 maximumzoomscale 属性设置您的滚动视图...

```
 CGFloat minScale = MIN(yourScrollView.frame.size.width, yourScrollView.frame.size.height);

   yourScrollView.minimumZoomScale = minScale; 

    yourScrollView.maximumZoomScale = 1.0f; /// set here your zoom scale...
    yourScrollView.zoomScale = minScale; 
```

**更新**

```
// Get a zoom scale that's zoomed in slightly, capped at the maximum zoom scale specified by the scroll view
CGFloat newZoomScale = yourScrollView.zoomScale * 1.5f;
newZoomScale = MIN(newZoomScale, yourScrollView.maximumZoomScale);

// Figure out the rect we want to zoom to, then zoom to it
CGSize scrollViewSize = yourScrollView.bounds.size;

CGFloat w = scrollViewSize.width / newZoomScale;
CGFloat h = scrollViewSize.height / newZoomScale;
CGFloat x = yourScrollView.center.x - (w / 2.0f);
CGFloat y = yourScrollView.center.y - (h / 2.0f);

CGRect rectToZoomTo = CGRectMake(x, y, w, h);

[yourScrollView zoomToRect:rectToZoomTo animated:YES]; 
```

我希望这可以帮助你...

# ajax - 使用 Ajax 时如何在 .jsp 中重定向

> ID：13618526
> 
> 赞同：0
> 
> 时间：2012-11-29T03:50:43.820
> 
> 标签：ajax, jsp

我正在使用 Ajax 和 jsp 开发应用程序。

我的 index.jsp 页面有用于登录的 HTML 代码和一些 javascript 中的 Ajax 代码。Ajax 将调用我的另一个 CheckLogin.jsp 页面

CheckLogin.jsp 页面在服务器上检查有效的用户名和密码。如果有效则返回“成功”，否则将返回消息“用户名或密码无效”。

现在，当用户名和密码有效时，我想将页面重定向到“Home.jsp”而不是成功，我该怎么办？

我是jsp的新手。感谢您在这方面的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T04:31:29.953

JSP 代码在到达客户端之前在服务器上运行一次，因此 JSP/JSTL 无法在 AJAX 调用成功或其他情况下进行重定向（没有完整的页面刷新 - 这避免了 AJAX 的使用）。您应该使用 Javascript 进行重定向：

```
if (success) {
    var successUrl = "Home.jsp"; // might be a good idea to return this URL in the successful AJAX call
    window.location.href = successUrl;
} 
```

成功的 AJAX 调用/验证后，浏览器窗口将重新加载新的 URL（实际上是重定向）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T04:00:34.067

由于我没有看到您的代码，因此您可以将其集成到验证中的某个位置：

```
<%
    pageContext.forward("logged.jsp");
%> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-26T09:31:17.650

```
function Edit() {
var allVals = $('#NEWFORMCampaignID').val();
if (allVals > 0) {
  window.location = '/SMS/PrepareSMS?id='+allVals;
}
else
  alert("Invalid campaign to Edit") 
```

}

为了使用 Button click 进行重定向并传递一些参数，您可以调用 Controller Path(@RequestMapping(value="/SMS/PrepareSMS")) 然后在那里处理它。

# c# - HtmlAgilityPack 中的 XPath

> ID：13618527
> 
> 赞同：0
> 
> 时间：2012-11-29T03:50:55.930
> 
> 标签：c#, xpath, html-agility-pack

对于“http://stackoverflow.com/”，我有以下 xpath '/html/body/div[4]/div[2]/div/div/h1'，即“热门问题”标题。

如何在 HtmlAgilityPack 中使用它？

```
var wc = new WebClient();
wc.Encoding = Encoding.UTF8;
var html = wc.DownloadString("http://stackoverflow.com/");
var htmlDoc = new HtmlDocument();
htmlDoc.LoadHtml(html);
var node = htmlDoc.DocumentNode.SelectNodes("/html/body/div[4]/div[2]/div/div/h1"); 
```

返回空

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T04:06:30.037

为我工作。.Dump() 只是在 LinqPad 中使用它。

```
var url = "http://stackoverflow.com/";
new HtmlWeb().Load(url)
             .DocumentNode
             .SelectSingleNode("/html/body/div[4]/div[2]/div/div/h1")
             .InnerText.Dump(); 
```

结果：

```
 Top Questions 
```

有一些间距。

# android - android 动画列表

> ID：13618528
> 
> 赞同：3
> 
> 时间：2012-11-29T03:51:26.400
> 
> 标签：android, animation

我已经阅读了几篇文章，但没有一篇文章使用动画列表解决了我的问题。我已经知道我无法在 onCreate() 中启动动画，所以我将它放在 onClick() 中，但它仍然无法正常工作......

```
public class Main extends Activity implements OnClickListener {
/** Called when the activity is first created. */

AnimationDrawable explosionAnimation;
Button btnGo;
ImageView explosionImage;

@Override
public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  setContentView(R.layout.main);

  explosionImage = (ImageView) findViewById(R.id.balloon);
  explosionImage.setBackgroundResource(R.drawable.explosion);
  explosionAnimation = (AnimationDrawable) explosionImage.getBackground();

  btnGo = (Button)findViewById(R.id.btnGo);
  btnGo.setOnClickListener(this);
}

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    switch(v.getId())
    {
    case R.id.btnGo:
        explosionAnimation.start();
        break;
    }
}
} 
```

爆炸.xml

```
<?xml version="1.0" encoding="utf-8"?>
<animation-list xmlns:android="http://schemas.android.com/apk/res/android" 
android:oneshot="true">

<item android:drawable="@drawable/explode_1" android:duration="200" />
<item android:drawable="@drawable/explode_2" android:duration="200" />
<item android:drawable="@drawable/explode_3" android:duration="200" />
<item android:drawable="@drawable/explode_4" android:duration="200" />
<item android:drawable="@drawable/explode_5" android:duration="200" />

</animation-list> 
```

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/hello" />

<ImageView
    android:id="@+id/balloon"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center_horizontal"
    android:layout_marginTop="30dp"
    android:src="@drawable/balloon" />

<Button 
    android:id = "@+id/btnGo"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center_horizontal"
    android:layout_marginTop="10dp"
    android:text="Play"
    />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T02:23:13.437

好吧，我建议您将其放在线程内的活动的 onWindowsFocusChange 方法中。像那样：

```
@Override
public void onWindowFocusChanged(boolean hasFocus)
{
  super.onWindowFocusChanged(hasFocus);
  delayedactivation(R.drawable.animationname, yourview, delay);
} 

public void delayedActivation(final int res, final View view, final int delay)
{
  final Handler handle = new Handler();
  Thread t = new Thread() 
  {
     @Override
     public void synchronized run() 
     {
       try
       {
         handle.postDelayed(new Runnable() 
         {  
           @Override
           public void run() 
           {    
              view.setBackgroundResource(res);
              anime = (AnimationDrawable) getResources().getDrawable(res);
              anime = (AnimationDrawable)view.getBackground();
              anime.start();            
           }
          },delay);
         }catch(Exception e)
         {
           e.printStackTrace();
         }
     };
 };
 t.start();     
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T04:13:41.547

我认为你应该更换

```
explosionAnimation.start(); 
```

和

```
explosionImage startAnimation(explosionAnimation); 
```

因为在您的声明中，没有指定“您要在哪个视图上开始动画！”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T04:15:32.093

在您的 main.xml 上，将图像视图 src 更改为`android:src="@drawable/explosion"`

然后在你的 Main.java

改变

`explosionAnimation=(AnimationDrawable)((ImageView) explosionImage).getDrawable();`

试试看。它应该工作

# ruby-on-rails - 如何在 Rails 3 应用程序 JSON 响应中包含附加字段

> ID：13618535
> 
> 赞同：3
> 
> 时间：2012-11-29T03:52:31.217
> 
> 标签：ruby-on-rails, json

我有一个 Rails 应用程序，它以 json 格式显示嵌套表单。

在 JSON 响应中，我还显示了一个代表另一个表的 id 字段。

如何显示与我得到的那个 id 对应的名称，以便我可以以我的 json 格式显示名称和 id。

我的控制器显示方法

```
def show
    @maintemplate = Maintemplate.find(params[:id])
    respond_with (@maintemplate) do |format|
      format.json { render :json => @maintemplate }
    end
  end 
```

提前致谢....

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T04:40:01.977

尝试这个：

```
render :json => @maintemplate.to_json(:include => { :user => { :only => :name } } ) 
```

这将`user_id`用一个`user`键和一个只有`name`属性的值替换键`user`，如下所示：

```
{
  "user_id": "12"
  "user": { "name": "..." }
  ...
} 
```

然后，您可以使用 json 响应访问用户名`["user"]["name"]`。您还可以使用 访问用户 ID `["user_id"]`。

有关更多信息，请[参阅`as_json`](http://apidock.com/rails/ActiveModel/Serializers/JSON/as_json).

**更新：**

使用评论中提供的信息，我认为这是您真正想要的：

```
render :json => @maintemplate.to_json(:include => { :routine => { :include => :user, :user => { :only => :name } } } ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T14:29:15.480

添加到 as_json 方法以及您希望调用的类的其他方法属性。

```
class MainTemplate
  ...

  def name
    User.find(self.user_id).name
  end

  def as_json(options = {})
    options[:methods] = :name
    super(options)
  end

end 
```

# spring-mvc - 淘汰js表单提交到spring控制器

> ID：13618539
> 
> 赞同：1
> 
> 时间：2012-11-29T03:53:08.930
> 
> 标签：spring-mvc, knockout.js, knockout-mvc

如何将表单参数传递给弹簧控制器。我需要将下面的表格提交到这个 url “submit.htm”。

```
<form data-bind="submit: save" action="forms/submit.htm" method="post">
    <fieldset>
        <legend>User: <span data-bind='text: errors().length'></span> errors</legend>
        <label>First name: <input data-bind='value: firstName'/></label>
        <label>Last name: <input data-bind='value: lastName'/></label>
    </fieldset>
    <button  type="submit">Go</button>
</form> 
```

JS：

```
var viewModel = {
    firstName: ko.observable().extend({
        required: true,
        minLength: 2,
        maxLength: 10
    }),
    lastName: ko.observable().extend({
        required: true
    }),
    tasks: ko.observableArray([]),
    save: function() {
        if (viewModel.errors().length == 0) {
            ko.utils.postJson($("form")[0], this);
        } else {
            alert('Please check your submission.');
            viewModel.errors.showAllMessages();
        }
    }
};

viewModel.errors = ko.validation.group(viewModel);
ko.applyBindings(viewModel); 
```

这将交给我的控制器。但我没有在我的控制器中获得这些参数。我也不知道如何在我的控制器中获取这些参数。

# javascript - 谷歌地图 api 实用程序 v3 样式标记，更大的标记？

> ID：13618540
> 
> 赞同：0
> 
> 时间：2012-11-29T03:53:20.427
> 
> 标签：javascript, google-maps, google-maps-api-3, google-maps-markers

我正在尝试设置标记的样式，有没有办法改变标记的大小？

```
 var marker = new StyledMarker({
                styleIcon: new StyledIcon(StyledIconTypes.MARKER,{color:"#82F56D", text:''+i+''}),
                position: myLatLng,
                map: map,
                title: label,
                zIndex: z
            }); 
```

这是我在 google maps 实用程序库中的 styledmarker 代码。如何使圆角部分的气泡变大？我的数字接近边缘。我想要某种填充或某种？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T15:23:39.717

根据[参考资料](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/styledmarker/docs/reference.html)，没有大小属性​​或与操纵大小相关的任何东西

# android - 运行时 Android 单元测试项目的 NoClassDefFoundError

> ID：13618542
> 
> 赞同：1
> 
> 时间：2012-11-29T03:53:26.707
> 
> 标签：android, unit-testing

一切都编译得很好，但是当我运行我的 android 测试时，在项目类被实例化的地方出现错误。例子：

```
package com.lognllc.plyfe.model;

import android.test.InstrumentationTestCase;
import com.lognllc.plyfe.model.PlyfeModel;

public class PlyfeModelTest extends InstrumentationTestCase {
    private PlyfeModel model;

    @Override
    protected void setUp() {
        model = new PlyfeModel();
    }

    public void testSet() {
        assertTrue(true);
    }
} 
```

当我构建并运行测试时，我得到：

```
test:

 [echo] Running tests ...
 [exec] 
 [exec] com.lognllc.plyfe.model.PlyfeModelTest:
 [exec] Error in testSet:
 [exec] java.lang.NoClassDefFoundError: com.lognllc.plyfe.model.PlyfeModel
 [exec]     at com.lognllc.plyfe.model.PlyfeModelTest.setUp(PlyfeModelTest.java:12)
 [exec]     at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:190)
 [exec]     at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:175)
 [exec]     at android.test.InstrumentationTestRunner.onStart(InstrumentationTestRunner.java:555)
 [exec]     at android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:1584)
 [exec] 
 [exec] com.lognllc.plyfe.ui.SplashActivityTest:.
 [exec] Test results for InstrumentationTestRunner=.E.
 [exec] Time: 0.019
 [exec] 
 [exec] FAILURES!!!
 [exec] Tests run: 2,  Failures: 0,  Errors: 1
 [exec] 
 [exec] 
```

我可以让测试在 Eclipse 中运行，但不能从 ant 中运行。它把我逼上一堵墙，我希望这是一个简单的解决方法，我只是犯了一些 n00b 错误。

# .net - IE10 的 WebBrowser 控件中的拼写检查器

> ID：13618545
> 
> 赞同：2
> 
> 时间：2012-11-29T03:53:41.630
> 
> 标签：.net, webbrowser-control

有没有人让 IE10 的拼写检查功能在 .NET WebBrowser 控件中工作？

我已经完成了所有显而易见的事情 - 设置 HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\Internet Explorer\MAIN\FeatureControl\FEATURE_BROWSER_EMULATION 以使用 IE10 模式，尝试添加 meta http-equiv="X-UA-Compatible" content="IE =10" 到标题等。

“$.browser.version”对于独立和 .NET 嵌入式都显示为“10.0”。

当我使用 IE9 时，我在 WebBrowser 控件中使用 IE9 功能很好（通过注册表项设置），但我遇到了 IE10 问题。

我的按钮似乎也与独立的.NET 嵌入式不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-03T13:47:56.633

这取决于您使用的 Windows 版本，但如果您在 Windows 7 上使用 Internet Explorer 10，则不支持拼写检查。它似乎仅在带有 Internet Explorer 10（或更新版本）的 Windows 8 上受支持。

请参阅以下问题作为对此的参考 - 它还包括使拼写检查器工作所需的一些其他注册表项（至少在 Windows 8 下）：

[TWebBrowser (TEmbeddedWB) 控件中的拼写检查器](https://stackoverflow.com/questions/19299326/spell-checker-in-twebbrowser-tembeddedwb-control)

# flash - Flash AS3，减少笔记本电脑麦克风输入的噪音

> ID：13618546
> 
> 赞同：1
> 
> 时间：2012-11-29T03:53:45.797
> 
> 标签：flash

我正在尝试创建一个应用程序，用户可以在其中通过 Flash AS3 中的麦克风输入录制他们的声音。当用户使用耳机麦克风时一切正常，但如果用户通过笔记本电脑麦克风录制他们的声音，结果真的很糟糕。有很多扭曲。有解决办法吗？

我试过 mic.gain = 50 只是为了减少声音输入。我也将麦克风音量设置为 50。但似乎没有任何效果。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T23:32:16.857

试试这个设置

```
mic.gain = 40;
mic.rate = 16;
mic.setSilenceLevel(5, 1000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-05T04:56:03.030

您的应用程序或应用程序设置都没有问题，您在使用系统麦克风时听到的噪音来自系统的旋转风扇，特别是如果它是笔记本电脑并且麦克风位于板上而不是显示器时

# cordova - 在 iPhone 中使用 phonegap 有没有办法在没有预览屏幕的情况下调用相机？

> ID：13618547
> 
> 赞同：2
> 
> 时间：2012-11-29T03:53:48.017
> 
> 标签：cordova, camera

navigator.camera.getPicture 调用相机。

但是在使用它后会显示一个预览屏幕，用户必须单击一个按钮才能返回应用程序。

有没有办法绕过预览屏幕直接回到应用程序？或者是否有任何具有一些额外功能的相机插件可用。

# python - 从文件填充字典的 Python Noob 问题。然后更新dict并写回文件

> ID：13618552
> 
> 赞同：2
> 
> 时间：2012-11-29T03:54:19.920
> 
> 标签：python, django, unix

下面的代码应该从文件中查找第一列（键）`Dict_file`并将另一个文件的第一列替换为`fr`从 中找到的键的值`dict_file`。但它将 保留`dict_file`为更新的字典以供将来查找。

每次运行代码时，它都会从该 dict_file 文件中初始化一个字典。如果它从另一个文件中找到一个新的电子邮件地址，它会将其添加到 dict_file 的底部。

根据我的理解，它应该可以正常工作，因为如果它没有找到 @ 符号，它会为“Dummy@dummy.com”的值分配looking_for .. Dummy@dummy.com 应该附加到 dict_file 的底部。

但由于某种原因，我不断在 dict_file 末尾附加新行和空白行以及其他新电子邮件。我不能在 dict_file 的末尾写空格和换行符。

为什么会这样？下面的代码有什么问题，我的大脑要爆炸了！任何帮助将不胜感激！

```
#!/usr/bin/python

import sys

d = {}
line_list=[]
alist=[]

f = open(sys.argv[3], 'r') # Map file

for line in f:
    alist = line.split()
    key = alist[0]
    value = alist[1]
    d[str(key)] = str(value)
    alist=[]
f.close()

fr = open(sys.argv[1], 'r') # source file

fw = open(sys.argv[2]+"/masked_"+sys.argv[1], 'w') # target file

for line in fr:
    columns = line.split("|")
    looking_for = columns[0] # this is what we need to search
    if looking_for in d:
        # by default, iterating over a dictionary will return keys
        if not looking_for.find("@"):
            looking_for == "Dummy@dummy.com"
            new_line = d[looking_for]+'|'+'|'.join(columns[1:])
            line_list.append(new_line)
        else:
            new_line = d[looking_for]+'|'+'|'.join(columns[1:])
            line_list.append(new_line)
    else:
        new_idx = str(len(d)+1)
        d[looking_for] = new_idx
        kv = open(sys.argv[3], 'a')
        kv.write("\n"+looking_for+" "+new_idx)
        kv.close()
        new_line = d[looking_for]+'|'+'|'.join(columns[1:])
        line_list.append(new_line)
fw.writelines(line_list) 
```

这是dict_file：

```
WHATEmail@SIMPLE.COM    223
SamHugan@CR.COM 224
SAMASHER@CATSTATIN.COM  225
FAKEEMAIL@SLOW.com  226
SUPERMANN@MYMY.COM 227 
```

这是从 dict_file 查找中将第一列转换为 id 的 fr 文件：

```
WHATEmail@SIMPLE.COM|12|1|GDSP
FAKEEMAIL@SLOW.com|13|7|GDFP
MICKY@FAT.COM|12|1|GDOP
SUPERMANN@MYMY.COM|132|1|GUIP
MONITOR|132|1|GUIP
    |132|1|GUIP
00 |12|34|GUILIGAN 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T06:13:49.077

首先，您需要忽略最初读取的字典中的空白，否则再次运行此脚本时会出现索引超出范围错误。通过 fr 对象读取时执行相同操作以避免输入空值。进一步包装您的电子邮件检查条件以获得更大的范围。使用 find 方法对“@”进行简单检查。你可以走了。

试试下面的。这应该有效：

```
#!/usr/bin/python

import sys

d = {}
line_list=[]
alist=[]
f = open(sys.argv[3], 'r') # Persisted Dictionary File

for line in f:
    line = line.strip()
    if line =="":
        continue
    alist = line.split()
    key = alist[0]
    value = alist[1]
    d[str(key)] = str(value)
    alist=[]
f.close()

fr = open(sys.argv[1], 'r') # source file
fw = open(sys.argv[2]+"/masked_"+sys.argv[1], 'w') # Target Directory Location

for line in fr:
    line = line.strip()
    if line == "":
        continue
    columns = line.strip().split('|')
    if columns[0].find("@") > 1:
        looking_for = columns[0] # this is what we need to search
    else:
        looking_for = "Dummy@dummy.com"
    if looking_for in d:
        # by default, iterating over a dictionary will return keys
            new_line = d[looking_for]+'|'+'|'.join(columns[1:])
            line_list.append(new_line)
    else:
        new_idx = str(len(d)+1)
        d[looking_for] = new_idx
        kv = open(sys.argv[3], 'a')
        kv.write(looking_for+" "+new_idx+'\n')
        kv.close()
        new_line = d[looking_for]+'|'+'|'.join(columns[1:])
        line_list.append(new_line)
fw.writelines(line_list) 
```

# ruby-on-rails - 在 Capybara 集成测试（和 Selenium webdriver）期间设计用户创建失败

> ID：13618554
> 
> 赞同：0
> 
> 时间：2012-11-29T03:54:37.807
> 
> 标签：ruby-on-rails, ruby-on-rails-3, selenium, devise, capybara

我正在尝试在集成测试期间创建一个用户以用于某些操作。我正在使用带有 :confirmable 的设计。代码如下：

```
user = User.create({username: "user1", password: "pass1234", password_confirmation: "pass1234", email: "test@email.com"})
user.confirm!
fill_in "Username", :with => user.username
fill_in "Password", :with => user.password
click_button "Sign in" 
```

问题是每次尝试登录都会失败。用户创建没有错误，但由于某种原因，当我尝试登录时，用户似乎并不“在那里”。当我尝试登录时，我只是收到“无效的用户名或密码”。这似乎与 Capybara/Selenium webdriver 在尝试登录之前没有正确等待数据库操作发生的事实有关。如果是这种情况，我该如何测试或修复它？

在集成测试期间尝试插入数据库是否“错误”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T04:13:20.893

我自己不使用设计，因此无法真正评论您遇到的问题的具体细节，但这个问题引起了我的注意：

> 在集成测试期间尝试插入数据库是否“错误”？

是的，我会说它通常是。

您的集成测试应该从用户的角度测试您的代码：

*   期望应该只取决于用户实际**看到**的内容。
*   动作应该只对应于用户实际可以**做**的事情。

将某些内容插入数据库超出了用户可以使用的操作范围。它可能适用于单元测试，但不适用于集成测试。

话虽如此，您可能会争辩说，*播种*数据库数据是该规则的一个例外，因为您正在为测试设置上下文（请参阅下面的评论）。

# javascript - 使用zepto js的页面上的多个手风琴

> ID：13618559
> 
> 赞同：0
> 
> 时间：2012-11-29T03:55:02.540
> 
> 标签：javascript, accordion, zepto

我使用 zepto js lib 编写了一个简单的手风琴。

如何防止点击空锚标签时页面跳转？

还寻找有关如何更好地改进这一点的建议。

**HTML**

```
<div class="box">
   <span class="learn-more"><a href="#">Learn more</a></span>
   <div class="more">
     blah<br>
     blah<br>
     blah<br>
     <span class="close"><a href="#">close</a></span>
   </div>
</div>
<div class="box">
   <span class="learn-more"><a href="#">Learn more</a></span>
   <div class="more">
     blah<br>
     blah<br>
     blah<br>
     <span class="close"><a href="#">close</a></span>
   </div>
</div> 
```

**​Javascript**

 **```
// hide content on page load
$('.more').addClass('hide');
// set variables
var learnMore = $('.learn-more'),
    close = $('.close');
// click on 'learn-more' shows content
learnMore.click(function() {
    $(this).hide().next('div').toggleClass('hide');
});
// hide content when user clicks on 'close' within content
close.click(function() {
    $(this).parent().toggleClass('hide');
    $(this).parent().prev().show();
}); 
```

​工作 **演示**

[http://jsfiddle.net/s5x9A/](http://jsfiddle.net/s5x9A/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T04:37:54.413

在 jQuery 和 Zepto 中，您可以使用 event.preventDefault 来防止 '#' 页面跳转，如下所示：

```
$('a.your-link').click( function (event) {
    event.preventDefault();
}); 
```

`return: false;`一个区别是，在 Zepto 中，您不能像在 jQuery 中那样结束事件处理程序。

更多信息：[Zepto.js 不返回 false？](https://stackoverflow.com/questions/6207956/zepto-js-doesnt-return-false)**

# java - 递归插入排序列表

> ID：13618561
> 
> 赞同：0
> 
> 时间：2012-11-29T03:55:07.970
> 
> 标签：java, recursion, nodes, insertion, sortedlist

我需要编写一个方法，将项目递归地插入到单链排序列表中。列表的节点类如下所示：

```
protected class Node<T> {

    protected Node(T data) {
        this.data = data;
    }

    protected T data;
    protected Node<T> next;
}

protected Node<E> head; 
```

}

方法签名是：void insert(E data)。我可以迭代地做到这一点，但我似乎无法理解如何递归地做到这一点。任何人都可以提供任何见解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T03:58:14.697

假设您应该在列表末尾插入，只需在`this.next`until `this.next`is上重复`null`。

```
public void insert(E data) {
    if (this.next == null) {
        // we're at the end, so actually do the insert
        // if you can do it iteratively, you should already know what to do here
    } else {
        this.next.insert(data);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T03:58:15.350

创建一个函数，该函数接受一个起始节点和要插入的数据。

如果该节点是放置数据的正确位置，只需插入它。

如果不是，则递归调用该函数以尝试下一个节点。

# c# - 如何在“添加到购物车”按钮上编码

> ID：13618562
> 
> 赞同：2
> 
> 时间：2012-11-29T03:55:24.037
> 
> 标签：c#, asp.net

我正在使用列表视图，请告诉我如何从列表视图模板中选择特定项目。在列表视图模板中，我使用了一个名为“添加到购物车”的按钮。以及如何将产品添加到购物车页面。

```
 <asp:ListView ID="ListView1" runat="server" DataSourceID="SqlDataSource1" 
    GroupItemCount="5">
    <AlternatingItemTemplate>
        <td runat="server" style="background-color:#FFF8DC;">
            <asp:Image ID="Image2" runat="server" Height="101px" 
                ImageUrl='<%# Eval("img") %>' Width="100px" />
            <br />
            Title:
            <asp:Label ID="titleLabel" runat="server" Text='<%# Eval("title") %>' />
            <br />author:
            <asp:Label ID="authorLabel" runat="server" Text='<%# Eval("author") %>' />
            <br />publisher:
            <asp:Label ID="publisherLabel" runat="server" Text='<%# Eval("publisher") %>' />
            <br />price:
            <asp:Label ID="priceLabel" runat="server" Text='<%# Eval("price") %>' />
            <br />
            <asp:Button ID="Button4" runat="server" Text="Add to Cart" 
                OnClick="Button4_Click" PostBackUrl="~/ShoppingCart.aspx" />
            <br />
        </td>
    </AlternatingItemTemplate>
    <EditItemTemplate>
        <td runat="server" style="background-color:#FFF8DC;">
            <asp:Image ID="Image2" runat="server" Height="101px" 
                ImageUrl='<%# Eval("img") %>' Width="100px" />
            <br />
            Title:
            <asp:Label ID="titleLabel" runat="server" Text='<%# Eval("title") %>'></asp:Label>
            <br />author:
            <asp:Label ID="authorLabel" runat="server" Text='<%# Eval("author") %>'></asp:Label>
            <br />publisher:
            <asp:Label ID="publisherLabel" runat="server" Text='<%# Eval("publisher") %>'></asp:Label>
            <br />price:
            <asp:Label ID="priceLabel" runat="server" Text='<%# Eval("price") %>'></asp:Label>
            <br />
            <asp:Button ID="Button4" runat="server" 
                Text="Add to Cart" OnClick="Button4_Click" 
                OnClientClick='<%# Eval("title", "{0}") %>' PostBackUrl="~/ShoppingCart.aspx" />
            <br />
        </td>
    </EditItemTemplate>
    <EmptyDataTemplate>
        <table runat="server" 
            style="background-color: #FFFFFF;border-collapse: collapse;border-color: #999999;border-style:none;border-width:1px;">
            <tr>
                <td>
                    No data was returned.</td>
            </tr>
        </table>
    </EmptyDataTemplate>
    <EmptyItemTemplate>
<td runat="server" />
    </EmptyItemTemplate>
    <GroupTemplate>
        <tr ID="itemPlaceholderContainer" runat="server">
            <td ID="itemPlaceholder" runat="server">
            </td>
        </tr>
    </GroupTemplate>
    <InsertItemTemplate>
        <td runat="server" style="">
            title:
            <asp:TextBox ID="titleTextBox" runat="server" Text='<%# Bind("title") %>' />
            <br />author:
            <asp:TextBox ID="authorTextBox" runat="server" Text='<%# Bind("author") %>' />
            <br />publisher:
            <asp:TextBox ID="publisherTextBox" runat="server" 
                Text='<%# Bind("publisher") %>' />
            <br />price:
            <asp:TextBox ID="priceTextBox" runat="server" Text='<%# Bind("price") %>' />
            <br />img:
            <asp:TextBox ID="imgTextBox" runat="server" Text='<%# Bind("img") %>' />
            <br />
            <asp:Button ID="InsertButton" runat="server" CommandName="Insert" 
                Text="Insert" />
            <br />
            <asp:Button ID="CancelButton" runat="server" CommandName="Cancel" 
                Text="Clear" />
            <br />
        </td>
    </InsertItemTemplate>
    <ItemTemplate>
        <td runat="server" style="background-color:#DCDCDC;color: #000000;">
            <asp:Image ID="Image1" runat="server" Height="100px" 
                ImageUrl='<%# Eval("img") %>' Width="101px" />
            <br />
            Title:
            <asp:Label ID="titleLabel" runat="server" Text='<%# Eval("title") %>' />
            <br />Author:
            <asp:Label ID="authorLabel" runat="server" Text='<%# Eval("author") %>' />
            <br />Publisher:
            <asp:Label ID="publisherLabel" runat="server" Text='<%# Eval("publisher") %>' />
            <br />Price:
            <asp:Label ID="priceLabel" runat="server" Text='<%# Eval("price") %>' />
            <br />
            <asp:Button ID="Button3" runat="server" Text="Add to Cart" 
                OnClientClick='<%# Eval("title", "{0}") %>' />
            <br />
        </td>
    </ItemTemplate>
    <LayoutTemplate>
        <table runat="server">
            <tr runat="server">
                <td runat="server">
                    <table ID="groupPlaceholderContainer" runat="server" border="1" 
                        style="background-color: #FFFFFF;border-collapse: collapse;border-color: #999999;border-style:none;border-width:1px;font-family: Verdana, Arial, Helvetica, sans-serif;">
                        <tr ID="groupPlaceholder" runat="server">
                        </tr>
                    </table>
                </td>
            </tr>
            <tr runat="server">
                <td runat="server" 
                    style="text-align: center;background-color: #CCCCCC;font-family: Verdana, Arial, Helvetica, sans-serif;color: #000000;">
                </td>
            </tr>
        </table>
    </LayoutTemplate>
    <SelectedItemTemplate>
        <td runat="server" 
            style="background-color:#008A8C;font-weight: bold;color: #FFFFFF;">
            title:
            <asp:Label ID="titleLabel" runat="server" Text='<%# Eval("title") %>' />
            <br />author:
            <asp:Label ID="authorLabel" runat="server" Text='<%# Eval("author") %>' />
            <br />publisher:
            <asp:Label ID="publisherLabel" runat="server" Text='<%# Eval("publisher") %>' />
            <br />price:
            <asp:Label ID="priceLabel" runat="server" Text='<%# Eval("price") %>' />
            <br />img:
            <asp:Label ID="imgLabel" runat="server" Text='<%# Eval("img") %>' />
            <br />
        </td>
    </SelectedItemTemplate>

</asp:ListView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T05:40:56.300

将 Command 与 Button 和 Listviews ItemCommand 事件一起使用。

页面：

```
<asp:ListView ID="ListView1" runat="server" DataSourceID="AccessDataSource1" 
    GroupItemCount="3"  ItemPlaceholderID="itemPlaceholder" DataKeyNames="Id">

  <asp:Button ID="cartbtn" Text="Add To cart" runat="server" ForeColor="Blue" Font-Underline="true" CommandName="Add" ></asp:Button>

    </ListView> 
```

在后面的代码中：

```
 protected void ListView1_ItemCommand(object sender, ListViewCommandEventArgs e)
    {       
        if (e.CommandName.ToString()=="Add")
        {
           //Write your code Here
        }
    } 
```

# java - java中的语法规则实现

> ID：13618563
> 
> 赞同：4
> 
> 时间：2012-11-29T03:55:33.180
> 
> 标签：java, algorithm, logic

我需要一些逻辑来找到句子中的语法模式：

```
[adjective]* [noun]+ [hyphen] [verb Past Participle | verb Present Participle | one of the special adjectives] [adjective]* [noun]+ 
```

其中 * 表示任何数字（0 或更多），？| 表示 0 或 1，+ 表示 1 或更多，| 意味着或。

如果我给出任何输入句子，逻辑必须搜索它是否包含上述模式。我完全不知道如何开始。请如果有人可以用一些逻辑建议我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T04:18:34.697

这是伪代码。它对输入进行 2 次传递，在第一次传递中，它将输入字符串中的每个单词转换为引用其类型的字母，在第二次传递中，您将第一次传递的结果与您的正则表达式匹配。

```
method(input) {
    typed_input = '';
    for (word in input) {
        if (word is noun) {
            typed_input += 'n'
        else if (word is adjective)
            typed_input += 'a'
        else if (word is hyphen)
            typed_input += 'h'
        else if (word is verb Past Participle)
            typed_input += 'v'
        else if (word is verb Present Participle)
            typed_input += 'p'
        else if (word is one of the special adjectives)
            typed_input += 's'
        else
           throw exception("invalid input")
    }
    return typed_input.match("a*n+h[v|p|s]a*n+")
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T04:42:58.057

你写的语法模式很简单，不实用。您应该使用块解析。句子中的形容词可能不仅是一个词（如“猫”），也可能是一组词（如“黑猫棕色眼睛”）。

当句子包含“块”而不是单个形容词时，您的模式将失败。句子应该像树结构一样解析。

语法检查是一个相当复杂的问题。**在你写任何东西之前——你应该熟悉有关语法检查和自然语言处理的理论。**

你可以从这个开始：

[Nay Yee Lina、Khin Mar Soeb 和 Ni Lar Thein 为翻译的英语句子开发基于块的语法检查器](https://www.aclweb.org/anthology/Y11-1026.pdf)

也许这也是：

[Lionel Clément、Kim Gerdes、Renaud Marlet 的语法检查器的语法校正算法深度解析和最小校正](http://hal.inria.fr/docs/00/39/62/40/PDF/FG2009-Clement-et-al.pdf)

[SCP：Philip Brooks 的简单块解析器](http://www.ai.uga.edu/mc/pronto/Brooks.pdf)

我可以把它放在评论中，但标题很长，在这里它更具可读性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-05T10:44:50.267

这可能会对您有所帮助。[链接到斯坦福解析器。](http://nlp.stanford.edu:8080/parser/index.jsp) 你也可以下载java中的代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-31T08:41:14.757

我已经使用stand ford解析器在java中编写了simler程序。您应该使用java stand ford解析器生成数组列表的标记词。

```
 package postagger;
    /*
     * 
     * 
     * lphabetical list of part-of-speech tags used in the Penn Treebank Project:

    Number
    Tag
    Description
    1\.  CC  Coordinating conjunction
    2\.  CD  Cardinal number
    3\.  DT  Determiner
    4\.  EX  Existential there
    5\.  FW  Foreign word
    6\.  IN  Preposition or subordinating conjunction
    7\.  JJ  Adjective
    8\.  JJR Adjective, comparative
    9\.  JJS Adjective, superlative
    10\. LS  List item marker
    11\. MD  Modal
    12\. NN  Noun, singular or mass
    13\. NNS Noun, plural
    14\. NNP Proper noun, singular
    15\. NNPS    Proper noun, plural
    16\. PDT Predeterminer
    17\. POS Possessive ending
    18\. PRP Personal pronoun
    19\. PRP$    Possessive pronoun
    20\. RB  Adverb
    21\. RBR Adverb, comparative
    22\. RBS Adverb, superlative
    23\. RP  Particle
    24\. SYM Symbol
    25\. TO  to
    26\. UH  Interjection
    27\. VB  Verb, base form
    28\. VBD Verb, past tense
    29\. VBG Verb, gerund or present participle
    30\. VBN Verb, past participle
    31\. VBP Verb, non-3rd person singular present
    32\. VBZ Verb, 3rd person singular present
    33\. WDT Wh-determiner
    34\. WP  Wh-pronoun
    35\. WP$ Possessive wh-pronoun
    36\. WRB Wh-adverb
     */
    import java.util.ArrayList;
    import java.util.Collection;
    import java.util.HashMap;
    import java.util.LinkedHashSet;
    import java.util.LinkedList;
    import java.util.List;
    import java.util.Map;
    import java.util.Scanner;
    import java.io.StringReader;

    import semanticengine.Description;

    import edu.stanford.nlp.objectbank.TokenizerFactory;
    import edu.stanford.nlp.process.CoreLabelTokenFactory;
    import edu.stanford.nlp.process.DocumentPreprocessor;
    import edu.stanford.nlp.process.PTBTokenizer;
    import edu.stanford.nlp.ling.CoreLabel;  
    import edu.stanford.nlp.ling.HasWord;  
    import edu.stanford.nlp.ling.TaggedWord;
    import edu.stanford.nlp.trees.*;
    import edu.stanford.nlp.parser.lexparser.LexicalizedParser;

    public class EnglishParser {
    public    static LexicalizedParser lp = null;

      public static void main(String[] args)
      {

          EnglishParser MC=new EnglishParser();
          Scanner sc=new Scanner(System.in);
          String s="";
          while(s!="end")
          {
          s=sc.nextLine();
          ArrayList<TaggedWord> AT=MC.Parse(s);
          Description obj=   new  Description(AT );

          System.out.println (AT);
          }

      }

    public static void demoDP(LexicalizedParser lp, String filename) {
        // This option shows loading and sentence-segment and tokenizing
        // a file using DocumentPreprocessor
        TreebankLanguagePack tlp = new PennTreebankLanguagePack();
        GrammaticalStructureFactory gsf = tlp.grammaticalStructureFactory();
        // You could also create a tokenier here (as below) and pass it
        // to DocumentPreprocessor
        for (List<HasWord> sentence : new DocumentPreprocessor(filename)) {
          Tree parse = lp.apply(sentence);
          parse.pennPrint();
          System.out.println();

          GrammaticalStructure gs = gsf.newGrammaticalStructure(parse);
          Collection tdl = gs.typedDependenciesCCprocessed(true);
          System.out.println(tdl);
          System.out.println();
        }
      }

      //Method for Pos taging.(POS) tagger that assigns its class
      //(verb, adjective, ...) to each word of the sentence,
      //para@ english is the argument to be tagged
      public ArrayList<TaggedWord> Parse(String English)
      { 
          String[] sent =English.split(" ");// { "This", "is", "an", "easy", "sentence", "." };
          List<CoreLabel> rawWords = new ArrayList<CoreLabel>();
          for (String word : sent) {
              CoreLabel l = new CoreLabel();
              l.setWord(word);
              rawWords.add(l);
                }
      Tree parse = lp.apply(rawWords);
      return parse.taggedYield();

      }

      public EnglishParser() 
      {
          lp = 
                  new LexicalizedParser("grammar/englishPCFG.ser.gz");

      } // static methods only

    }

    // return pattern of the sentence
        public String getPattern(ArrayList<TaggedWord> Sen) 
{
            Iterator<TaggedWord> its = Sen.iterator();
            while (its.hasNext()) {
                TaggedWord obj = its.next();
                if ((obj.tag().equals("VBZ")) || (obj.tag().equals("VBP"))) {
                    if (its.hasNext()) {
                        TaggedWord obj2 = its.next();

                        if (obj2.tag().equals("VBG")) {
                            if (its.hasNext()) {
                                TaggedWord obj3 = its.next();
                                if ((obj3.tag().equals("VBN"))) {
                                    return "PRESENT_CONT_PASS";

                                }
                            }
                            return "PRESENT_CONT";
                            // Present Continues
                        } else if ((obj2.tag().equals("VBN"))) {
                            return "PRESENT_PASS";

                        }
                        return "PRESENT_SIMP";

                    } else {
                        return "PRESENT_SIMP";
                    }

                } else if (obj.tag().equals("VBD")) {
                    if (its.hasNext()) {
                        TaggedWord obj2 = its.next();

                        if (obj2.tag().equals("VBG")) {

                            if (its.hasNext()) {
                                TaggedWord obj3 = its.next();
                                if ((obj3.tag().equals("VBN"))) {
                                    return "PATT_CONT_PASS";

                                }
                            }

                            return "PAST_CONT";
                        } else if ((obj2.tag().equals("VBN"))) {
                            return "PAST_PASS";

                        }
                        return "PAST_SIMP";

                    } else {
                        return "PAST_SIMP";
                    }

                }

                else if (obj.tag().equals("VB")) {
                    if (its.hasNext()) {
                        TaggedWord obj2 = its.next();

                        if (obj2.tag().equals("VBG")) {
                            return "FUT_CONT";
                        } else if ((obj2.tag().equals("VBN"))) {
                            return "FUT_CONT";

                        }

                    } else {
                        return "FUT_SIMP";
                    }

                }

            }
            return "NO_PATTERN";
        } 
```

# ios - iOS 类间块信令

> ID：13618565
> 
> 赞同：1
> 
> 时间：2012-11-29T03:55:41.057
> 
> 标签：ios, objective-c-blocks, block

我已经尽可能多地阅读了块，但是我似乎无法理解这个概念。我经常使用块来调用对象所有者类中的成功和失败块。

所以，假设我有`ClassA`一个变量`ClassB`. 我打电话`[ClassB method1]`。`method1`假设一切顺利，为了增加运行成功块的能力，究竟必须投入什么`method1`？它如何知道调用写入的成功块`ClassA`？任何例子都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T04:16:34.347

这是一个粗略而快速的例子。

在 ClassB.h 中使用成功/失败块定义函数：

```
- (void)doSomethingOnSuccess:(void (^)(NSString *resultString))success
                     failure:(void (^)(NSError *error))failure; 
```

在 ClassB.m 中：

```
- (void)doSomethingOnSuccess:(void (^)(NSString *resultString))success
                     failure:(void (^)(NSError *error))failure
{
  // Do some task
  BOOL taskSucceed = [self doSomeTask];
  if (taskSucceed) {
    NSString *result = @"done";
    // Check for success block
    if (success) 
      success(result);
  } else {
    // Generate error
    NSError *error = ...;
    if (failure)
      failure(error);
  }

} 
```

最后，在 A 类中：

```
[ClassB doSomethingOnSuccess:^(NSString *resultString) {
  // method succeeded
} failure:^(NSError *error) {
  // something failed
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T04:16:57.143

只需将块视为可以随时存储和执行的代码块。所以你的课程可能看起来像：

`ClassA.m`

```
- (void)someMethod
{
    ClassB *obj = [ClassB new];
    [obj doSomethingAndThen:^(BOOL success) {
        if (success) {
            NSLog(@"WIN!");
        }
        else {
            NSLog(@"Oh no");
        }
    }
} 
```

* * *

`ClassB.h`

```
typedef void (^SuccessBlock)(BOOL success);

@interface ClassB : NSObject

@property (nonatomic, copy) SuccessBlock successBlock;

- (void)doSomethingAndThen:(SuccessBlock)block;

@end 
```

* * *

`ClassB.m`

```
@interface ClassB

- (void)doSomethingAndThen:(SuccessBlock)block
{
    self.successBlock = block;

    // Assume LRThing is something like NSURLConnection
    LRThing *thing = [LRThing new];
    thing.delegate = self;
    [thing start];
}

- (void)longRunnigThingDidEnd
{
    if (_successBlock) {
        _successBlock(YES);
        self.successBlock = nil;
    }
}

- (void)longRunningThingDidFail
{
    if (_successBlock) {
        _successBlock(NO);
        self.successBlock = nil;
    }
}

@end 
```

这是一个非常简单的例子，显然你想做更多的检查，例如在分配一个块之前检查你是否已经有一个块`self.successBlock`。希望这可以帮助！

# events - 如何为 YUI3 中的所有按钮编写一个公共事件？

> ID：13618566
> 
> 赞同：0
> 
> 时间：2012-11-29T03:55:41.807
> 
> 标签：events, click, yui

**正如问题所描述的那样，但只是为了澄清，当我点击**任何按钮时，我想做一个常见的事情，比如警报
值。

 **请仅在 YUI3 中提出解决方案，因为我使用的是 YUI3。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T04:30:23.363

有一种更有效的方法来做到这一点：

```
Y.delegate('click', function(e) { ... }, 'body', 'button'); 
```

这会将单个事件处理程序附加到正文，而不是将单独的事件处理程序附加到每个按钮。

[YUI 文档 - 委托](http://yuilibrary.com/yui/docs/event/#delegation)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T04:11:36.500

如果我明白你想要什么，你想将每个按钮绑定到同一个事件吗？比如说用户点击了你想捕捉的任何按钮？如果是这样，这就是它的完成方式。

```
Y.all('button').on('click', function(e){
//handle event here
//e.preventDefault(); if needed to prevent default browser behavior 
}); 
```

这可以绑定到任何事件以获取有关[YUI 事件](http://yuilibrary.com/yui/docs/event/)应该有用的事件的更多详细信息。希望这可以帮助。**

# php - 新添加的数据要显示并向下滚动而不是向上滚动？

> ID：13618570
> 
> 赞同：0
> 
> 时间：2012-11-29T03:55:57.530
> 
> 标签：php, jquery, html

我将聊天数据附加到 div 但问题是新消息显示在聊天窗口的顶部而不是显示在底部>请帮助在底部显示新消息。

还有我如何为新附加的数据设置样式（不同的背景颜色等）？

```
 $.post('load.php', { tocom:id}, function(data) {
        $('#chat_window').html(data);
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T03:59:24.323

[`.append()`](http://api.jquery.com/append/)添加到末尾，[`.prepend()`](http://api.jquery.com/prepend/)添加到开头。

# javascript - JavaScript 数组中的负索引是否会影响数组长度？

> ID：13618571
> 
> 赞同：89
> 
> 时间：2012-11-29T03:56:00.137
> 
> 标签：javascript, arrays

在javascript中我定义了一个这样的数组

```
var arr = [1,2,3]; 
```

我也可以

```
arr[-1] = 4; 
```

现在如果我这样做

```
arr = undefined; 
```

我也失去了对**arr[-1]**值的引用。

所以对我来说，逻辑上似乎 arr[-1] 也是**arr**的一部分。

但是当我执行以下操作时（没有将 arr 设置为未定义）

```
arr.length; 
```

它返回**3**而不是**4**；

所以我的观点是**，如果数组可以与负索引一起使用，**这些负索引也应该是它们长度的一部分**。我不知道可能是我错了，或者我可能遗漏了一些关于数组的概念。

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2012-11-29T04:01:29.973

> 所以对我来说，逻辑上似乎 arr[-1] 也是 arr 的一部分。

是的，但不是你想象的那样。

您可以将任意属性分配给数组（就像 JavaScript 中的任何其他对象一样），这就是您在“索引”数组`-1`并分配值时所做的事情。由于这不是数组的成员，只是一个任意属性，因此您不应期望`length`考虑该属性。

换句话说，下面的代码做同样的事情：

```
​var arr = [1, 2, 3];

​arr.cookies = 4;

alert(arr.length) // 3; 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-11-29T04:09:05.153

该`length`属性将返回比分配的最高“索引”高一的数字，其中数组“索引”是大于或等于零的整数。请注意，JS 允许“稀疏”数组：

```
var someArray = [];
someArray[10] = "whatever";
console.log(someArray.length); // "11" 
```

当然，如果没有元素，那么`length`就是`0`。另请注意，如果您用于删除最高元素，`length`则不会更新。`delete`

但是数组是对象，因此您可以为属性分配其他任意属性名称，包括负数或分数：

```
someArray[-1] = "A property";
someArray[3.1415] = "Vaguely Pi";
someArray["test"] = "Whatever"; 
```

请注意，即使您提供像`-1`. （就此而言，正整数索引也变为字符串。）

数组方法，如`.pop()`,`.slice()`等，仅适用于零或更高的整数“索引”，而不适用于其他属性，因此`length`在这一点上是一致的。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-11-29T04:16:42.930

请注意，当您使用位置（或 0）索引时，值将放置在数组中：

```
var array = [];

array[0] = "Foo";
array[1] = "Bar";

// Result: ["Foo", "Bar"]
// Length: 2 
```

当您添加非索引值（不是 0-9+）时，情况并非如此：

```
var array = [];

array[0]  = "Foo";
array[1]  = "Bar";
array[-1] = "Fizzbuzz"; // Not a proper array index - kill it

// Result: ["Foo", "Bar"]
// Length: 2 
```

仅当您按照规则进行操作时，才会将值放置在数组中。如果你不这样做，他们就不会被接受。然而，它们在 Array 对象本身上被接受，这在 JavaScript 中几乎任何东西都是如此。即使`["Foo", "Bar"]`是我们数组中唯一的值，我们仍然可以访问`"Fizzbuzz"`：

```
array[-1]; // "Fizzbuzz" 
```

但请再次注意，这不是数组值的一部分，因为它的“索引”无效。相反，它只是作为另一个成员添加到数组中。我们可以以相同的方式访问其他数组成员：

```
array["pop"]; // function pop() { [native code] } 
```

请注意，我们正在访问`pop`数组上的方法，这告诉我们这包含本机代码。我们不是使用“pop”键访问任何数组值，而是数组对象本身的成员。我们可以通过循环访问对象的公共成员来进一步确认这一点：

```
for (var prop in array) 
    console.log(prop, array[prop]); 
```

吐出以下内容：

```
 0 Foo
 1 Bar
-1 Fizzbuzz 
```

再说一遍，它*在**object*上，但*不在**array*中。

真棒问题！导致我肯定做了双重考虑。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-07-18T16:22:27.390

如果您确实希望将负索引和其他索引包含在长度中，请自己创建功能：

```
function getExtendedArray() {
    var a = [];

    Object.defineProperty(a, 'totalLength', { 
        get : function() { return Object.keys(a).length; }
    });

    return a;
} 
```

然后例如：

```
var myArray = getExtendedArray();
console.log(myArray.totalLength); // 0
myArray.push("asdf");
myArray[-2] = "some string";
myArray[1.7777] = "other string";
console.log(myArray.totalLength); // 3 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-11-29T04:05:42.737

JavaScript 中的数组实际上是对象。它们只是从 Array 构造函数中创建的原型。

数组索引实际上是哈希图中的键，所有键都转换为字符串。您可以创建任何键（即“-1”），但 Array 上的方法被定制为像数组一样工作。所以`length`不是对象的大小，而是只保证大于最大的整数索引。同样，打印`arr`只会列出整数键 >= 0 的值。

[更多信息在这里。](http://en.wikipedia.org/wiki/JavaScript_syntax#Array)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2018-11-05T11:36:15.990

*数组*只是 JS 中一种特殊的*Object*。有一种特殊的语法，很好，因为它允许我们有效地使用它们。想象一下以这种方式编写数组字面量是多么乏味：

```
const array = {0: 'foo', 1: 'bar', 2: 'baz'} //etc... 
```

但*它们仍然是对象*。所以如果你这样做：

```
const myArray = [42, 'foo', 'bar', 'baz'];

myArray[-1] = 'I am not here';
myArray['whatever'] = 'Hello World'; 
```

这些非整数属性将附加到一个对象（数组是），但某些本机方法（如`Array.length`.

~~您可以假设本机 'length' 方法是一个 getter，它计算所有属性（索引*是*属性，而值是实际*值*）可转换为正整数或零。像这样的伪实现：~~

由于[规范](https://www.ecma-international.org/ecma-262/9.0/index.html#sec-array-exotic-objects)，本机`length`方法 - 作为*getter* ( `exampleArray.length`) - 将检查所有“小于 2 ^(32)的非负整数”键，获取最大的键并返回其数值 + 1。

作为*setter* ( `exampleArray.length = 42`)，如果给定长度大于非负整数键的实际数量，它将为“缺失”索引创建一些空槽，或者删除所有不大于给定长度。

伪实现：

```
const myArray = {
  '-1': 'I am not here', // I have to use apostrophes to avoid syntax error
  0: 42,
  1: 'foo',
  2: 'bar',
  3: 'baz',
  whatever: 'Hello World',

  get myLength() {
    let highestIndex = -1;
    for (let key in this) {
      let toInt = parseInt(key, 10);
      if (!Number.isNaN(toInt) && toInt > -1) {
        // If you're not an integer, that's not your business! Back off!
        if (toInt > highestIndex) highestIndex = toInt;
      }
    }
    return highestIndex + 1;
  },
  set myLength(newLength) {
    /* This setter would either:
      1) create some empty slots for 'missing' indices if the given length is greater than the actual number of non-negative-integer keys
      2) delete all non-negative-integer keys (and their values) which are not greater then the given length.
    */
  }
}

console.log(myArray.myLength); // 4

myArray[9] = 'foobar';

console.log(myArray.myLength); // 10
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-29T04:25:42.400

根据 MDN：

> length 属性的值是一个带正号且值小于 2 的 32 次方 (232) 的整数

在 Javascript 中，您可以在您创建的任何对象上设置属性。

```
var array = new Array();
array = [1,2,3];
array["boom"] = "pow"; 
```

同样，当您设置负索引时，它会将其作为属性存储在数组中，而不是索引的一部分。

```
array[-1] = "property does not add to array length"; 
```

这就是为什么长度没有反映它，而是一个 for..in 循环显示它的原因。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-11-29T04:06:37.333

当您使用非正数或非数字索引时，数组表现为具有键值对的关联数组。

要遍历数组，您可以使用

```
for(var index in myArray) {
  document.write( index + " : " + myArray[index] + "<br />");
} 
```

# javascript - 对象未定义的javascript车把

> ID：13618576
> 
> 赞同：0
> 
> 时间：2012-11-29T03:56:46.407
> 
> 标签：javascript, handlebars.js

这工作正常并返回我传递给函数的字符串

```
 Handlebars.registerHelper('date', function (strng) {        
    return strng;
    }); 
```

这告诉我 strng 是未定义的..

```
 Handlebars.registerHelper('date', function (strng) {       
    return strng.substring(1,7);
    }); 
```

我究竟做错了什么？

更多背景：

我将此添加到 handlebars.js 文件中。

我使用以下模板调用它：

`Date Added: <b>{{{date TriageRecord.DateAdded}}}</b> <br />`

我添加的第一段代码将字符串返回到模板就好了。当我添加 strng.substring(1,7) 时，它会出错。

文档：[这里](http://handlebarsjs.com/expressions.html)

# ruby-on-rails - 自动修改表单并提交

> ID：13618578
> 
> 赞同：0
> 
> 时间：2012-11-29T03:56:57.030
> 
> 标签：ruby-on-rails, ruby

**我想要做什么：** 显示由产品 ID 定义的许多产品，当用户选择某个产品时，我将打开一个不同的网页，该网页会自动填写一些带有这些详细信息的表单，然后单击提交按钮（基本上将该特定项目添加到购物车）

**我的主要问题是：** 除了使用javascript之外，我还能做到这一点吗？是否有可能在 rails/pure ruby​​ 上做这样的事情（真的很想看看在 ruby​​ 中是否有解决方案）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T04:02:45.557

你可能需要Javascript。

这里的原因是，只要您的应用程序必须响应某些用户交互，例如选择某个产品，服务器就无法知道事件已经发生，除非它被明确告知。

# android - Android 正在创建我的服务的多个实例

> ID：13618581
> 
> 赞同：1
> 
> 时间：2012-11-29T03:56:59.780
> 
> 标签：android, service

在我的 Android 应用程序中，我希望能够在后台播放一些音频。我认为在服务中使用 MediaPlayer 应该正是我所需要的。因此，我几乎按照 Google 在 Android 开发者网站上的示例代码创建了一个服务。但是，我的问题是，每当启动一个尝试绑定到服务的新活动时，都会启动一个新服务（或者至少正在重新调用 onCreate）。我已经阅读了文档，我所做的*应该*是完全合法的。谁能提供一些进一步的见解？谢谢！

```
public class PlayerService extends Service implements MediaPlayer.OnPreparedListener, MediaPlayer.OnErrorListener, MediaPlayer.OnBufferingUpdateListener {

public class PlayerBinder extends Binder {
    PlayerService getService() {
        return PlayerService.this;
    }
}

private final IBinder mBinder = new PlayerBinder();

public IBinder onBind(Intent intent) {
    return mBinder;
} 
```

从我的活动中我绑定到一个服务`onCreate`

```
private void doBindService() {
    this.bindService(new Intent(this, PlayerService.class), connection, Context.BIND_AUTO_CREATE);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T04:10:20.073

当您使用时，`bindService`您的`Service`被创建并与您的`Activity`. 这意味着当你`Activity`被摧毁时，你的`Service`.

如果你想让你`Service`保持开始，你必须先打电话`startService(Intent)`。例如，您可以在您的应用程序中调用它`onCreate()`。

之后，您仍然可以绑定到您的`Service`，并且当您取消绑定时，它将保持启动状态，直到 Android 决定终止您的进程或者您调用`stopService(Intent)`或`stopSelf()`从代码中的某个位置调用。

为获得更好的效果，并获得不间断的音乐播放，您应该将您的设置`Service`为在前台模式下运行（请参阅[this](http://developer.android.com/reference/android/app/Service.html#startForeground%28int,%20android.app.Notification%29)）。

请记住，Android 仍然有可能终止您的进程并停止音乐播放，但如果您处于前台模式，则机会非常渺茫。

# xhtml - 如何确保我的文档类型是 XHTML 1.0 Strict

> ID：13618583
> 
> 赞同：1
> 
> 时间：2012-11-29T03:57:05.190
> 
> 标签：xhtml, maps, markup, doctype, transitional

在处理 XHTML 1.0 Strict 页面时，我发现它`iframe`已被弃用。我做了一些研究，并用`object`标签替换了它。

```
<object id="gmap" type="text/html" data="https://maps.google.ca/maps/ms?msa=0&amp;msid=216725582357492079329.0004cf99c633289e8b190&amp;hl=en&amp;ie=UTF8&amp;t=m&amp;ll=34.870479,-40.172607&amp;spn=34.201734,120.673828&amp;output=embed"></object> 
```

它经过验证，但作为 HTML 4.0 过渡。如何将其验证为 XHTML 1.0 Strict？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-01T05:57:12.267

W3C 验证器不验证嵌入在`iframe`or`object`标记中的内容。如果您想知道如何使其符合 XHTML 1.0 Strict，请从有效的 XHTML 1.0 Strict 文档开始，例如：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>Example</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
</head>
<body>
    <div><object data="http://example.com"></object></div>
</body>
</html> 
```

然后添加您的标记而不使其无效。

# android - 一次下载一个管理器多个文件

> ID：13618586
> 
> 赞同：1
> 
> 时间：2012-11-29T03:57:21.587
> 
> 标签：android, http, download-manager

我正在尝试使用下载管理器并一次发送多个文件。由于它们都来自同一台服务器（家庭服务器），因此会导致相当大的延迟。什么是最简单的方法（如果有的话）只发送一个文件到下载管理器，当它完成后开始第二个？

有队列的概念吗？

非常感谢，克雷格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T17:31:56.620

不知道为什么，但这似乎是一个网络问题。我的服务器真的很瓶颈。我重新启动了服务并增加了 Tomcat 的内存。一旦我这样做了，问题就消失了。此外，下载管理器在给定时间仅调用几个文件。

貌似是网络问题，已经解决了。

# wget - msys 中的 wget 无法下载 HTTP 重定向后面的目标文件

> ID：13618590
> 
> 赞同：0
> 
> 时间：2012-11-29T03:57:41.790
> 
> 标签：wget, msys

我`wget`在**msys**中使用下载 HTTP 重定向后面的目标文件，但它总是直接保存一个由 HTTP 重定向命名的文件，而不是重定向后面的目标文件。谷歌之后，有一个选项`--trust-server-names=on`可以解决问题。但是对于`wget`msys**版本**，它根本没有这个选项。因此，这是否意味着：

-> 对于`wget`msys**版本**（我的意思是来自 MinGW 站点的版本），无法解决上述问题。

-> 要解决msys中的问题，我必须下载src文件并在msys中编译并`--trust-server-names=on`自己添加选项。

还有其他我想念的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T06:36:54.120

对于没有选项**--trust-server-names=on**的 wget ，该选项`--spider`可能会有所帮助。使用选项“--spider”，它可以检索 HTTP 重定向并告诉您真实位置。我在某个地址上试了一下。一些工作（然后你可以使用 wget 通过真实位置下载），另一个失败。对于失败的地址，输出是这样的，例如：

```
Length: 2175717 (2.1M) [application/x-download]
Remote file exists but does not contain any link -- not retrieving. 
```

它似乎找到了一个文件，但找不到链接。在这种情况下，我不知道该怎么做。

# c++ - Argv[] 未注册参数

> ID：13618591
> 
> 赞同：1
> 
> 时间：2012-11-29T03:57:43.680
> 
> 标签：c++, argv

这是代码的摘录。

```
int main(int argc, char*argv[])
string s;

if (argc == 2)
    argv[1] == s;             //I tried this with and without brackets

else if (argc == 1){
    cout << "Enter a number." << endl;
    cin >> s;
    }
else
    {    
    cout << "Use only one argument" << endl;
    }

cout << s << endl; 
```

但是，如果有一个论点（第一个条件），那么它总是 0。有人知道为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T04:00:26.260

这条线

```
argv[1] == s; 
```

应该

```
s = argv[1]; 
```

您当前的代码使用 与`argv[1]`空字符串进行比较`==`，并丢弃比较结果。看起来您是在将第一个参数放入 string`s`之后，所以您需要一个赋值。

# codeigniter - CI-Merchant & SagePay - 似乎无法让它回应任何东西

> ID：13618592
> 
> 赞同：3
> 
> 时间：2012-11-29T03:57:43.723
> 
> 标签：codeigniter, paypal, opayo, ci-merchant

我正在将 CI-Merchant 集成到 Codeigniter 项目中，以使用 Paypal 和 SagePay 处理付款。

我已经从[http://ci-merchant.org/](http://ci-merchant.org/)为 paypal_express 完成了演示，并且效果很好（或者至少在我使用示例代码时给了我一个正确的错误 - 请参见下面的带有 paypal 代码的响应）

```
Merchant_response Object
(
[_status:protected] => failed
[_message:protected] => Security header is not valid
[_reference:protected] => 
[_data:protected] => 
[_redirect_url:protected] => 
[_redirect_method:protected] => GET
[_redirect_message:protected] => 
[_redirect_data:protected] => 
) 
```

我已经更新了 Sagepay 的代码，如下所示

```
public function index()
{
    $this->load->helper('language');
    $this->load->library('merchant');
    $this->merchant->load('sagepay_direct');

    $settings = array (
        'vendor' => 'testvendor',
        'test_mode' => FALSE,
        'simulator_mode' => TRUE,
    );

    $this->merchant->initialize($settings);

    $params = array(
        'description'=>'Test purchase',
        'currency'=>'GBP',
        'transaction_id'=>'12345',
        'email'=>'test@person.com',
        'first_name'=>'Test',
        'last_name'=>'Person',
        'address1'=>'1 Random Avenue',
        'address2'=>'Made Up Drive',
        'city'=>'Notarealcity',
        'postcode'=>'FA11 1KE',
        'country'=>'UK',
        'region'=>'',
        'phone'=>'0101010101',

        'amount'=>125.00,
        'card_no'=>'4444444444444444', 
        'name'=> 'Mr Test', 
        'card_type' => 'VISA', 
        'exp_month'=> 11, 
        'exp_year'=> 15,
        'csc'=> 999
    );

    $response = $this->merchant->purchase($params);

    echo '<pre>';
    print_r($response);
    exit;
} 
```

该代码的输出是

```
Merchant_response Object
(
[_status:protected] => failed
[_message:protected] => 
[_reference:protected] => 
[_data:protected] => 
[_redirect_url:protected] => 
[_redirect_method:protected] => GET
[_redirect_message:protected] => 
[_redirect_data:protected] => 
) 
```

这并没有给我任何关于可能出现问题的信息。

我正在使用有效的供应商名称，并将服务器的 IP 地址输入到 SagePay 模拟器中，请求来自的页面是 https，请求来自的 URL 已添加到 sage 支付模拟器帐户部分。

看起来应该很好，但现在卡住了 - 我真的很感激这方面的任何帮助。

提前致谢

杰森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T21:51:17.613

该 PayPal 错误通常意味着您正在尝试在测试模式下使用真实账户，反之亦然。

我不确定为什么 Sagepay 根本没有报告任何错误。这可能与本地化错误消息的 lang() 函数有关，但我不确定。您可能需要在 Mercer_sagepay.php 中添加一些调试行，以查看真正的响应是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-09T06:22:33.630

您没有在`$setting` 变量中传递正确的参数

```
$settings = array(
            'username' => 'API Merchants user name',
            'password' => 'API Merchants passwrd',
            'signature' => 'API Merchants signature',
            'test_mode' => true);// for sand box its true else false
        $this->merchant->initialize($settings); 
```

# python - C 和 Python 中的套接字

> ID：13618601
> 
> 赞同：3
> 
> 时间：2012-11-29T03:58:42.367
> 
> 标签：python, c, sockets

我正在创建一个客户端-服务器程序。服务器向客户端发送一个数字范围，客户端对该范围进行操作（找到完美数字）并返回结果。服务器用 Python 编写，客户端用 C 编写。这是我的代码：

服务器（Python）：

```
import socket

def SendRequestToCompute():
    # Server-side
    SERV_IP = '--some ip--'
    # Port
    SERV_PORT = --some port--

    # Create socket
    serv_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    serv_socket.connect((SERV_IP, SERV_PORT))
    serv_socket.sendall('100')
    serv_socket.close()

def ReceiveRequestFromCompute():
    # Server-side: all available resources
    SERV_IP = ''
    SERV_PORT = 2890
    # Create and bind the sockets
    serv_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)

    # Make the socket "reusable" for further tries
    serv_socket.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)

    serv_socket.bind((SERV_IP, SERV_PORT))
    serv_socket.listen(1)

    # Accept the connection and block until a socket is received
    client_conn, client_addr = serv_socket.accept()

    print 'Connection established: ', client_addr
    while 1:
        data = client_conn.recv(1024)

        # Get the string of numbers
        joint_string = repr(data)
        # get rid of the ' character at the begining and end caused by repr()
        joint_string = joint_string[1:]

        return joint_string

        # break out of the while loop once all the numbers were recieved
        break   
        if not data: break
    client_conn.close()

def SendNumbersToReport(results):
    # Server-side
    SERV_IP = --some ip--
    # port
    SERV_PORT = --some port-

    # Create socket
    serv_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    serv_socket.connect((SERV_IP, SERV_PORT))
    serv_socket.sendall(results)
    data = serv_socket.recv(3)
    serv_socket.close()

def main():

    print 'Sending a range of numbers to compute to work on.'
    # Send a request to compute
    SendRequestToCompute()

    print 'Waiting to get the results from compute...'
    # Receive the results from compute
    results = ReceiveRequestFromCompute()

    print 'Sending numbers to report to print...'
    #Send the numbers to report for printing
    SendNumbersToReport(results)

if __name__ == "__main__": main() 
```

客户 (C):

```
#include    <sys/types.h>   
#include    <sys/socket.h>
#include    <sys/time.h>    
#include    <time.h>        
#include    <netinet/in.h>  
#include    <arpa/inet.h>   
#include    <errno.h>
#include    <fcntl.h>       
#include    <netdb.h>
#include    <signal.h>
#include    <stdio.h>
#include    <stdlib.h>
#include    <string.h>
#include <strings.h>     
#include    <sys/stat.h>    
#include    <sys/uio.h> 
#include    <unistd.h>
#include    <sys/wait.h>
#include    <sys/select.h>
#include <pthread.h>

#define MAXLINE 4096    /* max text line length */
#define MAXSOCKADDR 128 /* max socket address structure size */
#define BUFFSIZE    8192    /* buffer size for reads and writes */

#define SERV_PORT_REQUEST 2891 /* The port number to get request from compute */
#define SERV_PORT        --port number--
#define SERV_IP "--some ip--" /* IP address */

long range = 0;

// The global variable to hold the numbers
char *strnumbers;

// Function prototypes
void *ThreadWorker(void *threadId);

int main(int argc, char **argv){
    int i;
    int sockfd;
    ssize_t n;
    struct sockaddr_in cliaddr;
    struct sockaddr_in  servaddr;
    socklen_t clilen;
    char sendline[MAXLINE];
    char recvline[MAXLINE];
    char buffer[MAXLINE];
    int listenfd;
    pthread_t thread;
    void *status;

    // Initialize the strnumbers array
    strnumbers = (char *) malloc (100 * sizeof(char));

    // Get the range of numbers from the server to work on
    listenfd = socket(AF_INET, SOCK_STREAM, 0);

    bzero(&servaddr, sizeof(servaddr));
    servaddr.sin_family = AF_INET;
    servaddr.sin_addr.s_addr = htonl(INADDR_ANY);
    servaddr.sin_port = htons(SERV_PORT_REQUEST);

    // General information for the user
    printf("Waiting to recieve a request from the server (manage)...\n");

    // Bind the socket and start listening for the peer socket
    bind(listenfd, (struct sockaddr *) &servaddr, sizeof(servaddr));
    listen(listenfd, 1);

    clilen = sizeof(cliaddr);
    sockfd = accept(listenfd, (struct sockaddr*)&cliaddr, &clilen);

    bzero(buffer, MAXLINE);

    if((n = read(sockfd, buffer, MAXLINE)) == 0){
        //connection closed by client
        close(sockfd);
    }else{
        // Convert the received range (string) to integer
        range = atoi(buffer);
        close(sockfd);
    }

    printf("Request received: Working on %lld numbers.\n", range);

    // Create the thread to find the perfect numbers
    if((pthread_create(&thread, NULL, ThreadWorker, (void *)0)) != 0){
        perror("Failed to create a thread.\n");
        exit(-1);
    }

    // Wait for the thread to finish its job
    pthread_join(thread, &status);

    // Create the socket to send the the results with
    sockfd = socket(AF_INET, SOCK_STREAM, 0);

    bzero(&servaddr, sizeof(servaddr));
    servaddr.sin_family = AF_INET;
    servaddr.sin_port = htons(SERV_PORT);
    inet_pton(AF_INET, SERV_IP, &servaddr.sin_addr);

    // Connect to the created socket
    if((connect(sockfd, (struct sockaddr *) &servaddr, sizeof(servaddr))) != 0){
      perror("Unable to connect to the server - make sure the server is up and running.");
      exit(-1);
    }

    // Send the numbers via the socket
    write(sockfd, strnumbers, 100);

    // Close the socket
    close(sockfd);

    exit(0);
}

void *ThreadWorker(void *threadId)
{
  long long total = 0;
  long long sum = 0;
  long long num;
  long long j;

  char buffer[30];

  // Brute-force algorithm to find the perfect numbers that will take approximately 15 seconds
  for(num = 1; num < range; num++){
    sum = 0;
    for(j = 1; j < num; j++){
      if((num % j) == 0){
        sum+=j;
      }
    }

    if(sum == num){
      // Convert the long number to string
      snprintf(buffer, 10, "%lld", sum);
      // Concatenate the string to the strnumbers array
      strcat(strnumbers, buffer);
      // Add a special character at the end of the each number to differentiate each number
      strcat(strnumbers, "/");
    }

  } 

    pthread_exit(NULL);
} 
```

该程序在第一次运行时运行良好，但在运行两次或多次后，服务器会抛出一个异常，提示：`socket.error: [Errno 111] Connection refused`尝试向客户端发送一系列数字时。我有一种感觉，也许我没有适当地关闭连接，但我无法弄清楚我做错了什么。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T04:48:23.633

两个程序之间不需要多个 TCP 连接，一个就足够了，因为它是全双工的。

我建议您让您的生活更轻松，并遵循公认的客户端/服务器设计，其中服务器将其服务器套接字*绑定*到已知端口，*侦听*客户端连接，*接受*并服务它们，而客户端*连接*到已知地址和端口，然后发送和通过该单个 TCP 连接接收消息（根据您定义的某些应用程序协议）。

# java - JTextPane 文本未更新可能来自范围问题

> ID：13618605
> 
> 赞同：0
> 
> 时间：2012-11-29T03:59:14.690
> 
> 标签：java, multithreading, swing, oop, sockets

我正在尝试更改 JTextPane 的内容。我认为问题是范围问题。您无法编译此代码，但您明白了……由于多线程，这可能很难。TYIA

```
C:\ucdhb2\gaia\inigui\inigui15\src\inigui13.java:259: error: local
variable theframe is accessed from within inner class; needs to be declared final
                    theframe.mainfield.getStyledDocumemt().insertString(1, "hellooo",
null);
                    ^ C:\ucdhb2\gaia\inigui\inigui15\src\inigui13.java:259: error: cannot
find symbol
                    theframe.mainfield.getStyledDocumemt().insertString(1, "hellooo",
null);
                                      ^   symbol:   method getStyledDocumemt()   location: variable mainfield of type JTextField
2 errors 
```

## 代码

```
 class inigui13 extends applet  {

        Socket echoSocket = null;
        PrintWriter out = null;
        BufferedReader in = null;
        JTextField mainfield;

      public void init() { 

        inigui13 theframe = new inigui13(); 
        theframe.setSize(700, 525); 
        theframe.setVisible(true); 

        try {

            echoSocket = new Socket("192.168.2.3",  9900);
                        out = new PrintWriter(echoSocket.getOutputStream(), true);
            in = new BufferedReader(new InputStreamReader( echoSocket.getInputStream() ) );
        } catch (UnknownHostException e) {

            System.err.println("Sstemexit");
            System.exit(1);

        } catch (IOException e) {

                System.err.println("IOFailed");
                System.exit(1);
        }

        Runnable readsock = new Runnable()  {

            public void run()   {

                boolean recvread = true;

                while( recvread )   {

                    BufferedReader stdIn = new BufferedReader( new InputStreamReader(System.in));

                    try {

                    theframe.mainfield.getStyledDocumemt().insertString(1, "hellooo", null);

                    } catch( IOException e ){}

                }

                  }

                    try {

                        out.close();
                        in.close();
                        echoSocket.close();
                    } catch( IOException e ){}

        }

        };

        Thread readsockt = new Thread(readsock);
        readsockt.start();
       }

       public inigui13  {

          mainfield = new JTextPane;
          this.add(mainfield);
      }
};
       } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T04:04:10.583

不要，**永远**，更新，更改或修改任何线程**以外的****任何**UI 组件，然后是**事件调度线程**。这几乎涵盖了 Swing 的前 10 条诫命。

 ****您的代码是何时使用`SwingWorker`.

您可能想通读[Swing 中的并发](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)

**例子**

```
public class StreamReaderWorker extends SwingWorker<Object, String> {

    private JTextPane field;

    public StreamReaderWorker(JTextPane field) {
        this.field = field;
    }

    @Override
    protected void process(List<String> chunks) {
        for (String chunk : chunks) {
            try {
                field.getStyledDocument().insertString(1, "chunk", null);
            } catch (BadLocationException ex) {
                ex.printStackTrace();
            }
        }
    }

    @Override
    protected String doInBackground() throws Exception {
        boolean recvread = true;
        while (recvread) {
            BufferedReader stdIn = new BufferedReader(new InputStreamReader(System.in));
            try {
                publish("hellooo");
            } catch (IOException e) {
            }
        }
        return null;
    }
} 
```****

# c++ - Windows API 中的驱动器/分区和唯一驱动器 ID

> ID：13618606
> 
> 赞同：1
> 
> 时间：2012-11-29T03:59:17.833
> 
> 标签：c++, winapi, drive

好吧，我正在寻找一个可以获取唯一驱动器 ID（序列号？）的程序，并将其放入数据库中，将 ID 与一些文件相关联。如果我想在诸如闪存驱动器之类的东西（可以更改驱动器号）上找到一个文件，我附上闪存驱动器，我的程序扫描它的唯一 ID，根据 stl::map 之类的东西查找文件，然后转换驱动器号的唯一 ID。

该程序还需要识别分区（显然），所以可能是设备上的 uniqueid+partitionnumber。

关于如何解决这个问题的任何想法？我正在查看 EnumDisk 的源代码（Windows 代码示例），但包含的演示 .exe 在 Windows 7 下似乎不起作用（说它是兼容的，无需从源代码重建）。

有接盘侠吗？

PS 我从 ENumDisk.exe 'CreateFile failed with error: 5' 得到这个错误

PSS 哦，我希望程序能够扫描来自其他文件系统的驱动器并获取*它们的*序列号。我知道这是一项艰巨的任务，但这是我的最终目标。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T04:37:45.460

你很幸运——Windows（特别是 Mount Manager）维护着这样一个唯一卷标识符的数据库。查看[卷管理 API](http://msdn.microsoft.com/en-us/library/aa365728%28v=vs.85%29.aspx)

例如，您可以使用[GetVolumeNameForVolumeMountPoint](http://msdn.microsoft.com/en-us/library/aa364994%28VS.85%29.aspx)来获取给定安装点（包括驱动器号）甚至可移动卷的唯一标识符。或者，由于一个卷可以有多个挂载点，您可以使用[FindFirst/NextVolumeMountpoint](http://msdn.microsoft.com/en-us/library/aa364426%28v=vs.85%29.aspx)枚举给定卷 ID (GUID) 的挂载点。

玩得开心！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T04:37:36.447

错误 5 是拒绝访问。这意味着您很可能以非管理员身份运行。如果您尝试打开物理驱动器，您可以通过将“dwDesiredAccess”参数设置为 0 来逃脱。它可能会成功打开设备，但后续操作可能会失败，具体取决于您使用返回的句柄的 API 函数和。

至于获取分区信息，请查看 MSDN 上的 IOCTL_DISK_GET_DRIVE_LAYOUT [http://msdn.microsoft.com/en-us/library/windows/desktop/aa365173(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365173(v=vs.85).aspx)和[http://msdn 上的 IOCTL_DISK_GET_PARTITION_INFO。 microsoft.com/en-us/library/windows/desktop/aa365179(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365179(v=vs.85).aspx)

您将能够收集所有分区，甚至那些属于 Windows 无法识别的文件系统的分区。

# c - OSX：无法使用 dlopen() 解决依赖关系

> ID：13618610
> 
> 赞同：1
> 
> 时间：2012-11-29T03:59:45.147
> 
> 标签：c, macos, dlopen

我在 OSX 上有一个库 libni，我正在尝试使用 dlopen() 打开，它似乎无法将依赖关系解析为另一个 dlopen()'d 库。

让我们不要讨论为什么不应该使用 dlopen(); 可以说，我必须在这种情况下使用它。

无论如何，这是 libni.dylib 上的 otool -L：

```
lib/libni.dylib:
  libni.dylib (compatibility version 0.0.0, current version 0.0.0)
  libn.dylib (compatibility version 0.0.0, current version 0.0.0)
  /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 169.3.0)
  libzlib.dylib (compatibility version 0.0.0, current version 0.0.0)
  libpng.dylib (compatibility version 0.0.0, current version 0.0.0)
  liblua.dylib (compatibility version 0.0.0, current version 0.0.0)
  libSDL2.0.dylib (compatibility version 0.0.0, current version 2.0.0)
  libstb.dylib (compatibility version 0.0.0, current version 0.0.0)
  libax.dylib (compatibility version 0.0.0, current version 0.0.0)
  libsqlite3.dylib (compatibility version 0.0.0, current version 0.0.0)
  libfreetype.dylib (compatibility version 0.0.0, current version 0.0.0)
  /usr/lib/libiconv.2.dylib (compatibility version 7.0.0, current version 7.0.0)
  /System/Library/Frameworks/Cocoa.framework/Versions/A/Cocoa (compatibility version 1.0.0, current version 19.0.0)
  /System/Library/Frameworks/IOKit.framework/Versions/A/IOKit (compatibility version 1.0.0, current version 275.0.0)
  /System/Library/Frameworks/ForceFeedback.framework/Versions/A/ForceFeedback (compatibility version 1.0.0, current version 1.0.2)
  /System/Library/Frameworks/Carbon.framework/Versions/A/Carbon (compatibility version 2.0.0, current version 155.0.0)
  /System/Library/Frameworks/CoreAudio.framework/Versions/A/CoreAudio (compatibility version 1.0.0, current version 1.0.0)
  /System/Library/Frameworks/AudioUnit.framework/Versions/A/AudioUnit (compatibility version 1.0.0, current version 1.0.0) 
```

这是在 libn、zlib 和 png 上：

```
libn.dylib:
  libn.dylib (compatibility version 0.0.0, current version 0.0.0)
  /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 169.3.0)

libpng.dylib:
  libpng.dylib (compatibility version 0.0.0, current version 0.0.0)
  libzlib.dylib (compatibility version 0.0.0, current version 0.0.0)
  /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 169.3.0)

libzlib.dylib:
  libzlib.dylib (compatibility version 0.0.0, current version 0.0.0)
  /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 169.3.0) 
```

现在我使用 dlopen() 按顺序打开我的“lib”目录中的所有动态库，使用：

```
/** Open a dynamic library file */
void *Type__(open) (char *path) {
  void *impl = dlopen(path, RTLD_NOW | RTLD_GLOBAL);
  if (impl == NULL) {
    char *err = dlerror();
    N_LOG(N_LOG_DEBUG, "Failed to open: %s", err);
  }
  else {
    N_LOG(N_LOG_DEBUG, "Happy open: %s", path);
    rtn = nPosixLinker__Lib(path, impl);
  }
  return rtn;
} 
```

...并得到这样的错误/消息：

```
Happy open: /Users/doug/projects/libni/build/tests/IImageLoader/lib/libzlib.dylib
Happy open: /Users/doug/projects/libni/build/tests/IImageLoader/lib/libstb.dylib
Happy open: /Users/doug/projects/libni/build/tests/IImageLoader/lib/libsqlite3.dylib
Happy open: /Users/doug/projects/libni/build/tests/IImageLoader/lib/libSDL2.dylib
Happy open: /Users/doug/projects/libni/build/tests/IImageLoader/lib/libn.dylib
Failed to open: dlopen(/Users/doug/projects/libni/build/tests/IImageLoader/lib/libpng.dylib, 10): Library not loaded: libzlib.dylib
  Referenced from: /Users/doug/projects/libni/build/tests/IImageLoader/lib/libpng.dylib
  Reason: image not found
Failed to open: dlopen(/Users/doug/projects/libni/build/tests/IImageLoader/lib/libni.dylib, 10): Library not loaded: libn.dylib
  Referenced from: /Users/doug/projects/libni/build/tests/IImageLoader/lib/libni.dylib
  Reason: image not found
Happy open: /Users/doug/projects/libni/build/tests/IImageLoader/lib/liblua.dylib
Happy open: /Users/doug/projects/libni/build/tests/IImageLoader/lib/libfreetype.dylib
Happy open: /Users/doug/projects/libni/build/tests/IImageLoader/lib/libax.dylib
Failed to open: dlopen(/Users/doug/projects/libni/build/tests/IImageLoader/lib/libtest-ni-IImageLoader__.dylib, 10): Library not loaded: libni.dylib
  Referenced from: /Users/doug/projects/libni/build/tests/IImageLoader/lib/libtest-ni-IImageLoader__.dylib
  Reason: image not found 
```

所以这里肯定发生了一些奇怪的事情。zlib 在 libpng 之前打开，但 libpng 无法解析引用。libn 在 libni 之前打开，但 libni 无法解析引用。

就像我的 RTLD_GLOBAL 被 dlopen() 忽略了，或者依赖项（例如 libn）没有找到加载的库（blah/libn.dylib），因为路径不同......

事实上，我似乎无法让 dlopen() 打开一个完全有依赖关系的库，*所以*我认为我一定做错了什么。

有什么建议么？

在 BSD 和 linux 上，这一切都行得通；这绝对是一个与 OSX 处理这些库的方式严格相关的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T05:04:09.400

看起来这是 this 的副本[，](https://stackoverflow.com/questions/6711908/dlopen-error-image-not-found)但是直到我已经找到解决方案之后我才完全找到它，所以我现在将把问题和这个链接都留在这里。

排序答案：使用 -install_name @rpath/lib 构建库

# windows-phone-7 - Windows phone 7 地图上未显示多个图钉

> ID：13618612
> 
> 赞同：1
> 
> 时间：2012-11-29T03:59:47.897
> 
> 标签：windows-phone-7, bing-maps

我正在尝试使用地图图层填充地图控件，但是每当我尝试将所有图钉添加到地图时，只会显示一个。我检查了这些值是否被添加到地图图层并且它们存在，那么问题是什么。

```
 private readonly CredentialsProvider _credentialsProvider = new ApplicationIdCredentialsProvider(App.Id);
    private static readonly GeoCoordinate DefaultLocation = new GeoCoordinate(18.091020, -77.377636);
    public List<Pushpin> Pushpins = new List<Pushpin>();

    public map()
    {
        InitializeComponent();

    var layer = new MapLayer();
        var api = new PPSApi.PPSApi();

        api.GetAllPotholes((res) =>
        {
            if (res.StatusCode == HttpStatusCode.OK)
            {
                foreach (var pothole in res.Data.pothole)
                {
                    Pushpin pin = new Pushpin();
                    pin.Location.Latitude = pothole.Latitude;
                    pin.Location.Longitude = pothole.Longitude;
                    layer.AddChild(pin,pin.Location);
                    Debug.WriteLine(pin.Location);

                }
            }

        });
        PotholeMap.Children.Add(layer); 
```

[地图截图。](http://i.stack.imgur.com/TVif1.png)

# fingerprint - 在 MIFARE 卡上存储生物特征数据以进行双重身份验证

> ID：13618615
> 
> 赞同：1
> 
> 时间：2012-11-29T04:00:00.123
> 
> 标签：fingerprint, biometrics, mifare

我有以 WSQ 格式存储的指纹数据库，并且我正在尝试通过验证存储在卡上的生物特征数据是否与放置在扫描仪上的手指相匹配来使用双因素身份验证（这反过来又链接到已注册指纹的数据库）。

我的挑战是，要使用读卡器，模板必须存储为 VUR、BUR 或 TEM 文件。有谁知道我如何将 WSQ 文件转换为这些格式中的任何一种，以便在 MIFARE 卡上继续存储？顺便说一句，设备/阅读器是 L-1 4G V-FLEX LITE(4GFXLSO) 阅读器

# performance - 由于 php::session_start，CakePHP 页面加载缓慢

> ID：13618622
> 
> 赞同：2
> 
> 时间：2012-11-29T04:00:34.820
> 
> 标签：performance, cakephp, xdebug, kcachegrind

我发现我的 CakePHP 应用程序中不调用数据库的页面加载大约需要 4 秒，这太慢了。

我尝试了以下方法无济于事：

*   重新启动计算机
*   重新安装 Uniserver
*   将调试级别从 2 切换到 0
*   从 FileCache 切换到 APC 缓存

我得到了一个 XDebug 分析器转储，并在 KCachegrind 中观察到最耗时的函数是 php::session_start，它是由 \webroot\index.php 调用的。我还使用 CakePHP Debug Kit 检查了性能，发现最耗时的项目是“Core Processing (Derived from $_SERVER["REQUEST_TIME"])”。

我该怎么做才能让我的页面加载得更快？

如果我的硬件是相关的，我已经描述了下面的操作环境：

*   ThinkPad T400
*   英特尔酷睿 2 双核处理器
*   OCZ 固态硬盘
*   4 GB 内存
*   Windows 7 64 位版本
*   CakePHP 2.2.3 版

作为起点，我将我的 php.ini 工作副本与 Uniserver 提供的 php.ini 生产版本进行了比较，发现了以下主要差异：

*   PHP 错误级别（E_ALL、E_NOTICE、E_STRICT 等）
*   $php_errormsg 日志记录
*   mysqlnd.collect 设置（其中 2 个）
*   禁用 Xdebug

然后，我做了一些前后对比。绿色单元格是 <= 1 秒的值，这是人类感知事物“相当快”的极限。我意识到实际上，必须 <= 0.1 秒才能“即时”，但这似乎有点不切实际。

![显示 CakePHP 页面所需的处理时间比较](../Images/768d9f545fad78d2cf216da22dac3eb3.png)

（要查看全尺寸图像，请访问 Windows SkyDrive，网址为[http://sdrv.ms/YomWdO](http://sdrv.ms/YomWdO)。）

我尝试在 php.ini 的“After”版本下运行时使用网站应用程序，情况并不糟糕，但是当我启动大多数页面时，我仍然觉得我遇到了困难，尤其是当我可以立即启动一些页面时.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T22:47:10.130

检查您的会话配置并确保您的会话存储设置正确。例如，如果您正在使用数据库，请确保它可以在快速网络或本地访问，并且用户拥有所有必需的权限。如果会话驻留在文件系统中，请检查可用性和权限。最后，检查你的 php 配置；这看起来不像是蛋糕问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T23:22:43.987

解决方案是更改以下设置：

*   PHP 错误级别（E_ALL、E_NOTICE、E_STRICT 等）
*   $php_errormsg 日志记录
*   mysqlnd.collect 设置（第二个）
*   禁用 Xdebug

然后，获得一个专用的生产服务器，这样您就不必不断切换 php.ini 的副本。

最后，如果这还不够快，而且这只是一个个人项目（尽管它可能是一个重要的个人项目），那就放弃并继续生活。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-11-04T12:07:17.473

通过编辑文件 core.php 解决了同样的问题

更改`Configure::write('debug', 2);`为`Configure::write('debug', 0);`

即 2 比 0

> 路径：app/config/core.php

# xslt-2.0 - Indesign Tagged 文本交叉引用，其工作方式类似于使用 ICML 标签的交叉引用

> ID：13618623
> 
> 赞同：0
> 
> 时间：2012-11-29T04:00:36.920
> 
> 标签：xslt-2.0, adobe-indesign

我一直在寻找有关如何使用 InDesign Tagged Text 创建交叉引用的解决方案，但找不到任何好的建议。

这是我的场景，我的任务是为 XML 到 InDesign 和 InDesign 到 XML 创建一个往返工作流，反之亦然。我还需要交叉引用 URL 和 End Notes 链接。

因此，首先，我必须创建将 XML 转换为 InDesign 标记文本的 XSLT 脚本（我使用了标记文本，因为我们的大多数操作员仍在使用 InDesign CS3）。然后在页面合成完成后，我们必须将 InDesign 文件导出为 XHTML（为 dreamweaver 导出）。创建另一个 XSLT 脚本以将 XHTML 转换回 XML 以用于 ePub 转换（为什么不直接将 InDesign 导出到 ePub？答案是需要大量定制）。

下面是我为标记文本创建交叉引用的 XSLT 代码：

**向 InDesign 添加交叉引用：**

```
<xsl:template match="/">
    <--! End Notes -->
    <xsl:text>&#60;XRefFmtDefn:=&#60;FmtNm:ntf>&#60;CharStyleRef:ntf>&#60;BldBlkLen:1>&#60;BldBlk:=&#60;BlkTyp:ParagraphNumber>&#60;CstmTxt:>&#60;CharStyleRef:>&#60;InclDlm:0>>></xsl:text>
    <xsl:for-each select="descendant::apnf">
        <xsl:variable name="num" select="count(preceding::apnf) + 1"/>
        <xsl:text>&#60;HplDestDfn:=&#60;HplDestName:Anchor </xsl:text><xsl:value-of select="$num"/><xsl:text>>&#60;DestKey:</xsl:text><xsl:value-of select="$num"/><xsl:text>>&#60;HplDestIdx:1</xsl:text><xsl:text>>&#60;IsPara:1>&#60;Hid:0>></xsl:text>
    </xsl:for-each>

    <--! URL -->

    <xsl:text disable-output-escaping="yes">&#60;HplDestDfn:=</xsl:text>
    <xsl:for-each select="descendant::libelle[generate-id()=generate-id(key('urlDistinct', @cible)[1])]">
        <xsl:value-of select="concat('&#60;HplDestName:', replace(@cible,'/', '\\/'),'&#62;&#60;DestKey:1&#62;&#60;HplDestUrl:http\:\/\/', replace(@cible,'/', '\\/'), '&#62;')"/>
    </xsl:for-each>
    <xsl:text disable-output-escaping="yes">&#60;Hid:0&#62;&#62;</xsl:text>
    <xsl:apply-templates/>
</xsl:template> 
```

**为尾注创建交叉引用链接：**

```
<xsl:template match="apnf">
    <xsl:variable name="num" select="count(preceding::apnf) + 1"/>
    <xsl:text>&#60;cstyle:ntf&#62;</xsl:text>
    <xsl:text>&lt;Hpl:=&lt;HplName:</xsl:text><xsl:value-of select="@id"/> <xsl:text>>&lt;HplDest:Anchor </xsl:text><xsl:value-of select="$num"/><xsl:text>>&lt;DestKey:</xsl:text><xsl:value-of select="$num"/><xsl:text>>&lt;XRefFmt:ntf>&lt;CharStyleRef:>&lt;HplLen:1>&lt;HplOff:0>&lt;Hid:0>&lt;Brdrv:0>&lt;Brdrw:Thin>&lt;Brdrh:None>&lt;Brdrs:Solid>&lt;Brdrc:0\,0\,0>></xsl:text>
    <xsl:value-of select="$num"/>
    <xsl:text>&#60;cstyle:&#62;</xsl:text>
</xsl:template> 
```

**创建交叉引用 URL**

```
<xsl:template match="url">
    <xsl:text>&#60;cstyle:url&#62;</xsl:text>
    <xsl:choose>
        <xsl:when test="exists(libelle)">
            <xsl:text>&lt;Hpl:=&lt;HplName:</xsl:text><xsl:value-of select="replace(libelle/@cible,'/', '\\/')"/><xsl:text>&gt;&lt;HplDest:http\:\/\/</xsl:text><xsl:value-of select="replace(libelle/@cible,'/', '\\/')"/><xsl:text>>&lt;DestKey:1>&lt;CharStyleRef:>&lt;HplLen:3>&lt;HplOff:0>&lt;Hid:0>&lt;Brdrv:0>&lt;Brdrw:Thin>&lt;Brdrh:None>&lt;Brdrs:Solid>&lt;Brdrc:0\,0\,0>></xsl:text>
            <xsl:sequence select="libelle/text()"/>
        </xsl:when>
        <xsl:otherwise>
            <xsl:sequence select="./text()"/>
        </xsl:otherwise>
    </xsl:choose>
    <xsl:text>&#60;cstyle:&#62;</xsl:text>
</xsl:template> 
```

这是我的问题，当我将标记文本导入 InDesign URL 并且尾注有死链接时。我怀疑它是目标键，因为当我尝试使用工作链接导出示例 InDesign 时，目标键的目标是应该交叉引用的字符位置。

**我的问题是：**

1.  像 ICML 这样的 InDesign 标记文本是否支持交叉引用？
2.  有没有一种方法可以使用 XSLT 获取 XML 中字符的 position() （意思是整个 XML 中的字符位置而不是单个节点中的位置）？如果可能的话，也许我可以正确获得目标密钥。

任何建议或建议都将受到高度赞赏。

谢谢！

PS 此链接[http://forums.adobe.com/message/3978432#3978432](http://forums.adobe.com/message/3978432#3978432)还讨论了用于交叉引用条目的 InDesign 标记文本，但没有给出完整的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T15:25:02.910

刚刚为自己测试了这个。可以在导入之前添加对标记文本的交叉引用，但正如您所指出的，与整个文档相比，您必须找到交叉引用目标的字符位置。这听起来很困难且容易出错，尤其是当您考虑特殊字符的可能性时。虽然，这是可能的。

另外，我不认为这是`<HyperlinkDestKey:5>`针对字符位置的标签，我认为是`<HyperlinkDestIndex:55555>`标签。

这可能并不理想，但您可以在导入标记文本后应用 Javascript，而不是尝试在 InDesign 标记文本中预先添加交叉引用。使用 Javascript API 进行交叉引用会更容易，但也会更慢。

下面是一个通过 Javascript API 使用超链接的示例：

```
// Get the currently active document
var doc = app.activeDocument;

// Get the hyperlink source and destinations by feeding them 
// an InDesign text object.
var linkSource = doc.hyperlinkTextSources.add(sourceText);
var linkDest = doc.textDestinations.add(destText);

// Add the hyperlink to the document
doc.hyperlinks.add(linkSource, linkDest); 
```

您可以通过在文档中找到它们来获取`sourceText`和。`destText`查找您想要制作成超链接的文本对象的一种方法是使用可从 DOM 访问的 InDesign 的查找更改功能来查找它们。

# android-intent - 无法将数据返回给父活动

> ID：13618626
> 
> 赞同：0
> 
> 时间：2012-11-29T04:01:02.580
> 
> 标签：android-intent

我正在尝试将数据（从网格中选择的项目的位置）返回给父活动，但我的代码失败了。调试器在子活动中显示“数据”如何正确获取“data.putExtra（“POS_ICON”，位置）”中的键和数据，但在父活动的 onActivityResult() 之后，调试器显示没有键也没有的“数据”返回的数据...就像数据丢失了内容一样。我已经关注了其他帖子和教程，但没有办法。请帮忙。

家长活动：

```
public void selIcono(View v){
    Intent intent = new Intent (this, SelIconoActivity.class);
    startActivityForResult(intent,PICK_ICON_REQUEST);
}

protected void onActivityResult(int requestCode, int resultCode,
        Intent data) {    //here's the problem: no data is returned!!
    if (requestCode == PICK_ICON_REQUEST) {
        if (resultCode == RESULT_OK) {
            // An icon was picked. 
            putIcon(data.getIntExtra("POS_ICON", -1)); 
        }
    }
} 
```

儿童活动：

```
public class SelIconoActivity extends Activity {    
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_sel_icono);

        GridView gridview = (GridView)findViewById(R.id.gr_iconos);
        gridview.setAdapter(new ImageAdapter (this));

        gridview.setOnItemClickListener(new OnItemClickListener() {
           public void onItemClick(AdapterView<?> parent, View v, int position, long id) {                  
                Intent data = new Intent();
                data.putExtra("POS_ICON", position);                  
                setResult(Activity.RESULT_OK, data); 

                finish();          
            }
        });     
    }       
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T17:02:49.773

`putIcon(data.getIntExtra("POS_ICON", -1));`用这个 替换你的代码

```
putIcon(data.getExtras().getInt("POS_ICON", -1)); 
```

# asp.net - 通过电子邮件发送 ASP.NET 页面

> ID：13618629
> 
> 赞同：0
> 
> 时间：2012-11-29T04:02:38.193
> 
> 标签：asp.net, html, email

我有一个相当密集的 ASP.NET 表单（约 100 个 ASP.NET 控件）。我需要接受用户的输入，然后当他们单击提交时，将表单通过电子邮件发送到指定的电子邮件地址。问题是我需要提交出现在网页上的表单。有没有人有一个简单的解决方案来自动将 ASP.NET 转换为纯 HTML，以便我可以将它插入到电子邮件中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T06:48:16.207

您需要在 smtp 电子邮件主题中添加网页的整个 HTML 代码，包括用户输入。

# php - 如何在 joomla 中的文本编辑器上发布数据？

> ID：13618633
> 
> 赞同：0
> 
> 时间：2012-11-29T04:02:46.350
> 
> 标签：php, jquery, joomla, joomla2.5

我有一个示例代码：

```
$content = "";
$wysiwyg = JFactory::getEditor();
$html = $wysiwyg->display('html', $content, '100%', '400px', '', '', array('')); 
```

和jQuery

```
Joomla.submitbutton = function(pressbutton) {
        if(pressbutton == 'save') {
            jQuery.ajax({
                success: function(data) {
                    jQuery('#html').html('test test test');
                }
            });
        } else {
            submitform(pressbutton);
        }    
} 
```

当我点击提交保存时，文本编辑器无法插入`test test test`，如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T04:06:18.133

`jQuery.ajax`应该喜欢

```
jQuery.ajax({
  url: 'ajax/test.html',
  success: function(data) {
    jQuery('#html').html('test test test');

  }
}); 
```

您没有使用 url(page) 发送数据的位置，因此不会进行 ajax 调用并且它没有成功的 ajax 请求

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T10:00:18.887

我认为您需要使用 tinyMCE 对象。

在那里，您可以访问 tinyMCE.get() 等方法。

检查与 tinyMCE 和[tinyMCE API相关的帖子](http://www.tinymce.com/wiki.php/API3%3atinymce.api.3.x)

# html - 如何使注册符号不显示下划线？

> ID：13618639
> 
> 赞同：2
> 
> 时间：2012-11-29T04:03:17.947
> 
> 标签：html, css

我在无法显示部分带有下划线的单词和部分不带下划线的情况下遇到问题。我希望“注册”符号没有下划线。

HTML：

```
<h3>Basecamp<span class="sup">&reg;</span></h3> 
```

CSS：

```
h3 {
font-size: 21px;
color: #369;
font-weight: bold;
text-decoration: underline;
margin-top: 5px;
padding: 5px;
}

.sup {
vertical-align: super;
text-decoration: none; /*how do i get this off?!*/
font-size: 50%;
font-weight: 400;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T04:23:30.327

采用`display: inline-block`

[http://jsfiddle.net/WYwv2/3/](http://jsfiddle.net/WYwv2/3/)

为什么这行得通？让我们看看[规格](http://www.w3.org/TR/CSS21/text.html#lining-striking-props)

> ...对于建立内联格式化上下文的块容器，装饰被传播到一个匿名的内联元素，该元素包装了块容器的所有流入内联级子项。对于所有其他元素，它会传播到任何流入的子元素。请注意，**文本装饰不会传播到**浮动和绝对定位的后代，也不会传播到原子内联级后代的内容，例如**内联块**和内联表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T04:09:11.773

除非您将其他文本与 reg 符号分开，否则这将不起作用。

```
h3 {
font-size: 21px;
color: #369;
font-weight: bold;
margin-top: 5px;
padding: 5px;
}

h3 span {
text-decoration: underline;
}

h3 span.sup {
text-decoration: none;
vertical-align: super;
font-size: 50%;
font-weight: 400;
} 
```

`<h3><span>Basecamp</span><span class="sup">&reg;</span></h3>`

[http://jsfiddle.net/rohitazad/yTP9q/2/](http://jsfiddle.net/rohitazad/yTP9q/2/) <-- 更新感谢 Rohit

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T04:22:58.880

看演示：- [**演示**](http://tinkerbin.com/L3KfMUMz)

```
h3 span {
vertical-align: super;
text-decoration: none; 
font-size: 50%;
font-weight: 400;
display:inline-block;
} 
```

# java - 与在 Eclipse 中使用常规 Java 代码相比，使用 Google Apps 脚本与 Google Sheets 交互有哪些优势？

> ID：13618641
> 
> 赞同：1
> 
> 时间：2012-11-29T04:03:51.783
> 
> 标签：java, google-apps-script, google-sheets, google-api

与在 Eclipse 中使用常规 Java 代码相比，使用 Google Apps 脚本与 Google Sheets 交互有哪些优势？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-29T11:19:34.443

Well, the first advantage is that you don't need to install Java or Eclipse or any other library. With any modern browser that you already use to access the Spreadsheet, you may write Apps Script code.

Second, you don't need to worry with authentication, i.e. Client Login, AuthSub, oAuth, oAuth2, etc. Apps Script handles the authentication process seamless for you.

Apps Script also have a "tighter" integration with Google Spreadsheets (and Documents). It has many features that are not available on the regular Spreadsheet API. For example, it can add menus to the Spreadsheet interface, set up triggers to run the script whenever a cell is edited or a form is submitted. When running from a custom menu or an "image button" on the spreadsheet, Apps Script can show nice custom UIs to any user on the spreadsheet.

There's also methods to apply formatting to spreadsheet cells, merge/unmerge cells, set fronzen rows and columns, protect sheets, add charts, images, etc (which I think are not present on the Spreadsheet API v3, but I might be wrong).

Apps Script runs on the cloud and does not depend on your computer or any installation process. Once you've setup a script to interact with a spreadsheet (via menus or triggers), any user that edit that spreadsheet can interact with the script. There's no need to install anything else and your computer can be off.

Apps Script is much easier than Java, with multiple libraries and versions, classpaths and IDE's setup. Anyone can start using it, does not require a skilled developer to set it up, any savvy user is up for the task.

# python - 加入列表由多个在 python 中具有相同值的列表组成

> ID：13618643
> 
> 赞同：2
> 
> 时间：2012-11-29T04:04:07.437
> 
> 标签：python, list, tuples

我有列表列表：

```
[['13/03/2012', ['a']], ['13/03/2012', ['b', 'c', 'd']], ['13/03/2012', ['e', 'f']], ['26/03/2012', ['f']], ['02/04/2012', ['a']], ['09/04/2012', ['b']]] 
```

我需要列表在每个第一个值中包含相同的日期将加入第二个值以像这样输出

```
[['13/03/2012', ['a', 'b', 'c', 'd', 'e', 'f']], ['26/03/2012', ['f']], ['02/04/2012', ['a']], ['09/04/2012', ['b']]] 
```

请问有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T04:13:46.270

您可以尝试使用`itertools`. 这将按日期对列表进行分组，然后遍历键/组，创建一个将键作为第一个元素和“扁平化”列表值的列表：

```
In [51]: from itertools import groupby

In [52]: result = []

In [53]: for key, group in groupby(l, key=lambda x: x[0]):
   ....:     inner = [key, [item for subg in group for item in subg[1]]]
   ....:     result.append(inner)
   ....:
   ....:

In [54]: result
Out[54]:
[['13/03/2012', ['a', 'b', 'c', 'd', 'e', 'f']],
 ['26/03/2012', ['f']],
 ['02/04/2012', ['a']],
 ['09/04/2012', ['b']]] 
```

您可以将其作为单行来执行，但除了超过 80 个字符之外，它的可读性甚至比第一个版本还要低，应该避免使用 :)

```
In [57]: result = [[key, [item for subg in group for item in subg[1]]] for key, group in groupby(l, key=lambda x: x[0])]

In [58]: result
Out[59]:
[['13/03/2012', ['a', 'b', 'c', 'd', 'e', 'f']],
 ['26/03/2012', ['f']],
 ['02/04/2012', ['a']],
 ['09/04/2012', ['b']]] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T04:11:56.683

我建议你先浏览这些链接

[for_loops](http://www.diveintopython.net/file_handling/for_loops.html)

[创建字典的方法](http://www.daniweb.com/software-development/python/threads/33588/ways-to-create-dictionary)

[如何-我-将-a-python-dictionary-to-a-list-of-tuples](https://stackoverflow.com/questions/674519/how-can-i-convert-a-python-dictionary-to-a-list-of-tuples)

这应该让你通过..

```
In [7]: [['13/03/2012', ['a']], ['13/03/2012', ['b', 'c', 'd']], ['13/03/2012', ['e', 'f']], ['26/03/2012', ['f']], ['02/04/2012', ['a']], ['09/04/2012', ['b']]]

In [8]: d= {}

In [9]: for item in l:
   ...:     if d.has_key(item[0]):
   ...:         d[item[0]].extend(item[1])
   ...:     else:
   ...:         d[item[0]] = item[1]
   ...:

In [10]: d
Out[10]:
{'02/04/2012': ['a'],
 '09/04/2012': ['b'],
 '13/03/2012': ['a', 'b', 'c', 'd', 'e', 'f'],
 '26/03/2012': ['f']}

In [11]: [[k,v] for k,v in d.items()]
Out[11]:
[['02/04/2012', ['a']],
 ['09/04/2012', ['b']],
 ['26/03/2012', ['f']],
 ['13/03/2012', ['a', 'b', 'c', 'd', 'e', 'f']]] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T04:19:24.157

类似于 avasal，但这似乎是使用 defaultdict 的好地方

```
from collections import defaultdict
l = [['13/03/2012', ['a', 'b', 'c', 'd', 'e', 'f']], ['26/03/2012', ['f']], ['02/04/2012', ['a']], ['09/04/2012', ['b']]]
d = defaultdict(list)
for item in l:
    d[item[0]].extend(item[1])

print map(list, d.items()) 
```

# java - 恢复活动时的Android ProgressDialog错误

> ID：13618645
> 
> 赞同：0
> 
> 时间：2012-11-29T04:04:19.367
> 
> 标签：java, android

当我`ProgressDialog`在我的 中启动 a 时`Activity`，一切正常。在我按下对话框上的后退按钮以恢复后`Activity`，我收到一个错误：“无法添加窗口令牌 android.BindeProxy@b6483550 无效，您的活动是否正在运行？”。有没有办法`ProgressDialog`在我想完成它时关闭`Activity`它，然后在我下次启动它时再次显示它`Activity`？

我的代码：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    mFacebook = new Facebook(APP_ID);
    mAsyncRunner = new AsyncFacebookRunner(mFacebook);
    SessionStore.restore(mFacebook, this);
    setContentView(R.layout.login_view);
    mLoginButton = (LoginButton) findViewById(R.id.login);
    SessionEvents.addAuthListener(new SampleAuthListener());
    mLoginButton.init(this, mFacebook);
}

@Override
public void onResume () {
    super.onResume();
}

@Override
public void onPause () {
    super.onPause();
}

public class SampleAuthListener implements AuthListener {

    public void onAuthSucceed() {
        TheGaffer.this.progressDialog = ProgressDialog.show(TheGaffer.this, "Loading", "Please wait...");
        Bundle params = new Bundle();
        params.putString("fields", "name,id");
        mAsyncRunner.request("me", params, new LoginRequestListener());
    }

    public void onAuthFail(String error) {
        Toast.makeText(getApplicationContext(), error,
                Toast.LENGTH_LONG).show();
    }
}

public class LoginRequestListener implements RequestListener {

    public void onComplete(final String response, final Object state) {
        try {
            JSONObject jsonObjSend = new JSONObject();
            JSONObject json = Util.parseJson(response);
            final String fbid = json.getString("id");
            jsonObjSend.put("fbid", json.getString("id"));
            jsonObjSend.put("username", json.getString("name"));
            jsonObjSend.put("playerPhoto", "http://graph.facebook.com/"+ json.getString("id") +"/picture");
            HttpClient.SendHttpPost("/user_profiles/registerUser", jsonObjSend);
            TheGaffer.this.runOnUiThread(new Runnable() {
                public void run() {
                    if (TheGaffer.this.progressDialog != null) {
                        TheGaffer.this.progressDialog.dismiss();
                    }
                    Intent intent = new Intent(TheGaffer.this, TeamActivity.class);
                    intent.putExtra("fbid", fbid);
                    startActivity(intent);
                }
            });
        } catch (JSONException e) {
            Log.w("Facebook-Example", "JSON Error in response");
        } catch (FacebookError e) {
            Log.w("Facebook-Example", "Facebook Error: " + e.getMessage());
        }
    }

    public void onFacebookError(FacebookError e, final Object state) {
        Log.e("Facebook", e.getMessage());
        e.printStackTrace();
    }

    public void onFileNotFoundException(FileNotFoundException e,
                                        final Object state) {
        Log.e("Facebook", e.getMessage());
        e.printStackTrace();
    }

    public void onIOException(IOException e, final Object state) {
        Log.e("Facebook", e.getMessage());
        e.printStackTrace();
    }

    public void onMalformedURLException(MalformedURLException e,
                                        final Object state) {
        Log.e("Facebook", e.getMessage());
        e.printStackTrace();
    }
}

@Override
public boolean onKeyDown(int keyCode, KeyEvent event)  
{
     if (keyCode == KeyEvent.KEYCODE_BACK && event.getRepeatCount() == 0)
     {
        TheGaffer.this.progressDialog = null;
        finish();
        return true;
     }
    return super.onKeyDown(keyCode, event);
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T04:08:48.493

你必须打电话

prgDialog.dismiss();

当你想解雇它时。那么这个错误就不会出现了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T04:20:31.243

这是因为进度对话框试图在已经关闭的 Activity 上显示自己。`isFinished()`在显示对话框、进度条之前检查。

# c - 在匹配用户输入时停止 C 程序

> ID：13618647
> 
> 赞同：0
> 
> 时间：2012-11-29T04:04:46.277
> 
> 标签：c, fgets

当用户输入“退出”一词时，我试图打破循环。如果用户输入除了单词 exit 之外的任何内容，我希望程序跳过一行并写一个“$”。它有效，但表现得有点滑稽。这是代码和输出：

```
int main()
{
    char input[5];
    int x = 5;
    while(x){
        printf("\n$");
        fgets(input, sizeof input, stdin);
        x = strcmp(input, "exit");
    }
} 
```

继承人的输出（在我的输入：“a”返回“asdfasdfasdf”返回“退出”返回）：

```
$a

$asdfasdfasdf

$
$
$
$exit

Process returned 0 (0X0) execution time : 110.855s
Press ENTER to continue. 
```

所以我的问题是：为什么会有这么多额外的“$”？我如何每次退货只能获得一个“$”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T04:07:36.710

因为您每个循环只读取 4 个字符。

# java - Java - 在排序数组中查找最不常见的整数

> ID：13618650
> 
> 赞同：3
> 
> 时间：2012-11-29T04:05:25.333
> 
> 标签：java, arrays, sorting

我被分配了一个家庭作业的编程问题，我处于静止状态。我今天已经搜索了几个小时试图找到答案，似乎从来没有在这里被问过。我基本上需要找到数组模式的反转。这是我被要求找到解决方案的问题：

> LeastFrequent - 从 System.in 输入的 10 个整数列表中输出出现频率最低的整数及其出现次数。如果列表中的多个整数出现频率最低，则输出任何出现频率最低的整数。将您的课程命名为 LeastFrequent。您可以假设所有 10 个整数都在 -100 到 100 的范围内。

这是我到目前为止的代码：

```
package leastfrequent;
import java.util.*;

public class LeastFrequent
{
    private static int[] arr = new int[10];
    private static int minValue;
    private static int minCount;

    public static void leastCommon()
    {
        for(int i = 0; i < arr.length; i++)
        {
            int count = 0;

            for(int j = 0; j < arr.length; j++)
            {
                if(arr[j] == arr[i]) 
                {
                    count++;
                }
            }

            if(count > minCount)
            {
                minCount = count;
                minValue = arr[i];
            }
        }
    }

    public static void main(String[] args)
    {
        Scanner stdin = new Scanner(System.in);
        System.out.print("numbers: ");

        for(int i = 0; i < arr.length; i++)
        {
            arr[i] = stdin.nextInt();
        }

        Arrays.sort(arr);
        leastCommon();

        System.out.println("least frequent: " + minValue + " occurs " + minCount + " times");
    }
} 
```

基本上我想如果我能找到模式，我可以反转那个算法并找到最不常见的，但这不起作用，因为它总是读为零。

有没有人有任何想法？

请帮忙！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T04:09:16.750

您可以使用长度为 201 的辅助数组，因为您的范围是 [-100,100]。

```
int[] counters = new int[201]; 
```

假设用户输入 -59，增加特定计数器：（您应该在输入的数字上加 100 以查找索引，认为 -100 位于索引 0 处）

```
counters[-59 + 100]++; 
```

然后遍历 counters 数组并找到最小*的非零*元素。从该索引中减去 100，这肯定是最不常见的数字。

```
int  min = Integer.MIN_VALUE;

for(int i: counters)
{
   if(i != 0 && i < min)
     min = i;
} 
```

现在，这意味着`counters[i]`发生频率最低，这与`(i-100)` 实际值相对应。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T04:08:50.300

想想你会如何用笔和纸来做这件事。

1.  计算每个数字在数组中出现的次数。
2.  找到最小的计数。
3.  返回与该计数对应的值。这要求您以某种方式存储映射到其计数的值。

数组已排序的事实允许您通过*寻找最短的连续运行相等数字来优化此算法。*这意味着您可以通过`O(1)`辅助存储器一次性完成此操作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-29T04:19:18.483

两个变化：

1.  `minCount`用最大索引（即 10）初始化为：

    ```
    private static int minCount = 10; 
    ```

2.  `if`将要比较`less than`的更改`greater than`为：

    ```
    if(count < minCount){ 
    ```

**这样，您将`minCount`使用较低的计数来更改，每当您收到较低的出现计数时，最终，它将具有最少的计数。**

我觉得，休息就好。希望这可以修复您的程序。

# c# - EF lambda 表达式中的左外连接

> ID：13618654
> 
> 赞同：1
> 
> 时间：2012-11-29T04:05:59.493
> 
> 标签：c#, .net, linq, entity-framework, left-join

我有以下 EF 查询，它仅返回数据库中存在的日期的使用数据列表。

```
var DailyUsage = context.UsageData.Where(u => u.UserID == CurrentUser.ID && u.Date >= Start && u.Date <= End)
                                  .Select(p => new PerfData
    {
        Date = p.Date,
        Transfers = p.Transfers,
        Exists = p.Exists,
        Duration = p.Duration
    }).ToList(); 
```

我希望它返回一个包含不间断日期序列的列表，其中数据点为 0，表示数据库中不存在的日期，所以我尝试使用以下日期列表进行左外连接，但似乎无法正确：

```
public static List<DateTime> GetDateRange(DateTime startingDate, DateTime endingDate)
{
    if (StartingDate > EndingDate)
    {
        return null;
    }
    List<DateTime> rv = new List<DateTime>();
    DateTime tmpDate = startingDate;
    do
    {
        rv.Add(tmpDate);
        tmpDate = tmpDate.AddDays(1);
    }
    while (tmpDate <= endingDate);
    return rv;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T05:19:44.477

如果我理解正确并且 DateTimes 列表是联接的外部部分，则可以使用该`join into`子句执行[左外部联接](http://msdn.microsoft.com/en-us/library/bb397895.aspx)。

```
var dailyUsages = context.UsageData
     .Where(u => u.UserID == CurrentUser.ID &&
                 u.Date >= start && 
                 u.Date <= end)
     .Select(p => new PerfData()
                  {
                      Date = p.Date,
                      Transfers = p.Transfers,
                      Exists = p.Exists,
                      Duration = p.Duration
                  }).ToList();

var dates = (from date in GetDateRange(start, end)
             join dailyUsage in dailyUsages on date equals dailyUsage.Date into grp
             from item in grp.DefaultIfEmpty(new PerfData()
                                             {
                                                 Date = date,
                                                 Transfers = 0,
                                                 Exists = 0,
                                                 Duration = 0
                                             })
             select item).ToList(); 
```

# c - cufft 正在将随机数据添加到结果中

> ID：13618656
> 
> 赞同：0
> 
> 时间：2012-11-29T04:06:03.587
> 
> 标签：c, cuda, cufft

我制作了一个快速程序以确保我可以正确使用 cufft 库。当我运行“1”的批量大小时，我得到了我期望的结果。但是，随着我增加批处理大小，我在数据缓冲区的末尾得到了似乎是随机字节的内容。如果批量大小为 2，则最后三个条目是噪声。如果批处理大小为 3，我会在缓冲区末尾的最后六个条目中以及在批处理中三个转换中的第二个应该是结果的末尾的三个条目中得到噪声。

批处理中第二次变换结果末尾的坏数据示例：

`7.680291 1.411589`<- 好的数据
`7.748493 1.062853`
`7.797380 0.710554`
`7.826757 0.355854`
`-436781318144.000000 -436781318144.000000`<- 坏结果的开始
`5349828096.000000 5000401408.000000`
`5511789568.000000 4813803008.000000`
`5664713728.000000 4619900416.000000`
<- 输出结束

代码：

```
#define NX 1024
#define BATCH 4

#include <cuda.h>
#include <cufft.h>
#include <stdio.h>
#include <Windows.h>
#include <math.h>

int main()
{
    cufftHandle plan;
    cufftComplex *deviceData;
    cufftComplex *hostData;
    FILE* output;
    char fileName[256];

    int i, j;

    cudaMalloc((void**)&deviceData, NX * BATCH * sizeof(cufftComplex));
    hostData = (cufftComplex*)malloc(NX * BATCH * sizeof(cufftComplex);

    //Initalize array with a real sin wave, increasing the frequency of the wave for each transform in the batch (indexed by "j")
    for (j = 0; j < BATCH; j++)
    {
        for (i = 0; i < NX; i++)
        {
            hostData[i + j*BATCH].x = sin(i*(j+1) / (float)10);
            hostData[i + j*BATCH].y = 0;
        }
    }

    cudaMemcpy(deviceData, hostData, NX * BATCH * sizeof(cufftComplex), cudaMemcpyHostToDevice);
    cufftPlan1d(&plan, NX, CUFFT_C2C, BATCH);
    cufftExecC2C(plan, deviceData, deviceData, CUFFT_FORWARD);
    cudaThreadSynchronize();
    cudaMemcpy(hostData, deviceData, NX * BATCH * sizeof(cufftComplex), cudaMemcpyDeviceToHost);
    cufftDestroy(plan);
    cudaFree(deviceData);

    output = fopen("outputFile.txt", "w");

    //Write one file for each transform in the batch
    for (j = 0; j < BATCH; j++)
    {
        memset(fileName, '\0', 256);
        sprintf(fileName, "outputFile_%d.txt", j);
        output = fopen(fileName, "w");
        for (i = 0; i < NX; i++)
            fprintf(output, "%f\t%f\n", hostData[i + j*BATCH].x, hostData[i + j*BATCH].y);
        fclose(output);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T04:45:19.167

您正在混合使用 BATCH 和 NX 来索引您的数据集。

我认为你最后的 fprintf 行应该是这个而不是你所拥有的：

`fprintf(output, "%f\t%f\n", hostData[i + j*NX].x, hostData[i + j*NX].y);`

同样，您需要将数据设置行从

`hostData[i + j*BATCH]...`

至

`hostData[i + j*NX]...`

（2 个实例。）

虽然我们正在处理它，但这一行并没有为我编译，它缺少一个右括号：

```
hostData = (cufftComplex*)malloc(NX * BATCH * sizeof(cufftComplex); 
```

# iphone - 如何仅使用 IB（无代码）将文本包装在 UITableViewCell 中？

> ID：13618657
> 
> 赞同：0
> 
> 时间：2012-11-29T04:06:13.617
> 
> 标签：iphone, objective-c, ios, uitableview

我想知道这是否可能：

*   在查看包含来自帖子的多条评论的表格时，每条评论可能有不同的长度 - 因此表格单元格应垂直调整大小以容纳更多文本。

请注意，我正在寻找与[此处](https://stackoverflow.com/questions/129502/how-do-i-wrap-text-in-a-uitableviewcell-without-a-custom-cell)和 SO 其他地方发布的解决方案不同的解决方案，因为我想实现此结果而无需向我的控制器添加代码。

使用 IB，我的***单元格***使用：

*   风格：副标题
*   模式：缩放以适应
*   行高：默认

我的***“标题”标签***（应该扩展的标签）：

*   换行：自动换行
*   行数：0

有了上面的内容，我实际上可以看到多行文本，但是行并没有相应地调整大小——所以多行的文本会重叠。

是否可以在不将其编码到我的控制器中的情况下垂直调整行的大小？

**评论视图控制器.m**

```
#import "CommentViewController.h"

@implementation CommentViewController
@synthesize     commentsArray;

- (void)viewDidLoad
{
    [super viewDidLoad];
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return commentsArray.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"commentCell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

    NSDictionary *comment       = [commentsArray objectAtIndex:indexPath.row];
    NSString     *commentText   = [comment objectForKey:@"comment_text"];
    NSString     *commentAuthor = [comment objectForKey:@"comment_author_name"];

    cell.textLabel.text       = commentText;
    cell.detailTextLabel.text = [NSString stringWithFormat:@"by %@", commentAuthor];

    return cell;
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T04:40:21.930

以下是我如何将我提到的 SO 答案中的代码与我的代码合并：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"commentCell";

    NSDictionary *comment       = [commentsArray objectAtIndex:indexPath.row];
    NSString     *commentText   = [comment objectForKey:@"comment_text"];
    NSString     *commentAuthor = [comment objectForKey:@"comment_author_name"];

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        cell.textLabel.lineBreakMode = NSLineBreakByWordWrapping;
        cell.textLabel.numberOfLines = 0;
        cell.textLabel.font = [UIFont fontWithName:@"Helvetica" size:14.0];
    }

    cell.textLabel.text       = commentText;
    cell.detailTextLabel.text = [NSString stringWithFormat:@"by %@", commentAuthor];

    return cell;
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSDictionary *comment       = [commentsArray objectAtIndex:indexPath.row];
    NSString     *commentText   = [comment objectForKey:@"comment_text"];

    UIFont *cellFont      = [UIFont fontWithName:@"Helvetica" size:14.0];
    CGSize constraintSize = CGSizeMake(280.0f, MAXFLOAT);
    CGSize labelSize      = [commentText sizeWithFont:cellFont constrainedToSize:constraintSize lineBreakMode:NSLineBreakByWordWrapping];

    return labelSize.height + 40;
}

@end 
```

# javascript - JQuery 提交部分视图的表单显示带有 Json 结果的空白页面

> ID：13618660
> 
> 赞同：0
> 
> 时间：2012-11-29T04:06:22.863
> 
> 标签：javascript, jquery, html, asp.net-mvc-4

我在 MVC4 中有一个编辑功能

```
 public ActionResult Edit(UserGroup usergroup)
    {
            usergroup.created_date = DateTime.Now;
            usergroup.modified_date = DateTime.Now;
            db.Entry(usergroup).State = EntityState.Modified;
            db.SaveChanges();
            return Json(new { success = true });
    } 
```

我的 Jquery 按钮单击事件

```
 $(".edit-link").click(function () {
    var id = $(this).attr("id");
    $(".edit-dialog").dialog({
        width: 600,
        position: { my: "center", at: "center", of: window },
        title: "Edit User Group"
    }).load("/UserGroup/Edit/" + id);
    return false;
}); 
```

我的 Jquery 表单提交事件

```
$("#frmEdit").submit(function () {
    var id = $(".edit-link").attr("id");
    $.ajax({
        url: "/UserGroup/Edit/" + id,
        type: "POST",
        data: $(this).serialize(),
        datatype: "json",
        success: function (result) {
            if (result.success) {
                window.alert("User group details modified successfully.");
                location.reload();
            } else {
                $(".edit-dialog").html(result);
                $.validator.unobtrusive.parse((".edit-dialog").dialog);
            }
        }
    }).load("/UserGroup/Edit/" + id);
    return false;
}); 
```

编辑：结果，我得到一个空白页面（URL 示例：localhost:1234/UserGroup/Edit/Admin），其中只有一行 {success = true} 的文本，而不是执行 window.alert。

对此有任何想法吗？似乎它甚至没有在 jquery "success: function (result) { //code }" 下到达这一行

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T04:21:12.560

您需要将操作结果返回到 jsonresult

另一件事是将 Httppost 属性放在 Edit jsonresult 上，例如：

```
[HttpPost]
public JsonResult Edit(UserGroup usergroup)
{
        usergroup.created_date = DateTime.Now;
        usergroup.modified_date = DateTime.Now;
        db.Entry(usergroup).State = EntityState.Modified;
        db.SaveChanges();
        return Json(new { success = true });
} 
```

**更新**：在表单提交事件之后删除加载事件，然后尝试

```
$("#frmEdit").submit(function () {
var id = $(".edit-link").attr("id");
$.ajax({
    url: "/UserGroup/Edit/" + id,
    type: "POST",
    data: $(this).serialize(),
    datatype: "json",
    success: function (result) {
        if (result.success) {
            window.alert("User group details modified successfully.");
            location.reload();
        } else {
            $(".edit-dialog").html(result);
            $.validator.unobtrusive.parse((".edit-dialog").dialog);
        }
    }
});
return false;
}); 
```

# ruby-on-rails - Formtastic 2.1.xw/Rails 3 中的依赖选择？

> ID：13618667
> 
> 赞同：2
> 
> 时间：2012-11-29T04:07:19.700
> 
> 标签：ruby-on-rails, ruby-on-rails-3, formtastic

我在这里做了一些挖掘，似乎没有一个通用（简单）的答案，所以我想检查一下：

在使用 Formtastic 2.1.x 生成的表单中创建动态/依赖选择选项的当前最佳实践是什么？

换句话说 - 如何最好地根据不同字段的值`<option>`获得更改列表（即 - 首先选择一个国家，然后查看仅来自该国家的州列表）`<select>`

我在那里发现了一个名为[dependent-select](https://github.com/topsail/dependent-select)的宝石，它似乎*完全*符合我的要求，所有这些都很好地包装和打包——但开发似乎在一年前就停止了，它只适用于 Formtastic 1.2。（当这种情况发生时，通常意味着我错过了一些东西；）

[Railscasts #88（修订版）](http://railscasts.com/episodes/88-dynamic-select-menus-revised)在常规形式的上下文中讨论了这个问题，但我很好奇是否有办法使用 Formtastic 来做到这一点......

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T20:40:14.047

我正在解决同样的问题。我确实遇到了这个要点：[https](https://gist.github.com/3077281) ://gist.github.com/3077281 。我将尝试使用它来解决问题。也可能对你有所帮助。

# c# - 是否有可能在 VS Windows 窗体中从设计器中隐藏字段？

> ID：13618668
> 
> 赞同：0
> 
> 时间：2012-11-29T04:07:23.347
> 
> 标签：c#, winforms

我正在使用 VS 2010。

我想从 [Design] 中隐藏一个文本框，我仍然可以在这个文本框中获取文本。

如果我设置属性可见 = true，我无法在此文本框中获取文本。

我该如何解决这个问题？

# javascript - 使用 jQuery 在特定时间间隔显示和隐藏 div，但停止最后一个 div

> ID：13618669
> 
> 赞同：2
> 
> 时间：2012-11-29T04:07:26.810
> 
> 标签：javascript, jquery, html

我需要代码在特定时间后自动隐藏`div1`和显示，比如 10 秒或 15 秒。 我读了这篇文章： [Show and hide divs at a specific time interval using jQuery](https://stackoverflow.com/questions/914951/show-and-hide-divs-at-a-specific-time-interval-using-jquery?answertab=oldest#tab-top)，`div2`

但它每 10 秒重复一次。我只需要隐藏`div1`和显示`div2`一次。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T04:44:47.853

假设您的 div 具有 id`"div1"`和`"div2`“，并且`"div1"`开始可见并`"div2"`开始隐藏，那么您可以隐藏第一个并在*x*毫秒后显示第二个，如下所示：

```
$("#div1").delay(10000).hide(0, function() {
    $("#div2").show();
}); 
```

如果您愿意，可以使用`.fadeOut()`and`.fadeIn()`或其他动画方法代替`.hide()`and 。`.show()`

如果目的是自动发生，则将上述代码放入文档就绪处理程序中，或者放入单击处理程序中，或者如果它是为了响应用户所做的事情。

演示：http: [//jsfiddle.net/s7NXz/](http://jsfiddle.net/s7NXz/)

如果您有两个以上的 div，并且您想在它们之间循环一次，您可以执行以下操作：

```
var $divs = $("div").hide(),    // use an appropriate selector here
    current = 0;

$divs.eq(0).show();             // show the first

function showNext() {
    if (current < $divs.length - 1) { // if not past the end then
        $divs.eq(current).delay(2000).fadeOut('fast', function() {
            current++;
            $divs.eq(current).fadeIn('fast');
            showNext();
        });
    }
}
showNext(); 
```

演示：http: [//jsfiddle.net/s7NXz/1/](http://jsfiddle.net/s7NXz/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-04T07:22:56.153

首先`div1`是可见的并且`div2`是隐藏的。要在特定时间后显示`div2`和隐藏，您可以添加一个通用类：`div1``x`

```
 $('.x').delay(1000).toggle(); 
```

您可以调整延迟和切换速度。Toggle 将显示匹配的隐藏元素并隐藏匹配的显示元素。
请参阅[jQuery 切换文档](http://api.jquery.com/toggle/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T04:10:17.767

```
$('html').addClass('js');

$(function() {

  var timer = setTimeout( showDiv, 5000);

  var counter = 0;

  function showDiv() {
    if (counter ==0) { counter++; return; }

    $('div','#container')
      .stop()
      .hide()
      .filter( function() { return this.id.match('div' + counter); })   
      .show('fast');
    counter == 3? counter = 0 : counter++; 

  }

}); 
```

使用 setTimeout 代替 setInterval

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-01-06T14:25:20.000

```
$("button").click(function(){
  $("p").hide(1000);
  alert("The paragraph is now hidden");
}); 
```

# javascript - 单击浏览器的后退按钮时，页面不会通过应用新 URL 自动加载

> ID：13618671
> 
> 赞同：3
> 
> 时间：2012-11-29T04:07:37.077
> 
> 标签：javascript, browser

一些背景资料：

例如，我使用 url1 加载页面，然后我`window.history.pushState()`将 URL 修改为 URL2

然后我单击“返回”按钮，我注意到地址行将 URL 更改为 URL1，但页面没有加载以反映内容。

这里的诀窍是什么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T04:10:10.023

您需要`popstate`像这样监听窗口的事件：

```
addEventListener('popstate', function() {

    // code to be executed when back button is clicked

}, false); 
```

# javascript - Javascript 功能检测 CMYK 图像

> ID：13618675
> 
> 赞同：2
> 
> 时间：2012-11-29T04:08:45.203
> 
> 标签：javascript, internet-explorer-8, feature-detection, cmyk

众所周知，ie8 不支持 cmyk jpg 图像，它根本不渲染它们:-(

这是一篇关于它的帖子[http://www.plaveb.com/blog/cmyk-images-not-displayed-in-internet-explorer](http://www.plaveb.com/blog/cmyk-images-not-displayed-in-internet-explorer)，还有无数其他的。

我的问题：有没有一种方法可以从 javascript 进行功能检测，类似于modernizr 的工作方式，以检查浏览器是否支持 cmyk jpg 图像？

我可以在我的 javascript 中添加一个 hack 来改变 ie8 使用 rgb jpg 的行为，但我希望 hack 更健壮一些。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T04:36:14.127

像这样的东西：（当然，jQuery 是 HTML 指令）

```
if ($.browser.msie  && parseInt($.browser.version, 10) <= 8) {
  alert('IE8 or below'); 
} else {
  alert('Non IE8');
} 
```

和 HTML ->

```
<!--[if IE 8]>
<script type="text/javascript">
    ie = 8;
</script>
<![endif]--> 
```

好的，这是一些 Javascript，它适用于 RGBA，所以它应该适用于 CMYK，你可以测试：

```
<html>
<head>
    <script>
    var IS_CMYK_SUPPORTED = (function(){
        var value = 'cmyk(1%,1%,1%,0.5%)',
        el = document.createElement('p'),
        result = false;
        try {
            el.style.color = value;
            result = /^cmyk/.test(el.style.color);
        } catch(e) { }
        el = null;
        return result;
    })();
    </script>
</head>
<body onLoad='alert("IS CMYK Supported:" + IS_CMYK_SUPPORTED)'>
</body>
</html> 
```

# nsmutablearray - nsmutablearray insertobject atindex:0 不起作用

> ID：13618676
> 
> 赞同：0
> 
> 时间：2012-11-29T04:08:46.497
> 
> 标签：nsmutablearray, uibarbuttonitem

有人可以帮我理解为什么 insertobject atindex:0 行无法向 nsmutablearray 添加任何内容吗？谢谢。

```
- (void)setSplitViewBarButtonItem:(UIBarButtonItem *)splitViewBarButtonItem
{
    if (_splitViewBarButtonItem != splitViewBarButtonItem) {
        NSMutableArray *toolbarItems = [self.toolbar.items mutableCopy];
        if (_splitViewBarButtonItem) [toolbarItems removeObject:_splitViewBarButtonItem];
        if (splitViewBarButtonItem) {
            [toolbarItems insertObject:splitViewBarButtonItem atIndex:0];
            NSLog(@"setSplitViewBarButtonItem: toolbarItems has %u objects",toolbarItems.count);
        }
        self.toolbar.items = toolbarItems;
        _splitViewBarButtonItem = splitViewBarButtonItem;
    }
} 
```

工具栏是之前在同一个 .m 文件中定义的私有属性，因此

```
@property (nonatomic, weak) UIToolbar *toolbar; 
```

我也尝试过更换线路

```
NSMutableArray *toolbarItems = [self.toolbar.items mutableCopy]; 
```

和

```
NSMutableArray *toolbarItems = [[NSMutableArray alloc]init];
toolbarItems = [self.toolbar.items mutableCopy]; 
```

但仍然没有向工具栏项添加任何内容。调试器始终显示 splitViewBarButtonItem 为非空，并且我的 NSLog 一直打印为零。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T19:27:13.293

我设法通过替换 if (_splitViewBarButton)... 线来使 insertObject 线工作

```
if (_splitViewBarButtonItem) {
    toolbarItems = [self.toolbar.items mutableCopy];
    [toolbarItems removeObject:_splitViewBarButtonItem];
} else {
    toolbarItems = [[NSMutableArray alloc]init];
} 
```

换句话说，如果设置了 _splitViewBarButtonItem（有一个条形按钮），则将其删除。否则，需要分配初始化它。

我现在的问题是作业

```
self.toolbar.items = toolbarItems; 
```

不起作用，并且栏按钮现在显示在详细信息视图中。有什么建议么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T21:17:07.307

好的，实际上我真正需要的是让我的工具栏属性成为一个 IBOutlet，即改变

```
@property (nonatomic, weak) UIToolbar *toolbar; 
```

至

```
@property (nonatomic, weak) IBOutlet UIToolbar *toolbar; 
```

通过此更改，我最初发布的代码可以按原样工作。我想工具栏在未定义为 IBOutlet 时未正确实例化。

# php - Django 应用程序如何集成用 php 编写的遗留 webapp

> ID：13618683
> 
> 赞同：-2
> 
> 时间：2012-11-29T04:09:06.440
> 
> 标签：php, django, web-applications

我正在尝试编写一个 Django webapp，并且我想保存指标显示页面（/monitoring）的开发——实际上，考虑到旧版[webapp 的](http://ganglia.sourceforge.net/)功能/成熟度和用户熟悉度，它几乎无法击败旧版 php 实现。

我有什么办法可以将遗留的 php webapp 集成到我的 django 应用程序中？

我有点觉得[这篇文章](https://stackoverflow.com/questions/901857/best-way-to-integrate-php-forum-into-django-site)与我的想法有关。但是，我真的不想触碰旧版 webapp 的代码，而建议的方式似乎需要它。

我正在考虑的另一种方法是，我只是设置我的 apache 服务器，使其将 URL“/monitoring”定向到现有的遗留 php webapp，并将其余部分定向到我的 django webapp。但是这种方式，我无法控制用户登录功能，这是在Django webapp中为“/monitoring”页面实现的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T15:00:34.703

在我看来，您链接的帖子中提出的内容根本不好。首先，您应该考虑要集成的“什么”。

*   行为：（功能、业务逻辑等）。
*   结构：数据库连接、操作
*   自定义驱动程序
*   渲染东西。实际系统如何呈现视图/页面/任何内容并按原样显示。

在您链接的帖子中，那个人想要集成所有内容：他只是想获取他以前在 PHP 页面中看到的内容，并像在 django 应用程序中一样显示它。老实说，这不好。我建议（仅基于个人经验）您不应该将已经渲染的页面集成到您的 django 应用程序中。

你可以做的是整合功能和行为。例如，假设您的 PHP 监控系统为您提供给定时间段内的用户数量。它有一个 PHP 函数：

```
<?php
function show_users($time_period){
   ...
}
?> 
```

与其从该监控系统获取 HTML 并将其放入您的 Django 应用程序，不如只获取行为。例如，通过 REST 接口公开您的 PHP 应用程序。因此，在您的 Django 代码中，您可以：

```
# views.py
def monitoring(request):
    users = monitoring_service('/users/2012/')
    render(request, 'monitoring.html', {'users': users} 
```

在您的模板中：

```
# monitoring.html
<ul>
{% for user in users %}
    <li> {{user}} </li>
{% endfor %}
</ul> 
```

基本上，您正在重用 PHP 应用程序的功能。但是，您正在处理渲染部分。当然，这是额外的工作，但是，相信我，这是值得的。

**额外的：**

我建议使用 REST，因为它是一个很好的解决方案。但是您可以选择其他接口进行通信，例如 Thrift、Protocol Buffers 或 MessagePack（仅举几例）

# compiler-construction - 如何在不调用程序的情况下在 phpstorm 中调用全局命令函数？

> ID：13618688
> 
> 赞同：0
> 
> 时间：2012-11-29T04:09:30.617
> 
> 标签：compiler-construction, coffeescript, phpstorm

我已经使用 nodejs 在全球范围内安装了咖啡脚本。我可以打电话

"C:\Users\Administrator\Desktop\New folder>coffee -wc "C:\portables\xampp-portable \htdocs\test" 编译我的测试文件夹中的所有 cofee-script 文件。

现在我遇到了 phpstorm 的问题。

我已经给出了我的 phpstorm 设置如下。

```
parameters =  coffee -wc "$FileDir$" 
```

它没有奏效。我认为它需要程序来调用文件。我试图将我的文件名作为程序..

它给出了 test.coffeescript 不是有效的 win32 应用程序的错误。

![在此处输入图像描述](../Images/138957bd098dbda96d3f7b269c48c62a.png)

检查我是否也尝试调用 nodejs exe，但它没有工作。我自己的系统节点功能调用“coffee -wc“C:\portables\xampp-portable\htdocs\test””正在我的系统上运行。

我如何在 phpstorm 中调用它。区别在于phpstorm。如何在不调用我在 cmd 中调用的任何程序的情况下调用相同的 cmd 函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T11:29:44.197

`coffee`实际上是`coffee.cmd`Windows上的一个文件。您是否尝试`c:\Windows\System32\cmd.exe`用作**程序**，然后提供**参数**`coffee.cmd`中的选项和其余选项的完整路径？

 **以下对我有用：

![咖啡工具](../Images/78657ad525410788e01274c6ef8267b8.png)

控制台中的输出：

```
c:\Windows\System32\cmd.exe /C c:\Users\Serge\AppData\Roaming\npm\coffee.cmd -wc D:\work\attaches\nodesample
15:26:47 - compiled D:\work\attaches\nodesample\sample.coffee 
```**

# c# - Layout's in a modular MVC application

> ID：13618694
> 
> 赞同：2
> 
> 时间：2012-11-29T04:10:22.737
> 
> 标签：c#, .net, asp.net-mvc, razor, asp.net-mvc-4

I've made myself a modular framework with ninject for MVC.

Each module can register it's own routes and contains it's own views.

Module dir (dll location):
`~/Modules/<module name>/`

Module views sit inside:
`<Module dir>/Views/`
They are arranged exactly like a normal mvc app, IE a folder for each controller and a shared folder.

I want to render a view with a layout, however I want the layout location to be set by the core framework (so that i can change themes).

I have a view that has `layout = _layout.cshtml` and when i run the app it returns:

```
The layout page "_Layout.cshtml" could not be found at the following path: "~/Modules/Module2/Views/Home/_Layout.cshtml". 
```

The view that was called was here `~/Modules/Module2/Views/Home/Index.cshtml`. But I want it to look for the layout in another location **without setting it in each view**. Is there anyway I can do that in the core framework? Note i set it MasterLocationFormats to look in shared too, which it apparently does not (I tested that by placing a _layout.cshtml in there).

* * *

Custom View Engine:

```
public NinjectRazorViewEngine(): base()
    {
        ViewLocationFormats = new[] {
            "~/Modules/%1/Views/{1}/{0}.cshtml",
            "~/Modules/%1/Views/{1}/{0}.vbhtml",
            "~/Modules/%1/Views/Shared/{0}.cshtml",
            "~/Modules/%1/Views/Shared/{0}.vbhtml"
        };

        MasterLocationFormats = new[] {
            "~/Modules/%1/Views/{1}/{0}.cshtml",
            "~/Modules/%1/Views/{1}/{0}.vbhtml",
            "~/Modules/%1/Views/Shared/{0}.cshtml",
            "~/Modules/%1/Views/Shared/{0}.vbhtml",
        };

        PartialViewLocationFormats = new[] {
            "~/Modules/%1/Views/{1}/{0}.cshtml",
            "~/Modules/%1/Views/{1}/{0}.vbhtml",
            "~/Modules/%1/Views/Shared/{0}.cshtml",
            "~/Modules/%1/Views/Shared/{0}.vbhtml"
        };

        PartialViewLocationFormats = ViewLocationFormats;
        AreaPartialViewLocationFormats = AreaViewLocationFormats;
    }

    protected override IView CreatePartialView(ControllerContext controllerContext, string partialPath)
    {
        object moduleName;
        if(controllerContext.RequestContext.RouteData.Values.TryGetValue("module",out moduleName))
            return base.CreatePartialView(controllerContext, partialPath.Replace("%1", (string)moduleName));
        return base.CreatePartialView(controllerContext, partialPath);
    }

    protected override IView CreateView(ControllerContext controllerContext, string viewPath, string masterPath)
    {
        object moduleName;
        if (controllerContext.RequestContext.RouteData.Values.TryGetValue("module", out moduleName))
            return base.CreateView(controllerContext, viewPath.Replace("%1", (string)moduleName), masterPath.Replace("%1", (string)moduleName));
        return base.CreateView(controllerContext, viewPath, masterPath);
    }

    protected override bool FileExists(ControllerContext controllerContext, string virtualPath)
    {
        object moduleName;
        if (controllerContext.RequestContext.RouteData.Values.TryGetValue("module", out moduleName))
            return base.FileExists(controllerContext, virtualPath.Replace("%1", (string)moduleName));
        return base.FileExists(controllerContext, virtualPath);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T12:46:27.437

This took a large amount of work.

Changes had to be made to the view engine to properly expose the `FindView` and `FindPartialView` methods. the method outlined in the question is wrong.

This is how the viewEngineClass should look

```
public NinjectRazorViewEngine(): base()
    {
        ViewLocationFormats = new[] {
            "~/Modules/{2}/Views/{1}/{0}.cshtml",
            "~/Modules/{2}/Views/{1}/{0}.vbhtml",
            "~/Modules/{2}/Views/Shared/{0}.cshtml",
            "~/Modules/{2}/Views/Shared/{0}.vbhtml",
            "~/Views/{1}/{0}.cshtml",
            "~/Views/{1}/{0}.vbhtml",
            "~/Views/Shared/{0}.cshtml",
            "~/Views/Shared/{0}.vbhtml"
        };

        MasterLocationFormats = new[] {
            "~/Modules/{2}/Views/{1}/{0}.cshtml",
            "~/Modules/{2}/Views/{1}/{0}.vbhtml",
            "~/Modules/{2}/Views/Shared/{0}.cshtml",
            "~/Modules/{2}/Views/Shared/{0}.vbhtml",
        };

        PartialViewLocationFormats = new[] {
            "~/Modules/{2}/Views/{1}/{0}.cshtml",
            "~/Modules/{2}/Views/{1}/{0}.vbhtml",
            "~/Modules/{2}/Views/Shared/{0}.cshtml",
            "~/Modules/{2}/Views/Shared/{0}.vbhtml",
            "~/Views/{1}/{0}.cshtml",
            "~/Views/{1}/{0}.vbhtml",
            "~/Views/Shared/{0}.cshtml",
            "~/Views/Shared/{0}.vbhtml"
        };

        PartialViewLocationFormats = ViewLocationFormats;
        AreaPartialViewLocationFormats = AreaViewLocationFormats;

        //Used to test cache
        //ViewLocationCache = new DefaultViewLocationCache();
    }
    public override ViewEngineResult FindPartialView(ControllerContext controllerContext, string partialViewName, bool useCache)
    {
        return FindView(controllerContext, partialViewName, "", useCache);
    }
    public override ViewEngineResult FindView(ControllerContext controllerContext, string viewName, string masterName, bool useCache)
    {
        //Implement defualt exceptions
        if(controllerContext == null)
            throw new ArgumentNullException("The controllerContext parameter is null");
        if(string.IsNullOrEmpty(viewName))
            throw new ArgumentException("The viewName parameter is null or empty.");

        //Check cache if specified
        if(useCache && this.ViewLocationCache != null){
            string cachedLocation = ViewLocationCache.GetViewLocation(controllerContext.HttpContext, generateCacheKey(controllerContext, viewName));
            if (!string.IsNullOrEmpty(cachedLocation))
                return new ViewEngineResult(CreateView(controllerContext, cachedLocation, masterName), this);
        }

        //Create arguments for location formatting
        string trimmedViewName = string.Empty;
        if (viewName.EndsWith(".cshtml"))
            trimmedViewName = viewName.Remove(viewName.Length - 7);
        else
            trimmedViewName = viewName;
        object[] args = new object[] { trimmedViewName, controllerContext.RouteData.GetRequiredString("controller"), controllerContext.RouteData.GetRequiredString("module") };

        //Attempt to locate file
        List<string> searchedLocations = new List<string>();
        foreach(string location in ViewLocationFormats){
            string formatedLocation = string.Format(location,args);
            searchedLocations.Add(formatedLocation);
            if (FileExists(controllerContext, formatedLocation))
            {
                //File has been found. Add to cache and return view
                if(this.ViewLocationCache != null)
                    ViewLocationCache.InsertViewLocation(controllerContext.HttpContext, generateCacheKey(controllerContext, viewName), formatedLocation);

                return new ViewEngineResult(CreateView(controllerContext, formatedLocation, masterName), this);
            }
        }

        //Couldnt find view, return searched locations
        return new ViewEngineResult(searchedLocations);
    }
    public string generateCacheKey(ControllerContext controllerContext, string viewName)
    {
        return string.Format("{0}|{1}", controllerContext.RouteData.GetRequiredString("module"), viewName);
    } 
```

You then need to implement a custom `System.Web.Mvc.WebViewPage<T>` like so:

```
public abstract class WebViewPage<T> : System.Web.Mvc.WebViewPage<T>
{
    public override string Layout
    {
        get
        {
            return base.Layout;
        }
        set
        {
            NinjectRazorViewEngine viewEngine = new NinjectRazorViewEngine();
            System.Web.Mvc.ViewEngineResult engineResult = viewEngine.FindView(this.ViewContext.Controller.ControllerContext, value, string.Empty, true);
            System.Web.Mvc.RazorView razorView = engineResult.View as System.Web.Mvc.RazorView;
            if (razorView == null)
            {
                string searchedIn = "";
                foreach (string item in engineResult.SearchedLocations)
                {
                    searchedIn += item + "\n";
                }
                throw new HttpException(500, "Could not find views in locations:\n" + searchedIn);
            }
            base.Layout = razorView.ViewPath;
        }
    }
} 
```

Hope that helps :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T07:13:23.167

You can implement your own ViewEngine, that will look for views in custom locations.

```
public class MyViewEngine : RazorViewEngine {
   public MyViewEngine() {
       this.MasterLocationFormats = new string[] {
           "PATH TO YOUR LAYOUT FILES", "ALTERNATIVE PATH"
       }
   }
} 
```

and then during start up of your application (e.g. in Global.asax.cs) setup your application to use your custom engine

```
ViewEngines.Engines.Clear();
ViewEngines.Engines.Add(new ThemableViewEngine()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T11:57:20.937

You should really try to use precompiled views with [RazorGenerator](http://razorgenerator.codeplex.com/).

Compiling views allows you to drop modules as single DLLs, which is much easier than also having to bring with the DLL all the content (like cshtml views) plus, you can load your modules at startup time or runtime with MEF or any other Reflection mechanism, wich makes your MVC app really modular and reduces coupling.

I have found myself that this implementation is not cost-effective on modular websites.

# python - 从python中的列表dict中获取值

> ID：13618695
> 
> 赞同：-3
> 
> 时间：2012-11-29T04:10:25.253
> 
> 标签：python, list, dictionary

**我有字典列表，**

```
result = {'lat': u'-7.798668', 'lng': u'110.369487', 'name': u'Kalimas Service', 'address': u'Jalan Mayor'} 
```

**我想要输出：**

```
lat = -7.798668
lng = 110.369487
name = Kalimas Services
address = Jalan Mayor 
```

请帮我解决这个问题......！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T04:17:11.370

您可以使用 dict 内置方法 items()

```
 result = {'lat': u'-7.798668', 'lng': u'110.369487', 'name': u'Kalimas Service', 'address': u'Jalan Mayor'}
    for k, v in result.items():
      print k, "=", v 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T04:13:22.687

```
print "lat = %s" %result['lat']
print "lng = %s" %result['lng']
print "name = %s" %result['name']
print 'address = %s' %result['address'] 
```

或者

```
for val in "lat lng name address".split():
    print "%s = %s" %(val, result[val]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T04:13:52.420

访问 dict 的语法如下：

```
l = {'key': value}
l['key'] == value 
```

要获取字典中的键，请使用`dict.keys()`

尝试使用它来获得您想要的结果。

# asp.net-mvc - 将文件从 Android 上传到 VB.NET MVC API

> ID：13618699
> 
> 赞同：1
> 
> 时间：2012-11-29T04:11:05.960
> 
> 标签：asp.net-mvc, vb.net, file-upload, asp.net-web-api

我正在尝试将图像从我的移动应用程序上传到使用 VB.NET MVC 4 WEB API 构建的 Web 服务。移动应用程序可以成功上传到我测试过的 php api，所以我知道问题出在我的网络服务上。我在网上搜索并没有找到任何用于上传文件的工作示例，任何建议将不胜感激。

代码：

```
Imports System.IO
Imports System.Net.Http
Public Class Pic

 Public Property pix As FileUpload

Public Function addPic() As String
    Try

         Dim savedFile As String
         savedFile = Path.GetFileName(Me.pix.PostedFile.FileName)
         Me.pix.PostedFile.SaveAs("C:\tmp" + savedFile)

    Catch exp As Exception
        'Response.Write(exp.Message)
    End Try

   End Function
End Class 
```

错误：

> 没有 MediaTypeFormatter 可用于从媒体类型为“multipart/form-data”的内容中读取“Pic”类型的对象。

异常类型：

System.InvalidOperationException

堆栈跟踪：

在 System.Net.Http.HttpContentExtensions.ReadAsAsync[T]（HttpContent 内容，类型类型，IEnumerable `1 formatters, IFormatterLogger formatterLogger)\r\n at System.Net.Http.HttpContentExtensions.ReadAsAsync(HttpContent content, Type type, IEnumerable`1 格式化程序，IFormatterLogger formatterLogger）\r\n 在 System.Web.Http.ModelBinding.FormatterParameterBinding.ReadContentAsync（HttpRequestMessage 请求，类型类型， IEnumerable `1 formatters, IFormatterLogger formatterLogger)\r\n at System.Web.Http.ModelBinding.FormatterParameterBinding.ExecuteBindingAsync(ModelMetadataProvider metadataProvider, HttpActionContext actionContext, CancellationToken cancellationToken)\r\n at System.Web.Http.Controllers.HttpActionBinding.<>c__DisplayClass1.<ExecuteBindingAsync>b__0(HttpParameterBinding parameterBinder)\r\n at System.Linq.Enumerable.WhereSelectArrayIterator`2.MoveNext()\r\n at System.Threading.Tasks.TaskHelpers.IterateImpl(IEnumerator`1 enumerator, CancellationToken cancelToken)"}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T03:26:14.867

```
Public Function Post()            
    Dim value1 As String = System.Web.HttpContext.Current.Request.Form("value1")

        Dim image1 As HttpPostedFile = System.Web.HttpContext.Current.Request.Files("value2")

        Dim filename As String = System.IO.Path.GetFileName(image1.FileName)

        pix.SaveAs("c:\tmp\" + filename)

    End Function 
```

# c++ - boost::unordered_map 中的运算符 []

> ID：13618702
> 
> 赞同：2
> 
> 时间：2012-11-29T04:11:22.613
> 
> 标签：c++, boost, operator-keyword, lookup, unordered-map

因此，我正在阅读以下网址的 boost::unordered_map 文档：

[http://www.boost.org/doc/libs/1_52_0/doc/html/boost/unordered_map.html#id1395195-bb](http://www.boost.org/doc/libs/1_52_0/doc/html/boost/unordered_map.html#id1395195-bb)

它说 operator[] 的效果和回报是

效果：如果容器还没有包含键等效于 k 的元素，则插入值 std::pair(k, mapped_type())

返回： 对 x.second 的引用，其中 x 是容器中已经存在的元素，或者是新插入的元素，其键等效于 k

当我运行以下代码时，它显示指向 map["xyz"] 的指针为 0。我错过了什么？我看到很多人使用 find(key_value) 但不确定它是如何工作的。

```
#import <iostream>
#import <boost/unordered_map.hpp>

class myClass
{
public:
    myClass():_i(-1){};
    myClass(int i):_i(i){};
    int _i;
};

int main()
{
    boost::unordered_map<std::string,myClass*> map;
    map["abc"] = new myClass(1);
    std::cout << map["abc"] << std::endl;
    std::cout << map["xyz"] << std::endl;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T15:35:16.593

*将我的答案从帖子移到 Yakk 建议的答案。*

因此，我解决了自己的问题，并发现其他人可能会从我的经验中受益或有一些评论，所以我仍在发帖。

我认为正在发生的事情是它在我的地图中创建了一个新元素，只是 rhs 是一个 myClass*。我把它改写为

```
class myClass
{
public:
    myClass():_i(-1){};
    myClass(int i):_i(i){};
    int _i;

    friend std::ostream& operator<< (std::ostream& stream, const myClass& myClass){return stream << "[" << myClass._i << "]";}
};

int main()
{
    boost::unordered_map<std::string,myClass> map;
    map["abc"] = myClass(1);
    std::cout << map["abc"] << std::endl;
    std::cout << map["xyz"] << std::endl;
    return 0;
} 
```

这是我的输出：

```
$ g++ test.cpp && ./a.out 
[1]
[-1] 
```

希望这可以帮助有需要的人。

# c++ - 如何在 C++ 中更改变量的常量？

> ID：13618706
> 
> 赞同：1
> 
> 时间：2012-11-29T04:11:59.730
> 
> 标签：c++, constants

以下是我的代码

```
const int i = 10;
cout<<i<<"\n";
int *ip = (int*)&i;
*ip = 20;
cout<<i<<"\n"; 
```

我期待输出为`10`和`20`。
但我得到的输出为`10`and `10`。

我能够编译程序，并且在编译时或运行时没有收到任何错误，但没有得到预期的结果。如果我删除了变量 i 的常量，为什么不给它分配新值？

如果有人能解释发生了什么以及可以做些什么来达到我的预期结果，我将不胜感激。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-29T04:14:26.660

> **如何在 C++ 中更改变量的常量？**

您永远不应该更改固有`const`限定变量的常量！
声明限定变量的`const`目的是在初始化后不应修改它。通过尝试更改常量，您违反了与编译器的合同。

如果您需要修改变量，只需不要将其声明为`const`.

请注意，C++ 提供了`const_cast`对变量删除或添加常量的功能。但是，在删除 constness 的同时，它应该用于从指向**最初不是 constant**的东西的引用/指针中删除 constness 。

* * *

> **怎么了？**

正在发生的是**未定义的行为**。

你不应该改变一个`const`合格变量的常量，如果你通过一些指针黑客这样做，你得到的是未定义的行为。

在未定义行为的情况下，该标准不强制编译器提供编译时诊断。请注意，如果您以最高警告级别编译，某些编译器可能会警告您。

此外，未定义的行为意味着当您运行程序时，任何事情都可能发生，编译器可能会向您显示任何结果，并且不需要解释。

* * *

> **为什么结果？**

在这种情况下，因为`i`是常量，编译器可能会将 const 变量内联作为其优化的一部分，因此指针hackery 不会影响值，`i`因为它已经被编译器内联，它只是将内联值`i`放在代码中遇到的任何地方。

请注意，编译器这样做是因为您与编译器签订了合同，

***这是我`i`的，在我的程序的整个生命周期中永远不会改变。***

编译器可以自由地应用它可能想要的任何优化，只要它遵守合同并且在这种情况下它会这样做。

# c++ - 三角形二维数组比矩形数组消耗更多内存

> ID：13618712
> 
> 赞同：4
> 
> 时间：2012-11-29T04:12:50.737
> 
> 标签：c++, memory, scheduled-tasks, dynamic-programming, multidimensional-array

我正在为我的大学课程编写一个程序。它是动态规划算法的实现，用于 2 个处理器上的简单版本的调度任务。因为这是一种浪费内存的方法，我想到了一些改进。例如，不必存储整个 S xn 矩形数组，其中 S 是所有任务的次数之和，n 是任务数。因为在算法的第一次迭代中，数据只会存储在 n 轴的小索引值中，我想我可以让我的数组成为一个三角形，即每个下一个子数组都是一定数量的元素更长。

然后我在任务管理器中查看内存使用情况，我很震惊。带有矩形阵列的版本占用了 980KB。带有三角形阵列的版本（所以较小的）花了将近 15MB！也许我对系统使用的内存分配方式一无所知，或者我有错觉。或者我在代码中犯了一些愚蠢的错误。但我敢打赌我什么都不知道。有人可以启发我吗？

这是我的代码：

```
#include <iostream>
#include <fstream> 
#include <conio.h>
#include <stack>

using namespace std;

void readTasks(char* filename, int*& outTaskArray, int& outTaskCount)
{
    ifstream input = ifstream();
    input.open(filename, ios::in);

    input >> outTaskCount;
    outTaskArray = new int[outTaskCount];
    for (int i = 0; i < outTaskCount; ++i)
    {
        input >> outTaskArray[i];
    }

    input.close();
}

void coutTasks(int* taskArray, int taskCount)
{
    cout << taskCount << " tasks:\n";
    for (int i = 0; i < taskCount; ++i)
    {
        cout << i << ": " << taskArray[i] << endl;
    }
}

void Scheduling2(int* taskArray, int taskCount, int memorySaving, 
    stack<int>*& outP1Stack, stack<int>*& outP2Stack)
{
    bool** scheduleArray = new bool*[taskCount];
    int sum;

    // I know that construction below is ugly cause of code repetition.
    // But I'm rather looking for performance, so I try to avoid e.g. 
    // checking the same condition too many times.
    if (memorySaving == 0)
    {   
        sum = 0;
        for (int i = 0; i < taskCount; ++i)
        {
            sum += taskArray[i];
        }

        scheduleArray[0] = new bool[sum + 1];
        for (int j = 0; j < sum + 1; ++j)
        {
            scheduleArray[0][j] = j == 0 || j == taskArray[0];
        }
        for (int i = 1; i < taskCount; ++i)
        {
            scheduleArray[i] = new bool[sum + 1];
            for (int j = 0; j < sum + 1; ++j)
            {
                scheduleArray[i][j] = scheduleArray[i - 1][j] || 
                    j >=  taskArray[i] && 
                    scheduleArray[i - 1][j - taskArray[i]];
            }
        }

        getch(); // I'm reading memory usage from Task Manager when program stops here

        int halfSum = sum >> 1;
        while (!scheduleArray[taskCount - 1][halfSum]) --halfSum;

        for (int i = taskCount - 1; i > 0; --i)
        {
            if (scheduleArray[i - 1][halfSum])
                outP1Stack->push(i);
            else if (scheduleArray[i - 1][halfSum - taskArray[i]])
            {
                outP2Stack->push(i);
                halfSum -= taskArray[i];
            }
        }
        if (halfSum) outP2Stack->push(0);
            else outP1Stack->push(0);
    }
    else if (memorySaving == 1)
    {   
        sum = 0;
        for (int i = 0; i < taskCount; ++i)
        {
            sum += taskArray[i];

            scheduleArray[0] = new bool[sum + 1];
            for (int j = 0; j < sum + 1; ++j)
            {
                scheduleArray[0][j] = j == 0 || j == taskArray[0];
            }
            for (int i = 1; i < taskCount; ++i)
            {
                scheduleArray[i] = new bool[sum + 1];
                        for (int j = 0; j < sum + 1; ++j)
                {
                    scheduleArray[i][j] = scheduleArray[i - 1][j] || 
                        j >= taskArray[i] && 
                        scheduleArray[i - 1][j - taskArray[i]];
                }
            }
        }

        getch(); // I'm reading memory usage from Task Manager when program stops here

        int halfSum = sum >> 1;
        while (!scheduleArray[taskCount - 1][halfSum]) --halfSum;

        for (int i = taskCount - 1; i > 0; --i)
        {
            if (scheduleArray[i - 1][halfSum])
                outP1Stack->push(i);
            else if (scheduleArray[i - 1][halfSum - taskArray[i]])
            {
                outP2Stack->push(i);
                halfSum -= taskArray[i];
            }
        }
        if (halfSum) outP2Stack->push(0);
        else outP1Stack->push(0);
    }

    for (int i = 0; i < taskCount; ++i)
    {
        delete[] scheduleArray[i];
    }
    delete[] scheduleArray;
}

int main()
{
    char* filename = "input2.txt";
    int memorySaving = 0; //changing to 1 in code when testing memory usage

    int* taskArray; // each number in array equals time taken by task
    int taskCount;
    readTasks(filename, taskArray, taskCount);

    coutTasks(taskArray, taskCount);

    stack<int>* p1Stack = new stack<int>();
    stack<int>* p2Stack = new stack<int>();

    Scheduling2(taskArray, taskCount, memorySaving, p1Stack, p2Stack);

    cout << "\np1: ";
    while (p1Stack->size())
    {
        cout << p1Stack->top() << ", ";
        p1Stack->pop();
    }
    cout << "\np2: ";
    while (p2Stack->size())
    {
        cout << p2Stack->top() << ", ";
        p2Stack->pop();
    }

    delete p1Stack;
    delete p2Stack;

    delete[] taskArray;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T11:49:14.867

妈的，我瞎了 我有一个该死的大内存泄漏，我没有看到。我只是查看了执行的部分，当`memorySaving == 1`我注意到我正在分配（天知道为什么）我的数组`taskCount`时间的每一行......当我写这篇文章时，这完全不是我的意思。好。那是深夜。

很抱歉打扰大家。问题应该关闭。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T13:07:33.520

*如果您接受了我的建议（正如我所怀疑的那样）* ，因为我的建议会解决您的问题，所以我会给他们一个答案！

> 但是为什么在这种情况下使用向量会帮助我呢？我不需要使用它的任何功能。

是的，你做到了！您需要它最重要的“功能”之一……阵列内存块的自动管理。请注意，如果您的声明是`vector< vector<bool> > scheduleArray`，则您*不可能*有泄漏。您的代码中不会有任何新的或删除的内容......这怎么可能？

使用矢量的其他好处：

*   你不能不小心在指针上做 a`delete`而不是`delete[]`

*   它可以进行边界检查*（如果你启用它，你应该在你的调试版本中......尝试一个测试只是`vector<int> v; v[0] = 1;`为了确保你已经打开了它。）*

*   Vector 知道它拥有多少个元素，因此您不会遇到必须传递参数的情况，例如`taskCount`. 这消除了您有机会在簿记中犯错误的另一个地方。 *（例如，如果您从向量中删除一个元素并忘记将其反映在 count 变量中怎么办？）*

回复您的评论：

> 移位操作不是比除以二更快吗？

不。

如果您在原始汇编中进行编码，那么有时在某些架构上可能是这样。但在大多数情况下，整数除法和位移都需要花费整个周期。而且我确信存在一些古怪的架构，它们的分裂速度比它移动的速度快。

请记住，这是 C++，而不是汇编。最好保持代码清晰并相信优化器会做正确的事情。例如，如果 SHIFT 和 DIV 都需要一个指令周期，但是如果由于管道的某些原因而处于紧密循环中，则可以通过交替使用哪个来获得更快的速度？

> memorySaving 将有更多的价值，而不仅仅是两个。

然后使用枚举类型。

> 有 std::vector O(1) 通过索引访问每个元素的时间，就像数组一样？

是的，正如你所发现的。在存储方面存在[少量的每个向量开销](https://stackoverflow.com/questions/6110361/vectoroperator-overhead)（因编译器而异）。但正如我上面提到的，这是一个很小的代价。此外，您可能通常首先跟踪数组外部某个变量的长度。

> 至于指向堆栈的指针-动态内存分配通常不是更好吗，因为我可以自己决定何时释放内存？

*正是因为这个原因*，它通常**不会**更好。如果您自己负责决定何时释放内存，那么您可以放弃管理该责任。

 *所以只要有可能，你应该让 C++ 的作用域来处理你的对象的生命周期。有时无法避免创建一个在其创建范围之外存活的动态对象，但这就是现代 C++ 具有智能指针的原因。使用它们！

[http://en.wikipedia.org/wiki/Smart_pointer](http://en.wikipedia.org/wiki/Smart_pointer)

例如，`readTasks`如果它返回一个`shared_ptr< vector<int> >`.

> 如果我不使用它支持的任何函数，我为什么要使用 std::string，而 char* 在这里和 std::string 一样好？

养成不使用它的习惯，原因与上述矢量论点相似。例如，边界检查。另外，测验问题：如果您想将“input2.txt”大写并说，您认为会发生什么`filename[0] = 'I';`？

完成我的所有建议后，您可以查看[boost::dynamic_bitset](http://www.boost.org/doc/libs/1_36_0/libs/dynamic_bitset/dynamic_bitset.html)。:-)*

# opengl-es - OpenGL ES 2.0 的纹理和图像之间的关系

> ID：13618714
> 
> 赞同：0
> 
> 时间：2012-11-29T04:13:05.253
> 
> 标签：opengl-es, cocos2d-iphone

我很难理解 OpenGL 中纹理和图像之间的关系。我知道当纹理在 iPhone 上由 GPU 渲染时，它们是固有的开销，这正是您创建 CCSpriteBatchNode (cocos2d) 以及纹理图集以减少这种开销的原因。但是 GPU 如何使用相同的纹理绘制不同的图像，例如岩石、敌人、船只甚至是巨大的怪物？我在某处读到纹理应该是存储图像颜色元素值的 OpenGL 缓冲区，但就像我说的那样，可能有许多不同类型的对象具有不同的颜色值，那么如何使用相同的纹理来绘制它们？

我完全无法区分纹理和我们可以绘制的真实图像，比如说在 Illustrator 上，然后使用纹理图集将其复制到我们的项目中。另一个有趣的事情是，纹理应该有 2 次方的维度，但图像可以有任何维度！任何人都可以准确地指导我纹理是什么以及它与图像有何不同？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T07:06:58.053

关于使用 CCSpriteBatchNode 和使用一种纹理绘制不同的东西。您可以将多张图片组合到一个纹理图集中。对于一个文件，将创建一个纹理，该纹理将包含所有图像，并且所有精灵（如您所说，岩石、敌人等）将简单地使用不同的纹理坐标来仅绘制纹理的一部分，而不是整个质地。

它不仅对减少绘图调用次数很有用，而且会提高 fps 速率。它还可以帮助您节省应用程序内存并一次加载更多图片。这是关于你的第二个问题。

是的。加载到内存中的纹理的尺寸将是 2 的幂。因此，从图像中，实际大小为 64x64 的纹理将创建为相同大小的纹理，但对于大小为 65x65 的图片，将创建大小为 128x128 的纹理。它将增加内存使用量。在创建纹理图集时，可以将多张不同大小的图片组合成一个巨大的纹理图集，大小为2048x2048。创建的纹理将具有相同的大小，并且将包含所有图像（帧），因此您可以将其与 CCSpriteBatchNode 一起使用以减少绘制调用的数量。

# android - Listview在imageview重用中延迟加载图像

> ID：13618736
> 
> 赞同：0
> 
> 时间：2012-11-29T04:15:01.157
> 
> 标签：android, android-listview

我有一个列表视图，我懒洋洋地从云端加载单元格中的位图。现在的问题是，我在适配器的**getView**中向服务发出请求，因此发出了请求，但是当酒店单元被重用时，一个 imageview 有多个图像获取请求，所以 imageview 图像正在切换在多个图像之间..帮助？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T04:18:25.320

由于`ImageView`正在被回收，它现在带有不同的网址。您需要取消之前的下载并执行新的下载。您可以通过 Google 搜索一些开源框架。

这是一个：[https ://github.com/mitmel/Android-Image-Cache](https://github.com/mitmel/Android-Image-Cache)

更好的是： http: [//square.github.io/picasso/](http://square.github.io/picasso/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-19T09:31:00.767

由于您尚未共享代码，我猜您没有在适配器中使用支架模式。

vogella 提供了最好的教程。

[http://www.vogella.com/articles/AndroidListView/article.html#adapterperformance_hoder](http://www.vogella.com/articles/AndroidListView/article.html#adapterperformance_hoder)

# python - 用于Linux的python中的getProcAddress？

> ID：13618739
> 
> 赞同：3
> 
> 时间：2012-11-29T04:15:08.393
> 
> 标签：python, linux

我正在使用linux系统。我知道如何使用 nm 和其他 gnu binutils，但我想知道是否有更好的方法来使用 python 解析函数地址。如果有更好的方法，我不想解析来自系统调用的文本响应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T04:40:21.533

如果要调用类型相关的函数，请使用`ctypes`. 或者，如果您想在没有任何类型的情况下动态调用它，请使用`dl`

```
import dl
dl.open("/lib/libc.so.6").call("time") 
```

如果要获取函数符号，请使用`sym`.

# c# - 如何从 Windows-Phone-7 中的 C# 中的发件人参数获取对象

> ID：13618747
> 
> 赞同：0
> 
> 时间：2012-11-29T04:15:53.497
> 
> 标签：c#, windows-phone-7, sender

我想通过单击我的 wp7 应用程序中的图像来获取图像控件的来源，我尝试了这个但没有得到解决方案。

```
Image img = new Image();
img.Source = new BitmapImage(uri);
img.Height = 105;
img.Width = 167;
img.Margin = new Thickness(Xpos, Ypos, 0, 0);
//img.Height = j;
img.MouseLeftButtonUp += new MouseButtonEventHandler(img_MouseLeftButtonUp);

void img_MouseLeftButtonUp(object sender, MouseButtonEventArgs e)
{
     var image = (Image)sender;
     MessageBox.Show(image.Source.ToString());
} 
```

请给我一些想法，我怎样才能获得我的图像控制的来源。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T04:42:32.843

您需要将 转换`Image.Source`为 a`System.Windows.Media.Imaging.BitmapImage`才能获得`UriSource`.

```
MessageBox.Show(((System.Windows.Media.Imaging.BitmapImage)image.Source).UriSource.ToString()); 
```

# java - 数组项目 int 双不匹配

> ID：13618748
> 
> 赞同：0
> 
> 时间：2012-11-29T04:16:10.483
> 
> 标签：java, arrays, int, double, mismatch

我有一个需要帮助的数组项目。我已经完成了大部分工作，但最后我遇到了一些问题。我可以输入学生姓名、成绩，然后对成绩进行排序（连同姓名一起）并按降序打印。不过，我需要将成绩设置为双打，而它们目前被困为整数。我尝试将 Int 的实例更改为 Double，但出现不匹配错误。我也设置了它，所以我在开始时输入了数组的大小，但它两次要求我输入“学生人数”。我该如何解决这个问题，所以它只会询问一次，或者两个答案都有 1 个输入。这是代码。

```
import java.util.Scanner;

public class Grades {

    public static void main(String[]args){

        {
            Scanner GradeIn = new Scanner(System.in);
            Scanner NameIn = new Scanner(System.in);
            System.out.print( "How many students are there? " );
            int[]GradeArray = new int[GradeIn.nextInt()];
            String[]nameArray = new String[GradeIn.nextInt()];

            for( int i=0 ; i<GradeArray.length ; i++ ) 
            {
                System.out.println( "Enter Grade for Student " + (i+1) + ": " );
                GradeArray[i] = GradeIn.nextInt();
                System.out.println( "Enter Name of Student " + (i+1) + ": " );
                nameArray[i] = NameIn.nextLine();
            }

            bubbleSort(GradeArray, nameArray);

            for (int i = 0; i<GradeArray.length; i++)
            {
                System.out.print(nameArray[i]);
                System.out.print(": ");
                System.out.print(GradeArray[i] + "   ");

            }
        }
    }

    private static void bubbleSort(int[]GradeArray, String[] nameArray){

        int n = GradeArray.length;
        int temp = 0;
        String temp2;

        for(int i=0; i<n; i++){
            for(int j=1; j<(n-i);j++){

                if(GradeArray[j-1]<GradeArray[j]){
                    //swap
                    temp=GradeArray[j-1];
                    GradeArray[j-1]=GradeArray[j];
                    GradeArray[j]=temp;

                    temp2=nameArray[j-1];
                    nameArray[j-1]=nameArray[j];
                    nameArray[j]=temp2;

                }
            }
        }
    }
} 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T07:50:00.323

据我所知，必须替换以下行：

```
int[]GradeArray = new int[GradeIn.nextInt()];
GradeArray[i] = GradeIn.nextInt();
private static void bubbleSort(int[]GradeArray, String[] nameArray){ 
```

和：

```
double[]GradeArray = new double[GradeIn.nextInt()];
GradeArray[i] = GradeIn.nextDouble();
private static void bubbleSort(double[]GradeArray, String[] nameArray){ 
```

如果替换后它不起作用，那么发布您如何更改它可能会有所帮助。

对于要求学生人数的两倍问题，更改：

```
int[]GradeArray = new int[GradeIn.nextInt()];
String[]nameArray = new String[GradeIn.nextInt()]; 
```

至：

```
int count = GradeIn.nextInt();
int[]GradeArray = new int[count];
String[]nameArray = new String[count]; 
```

# python - SQLObject - 更新许多记录

> ID：13618750
> 
> 赞同：2
> 
> 时间：2012-11-29T04:16:37.710
> 
> 标签：python, sqlite, sqlobject

我正在使用带有 sqlite 数据库的 SQLObject 来存储文档记录。已扫描文档的文档信息存储在文本文件中。我需要阅读所有这些文本文件（大约 800 个）并从中加载文档记录（每个文件平均 40 个文档）。目前我的代码如下（文档是表格）： -

```
 for doc in cc.documents:
      print doc['id']
      doc_recs = Document.selectBy(costcode = x, doc_id = int(doc['id']))
      dcmnt = doc_recs.getOne(None)
      if not dcmnt:
        dcmnt = Document(costcode = x, doc_id = int(doc['id']))

      dcmnt.title = doc['title']
      dcmnt.author = doc['author']
      dcmnt.recipient = doc['recipient']
      dcmnt.date = doc['date']
      dcmnt.firstpage = doc['firstpage']
      dcmnt.lastpage = doc['lastpage']
      dcmnt.type = doc['type']
      dcmnt.allpages = doc['allpages'] 
```

但这需要很长时间，而且每张唱片都需要更长的时间。

大概每次我更改属性时，SQLObject 都会提交记录，这很浪费。如果我只是添加记录，我可以在首次创建记录的同时创建属性，这应该会更快，但 SQLObjects 在添加记录时似乎仍然很慢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-07T21:41:00.623

第一，不要一一更新列。代替

```
 dcmnt.title = doc['title']
    dcmnt.author = doc['author'] 
```

做

```
 dcmnt.set(
        title = doc['title'],
        author = doc['author'],
        recipient = doc['recipient'],
        date = doc['date'],
        firstpage = doc['firstpage'],
        lastpage = doc['lastpage'],
        type = doc['type'],
        allpages = doc['allpages'],
    ) 
```

这会发送一个 UPDATE 而不是十几个。

2，对于大量插入使用[SQLBuilder](http://sqlobject.org/FAQ.html#how-to-do-mass-insertion)。它不太方便，但速度更快。

# codeigniter - 在 CodeIgniter 中使用输入类

> ID：13618758
> 
> 赞同：0
> 
> 时间：2012-11-29T04:17:24.713
> 
> 标签：codeigniter

我检索如下 URL

```
http://localhost/codeigniter/?first=value_on_first_param&second=value_on_second_param 
```

在那个 URL 我有代码来检索在 URL 上有一些 GET 参数的 URL

```
if( $first = $this->input->get( 'first' )
    && $second = $this->input->get( 'second' )
){

    echo 'first param: '.$first;
    echo '<br />';
    echo 'second param: '.$second;

} 
```

然后我尝试打印分配给某些变量的参数的输出

```
first param: 1
second param: value_on_second_param 
```

正如我们在上面看到的，我的第一个参数值为 1 而不是 value_on_first_param。为什么？我在这里做错了吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T04:21:58.513

这是因为作业：

你做

```
$first = 
       $this->input->get( 'first' ) && 
$second = $this->input->get( 'second' ) 
```

就好像

```
$first = 
      ( $this->input->get( 'first' ) && 
        $second = $this->input->get( 'second' )
      ) 
```

所以`$first`将获得真正的价值。

你必须使用它：

```
if( ($first = $this->input->get( 'first' ))
    && ($second = $this->input->get( 'second' ) )
){

    echo 'first param: '.$first;
    echo '<br />';
    echo 'second param: '.$second;

} 
```

# c# - SqlCeDataReader while(read()) 在空白数据集上执行

> ID：13618759
> 
> 赞同：0
> 
> 时间：2012-11-29T04:18:16.653
> 
> 标签：c#, sql-server-ce, sqlcedatareader

我正在使用 SqlCeDataReader 从查询中读取结果并将它们添加到可能返回 0 行或多行的对象列表中。

我的代码：

```
while (tourReader.Read())
{
    Tour newTour = TourDBA.RetrieveTour( (int)reader["Id"] );
    if (newTour != null)
        creater.Tours.Add(newTour); 
} 
```

我会假设由于 Select 查询应该返回 0 行，Read() 将返回 false，因此永远不会进入循环。（我知道这个测试实例的表中有什么，0 行是这个测试的预期行为。）

知道如何解决这个问题吗？（使用 .HasRows 也会引发异常。）

另一件事 - 我在此查询中使用的连接是打开的，并且在方法进入此 while 循环之前在不同的 SqCeCommand 中使用，而不是在此处执行的连接。如果这很重要...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T05:14:29.707

核实：

```
while (tourReader.Read()) // tourReader here
{
    Tour newTour = TourDBA.RetrieveTour( (int)reader["Id"] ); // reader here
    if (newTour != null)
        creater.Tours.Add(newTour); 
} 
```

`reader`和`tourReader`一样吗？

# php - 不接受 Facebook 回调响应

> ID：13618761
> 
> 赞同：1
> 
> 时间：2012-11-29T04:18:24.843
> 
> 标签：php, facebook

我遇到的问题的描述与此帖子中的描述完全相同：[未调用积分回调脚本（错误 1383046）](https://stackoverflow.com/questions/8166977/credits-callback-script-not-called-error-1383046)

我打算回复那个特定的帖子，但是，这个网站说不要这样做，所以我正在创建一个新线程。

我的描述与其他海报声明中的描述完全相同，但我没有 .htaccess 文件。

我可以看到 Facebook 调用了我的回调文件 (.php) - 两次 - 但它仍然给我一个错误：“抱歉，我们在处理您的付款时遇到了问题。您尚未为此交易付费。请尝试再次。”

我设置回调以返回这个预设响应（在我看来格式正确），但这不起作用。

```
{"content":[{"title":"10000 Game Credits","description":"Credits used for playing the games","price":5,"image_url":"http:\/\/www.egamestudio.com\/fbslot\/Coin.png","product_url":"http:\/\/www.egamestudio.com\/fbslot\/Coin.png","item_id":"newcash","order_id":"1a"}],"method":"payments_get_items"} 
```

几个问题： 1\. 是否处于沙盒模式是否重要（我都尝试过，但没有任何区别，但我想澄清一下） 2\. 你是否必须注册与 TrialPay 或其他东西一起工作，也许这是导致问题的原因？3\. 我是否遗漏了可能需要的 oauth 令牌，或者缺少与安全件类似的东西？

任何建议都会很棒。

谢谢

# jquery - eventClick 后无法隐藏事件详细信息

> ID：13618764
> 
> 赞同：0
> 
> 时间：2012-11-29T04:18:35.903
> 
> 标签：jquery, fullcalendar

以下代码为我提供了从数据库提供事件的基本功能以及 eventClick 上的事件详细信息。但是从这段代码中，当切换到另一个视图时，我无法隐藏详细信息。

您可以找到两个屏幕截图。有了这个：

![事件已被点击，详细信息显示在框中](../Images/74b02b8de00201ab504ffa6b3cd4dbdb.png) 单击事件，详细信息显示在月视图的框中。

切换到周视图，您可以在周视图中找到相同的详细信息..我希望它在切换视图后隐藏..

![从月视图切换到周视图不会隐藏点击事件](../Images/b1c0b4cb73f77ee97ffe7dde019d6548.png)

代码： -

```
<script>
$(document).ready(function() {

    $('#cal').fullCalendar({ 
    theme: true,
        height: 600,
        header: {
                left: 'prev,next today',
                center: 'title',
                right: 'month,basicWeek,basicDay',
                },

        editable: true,
        events: 'php/json-events.php',
        eventMouseover: function(calEvent, jsEvent) {
                    var myFormattedDate = $.fullCalendar.formatDate(calEvent.start, "ddd, dd MMMM yyyy");

                    $(this).click(function(e) {
                        document.getElementById('des').innerHTML=calEvent.description;
                    document.getElementById('tim').innerHTML=myFormattedDate;
                        $(this).css('z-index', 10000);

                        $('.tooltipevetn').fadeIn('500');
                        $('.tooltipevetn').fadeTo('10', 1.9);
                        $('.tooltipevetn').css('top', e.pageY);
                        $('.tooltipevetn').css('left', e.pageX);
                    });
                },

                eventMouseout: function(calEvent, jsEvent) {
                    $(this).css('z-index', 8);

                }, 
                dayClick: function(calEvent, jsEvent){
                    $('.tooltipevetn').hide();
                }
                });

});
</script>

<body style="margin: 20px;">
    <div style="width: 1000px; margin-left: 150px; ">
    <div id="cal" ></div></div>
    <div id="tevent" class="tooltipevetn" style="width:300px;height:130px;background:#FFFFFF;padding: 20px;position:absolute;z-index:10001;border:1px solid #CCCCCC; display: none;">
    <h3 id="des"></h3>
    <p id="tim"></p>
    <br/><br/>
    <hr/>
    <a href="#">Copy to calendar</a><a href="#" style="float: right;">More Details >></a>
    </div>
</body> 
```

如果我点击任何一天，它就会删除，因为我们有隐藏在其中的代码.. 任何帮助表示赞赏。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T06:42:57.517

尝试响应[viewDisplay](http://arshaw.com/fullcalendar/docs/display/viewDisplay/)回调... :)

# jquery - 在同一页面上使用不同版本的 Fancybox

> ID：13618765
> 
> 赞同：2
> 
> 时间：2012-11-29T04:18:40.770
> 
> 标签：jquery, fancybox, wordpress

我有一个使用 Fancybox 的 Wordpress 插件，但有些人有使用版本的主题和 Fancybox 插件。

尝试使用这些版本意味着我需要编写自定义代码来匹配不同版本的 Fancybox。为了避免这种情况，我决定在我的插件中包含我较新版本的 Fancybox（仅当我需要它时）并将其设置为新的 jQuery 属性名称（不是`$.fancybox`）。

我[修改了原来的fancybox](https://github.com/aramkocharyan/fancyBox/blob/master/source/jquery.fancybox.init.js)源并添加了这个功能：

```
var jQueryCrayon = jQuery;
fancyboxInit(window, document, jQueryCrayon, 'crayonFancybox'); 
```

`fancyboxInit`将使用我的自定义版本的 fancybox 进行初始化`$.crayonFancybox`，我的脚本将使用它而不是`$.fancybox`，它将包含由其他用户拥有的主题/插件加载的旧版本的 Fancybox。这避免了两个版本覆盖`$.fancybox`函数并与模棱两可的结果冲突。

由于我之前找不到这个问题，因此我将其包含在此处以供讨论。这是处理这种情况的最佳方法，还是我应该寻找替代方法？jQuery 也有`$.noConflict()`，但这将涉及对我的脚本的入队顺序与主题和其他插件的假设进行假设，这可能会指定相同的入队优先级并导致歧义。

# c++ - Makefile 项目在未更改 makefile 后将不会构建（几乎相同的 make，工作正常）

> ID：13618767
> 
> 赞同：0
> 
> 时间：2012-11-29T04:19:09.930
> 
> 标签：c++, c, makefile

我在linux下编译了一个makefile项目，就在昨天。现在该项目将无法编译，我不记得对 makefile 本身进行了任何更改。它`make: *** No rule to make target 'obj/TranquilMain.o', needed by 'tranquil;. Stop.`在`make`. 我所做的唯一真正的更改是，当我从另一个项目复制代码和 makefile 时，我更改了某些文件（以及依赖项包括）的名称，然后更改`_DEPS`了 makefile 中的名称。必要位置的所有文件。

应该注意的是，如果我从 _OBJ 列表中删除除 TranquilMain.o 之外的所有其他文件，它编译得很好。`enter code here`我希望我能提供的不仅仅是代码和这些知识，但我不知道问题出在哪里。

适当的 Makefile：“makefile”

```
#!/usr/bin/make

CC      = gcc
CP      = g++

SRC_DIR     = #.
OBJ_DIR     = obj
INC_DIR     = ../include
LIB_DIR     = ../lib

LIBS        = -lm -lSDL -lSDLmain -lSDL_image -lSDL_mixer -lSDL_ttf -lSDL_net -lGL -lGLU -lGLEW
CFLAGS      = -I$(INC_DIR) -L$(LIB_DIR) -std=gnu++0x

_DEPS   = DefaultConfig.h BaseApplication.h BasePlugin.h SDLImage.h SDLFont.h SDLWindow.h SDLInput.h SDLRenderer.h SDLApplication.h Math2D.h SDLTimer.h
DEPS    = $(patsubst %,$(INC_DIR)/%,$(_DEPS))

_OBJ    = TranquilMain.o BaseApplication.o BasePlugin.o SDLImage.o SDLFont.o SDLWindow.o SDLInput.o SDLRenderer.o SDLApplication.o Math2D.o SDLTimer.o
OBJ = $(patsubst %,$(OBJ_DIR)/%,$(_OBJ))

$(OBJ_DIR)/%.o: %.cpp $(DEPS)
    $(CP) -c -o $@ $< $(CFLAGS)

tranquil: $(OBJ)
    $(CP) -o ../bin/$@ $^ $(CFLAGS) $(LIBS)

.PHONY: clean
clean:
    rm -f $(OBJ_DIR)/*.o *~ core $(INC_DIR)/*~ 
```

显然没用的 TranquilMain.cpp （只是依赖项中的第一个文件）

```
#include <iostream>
#include <fstream>
#include <string>

int main( int argc, char* args[] )
{
    bool running = true;

    while( running == true )
    {
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T16:41:27.473

当我从上面的 Makefile 和项目结构开始

```
├── include/
└── src/
    ├── Makefile
    ├── TranquilMain.cpp
    └── obj/ 
```

然后我得到与`make: *** No rule to make target `obj/TranquilMain.o', needed by `tranquil'.`您在上面报告的相同的错误。这是什么原因造成的？让我们在调试模式下运行 make 来找出答案。

首先添加

```
.SUFFIXES:
%:: SCCS/s.%
%:: RCS/%
%:: RCS/%,v
%:: %,v
%:: s.% 
```

到 Makefile 的顶部以取消一些只会使调试输出混乱的默认规则。

然后，运行`make -d`：

```
GNU Make 3.81
Copyright (C) 2006  Free Software Foundation, Inc.
This is free software; see the source for copying conditions.
There is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A
PARTICULAR PURPOSE.

This program built for i386-apple-darwin11.3.0
Reading makefiles...
Reading makefile `Makefile'...
Updating makefiles....
 Considering target file `Makefile'.
  Looking for an implicit rule for `Makefile'.
  No implicit rule found for `Makefile'.
  Finished prerequisites of target file `Makefile'.
 No need to remake target `Makefile'.
Updating goal targets....
Considering target file `tranquil'.
 File `tranquil' does not exist.
  Considering target file `obj/TranquilMain.o'.
   File `obj/TranquilMain.o' does not exist.
   Looking for an implicit rule for `obj/TranquilMain.o'.
   Trying pattern rule with stem `TranquilMain'.
   Trying implicit prerequisite `TranquilMain.cpp'.
   Trying rule prerequisite `../include/DefaultConfig.h'.
   Trying pattern rule with stem `TranquilMain'.
   Trying implicit prerequisite `TranquilMain.cpp'.
   Trying rule prerequisite `../include/DefaultConfig.h'.
   Looking for a rule with intermediate file `../include/DefaultConfig.h'.
    Avoiding implicit rule recursion.
   No implicit rule found for `obj/TranquilMain.o'.
   Finished prerequisites of target file `obj/TranquilMain.o'.
  Must remake target `obj/TranquilMain.o'.
make: *** No rule to make target `obj/TranquilMain.o', needed by `tranquil'.  Stop. 
```

`make`首先确保`Makefile`是最新的。然后它尝试`tranquil`通过执行深度优先搜索来创建目标，构建所有必需的依赖项。`tranquil`取决于`${OBJ}`，其中的第一个元素是`obj/TranquilMain.o`。根据`${OBJDIR}/%.o`规则，这取决于`TranquilMain.cpp`所有`${DEPS}`. `${DEPS}`is的第一个元素`../include/DefaultConfig.h`，所以`make`尝试构建它。但它不存在，也没有构建它的规则。`make`得出结论，它无法`obj/TranquilMain.o`使用此规则构建，因为缺少依赖项。它试图找到另一个规则来使用确实存在的其他依赖项来构建它，但没有这样的规则。所以`make`停下来，说，“没有[有效的]规则[存在或可以构建依赖项]来制作目标`obj/TranquilMain.o`。”</p>

解决方案是什么？确保所有依赖项都存在。使用此 Makefile，要编译任何内容，您的项目必须至少包含：

```
.
├── include/
│   ├── BaseApplication.h
│   ├── BasePlugin.h
│   ├── DefaultConfig.h
│   ├── Math2D.h
│   ├── SDLApplication.h
│   ├── SDLFont.h
│   ├── SDLImage.h
│   ├── SDLInput.h
│   ├── SDLRenderer.h
│   ├── SDLTimer.h
│   └── SDLWindow.h
├── lib/
└── src/
    ├── BaseApplication.cpp
    ├── BasePlugin.cpp
    ├── Makefile
    ├── Math2D.cpp
    ├── SDLApplication.cpp
    ├── SDLFont.cpp
    ├── SDLImage.cpp
    ├── SDLInput.cpp
    ├── SDLRenderer.cpp
    ├── SDLTimer.cpp
    ├── SDLWindow.cpp
    ├── TranquilMain.cpp
    └── obj/ 
```

您可能还需要添加库文件才能`lib/`获得最终的可执行文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T17:18:45.090

另外，请确保您没有无意中将制表符变成空白。

规则*必须*以“tab”开头：

```
#BAD!
tranquil: $(OBJ)
<space><space>$(CP) -o ../bin/$@ $^ $(CFLAGS) $(LIBS)

#GOOD!
tranquil: $(OBJ)
<tab>$(CP) -o ../bin/$@ $^ $(CFLAGS) $(LIBS) 
```

# jquery - ActiveX 阻止实时站点加载背景图像

> ID：13618768
> 
> 赞同：3
> 
> 时间：2012-11-29T04:19:15.830
> 
> 标签：jquery, activex

我有一个在 Firefox 和 Chrome 中运行良好的网站，但是每隔几次我在 IE 中打开它，如果没有我手动允许 activex 运行，背景图像就不会加载。除背景图像外，其他所有内容都会加载。

一旦我允许它，背景图像就会很好地加载。如果我不允许，背景是黑色的。但是，如果我刷新页面，背景图像会在没有 activex 警告的情况下加载。

我已经进行了广泛的 Google 搜索，以寻找问题可能是什么，但我唯一能找到的是，在加载本地站点时，这经常是一个问题。但是，我的网站 (www.jesselaplante.com) 是实时的。

我会包含代码，但我完全不确定是什么部分可能导致问题。显然，我不希望客户在访问我的站点时必须允许 activex，并且加载背景图像非常重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T10:20:35.817

在我的 IE (9.0.10) 中工作，而不提示我使用 ActiveX。但是，在 FireBug 控制台中，我注意到页面加载时出现错误：

NotSupportedError：不支持操作

# gmail - Gmail：图像签名“图像未显示”问题

> ID：13618774
> 
> 赞同：1
> 
> 时间：2012-11-29T04:19:42.317
> 
> 标签：gmail

在我的特定 gmail 帐户中，发送电子邮件时，收件人会收到。问题是收件人要看到签名，他/她必须点击“**在下面显示图像**”

有没有办法让它自动出现？

就这些，多谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T04:23:08.267

目前，您无法将 Gmail 设置为显示来自任何发件人的所有图片；您必须在每个联系人的基础上执行此操作。

来源： http: [//support.google.com/mail/bin/answer.py ?hl=en&answer=8833](http://support.google.com/mail/bin/answer.py?hl=en&answer=8833)

# unix - 等效于 ls 的 tail -f？

> ID：13618776
> 
> 赞同：0
> 
> 时间：2012-11-29T04:20:14.800
> 
> 标签：unix

我`tail -f`一直使用终端来显示日志文件的内容；是否有一种等效的方法可以`ls`向您显示目录中文件列表的实时持久视图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T04:21:39.050

根据我们谈论的条目数量，这对您来说可能就足够了：

```
watch ls -l 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T04:23:45.227

您可以使用：

```
watch ls 
```

`watch`是一个非常有用的命令，可以与大多数其他命令一起使用。

# javascript - 从 Javascript 重新加载 Chrome 中的 flash 插件

> ID：13618780
> 
> 赞同：0
> 
> 时间：2012-11-29T04:21:06.960
> 
> 标签：javascript, plugins

插件是完全在 DOM 之外的，还是可以从 Javascript 以编程方式重新加载插件？

示例：由于 Chrome 的版本和 Windows 的 Flash 版本之间的差异，Flash 经常在 Chrome 中崩溃。重新加载是否可行？    

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T04:23:19.080

那么一个简单的答案应该工作。

**没有**

您不能使用 javascript 修改我们称之为“底层插件结构”的浏览器。意味着没有重新启动:)

# android - 如何创建 3d 翻转动画 android？

> ID：13618783
> 
> 赞同：4
> 
> 时间：2012-11-29T04:21:20.897
> 
> 标签：android, android-layout

我做过这样的动画：

[http://www.inter-fuser.com/2009/08/android-animations-3d-flip.html](http://www.inter-fuser.com/2009/08/android-animations-3d-flip.html)

但我想像盒子一样在前后布局之间设置动画，给空间。不要将布局粘在一起，在这个空间之间我给边框，所以它像盒子一样创建，所以当时翻转时它看起来像 3d 翻转。

# linux - 分别合并来自不同子目录的 jpg 并将它们保存到单个文件夹

> ID：13618784
> 
> 赞同：0
> 
> 时间：2012-11-29T04:21:28.537
> 
> 标签：linux, bash, shell

我在一个目录中有从 1 到 700 的文件夹（中间有很多缺失的数字）。在每个文件夹中都有`jpg`需要合并并转换为文件的`pdf`文件。每个文件夹中的图像必须创建为单独的`pdf`文件。为了合并和转换图像，我使用了以下脚本：

```
cd subfolder1
for i in *.jpg; do num=`expr match "$i" '\([0-9]\+\).*'`;
padded=`printf "%03d" $num`; mv -v "$i" "${i/$num/$padded}"; done
FILES=$( find . -type f -name "*jpg" | cut -d/ -f 2)
mkdir temp && cd temp 
for file in $FILES; do 
    BASE=$(echo $file | sed 's/.jpg//g');
    convert ../$BASE.jpg $BASE.pdf; 
    done && 
pdftk *pdf cat output ../../pdffolder/subfolder1.pdf && 
cd .. 
rm -rf temp 
```

`pdffolder`是我需要所有 pdf 文件所在的目录。是否有类似`for directory in a`或可以用于此目的的东西？该`pdf`文件也必须与子文件夹的名称相同。操作平台为Linux。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T08:33:08.673

要获取目录列表并遍历它们，您可以`find`与循环一起使用`for`：

```
for subdir in $(find path/to/parent/dir -maxdepth 1 -type d); do
        # Do stuff with $subdir i.e:
        echo $subdir
done 
```

这里`find`仅限于带有 , 的目录`-type d`，并且`-maxdepth 1`只会给出初始子目录，而不是子目录的子目录。

要将您的初始代码放入此循环中：

```
START_DIR=$(pwd)
# Loop over all directories
for subdir in $(find path/to/parent/dir -mathdepth 1 -type d); do
      # Get the base name, for the pdf naming
      subdir_base=$(basedir $subdir);

      cd subdir;

      for i in *.jpg; do 
          num=`expr match "$i" '\([0-9]\+\).*'`;
          padded=`printf "%03d" $num`; mv -v "$i" "${i/$num/$padded}";
      done

      FILES=$( find . -type f -name "*jpg" | cut -d/ -f 2)
      mkdir temp && cd temp 

      for file in $FILES; do 
           BASE=$(echo $file | sed 's/.jpg//g');
           convert ../$BASE.jpg $BASE.pdf; 
      done && 
      pdftk *pdf cat output ../../pdffolder/$subdir_base.pdf && 
      cd ..
      rm -rf temp
      cd $START_DIR;
 done; 
```

# python - 如何定义一个为函数/方法调用提供内插文档字符串的装饰器

> ID：13618786
> 
> 赞同：5
> 
> 时间：2012-11-29T04:21:34.713
> 
> 标签：python, decorator

我对装饰器还不够好，还没有做到这一点......是否可以定义一个装饰器**live_doc**，它允许我在方法或函数调用之后获得一个插值的 doc 字符串，填充实际参数和返回值。

```
@live_doc("f was called with %d, %s and returned %d")
def f(x, y):
  x + len(y) 
```

在下面的代码之后：

```
f(3, "marty")

d = f.doc 
```

**d**应该是“f 被调用为 3，“marty”，并返回 8”。我宁愿在访问 f.doc 之前不建立字符串，但肯定需要将调用 args 和返回值隐藏在某处。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T05:30:04.240

这是一个有点通用的解决方案，它将您的原始文档字符串视为模板，并维护有关装饰函数的其他信息（如其名称）：

```
from functools import wraps

def live_doc(func):
    template = func.__doc__
    @wraps(func)
    def wrapper(*args, **kwargs):
        ret_val = func(*args, **kwargs)
        args_pretty = ", ".join(repr(a) for a in args)
        kw_pretty = ", ".join("%s=%r" % (k, v) for k, v in kwargs.items())
        signature = ", ".join(x for x in (args_pretty, kw_pretty) if x)
        name =  func.__name__
        wrapper.__doc__ = template % locals()
        return ret_val
    return wrapper

@live_doc
def f(x, y):
    """%(name)s was called with %(signature)s and returned %(ret_val)r."""
    return x + len(y) 
```

在`f`第一次调用之前，`help(f)`在交互式解释器中为您提供：

```
Help on function f in module __main__:

f(*args, **kwargs)
    %(name)s was called with %(signature)s and returned %(ret_val)r. 
```

调用后，你会得到：

```
f(*args, **kwargs)
    f was called with 3, 'marty' and returned 8. 
```

或者使用更通用的功能，炫耀`kwargs`：

```
@live_doc
def q(*args, **kwargs):
    """%(name)s was called with %(signature)s and returned %(ret_val)r."""
    return len(args) + len(kwargs)

>>> q(1, 2, 3, a=7, b="foo")
5
>>> help(q)
q(*args, **kwargs)
    q was called with 1, 2, 3, a=7, b='foo' and returned 5. 
```

显然，您可以在`wrapper`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T04:32:48.040

这是我的代码，（我觉得写它很傻，所以我可能做错了什么，尤其是在中间部分`t`）：

```
def live_doc(d):
    def f_d(f):
        def f_new(*args):
            r = f(*args)
            t = [a for a in args]
            t.append(r)
            t = tuple(t)
            f_new.doc = d % t
            return r
        return f_new
    return f_d

@live_doc("f was called with %d, %s and returned %d")
def f(x,y):
    return x + len(y)

f(1,"hi")
print(f.doc)
// f was called with 1, hi and returned 3 
```

我从[http://www.python.org/dev/peps/pep-0318/](http://www.python.org/dev/peps/pep-0318/)使用过

```
@decomaker(argA, argB, ...)
def func(arg1, arg2, ...):
    pass 
```

相当于

```
func = decomaker(argA, argB, ...)(func) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T05:18:08.757

我想出了这个：

```
#!/usr/bin/env python

def docme(func):
    def wrap(*args, **kwargs):
        retval = None
        wrap.__doc__ = wrap.__olddoc__ + """

Last called with args: %s, %s
""" % (args, kwargs)
        try:
            retval = func(*args, **kwargs)
            wrap.__doc__ += 'Last returned: %s' % retval
            return retval
        except Exception as exc:
            wrap.__doc__ += 'Failed and raised: %r' % exc
            raise

    wrap.__doc__ = func.__doc__ + '\n\nHas not been called yet'
    wrap.__name__ = func.__name__
    wrap.__olddoc__ = func.__doc__
    return wrap

@docme
def foo(x):
    """foo docs"""
    if x == 1:
        raise ValueError('baz')
    return x * 2 
```

它维护函数的文档字符串，因此您仍然可以调用`help(foo)`以阅读其说明。在每次调用时，它都会使用参数和结果（或它引发的异常）更新该文档字符串：

```
>>> print foo.__doc__
foo docs

Has not been called yet
>>> foo(2)
4
>>> print foo.__doc__
foo docs

Last called with args: (2,), {}
Last returned: 4
>>> foo(1)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/tmp/foo.py", line 11, in wrap
    retval = func(*args, **kwargs)
  File "/tmp/foo.py", line 27, in foo
    raise ValueError('baz')
ValueError: baz
>>> print foo.__doc__
foo docs

Last called with args: (1,), {}
Failed and raised: ValueError('baz',) 
```

# php - 如何使用 CodeIgniter 获取性别单选按钮（男性、女性）的值？

> ID：13618792
> 
> 赞同：1
> 
> 时间：2012-11-29T04:22:10.597
> 
> 标签：php, html, codeigniter, web

我认为这是我的看法。

```
<input type="radio" name="male" value="0">Male</input>
<input type="radio" name="female" value="1">Female</input> 
```

我必须做什么才能获得这些值？我需要它稍后将它们发送到数据库，所以我必须得到 0 或 1 来填充该字段。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T05:34:32.443

由于您输入的名称是独立的，因此它不会真正用作单选按钮。尝试将名称更改为“性别”之类的名称并为其添加适当的值。它可以是 0 代表男性，1 代表女性，或者只是术语男性和女性。我在下面的示例中使用了后者。控制器部分使用 form_validation 库，在处理表单时应该非常有用。

看法：

```
<input type="radio" name="gender" value="male">Male</input>
<input type="radio" name="gender" value="female">Female</input> 
```

控制器：

```
 $this->load->library('form_validation');

    $this->form_validation->set_rules('gender', 'Gender', 'required'); // This will check if gender is selected.

    if ($this->form_validation->run()) {
      $gender = $this->input->post('gender'); // This will contain "male" or "female"
    }
    else {
      $error = validation_errors();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T04:33:05.043

使两个单选按钮的名称相同。例子`gender`。在您的控制器`$this->input->post('gender');`中获取价值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-25T21:00:57.183

```
<div class="mtm _5wa2 _5dbb" id="u_0_f">
    <span class="_5k_3" data-type="radio" data-name="gender_wrapper" id="u_0_g">
    <span class="_5k_2 _5dba">
        <input type="radio" name="sex" value="1" id="u_0_d">
        <label class="_58mt" for="u_0_d">Female</label>
    </span>
    <span class="_5k_2 _5dba">
        <input type="radio" name="sex" value="2" id="u_0_e">
        <label class="_58mt" for="u_0_e">Male</label>
    </span>
    </span>
    <i class="_5dbc _5k_6 img sp_FbRIIaK1AuN sx_ebf223"></i>
    <i class="_5dbd _5k_7 img sp_FbRIIaK1AuN sx_1e1628"></i>
</div> 
```

您需要编辑`custom.css` `layout.css`，其他一些人只需转到您的网站注册页面并按 ctrl shift I 并查看代码的位置

# apache - java.lang.NullPointerException 在 Eclipse 中运行 apache mahout FP 增长

> ID：13618793
> 
> 赞同：0
> 
> 时间：2012-11-29T04:22:12.283
> 
> 标签：apache, mahout

我是 apache mahout 的新手。我正在尝试使用 Apache Mahout 的 FP 增长算法从 java 运行它。这是我使用的代码，

```
FPGrowth<String> fp = new FPGrowth<String>(); 
FileLineIterable file = new FileLineIterable(new File(FPInputFileName)); 
int minSupport = 2;
int maxHeapSize = 50;
Writer writer = null;
StringOutputConverter output = new StringOutputConverter(new SequenceFileOutputCollector<Text,TopKStringPatterns>(writer));
String pattern = " "; //currently understood as splitter
try{
        fp.generateTopKFrequentPatterns(new StringRecordIterator(file,pattern), fp.generateFList(new StringRecordIterator(file, pattern), minSupport), minSupport, maxHeapSize, null, output, null);
}catch(Exception err){
    err.printStackTrace();
} 
```

我面临以下错误：

```
 java.lang.NullPointerException
at org.apache.mahout.fpm.pfpgrowth.fpgrowth.FPGrowth.growth(FPGrowth.java:331)
at org.apache.mahout.fpm.pfpgrowth.fpgrowth.FPGrowth.fpGrowth(FPGrowth.java:211)
at org.apache.mahout.fpm.pfpgrowth.fpgrowth.FPGrowth.generateTopKFrequentPatterns(FPGrowth.java:302)
at org.apache.mahout.fpm.pfpgrowth.fpgrowth.FPGrowth.generateTopKFrequentPatterns(FPGrowth.java:174)
at myProgram.main(myProgram.java:96) 
```

如何解释这个？这是因为 writer 设置为 null 吗？请帮忙。

问候， psun

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T05:22:03.983

该错误是因为我没有正确调用方法 generateTopKFrequentPatterns()。一旦我修改了调用，就没有错误了。

# css - 菜单和链接在左侧重叠

> ID：13618794
> 
> 赞同：0
> 
> 时间：2012-11-29T04:22:14.243
> 
> 标签：css, navigation, alignment

我正在开发的网站遇到问题。在 Chrome 中（并且仅在 Chrome 中的某些时候）我遇到了这个问题，我的导航菜单与左侧重叠。

链接也被推到错误的位置（有时出现在它们周围的文本下方或上方。页面顶部的电话号码也存在明显问题（这不是链接）。

请参阅随附的屏幕截图。该网站是[mexican-getaway.com](http://mexican-getaway.com/)

知道我的代码在哪里发疯了吗？

![网站截图](../Images/08d5ad0a52b34c90f5fa2738874f62f0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T04:53:28.027

它也对我有用 - 没有话被切断。（在 Mac OS 10.8.2 上使用 Chrome）

# php - OpenCart 多重上传

> ID：13618803
> 
> 赞同：0
> 
> 时间：2012-11-29T04:23:40.637
> 
> 标签：php

我这里有一个问题，我在opencart上构建了一个简单的多重上传功能，文件保存在文件夹但不保存路径n mysql，谁能帮助我，

看法 ：

```
 <input type="file" name="picture[]" accept="img/*" />
       <input type="file" name="picture[]" accept="img/*" /> 
```

控制器 ：

```
foreach ($this->request->files['picture']['error'] as $key => $error) {                   
        $tmp_name = $this->request->files['picture']['tmp_name'][$key];
        $this->request->post['img'] = "test/".$this->request->files['picture']['name'][$key];
          move_uploaded_file($tmp_name,DIR_IMAGE .$this->request->post['img']);
    } 
```

模型 ：

```
$this->db->query("INSERT INTO " . DB_PREFIX . "product_image SET image = '" . $this->db->escape($data['img']) . "',product_id = '" . (int)$product_id . "'"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T22:25:08.437

```
public function create(){
        global $database;
        if(isset($_FILES['fupload'])){
            $data = $_FILES["fupload"]["error"];
            // loops through shops that has been selected and store category associated with store
            foreach ($_FILES["fupload"]["error"] as $key => $error) {
                //checks if there is no error
              if ($error == UPLOAD_ERR_OK) {
                move_uploaded_file($_FILES['fupload']['tmp_name'][$key],"../public/gallery/".basename($_FILES['fupload']['name'][$key]));
                $image = new Imageresize(); // an instance of image resize object
                $image->load("../public/gallery/".basename($_FILES['fupload']['name'][$key]));
                //$image->image =;
                $image->resize(400,400);
                $image->save("../public/gallery/".basename($_FILES['fupload']['name'][$key]));

                //this section is needed to get the extension for image type in renaming the image
                if ($_FILES['fupload']['type'][$key]=="image/gif"){
                    $ext = ".gif";
                }
                if ($_FILES['fupload']['type'][$key]=="image/png"){
                    $ext = ".png";
                }
                if ($_FILES['fupload']['type'][$key]=="image/jpeg"){
                    $ext = ".jpeg";
                }
                if ($_FILES['fupload']['type'][$key]=="image/pjpeg"){
                    $ext = ".jpeg";
                }
                if ($_FILES['fupload']['type'][$key]=="image/gif"){
                    $ext = ".gif";
                }
                if ($_FILES['fupload']['type'][$key]=="image/jpg"){
                    $ext = ".jpg";
                }
                $new_name = uniqid()."_".time().$ext; //new name for the image
                rename("../public/gallery/".basename($_FILES['fupload']['name'][$key]),"../public/gallery/".$new_name);
                $photo = $new_name;
                $sqlImg = "INSERT INTO gallery (img_url) VALUES ('$photo') ";

                        $Result = $database->db_query($sqlImg);

              }
            }
        }
    } 
```

您可以查看此代码，我使用 imageresize 调整上传图像的大小并覆盖您可以跳过该部分并按照循环上传图像

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-05T22:51:40.177

几周前，我修改了当前的 OpenCart 最新版本 (2.0.1.1) 以支持使用 DropZone.js 上传多个图像。我正在公开这个项目，所以你可以从这里下载文件： [https ://github.com/oscaralderete/opencart-multiple-image-uploader](https://github.com/oscaralderete/opencart-multiple-image-uploader)

# html - CSS居中带自动边距但没有宽度

> ID：13618806
> 
> 赞同：0
> 
> 时间：2012-11-29T04:24:11.527
> 
> 标签：html, css

我有一个用于 IAB 广告牌广告的子标题容器，并且需要在广告应该居中的容器中考虑两种不同宽度的广告。

我的问题是 - 是否有任何解决方法可以在使用自动宽度的居中元素上没有宽度？

我的基本代码结构如下：

```
<div class="sub_header_wrap" style="width:970px">
    <div class="ad" id="pencil00" style="margin:0 auto;min-height:30px">
        <!-- some ad code -- may be 970px or 950px wide -->
    </div>
</div> 
```

我在这里找到了另一种解决方案，但在尝试使用它之前我想知道注意事项。`sub_header_wrap`除了我的完整代码中的广告位置之外，容器中还有其他元素。他们可能会受到此解决方案的不利影响：

```
<div class="sub_header_wrap" style="width:970px;text-align:center">
    <div class="ad" id="pencil00" style="text-align:left;display:inline-block;min-height:30px">
        <!-- some ad code -- may be 970px or 950px wide -->
    </div>
</div> 
```

该解决方案似乎在`.sub_header_wrap`容器中生成了额外的 4px 计算高度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T04:55:41.530

解决方案是...

```
<div class="sub_header_wrap" >
    <div class="ad" id="pencil00" style="margin:0 auto;min-height:30px;max-width: 970px;text-align: center;">
        <!-- some ad code -- may be 970px or 950px wide -->
    </div>
</div> 
```

或者

```
<div class="sub_header_wrap" style="width:970px;text-align:center">
    <div class="ad" id="pencil00" style="text-align:left;display:inline-block;min-height:30px; margin-bottom: -4px;">
        <!-- some ad code -- may be 970px or 950px wide -->
    </div>
</div> 
```

# ios - AVAudioPlayer 播放在硬件上返回 false

> ID：13618810
> 
> 赞同：4
> 
> 时间：2012-11-29T04:24:56.990
> 
> 标签：ios, avaudioplayer

我正在尝试编写一些非常简单的代码来播放音频文件。该代码在 iPad2 模拟器上运行良好。然而，在我的 iPad2 设备上，[audioPlayer play] 返回 false，并且听不到任何音频。

我已经尝试过 .caf 和 .wav 文件。我已经重新启动了我的 iPad2 并确保静音开关已关闭。*非常*感谢任何有关如何调试的提示。

示例代码：

```
- (void)playAudio {
    NSString *file = [[NSBundle mainBundle] pathForResource:@"test" ofType:@"wav"];
    url = [NSURL fileURLWithPath:file];
    NSError *error = nil;
    audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:&error];
    if (error != nil) {
        NSLog(@"Error creating audio player: %@", [error localizedDescription]);
        return;
    }
    [audioPlayer setDelegate:self];
    if (![audioPlayer prepareToPlay]) {
        NSLog(@"Error preparing audio");
        return;
    }
    // Everything works fine up to this point
    if (![audioPlayer play]) {
        // I hit this on hardware.  Works perfect on the simulator.
        NSLog(@"Error playing audio");
        return;
    } 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-30T02:29:01.317

经过太多的调试，我终于找到了罪魁祸首。我在[http://developer.apple.com/library/ios/#documentation/AudioVideo/Conceptual/MultimediaPG/UsingAudio/UsingAudio.html#//apple_ref/doc/uid/TP40009767-CH2](http://developer.apple.com/library/ios/#documentation/AudioVideo/Conceptual/MultimediaPG/UsingAudio/UsingAudio.html#//apple_ref/doc/uid/TP40009767-CH2)和早些时候在播放音频之前，我的应用程序会录制一些音频。根据我打电话的那个指南

```
[[AVAudioSession sharedInstance] setActive: NO error: nil]; 
```

录制完成后。这显然会导致 AVAudioPlayer 无法播放音频。将呼叫更改为

```
[[AVAudioSession sharedInstance] setCategory: AVAudioSessionCategoryPlayback error: nil]; 
```

而是解决问题。奇怪的是，这在模拟器中不是问题，但会导致硬件问题。

# iphone - 通过另一个实体属性设置核心数据实体属性

> ID：13618811
> 
> 赞同：0
> 
> 时间：2012-11-29T04:25:03.370
> 
> 标签：iphone, objective-c, ios, core-data

是否可以从另一个实体属性设置实体的属性？

说我有

```
entity1.attribute1 = entity2.attribute2; 
```

这能行吗？还是有更好的做法？我一直对人际关系感兴趣，但我不确定这是否是我目前需要学习的类型？感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T04:36:24.593

没有问题，它应该可以正常工作。

# notepad++ - notepad++ 正则表达式去除 XML 属性

> ID：13618813
> 
> 赞同：1
> 
> 时间：2012-11-29T04:25:08.817
> 
> 标签：notepad++

```
<option value="price">Price1</option>
<option value="3price">Price2</option>
<option value="36price">Price3</option>
<option value="39price">Price4</option> 
```

如何使用 notepad++ R/E 替换 value="*" 预期的输出，例如，

```
<option>Price1</option>
<option>Price2</option>
<option>Price3</option>
<option>Price4</option> 
```

我用过`^value(.*)`但不工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T04:27:08.687

对于提供的示例数据，此表达式应如您所愿：

```
 value="[^"]*" 
```

请注意，表达式的开头有一个空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T07:14:32.340

这适用于提供的文本

```
\svalue="\w*" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T04:27:56.943

试试这个正则表达式

```
value=[0-9A-Za-z] 
```

# ip-address - 查找网络地址

> ID：13618820
> 
> 赞同：10
> 
> 时间：2012-11-29T04:25:53.837
> 
> 标签：ip-address, subnet

考虑一个互连三个子网的路由器：Subnet1、Subnet2 和 Subnet3。假设这三个子网中的所有接口都需要具有前缀 223.1.17/24。还假设子网#1 至少支持60 个接口 子网#2 至少支持90 个接口 子网#3 至少支持12 个接口。提供三个满足这些约束的网络地址（格式为 abcd/x）。

我的想法是子网 1：223.1.17.0/26 子网 2：223.1.17.64/25 子网 3：223.1.17.192/28

它是否正确？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-29T05:47:39.150

否。您已正确完成大小计算，但子网 1 和 2 将重叠。/25 网络必须从 0 或 128 开始。

每个网络的要求是：60 四舍五入到最接近的 2 次幂是 64 => 我们需要 6 位子网 #2 需要 90 个地址，所以再次四舍五入到 128 => 我们需要 7 位子网 #3 只有 12 个地址，四舍五入给我们 16 => 4 位。

您可以通过以下两种方式之一来适应它（您可以排列子网 1 和三个以上）。

```
subnet 1 223.1.17.128/26 
subnet 2 223.1.17.0/25
subnet 3 223.1.17.192/28 
```

或者

```
subnet 1 223.1.17.0/26 
subnet 2 223.1.17.128/25
subnet 3 223.1.17.64/28 
```

# arrays - 从Array中随机选择Index，然后显示匹配的MC

> ID：13618821
> 
> 赞同：0
> 
> 时间：2012-11-29T04:26:01.853
> 
> 标签：arrays, actionscript-3, flash, removechild

所以我有这个代码

```
function flip(e:MouseEvent)
{   
 //assign choice a random deck index.
    choice=int(deck[Math.round((Math.random()*deck.length))]);
    if(choice!=int(deck[9]))
    {
        //removeChild(MovieClip(e.target));

        //position firecard.        
        addChild(fire);
        fire.x=e.target.parent.x;
        fire.y=e.target.parent.y;

        //remove cardback
        e.target.parent.removeChild(MovieClip(e.target));       
        fire.parent.setChildIndex(fire,numChildren-2);
        trace(choice);
    }
    else if(choice==int(deck[9]))
    {
        trace(choice);
        water.x=e.target.parent.x;
        water.y=e.target.parent.y;
        e.target.parent.removeChild(MovieClip(e.target));
        water.parent.setChildIndex(water,numChildren-2);
    }

} 
```

评论几乎解释了一切应该做什么。Flip 是通过影片剪辑中的侦听器调用的。Choice 是一个在每次调用 Flip 时随机选取的数字，并从 Deck Array 的随机索引中获取其值。然后不管选择如何，被点击的卡片被移除，并根据选择变量在其位置放置一张卡片。但是，会发生两个错误（在编译器或输出中都没有执行任何操作）。

1.  当我点击另一张卡片时，创建（触发）的新卡片也会被删除。我希望他们留在原地。

2.  跟踪总是打印一个 0。它不应该打印从 0 到 9 的任何东西吗？

PS：Deck 有 10 个值。其中9个是“火”，最后一个是“水”。选择从 0 初始值开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T08:39:41.613

问题是您在数组中有字符串（“fire”和“water”）。但是您正在将此字符串类型转换为 int，因此变为 0。只需尝试不对数组的值进行类型转换。

```
function flip(e:MouseEvent)
{   
    //assign choice a random deck index.
    choice=deck[Math.floor(Math.random()*deck.length)];
    if(choice != deck[9])
    {
        //removeChild(MovieClip(e.target));

        //position firecard.        
        addChild(fire);
        fire.x=e.target.parent.x;
        fire.y=e.target.parent.y;

        //remove cardback
        e.target.parent.removeChild(MovieClip(e.target));       
        fire.parent.setChildIndex(fire,numChildren-2);
        trace(choice);
    }
    else if(choice == deck[9])
    {
        trace(choice);
        water.x=e.target.parent.x;
        water.y=e.target.parent.y;
        e.target.parent.removeChild(MovieClip(e.target));
        water.parent.setChildIndex(water,numChildren-2);
    }

} 
```

除了删除类型转换之外，我没有更改任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T06:20:58.050

```
function flip(e:MouseEvent)
{   
 //assign choice a random deck index.
    choice=Math.floor(Math.random()*deck.length);
    if(choice!=9)
    {
        ...
    }
    else if(choice==9)
    {
        ...
    }
} 
```

# r - 用动物园描述频率和周期

> ID：13618823
> 
> 赞同：2
> 
> 时间：2012-11-29T04:26:19.803
> 
> 标签：r, frequency, zoo

我每周都会对几种产品进行销售观察。然后我创建了一个动物园对象来保存这些数据，但不能使频率/周期按我的意愿工作。数据可在[Dropbox (asr.csv)](https://www.dropbox.com/s/78vxae5ic8tnutf/asr.csv)获得。

我已经能够创建一个尊重频率和周期的 ts，但我一直在努力让它与我的（填补空白的）每周观察一起工作。

可能还值得注意的是，我实际上是从 ODBC 连接中提取数据（在此处使用 CSV 提供帮助）。

创建动物园时如何正确描述这些数据？

```
> sales <- read.csv("asr.csv")
> library(zoo)

Attaching package: ‘zoo’

The following object(s) are masked from ‘package:base’:

as.Date, as.Date.numeric

> sales.zoo <- zoo(subset(sales, select=c(2:length(sales))), order.by=sales$date_end, frequency = 52)
> sales.zoo.i <- na.approx(sales.zoo) # interpolate internal NA values
> frequency(sales.zoo.i) # 52, which seems right
[1] 52
> cycle(sales.zoo.i[1:20,10]) # everything is in the one cycle...
2004-08-14 2004-08-21 2004-08-28 2004-09-04 2004-09-11 2004-09-18 2004-09-25 
         1          1          1          1          1          1          1 
2004-10-02 2004-10-09 2004-10-16 2004-10-23 2004-10-30 2004-11-06 2004-11-13 
         1          1          1          1          1          1          1 
2004-11-20 2004-11-27 2004-12-04 2004-12-11 2004-12-18 2004-12-25 
         1          1          1          1          1          1 
> 
```

# actionscript-3 - 将函数和参数作为参数值传递给 GTweener.to 函数

> ID：13618825
> 
> 赞同：0
> 
> 时间：2012-11-29T04:26:25.227
> 
> 标签：actionscript-3, tween, flare3d

我正在尝试在我的 stage3d（使用flare3d 2.0 引擎）游戏中实现平滑的缩放过渡。

我正在使用 GTweener 对相机进行补间，如下所示

```
GTweener.to(_camera,0.5,{x:pos.x,y:pos.y,z:pos.z}); 
```

这工作正常，*但我想对**只能使用函数设置***的其他属性进行补间，例如

```
setRotation(x,y,z); 
```

或者

```
rotateX(value); 
```

我不知道如何调用函数并将函数参数作为参数传递给 GTweerner.to 函数

我知道的另一种解决方法是将回调函数作为 onUpdate 属性传递，但我更愿意避免它以保持简单。

或者

如果有人确认我在 GTweener 中是不可能的，那么我需要寻找允许我这样做的替代库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T17:50:45.460

有时，在使用线速度进行补间时，运动中的对象似乎“闪烁”。通过应用不同的缓动类型，您可能会发现它看起来更平滑一些。

例如，使用`com.gskinner.motion.easing.Cubic.easeInOut`：

```
GTweener.to(_camera,0.5,{x:pos.x,y:pos.y,z:pos.z}, {ease: Cubic.easeInOut}); 
```

我不认为闪烁是因为`x`,`y`和`z`属性是按顺序设置的，因为这一切都会在渲染新帧之前发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T05:12:31.290

我知道您正在使用 GTWeener，但您可能想要降低一层并使用 GTWeen 类（GWTeener 使用该类来简化补间过程）。

它有一个[onChange](http://www.gskinner.com/libraries/gtween/docs_v2_01/com/gskinner/motion/GTween.html#onChange)属性，它是一个回调函数，在补间过程中被调用。从理论上讲，您可以`setPosition()`从回调函数中调用该方法，以使缩放操作更顺畅。

为了做到这一点，我假设您实际上必须对其他一些属性进行补间，因此这可能行不通或不是一个好主意。纯粹是我的猜测，因为我从未使用过 GTween 或 GTweener ...我只查看了文档。

注意：您可能还需要将[dispatchEvents](http://www.gskinner.com/libraries/gtween/docs_v2_01/com/gskinner/motion/GTween.html#dispatchEvents)属性设置为 true 以获取 true 以执行回调。

# jquery - 旋转 div 内的 div

> ID：13618826
> 
> 赞同：0
> 
> 时间：2012-11-29T04:26:36.443
> 
> 标签：jquery, html, background-image, mask

是否可以使用旋转 45 度的 div 作为包含 img 的图像或 div 的掩码（alpha）？

[http://i.stack.imgur.com/X2G9f.jpg](http://i.stack.imgur.com/X2G9f.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T04:33:04.693

为什么不将内部元素旋转 -45 度？

```
div.mask {
    transform: rotate(45deg);
    -ms-transform: rotate(45deg);
    -moz-transform: rotate(45deg);
    -webkit-transform: rotate(45deg);
    -o-transform: rotate(45deg); 
}

div.mask img {
    transform: rotate(-45deg);
    -ms-transform: rotate(-45deg);
    -moz-transform: rotate(-45deg);
    -webkit-transform: rotate(-45deg);
    -o-transform: rotate(-45deg); 
} 
```

subhaze 提供的示例**JSFiddle** -**[这里](http://jsfiddle.net/xLgyN/1)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T04:36:36.740

如果您可以使用 Jquery 插件，这将满足您的需求[jqueryrotate](http://code.google.com/p/jqueryrotate/)
这非常易于使用，您不需要暗示任何 CSS，它也是跨浏览器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T04:30:33.037

您可以使用 CSS`transform`属性。

参考这个：[http ://davidwalsh.name/css-transform-rotate](http://davidwalsh.name/css-transform-rotate)

# powershell - 从 powershell 窗口运行但不是从文件运行的脚本

> ID：13618828
> 
> 赞同：0
> 
> 时间：2012-11-29T04:26:39.380
> 
> 标签：powershell

我正在运行这个脚本，它在 powershell 窗口中运行良好，但是当我将它放入文件时它不起作用。我已启用 powershell 在我的系统上运行脚本，但我没有收到任何错误。我想这是因为 break 命令而发生的。如何从文件中运行它？

```
Get-ChildItem  C:\* -Include  'config.xml' -Recurse | Foreach-Object {$file = $_; break}

Get-WinEvent -FilterXml ([xml](Get-Content "$file")) | format-table TimeCreated, Message -autosize -HideTableHeaders >C:\Users\$env:username\Desktop\report.csv 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T02:38:28.047

将文件另存为 script_name.ps1

打开 Powershell，然后导航到该文件所在的目录并键入“.\script_name.ps1”

请参阅：[http ://technet.microsoft.com/en-us/library/ee176949.aspx](http://technet.microsoft.com/en-us/library/ee176949.aspx)

# ios - MPMoviePlayerViewController 在按下主页按钮时自动关闭

> ID：13618829
> 
> 赞同：0
> 
> 时间：2012-11-29T04:26:53.533
> 
> 标签：ios, ipad, mpmovieplayercontroller

我调用 doPlayMovie 方法在 iPad 上播放一些文件，但是当我按下 Home 按钮尝试将我的应用程序切换到后台时，播放器自动关闭。

有什么办法可以让玩家一直在那里不解雇？

```
-(MPMoviePlayerViewController*)moviePlayerController{
    if(!_moviePlayerController){
        _moviePlayerController = [[MPMoviePlayerViewController alloc]init];
    }
    return _moviePlayerController;
}

-(MPMoviePlayerController*)moviePlayer{
    return self.moviePlayerController.moviePlayer;
}

-(void)doPlayMovie:(NSString *)filepath{
    self.moviePlayerController = nil;

    NSURL *playUrl = [NSURL fileURLWithPath:filepath];
    self.moviePlayer.contentURL = playUrl;
    [self.moviePlayer play];

    [self presentMoviePlayerViewControllerAnimated:self.moviePlayerController];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T04:52:41.897

您需要在 plist 文件中为音频指定 UIBackgroundModes（仅适用于 iOS > 4）。请参阅[本教程](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk_background-audio/)以查看设置应用程序以在后台播放音频的步骤。

# javascript - 防止 makefile 重新编译源文件

> ID：13618835
> 
> 赞同：2
> 
> 时间：2012-11-29T04:28:11.400
> 
> 标签：javascript, makefile, stylus

这是我的生成文件：

```
STYLES = $(wildcard views/*/*.styl)
CSS = $(STYLES:.styl=.css)

all: $(CSS)
    component build

%.css: %.styl
    @echo $< 
```

这个示例每次都会编译，因为 CSS 文件不/永远不会存在，因为我正在构建`/build`. 如何构建到另一个目录而不重新编译源代码？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T07:21:29.823

明白了，希望有一些关于清理的建议......

```
STYLUS = node_modules/stylus/bin/stylus
STYLES = $(subst views, , $(wildcard views/*/*.styl))
CSS = $(STYLES:.styl=.css)

all: $(addprefix build, $(CSS))
    component build

build/%.css: views/%.styl
    mkdir -p $(dir $@)
    $(STYLUS) -u nib -o $(dir $@) $<

clean:
    rm -rf build

.PHONY: clean 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-06T02:16:33.187

我知道您的问题专门与 makefile 相关，但是您可以考虑使用 grunt.js (https://github.com/gruntjs/grunt-contrib-stylus/) 来构建您的手写笔项目。它基于 javascript 并在 node.js 上运行，并且比使用 make 更容易设置、配置和维护。

另外，您可以使用 grunt 轻松管理整个项目的构建过程，因此如果您需要连接和缩小 javascript，然后在构建后清理临时文件夹，只需添加这些任务......这是一个非常棒的构建系统.

# c# - 用于保存数据以供以后恢复的编程选项

> ID：13618837
> 
> 赞同：0
> 
> 时间：2012-11-29T04:28:15.920
> 
> 标签：c#, sql-server, nhibernate

我使用 SQL Server 2008R2 和大约 100k 产品管理一个基于 ASP.NET 和 NHibernate 和 Castle ActiveRecord 的电子商务网站。产品有正常价格和销售价格。客户希望能够在几天内以一定的销售价格（正常价格的百分比）进行销售（如黑色星期五），然后将产品的销售价格恢复到超级销售之前的价格。超级销售仅涉及约2500种产品。

是否有程序化选项可以保存预售价格以便能够在超级销售后恢复它们？是否有一个项目可以将数据或状态保存一段时间然后恢复？我只想恢复销售价格。

我可以手动将表视图从 SSMS 导出到 INSERT 脚本，但客户端无法执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T13:01:09.903

包括一个（特殊）折扣列并将其计算到价格中，然后当有特殊日子时只需更新折扣，完成后将其重置为 0。

# ios - iOS中的文本文件到字符串

> ID：13618838
> 
> 赞同：0
> 
> 时间：2012-11-29T04:28:20.850
> 
> 标签：ios, string, label

我正在启动一个非常简单的学习应用程序，我正在使用 NSURLConnection 并开始研究读取文件的内容，例如 www.funnynewsletter.tk/files/files.txt 并将它们作为字符串读取到 Objective C 中。

我想知道如何执行此操作并将保存的字符串打印到标签“标签”上。

谁能帮我吗？

这是我当前的代码。

```
- (void) viewDidUnLoad
{
NSError* e;
NSString *str = [NSString stringWithContentsOfURL:@"http://funnynewsletter.tk/files/files.txt"];
if(e != nil) {
    NSLog(@"Error");
}
label.text = self.str;
} 
```

这在第 4 行和第 8 行有错误。我不知道发生了什么。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T04:38:52.837

您正在发送`NSString`而不是`NSURL`.

```
- (void) viewDidLoad
    {
    //NSError* e;
    NSString *str = [NSString stringWithContentsOfURL:[NSURL URLWithString:@"http://funnynewsletter.tk/files/files.txt"]];
    //if(e != nil) {
    //    NSLog(@"Error");
    //}
    label.text = str;
    } 
```

试试这个...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T04:42:55.403

使用此方法

```
+ (id)stringWithContentsOfFile:(NSString *)path
                  usedEncoding:(NSStringEncoding *)enc
                         error:(NSError **)error 
```

您正在使用的那个已被弃用，并且没有编码、错误支持。

```
- (void) viewDidUnLoad
{
   NSError* e;
   NSString *str = [NSString stringWithContentsOfFile:@"http://funnynewsletter.tk/files/files.txt"
                    usedEncoding:(NSASCIIStringEncoding   //OR NSUTF8StringEncoding if utf8 not ASCII
                    error:&e];
if(e != nil) {
    NSLog(@"Error");
}
else
   label.text =str;
} 
```

# c - 分段错误：在模拟锦标赛分支预测器时

> ID：13618839
> 
> 赞同：0
> 
> 时间：2012-11-29T04:28:24.963
> 
> 标签：c, segmentation-fault

我有一个锦标赛分支预测器模拟作为作业。该程序在微处理器中模拟锦标赛分支预测器。我想我做的一切都是正确的。我无法追踪问题。我陷入了分段错误。

```
/* Shreyas Kale Computer Architecture Homework 3 Problem 1 */
/*
 * for global index, at first considered not taken, gi[0] --> MSB
 * 0 --> not taken
 * 1 --> taken
 * 
 */
#include<stdio.h>
#include<unistd.h>
#include<strings.h>

struct tables{
char msb;
char lsb;
}local[10],global[64],selector[10];

//6 bits = 64

struct global_index{
    unsigned int i : 6; //bitfield, to index global predictor
}gi = {0};
int pc = 0, correct = 0;        
    //here I mean instruction address
char localdec, globaldec, selected;

void initialise()
{
    int i,res;

    for(i=0;i<10;i++)
    {
        local[i].lsb = 'n';
        selector[i].lsb = 'n';
        local[i].msb = 'n';
        selector[i].msb = 'n';
    }
    for(i=0;i<64;i++)
    {
        global[i].lsb = 'n';
        global[i].msb = 'n';
    }
}

void main()
{
    char *sbs, *sbo, *myfile;
    FILE *fd_sbs, *fd_sbo, *fd_myfile;
    char *seq_in, *fout; // for input and output to file
    int g = 0;
    int k = 0, res;

        sbs = "sample_branch_sequence.txt"; //sample branch sequence filename
        sbo = "sample_branch_output.txt"; //sample branch output filename
        myfile = "myout.txt"; // my output filename

    initialise();
    fd_sbs = fopen(sbs,"r");
    fd_sbo = fopen(sbo,"r");
    fd_myfile = fopen(myfile,"a+");

    /* Check whether files are opened */
    if((fd_sbs == NULL) || (fd_sbo == NULL) || (fd_myfile == NULL))
    {
        printf("\n files are not opened properly, bye bye!");
        return; 
    }
    /*Actual algorithm*/
    for(k=0;k<10000;k++)
    {
        fgets(seq_in,4,fd_sbs);
        //printf("%s\n",seq_in);
        pc = atoi(seq_in[0]);
        //now branch

        //look up local
        if(local[pc].msb == 'n')
            localdec = 'n';
        else if(local[pc].msb == 't')
            localdec = 't';

        //lookup global
        g = (int)gi.i;
        if(global[g].msb == 'n')
            globaldec = 'n';
        else if(global[g].msb == 't')
            globaldec = 't';

        //look up selector
        if(selector[pc].msb == 'n')
            selected = 'g';
        else if(selector[pc].msb == 't')
            selected = 'l';
        // final decision and program direction updation of output string
        fout[0] = seq_in[0];
        fout[1] = localdec;
        fout[2] = globaldec;
        fout[3] = selected;
        fout[4] = ((selected == 'g') ? globaldec : localdec);
        fout[5] = seq_in[1];
        fout[6] = '\n';
        fout[7] = '\0';
        //put it in file

        //calculate correct predictions
        if(fout[4] == seq_in[1])
            correct += 1;

        res = fputs(fout,fd_myfile);

        if(res == EOF){
            printf("Something erroneous!!");
        }
        //update global counter
        if(seq_in[1] == 't')
        {
            gi.i = gi.i << 1;   //pust a 0 from left
            gi.i += 1;      //add 1 now so, lsb becomes 1
        }
        else if(seq_in[1] == 'n')
        {
            gi.i = gi.i <<1;    //push a 0 from left
        }
        //NOW UPDATION OF THE PREDICTORS
        if(fout[4] == seq_in[1])
        {   
            //decision correct update selector accordingly
            if(selected == 'g')
            {
                // decrement slector
                if((selector[pc].lsb == 't')&&(selector[pc].msb == 't'))
                    selector[pc].lsb = 'n';
                else if((selector[pc].lsb == 'n')&&(selector[pc].msb == 't'))
                {
                    selector[pc].msb = 'n';
                    selector[pc].lsb = 't';
                }
                else if((selector[pc].lsb == 't')&&(selector[pc].msb == 'n'))
                    selector[pc].lsb = 'n';
                else if((selector[pc].msb == 'n')&&(selector[pc].lsb == 'n'))   //cant be deremented
                    return;
            }
            else if(selected == 'l')
            {
                //increment selector

                if((selector[pc].lsb == 'n')&&(selector[pc].msb == 'n'))
                    selector[pc].lsb = 't';
                else if((selector[pc].lsb == 't')&&(selector[pc].msb == 'n'))
                {
                    selector[pc].msb = 't';
                    selector[pc].lsb = 'n';
                }
                else if((selector[pc].lsb == 'n')&&(selector[pc].msb == 't'))
                    selector[pc].lsb = 't';
                else if((selector[pc].msb == 't')&&(selector[pc].lsb == 't'))   //cant increment
                    return;
            }
            //now update other tables : local first increment
            if((local[pc].lsb == 'n')&&(local[pc].msb == 'n'))
                local[pc].lsb = 't';
            else if((local[pc].lsb == 't')&&(local[pc].msb == 'n'))
            {
                local[pc].msb = 't';
                local[pc].lsb = 'n';
            }
            else if((local[pc].lsb == 'n')&&(local[pc].msb == 't'))
                local[pc].lsb = 't';
            else if((local[pc].msb == 't')&&(local[pc].lsb == 't')) //cant increment
                return;
            //now update global : increment
            if((global[gi.i].lsb == 'n')&&(global[gi.i].msb == 'n'))
                global[gi.i].lsb = 't';
            else if((global[gi.i].lsb == 't')&&(global[gi.i].msb == 'n'))
            {
                global[gi.i].msb = 't';
                global[gi.i].lsb = 'n';
            }
            else if((global[gi.i].lsb == 'n')&&(global[gi.i].msb == 't'))
                global[gi.i].lsb = 't';
            else if((global[gi.i].msb == 't')&&(global[gi.i].lsb == 't'))   //cant increment
                return;             
        }
        else if(fout[4] != seq_in[1])   //wrong decision
        {
            //decrement local and global
            if((local[pc].lsb == 't')&&(local[pc].msb == 'n'))
                local[pc].lsb = 'n';
            else if((local[pc].lsb == 'n')&&(local[pc].msb == 't'))
            {
                local[pc].msb = 'n';
                local[pc].lsb = 't';
            }
            else if((local[pc].lsb == 't')&&(local[pc].msb == 'n'))
                local[pc].lsb = 'n';
            else if((local[pc].msb == 'n')&&(local[pc].lsb == 'n')) //cant decremet
                return;
            //now update global : decrement
            if((global[gi.i].lsb == 't')&&(global[gi.i].msb == 'n'))
                global[gi.i].lsb = 'n';
            else if((global[gi.i].lsb == 'n')&&(global[gi.i].msb == 't'))
            {
                global[gi.i].msb = 'n';
                global[gi.i].lsb = 't';
            }
            else if((global[gi.i].lsb == 't')&&(global[gi.i].msb == 'n'))
                global[gi.i].lsb = 'n';
            else if((global[gi.i].msb == 'n')&&(global[gi.i].lsb == 'n'))   //cant decrement
                return;             

        }   
    }

}

</code></pre> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T04:34:59.760

你有 seq_in 作为

```
char * seq_in; 
```

稍后在 fgets 调用中使用。您的变量必须正确分配其内存，否则您的程序将引发分段错误。你可以解决这个问题：

```
char seq_in[200];  /* or the size you want */ 
```

或者

```
char * seq_in = malloc (200, sizeof(char));  /* or the size you want */ 
```

您的 fout 变量也会出现同样的问题。

# ruby-on-rails - 在两个模型上匹配 has_many 关联

> ID：13618843
> 
> 赞同：0
> 
> 时间：2012-11-29T04:29:26.477
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我有工作哪些`has_many`类别我有业务哪些`has_many`类别。

目前我只为工作和企业分配 1 个类别，但这会在以后改变，这就是我创建 has_many 关联的原因。

分配给企业和工作的类别来自使用选择菜单选择的相同类别表，目的是匹配它们。

如果有工作，我如何找到与工作类别相匹配的企业。

例如 `job = Job.find(1)`

```
> job.categories.first.name
 => "programmer" 
```

如果我想查找列出的所有具有该`programmer`类别的企业，我该怎么做？

我想我可能需要加入或包含与此类似的内容，但我不确定应该如何准确编写。

`Business.includes(:categories).where(:categories == ...)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T04:46:54.987

您的代码几乎是正确的。这应该有效：

```
Business.joins(:categories).where(categories: {name: 'programmer'}) 
```

或者，如果您有多个类别：

```
Business.joins(:categories).where(categories: {name: ['programmer', 'other']}) 
```

# html - 中间有洞的多边形，带有 HTML5 的画布

> ID：13618844
> 
> 赞同：14
> 
> 时间：2012-11-29T04:29:30.107
> 
> 标签：html, geometry, html5-canvas

使用`<canvas>`标签我需要能够在多边形上画一个洞。

现在我有一些非常简单的东西，它使用 beginPath() 然后为每个点执行 lineTo() 。然后用 fill() 填充。

不过，我看不到任何方法可以让填充的多边形中间没有填充，就像甜甜圈一样。我不是在做甜甜圈，但它适合这个例子。

有什么我想念的吗？我宁愿不把它画满，然后必须重新画中间。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-04-12T05:42:55.473

这就是我让它工作的原因：

```
var ctx = canvas.getContext("2d");     
ctx.beginPath();

//polygon1--- usually the outside polygon, must be clockwise
ctx.moveTo(0, 0);
ctx.lineTo(200, 0);
ctx.lineTo(200, 200);
ctx.lineTo(0, 200);
ctx.lineTo(0, 0);
ctx.closePath();

//polygon2 --- usually hole,must be counter-clockwise 
ctx.moveTo(10, 10);
ctx.lineTo(10,100);
ctx.lineTo(100, 100);
ctx.lineTo(100, 10);
ctx.lineTo(10, 10);
ctx.closePath();

//  add as many holes as you want
ctx.fillStyle = "#FF0000";
ctx.strokeStyle = "rgba(0.5,0.5,0.5,0.5)";
ctx.lineWidth = 1;
ctx.fill();
ctx.stroke(); 
```

这里的主要思想是你只能使用一次 beginPath；外部多边形必须是顺时针方向，孔必须是逆时针方向。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2016-01-29T21:01:00.370

您有 2 种选择来使用 HTML5 画布绘制洞。

**选择1：
以不同的时钟方向绘制外形和内部形状。**

外部形状顺时针，内部形状逆时针。
或者外部形状顺时针，内部形状逆时针。

```
ctx.beginPath();
//outer shape, clockwise
ctx.moveTo(100,20);
ctx.lineTo(200,200);
ctx.lineTo(20,200);
ctx.closePath();
//inner shape (hole), counter-clockwise
ctx.moveTo(100,100);
ctx.lineTo(70,170);
ctx.lineTo(140,170);
ctx.closePath();
//fill
ctx.fillStyle = "#FF0000";
ctx.fill(); 
```

我们在编码的时候检测形状绘制方向有点痛苦。

如果您需要检测一系列点是否顺时针，这里有一个很好的功能：

```
function isClockwise(dots){
    var sum = 0;
    for(var i=1, n=dots.length; i<n; i++){
        sum += (dots[i][0] - dots[i-1][0]) * (dots[i][1] + dots[i-1][1]);
    }
    sum += (dots[0][0] - dots[n-1][0]) * (dots[0][1] + dots[n-1][1]);
    return sum < 0;
}
console.log(isClockwise([[100,20], [200,200], [20,200]]));  //true
console.log(isClockwise([[100,20], [20,200], [200,200]]));  //false 
```

如果您的点是顺时针方向但您需要逆时针方向，则 .reverse() 您的点数组。

```
var dots = [[100,20], [200,200], [20,200]];
dots.reverse(); 
```

* * *

**选择 2：
使用“偶数”填充规则，向任何方向绘制形状。**
这种方式比选择 1 简单得多。
参见[fill() 方法 API](https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/fill)：

```
 void ctx.fill();
   void ctx.fill(fillRule);
   void ctx.fill(path, fillRule); 
```

**fillRule**可以是**“nonzero”**或**“evenodd” “nonzero”**
：非零缠绕规则，这是默认规则。
“evenodd”：奇偶缠绕规则。

```
ctx.beginPath();
//outer shape, any direction, this sample is clockwise
ctx.moveTo(100,20);
ctx.lineTo(200,200);
ctx.lineTo(20,200);
ctx.closePath();
//inner shape (hole), any direction, this sample is clockwise
ctx.moveTo(100,100);
ctx.lineTo(140,170);
ctx.lineTo(70,170);
ctx.closePath();
//fill
ctx.fillStyle = "#FF0000";
ctx.mozFillRule = 'evenodd'; //for old firefox 1~30
ctx.fill('evenodd'); //for firefox 31+, IE 11+, chrome 
```

[![在此处输入图像描述](../Images/297d9c97d46b26166d8dd90b070c3707.png)](https://i.stack.imgur.com/OtUUl.png)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-09-28T18:27:54.040

您可以使用[偶数](https://en.wikipedia.org/wiki/Even%E2%80%93odd_rule)填充规则：`fill('evenodd')`

[![奇偶规则](../Images/a48c498108f35abb2f4c6b05f7d795b0.png)](https://i.stack.imgur.com/JzUXf.png)

```
// properties
// - outer square
var outerLength = 200;
// - inner length
var innerLength = outerLength / 2;

// cnavas
var canvas = document.getElementById('canvas');
var width = canvas.width = document.body.clientWidth;
var height = canvas.height = document.body.clientHeight;
var context = canvas.getContext('2d');

// path
// - outer square
context.rect(
  (width - outerLength) / 2,
  (height - outerLength) / 2,
  outerLength,
  outerLength
);
// - inner square
var x0 = (width - innerLength) / 2;
var y0 = (height - innerLength) / 2;
context.moveTo(x0, y0);
context.rect(
  x0,
  y0,
  innerLength,
  innerLength
);

// draw
// - stroke
context.lineWidth = 10;
context.stroke();
// - fill
context.fillStyle = 'red';
context.fill('evenodd');
```

```
html,
body {
  margin: 0;
  height: 100%;
  overflow: hidden;
}
```

```
<canvas id="canvas"><canvas>
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-29T11:09:50.127

以顺时针方向绘制您的形状（例如）。然后你可以增加或减少半径并逆时针方向前进。

# ruby-on-rails - 如何从 Rails 控制台将字符串保存到数据库

> ID：13618845
> 
> 赞同：2
> 
> 时间：2012-11-29T04:29:34.370
> 
> 标签：ruby-on-rails, ruby, rails-console

我正在尝试将字符串保存到数据库并从视图中输出。刚开始学习RoR，所以这里有点困惑......

这是我所做的：

*   生成模型测试ID：字符串值：字符串

其次是

*   耙分贝：迁移

然后我从 ./script/rails 控制台打开了 rails 控制台

我想在这里输入这个：

test.create!(:value => "Hello World")

但它返回“ArgumentError: wrong number of arguments” :(我怎样才能正确地做到这一点？另外，我怎样才能将它存储到一个变量中并在视图中输出？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T04:38:29.510

您的模型应该以大写字母开头；

```
Test.create!(:value => 'a string') 
```

# pdf - iTextSharp：将两个 PDF 文档合二为一

> ID：13618847
> 
> 赞同：1
> 
> 时间：2012-11-29T04:30:01.930
> 
> 标签：pdf, pdf-generation, itextsharp

请原谅我的英语不好..)) 有两个 PDF 文档。两者都包含 197 页。1-2 页的第一篇论文有指向本文档另一页 (3-197) 的链接。我们需要将这两个文档合并为一个 197 页的文档： • 1 - 2 页 - 从第一个文档开始（带有工作链接，参考应发送到新合并文档的相关页面）；• 3-197 页 - 来自第二个文档。

```
Doc:= New iTextSharp.text.Document();

ReaderDoc1:=New iTextSharp.text.pdf.PdfReader(FileName1);

ReaderDoc2:=New iTextSharp.text.pdf.PdfReader(FileName2);

FStream:=New System.IO.FileStream(OutFileName, System.IO.FileMode.CreateNew);

Writer := New iTextSharp.text.pdf.PdfCopy(Doc, FStream);

Doc.Open(); 

Writer.AddPage(Writer.GetImportedPage(ReaderDoc1,1));

Writer.AddPage(Writer.GetImportedPage(ReaderDoc1,2));

PageCount := ReaderDoc2.NumberOfPages;

For f := 3 To PageCount Do

Writer.AddPage(Writer.GetImportedPage(ReaderDoc2, f)); 

End For; 
```

结果，链接被破坏。向您展示如何保持链接正常工作。谢谢您的帮助！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T07:27:47.623

您有一个文档 A.pdf 和一个文档 B.pdf。文档 A.pdf 中的链接参考文档 B.pdf。现在您想将 A.pdf 与 B.pdf 连接起来。如果操作正确，您将得到一个文档 C.pdf，并且链接将被保留。这意味着从文档 A.pdf 导入的链接仍将链接到文档 B.pdf，而不是从 B.pdf 导入到 C.pdf 的页面。这个问题的解决方案可以在“iText in Action - Second Edition”的第 7 章中找到。下面我为您提供相应 Java 和 C# 示例的链接。

Java： http: [//itextpdf.com/examples/iia.php ?id=133](http://itextpdf.com/examples/iia.php?id=133)

C#： http: [//kuujinbo.info/iTextInAction2Ed/index.aspx ?ch=Chapter07&ex=ConcatenateNamedDestinations](http://kuujinbo.info/iTextInAction2Ed/index.aspx?ch=Chapter07&ex=ConcatenateNamedDestinations)

关键方法是 MakeRemoteNamedDestinationsLocal。这会将最初从 A.pdf 指向 B.pdf 的远程链接更改为 C.pdf 内的本地链接。这是比较专业的问题。如果您没有成功使用这些示例，那么将很难在 Stackoverflow 等论坛上解释该做什么。

# python - 如何删除字典的多个元组中的重复项？

> ID：13618849
> 
> 赞同：1
> 
> 时间：2012-11-29T04:30:21.260
> 
> 标签：python, list, dictionary, key

我需要有关如何删除字典元组中重复项的帮助。

```
dict of {tuple of (str, str, str, str): int}) -> tuple of (str, None) 
```

这是字典：

```
 {('ALPHA', 'BETA', 'GAMMA', 'DELTA'): 5
    ('BETA', 'GAMMA', 'ALPHA', 'DELTA'): 3
    ('DELTA', 'BETA', 'GAMMA', 'ALPHA'): 1
    ('GAMMA', 'DELTA', 'ALPHA', 'BETA'): 3
    ('BETA', 'ALPHA', 'DELTA', 'GAMMA'): 4} 
```

并且整数是第一个索引的值`tuple`，我可以通过以下方式对它们进行分组：

```
def rad_type(particle):

   my_dict = {}

   for (k, v) in particle.items():
        if (k[0] in my_dict):
            my_dict[k[0]] += v
        else:
            my_dict[k[0]] = v

   return my_dict 
```

这将返回：

```
{'ALPHA': 5, 'BETA': 7, 'GAMMA': 3, 'DELTA': 1} 
```

由于`'DELTA'`具有最小值，在这种情况下为 1，但我想像这样删除元素：

```
 {('ALPHA', 'BETA', 'GAMMA'): 5
    ('BETA', 'GAMMA', 'ALPHA'): 7
    ('BETA', 'GAMMA', 'ALPHA'): 1
    ('GAMMA', 'ALPHA', 'BETA'): 3} 
```

这给出了`ALPHA = 5, BETA = 8, GAMMA = 3`; 这就是我真正需要的字典。

我试图删除最少的元素但它不起作用？

```
for (p, v) in my_dict.items():
        if (max(my_dict.values()) / sum(my_dict.values()):
            if (v == min(my_dict.values())):
                del my_dict[p]
        return my_dict 
```

但这给了`ALPHA = 5, BETA = 7, GAMMA = 3`

由于这会返回一个字典，我如何使用 a 删除重复项`tuple`并将其作为字典返回而不*导入*任何内容？

问题与[此](https://stackoverflow.com/questions/13569105/how-to-properly-eliminate-elements-in-dictionary-until-one-string-remains/13569432)类似。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T15:49:42.597

这是一个建议..
如果我们使用您的功能：

```
def rad_type(particle):

   my_dict = {}

   for (k, v) in particle.items():
        if (k[0] in my_dict):
            my_dict[k[0]] += v
        else:
            my_dict[k[0]] = v

   return my_dict 
```

如果我们定义另一个使用您的函数的函数：

```
def filter(dict):
        filter1 = rad_type(dict)
        i = 0
        for k ,val in dict.items():
              dict[k] = filter1[k[0]]
              i +=1
        mini_key = [k for k , val in filter1.items() if val == min([value for key ,  value in filter1.items()])][0] 
        filter2 = {tuple(y for y in key if y != mini_key):value for key, value in dict.items()}
        filter3 = rad_type(filter2)
        return filter3 
```

如果我们在字典粒子上应用这个函数：

```
result = filter(particle) 
```

输出是：

```
{'ALPHA': 5, 'BETA': 8, 'GAMMA': 3} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T15:25:13.640

你**会需要**某种`Counter`东西。我已经使用 实现了一个解决方案`Collections.Counter`，但是如果您不能直接导入 Counter ，则必须自己实现。或者，`Collections.Counter`是纯python，您可以将源代码复制`Counter`到您自己的解决方案中，以避免导入它。

```
def display_results(data):
    ''' Displays the sum of the first entries in a tuple in a given dictionary

    >>> display_results(data)
    ... {'ALPHA': 5, 'BETA': 7, 'GAMMA': 3, 'DELTA': 1}'''

    data = Counter(data)
    count = Counter()
    for i in data:
        count[i[0]] += data[i]
    return count

def process_data(data):
    ''' Generates a new Counter object with the contents of data, minus the least common
    object in the first tuple as defined by display_results().

    >>> data = process_data(data)
    >>> display_results(data)
    {'ALPHA' : 5, 'BETA' : 7, 'GAMMA' : 3} '''

    data = Counter(data)
    count = Counter()
    least_common = display_results(data).most_common()[-1][0]
    for i in data:
        j = list(i)
        j.remove(least_common)
        count[tuple(j)] += data[i]
    return count 
```

# android - 在倒数计时器中运行代码

> ID：13618856
> 
> 赞同：1
> 
> 时间：2012-11-29T04:31:16.717
> 
> 标签：android, timer, countdown

我正在创建一个与服务器（本地主机）连接的应用程序。

在我的活动中，我有一个倒计时计时器，它将计时 30 秒，并且`finish()`我有一些代码来检查服务器上的数据库中是否有任何更改，然后再次启动计时器，这样它将成为活动中的一个循环. 但是计时器似乎只运行一次。当我在调试模式下运行时，计时器出现一些错误`finish()`，它说我缺少一些与正在运行的 API 或 SDK 版本相关的文件夹或文件`android:targetSdkVersion="9"`

请帮我解决这个问题。这是活动：

```
public class Account_Activity extends Activity {
   @Override
   protected void onCreate(Bundle savedInstanceState) {
   //Creating the UI and some methods
   counter = new CountDownTimer(30000, 1000) {

       @Override
       public void onTick(long millisUntilFinished) {

       }       

       @Override
       public void onFinish() {
           //Codes for checking the changes in the database on the server
           start(); 
       }
   };
   counter.start();
}
} 
```

我是否必须做一个线程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T04:57:17.190

```
public class Account_Activity extends Activity {
   @Override
   protected void onCreate(Bundle savedInstanceState) {
   //Creating the UI and some methods
   counter = new CountDownTimer(30000, 1000) {

       @Override
       public void onTick(long millisUntilFinished) {

       }       

       @Override
       public void onFinish() {
           //Codes for checking the changes in the database on the server
           new CountDownTimer(30000, 1000).start(); <------Start Again.
       }
   };
   counter.start();
}
} 
```

# javascript - 查找具有显示的对象的尺寸：无

> ID：13618859
> 
> 赞同：0
> 
> 时间：2012-11-29T04:31:39.713
> 
> 标签：javascript, jquery

在我的页面的右侧，我有一个赞助商列表。

我的活动页面区域（左侧）高度因页面而异，具体取决于它每次包含的故事。

我希望列表的高度与实时页面的高度相匹配，所以我想我总是会显示主要赞助商，而对于其余的赞助商，我会隐藏它们，并且每次都尽可能多地显示。

我的标记如下所示：

```
<div id="xorigoi">
<a class="basic"><img src="/views/images/adjustable/sideXorigoi/1.png"></a>
<a class="basic"><img src="/views/images/adjustable/sideXorigoi/2.png"></a>
<a class="basic"><img src="/views/images/adjustable/sideXorigoi/3.png"></a>
<a class="rest"><img src="/views/images/adjustable/sideXorigoi/4.png"></a>
<a class="rest"><img src="/views/images/adjustable/sideXorigoi/5.png"></a>
<a class="rest"><img src="/views/images/adjustable/sideXorigoi/6.png"></a>
<a class="rest"><img src="/views/images/adjustable/sideXorigoi/7.png"></a>
<a class="rest"><img src="/views/images/adjustable/sideXorigoi/8.png"></a>
</div> 
```

每张图片都是每个赞助商网站的链接。每个图像都有它自己的高度。

具有该类`.rest`的元素使用隐藏`display: none`

我正在尝试计算添加新图像是否会使列表比页面长，但由于元素是隐藏的，因此 offsetHeight = 0。

我能做些什么？

到目前为止，我的 javascript/jquery 代码如下所示：

```
$(
function(){
var containerHeight = $('#mainPageContainer')[0].offsetHeight; // total height of page
var xorigoi = $('#mainRightSide .rest'); // select the sponsors
var newHeight = 1062; // this is the right side height I am already using
$.each( xorigoi , function( index ){
if( newHeight + heightOfNewElement > containerHeight ){
return false; // break each
}
xorigoi.eq(index).css('display','block'); // display the sponsor
newHeight = newHeight + heightOfNewElement;
})
}
) 
```

所以底线，我怎样才能在上面的函数中获得 heightOfNewElement ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T04:33:14.447

由于 JavaScript 是单线程的，因此浏览器在执行时不会重绘。因此，您可以安全地将元素设置为`display:block`，测量它们，然后再次隐藏它们，用户将不会更聪明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T04:36:22.123

猜猜这会对你有所帮助。

```
console.log(getDimensions($('#myElement')));

function getDimensions(element){
    var tempElement = $(element).clone();
    $(tempElement).css('display','block').css('visibility','hidden');
    $(document.body).append(tempElement);
    var obj = new Object();
    obj.width = $(tempElement).width();
    obj.height = $(tempElement).height();
    $(tempElement).remove();
    return obj;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T05:47:50.793

您可以考虑将元素移到视口之外，而不是不显示。例如：

```
.rest {position:absolute;top:-9999px;} 
```

# sql - 我可以更具体地使用 SQL 排序吗？

> ID：13618860
> 
> 赞同：1
> 
> 时间：2012-11-29T04:31:42.810
> 
> 标签：sql, sql-server-2008, tsql

我有以下 SQL 查询：

```
SELECT  w.financial_year ,
        ISNULL(e.entity_name, 'Entity code ' + CAST(w.integer_1 AS VARCHAR) + ' is not available on the entity table. Please add.') ,
        COUNT(w.form_guid)
FROM    portal.workflow AS w
        LEFT OUTER JOIN property.entity AS e -- MS: Do not make inner join! Left outer join allows for exceptions to this case to be handled. Important as source data doesn't use property.entity
            ON w.integer_1 = e.entity_id
GROUP BY
        w.financial_year ,
        w.integer_1 ,
        e.entity_name
ORDER BY
        w.financial_year , e.entity_name 
```

通过我的排序，我想先显示 e.entity_name 为空的情况，然后按字母顺序对列的其余部分进行排序。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T04:36:42.503

当然，

```
 SELECT w.financial_year,
    ISNULL(e.entity_name, 'Entity code ' + CAST(w.integer_1 AS VARCHAR) + 
        ' is not available on the entity table. Please add.') ,
    COUNT(w.form_guid)
  FROM portal.workflow AS w
     LEFT JOIN property.entity AS e
         ON w.integer_1 = e.entity_id
  GROUP BY case When e.entity_name Is Null Then 0 Else 1 End,
        w.financial_year, w.integer_1, e.entity_name
  ORDER BY case When e.entity_name Is Null Then 0 Else 1 End, 
      w.financial_year, e.entity_name 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T04:47:23.600

你可以试试这个：

```
ORDER BY
        CASE WHEN e.entity_name IS NULL 
             THEN 0 
             ELSE w.financial_year END 
        ,e.entity_name 
```

### [看到这个 SQLFiddle](http://sqlfiddle.com/#!2/3fe82/15)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T04:58:46.363

在 ORDER BY 子句中使用 NULLS FIRST 或 NULLS LAST，如下所示：

```
SELECT  w.financial_year ,
        ISNULL(e.entity_name, 'Entity code ' + CAST(w.integer_1 AS VARCHAR) + ' is not available on the entity table. Please add.') ,
        COUNT(w.form_guid)
FROM    portal.workflow AS w
        LEFT OUTER JOIN property.entity AS e -- MS: Do not make inner join! Left outer join allows for exceptions to this case to be handled. Important as source data doesn't use property.entity
            ON w.integer_1 = e.entity_id
GROUP BY
        w.financial_year ,
        w.integer_1 ,
        e.entity_name
ORDER BY
        w.financial_year , e.entity_name NULLS FIRST 
```

# entity-framework-4.3 - MemberDomainMap 中的实体框架 CodeFirst KeyNotFoundException

> ID：13618862
> 
> 赞同：3
> 
> 时间：2012-11-29T04:31:48.540
> 
> 标签：entity-framework-4.3

试图在我的 EF 数据上下文实现中运行一个错误，该错误会产生一个相当神秘的错误。

```
Test Name:  Nodes_can_be_saved
Test FullName:  MyProj.Test.Integration.AFDataContextTest.Nodes_can_be_saved
Test Source:    c:\Users\pvencill. \Documents\Visual Studio 2012\Projects\MyProj\MyProj.Test\Integration\AFDataContextTest.cs : line 49
Test Outcome:   Failed
Test Duration:  0:00:01.4192808

Result Message: 
Test method MyProj.Test.Integration.AFDataContextTest.Nodes_can_be_saved threw exception: 
System.Data.Entity.Infrastructure.DbUpdateException: Error retrieving values from ObjectStateEntry. See inner exception for details. ---> System.Data.UpdateException: Error retrieving values from ObjectStateEntry. See inner exception for details. ---> System.Collections.Generic.KeyNotFoundException: The given key was not present in the dictionary.
Result StackTrace:  
at System.Collections.Generic.Dictionary`2.get_Item(TKey key)
   at System.Data.Mapping.ViewGeneration.Structures.MemberDomainMap.GetDomainInternal(MemberPath path)
   at System.Data.Mapping.ViewGeneration.QueryRewriting.FragmentQueryKB.CreateIsOfTypeCondition(MemberPath currentPath, IEnumerable`1 derivedTypes, MemberDomainMap domainMap)
   at System.Data.Mapping.ViewGeneration.QueryRewriting.FragmentQueryKB.CreateVariableConstraintsRecursion(EdmType edmType, MemberPath currentPath, MemberDomainMap domainMap, EdmItemCollection edmItemCollection)
   at System.Data.Mapping.ViewGeneration.QueryRewriting.FragmentQueryKB.CreateVariableConstraintsRecursion(EdmType edmType, MemberPath currentPath, MemberDomainMap domainMap, EdmItemCollection edmItemCollection)
   at System.Data.Mapping.ViewGeneration.ViewgenContext..ctor(ViewTarget viewTarget, EntitySetBase extent, IEnumerable`1 extentCells, CqlIdentifiers identifiers, ConfigViewGenerator config, MemberDomainMap queryDomainMap, MemberDomainMap updateDomainMap, StorageEntityContainerMapping entityContainerMapping)
   at System.Data.Mapping.ViewGeneration.ViewGenerator.CreateViewgenContext(EntitySetBase extent, ViewTarget viewTarget, CqlIdentifiers identifiers)
   at System.Data.Mapping.ViewGeneration.ViewGenerator.GenerateDirectionalViewsForExtent(ViewTarget viewTarget, EntitySetBase extent, CqlIdentifiers identifiers, KeyToListMap`2 views)
   at System.Data.Mapping.ViewGeneration.ViewGenerator.GenerateDirectionalViews(ViewTarget viewTarget, CqlIdentifiers identifiers, KeyToListMap`2 views)
   at System.Data.Mapping.ViewGeneration.ViewGenerator.GenerateAllBidirectionalViews(KeyToListMap`2 views, CqlIdentifiers identifiers)
   at System.Data.Mapping.ViewGeneration.ViewgenGatekeeper.GenerateViewsFromCells(List`1 cells, ConfigViewGenerator config, CqlIdentifiers identifiers, StorageEntityContainerMapping containerMapping)
   at System.Data.Mapping.ViewGeneration.ViewgenGatekeeper.GenerateViewsFromMapping(StorageEntityContainerMapping containerMapping, ConfigViewGenerator config)
   at System.Data.Mapping.StorageMappingItemCollection.ViewDictionary.SerializedGenerateViews(StorageEntityContainerMapping entityContainerMap, Dictionary`2 resultDictionary)
   at System.Data.Mapping.StorageMappingItemCollection.ViewDictionary.SerializedGetGeneratedViews(EntityContainer container)
   at System.Data.Common.Utils.Memoizer`2.<>c__DisplayClass2.<Evaluate>b__0()
   at System.Data.Common.Utils.Memoizer`2.Result.GetValue()
   at System.Data.Common.Utils.Memoizer`2.Evaluate(TArg arg)
   at System.Data.Mapping.StorageMappingItemCollection.ViewDictionary.GetGeneratedView(EntitySetBase extent, MetadataWorkspace workspace, StorageMappingItemCollection storageMappingItemCollection)
   at System.Data.Mapping.Update.Internal.ViewLoader.InitializeEntitySet(EntitySetBase entitySetBase, MetadataWorkspace workspace)
   at System.Data.Mapping.Update.Internal.ViewLoader.SyncInitializeEntitySet[TArg,TResult](EntitySetBase entitySetBase, MetadataWorkspace workspace, Func`2 evaluate, TArg arg)
   at System.Data.Mapping.Update.Internal.ViewLoader.SyncContains[T_Element](EntitySetBase entitySetBase, MetadataWorkspace workspace, Set`1 set, T_Element element)
   at System.Data.Mapping.Update.Internal.ExtractorMetadata..ctor(EntitySetBase entitySetBase, StructuralType type, UpdateTranslator translator)
   at System.Data.Mapping.Update.Internal.UpdateTranslator.GetExtractorMetadata(EntitySetBase entitySetBase, StructuralType type)
   at System.Data.Mapping.Update.Internal.ExtractorMetadata.ExtractResultFromRecord(IEntityStateEntry stateEntry, Boolean isModified, IExtendedDataRecord record, Boolean useCurrentValues, UpdateTranslator translator, ModifiedPropertiesBehavior modifiedPropertiesBehavior)
   at System.Data.Mapping.Update.Internal.RecordConverter.ConvertStateEntryToPropagatorResult(IEntityStateEntry stateEntry, Boolean useCurrentValues, ModifiedPropertiesBehavior modifiedPropertiesBehavior)
 --- End of inner exception stack trace ---
    at System.Data.Mapping.Update.Internal.RecordConverter.ConvertStateEntryToPropagatorResult(IEntityStateEntry stateEntry, Boolean useCurrentValues, ModifiedPropertiesBehavior modifiedPropertiesBehavior)
   at System.Data.Mapping.Update.Internal.ExtractedStateEntry..ctor(UpdateTranslator translator, IEntityStateEntry stateEntry)
   at System.Data.Mapping.Update.Internal.UpdateTranslator.LoadStateEntry(IEntityStateEntry stateEntry)
   at System.Data.Mapping.Update.Internal.UpdateTranslator.PullModifiedEntriesFromStateManager()
   at System.Data.Mapping.Update.Internal.UpdateTranslator.ProduceCommands()
   at System.Data.Mapping.Update.Internal.UpdateTranslator.Update(IEntityStateManager stateManager, IEntityAdapter adapter)
   at System.Data.EntityClient.EntityAdapter.Update(IEntityStateManager entityCache)
   at System.Data.Objects.ObjectContext.SaveChanges(SaveOptions options)
   at System.Data.Entity.Internal.InternalContext.SaveChanges()
 --- End of inner exception stack trace ---
    at System.Data.Entity.Internal.InternalContext.SaveChanges()
   at System.Data.Entity.Internal.LazyInternalContext.SaveChanges()
   at System.Data.Entity.DbContext.SaveChanges()
   at MyProj.Data.MyProjDataContext.SaveChanges() in c:\Users\pvencill. \Documents\Visual Studio 2012\Projects\MyProj\MyProj.Data\MyProjDataContext.cs:line 44
   at MyProj.Test.Integration.AFDataContextTest.Nodes_can_be_saved() in c:\Users\pvencill. \Documents\Visual Studio 2012\Projects\MyProj\MyProj.Test\Integration\AFDataContextTest.cs:line 55 
```

研究该错误导致在 Google 上的点击率很少，但我发现的那些建议与我的模型关系有关，尽管在查看迁移生成的数据库时，一切似乎都是为了我的眼睛。我的相关模型如下：

我的数据上下文 DBSets 和 modelCreating 定义：

```
public DbSet<Blip> Blips { get; set; }
        public DbSet<SensorAdapter> Sensors { get; set; }
        public DbSet<NodeReport> NodeReports { get; set; }
        public DbSet<Node> Nodes { get; set; }

        protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
            modelBuilder.Entity<Blip>().Property(b => b.TimeStamp).HasColumnType("datetime2");
            modelBuilder.Entity<Node>().HasMany<NodeReport>(n => n.NodeReports).WithRequired(nr=>nr.Node);
            modelBuilder.Entity<Blip>().HasMany<NodeReport>(b => b.NodeReports);

            base.OnModelCreating(modelBuilder);
        } 
```

Blips 和 SensorAdapter 对象在向它们添加 NodeReports 之前运行良好，所以我怀疑项目所在的地方。

我有一个基础实体对象，我的所有东西都继承自它，它只定义了一个 T 类型的 Id 属性；那工作正常。

NodeReport 继承自 Report，其定义在这里：

```
public abstract class Report : Entity<long>
    {
        public Report()
        {
            Status = Status.Unknown;
        }

        public DateTime TimeStamp { get; set; }
        public Status Status { get; set; }
        public String Raw { get; set; }
    } 
```

NodeReport 依次定义如下：

```
public class NodeReport : Report
    {
        public virtual Node Node { get; set; }
        //public virtual Blip Blip { get; set; }
    } 
```

我在有和没有 Blip 的情况下都试过了，当我试图缩小问题范围时，我现在评论了

节点也是一个相当稀疏的类：

```
public class Node : Entity<long>
    {
        public Node ()
        {
                       NodeReports = new List<NodeReport>();
        }

        public String HostName { get;set; }
        public String Description { get; set; }
            public virtual IList<NodeReport> NodeReports { get; set; }
    } 
```

任何建议将不胜感激，我一直在努力解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T12:37:06.420

好吧，经过大量搜索我的代码并从头开始重建后，我发现问题实际上是我有一个 Node 派生类，它有一个 Uri 作为属性，显然映射失败，因为它没有默认构造函数（并且可能是其他原因）。我现在通过简单地将属性更改为我在内部验证为 Uri 的字符串来解决它，尽管我更喜欢更优雅的解决方案。我尝试将 Uri 甚至 Uri 的自定义子类（带默认构造函数）映射到复杂类型，但这没有帮助。

尽管如此，上面的问题还是得到了回答。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-20T23:11:09.610

有了@Paul 的回答，我终于可以弄清楚我的问题了。

我正在使用带有继承**TPT**（每个类型的表）的**EF 。**

 **# 源代码

为了更容易，我将使用[本](http://weblogs.asp.net/manavi/inheritance-mapping-strategies-with-entity-framework-code-first-ctp5-part-2-table-per-type-tpt)教程中描述的相同类。

```
public abstract class BillingDetail
{
    public int BillingDetailId { get; set; }
    public string Owner { get; set; }
    public string Number { get; set; }
}

[Table("BankAccounts")]
public class BankAccount : BillingDetail
{
    public string BankName { get; set; }
    public string Swift { get; set; }
    public Agency Agency { get; set; } /* I added it */
}

public class InheritanceMappingContext : DbContext
{
    public DbSet<BillingDetail> BillingDetails { get; set; }
}

protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    modelBuilder.Entity<BankAccount>().ToTable("BankAccounts");
    modelBuilder.Entity<CreditCard>().ToTable("CreditCards");
} 
```

# 问题

请注意，我`Agency`在`BankAccount`. 鉴于它是一个**复杂类型**，如果你不映射它，你会在运行时得到这个恼人的错误！

# 解决方案

我所做的只是忽略此属性`Agency`，但您也可以将其映射到 EF 知道该怎么做。两者都将停止错误。

最奇怪的是，即使没有映射派生实体（BankAccount）也会出现问题。似乎 EF 不知何故知道您创建了派生。因此，如果您尝试在不映射某些派生的情况下运行 EF，您也可能会收到此错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-04T00:17:07.153

我有同样的问题，不幸的是，除了与此问题相关的其他问题的答案之外，StackOverflow 中的任何解决方案都对我有用。

但是我找到了自己的解决方法，如果您遇到与我相同的问题，您也可以检查它。发生的情况是，如果某个类继承自我在 DbSet 上使用的表：

```
public DbSet<Employee> Employees { get; set; } 
```

在这种情况下，如果某些其他类从我的 POCO 继承，则会`Employee`触发此特定错误。我从这个类中删除了所有继承，这解决了这个问题。

请注意，这个继承问题会触发同样的问题：

```
The given key was not present in the dictionary. 
```

仅当继承在同一个项目上时才会发生。我试图在不同的项目上继承 POCO，它恰好很好。**

# php - 重定向后PHP会话变量不保存？

> ID：13618870
> 
> 赞同：2
> 
> 时间：2012-11-29T04:32:56.280
> 
> 标签：php, session, variables, login, session-variables

我似乎突然遇到了一个奇怪的问题，我希望有人可以提出建议......

我有一个登录脚本，如果登录失败，它应该注册一个包含错误消息的会话变量，然后将用户重定向到他们来自的页面。例如，用户可能在 index.php 上使用了论坛，但登录失败，他们将返回到 index.php，其中的脚本会显示会话变量中包含的错误消息。

但是，会话变量似乎没有保存。作为记录，我在登录脚本中使用 session_start() 以及任何具有登录表单的页面，如果用户因登录失败而返回该页面，则该页面应显示错误消息。

我的脚本如下：

```
if (isset($_POST['prev'])) {
  $prev = $_POST['prev'];
}
else {
  $prev = "login.php";
}
$_SESSION['Login_Error'] = $error;
header("Location: $prev"); 
```

那么表单页面上的脚本是：

```
if (isset($_SESSION['Login_Error'])) {
  echo $_SESSION['Login_Error'];
} 
```

我得到的错误是：

```
Notice: Undefined index: Login_Error in F:\EasyPHP-12.0\www\index.php on line 3 
```

关于为什么不保存的任何想法？如果登录成功，脚本会设置一个工作正常的用户 ID 会话变量。感谢您的任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-16T22:45:19.260

我以前遇到过这个问题。如果在用户打开时设置了会话变量

www.domain.com/login.php

并且用户被重定向到

domain.com/index.php（开头没有 www.）

会话变量将不可访问。确保 www. 要么总是在那里，从不在那里，要么你的脚本是否使用它，具体取决于具体情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T21:51:57.863

在更远的某个时间点，如果你有：`unset($_SESSION['Login_Error'])`或类似的...... 例如`$_SESSION['Login_Error'] = null`..这可能会导致问题。

这是因为在发送要重定向的标头之后 - php 脚本的其余部分继续执行。

如果您在标头之后放置 a`die()`或`exit()`.. 这应该会停止脚本的其余部分执行，因此，请确保 var 在脚本下方的任何位置都没有取消设置。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-06T21:22:01.760

您需要在声明会话变量之前启动会话：

[http://php.net/manual/es/function.session-start.php](http://php.net/manual/es/function.session-start.php)

在慢速机器上也有一个错误，目前无法保存会话变量。

尝试使用超时标头：

```
header("refresh:3;url=".$prev); 
```

[在http://en.wikipedia.org/wiki/List_of_HTTP_header_fields#Refresh](http://en.wikipedia.org/wiki/List_of_HTTP_header_fields#Refresh)上查看有关刷新标头的更多信息

# python - urlparse.urljoin() 不处理无效的父目录

> ID：13618875
> 
> 赞同：4
> 
> 时间：2012-11-29T04:33:18.317
> 
> 标签：python, url, screen-scraping, relative-url

在从相对 URL 构造绝对 URL 时，有没有办法解决“无效”父目录，或者我应该只使用`.replace()`？

```
>>> from urlparse import urljoin
>>> url = urljoin('http://www.example.com/path/', '../../../index.html')
>>> url
'http://www.example.com/../../index.html'
>>> url.replace('../', '')
'http://www.example.com/index.html' 
```

更好的是，在 Python 中进行抓取时，是否有一种更清洁的方法来清理 url？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T03:12:50.183

正如你所说，这没有意义。你可以从根目录往上走。因此，在不知道作者意图的情况下，将第二部分标准化是很困难的。只有您知道如何正确消毒它。:)

# android - android处理程序中的TextToSpeech

> ID：13618876
> 
> 赞同：0
> 
> 时间：2012-11-29T04:33:19.880
> 
> 标签：android, text-to-speech

在我的应用程序中，我将图像 1 一个接一个地显示 1 秒。当第一张图像出现时，我想使用 texttospeech 方法来描述该图像。我试过了。但是空指针异常即将到来。这里是代码 -

```
public class Shapes extends Activity {

    private TextToSpeech mTts;
     int flag=0;
     ImageView iv;
     int myData=1;
     Handler handler = new Handler();
     static int v[]={R.drawable.roundd,R.drawable.rectangle,R.drawable.bluesquare};
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.shapes);
         iv=(ImageView) findViewById(R.id.imageView1);
             handler.postDelayed(changeImage, 2000);
    }

     Runnable changeImage = new Runnable(){

         @Override
         public void run(){
             if(flag>2)
                handler.removeCallbacks(changeImage);
             else{
                 mTts.speak("hii", TextToSpeech.QUEUE_ADD, null);
                iv.setImageResource(v[flag++]);

              Intent checkIntent = new Intent();
                checkIntent.setAction(TextToSpeech.Engine.ACTION_CHECK_TTS_DATA);
                startActivityForResult(checkIntent,myData);   
             }
         }

     };

     protected void onActivityResult(int requestCode, int resultCode, Intent data) {
            if (requestCode == myData) {
                if (resultCode == TextToSpeech.Engine.CHECK_VOICE_DATA_PASS) {
                    // success, create the TTS instance
                    mTts = new TextToSpeech(this, (OnInitListener) this);
                }

                else {
                    // missing data, install it
                    Intent installIntent = new Intent();
                    installIntent.setAction(TextToSpeech.Engine.ACTION_INSTALL_TTS_DATA);
                    startActivity(installIntent);
                }
            }

        }

    public void onInit(int status) {
        // TODO Auto-generated method stub
         if (status == TextToSpeech.SUCCESS) {
             // Toast.makeText(Abcd.this, "Text-To-Speech engine is initialized", Toast.LENGTH_LONG).show();
               }
        else if (status == TextToSpeech.ERROR) {
            Toast.makeText(this, "Error occurred while initializing Text-To-Speech engine", Toast.LENGTH_LONG).show();
                }

    } 
```

日志信息-

```
11-29 10:21:07.118: E/AndroidRuntime(461): java.lang.NullPointerException
11-29 10:21:07.118: E/AndroidRuntime(461):  at com.my.KidsEasyLearning.Shapes$1.run(Shapes.java:37)
11-29 10:21:07.118: E/AndroidRuntime(461):  at android.os.Handler.handleCallback(Handler.java:587)
11-29 10:21:07.118: E/AndroidRuntime(461):  at android.os.Handler.dispatchMessage(Handler.java:92)
11-29 10:21:07.118: E/AndroidRuntime(461):  at android.os.Looper.loop(Looper.java:123)
11-29 10:21:07.118: E/AndroidRuntime(461):  at android.app.ActivityThread.main(ActivityThread.java:3683)
11-29 10:21:07.118: E/AndroidRuntime(461):  at java.lang.reflect.Method.invokeNative(Native Method)
11-29 10:21:07.118: E/AndroidRuntime(461):  at java.lang.reflect.Method.invoke(Method.java:507)
11-29 10:21:07.118: E/AndroidRuntime(461):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
11-29 10:21:07.118: E/AndroidRuntime(461):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
11-29 10:21:07.118: E/AndroidRuntime(461):  at dalvik.system.NativeStart.main(Native Method)
11-29 10:21:09.899: I/Process(461): Sending signal. PID: 461 SIG: 9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T15:54:05.773

TextToSpeech 的启动过程可能有点小技巧。我建议使用这个库中的内置代码

[https://github.com/gast-lib/gast-lib/blob/master/library/src/root/gast/speech/SpeechRecognizingAndSpeakingActivity.java](https://github.com/gast-lib/gast-lib/blob/master/library/src/root/gast/speech/SpeechRecognizingAndSpeakingActivity.java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T04:37:24.797

在你的 adtivity 类中实现 TextToSpeech。

并将变量声明为

```
mTts = new TextToSpeech(this, this); 
```

这些都是明显的错误。请参阅[本](http://www.androidhive.info/2012/01/android-text-to-speech-tutorial/)教程以获取指导

# javascript - Layerslider autoPauseSlideshow 不工作

> ID：13618878
> 
> 赞同：1
> 
> 时间：2012-11-29T04:33:29.910
> 
> 标签：javascript, jquery, html, slider

我正在尝试将此滑块与我的页面一起使用。js的设置在这里：

```
 $(document).ready(function(){

    _p.init();      
    $('#layerslider').layerSlider({
        autoStart               : true,
        firstLayer              : 2,
        skinsPath : '/static/layerslider/skins/',
        autoPauseSlideshow      : 'auto',
        durationTimeIn : 1500,
        durationTimeOut : 1500

    }); 
```

自动启动，fistlayer 有效，但 autoPauseSlideshow 无效！我已经尝试使用模板的原始文件，并且一直不起作用！任何人都可以帮助我吗？谢谢

# c# - 动态单选按钮文本对齐

> ID：13618880
> 
> 赞同：1
> 
> 时间：2012-11-29T04:33:41.463
> 
> 标签：c#, winforms, .net-4.0

当我在 Visual c# 中添加单选按钮时，单选按钮的文本名称与右侧完美对齐。如果我动态创建一个单选按钮并为其提供多个属性等。当我调试和查看它时，单选按钮的文本或名称会稍微向上移动到单选按钮的右侧？我查看了几个属性，包括填充等。但我无法弄清楚如何动态纠正这个问题。发生了什么事，我该如何解决？

这是我现在正在使用的属性的示例

```
radio_ip_addresses[i] = new RadioButton();
radio_ip_addresses[i].Name = "radio_" + i;
radio_ip_addresses[i].Text = ip_addresses.Dequeue();
radio_ip_addresses[i].Location = new Point(x, y);
radio_ip_addresses[i].Font = new Font("Microsoft Sans Serif", 8, FontStyle.Bold);
radio_ip_addresses[i].ForeColor = Color.White;
radio_ip_addresses[i].TextAlign = ContentAlignment.MiddleLeft;
radio_ip_addresses[i].Visible = true;
radio_ip_addresses[i].Parent = this; 
```

![winform的图片](../Images/1d8781607aed7ec0bf191b6f8ad6f5d3.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T14:22:54.193

谢谢Rotem，我接受了你的建议来检查我应该想到的designer.cs。关键是自动调整大小 :)，从我在 Designer.cs 中找到的内容见下文。

```
 this.radioButton1.AutoSize = true;
        this.radioButton1.Location = new System.Drawing.Point(192, 50);
        this.radioButton1.Name = "radioButton1";
        this.radioButton1.Size = new System.Drawing.Size(85, 17);
        this.radioButton1.TabIndex = 71;
        this.radioButton1.TabStop = true;
        this.radioButton1.Text = "radioButton1";
        this.radioButton1.UseVisualStyleBackColor = true; 
```

# c - Libcurl ftp 通配符上传

> ID：13618882
> 
> 赞同：0
> 
> 时间：2012-11-29T04:33:43.293
> 
> 标签：c, ftp, libcurl

嗨，您如何使用带有 libcurl 的通配符上传多个文件？例如，我创建了三个文件， `file1.txt, file2.txt, file3.txt`. 我想用`"file"`他们的名字上传这些文件，使用通配符，比如`file*`. 顺便说一句，我正在使用C。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T12:27:14.480

您需要编写遍历本地文件的代码，然后使用 libcurl 将它们一一上传。

# regex - 使用 vbscript 查找多个正则表达式模式

> ID：13618883
> 
> 赞同：3
> 
> 时间：2012-11-29T04:33:45.993
> 
> 标签：regex, vbscript

抱歉，但我对 RegEx 有点陌生，希望有人能够提供帮助。

有问题的文件：

```
 Apples.A.Tasty.Treat.Author-JoeDirt.doc
    Cooking with Apples Publisher-Oscar Publishing.txt
    Candied.Treats.Author-JenBloc.Publisher-Event.docx 
```

我目前使用这段 vbscript 代码用句点替换文件名中的空格或破折号，但我想知道是否有更有效的方法来完成此操作？

```
 Set colRegExMatches = strRegEx.Execute(objSourceFile.Name)
    For Each objRegExMatch in colRegExMatches
      strResult = InStr(objSourceFile.Name, objRegExMatch)
      objTargetFile = Left(objSourceFile.Name, (strResult -1)) & objRegExMatch.Value
      objTargetFile = Replace(objSourceFile.Name, " ", ".", 1, -1, 1)
      objTargetFile = Replace(objSourceFile.Name, "-", ".", 1, -1, 1)
      objSourceFile.Name = objTargetFile
    Next 
```

上面的脚本完成后，我有以下文件列表：

```
 Apples.A.Tasty.Treat.Author-JoeDirt.doc
    Cooking.with.Apples.Publisher-Oscar.Publishing.txt
    Candied.Treats.Author-JenBloc.Publisher-Event.docx 
```

现在，我想查找以 Author 或 Publisher 开头的任何内容，然后删除扩展名之前的文本。

```
 myRegEx.Pattern = (?:Author|Publisher)+[\w-]+\. 
```

这主要适用于文件，除非有额外的时间来添加出版商名称或出版年份或书号的第二部分。

```
 Apples.A.Tasty.Treat.doc
    Cooking.with.Apples.Publishing.txt
    Candied.Treats.docx 
```

我尝试了这段代码，它似乎可以工作，但我必须指定文件扩展名。

```
 myRegEx.Pattern = (?:Author|Publisher)[\w-](\S*\B[^txt|docx|doc][\w-].) 
```

如果我尝试以下操作，它将去除 Candied.Treats 文件的扩展名

```
 myRegEx.Pattern = (?:Author|Publisher)[\w-](\S*\B[^][\w-].)

    Apples.A.Tasty.Treat.doc
    Cooking.with.Apples.txt
    Candied.Treats. 
```

我一直在[http://gskinner.com/RegExr](http://gskinner.com/RegExr)使用 RegExr Builder来测试我的模式，但现在不知所措。最后，一旦我的模式按预期工作，我该如何在我的 vbscript 中使用它？我是否只需按以下方式添加新行？

```
 objTargetFile = Replace(objSourceFile.Name, "(?:Author|Publisher)[\w-](\S*\B[^txt|docx|pdf|doc][\w-].)", "", 1, -1, 1) 
```

谢谢。

这是新的 vbscript 代码，它似乎什么都不做。

```
 strFixChars = InputBox("Do you want to replace spaces, dashes and strip tags? (Y/N)", "Confirmation")
    Set strRegEx = new RegExp
    For Each objSourceFile in colSourceFiles
      strFileExt = objFSO.GetExtensionName(objSourceFile)
      objLogFile.WriteLine "Input File: " & objSourceFile.Name
      strCount = Len(objSourceFile.Name)
      strRegEx.Pattern = "(?:Author|Publisher)(.+)\."
      strRegEx.IgnoreCase = True
      strRegEx.Global = True
      Set colRegExMatches = strRegEx.Execute(objSourceFile.Name)
      For Each objRegExMatch in colRegExMatches
        strResult = InStr(objSourceFile.Name, objRegExMatch)
        objTargetFile = Left(objSourceFile.Name, (strResult -1)) & objRegExMatch.Value
            If strFixChars = "Y" Then
            objTargetFile = Replace(objSourceFile.Name, " ", ".")
            objTargetFile = Replace(objSourceFile.Name, "-", ".")
            objTargetFile = Replace(objSourceFile.Name, "(?:Author|Publisher)(.+)\.", "")
        End If
        objLogFile.WriteLine "Output File: " & objTargetFile
        strFileList = strFileList & vbCrlf & objTargetFile
    Next
Next 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T04:46:25.023

您的正则表达式的快速修复将是使用`(?:Author|Publisher)(.+)\.`您将不得不用 vbscript 中的空字符串替换第一个匹配组。

# ruby-on-rails - 为 DelayedJob 设置租户范围

> ID：13618884
> 
> 赞同：3
> 
> 时间：2012-11-29T04:33:48.507
> 
> 标签：ruby-on-rails, delayed-job, multi-tenant

我有一个多租户 Rails 应用程序，该应用程序`tenant_id`在许多模型上都有一个列。

属于特定租户的每个模型都有一个基于租户类上的类变量的默认范围：

```
default_scope { where(tenant_id: Tenant.current_id) } 
```

`Tenant.current_id`在应用程序控制器中设置。

问题是，当我（通过延迟作业）发送有关租户范围对象（即。`UserMailer.delay.contact_user(@some_user_in_a_specific_tenant)`）的邮件时，每当我在邮件程序中调用任何内容时，我都会得到`NoMethodError`s 。大概是因为延迟作业流程没有设置.`nilClass``@some_user_in_a_specific_tenant``Tenant.current_id`

如何让 DJ 访问我传入的对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T04:39:23.330

当您对作业进行排队时获取 current_id 并从中构建一个不依赖于应用程序中的类变量的范围。或者首先获取要操作的记录 ID 列表，然后将其传递给 DJ。

例子：

```
def method_one(id)
  Whatever.where(:tenant_id => id).do_stuff
end

def method_two(ids)
  Whatever.find(ids).do_stuff
end

handle_asynchronously :method_one, :method_two

# then
method_one(Tenant.current_id)

# or
ids = Whatever.all.map(&:id)
method_two(ids) 
```

# c - NULL 未初始化

> ID：13618885
> 
> 赞同：1
> 
> 时间：2012-11-29T04:33:58.810
> 
> 标签：c, fopen

我是 C 编程新手，但我已经掌握了窍门。我正在研究一个 FILE 函数，该函数永远不会返回 NULL。即使文件不存在并且被初始化为“r”，也会发生这种情况。该代码以前有效，但之后一直返回 TRUE。我已经以多种方式编写了代码，但都以文件的形式返回。我什至更改了文件名以创建一个完全不同的文件，但仍然得到相同的结果。任何帮助都会很棒。提前致谢。

编辑：谢谢大家。我已经让它工作了。

```
#include <stdio.h>
#include <stdlib.h>

int main(void)
{
    FILE *fp;

    fp = fopen("c:\\lest.txt", "w");
    if(fp == NULL)
        {
        printf("File Not Available\n");
        exit(0);
        }

    fclose(fp);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T04:36:16.217

您需要检查 fp 是否为 null，而不是 fopen。

```
#include <stdio.h>
#include <stdlib.h>

int main(void)
{
    FILE *fp;

    fp = fopen("c:\\lest.txt", "r");
    if(fp == NULL)
        {
        printf("File Not Available\n");
        exit(0);
        }

    fclose(fp);

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-29T04:38:22.140

```
 fp = fopen("c:\\lest.txt", "r");
 if(fopen == NULL) 
```

这些线是错误的。`fopen()`是标准函数。因此`fopen`（不带括号）**将始终为非 NULL**，因为它表示`fopen()`.

你应该做的是检查`fopen()`. 在这种情况下`fp`。

```
if(fp==NULL){
    perror("fopen");
    exit(1);
} 
```

另请注意，

1.  要打印确切的错误，您应该使用`perror()`函数。
2.  `exit(0)`将 0 返回给操作系统。这表明成功。更好用`exit(1)`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-29T04:37:57.077

不要测试`fopen`null，而是更改要测试的`fp`条件`NULL`：

```
#include <stdio.h>
#include <stdlib.h>

int main(void)
{
    FILE fp*;

    fp = fopen("c:\\lest.txt", "r");
    if(fp == NULL)
    {
        printf("File Not Available\n");
        exit(0);
    }

    fclose(fp);

    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T05:07:17.303

正如你所说，即使更改文件名 & 然后调用**fp = fopen("c:\lest.txt", "w");** 即使没有名称为**lest.txt**的现有文件，你也会得到**fp!=NULL**。

发生这种情况是因为如果指定的文件不存在，则在 fopen() 函数中创建具有指定名称的新文件，然后返回它的文件指针，所以我认为你已经得到了你的答案。

有关更多信息，请参阅函数 fopen() [http://linux.die.net/man/3/fopen的手册页](http://linux.die.net/man/3/fopen)

# apache - 目录和文件的重写条件

> ID：13618886
> 
> 赞同：0
> 
> 时间：2012-11-29T04:34:06.940
> 
> 标签：apache, .htaccess

任何人请帮助我。我是.htaccess的新手

我想检查以下情况

```
RewriteCond : IF !index.html AND !app/facebookapp/{[a-zA-Z0-9-/]}.html
RewriteRule : ..... 
```

我的代码是

```
RewriteCond %{REQUEST_URI} !index\.html 
RewriteCond %{REQUEST_URI} app/facebookapp/^([a-zA-Z0-9-/]+).html$ 
RewriteRule ...... 
```

它不工作

还有一个问题

如果请求 url 是`header.html`

```
RewriteCond %{REQUEST_URI} header.html$ 
RewriteRule ^([a-zA-Z0-9-/]+).html$ position.php?position=$1 [L] 
```

`$l`将返回`header`。

如果请求 url 是`app/facebookapp/header.html` 我们写相同的上述条件`$l`将返回`app/facebookapp/header`。我的问题是如何只获取文件名？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T04:42:13.403

第1部分：

在我看来，您将 ^ 字符放在错误的位置。在正则表达式语法中，它表示文本的开头，但前面有一些文本。你可以把它放在东西的前面，但我认为在这种情况下你可以摆脱它。试试这个：

```
RewriteCond %{REQUEST_URI} !index\.html 
RewriteCond %{REQUEST_URI} app/facebookapp/([a-zA-Z0-9-/]+).html$ 
RewriteRule ...... 
```

第2部分：

您将需要两个匹配的组，并且只使用右侧的第二个组。第一个包含 / 作为有效字符，第二个不包含。让我知道这是否效果更好：

```
RewriteCond %{REQUEST_URI} header.html$ 
RewriteRule ^([a-zA-Z0-9-/]+)/?([a-zA-Z0-9-]+).html$ position.php?position=$2 [L] 
```

# python - 如何从python中的给定字符生成英文单词

> ID：13618887
> 
> 赞同：1
> 
> 时间：2012-11-29T04:34:22.517
> 
> 标签：python, django

在我的 django 应用程序中，用户将在文本框中输入一些字符，并根据我需要从英语词典中提供常用单词的字符并向用户建议。

是否有任何可用的通用英语词典数据库或来自任何其他站点的某种 api 可以完成任务

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T04:53:32.893

听起来您正在寻找一个可以找到字谜的程序。这是一个非 Django 解决方案。它使用 Joel 建议的 /usr/share/dict/words 。

```
from collections import defaultdict

def canonical_form(word):
    return tuple(sorted(word))

anagrams = defaultdict(list)

for word in open("/usr/share/dict/words"):
    word = word.lower().strip()
    anagrams[canonical_form(word)].append(word)

while True:
    print anagrams[canonical_form(raw_input())] 
```

# haskell - 约束新类型参数

> ID：13618888
> 
> 赞同：0
> 
> 时间：2012-11-29T04:34:31.297
> 
> 标签：haskell, typeclass

具有以下自定义新类型：

```
newtype QueryM a = QueryM (Connection -> IO a) 
```

如何`Alternative`在约束它的同时为它`a`声明一个实例`Alternative`？或者我可以吗？

我的意思是这样的：

```
instance (Alternative a) => Alternative (QueryM a) where 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T04:54:00.353

如果我添加一个参数，这里编译得很好`a`：

```
import Control.Applicative

newtype QueryM a b = QueryM (Connection -> IO (a b))

type Connection = ()

instance Functor (QueryM a)
instance Applicative (QueryM a)

instance (Alternative a) => Alternative (QueryM a) where 
```

# sql-server - 如何通过保留分组后返回的结果来使用顺序子句

> ID：13618889
> 
> 赞同：0
> 
> 时间：2012-11-29T04:34:33.937
> 
> 标签：sql-server

我在查询结果中遇到问题，如果我`order by`在之后返回的结果集上使用`group by`，则分组顺序会受到干扰。

```
select a.location_id,a.feed_date 
  from p_article_table
  inner join m_misc_details l on a.location_id = l.misc_detail_id 
   and misc_master_id=2 
   and a.location_id in (1,2,4,5,6,7,8)
   and  convert(varchar(11),a.feed_date,108)<'09:01:00'
group by a.location_id,a.feed_date 
order by a.feed_date 
```

我该怎么办 ？

location_id 上的 GROUP BY 后的结果给出

```
1   
1
1
1
5
7
7
7
8 
```

但是在我在 feed_date 上使用 ORDER BY 之后，结果就会受到干扰

1 1 5 7 1 8 1 ..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T04:37:48.090

分组操作不受order by的影响。没有排序的分组记录的返回顺序是任意的。

你想要这个：

```
select a.location_id,a.feed_date 
  from p_article_table
  inner join m_misc_details l on a.location_id = l.misc_detail_id 
   and misc_master_id=2 
   and a.location_id in (1,2,4,5,6,7,8)
   and  convert(varchar(11),a.feed_date,108)<'09:01:00'
group by a.location_id, a.feed_date 
order by a.location_id, a.feed_date 
```

# java - 让用户选择一个联系人，然后以后可以查找该联系人的信息？

> ID：13618890
> 
> 赞同：1
> 
> 时间：2012-11-29T04:34:46.743
> 
> 标签：java, android, android-contacts

我正在制作一个应用程序，它将询问现有联系人，然后为该联系人保留某种标识符，最后能够在以后查找该联系人的信息（特别是姓名和图片）。

我有选择器的意图：

```
Intent contactIntent = new Intent(Intent.ACTION_PICK,
                    ContactsContract.Contacts.CONTENT_URI);
startActivityForResult(contactIntent, 5); 
```

结果：

```
public void onActivityResult(int reqCode, int resultCode, Intent data) {
    super.onActivityResult(reqCode, resultCode, data);

    switch (reqCode) {
    case (pickCode):
        if (resultCode == RESULT_OK) {
            Uri contactData = data.getData(); 
```

但我在这里迷路了。我如何“标记”这个联系人，以便以后可以找到它？

一旦我这样做了，我如何获得联系人图片？虽然我可能可以弄清楚这一点，但如果有一些简单的方法可以连接到第一部分，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T04:45:31.890

您可以将此联系人 uri 存储在 [SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)中以供以后使用或在其他组件之间共享：

创建 SharedPreferences 为：

```
 SharedPreferences myPrefs = this.getSharedPreferences("myPrefs",
                                             MODE_WORLD_READABLE);
 SharedPreferences.Editor prefsEditor = myPrefs.edit();
 prefsEditor.putString("contact_uri", contactData.toString());
 prefsEditor.commit(); 
```

以及稍后从 SharedPreferences 中检索 uri：

```
SharedPreferences myPrefs = this.getSharedPreferences("myPrefs",
                                               MODE_WORLD_READABLE);
 String contact_uri = myPrefs.getString("contact_uri", "not found");
 Uri contactData = Uri.parse(contact_uri); 
```

# svn - SVN结帐：它是如何工作的

> ID：13618896
> 
> 赞同：1
> 
> 时间：2012-11-29T04:35:44.743
> 
> 标签：svn, version-control

对不起，如果这是一个你应该知道的问题（有人告诉我没有愚蠢的问题），但它是这样的：

我是 SVN 的新手，我只是为我的 Eclipse 工作区设置了它。我将 Eclipse 工作区设置为 SVN 的工作空间，而我将 Dropbox 中的目录用于 SVN 存储库。

我能够从我的工作区签入和签出到/从 svn 存储库（在保管箱中）。从我的工作区中删除项目后，我可以再次从我的存储库中检出它。我假设存储库（在我的 Dropbox 目录中）应该保留我的代码副本，以便即使我从工作区中删除代码也可以检查它。但是查看我的 svn 存储库，我没有看到我的项目中的物理文件。但是，如果我从我的工作区中删除它，我仍然可以检查我的代码......有什么魔力？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T06:07:20.570

我希望，我理解你的问题——不是你*问*的那个，而是你*想问的那个*

您希望存储库以与工作区中呈现的相同形式显示存储的树，但会看到一些奇怪的文件而不是一些奇怪的文件。我对吗？

如果答案是“是”，那么：

存储库不是您文件的哑镜像，它是存储您的数据和所有更改历史的特殊数据库。只有 Subversion 客户端能够与存储库通信并在存储库和工作副本之间执行存储库数据的双向转换。

**PS**：DropBox 上的 repo 是个坏主意（tm）——有很多特殊的（免费或非免费）Subversion 主机——DropBox 对 SVN 特定的细节一无所知，并且可以在某些情况下破坏整个 repo。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T04:45:48.457

SVN 存储库不仅仅是保存文件的副本，作为变更控制系统，它还保存了文件的所有变更历史。因此，您不仅可以签出您的项目，还可以签出您曾经签入到 SVN 的项目的任何版本。

但我不知道 SVN 的实现细节，也从来不关心 SVN 是如何组织其内部文件存储的。

# python - 在 DSL 的算术语法中评估函数

> ID：13618897
> 
> 赞同：2
> 
> 时间：2012-11-29T04:35:49.007
> 
> 标签：python, pyparsing

我正在研究一个简单的 DSL 来转换从 MongoDB 中提取的数据。我正在使用 python 和 pyparsing，并且从提供的示例开始，在创建适用于 +/-* 等基本运算符的语法方面取得了相当大的进展。我目前坚持如何让我的程序评估表单的功能`Rank[dbRef]`。我可以通过简单的运算符对 dbRefs 进行评估和算术运算，但是在评估函数时，我的递归无法正常工作。我不知道如何访问函数调用中传递的 dbRef 参数。

这是语法和相关的`setParseActions`：

```
# Define parser, accounting for the fact that some fields contain whitespace
chars = Word(alphanums + "_-/")
expr = Forward()
integer = Word(nums).setParseAction(EvalConstant)
real = Combine(Word(nums) + "." + Word(nums)).setParseAction(EvalConstant)

# Handle database field references that are coming out of Mongo
dbRef = Combine(chars + OneOrMore(":") + chars)

dbRef.setParseAction(EvalDBref)

# Handle function calls
functionCall = (Keyword("Rank") | Keyword("ZS") | Keyword("Ntile")) + "[" + dbRef + "]"
functionCall.setParseAction(EvalFunction)
operand = (real | integer) | functionCall | dbRef 

signop = oneOf('+ -')
multop = oneOf('* /')
plusop = oneOf('+ -')

# Use parse actions to attach Eval constructors to sub-expressions

expr << operatorPrecedence(operand,
    [
     (signop, 1, opAssoc.RIGHT, EvalSignOp),
     (multop, 2, opAssoc.LEFT, EvalMultOp),
     (plusop, 2, opAssoc.LEFT, EvalAddOp),
    ])

formulas = ['Rank[Person:Height]']

for f in formulas:
    ret = expr.parseString(f)[0]
    print p + ": " + line + " --> " + str(ret.eval()) 
```

这是我的评估类的相关代码。解析器确实调用了该类，但是如何访问传递给函数的参数？

```
# Executes functions contained in expressions
class EvalFunction(object): 
    def __init__(self, tokens): 
        self.value = tokens[0]
    def eval(self):
        func = self.value
        if func == 'Rank':
            # How to evaluate the token that is arg of Function?
            return 'Rank Found'; 
```

我想我只需要朝着正确的方向轻推即可进入下一阶段..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T19:39:55.270

我对此进行了整理并想提供一个答案。我的函数评估类如下所示：

```
# Executes functions contained in expressions
class EvalFunction(object):
  pop_ = {}
  def __init__(self, tokens):
    self.func_ = tokens.funcname
    self.field_ = tokens.arg
  def eval(self):
      # Get the name of the requested field and source db
      # Functions can only be called on dbRef so this always done
      v = self.field_.value
      fieldRef = v.split(':')
      source = fieldRef[0]
      field = fieldRef[1]

      # Evaluate the dbRef (get the value from the db)
      val = self.field_.eval()

      if self.func_ == 'Avg':
        rec = db['Stats'].find_one({'_id' : field})   
        return rec['value']['avg']
      elif self.func_ == 'Root':
          return math.sqrt(val) 
```

我的函数语法是：

```
functionCall = funcNames("funcname") + "[" + dbRef("arg") + "]"
functionCall.setParseAction(EvalFunction) 
```

# cloud-foundry - 定制微云代工？

> ID：13618900
> 
> 赞同：4
> 
> 时间：2012-11-29T04:35:58.103
> 
> 标签：cloud-foundry

我正在尝试为定制的云代工部署创建一个独立的伴侣，其中启用了一些额外的服务，就像微云代工是 cloudfoundry.com 的伴侣一样。我已经在博客上对我迄今为止的工作进行[了更长的描述，但简短的问题是：](http://corneliadavis.com/blog/2012/11/29/customizing-micro-cloud-foundry/)

是否有可用的 micro-cf-release 可以扩展并用于创建定制的微云代工厂？随着现在[发布列车](http://blog.cloudfoundry.com/2012/11/08/new-release-of-micro-cloud-foundry/)的发生，这必须在某个地方，以及用于创建 VM 的流程和工具。这是在某个地方的开源吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T17:21:53.877

构建版本的 capistrano 脚本是：

[https://github.com/cloudfoundry/micro/blob/master/build/build.cap](https://github.com/cloudfoundry/micro/blob/master/build/build.cap)

此工作流程是实验性的，但应该可以在脚本中使用构建任务的子集并在构建之前自定义 cf-release。

# rest - asp.net mvc 从 post 请求返回带有 id 的视图

> ID：13618901
> 
> 赞同：0
> 
> 时间：2012-11-29T04:36:04.967
> 
> 标签：rest, asp.net-mvc-4

我有一个包含表单和输入的页面。我想执行删除记录之类的操作，所以我有一个提交按钮并将记录的 ID 发布到确认页面。

但是确认页面不会是 REST，因为我使用的是 post。如何给 url 记录的 id？

我不能使用链接，因为记录的 id 取决于输入

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T05:22:10.510

Javascript。jQuery 将是我的选择

# php - 来自 csv 列值的类别

> ID：13618908
> 
> 赞同：0
> 
> 时间：2012-11-29T04:36:27.137
> 
> 标签：php, recursion, multidimensional-array, tree

我有一个项目的 CSV 文件，其中包含`item_id | item_name | item_cat1 | item_cat2 | item_cat3`. 我正在将此文件解析为一个包含每个项目信息数组的大数组：

```
$items = Array(
  1 => Array(
    item_id => item1,
    item_name => item1,
    item_cat1 => cat1,
    item_cat2 => cat2,
    item_cat3 => cat3
  ),
  2 => Array(
    item_id => item2,
    item_name => item2,
    item_cat1 => cat4,
    item_cat2 => cat5,
    item_cat3 => cat6
  ),
  3 => Array(
    item_id => item3,
    item_name => item3,
    item_cat1 => cat1,
    item_cat2 => cat7,
    item_cat3 => ''
  )
) 
```

我想做的是创建一个新数组，其中包含嵌套的类别：

```
$cats = Array(
  1 => Array(
    'cat_name' => cat1,
    'subs' => Array(
      1 => cat2,
      2 => cat7
    )
  )
) 
```

但不知何故，它需要是递归的，如果第三级包含一个条目，则也需要获得第三级的数组。

如何做到这一点？

编辑-这是我到目前为止所拥有的，以及我想要完成的简短代码：

```
$mainCats = array();

foreach($items as $item){
    if(!in_array($item[10], $mainCats)){
        $mainCats[] = array(
            'cat_name' = > $item[10],
            'cat_subs' => array()
    }
    // if $item[11] does not exist in cat_subs where $mainCats['cat_name'] == $item[10], add it.
    // else check if $item[12] exists in cat_subs where $mainCats['cat_subs']['cat_name'] == $item[11]
} 
```

现有代码的问题在于，由于`$item[10]`它位于数组内的`$mainCats`数组中，因此它会添加每一次出现，而不是只添加一次。

# java - Hibernate 和 mssql 内连接行数

> ID：13618918
> 
> 赞同：0
> 
> 时间：2012-11-29T04:37:36.843
> 
> 标签：java, hibernate

我正在与休眠标准作斗争。我的目标是使用 Hibernate Criteria 创建以下请求：

```
select
    count(*) as y0_ 
from
    PInterface this_ 
inner join
    Product product2_ 
        on this_.product_id=product2_.id 
where
    this_.product_interface_type_id=? 
```

这是我的代码：

```
@Entity @Table(name = "PInterface")
public class PInterface {
    @Id
    @GeneratedValue
    @Column(name = "id", nullable = false, insertable = false, updatable = false)
    private int id;
    @Column(name = "product_id")
    private int productId;
    @Column(name = "product_interface_type_id")
    private int type;

    @ManyToOne(optional=false)
    @JoinColumn(name = "product_id", referencedColumnName = "id", insertable=false, updatable=false)
    private Product product;
}
@Entity @Table(name = "Product")
public class Product {
    @Id
    @GeneratedValue
    @Column(name = "id", nullable = false, insertable = false, updatable = false)
    private int id;
    private String name;
}

//Criteria is :
Object criteria = sessionFactory.getCurrentSession()
                    .createCriteria(PInterface.class)
                    .add(Restrictions.eq("type", 1))
                    .setProjection(Projections.rowCount())
                    .uniqueResult()
                    ; 
```

然而，结果...

```
select
    count(*) as y0_ 
from
    PInterface this_ 
where
    this_.product_interface_type_id=? 
```

内联在哪里？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T05:00:33.107

这个怎么样：

```
 Object criteria = sessionFactory.getCurrentSession()
                .createCriteria(PInterface.class)
                .createCriteria("product")
                .createAlias("product", "p")
                .add( Restrictions.eqProperty("p.id", "productId") )
                .add(Restrictions.eq("type", 1))
                .setProjection(Projections.rowCount())
                .uniqueResult(); 
```

# c++ - 如何初始化静态 const char* 枚举类型特征数组？

> ID：13618922
> 
> 赞同：0
> 
> 时间：2012-11-29T04:37:55.557
> 
> 标签：c++, typetraits

我在外部 sdk 中遇到了一个标题，如下所示：

```
// external.h
//
template <class T> class MyBaseEnum
{
public: 
    /** String list. */
    static const char *mStrings[];

    //! Constructor.
    inline MyBaseEnum(){}  

    //! Destructor.
    inline ~MyBaseEnum()
    {

    }
}; 
```

我已经看到这个类在另一个标头中的同一个 sdk 中使用，如下所示：

```
// foo.h
//
class Foo
{
    enum MyEnum 
    {
        A = 0,
        B,
        C
    };
    typedef MyBaseEnum< MyEnum > MyEnumType;

    MyEnumType bar;
}; 
```

我无权访问相应的 cpp 文件来查看如何`mStrings`为 bar 初始化，但我认为这与类型特征有关。

`foo.cpp`正确初始化的语法是什么样的`MyEnumType::mStrings`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T08:42:27.140

与`MyBaseEnum`模板类一样，`mStrings`成员*不能*在单独的源文件中定义。它必须在包含的头文件中完成，因为定义需要模板参数。

语法与定义任何其他字符串数组基本相同：

```
template<class T>
const char* MyBaseEnum<T>::mStrings = { ... }; 
```

# oracle - 触发器将已删除的条目输入到新表中 - SQL plus

> ID：13618925
> 
> 赞同：-1
> 
> 时间：2012-11-29T04:38:04.477
> 
> 标签：oracle, triggers

我正在尝试创建一个触发器，当我们从 nm_employees 表中删除值时，该触发器会将值输入到表 terminate_employees 中。我已经编写了触发器，但它不起作用。我的触发器格式正确吗？有任何想法吗？

```
CREATE TABLE nm_departments(
dept2 varchar(20),
CONSTRAINT empPK PRIMARY KEY (dept2)
);

CREATE TABLE nm_employees(
name varchar(20),
dept varchar(20),
CONSTRAINT departments FOREIGN KEY (dept) REFERENCES nm_departments (dept2)ON DELETE         CASCADE
);

CREATE TABLE terminated_employees(
te_name varchar(20),
te_dept varchar(20)
);

CREATE TRIGGER term_employee AFTER DELETE ON nm_employee
FOR EACH ROW
BEGIN
INSERT INTO terminated_employees (NEW.te_name, NEW.te_dept) VALUES  (OLD.name,OLD.dept)
END; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T04:55:50.733

您不应该在语句`NEW.`的列名上指定 。`INSERT`这些是表中的列`terminated_employees`，而不是新值。IE

```
INSERT INTO terminated_employees (te_name, te_dept)
VALUES  (OLD.name,OLD.dept) 
```

您可以在 SQL*Plus 中使用`show errors`(或) 来查看确切的错误。`show err`

你有很多问题：

*   创建触发器上的表名错误（缺少`s`）
*   `;`插入语句后丢失
*   `OLD.`需要有前缀`:`。IE`:OLD.name`

# php - 如何在 Joomla 2.5 中停止跨站点脚本？

> ID：13618930
> 
> 赞同：-1
> 
> 时间：2012-11-29T04:38:59.187
> 
> 标签：php, joomla

我需要有关 Cross Side Scripting (XSS) 的帮助。我希望当任何人输入 Preg 字符时，它只会从首页的搜索文本框中删除。

在当前设置中，它只删除了一些仅与 HTML 标签`<>,#`等相关的字符。但我需要这些字符集：

```
< > ( ) ' " / \ *; = { } ` (back tick) % + ^! - \x00-\x20 (x is hexadecimal notation) [Includes Space, Tab, Carriage Return, Line Feed] 
```

当用户将其插入任何文本框中（如 Joomla 前端的搜索模块等）时，应将其删除。我使用的是 Joomla 2.5

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T11:19:46.013

您是指特定个人还是特殊群体中的某个人？您是否在全局配置中使用输入过滤器设置？

# php - 将所有无效的 url 重定向到 url.php

> ID：13618932
> 
> 赞同：-1
> 
> 时间：2012-11-29T04:39:14.450
> 
> 标签：php, .htaccess

`.htaccess`如果页面或文件夹不存在，我想创建一个规则重定向到 url.php

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T04:40:51.117

只需将此行添加到您的根 .htaccess 文件中：

```
ErrorDocument 404 /url.php 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T04:44:45.453

尝试`ErrorDocument`

```
ErrorDocument 404 /url.php 
```

您也可以用于 403,500 等

```
ErrorDocument 403 /url.php
ErrorDocument 500 /url.php 
```

或者

```
RewriteCond %{HTTP_HOST} ^.*$
RewriteRule ^404.php$ http://www.example.com [R=301,L] 
```

# c# - 如何调试 VS 插件？

> ID：13618936
> 
> 赞同：1
> 
> 时间：2012-11-29T04:39:35.343
> 
> 标签：c#, .net, vb.net, visual-studio, visual-studio-addins

我正在尝试修改一个 VS 插件，这个插件有多个项目。插件项目本身，它使用的一些类库是一个用户界面项目。

当我尝试调试时，出现错误“无法直接启动具有类库输出类型的项目”。由于所有项目本质上都具有相同的输出类型，因此我不确定该怎么做。我尝试确保启动项目是实际的 vs addin 项目，但我仍然遇到相同的错误。我以前从未使用过加载项，所以我想我可能在这里错过了一个重要的步骤。我正在使用 vs 2010，以及插件目标。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T06:30:57.050

您是否尝试指定项目属性的调试部分的启动外部程序属性？尝试设置 Visual Studio exe 的完整路径（类似于“C:\Program Files (x86)\Microsoft Visual Studio 9.0\Common7\IDE\devenv.exe”）

# c - 从 C 中的断言函数更改为 If 语句

> ID：13618940
> 
> 赞同：1
> 
> 时间：2012-11-29T04:40:19.990
> 
> 标签：c, tree, assert, red-black-tree

我在网上找到了一些红黑树的代码，并正在尝试实现它。

我不想使用`assert`原始代码位于[此处的函数](http://en.literateprograms.org/Red-black_tree_%28C%29)

`n->color = child->color;`在删除修复之前，我在线路上遇到了段错误。调试后发现本例中不存在child，原来代码中assert语句的原因也是如此。我决定添加我认为合适的附加 if 子句，围绕从 child 向下处理的所有内容。

但是，现在程序实际上并没有删除，因为如果孩子不存在，它永远不会进入循环。经过反复试验，我仍然找不到关闭 if 子句以正确代替 assert 语句的位置。

请让我知道你的想法！

这是我的“翻译”代码，没有断言，而是使用 if 语句。

```
void delete_node(int key)
{
    node* child;
    node* n ;

   n = searchTree(key);

    if(n == NULL)return;

    if(n->left != NULL && n->right != NULL)
    {
        node* pred = n->left;
        while(pred->right != NULL)
            pred = pred->right;

        n->value = pred->value;
        n = pred;
    }
if(n->right != NULL || n->left != NULL){

    child = n->right == NULL ? n->left : n->right;
    if(n->color == 'b')
    {
        n->color = child->color;
        delete_fix1(n);
    }

    swap_nodes(n, child);
    if(n->parent == NULL && child != NULL)
        child->color = 'b';
    free(n);

}

} 
```

测试数据（尝试删除时发生 Seg Fault 4）：i 代表插入（据我所知，插入完美无缺） d 代表删除

```
i 7
i 8
i 1
d 8
i 4
i 10
d 4
i 11 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T04:47:49.047

这：

```
assert(n->left == NULL || n->right == NULL) 
```

远不及*这个*：

```
if (n->right != NULL || n->left != NULL) 
```

重新检查您的翻译。断言声明其中之一*必须*为 NULL。*如果其中一个***不**为NULL，则您的 if-expr 评估为 true 。如果两者都不为空，则您的 if-expr 通过，断言将失败。同样，如果两者都为 NULL，则 if-expr 失败，而断言会通过。

做这种事情时不要走捷径。第一的。**无论您添加了多少检查，都保留断言**。其次，在它启动并工作之前，逐字复制您的 if (expr): 或 (!(expr)) 中的断言子句以获取救助条件。

**逐字检查：**

```
assert(n->left == NULL || n->right == NULL)
if (n->left == NULL || n->right == NULL)... 
```

**救助检查：**

```
assert(n->left == NULL || n->right == NULL)
if (!(n->left == NULL || n->right == NULL))
    bailout loud. 
```

**使用集成的 if-expr**编辑链接代码的翻译****

 **```
void rbtree_delete(rbtree t, void* key, compare_func compare)
{
    node child;
    node n = lookup_node(t, key, compare);
    if (n == NULL) return;  /* Key not found, do nothing */
    if (n->left != NULL && n->right != NULL) {
        /* Copy key/value from predecessor and then delete it instead */
        node pred = maximum_node(n->left);
        n->key   = pred->key;
        n->value = pred->value;
        n = pred;
    }

    assert(n->left == NULL || n->right == NULL);
    if (n->left == NULL || n->right == NULL) // << note: SAME as above
    {
        child = n->right == NULL ? n->left  : n->right;
        if (node_color(n) == BLACK) {
            n->color = node_color(child);
            delete_case1(t, n);
        }
        replace_node(t, n, child);
        if (n->parent == NULL && child != NULL)
            child->color = BLACK;
        free(n);
    }

    verify_properties(t);
} 
```**

# javascript - 仅当所有数组元素相同时才执行函数

> ID：13618943
> 
> 赞同：1
> 
> 时间：2012-11-29T04:40:22.080
> 
> 标签：javascript

我有一个带有布尔值的数组：

```
var array = [false, false, false]; 
```

我只想在所有元素都是`false`.

我试过了，但没有用，因为它会为每个执行函数`false`：

```
for(var i = 0; i < array.length; i++){
   if(array[i] === false){
      functionA();   //This function ran at every false
   }else{
      //Do something else
   }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-29T04:42:34.560

```
if (array.indexOf(true) == -1) {
    functionA();
} 
```

该`indexOf`函数[返回可以在数组中找到给定元素的第一个索引，如果不存在，则返回 -1。](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T04:49:38.530

您可以执行以下操作：

```
function checkAllSameValue(array) {
  var identical = true;
  var i = 0;

  while ((i + 1) in array && identical) {
    identical = array[i] == array[++i];
  }

  return identical;
} 
```

检查每个成员是否与下一个成员相同

### 编辑

针对 ilia choly 的性能和查找问题，这里有一个与 for 循环一样快的替代方案，可能更快，具体取决于 UA：

```
function checkAllSameValue(array) {
  var i = array.length;
  var value = array[--i];

  while (i) {
    if (arr[--i] != value) return false
  }
  return true;
} 
```

是否使用`==`或`===`应该使用取决于 OP。发布的解决方案都没有处理稀疏数组，因此没有一个是通用解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T04:45:57.560

猜猜这会有所帮助：

```
var array = [false, false, false];
var flag = true;
for(var i = 0; i < array.length; i++){
   if(array[i]!= false){
    flag = false;
    break;
   }
}
if(flag){
  functionA();   //This function call function only once
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T04:46:04.917

史蒂夫的方法更好，但如果你要使用你的方法，那就是

```
var allFalse = true, i;

for(i = 0; i < array.length; i++) {
    if(array[i]){
        allFalse = false;
        break;
    }
}

if (allFalse) {
    functionA();
} 
```

或者

```
if (array.every(function(val) { return !val; })) {
    functionA();
} 
```

如果您想要一个通用函数来检查所有元素是否相同，您可以这样做

```
function checkAllSameValue(array) {
    var first = array[0], i;

    for (i = 1; i < array.length; i++) {
        if (array[i] !== first) return false;
    }

    return true;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-29T04:58:03.557

您描述它的方式与标题略有不同。如果您只是在它们都是错误的情况下尝试执行该功能，那么史蒂夫的回答很棒。不过，根据这个数组的来源，我可能会像这样扩展它，以防备它：

```
if (array.indexOf(true) == -1 && array.indexOf(null) == -1) {
    functionA();
} 
```

OTOH，如果您想在它们都相同的任何时候运行它，那么您将需要更复杂的逻辑。

在这种情况下，我可能会设置一个标志，在循环中更新它，然后在循环之后执行函数调用。您还需要一个变量来跟踪先前的值。如果任何值与其先前的值不匹配，则它们并不完全相同，因此您将标志设置为 false。然后，在循环之后，您检查标志并运行该函数，如果它是真的。

像这样的东西：

```
var runFunction = true;
var previousVal = -1;
for (var i = 0; i < array.length; i++){
   if(previousVal === -1) {
      previousVal = array[i];
   }
   if(array[i] !== previousVal){
      runFunction = false;
      break;
   }
}
if (runFunction) {
   functionA();
} else {
   // Do something else
} 
```

# windows-7 - 为什么 Windows 7 任务计划程序任务失败并出现错误 2147942667

> ID：13618945
> 
> 赞同：148
> 
> 时间：2012-11-29T04:40:30.400
> 
> 标签：windows-7, scheduled-tasks

我面临一个奇怪的问题。我已经安排了一个任务来启动一个批处理文件。当我使用选项运行任务时，`Run only when user is logged on`一切正常。但我想在后台运行此任务，因此我使用选项运行它`Run whether user is logged on or not`。现在，当我运行任务时它不起作用。我收到以下 2 个错误。我不明白这个错误。请帮我解决这个问题。

```
 Task Scheduler failed to launch action "C:\Windows\SYSTEM32\cmd.exe" in instance "{2a7cc950-fad9-4633-9701-af75a0fd220d}" of task "\stmm\Daemon". Additional Data: Error Value: 2147942667.
 Task Scheduler failed to start instance "{2a7cc950-fad9-4633-9701-af75a0fd220d}" of "\stmm\Daemon"  task for user "GBLADHEDANI\N011940" . Additional Data: Error Value: 2147942667. 
```

* * *

## 回答 #1

> 赞同：282
> 
> 时间：2013-01-14T20:28:08.197

我有同样的问题。

在 Microsoft 知识库文章 2452723 中找到了适合我的解决方案：

[如果“开始于（可选）”字段中的路径包含引号，则 Windows Vista 及更高版本的计划任务将无法运行](http://support.microsoft.com/kb/2452723)

基本上，编辑您的计划任务并将报价从“开始”字段中取出：

1.  打开您的计划任务
2.  切换到“操作”选项卡
3.  打开你的行动
4.  从“开始于（可选）”字段中删除引号 (")
5.  保存并关闭所有打开的对话框

![编辑动作对话框](../Images/2f0c0d15d9bd622ff4cf30bc92ba2699.png)

要获取相关的错误消息：

1）将2147942667转换为十六进制：8007010B
2）取最后4位（010B）并转换为十进制：267
3）运行：net helpmsg 267
4）结果：“目录名无效。”

[![命令提示符窗口](../Images/ea244894f5108c76fda89337d4ed9160.png)](https://i.stack.imgur.com/MqFtS.png)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-04-27T05:23:02.270

对我来说，它是“开始”——我从旧服务器复制了值，并更新了新 .exe 位置的路径，但我忘记更新“开始”位置——如果它不存在，你也得到这个错误

从上面引用@hans-passant 的评论，因为调试这个问题很有价值：

> 将错误代码转换为十六进制得到 0x8007010B。7 使其成为 Windows 错误。这使得 010B 错误代码 267。“目录名称无效”。当然，会发生这种情况。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-11-30T10:21:19.477

发生这种情况的原因不止一个。就我而言，这是由于权限问题而发生的。运行任务的用户没有写入日志目录的权限，因此失败并出现此错误。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-02-06T10:22:44.227

我在Windows7上遇到了同样的问题。

我收到错误 2147942667 和无法运行 c:\windows\system32\CMD.EXE 的报告。我尝试在脚本和开始中使用和不使用双引号，但没有任何区别。然后我尝试用 UNC 引用 (\Server1\Sharexx\my_scripts\run_this.cmd) 替换所有对映射网络驱动器的路径引用，并为我修复了它。拍。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-11-19T14:16:13.250

对于更通用的答案，将错误值转换为十六进制，然后在[Windows 任务计划程序错误和成功常量中查找十六进制值](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383604%28v=vs.85%29.aspx)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-01-14T15:36:55.537

对我来说，这是“开始”——我不小心留在了程序名称末尾的“.py”中。而且我忘记大写它所在的文件夹的名称（'Apps'）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-09-24T20:37:34.977

对我来说，这是由于用户 PATH 环境变量，即使用户是正确的，它似乎也不起作用，所以我需要将整个可执行路径放入程序字段中。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-12-23T08:55:24.553

对我们来说，它是“开始”路径中缺少的“：”。

# java - 在 Adob e CQ 5.4 中创建带有侦听器的组件需要帮助

> ID：13618952
> 
> 赞同：0
> 
> 时间：2012-11-29T04:42:02.897
> 
> 标签：java, aem

我是 Adob​​e CQ 5.4 的新手，请推荐一个很好的教程，我可以在其中学习和实现，创建一个附加了监听器的组件，对事件触发执行一些基本操作，我使用 Java 开发组件。

问候， 亚什

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T07:08:26.073

我建议首先查看 Adob​​e 的文档... [http://dev.day.com/docs/en/cq/current/howto/components_develop.html](http://dev.day.com/docs/en/cq/current/howto/components_develop.html)

CQ 附带了一个名为 Geometrixx 的参考站点实现。它带有一整套可用于学习的工作组件。您可以访问 /libs/geometrixx 下的示例组件的渲染脚本，通过 CRXDE (Lite) 检查示例代码。

*   关于 Sling 脚本解析的工作原理（将告诉您如何确定哪些代码负责呈现特定组件以及它将在存储库中的位置）： [http ://dev.day.com/docs/en/cq/current/开发中/the_basics.html](http://dev.day.com/docs/en/cq/current/developing/the_basics.html)

*   在创建具有特定事件侦听器的组件时，您可以通过在组件代码中使用普通的旧 JavaScript 轻松地做到这一点。

# python - Qt在线程退出后处理信号？

> ID：13618959
> 
> 赞同：2
> 
> 时间：2012-11-29T04:42:49.397
> 
> 标签：python, multithreading, qt, pyqt, pyside

我正在构建一个带有 GUI 和几个工作线程的应用程序。现在我希望它是一个多线程应用程序，所以我在一个循环中多次执行同一个线程，每个线程获取线程外部类中定义的不同输入参数。

所以我的 mainGui.py 文件看起来像这样（仅显示相关代码）：

```
self.workers = [worker.Worker(), worker.Worker(), worker.Worker()]
for i in xrange(threadCount):
    self.currentWorker = self.workers[i]
    self.currentWorker.alterTable.connect(self.alterMainTable)
    self.currentWorker.start()
    time.sleep(0.1) 
```

正如您可能想象的那样，我将 Worker 的`alterTable`信号连接到`alterMainTable()`我在主 GUI 线程中定义的方法。此方法更新 GUI 中的表。

工作线程看起来像这样：

```
class Worker(QThread):

    alterTable = Signal(dict)

    def __init__(self, parent=None):
        super(Worker, self).__init__(parent)

    def sendToTable(self, param1, param2, param3):
        """This method emits the signal with params as defined above"""
        params = {}
        params["param1"] = param1
        params["param2"] = param2
        params["param3"] = param3
        self.alterTable.emit(params)

    def run(self):
        #Perform a lengthy task, do this every now and then:
        self.sendToTable(param, param2, param3) 
```

当我在单个工作线程中运行此应用程序时（所以当我不在主线程中调用该循环时），它工作正常 - 发出信号，并更新 GUI 中的主表。

但是，当我一次运行多个线程时会出现问题。Worker 线程完成他们的工作，但有时只会发出 Signal。或者，更好的是，它就像 Qt（或其他）正在等待所有线程完成，然后更新表一样发出。这就是实际发生的情况——我可以在 Python 控制台中看到线程正在执行它们的任务，一旦它们**都**在做它们正在做的任何事情，表格就会突然立即填充一堆数据。

正如您可能想象的那样，由此产生的另一个问题是，由于没有正在处理的事件，一段时间后，我的应用程序似乎被冻结了。

我已经尝试将其添加`Qt.DirectConnection`到该`connect()`方法中，但这并没有真正帮助。

额外问题：我一直在 SO 和其他网站上阅读有关此主题的内容，似乎人们推荐`QRunnable()`而不是`QThread()`特别推荐子类化它。因此，我会使用`QThreadPool()`. 但是当我尝试这个时，似乎我无法从 a 发出信号`QRunnable`- 它给了我`AttributeError: 'PySide.QtCore.Signal' object has no attribute 'connect'`，即使 Signal 是在 QRunnable 类中定义的 - 这很奇怪，我必须说。

**编辑**：在关于 SO 的另一个答案中，有人提到可能正在向主 GUI 线程“发送垃圾邮件”，其中包含要处理的事件。但是，我不相信这是这种情况，因为`sendToTable()`来自 QThread 的方法最多只从线程调用 5-6 次，并且最多`threadCount`不大于 20，但我通常将其保持在 5 左右.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T05:06:26.730

而且，像往常一样，我在调试了 2 天并在 SO 上发布几分钟后回答了我的问题。

在所有线程启动后，我有一个剩余的`workerThread.wait()`方法调用。所以很自然地，我的应用程序做了它被告知要做的事情——等待线程完成。

我删除了该方法调用，并将`QCoreApplication.processEvents()`启动线程的循环放入其中，现在一切都像魅力一样工作。

再次感谢SO的隐形全能者！

# android - 如何用 Fragment 实现 Action Bar？

> ID：13618961
> 
> 赞同：1
> 
> 时间：2012-11-29T04:42:50.863
> 
> 标签：android

我正在使用带有选项卡的操作栏。我需要根据选项卡选择更改操作栏项目和标题。我可以更改标题，但我无法更改项目的图标。

因为 actionBar.setTitle() 是默认方法。就像图标和项目更改没有默认方法..Action Bar可以在Activity而不是Fragment中使用..如何处理这种情况？请帮我

我正在使用下面的代码..

公共类 ActionBarActivity 扩展 Activity{

```
public static Context context;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.actionbar);
    ActionBar actionBar = getActionBar();
    actionBar.setTitle("Action Bar");
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
    actionBar.show();

    ActionBar.Tab aTab = actionBar.newTab().setText("A");
    ActionBar.Tab bTab = actionBar.newTab().setText("B");
    ActionBar.Tab cTab = actionBar.newTab().setText("C");

    Fragment aFragment = new aActivity();
    Fragment bFragment = new bActivity();
    Fragment bFragment = new cActivity();

    aTab .setTabListener(new MyTabsListener(aFragment));
    bTab.setTabListener(new MyTabsListener(bFragment));
    cTab.setTabListener(new MyTabsListener(cFragment));

    actionBar.addTab(aTab );
    actionBar.addTab(bTab);
    actionBar.addTab(cTab);

}

@Override
 public boolean onCreateOptionsMenu(Menu menu) {
  MenuInflater menuInflater = getMenuInflater();
        menuInflater.inflate(R.menu.menu, menu);
        return super.onCreateOptionsMenu(menu);

 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T04:48:15.283

```
actionBar = getSupportActionBar();
actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

actionBar.setTitle("Meeting");
actionBar.setDisplayShowHomeEnabled(false);
actionBar.setDisplayShowCustomEnabled(false);
actionBar.setDisplayShowTitleEnabled(false);

/* Set Custom view */
ActionBar.Tab tab = actionBar.newTab();
// tab.setText("Meeting Users");
tab.setIcon(R.drawable.users);
tab.setTabListener(this);
actionBar.addTab(tab);

tab = actionBar.newTab();
// tab.setText("Chat");
tab.setIcon(R.drawable.chat);
tab.setTabListener(this);
actionBar.addTab(tab);

tab = actionBar.newTab();
// tab.setText("Video");
tab.setIcon(R.drawable.video_call);
tab.setTabListener(this);
tab.select();
actionBar.addTab(tab);

tab = actionBar.newTab();
// tab.setText("Extra");
tab.setIcon(R.drawable.extra);
tab.setTabListener(this);
actionBar.addTab(tab); 
```

现在为您的标签使用自定义视图

```
 ActionBar.Tab tab = getSupportActionBar().newTab();
  tab.setCustomView(R.layout.custom_tab_view); 
```

[https://gist.github.com/3167287](https://gist.github.com/3167287)

[http://actionbarsherlock.com/](http://actionbarsherlock.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T05:17:04.970

```
http://developer.android.com/guide/topics/manifest/application-element.html#logo 
```

android:logo 整个应用程序的标志，以及活动的默认标志。此属性必须设置为对包含图像的可绘制资源的引用（例如“@drawable/logo”）。没有默认徽标。

如果您的操作栏像 Sherlock 一样工作并且基于菜单项，这是我的解决方案：

```
@Override
public boolean onPrepareOptionsMenu(Menu menu) {
    MenuItem switchButton = menu.findItem(R.id.SwitchSearchOption);     
    if(searchScriptDisplayed){
        switchButton.setIcon(R.drawable.menu_precedent);
    }else{
        switchButton.setIcon(R.drawable.icon_search);
    }
    return super.onPrepareOptionsMenu(menu);

} 
```

# .net - 发生异常时，有没有办法在 WCF 中处理 HTTP 响应？

> ID：13618970
> 
> 赞同：2
> 
> 时间：2012-11-29T04:43:37.913
> 
> 标签：.net, wcf, web-services

我有一个看起来像这样的网络服务：

```
[ServiceContract]
public class MyService
{
   [OperationContract]
   public void BreakStuff()
   {
      throw new MyException();
   }
} 
```

它现在不是一个非常强大的网络服务，但你看 - 它会很棒！

如果我调用，WCF 会捕获异常，返回 HTTP 500，如果设置为 true `BreakStuff()`，则可以选择吐出序列化堆栈跟踪。`IncludeExceptionDetailsInFaults`我想覆盖此行为并吐出我自己的自定义错误消息对象，并返回 HTTP 200。我想这样做是因为我认为在某些情况下抛出异常比用*try/catch*块乱扔代码*更干净*web 方法返回某种*Result*对象。

 **我所做的是我自己的`IDispatchMessageFormatter`，它有合同：

```
public interface IDispatchMessageFormatter
{
   void DeserializeRequest(Message message, object[] parameters);
   Message SerializeReply(MessageVersion messageVersion, object[] parameters, object result);
} 
```

`SerializeReply`为正常的 HTTP 200 响应调用，但是如果 web 方法抛出异常，WCF 永远不会调用`SerializeReply`，所以我没有机会控制响应输出。

WCF 是否提供自定义错误响应的能力？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T05:08:23.373

您可以通过实现[IErrorHandler](http://msdn.microsoft.com/en-us/library/system.servicemodel.dispatcher.ierrorhandler.aspx)接口来实现自定义错误处理程序。我过去曾使用这种方法以 JSON 格式返回自定义错误信息。在[ProvideFault](http://msdn.microsoft.com/en-us/library/system.servicemodel.dispatcher.ierrorhandler.providefault.aspx)方法中，您还可以更改响应代码。下面是我使用过的一种方法的示例。

```
public void ProvideFault(Exception error, MessageVersion version, ref Message fault)
{   
    fault = GetJsonResponseFromException(version, error);
    ConfigureMessageFormat(ref fault);
    ConfigureHttpReponse(ref fault, error);
}

protected virtual void ConfigureMessageFormat(ref Message fault)
{
    var formatting =
      new WebBodyFormatMessageProperty(WebContentFormat.Json);
    fault.Properties.Add(WebBodyFormatMessageProperty.Name, formatting);
}

protected virtual void ConfigureHttpReponse(ref Message fault, Exception error)
{
    var exception = error as WebFaultException<ServiceFault>;
    var statusCode = HttpStatusCode.InternalServerError;
    var description = HttpWorkerRequest
        .GetStatusDescription(Convert.ToInt32(statusCode));

    if (exception != null)
    {
        statusCode = exception.StatusCode;
        description = exception.Reason.Translations[0].Text;
    }

    var httpResponse = new HttpResponseMessageProperty()
    {
        StatusCode = statusCode,
        StatusDescription = description
    };

    httpResponse.Headers[HttpResponseHeader.ContentType] = "application/json";
    fault.Properties.Add(HttpResponseMessageProperty.Name, httpResponse);
} 
```**

# node.js - 当我使用 node.js 和 socket.io 单击 div 时的实时事件

> ID：13618975
> 
> 赞同：0
> 
> 时间：2012-11-29T04:44:20.210
> 
> 标签：node.js, socket.io

我正在制作一个简单的实时应用程序。

我有一个带有正方形的页面，当我单击正方形时，它会被涂上或去除油漆。

我想在一个选项卡中进行活动，并在另一个选项卡中查看他的效果。

我对 node.js 和 socket.io 没有太多经验

有我的服务器：

```
 var sock = require('socket.io')
    , express = require('express')
    , path = require('path')
    var app = express();

    app.configure(function(){
      app.set('views', __dirname + '/views');
      app.set('view engine', 'jade');
      app.use(express.cookieParser());
      app.use(express.static(path.join(__dirname, 'public')));
     });

    app.get('/', function (req,res) {
       io.sockets.in(req.sessionID);
       res.render(__dirname + '/views/teste.jade');
    });

    io = sock.listen(app.listen(3000));

    io.sockets.on('connection', function(socket){ 
      var sess = socket.handshake.session;
      socket.on('hasClass', function(data) {
         socket.emit('hasClass', {hasClass: data.hasClass})
      });
    }); 
```

还有我的 .jade：

```
 doctype 5
      html
        head
          title= "Express"
          link(rel='stylesheet', href='/stylesheets/style.css')
          script(src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js")
          script(src="/socket.io/socket.io.js")
          script
          $(document).ready(function() {
             var socket = io.connect('http://localhost:3000');
             socket.on('connect', function(){
               $('#quadrado').click(function() {
                 if ($('#quadrado').hasClass('clicked')) {
                   socket.emit('hasClass', {hasClass:true});
                 } else {
                   socket.emit('hasClass', {hasClass:false});
                 }
               });
            });

            socket.on('hasClass', function(data){
              if(data.hasClass) {
                $('#quadrado').removeClass('clicked');
              } else {
                $('#quadrado').addClass('clicked');
              }
            });
         });
       body
         block content 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T17:52:00.107

在您的服务器代码中，以下内容：

```
socket.on('hasClass', function(data) {
   socket.emit('hasClass', {hasClass: data.hasClass})
}); 
```

只会将事件重新发送到您从中获取事件的套接字。如果要将其发送到其他所有套接字，请使用：

```
socket.broadcast.emit(...); 
```

如果您想将它发送到*每个*套接字，包括接收它的那个，请使用

```
io.sockets.emit(...); 
```

# javascript - 不重定向到处理程序页面

> ID：13618982
> 
> 赞同：0
> 
> 时间：2012-11-29T04:45:24.963
> 
> 标签：javascript, asp.net

我在 aspx 页面中给出的 java 脚本。信息应重定向到处理程序页面不起作用..

```
<script type="text/javascript">
 var Name;
  var Age;
 var Mobile;
 var Email;
 var Center;
 function getdata()
  {
   alert('Adding'); 
   Name=document.getElementById("txtname").value;
   alert(Name);
   Age=document.getElementById("Txtage").value;
   alert(Age);
   Mobile=document.getElementById("Txtmobile").value;
   alert(Mobile);
   Email=document.getElementById("TxtEmail").value;
   alert(Email);
   Center=document.getElementById("Ddlcenter").value;
   alert(Center);
   sendinfo();
  } 
```

以下查询仅未重定向到处理程序页面

```
function sendinfo()
{ 
    $(document).ready(function(sendinfo){
    var url='Handler/Appoinment.ashx?Name='+Name+'&Age='+Age+'&Mobile='+Mobile+'&Email='+Email+'&Center='+Center+'';
    alert(url);
    $.getJSON(url,function(json)
    {
        $.each(json,function(i,weed)
        {
        });
  }); 
```

});

# c# - 检查以确保我的对象未部分初始化

> ID：13618983
> 
> 赞同：1
> 
> 时间：2012-11-29T04:45:25.377
> 
> 标签：c#

我正在创建一个简单的应用程序，它接受一个 URL 和一个字符串并为超链接创建代码。

这是我的超链接类

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

 namespace LinkIt_
{
class HyperLink
{
    private string url;
    private string text;

    public HyperLink()
    {

    }

    public HyperLink(string url,string text)
    {
        this.Website = url;
        this.Text = text;
    }

    public String Website
    {
        get
        {
            return url;
        }
        set
        {
            if (String.IsNullOrEmpty(value))
            {
                throw new ArgumentNullException("Must have URL!");
            }

            this.url = value;
        }

    }

    public String Text
    {

        get
        {
            return text;
        }

        set
        {
            if (String.IsNullOrEmpty(value))
            {
                throw new ArgumentNullException("Must have Text!");
            }
            this.text = value;
        }

    }

    public string addPoint()
    {

        return String.Format("<li><a href=" + "\" {0} \">", url) + text + "</a></li>";  
    }

    public override string ToString()
    {

        return String.Format("<a href=" + "\" {0} \">",url) + text + "</a>" ;   
    }

           }
       } 
```

这是我的表单类

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

 namespace LinkIt_
 {
        public partial class Form1 : Form
{

    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        HyperLink link;
            try
            {

                if (chkPoint.Checked)
                {

                    txtDisplay.Text = "";
                    link = new HyperLink(txtLink.Text, txtText.Text);
                    txtDisplay.Text = link.addPoint();

                }
                else
                {
                    txtDisplay.Text = "";
                    link = new HyperLink(txtLink.Text, txtText.Text);
                    txtDisplay.Text = link.ToString();

                }

            }

            catch (ArgumentNullException msg)
            {
                MessageBox.Show(msg.Message);
            }

   }

    private void btnClear_Click(object sender, EventArgs e)
    {
        txtDisplay.Text = "";
        txtLink.Text = "";
        txtText.Text = "";
    }
}
 } 
```

我的问题：

1.  如何确保不创建部分初始化的对象？

2.  如果我的代码需要更正，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T04:51:12.137

您可以重构代码以使用访问器可见性降低的属性。这样，`HyperLink`就不能从类外部更改对象（这通常是数据结构的首选属性）。

例如，您可以执行以下操作：

```
class HyperLink
{
    public String Website{get; private set;}

    public String Text {get; private set;}

    public HyperLink(string url,string text)
    {
        if(string.isNullOrEmpty(url) || string.IsNullOrEmpty(text))
          throw new ArgumentNullException("no partially intialized object allowed");

        this.Website = url;
        this.Text = text;
    }

    public string AddPoint()
    {
        return String.Format("<li><a href=" + "\" {0} \">", url) + text + "</a></li>";  
    }

    public override string ToString()
    {
        return String.Format("<a href=" + "\" {0} \">",url) + text + "</a>" ;   
    }
} 
```

* * *

**更新以回答评论中的问题**

是的，在同一个对象或类中使用 Getter/Setter 是完全合理的。但是，我建议您改进`String.Format`以下内容的使用：

```
String.Format("<a href=\"{0}\">{1}</a>",this.Link, this.Text); 
```

# c++ - 派生类中的私有虚函数

> ID：13618987
> 
> 赞同：6
> 
> 时间：2012-11-29T04:45:45.760
> 
> 标签：c++

> **可能重复：**
> [C++：覆盖公共\私有继承](https://stackoverflow.com/questions/5753833/c-overriding-public-private-inheritance)

```
class base {
public:
  virtual void doSomething() = 0;
};

class derived : public base {
private:   // <-- Note this is private

  virtual void doSomething()
  { cout << "Derived fn" << endl; }
}; 
```

现在，如果我执行以下操作：

```
base *b = new child;
b->doSomething();    // Calls the derived class function even though that is private 
```

问题：

1.  即使它是私有的，它也能够调用派生类函数。这怎么可能？

现在，如果我将继承访问说明符从 public 更改为 protected/private，则会出现编译错误：

```
'type cast' : conversion from 'Derived *' to 'base *' exists, but is inaccessible 
```

注意：我知道继承访问说明符的概念。因此，在第二种情况下，由于它是私有/受保护的，因此无法访问。但我想知道第一个问题的答案。任何输入将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T04:54:59.753

访问控制是在编译时实现的，而不是在运行时实现的，而多态性（包括使用虚函数）是一种运行时特性。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-29T04:57:13.777

在第一种情况下，访问检查是在调用所通过的静态类型上完成的（因为它总是这样做的）。的静态类型`*b`是`base`，在这种情况下`doSomething()`是`public`。

C++03 11.6 “访问虚函数” 说：

> 虚函数的访问规则（第 11 条）由其声明决定，不受稍后覆盖它的函数规则的影响。[例子：
> 
> ```
> class B {
> public:
>     virtual int f();
> };
> 
> class D : public B {
> private:
>     int f();
> };
> 
> void f()
> {
>     D d;
>     B* pb = &d;
>     D* pd = &d;
> 
>     pb->f(); //OK:B::f()is public,
>              // D::f() is invoked
>     pd->f(); //error:D::f()is private
> } 
> ```
> 
> ——结束示例]
> 
> 在调用点使用用于表示为其调用成员函数的对象的表达式类型（上例中的 B*）检查访问。成员函数在定义它的类中的访问（上例中的 D）通常是未知的。

特别要记住，“成员函数在定义它的类中的访问（上例中的 D）通常是未知的”。通常，在您的示例中`b->doSomething();`调用的位置，编译器可能根本不知道`derived`(or `child`)，更不用说访问是否`derived::doSomething()`是私有的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T05:12:05.170

私有函数意味着对外部世界和派生类隐藏。尽管您覆盖了父 DoSomething 的访问说明符并将其设为私有，但您正在实例化一个基类；所以在第一种情况下，您可以调用 base 的 DoSomething，因为它是公开的。如果您想阻止人们从您的派生类派生，则可以使用此方案。

在第二种情况下，`private`访问说明符使基类的成员不暴露给派生类的用户，这实际上使派生类变得无用。

# java - 如何从 Maven 仓库中的 jar 中删除版本信息

> ID：13618991
> 
> 赞同：0
> 
> 时间：2012-11-29T04:46:06.000
> 
> 标签：java, maven

今天，如果我们使用 Maven 构建，jar 名称是 ${project.artifactId}-${project.version}。在本地存储库中，结构如下：

```
-\.m2
---\repository
-----\com
-------\someproject
---------\1.0
-----------\someproject-1.0.jar 
```

我想知道路径已经准确地说明了版本，为什么 jar 名称应该这样命名。是否有任何方法可以删除存储库中 jar 名称中的版本信息？我尝试了，但是将 jar 复制到存储库时它不起作用。

我搜索了这个问题，发现了很多类似的问题。打包成war或者ear好像没问题，jar呢？几年前有些人回答不可能，所以我想知道今天是否有一些解决方案。

我更喜欢：-.m2 ---\repository -----\com -------\someproject ---------\1.0 -----------\一些项目.jar

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T04:57:59.827

maven 约定是为工件命名`<artifact>-<version>.jar`。虽然在文件夹和工件中包含版本号似乎是多余的，但这是有原因的。

它存储在存储库中具有版本号的文件夹中的原因是因为可能还有其他文件与工件相关联（源、pom 等）。

将版本号附加到工件以及分发应用程序也很有意义。当这些库与您的应用程序一起打包时，无需查看 pom 就知道打包了哪些版本的依赖项很有用（查看依赖关系图时也是如此）。

即使您可以使工件名称没有附加版本号，也不建议这样做，因为我确信有些事情会因为它们依赖于这些 maven 约定而中断（maven 更多的是关于配置的约定）。

# android - 谁能知道如何使用javascript将html5 div标签数据保存为图像

> ID：13618993
> 
> 赞同：2
> 
> 时间：2012-11-29T04:46:13.473
> 
> 标签：android, cordova

谁能知道如何使用javascript将html5 div标签数据保存为图像...

我正在使用phonegap做项目..

我只想安排所有画布数据，包括画布内的图像，上面有一些文本，并将其保存为具有任何格式 .jpg、png 等的完整图像。

有人知道吗？如何在 android phonegap 中使用 html5 和 javascript 来完成它？

让我知道有没有人建议我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T04:58:47.863

我相信您正在寻找 canvas.toDataURL 或 canvas.toBlob ( [https://developer.mozilla.org/en-US/docs/DOM/HTMLCanvasElement](https://developer.mozilla.org/en-US/docs/DOM/HTMLCanvasElement) )。这假定您一开始就在画布中拥有一切。如果您希望在画布上抛出一些 DOM 元素（即您想要非画布页面的 .png），您可能正在寻找这个答案[Using HTML5/Canvas/JavaScript to take screenshots](https://stackoverflow.com/questions/4912092/using-html5-canvas-javascript-to-take-screenshots)。