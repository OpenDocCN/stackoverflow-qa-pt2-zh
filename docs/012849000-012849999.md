# StackOverflow 问答 12849000-12849999

# javascript - 我可以在 javascript 的一个语句中运行两个 for 循环吗？

> ID：12849000
> 
> 赞同：4
> 
> 时间：2012-10-11T21:44:18.937
> 
> 标签：javascript, for-loop

我可以在 javascript 的一个语句中运行两个 for 循环吗？我会这样做吗？

```
for(initialize1,initialize2; condition1,condition2; incrementation1,incrementation2) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T21:47:21.513

你指的是哪一个？这将执行一个循环并等待条件 1 或条件 2 失败：

```
for (initialize1, initialize2; condition1 && condition2; incrementation1, incrementation2) 
```

这将执行嵌套在另一个循环中的一个循环：

```
for (initialize1; condition1; incrementation1)
    for (initialize2; condition2; incrementation2) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-11T21:57:30.043

是的，您可以执行这样的 for 循环，但是您只有一个条件进行检查。如果你可以让它只检查所有变量的一个条件，例如 And (&&) 条件表达式，这将正常工作，或者如果你只是使用其他变量做其他事情，它也可以正常工作。

试试看：

```
for(var i=j=k=0; j<9 && k<12;i++, j++, k++){
    console.log(i,j,k);      
    i = 12;
} 
```

@samdonly1

总是你只会有一个评估，但你可以做这样的事情：

```
function evalFor(i, j, k){
   if (k == 9) return false;
   else if (j == 7) return false;
   else if (i == 12 && j == 6) return false;
   else return true;
}
for(var i=j=k=0; evalFor(i, j, k);i++, j++, k++){
    console.log(i,j,k);     
    i = 11;
} 
```

在这种情况下，您可以在其他函数中检查变量 i、j、k 并决定循环是停止还是继续。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-13T07:57:45.900

我的意思是，我这样做的方式基本上是尝试访问位置 [0,2],[1,1],[2,0] 的嵌套数组我的解决方案很简单。每次循环运行一个计数器

```
let matrix = [
  [1,2,3],
  [4,5,6],
  [7,8,9]
]
let leftDiag = []
let rightDiag = []
let counterJ =matrix.length-1
for(let i =0;i<matrix.length; i++){
  leftDiag.push(matrix[i][i])
  rightDiag.push(matrix[i][counterJ])
  console.log(i, counterJ)
  counterJ-=1
}
console.log(leftDiag)
console.log(rightDiag)
```

# facebook - 类似 Facebook 的“自时间”计算算法

> ID：12849001
> 
> 赞同：0
> 
> 时间：2012-10-11T21:44:19.640
> 
> 标签：facebook, algorithm, timestamp

在 Facebook 上，每条评论或其他用户事件都有一个时间戳。但它并没有被列为简单的日期，而是以人性化的字符串形式呈现。例如，如果现在是 08:38，评论是在 08:31 发表的，Facebook 不仅会告诉你时间，还会说“7 分钟前”。

是否有 Facebook 算法（或类似算法）的开源实现，它获取事件数据、当前日期并以对人类友好的形式告诉它已经过去了多长时间？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T21:46:36.923

Pretty date [http://ejohn.org/projects/javascript-pretty-date/](http://ejohn.org/projects/javascript-pretty-date/)是一个很好的 JavaScript 库

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T01:55:52.433

您可以深入研究[timeago](http://timeago.yarp.com/) jQuery插件的[源代码](https://github.com/rmm5t/jquery-timeago/blob/master/jquery.timeago.js)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T22:17:05.330

我认为最好的应该是这个：

1.  存储发表评论时的时间戳（例如- 3:45 12-10-2012）
2.  获取当前系统时间
3.  获取两者之间的差异 .ie （当前时间 - 评论时间）。

大多数语言都提供 datediff 方法。就像在 PHP 中一样，你可以像[这样使用它](http://php.net/manual/en/function.date-diff.php)

# php - 如何在数据库中插入正确的值

> ID：12849010
> 
> 赞同：4
> 
> 时间：2012-10-11T21:44:53.837
> 
> 标签：php, javascript, jquery, sql, mysqli

我在这里有一个 jsfiddle：http: [//jsfiddle.net/ybZvv/58/](http://jsfiddle.net/ybZvv/58/)

请按照小提琴中的步骤操作：

1：打开小提琴时，单击“添加问题”按钮两次，这将追加 2 行。

2：在第一行选择答案按钮“A”和“C”，在第二行选择答案按钮“A”、“B”和“E”。选择的每个答案按钮的文本输入值显示在下方。

现在我要做的是将问题编号和答案值发布到数据库中。

发布时数据库应如下所示：

问题表：

```
QuestionId (Question Number)
1
2 
```

答案表：

```
AnswerId (auto)  QuestionId  Answer
1                1           A
2                1           C
3                2           A
4                2           B
5                2           E 
```

我的问题是，如何在下面的 mysqli 代码中发布答案和正确的问题编号，以便在“问题”和“答案”表中插入这些答案和问题编号？

下面我设置了 mysqli/php 代码，但它需要重新调整，以便它可以正确插入答案和相关的问题编号。

```
$i = 0;
$c = count($_POST['numQuestion']); //count number of rows

for($i = 0;  $i < $c; $i++ ){

$questionsql = "INSERT INTO Question (QuestionId) 
    VALUES (?)";

    if (!$insert = $mysqli->prepare($questionsql)) {
      // Handle errors with prepare operation here
    }

$insert->bind_param("i", $_POST['numQuestion'][$i]);

        $insert->execute();

        if ($insert->errno) {
          // Handle query error here
        }

        $insert->close();

        $lastID = $mysqli->insert_id;

         $answersql = "INSERT INTO Answer (QuestionId, Answer) 
    VALUES (?, ?, ?)";

      if (!$insertanswer = $mysqli->prepare($answersql)) {
      // Handle errors with prepare operation here
    }  

    $insertanswer->bind_param("is", $lastID, $_POST['value'][$i]);

        $insertanswer->execute();

        if ($insertanswer->errno) {
          // Handle query error here
        }

        $insertanswer->close();

} 
```

我为上述场景做了一个 var_dump($_POST) ，这就是它的输出：

```
array(2) { 
            ["numQuestion"]=> array(2) { 
                                        [0]=> string(1) "1" 
                                        [1]=> string(1) "2" 
                                       }
           ["submitDetails"]=> string(14) "Submit Details" 
           ["value"]=> array(4) { 
                                    ["answerARow"]=> string(1) "A" 
                                    ["answerCRow"]=> string(1) "C" 
                                    ["answerBRow"]=> string(1) "B" 
                                    ["answerERow"]=> string(1) "E" 
                                } 
        } 
```

我收到 2 个相同的错误：

> 警告：mysqli_stmt::execute(): (23000/1048)：第 257 行 /.../ 中的“答案”列不能为空警告：mysqli_stmt::execute():(23000/1048):“答案”列在第 257 行的 /.../ 中不能为空

更新：

我已经更新了 fiddle 以包含多维数组，对不起，我忘了把它放进去，但代码行如下：

```
var $newBtn = $(("<input class='answerBtnsRow answers' type='button' style='display:%s;' onclick='btnclick(this, " + gQuestionIndex + ");' />").replace('%s',$this.is(':visible')?'inline-block':'none')).attr('name', "value[" + gQuestionIndex + "][]").attr('value', $this.val()).attr('class', $this.attr('class')).attr('id', $this.attr('id')+'Row'); 
```

我的建议是使用这种格式的多维数组：value[n][]，其中 n 是问题编号。使用此新设置，您应该最终得到以下输入字段：

```
<input type="hidden" value="A" name="value[1][]">
<input type="hidden" value="B" name="value[1][]">
<input type="hidden" value="A" name="value[2][]">
<input type="hidden" value="C" name="value[2][]">
<input type="hidden" value="E" name="value[2][]"> 
```

请注意，所选值在 value 属性中编码。name 属性只包含该值所属的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T22:14:11.133

似乎 $POST 没有所有信息，我建议您更改帖子结构以将问题与答案联系起来，如下所示：

```
array(2) { 
            ["numQuestion"]=> array(2) { 
                                        [0]=> string(1) "1" 
                                        [1]=> string(1) "2" 
                                       }
           ["submitDetails"]=> string(14) "Submit Details" 
           ["question_1"] => array(2) {
                                        [0] => string(1) "A"
                                        [1] => string(1) "C"
                                      }
           ["question_2"] => array(2) {
                                        [0] => string(1) "A"
                                        [1] => string(1) "B"
                                        [2] => string(1) "E"
                                      }
        } 
```

现在，如果帖子具有这种结构，您可以执行以下操作来插入数据：

```
$numQuestionArray = $_POST["numQuestion"];

for($i =0; $i < count($numQuestionArray);$i++)
{
    $questionId = $numQuestionArray[$i];

    $questionsql = "INSERT INTO Question (QuestionId) VALUES (?)";

    if (!$insert = $mysqli->prepare($questionsql)) {
      // Handle errors with prepare operation here
    }

    $insert->bind_param("i", $questionId);

    $insert->execute();

    if ($insert->errno) {
      // Handle query error here
    }

    $insert->close();

    $lastID = $mysqli->insert_id;

    $questionAnswerPostStr = "question_".$questionId;

    $answerArray = $_POST[$questionAnswerPostStr];

    for($j =0; $j < count($numQuestionArray);$j++)
    {
        $answer = $numQuestionArray[$j];

        $answersql = "INSERT INTO Answer (QuestionId, Answer) VALUES (?, ?)";

        if (!$insertanswer = $mysqli->prepare($answersql)) {
          // Handle errors with prepare operation here
        }  

        $insertanswer->bind_param("is", $lastID, $answer);

        $insertanswer->execute();

        if ($insertanswer->errno) {
          // Handle query error here
        }

        $insertanswer->close();
    }
} 
```

但是，我仍然认为 question_id 应该在表上自动递增，而不是插入 $POST 值。

# php - 数据库查询未按定义获取所有记录

> ID：12849011
> 
> 赞同：0
> 
> 时间：2012-10-11T21:44:55.737
> 
> 标签：php, codeigniter, foreach

# 模型

```
 $id = $this->session->userdata('id');

    $q = $this->db->get_where('shipping_address', array('customer_id' => $id));

    if ($q->num_rows == 0)
    {
        $data['id'] = 'You dont have a shipping address saved.';

    } else {
        foreach ($q->result() as $row) 
            {
            $data['first'] = $row->firstname;
            $data['last'] = $row->lastname;
            }
    }
    return $data; 
```

# 控制器

```
 $this->load->model('Customer_accounts');

        $customer = $this->Customer_accounts->get_customer_info();
        $ship = $this->Customer_accounts->shipping_address();

        $data = $ship + $customer;

    $this->load->view('account_dashboard/personal_information', $data); 
```

# 看法

```
<?php foreach ($ship as $row) : ?>
    <table class="fixCap" border="0" cellspacing="0" cellpadding="0">
      <tr>
        <td><?php echo $row['firstname'] . $row['lastname']; ?></td> 
      </tr>

           . . .

      </tr>
    </table>
<?php endforeach; ?> 
```

# var_dump

只显示`array`表的 1`rows`但它应该显示包含定义的 2 行`customer_id`

# 问题

无法将所有数据库传递`data`给`foreach`我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T21:48:25.503

利用：

```
$data = array_merge($ship, $customer); // they will merged as one array 
```

或者如果你想让它们分开你可以这样做

```
$data = array();
$data['ship'] = $ship;
$data['customer'] = $customer;

//In the view
//ship
foreach($data['ship'] as $ship)
{
   //Ship values
}

//customer
foreach($data['customer'] as $customer)
{
   //Customer value
} 
```

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T21:48:27.843

您实际上并没有使用您的代码从数据库中提取结果。

尝试这样的事情

```
$ret =  $q->get()->result(); 
```

foreach($ret as $row) {

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T21:55:00.870

问题出在我`Model`将上面的代码替换为

# 模型

```
return $this->db->get_where('shipping_address', array('customer_id' => $id))->result(); 
```

而在我的

# 看法

```
#I echoed the vars as objects 
$row->firstname 
```

# asp.net - Formview - 检查值是否在数据绑定列表中

> ID：12849012
> 
> 赞同：0
> 
> 时间：2012-10-11T21:45:00.217
> 
> 标签：asp.net, gridview, drop-down-menu, objectdatasource, formview

我的 FormView（学生）有一个 ObjectDataSource，FormView 中的 DropDownList（名称）有另一个 ObjectDatSource。如果 DropDownList 的源不包含与 formview 的源匹配的名称值，我想显示“不可用”。目前我有这个代码，如果数据源返回一个 NULL 值，它就可以工作。当 FormView 名称值不在 DropDownList 的数据绑定列表中时，如何将其更改为显示“不可用”？

```
<asp:FormView ID="Students" runat="server" DataSourceID="Students_DataSource">
    <ItemTemplate>
        <asp:Label ID="lblName" runat="server" Text='<%# Eval("Name") %>' />
    </ItemTemplate>
    <EditTemplate>
        <asp:DropDownList ID="ddlName" runat="server" 
        SelectedValue='<%# If(Eval("Name") IsNot Nothing, Eval("Name"), "Not Available") %>' 
                    DataSourceID="fvAllNames" runat="server" DataTextField="Name" DataValueField="Name" />        
    </EditTemplate>
</asp:FormView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T17:14:33.877

```
public class MyItem
{
    public string Name { get; set; }
    public int UserId { get; set; }
}

public void MethodThatLoadsMyData
{
    var originalListData = MethodThatFetchesMyData(45);
    myDropDownList.DataSource = MethodThatBumpsTwoItemDatasources(myOuterList, originalListData);
    myDropDownList.DataBind();
}

public void MethodThatBumpsTwoItemDatasources(List<MyItem> outerList, List<MyItem> dropdownList)
{
    /*This modifies the original result set from the database that you were going
    to use to populate your dropdown list. It compares the outer list (whatever that is)
    with the result set, and adds items called "Not Available" when there is an item in the
    outer list that doesn't exist in the dropdownlist */

    var result = new List<Item>();
    foreach (var item in listA)
    {
        var matched = false;
        foreach (var itemB in listB.Where(itemB => itemB.Id == item.Id))
        {
            matched = true;
            result.Add(item);
        }
        if (!matched)
        {
            result.Add(new Item
            {
                Name = "Not Available",
                Id = 0
            });
        }
        matched = false; 
    }
    return result;
}

public List<MyItem> MethodThatFetchesMyData(int myParameter)
{
    //gets my data from the database and builds dto objects
    var sql = "my_stored_procedure_or_sql";
    var list = new List<MyItems>();
    using(var conn = new SqlConnection(myConnectionString))
    {
        using(var comm = new SqlCommand(sql, conn))
        {
            //do your normal client setup here (sql type, parameters, etc//
            var parameters = SqlParameter[1];
            parameters[0] = new SqlParameter("@ParameterName", DbType.Int);
            parameters[0].Value = myParameter;
            comm.Parameters = parameters;
            comm.CommandType = CommandType.StoredProcedure;
            conn.Open();
            using(var rdr = comm.ExecuteReader())
            {
                while(rdr.Read())
                {
                    list.Add(
                        new MyItem{
                            Name = rdr["NameColumn"].ToString(),
                            UserId = rdr["ID"]
                        });
                }
                return list;
            }
        }
    }
} 
```

In your databound controls, you can get at the new values in the itemtemplate with your typical

```
<%#Eval("Name") %> <%#Eval("UserId") %> 
```

What I'm actually doing here is binding the controls to a list of actual objects instead of the datatable that is constructed with the datasource control. By doing that, I can do whatever I need to do with those lists before binding it to the control. In this case, I bump the two lists together and add items for those that do not exist in one list but exist in the other. Not sure if this is exactly what you needed, but this should be enough to give you some ideas.

# c++ - C++ 嵌套类，访问父亲变量

> ID：12849013
> 
> 赞同：8
> 
> 时间：2012-10-11T21:45:02.837
> 
> 标签：c++, class, nested, parent

标题已经说了很多，

但基本上我想做的是以下（示例）：

我有一个名为 A 的类，还有一个名为 B 的类，如下所示：

```
class A
{
   int a;

   class B
   {
      void test()
      {
         a = 20;
      }
   };
}; 
```

如您所见，我的目标是 B 类可以访问 A 类，因为它是一个嵌套类。不是这行不通，因为 B 无权访问 A，但它如何获得访问权？

谢谢你

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-11T21:49:54.053

尽管您在 A 中声明了 B 类，但 A 类和 B 类仍然是完全独立的。唯一的区别是现在要引用 B，必须执行 A::B。

要让 B 访问 A 的东西，您应该使用组合或继承。对于组合，给 B 一个对 A 对象的引用，如下所示：

```
class B {
public:
  B(const A& aObj) : aRef(aObj) {
    cout << aRef.a << endl;
  }
private:
  const A& aRef;
}; 
```

对于继承，是这样的：

```
class B: public A { // or private, depending on your desires
  B() {
    cout << a << endl;
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T21:49:31.027

C++ 中的内部类与 Java 中的外部类无关。对于`A::B`要访问对象成员的`A`实例，它需要在`A`某个地方有一个实例，就像`B`不是嵌套类一样。的实例`A::B`没有`A`;的任何隐式实例 你可以有很多`A::B`没有任何实例`A`存在的实例。

`A`传递to的实例`test`，然后使用它来访问`a`成员：

```
void test(A& a_instance)
{
  a_instance.a = 20;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T21:49:44.287

类是类型，类型没有数据。实例有数据，但 的实例`A`（在您的示例中）不包含 的实例`B`，并且 的实例`B`不知道 的任何实例`A`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T21:51:24.600

选择

*   是`B`一个孩子`A`而不是包含在`A`
*   have`B`的构造函数对`A`创建它的实例进行引用（首选）

现在，如果变量`a`是私有的，这仍然无济于事。您将需要访问者 a 或朋友关系。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-11T21:49:22.027

C++ 嵌套类不像 java 嵌套类，它们不属于 A 的实例，而是静态的。所以 a 那时不存在

# android - AsyncTask 和 InputStream 的 Android 问题

> ID：12849014
> 
> 赞同：0
> 
> 时间：2012-10-11T21:45:03.930
> 
> 标签：android, android-asynctask, inputstream

很长一段时间以来，我一直试图自己解决这个问题。通过反复试验和研究，但我似乎无法弄清楚。我对异步和网络连接以及 stuch 非常糟糕，所以这可能是我正在寻找的简单的东西。无论如何...我将粘贴一些相关的代码示例和解释。

我的问题的快速背景。我正在为我的应用程序使用 Rotten Tomatoes API，并且正在使用 GSON 来解析他们的数据。我最初的目标是 2.3，这很好。然后我决定支持ICS，当然也遇到了“UI线程上没有网络操作”——于是我开始钻研AsyncTask。

这是我的 InputStream 方法：

```
private InputStream retrieveStream(String url) {

    DefaultHttpClient client = new DefaultHttpClient();

    HttpGet getRequest = new HttpGet(url);

    try {

        HttpResponse getResponse = client.execute(getRequest);
        final int statusCode = getResponse.getStatusLine().getStatusCode();

        if (statusCode != HttpStatus.SC_OK) {
            Log.w(getClass().getSimpleName(),
                    "Error " + statusCode + " for URL " + url);
            return null;
        }

        HttpEntity getResponseEntity = getResponse.getEntity();
        return getResponseEntity.getContent();
    }
    catch (IOException e) {
        getRequest.abort();
        Log.w(getClass().getSimpleName(), "Error for URL " + url, e);
    }

    return null;
} 
```

这在我的主要活动中运行良好，现在在尝试将其“转换”为 AsyncTask 时给我带来了问题。我一直这样称呼它：

```
InputStream source = retrieveStream( url parameter ); 
```

然后我尝试将该方法移动到我的 AsyncTask 类中，并像这样调用它：

```
private PerformMovieSearch performSearch = new PerformMovieSearch(this);
InputStream source = performSearch.retrieveStream(movieQueryUrl); 
```

但这并没有削减它，仍然会收到有关在 UI 上执行网络操作的错误。我需要弄清楚的是如何从我猜的 AsyncTask 中调用“retrieveStream”。目前该类看起来像这样：

```
package net.neonlotus.ucritic;

[imports]

public class PerformMovieSearch extends AsyncTask<String, Void, String> {

private final Context context;
private ProgressDialog progressDialog;

public PerformMovieSearch(Context context){
    this.context = context;
}

@Override
protected String doInBackground(String... urls) {
    retrieveStream(urls[0]);

    return null;

}

@Override
protected void onPreExecute() {
    progressDialog= ProgressDialog.show(context, "Please Wait","Searching movies", true);

}

@Override
protected void onPostExecute(String result) {
    super.onPostExecute(result);
    progressDialog.dismiss();

    MyActivity.mListAdapter.notifyDataSetChanged();
}

public InputStream retrieveStream(String url) {

    DefaultHttpClient client = new DefaultHttpClient();
    HttpGet getRequest = new HttpGet(url);

    try {
        HttpResponse getResponse = client.execute(getRequest);
        final int statusCode = getResponse.getStatusLine().getStatusCode();

        if (statusCode != HttpStatus.SC_OK) {
            Log.w(getClass().getSimpleName(),
                    "Error " + statusCode + " for URL " + url);
            return null;
        }

        HttpEntity getResponseEntity = getResponse.getEntity();
        return getResponseEntity.getContent();
    } catch (IOException e) {
        getRequest.abort();
        Log.w(getClass().getSimpleName(), "Error for URL " + url, e);
    }

    return null;
} 
```

}

“doinbackground”是需要改变的......但我似乎无法找到一种直接的方法来让它正常工作。我正在执行使用

```
new PerformMovieSearch(this).execute(movieQueryUrl); 
```

我知道这是很多东西，可能会令人困惑......但如果有人知道如何从本质上异步执行retrieveStream 方法，那就太好了。就像我说的，我尝试了很多东西，做了很多研究，就是想不出任何有用的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T22:07:03.537

关键是，您不了解 asynctask 的工作原理！

您必须阅读指南进程和线程：http: [//developer.android.com/guide/components/processes-and-threads.html](http://developer.android.com/guide/components/processes-and-threads.html)

但是，好吧，让我试着帮助你。

在 doInBackground 上，您正确地调用了方法 retrieveStream，但您对流没有做任何事情。因此，您必须处理流，然后将其返回。正如你所说，你期待一个 JSON，我假设你会收到一个字符串，所以你的 retrieveStream 的代码应该是这样的：

```
public String retrieveStream(String url) {

    DefaultHttpClient client = new DefaultHttpClient();
    HttpGet getRequest = new HttpGet(url);

    try {
        HttpResponse getResponse = client.execute(getRequest);
        final int statusCode = getResponse.getStatusLine().getStatusCode();

        if (statusCode != HttpStatus.SC_OK) {
            Log.w(getClass().getSimpleName(),
                    "Error " + statusCode + " for URL " + url);
            return null;
        }

        HttpEntity getResponseEntity = getResponse.getEntity();
        String jsonString = EntityUtils.toString(getResponseEntity);
        return jsonString;
    } catch (IOException e) {
        getRequest.abort();
        Log.w(getClass().getSimpleName(), "Error for URL " + url, e);
    }

    return null;
} 
```

看我把返回类型改成了String。也许，您应该将名称更改为retrieveMoviesJSON 或类似的名称。

你应该把你的 AsyncTask 改成这样：

```
class PerformMovieSearch AsyncTask<String, Void, ArrayList<Movie>>() {

            @Override
            protected void onPreExecute() {
                progressDialog= ProgressDialog.show(context, "Please Wait","Searching movies", true);
            }

            @Override
            protected ArrayList<Movie> doInBackground(String... params) {
                String moviesJson = retrieveStream[params[0]];
                JSONObject moviesJson = new JSONObject(moviesJson);
                ArrayList<Movie> movies = new ArrayList<Movie>();
                /*
                 * Do your code to process the JSON and create an ArrayList of films.
                 * It's just a suggestion how to store the data.
                 */
                return movies;
            }

            protected void onPostExecute(ArrayList<Movie> result) {
                progressDialog.dismiss();
                //create a method to set an ArrayList in your adapter and set it here.
                MyActivity.mListAdapter.setMovies(result);
                MyActivity.mListAdapter.notifyDataSetChanged();
            }
        } 
```

你可以像以前一样打电话。

清楚吗？需要更多解释吗？

[]s 内托

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T22:08:45.907

你看到什么样的行为是出乎意料的。通过扫描您的代码，它看起来可能已编译并运行，但我猜您的 ListAdapter 永远不会使用新数据进行更新（即您可能试图在 ListView 或 GridView 中显示结果，但没有显示任何内容）。那是对的吗？还是您仍然收到主线程上的网络错误？

您正在使用 HTTP 客户端检索数据，然后不对其进行任何操作。你可以解决它的一种方法是构建你的代码，这样：
1）你的扩展 AsyncTask 的类有一个构造函数，它接受一个 ListAdapter 对象
2）你的主 Activity 将创建一个 AsyncTask 的实例并传入对其 ListAdapter 对象的引用
3）您的 doInBackground 方法将处理所有网络活动并返回结果（您从 Web 服务中提取的数据），以便将其传递给 onPostExecute 方法
4）在 onPostExecute 中，您将拥有从 doInBackground 返回的数据，并且您将拥有构造函数中提供的 ListAdapter，因此解析数据、填充 ListAdapter 并使其无效，以便重绘列表。

请记住，AsyncTask 允许您在 onPreExecute 和 onPostExecute 方法中与 UI 线程进行交互，因此这些是您可以在屏幕上绘制的唯一位置（即填充适配器并使其无效以便重绘）

# windows - 使用 Windows Batch 将带有双引号的字符串回显到输出文件

> ID：12849017
> 
> 赞同：11
> 
> 时间：2012-10-11T21:45:05.183
> 
> 标签：windows, batch-file

我正在尝试使用 Windows 批处理文件重写配置文件。我正在遍历文件的行并寻找我想用指定的新行替换的行。

我有一个将行写入文件的“函数”

```
:AddText %1 %2
set Text=%~1%
set NewLine=%~2%
echo "%Text%" | findstr /C:"%markerstr%" 1>nul
if errorlevel 1 (
  if not "%Text%" == "" (
      setlocal EnableDelayedExpansion
      (
          echo !Text!
      ) >> outfile.txt
  ) else (
     echo. >> outfile.txt
  )
) else (
  set NewLine=%NewLine"=%
  setlocal EnableDelayedExpansion
  (
      echo !NewLine!
  ) >> outfile.txt

)
exit /b 
```

问题是当 %Text% 是嵌入双引号的字符串时。然后它失败了。可能还有其他字符也会导致它失败。我怎样才能让它能够处理配置文件中的所有文本？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-14T16:42:45.180

尝试`"`用. `Text`_`^"`

`^`是转义字符，因此`"`将被视为常规字符

您可以尝试以下方法：

```
:AddText %1 %2
set _Text=%~1%
set Text=%_Text:"=^^^"%

... rest of your code

REM for example if %1 is "blah"blah"blah"
REM _Text will be blah"blah"blah
REM Text will be blah^"blah^"blah 
```

其他可能导致错误的字符（您可以使用上述解决方案解决）是：

```
\ & | > < ^ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-25T12:30:31.780

在 Windows 批处理 shell（命令）中，双引号`^`在标准命令行上转义，但在双引号字符串中带有双引号

```
echo Hello ^"Boy^"
echo "Hello ""Boy""" 
```

（备注：第二行也会在输出中产生外部环绕的双引号）

# javascript - 使用@触发自动完成

> ID：12849018
> 
> 赞同：3
> 
> 时间：2012-10-11T21:45:08.863
> 
> 标签：javascript

我主要是后端开发人员。对javascript来说非常新。所以请原谅我的愚蠢问题，但是当用户在文本字段中键入“@”时，有没有办法触发自动完成。就像它在推特上的表现一样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T21:49:15.003

如果您使用的是直接 javascript，请查看 onkeyup。如果您使用的是 jQuery，请尝试[keyup](http://api.jquery.com/keyup/)。

从那里，您可以检查用户是否输入了“@”，然后进行自动完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-15T14:09:21.960

您可以使用[http://complete-ly.appspot.com轻松完成](http://complete-ly.appspot.com)

只需像这样覆盖函数 onTextChange ：

```
function onTextChange(text) {

   if (text.lastIndexOf('@') == text.length-1) { // ends with...

       // set the options, possibly change the text...
   }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-11T21:53:35.300

给你两个答案：

1.  我认为这篇博文有你所需要的： [Triggered @mention Autocomplete like Facebook、Twitter 和 Google+](http://www.hawkee.com/snippet/9391/)
    Github repo：[https ://github.com/Hawkers/triggeredAutocomplete](https://github.com/Hawkers/triggeredAutocomplete)

2.  还有一个类似的问题：[Twitter-style autocomplete in textarea](https://stackoverflow.com/questions/6157992/twitter-style-autocomplete-in-textarea)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-22T22:00:16.697

为此，我创建了一个[Meteor包。](http://www.meteor.com/)Meteor 的数据模型允许使用自定义渲染列表进行快速多规则搜索。如果您没有将 Meteor 用于您的 Web 应用程序，（我相信）很遗憾，您将找不到任何用于自动完成的出色功能。

使用 自动完成用户`@`，其中在线用户显示为绿色：

![在此处输入图像描述](../Images/d10f3cf6c30a271ddb6dc725cb9d193b.png)

在同一行中，使用`!`元数据和引导图标自动完成其他内容：

![在此处输入图像描述](../Images/3e43d2b25fca9b11a1a92407916b2ee5.png)

分叉、拉动和改进：

> [https://github.com/mizzao/meteor-autocomplete](https://github.com/mizzao/meteor-autocomplete)

# oracle - 如何将 BLOB 转换为 CLOB？

> ID：12849025
> 
> 赞同：10
> 
> 时间：2012-10-11T21:45:54.040
> 
> 标签：oracle, blob, clob

我正在使用 Oracle 11g，并试图找出文本的长度。我通常使用`select length(myvar) from table`，但我不能这样做。

我要查询的表有一个`BLOB`保存字符或照片的列。我想知道我的`BLOB`专栏有多少个字符。

我尝试使用 将 my`BLOB`转换为 char `UTL_RAW.CAST_TO_VARCHAR2(myblob) from table`，但此功能无法正常工作，或者我犯了一个错误。

例如：我`BLOB`有这个词`Section`，当我在数据库中以十六进制形式看到这个时，我看到了`S.e.c.t.i.o.n.`。我不知道为什么每个字母之间都有这些点。然后我使用了这个查询：

```
select UTL_RAW.CAST_TO_VARCHAR2(myblob) 
from table 
```

此查询的结果是`'S'`，它不是 my`BLOB`拥有的完整单词，当我进行此查询时：

```
select length(UTL_RAW.CAST_TO_VARCHAR2(myblob))
from table 
```

结果是`18`，但这个词`Sections`没有 18 个字符。

我试图将 转换`BLOB`为 a `VARCHAR`，尽管我认为我最好的选择是 a`CLOB`因为它可以保存的文本长度超过了限制`VARCHAR`。我试图通过进行此查询来做到这一点（我不确定这是否正确，但这是我在互联网上找到的）：

```
select UTL_RAW.CAST_TO_VARCHAR2(DBMS_LOB.SUBSTR(myblob, 32767, 1))
from table 
```

此查询还返回`'S'`

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-12T07:31:43.940

对于任何来到这个线程并想知道如何将 blob 转换为 clob 的人。这是一个例子。

```
create function clobfromblob(p_blob blob) return clob is
      l_clob         clob;
      l_dest_offsset integer := 1;
      l_src_offsset  integer := 1;
      l_lang_context integer := dbms_lob.default_lang_ctx;
      l_warning      integer;

   begin

      if p_blob is null then
         return null;
      end if;

      dbms_lob.createTemporary(lob_loc => l_clob
                              ,cache   => false);

      dbms_lob.converttoclob(dest_lob     => l_clob
                            ,src_blob     => p_blob
                            ,amount       => dbms_lob.lobmaxsize
                            ,dest_offset  => l_dest_offsset
                            ,src_offset   => l_src_offsset
                            ,blob_csid    => dbms_lob.default_csid
                            ,lang_context => l_lang_context
                            ,warning      => l_warning);

      return l_clob;

   end; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-07-13T22:33:43.347

要将 blob 转换为 clob，请尝试以下操作：

```
SELECT TO_CLOB(UTL_RAW.CAST_TO_VARCHAR2(DBMS_LOB.SUBSTR(MYBLOB,2000))) 
FROM MYTABLE; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-11T23:36:52.750

```
SELECT DBMS_LOB.GetLength( myblob ) length_in_bytes
  FROM table 
```

将以字节为单位返回 BLOB 的长度。听起来您的 BLOB 中的字符数据可能是使用 UTF-16 字符集编码的，因此字节数可能是字符数的两倍（取决于正在使用的 Unicode 版本和存储的特定数据，一些字符可能需要 4 个字节的存储空间，但您处理这些字符的可能性相对较小）。

您可以使用该`DBMS_LOB.ConvertToClob`过程将 BLOB 转换为 CLOB（尽管这是一个过程，您需要在 PL/SQL 块中调用它）。作为该转换的一部分，您几乎肯定需要指定编码数据的字符集——我的假设是您的应用程序使用的是 UTF-16 字符集，但这只是一个假设。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-04-24T09:12:09.207

仅转换为 CLOB：

```
select TO_CLOB(UTL_RAW.CAST_TO_VARCHAR2(YOURCLOB)) from DUAL; 
```

受到克雷格的启发，不受尺寸限制。

# ms-access - “查找不匹配”查询——使用查询而不是表

> ID：12849035
> 
> 赞同：1
> 
> 时间：2012-10-11T21:46:31.180
> 
> 标签：ms-access

我正在使用 Access 2010。

我有一个包含多个表的数据库，每个表都包含不同的教学数据组件。

最终，我想找到“将在即将到来的学期教授一门课程并且以前从未教过书的人”。

目前，我正在通过一系列步骤来做到这一点：

1.  创建一个表（通过查询），其中列出了在即将到来的学期教书的每个人以及他们教的内容（该数据来自多个表）。**(tbl_NewInstructors)**
2.  创建另一个表（通过查询），其中包含曾经教过的每个人的列表（但不包括即将到来的这个学期）。**(tbl_NewInstructors2)**
3.  运行此选择语句：

    ```
    SELECT tbl_NewInstructors.Name, tbl_NewInstructors.Course 

    FROM tbl_NewInstructors

    WHERE (((Exists (SELECT * from tbl_NewInstructors2 

    WHERE tbl_NewInstructors2.Name = tbl_NewInstructors.Name))=False)); 
    ```

4.  得到我的清单！

主要问题是每次我想运行它时都必须创建两个表，而且我宁愿只运行我的两个当前选择查询的查询，而不是对我通过这些查询创建的表的查询。不幸的是，当我尝试对查询运行查询时，它不起作用。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T21:53:00.383

我不确定您是否尝试过此操作，但在 Access 中，当您保存查询时，它就像一个表（实际上是一个“视图”），然后您可以使用另一个查询进行查询。为简单起见，只需保存您在第 1 步和第 2 步中创建的 2 个查询中的每一个，然后从第 3 步运行您的查询，将每个已保存查询的名称替换为 tbl_NewInstructors 和 tbl_NewInstructors2。（当然，您可以保存第 3 步中的查询，并在需要此报告时运行它）。

Most likely, you could create a single SQL to do this, but I think saving the queries will be simpler, and will reuse what you already know how to do.

# c++ - glfwPollEvents() 不会在按键时调用 keycallback

> ID：12849038
> 
> 赞同：3
> 
> 时间：2012-10-11T21:46:40.747
> 
> 标签：c++, opengl, input, glfw

我在下面有代码，如果我使用 glfwGetKey() 似乎可以工作，但它不会退出循环，甚至似乎也不会调用输入函数。我尝试传递 *input 而不是 input，但没有骰子。这可能是什么原因造成的？

```
#include <display.h>
#include <GL/glfw.h>
#include <stdlib.h>
#include <stdio.h>

bool running;

void GLFWCALL input( int key, int action )
{
    //if(key == GLFW_KEY_ESC ){
        running = false;
    //}
printf("%d",key);
}

int main(int argc, char* argv[])
{
running = true;
if(argc==3){
    int width = atoi(argv[1]);
    int height = atoi(argv[2]);
    Display d(width,height);
    glfwSetKeyCallback( *input );
    d.open();
    while(running){
    glfwPollEvents();
    printf("Running");

    }
    printf("\n %d,%d %d\n", width,height,GLFW_KEY_ESC);
    d.close();
    return 1;
}
else {
    printf("Usage: GLFW_play width height");
    return 0;
}

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T03:27:20.467

我认为您的程序的唯一问题是您没有在其他 glfw 函数之前调用 glfwInit() 。

根据[GLFW 用户指南](http://www.glfw.org/GLFWReference276.pdf)的第 5 页，您必须在库中的任何其他函数之前调用 glfwInit 以确保正常运行。

另外，不要传递 *input，只传递输入。

# jquery - 在 Rails 中未触发基本 jquery 功能

> ID：12849041
> 
> 赞同：0
> 
> 时间：2012-10-11T21:46:51.683
> 
> 标签：jquery, ruby-on-rails

我无法让基本的 jQuery 函数在我的 Rails 应用程序中工作。我已将以下代码放入 users.js

```
 $(document).ready(function(){
     $("a").click(function(event){
       alert("hi");
       event.preventDefault();
     });
   }); 
```

当我查看一个页面的源代码时，它包含包含此功能的 users.js，但是单击链接不会导致警报出现。即使我切换到更简单的功能：

```
$(document).ready(function(){
   alert("hi");
}); 
```

警报仍然没有出现。奇怪的是，这个应用程序中已经有功能性的 javascript。如果我将上述任何一个复制到包含其他 javascript 代码的 home.js 中，它就可以正常工作。只有当我创建一个新的 js 文件时它才不起作用。谁能解释发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T21:50:03.113

将此添加到您的页面顶部并尝试`:)`添加脚本的 man simple demo：http: [//jsfiddle.net/vdLU7/](http://jsfiddle.net/vdLU7/)

似乎您缺少 JQ 源，希望它适合原因！

**脚本**

```
 <script type='text/javascript' src='http://code.jquery.com/jquery-1.8.2.js'></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T18:10:53.160

我还没有修复这个错误，但是在进入 StackOverflow 之前我没有正确调试问题。在修复此问题之前，我需要进一步阅读资产管道。

# visual-studio - SSRS - 将 MDX 参数值传递给 SQL 查询

> ID：12849043
> 
> 赞同：1
> 
> 时间：2012-10-11T21:47:18.190
> 
> 标签：visual-studio, reporting-services, parameters, mdx, business-intelligence

我有一个 EmployeeID 参数：

```
="[Employee].[Employee Id].&[12345678912345]" 
```

我有一个调用 EmployeeID 参数的 SQL 查询，如下所示：

```
Where...AND (EmployeeID = @EmployeeID) 
```

然后我进入 sql 数据集的参数列表并将 EmployeeID 的值设置为：

```
=LEFT(RIGHT(Parameters!EmoloyeeID.Value,15),14) 
```

这应该给出 12345678912345。SQL 表中的 EmployeeID 列的数据类型为 nvarchar(25)。

现在，当我使用查找将 Cube 的数据集（我正在处理的 tablix 的数据集）与这个 SQL 数据集连接时，

```
=Lookup(Cube's EmployeeName field, SQL's EmployeeName field, SQL's EmployeeStatus, "SQLDataSet") 
```

我没有输出。我变得空白。（事实上​​，我知道有数据，因为当我在 SSMS 中使用声明为 12345678912345 的 EmployeeID 执行 SQL 查询时，我得到了正确的 EmployeeeName（与 Cube 的 EmployeeName 值匹配）和 EmployeeStatus 值。

我究竟做错了什么？我对 EmployeeID 参数的值操作做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T18:36:22.483

这是一个错字吗？=左（右（参数！EmoloyeeID.Value，15），14）

只是想检查以确保它不是一个简单的修复:-)

# sql - 在 SQLite 中读取大型 SQL 文件

> ID：12849045
> 
> 赞同：0
> 
> 时间：2012-10-11T21:47:23.227
> 
> 标签：sql, database

我正在尝试将一个大型 SQL 文件（约 0.5 GB）读入 SQLite。在我使用 .read "filename" 之后，我得到了

```
Error: near line 25: near "AUTO_INCREMENT": syntax error
Error: near line 52: near "LOCK": syntax error 
```

光标闪烁一会儿，然后整个应用程序关闭。我是否正确读取文件？如果无法打开文件，如何修复错误？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T23:53:24.133

看起来您的文件包含来自不同基于 SQL 的数据库产品的 DDL SQL 语句。如果您需要更多帮助，请发布文件内容（至少是第 25 和 52 行的命令）。

# c# - 多语言应用程序的陷阱信息

> ID：12849046
> 
> 赞同：0
> 
> 时间：2012-10-11T21:47:28.933
> 
> 标签：c#, localization, asp.net-mvc-4, multilingual, globalization

我目前正在开发包含多语言数据的 .net 4.5 应用程序。

我是新手，所以我正在寻找解释概念的资源，例如不同语言的编码、全球化、本地化等。

关于我应该在哪里查找此类信息的任何提示？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-11T22:04:39.727

MSDN - 一如既往 - 是最好的资源：http: [//msdn.microsoft.com/en-us/library/h6270d0z.aspx](http://msdn.microsoft.com/en-us/library/h6270d0z.aspx)。

从我自己的经验中得到的一些问题：

1.  在数据库中使用 unicode 类型。因此，对于 SQL Server，请将您的文本类型设为 nvarchar、ntext 而不是 varchar、text 以将它们作为 unicode。否则会丢失中文等语言的信息

2.  使您的设计灵活，英语中 10 个字符的短语很容易成为德语或法语中的 3-4 倍，使您的按钮灵活（例如用于 html 的滑动门技术），使您的宽度和高度百分比和响应尽可能。

3.  在您的资源文件中，具有数字占位符的复数和单数形式的字符串，例如，如果您有一个短语说明“距离这个地方 2 公里以内”，那么您可能需要将 Km 的资源条目与整个句子分开单数/复数（公里，公里）的场景不要假设您可以只添加一个“s”来表示复数。这不适用于所有语言。有些语言甚至对单数、复数和两个不被视为复数（即阿拉伯语）的对象有特殊情况（请参阅 *Dwayne 的评论以获取关于这一点的有趣内容）*

4.  如果您要为阿拉伯语或希伯来语等语言进行本地化，那么这些是从右到左的，您的整个设计（包括图片）将需要更改方向。在 HTML 中，这与拥有“dir: rtl”属性一样简单（主要是），但有时可能会很棘手。

5.  这不仅仅是关于翻译。会改变的事情包括数字格式、使用逗号分隔符或小数点和千位的句点、前后的货币符号、货币格式、日期格式等...确保所有这些都由 .net 框架使用文化进行格式化当前用户的。

6.  请注意不要在 UI 中对任何字符串进行硬编码。一个方便的技巧是为不使用拉丁字符（中文、俄语、阿拉伯语等）的语言创建资源语言，为该语言创建一个资源文件，并使用来自 Google 的该语言的随机字符串填充所有条目。运行您的应用程序，您将能够轻松发现不是来自资源文件的 UI 部分（它们将是中文字符中间的英文字符）。

7.  这不仅仅是关于用户界面。如果您从后端发送消息，例如来自服务的响应等，则也需要本地化。在某些情况下，甚至需要本地化事件日志中记录的错误消息。确保你考虑到这一点。

8.  Javascript。如果您正在使用大量 javascript 进行 ajaxified 网络，您可能需要使用诸如 jquery 本地化之类的库来帮助本地化。您必须以 JS 键值类型的结构提供资源文件。由于这不如 ASP.NET 标准，因此可能需要您根据需要进行一些即兴创作（例如如何使用资源加载这些文件、一次性或使用 AMD，或者可能创建一个服务返回本地化的字符串，或者让 asp.net 在编译时绑定来自实际资源文件的值等...）

# javascript - 需要帮助了解 Ajax 功能

> ID：12849047
> 
> 赞同：2
> 
> 时间：2012-10-11T21:47:29.683
> 
> 标签：javascript, ajax, xmlhttprequest, onreadystatechange

所以我刚刚写完我的第一个 Ajax 函数。我从谷歌教程和 w3schools 完成了这一切，它终于开始工作了。唯一的问题是我不完全理解正在发生的事情的逻辑，正在寻找解释！

这是我的完整代码

```
function loadPlayer(id)
{
    var xmlhttp;

    if (window.XMLHttpRequest)
        xmlhttp=new XMLHttpRequest();
    else if(window.ActiveXObject)
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");

    xmlhttp.onreadystatechange=function() 
    {
        if (xmlhttp.readyState==4 && xmlhttp.status==200)
            document.getElementById("newPlayer").innerHTML=xmlhttp.responseText;
    };

    xmlhttp.open("GET","http://localhost:8084/gmustudent/players?id=" + id,true);
    xmlhttp.send();
} 
```

我的主要问题是关于我编写此代码的顺序，因为它与每个语句有关。我很困惑，因为在 onreadystatechange 函数中，我正在获取响应文本并将其放入 newPlayer div。但是，直到在此语句之后，我才真正异步地从 url 获取数据。

所以我很困惑，因为我不明白如何将响应文本放在 div 中，如果你还没有得到它。我看到它有效，我只是不明白为什么。因此，如果有人能用简单的术语解释这里发生的事情，我将不胜感激。特别是因为它与我编写语句的顺序以及每条语句的实际作用有关。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T21:53:41.583

这：

```
xmlhttp.onreadystatechange=function() 
    {
        if (xmlhttp.readyState==4 && xmlhttp.status==200)
            document.getElementById("newPlayer").innerHTML=xmlhttp.responseText;
    }; 
```

是一个事件处理程序，这意味着它会在触发事件时执行。在这种情况下，当您提出的请求的状态发生变化时。通过代码的实际流程是：

1.  您在上面的代码中附加该事件处理程序
2.  您提出实际要求
3.  该事件`onreadystatechange`在处理请求时被重复触发（随着状态的变化）
4.  当请求准备好并且正常（该`if`块）时，它将响应文本添加到 div。

因此，您可以看到您在 #1 中附加了事件回调，然后您关心的代码最终在 #4 稍后执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T21:52:34.283

当您将一个*函数*分配给一个对象的`.onreadystatechange`属性时`XHR`，您就是在分配一个这样的*回调函数*。由于名称已经告诉我们，该函数将在稍后从另一个进程或应用程序的另一部分调用。

在这种情况下，它会在几个*Ajax 事件*上被调用。例如，如果要设置请求，是否接收到数据以及整个请求何时完成。这就是为什么你在那里检查`readyState`equals`4`和status 200的原因。

所以代码的顺序在那里并不重要，函数不会立即执行，它只是被引用和稍后调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T21:55:49.043

我在你的代码中添加了一些关于各个部分发生了什么的注释。

```
function loadPlayer(id)
{
    var xmlhttp;

    // This if/else block is trying to get the best request object for you, based on browser(ish).
    if (window.XMLHttpRequest)
        xmlhttp=new XMLHttpRequest();
    else if(window.ActiveXObject)
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");

    // This is declaring a function to run when the state changes on the ajax request.  Note that just because you're creating the function here, does not mean it is running yet.  It will only run when the ajax request triggers it.
    xmlhttp.onreadystatechange=function() 
    {
        // This is checking to see if it is finished. If it isn't finished, you don't have responseText to use.
        if (xmlhttp.readyState==4 && xmlhttp.status==200)
            // Now that the request is actually back, we can take the text from the response and use it.
            document.getElementById("newPlayer").innerHTML=xmlhttp.responseText;
    };

    xmlhttp.open("GET","http://localhost:8084/gmustudent/players?id=" + id,true);
    // Okay, now we're running the request.
    xmlhttp.send();
} 
```

如果你愿意，你可以看到你为 onreadystatechange 做的函数被调用，只需`console.log(xmlhttp.readyState);`在函数的第一行，`if`块上方放置一个语句。

# android - 一旦两者都完成，我如何启动两个加入共同执行的异步线程？

> ID：12849048
> 
> 赞同：3
> 
> 时间：2012-10-11T21:47:29.673
> 
> 标签：android, asynchronous

我正在为以下场景寻找设计模式或方法。我希望启动两个独立的后台线程，以便从不同来源检索数据。然后，我希望在两个后台线程都完成工作后调用一种方法（在 UI 线程上）。由于来自两个来源的数据必须结合起来才能发挥作用，所以我必须等到两者都完成检索后才能操作数据。如何在 Android 平台上实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T14:57:41.810

**编辑：**我的第一个版本一直困扰着我，我不喜欢添加必要的布尔值，所以这是另一个版本。`this`从`onPostExecute`每个添加的任务中调用它。

```
ArrayList<AsyncTask> tasks;

public void doStuffWhenDone(AsyncTask finishedTask)
{
    tasks.remove(finishedTask);
    if(tasks.size() > 0)
        return;

    ... do stuff
} 
```

我也会保留旧的，因为它们都可以工作，但我认为上面的内容要干净得多。现在去整理我早期的一个项目。

```
ArrayList<AsyncTask> tasks;
boolean hasBeenDone = false;

public void doStuffWhenDone()
{
    for(int i=0;i<tasks.size();i++)
        if(hasBeenDone || (tasks.get(i).getStatus() != AsyncTask.Status.FINISHED))
            return;

    hasBeenDone = true;
    ... do stuff
} 
```

无论您拥有多少任务，它都可以轻松扩展，并且不需要线程来处理线程。只需在每个任务结束时调用该方法。如果它不是最后一个完成，什么都不会发生。

编辑：好点，但我认为它不需要是原子的。由于两个 AsyncTasks 的`onPostExecute`方法都在 UI 线程上运行，它们将被一个接一个地调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T12:24:22.043

使用[CountDownLatch](https://developer.android.com/reference/java/util/concurrent/CountDownLatch.html)，如下所示：

```
CountDownLatch barrier = new CountDownLatch(2); // init with count=2
startWorkerThread1(barrier);
startWorkerThread2(barrier);
barrier.await(); // it will wait here until the count is zero
doStuffWithTheResult(); 
```

当工作线程完成时，从中调用**barrier.countDown()**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T22:56:39.197

您可以使用`AsyncTask`和`int`来了解这两项工作是否已完成...

# encryption - 使用特定密钥加密并使用另一个特定密钥解密

> ID：12849050
> 
> 赞同：1
> 
> 时间：2012-10-11T21:47:49.700
> 
> 标签：encryption, encoding, cryptography

有一些加密方法允许我使用特定的唯一编码密钥（*写入密钥*）加密字符串数据并将其解码为另一个特定的解码密钥（*读取密钥*）？

例如：假设我们有字符串`Hello World`。所以我们有两个键，一个用于编码（like `John`），另一个用于解码（like `Doe`）。所以我们创建了一个编码版本的字符串，如：

***注意**：不限于 PHP，这对我来说只是一个简单的例子......*

```
$string = "Hello World";
$encoded = encode($string, "John", "Doe");
//@function encode(string data, string write_key, string read_key);
//@return string "abcdef123456" -- supposing that it is the encoded string! 
```

现在我们将新编码的`Hello World`数据字符串作为`abcdef123456`. 现在，如果我们尝试用*写键*读取这个字符串，我们将不会得到原始版本，而是一个奇怪的版本，或者只是一个像`invalid read key`.

```
$decoded = decode($encoded, "John");
//@function decode(string data, string read_key);
//@return false -- invalid read key! or just a strange result data

$decoded = decode($encoded, "Doe");
//@return string "Hello World" 
```

*注意：*我只需要知道是否有类似的加密项目，但如果你知道一个库，也可以。我的项目需要它。我知道这可能是用密钥散列，但原始结果永远无法返回。而且我也知道*读写密钥*编码，但这并不是我真正需要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T22:07:49.130

您正在谈论[公钥密码学](http://en.wikipedia.org/wiki/Cryptography#Public-key_cryptography)。

要建议一个库，您应该指定您将在项目中使用的语言。

# java - 键入不匹配的 Java

> ID：12849052
> 
> 赞同：0
> 
> 时间：2012-10-11T21:48:08.493
> 
> 标签：java

我有一个名为 DictEntry 的单独类。在我自己的课堂词典中，我有

```
private LinkedList<DictEntry> dictList = new LinkedList<DictEntry>(); //initiate linked list
private int sizeOfArray; //variable for size of Array [must be prime number]
private DictEntry table[] = new DictEntry[sizeOfArray]; // array of type DictEntry
table[keyCode]= dictList.add(pair); //[ERROR] Type MissMatch, Cannot Convert boolean to type DictEntry 
```

我已经将数组和链表声明为 DictEntry 类型，为什么它仍然要求布尔值？

当我将 LinkedList 声明为 String 并使用 .add() 添加字符串时，没有问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T21:49:55.443

嗯，是的......[`LinkedList.add`](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedList.html#add%28E%29)返回一个`boolean`（总是`true`）。您不能将该返回值分配给数组，因为类型不匹配。目前尚不清楚您*要做*什么……也许您想要：

```
dictList.add(pair);
table[keyCode] = pair; 
```

?

> 当我将 LinkedList 声明为 String 并使用 .add() 添加字符串时，没有问题。

完全不清楚您的意思是什么，但是如果您只是`DictEntry`将代码中的每次出现更改为`String`，您将遇到*完全相同*的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T21:50:03.810

```
table[keyCode] = /*...*/ 
```

它的右手边必须是`DictEntry`.

```
/*...*/ = dictList.add(pair) 
```

的返回值`add()`是一个指示成功或失败的布尔值。（对于链表，它总是正确的。）

# jquery - 如何获取选项元素中标签属性的值？

> ID：12849053
> 
> 赞同：2
> 
> 时间：2012-10-11T21:48:14.147
> 
> 标签：jquery, html

我不仅试图获取 option 元素的值，还试图获取 label 属性的值。关于如何做的任何想法？我目前正在使用这个（内联）来获取选项的值：

```
$('select :selected').html(); 
```

我的选择看起来像这样：

```
<select>
<option value="John Smith" label="JS">John Smith</option
</select> 
```

有任何想法吗？我一直在寻找最后半小时左右，并且一些解决方案已经接近，但我找不到任何正在寻找标签价值的人。

这是我认为可以回答我的问题的一个，但我认为他们追求的东西略有不同。-[如何使用 jQuery 获取选择选项的标签？](https://stackoverflow.com/questions/2175737/how-to-get-label-of-select-option-with-jquery)

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T21:49:20.123

尝试这个

```
$('select option:selected').attr('label'); 
```

您正在使用的`.html()`只是提供选项内的内容//`John Smith`

您需要改为访问标签属性..

而是使用 data-* 属性，因为它对`label attribute`选项无效

```
<select>
  <option value="John Smith" data-label="JS">John Smith</option>
</select> 
```

并从 javascript 使用以下方法获取数据：

```
$('select option:selected').attr('data-label'); 
```

或者

```
$('select option:selected').data('label');

$('select option:selected').val();  // Get's the value.. 
```

[检查演示](http://jsfiddle.net/sushanth009/ta3Xp/)

# ios - iOS 应用提交 - LocalStorage 会发生什么

> ID：12849054
> 
> 赞同：0
> 
> 时间：2012-10-11T21:48:15.210
> 
> 标签：ios, local-storage

当您发布 iOS 应用更新时，存储在本地存储中的数据会发生什么情况。它是完全擦除还是仍然可用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T22:07:53.450

> 当用户下载应用程序更新时，iTunes 会将更新安装在新的应用程序目录中。然后它将用户的数据文件从旧安装移动到新的应用程序目录，然后再删除旧安装。以下目录中的文件保证在更新过程中被保留：
> 
> *   `<Application_Home>/Documents`
> *   `<Application_Home>/Library`
> 
> 尽管其他用户目录中的文件也可能被移动，但您不应依赖它们在更新后存在。

您应该查看**性能调整部分中的**[http://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/Introduction/Introduction.html](http://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/Introduction/Introduction.html)以获取更多信息！

# c++ - 如何在矩形内绘制一些字符

> ID：12849058
> 
> 赞同：0
> 
> 时间：2012-10-11T21:48:31.320
> 
> 标签：c++, xcode, macos, opengl, glut

我使用以下函数在一个点中绘制一个字符串：

```
void print(std::string text,int x, int y)
{
    glRasterPos2f(x,y);
    int len =(int)text.size();
    for (int i = 0; i < len; i++)
    {
        glutBitmapCharacter(GLUT_BITMAP_TIMES_ROMAN_24,text[i]);
    }
}; 
```

现在我需要在不让它超出边界（矩形）的情况下绘制字符串。
我该怎么做呢？

编辑：我在 OpenGL 中寻找了模板技术，并以这种方式进行了修改：

```
void print(std::string text,Point point=Point(), Rectangle rect=Rectangle())
{
    glRasterPos2f(point.x,point.y);
    int len =(int)text.size();
    if(!rect.isEmpty())
    {
        glClear(GL_DEPTH_BUFFER_BIT);
        glEnable(GL_STENCIL_TEST);
        glColorMask(GL_FALSE, GL_FALSE, GL_FALSE, GL_FALSE);
        glDepthMask(GL_FALSE);
        glStencilFunc(GL_NEVER, 1, 0xFF);
        glStencilOp(GL_REPLACE, GL_KEEP, GL_KEEP);
        glStencilMask(0xFF);
        glClear(GL_STENCIL_BUFFER_BIT);
        rect.draw(GL_STENCIL);
        glColorMask(GL_TRUE, GL_TRUE, GL_TRUE, GL_TRUE);
        glDepthMask(GL_TRUE);
        glStencilMask(0x00);
        glStencilFunc(GL_EQUAL, 0, 0xFF);
        glStencilFunc(GL_EQUAL, 1, 0xFF);
    }  
    for (int i = 0; i < len; i++)
    {
        glutBitmapCharacter(GLUT_BITMAP_TIMES_ROMAN_24,text[i]);
    }
    glDisable(GL_STENCIL_TEST);
}; 
```

至于 Rectangle 和 Point 它们只是结构，具有以下变量：

```
Point: GLfloat x,y,z
Rectangle : Size size, Point origin
Size: GLfloat width,height 
```

代码不起作用，如果我尝试在矩形内绘制一个字符串，它不会留在矩形内。

# bash - “简单”算术

> ID：12849062
> 
> 赞同：1
> 
> 时间：2012-10-11T21:48:51.243
> 
> 标签：bash

为什么我不能做这个简单的算术运算并将其存储在 bash shell 的变量中？我一直在努力解决这个问题并玩弄`()`符号`$`，但没有运气。

```
read t
let r=$(5/9)*$($t-32) 
```

我明白了`a: let: r=*: syntax error: operand expected (error token is "*")`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T21:56:58.503

当您使用**let**语句时，您不需要美元符号，而是用单引号代替表达式，以防止 shell 预处理器弄乱您的运算符。请注意，bash 似乎无法处理不是整数的数字，因此 (5/9) 表达式将始终为零。尝试第二个 let 语句。

```
read -p 'Temp in Fahrenheit (no decimals): ' t

# let r='(5/9)*(t-32)' -- this doesn't work
let r='5*(t-32)/9'

echo "Centigrade: $r" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T21:50:16.003

试试看：

```
read -p 'Type integer temp (Fahrenheit) >>> ' int
echo "$(( 5 * ( int - 32 ) / 9 )) Celcius" 
```

# javascript - Opera 下 onYouTubePlayerAPIReady 触发失败

> ID：12849063
> 
> 赞同：3
> 
> 时间：2012-10-11T21:48:52.757
> 
> 标签：javascript, youtube-api

Opera 上不显示嵌入的 Youtube 视频。

显然回调是在加载 YT api 库之后定义的，但找不到任何解决方法。

当前页面正在通过 /player_api js 包含加载 YT api，并且仅适用于 Firefox。

试图通过加载 YT api

```
<script type="text/javascript">
var tag = document.createElement('script');
tag.src = "//www.youtube.com/iframe_api";
var firstScriptTag = document.getElementsByTagName('script')[0];
firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
<script> 
```

但在这种情况下，页面在 Opera 和 Firefox 上都不起作用。

有问题的页面是：http: [//www.ionpoverty.tv/blog/featured/having-it-all-low-income-women-and-work-inequality/](http://www.ionpoverty.tv/blog/featured/having-it-all-low-income-women-and-work-inequality/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T03:41:24.830

看起来你包含 js 的方式阻止了它下面的脚本执行。每个浏览器处理阻塞脚本的方式略有不同，这就是为什么您看到它在一个而不是另一个中工作的原因。继续将要加载的脚本移动到`www.youtube.com/iframe_api`您定义的位置之后`onYouTubePlayerAPIReady`。我还建议将其更改为，`onYouTubeIframeAPIReady`但两者都可以。

您可以做的另一件事是确保`www.youtube.com/iframe_api`在同一个脚本标签中加载并定义“onYouTubeIframeAPIReady”。因为它是一个单线程环境，所以应该确保在包含其他脚本之前定义 onYouTubeIframeAPIReady。

# php - 未定义的方法 - 致命错误

> ID：12849064
> 
> 赞同：-1
> 
> 时间：2012-10-11T21:49:06.207
> 
> 标签：php, wordpress

一夜之间，我的网站决定产生以下错误：

> 致命错误：在第 494 行的 /home/xxx/public_html/wp-content/themes/xxx/functions.php 中调用未定义的方法 WP_Error::get_items()

该错误会中断 twitter 提要，从而停止页面呈现的其余部分。我没有为这个网站实现代码，但令人不安的代码似乎是：

```
function twitterify($ret) {

$ret = preg_replace("#(^|[\n ])([\w]+?://[\w]+[^ \"\n\r\t< ]*)#", "\\1<a href=\"\\2\" target=\"_blank\">\\2</a>", $ret);
$ret = preg_replace("#(^|[\n ])((www|ftp)\.[^ \"\t\n\r< ]*)#", "\\1<a href=\"http://\\2\" target=\"_blank\">\\2</a>", $ret);
$ret = preg_replace("/@(\w+)/", "<a href=\"http://www.twitter.com/\\1\" target=\"_blank\">@\\1</a>", $ret);
$ret = preg_replace("/#(\w+)/", "<a href=\"http://search.twitter.com/search?q=\\1\" target=\"_blank\">#\\1</a>", $ret);
return $ret;
} 
```

已从[该网站](http://www.snipe.net/2009/09/php-twitter-clickable-links/#axzz0psFrJPHB)中提取。

关于如何解决这个问题的任何想法？我听说 Twitter 改变了他们的 API，这可能是问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T23:00:18.697

这似乎与 RSS fetch_feed() 函数有关。当 fetch_feed() 成功时，它返回一个具有 get_items() 方法的 SimplePie 类。 **但是，如果 fetch_feed 失败，它会返回一个 WP_Error 类，它没有 get_items() 方法，现在您正在调用一个未定义的函数。**

这可能看起来像：

```
$rss = fetch_feed($url);
$rss->get_items(); 
```

在此示例中，如果 fetch_feed() 函数失败，$rss 将是一个 WP_Error 类...

# javascript - Chrome/Safari (webkit) 中的 Facebook Javascript SDK 登录问题 - 不安全的 Javascript 尝试

> ID：12849065
> 
> 赞同：3
> 
> 时间：2012-10-11T21:49:06.813
> 
> 标签：javascript, facebook, webkit, angularjs, hosts

有人问过类似的问题，但这些问题的解决方案似乎对我没有帮助。

我有一个在虚拟机上运行的本地开发站点：http: *[//lamp.site](http://lamp.site)*

当*index.php*加载时，我已经运行了这个 javascript（使用正确的 appId）：

```
/* facebook auth */ 
window.fbAsyncInit = function() {
    FB.init({
        appId: '01234567890',
        channelUrl: 'http://lamp.site/channel.html'
    });
};

// Load the SDK Asynchronously
(function(d){
    var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
    if (d.getElementById(id)) {return;}
    js = d.createElement('script'); js.id = id; js.async = true;
    js.src = "//connect.facebook.net/en_US/all.js";
    ref.parentNode.insertBefore(js, ref);
}(document)); 
```

然后当一个按钮被点击时，这个javascript函数被触发：

```
#HTML
<li><a class="btn" href="#" ng-click="connectToFacebook()">Connect with Facebook</a></li>

#Snippet in AngularJS Controller
$scope.connectToFacebook = function() {
    facebookConnect.authenticate(
    function(reason) { // fail
        console.log(reason);
    }, 
    function(user) { // success
        console.log('logged in',user);
        //Session.login();
    });

    return false;
}

#Factory in AngularJS module
.factory('facebookConnect', function() {
return {
    authenticate: function(fail, success) {
        FB.login(function(response) {
            console.log(response);
            if (response.authResponse) {
                FB.api('/me', success);
            } else {
                fail('User cancelled login or did not fully authorize.');
            }
        });
    }
} 
```

如果我在 Firefox 中按下按钮，它就可以工作！可爱的，我从 Facebook 得到了所有正确的东西。

如果我在我的 PC 上使用 Chrome 或 Safari，或者在我的 iPhone 上使用 Safari Mobile，我会弹出 Facebook 登录窗口，并显示消息*“发生错误。请稍后再试”。*，以及以下控制台数据：

```
Unsafe JavaScript attempt to access frame with URL
https://www.facebook.com/dialog/permissions.request from frame with URL
http://lamp.site/index.php?page=login. Domains, protocols and ports must match.

Object
authResponse: null
status: "not_authorized"
__proto__: Object

User cancelled login or did not fully authorize. 
```

我已将本地测试 URL 添加到开发人员部分的 facebook 应用程序中，因为它使用 Firefox 登录，所以可以正常工作。这是我的频道文件，存储在*[http://lamp.site/channel.html](http://lamp.site/channel.html)*

```
<script src="http://connect.facebook.net/en_US/all.js"></script> 
```

我尝试过在*src=*标签中使用和不使用*http:的频道文件。*

 *facebook 应用程序具有以下设置：

*   应用域名：lamp.site
*   网站网址： http: [//lamp.site](http://lamp.site)
*   手机站网址： http: [//lamp.site](http://lamp.site)

所以它在Firefox中工作，我到底做错了什么。我不能只启用跨站点脚本，因为用户不会这样做，这将进入移动站点。

最近还有其他人设法解决这个问题吗？

所有其他类似的问题都没有得到解答……一定有人解决了这个问题！

**编辑：我在我的网站上制作了一个简化版本，新的应用程序 ID。**

[http://dev.willshawmedia.com/fb/](http://dev.willshawmedia.com/fb/)

这是来自 Facebook Dev 应用程序面板的应用程序 ID 的屏幕截图

![Facebook 开发应用详细信息](../Images/d2267b7a9dd1e0ad938a5a0272c2f5a7.png)

您可以查看源代码，它是直接从这里复制的：

[https://developers.facebook.com/docs/guides/web/](https://developers.facebook.com/docs/guides/web/)

并且频道文件确实存在：

[http://dev.willshawmedia.com/fb/channel.html](http://dev.willshawmedia.com/fb/channel.html)

我不能让它变得更简单，我仍然收到“发生错误。请稍后再试”。消息，但现在它只是转发到 Facebook，而不是验证和关闭。

**编辑：我错过了站点 URL，我已经添加了这些，简单的示例正在运行。**

由于它在我的实时站点上运行，因此它必须与我的本地域有关。但我的*/etc/hosts/*文件中有这一行：

```
192.168.0.13 lamp.site 
```

那是在我的笔记本电脑上运行的 VirtualBox Ubuntu 服务器的 IP 地址。我可以很好地浏览那个网站。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-14T14:53:53.233

必须禁用沙盒模式才能在 Chrome 中运行。就是这样，这就是一切。

我启用了该模式，因为我认为这会阻止它出现在搜索中，这是我不想要的。由于它在 Firefox 中有效，我看不出这是个问题。但是你去了，我关闭了沙盒模式，它立即开始工作。

![沙盒模式](../Images/b7c7086ec8e1faed0f75b7d0f5f3a7dc.png)

我不明白为什么这会阻止 Chrome。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T13:17:53.093

你的工厂有一些*奇怪*的JavaScript：`return new function()`......除此之外我没有看到任何问题。我正在使用相同的基本技术，并且在 Chrome 中没有任何问题。

**确保您的 Facebook 应用程序已设置为您的域（我们称其为“mydomain.com”）...然后，要在本地进行测试，您需要编辑[主机文件](http://en.wikipedia.org/wiki/Hosts_%28file%29)以将 mydomain.com 指向 127.0.0.1** .. . 所以浏览器位置中的 URL 与 Facebook 的预期相符。

这可能是我正在做的事情和你正在做的事情之间的唯一区别。

...还要确保您的 App ID 是设置 Facebook 应用程序时的正确 App ID。仔细检查一下。BS“测试”应用 ID 也会给你错误信息。

## -

-

* * *

**编辑**：在`new function(){ }`前面......**我认为这不是你的问题**......我想解释一下：

```
var x = new function() { this.foo = 'test'; }; 
```

是相同的

```
var x = { foo: 'test' }; 
```

因为`new`关键字是用来作为对象构造函数调用函数的，而你在一个不能再次使用的匿名函数上使用new，所以没有理由声明它。

所以你的片段可以（并且可能应该）是：

```
.factory('facebookConnect', function() {
    return {
        authenticate: function(fail, success) {
            FB.login(function(response) {
                console.log(response);
                if (response.authResponse) {
                    FB.api('/me', success);
                } else {
                    fail('User cancelled login or did not fully authorize.');
                }
            });
        }
    }
}); 
```*

# c++ - C++ 构造函数调用另一个构造函数

> ID：12849070
> 
> 赞同：1
> 
> 时间：2012-10-11T21:49:20.353
> 
> 标签：c++, class, object, constructor

尝试构建包含以下代码的 c++ 程序时：

```
menutype::menutype(int cat_num){
    extras list = extras(cat_num);
}

extras::extras(int num_cats){
    head = new category_node;
    head->next = NULL;
    head->category = 1;
    category_node * temp;
    for(int i = 1; i < (num_cats); ++i){
        temp = new category_node;
        temp->next = head->next;
        head->next = temp;
        temp->category = (num_cats-(i-1));
    }
} 
```

我收到错误：

> cs163hw1.cpp：在构造函数“menutype::menutype(int)”中：
> cs163hw1.cpp:59:31：错误：没有匹配函数调用“extras::extras()”
> cs163hw1.cpp:59:31：注意：候选人是：
> cs163hw1.cpp:5:1：注意：extras::extras(int)

我不明白为什么，请帮忙！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T21:52:12.610

由于该行不应尝试调用默认构造函数（仅从 复制构造函数和转换构造函数`int`），我只是猜测您的`extras`类中有一个类型的数据成员`menutype`，因此您必须在初始化程序列表中对其进行初始化，因为它没有默认构造函数：

```
menutype::menutype(int cat_num) : list(cat_num) { //or whatever the member is called

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T21:53:16.097

似乎您`menutype`拥有 type 的成员`extras`。如果是这种情况，并且如果`extras`没有默认构造函数（似乎是这种情况），则需要在初始化列表中对其进行初始化：

```
menutype::menutype(int cat_num) : myextrasmember(cat_num) {} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T21:55:05.790

通常会通过以下方式在另一个类的构造函数中调用构造函数（如您的示例）：

`menutype::menutype(int cat_num) : list(cat_num) { }`

这更有效，因为在初始化列表中调用了列表（extra 类型）的构造函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-11T21:57:54.790

正如其他人所说，您错误地调用了构造函数。

其他三个人已经指出了正确的**初始化列表**方法。但是，没有人指出如何在构造函数上下文之外正确调用构造函数。

代替：

```
extras list = extras(cat_num); 
```

做：

```
extras list(cat_num); 
```

# php - 如何获取 Web 应用程序的基本安装路径

> ID：12849075
> 
> 赞同：0
> 
> 时间：2012-10-11T21:49:33.103
> 
> 标签：php

> **可能重复：**
> [如何以编程方式确定 PHP 中的文档根目录？](https://stackoverflow.com/questions/390276/how-to-programmatically-determine-the-document-root-in-php)

如果用户将我的 Web 应用程序提取到（`/var/www/webapp/`因此应用程序将被访问），那么获取安装路径的最佳方法是什么？ 我需要这个，因为我在我的服务的某些页面上了解了完整的绝对 URI。`/var/www``DocumentRoot``example.tld/webapp/``/webapp/`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T21:53:44.253

你可以看看`__DIR__`常数。

# jquery - 如何在单页中使用jquery滚动保持锚活动属性

> ID：12849076
> 
> 赞同：0
> 
> 时间：2012-10-11T21:49:41.480
> 
> 标签：jquery, html, css

我正在一个主页上工作，我需要我的主导航锚来保持 CSS 中分配的活动颜色的样式。我遇到的问题是我正在使用 jQuery 滚动功能，因此一旦单击锚点，相应的 div 就会向上/向下/等滚动。所有这些都在一个 HTML 文件中。我希望主导航中的锚点保持活动颜色，直到单击另一个链接。我的代码示例如下：

```
function goToByScroll(id){
    $('html,body').animate({scrollTop:$("#"+id).offset().top -315},'slow');}

<div id="mainnav">
        <ul>
            <li>
                <a href="javascript:void(0)" onclick="goToByScroll('main_content')">HOME</a></li>
            <li>
                <a href="javascript:void(0)" onclick="goToByScroll('page2')">WHY</a></li>
            <li>
                <a href="javascript:void(0)" onclick="goToByScroll('page6')">FEATURES</a></li>
            <li>
                <a href="javascript:void(0)" onclick="goToByScroll('gallery')">GALLERY</a></li>
            <li>
                <a href="javascript:void(0)" onclick="goToByScroll('page4')">DEMO</a></li>
            <li>
                <a href="javascript:void(0)" onclick="goToByScroll('page5')">CONTACT US</a></li>
        </ul>
    </div>

#mainnav{
     height:50px;
     background-color:#FFF;
     float:right;
     font-size:18px;
     font-family: Arial, Helvetica, sans-serif;}

  #mainnav a, #mainnav a:link, #mainnav a:visited, {
  color:#444444;
  text-decoration: none;
  }

   #mainnav a:hover { text-decoration: none; color:#BAB9B9;}

    #mainnav a:active{
    color:#f69512;
    text-decoration: none;}

#page2{
    clear:both;
    min-width:990px;
    background-color:#c8c8c8;
    min-height:600px;
    top:380px;
    bottom:65px; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T21:52:43.037

当您单击链接时，给它一个具有相同外观属性的类，如活动状态。

当您单击另一个链接时，请从所有链接中退出该类并将其添加到单击的链接中。

您可以保留 onclick 属性并像这样声明事件：

```
$(function(){
  $('a', '#mainnav').on('click', function(){
    $('a', '#mainnav').removeClass('imactive');
    $(this).addClass('imactive');
    return false;
  })
}) 
```

# jquery - Valid8 jquery插件：依赖字段验证？

> ID：12849078
> 
> 赞同：1
> 
> 时间：2012-10-11T21:49:44.973
> 
> 标签：jquery

我的客户要求我使用特定的验证插件（valid8），它似乎只对焦点进行内联验证。该插件的文档非常薄弱，所以我希望其他人对这个特定的插件有经验，他们可以帮助我。

这是一个联系表格，用户必须在其中指定他们首选的联系方式。如果他们指定电子邮件，则必须验证电子邮件输入字段；如果他们指定电话，则必须验证电话输入字段。我可以根据选择的收音机有选择地添加验证，但如果用户在提交表单之前更改了他们的联系偏好，我无法删除验证。

使用此插件添加字段后，有没有办法从字段中删除 valid8 验证？我尝试了 .unbind(valid8)，但这不起作用，因为 unbind 用于事件，valid8 不是事件。我是否必须手动取消绑定所有事件并从字段中删除额外的标记？

编辑：http: [//jsfiddle.net/sjc8611/5d3CT/](http://jsfiddle.net/sjc8611/5d3CT/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T22:27:18.437

我没有使用过这个插件，但是查看源代码似乎有关验证的信息`#element`存储在任意数据`settings`中，因此您可以尝试：

```
$('#element').data('settings', null); 
```

看看它做了什么。但它可能会产生错误，如果出现错误，您还可以删除与之关联的事件，这些事件是：

```
keyup
blur
click (for checkbox) 
```

你可以用这样的一个命令来做到这一点：

```
$('#element').unbind(); 
```

但这将删除该元素的所有事件，并且可能再次导致问题，这就是我提供上面列表的原因，以便您可以在需要时一一删除它们。

这就是我在不使用它的情况下所能说的，如果它不起作用，你应该在网上发布一个示例（最好在[jsFiddle](http://jsfiddle.net/)上），以便我们查看它。如果一切都失败了，你可以给插件作者发电子邮件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T22:50:18.010

您可以将验证设置为始终返回 true 的函数：

```
$("#element").valid8({
    jsFunctions: [{
        function: alwaysTrue, values: function() { return true; }
    }]
}); 
```

# c++ - 类定义向量

> ID：12849085
> 
> 赞同：1
> 
> 时间：2012-10-11T21:50:06.140
> 
> 标签：c++, opencv, vector

以下是我为将边界框划分为更小的部分所做的一个类。

```
class reticula
{   
    int _columnas;
    int _renglones;
    int _num_pixelotes;
    vector<vector<Point> > Pixelotes;

public:
reticula():
_columnas(0),
_renglones(0),
_num_pixelotes(0),
Pixelotes(){};
/// crear la reticula con los valores deseados 
reticula(vector<Point> verticesB, int renglon, int columna);

Size size(void);
vector<Point> en(int el_renglon, int la_columna);
~reticula(void);
};  

reticula::reticula(vector<Point> verticesB, int renglon, int columna ){
if(verticesB.size()!= 4){
    cout<< "El vector debe tener las 4 esquinas del rectangulo a dividir"
        << endl;    
    throw 400; // es para mandar la exepción. 
}
_columnas = columna;
_renglones = renglon;
_num_pixelotes = columna * renglon ;
Pixelotes.resize(_renglones * _columnas); 
double dis_mayor, dis_menor;//con respecto a los ejes 
Point dif_10;
Point dif_21;
Point dif_32;
Point dif_03;
double es_mayor, es_menor;

dif_10 = verticesB[1]-verticesB[0];
dif_21 = verticesB[2]-verticesB[1];
dif_32 = verticesB[3]-verticesB[2];
dif_03 = verticesB[0]-verticesB[3];

dis_mayor = norm(dif_10);
dis_menor = norm(dif_21);

es_mayor = dis_mayor/(double) _columnas;
es_menor = dis_menor/(double) _renglones;
Point aux;
Point aux2;
vector<Point> vertices_re((_columnas + 1)*(_renglones + 1));
for (int i = 0; i < _renglones; i++){
    for(int j= 0; j < _columnas; j++){
        for(int h=0; h < 4; h++ ){
            aux = verticesB[0] + ((((double)j*dis_mayor) * dif_10) + (((double)i * dis_menor)*dif_21));
            if(h=0){aux2= aux;}
            else if(h=1){aux2= aux + (dis_mayor * dif_10);}
            else if(h=2){aux2= aux + (dis_mayor * dif_10) + (dis_menor * dif_21);}
            else if(h=3){aux2= aux + (dis_menor * dif_21);}
            Pixelotes[i * _columnas + j].push_back(aux2);
        }
    }
}

}

Size reticula::size(void){
Size Total;
Total.width = _columnas;
Total.height = _renglones;
return Total;

}

vector<Point> reticula::en(int el_renglon, int la_columna){
if(el_renglon > _renglones|| la_columna> _columnas){
    cout << " el renglon y la columna se deben encontrar dentro de los parametros "
        <<endl;
    cout<< _renglones<<" , "<<_columnas<<endl;
    vector<Point> vacio;
    vacio.push_back(Point(0,0));
    return (vacio);
}
int busca;
busca = el_renglon * _columnas + la_columna;    
} 
```

我想创建一个包含这个类的向量，但我不知道我做错了什么

```
vector<reticula> SoloReti(contours.size());
for(int g=0; g< SoloReti.size(); g++){
    SoloReti[g].reticula(contours[g], 5,4);
} 
```

g++ 编译器告诉“reticula::reticula 的无效使用”有人能告诉我问题出在哪里吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T22:00:13.490

当您声明您的时，它会使用reticula build 和默认构造函数`vector<reticula> SoloReti(contours.size())`初始化向量。`contours.size()``reticula()`

当你这样做时`SoloReti[g].reticula`，你试图从一个已经构造的对象中调用构造函数。解决方案：使用赋值运算符：

```
vector<reticula> SoloReti(contours.size());
for(int g=0; g< SoloReti.size(); g++){
    SoloReti[g] = reticula(contours[g], 5,4);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T22:04:22.100

我认为这就是你想要的：

```
vector<reticula> SoloReti;

for(int g = 0; g < countors.size(); g++)
{
    reticula tmp(contours[g], 5, 4); 
    SoloReti.push_back(tmp);
} 
```

# c++ - 为树莓派交叉编译 QT 应用程序 - 无法打开共享对象文件

> ID：12849091
> 
> 赞同：0
> 
> 时间：2012-10-11T21:50:26.393
> 
> 标签：c++, qt, shared-libraries, cross-compiling, raspberry-pi

我希望能够在我的全尺寸桌面上使用 QT Creator 来开发和编译 qt 应用程序并将它们部署到 pi。

我遵循了本指南：http: [//qt-project.org/wiki/Create#QtonPi_App_SDK](http://qt-project.org/wiki/Create#QtonPi_App_SDK)

我正在尝试编译 hello-qtonpi 项目。使用 pi 的编译器和工具链，在编译过程中出现两个错误：

```
/opt/qtonpi/lib/gcc/armv5tel-qtonpi-linux-gnueabi/4.5.4/../../../../armv5tel-qtonpi-linux-gnueabi/bin/as: error while loading shared libraries: libz.so.1: cannot open shared object file: No such file or directory
/opt/qtonpi/libexec/gcc/armv5tel-qtonpi-linux-gnueabi/4.5.4/cc1plus: error while loading shared libraries: libmpc.so.2: cannot open shared object file: No such file or directory 
```

我检查了这两个库是否安装在我的 pi 上，以及 rsynced /lib 和 /usr/lib 从 pi 到我的 sys-root 文件夹。

我尝试使用 QT Creators Add Library -> System Library 工具，并选择了例如 libz.so，因为它没有显示 so.1。它将以下行添加到 .pro 文件中：

```
unix:!macx:!symbian: LIBS += -lz 
```

但是它仍然没有摆脱错误。

我应该如何包含这些库或告诉编译器从哪里查看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T16:07:36.307

关于 libz 和 libmpc 的两个错误消息都与缺少的目标库无关，而是与**主机部分**有关。

您的交叉编译工具链已构建为动态工具链，因此您需要在主机上拥有所有解析依赖项的库。

由于 libz.so.1 很常见，也许您运行的是 64 位主机，但您的工具链是为 32 位构建的。在这种情况下，您需要找到提供 32 位版本的 libz.so.1 和 libmpc.so.2 的软件包。

# c++ - >= 优先级高于 | 的直观原因

> ID：12849094
> 
> 赞同：2
> 
> 时间：2012-10-11T21:50:44.957
> 
> 标签：c++, c

`>=`和 '>' 优先级高于的直观原因是什么`|`？[参考](http://en.cppreference.com/w/cpp/language/operator_precedence)。我可以理解为什么`||`写作`a>b||c`很普遍，为什么会更低。但是我认为`a>b|c`在比较之前会做一个 OR 。这似乎并不直观。有哪些`&^|`优先级较低的例子，然后比较/权益运算符是直观的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-11T22:00:18.470

这是一个历史性的意外，丹尼斯·里奇[在《C 语言的发展》中写道：](http://cm.bell-labs.com/who/dmr/chist.html)

> 他们迟到的介绍解释了 C 的优先规则的不合理性。在 B 中写道

```
 if (a==b & c) ... 
```

> 检查 a 是否等于 b 且 c 是否非零；在这样的条件表达式中，& 的优先级低于 ==。在从 B 转换为 C 的过程中，人们想在这样的语句中用 && 替换 &；为了使转换不那么痛苦，我们决定保持 & 运算符相对于 == 的优先级相同，并且只是将 && 的优先级与 & 稍微分开。今天，似乎最好移动 & 和 == 的相对优先级，从而简化一个常见的 C 习惯用法：要测试一个掩码值与另一个值，必须编写

```
 if ((a&mask) == b) ... 
```

> 其中内括号是必需的，但很容易忘记。

所以这是因为 B 使用`|`and`&`用于逻辑运算符，而 C 保留了如此表示的位运算符的优先级。

# android - android：转换为具有透明度的灰度

> ID：12849095
> 
> 赞同：0
> 
> 时间：2012-10-11T21:50:49.150
> 
> 标签：android, image, grayscale

我正在尝试将我从休息调用中获得的图像转换为灰度，但是我需要保持透明度，因为图像是地图上的叠加层。我试过 ：

```
Bitmap bmpGrayscale = Bitmap.createBitmap(width, height, Bitmap.Config.RGB_565);
Canvas c = new Canvas(bmpGrayscale);
Paint paint = new Paint();
ColorMatrix cm = new ColorMatrix();
cm.setSaturation(0);
ColorMatrixColorFilter f = new ColorMatrixColorFilter(cm);
paint.setColorFilter(f);
c.drawBitmap(bmpOriginal, 0, 0, paint); 
```

但它不能保持透明度......所以如果你们中的任何人有一个想法，我会很高兴测试它。

谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T22:25:03.660

您的 Bitmap.Config 是 RGB_565，它没有作为透明层的 alpha。试试 ARGB_8888。

# special-characters - Cocos2D-X CCLabelTTF 中的特殊字符

> ID：12849097
> 
> 赞同：2
> 
> 时间：2012-10-11T21:51:00.977
> 
> 标签：special-characters, cocos2d-x, cclabelttf

嗨，我想使用包含特殊字符的字符串创建 CCLabelTTF 这是一些示例

```
CCLabelTTF* pLabelDuracion = CCLabelTTF::create("Duración de Periodo", "Arial", 20,CCSize(),kCCTextAlignmentLeft); 
```

或者

```
CCLabelTTF* pLabelPsswd = CCLabelTTF::create("Contraseña", "Arial", 20,CCSize(),kCCTextAlignmentLeft); 
```

请告诉我如何在我的应用程序中显示这些字符（“ñ”、“´”等）

我在 Visual Studio 2010 中编码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T23:37:54.077

在 Visual Studio 中将您的 cpp 文件编码更改为 UTF

# c# - 在 MVC 项目中，我应该将本地资源放在哪里？

> ID：12849099
> 
> 赞同：0
> 
> 时间：2012-10-11T21:51:13.410
> 
> 标签：c#, asp.net-mvc, resources, asp.net-mvc-4, embedded-resource

我目前正在开发一个 mvc4 应用程序。它需要是多语言的，因此我的每个视图都需要一个与之关联的资源文件。

在 Web 表单世界中，我将创建 App_LocalResouces 并在其中包含用于我的页面/用户控件的资源文件。

作为 MVC 的新手，我不确定它是如何工作的——它是否相似。例如对于我的剃刀视图，特定视图的资源文件所在的位置。与我的模型和控制器相同，此类的资源文件在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T22:53:11.647

我已经看到它做了很多方法。这真的是基于偏好。我的偏好是创建一个资源文件夹并将翻译后的字符串存储在一个文件中，并以文化名称命名。然后我在 web.config 文件中设置语言并将其留给页面以提取正确的字符串。

# php - 使用 Xpath 获取第一个祖先

> ID：12849102
> 
> 赞同：5
> 
> 时间：2012-10-11T21:51:23.150
> 
> 标签：php, xpath

我想使用 XPath 来获取第一个父祖先。我想解析这样的代码：

```
<div>
    <span class="city">City 1</span>

    <div class="annonce">
        <span class="item">Item1</span>
    </div>
</div>
<div>
    <div class="annonce">

        <span class="item">Item2</span>
    </div>
</div>

<div>
    <span class="city">City 2</span>

    <div class="annonce">
        <span class="item">Item3</span>
    </div>
</div>
<div>
    <div class="annonce">
        <span class="item">Item4</span>
    </div>
</div> 
```

通过 XPath，我想获得第一个父城市。例如，对于 Item1, Item2 我想要 City 1 而对于 Item3, Item4 我想要 City 2

有可能吗？PS：我无法编辑源代码。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-11T22:33:16.000

> 我想使用 XPath 来获取第一个父祖先。

该术语不正确且具有误导性。“父母祖先”没有意义，因为父母总是祖先。

还。您要选择的元素不是任何`span[@class='item']`元素的父母或祖先。

最后，提供的文本不是格式良好的 XML 文档。在格式良好的 XML 文档中，只有一个顶部元素。

这说，

**使用**：

```
preceding::span[@class='city'][1] 
```

这选择上下文（当前）节点的第一个前面`span`元素，其`class`属性的字符串值为 string `"city"`。

# c# - 为 Windows API 和 COM DLL 创建 .Net 包装器

> ID：12849104
> 
> 赞同：1
> 
> 时间：2012-10-11T21:51:31.713
> 
> 标签：c#, winapi

让我首先说我不知道​​我目前不知道什么，所以我认为我也在寻找更好的问题，而不是具体的答案。我的 .Net/C# 足够稳固，而我的 C/C++ 也不错。

最近，我发现标准 .Net 框架中没有库可以完成某些任务，虽然下载第三方库很容易，但我想了解如果没有的话我自己该怎么做已经存在。

在最近的一个案例中，我需要在 Windows 中以相对较低的级别处理 MIDI，我偶然发现“winmm.dll”是我需要通过下载 .net 包装器来使用的库，用于 MIDI 和浏览通过源。我知道我必须创建一个包装类并完成整个 P/Invoke 事情来实现这一点。

我接下来要做的是搜索有关 Windows API 的文档，以弄清楚“winmm.dll”的神秘盒子中发生了什么，令我高兴的是，我可以下载一个完整的 Windows SDK，并通读。我浏览了“Windows 开发”的“入门”部分，其中涵盖了通过 C++ 进行的一些基础知识。它谈到了一些关于 COM、windows 头文件的内容，而且我对 C++ 的了解足以了解要点。

现在，我需要帮助将一些问题联系起来：

1) 到目前为止，Windows SDK 似乎建议我要对特定的头文件而不是 dll 本身进行编程，但是我发现的 .net 包装器通常指向特定的 .dll 而不是头文件。 .

```
/// <summary>
/// Returns the number of MIDI input devices on this system.
/// </summary>
/// Win32 docs: http://msdn.microsoft.com/en-us/library/ms711608(VS.85).aspx
[DllImport("winmm.dll", SetLastError = true)]
public static extern UInt32 midiInGetNumDevs(); 
```

我的印象是头文件和 DLL 需要在同一个文件夹中，但是 windows SDK 包含一个包含所有 windows 头文件的文件夹，并且没有 DLL（我猜注册表在这里起作用以映射到特定的库？）？这些头文件最终如何映射到实际的库，为什么看起来我什至不需要处理头文件来创建 .Net 包装器？

2) 我似乎找不到有关 winmm.dll 的文档，但我在 Windows SDK 的“Windows API”列表中找到了对我可能需要的函数的引用，而且我很确定代码这些函数在 winmm.dll 中。如何找到开始创建包装器所需的特定库的文档？如果我不知道我将需要 winmm.dll 来访问 Windows MIDI 功能，我自己怎么能弄清楚呢？

3) 有些 DLL 是 COM，有些是普通的 windows DLL，有些是 .net DLL……我怎么能分辨出不同的未来？似乎为前两者创建包装器需要不同的方法。

4) MSDN 上没有列出其所有 API 的“Winmm.dll”页面，我认为这有一个很好且实际的原因，但我不确定它是什么？我习惯了 .Net 土地，在那里我几乎可以毫不费力地弄清楚图书馆的作用以及如何使用它。

提前感谢您的任何见解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T22:02:08.280

这方面的圣经是 Adam Nathans 的优秀著作“.Net 和 COM 完整的互操作性指南”

包括 PInvoke 和几个音频类型示例

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T05:10:37.383

1) windows API 文档包括每个方法/枚举/等的头文件、库和dll文件。当我通读到注意到这一点时，我只是没有向下滚动足够远。头文件不一定要与 dll 位于同一目录中；编译程序时，它的内容只是简单地复制/粘贴到 .c 文件中。[我在这里缺少的部分是我在这里](http://www.lurklurk.org/linkers/linkers.html)读到的编译的链接阶段

2) 文档在那里——我只需要更加努力地寻找它。

3)[如何检测 dll 的类型？（COM、.NET、WIN32）](https://stackoverflow.com/questions/1420726/how-can-i-detect-the-type-of-a-dll-com-net-win32)

4）音频的api理论上可以跨越多个dll，所以最好的做法是找到api文档，找到你想要包装的方法，然后找出这些方法在什么dll中，然后导入每个dll .

# javascript - 为什么这个函数返回true而不是false

> ID：12849105
> 
> 赞同：1
> 
> 时间：2012-10-11T21:51:39.897
> 
> 标签：javascript, jquery

这是我的测试：

```
var test = function () {
    $.each([1, 2], function () {
        if(true !== false) { // it is just an example
            alert('I am here'); 
            return false; // how should I make the function test to stop or to exit here?
        }
    });
    return true;
}​;

alert(test()); 
```

​</p>

我希望该`test`函数返回false，但它返回true。
为什么？我应该如何修复代码？请参阅评论以获取更多详细信息。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-11T21:53:20.167

`false`从回调中返回`.each()`只会停止`.each()`迭代。它不会从封闭函数返回；在 JavaScript 中做到这一点的唯一方法是抛出异常。

你可以做的是设置一个标志：

```
var test = function () {
    var abort = false;
    $.each([1, 2], function () {
        if(true !== false) { // it is just an example
            alert('I am here'); 
            abort = true;
            return false; // how should I make the function test to stop or to exit here?
        }
    });
    return !abort;
}​; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-11T21:53:47.073

它返回`true`是因为内部`return false`返回匿名函数，它只指示 jQuery 提前结束`$.each`循环。

使用内部函数外部的变量来正确处理返回状态。

```
var test = function () {
    var retVal = true;
    $.each([1, 2], function () {
        if(true !== false) { // it is just an example
            alert('I am here'); 
            retVal = false;
            return false;
        }
    });
    return retVal;
}​; 
```

`$.each`如果一个简单的`for...in`循环就足够了，您还可以将代码更改为不使用该方法：

```
var test = function () {
    var retVal = true;
    for (var value in [1, 2]) {
        if(true !== false) { // it is just an example
            alert('I am here'); 
            return false;
        }
    };
    return true;
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T21:54:33.827

那是因为`return false;`只是打破了 $.each 循环..而不是函数。

它从最后一条语句返回 true

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-11T21:55:10.650

通过将代码更改为：

```
var test = function () {
    var returnValue = true;
    $.each([1, 2], function () {
        if(true !== false) { // it is just an example
            alert('I am here'); 
            returnValue = false;
            return false; // how should I make the function test to stop or to exit here?
        }
    });
    return returnValue;
}​; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-11T21:55:27.190

您有两个函数定义：

*   内部函数 (in `$.each`)：返回 false
*   外部函数 ( `window.test`)：返回 true

* * *

退出时捕获：

```
var arr = [1,2,3,4,5,6,7,8,9];
var breakpoint = undefined;
$.each(arr, function(i,val){
   if (val==4){  // some break condition
      breakpoint = {index:i,val:val};
      return false;
   }
   return true;
});

console.log('break point:', breakpoint); // breakpoint.index=3, breakpoint.val=4 
```

然后在您的外部函数中，您可以执行类似的操作`return typeof breakpoint !== 'undefined';`，或者`returnValue`按照其他人的建议设置 a。

# c# - 如何在 Windows 8 中安装 XNA Game Studio 4.0？

> ID：12849107
> 
> 赞同：35
> 
> 时间：2012-10-11T21:51:50.997
> 
> 标签：c#, visual-studio-2010, xna, windows-8, xna-4.0

这个问题是相关的，但不是重复的：[如何在 Visual Studio 2012 上安装 XNA 游戏工作室？](https://stackoverflow.com/questions/10881005/how-to-install-xna-game-studio-on-visual-studio-2012)

我阅读了上面提到的帖子，并且已经打开了 xna 项目，但是我现在遇到了问题。

未找到对 XNA 框架的一些引用：

```
Microsoft.Xna.Framework.Avatar
Microsoft.Xna.Framework.GamerServices
Microsoft.Xna.Framework.Net
Microsoft.Xna.Framework.Storage
Microsoft.Xna.Framework.Video 
```

以及所有对`Microsoft.Xna.Framework.Content.Pipeline`

没有这些，我就无法编译或运行我制作的任何游戏。我找不到包含这些的 dll，或者我应该把它们放在哪里。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-10-11T22:59:11.733

# 更新：2014 年 3 月 3 日

在此链接使用 VS2012 和 VS2013 的下载：[https](https://msxna.codeplex.com/releases) ://msxna.codeplex.com/releases 。我不知道该项目的合法性（开发人员似乎已经反编译了 XNA），但它确实帮助我减轻了需要 VS2010 以利用内容管道的痛苦。

# 旧答案

请参阅：[如何解决在 Windows 8 上可能出现的 XNA Game Studio 或 Windows Phone SDK 安装失败](http://blogs.msdn.com/b/astebner/archive/2012/02/29/10274694.aspx)

> ### 如何解决此问题
> 
> 如果您遇到此问题，可以使用以下步骤来解决此问题：
> 
> *   [从http://www.xbox.com/en-US/LIVE/PC/DownloadClient](http://www.xbox.com/en-US/LIVE/PC/DownloadClient)下载并安装最新版本的 Windows 游戏 - LIVE Redistributable
> *   如果您正在安装 Windows Phone SDK 7.1，请重新运行安装程序并选择修复它。这将重新运行之前失败的 XNA Game Studio 安装程序，这次它们应该可以正确安装。
> *   如果您要安装独立的 XNA Game Studio 产品，请重新运行安装程序，这一次应该可以正确安装。
> *   如果您打算进行 Windows Phone 开发，您还应该在安装 Windows Phone SDK 7.1 之后安装 Windows Phone SDK 7.1.1 更新。此更新修复了阻止 Windows Phone SDK 7.1 中的模拟器在 Windows 8 上正常工作的问题。

> ### 如果解决方法没有帮助怎么办
> 
> 如果您已尝试上述步骤但设置仍然失败，则您遇到的问题与上述问题不同，您必须查看设置日志文件以确定根本原因。
> 
> 如果您正在安装 Windows Phone SDK 7.1，您可以使用日志收集工具来收集您的安装日志文件。此日志收集工具将创建一个名为 %temp%\vslogs.cab 的文件。
> 
> 如果您正在安装 XNA Game Studio，您可以在以下位置找到日志文件：
> 
> *   XNA Game Studio 4.0 刷新 - %temp%\XNA Game Studio 4.0 Setup\Logs
> *   XNA Game Studio 4.0 - %temp%\XNA Game Studio 4.0 Setup\Logs
> *   XNA Game Studio 3.1 - %temp%\XNA Game Studio 3.1 设置\日志
> *   XNA Game Studio 3.0 - %temp%\XNA Game Studio 3.0 设置\日志
> *   XNA Game Studio 2.0 - %ProgramFiles%\Microsoft XNA\XNA Game Studio\v2.0\Setup\Logs

> ### 是什么在幕后导致了这个失败
> 
> XNA Game Studio 在幕后安装了适用于 Windows 的游戏版本 – LIVE Redistributable。一些旧版本的 Windows 游戏 – LIVE Redistributable 尝试安装和使用 Windows 8 正在安装的文件，而旧版本的可再发行文件与 Windows 8 安装的新版本文件不兼容。较新版本的 Windows 游戏 – LIVE Redistributable 与 Windows 8 兼容，如果您在安装 XNA Game Studio 之前预安装新的可再发行组件，安装程序将识别它已经存在并使用新版本而不是尝试安装旧版。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-25T19:01:36.303

**XNA Game Studio 4.0**的安装程序在**Windows 8**上存在一些问题。安装过程失败并删除所有安装文件。事实上，主安装程序会提取以下安装程序（位于 c:\Program Files (x86)\Microsoft XNA\XNA Game Studio\v4.0\Setup）：

*   XLiveRedist.msi
*   xnags_documentation.msi
*   xnags_platform_tools.msi
*   xnags_shared.msi
*   xnags_visualstudio.msi
*   xnaiveproxy.msi

矛盾在于第一个。所以如果你手动安装所有其他的，XNA 应该可以正常工作。问题是安装失败后这些文件会被自动删除。我的解决方案是在检测到错误时停止安装过程（使用任务管理器），这样安装程序就没有时间擦除安装文件。获得文件后，您可以安装它而无需重复过程。它对我有用！！！

# xml - 如何将 xml 文件导入 Maple 工作表

> ID：12849108
> 
> 赞同：0
> 
> 时间：2012-10-11T21:52:00.973
> 
> 标签：xml, import, maple

我在互联网上找到了一堆枫木工作表。但是，当您打开它们时，它们是 XML 格式，如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<Worksheet>
<Version major="12" minor="2"/>
<Label-Scheme value="2" prefix=""/>
<View-Properties presentation="false"></View-Properties>
<MapleNet-Properties elisiondigitsbefore="100" labelling="true" indentamount="4" elisiontermsthreshold="10000" ansi="false" errorbreak="1" useclientjvm="true" echo="1" imaginaryunit="I" labelwidth="20" plotdriver="openviz" elisiondigitsafter="100" plotoutput="terminal" rtablesize="10" elisiontermsbefore="100" elisiondigitsthreshold="10000" typesetting="standard" plotdevice="inline" verboseproc="1" showassumed="1" errorcursor="false" longdelim="true" plotoptions="" quiet="false" elisiontermsafter="100" screenwidth="79" preplot="" prettyprint="3" displayprecision="-1" warnlevel="3" screenheight="25" latexwidth="6.0" postplot="" prompt="&gt; " ShowLabels="true"/>........ 
```

这只是我找到的文件的一部分。无论如何，我怎样才能将这些文件导入 Maple？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T06:19:03.617

如果您将它们保存`.mw`为文件扩展名，那么 Maple GUI（或其桌面图标）应该能够像往常一样启动它们。

这种 XML 格式基本上是 Maple 标准 GUI 的所有 .mw 工作表的形成方式。GUI 知道如何打开上次保存在早期版本中的 .mw 文件。

当您写“打开它们”时，您可能只是指在您的网络浏览器中单击一个 URL？如果是这样，那么可能只是您的浏览器没有将该文件扩展名与 Maple GUI 相关联。

# iphone - iOS UITableView 索引是透明的

> ID：12849114
> 
> 赞同：2
> 
> 时间：2012-10-11T21:52:33.127
> 
> 标签：iphone, ios, uitableview

如下图所示，我设置了表格的背景和其他一些样式。以红色突出显示的索引是透明的。如何将其设置为与单元格的其余部分一样的白色？

![在此处输入图像描述](../Images/01c8d44c516d025faa028f0c5f147059.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-29T05:37:04.687

您可以使用指定的 UITableView 属性：

```
tableView.sectionIndexColor = [UIColor brownColor];
tableView.sectionIndexBackgroundColor = [UIColor whiteColor];
tableView.sectionIndexTrackingBackgroundColor = [UIColor blueColor]; 
```

如果 Apple 更改他们的 UITableView 实现，乱搞底层 TableView 层可能会拒绝您的应用程序并且可能会中断。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-30T05:23:03.480

```
 its too much easy dude.

    - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {

        for(UIView *view in [tableView subviews])
        {
            if([[[view class] description] isEqualToString:@"UITableViewIndex"])
            {
            [view performSelector:@selector(setIndexColor:) withObject:[UIColor whiteColor]];

//give color which you want 
            }
        }

        static NSString *MyIdentifier = @"MyIdentifier";

    //go further with table cell design...

    } 
```

# windows - 配置 Tomcat 内存（用于 Apache Tomcat 的 6 GB 专用 RAM）

> ID：12849116
> 
> 赞同：0
> 
> 时间：2012-10-11T21:52:37.783
> 
> 标签：windows, apache, tomcat, memory, jvm

我正在尝试扩展专用于 JVM 的内存。在我的`calatlina.bat`配置文件中。我如何才能至少致力于`6 GB of memory`Java 虚拟机 (JVM)？下面是我的`catalina.bat file`。

```
@echo off
rem Licensed to the Apache Software Foundation (ASF) under one or more
rem contributor license agreements.  See the NOTICE file distributed with
rem this work for additional information regarding copyright ownership.
rem The ASF licenses this file to You under the Apache License, Version 2.0
rem (the "License"); you may not use this file except in compliance with
rem the License.  You may obtain a copy of the License at
rem
rem     http://www.apache.org/licenses/LICENSE-2.0
rem
rem Unless required by applicable law or agreed to in writing, software
rem distributed under the License is distributed on an "AS IS" BASIS,
rem WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
rem See the License for the specific language governing permissions and
rem limitations under the License.

if "%OS%" == "Windows_NT" setlocal
rem ---------------------------------------------------------------------------
rem Start/Stop Script for the CATALINA Server
rem
rem Environment Variable Prerequisites
rem
rem   CATALINA_HOME   May point at your Catalina "build" directory.
rem
rem   CATALINA_BASE   (Optional) Base directory for resolving dynamic portions
rem                   of a Catalina installation.  If not present, resolves to
rem                   the same directory that CATALINA_HOME points to.
rem
rem   CATALINA_OPTS   (Optional) Java runtime options used when the "start",
rem                   or "run" command is executed.
rem
rem   CATALINA_TMPDIR (Optional) Directory path location of temporary directory
rem                   the JVM should use (java.io.tmpdir).  Defaults to
rem                   %CATALINA_BASE%\temp.
rem
rem   JAVA_HOME       Must point at your Java Development Kit installation.
rem                   Required to run the with the "debug" argument.
rem
rem   JRE_HOME        Must point at your Java Runtime installation.
rem                   Defaults to JAVA_HOME if empty.
rem
rem   JAVA_OPTS       (Optional) Java runtime options used when the "start",
rem                   "stop", or "run" command is executed.
rem
rem   JAVA_ENDORSED_DIRS (Optional) Lists of of semi-colon separated directories
rem                   containing some jars in order to allow replacement of APIs 
rem                   created outside of the JCP (i.e. DOM and SAX from W3C). 
rem                   It can also be used to update the XML parser implementation.
rem                   Defaults to $CATALINA_HOME/endorsed.
rem
rem   JPDA_TRANSPORT  (Optional) JPDA transport used when the "jpda start"
rem                   command is executed. The default is "dt_socket".
rem
rem   JPDA_ADDRESS    (Optional) Java runtime options used when the "jpda start"
rem                   command is executed. The default is 8000.
rem
rem   JPDA_SUSPEND    (Optional) Java runtime options used when the "jpda start"
rem                   command is executed. Specifies whether JVM should suspend
rem                   execution immediately after startup. Default is "n".
rem
rem   JPDA_OPTS       (Optional) Java runtime options used when the "jpda start"
rem                   command is executed. If used, JPDA_TRANSPORT, JPDA_ADDRESS,
rem                   and JPDA_SUSPEND are ignored. Thus, all required jpda
rem                   options MUST be specified. The default is:
rem
rem                   -agentlib:jdwp=transport=%JPDA_TRANSPORT%,
rem                       address=%JPDA_ADDRESS%,server=y,suspend=%JPDA_SUSPEND%
rem
rem   LOGGING_CONFIG  (Optional) Override Tomcat's logging config file
rem                   Example (all one line)
rem                   set LOGGING_CONFIG="-Djava.util.logging.config.file=%CATALINA_BASE%\conf\logging.properties"
rem
rem   LOGGING_MANAGER (Optional) Override Tomcat's logging manager 
rem                   Example (all one line)
rem                   set LOGGING_MANAGER="-Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager"
rem
rem   TITLE           (Optional) Specify the title of Tomcat window. The default
rem                   TITLE is Tomcat if it's not specified.
rem                   Example (all one line)
rem                   set TITLE=Tomcat.Cluster#1.Server#1 [%DATE% %TIME%]
rem
rem
rem
rem $Id: catalina.bat 1146097 2011-07-13 15:25:05Z markt $
rem ---------------------------------------------------------------------------

rem Guess CATALINA_HOME if not defined
set "CURRENT_DIR=%cd%"
if not "%CATALINA_HOME%" == "" goto gotHome
set "CATALINA_HOME=%CURRENT_DIR%"
if exist "%CATALINA_HOME%\bin\catalina.bat" goto okHome
cd ..
set "CATALINA_HOME=%cd%"
cd "%CURRENT_DIR%"
:gotHome
if exist "%CATALINA_HOME%\bin\catalina.bat" goto okHome
echo The CATALINA_HOME environment variable is not defined correctly
echo This environment variable is needed to run this program
goto end
:okHome

rem Copy CATALINA_BASE from CATALINA_HOME if not defined
if not "%CATALINA_BASE%" == "" goto gotBase
set "CATALINA_BASE=%CATALINA_HOME%"
:gotBase

rem Ensure that any user defined CLASSPATH variables are not used on startup,
rem but allow them to be specified in setenv.bat, in rare case when it is needed.
set CLASSPATH=

rem Get standard environment variables
if not exist "%CATALINA_BASE%\bin\setenv.bat" goto checkSetenvHome
call "%CATALINA_BASE%\bin\setenv.bat"
goto setenvDone
:checkSetenvHome
if exist "%CATALINA_HOME%\bin\setenv.bat" call "%CATALINA_HOME%\bin\setenv.bat"
:setenvDone

rem Get standard Java environment variables
if exist "%CATALINA_HOME%\bin\setclasspath.bat" goto okSetclasspath
echo Cannot find "%CATALINA_HOME%\bin\setclasspath.bat"
echo This file is needed to run this program
goto end
:okSetclasspath
set "BASEDIR=%CATALINA_HOME%"
call "%CATALINA_HOME%\bin\setclasspath.bat" %1
if errorlevel 1 goto end

if not "%CATALINA_TMPDIR%" == "" goto gotTmpdir
set "CATALINA_TMPDIR=%CATALINA_BASE%\temp"
:gotTmpdir

rem Add tomcat-juli.jar and bootstrap.jar to classpath
rem tomcat-juli.jar can be over-ridden per instance
rem Note that there are no quotes as we do not want to introduce random
rem quotes into the CLASSPATH
if "%CLASSPATH%" == "" goto emptyClasspath
set "CLASSPATH=%CLASSPATH%;"
:emptyClasspath
if "%CATALINA_BASE%" == "%CATALINA_HOME%" goto juliClasspathHome
if not exist "%CATALINA_BASE%\bin\tomcat-juli.jar" goto juliClasspathHome
set "CLASSPATH=%CLASSPATH%%CATALINA_BASE%\bin\tomcat-juli.jar;%CATALINA_HOME%\bin\bootstrap.jar"
goto juliClasspathDone
:juliClasspathHome
set "CLASSPATH=%CLASSPATH%%CATALINA_HOME%\bin\bootstrap.jar"
:juliClasspathDone

if not "%LOGGING_CONFIG%" == "" goto noJuliConfig
set LOGGING_CONFIG=-Dnop
if not exist "%CATALINA_BASE%\conf\logging.properties" goto noJuliConfig
set LOGGING_CONFIG=-Djava.util.logging.config.file="%CATALINA_BASE%\conf\logging.properties"
:noJuliConfig
set JAVA_OPTS=%JAVA_OPTS% %LOGGING_CONFIG%

if not "%LOGGING_MANAGER%" == "" goto noJuliManager
set LOGGING_MANAGER=-Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager
:noJuliManager
set JAVA_OPTS=%JAVA_OPTS% %LOGGING_MANAGER%

rem ----- Execute The Requested Command ---------------------------------------

echo Using CATALINA_BASE:   "%CATALINA_BASE%"
echo Using CATALINA_HOME:   "%CATALINA_HOME%"
echo Using CATALINA_TMPDIR: "%CATALINA_TMPDIR%"
if ""%1"" == ""debug"" goto use_jdk
echo Using JRE_HOME:        "%JRE_HOME%"
goto java_dir_displayed
:use_jdk
echo Using JAVA_HOME:       "%JAVA_HOME%"
:java_dir_displayed
echo Using CLASSPATH:       "%CLASSPATH%"

set _EXECJAVA=%_RUNJAVA%
set MAINCLASS=org.apache.catalina.startup.Bootstrap
set ACTION=start
set SECURITY_POLICY_FILE=
set DEBUG_OPTS=
set JPDA=

if not ""%1"" == ""jpda"" goto noJpda
set JPDA=jpda
if not "%JPDA_TRANSPORT%" == "" goto gotJpdaTransport
set JPDA_TRANSPORT=dt_socket
:gotJpdaTransport
if not "%JPDA_ADDRESS%" == "" goto gotJpdaAddress
set JPDA_ADDRESS=8000
:gotJpdaAddress
if not "%JPDA_SUSPEND%" == "" goto gotJpdaSuspend
set JPDA_SUSPEND=n
:gotJpdaSuspend
if not "%JPDA_OPTS%" == "" goto gotJpdaOpts
set JPDA_OPTS=-agentlib:jdwp=transport=%JPDA_TRANSPORT%,address=%JPDA_ADDRESS%,server=y,suspend=%JPDA_SUSPEND%
:gotJpdaOpts
shift
:noJpda

if ""%1"" == ""debug"" goto doDebug
if ""%1"" == ""run"" goto doRun
if ""%1"" == ""start"" goto doStart
if ""%1"" == ""stop"" goto doStop
if ""%1"" == ""version"" goto doVersion

echo Usage:  catalina ( commands ... )
echo commands:
echo   debug             Start Catalina in a debugger
echo   debug -security   Debug Catalina with a security manager
echo   jpda start        Start Catalina under JPDA debugger
echo   run               Start Catalina in the current window
echo   run -security     Start in the current window with security manager
echo   start             Start Catalina in a separate window
echo   start -security   Start in a separate window with security manager
echo   stop              Stop Catalina
echo   version           What version of tomcat are you running?
goto end

:doDebug
shift
set _EXECJAVA=%_RUNJDB%
set DEBUG_OPTS=-sourcepath "%CATALINA_HOME%\..\..\java"
if not ""%1"" == ""-security"" goto execCmd
shift
echo Using Security Manager
set "SECURITY_POLICY_FILE=%CATALINA_BASE%\conf\catalina.policy"
goto execCmd

:doRun
shift
if not ""%1"" == ""-security"" goto execCmd
shift
echo Using Security Manager
set "SECURITY_POLICY_FILE=%CATALINA_BASE%\conf\catalina.policy"
goto execCmd

:doStart
shift
if not "%OS%" == "Windows_NT" goto noTitle
if "%TITLE%" == "" set TITLE=Tomcat
set _EXECJAVA=start "%TITLE%" %_RUNJAVA%
goto gotTitle
:noTitle
set _EXECJAVA=start %_RUNJAVA%
:gotTitle
if not ""%1"" == ""-security"" goto execCmd
shift
echo Using Security Manager
set "SECURITY_POLICY_FILE=%CATALINA_BASE%\conf\catalina.policy"
goto execCmd

:doStop
shift
set ACTION=stop
set CATALINA_OPTS=
goto execCmd

:doVersion
%_EXECJAVA% -classpath "%CATALINA_HOME%\lib\catalina.jar" org.apache.catalina.util.ServerInfo
goto end

:execCmd
rem Get remaining unshifted command line arguments and save them in the
set CMD_LINE_ARGS=
:setArgs
if ""%1""=="""" goto doneSetArgs
set CMD_LINE_ARGS=%CMD_LINE_ARGS% %1
shift
goto setArgs
:doneSetArgs

rem Execute Java with the applicable properties
if not "%JPDA%" == "" goto doJpda
if not "%SECURITY_POLICY_FILE%" == "" goto doSecurity
%_EXECJAVA% %JAVA_OPTS% %CATALINA_OPTS% %DEBUG_OPTS% -Djava.endorsed.dirs="%JAVA_ENDORSED_DIRS%" -classpath "%CLASSPATH%" -Dcatalina.base="%CATALINA_BASE%" -Dcatalina.home="%CATALINA_HOME%" -Djava.io.tmpdir="%CATALINA_TMPDIR%" %MAINCLASS% %CMD_LINE_ARGS% %ACTION%
goto end
:doSecurity
%_EXECJAVA% %JAVA_OPTS% %CATALINA_OPTS% %DEBUG_OPTS% -Djava.endorsed.dirs="%JAVA_ENDORSED_DIRS%" -classpath "%CLASSPATH%" -Djava.security.manager -Djava.security.policy=="%SECURITY_POLICY_FILE%" -Dcatalina.base="%CATALINA_BASE%" -Dcatalina.home="%CATALINA_HOME%" -Djava.io.tmpdir="%CATALINA_TMPDIR%" %MAINCLASS% %CMD_LINE_ARGS% %ACTION%
goto end
:doJpda
if not "%SECURITY_POLICY_FILE%" == "" goto doSecurityJpda
%_EXECJAVA% %JAVA_OPTS% %CATALINA_OPTS% %JPDA_OPTS% %DEBUG_OPTS% -Djava.endorsed.dirs="%JAVA_ENDORSED_DIRS%" -classpath "%CLASSPATH%" -Dcatalina.base="%CATALINA_BASE%" -Dcatalina.home="%CATALINA_HOME%" -Djava.io.tmpdir="%CATALINA_TMPDIR%" %MAINCLASS% %CMD_LINE_ARGS% %ACTION%
goto end
:doSecurityJpda
%_EXECJAVA% %JAVA_OPTS% %CATALINA_OPTS% %JPDA_OPTS% %DEBUG_OPTS% -Djava.endorsed.dirs="%JAVA_ENDORSED_DIRS%" -classpath "%CLASSPATH%" -Djava.security.manager -Djava.security.policy=="%SECURITY_POLICY_FILE%" -Dcatalina.base="%CATALINA_BASE%" -Dcatalina.home="%CATALINA_HOME%" -Djava.io.tmpdir="%CATALINA_TMPDIR%" %MAINCLASS% %CMD_LINE_ARGS% %ACTION%
goto end

:end 
```

# php - mysql WHERE行=多个值

> ID：12849122
> 
> 赞同：0
> 
> 时间：2012-10-11T21:53:15.237
> 
> 标签：php, mysql, mysqli

有没有更好的方法来选择其中 shop_area = 一系列不同的值 - 目前我在数组上使用 php foreach 输出这个

```
SELECT * FROM Shop_id WHERE scheduled = '0' && end_date >= CURDATE() && (shop_area = '757' OR shop_area = '804' OR shop_area = '540' OR shop_area = '252'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T21:55:15.707

```
SELECT *
FROM Shop_id
WHERE
   scheduled = '0'
   && end_date >= CURDATE()
   && shop_area IN('757','804','540','252'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T21:55:19.903

您可以使用[`IN`](https://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_in)：

> ## expr IN（值，...）
> 
> 如果 expr 等于 IN 列表中的任何值，则返回 1，否则返回 0。

所以像：

```
... && shop_area IN('757', '804', '540', '252') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T21:55:39.593

...`WHERE shop_area in (804, 540, 252)`

# html - 以 Twitter Bootstrap 为中心不起作用

> ID：12849130
> 
> 赞同：0
> 
> 时间：2012-10-11T21:53:36.513
> 
> 标签：html, css, twitter-bootstrap

我认为`text-align`在 Twitter Bootstrap 中有效，但它没有？我不确定发生了什么事。有没有居中的替代方法，还是我只需要使用边距？很抱歉风格过大`text-align`。我只是想确保我没有遗漏任何东西。

```
<div class="row-fluid span12" style="text-align:center;">
    <ul class="nav nav-pills" style="text-align:center;">
        <li style="text-align:center;">Skills</li>
        <li style="text-align:center;">Music</li>
        <li style="text-align:center;">Things I Read</li>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T21:58:44.303

我认为这可能是因为引导程序将锚设置为显示：块。文本对齐适用于内联和内联块元素。您是否以其他方式自定义了引导 css？导航药丸无论如何都应该使文本居中，除非您指定了宽度，因为它应该只是为块级锚元素添加均匀的填充。

# postgresql - 使用函数结果作为 PostgreSQL 查询中的列

> ID：12849132
> 
> 赞同：1
> 
> 时间：2012-10-11T21:53:37.343
> 
> 标签：postgresql, postgresql-9.1

我正在使用 PostgreSQL 9.1，假设我在 PostgreSQL 中有一个类型，例如：

```
CREATE TYPE sticker AS (
    customer_id integer,
    customer_machine_id integer,
); 
```

我有一个名为 get_sticker 的 plpgsql，它返回类型贴纸......

我可以很好地做到这一点：

```
select get_sticker(a_value), * from foo_bar; 
```

但是，这会以元组的形式返回结果（这完全有道理）。但是，我怎样才能将（基本上解包）转换为列？

看起来它会像下面这样，但它失败了。

```
select get_sticker(a_value).*, * from foo_bar;  -- <<<< FAIL 
```

错误信息：

```
ERROR: syntax error at or near "."
SQL state: 42601 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T23:36:33.840

您需要一组额外的括号：

```
select (get_sticker(a_value)).*, * from foo_bar; 
```

# c# - 如何将字符串转换为 ToString("#,##0") 格式

> ID：12849137
> 
> 赞同：2
> 
> 时间：2012-10-11T21:53:47.237
> 
> 标签：c#

在我的应用程序中，我用我的标签更新了我的 ui，我想以 #,##0 格式显示数字。myClass.getNumberOfFiles 返回字符串。

```
myLabel.Text = myClass.getNumberOfFiles(); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-11T21:57:23.787

假设`getNumberOfFiles`返回一个字符串（按其名称，它不应该）：

```
myLabel.Text = int.Parse(myClass.getNumberOfFiles()).ToString("#,##0"); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-11T21:57:37.313

我怀疑您想要[标准的“数字”格式说明符](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx#NFormatString)，精度为 0：

```
label.Text = GetNumberOfFiles().ToString("N0"); 
```

这是*在*您将`getNumberOfFiles()`方法固定为`GetNumberOfFiles()`（命名约定）并使其返回`int`或`long`（用于获取*数字*的方法不应返回*字符串*）之后。

这将为当前文化使用适当的分组；如果您想要不同的文化，您可以将其指定为第二个参数。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-11T22:07:42.603

```
int files;
if (int.TryParse(myClass.getNumberOfFiles(), out files)) {
    myLabel.Text = files.ToString("N0");
} 
```

如果您在我认为的数字中已经有任何格式，这将不起作用。如果在 getNumberOfFiles() 返回时有人将 int 转换为字符串，它将起作用。如果 getNumberOfFiles() 返回一个格式化的字符串，你需要做一些不同的事情。下面假设格式是 en-US 格式，例如，您想用巴西葡萄牙语显示它。它以详细的方式显示，因此您知道如何在需要时插入其他文化。如果它已格式化并且不需要在文化之间进行更改，我不知道为什么您不能直接将 getNumberOfFiles() 的返回分配给标签的 Text 属性。

```
int files;
var incomingCulture = CultureInfo.CreateSpecificCulture("en-US");
var outgoingCulture = CultureInfo.CreateSpecificCulture("pt-BR");
if (int.TryParse(myClass.getNumberOfFiles(), NumberStyles.Number, incomingCulture, out files)) {
    myLabel.Text = files.ToString("N0", outgoingCulture);
} 
```

话虽如此，我同意所有其他人的说法，即返回整数字符串是荒谬的。但我知道有时你没有能力改变它。

我还要指出，如果您使用命名的格式说明符，例如“N0”，那么有一天，当您必须全球化您的代码时，一位落后于您的程序员会在心里祝福您。这是因为每个 CultureInfo 实例都有每个命名格式的实现，但是它不可能有自定义格式说明符的实现。

# java - 关闭日志文件

> ID：12849138
> 
> 赞同：7
> 
> 时间：2012-10-11T21:54:00.590
> 
> 标签：java, linux, logging, java.util.logging

这个项目是传给我的，所以不太了解。有一种使用日志（java.util.logging.Logger）的方法，它会创建两个日志文件：

第一个文件：fileName.log

第二个文件：fileName.log.lck

在 Linux 中，当我这样做时`lsof`，我看到这两个文件是打开的。如何关闭这两个文件？

我要关闭这些文件的原因是这种方法每天运行多次，几周后打开文件的数量达到限制（大约 1000 个），此时我们的系统停止工作。当我们重新启动我们的进程（执行日志记录的“作业控制器”）时，打开的日志文件数变为 0，并且它再次工作。

这就是日志记录所做的工作

```
private static Logger log = Logger.getLogger(MyClass.class.getPackage().getName());
try{
    log.logp(Level.SEVERE, "com.MyClass", "run", "It failed");
} 
```

这是我试图关闭 finally 块中的文件但它没有用

```
finally{
    Handler[] handler =   log.getHandlers();
    for(Handler h: handler){
        h.close();
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-04-09T08:34:59.690

我只是使用：

```
LogManager.getLogManager().reset(); 
```

这将取消您的所有日志设置（日志文件路径、文件名模式、格式化程序...），但它将停止使用记录器关闭锁定文件并将记录器释放到

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T06:59:43.637

**第一个解决方案**

如果您不想修改代码，请使用：[如何将 java.util.logging 发送到 log4j？](https://stackoverflow.com/q/869945/651140) [java.util.logging.Logger 到使用 SLF4J 的 Logback？](https://stackoverflow.com/q/6020545/651140)

我使用[log4j](http://www.velocityreviews.com/forums/t137222-dailyrollingfileappender-and-log4j-xml.html)或[logback](http://logback.qos.ch/manual/appenders.html)。两者都有滚动文件附加器（旧文件被删除）或日期/时间文件附加器。

**第二种解决方案**

对于记录，最好的用法是滚动文件。

```
String filePattern = " fileName%.log";
int limit = 1000 * 1000; // 1 Mb
int numLogFiles = 3;
FileHandler fh = new FileHandler(filePattern, limit, numLogFiles);

// Add to logger
Logger logger = Logger.getLogger(MyClass.class.getPackage().getName());
logger.addHandler(fh); 
```

我不知道您是否可以添加全局文件处理程序。

# postgresql - 确保主题标签在搜索中匹配，它匹配整个主题标签

> ID：12849139
> 
> 赞同：3
> 
> 时间：2012-10-11T21:54:13.017
> 
> 标签：postgresql, search, hashtag

我有一个使用主题标签来帮助标记帖子的应用程序。我正在尝试进行更详细的搜索。

假设我正在搜索的记录之一是：

```
The #bird flew very far. 
```

当我搜索“fly”、“fle”或“#bird”时，它应该返回记录。

但是，当我搜索“#bir”时，它不应该返回句子，因为正在搜索的整个标签都不匹配。

我也不确定“鸟”是否应该返回句子。不过，我也会对如何做到这一点感兴趣。

现在，我有一个非常基本的搜索：

```
SELECT "posts".* FROM "posts" WHERE (body LIKE '%search%') 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T22:43:19.960

你可以用 LIKE 做到这一点，但这会很可怕，正则表达式在这里会更好地为你服务。如果您想忽略哈希，那么像这样的简单搜索就可以解决问题：

```
WHERE body ~ E'\\mbird\M'' 
```

那会找到`'The bird flew very far.'`and `'The #bird flew very far.'`。你想`#`在搜索之前去掉任何 s ，尽管这样：

```
WHERE body ~ E'\\m#bird\M'' 
```

[`\m`由于 和 的性质，`\M`](http://www.postgresql.org/docs/current/static/functions-matching.html#POSIX-CONSTRAINT-ESCAPES-TABLE)找不到这些结果中的任何一个。

如果您不想忽略`#`s in`body`那么您必须自己扩展和修改`\m`和`\M`快捷方式，如下所示：

```
WHERE body ~ E'(^|[^\\w#])#bird($|[^\\w#])'
--   search term goes here^^^^^ 
```

使用`E'(^|[^\\w#])#bird($|[^\\w#])'`会找到`'The #bird flew very far.'`但不会`'The bird flew very far.'`，而`E'(^|[^\\w#])bird($|[^\\w#])'`会发现`'The bird flew very far.'`但不会`'The #bird flew very far.'`。您可能还想查看`\A`而不是`^`和`\Z`而不是`$`因为存在[细微的差异](http://www.postgresql.org/docs/current/static/functions-matching.html#POSIX-MATCHING-RULES)，但我认为`$`并且`^`会是您想要的。

您应该记住，这些正则表达式搜索（或您的 LIKE 搜索）都不会使用索引，因此您正在为大量表扫描和性能问题设置自己，除非您可以使用将使用的东西来限制搜索指数。您可能想查看全文搜索解决方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-14T05:06:47.170

当文章被插入/更新时，它可能有助于从文本中解析哈希标签并将它们存储在一个名为 say hashtags 的单独列中的数组中。`body`在将它们送入物品之前将它们从物品中取出并将其`to_tsvector`存储`tsvector`在表格的一列中。然后使用：

```
WHERE body_tsvector @@ to_tsquery('search') OR 'search' IN hashtags 
```

您可以在表上使用触发器来维护`hashtags`列并`body_tsvector`去除哈希标记，这样应用程序就不必执行这项工作。`INSERT`当条目为ed 或`UPDATE`d时，将它们从文本中解析出来。

# mysql - JSON 解析 MySQL 字段，里面有 JSON

> ID：12849144
> 
> 赞同：1
> 
> 时间：2012-10-11T21:54:40.517
> 
> 标签：mysql, ios, database, json, field

对不起，如果这是一个愚蠢的问题。我的问题是我想制作一个 PHP 文件，以 JSON 格式解析 MySQL 表的内容。问题是我有一个字段，其中包含带有断线的 JSON：

```
 {
"6cb20a9f-27fa-4d98-ac2e-e959eb3f0f63":  {
    "file": "",
    "title": "",
    "link": "",
    "target": "0",
    "rel": ""
},
"43aa1b15-986e-4303-afcf-628b835f10e5":  {
    "0":  {
        "value": "<p>This is an example description.<\/p>"
    }
},
"97dacf42-398b-45c5-8536-baec4250b27e":  {
    "0":  {
        "value": "2012-10-19 00:00:00"
    }
},
"20fec805-ebb1-4045-9f3d-ea90ad952e91":  {
    "0":  {
        "value": "A restaurant"
    }
} 
```

}

所以在使用 PHP 的那一刻，它看起来像这样：

[PHP 失败](http://diganyo.mx/phpfail.png)

我能做些什么来避免 \n 和 \t，因为我正在将此解析发送到 iphone 应用程序并且它无法识别它。谢谢！

PHP 代码是这样的：

```
<?php>
$link = mysql_pconnect("localhost", "root", "") or die("Could not connect");
mysql_select_db("test") or die("Could not select database");
$arr = array();
$rs = mysql_query("SELECT * FROM people");
while($obj = mysql_fetch_object($rs)) {$arr[] = $obj;
}
echo '{"members":'.json_encode($arr).'}';
?> 
```

# objective-c - UILabel 不显示 inputView

> ID：12849146
> 
> 赞同：6
> 
> 时间：2012-10-11T21:54:52.260
> 
> 标签：objective-c, ios, xcode

我会使用 UILabel 来允许用户使用 UIDatePicker 选择日期。

为此，我创建了一个 UILabel 子类，覆盖了 inputView 和 inputAccessoryView 属性，使它们可写；我还实现了 -(BOOL) canBecomeFirstResponder 和 -(BOOL) isUserInteractionEnabled 方法，两者都返回 YES。然后我将一个 UIDatePIcker 实例分配给 inputView 属性。

在这一点上，我的期望是当标签被点击时，应该会出现一个 UIDatePicker，但什么也没有发生。

有什么帮助吗？

这是代码：

```
YPInteractiveUILabel.h

@interface YPInteractiveUILabel : UILabel
    @property (readwrite) UIView *inputView;
    @property (readwrite) UIView *inputAccessoryView;

- (BOOL) canBecomeFirstResponder;
- (BOOL) isUserInteractionEnabled;
@end

YPInteractiveUILabel.h

#import "YPInteractiveUILabel.h"

@implementation YPInteractiveUILabel

- (id)initWithCoder:(NSCoder *)aDecoder
{
    self = [super initWithCoder:aDecoder];

    if (self)
    {
        UIDatePicker *datePicker = [[UIDatePicker alloc] init];
        [self  setInputView:datePicker];
    }

    return self;
}

- (BOOL)isUserInteractionEnabled
{
    return YES;
}

- (BOOL)canBecomeFirstResponder
{
    return YES;
}

@end 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2016-08-06T11:18:35.983

UILabel + UIDatePicker -- 带有完成按钮的 Swift 版本。

```
import UIKit

class DatePickerLabel: UILabel {

    private let _inputView: UIView? = {
        let picker = UIDatePicker()
        return picker
    }()

    private let _inputAccessoryToolbar: UIToolbar = {
        let toolBar = UIToolbar()
        toolBar.barStyle = UIBarStyle.Default
        toolBar.translucent = true

        toolBar.sizeToFit()

        return toolBar
    }()

    override var inputView: UIView? {
        return _inputView
    }

    override var inputAccessoryView: UIView? {
        return _inputAccessoryToolbar
    }

    required init?(coder aDecoder: NSCoder) {
        super.init(coder: aDecoder)

        let doneButton = UIBarButtonItem(title: "Done", style: UIBarButtonItemStyle.Plain, target: self, action: #selector(doneClick))
        let spaceButton = UIBarButtonItem(barButtonSystemItem: UIBarButtonSystemItem.FlexibleSpace, target: nil, action: nil)

        _inputAccessoryToolbar.setItems([ spaceButton, doneButton], animated: false)

        let tapRecognizer = UITapGestureRecognizer(target: self, action: #selector(launchPicker))
        self.addGestureRecognizer(tapRecognizer)
    }

    override func canBecomeFirstResponder() -> Bool {
        return true
    }

    @objc private func launchPicker() {
        becomeFirstResponder()
    }

    @objc private func doneClick() {
        resignFirstResponder()
    }

} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-04-29T09:28:26.600

您可以只覆盖 inputView getter 方法，如[Apple 文档](https://developer.apple.com/library/ios/documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/InputViews/InputViews.html)中所述：

```
- (UIView *)inputView {
    return myInputView;
}
- (BOOL)canBecomeFirstResponder {
    return YES;
} 
```

然后添加手势或按钮调用 becomeFirstResponder：

```
- (void)showInputView:(id)sender {
     [self becomeFirstResponder];
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-12T00:07:58.553

这样的事情怎么样。与其子类化标签，只需为其添加一个手势识别器，并在点击识别器的处理程序中调出选择器。在选取器的操作方法中，填充标签并关闭选取器。此示例有效，但您可能需要添加一些动画以使其看起来更好：

```
- (void)viewDidLoad {
    [super viewDidLoad];
    self.label.userInteractionEnabled = YES;
    UITapGestureRecognizer *tapper = [[UITapGestureRecognizer alloc]initWithTarget:self action:@selector(launchPicker:)];
    [self.label addGestureRecognizer:tapper];
}

-(void)launchPicker:(UITapGestureRecognizer *) tapper {
    UIDatePicker *picker = [[UIDatePicker alloc] initWithFrame:CGRectMake(5, 150, 300, 200)];
    [picker addTarget:self action:@selector(updateLabel:) forControlEvents:UIControlEventValueChanged];
    [self.view addSubview:picker];
}

-(IBAction)updateLabel:(UIDatePicker *)sender {
    self.label.text = [NSString stringWithFormat:@"%@",sender.date ];
    [sender removeFromSuperview];
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-12T14:12:23.920

感谢这些建议（尤其是 NeverBe 的评论和 rdelmar 提出的答案），我在代码中发现了问题。简而言之，为了显示输入标签，需要在用户点击标签时调用 becomeFirstResponder 方法。

在更正了 UILabel 子类实现之后（头文件保持不变）：

```
@implementation YPInteractiveUILabel

- (id)initWithCoder:(NSCoder *)aDecoder
{
    self = [super initWithCoder:aDecoder];

    if (self)
    {
        UIDatePicker *datePicker = [[UIDatePicker alloc] init];
        [self  setInputView:datePicker];

        UITapGestureRecognizer *tapper = [[UITapGestureRecognizer alloc]initWithTarget:self action:@selector(launchPicker:)];
        [self addGestureRecognizer:tapper];

    }

    return self;
}

- (BOOL)isUserInteractionEnabled
{
    return YES;
}

- (BOOL)canBecomeFirstResponder
{
    return YES;
}

-(void)launchPicker:(UITapGestureRecognizer *) tapper
{
    [self becomeFirstResponder];
}

@end 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-09-03T13:57:48.323

这是@dmitriy-kirakosyan 更新到 Swift 5 的代码片段

```
class DatePickerLabel: UILabel {

    private let _inputView: UIView? = {
        let picker = UIDatePicker()
        return picker
    }()

    private let _inputAccessoryToolbar: UIToolbar = {
        let toolBar = UIToolbar()
        toolBar.barStyle = UIBarStyle.default
        toolBar.isTranslucent = true

        toolBar.sizeToFit()

        return toolBar
    }()

    override var inputView: UIView? {
        return _inputView
    }

    override var inputAccessoryView: UIView? {
        return _inputAccessoryToolbar
    }

    required init?(coder aDecoder: NSCoder) {
        super.init(coder: aDecoder)

        let doneButton = UIBarButtonItem(title: "Done", style: UIBarButtonItem.Style.plain, target: self, action: #selector(doneClick))
        let spaceButton = UIBarButtonItem(barButtonSystemItem: UIBarButtonItem.SystemItem.flexibleSpace, target: nil, action: nil)

        _inputAccessoryToolbar.setItems([ spaceButton, doneButton], animated: false)

        let tapRecognizer = UITapGestureRecognizer(target: self, action: #selector(launchPicker))
        self.addGestureRecognizer(tapRecognizer)
    }

    override var canBecomeFirstResponder: Bool {
        return true
    }

    @objc private func launchPicker() {
        becomeFirstResponder()
    }

    @objc private func doneClick() {
        resignFirstResponder()
    }

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-25T16:04:58.290

我知道这是一个老问题，但这可能对某人仍然有用。

还有另一种方法可以解决这个问题 - 无需使用手势识别器使事情复杂化......

**GTPDateLabel.h**

```
@interface GTPDateLabel : UILabel

@property (readonly, retain) UIView *inputView;

@end 
```

**GTPDateLabel.m**

```
#import "GTPDateLabel.h"

@implementation GTPDateLabel

@synthesize inputView = _inputView;

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];

    if (self)
    {
        self.userInteractionEnabled = YES;
    }

    return self;
}

- (id)initWithCoder:(NSCoder *)aDecoder
{
    self = [super initWithCoder:aDecoder];

    if (self)
    {
        self.userInteractionEnabled = YES;
    }

    return self;
}

-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    [super touchesEnded:touches withEvent:event];

    [self becomeFirstResponder];
}

- (BOOL)canBecomeFirstResponder
{
    return YES;
}

-(UIView *)inputView
{
    if (!_inputView)
    {
        UIDatePicker *datePicker = [[UIDatePicker alloc] init];

        _inputView = datePicker;
    }

    return _inputView;
}

@end 
```

请注意，您还应该设置`delegate`and 在自定义的情况下`UIPicker`也`dataSource`...

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-05-31T08:08:37.820

这是在 Swift 4`UILabel`中显示的`PickerView`

```
final class DatePickerLabel: UILabel {
  private let pickerView: UIPickerView
  private let toolbar: UIToolbar

  required init(pickerView: UIPickerView, toolbar: UIToolbar) {
    self.pickerView = pickerView
    self.toolbar = toolbar
    super.init(frame: .zero)

    let recogniser = UITapGestureRecognizer(target: self, action: #selector(tapped))
    addGestureRecognizer(recogniser)
  }

  required init?(coder aDecoder: NSCoder) {
    fatalError()
  }

  override var inputView: UIView? {
    return pickerView
  }

  override var inputAccessoryView: UIView? {
    return toolbar
  }

  override var canBecomeFirstResponder: Bool {
    return true
  }

  @objc private func tapped() {
    becomeFirstResponder()
  }
} 
```

# mysql - 根据 information_schema 中的 column_type 更改选择值

> ID：12849149
> 
> 赞同：0
> 
> 时间：2012-10-11T21:55:01.167
> 
> 标签：mysql

好的，我会尽快完成这个。下面我有一个选择，显示了所有具有`tinyint`data_type 的 column_names。使用下面返回的数据，我需要编写一个封闭的查询，从中选择`my_table`并更改`SELECT`数据的输出，我怀疑使用`CASE`when a `tinyint`is `0`to No 和`1`Yes。

```
 SELECT 
        COLUMN_NAME
    FROM
        INFORMATION_SCHEMA.COLUMNS
    WHERE
        table_name = 'my_table'
    AND DATA_TYPE = 'tinyint' 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T22:08:35.767

您在示例中的查询：

```
create table a ( i tinyint, b char(5));

SELECT 
        COLUMN_NAME,
        case  DATA_TYPE 
        when 'tinyint' then 'Yes' 
                       else 'No' 
        end    
    FROM
        INFORMATION_SCHEMA.COLUMNS
    WHERE
        table_name = 'a'; 
```

[结果](http://sqlfiddle.com/#!2/ca71a/9/0)

**已编辑**，因为 OP 失去了信心。

嗨大人，相信我你不想要！好的...欢迎来到动态 sql 的阴暗面：

```
create table a ( i tinyint, b char(5));
insert into a values (1,'si'),(0,'no');
SELECT @a := 
        concat( 
          'select ', 
          group_concat( 
            case  DATA_TYPE 
            when 'tinyint' then concat(
                                 'if( '       ,
                                 COLUMN_NAME           ,
                                 ' = 0, \'No\', \'Yes\' )'
                                )
                           else COLUMN_NAME            
            end                      
          ),
          ' from ',
          table_name ,
          ';'
        )
    FROM
        INFORMATION_SCHEMA.COLUMNS
    WHERE
        table_name = 'a';    
PREPARE stmt FROM @a;
EXECUTE stmt; 
```

[结果](http://www.sqlfiddle.com/#!2/1e473/3/3)

```
| IF( I = 0, 'NO', 'YES' ) |  B |
---------------------------------
|                      Yes | si |
|                       No | no | 
```

# android - Android Sockets 总是超时

> ID：12849161
> 
> 赞同：1
> 
> 时间：2012-10-11T21:55:29.817
> 
> 标签：android, sockets

我有一个通过套接字连接到服务器的类，由于某种原因，它总是从这里超时，我不知道为什么，起初我认为它与 onCreate() 有关，这就是为什么 doit () 甚至存在。任何帮助，将不胜感激。这是我的代码...

```
public class Ads extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_ads);
        doit();
    };
    public void doit(){
        Socket socket = null;
        FileOutputStream fos = null;
        DataInputStream dis = null;
        BufferedOutputStream buf = null;
        DataOutputStream dos = null;

        try {
            socket = new Socket("192.168.1.106", 4447);
            Bundle extras = getIntent().getExtras();

            String value = extras.getString("keyName");

            dos = new DataOutputStream(
                    new BufferedOutputStream(socket.getOutputStream()));
            dis = new DataInputStream(new BufferedInputStream(
                    socket.getInputStream()));
            //dos.writeChars(value);
            int numFiles = dis.readInt();
            File sdCard = Environment.getExternalStorageDirectory();
            File dir = new File (sdCard.getAbsolutePath() +value);
            dir.mkdirs();
            if (dir.isDirectory()) {
                String[] children = dir.list();
                for (int i=0; i<children.length; i++) {
                    new File(dir, children[i]).delete();
                }
            }
            int n = 0;
            int fileLength = 0;
            for (int i=0;i<numFiles;i++){
                File file = new File(dir, String.valueOf(i)+".png");
                Log.d("debug tag","created file "+file);
            }
            for (int i=0;i<numFiles;i++){
                fileLength = dis.readInt();

                byte[] temp = new byte[(int) fileLength];

                String path = sdCard.getAbsolutePath()+value+"/"+i+".png";
                buf = new BufferedOutputStream(new FileOutputStream(path));
                while ((fileLength > 0) && (n = dis.read(temp, 0, (int) Math.min(temp.length, fileLength))) != -1) {
                    buf.write(temp,0,n);
                    buf.flush();
                    fileLength -= n;
                }
                //buf.close();

            Log.d("debug tag","the file is "+temp.length+" bytes long");
            }
            // now read in text files

             n = 0;
             fileLength = 0;
            for (int i=0;i<numFiles;i++){
                File file = new File(dir, String.valueOf(i)+".txt");
                Log.d("debug tag","created file "+file);
            }
            for (int i=0;i<numFiles;i++){
                fileLength = dis.readInt();

                byte[] temp = new byte[(int) fileLength];

                String path = sdCard.getAbsolutePath()+value+"/"+i+".txt";
                buf = new BufferedOutputStream(new FileOutputStream(path));
                while ((fileLength > 0) && (n = dis.read(temp, 0, (int) Math.min(temp.length, fileLength))) != -1) {
                    buf.write(temp,0,n);
                    buf.flush();
                    fileLength -= n;
                }
                //buf.close();

            Log.d("debug tag","the text file is "+temp.length+" bytes long");
            }
            generateListView(sdCard.getAbsoluteFile()+value+"/");
        } catch (UnknownHostException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        finally{
            if (socket != null){
                try {
                    socket.close();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }

            if (fos != null){
                try {
                    fos.close();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }

            if (dis != null){
                try {
                    dis.close();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
            if (dos != null){
                try {
                    dos.close();
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        }
    }

; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T22:12:33.477

恐怕这个问题缺少一些重要的细节（连接时会超时，对吗？），但我的盲目猜测是您的设备正在使用蜂窝连接，而 192.168.1.106 在您的 WiFi 网络上 - 192.168.xx 池中的 IP是[私有 IP 地址](http://whatismyipaddress.com/private-ip)，显然您无法通过 Internet 连接到任何此类 IP 地址。

但是你的代码还有另一个严重的问题——你试图`onCreate()`在应用程序的主线程中执行阻塞 I/O 调用。你不应该这样做（实际上，一旦你在 Android 3.x 或更高版本上尝试它，你就会得到[NetworkOnMainThreadException](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)）。网络 I/O 应该总是发生在另一个线程中，或者显式地，或者可能使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)（它为你运行后台线程）。

有关好的介绍，请参阅[这篇文章](http://android-developers.blogspot.com/2009/05/painless-threading.html)和[Designing for Responsiveness](http://developer.android.com/guide/practices/responsiveness.html)指南。

# ruby-on-rails-3 - FactoryGirl 将 has_many 关系串在一起（即 User -> Blog -> Post ）

> ID：12849167
> 
> 赞同：0
> 
> 时间：2012-10-11T21:56:04.740
> 
> 标签：ruby-on-rails-3, factory-bot, rspec-rails

假设我有三个模型：用户、博客和帖子。我的用户模型将具有：

```
User Model
  has_one :blog
  has_many :posts through: :blog

Blog Model
  belongs_to :user
  has_many :posts

Post 
  belongs_to :blog 
```

当我做工厂时，我可以做这样的事情：

```
FactoryGirl.define do
  factory :post do
    title "something"
    content "long text"
    blog 
  end
end 
```

这会创建一个属于博客的帖子。我没有看到我应该放入的内容 :post 以便 FactoryGirl 创建用户，然后创建属于该用户的博客，然后创建属于该博客/用户的帖子。我并没有在 FactoryGirl 的文档中看到任何内容来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T19:06:29.477

```
FactoryGirl.define do

  factory :post do
    title "something"
    content "long text"
    blog 
  end

  factory :blog do
    user
    # blog attributes
  end

  factory :user do
    # user attributes
  end
end 
```

然后

```
@post = FactoryGirl.create(:post)
@blog = @post.blog
@user = @post.blog.user 
```

# heroku - 我可以在 heroku 上的域中添加一个特殊字符吗

> ID：12849168
> 
> 赞同：0
> 
> 时间：2012-10-11T21:56:08.920
> 
> 标签：heroku, dns, special-characters

我正在尝试将我的域添加到我的 heroku 应用程序中。

我跑：

```
heroku domains:add www.urlwithanñ.com 
```

我收到消息：“域无效”

¿ 这是因为 ñ 吗？

我已经成功注册了域名，所以它不会是无效的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T22:21:25.697

DNS 本身并不支持非 ASCII 字符，但[IDN](http://en.wikipedia.org/wiki/Internationalized_domain_name)最近的努力提供了一种将非 ASCII 字符映射到 DNS 支持的字符的方法。因为[Punycode](http://en.wikipedia.org/wiki/Punycode)，当收据上写着你买了`urlwithanñ.com`，就机器而言，你实际上拥有`xn--urlwithan-t6a.com`。

试试`heroku domains:add www.xn--urlwithan-t6a.com`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T23:13:25.227

带有特殊字符（如 ñ）的 URL 需要编码为 Punycode。

一个很好的工具是[http://punycoder.com/](http://punycoder.com/)网上还有很多其他的。

在 Heroku 中，您需要添加 Punyencoded 网址。

例如：对于 www.derosecerviño.com.ar，您需要添加 www.xn--derosecervio-khb.com.ar。

# html - CSS 调用样式

> ID：12849172
> 
> 赞同：-1
> 
> 时间：2012-10-11T21:56:27.747
> 
> 标签：html, css

我在这里有这个 CSS，但它不起作用:(

这是CSS

```
.wpsc-product .hentry{
    border-bottom: none;
    padding: 0 !important;
    position: relative;
} 
```

这就是我想要调用的

```
<article id="post-60" class="post-60 wpsc-product type-wpsc-product status-publish hentry"> 
```

我将如何申请这篇文章，它必须涉及 wpsc-product，因为这就是我的目标。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T21:58:42.577

`.wpsc-product .hentry`是一个组合选择器，它将匹配任何具有 hentry 类的元素，该类的祖先具有 wpsc-product 类，例如

```
<article class="wpsc-product"><section class="hentry"></section></article> 
```

你想要`.wpsc-product.hentry`（没有空间）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T21:58:31.530

删除 CSS 选择器中的空格

```
.wpsc-product.hentry { ... } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T21:58:38.030

该`article`元素只有在该类位于另一个元素内时才会获得您拥有的 CSS 规则`wpsc-product`，因为（空格）实际上是 CSS 中的运算符，这意味着第二个选择器是第一个选择器的后代（在内部）。

要选择具有*这两个*类的元素，请使用`.wpsc-product.hentry`作为选择器。选择器的串联需要元素上的所有选择器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T22:05:37.190

要处理具有多个类的标签，您应该使用 css 选择器，例如：

```
class1.class2.class3 { ... } 
```

在你的情况下：

```
.wpsc-product.hentry 
```

# r - 使用 ggplot2 纠正堆积面积图中的缺失值

> ID：12849175
> 
> 赞同：1
> 
> 时间：2012-10-11T21:56:47.567
> 
> 标签：r, ggplot2, missing-data, stacked-area-chart, stackedbarseries

我一直试图在堆积条形图/面积图的组合上重新创建这篇[文章。](http://groups.google.com/group/ggplot2/browse_thread/thread/594d6d321da7043e)不过，我有一些缺失值的问题。

这是我的数据：[https ://www.dropbox.com/sh/pnkspwnn1qslm6u/JapTKCwqMS](https://www.dropbox.com/sh/pnkspwnn1qslm6u/JapTKCwqMS)

我跑的是；

```
 wa=read.table('wa_class.txt', sep="", header=F, na.string="0")
    names(wa)=c("Class","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec")
    wam=melt(wa)
wam$variablen=as.numeric(wam$variable) 
```

它看起来如何

```
 > head(wam)
                   Class variable     value variablen
1         Actinobacteria      Jan 38.115163         1
2          Flavobacteria      Jan        NA         1
3        Sphingobacteria      Jan  3.640469         1
4    Alphaproteobacteria      Jan 13.631663         1
5 Betaproteobacteria_b28      Jan  3.718671         1
6     Betaproteobacteria      Jan 14.732354         1

ggplot(na.omit(wam[,c("Class","value","variablen")]), aes(wam,x=variablen, y=value, fill=Class)) + geom_area(color="black") + geom_linerange(aes(ymax=value), position="stack") + scale_x_continuous(breaks=1:max(wam$variablen)) + labs(title="Water", x="Month", y="Relative abundance (%)") 
```

...所以我尝试在我绘制的变量上使用 na.omit 来纠正缺失值。但是，我在图中得到了例如相互覆盖的图层（请参阅保管箱文件夹）。

我找到了这篇文章（见保管箱文件夹），它纠正了它，但似乎只有一个。而且我无法重现它，因为指向数据的链接已经失效。

任何帮助将不胜感激！

谢谢，

乔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T08:41:42.980

一种解决方案是将零读取为零值。如果你不使用`na.string="0"`，情节将如下所示：

![在此处输入图像描述](../Images/e55545e71fcecd489e1f5b3db838bbd7.png)

# iphone - 如何在 IOS 6 中切换视图

> ID：12849185
> 
> 赞同：-2
> 
> 时间：2012-10-11T21:57:29.000
> 
> 标签：iphone, objective-c, ios, xcode, ios6

我正在开发 ios 6 应用程序，需要在 2 个视图之间切换。我以这种方式为 ios 5 完成了它：

```
-(IBAction)BtnClicked:(id)sender

{

   MainViewController* mainView = [[MainViewController alloc] initWithNibName:nil
                                                              bundle:nil];

   mainView.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;

   [self presentModalViewController:mainView animated:NO];

} 
```

但是对于 ios 6 xcode 要求，`presentModalViewController`它已被弃用。那么怎么做这些东西呢？请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T22:00:25.910

阅读 UIViewController 文档，不推荐使用的方法和它们的替代品就在那里列出。

presentModalViewController:animated：向用户呈现由给定视图控制器管理的模态视图。（在 iOS 6.0 中已弃用。使用 presentViewController:animated:completion: 代替。）

检查[官方页面](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/doc/uid/TP40006926-AppendixA-DontLinkElementID_110)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-11T22:01:18.903

在 iOS6 中，该`presentModalViewController:animated:`方法已被弃用。你应该使用`presentViewController:animated:completion:`. 请参阅[此官方文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/presentViewController%3aanimated%3acompletion)以获取更多信息。

# java - 如何防止出现“需要身份验证”框？

> ID：12849187
> 
> 赞同：4
> 
> 时间：2012-10-11T21:57:32.073
> 
> 标签：java, .htaccess, authentication

我有一个 Java 小程序，它包含在通过 .htaccess 文件受密码保护的目录中的页面上。当浏览到此目录中的页面时，我自然必须在新会话开始时进行身份验证，但问题是每次页面加载时都会弹出这个 Java“需要身份验证”框。

我认为也许将小程序放在密码保护目录之外可能会解决问题，但没有乐趣。

知道可以做些什么来防止出现“需要身份验证”框吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T20:00:05.407

尽管我很喜欢赏金，但我相信这个问题是重复的（[如果使用了基本身份验证，Applet 会显示登录对话框](https://stackoverflow.com/questions/7395413/applet-displays-login-dialog-if-basic-authentication-used)）。我还认为，除了将 jar 文件从网站的受 htaccess 保护的区域中取出之外，目前没有其他解决方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T21:38:36.097

添加一个 .htpasswd 文件并设置 java 以对其进行身份验证怎么样？

如果您扩展您的问题，包括源代码和可能的目录树，我可能会提供一个示例。

# asp.net-mvc-4 - Visual Studio 2012 发布配置文件

> ID：12849189
> 
> 赞同：1
> 
> 时间：2012-10-11T21:57:39.260
> 
> 标签：asp.net-mvc-4, visual-studio-2012, publishing, publish-profiles

我最近一直在做一些工作，在 Visual Studio 2012 上发布 mvc 应用程序。我一直在使用发布配置文件将 Web 部署配置到不同的环境。我也一直在使用网络转换来根据我的每个发布配置文件转换我的 web.config。

对于我的每个目标环境，我都有 Web 部署和包发布配置文件。所以 dev 有 2 个，qa 有 2 个等等。这是为了让我可以选择 web 部署或打包。有什么方法可以让我拥有 web 部署配置文件，并且在我进行 web 部署之后，包也会被创建并放置在磁盘上？因此，每个环境我只需要一个发布配置文件。

如果每个环境需要 2 个发布配置文件，我可以将转换合并到一个转换文件中，而不是为每个配置文件进行转换 - 因为转换与目标环境相同。

# php - Wolfram Alpha php 实现问题

> ID：12849191
> 
> 赞同：0
> 
> 时间：2012-10-11T21:57:46.253
> 
> 标签：php, wolframalpha

我正在尝试在我的应用程序中实现 Wolfram Alpha API。我下载他们的语言库并在我的浏览器中加载他们的示例页面。

然而，我得到了

```
Warning: simplexml_load_file(http://api.wolframalpha.com/v1/query.jsp?appid=myid-8RJR4ELL82&input=pi): failed to open stream: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond. in C:\xampp\htdocs\wolfram\PHP_Binding_0_1\wa_wrapper\WolframAlphaEngine.php on line 47

Warning: simplexml_load_file(): I/O warning : failed to load external entity "http://api.wolframalpha.com/v1/query.jsp?appid=myid-8RJR4ELL82&input=pi" in C:\xampp\htdocs\wolfram\PHP_Binding_0_1\wa_wrapper\WolframAlphaEngine.php on line 47

Fatal error: Maximum execution time of 30 seconds exceeded in C:\xampp\htdocs\wolfram\PHP_Binding_0_1\wa_wrapper\WolframAlphaEngine.php on line 47 
```

我使用他们预制的 PHP 库并加载

```
http://localhost/wolfram/PHP_Binding_0_1/samples/simpleRequest.php?q=pi 
```

在我的地址栏中。

谁能帮我解决这个问题？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T22:02:35.070

> 超过 30 秒的最大执行时间

将请求超时设置为大于 30 秒的数字或获得更好的互联网连接。

您可以通过以下方式做到这一点：

[设置时间限制](http://php.net/manual/en/function.set-time-limit.php)

```
set_time_limit(120); // two minutes 
```

或者如果您使用的是 CURL 请求：

```
curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 120); 
```

或者，致电您的互联网提供商并要求将您的数据计划升级到更高数量的 mb/s。

它也将有助于发布您的代码。提到的解决此问题的方法是基于错误，这可能是另一个问题的结果。

# ruby-on-rails - Rails：捕获方法

> ID：12849195
> 
> 赞同：11
> 
> 时间：2012-10-11T21:58:17.647
> 
> 标签：ruby-on-rails

以下代码来自 Ryan Bates 的[RailsCasts](http://railscasts.com/episodes/213-calendars-revised?autoplay=true)，他在其中将博客的首页变成了日历，以便文章在几天内显示为链接。以下帮助模块创建日历。我对此代码有两个问题

1.  在`day_cell`方法中，他使用了一种叫做 的方法`capture`。我在上面找到了一些文档，但我仍然无法弄清楚捕获在这种情况下是如何工作的。另外，`&callback`作为参数传递给捕获的是什么？是否与`:callback`传递给 Struct.new 的相同？如果是这样，它是如何进入捕获的？传递给 Struct 的 :callback 是什么？

    ```
    def day_cell(day)
      content_tag :td, view.capture(day, &callback), class: day_classes(day)
    end 
    ```

**源代码**

```
module CalendarHelper
  def calendar(date = Date.today, &block)
    binding.pry
    Calendar.new(self, date, block).table

  end

  class Calendar < Struct.new(:view, :date, :callback)
    HEADER = %w[Sunday Monday Tuesday Wednesday Thursday Friday Saturday]
    START_DAY = :sunday

    delegate :content_tag, to: :view

    def table
      content_tag :table, class: "calendar" do
        header + week_rows
      end
    end

    def header
      content_tag :tr do
        HEADER.map { |day| content_tag :th, day }.join.html_safe
      end
    end

    def week_rows
      weeks.map do |week|
        content_tag :tr do
          week.map { |day| day_cell(day) }.join.html_safe
        end
      end.join.html_safe
    end

    def day_cell(day)
      content_tag :td, view.capture(day, &callback), class: day_classes(day)
    end

    def day_classes(day)
      classes = []
      classes << "today" if day == Date.today
      classes << "notmonth" if day.month != date.month
      classes.empty? ? nil : classes.join(" ")
    end

    def weeks
      first = date.beginning_of_month.beginning_of_week(START_DAY)
      last = date.end_of_month.end_of_week(START_DAY)
      (first..last).to_a.in_groups_of(7)
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-05T16:50:33.827

我做了我的研究，我终于解开了这个谜。

所以，有几件事要开始；像往常一样，[文档](http://apidock.com/rails/ActionView/Helpers/CaptureHelper/capture)不是很清楚，**capture(*args)**方法应该将一块模板抓取到一个变量中，但它并没有深入解释**您可以将变量传递给抓取的模板块**，这当然是以**块的形式出现的**

**来自Ryan Bate 的[Calendar Screen-cast的](http://railscasts.com/episodes/213-calendars-revised)**源代码**：**

 **```
<div id="articles">
  <h2 id="month">
    <%= link_to "<", date: @date.prev_month %>
    <%= @date.strftime("%B %Y") %>
    <%= link_to ">", date: @date.next_month %>
  </h2>
  <%= calendar @date do |date| %>
    <%= date.day %>
    <% if @articles_by_date[date] %>
      <ul>
        <% @articles_by_date[date].each do |article| %>
          <li><%= link_to article.name, article %></li>
        <% end %>
      </ul>
    <% end %>
  <% end %>
</div> 
```

在上面的代码中，该块将专门用于这部分：

```
do |date| %>
  <%= date.day %>
  <% if @articles_by_date[date] %>
    <ul>
      <% @articles_by_date[date].each do |article| %>
        <li><%= link_to article.name, article %></li>
      <% end %>
    </ul>
  <% end %>
<% end %> 
```

所以，当他打这个电话时：

```
content_tag :td, view.capture(day, &callback), class: day_classes(day) 
```

特别：

```
view.capture(day, &callback) 
```

这里发生的事情是他将**day**参数作为**|date|传递给***上面的 Block 。*参数（在块中）。

 **这里需要理解的是，在问题的背景下（制作 30 天日历）；**每月的每一天都与模板**（&回调）一起传递给捕获方法，这样做..结果为给定月份的每一天呈现上面的块。最后一步，当然是.. 将呈现的内容（每天）作为**content_tag 的内容：td**

最后一点；**Ryan 在视图**变量上调用 capture 方法，文档中也没有说明，但他在 ScreenCast 中确实提到他需要这个视图作为“代理”来访问视图，当然视图是只有一个可以访问 ViewHelper 方法。

所以，总而言之，它是非常漂亮的代码，但只有当你理解它的作用时它才会变得漂亮，所以，我同意乍一看非常令人困惑。

希望这会有所帮助，这是我能想到的最好的解释。:)****

# jquery - 新切换上的 jQuery 取消切换菜单

> ID：12849196
> 
> 赞同：0
> 
> 时间：2012-10-11T21:58:23.493
> 
> 标签：jquery, menu

我有这个小提琴：http: [//jsfiddle.net/9J5Fg/](http://jsfiddle.net/9J5Fg/)

当一个盒子打开并且我点击另一个盒子时，我想打开盒子关闭然后另一个盒子打开。

非常感谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T22:02:14.427

试试这个[http://jsfiddle.net/9J5Fg/2/](http://jsfiddle.net/9J5Fg/2/)

或者漂亮干净的 css3 版本[http://jsfiddle.net/9J5Fg/3/](http://jsfiddle.net/9J5Fg/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T22:08:56.133

您可以编写一个单击事件来处理这个..只需将类添加到两个 div 中，它应该可以正常工作..

**JS**

```
$('#tb1 , #tb2').click(function() {
    $('#box-1, #box-2').stop().animate({"height": '0px'}, 400);

    if ( $('#' + this.className).height() == 0) {
        $('#' + this.className).stop().animate({ "height": '50px' }, 400);
   }
}); 
```

**HTML**

```
<div id="btns">
    <span id="tb1" class="box-1">Toggle box-1</span>
    <span id="tb2" class="box-2">Toggle box-2</span>
</div> 
```

​<a href="http://jsfiddle.net/sushanth009/mZRRa/1/" rel="nofollow">查看演示

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T22:22:35.133

正是你需要的:)

首先，您必须确定正在单击哪个链接以及该链接所指的框。之后，您可以切换它的高度。然后你必须关闭其他人。

```
$('#tb2, #tb1').click(function() {
    var id = this.id.substr(-1),
        $box = $('#box-' + id),
        height = $box.height();

    // toggle box height
    $box.stop().animate({"height": (height == 50 ? 0 : 50) + 'px'}, 400);
    // close other boxes
    $('#container div').not($box).stop().animate({"height": '0px'}, 400);
}); 
```

[**演示**](http://jsfiddle.net/NE3HV/)

如果您查看[**此演示**](http://jsfiddle.net/GuxAg/1/)，您会发现如果您有 2 个以上的框，则此代码有效，您只需将点击选择器更改为`$('#btns span')`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-11T22:33:10.907

更抽象一点..如果您愿意更改您的html，可以更好地编码

```
$('#btns span').on('click', function () {

    var btnId = $(this).attr('id'),
        $container = $('#box-' + btnId.substr(2)),
        open = $container.height() > 0;

    $('#container div').not($container).stop(true, true).animate({"height": '0px'}, 400);

    $container.stop(true, true).animate({"height": (open ? '0px' : '50px')}, 400);
}) 
```

​</p>

[http://jsfiddle.net/9J5Fg/5/](http://jsfiddle.net/9J5Fg/5/)

# android - dx.bat 在处理 .class 文件时挂起

> ID：12849197
> 
> 赞同：0
> 
> 时间：2012-10-11T21:58:28.630
> 
> 标签：android

我正在使用 dx.bat 准备用于设备的 java 代码和 java 库。我有几个 .jar，并且该工具总是挂在同一个类上。它没有完成或报告任何错误。如果我删除包含该类的 .jar，则 dx.bat 会成功完成，但应用程序当然不会运行，因为缺少类。

导致问题的 .jar 是来自 Amazon 的 aws-android-sdk-1.4.0-core.jar。该类是 com/amazonaws/javax/xml/stream/StaxErrorReporter$1.class

我进行了广泛搜索，发现了其他 dx 错误，但不是这个。有没有其他人看到这种情况发生？

更新：我正在从挂起时制作的 java 构建工具运行 dx.bat。我尝试从 windows 命令行运行相同的命令，它运行得很好。所以问题似乎与java有关？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T21:19:13.927

好吧，事实证明问题出在我运行 dx.bat 的 java 代码上。这个问题在这里解释：

[具有输入/输出流的 Java 进程](https://stackoverflow.com/questions/3643939/java-process-with-input-output-stream)

我重定向了错误流，现在它正在工作。

# button - 如何在 iOS 6 上的 CustomPinView 上放置获取路线按钮？

> ID：12849203
> 
> 赞同：1
> 
> 时间：2012-10-11T21:58:45.227
> 
> 标签：button, maps, ios6, directions

我找不到任何说明在哪里可以将此按钮添加到我的 pinview 的文档。对于那些不知道我在说什么的人，这里有一张图片：

![它是绿色按钮，里面有一辆车](../Images/33214b0faa12b2ed09a8cba6bcc00d8d.png)

# ruby-on-rails - Rails 3 使用“非标准”REST API

> ID：12849205
> 
> 赞同：0
> 
> 时间：2012-10-11T21:58:59.093
> 
> 标签：ruby-on-rails, ruby, xml, ruby-on-rails-3, activeresource

我需要与一个似乎不能很好地与 ActiveResource 配合使用的 api 接口。食用它的最佳/最简单方法是什么？

我需要使用 api 进行各种读/写操作，包括处理一些相对简单的关系。

我进行了很多搜索，并试图让 ARES 屈服于我的意愿，但收效甚微。

请任何人都可以推荐策略/宝石来处理修改复杂的 url 路由和 xml 解码/编码模式的问题吗？

我更喜欢使用“面向未来”和“成熟”的东西，而不是似乎被 RoR 弃用的 ARES？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T22:25:19.343

我倾向于使用[active_model_serializers](https://github.com/josevalim/active_model_serializers)，但听起来您需要更多可定制的东西。你研究[过 RABL](https://github.com/nesquena/rabl)吗？从文档：

> RABL（Ruby API Builder Language）是一个 Rails 和 Padrino Ruby 模板系统，用于生成 JSON、XML、MessagePack、PList 和 BSON。当使用 ActiveRecord 'to_json' 方法时，我很快就会发现自己想要一个更有表现力和功能强大的解决方案来生成 API。当 JSON 表示复杂或与数据库中定义的确切模式不匹配时，这尤其令人沮丧。

# c# - 需要对gridview排序的解释

> ID：12849206
> 
> 赞同：0
> 
> 时间：2012-10-11T21:59:04.397
> 
> 标签：c#, sorting, gridview

由于我是 .NET 新手，因此我需要对以下代码进行解释。谁能给我解释？

```
protected void GridView1_Sort(object sender, GridViewSortEventArgs e)
{
    GridView grid = sender as GridView;

    DataTable dt = Session["List"] as DataTable;
    string month = System.DateTime.Now.AddMonths(-3).ToString("MMMM");
    if (dt != null)
    {
        dt.DefaultView.Sort = e.SortExpression + " " +     GetSortDirection(e.SortExpression);
        grid.DataSource = Session["List"];
        grid.DataBind();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T22:10:54.927

虽然这通常不是“解释我的代码”网站......

Grid[`Sort`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.sort.aspx)方法：根据指定的排序表达式和方向对 GridView 控件进行排序。

```
protected void GridView1_Sort(object sender, GridViewSortEventArgs e)
{ 
```

将发件人投射到 GridView。发送者始终是引发事件的控件。

```
GridView grid = sender as GridView; 
```

获取`GridView`from的 DataSource，`session`因为它是在上一个请求中存储在那里的。请注意，所有对象都在每个页面的生命周期结束时被释放，因此您需要将其保存在某个地方（会话、视图状态）或从您的 rdbms 再次加载它（推荐）。

```
DataTable dt = Session["List"] as DataTable; 
```

以下行是多余的，可以删除

```
string month = System.DateTime.Now.AddMonths(-3).ToString("MMMM"); 
```

我假设旧方向存储在 ViewState/Session 中，并且该`GetSortDirection`方法反转了排序方向（如果之前在该列上按 ASC 排序，则为 DESC，依此类推）。

```
string month = System.DateTime.Now.AddMonths(-3).ToString("MMMM");
if (dt != null)
{
    dt.DefaultView.Sort = e.SortExpression + " " +     GetSortDirection(e.SortExpression); // i assume that the old direction 
```

将其再次存储在 Session 中并数据绑定`GridView`.

```
 grid.DataSource = Session["List"];
        grid.DataBind();
    }
} 
```

# xcode - 如何让 Xcode 找到文件 FacebookSDK.h？

> ID：12849209
> 
> 赞同：47
> 
> 时间：2012-10-11T21:59:17.377
> 
> 标签：xcode, header-files, facebook-ios-sdk

它说“找不到 FacebookSDK/FacebookSDK.h 文件”

但是我可以在#import 上跳转到定义，它会将我带到文件中。

一旦我添加了#import，它现在就知道 FBFriendPickerDelegate 是什么，并且它现在在该行上没有错误。

我的项目和正确的文件夹中有 facebookSDK.framework。它是 SDK 3.1。我尝试将搜索路径添加到 /FacebookSDK 和 /FacebookSDK.framework 和 /FacebookSDK/Versions/A/Headers 等。我还尝试了 #import "FacebookSDK.framework/Versions/A/Headers/FacebookSDK.h" 并且它仍然说可以没找到。我也尝试过清理并重新启动。我有最新版本的 Xcode。

```
//
//  FacebookView.h
//

#import <UIKit/UIKit.h>
#import <FacebookSDK/FacebookSDK.h>

@interface FacebookView : UIViewController <FBFriendPickerDelegate>
{
} 
```

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2012-10-12T05:54:37.097

首先，您必须从您的项目中删除您的 FacebookSDK.framework。然后通过这 5 个步骤重新开始。不要重新链接框架。

1.  转到项目目标中的构建阶段。
2.  在 Link Binary With Libraries 中，单击“+”按钮。
3.  单击“添加其他...”按钮
4.  浏览您的 FacebookSDK 文件夹。一般在~/Documents/FacebookSDK/
5.  单击（选择）“facebookSDK.framework”，然后打开。

就是这样。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2014-03-17T02:53:02.240

无需删除任何东西。

在您的项目中转到：“**构建设置**”，然后是“<strong>搜索路径”。寻找“**框架搜索路径**”。你可能有这样的固定：

> 框架搜索路径：/Users/john/Documents/exampleappxyz

将其更改为：

> 框架搜索路径：**$(PROJECT_DIR)**

瞧！

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-02-27T16:00:09.903

我试过这个，但它对我不起作用。我必须进入项目的构建设置并手动修复 FacebookSDK`Framework Search Paths`以找到 FacebookSDK。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-10-21T21:21:03.563

好的，伙计们，我想我得到了答案。请按照以下步骤操作。

1.  将您的框架复制到您的项目中。
2.  确保它在某个目录下。例如`$(PROJECT_DIR)/project_name/Resources/Frameworks`
3.  点击目标。
4.  转到构建阶段→将二进制文件与库链接
5.  通过单击“添加其他”添加自定义框架
6.  在项目导航器中验证框架只存在一次。
7.  现在转到 Build Settings→Search Paths→Framework Search Path 并确保它具有以下两个内容。

    (一) `$(inherited)` (二)`$(PROJECT_DIR)/project_name/Resources/Frameworks.`

    不提醒framework存在`Frameworks`文件夹里面

8.  确保库搜索路径中没有任何内容。
9.  现在单击项目（目标上方）→构建设置并重复步骤 7 和 8。
10.  现在清理项目并构建项目。

希望它有效。请记住不要保留任何带有空格的文件夹名称。如果您保留了它们，请确保提供正确的转义字符。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-07-09T05:38:22.417

如何删除 facebook sdk 链接：

对于那些喜欢我的人不正确地添加了 facebook sdk。从您的项目中删除 facebook SDK，

检查框架文件夹中的链接，删除其中的任何 facebook sdk 链接

进入 Build Phases -> Link Binary With Libraries 并删除其中的任何 facebook sdk

右键单击框架文件夹并选择“在查找器中显示”并删除其中的任何 facebook sdk

现在按照“Fede Cugliandolo”的步骤重新添加 facebook sdk

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-10-29T07:04:52.183

我今天遇到了这个问题。

事实证明，我需要在所有三个地方都有我的框架搜索路径：

```
1) Project Build Settings
2) App Target Build Settings
3) UnitTests Target Build Settings 
```

我的搜索路径是：

```
/Users/myusername/Documents/FacebookSDK 
```

确保之后，错误对我来说消失了。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-10-09T11:41:14.010

我使用 xcode 5，当添加 sdk 时，在“project.pbxproj”中写入自身地址不正确。

取而代之的是 sdk 的本地地址，它保存全局地址。

我打开“project.pbxproj”并找到它的位置并只为项目中的sdk留下地址。

```
<project name>/src/external/facebook
<project name>/src/external/testflight 
```

编辑条目如下

```
/Users/<user Name>/myProjects/.../ios/<project name>/src/external/facebook 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-12-09T16:59:05.393

您必须在构建设置中更改属性“框架搜索路径”，并指定文件 FacebookSDK.framework 所在的位置（然后您可以使用 SRCROOT 变量指向项目目录的根目录，因此，避免使用绝对路径 ;)) 例如：

`$(SRCROOT)/SampleProject/src/Utils/Facebook/`

当您导入第三方框架时，这通常由 Xcode 自动完成，但有时会出现混乱（例如：当您修改项目目录树时......）

希望有帮助...

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-02-01T02:00:24.787

除了添加搜索路径之外，我还必须将路径设置为递归并从“要排除的子目录”选项中删除“* .framework”才能使其正常工作。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-02-13T09:23:15.553

如果您两次导入 facebookSDK 并删除了一些文件，就会发生这种情况。

例如，我在 $project/framework 中导入了 facebookSDK，但由于某些原因我删除了它。然后我通过 ~/Documents/FacebookSDK 导入它，但 Xcode 默认保留旧文件夹并在其中搜索。

我必须删除旧导入的所有引用和文件才能解决我的问题。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-03-06T05:19:00.127

我最终检查了我的项目目录，删除了对框架文件的所有旧引用。然后，将其从构建阶段/搜索路径中删除。同时删除链接的框架。重新启动 Xcode，并重新执行该过程：将 Framework 拖到 Frameworks，不要复制。检查 Build Phases/Search 路径。包括“#import”。终于奏效了。唷。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-05-26T06:37:14.217

按照说明 [在第 4 步配置您的 Xcode 项目](https://developers.facebook.com/docs/ios/getting-started/) 我认为您遗漏了一些东西。删除项目中的 Facebook.sdk 并重试。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-10-20T09:37:45.733

我在更新 XCode 时遇到了同样的问题，但在我的情况下，我不想对项目设置进行任何手动更改，因为我使用 CMake 来创建它。你可以在这里找到我修复它的方法：[https ://stackoverflow.com/a/25564152/525873](https://stackoverflow.com/a/25564152/525873)

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-03-17T06:24:56.283

这很简单，您必须从您的项目中删除您的 FacebookSDK.framework。

转到项目目标中的构建阶段。在 Link Binary With Libraries 中，单击“+”按钮。单击“添加其他...”按钮浏览您的 FacebookSDK 文件夹。通常在 ~/mohit/Documents/FacebookSDK/ 点击（选择）“facebookSDK.framework”，然后打开。

现在将此目标设置 > 框架搜索路径复制到项目设置 > 框架搜索路径中。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2015-05-09T13:52:22.687

以上所有答案都不适合我。

最后对我有用的是改变插件文件夹的结构：

1.  创建文件夹：`com.phonegap.plugins.facebookconnect/FacebookSDK`

2.  将所有内容从：复制 `com.phonegap.plugins.facebookconnect/FacebookSDK.framework/Headers` 到`com.phonegap.plugins.facebookconnect/FacebookSDK`

3.  复制`com.phonegap.plugins.facebookconnect/Facebook.framework` 到`com.phonegap.plugins.facebookconnect/FacebookSDK`

最后，改变

```
#import <FacebookSDK/FacebookSDK.h> 
```

到

```
#import "FacebookSDK/FacebookSDK.h" 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2016-03-24T01:02:43.860

我找到的唯一解决方案是：

1.  移除 phonegap 插件： ionic plugin rm phonegap-facebook-plugin

2.  克隆下一个插件 git clone：[https ://github.com/jeduan/cordova-plugin-facebook4.git](https://github.com/jeduan/cordova-plugin-facebook4.git)

3.  手动添加插件：cordova -d plugin add PATH/cordova-plugin-facebook4 --variable APP_ID="*****" --variable APP_NAME="*****"

在此之前尝试重新添加 FacebookSDK.framework 并通过本地克隆安装 phonegap 插件 facebook，但错误仍然存​​在。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2016-10-18T12:05:46.330

只需按照以下步骤操作：

1.  在您的项目中打开 Xcode 的 Build Settings 选项卡。
2.  将 ~/Documents/FacebookSDK 添加到项目的框架搜索路径设置中。

# python - 多行 python 正则表达式失败

> ID：12849210
> 
> 赞同：2
> 
> 时间：2012-10-11T21:59:18.843
> 
> 标签：python, regex

我有一个带有 mysql 结构转储的字符串。

```
...
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

--
-- Table structure for table `contig`
--

DROP TABLE IF EXISTS `contig`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `contig` (
  `id` int(10) NOT NULL,
  `seq` varchar(1000) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_c
.. 
```

现在我想选择每个包含创建表查询的字符串。我尝试`re.findall`了几个正则表达式（例如`(CREATE TABLE)(.*)[^;]*`）

但是我尝试过的每个正则表达式充其量都返回了`[('CREATE TABLE', " 'contig' (")]`。但我希望整个查询作为列表中的一个元素。我试图`rstrip`删除断线，但没有任何效果。

如何将每个 INSERT INTO 查询作为一个整体？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T22:02:59.827

您不能使用正则表达式选择嵌套括号序列。因此，您要执行的任务是无法解决的。

但作为一个黑客，你可以尝试这样的事情：

```
>>> re.findall('CREATE TABLE[^;]+;', s)
['CREATE TABLE `contig` (...) ENGINE=InnoDB DEFAULT CHARSET=latin1;'] 
```

部分`(.*)`在你的正则表达式中是多余的。

# mysql - MySQL查询返回日期列表的总利润/损失

> ID：12849213
> 
> 赞同：1
> 
> 时间：2012-10-11T22:00:04.033
> 
> 标签：mysql, sql

我有一个包含 4 列的 MySQL 表，如下所示。

```
TransactionID | Item | Amount | Date
------------------------------------
              |      |        |
              |      |        | 
```

我有很多条目，我想要做的是创建一个查询，返回每个时间点的总利润/损失列表？

想象一下，我有以下交易：

```
 Bought item for 5
 Sold item for 15
 Bought item for 5
 Sold item for 15 
```

所以我希望它返回这样的东西。

```
Profit/Loss | Date
------------------
-5          | 20-10-12
10          | 21-10-12
5           | 22-10-12
20          | 23-10-12 
```

这可以通过 MySQL 查询实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T22:03:59.667

```
SELECT SUM(Amount) AS ProfitOrLoss FROM TableName GROUP BY Date 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T22:03:19.797

假设`Date`按照您在预期结果中显示的那样存储，这应该可以工作：

```
SELECT
   SUM(Amount) AS "Profit/Loss",
   Date
FROM your_table
GROUP BY(Date) 
```

否则 id`Date`是 type `DATE`，`DATETIME`或者`TIMESTAMP`你可以这样做：

```
SELECT
   SUM(Amount) AS "Profit/Loss",
   DATE_FORMAT(Date, '%d-%m-%y') AS Date
FROM your_table
GROUP BY(DATE_FORMAT(Date, '%d-%m-%y')) 
```

参考：

*   [日期格式](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)
*   [通过...分组](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)

**编辑（在OP的评论之后）**

[在这里](https://stackoverflow.com/questions/2563918/create-a-cumulative-sum-column-in-mysql)实现可计算的 SUM是一个很好的提示：

```
SET @csum := 0;
SELECT
   (@csum := @csum + x.ProfitLoss) as ProfitLoss,
   x.Date
FROM
(
   SELECT
      SUM(Amount) AS ProfitLoss,
      DATE_FORMAT(Date, '%d-%m-%y') AS Date
   FROM your_table
   GROUP BY(DATE_FORMAT(Date, '%d-%m-%y'))
) x
order by x.Date; 
```

本质上，您将当前总和存储到变量（@csum）中，并且对于分组交易的每一行，您将其增加每日余额

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T22:04:27.783

```
SELECT SUM(Amount) FROM TableName GROUP BY Date 
```

# mod-rewrite - Paypal IPN 的重写规则

> ID：12849224
> 
> 赞同：0
> 
> 时间：2012-10-11T22:00:24.757
> 
> 标签：mod-rewrite, rewrite

我正在尝试设置一个 RewriteRule 以将 Paypal IPN 通知从旧 URL 传递到一个新 URL，该新 URL 将捕获并解释它，所以我需要所有变量等传递到新 URL（IPN 通知不应该被解析或处理，只是传递到新的 url）。

在这种情况下，我应该使用的最佳/最可靠的 RewriteRule/Condition 是什么？

现在我只是在仍然接收 IPN 通知的旧文件中有这个：

```
<?php header("Location: /payment/paypal/ipn"); exit; ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T22:05:37.213

请在您的 .htaccess 文件上尝试一下

```
RewriteEngine On
RewriteRule oldipnreceiver.php newipnreceiver.php? [QSA] 
```

# actionscript-3 - 键盘 AS3 检测

> ID：12849228
> 
> 赞同：1
> 
> 时间：2012-10-11T22:01:04.973
> 
> 标签：actionscript-3, addeventlistener

我知道对此有很多问题，但我真的很难让它发挥作用。

我只有在第一帧中有这段代码：

```
var game = new Game(this); 
```

在游戏课上我有很多东西

```
package  {

import flash.display.*;
import flash.ui.*;
import flash.events.*;

public class Game extends MovieClip {

    public function Game(esc) {
        var camp = new Camp(); //camp és l'escenari, el conjunt de celles
        var player = new Player();

        esc.addEventListener(KeyboardEvent.KEY_UP, controlTeclat);

        camp.mostraInterficie(esc);

        player.situaPlayer(esc);            

    }

    public function controlTeclat(ev){
        switch(ev.keyCode){
            /*case 37: player.moveLeft();break;
            case 38: player.moveUp();break;
            case 39: player.moveRight();break;
            case 40: player.moveDown();break;
            case 32: player.dropBomb();break;*/
        }
        trace ("hi");
    }
} 
```

}

问题是从未调用过 controlaTeclat() 函数，没有打印跟踪。没有显示错误，面团。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T22:07:24.083

mc 需要在 displayList 上才能接收键盘事件。

```
var game = new Game(this);
addChild( game ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T22:07:58.850

如果没有更多代码，很难准确说出这里出了什么问题，但是如果 esc 对象没有焦点（没有被鼠标单击），那么键盘事件将不会通过它传播，因此处理程序不会触发.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T00:40:56.680

您可以将键盘侦听器添加到舞台本身。您还可以使用“stage.focus”设置焦点，这样它就可以接收事件，而无需先点击舞台。

```
stage.addEventListener( KeyboardEvent.KEY_UP, keyupHandler );

//if you want to, you can set focus like this:   
stage.focus = stage; //or some other object

private function keyupHandler(e:KeyboardEvent):void 
{
    trace("keyupHandler()");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T05:25:25.637

```
if (esc.stage) esc.stage.addEventListener(KeyboardEvent.KEY_UP, controlTeclat);
else trace("Stage is inaccessible!"); 
```

最佳实践是将键盘侦听器分配到舞台，以便他们始终对键盘事件做出反应。"esc" 看似是你的 Document 类，但它不是舞台，所以我们使用 "esc" 的 "stage" 属性来访问那里。

# android - AsyncTask 在 onPreExecute 之后停止，经过几次运行

> ID：12849231
> 
> 赞同：2
> 
> 时间：2012-10-11T22:01:20.483
> 
> 标签：android, multithreading, asynchronous, android-asynctask

在应用程序运行几次之后，我的`AsyncTask`程序中似乎停止了。`onPreExecute()`我的意思是，我可以使用该应用程序并且一切正常运行大约 10-20 次，但随后它停止了。这是发生了什么：

```
private class MyTask extends AsyncTask<String, Void, Data> {

    protected void onPreExecute() {
        // show loading dialog
        Log.d(TAG, "end onPreExecute");
    }

    protected Data doInBackground(String... params) {
        Log.d(TAG, "start doInBackground");
        // do stuff
    }

    protected void onPostExecute(Data myData) {
        // do stuff
    }

} 
```

当它停止工作时，会发生什么是加载对话框永远保持加载，并`"end onPreExecute"`打印但`"start doInBackground"`不打印。

为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T23:15:20.297

很难说问题出在哪里。由于您的 Async 任务似乎在前几次工作，这可能是这个 API 功能[对于您的意图来说太“不稳定”了](http://foo.jasonhudgins.com/2010/05/limitations-of-asynctask.html)......

您的问题的解决方案可能很简单，将 AsyncTask 替换为不同的 Thread 解决方案：

*   [这](https://stackoverflow.com/questions/4080808/asynctask-doinbackground-does-not-run)是一个帖子，这个问题是由[传统的 Thread](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html)解决的。
*   [这](http://www.vogella.com/articles/AndroidPerformance/article.html#handler)是一篇展示如何使用[Handler](http://developer.android.com/reference/android/os/Handler.html)的帖子。

希望有帮助！

# ruby-on-rails - Rails 3 respond_with 用于在控制器位于不同模块时创建返回 json 或 JSON 格式的位置

> ID：12849234
> 
> 赞同：0
> 
> 时间：2012-10-11T22:01:41.123
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在 Rails 3.2.8 中。如果你有这条路线：

```
 namespace :some_module do
    resources :some_models
  end 
```

并且对应的 SomeModel 不在模块中，那么在 SomeModule::SomeModelsController 中如果指定位置为模型实例（如在创建中），那么它对 url 的假设将是错误的：

```
respond_with @some_model, location: @some_model 
```

因为它将假设 url 是 some_model_instance_url 而不是 some_module_some_model_instance_url。

出于某种原因，当我试图变得棘手并对我认为在 create 方法中正确的 url 进行通用评估时（因为这是包含在控制器中的通用模块中）：

```
respond_with @some_model, location: send("#{self.class.name.chomp('Controller').gsub('::','_').underscore.singularize}_url") 
```

它导致：（`No route matches {:action=>"show", :controller=>"some_module/some_models"}`这是复数，所以没有路线）

这似乎有点令人困惑。

但只是在做：

```
respond_with @some_model 
```

当控制器设置为通过 json 响应时：

```
respond_to :json 
```

对我来说，返回一个 204 并没有指示创建的实例的 id，而且您似乎需要一些指示，其中包括一个 ID 供客户端使用它（在不返回 id 的情况下创建一些东西不是好的做法）。

在与模型不同的模块中的控制器的 create 方法中使用 respond_with 的正确方法是什么，我们想要返回创建对象 id 的一些指示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T17:55:23.267

在控制器中，如果控制器和模型都不是模块，那么要指定可以使用的位置：

```
respond_with @some_model, location: @some_model 
```

但是，控制器在不同的模块中，所以如果你在控制器的创建方法中这样做，它将尝试评估方法 some_model_url(id)，但在控制器上定义的是 some_module_some_model_url(id)。

因此，您可以采取的一种方法是：

```
respond_with @some_model, location: some_module_some_model_url(@some_model.id) 
```

对于包含在控制器中的通用模块，实例方法可能如下所示：

```
def initialize
  super
  qualified_controller_name = self.class.name.chomp('Controller')
  @model_class = qualified_controller_name.split('::').last.singularize.constantize
  @model_singular_name_url_method_name_sym = "#{qualified_controller_name.gsub('::','_').underscore.singularize}_url".to_sym
  class_eval "def #{@model_singular_name}(id); #{@model_singular_name_url_method_name_sym}(id); end"
end

def create
  @value = @model_class.new(...)
  @value.save
  respond_with @value, location: send(@model_singular_name_url_method_name_sym, @value.id)
end 
```

这将在 Location 响应标头中将位置作为 url 返回，因此在您的规范测试中，它可能会在发布后执行此操作：

```
location = response.headers['Location']
# now check that location looks correct, etc. 
```

但是，正如一位同事指出的那样，如果您定义以下内容，则不必指定位置：

```
def some_module_some_model_url(record)
  some_model_url(record)
end 
```

所以，一般地添加这个：

```
class_eval "def #{@model_singular_name}_url(record); #{@model_singular_name_url_method_name_sym}(record); end" 
```

然后你只需要：

```
def create
  @value = @model_class.new(...)
  @value.save
  respond_with @value
end 
```

# java - Spring MVC项目-在同一页面上输入表单并返回Java方法的结果

> ID：12849236
> 
> 赞同：0
> 
> 时间：2012-10-11T22:02:06.030
> 
> 标签：java, spring-mvc

这是我的第一个 MVC 项目，所以很抱歉这个问题太基础了！但是，我有一个函数，它接收一个 URL 并以字符串的形式返回有关它的信息。在我的 home.jsp 页面上，我想要一个允许用户输入 URL 并在同一页面上返回信息的表单。我该怎么做呢？我的项目模板附带了一个 HomeController——我不知道我是否需要一个特殊的控制器？

到目前为止，我有：

主页.jsp

```
<form:form method="post" action="getTumblrData" commandName="tumblrInfo">
    <input name="url" type="text"/> 
    <input type="submit" value="send"/>
</form:form>
<div id="returnedInfo">
<!-- return data should go here -->
</div> 
```

tumblrInfo.java

```
public class tumblrInfo {
    private String blogname;
    public String getBlogName() {
        return blogname;
    }
    public void setName(String name) {
        this.blogname = name;
    }
} 
```

家庭控制器.java

```
public String UrlReader(String url) {
   String blogName;
   ...
   return blogName;
}

@RequestMapping("/home")
public String getTumblrData(@ModelAttribute("tumblrInfo") tumblrInfo data, Map<String, Object> map, HttpServletRequest request) {
 String blogName = UrlReader(data.getURL());
 return blogName???
 } 
```

显然，当我运行程序并单击提交时，没有任何反应。有人可以指出我正确的方向吗？如果需要，我对 html/javascript/jquery 很满意。我现在对 MVC 框架库有点不知所措。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T22:22:26.727

我更喜欢在`org.springframework.ui.Model`这里使用模型属性。因此，将属性添加到您的模型并返回您想要显示的 JSP 的名称。您还需要在`@RequestMapping`注释中添加 POST 参数：

```
@RequestMapping(value = "/home", method = RequestMethod.POST)
public String getTumblrData(@ModelAttribute("tumblrInfo") tumblrInfo data, Model model, ...) {
   String blogName = UrlReader(data.getURL());
   model.addAttribute("blogName", blogName);
   return "my-jsp-page";
} 
```

在 JSP 中：

```
<div id="returnedInfo">
   ${blogName}
</div> 
```

# magento - 我的 Magento 优惠券有什么问题？

> ID：12849238
> 
> 赞同：1
> 
> 时间：2012-10-11T22:02:08.483
> 
> 标签：magento, logic, coupon, promotion-code

我的任务是在 Magento 中创建一个优惠券代码，它将执行以下操作：

*   如果客户购买了一个垃圾箱 (GCO350)、一个类别的物品中的一个盒子（框 a）和不同类别的物品中的一个盒子（框 b），他们会从另一个类别的物品中获得三件免费物品（奖品） .

这是我的逻辑（条件和操作），带有（希望）有用的注释： ![条件](../Images/20e30844e08f9ba795ff7575e7e0eea8.png) ![行动](../Images/8a5225c026b4a2e73a35862ffd49ee0a.png)

我在这里想念什么？我也尝试过将这些分类，在这个例子中，我从字面上选择了每个适用的 SKU。:( 法师巫师，帮帮我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T22:24:42.773

没关系。看来您需要将每个类别分开到自己的行中，以便 Magento 单独考虑它们，所以答案是：

![解决它](../Images/57b42950789d38bf305a6925bacd19e1.png)

愚蠢的错误。

# c# - MVC 3 动作/控制器属性/权限

> ID：12849239
> 
> 赞同：0
> 
> 时间：2012-10-11T22:02:10.327
> 
> 标签：c#, asp.net-mvc

为了简单起见，我的站点有两个控制器，UsersController 和 VenuesController，它们都有自己关联的“管理员权限”。

所以用户可以拥有“用户”管理员权限和/或“场地”管理员权限（这些是我数据库中用户表上的布尔字段）

用户登录，我在会话中拥有他/她的权限。

我想用自定义属性装饰我的控制器，以检查用户是否具有使用控制器的正确权限。我不想创建一个 UserPermissionAttribute 和一个 VenuePermissionAttribute，理想情况下我想要一个属性，它接受一个 bool 属性并检查它是否为真，所以类似于；

```
[CheckPermissionAttribute(_userSession.AdminPermissions.Users)]
public class UsersController : Controller
{

} 
```

和

```
[CheckPermissionAttribute(_userSession.AdminPermissions.Venues)]
public class VenuesController : Controller
{

} 
```

这是可能实现的，还是我应该看 PostSharp 或其他东西来达到相同的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T22:18:28.077

您可以使用参数创建属性。动作过滤器参数是动作过滤器的属性。

[但最好使用AuthorizeAttribute](http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute%28v=vs.100%29.aspx)创建用户角色并使用标准方法

# matlab - 将 .mat 转换为 .csv 八度/matlab

> ID：12849242
> 
> 赞同：3
> 
> 时间：2012-10-11T22:02:18.077
> 
> 标签：matlab, csv, octave

我正在尝试编写一个将 .mat 文件转换为 .csv 文件的 octave 程序。.mat 文件有一个矩阵 X 和一个列向量 y。X 填充了 0 和 1，y 填充了从 1 到 10 的标签。我想将 y 放在 X 前面并将其写为 .csv 文件。

这是我的第一种方法的代码片段：

```
load(filename, "X", "y");
z = [y X];

basename = split{1};
csvname = strcat(basename, ".csv");

csvwrite(csvname, z); 
```

生成的文件包含许多非常小的十进制数字，例如 8.560596795891285e-06,1.940359477121703e-06 等...

我的第二种方法是循环并手动将值写入 .csv 文件：

```
load(filename, "X", "y");
z = [y X];

basename = split{1};
csvname = strcat(basename, ".csv");
csvfile = fopen(csvname, "w");

numrows = size(z, 1);
numcols = size(z, 2);

for i = 1:numrows
  for j = 1:numcols
    fprintf(csvfile, "%d", z(i, j));
    if j == numcols
      fprintf(csvfile, "\n");
    else
      fprintf(csvfile, ",");
    end
  end
end

fclose(csvfile); 
```

这给了我一个正确的结果，但花了很长时间。

有人可以告诉我如何以写入正确值的方式使用 csvwrite，或者如何更有效地手动创建 .csv 文件。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T22:14:43.193

问题是如果`y`是 type `char`，你的`X`向量也会被转换为 char 。由于您的标签只是数字，您可以简单地将它们转换为数字并使用以下方法保存数据`csvwrite`：

```
csvwrite('data.txt', [str2num(y) X]); 
```

**编辑**此外，在循环中，您使用整数转换保存数字，如果您的数据类型为`%d`，则写入双精度数。如果零不完全为零，将用科学记数法编写它们，而您的循环将对它们进行四舍五入。因此不同的行为。`csvwrite``double``csvwrite`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-11T22:54:47.293

请注意，您的代码未针对 Matab / octave 进行优化。切换 for i 和 for j 行。

Octave 是列主要顺序，因此它的缓存效率不高。通过将更改更改为可能可接受的时间，它将加速整个循环

# iphone - NSDictionary 中的数组：如何保存到 NSUserDefaults

> ID：12849244
> 
> 赞同：0
> 
> 时间：2012-10-11T22:02:21.527
> 
> 标签：iphone, sdk

我想保存`Array/NSDictionary`到`NSUserDefaults`但我尝试的任何东西都不起作用。这是我的代码，所以如果你知道如何做到这一点，请帮助我。

```
NSArray *oneArray = [NSArray arrayWithObjects:@"Radio One",nil];
NSDictionary *one = [NSDictionary dictionaryWithObject:oneArray forKey:@"Stations"];

NSArray *oneLinkArray = [NSArray arrayWithObjects:@"http://mobile.com:28000/",nil];
NSDictionary *oneLink = [NSDictionary dictionaryWithObject:oneLinkArray forKey:@"Stations"];

[data addObject:one];
[link addObject:oneLink]; 
```

我需要这个的原因是将此电台放入收藏夹。所以我的想法是将这些信息保存到`NSUserDefaults`收藏夹表中并在其中检索。

谢谢，欢迎和赞赏任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T04:54:35.467

通常将对象添加到 NSUserDefaults 中是这样的：

```
NSMutableDictionary *dictionaryToAdd = [[NSMutableDictionary alloc] init];
[dictionaryToAdd setObject:@"xyz" forKey:@"myKey"];

NSUserDefaults *myDefaults = [NSUserDefaults standardUserDefaults];
[myDefaults setObject:dictionaryToAdd forKey:@"someKey"];

[myDefaults synchronize]; 
```

不过，上面的代码中有一些内容-您正在将内容添加到“数据”和“链接”中，但我在您的代码中看不到这些内容，因此我假设这些数组存在于某处。

总结一下 - 声明一个 NSUserDefaults 对象，像 NSDictionary 一样将对象设置到其中，然后同步它以保存数据。

根据要求的附加代码：

```
//You have an array named arrayToAdd that has already been created
NSUserDefaults *myDefaults = [NSUserDefaults standardUserDefaults];
[myDefaults setObject:arrayToAdd forKey:@"SomeKeyThatYouMakeUp"];
[myDefaults synchronize];

//You want to get the array out of NSUserDefaults
NSArray *mySavedArray;
NSUserDefaults *myDefaults = [NSUserDefaults standardUserDefaults];
mySavedArray = [myDefaults objectForKey:@"SomeKeyThatYouMakeUp"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T22:33:42.780

当您将所有内容存储到字典中时，您可以使用类似的东西

```
 [[NSUserDefaults standardUserDefaults] setObject:link forKey:@"dictionary1"]; 
```

或者您可以将所有内容放入一个数组并像这样存储它

```
 [[NSUserDefaults standardUserDefaults] setObject:data forKey:@"array1"]; 
```

您可以使用再次访问它

```
 NSDictionary * myDictionary = [[NSUserDefaults standardUserDefaults] dictionaryForKey:@"dictionary1"]; 
```

# c++ - 如何表示指向地址空间开头的指针？

> ID：12849246
> 
> 赞同：0
> 
> 时间：2012-10-11T22:02:29.843
> 
> 标签：c++, c, pointers, language-agnostic, embedded

让我们考虑一些奇怪的假设嵌入式系统，我需要生成和使用指向或可能指向地址空间的第一个字节的指针。也就是一个等于零的指针。不是 NULL 指针，而是完全有效的零指针，它可能会像任何其他指针一样被取消引用或递增或视为数组。在将 NULL 指针视为特殊但没有真正的 NULL 类型的语言中，我将如何做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T22:10:35.517

在一些罕见的旧机器上，整个“具有不同于 0 特殊值的特殊值的 NULL 指针”是可能的，但在实践中，指向地址 0 的 NULL/0 指针将具有值 0，并且在大多数机器上实际上指向地址 0 .

它将是完全可取消引用的，如果有一些内存映射到该区域，您可以在该地址上写入。

我曾经在我使用的嵌入式平台上拥有它。所以我过去常常在地址 0 上放置一个调试器观察点，因为对该区域的所有访问都是 NULL 指针取消引用。以这种方式发现了一些错误^^

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-11T22:07:02.977

在大多数架构中，NULL 指针根本没有什么特别之处，它只是一个地址为 0 的常规指针。如果您正在使用具有实际内存的嵌入式系统，它应该可以正常工作。如果您尝试检查指针是否为空值，则唯一的问题是，所以不要这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T09:23:36.503

如果有帮助，寄存器定义（指向特定地址的指针）写成（在我的 CodeWarrior 副本中）为：

```
#define REGISTER_XYZ      (*(vuint32 *)(0x40100000)) 
```

请注意**vuint**，因为它是一个不稳定的位置（可能会在我们的控制范围之外发生变化），它可能与您相关，也可能与您无关。

并将 0x40100000 替换为您选择的地址，natch。

# php - .htaccess 重定向到端口 8000 上的子域而不更改 URL？

> ID：12849247
> 
> 赞同：1
> 
> 时间：2012-10-11T22:02:33.363
> 
> 标签：php, .htaccess, redirect

我们有一个地图应用程序托管在我们网站的子域上，我们希望能够从 URL [http://www.example.com/map/ 访问它](http://www.example.com/map/)

问题是子域托管在不同的服务器上，而地图应用程序位于端口 8000 上。

有没有办法从`/map/`我们的主域重定向到地图应用程序，而不改变 URL，使用 .htaccess 或 PHP？

此外，我无权访问托管地图应用程序的服务器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T00:23:11.030

Using mod_proxy, in your vhost/server config for `www.example.com`

```
ProxyPass /map http://subdomain:8000/
ProxyPassReverse /map http://subdomain:8000/ 
```

Using mod_rewrite to hand off to mod_proxy, in your vhost/server *or* htaccess file:

```
RewriteEngine On
RewriteRule ^/?map/(.*)$ http://subdomain:8000/ [L,P]
ProxyPassReverse /map http://subdomain:8000/ 
```

# android - 按下硬件后退按钮android时如何使应用程序退出无效？

> ID：12849251
> 
> 赞同：2
> 
> 时间：2012-10-11T22:03:09.843
> 
> 标签：android, android-layout

当我按下设备的后退按钮时，如何避免退出我的活动，例如我的应用程序中有这个流程：

主布局然后当我单击列表视图中的一项时，我将进入 Secondactivity 但是当我按下返回按钮时，我的 secondactivity 意味着我的音乐流停止

它实际上是一个 aac 播放器播放直播。

这实际上是我的 Secondactivity 代码的一部分：

```
@Override
    protected void onCreate( Bundle savedInstanceState ) {
        super.onCreate( savedInstanceState );

        requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);

        setContentView( R.layout.main2 );

        getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.window_title);

        title = (TextView) findViewById(R.id.title);

        icon  = (ImageView) findViewById(R.id.icon);

        logo_image = (ImageView) findViewById(R.id.logo_image); 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T22:10:05.130

不要弄乱后退按钮的行为。在这种情况下，您必须使用服务来播放和控制您的音乐。并在您想停止音乐时停止服务。

您可以向服务发送一个 Intent，从而控制您的播放器的操作。该活动不是背景类。您的 Activity 是您的应用程序的视图，因此，如果用户想要离开该 Activity 将被杀死。因此，要保持声音播放（如播放器），您必须使用该服务。

[]s 内托

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T22:14:41.353

您可以覆盖

```
void onBackPressed() 
```

Activity 类的方法，但正如 Neto 已经暗示的那样，您可能不会让您的用户对此感到满意。

# android - 我应该使用哪种布局才能让我的应用看起来像 Google Plus？

> ID：12849252
> 
> 赞同：1
> 
> 时间：2012-10-11T22:03:11.977
> 
> 标签：android, listview, layout, gridview, grid-layout

我想制作一个类似于当前版本的 Google Plus 中使用的布局：

![在此处输入图像描述](../Images/f0d1b4d68310a910f71efc5a0130c7dd.png)

我不知道我必须使用哪种布局，因为： - 我不能使用 GridView，因为它不支持跨行。- 我不能使用 GridLayout 或 LinearLayout 因为要显示的元素数量是动态的 - 我不能使用 ScrollView 因为我希望 AdapterView 重用子元素 - 我可以使用具有两种不同单元格类型的 ListView 但是我不能使用内置的 OnItemClickListener。

你有比我更好的想法吗？

非常感谢你 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T08:46:02.890

你可以很好地使用`RelativeLayout`它。使用单个`Relative Layout`您应该能够创建完全相同的布局。此外，您的内容可以`Relative Layout`很容易地动态添加（通过设置`LayoutParams`要添加的内容）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T01:55:23.510

这篇[文章](https://stackoverflow.com/a/13439544)建议它使用[StaggeredGridView](https://github.com/maurycyw/StaggeredGridView)。我个人没有试过。

# ios - 逻辑和位运算符警告混淆 - iOS

> ID：12849255
> 
> 赞同：1
> 
> 时间：2012-10-11T22:03:20.137
> 
> 标签：ios, if-statement, operators, bit-manipulation

我有一个 if else 语句，其中有 2 个完全正确的参数，但是第二个 if 给了我这个警告：

> 使用带有常量操作数的逻辑“&&”

使用的代码是：

```
else if ( !IS_WIDESCREEN && UIInterfaceOrientationPortrait) //No Warning or error
{

}
else if(IS_WIDESCREEN && UIInterfaceOrientationLandscapeRight) //Gives me the above warning
{

} 
```

注意：IS_WIDESCREEN - 使用 iPhone 5 屏幕的测量值定义。

知道这是为什么吗？

///编辑：

添加了我如何定义 iPhone 5

```
#define IS_WIDESCREEN ( fabs( ( double )[ [ UIScreen mainScreen ] bounds ].size.height - ( double )568 ) < DBL_EPSILON ) 
```

整个事情都在这个方法里面：

```
-(void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)interfa‌​ceOrientation duration:(NSTimeInterval)duration 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T22:14:10.680

我认为应该是

```
else if ( !IS_WIDESCREEN && (interfaceOrientation == UIInterfaceOrientationPortrait)) {  
// ....
} else if(IS_WIDESCREEN && (interfaceOrientation == UIInterfaceOrientationLandscapeRight)) {  
// ....
} 
```

如果您在内部使用它，`shouldAutoRotateToInterfaceOrientation`因为您将一个常量值与`IS_WIDESCREEN`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T22:19:34.020

如果在逻辑`&&`表达式中使用常量，则会收到警告，因为该常量无关紧要。想象一下常数是非负的。的结果与`if (x && non-neg-constant)`相同`if (x)`。同样，如果常数为零，`if (x && 0)`则永远不会为真。

因此，编译器会警告您，并暗示您可能正在尝试进行按位运算，检查特定位以查看它是否已设置。

# ravendb - 嵌入式模式不支持 RavenDB IsOperationAllowedOnDocument

> ID：12849256
> 
> 赞同：5
> 
> 时间：2012-10-11T22:03:24.867
> 
> 标签：ravendb

RavenDB在使用嵌入式模式调用`InvalidOperationException`时抛出。`IsOperationAllowedOnDocument`

我可以在`IsOperationAllowedOnDocument`实现中看到一个检查嵌入式模式调用的子句。

```
namespace Raven.Client.Authorization
{
    public static class AuthorizationClientExtensions
    {
        public static OperationAllowedResult[] IsOperationAllowedOnDocument(this ISyncAdvancedSessionOperation session, string userId, string operation, params string[] documentIds)
        {
            var serverClient = session.DatabaseCommands as ServerClient;
            if (serverClient == null)
                throw new InvalidOperationException("Cannot get whatever operation is allowed on document in embedded mode."); 
```

除了不使用嵌入式模式之外，还有其他解决方法吗？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-11T16:32:44.073

我在编写一些单元测试时遇到了同样的情况。詹姆斯提供的解决方案奏效了；但是，它导致单元测试有一个代码路径，而生产代码有另一个路径，这违背了单元测试的目的。我们能够创建第二个文档存储并将其连接到第一个文档存储，这使我们能够成功访问授权扩展方法。虽然这个解决方案可能不适合生产代码（因为创建文档存储很昂贵），但它非常适合单元测试。这是一个代码示例：

```
using (var documentStore = new EmbeddableDocumentStore
        { RunInMemory = true,
          UseEmbeddedHttpServer = true,
          Configuration = {Port = EmbeddedModePort} })
{
    documentStore.Initialize();
    var url = documentStore.Configuration.ServerUrl;

    using (var docStoreHttp = new DocumentStore {Url = url})
    {
        docStoreHttp.Initialize();

        using (var session = docStoreHttp.OpenSession())
        {
            // now you can run code like:
            // session.GetAuthorizationFor(),
            // session.SetAuthorizationFor(),
            // session.Advanced.IsOperationAllowedOnDocument(),
            // etc...
        }
    }
} 
```

还有一些其他的项目应该提到：

1.  第一个文档存储需要在 UseEmbeddedHttpServer 设置为 true 的情况下运行，以便第二个可以访问它。
2.  我为端口创建了一个常量，以便一致地使用它并确保使用非保留端口。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T17:44:27.510

我也遇到过这种情况。查看源代码，无法按照所写的方式执行该操作。不确定是否有一些内在原因，因为我可以通过直接针对相同信息发出 http 请求轻松复制应用程序中的功能：

```
HttpClient http = new HttpClient();
http.BaseAddress = new Uri("http://localhost:8080");
var url = new StringBuilder("/authorization/IsAllowed/")
    .Append(Uri.EscapeUriString(userid))
    .Append("?operation=")
    .Append(Uri.EscapeUriString(operation)
    .Append("&id=").Append(Uri.EscapeUriString(entityid));
http.GetStringAsync(url.ToString()).ContinueWith((response) =>
{
    var results = _session.Advanced.DocumentStore.Conventions.CreateSerializer()
        .Deserialize<OperationAllowedResult[]>(
            new RavenJTokenReader(RavenJToken.Parse(response.Result)));
}).Wait(); 
```

# java - 具有 SharedPreferences 的 AppWidget 必须更新两次

> ID：12849259
> 
> 赞同：0
> 
> 时间：2012-10-11T22:03:54.930
> 
> 标签：java, android, sharedpreferences, android-appwidget

我正在构建一个显示文本视图的小部件，该文本视图可作为配置类中的编辑文本进行编辑。而且我刚刚实现了共享首选项，因此当用户第二次或第三次编辑小部件等时，已经输入的文本将出现在配置类的 edittext 字段中。

我猜它有效。好吧，在我实现 sharedpreferences 之前，小部件在配置后会更新得很好。但是现在，我编辑文本，按应用，但小部件没有更新，然后我再次编辑小部件，小部件更新为我之前应用到它的文本。所以我想你可以说，这是一个延迟更新。我希望我很清楚，这有点难以解释。

所以我做错了什么，我无法让它工作，非常感谢任何帮助。

代码：

```
public class WidgetConfig extends Activity implements OnClickListener {

    AppWidgetManager awm;
    int awID;
    Context c;
    EditText info;
    Button b;
    String note;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.widgetconfig);

        c = WidgetConfig.this;
        info = (EditText)findViewById(R.id.etwidgetconfig);
        b = (Button)findViewById(R.id.bwidgetconfig);
        loadPrefs();
        b.setOnClickListener(this);

        //Getting Info about the widget that launched this activity
        Intent i = getIntent();
        Bundle extras = i.getExtras();
        if (extras != null){
            awID = extras.getInt(AppWidgetManager.EXTRA_APPWIDGET_ID,
            AppWidgetManager.INVALID_APPWIDGET_ID );
        }

        awm = AppWidgetManager.getInstance(c);

    }

    private void loadPrefs(){
        SharedPreferences sp = PreferenceManager.getDefaultSharedPreferences(this);
        note = sp.getString("NOTE", "DEFAULT");

        info.setText(note);

    }

    private void savePrefs(String key, String value){
        SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(this);
        SharedPreferences.Editor editor = preferences.edit();       
        editor.putString(key, value); // value to store
        editor.commit();   

    }

    public void onClick(View v) {
        // TODO Auto-generated method stub

        savePrefs("NOTE", info.getText().toString());

        RemoteViews views = new RemoteViews(c.getPackageName(), R.layout.widget);
        views.setTextViewText(R.id.tvConfigInput, note);

        ComponentName thisWidget = new ComponentName(this, Widget.class);
        AppWidgetManager manager = AppWidgetManager.getInstance(this);
        manager.updateAppWidget(thisWidget, views);

        Intent in = new Intent(c, WidgetConfig.class);
        PendingIntent pi = PendingIntent.getActivity(c, 0, in, PendingIntent.FLAG_UPDATE_CURRENT);

        views.setOnClickPendingIntent(R.id.B_EditAgain, pi);

        awm.updateAppWidget(awID, views);

        Intent result = new Intent();
        result.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, awID);
        setResult(RESULT_OK, result);
        finish();

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T22:45:45.653

您实际上并没有使用 EditText 字段的值更新 TextView。您的伪代码当前如下所示：

```
String note;

onCreate(){
    note = getSharedPref(NOTE);
}

onClick(){
    putSharedPref(info.getText());
    views.setText(note);
} 
```

这会忽略 EditText 中的值，直到您观察到的下一次调用 onCreate 为止。

您应该使用 EditText 中的文本更新视图：

```
onClick(){
   putSharedPref(info.getText());
   views.setText(info.getText());
} 
```

# assembly - 编写汇编指令来建立一个表来保存大写字母 AZ 的 ASCII 代码

> ID：12849260
> 
> 赞同：2
> 
> 时间：2012-10-11T22:03:55.793
> 
> 标签：assembly, ascii, 68hc11

编写汇编程序指令来构建一个表来保存大写字母 AZ 的 ASCII 代码。该表应该存储在 $00 到 $19 的内存位置吗？(68HC11)

我想回复会是这样，你能告诉我我的回复是否正确吗？如果错了，为什么？

```
TABLE ORG $00

      LDAA #26
LOOP  LDD  #$41
      STD  TABLE
      DECA 
      BNE  LOOP
      END 
```

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T22:08:37.043

您需要`LDD #$41`在循环开始之前执行，然后在`BNE`指令之前增加该寄存器。

# macos - 将 git 存储库推送到 Xcode

> ID：12849262
> 
> 赞同：1
> 
> 时间：2012-10-11T22:04:01.727
> 
> 标签：macos, git, xcode4

当前设置：

带有 Xcode 项目并托管 git 存储库的家庭 iMac。MacBook 用于在家外工作，通过 Xcode 克隆项目。

我可以毫无问题地将我在 iMac 上所做的更改拉到 MacBook 上，它将我在 MacBook 上所做的更改发送回我遇到问题的 iMac。

我进行了编辑，`File > Source Control > Commit`并且没有错误，并且`File > Source Control > Push`文件没有问题-没问题。

但是，在我的 iMac 上，我无法进行编辑，一旦 Xcode 启动，“M”就会出现在已编辑的文件旁边，显示已进行更改（我的 MacBook 上的那个），我无法恢复更改，我唯一能做的就是提交未编辑的文件并“还原”它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T22:11:26.800

您正在对非裸存储库执行“推送”操作 -在 Git 文档中特别建议*不要这样做。*

发生的是推送操作在幕后更新存储库，而*不是*您的工作目录。因此，Git 将笔记本电脑上所有更改的文件视为“已更改”回 iMac 上的原始状态。如果您**绝对确定**在 iMac 上没有未提交的工作，则可以通过执行 a `git reset --hard master`（或任何您的分支名称）来解决此问题。

更好的解决方案是在 iMac 上创建另一个存储库，即“裸”存储库，您将把它视为共享的全局存储库。每个工作目录都会从全局存储库中拉取和推送到全局存储库，从而避免了这个问题。

# jquery - JQuery Tag-它不显示建议（JSON 成功？）

> ID：12849263
> 
> 赞同：0
> 
> 时间：2012-10-11T22:04:04.383
> 
> 标签：jquery, asp.net, json, jquery-ui, tag-it

我正在尝试实现 Tag-It jQuery UI 插件（[http://aehlke.github.com/tag-it/](http://aehlke.github.com/tag-it/)）。

只要我不使用自定义自动完成，它就可以很好地工作。它可以显示标签，显示预定义列表中的建议，我可以删除它们等。但是当我想进行 AJAX 调用时，它会给我带来问题。基本上，Tag-It 控件从不显示任何结果。

目前我的代码是：

```
<script type="text/javascript">
    $(document).ready(function() {
        $("#myabtags").tagit({
            tagSource: function(request, response) {
                $.ajax({
                    type: "POST",
                    url: "Services/ForumServices.asmx/GetTags",
                    dataType: "json",
                    data: { prefixText: request.term, count: 10 },
                    success: function(data) {
                        response(data);
                    }
                });
            },
            removeConfirmation: true

        });
    });
</script> 
```

我可以在 Fiddler 中看到请求是按应有的方式发出的，并且它返回了一个非常好的结果。结果的一个例子是：

```
<?xml version="1.0" encoding="utf-8"?>
<ArrayOfString xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://tempuri.org/">
  <string>acceleration</string>
  <string>aktantmodellen</string>
  <string>ampere</string>
  <string>analyse</string>
  <string>analyseeksempel</string>
  <string>atmosfæren</string>
  <string>best practice</string>
  <string>boganmeldelse</string>
  <string>brændtrekanten</string>
  <string>cellemembran</string>
</ArrayOfString> 
```

所以基本上我猜我在 JSON 成功调用中做错了什么？还是我完全错了？

有任何想法吗？提示？某物？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T04:27:41.333

看起来 dataType 是这里的问题..

您返回的数据似乎是 xml 并且您有

```
dataType: "json" 
```

尝试将其替换为

```
dataType: "xml" 
```

# javascript - 关于如何修复内容滑块的上一个和下一个按钮的建议

> ID：12849267
> 
> 赞同：0
> 
> 时间：2012-10-11T22:04:17.280
> 
> 标签：javascript, jquery

我正在尝试将上一个和下一个按钮添加到我的内容滑块但似乎有问题，我真正想做的是每次单击上一个或下一个按钮时将 $slideCtn 向左或向右移动宽度 slideWidth但我不确定如何通过 slideWidth 的值增加每次点击。我试过 ++ 和 -- 等但没有结果，谁能告诉我做这样的事情的最佳方法？也非常欢迎任何其他建议！

或者我应该创建一个设置为 0 的全局索引变量，然后在单击分页 x 或单击上一个/下一个箭头时更新此全局变量？

**JS 片段**

```
//Add previous + next arrows
$dirArrows.on('click', function(e){

    var arrDir = $(this).data('dir');

    $slideCtn.css('left', ( arrDir === 'prev' ) ? -(slideWidth) : +(slideWidth));

    e.preventDefault();
}); 
```

**JS 小提琴** [http://jsfiddle.net/SG5ad/10/](http://jsfiddle.net/SG5ad/10/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T22:21:22.723

目前，你告诉它移动到一个绝对位置——-200px 或 +200px（从不 0px、400px、600px 等）。

您需要考虑其当前位置以及您想要调整多少：http: [//jsfiddle.net/SG5ad/12/](http://jsfiddle.net/SG5ad/12/)

```
var arrDir = $(this).data('dir')
    iLeft = parseInt( $slideCtn.css('left') );

$slideCtn.css('left', ( arrDir === 'prev' ) ? iLeft - slideWidth : iLeft + slideWidth); 
```

您还需要修复的一个错误是，在您已经使用“x”导航跳转到特定幻灯片之前，Next/Prev 按钮什么也不做。

* * *

作为一个完全独立的问题，大约 6 个月前，我写了这样的东西作为工作项目的一部分（它有更多的花里胡哨，但没有太大的不同），我想说有一件重要的事情值得改变.

为了从一张幻灯片转到`a`另一张幻灯片，您为幻灯片、、和`d`设置动画，这意味着 a) 4 张幻灯片正在动画，而不是 1 张（加上它们的所有子元素） b) 您必须通过幻灯片，即使它们'不相关`a``b``c``d`

`b``c`

我会看看使用 z-index 将所有幻灯片的基本位置更改为彼此堆叠在一起，然后简单地将顶部幻灯片设置为动画到一侧以显示其下方的幻灯片。它需要一些代码来跟踪哪些幻灯片在哪里（`$.data()`可能有助于那里），但在它的末尾为您提供了一个性能更高的滑块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T22:19:39.307

你必须用 .animate()

```
$dirArrows.on('click', function(e){

    var arrDir = $(this).data('dir');

    if (arrdir == left){
       $slideCtn.animate({
         left: "+=250"
       });
    }
}); 
```

# c++ - 编译错误：g++-v4/tr1_impl/type_traits(226)：错误：需要一个标识符

> ID：12849270
> 
> 赞同：0
> 
> 时间：2012-10-11T22:04:31.230
> 
> 标签：c++, cuda, gpu

当 Makefile 尝试编译 .cu (CUDA) 文件时会生成错误。

我们能够使用专门为它制作的 .hpp 自行编译它。当我们试图让它在一个现有的头文件下编译时，它拥有一个 .cpp（换句话说，.hpp、.cpp 加上一个 .cu），我们不断收到这个奇怪的编译错误。

为了便于阅读，以下所有消息都以该目录为前缀：

```
/usr/lib/gcc/x86_64-pc-linux-gnu/4.5.4/include/g++-v4/tr1_impl/ 
```

留言：

```
type_traits(226): error: expected an identifier
type_traits(227): error: expected a ")"
type_traits(227): error: a template argument list is not allowed in a declaration of a primary template

type_traits(229): error: expected an identifier
type_traits(230): error: expected a ")"
type_traits(230): error: a template argument list is not allowed in a declaration of a primary template

type_traits(232): error: expected an identifier
type_traits(233): error: expected a ")"
type_traits(233): error: expected a ">"

type_traits(235): error: expected an identifier
type_traits(236): error: expected a ")"
type_traits(236): error: expected a ">"

type_traits(238): error: expected an identifier
type_traits(239): error: expected a ")"
type_traits(239): error: expected a ">"

type_traits(241): error: expected an identifier
type_traits(242): error: expected a ")"
type_traits(242): error: expected a ">"

type_traits(244): error: expected an identifier
type_traits(245): error: expected a ")"
type_traits(245): error: expected a ">"

type_traits(247): error: expected an identifier
type_traits(248): error: expected a ")"
type_traits(248): error: expected a ">" 
```

是否可以有一个带有 .cu 和 .cpp 的单个 .hpp ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T00:09:27.380

是的，这是可能的，实际上很常见，但是如果 .hpp 包含 nvcc 无法构建的文件，那么您就不能从 .cu 中包含它。

您可以使用`#ifndef __CUDACC__`这些文件，以便在使用 nvcc 编译 .cu 时不会包含它们。

# javascript - 动态添加的 javascript 不起作用，但静态代码可以正常工作吗？

> ID：12849271
> 
> 赞同：1
> 
> 时间：2012-10-11T22:04:37.813
> 
> 标签：javascript, jquery, css, hover, html

这就是我正在做的事情......我有一个文本框，用户可以在其中输入内容并单击添加图标。这会触发一些 jquery 代码，将他们键入的项目添加到“内容”div 中的跨度中。生成的代码有一个删除图标，出现在悬停时，单击它应该使跨度消失。如果代码已经在页面上（在文档加载之前），则此方法有效，但如果它是动态创建的，则会破坏单击时删除功能。

这是一个 JSfiddle，因此您可以看到它的实际效果：http: [//jsfiddle.net/WF32y/](http://jsfiddle.net/WF32y/)

我能做些什么来解决这个问题？当您在新问题中输入标签时，我基本上想做在这里（stackoverflow.com）发生的事情。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T22:07:23.380

通过更改以下内容对动态添加的元素使用[事件委托：](http://api.jquery.com/on/#direct-and-delegated-events)

```
$('a.delete').on('click', function(e) { 
```

进入这个：

```
$(document).on('click', 'a.delete', function(e) { 
```

[**小提琴**](http://jsfiddle.net/WF32y/1/)

[`.on()`直接和委托事件参考](http://api.jquery.com/on/#direct-and-delegated-events)

此外，关于性能，您可以将处理程序附加到比动态添加元素更近的祖先`document`（例如静态包装器元素）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T22:10:26.670

您可以使用委托轻松完成此操作。在你的情况下：

```
 $('#container').delegate('a.delete','click', function(e) {
    e.preventDefault();
    taskID = $(this).closest('.task')[0].id;
    $(this).closest('.task').fadeTo(300, 0, function() {
        $(this).animate({
            width: 0
        }, 200, function() {
            $(this).remove();
        });
    });
}); 
```

顺便说一句，仅供参考：

```
// jQuery version 1.4.3+
$('#container').delegate('a.delete'...

// jQuery 1.7+
$('#container').on('click', 'a.delete', function(e) { 
```

它比以下方法更快，更合适：

```
$(document).on('a.delete'... 
```

或者：

```
$('body').delegate('a.delete'... 
```

或者：

```
$(document).delegate('a.delete'... 
```

# javascript - GoogleAPI/JSON：从电子表格中检索数据？

> ID：12849274
> 
> 赞同：1
> 
> 时间：2012-10-11T22:04:59.060
> 
> 标签：javascript, spreadsheet, google-docs

事实证明，我想出了自己的解决方案：

```
var data = {"version":"1.0","encoding":"UTF-8","feed":{"xmlns":"http://www.w3.org/2005/Atom","xmlns$openSearch":"http://a9.com/-/spec/opensearchrss/1.0/","xmlns$gs":"http://schemas.google.com/spreadsheets/2006","xmlns$batch":"http://schemas.google.com/gdata/batch","id":{"$t":"https://spreadsheets.google.com/feeds/cells/0ArzGbN1Jn061dFdJZ29VcWttZExoRXQ5TnZVX29xUlE/od6/public/basic"},"updated":{"$t":"2012-10-11T21:56:33.189Z"},"category":[{"scheme":"http://schemas.google.com/spreadsheets/2006","term":"http://schemas.google.com/spreadsheets/2006#cell"}],"title":{"type":"text","$t":"Sheet1"},"link":[{"rel":"alternate","type":"text/html","href":"https://spreadsheets.google.com/pub?key\u003d0ArzGbN1Jn061dFdJZ29VcWttZExoRXQ5TnZVX29xUlE"},{"rel":"http://schemas.google.com/g/2005#feed","type":"application/atom+xml","href":"http://spreadsheets.google.com/feeds/cells/0ArzGbN1Jn061dFdJZ29VcWttZExoRXQ5TnZVX29xUlE/od6/public/basic"},{"rel":"http://schemas.google.com/g/2005#batch","type":"application/atom+xml","href":"http://spreadsheets.google.com/feeds/cells/0ArzGbN1Jn061dFdJZ29VcWttZExoRXQ5TnZVX29xUlE/od6/public/basic/batch"},{"rel":"self","type":"application/atom+xml","href":"http://spreadsheets.google.com/feeds/cells/0ArzGbN1Jn061dFdJZ29VcWttZExoRXQ5TnZVX29xUlE/od6/public/basic?alt\u003djson-in-script"}],"author":[{"name":{"$t":"dhuanco"},"email":{"$t":"dhuanco@gmail.com"}}],"openSearch$totalResults":{"$t":"9"},"openSearch$startIndex":{"$t":"1"},"entry":[{"id":{"$t":"https://spreadsheets.google.com/feeds/cells/0ArzGbN1Jn061dFdJZ29VcWttZExoRXQ5TnZVX29xUlE/od6/public/basic/R1C1"},"updated":{"$t":"2012-10-11T21:56:33.189Z"},"category":[{"scheme":"http://schemas.google.com/spreadsheets/2006","term":"http://schemas.google.com/spreadsheets/2006#cell"}],"title":{"type":"text","$t":"A1"},"content":{"type":"text","$t":"Maria"},"link":[{"rel":"self","type":"application/atom+xml","href":"http://spreadsheets.google.com/feeds/cells/0ArzGbN1Jn061dFdJZ29VcWttZExoRXQ5TnZVX29xUlE/od6/public/basic/R1C1"}]},{"id":{"$t":"https://spreadsheets.google.com/feeds/cells/0ArzGbN1Jn061dFdJZ29VcWttZExoRXQ5TnZVX29xUlE/od6/public/basic/R1C2"},"updated":{"$t":"2012-10-11T21:56:33.189Z"},"category":[{"scheme":"http://schemas.google.com/spreadsheets/2006","term":"http://schemas.google.com/spreadsheets/2006#cell"}],"title":{"type":"text","$t":"B1"},"content":{"type":"text","$t":"30"},"link":[{"rel":"self","type":"application/atom+xml","href":"http://spreadsheets.google.com/feeds/cells/0ArzGbN1Jn061dFdJZ29VcWttZExoRXQ5TnZVX29xUlE/od6/public/basic/R1C2"}]},{"id":{"$t":"https://spreadsheets.google.com/feeds/cells/0ArzGbN1Jn061dFdJZ29VcWttZExoRXQ5TnZVX29xUlE/od6/public/basic/R1C3"},"updated":{"$t":"2012-10-11T21:56:33.189Z"},"category":[{"scheme":"http://schemas.google.com/spreadsheets/2006","term":"http://schemas.google.com/spreadsheets/2006#cell"}],"title":{"type":"text","$t":"C1"},"content":{"type":"text","$t":"USA"},"link":[{"rel":"self","type":"application/atom+xml","href":"http://spreadsheets.google.com/feeds/cells/0ArzGbN1Jn061dFdJZ29VcWttZExoRXQ5TnZVX29xUlE/od6/public/basic/R1C3"}]},{"id":{"$t":"https://spreadsheets.google.com/feeds/cells/0ArzGbN1Jn061dFdJZ29VcWttZExoRXQ5TnZVX29xUlE/od6/public/basic/R2C1"},"updated":{"$t":"2012-10-11T21:56:33.189Z"},"category":[{"scheme":"http://schemas.google.com/spreadsheets/2006","term":"http://schemas.google.com/spreadsheets/2006#cell"}],"title":{"type":"text","$t":"A2"},"content":{"type":"text","$t":"John"},"link":[{"rel":"self","type":"application/atom+xml","href":"http://spreadsheets.google.com/feeds/cells/0ArzGbN1Jn061dFdJZ29VcWttZExoRXQ5TnZVX29xUlE/od6/public/basic/R2C1"}]},{"id":{"$t":"https://spreadsheets.google.com/feeds/cells/0ArzGbN1Jn061dFdJZ29VcWttZExoRXQ5TnZVX29xUlE/od6/public/basic/R2C2"},"updated":{"$t":"2012-10-11T21:56:33.189Z"},"category":[{"scheme":"http://schemas.google.com/spreadsheets/2006","term":"http://schemas.google.com/spreadsheets/2006#cell"}],"title":{"type":"text","$t":"B2"},"content":{"type":"text","$t":"32"},"link":[{"rel":"self","type":"application/atom+xml","href":"http://spreadsheets.google.com/feeds/cells/0ArzGbN1Jn061dFdJZ29VcWttZExoRXQ5TnZVX29xUlE/od6/public/basic/R2C2"}]},{"id":{"$t":"https://spreadsheets.google.com/feeds/cells/0ArzGbN1Jn061dFdJZ29VcWttZExoRXQ5TnZVX29xUlE/od6/public/basic/R2C3"},"updated":{"$t":"2012-10-11T21:56:33.189Z"},"category":[{"scheme":"http://schemas.google.com/spreadsheets/2006","term":"http://schemas.google.com/spreadsheets/2006#cell"}],"title":{"type":"text","$t":"C2"},"content":{"type":"text","$t":"ENG"},"link":[{"rel":"self","type":"application/atom+xml","href":"http://spreadsheets.google.com/feeds/cells/0ArzGbN1Jn061dFdJZ29VcWttZExoRXQ5TnZVX29xUlE/od6/public/basic/R2C3"}]},{"id":{"$t":"https://spreadsheets.google.com/feeds/cells/0ArzGbN1Jn061dFdJZ29VcWttZExoRXQ5TnZVX29xUlE/od6/public/basic/R3C1"},"updated":{"$t":"2012-10-11T21:56:33.189Z"},"category":[{"scheme":"http://schemas.google.com/spreadsheets/2006","term":"http://schemas.google.com/spreadsheets/2006#cell"}],"title":{"type":"text","$t":"A3"},"content":{"type":"text","$t":"Susan"},"link":[{"rel":"self","type":"application/atom+xml","href":"http://spreadsheets.google.com/feeds/cells/0ArzGbN1Jn061dFdJZ29VcWttZExoRXQ5TnZVX29xUlE/od6/public/basic/R3C1"}]},{"id":{"$t":"https://spreadsheets.google.com/feeds/cells/0ArzGbN1Jn061dFdJZ29VcWttZExoRXQ5TnZVX29xUlE/od6/public/basic/R3C2"},"updated":{"$t":"2012-10-11T21:56:33.189Z"},"category":[{"scheme":"http://schemas.google.com/spreadsheets/2006","term":"http://schemas.google.com/spreadsheets/2006#cell"}],"title":{"type":"text","$t":"B3"},"content":{"type":"text","$t":"25"},"link":[{"rel":"self","type":"application/atom+xml","href":"http://spreadsheets.google.com/feeds/cells/0ArzGbN1Jn061dFdJZ29VcWttZExoRXQ5TnZVX29xUlE/od6/public/basic/R3C2"}]},{"id":{"$t":"https://spreadsheets.google.com/feeds/cells/0ArzGbN1Jn061dFdJZ29VcWttZExoRXQ5TnZVX29xUlE/od6/public/basic/R3C3"},"updated":{"$t":"2012-10-11T21:56:33.189Z"},"category":[{"scheme":"http://schemas.google.com/spreadsheets/2006","term":"http://schemas.google.com/spreadsheets/2006#cell"}],"title":{"type":"text","$t":"C3"},"content":{"type":"text","$t":"GER"},"link":[{"rel":"self","type":"application/atom+xml","href":"http://spreadsheets.google.com/feeds/cells/0ArzGbN1Jn061dFdJZ29VcWttZExoRXQ5TnZVX29xUlE/od6/public/basic/R3C3"}]}]}};

function format_ss(data){ // format spreadsheet
    var table = new Array();

    for(var k in data.feed.entry){
        var id = data.feed.entry[k].id.$t;
        var row = id.match(/R([0-9]*)C/)[1]-1;
        var col = id.match(/C([0-9]*)/)[1]-1;

        if(Object.prototype.toString.call(table[row]) != '[object Array]')
            table[row] = new Array();

        table[row][col] = data.feed.entry[k].content.$t;
    }

    return table;
}

var ss = format_ss(data); 
```

它就像一个魅力。

原始问题：

这是我使用谷歌文档创建的公共电子表格：

> [https://docs.google.com/spreadsheet/pub?key=0ArzGbN1Jn061dFdJZ29VcWttZExoRXQ5TnZVX29xUlE&output=html](https://docs.google.com/spreadsheet/pub?key=0ArzGbN1Jn061dFdJZ29VcWttZExoRXQ5TnZVX29xUlE&output=html)

我的问题是，如何使用 JSON 正确获取这些数据？

我试过了

> [http://spreadsheets.google.com/feeds/cells/0ArzGbN1Jn061dFdJZ29VcWttZExoRXQ5TnZVX29xUlE/od6/public/basic?alt=json-in-script&callback=test](http://spreadsheets.google.com/feeds/cells/0ArzGbN1Jn061dFdJZ29VcWttZExoRXQ5TnZVX29xUlE/od6/public/basic?alt=json-in-script&callback=test)

这太糟糕了。json 数据格式不正确，例如，我无法准确判断哪个单元格属于哪个列/字段。

有谁知道获取此电子表格数据的更好方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T22:13:36.113

如果您查看“条目”部分，您会看到：

`"id": { "$t": "https://spreadsheets.google.com/feeds/cells/0ArzGbN1Jn061dFdJZ29VcWttZExoRXQ5TnZVX29xUlE/od6/public/basic/R1C1" }`

ID 基本上是第 1 行第 1 列的 URL。然后在它下面你会找到： `"content": { "type": "text", "$t": "Maria" }`

那里的 $t 值应该为您提供数据。我不得不同意这有点冗长，但这是具有如此多属性的事物的本质。

# javascript - if 语句的多个简写？

> ID：12849285
> 
> 赞同：1
> 
> 时间：2012-10-11T22:06:21.077
> 
> 标签：javascript, jquery

JavaScript 中多个 if 简写的语法是什么？

```
$('#field-'+i+' .name').css({
    top: '30%',
    width: '100%',
    'letter-spacing': i==1 ? '-2.5px' : '-1px',
}); 
```

我希望 letter-spacing 有多个速记，例如：

```
'letter-spacing': i==1 ? '-2.5px' i==3 ? '-1.5px' : '-1px' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T22:09:42.717

实际上，如果您想在一行代码中使用多个三元运算符，那么内联多个三元运算符并没有错或不好，但是您可以在那里使用更具可读性的样式。

但是，我的建议是使用查找对象或*Array*，尤其是当您有很多不同的状态时。

```
var values = ['1px', '-2.5px', '5px', '-1.5px'];

$('#field-'+i+' .name').css({
    top: '30%',
    width: '100%',
    'letter-spacing': values[ i ],
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T22:08:50.383

你只是错过了`:`完成你的第一个条件：

我添加了一些括号以提供一些帮助：

`'letter-spacing': (i == 1) ? '2.5px' : ((i == 3) ? '-1.5px' : '-1px')`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T22:08:52.540

```
i === 1 ? '-2.5px' : i === 3 ? '-1.5px' : '-1px' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-11T22:09:12.713

看起来你在谈论嵌套的三元表达式 - 我倾向于缩进如下：

```
'letter-spacing': i==1 
    ? '-2.5px' 
    : i==3 
        ? '-1.5px' 
        : '-1px' 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-11T22:10:21.340

如果您有很多选择，请考虑使用哈希：

```
var hash = {
    1: '-2.5px',
    3: '-1.5px'
}; 
```

进而：

```
'letter-spacing': hash[i] || '-1px' 
```

如果你`i`是一个整数，你可以使用一个数组，而不是一个哈希对象。但是，对象更灵活。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-11T22:14:51.167

@ChrisFrancis：表格三元变体：

```
`'letter-spacing': i == 1 ? '-2.5px' 
                 : i == 3 ? '-1.5px'
                 :          '-1px' 
```

在这种情况下，第一个“：”可能有点混淆，意思是别的东西，但是要调味

# php - 插入... WHERE NOT EXISTS 错误

> ID：12849289
> 
> 赞同：0
> 
> 时间：2012-10-11T22:06:34.490
> 
> 标签：php, mysql

我的代码有语法错误

```
$insert = @mysql_query("INSERT INTO topics (t_title, t_desc, t_pic, t_link, t_date,cat_id)
SELECT '$t_title','$t_desc','$t_pic','$t_link','$t_date','$cat_id'
WHERE NOT EXISTS (SELECT t_link
FROM topics
WHERE t_link = $t_link
) 
")or die(mysql_error()); 
```

这会返回一个错误：

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'WHERE NOT EXISTS (SELECT t_link FROM topics WHERE t_link = 'showthread.php?t=120' at line 3 
```

我认为问题出在 t_link = $t_link

但是当我用正常值替换它时，问题仍然存在。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T22:10:15.180

你错过了`FROM`第一个 SELECT

```
SELECT '$t_title','$t_desc','$t_pic','$t_link','$t_date','$cat_id'
# MISSED HERE FROM ???
WHERE NOT EXISTS 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T22:27:14.860

请在这里解决 FROM CLAUSE 的问题，请检查解决方案 chumkiu 的答案，而不是我的。

```
create table a ( i int);

insert into a (i )
select 1
from dual
where 1=2;

insert into a (i )
select 3
from dual
where 1=1; 
```

[结果](http://www.sqlfiddle.com/#!2/b75a3/1/0)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T23:12:10.677

如果`t_link`is 在表中有唯一索引，您可以执行以下操作：

```
$insert = @mysql_query("INSERT IGNORE INTO topics (t_title, t_desc, t_pic, t_link, t_date,cat_id)
    VALUES ('$t_title','$t_desc','$t_pic','$t_link','$t_date','$cat_id'); 
```

如果插入将复制唯一键约束，该`IGNORE`关键字告诉它什么都不做。

# umbraco - umbraco 中哪个是发送电子邮件的免费好包？

> ID：12849291
> 
> 赞同：-2
> 
> 时间：2012-10-11T22:06:43.367
> 
> 标签：umbraco

我想知道这段代码是否正确：

```
<system.net>
    <mailSettings>
        <smtp>        
            <network host="smtp.gmail.com" port="587" userName="adm@mail.com" password="123" />        
        </smtp>
    </mailSettings>
</system.net> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T22:50:19.277

我不熟悉 Umbraco - 也就是说，如果您尝试使用您在原始问题中指定的 .config 设置并且电子邮件未成功发送给收件人，请尝试更新您的设置，如下所示：

```
<smtp deliveryMethod="Network">
      <network enableSsl="true" host="smtp.gmail.com" 
         defaultCredentials="false" port="587" userName="xx@gmail.com" password="xx"/>
</smtp> 
```

如果您仍然没有收到来自您的应用程序的电子邮件，请尝试登录您的 Gmail 帐户（与您在 .config smtp 设置中指定的相同帐户）并查看您是否收到来自 Gmail 团队的电子邮件，要求您确认是否不是 Umbraco 是用于发送电子邮件的授权中继（有关此的更多信息，[请参阅此 SO 答案](https://stackoverflow.com/a/12150975/171142)）。

# javascript - 文本区域文本的 Javascript 语法检查器？

> ID：12849293
> 
> 赞同：1
> 
> 时间：2012-10-11T22:06:46.470
> 
> 标签：javascript, syntax

我正在做一个项目，其中一个要求是用户可以在一个简单的文本区域组件上编写自己的 javascript 代码。

这很容易，但我必须验证语法，例如 'error: missing ; 最后'......就像大多数语法检查器一样。

我不想开发它，因为它会花费很多时间。

有人知道是否存在插件吗？我找到了一个名为 Javascript Lint 但它是一个 .exe 文件并且它没有与 Java 的本机集成（它是一个 java ee 项目、jsp 文件等）

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T22:09:54.380

这是一个简单的自上而下的解析器：[https](https://github.com/douglascrockford/TDOP/blob/master/parse.js) ://github.com/douglascrockford/TDOP/blob/master/parse.js 。

更复杂的解析器是 JSLint：[https](https://github.com/douglascrockford/JSLint) ://github.com/douglascrockford/JSLint 。JSLint 是半解析器，具有 C 风格的“lint”工具（用于检查常见错误），但您可以通过不向用户报告“lint”结果来使用半解析器。您还可以关闭所有“lint”检查。

主要区别在于 JSLint 将执行检查变量是否已定义和范围内以及检查其他错误/常见不良做法等事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T22:13:39.297

如果数据不重要，您可以要求用户将他们的数据粘贴到[http://www.jslint.com/（Doug](http://www.jslint.com/) Crockford 的站点），它会在 JSON 中显示错误。

我们在我们的 JS 应用程序中使用了 YUI，所以我们使用了 YAHOO.lang.JSON.parse(your textarea's json content) 来验证用户的 Json。但是，我们永远无法为他们提供 Json 中的准确错误列表，我们只能告诉他们它是否是有效的 Json。

谢谢

# ios - UITableView 值在重新渲染屏幕之前不会渲染

> ID：12849300
> 
> 赞同：0
> 
> 时间：2012-10-11T22:07:42.270
> 
> 标签：ios, uitableview

我有一个表格视图，右侧有一个详细标签。此标签由我从 connectionDidFinishLoading 函数中的 JSON 调用填充的实体填充。问题是 cellFromRowAtIndexPath 函数在 connectionDidFinishLoading 函数之前触发，所以在我拉下重绘页面的屏幕之前，我看不到表视图中的值。我已经尝试在这两个函数的末尾刷新表格视图，但这似乎不起作用。有人可以告诉我为什么会发生这种情况以及如何解决它。

![初始负载是什么样的](../Images/00596b94e40f1cfd7faa1f6b1c88f7c2.png)

![下拉屏幕后刷新的视图是什么样的](../Images/6ffab27892b6dec4f44af671f544052b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T00:30:35.210

Are you calling `reloadData` in the main thread? `connectionDidFinishLoading` sounds like it's running in a background thread.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T22:21:18.637

您必须在 connectionDidFinishLoading 结束时重新加载表数据。两种方式：

首先：

```
[tableView reloadData]; 
```

第二：

```
NSArray* rows = [tableView indexPathsForVisibleRows];
[tableView beginUpdates];
[tableView reloadRowsAtIndexPaths:rows withRowAnimation:UITableViewRowAnimationFade];
[tableView endUpdates]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-22T21:54:08.070

这应该这样做。所有 UI 更新和操作都必须从主线程执行

```
dispatch_async(dispatch_get_main_queue(), ^{
        [self.tableView reloadData];
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T22:17:55.343

填充后，调用`reloadData`tableView。

# java - Android SSL https 帖子

> ID：12849301
> 
> 赞同：3
> 
> 时间：2012-10-11T22:07:42.573
> 
> 标签：java, android, http, ssl, https

我在这里看到了很多类似的问题，但找不到解决方案。我有一个以 x10 溢价托管的 web 服务 PHP 文件。我从他们那里购买了 SSL 证书，并且可以通过浏览器和 iPhone 应用程序上的 https 访问我的网页。我在 Android 应用程序上做同样的事情时遇到了麻烦。

我尝试了许多解决方案，但不断收到 SSL 错误。我试过这个教程[http://www.makeurownrules.com/secure-rest-web-service-mobile-application-android.html](http://www.makeurownrules.com/secure-rest-web-service-mobile-application-android.html) 但我得到了

```
10-04 07:21:57.081: W/System.err(6804): javax.net.ssl.SSLHandshakeException: javax.net.ssl.SSLProtocolException: SSL handshake aborted: ssl=0x2a1a11a8: Failure in SSL library, usually a protocol error
10-04 07:21:57.081: W/System.err(6804): error:140770FC:SSL routines:SSL23_GET_SERVER_HELLO:unknown protocol (external/openssl/ssl/s23_clnt.c:766 0x471f5756:0x00000000)
10-04 07:21:57.091: W/System.err(6804):     at org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl.startHandshake(OpenSSLSocketImpl.java:436)
10-04 07:21:57.123: W/System.err(6804):     at org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl$SSLInputStream.<init (OpenSSLSocketImpl.java:647)
10-04 07:21:57.123: W/System.err(6804):     at org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl.getInputStream(OpenSSLSocketImpl.java:618)
10-04 07:21:57.123: W/System.err(6804):     at org.apache.http.impl.io.SocketInputBuffer.<init>(SocketInputBuffer.java:70)
10-04 07:21:57.131: W/System.err(6804):     at org.apache.http.impl.SocketHttpClientConnection.createSessionInputBuffer(SocketHttpClientConnection.java:83)
10-04 07:21:57.131: W/System.err(6804):     at org.apache.http.impl.conn.DefaultClientConnection.createSessionInputBuffer(DefaultClientConnection.java:170)
10-04 07:21:57.131: W/System.err(6804):     at org.apache.http.impl.SocketHttpClientConnection.bind(SocketHttpClientConnection.java:106)
10-04 07:21:57.131: W/System.err(6804):     at org.apache.http.impl.conn.DefaultClientConnection.openCompleted(DefaultClientConnection.java:129)
10-04 07:21:57.131: W/System.err(6804):     at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:172)
10-04 07:21:57.141: W/System.err(6804):     at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
10-04 07:21:57.141: W/System.err(6804):     at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
10-04 07:21:57.141: W/System.err(6804):     at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
10-04 07:21:57.141: W/System.err(6804):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
10-04 07:21:57.151: W/System.err(6804):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
10-04 07:21:57.151: W/System.err(6804):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
10-04 07:21:57.201: W/System.err(6804):     at com.lablabla.parkme.ParkMeActivity.performUpdate(ParkMeActivity.java:233)
10-04 07:21:57.211: W/System.err(6804):     at com.lablabla.parkme.ParkMeActivity.access$8(ParkMeActivity.java:220)
10-04 07:21:57.211: W/System.err(6804):     at com.lablabla.parkme.ParkMeActivity$3.onClick(ParkMeActivity.java:215)
10-04 07:21:57.211: W/System.err(6804):     at android.view.View.performClick(View.java:4084)
10-04 07:21:57.221: W/System.err(6804):     at android.view.View$PerformClick.run(View.java:16966)
10-04 07:21:57.221: W/System.err(6804):     at android.os.Handler.handleCallback(Handler.java:615)
10-04 07:21:57.221: W/System.err(6804):     at android.os.Handler.dispatchMessage(Handler.java:92)
10-04 07:21:57.241: W/System.err(6804):     at android.os.Looper.loop(Looper.java:137)
10-04 07:21:57.241: W/System.err(6804):     at android.app.ActivityThread.main(ActivityThread.java:4745)
10-04 07:21:57.251: W/System.err(6804):     at java.lang.reflect.Method.invokeNative(Native Method)
10-04 07:21:57.251: W/System.err(6804):     at java.lang.reflect.Method.invoke(Method.java:511)
10-04 07:21:57.271: W/System.err(6804):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
10-04 07:21:57.271: W/System.err(6804):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
10-04 07:21:57.281: W/System.err(6804):     at dalvik.system.NativeStart.main(Native Method)
10-04 07:21:57.291: W/System.err(6804): Caused by: javax.net.ssl.SSLProtocolException: SSL handshake aborted: ssl=0x2a1a11a8: Failure in SSL library, usually a protocol error
10-04 07:21:57.291: W/System.err(6804): error:140770FC:SSL routines:SSL23_GET_SERVER_HELLO:unknown protocol (external/openssl/ssl/s23_clnt.c:766 0x471f5756:0x00000000)
10-04 07:21:57.311: W/System.err(6804):     at org.apache.harmony.xnet.provider.jsse.NativeCrypto.SSL_do_handshake(Native Method)
10-04 07:21:57.311: W/System.err(6804):     at org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl.startHandshake(OpenSSLSocketImpl.java:395) 
```

我在这里尝试了其他关于接受所有证书的建议，因为我正在调用我自己的网络服务并信任所有证书。

另一件事，我可以在浏览器和 iPhone 应用程序中通过 HTTP 连接访问我的网络服务。但是当我尝试在 Android 中制作它时，我收到了返回的 HTML 响应，其中包含

```
10-04 07:29:47.662: D/RESULT(6900):  instead of REQUEST_URI, we could show absolute URL via:
10-04 07:29:47.662: D/RESULT(6900):  http://HTTP_HOST/REQUEST_URI
10-04 07:29:47.662: D/RESULT(6900):     but what if its https:// or other protocol?
10-04 07:29:47.662: D/RESULT(6900):     
10-04 07:29:47.662: D/RESULT(6900):     SERVER_PORT_SECURE doesn't seem to be used
10-04 07:29:47.662: D/RESULT(6900):     SERVER_PORT logic would break if they use alternate ports
10-04 07:29:47.662: D/RESULT(6900): -->
10-04 07:29:47.662: D/RESULT(6900): <h1>404 Not Found</h1> 
```

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T22:13:49.997

证书和 Android 存在一个已知问题。阅读此线程：[使用 ksoap2-android 的不受信任的证书](https://stackoverflow.com/questions/4646121/not-trusted-certificate-using-ksoap2-android)

有一个在 Android 上使用 HTTPs 的解决方案。

[]s 内托

# java - 如何使用 lwjgl 进行文本输入？

> ID：12849303
> 
> 赞同：0
> 
> 时间：2012-10-11T22:07:49.513
> 
> 标签：java, macos, lwjgl

由于未知原因，我试图从 swing 切换到 LWJGL，并且想知道如何制作文本框输入。像 JTextField 什么的。如果有人能告诉我怎么做，那就太好了。

非常感谢，霍华德史塔克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T08:49:24.713

对于 LWJGL 中的文本输入，我建议您使用[TWL](http://twl.l33tlabs.org/)或[NiftyGUI](http://nifty-gui.lessvoid.com/)。这是允许您呈现 GUI 元素的库。

# python - 使用 Python 的 odesk API POST 作业

> ID：12849306
> 
> 赞同：2
> 
> 时间：2012-10-11T22:08:02.960
> 
> 标签：python, api, odesk

我正在尝试使用他们的 API 将工作发布到 odesk 帐户。不幸的是，我在这样做时遇到了麻烦。

我能够通过身份验证并获得我的工作，但是当我尝试发布工作时，它返回 400 错误。

这是响应正文。

```
HTTP Error 400: Bad Request
Exception at POST https://www.odesk.com/api/hr/v2/jobs.json
Server: nginx
Date: Thu, 11 Oct 2012 21:38:08 GMT
Content-Type: application/json
X-Odesk-Error-Code: 4
X-Odesk-Error-Message: Parameter job_data is missing or invalid
Last-Modified: Thu, 11 Oct 2012 21:38:08 GMT
Accept-Ranges: bytes
Cache-Control: no-store
Pragma: no-cache
Expires: Thu, 01 Jan 1970 00:00:00 GMT
Transfer-Encoding: chunked
Connection: close 
```

我也在使用 python-odesk。我跟着这个到T，我得到了上面的错误。 [https://github.com/odesk/python-odesk/blob/master/examples/get_create_update_jobs.py](https://github.com/odesk/python-odesk/blob/master/examples/get_create_update_jobs.py)

对此进行了讨论： [https](https://www.odesk.com/community/node/19676) ://www.odesk.com/community/node/19676 但我认为它没有解决。

我什至试图通过邮递员发送，我得到一个：“并非所有必需的参数都已填写”

我已尝试将以下数据包发送到 odesk。假设 XXXXXX 是有效的 buyer_team__reference。

```
 data = {
            'buyer_team__reference': XXXXXX,
            'title': 'Test job from API',
            'job_type': 'hourly',
            'description': 'this is test job, please do not apply to it',
            'visibility': 'invite-only',
            'category': 'Web Development',
            'subcategory': 'Web Programming',
            'budget': 10,
            'duration': 7,
    } 
```

或者

```
 data = {
            'job_data': {
                    'buyer_team__reference': XXXXXX,
                    'title': 'Test job from API',
                    'job_type': 'hourly',
                    'description': 'this is test job, please do not apply to it',
                    'visibility': 'invite-only',
                    'category': 'Web Development',
                    'subcategory': 'Web Programming',
                    'budget': 10,
                    'duration': 7,
            }
    } 
```

注意：我已经尝试了这个类似数据包的许多变体，但没有成功。

如果有人有任何语言的 odesk API 经验，任何帮助都会很棒。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T17:40:15.727

在尝试了[python-odesk](https://github.com/odesk/python-odesk)之后，我放弃并使用 mechanize 来自动将工作发布到 oDesk

做一个`pip install mechanize`

```
import mechanize,cookielib
# Browser
br = mechanize.Browser()

# Cookie Jar
cj = cookielib.LWPCookieJar()
br.set_cookiejar(cj)

# Browser options
br.set_handle_equiv(True)
br.set_handle_gzip(True)
br.set_handle_redirect(True)
br.set_handle_referer(True)
br.set_handle_robots(False)

# Follows refresh 0 but not hangs on refresh > 0
br.set_handle_refresh(mechanize._http.HTTPRefreshProcessor(), max_time=1)

# Want debugging messages?
#br.set_debug_http(True)
#br.set_debug_redirects(True)
#br.set_debug_responses(True)

# User-Agent (this is cheating, ok?)
br.addheaders = [('User-agent', 'Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.0.1) Gecko/2008071615 Fedora/3.0.1-1.fc9 Firefox/3.0.1')]

# Open odesk site
r = br.open('https://www.odesk.com/login.php')
form = br.forms().next()  # the login form is unnamed...
print form.action
form['login'] = 'yourlogin'
form['password'] = 'yourpassword'
br.form = form
br.submit()

print br.geturl()
#your form data goes here
r = br.open(br.geturl() + 'new/')
print br.geturl()
br.select_form(name="jobsPost")  # the form is unnamed...
br.find_control(name="category").value = ['Writing & Translation']
br.find_control(name="subcategory").value = ['35']
br.form['title'] = 'Filling up a profile'
br.form['description'] = 'Require assistance in filing up our profile'
br.find_control(name="job_type").value = ['Fixed']
br.form['job_budget'] = '10'
br.form['job_finish_date'] = '10-14-2012'
br.find_control(name="visibility").value = ['private']
br.submit()

print br.geturl() 
```

# perl - 如何打印并排重复两次的数组元素？

> ID：12849307
> 
> 赞同：5
> 
> 时间：2012-10-11T22:08:03.023
> 
> 标签：perl

请，我有以下代码行来编写文件的标题，但我想并排打印数组@order 的每个元素两次。例如： $1 $1 $2 $2 $3 $3... 这样我的输出文件的每一对列都具有相同的名称。

```
print(join("\t", "Case_ID", "State", "Ind", "DoB", @order) . "\n"); 
```

我可以做一些简单的事情，或者我必须在打印之前遍历数组以重复元素吗？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-11T22:11:27.530

无论如何你都必须循环，但你可以使用 map 来获得语法优雅：

```
# map { $_, $_ } @order

print join("\t", "Case_ID", "State", "Ind", "DoB", map { $_, $_ }  @order))
       . "\n"; 
```

# java - 快速排序算法改进

> ID：12849309
> 
> 赞同：1
> 
> 时间：2012-10-11T22:08:27.037
> 
> 标签：java, sorting, quicksort

我正在做一个算法类项目，我们必须在其中修改 QuickSort 的实现并提出改进建议。其中一个建议如下：不要单挑数组中的pivot，避免分区方法的最后一次swap。

我很难理解他的意思。没有枢轴，它怎么还是 QuickSort？任何洞察这可能意味着什么将不胜感激。这是要修改的Java 代码。

```
public void quickSort() {
    recQuickSort(0, nElems - 1);
}

public void recQuickSort(int left, int right) {
    if (left >= right)
        return;
    long pivot = a[right];
    int mid = partition(left, right, pivot);
    recQuickSort(left, mid - 1);
    recQuickSort(mid + 1, right);
} // end recQuickSort()

public void swap(int dex1, int dex2) { // swap two elements
    long temp = a[dex1]; // A into temp
    a[dex1] = a[dex2]; // B into A
    a[dex2] = temp; // temp into B
} // end swap()

public int partition(int left, int right, long pivot) {
    // assuming pivot == a[right]
    int leftPtr = left - 1; // left of the first element
    int rightPtr = right; // position of pivot
    while (true) {
        while (a[++leftPtr] < pivot)
            ; // find bigger
        while (leftPtr < rightPtr && a[--rightPtr] >= pivot)
            ; // find smaller
        if (leftPtr >= rightPtr) // if pointers cross,
            break; // partition done
        else
            // not crossed, so
            swap(leftPtr, rightPtr); // swap elements
    } // end while(true)
    swap(leftPtr, right); // restore pivot
    return leftPtr; // return pivot location
} // end partition() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T22:26:34.083

I'm not going to try to implement it for you, but my interpretation of this suggested "improvement" is that he wants you to still choose a pivot **value** and partition the array into sections according to which side of that value they're on, but not treat the array entry containing that value specially.

It shouldn't be hard to do, but it won't improve performance of the algorithm at all, and I doubt that it's much of an improvement in any other sense.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T22:30:21.347

看起来他不希望您以数组中的实际元素为中心。该`partition()`方法中最后一次交换的要点是他将枢轴移动到数组中的正确位置（请注意，他在`partition()`调用后从不移动枢轴元素）。

**编辑**如果您对“不使用枢轴”感到困惑，那么您仍在使用枢轴......它只是不是数组中的枢轴。想象一下手动进行快速排序，您可以选择任意值进行旋转。

问题是这种交换根本不会对性能产生负面影响。另一方面，这应该是一个快速的变化......

# java - Maven 站点插件失败并显示：无法访问 java.util.EnumSet.elementType

> ID：12849311
> 
> 赞同：1
> 
> 时间：2012-10-11T22:08:32.630
> 
> 标签：java, jakarta-ee, maven-2, xstream, maven-site-plugin

我使用 Maven 站点插件版本 2.2 和 XStream 版本 1.3.1。当我做，

```
mvn site:stage -DstagingDirectory=C:\ 
```

它总是失败

```
[INFO] Trace
com.thoughtworks.xstream.XStream$InitializationException: Could not instatiate converter : com.thoughtworks.xstream.converters.enums.EnumSetConverter : null
        at com.thoughtworks.xstream.XStream.dynamicallyRegisterConverter(XStream.java:651)
        at com.thoughtworks.xstream.XStream.setupConverters(XStream.java:620)
        at com.thoughtworks.xstream.XStream.<init>(XStream.java:371)
        at com.thoughtworks.xstream.XStream.<init>(XStream.java:316)
        at org.codehaus.mojo.dashboard.report.plugin.DashBoardUtils.saveXMLDashBoardReport(DashBoardUtils.java:995)
        at org.codehaus.mojo.dashboard.report.plugin.DashBoardReportMojo.executeReport(DashBoardReportMojo.java:282)
        at org.apache.maven.reporting.AbstractMavenReport.generate(AbstractMavenReport.java:98)
        at org.apache.maven.plugins.site.ReportDocumentRenderer.renderDocument(ReportDocumentRenderer.java:161)
        at org.apache.maven.doxia.siterenderer.DefaultSiteRenderer.renderModule(DefaultSiteRenderer.java:330)
        at org.apache.maven.doxia.siterenderer.DefaultSiteRenderer.render(DefaultSiteRenderer.java:134)
        at org.apache.maven.plugins.site.SiteMojo.renderLocale(SiteMojo.java:154)
        at org.apache.maven.plugins.site.SiteMojo.execute(SiteMojo.java:118)
        at org.apache.maven.plugins.site.SiteStageMojo.execute(SiteStageMojo.java:112)
        at org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPluginManager.java:490)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:694)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeStandaloneGoal(DefaultLifecycleExecutor.java:569)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(DefaultLifecycleExecutor.java:539)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHandleFailures(DefaultLifecycleExecutor.java:387)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegments(DefaultLifecycleExecutor.java:348)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLifecycleExecutor.java:180)
        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:328)
        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:138)
        at org.apache.maven.cli.MavenCli.main(MavenCli.java:362)
        at org.apache.maven.cli.compat.CompatibleMain.main(CompatibleMain.java:60)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)
        at java.lang.reflect.Method.invoke(Method.java:599)
        at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)
        at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)
        at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)
        at org.codehaus.classworlds.Launcher.main(Launcher.java:375)
Caused by: java.lang.reflect.InvocationTargetException
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:41)
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:39)
        at java.lang.reflect.Constructor.newInstance(Constructor.java:515)
        at com.thoughtworks.xstream.XStream.dynamicallyRegisterConverter(XStream.java:644)
        ... 31 more
Caused by: java.lang.RuntimeException: Could not access java.util.EnumSet.elementType field
        at com.thoughtworks.xstream.core.util.Fields.find(Fields.java:18)
        at com.thoughtworks.xstream.converters.enums.EnumSetConverter.<init>(EnumSetConverter.java:31)
        ... 36 more
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 25 seconds
[INFO] Finished at: Thu Oct 11 17:01:09 CDT 2012
[INFO] Final Memory: 118M/249M
[INFO] ------------------------------------------------------------------------ 
```

我在这里做错了什么。我尝试使用 XStream 版本 1.2.2 没有任何运气

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T08:39:06.010

从异常是仪表板 Maven 插件失败。尝试使用不同的版本。

# php - 优化 php 代码以减少 php 处理

> ID：12849312
> 
> 赞同：1
> 
> 时间：2012-10-11T22:08:33.320
> 
> 标签：php

在处理大量流量时，我的 apache 服务器出现了一些问题。经过一些优化后，我做了。我仍然有同样的问题。我检查了我的日志文件，结果发现我有很多 php 处理。以下代码每分钟处理大约 800 次（当我有高流量时）并让我的服务器崩溃。

1）我需要重写代码的任何部分以减少php处理吗？2）在html开始之前拥有所有这些代码是个好主意吗？

```
<?php
$ip = $_SERVER['REMOTE_ADDR'];
mysql_connect('', '', '');
mysql_select_db('');

if(empty($_GET['i']) == false){
    $get_image = mysql_real_escape_string($_GET['i']);
    $check_if_image = mysql_query("SELECT `id`, `image_name`, `image_type`, `image_caption`, `image_voteup`, `image_votedown`, `image_views`, `fb_userid` FROM images_new WHERE image_name = '$get_image'");
    if(mysql_num_rows($check_if_image) == 1){
        $result = mysql_fetch_assoc($check_if_image);
        $image_id = $result['id'];
        $image_name = $result['image_name'];
        $image_type = $result['image_type'];
        $image_caption = stripslashes($result['image_caption']);
        $image_voteup = $result['image_voteup'];
        $image_votedown = $result['image_votedown'];
        //$image_date = $result['image_date'];
        $image_views = $result['image_views'];
        $fb_username = $result['fb_username'];
        $fb_userid = $result['fb_userid'];

        //next image
        $next_image_id = $image_id + 1;
        $check_next_image = mysql_query("SELECT `image_name` FROM images_new WHERE id = '$next_image_id'");
        if(mysql_num_rows($check_next_image) == 1){
            $next_image_result = mysql_fetch_assoc($check_next_image);
            $next_image_name = $next_image_result['image_name'];
            }
        // pre image
        $pre_image_id = $image_id - 1;
        $check_pre_image = mysql_query("SELECT `image_name` FROM images_new WHERE id = '$pre_image_id'");
        if(mysql_num_rows($check_pre_image) == 1){
            $pre_image_result = mysql_fetch_assoc($check_pre_image);
            $pre_image_name = $pre_image_result['image_name'];
            }
        //shares, comments, and likes
        $fb_page_url = "http://www.xxx.com/images.php?i=".$get_image;
        $fb_url = "http://api.facebook.com/restserver.php?method=links.getStats&urls=".urlencode($fb_page_url);
        $fb_xml = file_get_contents($fb_url);
        $fb_xml = simplexml_load_string($fb_xml);
        $fb_shares = $fb_xml->link_stat->share_count;
        $fb_likes = $fb_xml->link_stat->like_count;
        $fb_likes_and_shares = $fb_likes + $fb_shares;
        $fb_comments = $fb_xml->link_stat->commentsbox_count; 

        //facebook
        require_once('scripts/facebook.php');
        $config = array('appId' => '','secret' => '');
        $params = array('scope'=>'user_likes,publish_actions,email,offline_access,user_birthday');
        $facebook = new Facebook($config);
        $user = $facebook->getUser();

        if($user){
            try{
            $user_profile = $facebook->api('/me','GET');
            $user_id = $user_profile['username'];
            $expire_time = time() + 30758400;

            //insert cookie id
            if (!isset($_COOKIE['id'])){
                $cookie_id = $user_profile['username'];
                setcookie("id", $cookie_id, $expire_time, '/');
                }
            //insert cookie name
            if (!isset($_COOKIE['name'])){
                $user_name = $user_profile['first_name'];
                setcookie("name", $user_name, $expire_time, '/');
                }

            //check if the user like the fan page
            $isFan = $facebook->api(array(
            "method"    => "pages.isFan",
            "page_id"   => ''
            ));

            }catch(FacebookApiException $e) {
                        error_log($e->getType());
                        error_log($e->getMessage());
      } 
            }else{//if no user
                if(isset($_COOKIE['name'])){
                $user_name = $user_profile['first_name'];
                setcookie("name", $user_name, time() - 30758400, '/');
                    }
                }

            //increase views
            if($facebook->getUser()){
            mysql_query("UPDATE images_main SET image_views = image_views + 1 WHERE image_name='$image_name'");
            mysql_query("UPDATE images_new SET image_views = image_views + 1 WHERE image_name='$image_name'");
            }

}else{//image was not found in the database.
            header('Location: index.php');
            }
    }else{//redirect if get is empty
        header('Location: index.php');
        }

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T22:12:36.817

我想说关键因素是您对 Facebook API 的调用，这些东西总是很昂贵且易于缓存，将代码放在单独的页面/包含中并根据需要缓存它。

另外作为旁注，您应该考虑减少数据库查询的数量，并且您可能希望更新您的数据库驱动程序......因为每个人都指出@Madara Uchiha

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T22:14:29.000

我马上就看到了一些项目。

第一个查询：

```
 $check_if_image = mysql_query("SELECT `id`, `image_name`, `image_type`, `image_caption`, `image_voteup`, `image_votedown`, `image_views`, `fb_userid` FROM images_new WHERE image_name = '$get_image'"); 
```

如果您只需要返回一个结果，请在末尾添加一个“LIMIT 1”（除非该字段具有唯一索引，在这种情况下这无关紧要）。还要确保该字段已编入索引，最好是 VARCHAR 字段而不是 TEXT 或 BLOB。

接下来，您将运行 2 个查询来获取上一个和下一个图像。我会将其组合成 1 个查询，如下所示：

```
SELECT `image_name` FROM images_new WHERE id IN ('$next_image_id', '$pre_image_id') 
```

此外，您可以将我提到的第一个优化应用于这两个查询：

```
if($facebook->getUser()){
        mysql_query("UPDATE images_main SET image_views = image_views + 1 WHERE image_name='$image_name'");
        mysql_query("UPDATE images_new SET image_views = image_views + 1 WHERE image_name='$image_name'");
} 
```

最后，通过 Facebook API 会增加加载时间，而您对此无能为力。希望这能让你走上正确的道路。

# c++ - 将 Eigen 矩阵转换为 c 数组以便我可以使用 gsl 的高效性能方法是什么

> ID：12849327
> 
> 赞同：3
> 
> 时间：2012-10-11T22:09:35.347
> 
> 标签：c++, pointers, eigen, arrays

我的大部分代码都使用 Eigen，但我想使用 GSL 的 Miser 或 Vegas monte-carlo 集成。我需要将 Eigen 的向量转换为`double`s 的 c 数组，最好的方法是什么？

```
Matrix<double,3,1> --> c_array [] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T22:44:39.837

我以前和Eigen合作过......

通常，为了简单地访问内部数组数据，就像[用户 janneb 在这个线程中提到的那样](https://stackoverflow.com/questions/8443102/convert-eigen-matrix-to-c-array)，你只想[调用**data()**](http://eigen.tuxfamily.org/dox/classEigen_1_1PlainObjectBase.html#a4663159a1450fa89214b1ab71f7ef5bf)：

```
Vector3d v;
// Operations to add values to the vector.
double *c_ptr = v.data(); 
```

如果您希望迭代各个值以执行某些操作，则需要迭代每一**行 (.row(index))**和**列 (.col(index))**，具体取决于您要在目标中放置的矩阵顺序向量。

在您的具体示例中，您只需要迭代行：

```
Matrix<double,3,1> --> c_array [] 
```

你会想打电话给**.col(0)**。如果出现类似[的需求，具体的文档总是有帮助的！](http://eigen.tuxfamily.org/dox/classEigen_1_1Matrix.html)

所以你最终会得到类似的东西（假设你希望使用三行单列矩阵）：

```
Vector3d v;
// Operations to add values to the vector.
for (int i=0; i<v.rows(); ++i)
  c_array[i] = v(i,0); 
```

希望有帮助。

# ubuntu - 安装 ubuntu boost 包时，cmake 无法链接到自定义 boost

> ID：12849330
> 
> 赞同：3
> 
> 时间：2012-10-11T22:09:49.720
> 
> 标签：ubuntu, boost, cmake

构建 UHD (http://ettus-apps.sourcerepo.com/redmine/ettus/projects/uhd/wiki) 下载链接[https://github.com/EttusResearch/UHD-Mirror/zipball/release_003_004_003](https://github.com/EttusResearch/UHD-Mirror/zipball/release_003_004_003) 我想选择 Boost我正在使用的版本

使用 Ubuntu 11.10 64 位，我使用 -fPIC 构建了一个自定义 Boost。我使用静态链接编辑 host/CMakeLists.txt 文件并添加

```
set(Boost_USE_STATIC_LIBS ON)
set(BOOST_ROOT "/home/bastien/verisat/lib_boost_1_49_0_with_test_po_fPIC")
set(BOOST_INCLUDEDIR "/home/bastien/verisat/lib_boost_1_49_0_with_test_po_fPIC/include")
set(BOOST_LIBRARYDIR "/home/bastien/verisat/lib_boost_1_49_0_with_test_po_fPIC/lib") 
```

在文件中已经存在的这 3 行之前

```
FIND_PACKAGE(Boost 1.49 COMPONENTS ${BOOST_REQUIRED_COMPONENTS})
INCLUDE_DIRECTORIES(${Boost_INCLUDE_DIRS})
LINK_DIRECTORIES(${Boost_LIBRARY_DIRS}) 
```

当我删除 boost ubuntu 包时，它总是链接到 /usr/lib 中的 boost 而不是指定的那个

```
sudo apt-get remove libboost-all-dev
sudo apt-get autoremove 
```

然后它工作并指向指定的增强版本

我希望能够这样做而不必卸载默认的 boost ？默认是 1.46 和我的 1.49，但是设置最低版本没有帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T22:30:34.573

您可以设置`Boost_NO_SYSTEM_PATHS`变量：

```
#   Boost_NO_SYSTEM_PATHS        Set to TRUE to suppress searching in system
#                                paths (or other locations outside of BOOST_ROOT
#                                or BOOST_INCLUDEDIR).  Useful when specifying
#                                BOOST_ROOT. Defaults to OFF.
#                                  [Since CMake 2.8.3] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T22:13:56.000

在某处安装正确的版本并使用环境变量`BOOST_ROOT`来指定它。CMake 将在正常系统路径之前尝试。

# asp.net-mvc - Monodevelop MVC3 剃须刀 - 让它工作的诀窍是什么？

> ID：12849340
> 
> 赞同：3
> 
> 时间：2012-10-11T22:10:32.810
> 
> 标签：asp.net-mvc, macos, mono, monodevelop

我在 mac OS 10.8 上使用 monodevelop 3.0.4.7 和 mono 2.11.4。

当我在 monodevelop 从头开始​​创建一个新解决方案时，我可以创建几种类型的带有剃须刀视图的 ASP.NET mvc3 项目，但是这些项目是通过对 system.web.helpers 和 system.web.webpages 的引用创建的，这些引用“不可用于Mono/.net 4.0 in mono 2.11.4" 并且不会构建。

如果我在项目选项中将我的 .net 版本更改为 4.5，我会解决 system.web.webpages 引用，如果我只是删除对 system.web.helpers 的引用，我就可以构建默认站点。但是，它无法使用 .cshtml 视图，它只查找 aspx 视图。

我尝试了与 mono 的引用和版本相关的不同事情，在 global.asax.cs 中将视图引擎更改为 razor，甚至从基于 Windows 的 asp.net mvc 应用程序中复制了 dll，但总是有一些新的问题。

有些项目类型不能从头开始工作，这似乎很奇怪，所以我猜测/希望我错过了一些更简单的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T10:19:09.387

我在 Linux 上遇到了完全相同的问题，所以我决定在单声道邮件列表上提问（在这里查看我的问题的答案：http: [//lists.ximian.com/pipermail/mono-list/2012-十月/049022.html](http://lists.ximian.com/pipermail/mono-list/2012-October/049022.html)）。

简短的回答是：不，你不会错过任何简单的东西。

长版：mono的当前版本没有编译System.Web.Helpers.dll，所以你必须自己做一些步法，才能编译它。这在上面的链接中有所描述。

我想我们只需要再等一会儿才能成为单声道框架的一部分：/

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-27T18:18:20.987

我在这里遇到了这个问题的解决方案：

[http://blog.miraclespain.com/archive/2013/Jun-24.html](http://blog.miraclespain.com/archive/2013/Jun-24.html)

基本上在 xamarin 工作室中，您可以从以下加载项存储库源*添加一个版本的 nuget ：*

[http://mrward.github.com/monodevelop-nuget-addin-repository/4.0/main.mrep](http://mrward.github.com/monodevelop-nuget-addin-repository/4.0/main.mrep)

安装 nuget 后，您可以创建一个新的 mvc3 razor 项目，注意 system.web.helpers 和 system.web.pages 缺少的引用并删除它们，然后使用 nuget 添加*microsoft aspnet web pages 2*包，它解决了缺少参考。

# c# - 如何在我的程序的开始菜单中创建菜单？

> ID：12849341
> 
> 赞同：11
> 
> 时间：2012-10-11T22:10:31.930
> 
> 标签：c#, c++, delphi, winapi, windows-7

这可能是一个简单的问题，但我什至不确定要搜索的术语，所以我不得不问。如果我的程序被固定到开始菜单，我希望我的程序在悬停时有一个菜单。我附上了一个屏幕截图，其中 windows powershell 说明了这个功能，并显示了一个任务列表。

![在此处输入图像描述](../Images/f1585dca852ddb7791a9150b62e0e39d.png)

其他程序有时会使用它来列出最近打开的文件等。我相信这是足够标准的，以至于在某个地方有一个教程，有人介意指点我，或者解释如何做到这一点吗？我希望使用什么语言并不重要，但我精通 Delphi、C++ 和 C#。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-11T22:16:57.213

您必须使用该[`ICustomDestinationList.AddUserTasks`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd378395%28v=vs.85%29.aspx)方法，它是[`Taskbar Extensions`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd378460%28v=vs.85%29.aspx#tasks)Windows 7 中引入的一部分。

# 更新

试试这个示例控制台应用程序，运行代码并将应用程序的快捷方式移动到开始菜单。（这只是一个示例片段，因此请记住添加对所有返回`HResult`值的方法的结果的检查）

```
program ProjectTasks;

{$APPTYPE CONSOLE}

{$R *.res}

uses
  SysUtils,
  ActiveX,
  windows,
  ComObj,
  ShlObj,
  PropSys,
  ObjectArray;

const
  PKEY_TITLE : TPropertyKey = ( fmtID : '{F29F85E0-4FF9-1068-AB91-08002B27B3D9}'; pID : 2);

procedure CreateTaskList;
var
  LCustomDestinationList : ICustomDestinationList;
  pcMaxSlots : Cardinal;
  ppv : IObjectArray;
  poa : IObjectCollection;
  LTask : IShellLink;
  LPropertyStore : IPropertyStore;
  LTitle : TPropVariant;
  LTaskBarList : ITaskBarList;
  LTaskBarList3 : ITaskBarList3;
  hr : HRESULT;
begin
    LTaskBarList := CreateComObject(CLSID_TaskBarList) as ITaskBarList;
    hr := LTaskBarList.QueryInterface(IID_ITaskBarList3, LTaskBarList3);
    if hr <> S_OK then exit;

    LCustomDestinationList := CreateComObject(CLSID_DestinationList) as ICustomDestinationList;
    LCustomDestinationList.BeginList(pcMaxSlots, IID_IObjectArray, ppv);
    poa := CreateComObject(CLSID_EnumerableObjectCollection) as IObjectCollection;

    LTask := CreateComObject(CLSID_ShellLink) as IShellLink;
    LTask.SetPath(pChar(ParamStr(0))); //set the  path to the exe
    LTask.SetDescription('This is a description sample');
    LTask.SetArguments(PChar('Bar'));
    LTask.SetIconLocation(PChar('Shell32.dll'),1);
    LPropertyStore := LTask as IPropertyStore;
    LTitle.vt := VT_LPWSTR;
    LTitle.pwszVal := PChar('This is the Task 1');
    LPropertyStore.SetValue(PKEY_Title,LTitle);
    LPropertyStore.Commit;
    poa.AddObject(LTask);

    LTask := CreateComObject(CLSID_ShellLink) as IShellLink;
    LTask.SetPath(PChar(ParamStr(0))); //set the  path to the exe
    LTask.SetDescription('This is a description sample');
    LTask.SetArguments(PChar('Foo'));
    LTask.SetIconLocation(pChar('Shell32.dll'),1);
    LPropertyStore := LTask as IPropertyStore;
    LTitle.vt := VT_LPWSTR;
    LTitle.pwszVal := pChar('This is the Task 2');
    LPropertyStore.SetValue(PKEY_Title,LTitle);
    LPropertyStore.Commit;
    poa.AddObject(LTask);

    LCustomDestinationList.AddUserTasks(poa as IObjectArray);
    LCustomDestinationList.CommitList;
end;

begin
 try
    CoInitialize(nil);
    try
       CreateTaskList;
    finally
      CoUninitialize;
    end;
 except
    on E:EOleException do
        Writeln(Format('EOleException %s %x', [E.Message,E.ErrorCode]));
    on E:Exception do
        Writeln(E.Classname, ':', E.Message);
 end;
 Writeln('Press Enter to exit');
 Readln;
end. 
```

![在此处输入图像描述](../Images/09769702fab542f45f218b845bf39c26.png)

# c - 为什么我没有收到分段错误？

> ID：12849345
> 
> 赞同：0
> 
> 时间：2012-10-11T22:10:49.590
> 
> 标签：c, segmentation-fault, cstring

> **可能重复：**
> [为什么我写超出数组末尾时不会出现分段错误？](https://stackoverflow.com/questions/12410016/why-dont-i-get-a-segmentation-fault-when-i-write-beyond-the-end-of-an-array)

当我意识到发生了一些奇怪的事情时，我只是在玩指针。我知道，每当我们想使用*strcpy将字符串**src*复制到另一个字符串*dst*时，我们应该为*src*分配所需的空间。

 **```
 char *dst,*src = "asdlskafksdhfklshfkshdkfhksdhfçsahdflçsdhfçklshadfç";

    dst = (char*)malloc(1); //only one char allocated
    strcpy(dst,src);

    printf("dst=%s.\n",dst); 
```

此代码不应执行。然而，这并没有发生。代码执行，成功地将*src*复制到*dst*并像魅力一样打印*dst 。*有人可以解释一下为什么会这样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T22:21:19.840

C 的部分性能是它没有太多内置错误检查的方式。众所周知，它传递了一个`strcpy`正确类型的指针，它不知道它指向了多少分配的内存。生成的机器代码只是从 src 指针读取到第一个空字节，然后将其粘贴到 dst 指针中。如果它没有覆盖其他人的内存，则没有错误。

什么是“别人的记忆”？通常，进程以[页](https://secure.wikimedia.org/wikipedia/en/wiki/Paging)为单位分配内存。当您 malloc 一个字节时，该进程将获得一整页内存，可能是几千字节，以便根据需要进行切片和切块。当您的进程试图在其分配的页面之外进行写入时，[以及出于其他原因](https://secure.wikimedia.org/wikipedia/en/wiki/Segmentation_fault#Common_causes)，就会发生分段错误。该错误通常由执行内存管理的操作系统和/或硬件生成。由于 src 只有几十个字节，因此不太可能走出进程页面。如果您使 src 成为更长的字符串，您可能会得到您期望的段错误。

有各种用于调试的 malloc 包装库，它们通过各种技巧使 C 检查内存错误。 [Valgrind](http://en.wikipedia.org/wiki/Valgrind)和[Electric Fence](http://en.wikipedia.org/wiki/Electric_Fence)是其中最著名的。

PS 我对这些东西的工作原理有点模糊，但它比“它是未定义的行为”更令人满意。请随时编辑我的解释不足的地方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T22:25:51.303

您的字符串是在堆上分配的。堆的大小不是只有 1 个字节，而是大约 4kb 物理 RAM（默认 Windows 控制台应用程序大小）。

只有在尝试写入堆外的内存区域时才会出现分段错误。但是，您可能会破坏应用程序其他部分的内存。但是由于您的程序很小，并且在写入超出分配的内存后立即终止，因此您不太可能看到任何错误

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T22:16:07.937

在发布版本中，*dst 指向进程地址空间中的一些内存——你写入它，如果它碰巧被像你的应用程序这样有用的东西占用，它会崩溃。

在调试版本中，您的编译器可能会将 *dst 设置为 0 或一些可识别的值，例如 0xDEADBEEF，以便您可以发现这一点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-11T22:17:46.403

如果您在分配的内存之外写入结果是不确定的。如果你很幸运，你会得到一个段错误。如果你不走运，其他变量会被覆盖。底线：任何事情都会发生！**

# php - mysql fetch return 只返回类中最近的行

> ID：12849347
> 
> 赞同：0
> 
> 时间：2012-10-11T22:10:55.003
> 
> 标签：php, mysql

我有一个 MySql 类，我通过将 Mysql 行作为方法返回来获取它们：

```
 public function fetch_assoc($result_set){
     return mysql_fetch_assoc($result_set);
  } 
```

出于某种原因，当我尝试遍历通过我实例化的对象返回的方法时，它只返回一个结果。

```
 while ($row = $a->fetch_assoc($result_set){
  ...
  } 
```

在做旧时尚方式的同时，给了我所有的行

```
 while($row = mysql_fetch_array($result_set)){
      $row['0'];
  } 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T22:16:49.120

那是因为 mysql_fetch_assoc 只返回一个结果并将指针移动到下一个。因此，在每次迭代中，它返回移动指针并在到达结果末尾时返回 false。

您可以通过这种方式修改您的方法以使其工作：

```
public function fetch_assoc($result_set){
    $resultArray = array();
    while ($row = mysql_fetch_assoc($result_set){
        $resultArray[] = $row;
    }
    return $resultArray;
} 
```

您可以这样使用数据：

```
foreach ($obj->fetch_assoc($result_set) as $row){
    echo $row['stuff'];
} 
```

请注意，在这种情况下`$obj->fetch_assoc($result_set)`返回所有结果，我只是使用 foreach 循环遍历它；

# go - golang变量设置

> ID：12849349
> 
> 赞同：3
> 
> 时间：2012-10-11T22:11:00.510
> 
> 标签：go

我需要在我的包的开头设置一个变量，稍后将使用 parseFiles() 填充该变量，但我不确定如何设置该变量，因为它不是字符串或 int 或任何类似的泛型。我将如何设置变量而不必在其中添加一些任意名称来设置它？

```
var templatefiles = template.New("foo") // Im having to do New("foo") just to set the variable

// Later on adding files to original variable
templatefiles.New("template name").Parse("Template text here") 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T22:15:28.883

您只需要替换`= template.New("foo")`为返回的类型。在这种情况下：

```
var templatefiles *template.Template // the return type of html/template.New() 
```

templatefiles 现在是一个全局变量，其中包含一个指向类型的 nil 指针`template.Template`。

# python - 箭袋向量叠加在绘图上

> ID：12849350
> 
> 赞同：4
> 
> 时间：2012-10-11T22:11:02.073
> 
> 标签：python, matplotlib

我想绘制 y vs x 线，然后在它之上我想绘制向量。我可以使用matplotlib 的功能`plot`来做到这一点。`quiver`但是，向量将始终绘制在线后，而不是顶部。那就是线将在矢量箭头上可见。

**我对你们所有人的问题是......有没有办法将箭袋向量放在先前绘制的线的顶部？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T04:04:40.790

您需要将`zorder`箭袋的 设置为高于线。

```
x = range(15)
y = rand(15)
u = rand(15)
v = rand(15)

figure()
plot(x,y,'rx-',zorder=0)
quiver(x,y,u,v,zorder=1) 
```

![示例图像](../Images/d3a8638b97cf0b8a7e66a1f30fcf8fbe.png)

# .net - 带有 .NET 4.5 的 NSIS 安装程序

> ID：12849352
> 
> 赞同：7
> 
> 时间：2012-10-11T22:11:04.317
> 
> 标签：.net, nsis

我正在寻找一些 NSIS 的代码片段来检测和有条件地运行 .NET 4.5 安装程序

这个答案 - [NSIS Installer with .NET 4.0](https://stackoverflow.com/questions/3542496/nsis-installer-with-net-4-0) - 太天真了，因为只检查注册表项（而不是值）的存在不会区分 4.0 和 4.5

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-16T00:09:05.547

您不应该检查确切的版本号。这将在未来发生变化（如 4.0 > 4.5 的情况）。而是使用[部署指南](http://msdn.microsoft.com/en-us/library/ee942965.aspx)中的代码。

除此之外，您应该尝试从 .Net 4.5 处理重新启动。

```
Function CheckAndInstallDotNet
    ; Magic numbers from http://msdn.microsoft.com/en-us/library/ee942965.aspx
    ClearErrors
    ReadRegDWORD $0 HKLM "SOFTWARE\Microsoft\NET Framework Setup\NDP\v4\Full" "Release"

    IfErrors NotDetected

    ${If} $0 >= 378389

        DetailPrint "Microsoft .NET Framework 4.5 is installed ($0)"
    ${Else}
    NotDetected:
        DetailPrint "Installing Microsoft .NET Framework 4.5"
        SetDetailsPrint listonly
        ExecWait '"$INSTDIR\Tools\dotNetFx45_Full_setup.exe" /passive /norestart' $0
        ${If} $0 == 3010 
        ${OrIf} $0 == 1641
            DetailPrint "Microsoft .NET Framework 4.5 installer requested reboot"
            SetRebootFlag true
        ${EndIf}
        SetDetailsPrint lastused
        DetailPrint "Microsoft .NET Framework 4.5 installer returned $0"
    ${EndIf}

FunctionEnd 
```

# javascript - 如何通过javascript / jquery查找DIV中是否存在特定的DOM？

> ID：12849361
> 
> 赞同：2
> 
> 时间：2012-10-11T22:11:39.337
> 
> 标签：javascript, jquery, html

我有一个这样的 HTML 结构：

```
<div id='list'>
  <table id='1'></table>
  <table id='2'></table>
  <table id='r'></table>
  //And more...
</div> 
```

所有表格都是由其他代码动态添加的。他们的 ID 也是动态生成的。

我希望知道，当我需要添加一个新表时，如何检查新表的 ID 是否已经存在于列表中？也就是说，如何检查 id 是否在 div 中？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T22:52:00.820

使用 jQuery find() API 在另一个元素中查找元素。 [文档在这里](http://api.jquery.com/find/)。find() API 允许您像 $() 一样选择，但在 OP 想要的目标内。请注意，find() 还会遍历所有级别的所有子代，而不仅仅是直系子代（孙子、曾孙等）。

在这里工作[的 JSFiddle](http://jsfiddle.net/mBbJx/)显示了这个 API，它通过 ID 在一个 DIV 中而不是在另一个 DIV 中找到目标范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T22:13:49.680

`$(#id).length > 0`表示 id 已经存在。

# jquery - History.js 和状态

> ID：12849362
> 
> 赞同：3
> 
> 时间：2012-10-11T22:11:46.207
> 
> 标签：jquery, ajax, html, browser-history, history.js

有人可以向我解释一下状态吗？

例如，使用[history.js](https://github.com/balupton/History.js/)插件。

```
History.pushState({state:1}, "State 1", "?state=1"); // logs {state:1}, "State 1", "?state=1" 
```

我理解最后一个参数，因为它是推送到地址栏的 URL，但我不知道前两个。了解这些将帮助我将 history.js 实施到我的网站中，因为我在后退/前进导航方面遇到了麻烦。

在[Mozilla 开发](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history)网站上，它说：

***state object** — state 对象是一个 JavaScript 对象，它与 pushState() 创建的新历史条目相关联。每当用户导航到新状态时，都会触发一个 popstate 事件，并且该事件的 state 属性包含历史条目的 state 对象的副本。状态对象可以是任何可以序列化的对象。因为 Firefox 将状态对象保存到用户的磁盘，以便在用户重新启动浏览器后可以恢复它们，所以我们对状态对象的序列化表示施加了 640k 个字符的大小限制。如果将序列化表示大于此的状态对象传递给 pushState()，则该方法将抛出异常。如果您需要更多空间，建议您使用 sessionStorage 和/或 localStorage。*

状态只是使用 AJAX 加载的代码的副本吗？或者它只是该代码的表示，因此可以调用它？

对此的任何见解表示赞赏！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T22:17:21.270

状态对象是任何 Javascript 对象——它可以是单个变量，也可以是函数和值的巨大哈希图。它是您想要用来表示您的应用在那个时间点的“状态”的任何数据。这样的事情很常见：

```
var viewModel = {
    title: 'FAQs',
    url: 'faqs.html',
    favouriteColor: 'green',
    stepsCompleted: 4
};

history.pushState(viewModel, viewModel.title, viewModel.url); 
```

这基本上是创建一个对象，其中包含“记住”并在以后恢复状态所需的任何内容 - 例如，如果用户正在遵循向导式的逐步表单等。

第二个参数 ,`title`暂时被浏览器忽略了，但可能用于向前/向后导航等用例，其中页面标题可能需要更新。

# windows-8 - Monogame vs ANX

> ID：12849364
> 
> 赞同：1
> 
> 时间：2012-10-11T22:11:54.817
> 
> 标签：windows-8, xna, monogame

我正在为我的下一个游戏项目寻找一个对 Win8-Metro 友好的框架。其中两个非商业选项是 Monogame 和 ANX。两者都像 XNA。我想知道哪个更成熟可靠？

优缺点都有什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T02:07:27.280

MonoGame 即将发布 3.0 版稳定版，而 ANX 处于 alpha 版 o.4.x。MonoGame 正在尝试与 XNA 4.0 API 兼容。Microsoft 布道者正在推广 MonoGame 作为将 XNA 游戏放到 Windows 8 商店的可行替代方案。MonoGame 已经在 Windows 8 商店中拥有多款已通过审批的游戏，并在 iOS、Android、MacOS、Linux 和即将推出的 PlayStation Vita 上发布游戏。

我无法评论 ANX，因为我从未使用过它，但如果它超过了我上面提到的所有内容，请使用它。

# ruby-on-rails - 如何从包含数据库行的 Ruby 变量中查找唯一行

> ID：12849365
> 
> 赞同：0
> 
> 时间：2012-10-11T22:12:06.533
> 
> 标签：ruby-on-rails, ruby, rubygems

我在 Ruby 中有这些代码行：

```
connection = ActiveRecord::Base.connection()
@mastertest = connection.execute("select code_ver, suite, date from mastertest order by date desc limit 30") 
```

所以 mastertest 包含我的数据库表中的所有行。

我只想要结果中具有唯一值 code_ver 的所有行。我怎么找到那个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T22:25:57.343

您可以尝试以下方法：

```
@mastertest = connection.execute("select distinct code_ver, suite, date from mastertest where code_ver = "#{@variable}") 
```

# android - 动态添加一个Textview

> ID：12849366
> 
> 赞同：3
> 
> 时间：2012-10-11T22:12:28.123
> 
> 标签：android, android-layout, textview

在布局文件中，我有以下内容：

```
 android:layout_width="100dp" 
    android:layout_height="wrap_content" android:layout_marginRight="10dp" 
    android:text="SYN" 
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:background="@drawable/rectanglepurple"
    android:textColor="#000000" 
    android:gravity="right"/> 
```

我正在尝试使用代码实现以下目标，到目前为止我有：

```
Resources res = getResources();
Drawable drawable1=res.getDrawable(R.drawable.rectanglepurple);

TextView idText = new TextView(getActivity());
    idText.setText("SYN");
    idText.setTextAppearance(getActivity(), android.R.style.TextAppearance_Medium);
    idText.setTextColor(Color.BLACK);
    idText.setGravity(Gravity.RIGHT);
    idText.setBackgroundDrawable(drawable1); 
```

我不能锻炼如何处理

```
 android:layout_width="100dp" 
    android:layout_height="wrap_content" android:layout_marginRight="10dp" 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-11T22:26:20.700

This is an interesting part of Android layouts. The XML properties that are prefixed with layout_ are actually for the containing view manager (like LinearLayout or RelativeLayout). So you need to add something like this:

```
//convert from pixels (accepted by LayoutParams) to dp
int px = convertDpToPixel(100, this);
LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(px, LinearLayout.LayoutParams.WRAP_CONTENT);
//convert from pixels (taken by LayoutParams.rightMargin) to dp
px = convertDpToPixel(10, this);
params.rightMargin = px;
idText.setLayoutParams(params); 
```

And the convertDpToPixel (shamelessly adapted (change to return int instead of float) from [Converting pixels to dp](https://stackoverflow.com/questions/4605527/converting-pixels-to-dp-in-android) ):

```
/**
* This method converts dp unit to equivalent device specific value in pixels.
*
* @param dp      A value in dp(Device independent pixels) unit. Which we need to convert into pixels
* @param context Context to get resources and device specific display metrics
* @return An integer value to represent Pixels equivalent to dp according to device
*/
public static int convertDpToPixel(float dp, Context context) {
    Resources resources = context.getResources();
    DisplayMetrics metrics = resources.getDisplayMetrics();
    int px = (int) (dp * (metrics.densityDpi / 160f));
    return px;
} 
```

EDIT: changed the assignment to rightMargin from 10 (# of pixels) to the variable px (containing the number of pixels in 10dp) whoopsie.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T22:22:40.603

你可能想看看

```
 setLayoutParams() 
```

TextView 类的方法。--[安卓文档](http://developer.android.com/reference/android/view/View.html#setLayoutParams%28android.view.ViewGroup.LayoutParams%29)

# excel - matlab：excel中rgb的颜色错误

> ID：12849371
> 
> 赞同：2
> 
> 时间：2012-10-11T22:13:02.113
> 
> 标签：excel, matlab, cell, rgb

我只添加了我的代码的相关行：

假设我有 [106 113 50] 的 RGB。我想用它的颜色为单元格 A1 到 A7 着色。

在 excel 中，我得到了与 mspaint 不同的颜色（某些网站给我带来了与 mspaint 相同的颜色）

![在此处输入图像描述](../Images/c4e2744eb688f3f9b2269ea157ffc61f.png)

这是我的代码：

```
rgb = [106 113 50];
clr = rgb * [1 256 256^2]'; %# convert to long number Excel understands

 e = actxserver ('Excel.Application'); %# open Activex server
 filename = fullfile(path_of_file,name_of_file); %# full path required
 ewb = e.Workbooks.Open(filename); %# open the file
 esh = ewb.ActiveSheet;

 esh.Range('A1:A7').Interior.Color = clr; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T22:15:31.977

从图片中我看不出它是哪个版本的 Excel。如果它低于 2007 年，则 Excel 仅支持 56 种颜色，因此无论您的代码中有什么，都映射到最近的一种

# javascript - Javascript 阻止单选按钮工作

> ID：12849375
> 
> 赞同：0
> 
> 时间：2012-10-11T22:13:17.140
> 
> 标签：javascript, jquery, html

我认为这很简单，但我无法弄清楚为什么`#type2`不能点击。

```
<input type="radio" id="type1" name="group1" checked>

<input type="radio" id="type2" name="group1">

<input type="text" class="type1">

<input type="text" class="type2" disabled>

<script>

function toggle() {
    if ($('#type1').attr('checked', true)) {
        $('.type1').attr('disabled', false);
        $('.type2').attr('disabled', true);
    }
    else if ($('#type2').attr('checked', true)) {
        $('.type1').attr('disabled', true);
        $('.type2').attr('disabled', false);
    }
}

$(document).ready(function() {
    toggle();
});

</script> 
```

我看不出有什么问题。任何帮助都会很棒，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T22:15:43.707

尝试：

```
function toggle() {
    if ($('#type1').is(':checked')) {
        $('.type1').attr('disabled', false);
        $('.type2').attr('disabled', true);
    }
    else if ($('#type2').is(':checked')) {
        $('.type1').attr('disabled', true);
        $('.type2').attr('disabled', false);
    }
} 
```

**示例：http:** [//jsfiddle.net/andrewwhitaker/z5Wbv/1/](http://jsfiddle.net/andrewwhitaker/z5Wbv/1/)

[`.attr`](http://api.jquery.com/attr)您使用的版本*将* `#type1`'`checked`属性设置为 true。您可以使用[`is`](http://api.jquery.com/is), 和[`:checked`选择器](http://api.jquery.com/checked-selector/)来确定是否选中了复选框/单选按钮。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T22:17:21.723

您使用的是 .attr 而不是 .prop。

.attr 用于属性，.prop 用于属性。属性 = 选中、选中、禁用。

文档：[http ://api.jquery.com/prop/](http://api.jquery.com/prop/)

要确定是否选中了复选框，

```
if ( elem.checked )
if ( $(elem).prop("checked") )
if ( $(elem).is(":checked") ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T22:19:16.167

工作演示** [http://jsfiddle.net/YUhFw/](http://jsfiddle.net/YUhFw/)

需要纠正的几件事`:)`

*   检查是否使用检查`.is(":checked")`
*   将其附加到单击事件。
*   相应地附加和分离`disabled`属性。

希望它适合原因`:)`

**代码**

```
function toggle() {
    if ($('#type1').is(':checked')) {
        $('.type1').removeAttr('disabled');
        $('.type2').attr('disabled', true);
    }
    else if ($('#type2').is(':checked')) {
        $('.type1').attr('disabled', true);
        $('.type2').removeAttr('disabled');
    }
}

$(document).ready(function() {
    $("input[type=radio]").click(function() {
        toggle();
    });
});​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T22:19:21.427

您**不是在这里检查**条件。

你正在**设置它** `which is always true`.. 试试这个

```
if ($('#type1').is(':checked')){ 
```

也使用`.prop()` **代替**，`.attr()`因为这确实不是属性，而是单选按钮的属性。您的代码应如下所示

```
function toggle() {
    if ($('#type1').is(':checked')) {
        $('.type1').prop('disabled', false);
        $('.type2').prop('disabled', true);
    }
    else if ($('#type2').is(':checked')) {
        $('.type1').prop('disabled', true);
        $('.type2').prop('disabled', false);
    }
} 
```

# java - 这是 SSL/TLS 双向身份验证还是出了什么问题？

> ID：12849382
> 
> 赞同：0
> 
> 时间：2012-10-11T22:13:45.750
> 
> 标签：java, android, ssl, ssl-certificate

我已经学习 SSL/TSL 和证书一周了。

看起来它可以工作，并且我有 SSL/TLS 客户端/服务器证书，用于两种身份验证 SSL 工作。

Java 服务器在 PC win7 上，Java 客户端是 Android ICS。
客户端连接并发送文本字符串，服务器回复文本字符串。

传输有效，但我不确定它是否已加密，因为我看不到正在发送的数据。

如果我做错了什么，我想对调试日志有第二意见？
（*删除了很​​多二进制文本以适应此正文*）

```
adding as trusted cert:
  Subject: CN=smith.droid-ip.com, O=SMITH, C=SE
  Issuer:  CN=smith.droid-ip.com, O=SMITH, C=SE
  Algorithm: RSA; Serial number: 0xb4ba1f6a7902bb97
  Valid from Thu Oct 11 18:37:21 CEST 2012 until Fri Oct 11 18:37:21 CEST 2013

***
found key for : 1
chain [0] = [
[
  Version: V3
  Subject: CN=smith.droid-ip.com, O=SMITH, C=SE
  Signature Algorithm: SHA1withRSA, OID = 1.2.840.113549.1.1.5

  Key:  Sun RSA public key, 2048 bits
  modulus: 19828292987711460063479095233990735206267474911720200680398978846239921718204800830196446367271259853243857782157464503041073715350900882399263842246256739265150626309452599118681530205469111691215024194198408322269068550434706560902100199589198763096214957779831336905118521574867338194318861017871505432271905525399396261074008234892595483193798680621671023145911
  public exponent: 65537
  Validity: [From: Thu Oct 11 18:38:14 CEST 2012,
               To: Fri Oct 11 18:38:14 CEST 2013]
  Issuer: CN=smith.droid-ip.com, O=SMITH, C=SE
  SerialNumber: [    ef1a4465 3fb9d4ed]

Certificate Extensions: 3
[1]: ObjectId: 2.5.29.14 Criticality=false
SubjectKeyIdentifier [
KeyIdentifier [
0000: F5 6E DA 1E DD 85 08 31   D9 16 AC 37 23 DB 52 6A  .n.....1...7#.Rj
0010: FF B3 D4 E3                                        ....
]
]

[2]: ObjectId: 2.5.29.35 Criticality=false
AuthorityKeyIdentifier [
KeyIdentifier [
0000: F5 6E DA 1E DD 85 08 31   D9 16 AC 37 23 DB 52 6A  .n.....1...7#.Rj
0010: FF B3 D4 E3                                        ....
]
]

[3]: ObjectId: 2.5.29.19 Criticality=false
BasicConstraints:[
  CA:true
  PathLen:2147483647
]

]
  Algorithm: [SHA1withRSA]
  Signature:
0000: 7C EA BF 17 BB 9C 6E E6   DC 6E D3 5D 7E B5 48 0F  ......n..n.]..H.
0010: 5A A1 98 5F 15 A8 46 49   36 D2 1B F9 05 60 87 ED  Z.._..FI6....`..
00E0: 61 9B 78 96 F7 54 D3 68   F2 91 9F 43 57 AB C5 0E  a.x..T.h...CW...
00F0: D8 9E 51 85 08 62 F6 B4   BB A4 70 04 0F BA D2 C6  ..Q..b....p.....

]
***
SSL Key 1
SSL Trust 1
trigger seeding of SecureRandom
done seeding SecureRandom
Server started
  Waiting for connection from client...
Allow unsafe renegotiation: false
Allow legacy hello messages: true
Is initial handshake: true
Is secure renegotiation: false
  Accepted connection from 192.168.1.1, port 54732
[Raw read]: length = 5
0000: 16 03 01 00 B3                                     .....
[Raw read]: length = 179
0000: 01 00 00 AF 03 01 50 77   38 3C 36 6C 05 1E DA AF  ......Pw8<6l....
0010: DA 43 76 EF 65 9B 43 C4   5A 05 34 FC 42 B9 4F 54  .Cv.e.C.Z.4.B.OT
0090: 08 00 09 00 0A 00 0B 00   0C 00 0D 00 0E 00 0F 00  ................
00A0: 10 00 11 00 12 00 13 00   14 00 15 00 16 00 17 00  ................
00B0: 18 00 19                                           ...
main, READ: TLSv1 Handshake, length = 179
*** ClientHello, TLSv1
RandomCookie:  GMT: 1349990460 bytes = { 54, 108, 5, 30, 218, 175, 218, 67, 118, 239, 101, 155, 67, 196, 90, 5, 52, 252, 66, 185, 79, 84, 176, 249, 20, 196, 174, 171 }
Session ID:  {}
Cipher Suites: [SSL_RSA_WITH_RC4_128_MD5, SSL_RSA_WITH_RC4_128_SHA, TLS_RSA_WITH_AES_128_CBC_SHA, TLS_RSA_WITH_AES_256_CBC_SHA, TLS_ECDH_ECDSA_WITH_RC4_128_SHA, TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA, TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA, TLS_ECDH_RSA_WITH_RC4_128_SHA, TLS_ECDH_RSA_WITH_AES_128_CBC_SHA, TLS_ECDH_RSA_WITH_AES_256_CBC_SHA, TLS_ECDHE_ECDSA_WITH_RC4_128_SHA, TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA, TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA, TLS_ECDHE_RSA_WITH_RC4_128_SHA, TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA, TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA, TLS_DHE_RSA_WITH_AES_128_CBC_SHA, TLS_DHE_RSA_WITH_AES_256_CBC_SHA, TLS_DHE_DSS_WITH_AES_128_CBC_SHA, TLS_DHE_DSS_WITH_AES_256_CBC_SHA, SSL_RSA_WITH_3DES_EDE_CBC_SHA, TLS_ECDH_ECDSA_WITH_3DES_EDE_CBC_SHA, TLS_ECDH_RSA_WITH_3DES_EDE_CBC_SHA, TLS_ECDHE_ECDSA_WITH_3DES_EDE_CBC_SHA, TLS_ECDHE_RSA_WITH_3DES_EDE_CBC_SHA, SSL_DHE_RSA_WITH_3DES_EDE_CBC_SHA, SSL_DHE_DSS_WITH_3DES_EDE_CBC_SHA, SSL_RSA_WITH_DES_CBC_SHA, SSL_DHE_RSA_WITH_DES_CBC_SHA, SSL_DHE_DSS_WITH_DES_CBC_SHA, SSL_RSA_EXPORT_WITH_RC4_40_MD5, SSL_RSA_EXPORT_WITH_DES40_CBC_SHA, SSL_DHE_RSA_EXPORT_WITH_DES40_CBC_SHA, SSL_DHE_DSS_EXPORT_WITH_DES40_CBC_SHA, TLS_EMPTY_RENEGOTIATION_INFO_SCSV]
Compression Methods:  { 0 }
Extension ec_point_formats, formats: [uncompressed, ansiX962_compressed_prime, ansiX962_compressed_char2]
Extension elliptic_curves, curve names: {sect163k1, sect163r1, sect163r2, sect193r1, sect193r2, sect233k1, sect233r1, sect239k1, sect283k1, sect283r1, sect409k1, sect409r1, sect571k1, sect571r1, secp160k1, secp160r1, secp160r2, secp192k1, secp192r1, secp224k1, secp224r1, secp256k1, secp256r1, secp384r1, secp521r1}
***
[read] MD5 and SHA1 hashes:  len = 179
0000: 01 00 00 AF 03 01 50 77   38 3C 36 6C 05 1E DA AF  ......Pw8<6l....
0010: DA 43 76 EF 65 9B 43 C4   5A 05 34 FC 42 B9 4F 54  .Cv.e.C.Z.4.B.OT
0020: B0 F9 14 C4 AE AB 00 00   46 00 04 00 05 00 2F 00  ........F...../.
0090: 08 00 09 00 0A 00 0B 00   0C 00 0D 00 0E 00 0F 00  ................
00A0: 10 00 11 00 12 00 13 00   14 00 15 00 16 00 17 00  ................
00B0: 18 00 19                                           ...
%% Initialized:  [Session-1, SSL_NULL_WITH_NULL_NULL]
matching alias: 1
%% Negotiating:  [Session-1, SSL_RSA_WITH_RC4_128_MD5]
*** ServerHello, TLSv1
RandomCookie:  GMT: 1349990450 bytes = { 174, 0, 115, 139, 10, 24, 65, 65, 210, 225, 235, 246, 73, 222, 227, 2, 249, 108, 142, 119, 113, 131, 78, 202, 83, 67, 172, 181 }
Session ID:  {80, 119, 56, 50, 9, 30, 182, 174, 111, 28, 205, 221, 135, 132, 189, 19, 82, 157, 109, 159, 42, 162, 203, 141, 125, 61, 76, 105, 185, 192, 186, 184}
Cipher Suite: SSL_RSA_WITH_RC4_128_MD5
Compression Method: 0
Extension renegotiation_info, renegotiated_connection: <empty>
***
Cipher suite:  SSL_RSA_WITH_RC4_128_MD5
*** Certificate chain
chain [0] = [
[
  Version: V3
  Subject: CN=smith.droid-ip.com, O=SMITH, C=SE
  Signature Algorithm: SHA1withRSA, OID = 1.2.840.113549.1.1.5

  Key:  Sun RSA public key, 2048 bits
  modulus: 198282929877114600634790952339907352062674749117202006803989788462399217182048008301964463672712598532438577821574645030410737153509008823992638422462567392651506263094525991186815305469111691215024194198408322269068550434706560902100199589198763096214957779831336905118521574867338194318861017871505432271905525399396261074008234892595483193798680621671023145911
  public exponent: 65537
  Validity: [From: Thu Oct 11 18:38:14 CEST 2012,
               To: Fri Oct 11 18:38:14 CEST 2013]
  Issuer: CN=smith.droid-ip.com, O=SMITH, C=SE
  SerialNumber: [    ef1a4465 3fb9d4ed]

Certificate Extensions: 3
[1]: ObjectId: 2.5.29.14 Criticality=false
SubjectKeyIdentifier [
KeyIdentifier [
0000: F5 6E DA 1E DD 85 08 31   D9 16 AC 37 23 DB 52 6A  .n.....1...7#.Rj
0010: FF B3 D4 E3                                        ....
]
]

[2]: ObjectId: 2.5.29.35 Criticality=false
AuthorityKeyIdentifier [
KeyIdentifier [
0000: F5 6E DA 1E DD 85 08 31   D9 16 AC 37 23 DB 52 6A  .n.....1...7#.Rj
0010: FF B3 D4 E3                                        ....
]
]

[3]: ObjectId: 2.5.29.19 Criticality=false
BasicConstraints:[
  CA:true
  PathLen:2147483647
]

]
  Algorithm: [SHA1withRSA]
  Signature:
0000: 7C EA BF 17 BB 9C 6E E6   DC 6E D3 5D 7E B5 48 0F  ......n..n.]..H.
0010: 5A A1 98 5F 15 A8 46 49   36 D2 1B F9 05 60 87 ED  Z.._..FI6....`..
0020: F8 59 E5 08 9F 06 22 0F   18 4A F6 E6 6C 23 39 E8  .Y...."..J..l#9.
00D0: 5A F8 94 F4 5F C2 01 BE   EE E0 4E 8B BD CA 14 3C  Z..._.....N....<
00E0: 61 9B 78 96 F7 54 D3 68   F2 91 9F 43 57 AB C5 0E  a.x..T.h...CW...
00F0: D8 9E 51 85 08 62 F6 B4   BB A4 70 04 0F BA D2 C6  ..Q..b....p.....

]
***
*** CertificateRequest
Cert Types: RSA, DSS, ECDSA
Cert Authorities:
<CN=smith.droid-ip.com, O=SMITH, C=SE>
*** ServerHelloDone
[write] MD5 and SHA1 hashes:  len = 1022
0000: 02 00 00 4D 03 01 50 77   38 32 AE 00 73 8B 0A 18  ...M..Pw82..s...
0010: 41 41 D2 E1 EB F6 49 DE   E3 02 F9 6C 8E 77 71 83  AA....I....l.wq.
0060: 82 02 37 A0 03 02 01 02   02 09 00 EF 1A 44 65 3F  ..7..........De?
0070: B9 D4 ED 30 0D 06 09 2A   86 48 86 F7 0D 01 01 05  ...0...*.H......
0080: 05 00 30 3E 31 0B 30 09   06 03 55 04 06 13 02 53  ..0>1.0...U....S
0090: 45 31 0F 30 0D 06 03 55   04 0A 0C 06 53 50 52 49  E1.0...U....SPRI
00A0: 49 44 31 1E 30 1C 06 03   55 04 03 0C 15 64 72 75  ID1.0...U....dru
00B0: 74 74 65 6E 2E 64 79 6E   64 6E 73 2D 69 70 2E 63  tten.droid-ip.c
00C0: 6F 6D 30 1E 17 0D 31 32   31 30 31 31 31 36 33 38  om0...1210111638
00D0: 31 34 5A 17 0D 31 33 31   30 31 31 31 36 33 38 31  14Z..13101116381
00E0: 34 5A 30 3E 31 0B 30 09   06 03 55 04 06 13 02 53  4Z0>1.0...U....S
00F0: 45 31 0F 30 0D 06 03 55   04 0A 0C 06 53 50 52 49  E1.0...U....SPRI
0100: 49 44 31 1E 30 1C 06 03   55 04 03 0C 15 64 72 75  ID1.0...U....dru
0110: 74 74 65 6E 2E 64 79 6E   64 6E 73 2D 69 70 2E 63  tten.droid-ip.c
0120: 6F 6D 30 82 01 22 30 0D   06 09 2A 86 48 86 F7 0D  om0.."0...*.H...
03C0: 06 03 55 04 06 13 02 53   45 31 0F 30 0D 06 03 55  ..U....SE1.0...U
03D0: 04 0A 0C 06 53 50 52 49   49 44 31 1E 30 1C 06 03  ....SMITH1.0...
03E0: 55 04 03 0C 15 64 72 75   74 74 65 6E 2E 64 79 6E  U....smith.dyn
03F0: 64 6E 73 2D 69 70 2E 63   6F 6D 0E 00 00 00        dns-ip.com....
main, WRITE: TLSv1 Handshake, length = 1022
[Raw write]: length = 1027
0000: 16 03 01 03 FE 02 00 00   4D 03 01 50 77 38 32 AE  ........M..Pw82.
0010: 00 73 8B 0A 18 41 41 D2   E1 EB F6 49 DE E3 02 F9  .s...AA....I....
0020: 6C 8E 77 71 83 4E CA 53   43 AC B5 20 50 77 38 32  l.wq.N.SC.. Pw82
0090: 04 06 13 02 53 45 31 0F   30 0D 06 03 55 04 0A 0C  ....SE1.0...U...
00A0: 06 53 50 52 49 49 44 31   1E 30 1C 06 03 55 04 03  .SMITH1.0...U..
00B0: 0C 15 64 72 75 74 74 65   6E 2E 64 79 6E 64 6E 73  ..smith.droid
00C0: 2D 69 70 2E 63 6F 6D 30   1E 17 0D 31 32 31 30 31  -ip.com0...12101
00D0: 31 31 36 33 38 31 34 5A   17 0D 31 33 31 30 31 31  1163814Z..131011
03E0: 1E 30 1C 06 03 55 04 03   0C 15 64 72 75 74 74 65  .0...U....drutte
03F0: 6E 2E 64 79 6E 64 6E 73   2D 69 70 2E 63 6F 6D 0E  n.droid-ip.com.
0400: 00 00 00                                           ...
[Raw read]: length = 5
0000: 16 03 01 03 5D                                     ....]
[Raw read]: length = 861
0000: 0B 00 03 59 00 03 56 00   03 53 30 82 03 4F 30 82  ...Y..V..S0..O0.
0010: 02 37 A0 03 02 01 02 02   09 00 B4 BA 1F 6A 79 02  .7...........jy.
0020: BB 97 30 0D 06 09 2A 86   48 86 F7 0D 01 01 05 05  ..0...*.H.......
0030: 00 30 3E 31 0B 30 09 06   03 55 04 06 13 02 53 45  .0>1.0...U....SE
0040: 31 0F 30 0D 06 03 55 04   0A 0C 06 53 50 52 49 49  1.0...U....SPRII
0330: AD 48 3B FE 4B F9 1A 82   C9 CB 24 88 89 C3 78 8E  .H;.K.....$...x.
0340: A6 D4 FE CE 39 66 F4 48   39 16 7D 8E 08 DB 3E 24  ....9f.H9.....>$
0350: F7 FD 34 76 94 6D 37 BE   EF 53 BA 89 4D           ..4v.m7..S..M
main, READ: TLSv1 Handshake, length = 861
*** Certificate chain
chain [0] = [
[
  Version: V3
  Subject: CN=smith.droid-ip.com, O=SMITH, C=SE
  Signature Algorithm: SHA1withRSA, OID = 1.2.840.113549.1.1.5

  Key:  Sun RSA public key, 2048 bits
  modulus: 23496237719502336160731187123882087516857248303136016525007515477411820324389309412497616204841416737428369029539727911829957261900246123671755448783374076371585220700946079814339410199697877719076300791503351733152444962714618216706903270272228589537934701160017250218124068090224176369183083907456616852817429610227318879195807569316432328134191548839310114727528540673
  public exponent: 65537  Validity: [From: Thu Oct 11 18:37:21 CEST 2012,
               To: Fri Oct 11 18:37:21 CEST 2013]
  Issuer: CN=smith.droid-ip.com, O=SMITH, C=SE
  SerialNumber: [    b4ba1f6a 7902bb97]

Certificate Extensions: 3
[1]: ObjectId: 2.5.29.14 Criticality=false
SubjectKeyIdentifier [
KeyIdentifier [
0000: 28 E3 D4 F1 6B 59 12 54   26 6B 9B 09 6A 94 77 79  (...kY.T&k..j.wy
0010: AE BC 3D 2B                                        ..=+
]
]

[2]: ObjectId: 2.5.29.35 Criticality=false
AuthorityKeyIdentifier [
KeyIdentifier [
0000: 28 E3 D4 F1 6B 59 12 54   26 6B 9B 09 6A 94 77 79  (...kY.T&k..j.wy
0010: AE BC 3D 2B                                        ..=+
]
]

[3]: ObjectId: 2.5.29.19 Criticality=false
BasicConstraints:[
  CA:true
  PathLen:2147483647
]

]
  Algorithm: [SHA1withRSA]
  Signature:
0000: B0 22 82 D5 1B AF 4C A7   7E D9 B4 27 F7 48 C4 D7  ."....L....'.H..
0010: DE A5 45 E6 72 D1 85 DE   CF F7 AF A4 97 7B 68 6A  ..E.r.........hj
0020: FE 22 D0 1A 38 E6 5F D4   6B ED CD F1 32 6B 29 E5  ."..8._.k...2k).
0030: 72 EE 9F 7F 4F 16 10 7D   C4 1B 6C 1A 31 4A 8E 3C  r...O.....l.1J.<
0040: E0 E9 8B 0E E2 D5 5B 01   00 29 1C 32 8B E8 D9 56  ......[..).2...V
0050: DF 5D 6A 95 F4 BA 20 7D   CA E7 FD 0E C5 C1 91 36  .]j... ........6
0060: 5C 13 00 F9 04 A8 4C 93   A7 46 0D C6 54 07 4B 7B  \.....L..F..T.K.
00F0: DB 3E 24 F7 FD 34 76 94   6D 37 BE EF 53 BA 89 4D  .>$..4v.m7..S..M

]
***
Found trusted certificate:
[
[
  Version: V3
  Subject: CN=smith.droid-ip.com, O=SMITH, C=SE
  Signature Algorithm: SHA1withRSA, OID = 1.2.840.113549.1.1.5

  Key:  Sun RSA public key, 2048 bits
  modulus: 23496237719502336160731187123882087516857248303136016525007515477411820324389309412497616204841416737428369029539727911829957261900246123671755448783374076371585220700946079814339410697877719076300791503351733152444962714618216706903270272228589537934701160017250218124068090224176369183083907456616852817429610227318879195807569316432328134191548839310114727528540673
  public exponent: 65537
  Validity: [From: Thu Oct 11 18:37:21 CEST 2012,
               To: Fri Oct 11 18:37:21 CEST 2013]
  Issuer: CN=smith.droid-ip.com, O=SMITH, C=SE
  SerialNumber: [    b4ba1f6a 7902bb97]

Certificate Extensions: 3
[1]: ObjectId: 2.5.29.14 Criticality=false
SubjectKeyIdentifier [
KeyIdentifier [
0000: 28 E3 D4 F1 6B 59 12 54   26 6B 9B 09 6A 94 77 79  (...kY.T&k..j.wy
0010: AE BC 3D 2B                                        ..=+
]
]

[2]: ObjectId: 2.5.29.35 Criticality=false
AuthorityKeyIdentifier [
KeyIdentifier [
0000: 28 E3 D4 F1 6B 59 12 54   26 6B 9B 09 6A 94 77 79  (...kY.T&k..j.wy
0010: AE BC 3D 2B                                        ..=+
]
]

[3]: ObjectId: 2.5.29.19 Criticality=false
BasicConstraints:[
  CA:true
  PathLen:2147483647
]

]
  Algorithm: [SHA1withRSA]
  Signature:
0000: B0 22 82 D5 1B AF 4C A7   7E D9 B4 27 F7 48 C4 D7  ."....L....'.H..
0010: DE A5 45 E6 72 D1 85 DE   CF F7 AF A4 97 7B 68 6A  ..E.r.........hj
0020: FE 22 D0 1A 38 E6 5F D4   6B ED CD F1 32 6B 29 E5  ."..8._.k...2k).
00D0: CF 07 1B AD 48 3B FE 4B   F9 1A 82 C9 CB 24 88 89  ....H;.K.....$..
00E0: C3 78 8E A6 D4 FE CE 39   66 F4 48 39 16 7D 8E 08  .x.....9f.H9....
00F0: DB 3E 24 F7 FD 34 76 94   6D 37 BE EF 53 BA 89 4D  .>$..4v.m7..S..M

]
[read] MD5 and SHA1 hashes:  len = 861
0000: 0B 00 03 59 00 03 56 00   03 53 30 82 03 4F 30 82  ...Y..V..S0..O0.
0010: 02 37 A0 03 02 01 02 02   09 00 B4 BA 1F 6A 79 02  .7...........jy.
0030: 00 30 3E 31 0B 30 09 06   03 55 04 06 13 02 53 45  .0>1.0...U....SE
0040: 31 0F 30 0D 06 03 55 04   0A 0C 06 53 50 52 49 49  1.0...U....SPRII
00D0: 6D 30 82 01 22 30 0D 06   09 2A 86 48 86 F7 0D 01  m0.."0...*.H....
01D0: 4F DE F0 44 74 44 65 34   E5 05 79 01 B3 11 6F 56  O..DtDe4..y...oV
01E0: EC C0 54 54 BF E1 E9 AA   1E 8B E7 F7 32 7C 54 30  ..TT........2.T0
0340: A6 D4 FE CE 39 66 F4 48   39 16 7D 8E 08 DB 3E 24  ....9f.H9.....>$
0350: F7 FD 34 76 94 6D 37 BE   EF 53 BA 89 4D           ..4v.m7..S..M
[Raw read]: length = 5
0000: 16 03 01 01 06                                     .....
[Raw read]: length = 262
0000: 10 00 01 02 01 00 68 11   0C CB 8C 6D 92 37 18 B5  ......h....m.7..
0010: 4E FD 0E 78 75 8F D1 DB   66 0F EA BB D5 72 D0 3A  N..xu...f....r.:
0020: 1F 90 F3 43 59 6D 4B 41   12 ED 79 48 89 FF 76 59  ...CYmKA..yH..vY
0030: DF 37 0B 0D 9A AA 22 A6   CB EF 60 4E D3 39 39 81  .7...."...`N.99.
00E0: EC 82 8D 45 BA 4A 50 2D   6D D6 20 70 85 11 35 4A  ...E.JP-m. p..5J
00F0: 25 34 00 57 44 34 36 AE   3F 52 A9 8A 16 A1 B2 5A  %4.WD46.?R.....Z
0100: 5A 96 A9 F2 5D E4                                  Z...].
main, READ: TLSv1 Handshake, length = 262
*** ClientKeyExchange, RSA PreMasterSecret, TLSv1
SESSION KEYGEN:
PreMaster Secret:
0000: 03 01 D6 F1 4F BA 49 65   65 6E 06 F8 82 06 9C D7  ....O.Ieen......
0010: 4A C2 FA A8 2B 06 79 71   9B 3E CA 4D B7 2D D1 FE  J...+.yq.>.M.-..
0020: 81 50 20 43 B8 37 9D EA   67 F5 76 C3 EC E0 6B 79  .P C.7..g.v...ky
CONNECTION KEYGEN:
Client Nonce:
0000: 50 77 38 3C 36 6C 05 1E   DA AF DA 43 76 EF 65 9B  Pw8<6l.....Cv.e.
0010: 43 C4 5A 05 34 FC 42 B9   4F 54 B0 F9 14 C4 AE AB  C.Z.4.B.OT......
Server Nonce:
0000: 50 77 38 32 AE 00 73 8B   0A 18 41 41 D2 E1 EB F6  Pw82..s...AA....
0010: 49 DE E3 02 F9 6C 8E 77   71 83 4E CA 53 43 AC B5  I....l.wq.N.SC..
Master Secret:
0000: 1C 3A 33 0F 48 F6 EB D8   E4 89 67 06 3E E8 5A AF  .:3.H.....g.>.Z.
0010: 4A E9 18 C9 D2 BA 9B 5E   5F FE D5 A5 3A 84 47 54  J......^_...:.GT
0020: 0F 37 A3 6F A1 E9 F8 E8   F6 48 CD BA 59 60 54 AC  .7.o.....H..Y`T.
Client MAC write Secret:
0000: E7 E3 96 EB A2 8D A7 C0   AE 86 D7 E2 9E 92 F4 C6  ................
Server MAC write Secret:
0000: 01 BE 26 91 6C 97 03 BE   98 22 76 10 92 80 71 F1  ..&.l...."v...q.
Client write key:
0000: EF 91 16 71 44 15 66 AB   ED 8C 0E D8 1E EE DE B9  ...qD.f.........
Server write key:
0000: 7D CD 93 B3 35 53 1D 34   F8 6C 60 6C EC B5 F7 5A  ....5S.4.l`l...Z
... no IV used for this cipher
[read] MD5 and SHA1 hashes:  len = 262
0000: 10 00 01 02 01 00 68 11   0C CB 8C 6D 92 37 18 B5  ......h....m.7..
0010: 4E FD 0E 78 75 8F D1 DB   66 0F EA BB D5 72 D0 3A  N..xu...f....r.:
0020: 1F 90 F3 43 59 6D 4B 41   12 ED 79 48 89 FF 76 59  ...CYmKA..yH..vY
0030: DF 37 0B 0D 9A AA 22 A6   CB EF 60 4E D3 39 39 81  .7...."...`N.99.
00D0: D4 CB 63 98 27 D7 79 28   EE EA F6 83 0E 9A 49 0C  ..c.'.y(......I.
00E0: EC 82 8D 45 BA 4A 50 2D   6D D6 20 70 85 11 35 4A  ...E.JP-m. p..5J
00F0: 25 34 00 57 44 34 36 AE   3F 52 A9 8A 16 A1 B2 5A  %4.WD46.?R.....Z
0100: 5A 96 A9 F2 5D E4                                  Z...].
[Raw read]: length = 5
0000: 16 03 01 01 06                                     .....
[Raw read]: length = 262
0000: 0F 00 01 02 01 00 39 86   C9 39 9F 54 9A AF 49 40  ......9..9.T..I@
0010: B3 EB C4 81 2A 68 FA E8   ED CE 70 AF 1C 57 43 64  ....*h....p..WCd
0020: 5E C5 B7 86 01 0F 17 E1   BA 52 2A 98 63 33 BF E5  ^........R*.c3..
0030: 05 25 B4 68 6B 7E 0E 86   8A E0 21 66 C2 1A 93 E3  .%.hk.....!f....
0040: B7 3C DD B2 44 86 BF 39   54 00 93 55 1D 22 90 74  .<..D..9T..U.".t
00D0: 2D C5 AC C0 73 6B E4 89   01 6E 4E C5 9F 78 EF 8F  -...sk...nN..x..
00E0: 52 4A 7F 8C 47 AC 3A 37   FF FD 67 77 F9 37 F4 B8  RJ..G.:7..gw.7..
00F0: 82 B2 25 3C 8D A7 F2 4F   E2 D6 74 CA 67 9F 07 90  ..%<...O..t.g...
0100: 19 6D 89 2E 90 98                                  .m....
main, READ: TLSv1 Handshake, length = 262
*** CertificateVerify
[read] MD5 and SHA1 hashes:  len = 262
0000: 0F 00 01 02 01 00 39 86   C9 39 9F 54 9A AF 49 40  ......9..9.T..I@
0010: B3 EB C4 81 2A 68 FA E8   ED CE 70 AF 1C 57 43 64  ....*h....p..WCd
0020: 5E C5 B7 86 01 0F 17 E1   BA 52 2A 98 63 33 BF E5  ^........R*.c3..

00A0: 0C E5 B2 29 6D 68 94 FC   8C 06 77 3D B5 F2 1F 60  ...)mh....w=...`
00B0: 49 81 B7 82 D7 39 14 6B   0A 56 B4 A7 1A 18 B5 71  I....9.k.V.....q
00C0: 62 64 F6 C6 6C 9C 13 59   5B 85 7C 88 7E 31 43 E0  bd..l..Y[....1C.
00D0: 2D C5 AC C0 73 6B E4 89   01 6E 4E C5 9F 78 EF 8F  -...sk...nN..x..
00E0: 52 4A 7F 8C 47 AC 3A 37   FF FD 67 77 F9 37 F4 B8  RJ..G.:7..gw.7..
00F0: 82 B2 25 3C 8D A7 F2 4F   E2 D6 74 CA 67 9F 07 90  ..%<...O..t.g...
0100: 19 6D 89 2E 90 98                                  .m....
[Raw read]: length = 5
0000: 14 03 01 00 01                                     .....
[Raw read]: length = 1
0000: 01                                                 .
main, READ: TLSv1 Change Cipher Spec, length = 1
[Raw read]: length = 5
0000: 16 03 01 00 20                                     .... 
[Raw read]: length = 32
0000: 01 98 6F CA DD 51 09 F5   05 94 7F 52 DB 34 BD D8  ..o..Q.....R.4..
0010: 13 5A A5 76 3F D5 92 A8   A8 95 D9 22 99 B5 1E DF  .Z.v?......"....
main, READ: TLSv1 Handshake, length = 32
Padded plaintext after DECRYPTION:  len = 32
0000: 14 00 00 0C D6 D1 12 A7   F8 A4 7A 44 47 9C 47 3E  ..........zDG.G>
0010: BB 4E 1E 95 4E 50 44 B3   39 7E 30 09 77 6A DE 92  .N..NPD.9.0.wj..
*** Finished
verify_data:  { 214, 209, 18, 167, 248, 164, 122, 68, 71, 156, 71, 62 }
***
[read] MD5 and SHA1 hashes:  len = 16
0000: 14 00 00 0C D6 D1 12 A7   F8 A4 7A 44 47 9C 47 3E  ..........zDG.G>
main, WRITE: TLSv1 Change Cipher Spec, length = 1
[Raw write]: length = 6
0000: 14 03 01 00 01 01                                  ......
*** Finished
verify_data:  { 165, 58, 44, 99, 220, 79, 174, 0, 32, 51, 253, 168 }
***
[write] MD5 and SHA1 hashes:  len = 16
0000: 14 00 00 0C A5 3A 2C 63   DC 4F AE 00 20 33 FD A8  .....:,c.O.. 3..
Padded plaintext before ENCRYPTION:  len = 32
0000: 14 00 00 0C A5 3A 2C 63   DC 4F AE 00 20 33 FD A8  .....:,c.O.. 3..
0010: 62 F0 CA 30 9A 85 CC 70   4C C8 06 AB 4E C3 D4 51  b..0...pL...N..Q
main, WRITE: TLSv1 Handshake, length = 32
[Raw write]: length = 37
0000: 16 03 01 00 20 60 0E 0F   7F 02 92 30 80 95 F3 FD  .... `.....0....
0010: C9 64 76 7D 2F 38 08 5F   BF A8 CD 58 DD 67 77 52  .dv./8._...X.gwR
0020: E2 A5 0B 42 36                                     ...B6
%% Cached server session: [Session-1, SSL_RSA_WITH_RC4_128_MD5]
printSocketInfo......
Server socket class: class sun.security.ssl.SSLServerSocketImpl
   Socker address = 0.0.0.0/0.0.0.0
   Socker port = 54012
   Need client authentication = true
   Want client authentication = false
   Use client mode = false
END printSocketInfo......
  Cipher suite used for this session: SSL_RSA_WITH_RC4_128_MD5
  Server -> receiving...
[Raw read]: length = 5
0000: 17 03 01 00 62                                     ....b
[Raw read]: length = 98
0000: E8 15 04 7C 7E 46 D5 57   5C 54 4A 60 56 40 BF B5  .....F.W\TJ`V@..
0010: 09 40 C3 E5 A9 DD DF CA   F7 B3 DE 93 C0 41 7A 84  .@...........Az.
0020: 1C 8E C2 81 98 FA 74 3C   80 13 FD B1 BB 97 B4 02  ......t<........
0030: A9 04 67 92 08 1D F6 24   D1 77 D0 89 D8 92 88 53  ..g....$.w.....S
0040: 33 47 00 DB E7 F8 B1 75   1C EC B8 A5 FA 60 12 2B  3G.....u.....`.+
0050: 7A 6C 88 4C 60 46 E6 89   61 96 53 7E 64 F1 F3 30  zl.L`F..a.S.d..0
0060: A5 B1                                              ..
main, READ: TLSv1 Application Data, length = 98
Padded plaintext after DECRYPTION:  len = 98
0000: 00 50 2A 2A 2A 2A 2A 2A   2A 2A 2A 20 54 68 69 73  .P********* This
0010: 20 6C 69 6E 65 20 69 73   20 73 65 6E 74 20 66 72   line is sent fr
0020: 6F 6D 20 41 6E 64 72 6F   69 64 20 63 6C 69 65 6E  om Android clien
0030: 74 2E 20 48 65 6C 6C 6F   20 73 73 6C 53 65 72 76  t. Hello sslServ
0040: 65 72 53 6F 63 6B 65 74   2A 2A 2A 2A 2A 2A 2A 2A  erSocket********
0050: 2A 2A 03 CE 95 53 B4 97   8D BE 2A 25 DD 52 6B 1F  **...S....*%.Rk.
0060: 19 44                                              .D
Padded plaintext before ENCRYPTION:  len = 88
0000: 00 46 2A 2A 2A 2A 2A 2A   2A 2A 2A 20 54 68 69 73  .F********* This
0010: 20 6C 69 6E 65 20 69 73   20 73 65 6E 74 20 66 72   line is sent fr
0020: 6F 6D 20 50 43 20 63 6C   69 65 6E 74 2E 20 48 65  om PC client. He
0030: 6C 6C 6F 20 53 53 4C 53   6F 63 6B 65 74 20 2A 2A  llo SSLSocket **
0040: 2A 2A 2A 2A 2A 2A 2A 2A   7B A6 BC 2F 8B C5 E0 A4  ********.../....
0050: B1 D7 F9 70 DD EF DF 6C                            ...p...l
main, WRITE: TLSv1 Application Data, length = 88
[Raw write]: length = 93
0000: 17 03 01 00 58 BA D5 B5   95 E2 12 7A D8 A7 1A D1  ....X......z....
0010: FD FB C6 01 39 2A AD 69   DE A9 6A AE CB 56 4A EF  ....9*.i..j..VJ.
0020: E1 B8 EF 20 9D E3 CB 95   EF 37 1D 0A 51 78 DA E6  ... .....7..Qx..
0030: 6C 7D 4C BB 70 B3 28 16   E1 44 9D 15 DA B5 C5 B3  l.L.p.(..D......
0040: C1 68 93 57 E8 2E 9A 2D   80 D4 F0 9C 95 CB 8E 32  .h.W...-.......2
0050: 13 9B 99 3B 68 3A 4F E0   E0 2C 8B 97 CD           ...;h:O..,...
********* This line is sent from Android client. Hello sslServerSocket**********
main, called close()
main, called closeInternal(true)
main, SEND TLSv1 ALERT:  warning, description = close_notify
Padded plaintext before ENCRYPTION:  len = 18
0000: 01 00 30 AA AA 69 87 AF   BF AC 5C CD 2D A9 92 29  ..0..i....\.-..)
0010: 00 F4                                              ..
main, WRITE: TLSv1 Alert, length = 18
[Raw write]: length = 23
0000: 15 03 01 00 12 C7 B4 E7   A6 27 7E B6 08 BD AD 54  .........'.....T
0010: AF 9E 1D 48 3B 66 16                               ...H;f.
main, called closeSocket(selfInitiated)
main, called close()
main, called closeInternal(true)
main, called close()
main, called closeInternal(true)
Server ended

***FROM ANDROID CLIENT LOGCAT
10-11 23:21:00.800: I/System.out(25493): Socket class: class org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl
10-11 23:21:00.800: I/System.out(25493):    Remote address = smith.droid-ip.com/82.209.154.27
10-11 23:21:00.800: I/System.out(25493):    Remote port = 54012
10-11 23:21:00.800: I/System.out(25493):    Local socket address = /192.168.1.251:54732
10-11 23:21:00.800: I/System.out(25493):    Local address = /192.168.1.251
10-11 23:21:00.800: I/System.out(25493):    Local port = 54732
10-11 23:21:00.800: I/System.out(25493):    Need client authentication = false
10-11 23:21:01.180: I/System.out(25493): Session class: class org.apache.harmony.xnet.provider.jsse.OpenSSLSessionImpl
10-11 23:21:01.180: I/System.out(25493):    Cipher suite = SSL_RSA_WITH_RC4_128_MD5
10-11 23:21:01.180: I/System.out(25493):    Protocol = TLSv1
10-11 23:21:01.180: I/System.out(25493):    PeerPrincipal = CN=smith.droid-ip.com,O=SMITH,C=SE
10-11 23:21:01.190: I/System.out(25493):    LocalPrincipal = CN=smith.droid-ip.com,O=SMITH,C=SE
10-11 23:21:01.190: I/System.out(25493):   Server -> receiving... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T02:22:02.830

除了查看调试日志，尝试使用 WireShark 或类似工具捕获服务器上的 http 流量。然后，您可以看到 TLS 握手并验证流量确实在线路上加密。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T07:30:16.590

> 密码套件：SSL_RSA_WITH_RC4_128_MD5

这告诉你密码套件。这是一个加密密码套件。

它继续生成预主密钥和连接随机数：这些用于生成会话密钥，因此有一个会话密钥。

它是加密的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T00:46:44.167

如果您查看跟踪，在and`Certificate`之后有一条消息，以及一条消息（后跟一个successful ），表明发生了客户端证书身份验证。`CertificateRequest``ServerHelloDone``CertificateVerify``Finished`

稍后，您会在加密之前/之后获得一段纯文本：

```
Padded plaintext after DECRYPTION:  len = 98
0000: 00 50 2A 2A 2A 2A 2A 2A   2A 2A 2A 20 54 68 69 73  .P********* This
0010: 20 6C 69 6E 65 20 69 73   20 73 65 6E 74 20 66 72   line is sent fr
0020: 6F 6D 20 41 6E 64 72 6F   69 64 20 63 6C 69 65 6E  om Android clien
0030: 74 2E 20 48 65 6C 6C 6F   20 73 73 6C 53 65 72 76  t. Hello sslServ
0040: 65 72 53 6F 63 6B 65 74   2A 2A 2A 2A 2A 2A 2A 2A  erSocket********
0050: 2A 2A 03 CE 95 53 B4 97   8D BE 2A 25 DD 52 6B 1F  **...S....*%.Rk.
0060: 19 44                                              .D
Padded plaintext before ENCRYPTION:  len = 88
0000: 00 46 2A 2A 2A 2A 2A 2A   2A 2A 2A 20 54 68 69 73  .F********* This
0010: 20 6C 69 6E 65 20 69 73   20 73 65 6E 74 20 66 72   line is sent fr
0020: 6F 6D 20 50 43 20 63 6C   69 65 6E 74 2E 20 48 65  om PC client. He
0030: 6C 6C 6F 20 53 53 4C 53   6F 63 6B 65 74 20 2A 2A  llo SSLSocket **
0040: 2A 2A 2A 2A 2A 2A 2A 2A   7B A6 BC 2F 8B C5 E0 A4  ********.../....
0050: B1 D7 F9 70 DD EF DF 6C                            ...p...l 
```

您还使用了支持加密和经过身份验证的密钥交换的密码套件：`SSL_RSA_WITH_RC4_128_MD5`. 话虽如此，基于 MD5 的密码套件可能不是最佳选择。这也是[在 Java 7 的 SunJSSE 提供程序中](http://docs.oracle.com/javase/7/docs/technotes/guides/security/SunProviders.html#SunJSSEProvider)默认启用的密码套件的优先顺序中的最后一个，但它是您的客户端发送的列表中的第一个。您当然可以更改客户端上的密码套件，或者在服务器上禁用它（`setEnabledCipherSuites()`在套接字上使用）。

它似乎在那里正常工作。

奇怪的是，您的客户端和服务器证书似乎都是具有相同名称的不同自签名证书（主题/颁发者 DN: `CN=smith.droid-ip.com, O=SMITH, C=SE`，但不同的密钥和序列号）。

这当然不是好的做法。即使您使用的是自签名证书，也不要让它们使用相同的名称。此外，您应该检查您的客户端是否正确验证了服务器名称：您可以尝试使用 IP 地址连接到服务器（假设证书没有该地址的 IP 地址 SAN），以检查它是否当它应该失败时。

# c++ - 给定 myvector.start() 和 myvector.end() 我想在不复制数据的情况下创建 myvector 的只读子集。这可能吗，怎么做？

> ID：12849386
> 
> 赞同：3
> 
> 时间：2012-10-11T22:13:56.593
> 
> 标签：c++, iterator, containers

**给定 myvector.start() 和 myvector.end() 我想在不复制数据的情况下创建 myvector 的只读子集**。

这可能吗，怎么做？

```
#include <iostream>
#include <vector>

using namespace std;

template <class T> void print_vector(const vector<T> &v) {
    for(size_t i = 0; i < v.size(); ++i) std::cout << v[i] << " ";
    std::cout << std::endl;
}

int main() { 
```

首先，我创建向量。

```
 vector<double> data = {1, 2, 3, 4, 5, 6, 7, 8, 9, 10};
    print_vector(data); // 1 2 3 4 5 6 7 8 9 10 
```

然后我想要一个子集。但我认为这是一个副本。

```
 // Does this make a copy or not? I don't want to make a copy.
    const vector<double> subset1(data.begin() + 3, data.end() - 3);
    print_vector(subset1); // 4 5 6 7 
```

这种方法怎么样？

```
 // Another approach. Questions:
    // - Would something like this be a good alternative if I really don't want a copy?
    // - How would the performance of this be compared to a normal STL container?
    // - Is there an existing implementation of a container that does something like this, maybe a boost class?
    class SubsetType {
    public:
        SubsetType(const vector<double>::iterator &start, const vector<double>::iterator &end) { begin_ = start; end_ = end; }

        vector<double>::iterator begin() { return begin_; }
        vector<double>::iterator end() { return end_; }

        double operator[](vector<double>::size_type i) { return *(begin_ + i); }

        vector<double>::size_type size() { return end_ - begin_; }

    private:
        vector<double>::iterator begin_, end_;
    };

    SubsetType subset2(data.begin() + 3, data.end() - 3);
    for(size_t i = 0; i < subset2.size(); ++i) std::cout << subset2[i] << " ";
    std::cout << std::endl; // 4 5 6 7 
```

或者是声明所有函数的解决方案，例如 f(const vector::iterator &start, const vector::iterator &en)。STL 算法就是这样做的，对吧？（但通用）

出口

```
 std::cout << "Bye!" << std::endl;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T22:21:47.853

只需使用迭代器（适当的 const 迭代器）。

如果您真的对到处传递开始/结束对感到过敏，请考虑使用[Boost.Range](http://www.boost.org/doc/libs/1_36_0/libs/range/doc/range.html)或类似的东西：它可以让您将这`[start,end)`对组合成一个对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T22:19:33.580

如果您不想要副本，请遵循与 std:: 算法库相同的习语并使用开始和结束迭代器。迭代器重量轻，不承担复制操作的成本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T22:21:26.070

在 C++11 中，所有容器都获得`cbegin()`and`cend()`函数，这允许您`const_iterator`甚至从非常量容器创建 s。之后，只需修改您的算法以接受开始和结束迭代器，就完成了。

```
print_range(data.cbegin()+3, data.cend()-3); 
```

如果你被 C++03 卡住了，你可以使用一个光转发函数，将任何对象转换成它的`const`版本：

```
template<class T>
T const& as_const(T const& v){ return v; } 
```

接着：

```
print_range(as_const(data).begin()+3, as_const(data).end()-3); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-11T22:21:49.153

> 或者是声明所有函数的解决方案，例如 f(const vector::iterator &start, const vector::iterator &en)。

是的。

> STL 算法就是这样做的，对吧？（但通用）

是的。一般也这样做。标准库算法是一个很好的建模示例。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-11T22:22:24.363

Boost Range 将接近您的预期。

下面的示例显示了一个示例

*   使用切片适配器创建向量的子范围“视图”（无副本）
*   表明修改原始（基础）矢量元素会导致该*视图中的数据发生变化*
*   用来`make_iterator_range`做大致相同的事情。

请注意，[适配器](http://www.boost.org/doc/libs/1_51_0/libs/range/doc/html/range/reference/adaptors/reference.html)是比简单的迭代器范围更灵活的抽象。

```
#include <boost/range/adaptors.hpp>
#include <boost/range/algorithm.hpp>
#include <vector>

using namespace boost::adaptors;

int main(int argc, const char *argv[])
{
    std::vector<int> v { 0, 1, 2, 3, 4, 5, 6 };

    auto output = std::ostream_iterator<int>(std::cout, ",");

    auto&& slice = v | sliced(2, 5);

    boost::copy(slice, output); 
    std::cout << '\n';

    v[3] += 10;

    boost::copy(slice, output); 
    std::cout << '\n';

    /// Alternative without adaptors:

    auto range = boost::make_iterator_range(v.begin()+3, v.end());

    boost::copy(range, output); 
    std::cout << '\n';
} 
```

[在http://liveworkspace.org/code/5be869c15f534b6161e61c392c181f2d](http://liveworkspace.org/code/5be869c15f534b6161e61c392c181f2d)上现场观看

执行输出：

```
2,3,4,
2,13,4,
13,4,5,6, 
```

# java - 根据标准将对象传播到子类创建后

> ID：12849400
> 
> 赞同：0
> 
> 时间：2012-10-11T22:15:15.453
> 
> 标签：java, design-patterns

我知道工厂方法是一种适合创建对象的设计模式，而客户端不需要知道对象需要是哪个具体类。但这假设工厂在创建对象之前就知道标准

但是，我的情况有点不同。我需要在超类中创建一个对象，或者通常是一个抽象类。一旦对象被构造（并且仅在那时），就可以应用逻辑来确定它可以属于哪个类别，即子类。

想象一下，您是一家从大学招聘人才的大公司。孩子们真的不知道他们想做什么，你会在训练后给他们分配位置。所以起初某人是一个`Employee`，然后六个月后他们演变成一个`Programmer`，等等`QA`，`Analyst`这取决于他们的倾向。所以我需要`Employee`在创建后将类传播到`Programmer`,`QA`等`Analyst`。然后每个都会继续存在，`Employee`但每个都会有自己独特的属性。启动时，它们都是公正`Employee`的，因此 Employee 不能是抽象的。

我想有一个返回子类的子类创建方法，但这意味着有两个实例，初始超类，最后是我想要的子类，此时我不再需要超类。我知道一旦创建了子类，我就可以将父对象设置为 null 和 GC，但我想知道是否有更优雅的方法来做到这一点，即设计模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T22:17:48.327

> 一旦对象被构造（并且仅在那时），就可以应用逻辑来确定它可以属于哪个类别，即子类。

这根本不会发生。与您的类比不同，Java 中的对象在其生命周期内从不改变类型。

如果你能具体解释你*为什么*认为你需要这个，我们可能会提供帮助 - 但我怀疑它*要么*归结为组合*，要么*是工厂课程，工厂将从那里开始进行一些处理，并将该处理的结果传递给适当的子类构造函数，以避免必须重新计算数据。

# java - 如何从使用 Maven 的 Eclipse 项目中检索类路径字符串？

> ID：12849404
> 
> 赞同：1
> 
> 时间：2012-10-11T22:15:27.607
> 
> 标签：java, eclipse, eclipse-plugin, classpath, m2e

如何从使用 Maven 的 Eclipse 项目中检索类路径字符串？在 eclipse 中，我通过 Maven 导入了 100 多个 .jar 文件，并引用了一个名为“Maven Dependencies”的库。如何在我的项目中以字符串的形式检索“有效”类路径？

.classpath 文件没有显示这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T01:11:01.850

您可以尝试在 Eclipse 中使用 java 开发工具包 (JDT)。org.eclipse.jdt.core 插件中的 JavaCore 类可以引用您的 java 项目（一个 IProject）并返回一个 IJavaProject，它添加了了解有关类路径的内容的行为。Maven 提供了一个类路径容器，该容器还应该与 IJavaProject 协作，以回复类路径上的实际源文件夹和 jar。无法提供更多信息，但我认为这种方法是您唯一的希望。

除非您编写一个扩展 maven 插件的 eclipse 插件。文档充其量是粗略的，但理论上您可以编写一个扩展，要求调整项目类路径中 maven 容器的内容。如果那时您要将有关容器内容的信息缓存到插件的状态文件夹中，那么当用户希望您调用脚本时，您就可以引用它。每当要求 maven 更新项目配置或依赖项时，都会调用此扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T07:51:04.750

我了解您想自己执行该脚本并且安装了 Maven。我想在这种情况下运行应用程序的最简单方法是使用 Maven Exec 插件：

[http://mojo.codehaus.org/exec-maven-plugin/](http://mojo.codehaus.org/exec-maven-plugin/)

（我通常使用 exec:exec 目标在自己的进程中运行应用程序。）

**编辑：**

否则，如果您不想使用 Maven Exec 插件，请查看 Maven 依赖插件以准备类路径：

[http://maven.apache.org/plugins/maven-dependency-plugin/](http://maven.apache.org/plugins/maven-dependency-plugin/)

# css - 引导错误在下拉导航栏菜单上显示胡萝卜

> ID：12849410
> 
> 赞同：1
> 
> 时间：2012-10-11T22:15:58.013
> 
> 标签：css, drop-down-menu, twitter-bootstrap

我有一个导航栏下拉菜单，当突出显示时，会显示一个额外的插入符号。它出现在导航栏中每个突出显示的选项上。

![在此处输入图像描述](../Images/b4ab4bcb67b0b87e40de446b90006203.png)

这是我的代码：

```
<ul class="nav pull-right">
    <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">
            Username
            <i class="caret"></i> 
        </a>
        <ul class="dropdown-menu">
            <li><a href="/user/dashboard"><i class="icon-home"></i> Dashboard</a></li>
            <li><a href="/username"><i class="icon-user"></i> Profile</a></li>
            <li class="divider"></li>
            <li><a href="/logout" data-method="delete" rel="nofollow">Logout</a></li>
        </ul>
    </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T22:24:10.023

试试这个 HTML，对我来说很好（谷歌浏览器）：http: [//jsfiddle.net/CpQVb/](http://jsfiddle.net/CpQVb/)

# telerik - 动态填充 RadGridView

> ID：12849414
> 
> 赞同：0
> 
> 时间：2012-10-11T22:16:22.847
> 
> 标签：telerik, datasource, radgridview

我正在为 WinForms 2011 Q3 使用 RadControls

RadGridView 的数据源是根据用户的输入/选择动态生成的 每次生成数据源时，我都会调用 SetDatasource2KeyValuesGrid() 我希望看到的是生成的列和填充在 gridview 中的值。然而，我看到的是生成的列，但没有填充值，即使 gridview 中的行数与其数据源（keyValuesList）中的项目数匹配，我一定错过了一些简单的东西。请帮忙。谢谢

编辑：我从列表 keyValueList 创建一个 DataTable，然后将其分配给 DataSource，然后它就可以工作了只是想知道是否有更好的方法。谢谢

```
private void CreateTableSetDatasource(List<FeedKeyValueOneSet>) keyValueList)
{
    if(keyValueList==null) return;

    var table = new DataTable();
    table.Columns.Add("Check");
    foreach (var feedKeyValueOneSet in keyValueList)
    {
        var oneset = feedKeyValueOneSet.KeyValueOneSet;               
        foreach (var oneKey in oneset)
        {
            table.Columns.Add(oneKey.key);
        }
        break;
    }

    foreach (var feedKeyValueOneSet in keyValueList)
    {
        var oneset = feedKeyValueOneSet.KeyValueOneSet;
        var numOfCol = oneset.Length + 1;
        var obj = new object[numOfCol];
        obj[0] = "false";
        int idx = 1;
        foreach (var oneKey in oneset)
        {
            obj[idx] = oneKey.value;
            idx++;
        }
        table.Rows.Add(obj);
    }
    radGridKeyValues.DataSource = table;
}

private void SetDatasource2KeyValuesGrid()
{
    if (radGridKeyValues.Columns != null) radGridKeyValues.Columns.Clear();
    radGridKeyValues.AutoGenerateColumns = false;
    radGridKeyValues.EnableFiltering = false;
    radGridKeyValues.ShowFilteringRow = false;
    radGridKeyValues.ShowHeaderCellButtons = false;
    radGridKeyValues.AllowDragToGroup = false;
    radGridKeyValues.AllowAddNewRow = false;
    radGridKeyValues.EnableGrouping = false;

    var keyValueList = (List<FeedKeyValueOneSet>)TimeSeries.FeedValuesCache[m_strFeedName + "_KEYVALUES"];
    if(keyValueList==null) return;

    GridViewDataColumn checkBoxColumn = new GridViewCheckBoxColumn("columnState", "columnState");
    checkBoxColumn.HeaderText = string.Empty;
    if (radGridKeyValues.Columns != null) radGridKeyValues.Columns.Add(checkBoxColumn);

    foreach (var feedKeyValueOneSet in keyValueList)
    {
        var oneset = feedKeyValueOneSet.KeyValueOneSet;
        foreach (var oneKey in oneset)
        {
            var textboxCol = new GridViewTextBoxColumn(oneKey.key, oneKey.key);
            textboxCol.Width = 150;
            textboxCol.ReadOnly = true;
            if (radGridKeyValues.Columns != null) radGridKeyValues.Columns.Add(textboxCol);
        }
        break;
    }

    radGridKeyValues.DataSource = keyValueList;
}

public class FeedKeyValueOneSet
{
    public FeedFieldValues[] KeyValueOneSet;
}

public class FeedFieldValues
{
    public string key { get; set; }
    public string value { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T15:31:53.803

我从列表 keyValueList 创建一个 DataTable，然后将其分配给 DataSource，然后它可以工作，请参阅问题编辑中的代码

# c# - SimpleMembershipProvider WebSecurity.InitializeDatabaseConnection 因空 sql 数据库而失败

> ID：12849415
> 
> 赞同：4
> 
> 时间：2012-10-11T22:16:34.097
> 
> 标签：c#, asp.net, asp.net-membership, asp.net-mvc-4, asp.net-4.5

我刚刚添加了一个 sqlserver 连接字符串。全新的数据库。我在服务器资源管理器上检查了连接是否正常。

```
<add name ="club" connectionString="Data Source=server1;Initial Catalog=temp;Integrated Security=True"/> 
```

然后在**InitializeSimpleMembershipAttribute**中引用如下

```
WebSecurity.InitializeDatabaseConnection("club", "Users", "UserID", "UserName", autoCreateTables: true); 
```

它在 sdf 文件中工作并创建表。但使用 sql server 失败。任何人之前都看到过这个错误并且可以解释发生了什么？

错误 -

不支持关键字：“初始目录”。异常详细信息：System.ArgumentException：不支持关键字：“初始目录”。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-11T22:50:42.677

添加 `providerName="System.Data.SqlClient"`到您的连接字符串。

```
<add name="club" 
  connectionString="Data Source=server1;Initial Catalog=temp;Integrated Security=True"
  providerName="System.Data.SqlClient"/> 
```

# asp.net-mvc - ASP.NET MVC Context.User.Identity.Name == ""

> ID：12849416
> 
> 赞同：0
> 
> 时间：2012-10-11T22:16:44.863
> 
> 标签：asp.net-mvc

我遇到了一个问题，我无法确定 App 1 和 App 2 之间的区别。这两个应用程序都从`Session_Start()`Global.asax 中执行下面完全相同的代码行。一个应用程序正确识别用户`DOMAIN\USER`，另一个应用程序只是返回`''`......

```
UserService.GetUserInfo(Context.User.Identity.Name.ToString()); 
```

这两个应用程序在 Web.config 中都有这个用于使用 Windows 身份验证。

```
<authentication mode="Windows"></authentication> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T10:53:29.243

您可以在本地使用支持 Windows 身份验证的 IIS Express 对其进行测试。因此，在您的 web.config 中，您必须具有以下内容：

```
<authentication mode="Windows" /> 
```

并在项目的属性中配置 IIS Express 以启用 Windows 身份验证：

![在此处输入图像描述](../Images/f30c052ba389f34d3b918598ade9c20d.png)

`Anonymous Authentication`必须设置为`Disabled`并且`Windows Authentication`必须设置为`Enabled`。

# excel - 根据另一个下拉列表中的选择更新下拉列表

> ID：12849419
> 
> 赞同：0
> 
> 时间：2012-10-11T22:16:49.717
> 
> 标签：excel, vba

> **可能重复：**
> [根据另一个选择列表动态更新选择列表](https://stackoverflow.com/questions/12866023/dynamically-updating-select-list-based-on-another-select-list)

我正在努力根据另一个用户的选择来填写下拉列表。在网上找不到任何相关的东西我有一个名为**lookupDept**的工作簿，其中包含下表：

```
A   B
==  ==============================
BS  Business School
CD  Design and Technology
CG  Chemical Engineering
CM  Chemistry
CO  Computer Science
CV  Civil and Building Engineering 
```

其中*列 A*具有定义的名称**deptCode**，*列 B*具有定义的名称**deptName**。我有第二个名为**lookupModule**的工作簿，其中包含下表：

```
A       B                                                   C
======  ==================================================  ==
BSA005  Organisational Behaviour                            BS
BSA007  Skills for Study                                    BS
CGA001  Fluid Mechanics I MEng & BEng Status                CG
CGA002  Stagewise Processes                                 CG
CMA001  Energetics and Rates of Change                      CM
CMA002  Structure and Reactivity in Inorganic Chemistry     CM
COA101  Essential Skills for Computing                      CO
COA107  Logic and Functional Programming                    CO
CVA001  Communication                                       CV
CVA002  Fluid Mechanics                                     CV 
```

我正在尝试更新表单上的**cbo_moduleCode**以选择一个范围，其中**lookupDept中***的 A 列*与**lookupModule中的***C*列匹配。这是我正在使用的代码：

 **因此，如果用户在表单上选择*BS - Business School*（从**lookupDept**工作簿中提取，我希望选中**lookupModule**工作簿的 C 列中包含*BS*的所有字段。这是我目前使用的代码：

 **```
Private Sub UserForm_Initialize()

    Dim c_deptCode As Range
    Dim c_deptName As Range

    Dim deptCodes As Variant
    Dim deptNames As Variant

    Dim ws_dept As Worksheet
    Dim ws_misc As Worksheet
    Set ws_dept = Worksheets("lookupDept")
    Set ws_misc = Worksheets("lookupMisc")

    ' Assign each range to an array containing the values
    deptCodes = Choose(1, ws_dept.Range("deptCode"))
    deptNames = Choose(1, ws_dept.Range("deptName"))

    ' Create deptcode+deptname cbo
    For i = 1 To ws_dept.Range("deptCode").Rows.Count
        CombinedName = deptCodes(i, 1) & " - " & deptNames(i, 1)
        cbo_deptCode.AddItem CombinedName
    Next i

End Sub 
```****

# sql-server - 根据另一个表中的特定行是否存在来选择列

> ID：12849421
> 
> 赞同：1
> 
> 时间：2012-10-11T22:17:03.410
> 
> 标签：sql-server, tsql

问题与此类似[如何编写一个 MySQL 查询，该查询返回一个临时列，其中包含与该行相关的项目是否存在于另一个表中的标志](https://stackoverflow.com/questions/9134558/how-to-write-a-mysql-query-that-returns-a-temporary-column-containing-flags-for)

除了我需要更具体地说明哪些行存在

我有两个表：'competitions' 和 'competition_entries'

比赛：

```
ID    | NAME      | TYPE
--------------------------------
1     | Example   | example type
2     | Another   | example type 
```

参赛作品

```
ID    | USERID    | COMPETITIONID
---------------------------------
1     | 100       | 1
2     | 110       | 1
3     | 110       | 2
4     | 120       | 1 
```

我想选择比赛，但添加一个额外的列，指定用户是否参加了比赛。这是我当前的 SELECT 语句

```
SELECT
    c.[ID],
    c.[NAME],
    c.[TYPE],
    (CASE 
        WHEN e.ID IS NOT NULL AND e.USERID = @userid THEN 1 
        ELSE 0 
        END
    ) AS 'ENTERED'      

FROM competitions AS c
LEFT OUTER JOIN competition_entries AS e
ON e.COMPETITIONID = c.ID 
```

`@userid`我将参数设置为所需的结果集`110`是这个

```
ID    | NAME    | TYPE         | ENTERED
-------------------------------------
1     | Example | example type | 1
2     | Another | example type | 1 
```

但相反，我得到了这个

```
ID    | NAME    | TYPE         | ENTERED
-------------------------------------
1     | Example | example type | 0
1     | Example | example type | 1
1     | Example | example type | 0
2     | Another | example type | 1 
```

因为它正在计算所有用户 ID 的条目

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T22:19:09.153

修复您的查询

```
SELECT
    c.[ID],
    c.[NAME],
    c.[TYPE],
    MAX(CASE 
        WHEN e.ID IS NOT NULL AND e.USERID = @userid THEN 1 
        ELSE 0 
        END
    ) AS 'ENTERED'      
FROM competitions AS c
LEFT OUTER JOIN competition_entries AS e ON e.COMPETITIONID = c.ID
GROUP BY
    c.[ID],
    c.[NAME],
    c.[TYPE] 
```

另一种方法是使用几乎相同的 EXISTS 重写它，但可能更容易理解。
顺便说一句，不推荐在列名上使用单引号。使用方括号。

```
SELECT
    c.[ID],
    c.[NAME],
    c.[TYPE],
    CASE WHEN EXISTS (
        SELECT *
        FROM competition_entries AS e
        WHERE e.COMPETITIONID = c.ID
          AND e.USERID = @userid) THEN 1 ELSE 0 END [ENTERED]
FROM competitions AS c 
```

# node.js - node.js readFile 竞争条件 - 未完全写入磁盘时读取文件

> ID：12849427
> 
> 赞同：1
> 
> 时间：2012-10-11T22:17:20.927
> 
> 标签：node.js

我的 node.js 应用程序每秒运行一个函数来（递归地）读取 .json 文件的目录树。这些文件通过 FTP 从客户端上传到服务器，并放置在运行节点脚本的文件夹中。

我发现（至少我认为正在发生的事情）是该节点在尝试读取它之前没有等待 .json 文件被完全写入，因此，它引发了“输入意外结束”错误. 似乎文件系统需要几秒钟（可能是几毫秒）才能正确写入文件。这也可能与从 FTP 写入的文件有关（可能是开销，我在这里完全猜测......）

有没有办法让我们在尝试使用节点读取文件之前等待文件完全写入文件系统？

```
fs.readFile(file, 'utf8', function(err, data) {
    var json = JSON.parse(data); // throws error
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T23:13:17.817

您可以通过以下方式检查文件是否仍在增长：

[https://github.com/felixge/node-growth-file](https://github.com/felixge/node-growing-file)

# jquery - 如何在 Confluence 中使用 jQuery UI？

> ID：12849428
> 
> 赞同：0
> 
> 时间：2012-10-11T22:17:21.460
> 
> 标签：jquery, jquery-ui, confluence

我目前在 Confluence HTML 宏中使用 jQuery 来显示对话框。

```
<input type="text" id="shortName" style="height: 18px; width: 50px;">
<input type="submit" id="submit" value="calendar">
<script type="text/javascript">
jQuery(document).ready(function() {
  jQuery("#calendarDialog").dialog({
    modal: true,
    autoOpen: false,
    height: "600",
    width: "800",
    draggable: true,
    resizeable: true
  });
  jQuery("#submit").click(
    function() {
      var emp = jQuery("#shortName").val().replace('.', '');
      var url = <some-url>;
      var dialogTitle = emp + "'s day calendar";
      jQuery("#calendarDialog").dialog("open");
      jQuery("#calendarDialog").dialog( "option", "title", dialogTitle );
      jQuery("#calendarIFrame").attr("src", url);
      return false;
  });
    jQuery("#shortName").focus();
});
</script>
<div id="calendarDialog" style="overflow: none;"><iframe id="calendarIFrame" width="100%" height="99%" frameBorder="0" title="dialogBox"></iframe></div> 
```

如何在 Confluence 中包含来自 jQuery UI 的内容？如果我在上面的代码中包含 jQuery UI（参考[http://code.jquery.com/ui/1.9.0/jquery-ui.js](http://code.jquery.com/ui/1.9.0/jquery-ui.js)）它会破坏宏中的 jQuery 代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-25T15:01:22.390

在 atlassian-plugin.xml 中：

```
<web-resource name="Resources" key="A-NAME-FOR-a-resource-key">
    <dependency>com.atlassian.auiplugin:ajs</dependency>
    <resource type="download" name="jquery-ui.js" location="js/jquery-ui.js"/>
    <resource type="download" name="jquery-ui.css" location="css/jquery-ui.css"/>
</web-resource> 
```

在 file_name.vm 中：

```
$webResourceManager.requireResource("A-NAME-FOR-a-resource-key") 
```

文件 jquery-ui.js 和 jquery-ui.css 应该存储在资源文件夹下

# android - 为什么我的应用没有在 Google Play 上显示？刚刚发布

> ID：12849429
> 
> 赞同：5
> 
> 时间：2012-10-11T22:17:29.963
> 
> 标签：android, xml, google-play, publish

我只是第一次尝试发布我的应用程序-

我完成了开发者控制台上的步骤，它现在显示“已发布”并带有绿色复选标记（在我点击“激活”和“发布”后，没有错误）

但是，我尝试在手机、平板电脑和 chrome 浏览器上按名称搜索 Google Play 商店（称为“Urbanary Challenge”），但没有显示任何内容。（与公司名称搜索相同）。

然后，我通过直接 URL 尝试：

[https://play.google.com/store/apps/details?id=com.sameless.studios.twisted.trivia](https://play.google.com/store/apps/details?id=com.shameless.studios.twisted.trivia)

并且 id 是我的 AndroidManifest.xml 下的“包名称”，例如：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.shameless.studios.twisted.trivia"
android:versionCode="1"
android:versionName="1.0" > 
```

但是，我收到一条错误消息，提示“我们很抱歉，在此服务器上找不到请求的 URL。”

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-11T22:19:31.240

等一下。我已经看到应用程序需要 27 小时才能进入 Play 商店。（我目前的五个网址大约需要 15-45 分钟，搜索大约需要 2-3 小时。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T22:19:39.497

这不是瞬时的，想象一下您的 APK 文件必须与许多服务器进行处理和同步。有时需要大约 15 分钟。

[]s 内托

# python - 如何在这个 Python Socket 中调用文件名？

> ID：12849437
> 
> 赞同：0
> 
> 时间：2012-10-11T22:18:19.243
> 
> 标签：python, sockets, network-programming

我正在研究基于 Python 套接字的文件传输脚本。服务器可以有 10 个客户端连接到它，都向它发送文件。问题是，它只发送一个名为“libroR.pdf”的文件，如果可能的话，我希望用户能够指定要发送到服务器的自定义文件的名称和位置。如果可能的话，我还希望能够为客户端指定一个自定义主机名来连接。

服务器：

```
import socket
import sys

s = socket.socket()
s.bind(("localhost",9999))
s.listen(10) # Acepta hasta 10 conexiones entrantes.

while True:
    sc, address = s.accept()

    print address
    i=1
    f = open('file_'+ str(i)+".pdf",'wb') #open in binary
    i=i+1
    while (True):       
    # recibimos y escribimos en el fichero
        l = sc.recv(1024)
        while (l):
                f.write(l)
                l = sc.recv(1024)
    f.close()

    sc.close()

s.close() 
```

客户：

```
import socket
import sys

s = socket.socket()
s.connect(("localhost",9999))
f=open ("libroR.pdf", "rb") 
l = f.read(1024)
while (l):
    s.send(l)
    l = f.read(1024)
s.close() 
```

谢谢，肖恩。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T22:32:43.810

尝试这个：

```
import socket
import sys
s = socket.socket()
s.connect((raw_input("Enter a host name"),9999))
f = open(raw_input("Enter the file to send to the server: "), "rb") # On this line, you were getting a file allways named libroR.pdf, but the user can input the file now
l = f.read(1024)
while (l):
    s.send(l)
    l = f.read(1024)
s.close() 
```

# javascript - 滚动时将每个 div 视为“页面”

> ID：12849439
> 
> 赞同：3
> 
> 时间：2012-10-11T22:18:35.077
> 
> 标签：javascript, jquery, events, scroll

我有一个正在构建的页面，我想让它在我滚动（向上或向下）时页面滚动到下一个 div（每个 div 是窗口高度的 100%）。并在那里“固定”，直到您再次滚动。我正在努力完成的一个例子可以在这里看到：

[http://testdays.hondamoto.ch/](http://testdays.hondamoto.ch/)

您会注意到，当您向下滚动时，它会自动将您移动到下一个“div”。

我试过的：

*   使用 jQuery .scroll 事件并结合：

    ```
     function updatePosition() {
          if(canScroll) {
            var pageName;
            canScroll = false;
            var st = $(window).scrollTop();
            if (st > lastScrollTop){
               // downscroll code
               if(pageNumber < 7) {
                   pageNumber++;
               }
               pageName = '#' + getPageToScrollTo().id;
               $('body').animate({ scrollTop: $(pageName).offset().top }, 2000, function() {
                   canScroll = true;
               });
            } else {
              // upscroll code
              if(pageNumber > 0) {
                  pageNumber--;
              }
              pageName = '#' + getPageToScrollTo().id;
              $('body').animate({ scrollTop: $(pageName).offset().top }, 2000, function() {
                   canScroll = true;
                });
            }
            lastScrollTop = st;
          }
        } 
    ```

但是当页面滚动（动画）和用户滚动时，滚动事件被调用。我只需要在用户滚动时调用它。

然后我补充说：

```
var throttled = _.throttle(updatePosition, 3000);

$(document).scroll(throttled); 
```

来自 Underscore.js 库 - 但它仍然做了同样的事情。

最后，我在这里浏览了一下，发现：

[仅在用户滚动时调用 Scroll，而不是在 animate()](https://stackoverflow.com/questions/1659204/call-scroll-only-when-user-scrolls-not-when-animate)

但我无法实施该解决方案。有没有人知道任何库或方法可以使它工作？

编辑：基于基本答案的解决方案：

```
 function nextPage() {
        canScroll = false;
        if(pageNumber < 7) {
            pageNumber++;
        }
        pageName = getPageToScrollTo();
        $('html, body').stop().animate({ scrollTop: $(pageName).offset().top }, 1000, function() {
            canScroll = true;
        });
    }

    function prevPage() {
        canScroll = false;
        if(pageNumber > 0) {
        pageNumber--;
      }
      pageName = getPageToScrollTo();
      $('html, body').stop().animate({ scrollTop: $(pageName).offset().top }, 1000, function() {
         canScroll = true;
      });
    }

    //--Bind mouseWheel
    $(window).on(mousewheelevt, function(event) {
        event.preventDefault();
        if(canScroll){
          if(mousewheelevt == "mousewheel") {
              if (event.originalEvent.wheelDelta >= 0) {
                prevPage();
              } else {
                nextPage();
              }
          } else if(mousewheelevt == "DOMMouseScroll") {
              if (event.originalEvent.detail >= 0) {
                nextPage();
              } else {
                prevPage();
              }
          }
        }
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T22:30:16.670

行...

本田网站的相关代码可以在[http://testdays.hondamoto.ch/js/script_2.js](http://testdays.hondamoto.ch/js/script_2.js)中找到。它似乎正在做一些计算来定位 div 的顶部然后滚动到它。有用于不同类型滚动的处理程序。

具体来说，运动由`function navigation(target)`

关键位在这里...

```
$('html,body').stop().animate({
        scrollTop: $(target).offset().top + newMargin
    }, 1000,'easeInOutExpo',function(){
        //Lots of "page"-specific stuff
    }
}); 
```

有滚动类型的处理程序......

```
$('body').bind('touchstart', function(event) {
    //if(currentNav!=3){
        // jQuery clones events, but only with a limited number of properties for perf reasons. Need the original event to get 'touches'
        var e = event.originalEvent;
        scrollStartPos = e.touches[0].pageY;
    //}
});

//--Bind mouseWheel
$('*').bind('mousewheel', function(event, delta) {
    event.preventDefault();
    //trace('class : '+$(this).attr('class') + '   id : '+$(this).attr('id'));
    if(!busy && !lockScrollModel && !lockScrollMap){
        if(delta<0){
            nextPage();
        }else{
            prevPage();
        }
    }
}); 
```

You'll note that the `navigate()` function sets a `busy` flag which is unset when scrolling completes - which is how it suppresses *all* new scroll events during a scroll. Try changing the direction of scroll while the page is already scrolling and you'll notice user input is being ignored too.

# javascript - 将css类动态添加到行

> ID：12849441
> 
> 赞同：0
> 
> 时间：2012-10-11T22:18:41.740
> 
> 标签：javascript, slickgrid

我正在使用 SlickGrid 并希望将css 类**动态**添加到一行或一行中的单元格。

这种方法将类添加`highlight`到第 0 行的列`Name`中：

```
grid.setCellCssStyles("highlight", {
   0 : {
       Name: "highlight",
       }
 }); 
```

而我想实现将css类设置为另一个变量中定义的行。我尝试了如下所示，但它不起作用：

```
row = 0;
grid.setCellCssStyles("highlight", {
    row : {
        Name: "highlight",
        }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T22:25:10.213

尝试：

```
var row=0;
var obj={};
obj[row]={Name:"highlight"};
grid.setCellCssStyles("highlight",obj); 
```

解释：当 JS 读取“row: ...”作为键值对时，它会在对象上创建一个名为 row 的属性并分配给它，而不是评估变量 row 并将其值用作键。这是由于 JSON 语法，我不知道有什么方法可以规避这个问题。但是，javascript 对象也可以作为关联数组访问，这意味着您可以使用我上面所做的技巧：将 obj 的（行评估）属性设置为您需要的任何值。

# mysql - mysql命令行访问被拒绝错误1045

> ID：12849442
> 
> 赞同：0
> 
> 时间：2012-10-11T22:19:04.063
> 
> 标签：mysql

我正在尝试使用以下命令从命令行访问 mysql：

```
 mysql -u root --password password 
```

但我明白了

> 输入密码：ERROR 1045 (28000): Access denied for user 'root'@'localhost'（使用密码：NO）

为什么说我没有使用密码？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-11T22:21:43.177

我使用以下语法：

```
mysql -h [host] -u [user] -p[password] 
```

`-p`注意和之间没有空格`[password]`

您输入的正确语法是：

```
 mysql -h [host] -u [user] --password=[password] 
```

（查看参考手册……这是 5.5 版的第 4.5.1 节）

如果您在安装 MySQL 的同一台计算机上工作，则可以跳过该`-h [host]`部分，或键入`-h localhost`.

# c - 隐式声明错误，但函数在源文件中声明

> ID：12849453
> 
> 赞同：0
> 
> 时间：2012-10-11T22:19:39.877
> 
> 标签：c, implicit-declaration

我正在尝试构建一个无线驱动程序，该驱动程序最终因隐式声明错误而失败：

```
wl_iw.c: In function 'wl_iw_set_priv':
wl_iw.c:7649:4: error: implicit declaration of function 'wl_iw_set_cscan' [-Werror=implicit-function-declaration] 
```

这是它尝试调用函数的地方：

```
#if defined(CSCAN)

    else if (strnicmp(extra, CSCAN_COMMAND, strlen(CSCAN_COMMAND)) == 0)
        ret = wl_iw_set_cscan(dev, info, (union iwreq_data *)dwrq, extra);
#endif 
```

因此，似乎只有在定义 CSCAN 时才会调用它。好吧，在源文件中，如果声明了 CSCAN 也声明了 wl_iw_set_cscan （*我相信*）。 [这是定义它的地方（github）](https://github.com/gnychis/android-wmon-core/blob/master/compat-wireless-3.6-rc7-1/drivers/net/wireless/bcmdhd/wl_iw.c#L6162)，并且...[如果您向上滚动一点，它似乎只依赖于定义的 CSCAN](https://github.com/gnychis/android-wmon-core/blob/master/compat-wireless-3.6-rc7-1/drivers/net/wireless/bcmdhd/wl_iw.c#L5948)。

CSCAN 是明确定义的，如果我进行详细构建，则会显示：

```
arm-linux-androideabi-gcc *snip* -DCSCAN *snip* -c -o /home/owner/android-wmon/core/compat-wireless-3.6-rc7-1/drivers/net/wireless/bcmdhd/wl_iw.o /home/owner/android-wmon/core/compat-wireless-3.6-rc7-1/drivers/net/wireless/bcmdhd/wl_iw.c 
```

我什至可以通过在 wl_iw.c 的顶部放置一个“#define CSCAN”来加倍确定，它会抱怨它被定义了两次。所以我很肯定 CSCAN 的定义。

如果是这种情况，为什么我会收到隐式定义警告变成错误？由于定义了 CSCAN，因此应定义 wl_iw_set_cscan。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T20:01:05.183

在第 5781 行，还有另一个`#define`是 masking `wl_iw_set_cscan`。

# javascript - 防止页面重新加载asp.net jquery javascript

> ID：12849454
> 
> 赞同：0
> 
> 时间：2012-10-11T22:19:41.737
> 
> 标签：javascript, asp.net, jquery-mobile

我正在尝试使用 asp.net 和 jQuery mobile 做一个登录页面。

当用户点击登录按钮时，我先在 c# 中进行一些处理，然后调用 JavaScript。

问题是当我点击登录按钮时，页面似乎在执行 JavaScript 之前重新加载，我不希望这样。

这是我的代码：

```
<asp:Button name="login" ID="btnLogin" runat="server" Text="Login" OnClick="btnLogin_Click" /> 
```

C＃：

```
protected void btnLogin_Click(object sender, EventArgs e)
{
    if (String.Format("{0}", Request.Form["username"]) != "" && String.Format("{0}", Request.Form["password"]) != "")
    {

        ClientScript.RegisterStartupScript(GetType(), "key", "login();", true);

    }
    else
    {
        //todo
    }

} 
```

JS/jQuery：

```
<script type="text/javascript">
    function login() {
        jQuery(function () {
            jQuery.ajax({
                beforeSend: function () {
                    $.mobile.loading('show', {
                        text: 'Processing...',
                        textVisible: true,
                        theme: 'a'
                    });
                }, 
                type: "GET",
                url: "Handler.ashx",
                data: "method=validate",
                success: function (data) {

                    $.mobile.loading('hide');
                    //$.mobile.changePage("HomePage.aspx", { transition: "fade" });

                }
            });
        });
    };
</script> 
```

任何想法？

谢谢！

编辑：我仍然需要服务器端代码来处理 C# 中的密码加密

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T22:28:21.037

The `OnClick` event is a server-side event. That is why it is posting back. You want to use the `OnClientClick` event. This is for client-side code to run before the `OnClick` event is invoked.

That said, what server-side code do you need to run before calling the javascript? What exactly are you trying to do?

Please explain the process flow in more detail.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T22:30:46.883

这将允许您在客户端处理单击事件。`evt.preventDefault`将确保该按钮不会回发到服务器。

```
$('#btnLogin').click(function(evt) {

    if(!myCondition) {
        evt.preventDefault();
    }
    else{
    }
}); 
```

# sql - SQL - 表1中的两列与表2中的一列的内部连接？

> ID：12849456
> 
> 赞同：3
> 
> 时间：2012-10-11T22:20:15.260
> 
> 标签：sql, inner-join

我有一个表，它有两列，每列都包含一个成员 ID，该成员 ID 是包含其名称的成员表的外键。我想选择第一个带有名称而不是成员 ID 的表。我不确定这样做的方法。我觉得肯定有一种涉及 INNER JOIN 的方法，但我想不出如何在一个 INNER JOIN 中从一个表中选择两个名称。有任何想法吗？

提前致谢！

匹配表

```
|------|-------|
| user | match |
|------|-------|
| 1    | 4     |
| 2    | 1     |
| 3    | 2     |
|------|-------| 
```

成员表

```
|------|-------|
| user | name  |
|------|-------|
| 1    | Joe   |
| 2    | Kyle  |
| 3    | John  |
| 4    | Nate  |
|------|-------| 
```

期望的输出

```
|------|-------|
| user | match |
|------|-------|
| Joe  | Nate  |
| Kyle | Joe   |
| John | Kyle  |
|------|-------| 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T22:22:33.303

您应该加入会员表两次。

```
SELECT M1.NAME , M2.NAME
FROM MEMBERS M1
INNER JOIN MATCH M
   ON M1.USER = M.USER
INNER JOIN MEMBERS M2
   ON M2.USER = M.MATCH 
```

如果您的数据库是 mysql，请注意低位和高位标识符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T22:43:33.267

您也可以使用外部应用执行此操作：[http ://sqlfiddle.com/#!3/8f932/5](http://sqlfiddle.com/#!3/8f932/5)

```
SELECT me.name as 'User',
  mem.name as 'Match'
FROM Match m
OUTER APPLY(
  SELECT me.name
  FROM Members me
  WHERE me.id = m.match
)mem
LEFT JOIN Members me on me.id = m.id 
```

或：[http ://sqlfiddle.com/#!3/8f932/6](http://sqlfiddle.com/#!3/8f932/6)

```
SELECT me.name as 'User',
  mem.name as 'Match'
FROM Match m
LEFT JOIN Members mem on mem.id = m.match
LEFT JOIN Members me on me.id = m.id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T22:23:50.837

你可以做两个连接：

```
SELECT u1.name, u2.name
FROM members u1
INNER JOIN match m
ON u1.user = m.user
INNER JOIN members u2
ON u2.user = m.match 
```

# php - 什么是正确的 php.ini 路径，我应该在里面放什么？

> ID：12849458
> 
> 赞同：0
> 
> 时间：2012-10-11T22:20:25.543
> 
> 标签：php, macos, installation, php-ini

我刚刚设法使用本指南安装了最新的 php 版本

[*升级 OS X Mountain Lion 上的本机 PHP 安装*（Bruno Skvorc 于 2012 年 8 月）](http://mac.tutsplus.com/tutorials/server/upgrading-the-native-php-installation-on-os-x-mountain-lion/)，现在我想知道是否应该`php.ini`找到该文件。

当我在终端并发出命令时，`php --ini`我得到以下路径：

```
/usr/local/lib 
```

当我在脚本中执行 phpinfo() 时，我得到以下 php.ini 路径：

```
/etc 
```

我应该把文件放在哪里，我`php.ini`应该把什么放在里面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T22:23:47.257

php -ini 显示二进制 .ini 文件的位置（即不通过浏览器调用 PHP） phpinfo() 显示服务器使用的版本的位置（即通过浏览器调用 PHP）

我不知道你想要什么，ini 文件允许你自定义 php 以适应你对 php 的使用。我不知道你想从中得到什么？

# ruby - 鲁比消失了。帮我重新安装ruby-1.9.3-p194

> ID：12849459
> 
> 赞同：3
> 
> 时间：2012-10-11T22:20:26.297
> 
> 标签：ruby

我是 Ruby 和 Ruby on Rails 的新手，目前正在阅读 Michael Hartl 的 Ruby on Rails 教程。或者至少我在尝试加载安装一些开源代码之前让我走上了一段黑暗的旅程。我设法从我的计算机中删除了任何版本的 Ruby，而 RVM 不允许我使用 rvm install 1.9.3（或使用珠宝盒）重新安装它。我还尝试按照我发现无济于事的其他说明卸载 Xcode 并安装 osx-gcc-installer。

添加上下文：运行 ruby​​ -v 使系统挂起。

这是错误：

```
ruby-1.9.3-p194 - #configuring
Error running 'env LDFLAGS=-L/opt/sm/pkg/active/lib CFLAGS=-I/opt/sm/pkg/active/include    CPATH=/opt/sm/pkg/active/include -L/usr/local/rvm/usr/lib ./configure --enable-shared -- disable-install-doc --prefix=/usr/local/rvm/rubies/ruby-1.9.3-p194', please read  /usr/local/rvm/log/ruby-1.9.3-p194/configure.log
There has been an error while running configure. Halting the installation. 
```

这是日志的相关部分：

```
checking build system type... x86_64-apple-darwin12.2.0
checking host system type... x86_64-apple-darwin12.2.0
checking target system type... x86_64-apple-darwin12.2.0
checking whether the C compiler works... no
configure: error: in `/usr/local/rvm/src/ruby-1.9.3-p194':
configure: error: C compiler cannot create executables
See `config.log' for more details 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T01:59:17.073

# 全部重装！！！

这听起来像是一个菜鸟一击奇迹的解决方案。但是相信我，当我说这会节省你的时间

编辑：要做的事情是......

1.  安装自制软件，如果你还没有的话。
2.  内爆 RVM。这将取下所有红宝石并移除 RVM
3.  如果您使用的是 OS X Mountain Lion，请运行`CC=/Developer/usr/bin/gcc`. 这使用了良好的旧 gcc
4.  重新安装 RVM
5.  `rvm install 1.9.3`
6.  享受 （：

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T23:49:12.013

如果您使用的是 Mac OS X，则使用[homebrew](http://mxcl.github.com/homebrew/)获取 Ruby 1.9.3-p194 可能会更容易。

安装 homebrew 的安装应该很简单：

```
$ brew install ruby 
```

还有很多其他资源可供您使用，它们是按版本专门链接的；Lion、Snow Leopard、Leopard 等...在[下载 ruby](http://www.ruby-lang.org/en/downloads/)​​ 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T20:06:09.447

我认为您可以按如下方式进行编辑，它将得到解决

[https://github.com/railsinstaller/railsinstaller-nix/issues/10](https://github.com/railsinstaller/railsinstaller-nix/issues/10)

# c# - MVVM MEF WindowFormHost

> ID：12849465
> 
> 赞同：1
> 
> 时间：2012-10-11T22:21:13.247
> 
> 标签：c#, wpf, mvvm, mef

我目前正在尝试设计一个通过 MEF 导入加载视图模型的应用程序。

到目前为止一切顺利，我从 viewmodel 导航到 viewmodel，通过字典加载了每个 vm 数据模板。

每次导航时，我都会在我的 Shell (MainWindow) 中修改主要 contentPresenter 的内容。

其中一个视图模型允许我为 activeX 控件（例如 acrobat reader）显示 WindowFormHost。由于 WindowFormHost 不允许绑定，所以我在视图模型中创建了 windowFormHost 并将其绑定到视图中的 ContentPresenter。

这就是失败的地方：当返回到相同的视图模型时，视图会再次创建……抛出“元素已经是另一个元素的子元素”。错误。

我怎样才能防止这种情况？重新加载视图时我应该卸载 WindowFormHost 吗？或者我可以保留视图实例，以便每个视图只保留一个实例并让数据绑定更新控件吗？（它看起来更好的内存消耗）。

谢谢你的帮助 ！

[编辑]

加载字典：

```
<DataTemplate x:Shared="False" DataType="{x:Type vm:DAVPDC3DVIAControlViewModel}">
    <vw:MyUserControl />
</DataTemplate> 
```

看法 ：

```
<DockPanel>
    <ContentControl Name="WFH3DVia" Content="{Binding Path=Control3DVIA, Mode=OneWay} </ContentControl>"
    <!--<WindowsFormsHost Name="WFH3DVia"></WindowsFormsHost>-->
</DockPanel> 
```

虚拟机（单例，mef 模块）：

```
[Export(typeof(IDAVPDC3DVIAControl))]
public partial class DAVPDC3DVIAControlViewModel : ViewModelBase, IViewModel, IPartImportsSatisfiedNotification 
```

虚拟机（主窗口）

```
[Export]
public class MainWindowViewModel : ViewModelBase, IPartImportsSatisfiedNotification 
```

// CurrentUC 将主窗口视图绑定到控制器活动视图模型

```
 public IViewModel CurrentUC
    {
        get
        {
            return myAddinManager.CurrentVM;
        }
    } 
```

主视图：

控制器（在事件中显示模块）：

```
 private void ModuleReadyEventAction(string iModuleName)
    {
        if (null != this.Modules && this.Modules.Count() > 0)
        {
            foreach (var item in Modules)
            {
                IBaseModule ibasemodule = item as IBaseModule;
                if (null != ibasemodule)
                {
                    Type tp = ibasemodule.GetType();
                    if (0 == tp.Name.CompareTo(iModuleName))
                    {
                        CurrentVM = ibasemodule.GetViewModel();
                        break;
                    }
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T04:27:35.527

我还在使用 Prism v4 和 MVVM 开发 WPF 中的一个项目（除了我使用的是 Unity）。我还至少需要使用两个控件，它们是必须托管在 WindowsFormsHost 中的 Windows 窗体控件。让我解释一下我对这个过程的想法..

在我看来，您正试图避免 View 代码中的任何代码。这是我能想到的将 WindowsFormsHost 移动到 ViewModel 中的唯一原因。我认为这从根本上来说是错误的做法。WindowsFormsHost 的存在是为了显示图形 Windows 窗体控件。因此，它属于视图！

现在，我了解了 DataBindings 的吸引力。相信我，我希望能够对 WindowForms 控件的许多部分进行 DataBind。当然，要接受 WPF 数据绑定，该属性必须是依赖对象上的依赖属性。最简单的解决方案，也不是不合理的，就是在你的视图后面的代码中简单地添加代码来配置你的窗体控件。将 UI 逻辑添加到 ViewModel 中实际上违反了 MVVM 设计模式，而在后面添加代码则**不然。**（在某些情况下是最好的方法）

我已经看到了试图绕过这个限制的可能的黑客攻击。包括使用注入数据绑定的“代理”，或者可能扩展 WindowsFormsHost 并添加包装特定托管控件属性的 DependencyProperties，或者使用反射编写类并尝试抛出 Windows 窗体绑定。但是，我所看到的任何东西都无法完全解决问题。例如，我的 windows 窗体控件可以包含其他图形组件，这些组件也需要支持绑定。

最简单的方法是简单地将视图与视图代码中的视图模型同步。您的视图模型可以保留打开的文件或文档、文件名、标题等，但将显示和显示相关控件留给视图。

Last, let me comment more directly on your question. I would need to see how you are registering your View and ViewModel with the MEF Container and how you are navigating to understand why you are receiving that error. It would seem to me that either your view or view model is getting created more than once, while the other is not. Are these registered as singleton types? Regardless, I stand by what I said about not including the WindowsFormsHost in your ViewModel.

# javascript - 如何使用 jquery 获取 jqgrid 对象

> ID：12849475
> 
> 赞同：0
> 
> 时间：2012-10-11T22:21:46.693
> 
> 标签：javascript, jquery, html, css, jqgrid

我正在尝试将 JQGrid 对象分配给 var，以便可以像这样调用 .setGridWidth ：

```
var subGridName = 'allDetailsJqGrid_' + idList[i];
var grid = $(subGridName);
grid.setGridWidth(width); 
```

但 subGrid 似乎作为一个普通的 Javascript 对象而不是一个实际的 JQGrid 回来了。如何获得实际的 JQGrid？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T23:16:30.057

我通过在我的 id 末尾添加“_t”来完成这项工作。'_t' 必须是 JQGrid 添加到实际 JQGrid 名称的内容。

```
var subGridName = 'allDetailsJqGrid_' + idList[i] + '_t';
var grid = $('#' + subGridName);
grid.setGridWidth(width); 
```

我当然希望这对某人有所帮助，因为我花了一段时间才弄清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T22:24:27.630

您根本没有将 jqGrid 设置为 jQuery 对象..而是作为一个刺痛..

缺少**$**或**jQuery**以将其转换为 jQuery 对象

尝试

```
var subGrid = $('myJqGrid_' + 999); 
```

# iphone - iOS - 发布到 Facebook……图标是这个吗？

> ID：12849477
> 
> 赞同：1
> 
> 时间：2012-10-11T22:21:56.903
> 
> 标签：iphone, ios, facebook, ipad, twitter

我正在使用 iOS 6 的社交 API 发布到 Facebook。

我正在使用传统的 SLComposeViewController，就像在..

```
 SLComposeViewController *controller = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeFacebook]; 
```

...

在某些时候我会

```
[controller addImage:imageFacebook]; 
```

其中 imageFacebook 是一个 280 像素高的屏幕截图，然后我将其发布到 Facebook。

我的问题是这个。我正在使用 twitter API 遵循类似的方法，但是当那个小窗口显示时，有一个我正在发送的图像的缩略图，由右侧的剪辑持有，但在 facebook 对应项上，我看到了这个类似 safari 的图标。这是正常的吗？如果我在这里看到正在发布的图像的缩影，我会是一个快乐的人，就像我在 twitter API 中看到的那样......

注意：图像已正确发布到 Facebook ......我的问题是发布窗口上的这个图标。

有没有办法改变那个图标？

谢谢

![在此处输入图像描述](../Images/b0471abcd15c9a13f435a06487cbd665.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T04:26:54.323

```
if([SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook]) {

    SLComposeViewController *controller = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeFacebook];

    SLComposeViewControllerCompletionHandler myBlock = ^(SLComposeViewControllerResult result){
        if (result == SLComposeViewControllerResultCancelled) {
            NSLog(@"Cancelled");
        } else {
            NSLog(@"Done");
        }
        [controller dismissViewControllerAnimated:YES completion:Nil];
    };
    controller.completionHandler = myBlock;
    [controller setInitialText:@"Enter Your Text Here:"];
    [controller addURL:[NSURL URLWithString:@"http://www.google.com"]];
    [controller addImage:[UIImage imageNamed:@"image001-794043.jpeg"]];
    [self presentViewController:controller animated:YES completion:Nil];
} else {
    NSLog(@"UnAvailable");
} 
```

# python - py2exe 和 Sympy 的奇怪错误

> ID：12849478
> 
> 赞同：0
> 
> 时间：2012-10-11T22:22:11.660
> 
> 标签：python, error-handling, py2exe, importerror, sympy

好的，我正在使用 SymPy 制作程序。我使用 sympy.Eq、sympy.solve 和 sympy.Symbol。当我编译我的程序并运行使用 sympy.solve、sympy.Eq 和 sympy.Symbol 的命令（它是一个用户界面）时。它在未编译时完美运行，但是当我使用 py2exe （作为捆绑的可执行文件）编译它时，它给出了我的这个错误：

```
Traceback (most recent call last):
  File "RateTime.py", line 46, in <module>
  File "RateTime.py", line 33, in main
  File "RateTime.py", line 4, in get_catch_up_time
  File "sympy\solvers\solvers.pyc", line 883, in solve
  File "sympy\solvers\solvers.pyc", line 316, in check_assumptions
  File "sympy\assumptions\ask.pyc", line 88, in ask
  File "sympy\assumptions\assume.pyc", line 94, in _eval_ask
  File "sympy\assumptions\assume.pyc", line 157, in eval
  File "sympy\utilities\source.pyc", line 26, in get_class
ImportError: No module named handlers 
```

我尝试更改 source.py 中的代码

```
lookup_view = getattr(__import__(mod_name, {}, {}, ['*']), func_name) 
```

至

```
exec "import "+mod_name+" as MODULE"
lookup_view = getattr(MODULE, func_name) 
```

即使项目未编译，它也给了我错误。我假设没有包含 sympy 中的 python 文件，因为它通常不会立即导入。我不得不把它改回来。有没有办法来解决这个问题？我真的需要将我的 python 项目作为可执行文件分发。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T00:29:54.353

我认为 ImportError 确实意味着 py2exe 没有选择 sympy.assumptions.handlers 或其子模块。最简单的解决方法可能是添加

```
import sympy.assumptions.handlers.calculus 
```

就在你导入 sympy 的地方。

除了“微积分”之外，您可能还需要对“order”、“sets”和“ntheory”执行相同的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T02:52:04.940

如果您不介意更改 sympy 代码，我想您可以将这些文件添加到相关`__init__.py`文件中，以便在 sympy 存在时导入它们。

# sql-server - 使用位掩码存储不相关的位列

> ID：12849482
> 
> 赞同：3
> 
> 时间：2012-10-11T22:22:29.667
> 
> 标签：sql-server, database-design

我正在设计一张桌子。有几个相互不相关的位列。

我正在考虑将这些列合并到一个通用的 ATTRIBUTES INT 位掩码列中。

现在，我试图说服自己这是一个坏主意。这似乎是一种反模式。如果我稍后需要另一个位列，这可能会节省我一些时间，但除此之外真的有什么好处吗？

如果我在位掩码上有一个索引，并且我通过 ATTRIBUTES & 128 = 128 进行搜索，那么我怀疑它效率不高。索引将使所有内容按整个值排序，而不是按位排序。所以，我想它实际上只需要扫描整个索引，而不是确切地知道去哪里。

听起来对吗？这是一个可怕的想法吗？

谢谢，泰德兹

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T22:31:16.480

使用位掩码列使

*   代码更难阅读和维护
*   索引使用不可能

它也违反了数据库设计的正常形式。

您也无需购买空间，因为 SQL Server 可以将多个位列压缩为一个字节。

但是，由于位列自然不是很有选择性，因此在这里使用索引也可能没有优势。

总的来说，单个位列的好处明显超过了位掩码列的好处。所以我几乎在所有情况下都会使用一位列。

# ruby-on-rails - 嵌套和非嵌套时从 URL 获取 ID

> ID：12849483
> 
> 赞同：0
> 
> 时间：2012-10-11T22:22:31.993
> 
> 标签：ruby-on-rails, url, parameters, nested

我有一个 Client 模型，并且嵌套在其中，我有一个 Program 模型。前任：

```
localhost:3000/clients/2
localhost:3000/clients/2/programs/5 
```

在我的 ApplicationController 类中，我希望能够在 before_filter 中加载 Client 模型对象。我试着这样做：

```
@user_client = Client.find(params[:client_id]) 
```

这适用于嵌套资源（localhost:3000/clients/2/programs/5），但不适用于客户端领域（localhost:3000/clients/2）。如果我这样做：

```
@user_client = Client.find(params[:id]) 
```

恰恰相反——它适用于客户端领域（localhost:3000/clients/2），但不适用于嵌套资源（localhost:3000/clients/2/programs/5）。

有没有一种对两者都有效的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T23:23:32.750

你能做类似的事情：

```
@user_client = Client.find(params[:client_id] || params[:id]) 
```

因此，如果一个为 nil，则另一个将作为 id 输入。

将它们按此顺序排列意味着如果有`:client_id`.

但危险的项目是链接末尾的 id 被调用`:id`，因此如果您尝试识别记录，可能会出现一些混乱。请保持警惕。

# objective-c - 使用 OCMock 和 MagicalRecord 进行单元测试

> ID：12849488
> 
> 赞同：1
> 
> 时间：2012-10-11T22:23:02.637
> 
> 标签：objective-c, core-data, tdd, ocmock, magicalrecord

虽然我在 SO 中看到过类似的问题，但似乎没有一个答案能解决我的问题。

我有一个由 mogenerator 生成的具有自定义功能的 NSManagedObject 类（不在模型中）：

```
@interface MyManagedClass : _MyManagedClass {
-(NSNumber*)getRandomNumber2;
-(void)function_I_want_to_test;
} 
```

我的 function_I_want_to_test() 取决于 random() 的结果，这是我在测试期间必须控制的。因为我不能模拟 random() 我构建了一个函数包装器，顺便说一下，它不是静态的，因为我在 OCMock 和静态类函数方面遇到了很多问题。

我的单元测试的设置如下：

```
[MagicalRecord setDefaultModelFromClass:[self class]];
[MagicalRecord setupCoreDataStackWithInMemoryStore]; 
```

使用调试器，我可以验证模型是否已正确加载。另外，如果我以非*神奇*的方式进行操作：

```
 NSBundle *b = [NSBundle bundleForClass:[self class]];
    model = [NSManagedObjectModel mergedModelFromBundles:@[b]]; 
```

在此之后，我无法创建任何模拟来存根我的 random() 包装函数

我尝试了一个模拟类

```
id mock = [OCMockObject mockForClass:[MyManagedClass class]];
[[[mock stub] andReturn:@50] getRandomNumber2];
MyManagedClass *my_object = [mock MR_createEntity]; 
```

我尝试过使用部分模拟

```
MyManagedClass *my_object = [MyManagedClass MR_createEntity];
id mock2 = [OCMockObject partialMockForObject:my_object]; 
```

在最后一点之后，仅仅创建一个 mock2 的实例就会破坏 my_object 的动态属性，它变得毫无用处。

我也尝试过使用带有我想要存根的函数的模拟协议，但仍然无济于事。

运行时异常是其他人在对 Core Data 对象进行测试时遇到的正常情况：属性不是可识别的选择器。

然而，对我来说奇怪的是，我不是试图存根任何动态属性，而是一个正常的、编译时已知的函数。因此，对我来说，使用 OCMock 会使我的实例变得无用似乎很奇怪。

理想情况下，我想要使用 OCMock/Mogenerator/Magicalrecord 的东西。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T23:21:42.833

我建议不要尝试模拟托管对象。为了使托管对象工作，有很多运行时的疯狂。这就是为什么我建议使用内存数据库方法进行测试。这将允许您创建实体的空实例，同时让核心数据发生。

由于您可能正在使用单元测试，因此我建议在您认为需要模拟一些数据来重新创建整个堆栈的每个测试用例中，并设置一个具有运行测试所需的状态的新实体。您还可以在内存持久存储中进行测试，与默认堆栈创建方法为您提供的测试分开，并将第二个测试附加到您的默认堆栈。也就是说，创建一个新的内存存储，使用您的假/模拟数据实体对其进行初始化，并将其附加到您的测试数据堆栈。

我希望这个漫无边际的帮助有点，但底线是不要模拟托管对象......真的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T23:38:57.363

你可以通过将你的随机数生成移出核心数据对象并进入一个帮助类来做到这一点：

```
@implementation RandomNumberGenerator

static RandomNumberGenerator *_sharedInstance = nil;

+(RandomNumberGenerator *)sharedInstance {
    if (_sharedInstance == nil) {
        _sharedInstance = [[RandomNumberGenerator alloc] init];
    }    
    return _sharedInstance;
}

+(void)setSharedInstance:(RandomNumberGenerator *)instance {
    [instance retain];
    [_sharedInstance release];
    _sharedInstance = instance;    
}

-(NSNumber *)generateRandomNumber {
    return ...
}

@end 
```

然后在你的测试中：

```
-(void)testSomething {
    id mockGenerator = [OCMockObject mockForClass:[RandomNumberGenerator class]];
    [RandomNumberGenerator setSharedInstance:mockGenerator];
    [[[mockGenerator stub] andReturn:@(4)] generateRandomNumber];

    MyManagedClass *my_object = [MyManagedClass MR_createEntity];

    expect(my_object.someField).to.equal(someValueBasedOnGeneratedRandomNumber);
} 
```

# javascript - 整数、整数 + 点和小数的正则表达式

> ID：12849491
> 
> 赞同：0
> 
> 时间：2012-10-11T22:23:45.420
> 
> 标签：javascript, regex

我已经搜索了 StackOverflow，但找不到关于如何检查计算器应用程序的数字输入正则表达式的答案，该应用程序将使用每个键（jquery 键）检查以下格式：

*   任何整数，如：34534
*   当一个点跟随整数时，当用户要输入一个十进制数时，像这样：**34534。**注意一个点只能输入一次。
*   任何浮点数：34534.093485

我不打算使用逗号分隔数千......但如果有人也可以为此提供正则表达式，我会很高兴。

是否可以只用一个正则表达式检查上述条件？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T22:26:30.957

Is a lone `.` a successful match or not? If it is then use:

```
\d+(\.\d*)?|\.\d* 
```

If not then use:

```
\d+(\.\d*)?|\.\d+ 
```

Rather than incorporating commas into the regexes, I recommend stripping them out first: `str = str.replace(/,/g, '')`. Then check against the regex.

That wouldn't verify that digits are properly grouped into groups of three, but I don't see much value in such a check. If a user types `1,024` and then decides to add a digit (`1,0246`), you probably shouldn't force them to move the comma.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T22:30:12.593

让我们编写您的规范，并以此为基础进行开发。

*   任何整数：`\d+`
*   逗号，可选地后跟一个整数：`\.\d*`

将两者结合起来，使后者成为可选的，你会得到：

```
\d+\.?\d* 
```

至于处理逗号，我宁愿不涉及它，因为它很快就会变得非常难看。如果您仍然关心它们，您应该简单地从输入中删除所有逗号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T22:37:08.590

我将在这里提出一个可能被否决的答案 - 这是一个更好的解决方案：

```
function valid_float (num) {
    var num = (num + '').replace(/,/g, ''), // don't care about commas, this turns `num` into a String
        float_num = parseFloat(num);
    return float_num == num || float_num + '.' == num; // allow for the decimal point, deliberately using == to ignore type as `num` is a String now
} 
```

任何正确完成您的工作的正则表达式都会在它说“可能”之后带有一个大星号，如果它不是正确的，那么它绝对是调试的猪。

当然，这个答案并没有给你最酷的单线，会让你“酷！”，但是在 6 个月的时间里，当你意识到它在某个地方出了问题，或者你想改变它来做一些轻微的事情时不同的是，查看位置和修复将变得容易得多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T22:33:46.150

你可以这样使用：
`[/\d+./]` 我认为这可以用于你的任何查询。无论是 12445 还是 1244\. 还是 12445.43

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-27T17:43:21.617

我`^(\d)+(.(\d)+)+$`用来捕获每个整数并具有无限长度，只要字符串以整数开头和结尾并且每个整数组之间都有点。我正在捕获整数组，以便我可以比较它们。

# cakephp - CakePHP 的尾随星形路由语法似乎使 HTML 助手中的参数加倍

> ID：12849496
> 
> 赞同：0
> 
> 时间：2012-10-11T22:23:50.573
> 
> 标签：cakephp, routing, wildcard

我以前使用过带有贪心星的 CakePHP 的路由功能，允许将 URL 中的所有附加参数推送到请求的控制器。这可以正常工作，并且与 HTML Helper 一样。

参考[CakePHP 的书](http://book.cakephp.org/2.0/en/development/routing.html#connecting-routes)，尾随星形语法（双通配符，**）执行相同的操作，但将每个附加参数组合成一个字符串。当我直接转到使用此方法的 URL 时，这也很有效，但 HTML Helper 似乎将参数加倍，如下所示：

```
Router::connect(
  '/view/**', 
  array('controller' => 'thing', 'action' => 'view')
);

$this->Html->link(
  'title here', 
  array('controller' => 'thing', 'action' => 'view', 'abc', 'def'
)); 
```

[http://website.com/thing/view/abc/defabc/def](http://website.com/thing/view/abc/defabc/def)

而它应该是

[http://website.com/controller/view/abc/def](http://website.com/controller/view/abc/def)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T01:18:18.157

更多的`/**`是用于解析，而不是用于匹配。解析是当您获取 url 的字符串版本并将其转换为 Cake 用来指向资源的数组时，而匹配是获取基于数组的 url 并根据您的路由转换为字符串。

```
Router::connect(
  '/view/**', 
  array('controller' => 'thing', 'action' => 'view')
);
// input
Router::parse('/view/something/here/for/you');
// output
array(
  'controller' => 'thing',
  'action' => 'view',
  'pass' => array('something/here/for/you'),
  'named' => array()
);

// input
Router::url(array(
  'controller' => 'thing',
  'action' => 'view',
  'something',
  'here'
));
// output
/view/something/heresomething/here

// input
Router::url(array(
  'controller' => 'thing',
  'action' => 'view',
  'something/here'
));
// output
/view/something%2Fheresomething%2Fhere 
```

第二个和第三个例子显然是不对的。估计是路由器的BUG 即使它正确构造了 url，也无法解析它，因为它`/**`会变成`something/heresomething/here`单个传递的参数。

作为一种解决方法，您可以排除所有传递的参数并将其添加到您的链接中：

```
$url = Router::url(array('controller' => 'thing', 'action' => 'view'));
$this->Html->link(
  'title here', 
  $url . 'abc/def'
));
// ends up: /view/abc/def 
```

然后`abc/def`将被解析为单个传递的参数。

# c# - 如何运行 wkhtmltoxsharp？

> ID：12849500
> 
> 赞同：1
> 
> 时间：2012-10-11T22:24:16.813
> 
> 标签：c#, wkhtmltopdf

我已将 wkhtmltoxsharp.dll 和 Common.Logging.dll 添加到引用的欲望中。我正在使用以下代码将 html 文件转换为 pdf 文件。

`WkHtmlToPdfConverter converter = new WkHtmlToPdfConverter(); byte[] strHTML = converter.Convert("C:\\test.html"); File.WriteAllBytes("C:\\test.pdf", strHTML); converter.Dispose();`

它所做的只是给我一个内容为“C:\test.html”的pdf文件。

有人可以告诉我我做错了什么吗？任何帮助表示赞赏！

问候， SS

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T12:06:30.307

您将 Convert 函数传递给实际的 html。你想要这样的东西：

```
IHtmlToPdfConverter converter = new MultiplexingConverter();
var bytes = converter.Convert("<html><body><p>blah</p></body></html>");
System.IO.File.WriteAllBytes("C:\\test.pdf", bytes); 
```

# php - 无法安装脚本，脚本错误

> ID：12849502
> 
> 赞同：-3
> 
> 时间：2012-10-11T22:24:37.373
> 
> 标签：php, mysql

我在这里找到的脚本有一些问题：[http](http://www.phpkode.com/source/s/proxier/proxier/Proxier.class.php) : //www.phpkode.com/source/s/proxier/proxier/Proxier.class.php 不能让它工作，我创建了数据库，cron 文件但是运行 cron 后我仍然收到一些错误：

```
Warning: mysql_fetch_row(): supplied argument is not a valid MySQL result resource in /home/.../Proxier.class.php on line 265

Warning: mysql_fetch_row(): supplied argument is not a valid MySQL result resource in /home/.../Proxier.class.php on line 352 
```

我需要一些帮助来了解如何使脚本正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T22:28:59.480

The docs for mysql_query says:

"For SELECT, SHOW, DESCRIBE, EXPLAIN and other statements returning resultset, mysql_query() returns a resource on success, or FALSE on error."

Your error says that the argument is not a resource, which tells me it is returning FALSE due to some error. My guess is the table doesn't exist or there is some typo in the query. Without more information on the database we can't help much more than that.

The docs also say:

"mysql_query() will also fail and return FALSE if the user does not have permission to access the table(s) referenced by the query."

So depending on what user is running the process you may not have permission to access the table.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T22:31:19.837

通过这样做显示错误：

```
// The link you provided: Line - 264
// Modify it to this:
$res = mysql_query("select ...") or die("Error: ". mysql_error()); 
```

这样你就会知道出了什么问题。在我看来，查询只是失败了，因为您的表没有相同的字段。但是让错误告诉你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T22:32:54.113

看起来配置不正确，请确保传递数据库名称、用户、密码和表。

您收到的错误是因为 mysql_query 失败，或者是因为连接失败或表不存在或与它的预期匹配（即列 ip、time_added、active）。

# ios - 如何设置绘制文本的 Arial 字体样式

> ID：12849506
> 
> 赞同：0
> 
> 时间：2012-10-11T22:24:56.613
> 
> 标签：ios

我使用下一个代码来创建 png 文件。我需要用 Arial 24 写一些文字。我该怎么做？我找不到可以设置 Arial 字体样式的位置。

```
UIImage *image = [BSSharedObject getInstance].downloadedImage;
    UILabel *label = [[UILabel alloc]init];
    UIFont *font = [UIFont systemFontOfSize:24.0];

UIGraphicsBeginImageContextWithOptions(CGSizeMake(WIDTH, HEIGHT), NO, 1.0);
[message drawInRect:CGRectMake(INDENT, INDENT, WIDTH - 2 *INDENT ,600) withFont:font lineBreakMode:UILineBreakModeWordWrap alignment:UITextAlignmentLeft];
[image drawInRect:CGRectMake((WIDTH - INDENT - image.size.width), (HEIGHT - INDENT- image.size.height), image.size.width, image.size.height)];
UIImage *resultImage  = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

[BSSharedObject getInstance].createdImage = resultImage;

UIImage *im =  [BSSharedObject getInstance].createdImage;
return resultImage; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T22:35:42.580

`[UIFont fontWithName:@"Arial" size:24]`

这将为您提供所需的字体。可预测地调用`systemFontOfSize`会导致*系统*字体的返回 - 在 iOS 的情况下，您会得到`Helvetica Neue`。

# c - Visual Studio 2010 中的函数信息

> ID：12849511
> 
> 赞同：0
> 
> 时间：2012-10-11T22:25:20.403
> 
> 标签：c, visual-studio-2010

我想知道是否有办法在 Visual Studio 中查看 ANSI C 函数信息。我正在使用 C，我不喜欢去外部网站查看函数的返回值或它的作用。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T22:27:22.847

I'm using VS 2012 so I'm not sure if it works in 2010 but if you put your cursor on the function and hit the F12 key it takes you to the declaration of the function or method which shows the return value, arguments and a description.

# ruby-on-rails - 使用非标准 ASCII 字符进行 Solr 搜索

> ID：12849512
> 
> 赞同：0
> 
> 时间：2012-10-11T22:25:23.537
> 
> 标签：ruby-on-rails, search, solr, sunspot

索引以下字符串的搜索：“Ordoñez”为：

```
text :lastname 
```

然后搜索为：

```
User.solr_search do 
  keywords 'Ordonez'
end 
```

将返回 0 个结果。

如何索引字符串：Ordoñez 使用 solr 并在执行搜索时获得匹配

`keywords 'Ordonez'`或者`keywords 'Ordoñez'`

我在索引时尝试了[ASCIIFoldingFilter](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.ASCIIFoldingFilterFactory)但这并没有完成这项工作。

[这](https://gist.github.com/097d61cf92627d0c9a83)是我为使这项工作所做的工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T21:47:25.087

我的问题是这 3 个字段恰好未被使用。

```
<field name="firstname_text" type="textgen" stored="false" multiValued="true" indexed="true"/>
<field name="lastname_text"  type="textgen" stored="false" multiValued="true" indexed="true"/>
<field name="specialty_text" type="textgen" stored="false" multiValued="true" indexed="true"/> 
```

不太清楚为什么，但一旦删除它们，ASCII 过滤器就开始工作了。

ASCIIFoldingFilterFactory 确实可以完成这项工作。

```
<analyzer>
  <tokenizer class="solr.WhitespaceTokenizerFactory"/>
  <filter class="solr.ASCIIFoldingFilterFactory"/>
  <filter class="solr.SynonymFilterFactory"/>
</analyzer> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T06:03:53.670

您可能还需要在 Container 端添加处理。

您可以检查[为什么国际字符不起作用](http://wiki.apache.org/solr/FAQ#Why_don.27t_International_Characters_Work.3F)

# c++ - C++ 链接问题，好像我不能链接到标准 C++ 东西

> ID：12849517
> 
> 赞同：20
> 
> 时间：2012-10-11T22:25:51.773
> 
> 标签：c++, linker, static-linking

我正在尝试使用我自己在 iOS 应用程序中编译的库。该库是 Tesseract OCR 库。似乎编译它（及其依赖项）已经好了。

但是，当我尝试在我的应用项目中链接此库时，应用无法链接。链接错误让我感到惊讶；似乎 Tesseract 的东西在寻找非常标准的 C++ 东西方面存在问题。

任何关于我可能做错的建议都是最有帮助的。

这是我看到的那种链接错误的片段。

```
Undefined symbols for architecture armv7:
"std::string::find_last_of(char const*, unsigned long) const", referenced from:
  tesseract::WordSizeModel::Init(std::string const&, std::string const&) in    libtesseract.a(word_size_model.o)
"std::string::find_first_of(std::string const&, unsigned long) const", referenced from:
  tesseract::CubeUtils::SplitStringUsing(std::string const&, std::string const&, std::vector<std::string, std::allocator<std::string> >*) in libtesseract.a(cube_utils.o)
"std::string::find_first_not_of(std::string const&, unsigned long) const", referenced from:
  tesseract::CubeUtils::SplitStringUsing(std::string const&, std::string const&, std::vector<std::string, std::allocator<std::string> >*) in libtesseract.a(cube_utils.o)
"std::string::data() const", referenced from:
  tesseract::CubeUtils::SplitStringUsing(std::string const&, std::string const&, std::vector<std::string, std::allocator<std::string> >*) in libtesseract.a(cube_utils.o)
"std::string::find(char, unsigned long) const", referenced from:
  tesseract::TessLangModel::IsLeadingPunc(int) in libtesseract.a(tess_lang_model.o) 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-12T03:58:29.933

谢谢大家的回答。我发现了我的特殊问题，所以会在这里分享，以防其他人遇到它。

我的问题是项目构建设置。在“Apple LLVM Compiler 5.0 - Language - C++”下有一个“C++ 标准库”的设置。它的值需要更改为“编译器默认值”。

浪费了几个小时，但问题解决了！

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-12-09T20:37:26.053

我正在使用更新版本的 iOS SDK 并将“构建设置 > Apple LLVM 5.0 - 语言 - C++ > C++ 标准库”设置为“编译器默认值”，但出现 46 个编译错误。

我通过将其设置为“libstdc++（GNU C++ 标准库）”消除了这些错误。

希望这可以帮助任何在使用“编译器默认值”时遇到困难的人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-04T16:25:33.097

不确定这是否对任何人都有帮助，但是当我有一个与其他项目链接的项目时，我遇到了同样的问题，一个项目的 Base SDK 为 5.1，另一个项目的 Base SDK 为 7.0。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T22:53:37.153

也许您没有适用于 armv7 架构的 SDK，因此您可以编译您的代码，但安装在您计算机上的标准 C++ 内容适用于另一种架构（例如 x86），并且您的链接器找不到该架构所需的库

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-11T22:43:30.097

链接错误提示在路径中找不到c++库。如果没有更多信息，我建议检查 c++ 库的路径是否正确。

# kohana - 使用数字参数作为目录名称的 Kohana Route

> ID：12849519
> 
> 赞同：1
> 
> 时间：2012-10-11T22:26:01.447
> 
> 标签：kohana

我尝试使用 Kohana 3.2 设置以下路线：

```
api/<version>(/<controller>(/<action>(/<id>)))(.<format>) 
```

并希望将控制器放在控制器文件夹内的一个目录中，该目录具有`<version>`参数的名称。但是我如何命名这个类以便 Kohana 找到我的控制器？

例如：
我打开 url`api/1.0/hello/say`并想在文件夹中加载控制器，`classes/controller/1.0/hello.php`但按照惯例，我需要将控制器命名为 Controller_1.0_Hello ... 但据我所知，php 不允许在类名上使用数字和点..

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T22:37:33.673

您可以将路由显式映射到您想要的任何控制器/方法。我写了一个可以帮助你的教程： [http ://www.kineticklink.com/kohana-3-routing/](http://www.kineticklink.com/kohana-3-routing/)

基本上，类名中不能有句点，但可以有数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T23:54:20.793

`Routes are used to determine the controller and action for a requested URI`.

*   `directory`是一个文件夹；
*   `controller is a file in`目录`文件夹；
*   `action`是`controller`类的方法（在文件中定义）。

如果要根据路由选择特定文件，唯一的方法是使用`<controller>`而不是`<version>`像：

`api/<controller>(/<version>(/<action>(/<id>)))(.<format>)`;

您可能必须修改 URI 格式。

# asp.net - ASP.NET 中的最大上传大小

> ID：12849520
> 
> 赞同：0
> 
> 时间：2012-10-11T22:26:19.227
> 
> 标签：asp.net, web-config

我知道我可以将以下内容添加到 web.config 文件中：

```
<httpRuntime maxRequestLength="10096" executionTimeout="120"/> 
```

这将增加应用程序的上传限制。问题是 WEB.CONFIG 文件是应用程序的一部分，也是我安装的一部分。我有多个客户，他们想要使用不同的价值观。每次他们安装我的应用程序的新版本时，都会覆盖 Web.config 文件。因此，这将覆盖他们可能对上传大小所做的任何修改。

目前我让我的客户更改 Machine.Config 文件，但这确实不是最好的解决方案，因为他们正在更改整个 IIS 服务器的参数。

我想也许我可以让客户将 App.Config 添加到文件夹中，他们可以在其中设置自己的参数。由于该文件不是我安装的一部分，因此它将保留。

有没有其他人遇到过这个问题，想出了一种解决方法，让客户能够拥有自己的自定义配置文件，当他们安装新版本的应用程序时不会被覆盖？

谢谢，科里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T22:48:38.790

在 web.config 中：

```
<httpRuntime configSource="httpRuntime.config"/> 
```

在 httpRuntime.config 中：

```
<httpRuntime maxRequestLength="10096" executionTimeout="120"/> 
```

[有关说明，请参阅部分元素继承的常规属性](http://msdn.microsoft.com/en-us/library/ms228167%28v=vs.90%29.aspx)和MSDN 上的[SectionInformation.ConfigSource](http://msdn.microsoft.com/en-us/library/system.configuration.sectioninformation.configsource%28v=vs.90%29.aspx)属性中的 configSource 属性。

# java - Could not connect to SMTP host error in my local only

> ID：12849524
> 
> 赞同：0
> 
> 时间：2012-10-11T22:26:33.240
> 
> 标签：java, jakarta-mail

I am getting this error while trying to send mail through java mail. It used to work for me, but recently I switched to jdk7 and glassfish 3.1.2\. I tried to switch it back to jdk6 also but it's not working anymore, here is the error I'm getting:

```
javax.mail.MessagingException: Could not connect to SMTP host: smtp.illumina.com, port: 25;
  nested exception is:
                java.net.SocketException: Permission denied: connect 
```

Telnet and ping to this server is fine. Its working from other systems. Only my local setup is throwing this error.

Any ideas?

# vb.net - VB - How do you remove "empty" items from a generic list?

> ID：12849528
> 
> 赞同：6
> 
> 时间：2012-10-11T22:27:11.103
> 
> 标签：vb.net

I have a VB.NET (2010) project that contains a generic list, and I'm trying to figure out how to remove any "empty" items from the list. When I say "empty", I mean any item that does not contain any actual characters (but it may contain any amount of whitespace, or no whitespace at all).

For example, let's say this is my list...

```
 Dim MyList As New List(Of String)

    MyList.Add("a")
    MyList.Add("")
    MyList.Add("b")
    MyList.Add(" ")
    MyList.Add("c")
    MyList.Add("      ")
    MyList.Add("d") 
```

I need it so that if I did a count on that list, it would return 4 items, instead of 7\. For example...

```
 Dim ListCount As Integer = MyList.Count
    MessageBox.Show(ListCount) ' Should show "4" 
```

It would be nice if there was something like...

```
 MyList.RemoveEmpty 
```

Anyways... I've been searching Google for a solution to this for the past few hours, but haven't been able to turn up anything so far. So... any ideas?

BTW, I'm targeting the .NET 2.0 framework for this project.

Thanks in advance!

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-11T22:35:22.670

您可以使用[`List.RemoveAll`](http://msdn.microsoft.com/en-us/library/vstudio/wdka673a.aspx)

```
MyList.RemoveAll(Function(str) String.IsNullOrWhiteSpace(str)) 
```

如果您至少不使用 .NET 4，则不能使用[`String.IsNullOrWhiteSpace`](http://msdn.microsoft.com/en-us/library/system.string.isnullorwhitespace.aspx). 然后您可以自己实现该方法：

```
Public Shared Function IsNullOrWhiteSpace(value As String) As Boolean
    If value Is Nothing Then
        Return True
    End If
    For i As Integer = 0 To value.Length - 1
        If Not Char.IsWhiteSpace(value(i)) Then
            Return False
        End If
    Next
    Return True
End Function 
```

请注意，[`Char.IsWhiteSpace`](http://msdn.microsoft.com/en-us/library/aa311613%28v=vs.71%29.aspx)自 1.1 以来就存在。

# css - 从静态目录加载 CSS 的 Django 404 错误

> ID：12849532
> 
> 赞同：3
> 
> 时间：2012-10-11T22:27:30.040
> 
> 标签：css, django, static

我从静态目录加载 CSS 时遇到问题：

设置.py

```
MEDIA_ROOT = '/he/sites/video1.hackedexistence.com/htdocs/media/'  
MEDIA_URL = '/media/'  

STATIC_ROOT = '/he/sites/video1.hackedexistence.com/htdocs/static/'  
STATIC_URL = '/static/'  

ADMIN_MEDIA_PREFIX = '/static/admin/'  

STATICFILES_DIRS = () 
```

网址.py

```
from django.conf.urls.defaults import patterns, include, url  
from django.contrib import admin  
admin.autodiscover()

urlpatterns = patterns('',

    url(r'^admin/', include(admin.site.urls)),

    r'^beers/$', 'beer.views.BeersAll'),  
) 
```

base.html 加载正常，css 不会加载

```
<link rel="stylesheet" type="text/css" href="/static/css/video1.css" /> 
```

CSS href链接导致

```
Page not found (404)
    'css/video1.css' could not be found 
```

css 文件的完整路径：

```
/he/sites/video1.hackedexistence.com/htdocs/static/css/video1.css 
```

我正在关注 Hacked Existence 的 youtube django 教程。而且他似乎继续进行此设置没有问题。我该如何纠正这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T02:39:20.397

Hacked Existence 可能将他的 Web 服务器（基于您的最后一个问题的 apache）配置为提供他的静态文件。

user1658078 是正确的，因为您需要以某种方式[提供静态文件](https://docs.djangoproject.com/en/dev/howto/static-files/)，并且在开发环境中您可以使用 django 的内置视图[`django.contrib.staticfiles.views.serve(request, path)`](https://docs.djangoproject.com/en/dev/ref/contrib/staticfiles/#django.contrib.staticfiles.templatetags.staticfiles.django.contrib.staticfiles.views.serve)- 这个视图所做的只是查看设置的路径[`STATICFILES_DIRS`](https://docs.djangoproject.com/en/dev/ref/contrib/staticfiles/#std%3asetting-STATICFILES_DIRS)和`static`每个应用程序内的子目录（例如如果您的项目是我调用`mysite`的，并且它有一个名为 的应用程序`blog`，那么它将查找`mysite/blog/static/`)，并提供与 . 值之后的 URL 部分匹配的任何文件`settings.STATIC_URL`。

最后，值得指出的是，您的设置目前根本不起作用，因为您的 MEDIA_ROOT 和 STATIC_ROOT 目录设置为从 的子目录提供服务`/he/sites/video1.hackedexistence.com/htdocs/`，除非您创建了此目录，否则它根本不起作用。

**要修复静态文件、模板、管理文件和上传的文件，请按照以下说明操作：**

在您`settings.py`的 中，将问题中的行替换为以下内容：

```
import os
PROJECT_DIR = os.path.dirname(__file__)

INSTALLED_APPS = (
    'django.contrib.staticfiles',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.admin',
#    'django.contrib.admindocs',
    'beer',  # note - I'm guessing the name of your application is beer
)

# django.contrib.staticfiles app collects files here when we run the collectstatic command
#  (depending on your web server config, you may want to change this to e.g. '/var/www/static/' when it comes to deployment)
STATIC_ROOT = os.path.join(PROJECT_DIR, 'static-serve').replace('\\', '/')
# this should be prepended to your urls for static resources
STATIC_URL = '/static/'
# you can put static files which apply to your entire project here
STATICFILES_DIRS = (
    os.path.join(PROJECT_DIR, "static").replace('\\', '/'),
)

# the URL to where we have the admin media (static files) from a web browser's perspective (not needed if using Django 1.4 or greater)
ADMIN_MEDIA_PREFIX = STATIC_URL + 'admin/'

# should be different from static files dir - this is where uploaded stuff goes
#  (depending on your web server config, you may want to change this to e.g. '/var/www/media/' when it comes to deployment)
MEDIA_ROOT = os.path.join(PROJECT_DIR, 'media').replace('\\', '/')
# if you need to serve the uploaded stuff again, you need to prefix your urls with this
MEDIA_URL = '/media/'

# you can put templates which apply to your entire project here
TEMPLATE_DIRS = (
    os.path.join(PROJECT_DIR, "templates").replace('\\', '/'),
) 
```

还要确保`DEBUG`设置为`True`.

在您的 django 项目中的 urls.py 中（即*不在*您的应用程序目录中`beer`），在末尾添加以下内容：

```
from django.conf.urls.static import static
from django.contrib.staticfiles.urls import staticfiles_urlpatterns

# serving of uploaded media + static files while debug mode is on
if settings.DEBUG:
    urlpatterns += static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)  # uploaded media
    urlpatterns += staticfiles_urlpatterns()  # files in each app's static/ dir 
```

在 django 项目目录中创建以下目录：

1.  `/media/`- 这是[用户上传文件的](https://docs.djangoproject.com/en/dev/topics/files/)地方（例如通过[FileField](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.FileField)或[ImageField](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.ImageField)）
2.  `/static/`- 这是您可以放置​​适用于整个 django 项目的静态文件的地方（例如，您的整个页面的样式）。例如，使用此配置，如果您尝试访问`video1.css`url 处的 css 文件`static/css/video1.css`，则请确保该文件位于以下路径：`/static/css/video1.css`
3.  `/templates/`- 这是您放置适用于整个 django 项目的模板的地方
4.  `/beer/static/`- 这是您放置仅适用于一个特定站点的静态文件的地方。在这里为文件构建 url 时，您将它们视为在`/static/`目录中，因此只需将值`STATIC_URL`添加到相对文件名中。
5.  `/beer/templates/`- 当您需要开始为您的视图创建模板时，将您的模板放在这里（该[`TEMPLATE_LOADERS`](https://docs.djangoproject.com/en/dev/ref/settings/#template-loaders)设置`django.template.loaders.app_directories.Loader`默认包括，它将在此目录中找到模板）。与应用程序特定的静态目录类似，只需将此目录中的文件视为正常`/templates/`目录中的文件。
6.  `/static-serve/`- 这不会在开发过程中使用（所以现在不要太担心），但是当你最终想要部署你的 django 应用程序时，你运行[./manage.py collectstatic](https://docs.djangoproject.com/en/dev/ref/contrib/staticfiles/#django-admin-collectstatic)，这将导致 django 复制每个文件中的所有文件应用程序目录的`static`目录并将它们放在此处，然后您将 Web 服务器配置为在 url 以`STATIC_URL`(`/static/`在这种情况下) 的值开头时从该目录提供文件。

现在您的静态文件将正确加载，管理员将正确显示，您的用户上传的文件将能够正确提供，并且您的模板将在您需要时正确找到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T22:59:26.137

我相信您需要提供静态文件。Django 文档中描述了如何执行此操作的说明。 [https://docs.djangoproject.com/en/dev/howto/static-files/](https://docs.djangoproject.com/en/dev/howto/static-files/) 请注意开发和部署有不同的说明。

# javascript - Javascript fixed-top navbar only after scrolling

> ID：12849533
> 
> 赞同：4
> 
> 时间：2012-10-11T22:27:43.897
> 
> 标签：javascript, html, css, less

Does anyone know what javascript effects are being used to create the navbar effect on **[lesscss.org](http://lesscss.org/)** where the navbar only becomes fixed to the top after scrolling beyond a certain point. If anyone has actual code examples, or links to tutorials, that'd be appreciated.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T22:40:52.573

这是使用`window.onscroll`事件的 javascript 检查

在顶部附近的 HTML 源代码中：

```
window.onscroll = function () {
    if (!docked && (menu.offsetTop - scrollTop() < 0)) {
      menu.style.top = 0;
      menu.style.position = 'fixed';
      menu.className = 'docked';
      docked = true;
    } else if (docked && scrollTop() <= init) {
      menu.style.position = 'absolute';
      menu.style.top = init + 'px';
      menu.className = menu.className.replace('docked', '');
      docked = false;
    }
}; 
```

# css - CSS在悬停时改变父母的背景？

> ID：12849536
> 
> 赞同：0
> 
> 时间：2012-10-11T22:27:52.850
> 
> 标签：css, background, hover, parent

我有一个下拉菜单，想在悬停子菜单时更改父按钮的背景。任何想法如何实现这一点，使其不仅适用于所有现代浏览器，而且最好也适用于 IE8/IE9？

简单的例子，我想在悬停他的孩子时更改链接“This black”的背景（“当悬停我时”和“和我”）。

纯CSS可以吗？

[http://jsfiddle.net/PExLW/](http://jsfiddle.net/PExLW/)

我正在考虑在悬停某些 li 时添加某些类，但这听起来有点矫枉过正，而且，在悬停时添加类听起来不是一个好主意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T22:31:36.617

当然，只需取出`a`

```
ul li:hover { ... } 
```

[示例 jsfiddle](http://jsfiddle.net/PExLW/1/)（或[全屏](http://jsfiddle.net/PExLW/1/show)）

# javascript - 仅当 ES5 严格中不存在全局变量时，如何定义它？

> ID：12849537
> 
> 赞同：5
> 
> 时间：2012-10-11T22:27:58.633
> 
> 标签：javascript, ecmascript-5

我正在ES5 中编写 ES Harmony `Symbol`/的实现。`Name`我将使用 name ，但我希望浏览器在它已经存在的情况下（在未来`Symbol`的浏览器中）使用任何预先存在的它。`Symbol`我希望我的代码严格符合 ES5 并且可移植到其他项目。

这是在 ES3/ES5 non-strict 中做我想做的事情的一种方法：

```
(function() {

    // If Symbol already exists, we're done.
    if(typeof Symbol != 'undefined') return;

    // This becomes global because it wasn't declared with var
    Symbol = function() {
        // ...
    };

})(); 
```

但是，它不是 ES5 严格兼容的，因为`Symbol`没有明确定义。

实现此目的的其他方法将涉及访问`window`对象 ( `window.Symbol = ...`)，但这也不好，因为我不希望我的代码假定它在浏览器环境中运行。

如何在 ES5 严格中做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T04:03:24.337

其他用户发布的答案将我引向了一个类似的 StackOverflow 问题，该问题为我提供了在 Google 中搜索以找到答案的正确术语。解决方案：

我最终能够使用[此处](https://stackoverflow.com/a/6039163/1662998)描述的[*间接评估*](http://perfectionkills.com/global-eval-what-are-the-options/#indirect_eval_call_theory)来解决这个问题。

根据 ES5 规范，使用上面链接的文章中详细介绍的*间接 eval*会在全局范围内执行代码。我选择采用这种方法，因为它符合 ES5 规范，并且它允许代码从字面上删除到任何地方，*即使在包管理器的另一个函数中*，仍然可以找到全局对象（提供的其他答案无法做到）。

解决方案是这样的：

```
(function() {

    'use strict';

    var _global = (0, eval)('this');

    // If Symbol is already defined, there's nothing to do.
    if(_global.Symbol) return;

    _global.Symbol = function() {
        // ...
    };

})(); 
```

关键是使用间接`eval`来检索全局对象（`this`在间接的上下文中`eval`）。

这应该适用于任何符合 ES5 的东西，包括现代浏览器和非浏览器环境，正如我想要的那样。

谢谢各位的帮助！

`eval`唯一需要注意的是，为了访问全局对象，不得不以这种间接的方式（现在更糟）使用（这已经够糟糕了）似乎有点骇人听闻。`global`访问全局对象的标识符或其他方法是否应该不在规范中？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T22:29:45.437

```
'use strict';

var Symbol = 1; // try to comment this line and run the script again

var Symbol = (function(Symbol) {

    if(typeof Symbol != 'undefined') return Symbol;

    Symbol = function() {
        // ...
    };

    return Symbol;

})(Symbol);

alert(typeof Symbol); 
```

​</p>

[http://jsfiddle.net/f0t0n/yATJW/](http://jsfiddle.net/f0t0n/yATJW/)

```
'use strict';

(function(g) { // g is a global context (this passed)

    if(typeof g.Array != 'undefined') {
        return;
    }

    g.Array = function() {
        // ...
    };

    g.Array.prototype.foo = function() {
        console.log('bar');
    };
})(this);

console.log(this.Array);​ 
```

[http://jsfiddle.net/f0t0n/prwaP/](http://jsfiddle.net/f0t0n/prwaP/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T22:32:55.137

为什么它需要在匿名函数中？

```
// assuming global context
if (typeof this.Symbol === 'undefined') {
    this.Symbol = function () {
        // ...
    };
} 
```

或在函数中，`this`按[此处所述传递](https://stackoverflow.com/a/7290187/1615483)

```
(function (t) {
    if (typeof t.Symbol === 'undefined') {
        t.Symbol = function () {
            // ...
        };
    }
})(this); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-11T22:33:40.063

您如何传递您希望将 Symbol 添加到的全局范围？

```
(function(global){
 if(typeof global.Symbol != 'undefined') return;

    // This becomes global because it wasn't declared with var
    global.Symbol = function() {
        // ...
    };

})(window); 
```

这会将其添加到窗口，但可能是其他范围或 var。

# jquery - Add location pin and remove bubble from google maps

> ID：12849538
> 
> 赞同：0
> 
> 时间：2012-10-11T22:28:17.263
> 
> 标签：jquery, google-maps, google-maps-api-3

I was wondering, how is one meant to get the "pin" in the location on google maps, and also remove the speech mark bubble that appears?

I have googled for "search mark" and "dialogue" box but it doesn't come up with anything, so I think I have the wrong name for it.

This is my current Google map (you have to type in a location for the map to show)

[http://jsfiddle.net/2q8Pw/17/](http://jsfiddle.net/2q8Pw/17/)

Is this because I am using the "defaultUI: false option?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T22:38:21.310

现在有 marker.setVisible(false) 并且它应该读取 marker.setVisible(true) 以便标记出现

并摆脱它以使气泡不出现

`infowindow.setContent('<div><strong>' + place.name + '</strong><br>' + address);`

# ios - Creating a variable length 2-D arrays in iOS

> ID：12849544
> 
> 赞同：0
> 
> 时间：2012-10-11T22:28:41.493
> 
> 标签：ios

Normall, a fixed 2-D arrays in XCode would be like this

```
 NSMutableArray * myBig2dArray = [[NSMutableArray alloc] init];

   // first internal array
 NSMutableArray * internalElement = [[[NSMutableArray alloc] init] autorelease];
 [internalElement addObject:@"First - First"];
 [internalElement addObject:@"First - Second"];
 [myBig2dArray addObject:internalElement];

    // second internal array
    internalElement = [[[NSMutableArray alloc] init] autorelease];
    [internalElement addObject:@"Second - First"];
    [internalElement addObject:@"Second - Second"];
    [myBig2dArray addObject:internalElement]; 
```

But How do I create variable length 2D array? I don't the length of each indiviudal array and I don't know how many totoal internal arrays I needed. It's all based on the need

So how do I create that?

Oh one more thing, I need to be able to address individual internal arrays, internal1, internal2, ...etc like that. Because each one holds a set of elements that share certain commonalities. I don't want to pile everything inside the big array.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T22:39:45.907

您已经在创建一个可变长度的二维数组，因为您在整个示例中使用的是 NSMutableArray 而不是 NSArray。

这意味着您可以调用：

*   addObject：将对象附加到数组的末尾。
*   removeObjectAtIndex：从数组中删除。
*   insertObject:atIndex: 在数组的任何位置插入一个项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T02:54:19.087

我相信您在问题中的代码已经是解决方案。您指的是需要解决单个内部数组。这只是：

```
[[myBig2dArray objectAtIndex:1] objectAtIndex:1]; 
```

例如。新的`NSArray`文字语法使*看起来*更像其他语言中的二维数组，例如

```
myBig2dArray[1][1]; 
```

您将遇到的问题是不同的内部数组大小。因此，您将不得不注意对数组索引的范围检查。

另外两个建议 - 我很惊讶我*很少*需要这样做。几乎总是有更好的数据结构方式。其次，如果真的需要多维数组，那么你也许可以下拉到 C 来实现这一点，这取决于你需要在数组中存储什么类型的数据。您可以创建指向 Objective-C 对象的指针的多维 C 数组。只要它们的大小相同，并且您愿意处理`malloc`内存`free`块，就可以使用直接的 C 数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T22:42:15.547

我想你已经回答了你自己的问题。只需创建主要的 NSMutableArray ，然后在需要时添加一个内部的。由于数组是可变的，您可以在主数组或“大”数组的任何索引号处将任何对象添加到任何内部数组。

像这样添加： [[myBig2dArray objectAtIndex:2] addObject:@"someObject"];

像这样删除： [[myBig2dArray objectAtIndex:1] removeObjectAtIndex:0];

你只需要确保主数组的每个对象都是另一个 NSMutableArray

# java - Is this correct (better) object relational mapping?

> ID：12849545
> 
> 赞同：1
> 
> 时间：2012-10-11T22:28:47.233
> 
> 标签：java, hibernate, jpa, persistence

I have really got stuck with using Hibernate in my project. Some issues I have described here: [Hibernate: getting too many rows](https://stackoverflow.com/q/12795921/845220) I have started wondering if my code is correct. I am working on a huge project and I have had to define mapping classes with annotations on my own. But when the problems have began to occur I have decided to recreate part of database separate to the project and try to generate entities in IDE.

I have two tables: `My` and `Option`. `My` has primary key: column `qwerty` and `property`. `Property`is the foreign key from `Option` table. And of course `Option` has `property` as a primary key.

In my solution I have created `@Embeddable` `MyPK` class with two properties: `String qwerty` and `String property`. In my `My` entity I have of course `@EmbeddedId` `MyPK` and also `property` (the same column name as in the `MyPK`) but is this `Option` object, not String as in the `MyPK`.

```
@ManyToOne
@JoinColumn(name = "property", nullable = false, insertable = false, updatable = false)
protected Option option; 
```

This is entity generated by Hibernate Tools in Intellij Idea. There isn't `EmbeddedId`, but there is `@IdClass`. I have thought that `@IdClass` is only for basic types. But I have a object as a part of my primary key. However there is also `OptionEntity` object here. Is this correct to keep basic type and object type for one column?

```
@javax.persistence.IdClass(test.go.MyEntityPK.class)
@javax.persistence.Table(name = "MY", schema = "PUBLIC", catalog = "PUBLIC")
@Entity
public class MyEntity {
    private String qwerty;

    @javax.persistence.Column(name = "QWERTY")
    @Id
    public String getQwerty() {
        return qwerty;
    }

    public void setQwerty(String qwerty) {
        this.qwerty = qwerty;
    }

    private String text;

    @javax.persistence.Column(name = "TEXT")
    @Basic
    public String getText() {
        return text;
    }

    public void setText(String text) {
        this.text = text;
    }

    private String lang;

    @javax.persistence.Column(name = "PROPERTY")
    @Id
    public String getProperty() {
        return property;
    }

    public void setProperty(String property) {
        this.property= property;
    }

    @Override
    public boolean equals(Object o) {
        //equals
    }

    @Override
    public int hashCode() {
        //hashCode
    }

    private OptionEntity optionByProperty;

    @ManyToOne
    @javax.persistence.JoinColumn(name = "PROPERTY", referencedColumnName = "PROPERTY", nullable = false)
    public OptionEntity getOptionByProperty() {
        return optionByProperty;
    }

    public void setOptionByProperty(OptionEntity optionByProperty) {
        this.optionByProperty = optionByProperty;
    }
} 
```

This is `MyEntityPK` generated class:

```
public class MyEntityPK implements Serializable {
    private String qwerty;

    @Id
    @Column(name = "qwerty")
    public String getQwerty() {
        return qwerty;
    }

    public void setQwerty(String qwerty) {
        this.qwerty = qwerty;
    }

    private String property;

    @Id
    @Column(name = "PROPERTY")
    public String getProperty() {
        return property;
    }

    public void setProperty(String property) {
        this.property = property;
    }

    @Override
    public boolean equals(Object o) {
        //equals
    }

    @Override
    public int hashCode() {
        //hashCode
    }
} 
```

`OptionEntity` below. No special points aren't in this entity. I would like only `@Version` annotation on `version` property and also `List<MyEntity>` instead of `Collection<MyEntity>`.

```
@javax.persistence.Table(name = "OPTION", schema = "PUBLIC", catalog = "PUBLIC")
@Entity
public class OptionEntity {
    private Long version;

    @javax.persistence.Column(name = "VERSION")
    @Basic
    public Long getVersion() {
        return version;
    }

    public void setVersion(Long version) {
        this.version = version;
    }

    private String property;

    @javax.persistence.Column(name = "PROPERTY")
    @Id
    public String getProperty() {
        return property;
    }

    public void setProperty(String property) {
        this.property = property;
    }

    @Override
    public boolean equals(Object o) {
        //equals
    }

    @Override
    public int hashCode() {
        //hashcode
    }

    private Collection<MyEntity> myByProperty;

    @OneToMany(mappedBy = "optionByProperty")
    public Collection<MyEntity> getMyByProperty() {
        return myByProperty;
    }

    public void setMyByProperty(Collection<MyEntity> myByProperty) {
        this.myByProperty = myByProperty;
    }
} 
```

What option is the most proper and less problematic? The one that I have described or the one that pasted?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T14:03:59.570

查看使用派生 ID 的 JPA 2.0 示例： [http](http://wiki.eclipse.org/EclipseLink/Examples/JPA/2.0/DerivedIdentifiers) ://wiki.eclipse.org/EclipseLink/Examples/JPA/2.0/DerivedIdentifiers 这似乎是您所追求的。

在 JPA 中，您的 id 不需要 embeddedId，但如果使用复合 PK，您确实需要一个类来保存组成 pk 的多个值。此类的实例被传递给 em.find 方法，它可以是 EmbeddedId 或 PKClass。我更喜欢自己使用 PKClass，但这取决于您 - 使用嵌入式只是将字段放置在可嵌入类中，因此您可以使用嵌入式对象来设置映射并访问值。如果使用 pkClass，则不需要在其中注释的字段/属性，因为它们可以直接在实体中访问和映射。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T12:19:10.330

摆脱财产`private String lang;`/`private String property;`它已经由多面体定义。您也不需要 MyEntity 的主键的类。MyEntity 可以是它自己的具有两个属性的 id 类，也可以是它的`qwerty`key `option`-property，key-manytoone。

# php - How can I implement Method Chaining in PHP 5.x?

> ID：12849547
> 
> 赞同：-1
> 
> 时间：2012-10-11T22:28:50.487
> 
> 标签：php, method-chaining

I have the following class written for PHP 5.4.x. Should this work as I expect?

```
class SqlBuilder {
    private $dbTable;
    private $action;
    private $data;
    private $clause;

    public function toString() {
        // $sql = generate sql string
        // [...]
        return $sql;
    }

    [...]

    public function setClause($clause) {
        $this->clause = $clause;
    }

    public function setDbTable($dbTable) {
        $this->dbTable = $dbTable;
    }   

    public function setAction($action) {
        $this->action = $action;
    }
}   
$sql = (new \dbal\SqlBuilder())
            ->setAction($this->action)
            ->setClause($this->clause)
            ->setDbTable($this->dbTable)
            ->toString(); 
```

I am expecting to be able to access all of my setter methods. Instead I see the following error:

> Fatal error: Call to a member function toString() on a non-object )

This seems to work:

```
$builder= new \dbal\SqlBuilder();
$builder->setAction($this->action)
$builder->setClause($this->clause)
$builder->setDbTable($this->dbTable)
$sql = $builder->toString(); 
```

But I know that this works as well:

```
class Foo
{
    public $a = "I'm a!";
    public $b = "I'm b!";
    public $c;

    public function getB() {
        return $this->b;
    }

    public function setC($c) {
        $this->c = $c;
        return $this;
    }

    public function getC() {
        return $this->c;
    }
}

print (new Foo)
       ->setC($_GET["c"])
       ->getC(); // I'm c! 
```

I've used this style of syntax in Javascript before. Is there a way to make it work in PHP?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T22:45:54.147

您要问的是所谓的方法链接。为了让它按照您想要的方式工作，每个方法调用都需要返回对您正在调用的对象的引用。所以，

```
->setAction($this->action)
// needs to return $this; so that
        ->setClause($this->clause)
// knows what to operate upon and in turn needs to return $this; so that
        ->setDbTable($this->dbTable)
// can do the same 
```

尝试 ：

```
public function setClause($clause) {
    $this->clause = $clause;
    return $this;
}

public function setDbTable($dbTable) {
    $this->dbTable = $dbTable;
    return $this;
}   

public function setAction($action) {
    $this->action = $action;
    return $this;
} 
```

# c# - 如何将 DataTable 分配给 SQLDataSource？

> ID：12849551
> 
> 赞同：0
> 
> 时间：2012-10-11T22:29:05.550
> 
> 标签：c#, asp.net, datatable, sqldatasource

我绑定了我`GridView`的`SQLDataSource`，它工作正常。现在我有一个方法（这个方法来自一个 dll，所以我不能改变它）它返回`DataTable`，我必须将它分配`DataTable`给`SQLDataSource`.

我正在寻找这样的东西

```
SQLDataSource1.DataSource = MyDataTable; 
```

我知道 中没有`DataSource`属性`SQLDataSource`，但我需要类似的功能。

如果我设置`GridView1.DataSource = MyDataTable;`了，那么我会失去 SQLDataSource 的所有功能，比如排序、更新等。

代码示例会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T22:39:04.377

您可以从 SqlDataSource 更改为 ObjectDataSource。这将允许您调用您的方法并仍然进行分页

您可以在[ObjectDataSource](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.objectdatasource.enablepaging.aspx)上阅读更多内容，[在此处阅读更多内容](http://www.codeproject.com/Articles/13963/Implement-Paging-using-ObjectDataSource-with-GridV)

```
<asp:ObjectDataSource 
    SelectCountMethod="GetXXXMethodCount" //a method that return total number of records
    EnablePaging="true" 
    TypeName="YourBLLFullClassName" 
    SelectMethod="GetXXXMethod"
    MaximumRowsParameterName="maxRows"
    StartRowIndexParameterName="startRows"
    ID="ObjectDataSource1" 
    runat="server">
</asp:ObjectDataSource> 
```

# perl - Looking for help to send queries to Postgres from Perl

> ID：12849554
> 
> 赞同：2
> 
> 时间：2012-10-11T22:29:26.230
> 
> 标签：perl

I am trying to write a Perl script to bring up a Postgres client once and send several files through the client, captures the output separately for each file.

If I do something like:

```
system ("cat $query1.sql | psql -p 2070 super &> $HOME/Results1.txt");
system ("cat $query2.sql | psql -p 2070 super &> $HOME/Results2.txt"); 
```

then Perl will start up the client for each query. As I'll be running hundreds and maybe thousands of queries I want to skip the overhead for starting up all but the first client.

I think I should be able to bring up the Postgres client via Open2, but it hangs when I try. I'm doing this on SUSE Linux machine with Perl 5.10.0.

Here's my code:

```
use IPC::Open2;

use IO::Handle;

our $pid = open2(*CHILDOUT, *CHILDINT, '../installdir/bin/psql -p 2070 super');
print STDOUT $pid;

print CHILDINT "cat $dumpR5KScript";
print STDOUT 'Sent the commands';

$output = <CHILDOUT>;

close(CHILDIN);
close(CHILDOUT); 
```

It appears to be hanging with "open2" because I never see the pid.

Can someone point out what I am doing wrong so my call to open2 doesn't hang?

And if anyone has advice on the larger issue of the best way of bringing up a Postgres client and running queries through it I would be grateful.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T08:59:39.410

您已经被告知在您的帖子的评论中使用 DBI，如果您这样做将是一件好事。格式化比摆弄 IPC 和在 Perl 和命令行数据库客户端之间拼接一种 API、解析输出和格式化输入要容易得多*。*

但是，关于您的问题：

1.  它应该`\*CHILDIN`代替`*CHILDIN`（引用 typeglob 而不是 typeglob）

2.  无论如何，在这种情况下，您应该使用变量而不是 typeglobs 和古老的成语：

    ```
    my ( $childout, $childin ) ;
    our $pid = open2( $childout, $childin, '../installdir/bin/psql -p 2070 super');
    print STDOUT $pid; 
    ```

3.  请阅读[IPC::Open2](http://perldoc.perl.org/IPC/Open2.html)的文档。

4.  此外，最好使用[open3](http://perldoc.perl.org/IPC/Open3.html)来处理 STDERR

5.  最后，我不知道 postgress 客户端，但是 open2 出现死锁的可能性（你正在经历）是非常真实的：

> 这整个事件是非常危险的，因为你可能会永远阻止。它假设它将与 bc 之类的东西交谈，既向它写入数据，又从中读取数据。这大概是安全的，因为您“知道”像 bc 这样的命令将一次读取一行并一次输出一行。然而，像 sort 这样的程序首先读取整个输入流，很容易导致死锁。
> 
> 这种方法的最大问题是，如果您无法控制在子进程中运行的源代码，您就无法控制它对管道缓冲的作用。因此，您不能只打开一个到 cat -v 的管道并不断地从中读取和写入一行。
> 
> CPAN 的 IO::Pty 和 Expect 模块可以帮助解决这个问题，因为它们提供了一个真正的 tty（实际上是一个伪 tty），它可以让您再次回到调用命令中的行缓冲。

# java - One or two lines of output?

> ID：12849556
> 
> 赞同：-2
> 
> 时间：2012-10-11T22:29:55.173
> 
> 标签：java, printing, println

Suppose I executed the following Java method:

```
public static void print() {
    System.out.print("This is some text");
    System.out.println();
} 
```

How many lines of output are printed? What counts as a "line of output"? I would think there are two, but I really don't know.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T22:32:07.507

会打印一行输出，因为`System.out.print("This is some text")`不会自动将光标移动到新行，而是`System.out.println()`不带参数只是打印新行，所以整体效果和 一样`System.out.println("This is some text")`，即一行输出。

您可以通过查看该类的[文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/PrintStream.html)来了解更多信息。`PrintStream`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T22:35:24.220

一条线

System.out.print("这是一段文字"); <-- 这是没有换行的输出

System.out.println(); <-- 这将打印一个换行符

您可以将“输出行”定义为任何输出到换行符（包括光标）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T22:45:18.603

```
System.out.print("text") 
```

在同一行打印“文本”，不附加换行符。

```
System.out.println("text") 
```

在一行上打印“文本”，然后添加换行符 (\n)

# go - 来自其他程序的流标准输出，没有 for 循环

> ID：12849559
> 
> 赞同：3
> 
> 时间：2012-10-11T22:30:09.990
> 
> 标签：go

我有一个程序可以编译并运行另一个程序并将标准输出通过管道传输到自身进行打印，因为该程序不会终止，所以我需要将它的标准输出流式传输

```
// boilerplate ommited

func stream(stdoutPipe io.ReadCloser) {
    buffer := make([]byte, 100, 1000)
    for ;; {
        n, err := stdoutPipe.Read(buffer)
        if err == io.EOF {
            stdoutPipe.Close()
            break
        }
        buffer = buffer[0:n]
        os.Stdout.Write(buffer)
    }
}

func main() {
    command := exec.Command("go", "run", "my-program.go")
    stdoutPipe, _ := command.StdoutPipe()

    _ = command.Start()

    go stream(stdoutPipe)

    do_my_own_thing()

    command.Wait()
} 
```

它可以工作，但是我如何在不重复检查 for 循环的情况下做同样的事情，是否有一个库函数可以做同样的事情？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-11T22:47:47.057

您可以将`exec.Cmd`an`io.Writer`用作标准输出。您自己的程序用于 stdout( `os.Stdout`) 的变量也是`io.Writer`.

```
command := exec.Command("go", "run", "my-program.go")
command.Stdout = os.Stdout
command.Start()
command.Wait() 
```

# spring - @autowired 与新密钥？

> ID：12849561
> 
> 赞同：17
> 
> 时间：2012-10-11T22:30:12.787
> 
> 标签：spring

`@Autowired`使用annotation 和`new`key有什么区别？让我们在一个班级里有什么区别：

```
@Autowired private UserDao userdao; 
```

和

```
private UserDao userDao = new UserDaoImpl(); 
```

对性能有影响吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-12T08:12:31.677

除了其他人已经提到的低耦合之外，一个主要的区别是，使用该`new`方法，无论您是否愿意，**每次都会获得一个新对象。**即使`UserDaoImpl`是可重用的、无状态的和线程安全的（DAO 类应该努力做到这一点），您仍然会在每个需要它们的地方创建它们的新实例。

起初这可能不是一个大问题，但考虑到随着对象图的增长——`UserDaoImpl`可能需要一个 Hibernate 会话，它需要一个 DataSource，它需要一个 JDBC 连接——它很快就会变成很多必须创建和初始化的对象一遍又一遍地。当你在你的代码中依赖时`new`，你也在一大堆地方展开初始化逻辑。就像在这个例子中一样，你需要在你的 UserDaoImpl 中有代码来打开一个带有正确参数的 JDBC 连接，但是所有其他的 DAO 类都必须做同样的事情。

这就是控制反转 (IoC) 的用武之地。它旨在通过将对象创建和生命周期与对象绑定和使用解耦来解决这些问题。IoC 最基本的应用是一个简单的工厂类。更复杂的方法是依赖注入，例如 Spring。

**对性能有影响吗？**

是的，但它很可能不会很重要。使用 Springs 依赖注入会在启动时花费更多，因为必须初始化容器并设置所有托管对象。但是，由于您不会创建托管对象的新实例（假设您是这样设计它们的），因此您将从更少的 GC 负载和更少的对象创建中获得一些运行时性能。

但是，您的最大收获将在于应用程序的可维护性和健壮性。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-12T02:08:25.250

上面的评论是正确的，但在这里我要添加一些对你有帮助的例子。

看，我们有 100 个使用`UserDao`类的类，你会得到这样的 dao 实例： `private UserDao userDao = new UserDaoImpl();`在 100 个地方，

几周后需求发生了变化，我们需要使用`LdapUserDao`或类似的东西

```
class LdapUserDao implements UserDao{

} 
```

实现`UserDao`。你做什么工作？你如何处理你的`new`关键词，你将 impl 类绑定到使用中。

如果您在 100 个地方使用 @Autowired 然后从一个地方（如果您使用基于 xml 的配置，那么只需转到 xml 并从 xml 切换到另一个 UserDao，如果注释转到该组件并将 Spring 注释切换到正确的一个）管理它，所以它出现在 100 个地方。这就是所谓的`DI`模式。这是[DI的全部目的](http://en.wikipedia.org/wiki/Dependency_injection)

另一个重要的事情是使用 spring 注释，即使您可以管理对象范围，但是使用 new 关键字没有办法（除非您使用愚蠢的单例或类似的东西），我确信使用 new 关键字您不能拥有

```
 Prototype
  Request
  Single 
```

作用域对象

在性能方面，很难说，除非看你的代码。但我确信在最坏的情况下它们可能具有相同的性能，否则弹簧方式很快，因为据我所知，dao 类应该是单例的，而不是原型，所以整个项目你将以弹簧方式在 userdao 对象上拥有`new`方式，这取决于在哪里您正在失去对 dao 对象的引用。但离开表演。不要考虑性能而不是良好的设计。一直以来，第一次以良好的方式（而不是快速的方式）以良好的设计制作它，然后看看它的性能。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-12-01T07:59:46.077

如果你使用，你会得到 NullPointerException

```
private UserDao userDao = new UserDaoImpl(); 
```

因为它没有设置 *context.xml 中声明的会话引用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-12T01:05:23.257

在运行时，您将在这两种情况下都获得一个`UserDaoImpl`在`userdao`属性中分配的实例。

但是第一种方法意味着使用[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)模式，它比第二种方法有一些优势：

*   您的类现在依赖于一个接口，因此它可以与 UserDao 的任何实现一起使用（可能一个使用 RDBMS，另一个使用 XML 文件作为存储库）
*   由于您现在依赖于接口，因此单元测试和模拟非常简单明了。
*   [低耦合](http://en.wikipedia.org/wiki/Coupling_%28computer_programming%29)是代码中的一个很好的属性。

[所以你应该更喜欢第二种方法而不是第一种，特别是如果你已经在使用 Spring（这就是Inversion-Of-Control](http://en.wikipedia.org/wiki/Inversion_of_control)容器背后的想法）

# mysql - 将 2 个查询合并为一个查询，作为子查询

> ID：12849566
> 
> 赞同：2
> 
> 时间：2012-10-11T22:30:46.607
> 
> 标签：mysql, sql, sql-server-2008-r2

我的第一个查询从 3 个表中提取学生详细信息。学生、学生地址和学生笔记。

我的查询必须列出学生的详细信息，包括 ID、姓名、地址、备注，并找到他们参加课程的最早日期。

我创建了一个聚合查询来执行此操作。

```
SELECT STU_Name, MIN(ENR_StartDate)
FROM Student
INNER JOIN Enrolment
ON Student.STU_Student_ID = Enrolment.ENR_Student_ID
GROUP BY STU_Name 
```

这是我提取学生详细信息的主要查询。

```
SELECT STU_Name, ADD_Addr_Line_1, ADD_Addr_Line_2, ADD_Addr_Line_3, ADD_Postcode, NTE_Note, ENR_StartDate
FROM Student
INNER JOIN StudentAddress
ON Student.STU_Student_ID = StudentAddress.ADD_Student_ID
INNER JOIN StudentNote
ON Student.STU_Student_ID = StudentNote.NTE_Student_ID
INNER JOIN Enrolment
ON Student.STU_Student_ID = Enrolment.ENR_Student_ID 
```

我想链接这些查询，以便结果集告诉我该行中每个学生的最早开始日期。

学生期望的输出

```
row0: student1id, student1name, student1address, student1note1, student1startdate

row1: student1id, student1name, student1address, student1note2, student1startdate 
```

这将允许一个学生有多个笔记，但是对于一个学生来说，开始的开始总是被计算为相同的。

我在 sql fiddle 中构建了一个测试模式。

[http://sqlfiddle.com/#!2/cecea/4](http://sqlfiddle.com/#!2/cecea/4)

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T22:57:53.327

请注意，您没有注意到其中一名学生。这已通过外部连接得到纠正。

在另一种情况下，一个学生有 2 个笔记。所以那个学生在结果中有两行。

要解决这个问题，您需要选择一个特定的注释（第一个、最后一个等）。您可以使用与查找每个学生的第一个注册记录相同的逻辑来执行此操作。

调整以处理学生在同一入学日期可能有不止一排的情况。这种方法可以用来打破大多数这些类型的关系。请注意，窗口函数通常是更好的方法，但 MySQL 不支持它们。

```
SELECT STU_Name
     , ADD_Addr_Line_1
     , ADD_Addr_Line_2
     , ADD_Addr_Line_3
     , ADD_Postcode
     , NTE_Note
     , Enrolment.ENR_StartDate
     , Enrolment.ENR_ID
     , Student.STU_Student_ID
     , StudentAddress.ADD_ID
     , StudentNote.NTE_ID
  FROM Student
  JOIN StudentAddress
    ON Student.STU_Student_ID = StudentAddress.ADD_Student_ID
  LEFT JOIN StudentNote
    ON Student.STU_Student_ID = StudentNote.NTE_Student_ID
  JOIN Enrolment
    ON Student.STU_Student_ID = Enrolment.ENR_Student_ID
  LEFT JOIN Enrolment AS e2
    ON Enrolment.ENR_Student_ID = e2.ENR_Student_ID
   AND (Enrolment.ENR_StartDate, Enrolment.ENR_ID) > (e2.ENR_StartDate, e2.ENR_ID)
 WHERE e2.ENR_StartDate IS NULL
; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T22:36:07.887

您应该为所有列添加表别名以指定它们的来源。

```
SELECT STU_Name, ADD_Addr_Line_1, ADD_Addr_Line_2, ADD_Addr_Line_3, ADD_Postcode, NTE_Note, ENR_StartDate,
    G.EarliestStartDate
FROM Student
JOIN StudentAddress
        ON Student.STU_Student_ID = StudentAddress.ADD_Student_ID
JOIN StudentNote
        ON Student.STU_Student_ID = StudentNote.NTE_Student_ID
JOIN Enrolment
        ON Student.STU_Student_ID = Enrolment.ENR_Student_ID
JOIN (
  SELECT Student.STU_Student_ID, MIN(ENR_StartDate) EarliestStartDate
  FROM Student
  INNER JOIN Enrolment
  ON Student.STU_Student_ID = Enrolment.ENR_Student_ID
  GROUP BY STU_Name
) G on G.STU_Student_ID = Student.STU_Student_ID 
```

# django - 尝试在 django 中保存时找不到页面 404

> ID：12849567
> 
> 赞同：0
> 
> 时间：2012-10-11T22:30:48.123
> 
> 标签：django

任何人都可以帮助我解决我的问题，当尝试保存我的页面时出现错误 404。这是编码

网址.py

```
urlpatterns = patterns('',
(r'^admin/', include(admin.site.urls)),
(r'^$', PatientView.as_view()),
(r'^patientList/$', PatientView.as_view(), name ="forside"),
(r'^rehab_diab/(?P<pk>\d+)/$', RehabDiabetesView.as_view(), name="rehabDiabetes_view"), 
```

视图.py

```
class RehabDiabetesView(UpdateView):
template_name="rehab_diab.html"
model = RehabDiabetes
form_class = RehabDiabetesForm

def get_context_data(self, **kwargs):
    context = super(RehabDiabetesView, self).get_context_data(**kwargs)
    context['pk']=self.kwargs['pk']
    return context

def get_object(self, queryset = None):
    try: 
        obj = RehabDiabetes.objects.get(owner = Patient.objects.get(id = self.kwargs['pk']))
    except: 
        obj = RehabDiabetes.objects.create(owner = Patient.objects.get(id = self.kwargs['pk']))
    return obj

def form_valid(self, form):
    form.save()
    return HttpResponseRedirect(reverse("forside")) 
```

rehab_diab.html

```
<form id="content" action="rehabDiabetes_view pk" method="POST" style="opacity: 1; ">
{% csrf_token %}
<input type="submit" value="Gem" class="ui-button ui-widget ui-state-default ui-corner-all" /> 
```

--------#其余代码..

这是错误

```
Page not found (404)
Request Method: POST
Request URL:    http:xxx.xxx.xxx/rehab_diab/1/rehabDiabetes_view%20pk
Using the URLconf defined in rehab3.urls, Django tried these URL patterns, in this order:
^admin/
^$
^patientList/$ [name='forside']
^rehab_diab/(?P<pk>\d+)/$ [name='rehabDiabetes_view']
The current URL, rehab_diab/1/rehabDiabetes_view pk, didn't match any of these. 
```

缺少的链接是什么？无法弄清楚，因为我是 django 的新手 ..:( 提前谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T22:39:28.790

你的意思是`action="{% url rehabDiabetes_view pk %}"`？

# .net - ASP.net 云服务

> ID：12849569
> 
> 赞同：0
> 
> 时间：2012-10-11T22:31:01.567
> 
> 标签：.net, cloud

我尝试过 Microsoft Azure，他们为 .Net 平台以及其他一些技术（如 node.js、PHP 和 Ruby）提供了最好和最简单的部署工具。

唯一的缺点是试用期，只有90天。我从未转变为付费客户。

我正在寻找像 Google App Engine 这样的东西，只要你从未超过免费配额，它就可以让你免费使用。对于开发者来说，在付款前真正测试平台是非常有用的。

.Net 的其他任何没有特定试用限制的云服务？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T08:34:04.607

[AppHarbor](https://appharbor.com/)有无限的免费计划。（我是联合创始人）

# django-compressor - django-compressor 为何在使用 memcached 时仍会输出文件？

> ID：12849571
> 
> 赞同：2
> 
> 时间：2012-10-11T22:31:08.960
> 
> 标签：django-compressor

即使启用了 Memcached，django-compressor 仍然在 COMPRESS_ROOT 文件夹中输出压缩文件是否正确？

在文档中它说：

> 对于生产站点，强烈建议使用真正的缓存后端（例如 memcached）来加快压缩文件的检查速度。

我在 Django 中的缓存设置正确并且可以正常工作。

```
CACHES = {
    'default': {
        'BACKEND': 'django.core.cache.backends.memcached.PyLibMCCache',
        'LOCATION': '127.0.0.1:11211',
        }
} 
```

我看到的是，启用 memcached 后，如果我删除 STATIC_ROOT 文件夹，django-compressor 将不再重新生成 js/css 文件。还有人看到这种行为吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T01:58:37.100

我遇到了类似的问题。为了解决这个问题，我在我的 django 应用程序中创建了一个小的 django 管理命令来清除我在部署期间运行的 memcache。

我想如果你在很多事情上都依赖于 memcache，你可能想要更细粒度，但对我们来说，把整个缓存都炸掉就可以了。

代码如下：

```
from django.core.cache import cache

from django.core.management.base import BaseCommand, CommandError 
import getpass

class Command(BaseCommand):   help = 'Flush the memcache (or whatever the default caching system is)'

  def handle(self, *args, **options):
    if ("flush_all" in dir(cache._cache)):
      cache._cache.flush_all()
      print "Cache Flush Done."
    else:
      print "No-op ... this cache type has no flush" 
```

# apache-flex - 如何使用 Parsley MVC IOC 注入动态连接 Starling 视图

> ID：12849579
> 
> 赞同：4
> 
> 时间：2012-10-11T22:32:13.207
> 
> 标签：apache-flex, actionscript, fdt, parsley, starling-framework

我在 Flex 应用程序中使用 Starling。该应用程序使用 Parsley 框架并在视图上执行 IOC。

Starling 本质上不是普通的 Flash 显示对象。通常在 Parsley 项目中，如果我想在创建视图时动态注入，我只需调用 Configure.view(this).execute() 就可以了。

我想知道是否有一种方法可以在不使用 Configure.view 的情况下将数据模型动态地注入我的 Starling 视图中。感觉 Starling 视图不是普通 Flash 显示列表中的 DisplayObject。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T23:42:09.363

在我发布这个问题大约一个小时后，我通过与曾经为 powerflasher / FDT 工作并且对 Parsley 了如指掌的 Patrick Kulling 交谈找到了这个解决方案。

基本上你必须得到一个 Parsley Context 的实例，然后像这样调用 context.addDynamicObject 。

```
 [Inject]
            public var context:Context;

            [Init]
            private function onImagesReady( event : Event = null ) : void
            {
                     //star.root gives us a ref to MainGame witch is our starling view    
                    //that want parsley to do IOC on
                 context.addDynamicObject(star.root);
            }

                    //here is where we call the starling code and it creates an instance
            private function onCC() : void
            {
                star = new Starling( MainGame, stage );
                star.viewPort = new Rectangle(0, 0, width, height);
                star.start();
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-23T08:18:58.837

看看采用 Parsley 与 Starling 一起使用的[parsley-starling库。](https://github.com/rozdonmobile/parsley-starling)

它基于[Parsley 的修改版本，](https://github.com/rozdonmobile/parsley-core)对 Flash API 的依赖较少。

链接库后，`StarlingViewManagerDecorator`在创建上下文时添加：

```
ContextBuilder.newSetup()
    .services()
        .viewManager()
            .addDecorator(StarlingViewManagerDecorator, _starling)
    .newBuilder()
        .config(XmlConfig.forFile("config.xml"))
    .build(); 
```

之后使用`StarlingConfigure`Starling 的 DisplayObject 类来管理它：

```
import feathers.controls.Screen
public class NewsView extends Screen
{
    public function NewsView()
    {
        super();

        StarlingConfigure.view(this).execute();
    }
} 
```

# php - 访问函数外的变量

> ID：12849582
> 
> 赞同：1
> 
> 时间：2012-10-11T22:32:40.143
> 
> 标签：php, function

我目前正在尝试访问我的数据库但收到消息

> 未定义变量：链接

我的代码如下：

```
define('DB_HOST', 'localhost');
define('DB_USER', 'root');
define('DB_PASS', 'penbird098');
define('DB_NAME', 'cmstest');

$link = @mysqli_connect(DB_HOST, DB_USER, DB_PASS, DB_NAME) or die(mysqli_error($link));
mysqli_set_charset($link, 'utf8');

function getPosts(){

    $query = "SELECT * FROM post" or die($link);
    $result = mysqli_query($link, $query);
    $num = mysqli_num_rows($result);

    if($num > 0){

        while($row = mysqli_fetch_array($result, MYSQLI_ASSOC)){
            echo $row['Title'];
        }

    }
}  

getPosts(); 
```

我究竟做错了什么？我已经阅读了代码并重新阅读了几次，并在 Google 上环顾四周并随机尝试了不同的可能性，但无法找出原因。我猜这与无法将变量从函数外部传递到函数有关，但如果我是对的，我不知道该怎么做或者最好的方法是什么, 建议将不胜感激。

此外，我正在尝试对我的代码使用最佳实践，所以其他任何不正确的事情都会很高兴知道。

PS连接在includes/connect函数在includes/functions调用函数在index

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T22:34:01.997

将以下行添加到您的函数中：

```
global $link; 
```

请参阅有关在函数范围内使用全局变量的参考：http: [//php.net/manual/en/language.variables.scope.php](http://php.net/manual/en/language.variables.scope.php)

从上面的参考：

> 此脚本不会产生任何输出，因为 echo 语句引用了 $a 变量的本地版本，并且尚未在此范围内为其分配值。您可能会注意到这与 C 语言有点不同，因为 C 中的全局变量自动可用于函数，除非被局部定义特别覆盖。这可能会导致一些问题，因为人们可能会无意中更改全局变量。在 PHP 中，如果要在函数中使用全局变量，则必须在函数中声明它们为全局变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T22:37:40.000

您可以将其作为参数传递或将其用作全局；

```
function getPosts($dbLink){
 ....
} 
```

或者：

```
function getPosts(){
   global $link;
} 
```

但是您的代码中还有其他错误：

```
$query = "SELECT * FROM post" or die($link); 
```

不正确，这可能是您的意思：

```
$query = "SELECT * FROM post";
$result = mysqli_query($link, $query) or die("Error: ".mysql_error());
$num = mysqli_num_rows($result); 
```

# curl - 在 curl 响应正文的末尾自动添加换行符

> ID：12849584
> 
> 赞同：296
> 
> 时间：2012-10-11T22:32:44.250
> 
> 标签：curl

如果 curl 请求的 HTTP 响应正文不包含尾随换行符，我最终会遇到这种非常烦人的情况，其中 shell 提示符位于行的中间，并且转义非常混乱，以至于当我放置最后一个 curl 时屏幕上的命令，从该 curl 命令中删除字符会删除错误的字符。

例如：

```
[root@localhost ~]# curl jsonip.com
{"ip":"10.10.10.10","about":"/about"}[root@localhost ~]# 
```

有没有一种技巧可以用来在 curl 响应的末尾自动添加换行符，以使提示回到屏幕的左边缘？

* * *

## 回答 #1

> 赞同：517
> 
> 时间：2013-01-30T21:32:43.560

从 man 文件中：

> 为了更好地让脚本程序员了解 curl 的进度，引入了 -w/--write-out 选项。使用它，您可以指定要从之前的传输中提取哪些信息。
> 
> 要显示下载的字节数以及一些文本和结束换行符：
> 
> ```
> curl -w 'We downloaded %{size_download} bytes\n' www.download.com 
> ```

因此，请尝试将以下内容添加到您的`~/.curlrc`文件中：

```
-w "\n" 
```

* * *

## 回答 #2

> 赞同：123
> 
> 时间：2012-10-11T22:34:25.230

用这个：

```
curl jsonip.com; echo 
```

如果您需要*分组*来馈送*管道*：

```
{ curl jsonip.com; echo; } | tee new_file_with_newline 
```

**输出**

```
{"ip":"x.x.x.x","about":"/about"} 
```

就是*这么*简单；）

（不仅限于 curl 命令，还包括所有不以换行符结尾的命令）

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2017-05-19T21:47:29.630

有关更多信息以及 curl 后的干净新行

**`~/.curlrc`**

```
-w "\nstatus=%{http_code} %{redirect_url} size=%{size_download} time=%{time_total} content-type=\"%{content_type}\"\n" 
```

[（此处](https://helpmanual.io/man1/curl/)提供更多选项）

`redirect_url`如果请求没有被重定向或您使用`-L`跟随重定向，则将为空白。

示例输出：

```
~ ➤  curl https://www.google.com
<HTML><HEAD><meta http-equiv="content-type" content="text/html;charset=utf-8">
<TITLE>302 Moved</TITLE></HEAD><BODY>
<H1>302 Moved</H1>
The document has moved
<A HREF="https://www.google.co.uk/?gfe_rd=cr&amp;ei=FW">here</A>.
</BODY></HTML>

status=302 https://www.google.co.uk/?gfe_rd=cr&ei=FW size=262 time=0.044209 content-type="text/html; charset=UTF-8"
~ ➤ 
```

**编辑**，为了使内容更具可读性，您可以将 ANSI 颜色添加到该`-w`行，直接编写并不容易，但是[此](https://github.com/samuelcolvin/init-desktop)脚本可以生成`~/.curlrc`带有颜色的文件。

```
#!/usr/bin/env python3
from pathlib import Path
import click
chunks = [
    ('status=', 'blue'),
    ('%{http_code} ', 'green'),
    ('%{redirect_url} ', 'green'),
    ('size=', 'blue'),
    ('%{size_download} ', 'green'),
    ('time=', 'blue'),
    ('%{time_total} ', 'green'),
    ('content-type=', 'blue'),
    ('\\"%{content_type}\\"', 'green'),
]
content = '-w "\\n'
for chunk, colour in chunks:
    content += click.style(chunk, fg=colour)
content += '\\n"\n'

path = (Path.home() / '.curlrc').resolve()
print('writing:\n{}to: {}'.format(content, path))
path.write_text(content) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-07-24T11:28:27.730

bash 的一般解决方案是在命令提示符中添加换行符：

请参阅相关问题（[如何在 bash 提示之前换行？](https://unix.stackexchange.com/questions/114694/how-to-have-a-newline-before-bash-prompt) ）和相应的[答案](https://unix.stackexchange.com/a/114696)

该解决方案涵盖了每个命令，而不仅仅是 curl。

```
echo $PS1 # To get your current PS1 env variable's value aka '_current_PS1_'
PS1='\n_current_PS1_' 
```

唯一的副作用是您在每 2 行之后都会收到命令提示符。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-03T16:06:11.650

当命令输出末尾没有新行时，我设法动态添加新行以提示。所以它不仅适用于任何其他命令，`curl`也适用于任何其他命令。

```
# https://github.com/dylanaraps/pure-bash-bible#get-the-current-cursor-position
new_line_ps1() {
  local _ y x _
  local LIGHT_YELLOW="\001\033[1;93m\002"
  local     RESET="\001\e[0m\002"

  IFS='[;' read -p $'\e[6n' -d R -rs _ y x _
  if [[ "$x" != 1 ]]; then
    printf "\n${LIGHT_YELLOW}^^ no newline at end of output ^^\n${RESET}"
  fi
}

PS1="\$(new_line_ps1)$PS1" 
```

我在 UL 网站上的回答：[https ://unix.stackexchange.com/a/647881/14907](https://unix.stackexchange.com/a/647881/14907)

# c - 获取两个内存地址之间的差异

> ID：12849588
> 
> 赞同：7
> 
> 时间：2012-10-11T22:32:59.737
> 
> 标签：c, memory

我有一个内存地址`int *`：0xbfde61e0。我还有另一个内存地址（也就是`int *`. 我如何计算两者之间的差异以用作两个位置之间的偏移量？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T15:31:44.797

我真的很想了解更多关于您如何使用这些信息的详细信息。这可以得到一个更简洁的答案。

反正。通常会发生什么：

```
int a = 1;
int b = 2;
int * w = &a; //0xbfdfa900 - These are right next to each other on the stack since
int * x = &b; //0xbfdfa904   they were declared together
int y = (int)w;
int z = (int)x;

int diff = w - x; // There's a 4 byte difference in memory, but I'd get diff = 1
                  // here because the compiler knows they're ints so I'm getting
                  // diff/sizeof(int)

int pdiff = y - z; // Now I'm going to get the number of bytes difference, so 
                   // pdiff = 4 as this is due to using the address as a raw value 
```

有如何获得两个指针之间的两个不同的偏移量。现在显然，如果您的指针在堆栈上不相邻，则值开始改变：

```
int a = 1;
int arr[5] = {0};
int b = 2;
int * w = &a; //0xbfdfa900 - These are right off by 24 bytes (6 * sizeof(int))
int * x = &b; //0xbfdfa918   because we have 5 more ints there 
```

两者之间的距离和类型越多，我们就越会失去两个变量之间的任何明显“偏移”，换句话说，这开始变得毫无意义。这就是为什么指针算法实际上只适用于数组（因为它们是已知的特定类型的连续内存）。所以在你的情况下：

```
int * one = &somenum;      // 0xbfde61e0
int * two = &someothernum; // 0xbfbf69e0
printf("%d\n", (int)two-(int)one);
2029568 bytes 
```

这些距离很远。所以你可以减去它们，但我不确定你为什么要这样做。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-11T22:34:48.993

听起来很简单。

```
int a = 5;
int b = 7;

int *p_a = &a;
int *p_b = &b;

int difference = p_b - p_a; 
```

请记住，这会将差异作为 的倍数`sizeof(int)`。如果您想要字节差异，请执行以下操作：

```
int differenceInBytes = (p_b - p_a) * sizeof(int); 
```

如果没有特定的代码或特定的应用程序，我无法获得比这更详细的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T22:34:04.390

我认为这得到了抵消。

```
int *a = &somevar;
int *b = &anotherintvar;
int offset = b - a; 
```

# java - Java：为什么没有 String#containsIgnoreCase？

> ID：12849591
> 
> 赞同：2
> 
> 时间：2012-10-11T22:33:19.023
> 
> 标签：java

多年来，我想知道为什么`containsIgnoreCase`类中没有方法`String`。我们有`equals`和`equalsIgnoreCase`，但只有`contains`和 没有`containsIgnoreCase`。这有什么原因吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T22:54:33.160

确切的原因是什么，真的很难说。也许人们觉得它`equals`会被更频繁地使用`contains`，因此实现一个`equalsIgnoreCase`方法会被证明是最有用的，但实现它并不是那么有用`containsIgnoreCase`。无论如何，很难确定。话虽如此，您确实可以根据原始方法轻松实现自己的`contains`方法，沿着这些思路可以工作：

```
String s1 = "HeLlO WoRlD";
String s2 = "llo worl";
System.out.println(s1.toLowerCase().contains(s2.toLowerCase()));  // true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T23:10:16.930

String 类中有几个方法，它们是**IgnoreCase**的潜在候选方法，例如**indexOf、lastIndexOf、startsWith、EndWith**等。

但我认为，**toUpperCase**和**toLowerCase**有一天会使 IgnoreCase 方法过时，这可能是原因。

# ruby-on-rails - Rails：关闭错误显示

> ID：12849597
> 
> 赞同：4
> 
> 时间：2012-10-11T22:33:54.793
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2

当我通过 URL 访问 Rails 项目中不存在的帖子时，`/posts/13`浏览器显示详细错误：

```
ActiveRecord::RecordNotFound in PostsController#show

Couldn't find Post with ID=13
Rails.root: ...
...
Request

Parameters:

{"id"=>"13"}
... 
```

有没有办法关闭这个详细的错误显示？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-11T22:38:37.427

尝试这个：

*   在生产中运行服务器`$ rails s -e production`

*   移除*ActionDispatch::DebugExceptions*中间件

    `config.middleware.delete(ActionDispatch::DebugExceptions)`

*   `config.consider_all_requests_local = false`在您的环境配置中设置

# sql - 从基表输出插入的 ID

> ID：12849602
> 
> 赞同：0
> 
> 时间：2012-10-11T22:34:05.060
> 
> 标签：sql, sql-server, sql-server-2008

我有一个表将保存待处理的数据，这些数据将更新同一服务器上的另一个表。这个挂起的表从另一个服务器存储过程中获取数据。一旦数据在此挂起的表中，存储过程将尝试基于挂起表中的 tinyint 列进行插入、更新或删除。

除非需要发生某些事情，否则此待处理表将保持为空。在过程结束时，我们从这个挂起的表中删除。

如果需要更新的同一记录在过程运行时从另一台服务器插入两次，则会出现问题。最后，这两条记录都将被清除。我试图通过在待处理表中添加增量 id 来解决这个问题，但我无法在插入中输出 id：

```
insert into config.table (col1, col2, col3)
output inserted.col3, pendingId into @table
select p.col1, p.col2, p.col3
from pendingTable p
 left join config.table t on p.col1 = t.col1
where t.col1 is null 
```

我在 pendingId 上遇到错误。我计划使用@table 变量从挂起中删除，以避免删除未触及的记录（在程序运行时添加的新插入记录）。

```
delete p
from pendingTable p
 inner join @table t on p.pendingId = t.pendingId and p.col3 = t.col3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T22:39:43.440

您需要缓存待处理的记录并在之后删除它们。

```
begin tran

select p.pendingid
into #pendingcache
from pendingTable p
 left join config.table t on p.col1 = t.col1
where t.col1 is null

insert into config.table (col1, col2, col3)
output inserted.col3, pendingId into @table
select ...
from #pendingcache

delete p
from pendingTable p
inner join #pendingcache c on c.pendingId = p.pendingId

commit 
```

* * *

**下面的原始答案**

你`inserted`以前失踪了`pendingid`，即`inserted.pendingid`。这是为了消除和之间的`inserted`歧义`deleted`。以下作品。

哦，你也错过了整个 SELECT 语句，或者我假设它实际上是由于为问题创建了“模拟”表？

```
create table configtable (col1 int, col2 int, col3 int, pendingid int identity)

create table pendingtable (col1 int, col2 int, col3 int, pendingid int identity)
insert pendingtable values (1,2,3)

declare @table table (col3 int, pendingid int)

insert into configtable (col1, col2, col3)
output inserted.col3, inserted.pendingId into @table
select col1, col2, col3
from pendingTable p 
```

# java - 将 JTextArea 与 JTextPane 合并

> ID：12849603
> 
> 赞同：0
> 
> 时间：2012-10-11T22:34:08.020
> 
> 标签：java, swing, nimbus

我的程序原本有 JTextAreas，但是当我需要更改字符行之间的间距时，我不得不使用 JTextPanes。但是 JTextPane 默认没有任何边框（与 JTextAreas 不同），并且在几个视觉方面与 JTextAreas 不同。

我确实问过一个关于将 JTextArea 边框设置为 JTextPane 的问题，但是，我正在做整个包，完全改头换面。为了清楚起见，我正在使用 Nimbus LAF。

我的问题是，如何创建一个像 JTextPane 但看起来像 JTextArea 的组件？

一种方法是创建一个 JTextArea 并“重新训练”它，使其像 JTextPane 一样运行（我猜这极不可能），另一种方法是创建一个 JTextPane 并“重新绘制”它，使其看起来就像一个 JTextArea。

我猜我会在 UIDefaults 和其他什么东西上玩得开心……

我不确定这是否可能，如果是，我想知道哪些是需要更改的键（JTextArea 和 JTextPane 之间的值不同的键），或者至少我如何确定他们。

一件非常重要的事情是我需要看到我的 JTextComponent 上的焦点，它必须被绘制并且看起来像是一个常规的 JTextArea。

有没有办法可以实现这一切？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T23:55:26.477

我不认为它们在视觉上完全不同。它们不都只是蓝色背景上的白色盒子吗？

`jTextArea1.setBorder(Border b)`在任何情况下，您都可以使用该方法更改边框。您可以应用的边框类型大约有 8 个选项。

# ruby - 告诉可变对象

> ID：12849604
> 
> 赞同：1
> 
> 时间：2012-10-11T22:34:10.110
> 
> 标签：ruby, immutability, mutable

是否有一种方法可以判断对象是否可变，类似于`mutable?`以下内容？如果没有，实现它的最佳方法是什么？

```
"abcde".mutable? # => true
0.mutable? # => false 
```

* * *

回答 mu 太短和 dbenhur 的问题，我不喜欢`enumerated.inject(initial){...}`or的语法`enumerated.each_with_object(initial){...}`。我想要一个反转接收器和参数的方法，并且我希望它可用于各种各样的类；所以我有：

```
initial.my_new_method(enumerated){...}

0.my_new_method(1..10){|sum, i| sum + i} # => 55
"a".my_new_method(b: 3, c: 4){|s, (k, v)| s + k.to_s * v} # => "abbbcccc" 
```

这将使返回成为接收器的修改版本，并且在概念上更自然。并且`my_new_method`，我希望它是非破坏性的。当接收器可变时，我还想定义一个破坏性版本

```
initial.my_new_method!(enumerated){...}

"a".my_new_method!(b: 3, c: 4){|s, (k, v)| s << k.to_s * v} # => "abbbcccc" 
```

所以检测receiver是否可变是很有必要的。如果它被冷冻也没关系。如果我对冻结的对象使用该方法的破坏性版本，它只会引发错误。没有错。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T23:05:10.443

AFAIK 所有（未冻结的）对象都是可变的，除了 nil、true、false 和所有整数和符号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T05:35:33.050

有两个属性可以使对象在 ruby​​ 中不可变

1）对象可能会被冻结[`Object#freeze`](http://ruby-doc.org/core-1.9.3/Object.html#method-i-freeze)，在这种情况下，您的不变性检查是[`Object#frozen?`](http://ruby-doc.org/core-1.9.3/Object.html#method-i-frozen-3F)

2) 对象可以是[立即](http://books.google.com/books?id=jcUbTcr5XWwC&pg=PA73&lpg=PA73&dq=ruby+immediate+vs+reference+objects&source=bl&ots=fIFgrabufz&sig=ew6vOJfvpNJrJD_Z4g15gEFeQIM&hl=en&sa=X&ei=Fql3UK7dIOWujALHqYDoAQ&ved=0CEoQ6AEwBw#v=onepage&q=ruby%20immediate%20vs%20reference%20objects&f=false)数。我知道没有内置方法可以告诉对象是即时的，因此必须依赖即时性质的副作用。不允许立即值在其上定义单例类，因此我可以尝试以下作为代理：

```
class Object
  def immediate_value?
    class <<self; end
    return false
  rescue TypeError
    return true
  end

  def mutable?
    !(frozen? || immediate_value?)
  end
end 
```

虽然这可能是一个非常可靠的检测器（我不知道有另一种机制可以阻止打开对象的单例类），但它确实具有为每个查询的对象创建一个单例类的不幸副作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T22:37:45.803

您可以调用`.frozen?`一个对象来查看该对象的实例是否是不可变的：

```
1.9.3p194 :001 > a = Array.new
 => [] 
1.9.3p194 :002 > a.frozen?
 => false 
1.9.3p194 :003 > a.freeze
 => [] 
1.9.3p194 :004 > a.frozen?
 => true 
```

在调用`.freeze`该对象实例后，将不允许其他更改，`RuntimeError`如果有人试图更改冻结的对象，则会抛出 a。

**编辑：**

正如评论中下面提到的检查`0.frozen?`将正确返回`false`，因为 0 是`Fixnum`该类的一个实例。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-10-11T23:33:48.693

我想出了这个

```
class Object
  def mutable?; !!(dup rescue false) end
end 
```

# ruby-on-rails - date_field - 无法将符号转换为字符串

> ID：12849608
> 
> 赞同：1
> 
> 时间：2012-10-11T22:34:36.290
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我是一个非常新鲜的 ruby​​ on rails 开发人员，我`date_field`在用户配置文件编辑表单中显示时遇到了一些麻烦。它突然停止工作，我无法调试出了什么问题以及为什么它不工作。这是我的代码：

**_form.html.haml**

```
= form_for(@profile) do |f|
  = f.label :dob, 'Date of birth', :class => 'control-label'
  = f.date_select :dob, :start_year => Time.now.year - 50, :end_year => Time.now.year - 5, :include_blank => true 
```

它给了我以下错误：

> 无法将符号转换为字符串

在第 26 行，这是带有`date_select`. 无论`dob`字段是否为空，我都会收到此错误。你知道我可能错过了什么吗？奇怪的是它昨天还在工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T11:45:22.837

也许有点晚了，但我在这里找到了一些东西：

[http://i18n.lighthouseapp.com/projects/14947/tickets/12-i18n-and-date_select-exception](http://i18n.lighthouseapp.com/projects/14947/tickets/12-i18n-and-date_select-exception)

最好的问候，黛娜

编辑：我不得不将语言环境 .yml 中的日期顺序更改为

```
 -    order: [ :year, :month, :day ]
 +    order:
 +      - :year
 +      - :month
 +      - :day 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-25T08:24:07.423

这是一个翻译问题：您必须在文件中添加`:order`规则`it.yml`或在表单中添加`:order`为参数。

```
= f.date_select :dob, :start_year => Time.now.year - 50, 
                      :end_year => Time.now.year - 5, 
                      :order => [:day, :month, :year],
                      :include_blank => true 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-30T18:53:54.360

我在使用 i18n 时遇到了同样的问题。一切对英语来说都很好；但是当使用另一种语言查看时，视图抛出了“**无法将符号转换为字符串”错误。**

我使用的解决方案是为“date_select”添加“：locale”设置语言，如下所示：

```
<%= f.date_select(:admissionyear, :start_year => 1940, :end_year => Date.today.year, :discard_day => true, :discard_month => true, :locale => 'en') %> 
```

这样，您在使用其他语言时就不需要向其他 i18n yml 文件添加内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T23:01:23.377

[data_select 函数](http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html)的签名有两个字符串参数来启动它，哈希直到第三个参数才开始：

date_select(object_name, method, options = {}, html_options = {})

所以，你需要：

**date_select(:user, :dob, :start_year => Time.now.year - 50, :end_year => Time.now.year - 5, :include_blank => true)**

# maple - 在枫树中创建块矩阵

> ID：12849609
> 
> 赞同：1
> 
> 时间：2012-10-11T22:34:47.600
> 
> 标签：maple

我想创建一个由特定子矩阵构建的矩阵。特别是，假设 $A,B,C,D$ 是 $n \times n$ 矩阵（如果需要，可以使用 $n=2$）。我想定义 $$ M = \left[ \begin{array}{cc} A & B \ C & D \end{array} \right] $$ 我不介意它是否被“扁平化”。实际上，真正的问题是由 $n \times n$ 矩阵组成的 $n^2$ 个块，每个块要么是零矩阵，要么是三个标准块之一。但是，我问这个简单块的问题，因为我认为一旦我得到这个，我就能理解更大的问题。我应该只使用旧 linalg 包的“块”吗？

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T03:31:29.680

显然，您可以假装条目是矩阵，它会按照您可能希望的方式对其进行解释。我对这一切感到非常高兴：

![这就是它应该的样子。 感谢比尔。](../Images/e0483de456571fc1eba0051c62eeca37.png)

# perl - 在 Perl 中用连字符替换空格

> ID：12849618
> 
> 赞同：0
> 
> 时间：2012-10-11T22:35:34.160
> 
> 标签：perl

我想用连字符替换所有空格，但空格被替换为`045`而不是`-`. 表达式为：

```
s/ /-/g 
```

表达式`s/ /_/g`（用下划线代替）有效，所以我不确定为什么`i have apples`会变成

```
i,045have,045apples 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T23:07:45.043

这段代码对我来说很好：

```
#!/usr/bin/perl
use v5.14;
use strict;
use warnings;
my $test = "I like Apples";
$test=~s/ /-/g;
say $test; 
```

它输出`I-like-Apples`.

如果您提供更多信息，我们可以帮助您获得更多信息，说明您的代码行为异常的原因。

我们想要的信息：

*   您如何查看输出？
*   它使用什么字符集（shell 中的 $LANG）
*   你在哪个平台？
*   什么版本的perl？
*   您是否在代码中的任何地方弄乱了本地或字符集？
*   请提供更多代码，即不仅仅是进行替换的行，您如何获取字符串以及如何打印它？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T05:45:13.477

这段代码非常适合我：

```
echo I have apples | perl -p -e 's/\ /-/g'
I-have-apples 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-26T04:15:15.447

我在某处找到了一个片段，并充实了它。尚未完全完成，但目前已经完成了足够的工作。

```
#!/usr/bin/perl
#=====================================================================
#
# Convert all directory and file names to change spaces (and other special characters) to underscores...
#
# Initial Author: Dean Weiten
#
# Create Date: 2018-08-25
# Design Name: fix_dir_and_file_names.pl
# Tool versions: Perl version >= v5.8.5
#
# Description:
#    
#
# Dependencies:
#
# Revision:
#
#   $Log: fix_dir_and_file_names.pl,v $
#
#
# Additional Comments:
#
# "Nothing focusses the mind so well as an execution in the morning"
#
# Reminder: to add a module from CPAN, do something like this (may have to be root):
#   perl -MCPAN -e 'install Math::FFT'
#
#=====================================================================

# System modules
use File::Rename;
use Text::ParseWords;
use IO::Handle;
use Getopt::Std;
use POSIX;
use Switch;
use List::Util;
use File::Temp qw/ tempfile tempdir /;

$VERSION        = 0;
$ISSUE          = 1;
$ISSUE_DATE     = "2018-08-25";

$Debug = 0;

    # MAIN

    # Logical values
    my  $TRUE           = 1;
    my  $FALSE          = 0;

    # Get present date and time by shelling out to the O/S.
    my $UTCDateAndTimeNow = `date --utc '+%Y-%m-%d %H:%M %::z %Z'`;
    # Get rid of trailing NewLine...
    $UTCDateAndTimeNow =~ s/\n//;
    $UTCDateAndTimeNow =~ s/\r//;

    # Get command line options, listed in alphabetic order...
    getopts('dhHtv');

        $Debug                  = $opt_d;
    my  $DoHelp                 = $opt_h || $opt_H;
    my  $NotVerbose             = $opt_v;
    my  $JustATest              = $opt_t;

    my  $Verbose;
    if  (!$NotVerbose)
        {
        $Verbose = $TRUE;
        }
    else
        {
        $Verbose = $FALSE;
        }

    my  $PassCount;

    print "\n\nRemove Special Characters from Directory Names";
    print   "\n----------------------------------------------";
    $Directories = $TRUE;   # For directories, we get rid of all dots in the directory name.

    $PassCount = 0;
    my  $NumberOfDirectoriesChanged = rena(`find \* -type d`);
    $PassCount++;
    print "\n\nPass ".$PassCount.", NumberOfDirectoriesChanged = ".$NumberOfDirectoriesChanged;
    my  $OldNumberOfDirectoriesChanged = 0;

    # Sometimes the find command puts subdirectories first, in which case the subdirectory name changes will fail
    # until the upper level is corrected.  Then we recurse.
    # BUT sometimes some files are just not changeable, for whatever reason... then we get 2 consecutive with the 
    # same number of files (attempted) to be changed, then we bail with a message.
    while (($NumberOfDirectoriesChanged > 0) && ($OldNumberOfDirectoriesChanged != $NumberOfDirectoriesChanged))
        {
        $OldNumberOfDirectoriesChanged = $NumberOfDirectoriesChanged;
        $NumberOfDirectoriesChanged = rena(`find \* -type d`);
        $PassCount++;
        print "\n\nPass ".$PassCount.", NumberOfDirectoriesChanged = ".$NumberOfDirectoriesChanged;
        }

    if  ($NumberOfDirectoriesChanged != 0)
        {
        print "\n\nNOTE: there are still ".$NumberOfDirectoriesChanged." directories to be changed, but they won't seem to change for us, skipping and continuing with files.";
        }

    print "\n\nRemove Special Characters from File Names";
    print   "\n-----------------------------------------";
    $Directories = $FALSE;  # For files, we will leave one dot in the file name, the last one encoutered.

    $PassCount = 0;
    my  $NumberOfFilesChanged = rena(`find \* -type f`);
    $PassCount++;
    print "\n\nPass ".$PassCount.", NumberOfFilesChanged = ".$NumberOfFilesChanged;
    my  $OldNumberOfFilesChanged = 0;

    while (($NumberOfFilesChanged > 0) && ($OldNumberOfFilesChanged != $NumberOfFilesChanged))
        {
        $OldNumberOfFilesChanged = $NumberOfFilesChanged;
        $NumberOfFilesChanged = rena(`find \* -type f`);
        $PassCount++;
        print "\n\nPass ".$PassCount.", NumberOfFilesChanged = ".$NumberOfFilesChanged;
        }

    if  ($NumberOfFilesChanged != 0)
        {
        print "\n\nNOTE: there are still ".$NumberOfFilesChanged." files to be changed, but they won't seem to change for us, skipping to completion.";
        }

    sub rena
        {
        my  $ChangeCount = 0;

        @InputList = @_;

        $ListCount = @InputList;

        if  ($Verbose)
            {
            print "\n\n--- ListCount = ", $ListCount;

            if  ($Directories)
                {
                print " directories";
                }
            else    
                {
                print " files.";
                }
            }

        for ($InputCounter = 0; $InputCounter < $ListCount; $InputCounter++)
            {
            $PresentLine = @InputList [ $InputCounter ];

            # Get rid of trailing NewLine...
            $PresentLine =~ s/\n//;
            $PresentLine =~ s/\r//;

            #$Line[ $InputCounter ] = $PresentLine;

            $_ = $PresentLine;

            # Trailing space
            s/ $//g;

            # non ascii transliterate
            tr [\200-\377][_];
            tr [\000-\40][_];

            # get rid of braces of all kinds
            #s/\{\}\[\]\(\)//g;

            # special characters we do not want in paths
            s/[ \,\;\?\+\'\"\!\[\]\(\)\@\#\{\}]/_/g;

            # underscore dash underscore
            s/_-_/-/g;

            if  ($Directories)
                {
                # get rid of all dots
                s/\./_/g
                }
            else
                {
                # files: only last dot left behind
                while (/\..*\./)
                    {
                    s/\./_/;
                    }
                }

            # only one _ consecutive
            s/_+/_/g;

            #next if ($_ eq $PresentLine ) or ("./$_" eq $PresentLine);

            if  ($_ eq $PresentLine)
                {
                #print "\n".$InputCounter." ".$PresentLine;
                #print " -> no change";
                }
            else
                {
                if  ($Verbose)
                    {
                    print "\n".$InputCounter." ".$PresentLine;
                    print " -> ".$_;
                    }

                if  ($JustATest)
                    {
                    if  ($Verbose)
                        {
                        print " --- just testing, so not performed";
                        }
                    }
                else
                    {
                    #if  ($Verbose)
                    #    {
                    #    print " --- would have been performed";
                    #    }
                    rename ($PresentLine,$_);
                    $ChangeCount++;
                    }
                }

            }

        #print "\n\nChangeCount = ".$ChangeCount;
        return $ChangeCount;
        }

    print "\n\nCompleted.";
    print   "\n----------\n\n"; 
```

# android - Android中ListView中删除查询和刷新（sqlite）

> ID：12849622
> 
> 赞同：1
> 
> 时间：2012-10-11T22:35:51.087
> 
> 标签：android, database, sqlite, android-sqlite

我是 Java、Android 和 SQLite 的新手，我被困在这个问题上。我有列，即`_id`(autoincrement)、`type`、`amount`(int) `category`、 和`description`。三问。

首先，我无法删除从数据库中检索到的事务（行）。（请参考随附的 Logcat）。

其次，我需要知道删除条目后如何刷新 ListView。

第三，我认为的愚蠢问题。如果我打开数据库一次并检索数据，它就会这样做。此外，在不关闭数据库的情况下，如果我删除一个事务，它不会删除它并给出错误“数据库未打开”。此外，如果我在检索后关闭数据库，然后在删除时再次打开，它就可以工作。我不明白。主要问题是第一个，但如果您知道以上任何一个，请回答

```
 final ListView lv = getListView();
    localArrayList.clear();                //To Stop the silly repeating issue
    localDbCrud = new DbCrud(this);
    localAdapter = new SimpleAdapter(
            this,
            localArrayList,
            R.layout.transaction_list_item,
            new String[]{"Amount","Category","Date","Description"},
            new int[]{R.id.tli_amount,R.id.tli_category,R.id.tli_date,R.id.tli_desc});

    localDbCrud.open();
    DbCrud.getAllTransaction();             //Using HashMap localHashMap , localHashMap.put(localArrayList) in loop
    localDbCrud.close();
    lv.setOnItemLongClickListener(new OnItemLongClickListener() {

        public boolean onItemLongClick(final AdapterView<?> arg0, View arg1,
                 final int arg2, final long arg3) {
            // TODO Auto-generated method stub
            AlertDialog.Builder ladbuilder = new Builder(TransactionList.this);
            ladbuilder.setTitle("Choose Your Option");
            ladbuilder.setItems(R.array.alertdialog_prompt, new DialogInterface.OnClickListener() {

                public void onClick(DialogInterface dialog, int selected_item) {
                    // TODO Auto-generated method stub
                    if (selected_item == 0){
                        localDbCrud.open();
                        HashMap itemMap = (HashMap)localAdapter.getItem(arg2);
                        int item_id =(Integer) itemMap.get("Id");
                        DbCrud.deleteTransaction(item_id);
                        //final int ite=  (Integer) arg0.getItemAtPosition(arg2);
                         // final int item_id = c.getInt(c.getColumnIndex(DbCrud.TN_ID));
                        //DbCrud.deleteTransaction(item_id);
                        localDbCrud.close();

                    }
                    else{

                        //update code

                    }
                }
            });
            AlertDialog localad = ladbuilder.create();
            localad.show();

            return false;
        }
    });

    localDbCrud.close();

    setListAdapter(localAdapter);

} 
```

日志猫

```
10-13 01:21:26.804: E/AndroidRuntime(22023): FATAL EXCEPTION: main
10-13 01:21:26.804: E/AndroidRuntime(22023): java.lang.ClassCastException: java.lang.String
10-13 01:21:26.804: E/AndroidRuntime(22023):    at com.hishighness.budgetracker.TransactionList$1$1.onClick(TransactionList.java:62)
10-13 01:21:26.804: E/AndroidRuntime(22023):    at com.android.internal.app.AlertController$AlertParams$3.onItemClick(AlertController.java:878)
10-13 01:21:26.804: E/AndroidRuntime(22023):    at android.widget.AdapterView.performItemClick(AdapterView.java:284)
10-13 01:21:26.804: E/AndroidRuntime(22023):    at android.widget.ListView.performItemClick(ListView.java:3701)
10-13 01:21:26.804: E/AndroidRuntime(22023):    at android.widget.AbsListView$PerformClick.run(AbsListView.java:1970)
10-13 01:21:26.804: E/AndroidRuntime(22023):    at android.os.Handler.handleCallback(Handler.java:587)
10-13 01:21:26.804: E/AndroidRuntime(22023):    at android.os.Handler.dispatchMessage(Handler.java:92)
10-13 01:21:26.804: E/AndroidRuntime(22023):    at android.os.Looper.loop(Looper.java:130)
    10-13 01:21:26.804: E/AndroidRuntime(22023):    at android.app.ActivityThread.main(ActivityThread.java:3687)
10-13 01:21:26.804: E/AndroidRuntime(22023):    at java.lang.reflect.Method.invokeNative(Native Method)
10-13 01:21:26.804: E/AndroidRuntime(22023):    at java.lang.reflect.Method.invoke(Method.java:507)
10-13 01:21:26.804: E/AndroidRuntime(22023):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
10-13 01:21:26.804: E/AndroidRuntime(22023):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
10-13 01:21:26.804: E/AndroidRuntime(22023):    at dalvik.system.NativeStart.main(Native Method) 
```

这是 getallTransaction() 函数。这是我项目中哈希映射的唯一痕迹

```
 public static void getAllTransaction(){

    Cursor localCursor = localDatabase.query(true, TN_TABLE, null, null, null, null, null, null, null) ;
    if (localCursor != null) {

        localCursor.moveToFirst();
            do{
                HashMap<String,String> temp = new HashMap<String,String>();
                temp.put("Amount", localCursor.getString(localCursor.getColumnIndex("amount")));
                temp.put("Category", localCursor.getString(localCursor.getColumnIndex("category")));
                temp.put("Date", localCursor.getString(localCursor.getColumnIndex("date")));
                temp.put("Description", localCursor.getString(localCursor.getColumnIndex("description")));
                temp.put("Id", localCursor.getString(localCursor.getColumnIndex("_id")));
                TransactionList.localArrayList.add(temp);

            }while (localCursor.moveToNext());

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T00:16:07.643

> 首先，我无法删除从数据库中检索到的事务（行）

第 61 行将结果转换为`arg0.getItemAtPosition(arg2)`to `Cursor`，但返回类型可能是`HashMap`（如 Logcat 输出中所述）。通常你`Cursor`从数据库查询中得到一个。

如果您在构建数据库时将每个数据库行的 ID 放入`HashMap`其中，那么您将能够将该 ID 传递给您的事件中的`deleteTransaction()`调用。`onClick`所以，你需要

```
temp.put("Id", localCursor.getInt(localCursor.getColumnIndex("_id"))); 
```

in `getAllTransaction()`，然后修改您的`onClick()`方法以执行以下操作：

```
localDbCrud.open();
HashMap itemMap = (HashMap)localAdapter.getItem(arg2);
int item_id = Integer.parseInt((String)itemMap.get("Id"));
DbCrud.deleteTransaction(item_id);
localDbCrud.close(); 
```

我还建议重命名`arg2`（和其他）以具有更清晰的名称，以便更容易理解代码。

> 其次，我需要知道删除条目后如何刷新列表视图

对数据集进行更改后，您可以调用`notifyDataSetChanged()`适配器来刷新数据集。`ListView`

编辑：请注意，`SimpleAdapter`这适用于静态数据，因此您的里程可能会有所不同。最好的解决方案可能是切换到不同类型的适配器，例如`ArrayAdapter`，或者`SimpleAdapter`每次更改数据集时都创建一个新的。

# r - 在 R 中，如何在单个设备中放置多个 fill.contour() 图？

> ID：12849623
> 
> 赞同：2
> 
> 时间：2012-10-11T22:35:59.430
> 
> 标签：r

`layout()`没有削减它，因为`filled.contour()`实际上*用于* `layout()`设置主要情节和侧面的图例。我总是可以一张一张地得到我的图并将它们与一些图形实用程序结合起来，但如果可以的话，留在 R 中会更有效。有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T23:13:11.923

我会使用`levelplot`from package `lattice`。你可以得到多个面板，而且情节看起来真的很不错。

请看 Lattice 书第 6 章中的图 6.9：

[http://lmdvr.r-forge.r-project.org/figures/figures.html](http://lmdvr.r-forge.r-project.org/figures/figures.html)

这样你就不会被填充的轮廓代码所困。（我确实尝试在 rhelp 和 SO 档案中搜索一些东西，但结果是空的。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T09:36:21.513

您可能想使用*image()*然后使用*layout()*。不过，必须手动添加图例。

# android - 仅在较旧的模拟器上出现 Android 应用错误

> ID：12849624
> 
> 赞同：0
> 
> 时间：2012-10-11T22:36:06.303
> 
> 标签：android

我目前正在开发一个 Android 应用程序，虽然在 Jelly Bean 模拟器上一切正常，但在 2.2 模拟器上出现以下错误：

```
10-11 22:26:35.853: E/AndroidRuntime(303): FATAL EXCEPTION: main
10-11 22:26:35.853: E/AndroidRuntime(303): android.view.InflateException: Binary XML file line #1: Error inflating class <unknown>
10-11 22:26:35.853: E/AndroidRuntime(303):  at android.view.LayoutInflater.createView(LayoutInflater.java:513)
10-11 22:26:35.853: E/AndroidRuntime(303):  at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
10-11 22:26:35.853: E/AndroidRuntime(303):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:563)
10-11 22:26:35.853: E/AndroidRuntime(303):  at android.view.LayoutInflater.inflate(LayoutInflater.java:385)
10-11 22:26:35.853: E/AndroidRuntime(303):  at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
10-11 22:26:35.853: E/AndroidRuntime(303):  at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:332)
10-11 22:26:35.853: E/AndroidRuntime(303):  at android.widget.ArrayAdapter.getView(ArrayAdapter.java:323)
10-11 22:26:35.853: E/AndroidRuntime(303):  at com.android.iagrams.util.MyAdapter.getView(MyAapter.java:20)
10-11 22:26:35.853: E/AndroidRuntime(303):  at android.widget.AbsListView.obtainView(AbsListView.java:1315)
10-11 22:26:35.853: E/AndroidRuntime(303):  at android.widget.ListView.makeAndAddView(ListView.java:1727)
10-11 22:26:35.853: E/AndroidRuntime(303):  at android.widget.ListView.fillDown(ListView.java:652)
10-11 22:26:35.853: E/AndroidRuntime(303):  at android.widget.ListView.fillFromTop(ListView.java:709)
10-11 22:26:35.853: E/AndroidRuntime(303):  at android.widget.ListView.layoutChildren(ListView.java:1580)
10-11 22:26:35.853: E/AndroidRuntime(303):  at android.widget.AbsListView.onLayout(AbsListView.java:1147)
10-11 22:26:35.853: E/AndroidRuntime(303):  at android.view.View.layout(View.java:7035)
10-11 22:26:35.853: E/AndroidRuntime(303):  at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1249)
10-11 22:26:35.853: E/AndroidRuntime(303):  at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1125)
10-11 22:26:35.853: E/AndroidRuntime(303):  at android.widget.LinearLayout.onLayout(LinearLayout.java:1042)
10-11 22:26:35.853: E/AndroidRuntime(303):  at android.view.View.layout(View.java:7035)
10-11 22:26:35.853: E/AndroidRuntime(303):  at android.widget.FrameLayout.onLayout(FrameLayout.java:333)
10-11 22:26:35.853: E/AndroidRuntime(303):  at android.view.View.layout(View.java:7035)
10-11 22:26:35.853: E/AndroidRuntime(303):  at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1249)
10-11 22:26:35.853: E/AndroidRuntime(303):  at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1125)
10-11 22:26:35.853: E/AndroidRuntime(303):  at android.widget.LinearLayout.onLayout(LinearLayout.java:1042)
10-11 22:26:35.853: E/AndroidRuntime(303):  at android.view.View.layout(View.java:7035)
10-11 22:26:35.853: E/AndroidRuntime(303):  at android.widget.FrameLayout.onLayout(FrameLayout.java:333)
10-11 22:26:35.853: E/AndroidRuntime(303):  at android.view.View.layout(View.java:7035)
10-11 22:26:35.853: E/AndroidRuntime(303):  at android.view.ViewRoot.performTraversals(ViewRoot.java:1045)
10-11 22:26:35.853: E/AndroidRuntime(303):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1727)
10-11 22:26:35.853: E/AndroidRuntime(303):  at android.os.Handler.dispatchMessage(Handler.java:99)
10-11 22:26:35.853: E/AndroidRuntime(303):  at android.os.Looper.loop(Looper.java:123)
10-11 22:26:35.853: E/AndroidRuntime(303):  at android.app.ActivityThread.main(ActivityThread.java:4627)
10-11 22:26:35.853: E/AndroidRuntime(303):  at java.lang.reflect.Method.invokeNative(Native Method)
10-11 22:26:35.853: E/AndroidRuntime(303):  at java.lang.reflect.Method.invoke(Method.java:521)
10-11 22:26:35.853: E/AndroidRuntime(303):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
10-11 22:26:35.853: E/AndroidRuntime(303):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
10-11 22:26:35.853: E/AndroidRuntime(303):  at dalvik.system.NativeStart.main(Native Method)
10-11 22:26:35.853: E/AndroidRuntime(303): Caused by: java.lang.reflect.InvocationTargetException
10-11 22:26:35.853: E/AndroidRuntime(303):  at android.widget.LinearLayout.<init>(LinearLayout.java:115)
10-11 22:26:35.853: E/AndroidRuntime(303):  at java.lang.reflect.Constructor.constructNative(Native Method)
10-11 22:26:35.853: E/AndroidRuntime(303):  at java.lang.reflect.Constructor.newInstance(Constructor.java:446)
10-11 22:26:35.853: E/AndroidRuntime(303):  at android.view.LayoutInflater.createView(LayoutInflater.java:500)
10-11 22:26:35.853: E/AndroidRuntime(303):  ... 36 more
10-11 22:26:35.853: E/AndroidRuntime(303): Caused by: java.lang.UnsupportedOperationException: Can't convert to dimension: type=0x2
10-11 22:26:35.853: E/AndroidRuntime(303):  at android.content.res.TypedArray.getDimensionPixelSize(TypedArray.java:463)
10-11 22:26:35.853: E/AndroidRuntime(303):  at android.view.View.<init>(View.java:2036)
10-11 22:26:35.853: E/AndroidRuntime(303):  at android.view.View.<init>(View.java:1834)
10-11 22:26:35.853: E/AndroidRuntime(303):  at android.view.ViewGroup.<init>(ViewGroup.java:285)
10-11 22:26:35.853: E/AndroidRuntime(303):  ... 40 more 
```

据我所知，我没有使用任何 Jelly Bean 特定功能，也不知道我遇到了什么错误。我确实有一个自定义适配器，但我没有做太多，我只更改了几个文本视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T22:56:31.740

将您的适配器更改为以下内容：

```
public class MethodAdapter extends ArrayAdapter<Method> {

    LayoutInflater inflater;

    public MethodAdapter(Context context, int layout, int field, ArrayList<Method> methodsList) {
        super(context, layout, field, methodsList);
            inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER);
    }

    class ViewHolder {
        TextView bellName;
        TextView bellType;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
            ViewHolder holder = null;
        if (convertView == null) {
                convertView = inflater.inflate(R.layout.your_item_layout, null);
                holder = new ViewHolder();
                holder.bellName = (TextView) row.findViewById(R.id.bellName);
            holder.bellType = (TextView) row.findViewById(R.id.bellType);
                convertView.addTag(holder);
            } else {
                holder = (ViewHolder)convertView.getTag();
            }

        Method m = getItem(position);

        holder.bellName.setText(m.getName());
        holder.bellType.setText(m.getSuffix());
        return convertView;
    }
} 
```

Ps.：我没有编译这段代码。先检查一下......

# javascript - JS：iPhone 地址簿样式的粘性 AZ 条

> ID：12849626
> 
> 赞同：0
> 
> 时间：2012-10-11T22:36:09.087
> 
> 标签：javascript, jquery, iphone, jquery-ui, webkit

我正在尝试构建一个小的 html5&JS 应用程序，例如 iphone 地址簿，当您向下滚动列表时，B 会粘在顶部等等。

我有固定位置等的gard时间...使用iScroll相同...有什么我可以使用的预煮的吗？一个插件？

当然它必须在iphone上工作！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T00:54:14.133

只需使用`UITableView`具有简单样式的 a 并实施部分。您描述的效果正是如此，它开箱即用。

# visual-studio-2010 - 在同一台机器上安装 VS2012 和 VS 2010 有什么问题吗？

> ID：12849627
> 
> 赞同：0
> 
> 时间：2012-10-11T22:36:13.550
> 
> 标签：visual-studio-2010, visual-studio-2012

> **可能重复：**
> [Visual Studio 2012 可以与 Visual Studio 2010 并排安装吗？](https://stackoverflow.com/questions/7425475/can-visual-studio-2012-be-installed-side-by-side-w-visual-studio-2010)

在任何人跳到我身上之前，我已经阅读了官方信息，告诉我我可以毫无问题地安装这两个版本，但我有点谨慎，并希望在冒着我的开发机器风险之前听听实际做过的人的意见！

我在 Win7 Pro 64 位上，使用 VS2010 Pro SP1 以防万一。

我知道 .NET 4.5 安装超过 4.0，以及它的含义，但我想知道是否还有其他我应该知道的问题。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T01:04:23.920

我在同一台机器上使用带有 VS2010 SP1 和 VS2012 的 Windows Server 2008 64 位。我没有任何问题。

但是，您可能想知道一些问题。在这里您可以找到更多详细信息： [Visual Studio 2012 可以与 Visual Studio 2010 并排安装吗？](https://stackoverflow.com/questions/7425475/can-visual-studio-2012-be-installed-side-by-side-w-visual-studio-2010)

# javascript - 添加的 html 元素已添加到 DOM 但不可见

> ID：12849628
> 
> 赞同：2
> 
> 时间：2012-10-11T22:36:13.957
> 
> 标签：javascript, jquery, html

我将 html 添加到 div 如下：

```
var parent = $('#loginPage');
console.log(parent);
parent.append('<p> TEST </p>'); 
```

它被正确添加我可以在 firebug DOM 中查看它，但它没有显示在实际页面上。

什么可能导致这个问题？

编辑：这是html

```
!DOCTYPE html>
<%@page import="auth.BasicAuthRedirectServlet"%>
<%@page import="model.User"%>
<%@page import="org.brickred.socialauth.util.Constants"%>
<%@page import="org.apache.shiro.SecurityUtils"%>
<html>
<head>
    <title>Current Page Title</title>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script type="text/javascript" src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
    <script type="text/javascript" src="js/init.js"></script>
    <script type="text/javascript" src="js/handler.js"></script>
    <script type="text/javascript" src="js/errorMsgs.js"></script>
    <script type="text/javascript" src="js/globalHelper.js"></script>
    <script type="text/javascript" src="js/request.js"></script>
</head>
<body>
    <div data-role="page" id="loginPage">
        <div data-theme="a" data-role="header">
            <h3>Login</h3>
        </div>
        <div data-role="content">

            <!-- Display if the user is logged in or not -->
            <h3><%=SecurityUtils.getSubject().isAuthenticated()
                    ? "Username: " + SecurityUtils.getSubject().getPrincipal()
                    : "Currently not logged in"%></h3>

            <h3>Login with existing account:</h3>
            <a data-role="button" data-transition="fade" data-theme="a"
                href="auth?provider=<%=Constants.FACEBOOK%>" data-ajax="false"
                data-icon="arrow-r" data-iconpos="right"> Facebook </a> <a
                data-role="button" data-transition="fade" data-theme="a"
                href="auth?provider=<%=Constants.GOOGLE%>" data-ajax="false"
                data-icon="arrow-r" data-iconpos="right"> Google </a> <a
                data-role="button" data-transition="pop" data-theme="b"
                href="#authcLogin" data-icon="arrow-r" data-iconpos="right"> Use
                custom account </a>
            <div data-role="collapsible-set" data-theme="" data-content-theme="">
                <div data-role="collapsible" data-collapsed="true">
                    <h3>Other account providers</h3>

                        <!-- The following order of the oAuth services is based on usage statistics -->

                        <a
                        data-role="button" data-transition="fade" data-theme="a" href="/auth?provider=<%=Constants.YAHOO%>" data-ajax="false"
                        data-icon="arrow-r" data-iconpos="right"> Yahoo </a> 

                        <a
                        data-role="button" data-transition="fade" data-theme="a" href="/auth?provider=<%=Constants.TWITTER%>" data-ajax="false"
                        data-icon="arrow-r" data-iconpos="right"> Twitter </a> 

                        <a
                        data-role="button" data-transition="fade" data-theme="a" href="/auth?provider=<%=Constants.LINKEDIN%>" data-ajax="false"
                        data-icon="arrow-r" data-iconpos="right"> Linkedin </a> 

                        <a 
                        data-role="button" data-transition="fade" data-theme="a" href="/auth?provider=<%=Constants.OPENID%>" data-ajax="false"
                        data-icon="arrow-r" data-iconpos="right"> OpenID </a> 

                        <a
                        data-role="button" data-transition="fade" data-theme="a" href="/auth?provider=<%=Constants.HOTMAIL%>" data-ajax="false"
                        data-icon="arrow-r" data-iconpos="right"> Hotmail </a> 

                        <a
                        data-role="button" data-transition="fade" data-theme="a" href="/auth?provider=<%=Constants.FOURSQUARE%>" data-ajax="false"
                        data-icon="arrow-r" data-iconpos="right"> FourSquare </a> 

                        <a
                        data-role="button" data-transition="fade" data-theme="a" href="/auth?provider=<%=Constants.YAMMER%>" data-ajax="false"
                        data-icon="arrow-r" data-iconpos="right"> Yammer </a> 

                        <a
                        data-role="button" data-transition="fade" data-theme="a" href="/auth?provider=<%=Constants.MYSPACE%>" data-ajax="false"
                        data-icon="arrow-r" data-iconpos="right"> MySpace </a> 

                        <a
                        data-role="button" data-transition="fade" data-theme="a" href="/auth?provider=<%=Constants.SALESFORCE%>" data-ajax="false"
                        data-icon="arrow-r" data-iconpos="right"> Salesforce </a>
                </div>
            </div>
            <a data-role="button" data-transition="pop" data-theme="e"  href="#registerPage" data-icon="arrow-r" data-iconpos="right"> Register new account </a>
        </div>
    </div>
    <div data-role="page" id="authcLogin">
        <div data-theme="a" data-role="header">
            <h3>Login</h3>
            <!-- Backbutton -->
            <a data-role="button" data-direction="reverse" data-rel="back" data-transition="pop" data-theme="e" href="loginPage"
                data-icon="arrow-l" data-iconpos="left"> Back </a>
        </div>
        <div data-role="content">
            <form id="logFrm" class="ui-body ui-body-a ui-corner-all">
                <fieldset>
                    <div data-role="fieldcontain">
                        <label for="uIdInput">Email:</label> 
                        <input name="<%=User.USER_ID%>" id="uIdInput" value="" type="email" placeholder="your.mail@abc.com" /> <label for="uPwInput">Password:</label>
                        <input name="<%=BasicAuthRedirectServlet.PASSWORD%>" id="uPwInput" value="" type="password" placeholder="Your password" />
                    </div>
                    <button id="logBtn"data-theme="b">Login</button>
                </fieldset>
            </form>
        </div>
    </div>
    <div data-role="page" id="registerPage">
        <div data-theme="a" data-role="header">
            <h3>Create account</h3>
            <!-- Backbutton -->
            <a data-role="button" data-direction="reverse" data-rel="back" data-transition="pop" data-theme="e" href="loginPage"
                data-icon="arrow-l" data-iconpos="left"> Back </a>
        </div>
        <!-- Registration -->
        <div data-role="content">
            <div data-role="content">
                <form id="regFrm" class="ui-body ui-body-a ui-corner-all">
                    <fieldset>
                        <div data-role="fieldcontain">
                            <label for="rUIdInput">Email:</label>
                            <input name="<%=User.USER_ID%>" id="rUIdInput" value="" type="email" placeholder="your.mail@abc.com" /> 
                            <label for="rUPwInput">Password:</label>
                            <input name="<%=BasicAuthRedirectServlet.PASSWORD%>" id="rUpwInput" value="" type="password" placeholder="Your password" />
                        </div>
                        <button id="regBtn" data-theme="b">Register</button>
                    </fieldset>
                </form>
            </div>
        </div>
    </div>
<script>
    function goBack() {
        window.history.back()
    }
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T22:41:51.473

如果您使用 FireBug 为什么不跟踪该元素的样式并查看它为什么不可见，可能是其父元素之一不可见或新元素的位置超出其父元素的可见范围

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T22:46:06.150

如果您确实看到最终结果 html 被附加到 Firebug 中，那么您可能有另一个元素将其推到了可见性之外。你可以试试这个来获取新元素的位置，看看它是否离开页面：

```
var parent = $('#loginPage');
console.log(parent);
parent.append('<p id="testp"> TEST </p>');

console.log($('#testp').position());
console.log($('#testp').offset()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T22:39:38.150

听起来你需要 CSS。

尝试：

```
#loginpage p {
  position: relative;
  top: 0px;
  left: 0px;
} 
```

# php - 对一般购物车的使用感到困惑

> ID：12849630
> 
> 赞同：1
> 
> 时间：2012-10-11T22:36:30.243
> 
> 标签：php, shopping-cart

我有一个项目需要一个购物车，这就是我的困惑开始的地方。我们想到的支付网关支持很多购物车，但这是否意味着我不能自己从头开始创建自定义购物车？我们只销售大约 10 种产品，所以我希望为我的客户创建一个定制的购物车。

这是一个 PHP/MySQL 站点，因为这是我的第一个电子商务项目，我担心如果我创建自定义购物车，我将无法将其链接到网关。我只是偏执吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T22:41:19.323

这取决于网关以及事物的传递方式。

一般来说，如果支付网关支持多个购物车，将有一种技术方式供您链接到它，但您需要其 API 的详细信息（如何传递项目、数量、税金、运输信息等...... )

在最坏的情况下，您可以查看支持的购物车是如何做到的并复制功能。

查找信息的最佳位置是支付网关本身——有时它们提供各种语言的 SDK 或 API。当然，这一切都假设支付网关愿意让您使用自定义解决方案（大多数都是）

我要指出电子商务是一个高风险的开发领域，在生产环境中使用它之前，您应该绝对确定自己知道自己在做什么。您需要尽可能确定您的代码中不存在可能导致充电过度/充电不足、SQL 注入攻击等的错误/缺陷。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T22:42:02.520

如果这些支持的推车中的任何一个是开源的，那么是的，你有点偏执。您可以很容易地查看其中任何一个的支付模块，以了解网关希望如何通过。除此之外，网关通常会记录它期望的东西，这就是那些开源模块通常首先是如何编写的。

话虽如此...如果这是您的第一个电子商务网站，您可能希望从现有的购物车开始，并为自己省去很多麻烦。一般来说，当您处理信用卡信息和金钱时，有很多事情需要担心并遵循规则，并且您不希望未经证实的代码坐在那里等待被利用。大型成熟的推车已经存在了一段时间，并且不太可能做完全错误的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T22:42:55.823

支付提供商通常处理处理资金的安全方面。只需确保您对所有交易都使用 SSL。

话虽如此，那里有许多购物车实现。我通常喜欢这些，因为即使你从小做起，你也可能会成长。现有的实现将为您提供这种可伸缩性，而不是自己动手。除非您计划通过自定义实施为您的客户创造差异化，否则请使用现成的。

# r - 为什么 approx 返回列表而不是数据框或数组？

> ID：12849631
> 
> 赞同：5
> 
> 时间：2012-10-11T22:36:31.777
> 
> 标签：r

对我`approx`来说返回一个列表是没有意义的，因为——如果我理解正确的话——它返回的列表的两个元素保证是数字的并且长度相等。鉴于此，返回数组或数据框似乎更有意义。

我正在使用 编写一些函数`approx`，这让我觉得我不完全理解它是如何工作的。是否存在需要列表或更好的情况？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T23:04:13.830

函数将配对列表作为参数。通常，列表用于将参数传递给`lattice`图形，这是之前占主导地位的高级图形环境`ggplot`，后代也随之而来。列表还用于将参数传递给许多函数中的控制参数。在这种情况下，您会期望`x`和`y`长度相同，因此它*可能*是一个数据帧，但没有特别的理由要求这种结构，并且基函数`points`和`lines`将接受命名列表并将它们正确分配到它们的参数列表.

（~~我不认为矩阵可以正确分配到基本绘图例程的 x 和 y 参数，即使有匹配的行或列名。~~ 矩阵实际上是折叠向量。）

所以我认为答案是传递列表与 R 中函数式编程的实现方式最为一致。

# objective-c - 删除身体和精灵时 Box2d 滞后

> ID：12849638
> 
> 赞同：0
> 
> 时间：2012-10-11T22:37:29.297
> 
> 标签：objective-c, cocos2d-iphone, box2d

我正在开发一个游戏，其中涉及炸弹等。当炸弹爆炸时，我会打电话`world->getBodyList();`，以获取所有尸体的列表，然后足够近的尸体被摧毁。我使用`removeSpriteAndBody`BodyNode 类中的方法删除它们。

它可以正常工作，但是当炸弹爆炸并且身体/精灵被移除时，它会稍微滞后一点。我怎样才能解决这个问题？

我通过标记要删除来删除“勾选”方法中的所有内容。但是，我在这个地方确实有一些“removeBody”电话，无论我是否拿出来都没有区别。

有趣的是，它只发生在你使用炸弹的前两三个领带上。之后它就像黄油一样光滑！

# jquery - 用 jQuery 循环 JSON

> ID：12849644
> 
> 赞同：0
> 
> 时间：2012-10-11T22:38:03.710
> 
> 标签：jquery, json

我试图通过这个：

```
[
    {"leadID":"1","leadName":"Steve"},
    {"leadID":"2","leadName":"Bob"},
    {"leadID":"3","leadName":"Bill"},
    {"leadID":"4","leadName":"Jim"},
    {"leadID":"5","leadName":"James"},
    {"leadID":"6","leadName":"John"},
    {"leadID":"7","leadName":"Eric"},
    {"leadID":"8","leadName":"Tony"},
    {"leadID":"9","leadName":"Jason"},
    {"leadID":"10","leadName":"Paul"}

] 
```

我正在尝试使用 $.each 来做到这一点，但我无法做到正确。这是对控制台的测试：

```
$.each(JSON, function(k, v) {

    console.log(v[0]);

}); 
```

我确定我只是没有正确解析 JSON，但我无法弄清楚。最终我需要将数据附加到选择输入的选项中。

对此的任何帮助都会很棒。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T22:48:53.820

如果尚未解析，您需要先解析 JSON。

一些浏览器有这个原生：

```
jsonobject = JSON.parse(jsonstring) 
```

如果没有，你可以使用 jQuery

```
jsonobject = $.parseJSON(jsonstring) 
```

然后，当它是一个对象时，您可以使用 $.each 循环它

```
$.each(jsonobject, function(x,v) {
   console.log(v.leadID);
   console.log(v.leadName);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T22:40:37.920

如果你使用 $.each，它看起来像这样：

```
$.each(myJSON, function(key, value){
    console.log(value);
    console.log(value['leadID']);
}); 
```

你不需要做价值[0]。这是我通常这样做的方式：

```
for (var tk in myJSON)
{
    console.log(myJSON[tk]);
    console.log(myJSON[tk]['leadID']);
} 
```

见[http://api.jquery.com/each/](http://api.jquery.com/each/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T22:45:17.657

在您的示例中，`k`将遍历数组（`0..9`）的索引`v`并将遍历对象..

所以例如你可以这样做（评论指的是第一次迭代）：

```
$.each(JSON, function(k, v) {

    console.log(k); // 0
    console.log(v); // {"leadID":"1","leadName":"Steve"}
    console.log(v['leadID']); // "1"
    console.log(v['leadName']); // "Steve"

}); 
```

# javascript - 这个 Javascript 语句是什么意思？

> ID：12849645
> 
> 赞同：3
> 
> 时间：2012-10-11T22:38:03.843
> 
> 标签：javascript

这个 javascript 语句到底发生了什么：

```
var loadPrevious = (loadPrevious || function() {}); 
```

据我了解，变量 loadPrevious 要么是匿名函数，要么是值 loadPrevious

编辑：

好的，非常感谢您的回答和评论。但是为什么会有这样的声明：

```
var app;
loadPrevious(app = launchApplication($("#target"),0)); 
```

loadPrevious 在这里做什么？为什么要这样做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T22:39:23.773

它检查是否已经为 loadPrevious 分配了一个值。如果没有，它会为其分配一个空函数。

此语法是 C++ 或 C# 三元语法的 javascript 等价物

```
var loadPrevious = loadPrevious != null ? loadPrevious : () => {}; 
```

例如，在 C# 中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-11T22:46:06.697

该代码正在检查是否`loadPrevious`已定义，如果未定义，则将其定义为匿名函数。

这种模式在您从多个不同位置向对象添加方法的情况下很有用，例如：

方法1.js：

```
var loadPrevious = (loadPrevious || function() {});
loadPrevious.prototype.method1 = function() { return 'method1'; }; 
```

方法2.js：

```
var loadPrevious = (loadPrevious || function() {});
loadPrevious.prototype.method2 = function() { return 'method2'; }; 
```

现在您可以包含这两个文件，并且 loadPrevious 将拥有这两种方法：

```
<script src="method1.js"></script>
<script src="method2.js"></script>
<script>
    var oLoadPrevious = new loadPrevious();
    oLoadPrevious.method1(); // "method1"
    oLoadPrevious.method2(); // "method2"
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T22:39:52.817

你是对的，`loadPrevious`除非它评估为假，否则它将是值，在这种情况下它将是空的匿名函数

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-11T22:41:20.417

这是一个**或 ||** 条件权

```
var loadPrevious = loadPrevious || function() {} 
```

如果 loadPrevious 为真，则跳过下一个条件。

因此，`function(){}`只有在未定义的情况下才会分配给..

# iphone - 如何关闭所有模态视图？

> ID：12849648
> 
> 赞同：2
> 
> 时间：2012-10-11T22:38:28.133
> 
> 标签：iphone, objective-c, ios

假设我基于 A 呈现模态视图 B，然后基于 B 呈现模态视图 C。

有什么办法可以同时解雇 B 和 C 并直接返回 A 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T22:54:27.343

假设您在 XCode4.5 中使用故事板，您可以使用新的展开转场。实施

```
 -(IBAction)back:(UIStoryboardSegue*)segue 
```

在 A. 中（您可以将函数定义留空。）然后在 C 的控制器中右键单击新的退出图标并将新条目连接到将启动展开的控件。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-11T23:16:04.560

是的，我有一些解决方案，可能有点脏，但你可以解决

```
UIViewController* vc = self;

while (vc) {
    UIViewController* temp = vc.presentingViewController;
    if (!temp.presentedViewController) {
        [vc dismissViewControllerAnimated:YES completion:^{}];
        break;
    }
    vc =  temp;
} 
```

您可以从堆栈中的任何模型控制器调用它，所有这些都将被解雇。我们只是在寻找第二个，然后将其关闭。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-11T22:45:58.540

是的，你可以调用 [B dismissModalViewControllerAnimated:YES];

这将解雇 B。当然，如果从 B 提出 C，它也会被解雇。

而且，这里是相对问题，它包含完整的答案。 [iPhone - 关闭多个 ViewController](https://stackoverflow.com/questions/2944191/iphone-dismiss-multiple-viewcontrollers)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-22T06:37:04.083

如果有*2* `ViewContronllers`，那么：

`[self.presentingViewController.presentingViewController dismissViewControllerAnimated:YES completion:nil];`

如果有*3 个*ViewController，则：

`self.presentingViewController.presentingViewController.presentViewController`

# c# - 如何创建这个 Linq 函数？

> ID：12849656
> 
> 赞同：1
> 
> 时间：2012-10-11T22:39:18.107
> 
> 标签：c#, linq, dictionary, linq-to-objects

我有一个这样的对象：

```
Tuple<Question, Levels[]>

// question, { easy, medium, hard } 
```

`Levels`是一个有四个选项的枚举：Easy、Medium、Hard 和 Expert。

我希望对于每个包含元组的枚举，LINQ 函数都提供一个`Dictionary<Question, Levels>`. 例如

如果我的元组有三个级别，字典应该有三个值，

```
// question, Easy
// question, Medium
// question, Hard 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T22:44:57.153

正如其他人所指出的，这个问题不是很清楚。我已经尝试向您展示您可能想要做的各种事情：

```
var stuff = new Tuple<Question, Levels[]>[] {
      // .... 
    };

var flattened = stuff.SelectMany(tup => 
     tup.Item2.Select(Level => new { tup.Question, Level }));

var grouped = flattened.GroupBy(flat => flat.Level);

// now you can do
var easyOnes = grouped[Levels.Easy];
var mediumOnes = grouped[Levels.Medium]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T23:34:41.983

我质疑 a`Dictionary<TKey, TValue>`是否真的是你所追求的，因为这需要唯一的键。

您可能得到的最接近的可能是使用[`ToLookup<TKey, TElement>`](http://msdn.microsoft.com/en-us/library/bb549073.aspx)扩展方法：

```
var tuple = new Tuple<Question, Levels[]>(question, 
    new [] { Levels.Easy, Levels.Medium, Levels.Hard});

var questionLevels = tuple.Item2.ToLookup(level => tuple.Item1);

// questionLevels contains:
// question, Levels.Easy
// question, Levels.Medium
// question, Levels.Hard 
```

然后可以使用它来获取问题的所有级别：

```
var levels = questionLevels[question];
// levels contains:
// Levels.Easy
// Levels.Medium
// Levels.Hard 
```

# jquery - jQuery 日期选择器操作

> ID：12849658
> 
> 赞同：0
> 
> 时间：2012-10-11T22:39:20.140
> 
> 标签：jquery, jquery-ui-datepicker

我有两个日期选择器：

```
<script type="text/javascript">
    jQuery(function() {
        jQuery( '#startdatepicker' ).datepicker();
    });
</script>

<script type="text/javascript">
    jQuery(function() {
        jQuery( '#enddatepicker' ).datepicker();
    });
</script> 
```

如何对其进行修改，以使两个日期选择器的默认日期都是今天的日期？

如果开始日期被选择为不同的日期，我希望它允许选择结束日期> =开始日期。如果先修改结束日期，则允许开始日期 <= 到结束日期。

```
<td align='center'>Start Date:<input type='text' name='start_date' id='startdatepicker' /></td>
<td align='center'>End Date: <input type='text' name='end_date' id='enddatepicker'  /></td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T22:50:22.850

您可以使用 datepicker 插件的选项。[jQuery 日期选择器操作](https://stackoverflow.com/questions/12849658/jquery-date-picker-manipulations)

您还可以尝试查看之前提出的堆栈溢出问题：[如何使用今天的日期预先填充 jQuery Datepicker 文本框？](https://stackoverflow.com/questions/233553/how-do-i-pre-populate-a-jquery-datepicker-textbox-with-todays-date)

这是示例代码

```
$(document).ready(function(){
    $("#startdatepicker").datepicker({ 
    });
    var myDate = new Date();
    var month = myDate.getMonth() + 1;
    var prettyDate = month + '/' + myDate.getDate() + '/' + myDate.getFullYear();
    $("#startdatepicker").val(prettyDate);
}); 
```

# c# - Aspose.Words 跨页与表 C# MVC3

> ID：12849659
> 
> 赞同：0
> 
> 时间：2012-10-11T22:39:20.537
> 
> 标签：c#, asp.net-mvc-3, words, aspose

我有一个 MVC3 C#.Net 网络应用程序。我们正在使用 Aspose.Words 将我们的数据导出到 Word 文档中。在文档中创建的项目之一是人工汇总表。此表从页面中间开始（换句话说，它不是页面上的第一个元素，因此它的起点会因数据而异）。通常，表格会跨越到下一页，这又取决于表格上方有多少数据以及表格中有多少行。我们有一个客户的要求，如果表格跨页，我们需要以一行标题开始新页面，然后是其余的数据行。

这需要我知道：

1.  我在第一页上为表格留下了多少空间：从插入表格的点到页面末尾还剩下多少空间
2.  填满后桌子有多高

我不知道如何获取这两个数据中的任何一个。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:57:39.947

我再次完成了您的要求**我们有一个客户的要求，如果表格跨页，我们需要以一行标题开始新页面，然后是其余的数据行。**根据我的理解，您需要在放置表格的所有页面上重复标题行。

请注意，Microsoft Word 文档具有向表格添加标题行的内置功能，因此它们会在表格出现的每一页上重复出现。无需检测表格的开始和结束位置。有关详细信息，请参阅Aspose.Words for .NET 文档中的[在后续页面上指定要重复的行作为标题行。](http://www.aspose.com/docs/display/wordsnet/Specifying+Rows+to+Repeat+on+Subsequent+Pages+as+Header+Rows)

# jquery - Jquery Checkbox 淡入淡出不起作用。但在小提琴中工作

> ID：12849672
> 
> 赞同：-1
> 
> 时间：2012-10-11T22:40:06.313
> 
> 标签：jquery

我尝试了一个小代码片段来隐藏表单 div 标签并在单击复选框时淡入。

请看一下代码

```
$('checkbox').change(function () {
    if ($('[id=vfb-i-would-like-samples-in-24-1]').attr("checked"))
    {
        alert("test");
        $('.vfb-timber-34').fadeIn();
        return;
    }
   $('.vfb-timber-34').fadeOut();
}); 
```

但是当我在实时站点中使用它时，它不起作用。有人能帮我吗。

这是小提琴网址 [http://jsfiddle.net/addyosmani/ND428/](http://jsfiddle.net/addyosmani/ND428/)

这是我的网站网址 [http://conceptclick.webande-commercesolutions.com/?page_id=2238](http://conceptclick.webande-commercesolutions.com/?page_id=2238)

当您转到底部的“我想要样品”时。有 3 个复选框 Timber Aluminum 和 Echo Panel.. 当一个人点击 Timber 时，div 应该淡入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T22:53:06.607

你`$('checkbox').change(function () {`永远不会被激活。您可能会在复选框出现在屏幕上之前调用它。尝试将其包装在

```
jQuery(document).ready(function () {
}); 
```

堵塞。

顺便说一句，这很容易确定，方法是在 Firebug 函数的第一行设置断点并单击复选框。使用 Firebug 进行调试对于 Javascript 开发人员来说是一项非常有用的技能——你应该学习如何去做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T22:56:21.270

`$('checkbox')`会找到`<checkbox>`元素。没有这样的东西，所以没有任何事件处理程序附加到它上面。

试试`$('.checkbox')`吧。保罗提到的`ready`事情也不会受到伤害。:)

# eclipse - 为 Xampp 创建一个新的 Eclipse 项目

> ID：12849673
> 
> 赞同：2
> 
> 时间：2012-10-11T22:40:16.997
> 
> 标签：eclipse, xampp

你们不会相信的。在 Internet 上，没有任何关于创建新的 NON REMOTE Eclipse 项目的文档。它的疯狂的东西。我要做的就是创建一个指向本地 xampp 目录的本地 Eclipse 项目。不可能的。

**问题：**如何在 Windows 上创建一个指向本地 xampp 目录的非远程本地 eclipse 项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T19:25:25.227

只需将您的工作区（在 Eclipse 文件->切换工作区->其他）更改为 xampp 中的目录并创建您的项目。而已 ;）

# android - 我无法解决堆栈跟踪错误的问题

> ID：12849676
> 
> 赞同：18
> 
> 时间：2012-10-11T22:40:26.453
> 
> 标签：android, stack-trace

我显然在应用程序中的三星 Nexus 上的 1 个活动存在问题，我不明白是什么实际导致了这个问题。

```
java.lang.ArrayIndexOutOfBoundsException: length=244; index=1753
at android.text.MeasuredText.addStyleRun(MeasuredText.java:168)
at android.text.MeasuredText.addStyleRun(MeasuredText.java:204)
at android.text.StaticLayout.generate(StaticLayout.java:281)
at android.text.StaticLayout.<init>(StaticLayout.java:140)
at android.text.StaticLayout.<init>(StaticLayout.java:80)
at android.text.StaticLayout.<init>(StaticLayout.java:59)
at android.widget.TextView.makeSingleLayout(TextView.java:5901)
at android.widget.TextView.makeNewLayout(TextView.java:5741)
at android.widget.TextView.onMeasure(TextView.java:6098)
at android.view.View.measure(View.java:15172)
at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4814)
at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1390)
at android.widget.LinearLayout.measureHorizontal(LinearLayout.java:1038)
at android.widget.LinearLayout.onMeasure(LinearLayout.java:576)
at android.view.View.measure(View.java:15172)
at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4814)
at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1390)
at android.widget.LinearLayout.measureVertical(LinearLayout.java:681)
at android.widget.LinearLayout.onMeasure(LinearLayout.java:574)
at android.view.View.measure(View.java:15172)
at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4814)
at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1390)
at android.widget.LinearLayout.measureVertical(LinearLayout.java:681)
at android.widget.LinearLayout.onMeasure(LinearLayout.java:574)
at android.view.View.measure(View.java:15172)
at android.widget.ScrollView.measureChildWithMargins(ScrollView.java:1196)
at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
at android.widget.ScrollView.onMeasure(ScrollView.java:318)
at android.view.View.measure(View.java:15172)
at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4814)
at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1390)
at android.widget.LinearLayout.measureVertical(LinearLayout.java:681)
at android.widget.LinearLayout.onMeasure(LinearLayout.java:574)
at android.view.View.measure(View.java:15172)
at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4814)
at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
at android.view.View.measure(View.java:15172)
at android.widget.LinearLayout.measureVertical(LinearLayout.java:833)
at android.widget.LinearLayout.onMeasure(LinearLayout.java:574)
at android.view.View.measure(View.java:15172)
at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4814)
at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2148)
at android.view.View.measure(View.java:15172)
at android.view.ViewRootImpl.performMeasure(ViewRootImpl.java:1848)
at android.view.ViewRootImpl.measureHierarchy(ViewRootImpl.java:1100)
at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1273)
at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:998)
at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4212)
at android.view.Choreographer$CallbackRecord.run(Choreographer.java:725)
at android.view.Choreographer.doCallbacks(Choreographer.java:555)
at android.view.Choreographer.doFrame(Choreographer.java:525)
at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:711)
at android.os.Handler.handleCallback(Handler.java:615)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4745)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
at dalvik.system.NativeStart.main(Native Method) 
```

这是我的客户告诉我的导致问题的活动。这是唯一的问题。

```
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.Menu;

public class Protocols03_04Activity extends Activity 
{
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.protocols03_04);

    }
    //Options Menu
    @Override
    public boolean onCreateOptionsMenu(Menu menu)
    {
        super.onCreateOptionsMenu(menu);
        getMenuInflater().inflate(R.menu.optmenu, menu);
        menu.findItem(R.id.medcom_optmenu_item).setIntent(new Intent(this, CallMedcom.class));
        menu.findItem(R.id.dispatch_optmenu_item).setIntent(new Intent(this, CallDispatch.class));
        menu.findItem(R.id.settings_optmenu_item).setIntent(new Intent(this, ProtocolsSettingsActivity.class));
        menu.findItem(R.id.mmenu_optmenu_item).setIntent(new Intent(this, ProtocolsMMenuActivity.class));
        menu.findItem(R.id.gps_optmenu_item).setIntent(new Intent(this, GPSActivity.class));
        menu.findItem(R.id.search_optmenu_item).setIntent(new Intent(this, SearchActivity.class));
        return true;
    }
} 
```

我试图重现这个问题，但我做不到。我尝试了 2 款不同的摩托罗拉手机。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-11T22:49:47.650

似乎是 TextView 的一个已知错误。[在此处](http://code.google.com/p/android/issues/detail?id=35466)和[此处](http://code.google.com/p/android/issues/detail?id=35412)检查类似问题

帖子里提到了银河系。第一个问题标记为将来发布，第二个问题似乎已修复。

更新

djmedic 在[这里找到了解决方法](https://gist.github.com/3424004)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-08-20T12:26:01.030

更新 Android Studio（或 sdk ..）后遇到同样的问题。我可以通过设置 EditText 的 inputType 来修复它。

```
android:inputType="text" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-26T09:33:44.157

我有同样的问题。它不仅是 jellyBean 的问题。它与将跨度标签添加到 html 转换的纯文本中导致 indexOutOfBounds 异常的文本视图有关。[此链接](https://code.google.com/p/android/issues/detail?id=35466)有一个解决方法。

用此自定义 textView 替换您的文本视图。如果跨度标签问题出现，它会捕获它并以纯文本形式显示内容。

```
public class PatchedTextView extends TextView {
public PatchedTextView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
}
public PatchedTextView(Context context, AttributeSet attrs) {
    super(context, attrs);
}
public PatchedTextView(Context context) {
    super(context);
}
@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    try{
        super.onMeasure(widthMeasureSpec, heightMeasureSpec);
    }catch (ArrayIndexOutOfBoundsException e){
        setText(getText().toString());
        super.onMeasure(widthMeasureSpec, heightMeasureSpec);
    }
}
@Override
public void setGravity(int gravity){
    try{
        super.setGravity(gravity);
    }catch (ArrayIndexOutOfBoundsException e){
        setText(getText().toString());
        super.setGravity(gravity);
    }
}
@Override
public void setText(CharSequence text, BufferType type) {
    try{
        super.setText(text, type);
    }catch (ArrayIndexOutOfBoundsException e){
        setText(text.toString());
    }
} 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-02T15:55:43.330

我的经验可能对那些不想在他们的项目中添加自定义 TextView 的朋友有所帮助。

首先，我可以在 Android 模拟器（4.1.2，API 16）中重现这个错误。在此之后，我决定找出导致此错误的原因。显然 - 一些格式（这会导致创建“跨度”）。事实证明，就我而言，在两个地方替换就足够了，例如：

`\"<b>@username</b>\"`

有了这个：

`\"@username\"`

# android - Eclipse 错误：Android 库更新错误

> ID：12849679
> 
> 赞同：1
> 
> 时间：2012-10-11T22:40:33.437
> 
> 标签：android, eclipse, eclipse-plugin

我正在尝试使用eclipse“Build id：20120920-0800”为android设置开发。我按照 developer.Android.com 上的说明如何使用 eclipse 设置 android。我首先从 eclipse Help->"Install New Software" 下载 android sdk、oracle java 8、eclipse mobile 并安装插件：DDMS、Dev Tools 和 ndk。无论我在启动 eclipse 并加载 android 项目时做什么，我都会收到“Android Library Update”错误。我试过以不同的顺序删除和重新安装所有东西。我确实发现在安装 NDK 后我确实收到了库更新错误。有一次我遇到了 C/C++ 索引器错误，但是我再也看不到那个了。所以我想知道是否有人知道导致库更新错误的确切原因。有关更新错误的详细信息始终是

“在“Android 库更新”期间发生内部错误。java.lang.NullPointerException”

哦，我已经尝试了多种解决方案，从删除和重新安装 android sdk 以及清理项目解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T23:07:56.007

在使用 NDK 工具链之前，首先使用 AndroidSDK 配置和测试 Eclipse。构建一个示例应用程序来测试您当前的模拟器设置。如果要构建到手机，请将其连接到计算机（如果需要，请安装适当的驱动程序并在手机上启用调试）。

尝试这个：

*   使用标准 Eclipse（当前一个 - Eclipse Classic 4.2.1）
*   下载并安装适用于 Eclipse 的 ADT 插件（确保选择*“DeveloperTools”*）
*   通过选择 AndroidSDK 目录配置 ADT 插件
*   添加 AVD（Android 虚拟设备）
*   通过构建和运行应用程序或将手机连接到计算机来测试您的模拟器
*   安装和配置 NDK

并且知道这一点：

> 一般来说，你应该只在它对你的应用程序必不可少的情况下使用 NDK——永远不要因为你只是喜欢用 C/C++ 编程。

# django - 什么是防止memcached CacheKeyWarning 的好/结构化方法？

> ID：12849681
> 
> 赞同：4
> 
> 时间：2012-10-11T22:40:47.373
> 
> 标签：django, caching, memcached

我想知道是否有人知道一种方便的方法或方法来确保您传递的密钥`django.core.cache.set()`或`cache.get()`正常。

来自[https://docs.djangoproject.com/en/1.3/topics/cache/#cache-key-warnings](https://docs.djangoproject.com/en/1.3/topics/cache/#cache-key-warnings)：

> Memcached 是最常用的生产缓存后端，它不允许缓存键长于 250 个字符或包含空格或控制字符，使用此类键会导致异常。

我在`md5_constructor()`这里找到了这个功能：[https](https://github.com/django/django/blob/master/django/utils/hashcompat.py) ://github.com/django/django/blob/master/django/utils/hashcompat.py ，

也许一种方法是 md5-ifiy 你总是使用的密钥？不是 100% 确定这是否安全。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T13:11:06.670

您可能想要使用自定义键功能[https://docs.djangoproject.com/en/dev/ref/settings/#std:setting-CACHES-KEY_FUNCTION](https://docs.djangoproject.com/en/dev/ref/settings/#std:setting-CACHES-KEY_FUNCTION)

在您的设置中设置它：

```
CACHES = {
    'default': {
        'BACKEND': 'django.core.cache.backends.memcached.MemcachedCache',
        'KEY_FUNCTION': 'path.to.my.make_key',
        'LOCATION': [
            '127.0.0.1:11211',
        ]
    }
} 
```

我会使用类似的东西：

```
from django.utils.encoding import smart_str

def _smart_key(key):
    return smart_str(''.join([c for c in key if ord(c) > 32 and ord(c) != 127]))

def make_key(key, key_prefix, version):
    "Truncate all keys to 250 or less and remove control characters"
    return ':'.join([key_prefix, str(version), _smart_key(key)])[:250] 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-12T01:15:01.620

1.  `md5_constructor`在`hashlib.md5`标准库中，它的`digest`方法可以返回符合长度限制的安全密钥。如果您的原始密钥长度大于 250，您应该使用它或其他人来确保密钥安全。
2.  对于 origin 键中的每个字符，如果没有，请确保`ord(character) >= 33`将 unsafe 字符替换为下划线或您喜欢的其他安全字符。

# css - 如何自定义 Twitter 配置生成的小部件？

> ID：12849685
> 
> 赞同：0
> 
> 时间：2012-10-11T22:41:15.163
> 
> 标签：css, widget, customization

我想知道如何自定义 Twitter 配置 (https://twitter.com/settings/widgets) 生成的小部件。我想更改 CSS（对齐方式、大小、填充等...），可以吗？

最好的问候，安德烈萨

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T11:46:30.830

目前没有。

引用自[https://dev.twitter.com/docs/embedded-timelines](https://dev.twitter.com/docs/embedded-timelines)

> **自定义选项**
> 
> 嵌入式时间线可用于定制的浅色和深色主题。浅色主题适用于使用白色或浅色背景并遵循 twitter.com 美学的页面，而深色主题适用于使用黑色或深色背景且看起来更像 Tweetdeck 的页面。
> 
> 与您的 twitter.com 个人资料一样，您可以为嵌入的时间线选择自定义链接颜色，以便内容与您网站的链接相匹配，并融入您网站的调色板。
> 
> 目前没有其他自定义选项可用。

# python - 重复python函数并返回值

> ID：12849691
> 
> 赞同：4
> 
> 时间：2012-10-11T22:41:57.620
> 
> 标签：python

如果不满足某个标准，我试图让一个功能重复。例如：

```
def test():
    print "Hello",
    x = raw_input()
    if x in '0123456789':
        return x
    test() 
```

在这个程序中，如果你第一次输入一个数字，它会返回这个数字。如果您键入一些非数字，它将根据需要重复。但是，如果您输入一些非数字，然后输入一个数字，它将不会返回任何内容。为什么会这样？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-11T22:43:56.270

您需要`return test()`在函数的尾部返回对 test() 的有效调用返回的值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-11T23:10:14.170

您进行测试调用本身的方式是错误的方式。每次你的程序重新启动函数时，你都会用完另一层堆栈。即使用户从未输入这些字符之一，最终程序也会停止（崩溃）。

```
def test():
    while True:
        print "Hello",
        x = raw_input()
        if x in '0123456789':
            return x 
```

# jquery - jQuery Ajax 函数返回错误：Uncaught TypeError: Object # 没有“完成”的方法

> ID：12849694
> 
> 赞同：2
> 
> 时间：2012-10-11T22:42:11.507
> 
> 标签：jquery, ajax

使用 jQuery 的 ajax 函数时，我不断收到错误消息：

未捕获的类型错误：对象 # 没有“完成”方法

让我感到困惑的是，它在过去 3 天里运行良好。而且我做了一些更改，所以我想这一定是我的错，但它没有返回语法错误，就像它告诉我 jquery ajax 函数错误一样，那不可能？

```
$.ajax({
    type: "POST",
    url: "ajax/cms.php",
    data: {
        job: 'edit_staff',
        id: id,
        name: staff_name,
        description: staff_description
    }
}).done(function(returned)
{
    var message = 
    $('<div class = "edit_status_message_fees">' + '<span>Success: </span>' + returned + '</div>');
    message.appendTo('.edit_team');

    $('.edit_status_message_fees')
    .fadeIn('normal',
    function()
    {
        if(returned == "Database updated!")
        {
            $.post('ajax/get_new_staff_details.php', function(new_team)
            {
                $('.theteam').html(new_team); // Update main content area
            });

            $('.edit_team')
            .delay('500')
            .fadeOut('normal', function()
            {
                $('.edit_team').remove();
            })

            $('.list_team')
            .delay('500')
            .fadeOut('normal', function()
            {
                $('.list_team').remove();
            })

            $('.edit_cover')
            .delay('500')
            .fadeOut('normal', function()
            {
                $('.edit_team').remove();
            })
        }

    })
}); // END ajax 
```

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T22:49:15.643

我相信你使用的是旧的 jQuery 版本，升级它，或者做这样的事情：

```
 $.ajax({
      url: "ajax/cms.php",

      ...

      complete: function() { 
        //your callback body
      }
}); 
```

# c# - 如何将此 SQL 转换为 LINQ

> ID：12849697
> 
> 赞同：1
> 
> 时间：2012-10-11T22:42:29.463
> 
> 标签：c#, linq, tsql

我正在尝试将以下 SQL 转换为 Linq，但是当我尝试应用 min 时会感到困惑。基本上我有一个包含梁及其允许负载的表格。然后我查询数据库并按类型查找具有所需强度的最小梁。以下 t-SQL

```
select
    sed.SEDetailID
from
    dbo.StructuralElementDetail sed
    inner join (select StructuralElementID, min(Ix) as MinIX from dbo.StructuralElementDetail where Ix >= @iRequired group by StructuralElementID) o
        on sed.StructuralElementID = o.StructuralElementID
            and sed.Ix = o.MinIX
order by
    StructuralElementID,
    Sequence; 
```

按类型返回具有所需强度的最小梁。

我已经将梁加载到由其 ID 键入的字典中，因此认为我应该能够查询该对象，而不是再次调用数据库。

我的字典是

```
Dictionary<int, Beam>; 
```

我正在尝试这样的事情，但对我如何获得每种类型的最小光束感到困惑。

```
 var Beams = db.Values.Where(specificBeam => specificBeam.Ix >= iRequired)
                .GroupBy(specificBeam => specificBeam.ElementType)
                    .Select(sb => new { sb.Key, MinIActual = sb.Min(specificBeam => specificBeam.Ix) }); 
```

任何指针？我可以嵌套一个 First 与

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T23:11:26.823

现在已在[此处](http://pastebin.com/3LbqK3Kz)的 LINQPad 示例中对此进行了测试。

```
var smallestBeamForTypes = 
    from anyBeam in db.Values
    where anyBeam.Ix >= iRequired
    group anyBeam by anyBeam.ElementType into beamTypeGroup
    let minIx = beamTypeGroup.Min(beam => beam.Ix)
    select new {
        ElementType = beamTypeGroup.Key,
        SmallestBeam = beamTypeGroup.First(beam => beam.Ix == minIx)
    }; 
```

然后你可以像这样循环：

```
foreach(var smallestBeamForType in smallestBeamForTypes)
{
    Console.WriteLine("For the element type {0} the smallest beam is {1}",
        smallestBeamForType.ElementType, smallestBeamForType.SmallestBeam);
} 
```

# ios - 为什么自定义字体通常无法在 iOS 中正确显示？

> ID：12849702
> 
> 赞同：9
> 
> 时间：2012-10-11T22:42:57.703
> 
> 标签：ios, fonts, custom-font

我用自定义字体创建了许多不同的应用程序。我用了大约六种不同的，都来自不同的来源。他们每个人在 iOS 中显示时都有问题。他们中的一些人在 UILabel 中绘制了高于或低于相同大小的系统字体。与他们在 UITextFields 中的绘制方式相比，其他人在 UILabels 中的绘制方式不同，在 UITextFields 中绘制得越来越小。几乎所有它们在 UITextFields 被编辑时和没有被编辑时都不同，当 UITextField 进入编辑模式时，会产生文本向下跳跃的效果。对于需要像素完美的精细细节工作的人来说，这是非常糟糕的。

我的问题很简单——**这些字体中的什么特别导致了这些类型的问题？** 系统字体是否有一些其他字体没有的特定属性？

为了获得额外的荣誉，如果可能的话，我很想听听任何可以为每种字体解决这些问题的通用解决方案。我的希望是，如果我能理解为什么会发生这种情况，我可以创建一个脚本来预处理字体，然后再将其与应用程序打包，以便它正常工作。

这些问题很容易重现，但由于我知道有人会问，我将列出一些对我产生问题的特定字体：

*   PT 无粗体
*   Avenir Next LT Pro 中浓缩
*   科罗廖夫浓缩介质

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T03:19:50.750

您是否尝试过使用[Apple Font Tool Suite](http://developer.apple.com/fonts/)命令行实用程序？您可以使用它调整字体的基线属性（我承认这不能回答您问题的“为什么”部分，但是这些工具可能会使问题变得毫无意义）。[这里](https://stackoverflow.com/questions/7535498/uibutton-custom-font-vertical-alignment)接受的答案很好地解释了它们的用法。

# .htaccess - 重置子文件夹的 htacces

> ID：12849703
> 
> 赞同：10
> 
> 时间：2012-10-11T22:43:18.853
> 
> 标签：.htaccess

我的根文件夹中有一个 htacces 文件，其中包含一些基本代码。但我希望在目录“voxelforum.com”中忽略所有这些说明。我怎样才能做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-04-22T18:24:10.890

奇怪的是，您可能首先需要关闭重写，然后再重新打开

将`.htaccess`文件放入子文件夹并添加以下 2 行：

```
RewriteEngine Off
RewriteEngine On 
```

在下面添加您的重写规则

* * *

这对我有用，而简单地添加`RewriteEngine On`没有。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-11T22:54:57.920

这取决于您要覆盖哪些规则：

如果要禁用重写规则，则可以将 .htaccess 文件放在包含 的子文件夹中`RewriteEngine On`，父文件夹的规则将被禁用（技术上，替换）。

同样，如果您想禁用子文件夹的身份验证，您可以创建一个包含 .htaccess 的`Satisfy Any`.

.htaccess 规则向上级联，因此 Apache 将在当前文件夹中查找 .htaccess 文件并为其使用规则，然后检查父文件夹等。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T14:44:09.297

将 .htaccess 文件放入子文件夹并仅添加此行：

重写引擎开启

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-11T22:47:56.250

从根文件夹中删除您的 htaccess 并将其移动到您的子文件夹中。据我所知，没有办法为根文件夹禁用 htaccess。

编辑：检查[AllowOverride](https://httpd.apache.org/docs/2.2/mod/core.html#allowoverride)

# c - 从 C linux 中 fork 之前创建的子进程访问字符串数组

> ID：12849708
> 
> 赞同：0
> 
> 时间：2012-10-11T22:43:36.550
> 
> 标签：c, linux, process, multidimensional-array

我有三个进程，一个父亲和两个儿子，因为儿子们继承了在我分叉之前创建的所有东西我如何访问我之前从儿子或父亲那里创建的字符串数组？我想访问我在使用 string_hashes 的名称和来自儿子和父亲的哈希之前创建的两个字符串数组？谢谢您的帮助...

```
#include <unistd.h>
#include <sys/wait.h>
#include <sys/types.h>
#include <stdio.h>
#include <strings.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <errno.h>

#define PIPE_NAME   "np_workmaster"
#define max_chars_string 1000
#define n_childs 2

typedef struct
{
  int a;
  int b;
} numbers;

pid_t childs[n_childs];

void read_lines(char * filename, char (*pointer)[max_chars_string],int init_read,int n_lines);
void get_strings_hash(char (*pointer_strings)[max_chars_string],char (*pointer_hashes)[max_chars_string],int total_lines);

void worker(){ // meter as funcoes de ler passwords no filho
    char * ant = "";
    char hash_char;

    printf("[%d] I'm the son!\n", getpid());
    printf("[%d] My parent is: %d\n", getpid(), getppid());
    exit(0);
}

void pparent(){// sera o ultimo processo a terminar mostrando as passwords ja recebidas do dispatcher que recebe dos outros filhos
    printf("[%d] I'm the father!\n", getpid());
    //dispatcher() // criar funcao dispatcher que envia dados ao outro processo...

  int fd;
  if ((fd=open(PIPE_NAME, O_WRONLY)) < 0)
  {
    perror("Cannot open pipe for writing: ");
    exit(0);
  }

  // Do some work  
  while (1) {
       // here i  want to access arrays strings_hashes and hashes from the father and sons

    printf("[CLIENT] Sending (%d,%d) for adding\n", n.a, n.b);
    write(fd, &n, sizeof(numbers));
    sleep(2);
  }

  return 0;

}

int main(int argc, char **argv)
{
    char *filename;
    int status;//status do processos filho
    int resources[2];// numero de linhas que cada processo tem de ler
    //char * chave_iniciadora = "";
    int n_lines; //numero de linhas do ficheiro
    int i = 0;

    filename = (char*)malloc(strlen(argv[1])*sizeof(char)+1);

    if(argc !=3){
        fprintf(stderr, "Usage : %s [text_file] [cores]",argv[0]);
        exit(0);
    }

    strcpy(filename,argv[1]);
    n_lines = count_lines(filename); // contem o numero de linhas
    //definicao arrays
    char strings_hashes[n_lines][max_chars_string];//aray de string com as strings lidas do ficheiro
    char hashes[n_lines][max_chars_string]; // array de strings com as hashes
    char * pointer_string = &strings_hashes[0][0]; // ponteiro para o inicio do array das strings lidas do ficheiro
    char * pointer_hashes = &hashes[0][0];//ponteiro para o inicio do array das hashes

    //funcoes
    share_resources(atoi(argv[2]),n_lines,resources);
    read_lines(filename,strings_hashes,0,n_lines); // le as strings do ficheiro e passa para o array
    get_strings_hash(strings_hashes,hashes,n_lines);
     //
    for(i = 0; i<n_lines;i++){
        printf("%s",strings_hashes[i]);
    }
    for(i = 0; i<n_lines;i++){
        printf("%s",hashes[i]);
    }

    //   
  for(i = 0; i <atoi(argv[2]);i++){
        childs[i] = fork();
        if(childs[i] == -1){
           perror("Failed to fork");
           return 1;
       }
       if (childs[i] == 0)
       {
          worker();
       }
       else
       {
          pparent();
          wait(&status);
          if (!status)
            printf("\nOK\n");
          else 
            printf("\nSomething is wrong...\n");
    }
   }
  return 0;
}

///////////////////////////////////////////////////////////////////

//funcionar
void get_strings_hash(char (*pointer_strings)[max_chars_string],char (*pointer_hashes)[max_chars_string],int total_lines)//vai ao array de strings e corta a parte de hash e mete num array
{
    int i = 0;
    char *strings;
    char *hash;

    for(i = 0;i<total_lines;i++){
            strings = (char*)malloc(strlen(pointer_strings)*sizeof(char)+1);
            strcpy(strings,*pointer_strings);
            hash = (char*)malloc(strlen(pointer_strings)*sizeof(char)+1);
            find_hash(strings,hash);
            strcpy(*pointer_hashes,hash);
        pointer_hashes++;
        pointer_strings++;
    }

}

//funcionar
int count_lines(char * filename){ 
    FILE *fp;
    char str[max_chars_string];
    int i =0;

    if((fp = fopen("ficheiro_leitura.txt", "r"))==NULL) {
      printf("Cannot open file.\n");
      exit(1);
    }

    while(!feof(fp)) {
        while(fgets(str, sizeof str, fp)) {
           i++;
      }

  }
  fclose(fp);
  return i;
}
//funcionar
void read_lines(char * filename, char (*pointer)[max_chars_string],int init_read,int n_lines){ 
    FILE *fp;
    char str[max_chars_string];
    int i =0;

    if((fp = fopen(filename, "r"))==NULL) {
      printf("Cannot open file.\n");
      exit(1);
    }

    if(init_read>0 && init_read<=n_lines){
     for(i = 0;i<init_read;i++){
         fgets(str, sizeof str, fp);
       for(i = init_read;i<n_lines;i++){
           fgets(str, sizeof str, fp);
           strcpy(*pointer, str); //copia para a posicao actula do ponteiro
           pointer++;
       }
     }
    }
    if(init_read<=n_lines && init_read==0){
       for(i = init_read;i<n_lines;i++){
            fgets(str, sizeof str, fp);
           strcpy(*pointer, str); //copia para a posicao actula do ponteiro
           pointer++;
       }
     }

  fclose(fp); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T23:05:01.800

你不必做任何特别的事情。目前，您已将它们定义在`main()`. 要么全局定义它们，要么将它们传递给您的`worker()`（即子）函数。

请记住，它们现在是同一事物的 3 个独立副本，因此如果一个进程更改它们，这些更改将不会反映在其他进程中。如果这是您的意图，那么将它们放在共享内存中并用互斥锁保护它们可能最容易。

# c - sh：gnuplot：Xcode 中找不到命令

> ID：12849711
> 
> 赞同：1
> 
> 时间：2012-10-11T22:43:56.013
> 
> 标签：c, path, pipe, gnuplot

尝试在一个简单的 C 程序中打开通往 Gnuplot 的管道，使用

```
FILE *pipe=popen("gnuplot - persist", "w"); 
```

收到上述错误。我已经使用 Macports 安装了 Gnuplot，并且 gnuplot 命令可以使用 bash 终端直接运行，但我无法通过上面的代码 (sh) 访问它。

我尝试添加带有 environment.plist 文件的 .MacOSX（我在网上找到的一个建议），但我似乎无法得到任何工作（在代码中使用 Gnuplot 的显式位置似乎对我也不起作用）。抱歉，如果这是一个明显的问题，我对编程很陌生，我只想绘制一些图表！谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T21:11:49.087

如果您使用 MacPorts 安装，则 gnuplot 可能位于 /opt/local/bin/gnuplot 中。但是您可以在终端中使用“which gnuplot”进行检查。尝试

```
gnuplot = popen("/opt/local/bin/gnuplot --persist", "w");
if (gnuplot != NULL)
  fprintf(gnuplot, "plot sin(1/x)\n"); 
```

例如。在“persist”之前，您的命令字符串中有一个奇怪的空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T23:36:08.070

你如何开始你的程序？你改变`PATH`变量吗？`popen`做之前

```
printf("PATH=%s\n", getenv("PATH")); 
```

这是什么结果？

# asp.net - ASP .NET MVC 4 远程数据库上键“attachdbfilename”的值无效

> ID：12849712
> 
> 赞同：0
> 
> 时间：2012-10-11T22:43:55.790
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4

所以。

起初，我将连接字符串添加到远程服务器 MSSQL Server 2008 R2, 10.50.1600：

```
<add name="MySQLConnection" connectionString="server=xxx.x.xx.xx;initial catalog=xxxxx;user id=sa;password=xxxxxxxxxxx;"/> 
```

然后，我在服务器端的 .NET 4.0 中使用 aspnet_regsql 配置了该远程数据库，并添加了自定义成员资格（因为 inbuild 不想使用 WSAT）。

```
<membership
  defaultProvider="SqlProvider"
  userIsOnlineTimeWindow="20">
  <providers>
    <clear />
    <add name="SqlProvider"
        type="System.Web.Security.SqlMembershipProvider"
        connectionStringName="MySQLConnection"
        enablePasswordRetrieval="false"
        enablePasswordReset="true"
        requiresQuestionAndAnswer="true"
        passwordFormat="Hashed"
        applicationName="/" />
  </providers>
</membership> 
```

所以，现在我可以使用 WSAT 配置我的应用程序，但无法在登录或注册页面上输入，出现错误：

```
System.ArgumentException: Invalid value for key 'attachdbfilename'.

Line 32:                     using (var context = new UsersContext())
Line 33:                     {
Line 34:                         if (!context.Database.Exists())
Line 35:                         {
Line 36:                             // Create the SimpleMembership database without Entity Framework migration schema 
```

**解决了：**

问题出在这里：

```
public class UsersContext : DbContext
{
    public UsersContext()
        : base("DefaultConnection")
    {
    }

    public DbSet<UserProfile> UserProfiles { get; set; }
} 
```

我不需要自定义成员资格等 - 只需为我的连接字符串设置当前 DefaultConnection 名称，或在此处更改为 MySQLConnectionString。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T22:58:09.040

attachdbfilename 对远程数据库无效。它说您的连接名称是 MySQLConnection，但在您的成员资格中，您指定了一个连接字符串“dbSkazkiEntities”。

是否有多个连接字符串？

编辑：

哇。好吧，你有很多事情搞砸了。首先，您使用的是 SimpleMembership。SimpleMembership 不使用在您的 Web.Config 中配置的成员资格提供程序。它完全没有任何作用。

其次，在 Filters\InitializeSimpleMembershipAttribute.cs 文件中配置了 SimpleMembership，其中有一行说：

```
WebSecurity.InitializeDatabaseConnection("DefaultConnection", "UserProfile", "UserId", 
    "UserName", autoCreateTables: true); 
```

第一个参数告诉 SimpleMembership 使用哪个连接字符串，它被称为 DefaultConnection。DefaultConnection 是在 machine.config 中定义的备用连接，该连接默认使用 localdb，它具有 attachdbfilename 属性。

您需要将上面的行改为您的 MySQLConnection，并删除您创建的 MembershipProvider。

接下来是 UsersContext 也使用默认连接字符串定义。也改变它。

# c - 尝试在 C 中计算执行时间时总是得到 0.00

> ID：12849713
> 
> 赞同：0
> 
> 时间：2012-10-11T22:44:00.897
> 
> 标签：c, time, clock

嘿，我正在尝试计算一个简单的多线程程序在 UBUNTU 上的执行时间。尽管我研究并使用了各种方法，但我总是得到 0.0000 的值。这是我的简单代码

```
#include <stdlib.h>
#include <stdio.h>
#include <pthread.h>
#include <time.h>

clock_t startm, stopm;
#define START if ( (startm = clock()) == -1) {printf("Error calling clock");exit(1);}
#define STOP if ( (stopm = clock()) == -1) {printf("Error calling clock");exit(1);}
#define PRINTTIME printf( "%6.9f seconds used by the processor.\n", ((double)stopm-startm)/CLOCKS_PER_SEC);

void* thread_function(int);
void function();

int total=0;
int counter;

pthread_mutex_t mutex1=PTHREAD_MUTEX_INITIALIZER;

int main(int argc, char* argv[]) {

    START
    counter = atoi(argv[1]);
    function();
    STOP
    PRINTTIME
    return;
}

void function(){
    int i;

    pthread_t t_array[counter];

    for(i=0; i<counter; i++){
        pthread_create(&t_array[i], NULL, thread_function, i);
    }

    for(i=0; i<counter; i++){
        pthread_join(t_array[i],NULL);
    }
    printf("Total = %d\n", total);
}

void* thread_function(int index){

   pthread_mutex_lock( &mutex1 );

   printf("Index : %d\n", index);
   total++;
   usleep(100000);

   pthread_mutex_unlock( &mutex1 );

} 
```

如果您能提供帮助，我将不胜感激，无论如何，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T00:13:06.223

看起来您想在代码中为函数计时。考虑 gettimeofday()

```
#include <sys/types.h>
#include <sys/time.h>
#include <stdlib.h>
#include <stdio.h>

double now(void)
{
   struct timeval tv;
   double retval=0;
   gettimeofday(&tv, NULL);
   retval=tv.tv_usec;
   retval+= (double)tv.tv_usecs / 1000000.;
   return retval;
}

int main()
{
   double start=now();
   // run code here
   printf("elapsed time = %.6f"\n", now() - start);
   return 0;

}| 
```

# c - 是否有一种类型安全的方法来获取 C 中数组的元素计数？

> ID：12849714
> 
> 赞同：5
> 
> 时间：2012-10-11T22:44:02.317
> 
> 标签：c, arrays, visual-c++, c89

在 C 中获取数组元素计数的常用方法如下：

```
#define COUNTOF(arr) (sizeof(arr) / sizeof(arr[0])) 
```

这会产生一个积分常数表达式，这也是一个非常好的加分项。

问题是它不是类型安全的：`int* i; COUNTOF(i); /* compiles :( */`. 在实践中，这应该很少出现，但为了正确起见，最好让这个类型安全。

* * *

在 C++03 中这很容易（在 C++11 中更容易，留给读者作为练习）：

```
template <typename T, std::size_t N>
char (&countof_detail(T (&)[N]))[N]; // not defined

#define COUNTOF(arr) (sizeof(countof_detail(arr))) 
```

这使用模板推导来获取`N`数组的大小，然后将其编码为类型的大小。

但是在 C 中我们没有那种语言特性。这是我制作的小框架：

```
// if `condition` evaluates to 0, fails to compile; otherwise results in `value`
#define STATIC_ASSERT_EXPR(condition, value) \
        (sizeof(char[(condition) ? 1 : -1]), (value))

// usual type-unsafe method
#define COUNTOF_DETAIL(arr) (sizeof(arr) / sizeof(arr[0]))

// new method:
#define COUNTOF(arr)                            \
        STATIC_ASSERT_EXPR(/* ??? */,           \
                           COUNTOF_DETAIL(arr)) \ 
```

我可以投入什么`/* ??? */`来获得我想要的行为？或者这是不可能的？

我更喜欢 MSVC（即 C89）中的答案，但为了好奇，任何明确的答案都可以。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T00:09:18.920

这是我的第二个回答。它提供了两种解决方案。

第一个解决方案需要 gcc 扩展；OP 确实说他更喜欢在 MSVC 中工作的答案，但“任何明确的答案都可以”。

第二种解决方案从 ouah [https://stackoverflow.com/a/12784339/318716](https://stackoverflow.com/a/12784339/318716)的出色答案中窃取了想法，并且可能更便携。

我们从经典定义开始：

```
#define NUMBER_naive(x) ((int)(sizeof(x) / sizeof(x)[0])) // signed is optional 
```

对于第一个解决方案，在 gcc 中，您可以进行测试以确定是否有任何表达式计算为数组（或者它在 处给出编译错误`(x)[0]`）；我已经用 6 岁的 gcc 4.1.2 测试了这个解决方案：

```
#define NUMBER(x) __builtin_choose_expr(                      \
   __builtin_types_compatible_p(typeof(x), typeof((x)[0])[]), \
   NUMBER_naive(x), garbage_never_defined)
extern void *garbage_never_defined; 
```

第二种解决方案是：

```
#define ASSERT_zero(e) (!sizeof(struct{int:!!(e);})) // BUILD_BUG_ON_ZERO()
#define NUMBER(x) (NUMBER_naive(x) * !ASSERT_zero((void *)&(x) == (x))) 
```

以下是一个简短的测试程序，在一些示例数组和指针上：

```
#include <stdio.h>
#define ASSERT_zero(e) (!sizeof(struct{int:!!(e);})) // BUILD_BUG_ON_ZERO()
#define NUMBER_naive(x) ((int)(sizeof(x) / sizeof(x)[0]))
#define NUMBER(x) (NUMBER_naive(x) * !ASSERT_zero((void*)&(x) == (x)))

int a1[10];
extern int a2[];
extern int a3[10];
int *p;
int square[10][10];

static void foo(int param[10]) {
// printf("foo param    %d\n", NUMBER(param));
}
static void bar(int param[][10]) {
// printf("bar param    %d\n", NUMBER(param));
   printf("bar param[0] %d\n", NUMBER(param[0]));
   printf("bar *param   %d\n", NUMBER(*param));
}
int main(void) {
   printf("a1 %d\n", NUMBER(a1));
// printf("a2 %d\n", NUMBER(a2));
   printf("a3 %d\n", NUMBER(a3));
// printf("p  %d\n", NUMBER(p));
   printf("square  %d\n", NUMBER(square));
   printf("*square %d\n", NUMBER(*square));
   foo(a1);
   bar(square);
   return 0;
} 
```

这给出了：

```
a1 10
a3 10
square  10
*square 10
bar param[0] 10
bar *param   10 
```

如您所见，我已经注释掉了四行不会或不应该编译的行，三行用于三个指针，另一行用于不完整的数组类型。

我对 . 的第三个参数的选择有一点问题`__builtin_types_compatible_p()`。[gcc 手册](http://gcc.gnu.org/onlinedocs/gcc-4.1.2/gcc/Other-Builtins.html)（正确）声明所以现在`"Furthermore, the unused expression (exp1 or exp2 depending on the value of const_exp) may still generate syntax errors."`我已经将它设置为一个从未实例化的变量，`garbage_never_defined`所以对于某些四个被注释掉的行，而不是编译错误，我们得到一个编译器*警告*和一个*链接器*错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T00:33:31.647

例子：

```
#include <stdio.h>

#define IS_NOT_POINTER(x)  (sizeof(x) != sizeof 42[x])
#define COUNTOF(x)         ((int)(sizeof(x) / sizeof 42[x])) // signed is convenient
#define COUNTOF_SAFE(x)    (COUNTOF(x) / IS_NOT_POINTER(x))

extern int x[10];
extern int *y;

int main(void) {
   printf("%d\n", COUNTOF(x));
   printf("%d\n", COUNTOF(y));
   printf("%d\n", COUNTOF_SAFE(x));
   printf("%d\n", COUNTOF_SAFE(y));
   return 0;
} 
```

这在 gcc 4.1.2 中给出了编译时警告：

```
 foo.c:14: warning: division by zero 
```

出于好奇，并不是我们真正关心，并且可能因版本而异，运行它会给出：

```
 10
   1
   10
   0 
```

***编辑：***我对代码做了一点改动，删除了`IS_NOT_POINTER(x) / IS_NOT_POINTER(x)`. 编译警告仍然存在，但现在在运行时它给出了正确的三个值，然后`Floating point exception (core dumped).`再次，我们不在乎，但这可能更好。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-11T23:40:38.397

*是否有一种类型安全的方法来获取 C 中数组的元素计数？*

我会说，不。上面的宏很好，但只有在传递真实数组时才能正常工作。

宏只是为了简化你的代码，当你想要类型安全时，你不应该依赖它们。如果这是你需要的，你不应该使用 C 或坚持它的规则。

# php - 我的默认控制器找不到父控制器

> ID：12849715
> 
> 赞同：0
> 
> 时间：2012-10-11T22:44:02.983
> 
> 标签：php, codeigniter, codeigniter-2

**我的应用程序在开发环境中运行良好。将其上传到生产服务器后，出现以下错误：**

> 解析错误：语法错误，意外的 T_FUNCTION，在第 27 行的 /home/fjamal/public_html/ **** /anyname/application/config/config.php 中需要 ')'***

**错误是指以下代码：**

```
spl_autoload_register(function($class)
{
 if (strpos($class, 'CI_') !== 0)
 {
  if (file_exists($file = APPPATH . 'core/' . $class . EXT))
  {
   include $file;
  }
  elseif (file_exists($file = APPPATH . 'libraries/' . $class . EXT))
  {
   include $file;
  }
 }
}); 
```

**如果我将上面的代码更改为旧版本：**

```
function __autoload($class)
{
 if (strpos($class, 'CI_') !== 0)
 {
  if (file_exists($file = APPPATH . 'core/' . $class . EXT))
  {
   include $file;
  }
  elseif (file_exists($file = APPPATH . 'libraries/' . $class . EXT))
  {
   include $file;
  }
 }
} 
```

**我收到以下错误：**

> 致命错误：在第 4 行的 /home/fjamal/public_html/ ***** * /anyname/application/controllers/home.php 中找不到类“Frontend_Controller”**

**错误说明：**我的控制器从位于 Libraries 文件夹中的 Frontend_Controller 扩展而来。Frontend_Controller 从位于 core 文件夹下的 MY_Controller 扩展而来。出于某种原因，生产环境中的所有这些问题，我都没有在我的本地主机中得到它。因此，home 是默认控制器。

***此错误会阻止应用程序运行，我根本无法弄清楚。任何帮助将不胜感激。***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T23:24:24.187

我猜你的生产服务器正在运行 PHP <5.3

您的代码使用匿名函数，它们已在 PHP 5.3.0 中引入

解决方案：创建一个命名函数并将其用作回调。

# javascript - 隐藏时不要破坏 Bootstrap Popover 的内容

> ID：12849716
> 
> 赞同：2
> 
> 时间：2012-10-11T22:44:14.143
> 
> 标签：javascript, twitter-bootstrap, popover

我`<select>`在 Twitter Bootstrap Popover 中有一个元素。如果我更改所选项目并隐藏弹出框，则下次显示弹出框**时，值已重置**。我的理解是 Bootstrap Popover 在隐藏时会破坏内容。**我怎样才能“持久化”弹出框的内容，所以选择的值“坚持”？**

这是一个例子：http: [//jsfiddle.net/STHWA/](http://jsfiddle.net/STHWA/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T21:28:19.830

因为 Twitter Bootstrap 的 Popover 没有必要的事件，所以我最终选择了[PowerTip](https://github.com/stevenbenner/jquery-powertip)，并且[能够](http://jsfiddle.net/UWzvm/)使用 PowerTip 的事件解决这个问题。

# css - 将子 div 扩展到容器 div 之外

> ID：12849717
> 
> 赞同：31
> 
> 时间：2012-10-11T22:44:24.607
> 
> 标签：css, positioning, css-position

我正在尝试用浏览器的宽度扩展这个 div。我从 [这里](https://stackoverflow.com/questions/5590214/make-child-div-stretch-across-width-of-page "这里")读到 ，您可以使用`{position:absolute; left: 0; right:0;}`这里的 jsfiddle 来实现这一点：http: [//jsfiddle.net/bJbgJ/3/](http://jsfiddle.net/bJbgJ/3/)

但问题是我的 current`#container`有一个`{position:relative;}`属性，因此如果我申请`{position:absolute}`子 div，它只会引用`#container`. 有没有办法将我的孩子 div 扩展到 div 之外`#container`？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-10-11T23:20:47.897

我可以想到五种可能实现您的目标的方法：

1.  在内部元素上使用负边距将其移动到父元素之外

2.  使用 Javascript 将内部元素移到父级之外。

3.  更改源代码并将内部元素移到父级之外。

4.  `position: fixed`在内部元素上使用。这将允许内部元素突破，但不利的一面是元素将固定在给定位置（永不移动）。

5.  从父元素中移除`position: relative;`或者给父元素一个`position: static`

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-12T00:24:12.163

您可以尝试添加`overflow:visible`到 parent `div`，然后使 child 比 parent 更宽。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-07-20T05:51:08.420

父到`position:static`, 子到`position:absolute` 或

Parent to `position:relative`, child to `position:fixed`（具有固定的，永不移动的缺点）

您`left: 0; right:0;`可以使用这两种解决方案，只需注意您的子 div 将在代码中绘制在其下方的任何 div 之上，无论 div 的`display`属性设置为什么。您要么必须`padding-top`向下一个 div 添加一个值来补偿（[jsfiddle 中的简单示例](http://jsfiddle.net/spookyburger/xbg4jy9m/5/)），要么必须在下面的另一个 div 与孩子具有相同的高度行为（[codepen 中更复杂的示例](https://codepen.io/spookyburger/pen/QBKYLL)），这可能并不理想，但适用于简单的 html/css。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-17T16:34:01.413

我有一个案例，我需要制作一个轮播并将其包裹在父元素之外。您可以将子元素设置为具有 a`width: 100vw`并将父元素设置为具有特定数量的像素的最大宽度......或计算的数量。通过这种设置，我们的子组件将自身扩展到父组件之外。[JSFiddle](https://jsfiddle.net/mgobe/x3do7Lr6/6/)

```
 .parent {
     // our parent container has 20px margins on each side so we set its max width accordingly
      max-width: calc(100vw - 20px)
    }

    .child {
      // set the child to wrap the entire viewport width. Account for any margins from the parent and offset them with a negative margin
      width: 100vw;
      transform: translateX(-20px);
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-24T14:26:24.480

上面的答案都没有提到这样做的最佳方法，`position:relative`在全宽容器和`position:absolute;left:0;width:100%;`任何集中/偏移 div 内部的 div 上使用，只要没有其他容器声明位置：相对，这将起作用。

# java - S3 - TransferManager 获取正在进行的 num 次上传，完成和失败

> ID：12849718
> 
> 赞同：0
> 
> 时间：2012-10-11T22:44:26.680
> 
> 标签：java, file-upload, amazon-s3, amazon-web-services

我正在使用 Java AWS SDK 构建一个应用程序，除其他外，它必须将一些文件上传到 S3。

如果我可以访问 TransferManager 对象 tx （在 Java 中），有什么方法可以获取信息。关于与此对象关联的上传？我想知道有多少相关的上传已完成、正在进行、失败。

干杯！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T23:26:24.117

除了自己跟踪`Upload`对象之外，没有其他方法可以做到这一点。`TransferManager`对's方法之一的每次调用`upload(...)`都会返回这样一个对象，您可以询问它的状态、等待它完成等。

[http://docs.amazonwebservices.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/s3/transfer/Upload.html](http://docs.amazonwebservices.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/s3/transfer/Upload.html)

# android - 如何创建 100% 自定义 DialogFragment

> ID：12849719
> 
> 赞同：13
> 
> 时间：2012-10-11T22:44:29.680
> 
> 标签：android, xamarin.android

我想要一个使用完全自定义的 Fragments 的 Android 对话框：不包含任何平台对话框主题片段。例如，像这样：

![截屏](../Images/64538be4a577f2d0fc0da493935564f6.png)

我该怎么做呢？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-14T03:43:48.350

下面的代码将帮助您显示全屏对话框，并设置透明色

```
Dialog dialog = new Dialog(this);
dialog.getWindow().requestFeature(Window.FEATURE_NO_TITLE);
dialog.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
// layout to display
dialog.setContentView(R.layout.about_program_dialog_layout);

// set color transpartent
dialog.getWindow().setBackgroundDrawable(new ColorDrawable(Color.TRANSPARENT));

dialog.show(); 
```

> about_program_dialog_layout.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:background="#55000000" >

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:layout_marginBottom="227dp"
        android:text="Dismiss" />

    <TextView
        android:id="@+id/autoCompleteTextView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/button1"
        android:layout_alignParentRight="true"
        android:layout_marginBottom="16dp"
        android:layout_marginRight="63dp"
        android:ems="10"
        android:text="Hello There World" />

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-11T22:44:29.680

下面的 Mono for Android C# 代码可以解决问题（但应该很容易移植到 Java）。我在 Android 2.2 (Galaxy S) 和 Android 4.1 (Nexus 7) 上进行了测试。您唯一需要更改的是用于父视图和对话框视图的布局 ID。

```
[Activity (MainLauncher = true)]            
public class TestCustomDialogActivity : FragmentActivity
{
    public class MyDialogFragment : Android.Support.V4.App.DialogFragment
    {
        public override Android.Views.View OnCreateView(Android.Views.LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)
        {
            // Android 3.x+ still wants to show title: disable
            Dialog.Window.RequestFeature(WindowFeatures.NoTitle);

            // CHANGE TO YOUR DIALOG LAYOUT or VIEW CREATION CODE
            return inflater.Inflate(Resource.Layout.MyLayout, container, true);
        }

        public override void OnResume()
        {
            // Auto size the dialog based on it's contents
            Dialog.Window.SetLayout(LinearLayout.LayoutParams.WrapContent, LinearLayout.LayoutParams.WrapContent);

            // Make sure there is no background behind our view
            Dialog.Window.SetBackgroundDrawable(new ColorDrawable(Color.Transparent));

            // Disable standard dialog styling/frame/theme: our custom view should create full UI
            SetStyle(Android.Support.V4.App.DialogFragment.StyleNoFrame, Android.Resource.Style.Theme);

            base.OnResume();
        }
    }

    protected override void OnCreate(Bundle bundle)
    {
        base.OnCreate(bundle);

        // CHANGE TO YOUR MAIN SCREEN
        SetContentView(Resource.Layout.MyDialog);

        var dialog = new MyDialogFragment();
        dialog.Show(SupportFragmentManager, "dialog");
    }        
} 
```

我将完整的 Mono for Android 示例上传到[https://github.com/t9mike/CustomDialogFragmentSample](https://github.com/t9mike/CustomDialogFragmentSample)。

# php - GROUP CONCAT 和 GROUP BY 问题

> ID：12849720
> 
> 赞同：0
> 
> 时间：2012-10-11T22:44:31.087
> 
> 标签：php, mysql, group-by, group-concat

假设一个对象可以有多个 tid

现在假设我做这个查询：

```
SELECT n.nid, t.tid, GROUP_CONCAT(t.tid) 
FROM node n JOIN term_node t ON t.nid = n.nid 
GROUP BY n.nid 
HAVING t.tid = 31; 
```

我想在其中获取 tid = 31 的表节点中的条目......但是我还想要一个与该行相对应的所有 tid 的列表（因此是 GROUP_CONCAT），即使它们不是 31

使用 WHERE t.tid = 31 将从 GROUP concat 中忽略不是 31 的 tid，使用 HAVING t.tid = 31 将忽略 GROUPed 行中出现的 tid 列不是 31 的行

无论哪种方式都有可能使 GROUP_CONCAT 列表不完整或至少一个 tid = 31 的节点行不完整

有没有办法解决这个问题，这样我可以保证获得所有节点，其中该节点至少有一个 tid 关联等于 31，并且 GROUP_CONCAT 将列出所有与该节点关联的 tid 列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T22:51:36.067

作为 2 个查询，这可能会更好。GROUP_CONCAT 对结果字符串的长度有一个限制，因此它是不可靠的，除非您知道您将始终处于字符串长度限制之下。

我会运行第一个查询“WHERE tid = 31”，然后运行一个单独的查询以获取所有其他 id 并在代码中组合。

# jquery - 如何实现具有这种效果的节目

> ID：12849724
> 
> 赞同：1
> 
> 时间：2012-10-11T22:44:43.567
> 
> 标签：jquery, css, jquery-ui

我想实现我刚刚在 jquery ui 新网站上看到的功能。我需要单击此页面[http://jqueryui.com/selectable/](http://jqueryui.com/selectable/)上的链接视图源时显示的效果。有人可以告诉我他们使用了什么插件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T23:04:09.870

您可以通过以下方式轻松实现它：

```
<a id="clk" href="#">Click ME</a>
<div id="hidden">
    ALL YOU TEXT LIES HERE
</div> 
```

jQuery 代码将是：

```
$(document).ready(function() {
    $("#hidden").slideUp('fast', function() {});
    $("#clk").click(function() {
        $("#hidden").slideToggle('slow', function() {
            // Animation complete.
        });
    });
}); 
```

# 编辑

对于淡入淡出效果，将 更改`slideToggle`为`fadeToggle`如下所示：

```
$("#hidden").fadeToggle('slow', function() 
```

工作[jsFiddle](http://jsfiddle.net/jHyz2/) - [jHyz2](http://jsfiddle.net/jHyz2/)

# php - 如何将多个模型函数从控制器传递到codeigniter中查看？

> ID：12849725
> 
> 赞同：2
> 
> 时间：2012-10-11T22:44:51.183
> 
> 标签：php, codeigniter

# 控制器

从`model`将数据传递到`view`

我像这样成功地做到了这一点：

```
$var1 = $this->model_name->function_name();
$var2 = $this->model_name->function_name();
$var3 = $this->model_name->function_name();

$data = $var1 + $var2 + $var3; 

$this->load->view('page_name', $data); 
```

现在我在其他工作完美的领域使用上述方法。但是我收到一个错误**致命错误：不支持的操作数类型**发生了什么？为什么它在一小时前工作并突然中断而没有修改代码..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T22:56:29.677

您应该像这样将多个变量放入数组中：

```
$var1 = $this->model_name->function_name();
$var2 = $this->model_name->function_name();
$var3 = $this->model_name->function_name();

$data = array(
               'var1' => $var1,
               'var2' => $var2,
               'var3' => $var3,
          );

$this->load->view('page_name', $data); 
```

或者按照 Rick 的建议，您可以使用它：

```
$data = array();
$data['var1'] = $this->model_name->function_name();
$data['var2'] = $this->model_name->function_name();
$data['var3'] = $this->model_name->function_name();

$this->load->view('page_name', $data); 
```

更多关于数组：[PHP 数组](http://php.net/manual/en/language.types.array.php)

# c# - 自定义日期时间格式字符串未按预期工作

> ID：12849727
> 
> 赞同：9
> 
> 时间：2012-10-11T22:45:07.663
> 
> 标签：c#, string, datetime, .net-4.0, datetime-format

我有一个自定义`DateTime`格式字符串：`"M/d/yyyy h:m:ss tt"`.

例如，日期为“2012 年 9 月 18 日@中午”，我希望其输出类似于`"9/18/2012 12:0:00 PM"`.

时间似乎格式正确，但日期部分却搞砸了。我看到日期格式为`"MM-dd-yyyy"`，我不知道为什么。

这是一些重现问题的示例代码：

```
var datetime = DateTime.Now;
Console.WriteLine("Date: " + datetime.ToString("MMMM d, yyyy"));       // Date: October 11, 2012 --> correct
Console.WriteLine("Date: " + datetime.ToString("M/d/yyyy h:m:ss tt")); // Date: 10-11-2012 4:34:17 PM --> wrong 
```

这是[自定义 DateTime 格式字符串的 MSDN 文档](http://msdn.microsoft.com/en-us/library/8kb3ddd4%28v=vs.100%29.aspx)。

关于我做错了什么的任何想法？我怎样才能达到我想要的结果？

**编辑：**
示例代码的最后一行不正确的是连字符而不是斜杠，我不知道为什么。

另外，我的电脑语言设置为英语（加拿大）。但是我的“短”和“长”日期格式看起来都不像`M-d-yyyy`，所以我不知道它是从哪里来的。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-11T23:01:20.533

`/`是日期分隔符，即文化相关 - 在您当前的文化中，它被定义为`-`. 如果您想始终`/`使用：

```
Console.WriteLine("Date: " + datetime.ToString("M\"/\"d\"/\"yyyy h:m:ss tt")); 
```

或者

```
Console.WriteLine("Date: " + datetime.ToString("M'/'d'/'yyyy h:m:ss tt")); 
```

即将要输出的部分“按原样”放在引号内。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-11T22:52:22.350

尝试：

```
datetime.ToString("M/d/yyyy h:m:ss tt", CultureInfo.InvariantCulture); 
```

您的文化可能会覆盖您的日期分隔符。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-11T22:57:42.360

[本文](http://msdn.microsoft.com/en-us/library/zdtaw1bw.aspx)解释了当前区域性如何更改 DateTime.ToString(string) 的输出。阅读包含此文本的部分：

> 此方法使用从当前文化派生的格式信息

[本文](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.currentculture.aspx)解释了如何获取/设置文化，以便您可以测试这种可能性。

[本文](http://msdn.microsoft.com/en-us/library/8tfzyc64.aspx)介绍了如何显式地为 DateTime.ToString 提供要使用的区域性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-11T23:03:07.000

尝试添加不变的文化，[使用 InvariantCulture 属性](http://msdn.microsoft.com/en-us/library/4c5zdc6a%28v=vs.100%29.aspx)

```
Console.WriteLine("Date: " + datetime.ToString("M/d/yyyy h:m:ss tt", CultureInfo.InvariantCulture)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-26T18:41:33.470

```
Thread.CurrentThread.CurrentUICulture = Thread.CurrentThread.CurrentCulture;
var datetime = DateTime.Now;
Console.WriteLine("Date: " + datetime.ToString("MMMM d, yyyy"));

// Date: October 11, 2012 --> correct
Console.WriteLine("Date: " + datetime.ToString("M/d/yyyy h:m:ss tt")); 
```

# mysql - Mysql查询对数老化

> ID：12849737
> 
> 赞同：8
> 
> 时间：2012-10-11T22:46:11.213
> 
> 标签：mysql

我想实现一个基于老化的“对数”分数衰减，我试图找出 SUM/LOG 组合。在这里，您有当前查询的简化版本：

```
SELECT SUM(1) as total_score FROM posts
JOIN votes ON votes.post_id = posts.post_id
WHERE 1
GROUP BY post_id
ORDER BY total_score DESC 
```

我目前正在执行 SELECT 'SUM(1) as total_score' 但我想修改查询以考虑投票的日期/年龄；今天的投票权重为 1，15 天前的投票权重接近 0.8，30 天前的投票权重接近 0。我将投票表 (vote_date) 中的日期字段存储为 unix_timestamp。

![在此处输入图像描述](../Images/09d33ad51ca8f3f4adf8bd8deaf082e7.png)

我并不真正关心 WHERE 条款；这很简单。我想弄清楚的是对数老化部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T14:51:42.710

我认为你的答案有两个部分。首先是加权函数，然后是 SQL 实现。

加权功能：

根据您的图表，您不想要对数权重而是抛物线。

从这里你必须解决

Xc = y

在哪里

```
X = [1 1 1 ;
    15^2 15 1;
    30^2 30 1]; 
```

和

```
y = [1;.8;0]; 
```

你得到 c = X^(-1)y 或在 matlab

```
c = X\y 
```

现在你有了你所描绘的二次函数的适当的wieights；即 y = ax^2+bx+c 与 (a,b,c) =(-.0013,.0073,.9941)。

SQL部分：

您的选择语句应该看起来像（假设感兴趣的列名为“年龄”）

```
SELECT (-.0013*age*age + .0073*age + .9941) as age_weighted 
```

希望能帮助到你

干杯

* * *

这是完整的 Matlab 代码（也可以仔细检查解决方案）

```
X = [1 1 1 ;
    15^2 15 1;
    30^2 30 1];

y = [1;.8;0];

c = X\y;

x= (1:30)';
y = [x.^2 x ones(30,1)]*c;

figure(1)
clf;hold on
plot(x,y)
plot([1 15 30],[1 .8 0],'o') 
```

![Matlab 输出](../Images/ced261b6e41df129e2075b0a7b4b7420.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T00:31:33.143

假设您有一个函数可以计算几天前 `WEIGHT(age)`的投票权重。`age`

那么您的查询将是

```
 SELECT SUM(WEIGHT(DATEDIFF(CURRENT_DATE, votes.date_vote_cast))) as total_score,
           posts.post_id
      FROM posts
      JOIN votes ON votes.post_id = posts.post_id
     WHERE votes.date_vote_cast <= CURRENT_DATE
       AND votes.date_vote_cast > CURRENT_DATE - INTERVAL 30 DAY
  GROUP BY post_id
  ORDER BY total_score DESC 
```

恐怕我不知道你想要什么功能`WEIGHT(age)`。但是你这样做了，你可以解决它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T00:42:07.250

我还没有完成 SQL 部分，但我找到了一个函数，可以提供你所追求的衰减，至少在数学上

```
y=(sqrt(900-(x^2)))/30 
```

或者在你的情况下

```
score=(sqrt(900-(days^2)))/30 
```

![在此处输入图像描述](../Images/e16fbeaa5f1e2cae2c33bf28f60d996e.png)

希望它可以帮助！

# vba - VBA：将表格分成3组并比较时间（Excel）

> ID：12849738
> 
> 赞同：1
> 
> 时间：2012-10-11T22:46:11.517
> 
> 标签：vba, excel

我有一个包含 3 个组的表（由 B 列中的值“1G、3G 或 5G”定义），如下所示。

对于值 1G 的每次（A 列），我需要测试是否在 1G 的 10 分钟内（如 A 列所示）出现值 3G。如果是这样，那么我需要测试值 5G 是否在 20 分钟内出现（值 1G 的时间）。

因此，读取时间“1G”然后读取时间“3G”，如果 =< 10 分钟，则读取时间“5G”=< 20 分钟。

```
'Time'    'Group Name'  'Data'
----------
12:08 am       1G        747
12:45 am       1G        745
1:00 am        1G        746
12:36 am       3G        743
12:45 am       3G        747
1:03 am        3G        74
12:50 am       5G        75
1:00 am        5G        741 
```

格式“时间”：9/25/2012 8:37:00 pm

我希望将结果写在每行所有数据的新工作表上。

我已经查看了这个网站和其他网站上的答案，但没有找到答案。感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T23:14:20.643

这个宏会提取所有10分钟内有3G，20分钟内有5G的1G线路。

```
 Sub Macro2()
Dim lLastRow As Long, shtOrg As Worksheet, shtDest As Worksheet, rgLoop As Range

'turn off updates to speed up code execution
With Application
    .ScreenUpdating = False
    .EnableEvents = False
    .Calculation = xlCalculationManual
End With

Set shtOrg = ActiveSheet
Set shtDest = Sheets.Add

lLastRow = shtOrg.Cells(Rows.Count, 1).End(xlUp).Row

shtOrg.Range("D2:D" & lLastRow).FormulaR1C1 = _
        "=IF(RC[-2]=""1G"",IF(COUNTIFS(C[-3],"">="" &RC[-3],C[-3],""<=""&RC[-3]+10/1440,C[-2],""3G"")*COUNTIFS(C[-3],"">="" &RC[-3],C[-3],""<=""&RC[-3]+20/1440,C[-2],""5G"")>0,TRUE,""""),"""")"
shtOrg.Range("E2:E" & lLastRow).FormulaR1C1 = _
        "=N(IF(RC[-3]=""3G"",COUNTIFS(C[-1],TRUE,C[-4],""<=""&RC[-4],C[-4],"">=""&RC[-4]-10/1440),IF(RC[-3]=""5G"",COUNTIFS(C[-1],TRUE,C[-4],""<=""&RC[-4],C[-4],"">=""&RC[-4]-20/1440),"""")))>0"

shtOrg.Range("A1:E" & lLastRow).AutoFilter field:=4, Criteria1:="TRUE"

shtOrg.Range("A1:C" & lLastRow).SpecialCells(xlCellTypeVisible).Copy shtDest.Cells(1, 1)

shtOrg.Range("A1:E" & lLastRow).AutoFilter
shtOrg.Range("A1:E" & lLastRow).AutoFilter field:=5, Criteria1:="TRUE"
shtOrg.Range("A2:C" & lLastRow).SpecialCells(xlCellTypeVisible).Copy shtDest.Cells(Rows.Count, 1).End(xlUp).Offset(1)

shtOrg.Columns("D:E").ClearContents
shtOrg.Range("A1:E" & lLastRow).AutoFilter

With Application
    .ScreenUpdating = True
    .EnableEvents = True
    .Calculation = xlCalculationAutomatic
End With

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T03:46:00.060

Enter this formula in your first row of data (I've assumed row 2):

```
=AND(B2="1G",SUM((B3:$B$8="3G")*(A3:$A$8<=A2+"00:10")*(A3:$A$8>=A2)),SUM((B3:$B$8="5G")*(A3:$A$8<=A2+"00:20")*(A3:$A$8>=A2))) 
```

Change the $B$8 and $A$8 in the formula to your last row of data.

***After entering the formula, instead of pressing `Enter`, press `Ctrl+Shift+Enter`***. Curly brackets should appear around your formula.

Now drag the formula down. Anything that evaluates true has matched your conditions. It only searches below the current position, so best to order your data.

Now use an autofilter to get the relevant rows. If I understand correctly you can use a pivottable on another sheet, but I have no idea how that's done :)

# javascript - YouTube 视频结束时如何出现弹出窗口/弹出窗口？

> ID：12849742
> 
> 赞同：3
> 
> 时间：2012-10-11T22:47:07.917
> 
> 标签：javascript, youtube, popup, modal-dialog

我试图找出一种在 YouTube 视频结束时触发 javascript 模式弹出/弹出窗口的方法。

我第一次看到这是在 UpWorthy.com 上实现的。在视频结束时查看此视频的示例：[http ://www.upworthy.com/bully-calls-news-anchor-fat-news-anchor-destroys-him-on-live-tv](http://www.upworthy.com/bully-calls-news-anchor-fat-news-anchor-destroys-him-on-live-tv)

我已通过将 JS 参数添加到嵌入代码（enablejsapi=1）来启用 javascript api

我正在使用这个简单的模态脚本来实现模态：[http ://www.ericmmartin.com/projects/simplemodal/](http://www.ericmmartin.com/projects/simplemodal/)

如何让 youtube 视频的结尾触发它？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T22:05:35.063

```
<html>
<head>
<title>YT Test</title>
<script type="text/javascript">
  <!--
      // 2\. This code loads the IFrame Player API code asynchronously.
      var tag = document.createElement('script');
      tag.src = "http://www.youtube.com/iframe_api";
      var firstScriptTag = document.getElementsByTagName('script')[0];
      firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

      // 3\. This function creates an <iframe> (and YouTube player) after the API code downloads.
      var player;
      function onYouTubeIframeAPIReady() {
        player = new YT.Player('player', {
          height: '390',
          width: '640',
          videoId: 'ecccag3L-yw',
          events: {
            'onReady': onPlayerReady,
            'onStateChange': onPlayerStateChange
          }
        });
      }

      // The API will call this function when the video player is ready.
      function onPlayerReady(event) { /* do nothing yet */ }

      // The API calls this function when the player's state changes.

      function onPlayerStateChange(event) {
        if (event.data == YT.PlayerState.ENDED) {
                // insert appropriate modal (or whatever) below
                alert('I hope you enjoyed the video')
        }
      }
      -->

</script>
</head>
<body>
<div id="player"></div>
</body>
<html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T22:57:23.203

使用`onStateChange`Youtube Player 的事件并检查当前的播放器状态。如果状态是`YT.PlayerState.ENDED`那么你可以触发模态对话框。

来自 Youtube JavaScript player api 参考文档（有一些修改）

```
function onYouTubePlayerReady(playerId) {
  ytplayer = document.getElementById(playerId);
  ytplayer.addEventListener("onStateChange", "onytplayerStateChange");
}

function onytplayerStateChange(newState) {
   if(newState==YT.PlayerState.ENDED){
        //OPEN Modal dialog box here
   }
} 
```

# cocos2d-x - 谁能给我一个简单的 COcos2d-X 粒子示例？

> ID：12849743
> 
> 赞同：1
> 
> 时间：2012-10-11T22:47:08.310
> 
> 标签：cocos2d-x, particles, ccparticlesystem

我只是想用Cocos2d-x和C++做一个CCParticleExplsion，但是搜遍后似乎找不到。对象示例：

```
CCParticleSystem *firework = [[CCParticleExplosion alloc] initWithTotalParticles:200];
[self addChild:firework];
[firework setTexture:[[CCTextureCache sharedTextureCache] addImage:@"star.png"]]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T23:35:16.773

在大多数情况下，ParticleTexture 都带有 plist 文件，而整个 plist 文件来自粒子设计器。通常，我们使用

```
CCParticleSystemQuad* p = CCParticleSystemQuad::create("whatever_particle.plist");
this->addChild(p); 
```

但是如果你想使用 cocos2d-x 自带的粒子，你可以在 cocos2d-x 框架自带的 Test Cases 中查看如何使用它们。文件名为 ParticleTest.cpp

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T21:06:39.730

`CCParticleExplosion` is declared in `cocos2dx/particle_nodes/CCParticleExamples.h`.

Here's the C++ equivalent of your Objective C code:

```
CCTexture2D* texture = CCTextureCache::sharedTextureCache()->textureForKey("star.png");
CCParticleExplosion* firework = CCParticleExplosion::create();
firework->setTexture(texture); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T12:20:42.623

查看 cocos2d-x 根文件夹中的 tests 文件夹。

# node.js - Express JS 不渲染翡翠模板

> ID：12849746
> 
> 赞同：2
> 
> 时间：2012-10-11T22:47:19.683
> 
> 标签：node.js, pug, express

我将保持简短，我只是尝试使用 express js 渲染一个玉模板。我正在使用 express 3.0.0rc5 和玉 0.27.6。

这是我的玉模板，布局：

```
// test-layout.jade
doctype 5
html
  head
    title My title
    block head
  body
    #content
      block content 
```

和索引：

```
// test-index.jade
extends test-layout

block head
  script(src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js")

block content
  h1 My page 
```

以下是 app.js 的一些摘录：

```
var app = express();
// Configuration
app.configure(function(){
  app.set('views', __dirname + '/views');
  app.set('view engine', 'jade');
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(app.router);
  app.use(express.static(__dirname + '/public'));
});

app.get('/test-jade', function(req, res) {
    res.render('test-index', {}, function(err, html) {
    });
  });
app.get('/test', function(req, res) {
  res.send('this works');
}); 
```

现在，每当我尝试访问[http://myurl.com/test-jade](http://myurl.com/test-jade)时，浏览器都会挂起并超时，而不会在控制台中显示任何输出（即使我处于开发模式）。

但是，当我访问[http://myurl.com/test](http://myurl.com/test)时，我看到“这很有效”。

我觉得我在这里遗漏了一些非常简单的东西，我目前正在从 2.5 升级到 3.0。

如果有人有建议，请提前感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T23:20:45.873

是空白回调吗？

```
 res.render('test-index', {}, function(err, html) {
 }); 
```

在我正在使用的应用程序中

```
res.render('test-index', {}); 
```

# javascript - iScroll 4 不在输入元素上滚动

> ID：12849747
> 
> 赞同：2
> 
> 时间：2012-10-11T22:47:25.387
> 
> 标签：javascript, android, ios, iscroll

我正在构建一个针对 Android 2.2+、Blackberry 9+ 和 iOS 4+ 的移动应用程序。在我们的堆栈中，我们使用 Phonegap、jQuery 和[iScroll](http://cubiq.org/iscroll-4)（以及其他）。

我们的一个应用程序屏幕如下所示（为匿名而编辑的文本）- 在 iOS 5 模拟器的 Safari 中运行。

![应用截图](../Images/e833263463390cdbe15593c79b3f33f2.png)

如您所见，这是一个典型的输入屏幕，具有固定的标题，多个块级表单元素延伸到设备屏幕的整个区域，更少的填充。

正如我所提到的，我们的应用程序使用 iScroll。我们使用以下代码在此页面上对其进行初始化（取自 iScroll 'forms' 示例）。

```
// ...

window.scroller = new iScroll(id, {
    useTransform: false,
    onBeforeScrollStart: function(e) {
        var target = e.target;
        while (target.nodeType != 1) target = target.parentNode;
        if(target.tagName != 'select'
            && target.tagName != 'input'
            && target.tagName != 'textarea') {
            e.preventDefault();
        }
    }
});

// Disable touch scrolling (Req'd for iScroll)
window.document.addEventListener('touchmove', function(e) {
    e.preventDefault();
}, false);

// ... 
```

在此屏幕上，我注意到当用户触摸背景的任何部分时内容滚动正常，但当您通过触摸其中一个输入元素开始滚动手势（向上或向下滑动）时，内容不会滚动。正如您所理解的那样，这基本上使该屏幕无法使用，因此我正在寻找修复方法。

从那以后，我在 iScroll 中找到了罪魁祸首；

```
if (nodeName == "TEXTAREA" || nodeName == "INPUT" || nodeName == "SELECT" ) return; 
```

（iscroll.js 中的 179），[此错误](https://github.com/cubiq/iscroll/issues/276)的一个未解决问题，声称修复，以及一个声称[修复它的拉取请求](https://github.com/cubiq/iscroll/pull/190)，但是错误的作者似乎有不正确的行号，阻止我尝试修复，并且提到的拉取请求对我不起作用（在 iOS 5.1、Android 4.0.4 上测试）。

我的问题 - 有没有办法让用户在触摸输入元素时滚动（使用 iScroll）？如果没有，iScroll 在这种情况下完全没用。目前，我正在看

*   使用声称与 iScroll 具有相同功能的[Overthrow 垫片- 但是由于](http://filamentgroup.github.com/Overthrow/)[Android的](https://github.com/filamentgroup/Overthrow/issues/20)[各种](https://github.com/filamentgroup/Overthrow/issues/2) [问题](https://github.com/filamentgroup/Overthrow/issues/20) [，](https://github.com/filamentgroup/Overthrow/issues/1) 这不是一个很好的选择- 我们的主要平台之一。
*   取消 iScroll 并丢失我的固定标题。

现在是 2012 年——我们还没有办法在移动浏览器上做到这一点吗？！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T20:49:55.370

我意识到这张票有点旧，但我在处理同样的问题时遇到了它。我在 iOS 上使用 iScroll v4。

我发现这个解决方案（某处）在设置 iScroll 对象时添加以下内容：

```
 myScroll = new iScroll(id, {
            useTransform: false,
            onBeforeScrollStart: function (e) {
                var target = e.target;
                while (target.nodeType != 1) target = target.parentNode;

                if (target.tagName != 'SELECT' && target.tagName != 'INPUT' && target.tagName != 'TEXTAREA') {
                    e.preventDefault();
                }
            }
        }); 
```

但是，我发现此代码存在 2 个问题：

a）useTransform 打破了表单的布局，我在该表单中自动隐藏单选按钮，以便根据此页面显示“漂亮的图形”按钮（[http://webdesign.tutsplus.com/tutorials/htmlcss-tutorials/quick-tip- easy-css3-checkboxes-and-radio-buttons/](http://webdesign.tutsplus.com/tutorials/htmlcss-tutorials/quick-tip-easy-css3-checkboxes-and-radio-buttons/)）。我不知道为什么这会破坏该布局，并且可能只是部分关系我可以用另一种方式修复但是......我注释掉了 useTransform 并修复了它......

b）对于拉起虚拟键盘的输入，隐藏键盘后页面保持“向上滚动”（页眉离开屏幕，页脚从底部向上大约 1/4），所以我添加了“onBlur”事件到“重新滚动”窗户，这似乎工作......这是我的最终解决方案。

```
 myScroll = new iScroll(id, {
        //useTransform: false,
        onBeforeScrollStart: function (e) {
            var target = e.target;
            while (target.nodeType != 1) target = target.parentNode;

            if (target.tagName != 'SELECT' && target.tagName != 'INPUT' && target.tagName != 'TEXTAREA') {
                e.preventDefault();
            } else {
                $(target).bind('blur', function(){
                    window.scrollTo(0,0);
                    myScroll.refresh();
                });
            }
        }
    }); 
```

希望这可以帮助！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T23:00:52.063

删除 preventDefault()：

```
window.scroller = new iScroll(id, {
    useTransform: false,
    onBeforeScrollStart: function(e) {
        var target = e.target;
        while (target.nodeType != 1) target = target.parentNode;
        if(target.tagName != 'select'
            && target.tagName != 'input'
            && target.tagName != 'textarea') {

            // remove this code right here:
            e.preventDefault();
        }
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T11:48:39.113

我在设置 iScroll 时遇到了完全相同的问题并使用了以下内容：

```
var ISCROLL_MOVE;

var ISCROLL_MOVE_LIMIT=10;

// ... functions to include when you set up your iScroll
onScrollStart: function(e) {
                ISCROLL_MOVE=0;
            },
            onScrollMove: function(e) {
                ISCROLL_MOVE_LIMIT++;
            } 
```

然后，当您的 iScroll 中有任何表单元素时，例如：

```
var selectField = document.getElementById('mySelectField');

selectField.addEventListener('touchend' /*'mousedown'*/, function(e) {

        if (SCROLL_MOVE<SCROLL_MOVE_LIMIT)
            this.focus();

    }, false); 
```

请注意，该操作是在触摸结束事件上进行的，它允许在用户触摸表单元素时滚动 iScroll 页面 - 基本上它测量用户正在进行的滚动（或不滚动）量（ SCROLL_MOVE 的量）。如果它超过 10 （ SCROLL_MOVE_LIMIT 对我来说似乎是一个不错的数字），那么该字段将不会抓住焦点，否则会。

如果您需要更多详细信息，请告诉我。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-30T12:51:38.260

我会在这里回答它，没有 java-script 和 iscroll hacks

[https://stackoverflow.com/a/17390516/1458628](https://stackoverflow.com/a/17390516/1458628)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-18T07:04:18.967

我完美解决了。如果您使用的是 iscroll.js，那么您可以通过编辑 iscroll.js 文件轻松解决它。

我编辑了 _move(e) 函数定义。您将在 _move(e) 的函数定义中看到以下代码：在此处输入代码

```
that.moved = true;
   that._pos(newX, newY);
   that.dirX = deltaX > 0 ? -1 : deltaX < 0 ? 1 : 0;
that.dirY = deltaY > 0 ? -1 : deltaY < 0 ? 1 : 0;
if (timestamp - that.startTime > 300) {
   that.startTime = timestamp;
   that.startX = that.x;
   that.startY = that.y;
}
if (that.options.onScrollMove) that.options.onScrollMove.call(that, e); 
```

//把上面的代码放在else条件中。并且 if 条件应该如下：

```
enter code here
if (e.srcElement.localName == 'textarea') {
  var scrollHeight = e.srcElement.scrollHeight;
  var scrollTop = e.srcElement.scrollTop;
  if (scrollTop >= 0 && screenTop <= scrollHeight) {
       that.dirY = that.dirY * 5;
       e.srcElement.scrollTop = scrollTop + that.dirY;
  }
} 
```

//在 iPad 中测试。对我来说很好。

# jquery - 我的 jquery 灯箱定位困境

> ID：12849751
> 
> 赞同：1
> 
> 时间：2012-10-11T22:47:52.083
> 
> 标签：jquery, css, positioning, lightbox, facebox

我的论坛网站上的 jquery 弹出窗口有问题，如下[所示](http://artlessli.com)。当我点击“登录”时，窗口到处都是，我一生都无法弄清楚我应该做什么。

我希望将框居中并让背景覆盖覆盖整个背景（而不是让左侧不变暗）。

它似乎正在运行[Facebox](http://defunkt.io/facebox/)的修改版本。

在我考虑完全更换灯箱之前，我想知道是否有一个简单的解决方法来解决这样的问题。非常感谢任何帮助或建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T23:02:55.747

添加

```
div.Overlay
{
left: 0;
}

div#popup
{
left: 25%;
} 
```

# url - 实现单个模块控制器，同时将控制器排除在 URL 之外

> ID：12849753
> 
> 赞同：0
> 
> 时间：2012-10-11T22:48:16.840
> 
> 标签：url, magento, controller

我想让一个模块控制器实现不同的操作方法，但我不希望 URL 像

```
www.example.com/module/index/action1  
www.example.com/module/index/action2  
www.example.com/module/index/action3 
```

将`/index/`我们带到“IndexController”的位置。拥有我想要的网址

```
www.example.com/module/action1  
www.example.com/module/action2  
www.example.com/module/action3 
```

我需要为*每个*操作方法创建一个控制器类。在一个不错的类/文件/控制器中使用不同的操作方法获取我想要的 URL 的最佳方法是什么？我想知道除了 URL 重写之外是否还有其他方法。如果没有，你能给我指出一个很好的 Magento URL 重写教程吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T08:41:17.597

如果您不想在 Web 服务器上进行 URL 重写，您也可以本质上在 Magento 的代码中进行 URL 重写。例如，您可以像这样覆盖 Mage_Core_Controller_Varien_Router_Standard 中的函数 Match：

```
/* after getting the controller name and action name... */
if ((strcmp($module, 'myModuleName') == 0) && (strcmp($action, 'index') == 0)) {
    $action = $controller;
    $controller = 'index';
}
/* before checking if this place should be secure and instantiate controller class 
```

不过，我认为 Web 服务器上的 URL 重写会更干净、更易于管理。

如果您使用 Magento 的 URL 重写，您可能需要为每个操作指定一个规则，例如：

```
Type: custom
Request Path: myModuleName/hello
Target Path: myModuleName/index/hello 
```

您可以在管理员中的目录 > URL 重写管理下指定这些 URL 重写规则

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T08:55:30.727

没有真正的理由违反 Magento`reuter/controller/action`计划。对于任何偏差，他们创建了 URL 重写功能。

即使省略`module`部分，您也可以创建 Url 重写。创建 URL 重写非常简单，我认为您不需要教程，只需打开管理面板，转到*Catalog->Url Rewrites Management*。单击创建新重写，选择**自定义**类型，将所需的 uri 部分添加到*请求路径*( `module/action`)，并将实际 uri 部分添加到*目标路径*( `module/controller/action`)。

# r - 使用knitr的绘图标签中的utf8

> ID：12849755
> 
> 赞同：5
> 
> 时间：2012-10-11T22:48:28.533
> 
> 标签：r, plot, knitr

无法使用 knitr 将以下 Rnw 文档编译为 pdf

```
\documentclass{article}
\usepackage[utf8]{inputenc}
\usepackage[russian]{babel}
\begin{document}

<<>>=
hist(rnorm(100),main="Гистограмма")
@

\end{document} 
```

有英文标签，一切正常。

* * *

编辑1：现在我有两个版本的pdf。在[第一个](https://github.com/bdemeshev/em301/raw/master/russian_labels_knitr/f.pdf)字母被点替换。

在[第二个](https://github.com/bdemeshev/em301/raw/master/russian_labels_knitr/ff.pdf)中，所有字母都重叠。第二个是使用附加代码块生成的

```
<<>>=
pdf.options(encoding = "CP1251")
@ 
```

我正在使用 Ubuntu 12.04 + R 2.14 + Texlive。

* * *

编辑2：

目前我找到了以下部分解决方案：

```
<<>>=
cairo_pdf("figure.pdf")
hist(rnorm(100),main="Гистограмма")
dev.off()
@
\includegraphics{figure.pdf} 
```

* * *

编辑3：

使用以下代码：

```
\documentclass{article}
\usepackage[utf8]{inputenc}
\usepackage[russian]{babel}
\begin{document}

<<dev='cairo_pdf'>>=
hist(rnorm(100),main="Гистограмма")
@

\end{document} 
```

我获得了一个正确的直方图，其中包含[很多 WARNINGS](https://github.com/bdemeshev/em301/raw/master/russian_labels_knitr/fff.pdf)。如何避免或至少抑制它们？

* * *

最后！乌拉！

```
\documentclass{article}
\usepackage[utf8]{inputenc}
\usepackage[russian]{babel}
\begin{document}

<<dev='cairo_pdf',warning=FALSE>>=
hist(rnorm(100),main="Гистограмма")
@

\end{document} 
```

我可以避免警告吗？有人可以用编码和警告向我解释所有这些东西吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T03:24:40.467

您可能需要设置`pdf.options(encoding = 'your_encoding')`；请参阅[https://github.com/yihui/knitr/issues/172](https://github.com/yihui/knitr/issues/172)我不完全确定这里的编码到底应该是什么。

# html - 如何使 HTML 页脚占据页面的剩余高度而不对其进行修复或使用 JS？

> ID：12849758
> 
> 赞同：0
> 
> 时间：2012-10-11T22:48:46.000
> 
> 标签：html, css

例如，我希望[此页面](https://www.starstreet.com/daily_games/51555)的页脚填充到页面底部，但我希望[此页面](https://www.starstreet.com/pickfive)的行为与现在一样 - 因此无法修复页脚。我宁愿不使用 JS，因为`$(window).resize()`它很昂贵而且性能是我们关心的问题。

我们支持的最低浏览器是 IE9、Firefox 13、Chrome 16 和 Safari 5，所以我不担心使用更高级的解决方案，尽管可能不是最先进的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T22:53:21.787

您不能 - 您必须计算窗口高度和页脚顶部偏移量（涉及 JS），或者将元素的位置固定为`bottom: 0`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T14:55:26.137

您可以使页面背景颜色与页脚颜色匹配，而不是将图形用作整个页面的背景，而仅用于内容区域。

所以把背景放在 main-content-container

并制作身体背景颜色#EBEBEB

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T23:23:05.713

这是一种方法，但它确实带来了其他问题。您需要设置一个最小高度并确保您的内容不超过该最小高度，否则它可能会被截断，并且所有文本都必须位于第二个 div 的顶部。

的CSS：

```
body,html
{
 width: 100%;
 height: 100%;
}
div#wrapper
{
 overflow: hidden;
 height: 100%;
 min-height: 600px;
}
div#one
{
 background-color: #0ff;
 height: 200px;
}
div#two
{
 height: 100%;
 background-color: #f00;
} 
```

的HTML：

```
<div id="wrapper">
    <div id="one"></div>
    <div id="two"></div>
</div> 
```

所以在这个例子中，底部的内容高度不能超过 400px。但是，如果它比那个大，它将被纯色填充。

# ios - 将视图控制器推入模态视图控制器视图

> ID：12849759
> 
> 赞同：6
> 
> 时间：2012-10-11T22:48:48.540
> 
> 标签：ios, uinavigationcontroller, pushviewcontroller

我正在尝试进行一个简单的操作。至少看起来很简单。好的，我想做的是从使用模态视图控制器推送的视图中推送视图（使用推送视图控制器）。

View1 --(使用模态视图控制器推送)-->View2--(使用推送视图控制器推送)--View3.

现在，我正在做测试，所以我正在使用一个按钮来开始操作。这是我用来从 View2 推送到视图 3 的代码：

```
//view2.h
UIToolbar *bar;
UIBarButtonItem *button;
UIToolbar *toolbar;

}

- (IBAction)demissModal:(id)sender;
- (IBAction)goView3:(id)sender;

@end

//view2.m
- (IBAction)goView3:(id)sender{

View3 *view_3 = [[View3 alloc] initWithNibName:@"View3" bundle:nil];
[self.navigationController pushViewController:view_3 animated:YES];

} 
```

这与我用来将 View1 推送到 View2 的代码相同，并且可以正常工作。但是当将 View2 推到 View3 时，它不起作用。知道为什么会这样吗？谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-12T02:48:03.673

视图控制器实际上不是“模态”或“推送”视图控制器。Modal 或 Push 描述了视图控制器之间的转换（如果您使用故事板，则称为 segues）。

我认为您要问的是如何以模态方式呈现视图控制器，然后推送另一个控制器。诀窍是当您以模态方式呈现视图控制器#1 时，实际呈现一个导航控制器，其根视图控制器设置为视图控制器#1。

```
MyViewController *myViewController = [MyViewController alloc] init];
UINavigationController *navController = [UINavigationController alloc] initWithRootViewController:myViewController];

// Presuming a view controller is asking for the modal transition in the first place.
[self presentViewController:navController animated:YES completion:nil];
// Now in myViewController, call [self.navigationController pushViewController:secondViewController animated:YES]; 
```

这是使用情节提要的样子： ![在此处输入图像描述](../Images/f1bb749b9e7facfb131d5e67dfaaf74e.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-26T11:30:20.567

试试这个代码 AlarmList 是视图名称。

AlarmListScreen *loscr=[[AlarmListScreen alloc]initWithNibName:nil bundle:nil];

[self.navigationController pushViewController:loscr 动画:YES];

```
[loscr release]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T22:56:31.817

尝试这个：

```
[self.navigationController pushViewController:view_3 animated:YES]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T22:58:48.630

首先，我不确定 gegant_se 来自哪里。

其次，如果您从 view1 推送 view2 的方式与从 view2 推送 view3 的方式相同，那么您没有使用模态。

每当您使用导航控制器推送视图控制器时，刚刚推送的视图控制器通过 navigationController 属性具有对导航控制器的引用。尝试这个：

```
[self.navigationController pushViewController:view_3 animated:YES]; 
```

# html - 锚链接在 Wordpress 中不起作用 - 我很难过！

> ID：12849765
> 
> 赞同：0
> 
> 时间：2012-10-11T19:41:40.667
> 
> 标签：html, anchor

锚链接！似乎无法让他们工作。我已经在每个时间段上方创建了锚链接，名称来自 post-slug。我尝试过使用锚链接，如下所示： [http ://ecodistrictssummit.com/tues-oct-23#fastcash-workshop-with-ioby](http://ecodistrictssummit.com/tues-oct-23#fastcash-workshop-with-ioby)

我曾尝试使用 div ID，如下所示： [http ://ecodistrictssummit.com/tues-oct-23#timeslot-1033](http://ecodistrictssummit.com/tues-oct-23#timeslot-1033)

每个锚点都会让你向下移动页面，但永远不会让你超过第一个条目。

任何帮助将非常感激！这是一个客户的网站，可悲的是。：/

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T19:53:36.550

Alan - 我的第一次尝试（使用#timeslot-1033）得到了你所描述的结果。

然后，怀疑与 CSS 相关的问题，我在 Firefox 中将“页面样式”设置为“无样式”，重新加载页面，然后到了星期二 4:00 的地方。（这就是它应该带我去的地方，对吧？所以我认为我的怀疑是正确的。

我会尝试从我的样式表中删除一些声明（.timeslot width = 100%？）等等。

HTH。杰夫·科汉

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T17:30:43.800

我找到了一个稍微不同的答案，对我来说效果很好。我了解了 id 标签。例如，我在标题标签中添加了一个 id：

```
<h3 id="game">Game Night</h3> 
```

这很好用！

# regex - 日志文件的 SED 正则表达式替换

> ID：12849768
> 
> 赞同：3
> 
> 时间：2012-10-11T22:49:36.250
> 
> 标签：regex, sed

我运行我的世界服务器并喜欢定期清理我的日志文件。我开发了一堆可以在 gedit 或 notepad++ 中使用的正则表达式命令，它们运行良好，但我希望能够自动化该过程。

基本的文件清理命令如下所示：

```
cat server.log | sed -e 's/REGEXTODELETE//g' > server.log 
```

但我无法让正则表达式命令正确转换为 SED。我在 CentOS6.3 机器上使用 sed。

下面是一个在 notepad++ 中工作的命令示例：

```
^[0-9]+-[0-9]+-[0-9]+ [0-9]+:[0-9]+:[0-9]+ \[INFO\] Connection reset$ 
```

但是当我将它输入到我的 bash 脚本中时：

```
cat server.clean.log | sed -e 's/^[0-9]*-[0-9]*-[0-9]* [0-9]*:[0-9]*:[0-9]* \[INFO\] Connection reset$//g' > server.clean.log 
```

它清空整个文件。我已经看了一遍，我怀疑我遇到了空格问题，但是经过大约一个小时的搜索后，我被卡住了。任何帮助表示赞赏，我可以提供更多示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T23:05:00.147

如果要在线修改文件而不创建临时文件，可以使用 sed 的`-i`选项。例如，如果您想删除任何包含您提到的字符串的行，您可以使用：

```
sed -i'' '/^[0-9]*-[0-9]*-[0-9]* [0-9]*:[0-9]*:[0-9]* \[INFO\]  Connection reset$/d' server.log 
```

这避免了不必要的管道，以及您在将输出重定向到输入文件时遇到的混乱。

请注意，我在这里使用 sed 删除行。当您使用该`s/RE/text/`符号时，您将替换内容 IN-LINE。您的输出行总数将与输入相同，只有（我收集）如果您只是将文本替换为空白，您将有一堆*空白行。*

如果您不介意处理临时文件问题，您可以使用`grep`而不是`sed`让这更清楚一点。

```
grep -v '^[0-9]*-[0-9]*-[0-9]* [0-9]*:[0-9]*:[0-9]* \[INFO\]  Connection reset$' server.log > clean..log 
```

或者甚至：

```
grep -Pv '^\d+(-\d+)+ \d+(:\d+)+ \[INFO\]  Connection reset$' server.log > clean.log 
```

如果您使用的是 Linux 并且不介意使用[邪恶的正则表达式](https://www.owasp.org/index.php/Regular_expression_Denial_of_Service_-_ReDoS)。（根据我的经验，`\d`POSIX 类速记不能可靠地工作，除非您将正则表达式视为 PCRE。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T22:52:35.593

问题是您在读取输入文件之前覆盖了它。

```
cat server.clean.log | sed -e 's/^[0-9]*-[0-9]*-[0-9]* [0-9]*:[0-9]*:[0-9]* \[INFO\]  Connection reset$//g' > server.clean.log 
```

应该是这样的

```
cat server.log | sed -e 's/^[0-9]*-[0-9]*-[0-9]* [0-9]*:[0-9]*:[0-9]* \[INFO\]  Connection reset$//g' > server.clean.log 
```

一般来说，

```
program <infile >infile 
```

将无法（可靠地）工作，因为在有机会阅读`infile`之前会被截断`program`

# c - 我对 char** 有什么误解？

> ID：12849777
> 
> 赞同：3
> 
> 时间：2012-10-11T22:50:36.920
> 
> 标签：c, pointers, char

我正在为计算机科学课做一些作业，而一项相当乏味的作业的最后一部分是编写一个可以反转句子的函数。教授提供的函数原型是这样的：

```
int reverseSentence(char** sentence, char **
                newsentence, int maxWords) 
```

...其中 sentence 是原始句子，newsentence 是我们应该转储反向句子的位置，而 maxWords 是原始句子中的单词数。我这样写了我的函数......

```
int reverseSentence(char** sentence, char **
                newsentance, int maxWords)
{

    int i = maxWords;
    int x = 0;
    while(i > 0){
        newsentance[x] = sentence[i];
        x++;
        i--;
    }

    return maxWords;
} 
```

然而，循环似乎永远在进行。另外，我似乎对如何使用`char**`. 我以为它只是一个字符串数组，比如`char[words][characters]`. 但是我收到有关以该形式将一组单词传递给函数的警告。我不是要求任何人为我做功课，只是为了澄清我在如何使用`char**`.

任何帮助表示赞赏。谢谢你。

PS - 这就是我尝试测试我的代码的方式：

```
char sentence[3][4] = {"Hi\n", "my\n", "fri\n"};
char newsentence[3][4];
reverseSentence(sentence, newsentence, 3); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T22:58:54.827

如您的评论所示，代码

```
char sentence[3][4] = {"Hi\n", "my\n", "fri\n"}; 
```

有效，但与 a 不兼容`char **`。相反，它应该是：

```
char *sentence[3] = {"Hi\n", "my\n", "fri\n"}; 
```

第一个在内存中是这样排列的，字符打包成一个块，三组，每组四个字符：

```
+---+---+---+---+---+---+---+---+---+---+---+---+
| H | i | \n| \0| m | y | \n| \0| f | r | i | \n|
+---+---+---+---+---+---+---+---+---+---+---+---+ 
```

请注意，最后的条目没有*尾随*NUL ( `\0`)，因为数组中可用的 4 个字符中没有空间。

第二个声明（你想要的）是一个由三个指向 NUL 终止字符串的指针组成的数组：

```
+---------------+---------------+---------------+
|    char *     |    char *     |    char *     |
+---------------+---------------+---------------+
       |               |               |
       |               |               |    +---+---+---+---+---+
       |               |               +--> | f | r | i | \n| \0|
       |               |                    +---+---+---+---+---+
       |               |    +---+---+---+---+
       |               +--> | m | y | \n| \0|
       |                    +---+---+---+---+
       |    +---+---+---+---+
       +--> | H | i | \n| \0|
            +---+---+---+---+ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-11T22:58:08.587

我不确定为什么它会永远循环......但有几点需要注意：

1.  你从`i = maxWords`...开始，这似乎是错误的。数组从 0 开始索引，那么如果你设置 会发生什么`i = maxWords`？
2.  取名有点奇怪。首先你有一个错字`newsentance`。第二个你叫它，`maxWords`但它应该更像`numWords`，对吧？
3.  如果您的理解`char*`是它是一个“字符串数组，例如 char[words][characters]”，那么您对 ​​C 类型的看法与其实际存在的方式之间存在巨大的差距（简短的总结是类型/内存是 C) 中最重要、最基础和最*令人困惑*的部分之一。你有一本教科书来了解 C 中的类型是如何表示的吗？我不确定您是否甚至需要为这项任务知道它......可能是天真的工作。

**编辑**哦，亲爱的。您对原句的声明甚至可以编译吗？我不太确定怎么做。您可能想再次阅读有关指针的内容...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T02:37:02.030

您可以将 char** 句子视为字符串的向量。您可以使用字符串函数，例如 strlen，例如：strlen(sentence[0]) 会给您第一行的长度。然后，您可以从结尾到开头，从 lenght - 1 到 0 开始。不要忘记计算空格，以便正确减少单词计数器。请记住，您可能会发现不止一个空格分隔两个单词，并且在递减计数器时应该考虑到这一点。不要忘记将 '\0' 放在新字符串的末尾。

要复制到新的“字符串向量”，您应该小心 malloc 和 realloc，或者......您可以搜索最长的行并分配具有该大小的所有行。请记住，当你打印一个字符串时，它会在你得到 '\0' 字符时停止，不管向量的大小。

# jsp - 带有 JSTL 的 JSP 中的 NumberFormatException ArrayList 大小 Javabean 方法

> ID：12849780
> 
> 赞同：2
> 
> 时间：2012-10-11T22:50:54.547
> 
> 标签：jsp, jstl, javabeans, numberformatexception

我对 JSTL 和 Javabeans 有点陌生，所以我很难弄清楚这一点。

我有一个 index.jsp，一个名为 CustomerScheme 的类，它扩展了一个 ArrayList，还有一个 test.jsp，我使用它来输出。

index.jsp 包含以下代码，并具有指向 test.jsp 的链接：

```
<jsp:useBean id="scheme" scope="session" class="customer.beans.CustomerScheme">

    <%
        // Open a stream to the init file
        InputStream stream =
                application.getResourceAsStream("/fm.txt");

        // Get a reference to the scheme bean
        CustomerScheme custScheme =
                (CustomerScheme) pageContext.findAttribute("scheme");

        // Load colors from stream
        try {
            custScheme.load(stream);
        } catch (IOException iox) {
            throw new JspException(iox);
        }
    %>

</jsp:useBean> 
```

test.jsp 包含：

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions" %>
${scheme.size} 
```

CustomerScheme 扩展了 ArrayList，并具有以下方法：

```
public int getSize() {
    return this.size();
} 
```

CustomerScheme 有更多代码。如果您需要，我会发布它。

**我的问题是这样**的：每当我运行程序时，我从 index.jsp 开始，单击链接转到 test.jsp，然后得到以下内容：

![错误信息](../Images/fafb6a294cdae6c628576addf995cd34.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T07:54:12.337

`javax.el.ListELResolver`句柄类型的基础对象`java.util.List`。它接受任何对象作为属性并将该对象*强制*转换为列表中的整数索引。

所以你需要调用该`getSize()`方法 -`${scheme.getSize()}`或使用`<jsp:getProperty/>`

或者，您可以创建一个`List<T>`in`customer.beans.CustomerScheme`而不是扩展`ArrayList<T>`.

```
public class CustomerScheme{
  private List<Customer> list=new ArrayList<Customer>();
  public int getSize(){
         return list.size();
  }
  ..
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T19:18:12.993

如果您不想创建额外的包装类，可以执行以下操作：

```
<c:set var="size"><jsp:getProperty name="scheme" property="size"/></c:set>
size : <c:out value="${size}"/> 
```

# linux - 节点：加载共享库时出错：libv8.so.3

> ID：12849781
> 
> 赞同：3
> 
> 时间：2012-10-11T22:51:02.270
> 
> 标签：linux, node.js

在新机器上安装节点后遇到错误。

```
$ -node
node: error while loading shared libraries: libv8.so.3: cannot open shared object file: No such file or directory 
```

我尝试使用[http://code.google.com/p/v8/wiki/BuildingWithGYP中的说明安装 v8](http://code.google.com/p/v8/wiki/BuildingWithGYP)

但运气很少。对这个问题有任何帮助吗？

我的系统是：

> SUSE Linux Enterprise Server 11 (x86_64) VERSION = 11 PATCHLEVEL = 2

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-07T10:14:26.610

我遇到了同样的问题，那个答案解决了它- [加载共享库时的Linux错误：无法打开共享对象文件：没有这样的文件或目录](https://stackoverflow.com/questions/480764/linux-error-while-loading-shared-libraries-cannot-open-shared-object-file-no-s?rq=1)

长话短说 ，

```
$ locate libv8.so.3
$ LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/my_library/path.so.something
$ export LD_LIBRARY_PATH
$ ./my_app 
```

GL，伊多

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-21T19:01:22.020

您安装的 Node RPM 依赖于`libv8.so.3`v8 RPM 中的模块。安装v8，然后搜索模块并将其复制到节点正在搜索模块的路径。使用 v8 的启用文件的路径编辑，`~/.bash_profile`以在机器上正确映射 v8。

```
$find / -name libv8.so*
$cp /the found path/libv8.so /node module path/
$find / -name enable | grep v8*
$vim /path to v8 enable file/enable (highlight the export PATH statements)
$vim ~/.bash_profile
Shift+I (paste in the contents of the v8 enable file) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-08T14:24:33.663

I was using scl to load libs and encountered a similar problem. ended up starting my rails server after a deploy via:

```
# stop
pid=$(lsof -i tcp:3000 -t)
[ -z "$pid" ] || kill $pid

# start
scl enable rh-ror41 nodejs010 rh-ruby22 'LD_LIBRARY_PATH=/opt/rh/rh-ruby22/root/usr/lib64/:/usr/lib/oracle/12.1/client64/lib:/opt/rh/nodejs010/root/lib64 &
                                         bundle install &
                                         rails server -d -b 0.0.0.0' 
```

# sql - T-SQL：交叉应用；订单项的迭代次数过多

> ID：12849790
> 
> 赞同：2
> 
> 时间：2012-10-11T22:52:28.777
> 
> 标签：sql, sql-server, tsql, xml-parsing, identifier

在粉碎了一些严肃的 Xml 之后，我几乎得到了我想要的东西——但是在查看结果之后，我发现在解析的一个部分中，我无法轻松解决这种遍历所有行细节的模式每个子标题——所以我不是为所有行项目写出总共 3 条记录，而是为每个子标题写出三个行项目——假设我有两个。我总共有6个！:-( 在下面的代码中，我将该模式提炼为通用标题/子标题/详细信息关系模型。

```
 DECLARE @MetroXML xml
    SET @MetroXML =
    '<Header>
       <col1>Conoco</col1>
       <col2>ORD-1111</col2>
       <SubHeaders>
         <SubHeader>
          <col1>Dallas</col1>
          <col2>BOL-2213</col2>
         <Details>
          <Detail>
            <col1>Diesel</col1>
            <col2>7600.00</col2>
          </Detail>
         </Details>
        </SubHeader>
        </SubHeaders>
        <SubHeaders>
         <SubHeader>
          <col1>Fort Worth</col1>
          <col2>BOL-2216</col2>
         <Details>
          <Detail>
            <col1>Ethanol</col1>
            <col2>1852.00</col2>
          </Detail>
          <Detail>
            <col1>Unleaded</col1>
            <col2>900.00</col2>
          </Detail>
         </Details>
       </SubHeader>
      </SubHeaders>
     </Header>';

    INSERT INTO [scratch].GenericHeader
     SELECT T.c.value('col1[1]','varchar(10)') AS 'col1',
            T.c.value('col2[1]','varchar(10)') AS 'col2'
       FROM @MetroXML.nodes('/Header') T(c);

    INSERT [scratch].GenericSubHeader
     (id,col1,col2)
    SELECT 
      h.id,
      n.x.value('col1[1]','varchar(10)') AS 'col1',
      n.x.value('col2[1]','varchar(10)') AS 'col2'
     FROM [scratch].GenericHeader h
      CROSS APPLY @MetroXML.nodes('/Header/SubHeaders/SubHeader') n(x);

     INSERT [scratch].GenericDetail
     (id,subid,col1,col2)
      SELECT 
       s.id,
       s.subid,
       n.x.value('col1[1]','varchar(10)') AS 'col1',
       n.x.value('col2[1]','varchar(10)') AS 'col2'
     FROM [scratch].GenericSubHeader s
      CROSS APPLY @MetroXML.nodes('/Header/SubHeaders/SubHeader/Details/Detail') as n(x);

     select * from [scratch].GenericHeader
      where id = 24;

     select * from [scratch].GenericSubHeader
      where id = 24;

     select * from [scratch].GenericDetail
      where id = 24; 
```

注意：id、subid、detid 定义为 INT IDENTITY(1,1) 结果

我得到什么：

```
id|subid|detid|col1     |col2
--------------------------------
24|44   |22   |Diesel   |7600.00
24|44   |23   |Ethanol  |1852.00
24|44   |24   |Unleaded |900.00
24|48   |25   |Diesel   |7600.00
24|48   |26   |Ethanol  |1852.00
24|48   |27   |Unleaded |900.00 
```

我想得到什么：

```
id|subid|detid|col1     |col2
--------------------------------
24|44   |22   |Diesel   |7600.00
24|48   |23   |Ethanol  |1852.00
24|48   |24   |Unleaded |900.00 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T05:57:04.637

您得到重复行的原因是因为您对`GenericSubHeader`. 您必须想办法将生成`ID`的输入`GenericHeader`和生成`subid`的输入映射`GenericSubHeader`到 XML 的相关部分。

如果您使用的是 SQL Server 2008 或更高版本，则可以[与输出合并](https://stackoverflow.com/questions/5365629/using-merge-output-to-get-mapping-between-source-id-and-target-id)以创建一个表变量，该变量包含生成的 id 和所属的 xml 子节点。

```
declare @GH table
(
  id int,
  sub xml
);

merge scratch.GenericHeader as T
using 
  (
    select T.c.value('col1[1]','varchar(10)'),
           T.c.value('col2[1]','varchar(10)'),
           T.c.query('SubHeaders')
    from @MetroXML.nodes('/Header') T(c)
  ) as S(col1, col2, sub)
on 0 = 1
when not matched then
  insert (col1, col2) values(S.col1, S.col2)
output inserted.id, S.sub into @GH;  

declare @GSH table
(
  id int,
  subid int,
  det xml
);

merge scratch.GenericSubHeader as T
using
  (
    select h.id,
           n.x.value('col1[1]','varchar(10)'),
           n.x.value('col2[1]','varchar(10)'),
           n.x.query('Details')
    from @GH as h
      cross apply h.sub.nodes('/SubHeaders/SubHeader') n(x)
  ) as S(id, col1, col2, det)
on 0 = 1
when not matched then
  insert (id, col1, col2) values (S.id, S.col1, S.col2)
output inserted.id, inserted.subid, S.det into @GSH;

insert into scratch.GenericDetail(id, subid, col1, col2)
select s.id,
       s.subid,
       n.x.value('col1[1]','varchar(10)') AS 'col1',
       n.x.value('col2[1]','varchar(10)') AS 'col2'
from @GSH as s
  cross apply s.det.nodes('/Details/Detail') as n(x); 
```

# python - 为什么 python pickle 加载和转储会膨胀磁盘上对象的大小？

> ID：12849791
> 
> 赞同：7
> 
> 时间：2012-10-11T22:52:30.260
> 
> 标签：python, serialization, load, pickle, dump

我在名为 b1.pkl 的文件中有一个腌制对象：

```
$ ls -l b*
-rw-r--r--  1 fireball  staff  64743950 Oct 11 15:32 b1.pkl 
```

然后我运行以下 python 代码来加载对象并将其转储到一个新文件中：

```
import numpy as np
import cPickle as pkl

fin = open('b1.pkl', 'r')
fout = open('b2.pkl', 'w')

x = pkl.load(fin)
pkl.dump(x, fout)

fin.close()
fout.close() 
```

此代码创建的文件是原来的两倍多：

```
$ ls -l b*
-rw-r--r--  1 fireball  staff   64743950 Oct 11 15:32 b1.pkl
-rw-r--r--  1 fireball  staff  191763914 Oct 11 15:47 b2.pkl 
```

谁能解释一下为什么新文件比原来的大很多？它应该包含完全相同的结构。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-11T23:06:39.350

可能是原始泡菜使用了其他协议。例如，尝试将其指定`protocol=2`为第二个关键字参数`pickle.dump`并再次对其进行测试。二元泡菜的大小应该小得多。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-11T23:09:25.443

您的原件很可能`b1.pkl`是使用更有效的协议模式（1 或 2）挑选出来的。所以你的文件开始变小了。

当您使用 cPickle 加载时，它会自动从文件中为您检测协议。但是当你用默认参数再次转储它时，它将使用更大的协议 0。它这样做是为了便携性/兼容性。您需要明确请求二进制协议。

```
import numpy as np
import cPickle

# random data
s = {}
for i in xrange(5000):
    s[i] = np.random.randn(5,5)

# pickle it out the first time with binary protocol
with open('data.pkl', 'wb') as f:
    cPickle.dump(s, f, 2)

# read it back in and pickle it out with default args
with open('data.pkl', 'rb') as f:
    with open('data2.pkl', 'wb') as o:
        s = cPickle.load(f)
        cPickle.dump(s, o)

$ ls -l
1174109 Oct 11 16:05 data.pkl
3243157 Oct 11 16:08 data2.pkl 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-11T23:06:28.273

pkl.dump(x, fout, 2) 可能会产生相同的文件大小。不指定协议版本将使pickle使用旧版本0。

# jquery - jquery中的条件代码元素或变量

> ID：12849804
> 
> 赞同：0
> 
> 时间：2012-10-11T22:53:55.437
> 
> 标签：jquery, conditional

我有一个变量，我不想影响条件或在必要时不收费，即在这种情况下不收费时 DIV # 侧边栏

我的代码是：

```
var top = $('#sidebar').offset().top - parseFloat($('#sidebar').css('margin-top').replace(/auto/, 0));
var _height = $('#sidebar').height();
var _original_top = $('#sidebar').offset().top;
$(window).scroll(function(event) {
    var y = $(this).scrollTop();
    var z = $('footer').offset().top;
    if (y >= top && (y + _height) < z) {
        $('#sidebar').removeClass('stuck-bottom').addClass('fixed');
    } else {
        if ((y + _height) > z) {
            $('#sidebar').removeClass('fixed').addClass('stuck-bottom');
        }
        else $('#sidebar').removeClass('stuck-bottom').removeClass('fixed');
    }
}); 
```

如果我把这段代码不起作用：（

```
if ($('#sidebar')) { ... } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T23:03:49.110

如果问题是您`if`总是执行代码，则需要更改检测是否`#sidebar`存在的方式。这可能是因为`$('#sidebar')`通常会评估为真，即使没有匹配的元素，因为`$()`返回一个有效的 jQuery 对象。要使条件仅在`#sidebar`实际存在时成功，请尝试：

```
if ($('#sidebar').length) { ... } 
```

但是，如果您的问题是即使`#sidebar`存在条件也永远不会成功，那么您的代码可能会在 DOM 加载之前执行。您需要将代码包装在一个`$.ready()`函数中，因此在页面下载、解析和呈现之前它不会执行：

```
jQuery(function($) {
    if ($('#sidebar').length) { ... }
}); 
```

# c# - 读取文件并在某个单词后替换测试

> ID：12849805
> 
> 赞同：0
> 
> 时间：2012-10-11T22:54:07.543
> 
> 标签：c#, replace, find

我有一些文件，例如：

```
FileBegin Finance  Open 87547.25 Close 548484.54 EndDay 4 End 
```

另一个文件示例：

```
FileBegin Finance  Open 344.34 Close -3434.34 EndDay 5 End 
```

我需要阅读文件中的文本并仅替换单词 Open 之后的数值，而保留单词 Open 前后的其余文本不变。我一直在使用这段代码：

```
 string fileToRead = "c:\\file.txt";
    public void EditValue(string oldValue, string newValue, Control Item)
    {
        if (Item is TextBox)
        {
            string text = File.ReadAllText(fileToRead);
            text = text.Replace(oldValue, newValue);
            File.WriteAllText(activeSaveFile, text);
        }
     } 
```

仅替换单词后的数值的最佳方法是`open`什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T22:56:02.437

使用正则表达式：

```
Regex rgx = new Regex(@"Open [^\s]+");
string result = rgx.Replace(text, newValue);
File.WriteAllText(activeSaveFile, result ); 
```

使用这种方法，您可以将正则表达式对象存储在方法之外，这样您就可以避免每次都重新编译它。我猜与您的情况下的文件 I/O 相比，它不会对性能产生重大影响，但在其他情况下这是一个很好的做法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T22:58:30.873

用空格分割行，`string.split(new char[] { ' ' }, StringSplitOptions.Empty)`然后获取`_splittedRow[3]`并替换并将新行合并在一起。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T23:09:50.720

如果我理解你，这条线：

```
FileBegin Finance  Open 344.34 Close -3434.34 EndDay 5 End 
```

是整个文件吗？您一直在为旧值输入“344.34”，为新值输入“something”？而您只想输入新值？

你可以说：

```
string fileToRead = "c:\\file.txt";
public void EditValue(string oldValue, string newValue, Control Item)
{
    if (Item is TextBox)
    {
       string text = File.ReadAllText(fileToRead);
       string[] words = text.Split(new char[] {' '}); // assuming space-delimited
       words[3] = "new value";   // replace the target value
       text = "";
       foreach (string w in words)
       {
           text += w + " ";   // build our new string
       }
       File.WriteAllText(activeSaveFile, text.Trim());   // and write it back out
    }
} 
```

这是很多如果，但我认为这就是你的意思。还有很多不同的方法可以替换字符串的那一部分，我只是认为这会让你灵活地用一组方便的单词来做其他事情。

# ruby-on-rails - 在 URL 后面添加#gallery - 用于 ruby 脚本

> ID：12849806
> 
> 赞同：0
> 
> 时间：2012-10-11T22:54:23.097
> 
> 标签：ruby-on-rails, ruby

我有一个用于照片的 ruby​​ 脚本，其中包含指向其 url 的链接：

```
<%= if property.images[0] then link_to image_tag (property.images[0].image.url('350x263', :jpg)), user_property_image_path(user, :id => property.images[0], :property_id => property) end -%> 
```

如何附加`#gallery`到 URL 的末尾？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T23:08:01.453

试试这个（为了清楚起见分成多行）：

```
link_to(
  image_tag(property.images[0].image.url('350x263', :jpg)),
  user_property_image_path(user,
    :id => property.images[0],
    :property_id => property,
    :anchor => "gallery"
  )
) 
```

关键位是`:anchor => "gallery"`。`#url_for`将识别这一点并将其作为 URL 片段附加到 URL。

有关可用选项的完整列表，请参阅[url_for 上的文档。](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-url_for)

# javascript - 整页图片库加载/调整大小技术

> ID：12849811
> 
> 赞同：1
> 
> 时间：2012-10-11T22:54:35.233
> 
> 标签：javascript, jquery, image, wordpress, gallery

我很好奇我在许多不同的 wordpress 支持的网站上看到的效果。我认为它可能是一个插件，但我不完全确定。

它基本上是一页不同大小的图像，它们根据窗口的宽度组合在一起。当您调整窗口大小时，它们也会非常时尚地重新排列。

当您向下滚动时，图像也会以一种无限滚动的方式加载。

这是我所说的一个完美的例子...... [http://www.someoddpilot.com/work/projects/](http://www.someoddpilot.com/work/projects/)

他们是怎么做到的？我想达到类似的效果，但我不知道从哪里开始。任何见解都会非常有帮助，我对此有些陌生。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T22:56:26.560

有几种技术......我没有看他们具体使用什么，但既然你提到了 jQuery，你应该看看一个插件： **[Isotope](http://isotope.metafizzy.co/)**

![在此处输入图像描述](../Images/80fd5cc8caab694fbba4fb0e42548a55.png)

# msbuild - 将 dirPath Provider 与 WebDeploy 一起使用

> ID：12849812
> 
> 赞同：1
> 
> 时间：2012-10-11T22:54:38.883
> 
> 标签：msbuild, msdeploy, webdeploy

我有一个托管在 iis 中的 wcf 应用程序，我正在尝试使用 webdeploy 打包。一切都适用于 Visual Studio 工具，但我还需要创建一个日志文件夹并设置权限。为此，我在我的 Web 项目中创建了一个 ProjectName.wpp.target 文件。文件看起来像这样

```
<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

<Target Name="CreateLogsDirectory" AfterTargets="AddIisSettingAndFileContentsToSourceManifest">   
    <!-- This must be declared inside of a target because the property 
    $(_MSDeployDirPath_FullPath) will not be defined at that time. -->
    <ItemGroup>
      <MsDeploySourceManifest Include="dirPath">
        <Path>$(_MSDeployDirPath_FullPath)\logs</Path>
        <enableRule>DoNotDeleteRule</enableRule>
      </MsDeploySourceManifest>
    </ItemGroup>
  </Target>

  <Target Name="DeclareCustomParameters" AfterTargets="AddIisAndContentDeclareParametersItems">
    <!-- This must be declared inside of a target because the property 
    $(_EscapeRegEx_MSDeployDirPath) will not be defined at that time. -->
    <ItemGroup>
      <MsDeployDeclareParameters Include="LogsDirectoryPath">
        <Kind>ProviderPath</Kind>
        <Scope>dirPath</Scope>
        <Match>^$(_EscapeRegEx_MSDeployDirPath)\\logs$</Match>
        <Value>$(_DestinationContentPath)/log</Value>
        <ExcludeFromSetParameter>True</ExcludeFromSetParameter>
      </MsDeployDeclareParameters>
    </ItemGroup>
  </Target>
</Project> 
```

我可以看到 dirPath 提供程序已添加到 sourcemanifest 文件中，但是当我部署包时，它会尝试创建源文件路径。本质上，LogsDirectoryPAth 项目并没有替换路径。有人可以指出我需要做什么吗？谢谢 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T22:17:36.970

考虑到您的附加目录位于您的 Web 应用程序中，实际上并没有必要包含另一个`dirPath`提供程序，这样做只会导致更多的麻烦（附加参数声明等）。

这里有一些我用来帮助处理这类事情的助手。您的应用程序特定值可以在您的`wpp.targets`文件中声明：

```
<!-- Items specific to your application (these should be in your wpp.targets) -->
<ItemGroup>
  <SkipDeleteFiles Include="logs" />

  <EmptyDirectoriesToDeploy Include="logs" />

  <AdditionalAcls Include="logs">
    <AclAccess>Write</AclAccess>
  </AdditionalAcls>
</ItemGroup> 
```

并且可以将以下基于约定的定义放入您`wpp.targets`或可以导入到您的通用目标文件中`wpp.targets`：

```
<!-- 
  Empty directories
-->

<PropertyGroup>
  <BeforeAddContentPathToSourceManifest>
    $(BeforeAddContentPathToSourceManifest);
    CreateEmptyDirectories;
  </BeforeAddContentPathToSourceManifest>
</PropertyGroup>

<Target Name="CreateEmptyDirectories">
  <MakeDir Directories="$(_MSDeployDirPath_FullPath)\%(EmptyDirectoriesToDeploy.Identity)" 
           Condition="'@(EmptyDirectoriesToDeploy)' != ''" />
</Target>

<!-- 
  Additional ACLs 
-->

<ItemDefinitionGroup>
  <AdditionalAcls>
    <AclAccess>Write</AclAccess>
    <ResourceType>Directory</ResourceType>
  </AdditionalAcls>
</ItemDefinitionGroup>

<PropertyGroup>
  <AfterAddIisSettingAndFileContentsToSourceManifest>
    $(AfterAddIisSettingAndFileContentsToSourceManifest);
    AddAdditionalAclsToSourceManifest;
  </AfterAddIisSettingAndFileContentsToSourceManifest>
  <AfterAddIisAndContentDeclareParametersItems>
    $(AfterAddIisAndContentDeclareParametersItems);
    AddAdditionalAclsDeclareParameterItems
  </AfterAddIisAndContentDeclareParametersItems>
</PropertyGroup>

<Target Name="AddAdditionalAclsToSourceManifest">
  <ItemGroup Condition="'@(AdditionalAcls)' != ''">
    <MsDeploySourceManifest Include="setAcl">
      <Path>$(_MSDeployDirPath_FullPath)\%(AdditionalAcls.Identity)</Path>
      <setAclResourceType Condition="'%(AdditionalAcls.ResourceType)' != ''">%(AdditionalAcls.ResourceType)</setAclResourceType>
      <setAclAccess>%(AdditionalAcls.AclAccess)</setAclAccess>
      <AdditionalProviderSettings>setAclResourceType;setAclAccess</AdditionalProviderSettings>
    </MsDeploySourceManifest>
  </ItemGroup>
</Target>

<Target Name="AddAdditionalAclsDeclareParameterItems">
  <ItemGroup Condition="'@(AdditionalAcls)' != ''">
    <MsDeployDeclareParameters Include="Add %(AdditionalAcls.AclAccess) permission to %(AdditionalAcls.Identity) Folder">
      <Kind>ProviderPath</Kind>
      <Scope>setAcl</Scope>
      <Match>^$(_EscapeRegEx_MSDeployDirPath)\\@(AdditionalAcls)$</Match>
      <Description>Add %(AdditionalAcls.AclAccess) permission to %(AdditionalAcls.Identity) Folder</Description>
      <DefaultValue>{$(_MsDeployParameterNameForContentPath)}/@(AdditionalAcls)</DefaultValue>
      <DestinationContentPath>$(_DestinationContentPath)/@(AdditionalAcls)</DestinationContentPath>
      <Tags>Hidden</Tags>
      <ExcludeFromSetParameter>True</ExcludeFromSetParameter>
      <Priority>$(VsSetAclPriority)</Priority>
    </MsDeployDeclareParameters>
  </ItemGroup>
</Target>

<!-- 
  Skip delete files and directories
-->

<PropertyGroup>
  <ImportPublishingParameterValuesDependsOn>
    $(ImportPublishingParameterValuesDependsOn);
    AddSkipDirectives;
  </ImportPublishingParameterValuesDependsOn>
</PropertyGroup>

<ItemGroup>
  <SkipDeleteItems Include="@(SkipDeleteFiles)" 
                   Condition="'@(SkipDeleteFiles)' != ''">
    <Provider>filePath</Provider>
  </SkipDeleteItems>

  <SkipDeleteItems Include="@(SkipDeleteDirectories)" 
                   Condition="'@(SkipDeleteDirectories)' != ''">
    <Provider>dirPath</Provider>
  </SkipDeleteItems>
</ItemGroup>

<!-- Uses MSBuild trickery to add an escaped version of the skip path to as 
     "EscapedPath" metadata -->
<Target Name="AddRegexEscapedPathMetadata" Outputs="%(SkipDeleteItems.EscapedPath)">
  <EscapeTextForRegularExpressions Text="%(SkipDeleteItems.Identity)">
    <Output TaskParameter="Result" 
            PropertyName="_Temp_EscapeRegEx_SkipDeleteItemPath" />
  </EscapeTextForRegularExpressions>

  <ItemGroup>
    <SkipDeleteItems Condition="'%(SkipDeleteItems.Identity)' == '%(Identity)'" >
      <EscapedPath>$(_Temp_EscapeRegEx_SkipDeleteItemPath)</EscapedPath>
    </SkipDeleteItems>
  </ItemGroup>

  <PropertyGroup>
    <!-- Clear value -->
    <_Temp_EscapeRegEx_SkipDeleteItemPath></_Temp_EscapeRegEx_SkipDeleteItemPath>
  </PropertyGroup>

</Target>

<Target Name="AddSkipDirectives" DependsOnTargets="AddRegexEscapedPathMetadata">

  <ItemGroup>
    <MsDeploySkipRules Include="%(SkipDeleteItems.Identity)">
      <SkipAction>Delete</SkipAction>
      <ObjectName>%(SkipDeleteItems.Provider)</ObjectName>
      <AbsolutePath>%(SkipDeleteItems.EscapedPath)</AbsolutePath>
    </MsDeploySkipRules>
  </ItemGroup>

</Target> 
```

**注意**如果您付出额外的努力将打包过程与部署过程分开，那么从技术上讲，您`SkipDeleteFiles`应该在您的`pubxml`而不是您的`wpp.targets`.

# html - 元素元上属性名称的错误值谷歌

> ID：12849815
> 
> 赞同：3
> 
> 时间：2012-10-11T22:54:48.090
> 
> 标签：html, meta-tags

谷歌 notranslate 元标记是否有 HTML5 的替代品。验证 HTML5 时出现以下错误。

`Bad value google for attribute name on element meta: Keyword google is not registered. <meta name="google" content="notranslate" />`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-12T14:18:44.153

关键字`google`在[http://wiki.whatwg.org/wiki/MetaExtensions#Registered_Extensions](http://wiki.whatwg.org/wiki/MetaExtensions#Registered_Extensions)注册：

> `notranslate`如果页面是外语形式的用户浏览器，内容将告诉谷歌不要弹出翻译栏/链接。
> 
> `<meta name="google" content="notranslate">`

所以在 HTML5 中使用这个关键字[是有效的。](http://www.w3.org/TR/html5/the-meta-element.html#other-metadata-names)如果验证器将其报告为错误，则验证器可能不是最新的或只是错误的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-17T12:38:42.717

对 html5 执行此操作的正确方法是：

```
<html translate="no">
...
</html> 
```

[W3 说它不应该是谷歌特定的](http://www.w3.org/International/questions/qa-translate-flag)

# jquery - 放宽行不通？

> ID：12849818
> 
> 赞同：0
> 
> 时间：2012-10-11T22:54:59.413
> 
> 标签：jquery, jquery-animate, easing

我试图让它在移动时缓解，但它似乎不起作用..

```
$('#aboutlnk').hover(function(){
    $('#navul').animate({
    left: '753px',
    width:'75px'
    }, {
    duration: 300,
    easing:'easeOut'
    });
}); 
```

另外，如何阻止代码一遍又一遍地运行，例如，如果我将鼠标悬停在同一事物上 100 次，它将继续重播 100 次......！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T23:04:17.603

默认情况下，您指定的缓动不适用于 jquery。尝试线性/摆动

```
easing:'swing' 
```

或者...

```
easing:'linear' 
```

或者，您可以使用缓动插件来访问更多缓动。这是一个很好的... [http://gsgd.co.uk/sandbox/jquery/easing/](http://gsgd.co.uk/sandbox/jquery/easing/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T22:57:47.760

首先，最简单的一个 - 停止动画一直排队，添加一个调用`.stop()`：

```
$('#navul').stop().animate({ 
```

至于缓动，你肯定加载了 jQuery UI 库以及 jQuery 本身吗？本机仅提供“摇摆”和“线性”缓动，您需要在 UI 中加载才能获得更奇特的效果。

# php - png 图像 mime 类型错误 cakephp

> ID：12849831
> 
> 赞同：0
> 
> 时间：2012-10-11T22:56:55.900
> 
> 标签：php, image, cakephp, cakephp-1.3, mime-types

我在 cakephp 应用程序中有一个插件，`app/plugins/my_plugin`其中我有一个 webroot 文件夹，其中包含文件夹中的一些图像`app/plugins/my_plugin/webroot/img/`。我正在尝试将图像作为跨度的背景放在`my_plugin`. 我的跨度是例如：

```
<span class="my_span"><p>Content...</p></span> 
```

而我用来但图像作为背景的css是：

```
.my_span
{
    background-image:url('<?php echo $this->Html->image('/my_plugin/img/my_image.png', array('alt' => 'My Image'))?>');
} 
```

当我这样做时，我收到以下错误：

```
Resource interpreted as Image but transferred with MIME type text/html 
```

但奇怪的是，当我只是尝试将图像放在我的跨度标签中（不通过 CSS 将其作为背景）时，例如：

```
<span class="my_span"><p><?php echo $this->Html->image('/my_plugin/img/my_image.png', array('alt' => 'My Image'))?></p></span> 
```

我的图像显示得很好，没有任何错误。

谁能告诉我为什么我不能把图像作为我跨度的背景？

**注意**：我已经`display:block;`为我的跨度尝试过或其他一切

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T23:34:06.820

问题是这段代码：

```
<?php echo $this->Html->image('/my_plugin/img/my_image.png', array('alt' => 'My Image'))?> 
```

产生这个

```
<img src="/my_plugin/img/my_image.png" alt="My Image" /> 
```

在您的情况下，您想使用此代码：

```
.my_span
{
    background-image:url(/my_plugin/img/my_image.png);
} 
```

参考：[这里](http://book.cakephp.org/1.3/view/1441/image)

# url - 在 Magento 中实现 URL slug

> ID：12849832
> 
> 赞同：0
> 
> 时间：2012-10-11T22:56:57.340
> 
> 标签：url, magento, slug

如何在 URL 中实现“slug”（我相信这是正确的术语）？说网址是

```
www.example.com/module/controller/action1/123 
```

或者

```
www.example.com/module/controller/action1/123/abc 
```

我希望我的`action1`控制器操作方法命中，并且我希望能够访问 value `123`，甚至`123`and `abc`，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T00:39:40.923

```
public function action1Action()
{
    $request = $this->getRequest();
    $data    = $request->getParams();
    var_dump($data);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T09:00:11.277

Magento 使用下一个方案来访问 url 中的值（除了正常的 GET 请求）：

```
www.example.com/module/controller/action1/[key]/[value]/[key2]/[value2] 
```

`action1Action`在您将使用的控制器方法中

```
$value1 = $this->getRequest()->getParam('[key1]'); // [value1]
$value2 = $this->getRequest()->getParam('[key2]'); // [value2] 
```

# c# - 扩展方法的智能感知？

> ID：12849834
> 
> 赞同：8
> 
> 时间：2012-10-11T22:57:10.053
> 
> 标签：c#, visual-studio, resharper, extension-methods, intellisense

有没有办法从当前不在使用中但在解决方案中引用的类中获取扩展方法的智能感知。在类中第一次使用扩展方法时，能够只键入而不需要添加 using 将非常方便。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T00:00:00.640

我相信您正在寻找的是使用 Re#[创建导入符号。](http://www.jetbrains.com/resharper/webhelp/Coding_Assistance__Code_Completion__Type_Name.html)在访问不属于当前 using 语句的成员时，我一直使用它。本质上，Re# 将查看所有引用的程序集并查看是否有任何匹配项，然后提供这些可能匹配项的列表并在需要时导入。

> 导入符号补全（以前称为类型名称补全）显示与给定前缀匹配的所有类型，无论它们属于哪个命名空间（与符号补全相反，它只补全当前可见类型的名称）。如果先前未导入所选类型，则导入符号完成会自动将适当的命名空间导入指令插入当前文件。它也可以在 dot 之后使用扩展方法，并使用指令进行必要的操作。

默认的 Re# 键映射是`Ctrl`+ `Alt`+ `space`。

我不确定我是否更新了我的映射，但我必须使用：`Shift`++`Alt``space`

# algorithm - 如何改进我的 lru 实施

> ID：12849838
> 
> 赞同：0
> 
> 时间：2012-10-11T22:57:44.433
> 
> 标签：algorithm, queue, hashtable, lru

我已经使用哈希表+链表实现了 LRU。

哈希表具有链接。代码结构如下：

```
struct Node{
int value;
struct Node *next;
struct Node* head;
struct Node* tail;

};

struct Node* lruhashtable[10];
struct Node* trackHead;
struct Node* trackTail; 
```

trackHead 和 trackTail 指针用于跟踪插入的顺序。这用于删除最近最少使用的元素。我在想有多个替换策略被使用，而不是一个。因此，LRU 与某些东西的组合一起使用。因此，如果在我再次访问该元素时要从 LRU 中删除一个元素，那么我需要将它从 LRU 中删除。

从本质上讲，我要维护整个序列，如果有数百万个条目，那就不好了。除了使用优先级队列+哈希表之外，还有什么方法可以改善这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T23:04:26.180

你需要维护整个序列，如果有几百万个条目，只要你做对了，那也不错。

关键是像制作任何其他哈希表一样制作哈希表。然后，您只需使用哈希表中的引用，而不是遍历链表来定位这个最近使用的节点。您将其从中间断开并将其移至前面。

从链表中删除元素是一个恒定时间操作，前提是您可以找到要开始的节点。如果没有哈希表，则必须迭代（线性时间），但由于您确实有哈希表，因此您不必进行任何迭代。

# ruby-on-rails - 将@font-face 文件集成到 Rails 资产管道中

> ID：12849840
> 
> 赞同：7
> 
> 时间：2012-10-11T22:57:48.930
> 
> 标签：ruby-on-rails, css, asset-pipeline, font-face

我正在尝试将设计师的 html 和 css 文件集成到 rails 应用程序中。他有大约四个 @font-face 文件，当前链接到 application.css 文件中。我已将字体存储在 assets/fonts 文件夹中，并将该文件夹添加到资产管道（在 config/application.rb 中）

我只使用过 Google 字体，我在 application.html.erb 文件中包含了指向 google 的链接。

我应该如何包含这些字体文件？它们应该 (1) 留在 application.css 文件中还是 (2) 像 javascript 和 styesheets 一样链接到 application.html.erb 文件中？例如，像这样：

```
<%= asset_path('my_webfont.eot') %> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-11T23:02:26.263

首先将您的字体放入`app/assets/fonts`. 之后，您可以通过`font_url('font.eot')`帮助程序将字体包含在 sass / scss 文件中。

否则，`asset_path`如果您决定使用它，仍然应该在那里找到字体。

# .net - 从 EF 5 DbContext 扩展或继承

> ID：12849843
> 
> 赞同：0
> 
> 时间：2012-10-11T22:57:55.937
> 
> 标签：.net, entity-framework, orm, entity-framework-4, entity-framework-5

有没有办法扩展 EF 5 DbContext 以包含其他列或表？

我们有一个应用程序，它有自己的模式，但是当客户要求一些自定义功能时，我们可以向他的应用程序添加字段或表。

例子：

```
Table 'Customers'

CustId
Name
Address 
```

客户要求提供一个专属于他的应用程序的“电话”字段，因此我们在“客户”表中添加一列。

我们的基本模型包含对 CustId、名称和地址的定义，但是仅限于这个特定客户端的“电话”字段呢？

我正在考虑合并 2 个 DbContext 或让我们客户的 DbContext 从基础 DbContext 继承，但这两个选项似乎都不可能。

复制基本 DbContext 将是一个巨大的痛苦，因为应用程序有 600 多个表，我们不想在修改基本应用程序时遍历所有模型来添加字段。

有任何想法吗？

是否有其他 ORM 使这成为可能？

# javascript - 我应该为我的 webapp 使用什么 Python 框架/数据库

> ID：12849846
> 
> 赞同：0
> 
> 时间：2012-10-11T22:58:07.743
> 
> 标签：javascript, python, database, web-applications, web-frameworks

我正在构建一个 web 应用程序。几个月以来，我一直在自学 Python，但我需要帮助弄清楚如何继续构建应用程序，特别是要使用哪个 Web 框架/数据库。

由于我对此很陌生，我可能没有使用正确的术语，而且我确信其中许多事情可能是显而易见的，但这是我需要框架能够做的基本列表：

*   我需要一个数据库，我不确定有多大，数据来自一个 API，API 返回 JSON，我使用简单 JSON 在 python 中解析，所以我认为它只是字符串字典。对于 API 数据，我希望拥有一个大型数据库，其中字典中的每个键/值都是数据库中的列/值，因为这似乎是最容易查询的 - 如果这是，请告诉我一个不正确的假设。

*   在 web 应用程序的前端，我被告知需要用 Javascript 编写，用户将使用各种不同的参数查询数据存储区（例如，显示来自博客 X、Y 和 Z 的最后 10 篇文章，显示主题由博客 A 和博客 B 发布。）

*   该框架应跟踪用户活动并保存数据以用于将来的推荐。多个用户将同时进行查询，框架应该在返回他们请求的数据的同时保存他们的活动。

*   webapp 应该是可扩展的，因此它可以在应用程序因任何原因获得流量/用户等激增的情况下处理请求。这目前是一个小项目，但如果更多人想要使用它，我希望有一个选项，而不必从头开始重新编程。

*   最后，由于我对编程还很陌生，所有条件都相同或几乎相同，我更喜欢易于使用的框架。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T23:08:44.900

一路走 Django [https://www.djangoproject.com/](https://www.djangoproject.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T23:02:55.187

有很多很多很多方法可以做你想做的事。

我一直在做一个家庭项目，它使用 tornado.web（简单的 REST api）、mongodb（存储，尤其适用于 JSON 文档）和 nginx（请求激增的负载平衡）。

对于前端，我使用 nginx 来提供静态 Web 内容......它由用于各种 CRUD 操作的 Backbone.js 应用程序组成。

但我就是这样做的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T23:07:02.310

我建议使用 Google App Engine。它是免费开始的，非常容易使用，有很多示例代码。它是 PAAS，请参阅这个简短的管理介绍：[http ://www.youtube.com/watch?v=ckVyxODiTIo](http://www.youtube.com/watch?v=ckVyxODiTIo)

# java - 在 JPanel 中使用 GroupLayout 来对齐 JTextFields 和 JLabels？

> ID：12849851
> 
> 赞同：2
> 
> 时间：2012-10-11T22:58:38.913
> 
> 标签：java, swing, jlabel, jtextfield, grouplayout

所以，这是我的问题：我使用 oracle 文档作为我的项目的示例，但是当我运行程序时，它显示的只是一个中间有“每周工资：”的框。我究竟做错了什么？

```
JFrame window = new JFrame();
window.setTitle("Weekly Pay");
window.setSize(300, 150);
window.setResizable(false);
window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
Color lGray = new Color(209, 209, 209);
GroupLayout layout = new GroupLayout(window);

JPanel panel = new JPanel();
panel.setBackground(lGray);
panel.setLayout(layout);
layout.setAutoCreateGaps(true);
layout.setAutoCreateContainerGaps(true);

JLabel id = new JLabel("ID Number");
JLabel hw = new JLabel("Hourly Wage");
JLabel rh = new JLabel("Regular Hours");
JLabel oh = new JLabel("Overtime Hours");
JButton calc = new JButton("Calculate");
JTextField idEntry = new JTextField(); //where the user imputs their ID
JTextField hwEntry = new JTextField(); //where the user imputs their hourly wage
JTextField rhEntry = new JTextField(); //where the user imputs their regular hours
JTextField ohEntry = new JTextField(); //where the user imputs their overtime hours
JLabel wp = new JLabel("Weekly Pay:");    

GroupLayout.SequentialGroup hGroup = layout.createSequentialGroup();    
hGroup.addGroup(layout.createParallelGroup().
  addComponent(id).addComponent(hw).addComponent(rh).addComponent(oh).addComponent(calc));
hGroup.addGroup(layout.createParallelGroup().
  addComponent(idEntry).addComponent(hwEntry).addComponent(rhEntry).addComponent(ohEntry).addComponent(wp));
layout.setHorizontalGroup(hGroup);

GroupLayout.SequentialGroup vGroup = layout.createSequentialGroup();    
vGroup.addGroup(layout.createParallelGroup(Alignment.BASELINE).
    addComponent(id).addComponent(idEntry));
vGroup.addGroup(layout.createParallelGroup(Alignment.BASELINE).
    addComponent(hw).addComponent(hwEntry));
vGroup.addGroup(layout.createParallelGroup(Alignment.BASELINE).
    addComponent(rh).addComponent(rhEntry));
vGroup.addGroup(layout.createParallelGroup(Alignment.BASELINE).
    addComponent(oh).addComponent(ohEntry));
vGroup.addGroup(layout.createParallelGroup(Alignment.BASELINE).
    addComponent(calc).addComponent(wp));
layout.setVerticalGroup(vGroup);

window.setVisible(true); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T23:18:01.523

有两个主要问题：您将组布局管理器设置在框架上，而不是面板上，并且您实际上并没有将面板放在框架/窗口上（因为在 java UI 编程中有一个叫做窗口的东西，我质疑将保持框架的变量命名为“窗口”）。

代替“GroupLayout layout = new GroupLayout(window);”，使用“GroupLayout layout = new GroupLayout(panel); // 当然是在面板构建之后”。

然后使用“window.add(panel);” 将面板放在框架/窗口中；我会把这个和“window.pack();” 就在“window.setVisible(true);”之前

rc

# mongodb - MongoDB：如何在清空和重新填充集合时防止读取访问？

> ID：12849853
> 
> 赞同：0
> 
> 时间：2012-10-11T22:58:41.033
> 
> 标签：mongodb

我有一个包含“参考数据”的 MongoDB (v2.2.0) 集合。我需要定期用来自外部来源的数据替换该集合中的所有文档。重要的是，在替换参考数据时，没有任何东西可以访问集合。

我是否认为最好的解决方案是简单地创建一个具有不同名称的新（即“临时”）集合，用数据加载它，然后重命名它？

例如：

1.  创建集合`myCollection-TEMP`
2.  插入所有文件`into myCollection-TEMP`
3.  重命名临时集合以替换（即，在重命名之前删除）当前集合`db.myCollection-TEMP.renameCollection('myCollection', true)`

据我所知，没有办法安全地“清空”集合，“批量导入”文档，并确保在该过程的中间没有其他任何东西可以访问该集合。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T23:02:31.690

是的，创建一个临时集合然后重命名是要走的路。这也是其他技术中的常用方法。例如，计算机图形中的[双缓冲](http://en.wikipedia.org/wiki/Multiple_buffering#Double_buffering_in_computer_graphics)。您在不可见的背景平面中准备一个框架，然后将其与屏幕交换。这会立即更新图片而不会出现闪烁或其他伪影。

# php - 如何在 PHP 中将数组 ro 变量名作为字符串获取？

> ID：12849854
> 
> 赞同：0
> 
> 时间：2012-10-11T22:58:46.833
> 
> 标签：php

我需要这样的功能：

```
$foo = "bar";

$arr['bar'] = "foo";

myfunc(array($foo,$arr['bar'])); // return array('foo','bar') 
```

任何想法如何实现这一目标？这在PHP中甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T23:02:53.030

您可以从字符串名称中获取变量，如下所示：

```
$foo = "123";
$bar = "foo";
var_dump($$bar); // string(3) "123" 
```

但据我所知，你不能走另一条路，找到一个变量的名字。

无论如何都不需要知道变量的名称。尽可能使用关联数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T23:06:35.000

```
<?php
 $foo = "bar";

 $arr['bar'] = "foo";

 echo $$arr['bar']; //returns bar

 myFunc(array($foo,$$arr['bar']));
?> 
```

那会工作..

# java - 为什么 printwriter 实际上不写入文件？

> ID：12849855
> 
> 赞同：2
> 
> 时间：2012-10-11T22:58:47.443
> 
> 标签：java

我已经为这个问题苦苦挣扎了几个小时，不知道如何最好地进行。

代码应该使用凯撒密码读取文件并对其进行编码，然后将其写入磁盘并附加到新文件中 _encoded 。

它当然会创建文件，但每次都是空白的。当我查看文档时，它说要确保冲洗并关闭打印机。我已经做到了。

我也想可能是因为我在绕道而行；我想知道是不是使用了 FileOutputstream。

```
 Scanner sc=new Scanner(inFile);
        //File outFile=new File("caesar_encoded.txt");

        //FileOutputStream outFileStream=new FileOutputStream(outFile);
        PrintWriter outStream=new PrintWriter("caesar_encoded.txt");

        while(sc.hasNext())
        {
            String phrase = sc.nextLine().toUpperCase();
    for (int i = 0; i < phrase.length(); i++) {
        if (Character.isLetter(phrase.charAt(i))) {
            for (int j = 0; j < alpha.length; j++) {
                if (phrase.charAt(i) == alpha[j]) {
                    if (j == alpha.length - 1) {
                        outStream.print(alpha[0]);
                    } else {
                        outStream.print(alpha[j + 1]);
                    }
                }
            }
        } else {
            outStream.print(phrase.charAt(i));
        }
    }
    outStream.println();
        }
        outStream.flush();
        outStream.close();

        sc.close(); 
```

我尝试这样做，但结果相同：

```
Scanner sc=new Scanner(inFile);
 File outFile=new File("caesar_encoded.txt");
 FileOutputStream outFileStream=new FileOutputStream(outFile);
 PrintWriter outStream=new PrintWriter(outFileStream); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-11T23:00:06.867

装饰它：

```
PrintWriter pw = new PrintWriter(new FileWriter("caesar_encoded.txt"), true); 
```

或这个：

```
PrintStream ps = new PrintStream(new FileOutputStream("caesar_encoded.txt"), true); 
```

当然，您了解`Writer`（字符流）和`OutputStream`（字节流）层次结构之间的区别。你通常不会跨越这两者。你可以从 跳转`OutputStream`到`Writer`with `OutputStreamWriter`，但你不能反其道而行之。

这段代码对我来说运行完美。我相信你的方法，猜测`SHIFTED`数组。无论如何，我都会在`encrypted.txt`文件中得到输出。我认为这是您的扫描仪的问题。

```
package io;

import java.io.*;

/**
 * PrintWriterDemo
 * @author Michael
 * @link http://stackoverflow.com/questions/12849855/why-doesnt-printwriter-actually-write-to-the-file/12849867#comment17389040_12849867
 * @link http://en.wikipedia.org/wiki/Caesar_cipher
 * @since 10/11/12 7:17 PM
 */
public class PrintWriterDemo {

    public static void main(String[] args) {
        try {
            File unencrypted = new File((args.length > 0) ? args[0] : "resources/unencrypted.txt");
            File encrypted = new File((args.length > 1) ? args[1] : "resources/encrypted.txt");
            caesar(unencrypted, encrypted);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    private static final char [] SHIFTED = { 
            'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 
            'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z', 'A', 'B', 'C' };

    public static void caesar(File unencrypted, File encrypted) throws IOException {
        BufferedReader br = new BufferedReader(new FileReader(unencrypted));
        PrintWriter pw = new PrintWriter(encrypted);
        String line = "";
        while ((line = br.readLine()) != null) {
            String phrase =line.toUpperCase();
            for (int i = 0; i < phrase.length(); i++) {
                if (Character.isLetter(phrase.charAt(i))) {
                    for (int j = 0; j < SHIFTED.length; j++) {
                        if (phrase.charAt(i) == SHIFTED[j]) {
                            if (j == SHIFTED.length-1) {
                                pw.print(SHIFTED[0]);
                            } else {
                                pw.print(SHIFTED[j+1]);
                            }
                        }
                    }
                } else {
                    pw.print(phrase.charAt(i));
                }
            }
            pw.println();
        }
        pw.flush();
        pw.close();
        br.close();
    }
} 
```

这是我的 unencrypted.txt 输入：

```
This should work out fine.
I have no idea what the problem is with the original code.
But I do know that this writes just fine. 
```

这是我的 encrypted.txt 输出：

```
UIJT TIPVME XPSL PVU GJOF.
J IBWF OP JEFB XIBU UIF QSPCMFN JT XJUI UIF PSJHJOBM DPEF.
CVU J EP LOPX UIBU UIJT XSJUFT KVTU GJOF. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T00:02:31.810

你的代码对我来说很好。我已经粘贴了不影响功能的更改。也许您没有`char[] alpha`正确初始化（不是在您发布的代码中）或者需要像我一样使用完整的文件名。

```
File inFile = new File("C:\\Users\\name\\Documents\\workspace\\Testing\\src\\receiver.txt");
Scanner sc=new Scanner(inFile);//unchanged
char[] alpha =  {'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K'}; 
PrintWriter outStream=new PrintWriter("C:\\Users\\name\\Documents\\workspace\\Testing\\src\\caesar.txt");
//rest of code is identical
/*
receiver.txt (input file):
<?xml version="1.0" encoding="UTF-8"?>
<tradeevent>
   <event>
      <eventId>612</eventId>
      <relatedId>0</relatedId>
      <operationalEventIndicator></operationalEventIndicator>
      <effectiveDate>2012-08-07T11:20:47.09</effectiveDate>
      <id>612</id>
      <createdOnDate>0</createdOnDate>
   </event>
   <trade>
...
caesar.txt (created output file):
<? FJ="1.0" FDEJH="G-8"?>
<EFFF>
   <FF>
      <FFJE>612</FFJE>
      <FFEJE>0</FFEJE>
      <FJFFJEJD></FJFFJEJD>
      <FGGFDJFEF>2012-08-0711:20:47.09</FGGFDJFEF>
      <JE>612</JE>
      <DFFEEF>0</DFFEEF>
   </FF>
   <EF>
...
*/ 
```

# playframework-2.0 - 为什么我不能在 play 2 上运行测试？

> ID：12849858
> 
> 赞同：0
> 
> 时间：2012-10-11T22:58:54.797
> 
> 标签：playframework-2.0

我有一个简单的电子邮件类，例如（我正在使用[Emailer](https://github.com/typesafehub/play-plugins/tree/master/mailer)插件）：

```
public class Email {

public static boolean sendEmail(final String to, final String body, final String subject) {

    MailerAPI mail = play.Play.application().plugin(MailerPlugin.class).email();
    mail.setSubject(subject);
    mail.addRecipient(to);

    try {
        mail.send(body);
        Logger.info(String.format("Sucessfully sent an email to %s", to));
        return true;
    } catch (Exception e) {
        Logger.info(String.format("An error occured when trying to send email to %s: %s", to, e.getStackTrace()));
    }

    return false;
} 
```

}

我尝试使用测试类对此进行测试：

```
public class EmailTest {

@Test
public void sendEmail() {
    running(fakeApplication(), new Runnable() {
        public void run() {
            boolean status = Email.sendEmail("my_email", "hello", "subject demo");
            assertThat(status).equals("true");
        }
    });
} 
```

}

我跑：`play test`但我收到：

```
 [info] EmailTest
[error] Test EmailTest.sendEmail failed: null
[error]     at utils.Email.sendEmail(Email.java:12)
[error]     at EmailTest$1.run(EmailTest.java:15)
[error]     at play.test.Helpers.running(Helpers.java:294)
[error]     at EmailTest.sendEmail(EmailTest.java:13)
[error]     ...
[info] x EmailTest.sendEmail
[info]
[info]
[info] Total for test EmailTest
[info] Finished in 11.073 seconds
[info] 1 tests, 1 failures, 0 errors
[error] Failed: : Total 1, Failed 1, Errors 0, Passed 0, Skipped 0 
```

你能告诉我我做错了什么吗？它不会引发异常更清楚地找出失败的原因......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T05:18:15.483

发生错误不是因为测试工作流程，而是因为我忘了添加这个：

`1500:com.typesafe.plugin.CommonsMailerPlugin`

玩.plugins。

# ant - Android 处理中未显示 Ant 调试信息

> ID：12849866
> 
> 赞同：0
> 
> 时间：2012-10-11T23:00:02.340
> 
> 标签：ant, processing

处理工作找到了，我可以为 Android 构建并在我的设备上运行它。但是，如果代码中有一些编译时错误，例如引用不存在的变量，Processing 会告诉我：

```
BUILD FAILED
C:\Program Files\Android\android-sdk\tools\ant\build.xml:679: The following error occurred while executing this line:
C:\Program Files\Android\android-sdk\tools\ant\build.xml:692: Compile failed; see the compiler error output for details. 
```

没有关于错误位置的信息，这很烦人。我想出的唯一解决方法是通过控制台手动构建 ANT。在控制台中，错误按预期显示...

我已将处理更新到最新版本 2.03b，并且我已下载 ANT 的最新版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T23:43:15.270

由于拼写错误，我遇到了类似的错误。不幸的是，我不知道对此的解决方案，但也许可以提出另一种（更好，更简单？）的解决方法。如果您在 Processing 中导出项目并在另一个 IDE（例如 Eclipse）中打开它，您将看到详细的错误和警告。我花了整个周末才这样做，并在使用 Eclipse 打开项目后立即发现我的错字。与 Processing for Android wiki 使 Eclipse 听起来像的相反，使用 Eclipse 非常容易（我不是程序员，只在 Eclipse 中运行“Hello Android”程序）。未来版本的处理中可能会包含更详细的错误输出。希望这可以帮助！

# c# - 检查usps地址的好服务？

> ID：12849870
> 
> 赞同：0
> 
> 时间：2012-10-11T23:00:26.870
> 
> 标签：c#, asp.net, web-services, web-applications

美国有没有人知道我可以在网站上使用的优质服务 (api) 来验证客户输入的 usps 地址？其他开发人员之一已准备好代码，但它会检查我们每季度通过邮件收到的 DVD。我们只想通过网络检查它，这样它就不会过时。我们也希望它也能格式化地址。如果有人有任何好的建议，请告诉我。这显然是一个付费解决方案。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T23:04:47.883

USPS 为此提供了网络服务。查看他们的[地址信息 API](https://www.usps.com/business/webtools.htm)。

> 确保邮寄地址正确。使用每个工具，每个请求最多可以处理五个查找​​。使用这些电子商务 API 需要额外的权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T23:05:48.323

这个问题对一家公司来说是非常具体的。您可以使用 USPS 跟踪网页，并且必须解析该页面上的内容或使用 USPS 提供的 API（如果有）。这是特定于公司的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T02:19:20.490

[http://www.melissadata.com/address-verification/index.htm](http://www.melissadata.com/address-verification/index.htm)

似乎是一项非常准确的服务，尽管我从未使用过他们的 API，只是网站。

# c# - Azure 中用于 WebRole 间通信的套接字通信

> ID：12849872
> 
> 赞同：-1
> 
> 时间：2012-10-11T23:00:31.327
> 
> 标签：c#, sockets, azure, tcp, cloud

我正在尝试在 Azure 中创建一个简单的客户端服务器。我在一个 webrole 中有客户端，在另一个 webrole 中有服务器，两者都属于同一个租户。我想在两者之间使用简单的套接字通信将一个虚拟文件从客户端发送到服务器。

这是我编写应用程序的方式（为清楚起见，删除了一些代码）：

1- 为每个角色定义“内部”tcp 端点。假设服务器的端口是 9000。客户端的端口是 9010。

2-客户端向服务器发送一个虚拟文件，如下所示：

```
byte[] buffer = File.ReadAllBytes(filePath);
mSocket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.IP);
mSocket.Connect(IPAddress.Parse(serverIPString), 9000);
mSocket.Send(buffer); 
```

3- 在服务器上，我执行以下操作：

```
IPEndPoint ipEnd = new IPEndPoint(IPAddress.Any, 9000);
mSocket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.IP);
mSocket.Bind(ipEnd);
mSocket.Listen(BACKLOG);
Socket socket = mSocket.Accept();
byte[] buffer = new byte[BUFFER_SIZE];
int byteCount = socket.Receive(buffer); 
```

在 Azure 模拟器中本地一切正常，但是当我转到云端时，服务器没有任何连接:(

请帮忙！

附录：

有人问我如何找到我的端点。我在服务器的主页上显示我的端点，如下所示，并让发送者/客户端在文本框中指定他们要将文件发送到的 IP。

```
foreach (var instance in RoleEnvironment.CurrentRoleInstance.Role.Instances)
            foreach (KeyValuePair<string, RoleInstanceEndpoint> pair in instance.InstanceEndpoints)
                addresses += "[" + pair.Key + "] " + pair.Value.IPEndpoint.Address + ":" + pair.Value.IPEndpoint.Port + ", "; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T23:12:35.210

这可能是网络/IP 问题，例如防火墙或代码无法识别 IP 并且不允许通信通过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T23:07:51.500

您的服务器需要循环等待连接。我不确定您是否只是为您的示例代码总结了这一点，或者这是否是缺少的。就您调用其操作的顺序而言，您对 Socket 接口的使用看起来是正确的。

希望这有助于[http://msdn.microsoft.com/en-us/library/6y0e13d3.aspx](http://msdn.microsoft.com/en-us/library/6y0e13d3.aspx)

附录：没关系，只是注意到 Socket.Accept() 挂起，所以不应该有我在看它时想到的问题。

# c#-4.0 - MSTest 单元测试 - 处理异常

> ID：12849877
> 
> 赞同：2
> 
> 时间：2012-10-11T23:01:33.903
> 
> 标签：c#-4.0, mstest

我有一个使用 Selenium WebDriver 的 C# 单元测试来测试是否存在链接。这是代码：

```
 [TestMethod()]
    public void RegisterLinkExistTest()
    {
        IWebElement registerLink = genericBrowserDriver.FindElement(By.PartialLinkText ("Register1"));
        Assert.AreEqual("Register here", registerLink.Text, "Failed");
    } 
```

我想看看如果我将 PartialLinkText 设置为“Register1”而不是“Register”会发生什么。MSTest 未能通过 Selenium 引发的异常而导致此测试。我希望 Assert.AreEqual 执行，但 MSTest 在上一行抛出异常。我知道我可以使用 ExpectedException 属性来指定“OpenQA.Selenium.NoSuchElementException”，但我不想这样做，因为我不希望出现这种异常。我该如何处理这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T07:41:15.673

正如@AD.Net 已经说过的，您的测试按预期工作。

如果找不到链接，您可以捕获异常，但我不明白这样做的意义。如果未找到链接，`registerLink`则将为`null`. 断言空对象的属性有什么意义？

您的测试工作正常，只需删除该`Assert`行。

但是，如果您还想测试链接的文本，请尝试以下代码：

```
[TestMethod()]
public void RegisterLinkExistTest()
{
    try
    {
        IWebElement registerLink = genericBrowserDriver.FindElement(By.PartialLinkText ("Register1"));
        Assert.AreEqual("Register here", registerLink.Text, "Register's link text mismatch");
    }
    catch(NoSuchElementException)
    {
        Assert.Fail("The register link was not found");
    }
} 
```

**编辑**

您可以分开您的测试，第一个测试将检查链接是否存在，第二个将断言它的属性。

```
[TestMethod()]
public void RegisterLinkExistTest()
{
    IWebElement registerLink = genericBrowserDriver.FindElement(By.PartialLinkText ("Register1"));
}

[TestMethod()]
public void RegisterLinkTextTest()
{
    IWebElement registerLink = genericBrowserDriver.FindElement(By.PartialLinkText ("Register1"));
    Assert.AreEqual("Register here", registerLink.Text, "Register's link text mismatch");
} 
```

然后使用[OrderedTest](http://msdn.microsoft.com/en-us/library/ms182631%28v=vs.100%29.aspx)并按该顺序添加它们，以便`RegisterLinkExistTest`首先执行。如果失败，则第二个测试将不会运行。

# clojure - Clojure REPL 的历史长度是什么？

> ID：12849878
> 
> 赞同：4
> 
> 时间：2012-10-11T23:01:34.823
> 
> 标签：clojure, intellij-idea, read-eval-print-loop, leiningen

设置在哪里？我正在使用 Lein REPL 和 LaClojure REPL，我找不到设置历史长度的位置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T03:03:36.547

有`idea.cycle.buffer.size`idea.properties文件的选项（位于bin目录中）：

```
---------------------------------------------------------------------
This option controls console cyclic buffer: keeps the console output size not higher than the specified buffer size (Kb)
Older lines are deleted. In order to disable cycle buffer use idea.cycle.buffer.size=disabled
--------------------------------------------------------------------
idea.cycle.buffer.size=1024 
```

同样在[https://stackoverflow.com/a/10793230/151650](https://stackoverflow.com/a/10793230/151650) Micah 提到`set history-size 10000`了 .inputrc 文件中的设置

# ruby-on-rails - Faye：即使套接字打开，也无法在浏览器中发送 GET 消息，通过 CURL 工作和响应数据

> ID：12849879
> 
> 赞同：0
> 
> 时间：2012-10-11T23:01:43.017
> 
> 标签：ruby-on-rails, websocket, thin, faye

所以我的 websocket 可以正常打开到 faye，我正在使用 nginx_tcp_proxy 模块。当我运行卷曲时，它看起来不错：

```
$ curl http://now.2u.fm:9200/faye\?message\=%5B%7B%22channel%22%3A%22%2Fmeta%2Fhandshake%22%2C%22version%22%3A%221.0%22%2C%22supportedConnectionTypes%22%3A%5B%22callback-polling%22%5D%2C%22id%22%3A%221%22%7D%5D\&jsonp\=__jsonp6__
__jsonp6__([{"id":"1","channel":"/meta/handshake","successful":true,"version":"1.0","supportedConnectionTypes":["long-polling","cross-origin-long-polling","callback-polling","websocket","eventsource","in-process"],"clientId":"jls0srprht51xb368yrojft3h4drgu0","advice":{"reconnect":"retry","interval":0,"timeout":45000}}]);# 
```

并使用 -I 标志卷曲

```
HTTP/1.1 200 OK
...
Connection: close 
```

但是当我的网站尝试将其作为 GET（无错误代码）时，我收到了失败的 GET 请求：

![在此处输入图像描述](../Images/974ef533e105b028ffed319297c5b659.png)

编辑：我注意到它刚才说“切换协议”！

![在此处输入图像描述](../Images/e0527f19f8ad4a7a69d44bb01a69c071.png)

与我尝试直接在浏览器中点击[网址时相同。](http://now.2u.fm:9200/faye%5C?message%5C=%5B%7B%22channel%22%3A%22%2Fmeta%2Fhandshake%22%2C%22version%22%3A%221.0%22%2C%22supportedConnectionTypes%22%3A%5B%22callback-polling%22%5D%2C%22id%22%3A%221%22%7D%5D%5C&jsonp%5C=__jsonp6__)

我的直觉说，“嘿，那是因为你打开了一个 tcp 连接而不是一个 http 连接！”，但是 private_pub 使用 GET 吗？但就我所知，GET 请求通过 TCP 就可以了，但我做错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T08:52:23.667

我发现问题是 Faye 需要能够打开套接字并使用 http。因为 private_pub 假设你在同一个域/端口上都这样做，所以使用 tcp 模块是不可能的，而无需修改 private_pub 和它正在加载的 faye 扩展以使用正确的端口。

最后我改用了 HAProxy，因为它设置起来更简单，并且不需要修改私人 pub。

# sql - 使用游标更新单个表中的行

> ID：12849883
> 
> 赞同：0
> 
> 时间：2012-10-11T23:02:48.350
> 
> 标签：sql, sql-server, stored-procedures, merge, cursor

我正在寻求使用 MS SQL 游标或 SQL while 循环的指导，以根据以下标准使用单个表合并（添加、更新和设置非活动）行，从而寻求最终数据集：

* * *

表视图（从表中选择 * 实体 = 123 (@ID)

**ENTITY**     **ENTITY_TYPE**    **值**     **STATUS_TYPE**

123 1 1 1
123 1 4 1
123 1 9 1

表视图（从表中选择 * 实体 = 456 (@OverrideID)

**实体**    **ENTITY_TYPE**    **值**    **STATUS_TYPE**
456 1 1 1
456 1 5 1

最终数据集如下：

**实体**   **类型**    **值**    **STATUS_TYPE**

123 1 1 3
123 1 4 3
123 1 9 3
456 1 1 1
456 1 4 1
456 1 9 1
456 1 1 1
456 1 5 1

-- 检查并比较每一行
-- IF @OverrideID = @ID (MATCH)
----- 将@ID 设置为非活动保留副本
-- If @OverrideID != @ID (NOT MATCH)
----- 使用@OverrideID (COPY) 插入@ID 数据
----- 将@ID 设置为非活动.

我开始写以下内容并需要帮助。作为参考，@ID = 123 和 @OverrideID = 456

* * *

```
DECLARE @ENTITY BIGINT, @ENTITY_TYPE BIGINT, @VALUE BIGINT, @E1 BIGINT, @T1 BIGINT, @V1 BIGINT
DECLARE type_cursor CURSOR LOCAL FAST_FORWARD FOR
SELECT * FROM TypeValue WHERE ENTITY = @ID

SET NOCOUNT OFF
OPEN type_cursor

FETCH NEXT FROM type_cursor INTO @OverrideID, @ID, @ENTITY, @ENTITY_TYPE, @VALUE

WHILE (@@FETCH_STATUS = 0)
    BEGIN

        SELECT @ENTITY, @ENTITY_TYPE, @VALUE

     IF @VALUE IS NOT NULL
        BEGIN
        SELECT @T1 = @ENTITY_TYPE, @V1 = @VALUE
        END
    ELSE
    BEGIN
    UPDATE TypeValue
    SET ENTITY = @OverrideID, ENTITY_TYPE = @T1, VALUE = @V1 WHERE ENTITY = @ID
    END

FETCH NEXT FROM type_cursor INTO @OverrideID, @ID, @ENTITY, @ENTITY_TYPE, @VALUE

END

CLOSE type_cursor 
DEALLOCATE type_cursor 
SET NOCOUNT OFF 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T23:09:25.933

最终结果集看起来像

```
 select entity,entity_type,value,3 status_type
      from [table]
     where entity = @id
 union all
    select @override,entity_type,value,status_type
      from [table]
     where entity = @id
 union all
    select entity,entity_type,value,status_type
      from [table]
     where entity = @override 
```

# asp.net - 当 ExtensionlessUrlHandler-Integrated-4 被移除并使用 RewritePath 时，IIS 7.5 自定义 404 页面为空

> ID：12849887
> 
> 赞同：3
> 
> 时间：2012-10-11T23:02:59.003
> 
> 标签：asp.net, iis-7, httpmodule

我将 HTTPContext.RewritePath 用于没有扩展名且文件系统上不存在的路径。我希望它返回我的自定义 404 页面。我在 Windows 7 上使用 IIS 7.5、.Net 4 和集成管道。

重写发生在一个名为 RewriteExampleModule 的 HTTPModule 中。如下所示。

```
using System;
using System.Web;

public class RewriteExampleModule : IHttpModule
{
    public RewriteExampleModule()
    {
    }

    private void context_PostAuthorizeRequest(object sender, EventArgs e)
    {
        HttpContext context = ((HttpApplication)sender).Context;
        String path = context.Request.RawUrl;
        if (path.IndexOf("/edit/") > -1)
        {
            path = path.Replace("/edit/", "/");
            context.RewritePath(path);
        }
    }
    public bool IsReusable
    {
        get { return true; }
    }

    public void Dispose()
    {

    }

    public void Init(HttpApplication context)
    {
        context.PostAuthorizeRequest += new EventHandler(context_PostAuthorizeRequest);
    }
} 
```

它在模块部分中配置如下，

```
<modules runAllManagedModulesForAllRequests="true">
  <add name="RewriteExampleModule" type="RewriteExampleModule" />
</modules> 
```

对不存在 /asdf 的 /edit/asdf 的请求的结果是 500 错误。它应该是404，但不是。

下列的，

[IIS 7.5 – 应用 Windows Server 2008 R2 SP1 后无扩展 URI 处理的重大变化？](https://stackoverflow.com/questions/11633611/iis-7-5-a-breaking-change-in-extensionless-uris-handling-after-windows-server)

我已经删除了 ExtensionlessUrlHandler，现在得到了 404。但是，响应的主体是空的。连同下面显示的重写模块是我完整的 web.config

```
<?xml version="1.0"?>
<configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.0"/>
  </system.web>
  <system.webServer>
    <validation validateIntegratedModeConfiguration="true" />
    <modules runAllManagedModulesForAllRequests="true">
      <add name="RewriteExampleModule" type="RewriteExampleModule" />
    </modules>
    <handlers>
      <remove name="ExtensionlessUrlHandler-Integrated-4.0" />
    </handlers>
    <httpErrors existingResponse="Replace" errorMode="Custom">
      <remove statusCode="404" subStatusCode="-1" />
      <error statusCode="404" prefixLanguageFilePath="" path="/404error.aspx" responseMode="ExecuteURL" />
    </httpErrors>
  </system.webServer>
</configuration> 
```

使用此配置调用

/编辑/asdf

其中 /asdf 不存在返回 404 状态代码，但没有在 httpErrors 下的 web.config 中指定的自定义内容。

为什么404主体是空的？没有重写 /edit/ 的任何其他路径都可以。

# web-services - 如何实现向后兼容的soap webservice（基于java）？

> ID：12849890
> 
> 赞同：2
> 
> 时间：2012-10-11T23:03:12.330
> 
> 标签：web-services, spring, jakarta-ee, axis2, spring-ws

我们的一个产品使用最后契约的方法发布了一个 web 服务。这已成为一个真正的问题，因为我们所有的客户（ws 客户）都必须在我们发布产品的新版本后立即重建他们的客户端应用程序。这是由于所有命名空间更改都作为自动生成的 wsdls 的成本。我们将 Axis1 用于 javatowsdl。我一直在寻找一种好的方法/工具来为此开发向后兼容的 Web 服务。

即 9.3 版本的客户端仍然可以访问 10.0 服务，因为他们会错过一些功能，这很好。但它们应该能够在不中断的情况下运行。

我确实理解整个问题是由于我们的合同最后一种方法（如果我错了，请纠正我）。因此，如果解决方案是采用合同优先的 Web 服务，我可以使用哪些工具和技术？还有什么是围绕合同优先的最佳实践？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T00:56:39.140

正如您已经意识到的那样，建议使用合同优先（或自顶向下）的方法来开发 Web 服务。这意味着手动定义您的 WSDL 接口并使用自动工具基于此文档生成 Web 服务的 Java 框架。

重要的是您的 WSDL 符合[WS-I 标准](http://www.ws-i.org/)以确保不同平台上的客户端之间的互操作性。您可以使用[SOAP-UI](http://www.soapui.org/)来测试您的 WSDL 是否与标准兼容。

对于骨架生成，您可以使用几个 Web 服务运行时 API：如 Apache Axis 和 JAX-WS。我个人更喜欢 JAX-WS，因为它是一种 Java 标准，并且受到所有 Java EE 容器的支持。每个容器都为骨架生成提供了工具，Weblogic 有一些不错的[Ant 任务](http://docs.oracle.com/cd/E23943_01/web.1111/e13758/setenv.htm#i214591)，但也有容器中立的[WS-Import](http://docs.oracle.com/javase/6/docs/technotes/tools/share/wsimport.html)。

# c# - Visual C#“无法加载文件或程序集或其依赖项之一”

> ID：12849891
> 
> 赞同：5
> 
> 时间：2012-10-11T23:03:24.857
> 
> 标签：c#, .net, visual-studio-2010, dll

我看过这个问题，我在网上找到了很多关于它的条目..但没有一个我能理解。也许你能帮忙？我有一个 dll 文件（从 ac 脚本创建），我使用 Visual C# 2010 为我的程序创建了一个 GUI。我已经在 5 台不同的计算机上测试了我的应用程序。在我的计算机和我创建应用程序的计算机上，用户界面和程序运行没有任何问题。但是，当我将它传递给其他计算机时，我在程序执行后收到以下错误行（这意味着用户界面打开，但是当我插入所有值并运行存储在 dll 文件中的代码时，我收到错误）“无法加载文件或程序集“ParsingDll.dll”或其依赖项之一。找不到指定的模块。

所有计算机都运行 microsoft windows 7 并且是 64 位的。dll文件“ParsingDll.dll”是包含我由GUI执行的代码的文件，它与可执行文件位于同一文件夹中。

如果有人能帮助我解决这个问题，我将不胜感激，并与我一起一步一步地进行，因为我对这些东西很陌生。

非常感谢大家。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T23:05:38.430

使用的程序集之一可能需要不可用的（本机）库。

您可以启用融合日志记录以准确找出导致问题的原因：

这会记录加载的内容，以及融合加载程序*在哪里*查找程序集，在注册表中打开融合日志记录：

> 将以下值添加到
> 
> ```
>  HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Fusion 
> ```
> 
> 添加：
> 
> ```
>  DWORD ForceLog set value to 1
>  DWORD LogFailures set value to 1
>  DWORD LogResourceBinds set value to 1
>  String LogPath set value to folder for logs e.g. C:\FusionLog\ 
> ```
> 
> 此文件夹必须存在，并以反斜杠结尾

^([（从How to enable assembly bind failure logging (Fusion) in .NET](https://stackoverflow.com/questions/255669/how-to-enable-assembly-bind-failure-logging-fusion-in-net/1527249#1527249)复制的说明）)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T23:06:59.443

导入dll，编译包括dll在内的所有项目。如有必要，刷新、重新启动、重新启动计算机。确保 DLL 存在于计算机上。重新启动，刷新，重新编译，清理应该修复它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T23:07:41.053

检查您的 ParsingDll.dll 是否被阻止。您可以通过查看 dll 文件的属性来检查。如果它被阻止，将有一个“取消阻止”按钮。

# ios - 有人让 PersistentConnectionLogging.mobileconfig 与 iOS 6 一起调试推送通知吗？

> ID：12849893
> 
> 赞同：1
> 
> 时间：2012-10-11T23:03:36.180
> 
> 标签：ios

我已经安装了 PersistentConnectionLogging.mobileconfig 根据我的设备

[http://developer.apple.com/library/ios/#technotes/tn2265/_index.html](http://developer.apple.com/library/ios/#technotes/tn2265/_index.html)

但日志中没有显示任何内容。即使我成功地向手机发送了苹果推送，控制台中也没有显示任何内容，根据技术说明应该有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-30T04:21:35.657

参考：

[https://developer.apple.com/library/ios/technotes/tn2265/_index.html#//apple_ref/doc/uid/DTS40010376-CH1-TNTAG22](https://developer.apple.com/library/ios/technotes/tn2265/_index.html#//apple_ref/doc/uid/DTS40010376-CH1-TNTAG22)

“注意：在 iOS 6.x 上，推送日志不会写入设备控制台。它们只能通过将设备与 iTunes (r. 12575868) 同步来获得。”

...我想知道你是否在 iOS6 上。

-艾伦

# html - 当窗口宽度增加时，下拉在页面外渲染并且不关闭

> ID：12849903
> 
> 赞同：0
> 
> 时间：2012-10-11T23:04:30.013
> 
> 标签：html, css, jquery-chosen

我正在使用 Harvest 的“选择”插件，它工作正常，直到浏览器窗口的宽度增加太多——然后由于某种原因，它计算出左边应该是 -9000 并在屏幕外渲染。

此外，我无法再通过单击下拉区域外部来关闭它。

下面的屏幕截图——可以看到的下拉菜单用红色圈起来。有没有其他人遇到过这个问题？

![屏幕外渲染下拉](../Images/3b2eee41cd0bdc52f38b5eebabc2e0ea.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T23:23:47.337

我才意识到发生了什么。

当您在输入/下拉列表之外时，下拉列表仍会呈现，但*左侧为 -9000px*。

我的浏览器宽度目前约为 9400 像素。

不过，实际上仍然不知道为什么它没有关闭。

编辑：编辑 src 以使用显示/隐藏而不是左，它现在可以工作....

# jquery - sharepoint 2010 - 使用 jquery/ajax 在 web 部件区域中动态加载 web 部件

> ID：12849910
> 
> 赞同：1
> 
> 时间：2012-10-11T23:05:09.233
> 
> 标签：jquery, ajax, sharepoint, web-parts

我想要一个链接，当单击加载保留其用户配置的 Web 部件（例如列表视图 Web 部件）时。因此，它需要位于 Web 部件区域中，可个性化并保留其以前访问的个性化。

我的实际情况是我有一个应用程序在左侧有导航/选项卡，当单击每个选项卡时，它会在右侧显示一个隐藏的 div，其中包含与单击的选项卡相关的内容。

每个 div/content 都有不同类型的数据，一些 div 将具有自定义 Web 部件/控件，而其他将具有开箱即用的。这些需要在没有回发的情况下加载，因为每个 div 上都有很多内容，我宁愿不将所有内容都预加载到隐藏的 div 中。谢谢 ：）

# java - 如何在 Apache POI 3.7 以上版本的工作簿、工作表和单元格中设置字符编码？

> ID：12849913
> 
> 赞同：0
> 
> 时间：2012-10-11T23:05:24.310
> 
> 标签：java, character-encoding, apache-poi

HSSF Excel 类的字符编码方法似乎已从 3.8 版本中删除。我真的需要至少在单元格上指定编码。API 甚至不再注册编码方法，甚至没有被弃用，尽管它们已经离开了编码的静态字段。

¿ 如何在新的 POI 版本中设置编码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T15:41:38.220

好的，有一种方法可以根据您的需要从您的代码中执行此操作：

```
//Create the workbook, and the font
HSSFWorkbook wb;
HSSFFont wbFont;
wbFont=wb.createFont();
wbFont.setCharSet(HSSFFont.ANSI_CHARSET); //Your Character encoding goes in the parameter
//Establish cell styles
HSSFCellStyle cellStyle =wb.createCellStyle();
cellStyle.setFont(wbFont);
//We create our cells with our data and with our specified format
HSSFCell cell =null;
cell = row.createCell(1);
cell.setCellStyle(cellStyle);
cell.setCellValue("MY DATA");
//Do the rest for whatever you might need for your workbook and then you create it 
```

请记住，这些类仅适用于 .xls 2003

# azure - ACS账户迁移制作

> ID：12849915
> 
> 赞同：0
> 
> 时间：2012-10-11T23:05:44.743
> 
> 标签：azure, acs

我有一个客户，他使用访问控制服务 (ASP.NET) 开发了社交媒体 (Facebook) 登录功能。

这是使用开发人员帐户（名称空间）设置的，并使用此开发 a/c 将其全部用于生产。我的客户现在想将其迁移到公司帐户（信用卡）。我想知道在 Azure 中执行此操作的最简单方法是什么？

他们希望零停机时间，我确实建议在新空调上配置所有内容，然后进行必要的 web.config 更改，他们想知道是否有更简单的方法？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T00:01:48.050

除了更改配置设置之外，我想不出更简单的方法（本质上是从应用程序设置一个新的“信任”到新的 ACS 命名空间：WIF 配置部分中的“发行者”属性 + 受信任的发行者部分）。

您必须确保配置了新的命名空间，以便它提供您的应用程序期望的声明 => 命名空间中的所有配置元素都是正确的（例如，RP、规则、IdP 等）。但我想你已经明白了。

# html - 编写一个 css3 规则以匹配第 2 个子元素 N

> ID：12849916
> 
> 赞同：2
> 
> 时间：2012-10-11T23:05:45.297
> 
> 标签：html, css, css-selectors

给定以下 html 块

```
<div><span></span><span></span><span></span>
    <div><span></span><span></span><span></span></div>
</div>​ 
```

和这个CSS

```
span {
    display: inline-block;
    width: 70px;
    height: 50px;
}
div > div > span { visibility: hidden; }
span:not(:first-child) { margin-left: 5px; }
span:first-child {background-color: red;}
span:nth-child(2) {background-color: green;}
span:nth-child(3) {background-color: blue;}

span:nth-child(1):hover ~ div span:nth-child(1),
span:nth-child(2):hover ~ div span:nth-child(2),
span:nth-child(3):hover ~ div span:nth-child(3)
{ visibility: visible; }
​ 
```

您能否使用一些智能 css 重写最后一条规则，以便无论有多少个 div，它始终使您当前悬停在外部的 N 的内部 div 中的第 n 个孩子可见？

这个小提琴中的演示[http://jsfiddle.net/E34ay/3/](http://jsfiddle.net/E34ay/3/)

换句话说，我想要类似的东西：

```
span:nth-child(N):hover ~ div span:nth-child(N) { visibility: visible; } 
```

但它只会匹配已经匹配的 N 而不是所有的孩子（第一个 N = 第二个 N）

这是一个画廊，将像这样[http://jsfiddle.net/2zFsf/](http://jsfiddle.net/2zFsf/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T23:20:39.783

在这种情况下，单独的 CSS 不足以完成您想做的事情，SASS（或 SCSS）真的可以帮助您。

使用[`@for`control 指令](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#id11)，就像改变一个数字来放大一样简单：

```
@for $i from 1 through 3 {
  span:nth-child(#{$i}):hover ~ div span:nth-child(#{$i}) { 
      visibility: visible; 
  }
} 
```

哪个编译为您的确切 CSS。将 3 更改为您计划拥有的跨度。

[演示](http://codepen.io/anon/pen/IGegw)

# task - 是否可以保存和恢复 libtask 协程？

> ID：12849919
> 
> 赞同：3
> 
> 时间：2012-10-11T23:05:54.957
> 
> 标签：task, coroutine

我希望能够将 libtask 协程挂起到磁盘，然后在不同的进程下再次恢复它们，这样它们就可以从中断的地方继续。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-29T02:01:14.003

This is not possible. Coroutine state is tied to the running process's execution state, open file descriptors, etc. It's actually a very difficult problem to solve in the general case, see this page on Wikipedia for a discussion:

[http://en.wikipedia.org/wiki/Application_checkpointing](http://en.wikipedia.org/wiki/Application_checkpointing)

The approach you could take is to carefully define your coroutine's state and determine what information you'd need to store in order to reconstruct it. Then, you'd make the coroutine able to resume given that information.

Dragonfly BSD has the ability to suspend tasks and later resume them, but that's the only general solution I've heard of, save for VM image-based systems like Smalltalk and Squeak.

# algorithm - 这是什么压缩算法？

> ID：12849921
> 
> 赞同：7
> 
> 时间：2012-10-11T23:06:18.713
> 
> 标签：algorithm, language-agnostic, compression

所以我有几个压缩文件，还有未压缩的版本。我没有最初创建这些文件的软件。我试图弄清楚底层算法是什么——你能弄清楚吗？最初，我认为它可能是一些 LZW 变体，但我不确定。当分解成 6 位字时，数据似乎更有意义——我看到很多重复的模式。

这两个文件非常相似，未压缩版本仅相差几个字节——这有助于确定这些不同字节在压缩文件中的位置。我已经强调了差异。

压缩文件#1：

```
02 02 01 17 0E 11 92 14 C0 55 52 44 FF BC AE 47 DB E1 05 42 F8 70 DE 57 23 FF
54 1A 55 3D BF 54 10 E3 38 0 C B2 FB C 4 92 1C 20 DE 57 23 FF 54 1A 55 3D BE 5E
4C 96 B2 0E 32 80 CB 2F BC 48 70 83 79 5C 8F FD 50 69 54 F6 F9 96 48 A9 07 19
C2 30 F0 E1 BC AE 47 FE A8 34 AA 7B 7E 32 BF E5 1F EE A8 48 CA 11 87 87 0D E5
72 3F F5 41 A5 53 DB E5 24 5D F8 CA FF 4C B1 13 8C 71 18 7B C3 86 F2 B9 1F FA
A0 D2 A9 ED FD 55 97 BA 22 32 C0 CB 2F BC

```

压缩文件#2：

```
02 02 01 17 0E 11 92 14 C0 55 52 44 FF BC AE 47 DB E1 05 42 F8 70 DE 57 23 FF
54 1A 55 3D BF 54 10 E3 38 0 D 36 D4 0 4 92 1C 20 DE 57 23 FF 54 1A 55 3D BE 5E
4C 96 B2 0E 32 80 D3 6D 40 48 70 83 79 5C 8F FD 50 69 54 F6 F9 96 48 A9 07 19
C2 30 F0 E1 BC AE 47 FE A8 34 AA 7B 7E 32 BF E5 1F EE A8 48 CA 11 87 87 0D E5
72 3F F5 41 A5 53 DB E5 24 5D F8 CA FF 4C B1 13 8C 71 18 7B C3 86 F2 B9 1F FA
A0 D2 A9 ED FD 55 97 BA 22 32 C0 D3 6D 40

```

未压缩文件#1：

```
20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20
20 20 20 20 20 20 20 2A 2A 2A 2A 2A 20 47 52 41 4E 44 20 54 4F 54 41 4C 53 20
2A 2A 2A 2A 2A 0D 0A 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20
20 20 20 20 20 20 20 20 20 20 20 20 20 20 54 4F 54 41 4C 20 52 45 43 4F 52 44
53 20 52 45 41 44 20 20 20 20 20 20 20 20 20 20 20 20 20 20 32 32 38 37 0D 0A
0D 0A 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20
20 20 20 20 20 20 20 20 20 54 4F 54 41 4C 20 52 45 43 4F 52 44 53 20 42 59 50
41 53 53 45 44 20 20 20 20 20 20 20 20 20 20 32 32 38 37 0D 0A 20 20 20 20 20
20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20
20 20 54 4F 54 41 4C 20 52 45 43 4F 52 44 53 20 43 48 41 4E 47 45 44 20 20 20
20 20 20 20 20 20 20 20 20 20 20 30 0D 0A 20 20 20 20 20 20 20 20 20 20 20 20
20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 54 4F 54 41 4C
20 52 45 43 4F 52 44 53 20 4E 4F 54 20 4F 4E 20 58 52 45 46 20 20 20 20 20 20
20 20 20 20 30 0D 0A 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20
20 20 20 20 20 20 20 20 20 20 20 20 20 20 54 4F 54 41 4C 20 52 45 43 4F 52 44
53 20 42 41 4E 4B 20 4E 4F 54 20 46 4F 55 4E 44 20 20 20 20 20 20 20 30 0D 0A
0D 0A 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20
20 20 20 20 20 20 20 20 20 54 4F 54 41 4C 20 52 45 43 4F 52 44 53 20 57 52 49
54 54 45 4E 20 20 20 20 20 20 20 20 20 20 20 32 32 38 37

```

未压缩文件#2：

```
20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20
20 20 20 20 20 20 20 2A 2A 2A 2A 2A 20 47 52 41 4E 44 20 54 4F 54 41 4C 53 20
2A 2A 2A 2A 2A 0D 0A 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20
20 20 20 20 20 20 20 20 20 20 20 20 20 20 54 4F 54 41 4C 20 52 45 43 4F 52 44
53 20 52 45 41 44 20 20 20 20 20 20 20 20 20 20 20 20 20 20 33 34 33 39 0D 0A
0D 0A 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20
20 20 20 20 20 20 20 20 20 54 4F 54 41 4C 20 52 45 43 4F 52 44 53 20 42 59 50
41 53 53 45 44 20 20 20 20 20 20 20 20 20 20 33 34 33 39 0D 0A 20 20 20 20 20
20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20
20 20 54 4F 54 41 4C 20 52 45 43 4F 52 44 53 20 43 48 41 4E 47 45 44 20 20 20
20 20 20 20 20 20 20 20 20 20 20 30 0D 0A 20 20 20 20 20 20 20 20 20 20 20 20
20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 54 4F 54 41 4C
20 52 45 43 4F 52 44 53 20 4E 4F 54 20 4F 4E 20 58 52 45 46 20 20 20 20 20 20
20 20 20 20 30 0D 0A 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20
20 20 20 20 20 20 20 20 20 20 20 20 20 20 54 4F 54 41 4C 20 52 45 43 4F 52 44
53 20 42 41 4E 4B 20 4E 4F 54 20 46 4F 55 4E 44 20 20 20 20 20 20 20 30 0D 0A
0D 0A 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20
20 20 20 20 20 20 20 20 20 54 4F 54 41 4C 20 52 45 43 4F 52 44 53 20 57 52 49
54 54 45 4E 20 20 20 20 20 20 20 20 20 20 20 33 34 33 39

```

如您所见，输出文件只是纯 ASCII 文本文件。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T02:59:39.733

这似乎是某种专有的编码格式，旨在去除某些特定类型的消息。

它对 8 位 (ascii) 输入进行操作，并使用 5 位和 6 位令牌集的混合输出位流，包括一些控制字符。

可以识别以下标记：

```
// 5 bit tokens:
00000 switch to 6 bit mode
00011 take the following 6 bits as N, and output N spaces
00100 A
00101 B
.....
11101 Z
11110 <crlf>
11111 space

// 6 bit tokens:
000001 switch to 5 bit mode
000011 take the following 6 bits as N, and output N spaces
001001 <crlf>
011000 1
011001 2
......
100000 9

// pure speculation:
010111 0
010010 *
000110 repeat the next 6 bit char N times
001100 space
00001 skip 3 bits, take the next 8 bits as ascii, and output N times 
```

没有更多示例，很难确定流开始时会发生什么。它可能是一些魔法值，或者可能包含一些控制值。

# php - 在文件顶部列出 php 函数？（或者，如何快速跳转到 php 函数？）

> ID：12849922
> 
> 赞同：13
> 
> 时间：2012-10-11T23:06:19.673
> 
> 标签：php, phpstorm

我使用的 php 编辑器在我中间单击它们的名称时会跳转到函数，所以我想如果我可以在文件顶部列出所有函数，这样当我打开文件时我可以快速跳转到我感兴趣的那个。当然，如果我把函数名放在文件的顶部，那么它们都会在文件加载时被调用（实际上，这是我正在谈论的一个类）。

有没有办法做到这一点，还是我只是在做梦？:-)

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-12T14:30:54.010

如果所有函数都在您所在*的同一个文件*中 - 只需使用**结构面板**( `Alt + 7`)。

或者使用**导航 | 文件**`Ctrl + F12`结构（

否则——请参阅@Eric 的回答——**导航 | 符号...** ( `Ctrl + Alt + Shift + N`)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-18T00:44:19.993

可能为时已晚，但在 PhpStorm 最新版本中，您可以在 MacOSX 中按 Command + F12 或 Ctrl + F12 来显示函数列表和文件结构。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-11T23:16:08.560

[您的 IDE 已经可以做到这一点。](http://www.jetbrains.com/phpstorm/webhelp/navigating-to-class-file-or-symbol-by-name.html)无需在源代码中添加多余的标头：

`Ctrl`+ `Shift`+ `Alt`+`N`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T23:15:59.607

您是在谈论从字面上“列出”它们还是在文件顶部创建它们？

```
function oneofthem() {
 // blah
} 
```

或者

```
oneofthem(); 
```

两者中的后者将加载它们。第一个不会加载它，文件顶部的列表完全可以。请注意，它显然需要低于您的类选择器。

其次，如果你只是列出它们——你总是可以把它们注释掉。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-11T23:22:52.660

正如@Scuzzy 建议的那样，使用 IDE 的[代码折叠](http://www.jetbrains.com/phpstorm/webhelp/code-folding-2.html)功能。保持功能折叠，以便它们像列表一样显示。

# android - 将上下文传递给 SQLiteOpenHelper

> ID：12849930
> 
> 赞同：3
> 
> 时间：2012-10-11T23:07:07.960
> 
> 标签：android, sqliteopenhelper

首先，我是 android 应用程序的新手，并没有独自工作。我的队友在我处理这个的时候做了设计，并要求我设置数据库和这样做的方法等等。

因此，尽管大部分内容似乎都可以，但我提出：

```
Context context = null;
DataBaseHelper drinksDataBase = new DataBaseHelper(context); 
```

进入他的主要活动。

构造函数如下：

```
public DataBaseHelper(Context  context) {

    super(context, DB_NAME, null, 1);
    this.myContext = context;
    try{
        createDataBase();
    }
    catch(IOException e){

    }
} 
```

忽略 null，我假设它是应用程序崩溃的当前原因，我将如何为应用程序获取正确的上下文，以便我可以使我的数据库工作？

它实际上似乎正在崩溃，`this.getReadableDatabase()`所以这是否是空上下文，我不知道。

由于以下原因，Logcat 无法启动：

```
[2012-10-12 10:37:57 - Unexpected error while launching logcat. Try reselecting the device.] device not found
com.android.ddmlib.AdbCommandRejectedException: device not found
    at com.android.ddmlib.AdbHelper.setDevice(AdbHelper.java:752)
    at com.android.ddmlib.AdbHelper.executeRemoteCommand(AdbHelper.java:373)
    at com.android.ddmlib.Device.executeShellCommand(Device.java:462)
    at com.android.ddmuilib.logcat.LogCatReceiver$1.run(LogCatReceiver.java:109)
    at java.lang.Thread.run(Unknown Source) 
```

提前致谢，

詹姆士

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-11T23:33:38.150

这是我通常做的：

```
 public class MyApplication extends Application {
    private static MyApplication  instance;
    public MyApplication()
    {
       instance = this;
    }
    public static Context getContext()
    {
       return instance;
    } 
```

只需将该类设置到清单中

```
 <application
        android:name="my.workspace.MyApplication"
...
 > 
```

之后只需调用`MyApplication.getContext()`，您需要它的地方。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-11T23:19:16.807

如果您使用的是日食，那超出了孩子的游戏范围。只需在某个“私有上下文上下文”中创建一个字段，然后您就可以从源选项卡中的字段生成构造函数。只为你吐出来。然后，当您需要创建该类的实例时。通常参数中的“this”就足够了

**编辑**

* * *

我希望这会有所帮助，我不想在这里延长讨论。在您的数据库中：

```
public DataBaseHelper(Context  context) {
    super(context, DB_NAME, null, 1);
}

public Cursor getDrinks() {
        SQLiteDatabase db = getReadableDatabase();
        Cursor cursor = db.query(DB_NAME, null, null, null, null, null, null);
        return cursor;
    } 
```

然后在您的活动中（在 oncreate 中）：

```
private Cursor c;

...
DataBaseHelper drinksDataBase = new DataBaseHelper(this);
c = drinksDataBase.getDrinks(); 
c.moveToFirst(); 
```

# android - 将片段部分移出屏幕

> ID：12849931
> 
> 赞同：3
> 
> 时间：2012-10-11T23:07:11.143
> 
> 标签：android, layout, android-fragments, translation

我已经为此困扰了很长一段时间了。我正在尝试将包含在 FrameLayout 中的片段向右移动，以便只有左侧 20% 的片段可见。

我认为我遇到的问题是父级不会让片段移动到其边界之外，或者我不知道如何移动它。我所尝试的一切都只是将片段推到右墙上，并缩放片段以适应。我需要它把碎片推到右墙外。任何帮助将不胜感激。

我想要达到的最终效果是，当你按下一个穿上片段时，片段会转换为全视图，然后按下按钮会转换回 20% 的视图。我已经设置好了动画，只是片段的实际移动让我很难过。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T23:26:34.180

> 这意味着虽然它有动画效果，但这并不意味着片段本身就是动画让它看起来的地方。在物理移动之前，它仍会在原始位置接收 OnClick 事件。

您可能正在使用旧式动画（例如`TranslateAnimation`），它们是为瞬态效果而不是永久效果而设计的。

我向您指出我的[一个相关问题的](https://stackoverflow.com/questions/12253965/complete-working-sample-of-the-gmail-three-fragment-animation-scenario)原因是许多解决方案，包括[我自己的解决方案](https://stackoverflow.com/a/12318422/115145)，都使用了新的动画框架，该框架专为更持久的效果而设计。

> 该示例也对我没有帮助，我试图将其部分移出屏幕，而不仅仅是将其挤在边缘上。

特别是对于动画师框架，“将其部分移出屏幕”和“将其挤在边缘”之间没有实质性区别。例如，如果您阅读了我的解决方案，您会看到一个`translateWidgets()`演示一组小部件的水平幻灯片的方法：

```
private void translateWidgets(int deltaX, View... views) {
    for (final View v : views) {
      v.setLayerType(View.LAYER_TYPE_HARDWARE, null);

      v.animate().translationXBy(deltaX).setDuration(ANIM_DURATION)
       .setListener(new AnimatorListenerAdapter() {
         @Override
         public void onAnimationEnd(Animator animation) {
           v.setLayerType(View.LAYER_TYPE_NONE, null);
         }
       });
    }
  } 
```

在您的情况下，`deltaX`将是任何适当的值来实现您的 20% 效果（大概`0.2f`是容器宽度的倍数，或沿着这些线），或者在应该看到完整片段时撤消该效果。

我的答案包含指向完整示例项目的链接，既适用于原生 API 级别 11 动画师，也适用于动画师框架的 NineOldAndroids 反向移植。

# delphi - 无法在system32文件夹下运行msconfig .exe shellexecute Delphi

> ID：12849939
> 
> 赞同：3
> 
> 时间：2012-10-11T23:07:51.240
> 
> 标签：delphi, winapi, system32

我在 Win 7 64b 上。我试图从我的 delphi 应用程序运行 msconfig。msconfig.exe 文件位于 system32 文件夹中。我将 msconfig.exe 复制到 c:\ ，效果很好。这看起来像是某种许可问题。

```
var
errorcode: integer;
 begin
   errorcode :=
ShellExecute(0, 'open', pchar('C:\Windows\System\msconfig.exe'), nil, nil, SW_NORMAL);
if errorcode <= 32 then
ShowMessage(SysErrorMessage(errorcode));
end; 
```

有没有人看到这个并想出如何从 sys32 运行 msconfig.exe 。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T23:33:59.113

此行为是由[`File System Redirector`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384187%28v=vs.85%29.aspx)您可以使用[`Wow64DisableWow64FsRedirection`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365743%28v=vs.85%29.aspx)and[`Wow64EnableWow64FsRedirection`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365744%28v=vs.85%29.aspx)函数的 as 解决方法引起的。

```
{$APPTYPE CONSOLE}

uses
  ShellAPi,
  SysUtils;

Function Wow64DisableWow64FsRedirection(Var Wow64FsEnableRedirection: LongBool): LongBool; StdCall;
  External 'Kernel32.dll' Name 'Wow64DisableWow64FsRedirection';
Function Wow64EnableWow64FsRedirection(Wow64FsEnableRedirection: LongBool): LongBool; StdCall;
  External 'Kernel32.dll' Name 'Wow64EnableWow64FsRedirection';

Var
  Wow64FsEnableRedirection: LongBool;

begin
  try
   Wow64DisableWow64FsRedirection(Wow64FsEnableRedirection);
   ShellExecute(0, nil, PChar('C:\Windows\System32\msconfig.exe'), nil, nil, 0);
   Wow64EnableWow64FsRedirection(Wow64FsEnableRedirection);
  except
    on E: Exception do
      Writeln(E.ClassName, ': ', E.Message);
  end;
end. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T04:11:01.570

要从 32 位进程访问 64 位系统文件夹，您应该使用特殊的“SysNative”别名而不是直接使用“System32”文件夹：

```
PChar('C:\Windows\SysNative\msconfig.exe') 
```

如果您需要支持 32 位操作系统版本或 64 位编译，请用于`IsWow64Process()`检测您的应用是否在 WOW64 下运行：

```
{$IFDEF WIN64}
function IsWow64: Boolean;
begin
  Result := False;
end;
{$ELSE}
function IsWow64Process(hProcess: THandle; out Wow64Process: BOOL): BOOL; stdcall; external 'kernel32.dll' delayed;

function IsWow64: Boolean;
var
  Ret: BOOL;
begin
  Result := False;
  // XP = v5.1
  if (Win32MajorVersion > 5) or
    ((Win32MajorVersion = 5) and (Win32MinorVersion >= 1)) then
  begin
    if IsWow64Process(GetCurrentProcess(), Ret) then
      Result := Ret <> 0;
  end;
end;
{$ENDIF}

var
  errorcode: integer;
  SysFolder: string;
begin
  If IsWow64 then
    SysFolder := 'SysNative'
  else
    SysFolder := 'System32';
  errorcode := ShellExecute(0, 'open', PChar('C:\Windows\'+SysFolder'+\msconfig.exe'), nil, nil, SW_NORMAL);
  if errorcode <= 32 then
    ShowMessage(SysErrorMessage(errorcode));
end; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-11T23:22:46.027

如果您正在构建一个 32 位 Delphi 应用程序，那么当它在 64 位 Windows 上运行时，System32 文件夹实际上会被重新映射。对于 32 位应用程序，System32 实际上是 SysWOW64。因为您从资源管理器或 cmd.exe 在 System32 中“看到”它，是因为这些是 64 位进程。在这种情况下，32 位进程无法“看到”实际的 64 位 System32 文件夹。

一种解决方案是获取支持 64 位目标的最新 Delphi 并构建 64 位版本。

# sql - 使用从一个表到另一个表的插入语句将 ID 分配给行

> ID：12849940
> 
> 赞同：0
> 
> 时间：2012-10-11T23:07:53.700
> 
> 标签：sql, sql-server-2008

我一直在尝试将临时表中的一行中的数据插入到数据库中的现有表中，我已经设法做到了，但我还想增加主题表中已经存在的 ID 列。临时表有两列，ID 和关键字，但我从临时表中获取的关键字始终是第一行，因此临时表中的 ID 始终为 1，而我希望 ID 为主题表加 1。

抱歉，如果以前有人问过这个问题，我只是不知道要搜索什么！

这是我到目前为止所拥有的，不确定我是否在正确的轨道上：

```
 --declare topic id and set it as one more than the current number of rows
 DECLARE @T_ID int
 SET @T_ID = (SELECT COUNT(*) FROM Topic)+1

 --insert keyword into Topic table
 INSERT INTO Topic(Topic_ID, Topic_Name)
 SELECT keyword FROM #tempKeywords 
 WHERE ID = 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T23:15:16.387

更改为`COUNT(*)` ，`MAX(Topic_ID)`但如果您声明`Topic_ID`为 Identity 列让 SQLServer 处理增量会更好

```
SET @T_ID = (SELECT ISNULL(MAX(Topic_ID),0)+1 FROM Topic)

 --insert keyword into Topic table
 INSERT INTO Topic(Topic_ID, Topic_Name)
 SELECT @T_ID, keyword FROM #tempKeywords 
 WHERE ID = 1 
```

如果您将 Topic_ID 列更改为 Identity，那么您将拥有

```
 --insert keyword into Topic table
 INSERT INTO Topic(Topic_Name)
 SELECT keyword FROM #tempKeywords 
 WHERE ID = 1 
```

# sql - 怎么办 WHERE ((SELECT COUNT(*) ...) = 0 OR EXISTS (SELECT * FROM ...))？

> ID：12849945
> 
> 赞同：2
> 
> 时间：2012-10-11T23:08:01.690
> 
> 标签：sql, join, exists

例如，我有一个表`Person`，其中每个条目都有一个 ID，并且我有一个`PersonEvent`记录`personID`事件中每个人的 ID 的表。

如果`PersonEvent`该事件不包含任何行，则`Person`表中的每个人都参加了。但是，如果表中有条目，则`PersonEvent`只有那些人参加了该活动。

我想做一个查询，例如：

```
SELECT * 
FROM Person p 
WHERE ((SELECT COUNT(*)
        FROM PersonEvent pe 
        WHERE pe.personID = p.ID 
        AND pe.eventID = '290') = 0 
      OR EXISTS 
        (SELECT * 
         FROM PersonEvent pe 
         WHERE pe.personID = p.ID 
         AND pe.eventID = '290')) 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-11T23:11:57.540

```
SELECT *
  FROM Person p
 WHERE NOT EXISTS ( -- not a single person for the event
       SELECT *
         FROM PersonEvent
        WHERE eventID = '290')
    OR EXISTS ( -- the person for the event
       SELECT *
         FROM PersonEvent pe
        WHERE pe.personID = p.ID AND pe.eventID = '290') 
```

# java - GAE ImagesService().getServingUrl() 执行时间长。爪哇

> ID：12849948
> 
> 赞同：0
> 
> 时间：2012-10-11T23:08:27.777
> 
> 标签：java, google-app-engine, thumbnails

我想为 blobstore 文件创建拇指。我使用代码：

String servingUrl = ImagesServiceFactory.getImagesService().getServingUrl(ServingUrlOptions.Builder.withBlobKey(new BlobKey(blobKey)).imageSize(100).secureUrl(false));

它工作正常。但是，当我需要为每个请求创建多个 thums 时，我会遇到异常：

```
com.google.apphosting.api.DeadlineExceededException: This request (2b0af6acab1f5e18) started at 2012/10/11 21:53:57.444 UTC and was still executing at 2012/10/11 21:54:57.017 UTC. 
```

也许有人有这个问题的解决方案。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T02:30:50.190

任务队列是为像这样长时间运行的任务设计的，你应该研究一下。

[https://developers.google.com/appengine/docs/java/taskqueue/overview?hl=en](https://developers.google.com/appengine/docs/java/taskqueue/overview?hl=en)

# php - PHP将图像大小调整为保持纵横比准确大小

> ID：12849952
> 
> 赞同：-2
> 
> 时间：2012-10-11T23:08:46.773
> 
> 标签：php, image-resizing, aspect-ratio

我需要手动查找新图像的 DPI。

```
$input_width = 361;
$input_height = 413;

$input_dpi_x = 72;
$input_dpi_y = 72;

$output_width = 800;
$output_height = $input_height * $output_width / $input_width;

$output_dpi_x = ceil(($input_dpi_x / $input_width) * $output_width);
$output_dpi_y = ceil(($input_dpi_y / $input_height) * $output_y_res);

echo "Outpud_dpi_x = " . $output_dpi_x;
//Outpud_dpi_x = 160 
```

为什么当我调整图像大小时我得到 802 而不是 800？

我必须使用 DPI 不要问为什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T13:44:38.360

答案全在数学中……为简单起见，让我们只关注宽度。

稍微拉回层，从缩放操作开始（重新排序以帮助降低精度）。在这里，我正在计算输出 DPI 值并通过求解原始方程来验证结果`$output_width`。

```
$output_dpi_x = $output_width * $input_dpi_x / $input_width;  // 159.5567867...
$output_width = $output_dpi_x * $input_width / $input_dpi_x;  // 800 
```

您可以看到，使用 DPI 的未校正值，我们返回 800 的宽度值。当我们四舍五入到下一个数字（使用`ceil`运算符）时，它会改变结果。通过展开数学运算，我们可以看到为什么您最终会在输出中得到 802px：

```
$output_dpi_x = ceil($output_dpi_x);  // 160
$output_width = $output_dpi_x * $input_width / $input_dpi_x;  // 802.22222222... 
```

当然，图像不能包含部分像素，因此您调整大小的图像向下舍入为 802 像素。

# php - 将 PHP 添加到 Apache

> ID：12849954
> 
> 赞同：2
> 
> 时间：2012-10-11T23:09:12.967
> 
> 标签：php, linux, apache

在我工作的地方，我们使用属于博物馆的古老技术。此外，我必须通过系统管理员完成所有工作。

他们告诉我为了获得 PHP，他们需要升级操作系统以及 Apache 版本。

```
lcas100[67]% uname -a
Linux lcas100 2.6.9-11.ELsmp #1 SMP Fri May 20 18:26:27 EDT 2005 i686 i686 i386 GNU/Linux
lcas100[68]% cat /etc/*-release
LSB_VERSION="1.3"
Red Hat Enterprise Linux AS release 4 (Nahant)
lcas100[75]% /ots/apache/bin/httpd -v
Server version: Apache/1.3.31 (Unix)
Server built:   Nov  3 2004 18:47:31 
```

这对我来说没有意义，因为显然 Apache 1.3.x 支持 PHP： http: [//php.net/manual/en/install.unix.apache.php](http://php.net/manual/en/install.unix.apache.php)

此外，我们还有另一台运行 PHP 并且运行完全相同的操作系统和操作系统版本的机器。我想要它在前一台机器上的原因是因为它安装在不同的文件系统上。

最后他们告诉我，Apache 网络服务器运行的所有软件都需要重新安装/重新编译（假设需要 Apache 升级）。我什至不确定这一点。

他们充满了吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T23:15:35.033

您可以尝试将 mod_php 与 apache 一起使用。Apache 不需要重新编译，尽管它可以使用一些选项进行编译，这使得它与我猜的 mod_php 模块不兼容。

如果他们拒绝，另一种选择是使用 PHP-FPM 之类的东西。这基本上与 apache 可以路由 PHP 请求并返回响应的外部服务一样。更多信息请访问[http://blog.nexcess.net/2012/03/16/using-php-fpm-with-apache-2-2/](http://blog.nexcess.net/2012/03/16/using-php-fpm-with-apache-2-2/)（类似于 1.3 说明）

# java - 在 Java 分配中遇到问题从循环中查找最大值

> ID：12849955
> 
> 赞同：-4
> 
> 时间：2012-10-11T23:09:12.643
> 
> 标签：java, loops, while-loop

我在另一个任务之后对代码进行建模，所以可能有一两部分不能很好地支撑。基本上我无法正确显示 GPA 最高的前辈的输出数据；它也不总是获得两个专业的正确平均 GPA。

```
package studentdata;

import javax.swing.JOptionPane;

public class studentdata 
{

    public static void main(String[] args) 
{
String lastname = null,major = null,advisor_name = null,studentyear = null,studentgpa,output="";
int year,count_math=0,count_CIS=0,year1=0,year2=0,year3=0,year4=0,Johnson_count=0,Atkins_count=0,Smith_count=0;
double gpa=0,CIS_average=0,Math_average=0,high_gpa=0,Math_total=0,CIS_total=0;
String high_advisor="";
String high_student="";
String more_data = "yes";

while(more_data.equals("yes"))
{
    //Read in 5 sets of data

        lastname=JOptionPane.showInputDialog(null,"Enter Student's Last Name",
                "Input Data", JOptionPane.QUESTION_MESSAGE);

        studentyear=JOptionPane.showInputDialog(null,"Enter Student's Year (1,2,3,4)",
                "Input Data", JOptionPane.QUESTION_MESSAGE);
        year=Integer.parseInt(studentyear);

        major=JOptionPane.showInputDialog(null,"Enter Student's Major (Math or CIS)",
                "Input Data", JOptionPane.QUESTION_MESSAGE);

        studentgpa=JOptionPane.showInputDialog(null,"Enter Student's GPA",
                "Input Data", JOptionPane.QUESTION_MESSAGE);
        gpa=Double.parseDouble(studentgpa);

        advisor_name=JOptionPane.showInputDialog(null,"Enter Advisor Name (Johnson, Atkins, or Smith)",
                "Input Data", JOptionPane.QUESTION_MESSAGE);

        //Count the student's major
        if(major.equals("Math"))
            count_math=count_math+1;
        else
            count_CIS=count_CIS+1;

        //Count the student's year
        if(studentyear.equals("1"))
            year1=year1+1;
        if(studentyear.equals("2"))
            year2=year2+1;
        if(studentyear.equals("3"))
            year3=year3+1;
        if(studentyear.equals("4"))
            year4=year4+1;

        //Calculate total CIS and Math GPA for averaging
        if(major.equals("CIS"))
        CIS_total=gpa+gpa;
        if(major.equals("Math"))
        Math_total=gpa+gpa;

        //Calculate average CIS GPA
        if(major.equals("CIS"))
        CIS_average=CIS_total/count_CIS;

        //Calculate average Math GPA
        if(major.equals("Math"))
        Math_average=Math_total/count_math;

        //Count the advisees
        if(advisor_name.equals("Johnson"))
            Johnson_count=Johnson_count+1;
        else
        if(advisor_name.equals("Atkins"))
            Atkins_count=Atkins_count+1;
        else
            Smith_count=Smith_count+1;

        //Ask if more data
        more_data=JOptionPane.showInputDialog(null,"More Info? Enter yes or no",
                "Input Dialog",JOptionPane.QUESTION_MESSAGE);

}//End of while loop

//Output number of students at each year
output=output+"There are "+year1+" freshmen\n";
output=output+"There are "+year2+" sophomores\n";
output=output+"There are "+year3+" juniors\n";
output=output+"There are "+year4+" seniors\n";

//Find major with the most students
if(count_CIS>count_math)
output=output+"The CIS major has the most students\n";
else
output=output+"The Math major has the most students\n";

//Output advisee data
output=output+"Johnson has "+Johnson_count+" advisees\n";
output=output+"Atkins has "+Atkins_count+" advisees\n";
output=output+"Smith has "+Smith_count+" advisees\n";

//Output averages
output=output+"The average GPA for all CIS majors is "+CIS_average+"\n";
output=output+"The average GPA for all Math majors is "+Math_average+"\n";

//Output Senior Data
if(studentyear.equals("4"))
output=output+"The senior with the highest GPA is "+high_student+"\n";
output=output+"Their major is "+major+"\n";
output=output+"Their GPA is "+high_gpa+"\n";
output=output+"Their advisor is "+high_advisor+"\n";

//Output Advisor for Highest GPA senior
if (gpa>high_gpa)
{
    high_gpa=gpa;
    high_student=lastname;
    high_advisor=advisor_name;
}

//Display the output box
JOptionPane.showMessageDialog(null,output,"Output",JOptionPane.INFORMATION_MESSAGE) ;

System.exit(0);
} //End class
} //End method 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T23:21:46.977

```
if(major.equals("CIS"))
CIS_total=gpa+gpa;
if(major.equals("Math"))
Math_total=gpa+gpa; 
```

应该

```
if(major.equals("CIS"))
    CIS_total += gpa;
if(major.equals("Math"))
    Math_total += gpa; 
```

并且不要计算循环中的平均值。在循环之后执行。

# android - Android，游戏的 RenderView 速度控制问题

> ID：12849962
> 
> 赞同：0
> 
> 时间：2012-10-11T23:10:01.970
> 
> 标签：android, render

我使用这个类来更新渲染视图

```
public class AndroidFastRenderView extends SurfaceView implements Runnable {
    AndroidGame game;
    Bitmap framebuffer;
    Thread renderThread = null;
    SurfaceHolder holder;
    float speedRegulator= 100000009.9f;
    volatile boolean running = false;

    public AndroidFastRenderView(AndroidGame game, Bitmap framebuffer) {
        super(game);
        this.game = game;
        this.framebuffer = framebuffer;
        this.holder = getHolder();
    }

    public void resume() { 
        running = true;
        renderThread = new Thread(this);
        renderThread.start();         
    }      

    public void run() {
        Rect dstRect = new Rect();
        long startTime = System.nanoTime();
        while(running) {  
            if(!holder.getSurface().isValid())
                continue;           

            float deltaTime = (System.nanoTime()-startTime) /speedRegulator;
            startTime = System.nanoTime();

            game.getCurrentScreen().update(deltaTime);
            game.getCurrentScreen().present(deltaTime);

            Canvas canvas = holder.lockCanvas();
            canvas.getClipBounds(dstRect);
            canvas.drawBitmap(framebuffer, null, dstRect, null);                           
            holder.unlockCanvasAndPost(canvas);
        }
    }

    public void pause() {                        
        running = false;                        
        while(true) {
            try {
                renderThread.join();
                break;
            } catch (InterruptedException e) {
                // retry
            }
        }
    }        
} 
```

号码：

```
float speedRegulator= 100000009.9f; 
```

是允许我降低和提高播放器速度的参数，不幸的是如果我将它设置为浮动`speedRegulator= 1000000000.0f;`太慢，如果离开`float speedRegulator= 100000009.9f;`太快。

我该如何解决这个问题？为什么速度变化不是渐进的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T03:07:31.920

这不是一个渐进的变化，因为`1000000000.0f`大约是十倍`100000009.9f`。如果您想加快速度（比如 10%），请尝试类似`900000000`.

# ocaml - sexplib 如何与 Map 这样的函子类型一起使用？

> ID：12849968
> 
> 赞同：6
> 
> 时间：2012-10-11T23:10:31.860
> 
> 标签：ocaml, s-expression

Sexplib 的语法扩展使得在 OCaml 中任意用户定义的数据结构的序列化和反序列化变得容易。通常通过`with sexp`在类型定义的末尾添加注释来完成：

```
type a = A of int | B of float with sexp 
```

这似乎没有直接推广到基于函子的类型，也不清楚 Sexplib 标准类型转换器如何捕获甚至标准函子。

到目前为止，我已经通过`int Map.Make(String).t`在序列化之前将特定的 Map 类型实例（例如 ）扁平化为列表来解决这个问题，反之亦然，但 Sexplib/Jane Street Core 的雄心勃勃的作者肯定没有完全忽视这一点。我还注意到*旧*版本的电池将自定义 sexp 序列化混合到它们的主要模块（如 [Bat]Map）中，但这已经被删除了一段时间。

Sexplib 序列化通常如何使用 Maps 或其他复杂函子类型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T15:31:17.383

一种方法是定义一个新的仿函数，它接收序列化数据所需的附加信息。这是我过去在电池上使用的完整实现。注意我也更喜欢 Map 的无异常和标记版本，所以我已经打开了这些，但你当然可以删除它。

```
module type SEXPABLE = sig
  type t
  val sexp_of_t : t -> Sexplib.Sexp.t
  val t_of_sexp : Sexplib.Sexp.t -> t
end

module Map = struct

  module type S = sig
    include BatMap.S
    include module type of Labels
    include module type of Exceptionless
    val sexp_of_t : ('a -> Sexplib.Sexp.t) -> 'a t -> Sexplib.Sexp.t
    val t_of_sexp : (Sexplib.Sexp.t -> 'a) -> Sexplib.Sexp.t -> 'a t
  end

  module Make (Ord : BatInterfaces.OrderedType)
              (Sexpable : SEXPABLE with type t = Ord.t)
              : S with type key = Ord.t = struct
    include BatMap.Make(Ord)
    include Labels
    include Exceptionless

    open Sexplib.Sexp
    open Sexplib.Conv

    let sexp_of_t sexp_of_data t =
      let f ~key ~data ans = List [Sexpable.sexp_of_t key; sexp_of_data data] :: ans in
      List (fold ~f ~init:[] t)

    let t_of_sexp data_of_sexp sexp = match sexp with
      | Atom _ -> of_sexp_error "Map.Make(...).t_of_sexp: list needed" sexp
      | List l ->
          let f ans = function
            | List [key_sexp; data_sexp] ->
                let key = Sexpable.t_of_sexp key_sexp in
                let data = data_of_sexp data_sexp in
                add ~key ~data ans
            | List _ | Atom _ ->
                of_sexp_error "Map.Make(...).t_of_sexp: 2-tuple list needed" sexp
          in
          List.fold_left ~f ~init:empty l
  end
end 
```

如果我没记错的话，Batteries 删除了这些功能以减少对其他库的依赖。您的另一个选择是使用 Core，它具有开箱即用的这些功能。

# sql - 确定日期范围是否介于另一个日期范围之间 - sql

> ID：12849970
> 
> 赞同：15
> 
> 时间：2012-10-11T23:11:00.890
> 
> 标签：sql, tsql, datetime

我试图找出 sql 中是否有一种方法（首选 t-sql）来识别日期范围是否介于另一个日期范围之间。

就我的示例而言： daterange1 = 我有一个定义的日期范围，日期是 1/1/2012 - 1/5/2012 daterange2 = 我还有另外两个日期可以使用，比如说 1/3/2012 和 1/4 /2012

我试图让这个在 CASE 语句中用于这样的事情

```
CASE 
    WHEN daterange1 = 0 then result1
    WHEN daterange2 falls within daterange1 then result2 
    END as datestuff 
```

这在 SQL 中可能吗？我真的很难过这个，我知道如何确定一个日期是否在一个范围之间，但是如何用一个日期范围来完成呢？答案不一定需要在 CASE 语句中，但它是首选。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-11T23:14:40.847

你怎么能得到`daterange1 = 0`，因为它是一个范围，即 2 个值？

重叠日期的正确测试是

```
CASE WHEN @range1start <= @range2end
      and @range2start <= @range1end THEN 1 ELSE 0 END 
```

如果您的意思是 daterange2 必须完全落在 daterange1 内，那么

```
CASE WHEN @range1start <= @range2start
      and @range2end <= @range1end THEN 1 ELSE 0 END 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-03-27T15:22:56.870

select * from t where（startdate 和 closedate 之间的开始日期 OR

# webcam - 可靠地设置网络摄像头曝光的方法？

> ID：12849971
> 
> 赞同：4
> 
> 时间：2012-10-11T23:11:00.953
> 
> 标签：webcam

我正在做一个项目，我使用网络摄像头以不同的曝光值连续拍摄照片（以制作 HDR 图像流）。我一直在使用 Logitech C310 相机，并且通过将以下内容发送到命令行来设置曝光值：

```
"v4l2-ctl --set-ctrl=exposure_absolute=%d --device=/dev/video1",exposureValue 
```

当我长时间将其设置为一次曝光时，效果很好，然后是另一次，但是当我尝试连续拍摄 3 帧时，每帧的曝光变化不大。

我的相机的另一个问题是，在它的最大曝光值为 10000（我不知道这是什么单位）时，帧没有像我希望的那样曝光。

1) 不断改变曝光值是否存在一些基本问题，会阻止它在大多数网络摄像头上始终如一地工作？

2) 是否有任何人都可以推荐的更适合拍摄高曝光照片的网络摄像头？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T21:42:54.460

的值范围`exposure_absolute`似乎是特定于相机和驱动程序的。大多数相机由此意味着曝光时间。许多相机还提供`gain`参数，该参数控制电子放大，如数码相机上的 ISO 设置。`gain`如果`exposure_absolute`已经达到上限，请继续加注。

两者可以组合使用进行曝光控制，但在任意相机上没有必要分别存在。一些相机同时提供或仅提供其中之一，或提供但忽略它们，因为它们仅提供`auto`模式。

所以最兼容的方法是检查是否有手动模式，设置它并检查它是否被接受，应用`exposure_absolute`并检查它是否被接受，否则尝试`gain`或者是否`exposure_absolute`已经最大化。

录制视频时，还有另一个警告，因为较大`exposure_absolute`的值会使曝光时间超过帧间隔，从而降低帧速率。应该对此进行测试以确定何时`gain`应该使用该点来保持恒定的帧速率。

另请注意，某些 v4l2 工具会尝试自行选择像素格式或分辨率，而忽略`v4l2-ctl`所选的，并且一些罕见的相机往往会在这种情况下重置其他参数。

# objective-c - 目标 C：比较两种无效的枚举类型

> ID：12849975
> 
> 赞同：0
> 
> 时间：2012-10-11T23:11:35.043
> 
> 标签：objective-c, ios, c, enums

我想检查两种枚举类型，但它似乎不起作用。我有以下内容：

```
typedef enum {
    ZSSegmentTypeE,
    ZSSegmentTypeS,
    ZSSegmentTypeO,
    ZSSegmentTypeD,
    ZSSegmentTypeN
} ZSSegmentType; 
```

以下作品：

```
if (someSegmentType != ZSSegmentTypeN) {
    // Works
} 
```

以下内容不起作用：

```
if (someSegmentType != ZSSegmentTypeN || someSegmentType != ZSSegmentTypeD) {
     // Does NOT work
} 
```

为什么第二个示例不起作用，我正在测试两个不同的枚举？在理解枚举和比较如何工作时，我缺少什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T23:19:49.647

[德摩根定律](http://en.wikipedia.org/wiki/De_Morgan%27s_laws)告诉你，这：

```
someSegmentType != ZSSegmentTypeN || someSegmentType != ZSSegmentTypeD 
```

与此相同：

```
!(someSegmentType == ZSSegmentTypeN && someSegmentType == ZSSegmentTypeD) 
```

我相信你意识到这`someSegmentType`不能同时是`ZSSegmentTypeN` *两者* `ZSSegmentTypeD`。因此，括号中的表达式将始终为假，而整个陈述将为真。

您可能想要测试的是该变量是否不是这两个值。你这样做：

```
someSegmentType != ZSSegmentTypeN && someSegmentType != ZSSegmentTypeD 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T23:15:07.360

假设您希望第二个 if 语句仅在 someSegmentType 不是两个值中的任何一个时才成功，那么您需要 &&，而不是 ||。

# sql - Oracle SQL Left Join 与 sum 和“join on”字段以外的字段

> ID：12849976
> 
> 赞同：2
> 
> 时间：2012-10-11T23:11:38.627
> 
> 标签：sql, oracle, group-by

我有两张桌子。

第一个表是“a”，包含字段 a.pr、a.info 和 a.id。第二个表是“b”，字段为 b.id 和 b.amount。

a.id = b.id，尽管多个 b.id 可能与单个 a.id 匹配。

我的SQL语句如下：

```
SELECT a.pr, a.info, a.id, SUM(b.amount) AS total
FROM   a 
LEFT JOIN b ON a.id=b.id
WHERE  a.pr = "549"
GROUP BY a.id 
```

现在，这行不通。它会引发“不是 GROUP BY 表达式”错误。据我了解，我需要一个子查询，但是我发现的所有示例似乎都与我在这里尝试完成的完全匹配，而且我无法让它们中的任何一个正常工作。

在这种情况下，完整的 SQL 语句（带有子查询）会是什么样子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T23:16:21.347

您应该按 select 子句中的所有字段进行分组：

```
SELECT a.pr, a.info, a.id, SUM(b.amount) AS total
FROM   a 
LEFT JOIN b ON a.id=b.id
WHERE  a.pr = "549"
GROUP BY a.pr, a.info, a.id 
```

请参阅[ORA-00979](http://www.dba-oracle.com/t_ora_00979_not_a_group_by_expression.htm)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T05:41:49.007

正如 Ryan 指出的那样，所有没有聚合函数的列都需要成为 group by 子句的一部分

此链接提供了一个很好的解释 [，但*为什么*该列必须包含在聚合函数或 GROUP BY 子句中？](http://weblogs.sqlteam.com/jeffs/archive/2007/07/20/but-why-must-that-column-be-contained-in-an-aggregate.aspx)

# solr - Solr WordDelimiterFilter 和斜线字符

> ID：12849979
> 
> 赞同：1
> 
> 时间：2012-10-11T23:12:10.270
> 
> 标签：solr

我有一个有趣的问题。我有一些带有代码字段的数据，其中包含一些标识符（大部分），格式如下：E.123/2012。

我为此代码字段设置了 fieldType：

```
<fieldType name="text_split" class="solr.TextField" positionIncrementGap="100">
<analyzer>
    <tokenizer class="solr.WhitespaceTokenizerFactory" />
<filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" splitOnNumerics="1" preserveOriginal="1" />
<filter class="solr.LowerCaseFilterFactory" />
  </analyzer>
</fieldType> 
```

如果我搜索确切的代码（“E.123/2012.”），我会得到预期的结果。如果我搜索“123 2012”，我也会得到预期的结果。如果我搜索“123/2012”字符串，结果集为空。在启用 catenateNumbers 和 catenateWords 的情况下进行了尝试，结果相同。我在这里缺少什么？

这里有趣的是，使用字段分析工具，如果我选择“突出显示匹配”选项，123/2012 会给出匹配。但是，当我尝试在 Solr 管理员的查询调试工具中使用它时，相同的查询不会产生任何结果。如果我使用通配符搜索，则该查询有效，但我想避免这种情况。

Ps.：我错过了一些细节。我在 Ubuntu Linux 上使用 Solr 3.5 版。并且错误日志为空，没有记录异常。

# jquery - JQuery检查表格行中的多个复选框

> ID：12849982
> 
> 赞同：0
> 
> 时间：2012-10-11T23:12:39.630
> 
> 标签：jquery, checkbox

我有如下 HTML：

```
<tr class="gridSubHeader1">
<td colspan="6"><input type="checkbox" familyname="TestName" onclick="javascript: HandleClick('TestName');">EB - Autonomy</td>
</tr>
<tr class="gridSubHeader1" rowID="1000748" id="TestName">
<td class="formBodyOddRow" width="20">1&nbsp;</td>
<td class="formBodyOddRow" width="30"><input type="Checkbox" id="Select" name="Select" unchecked=""></td>
</tr>
<tr class="gridSubHeader1" rowID="1000749" id="TestName">
<td class="formBodyEvenRow" width="20">2&nbsp;</td>
<td class="formBodyEvenRow" width="30"><input type="Checkbox" id="Select" name="Select" unchecked=""></td>
</tr>
<tr class="gridSubHeader1" rowID="1000750" id="TestName">
<td class="formBodyOddRow" width="20">3&nbsp;</td>
<td class="formBodyOddRow" width="30"><input type="Checkbox" id="Select" name="Select" unchecked=""></td>
</tr>
<tr class="gridSubHeader1" rowID="237" id="TestName">
<td class="formBodyEvenRow" width="20">4&nbsp;</td>
<td class="formBodyEvenRow" width="30"><input type="Checkbox" id="Select" name="Select" unchecked=""></td>
</tr>

<tr class="gridSubHeader1">
<td colspan="6"><input type="checkbox" familyname="TestName2" onclick="javascript: HandleClick('TestName2');">EB - Another</td>
</tr>
<tr class="gridSubHeader1" rowID="1000748" id="TestName2">
<td class="formBodyOddRow" width="20">1&nbsp;</td>
<td class="formBodyOddRow" width="30"><input type="Checkbox" id="Select" name="Select" unchecked=""></td>
</tr>
<tr class="gridSubHeader1" rowID="1000749" id="TestName2">
<td class="formBodyEvenRow" width="20">2&nbsp;</td>
<td class="formBodyEvenRow" width="30"><input type="Checkbox" id="Select" name="Select" unchecked=""></td>
</tr>
<tr class="gridSubHeader1" rowID="1000750" id="TestName2">
<td class="formBodyOddRow" width="20">3&nbsp;</td>
<td class="formBodyOddRow" width="30"><input type="Checkbox" id="Select" name="Select" unchecked=""></td>
</tr>
<tr class="gridSubHeader1" rowID="237" id="TestName2">
<td class="formBodyEvenRow" width="20">4&nbsp;</td>
<td class="formBodyEvenRow" width="30"><input type="Checkbox" id="Select" name="Select" unchecked=""></td>
</tr> 
```

可能有多行，其中行代表一个特定的家庭。见上面，有 2 个家族，TestName 和 TestName 2。每个家族的每一行都可以有一个或多个复选框。

脚本代码：

```
<script language="javascript" type="text/javascript">
    function HandleClick(elementName) {
         if ($("input[familyname='" + elementName + "']").is(':checked')) {
            $("#" + elementName).each(function () {
                $(this).find('input', 'checkbox').attr('checked', true);
            });
        }
        else {
            $("#" + elementName).each(function () {
                $(this).find('input', 'checkbox').attr('checked', false);
            });
        }
    }
</script> 
```

似乎只选择了第一个复选框，而不是选择所有 4 个。你能建议什么是错的......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T23:26:06.990

**HTML 页面中的ID**是**唯一的**..

因此，当您尝试选择 Multiple id's 时，因为 ID 是唯一的，它会在遇到第一个 ID 元素后停止搜索。这就是只检查第一个 ID 元素的原因

所以你需要修改你的选择器..你也不需要 $.each 迭代器来让它工作..试试这个

```
$(this).closest('tr').nextAll('tr').find('input').prop('checked', true); 
```

试试这个代码.. **JS**

```
var elementName = 'TestName' ;
$('input[familyname="TestName"]').on('click', function() {
    if ($("input[familyname='" + elementName + "']").is(':checked')) {
        $(this).closest('tr').nextAll('tr').find('input').prop('checked', true);

    }
    else {
        $(this).closest('tr').nextAll('tr').find('input').prop('checked', false);
    }
});​ 
```

**HTML**

```
<table>
   <tr class="gridSubHeader1">
      <td colspan="6"><input type="checkbox" familyname="TestName" />EB - Autonomy</td>
   </tr>
   <tr class="gridSubHeader1" rowID="1000748">
      <td class="formBodyOddRow" width="20">1&nbsp;</td>
      <td class="formBodyOddRow" width="30"><input type="Checkbox" id="Select" name="Select" unchecked="" /></td>
   </tr>
   <tr class="gridSubHeader1" rowID="1000749">
      <td class="formBodyEvenRow" width="20">2&nbsp;</td>
      <td class="formBodyEvenRow" width="30"><input type="Checkbox" id="Select" name="Select" unchecked="" /></td>
   </tr>
   <tr class="gridSubHeader1" rowID="1000750">
      <td class="formBodyOddRow" width="20">3&nbsp;</td>
      <td class="formBodyOddRow" width="30"><input type="Checkbox" id="Select" name="Select" unchecked="" /></td>
   </tr>
   <tr class="gridSubHeader1" rowID="237">
      <td class="formBodyEvenRow" width="20">4&nbsp;</td>
      <td class="formBodyEvenRow" width="30"><input type="Checkbox" id="Select" name="Select" unchecked="" /></td>
   </tr>
</table> 
```

`I have removed the ID from your table`. 确保它们在页面上是唯一的

这条线也可以

```
if ($("input[familyname='" + elementName + "']").is(':checked')) 
```

**//替换为**

```
if ($(this).is(':checked')) 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/macTj/1/)**

**已编辑**

这是在 HTML 本身中定义的 eventHandler 的代码..

```
<table>
   <tr class="gridSubHeader1">
      <td colspan="6"><input type="checkbox" familyname="TestName" onclick="javascript:HandleClick('TestName');" />EB - Autonomy</td>
   </tr>
   <tr class="gridSubHeader1" rowID="1000748">
      <td class="formBodyOddRow" width="20">1&nbsp;</td>
      <td class="formBodyOddRow" width="30"><input type="Checkbox" id="Select" name="Select" unchecked="" /></td>
   </tr>
   <tr class="gridSubHeader1" rowID="1000749">
      <td class="formBodyEvenRow" width="20">2&nbsp;</td>
      <td class="formBodyEvenRow" width="30"><input type="Checkbox" id="Select" name="Select" unchecked="" /></td>
   </tr>
   <tr class="gridSubHeader1" rowID="1000750">
      <td class="formBodyOddRow" width="20">3&nbsp;</td>
      <td class="formBodyOddRow" width="30"><input type="Checkbox" id="Select" name="Select" unchecked="" /></td>
   </tr>
   <tr class="gridSubHeader1" rowID="237">
      <td class="formBodyEvenRow" width="20">4&nbsp;</td>
      <td class="formBodyEvenRow" width="30"><input type="Checkbox" id="Select" name="Select" unchecked="" /></td>
   </tr>
</table>
<script language="javascript" type="text/javascript">
   function HandleClick(elementName) {
       var $checkBox = $("input[familyname='" + elementName + "']") ;
       if ($checkBox.is(':checked')) {
            $checkBox.closest('tr').nextAll('tr').find('input').prop('checked', true);
       }
       else {
          $checkBox.closest('tr').nextAll('tr').find('input').prop('checked', false);
       }
   }
</script>​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T23:31:57.087

我在 jsfiddle 上重新创建了它：http: [//jsfiddle.net/bjoshuanoah/Rsasf/](http://jsfiddle.net/bjoshuanoah/Rsasf/)

对于多次使用的东西，用类替换 id。

哦，除非您也绝对需要，否则请不要在表格中编码.... 8\

这有效：

```
<tr class="gridSubHeader1">
<td colspan="6"><input type="checkbox" familyname="TestName">EB - Autonomy</td>
</tr>
<tr class="gridSubHeader1" rowID="1000748" id="TestName">
<td class="formBodyOddRow" width="20">1&nbsp;</td>
<td class="formBodyOddRow" width="30"><input type="Checkbox" class="TestName" name="Select" unchecked=""></td>
</tr>
<tr class="gridSubHeader1" rowID="1000749" id="TestName">
<td class="formBodyEvenRow" width="20">2&nbsp;</td>
<td class="formBodyEvenRow" width="30"><input type="Checkbox" class="TestName" name="Select" unchecked=""></td>
</tr>
<tr class="gridSubHeader1" rowID="1000750" id="TestName">
<td class="formBodyOddRow" width="20">3&nbsp;</td>
<td class="formBodyOddRow" width="30"><input type="Checkbox" class="TestName" name="Select" unchecked=""></td>
</tr>
<tr class="gridSubHeader1" rowID="237" id="TestName">
<td class="formBodyEvenRow" width="20">4&nbsp;</td>
<td class="formBodyEvenRow" width="30"><input type="Checkbox" class="TestName" name="Select" unchecked=""></td>
</tr>​​​​​​​​​​​​ 
```

使用 JS：

```
var handleClick = function(elementName) {
         if ($("input[familyname='" + elementName + "']").is(':checked')) {
            $("input." + elementName).each(function () {
                $(this).attr('checked', true);
            });
        }
        else {
            $("input." + elementName).each(function () {
                 console.log('tr'); 
                $(this).attr('checked', false);
            });
        }
}

$('input[familyname="TestName"]').click(function(){
    handleClick('TestName');
}); 
```

​</p>

# javascript - Rails - 时间线javascript的路由问题

> ID：12849984
> 
> 赞同：1
> 
> 时间：2012-10-11T23:13:04.090
> 
> 标签：javascript, ruby-on-rails, routes, asset-pipeline, timeline.js

我正在尝试使用来自[http://timeline.verite.co/](http://timeline.verite.co/)的时间线- 但我无法让它工作。我想我已经找到了这个问题，但不知道如何解决它。

基本上，javascript 是从 assets 文件夹中提供的，它被编码为在同一个文件夹中查找它需要工作的某些文件（例如 /assets/js/timeline.js）。即使此文件位于 assets 文件夹中的正确文件夹中，应用程序仍会给出路由错误，指出没有路由匹配 /assets/js/timeline.js。

由于 javascript 已经被缩小并且是一个试图拖网的噩梦，有没有办法让资产文件夹响应路由请求？或者这会是生产中的一个大问题，实际上有更好的方法吗？

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T23:28:03.917

我遇到了一个目前有效的修复程序 - 以防其他人需要使用它。它可能非常笨重而且不是最棒的，但仍然如此。这在开发中有效，而不是在生产中尝试过。随意提出任何改进/替代方案。

我将以下内容放入应用程序布局中：

```
<%= javascript_include_tag "/js/storyjs-embed.js" %>
        <script>
            $(document).ready(function() {
                createStoryJS({
                    type:       'timeline',
                    width:      '800',
                    height:     '600',
                    source:     '/js/example_json.json',
                    embed_id:   'my-timeline'
                });
            });
        </script> 
```

然后把相关文件放到公共文件夹中JS要求的文件夹结构中。而且，至少现在，它有效。

# ubuntu - 访问 Github 时连接超时

> ID：12849986
> 
> 赞同：2
> 
> 时间：2012-10-11T23:13:13.783
> 
> 标签：ubuntu, dns, github, connection

我有一些奇怪的问题。当我尝试**登录**我的**Github**帐户时，我收到“net:: **ERR_EMPTY_RESPONSE** ”错误。

我**尝试使用 Chrome、Firefox 和 Opera**。在 Firefox 中，如果清理缓存和离线数据，它会工作一段时间。然后我可以登录了，但是我还是不能创建Github仓库，即使我再次清除缓存。

我的**朋友**，在**同一个网络**中，使用 Windows，**可以**在 Github 的网站上做他想做的任何事情，但我不能。我**尝试**了许多**DNS**服务器，我尝试不设置它（我的朋友没有），但它仍然**无法正常工作**。

我的操作系统：**Ubuntu x64 12.04**

想法，请。谢谢。

# c++ - 如何在 C++ 的成员变量中实例化子类的实例？

> ID：12849988
> 
> 赞同：3
> 
> 时间：2012-10-11T23:13:21.263
> 
> 标签：c++, operator-overloading, subclass, private-members

我正在使用一个庞大的 C++ 代码库。

我想引入一个新的子类，并在各种不同的上下文中使用它，但是我受过 Java 训练的头脑在 C++ 中遇到了麻烦。

我希望尽量减少代码更改。所以，我感兴趣的主要类（`BAR`下面）有一个成员变量 class `FOO`。我希望创建一个`FOO`被调用的子类`FOOSUBCLASS`。在java中这是微不足道的。默认情况下，对象是通过引用存储的。此代码不这样做（如下所示）我可以在不更改接口（并且不引入引用）的情况下按摩此代码并且仍然使我的应用程序工作吗？

```
class FOO {
};

class FOOSUBCLASS : FOO {
public:
    FOOSUBCLASS(const int id) {_id = id;}
private:
    int _id;
};

class BAR {
public:
    BAR(const FOO foo) { _foo = foo;}
private:
    FOO _foo;
}; 
```

下面，是我的主要内容：

```
FOOSUBCLASS fsc(1);
BAR b(fsc); 
```

但这不能在 VS2005 中编译。它说：

'type cast' : 从 'FOOSUBCLASS *' 到 'const FOO &' 的转换存在，但无法访问

如果我将明显的其他构造函数添加到`BAR`

```
BAR(const FOOSUBCLASS foo) { _foo = foo;} 
```

我对 C++ 的理解是，它将数据复制`FOOSUBCLASS`到 class 的对象中`FOO`。（使用赋值运算符，或它的类覆盖版本）但在我的情况下，我有额外的成员变量`FOOSUBCLASS`（和一些被覆盖的成员函数）所以我只是不希望它这样做。我希望我的成员变量在某些情况下和其他情况下`_foo`真正具有类型。这甚至可能吗？`FOOSUBCLASS``FOO`

谢谢你的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T23:15:31.177

公开基类

```
class FOOSUBCLASS : public FOO {
public:
    FOOSUBCLASS(const int id) {_id = id;}
private:
    int _id;
}; 
```

另外，请注意在`BAR`构造函数中切片

分配给指针/引用以避免这种情况：

```
class FOO
{
};

class FOOSUBCLASS : public FOO
{
public:
    FOOSUBCLASS(const int id) : _id(id) {}
private:
    int _id;
};

class BAR
{
public:
    BAR(const FOO& foo) : _foo(foo)
    {
    }
private:
    FOO& _foo;
}; 
```

注意：我在构造函数主体中使用了初始化列表语法而不是赋值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T23:17:58.047

你不能按照你现在写的方式去做，对不起。这称为“切片”，有关它的更多信息可以在这里找到：[什么是对象切片？](https://stackoverflow.com/questions/274626/what-is-the-slicing-problem-in-c)

如果您希望您的`_foo`成员是多态的，则需要使用指针或引用。当你做这样的事情时，当然要注意生命周期管理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T23:31:44.450

首先在 C++ 类中默认使用`private`从它们的基类继承，这意味着这`FOOSUBCLASS`是一个`FOO`但转换是内部的，您无法访问。所以首先转换`class FOOSUBCLASS : FOO`为`class FOOSUBCLASS : public FOO`，第二个是在 Java 中，每个 this 都是参考，所以你可以说

```
FOOSUBCLASS fs;
FOO f = fs; 
```

但是在 C++ 中，我们有引用和非引用，并且使用`FOO f`创建一个实际上是对象的非引用，因此`FOO f = fs`只复制`FOO`一部分`fs`到`f`并且不会导致对 a 的`FOO`引用`FOOSUBCLASS`来实现这一点，您应该使用指针或引用或智能指针。例如你可以说：

```
FOOSUBCLASS* fs = new FOOSUBCLASS;
FOO* f = fs;   // Use pointer is OK
FOO& rf = fs;  // A reference of fs as a FOO
std::auto_ptr<FOO> spf( fs );  // OK, but for this destructor must be virtual 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T23:26:50.403

对于用户 sehe，请考虑将引用而不是按值传递给 BAR 的构造函数。

`class BAR { public: BAR(const FOO& foo) { _foo = foo;} private: const FOO& _foo; };`

# python - python中的traits.api错误

> ID：12849997
> 
> 赞同：3
> 
> 时间：2012-10-11T23:14:31.173
> 
> 标签：python, traits

我通过这个网站下载了 Enthought Tool Suite：[http](http://code.enthought.com/downloads/) ://code.enthought.com/downloads/ 。

当我写的时候把这段代码放在 python 脚本中：

```
from traits.api import HasTraits, Str, Int
from traitsui.api import View, Item
from traitsui.menu import OKButton, CancelButton

class SimpleEmployee(HasTraits):
    first_name = Str
    last_name = Str
    department = Str

    employee_number = Str
    salary = Int

view1 = View(Item(name = 'first_name'),
             Item(name = 'last_name'),
             Item(name = 'department'),
             buttons = [OKButton, CancelButton])

sam = SimpleEmployee()
sam.configure_traits(view=view1) 
```

我收到一条错误消息：

“ImportError：没有名为 traits.api 的模块”

我该如何补救？我不知道我错过了什么。请帮我！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T08:28:47.620

如果我没记错的话，你需要在下载后编译 Enthought 工具套件，这并不容易。

我建议您尝试安装 Enthought Python 发行版 Free，您可以在此处获取： [http ://www.enthought.com/products/epd_free.php](http://www.enthought.com/products/epd_free.php)

这样，您应该默认安装所有必要的软件包。

**编辑：**

如果你绝对想保留默认的 python 发行版，[这里](http://www.lfd.uci.edu/~gohlke/pythonlibs/ "Gohlke 库")的这个人已经用简单的 windows 安装程序编译了一个有用的 python 包列表。

此外，还有非常完整的 python 发行版，其中包含您可能需要的几乎所有科学软件包：[PythonXY](http://code.google.com/p/pythonxy/ "蟒蛇XY")（尽管这只是 32 位），然后是 Continuum [Anaconda](http://continuum.io/downloads "蟒蛇")发行版，它已经获得了很多基础。