# StackOverflow 问答 16177000-16177999

# php - new DomDocument() 不适用于 getElementsByTagName('section');

> ID：16177001
> 
> 赞同：0
> 
> 时间：2013-04-23T18:50:43.577
> 
> 标签：php, ajax, jquery, domdocument

如果文件是否由 Ajax 调用，我希望有不同的输出。为此，我有这个代码女巫工作正常：

```
/* AJAX check  */
if(!empty($_SERVER['HTTP_X_REQUESTED_WITH']) && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) == 'xmlhttprequest') {
    $content = get_content();
    die($content);
} 
```

我过滤竞争的功能是：

```
function get_content(){
    //$file = file_get_contents('index.html'); //works better but i get only errors
    $dom = new DomDocument();
    $dom->loadHTML($_SERVER['REQUEST_URI']); //or $file
    $section= $dom->getElementsByTagName('section');
    return $section->item(0)->nodeValue;
} 
```

我的输出总是空的。这里有什么问题？

!!!我不是在寻找 DOMDocument 错误处理!!!

我现在要做的是：

```
/* decide what the content should be up here .... */

/* AJAX check  */
if(!empty($_SERVER['HTTP_X_REQUESTED_WITH']) && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) == 'xmlhttprequest') {
    /* if ajax,  show only content of the section tag */
    $file = file_get_contents($_SERVER['SCRIPT_FILENAME']);
    $section = preg_replace("/.*<section[^>]*>|<\/section>.*/si", "", $file);
    die($section);
}

/* not ajax, show page.... */ 
```

它似乎工作。我不知道这是最好的解决方案，因为在这个论坛的某个地方我读到使用 DomDocument() 更好地实现这一点。欢迎任何建议？

这是html文件：

```
<!doctype html>
<!-- Determine browser JS free -->
<!-- HTML5 Mobile Boilerplate -->
<!--[if IEMobile 7]><html class="no-js iem7"><![endif]-->
<!--[if (gt IEMobile 7)|!(IEMobile)]><!--><html class="no-js" lang="en"><!--<![endif]-->

<!-- HTML5 Boilerplate -->
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->

<head>
                    <meta charset="utf-8">
            <title>title</title>

            <link rel="stylesheet" type="text/css" href="../css/style.css">
            <link rel="shortcut icon" href="img/base/favicon.html" />
            <link rel="apple-touch-icon-precomposed" href="img/base/apple-touch-icon-57x57-precomposed.html" />
            <link rel="apple-touch-icon-precomposed" sizes="72x72" href="img/base/apple-touch-icon-72x72-precomposed.html" />
            <link rel="apple-touch-icon-precomposed" sizes="114x114" href="img/base/apple-touch-icon-114x114-precomposed.html" />
            <script src="/js/libs/modernizr.custom.js"></script>
            <!--[if (IE 7)]>
                <link rel="stylesheet" href="/css/fallback/icons-ie7.css">
            <![endif]-->

            </head>

    <body >

        <section role="main">

    <header class="hero-banner">
        <img class="resize" src="/img/base/spacer-hero.png" rel="/img/designers/banners/cloe-banner3.jpg" alt="Cloe" />
        <noscript><img src="/img/designers/banners/cloe-banner3.jpg" alt="Cloe" /></noscript>
        <hgroup>
            <h1>Claudia</h1>
            <h2 class="text-hl">Designerin</h2>
        </hgroup>
    </header>

        </section>

        <footer role="contentinfo">

            <p><small>&copy;2013 joe</small></p>
            <p><small>Our website uses delicious cookies to improve your experience. We'll assume you're ok with that.</small></p>

        </footer>

        <!-- jQuery from Google's CDN with local fallback -->
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="/js/libs/jquery-1.8.3.min.js"><\/script>')</script>

        <script src="/js/libs/wfl.js"></script>

        <!-- Initialises scripts from plugins.js and helper.js -->
        <script src="/js/script.js"></script>

        <!-- Google Goggles -->

    </body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T19:21:25.503

You can turn the errors of by setting internal errors to true:

```
$doc = new DOMDocument;

$before = libxml_use_internal_errors(true);
$doc->loadHTML($html);
libxml_use_internal_errors($before); 
```

You then won't have the errors logged any longer. In your case most likely you've got display errors enabled which might be okay for development, but on your production server, please switch to error logging otherwise your website would reveal too much data to the outside.

See as well:

*   [PHP DOMDocument error handling](https://stackoverflow.com/q/1759069/367456)

# xna - 在 XNA (3D) 中使用射线/平面检测进行碰撞

> ID：16177005
> 
> 赞同：0
> 
> 时间：2013-04-23T18:51:05.170
> 
> 标签：xna

基本上我想在 XNA (C#/.NET) 中使用 Rays and Planes 来检测我的模型之间的碰撞。但在我能做到这一点之前，我迫切需要知道它们是如何工作的。

每当我去某个地方寻找 Ray/Plane 示例时，除了挑选教程之外我什么也得不到——我不是在寻找挑选教程……

我一直在尝试做的是取一个平面，给它输入 3 个 Vector3，让它代表一个 3d 原始三角形，然后向它发射 Ray。射线只是空间中的一个点和一个方向。

我的问题是当我在飞机上发射射线时，它给了我一些我无法理解的结果。例如：

假设我有一个表示坐标为 {0,0,0}{1,0,0}{0,0,1} 的基元的平面

现在我在 {0.5,1,0.5} （大约在三角形平面的中心上方）放置一条射线并给它方向；{0,-1,0}

这给了我 1，这是预期的，因为平面在射线下方 1 个单位，并且射线指向下方。但是，当我在 {2,0,0} 处设置 Ray 点时，它仍然给我一个数字，这是没有意义的，因为 {2,0,0} 是一个不在三角形上的点。

这是我一直在使用的代码；

```
Plane plane = new Plane(Vector3.Zero, Vector3.Right, Vector3.Backward);
Vector3 rayPos = new Vector3(0.5f, 1f, 0.5f);
Vector3 direction = new Vector3(1f, 0f, 1f) - rayPos;
direction.Normalize();
Ray ray = new Ray(rayPos, direction);
Console.WriteLine(ray.Intersects(plane)); 
```

我觉得我遗漏了一些非常重要的东西，而且我认为这一切都是错误的。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T20:06:24.397

although 2,0,0 isn't on the plane, the direction ((2,0,0) - rayPos) is a direction that will intersect the plane (if starting from the current rayPos) and returns a result of 1.87...

# c# - E分类广告领域模型购买

> ID：16177008
> 
> 赞同：-3
> 
> 时间：2013-04-23T18:51:06.987
> 
> 标签：c#, domain-driven-design

我正在学习`nhibernate`，我想将我的技能应用到实际应用中，我将使用代码优先方法，即 nhib 序列化。会话工厂配置对象、asp.net mvc 缓存和每个 Web 请求的休眠会话，...

由于我不想研究核心领域模型（没有足够的时间来识别业务流程）我想购买具有实体之间关联的领域模型图。

我感兴趣的领域模型是`Online Classifieds`.

我已经用谷歌搜索了，但我找不到任何免费或付费的。

有没有这样一个带有基于行业的 uml 图的网站，感兴趣的人可以下载域模型或查找更多信息。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T19:16:49.677

即使您获得了参考模型，您仍然必须在您的项目中实现它，这实际上需要完全熟悉模型。此外，您的项目可能需要偏离模型。总体而言，您不能期望将某种模型工件放入您的项目中并期望事情能够无缝地工作。

然而，为了获得灵感，最好看看其他领域是如何建模的。[有效的聚合设计](https://vaughnvernon.co/?p=139)是一个很好的资源。它对域进行建模，然后解决所有技术问题，其中考虑的因素包括使用 ORM 的持久性。

我发现参考模型集合有些帮助，但如果没有实现方法，它们可能会有些误导。

# java - 持久化 @Embeddable 的 @ElementCollection（Google App Engine，datanucleus）

> ID：16177009
> 
> 赞同：0
> 
> 时间：2013-04-23T18:51:06.847
> 
> 标签：java, google-app-engine, datanucleus

我正在尝试使用 JPA2 [@ElementCollection](http://docs.oracle.com/javaee/6/api/javax/persistence/ElementCollection.html)注释来保留具有自定义 @Embeddable 对象集合的 JPA 实体。简单示例（两个类都由 datanucleus 增强）：

```
@Entity
public class TestEntity {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    @ElementCollection
    private Set<TestEmbeddable> testEmbeddables;

    public Set<TestEmbeddable> testEmbeddables() {
        return this.testEmbeddables;
    }
}

@Embeddable
public class TestEmbeddable implements Serializable {
    public String s;
} 
```

然而，持久化的 Datastore 实体将仅包含空值的集合，而不是实际的对象：

```
TestEntity.testEmbeddables = [null, null, ...] 
```

使用 @Embedded 保留基本类型（例如字符串）的集合或嵌入单个 TestEmbeddable 对象非常有效。**有人能澄清 datanucleus-appengine 是否支持嵌入的元素集合吗？**

[虽然JPA 元素集合](http://www.datanucleus.org/products/accessplatform_3_1/jpa/orm/one_to_many_list.html)上的 datanucleus 部分仅提供了字符串集合的示例，但相应的[JDO 部分](http://www.datanucleus.org/products/accessplatform_3_1/jdo/orm/embedded.html#Collection)使用了自定义的仅限嵌入类型。[功能列表](http://www.datanucleus.org/products/accessplatform_3_1/datastore_features.html)进一步指出嵌入式集合通常与 GAE 兼容，但没有说明是否支持自定义类型。我还发现另一个人声称[这应该有效](https://groups.google.com/d/msg/google-appengine/cCUNPEOnqsw/W-ZEp7URTU0J)。

**- 编辑 -**

按照 DataNucleus 的回答，我进行了更多测试：

```
@ElementCollection
private List<String> stringsElementCollection; 
```

--> 有效。单独的字符串被保存为 TestEntity.stringsElementCollection = [str1, str2, ...]

```
@Embedded
private List<String> stringsEmbedded; 
```

--> 与@ElementCollection 相同。不过，我想知道 JPA 规范是否涵盖了[@Embedded](http://docs.oracle.com/javaee/6/api/index.html?javax/persistence/ElementCollection.html)在集合上的使用？

```
@ElementCollection
private List<TestEmbeddable> embeddablesElementCollection; 
```

--> 不起作用。Datastore 仅保留一组空值，而不是实际的 TestEmbeddable 对象：TestEntity.embeddablesElementCollection = [null, null, ...]

```
@Embedded
private List<TestEmbeddable> embeddablesEmbedded; 
```

--> 这似乎可行。TestEmbeddable.s 字段存储为 TestEntity.s.0、.s.1 等以及 TestEntity.embeddablesEmbedded.size 属性。

*（App Engine SDK 1.7.7.1、datanucleus 3.1.3、datanucleus-appengine 2.1.2）*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-24T16:58:01.600

David Geiger 在此处记录了该问题： [https ://code.google.com/p/datanucleus-appengine/issues/detail?id=318](https://code.google.com/p/datanucleus-appengine/issues/detail?id=318)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T06:45:41.007

不知道 Google 是否支持使用 JPA 嵌入此类对象的集合。那只是为 JDO 开发并在那里工作。您可以尝试在嵌入字段上放置 @Embedded 以强化其嵌入的想法。

# javascript - 制作“背景”Chrome 扩展来修改当前页面的代码

> ID：16177010
> 
> 赞同：1
> 
> 时间：2013-04-23T18:51:10.403
> 
> 标签：javascript, jquery, google-chrome-extension

我想制作一个 Chrome 应用程序，以某种方式修改当前页面的文本和代码，但我不知道这是否可能。基本思想是这样的：

```
if(pagename == somepage) {
    $("#someid").html("whatever");
    $("#somebutton").click(function() {
        $("#someotherid").html("whatever");
    }
} 
```

问题是，我不想点击按钮或图标来实现这一点：我希望在页面加载后立即执行该代码。我浏览了 Google 如何制作 Chrome 扩展程序，但所有结果都向我展示了如何制作一个在右上角有一个图标的扩展程序，单击该图标会打开一个弹出窗口。是否可以进行“背景”扩展，例如这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T18:58:08.557

您需要创建一个内容脚本：

[http://developer.chrome.com/extensions/content_scripts.html](http://developer.chrome.com/extensions/content_scripts.html)

从页面：

> 内容脚本是在网页上下文中运行的 JavaScript 文件。通过使用标准的文档对象模型 (DOM)，他们可以读取浏览器访问的网页的详细信息，或对其进行更改。

# qt - 暂停而不使用计时器

> ID：16177011
> 
> 赞同：0
> 
> 时间：2013-04-23T18:51:10.493
> 
> 标签：qt

如何在循环播放之间暂停？我确实有一个 .wav 文件，我确实想连续播放它，但我希望在每次播放之间暂停 X 毫秒。我知道我可以编辑 .wav 文件并在其末尾添加“安静”，但我想知道它是否可以在不使用计时器的情况下以编程方式完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T21:50:55.867

你肯定想在 Qt 中使用[singleShot](http://qt-project.org/doc/qt-4.8/qtimer.html#singleShot-prop) [`QTimer`](http://qt-project.org/doc/qt-4.8/qtimer.html#details)来暂停一下。Qt 中还有其他一些在`QTimer`内部使用 a 的机制。一些替代方案可能使它更漂亮一些，但通常位于更大的框架中并用于不同的用例。

一些可能适合您的应用程序的替代方案包括：

您可以启动使用 a 的顺序动画，[`QPauseAnimation`](http://qt-project.org/doc/qt-4.8/qpauseanimation.html#details)内部使用某种`QTimer`.

如果您[`QTime::currentTime()`](http://qt-project.org/doc/qt-4.8/qtime.html#currentTime)经常在循环或`QThread`. 您也可以使用[`QTime::elapsed()`](http://qt-project.org/doc/qt-4.8/qtime.html#elapsed).

如果您不介意 GUI 在睡眠期间挂起，您可以`#include "windows.h"`或为您的平台使用适当的库并命令[睡眠。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686298%28v=vs.85%29.aspx)

您可以设置一个[`QStateMachine`](http://qt-project.org/doc/qt-4.8/qstatemachine.html#details)并内置一个过渡动画/计时器，以在您的视频停止和您想要执行下一个动作之间发生，或者让其他东西出现或开始。

希望有帮助。祝你好运。

# javascript - Javascript jquery 在 Safari 中锁定（仅）

> ID：16177017
> 
> 赞同：1
> 
> 时间：2013-04-23T18:51:18.760
> 
> 标签：javascript, safari

我创建了一个使用 javascript 运行 jquery 库查看器的网站。仅在 Safari 中使用图库时会出现问题（而不是在 Chrome、Firefox 等中）。

起初，画廊运行顺利。但是，如果您单击足够多的图片（在单个画廊页面上，或在包含不同画廊的多个页面上）最终画廊脚本将停止工作。此时，所有图库功能都会停止，即使您在网站的不同页面上访问不同的图库。刷新页面、硬刷新、清除缓存、访问不同的画廊/页面或关闭选项卡并在新选项卡中重新打开都不会恢复功能。让它再次工作的唯一方法是关闭 Safari 窗口，打开一个新窗口，然后再次转到该页面。（我想知道浏览会话与此有什么关系？）

我尝试使用控制台，并尝试使用 Firebug Lite 来诊断问题，但没有成功。当脚本停止工作时，控制台中不会出现错误；控件只是停止工作。

我可以在运行 Safari 的不同机器上可靠地复制该问题（最简单的方法是反复快速地循环浏览画廊中的图片，直到它锁定）。我无法使用任何其他浏览器复制该问题。

任何帮助找出问题所在，甚至是如何解决问题的建议，将不胜感激！

画廊可以在这里找到：

[http://www.gailcohenphotography.com/galleries.html](http://www.gailcohenphotography.com/galleries.html)

非常感谢， - 保罗

# java - 链接到纯文本 HTML “转到行”

> ID：16177019
> 
> 赞同：0
> 
> 时间：2013-04-23T18:51:21.940
> 
> 标签：java, html, svn

我有一个问题，但我很确定答案是否定的，所以我对解决我的问题的想法持开放态度。

问题：我有一个包含两个代码版本的程序，一个在线实时/生产版本和一个本地开发/测试版本。这是一个 Java Web Start Swing 桌面应用程序。我已经设置了一个错误记录系统，它会向我发送一封包含错误堆栈跟踪的电子邮件。但是，由于本地开发/测试版本总是与实时版本不同，我必须查看实时版本上的代码才能找到错误的确切行。因此，我设置了一个 SVN，每当我更新直播节目时我都会承诺使用它。

我想在错误电子邮件中直接链接到引发错误的行，以便我可以单击堆栈跟踪中的链接。堆栈跟踪告诉我文件+行号。我可以通过 http 访问我的 SVN 存储库，因此我可以将代码视为纯文本无 HTML 页面。但我不能在这些代码页（`<a name="">`）中放置锚点。代码页是纯文本的，没有 HTML（否则我只会在每一行加上 line# 的锚点）。

问题是这样的：有没有办法在纯文本的非 HTML 页面中“跳转到第 # 行”？如果我链接到正确的代码文件，有没有办法我也可以在没有的情况下跳转到该文件中的一行`<a name="">`？

如果有人知道任何可以插入我现有 SVN 的好的 SVN 查看器 Web 应用程序，欢迎使用。希望我足够清楚地提出问题，以便有意义。我已经用谷歌搜索了，但我找不到任何东西。你们可能有的任何解决方案都会有所帮助。

谢谢。

# python - Python Tkinter Grid 问题 - 用户错误？

> ID：16177020
> 
> 赞同：0
> 
> 时间：2013-04-23T18:51:23.253
> 
> 标签：python, tkinter

我正在尝试使用 Tkinter 为 Python gui 创建一个基本布局。

```
#!/usr/bin/env python
from Tkinter import *

#create root
root = Tk()

banner = Frame(root, width=500)
body = Frame(root, width=500)
banner.grid()
body.grid()

bannercontent = Label(banner, bg="Green", text="Green").grid(row=0, column=0)
bannerbuttons = Label(banner, bg="Red", text="Red").grid(row=0, column=1)
bodycontent = Label(body, bg="Blue", text="Blue").grid(row=1, column=0, columnspan=2, sticky=E+W)
root.mainloop() 
```

然而，对于上述情况，蓝色标签并没有像我希望的那样扩展以填充 2 列，即填充绿色和红色下的空间。请问我做错了什么？

这里的例子 [http://imgur.com/nGWQX9y](https://imgur.com/nGWQX9y)

![例子](https://i.stack.imgur.com/UPjQ5.png)

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:15:38.963

您的代码有一些问题。首先，您没有指定`sticky`选项，因此小部件不会“粘”（即：增长或缩小）到单元格的边缘。您的`bodycontent`标签实际上占据了两列，但框架本身并没有扩展到主窗口的整个宽度。

第二个问题是您似乎假设列跨越整个应用程序。他们不。您有两列，`banner`因为您在第 0 列和第 1 列中放置了一个小部件。但是，`bodycontent`只有一列（或者，您可以说它有两列，但第二列的宽度为零）。第一帧中的列大小与第二帧中的列无关。因此，底部框架内容不会与顶部框架对齐。

您的代码存在的第三个问题是您没有给行或列“权重”。该`weight`属性告诉 Tkinter 如何分配任何额外的空间。由于您还没有这样做，因此当您扩大或缩小窗口时，您的 GUI 不会以令人愉快的方式调整大小。一个好的经验法则是，对于任何给定的容器，至少应为一行一列赋予非零权重。

# ios - iOS：使用模拟器进行区域监控还很遥远

> ID：16177024
> 
> 赞同：0
> 
> 时间：2013-04-23T18:51:28.980
> 
> 标签：ios, core-location

我一直在尝试在 iPhone 上进行区域监控时遇到问题。首先，我从来没有（甚至一次都没有）在我的 iPhone 4 设备上使用过`didEnterRegion`或开过火。`didExitRegion`

我决定在模拟器上进行测试，而不是浪费工作时间在市中心走来走去（尽管我希望在真实场景中看到这项工作）。首先，模拟器在准确性方面还有很长的路要走，你会认为它非常准确（或者我假设错了？）。

**通过更改 Debug 菜单下的位置，在模拟器中完成以下操作**

我终于`didEnterRegion`开枪了，尽管我离这个圈子大约 8 个街区。当我离开该地区`didExitRegion`时，连续发射了大约 200 次。这是模拟器错误吗？我几乎准备放弃这个并开始自己计算这些东西，因为它越来越荒谬了。

关于为什么准确性如此糟糕以及为什么我的方法被解雇这么多次的任何想法？

以下是相关代码：

```
-(BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions: (NSDictionary *) launchOptions
{
    locationManager = [[CLLocationManager alloc] init];
    locationManager.delegate = self;
    locationManager.desiredAccuracy = kCLLocationAccuracyBest;

    CLLocationDegrees latitude = 45.50568;
    CLLocationDegrees longitude = -73.57033;
    CLLocationCoordinates2D centerCoordinate = CLLocationCoordinate2DMake(latitude, longitude);

    CLLocationDistance regionRadius = 200.0;

    CLRegion *myRegion = [[CLRegion alloc] initCircularRegionWithCenter:centerCoordinate radius:regionRadius identifier:@"aroundWork"];

    [locationManager startMonitoringForRegion:myRegion];

    return YES:
}

-(void)locationManager:(CLLocationManager *)manager didEnterRegion:(CLRegion *)region
{
    NSLog(@"Entered region: %@", region.identifier);
}

-(void)locationManager:(CLLocationManager *)manager didExitRegion:(CLRegion *)region
{
    NSLog(@"Exited region: %@", region.identifier);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T19:20:01.347

首先，我假设您正在使用 GPX 文件在模拟器上对其进行测试，因为任何其他方式都是错误的。

现在，因为我对区域监控进行了广泛的研究：

区域监控不是很有效。它可以很容易地错过进入或退出的区域。

我们已经做了很多测试和很多步行，并多次驾驶我们的汽车穿过城市进行测试。

有时它工作得很好，有时它失败得很惨。

我建议您使用区域边界（半径）设置进行一些操作，并进行真实测试（在某些点周围行走或开车），看看哪个表现更好。

我们的测试表明，较小的值表现得更好（半径 100 到 200 米），并且当您实际驾驶而不是步行时，区域监控的表现更好。

请记住，它使用蜂窝塔天线来定位您，这远不如 gps 准确。

# batch-file - WinSCP 主机密钥通配符选项不起作用

> ID：16177025
> 
> 赞同：3
> 
> 时间：2013-04-23T18:51:31.597
> 
> 标签：batch-file, automation, ssh-keys, winscp

我正在尝试使用[此处文档页面](http://winscp.net/eng/docs/scriptcommand_open)`*`中提到的任何主机密钥（通配符）选项打开会话......但它没有按预期工作。

> ...在特殊情况下，当不需要安全性时，您可以使用 value * 来接受任何主机密钥。在这种情况下，脚本输出和日志文件将包含有关不安全连接的警告...

日志：

```
C:\Users\s.mailappan>"C:\Program Files (x86)\WinSCP\WinSCP.com" /console /comman
d "open ssamperf:ssperf123@111.252.2.13 -hostkey=*" "option batch on" "lcd C:\Us
ers\s.mailappan\Documents\Samsung-Sprint\Hourly-Alarm-Logs" "get /home/ssamperf/
PerlScript/Akron_WSS_HOURLYALARMREPORT/LOGS/Akron_WSS1_HOURLYALARMREPORT_NEW.txt
 "  "get /home/ssamperf/PerlScript/Chicago_WSS_HOURLYALARMREPORT/LOGS/Chicago_WS
S1_HOURLYALARMREPORT_NEW.txt " "exit"
Searching for host...
Connecting to host...
Authenticating...
The server's host key was not found in the cache. You have no guarantee that the
 server is the computer you think it is.
The server's rsa2 key fingerprint is:
ssh-rsa 2048 38:b4:75:23:2d:d5:70:2c:ad:c0:d0:e2:9d:2d:72:9e
If you trust this host, press Yes. To connect without adding host key to the cac
he, press No. To abandon the connection press Cancel.
Continue connecting and add host key to the cache?
(Y)es, (N)o, C(a)ncel, (C)opy Key: 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T20:35:16.867

仅从 WinSCP 5.2 测试版开始提供对开关使用全部接受值 ( `*`)的选项。`-hostkey`您可能使用的是旧版本。

见[https://winscp.net/tracker/815](https://winscp.net/tracker/815)

* * *

还要确保你明白你在做什么。通过使用此开关，您将放弃任何安全性。

# architecture - 为三层架构创建数据流图

> ID：16177026
> 
> 赞同：1
> 
> 时间：2013-04-23T18:51:31.963
> 
> 标签：architecture, analysis, dataflow-diagram

我想为三层软件架构创建一个数据流图，最后我想用数据流图创建一个威胁模型。

该软件应该是某种网关。它通过 REST 接口接受 HTTP 请求，并向用户提供不同类型的服务。它具有三个不同的层，提供不同的功能，每个层都可以在不同的机器上执行。

*   边界层（接受请求）
*   控制层（提供业务逻辑）
*   适配器层（到后端系统的数据连接）

示例：假设用户想在软件的帮助下创建一个 DOC 文件。他会在边界层请求一个 DOC 文件，该文件会将这个请求转发到业务逻辑发生的控制层。控制层将从适配器层请求所需的数据。

现在这是一个非常直接的例子。

我的问题如下：

每一层（边界、控制、适配器）是数据流图中的一个流程，需要分解成更小的流程，还是我只是将流程显示为“生成 DOC 文档”？

现在，如果每一层都在不同的机器上执行会发生什么——这会改变数据流图还是会因为数据流保持不变而保持不变——只有底层架构发生变化？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T04:55:35.800

DFD 是一种概念工具。它描述了您希望系统做什么，而不是如何实现。DFD*可*用于描述系统的物理方面，但它是一种使用它们的非标准方式。

> 每一层（边界、控制、适配器）是数据流图中的一个流程，需要分解成更小的流程，还是我只是将流程显示为“生成 DOC 文档”？

教科书的答案是您的图层在 DFD 中没有位置。`Generate DOC document`是系统所做的，这值得一个过程。这涉及多个层的事实是一个实现细节。

# python - 需要帮助在 pygame 中创建动态更新的分数

> ID：16177028
> 
> 赞同：0
> 
> 时间：2013-04-23T18:51:41.527
> 
> 标签：python, text, pygame, blackjack

我正在用 pygame 整合我的基于文本的二十一点游戏。我似乎无法更新玩家的手牌总数。每次它只是将它添加到以前的文本上，就变得无法阅读。

以下是相关的代码部分：

```
def update(player, comp):
drawText('Money: $%s' % (money), font, windowSurface, 50, 30)
drawText('Press "H" to hit. Press S to stand', font2, windowSurface, 500, (30))
drawText('Player Total: %s' % (sumHand(player)), font2, windowSurface, 500, (50))
drawText('Dealer Total: %s' % (sumHand(comp)), font2, windowSurface, 650, (50))
pygame.display.update()

        while True:
        update(player, comp)
        mainClock.tick(FPS)
        if sumHand(player) < 22:
            pygame.display.update()
            hCount += 1
            print('Your cards are: %s with a total value of %d' % (player,sumHand(player))) #old
            print('The dealers visible card is %s' % (comp)) #old
            print('Hit or Stand?') #old
            for event in pygame.event.get():
                event = waitForPlayerToPressKey()
                if event.key == ord('h') and hCount == 0:
                    player.append(getCard(cards))
                    cardPrint3(player)
                    update(player, comp)
                elif event.key == ord('h') and hCount == 1:
                    player.append(getCard(cards))
                    cardPrint4(player)
                    update(player, comp)
                elif event.key == ord('h') and hCount == 2:
                    player.append(getCard(cards))
                    cardPrint5(player)
                    update(player, comp)
                elif event.key == ord('h') and hCount == 3:
                    player.append(getCard(cards))
                    cardPrint6(player)
                    update(player, comp)
                    break
                    money+=500
                else:
                    break
            else:
                break 
```

如果我错过了一些重要的东西，这里是完整程序的粘贴箱。 [http://pastebin.com/70EhteQ1](http://pastebin.com/70EhteQ1)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:24:40.237

在再次开始绘图之前，您需要“清除”屏幕，或者至少是屏幕的相关部分。否则，您只是在现有图纸上绘制。在循环顶部试试这个：

```
while True:
    windowSurface.fill((255, 255, 255)) # this will draw over the entire screen surface with white
    update(player, comp)
    ... 
```

# java - android线程不在待机状态下运行

> ID：16177032
> 
> 赞同：0
> 
> 时间：2013-04-23T18:51:57.617
> 
> 标签：java, android, multithreading, standby

在我的程序中，我想检查一个新版本（从 获取数据`HTTP`）。
该功能完美运行，但我希望它每隔 X 次（可配置、一小时、一天等）在后台运行。

所以我写了这段代码：

```
 Timer mTimer1 = new Timer();
    PowerManager pm = (PowerManager) this.main.getSystemService(Context.POWER_SERVICE);
    PowerManager.WakeLock wl = this.pm.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK, MainActivity.PROGRAM);
    PowerManager.WakeLock wl.acquire();
    TimerTask mTt1 = new TimerTask()
    {
      public void run()
      {
        mTimerHandler.post(new Runnable()
          {
            public void run()
            {
// Do the check...
            }
          });
      }
    }; 
```

（因为这个函数在一个单独的类中，不是从 派生的`Activity`，所以我将父类传递给了构造函数`this.main`，以便我可以调用`getSystemService`。这`Variable`被声明为`private MainActivity main`）。
好吧，当我启动`Timer`它检查新版本时，一个小时后（所以我的设置），我检查`Logs`并看到线程没有运行......

我在互联网上搜索，我发现，我必须使用`PARTIAL_WAKE_LOCK`，我这样做......

任何想法，为什么我有这个问题？

非常感谢！卢卡·贝通切罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T19:04:26.573

当手机进入睡眠状态时，您的活动将暂停执行，因此您的计时器将永远不会触发。使用`PARTIAL_WAKE_LOCK`可能不是一个好主意，因为它会在手机睡眠的整个过程中消耗电池。

我建议看一下[AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)，特别是[setInexactRepeating](http://developer.android.com/reference/android/app/AlarmManager.html#setInexactRepeating%28int,%20long,%20long,%20android.app.PendingIntent%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T19:02:57.233

如果您使用的是 Timer，您还记得安排 TimerTask 吗？尝试 `mTimer1.schedule(mTt1, delay, interval);`

如果您想停止这种情况，请执行`mTimer1.cancel();` 并`mTimer1.purge();`清除计划队列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T19:03:24.690

使用此代码

```
 Timer timer = new Timer();
         timer.scheduleAtFixedRate( 
                    new java.util.TimerTask() {
                        @Override
                        public void run() {
                              // Your code
                   }},
                1000, 5000
                ); 
```

其中**1000**是后期延迟，如果你想第一次延迟，如果你不想，那就放**0**

**5000**是一个迭代时间

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T19:00:10.450

[这是一个 SO 答案，可以](https://stackoverflow.com/questions/11639251/android-run-a-thread-repeatingly-within-a-timer)使用处理程序和 postDelayed() 帮助您解决这个问题。

但是，如果您想在应用程序未打开的情况下运行它，那么您将需要使用[AlarmManger](http://developer.android.com/reference/android/app/AlarmManager.html)。您创建一个`PendingIntent`并创建一个`Calendar`实例来设置您希望它检查的时间，然后`setRepeating()`在`AlarmManger`. 即使不在应用程序中，也会对其进行检查。您也可以在`manifest`as中注册它，`Boot_Completed`以便在设备关闭后重新启动后再次开始运行

[这是一个让您开始使用 AlarmManager 的好例子](https://stackoverflow.com/questions/1082437/android-alarmmanager)

# javascript - 如何提取 TSV 文件中的信息并将其保存在 JavaScript 中的数组中？

> ID：16177037
> 
> 赞同：5
> 
> 时间：2013-04-23T18:52:17.617
> 
> 标签：javascript, multidimensional-array, tsv

我遇到了一个问题。如果我只有 tsv 的文件名。我如何提取其所有信息并将其保存在一个数组中，比如 X，其中 tsv 文件中的每一行都由一个数组表示，比如 y，其中 X 是 ys 的数组。

如果我不知道列名的标题，我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T19:11:18.743

您将需要使用 AJAX 或纯 XMLHttpRequest。

[http://d3js.org/](http://d3js.org/)有一个内置的 tsv 阅读器，基本上完全符合您的要求。

语法是

```
d3.tsv("file.tsv", function(data) {
    // use data here
}); 
```

该`data`变量是具有键/值对的对象数组，其中文件中的第一行被读入作为键。所以，例如

```
Number Awesomeness
1      5
2      3 
```

将返回`[{"Number":1, "Awesomeness":5}, {"Number":2, "Awesomeness":3}]`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T18:58:39.617

```
// get file contents, store in var str
var x = str.split('\n');
for (var i=0; i<x.length; i++) {
    y = x[i].split('\t');
    x[i] = y;
}

console.debug(x); 
```

有关如何获取文件内容的帮助，您需要指定这些文件的位置（在客户端计算机、服务器等）。

如果文件位于客户端计算机上，您可能会面临一段艰难的道路。

如果文件位于服务器上，则需要执行 AJAX 请求以获取文件内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-27T22:53:12.223

把它贴在这里，以便下次需要时可以找到它：

```
// parse_tsv(tsvstring, function (row) { do something with row })
function parse_tsv(s, f) {
  var ix_end = 0;
  for (var ix=0; ix<s.length; ix=ix_end+1) {
    ix_end = s.indexOf('\n', ix);
    if (ix_end == -1) {
      ix_end = s.length;
    }
    var row = s.substring(ix, ix_end-1).split('\t');
    f(row);
  }
} 
```

它比公认的答案更好，因为它不会强制在内存中构建行数组，而是一个接一个地构建小数组。在 TSV 较大的情况下，这可能会有所帮助。当然，如果您需要，您仍然可以使用回调构建数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-17T18:09:53.890

您不必为此使用 D3、JQuery 或任何其他框架。简单明了的 JavaScript（AJAX 技术）：

```
var xhttp = new XMLHttpRequest();
xhttp.onreadystatechange = function() {
        if (xhttp.readyState == 4 && xhttp.status == 200) {
                var arrayWithValues = xhttp.responseText.trim().split('\t');
                console.log(arrayWithValues);
        };
};
xhttp.open("GET", "/some.tsv", true);
xhttp.send(); 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2014-12-21T07:45:15.517

您可以使用[Alasql](http://github.com/agershun/alasql)库来做到这一点：

```
alasql('SELECT MATRIX * FROM TSV("mydata.tsv")',[],function(res){
    console.log(res);
}); 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2017-12-27T20:30:14.333

```
$result = array();
$fp = fopen('/path/to/file','r');
if (($headers = fgetcsv($fp, 0, "\t")) !== FALSE)
  if ($headers)
    while (($line = fgetcsv($fp, 0, "\t")) !== FALSE) 
      if ($line)
        if (sizeof($line)==sizeof($headers))
          $result[] = array_combine($headers,$line);
fclose($fp);
print_r($result); 
```

# html-table - 使用氚转换html中的表格

> ID：16177042
> 
> 赞同：3
> 
> 时间：2013-04-23T18:52:32.787
> 
> 标签：html-table, transform, moovweb, tritium

我正在使用[Moovweb SDK](http://www.moovweb.com/developers/moovwebsdk)，我想将表格及其所有元素转换为 div 以促进移动 Web 开发/样式设置。做这个的最好方式是什么？

```
<body>
  <table>
    <tbody>
      <tr>
        <td>
          ...
        </td>
      <tr>
     </tbody>
  </table>
</body> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T19:05:03.350

我在许多项目中看到有一个用于此目的的函数，称为`table_dump`. 我不能因为发明它而受到赞扬，但它是完整的：

```
@func XMLNode.table_dump(Text %xpath){
  $(%xpath) {
    name("div")
    add_class("mw_was_table")

    $(".//table | .//tr | .//td | .//th | .//thead | .//tfoot | .//tbody | .//col | .//colgroup | .//caption") {
      %i = index()
      %n = name()
      name("div")
      attributes(data-mw-id: concat("mw_dump_", %n, %i), width: "")
      add_class(concat("mw_was_", %n))
    }

    yield()
  }
} 
```

它确实做了三件事：

1.  将所有表格和表格元素更改为 div
2.  给每个前一个表元素一个类`mw_was_`及其前一个元素
3.  根据索引，给每个元素一个唯一的 id `data-mw-id`。

通过所有这三个，您可以摆脱表格，同时保留其元素的多样性。这样，它在 XPath 和 CSS 中仍然很容易选择，即使在您对其进行了转换之后也是如此。

# c# - 用于对集合进行排序的 LINQ 查询

> ID：16177054
> 
> 赞同：1
> 
> 时间：2013-04-23T18:53:29.893
> 
> 标签：c#, linq

我有一个这种类型的集合：

```
IEnumerable<FileInfo> files; 
```

我正在尝试对文件进行排序，以便所有名为“index.js”的文件都将出现在列表的开头。我不介意其余文件的排序方式。

那将是什么 LINQ 查询？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-23T18:55:52.623

**方法语法**

```
files = files.OrderBy(x => x.Name == "index.js" ? 0 : 1); 
```

**查询语法**

```
files = from x in files
        orderby x.Name == "index.js" ? 0 : 1
        select x; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T18:58:21.507

试试这样；

```
var f = files.OrderBy(x => "index.js".Equals(x.Name) ? 0 : 1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T18:57:28.767

这是一种“聪明”的方式：

```
IEnumerable<FileInfo> ordered = files.OrderBy(x => "index.js".Equals(x.Name) ? 0 : 1); 
```

# iphone - Monotouch 应用程序致命错误

> ID：16177055
> 
> 赞同：0
> 
> 时间：2013-04-23T18:53:33.870
> 
> 标签：iphone, xamarin.ios, xamarin

我试图了解我的应用程序在尝试呈现视图时随机崩溃的原因。按钮点击代码：

```
if ( d.rootNavigationController.RespondsToSelector(
            new MonoTouch.ObjCRuntime.Selector("presentViewController:animated:completion:")))
        {
            d.rootNavigationController.PresentViewController(childBroswer, true,null);
        }
        else
        {
            d.rootNavigationController.PresentModalViewController(childBroswer, true);
        } 
```

这是堆栈跟踪：

> 在 MonoTouch.UIKit.UIApplication.Main (string[],string,string) [0x0004c] 在 /Developer/MonoTouch/Source/monotouch/src/UIKit/UIApplication.cs:38 在 appname.Application.Main (string[]) [0x00000] 在 /Users/us/Projects/appname/appname/Main.cs:17 处（包装器运行时调用） object.runtime_invoke_dynamic (intptr,intptr,intptr,intptr) <0xffffffff>

本机堆栈跟踪：

```
0   appname                            0x00a81ba9 mono_handle_native_sigsegv + 244
1   appname                            0x00a48015 mono_sigsegv_signal_handler + 172
2   libsystem_c.dylib                   0x35df3e93 _sigtramp + 42
3   UIKit                               0x33f820a5 <redacted> + 72
4   UIKit                               0x33f82057 <redacted> + 30
5   UIKit                               0x33f82035 <redacted> + 44
6   UIKit                               0x33f818eb <redacted> + 502
7   UIKit                               0x33f81de1 <redacted> + 488
8   UIKit                               0x33ea0421 <redacted> + 5768
9   CoreFoundation                      0x3ad3a6cd <redacted> + 20
10  CoreFoundation                      0x3ad389c1 <redacted> + 276
11  CoreFoundation                      0x3ad38d17 <redacted> + 742
12  CoreFoundation                      0x3acabebd CFRunLoopRunSpecific + 356
13  CoreFoundation                      0x3acabd49 CFRunLoopRunInMode + 104
14  GraphicsServices                    0x390792eb GSEventRunModal + 74
15  UIKit                               0x33eeb2f9 UIApplicationMain + 1120
16  appname                            0x0006f618 wrapper_managed_to_native_MonoTouch_UIKit_UIApplication_UIApplicationMain_int_string___intptr_intptr + 240
17  appname                            0x009bdb20 appname_Application_Main_string__ + 152
18  appname                            0x0068664c wrapper_runtime_invoke_object_runtime_invoke_dynamic_intptr_intptr_intptr_intptr + 200
19  appname                            0x00a4962f mono_jit_runtime_invoke + 1054
20  appname                            0x00aa5df3 mono_runtime_invoke + 90
21  appname                            0x00aa88d7 mono_runtime_exec_main + 306
22  appname                            0x00aabb5b mono_runtime_run_main + 482
23  appname                            0x00a5c133 mono_jit_exec + 94
24  appname                            0x00ae9e3c main + 2220
25  appname                            0x00002028 start + 40 
```

> 执行本机代码时获得 SIGSEGV。这通常表示单声道运行时或您的应用程序使用的本机库之一中存在致命错误。

任何想法是什么错误？

谢谢！

# css - 将three.js背景更改为透明或其他颜色

> ID：16177056
> 
> 赞同：147
> 
> 时间：2013-04-23T18:53:35.560
> 
> 标签：css, html, canvas, html5-canvas, three.js

我一直在尝试将我的画布的默认背景颜色从黑色更改为透明/任何其他颜色 - 但没有运气。

我的 HTML：

```
<canvas id="canvasColor"> 
```

我的 CSS：

```
<style type="text/css">
#canvasColor {
 z-index: 998;
opacity:1;
background: red;
}
</style> 
```

正如您在以下在线示例中看到的那样，我在画布上附加了一些动画，所以不能只做一个 opacity: 0; 在身份证上。

实时预览： [http ://devsgs.com/preview/test/particle/](http://devsgs.com/preview/test/particle/)

任何想法如何覆盖默认的黑色？

* * *

## 回答 #1

> 赞同：286
> 
> 时间：2013-04-23T19:02:20.457

当我开始使用 three.js 时，我也遇到了这个问题。这实际上是一个javascript问题。您目前拥有：

```
renderer.setClearColorHex( 0x000000, 1 ); 
```

在你的`threejs`初始化函数中。将其更改为：

```
renderer.setClearColorHex( 0xffffff, 1 ); 
```

**更新：**感谢 HdN8 提供更新的解决方案：

```
renderer.setClearColor( 0xffffff, 0); 
```

**更新#2：正如 WestLangley 在**[另一个类似的问题](https://stackoverflow.com/questions/20495302/transparent-background-with-three-js)中指出的那样- 您现在必须在创建新的 WebGLRenderer 实例时使用以下代码并结合该`setClearColor()`函数：

```
var renderer = new THREE.WebGLRenderer({ alpha: true }); 
```

**更新#3：** Mr.doob 指出，由于[`r78`](https://github.com/mrdoob/three.js/releases/tag/r78)您可以选择使用下面的代码来设置场景的背景颜色：

```
var scene = new THREE.Scene(); // initialising the scene
scene.background = new THREE.Color( 0xff0000 ); 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2015-07-26T11:01:36.007

完整答案：（使用 r71 测试）

要设置背景颜色，请使用：

```
renderer.setClearColor( 0xffffff ); // white background - replace ffffff with any hex color 
```

如果你想要一个透明的背景，你必须首先在你的渲染器中启用 alpha：

```
renderer = new THREE.WebGLRenderer( { alpha: true } ); // init like this
renderer.setClearColor( 0xffffff, 0 ); // second param is opacity, 0 => transparent 
```

[查看文档](https://threejs.org/docs/#api/renderers/WebGLRenderer.setClearColor)以获取更多信息。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2014-02-04T21:45:51.403

为了透明度，这也是强制性的：`renderer = new THREE.WebGLRenderer( { alpha: true } )`通过[带有three.js的透明背景](https://stackoverflow.com/questions/20495302/transparent-background-with-three-js)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2020-04-02T19:20:59.897

在 2020 年，使用 r115 非常适合：

`const renderer = new THREE.WebGLRenderer({ alpha: true }); const scene = new THREE.Scene(); scene.background = null;`

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-10-19T18:54:58.403

我发现当我通过 three.js 编辑器创建场景时，我不仅要使用正确答案的代码（上图），还要使用 alpha 值和清晰的颜色设置渲染器，我还必须进入应用程序.json 文件并找到“场景”对象的“背景”属性并将其设置为： `"background: null"`.

Three.js 编辑器的导出最初设置为“背景”：0

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-07T13:42:52.083

使用以下代码设置渲染器清除颜色 `renderer.setClearColor( 0x000000, 1 );`

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2018-09-14T03:09:53.990

我还想补充一点，如果使用 three.js 编辑器，不要忘记在 index.html 中也将背景颜色设置为清除。

```
background-color:#00000000 
```

# arrays - 键中有空格的关联数组

> ID：16177058
> 
> 赞同：5
> 
> 时间：2013-04-23T18:53:44.323
> 
> 标签：arrays, bash

我正在尝试通过以下方式在 Bash 中创建关联数组：

```
#!/bin/bash
hash["name"]='Ashwin'
echo ${hash["name"]} 
```

这将在执行时打印所需的输出*Ashwin 。*

但是当钥匙里面有空格的时候，

```
#!/bin/bash
hash["first name"]='Ashwin'
echo ${hash["first name"]} 
```

我收到以下错误

```
test2.sh: line 2: first name: syntax error in expression (error token is "name") 
```

键中不允许有空格吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-23T19:00:08.433

如果您`declare -A hash`在赋值之前首先使用，那么脚本会按预期运行。

它使用 Bash 4.2.25 进行了测试。

# c# - 捕获用户登录/注销、锁定/解锁活动的建议

> ID：16177061
> 
> 赞同：0
> 
> 时间：2013-04-23T18:53:54.107
> 
> 标签：c#, windows-services

我的要求是在 Win xp 和 hp 瘦客户端（XP 嵌入式）机器上捕获用户登录/注销、锁定/解锁活动的时间戳。目前，我正在使用满足我要求的 Windows 服务执行此操作，但由于某些原因服务停止（无法找到原因）并且我们丢失了数据。我尝试的第二种方法是阅读事件日志安全选项卡，在该选项卡中捕获了高于活动的用户。不幸的是，Win XP 没有捕获锁定事件，并且当我重新启动瘦客户端机器时，日志也会被清除。所以这种方法也不适合我。请向我建议实现上述要求的方法/解决方案或任何适用于上述目的的工具。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T19:09:45.607

我假设因为您在谈论锁定/解锁您的机器在域上？域控制器具有用于锁定的事件日志条目。请注意，由于事件已“升级”，2003 服务器和 2008 服务器上有不同的代码。

远程处理事件日志非常困难，因此在我看来，域控制器上的服务以及记录到中央 Web 服务（或数据库）的每台机器上的服务是最可靠的方法。

编辑：您也可能在域控制器上捕获登录/注销事件，请参阅此链接：[http ://technet.microsoft.com/en-us/library/cc787567(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/cc787567%28v=ws.10%29.aspx)

或者，您可以从中央源轮询这些机器的事件日志。这不适用于域控制器，因为良好的做法要求它们仅将事件日志保留很短的时间，但它可能适用于您的瘦客户端。这与我的首选解决方案相去甚远，但是因为轮询需要很长时间，并且您会遇到大量（瘦）客户端的扩展问题。

# integer - MS SQL 计算查询 - 不正确的结果和/或数据类型（仅显示整数部分）

> ID：16177062
> 
> 赞同：1
> 
> 时间：2013-04-23T18:54:00.890
> 
> 标签：integer, double, decimal

我附上了我遇到的问题的图片。基本上，对于第一个 GPA，我应该得到像 3.66667 这样的答案，但它显示的是 3。其他 2 个 GPA 也是如此——它们有小数部分，但没有显示。你认为是什么问题？我已经尝试过谷歌搜索，更改数据类型等... PS 以获得 GPA：通过 TCH（总学分）除 TGP（总学分），但它只显示整数部分...

这是截图：http: [//i.imgur.com/7kMF2Cj.jpg](http://i.imgur.com/7kMF2Cj.jpg)

# javascript - 在 iOS 应用程序中设置 cookie 并从 Safari 读取该 cookie

> ID：16177066
> 
> 赞同：5
> 
> 时间：2013-04-23T18:54:12.827
> 
> 标签：javascript, objective-c, safari, nshttpcookie

我正在尝试执行以下操作：在我的 appDelegate 中，我正在设置一个 cookie。之后，我尝试使用来自 webapp 的 JavaScript 读取该 cookie。这可能吗？因为我做不出来...

这是我在 iOS 应用程序中的代码：

```
NSMutableDictionary *cookieProperties = [NSMutableDictionary dictionary];
[cookieProperties setObject:@"test" forKey:NSHTTPCookieName];
[cookieProperties setObject:@"yes" forKey:NSHTTPCookieValue];
[cookieProperties setObject:self.siteURL forKey:NSHTTPCookieDomain];
[cookieProperties setObject:self.siteURL forKey:NSHTTPCookieOriginURL];
[cookieProperties setObject:@"/" forKey:NSHTTPCookiePath];
[cookieProperties setObject:@"0" forKey:NSHTTPCookieVersion];

[cookieProperties setObject:[[NSDate date] dateByAddingTimeInterval:9629743] forKey:NSHTTPCookieExpires];

NSHTTPCookie *cookie = [NSHTTPCookie cookieWithProperties:cookieProperties];
[[NSHTTPCookieStorage sharedHTTPCookieStorage] setCookie:cookie]; 
```

在我的 JavaScript 中，我使用 jquery.cookie 插件来编写和读取 cookie。但什么都没有......这是我的代码：

```
cookieValue = $.cookie("test");
alert(cookieValue); 
```

警报在正文“[object Object]”中，应该有我在我的应用程序中设置的“yes”值。

大家觉得这可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T19:07:14.230

不可能：第三方应用程序无法访问全局 Safari cookie 缓存，因为这将是一个重大的安全漏洞。如果您需要向 Safari 发送 cookie 信息，最好将 cookie 详细信息作为请求参数的 URL 启动到 Safari，然后让该 URL 末尾的脚本创建 cookie 并将它们发回。

编辑：如果你想变得漂亮，你可以为你的 iOS 应用程序注册一个 URL 处理程序，然后启动你的网络应用程序的 URL。让您的 Web 应用设置 cookie，然后重定向回应用 URL。

# git - Git克隆问题

> ID：16177070
> 
> 赞同：1
> 
> 时间：2013-04-23T18:54:27.507
> 
> 标签：git, github, github-for-windows

我正在尝试使用以下命令克隆我在私有存储库中的一些代码：

```
git clone https://github.com/username/repo_name.git 
```

当我这样做时，我收到以下格式的错误：

> 致命：[https](https://github.com/username/repo_name.git/info/refs?service=git-upload-pack) ://github.com/username/repo_name.git/info/refs?service=git-upload-pack not found：你在服务器上运行了 update-server-info 吗？

我该如何解决这个问题？尝试克隆存储库时是否使用了错误的 URL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T06:44:25.443

如[本期](https://github.com/boxen/boxen/issues/49)所示，这通常与不正确的地址相关联：

*   不正确的用户名（或正确的用户名，但大小写错误）
*   不正确的 reponame（或更正一个，但大小写错误）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T18:58:43.503

是的，我认为你应该使用`git clone git@github.com:username/repo_name.git`.

顺便说一句，我可以看到你添加了`github-for-windows`标签 - 克隆 repo 的最简单方法是打开 GitHub for Windows 应用程序并从那里克隆它，因为这样你也可以克隆 repo 中的任何子模块，而无需向`git clone`命令添加任何参数.

# ios - 从json获取数据并存储在plist中时获取plist的空值

> ID：16177071
> 
> 赞同：-1
> 
> 时间：2013-04-23T18:54:29.390
> 
> 标签：ios, objective-c, json, plist

我有一个应用程序可以自行从 url 获取 json 并将值存储在 .plist 文件中。

这是我的代码，但不工作，我的 plist 文件为空（请指导我）

这是我的 json ：

```
[
    {
        "id": "1",
        "title": "Apple Releases iPad 3",
        "article": "This week Apple Inc. released the third gen iPad. It's available now for $599\. It comes in 2 models: 8GB and 16GB.",
        "timestamp": "1343782587",
        "date_string": "Tue, Jul 31st, 2012 @ 7:56"
    },
    {
        "id": "2",
        "title": "Microsoft Releases Windows 8",
        "article": "Last week Microsoft released Windows 8 for consumer purchase. It's available now starting at $99 for the Home version. It comes with Microsoft Office '12 already installed.",
        "timestamp": "1343782649",
        "date_string": "Tue, Jul 31st, 2012 @ 7:57"
    },
    {
        "id": "3",
        "title": "Blizzard Announces Diablo IV",
        "article": "This week, long-time Diablo fans are euphoric with excitement at the announcement of Diablo IV, which will be released this fall, for $20! This original $20 purchase will also include all future expansion packs.",
        "timestamp": "1343782742",
        "date_string": "Tue, Jul 31st, 2012 @ 7:59"
    }
]

-(NSString*)docsDir {
    return [NSSearchPathForDirectoriesInDomains(NSDocumentationDirectory,
     NSUserDomainMask, YES)objectAtIndex:0]; 
}

- (void)viewDidLoad {
     [super viewDidLoad];
     [UIApplication sharedApplication].networkActivityIndicatorVisible = YES;
     NSURL *url = [NSURL URLWithString:@"http://192.168.1.109/mamal/json.php"];
     NSURLRequest *request = [NSURLRequest requestWithURL:url];
     NSURLConnection *con = [[NSURLConnection alloc] initWithRequest:request delegate:self];
     [con start];  
}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {
     data = [[NSMutableData alloc]init]; 
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)theData {
     [data appendData:theData]; 
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection {
     [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;
      name = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:nil];
      for (int i =0; i<[name count]; i++) {
      NSIndexPath *indexPath = [self.table indexPathForSelectedRow];
      n = [[name objectAtIndex:(indexPath.row)+i]objectForKey:@"title"];
      if(!add){
            add = [NSMutableArray array];
       }
       [add addObject:n];
         }
       NSLog(@"add : %@",add);
       listPath = [[self docsDir]stringByAppendingFormat:@"janatan.plist"];    
       array = [NSMutableArray arrayWithContentsOfFile:listPath];
       [array addObjectsFromArray:add];
       [array writeToFile:listPath atomically:YES];
       NSLog(@"array : %@",array);         //array is null :(
       [table reloadData]; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T19:00:55.217

如果无法看到您的 JSON，我的猜测是您有一些不符合指定类型的对象或数据结构类型。

*   顶级对象是 NSArray 或 NSDictionary。

*   所有对象都是 NSString、NSNumber、NSArray、NSDictionary 或 NSNull 的实例。

*   所有字典键都是 NSString 的实例。

*   数字不是 NaN 或无穷大。

如果您的 JSON 不符合这些准则，则在您尝试将其转换为 pList 时它将失败。

首先进行错误检查尝试

```
 isValidJSONObject: 
```

在你的“数据”对象上，看看你得到了什么。

接下来你做了太多的工作，NSJSONSerialization 应该返回一个你可以直接写入 plist 的基础对象。

例如，如果你得到的是一个 NSDictionary 对象，你可以使用

```
writeToFile:atomically: 
```

我认为您可以尝试，但在您这样做之前您会稍微更改数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T20:12:36.470

我认为错误是由于创建 listPath 的方式造成的，您应该使用`stringByAppendingPathComponent`: 而不是`stringByAppendingFormat`: 。

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection 
{

   [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;
    name = [NSJSONSerialization JSONObjectWithData:data 
                                           options:NSJSONReadingAllowFragments 
                                             error:nil];
    if(!add){
         NSMutableArray *add = [NSMutableArray array];
    }

    for (int i =0; i<[name count]; i++) {
         NSIndexPath *indexPath = [self.table indexPathForSelectedRow];
         n = name[indexPath.row+i][@"title"];
         [add addObject:n];
    }

    NSLog(@"add : %@",add);

    listPath = [[self docsDir]stringByAppendingPathComponent:@"janatan.plist"];

    NSMutableArray *savedArray = [NSMutableArray arrayWithContentsOfFile:listPath];
    if (!savedArray) {
        savedArray = [NSMutableArray array];
    }
    [savedArray addObjectsFromArray:add];

    [savedArray writeToFile:listPath atomically:YES];

    NSLog(@"array : %@",savedArray); 
    [self.table reloadData]; 

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T19:07:34.353

首先，您需要对不起作用的内容进行更多描述。

其次，分解问题，使用调试器或 NSLog 检查所有中间产品。

记录你在 didReceiveData 中得到的数据

你进入connectionDidFinishLoading

当你进入connectionDidFinishLoading时你有什么数据

什么是name.count？

您从磁盘加载的阵列是否有效？您必须先加载一个空的 plist，然后才能开始附加它。（这对我来说是唯一看起来像错误的事情）。

一般要点：你可以改进你的命名，添加什么？？？我也会添加更多代码文档，这看起来大多是有效的代码，但逻辑相当混乱。

希望这可以帮助戈登

# c# - 使用 C# 创建和保存 Visio 2013 绘图（Vsdx 文件）

> ID：16177075
> 
> 赞同：0
> 
> 时间：2013-04-23T18:54:33.863
> 
> 标签：c#, visio

我正在编写一个生成 vsdx 文件的程序，目前使用 Microsoft.Interop.visio 参考。我的开发计算机上有 visio，但最终用户可能已安装也可能未安装。如果最终用户计算机上未安装 visio，此工具是否会失败，或者此互操作服务是否与实际应用程序分开？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-19T09:19:20.457

我相信您必须需要在客户端计算机上安装 Visio。但是，如果您是从代码创建 visio 并希望将其保存在客户端本地计算机上，那么

```
 FileInfo file = "";// Your File 
        Response.Clear();
        Response.ContentType = "application/vnd.ms-visio.drawing.main+xml";
        Response.AddHeader("Content-Disposition", "inline; filename= RateTemplate.vsdx");
        Response.WriteFile(file.FullName);
        Response.End(); 
```

这允许您在客户端机器上打开/保存文件，如果 m/c 有 visio 2013，那么您甚至可以打开 .vsdx 文件。

# wordpress-theming - 使用 UL、LI 渲染的居中菜单

> ID：16177079
> 
> 赞同：0
> 
> 时间：2013-04-23T18:54:45.467
> 
> 标签：wordpress-theming

给定一个由带有 HTML 标签 UL 和 LI 的 Wordpress 主题“二十一”创建的菜单，我们如何才能使 LI 项目居中。当显示变窄并且菜单占用两行时，客户希望将单个项目居中。

![在此处输入图像描述](https://i.stack.imgur.com/edx1E.png)

单行菜单

![在此处输入图像描述](https://i.stack.imgur.com/qHch9.png)

分割线菜单，尚未居中

![在此处输入图像描述](https://i.stack.imgur.com/VN05l.png)

CSS 为`#access UL`

```
#access ul {
    font-size: 13px;
    list-style: none outside none;
    margin: 0px 0px 0px -0.8125em;
    padding-left: 0px;
} 
```

LI 的 CSS

```
#access li {
    float: left;
    position: relative;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T19:01:30.237

1.  添加`text-align: center;`并`width: 100%;`输入`#access ul`

2.  切换`float: left;`到. `display: inline;`_ `#access li`您可能需要稳定填充、宽度或高度以获得更好的查看效果。

# php - memcached 验证远程连接

> ID：16177084
> 
> 赞同：5
> 
> 时间：2013-04-23T18:54:56.667
> 
> 标签：php, memcached

假设服务器 1 位于 5:5:5:5:11211，服务器 2 位于 25.25.25.25:11211。您将它们添加到服务器池中，一切都很好。直到有人连接到该端口并开始弄乱您的数据。

所以我们把端口改成38295。比较难找，但也不是不可能，所以还是不够用。

我的问题是：

1）你可以为memcached服务器设置身份验证（用户名/密码）来验证连接吗？您能否将特定主机/IP 列入白名单（可能是个坏主意）？

2) 你能并且应该保护通过互联网传输的数据吗？数据是原始格式，您的 ISP 和嗅探线路的任何人都可以看到正在发送的所有数据。但是加密数据可能会影响性能？

有哪些解决方案可用于设置 memcached 服务器集群以及如何保护和验证它们？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T23:01:24.183

满足我需求的解决方案是按照 sumoanand 的建议设置 iptables 条目。这就是我的工作。

使用类似这样的方式启动 memcached：

`/usr/bin/memcached -p 11211 -l 0.0.0.0 -d -u www-data -m 12288`

请记住，该`-l`参数设置为`0.0.0.0`，这实际上允许来自任何来源的连接。如果你保持标准，`127.0.0.1`这是行不通的。

接下来，我们进入 iptables。如果您的 memcached 服务器位于 LAN 上，则以下命令将仅允许来自特定本地服务器的连接。

例如，为了添加`192.168.1.100`到允许列表，我们发出命令：

```
iptables -A INPUT -p tcp -s 192.168.1.100 --dport 11211 -j ACCEPT 
```

例如，如果要将远程服务器列入白名单，`25.62.25.62`则发出另一个命令：

```
iptables -A INPUT -p tcp -s 25.62.25.62 --dport 11211 -j ACCEPT 
```

您可以根据需要将任意数量的 IP 列入白名单，但请务必发出最终命令来阻止该端口上的所有其他连接。

```
iptables -A INPUT -p tcp --dport 11211 -j REJECT 
```

IPtables 是按照它们输入的顺序读取的，因此如果您在发出任何 ACCEPT 规则之前发出 REJECT ALL 语句，所有连接都将被拒绝（即使是列入白名单的连接）。

然而，以这种方式发送的数据仍然没有以任何方式加密。任何拦截您的 memcached 服务器和远程服务器（数据包嗅探器、ISP）的东西都将能够看到完全原始的数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T19:19:12.597

我认为我们不需要像 Mike 提到的那样在这里寻求复杂的解决方案。

假设您的 Web 服务器（web1、web2、web3）需要通过位于同一内部网络中的 11211 端口从 memcache 服务器（mem1 和 mem2）获取数据，并且每个 Web 服务器的内部 IP 地址以 172.221 开头。*.* .

在这种情况下，您可以在 mem1 和 mem2 服务器的 ip-table 中设置一个限制，只接受来自 172.221 的请求。*.* 对于 11211 端口。

希望这会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T19:01:20.507

Memcached 现在支持 SASL。这将允许您对 memchaced 服务执行强身份验证。这是一篇关于如何使用 memcached 设置 SASL 的好文章。

[http://blog.couchbase.com/sasl-memcached-now-available](http://blog.couchbase.com/sasl-memcached-now-available)

# spring - Spring Web App中访问静态资源前的授权

> ID：16177086
> 
> 赞同：1
> 
> 时间：2013-04-23T18:54:59.160
> 
> 标签：spring, spring-mvc, spring-security

我已经像这样在spring的配置xml中映射了我的应用程序中的静态资源

```
<mvc:resources mapping="/resources/**" location="/WEB-INF/resources/" /> 
```

现在我希望只有具有身份验证和授权的用户才能访问该文件夹中的图像，就身份验证而言，我已经通过像这样的 Spring Security 实现了这一点

```
<sec:intercept-url pattern="/resources/**" access="isAuthenticated()" /> 
```

但我不希望经过身份验证的用户访问该文件夹中的所有图像，他只能根据某些边界访问存储在该文件夹中的图像子集，所以我希望对于我想要执行的用户对图像的每个请求安全检查他是否被允许访问那个特定的图像怎么做？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T06:51:13.383

最简单的解决方案是将所有不安全的图像移动到一个单独的文件夹中，并使该文件夹不安全：

```
<!-- This line BEFORE resources/** pattern -->
<sec:intercept-url pattern="/resources/nonsecuredimages/**" access="permitAll"/>
<sec:intercept-url pattern="/resources/**" access="isAuthenticated()" /> 
```

# html - 为什么 Internet Explorer 9/10 在使用 colspan 时会忽略列宽？

> ID：16177089
> 
> 赞同：0
> 
> 时间：2013-04-23T18:55:04.677
> 
> 标签：html, internet-explorer, internet-explorer-9

我想下面的代码可以解释这个问题。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Test</title>
<style type="text/css">
body { padding-bottom: 24px }
table { table-layout: fixed }
</style>
</head>
<body>

<table class="question" id="TR09_tab" border="0" cellpadding="0" cellspacing="0" width="100%">
<colgroup>
  <col width="22">
  <col width="110">
  <col>
</colgroup>
<tr>
  <td><input name="one" id="one" value="yes" type="checkbox"></td>
  <td colspan="2"><label for="one">Option 1</label></td>
</tr>
<tr>
  <td><input name="two" id="two" value="yes" type="checkbox"></td>
  <td colspan="2"><label for="two">Option 2</label></td>
</tr>
<tr style="display: none">
  <td colspan="2"><label for="text">Text:</label></td>
  <td><input name="text" id="text" type="text" value="" style="width: 98%"></td>
</tr>
</table>

</body>
</html> 
```

问题：第一列的渲染比 22px 大得多。

注意：我不能为表格使用固定宽度，因为表格下面有一个可变宽度布局。

第三行设置为 display:none，因为一旦选择了其中一个选项，它就会显示（通过 JavaScript）。一旦显示此行，所有 col-width 都是完全正确的。

在其他上下文中使用 colspan 时，我已经遇到了 col-width-definitions 和 IE 的问题——但这是第一次忽略非跨区单元格的宽度。

*   为什么 IE 9/10 在这种情况下会简单地忽略我的 colgroup 定义？

*   *如果*我无法更改表结构（即，我需要这三个列和 colspan），有什么建议可以解决这个问题？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:58:36.483

当您`display: none`在最后一行时，IE 似乎与表结构混淆了。如果删除该设置，宽度会发生变化。如果没有该行，则表格违反了 HTML 表格模型（如验证器报告的那样，如果您实际上从标记中删除了该行并告诉验证器进行 HTML5 验证，其中检测到表格模型错误）。

如果替换`display: none`为，情况会发生变化`visibility: collapse`，尽管某些旧版本的 IE 不支持该设置。

首先，我认为仅计算可见行时表结构应该是正确的。

# gcc - 使用 gcc 在 32 位机器上处理大文件

> ID：16177097
> 
> 赞同：1
> 
> 时间：2013-04-23T18:55:44.090
> 
> 标签：gcc, 32-bit

我如何用 c 处理大文件（>10 GB）（至少阅读它们）？我没有 64 位机器，所以编译器选项
`-D_FILE_OFFSET_BITS=64`不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:43:45.707

这看起来可能与[Reading a large file using C (greater than 4GB) using read function 重复，导致出现问题](https://stackoverflow.com/questions/11790822/reading-a-large-file-using-c-greater-than-4gb-using-read-function-causing-pro)

既然你提到了 GCC，我假设 Linux、Solaris 或类似的东西。如果您在 Windows 上使用 GCC，我不知道以下内容是否成立。

如果您只是使用和使用`open`的文件，它应该可以工作，前提是您不尝试将整个文件保存在内存中并且您的大小小于 32 位。对. 如果您需要查找、使用和编译（请注意，这并不完全是标准的，因此如果您不在 Linux 上，手册页有望为您指出首选的解决方案）。`O_LARGEFILE``read``read``write``lseek64``#define _LARGEFILE64_SOURCE``lseek64``lseek`

# python - 如何在 os.system 中使用 2 个引号？PYTHON

> ID：16177104
> 
> 赞同：4
> 
> 时间：2013-04-23T18:56:02.647
> 
> 标签：python

当我尝试在 os.system 中使用 2 个引号时，我遇到了一点问题。我将使用 python 启动一个程序，该目录有多个空格，并启动你需要的 CMD 中有多个空格的东西显然要在它周围加上双引号。

事情来了……我的代码如下所示：

```
import os
os.system("C:/t est/hello") 
```

并且由于我使用了 os.system，它显然只会将 C:/t est/hello 发送到 CMD ..

现在我需要用引号将“C：/t est/hello”发送到cmd，但我需要python来理解我也需要2个引号。有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-23T18:59:24.730

如果要在命令中添加引号，只需这样做。可能最简单的方法是对字符串使用单引号：

```
os.system('"C:/t est/hello"') 
```

如果要在由双引号分隔的字符串中写入双引号，则需要对其进行转义。这将是这样的：

```
os.system("\"C:/t est/hello\"") 
```

但是，它更容易使用[`subprocess`](http://docs.python.org/2/library/subprocess.html)，并让它为您处理报价。例如：

```
subprocess.check_call(['ls', 'some directory with spaces in']) 
```

甚至推荐使用的[文档](http://docs.python.org/2/library/os.html#os.system)：`os.system()``subprocess`

> subprocess 模块提供了更强大的工具来生成新进程并检索它们的结果；使用该模块优于使用此功能。请参阅子流程文档中的用子流程模块替换旧功能部分以获取一些有用的秘诀。

# c++ - 在简单的字符串代码中不匹配 'operator=='

> ID：16177108
> 
> 赞同：0
> 
> 时间：2013-04-23T18:56:43.547
> 
> 标签：c++, string, operator-keyword

编写一个简单的代码并遇到了一个我不知道如何处理的问题。我尝试通过搜索对其进行调查，但没有发现任何帮助，而且每个人的答案都超出了我的想象。请有人像对小孩一样解释这个，哈哈。谢谢。

```
#include <iostream>
#include <string>

using namespace std;

int main()
{
    string invCode = "";
    string lastTwoChars = "";

    cout << "Use this program to determine color of furniture.";
    cout << "Enter five-character inventory code: ";
    cin >> invCode;

    if (invCode.length() == 5)
    {
        lastTwoChars = invCode.substr(3,2);
         if (lastTwoChars == 41)
         { 
              cout << "Red";
              }
         if (lastTwoChars == 25)
         { 
              cout << "Black";
              }
         if (lastTwoChars == 30)
         { 
              cout << "Green";
              }
    }
    else
         cout << "Invalid inventory code." << endl;

    system("pause"); 
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T18:59:33.420

lastTwoChars 是一个字符串。您必须将其与字符串进行比较，或者至少与 a `const char *`or进行比较`const char[]`。

该表达式`lastTwoChars == 41`将 lastTwoChars 与 41--an 进行比较`int`。这不是字符串的定义行为。

相反，将 41 放在引号中以使其成为`const char[]`（特别是`const char[3]`）：

```
 if (lastTwoChars == "41") 
```

看起来您在代码中多次执行此操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T18:59:10.560

据推测，错误是抱怨您无法将字符串与数字进行比较。它们是两种不同的类型，与某些语言不同，它们之间没有神奇的转换（或比较）。

您想与另一个字符串进行比较：

```
if (lastTwoChars == "25")
//                  ^  ^ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T19:12:34.560

**`lastTwoChars`**是一个**字符串**，你在这些语句中将它与一个**int进行比较：**

```
 if (lastTwoChars == 41)
         { 
              cout << "Red";
         }
         if (lastTwoChars == 25)
         { 
              cout << "Black";
         }
         if (lastTwoChars == 30)
         { 
              cout << "Green";
         } 
```

这违反了**string**的定义行为。您必须将其与**字符串**或**char***进行比较。

```
 if (lastTwoChars == "41")
         { 
         }
              cout << "Red";
         .
         .
         . 
```

在这种情况下， Now`"41"`是一个**const char***，它可以与一个**字符串**或一个**char***进行比较。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T00:06:01.540

```
 #include <iostream>
 #include <string>

 using namespace std;

 int main()
 {
     string invCode = "";
     string lastTwoChars = "";

     cout << "Use this program to determine color of furniture.";
     cout << "Enter five-character inventory code: ";
     cin >> invCode;

     if (invCode.length() == 5)
     {
         lastTwoChars = invCode.substr(3,2);
          if (lastTwoChars == "fourty five") // you declared lastTwoChars as string therefore you have to compare letters not integers which are numbers.
          { 
               cout << "Red";
          }
     if (lastTwoChars == "twenty five") //same
     { 
          cout << "Black";
          }
     if (lastTwoChars == "thirty") // same
     { 
          cout << "Green";
          }
}
else
     cout << "Invalid inventory code." << endl;

cin.get(); // better than system("pause");
return 0;
} 
```

# c# - Word 图表数据在工作簿中更新，但 Word 不刷新图表

> ID：16177116
> 
> 赞同：0
> 
> 时间：2013-04-23T18:57:22.997
> 
> 标签：c#, excel, ms-word

我有一个包含一系列图表的 Word 文档 (.docx)。我的代码成功更新了饼图后面的值，Word 会适当地显示结果（刷新图表的前端，无论您想如何称呼它）。

遗憾的是，对于集群条形图，情况并非如此。工作簿中的值会更新，但前端不会刷新以显示新值。

一旦我右键单击图表并选择编辑数据（我什至不需要编辑任何内容，只需在工作簿窗口打开时关闭它）然后刷新图表上显示的值。

有没有什么办法可以强制刷新前端而不经过它？关闭文件并重新打开没有效果。

我有的：

```
wordcon.Application wordapp = new wordcon.Application();
wordcon.Document docx = new wordcon.Document();

wordapp.ActiveDocument.InlineShapes[2].Chart.ChartData.Activate();

excelcon.Workbook excelwb = wordapp.ActiveDocument.InlineShapes[2].Chart.ChartData.Workbook;
excelcon.Worksheet excelws = excelwb.Worksheets[1];

excelws.Cells[1, 2] = reference.top_issues_1_name;

excelws.Cells[6, 1] = "a";
excelws.Cells[6, 2] = reference.top_issues_1;

excelws.Cells[5, 1] = "b";
excelws.Cells[5, 2] = reference.top_issues_2;

excelws.Cells[4, 1] = "c";
excelws.Cells[4, 2] = reference.top_issues_3;

excelws.Cells[3, 1] = "d";
excelws.Cells[3, 2] = reference.top_issues_4;

excelws.Cells[2, 1] = "e";
excelws.Cells[2, 2] = reference.top_issues_5;

excelwb.Close();

Marshal.ReleaseComObject(excelws);
Marshal.ReleaseComObject(excelwb);

docx.SaveAs2(reference.chart_file_forked_path + reference.chart_file_forked_file_name);

wordapp.Quit();

Marshal.ReleaseComObject(docx);
Marshal.ReleaseComObject(wordapp); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T02:23:24.393

我在 Powerpoint 中遇到了这个问题。我怀疑解决方案将是相似的。

**未经测试**

如果这在 Word 中不起作用，请告诉我，我会修改。

```
Dim cObj as Shape  'Shape container for the ChartObject

'Set cObj = '

    '## Expose the data sheet'
    cObj.Chart.chartData.Activate  

    '## Minimize it'
    cObj.Chart.chartData.Workbook.Application.WindowState = -4140  

'## code to manipulate the cObj, if any.'

'## when done, close the ChartData'

    '## When you're done, close the chartData'
    cObj.Chart.chartData.Workbook.Close 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-06T13:53:45.890

这是我正在运行以“触摸”单词 doc 并强制刷新嵌入式 excel 图表的代码（我正在使用 OpenXml 库）：

```
 //open word doc   
     using (var wDoc = WordprocessingDocument.Open(someDocFileInfo.FullName, true))          
    {
       //open embedded excel object with chart
       var stream = wDoc.MainDocumentPart.EmbeddedPackageParts.First().GetStream();

       using (var ssDoc = SpreadsheetDocument.Open(stream, true))
       {
           var wbPart = ssDoc.WorkbookPart;
           var sheet = wbPart.Workbook.Descendants<Sheet>().FirstOrDefault(i => i.Name == "Sheet1");
           if (sheet != null)
           {
               var ws = (wbPart.GetPartById(sheet.Id) as WorksheetPart).Worksheet;
              //change the data in the excel sheet
              var cell = InsertCellInWorksheet("A", 2, ws);
              cell.CellValue = new CellValue("42");
              cell.DataType = new DocumentFormat.OpenXml.EnumValue<CellValues>(CellValues.Number);
               ws.Save();
           }   
       }

       //now 'touch' the word doc to refresh the chart
       var settingPart = wDoc.MainDocumentPart.GetPartsOfType<DocumentSettingsPart>().First();
       var updateFields = new UpdateFieldsOnOpen();
       updateFields.Val = new OnOffValue(true);
       settingPart.Settings.PrependChild<UpdateFieldsOnOpen>(updateFields);
       settingPart.Settings.Save();
       }
    } 
```

# visual-studio-2012 - VisualStudio 是否提供查看纹理的方法？

> ID：16177119
> 
> 赞同：2
> 
> 时间：2013-04-23T18:57:33.237
> 
> 标签：visual-studio-2012, graphics, directx, textures

我正在以编程方式创建 DirectX 纹理并将其绑定到着色器。我想验证纹理是否按预期显示。Visual Studio 2012 或其他工具是否提供查看纹理的方法？我可以渲染这个东西，但这需要一些工作，如果有一个现有的解决方案，我更愿意使用它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T19:42:23.817

**在 Visual Studio 2012**中使用图形调试器时（主菜单 -> 调试 -> 图形 -> 开始诊断 (Alt+F5) ），捕获帧（打印屏幕），然后在“对象表”中选择您的资源（SRV、UAV 或缓冲区），在打开的选项卡上单击链接。我唯一怀疑的是哪些版本的图形调试器可用。

**[NVIDIA Nsight](http://www.nvidia.com/object/nsight.html)**也有类似的功能，但还不支持 VS 2012。如果您有 NVIDIA 硬件，您可以在 VS 2010 中使用 v2.0 或 v3.0 RC。

**[AMD](http://developer.amd.com/tools-and-sdks/graphics-development/gpu-perfstudio-2/)**也有自己的工具集，但我从未使用过它。如果板载 AMD Radeon，您可以尝试。

而且，正如 Robert J. 所说，老旧的**Microsoft PIX**也在值班。如果你不想安装旧的 SDK，你可以打开它的分发和解压`Utilities`文件夹。可执行文件名为`PIXWin.exe`.

# php - 来自 php 邮件表单的 HTTP/1.1 500 内部服务器错误

> ID：16177122
> 
> 赞同：0
> 
> 时间：2013-04-23T18:57:45.400
> 
> 标签：php, error-handling, smtp, mailer

我已经为此工作了一段时间，搜索论坛，我似乎无法找到我的代码的问题。

我有一个请求信息表单，其中包含我试图通过 PHP Mailer 处理的几个字段。当我点击提交时，它会将我引导到我的 process.php 页面，该页面在浏览器中显示为空白。我收到此错误 HTTP/1.1 500 Internal Server Error 并且无权访问我的服务器日志以在那里进行故障排除。如果有人可以提供帮助，我将不胜感激。谢谢！

```
<?php

require_once("class.phpmailer.php");
$mail = new PHPMailer();
$mail->IsSMTP();
$mail->From = "webmail@averybiomedical.com"; //Sender address 
$mail->FromName = "Information Request "; //The name that you'll see as Sender 
$mail->Host = "remote.averybiomedical.com"; //Your SMTP mail server 
$mail->Port = '587'; 
$mail->Mailer = "smtp"; //Protocol to use 
$mail->AddAddress("info@averybiomedical.com"); //The address you are sending mail to 
$mail->Subject = "Mail Subject"; //Subject of the mail 
$mail->Body = $_POST["title"] . "   " .
$_POST["firstName"] .  "   " .
$_POST["lastName"] . "   " .
$_POST["degree"] . "\n" .
$_POST["address1"] . "\n" .
$_POST["address2"] .  "\n" .
$_POST["address3"] . "   " .
$_POST["city"] . "   " .
$_POST["state"] . "   " .
$_POST["zipCode"] . "   " .
$_POST["country"] . "\n" .
$_POST["email"] . "   " .
$_POST["email2"] . "\n" .
$_POST["phone1"] . "   " .
$_POST["phone1_location"] . "   " .
$_POST["phone2"] . "   " .
$_POST['phone2_location'] . "   " .
$_POST["phone3"] . "\n" .
$_POST["relation"] . "   " .
$_POST["relation_specif"] . "\n" .
$_POST["physician_specialty"] . "\n" .
$_POST["surgeon_specialty"] . "\n" .
$_POST["prof_specify"] . "\n>" .
$_POST["other_specify"] . "\n" .
$_POST['diagnosis']. "\n" .
$_POST['Insurance']. "\n" .
$_POST["funding"] . "\n" .
$_POST["source"] . "\n" .
$_POST["comments"] ; //Body of the message 
$mail->SMTPAuth = "true"; 
$mail->Username = "myemail@averybiomedical.com"; //valid email id of the domain 
$mail->Password = "mypassword"; //password for abc@xyz 

if(!$mail->Send()) {
echo 'Message was not sent.';
echo 'Mailer error: ' . $mail->ErrorInfo;
} else { 
echo 'Message has been sent.';
}
?> 
```

# sql - 向 SQL Server 表添加版本控制

> ID：16177127
> 
> 赞同：0
> 
> 时间：2013-04-23T18:58:09.990
> 
> 标签：sql, sql-server, version

我有一个表，其中每条记录都有一个`Value`，一个`VersionEffective`和一个`VersionExpiration`列。目前，该`VersionEffective`列已正确填写，但该`VersionExpiration`列默认为`'9999-12-31'`. 对于具有相同值的记录，只有最新的记录`VersionEffective`不应该过期。其余的应该是。具体来说，当插入新记录时，如果之前有一条具有相同值的活动记录，则该记录将过期，其`VersionExpiration`等效于新记录的`VersionEffective`. `VersionEffective`我有一个存储过程可以在插入/时正确设置`VersionExpiration`它们，但我需要返回并追溯更新`VersionExpiration`旧记录的字段。

我目前的想法类似于以下内容：

```
 UPDATE fubarTable as t
     SET t.VersionExpiration = ( 
               SELECT TOP 1 VersionEffective
                 FROM fubarTable as f
                WHERE t.Value = f.Value
             ORDER BY VersionEffective DESC
         )
       ; 
```

但是，这行不通。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T19:25:02.220

我认为这应该为您当前的设置做到这一点：

```
UPDATE t
 SET t.VersionExpiration = ( 
       SELECT TOP 1 VersionEffective
         FROM fubarTable as f
        WHERE t.Value = f.Value and f.VersionEffective > t.VersionEffective
     ORDER BY VersionEffective
 )

 FROM fubarTable t
 where t.VersionEffective <> ( Select MAX(VersionEffective) from fubarTable where Value = t.Value) 
```

# c - C中块作用域和函数作用域的区别

> ID：16177128
> 
> 赞同：2
> 
> 时间：2013-04-23T18:58:16.900
> 
> 标签：c, namespaces, stack, scope

C99 中的块和函数作用域在进入和离开函数/块时在堆栈上发生的事情有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T19:03:01.280

当控制进入函数或块作用域时，实现唯一需要做的事情就是*表现得好像*已经直接在该作用域中创建了具有“自动存储持续时间”的所有数据对象的新实例。*表现得好像*意味着它可以做一些不同的事情，只要正在编译的程序不能区分（或者只能通过做一些行为未定义的事情来区分）。例如，如果在函数范围内*声明*了一个变量，但只在一个子块中使用，编译器可以将其有效范围折叠到该子块，并且可能会这样做，因为这使得寄存器分配更容易。

当控制退出函数或块范围时，实现不需要做*任何事情。*直接在该范围内的所有自动存储持续时间对象的生命周期结束，但是没有程序可以在不触发未定义行为的情况下判断这已经发生。

C 实现不需要堆栈，堆栈不是实现上述要求的唯一方法。例如，参见“ [MTA 上的切尼](http://www.pipeline.com/~hbaker1/CheneyMTA.html)”和[c2:SpaghettiStack](http://c2.com/cgi/wiki?SpaghettiStack)。

*确实*有堆栈的C 实现通常会尽量避免在函数中间调整堆栈指针，原因太复杂，无法在此处讨论。这可能意味着具有块范围的值在堆栈上的存活时间比其声明的生命周期长，但访问它仍然是未定义的行为。允许编译器为不再在范围内的值回收存储，但*也*允许为仍在范围内但不再被访问的值（编译器术语中的“死”）回收存储。从历史上看，编译器对寄存器中的值比对堆栈槽中的值更积极，但同样，这在您的实现中不一定*存在*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T19:05:55.277

理论上，编译器*可以*生成代码以在任何包含局部变量的块的入口处分配堆栈帧。在这种情况下，根本不会有太大的区别。

在实践中，大多数编译器通过函数计算任何路径可以使用的局部变量的最大大小，然后在入口处分配该大小的堆栈帧。函数内任何块中的变量只是与堆栈指针不同的偏移量。请注意，在这种情况下，两个（或更多）块可能使用相同的地址。例如，使用这样的源代码：

```
void f(int x) { 
    if (x) {
        long y;
    }
    else { 
        float z;
    }
} 
```

...机会非常好，`y`最终`z`会出现在同一个地址。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T19:03:26.453

像这样：

```
void foo(int n)            // <-- beginning of function scope
{                          // <-- beginning of function body scope
    int x = n;

    for (;;)
    {                      // <-- beginning of block scope
       int q = n;
       x *= q;
    }                      // <-- end of block scope

    foo(x);

    {                      // <-- another block scope
        int w = x;
    }

}                          // <-- end of function body scope
                           //     and of function scope 
```

当范围结束时，什么都不会“发生”，但变量只存在于声明它的范围内（有一些神秘的例外）。重用已结束的先前嵌套范围的变量空间取决于实现。

# php - 网站上线时出现服务器错误

> ID：16177131
> 
> 赞同：1
> 
> 时间：2013-04-23T18:58:26.387
> 
> 标签：php, html

我在网站上做了一些更改。该网站最初是静态的，为了进行一些更改，我将网站的链接更改为 .php。

我进行了更改，它在 localhost 中运行良好。我没有看到任何错误和警告。

但是，当我将它移到实时服务器时，我看到了这个问题。

```
Server error
The website encountered an error while retrieving http://prakashchhetri.com.np/projects/hmaloha/. It may be down for maintenance or configured incorrectly.
Here are some suggestions:
Reload this webpage later.
HTTP Error 500 (Internal Server Error): An unexpected condition was encountered while the server was attempting to fulfill the request. 
```

我之前遇到过类似的问题，但这是由于我的 PHP 脚本中的一些语法错误（在我以前的项目中）。但是在这个项目中，我认为我没有犯任何错误，如果我犯了任何错误，该项目将不会在我的本地主机中运行。

我在两个不同的服务器上检查了网站，但仍然是同样的问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:43:53.277

请务必检查 apache 和 php 错误日志（如果它们是分开的）。你会在那里找到你的答案。

或者，假设 php 是罪魁祸首，您可以暂时在 php.ini 中启用以下设置：

```
display_errors = On
html_errors = On
error_reporting = E_ALL | E_STRICT 
```

只要确保您以后再次禁用这些功能，就不会让用户接触到潜在的敏感信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T19:54:52.070

确保用户 www-data 有权读取 php 脚本

# android - Android：自定义视图不绘图

> ID：16177133
> 
> 赞同：0
> 
> 时间：2013-04-23T18:58:36.920
> 
> 标签：android, view

我的 Android 应用程序的一部分出现问题。我需要在自定义对话框中绘制图表，但即使我遵循互联网上找到的所有解决方案，它也不起作用。我的目标是在用户单击我的主框架上的按钮时显示一个对话框。为此，我想在一个非常简单的对话框中绘制它。我的图表需要是“可滚动的”，因为它可以比对话框大。以下是源代码：

```
public class GraphDialog extends Dialog implements android.view.View.OnClickListener
{
    Canvas canvas;

    public GraphDialog(Context context) 
    {
        super(context);
        System.out.println("Test");
        this.setContentView(R.layout.dialog_graph_layout);
        this.setTitle(R.string.title_dialog_graph);
        ((Button) this.findViewById(R.id.button_ok)).setOnClickListener(this);
    }

    @Override
    public void onClick(View v) 
    {
        Controller.getPollManager().setPoll(null);
        Controller.getPollManager().setTab(null);
        this.cancel();
    }
} 
```

这是我的 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin" >

    <ScrollView
        android:id="@+id/scroll_layout"
        android:layout_width="500px"
        android:layout_height="800px"
        android:layout_weight="1"
        android:drawingCacheQuality="low"
        android:scrollbars="vertical" >

        <be.ac.ucl.lfsab1509.proxipoll.GraphView
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

        </be.ac.ucl.lfsab1509.proxipoll.GraphView>
    </ScrollView>

    <Button
        android:id="@+id/button_ok"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:layout_weight="0"
        android:text="@string/ok" />

</LinearLayout> 
```

这是我的自定义视图：

```
public class GraphView extends View
{
    Paint paint;

    public GraphView(Context context) 
    {
        super(context);
        System.out.println("test GraphView");
        this.setWillNotDraw(false);
        init();
    }

    public GraphView(Context context, AttributeSet attrs)
    {
        super(context, attrs);
        System.out.println("test GraphView");
        this.setWillNotDraw(false);
        init();
    }

    public void init()
    {
        paint = new Paint();

        paint.setColor(Color.BLACK);
    }

    protected void onDraw(Canvas canvas)
    {
        super.onDraw(canvas);
        System.out.println("test onDraw");
        canvas.drawText(Controller.getPollManager().getPoll().name, 50, 50, paint);
        this.draw(canvas);
    }
} 
```

要检查出了什么问题，您可以看到我添加了一些 println()。当我尝试显示对话框时，我得到了除 onDraw() 方法之外的所有行。有人知道该怎么做才能让它工作吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T19:04:21.687

尝试覆盖`onMeasure`：当我上次做任何自定义图表时，我需要做这样的事情。

```
@Override protected void onMeasure( int widthMeasureSpec, int heightMeasureSpec )
    {
    viewWidth = MeasureSpec.getSize( widthMeasureSpec );
    viewHeight = MeasureSpec.getSize( heightMeasureSpec );

    if(box.getWidth() != 0){
        // use the screen width: oldViewWidth -> screenWidth, viewWidth -> maxXRange
        boxWidth = box.getWidth() - box.getPaddingRight() - box.getPaddingLeft() - 10;
        if(screenWidth <= 0) viewWidth = boxWidth;
        else viewWidth = (int)((getMaxXRange()*boxWidth)/screenWidth);
        if(viewWidth < boxWidth) viewWidth = boxWidth;
    }
    setMeasuredDimension( viewWidth, viewHeight );
    } 
```

这基本上检查了窗口的大小并告诉图形层我想要它有多大。

# java - 网络吞吐速度测试

> ID：16177143
> 
> 赞同：0
> 
> 时间：2013-04-23T18:59:27.100
> 
> 标签：java, javascript, performance, flash

我正计划构建一个网络吞吐量速度测试（速度测试），最终将嵌入到一个网站中，供随机人员测试他们的互联网连接速度。该测试不仅会测试他们的速度，还会在服务器上触发一个测试，同时测试服务器的上行速度（作为当时的比较显示）。

我在 Java 中很自在——但小程序在 2013 年似乎不是一个糟糕的选择。

客户指定他们希望在 Java（和小程序）或 Flash（天哪...）中使用它。我没有 Flash 经验，但是一旦你知道编程，你就知道编程......所以它只需要学习 Flash 工具链/流程和语法（希望这不会太疯狂）。

然而，我觉得 Flash 也是一个糟糕的选择（它已经被 Adob​​e 淘汰了，投入如此多的精力来学习一个在不久的将来（相对）会消失的平台似乎是徒劳的）。

作为领域专家，我可以自由地根据我认为不仅可行而且有意义的建议提出建议。这里想到了 Javascript，但我也几乎没有 Javascript 经验（所以在同一条船上必须学习它）。我认为 Javascript 的进入门槛要低得多，因为它都嵌入在 HTML 页面中，而且我对 HTML 非常了解。

无论如何，请为这样的项目（平台方面）提出建议，如果可能的话，请指出我可以查看和学习的其他速度测试的源代码方向或示例（我尝试搜索，但我得到的只是运行速度像 speedtest.com 等测试，而不是来源或理论，或它们背后的设计模式）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:58:15.203

[使用 PHP/Javascript 测试网络速度](https://stackoverflow.com/questions/6850881/test-network-speed-using-php-javascript?rq=1) 他们没有找到答案，但有一些很好的建议。只需阅读它:)

# javascript - 如何为特殊数字生成颜色

> ID：16177144
> 
> 赞同：0
> 
> 时间：2013-04-23T18:59:28.060
> 
> 标签：javascript, colors, generator

如何使用 javascript 为特殊数字生成颜色，例如，对于数字 3，我每次都会得到相同的颜色，对于数字 6，我会得到另一种颜色。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T19:03:41.783

您可以使用数组，将所需的每种颜色存储在其中，然后按索引访问：

```
// declare color array
var colors = [ "#fff", "#f00", "#0f0", "#00f" ]; // put every color you need

// access the colors
var white = colors[0];
var red = colors[1];
// and so on... 
```

**编辑**

JavaScript 中的数组是动态的，因此您可以在运行时添加颜色：

```
colors.push("#000"); // add black color 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T23:09:58.773

## 你想要N种不同的颜色吗？

您可以使用 HSL 颜色，如：http: [//jsfiddle.net/duw6n/5/](http://jsfiddle.net/duw6n/5/)

```
function mod(num, den) {
    return Math.abs(num) % den;
}

function hue(n, k) {
    var tau = 360.0,
        k = k || 1;

    return mod((tau / n) * k, tau);
}

function gen_colours(lst) {
    return lst.map(function (c) {
        var node = $('<div/>').addClass('colour');

        node.html(c)
            .css({'background-color': 'hsl(' + hue(lst.length, c) + ', 100%, 50%)'});

        return node;
    });
} 
```

另请参阅[使用 JavaScript 生成颜色以](https://stackoverflow.com/questions/7594040/generate-colors-with-javascript)处理颜色的 JS 库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T19:03:00.037

也许：

```
var colorNum = 2;
var colors = [
    "blue",
    "red",
    "yellow",
    "black"
]; 
```

`colors[colorNum]`“黄色”在哪里。

您可以仅引用`colors`（数组）并使用整数（从 0 到数组长度的任何整数）对其进行索引以获取关联的颜色。

# perl - sh 脚本到 perl 脚本的转换

> ID：16177148
> 
> 赞同：-7
> 
> 时间：2013-04-23T18:59:41.227
> 
> 标签：perl

下午好，我为以下场景编写了一个 shell 脚本：

找到今天的所有文件并阅读这些文件并获得以 ~ 分隔的第六个字段

```
================
#!/usr/bin/ksh
DATE=`date | awk '{print $2 " " $3}'`
TIMESTAMP=`date +"%m%d%Y"`
for filename in `ls -ltr | grep -i "$DATE"| awk '{print $9}'`
do
  cat $filename | grep -i ^01 | awk -F'~' '{print $6}' >> /tmp/log.$TIMESTAMP
done
================ 
```

有人可以为此提供一个等效的perl。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T19:29:28.580

I think this does the trick, although my Korn shell is very rusty.

It differs by checking the actual modification time against the previous midnight instead of searching for the month and day in an `ls` listing.

```
use strict;
use warnings;

use File::Find 'find';
use Time::Piece 'localtime';

my $timestamp = localtime->strftime('%m%d%Y');
my $date = Time::Piece->strptime($timestamp, '%m%d%Y')->epoch;

open my $log, '>', "/tmp/log.$timestamp" or die "Unable to open log file: $!";

find(sub {
  return unless -f and (stat)[9] >= $date;
  open my $fh, '<', $_ or die qq{Unable to open "$_" for reading: $!};
  while (<$fh>) {
    chomp;
    next unless /^01/;
    print $log (split /~/)[5], "\n";
  }
}, '.'); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-23T20:19:14.713

```
open KSH, "| /usr/bin/ksh";
print KSH <<'EOF';
DATE=`date | awk '{print $2 " " $3}'`
TIMESTAMP=`date +"%m%d%Y"`
for filename in `ls -ltr | grep -i "$DATE"| awk '{print $9}'`
do
  cat $filename | grep -i ^01 | awk -F'~' '{print $6}' >> /tmp/log.$TIMESTAMP
done
EOF
close KSH; 
```

其他任何东西都不完全等同。

# jquery-selectors - Jquery：我可以引用默认 HTML 中不存在的选择器吗？

> ID：16177150
> 
> 赞同：3
> 
> 时间：2013-04-23T18:59:48.937
> 
> 标签：jquery-selectors

抱歉，这可能是一个菜鸟问题。在 SO（或其他地方！）中找不到我的问题的根源或有用的信息。

我正在一个小型联系人列表演示项目中练习我新获得的 Jquery 技能（？），该项目基本上包括一个表格和一个简单的表格来填充它。该项目在 .JS 文件中包含一个 HTML 文件、一个 CSS 样式表以及一些 Javascript 和 Jquery 魔术。

**编辑：**这是[我为此创建的 jsFiddle](http://jsfiddle.net/ibanner/Abxzx/3/)。

默认情况下，当页面首次加载时，表格为空，并显示占位符文本：

```
<table>
    <thead>
    <tr>
        <th id="col_lastName">Last Name</th>
        <th id="col_firstName">First Name</th>
        <th id="col_email">E-Mail</th>
        <th id="col_mobile">Mobile</th>
        <th id="col_actions">Actions</th>
    </tr>
    </thead>
    <tbody>
    <tr id="placeholder">
        <td colspan="5">No contacts yet. Feel free to add your friends!</td>
    </tr>
    </tbody>
</table> 
```

提交表单后，我使用 Jquery 将占位符设置为消失并附加一个新的表格行：

```
$("tbody").append(
    "<tr><td>" +  $("#last_name").val() +
    "</td><td>" + $("#first_name").val() +
    "</td><td><a href='mailto:" + $("#email").val() + "'>" + $("#email").val() + "</a>" +
    "</td><td>" + $("#mobile").val() +
    "</td><td><p class='remove_link'>Remove</p></td></tr>"); 
```

我希望它包含一个删除当前行的链接，因此我编写了一个函数，该函数通过单击`<p class="remove_link">"Remove"</p>`表单提交时附加的字符串的一部分来触发。但是我似乎无法使用 Jquery 使其可点击。我写了这个：

```
$(".remove_link").click(function(){
    // just for chaecking the selector is ok
    console.log("remove clicked"); 
}); 
```

但在实际页面上，“删除”根本不可点击。

这与该类未出现在默认 HTML 中并且仅在附加代码中声明的事实有关吗？

当然，这也可能意味着我的语法错误，但我想不通！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T01:40:16.517

由于您尝试将事件绑定到的元素在执行绑定时尚不存在，因此您需要使用`.on()`

```
$("table").on('click',".remove_link",function () {
      console.log("remove clicked");
}); 
```

请注意，重要的技巧是从现有元素（在本例中为表）开始绑定

我在这里更新了你的小提琴：http: [//jsfiddle.net/Abxzx/4/](http://jsfiddle.net/Abxzx/4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T22:49:47.710

好吧，我想我有一个答案。在处理[W3Schools](http://www.w3schools.com/jquery/event_on.asp)`.on()`上的方法的页面中，有一个参考（下图）表明该方法也可以“适用于尚未创建的元素”。从中我推断出简单是行不通的。我明天再试一次，并报告我的发现。`.click()``.on()`

同时，如果这里有人在 Jquery 方面更有经验，我将不胜感激您的意见/建议。

# django - Django中的站点地图 - 标题不显示在谷歌搜索中

> ID：16177152
> 
> 赞同：0
> 
> 时间：2013-04-23T18:59:57.420
> 
> 标签：django, sitemap

我已按照[文档](https://docs.djangoproject.com/en/dev/ref/contrib/sitemaps/#a-simple-example)中的步骤进行操作，它似乎按预期工作。

我已经生成了一个自动站点地图：[https ://duelify.com/sitemap.xml](https://duelify.com/sitemap.xml)

然而不知何故，没有办法指定标题。

如果我在 google 中搜索我的网站：`site:duelify.com`并向下滚动，我会看到每个链接的主网站标题：

> **决斗 | 决斗你的朋友和敌人**
> 
> [https://duelify.com/topics/discuss/2/vegetarian-diet/](https://duelify.com/topics/discuss/2/vegetarian-diet/)

那看起来不对。

如果我用 Stackoverflow 试试这个：

`site:stackoverflow.com django`

每个条目都有一个适当的标题。

我怎么能做到这一点？从给定的站点地图[参考](https://docs.djangoproject.com/en/dev/ref/contrib/sitemaps/#sitemap-class-reference)中尚不清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T19:02:59.073

Google 搜索结果中显示的标题与站点地图无关。

使用元 ( [http://www.w3schools.com/tags/tag_meta.asp](http://www.w3schools.com/tags/tag_meta.asp) ) 和标题标签：

```
<head>
<meta name="description" content="Your page description">
<title>Your page title</title>
</head> 
```

并且不要忘记设置正确的 HTML 标题标签。

# windows - .exe 文件的默认图标，与 Windows 版本无关

> ID：16177153
> 
> 赞同：3
> 
> 时间：2013-04-23T19:00:01.440
> 
> 标签：windows, winapi, registry, exe, msdn

我在列表视图中显示了一堆 exe 文件，我想显示它们的默认图标，但是如果 exe 文件没有图标资源，我想显示 Windows 默认应用程序图标，而不管操作系统版本如何。如果我在以下位置检查注册表：

```
 [HKEY_LOCAL_MACHINE\SOFTWARE\Classes\exefile\DefaultIcon] 
```

默认值为“%1”，它是 exe 文件本身的第一个图标。但是没有图标的 exe 文件的默认 .exe 图标在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T19:08:09.547

这就是 XP 所做的（这实际上是一个捷径，但你明白了）

![样本](https://i.stack.imgur.com/NlcO3.png)

有一阵子了; 但是shell32不处理这个吗？

[这是来自stackoverflow](https://stackoverflow.com/questions/460980/where-can-i-find-the-default-icons-used-for-folders-and-applications)的旧文章

# c# - 从设置文件c#设置Windows服务启动

> ID：16177156
> 
> 赞同：1
> 
> 时间：2013-04-23T19:00:10.847
> 
> 标签：c#, windows-services, settings, scheduled-tasks

我有一个 Windows 服务，我希望它能够在我的设置文件中指定的时间运行。

![在此处输入图像描述](https://i.stack.imgur.com/S9djT.png)

这是我第一次尝试使用 Windows 服务。如何根据设置文件中的此值安排作业？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T19:05:21.007

我使用了一种不同的方法来处理这个问题——我的服务一直在运行，并且当我希望它运行时，服务使用计时器来运行。计时器可以通过文件或您选择的任何其他方法进行控制。

您可以使用windows scheduler在特定时间启动服务，只需使用它...将服务启动命令放入批处理文件并在特定时间运行它。

[调度任务](http://windows.microsoft.com/en-sg/windows7/schedule-a-task)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T19:03:52.763

你不能。但是，您可以有一个设置任务来创建计划任务来启动和停止服务。

# c++ - 复制构造函数调用析构函数 c++

> ID：16177157
> 
> 赞同：1
> 
> 时间：2013-04-23T19:00:13.487
> 
> 标签：c++, destructor, operator-keyword, copy-constructor

我有一个测试类来制作我自己的字符串函数。我对复制析构函数有疑问。

我有 2 个字符串：s1 和 s2。我调用函数 s3 = s1 + s2;

它首先调用 operator+ 函数，完成后调用析构函数。因此，operator= 函数中的字符串对象为空。我怎样才能解决这个问题？

析构函数：

```
String::~String() {
  if (this->str)
    delete[] str;
  str = NULL;
  len = 0;
} 
```

复制构造函数：

```
String::String(const String& string) {
  this->len = string.len;
  if(string.str) {
    this->str = new char[string.len+1];
    strcpy(this->str,string.str);
  } else {
    this->str = 0;
  }
} 
```

`operator=`：

```
String & String::operator= (const String& string) {
  if(this == & string)
    return *this;

  delete [] str;

  this->len = string.len;

  if(string.str) {
    this->str = new char[this->len];
    strcpy(this->str,string.str);
  } else {
    this->str = 0;      
  }

  return *this;
} 
```

`operator+`：

```
String& operator+(const String& string1 ,const String& string2)
{
  String s;

  s.len = string1.len + string2.len;
  s.str = new char[string1.len + string2.len+1];
  strcpy(s.str,string1.str);
  strcat(s.str,string2.str);

  return  s;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T19:05:08.187

`operator+`不应通过引用返回局部变量。

将返回类型更改`operator+`为`String`。即，制作签名：

```
String operator+( String const& lhs, String const& rhs ) 
```

* * *

您可能还想为您的`String`类编写一个“移动构造函数”：`String( String&& other )`如果您使用 C++11 编写代码。

一个简单的移动构造函数：

```
String::String( String&& other ): len(other.len), str(other.str) {
  other.len = 0;
  other.str = nullptr;
} 
```

这不是必需的，因为您的 return 语句中的副本`operator+`可能会在非平凡的优化级别下被编译器“删除”，但仍然是一种很好的做法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T19:05:55.313

它正在调用析构函数，因为`String s`它超出了 operator+ 重载的范围。您的 operator+ 重载需要返回副本而不是引用。

因此，您应该将您的 operator+ 更改为

```
String operator+(const String& string1, const String& string2) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T19:09:15.470

是的，我有你的问题

问题是，当您从 + 运算符函数返回对临时对象的引用，然后将其分配给 main 中的其他对象时，因此在这里调用 = 重载函数，您将向其中传递对不再存在的对象的引用

因此，您可以从 + 运算符函数返回一个副本

或者

您可以在 = overlaoded 函数中传递一个副本

# java - maven，修复编译顺序模块

> ID：16177166
> 
> 赞同：0
> 
> 时间：2013-04-23T19:01:14.053
> 
> 标签：java, maven

我有一个多模块项目。

项目包含一些jar模块，一个war模块，一个ear模块。War 依赖于 jars，ear 模块的 pom.xml 包含所有其他模块的依赖关系 - 部署在容器中的 ear 文件。

每次我制作新的 ear 文件时，我都需要先编译所有其他模块（并记住正确的编译顺序）。我厌倦了这个。

我知道父模块。[http://www.sonatype.com/books/mvnex-book/reference/multimodule.html](http://www.sonatype.com/books/mvnex-book/reference/multimodule.html) 但这对我来说似乎不是一个好的解决方案。

我还有其他解决方案来修复编译顺序模块吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:12:18.810

如果模块以必须构建在一起的方式依赖，有两种方法可以处理这个问题。

1.  使用父 pom（它们旨在解决这种情况）
2.  在构建主项目之前使用外部构建脚本构建依赖项

# iphone - 来自 URL iPhone 的 NSURL 图像

> ID：16177167
> 
> 赞同：-3
> 
> 时间：2013-04-23T19:01:14.440
> 
> 标签：iphone, objective-c, exception

从某些图像的 url 获取图像时出现错误，而对于其他图像则没有。

```
NSURL* imageURL = [[API sharedInstance] urlForImageWithName:[NSString stringWithFormat:@"%@", [photo objectForKey:@"src"]] andID:[NSString stringWithFormat:@"%@",self.IdPhoto]]; 
```

在 API

```
- (NSURL *)urlForImageWithName:(NSString *)imageName andID:(NSString *)imageID
{
NSString* urlString = [NSString stringWithFormat:@"%@/%@upload/%@", kAPIHost, kAPIPath, imageName];
return [NSURL URLWithString:urlString];
} 
```

src 是数据库中图像的名称，它适用于大多数照片，甚至当我在 tableView 中加载它们时也适用于所有照片，但是当我按下图像并想要全屏显示时，一些图像被加载并且一些抛出异常：线程1：EXC_BAD_ACCESS（代码=1，地址=0x...）。

帮助 ！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T19:14:13.077

检查事项

1.  是Api类的.h文件中定义的方法
2.  共享实例已正确创建。

包括

```
- (NSURL *)urlForImageWithName:(NSString *)imageName andID:(NSString *)imageID; 
```

在.h

通过记录其内存来检查共享实例

```
NSLog(@"%@",[[API sharedInstance] description]); 
```

如果您在此日志中收到错误，则问题出在您创建共享实例的内容上

更新

从评论中，您要实现的目标有所不同。出于您的目的，您必须异步加载 tableview 中的图像。为此，您可以简单地使用类似的库

*   [异步图像视图](https://github.com/nicklockwood/AsyncImageView)
*   [SDWeb图像视图](https://github.com/rs/SDWebImage)
*   [AFNetworking 扩展](https://github.com/AFNetworking/AFNetworking)

ETC

# multithreading - 如何修复 dbx“MT 支持已禁用”错误？

> ID：16177168
> 
> 赞同：0
> 
> 时间：2013-04-23T19:01:15.427
> 
> 标签：multithreading, debugging, gdb, solaris, dbx

我加载了一个多线程程序的核心文件。我无法使用以下命令列出线程。

```
(dbx) threads
 dbx: MT support is disabled 
(dbx) 
```

但是，我可以使用 lwps 列出 LWP。在 Solaris 上，线程和 lwps 是否具有 1-1 映射？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T03:22:40.670

在 Solaris 9 及更高版本上，线程以 1:1 的比例映射到 LWP。在旧版本中，它是 M:N 映射。更多更深入的细节可以在[白皮书*Solaris™ 操作环境中的多线程中*](https://blogs.oracle.com/pgdh/resource/pgdh-solaris-threads-paper-v1.1.pdf)找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-31T05:51:11.657

您需要使用 -MT 编译器选项编译软件以获得“多线程”支持。重新编译（使用 -MT），生成核心转储并再次尝试 dbx。

# python - 使用“twython”时发生错误

> ID：16177173
> 
> 赞同：0
> 
> 时间：2013-04-23T19:01:44.903
> 
> 标签：python, twitter, twitter-oauth, twython

我想根据主题标签获取推文。但我收到以下错误。

```
>>> import twython
>>> TWITTER_APP_KEY = 'xxxxxx'
>>> TWITTER_APP_KEY_SECRET = 'xxxxx'
>>> TWITTER_ACCESS_TOKEN = 'xxxxxx'
>>> TWITTER_ACCESS_TOKEN_SECRET = 'xxxxx'
>>> t = twython(app_key=TWITTER_APP_KEY, 
        app_secret=TWITTER_APP_KEY_SECRET, 
            oauth_token=TWITTER_ACCESS_TOKEN, 
            oauth_token_secret=TWITTER_ACCESS_TOKEN_SECRET)

Traceback (most recent call last):
  File "<pyshell#16>", line 4, in <module>
    oauth_token_secret=TWITTER_ACCESS_TOKEN_SECRET)
TypeError: 'module' object is not callable 
```

我不明白为什么会出现上述错误？另外请让我知道 app_key 是否与消费者密钥相同？请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T20:17:25.190

请参阅[文档](https://github.com/ryanmcgrath/twython#usage)：

```
from twython import Twython

t = Twython(app_key=app_key,
            app_secret=app_secret,
            callback_url='http://google.com/') 
```

在您的示例中，您直接调用**模块** `twython`而不是 class `twyton.Twython`。

要使您的示例正常工作，您需要替换`import twython`为`from twython import Twython`.

# android - 使用 Textwatcher 会导致适配器顶部的 edittext 搜索栏中出现奇怪的问题

> ID：16177174
> 
> 赞同：1
> 
> 时间：2013-04-23T19:01:44.907
> 
> 标签：android

在应用程序中，我有一个扩展 BaseAdapter 的自定义适配器。适配器包括两个项目的标题，其中一个是搜索栏。我要做的是使用我的适配器在栏上输入文本以搜索列表视图上的内容。这里的挑战是三星 Galaxy Note II，当我输入一个字符时，搜索栏会显示它是什么。但是，对于我要输入的第二个字符，该栏没有显示任何内容，并且似乎前一个字符也被清除了。对于任何其他设备，这都很好。我对此一无所知。任何大师都可以知道解决方案吗？

下面是 ResearveHeaderAdapter 的一些片段：

```
@Override
public View getView(final int position, final View convertView, final ViewGroup parent)
{
    View rowView = null;        
        HeaderItem header = mHeaderDef.get(position);
        if (header != null)
        {
            switch(header)
            {
                case REFRESHBAR:
                {
                    rowView = updateRefreshRow(convertView, parent);
                    break;
                }
                case SEARCHBAR:
                {
                    rowView = updateSearchRow(convertView, parent);
                    break;
                }
                default:
                {       
                    rowView = super.getView(position, convertView, parent);
                    break;
                }
            }
        }
        else
        {
            rowView = super.getView(position, convertView, parent);
        }
        return rowView;

}

  private View updateSearchRow(final View convertView, final ViewGroup parent)
{

        mCacheSearchView = mAllContentInflator.inflate( R.layout.search_bar_item, parent, false );
        mEditText = (ClearableEditText) mCacheSearchView.findViewById(R.id.topSearchBar);
        mEditText.setText(getSearchVarString());
        mEditText.setOnKeyListener(getSearchListener());
        mEditText.addTextChangedListener(getSearchTextWatcher());

        String search = getSearchVarString();
        String stxt = mEditText.getText().toString();

        if (getSearchVarString().trim().length() > 0)
        {
            mEditText.requestFocus();
        }
        mEditText.setEnabled(true);

    return mCacheSearchView;
} 
```

它的子类 AllContentAdapter：

```
public class AllContentAdapter extends ReserveHeaderAdapter 
{
public AllContentAdapter(Activity callerContext,
        MediaObjectManager manager, boolean sensitive,
        MediaPolicy displayPolicy) {
    super(callerContext, manager, sensitive, displayPolicy);
    // TODO Auto-generated constructor stub
    super.appendHeaderItem(HeaderItem.REFRESHBAR);
    super.appendHeaderItem(HeaderItem.SEARCHBAR);
}

private static OnKeyListener mOnKeySearchListener = null;   
private static TextWatcher mSearchTextWatcher = null;
private static OnClickListener mOnClickRefreshListener = null;
private static String mSearchString = "";
@Override
protected String getSearchVarString()
{
    return mSearchString;
}

@Override
protected void setSearchVarString(String searchString)
{
    mSearchString = searchString;
}

@Override
protected OnKeyListener getSearchListener()
{
    return mOnKeySearchListener;
}

@Override
protected TextWatcher getSearchTextWatcher()
{
    return mSearchTextWatcher;
}

@Override
protected OnClickListener getClickRefreshListener()
{
    return mOnClickRefreshListener;
}

public void setOnClickRefreshListener(OnClickListener listener)
{
    mOnClickRefreshListener = listener;
}

public void setSearchOnKeyListener(OnKeyListener listener)
{
    mOnKeySearchListener = listener;
}

public void addTextChangedListenerForSearch(TextWatcher listener)
{
    mSearchTextWatcher = listener;      
} 
```

因此，对于所需的 Activity，我将`adapter.addTextChangedListenerForSearch(new TextWatcher())`其称为如下：

```
((AllContentAdapter) mAdapter).addTextChangedListenerForSearch(new TextWatcher()
    {

        public void afterTextChanged(Editable s)
        {
            String stxt = s.toString();
            ((AllContentAdapter) mAdapter).setSearchVarString(stxt);

                            // some handle code omitted...

            AllContentScreen.this.loadSearchFilter();// do some filter to search desired content
        }

        public void beforeTextChanged(CharSequence s, int start, int count, int after)
        {
        }

        public void onTextChanged(CharSequence s, int start, int before, int count)
        {
        }
    }); 
```

真正的结果是，在 Note II 上，当输入第二个字符时，(Editable)s 会捕捉到注意但为空的字符串。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T20:11:24.560

从调试过程中，我可能发现了这个特殊设备的问题并因此解决了这个问题。也就是说，当 EditText.getText().getString() 不为空时，我们将显示搜索栏和 setSelection(position)。这里的“位置”代表搜索栏。对于任何其他设备，这都可以正常工作。对于Note II，似乎如果我们想对EditText的位置进行setSelection，该函数将清除输入的文本并返回空字符串。因此解决方案是通过使用标志来查看 EditText 是否有空字符串并捕获在搜索栏中输入的内容来避免此功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T22:06:05.863

那很奇怪。我敢打赌，Note 使用了特殊的 InputConnection。[http://developer.android.com/reference/android/view/inputmethod/BaseInputConnection.html](http://developer.android.com/reference/android/view/inputmethod/BaseInputConnection.html)

生成自定义可编辑项。您可能希望在搜索 EditText 上设置自定义 Editable.Factory。此外，请查看设置 SpanWatcher 以监视跨度活动，尤其是组成跨度。这是我创建的[RichEditText 库](https://github.com/kemallette/RichEditText)中的一个示例。

```
// Replaces the default edit text factory that produces editables
// which our custom editable and listener
public class TextFactory extends Editable.Factory{

    @Override
    public Editable newEditable(final CharSequence source){

        return new RichTextStringBuilder(source,
                                         mSpanWatcher);
    }

} 
```

至少，这会让您更好地了解正在发生的事情。

# c++ - Arduino 中的正确声明语法

> ID：16177176
> 
> 赞同：1
> 
> 时间：2013-04-23T19:01:53.727
> 
> 标签：c++, arduino

我是 Arduino 新手，我从[http://www.instructables.com/id/Arduino-Basics-Making-Sound/step2/Playing-A-Melody/借用了这段代码](http://www.instructables.com/id/Arduino-Basics-Making-Sound/step2/Playing-A-Melody/)

当我尝试验证代码时，我得到

```
error: expected declaration before '}' token 
```

在最后一行。我该如何解决？同样，我是新手，所以如果您需要更多详细信息，请告诉我。

```
#include "pitch.h"

// notes in the melody:
int melody[] = {NOTE_C4, NOTE_G3,NOTE_G3, NOTE_A3, NOTE_G3,0, NOTE_B3, NOTE_C4};

// note durations: 4 = quarter note, 8 = eighth note, etc.:
int noteDurations[] = {
4, 8, 8, 4,4,4,4,4 };

  void setup() {
  // iterate over the notes of the melody:
    for (int thisNote = 0; thisNote < 8; thisNote++) {

    // to calculate the note duration, take one second
    // divided by the note type.
    //e.g. quarter note = 1000 / 4, eighth note = 1000/8, etc.
    int noteDuration = 1000/noteDurations[thisNote];
    tone(8, melody[thisNote],noteDuration);

    // to distinguish the notes, set a minimum time between them.
    // the note's duration + 30% seems to work well:
    int pauseBetweenNotes = noteDuration * 1.30;
    delay(pauseBetweenNotes);
    // stop the tone playing:
    noTone(8);
    }
  }

  void loop() {
  // no need to repeat the melody.
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:04:29.813

`}`代码末尾有一个多余的右括号。删除最后一行中的那个，它不需要。

# python - 每个项目的结构设置，如何？

> ID：16177177
> 
> 赞同：2
> 
> 时间：2013-04-23T19:02:06.270
> 
> 标签：python, deployment, fabric

抱歉这个小问题：我管理多个项目，每个项目都部署或与一台或多台服务器交互。

我在家里维护我的主要fabric.py。现在，由于项目每天都来来去去，有没有办法用 Fabric（或其他系统）定义每个项目的设置，但不是在`fabric.py`? 我知道`roledefs`在 Fabric 中，但我真的想将 Fabric defs 与服务器访问数据分开。

例如

### 主fabfile

```
/home/fradeve/fabric.py

def deploy():
    some commands
    pass 
```

### 项目目录

```
/home/fradeve/projects
  |
  |--> project1/.fabricrc
  |--> project2/.fabricrc
  \--> project3/.fabricrc 
```

启动项目时，它应该读取自己的`.fabricrc`，读取服务器设置并相应地部署。

问题是我通常在主项目目录（`project1`）中工作，并且使用项目目录之外的 fabfile 启动 Fabric（在家里）会给我一个错误。

关于如何管理的任何提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T12:37:00.590

我最终编写了自己的脚本来处理这个问题。

从[Alexey](https://github.com/allait/allait.github.com/blob/master/static/code/fabfile.py) Bezhan 的奇妙 fabfile 开始，我添加了 Vagrant 支持和一个为新项目创建所有需要的文件的功能（`.vimrc`、`Vagrantfile`、`.gitignore`等）。

每个项目服务器都在每个项目中定义`server_config.yaml`，具有易于定制的选项。所有功能都记录在脚本中，希望这对某人有用。我的脚本增强版在[这里](https://github.com/fradeve/dotfiles/blob/master/home/fabfile.py)。

# hibernate - 为什么应该使用 FetchType.LAZY 和 FetchMode.JOIN 而不是 FetchType.EAGER？

> ID：16177179
> 
> 赞同：4
> 
> 时间：2013-04-23T19:02:24.620
> 
> 标签：hibernate

为什么要使用`FetchType.LAZY`with`FetchMode.JOIN`而不是`FetchType.EAGER`?. `FetchType.LAZY`with`FetchMode.JOIN`等于 Eager 模式。这样对吗？。为什么 put`Fetchmode.join`意味着如果发生任何延迟初始化异常，那么我们可以添加`fetchmode=join`?。为什么不能直接使用`fetchtype.Eager`。那么使用 fetchtype 和 有什么好处`fetchmode.join()`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-05T20:28:55.417

对于小型结果集数据模型， FetchType.EAGER不会对**FetchMode.JOIN的延迟和内存占用产生很大****影响**。

对于需要根据技术和环境因素获得最佳效率的大容量数据集模型，**FetchType.LAZY**更可取，因为连接表指针保持不变 - 但实际结果集按需保存。

例如：与数据集键热连接的房屋对象与与电话号码对象热连接的区号对象在效率和资源利用率方面存在累积差异。

在必要时：

*   使用**FetchType.EAGER**进行小型结果集连接。
*   并将**FetchType.LAZY**用于大型结果集连接，其中效率被认为是必不可少的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-01T05:15:48.747

FetchType 更适合用在实体注解中。大多数时候我会建议你使用`lazy`负载。

在这种情况下，如果您需要阻止，您可以通过使用`LazyIntializationException`来临时请求要加载的条件。`eager``FetchMode.JOIN`

```
List cats = sess.createCriteria(Cat.class)
    .add( Restrictions.like("name", "Fritz%") )
    .setFetchMode("mate", FetchMode.JOIN)
    .setFetchMode("kittens", FetchMode.JOIN)
    .list(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-10T05:47:18.113

在集合或单值关联映射上使用 fetch="join"，您实际上将避免第二个 SELECT（因此使关联或集合非惰性）

引用自

[https://developer.jboss.org/wiki/AShortPrimerOnFetchingStrategies](https://developer.jboss.org/wiki/AShortPrimerOnFetchingStrategies)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-23T19:06:49.873

考虑一个有薪水睡眠列表（一个连接）的员工类。1 位员工说有超过 100 个薪水睡眠。

您想要拥有所有员工的列表（例如 1000）。假设我们只想显示员工信息（No Salary Sleeps）。但是当我们使用 Eager 模式加载它时，即使所有工资都加载了所有员工。这是内存开销。

# java - JButton 未调整大小以匹配其首选大小

> ID：16177180
> 
> 赞同：0
> 
> 时间：2013-04-23T19:02:26.050
> 
> 标签：java, swing, boxlayout

我正在尝试为游戏制作菜单屏幕。我添加了两个按钮，播放和退出，目前正在尝试弄清楚如何调整它们的大小。当我运行我的代码时，按钮的大小几乎完全相同（我想象中的不同是因为文本）。我正在为我的按钮使用 BoxLayout，我刚刚在这里阅读了[为什么 BoxLayout 不允许我更改 JButton 的宽度但让我更改高度？](https://stackoverflow.com/questions/3692987/why-will-boxlayout-not-allow-me-to-change-the-width-of-a-jbutton-but-let-me-chan)为什么它只会调整宽度或高度，但现在也没有调整大小。在我的代码中，我使用 BoxLayout.PAGE_AXIS，我不知道这是否会有所不同，但它也没有使用 BoxLayout.Y_AXIS 垂直调整大小。

这是我的代码：

```
public class Stage extends JFrame {
/* PRIVATE */
private JButton play, exit;

// Setup the Menu screen.
private void createMenuScreen() {
    Container window = getContentPane();
    // window.setBackground(Color.BLACK);
    JPanel menuScreen = new JPanel();
    menuScreen.setLayout(new BoxLayout(menuScreen, BoxLayout.PAGE_AXIS));
    window.add(menuScreen, "Center");

    play = new JButton("Play");
    play.setPreferredSize(new Dimension(20, 20));
    play.setAlignmentX(Component.CENTER_ALIGNMENT);

    exit = new JButton("Exit");
    exit.setPreferredSize(new Dimension(100, 100));
    exit.setAlignmentX(Component.CENTER_ALIGNMENT);
    menuScreen.add(play);
    menuScreen.add(exit);
}

/* PUBLIC */
public Stage() {
    // Setup the frame.
    setSize(224, 288);
    setLocationRelativeTo(null); // Centers the window.
    setUndecorated(true); // Removes the Windows border.
    setVisible(true);

    createMenuScreen();
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:23:01.550

Try to use setMaximumSize() method

`exit.setMaximumSize(new Dimension(100,100));`

Or try to use `BorderLayout` instead of `BoxLayout`

# html - CSS：表格中一列的可变大小

> ID：16177181
> 
> 赞同：4
> 
> 时间：2013-04-23T19:02:31.340
> 
> 标签：html, css

我想要一个 100 像素的表格，有 4 列，每列 25 像素。

那么当浏览器展开时，第一列最多可以变成50px。

有唯一的 CSS 解决方案吗？我真的很想避免使用 js 来设置这些样式。

HTML：

```
<table>
<tbody>
 <tr>
   <td>Item 1 expands</td>
   <td>Item 2</td>
   <td>Item 3</td>
   <td>Item 4</td>
 </tr>
</tbody>
</table> 
```

CSS：

```
table {
  table-layout: fixed;
}

td {
  width: 25px;
}

td:nth-child(1) {
  ?? max-width: 500px; ??
  ?? width: 25%; ??
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T19:29:27.727

To make the column expand smoothly instead of snapping into a new width with media queries:

```
table{ 
  max-width: 125px;
}
td{
   min-width: 25px;
}
td:nth-child(1){
   width:40%; // Translates to roughly 50px
} 
```

This will allow the first column to expand with the available window space.

[http://jsfiddle.net/RUNcm/](http://jsfiddle.net/RUNcm/)

This works because if the table goes below `125px` in width, the `min-width` of td kicks in and keeps the first child from going below `25px`.

On the other hand, if the table is larger than `100px` in width (because the user expanded the browser window), `40%` width will allow it to go up to `52px` but no further. (that's what `max-width 125px;` helps moderate).

**Note on `nth-child`:** As Jay Na stated, `nth-child` has less browser support than `first-child`. You might want to look into using the `first-child` pseudo-class instead.

*MDN Docs*

`nth-child` [https://developer.mozilla.org/en-US/docs/CSS/:nth-child](https://developer.mozilla.org/en-US/docs/CSS/:nth-child)

`first-child` [https://developer.mozilla.org/en-US/docs/CSS/:first-child](https://developer.mozilla.org/en-US/docs/CSS/:first-child)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-23T19:08:24.757

在要修复的 TD 元素上设置 25px 的 with。从那时起，表格的宽度将定义第一列的宽度，因此您可以定义它是有意义的。

编辑例如：

```
table {
    max-width:575px;
}
td {
  width: 25px;
}

td:nth-child(1) {
width:auto;
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-23T19:06:35.670

你会这样做：

```
@media all and (min-width:400px) { /* or whatever the threshold size is */
    td:first-child {width:50px}
} 
```

# iphone - 使用未声明的标识符“audioRouteChangeListenerCallback”

> ID：16177182
> 
> 赞同：1
> 
> 时间：2013-04-23T19:02:36.043
> 
> 标签：iphone, ios6, avaudioplayer, avaudiosession

尝试初始化音频会话，以便应用程序音频在后台播放，并在屏幕锁定时显示远程控制事件以控制音频，但**使用未声明的标识符“audioRouteChangeListenerCallback”时出错**

```
- (void) setupAudioSession {

AVAudioSession *mySession = [AVAudioSession sharedInstance];

// Specify that this object is the delegate of the audio session, so that
//    this object's endInterruption method will be invoked when needed.
[mySession setDelegate: self];

// Assign the Playback category to the audio session.
NSError *audioSessionError = nil;
[mySession setCategory: AVAudioSessionCategoryPlayback
                 error: &audioSessionError];

if (audioSessionError != nil) {

    NSLog (@"Error setting audio session category.");
    return;
}

// Activate the audio session
[mySession setActive: YES
               error: &audioSessionError];

if (audioSessionError != nil) {

    NSLog (@"Error activating audio session during initial setup.");
    return;
}

// Increase the maximum frames per slice allows the mixer unit to accommodate the
//    larger slice size used when the screen is locked.
UInt32 maximumFramesPerSlice = 4096;

 AudioUnitSetProperty (
                               mixerUnit,
                               kAudioUnitProperty_MaximumFramesPerSlice,
                               kAudioUnitScope_Global,
                               0,
                               &maximumFramesPerSlice,
                               sizeof (maximumFramesPerSlice)
                               );

// Register the audio route change listener callback function with the audio session.
AudioSessionAddPropertyListener (
kAudioSessionProperty_AudioRouteChange,
audioRouteChangeListenerCallback, self );
 }

- (void)viewDidAppear:(BOOL)animated {
[super viewDidAppear:animated];
[[UIApplication sharedApplication] beginReceivingRemoteControlEvents];
[self becomeFirstResponder];
 }

- (void)viewWillDisappear:(BOOL)animated {
[super viewWillDisappear:animated];
[[UIApplication sharedApplication] endReceivingRemoteControlEvents];
[self resignFirstResponder];
}

- (BOOL)canBecomeFirstResponder {
return YES;
}

- (void)remoteControlReceivedWithEvent:(UIEvent *)event {
//if it is a remote control event handle it correctly
if (event.type == UIEventTypeRemoteControl) {
    if (event.subtype == UIEventSubtypeRemoteControlTogglePlayPause) {

        [self playAction];

    }  else if (event.subtype == UIEventSubtypeRemoteControlPreviousTrack) {
        [self rewButtonPressed];

    } else if (event.subtype == UIEventSubtypeRemoteControlNextTrack)
        [self ffwButtonPressed:nil];
}} 
```

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T18:31:50.637

您确实有一个未声明的标识符，称为 audioRouteChangeListenerCallback。这不是 CoreAudio 框架 AFAIK 中定义的符号，但是，Apple 的一些示例代码源定义了它，例如[MixerHost](http://developer.apple.com/library/ios/#samplecode/MixerHost/Listings/ReadMe_txt.html)，在`MixerHostAudio.m`.

该源文件中的注释具有指导意义：

```
// Audio session callback function for responding to audio route changes. If playing back audio and
//   the user unplugs a headset or headphones, or removes the device from a dock connector for hardware
//   that supports audio playback, this callback detects that and stops playback.
//
// Refer to AudioSessionPropertyListener in Audio Session Services Reference. 
```

# boost - 从可选解析器表达式的可变参数列表生成 Spirit 解析器表达式

> ID：16177184
> 
> 赞同：5
> 
> 时间：2013-04-23T19:02:39.937
> 
> 标签：boost, c++11, boost-spirit, variadic-templates, boost-fusion

我正在寻找实现可变参数函数的最简单方法，该函数采用 boost::spirit::qi 规则列表并将列表扩展为格式的表达式：rule1 | 规则2 | rule3 |.... 假设规则不合成任何属性。非常感谢您的帮助。

```
#include <boost/config/warning_disable.hpp>
#include <boost/spirit/include/qi.hpp>
#include <string>
#include <iostream>
#include <boost/spirit/include/phoenix_operator.hpp>

namespace qi    = boost::spirit::qi;
namespace ph    = boost::phoenix;
namespace ascii = boost::spirit::ascii;
using boost::spirit::qi::phrase_parse;
using boost::spirit::qi::ascii::space;
using boost::spirit::iso8859_1::char_;

typedef qi::rule<std::string::const_iterator,ascii::space_type> mrule_t;
typedef qi::rule< std::string::const_iterator,std::string() >   wrule_t; 
```

* * *

```
//How to deduce expandBitwise() return type ?

template<typename T>
T expandBitwise(T& t)
{
    return t.rule_;
}

template<typename T,typename ...Tail>
T expandBitwise(T& t,Tail& ...tail)
{
    return t.rule_ | expandBitwise(tail...);
}

struct TStruct
{
    mrule_t     rule_;
    template<typename T,typename R>
    TStruct( T& rVar,const std::string&name, R& rule ) :
        rule_( qi::lit( name ) >> rule[ ph::ref( rVar )=qi::_1 ] )
        {}
};

template<typename T,typename ...Tail>
void mparse(const std::string& line,T& t,Tail& ...tail)
{
    std::string::const_iterator f,l;

    f=line.begin();
    l=line.end(); 
```

* * *

```
 // I would like to expand the rules here ...
    //if(phrase_parse(f,l,expandBitwise(t,tail...),space ) && f==l)

    if( phrase_parse(f, l, t.rule_, space ) && f==l )
        std::cout<<"Parsed:"<<line<<std::endl;
    else
        std::cout<<"Syntax error:"<<line<<std::endl;
}

int main()
{
    wrule_t rword=+~space;

    std::string par1,par2,par3,par4;

    TStruct r1( par1,"-a", rword );
    TStruct r2( par2,"-b", rword );
    TStruct r3( par3,"-c", rword );
    TStruct r4( par4,"-d", rword );

    mparse("abc 8.81"   ,r1,r2,r3,r4);
    mparse("-a atoken"  ,r1,r2,r3,r4);
    mparse("-b btoken"  ,r1,r2,r3,r4);
    mparse("-c ctoken"  ,r1,r2,r3,r4);
    mparse("-d dtoken"  ,r1,r2,r3,r4);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T00:44:23.823

> *感谢您的快速提示！我刚刚尝试了你的代码，除非我做错了什么......我得到这个输出：`Syntax error:abc 8.81 Parsed:-a atoken Syntax error:-b btoken Syntax error:-c ctoken Syntax error:-d dtoken`* - [G. Civardi 2 小时前](https://stackoverflow.com/questions/16177184/return-type-deduction-of-boost-spirit-expression-made-of-variadic-function-expan/16179565#comment23128636_16179565)

好的，所以，我不能不管它：/

原来涉及到**未定义的行为**，因为解析器表达式被传递`expandBitwise`和被复制的方式：Boost Proto 表达式模板不是被设计为被复制的，因为它们可能包含对临时对象的引用，其生命周期在结束时结束它们包含完整的表达。

> 有关更多背景信息，请参阅[2 秒内零到 60 MPH 的讨论！](http://boost-spirit.com/home/articles/qi-example/zero-to-60-mph-in-2-seconds/)

经过长时间（长时间）的调整，`rule_.alias()`我`boost::proto::deepcopy`已经达到了以下解决方案（顺便说一下，它不再需要辅助函数了）：

```
template<typename ...Tail>
void mparse(const std::string& line,Tail& ...tail)
{
    auto parser = boost::fusion::fold(
                boost::tie(ph::bind(&TStruct::rule_, arg1)(tail)...),
                qi::eps(false),
                deepcopy_(arg2 | arg1)
            );

    auto f=begin(line), l=end(line);

    if( qi::phrase_parse(f, l, parser, ascii::space ) )
        std::cout << "Parsed:" << line << std::endl;
    else
        std::cout << "Syntax error:" << line << std::endl;

    if (f!=l)
        std::cout << "Remaining unparsed: '" << std::string(f,l) << "'\n";
} 
```

针对 UB 的保护是`deepcopy_()`调用，它是一个简单的多态可调用适配器`boost::proto::deepcopy`：

```
struct DeepCopy
{
    template<typename E> struct result { typedef typename boost::proto::result_of::deep_copy<E>::type type; };

    template<typename E>
        typename result<E>::type
        operator()(E const& expr) const {
            return boost::proto::deep_copy(expr);
        }
};

static const ph::function<DeepCopy> deepcopy_; 
```

使用此代码，你瞧，输出变为：

```
Syntax error:abc 8.81
Remaining unparsed: 'abc 8.81'
Parsed:-a atoken
Parsed:-b btoken
Parsed:-c ctoken
Parsed:-d dtoken
Bye 
```

作为奖励，代码现在允许您使用 Spirit 的内置 debug() 功能（取消注释该行）：

```
<-d>
  <try>abc 8.81</try>
  <fail/>
</-d>
<-c>
  <try>abc 8.81</try>
  <fail/>
</-c>
<-b>
  <try>abc 8.81</try>
  <fail/>
</-b>
<-a>
  <try>abc 8.81</try>
  <fail/>
</-a>
Syntax error:abc 8.81
Remaining unparsed: 'abc 8.81' 
```

> 经测试
> 
> *   升压 1_54_0
> *   GCC 4.7.2、4.8.x、Clang 3.2
> *   注意`#define`重要的 s。

## 完整代码

```
#define BOOST_RESULT_OF_USE_DECLTYPE
#define BOOST_SPIRIT_USE_PHOENIX_V3
#include <boost/fusion/adapted/boost_tuple.hpp>
#include <boost/fusion/include/fold.hpp>
#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/phoenix.hpp>

namespace qi    = boost::spirit::qi;
namespace ph    = boost::phoenix;
namespace ascii = boost::spirit::ascii;
using namespace ph::arg_names;

typedef qi::rule<std::string::const_iterator,ascii::space_type> mrule_t;
typedef qi::rule<std::string::const_iterator,std::string() >    wrule_t;

struct TStruct
{
    mrule_t     rule_;
    template<typename T,typename R>
    TStruct( T& rVar,const std::string&name, R& rule ) :
        rule_( qi::lit(name) >> rule[ ph::ref(rVar) = qi::_1 ] )
    { 
        rule_.name(name);
        // debug(rule_);
    }
};

struct DeepCopy
{
    template<typename E> struct result { typedef typename boost::proto::result_of::deep_copy<E>::type type; };

    template<typename E>
        typename result<E>::type
        operator()(E const& expr) const {
            return boost::proto::deep_copy(expr);
        }
};

static const ph::function<DeepCopy> deepcopy_;

template<typename ...Tail>
void mparse(const std::string& line,Tail& ...tail)
{
    auto parser = boost::fusion::fold(
                boost::tie(ph::bind(&TStruct::rule_, arg1)(tail)...),
                qi::eps(false),
                deepcopy_(arg2 | arg1)
            );

    auto f=begin(line), l=end(line);

    if( qi::phrase_parse(f, l, parser, ascii::space ) )
        std::cout << "Parsed:" << line << std::endl;
    else
        std::cout << "Syntax error:" << line << std::endl;

    if (f!=l)
        std::cout << "Remaining unparsed: '" << std::string(f,l) << "'\n";
}

int main()
{
    wrule_t rword=+~ascii::space;

    std::string par1,par2,par3,par4;

    TStruct r1( par1, "-a", rword );
    TStruct r2( par2, "-b", rword );
    TStruct r3( par3, "-c", rword );
    TStruct r4( par4, "-d", rword );

    mparse("abc 8.81"   ,r1,r2,r3,r4);
    mparse("-a atoken"  ,r1,r2,r3,r4);
    mparse("-b btoken"  ,r1,r2,r3,r4);
    mparse("-c ctoken"  ,r1,r2,r3,r4);
    mparse("-d dtoken"  ,r1,r2,r3,r4);

    std::cout << "Bye\n";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T21:33:07.440

您不小心从帮助程序返回了 TStruct 类型`expandBitwise`。像这样修复它：

```
template<typename T>
auto expandBitwise(T const& t) -> decltype(t.rule_)
{
    return t.rule_;
}

template<typename T,typename ...Tail>
auto expandBitwise(T const& t,Tail const&... tail) -> decltype(t.rule_)
{
    return t.rule_ | expandBitwise(tail...);
} 
```

如果要公开属性，则返回类型推导规则变得更加复杂。基本上，您所做的是复制 Spirit 的 EDSL 部分。

* * *

让我们交换故事...

> ## **`Clippy:`** *看起来您正在尝试编写命令行参数解析器。你需要帮助吗？*

通过创建一个新的 Proto Domain 并实际创建终端，可以更系统地为您的选项解析器实现 DSL 机制。现在这会以某种方式吸引我。

***或者***，您可以使用**[Nabialek Trick](http://boost-spirit.com/home/articles/qi-example/nabialek-trick/)**完全从另一个角度看待这个问题。这恰好是我几周前使用的一种方法，我将与您分享我提出的设计： [https ://gist.github.com/sehe/2a556a8231606406fe36#file-test-cpp](https://gist.github.com/sehe/2a556a8231606406fe36#file-test-cpp)

重要的部分是，语法是“固定的”：

```
start    = -argument % '\0';
unparsed = as_string  [ +~nul ] [ std::cerr << phx::val("ignoring unparsed argument: '") << _1 << "'\n" ];
argument = ('-' >> +shortopt) | ("--" >> longopt) >> -unparsed | unparsed; 
```

诀窍在于：

```
shortopt = shortNames [_a = _1] >> lazy(_a);
longopt  = longNames  [_a = _1] >> lazy(_a); 
```

Where`shortNames`和`longNames`是`qi::symbols`解析器表，动态构建，基于和的可变参数列表`CliOptions`（`CliFlags`我将它们作为元组传递，因为我也想将结果存储在`CliOption`结构中）。

`qi::lazy(_a)`调用存储在*符号表*中的解析器。

作为奖励，我的 CliOptions 解析器还具有生成“使用”信息的功能。解析表达式的构建器以及使用信息是可扩展的。

```
int main(int argc, char* argv[])
{
    using CliParsing::make_option;

    typedef std::string::const_iterator It;

    auto config = std::make_tuple(
        make_option('a', "absolutely", "absolutely"),
        make_option('b', "borked"    , "borked")    ,
        make_option('c', "completion", "completion"),
        make_option('d', "debug",      "turn on debugging"),
        make_option('e', "",           "no long name")  ,
        //make_option('f', "flungeons" , "flungeons") ,
        //make_option('g', "goofing"   , "")   ,
        //make_option('m', "monitor",    "monitoring level"),
        make_option('t', "testing"   , "testing flags"),
        make_option('\0',"file"      , "with a filename (no short name)"),

        make_option('y', "assume-yes", "always assume yes"),
        make_option('v', "verbose",    "increase verbosity level"),
        make_option('i', "increment",  "stepsize to increment with", 5)
        );

    CliParsing::OptionGrammar<It> parser(config);

    using namespace phx::arg_names;
    const auto cmdline = std::accumulate(argv+1, argv+argc, std::string(), arg1 + arg2 + '\0');

    bool ok = qi::parse(begin(cmdline), end(cmdline), parser);

    std::cout << "Parse success " << std::boolalpha << ok << "\n";
    std::cout << parser.getUsage();

    return ok? 0 : 255;
} 
```

当使用一些随机参数调用时`-i 3 --completion -t --file=SOME.TXT -b huh?`，打印：

```
short form option --increment parsed
ignoring unparsed argument: '3'
long form switch --completion parsed
short form switch --testing parsed
long form switch --file parsed
ignoring unparsed argument: '=SOME.TXT'
short form switch --borked parsed
ignoring unparsed argument: 'huh?'

Parse success true
 --absolutely (-a)
    absolutely (flag)
 --borked (-b)
    borked (flag)
 --completion (-c)
    completion (flag)
 --debug (-d)
    turn on debugging (flag)
 -e
    no long name (flag)
 --testing (-t)
    testing flags (flag)
 --file
    with a filename (no short name) (flag)
 --assume-yes (-y)
    always assume yes (flag)
 --verbose (-v)
    increase verbosity level (flag)
 --increment (-i)
    stepsize to increment with (option with value; default '5') 
```

如您所见，并非所有选项都已实现（特别是`--`标记选项列表的末尾）。

# javascript - jquery 回旋处不触发 moveClockwiseThroughBack 的问题

> ID：16177189
> 
> 赞同：0
> 
> 时间：2013-04-23T19:02:53.177
> 
> 标签：javascript, jquery

我遇到了回旋处不触发`moveClockwiseThroughBack`和`moveCounterClockwiseThroughBack`回调的问题。该网站没有提供任何使用中的示例，所以我想知道是否有人对此有任何经验。

这是我用来初始化回旋处的代码，唯一的问题是它们不会触发函数。

jQuery 版本：1.9.1 通过 CDN Roundabout 版本 2.4.2 通过 localhost

```
 $('#cellWrapper').roundabout({
    childSelector: 'div',
    duration: 400,
    easing: 'easeOutQuad',
    enableDrag: true,
    dropEasing: 'easeOutBounce',
    triggerFocusEvents: true,
    moveClockwiseThroughBack: function () {
        console.log('ye');
    },
    moveCounterClockwiseThroughBack: function () {
        console.log('ye');
    },
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T19:28:21.790

I have found the following code to work properly, however i was unsure if it was meant to be set as such.

```
 var Blah = $('#cellWrapper').roundabout({
    childSelector: 'div',
    duration: 400,
    easing: 'easeOutQuad',
    enableDrag: true,
    dropEasing: 'easeOutBounce',
    triggerFocusEvents: true
});

Blah.bind('moveClockwiseThroughBack', FireBack);

function FireBack () {
    console.log('ye');
} 
```

# android - bitmap.compress(Bitmap.CompressFormat.PNG, 0, fOut) 使图像尺寸大于原始尺寸

> ID：16177191
> 
> 赞同：19
> 
> 时间：2013-04-23T19:02:58.920
> 
> 标签：android, compression, image-resizing, bitmapfactory

我想将从相机拍摄的图像压缩为 png 格式以使其尺寸更小，因此我使用以下代码：

```
compressedPictureFile = new File(imagePath);
Bitmap bitmap = BitmapFactory.decodeFile(imagePath);
FileOutputStream fOut = new FileOutputStream(compressedPictureFile);
boolean compressed = bitmap.compress(Bitmap.CompressFormat.PNG, 0, fOut);
fOut.flush();
fOut.close(); 
```

问题是compressedPictureFile实际上比原始图像大（从1 Mb到6Mb）

我错过了什么？这是减小图像大小的最佳方法吗？

谢谢

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-23T19:21:52.533

The images taken with the camera are most likely stored in the [`jpg`](https://en.wikipedia.org/wiki/Jpg)-format, which is lossy, but is relatively good for images with lots of colors (such as photographs).

When you compress the bitmap using your method you save it as a [`png`](https://en.wikipedia.org/wiki/Portable_Network_Graphics). The png compression is lossless, but can achieve pretty small filesizes when there are few colors (such as in certain logotypes or other graphics). When the amount of colors and complexity in a png-file increases, so will the file size (this is why the camera saves a jpg - the quality/filesize ratio is much better than png for most photographs).

So, if you want to decrease the filesize of the photographs, use jpg compression and experiment with the quality-parameter. You might also want to decrease the resolution of the images, since this will save lots of space (a file with 50% resolution will be approx. 25% in data-size).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-05T10:13:09.417

它在我的应用程序上运行良好

```
 public static String makeScreen(View view) throws Exception {
    String filename = "file.png";
    view.setDrawingCacheEnabled(true);
    view.buildDrawingCache();
    Bitmap b = view.getDrawingCache();
    FileOutputStream file = null;

    try {
        file = new FileOutputStream(Environment.getExternalStorageDirectory().toString() + "folder/" + filename);
        if (file != null) {
            b.compress(Bitmap.CompressFormat.PNG, 98, file);
            file.close();
        }
        view.destroyDrawingCache();
    } catch (Exception e) { view.destroyDrawingCache(); }
} 
```

# c++ - 将数据读入结构数组的指针 c++

> ID：16177196
> 
> 赞同：0
> 
> 时间：2013-04-23T19:03:06.573
> 
> 标签：c++

我有一个看起来像这样的文本文件：

```
Azrin, Neil
2.3  6.0  5.0  6.7  7.8  5.6  8.9  7.6
Babbage, Charles
2.3  5.6  6.5  7.6  8.7  7.8  5.4  4.5 
```

它继续为 24 个不同的名称。名字在第一行，数字在文件的第二行。第一个数字是潜水的难度级别，后面的7个数字是7位不同评委给出的分数。

我已经能够读取潜水员的姓名和难度级别，但它不会读取难度级别之后的分数。

我已经尝试了几乎所有我能想到的让它正常工作，有人可以帮忙吗？

到目前为止，我将数据读入结构的代码如下所示

```
const int NUM_NAMES = 24;
const int NUM_SCORES = 7;
const int NUM_ROUNDS = 2;

typedef double scoreTable[NUM_ROUNDS] [NUM_SCORES];
typedef double difficultyList[NUM_ROUNDS];

struct diveInfo
{
string diversName;
double totalScore;
double diveTotal;
difficultyList diff;
scoreTable scores;

};

typedef diveInfo diverList[NUM_NAMES];

int main()
{
diveInfo record;
diveInfo * ptr;
ptr = &record;
int lcv;

ifstream inFile;
inFile.open ("diveData.txt");

if (!inFile)
{
    cout << "ERROR: File could not be opened" << endl << endl;

    exit (EXIT_FAILURE);
}

for (lcv = 0; lcv < NUM_NAMES; lcv++)

getline(inFile, ptr[lcv].diversName);

delete ptr;
ptr = new diveInfo;

inFile >> *ptr[lcv].diff;

delete ptr;
ptr = new diveInfo[NUM_SCORES];

inFile >> *ptr[lcv].scores;   // here is the problem 

return (EXIT_SUCCESS);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T19:20:02.757

您的代码非常混乱。我想一开始很简单，但是当它不起作用时，它变得越来越复杂。但这很容易，你不需要任何复杂的东西。第一件事是您不需要*指针*，也不需要*new*。

让我们从头开始，你的结构是错误的，在你做对之前你什么也做不了。想想你的数据，你有一个名字、一个难度分数和七个评委分数。把它放在一个结构中

```
struct DiveInfo
{
    string diversName;
    double diff;
    double scores[7];
}; 
```

现在我们有 24 种不同的潜水，所以我们需要一个包含 24 个 DiveInfo 结构的数组

```
DiveInfo diveList[24]; 
```

现在我们可以开始阅读了，记住不要使用*指针*，不要使用*new*。这个简单不复杂。

```
for (int i = 0; i < 24; ++i)
{
    getline(inFile, diveList[i].diversName);
    inFile >> diveList[i].diff;
    for (int j = 0; j < 7; ++j)
        inFile >> diveList[i].score[j];
    string garbage;
    getline(inFile, garbage); // move to next line, ready to read next name
} 
```

看？每次循环我们都会读取一个 DiveInfo（文件中的两行）。每个 DiveInfo 是一个名称，后跟难度分数，然后是 7 位评委分数。唯一稍微复杂的是最后的`getline(..., garbage);`一点。当您阅读最后一个分数时，有必要将输入移动到下一行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T19:20:57.250

尝试改变

```
 typedef double scoreTable[NUM_ROUNDS] [NUM_SCORES]; 
```

至

```
 typedef double scoreTable[NUM_SCORES]; 
```

您没有在程序中使用数组的第二维，并且数据文件似乎也没有使用它。

另外，您为什么要在阅读每个项目后删除您创建的数据结构？如果您想要一个潜水信息对象数组，您应该创建它，然后为您要读取的每条记录迭代它。在每条记录中，您将需要遍历每个乐谱，分别阅读它们。

这应该让您朝着正确的方向前进：

```
diveInfo theDiveInfo[40]; // This array of diveInfo will hold all of the information for 40 divers

for(int i = 0; i < NUM_RECORD; ++i)
{
  getline(inFile, theDiveInfo[i].diversName);

  for(int j = 0; j < NUM_SCORES; ++j)
    inFile >> theDiveInfo[i].scores[j];
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-23T19:14:48.857

您正在使用像 C 一样的 C++。创建类而不是结构会更容易、更清晰。

您应该创建一个可以处理您的文件的 Parser 类和一个可以存储名称、难度和分数数组的 Person 类。

这样，您的解析器可以创建 Person 实例并将它们存储在容器中。

此外，您可以使用 STL 来存储您的数据。

如果您需要更多解释，请告诉我。

问候，

# mercurial - 如何将原始补丁集从 Rietveld 代码审查转换到本地 Mercurial 存储库？

> ID：16177198
> 
> 赞同：2
> 
> 时间：2013-04-23T19:03:15.520
> 
> 标签：mercurial, patch, rietveld

我想使用 Rietveld 代码审查上的“下载原始补丁集”链接并将其应用到 Mercurial 下的工作目录。很明显，“原始补丁集”不是 Mercurial 格式。我一直将这些格式视为实现细节，从未关注过它们。我可以假设，根据这个相关问题[How to create a Patch for Rietveld by git/patch/*?](https://stackoverflow.com/questions/1168268/to-create-a-patch-for-rietveld-by-git-patch/2979101) ，补丁集是SVN格式，但我知道的很少，我只能推测，但无法验证。我想我想要`download.py`为我做一些转换，而不必深入研究这个问题的本质，但这样的脚本似乎不存在。

作为奖励要求，我几乎只使用 TortoiseHg，我希望能够在其中执行此操作。特别是如果补丁集自动出现在架子工具中，那就太好了。

如何对我的工作目录应用 Rietveld 补丁集？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T05:58:37.190

> 如何对我的工作目录应用 Rietveld 补丁集？

只需**应用它**！

是的，Rietveld 补丁是 SVN 类型的，但 Mercurial 可以导入 SVN 差异

*   下载所需的原始补丁集
*   TortoiseHG 工作台菜单栏 - `Repository`-`Import`

![导入 TortoiseHG](https://i.stack.imgur.com/Jng0h.png)

*   选择需要的文件（文件）
*   **不要忘记启用**“不要剥离路径”
*   选择导入目标
*   进口检测结果

# twitter-bootstrap - twitter bootstrap datetimepicker没有通过getDate函数返回正确的UTC日期时间

> ID：16177201
> 
> 赞同：2
> 
> 时间：2013-04-23T19:03:25.833
> 
> 标签：twitter-bootstrap, datetimepicker

我正在使用从[此处](http://tarruda.github.io/bootstrap-datetimepicker/assets/dist/bootstrap-datetimepicker-0.0.10.zip)下载的最新引导程序 datetimepicker，但是在使用 API 时在获取正确的 UTC 日期时间时遇到问题。

```
var dateTimePicker = jQuery('.datetimepicker').datetimepicker();
dateTimePicker.on('changeDate', function(e) {

var eventTarget = jQuery(e.target);

var picker = eventTarget.data('datetimepicker');

console.log( "getDate: " + picker.getDate());
console.log( "getLocalDate: " +  picker.getLocalDate());
console.log( "getLocalDate to UTC: " +  picker.getLocalDate().toUTCString()); 
```

输出

```
 getDate: Wed Apr 24 2013 05:53:40 GMT+0530 (IST)

 getLocalDate: Wed Apr 24 2013 00:23:40 GMT+0530 (IST)

 getLocalDate to UTC: Tue, 23 Apr 2013 18:53:40 GMT 
```

这表明 getLocalDate 在我的时区 GMT +0530 中返回正确的日期时间，并且 getLocalDate.toUTCString 为我的本地日期时间返回相应的 UTC 日期时间。但是 getDate 显然没有按照[文档返回正确的 UTC 日期时间](http://tarruda.github.io/bootstrap-datetimepicker/)

```
 // Considering you are on a GMT-3 timezone and the input contains '2000-01-17 10:p'
   var localDate = picker.getLocalDate(); // localDate === 2000-01-17 07:00
   var utcDate = picker.getDate(); // utcDate === 2000-01-17 10:00 
```

[在源代码](https://raw.github.com/tarruda/bootstrap-datetimepicker/master/src/js/bootstrap-datetimepicker.js)中，我发现以下我无法理解的代码。

```
 function UTCDate() {
   return new Date(Date.UTC.apply(Date, arguments));
 } 
```

谁能让我理解代码片段**new Date(Date.UTC.apply(Date, arguments))**的工作原理以及它应该返回什么？

在撰写本文时，在我的时区 GMT +0530 中是**Wed Apr 24 00:19**，上面提到的 UTCDate 函数为此返回**Wed Apr 24 2013 05:48:49 GMT+0530 (IST)**，这显然不是对应的 UTC DateTime 在我的时区中的日期时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T20:06:44.160

Date.UTC 返回指定日期与 1970 年 1 月 1 日午夜之间的毫秒数。

apply 方法是一种 javascript 方法，可让您调用另一个方法并将父方法的参数传递给它。

我在想这是试图通过将 Date.UTC() 作为初始化程序传递给它来创建一个新日期，使用传递给 UTCDate() 方法的参数。

# c# - 用 C# 正则表达式替换字符串模式

> ID：16177203
> 
> 赞同：2
> 
> 时间：2013-04-23T19:03:29.253
> 
> 标签：c#, regex

我想使用 C# 正则表达式替换匹配特定模式的字符串。我确实使用 Regex.Replace Function 尝试了各种正则表达式，但没有一个对我有用。谁能帮我建立正确的正则表达式来替换部分字符串。

这是我的输入字符串。正则表达式应该匹配以任何字符（甚至是换行符）开头的字符串，`<message Severity="Error">Password will expire in 30 days`直到找到结束`</message>`标记。如果正则表达式找到匹配的模式，那么它应该用空字符串替换它。

输入字符串：

```
<message Severity="Error">Password will expire in 30 days.
Please update password using following instruction.
1\. login to abc
2\. change password.
</message> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T19:16:16.937

你可以使用`LINQ2XML`，但如果你愿意`regex`

```
<message Severity="Error">Password will expire in 30 days.*?</message>(?s) 
```

或者

在 linq2Xml 中

```
XElement doc=XElement.Load("yourXml.xml");

foreach(var elm in doc.Descendants("message"))
{
    if(elm.Attribute("Severity").Value=="Error")
        if(elm.Value.StartsWith("Password will expire in 30 days"))
        {
            elm.Remove();
        }
}
doc.Save("yourXml");\\don't forget to save :P 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T19:12:05.587

我知道有人反对这种方法，但这对我有用。（我怀疑您可能错过了 RegexOptions.SingleLine，这将允许点匹配换行符。）

```
string input = "lorem ipsum dolor sit amet<message Severity=\"Error\">Password will    expire in 30 days.\nPlease update password using following instruction.\n"
        + "1\. login to abc\n\n2\. change password.\n</message>lorem ipsum dolor sit amet <message>another message</message>";

string pattern = @"<message Severity=""Error"">Password will expire in 30 days.*?</message>";

string result = Regex.Replace(input, pattern, "", RegexOptions.Singleline | RegexOptions.IgnoreCase);

//result = "lorem ipsum dolor sit ametlorem ipsum dolor sit amet <message>another message</message>" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T19:16:01.433

就像评论中所说的那样 -`XML`解析可能更适合。另外-这可能不是最佳解决方案，具体取决于您要实现的目标。但这里是通过单元测试 - 你应该能够理解它。

```
[TestMethod]
public void TestMethod1()
{
    string input = "<message Severity=\"Error\">Password will expire in 30 days.\n"
                    +"Please update password using following instruction.\n"
                    +"1\. login to abc\n"
                    +"2\. change password.\n"
                    +"</message>";
    input = "something other" + input + "something else";

    Regex r = new Regex("<message Severity=\"Error\">Password will expire in 30 days\\..*?</message>", RegexOptions.Singleline);
    input = r.Replace(input, string.Empty);

    Assert.AreEqual<string>("something othersomething else", input);
} 
```

# php - 基本mysql sha1密码有效校验

> ID：16177209
> 
> 赞同：0
> 
> 时间：2013-04-23T19:04:01.127
> 
> 标签：php, mysql, passwords, sha1

我正在使用 sha1 函数将我的密码存储在 mysql DB 中。

```
$passwordHash = sha1($password); 
```

从谷歌我得到这个来自用户注册

```
sha1( sha1(users_plaintext_password)+random string ) 
```

去检查

```
server computes sha1( users_hashed_password_in_database +
$_SESSION['random_string'] )

if $_POST['password'] ==
sha1( users_hashed_password_in_database + $_SESSION['random_string'] ) 
```

我的问题是如何检查验证？这是正确的方法吗？并且使用一些随机字符串作为盐是否可以为我的密码提供更多保护？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:14:59.873

我会这样做：

```
$seed = 'some random string';
$passwordHash = sha1($password.$seed); 
```

然后对用户输入的数据执行相同操作：

```
$pass = $_POST['password'];
if(sha1($pass.$seed) == $passwordHash){
    //log user in
} 
```

种子是个好主意，因为用户经常选择容易猜到的密码。另一个优点是，如果有人设法入侵，您可以通过更改种子来恢复网站的安全性。

# c# - 按钮单击弹出一个新窗口

> ID：16177210
> 
> 赞同：-2
> 
> 时间：2013-04-23T19:04:04.260
> 
> 标签：c#, asp.net, ms-access-2007

我想知道，单击按钮时，弹出窗口应显示从数据库中收集用户类型。在该窗口中，我们可以选择一种用户类型，它将填充按钮附近的文本框。我正在使用从中获取用户类型的 MS Access 数据库和 user_master 表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T19:17:13.157

你正在寻找这样的东西：

假设您有一个文本框 ( `choiceTxtBox`)，用户可以在其中输入选择表单数据库的选项。

```
thatButton.Click += (the, game) => 
{
   db = new OleDbConnection();
   db.ConnectionString = "Provider=Microsoft.Jet.OLEDB.4.0;Data source=" + fileName;
   db.Open();

   string sql = "SELECT * FROM Table WHERE SomeField = @UserChoice";

   cmd = new OleDbCommand(sql, db);
   cmd.Parameters.AddWithValue("@UserChoice", choiceTxtBox.Text);
   rdr = cmd.ExecuteReader();

   while (rdr.Read())
   resultTxtBox.Text += ((string)rdr["GroupName"]);
}; 
```

# javascript - 如何防止 javascript 在 Visual Studio 2012 中完成括号？

> ID：16177211
> 
> 赞同：2
> 
> 时间：2013-04-23T19:04:06.787
> 
> 标签：javascript, visual-studio, resharper

当我在 javascript 文件中键入“{”时，它会自动完成“}”

但是，我确实有 ReSharper，但我已经禁用了它的选项，并且它不会在 C# 中自动完成，只是在 javascript 中。

有任何想法吗？不确定是 Visual Studio 还是 ReSharper 这样做。

**来自 Resharper 选项**

![在此处输入图像描述](https://i.stack.imgur.com/9JAn5.png) ![在此处输入图像描述](https://i.stack.imgur.com/ne6aa.png) ![在此处输入图像描述](https://i.stack.imgur.com/03g2A.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T19:08:00.727

这是一个 Visual Studio 选项。在工具 > 选项下，您可以转到文本编辑器 > JavaScript > 格式。取消选中“在 } 上自动格式化完成的块”选项

编辑：

您在使用生产力电动工具吗？它具有可以关闭的“自动支撑完成”功能。您必须重新启动 VS 才能使其生效。

# orchardcms - 在 Orchard 1.6 中呈现为 HTML 时显示 $1 的字段

> ID：16177213
> 
> 赞同：0
> 
> 时间：2013-04-23T19:04:11.387
> 
> 标签：orchardcms, orchardcms-1.6

我们的内容类型中有一个字段是 html。我们希望在该字段中放入一个信息表，并在进入详细信息视图时将其显示在屏幕上。

当我们这样做时，我们发现字段值中的每个换行符都被替换为 $1 所以我们得到如下内容

1 美元 1 美元 1 美元 1 美元等。

在 Fields.Common.Text.cshtml 文件的代码中，有一些代码调用 ReplaceNewLinesWith("
$1")

知道为什么会这样吗？我们可以通过将整个表格 html 放在一行上来解决它，但我们不能指望最终用户必须这样做......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T20:10:45.727

根据这篇[文章](https://orchard.codeplex.com/workitem/19403)，这是固定的，将在 1.7 上可用。

与此同时，我所做的是从 Fields.Common.Text.cshtml 的以下代码中删除 $1：

```
<p class="text-field"><span class="name">@name:</span> <span class="value">@(new MvcHtmlString(Html.Encode((HtmlString) Model.Value).ReplaceNewLinesWith("<br />$1")))</span></p> 
```

希望这可以帮助。

# sql - PLSQL 函数声明

> ID：16177215
> 
> 赞同：-1
> 
> 时间：2013-04-23T19:04:15.540
> 
> 标签：sql, oracle, function, variables, plsql

我想接受一个数字并返回两倍的参数值。虽然我希望它会沿着

> 浮点乘二（浮点数）{ num*2; 返回号码;}

然而，plsql 似乎需要一种更加模糊的方法。我以为我遵循了 oracle 11g 要求的方法，但是在尝试执行以下代码时，

```
exec dbms_output.enable(1000000); --boilerplate
set serveroutput on           --boilerplate
CREATE OR REPLACE FUNCTION timestwo (num
IN number)
RETURN number IS
   product number(2) := 0;
BEGIN
   product := (num*2);
   RETURN product;
END;
/
EXECUTE timestwo(5);
show error                       --boilerplate 
```

dbms 抛出以下错误：

```
ERROR at line 1:
ORA-06550: line 1, column 7:
PLS-00221: 'TIMESTWO' is not a procedure or is undefined
ORA-06550: line 1, column 7:
PL/SQL: Statement ignored
No errors 
```

显然函数声明是不正确的，但是有人知道如何正确实现这个简单的代码吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T19:12:36.460

该函数是有效的，但您调用它不正确。您已经定义了一个函数。但是正如错误所暗示的那样，您将其称为过程。

你可以这样做：

```
select timestwo(5) from dual; 
```

或者在 SQL*Plus 中：

```
var result number;
exec :result := timestwo(5);
print result 
```

您的函数实际上不需要`product`定义变量；你可以稍微简化为：

```
create or replace function timestwo(num in number)
return number is
begin
    return num*2;
end;
/ 
```

`10`...对于提供超过两位数的产品的较大输入数字（如 ），这也不会出错。除非这是故意的，当然... *8-)

# java - 参数顺序 - 覆盖

> ID：16177216
> 
> 赞同：5
> 
> 时间：2013-04-23T19:04:18.733
> 
> 标签：java

根据 javadoc

> 子类中具有相同签名（名称，加上其参数的编号和类型）和返回类型作为超类中的实例方法的实例方法会覆盖超类的方法。

我的问题是 - 参数的顺序无关紧要吗？如果它们具有相同的名称并且它们也是相同的类型？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T19:05:17.790

顺序很重要，因此具有不同顺序的相同参数的两个方法不被认为具有相同的签名。
例如，此示例无法编译：

```
interface Foo {
    void doIt(String what, int times);
}

class Bar implements Foo {
    public void doIt(int times, String what) {}
} 
```

然而，参数的名称是无关紧要的。这很好：

```
interface Foo {
    void doIt(String what, int times);
}

class Bar implements Foo {
    public void doIt(String andNowForSomeThingCompetelyDifferent, int theLarch) {}
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T19:07:16.987

[Java 语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4.2)说顺序很重要，但需要一些梳理才能解释原因：

> # 8.4.1\. 形式参数
> 
> 方法或构造函数的形式参数（如果有）由逗号分隔的参数说明符列表指定。
> 
> ...
> 
> # 8.4.2\. 方法签名
> 
> 如果满足以下所有条件，则两个方法或构造函数声明 M 和 N 具有相同的参数类型：
> 
> 1.  它们具有相同数量的形式参数（可能为零）
> 2.  它们具有相同数量的类型参数（可能为零）
> 3.  令 A [1] , ..., A [n]为 M 的类型参数，令 B [1] , ..., B [n]为 N 的类型参数。将 N 的类型中出现的每个 B [i]重命名为 A [i]后，对应类型变量的边界相同，M和N的形参类型相同。
> 
> ...
> 
> 如果 m1 是 m2 的子签名或 m2 是 m1 的子签名，则两个方法签名 m1 和 m2 是覆盖等效的。

形参被指定为一个列表，因此“M和N的形参类型”要相同，它们必须是相同的列表，并且列表是顺序相关的。

由于 3 中的对应关系依赖于顺序，因此类型参数的顺序也很重要。

当您处理[Method Descriptors](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.3.3)的字节码/JNI 约定时，这一点变得更加明显。

> ```
> MethodDescriptor:
>     ( ParameterDescriptor* ) ReturnDescriptor 
> ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T19:06:26.293

顺序也必须相同，否则不会发生覆盖

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-23T19:08:22.343

不，顺序很重要！

Java 中重写方法的规则

规则 1) 如果扩展另一个类的类定义了具有相同名称和参数列表的方法，则称该方法被覆盖。

规则 2) 基类中定义的方法在派生类中应该是可见的。如果不是这样，派生类中的方法将不会被视为重写版本，而是将被视为普通方法。

规则 3) 方法名称和参数列表对于覆盖和被覆盖的方法应该是相同的。但是返回类型可以是协变的。这意味着如果超类中方法的返回类型是Map，那么同一个方法的返回类型可以是HashMap。

规则 4）覆盖方法（在派生类中）的访问说明符不应比覆盖方法（在基类中）的访问说明符更具限制性。这意味着如果基类方法的访问说明符受到保护，那么派生类方法的访问说明符不应是默认或私有的，但可以是受保护的、公共的。各种说明符的可见性增加的顺序是：

私有的、默认的、受保护的、公共的

规则 5) 派生类方法中指定的异常应该是相同的或者是它们的子类。因此，如果基类方法在 throws 子句中将异常指定为 IOException，则派生类方法可以将异常指定为 FileNotFoundException、IOException 但不是 Exception。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T19:06:09.807

顺序很重要。如果订单不同，则签名不同。 `public void foo(int x, Object y)` 不能被覆盖 `public void foo(Object y, int x)`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-23T19:09:45.447

如果顺序不同，编译器将无法找到该方法，并且您将收到一条错误消息

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-06-28T10:45:19.640

请注意，当您使用多个参数时，方法调用必须具有与参数数量相同的参数，并且参数必须以相同的顺序传递。

来源：https://www.w3schools.com/java/java_methods_param.asp

# jquery - 在存储文本变量之前排除 DOM 元素

> ID：16177220
> 
> 赞同：0
> 
> 时间：2013-04-23T19:04:28.060
> 
> 标签：jquery, selector, each

我将 n 个整个 DOM 元素存储在一个变量中，我需要从变量中删除一个子元素。

我正在遍历所有`tr`元素，如下所示：

```
$("#directionsPanel tr").each(function(index){
      var excludeDistance = $(this).text();
}); 
```

但这是有问题的。我想`tr`在将其文本存储在变量中之前从 div 中删除它。以下是我正在循环的 tr 的格式：

```
<tr>
    <td>4.</td>
    <td>here is text</td>
    <td>
        <div class="adp-distance">0.7 mi</div>
    </td>
</tr> 
```

我想将整个存储`tr`为一个变量，不`div`包括`.adp-distance`. 我正在寻找的结果是`4\. here is text`

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:07:35.423

像这样的东西？

```
 var excludeDistance = $(this).clone().find('div.adp-distance').remove().end().text(); 
```

# exception-handling - C++ Builder 5 中的 VCL 异常

> ID：16177223
> 
> 赞同：0
> 
> 时间：2013-04-23T19:04:31.457
> 
> 标签：exception-handling, c++builder, vcl, c++builder-5

我正在尝试控制代码中引发的异常，但是此示例在 C++ Builder 5 下无法正常工作。

```
void __fastcall TForm1::Button1Click(TObject *Sender)
{ 
    try
    {
         throw Exception("NoNumber");
    }
    catch(Exception& E)
    {
        // but we never get the LALAL message
        ShowMessage("LALAL");
    }
} 
```

为什么引发异常时永远不会到达 catch 块？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T19:30:40.860

`const`首先，您应该通过引用来捕获异常：

```
catch(const Exception& E) 
```

这允许编译器发出稍微更有效的代码来管理异常。但是，仅此一项并不能阻止异常被捕获。

如果您在调试器中运行应用程序，请记住调试器将首先捕获异常，因此您必须通过按 F9 或“运行”工具栏按钮告诉调试器将异常传递回您的应用程序以进行正常处理，或者将调试器配置为忽略异常。

如果您在调试器之外运行应用程序，那么您显示的代码没有任何问题，可以防止`catch`在正常情况下捕获异常。

我使用 BCB5 多年，这种类型的代码对我来说一直很好用（尽管我总是使用`const`.

# c# - 在 List<> 中查找包含值的元素

> ID：16177225
> 
> 赞同：31
> 
> 时间：2013-04-23T19:04:31.593
> 
> 标签：c#, .net, linq, list

我有一个`List<MyClass> MyList`地方

```
public class MyClass
{
    public string name { get; set; }
    public string value { get; set; }
} 
```

给定一个名字，我想得到相应的值。我目前将其实现为：

```
MyList[MyList.FindIndex(item => String.Compare(item.name, "foo", 0) == 0)].value 
```

有没有更清洁的方法来做到这一点？

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2013-04-23T19:06:06.833

要么使用 LINQ：

```
var value = MyList.First(item => item.name == "foo").value; 
```

（当然，这只会找到第一个匹配项。有很多选择。）

或使用[`Find`](http://msdn.microsoft.com/en-gb/library/x0b5b5bc.aspx)代替`FindIndex`：

```
var value = MyList.Find(item => item.name == "foo").value; 
```

不过，我强烈建议使用 LINQ——如今这是一种更加惯用的方法。

（我还建议遵循 .NET 命名约定。）

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-23T19:05:25.417

您可以使用`Where`来过滤并`Select`获得所需的值。

```
MyList.Where(i=>i.name == yourName).Select(j=>j.value); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-03-12T12:04:28.220

我将`.Equals()`用于比较而不是`==`.

像这样：

```
MyClass item = MyList.Find(item => item.name.Equals("foo")); 
```

特别是因为它为您提供了像 StringComparison 这样的选项，这太棒了。例子：

```
MyClass item = MyList.Find(item => item.name.Equals("foo", StringComparison.InvariantCultureIgnoreCase); 
```

这使您的代码可以忽略特殊字符，大写和小写。还有更多选择。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-04-23T19:26:33.600

使用函数 Find 是更清洁的方式。

```
MyClass item = MyList.Find(item => item.name == "foo");
if (item != null) // check item isn't null
{
 ....
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-04-23T19:06:32.690

[`Enumerable.First`](http://msdn.microsoft.com/en-us/library/bb535050.aspx)返回元素而不是索引。在这两种情况下，如果列表中没有出现匹配的元素，您将得到一个异常（`IndexOutOfBoundsException`当您尝试在索引 -1 处获取项目时，您的原始代码将抛出一个，但`First`会抛出一个`InvalidOperationException`）。

```
MyList.First(item => string.Equals("foo", item.name)).value 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2020-04-04T14:39:47.943

嗨，身体很晚，但我正在写

如果（mylist.contains（值））{}

# regex - 正则表达式匹配未知的字母数字字符数

> ID：16177231
> 
> 赞同：2
> 
> 时间：2013-04-23T19:04:59.473
> 
> 标签：regex, linux, path

我正在开发一个删除 linux 机器上文件的项目，我认为使用正则表达式模式选择某些文件然后删除它们是要走的路。我正在尝试匹配以下内容

```
abc_(字母数字)_(字母数字)_(两位字母数字范围)(0到4个字符之间的任意字母数字)_a.zip

```

或者例如`abc_1_2_(12-50)****_a.zip`，星星可以是任何数字。我很确定我可以自己弄清楚大部分这个正则表达式，但是有什么方法可以匹配之前的任意数量的随机数`_a.zip`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T19:22:07.250

You're looking for * or +. * is zero or more occurrences, + is one or more. You'll have to finagle it a bit if you have a different requirement than that.

I'm a bit rusty on regex, but I believe something along the lines of

```
abc_[0-9]_[0-9]_([0-9][0-9]-[0-9][0-9])[0-9]+_a\.zip 
```

is what you're looking for.

# android - 如何在 Android 中获取用户的家庭/工作位置

> ID：16177235
> 
> 赞同：26
> 
> 时间：2013-04-23T19:05:03.563
> 
> 标签：android, api, maps, location, coordinates

我正在开发一个应用程序，为用户提供“信息”项目的快速列​​表，但我想设置一个选项，以便他在离开家或工作时收到这些项目作为通知。

我注意到（现在在我的设备上使用谷歌）他们可以告诉用户居住和工作的地方，以便他们可以在您离开或到达其中一个地方时向您推送通知（一种如果这样然后那样）。

有什么方法可以获取 Google Now（它们来自谷歌地图）用于此的坐标（纬度和经度）？我的意思是（GoogleMapsApi > GetFavorite Locations > Get Home Location > Get coordinates > use them in my app）。

如果有，您能否指出一个示例、教程或执行此操作的代码。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-09-04T14:47:16.187

您可以使用一个名为[Neura](https://dev.theneura.com/)的免费 sdk ，它有一个学习阶段，用于检测您的重要场所，例如家庭、工作场所、健身房、杂货店、餐馆等。

另外，还有一个很大的好处 - 当您的用户到达/离开您预先定义的特定位置时，它可以通知您的应用程序。

这完全符合您的需求，对于这个例子，让我们谈谈 home ：

1.  寻找你的家：
    *   Neura [sdk](https://dev.theneura.com/docs/guide/android/setup)会在几天内检测到您的家，因为系统需要了解您的习惯和行踪。所以，当你在一个地方睡了几天，也在那里闲逛时，与一个地方的设备互动 -> 有一个明确的迹象表明这个地方就是你的家。
    *   如果你不想等几天，你也可以向你的用户显示一个对话框，告诉他设置他的家，我不得不承认，这不是很聪明，但是有了这个 sdk，你可以[向你的用户展示一个](http://docs.theneura.com/android/com/neura/standalonesdk/service/NeuraApiClient.html#getMissingDataForEvent-java.lang.String-com.neura.resources.data.PickerCallback-)挑选者要求他选择他的家 [。](http://docs.theneura.com/android/com/neura/standalonesdk/service/NeuraApiClient.html#getMissingDataForEvent-java.lang.String-com.neura.resources.data.PickerCallback-)
2.  例如，您可以要求[Neura 通知](https://dev.theneura.com/docs/guide/android/pushnotification)您的用户（通过[Google Cloud Messaging](https://developers.google.com/cloud-messaging/)）当他到家时。
3.  当您收到“userArrivedHome”推送时显示您的信息列表。

**您可以在 git 上查看这个项目，完全按照我的描述进行操作：**

1.  [查找您的用户家庭住址](https://github.com/NeuraLabs/DetectMyHomeAddressAndroid)
2.  [当用户到达/离开工作](https://github.com/NeuraLabs/MuteAtWorkAndroid)时，分别将电话静音/取消静音。
3.  [当用户到达/离开家](https://github.com/NeuraLabs/HomeAndAwayAndroid)时接收事件。

随意接受这些项目并随心所欲地做。

为了找到您的用户家庭地址项目，以下是应用程序的结果： [![home_detection](https://i.stack.imgur.com/XXacT.png)](https://i.stack.imgur.com/XXacT.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-12T20:08:26.997

您可以检测 Wifi 并将它们分配到一个地方（家庭/工作）

（我从未尝试过这样的事情，但这可能会有所帮助： http: [//developer.android.com/reference/android/net/wifi/WifiManager.html#startScan()](http://developer.android.com/reference/android/net/wifi/WifiManager.html#startScan())， http: [//developer.android.com/reference /android/net/wifi/WifiManager.html#getScanResults()](http://developer.android.com/reference/android/net/wifi/WifiManager.html#getScanResults()) )

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-13T15:44:55.720

我认为您无法从 Google API 获取信息。正如@surender8388 在评论中提到的那样，唯一的方法是使用位置和时间。

如果您不想使用 GPS，ACCESS_COARSE_LOCATION 是一个不错的选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-13T09:43:21.227

好吧，Google Now 和 Waze 一样使用复杂的算法。您还会注意到，Google Now 会在一段时间后询问您某个位置是否重要。它查看用户经常花费大量时间的地方。其中一个肯定会在家，另一个肯定会在工作。只需在 4.2 中询问便宜的位置，然后查看用户趋势。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-04T12:52:15.677

谷歌即时的原因是节省您访问一个地方的时间和次数，同时使用同一地点和无线网络。从这些数据中，当他们达到一定的确定性时，询问用户是否要将其分配为家庭/工作。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-06-04T13:51:45.437

您可以尝试使用新的 API 来获取位置（fused-provider），并且可以使用地理围栏。

[Google IO (fused-provider)](https://www.youtube.com/watch?v=Bte_GHuxUGc)

[官方文档地理围栏](https://developer.android.com/training/location/geofencing.html)

# xaml - XAML 中的 ListView 间距

> ID：16177236
> 
> 赞同：1
> 
> 时间：2013-04-23T19:05:06.430
> 
> 标签：xaml, windows-8, microsoft-metro

所以，我在列表视图中遇到间距问题，这是我的代码：

```
 <ListView Width="300" ItemsSource="{Binding ChosenDepartment.HoursList}" Grid.Row="1" Grid.Column="1" Margin="100,0,0,0" IsItemClickEnabled="False" SelectionMode="None">
            <ListView.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Width="125" Text="{Binding Day}" Style="{StaticResource BasicTextStyle}" FontWeight="Bold"/>
                        <TextBlock Width="160" Text="{Binding Time}" Style="{StaticResource BasicTextStyle}"/>
                    </StackPanel>
                </DataTemplate>
            </ListView.ItemTemplate>
            <ListView.ItemContainerStyle>
                <Style TargetType="ListViewItem">
                    <Setter Property="Padding" Value="0"/>
                    <Setter Property="Margin" Value="0"/>
                </Style>
            </ListView.ItemContainerStyle>
        </ListView> 
```

无论我做什么，中间都有`StackPanel`间距`ListItems`。足够的空间容纳两行文本。事实上，如果 a 中的文本`TextBlock`分成两行，它就可以`ListViewItem`完美地填充。

我可以调整边距，`Padding`但`TextBlocks`它什么也没做。影响项目高度的唯一方法`ListView`是，如果我将 height 属性添加到`ItemContainerStyle`. 如果我硬编码 a `Height`，它会影响它，但当然，我不想硬编码`Height`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T20:01:40.833

ListViewItem 在其模板中具有硬编码的边距，以适应您选择它们​​时添加的边框和视觉指示（通过右键单击它们或用手指向下滑动它们）。

如果要删除它们，则需要在 Blend 中编辑它们的模板：右键单击 ListView，然后选择**Edit Additionnal Templates > Edit Generated Item Container (ItemContainerStyle) > Edit a copy...**并修改模板。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T20:39:10.380

Jeremy 的回应使我走上了正确的道路，但最终我发现了另一个控件`ItemsControl`，它没有任何绒毛，`ListView`正是我正在寻找的。

# python - Python：导入模块而不执行脚本

> ID：16177238
> 
> 赞同：4
> 
> 时间：2013-04-23T19:05:13.770
> 
> 标签：python, import

我看了一个[类似](https://stackoverflow.com/questions/11860272/import-class-without-executing-py-it-is-in)的问题，但它并没有真正回答我的问题。假设我有以下代码（过于简化以仅突出显示我的问题）。

```
class A:
    def __init__(self,x):
        self.val = x

a = A(4)
print a.val 
```

此代码位于一个文件中`someones_class.py`。我现在想`A`在我的程序中导入和使用类*而不修改* `someones_class.py`. 如果我这样做`from someones_class import A`，python 仍然会执行文件中的脚本行。

问题：有没有办法只导入类`A`而不执行最后两行？

我知道这`if __name__ == '__main__'`件事，但我没有修改`someones_class.py`文件的选项，因为它是在我的程序开始执行后才获得的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T19:29:30.443

This answer is just to demonstrate that it **can** be done, but would obviously need a better solution to ensure you are including the class(es) you want to include.

```
>>> code = ast.parse(open("someones_class.py").read())
>>> code.body.pop(1)
<_ast.Assign object at 0x108c82450>
>>> code.body.pop(1)
<_ast.Print object at 0x108c82590>
>>> eval(compile(code, '', 'exec'))
>>> test = A(4)
>>> test
<__main__.A instance at 0x108c7df80> 
```

You could inspect the `code` body for the elements you want to include and remove the rest.

**NOTE:** This is a giant hack.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T19:07:41.770

不，没有办法阻止这些额外的行被执行。你能做的最好的就是阅读脚本并解析出类——用它来创建你想要的类。

这可能比您想做的工作要多得多，但是对于意志坚强的人来说，该`ast`模块可能会有所帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T19:09:21.163

不，没有办法。至少不是没有极端的诡计......也就是说，如果你愿意破解一些奇怪的“解决方案”，那么在 Python 中几乎所有事情都是可能的。

“someones_class.py”是从哪里来的？为什么你不能改变它？我的意思是，编辑文件，而不是从您的代码中更改它。你能告诉写它的人不要在顶层编写排序测试代码吗？

这里隐藏了一个关于 Python 的有趣（而且有点重要）的教训：“A 类：”不是声明。它实际上是 Python 解释器在加载文件时执行的代码。

# java - 发现以元素 'jaxrs:servicebeans' 开头的无效内容”

> ID：16177240
> 
> 赞同：0
> 
> 时间：2013-04-23T19:05:17.623
> 
> 标签：java, xml, web-services, cxf, jax-rs

我正在尝试运行 JAX-RS 服务。尝试启动 Tomcat 服务器时，出现错误“**发现以元素 'jaxrs:servicebeans' 开头的无效内容**”

详细的错误是 -

* *发现以元素 'jaxrs:servicebeans' 开头的无效内容。' { " [http://cxf.apache.org/jaxrs":executor、"http://cxf.apache.org/jaxrs":features、"http://cxf.apache.org/jaxrs](http://cxf.apache.org/jaxrs) "[之一](http://cxf.apache.org/jaxrs)[：](http://cxf.apache.org/jaxrs)绑定，“ [http://cxf.apache.org/jaxrs](http://cxf.apache.org/jaxrs) ” ：dataBinding，“ [http://cxf.apache.org/jaxrs](http://cxf.apache.org/jaxrs) ” ：inInterceptors，“ [http://cxf.apache.org/jaxrs](http://cxf.apache.org/jaxrs) ”：inFaultInterceptors， " [http://cxf.apache.org/jaxrs](http://cxf.apache.org/jaxrs) ":invoker, " [http://cxf.apache.org/jaxrs](http://cxf.apache.org/jaxrs) ":serviceFactories, " [http://cxf.apache.org/jaxrs](http://cxf.apache.org/jaxrs) ":outInterceptors, " [http ://cxf.apache。](http://cxf.apache.org/jaxrs)**" :** properties, **" [http://cxf.apache.org/jaxrs":serviceBeans](http://cxf.apache.org/jaxrs)** , " [http://cxf.apache.org/jaxrs":modelBeans](http://cxf.apache.org/jaxrs) , " [http://cxf.apache.org/jaxrs](http://cxf.apache.org/jaxrs) ":模型，“ [http://cxf.apache.org/jaxrs](http://cxf.apache.org/jaxrs) ”：providers，“ [http://cxf.apache.org/jaxrs](http://cxf.apache.org/jaxrs) ”：extensionMappings，“ [http://cxf.apache.org/jaxrs](http://cxf.apache.org/jaxrs) ”：languageMappings， " [http://cxf.apache.org/jaxrs](http://cxf.apache.org/jaxrs) ":schemaLocations, " [http://cxf.apache.org/jaxrs](http://cxf.apache.org/jaxrs) ":resourceComparator}' 是预期的。* *

我的弹簧配置文件是 -

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:addressing="http://cxf.apache.org/ws/addressing"
    xmlns:aop="http://www.springframework.org/schema/aop" xmlns:beans="http://cxf.apache.org/configuration/beans"
    xmlns:configuration="http://cxf.apache.org/transports/http/configuration"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:cxf="http://cxf.apache.org/core" xmlns:jaxrs="http://cxf.apache.org/jaxrs"
    xmlns:jaxws="http://cxf.apache.org/jaxws" xmlns:jpa="http://www.springframework.org/schema/data/jpa"
    xmlns:p="http://www.springframework.org/schema/p" xmlns:parameterized-types="http://cxf.apache.org/configuration/parameterized-types"
    xmlns:soap="http://cxf.apache.org/bindings/soap" xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:util="http://www.springframework.org/schema/util" xmlns:jee="http://www.springframework.org/schema/jee"
    xmlns:webservice="http://sf.icptp.springextensions/schema/webservice" 
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://cxf.apache.org/ws/addressing http://cxf.apache.org/schemas/ws/addressing.xsd
        http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.1.xsd
        http://cxf.apache.org/configuration/beans http://cxf.apache.org/schemas/configuration/cxf-beans.xsd
        http://cxf.apache.org/transports/http/configuration http://cxf.apache.org/schemas/configuration/http-conf.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd
        http://cxf.apache.org/core http://cxf.apache.org/schemas/core.xsd
        http://cxf.apache.org/jaxrs http://cxf.apache.org/schemas/jaxrs.xsd
        http://cxf.apache.org/jaxws http://cxf.apache.org/schemas/jaxws.xsd
        http://cxf.apache.org/configuration/parameterized-types http://cxf.apache.org/schemas/configuration/parameterized-types.xsd
        http://cxf.apache.org/bindings/soap http://cxf.apache.org/schemas/configuration/soap.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
        http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.1.xsd 
        http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-2.0.xsd
        http://sf.icptp.springextensions/schema/webservice http://sf.icptp.springextensions/schema/webservice/webservice.xsd" >

    <import resource="classpath:META-INF/cxf/cxf.xml" />
    <import resource="classpath:META-INF/cxf/cxf-extension-jaxrs-binding.xml" />
    <import resource="classpath:META-INF/cxf/cxf-servlet.xml" />

    <bean id="order" class="com.example.rest.OrderInfoImpl" />

    <jaxrs:server address="/" id="connectionService">
        <jaxrs:servicebeans>
            <ref bean="order"></ref>
        </jaxrs:servicebeans>
        <jaxrs:extensionmappings>
            <entry key="xml" value="application/xml" ></entry>
        </jaxrs:extensionmappings>
    </jaxrs:server>

</beans> 
```

我无法弄清楚原因，为什么它无法识别**jaxrs:server标记内的“** **jaxrs:servicebeans** ”标记。我不确定**cxf-rt-frontend-jaxrs**的版本是否有问题；虽然我确实尝试了 2.5.2 和 2.7.3 版本。

 ***** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T02:24:54.503

该文件区分大小写。将 servicebeans 替换为 serviceBeans。****

# javascript - 有什么方法可以将构造函数分发到两个文件？

> ID：16177242
> 
> 赞同：0
> 
> 时间：2013-04-23T19:05:20.580
> 
> 标签：javascript

我正在研究应用程序的数据核心。我需要在一个命名空间中构建一些集合，如下所示：

```
var Core = function(){
   this.firstCollection = [];
   $.extend(true, this.firstCollection,{
      method1: function(){
         alert("working with firstCollection");
      }
};
var core = new Core(); 
```

有什么优雅的方法，如何将构造函数分发到单独的文件中以便更好地维护？我想使用纯 JavaScript，没有编译过这样的 Coffee/Dart。

分发到单独的文件中意味着这样的解决方法：file1：

```
var obj = obj||{};
obj.firstAttribute = "first"; 
```

文件2

```
var obj = obj||{};
obj.secondAttribute = "second"; 
```

# entity-framework - System.Linq.Dynamic.DynamicExpression.ParseLambda 用于对象上具有扩展方法和方法的表达式

> ID：16177245
> 
> 赞同：2
> 
> 时间：2013-04-23T19:05:23.073
> 
> 标签：entity-framework, lambda, dynamic-linq

我正在使用 System.Linq.Dynamic 库中的 System.Linq.Dynamic.DynamicExpression 将字符串解析为实体上的表达式。如果我的表达式字符串包含对象上的公共属性，那么它工作正常，但是如果我定义我的表达式字符串包含对象上的方法或扩展方法，我会从 parselambda 中得到一个异常，说“类型'中不存在适用的方法'' （在索引 0 处）”。谁能告诉我是否有办法在字符串表达式中的对象上使用扩展方法或公共方法。

谢谢，阿杰

# jquery - 推荐一个 jQuery 响应式轮播/滑块

> ID：16177246
> 
> 赞同：17
> 
> 时间：2013-04-23T19:05:24.047
> 
> 标签：jquery, carousel

我正在寻找一个现成的 jQuery 插件（免费或付费），它可以让我创建带有触摸支持的“响应式轮播”。

它应该工作的方式是在站点中间显示当前图像（定义图像的宽度和高度，固定所有图像，图像垂直居中，轮播/滑块的高度不随浏览器宽度而变化），然后部分或完全可见右图，左图。当浏览器变大时，那些“剪掉”的图片会越来越多，如果浏览器足够大，3张照片会被完全看清，下一张在右边被剪掉，上一张在左边被剪掉。图像看起来像幻灯片，中间有一个图像，在浏览器窗口允许的情况下，其他图像在左右可见。

这张图片显示了这个轮播在不同的浏览器宽度下应该如何表现......最暗的框是水平对齐的照片，它们之外的较亮的框显示不同的浏览器窗口高度： ![在此处输入图像描述](https://i.stack.imgur.com/6aZgm.jpg)

对于那些在视觉上遇到问题的人，接下来的屏幕会显示宽度浏览器窗口宽度 1920 像素、1800 像素、1600 像素和 1400 像素的外观。这些是来自整个网站的作物，充满了浏览器的整个宽度。 ![在此处输入图像描述](https://i.stack.imgur.com/GRxSE.jpg) ![在此处输入图像描述](https://i.stack.imgur.com/5KFU7.jpg) ![在此处输入图像描述](https://i.stack.imgur.com/pu3CK.jpg) ![在此处输入图像描述](https://i.stack.imgur.com/2fNHd.jpg)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-01T18:49:42.867

最近几天我一直在寻找非常相似的东西。到目前为止我的最爱

**皇家滑块**

[http://dimsemenov.com/plugins/royal-slider/visible-nearby/](http://dimsemenov.com/plugins/royal-slider/visible-nearby/)

这个得到了一切。触摸支持，高度可定制，响应式布局..您应该立即运行。价格标签为 12 美元。

**卡罗弗雷德塞尔**

也非常强大，支持触摸，但不像皇家滑块那样无忧无虑和优雅，但话又说回来，它是免费的..他们有一个非常好的展示页面，其中包含基于他们插件的各种轮播..

这个可能有点意思.. [http://coolcarousels.frebsite.nl/c/2/](http://coolcarousels.frebsite.nl/c/2/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-26T22:55:13.557

您可以使用：

*   bxSlider：[http ://bxslider.com/](http://bxslider.com/)
*   弹性滑块：[http ://www.woothemes.com/flexslider/](http://www.woothemes.com/flexslider/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T19:23:33.370

I would use this one. [http://tympanus.net/codrops/2012/03/15/parallax-content-slider-with-css3-and-jquery/](http://tympanus.net/codrops/2012/03/15/parallax-content-slider-with-css3-and-jquery/) it uses css3 animations and because it's pure css you can use @media queries to change the applied css on the slider as the screen size changes.

You can see more on media queries by looking at this boilerplate [http://www.getskeleton.com/](http://www.getskeleton.com/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-01T12:32:08.880

我最近自己搜索过类似的东西，发现了以下文章：[http ://www.tripwiremagazine.com/2012/12/jquery-carousel.html](http://www.tripwiremagazine.com/2012/12/jquery-carousel.html)

查看文章及其网站上提供的示例并将它们与您的要求进行比较，我认为[http://codecanyon.net/item/icarousel/full_screen_preview/2527180](http://codecanyon.net/item/icarousel/full_screen_preview/2527180)或[http://www.bkosborne.com/jquery-feature -carousel](http://www.bkosborne.com/jquery-feature-carousel)最适合您。第一个将要求您购买它。

你应该看看第一篇文章。有可能我忽略了一些东西，或者你找到了更适合的东西......

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-05-03T09:03:43.140

在这种情况下，Wowslider 可能很有用。在 [http://wowslider.com/jquery-slider-carousel-mac-stack-demo.html上检查一次](http://wowslider.com/jquery-slider-carousel-mac-stack-demo.html)

[http://www.smoothdivscroll.com/#quickdemo](http://www.smoothdivscroll.com/#quickdemo)也提供了类似的解决方案

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-06T01:34:59.097

**滑动**看起来相当不错并且反应灵敏。它也非常流畅，支持在手机/平板电脑上滑动。

[http://swipejs.com/](http://swipejs.com/)

可能不如 Royal Slider 功能齐全，但它是免费的。

# java - 从 android 应用程序将整数传递给 web 服务

> ID：16177253
> 
> 赞同：0
> 
> 时间：2013-04-23T19:05:41.073
> 
> 标签：java, android, web-services

我有一个可以联系的 Web 服务，但我必须向 Web 服务添加一个 Skip 和 Take 整数，以限制我返回的结果数量，因为会有数百个地址。所以下面发布的是我联系webservice的android方法，但是我如何为我的android应用程序更改下面的活动代码，这样我就可以限制说十个结果，第一次跳过0，然后连续跳过十个。

我的安卓活动：

```
public List<FuelStops> getFuelStops() throws URISyntaxException, ClientProtocolException, IOException, ParserConfigurationException, SAXException{
    if (android.os.Build.VERSION.SDK_INT > 9) {
        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
        StrictMode.setThreadPolicy(policy);
    }
    BufferedReader in = null;
    String page;
    fuelStopList = new ArrayList<FuelStops>();
    try {

        HttpClient client = new DefaultHttpClient();
        HttpGet request = new HttpGet();
        request.setURI(new URI("http://google.com/Service1.asmx/GetFuelStops"));

        HttpResponse response = client.execute(request);
        in = new BufferedReader
        (new InputStreamReader(response.getEntity().getContent()));
        StringBuffer sb = new StringBuffer("");
        String line = "";
        String NL = System.getProperty("line.separator");
        while ((line = in.readLine()) != null) {
            sb.append(line + NL);

        }
        in.close();
        page = sb.toString();
        FuelStops fuelStop=new FuelStops();
        StringBuilder addressStrBlder = new StringBuilder();
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        DocumentBuilder db = dbf.newDocumentBuilder();
        Document doc = db.parse(new InputSource(new StringReader(page)));
        // normalize the document
        doc.getDocumentElement().normalize();
        // get the root node
        NodeList nodeList = doc.getElementsByTagName("FuelStop");
        Node node=nodeList.item(0);
        // the  node has three child nodes
        for (int n = 0; n < nodeList.getLength(); n++) {

            for (int i = 0; i < node.getChildNodes().getLength(); i++) {
                Node temp=node.getChildNodes().item(i);
                if(temp.getNodeName().equalsIgnoreCase("Physical_Address_Street")){
                    addressStrBlder.append(temp.getTextContent());
                }
                else if(temp.getNodeName().equalsIgnoreCase("Physical_Address_Local")){
                    addressStrBlder.append(", " + temp.getTextContent());
                }
                else if(temp.getNodeName().equalsIgnoreCase("Physical_Address_State")){
                    addressStrBlder.append(", " + temp.getTextContent());
                }
                else if(temp.getNodeName().equalsIgnoreCase("Physical_Address_Zip")){
                    addressStrBlder.append(", " + temp.getTextContent());
                    fuelStop.setAddress(addressStrBlder.toString());
                }
                else if(temp.getNodeName().equalsIgnoreCase("Phone_Number")){
                    fuelStop.setPhoneNum(temp.getTextContent());
                    fuelStopList.add(fuelStop);
                }

            }
            //Log.e("Fuel Stop", fuelStop.toString());
        }

        //System.out.println(page);
        } finally {
        if (in != null) {
            try {
                in.close();
                } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }
    return fuelStopList;
} 
```

我的网络服务 ![在此处输入图像描述](https://i.stack.imgur.com/z9AIe.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:13:28.253

如果您的 Web 服务采用标准 HTTP 请求参数，您只需将它们添加到 URL：

```
request.setURI(new URI("http://google.com/Service1.asmx/GetFuelStops?skip=10&take=10")); 
```

这适用于 GET 或 POST，您需要使用 HttpPost 类（而不是 HttpGet）并执行以下操作：

```
HttpPost request = new HttpPost("http://google.com/Service1.asmx/GetFuelStops");

// Add your data
List<NameValuePair> nvps = new ArrayList<NameValuePair>(2);
nvps.add(new BasicNameValuePair("skip", "10"));
nvps.add(new BasicNameValuePair("take", "10"));
request.setEntity(new UrlEncodedFormEntity(nvps)); 
```

# image - 升迁 Wordpress 特色图像缩略图 / 始终将 GIF 转换为 JPG

> ID：16177254
> 
> 赞同：0
> 
> 时间：2013-04-23T19:05:44.587
> 
> 标签：image, wordpress, thumbnails

这个有点两部分，因为任何一个都可以解决我的问题。

**精选图像时升级小于指定的缩略图大小时的特色图像**

如果上传的文件小于设置的最小缩略图尺寸 - 例如缩略图尺寸为 150x150 时的 100x100 图像，Wordpress 不会强制放大。除了使用 Imagemagick 之类的外部资源之外，还有什么方法可以强制升迁？

**在每个实例中将上传的 GIF 转换为 JPG**

强制升迁的另一种方法是为任何上传的 GIF 文件创建 JPG 替代品。目前，大于缩略图大小的 GIF（例如 200x200 的 GIF，当缩略图大小为 150x150 时）会自动生成静态 JPG 缩略图。

**我正在以编程方式生成缩略图**：

```
// Inserts metadata and creates thumbnails for uploaded file
$attach_id = wp_insert_attachment($attachmentMeta, $newFile, $post_id);
$attach_data = wp_generate_attachment_metadata($attach_id, $newFile);
wp_update_attachment_metadata($attach_id, $attach_data);

// Adds the thumbnail to the post
update_post_meta($post_id, '_thumbnail_id', $attach_id); 
```

虽然我可以使用 Imagemagick 完成所有这些工作，但我更喜欢使用 Wordpress 自己的功能来完成它。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-05T09:15:10.647

从 Wordpress 3.6 开始，我认为没有内置方法可以“放大”输入图像，以便在源图像太小的情况下适合/填充请求的缩略图大小。

然而，缩小规模很简单。任何寻求此问题解决方案的人现在都可能知道，许多用户似乎建议/混淆“add_image_size”作为此类问题的适当解决方案。这不是*完整*的解决方案。

请务必注意，如果源图像的宽度或高度小于预定义的缩略图/图像大小尺寸（即，通过 add_image_size 或通过设置指定的尺寸），则 WP 将返回原始源图像而不是缩略图. 显然，这可能令人沮丧。

许多其他用户建议只使用 CSS 来达到预期的效果；例如，强制最小宽度或高度。尽管 CSS 可以在许多情况下工作，但它并不适用于*所有*情况，尤其是在您处理流体或响应式布局的情况下。

下面是一个粗略的、未经测试的过滤器，用于强制缩略图始终适合所需的尺寸。把它放在你的functions.php中，它还需要在你的主题中提供[timthumb.php 。](http://code.google.com/p/timthumb/%20timthumb.php)您可能需要对其进行修改以适应您的具体情况，也许可以通过多种方式对其进行改进。

```
function my_image_downsize($src_data, $thumbnail_id, $size) {
    static $omit = false;
    global $_wp_additional_image_sizes;

    if($omit) {
        return $src_data;
    }

    $omit = true;

    $thumbnail_src_data = wp_get_attachment_image_src($thumbnail_id, $size);

    $img_url = $thumbnail_src_data[0];
    $width = $thumbnail_src_data[1];
    $height = $thumbnail_src_data[2];

    if(is_string($size) && isset($_wp_additional_image_sizes[$size]) && ($width < $_wp_additional_image_sizes[$size]['width'] || $height < $_wp_additional_image_sizes[$size]['height'])) {
        // "Upsize" the image as needed, to meet the minimum dimension of the thumbnail.
        $width = $_wp_additional_image_sizes[$size]['width'];
        $height = $_wp_additional_image_sizes[$size]['height'];
        $img_url = get_stylesheet_directory_uri() .'/timthumb.php?src='.$img_url.'&w='.$width.'&h='.$height.'&zc=2&cc=000000'; // TODO: replace timthumb with WP's native media class
    } else {
        $omit = false;
        return $src_data;
    }

    $omit = false;

    return array($img_url, $width, $height);
}
add_filter('image_downsize', 'my_image_downsize', 10, 3); 
```

# android - 未经检查地调用 ArrayAdapter 的 super

> ID：16177255
> 
> 赞同：9
> 
> 时间：2013-04-23T19:05:49.953
> 
> 标签：android

我已经实现了一个自定义阵列适配器，虽然该应用程序运行良好，但在超级线路上出现此错误：

**未经检查地调用 ArrayAdapter(Context, int, T[]) 作为原始类型 Android.Widget.ArrayAdapter 的成员**

这是我的自定义 ArrayAdapter：

```
class MyArrayAdapter extends ArrayAdapter {

    public MyArrayAdapter(Context context, int textViewResourceId, Object[] objects)
    {
        super(context, textViewResourceId, objects);
    }
    .
    .
    . 
```

**super**突出显示为错误。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-23T19:07:24.257

将您的类声明更改为：

```
class MyArrayAdapter extends ArrayAdapter<Object> 
```

顺便说一下，考虑使用更具体的东西`Object`- 它对你来说也会更方便。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T19:10:11.810

如果你看一下[ArrayAdapter 类](http://developer.android.com/reference/android/widget/ArrayAdapter.html)，它是一个泛型的`class`。因此，您必须指定将通过您的适配器操作哪种类型的数据。例如，如果您操作 Strings ：

```
class MyArrayAdapter extends ArrayAdapter<String> {
//
} 
```

# mysql - MySQL 函数 - 错误代码：1415 不允许从函数返回结果集

> ID：16177267
> 
> 赞同：10
> 
> 时间：2013-04-23T19:06:11.643
> 
> 标签：mysql, function, set

我不想返回结果集，我不知道我在这里做错了什么。MySQL 5.5

```
delimiter $$

CREATE FUNCTION CheckAccount(
    i_username varchar(50)
) RETURNS integer

BEGIN

    DECLARE v_validUserId int;
    DECLARE v_validMembership int;
    DECLARE o_Status integer;

    SELECT vvalidUserId = u.UserId
    FROM Users u
    WHERE u.Username = i_username;

    IF( v_validUserId IS NULL ) THEN
        SET o_Status = 2; -- Invalid username
    ELSE
        SET o_Status = 1; -- Good
    END IF;

    IF(o_Status != 2 ) THEN
            SELECT v_validMembership = 1
            FROM Users u
            JOIN UserMemberships um on um.UserId = u.userId
            JOIN Memberships m on m.MembershipId = um.MembershipId
            WHERE um.MembershipExpireDateTime > CURDATE()
            AND u.UserId = v_validUserId;

            IF( v_validMembership IS NULL ) THEN 
                SET o_Status = 3; -- Invalid membership
            END IF;
    END IF;

    RETURN o_status;

END $$
DELIMITER ; 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-24T01:48:34.533

我不确定您是否可以通过这种方式分配变量，请尝试使用`INTO`您的选择语句。例如：

```
SELECT 
    u.UserId INTO vvalidUserId 
FROM 
    Users u
WHERE 
    u.Username = i_username; 
```

# php - 带小数的 Where 子句

> ID：16177271
> 
> 赞同：-1
> 
> 时间：2013-04-23T19:06:30.227
> 
> 标签：php, mysql

我试图弄清楚为什么我的查询不会更新我的数据库。这就是我的 PHP 编码：

```
if($sevenhalf)  {
    $update_sevenhalf = "UPDATE xcart_class_options SET orderby='$sevenhalf' WHERE option_name='7.5'";
    mysql_query($update_sevenhalf) or die(mysql_error());
    echo $sevenhalf.'<br>';
} 
```

但是当我执行它时，它会不断尝试更新错误的字段：

```
array(63) { ["7_5"]=> string(3) "107" 
```

你可以看到问题。它应该尝试使用值 7.5 更新 option_name 的每个实例，但数组显示它正在尝试将其放置在 7_5 中。我无法弄清楚为什么它会这样做。我认为这个时期正在逃避部分线路。我没有得到任何错误，只是数组去错了地方。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:10:17.997

如果你遇到`$sevenhalf`这样的事情：

```
<input type="checkbox" name="7.5" /> 
```

那么您应该知道 PHP在填充 GPC 变量时会转换`.`为( )... 老实说，我不知道为什么，但这就是它的作用。你总是可以用它来取回它。`_``$_POST['7_5']``str_replace("_",".",$sevenhalf)`

# jquery - Jquery Google map like plugin - 使用自定义地图/图像和添加标记的能力

> ID：16177273
> 
> 赞同：3
> 
> 时间：2013-04-23T19:06:33.833
> 
> 标签：jquery, google-maps, maps, customization

今天晚上我花了一段时间寻找一个关于如何使用谷歌地图和我自己的地图图像的好教程。我有一张基本上是蓝图的图像，我需要类似于谷歌地图的工作方式，您可以在其中拖动它，放大和最重要的是定位标记。

我已经看到了一些关于使用谷歌地图 API 来做这样的事情的事情，但它们都没有很好地涵盖它或者已经过时了。此外，其中很大一部分只是更改现有地图的颜色或只是将现有地图定位到其他地方，实际上并没有完全替换地图。

有谁知道这方面的任何好的教程？或者也许一个完全独立的 jQuery 插件可以实现这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T19:11:54.223

我知道两个：

*   [开放层](http://openlayers.org/)
*   [传单](http://leafletjs.com/)

它们都允许您从任意来源加载数据并像在 Google 地图中一样使用它。

# .htaccess - htaccess 规则有效，但应用于同一目录时无效

> ID：16177278
> 
> 赞同：0
> 
> 时间：2013-04-23T19:06:47.527
> 
> 标签：.htaccess

如果我使用 htaccess 代码：

```
RewriteRule ^test/(.*)/?$ /taxis/index.php?location=$1 [L,QSA,NC,R] 
```

并导航到链接：

[http://test.co.uk/test/abcde](http://test.co.uk/test/abcde)

htaccess 工作并将我转移到： [http ://test.co.uk/taxis/index.php?location=abcde](http://test.co.uk/taxis/index.php?location=abcde)

但是，我想更改重写规则，使其适用于同一目录：

```
^taxis/(.*)/?$ /taxis/index.php?location=$1 [L,QSA,NC,R] 
```

但是当我导航到链接时：

[http://test.co.uk/taxis/abcde](http://test.co.uk/taxis/abcde)

该链接不起作用并产生：

```
http://test.co.uk/taxis/index.php?location=index.php&location=index.php&location=index.php&location=index.php&location=index.php&location=index.php&location=index.php&location=index.php&location=index.php&location=index.php&location=index.php&location=index.php&location=index.php&location=index.php&location=index.php&location=index.php&location=index.php&location=index.php&location=index.php&location=index.php&location=abcde 
```

你知道我可以如何调整这个给我：

[http://test.co.uk/taxis/index.php?location=abcde](http://test.co.uk/taxis/index.php?location=abcde)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:10:02.340

您需要重写规则之前的条件，告诉它**如果 URI 已经指向资源，则不要重写**，或者只是排除规则的目标。重写引擎不断循环遍历所有规则，直到 URI 停止更改。

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^taxis/(.*)/?$ /taxis/index.php?location=$1 [L,QSA,NC,R] 
```

含义：“如果请求*不是*现有文件，**并且**请求*不是*现有目录，则应用规则”

或者排除规则的目标：

```
RewriteCond %{REQUEST_URI} !^/taxis/index\.php$
RewriteRule ^taxis/(.*)/?$ /taxis/index.php?location=$1 [L,QSA,NC,R] 
```

# python - 在python中如何添加到windows路径变量来查找可执行文件

> ID：16177285
> 
> 赞同：0
> 
> 时间：2013-04-23T19:07:11.603
> 
> 标签：python, linux, windows

我一直在寻找一种在 Windows 路径中可能未列出的文件夹中进行 python 搜索的方法。这样，如果他们决定不将其安装在 c:\program 文件下，我可以说明已安装应用程序的一些非标准位置。例如，如果 unix utils 安装在广告驱动器或其他东西上。

而不是一直修改windows路径。我想我可以读取注册表找到它的安装路径，然后将其添加到该 python 实例的搜索路径中，仍然可以找到我要查找的内容。问题是我还需要考虑具有标准命名的预定义子文件夹。

我已经搜索过，我发现的大部分内容都与修改 python 路径有关，并且 python 找到了它的模块，这对此并没有真正的用处。

我在 sys.path.append 也有一些，但真的找不到任何关于这是否适用的信息。我还阅读了 os.path 的文档，看起来 join 可能有效，但它似乎并不真正适合这种需求。

有什么我只是没有到达这里还是不可能做到的事情。

最后一件事它需要跨平台兼容。我可以找到自己的路径并根据需要添加它们，但只需要一种添加到路径的方法。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T19:34:46.887

临时添加到路径中，例如：

```
    导入操作系统
    导入系统

    如果 sys.platform == 'win32'：
        九月 = ';'
    别的：
        九月='：'

    os.environ['PATH'] += sep + r'"C:\QA\Hello World"'

```

请注意，在 Windows 上，环境变量不区分大小写，但在 UNIX 上是。这只会添加这个过程的路径，它是孩子。

当您开始运行该程序时，您需要使用一个使用 %PATH%（或 $PATH）的 shell。

```
import subprocess
proc = subprocess.Popen('hello.exe',shell=True) 
proc.wait() 
```

# c++ - 以毫秒为单位获取自纪元以来的时间，最好使用 C++11 chrono

> ID：16177295
> 
> 赞同：55
> 
> 时间：2013-04-23T19:07:54.857
> 
> 标签：c++, c++11, chrono

我想要的只是以毫秒为单位获取自纪元以来的时间并将其存储在无符号长整数中。

我发现[了这个相关的问题](https://stackoverflow.com/q/9089842/991425)。但老实说，这不可能是执行如此简单任务的最简单方法，不是吗？[我希望有更简单的东西，但在std::chrono 参考](http://www.cplusplus.com/reference/chrono/)中找不到任何东西。任何建议都是最受欢迎的。我不一定必须使用`std::chrono`，但我希望它独立于平台。

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2013-04-23T19:10:17.693

```
unsigned long milliseconds_since_epoch =
    std::chrono::system_clock::now().time_since_epoch() / 
    std::chrono::milliseconds(1); 
```

虽然，特别是因为您想要平台独立性，最好`unsigned long`用更可能足够大的类型替换：

*   `(unsigned) long long`
*   `std::(u)int64_t`
*   `std::chrono::milliseconds::rep`
*   `auto`

对我来说，这清楚地表明您冒着精度损失的风险（通过与整数除法类比）*和*您正在离开类型系统的安全性（通过除以键入的时间以给出无单位的数字）。然而，正如评论中所展示的，有些人会说，任何摆脱类型安全的尝试都应该伴随着故意使代码看起来很危险的尝试。如果您需要与持有这种信念的人打交道，使用它可能更简单，`duration_cast`而不是就不相关的风格选择进行争论：

```
unsigned long milliseconds_since_epoch = 
    std::chrono::duration_cast<std::chrono::milliseconds>
        (std::chrono::system_clock::now().time_since_epoch()).count(); 
```

# javascript - 在javascript中复制一个函数

> ID：16177297
> 
> 赞同：0
> 
> 时间：2013-04-23T19:08:04.150
> 
> 标签：javascript, function, duplicates

好的，抱歉，如果这是一个非常基本的软件，但我一直在为十针保龄球计分系统做一个软件，终于得到了计分系统的所有功能，但这仅适用于一个玩家，我正在尝试复制函数为每个玩家提供一个函数（最多六个玩家）正如我所说的部分代码在那里但是当我尝试复制函数并重命名变量等时它会破坏代码，任何帮助将不胜感激！

```
 <html>
    <head>
    <title>Bowling Score Calculator</title>
    <script>
    onebowl = new Array(21);
    twobowl = new Array(21);
    threebowl = new Array(21);
    fourbowl = new Array(21);
    fivebowl = new Array(21);
    sixbowl = new Array(21);
    score = new Array(11);
    scoretwo = new Array(11);
    scorethree = new Array(11);
    scorefour = new Array(11);
    scorefive = new Array(11);
    scoresix = new Array(11);

    function runScript() {
    store();
    valid = verify();
    if(valid) {calculate();calculatetwo();print();}}

    function store(){
    onebowl[0]=document.score.pl1bowl1.value;
    onebowl[1]=document.score.pl1bowl2.value;
    onebowl[2]=document.score.pl1bowl3.value;
    onebowl[3]=document.score.pl1bowl4.value;
    onebowl[4]=document.score.pl1bowl5.value;
    onebowl[5]=document.score.pl1bowl6.value;
    onebowl[6]=document.score.pl1bowl7.value;
    onebowl[7]=document.score.pl1bowl8.value;
    onebowl[8]=document.score.pl1bowl9.value;
    onebowl[9]=document.score.pl1bowl10.value;
    onebowl[10]=document.score.pl1bowl11.value;
    onebowl[11]=document.score.pl1bowl12.value;
    onebowl[12]=document.score.pl1bowl13.value;
    onebowl[13]=document.score.pl1bowl14.value;
    onebowl[14]=document.score.pl1bowl15.value;
    onebowl[15]=document.score.pl1bowl16.value;
    onebowl[16]=document.score.pl1bowl17.value;
    onebowl[17]=document.score.pl1bowl18.value;
    onebowl[18]=document.score.pl1bowl19.value;
    onebowl[19]=document.score.pl1bowl20.value;
    onebowl[20]=document.score.pl1bowl21.value;

    twobowl[0]=document.score.pl2bowl1.value;
    twobowl[1]=document.score.pl2bowl2.value;
    twobowl[2]=document.score.pl2bowl3.value;
twobowl[3]=document.score.pl2bowl4.value;
twobowl[4]=document.score.pl2bowl5.value;
twobowl[5]=document.score.pl2bowl6.value;
twobowl[6]=document.score.pl2bowl7.value;
twobowl[7]=document.score.pl2bowl8.value;
twobowl[8]=document.score.pl2bowl9.value;
twobowl[9]=document.score.pl2bowl10.value;
twobowl[10]=document.score.pl2bowl11.value;
twobowl[11]=document.score.pl2bowl12.value;
twobowl[12]=document.score.pl2bowl13.value;
twobowl[13]=document.score.pl2bowl14.value;
twobowl[14]=document.score.pl2bowl15.value;
twobowl[15]=document.score.pl2bowl16.value;
twobowl[16]=document.score.pl2bowl17.value;
twobowl[17]=document.score.pl2bowl18.value;
twobowl[18]=document.score.pl2bowl19.value;
twobowl[19]=document.score.pl2bowl20.value;
twobowl[20]=document.score.pl2bowl21.value;

threebowl[0]=document.score.pl3bowl1.value;
threebowl[1]=document.score.pl3bowl2.value;
threebowl[2]=document.score.pl3bowl3.value;
threebowl[3]=document.score.pl3bowl4.value;
threebowl[4]=document.score.pl3bowl5.value;
threebowl[5]=document.score.pl3bowl6.value;
threebowl[6]=document.score.pl3bowl7.value;
threebowl[7]=document.score.pl3bowl8.value;
threebowl[8]=document.score.pl3bowl9.value;
threebowl[9]=document.score.pl3bowl10.value;
threebowl[10]=document.score.pl3bowl11.value;
threebowl[11]=document.score.pl3bowl12.value;
threebowl[12]=document.score.pl3bowl13.value;
threebowl[13]=document.score.pl3bowl14.value;
threebowl[14]=document.score.pl3bowl15.value;
threebowl[15]=document.score.pl3bowl16.value;
threebowl[16]=document.score.pl3bowl17.value;
threebowl[17]=document.score.pl3bowl18.value;
threebowl[18]=document.score.pl3bowl19.value;
threebowl[19]=document.score.pl3bowl20.value;
threebowl[20]=document.score.pl3bowl21.value;

fourbowl[0]=document.score.pl4bowl1.value;
fourbowl[1]=document.score.pl4bowl2.value;
fourbowl[2]=document.score.pl4bowl3.value;
fourbowl[3]=document.score.pl4bowl4.value;
fourbowl[4]=document.score.pl4bowl5.value;
fourbowl[5]=document.score.pl4bowl6.value;
fourbowl[6]=document.score.pl4bowl7.value;
fourbowl[7]=document.score.pl4bowl8.value;
fourbowl[8]=document.score.pl4bowl9.value;
fourbowl[9]=document.score.pl4bowl10.value;
fourbowl[10]=document.score.pl4bowl11.value;
fourbowl[11]=document.score.pl4bowl12.value;
fourbowl[12]=document.score.pl4bowl13.value;
fourbowl[13]=document.score.pl4bowl14.value;
fourbowl[14]=document.score.pl4bowl15.value;
fourbowl[15]=document.score.pl4bowl16.value;
fourbowl[16]=document.score.pl4bowl17.value;
fourbowl[17]=document.score.pl4bowl18.value;
fourbowl[18]=document.score.pl4bowl19.value;
fourbowl[19]=document.score.pl4bowl20.value;
fourbowl[20]=document.score.pl4bowl21.value;

fivebowl[0]=document.score.pl5bowl1.value;
fivebowl[1]=document.score.pl5bowl2.value;
fivebowl[2]=document.score.pl5bowl3.value;
fivebowl[3]=document.score.pl5bowl4.value;
fivebowl[4]=document.score.pl5bowl5.value;
fivebowl[5]=document.score.pl5bowl6.value;
fivebowl[6]=document.score.pl5bowl7.value;
fivebowl[7]=document.score.pl5bowl8.value;
fivebowl[8]=document.score.pl5bowl9.value;
fivebowl[9]=document.score.pl5bowl10.value;
fivebowl[10]=document.score.pl5bowl11.value;
fivebowl[11]=document.score.pl5bowl12.value;
fivebowl[12]=document.score.pl5bowl13.value;
fivebowl[13]=document.score.pl5bowl14.value;
fivebowl[14]=document.score.pl5bowl15.value;
fivebowl[15]=document.score.pl5bowl16.value;
fivebowl[16]=document.score.pl5bowl17.value;
fivebowl[17]=document.score.pl5bowl18.value;
fivebowl[18]=document.score.pl5bowl19.value;
fivebowl[19]=document.score.pl5bowl20.value;
fivebowl[20]=document.score.pl5bowl21.value;

sixbowl[0]=document.score.pl6bowl1.value;
sixbowl[1]=document.score.pl6bowl2.value;
sixbowl[2]=document.score.pl6bowl3.value;
sixbowl[3]=document.score.pl6bowl4.value;
sixbowl[4]=document.score.pl6bowl5.value;
sixbowl[5]=document.score.pl6bowl6.value;
sixbowl[6]=document.score.pl6bowl7.value;
sixbowl[7]=document.score.pl6bowl8.value;
sixbowl[8]=document.score.pl6bowl9.value;
sixbowl[9]=document.score.pl6bowl10.value;
sixbowl[10]=document.score.pl6bowl11.value;
sixbowl[11]=document.score.pl6bowl12.value;
sixbowl[12]=document.score.pl6bowl13.value;
sixbowl[13]=document.score.pl6bowl14.value;
sixbowl[14]=document.score.pl6bowl15.value;
sixbowl[15]=document.score.pl6bowl16.value;
sixbowl[16]=document.score.pl6bowl17.value;
sixbowl[17]=document.score.pl6bowl18.value;
sixbowl[18]=document.score.pl6bowl19.value;
sixbowl[19]=document.score.pl6bowl20.value;
sixbowl[20]=document.score.pl6bowl21.value;
}

function verify(){
//for first 9 frames
for(i=0;i<=17;i+=2){
switch(onebowl[i]){//first bowl of frame
case 'x':case '0':case '1':case '2':case '3':case '4':case '5':case '6':case '7':case '8':case '9':break;
default: alert("Please enter a valid number! Make sure the total for each frame is not above 9, if a spare is scored please enter '/'");return false;}

switch(onebowl[i+1]){//second bowl of frame
case '/': if(onebowl[i] < '0' || onebowl[i] > '9'){alert("Invalid");return false;}
case '0':case '1':case '2':case '3':case '4':case '5':case '6':case '7':case '8':case '9': if(parseInt(onebowl[i]) + parseInt(onebowl[i+1]) >9){alert("Invalid");return false;}break;
default: if(onebowl[i] != 'x'){alert("Invalid");return false;}}
}

//for tenth frame
switch(onebowl[18]){//first bowl
case 'x':case '0':case '1':case '2':case '3':case '4':case '5':case '6':case '7':case '8':case '9':break;
default: alert("Invalid");return false;}

switch(onebowl[19]){//second bowl
case 'x':if(onebowl[18] != 'x'){alert("Invalid");return false;}break;
case '/':if(onebowl[18] < '0' || onebowl[18] > '9'){alert("Invalid");return false;}break;
case '0':case'1':case'2':case'3':case'4':case'5':case'6':case'7':case'8':case'9':
if(onebowl[18] != 'x'){if(parseInt(onebowl[18])+parseInt(onebowl[19])>9){alert("Invalid");return false;}}break;
default:alert("Invalid");return false;}

if(onebowl[18] != 'x' && onebowl[19] != '/')return true;

switch(onebowl[20]){//third bowl
case 'x':if(onebowl[19] != 'x' && onebowl[19] != '/'){alert("Invalid");return false;}break;
case '/':if(onebowl[19] < '0' || onebowl[19] > '9'){alert("Invalid");return false;}break;
case '0':case'1':case'2':case'3':case'4':case'5':case'6':case'7':case'8':case'9':
if(onebowl[19] != 'x' && onebowl[19] != '/'){if(parseInt(onebowl[18])+parseInt(onebowl[19])>9){alert("Invalid");return false;}}break;
default:alert("Invalid");return false;}

return true;}

function calculate(){
frame = 0;
lastFrame = 0;
for(i=0;i<8;i++){//first 8 frames
if (onebowl[2*i] == 'x'){//strike this frame
    if ((onebowl[2*i+2] == 'x') && (onebowl[2*i+4] == 'x')) //strike on next 2 bowls
        score[i] = lastFrame + 30;
    else if (onebowl[2*i+2] == 'x') //one more strike after this
        score[i] = lastFrame + 20 + parseInt(onebowl[2*i+4]);
    else if (onebowl[2*i+3] == '/') //strike followed by a spare
        score[i] = lastFrame + 20;
    else //strike followed by an open
        score[i] = lastFrame + 10 + parseInt(onebowl[2*i+2]) + parseInt(onebowl[2*i+3]);}

else if (onebowl[2*i+1] == '/'){ //spare this frame
    if (onebowl[2*i+2] == 'x') //next bowl is a strike
        score[i] = lastFrame + 20;
    else //next bowl not a strike
        score[i] = lastFrame + 10 + parseInt(onebowl[2*i+2]);}

else //open this frame
    score[i] = lastFrame + parseInt(onebowl[2*i])+parseInt(onebowl[2*i+1]);
lastFrame = score[i];
}
//9th frame
if (onebowl[16] == 'x'){//strike this frame
    if ((onebowl[18] == 'x') && (onebowl[19] == 'x'))//followed by 2 strikes in tenth
        score[8] = lastFrame + 30;
    else if (onebowl[18] == 'x')//followed by 1 strike in the tenth
        score[8] = lastFrame + 20 + parseInt(onebowl[19]);
    else if (onebowl[19] == '/')//followed by a spare in the tenth
        score[8] = lastFrame + 20;
    else//followed by an open in the tenth
        score[8] = lastFrame + 10 + parseInt(onebowl[18])+parseInt(onebowl[19]);}

else if (onebowl[17] == '/'){//spare this frame
    if (onebowl[18] == 'x')//followed by a strike in tenth
        score[8] = lastFrame + 20;
    else//followed by something else
        score[8] = lastFrame + 10 + parseInt(onebowl[18]);}

else //open this frame
    score[8] = lastFrame + parseInt(onebowl[16]) + parseInt(onebowl[17]);
lastFrame = score[8];
//10th frame
if (onebowl[18] == 'x'){ //first bowl is a strike
    if ((onebowl[19] == 'x') && (onebowl[20] == 'x'))//3 strikes in the tenth
        score[9] = lastFrame + 30;
    else if (onebowl[19] == 'x')//first 2 are strikes
        score[9] = lastFrame + 20 + parseInt(onebowl[20]);
    else if (bowl[20] == '/')//one strike followed by a spare
        score[9] = lastFrame + 20;
    else//one strike followed by an open
        score[9] = lastFrame + 10 + parseInt(onebowl[19]) + parseInt(onebowl[20]);}

else if (onebowl[19] == '/'){ //first bowl is a spare
    if (onebowl[20] == 'x') //spare followed by a strike
        score[9] = lastFrame + 20;
    else//spare followed by an open
        score[9] = lastFrame + 10 + parseInt(onebowl[20]);}

else //open in the tenth
    score[9] = lastFrame + parseInt(onebowl[18]) + parseInt(onebowl[19]);
}

function print(){
player1score1.innerHTML ="";
player1score1.innerHTML += "" + score[0];
player1score2.innerHTML ="";
player1score2.innerHTML += "" + score[1];
player1score3.innerHTML ="";
player1score3.innerHTML += "" + score[2];
player1score4.innerHTML ="";
player1score4.innerHTML += "" + score[3];
player1score5.innerHTML ="";
player1score5.innerHTML += "" + score[4];
player1score6.innerHTML ="";
player1score6.innerHTML += "" + score[5];
player1score7.innerHTML ="";
player1score7.innerHTML += "" + score[6];
player1score8.innerHTML ="";
player1score8.innerHTML += "" + score[7];
player1score9.innerHTML ="";
player1score9.innerHTML += "" + score[8];
player1score10.innerHTML ="";
player1score10.innerHTML += "" + score[9];
player2score1.innerHTML ="";
player2score1.innerHTML += "" + scoretwo[0];
player2score2.innerHTML ="";
player2score2.innerHTML += "" + scoretwo[1];
player2score3.innerHTML ="";
player2score3.innerHTML += "" + scoretwo[2];
player2score4.innerHTML ="";
player2score4.innerHTML += "" + scoretwo[3];
player2score5.innerHTML ="";
player2score5.innerHTML += "" + scoretwo[4];
player2score6.innerHTML ="";
player2score6.innerHTML += "" + scoretwo[5];
player2score7.innerHTML ="";
player2score7.innerHTML += "" + scoretwo[6];
player2score8.innerHTML ="";
player2score8.innerHTML += "" + scoretwo[7];
player2score9.innerHTML ="";
player2score9.innerHTML += "" + scoretwo[8];
player2score10.innerHTML ="";
player2score10.innerHTML += "" + scoretwo[9];   
player3score1.innerHTML ="";
player3score1.innerHTML += "" + scorethree[0];
player3score2.innerHTML ="";
player3score2.innerHTML += "" + scorethree[1];
player3score3.innerHTML ="";
player3score3.innerHTML += "" + scorethree[2];
player3score4.innerHTML ="";
player3score4.innerHTML += "" + scorethree[3];
player3score5.innerHTML ="";
player3score5.innerHTML += "" + scorethree[4];
player3score6.innerHTML ="";
player3score6.innerHTML += "" + scorethree[5];
player3score7.innerHTML ="";
player3score7.innerHTML += "" + scorethree[6];
player3score8.innerHTML ="";
player3score8.innerHTML += "" + scorethree[7];
player3score9.innerHTML ="";
player3score9.innerHTML += "" + scorethree[8];
player3score10.innerHTML ="";
player3score10.innerHTML += "" + scorethree[9];   
player4score1.innerHTML ="";
player4score1.innerHTML += "" + scorefour[0];
player4score2.innerHTML ="";
player4score2.innerHTML += "" + scorefour[1];
player4score3.innerHTML ="";
player4score3.innerHTML += "" + scorefour[2];
player4score4.innerHTML ="";
player4score4.innerHTML += "" + scorefour[3];
player4score5.innerHTML ="";
player4score5.innerHTML += "" + scorefour[4];
player4score6.innerHTML ="";
player4score6.innerHTML += "" + scorefour[5];
player4score7.innerHTML ="";
player4score7.innerHTML += "" + scorefour[6];
player4score8.innerHTML ="";
player4score8.innerHTML += "" + scorefour[7];
player4score9.innerHTML ="";
player4score9.innerHTML += "" + scorefour[8];
player4score10.innerHTML ="";
player4score10.innerHTML += "" + scorefour[9];   
player5score1.innerHTML ="";
player5score1.innerHTML += "" + scorefive[0];
player5score2.innerHTML ="";
player5score2.innerHTML += "" + scorefive[1];
player5score3.innerHTML ="";
player5score3.innerHTML += "" + scorefive[2];
player5score4.innerHTML ="";
player5score4.innerHTML += "" + scorefive[3];
player5score5.innerHTML ="";
player5score5.innerHTML += "" + scorefive[4];
player5score6.innerHTML ="";
player5score6.innerHTML += "" + scorefive[5];
player5score7.innerHTML ="";
player5score7.innerHTML += "" + scorefive[6];
player5score8.innerHTML ="";
player5score8.innerHTML += "" + scorefive[7];
player5score9.innerHTML ="";
player5score9.innerHTML += "" + scorefive[8];
player5score10.innerHTML ="";
player5score10.innerHTML += "" + scorefive[9];
player6score1.innerHTML ="";
player6score1.innerHTML += "" + scoresix[0];
player6score2.innerHTML ="";
player6score2.innerHTML += "" + scoresix[1];
player6score3.innerHTML ="";
player6score3.innerHTML += "" + scoresix[2];
player6score4.innerHTML ="";
player6score4.innerHTML += "" + scoresix[3];
player6score5.innerHTML ="";
player6score5.innerHTML += "" + scoresix[4];
player6score6.innerHTML ="";
player6score6.innerHTML += "" + scoresix[5];
player6score7.innerHTML ="";
player6score7.innerHTML += "" + scoresix[6];
player6score8.innerHTML ="";
player6score8.innerHTML += "" + scoresix[7];
player6score9.innerHTML ="";
player6score9.innerHTML += "" + scoresix[8];
player6score10.innerHTML ="";
player6score10.innerHTML += "" + scoresix[9];   
}

</script>
</head>

<body bgcolor="#ffffff">
    <center><img src="http://www.dr-designs.co.uk/bowlarama.png"></center>

<form name="score">
&nbsp;<center>
<table border="0"  cellspacing="1" width="100%" id="AutoNumber1" height="45">
  <tr>
    <td width="7%" height="19" bgcolor="transparent"><font color="#000000"><b>Frame</b></font></td>
    <td width="7%" height="19" bgcolor="transparent" align="center"><font color="#000000"><b>1</b></font></td>
    <td width="7%" height="19" bgcolor="transparent" align="center"><font color="#000000"><b>2</b></font></td>
    <td width="7%" height="19" bgcolor="transparent" align="center"><font color="#000000"><b>3</b></font></td>
    <td width="7%" height="19" bgcolor="transparent" align="center"><font color="#000000"><b>4</b></font></td>
    <td width="7%" height="19" bgcolor="transparent" align="center"><font color="#000000"><b>5</b></font></td>
    <td width="7%" height="19" bgcolor="transparent" align="center"><font color="#000000"><b>6</b></font></td>
    <td width="7%" height="19" bgcolor="transparent" align="center"><font color="#000000"><b>7</b></font></td>
    <td width="7%" height="19" bgcolor="transparent" align="center"><font color="#000000"><b>8</b></font></td>
    <td width="7%" height="19" bgcolor="transparent" align="center"><font color="#000000"><b>9</b></font></td>
    <td width="7%" height="19" bgcolor="transparent" align="center"><font color="#000000"><b>10</b></font></td>
  </tr>
  <tr><!--This is the form for the 1st player-->
    <td id="player1name" width="7%" height="16" bgcolor="transparent"><font color="#000000"><b>Score</b></font></td>
    <td id="player1score1" width="7%" height="16" bgcolor="transparent" align="center">
        <input type=text maxlength=1 size=1 name="pl1bowl1">
        <input type=text maxlength=1 size=1 name="pl1bowl2">
    </td>
    <td id="player1score2" width="7%" height="16" bgcolor="transparent" align="center">
        <input type=text maxlength=1 size=1 name="pl1bowl3"> 
        <input type=text maxlength=1 size=1 name="pl1bowl4">
    </td>
    <td id="player1score3" width="7%" height="16" bgcolor="transparent" align="center">
        <input type=text maxlength=1 size=1 name="pl1bowl5">
        <input type=text maxlength=1 size=1 name="pl1bowl6">
    </td>
    <td id="player1score4" width="7%" height="16" bgcolor="transparent" align="center">
        <input type=text maxlength=1 size=1 name="pl1bowl7">
        <input type=text maxlength=1 size=1 name="pl1bowl8">
    </td>
    <td id="player1score5" width="7%" height="16" bgcolor="transparent" align="center">
        <input type=text maxlength=1 size=1 name="pl1bowl9">
        <input type=text maxlength=1 size=1 name="pl1bowl10">
    </td>
    <td id="player1score6" width="7%" height="16" bgcolor="transparent" align="center">
        <input type=text maxlength=1 size=1 name="pl1bowl11">
        <input type=text maxlength=1 size=1 name="pl1bowl12">
    </td>
    <td id="player1score7" width="7%" height="16" bgcolor="transparent" align="center">
        <input type=text maxlength=1 size=1 name="pl1bowl13">
        <input type=text maxlength=1 size=1 name="pl1bowl14">
    </td>
    <td id="player1score8" width="7%" height="16" bgcolor="transparent" align="center">
        <input type=text maxlength=1 size=1 name="pl1bowl15">
        <input type=text maxlength=1 size=1 name="pl1bowl16">
    </td>
    <td id="player1score9" width="7%" height="16" bgcolor="transparent" align="center">
        <input type=text maxlength=1 size=1 name="pl1bowl17">
        <input type=text maxlength=1 size=1 name="pl1bowl18">
    </td>
    <td id="player1score10" width="7%" height="16" bgcolor="transparent" align="center">
        <input type=text maxlength=1 size=1 name="pl1bowl19">
        <input type=text maxlength=1 size=1 name="pl1bowl20">
        <input type=text maxlength=1 size=1 name="pl1bowl21">
    </td>
  </tr>
    <tr><!--This is the form for the 2nd player-->
    <td id="player2name" width="7%" height="16" bgcolor="transparent"><font color="#000000"><b>Score</b></font></td>
    <td id="player2score1" width="7%" height="16" bgcolor="transparent" align="center">
        <input type=text maxlength=1 size=1 name="pl2bowl1">
        <input type=text maxlength=1 size=1 name="pl2bowl2">
    </td>
    <td id="player2score2" width="7%" height="16" bgcolor="transparent" align="center">
        <input type=text maxlength=1 size=1 name="pl2bowl3"> 
        <input type=text maxlength=1 size=1 name="pl2bowl4">
    </td>
    <td id="player2score3" width="7%" height="16" bgcolor="transparent" align="center">
        <input type=text maxlength=1 size=1 name="pl2bowl5">
        <input type=text maxlength=1 size=1 name="pl2bowl6">
    </td>
    <td id="player2score4" width="7%" height="16" bgcolor="transparent" align="center">
        <input type=text maxlength=1 size=1 name="pl2bowl7">
        <input type=text maxlength=1 size=1 name="pl2bowl8">
    </td>
    <td id="player2score5" width="7%" height="16" bgcolor="transparent" align="center">
        <input type=text maxlength=1 size=1 name="pl2bowl9">
        <input type=text maxlength=1 size=1 name="pl2bowl10">
    </td>
    <td id="player2score6" width="7%" height="16" bgcolor="transparent" align="center">
        <input type=text maxlength=1 size=1 name="pl2bowl11">
        <input type=text maxlength=1 size=1 name="pl2bowl12">
    </td>
    <td id="player2score7" width="7%" height="16" bgcolor="transparent" align="center">
        <input type=text maxlength=1 size=1 name="pl2bowl13">
        <input type=text maxlength=1 size=1 name="pl2bowl14">
    </td>
    <td id="player2score8" width="7%" height="16" bgcolor="transparent" align="center">
        <input type=text maxlength=1 size=1 name="pl2bowl15">
        <input type=text maxlength=1 size=1 name="pl2bowl16">
    </td>
    <td id="player2score9" width="7%" height="16" bgcolor="transparent" align="center">
        <input type=text maxlength=1 size=1 name="pl2bowl17">
        <input type=text maxlength=1 size=1 name="pl2bowl18">
    </td>
    <td id="player2score10" width="7%" height="16" bgcolor="transparent" align="center">
        <input type=text maxlength=1 size=1 name="pl2bowl19">
        <input type=text maxlength=1 size=1 name="pl2bowl20">
        <input type=text maxlength=1 size=1 name="pl2bowl21">
    </td>
  </tr>
    <tr><!--This is the form for the 3rd player-->
    <td id="player3name" width="7%" height="16" bgcolor="transparent"><font color="#000000"><b>Score</b></font></td>
    <td id="player3score1" width="7%" height="16" bgcolor="transparent" align="center">
        <input type=text maxlength=1 size=1 name="pl3bowl1">
        <input type=text maxlength=1 size=1 name="pl3bowl2">
    </td>
    <td id="player3score2" width="7%" height="16" bgcolor="transparent" align="center">
        <input type=text maxlength=1 size=1 name="pl3bowl3">
        <input type=text maxlength=1 size=1 name="pl3bowl4">
    </td>
    <td id="player3score3" width="7%" height="16" bgcolor="transparent" align="center">
        <input type=text maxlength=1 size=1 name="pl3bowl5">
        <input type=text maxlength=1 size=1 name="pl3bowl6">
    </td>
    <td id="player3score4" width="7%" height="16" bgcolor="transparent" align="center">
        <input type=text maxlength=1 size=1 name="pl3bowl7">
        <input type=text maxlength=1 size=1 name="pl3bowl8">
    </td>
    <td id="player3score5" width="7%" height="16" bgcolor="transparent" align="center">
        <input type=text maxlength=1 size=1 name="pl3bowl9">
        <input type=text maxlength=1 size=1 name="pl3bowl10">
    </td>
    <td id="player3score6" width="7%" height="16" bgcolor="transparent" align="center">
        <input type=text maxlength=1 size=1 name="pl3bowl11">
        <input type=text maxlength=1 size=1 name="pl3bowl12">
    </td>
    <td id="player3score7" width="7%" height="16" bgcolor="transparent" align="center">
        <input type=text maxlength=1 size=1 name="pl3bowl13">
        <input type=text maxlength=1 size=1 name="pl3bowl14">
    </td>
    <td id="player3score8" width="7%" height="16" bgcolor="transparent" align="center">
        <input type=text maxlength=1 size=1 name="pl3bowl15">
        <input type=text maxlength=1 size=1 name="pl3bowl16">
    </td>
    <td id="player3score9" width="7%" height="16" bgcolor="transparent" align="center">
        <input type=text maxlength=1 size=1 name="pl3bowl17">
        <input type=text maxlength=1 size=1 name="pl3bowl18">
    </td>
    <td id="player3score10" width="7%" height="16" bgcolor="transparent" align="center">
        <input type=text maxlength=1 size=1 name="pl3bowl19">
        <input type=text maxlength=1 size=1 name="pl3bowl20">
        <input type=text maxlength=1 size=1 name="pl3bowl21">
    </td>
  </tr>

</table>
<p><input type=button value="Calculate Score" onclick="runScript();">

    </center>
    </form>
    <hr>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T19:11:49.387

欢迎来到这个概念

**复制粘贴代码是万恶之源**

我的回答是，回到你让它为 1 个用户工作的方式，并重构，这样你就可以以通用的方式**重用**该代码。您可以为 1 位玩家发布您的解决方案以获取设计建议。

即使你可以让它像这样工作，你也不想这样做。这永远不行。

# plugins - Sublime Text 2 - 在程序启动时运行插件

> ID：16177298
> 
> 赞同：3
> 
> 时间：2013-04-23T19:08:05.873
> 
> 标签：plugins, sublimetext2

我正在尝试创建一个插件来根据当前操作系统切换 font_face 设置。我使用 Dropbox 来同步我的所有设置，我在工作中使用 Mac，在家里使用 Windows。我相信我已经创建了一个可以工作的插件（尽管可能并不完美，因为这是我第一次尝试使用插件和 python！）但是当我尝试在 Sublime Text 2 启动时让它运行时，我的问题就来了。

我似乎已经搜索到互联网的尽头，但找不到一篇关于“在启动时运行插件”的文章，这让我要么认为这是不可能的，要么很容易做到没有人想到来写它。

这是我的代码：

```
import sublime
import sublime_plugin

class OsFontSwitcherCommand(sublime_plugin.ApplicationCommand):
def run(self):
    s = sublime.load_settings("Preferences.sublime-settings")

    if sublime.platform() == "osx":
        s.set("font_face", 'Courier')
    else:
        s.set("font_face", 'Consolas')

    sublime.save_settings("Preferences.sublime-settings") 
```

这很好用，但我每次启动程序时都必须手动调用它才能工作。

通过执行以下操作，我能够让插件在加载后立即运行，但它似乎在实际加载默认和用户设置之前运行，结果是它清除了我的所有其他设置：

```
import sublime
import sublime_plugin

s = sublime.load_settings("Preferences.sublime-settings")

if sublime.platform() == "osx":
    s.set("font_face", 'Courier')
else:
    s.set("font_face", 'Consolas')

sublime.save_settings("Preferences.sublime-settings") 
```

我考虑使用 set_timeout() 方法，但这似乎真的很hacky。

我想将其扩展为一个更充实的插件，以便您可以为 Windows 和 OSX 进行完整配置，并始终根据当前操作系统正确加载它们。让它在启动时自动运行是关键。

我也尝试在我的 /Packages/User 文件夹中制作`Preferences (Windows).sublime-settings`和`Preferences (OSX).sublime-settings`，但它们似乎没有被拾取。其他人也注意到了这个问题：[http ://www.sublimetext.com/forum/viewtopic.php?f=2&t=5135](http://www.sublimetext.com/forum/viewtopic.php?f=2&t=5135)

任何关于如何让这个插件在启动时运行的想法将不胜感激。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-22T13:13:31.743

我知道这是一个老问题，最初的发帖人问的是 Sublime Text 2，但我刚刚为自己解决了一个类似的问题，Sublime Text 3 提供了一种方便的方法来做到这一点。

如果你定义了一个模块级`plugin_loaded`函数，Sublime Text 3 将在你的插件加载时执行你的代码。

我写了[一篇关于此的博客文章，其中包含更多详细信息和一些示例代码](http://sublimetexttips.com/execute-a-command-every-time-sublime-launches/)。

# php - 如何将 Windows 上的 xampp 更新为 php 5.5 beta？

> ID：16177299
> 
> 赞同：0
> 
> 时间：2013-04-23T19:08:09.190
> 
> 标签：php, xampp

我正在 Windows 计算机上开发并使用 xampp。我想使用 php 5.5，因为它有一个新的简化密码哈希 API。它在这里说：[http](http://php.net/archive/2013.php#id2013-04-11-1) ://php.net/archive/2013.php#id2013-04-11-1 php 5.5 的 beta3 版本可用。

我查看了类似的stackoverflow问题，发现了这个： [http ://hype-free.blogspot.com/2007/07/updating-php-in-xampp-for-windows.html](http://hype-free.blogspot.com/2007/07/updating-php-in-xampp-for-windows.html)

我觉得这就是我需要的，除了我对在 apache\bin 目录中找到新版本文件的位置感到困惑。那是在下载的 php 5.5 文件中的某个地方吗？

# jquery - 防止表单验证 CSS .error 突出显示文本框

> ID：16177302
> 
> 赞同：0
> 
> 时间：2013-04-23T19:08:11.693
> 
> 标签：jquery, css, jquery-plugins

我正在使用表单验证 JQuery 插件，除了一件特别的事情外，我的一切工作都很好。

我正在使用 CSS 中的错误类来设计错误文本的样式：

```
.error {
    font-family: Verdana, Arial, sans-serif;
    font-size: 0.7em;
    color: #2d0004;
    background-color: #ff0;
} 
```

但是，每当我收到错误（未填写必填字段）时，输入框也会受到上面显示的 CSS 样式的影响。如何防止上面显示的 CSS 样式影响与错误关联的输入字段，并且仅将样式应用于错误文本？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T19:19:03.813

试试这个 CSS：

```
.error:not(input) {
    font-family: Verdana, Arial, sans-serif;
    font-size: 0.7em;
    color: #2d0004;
    background-color: #ff0;
} 
```

# scala - 在 Scala 中泛化构造函数

> ID：16177303
> 
> 赞同：4
> 
> 时间：2013-04-23T19:08:15.120
> 
> 标签：scala, generics, traits

我一直在 Scala 中做一些练习。我想我可能会尝试派生一种方法来创建不兼容的值类型，这些值类型不会被意外地分配给彼此，使用新添加的`AnyVal`特性。

我能想到的最好的是这样的：

```
object Measurements {
  trait ValueType[T] extends Any {
    def value: T
  }

  trait Measurement[A <: ValueType[Double]] extends Any {
    def modify(fn: (Double, A) => Double, value: A): A
    def +(mod: A) = modify((x: Double, y: A) => x + y.value, mod)
    def -(mod: A) = modify((x: Double, y: A) => x - y.value, mod)
    def *(mod: A) = modify((x: Double, y: A) => x * y.value, mod)
    def /(mod: A) = modify((x: Double, y: A) => x / y.value, mod)
  }

  case class Frequency(value: Double) extends AnyVal 
      with ValueType[Double] 
      with Measurement[Frequency] 
  {
    def modify(fn: (Double, Frequency) => Double, mod: Frequency) 
      = Frequency(fn(value, mod))
  }

  case class Amplitude(value: Double) extends AnyVal 
      with ValueType[Double] 
      with Measurement[Amplitude] 
  {
    def modify(fn: (Double, Amplitude) => Double, mod: Amplitude) 
      = Amplitude(fn(value, mod))
  }

  case class Wavelength(value: Double) extends AnyVal 
      with ValueType[Double] 
      with Measurement[Wavelength] 
  {
    def modify(fn: (Double, Wavelength) => Double, mod: Wavelength) 
      = Wavelength(fn(value, mod))
  }
}
import Measurements._
Frequency(150) + Frequency(10) // ==> Frequency(160)
Amplitude(23.2) * Amplitude(2) // ==> Amplitude(46.4)
Amplitude(50) + Frequency(50)  // ==> Compile-time Type Error 
```

不幸的是，它要求我`modify`为每个实例唯一地定义函数，因为不可能`A(value)`用泛型类型定义类似的东西`A`。似乎没有办法定义构造函数约束。否则，我可能能够在特征上定义一些常见的东西，例如：

```
def modify(fn: (Double, A) => Double, mod: A) = A(fn(value, mod)) 
```

我试过调用`apply(Double)`on `A`，但它不能从泛型变量访问。我还试图看看我是否可以建立某种工厂以至少简化事情，但无法想出比我现在所做的更优雅的事情。我一直在使用 C# 时遇到同样的问题。

是否有某种方法可以分解出依赖于不同（但相关）类的通用构造函数类型的代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T15:05:28.953

我认为如果不求助于运行时反射（或者可能是宏），这是不可能的。基本上有三个问题，其中你已经指出了两个：

*   特征不可能声明强制构造函数签名。

*   不能调用诸如`apply`on之类的方法，`A`因为它是类型变量而不是类或对象。

*   由于值类（当前）只能扩展[*通用特征*](http://docs.scala-lang.org/overviews/core/value-classes.html)，但不能扩展抽象类，因此无法使用`TypeTags`该类来获取属于实例化类型的类，该类型是在扩展`A`时实例化的。`Measurement`

我能想到的最好的方法是以下方法。`Measurement`请注意，它使用反射，并且如果 的具体实例未声明适当的构造函数，则可能会在运行时引发异常。

```
// ... as above ...

trait Measurement[A <: ValueType[Double]] extends Any { self: A =>
  def modify(fn: (Double, A) => Double, mod: A): A =
    this.getClass
        .getConstructor(this.getClass)
        .newInstance(fn(value, mod): java.lang.Double)

  // ... as above ...
}

case class Frequency(value: Double)
    extends AnyVal 
       with ValueType[Double] 
       with Measurement[Frequency]

// ... etc ...

Frequency(150) + Frequency(10) // ==> Frequency(160)
Amplitude(23.2) * Amplitude(2) // ==> Amplitude(46.4)
Amplitude(50) + Frequency(50)  // ==> Compile-time Type Error 
```

self-type 注释`self: A`确保声明的`value`字段`ValueType`可以从 trait 内部访问`Measurement`。

# java - 什么是列出已编译 Java 类所需的所有导入的可移植方式

> ID：16177304
> 
> 赞同：2
> 
> 时间：2013-04-23T19:08:16.230
> 
> 标签：java, dependencies, decompiling

我正在寻找一些想法来快速生成 java 类所需的导入列表。理想情况下，这可以使用 javap 或 JDK 中的一些其他工具来完成。

我对 GUI 程序不感兴趣，因为最终我想使用输出来验证我的构建。另外，我不想在构建代码中添加大量二进制代码。所以解决方案越简单越好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T19:22:52.843

This is quick and dirty, but may be *good enough* for what you want. Search for the class constants:

```
>javap -classpath ... -c -private -s -verbose grimbo.appengine.test.perf.Log  | findstr /r /c:"const.#[0-9]*.=.class" 
```

Gives:

```
const #3 = class        #38;    //  java/lang/StringBuilder
const #11 = class       #47;    //  grimbo/appengine/test/perf/Log
const #12 = class       #48;    //  java/lang/Object
const #43 = class       #54;    //  javax/servlet/ServletContext
const #45 = class       #56;    //  java/io/PrintWriter 
```

# php - MySQL：将 postid 从一个表复制到同一数据库中的另一个表

> ID：16177306
> 
> 赞同：0
> 
> 时间：2013-04-23T19:08:20.413
> 
> 标签：php, mysql

我第一次创建一个插件 :) 这需要自己的表，并将使用 postid 作为键。现在事情似乎很好，但只有一个问题是..

我想`postid`从`posts`表复制到表`postid`中`counter`。如何编写查询以仅复制一次。我有新帖子的写入功能，因此它会在创建新帖子但旧帖子时添加`postid`到`counter`表格中。

我只知道基本的简单查询，但这对我来说很复杂，需要帮助。请

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:14:33.380

以下 sql 应该可以解决问题，前提是 counter 为空，并且您为 counter 中的其他字段设置了默认值

```
insert into counter(postid) 
select postid 
from posts 
```

# java - facebook 与 Android 上的 libgdx 集成

> ID：16177309
> 
> 赞同：2
> 
> 时间：2013-04-23T19:08:23.077
> 
> 标签：java, android, facebook, libgdx

我正在`FaceBook`与`Libgdx`. 有些`FaceBook`方法需要上下文（来自`Android Activity`）。我找到了一些资源来帮助我解决[这个问题](https://code.google.com/p/libgdx-users/wiki/IntegratingAndroidNativeUiElements3TierProjectSetup)

在我遵循本教程之后`Interface`，我有了我的 .然后我创建了一个实现它的对象`Interface`。（此对象包含`Context`）并将该对象传递给`MainActivity`我的 Android 项目的初始化方法。问题是我无法访问主`libgdx`项目中的上下文，因为它无法访问 android 库`android.content.Context`。

请帮助我解决此问题，因为必须`FaceBook`使用我的应用程序登录。

我已经查看了大量关于此的问题，但没有一个有明确的答案。提前致谢。

//编辑

在尝试了 Vikalp 的解决方案后，我几乎让它工作了。我知道我的 facebook 代码可以正常工作，因为我已经使用原生 android 对其进行了测试。

所以新的解决方案是：在LIBGDX（Maininterface）中创建一个接口，在LIBGDX中创建一个facebookCallBack接口来接收来自MainInterface的回调信息。创建了一个类，该类创建 MainInterface 并包含我所有的 facebook 代码（在本机 android 上按预期工作）。我创建了这个类的一个实例并将其传递给 LIBGDX，在那里我可以从 MainInterface 接收 facebookCallBack 中的回调。

我在 logcat 中收到关于 applicaitonID 的空错误，但是它与我的原生 android 项目的设置相同，因此它应该在清单的元数据中找到 id。

logcat 输出打印如下：

```
07-09 10:31:57.660: D/dalvikvm(7261): GC_CONCURRENT freed 214K, 7% free 12371K/13191K,              paused 3ms+12ms, total 34ms
07-09 10:32:00.200: I/System.out(7261): clicked!
07-09 10:32:00.210: W/dalvikvm(7261): VFY: unable to find class referenced in signature    (Landroid/support/v4/app/Fragment;)
07-09 10:32:00.210: W/dalvikvm(7261): VFY: unable to find class referenced in signature (Landroid/support/v4/app/Fragment;)
07-09 10:32:00.210: I/dalvikvm(7261): Could not find method android.support.v4.content.LocalBroadcastManager.getInstance, referenced from method com.facebook.Session.postActiveSessionAction
07-09 10:32:00.210: W/dalvikvm(7261): VFY: unable to resolve static method 304: Landroid/support/v4/content/LocalBroadcastManager;.getInstance (Landroid/content/Context;)Landroid/support/v4/content/LocalBroadcastManager;
07-09 10:32:00.210: D/dalvikvm(7261): VFY: replacing opcode 0x71 at 0x0009
07-09 10:32:00.295: W/dalvikvm(7261): threadid=11: thread exiting with uncaught exception (group=0x40d422a0)
07-09 10:32:00.300: E/AndroidRuntime(7261): FATAL EXCEPTION: GLThread 2837
07-09 10:32:00.300: E/AndroidRuntime(7261): java.lang.NullPointerException
07-09 10:32:00.300: E/AndroidRuntime(7261):     at android.content.ContextWrapper.getPackageManager(ContextWrapper.java:86)
07-09 10:32:00.300: E/AndroidRuntime(7261):     at com.facebook.internal.Utility.getMetadataApplicationId(Utility.java:166)
07-09 10:32:00.300: E/AndroidRuntime(7261):     at com.facebook.Session.<init>(Session.java:221)
07-09 10:32:00.300: E/AndroidRuntime(7261):     at com.facebook.Session.<init>(Session.java:213)
07-09 10:32:00.300: E/AndroidRuntime(7261):     at com.facebook.Session$Builder.build(Session.java:1454)
07-09 10:32:00.300: E/AndroidRuntime(7261):     at com.facebook.Session.openActiveSession(Session.java:863)
07-09 10:32:00.300: E/AndroidRuntime(7261):     at com.facebook.Session.openActiveSession(Session.java:805)
07-09 10:32:00.300: E/AndroidRuntime(7261):     at com.FB.GDX.FBActivity$1.getResultFromFaceBook(FBActivity.java:66)
07-09 10:32:00.300: E/AndroidRuntime(7261):     at com.FB.GDX.GDXScreen$1.clicked(GDXScreen.java:123)
07-09 10:32:00.300: E/AndroidRuntime(7261):     at com.badlogic.gdx.scenes.scene2d.utils.ClickListener.touchUp(ClickListener.java:82)
07-09 10:32:00.300: E/AndroidRuntime(7261):     at com.badlogic.gdx.scenes.scene2d.InputListener.handle(InputListener.java:57)
07-09 10:32:00.300: E/AndroidRuntime(7261):     at com.badlogic.gdx.scenes.scene2d.Stage.touchUp(Stage.java:334)
07-09 10:32:00.300: E/AndroidRuntime(7261):     at com.badlogic.gdx.backends.android.AndroidInput.processEvents(AndroidInput.java:359)
07-09 10:32:00.300: E/AndroidRuntime(7261):     at com.badlogic.gdx.backends.android.AndroidGraphics.onDrawFrame(AndroidGraphics.java:486)
07-09 10:32:00.300: E/AndroidRuntime(7261):     at android.opengl.GLSurfaceView$GLThread.guardedRun(GLSurfaceView.java:1516)
07-09 10:32:00.300: E/AndroidRuntime(7261):     at android.opengl.GLSurfaceView$GLThread.run(GLSurfaceView.java:1240)
07-09 10:32:04.060: D/dalvikvm(7261): GC_CONCURRENT freed 356K, 8% free 12449K/13447K,             paused 3ms+2ms, total 22ms 
```

//编辑2

在 android 端，我有一个创建 MainInterface 的活动，因为我需要一个活动来启动一个会话。该类的代码如下：

```
public class FBActivity extends Activity {

private Activity thisActivity = this;
private MainInterface object;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

}
   //methods
    public MainInterface getMaininterface()
    {
        if(object==null)
        {
            //create MainInterface object for facebook callbacks
            object = new MainInterface(){

                CallBackInterface fbCallbacks;

                private String TAG = "MainActivity";

                public Session.StatusCallback callback;

                public void registerCallBackInterFace(CallBackInterface callBacks){

                    this.fbCallbacks = callBacks;

                }

                public Session.StatusCallback getCallback()
                {
                    return this.callback;
                }

                public void getResultFromFaceBook(){
                    /* write your code for faceBook here */

                    Session.openActiveSession(thisActivity,true, new Session.StatusCallback() {
                        @Override
                        public void call(Session session, SessionState state, Exception exception) {
                            if (state.isOpened()) { //note: I think session.isOpened() is the same

                            fbCallbacks.setLoggedIn(true);

                                Log.i(TAG, "Access Token" + session.getAccessToken());

                                Request.executeMeRequestAsync(session,

                                new Request.GraphUserCallback() {

                                    @Override
                                    public void onCompleted(GraphUser user,
                                            Response response) {
                                        // TODO Auto-generated method stub
                                            if (user != null) {

                                            email = user.asMap().get("email").toString();

                                            Log.i(TAG, "User ID " + user.getId());

                                            Log.i(TAG, "Email " + user.asMap().get("email"));

                                        }
                                    }

                                });

                            } else if (state.isClosed()) {

                                fbCallbacks.setLoggedIn(false);
                            }

                        }

                    });
                    System.out.println("main interface created");

                }

                };}
        return object;
    }
    @Override
  public void onActivityResult(int requestCode, int resultCode, Intent data) {
      super.onActivityResult(requestCode, resultCode, data);
      Session.getActiveSession().onActivityResult(this, requestCode, resultCode, data);
  }

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
} 
```

}

当按下 LIBGDX 中的按钮时，将调用 getResultFromFaceBook() 方法。

//编辑 3

AppID 在清单中引用如下：

```
<meta-data android:name="com.facebook.sdk.ApplicationId" android:value="@string/app_id"/> 
```

并且 ID 的值存储在 strings.xml 中，如下所示：

```
<string name="app_id">**************</string> 
```

packageManager 可能会给出 null 错误，但我不确定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-20T15:51:39.323

您可以做的是在 android 项目中实现您的 Facebook 库，并从您创建的接口调用该库的所有方法。假设您的界面名为 MainInterface

为了从 android 端获取结果到您的主项目，您可以创建另一个接口，例如 CallBackInterFace 以及它在主项目中的实现类，并将此接口注册到您的 android 项目并从那里获取回调..

例如。在主项目中，您可以将界面创建为

```
public interface MainInterFace{

    public interface CallBackInterface{
         public void getInt(int output);
    }

    public void registerCallBackInterFace(CallBackInterface callBacks);

    public void getResultFromFaceBook();
} 
```

在主项目中创建一个实现回调类：

```
class FaceBookCallBacks implements CallBackInterFace{
   public void getInt(int output){
       System.out.println(output);
   }
} 
```

通过调用将此类的对象注册到android项目

```
.....
registerCallBackInterFace(new FaceBookCallBacks());
.... 
```

在android方面你可以做的是

创建一个实现该接口的对象

```
...

MainInterFace object = new MainInterFace(){

       CallBackInterface callback;

       public void registerCallBackInterFace(CallBackInterface callBacks){
            this.callback = callbacks;
       }

       public void getResultFromFaceBook(){
           /* write your code for faceBook here */
           int result = 10;    //eg for returning a value
           callback.getInt(result);
       }
};
... 
```

这可以帮助您处理 ios 和 Gwt 项目

**您甚至可以访问此链接以检查解决方案 [https://code.google.com/p/libgdx/wiki/ApplicationPlatformSpecific](https://code.google.com/p/libgdx/wiki/ApplicationPlatformSpecific)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-20T13:02:41.960

如果我正确理解您的问题，解决方案将是：

- 创建一个实现您的 Facebook 任务的项目（即 FacebookImpl）。你可以在那里实现接口和你的具体类。所以，这个项目依赖于 Facebook SDK。

- 将该项目包含在您的 LibGDX Core 项目中，并通过“FacebookImpl”进行调用。因此，从您的 MainActivity，您可以将您的 Context 提供给“FacebookImpl”，您的 LibGDX 核心项目将在不知道任何有关 Android 类的情况下进行调用。

-最后，你的“FacebookImpl”应该有一个实例。您应该在 MainActivity 中对其进行一次初始化，并且核心项目应该使用相同的实例。

希望它有所帮助，即使您已经有一段时间没有问过了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-01T13:56:48.527

我有类似的设置，它的工作原理。根据您的错误日志，似乎缺少 android 支持库：

```
Could not find method android.support.v4.content.LocalBroadcastManager.getInstance, referenced from method com.facebook.Session.postActiveSessionAction 
```

您可以从 facebookSDK 的 libs 文件夹中包含 android-support-v4.jar。确保此 jar 文件在 Android 项目的 Java 构建路径中导出并推送到列表顶部。

# ios - 为什么要为应用委托使用属性？

> ID：16177312
> 
> 赞同：4
> 
> 时间：2013-04-23T19:08:29.200
> 
> 标签：ios, objective-c

`appDelegate`我正在审核一些在许多视图控制器中具有属性的代码。

```
@property (nonatomic, unsafe_unretained) TheAppDelegate *appDelegate; 
```

撇开这种耦合的设计含义不谈，除了方便之外，属性与检索应用程序委托有什么*好处：*`appDelegate`

```
TheAppDelegate *appDelegate = (TheAppDelegate *)[[UIApplication sharedApplication] delegate];
[appDelegate someMethod]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T19:13:28.290

我有时也这样做，即。为可以使用单例访问方法获取的依赖项声明一个属性：

```
@class Foo : NSObject
@property(strong) NSNotificationCenter *notificationCenter;
@end

@implementation Foo

- (id) init
{
    self = [super init];
    [self setNotificationCenter:[NSNotificationCenter defaultCenter]];
    return self;
}

@end 
```

优点是您对依赖项的耦合更松散。例如，您可以轻松地提供自己的模拟实例。在某些情况下，它还会使代码更短，编写`_notificationCenter`而不是`[NSNotificationCenter defaultCenter]`.

我能想到的第三个原因是声明属性会使依赖关系变得明确：通过查看公共 API，您可以知道对象的状态或行为取决于应用程序委托。在类实现中使用单例完全隐藏了这个事实。

但如果你的应用中有很多控制器依赖于应用委托，那可能只是设计缺陷。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T19:30:43.480

回答框架中的问题。

具体的好处是：-

更简洁的代码 - 该属性设置一次（并且可以是只读的）。如果您多次使用它

self.appDelegate 比每次从共享应用程序中获取 appDelegate 更简单。（越简单越好）

可能会有一个小的效率优势（尽管这绝对是过早的优化，并且可能不存在，具体取决于编译器）。

我必须同意 CodaFi 的说法，它有点臭，所以中间有创建一些语法糖来隐藏一些复杂性的中间立场。

```
@class MyAppDelegate;
@interface MySharedAppDelegate : NSObject 

+ (MyAppDelegate*) appDelegate;
@end

#include "MyAppDelegate.h"
@implementation MySharedAppDelegate

+ ( MyAppDelegate*) appDelegate {
    return (MyAppDelegate*)[UIApplication sharedApplication].appDelegate;
}
@end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T21:19:19.813

我认为这根本不是主观的。问题是：

> 除了方便之外，appDelegate 属性与检索应用委托相比有什么好处吗

我认为答案是“不”。除了方便，没有任何好处。

理想情况下，您的应用程序委托和视图控制器之间没有（或最小）耦合，因此您使用哪种方法应该无关紧要。在我现在正在进行的项目中，我只是在需要时检索委托（在整个代码库中只有 2 个位置）。如果你在几十个地方这样做，也许将它作为一个属性更有意义，但同样，这纯粹是为了方便。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-23T19:47:43.310

我更喜欢使用宏而不是在每个视图控制器中定义一个属性，例如

```
#define appDelegate ((MYAppDelegate *)[[UIApplication sharedApplication] delegate]) 
```

在 constants.h 中定义它并包括 .pch 文件中的标头，我可以`appDelegate` 在我的代码中的任何类中使用它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-23T20:32:07.833

我喜欢这样做：

```
//in .pch file
#import "Includes.h"

//in Includes.h
#import "AppDelegate.h"
#define APPDELEGATE() (AppDelegate *)[[UIApplication sharedApplication]delegate] 
```

然后在任何地方我需要问 appDelegate 我刚才说的

```
[APPDELEGATE() someMethod]; 
```

在其他地方拥有 AppDelegate 的属性似乎是个坏主意。不能说为什么，除了已经有一种简单的方法来获取该参考（sharedApplication）。

在这种情况下，它可能只是为了方便开发人员。不过我不得不说，到处都“需要”引用 AppDelegate 可能更多地表明意大利面条代码和不良封装。

*顺便说一句，我在 appDelegate 中存储了对一些“全局”变量的引用，这也可能表明封装不好......这就是我首先使用 APPDELEGATE() 声明的原因 ;-)

**诸如 NSDateFormatter 之类的东西，你经常需要，但不一定在一个类中“活”，（你不需要每个实例都需要一个，但可以应用于多个实例），或引用某些特定状态，比如“全局应用字体大小”

# javascript - 转换为使用不显眼的 JavaScript

> ID：16177313
> 
> 赞同：1
> 
> 时间：2013-04-23T19:08:36.920
> 
> 标签：javascript, asp.net, asp.net-mvc-4, unobtrusive-javascript

我想了解如何在当前的 MVC 项目中更好地构建我的 JavaScript 工作，我想知道是否有人能够帮助我从我的应用程序中的场景中为我说明一个特定的示例。

虽然我有很多桌面开发经验和相当多的 Web 开发经验，但相比之下我只涉足过 JavaScript，我觉得我在理解和熟练度方面还有很大的提升空间。具体围绕如何充分利用 W3C DOM 标准。

我的网站上有一个简单的表单，它向操作方法发布一些字符串数据、布尔值和日期，该方法的签名是：

**MVC 控制器签名**

```
 [HttpPost, ValidateAntiForgeryToken]
    public void PostNewEntry(string text, string localUsersDateTime, bool isPublic) 
```

我将以下内容定义为表单 html 属性的一部分：

**内联 JavaScript 函数调用**

```
new { @name = "createentry", @onsubmit = "setLocalDateTime(this.localUsersDateTime);" } 
```

localUsersDateTime 是表单上的一个隐藏输入元素，在提交表单时会执行一个小的 JavaScript 函数（存储在单独的 .js 文件中，而不是内联），该函数利用[moment.js](http://momentjs.com/)来设置用户的本地日期和时间。表单数据被发送回网站。setLocalDateTime 函数如下所示：

**JavaScript 函数 (MyScripts.js)**

```
function setLocalDateTime(obj) {
    obj.value = moment().format("YYYY-MM-DD HH:mm:ss");
} 
```

我真的对这种情况有两个问题：

如何把它变成真正不显眼的 JavaScript？

在没有任何 Javascript 的情况下，如何真正优雅地降级并仍然获得用户的本地日期时间？

我注意到，如果您关闭 JavaScript，在 Facebook 之类的网站上，甚至根本不提供相当数量的网站（聊天、新闻源更新），而在我的场景中，不让用户获得本地日期时间根本不是一种选择。这是在我的网站中正确操作这种特殊情况的基础。

# c++ - 为一个信号分配三个插槽

> ID：16177314
> 
> 赞同：0
> 
> 时间：2013-04-23T19:08:43.303
> 
> 标签：c++, window, signals, qt5, slots

我想将三个按钮的插槽分配给一个信号。

```
namespace Ui {
    class MainWindow;
}

class MainWindow : public QMainWindow
{
    Q_OBJECT

public:
    explicit MainWindow(QWidget *parent = 0);
    ~MainWindow();
    QSignalMapper *signalmapper;
    Ui::MainWindow *ui;
    void test(int);

signals:
    void clickmee(int);

public slots:
    void setclick1(int);
    void setclick2(int);
    void setclick3(int);
}; 
```

我在构造函数中这样做：

```
signalmapper = new QSignalMapper(this);
signalmapper->setMapping(ui->pushButton, 10);
signalmapper->setMapping(ui->pushButton1, 10);
signalmapper->setMapping(ui->pushButton1, 10);
connect(signalmapper, SIGNAL(mapped(int)),this,SLOT(clickmee(int))); 
```

但是当我运行程序时写道：

> QObject::connect: No such slot MainWindow::clickmee(int) in ..\Qsignal2\mainwindow.cpp:11 QObject::connect: (receiver name: 'MainWindow')

如何将插槽分配给信号？如何将参数发送到插槽？

编辑：我想这样做：

```
void  setclick1(int x)
{
    if(x== 10)
    {
        // ....
    }
    else
    {
        // ...
    }
} 
```

但这个功能没有触发。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T19:30:22.740

你应该试试

```
connect(signalmapper, SIGNAL(mapped(int)),this, SIGNAL(clickmee(int))); 
```

我不确定这在 Qt4 或 Qt5 中是否仍然允许，但它在 Qt3 中有效。它只是将信号 signalmapper.mapped(x) 重新发送到 this.clickmee(x)

如果这不起作用，您可能应该编写一个真正的插槽，将其连接到 signalmapper.mapped 并在那里发出 clickmee。像这样的东西：

```
public slots:
 void clickmee_slot(int x) {
  emit clickmee(x);
 } 
```

在构造函数中：

```
connect(signalmapper, SIGNAL(mapped(int)),this, SLOT(clickmee_slot(int))); 
```

# jquery - 为什么我必须在更改视图模型的属性后再次调用 applyBindings？

> ID：16177315
> 
> 赞同：1
> 
> 时间：2013-04-23T19:09:01.937
> 
> 标签：jquery, knockout.js

这是[小提琴](http://jsfiddle.net/GhFuS/1/)。

我有一个视图模型，其中部分数据将在一些用户交互后可用。

既然`applyBindings`已经在文档准备就绪时调用了，为什么还需要在按钮单击事件期间再次调用呢？

HTML：

```
<p>first name:
    <input type="text" data-bind="value: ray.firstName" />
</p>
<p>last name:
    <input type="text" data-bind="value: ray.lastName" />
</p>
<p>first name:
    <input type="text" data-bind="value: joe.firstName" />
</p>
<p>last name:
    <input type="text" data-bind="value: joe.lastName" />
</p> 
```

JS：

```
function person(firstNm, lastNm) {
    this.firstName = firstNm;
    this.lastName = lastNm;
}

function myApp() {
    this.ray = new person();
    this.joe = new person();
}

var app = new myApp();
app.ray = new person('ray', 'cheng');
ko.applyBindings(app);

$('#showName').on('click', function () {
    app.joe = new person('joe', 'public');
    ko.applyBindings(app); // <-- why is this needed since applyBindings already called above.
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T19:14:04.320

您需要调用`applyBindings`两次，因为您没有使用[observables](http://knockoutjs.com/documentation/observables.html)。如果没有 observables，Knockout 无法跟踪您的对象是否已更改，因此它无法更改 UI。

所以你的视图模型应该是这样的：

```
function app() {
    this.ray = ko.observable(new person());
    this.joe = ko.observable(new person());
} 
```

因为`ko.observable`返回一个函数，你需要像这样设置它们：

```
app.ray(new person('ray', 'cheng'));
app.joe(new person('joe', 'public')); 
```

并且要获取`data-bind`表达式中的值，您需要调用`ko.observable`不带任何参数`ray().firstName`的值来获取其值：

```
<input type="text" data-bind="value: ray().firstName" /> 
```

演示[JSFiddle。](http://jsfiddle.net/4wW7s/)

# c++ - 获取有向图中 2 个节点之间的所有路径

> ID：16177318
> 
> 赞同：1
> 
> 时间：2013-04-23T19:09:11.370
> 
> 标签：c++, c, algorithm

我试图在两个节点之间的有向图中获取所有路径。我的循环有问题，我找不到原因。这是我的图表（取自[http://www.technical-recipes.com](http://www.technical-recipes.com)）：

![http://technical-recipes.com/wp-content/uploads/2011/09/paths1-300x236.jpg](https://i.stack.imgur.com/e093l.jpg)

问题出现是因为 [1,2] 边缘： 1->2 。如果我删除它，我没有问题。在这个特定的测试中，我想要从 2 到 5 的所有路径。我将在最后提供小代码。

案例 1：当我没有 [1,2] 时的输出：

```
//g.addEdge( 1, 2 );    
g.addEdge( 1, 3 );    
g.addEdge( 1, 4 );    
g.addEdge( 2, 1 );    
g.addEdge( 2, 4 );    
g.addEdge( 2, 3 );    
g.addEdge( 3, 5 );    
g.addEdge( 4, 5 );    
g.addEdge( 5, 3 ); 
```

输出没问题：

```
2 1 3 5    
2 1 4 5  
2 3 5  
2 4 5 
```

案例 2：我介绍 g.addEdge(1, 2); => 输出是：

```
2 3 5 
2 4 5 
```

因此，当当前节点为 1 并且将 2 作为子节点时，它不起作用。注意：当我擦除visited[] 时，visited[] 仍然包含2（这是在main 中引入的，我认为它应该在那里）......我认为是因为上下文保存。

我的代码很小，看起来像这样：

## 主功能

```
 Graph g(5);         //graph with 5 nodes
    std::vector<int> visitedmain;
    visitedmain.push_back(2);    //introduce the start node 2 in the vector

g.addEdge( 1, 2 );    //this is wrong 
g.addEdge( 1, 3 );    
g.addEdge( 1, 4 );    
g.addEdge( 2, 1 );    
g.addEdge( 2, 4 );    
g.addEdge( 2, 3 );    
g.addEdge( 3, 5 );    
g.addEdge( 4, 5 );    
g.addEdge( 5, 3 );  

g.DFS(5, visitedmain);    // 5 is the required (target) node 
```

## DFS 功能

```
void Graph::DFS(int required, std::vector<int>& visited) {
    int i, j;
    //the current node, where I am in recursivity
    int x = visited.back();  

    int ok = 1;

    for (i = 1; i <= n; i++) {
        //for all children
        if (isConnected(x, i)) { 
            //need this for ok, explanation down
            for (j = 0; j < visited.size(); j++) 
                    {
                if (i == visited[j])
                    ok = 0;
            }
            //if it is in the vector already, exit for
            if (!ok)  
                continue;

            ok = 1;
            //If I reached the target, I have the vector containing the nodes from the path
            if (i == required) { 
                //introduce the target node in the path
                visited.push_back(i); 

                for (j = 0; j < visited.size(); j++) {
                    //print the path
                    errs() << visited[j] << " "; 
                }
                errs() << "\n";
                //delete the vector. create one vector every time when traversing the graph
                visited.erase(visited.begin() + visited.size() - 1); 
                break;
            }
        }
    }
    //the case when I still have to traverse undiscovered nodes
    for (i = 1; i <= n; i++) { 
        //for all children
        if (isConnected(x, i)) { 

            for (j = 0; j < visited.size(); j++) {
                if (i == visited[j])
                    ok = 0;
            }
            //if it is already in the vector OR I reached the target, I exit the for
            if (!ok || i == required) 
                continue;
            ok = 1;
            //introduce the child in the vector
            visited.push_back(i); 
            //recursive for this child
            Graph::DFS(required, visited);  
            //delete the old vector
            visited.erase(visited.begin() + visited.size() - 1); 
        }
    }
} 
```

谢谢你的每一个建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:27:26.473

你关于 ok 的逻辑看起来很可疑。

您在函数开始时设置 ok=1 ，并且在测试之后只有在 ok=1 已经通过的情况下才能通过。

我建议在将其设置为 0 的 for 循环之前设置 ok=1。

即改变

```
for(j=0; j<visited.size(); j++) 
```

至

```
ok=1;
for(j=0; j<visited.size(); j++) 
```

在发生这种情况的两个地方。

# embedded - u-boot - 选择正确的 linux 映像

> ID：16177319
> 
> 赞同：5
> 
> 时间：2013-04-23T19:09:13.003
> 
> 标签：embedded, arm, embedded-linux, u-boot

我想让 u-boot 根据一个标准在 2 个 linux 内核映像之间进行选择。例如，我在 SPI 中有 uImage1 和 uImage2，u-boot 检查 uImage1 的 CRC，如果正常，则启动 uImage1，否则启动 uImage2。我可以使用 u-boot 中的选项吗？

谢谢，玛尼

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T15:57:52.870

您可以将 bootcmd 变量设置为 'bootm 80000000; bootm 820000000'。如果第一个 bootm 失败（如果 CRC 检查失败，它将失败），那么第二个将运行。如果第一个成功，那么第二个永远没有机会运行。

Uboot 确实支持具有“for”和“if”等结构的脚本机制，例如：

```
for part in ${partition_list}
do
    if nfs ${loadaddr} ${nfs_update_prefix}.${part}
        echo Partition ${part} loaded at ${loadaddr}.
        echo Do something with it here.
    else
        echo Partition ${part} not found.
    fi
done 
```

# c# - c# 提取月份没有值

> ID：16177321
> 
> 赞同：0
> 
> 时间：2013-04-23T19:09:16.887
> 
> 标签：c#, sql, oledb, extract

`[]`我在遇到错误和这个错误时遇到了麻烦`IErrorInfo.GetDescription failed with E_FAIL(0x80004005)`。现在我把`EXTRACT(MONTH form table)`这个`[]`括号，现在程序说没有给一个或多个参数值。

租用是代码：

`string queryString = "SELECT sum(skupaj) FROM [cas] where sifra = " + textBox1.Text + " and [EXTRACT(MONTH FROM Datum)] = " + textBox2.Text + "";`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T19:16:33.497

如果您使用的是 SQL Server，您的最终查询应如下所示：

```
SELECT sum(skupaj) 
FROM [cas] where sifra = 123 
and MONTH(Datum) = 4 
```

# java - 检测电池充电 Android

> ID：16177325
> 
> 赞同：3
> 
> 时间：2013-04-23T19:09:30.393
> 
> 标签：java, android, battery

我以编程方式拒绝来电。“呼叫拒绝”和“sendSMS”工作正常，但我只想在手机处于充电模式时拒绝呼叫。

我正在尝试实现以下代码：

```
 case TelephonyManager.CALL_STATE_RINGING:

        if (isCharging())
        {
            reject();
            sendSMS(incomingNumber);
        } 

  break; 
```

正在充电：

```
public boolean isCharging()
{
    IntentFilter ifilter = new IntentFilter(Intent.ACTION_BATTERY_CHANGED);
    Intent batteryStatus = contextMember.registerReceiver(null, ifilter);
    int status = batteryStatus.getIntExtra(BatteryManager.EXTRA_STATUS, -1);
    boolean bCharging = status == BatteryManager.BATTERY_STATUS_CHARGING ||
                         status == BatteryManager.BATTERY_STATUS_FULL;
    return bCharging;
} 
```

但是该应用程序一直在处理来电。

请帮我解决这个问题！

我在 LogCat 上收到以下错误：

```
 E/AndroidRuntime(11160): FATAL EXCEPTION: main
  E/AndroidRuntime(11160): android.content.ReceiverCallNotAllowedException:         IntentReceiver components are not allowed to register to receive intents
  E/AndroidRuntime(11160):  at     android.app.ReceiverRestrictedContext.registerReceiver(ContextImpl.java:163)
  E/AndroidRuntime(11160):  at android.app.ReceiverRestrictedContext.registerReceiver(ContextImpl.java:157)
  E/AndroidRuntime(11160):  at   com.SmartDialer_app.SmartDialer.MyPhoneStateListener.isCharging(MyPhoneStateListener.java:106)
  E/AndroidRuntime(11160):  at  com.SmartDialer_app.SmartDialer.MyPhoneStateListener.onCallStateChanged(MyPhoneStateListene r.java:57)
  E/AndroidRuntime(11160):  at android.telephony.PhoneStateListener$2.handleMessage(PhoneStateListener.java:393)
  E/AndroidRuntime(11160):  at android.os.Handler.dispatchMessage(Handler.java:99)
  E/AndroidRuntime(11160):  at android.os.Looper.loop(Looper.java:137)
  E/AndroidRuntime(11160):  at  android.app.ActivityThread.main(ActivityThread.java:4898)
  E/AndroidRuntime(11160):  at java.lang.reflect.Method.invokeNative(Native Method)
  E/AndroidRuntime(11160):  at java.lang.reflect.Method.invoke(Method.java:511)
  E/AndroidRuntime(11160):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
  E/AndroidRuntime(11160):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
  E/AndroidRuntime(11160):  at dalvik.system.NativeStart.main(Native Method)
  E/AndroidRuntime(11160): FATAL EXCEPTION: main
  E/AndroidRuntime(11160): android.content.ReceiverCallNotAllowedException: IntentReceiver components are not allowed to register to receive intents
  E/AndroidRuntime(11160):  at android.app.ReceiverRestrictedContext.registerReceiver(ContextImpl.java:163)
  E/AndroidRuntime(11160):  at android.app.ReceiverRestrictedContext.registerReceiver(ContextImpl.java:157)
  E/AndroidRuntime(11160):  at com.SmartDialer_app.SmartDialer.MyPhoneStateListener.isCharging(MyPhoneStateListener.java:1 06)
  E/AndroidRuntime(11160):  at com.SmartDialer_app.SmartDialer.MyPhoneStateListener.onCallStateChanged(MyPhoneStateListener.java:57)
  E/AndroidRuntime(11160):  at android.telephony.PhoneStateListener$2.handleMessage(PhoneStateListener.java:393)
  E/AndroidRuntime(11160):  at android.os.Handler.dispatchMessage(Handler.java:99)
  E/AndroidRuntime(11160):  at android.os.Looper.loop(Looper.java:137)
  E/AndroidRuntime(11160):  at android.app.ActivityThread.main(ActivityThread.java:4898)
  E/AndroidRuntime(11160):  at java.lang.reflect.Method.invokeNative(Native Method)
  E/AndroidRuntime(11160):  at java.lang.reflect.Method.invoke(Method.java:511)
  E/AndroidRuntime(11160):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
  E/AndroidRuntime(11160):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
 E/AndroidRuntime(11160):   at dalvik.system.NativeStart.main(Native Method) 
```

谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T19:35:33.280

在清单文件中添加权限

```
 <receiver android:name=".PowerConnectionReceiver">
  <intent-filter>
    <action android:name="android.intent.action.ACTION_POWER_CONNECTED"/>
    <action android:name="android.intent.action.ACTION_POWER_DISCONNECTED"/>
  </intent-filter>
</receiver> 
```

在您的类中添加此代码，您可以设置一个变量标志 isCharging 并设置检查。BatteryManager 在包含充电状态的粘性 Intent 中广播所有电池和充电详细信息。

充电状态可以像插入设备一样轻松更改，因此监控充电状态的变化并相应地更改刷新率非常重要。

参考：//developer.android.com 文档。

```
 public class PowerConnectionReceiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) { 
        int status = intent.getIntExtra(BatteryManager.EXTRA_STATUS, -1);
        boolean isCharging = status == BatteryManager.BATTERY_STATUS_CHARGING ||
                            status == BatteryManager.BATTERY_STATUS_FULL;

        int chargePlug = intent.getIntExtra(BatteryManager.EXTRA_PLUGGED, -1);
        boolean usbCharge = chargePlug == BatteryManager.BATTERY_PLUGGED_USB;
        boolean acCharge = chargePlug == BatteryManager.BATTERY_PLUGGED_AC;
      //remove some variables if you don't need it.
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T20:08:03.683

您的`isCharging()`方法可能是从`onReceive()`a调用的`BroadcastReceiver`。在这种情况下，您不能`registerReceiver()`直接调用，即使使用`null`第一个参数。

代替：

```
 Intent batteryStatus = contextMember.registerReceiver(null, ifilter); 
```

尝试：

```
 Intent batteryStatus = contextMember.getApplicationContext().registerReceiver(null, ifilter); 
```

有关更多背景信息，请参阅[此博客文章](http://commonsware.com/blog/2010/09/12/real-use-getapplicationcontext.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T19:14:03.750

在您的活动中，创建一个新`BroadcastReceiver`实例或扩展它的类实例。还要创建您的`IntentFilter`和要过滤的意图。然后在您的活动中，当活动在那里接收到相应的意图时，覆盖`onReceive()`并添加您想做的任何事情。

您可以在 中实例化接收器类`onResume()`并取消注册它`onPause()`。

像这样的东西：

```
public class YourAc extends Activity{
BroadcastReceiver br;
@Override
public void onResume(){
    //instantiate your intent filter and other related stuff here
    //register the receiver
}
@Override
public void onPause(){
    //unregister your receiver
}
@Override
public void onReceive(){
    //change the boolean isCharging to false
}
} 
```

# css - CSS 粘性页脚不起作用

> ID：16177326
> 
> 赞同：2
> 
> 时间：2013-04-23T19:09:35.250
> 
> 标签：css, sticky-footer

我有一个简单的布局，我正在尝试使用 CSS。顶行和底行高 35 像素，具有动态大小的中心。我正在尝试使用本教程让 Sticky Footer 工作：[http ://www.cssstickyfooter.com/using-sticky-footer-code.html](http://www.cssstickyfooter.com/using-sticky-footer-code.html)

但是，无论中间的内容量如何，我都看到以下内容，而不是底部的页脚：

![粘性页脚未与底部对齐](https://i.stack.imgur.com/vs8PQ.png)

这是我的 CSS

```
html, body{
height: 100%;
margin: 0;
}

body{
font-family: Arial,Verdana;
font-size: 12px;
}

#site_wrapper{
width: 100%
min-height: 100%;
background-color: #fff;
padding: none;
}

#top_bar{
clear: both;
height: 35px;
background-color: #1468b3;
line-height: 35px;
font-size: 14px;
text-align: right;
color: #fff;
padding-right: 15px;

}

#content{ /* Content Wrapper */
clear: both;
overflow: auto;
padding-bottom: 35px;
}

#content_left{
float: left;
width: 50%;
color: #000;
}

#content_right{
float: right;
width: 50%;
color: #000;
}

#footer{
clear: both;
position: relative;
margin-top: -35px; /* negative value of footer height */
height: 35px;
background-color: #1468b3;
line-height: 35px;
font-size: 14px;
color: #fff;
} 
```

这是HTML

```
<div id="site_wrapper">
  <div id="top_bar">
    This is the Top Bar
  </div>
  <div id="content>
    <div id="content_left">
      Test
    </div>
    <div id="content_right">
      Test
    </div>
  </div>
</div>
<div id="footer">
  This is the footer
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T19:13:49.013

添加`height: 100%;`到`#site_wrapper`

[演示](http://jsfiddle.net/eHR4q/)

# javascript - 使用 RegEx 去除空格

> ID：16177327
> 
> 赞同：0
> 
> 时间：2013-04-23T19:09:42.293
> 
> 标签：javascript, regex

我想使用正则表达式删除一个或多个空格字符。

输入：

```
hello                        world 
```

期望的输出：

```
helloworld 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T19:13:46.627

[`replace`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace)只需在字符串上使用 RegExp

```
'hello                        world'.replace(/\s+/g, ''); // "helloworld" 
```

`\s`表示*空格*
`+`表示“一个或多个”
`g`表示“全局”，如“匹配多次”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T19:14:17.480

查看您应该生成的代码

```
helloworl 
```

并不是`hello`

由于在 for 循环比较中，`d`将被切断。`-1`它不应该在那里。`-1`您的代码在删除后运行良好：http: [//jsfiddle.net/3Hjq5/](http://jsfiddle.net/3Hjq5/)

但是你为什么要循环？一个简单的正则表达式就可以做到。

```
function removeSpaces(str) {
    return str.replace(/\s+/g,"");
} 
```

reg 表达式的运行示例：http: [//jsfiddle.net/3Hjq5/1/](http://jsfiddle.net/3Hjq5/1/)

# asp.net - 恒定错误中的换行符

> ID：16177328
> 
> 赞同：2
> 
> 时间：2013-04-23T19:09:42.677
> 
> 标签：asp.net, path, newline

我试图实现这段代码：

```
String savePath = @"D:\Visual Studio 2010\WebSites\Session Password\App_Data\file_uploads\"+uname+"\"; 
```

“+uname+”后面的斜线处出现错误请说明原因...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T19:11:37.713

将其更改为

```
 String savePath = @"D:\Visual Studio 2010\WebSites\Session Password\App_Data\file_uploads\" + uname + "\""; 
```

你只是错过了最后的结束语。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-07T10:14:55.280

加上一个额外的斜线（**转义序列问题**）

> String savePath = @"D:\Visual Studio 2010\WebSites\Session Password\App_Data\file_uploads\" + uname + "\" ;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-10T02:03:59.567

如果定义字符串 t= "C:\"; 它会给你转义字符的错误。在那里我们只需要再添加一个反斜杠。例如。字符串 t= "C:\\";

t 的实际字符串值为“C:\”。

# mongodb - 如何使用 MongoDB 组织此设置

> ID：16177331
> 
> 赞同：0
> 
> 时间：2013-04-23T19:09:45.830
> 
> 标签：mongodb, schema, database, nosql

我来自严格的 MySQL 背景，MongoDB 是我第一次接触 NoSQL。假设我有一堆用户和一堆组。

用户架构：

```
user_id
username
email 
```

组架构

```
group_id
name
description 
```

如果我使用的是 MySQL，并且我想建立每个用户及其所属组的关系，我会创建另一个具有`user_id -> group_id`关系的表。为这种关系创建另一个 MongoDB 集合是否合适？如果不是，该方案应该是什么样的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:19:03.170

我建议您查看MondoDB 站点上提供的[数据建模文档。](http://docs.mongodb.org/manual/data-modeling/)根据用户和组之间关系的性质，您的问题的答案会有所不同。您可能想要使用引用，或者您可以将组信息存储在用户文档中。

如果将它嵌入到用户文档中，它可能看起来像这样：

```
{
   user_id: "the id",
   username: "Something",
   email: "something@something.com",
   group: {
             name: "some name",
             description: "some description"
          }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T19:17:47.860

mongo 中没有模式...用户的组字段将保存一个实际的组对象，或者像组的 id 这样的引用。

看到[这个](http://docs.mongodb.org/manual/core/data-modeling/)mongo 文档。

# html - 创建指向 Skype 个人资料的应用程序链接

> ID：16177332
> 
> 赞同：78
> 
> 时间：2013-04-23T19:09:49.253
> 
> 标签：html, hyperlink, skype

我想在 HTML 中创建一个指向 Skype 个人资料的应用程序链接。我发现您可以执行以下操作：

```
<a href="skype:profile_name">Link to my profile</a> 
```

但这似乎触发了对该配置文件的 Skype 呼叫。我只想选择浏览个人资料或将其添加为联系人，我该怎么做？

* * *

## 回答 #1

> 赞同：187
> 
> 时间：2013-04-23T19:09:49.253

这似乎没有很好的文档记录，但有一些方法可以为 Skype 个人资料链接指定操作。这是语法

```
skype:profile_name?action 
```

此类行动的例子是

*   `call`打电话
*   `chat`聊天
*   `voicemail`留下语音邮件
*   `sendfile`发送文件
*   `add`添加到联系人
*   `userinfo`查看个人资料

在这种情况下，查看个人资料的链接将如下所示

```
<a href="skype:profile_name?userinfo">Link to my profile</a> 
```

另请参阅[MSDN 上的 Skype URIs 页面](https://msdn.microsoft.com/en-us/library/dn745878.aspx)。

# c# - 查找字符串 C# 中的所有整数

> ID：16177343
> 
> 赞同：-1
> 
> 时间：2013-04-23T19:10:20.840
> 
> 标签：c#, regex, string

我需要找到一个字符串中所有整数的总和：

> bl1a:bl3a: blaspecial:1\r\nblab7la\r\n\r\nbla:bla: blaspecial:4\r\nbl9abla\r\n\r\nb4la:bla: blaspecial:2\r\nblabla\r\ n\r\n

`int`in the的主要规则`string`是它以 开头`":"`，以 结尾`"\r\n"`，并且可以是`from 1 to 5`。

我尝试玩`SubString`但没有结果：

```
var reg=new Regex("blaspecial", RegexOptions.IgnoreCase);
var mathes=reg.Matches(tempStr);
var l=mathes.Count;
var a=0;

for(var i=0; i<l; i++) 
{
    tempStr=tempStr.Substring(
        tempStr.IndexOf("blaspecial:", StringComparison.Ordinal)+11);

    var r=tempStr.Substring(0, 1);
    a=a+int.Parse(r);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T19:12:46.037

您可以这样做将字符串中的所有整数相加：

```
var sum = Regex.Matches(input, @"\d+")
               .Cast<Match>()
               .Select(m => int.Parse(m.Value))
               .Sum(); 
```

或者这将结果限制为模式中的整数`:123\r\n`

```
var sum = Regex.Matches(input, @":(\d+)\r\n")
               .Cast<Match>()
               .Select(m => int.Parse(m.Groups[1].Value))
               .Sum(); 
```

当使用您的输入字符串调用时，两者都将输出`7`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T19:15:29.213

听起来像是正则表达式的好处。

```
^.*:(?<digit>\d)\s*$ 
```

*   `^`匹配一行的开头。
*   `.*`匹配任何字符，零次或多次。
*   `:`匹配文字字符 ' `:`'。
*   `(?<digit> )`将匹配的内容放入`digit`组中。
*   `\d`匹配单个数字。（`\d+`将匹配一个或多个数字。）
*   `\s*`匹配一些空格（如果存在）。
*   `$`匹配行尾。

然后，您使用带有选项的[`Regex`类。](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.aspx)`RegexOptions.Multiline`例如：

```
string input = "bla:bla: blaspecial:1\r\n...";

int sum = 0;
var matches = Regex.Matches(input, @"^.*:(?<digit>\d)\s*$", RegexOptions.Multiline);
foreach (Match match in matches)
{
    var group = match.Groups["digit"];
    if (group.Success)
    {
        int value = Int32.Parse(group.Value);
        sum += value;
    }
}
Console.WriteLine(sum); 
```

这只会得到那些直接在`:`空格和行分隔符之前和之后的整数。

# javascript - 如何随着深度的增加减少兄弟姐妹的横向距离来获得D3.js的整洁树图

> ID：16177350
> 
> 赞同：1
> 
> 时间：2013-04-23T19:10:52.700
> 
> 标签：javascript, graph, svg, d3.js

我遇到的问题归结为 Reingold-Tilford 树随着深度增加而减少兄弟姐妹之间的分离的方式。如果节点和文本没有相对于它们的深度进行缩放，这会导致重叠： ![在此处输入图像描述](https://i.stack.imgur.com/3h59W.jpg)

这可能是一个更好的例子： ![在此处输入图像描述](https://i.stack.imgur.com/8Z4rP.jpg)

注意兄弟姐妹之间的分离是如何减少的。我相信他的目的是保持图表更紧凑，但我可以接受它占用更多空间。

我浏览了 layout.tree 的源代码，但找不到代码定义距离会减小的位置。我能够增加所有深度的所有节点的距离，但这也不是重点。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T17:23:35.257

这个问题有几个解决方案：[D3 tree vertical separator](https://stackoverflow.com/questions/13032722/d3-tree-vertical-separation)。

看起来[https://github.com/mbostock/d3/issues/317](https://github.com/mbostock/d3/issues/317) ( [https://github.com/mbostock/d3/commit/47d7cade203f4f2d066c898a7fe3461b1ca3a06e](https://github.com/mbostock/d3/commit/47d7cade203f4f2d066c898a7fe3461b1ca3a06e) ) 可能在 D3 源中有修复。

# java - 多态性，继承

> ID：16177351
> 
> 赞同：-1
> 
> 时间：2013-04-23T19:10:52.320
> 
> 标签：java, inheritance

所以我从 Java 的教程 ( `http://docs.oracle.com/javase/tutorial/java/IandI/polymorphism.html`) 中复制了 MountainBike、RoadBike、TestBikes 类。

然后我制作了“Bicycle.java”..但是如果我尝试通过使其成为主类来使其执行，那么它甚至不会编译（大量非法的表达式开始。）

无论如何要使它与从该类继承属性的所有类一起编译？

```
 public class Bicycle {
    public static void main(String[] args) {
        int cadence;
       int gear;
        int speed;

    public Bicycle(int startCadence, int startSpeed, int startGear) {
        gear = startGear;
        cadence = startCadence;
        speed = startSpeed;
    }

    public void setCadence(int newValue) {
        cadence = newValue;
    }

    public void setGear(int newValue) {
        gear = newValue;
    }

    public void applyBrake(int decrement) {
        speed -= decrement;
    }

    public void speedUp(int increment) {
        speed += increment;
    }

    public void printDescription() {
    System.out.println("\nBike is " + "in gear " + this.gear
        + " with a cadence of " + this.cadence +
        " and travelling at a speed of " + this.speed + ". ");
    }
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T19:25:41.107

您将方法放在方法中，实际上您的 main 方法包含了 Bicycle 类的所有代码——不要这样做。你的 main 方法应该是它自己的独立方法，不应该持有其他方法，应该创建一个 Bicycle 实例。在这个实例上调用方法，就是这样。

```
public class Bicycle {
        public int cadence;
        public int gear;
        public int speed;

    public Bicycle(int startCadence, int startSpeed, int startGear) {
        gear = startGear;
        cadence = startCadence;
        speed = startSpeed;
    }

    public void setCadence(int newValue) {
        cadence = newValue;
    }

    public void setGear(int newValue) {
        gear = newValue;
    }

    public void applyBrake(int decrement) {
        speed -= decrement;
    }

    public void speedUp(int increment) {
        speed += increment;
    }

    public void printDescription() {
    System.out.println("\nBike is " + "in gear " + this.gear
        + " with a cadence of " + this.cadence +
        " and travelling at a speed of " + this.speed + ". ");
    }

    public static void main(String[] args) {
      Bicycle bicycle = new Bicycle(20, 10, 2);
      System.out.println(bicycle);
      // ... etc
    }
} 
```

下次，请从一开始就向我们展示*导致问题的实际代码*以及您的错误消息。这样你会得到更好的帮助，我们都会少一点沮丧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T22:27:07.487

接受以前的答案并重新开始，尝试分解不同的方法并调试每个方法，而不是洗掉错误并折腾你的手。确保每个都在您编码时编译，以便您知道问题从哪里开始。

# excel - If, And, Or - 多个条件

> ID：16177352
> 
> 赞同：1
> 
> 时间：2013-04-23T19:10:58.383
> 
> 标签：excel, excel-formula

有谁知道如何在 Excel 中创建具有多个条件的 IF、OR 和 AND 函数？

我使用以下公式使功能正常工作（*只有两个条件有效，当我尝试放置其他条件时功能失败）；*

```
=IF(OR(AND(B2>3,C2>1000,E2="Yes"),AND(B2>3,C2>500,E2="Yes")),
"5","4") 
```

我需要该函数来传递 5 个可能输出中的任何 1 个，它们如下所示；

```
if (B2>=3 and C2>1000 and E2="Yes") = "5"

 or

if (B2>=3 and C2>500 and E2="Yes") = "4"

 or

if (B2>=2 and C2>100 and E2="Yes") = "3"

 or

if (B2<=2 and C2>100 and E2="No") = "2"

 or

if (B2<=1 and C2<100 and E2="No") = "1" 
```

干杯，

乔什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T19:20:28.067

每当你有这么大的公式时，总是把它分成小部分。

例如

```
'if (B2>=3 and C2>1000 and E2="Yes") = "5"
=IF(AND(B2>=3,C2>1000,E2="Yes"),5,"") 
```

相似地

```
'if (B2>=3 and C2>500 and E2="Yes") = "4"
=IF(AND(B2>=3,C2>500,E2="Yes"),4,"")

'if (B2>=2 and C2>100 and E2="Yes") = "3"
=IF(AND(B2>=2,C2>100,E2="Yes"),3,"")

'if (B2<=2 and C2>100 and E2="No") = "2"
=IF(AND(B2<=2,C2>100,E2="No"),2,"")

'if (B2<=1 and C2<100 and E2="No") = "1"
=IF(AND(B2<=1,C2<100,E2="No"),1,"") 
```

你现在要做的就是把它们结合起来

`=IF(AND(B2>=3,C2>1000,E2="Yes"),5,IF(AND(B2>=3,C2>500,E2="Yes"),4,IF(AND(B2>=2,C2>100,E2="Yes"),3,IF(AND(B2<=2,C2>100,E2="No"),2,IF(AND(B2<=1,C2<100,E2="No"),1,"")))))`

**截屏**

![在此处输入图像描述](https://i.stack.imgur.com/8NAii.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T19:22:57.813

我认为您的问题可能是您没有相互排斥的逻辑。例如，如果 B2、C2 和 E2 中的值分别等于 4、1001 和 Yes，则您的前三个表达式可以同时为真。

如果你修复了你的逻辑，你应该能够有效地嵌套你的函数。

祝你好运！

# html - div 显示在 div 下面而不是在它的顶部？（绝对位置，margin-top/left 0）

> ID：16177357
> 
> 赞同：1
> 
> 时间：2013-04-23T19:11:25.837
> 
> 标签：html, css, position, absolute

我有一个 div (#homepage_web_title_webDesign)，据我了解，它应该位于其父 div (#homepage_web_drop_webDesign_wrap) 的左上角，但它显示在它的正下方。任何帮助是极大的赞赏！JSFiddle 包括我正在使用的重置。

**JSFiddle：http:** [//jsfiddle.net/Y7UGp/3/](http://jsfiddle.net/Y7UGp/3/)

**HTML：**

```
<div id="homepage_web_drop_webDesign_wrap" style="background-color:rgba(0,255,0,.1);">
    <img id="homepage_web_drop_webDesign" src="http://upload.wikimedia.org/wikipedia/commons/thumb/e/eb/Piratey_transparent_background.svg/383px-Piratey_transparent_background.svg.png" />
    <div id="homepage_web_title_webDesign">Web Design</div>
    <div id="homepage_web_description_webDesign">Creative Web Design should fit your budget and satisfy both you and your customers.</div>
</div> 
```

**CSS：**

```
 #homepage_web_drop_webDesign_wrap {
        position:absolute;
        margin-left:0%;
        margin-top:0%;
        height:320px;
        width:260px;
    }
    #homepage_web_drop_webDesign {
        display:inline;
        width:100%;
        height:100%;
    }
    #homepage_web_title_webDesign {
        font-family:ElectrofiedBoldItalic;
        color:rgb(120,91,67);
        position:absolute;
        background-color:purple;
        margin-left:0%;
        margin-top:0%;
        z-index:65;
    } 
```

（我用谷歌的随机图片替换了这张图片，但尺寸是用 CSS 设置的，所以这显然无关紧要。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T19:15:23.567

您只设置了、或没有`position: absolute;`值。所以元素被放置在它出现在正常流程中的位置。当您设置其中一个值时，它会相应地定位。`top``bottom``left``right`

看到这个新的[小提琴](http://jsfiddle.net/dV5ch/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T19:14:18.147

***[`jsFiddle Demo`](http://jsfiddle.net/Y7UGp/4/)***

[`margin-left`](https://developer.mozilla.org/en-US/docs/CSS/margin-left)`:0`是当前位置的偏移量。你应该使用

```
left:0;
top:0; 
```

如果您希望将其放置在前一个元素上

# c# - WPF 应用程序渲染不佳

> ID：16177358
> 
> 赞同：1
> 
> 时间：2013-04-23T19:11:29.770
> 
> 标签：c#, wpf, winforms

我一直在开发 WPF C# 应用程序，在呈现应用程序时似乎存在错误。

基本上，每当重绘程序（调整窗口大小、更改程序中的选项卡等）时，我都会通过我的应用程序绘制随机/各种水平线。

下面是一张图片，显示了我所看到的。箭头显示正在绘制的随机线。

我假设有一个简单的解决方案来解决这个问题，（简单添加 C# WPF 代码或一个非常简单的技巧，保持一切刷新），除了我不确定那一行或技巧是什么。有任何想法吗？

似乎我只需要“刷新”屏幕画布并重新绘制它。

![WPF 应用程序错误](https://i.stack.imgur.com/qgmTn.png)

- 编辑 -

# 工作模式

使用 Erti-Chris Eelmaa 的回复，问题得到了解决。请参阅下面的两张图片。

## 非工作

![在此处输入图像描述](https://i.stack.imgur.com/YN5tY.png)

## 在职的

![在此处输入图像描述](https://i.stack.imgur.com/Pus5d.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T04:05:25.720

尝试禁用 GPU 加速：RenderOptions.ProcessRenderMode = RenderMode.SoftwareOnly;

有时 WPF GPU 缓存有很多技巧，这可以提供帮助，而不会降低 imo 的性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T19:26:49.170

第一行（在图片顶部）看起来像是在活动选项卡/选项卡控件下方或顶部有另一个控件的结果。确保您没有不需要的控件/FrameworkElements。至于第二行（图片的底部），我相信这是 TabControl Header 的一部分。您可以通过设置 TabControl 的样式来摆脱它。

# php - 有时可以连接到远程服务器，有时不能

> ID：16177360
> 
> 赞同：0
> 
> 时间：2013-04-23T19:11:32.787
> 
> 标签：php, mysql, pdo

它给了我这个错误

```
 Warning: PDO::__construct() [<a href='pdo.--construct'>pdo.--construct</a>]: [2002] No connection could be made because the target machine actively refused it. (trying to connect via tcp://xxxx.xxxx.xxx:3306) 
```

但有时还可以，没问题

这是我的代码

```
 class Data
{
    private $pdo;

    public function __construct()
    {
        try {
            $this->pdo = new PDO(
            'mysql:host=xxxx.xxx.xxx;
            dbname=xxxx;
            charset=utf8',
            'xxx',
            'xxx'
            );
        }
        catch(PDOException $e){
            echo $e->getMessage();
        }
    }

    public function Test($session_id)
    {
        //do something here
    }

    public function Test1($from, $to)
    {
        //do something here
    } 
```

我该如何解决这个问题？感到困惑，因为有时它有效，有时无效。

任何帮助或建议都会有很大帮助，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:19:07.697

基本上，这条消息的意思是脚本能够到达服务器，但它需要连接的端口要么停止，要么拒绝请求。大多数情况下，这是由于防火墙问题或防病毒软件造成的。我想我想说的是，这不仅仅是一个编码问题，它是一个基础设施设置问题，您可能需要管理您的网络/服务器的任何人的帮助

# cordova - 使用 Phonegap Build API 不会更改版本

> ID：16177364
> 
> 赞同：1
> 
> 时间：2013-04-23T19:11:53.663
> 
> 标签：cordova, phonegap-build

我使用 Phonegap Build API 来构建我的应用程序。

我将我的应用程序的源代码压缩为一个 .zip 存档，其中包括一个 config.xml 文件，该文件包含多个功能以及“版本”和“版本代码”-for Android-。无论如何，我在 config.xml 文件中做的一切都是正确的。问题是，当我更改版本和版本代码，然后将源代码存档文件 -config.xml 也在存档中 - 发送回 Phonegap Build 时，我的应用程序的版本没有改变。

当我下载 Phonegap Build 生成的 .apk 文件时，该应用程序似乎没有改变。我没有看到我最近在应用程序中所做的更改。即使我卸载该应用程序并重新构建它，然后再次下载并安装，它仍然是同一个旧应用程序。

我应该怎么办？我应该分别上传 .zip 和 config.xml 文件以正确处理更新吗？

# c# - 为同一节点反序列化具有不同树结构的 XML

> ID：16177375
> 
> 赞同：1
> 
> 时间：2013-04-23T19:12:20.507
> 
> 标签：c#, .net, xml, serialization, xml-parsing

## 问题

我正在使用如下结构的 XML，并且遇到问题，因为`<value>`标签可以包含多种类型的数据，并且有时可以具有嵌套值。我已经尝试使用抽象类`ListItem`并具有几种不同类型的值，但它似乎不起作用，因为 XmlSerializer 要求我以某种方式在不同的密封类之间进行选择 - 这是我做不到的。

```
<listContainer>
    <listItem>
        <value>
            <boolean>true</boolean>
        </value>
    </listItem>
    <listItem>
        <value>1</value>
    </listItem>
    <listItem>
        <value>HAI IM A STRING!</value>
    </listItem>
</listContainer> 
```

## 补充笔记

1.  我还尝试编写一个 XmlReaderReader ( [http://msdn.microsoft.com/en-us/library/t2abc1zd(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/t2abc1zd(v=vs.71).aspx) ) 以尝试在可能的情况下深入嵌套标签，但这似乎并不到一个可行的解决方案。
2.  我无法更改 XML 的格式，它来自第三方提要。
3.  XML 文件大约有几个演出。出于性能原因，我正在使用 BufferedStream 并将只转发 XmlReader 传递给默认 XmlSerializer 来执行读取/反序列化。
4.  这不是根级别的 XML，它嵌套在其他几个节点中，但我只需要关于如何正确序列化它的建议。

## 代码

```
public class listContainer {
    [XmlArray(ElementName="listItem")]
    [XmlArrayItem(Type=typeof(listItem), ElementName="listItem")]
    public List<listItem> listItem { get; set; }
} 
```

```
public class listItem {
    // ... help ...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T21:10:03.290

Xml 模式包含歧义 - 在您的示例中，HAI... 和 1 可以是相同的类型、字符串，或者 1 可以反序列化为整数。

我觉得没有简单的方法可以将这些隐式规则表达为可序列化的对象，所以我建议反序列化为XmlNode，然后根据节点属性进行人工识别。例如，如果 XmlNode 包含单个嵌套标签 - 反序列化为 bool，如果没有标签 - 尝试解析为 int，否则使用字符串等。样本非常小，因此很难判断是否会有很多规则。

我必须修改示例，在上面再包含一个根级别，才能正确反序列化。但是你说这个xml已经嵌套了，所以应该没问题。

```
[XmlRoot("root")]
public class container {
  [XmlArray("listContainer")]
  public List<listItem> listItem;
}

public class listItem {
    public XmlNode value;
}

class App {
  static void Main() {
    StreamReader fs = new StreamReader(@"sample.xml");
    XmlSerializer serializer = new XmlSerializer(typeof(container));
    var result = serializer.Deserialize(fs) as container;  
    foreach (var res in result.listItem)
      Console.WriteLine(res.value.OuterXml);
  }
} 
```

示例.xml：

```
<root>
<listContainer>
    <listItem><value><boolean>true</boolean></value></listItem>
    <listItem><value>1</value></listItem>
    <listItem><value>HAI IM A STRING!</value></listItem>
</listContainer>
</root> 
```

# android - Facebook 登录仅允许具有组 ID 字符串的用户

> ID：16177377
> 
> 赞同：0
> 
> 时间：2013-04-23T19:12:25.600
> 
> 标签：android, facebook, facebook-graph-api, cordova, phonegap-plugins

## 从 2013 年 4 月 23 日起，你不能按照我的要求去做。您可以做的一件事是编写 JS 代码，根据从登录对话框收到的组 ID 重定向到某个页面。

* * *

我正在使用 Facebook JS SDK 创建一个 Facebook 连接/登录区域。该区域将针对特定 Facebook 群组的成员。我需要登录来检查他们是否是组的一部分，如果没有登录失败，如果是，那么他们可以继续到下一页。

这是请求查看他们的群组的权限的代码（以及朋友群组，因为该群组是秘密的，因此根据 Facebook 文档需要此权限）。

```
function login() {
            FB.login(
                     function(response) {
                     if (response.session) {
                     alert('8');
                     } else {
                     alert('9');
                     }
                     },
                     { scope: "email,user_groups,friends_groups" }
                     );
        } 
```

我知道根据图形 API 我可以调用类似的东西：

```
{
  "email": "*useremail*@gmail.com", 
  "id": "*userid*", 
  "groups": {
   "data": [
  {
    "id": "*groupid*", 
    "administrator": true, 
    "bookmark_order": 1
  }
], 
"paging": {
  "next": "https://graph.facebook.com/*userid*/groups?fields=id&limit=5000&offset=5000&__after_id=*groupid*"
    }
  }
} 
```

我把 * 放在我替换的东西周围，以隐藏组 ID 和我的 FB 用户 ID。

* * *

我在 Facebook 的文档中找不到任何内容，说明是否可以调用特定的组 ID 而不是所有组 ID 进行登录。此外，如果有任何人可以检查返回的值是否与我需要的组 ID 匹配，那么这也是可以接受的。

我希望这足以与之合作并感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:15:51.700

如果用户不是特定组的成员，目前无法使用标准 Facebook 登录序列将登录设置为失败。您将需要运行标准登录，然后（在您的服务器上）检查他们是否在组中。您不想在浏览器中使用 Javascript 进行组成员身份检查，否则登录可能会被欺骗。

编辑：您需要使用 javascript API（一旦用户登录）来获取组连接（如[http://developers.facebook.com/docs/reference/api/user/](http://developers.facebook.com/docs/reference/api/user/)中所述）。像这样（在您的登录回调中）：

```
var check_for_group = function(groupid, callback){
FB.api('/me/groups', function(response) {
  // process the list of groups: response is an array
  for(var i=0;i<response.length;i++){
    if(response[i].id == groupid){ callback(true); return }
  }
  callback(false);
});
}; 
```

自从我研究它以来已经有一段时间了，所以你必须验证响应对象实际上是数组，但是如果你`check_for_group()`用你正在寻找的组的 id 调用它，它将用 a 调用`true`（如果您想要的组在响应列表中）或`false`（否则）。尝试类似的方法，看看它是否适合您。

# c# - 无法加载文件或程序集 antlr.runtime

> ID：16177378
> 
> 赞同：2
> 
> 时间：2013-04-23T19:12:26.740
> 
> 标签：c#, asp.net, .net-4.0, antlr, mef

我正在使用 MEF 向我的 ASP.net Web 应用程序添加一些部分。我做了一个 PoC 项目，一切都像魅力一样。但是当我尝试将它添加到我现有的网络应用程序时，我收到以下错误：

> 无法加载文件或程序集 'antlr.runtime, Version=2.7.6.2, Culture=neutral, PublicKeyToken=1790ba318ebc5d56' 或其依赖项之一。该系统找不到指定的文件。

我的项目没有任何对 antlr.runtime 的引用，如果我删除了 MEF 代码，它就可以正常工作。

```
var catalog = new AggregateCatalog();
catalog.Catalogs.Add(new DirectoryCatalog("bin"));
_container = new CompositionContainer(catalog);
var exports = _container.GetExports<HLResourceProviderFactoryBase>(); 
```

我的`DirectoryCatalog`对象成功地找到了我想从中获取零件的程序集。

关于可能是什么问题的任何提示？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T19:16:55.997

您可以使用[AssemblyInfo 工具](http://assemblyinformation.codeplex.com/) 查看依赖关系图并找出哪些程序集依赖于“antlr.runtime”。

# c# - 如何使用 LiNQ 构建查询以选择主和最后一个细节（最大值（Id））

> ID：16177384
> 
> 赞同：0
> 
> 时间：2013-04-23T19:12:41.030
> 
> 标签：c#, linq, entity-framework

如何编写 LiNQ 到实体查询，如以下问题的答案中的查询：

[SQL 从主表中选择 - 详细表](https://stackoverflow.com/questions/3418154/sql-select-from-master-detail-tables)

我想利用我的模型中存在的现有导航属性（将数据库导入到实体框架 EDMX）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T20:43:54.887

除了 AarronLS 提出的假设之外，您还需要从 Brands 到 Models 的导航属性。

```
var modelsAndBrandsFlattened = from brand in db.Brands
                               let latestModel = brand.Models.Last()
                               select new {
                                   brand.Brand,
                                   brand.BrandId,
                                   latestModel.Model,                                       
                                   latestModel.ModelId
                                } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T19:16:42.587

假设有一个从 Model 到 Parent Brand 的导航属性称为`Brand`，并且`db`是您的 DbContext

```
var modelsAndBrandsFlattened = db.Models.Select(m => new {
        m.Brand.Brand,
        m.Model,
        m.Brand.BrandId,
        m.ModelId
    }); 
```

# getjson - $.get 请求解析 API

> ID：16177386
> 
> 赞同：1
> 
> 时间：2013-04-23T19:12:44.953
> 
> 标签：getjson

我项目的下一步是删除这个辅助函数并创建您自己的函数以从解析 API 中提取字符串数组。说明如下：

“您将开始直接与服务器交互，因此它将帮助您了解更多信息。服务器由 Parse 运行，Parse 是一个灵活的数据存储系统，提供了一种通过 HTTP 访问和更新信息的结构化方式（又名 REST API）。*您可以在他们的 API 文档 ( [https://www.parse.com/docs/rest](https://www.parse.com/docs/rest) )中阅读更多关于该系统的详细信息，但请记住：您花在研究上的时间越少，时间就越多您将继续执行下一步。

是时候学习 AJAX 了！jQuery 在这方面也有很大帮助。事实上，除了 jQuery 的 AJAX 库之外，不要使用任何与服务器通信的技术，因为我们已经对其进行了一些修改以简化权限，否则您会遇到问题。* 提示：默认情况下，Parse API 不保证结果的顺序，因此您需要在发送的数据中向它们传递“order”属性。"

我试图理解 $.get() 函数，因为我认为这是我应该使用的。我想将请求作为 fetchNew 函数的一部分放入，理想情况下应该从服务器获取数据并显示它。任何帮助都是极好的。这不是一个容易的项目，而且方向非常渺小。任何正确方向的提示都会很棒。

```
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<script src="http://chatbuilder.hackreactor.com/ChatBuilder.js"></script>
</head>
<body>
  <script>
  Chat.guide.start();
  delete Chat.display();
</script>

<h2>Borken Chat</h2>

<input class="draft" type="text"/> <button class="send">send
</button>

<ul class="messages">

  <script>

    var Chat_Messages=[];

    function fetchNew() {
      var PrintChat=function(Chat_Messages){
      var y=Chat_Messages.length;
      for(i=0;i<y;i++){
        $(".messages").append("<li>"+Chat_Messages[i]+"<li>");

      }
      }
    $.get("https://api.parse.com",(PrintChat),"json");
   }

   setInterval(fetchNew,3000);

   $('.send').on('click', function(){
     var message = $('.draft').val();
     Chat.send(message);
   });

  </script>

</ul> 
```

# python - NIH 网站上的 Python Mechanize 提交按钮

> ID：16177389
> 
> 赞同：1
> 
> 时间：2013-04-23T19:12:55.800
> 
> 标签：python, button, submit, mechanize

我在 python 2.7.3 上使用 mechanize。我正在寻求有关点击[NIH 基因网站](http://www.ncbi.nlm.nih.gov/gene)上的提交按钮的帮助。

按钮是由 div 包围的实际按钮元素，不在任何表单字段内。

```
<button id="search" type="submit" class="button_search nowrap" cmd="go">Search</button> 
```

到目前为止，在示例和我在网上看到的内容中，提交按钮通常具有机械化可以选择的名称或标签，或者在表单中以便我可以执行 br.submit()。

我将如何点击提交？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T19:55:59.193

该按钮不直接提交for，而是触发一个JavascriptEvent，最终会加载搜索页面。这解释了为什么按钮在您的浏览器中工作，即使它不在表单内。

`mechanize`无法运行 JS 代码，因此您将无法直接使用`mechanize`.

您是否有理由不能只打开目标 URL？即使在高级搜索表单上，这些看起来也很简单，例如：

```
term = '("31"[Chromosome]) AND "000"[Disease/Phenotype]'
q = urllib.urlencode({'term': term})
response = mechanize.urlopen('http://www.ncbi.nlm.nih.gov/gene?%s' % q) 
```

如果这对您不起作用，您将不得不求助于支持 JavaScript 的解决方案，请参阅[https://stackoverflow.com/questions/606550/watir-vs-selenium-vs-sahi](https://stackoverflow.com/questions/606550/watir-vs-selenium-vs-sahi)以获取指针。

# ruby-on-rails - 使用 Roo gem 读取单元格显示数据

> ID：16177390
> 
> 赞同：4
> 
> 时间：2013-04-23T19:12:57.313
> 
> 标签：ruby-on-rails, ruby, rubygems, gem

我正在开发一个解析 excel 文件的 508 html 表。我想读取正在显示的单元格数据（不是 roo 吐出的浮点值）。当有公式时，roo gem 不仅仅是在应用格式后读取数据。像这里一样，我得到浮点值，例如：“90.909090909090907”，但在 excel 上显示的数字是“91”。如果我只是获取正在显示的 excel 数据的字符串值，那很好。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-02T15:50:54.343

同样的问题。作为[Magesh 答案](https://stackoverflow.com/a/17633212/2945616)的补充，如果您不知道哪些单元格将是整数，您可以通过以下方式检查：

`s.cell(i, j).to_i if s.cell(i,j).is_a?(Float) && s.cell(i,j).denominator == 1`

显然，您可能会有一些误报，但在大多数情况下，它会将应该是整数的单元格变成整数并保留那些应该是浮点数的单元格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-13T18:49:58.847

当我第一次尝试使用“roo”gem 时，我遇到了同样的问题。你可以通过使用 .to_i 来解决这个问题，

```
row = spreadsheet.row(1)
row[0].to_i 
```

在这里， .to_i 会将数字从浮点表示更改为普通整数，如 91 而不是 91.0 或 91.03030 或其他任何可能

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-19T17:13:12.157

查看`Roo::Base.cell_to_csv`（私有）方法以了解如何处理电子表格的数据类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-19T11:13:45.817

要获取显示的值（格式化值），请使用此方法

```
xlsx.formatted_value(row,col) 
```

[http://www.rubydoc.info/gems/roo/frames](http://www.rubydoc.info/gems/roo/frames)

# android - 使用 onclicklistener 终止 DialogFragment

> ID：16177398
> 
> 赞同：0
> 
> 时间：2013-04-23T19:13:43.737
> 
> 标签：android, button, onclicklistener, dialogfragment

我正在尝试创建一个`DialogFragment`允许您输入四个字段的类，然后单击“完成”按钮。单击按钮后，`DialogFragment`应更改某些文本值，然后终止返回主屏幕。

到目前为止，我让它做我想做的一切，除了终止。对话框将所选内容更改`TextView`为“你好”，然后一直徘徊。

谁能告诉我如何让它消失？谢谢！

```
public class TeamFragment extends DialogFragment {
    TextView team1, team2, score1, score2;

    public TeamFragment(View t1, View t2, View s1, View s2) {
        team1=(TextView) t1;
        team2=(TextView) t2;
        score1=(TextView) s1;
        score2=(TextView) s2;
    }

    public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.team_score_layout, container);
        //mEditText = (EditText) view.findViewById(R.id.txt_your_name);
        getDialog().setTitle("Enter Team Name");
        Button b = (Button) view.findViewById(R.id.teamButton);

        b.setOnClickListener(new OnClickListener() {
          public void onClick(View v) {
            team1.setText("hello");

          }
        });
        return view;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:22:06.450

您可以使用以下方法关闭[DialogFragment](http://developer.android.com/reference/android/app/DialogFragment.html)

```
dismiss() 
```

# java - 如何通过特定键查找数组中的最后一个元素

> ID：16177403
> 
> 赞同：0
> 
> 时间：2013-04-23T19:13:51.880
> 
> 标签：java, arrays, find, key

我必须通过特定键（使用二进制搜索方法）找到第一个和最后一个元素。我已经完成了 searchFirst 方法，但我无法完成 searchLast 方法。有时它起作用，有时它不起作用（这取决于我正在寻找的价值），这就是问题所在。

我有一个 Data 类，其中包含一些属性，如时间戳、名称、产品等，我从文本文件中读取。当我完成填充数据数组时，我使用合并排序对数组进行排序。

然后我需要特定名称的数组的第一个和最后一个元素。

searchFirst 方法完美，但 searchLast 不会做我想要的。

这是 searchLast 方法的代码（n 是他应该查找的值，w 目前不使用）。

```
public static int searchLast(Data[] array, String n, String w) {
        int left = 0;
        int right = array.length - 1;
        int m = -1;

        while (left < right) {
            m = (left + right) / 2;
            if (array[m].getName().compareTo(n) > 0) {
                right = m - 1;
            } else {
                left = m + 1;
            }
        }

        if (m >= 0) {
            if (array[right].getName().equals(n)) {
                return right;
            }
        }

        return NO_KEY;
    } 
```

我找不到错误也许你可以帮助我......有时代码找到最后一个有时它没有......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T19:30:54.383

```
public static int searchLast(Data[] array, String n, String w) {
        int left = 0;
        int right = array.length - 1;
        int m = -1;
        int found = -1;

            while (left < right) {
                m = (left + right) / 2;
                if (array[m].getName().compareTo(n) > 0) {
                    right = m - 1;
                } else if (array[m].getName().compareTo(n) < 0){
                    left = m + 1;
                } else {
                    found = m;
                    left = m + 1;
            }

        return found;
    } 
```

# ios - 用什么来移动 UIView self.frame 或 self.transform 属性？

> ID：16177409
> 
> 赞同：4
> 
> 时间：2013-04-23T19:14:15.427
> 
> 标签：ios, view, properties

我有点困惑这个问题。

我知道我可以移动视图来改变它们`self.frame.origin`，但是我发现有一个名为 transform 的属性，我认为这是为了在屏幕上移动我的视图等等。
也许我有点不明白。

所以我想知道：我必须使用哪个属性来移动`UIView`（或者它的子类），另一个属性是什么？或者，如果我完全错了，请告诉我正确的方法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T19:34:05.853

a的`frame`属性`UIView`定义了它相对于它的父视图的位置。如果你想移动一个视图，那就是要走的路。

该`transform`属性基本上适用`CGAffineTransform`于视图的支持层。在大多数情况下，如果您只想移动视图，则不想使用此属性。

该`transform`属性在旋转或缩放图层（即视图）时很有用。有时，当您应用旋转时，您还需要移动它以使其“保持”它的位置，在这种情况下，您将使用该`transform`属性来移动它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-11-27T18:25:57.783

添加更多信息

为什么要用框架。引用自[View Programming Guide](https://developer.apple.com/library/ios/documentation/WindowsViews/Conceptual/ViewPG_iPhoneOS/WindowsandViews/WindowsandViews.html#//apple_ref/doc/uid/TP40009503-CH2-SW1)

> 当您想要实现动画时，通常会修改视图的变换属性。例如，您可以使用此属性创建视图围绕其中心点旋转的动画。**您不会使用此属性对您的视图进行永久更改**，例如在其父视图的坐标空间内修改其位置或视图大小。对于这种类型的更改，您应该修改视图的框架矩形

为什么要使用变换。引自[Demystifying CGAffineTransform](http://iphonedevelopment.blogspot.com/2008/10/demystifying-cgaffinetransform.html)

> 翻译只是说“动”的一种花哨的方式。当然，您可以通过更改视图的 frame 属性的原点值（相对于其父视图移动视图）来完成移动，但是由于我们**不能将 frame 属性与其他转换一起使用**，因此平移转换是一个重要的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-23T19:32:59.820

您可以通过更新其框架来移动 UIView。变换用于旋转和缩放视图。如果您想以动画方式移动视图，请尝试使用如下动画块：

```
 [UIView animateWithDuration:0.3 //Time for the animation
                             animations:^{
                               myView.frame = CGRectMake (0,0,10,20) //Move your frame
                             }
                             completion:^(BOOL finished){
                                //Do stuff when the animation completes
                             }]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-28T11:38:06.540

```
CGrect = rect1 = [view1 frame];

rect1.origin.x = newX;
rect1.origin.y = newY; 
```

你必须在动画中使用 setFrame：`^{ <here> }`

```
[view1 set enter code here Frame:rect1]; 
```

# java - Java：将一组字符转换为单个字符串

> ID：16177417
> 
> 赞同：0
> 
> 时间：2013-04-23T19:14:34.640
> 
> 标签：java, string, loops, char, character

我一直在尝试制作一个允许我加密用户名和密码并打印结果的程序。我可以让它工作，但我想将循环中出现的字符排序为一个字符串，以便于管理。有什么建议吗？

```
System.out.println("\nYour encrypted username is " );

    for(char c : namech)
    {
        int temp = (int)c;
        int namecode = 0;

        //makes the characters w,x,y,z loops back to the start of the alphabet
        if(temp<=90 & temp>=65)
        {
            namecode = temp+4;

            if(namecode == 91)
            {
                namecode = 65;
            }
            else if(namecode == 92)
            {
                namecode = 66;
            }
            else if(namecode == 93)
            {
                namecode = 67;
            }
            else if(namecode == 94)
            {
                namecode = 68;
            }

            int i = namecode;

            char d = (char)i;

            System.out.print(d);

        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T19:19:26.713

> 我想将循环中出现的字符排序为单个字符串

最简单的方法可能是将整个东西变成 a `char[]`，然后将其转换回字符串：

```
char[] chars = namech.toCharArray();
for (int i = 0; i < chars.length(); i++) {
    chars[i] = obfuscateCharacter(chars[i]);
}
String obfuscated = new String(chars); 
```

... where`obfuscateCharacter`基本上是您当前循环的主体，但提取到处理单个字符的方法中，这更容易测试等。（我拒绝称它为`encryptCharacter`安全的印象：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T19:19:14.420

我会使用 StringBuilder 并在加密时附加每个字符。简单高效的串联。IE。

```
StringBuilder sb = new StringBuilder();

for (char c : namech)
{
    // ... your code was here
    sb.append(d);
}

System.out.println(sb.toString()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T19:29:49.667

```
String result = null;
int j = 91;
int k = 92;

result = String.valueOf((char)j);
result += String.valueOf((char)k); 
```

Btw this looks like a perfect place to make use of a Switch statement instead of multiple if, else if....

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T20:30:09.517

万一你真的需要加密数据，你自己很难做到。一般来说，手动进行自己的加密并不是一个好主意，而是使用更受信任的加密方案。

**[请参阅https://stackoverflow.com/questions/2430412/what-java-library-should-i-use-for-cryptography](https://stackoverflow.com/questions/2430412/what-java-library-should-i-use-for-cryptography)** [http://www.bouncycastle.org/](http://www.bouncycastle.org/)中提到的 Bouncy Castle API

# scala - Scala - 应该使用 ExecutorService 在线程之间拆分工作吗？

> ID：16177418
> 
> 赞同：4
> 
> 时间：2013-04-23T19:14:35.840
> 
> 标签：scala, concurrency

来自 Java 背景，在多个线程之间拆分多个任务的问题可以很容易地使用 ExecutorService 并通过该接口提交任务。你会说同样的方法在 Scala 世界中有意义吗？如果是这样，是否有该 API 的 Scala 版本？

如果没有，你会推荐什么方法？演员似乎有点矫枉过正，因为我认为它们主要用于线程通信......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T00:11:27.183

如果您不想走演员路线，那么您当然可以使用`ExecutionContext`and `Futures`。如果你有一个隐含`ExecutionContext`的范围，你可以做这样的事情，如果你有一组固定的任务，你想同时运行：

```
val f1 = Future{
  //do something here
}  
val f2 = Future{
  //do something else here
} 
val aggFut = for{
  f1Val <- f1
  f2Val <- f2
} yield (f1Val, f2Val)

aggFut onComplete{
  case Success(tup) => //handle success case here
  case Failure(ex) => //handle failure here
} 
```

在此示例中， tup`Success`将包含 f1 和 f2 按该顺序的结果。

如果您有动态数量的并行任务要运行，您可以执行以下操作：

```
val futs = someList.map(item => Future{...})
val aggFut = Future.sequence(futs)
aggFut onComplete{
  case Success(list) => //handle success case here
  case Failure(ex) => //handle failure here
} 
```

在这个成功案例中，将包装从函数`Success`返回的任何类型的列表。`Future`

最后，如果您想执行一些基于序列的异步任务集，您可以执行以下操作：

```
val fut = for{
  val1 <- Future{...}
  val2 <- Future{...}
} yield val2
fut onComplete{
  case Success(v2) => //handle success case here
  case Failure(ex) => //handle failure here
} 
```

在这种情况下，该值`val1`将可用于`Future`正在计算的`val2`。这只是真正触及表面。如果您有兴趣了解更多信息，请查看[http://docs.scala-lang.org/overviews/core/futures.html](http://docs.scala-lang.org/overviews/core/futures.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T19:20:30.317

**纯 Scala 方式**

Scala 的并发模型基于 Erlang Actor 模型。这是一种略有不同的方法。要充分利用 Scala 的并发性，请使用 Akka 之类的东西。基本的使用思路相当简单。

最简单的任务是使用一个`Future`（异步操作）。[在此处](http://docs.scala-lang.org/overviews/core/futures.html)阅读有关此内容的更多信息。Executors 框架不是您应该采用的方法。实现强大的多线程有很多选择| Scala 应用程序中的并行性：

1.  [阿卡](http://akka.io/)
2.  [Lift](http://liftweb.net/) actor（使用 Lift web 框架时）。
3.  [Finagle](http://twitter.github.io/finagle/)（Twitter RPC 框架）。
4.  默认的 Scala 演员库，在 Scala 2.10 中已弃用。[在这里](http://www.scala-lang.org/node/12396)阅读更多。

**Scala/Java 互操作性方法**

Actor 可能对您习惯于实现并发的方式产生巨大的变化，而 Java 在这方面没有缺点。因此，您仍然可以在 Scala 应用程序中使用 Executor 框架进行多线程处理。

这意味着您将几乎完全依赖本机 Java 并发结构，但它使您不得不进行大量更改。[在此处](http://twitter.github.io/scala_school/concurrency.html)阅读有关如何在 Scala 中执行此操作的更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T19:19:10.553

[这是并行集合](http://docs.scala-lang.org/overviews/parallel-collections/overview.html)的一个很好的用例（如果任务相对繁重）：

```
val TasksNumber = 27
val tasks = List.fill(TasksNumber) { () => Thread.sleep(10000) }
tasks.par.map(t => t.apply) 
```

# grails - Grails lucene 搜索花费了过多的时间

> ID：16177423
> 
> 赞同：1
> 
> 时间：2013-04-23T19:14:47.367
> 
> 标签：grails, lucene, compass-lucene, grails-searchable

作为背景，我在我的应用程序中使用 Grails v2.2.1 和 Searchable 插件 (v0.6.4)，尽管在配置 Lucene 方面我是新手。

日志显示搜索需要 26 毫秒，但罗盘事务大约需要 15 秒才能返回：

`2013-04-23 00:40:34,269 DEBUG grails.plugin.searchable.internal. compass.search.DefaultSearchMethod - query: [+kind:band +name:snoop], [4] hits, took [26] millis`

`2013-04-23 00:40:49,965 DEBUG org.compass.core.transaction.LocalTransaction - Committing local transaction on thread [http-bio-8080-exec-10] Compass [1176020804] Session [2089649487]`

与 Lucene 相比，这似乎是 Compass 的问题，因为查询执行速度很快，但 Compass 映射将我的 Java 进程固定在接近 100% CPU 并且挂起时间过长。

我索引了大约 3500 个域对象，我的域模型如下所示：我尝试仅索引字段名称和 id，但通过 Luke 看到它似乎映射了域中的所有内容。

```
package com.bandbot

class Band {
    def slugGeneratorService
    static searchable = {
        mapping {
            spellCheck "exclude"
            only: ['name', 'id']
        }
    }
    String name
    String biography
    String profileImage
    String slug
    String similarBands // this will store bands/url/pic in the form of Kanye West::url::img.png~Queen::url::img.png
    boolean onTour // is this band currently touring? (Info from lastfm)
    String mbid // This band's MusicBrainz ID see @ http://musicbrainz.org/doc/MusicBrainz_Identifier
    String bandUrl
    String lastFMUrl // stores the lastfm url
    Date dateOfInception
    Date dateDisbanded
    Date lastUpdated

    static belongsTo = [Genre, BandbotUser]

    static hasMany = [ events : Event, genres : Genre ]

    def beforeInsert() {
        lastUpdated = new Date()
        this.slug = slugGeneratorService.generateSlug(this.class, "slug", name)
    }

    def beforeUpdate() {
        lastUpdated = new Date()
        if (isDirty('name')) {
            this.slug = slugGeneratorService.generateSlug(this.class, "slug", name)
        }
    }

    static constraints = {
        name(nullable: false, blank: false, unique: true)
        slug(nullable: true)
        bandUrl(nullable: true)
        dateDisbanded(nullable: true)
        mbid(nullable: true)
        dateOfInception(nullable: true)
        biography(nullable: true)
        similarBands(nullable: true)
        lastUpdated(nullable: true)
        lastFMUrl(nullable: true)
        kind( display: false )
    }
    static mapping = {
        onTour defaultValue: false
        biography type: 'text'
        similarBands type: 'text'
    }

    String toString(){name}

} 
```

我的控制器中的乐队搜索逻辑：

```
def search() {
    if (!params.q?.trim()) {
        return [:]
    }
    try {
        def searchResult

        if (params.sort) {
            searchResult = searchableService.search(
                    params.q.trim(),
                    [offset: params.offset ? params.int('offset') : 0,
                            max: params.max ? params.int('max') : 10,
                    sort: params.sort, order: params.order? params.order : 'asc']
                    )
        }
        else {
            searchResult = searchableService.search(
                    params.q.trim(),
                    [offset: params.offset ? params.int('offset') : 0,
                            max: params.max ? params.int('max') : 10]
                    )
        }

        return [searchResult: searchResult, params: params]

    } catch (SearchEngineQueryParseException ex) {
        return [parseException: true, params: params]
    }

} 
```

任何想法将不胜感激。这是我的一个自学项目，我真的很想以正确的方式进行搜索。:) 谢谢，凯文

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-25T14:48:49.480

在我正在开发的最近的 Grails 应用程序上使用可搜索插件时，我遇到了同样的问题。我有两个域对象，具有一对多关系，我正在索引以进行搜索。为简单起见，我只是展示了域对象及其字段和关系。我没有显示任何映射或约束信息。这是我原来的课程

```
class CodeValue{
    static searchable ={
        only:['value', 'description']
        value boost: 2.0
    }
    String value
    String description
    static belongsTo = [codeset: CodeSet]
}
class CodeSet{
    static searchable ={
        only:['name', 'description']
        name boost: 2.0
    }

    String name
    String description
    static hasMany = [codeValues:CodeValue]
} 
```

搜索 CodeValues 的时间超过 17 秒。我确实索引了超过 1000 个 CodeValue 对象，但是 17 秒的搜索时间是不可接受的。我找出了导致搜索时间缓慢的原因，这似乎与 Grails Searchable 插件中内置的 Compass 功能有关。

作为搜索的一部分，所有匹配的对象都被编组到索引中。对于 100 的一组域对象，执行此编组的时间并不算太糟糕，但是，当您进入 1000 时，它需要大量的时间。也许时间也与被编组的对象的复杂性有关？无论如何，我找到了一个和我有类似问题的人的博客文章。

[http://webcache.googleusercontent.com/search?q=cache:lebHKgX2yXUJ:blog.hououji.info/archives/165+&cd=10&hl=en&ct=clnk&gl=us](http://webcache.googleusercontent.com/search?q=cache:lebHKgX2yXUJ:blog.hououji.info/archives/165+&cd=10&hl=en&ct=clnk&gl=us)

总结这篇文章，当他搜索 1000 多个对象时，搜索时间大于 15 秒。就像我正在经历的一样。

他提到了两件事：

1）将“supportUnmarshall”选项设置为false，默认值为true，在域对象的“静态可搜索”配置中。通过设置此选项，搜索匹配不会编组到索引中，但是搜索时间非常快。将此选项设置为 false 的缺点是结果将不包含从索引中解组的对象，并且您必须使用作为搜索结果的一部分返回的 id 从数据库中获取匹配的域对象。你会认为这会很糟糕，但事实并非如此，使用这种方法，我的搜索结果实际上显示得比以前快得多。这是有关设置 supportUnmarshall 选项的信息的 URL [http://grails.org/Searchable+Plugin+-+Mapping+-+Class+Mapping](http://grails.org/Searchable+Plugin+-+Mapping+-+Class+Mapping)。它是“选项”部分中的最后一个选项。

2）在Searchable.groovy配置文件的defaultMethodOptions中启用“reload”。因此，在 Searchable.groovy 文件中添加如下内容：

```
defaultMethodOptions = [
    search: [reload: true, escape: false, offset: 0, max: 25, defaultOperator: "and"],
    suggestQuery: [userFriendly: true]
] 
```

您将需要添加 Searchable Config 插件来更新此值。添加和编辑 Searchable.groovy 配置文件的详细信息可以在 Grail Searchable 插件的网页上找到。因为我没有足够高的声誉。我不能发布两个以上的链接，因此您需要访问 Grails Searchable 插件的网页，并查找有关如何安装 Searchable Config Plugin 的文档。

举一个性能改进的例子。以前，对 CodeValues 的搜索需要 17 多秒才能完成。它们现在在 0.002 秒内完成。

我写的最终代码是这样的：

```
class CodeValue{
    static searchable ={
        only:['value', 'description']
        value boost: 2.0
        supportUnmarshall false
    }
    String value
    String description
    static belongsTo = [codeset: CodeSet]
}
class CodeSet{
    static searchable ={
        only:['name', 'description']
        name boost: 2.0
        supportUnmarshall false
    }

    String name
    String description
    static hasMany = [codeValues:CodeValue]
} 
```

# web-services - 仅使用 web 服务测试的 Loadrunner 和缺点

> ID：16177427
> 
> 赞同：1
> 
> 时间：2013-04-23T19:15:00.623
> 
> 标签：web-services, loadrunner

有一个带有测试套件的soapui项目，该测试套件由多个Web服务调用组成，代表用户执行业务流程并将先前身份验证请求返回的cookie与下一个请求等相关联，我想知道：如果有的话，有什么缺点跳过 GUI 并仅在 ws 级别进行测试，因为我的 ws 请求链准确地代表了用户将通过 GUI 完成的操作？没有任何？如果更改 GUI 元素是一个好处，则更容易维护测试脚本。有人使用这种方法有过一些不好的经历吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T15:08:07.043

我认为这完全取决于您定义的系统性能测试目标是什么。如果 Web 服务器提供的所有 GUI 页面和整个 GUI 中使用的资源元素（javascript 文件、css 文件、图像等）都是您希望包含在测试和响应时间中的元素，那么您应该继续包含所有这些元素。如果您真的只关心服务层处理以及其下游的任何内容（应用服务器、负载均衡器、数据库等），那么删除 GUI 并直接访问服务是有意义的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T22:47:45.877

这个关于仅使用传输层请求到服务器的有效性的论点已经解决了二十多年。服务器不知道也不关心是否附加了 GUI。您的服务器仅响应请求。

仅当您或使用的工具无法重现传输层请求时，才需要对 GUI 进行操作

# r - 为什么 data.frame 不解析数据帧参数？

> ID：16177430
> 
> 赞同：1
> 
> 时间：2013-04-23T19:15:19.263
> 
> 标签：r

这似乎与帮助文件中写的相反：

> “如果将列表、数据框或矩阵传递给 data.frame，就好像每个组件或列都作为单独的参数传递”

那么我做错了什么？

示例代码：

```
d <- c("bla", "bla", "blou", "blou", "bli")
dtest <- data.frame(d, stringsAsFactors=FALSE)
dtest2 <- data.frame(dtest, stringsAsFactors=TRUE)
dtest3 <- data.frame(dtest[[1]], stringsAsFactors=TRUE)

str(c(dtest2, dtest3)) 
```

一个是字符向量，另一个已转换为因子（遵循 stringsAsFactor=TRUE 行为）。它们“应该”是两个因素。

我实际上想使用 data.frame(df) 将具有某些字符列的现有数据框转换为具有相应因子的数据框。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T19:28:58.927

这样做：`dtest <- data.frame(d, stringsAsFactors=FALSE)`不设置阻止对 data.frame 的后续调用应用默认 stringsAsFactors-behavior 的属性。您可以通过设置来实现这种状态：

```
 options(stringsAsFactors=FALSE) 
```

另一方面，如果您希望有类似的行为，则应将整个列发送到 data.frame：

```
> dtest2 <- data.frame(dtest)
> dtest3 <- data.frame(dtest[1])
> 
> str(c(dtest2, dtest3))
List of 2
 $ d: chr [1:5] "bla" "bla" "blou" "blou" ...
 $ d: chr [1:5] "bla" "bla" "blou" "blou" ... 
```

如果您想重新评估数据框的所有列，那么我想您可以这样做：

```
data.frame(lapply(dtest, as.vector) )

> str(data.frame(lapply(dtest, as.vector) ))
'data.frame':   5 obs. of  1 variable:
 $ d: Factor w/ 3 levels "bla","bli","blou": 1 1 3 3 2 
```

# matlab - 通过函数调用在matlab中更改矩阵中的值

> ID：16177433
> 
> 赞同：0
> 
> 时间：2013-04-23T19:15:26.293
> 
> 标签：matlab, function, matrix, user-defined-functions

我有一个充满零的矩阵。然后，我想一次将一个 0 更改为值 1。必须由我来决定我想改变哪个元素。我尝试了以下方法：

```
 classdef project < handle

properties
      scheme
end

methods
    function obj = project(antpro,antmed)
        obj.scheme = zeros(antpro,antmed);         
    end      

    function obj = AddEmployee(pronav,mednav)
        % Function adding a employee to the scheme
        obj.scheme(pronav,mednav) = 1;
    end
 end 
```

结尾

我希望有点清楚我想要做什么。当我运行此代码时，我收到消息：“未定义函数 'AddEmployee' 用于类型为 'double' 的输入参数。”

我真的不明白这一点，因为我所有的文件都位于同一个文件夹中，并且它是我的 matlab 会话的路径。

提前谢谢你/Lasse

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:41:03.053

`obj`matlab 中的方法声明需要作为第一个参数传递。以下是相应 matlab 文档的链接：http: [//www.mathworks.nl/help/matlab/matlab_oop/ordinary-methods.html#brdqipw-1](http://www.mathworks.nl/help/matlab/matlab_oop/ordinary-methods.html#brdqipw-1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T19:22:44.890

这是一个类，您需要创建它的一个实例并调用它的`AddEmployee`方法（尽管我不确定您是如何在不知道这一点的情况下设法创建它的）。

```
>> prj = project(); % Create an instance
>> prj.AddEmployee('a', 'name'); % Call a method in the instance 
```

听起来您可能会找到[此](http://www.mathworks.co.uk/help/matlab/matlab_oop/begin-using-object-oriented-programming.html)使用信息。另请参阅[面向对象编程](http://www.mathworks.co.uk/help/matlab/object-oriented-programming.html)文档。

# django - 为 aptana studio 3 配置 Django 1.5.1

> ID：16177435
> 
> 赞同：4
> 
> 时间：2013-04-23T19:15:32.993
> 
> 标签：django, installation, aptana

如何让 Django 在 aptana 中工作？我已经把脸弄坏了，已经尝试了我能找到的一切，但我仍然没有运气。我正在使用 Mac 运行的狮子。

我已经安装了 django 并且在空闲时我可以导入 django 并调用 get_version() 并且它工作正常。然后在aptana中，我认为我做的一切都是正确的。我已经为 python 解释器做了一个自动配置，然后在库中我添加了 django 目录。

> \Library\Frameworks\Python.framework\Versions\2.7\lib\python2.7\site-packages\django

当我尝试创建一个新项目时，我收到此错误：

> 要在 PyDev 中开始使用 Django，先决条件是 Django 已安装在您要使用的 Python / Jython / IronPython 解释器中（因此，“import django”必须正常工作 - 如果您确定 Django 存在并且PyDev 在安装过程中找不到它，您必须转到解释器配置并重新配置您的解释器，以便 PyDev 可以检测到您在添加 Django 后所做的更改）。
> 
> 所选解释器似乎没有可用的 Django，因此，请安装 Django，重新配置解释器以便识别 Django，然后返回此向导。
> 
> 有关如何在 Pydev 中开始使用 Django 的介绍，请访问：http: [//pydev.org/manual_adv_django.html](http://pydev.org/manual_adv_django.html)。

我已经访问了该网站，但没有任何帮助。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-19T15:38:41.247

尝试仅添加`\Library\Frameworks\Python.framework\Versions\2.7\lib\python2.7\site-packages`到库中。

原因是：`site-packages`包含附加安装`packages`的文件夹，其中包含`modules`和其他`packages`. 您需要包含根，以便可以`django`访问整个包（以及任何其他包）。

# xml - 远程 3D 和 4D 变量的 NcML 聚合？

> ID：16177438
> 
> 赞同：1
> 
> 时间：2013-04-23T19:15:41.090
> 
> 标签：xml, netcdf, thredds, ncml

NcML 可以用于聚合 3D 和 4D 网格吗？我不确定，因为它们的维度数量不同。例如海面高度 (ssh) 和水温，其中 ssh 有三个维度 [time, lat, lon] 而 temp 有四个维度 [time, depth, lat, lon]？我的测试没有成功，所以我的直觉是我必须将 3D 和 4D 变量分成单独的目录。但我希望其他人可能有其他建议？

虽然我尝试在下面的代码段中使用“联合”聚合，但由于 3D 变量从 2008 年 12 月 28 日开始，而 4D 变量从 2008 年 5 月 8 日开始，因此没有正确映射时间维度：

```
<?xml version="1.0" encoding="UTF-8"?>
<netcdf xmlns="http://www.unidata.ucar.edu/namespaces/netcdf/ncml-2.2">
  <attribute name="title" value="HYCOM test aggregation #1"/>
  <aggregation type="union">
    <!-- These are the 3D variables: -->
    <netcdf location="dods://apdrc.soest.hawaii.edu:80/dods/public_data/Model_output/HYCOM/global/hycom2d"/>
    <!-- These are the 4D variables: -->
    <netcdf location="dods://apdrc.soest.hawaii.edu:80/dods/public_data/Model_output/HYCOM/global/hycomT"/>
    <netcdf location="dods://apdrc.soest.hawaii.edu:80/dods/public_data/Model_output/HYCOM/global/hycomS"/>
    <netcdf location="dods://apdrc.soest.hawaii.edu:80/dods/public_data/Model_output/HYCOM/global/hycomU"/>
    <netcdf location="dods://apdrc.soest.hawaii.edu:80/dods/public_data/Model_output/HYCOM/global/hycomV"/> 
  </aggregation>
</netcdf> 
```

然后我在“时间”维度上尝试了“joinExisting”聚合，但这仅在数据集每个包含相同变量（它们不包含）时才有效。根据我在聚合中首先列出的数据集，以下示例中会排除 3D 或 4D 变量：

```
<?xml version="1.0" encoding="UTF-8"?>
<netcdf xmlns="http://www.unidata.ucar.edu/namespaces/netcdf/ncml-2.2">
  <attribute name="title" value="HYCOM test aggregation #2"/>
  <aggregation dimName="time" type="joinExisting">
    <!-- These are the 3D variables: -->
    <netcdf location="dods://apdrc.soest.hawaii.edu:80/dods/public_data/Model_output/HYCOM/global/hycom2d"/>
    <!-- These are the 4D variables: -->
    <aggregation type="union">
      <netcdf location="dods://apdrc.soest.hawaii.edu:80/dods/public_data/Model_output/HYCOM/global/hycomT"/>
      <netcdf location="dods://apdrc.soest.hawaii.edu:80/dods/public_data/Model_output/HYCOM/global/hycomS"/>
      <netcdf location="dods://apdrc.soest.hawaii.edu:80/dods/public_data/Model_output/HYCOM/global/hycomU"/>
      <netcdf location="dods://apdrc.soest.hawaii.edu:80/dods/public_data/Model_output/HYCOM/global/hycomV"/> 
    </aggregation>
  </aggregation>
</netcdf> 
```

那么，有没有办法聚合这些数据集呢？我必须将 3D 和 4D 变量分开吗？

谢谢！John Maurer 太平洋岛屿海洋观测系统 (PacIOOS) 夏威夷大学马诺阿分校

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T20:52:37.347

约翰，

由于您要加入的文件具有不同的时间坐标但名称相同，因此您需要重命名其中一个。我原以为这个简单的 NcML 会起作用，只需在 3D 数据中重命名时间维度和时间变量的维度和名称

```
<?xml version="1.0" encoding="UTF-8"?>
<netcdf xmlns="http://www.unidata.ucar.edu/namespaces/netcdf/ncml-2.2">
    <attribute name="title" value="HYCOM test aggregation #1"/>
    <aggregation type="union">
        <!-- These are the 3D variables: -->
        <netcdf location="dods://apdrc.soest.hawaii.edu:80/dods/public_data/Model_output/HYCOM/global/hycom2d">
            <dimension name="time2d" orgName="time"/>
            <variable name="time2d" orgName="time"/>
        </netcdf>
        <!-- These are the 4D variables: -->
        <netcdf location="dods://apdrc.soest.hawaii.edu:80/dods/public_data/Model_output/HYCOM/global/hycomT"/>
        <netcdf location="dods://apdrc.soest.hawaii.edu:80/dods/public_data/Model_output/HYCOM/global/hycomS"/>
        <netcdf location="dods://apdrc.soest.hawaii.edu:80/dods/public_data/Model_output/HYCOM/global/hycomU"/>
        <netcdf location="dods://apdrc.soest.hawaii.edu:80/dods/public_data/Model_output/HYCOM/global/hycomV"/> 
    </aggregation>
</netcdf> 
```

但事实并非如此，因为`_CoordinateAxes`在我们更改变量和维度名称之前，NetCDF-Java 似乎以某种方式添加了一个值为“time lon lat”的属性。因此，如果我们从 3D 数据中删除该属性，它会起作用：

```
<?xml version="1.0" encoding="UTF-8"?>
<netcdf xmlns="http://www.unidata.ucar.edu/namespaces/netcdf/ncml-2.2">
    <attribute name="title" value="HYCOM test aggregation #1"/>
    <aggregation type="union">
        <!-- These are the 3D variables: -->
        <netcdf location="dods://apdrc.soest.hawaii.edu:80/dods/public_data/Model_output/HYCOM/global/hycom2d">
            <dimension name="time2d" orgName="time"/>
            <variable name="time2d" orgName="time"/>
            <variable name="qtot">
                <remove type="attribute" name="_CoordinateAxes"/>
            </variable>
            <variable name="emp">
                <remove type="attribute" name="_CoordinateAxes"/>
            </variable>
            <variable name="t_trend">
                <remove type="attribute" name="_CoordinateAxes"/>
            </variable>
            <variable name="s_trend">
                <remove type="attribute" name="_CoordinateAxes"/>
            </variable>
            <variable name="ssh">
                <remove type="attribute" name="_CoordinateAxes"/>
            </variable>
            <variable name="mld">
                 <remove type="attribute" name="_CoordinateAxes"/>
            </variable>
            <variable name="mlp">
                 <remove type="attribute" name="_CoordinateAxes"/>
            </variable>
        </netcdf>
        <!-- These are the 4D variables: -->
        <netcdf location="dods://apdrc.soest.hawaii.edu:80/dods/public_data/Model_output/HYCOM/global/hycomT"/>
        <netcdf location="dods://apdrc.soest.hawaii.edu:80/dods/public_data/Model_output/HYCOM/global/hycomS"/>
        <netcdf location="dods://apdrc.soest.hawaii.edu:80/dods/public_data/Model_output/HYCOM/global/hycomU"/>
        <netcdf location="dods://apdrc.soest.hawaii.edu:80/dods/public_data/Model_output/HYCOM/global/hycomV"/> 
    </aggregation>
</netcdf> 
```

这是生成数据集的 ToolsUI 的屏幕截图，您可以在其中看到 3D 和 4D 变量：

![](https://i.stack.imgur.com/d2Fkz.png)

# regex - 正则表达式替换 sublimetext2

> ID：16177440
> 
> 赞同：0
> 
> 时间：2013-04-23T19:15:58.250
> 
> 标签：regex, sublimetext2

我想使用正则表达式（最好在 sublimetext2 中）来替换以下内容：

```
<audio id="element29">
<source src="../../audio/sounds/01/mysound.mp3" type='audio/mpeg'>
<source src="../../audio/sounds/01/mysound.wav" type='audio/wav'>
</audio> 
```

有了这个：

```
<?php audioButton("../../audio/sounds/01/mysound","mysound"); ?> 
```

我的正则表达式技能不存在，所以如果有人能帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T20:20:26.907

找什么：

```
<audio id="element\d+">\s*(?:<source src="([^"]+/([^/]+))\.(mp3|wav)" type=[^>]+>\s*){2}</audio> 
```

用。。。来代替：

```
<?php audioButton("$1","$2"); ?> 
```

# spring - Spring Web 流示例

> ID：16177446
> 
> 赞同：0
> 
> 时间：2013-04-23T19:16:16.867
> 
> 标签：spring, spring-webflow

我第一次尝试使用 Spring Web Flow 并关注此链接：[https](https://github.com/SpringSource/spring-webflow-samples) ://github.com/SpringSource/spring-webflow-samples 。我尝试按照 ReadMe.md 中提到的两种方式进行。这是我从 Eclipse-Spring Tools Suite 获得的堆栈跟踪。任何帮助深表感谢。

```
java.util.zip.ZipException: invalid CEN header (bad signature)
at java.util.zip.ZipFile.open(Native Method)
at java.util.zip.ZipFile.<init>(ZipFile.java:127)
at java.util.jar.JarFile.<init>(JarFile.java:136)
at java.util.jar.JarFile.<init>(JarFile.java:73)
at sun.net.www.protocol.jar.URLJarFile.<init>(URLJarFile.java:72)
at sun.net.www.protocol.jar.URLJarFile.getJarFile(URLJarFile.java:48)
at sun.net.www.protocol.jar.JarFileFactory.get(JarFileFactory.java:70)
at sun.net.www.protocol.jar.JarURLConnection.connect(JarURLConnection.java:104)
at sun.net.www.protocol.jar.JarURLConnection.getJarFile(JarURLConnection.java:71)
at org.apache.tomcat.util.scan.FileUrlJar.<init>(FileUrlJar.java:40)
at org.apache.tomcat.util.scan.JarFactory.newInstance(JarFactory.java:34)
at org.apache.catalina.startup.TldConfig.tldScanJar(TldConfig.java:460)
at org.apache.catalina.startup.TldConfig.access$100(TldConfig.java:58)
at org.apache.catalina.startup.TldConfig$TldJarScannerCallback.scan(TldConfig.java:276)
at org.apache.tomcat.util.scan.StandardJarScanner.process(StandardJarScanner.java:241)
at org.apache.tomcat.util.scan.StandardJarScanner.scan(StandardJarScanner.java:166)
at org.apache.catalina.startup.TldConfig.execute(TldConfig.java:250)
at org.apache.catalina.startup.TldConfig.lifecycleEvent(TldConfig.java:540)
at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5161)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566)
at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
at java.util.concurrent.FutureTask.run(FutureTask.java:138)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:895)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:918)
    at java.lang.Thread.run(Thread.java:680)
Apr 23, 2013 2:02:14 PM org.apache.catalina.core.ApplicationContext log
INFO: Initializing Spring root WebApplicationContext
INFO : org.springframework.web.context.ContextLoader - Root WebApplicationContext: initialization started
DEBUG: org.springframework.web.context.support.StandardServletEnvironment - Initializing new StandardServletEnvironment
DEBUG: org.springframework.web.context.support.StandardServletEnvironment - Adding [servletConfigInitParams] PropertySource with lowest search precedence
DEBUG: org.springframework.web.context.support.StandardServletEnvironment - Adding [servletContextInitParams] PropertySource with lowest search precedence
DEBUG: org.springframework.web.context.support.StandardServletEnvironment - Adding [jndiProperties] PropertySource with lowest search precedence
DEBUG: org.springframework.web.context.support.StandardServletEnvironment - Adding [systemProperties] PropertySource with lowest search precedence
DEBUG: org.springframework.web.context.support.StandardServletEnvironment - Adding [systemEnvironment] PropertySource with lowest search precedence
DEBUG: org.springframework.web.context.support.StandardServletEnvironment - Initialized StandardServletEnvironment with PropertySources [servletConfigInitParams,servletContextInitParams,jndiProperties,systemProperties,systemEnvironment]
INFO : org.springframework.web.context.support.XmlWebApplicationContext - Refreshing Root WebApplicationContext: startup date [Tue Apr 23 14:02:14 CDT 2013]; root of context hierarchy
DEBUG: org.springframework.web.context.support.StandardServletEnvironment - Replacing [servletContextInitParams] PropertySource with [servletContextInitParams]
DEBUG: org.springframework.web.context.support.XmlWebApplicationContext - Bean factory for Root WebApplicationContext: org.springframework.beans.factory.support.DefaultListableBeanFactory@71d382ab: defining beans [org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.annotation.internalPersistenceAnnotationProcessor,org.springframework.aop.config.internalAutoProxyCreator,org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0,org.springframework.transaction.interceptor.TransactionInterceptor#0,org.springframework.transaction.config.internalTransactionAdvisor,transactionManager,entityManagerFactory,dataSource]; root of factory hierarchy
DEBUG: org.springframework.web.context.support.XmlWebApplicationContext - Unable to locate MessageSource with name 'messageSource': using default [org.springframework.context.support.DelegatingMessageSource@690ff62a]
DEBUG: org.springframework.web.context.support.XmlWebApplicationContext - Unable to locate ApplicationEventMulticaster with name 'applicationEventMulticaster': using default [org.springframework.context.event.SimpleApplicationEventMulticaster@201532fc]
ERROR: org.springframework.web.context.ContextLoader - Context initialization failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in ServletContext resource [/WEB-INF/config/application-config.xml]: Invocation of init method failed; nested exception is java.lang.NoClassDefFoundError: org/dom4j/DocumentException
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1486)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:524)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:461)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:295)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:223)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:292)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)
    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1117)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:922)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:479)
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:389)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:294)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:112)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4779)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5273)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:895)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:918)
    at java.lang.Thread.run(Thread.java:680)
Caused by: java.lang.NoClassDefFoundError: org/dom4j/DocumentException
    at org.hibernate.ejb.HibernatePersistence.createContainerEntityManagerFactory(HibernatePersistence.java:71)
    at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:288)
    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:310)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1545)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1483)
    ... 22 more
Caused by: java.lang.ClassNotFoundException: org.dom4j.DocumentException
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1711)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1556)
    ... 27 more
Apr 23, 2013 2:02:15 PM org.apache.catalina.core.StandardContext listenerStart
SEVERE: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in ServletContext resource [/WEB-INF/config/application-config.xml]: Invocation of init method failed; nested exception is java.lang.NoClassDefFoundError: org/dom4j/DocumentException
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1486)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:524)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:461)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:295)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:223)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:292)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)
    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1117)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:922)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:479)
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:389)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:294)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:112)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4779)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5273)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:895)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:918)
    at java.lang.Thread.run(Thread.java:680)
Caused by: java.lang.NoClassDefFoundError: org/dom4j/DocumentException
    at org.hibernate.ejb.HibernatePersistence.createContainerEntityManagerFactory(HibernatePersistence.java:71)
    at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:288)
    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:310)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1545)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1483)
    ... 22 more
Caused by: java.lang.ClassNotFoundException: org.dom4j.DocumentException
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1711)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1556)
    ... 27 more
Apr 23, 2013 2:02:15 PM org.apache.myfaces.shared.util.ClassUtils simpleClassForName
SEVERE: Class org.apache.pluto.container.driver.PortletServlet not found
java.lang.ClassNotFoundException: org.apache.pluto.container.driver.PortletServlet
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1711)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1556)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:249)
    at org.apache.myfaces.shared.util.ClassUtils.classForName(ClassUtils.java:199)
    at org.apache.myfaces.shared.util.ClassUtils.simpleClassForName(ClassUtils.java:218)
    at org.apache.myfaces.shared_impl.webapp.webxml.WebXml.getFacesServletMappings(WebXml.java:136)
    at org.apache.myfaces.spi.impl.DefaultWebConfigProvider.getFacesServletMappings(DefaultWebConfigProvider.java:46)
    at org.apache.myfaces.webapp.AbstractFacesInitializer.initFaces(AbstractFacesInitializer.java:124)
    at org.apache.myfaces.webapp.StartupServletContextListener.contextInitialized(StartupServletContextListener.java:111)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4779)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5273)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:895)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:918)
    at java.lang.Thread.run(Thread.java:680)
Apr 23, 2013 2:02:15 PM org.apache.myfaces.webapp.AbstractFacesInitializer initFaces
SEVERE: An error occured while initializing MyFaces: java.lang.ClassNotFoundException: org.apache.pluto.container.driver.PortletServlet
javax.faces.FacesException: java.lang.ClassNotFoundException: org.apache.pluto.container.driver.PortletServlet
    at org.apache.myfaces.shared.util.ClassUtils.simpleClassForName(ClassUtils.java:223)
    at org.apache.myfaces.shared_impl.webapp.webxml.WebXml.getFacesServletMappings(WebXml.java:136)
    at org.apache.myfaces.spi.impl.DefaultWebConfigProvider.getFacesServletMappings(DefaultWebConfigProvider.java:46)
    at org.apache.myfaces.webapp.AbstractFacesInitializer.initFaces(AbstractFacesInitializer.java:124)
    at org.apache.myfaces.webapp.StartupServletContextListener.contextInitialized(StartupServletContextListener.java:111)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4779)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5273)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:895)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:918)
    at java.lang.Thread.run(Thread.java:680)
Caused by: java.lang.ClassNotFoundException: org.apache.pluto.container.driver.PortletServlet
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1711)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1556)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:249)
    at org.apache.myfaces.shared.util.ClassUtils.classForName(ClassUtils.java:199)
    at org.apache.myfaces.shared.util.ClassUtils.simpleClassForName(ClassUtils.java:218)
    ... 14 more
Apr 23, 2013 2:02:15 PM org.apache.catalina.core.StandardContext startInternal
SEVERE: Error listenerStart
Apr 23, 2013 2:02:15 PM org.apache.catalina.core.StandardContext startInternal
SEVERE: Context [/booking-portlet-faces] startup failed due to previous errors
Apr 23, 2013 2:02:15 PM org.apache.myfaces.shared.util.ClassUtils simpleClassForName
SEVERE: Class org.apache.pluto.container.driver.PortletServlet not found
java.lang.ClassNotFoundException: org.apache.pluto.container.driver.PortletServlet
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1711)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1556)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:249)
    at org.apache.myfaces.shared.util.ClassUtils.classForName(ClassUtils.java:199)
    at org.apache.myfaces.shared.util.ClassUtils.simpleClassForName(ClassUtils.java:218)
    at org.apache.myfaces.shared_impl.webapp.webxml.WebXml.getFacesServletMappings(WebXml.java:136)
    at org.apache.myfaces.spi.impl.DefaultWebConfigProvider.getFacesServletMappings(DefaultWebConfigProvider.java:46)
    at org.apache.myfaces.webapp.AbstractFacesInitializer.destroyFaces(AbstractFacesInitializer.java:297)
    at org.apache.myfaces.webapp.StartupServletContextListener.contextDestroyed(StartupServletContextListener.java:153)
    at org.apache.catalina.core.StandardContext.listenerStop(StandardContext.java:4819)
    at org.apache.catalina.core.StandardContext.stopInternal(StandardContext.java:5466)
    at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:232)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:160)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:895)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:918)
    at java.lang.Thread.run(Thread.java:680)
Apr 23, 2013 2:02:15 PM org.apache.catalina.core.StandardContext listenerStop
SEVERE: Exception sending context destroyed event to listener instance of class org.apache.myfaces.webapp.StartupServletContextListener
javax.faces.FacesException: java.lang.ClassNotFoundException: org.apache.pluto.container.driver.PortletServlet
    at org.apache.myfaces.shared.util.ClassUtils.simpleClassForName(ClassUtils.java:223)
    at org.apache.myfaces.shared_impl.webapp.webxml.WebXml.getFacesServletMappings(WebXml.java:136)
    at org.apache.myfaces.spi.impl.DefaultWebConfigProvider.getFacesServletMappings(DefaultWebConfigProvider.java:46)
    at org.apache.myfaces.webapp.AbstractFacesInitializer.destroyFaces(AbstractFacesInitializer.java:297)
    at org.apache.myfaces.webapp.StartupServletContextListener.contextDestroyed(StartupServletContextListener.java:153)
    at org.apache.catalina.core.StandardContext.listenerStop(StandardContext.java:4819)
    at org.apache.catalina.core.StandardContext.stopInternal(StandardContext.java:5466)
    at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:232)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:160)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:895)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:918)
    at java.lang.Thread.run(Thread.java:680)
Caused by: java.lang.ClassNotFoundException: org.apache.pluto.container.driver.PortletServlet
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1711)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1556)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:249)
    at org.apache.myfaces.shared.util.ClassUtils.classForName(ClassUtils.java:199)
    at org.apache.myfaces.shared.util.ClassUtils.simpleClassForName(ClassUtils.java:218)
    ... 15 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T23:35:07.063

我发现 Maven 下载了一些损坏的 jar 文件。我删除了 Maven 存储库并让 Maven 解决依赖关系。它现在工作！

# http - VLC从netty服务器播放HTTP视频流：对等方重置连接

> ID：16177448
> 
> 赞同：0
> 
> 时间：2013-04-23T19:16:21.197
> 
> 标签：http, streaming, netty, vlc, vlcj

我需要扩展基本的 netty HTTP 文件服务器（[https://github.com/netty/netty/tree/master/example/src/main/java/io/netty/example/http/file](https://github.com/netty/netty/tree/master/example/src/main/java/io/netty/example/http/file)）以通过流式传输视频在我对视频进行了一些自定义编码之后的 HTTP。我打算编写一个使用 vlcj 重现流的 Java 应用程序。

但是，即使在开始扩展文件服务器之前，我也遇到了一种奇怪的行为。当我使用 VLC（版本 2.0.6）播放文件时，通过使用基本服务器示例（使用 netty 3.6.5 和 netty 4.0.0.CR1），会发生以下情况：

*   VLC 能够开始复制文件
*   一旦我多次搜索文件，我就会收到以下错误：java.io.IOException: Connection reset by peer

[在使用 mpc-hc ( http://mpc-hc.org/](http://mpc-hc.org/) )播放相同的流时，我没有遇到这个问题。

我是否需要以某种特定方式配置服务器以允许 VLC 正确播放流？我在 VLC 和 VLCJ 网站/论坛中都没有找到任何特定信息。

接受任何提示/建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-11T22:06:27.267

不幸的是，仅仅启动一个基本的 http 文件服务器以将视频流式传输到 VLCj 播放器是不够的。

服务器必须能够处理“范围请求”。在范围请求期间，VLC 播放器请求它接下来要播放的视频的特定部分（字节范围，例如字节 3212-5678）。即使初始请求是针对所有字节的，视频播放器也会在播放期间重复发出范围请求。

当您搜索时，视频播放器将向您的服务器发出范围请求以获取文件的下一部分。如果您的服务器无法处理该请求，则播放器将具有您描述的行为。（即连接由对等方休息）

希望有帮助。

# css - 我可以使用 modernizr 有条件地加载背景 css 图像吗？

> ID：16177449
> 
> 赞同：0
> 
> 时间：2013-04-23T19:16:21.537
> 
> 标签：css, responsive-design, media-queries, modernizr

我想在不同的设备宽度上有不同大小的图像，有时根本没有图像，以节省移动用户的带宽。

它会像这样工作吗：

```
Modernizr.load([{
    test: 1025 > window.screen.width, 
  yep: "mobile.css", 
  nope: "desktop.css" 
}]); 
```

我还发现了以下纯 css 解决方案，据称该解决方案有效，并且只会在需要时加载图像：

```
<div id="test3">
    <div></div>
</div>
#test3 div {
    background-image:url('images/test3.png');
    width:200px;
    height:75px;
}
@media all and (max-width: 600px) {
    #test3 {
        display:none;
    }
} 
```

或者

```
<div id="test5"></div>
@media all and (min-width: 601px) {
    #test5 {
        background-image:url('images/test5-desktop.png');
        width:200px;
        height:75px;
    }
}
@media all and (max-width: 600px) {
    #test5 {
        background-image:url('images/test5-mobile.png');
        width:200px;
        height:75px;
    }
} 
```

此解决方案的来源：http: [//timkadlec.com/2012/04/media-query-asset-downloading-results/](http://timkadlec.com/2012/04/media-query-asset-downloading-results/)

但它相当复杂。

简单地使用modernizr来加载所有设置背景图像的css而不是加载多个图像版本是一个好主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T21:17:47.790

广泛地说，是的，它将按照您概述的方式工作。

**现代化**

您可以使用 Modernizr 加载 javascript 和 CSS，也可以使用该[`Modernizr.mq()`](http://modernizr.com/docs/#mq)方法专门匹配媒体查询。例子：

```
Modernizr.load([{

    // Test if media query matches
    test : Modernizr.mq('only screen and (max-width: 600px)'),

    // load css and js purely for mobile
    yep: ['/assets/mobile.css', '/assets/mobile.js']

  }]); 
```

如果您有两个媒体查询（桌面和移动），那么您只需测试两者并加载所需的资产 - 或者 - 更改上述内容以包含以下内容，因为它与测试条件不匹配：

```
 nope: ['/assets/desktop.css', '/assets/desktop.js'] 
```

使用 modernizr（或任何其他资产加载器）来完成**所有 JS/CSS**资产加载是一个只能由您做出的决定，并且需要了解：

*   您的应用程序有多复杂。
*   需要多少资产（图像、脚本、函数等）。
*   复杂程度/交互性
*   如果您使用modernizr，您将节省什么
*   您的应用程序/网站的预期用途

**媒体查询有什么问题？**

如果您的网站/应用程序占用空间不那么大，那么单独使用媒体查询来调整布局（更重要的是体验）以适应不同的设备类型并没有错；事实上，这是一种更简单的方法，更简单，更符合响应式设计理论。

[这是为不同设备类型换出不同图像的一个示例](http://cloudfour.com/)[无从属关系]。只需调整浏览器大小并查看图像是如何加载的。

在使用媒体查询方面，简单地说，您可以：

将您的媒体查询包含在一个样式表中：

```
@media only screen and (max-width: 600px) {
    #test5 {
      background-image:url('images/mobile.png');
      width:200px;
      height:75px;
  }
}
@media only screen and (min-width: 601px) {
    #test5 {
      background-image:url('images/desktop.png');
      width:200px;
      height:75px;
  }
} 
```

或者，链接到单独的 CSS 文件：

```
<link rel="stylesheet" type="text/css" media="screen and (max-width: 600px)" href="mobile.css" />
<link rel="stylesheet" type="text/css" media="screen and (min-width: 601px)" href="desktop.css" /> 
```

或者，使用`@import`：

```
@import url(mobile.css) (max-width:600px);
@import url(desktop.css) (min-width:601px); 
```

`@import`你可以在[这里](http://philarcher.org/diary/2011/importrules/)看到一个简单的例子。

**其他方法**

还有其他更复杂的方法使用 evenListeners 来监听屏幕宽度的变化，这些变化将根据查询状态的变化加载/卸载脚本，但对于绝大多数项目来说，它们是多余的。

# iphone - 弗兰克设置完成，但黄瓜测试不起作用

> ID：16177454
> 
> 赞同：0
> 
> 时间：2013-04-23T19:16:37.223
> 
> 标签：iphone, ios, testing, cucumber, frank

我正在设置 Frank 并完成了大部分设置。我正在尝试运行简单地旋转设备的内置黄瓜测试。

我`cucumber -d`在里面做得到`MyProject/Frank/`这个：

```
cucumber -d
Feature: 
  As an iOS developer
  I want to have a sample feature file
  So I can see what my next step is in the wonderful world of Frank/Cucumber testing

  Scenario:                                             # features/my_first.feature:6
      Rotating the simulator for demonstration purposes
    Given I launch the app                              # features/step_definitions/launch_steps.rb:5
    Given the device is in landscape orientation        # features/my_first.feature:9
    Given the device is in portrait orientation         # features/my_first.feature:10
    Given the device is in landscape orientation        # features/my_first.feature:11
    Given the device is in portrait orientation         # features/my_first.feature:12

1 scenario (1 skipped)
5 steps (1 skipped, 4 undefined)
0m0.002s

You can implement step definitions for undefined steps with these snippets:

Given(/^the device is in landscape orientation$/) do
  pending # express the regexp above with the code you wish you had
end

Given(/^the device is in portrait orientation$/) do
  pending # express the regexp above with the code you wish you had
end 
```

只是很困惑，希望我设置正确。感谢您的任何回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T16:24:51.967

要使用 Frank 预定义的步骤，您应该在“launch_steps.rb”文件的开头包含以下行，该文件通常位于“yourAppWorkspace/Frank/features/step_definitions”下：

```
require 'frank-cucumber/core_frank_steps.rb' 
```

然后，如果您在 features 目录下运行“cucumber”，您的步骤应该可以正确运行。

您还可以在此处查看所有预定义步骤：[https ://github.com/moredip/Frank/blob/master/gem/lib/frank-cucumber/core_frank_steps.rb](https://github.com/moredip/Frank/blob/master/gem/lib/frank-cucumber/core_frank_steps.rb)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T18:47:18.073

我之前想通了。我跑`cucumber -d`了一个“空跑”，而不是`cucumber`像应该做的那样。当我运行`cucumber`一切正常。

# c++ - 计算和存储 6 个随机连接点的二维数组

> ID：16177456
> 
> 赞同：1
> 
> 时间：2013-04-23T19:16:45.737
> 
> 标签：c++, multidimensional-array, random-sample

我正在尝试制作一个 80x20 2D 阵列，该阵列创建 6 条线，这些线在阵列周边的两个点之间随机连接。我想它会看起来像只在某些地方框起来的照片。我的问题是，我不知道如何选择和链接阵列周边的两个随机点并显示它们。我做了一个选择完全随机点的代码，但似乎无法解决这个任务。有人可以指出我正确的方向吗？

```
#include <iostream>
#include <algorithm>
using namespace std;

int main()
{
    const int rows = 80; //declares the amount of rows in the 2d array
    const int cols = 20; //declares the amount of columns in the 2d array
    char sky[rows][cols];

    fill_n(&sky[0][0], 100, '-'); 
    fill_n(&sky[0][0] + 100, rows*cols - 100, ' '); 
    random_shuffle(&sky[0][0], &sky[0][0] + rows*cols); 

    for(int r = 0; r < rows; ++r)
    {
        for(int c = 0; c < cols; ++c)
            cout << sky[r][c];
            cout << " ";
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T19:36:24.197

在简化示例中按如下方式可视化您的数组

```
[0][0], [0][1], [0][2], [0][3]
[1][0], [1][1], [1][2], [1][3]
[2][0], [2][1], [2][2], [2][3]
[3][0], [3][1], [3][2], [3][3] 
```

您可以看到您的周长索引将是第一行和最后一行，以及第一列和最后一列。我将把实现留给你，但你应该能够使用你的二维数组的这个子集来选择你想要连接的值。

祝你的任务好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T20:13:46.537

如果我没看错你的描述，你想做这样的事情（伪代码）：

```
for i in 1..6
{ pick one of four sides of the rectangle at random
  pick a random point p1 on that side

  pick one of the other three sides at random
  pick a random point p2 on that side

  use a line drawing algorithm (like Bresenham) to connect p1 and p2
} 
```

从填充数组并随机打乱它的算法开始可能会......效率低下......尽管正如争论所言，最终其中一个随机排列会达到你想要的......

# javascript - 通过 javascript/jquery 添加具有 onclick 功能的按钮

> ID：16177458
> 
> 赞同：4
> 
> 时间：2013-04-23T19:16:50.037
> 
> 标签：javascript, jquery, button

我正在努力寻找通过附加功能的 javascript/jquery 添加按钮的正确语法。

现在我正在尝试：

```
list.append("<button onclick='getFeed('http://open.live.bbc.co.uk/weather/feeds/en/PA2/3dayforecast.rss, showFeedResults')'>ButtonTest</button>"); 
```

但它返回：

```
<button onclick="getFeed(" http:="" open.live.bbc.co.uk="" weather="" feeds="" en="" pa2="" 3dayforecast.rss,="" showfeedresults')'="">ButtonTest</button> 
```

本质上，我希望能够创建

```
<button onclick="getFeed('http://open.live.bbc.co.uk/weather/feeds/en/B1/3dayforecast.rss', showFeedResults)" class="ui-btn-hidden"> 
```

在javascript中，但无法弄清楚如何..`

而且我似乎在创建同时使用单引号和双引号的 html 元素时遇到了麻烦。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-23T19:18:16.400

### 附加一个分配了单击事件侦听器的按钮

使用纯 JavaScript

```
const NewEL = (tag, prop) => Object.assign(document.createElement(tag), prop);

// Use like:
const EL_btn = NewEL("button", {
  textContent: "Test button",
  onclick() { console.log(this); /* getFeed etc... */ },
});

document.body.append(EL_btn);
```

或者使用**jQuery**库

[http://api.jquery.com/on/](http://api.jquery.com/on/)

```
list.append("<button>ButtonTest</button>");

list.on("click", "button", function(){
    getFeed('http://open.live.bbc.co.uk/weather/feeds/en/PA2/3dayforecast.rss, showFeedResults');
}); 
```

对于动态生成的元素，使用`.on()`上述方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-23T19:20:17.623

虽然我认为在整个列表上使用[`on`](https://stackoverflow.com/a/16177477/229044)处理程序更好，但在将事件添加到 DOM 之前将事件绑定到断开连接的 DOM 元素也是完全可以接受的：

```
button = $("<button>Button Test</button>");

button.click(function () {
  getFeed('http://open.live.bbc.co.uk/weather/feeds/en/PA2/3dayforecast.rss, showFeedResults');
});

list.append(button); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T19:24:11.013

香草javascript中的类似内容

```
<div id="something"></div>

var something = document.getElementById("something");
var button = document.createElement("button");

function doSomething() {
    alert("hi");
}

button.id = "myButton";
button.textContent = "Click me";
button.addEventListener("click", doSomething, false);

something.appendChild(button); 
```

在[jsfiddle上](http://jsfiddle.net/Xotic750/uN8vw/)

此外，内联 javascript:
ie`<button onclick="getFeed()">`
被认为是不好的做法，可能会导致许多意想不到的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T19:20:14.217

首先使用 DOM API 创建元素：

```
var button = document.createElement('button'); 
```

接下来，设置它的属性：

```
button.addEventListener('click', function (e) {...});
button.appendChild(document.createTextNode('Button Test')); 
```

最后，将其添加到文档中：

```
someParentElement.appendChild(button); 
```

# php - 使用 PHP 检测服务器区域设置编码

> ID：16177459
> 
> 赞同：1
> 
> 时间：2013-04-23T19:16:51.393
> 
> 标签：php, character-encoding, localization, locale

我正在使用`setlocale`并`strftime`以巴西葡萄牙语显示本地化月份名称：

```
setlocale(LC_ALL, 'pt_BR');
$meses = array();
for($m=1; $m<=12; $m++) {
    $meses[$m] = strftime('%B', mktime(0, 0, 0, $m, 1));
} 
```

这在我的开发环境中运行良好，但在生产服务器上它在 3 月失败（在葡萄牙语中是“março”）。如果我`utf8_encode`是月份名称，它可以在服务器上运行，但在我的开发环境中，我会得到一个双编码输出。我怀疑这是因为每台机器上的语言环境编码不同。我想正确的解决方案是在服务器上为 pt_BR 安装一个 UTF8 语言环境设置，但如果可能的话，我想避免这种情况（长话短说，服务器管理员，呃，很难）。

是否可以从 PHP 中检测到当前语言环境的编码，所以我可以围绕这个问题进行编码，并使我的代码无论语言环境/编码设置如何都能正常工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T19:27:34.197

利用

```
echo setlocale(LC_CTYPE, 0); // en_US.UTF-8 
```

获取当前编码，然后解决它。

将零传递`setLocale`给您的语言环境值。在这种情况下，我们得到`LC_CTYPE`设置的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T19:37:54.207

在问题下方的评论中，我们可以解决问题。这是因为在一个使用`pt_BR.uft-8`另一个的两个系统上的语言环境名称不同`pt_BR.UTF8`。

最后我们同意在配置文件中定义语言环境并使用它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-04-13T15:48:02.190

要获取 strftime 使用的编码，请使用

```
 mb_internal_encoding() 
```

要将 stftime 编码的字符串转换为 utf-8，请使用

```
mb_convert_encoding(strftime($format, $timestamp), 'UTF-8', mb_internal_encoding()); 
```

# php - mysql.proc 的列数错误。预期 20，发现 16。表可能已损坏

> ID：16177465
> 
> 赞同：49
> 
> 时间：2013-04-23T19:17:24.070
> 
> 标签：php, mysql

我正在使用 000webhost.com 并且在那里使用 phpMyAdmin。如标题所示，当我运行 PHP 脚本时，我从 MySQL 收到此错误：

> mysql.proc 的列数错误。预计 20 个，发现 16 个。
> 
> 该表可能已损坏。

有什么解决办法吗？

```
<?php
$username="usrname";
$password="passwd";
$database="a1xxxxx_mydb";
$host="mysqlxx.000webhost.com";
mysql_connect($host,$username,$password);
@mysql_select_db($database) or die( "Unable to select database");
if (isset($_GET["userLatitude"]) && isset($_GET["userLongitude"])) {

 $userLatitude=$_GET['userLatitude']; 
 $userLongitude=$_GET['userLongitude']; 
 $result = mysql_query("SELECT locationName, ( 6371 * acos( cos( radians(floatval(     $userLatitude) )) * cos( radians( locationLatitude ) ) * cos( radians( locationLongitude ) - radians( floatval($userLatitude)) ) + sin( radians(floatval($userLongitude)) ) * sin( radians( locationLatitude) ) ) ) AS distance 
         FROM Location HAVING distance < 2 ORDER BY distance LIMIT 0 ,20") or die(mysql_error()); 
echo $result;

 // check for empty result
if (mysql_num_rows($result) > 0) {
   // looping through all results
   // products node
  $response["Location"] = array();

  while ($row = mysql_fetch_array($result)) {
    // temp user array
    $product = array();
    $product["locationName"] = $row["locationName"];
    $product["locationInfo"] = $row["locationInfo"];
    $product["locationLatitude"] = $row["locationLatitude"];
    $product["locationLongitude"] = $row["locationLongitude"];
    $product["locationPic"] = $row["locationPic"];
    $product["city"] = $row["city"];

    // push single product into final response array
    array_push($response["Location"], $product);
 }
 // success
 $response["success"] = 1;

   // echoing JSON response
   echo json_encode($response);
 } else {
// no products found
$response["success"] = 0;
$response["message"] = "No products found";

// echo no users JSON
echo json_encode($response);
 }
 }
  else {
    // required field is missing
   $response["success"] = 0;
   $response["message"] = "Required field(s) is missing";

  // echoing JSON response
  echo json_encode($response);
 }
mysql_close();
?> 
```

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2014-01-17T20:13:01.797

我也有这个错误。我通过运行修复它

```
mysql_upgrade -u root -p 
```

另外，通过运行重新启动mysql服务

```
service mysqld restart 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2019-09-23T00:21:33.340

当我在 MacOS Mohave 中将 XAMPP 从 xampp-osx-7.2.10 更新到 7.3.9 时，我遇到了同样的问题。所以解决方案是：

在“Macintosh HD ▸ Applications ▸ XAMPP ▸ xamppfiles ▸ bin”中找到文件 mysql_upgrade 并双击它。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2013-04-24T00:28:59.943

错误升级完成时会发生此错误。例如，如果您从 5.0 升级到 5.1 但不运行 mysql_upgrade 脚本，就会发生这种情况；或者，在极少数情况下，如果您直接从 5.0 升级到 5.5，则可能会发生这种情况。（很多人这样做，但官方不支持此类更新）您说您正在使用托管服务 - 好吧，我认为您应该创建一张票并将问题告诉他们。如果您没有 SUPER 特权，您将无能为力。但如果你有这个权利，只需运行 mysql_upgrade： [http ://dev.mysql.com/doc/refman/5.1/en/mysql-upgrade.html](http://dev.mysql.com/doc/refman/5.1/en/mysql-upgrade.html)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2020-08-05T20:51:57.593

A similar error appeared in MySQL Workbench 8.0.21 after installing XAMPP 7.4.8 on Ubuntu 18.04\. There were no problems using phpMyAdmin.

```
Error Code: 1558 Column count of mysql.proc is wrong. Expected 21, found 20\. Created with MariaDB 100108, now running 100413\. Please use mysql_upgrade to fix this error 
```

Solution:

```
sudo /opt/lampp/lampp start
/opt/lampp/bin/mysql_upgrade 
```

Problem solved

**Credits**: There appear to be a bug in XAMPP - [https://community.apachefriends.org/f/viewtopic.php?f=17&t=78386&sid=3d3824dd0b6aa2e33c3adc73c744b4b4](https://community.apachefriends.org/f/viewtopic.php?f=17&t=78386&sid=3d3824dd0b6aa2e33c3adc73c744b4b4)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-08-01T09:47:52.800

当我在 Debian 8 (jessie) 中将 mysql 服务器从 5.5 更新到 5.7 时，我遇到了同样的问题。就我而言，当我执行以下命令时它运行良好：

```
mysql_upgrade --force -uroot -p 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2020-10-18T03:45:31.000

我在 Ubuntu 20.04 上使用 xampp，我的返回相同消息错误的问题已通过此解决方案解决：

1.  进入xampp目录：cd /opt/lampp/
2.  进入bin目录：cd bin
3.  执行脚本：sudo ./mysql_upgrade

学分：[https ://askubuntu.com/questions/1171409/how-to-run-mysql-upgrade-when-using-xampp](https://askubuntu.com/questions/1171409/how-to-run-mysql-upgrade-when-using-xampp)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-11-19T19:58:24.903

尽管您可能对升级的必要性是正确的，但这并不是发生此错误的唯一原因。

当使用返回 1 行的查询调用以下内容时

```
 my $rv = $sth_indexq->fetchall_arrayref; 
```

报以下错误：

```
DBD::mysql::st execute failed: Column count of mysql.proc is wrong. Expected 20, found 16\. Created with MySQL 50520, now running 50528\. Please use mysql_upgrade to fix this error. at 
... 
```

但是，错误的真正原因是使用了 fetchall_arrayref 而不是 fetchrow_arrayref。以下工作没有错误：

```
my $rv = $sth_indexq->fetchrow_arrayref; 
```

**$rv**中的数据只有**1 级深度，而不是 2 级**。

mysql_upgrade 解决方案可能很好地解决了这个问题，但简单的解决方案是了解您的数据并使用正确的检索代码。

怀特

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-12-31T06:08:42.533

点击浏览器下面的命令

```
/opt/lampp/bin/mysql_upgrade 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-09-23T15:57:33.317

我使用的是 Windows 10 系统，对我有用的解决方案是 mysql_upgrade -u root -p

但是您需要确保安装目录的 mysql/bin 文件夹中存在的 mysql_upgrade 脚本的路径需要添加到环境变量路径中才能使该命令正常工作

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-02-08T20:44:45.530

这发生在例如。升级而不是迁移；

它读取`version check failed`的部分是相关部分：

```
Version check failed. Got the following error when calling the 'mysql' command line client
ERROR 1045 (28000): Access denied for user 'root'@'localhost' (using password: YES)
FATAL ERROR: Upgrade failed 
```

显然这是关于一个不兼容的客户端版本，但`mysql`数据库也不同。

这将是[`mysql.proc`](https://mariadb.com/kb/en/mysqlproc-table/)表的当前定义......它表明自 MariaDB 10.3.3 以来枚举列`type`已更改并且 `aggregate`已添加该列。

还有一个问题是：

> 在 MariaDB 10.4 及更高版本中，此表使用 Aria 存储引擎。

将服务器降级到 5.x 并删除 InnoDB 日志文件，然后恢复表有`proc`帮助；（对于 MariaDB 5.x）：[https ://github.com/google/mysql/blob/master/scripts/mysql_system_tables.sql](https://github.com/google/mysql/blob/master/scripts/mysql_system_tables.sql)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-09-02T13:04:16.387

## **对于 Linux**

如果您使用的是 LAMPP，那么您可以像这样修复它 -

```
sudo /opt/lampp/lampp start
/opt/lampp/bin/mysql_upgrade 
```

否则，如果您单独安装了 mysql，那么您可以像这样 -

```
mysql_upgrade -u root -p 
service mysqld restart 
```

对于任何其他操作系统，您可以简单地进入lampp安装的**bin**目录并尝试找到mysql_upgrade文件并执行它。

# c# - SplitContainer 面板自动适应内容

> ID：16177466
> 
> 赞同：1
> 
> 时间：2013-04-23T19:17:25.590
> 
> 标签：c#, vb.net, winforms, controls, splitcontainer

我正在寻找非常简单的功能，但是我找不到它（令人惊讶的是，我找不到其他人问这个问题）。

我有带有两个面板的拆分容器 - 设置非常简单，左侧是导航 TreeView，右侧是带有项目的 ListView。

现在，我想要的是当左侧的所有内容（树视图）可见并且不显示水平滚动条时，拆分器会自动固定在位置上。我事先不知道项目的大小（但我知道它只有 1 级深）。像“AutoGrow 然后修复拆分器”之类的东西。当然，我不是第一个正在寻找此功能的人 :)

知道如何实现这一目标吗？

谢谢，马丁

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T19:42:19.067

这相当麻烦，滚动条可能会随着用户展开和折叠节点而再次出现和消失。您只能测量扩展节点的大小。但是，您使用的 UI 类型可能就是这种情况。在这种情况下，此代码应该可以解决您的问题：

```
Private Shared Function GetMaxNodeWidth(ByVal nodes As TreeNodeCollection, ByVal width As Integer) As Integer
    For Each node As TreeNode In nodes
        width = Math.Max(width, node.Bounds.Right)
        width = GetMaxNodeWidth(node.Nodes, width)
    Next
    Return width
End Function

Public Shared Function ResizeTreeView(ByVal tree As TreeView) As Integer
    Dim width = GetMaxNodeWidth(tree.Nodes, 0)
    tree.ClientSize = New Size(width, tree.ClientSize.Height)
    return tree.Width
End Sub 
```

填充控件后调用 ResizeTreeView()。示例用法：

```
 TreeView1.Nodes.Add("Customers")
    '' etc...
    SplitContainer1.SplitterDistance = ResizeTreeView(TreeView1) 
```

# for-loop - 在 for 循环中存储最后一个有效索引

> ID：16177469
> 
> 赞同：0
> 
> 时间：2013-04-23T19:17:43.103
> 
> 标签：for-loop, increment

相关问题：[递增：x++ vs x += 1](https://stackoverflow.com/questions/6509707/incrementing-x-vs-x-1)

我有这样的代码：

```
int lastValidIndex = -1;
for(int i = 0; i < limit; i++){
    if (condition)
        lastValidIndex++;
    else
        break;
} 
```

而且我想知道分配或增加它是否会`lastValidIndex`更快`i`。我猜只是分配会更快，因此计算机不必添加，但我不确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:24:55.370

这可能在某种程度上取决于您的语言。由于您没有指定，我将假设宏汇编程序（又名 C）。

假设没有太多其他逻辑，两个值都将被分配为寄存器变量。

这意味着增量或分配将是一个时钟周期，或者在现代处理器上约为 1/2000000 秒。

根据您的数组的大小，可能 ...ahem... 通过使用此优化可以节省一些时间：

```
int lastValidIndex = -1;
while( condition ) {
    lastValidIndex++;
} 
```

但我的猜测是，无论您在计算最后一个有效索引时可能节省多少，都与您的条件检查相形见绌，当然，无论您花费多少大脑周期试图弄清楚您是否真的节省了 1/2000 秒，都相形见绌。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T19:53:10.203

它出现在 C# 的反汇编中，第一个使用“inc”这是一个操作，而分配它由两个“mov”操作组成。

使用此代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Diagnostics;

namespace IncrementTest {
    class Program {
        static void Main(string[] args) {
            Stopwatch watch = new Stopwatch();
            long totalMethod1 = 0;

            for (int j = 0; j < 100; j++) {
                int lastValidIndex = -1;
                watch.Reset();
                watch.Start();
                for (int i = 0; i < 100000000; i++) {
                    lastValidIndex++;
                }
                watch.Stop();
                totalMethod1 += watch.ElapsedMilliseconds;
            }
            Console.WriteLine("Method 1 took an average of " + (double)totalMethod1 / 100 + "ms");

            long totalMethod2 = 0;
            for (int j = 0; j < 100; j++) {
                int lastValidIndex = -1;
                watch.Reset();
                watch.Start();
                for (int i = 0; i < 100000000; i++) {
                    lastValidIndex = i;
                }
                watch.Stop();
                totalMethod2 += watch.ElapsedMilliseconds;
            }
            watch.Stop();
            Console.WriteLine("Method 2 took an average of " + (double)totalMethod2 / 100 + "ms");
            Console.ReadLine();

        }
    }
} 
```

我出人意料地得到了这个输出：

```
Method 1 took an average of 381.51ms
Method 2 took an average of 354.76ms 
```

因此，如果您必须使用两个不同的变量，那么至少在 C# 中分配似乎更快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T19:26:07.937

```
int lastValidIndex = -1;
while(lastValidIndex < limit - 1 && condition) ++lastValidIndex;
// use lastValidIndex here ... 
```

# javascript - jquery-week-calendar 读取 JSON 数据 ASP.net

> ID：16177470
> 
> 赞同：0
> 
> 时间：2013-04-23T19:17:44.593
> 
> 标签：javascript, json

我正在使用 VS 2012，并且正在编写一个网络应用程序。该应用程序是一个工作场所调度程序，将从`SQL Server`. 数据库读/写已完成`C#`，我对此没有任何问题。

我需要的是我的前端/JavaScript 的示例，用于读取日历事件的 JSON 数据。包含的示例似乎不适用于 IE 或 Chrome，我无法使其工作。一旦我了解了如何传递静态 JSON 数据，我就可以从我的数据库中进行更新。

[https://github.com/themouette/jquery-week-calendar](https://github.com/themouette/jquery-week-calendar)

```
 data : function(start, end, callback) {
         callback(getEventData());
      }
   });

   function resetForm($dialogContent) {
      $dialogContent.find("input").val("");
      $dialogContent.find("textarea").val("");
   }

   function getEventData() {
      var year = new Date().getFullYear();
      var month = new Date().getMonth();
      var day = new Date().getDate();

      return {
         events : [
            {
               "id":1,
               "start": new Date(year, month, day, 12),
               "end": new Date(year, month, day, 13, 30),
               "title":"Lunch with Mike"
            },
            {
               "id":2,
               "start": new Date(year, month, day, 14),
               "end": new Date(year, month, day, 14, 45),
               "title":"Dev Meeting"
            },
            {
               "id":3,
               "start": new Date(year, month, day + 1, 17),
               "end": new Date(year, month, day + 1, 17, 45),
               "title":"Hair cut"
            },
            {
               "id":4,
               "start": new Date(year, month, day - 1, 8),
               "end": new Date(year, month, day - 1, 9, 30),
               "title":"Team breakfast"
            },
            {
               "id":5,
               "start": new Date(year, month, day + 1, 14),
               "end": new Date(year, month, day + 1, 15),
               "title":"Product showcase"
            },
            {
               "id":6,
               "start": new Date(year, month, day, 10),
               "end": new Date(year, month, day, 11),
               "title":"I'm read-only",
               readOnly : true
            }

         ]
      };
   } 
```

# google-glass - 谷歌眼镜能否显示禁区外的信息（右上角）

> ID：16177472
> 
> 赞同：0
> 
> 时间：2013-04-23T19:18:02.803
> 
> 标签：google-glass

我有一个项目来帮助我国的听力受损人士。谷歌眼镜可能非常适合我们计划的用途。

“受限区域”实际上对我、作为开发人员和作为用户的我来说是一个限制，因为 UX. “禁区”使某些应用程序无法开发。

是否有使用谷歌玻璃镜头的整个区域（我的意思是整个视觉范围）的解决方法（硬件或软件）？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T19:47:07.373

没有。

使用 Glass 时，您可以通过显示屏查看图像。显示器占据了您视野的一部分，并被设计为位于您的视野上方。它无法在其边缘之外显示图像，就像电视无法在其边界之外显示图像一样。

# mongodb - 为什么 MongoDB 没有使用正确的索引？

> ID：16177478
> 
> 赞同：5
> 
> 时间：2013-04-23T19:18:18.530
> 
> 标签：mongodb

我有一个正在尝试优化的 MongoDB 查询。我创建了一个与查询中的字段匹配的索引，但我似乎无法让 MongoDB 的查询规划器在没有显式 的情况下使用索引`hint()`，即使`nscanned`and `milli`s 对于提示版本更好。

以下是索引、查询（有和没有提示）和详细解释：

[http://paste.roguecoders.com/p/4face5649612e840da04c5fea0491c9b.txt](http://paste.roguecoders.com/p/4face5649612e840da04c5fea0491c9b.txt)

还有一点信息：这个索引在一个大型集合中，在一个副本集中，所以我使用[离线方法](http://docs.mongodb.org/manual/tutorial/build-indexes-on-replica-sets/)构建了索引。它现在存在于所有节点中。

（最初发布在[MongoDB-User](https://groups.google.com/forum/?fromgroups=#!topic/mongodb-user/NzBmHqpF_JQ)上。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-28T20:51:08.957

这似乎是 2.4 中的回归，当 {$in:[ ]} 子句中的一个值为“null”时，它会影响 SERVER-5063 修复。我将它作为新票提交[https://jira.mongodb.org/browse/SERVER-9495](https://jira.mongodb.org/browse/SERVER-9495)我希望很快会被分类和修复。

同时，根据为什么有空值（或没有字段？）以及真/假，您有几个选项，有些涉及更改查询，有些涉及更改数据。我不建议仅仅为此降级到 2.2，但这也是一种可能。

# angularjs - AngularJS内存泄漏与ng-switch？有人可以解决这个问题吗？

> ID：16177483
> 
> 赞同：1
> 
> 时间：2013-04-23T19:18:36.210
> 
> 标签：angularjs, angularjs-scope, angularjs-service, angularjs-routing

我已经为 angularjs 构建了一个自定义路由方法，并使用它来控制我的应用程序中的 ng-switch 以创建多级深度链接。

[http://plnkr.co/edit/beAm3WRomMafKzx1SoSZ?p=preview](http://plnkr.co/edit/beAm3WRomMafKzx1SoSZ?p=preview)

我无法弄清楚为什么当您在共享下的社交和联系人选项卡之间切换时内存不断增加。另外，如果您查看 baterang（chrome 的 angularjs 插件），为什么当您关闭联系人选项卡时，范围不会变小？联系人控制器已被销毁，但 baterang 显示联系人仍在范围内。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-20T12:42:33.397

当涉及 ngRepeat 和 ngSwitch 指令并且启用 Batarang 插件时存在内存泄漏。这是关于它的票：[https ://github.com/angular/angularjs-batarang/issues/62](https://github.com/angular/angularjs-batarang/issues/62)

# c# - 使用 FluentAutomation 滚动到元素？

> ID：16177484
> 
> 赞同：0
> 
> 时间：2013-04-23T19:18:39.957
> 
> 标签：c#, .net, selenium, fluentautomation

[是否可以使用FluentAutomation](http://fluent.stirno.com/) + [Selenium](http://docs.seleniumhq.org/projects/webdriver/)滚动到元素，例如单击当前可见区域之外的按钮？如果是这样，怎么做？

通过浏览 FluentAutomation 文档，我看不到对此的任何支持。问题是如果一个元素在当前可见区域之外，它就不能通过 FluentAutomation 与之交互（例如点击）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-05T14:29:32.330

使用 I.Hover(selector) 使元素滚动到视图中。Selenium 通过测试所接触的内容隐式处理管理视口。

# r - R使用if else语句从列表中删除对象

> ID：16177486
> 
> 赞同：7
> 
> 时间：2013-04-23T19:18:48.953
> 
> 标签：r, list, if-statement, for-loop

我有一个数据框列表，并想从 mylist 中删除那些少于 2 行的数据框：

```
a<-data.frame(x=c(1:4),y=c("m", "n", "o", "p"))
b<-data.frame(x=c(2:6),y=c("q", "w", "e", "r", "t"))
c<-data.frame(x=c(6,7),y=c("j","k"),z=c("$","#"))
d<-data.frame(x="9",y="q",z="+")
mylist<-list(a,b,c,d)

for (i in length(mylist)){
if (nrow(mylist[[i]])<=2){
mylist<-mylist[-i]
}
else{
mylist<-myslit
}} 
```

然而，它似乎只删除了 data.frame d。运行 for 循环后，数据框 c 仍在“mylist”中。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-23T19:25:06.717

您可以使用应用循环更轻松地做到这一点：

```
row_lt2 <- which(sapply(mylist, nrow) < 2)
mylist[-row_lt2]
[[1]]
  x y
1 1 m
2 2 n
3 3 o
4 4 p

[[2]]
  x y
1 2 q
2 3 w
3 4 e
4 5 r
5 6 t

[[3]]
  x y z
1 6 j $
2 7 k # 
```

请注意，我使用负索引来删除项目而不是选择它们。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-23T21:00:36.823

添加到其他答案：这正是高阶`Filter`函数的用途：

```
> Filter(function(x) {nrow(x) >= 2}, mylist)
[[1]]
  x y
1 1 m
2 2 n
3 3 o
4 4 p

[[2]]
  x y
1 2 q
2 3 w
3 4 e
4 5 r
5 6 t

[[3]]
  x y z
1 6 j $
2 7 k # 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-23T19:32:00.660

您无法使用此过程执行此过程，`for`因为索引会更改。使用`for`, 删除第 2 行后，您将检查第 3 行，但您需要再次检查第 2 行（因为第 2 行与之前的行不同）。将其更改为`repeat`或`while`。

```
a<-data.frame(x=c(1:4),y=c("m", "n", "o", "p"))
b<-data.frame(x=c(2:6),y=c("q", "w", "e", "r", "t"))
c<-data.frame(x=c(6,7),y=c("j","k"),z=c("$","#"))
d<-data.frame(x="9",y="q",z="+")
mylist<-list(a,b,c,d)

i <- 1
while (i <= length(mylist)) {
 if (nrow(mylist[[i]])<=2){
  mylist<-mylist[-i]
 }
 else{
  i <- i+1
 }
} 
```

或者只是使用@Paul 解决方案...：P

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-23T19:35:18.067

保罗已经提供了答案，但没有指出你的错误。

您的代码有两个问题。首先，您需要为循环提供一个范围：

```
for (i in 1:length(mylist)) 
```

或 for (i in seq_along(length(mylist)))

没有这个，你的初始化看起来就像`for (i in 4)`在评估之后，这意味着只运行了一次迭代，删除了元素 4，甚至没有查看所有以前的元素。

但是，如果您解决了该问题，则会出现另一个问题。即，删除元素 3 后，您的列表不再有 4 个元素。它只有 3 个元素，而您的`i`索引会上升到 4，从而导致`subscript out of bounds`错误。

因此，如@Paul 所述，只能建议使用 apply 的方法。

此外，与断言相反，使用循环可以实现相同的效果`for`，只是您的方法需要稍有不同：

```
for (i in 1:length(mylist)) {
    if (nrow(mylist[[i]])>2)
    {
        mylist2[i]<-mylist[i]
    }
}  
print(mylist2) 
```

在这里，您选择大于 2 的列表元素，并将它们分配给一个新列表。`Sapply`不过会更快。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-12T03:51:15.127

对于一些特殊情况，上面提到的其他方法虽然`while`可以工作，但不起作用。我确实发现，如果您使用 Rcoster 的方法`while`而不添加对返回列表的评估，它仍然会返回错误的答案——因为每次评估条件时`i<=length(mylist)`，`mylist`由于删除了`mylist[-i]`. 因此，`while`评估可能会在到达列表中所有不需要的元素之前停止。

例如，就我而言，我想确保`mylist[[i]]<=4`. 该列表非常大（从 2284879 个元素开始）。当我第一次运行`while`评估时，程序在取出所有内容之前停止，`mylist[[i]]>4`因为长度`mylist`变小了。我不得不用来`table(lengths(mylist))`判断是否所有不需要的列表都被取出了。如果没有，则`while`再次运行循环。幸运的是，它只运行了两次。但我认为有必要指出这一点，以防其他人来到这里并尝试使用这种`while`方法。

PS。`for`如果添加了一些评估来判断是否需要重新运行，循环应该也可以使用。

# php - PHP-成功上传后设置chmod？

> ID：16177488
> 
> 赞同：1
> 
> 时间：2013-04-23T19:18:56.467
> 
> 标签：php, permissions, chmod

```
<?php

if (isset($_FILES['datei']))
{
move_uploaded_file($_FILES['datei']['tmp_name'], 'upload/'.$_FILES['datei']['name']);

echo "Filee successfully uploaded.";

chmod($_FILES["datei"]["name"], 777);

echo "<p> Chmod successfully set!<br>";
} 

?> 
```

上传有效，但未设置 chmod。任何人都可以帮忙检查代码吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T19:22:17.397

You need to have an absolute path to your file. For example:

```
chmod("/var/www/files/uploads/" . $_FILES["datei"]["name"] . ".jpg", 0777) 
```

Make sure the file location actually exists. The cheap and dirty way to do this:

```
if(!file_exists("/var/www/files/uploads/" . $_FILES["datei"]["name"] . ".jpg")) {
  die("File not found with path: /var/www/files/uploads/" . $_FILES["datei"]["name"] . ".jpg");
} 
```

EDIT: also, on Aquillo answer, it should be 0777.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T19:22:22.223

You move the file to `'upload/'.$_FILES['datei']['name']` but chmod `$_FILES['datei']['name']`. Note you've been missing the `upload/'. Change the chmod to:

```
chmod('upload/'.$_FILES['datei']['name'], 0777); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T19:21:09.587

您应该将 chmod 设置为

```
chmod($_FILES["datei"]["name"], 0777); 
```

[你可以在这里](http://php.net/manual/en/function.chmod.php)阅读更多关于它的信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-26T06:20:57.503

您需要在模式前加上零 (0)，所以

```
mode should be 0777
chmod($_FILES["datei"]["name"], 0777); //correct way of mode 
```

# ruby-on-rails - Rspec 测试惨遭失败

> ID：16177491
> 
> 赞同：1
> 
> 时间：2013-04-23T19:19:02.883
> 
> 标签：ruby-on-rails, rspec, tdd, railstutorial.org

因此，我在这里看到了几个与我的问题有些相似的问题，但还不够接近，无法帮助我弄清楚我的问题是什么……所以对我做错的任何帮助将不胜感激：（我正在关注Michael Hartl 的教程，所以关于我如何偏离他的例子的信息会特别有帮助）......谢谢

```
I'm throwing the following 2 errors:

Failures:

  1) Authentication authorization as wrong user submitting a PUT request to the Users#update action 
 Failure/Error: before { put user_path(wrong_user) }
 NoMethodError:
   undefined method `put' for #<RSpec::Core::ExampleGroup::Nested_1::Nested_3::Nested_2::Nested_2:0x007f8943728688>
 # ./spec/features/authentication_pages_spec.rb:78:in `block (5 levels) in <top (required)>'

2) Authentication authorization for non-signed-in users in the Users controller submitting  to the update action 
 Failure/Error: before { put user_path(user) }
 NoMethodError:
   undefined method `put' for #<RSpec::Core::ExampleGroup::Nested_1::Nested_3::Nested_1::Nested_1::Nested_2:0x007f8944a85ff0>
 # ./spec/features/authentication_pages_spec.rb:61:in `block (6 levels) in <top (required)>'

Finished in 3.06 seconds
56 examples, 2 failures

Failed examples:

rspec ./spec/features/authentication_pages_spec.rb:79 # Authentication authorization as     wrong user submitting a PUT request to the Users#update action 
rspec ./spec/features/authentication_pages_spec.rb:62 # Authentication authorization for non- signed-in users in the Users controller submitting to the update action 
```

我的代码如下：

规范/功能/authentication_pages_spec.rb

```
require 'spec_helper'

describe "Authentication" do

  subject { page }

  # FOR STATIC SIGN IN PAGE
  describe "signin page" do
    before { visit signin_path }

    it { should have_selector('h1',    text: 'Sign in') }
    it { should have_title('Sign in') }
  end

  # FOR SIGNIN PROCESS
  describe "signin" do
    before { visit signin_path }

    describe "with invalid information" do
      before { click_button "Sign in" }

      it { should have_title('Sign in') }
      it { should have_error_message }

      describe "after visiting another page" do
        before { click_link "Home" }
        it { should_not have_error_message }
      end
    end

    describe "with valid information" do
      let(:user) { FactoryGirl.create(:user) }
      before { sign_in user }

      it { should have_title(user.name) }
      it { should have_link('Profile',     href: user_path(user)) }
      it { should have_link('Sign out',    href: signout_path) }
      it { should have_link('Settings',    href: edit_user_path(user)) }
      it { should_not have_link('Sign in', href: signin_path) }

      describe "followed by signout" do
        before { click_link "Sign out" }
        it { should have_link('Sign in') }
      end
    end
  end

  # FOR AUTHORIZING WHICH ACCOUNTS CAN DO WHAT
  describe "authorization" do

    describe "for non-signed-in users" do
      let(:user) { FactoryGirl.create(:user) }

      describe "in the Users controller" do
        describe "visiting the edit page" do
          before { visit edit_user_path(user) }
          it { should have_title('Sign in') }
        end

        describe "submitting to the update action" do
          before { put user_path(user) }
          specify { response.should redirect_to(signin_path) }
        end
      end
    end

    describe "as wrong user" do
      let(:user) { FactoryGirl.create(:user) }
      let(:wrong_user) { FactoryGirl.create(:user, email: "wrong@example.com") }
      before { sign_in user }

      describe "visiting Users#edit page" do
        before { visit edit_user_path(wrong_user) }
        it { should_not have_selector('title', text: full_title('Edit user')) }
      end

      describe "submitting a PUT request to the Users#update action" do
        before { put user_path(wrong_user) }
        specify { response.should redirect_to(root_path) }
      end
    end

  end
end 
```

我的规范/功能/user_pages_spec.rb

```
require 'spec_helper'

describe "User pages" do

  subject { page }

  # TESTING STATIC PROFILE PAGE
  describe "profile page" do
    let(:user) { FactoryGirl.create(:user) } # Code to make a user variable
    before { visit user_path(user) }

    it { should have_selector('h1',    text: user.name) }
    it { should have_title(user.name) }
  end

  # TESTING STATIC SIGNUP PAGE
  describe "signup page" do
    before { visit signup_path }

    it { should have_selector('h1',    text: 'Sign up') }
    it { should have_title("Sign up") }
  end

  # TESTING SIGN UP PROCESS
  describe "signup" do
    before { visit signup_path }

    let(:submit) { "Create my account" }

    describe "with invalid information" do
      it "should not create a user" do
        expect { click_button submit }.not_to change(User, :count)
      end

      describe "after submission" do
        before { click_button submit }

        it { should have_title('Sign up') }
        it { should have_content('error') }
      end
    end

    describe "with valid information" do
      before do
        fill_in "Name",         with: "Example User"
        fill_in "Email",        with: "user@example.com"
        fill_in "Password",     with: "foobar"
        fill_in "Confirmation", with: "foobar"
      end

      it "should create a user" do
        expect { click_button submit }.to change(User, :count).by(1)
      end

      describe "after saving the user" do
        before { click_button submit }
        let(:user) { User.find_by_email('user@example.com') }

        it { should have_title(user.name) }
        it { should have_selector('div.alert.alert-success', text: 'Welcome') }
        it { should have_link('Sign out') }
      end

    end
  end

  # TESTING EDITING FUNCTIONALITY
  describe "edit" do
    let(:user) { FactoryGirl.create(:user) }
    before do 
      sign_in user
      visit edit_user_path(user)
    end

    describe "page" do
      it { should have_selector('h1',    text: "Update your profile") }
      it { should have_title("Edit user") }
      # it { should have_link('change', href: 'http://gravatar.com/emails') }
      # needed if using gravatar
    end

    describe "with invalid information" do
      before { click_button "Save changes" }

      it { should have_content('error') }
    end

    describe "with valid information" do
      let(:new_name)  { "New Name" }
      let(:new_email) { "new@example.com" }
      before do
        fill_in "Name",             with: new_name
        fill_in "Email",            with: new_email
        fill_in "Password",         with: user.password
        fill_in "Confirm Password", with: user.password
        click_button "Save changes"
      end

      it { should have_title(new_name) }
      it { should have_selector('div.alert.alert-success') }
      it { should have_link('Sign out', href: signout_path) }
      specify { user.reload.name.should  == new_name }
      specify { user.reload.email.should == new_email }
    end

  end

end 
```

我的规范/支持/实用程序.rb

```
include ApplicationHelper

RSpec::Matchers.define :have_error_message do |message|
  match do |page|
    page.has_selector?('div.alert.alert-error', text: 'Invalid')
  end
end

def sign_in(user)
  visit signin_path
  fill_in "Email",    with: user.email
  fill_in "Password", with: user.password
  click_button "Sign in"
  # Sign in when not using Capybara.
  # cookies[:remember_token] = user.remember_token
end 
```

我的控制器/users_controller.rb

```
class UsersController < ApplicationController
  before_filter :signed_in_user, only: [:edit, :update]

  def new
    @user = User.new
  end

  def show
     @user = User.find(params[:id])
  end

  def create
    @user = User.new(params[:user])
    if @user.save
      sign_in @user
      flash[:success] = "Welcome to Authentication App..."
      redirect_to @user
    else
      render 'new'
    end
  end

  def edit
    @user = User.find(params[:id])
  end

  def update
    @user = User.find(params[:id])
    if @user.update_attributes(params[:user])
      sign_in @user
      flash[:success] = "Profile updated"
      redirect_to @user
    else
      render 'edit'
    end
  end

  def destroy
    User.find(params[:id]).destroy
    flash[:success] = "User destroyed"
    redirect_to users_path
  end

  private

    def signed_in_user
      redirect_to signin_url, notice: "Please sign in." unless signed_in?
    end

end 
```

& 最后我的意见/用户/edit.html.erb

```
<% provide(:title, "Edit user") %> 
<h1>Update your profile</h1>

<div class="row">
  <div class="span6 offset3">
    <%= form_for(@user) do |f| %>
      <%= render 'shared/error_messages' %>

      <%= f.label :name %>
      <%= f.text_field :name %>

      <%= f.label :email %>
      <%= f.text_field :email %>

      <%= f.label :password %>
      <%= f.password_field :password %>

      <%= f.label :password_confirmation, "Confirm Password" %>
      <%= f.password_field :password_confirmation %>

      <%= f.submit "Save changes", class: "btn btn-large btn-primary" %>
    <% end %>

  </div>
</div> 
```

对于正确修复的任何和所有帮助将不胜感激。谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:46:37.230

问题是：**你把 request( `capybara`) 测试和功能测试**搞乱了。

在`capybara`您应该描述用户步骤，例如

```
require 'spec_helper'

describe "Website access" do
  context "when I am a registered user" do
    it "should let me in" do
      page.fill_in 'Email',    with: 'vader@deathstar.com'
      page.fill_in 'Password', with: 'mydearluke'
      page.click_link 'Let me in'

      page.should have_content('Welcome, cheif!')
    end
  end

  context "when I am not a registered user" do
    it "should not let me in" do
      page.fill_in 'Email',    with: 'jabba.h@tatooine.com'
      page.fill_in 'Password', with: 'wormsarmageddon'
      page.click_link 'Let me in'

      page.should have_content('Incorrect credentials!')
    end
  end      
end 
```

功能测试在较低级别运行，因为您需要使用 HTTP 动词 as `put`, `get`, `post`,`delete`与您正在测试的应用程序进行通信。

```
require 'spec_helper'

describe SessionsController do
  context "when I am registered user" do
    it "should let me in" do
      post :create, email: 'vader@deathstar.com', password: 'mydearluke'

      response.should be_success
    end
  end

  context "when I am not a registered user" do
    it "should not let me in" do
      post :create, email: 'jabba.h@tatooine.com', password: 'wormsarmageddon'

      response.should_not be_success
    end
  end      
end 
```

这里有几点需要注意：

1.  我用的是`post`，不是`put`。
2.  我在`describe`块中指定控制器名称，与水豚测试中的简单英语描述形成对比。
3.  功能测试指定`SessionController`应该如何准确地响应不同的用户凭据（它应该为一个好的用户创建一个会话，并在一个未注册的用户上尖叫）。

您要做的是在您的**请求**（水豚）测试中使用**功能测试中的动词。**这是错误的。

 **回顾：

1.  在测试中使用`visit`和`click_link`/ 。`click_button``capybara`
2.  在功能测试中使用 HTTP 动词 ( `put`, `get`, `post`, )。`delete`
3.  使用[`devise`](https://github.com/plataformatec/devise)gem 进行用户身份验证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T19:24:41.553

`put, get, post, delete`那些用于控制器测试的方法在功能测试中不可用。

`put`在编写功能测试时，您应该通过按钮操作/ajax/etc...“提交” ，而不是像控制器测试那样发布到控制器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T19:43:12.587

如果您遵循 Rails 教程，则需要将 Capybara 版本降级到 1.1.2 并将您的规范移动到`spec/requests`目录中。更新您的 Gemfile：

```
gem 'capybara', '1.1.2' 
```

如果您打算使用 Capybara 2.0，我建议您阅读以下内容：

[http://alindeman.github.io/2012/11/11/rspec-rails-and-capybara-2.0-what-you-need-to-know.html](http://alindeman.github.io/2012/11/11/rspec-rails-and-capybara-2.0-what-you-need-to-know.html)**

# php - Mysql选择5行，其中一个组合列的总和最匹配确定的值

> ID：16177493
> 
> 赞同：0
> 
> 时间：2013-04-23T19:19:05.697
> 
> 标签：php, mysql, sum

首先，我什至还没有开始编写这个查询，因为我不知道如何处理它。场景是这样的。在 table_name 中，我需要查询 column_a 选择（所有列）最适合确定值的行。我在这个例子中的值可能是 150。column_a 中的结果可能是 (3,25,67,19,9,11) 等。我需要将五行加在一起时最接近 150。在这种情况下，查询将给我行（67,25,19,11,9）。

```
SELECT * FROM 5 rows -> WHERE SUM(column_a) closest matches 150 
```

这个例子接近我正在寻找的，除了我需要总数和结果行。 [总结 MySQL 中的前 5 个值](https://stackoverflow.com/questions/14294003/sum-top-5-values-in-mysql)

我希望我已经很好地解释了这一点。我有一种感觉，这将是一个简单的问题，我只是想多了。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T19:48:36.997

带有一列 val 的表 t

```
select * from t as t1, t as t2, t as t3, t as t4, t as t5
order by abs(t1.val + t2.val + t3.val + t4.val + t5.val - 150)
limit 1 
```

请注意，这将是一个缓慢的查询。

# r - R 通过数据框进行迭代的结果是什么？

> ID：16177495
> 
> 赞同：0
> 
> 时间：2013-04-23T19:19:08.113
> 
> 标签：r, loops

我无法遍历 data.Frame。

```
# a is a dataframe, with names 'f','d','sess', ...
for (x in a) 
# find all events BEFORE the event x 
#    ('d' is the beginning of the event in ms, 'e' is the end of it)
a[a$f < as.numeric(x['d']),] -> all_before

x['Epe'] = min( as.numeric(x['d'])-all_before$f)
} 
```

它只是不会改变我原来的data.frame。有没有办法 即时更改我*的数据框，或者我应该绝对创建一个新的并填写它？*谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T19:26:36.460

数据框本质上是一个列表。使用数据框作为 for 循环的输入与使用列表作为输入时的作用相同。

```
> for(x in list(x = 1:3, y = letters, z = lm(mpg ~ hp, data = mtcars))){print(x)}
[1] 1 2 3
 [1] "a" "b" "c" "d" "e" "f" "g" "h" "i" "j" "k" "l" "m" "n" "o" "p" "q" "r" "s"
[20] "t" "u" "v" "w" "x" "y" "z"

Call:
lm(formula = mpg ~ hp, data = mtcars)

Coefficients:
(Intercept)           hp  
   30.09886     -0.06823 
```

它遍历列表的每个元素。在数据帧的情况下，这意味着它遍历数据帧的列。

```
> dat <- data.frame(x = 1:3, y = rep("this is y", 3))
> dat
  x         y
1 1 this is y
2 2 this is y
3 3 this is y
> for(i in dat){print(i)}
[1] 1 2 3
[1] this is y this is y this is y
Levels: this is y 
```

# javascript - 在javascript中使用括号验证URL

> ID：16177503
> 
> 赞同：1
> 
> 时间：2013-04-23T19:19:26.760
> 
> 标签：javascript, regex

全部 -

我正在使用以下代码（在线获取）来验证 URL。但是，由于 URL 变量 Network 中的括号，URL“http://www.yahoo.com?srch=news1&Network=[cnn]”无法返回 true。是否可以更新正则表达式以包含括号，或者我应该循环 URL 变量并删除括号？

```
 var webSiteUrlExp = /^(([\w]+:)?\/\/)?(([\d\w]|%[a-fA-f\d]{2,2})+(:([\d\w]|%[a-fA-f\d]{2,2})+)?@)?([\d\w][-\d\w]{0,253}[\d\w]\.)+[\w]{2,4}(:[\d]+)?(\/([-+_~.\d\w]|%[a-fA-f\d]{2,2})*)*(\?(&?([-+_~.\d\w]|%[a-fA-f\d]{2,2})=?)*)?(#([-+_~.\d\w]|%[a-fA-f\d]{2,2})*)?$/;

if (webSiteUrlExp.test(url)) {
      console.log("true");
      return true;
}
else {
     console.log("false");
      return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:22:39.820

That's because `[` and `]` are not valid characters within a URL. The browser will silently convert them to
`%5B` and `%5D` respectively, and the server will silently convert them back before passing it to the engine.

If you want to validate URLs with characters outside the normal range, you should first run it through some kind of escaping function.

# javascript - 通过 MvcHtmlString.Create() 渲染撇号

> ID：16177504
> 
> 赞同：1
> 
> 时间：2013-04-23T19:19:28.527
> 
> 标签：javascript, html, asp.net-mvc-3

我有一个看起来像这样的字符串：`Foo&#39;s Bazz`

我正在使用自定义 HtmlHelper 在 div 元素中呈现此文本：

```
public static MvcHtmlString DisplayWithReadonlyIdFor<TModel, TValue>(this HtmlHelper<TModel> helper, Expression<Func<TModel, TValue>> expression, object htmlAttributes)
{
    string readonlyId = "Readonly" + helper.ViewContext.ViewData.TemplateInfo.GetFullHtmlFieldId(ExpressionHelper.GetExpressionText(expression));

    TagBuilder tag = new TagBuilder("div");
    tag.MergeAttributes(new RouteValueDictionary(htmlAttributes));

    tag.SetInnerText(helper.DisplayFor(expression).ToString());

    return MvcHtmlString.Create(tag.ToString(TagRenderMode.Normal));
} 
```

使用这段代码，我仍然看到撇号的 HTML 表示，而不是撇号本身。

我尝试通过调用 JavaScriptStringEncode 来遵循[Escaping single quote from an MVC 3 Razor View variable中的建议。](https://stackoverflow.com/questions/8479260/escaping-single-quote-from-an-mvc-3-razor-view-variable)我也尝试过 HtmlDecode。两者都没有任何作用。

我想知道我需要做些什么来实现呈现实际的撇号，而不仅仅是我的 div 元素内的 HTML 标记。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T04:32:52.033

你试过下面吗？

```
HttpUtility.HtmlDecode("Some value");
HttpUtility.HtmlEncode("Some value"); 
```

**例子**

```
string value1 = "&lt;html&gt;";                 //&lt;html&gt;
string value2 = HttpUtility.HtmlDecode(value1); //<html>
string value3 = HttpUtility.HtmlEncode(value2); //&lt;html&gt;

MvcHtmlString.Create(HttpUtility.HtmlDecode("Some value")) 
```

# html - PhoneGap：是否可以从 iOS 中 www 目录中的 html 引用位于 Documents 文件夹中的视频文件？

> ID：16177506
> 
> 赞同：0
> 
> 时间：2013-04-23T19:19:40.127
> 
> 标签：html, cordova, html5-video

我有一个应用程序，我需要从外部服务器下载视频文件，因为视频太大而无法放入应用程序本身，因为它会超出应用程序允许的文件大小。我需要能够从应用程序中播放这些视频文件，这只是一个 HTML 5 页面，允许用户在 div 之间滑动（如主题演讲）。在其中一个演示“页面”上有视频文件的链接。我试过引用相对于 html 文件的文件，如下所示：

```
<video controls="controls" poster="assets/videos/01_intro_eng.jpg" width="768" height="432" title="01_intro_eng">
<source src="./../../Documents/01_intro_eng.m4v" type="video/mp4" id="vid1" />
</video> 
```

我也试过：

```
<video controls="controls" poster="assets/videos/01_intro_eng.jpg" width="768" height="432" title="01_intro_eng">
<source src="../../Documents/01_intro_eng.m4v" type="video/mp4" id="vid1" />
</video> 
```

当我单击图像播放视频时，它只是给我提供了在视频播放器上带有删除线的海报图像。

引用 www 目录中的视频文件可以毫无问题地播放它们，因此文件本身没有任何问题。任何帮助将不胜感激。

iExplorer 图像包含在下面以供参考。引用 Documents 中视频文件的 html 文件称为 app.html（位于 www 目录中）

![在此处输入图像描述](https://i.stack.imgur.com/TWbpz.jpg)

# jquery - gridview 文本框使用 jQuery 启用禁用

> ID：16177511
> 
> 赞同：1
> 
> 时间：2013-04-23T19:20:06.193
> 
> 标签：jquery, asp.net

我在使用 jQuery 时遇到问题。当我开始在`txtiPercentage`textbox 中写作时，`txtDollarAmtinfo`应该只为该特定行禁用文本框。

```
<gridview ID="BulkEditGridView1" 
          runat="server" 
          AutoGenerateColumns="False" 
          DataKeyNames="Pk_PropertyID">    
  <Columns>
    <asp:TemplateField>
      <ItemTemplate>
        <asp:TextBox ID="txtiPercentage" 
                     Text='<%#Eval("BidPercentage","{0:0.000}") %>' 
                     runat="server" 
                     onKeyDown="OnKeyDownHandler(this,event)"></asp:TextBox>  
        <asp:TextBox ID="txtDollarAmtinfo" 
                     Text='<%#Eval("BidDollarAmt","{0:0,00}") %>' 
                     runat="server" ></asp:TextBox> 
                </ItemTemplate>
            </asp:TemplateField>
        </Columns>
    </gridview> 
```

脚本：

```
<script type="text/javascript">
    function OnKeyDownHandler(thisobj,e) {
        var newid = $(thisobj).attr('id');
        $(thisobj).closest('tr')
          .find("input[id$="txtDollarAmtinfo"]:not(input[id$=' + newid + '])')
          .attr("disabled", "disabled")");           
     }
 </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T19:30:25.367

去掉`OnKeyDown`asp 内容中的标记。使用 jQuery

```
$("#<%= txtiPercentage.ClientID %>").keyup(function() {
    var newID = $(this).attr("id");

    //Either find it with .next
    $(this).next().prop("disabled", true);

    //Or disable by ID
    $("#<%=txtDollarAmtinfo.ClientID%>").prop("disabled", true);
}); 
```

不要忘记将其包含`$(document).ready() {`在脚本开头的 a 中！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T19:56:30.467

希望这可以帮助。

```
<script>
function lock_a_txt(sender)
{
    var who_to_lock = $(sender).attr('data-lockdown-id');
    //disable by sender data tag value in the scope of the senders row
    $('#' + who_to_lock, $(sender).parents('tr').first()).prop('disabled', true)
}
</script>

<table>
    <tr>
        <td>
            <asp:TextBox runat="server" ID="txtPercent" data-lockdown-id="txtDollar" onkeypress="javascript:lock_a_txt(this);" />
        </td>
        <td>
            <asp:TextBox runat="server" ID="txtDollar" />
        </td>
    </tr>
</table> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T21:48:52.200

您的报价不匹配。处理程序的结尾应如下所示：

```
 $(thisobj).closest('tr')
      .find('input[id$="txtDollarAmtinfo"]:not(input[id$="' + newid + '"])')
      .attr("disabled", "disabled"); 
```

# asp.net - asp.net中变量的值不变

> ID：16177517
> 
> 赞同：1
> 
> 时间：2013-04-23T19:20:28.083
> 
> 标签：asp.net, vb.net

目前我正在做一个名为在线考试的项目。所有控件都是动态创建的。

我有一个网页，我想在其中显示学生的详细信息。我在表格中正确显示了这些详细信息。现在是时候编辑这些细节了。要编辑记录，我使用名为编辑的链接按钮。当用户单击该链接按钮时，该行中的数据将替换为新的文本框。到这里我还好。现在，当我在对文本框进行更改后单击保存更改按钮时。旧值不会被新值替换，旧值仍然存在。

在表格中创建文本框的代码如下：

```
Public Sub Edit_Click(ByVal sender As Object, ByVal e As System.EventArgs)

        For x As Integer = 0 To EditList.Count - 1

            If sender.id.substring(4) = EditList(x).ID.Substring(4) Then

                Session("PreviousRollNo") = RollNoList(x).Text

                Dim txtName As New TextBox
                txtName.Text = NameList(x).Text
                NameList(x).Text = ""
                NameList(x).Parent.Controls.Add(txtName)
                txtList.Add(txtName)

                Dim txtCourse As New TextBox
                txtCourse.Text = CourseList(x).Text
                CourseList(x).Text = ""
                CourseList(x).Parent.Controls.Add(txtCourse)
                txtList.Add(txtCourse)

                Dim txtAdmissionDate As New TextBox
                txtAdmissionDate.Text = AdmissionList(x).Text
                AdmissionList(x).Text = ""
                AdmissionList(x).Parent.Controls.Add(txtAdmissionDate)
                txtList.Add(txtAdmissionDate)

                Dim btnSaveChanges As New Button
                btnSaveChanges.Text = "Save Changes"
                EditList(x).Text = ""
                EditList(x).Parent.Controls.Add(btnSaveChanges)
                AddHandler btnSaveChanges.Click, AddressOf btnSaveChanges_Click
                Session("EditButtonClicked") = True

                Dim btnCancel As New Button
                btnCancel.Text = "Cancel"
                DeleteList(x).Text = ""
                DeleteList(x).Parent.Controls.Add(btnCancel)
                AddHandler btnCancel.Click, AddressOf btnCancel_Click
                Session("CancelButtonClicked") = True

                txtName.Focus()

                Exit For

            End If

        Next

    End Sub 
```

保存更改按钮的代码如下：

```
Public Sub btnSaveChanges_Click(ByVal sender As Object, ByVal e As System.EventArgs)

        If txtList(0).Text = "" Then

            Dim trError As TableRow = New TableRow

            Dim tdError As TableCell = New TableCell
            tdError.ColumnSpan = 7

            Dim lblError As New Label
            lblError.Text = "Please enter name of the student."
            lblError.ForeColor = Drawing.Color.Red
            tdError.Controls.Add(lblError)

            trError.Controls.Add(tdError)

            tbl.Controls.Add(trError)

        ElseIf txtList(1).Text = "" Then

            Dim trError As TableRow = New TableRow

            Dim tdError As TableCell = New TableCell
            tdError.ColumnSpan = 7

            Dim lblError As New Label
            lblError.Text = "Please enter the course."
            lblError.ForeColor = Drawing.Color.Red
            tdError.Controls.Add(lblError)

            trError.Controls.Add(tdError)

            tbl.Controls.Add(trError)

        ElseIf txtList(2).Text = "" Then

            Dim trError As TableRow = New TableRow

            Dim tdError As TableCell = New TableCell
            tdError.ColumnSpan = 7

            Dim lblError As New Label
            lblError.Text = "Please enter the Admission Date"
            lblError.ForeColor = Drawing.Color.Red
            tdError.Controls.Add(lblError)

            trError.Controls.Add(tdError)

            tbl.Controls.Add(trError)

        Else

            Dim cb As New OleDbCommandBuilder(da)

            Dim editRow() As DataRow

            editRow = ds.Tables("Student_Detail").Select("Roll_No = '" & Session("PreviousRollNo") & "'")

            editRow(0)("Name") = txtList(0).Text
            editRow(0)("Course") = txtList(1).Text
            editRow(0)("Admission_Date") = txtList(2).Text

            da.Update(ds, "Student_Detail")

            Page.Response.Redirect("ChangeUserDetails.aspx")

        End If

    End Sub 
```

我收到错误提示数组超出范围。在 btnSaveChanges_Click 的第一行。这意味着当我点击保存更改按钮时，txtlist 总是被清除。所以我将 txtList 存储在像 Session("txtList") = txtList 这样的 Session 中。并从中检索数据。但是现在我得到了文本框的旧值而不是新值。这里 txtList 是一个列表（文本框）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T22:53:32.397

首先，欢迎来到[ASP.NET WebForms 页面生命周期](http://msdn.microsoft.com/en-us/library/ms178472.aspx)。用简单的助记符记住它的模式：SILVER = Start、Init、Load、Validate、Events、Render。

其次，HTTP 是*无状态*的。`WebForms`使用 ViewState 对你隐藏这个事实做了一个了不起的工作，直到你做了一些不寻常的事情（正如你现在正在尝试的那样），这一切*似乎*都分崩离析了。真正发生的是，您开始看到`WebForms`管理方式的副作用，以及它`WinForms`与您想象的（或其他有状态系统）的不同之处。

当您在 中响应事件服务器端时`WebForms`，很容易给人一种没有任何改变的印象。整个页面与您“上次”离开时一样。所有控件都在那里，您可能以编程方式设置的值仍然设置。魔法。不是魔法。实际发生的是*整个*页面已被重新构建以响应该事件。它是如何重建的？通过您的页面定义（标记）、控制事件处理程序中采取的操作以及`form`客户端回发的数据的组合。

令人困惑？好的，让我们考虑一个例子。假设您有一个带有两个控件的页面。一个名为的文本框和一个以事件处理程序命名`txtInput`的按钮。当用户第一次请求页面时，这些控件的 HTML 来自您的标记（aspx 页面）并返回给客户端。接下来，用户设置一个值并单击提交按钮。然后，服务器会根据您的标记从头开始*重新创建页面。*在生命周期的早期阶段，控件仍具有其默认值。然后我们进入生命周期阶段，*“如果当前请求是回发，则控件属性会加载从视图状态和控件状态恢复的信息。”* 换句话说，当生命周期到达`btnSubmit``btnSubmit_Click``txtInput`*`Load`*`Init`，该控件是从标记创建的，但仍具有其默认值。然后`Load`阶段根据回发数据设置值。**

 **想知道这如何适用于您的场景？您正在添加动态控件以响应控件事件。这样做有两个问题：

1.  在页面生命周期中`Init`，基于从客户端发回的数据设置值为时已晚（回想一下`SILVER`，`Event`在*之后* `Init`）。
2.  您的按钮单击事件处理程序仅运行**一次**，以响应用户单击按钮的回发。但请记住，在每次回发时，页面都会*完全*重新创建。因此，就服务器而言，动态控件不再存在！您会注意到，不仅在响应提交事件时控件不存在服务器端，而且在页面处理它之后，它们也不再存在于客户端。

那么答案是什么？好吧，我链接的页面的“生命周期事件”部分提供了一个线索。它声明该`PreInit`事件用于（除其他外）*“创建或重新创建动态控件”*。我们为什么要这样做`PreInit`？因此，页面生命周期中的早期事件足以让以后的事件正确处理它（例如设置从客户端回传的值）。

现在，我知道，您想添加基于用户单击按钮的控件。这怎么搭配？诀窍是您必须自己管理“状态”。嗯？国家？我的意思是`MyDynamicControlsShouldBeShown`=真/假。单击按钮时，创建控件以响应按钮单击事件处理程序是正确的操作（那里实际上没有任何选择）。但是您需要以某种方式存储该状态，以便在对页面的后续请求中知道是否应该在`PreInit`. 一种巧妙的选择是在`Request.Form.Keys`. 如果`Keys`集合中存在控件 ID，则用户正在回发控件的值，因此您应该重新创建它。

* * *

## 关于使用 Session 的旁注

希望基于上述内容，您已经意识到为什么将控件放入其中`Session`不起作用。但需要明确的是，您放入`Session`对象中的控件不再是存在的页面的一部分（请记住，页面会为每个请求*完全*重新创建。这些控件不再与`Page`事件挂钩，所以没有将它们的值填充在`Page` `Init`和之间`Load`。如果它*确实*有效，它仍然不是一个特别好的主意，因为`Session`不是每个请求。那么如果用户在多个选项卡中打开相同的页面会发生什么？奇怪的事情，就是这样。**

# sql - django聚合函数中的分组？

> ID：16177521
> 
> 赞同：0
> 
> 时间：2013-04-23T19:20:45.120
> 
> 标签：sql, django, group-by, aggregate

我在将 sql 分组写入 django 应用程序时遇到问题。你们中的任何 django 用户都可以帮助我如何将这个 sql 写成对 django 友好的代码吗？这是我的模型：

```
class Stock(models.Model):
    name = models.CharField("Stock's name", max_length=200)
    symbol = models.CharField("Stock's symbol", max_length=20)

class Dividend(models.Model):
    amount = models.FloatField(default=0)
    date = models.DateField('pay date')
    stock = models.ForeignKey(Stock)

class UserStock(models.Model):
    amount = models.FloatField('amount', default=0)
    date = models.DateField('buy date')
    price = models.FloatField('price', default=0)
    user = models.ForeignKey(User)
    stock = models.ForeignKey(Stock) 
```

这是我想用 django 编写的 sql 代码：

```
select stock_id, sum(price), sum(amount) as price from stocks_userstock group by stock_id; 
```

我试图写这样的东西。

```
my_stock = UserStock.objects.filter(user=request.user)\
    .annotate(sum_price = sum('price'), sum_amount = sum('amount')) 
```

提前谢谢，我希望这对你们中的一些人来说不是问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:28:53.883

我相信只需添加一个`values`电话就可以了

```
my_stock = UserStock.objects.get(user=request.user)\
    .values('stock_id').annotate(sum_price = sum('price'), sum_amount = sum('amount')) 
```

你会得到一个类似的字典列表

```
[
    {'stock_id': 0, 'sum_price': 10, 'sum_amount': 25},
    ...
] 
```

看到[这里](https://docs.djangoproject.com/en/dev/topics/db/aggregation/#values)了解更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T19:31:36.123

```
stock = Stock.objects.all().annotate(sum_price = Sum('user_stock__price'), sum_amount = Sum('user_stock__amount')) 
```

它应该工作。

为了简化，我删除了`User`代码段中的过滤器，但您当然可以添加它。

# php - 使用 php 和 html 从我的服务器上的目录中填充“选择列表”

> ID：16177524
> 
> 赞同：1
> 
> 时间：2013-04-23T19:21:21.417
> 
> 标签：php, html

是否有可能（我假设不是）从我网站上的文件中填充下拉列表，比如在图像文件夹中？以html形式？

```
<select name="s1">
      <option value="" selected="selected">-----</option>
  <?php 
       foreach(glob('/images/*') as $filename){
       $rest = substr($filename, 7);    
       echo "<li><a href='#'>".$rest."</a></li>";
    }
?>

</select> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T19:24:20.217

您可以使用`scandir`- [http://php.net/manual/en/function.scandir.php](http://php.net/manual/en/function.scandir.php)

然后只需在返回的数组上运行 a并为每个`foreach`数组回显。`<option>`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-23T19:24:29.207

试试这样：

```
<select name="s1">
      <option value="" selected="selected">-----</option>
  <?php 
       foreach(glob(dirname(__FILE__) . '/images/*') as $filename){
       $filename = basename($filename);
       echo "<option value='" . $filename . "'>".$filename."</option>";
    }
?>

</select> 
```

# python - How do I make a method in a class that will swap a negative angle to a positive?

> ID：16177525
> 
> 赞同：0
> 
> 时间：2013-04-23T19:21:24.187
> 
> 标签：python, python-3.x

This is my code:

```
class test(object):
    """\
given angle is within 360 degrees"""
    def __init__(self, angle):
        self.angle = angle
    def __str__(self):
        return "This is going to be positive {}".format(self.angle)
    def __neg__(self):
        """\
    when given a negative angle it will be translated into a positive"""
        if self.angle < 0:
            return test(self.angle + 360)
angle = test(-100)
print(angle) 
```

The output is:

```
This is going to be positive -100 
```

How would I go about getting an angle of 260 instead of this negative? I'm stumped.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:27:50.410

You need to do the negative check in the constructor (`__init__`). `__neg__` should return a new `test` that is the negative of self.

```
class test(object):
    """\
given angle is within 360 degrees"""
    def __init__(self, angle):
        self.angle = angle % 360
    def __str__(self):
        return "This is going to be positive {}".format(self.angle)
    def __neg__(self):
        """\
    when given a negative angle it will be translated into a positive"""
        return test(-self.angle)
angle = test(-100)
print(angle) 
```

# android - Add a "Please Select" option to a Spinner in Android

> ID：16177529
> 
> 赞同：1
> 
> 时间：2013-04-23T19:21:50.167
> 
> 标签：android, spinner

I have a `Spinner` which is filled from a query using a `SimpleCursorAdapter`, this works fine... but now I need to put an option "Please Select" before all the items retrieved from the query, just for usability issues... but I'm not quite sure of how to do so... HELP please...

Here is my code...

```
private Spinner comboForm;
...
comboForm = (Spinner) findViewById(R.id.comboFormularios);
...
mDbH.abrir();
final Cursor cu = mDbH.consultaFormularios(idU);
if(cu.moveToFirst() == false){
    cu.close();
    mDbH.cerrar();
}else{
    SimpleCursorAdapter adapter2 = new SimpleCursorAdapter(getApplicationContext(),R.layout.spinner,cu,new String[] {"nombre"},new int[] {R.id.textoCombo});
    adapter2.setDropDownViewResource(R.layout.simple_spinner_dropdown_item);
    comboForm.setAdapter(adapter2);
}
mDbH.cerrar();
...
comboForm.setOnItemSelectedListener(new OnItemSelectedListener(){
    public void onItemSelected(AdapterView<?> parentView, View selectedItemView,int position, long id) {
        idF = (int) id;
        obtenerDatosRutas(idU,idF);
        tabla.removeAllViews();
        llenarTabla();
    }

    public void onNothingSelected(AdapterView<?> arg0) {}
}); 
```

Where `mDbH` is an instance of the class I'm using to manipulate the `Database`... as you can see the `Spinner` is filled up from Cursor resulting of the query `consultaFormularios(idU)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:36:58.473

创建游标时，一种可能的解决方案是使用 SQL UNION 并构造第二个 SELECT，其中仅包含您需要的标签（添加硬编码的虚拟字段以进行排序）。

或者，这很可能是最简单的解决方案。不要使用光标适配器，而是使用数组适配器，并首先使用所需的默认值填充数组，然后插入光标中的所有项目。就像是，

```
ArrayList<String> arrayList = new ArrayList<String>();
arrayList.add("Please select");

final Cursor cu = mDbH.consultaFormularios(idU);

while(cu.moveToNext()) { 
    arrayList.add(cu.getString(0)); // assuming you want a 
                                    //string from the first column
}

ArrayAdapter<String> spinnerArrayAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_dropdown_item, arrayList);
comboForm.setAdapter(spinnerArrayAdapter); 
```

# php - Timezone inconsistency in momentjs and php

> ID：16177531
> 
> 赞同：4
> 
> 时间：2013-04-23T19:21:58.003
> 
> 标签：php, datetime, timezone, momentjs

We are having problems to get the datetime representation in php and momentjs in sync. Lets say we are having a datetime with a time zone in Moscow:

`2013-06-10T10:40:00.000+04:00`

The user should see the time in local: 2013-06-10T10:40:00\. No matter if he sits in Spain or USA. Following php code would produce the proper time that we need:

```
$date = new DateTime('2013-06-10T10:40:00.000+04:00');
echo $date->format('d.m.Y H:i:s'); 
```

The output is:

```
10.06.2013 10:40:00 
```

But if we parse the same datetime string in frontend with momentjs:

```
moment('2013-06-10T10:40:00.000+04:00').format('D.M.YYYY h:mm:ss'); 
```

The output is:

```
10.6.2013 8:40:00 
```

The browsers time zone is Europe/Berlin (+02:00). Using utc() calculates the date the wrong way also. What we need is a local time of the place, so in case of php it is the right one. Giving a parse string to momentjs:

```
moment('2013-06-10T10:40:00.000+04:00', "YYYY-MM-DD HH:mm").format('D.M.YYYY h:mm:ss') 
```

would do the trick, so the time zone is deleted. But we actually should set the parse string globally, but how?

Thanks for suggestions.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T19:49:27.560

我相信你会受到[moment.js 问题 611](https://github.com/timrwood/moment/issues/611)的影响——这实际上是一个功能请求，因为 JavaScript 本身并不会这样做。问题评论中有一些可以接受的解决方法。请在那里添加您自己的反馈。谢谢。

## 更新

随着[moment.js](http://momentjs.com)版本 2.1.0 的发布，您现在可以这样做：

```
var input = "2013-06-10T10:40:00.000+04:00";
var m = moment(input).zone(input);
var s = m.format('D.M.YYYY h:mm:ss'); 
```

额外的调用`.zone(input)`将仅从字符串中提取偏移部分 ( `+04:00`) 并将其设置为用于格式化的区域。还有其他选择。请参阅文档中的[moment#zone](http://momentjs.com/docs/#/manipulating/timezone-offset/)。

## 更新#2

随着[moment.js](http://momentjs.com)版本 2.3.0 的发布，现在这是一个调用：

```
var m = moment.parseZone(input); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T19:25:38.507

尝试将 PHP 时区设置为 Europe/Berlin

```
 date_default_timezone_set("Europe/Berlin") 
```

可能是您的 PHP 安装/服务器使用不同的时区。

# unity3d - 用于统一布娃娃的 3ds max Biped

> ID：16177539
> 
> 赞同：-1
> 
> 时间：2013-04-23T19:22:25.437
> 
> 标签：unity3d, max, 3ds, ragdoll

我正在尝试通过统一 4 的布娃娃向导，它需要肘关节和膝关节，但 3dsmax Biped 对象没有膝盖和肘部，我试图将上臂作为肘部，将大腿作为膝盖，但结果是布娃娃正在扭曲错误的方式。

如何在 3dsmax Biped 中添加膝盖和肘部？或者我怎样才能使统一布娃娃与默认的 3ds max Biped 骨架一起使用？

我真的无法在任何地方找到有关此主题的任何信息。我确信我正在做一件非常愚蠢的事情，从来没有人做过。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T00:45:20.560

尝试将前臂和小腿分别用作肘部和膝盖。

# bash - 用于移动文件的 shell 脚本不正确地连接字符串

> ID：16177540
> 
> 赞同：0
> 
> 时间：2013-04-23T19:22:25.817
> 
> 标签：bash, shell, sh

我试图编写一个 shell 脚本来为我移动一些文件，但我犯了一个错误，即在没有仔细检查它首先使用的变量的情况下运行所述脚本。

这是我正在编写的脚本：

```
#!/bin/bash
# move the war files to jboss in one thing

JBOSS_DEPLOY="/cust/env/local/cust/jboss-5.1.0.GA/server/default/deploy/"

echo JBOSS_DEPLOY

TRADITIONAL="$JBOSS_DEPLOYmyProject.war"
NOSQL="$JBOSS_DEPLOYmyProjectNoSql.war"

echo $TRADITIONAL

mv myProject.war $TRADITIONAL
mv myProjectNoSql.war $NOSQL 
```

回声用于调试目的。好像`"$JBOSS_DEPLOYmyProject.war"`变成了`".war"`。我需要修复什么才能将这些字符串正确连接到一个新变量中？

我也有点好奇文件的实际去向。显然他们会互相覆盖，但应该有一个文件在`".war"`某个地方命名，对吧？它会在哪里？

编辑：我找到了它的放置位置。我没有意识到`"."`会隐藏它。现在我只需要知道如何正确连接没有空格的字符串！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T19:25:04.490

Bash 无法判断变量名的结束位置和明文的开始位置，除非您提供提示：

```
"$FOObar"   # variable named  "FOObar"
# v.s.
"${FOO}bar"  # variable named "FOO" and some plaintext "bar" 
```

# c# - How to keep original line and ammended line with Regex

> ID：16177541
> 
> 赞同：0
> 
> 时间：2013-04-23T19:22:35.880
> 
> 标签：c#, regex, c#-4.0

I am learning C# and I would like some help. With the help of the people on I have managed to achieve editing an .inf file section using a regex, but I would like to keep the original line of text before editing. I have placed the code below and a sample of the .INF data before and if possible what I would like it to look like, but not too bothered with how it will look as long as the data is there.

```
else if (!chkbxintdial.Checked)
{
   var lines = File.ReadAllLines(txtcurrent.Text).ToList();
   var regex = new Regex(@"^[00]{2}");
   var startFrom = lines.IndexOf("[Destinations]");

   //Start replacing from the index of "[Destinations]"
   for (int i = startFrom; i < lines.Count; i++)
   {
      //Assuming the ini section ends at an empty line - stop replacing
      if (lines[i].Trim() == string.Empty)
      break;

      lines[i] = regex.Replace(lines[i], "+");
   }
   File.WriteAllLines(txtnewtariff.Text, lines); 
```

Sample of what I would like to do.

Original file

```
[Destinations]
00="International",I,IV
0024195="Gabon Mobiles",I,IMT
0024197="Gabon Mobiles",I,IMT 
```

After Process.

```
[Destinations]
00="International",I,IV
+="International",I,IV
0024195="Gabon Mobiles",I,IMT
+24195="Gabon Mobiles",I,IMT
0024197="Gabon Mobiles",I,IMT
+24197="Gabon Mobiles",I,IMT 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T19:26:08.570

而不是完全替换该行，而是添加到该行：

```
lines[i] += Environment.NewLine + regex.Replace(lines[i], "+"); 
```

还值得注意的是，存在专门用于操作 .INF 文件的工具，因此除了出于学术目的之外，实际上没有必要这样做。虽然您的解决方案（除了这个小修复）似乎可以工作，但它对于较大的文件并不是特别有效，在面对任意数据时也不是特别健壮。

# magento - Magento中success.phtml中$this->getCanViewOrder()的功能是什么

> ID：16177543
> 
> 赞同：2
> 
> 时间：2013-04-23T19:22:42.923
> 
> 标签：magento

我试图弄清楚以下函数正在检查什么：

```
 <?php if ($this->getCanViewOrder() && $this->getCanPrintOrder()) :?>

 <?php echo $this->__('<strong><a href="%s" onclick="this.target=\'_blank\'">Click here to print</a></strong> an invoice or a copy of your order confirmation.', $this->getPrintUrl()) ?> 
```

在`success.phtml`Magento 的文件中，“单击此处打印”链接不再显示在感谢页面上。这个功能在哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T20:46:00.670

更新：在做了更多研究后，我大大修改了这个答案。

* * *

作为记录，它看起来像是`getCanPrintOrder`Magento 获取对象数据的神奇方法之一。你可以用 设置它的值`setCanPrintOrder`，如果你之前没有调用过，`getCanPrintOrder`只会返回`null`。你也可以通过调用来设置它`setData('can_print_order')`。

看起来它被设置的唯一位置是在方法中的 Onepage 结帐成功块`Mage_Checkout_Block_Onepage_Success`中`_prepareLastOrder`：

```
protected function _prepareLastOrder()
{
    $orderId = Mage::getSingleton('checkout/session')->getLastOrderId();
    if ($orderId) {
        $order = Mage::getModel('sales/order')->load($orderId);
        if ($order->getId()) {
            $isVisible = !in_array($order->getState(),
                Mage::getSingleton('sales/order_config')->getInvisibleOnFrontStates());
            $this->addData(array(
                'is_order_visible' => $isVisible,
                'view_order_id' => $this->getUrl('sales/order/view/', array('order_id' => $orderId)),
                'print_url' => $this->getUrl('sales/order/print', array('order_id'=> $orderId)),
                'can_print_order' => $isVisible,
                'can_view_order'  => Mage::getSingleton('customer/session')->isLoggedIn() && $isVisible,
                'order_id'  => $order->getIncrementId(),
            ));
        }
    }
} 
```

从`_beforeToHtml`方法调用哪个，在呈现该页面时将调用该方法。

将字符串拉得更远一点，我们看到`can_print_order`是由`$isVisible`变量确定的，并且是由这一行设置的：

```
$isVisible = !in_array($order->getState(),
    Mage::getSingleton('sales/order_config')->getInvisibleOnFrontStates()); 
```

它正在检查订单状态是否是前面可见的状态之一。这些最终设置在`config.xml`核心 Magento 销售模块的文件中。

```
<config>
    <global>
        <sales>
            <order>
                <states>
                    <new translate="label">
                        <label>New</label>
                        <statuses>
                            <pending default="1"/>
                        </statuses>
                        <visible_on_front>1</visible_on_front>
                    </new>
                    ...
                </states>
            </order>
        </sales>
    </global>
</config> 
```

默认情况下，所有状态都是 visible_on_front ，因此除非您更改了它们，或者某些东西覆盖了它们，否则这不应该是您的问题。我会通过转储`getCanPrintOrder`success.phtml 中的值来仔细检查这一点。

一个 hacky 解决方法是覆盖模板文件并添加

```
$this->setCanPrintOrder(true);
$this->setCanViewOrder(true); 
```

高于 if 条件的任何位置。或者只是完全删除检查。

# java - ListFragment 和 onListItemClick 不起作用

> ID：16177549
> 
> 赞同：0
> 
> 时间：2013-04-23T19:23:14.680
> 
> 标签：java, android, xml

我有标签，在一个标签中有一个`ListFragment`带有`onListItemClick`. 当您单击一个项目时`ListFragment`，会显示另一个项目，因此可以正常工作。`onListItemClick`与第一个相同的`ListFragment`执行到第二个`ListFragment`。

编辑：这就是我尝试更改 CustomTabListener 的方式：

```
public class CustomTabListener<T extends Fragment> implements TabListener {

private Fragment mFragment;
private final Activity mActivity;
private final String mTag;
private final Class<T> mClass;
private final Bundle mArgs;

public CustomTabListener(Activity activity, String tag, Class<T> clz) {
    this(activity, tag, clz, null);
}

public CustomTabListener(Activity activity, String tag, Class<T> clz, Bundle args){
    mActivity = activity;
    mTag = tag;
    mClass = clz;
    mArgs = args;

    // Check to see if we already have a fragment for this tab, probably
    // from a previously saved state.  If so, deactivate it, because our
    // initial state is that a tab isn't shown.
    mFragment = mActivity.getFragmentManager().findFragmentById(android.R.id.content);
    if (mFragment != null && !mFragment.isDetached()) {
        FragmentTransaction ft = mActivity.getFragmentManager().beginTransaction();
        ft.hide(mFragment);
        ft.commit();
    }
}

@Override
public void onTabReselected(Tab tab, FragmentTransaction ft) {
}

@Override
public void onTabSelected(Tab tab, FragmentTransaction ft) {

    if(mFragment==null){
        mFragment = Fragment.instantiate(mActivity, mClass.getName(), mArgs);
        ft.add(android.R.id.content, mFragment, mTag);
    }else{
        ft.show(mFragment);
    }
}

@Override
public void onTabUnselected(Tab tab, FragmentTransaction ft) {
mActivity.getFragmentManager().findFragmentByTag(mTag);

    if(mFragment!=null){
        ft.hide(mFragment);
        }
    }
} 
```

现在，如果我单击第一个列表中的项目，应用程序会崩溃。LogCat 说：

```
04-24 16:00:37.161: E/AndroidRuntime(9421): FATAL EXCEPTION: main
04-24 16:00:37.161: E/AndroidRuntime(9421): java.lang.ClassCastException: com.example.easysave.InfoFragment cannot be cast to android.app.ListFragment
04-24 16:00:37.161: E/AndroidRuntime(9421):     at com.example.easysave.KategorierFragment.onListItemClick(KategorierFragment.java:66)
04-24 16:00:37.161: E/AndroidRuntime(9421):     at android.app.ListFragment$2.onItemClick(ListFragment.java:160)
04-24 16:00:37.161: E/AndroidRuntime(9421):     at android.widget.AdapterView.performItemClick(AdapterView.java:298)
04-24 16:00:37.161: E/AndroidRuntime(9421):     at android.widget.AbsListView.performItemClick(AbsListView.java:1100)
04-24 16:00:37.161: E/AndroidRuntime(9421):     at android.widget.AbsListView$PerformClick.run(AbsListView.java:2749)
04-24 16:00:37.161: E/AndroidRuntime(9421):     at android.widget.AbsListView$1.run(AbsListView.java:3423)
04-24 16:00:37.161: E/AndroidRuntime(9421):     at android.os.Handler.handleCallback(Handler.java:725)
04-24 16:00:37.161: E/AndroidRuntime(9421):     at android.os.Handler.dispatchMessage(Handler.java:92)
04-24 16:00:37.161: E/AndroidRuntime(9421):     at android.os.Looper.loop(Looper.java:137)
04-24 16:00:37.161: E/AndroidRuntime(9421):     at android.app.ActivityThread.main(ActivityThread.java:5041)
04-24 16:00:37.161: E/AndroidRuntime(9421):     at java.lang.reflect.Method.invokeNative(Native Method)
04-24 16:00:37.161: E/AndroidRuntime(9421):     at java.lang.reflect.Method.invoke(Method.java:511)
04-24 16:00:37.161: E/AndroidRuntime(9421):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-24 16:00:37.161: E/AndroidRuntime(9421):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-24 16:00:37.161: E/AndroidRuntime(9421):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

我有两个问题：

1.  当我单击第一个`ListFragment`显示的项目然后单击另一个选项卡时，列表不会隐藏。

2.  （已解决）当我单击第一个`ListFragment`显示的项目然后单击另一个`ListFragment`时，应用程序崩溃。

单击第二个时我想要的`ListFragment`是一个带有简单文本的片段，而不是列表。

我这样做是错误的吗？有谁知道吗？

问题 2 通过以下方式解决：

在 main 中注释 setContentView

更改所有 ListFragment current = (ListFragment) fm.findFragmentByTag(getTag()); 和 ft.add(R.id.Frame, mFragment); 到 Listfragment 当前 = (ListFragment) fm.findFragmentById(android.R.id.content); 和 ft.add(android.R.id.content, mFragment);

最后在 PlaneraFragment 中改为：

```
public class PlaneraFragment extends Fragment{

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

    /** Inflating the layout country_details_fragment_layout to the view object v */
    View v = inflater.inflate(R.layout.planera_fragment, null);

    /** Getting the textview object of the layout to set the details */
    TextView tv = (TextView) v.findViewById(R.id.text_planera);

    /** Getting the clicked item's position and setting corresponding details in the textview of the detailed fragment */
    tv.setText("Hej ");

    return v;
    }

} 
```

我的代码：

主要的

```
package com.example.easysave;  

import android.os.Bundle;
import android.app.ActionBar;
import android.app.Activity;
import android.app.ActionBar.Tab;

public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    ActionBar actionBar = getActionBar();
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

    actionBar.setDisplayShowTitleEnabled(true);

    Tab tab = actionBar.newTab().setText("Kategorier")
        .setTabListener(new CustomTabListener<KategorierFragment>(this, "kategorier", KategorierFragment.class));
    actionBar.addTab(tab);

    tab = actionBar.newTab().setText("Profil")
        .setTabListener(new CustomTabListener<ProfilFragment>(this, "profil", ProfilFragment.class));
    actionBar.addTab(tab);

    tab = actionBar.newTab().setText("Info")
        .setTabListener(new CustomTabListener<InfoFragment>(this, "info", InfoFragment.class));
    actionBar.addTab(tab);
    }
} 
```

类别片段

```
package com.example.easysave;

import android.app.Fragment;
import android.app.FragmentManager;
import android.app.FragmentTransaction;
import android.app.ListFragment;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class KategorierFragment extends ListFragment {

String kategorier[] = new String[]{
         "Mat","El","Resor","Aktiviteter","Annat"};

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(getActivity().getBaseContext(), android.R.layout.simple_selectable_list_item, kategorier);

    setListAdapter(adapter);
return super.onCreateView(inflater, container, savedInstanceState);
}

@Override
public void onListItemClick(ListView l, View v, int position, long id) {
    // TODO Auto-generated method stub
    super.onListItemClick(l, v, position, id);

    Fragment mFragment = new KategorierFragment();
    switch(position){
    case 0:
        mFragment = new MatFragment();
        break;
    case 1:
        mFragment = new ElFragment();
        break;
    case 2:
        mFragment = new ResorFragment();
        break;
    case 3:
        mFragment = new AktiviteterFragment();
        break;
    case 4:
        mFragment = new AnnatFragment();
        break;

    }

    FragmentManager fm = getFragmentManager();
    FragmentTransaction ft = fm.beginTransaction();
    ListFragment current = (ListFragment) fm.findFragmentByTag(getTag());

    ft.add(R.id.Frame, mFragment);
    ft.addToBackStack(null);
    ft.hide(current);
    ft.commit();
}

@Override
public void onStart() {
    super.onStart();
    getListView().setChoiceMode(ListView.CHOICE_MODE_SINGLE);
    } 
} 
```

MatFragment

```
package com.example.easysave;

import android.app.Fragment;
import android.app.FragmentManager;
import android.app.FragmentTransaction;
import android.app.ListFragment;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class MatFragment extends ListFragment{

String mat[] = {"Planera", "Storkok"};

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    // TODO Auto-generated method stub

     ArrayAdapter<String> adapter = new ArrayAdapter<String>(getActivity().getBaseContext(), android.R.layout.simple_selectable_list_item, mat);
     setListAdapter(adapter);
    return super.onCreateView(inflater, container, savedInstanceState);
}

@Override
public void onListItemClick(ListView l, View v, int position, long id) {
    // TODO Auto-generated method stub
    super.onListItemClick(l, v, position, id);

    Fragment mFragment = new MatFragment();
    switch(position){
    case 0:
        mFragment = new PlaneraFragment();
        break;
    case 1:
        mFragment = new StorkokFragment();
        break;
    }

    FragmentManager fm = getFragmentManager();
    FragmentTransaction ft = fm.beginTransaction();
    ListFragment current = (ListFragment) fm.findFragmentByTag(getTag());
    if(current == null)
    ft.add(R.id.Frame, mFragment);
    ft.addToBackStack(null);
    ft.hide(current);
    ft.commit();
}

@Override
public void onStart() {
    super.onStart();
    getListView().setChoiceMode(ListView.CHOICE_MODE_SINGLE);
    }    
} 
```

自定义标签监听器

```
package com.example.easysave;

import android.app.Activity;
import android.app.Fragment;
import android.app.FragmentTransaction;
import android.app.ActionBar.Tab;
import android.app.ActionBar.TabListener;

public class CustomTabListener<T extends Fragment> implements TabListener {

//deklarerar variabler mm
private Fragment mFragment;
private final Activity mActivity;
private final String mTag;
private final Class<T> mClass;

public CustomTabListener(Activity activity, String tag, Class<T> clz){
    mActivity = activity;
    mTag = tag;
    mClass = clz;
}

@Override
public void onTabReselected(Tab tab, FragmentTransaction ft) {
}

@Override
public void onTabSelected(Tab tab, FragmentTransaction ft) {
    if(mFragment==null){
        mFragment = Fragment.instantiate(mActivity, mClass.getName());
        ft.add(R.id.Frame, mFragment, mTag);
    }else{
        ft.attach(mFragment);
    }
}

@Override
public void onTabUnselected(Tab tab, FragmentTransaction ft) {

    if(mFragment!=null)
        ft.detach(mFragment);
    }
} 
```

平面碎片

```
package com.example.easysave;

import android.app.Fragment;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.TextView;

public class PlaneraFragment extends Fragment{

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    View view = inflater.inflate(R.layout.planera_fragment, container, false);

    TextView text = (TextView) getActivity().findViewById(R.id.text_planera);
    text.setText("Hello there!");

    return view;
    }

} 
```

平面片段

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<TextView
    android:textIsSelectable="false"
    android:id="@+id/text_planera"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"/>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T15:03:57.170

你需要弄清楚你应该如何处理你的标签。您在 TabListener 中附加和分离，但在单击 ListView 时显示和隐藏。

您可以分离所有当前片段，然后附加新片段，或者将选项卡侦听器更改为 .show() 和 .hide() 。

**编辑：**根据[此答案](https://stackoverflow.com/a/10179480/2109241)中的最后一条评论，有一个很好的例子，可以在标签之间切换时保留标签历史记录。

TabListener 的以下实现很简单，但不会保持您的后台堆栈完好无损。切换到另一个选项卡时，您没有选择要隐藏的选项卡。这只是在它上面涂上釉，然后把整个东西分开。

```
@Override
public void onTabSelected(Tab tab, FragmentTransaction ft) {
     mFragment = Fragment.instantiate(mActivity, mClass.getName());
     ft.replace(android.R.id.content, mFragment, mTag);
}

@Override
public void onTabUnselected(Tab tab, FragmentTransaction ft) {
    if (mFragment != null)
        ft.detach(mFragment);
    }
} 
```

# twitter-bootstrap - BootStrap DropDown on tag without text

> ID：16177551
> 
> 赞同：0
> 
> 时间：2013-04-23T19:23:23.430
> 
> 标签：twitter-bootstrap

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T19:52:30.587

`<i>`为您的精灵图像使用标签：

```
<a href="#" data-toggle="dropdown" role="button"><i class="logo_master" /></a> 
```

# c++ - C++ Smallest Number in Array Not Displaying

> ID：16177552
> 
> 赞同：1
> 
> 时间：2013-04-23T19:23:29.443
> 
> 标签：c++

```
#include <iostream>

using namespace std;

int main()
{  
    double sixty = 0.0;
    double fiftyfive = 0.0;
    double height[10];
    double tallest = 0.0;
    double shortest = 0.0;
    double average = 0.0;
    double total = 0.0;

    for (int x = 0; x < 10; x = x + 1)
    {
        height[x] = 0.0;
    }

    cout << "Please enter the heights of ten students. "<< endl;
    for (int x = 0; x < 10; x = x + 1)
    {
        cout << "Enter height of a student: ";
        cin >> height[x];
    }

    for (int x = 0; x < 10; x = x + 1)
    {
        if (height[x] > 60)
        {
           sixty = sixty + 1;
          }
    }
    for (int x = 0; x < 10; x = x + 1)
    {
        if (height[x] < 55)
        {
           fiftyfive = fiftyfive + 1;
        }
    }
    cout << "The number of students over 60 inches in height: " << sixty << endl;
    cout << "The number of students under 55 inches in height: " << fiftyfive << endl;

    for (int x = 0; x < 10; x = x + 1)
    {
        if (height[x] > tallest)
        {
                      tallest = height[x];
        }
    }
    cout << "The tallest student is: " << tallest << endl;

    for (int x = 0; x < 10; x = x + 1)
    {
        if (height[x] < shortest)
        {
                      shortest = height[x];
        }
    }
    cout << "The shortest student is: " << shortest << endl;

    for (int x = 0; x < 10; x = x + 1)
    {
        total = total + height[x];
    }
    average = total / 10;
    cout << "The average student height is: " << average << endl;   

    system("pause"); 
    return 0;
} 
```

In the above, I need to spit out the # of students over 60in, the # of students over 55in, the average height, the tallest height, and the shortest height.

Everything works fine except for the shortest height. I return an output of zero for that portion of the code.

This is simple code so I imagine it's a simple problem which I'm overlooking. Any input is appreciated.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T19:26:29.353

```
 if (height[x] < shortest)
    {
                  shortest = height[x];
    } 
```

最短为零，永远不会有比这小的学生（除非你有来自外部领域的负高度的学生；））。你需要用 init shortest`height[0];`
同样在这种情况下你可以从 1 开始迭代学生

```
shortest = height[0];
for (int x = 1; x < 10; x = x + 1)
{
    if (height[x] > tallest)
    {
                  tallest = height[x];
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T19:25:55.810

将循环更改为

```
for (int x = 0; x < 10; x = x + 1)
{
    if (shortest == 0 || height[x] < shortest)
    {
                  shortest = height[x];
    }
} 
```

或使用数组`shortest`中的第一个元素进行初始化。`height`

您的代码将不起作用，因为没有小于零的高度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T19:28:04.933

Initial value of `shortest` is zero

`double shortest = 0.0;`

and the loop can't find any height which is less than `0`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-23T19:29:00.613

```
for (int x = 0; x < 10; x = x + 1)
{
    if (height[x] < shortest)
    {
         shortest = height[x];
    }
} 
```

since `shortest` is initialized to `0.0`, if your `height` elements are all not smaller than `0.0`, then you will see `shortest` not changed. try the following:

```
shortest = height[0];
for (int x = 1; x < 10;  ++x)
{
    if (height[x] < shortest)
    {
         shortest = height[x];
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T19:29:14.207

Initializa `tallest` and `shortest` to `height[0]` after you get `height` array as input...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-23T19:26:28.850

除非您有负身高的学生，否则您的比较可能是错误的。

将“最短”高度设置为更大的值，否则比较永远不会成立。

# scroll - Scrollspy not working

> ID：16177557
> 
> 赞同：0
> 
> 时间：2013-04-23T19:23:38.900
> 
> 标签：scroll, spy

i got this code, and no matter what i do, the scroll spy won't work, can anyone shed some light into it? thanks in advance!

```
<div class='corpo effect8'>
        <div class='esquerda'>
            <div id="como-nav" class='como-menu'>
                <div class="como-menu-topo">menu</div>
                <ul class="como-menu-links">
                    <li class><a href="#intro">introdução</a></li><div class="divisor-como"></div>
                    <li class><a href="#quemsomos">quem somos</a></li><div class="divisor-como"></div>
                    <li class><a href="#queremos">o que queremos</a></li><div class="divisor-como"></div>
                    <li class><a href="#coletadedados">coleta de dados</a></li><div class="divisor-como"></div>
                    <li class><a href="#ferramentas">ferramentas</a></li><div class="divisor-como"></div>
                    <li class><a href="#faq">FAQ</a></li>
                </ul>
            </div>
        </div>
        <div id="como-texto" class="comofunciona" data-spy="scroll" data-target="#como-nav" data-offset="0">
            <h3 id="intro">introdução</h3>
            <p>Ad leggings keytar, brunch id art party dolor labore. Pitchfork yr enim lo-fi before they sold out qui. Tumblr farm-to-table bicycle rights whatever. Anim keffiyeh carles cardigan. Velit seitan mcsweeney's photo booth 3 wolf moon irure. Cosby sweater lomo jean shorts, williamsburg hoodie minim qui you probably haven't heard of them et cardigan trust fund culpa biodiesel wes anderson aesthetic. Nihil tattooed accusamus, cred irony biodiesel keffiyeh artisan ullamco consequat.</p>
            <h3 id="quemsomos">quem somos</h3>
            <p>Ad leggings keytar, brunch id art party dolor labore. Pitchfork yr enim lo-fi before they sold out qui. Tumblr farm-to-table bicycle rights whatever. Anim keffiyeh carles cardigan. Velit seitan mcsweeney's photo booth 3 wolf moon irure. Cosby sweater lomo jean shorts, williamsburg hoodie minim qui you probably haven't heard of them et cardigan trust fund culpa biodiesel wes anderson aesthetic. Nihil tattooed accusamus, cred irony biodiesel keffiyeh artisan ullamco consequat.</p>
            <h3 id="queremos">o que queremos</h3>
            <p>Ad leggings keytar, brunch id art party dolor labore. Pitchfork yr enim lo-fi before they sold out qui. Tumblr farm-to-table bicycle rights whatever. Anim keffiyeh carles cardigan. Velit seitan mcsweeney's photo booth 3 wolf moon irure. Cosby sweater lomo jean shorts, williamsburg hoodie minim qui you probably haven't heard of them et cardigan trust fund culpa biodiesel wes anderson aesthetic. Nihil tattooed accusamus, cred irony biodiesel keffiyeh artisan ullamco consequat.</p>
            <h3 id="coletadedados">coleta de dados</h3>
            <p>Ad leggings keytar, brunch id art party dolor labore. Pitchfork yr enim lo-fi before they sold out qui. Tumblr farm-to-table bicycle rights whatever. Anim keffiyeh carles cardigan. Velit seitan mcsweeney's photo booth 3 wolf moon irure. Cosby sweater lomo jean shorts, williamsburg hoodie minim qui you probably haven't heard of them et cardigan trust fund culpa biodiesel wes anderson aesthetic. Nihil tattooed accusamus, cred irony biodiesel keffiyeh artisan ullamco consequat.</p>
            <h3 id="ferramentas">ferramentas</h3>
            <p>Ad leggings keytar, brunch id art party dolor labore. Pitchfork yr enim lo-fi before they sold out qui. Tumblr farm-to-table bicycle rights whatever. Anim keffiyeh carles cardigan. Velit seitan mcsweeney's photo booth 3 wolf moon irure. Cosby sweater lomo jean shorts, williamsburg hoodie minim qui you probably haven't heard of them et cardigan trust fund culpa biodiesel wes anderson aesthetic. Nihil tattooed accusamus, cred irony biodiesel keffiyeh artisan ullamco consequat.</p>
            <h3 id="faq">faq</h3>
            <p>Ad leggings keytar, brunch id art party dolor labore. Pitchfork yr enim lo-fi before they sold out qui. Tumblr farm-to-table bicycle rights whatever. Anim keffiyeh carles cardigan. Velit seitan mcsweeney's photo booth 3 wolf moon irure. Cosby sweater lomo jean shorts, williamsburg hoodie minim qui you probably haven't heard of them et cardigan trust fund culpa biodiesel wes anderson aesthetic. Nihil tattooed accusamus, cred irony biodiesel keffiyeh artisan ullamco consequat.</p>

        </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-04T19:36:35.557

这将很难解决，因为您只提供了 div 的标记。考虑链接到一个 jsfiddle，这样我们就可以获得完整的图片。

当我遇到 scrollspy 问题时，是因为我将 js 代码放在了头部而不是主体的底部。尝试放置

```
 <script src="//netdna.bootstrapcdn.com/bootstrap/3.0.2/js/bootstrap.min.js"></script> 
```

（或您正在使用的任何版本的 BS）就在关闭 body 标签之前。

# r - 如何在R中合并许多不同长度的时间序列

> ID：16177558
> 
> 赞同：3
> 
> 时间：2013-04-23T19:23:43.977
> 
> 标签：r, time-series

我正在从服务器检索一些数据并获得大约 200 个时间序列对象，所有这些对象都具有不同的长度。这不起作用，因此希望将它们合并到一个对象中，并在没有可用数据的位置写入 NA。同样对于每个系列，我都有多个变量。我尝试了一个循环，但仍然无法运行，必须有一种更优雅的方式来解决这个问题。例如假设我有以下内容：

```
 library(zoo)
    a=zoo(matrix(rnorm(300), 100, 3),Sys.Date()-100:1)
    b=zoo(matrix(rnorm(375), 125, 3),Sys.Date()-125:1)
    c=zoo(matrix(rnorm(525), 175, 3),Sys.Date()-175:1)
    d=zoo(matrix(rnorm(450), 150, 3),Sys.Date()-150:1)
    e=list(a,b,c,d)
    z=do.call(merge,e) 
```

编辑：这有效

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T19:56:23.790

您可以`do.call`与`merge`. 它迭代地合并动物园时间序列列表。

```
do.call(merge,list(a,b,c,d)) 
```

我认为缺失的值应该用 NA 填充。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-05T04:45:42.070

If you want to add the zoo objects as new columns, the `cbind` function is your friend.

```
data <- cbind(a,b,c,d) 
```

The beauty of zoo objects is that they can be ragged. Hence, NA values are automatically returned when the length of timeseries differ. Plus, zoo has a nice multivariate timeseries autoplot function, among many other things:

```
plot(data) 
```

# php - PHP：如何在其他变量名中添加变量？

> ID：16177559
> 
> 赞同：-2
> 
> 时间：2013-04-23T19:23:53.350
> 
> 标签：php, variables

如何在其他变量定义中添加变量？

这是一个例子：`$cars_list_ VARIABLE HERE [$car]`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T19:26:39.563

```
${'cars_list_'.$your_variable}[$var] 
```

但它非常丑陋。使用数组而不是多个变量：

```
$vars_list[$your_variable][$car] 
```

显然，您需要更改现有代码才能使其正常工作。但这值得花时间/精力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T19:26:34.363

虽然您可以使用`${'cars_list_'.$somevar}['car']`，但这是一个非常糟糕的主意。相反，您应该有一个可以访问的多维数组`$cars_list[$somevar]['car']`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T19:30:27.103

你可以做：

```
${'cars_list_' . 'other_var'} = "stuff";
echo $car_list_other_var; 
```

返回“东西”

# asp.net-mvc - 在 elmah.mvc 中添加对 elmah 控制器的 SSL 支持

> ID：16177561
> 
> 赞同：1
> 
> 时间：2013-04-23T19:24:01.497
> 
> 标签：asp.net-mvc, elmah.mvc

我想要求 Elmah.MVC 包中的 Elmah 控制器使用 SSL。有人已经这样做了吗？到目前为止，我可以通过要求授权来保护它，但我希望 elmah 日志数据仅通过 SSL 返回。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:39:55.143

打开 ELMAH 控制器并添加以下属性：

```
[RequireHttps] 
```

例子：

```
using System.Web.Mvc;

namespace Elmah.Mvc
{
    [Authorize]
    [RequireHttps]
    public class ElmahController : Controller
    {
        public ActionResult Index(string resource)
        {
            /* Adapted by Alexander Beletsky */
            return new ElmahResult();
        }

        public ActionResult Detail(string resource)
        {
            /* Adapted by Alexander Beletsky */
            return new ElmahResult();
        }
    }
} 
```

ELMAH 控制器的源代码取自[GitHub 项目](https://github.com/alexanderbeletsky/elmah.mvc/blob/master/src/Elmah.Mvc/ElmahController.cs)

# winforms - 如何为 .Net 3.5 Winforms 应用程序安装 Crystal Reports

> ID：16177562
> 
> 赞同：1
> 
> 时间：2013-04-23T19:24:01.770
> 
> 标签：winforms, .net-3.5, installation, inno-setup, crystal-reports-2008

我们有一个使用可自由再发行版本的 Crystal Reports 的 VB.Net Winforms (x86) 应用程序。虽然应用程序在我的测试机器上运行良好，但在客户端机器上安装并尝试从应用程序打印报告时，错误：系统找不到指定的文件。文件名：'CrystalDecisions.CrystalReports.Engine ... 显示。

inno-setup 包括客户端在安装期间安装的 CR 可再发行组件“CRRedist2008_x86.msi”。（我们还尝试运行“CRRedist2008_x64.msi”，但收到“不支持的处理器类型”错误）。

我已阅读有关 .NET 1/2 (VS 2002/2005) 的先决条件的合并模块，但找不到与 .NET 3.5 相关的任何有用信息，我想知道这些文件是否仍然需要以及如何打包和部署它们他们实际上是需要的。

非常感谢有关如何解决此安装问题的任何指导。

**编辑** Inno-Setup 包含以下命令，用于检查是否安装了 CR，如果没有，则从最终设置表单启动 MSI：

```
[Run]
Filename: "{app}\CRRedist2008_x86.msi"; Description: "Crystal Reports"; Flags: nowait postinstall skipifsilent; Check: EnsureCrystalReports105Installed(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T02:26:38.340

问题是您实际上并未执行 MSI 文件。您可以通过运行安装程序`/LOG`并查看生成的日志文件来看到这一点。

这是因为 MSI 文件不能直接执行——它们是数据文件，而不是程序。

要解决此问题，您需要运行`msiexec`，将 MSI 文件作为参数传递；例如。

```
[Run]
Filename: {sys}\msiexec.exe; Parameters: "/i ""{app}\CRRedist2008_x86.msi"""; ... 
```

您应该查看 msiexec 接受的命令行参数和 MSI 文件接受的属性，看看您是否想做一些不同的事情，例如。以静默方式而不是交互方式运行安装。

此外，如果此组件对于您的应用程序是可选的，并且它可以优雅地处理未安装的组件，则将其作为 postinstall 运行也很好。如果不是这种情况，那么您应该将其视为先决条件，并始终通过`PrepareToInstall`.

# python - 如何打印到 QTextEdit 以模拟打印到控制台？（Python 3.3）

> ID：16177565
> 
> 赞同：0
> 
> 时间：2013-04-23T19:24:13.367
> 
> 标签：python, python-3.x, pyqt, pyqt4, python-3.3

我有一段代码显示一个带有 QTextEdit 字段的 Gui。我想实时打印到该字段，类似于打印功能输出到控制台的方式。

我尝试过使用 append 函数的多个实例。前任：

```
self.textEdit.append(_translate("MainWindow", ">>> Text", None)) 
```

问题是，无论它们在代码中的什么位置，它们似乎只在程序执行后才显示出来。我的目标是让它们像控制台上的打印功能一样显示。

我觉得这是一个简单的答案，但我没有运气搜索.. 我对 Python 还很陌生，任何帮助或指导将不胜感激。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T20:14:55.790

这意味着您可能正在 GUI 线程中完成所有工作。这是一个常见的错误，这意味着当有其他事情发生时，GUI 将冻结并且不响应。

您可以添加一个调用以`QApplication.processEvents()`允许在您更改`QTextEdit`.

解决方案很简单：在单独的线程中完成工作。您应该阅读Qt 文档中的[Threading Basics](http://qt-project.org/doc/qt-4.8/thread-basics.html)，这应该可以帮助您入门。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T21:53:39.423

事实上，正如 mata 所提到的，冻结来自于在同一个（主）线程中完成所有工作，该线程还处理 UI 更新。解决响应问题的一种方法确实是在阻塞代码中频繁使用 QApplication.processEvents() 。如果足够频繁，这会给用户一个响应式 GUI 的印象。

但是，在 Python 中使用线程（无论是原生线程还是 QThread）并不总是有效。那是因为 Global Interpreter Lock 的存在（GIL，[wiki 有一个很好的简短介绍](http://wiki.python.org/moin/GlobalInterpreterLock)）。简而言之，Python 不允许多个线程同时执行代码。

如果您的后台任务很轻，或者基于 IO，您可以绕过这个问题，因为大多数用于 Python 的 IO 繁重的模块在执行它们的工作时都会释放 GIL。但是，如果您在 Python 中执行大量计算，GIL 将被您的进程锁定，因此您的 UI 仍将无响应。

考虑以下使用 PySide 构建的示例：

```
import sys, random
from threading import Thread
from time import sleep
from urllib import urlopen
from PySide import QtCore, QtGui

class Window(QtGui.QMainWindow):
    update_signal = QtCore.Signal(int)
    def __init__(self):
        QtGui.QMainWindow.__init__(self)
        self.progress_bar = QtGui.QProgressBar(self)
        self.progress_bar.setRange(0, 10)
        self.setCentralWidget(self.progress_bar)
        self.update_signal[int].connect(self.progress_bar.setValue)
        self.show()
        self.t = Thread(target=self.worker)
        self.t.start()

    def worker(self):
        while self.progress_bar.value() < 10:
            self.update_signal.emit(self.progress_bar.value()+1)
            print "Starting Sleep"
            sleep(5)
            print "End of Sleep"

if __name__ == '__main__':
    qapp = QtGui.QApplication(sys.argv)
    win = Window()
    sys.exit(qapp.exec_()) 
```

然后，尝试将工作函数替换为：

```
def worker(self):
    while self.progress_bar.value() < 10:
        self.update_signal.emit(self.progress_bar.value()+1)
        v = 0
        print "Starting Add"
        for i in xrange(5000000):
            v = v+random.uniform(0, 100)
        print "End of Add" 
```

第一种情况维护响应式 UI，因为对 sleep() 的调用会释放 GIL。但是第二个例子没有，因为计算密集型算法保留了锁。

一种解决方案可能是使用[多处理](http://docs.python.org/2/library/multiprocessing.html)包。从文档：

> multiprocessing 是一个使用类似于 threading 模块的 API 支持生成进程的包。multiprocessing 包提供本地和远程并发，通过使用子进程而不是线程来有效地避开全局解释器锁。因此，多处理模块允许程序员充分利用给定机器上的多个处理器。

[一个使用 python 多处理的简单说明性示例。](http://timothyawiseman.wordpress.com/2012/12/21/a-really-simple-multiprocessing-python-example/)

此外，如果您有进一步的兴趣，可能会对[这篇关于多处理技术的博](http://doughellmann.com/2007/10/multiprocessing.html)文感兴趣。

# geolocation - 如何使用JAVA获取我当前位置的经纬度

> ID：16177566
> 
> 赞同：0
> 
> 时间：2013-04-23T19:24:16.973
> 
> 标签：geolocation, latitude-longitude

我想使用Java获得纬度和经度。我需要一些 JAVA API ，它可以用来获取当前的纬度和经度。Google Geo-location API 中有一个选项，我们可以通过设置位置名称来获取纬度和经度，但我需要当前位置而不知道位置名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T19:37:59.533

如果您正在编写一个无法连接到互联网的程序，那么根据您的描述这是不可能的。

但是，如果您这样做，则可以使用一些通过 IP 进行定位的选项。

[http://skyhookwireless.com/location-technology/](http://skyhookwireless.com/location-technology/)就是其中之一。

# c# - 当用户更改为新值时验证 DataGridViewComboBoxCell

> ID：16177568
> 
> 赞同：2
> 
> 时间：2013-04-23T19:24:20.837
> 
> 标签：c#, winforms, validation, datagridview

我们的 DataGridView 中有一个列，用户可以从组合框 ( `DataGridViewComboBoxColumn`) 中选择一个值。我们有一些选择的验证逻辑（覆盖`OnCellValidating`）。

令人讨厌的是，用户必须在组合框中进行下拉选择后单击其他位置，然后才能对该单元格进行验证。我已经尝试在所选索引更改后立即提交编辑（见下文），但在单元格失去焦点之前验证仍然不会触发。我也尝试过使用`EndEdit()`而不是`CommitEdit()`.

有没有办法在用户选择组合框中的项目后立即触发验证？

```
 protected override void OnEditingControlShowing(DataGridViewEditingControlShowingEventArgs e)
    {
        // Validate selection as soon as user clicks combo box item.
        ComboBox combo = e.Control as ComboBox;
        if (combo != null)
        {
            combo.SelectedIndexChanged -= combo_SelectedIndexChanged;
            combo.SelectedIndexChanged += new EventHandler(combo_SelectedIndexChanged);
        }

        base.OnEditingControlShowing(e);
    }

    void combo_SelectedIndexChanged(object sender, EventArgs e)
    {
        this.NotifyCurrentCellDirty(true);
        this.CommitEdit(DataGridViewDataErrorContexts.Commit);
    }

    protected override void OnCellValidating(DataGridViewCellValidatingEventArgs e)
    {
        // (our validation logic) ...
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T21:56:16.323

您可以模拟 tab 键来强制单元格失去焦点：

```
 private void combo_SelectedIndexChanged(object sender, EventArgs e)
    {
        //I expect to get the validation to fire as soon as the user 
        //selects an item in the combo box but the validation 
        //is not firing until the cell loses focus
        //simulate tab key to force the cell to lose focus
        SendKeys.Send("{TAB}");
        SendKeys.Send("+{TAB}");
    } 
```

# java - 如何使用“是”方法

> ID：16177573
> 
> 赞同：0
> 
> 时间：2013-04-23T19:24:44.270
> 
> 标签：java, methods

我必须创建一个使用“is”方法的对象，基本上是声明对象的状态。我不确定这应该如何工作。现在正在将方法编写为布尔值，但我想知道是否应该使用不同的方法，这是代码，

```
public class Cell
{
    public int move;

    public Cell(int xmove)
    {
        xmove = 0;
    }
    public boolean isempty(int x)
    {
        if(x == 0)
        {   
            return true;
        }
        else
        {
            return false;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-23T19:26:53.663

你是在正确的轨道上，但有很多问题。

首先，这要简单得多

```
 public boolean isEmpty(){
    return move == 0;
 } 
```

我假设如果 Cell 的移动为 0，则 Cell 的实例为空。

请注意，我已将您的方法名称大写。此外，`isEmpty`应该说一些关于对象状态的内容。传入没有意义`x`（除非您想将 x 与对象实例上的某些属性进行比较）。

其次，您的构造函数接受一个参数，然后将其设置为 0。这不会做任何事情。你可能想要

```
public Cell(int move){
    this.move = move;
} 
```

它接受一个参数并将正在构造的当前实例上的字段设置为传入的值（您定义了一个字段`move`，因此您可能想要设置它。）。

所以你可以做类似的事情

```
Cell cell1 = new Cell(1);
Cell cell2 = new Cell(0);

cell1.isEmpty() // false;
cell2.isEmpty() // true; 
```

# sql - 一个或两个 SQL 案例语句

> ID：16177574
> 
> 赞同：-1
> 
> 时间：2013-04-23T19:24:51.023
> 
> 标签：sql, case

我有一个`SELECT`声明可以拉出这两个不同的产品条。当我从网站上删除其中一个并重新运行我的语句时，我仍然有两行，第一列有`ARMCODE`两次（两个结果），第二列有第一列的描述，但第二列没有描述（因为它有已被删除）。

问题是它仍然在带有`ARMCODE`.

如果有 a `a.CODE_`，`a.strips`则需要显示，如果有 a `A.ARMCODE`，`B.DESCRIPTION`则需要显示。如果只有`A.ARMCODE`and`B.DESCRIPTION`和另一个已被删除，为什么它仍然显示两个结果，`a.CODE_`即第二个结果和一个空的 a.strips。

```
select a.ARMCODE,
       b.DESCRIPTION_
  from ARE.AAS.REORDER a
  left outer join ARE.AAS.PTDME b on a.PTCODE=b.CODE_
 where a.ARMCODE = 'ADSMANZS03'
   and b.MEDICAREID ='A4253'

union all

select a.CODE_,a.strips
  from event.dbo.intake a 
 where a.CODE_ = 'ADSMANZS03' 
```

![条带和描述，两种不同的产品，同一个患者](https://i.stack.imgur.com/2SNpo.jpg)

![当我删除条带时，仍然显示两个带有空描述的结果](https://i.stack.imgur.com/S5emW.jpg)

![我的案例陈述什么也没返回](https://i.stack.imgur.com/sLxIC.jpg)

我开始使用 case 的新语句，现在正在使用一些嵌套连接：

```
select case when b.ARMCODE is null then a.strips
       end
  from (select *
          from ev.dbo.intake a
         where a.CODE_ = 'ADSMANZS03') a
left outer join(select a.ARMCODE,
                       b.DESCRIPTION_
                  from ARE.AAS.REORDER a
                  left outer join ARE.AAS.PTDME b on a.PTCODE=b.CODE_
                 where a.ARMCODE = 'ADSMANZS03'
                   and b.MEDICAREID ='A4253') b on a.CODE_=b.ARMCODE 
```

我没有得到任何行或列，它正在返回（没有列名）并且在 NULL 内

希望这不会太混乱。提前致谢。

**图片 1**条带和描述，两种不同的产品，同一患者

**IMAGE 2**当我删除条带时，仍然显示两个带有空描述的结果，不应该显示第二个结果。

**图 3**案例陈述

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T22:25:46.367

仅供参考，因此可以关闭这个问题。我使用合并来确定我需要什么。

```
select
coalesce(b.DESCRIPTION_,a.strips)
from(
select
*
from ev.dbo.intake a
where a.CODE_ = 'ADSMANZS03'
)a
left outer join(
select
a.ARMCODE,
b.DESCRIPTION_
from ARE.AAS.REORDER a
left outer join ARE.AAS.PTDME b on a.PTCODE=b.CODE_
where a.ARMCODE = 'ADSMANZS03'
and b.MEDICAREID ='A4253'
)b on a.CODE_=b.ARMCODE 
```

COALESCE (Transact-SQL) [http://msdn.microsoft.com/en-us/library/ms190349.aspx](http://msdn.microsoft.com/en-us/library/ms190349.aspx)

# c# - JQuery UI sortable() 方法不支持错误

> ID：16177584
> 
> 赞同：3
> 
> 时间：2013-04-23T19:25:32.450
> 
> 标签：c#, html, asp.net-mvc, jquery-ui, asp.net-mvc-4

我正在开发一个 ASP.NET MVC 4 Web 应用程序，它利用最新的 JQuery 和 JQuery UI 库，并自动引用它们（在 _Layout.cshtml 页面中）。

我一直在按照[这里](http://www.foliotek.com/devblog/make-table-rows-sortable-using-jquery-ui-sortable/)的教程在表格上实现拖放重新排序功能。

但即使我在需要的视图模型上明确添加对最新 JQuery UI 文件的引用，例如

```
<script src="/Scripts/jquery-ui-1.10.2.min.js" type="text/javascript"></script> 
```

sortable() 方法不起作用。它不会出现在 Visual Studio 智能感知中，并且在运行时也不起作用。在 Internet Explorer（或任何浏览器）上运行时，我只是收到一条错误消息，“**对象不支持属性或方法'可排序'** ”。

这是我尝试使用该方法的方式：

```
 <script type="text/javascript">
        $(document).ready(function()
        {
            $("#clueTable tbody").sortable();
        });
        </script> 
```

我从 Intellisense 注意到它从 JQuery UI 文件中找到了一个属性“sortables”和“sort”，但不是“sortable”。

所以参考看起来很好，它绝对是最新的 JQuery UI 代码（我通过获取最新文件验证了这一点）所以我对这个有点迷惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T14:57:57.280

在 _Layout.cshtml 中，似乎在某些时候我手动引用了 JQuery 和 JQuery UI 脚本，忘记了脚本已经在包中呈现，例如

```
@Scripts.Render("~/bundles/jquery") 
```

我正确地引用了正确的脚本，但是因为它们被再次加载，我认为它们正在破坏文件的第一个实例，包括依赖于正在加载的 JQuery 文件的 JQuery UI 代码。

我也不明白的是，默认情况下，ASP.NET MVC 4 应用程序不会呈现 JQuery UI 框架，即使项目中存在文件并且在 BundleConfig.cs 文件中创建了脚本包。

因此，为了解决我的问题，我删除了所有手动引用，以便只呈现捆绑包，并添加以下行以在我的 _Layout.cshtml 文件的头部呈现 JQuery UI 代码：

```
@Scripts.Render("~/bundles/jqueryui"); 
```

包的工作方式是 Global.asax 文件调用 BundleConfig.cs 的“RegisterBundles”方法，该方法通过在“Scripts”文件夹中搜索相关的 JavaScript 文件以及您告诉它的任何其他位置来创建新的脚本包看。

然后，要从 HTML 加载脚本文件，您必须使用 @Script.Render() 渲染它们，并提供脚本包的名称作为参数（例如“~/bundles/jqueryui”）。

要在网站的每个页面上呈现所有脚本，您可以将其添加到应用于每个页面的 _Layout.cshtml 文件中。

# jquery - 如何恢复 jsFiddle.net 中的 Run、Save、TidyUp 和 JSHint 按钮？

> ID：16177585
> 
> 赞同：3
> 
> 时间：2013-04-23T19:25:36.487
> 
> 标签：jquery, html, css, jsfiddle

我刚刚重新发现了 jsFiddle（我很久以前就看过了，但如果不是因为记性不好我根本就没有记忆，所以就像今天第一次看到它一样），并且正在寻找它非常方便。

但是，有时在“语法会话”中，Run、Save、TidyUp 和 JSHint 按钮会消失。我怎样才能让他们回来？

顺便说一句，当我看到（或没有看到）这种情况发生时，我正在使用 Chrome。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T20:49:36.877

混搭 Ctrl+Shift+向上箭头可将它们恢复为可见性。

# asp.net-mvc - WebAPI 的安全方法

> ID：16177589
> 
> 赞同：0
> 
> 时间：2013-04-23T19:25:45.303
> 
> 标签：asp.net-mvc, rest, asp.net-web-api

我目前有一个 ASP.NET MVC 4 网站，其中成员有一个帐户，可以使用 Facebook 和我自己的登录表单登录。然后我使用 FormsAuthentication。

接下来我想构建一个 API，使用 WebAPI 并将我的一些功能公开给我计划构建的移动客户端。

我没有任何让其他人使用我的 API 的计划，所以这仅适用于我构建的客户端。

我将如何在 WebAPI 上实现安全性？我是否应该使用令牌系统，在该系统中我可以在客户端上有一个登录表单、接收凭据、登录并返回一个令牌，该令牌将在每次调用时发送回服务器？

我应该在服务器上实现 oAuth 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T19:53:57.860

尝试完全 RESTful：使用 HTTP 的内置身份验证系统，其中身份验证信息由客户端在每个请求中提供。如果您使用 SSL，您也可以使用 HTTP 基本身份验证而没有任何安全问题，否则 HTTP Digest 对于此目的也足够安全。

您将需要为 ASP.NET 实现自己的 HTTP 基本身份验证提供程序，幸运的是它很简单（而且很有趣！）。

它还击败了其他需要使用查询字符串参数签名的 URI 的系统，这很丑陋并且会弄乱可爱的 RESTful，或者携带一个令牌（通常作为 cookie 传递）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T20:09:25.070

除了关于如何进行身份验证的圣战之外，您可以只使用表单身份验证。如果您还使用来自同一站点/域的 Web 界面，并且您的身份验证内容已得到充分考虑，那么这真的很方便和容易。

你的 api 控制器需要一个基类

```
public class MyApiControllerBase : ApiController
{
    public MySecurityContextType SecurityContext { get; set; }
} 
```

一个`ActionFilterAttribute`

```
public class AuthenticationContextAttribute : System.Web.Http.Filters.ActionFilterAttribute
{
    public override void OnActionExecuting(HttpActionContext actionContext)
    {
        MyApiControllerBase controller = actionContext.ControllerContext.Controller as MyApiControllerBase ;
        if (controller != null)
        {

            var context = ((HttpContextBase)controller.Request.Properties["MS_HttpContext"]);

            HttpCookie cookie = context.Request.Cookies[FormsAuthentication.FormsCookieName];
            FormsAuthenticationTicket ticket = FormsAuthentication.Decrypt(cookie.Value);

            controller.SecurityContext= ParseFormsAuthenticationTicket(ticket);
        }
    }
} 
```

和代码首先创建票证。

```
LogIn(HttpRequestBase httpRequest, string userName, string password)
{
    var context = DoLoginLogic(userName,password);
    FormsAuthentication.SetAuthCookie(context, usePersistentCookies);
} 
```

授权显然需要在控制器方法中完成。

# c++ - 标准::地图 值的默认初始化

> ID：16177596
> 
> 赞同：6
> 
> 时间：2013-04-23T19:26:13.583
> 
> 标签：c++, initialization, std

这段代码似乎运行良好，它们`value_type`( `int`) 的默认值为 0；它适用于所有情况吗？

```
std::map<std::string,int> w;
for (const auto& t: str)
   w[t]++; 
```

双倍呢？地图？默认0.0？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T19:29:50.417

Yes. When you use the `[]`-operator on a map and no element with the desired key exists, a new element is inserted which is value-initialized. For an integer, this means initialized to zero.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-23T19:29:56.670

是的，此代码适用于任何类型的密钥，包括`double`. 这样做的原因是非常量`operator []`返回对键值的*引用，而不是该值的副本。*它是`++`应用运算符的引用。

您显示的代码片段的工作原理如下：

*   对于容器中的每个`t`类型`string`的键，`str`
*   在地图`w`上搜索给定的键
*   由于该条目不存在，因此将一个新条目插入到地图中
*   由于条目的键是已知的，但值不是，因此会创建该值的默认（*值初始化*，ei `0`for `int`）对象
*   对新创建对象的引用（在本例中，`int&`初始化为零）返回给调用者
*   `++`运算符应用于从 中返回的引用，该引用更改`[]`为`0`（`1`或更改`0.0`为`1.0`等）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T19:34:50.567

> 它适用于所有情况吗？

对于所有情况，新键将与初始化为 的值相关联`T()`。

When`T`是内置或[普通旧数据](http://en.wikipedia.org/wiki/Plain_old_data_structure)类型，例如`int`or `double`，其计算结果为零。

当`T`是一个类时，映射将尝试调用空构造函数。

# google-app-engine - JDO中的一对多关系

> ID：16177600
> 
> 赞同：0
> 
> 时间：2013-04-23T19:26:29.023
> 
> 标签：google-app-engine, orm, google-cloud-datastore, jdo

在JDO中两个对象A和B之间的一对多关系中，当只有B被持久化时，是否应该将对象B分别添加到A中B的集合中？还是这会自动发生？

例如，如果 A 有一个字段：

```
 @Persistent(mappedBy="a")
private List<B> bs= new ArrayList<B>(); 
```

B有一个字段A a；

我必须手动将 B 类型的对象添加到 A 中的列表中还是自动发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T05:20:24.107

列表拥有关系，因此您必须将对象添加到列表中，否则它们将不在列表中。List 有顺序，如果元素没有添加到 List 中，如何知道每个元素的位置？

# python - 最快获取 Python 数据结构

> ID：16177610
> 
> 赞同：0
> 
> 时间：2013-04-23T19:26:58.323
> 
> 标签：python, performance, data-structures, artificial-intelligence

我正在开发 AI 来执行 MDP，我正在获取状态（在这种情况下只是整数）并为其分配一个值，我将经常这样做。因此，我正在寻找一种可以保存（无需删除）该信息并且具有非常快速的获取/更新功能的数据结构。有没有比普通字典更快的东西？我正在寻找任何真正如此原生的 python、开源的东西，我只需要快速获取。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T19:33:54.150

使用 Python 字典是可行的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T19:55:05.690

你是说你所有的键都是整数？在这种情况下，使用列表并将列表索引视为键值**可能会更快。**但是，您必须确保从不删除或添加列表项；只需从您认为需要的数量开始，将它们都设置为等于`None`，如图所示：

```
mylist = [None for i in xrange(totalitems)] 
```

然后，当您需要“添加”一个项目时，只需设置相应的值即可。

请注意，就实际效率而言，这实际上可能不会为您带来太多好处，而且它可能比仅使用字典更令人困惑。

对于 10,000 个项目，事实证明（在我的机器上，使用我的特定测试用例）访问每个项目并将其分配给一个变量大约需要 334.8 秒（使用列表）和 565 秒（使用字典）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T20:53:02.097

如果您想要快速原型，请使用 python。而且不用担心速度。

如果你想编写快速的科学代码（并且你不能在快速的本地库上构建，比如用于线性代数的 LAPACK）用 C、C++ 编写它（也许只能从 Python 调用）。如果快速而不是超快就足够了，您还可以使用 Java 或 Scala。

# java - Java - Sync different entities between Client-Server database (JPA2+EJB3)

> ID：16177616
> 
> 赞同：0
> 
> 时间：2013-04-23T19:27:37.580
> 
> 标签：java, database, jpa, ejb, data-synchronization

can someone help me plz?

i am trying to get a synchronization between N "clients" database to 1 Big "Server" database (kind of repository/backup database). Its ok, i got a way to make their sync fine.

but, it was demanded the "Server" will be a "Client" application too, with same Java classes, models, entities, business, etc..

I am trying to find a solution to this Server database holds all database content from all Clients without making major changes to my entities (cause i will need to apply then on Client too)

This is an example of what i tried, but no success how to implement it on JPA and Serialization through EJB remotes.

```
@Entity
    @Table(name="crud_sync")
    public class CrudSync implements Serialization{
        private static final long serialVersionUID = 1L;
        @Id private Long id;
        private String data;
        //...ommited...
    } 
```

supposing i have this CrudSync entity.

On the N clients side database, i would have a table with columns:

```
ID - Number - PK
Data - Varchar
etc... 
```

on the 1 Server side, i would like to have a table with:

```
ID - Number - PK
ClientPK - Number  // the ID on Client database table
ClientId - Number  // the Client code (1,2,3,4.. etc..)
 // UQ (ClientPK,ClientID)
Data - Varchar
etc... 
```

or even a composite PK

```
ClientPK - Number - PK // the ID on Client database table
ClientId - Number - PK // the Client code (1,2,3,4.. etc..)
Data - Varchar
etc... 
```

but i am not sure how to achieve that using the same Entities on both sides, if its even possible..

another solution could maybe create separated JAR/EAR for Client and Server. doing that, what should i change in Entities/JPA annotations? what class should be separated to Client/Server JAR/EAR ?

Any other suggestion on how to make a (N Client <-> 1 Server) database?

Its mandatory to Clients work offline, so they need to have their own Database running, also its mandatory to have the same application on Server, because it will be possible to create entities on Server and those will be sent to Client (vice-versa).

I am using JBoss AS 7.1, JPA 2, EJB 3.1.

Thanks in advance. Anon.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T22:34:58.780

即兴发挥，不确定是否可以使用相同的 JPA 实体来做到这一点。逻辑可能会足够复杂，您可能希望它驻留在应用程序中而不是数据库中。

也就是说，您可以使用装饰器模式，以便服务器/客户端应用程序可以使用相同的核心 JPA 实体。然后拥有特定于服务器的 JPA 实体，这些实体装饰核心实体并持久化管理客户端和服务器应用程序之间的同步所需的数据。装饰器对象只包含对核心对象的引用。然后它需要任何数据来促进服务器和客户端之间的数据推送和拉取。

希望这可以帮助

# python - 如何按同一月份对这个字典列表进行分组？（后续）

> ID：16177618
> 
> 赞同：2
> 
> 时间：2013-04-23T19:27:44.983
> 
> 标签：python

我[刚刚在这里问了一个非常相似的问题](https://stackoverflow.com/questions/16176469/how-do-i-group-this-list-of-dicts-by-the-same-month)，两个答案都有效。但是，当我在每个字典中有 > 2 个字典键时，第 3 个键的值始终为 0。例如：

```
myList = [{'date':'2008-04-23','value':'1','value2':'2'}, {'date':'2008-04-01','value':'8','value2':'5'}, {'date':'2008-04-05','value':'3','value2':'4'}, {'date':'2009-04-19','value':'5','value2':'1'}, {'date':'2009-04-21','value':'8','value2':'1'},{'date':'2010-09-09','value':'3','value2':'1'},
    {'date':'2010-09-10','value':'4','value2':'9'},
    ] 
```

mgilson答案的修改版本：

```
import itertools
from itertools import groupby
myList.sort(key=lambda x:x['date'][:7])
for k,v in groupby(myList,key=lambda x:x['date'][:7]):
    print k, list(v)
for k,v in groupby(myList,key=lambda x:x['date'][:7]):
    print {'date':k+'-01','value':sum(int(d['value']) for d in v),'value2':sum(int(d['value2']) for d in v)} 
```

结果：

```
{'date': '2008-04-01', 'value2': 0, 'value': 12}
{'date': '2009-04-01', 'value2': 0, 'value': 13}
{'date': '2010-09-01', 'value2': 0, 'value': 7} 
```

帕维尔答案的修改版本：

```
import itertools
key = lambda datum: datum['date'].rsplit('-', 1)[0]
myList.sort(key=key)
result = [{
            'date': key + '-01',
            'value': sum(int(item['value']) for item in group),
            'value2': sum(int(item['value2']) for item in group)
           } for key, group in itertools.groupby(myList, key=key)]

print result 
```

结果：

```
[{'date': '2008-04-01', 'value2': 0, 'value': 12}, {'date': '2009-04-01', 'value2': 0, 'value': 13}, {'date': '2010-09-01', 'value2': 0, 'value': 7}] 
```

我在哪里错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T19:30:27.307

问题是您尝试使用相同的迭代器两次：

```
print {'date':k+'-01','value':sum(int(d['value']) for d in v),'value2':sum(int(d['value2']) for d in v)} 
```

第一次调用使用`sum`一个生成器表达式，该表达式使用所有`v`. 第二次调用使用了`sum`一个生成器表达式，该表达式使用了剩下的任何东西`v`，也就是……什么都没有。

有几种不同的方法可以解决这个问题，但最小的变化就是`v`变成 a`list`并改用它：

```
for k, group in groupby(myList,key=lambda x:x['date'][:7]):
    v = list(group)
    print {'date':k+'-01','value':sum(int(d['value']) for d in v),'value2':sum(int(d['value2']) for d in v)} 
```

* * *

迭代器和可迭代对象之间的区别对于新手来说可能有点混乱。我希望我有一个很好的教程来指出这个……但让我试着解释一下：

迭代器是你只能迭代一次的东西。

可迭代是可以进入`for`循环、列表推导、生成器表达式等的任何东西——或者更准确地说，是任何你可以调用`iter(foo)`以获得可迭代的东西。

迭代器（通常）也是可迭代的，但反过来不一定正确。特别是，像`list`s 这样的序列是可迭代的，可以一遍又一遍地为您提供新的迭代器。

# neo4j - How can I get Vertices with relations and related Vertices in Neo4j 1.9RC1 via Gremlin

> ID：16177621
> 
> 赞同：1
> 
> 时间：2013-04-23T19:27:51.810
> 
> 标签：neo4j, graph-databases, gremlin, neo4jclient

Neo4j will support tree pattern in 2.x versions.(We could not use tree function) We are using 1.9RC1.

I need to get Users with Followers and Friends.

```
public class User
{
    public long Id { get; set; }
    public string Name { get; set; }
    ...............
}

public class UserModel
{
    public long Id { get; set; }
    public string Name { get; set; }
    public string DetailedInformation { get; set; }
    public IEnumerable<UserModel2> Followers { get; set; }
    public IEnumerable<UserModel2> Friends{ get; set; }
}

public class UserModel2
{
    public long Id { get; set; }
    public string Name { get; set; }
} 
```

I want to get tree structured UserModel response. How can be done via Gremlin..

We were using paths function.

```
g.v(4582).inE.outV.paths{it} 
```

But there is data duplication problem for it. It returns paths not tree.

PS: We are using C#.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T23:22:57.310

如果您查看 tree() 是如何实现的，它只是 path() 在连接点处聚合。连接点是相同深度的顶点。因此，您可以根据 path() 的结果创建自己的树数据结构（--或旧版本 Gremlin 中的 paths()）。让我通过示例来解释如何实现它。如果您有一组这样的路径：

```
[1,2,3,4]
[1,3,5,6]
[1,2,3,5] 
```

然后树表示将是：

```
 4
     /
  2-3
 /   \
1     5
 \
  3-5-6 
```

巧妙地使用嵌入式 HashMap 将提供您想要的功能。请查看 Pipes 2.x 代码库，了解如何实现 Tree 并根据您的需要进行复制（和调整）。

# javascript - How to detect when a css3 transition is over

> ID：16177623
> 
> 赞同：4
> 
> 时间：2013-04-23T19:27:58.777
> 
> 标签：javascript, css

I am learning about javascript and css3 games and I am working on an alien game. The game is a guessing game where you enter a guess of X and Y position and the missile moves towards the alien using css3 transition. When the missle reaches the alien the explosion is supposed to appear; but I am having difficulty detecting when the transition is over. Currently the explosion appears right when you make the X and Y guess and the missle takes off. How can I detect with Javascript when the css3 transition is over to make the explosion appear?

Here is what I currently have:

the stylesheet:

```
#explosion
{
  width: 20px;
  height: 20px;
  position: absolute;
  display: none;
  background-image: url(../images/explosion.jpg);
}

#alien
{
  width: 20px;
  height: 20px;
  position: absolute;
  top: 20px;
  left: 80px;
  background-image: url(../images/alien.jpg);
}

#missile
{
  width: 10px;
  height: 10px;
  position: absolute;
  top: 240px;
  left: 145px;
  background-image: url(../images/missile.jpg);
  /*Transition*/
  -webkit-transition: all 0.5s ease-out 0s;
  -moz-transition: all 0.5s ease-out 0s;
  transition: all 0.5s ease-out 0s;
} 
```

And the Javascript:

```
if(guessX >= alienX && guessX <= alienX + 20)
{
  //Yes, it's within the X range, so now let's
  //check the Y range
  if(guessY >= alienY && guessY <= alienY + 20)
  {
    //It's in both the X and Y range, so it's a hit!
    gameWon = true;
//move missle towards alien

//make explosion appear
explosion.style.top = alienY + "px";
explosion.style.left = alienX + "px";
explosion.style.display = "block";

  endGame();
 }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T19:33:02.850

我使用以下内容，在这里找到：[https ://stackoverflow.com/a/13862291/2312574](https://stackoverflow.com/a/13862291/2312574)

```
$('div').on('transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd', function() { 
    // do something
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-23T19:29:44.630

Use [transitionend](https://developer.mozilla.org/en-US/docs/DOM/Mozilla_event_reference/transitionend) event to detect when transition is finished.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-23T19:31:10.420

事件`transitionend`。

文档：[http ://www.w3.org/TR/css3-transitions/#transition-events](http://www.w3.org/TR/css3-transitions/#transition-events)

演示：http: [//jsfiddle.net/c937L/](http://jsfiddle.net/c937L/)

# jquery - $each only for specific array in json

> ID：16177640
> 
> 赞同：0
> 
> 时间：2013-04-23T19:29:05.040
> 
> 标签：jquery, json

I am making a listview using JSON and are successfull with this, but... I was wandering if it was possible to send other data to my page, which is "not in an array" with the same JSON call without having to put them through the $each?

Here is my JSON: ---EDIT---

```
[{"menutime":"2013-04-23 19:23:42"},{"list":"menu1"},{"list":"Menu2"},{"list":"Menu3"}] 
```

As you can see, I have 3 "list" which I get into an listview like this:

```
dataCallback = function (data) {
    var content = [];
    // var now = data.menutime; // HERE I WANT THE MENUTIME TO BE PUT INTO A VARIABLE //
    $.each(data, function (i, val) {
        content.push(val.list); // GETTING ALL THE MENUS //
    });
    $('#games').html(content.join('')).listview('refresh');
} 
```

I don't get the menutime... How do I do this?

Thanks in advance :-)

---------------- EDIT ----------------

I have tried this like Kevin B has suggested but I cant get it to work?!

```
dataCallback = function(data){
    alert("Date: "+data.menutime);

    //var content = data.list.join("");
    //var now = data.menutime; // HERE I WANT THE MENUTIME TO BE PUT INTO A VARIABLE //

    $('#userbar').html(data.profile); // FETCHING USERS DATA FOR PROFILEBAR //
    //$('#games').html(content).listview('refresh');
} 
```

In my alert I get "Undefined".

My "jason" looks like this:

```
([{"menutime":"2013-04-25 15:57:50"},{"profile":"troels"}]) 
```

Any ideas why this dont work?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T19:33:19.633

如果您可以修改服务器返回的内容，请使其返回结构更适合其包含的内容的数据。

```
{ 
    "menutime": "2013-04-23 19:23:42",
    "list": ["menu1","menu2","menu3"]
} 
```

现在您的回调可以更简单：

```
dataCallback = function (data) {
    var content = data.list.join("");
    var now = data.menutime; // HERE I WANT THE MENUTIME TO BE PUT INTO A VARIABLE //
    $('#games').html(content).listview('refresh');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T19:31:47.907

您没有访问 menutime -

```
content.push(val.menutime); 
```

你的 json 应该是这样的——

```
 [{"menutime":"2013-04-23 19:23:42"},{"list":"menu1"},{"list":"Menu2"},{"list":"Menu3"}] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T19:32:38.243

您可以将数组包装在一个对象中

```
dataCallback = function (data) {
    var content = [];
    // var now = data.menutime; // HERE I WANT THE MENUTIME TO BE PUT INTO A VARIABLE //
    $.each(data, function (i, val) {
        content.push(val.list); // GETTING ALL THE MENUS //
    });
    var sendData = {
          content :content ,
          menutime:now
    };
    $('#games').html(sendData .content.join('')).listview('refresh');
    ///use sendData.menutime to get menutime
} 
```

# c# - 使 JsonConvert.DeserializeObject 全局（静态）

> ID：16177641
> 
> 赞同：0
> 
> 时间：2013-04-23T19:29:08.567
> 
> 标签：c#, wcf, rest

我使用 RestSharp 来使用 Restful WCF，它在我的子路由中运行良好。

```
string baseUrl = "12.34.56.789/MyServices";
RestClient client = new RestClient("http://" + baseUrl + "/MyData.svc");
var request = new RestRequest(Method.GET);
request.Resource = "/GetProblemId";
request.AddParameter("problemId", "1");
var response = client.Execute(request);
var problems = JsonConvert.DeserializeObject<List<ProblemTypeDTO>>(response.Content); 
```

现在我必须以不同的方法访问问题，所以我想将它设置为一个全局对象。但我不能将其声明为

`private static var problems;`

解决办法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:31:57.753

`var`只能在方法内部使用。字段应该有一个具体的类型。在你的情况下`List<ProblemTypeDTO>`

```
private static List<ProblemTypeDTO> problems; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T19:31:58.173

因为您没有定义类型。您不能在静态字段中使用 var。

它应该如下所示：

```
private static List<ProblemTypeDTO> problems; 
```

# asp.net - PL/SQL：有条件的 Where

> ID：16177643
> 
> 赞同：0
> 
> 时间：2013-04-23T19:29:16.270
> 
> 标签：asp.net, oracle, plsql, conditional, where

我有以下情况：

```
CREATE OR REPLACE PROCEDURE GETINBOX
(
    inHasAttachments        IN int
)
AS

BEGIN

    SELECT M.MailId,
           M.SenderId,
           E.Emp_Name As "Sender",
           MI.RecipientId,
           M.Subject

    FROM MAIL M INNER JOIN MAILINBOX MI ON M.MailId = MI.MailId

    WHERE MI.RecipientId = '547' AND
          M.NotificationSelected = 'Y'

    IF inHasAttachments = '1' THEN
       AND M.Attachments = 'Y'
    END IF;

END GETINBOX; 
```

是否可以根据参数的值向 where 子句添加条件？

```
 WHERE MI.RecipientId = '547' AND
          M.NotificationSelected = 'Y'

    IF inHasAttachments = '1' THEN
       AND M.Attachments = 'Y'
    END IF; 
```

显然这是不允许的，但是否可以在 PL/SQL 中以某种方式做到这一点？我知道一种方法是复制查询并根据参数的值执行不同的查询，但我不想复制我的代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T19:48:43.977

据我了解您的要求：如果参数的值`inHasAttachments`是，`1`那么您想进一步过滤`M.Attachments = 'Y'`，如果它的值不是，`1`那么您不关心`M.Attachments`。这是附加条件`MI.RecipientId = '547' AND M.NotificationSelected = 'Y'`。

你可以这样做：

```
SELECT M.MailId,
   M.SenderId,
   E.Emp_Name As "Sender",
   MI.RecipientId,
   M.Subject
FROM MAIL M INNER JOIN MAILINBOX MI ON M.MailId = MI.MailId
WHERE MI.RecipientId = '547' AND M.NotificationSelected = 'Y'
  AND (inHasAttachments <> '1' OR M.Attachments = 'Y') 
```

# c++ - 使用 Qt 库的简单游戏图形

> ID：16177651
> 
> 赞同：0
> 
> 时间：2013-04-23T19:29:43.400
> 
> 标签：c++, image, qt

我想创建一个非常简单的游戏，就像[这样](http://www.miniclip.com/games/crashdown/en/)。一般来说，我需要几种颜色的方块，当你点击它们时，它们应该会出现、消失、移动。我创建了一个`QDialog`. 在其中，我使用`MyDialog::mousePressEvent(QMouseEvent *event)`函数来获取单击鼠标的坐标。一般来说，我需要另外两件事来对我的游戏进行编程。

1.  将图像放入我的 QDialog
2.  移动它们
3.  从我的对话框中删除它们

您能否提供一些示例代码，将图像添加到对话框中，移动它并销毁它，好吗？这样做最方便的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T20:26:39.167

[在 QGraphicsScene 中的特定坐标中放置和图像](https://stackoverflow.com/questions/16180156/place-and-image-in-specific-coordinates-in-qgraphicsscene)

函数是用于创建简单游戏的代码：`item.setPos`, `scene.addItem`...

# inheritance - Symfony2 原则声明实体以保持与单独的数据库表的继承

> ID：16177656
> 
> 赞同：0
> 
> 时间：2013-04-23T19:29:51.437
> 
> 标签：inheritance, symfony, doctrine

我正在编写一个程序来跟踪客户可以订购的帆。我的程序具有以下类结构：

```
Sail
    - mainsail
    - jib
    - spinnaker 
```

我不确定是否使用 mappedsuperclass 或其他一些学说继承类型来维护程序中的以下类型的关系：

```
Mainsail extends Sail 
```

我希望数据库本身（mySQL）分别有一个主帆、三角帆和三角帆表。

到目前为止，我的 Co/QuoteBundle/Entity 文件夹中只有一个 Mainsail 实体/类：

```
namespace Co\QuoteBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\Validator\Constraints as Assert;

/**
 * Mainsail
 *
 * @ORM\Table()
 * @ORM\Entity(repositoryClass="Co\QuoteBundle\Entity\MainsailRepository")
 */
class Mainsail
{
    /**
     * @var integer
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @var string
     *
     * @ORM\Column(name="name", type="string", length=100)
     */
    private $name;

    /**
     * @var integer
     *
     * @ORM\ManyToOne(targetEntity="Boat", inversedBy="mainsails")
     * @ORM\JoinColumn(name="boat_id", referencedColumnName="id")
     * @Assert\NotBlank()
     */
    private $boatType;

    /**
     * @var float
     *
     * @ORM\Column(name="build_price", type="decimal")
     */
    private $buildPrice;

    //other variables, plus doctrine-generated getters and setters
} 
```

最终，我的目标是不必为所有帆类复制相同的函数，这样我就可以将一个帆数组发送到 twig 中，并在适用的情况下将它们全部视为相同类型或不同类型。

```
{% for sail in sails %}
    <p>{{sail.name}} (${{sail.buildPrice}})</p>
{% endfor %} 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T12:13:00.327

如果您希望每个表共享公共属性，那么 class-table-inheritance 是您的最佳选择：[http ://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/inheritance-mapping.html#类表继承](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/inheritance-mapping.html#class-table-inheritance)

这实际上取决于不同类型的帆之间有多少差异。如果它只是几个属性，那么单表继承会更快并且可能适合您的需求。仔细阅读关于继承的章节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-09T18:23:13.983

根据@Cerad 的回答，我想出了以下数据库模式：

```
sail {id (int), boat_id (int), discr (varchar), options (bool)}
mainsail {id (int), name (varchar), build_price (decimal), weight_lbs (decimal)}
jib {id (int), name (varchar), build_price (decimal), weight_lbs (decimal)}
spinnaker {id (int), name (varchar), build_price (decimal), weight_lbs (decimal)} 
```

这是通过运行生成的

```
$php app/console doctrine:generate:entities {packagename}
$php app/console doctrine:schema:update --force 
```

关闭以下代码：

（学说从注释中生成 discr 列）

帆类：

```
use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\Validator\Constraints as Assert;

/**
 * @ORM\Entity(repositoryClass="Co\QuoteBundle\Entity\SailRepository")
 * @ORM\Table(name="sail")
 * @ORM\InheritanceType("JOINED")
 * @ORM\DiscriminatorColumn(name="discr", type="string")
* @ORM\DiscriminatorMap({"main" = "Mainsail", "jib" = "Jib", "genoa" = "Genoa", "spinnaker" = "Spinnaker"})
 */
class Sail {

/**
 * @var integer
 *
 * @ORM\Column(name="id", type="integer")
 * @ORM\Id
 * @ORM\GeneratedValue(strategy="AUTO")
 */
private $id;    

/**
 * @var integer
 *
 * @ORM\ManyToOne(targetEntity="Boat", inversedBy="sails")
 * @ORM\JoinColumn(name="boat_id", referencedColumnName="id", nullable=false)
 * @Assert\NotBlank()
 */
private $boatType;

/**
 * @var boolean
 *
 * @ORM\Column(name="options", type="boolean")
 */
private $hasOptions;

/**
* @ORM\OneToMany(targetEntity="SailOption", mappedBy="owningSail")
*/
private $optionChoices;

//setters and getters generated by doctrine 
```

主帆类（三角帆和大三角帆是相同的）：

```
use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\Validator\Constraints as Assert;

/**
 * Mainsail
 *
 * @ORM\Table(name="mainsail")
 * @ORM\Entity(repositoryClass="Co\QuoteBundle\Entity\MainsailRepository")
 */
class Mainsail extends Sail {

/**
 * @var string
 *
 * @ORM\Column(name="name", type="string", length=100)
 */
private $name;

/**
 * @var string
 *
 * @ORM\Column(name="descr", type="string", length=255, nullable=true)
 */
private $descr;

/**
 * @var float
 *
 * @ORM\Column(name="build_price", type="decimal", precision=7, scale=2)
 */
private $buildPrice;

/**
 * @var float
 *
 * @ORM\Column(name="weight_lbs", type="decimal", precision=4, scale=1)
 */
private $weightLbs;

//getters and setters generated by doctrine 
```

是的，name、build_price 和 weight 变量中存在冗余。我将它们放在单独的表格中，因为我觉得这是一种更好的方法，可以在未来开发简单的 CMS 以单独添加/删除帆。由于我还没有解决这个问题，而且我对此还比较陌生，所以我不确定是否会这样。评论表示赞赏:)

谢谢。

# angularjs - 简单数据绑定不插入值

> ID：16177657
> 
> 赞同：0
> 
> 时间：2013-04-23T19:29:54.757
> 
> 标签：angularjs

我开始从事一个简单的项目，并从简单的单向绑定开始，以确保控制器已绑定，以便视图可以看到变量。
最初，我从包含控制器的单独 javascript 文件开始，但它无法正常工作，因此我将其移至内联脚本，以思考 angular 是如何不加载控制器脚本的。无论哪种方式，它都不起作用。
这是[plunker](http://plnkr.co/edit/mtKHBVepPTEXfWGIUjfe?p=preview)
谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T19:34:59.947

您将`ng-app`指令放在`<head>`元素上，这意味着它也是由 AngularJS 管理的这个元素（加上它的子元素）。

将 移动`ng-app`到`<html>`or`<body>`元素，您的应用程序将运行： [http ://plnkr.co/edit/O1W8HVfeyXS6zl61Qb8I?p=preview](http://plnkr.co/edit/O1W8HVfeyXS6zl61Qb8I?p=preview)

# entity-framework - 错误实体框架数据库已更改

> ID：16177665
> 
> 赞同：0
> 
> 时间：2013-04-23T19:30:33.277
> 
> 标签：entity-framework, ado.net, entity-framework-5

我最近开始使用 ASP.NET MVC 和实体框架。

使用现有数据库，我尝试将我的类映射到数据库表。没有成功。

让我向您展示我的数据库表：

->**类别** --> Id (PK)--> 标题--> 描述

->**产品** --> Id (PK) --> 名称 --> 描述 --> 价格 --> 类别 (FK -> CategoryTree)

->**分类** 树 --> Id (PK) --> ParentCategory (FK -> Category) --> ChildCategory (FK -> Category)

现在，我的实体框架类：

```
class Products
{
    public int Id { get; set; }
    public string Name { get; set; }
    public string Description { get; set; }
    public decimal? Price { get; set; }
    public virtual ICollection<CategoryTree> Category { get; set; }
}

class Categories
{
    public int categoriesId { get; set; }
    public string Title { get; set; }
    public string Description { get; set; }
}

class CategoryTree
{
    public int Id { get; set; }
    public virtual ICollection<Categories> ParentCategory { get; set; }
    public virtual ICollection<Categories> ChildCategory { get; set; }
}

class EFDbContext : DbContext
{
    public DbSet<Products> Products { get; set; }
    public DbSet<Categories> Categories { get; set; }
    public DbSet<CategoryTree> CategoryTree { get; set; }
} 
```

**如果我启动应用程序，编译器会提示以下错误消息：** 支持“EFDbContext”上下文的模型自创建数据库以来已更改。考虑使用 Code First 迁移来更新数据库 ( [http://go.microsoft.com/fwlink/?LinkId=238269](http://go.microsoft.com/fwlink/?LinkId=238269) )。

我希望有人可以帮助我理解这一点;-)

此致

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T20:04:31.080

In the Application_Start() method of your Global.asax.cs, add the following line:

```
Database.SetInitializer<EFDbContext>(null); 
```

That will stop Entity Framework from checking for changes to your model since the creation of your database.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T19:52:53.353

对于现有数据库，我建议使用[EF 电动工具](http://visualstudiogallery.msdn.microsoft.com/72a60b14-1581-4b9b-89f2-846072eff19d)进行逆向工程以生成 POCO 类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T20:16:30.880

我可以从`Categories.Id`数据库和`Categories.categoriesId`模型中的上述信息 id 中看到的唯一区别（假设没有错字）。

还要检查列的可空性，例如`Product.Price`在模型中可以为空，在数据库中是这样吗？

我还可以建议，生成一个与您的模型名称不同的新数据库并与现有数据库进行比较。db 名称在连接字符串中指定，因此向您的 DbContext 类添加一个构造函数并传入连接字符串，

```
internal class EFDbContext : DbContext
{
    public EFDbContext(string connectionString) : base(connectionString)
    {

    } 
```

# version-control - 我在错误的仓库中工作。它们几乎是相同但不相关的数据。我如何区分/合并？

> ID：16177671
> 
> 赞同：0
> 
> 时间：2013-04-23T19:30:50.643
> 
> 标签：version-control, mercurial

您可以与还原的副本进行比较吗？

我在错误的仓库中工作。它们几乎相同，但没有实际关系。

我刚刚进行了拉取和更新，然后我可以将更改的文件复制到右头，然后在其上运行差异或类似的东西，然后正确地将 2 合并在一起吗？

我觉得另一种选择是复制代码并提交它，然后恢复，并与提交合并以区分所有更改的内容。

我在 9 个文件上更改了 1500 行，所以我不想重写一堆代码段。

我该如何处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T21:31:55.893

这实际上取决于“几乎相同，但没有实际关系”存储库的相似程度。

如果它们*非常*相似（因为文件具有相同的名称并且文本几乎相同），您可能会在源存储库中导出补丁，然后将相同的补丁导入目标存储库。

在源代码库中：

```
hg export -r tip > path\to\oops.patch 
```

在目标仓库中：

```
hg import path\to\oops.patch --no-commit 
```

我之所以使用它`--no-commit`，是因为我认为您需要先进行一些清理以确保一切正常。

或者，您可以只使用 kdiff 或 BeyondCompare3 比较两个目录，然后将您想要的差异从源 repo 带到目标 repo 并以这种方式提交。这可能是我的方法。

（*我故意忽略了为什么你有两个相似但没有共享历史的存储库的问题。据我所知，这可能是正确的做法。*）

# ruby-on-rails - 如何在 Sinatra 和 Datamapper 中按浏览器呈现视图计数？

> ID：16177674
> 
> 赞同：2
> 
> 时间：2013-04-23T19:31:00.337
> 
> 标签：ruby-on-rails, ruby, sinatra, datamapper

我有`View`和`Link`模型

**链接** has_many :views

**查看** belongs_to :link

```
irb(main):001:0> View.all
=> [#<View @id=1 @link_id=1 @browser="Chrome" @created_at=#<DateTime: 2013-04-23T21:21:23+02:00 ((2456406j,69683s,0n),+7200s,2
99161j)>>, #<View @id=2 @link_id=1 @browser="Firefox" @created_at=#<DateTime: 2013-04-23T21:21:26+02:00 ((2456406j,69686s,0n),+
200s,2299161j)>>] 
```

如何在显示页面上呈现表格的最佳方式是`Link`按浏览器分组的视图计数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:46:41.777

您可以通过以下方式获取所需的数据：

```
View.aggregate(:browser.count, :fields => [:browser], :conditions => ['link_id = ?', link_id]) 
```

# wcf - 标记为不可导出的证书

> ID：16177682
> 
> 赞同：5
> 
> 时间：2013-04-23T19:31:50.610
> 
> 标签：wcf, certificate

我正在尝试为自己制作一个开发证书链，以便对 WCF 进行一些测试。我在这里关注 msdn 上的说明：[如何：创建临时证书以供在开发期间使用](http://msdn.microsoft.com/en-us/library/ms733813.aspx)

不幸的是，这些说明不起作用。私钥不可导出。我什至用 makecert.exe 的“-pe”选项重新尝试了它，但它仍然不起作用。我在以管理员身份运行时尝试过它，但它不起作用。在 mmc 本身中，当使用“导出”时，询问私钥的第一个屏幕将“是/否”选项灰显，并在其下方显示一条消息：“关联的私钥被标记为不可导出。只有证书可以导出。”

有什么建议吗？可能是来自 MSDN 的更新程序，或者完全是另一个程序？我正在寻找的只是一个与 WCF 一起用于一些基本测试的证书。这是在 Windows 8 Pro 上，尽管我怀疑这很重要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-02T13:29:09.910

看到这个[答案](https://stackoverflow.com/a/496738/52817)。几个月前，我将它用于 WCF 项目。

### 创建证书颁发机构

创建一个自签名证书 (-r)，使用可导出的私钥 (-pe)，使用 SHA1 (-r) 进行签名（-sky 签名）。私钥被写入文件 (-sv)。

```
makecert -r -pe -n "CN=My Root Authority" -ss CA -sr CurrentUser ^
         -a sha1 -sky signature -cy authority -sv CA.pvk CA.cer 
```

(^= 允许批处理命令行换行)

### 创建服务器证书

使用可导出的私钥 (-pe) 创建服务器证书，使用 SHA1 (-a) 进行密钥交换 (-sky exchange)。它可以用作 SSL 服务器证书（-eku 1.3.6.1.5.5.7.3.1）。颁发证书在文件 (-ic) 中，密钥 (-iv) 也是如此。使用特定的加密提供程序（-sp、-sy）。

```
makecert -pe -n "CN=fqdn.of.server" -a sha1 -sky Exchange ^
         -eku 1.3.6.1.5.5.7.3.1 -ic CA.cer -iv CA.pvk ^
         -sp "Microsoft RSA SChannel Cryptographic Provider" ^
         -sy 12 -sv server.pvk server.cer

pvk2pfx -pvk server.pvk -spc server.cer -pfx server.pfx 
```

然后，您可以在服务器应用程序中使用 .PFX 文件（或将其安装在 IIS 中）。请注意，默认情况下，**`pvk2pfx`不对输出 PFX 文件应用密码**。您需要为此使用`-po`开关。

要使您的所有客户端计算机都信任它，请将**CA.cer**安装在其证书存储区（在 Trusted Root Authorities 存储区中）。如果您在域中，则可以使用 Windows 组策略在全局范围内执行此操作。如果没有，您可以使用**certmgr.msc** MMC 管理单元或**certutil**命令行实用程序：

```
certutil -user -addstore Root CA.cer 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-27T03:01:23.670

您始终可以使用[openssl](http://www.openssl.org)创建[自签名证书](http://www.openssl.org/docs/HOWTO/certificates.txt)，然后只需将证书导入 Windows 证书存储。从命令行很容易做到：

```
openssl genrsa -des3 -out privkey.pem 2048
openssl req -new -x509 -key privkey.pem -out cacert.pem -days 1095 
```

第一行生成私钥，第二行生成实际的自签名证书。有可用的[Win32 安装程序](http://slproweb.com/products/Win32OpenSSL.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-01T07:05:16.027

对我来说，仍然是找出选项 -pe 不起作用的原因。

使用 makecert和[http://www.digitallycreated.net/Blog/38/using-makecert-to-create-certificates-for-development在](http://www.digitallycreated.net/Blog/38/using-makecert-to-create-certificates-for-development)[Make exportable private key](https://stackoverflow.com/questions/8413385/make-exportable-private-key-with-makecert)中给出的答案可能会对您有所帮助。

建议输出私钥，然后使用证书和私钥生成 PFX 文件，然后导入此 PFX 文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-03T18:31:29.280

试试**SSL 诊断**工具。

您应该能够轻松地为 IIS 创建开发证书：

[http://www.softpedia.com/get/Internet/Servers/Server-Tools/SSL-Diagnostics.shtml](http://www.softpedia.com/get/Internet/Servers/Server-Tools/SSL-Diagnostics.shtml)

是的，该工具也可以让您进行一些诊断。

# oop - Tcl：比较类的实例

> ID：16177683
> 
> 赞同：0
> 
> 时间：2013-04-23T19:31:50.893
> 
> 标签：oop, tcl

我正在编写一个方法来比较同一类的两个对象。第二个对象作为参数传入。该方法首先`CalcValue`在当前对象上调用一个私有方法，如果需要（只需执行一次）计算它的数值并将其放入它的私有变量`value`中。

我怎样才能对作为参数发送的对象做同样的事情？如何访问该对象的私有`CalcValue`方法，然后访问它的私有`value`变量？我应该公开方法并为变量编写公共访问方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T05:59:51.253

我不知道您使用的是哪个面向对象的框架，所以我假设 [incr Tcl]。`CalcValue`如果您希望第二个对象访问该方法，则需要公开该方法。下面是一个过于简化的示例，说明了如何访问您的方法：

```
package require Itcl

itcl::class Thing {
    method CalcValue {} { return 999 }
    method compare {otherThing} {
        set myValue [CalcValue]
        set otherValue [$otherThing CalcValue]
        # Do something
    }
}

# -------- MAIN: Create two instances and compare --------
Thing thing1
Thing thing2
thing1 compare thing2 
```

如果`CalcValue`是私有的，那么调用`$otherThing CalcValue`将失败。

# sql-server-2008 - SQL Server 2008 上的筛选索引删除/插入失败？

> ID：16177686
> 
> 赞同：5
> 
> 时间：2013-04-23T19:31:58.097
> 
> 标签：sql-server-2008, filtered-index

我创建了一个具有默认设置的存储过程，例如：

```
SET ANSI_NULLS OFF
GO
SET QUOTED_IDENTIFIER OFF
GO

Create  PROCEDURE [dbo].[TestSP] 
AS
BEGIN
   set arithabort off
   set arithignore on
   --.....
END 
```

没事。然后我在一个表上为 DB 中的非空值创建了一个过滤的唯一索引，然后我不能再在 SQL Server Management Studio 中运行任何存储过程。我得到的错误是这样的：

> DELETE（或 INSERT）失败，因为以下 SET 选项的设置不正确：'ANSI_NULLS，QUOTED_IDENTIFIER'。验证 SET 选项对于索引视图和/或计算列上的索引和/或过滤索引和/或查询通知和/或 XML 数据类型方法和/或空间索引操作是否正确。

我尝试运行存储过程，例如：

```
SET ANSI_NULLS OFF
GO
SET QUOTED_IDENTIFIER OFF
GO
EXEC TestSP 
```

或者

```
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
EXEC TestSP 
```

我仍然得到上述错误。我很困惑。如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T19:46:49.860

ANSI_NULLS 和 QUOTED_IDENTIFIER 的设置基于您创建/更改过程时的设置，而不是您运行该过程的实例中的设置。

您想为您的 TestSP 运行一个 ALTER PROC，在您运行它时至少将 QUOTED_IDENTIFIER 设置为 ON。

```
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

ALTER PROCEDURE [dbo].[TestSP] 

AS
BEGIN
   set arithabort off
   set arithignore on
   --.....
END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-01-11T04:35:16.930

只是我的2c。

我经常将这些消息放入`SET ANSI_WARNINGS OFF` *我*的 procs 中，因为这些消息让我烦恼，并且*有时*这些警告会错误地通过 SSIS 包冒泡到 SQL 代理作业，并错误地将 SSIS 包报告为失败。

添加过滤索引后出现此错误。我现在已经删除了`SET ANSI_WARNINGS OFF`. 我的 proc 现在可以工作了，我会看看那个 SSIS 问题是否真实存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-11T11:27:02.357

我刚刚遇到这种情况，原因与**文件属性**和我在 Visual Studio 上的数据库项目（即*myDatabase.dbproj*）的**部署过程有关。**

 *错误的根本原因是必须创建存储过程的上下文。数据库选项`ANSI_NULLS`和`QUOTED_IDENTIFIER`必须在创建存储过程**之前**设置（在sp代码中设置这些选项并没有错，但是没用）。

如果我将存储过程的源代码复制并粘贴到 SQL Server Management Studio，存储过程就会运行，所以我很确定问题是由`SET`部署上下文的选项不同引起的。然后我检查了这些设置（`Database.sqlsettings`），一切正常：`ANSI_NULLS`并且`QUOTED_IDENTIFIER`设置正确，但问题仍然存在......

直到我*发现*每个对象文件在数据库项目上都有一个**属性**条目（右键单击文件名以显示对话框）。这些属性实际上是在覆盖数据库设置，所以我将它们更改为`Project Default`，问题就解决了。

![sql-文件-属性-对话框](https://i.stack.imgur.com/BKvHZ.png)

PS：我做了更多的测试，从 Visual Studio 创建新的存储过程，并使用模式比较导入手动创建的存储过程，并且文件是使用`Project Default`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-23T20:53:04.560

这似乎是 SQL Server 问题（不一致？）。如果满足以下条件，则会生成错误“INSERT failed because the following SET options has wrong settings:”QUOTED_IDENTIFIER：

*   该表有一个允许 NULL 的列，但没有定义默认值，例如：

`[LookupID] [int] NULL`

*   此列上定义了唯一的过滤索引

    ```
    Create Unique nonclustered index [UniqueExceptNulls] on [tablename]
      ( [lookupID] asc)  where ([LookupID] is not NULL) 
    ```

解决方案：将默认约束添加到 [LookupID] 列：

```
ALTER TABLE [tablename] add CONSTRAINT [DF_TableName_lookupID] DEFAULT (NULL) FOR [lookupID] 
```*

# .htaccess - 使用 htaccess 重定向根目录，但仍然可以通过后门访问目录列表

> ID：16177691
> 
> 赞同：1
> 
> 时间：2013-04-23T19:32:23.837
> 
> 标签：.htaccess, directory-listing

我以为我想做的是天才，但它似乎无法正常工作。

我有一个带有临时文件的公共子域。我不希望人们在访问它时能够看到列出的所有文件。我不想用密码保护它，因为这会在从服务器上获取文件时弄乱几个脚本，而且我不希望那里的空白 index.html 停止列出，因为我希望能够看到列表。

所以我的天才之举是有一个`.htaccess`像这样的文件：

```
RewriteEngine On
RewriteCond %{REQUEST_URI} !/#dir
RewriteCond %{REQUEST_URI} !/?show=dir
RewriteRule ^$ http://example.com/ [nc] 
```

我的理论是访问`files.example.com`会重定向到`example.com`但访问`files.example.com/?show=dir`或`files.example.com/#dir`不会访问；显然，由于`?show=dir`什么都不做，它会正常列出我的所有文件。

我`RewriteConditions`的虽然没有效果。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T19:44:33.027

首先，您无法匹配 URL 片段（`#dir`部分），因为它永远不会发送到服务器。这只是客户端的事情。

其次，不能匹配变量中的查询字符串（`?show=dir`部分）`%{REQUEST_URI}`，需要`%{QUERY_STRING}`改用。

所以试试：

```
RewriteEngine On
RewriteCond %{QUERY_STRING} !^show=dir$
RewriteRule ^$ http://example.com/ [nc] 
```

# linux - TSS_WELL_KNOWN_SECRET 的值是多少

> ID：16177692
> 
> 赞同：2
> 
> 时间：2013-04-23T19:32:31.253
> 
> 标签：linux, security, cryptography, tpm, trusted-computing

我想运行一个`tpm_sealdata`多次调用的脚本，我不想每次都输入 SRK 密码。

在[手册页](http://linux.die.net/man/1/tpm_sealdata)中，我发现了这个：

```
-z, --well-known
    Use TSS_WELL_KNOWN_SECRET (20 zero bytes) as the SRK password.
    You will not be prompted for the SRK password with this option. 
```

但是，我无法确定必须将哪个值用作 TSS_WELL_KNOWN_SECRET。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T19:38:41.637

正如常量名称所暗示的， 的值`TSS_WELL_KNOWN_SECRET`是众所周知的。它只是**20 个字节的 zero**。

但是您实际上并不需要该值。该`-z`选项不需要值，它只是告诉程序使用众所周知的秘密的开关。您引用的帮助文本也说明了这一事实。

所以调用`tpm_sealdata`可能如下所示：

```
tpm_sealdata -z -i data.in -o data.out 
```

但是，要使用这种方法，SRK 当然必须是用众所周知的秘密创建的。使用时`tpm_takeownership`：

```
tpm_takeownership -z 
```

# jquery - JPlayer 为 div 添加背景颜色，为什么？

> ID：16177693
> 
> 赞同：0
> 
> 时间：2013-04-23T19:32:31.970
> 
> 标签：jquery, html, background-color, jplayer, css-frameworks

我将骨架 css 框架与 JPlayer 一起使用，并且我有这个 html：

```
<div class="container">
<div class="sixteen columns">
    <div id="jquery_jplayer_1"></div>
    <div id="page-title">
        <h2><?php echo $this->input('page-title', array('width' => 300)); ?></h2>
        <div id="bolded-line"></div>
    </div>
</div> 
```

div 应该被隐藏，但它具有黑色背景色：

杉木显示：

```
element.style {
    background-color: #000000;
} 
```

和：

```
<div id="jquery_jplayer_1" style="background-color: rgb(0, 0, 0);"></div> 
```

这是为什么？我也不能用我自己的风格覆盖它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T12:26:30.863

这是默认设置，您可以在插件设置中设置背景，如下所示：

```
 jPlayer({backgroundColor:"#cccccc"}); 
```

你可以在这里找到其他设置： [http ://www.jplayer.org/latest/developer-guide/#jPlayer-option-backgroundColor](http://www.jplayer.org/latest/developer-guide/#jPlayer-option-backgroundColor)

# sitecore - 如何在 Sitecore 中动态更改图像大小？

> ID：16177694
> 
> 赞同：5
> 
> 时间：2013-04-23T19:32:36.117
> 
> 标签：sitecore, sitecore6

我创建了一个 Web 服务，并从 sitecore6.6 获得了图像字段。现在我想动态地改变图像的宽度和高度，这样我就可以动态地拥有大图像。有近 1000 张图片需要更改尺寸。任何帮助...

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-23T20:16:00.030

您可以在图片的 url 中使用多个查询字符串参数让 Sitecore 修改图片。图片必须是 Sitecore 媒体项目。

以下是支持的查询字符串参数列表：

*   w：以像素为单位的宽度
*   h：高度（以像素为单位）
*   mw：最大宽度（以像素为单位）
*   mh：最大高度（以像素为单位）
*   la：语言（默认为上下文语言）
*   vs：版本（默认为最新版本）
*   db：数据库名称（默认为上下文数据库）
*   bc：背景颜色（默认为黑色）
*   as：允许拉伸（as=1）
*   sc：按浮点数缩放（sc=.25 = 25%）
*   thn：缩略图（thn=1）
*   dmc：禁用媒体缓存，包括检索和存储 (dmc=1)

在您的情况下，您可以使用例如 ?as=1&w=600 将图像大小调整为 600px 宽度。

您也可以在创建 mediaUrl 时以编程方式设置 MediaUrlOptions：

```
var mediaOptions = new MediaUrlOptions {AllowStretch = true, Width = 600};
var mediaUrl = MediaManager.GetMediaUrl(mediaItem, mediaOptions); 
```

# javascript - li 使用书签时垂直折叠的项目

> ID：16177701
> 
> 赞同：0
> 
> 时间：2013-04-23T19:33:06.973
> 
> 标签：javascript, jquery, html, css

我正在制作这个网站：

[http://frankkluytmans.nl/testsite/](http://frankkluytmans.nl/testsite/)

并制作一个列表视图，在其中我使用 wookmark jquery 插件使列表项垂直对齐。现在列表项正在垂直折叠（参见链接）。我能做些什么来解决这个问题？

CSS：

```
#content ol {
    position: relative;
    display: block;
    margin-left: -2%;

    list-style-type: none;
}

#content ol li {
    display: block;
    width: 18%;
    height: auto;
    margin-left: 2%;
    margin-bottom: 20px;
    padding: 3px;

    background: white;
    float: left;    
}

#content ol li img {
    width: 100%;
    border: none;   
} 
```

JS：

```
$('#content ol li').wookmark({
     container: $('#content ol'),
     offset: 20
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T07:56:27.400

我能够自己制定解决方案。事实证明，webkit 浏览器需要首先加载图像才能计算列表元素的正确高度。

我将我的 JS 调整为：

```
 $("img").load(function() {
        $('#content ol li').wookmark({
            container: $('#content ol'),
            offset: 15
        });
    }); 
```

# c++ - const char 和二元运算符错误

> ID：16177702
> 
> 赞同：0
> 
> 时间：2013-04-23T19:33:13.760
> 
> 标签：c++, string, operator-keyword, operand

首先要做的事情：我知道这段代码太长了，可以缩短很多。但是，我不想帮助如何缩短它，我只是想了解一些基础知识，而我现在的问题是运算符和存储值。正如您可能从代码中看到的那样，我正在尝试使用一堆 if 语句将特定值存储在变量中，然后在最后将这些值一起显示在一个字符串中。编译器不喜欢我的代码，并且给了我一堆与运算符相关的错误。

```
#include <iostream>
#include <string>

using namespace std;

int main()
{
    string type = "";
    string color = "";
    string invTypeCode = "";
    string invColorCode = "";
    string fullCode = "";

    cout << "Use this program to determine inventory code of furniture.";
    cout << "Enter type of furniture: ";
    cin >> type;

    if (type.length() == 1)
    {
        if (type == "1" or "2")
        {
         if (type == "1")
         { 
              invTypeCode = "T47" << endl;
              }
         if (type == "2")
         { 
              invTypeCode = "C47" << endl;
              }
              else 
              cout << "Invalid inventory code." << endl;
    }}

    else
         cout << "Invalid inventory code." << endl;

    cout << "Enter color code of furniture: ";
    cin >> color;

    if (color.length() == 1)
    {
        if (color == "1" or "2" or "3")
        {
         if (color == "1")
         { 
              invColorCode = "41" << endl;
              }
         if (type == "2")
         { 
              invColorCode = "25" << endl;
              }
         if (type == "3")
         { 
              invColorCode = "30" << endl;
              }
              else 
              cout << "Invalid inventory code." << endl;
    }}

    else
         cout << "Invalid inventory code." << endl;

    fullCode = invTypeCode + invColorCode;
    cout << fullcode << endl;

    system("pause"); 
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T19:35:37.977

```
if (color == "1" or "2" or "3") 
```

应该

```
if (color == "1" or color == "2" or color == "3") 
```

或者，如果您更喜欢普通风格，那么

```
if (color == "1" || color == "2" || color == "3") 
```

运算符`||`和`or`是相同的，但是`||`是旧版本，所以它是大多数人使用的那个。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T19:41:58.413

看起来您没有正确使用输入和输出流。例如：

```
 invTypeCode = "T47" << endl; 
```

通常，如果您使用 endl 和 <<，则 << 运算符的 lhs 端是 std::ostream。在这种情况下， lhs 是一个字符串，这就是编译器抱怨的原因。在这种情况下，我认为您真正想要的是将“T47”替换为“T47\n”，并删除“<< endl”。

您在最后一次引用“fullcode”时也弄错了案例；它必须是“fullCode”，大写“C”。C++ 区分大小写。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T19:37:52.320

此外，像这样的陈述将不起作用：

```
 invColorCode = "25" << endl; 
```

不太确定您要使用`endl`.

# servlets - “如果不重新发送信息就无法刷新页面”使用http post方法但不是get为什么？

> ID：16177704
> 
> 赞同：0
> 
> 时间：2013-04-23T19:33:20.133
> 
> 标签：servlets

当我从 post 方法中转发请求时，会出现一条确认警报，其中包含一条消息“如果不重新发送信息就无法刷新页面”。但是当通过 get 方法完成转发时，不会出现此警告框。

是什么原因 ？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T20:21:11.580

因为在 HTTP 规范中，POST 用于非幂等请求，因为它们会修改服务器上的状态（例如，通过向类别添加新产品），如果重新提交请求，则会再次修改（例如，它将在该类别中创建一个新产品）。

另一方面，GET 用于幂等请求。例如，谷歌搜索是幂等的。两次搜索相同的内容不会修改服务器上的任何内容，并且重新提交相同的请求不会产生任何不良影响。

浏览器希望 Web 应用程序遵守此约定，因此在重新提交 POST 请求之前会警告用户这种不需要的副作用。

通常的做法是遵循[post-redirect-get](http://en.wikipedia.org/wiki/Post/Redirect/Get)模式，让用户在发布后刷新，而不会出现这种烦人的弹出窗口，也不会产生不必要的副作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T20:23:03.450

因为 GET 请求在 URL 中包含这些参数（例如 URL 以 结尾
`?param1=foo&param2=bar`）。GET 请求通常不涉及敏感数据或更改服务器状态的操作。从 URL 中，您知道要发送的内容。

使用 POST，参数是“隐藏的”，作为 HTTP 请求的一部分在后台提交，您无法通过查看 URL 看到它们。这些参数会导致服务器改变状态，如果相同的数据被传输两次，它可能会导致问题（例如，您不小心从网上商店购买了两次东西）。如果您没有意识到您将重新发送它，浏览器会通知您。

# android - Android SDK 管理器 - 在 Eclipse 中获取 URL 错误

> ID：16177706
> 
> 赞同：0
> 
> 时间：2013-04-23T19:33:29.737
> 
> 标签：android, eclipse, sdk

> 获取 http://dl-ssl.google.com/android/repository/addons_list-2.xml
> 
> 成功获取加载项列表
> 
> 获取网址：http://dl-ssl.google.com/android/repository/repository-7.xml
> 
> 完成装载包。
> 
> 获取 http://dl-ssl.google.com/android/repository/addons_list-2.xml
> 
> 无法获取 URL http://dl-ssl.google.com/android/repository/addons_list-2.xml，原因：无法识别的 Windows 套接字错误：87：创建
> 
> 成功获取加载项列表
> 
> 获取网址：http://dl-ssl.google.com/android/repository/repository-7.xml
> 
> 无法获取 URL http://dl-ssl.google.com/android/repository/repository-7.xml，原因：Socket Unrecognized Windows Sockets 错误：87：创建
> 
> 完成装载包。

我一直在尝试解决这个问题......已经尝试过：

*   禁用防火墙和防病毒软件

*   选中“强制 https:// ... 使用 http:// ... 获取源”框

*   检查更新（帮助选项卡）
*   安装新软件（帮助选项卡）
*   设置 -Djava.net.preferIPv4Stack=true
*   重新安装 SDK、Eclipse 和 Java
*   设置环境变量
*   从 CMD 运行 android.bat
*   做“复制工具文件夹”修复另外，我不使用任何代理。说真的，我已经尝试了一切......这是我从 CMD 运行 android.bat 时得到的：

> `Picked up _JAVA_OPTIONS: -Djava.net.preferIPv4Stack=true Picked up _JAVA_OPTIONS: -Djava.net.preferIPv4Stack=true Apr 23, 2013 4:24:52 PM org.apache.http.impl.client.DefaultRequestDirector tryCo nnect INFO: I/O exception (java.net.SocketException) caught when connecting to the tar get host: Unrecognized Windows Sockets error: 87: create Apr 23, 2013 4:24:52 PM org.apache.http.impl.client.DefaultRequestDirector tryCo nnect INFO: Retrying connect Apr 23, 2013 4:24:52 PM org.apache.http.impl.client.DefaultRequestDirector tryCo nnect INFO: I/O exception (java.net.SocketException) caught when connecting to the tar get host: Unrecognized Windows Sockets error: 87: create Apr 23, 2013 4:24:52 PM org.apache.http.impl.client.DefaultRequestDirector tryCo nnect INFO: Retrying connect Apr 23, 2013 4:24:52 PM org.apache.http.impl.client.DefaultRequestDirector tryCo nnect INFO: I/O exception (java.net.SocketException) caught when connecting to the tar get host: Unrecognized Windows Sockets error: 87: create Apr 23, 2013 4:24:52 PM org.apache.http.impl.client.DefaultRequestDirector tryCo nnect INFO: Retrying connect Apr 23, 2013 4:24:52 PM org.apache.http.impl.client.DefaultRequestDirector tryCo nnect INFO: I/O exception (java.net.SocketException) caught when connecting to the tar get host: Unrecognized Windows Sockets error: 87: create Apr 23, 2013 4:24:52 PM org.apache.http.impl.client.DefaultRequestDirector tryCo nnect INFO: Retrying connect Apr 23, 2013 4:24:52 PM org.apache.http.impl.client.DefaultRequestDirector tryCo nnect INFO: I/O exception (java.net.SocketException) caught when connecting to the tar get host: Unrecognized Windows Sockets error: 87: create Apr 23, 2013 4:24:52 PM org.apache.http.impl.client.DefaultRequestDirector tryCo nnect INFO: Retrying connect Apr 23, 2013 4:24:52 PM org.apache.http.impl.client.DefaultRequestDirector tryCo nnect INFO: I/O exception (java.net.SocketException) caught when connecting to the tar get host: Unrecognized Windows Sockets error: 87: create Apr 23, 2013 4:24:52 PM org.apache.http.impl.client.DefaultRequestDirector tryCo nnect INFO: Retrying connect Apr 23, 2013 4:24:52 PM org.apache.http.impl.client.DefaultRequestDirector tryCo nnect INFO: I/O exception (java.net.SocketException) caught when connecting to the tar get host: Unrecognized Windows Sockets error: 87: create Apr 23, 2013 4:24:52 PM org.apache.http.impl.client.DefaultRequestDirector tryCo nnect INFO: Retrying connect Apr 23, 2013 4:24:52 PM org.apache.http.impl.client.DefaultRequestDirector tryCo nnect INFO: I/O exception (java.net.SocketException) caught when connecting to the tar get host: Unrecognized Windows Sockets error: 87: create Apr 23, 2013 4:24:52 PM org.apache.http.impl.client.DefaultRequestDirector tryCo nnect INFO: Retrying connect Apr 23, 2013 4:24:52 PM org.apache.http.impl.client.DefaultRequestDirector tryCo nnect INFO: I/O exception (java.net.SocketException) caught when connecting to the tar get host: Unrecognized Windows Sockets error: 87: create Apr 23, 2013 4:24:52 PM org.apache.http.impl.client.DefaultRequestDirector tryCo nnect INFO: Retrying connect Apr 23, 2013 4:24:52 PM org.apache.http.impl.client.DefaultRequestDirector tryCo nnect INFO: I/O exception (java.net.SocketException) caught when connecting to the tar get host: Unrecognized Windows Sockets error: 87: create Apr 23, 2013 4:24:52 PM org.apache.http.impl.client.DefaultRequestDirector tryCo nnect INFO: Retrying connect Apr 23, 2013 4:24:52 PM org.apache.http.impl.client.DefaultRequestDirector tryCo nnect INFO: I/O exception (java.net.SocketException) caught when connecting to the tar get host: Unrecognized Windows Sockets error: 87: create Apr 23, 2013 4:24:52 PM org.apache.http.impl.client.DefaultRequestDirector tryCo nnect INFO: Retrying connect Apr 23, 2013 4:24:52 PM org.apache.http.impl.client.DefaultRequestDirector tryCo nnect INFO: I/O exception (java.net.SocketException) caught when connecting to the tar get host: Unrecognized Windows Sockets error: 87: create Apr 23, 2013 4:24:52 PM org.apache.http.impl.client.DefaultRequestDirector tryCo nnect INFO: Retrying connect Apr 23, 2013 4:24:52 PM org.apache.http.impl.client.DefaultRequestDirector tryCo nnect INFO: I/O exception (java.net.SocketException) caught when connecting to the tar get host: Unrecognized Windows Sockets error: 87: create Apr 23, 2013 4:24:52 PM org.apache.http.impl.client.DefaultRequestDirector tryCo nnect INFO: Retrying connect Apr 23, 2013 4:24:52 PM org.apache.http.impl.client.DefaultRequestDirector tryCo nnect INFO: I/O exception (java.net.SocketException) caught when connecting to the tar get host: Unrecognized Windows Sockets error: 87: create Apr 23, 2013 4:24:52 PM org.apache.http.impl.client.DefaultRequestDirector tryCo nnect INFO: Retrying connect Apr 23, 2013 4:24:52 PM org.apache.http.impl.client.DefaultRequestDirector tryCo nnect INFO: I/O exception (java.net.SocketException) caught when connecting to the tar get host: Unrecognized Windows Sockets error: 87: create Apr 23, 2013 4:24:52 PM org.apache.http.impl.client.DefaultRequestDirector tryCo nnect INFO: Retrying connect Apr 23, 2013 4:24:52 PM org.apache.http.impl.client.DefaultRequestDirector tryCo nnect INFO: I/O exception (java.net.SocketException) caught when connecting to the tar get host: Unrecognized Windows Sockets error: 87: create Apr 23, 2013 4:24:52 PM org.apache.http.impl.client.DefaultRequestDirector tryCo nnect INFO: Retrying connect Apr 23, 2013 4:24:52 PM org.apache.http.impl.client.DefaultRequestDirector tryCo nnect INFO: I/O exception (java.net.SocketException) caught when connecting to the tar get host: Unrecognized Windows Sockets error: 87: create Apr 23, 2013 4:24:52 PM org.apache.http.impl.client.DefaultRequestDirector tryCo nnect INFO: Retrying connect Apr 23, 2013 4:24:52 PM org.apache.http.impl.client.DefaultRequestDirector tryCo nnect INFO: I/O exception (java.net.SocketException) caught when connecting to the tar get host: Unrecognized Windows Sockets error: 87: create Apr 23, 2013 4:24:52 PM org.apache.http.impl.client.DefaultRequestDirector tryCo nnect INFO: Retrying connect`

# css - 避免在图像 css 上拉伸

> ID：16177707
> 
> 赞同：24
> 
> 时间：2013-04-23T19:33:37.670
> 
> 标签：css, image, stretch

我正在将图像渲染为`div`. 我想避免拉伸我的图像。

```
div {
  height: 300px;
  width: 300px; 
}
img {
  min-width: 300px;
  min-height: 300px;
  max-height: 300px;   
} 
```

我的问题是我的图像宽度拉伸。我希望它具有常规宽度，即使图像的某些部分会丢失。

```
div {
  height: 300px;
  width: 300px; 
  overflow: hidden;
}
img {
  height: 300px
  max-width: none;
  min-width: 300px;
} 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2019-10-14T15:55:05.107

您可以通过简单地添加`object-fit: cover;`. 一个例子可能是 -

```
img {
    height: 300px
    width: 100%;
    object-fit: cover;
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-23T19:39:40.247

我会忘记设置最小高度和最大高度。只需将高度设置为 300 像素并在 div 标签上隐藏溢出。这样，无论图像大小如何，它都将始终保持成比例，并且永远不会超出 div 标签的边界。

```
div { height: 300px; width: 300px; overflow: hidden; }
img { height: 300px; } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-23T19:36:17.813

如果您想避免拉伸最简单的方法（但保持原始宽度），请将图像作为 div 背景。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-11-20T06:35:54.387

只需指定 max-width 100% 和 height :auto

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-06-19T05:34:44.563

为了使它像使用 300px 一样更灵活，请使用：

img { 宽度：100%; 适合对象：封面；}

高度自动调整

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-23T19:36:38.067

使用`max-width`代替`min-width`，并设置`height`为`300px`（或仅使用`max-height`）。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-23T19:38:03.973

您可以使用`overflow:hidden`隐藏 div 宽度之外的图像的任何部分。

```
div {
       height: 300px;
       width: 300px; 
       overflow: hidden;
    }
img {
       /*min-width: 300px;*/
       height: 300px;   
    } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-02-27T10:46:23.300

在给图像一个固定的高度和宽度之后，我添加了 object-fit，如下所示：

```
img {
  width: 300px;
  height: 300px;
  object-fit: contain;
}
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-07-26T00:42:00.040

**==>如果您要固定高度并且不想拉伸宽度**

```
div {
  height: 300px;
  width: 300px; 
  overflow: hidden;
}
img {
  height: 300px
} 
```

**==>如果您要固定宽度并且不想拉伸高度**

```
div {
   height: 300px;
   width: 300px; 
   overflow: hidden;
}
img {
 width: 300px
} 
```

# matlab - MATLAB：uiopen 并获取该文件的名称？

> ID：16177709
> 
> 赞同：0
> 
> 时间：2013-04-23T19:33:40.273
> 
> 标签：matlab

我有一个带有按钮的 GUI。您按下按钮，它允许您选择要打开的文件，然后使用 uiopen('load') 将该文件加载到工作区中。这部分工作正常：

然后我希望它返回刚刚打开的文件的名称，以便我可以使用它来告诉程序的下一部分要查看哪些数据，并获取打开文件的名称以显示在编辑中GUI 本身中的框。第一个问题比第二个问题更重要。任何帮助将不胜感激谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T19:52:52.620

实际上函数'uigetfile'通常用于打开标准对话框以检索文件，格式如下：

```
filename = uigetfile

or

[FileName,PathName,FilterIndex] = uigetfile(FilterSpec) 
```

此功能显示一个模式对话框，列出当前文件夹中的文件，并允许您选择输入文件的名称。如果文件名有效且文件存在，则当您单击打开时，uigetfile 会以字符串形式返回文件名。否则 uigetfile 会显示适当的错误消息，然后控制返回对话框。然后您可以输入另一个文件名或单击“取消”。如果单击“取消”或关闭对话框窗口，uigetfile 返回 0。

一个例子可能是：

```
[FileName,PathName] = uigetfile('*.m','Select the MATLAB code file'); 
```

此外，您可以使用 'uigetdir' 对目录执行相同的操作。

另外，你可以查看这个链接：[for matlab](http://www.mathworks.com/help/matlab/ref/uigetfile.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T19:40:13.717

您可以使用`uigetfile`获取文件名并使用`load(filename)`.

# css - 带有垂直子菜单的水平菜单

> ID：16177711
> 
> 赞同：0
> 
> 时间：2013-04-23T19:33:46.900
> 
> 标签：css, css-float

我想知道是否有一种方法可以使用水平文本垂直子菜单和垂直文本进行水平 css 菜单。我尝试过，但是在旋转第二个 ul（垂直）时，对齐会崩溃。另外我希望菜单向左流动，直到我最后一个垂直菜单.. 可以这样做吗？请帮忙。

```
<style>
ul {
    padding: 0;
    margin: 0;
    list-style: none;
}
#table-header {
    float: left;
    width: 8%;
}
.vertical-list-container {
    float: left;
    width: 90%;
}
.vertical-list{
    float: left;
    width: auto;
}
.vertical-list-trans{
    float: left;
    border-left:1px solid green;
    border-right:1px solid red;
    border-top:1px solid blue;
    border-bottom:1px solid black;
    -webkit-transform: rotate(-90deg);
       -moz-transform: rotate(-90deg);
        -ms-transform: rotate(-90deg);
         -o-transform: rotate(-90deg);
    filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=3);
}
</style>

<div class="vertical-list-container">
    <ul class="vertical-list-trans">
        <li>1</li>
        <li>John Doe</li>
        <li>123 Address Lane</li>
    </ul>
    <ul class="vertical-list-trans">
        <li>2</li>
        <li>Jane Doe</li>
        <li>456 Another Road</li>
    </ul>
    <ul class="vertical-list-trans">
        <li>1</li>
        <li>John Doe</li>
        <li>123 Address Lane</li>
        <li>2</li>
        <li>Jane Doe</li>
        <li>456 Another Road456 Another Road456 Another Road</li>
    </ul>
    <ul class="vertical-list-trans">
        <li>2</li>
        <li>Jane Doe</li>
        <li>456 Another Road</li>
        <li>123 Address Lane</li>
        <li>2</li>
        <li>Jane Doe</li>
        <li>456 Another Road456 Another Road456 Another Road</li>
        <li>123 Address Lane</li>
        <li>2</li>
        <li>Jane Doe</li>
        <li>456 Another Road456 Another Road456 Another Road</li>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T20:10:24.167

来自w3.org 上的[CSS 变换 > 变换渲染模型规范：](http://www.w3.org/TR/css3-transforms/#transform-rendering)

> 在 HTML 命名空间中，transform 属性不会影响转换后元素周围的内容流。但是，溢出区域的范围考虑了变换的元素。此行为类似于通过相对定位偏移元素时发生的情况。

[请参阅此代码笔： http](http://codepen.io/keithwyland/pen/evFof) ://codepen.io/keithwyland/pen/evFof

请注意，即使红色的 div 被转换，div 的流也不会改变。红色 div 的高度仍在内容的流动中，并将绿色 div 向下推，就好像它没有被转换一样。这正是在规范中定义转换的方式。

这就是为什么当您旋转导航项目时，对齐显示为关闭。它们似乎不再彼此靠近，但实际上根据流程，它们确实如此。

这是另一个例子： [http ://codepen.io/keithwyland/pen/DKLHi](http://codepen.io/keithwyland/pen/DKLHi)

请注意，在此示例中，绿色 div 是如何漂浮在红色 div 的流动位置旁边的，而不是它如何转换的右边缘。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T21:47:48.773

我不太确定问题出在哪里，但是从标题中我认为您正在寻找带有垂直“子菜单”的水平“菜单”。

您将需要与“子菜单”上的位置`transform-origin: top left;`一起使用`transform: rotate(90deg);`，然后摆弄`position:absolute; top:--px; left:--px;`

有点难以解释，请参阅 jsfiddle 以获取工作示例。

[**jsFiddle**](http://jsfiddle.net/apaul34208/SnAF7/2/)

# android - cmake 使用 android ndk 失败

> ID：16177713
> 
> 赞同：7
> 
> 时间：2013-04-23T19:33:50.290
> 
> 标签：android, c++, android-ndk, cmake

我正在尝试使用 Android NdK 独立工具链构建一些东西。但是，我遇到了这些错误。

```
 CMake Warning at cmake/android.toolchain.cmake:387 (message):
      Using value of obsolete variable ANDROID_NDK_TOOLCHAIN_ROOT as initial
      value for ANDROID_STANDALONE_TOOLCHAIN.  Please note, that
      ANDROID_NDK_TOOLCHAIN_ROOT can be completely removed in future versions of
      the toolchain.
    Call Stack (most recent call first):
      cmake/android.toolchain.cmake:476 (__INIT_VARIABLE)
      /usr/local/Cellar/cmake/2.8.10.2/share/cmake/Modules/CMakeDetermineSystem.cmake:86 (include)
      CMakeLists.txt:16 (PROJECT)

    CMake Error at cmake/android.toolchain.cmake:412 (FILE):
      file STRINGS file
      "/Users/vgokhale/Desktop/android-ndk-r8e/sysroot/usr/include/android/api-level.h"
      cannot be read.
    Call Stack (most recent call first):
      cmake/android.toolchain.cmake:548 (__DETECT_NATIVE_API_LEVEL)
      /usr/local/Cellar/cmake/2.8.10.2/share/cmake/Modules/CMakeDetermineSystem.cmake:86 (include)
      CMakeLists.txt:16 (PROJECT)

CMake Error: Error required internal CMake variable not set, cmake may be not be built correctly.
Missing variable is:
CMAKE_C_COMPILER_ENV_VAR
CMake Error: Error required internal CMake variable not set, cmake may be not be built correctly.
Missing variable is:
CMAKE_C_COMPILER
CMake Error: Could not find cmake module file:/Users/vgokhale/Desktop/torch-android/src/build/CMakeFiles/2.8.10.2/CMakeCCompiler.cmake
CMake Error: Error required internal CMake variable not set, cmake may be not be built correctly.
Missing variable is:
CMAKE_CXX_COMPILER_ENV_VAR
CMake Error: Error required internal CMake variable not set, cmake may be not be built correctly.
Missing variable is:
CMAKE_CXX_COMPILER
CMake Error: Could not find cmake module file:/Users/vgokhale/Desktop/torch-android/src/build/CMakeFiles/2.8.10.2/CMakeCXXCompiler.cmake
CMake Error: CMAKE_C_COMPILER not set, after EnableLanguage
CMake Error: CMAKE_CXX_COMPILER not set, after EnableLanguage
-- Configuring incomplete, errors occurred!
make: *** No rule to make target `install'.  Stop. 
```

有两组错误。我不知道从哪里开始第一组。android.toolchain.cmake 文件默认进入 sysroot，但没有安装 android，Google 也不需要我在那里安装它。

关于 CMAKE 变量，我发现大多数解决方案都涉及安装我已经拥有的开发人员工具。我尝试手动设置 CXX 和 CC 变量，但没有帮助。

关于从哪里开始的任何想法？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-03T09:25:02.577

好的，我会在这里做一些猜测，但我认为您使用的是[http://code.google.com/p/android-cmake/](http://code.google.com/p/android-cmake/)并且您使用 ANDROID_STANDALONE_TOOLCHAIN 调用它，同时提供它的路径NDK。如果我是对的，那就是问题所在。

您应该使用 ANDROID_NDK 调用它并提供您的 NDK 的路径。android-cmake 文档表明这是要走的路。

**或者**

继续使用 ANDROID_STANDALONE_TOOLCHAIN 调用它，但为其提供安装的工具链的路径（使用 make-standalone-toolchain.sh 创建的东西）

如果您想采用这种方式，您可以在已安装的 NDK 中的 docs/STANDALONE-TOOLCHAIN.html 中找到有关创建独立工具链的信息。

# mocking - 是否有任何工具可以自动存根模拟对象响应？（使用 jmock、mockito 或 easy mock）

> ID：16177715
> 
> 赞同：2
> 
> 时间：2013-04-23T19:34:02.167
> 
> 标签：mocking, mockito, easymock, powermock

问题：是否有任何工具可以自动化存根或模拟对象响应（使用 jmock、mockito 或 easy mock）？

我必须针对依赖于 Amazon AWS 服务（SQS/Simple Queue Service 和 DynamoDB）的方法编写单元测试。对我来说，存根模拟对象响应往往非常乏味且难以维护。所以，我认为如果我们使用 Java 代理（通过 CGLib 或 javassist）记录和重放存根响应会很好。我想过自己实施这样的想法，但我想检查是否有人曾经实施过这样的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-14T22:59:40.730

我建议不要完全这样做。嘲笑您不拥有的库只是自找麻烦（正如您已经看到的那样），并且只会确认您正在以您认为应该的方式与库进行交互。

如果您有与 SQS/DynamoDb 交互的代码，那么编写实际运行并命中 SQS 和 DynamoDb 的集成测试 - 它们会给您比单元测试更高的信心，并且不会脆弱。DynamoDb 还有一个内存本地实例，您可以为此目的启动

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-27T10:48:06.260

easymock 在过去就是这样做的，但是我们发现随着代码的变化，这样的测试往往会变得脆弱。我的经验是，如果在测试中维护存根很乏味，那么这就是关于应该听取测试代码设计的线索。那里可能应该有更多更小的物体。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T19:37:43.990

我考虑了相同的功能，最终我自己通过 Mockito 框架而不是 CGLib 直接实现它。听说有人在 Android Java 平台上启用了 Mockito，这样我就可以轻松地将我的使用 Mockito 的工具移植到 Android 上。但是，据我所知，目前我们无法移植任何依赖于 CGLib 或 Javaassit 的函数。

我已经开源了我的名为“ [bimock](https://github.com/henry4j/maki4j/) ”（双向模拟）的工具，它有两种模式。在记录模式下，它将带有返回值或异常的方法调用记录到 JSON 格式的资源文件中。在重放模式下，它在启动时从资源文件中设置方法调用和答案，并重放返回或抛出的答案。请参阅此示例，其中我记录了 Java 对象的公共方法响应并从 JSON 文件中重放它们。

您应该能够使用此工具来处理各种依赖项，不仅适用于 Amazon AWS 开发工具包对象，还适用于 JDK 对象，例如 HashMap、ArrayList、ByteBuffer 等。

```
public class BimockTest {
    private Mode mode = Mode.Replay;
    private PojoMapper pojoMapper = new PojoMapper(new BimockModule());
    private Bimock bimock = new Bimock(pojoMapper);

    @Test
    public void testRecordAndReplayMap() throws IOException {
        val map = bimock.of(new HashMap<String, Integer>(), mode, new File("src/test/resources/test-record-and-replay-map.json"));
        assertThat(map.put("abc", 3), equalTo(null));
        assertThat(map.size(), equalTo(1));
        assertThat(map.get("abc"), equalTo(3));
    }

    @Test
    public void testRecordAndReplayList() {
        List<Long> list = new ArrayList<Long>();
        list = bimock.of(list, mode, new File("src/test/resources/test-record-and-replay-list.json"));
        try {
            assertThat(list.remove(-1), nullValue());
            fail();
        } catch (ArrayIndexOutOfBoundsException e) {
            assertThat(e.getMessage(), equalTo("-1"));
        }
        assertThat(list.add(100L), equalTo(true));
        assertThat(list.toArray(new Long[1]), equalTo(new Long[] { 100L }));
    }
} 
```

# function - F# 函数不允许我改变可变值

> ID：16177718
> 
> 赞同：3
> 
> 时间：2013-04-23T19:34:07.500
> 
> 标签：function, variables, f#, mutable, mutation

可能是另一个愚蠢的 F# 初学者的问题......但它仍然困扰着我

我似乎无法在网上找到任何答案......可能是因为我搜索了错误的术语，但是嗯

无论如何，我的代码如下：

```
let counter() = 
    let mutable x = 0

    let increment(y :int) =
        x <- x + y // this line is giving me trouble
        printfn "%A" x // and this one too

    increment // return the function 
```

Visual Studio 告诉我，`x`它的使用方式无效，闭包无法捕获可变变量

这是为什么？我能做些什么来让我变异它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-23T19:39:01.193

如错误消息所示，您可以改用`ref`单元格：

```
let counter() = 
    let x = ref 0

    let increment(y :int) =
        x := !x + y // this line is giving me trouble
        printfn "%A" !x // and this one too

    increment // return the function 
```

如果它是合法的，这正是你的代码会做的事情。`!`操作员从 ref 单元格中获取值并分配`:=`一个新值。至于为什么需要这样做，这是因为通过闭包捕获可变值的语义已被证明是令人困惑的；使用`ref`单元格使事情更加明确且不易出错（请参阅[http://lorgonblog.wordpress.com/2008/11/12/on-lambdas-capture-and-mutability/](http://lorgonblog.wordpress.com/2008/11/12/on-lambdas-capture-and-mutability/)以获得进一步的详细说明）。

# javascript - 如何将文本动画化回原始起始 div 位置？

> ID：16177723
> 
> 赞同：0
> 
> 时间：2013-04-23T19:34:49.613
> 
> 标签：javascript, jquery, html

文本起始位置在视频的底部。将文本拖动到任何地方后，我希望文本回到与设置位置完全相同的起始位置。我试过了，但它没有按我想要的方式工作，

```
$("#returnPosition").click(function() {
    $("#subtitle").animate({left:'50',bottom:'40px'});
}); 
```

但似乎它只专注于动画到左 50，不包括底部。

这里是 HTML5 代码，

```
<div id="container" class="container">

                <video id="video" width="930" height="500" controls>
                    <source src="caption.mp4" type="video/mp4">
                    <source src="caption.ogg" type="video/ogg" >
                    <source src="caption.webm" type="video/webm" >
                </video> 
                <div id="subtitle" class="subtitle">
                </div>
</div> 
```

和 CSS 用于字幕起始位置，

```
.container  {
                position:relative;
            }
    .subtitle {
                    position:absolute;
                    width:840px;

                    bottom:40px;
                    left:50;
                    z-index:2000;
                    color:white;

                    font-weight:bold;
                    font-size:150%;
                    text-align:center;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T19:50:14.540

尝试将 left:50px 放在 css 部分以及从 javascript 运行的 css 上。您缺少度量单位 .. 像素中的 px，但我强烈建议改用“嗯”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T17:42:52.373

我找到了解决方案，它很简单，但没有动画。

```
$("#returnPosition").click(function() {
    $("#subtitle").css({"left": "50", "bottom": "40px"});
    document.getElementById("subtitle").style.top="";
}); 
```

字幕不移动到视频底部的原因是因为设置了顶部位置。它需要删除它才能使这项工作。所以我清除了顶部位置设置并且它起作用了。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-23T20:02:50.460

我实际上会使用链接中的引用并对其进行一些修改..

# 原来的：

$("#right").click(function(){ $(".block").animate({"left": "+=50px"}, "slow"); });

# 您提供的代码：

$("#returnPosition").click(function() { $("#subtitle").animate({left:'50',bottom:'40px'}); });

# 我的贡献

我用[http://pxtoem.com/](http://pxtoem.com/) 来转换你的 50px，.. 它说 1em，它认为它更清晰

```
 jQuery(function($)
                        {

                    // We clear the event here, the click then we pass it as an argument.. event.. it's the click or the event that triggers the function is the same..     
                // identify the object for easier readyness, because that will allow you to reuse it for a class in the event that you want to extend something later, instead of an id.. this is only in the case that you want to have many divs in the future and it's a normal coding convention, I believe with jQuery.    

                        $("a#returnPosition").off('click').on('click',  function(event) 
                        {

                        // modified this
                        var the_div=$("div#subtitle");
                        the_div.animate({"left": "+=1em"}, 1820);
                        the_div.animate({"bottom": "+=1em"}, 1820);

                        // Keep this in case of the need to return false...    event.preventDefault();
                              });

                        }); 
```

# mysql - 使用日期选择器过滤数据网格

> ID：16177725
> 
> 赞同：0
> 
> 时间：2013-04-23T19:34:51.543
> 
> 标签：mysql, wpf, date, datagrid, datepicker

请帮帮我，我整天都被困在这上面！！

我想使用两个日期选择器过滤 wpf 数据网格的结果。我到目前为止的Mysql查询如下

代码：

```
MySqlConnection cs = new MySqlConnection(connectionSQL);
cs.Open();

DataSet ds = new DataSet();

MySqlDataAdapter da = new MySqlDataAdapter("Select * from Transactions WHERE date BETWEEN '"+datePicker1.Text +"' AND '"+datePicker2.Text +"' ", cs);

MySqlCommandBuilder cmd = new MySqlCommandBuilder(da);

da.Fill(ds);

this.dataGrid1.ItemsSource = ds.Tables[0].DefaultView; 
```

我的代码没有错误，但数据集返回为空，即使我有与查询对应的记录。

datepicker 是否需要在 xaml 中进行任何绑定？DBase 日期字段具有日期类型。并以这种格式保存日期 2013-03-11

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T20:01:02.373

假设该字段`date`的类型是 DATE，那么在您的连接器做一些奇怪的事情的情况下，可能值得在参数周围添加一个 DATE()。不过，这感觉像是一个长镜头。示例如下

```
MySqlDataAdapter da = new MySqlDataAdapter("SELECT * FROM Transactions WHERE date BETWEEN DATE('"+datePicker1.Text +"') AND DATE('"+datePicker2.Text +"') ", cs); 
```

如果这根本没有帮助，请使用 Transactions 表结构和您期望匹配的一些示例数据更新您的问题。

在编辑说明中，SELECT 和 FROM 通常大写。

# java - 如何在 android 中创建固定操作栏并在其下方启动新活动

> ID：16177727
> 
> 赞同：0
> 
> 时间：2013-04-23T19:35:01.210
> 
> 标签：java, android, actionbarsherlock

我正在开发一个使用 ActionBarSherlock 作为操作栏的应用程序。我想在所有操作中固定此操作栏，并希望启动在此操作栏下方生成的任何活动。

就像，如果用户点击任何操作栏项目，下一个活动应该呈现在它的正下方（在演示区域中）。

我还希望在操作栏下方有滑动标签（这不应该是我们操作栏的一部分，而是应该通过单击任何操作栏项目来生成）。

如果有人可以分享我开始的任何指示，我将不胜感激。

我阅读了许多文档并尝试了一些示例，但是我没有在操作栏下方呈现新活动，而是提出了在整个屏幕上启动的活动！

请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T19:40:24.300

您不能将[Activity](http://developer.android.com/reference/android/app/Activity.html)放在另一个 Activity 中

您可以在 Activity 中使用[Fragment](http://developer.android.com/guide/components/fragments.html)并将现有的 Fragment 替换为另一个。

如果您的目标是 API <11，那么您需要使用包含[支持 Fragments](http://developer.android.com/reference/android/support/v4/app/Fragment.html)[的FragmentActivity](http://developer.android.com/reference/android/support/v4/app/FragmentActivity.html)

因此，使用您的滑动选项卡示例，这些选项卡将是由处理[ViewPager的适配器管理的片段](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)

[这是 ActionBarSherlock 示例中的一个示例](https://github.com/JakeWharton/ActionBarSherlock/blob/master/actionbarsherlock-samples/fragments/src/com/actionbarsherlock/sample/fragments/FragmentTabsPager.java)

我粘贴静态内部类只是为了确保在链接失效时将其保留在这里

```
public static class TabsAdapter extends FragmentPagerAdapter
        implements TabHost.OnTabChangeListener, ViewPager.OnPageChangeListener {
    private final Context mContext;
    private final TabHost mTabHost;
    private final ViewPager mViewPager;
    private final ArrayList<TabInfo> mTabs = new ArrayList<TabInfo>();

    static final class TabInfo {
        private final String tag;
        private final Class<?> clss;
        private final Bundle args;

        TabInfo(String _tag, Class<?> _class, Bundle _args) {
            tag = _tag;
            clss = _class;
            args = _args;
        }
    }

    static class DummyTabFactory implements TabHost.TabContentFactory {
        private final Context mContext;

        public DummyTabFactory(Context context) {
            mContext = context;
        }

        @Override
        public View createTabContent(String tag) {
            View v = new View(mContext);
            v.setMinimumWidth(0);
            v.setMinimumHeight(0);
            return v;
        }
    }

    public TabsAdapter(FragmentActivity activity, TabHost tabHost, ViewPager pager) {
        super(activity.getSupportFragmentManager());
        mContext = activity;
        mTabHost = tabHost;
        mViewPager = pager;
        mTabHost.setOnTabChangedListener(this);
        mViewPager.setAdapter(this);
        mViewPager.setOnPageChangeListener(this);
    }

    public void addTab(TabHost.TabSpec tabSpec, Class<?> clss, Bundle args) {
        tabSpec.setContent(new DummyTabFactory(mContext));
        String tag = tabSpec.getTag();

        TabInfo info = new TabInfo(tag, clss, args);
        mTabs.add(info);
        mTabHost.addTab(tabSpec);
        notifyDataSetChanged();
    }

    @Override
    public int getCount() {
        return mTabs.size();
    }

    @Override
    public Fragment getItem(int position) {
        TabInfo info = mTabs.get(position);
        return Fragment.instantiate(mContext, info.clss.getName(), info.args);
    }

    @Override
    public void onTabChanged(String tabId) {
        int position = mTabHost.getCurrentTab();
        mViewPager.setCurrentItem(position);
    }

    @Override
    public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
    }

    @Override
    public void onPageSelected(int position) {
        // Unfortunately when TabHost changes the current tab, it kindly
        // also takes care of putting focus on it when not in touch mode.
        // The jerk.
        // This hack tries to prevent this from pulling focus out of our
        // ViewPager.
        TabWidget widget = mTabHost.getTabWidget();
        int oldFocusability = widget.getDescendantFocusability();
        widget.setDescendantFocusability(ViewGroup.FOCUS_BLOCK_DESCENDANTS);
        mTabHost.setCurrentTab(position);
        widget.setDescendantFocusability(oldFocusability);
    }

    @Override
    public void onPageScrollStateChanged(int state) {
    }
} 
```

# meteor - 确定集合是否准备就绪并且文档是否存在

> ID：16177728
> 
> 赞同：1
> 
> 时间：2013-04-23T19:35:08.443
> 
> 标签：meteor

假设我有一个页面显示来自 mongodb 集合的记录：

```
var item = Items.findOne({name: documentName});
Session.set('item', item); 
```

当集合准备好并找到结果时，这将使用该项目更新我的模板。现在我可以假设当 Session.get('item') 未定义时，数据正在加载并向用户显示加载图形或消息。但是，如果文档不存在，我不想无限期地向用户显示加载消息，我宁愿显示“未找到”消息。如果记录根本不存在，我如何确定并通知用户？

我想过：

1.  将项目会话变量设置为“已加载”
2.  在具有该值时显示加载消息
3.  然后在集合返回未定义或文档时显示项目或“未找到”消息。

但是，这不起作用，因为查询将立即返回 undefined 直到集合可用，然后如果查询完成并且值仍然未定义，则没有任何更改并且会话变量不会更新。

我觉得我错过了一些就在我面前的把戏！有人有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T06:27:01.617

您的解决方案应该适用于显示“加载”消息。

要显示“未找到”消息，请检查模板助手中查询结果的类型。结果将是`undefined`集合中没有记录时。

```
 Template.items.item = function(){
      var item = Items.findOne({name: documentName});
      if(typeof item == 'undefined'){
         return null;
      }
      else{
         return item;
      }
    } 
```

在 html 代码中，使用`{{#if}}..{{else}}..{{/if}}`块助手作为：

```
 {{#if item}}
       <!-- Display your template data here -->
    {{else}}
       <!-- The template helper returned null, so display message here -->
       <span>NOT FOUND</span>           
    {{/if}} 
```

希望这可以帮助。

# c# - 选择由查询填充的未绑定数据网格视图的行

> ID：16177729
> 
> 赞同：1
> 
> 时间：2013-04-23T19:35:17.263
> 
> 标签：c#, winforms, datagridview

我有一个填充 DGV 的查询，看起来像

```
private void textBox6_Leave(object sender, EventArgs e)
    {
        DataClasses3DataContext db = new DataClasses3DataContext();

        int matchedAdd = (from c in db.GetTable<prop>()
                          where c.HOUSE_NO.Contains(textBox1.Text) && c.Direction.Contains(textBox2.Text) && c.street.Contains(textBox3.Text) && c.SUFF.Contains(textBox4.Text)
                          select c.ID).SingleOrDefault();

        var before = (from c in db.GetTable<prop>()
                      where c.ID < matchedAdd
                      orderby c.PARCEL descending
                      select c).Take(6);

        var after = (from c in db.GetTable<prop>()
                     where c.ID > matchedAdd
                     orderby c.PARCEL
                     select c).Take(6);

        var endResult = before.Concat(after);

        dgvBRT.DataSource = endResult;

    } 
```

在由该查询填充后，我需要能够从 DGV 中选择一行并打开 BRTDetail。这是我第一次不得不使用未绑定的网格。我通常使用的代码如下。显然它不起作用，因为此时 BRTDataSet 无关紧要。在这种情况下如何选择一行？

```
 private void dgvBRT_DoubleClick(object sender, EventArgs e)
    {
        System.Data.DataRowView SelectedRowView;
        BRTDataSet.propRow SelectedRow;

        SelectedRowView = (System.Data.DataRowView)propBindingSource.Current;
        SelectedRow = (BRTDataSet.propRow)SelectedRowView.Row;

        frmBRTDetail BRTDetail = new frmBRTDetail(this);
        BRTDetail.LoadBRTNumberKey(SelectedRow.PARCEL, null);
        BRTDetail.LoadBldgKey(SelectedRow.BLDG_CD, null);
        BRTDetail.Show();

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T20:04:46.570

How bout this create an template field named something :

```
 <ItemTemplate>
  <asp:LinkButton ID="link_button" runat="server" Text="Select" OnClick="link_button_Click"> </asp:LinkButton>
   </ItemTemplate> 
```

Then in your code behind for the click event you do this :

```
 protected void link_button_Click(object sender, EventArgs e)
   {
       GridViewRow clickedRow = ((LinkButton)sender).NamingContainer as GridViewRow;

       // this selects your row and you can access the controls of your grid. 

   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T19:40:52.840

好吧，我想通了。我就是这样做的。

```
private void dgvBRT_DoubleClick(object sender, EventArgs e)
        {

         if (dgvBRT.SelectedCells.Count > 0)
            {
             int selectedrowindex = dgvBRT.SelectedCells[0].RowIndex;

             DataGridViewRow selectedRow = dgvBRT.Rows[selectedrowindex];

             string BRTNumber = Convert.ToString(selectedRow.Cells["BRTNumber"].Value);  
             // Open selected row

              frmBRTDetail BRTDetail = new frmBRTDetail(this);
              BRTDetail.LoadBRTNumberKey(BRTNumber, null);
              BRTDetail.Show();
            }
        } 
```

# struts-1 - Struts 1 表单验证

> ID：16177731
> 
> 赞同：0
> 
> 时间：2013-04-23T19:35:20.377
> 
> 标签：struts-1

我在遗留项目中使用 struts 1。我想验证表格。我读过关于那的好 [文章](http://www.mkyong.com/struts/struts-file-upload-example/)。但是我不明白如果表单的 validate 方法返回非空 ActionErrors，struts 会做什么。我已经指定`validate="true"`并`input="somepage.jsp"`在行动，但如果我的表单验证没有通过，我会得到一个空白页。据我了解，它必须停留在输入中指定的页面？我对吗？

**编辑**

```
 <action path="/struts/BlaBlaAction" 
                type="com.example.BlaBlaAction"
                name="BlaBlaForm"
                validate="true"
                scope="request"
                input="/struts/blablainput.jsp">
              <forward name="someaction" path="/struts/AnotherAction.do"/>
              <forward name="error" path="/error.html" redirect="true"/>
 </action> 
```

文件夹 struts 位于我的应用程序的根目录中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T19:55:02.493

您还需要`<html:errors/>`在 somepage.jsp 中使用标记显示验证错误

如果表单的 validate 方法返回非空 ActionErrors，Struts 将重定向到您定义为输入的 JSP。然后，如果您`<html:errors>`在输入 JSP 中有，所有的 ActionErrors 都会被迭代并显示出来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T19:57:46.153

您可能忘记了struts XML配置**中的“失败”转发。**看这个例子：

```
<action path="/LogonSubmit" type="app.jcj.LogonAction" name="logonForm" 
           scope="request" validate="true" input="/pages/Logon.jsp">
    <forward name="success" path="/pages/Welcome.jsp"/>
    <forward name="failure" path="/pages/Logon.jsp"/>
</action> 
```

# javascript - 即使单击确认框中的“取消”按钮，窗口也会关闭

> ID：16177739
> 
> 赞同：1
> 
> 时间：2013-04-23T19:35:41.460
> 
> 标签：javascript

在我的网站中，我在新窗口中进行了考试，我希望如果用户关闭此窗口，如果他在确认时按“确定”，他将被重定向到其他页面。但如果按下“取消”，他应该留在那里。我正在使用的javascript如下。

```
/**
* This javascript file checks for the brower/browser tab action.
* It is based on the file menstioned by Daniel Melo.
* Refer: http://stackoverflow.com/questions/1921941/close-kill-the-session-when-the-browser-or-tab-is-closed
*/

var validNavigation = false;

function endSession() {

 $choice = confirm("You will exit your CSA test. Are you sure you want to close the window?");

 if ($choice)
     window.open('Result.aspx', '_blank', 'toolbar=0, scrollbars=1');
}

function wireUpEvents() {

window.onbeforeunload = function () {
    if (!validNavigation) {
        endSession();
    }
}

// Attach the event keypress to exclude the F5 refresh
$(document).bind('keypress', function (e) {
    if (e.keyCode == 116) {
        validNavigation = true;
    }
});

// Attach the event click for all links in the page
$("a").bind("click", function () {
    validNavigation = true;
});

// Attach the event submit for all forms in the page
$("form").bind("submit", function () {
    validNavigation = true;
});

// Attach the event click for all inputs in the page
$("input[type=submit]").bind("click", function () {
    validNavigation = true;
});

}

$(document).ready(function () {
wireUpEvents();
}); 
```

在这里单击“确定”按钮时，“Result.aspx”窗口会成功打开，但这里的问题是，如果用户在确认框中单击“取消”，那么窗口也会关闭。请告诉我我哪里出错了或任何替代方法。任何形式的任何帮助将不胜感激。提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:37:08.553

您实际上无法阻止用户离开您的页面。最后一个对话框（由浏览器控制），询问他们是想留在这个页面上还是离开，取决于他们。

您的使用`confirm()`只是为用户提供了一个对话框，您可以从中进行选择，但对离开的页面没有影响。如果您从 中返回一个值`window.onbeforeunload`，它会通过我提到的最后一个对话框提示用户，但是您无法捕获他们的选择，也无法控制它。

您无法真正阻止用户离开您的页面。

# c++ - 从线程访问对象（使用引用或指针）

> ID：16177745
> 
> 赞同：0
> 
> 时间：2013-04-23T19:36:10.347
> 
> 标签：c++, multithreading, object, pointers, reference

我有一个 C++ 进程，它初始化一个存储在`std::map`一些数据中的类，然后是另一个类——将在一个线程中执行——我将第一个类的指针（我也尝试过引用）传递给它，因为它将需要访问`std::map`（使用getter）的内容。

发生的事情是，`std::map`当我从主线程更新第一类的数据时，它永远不会更新。

我的问题是我的问题导致我使用线程以便复制对象然后没有收到更新？以及如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T19:49:38.370

不，`std::map`是一个普通的容器，与线程无关。很可能您的线程之间存在同步问题，例如一个线程在另一个线程更新映射之前或同时查看映射的竞争条件。在这些情况下可能会发生奇怪的事情，因为`std::map`当添加、更改或删除某些内容时，可能会在重新平衡树时更改许多内部指针。同时查看地图的另一个线程可能会“感到困惑”。

从任一线程访问地图时，请尝试使用信号量或互斥锁，看看是否能解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T18:19:18.760

首先感谢大家的评论（即使是没有帮助的评论）。

我终于找到了我遇到的问题。我正在使用 Boost 信号来更新包含 的类，`std::map`并且正在传递我的类实例化，而没有`&`正在处理副本。

# asp.net-mvc-3 - Modelmetadata 为外部模型填充，但不是内部模型，

> ID：16177752
> 
> 赞同：0
> 
> 时间：2013-04-23T19:36:39.933
> 
> 标签：asp.net-mvc-3, modelmetadata

我需要阅读有关如何填充模型元数据以及何时在框架中调用 OnMetadataCreated 方法的材料。当我创建一个包含嵌套视图模型的视图模型时，不会为内部视图模型的属性调用 OnMetadataCreated，而是为外部模型中的属性创建它。

我当前的解决方案通过在视图中使用反射来访问内部视图模型的属性和属性来规避这一点。（通常我会访问这些属性并在 OnMetadataCreated 中对它们进行处理。）

# reporting-services - SSRS 2008 R2 中的日期验证

> ID：16177754
> 
> 赞同：0
> 
> 时间：2013-04-23T19:36:51.700
> 
> 标签：reporting-services

我有一系列依赖于截止日期和截止日期的报告。我已经设置了参数@Date1 和@Date2。在执行查询之前，我需要确定 Date1 小于 Date2。这很重要，因为查询是...日期在@Date1 和@Date2 之间。如果@Date2 小于@Date1，则查询不会失败，它只是不返回任何结果。

我发现代码贴子说要通过转到“报告”菜单下的“报告属性”并将代码放在“代码”选项卡中来添加功能。我已经翻遍了，找不到这个。

我实际上是在 MS Visual Studio 2008 中构建报告。有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T21:05:08.287

在 VS 2008 中单击**Report** -> **Report Properties**。

![在此处输入图像描述](https://i.stack.imgur.com/9YQnv.png)

单击**代码**并将所需代码添加到**自定义代码**部分。

![在此处输入图像描述](https://i.stack.imgur.com/PoeZf.png)

# css - 导航不会像我想要的那样停留在原地

> ID：16177755
> 
> 赞同：0
> 
> 时间：2013-04-23T19:36:55.207
> 
> 标签：css, html, navigation, navbar

[1] [http://i.stack.imgur.com/tXB4G.png](http://i.stack.imgur.com/tXB4G.png) [2] [http://i.stack.imgur.com/ub3PN.png](http://i.stack.imgur.com/ub3PN.png)

第一个图像 [1] 是我**希望**导航始终保持的方式（在中间 div 的左侧居中），但如第二个图像 [2] 所示，它重叠或没有真正锁定我的信息将在主 div 的左侧...请帮助，我第一次从头开始构建网站！

HTML：

```
<div id="header" class="wrapper,class">
        <img src="images/header.png">
    </div>

    <div id="nav" class="containerleft">
            <link href='http://fonts.googleapis.com/css?family=Quicksand' rel='stylesheet' type='text/css'>
    <ul>
        <li><a href="#1">Home</a></li><br/>
        <li><a href="#2">News</a></li><br/>
        <li><a href="#3">Music</a></li><br/>
        <li><a href="#4">Videos</a></li><br/>
        <li><a href="#5">Photos</a></li><br/>
        <li><a href="#6">Store</a></li><br/>
        <li><a href="#7">Contact</a></li><br/>
    </ul>

    </div>

    <div id="main" class="center">
    testing text here in my main div!

    </div> 
```

CSS：

```
#header
{
    margin-top: 40px;
}

#nav
{
    position: absolute;
    top: 170px;
    margin-left: 20%;
    margin-right: auto;
        font-family: 'Quicksand', sans-serif;
        text-align: right;
}

#main
{
    position: relative;
    top:10px;
        background-image:url(images/main_box.png);
        background-repeat:no-repeat;
        background-position: center;
        width: 668px;
        height: 578px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T19:44:15.737

没有图像或尺寸就很难做任何事情。我认为如果你给你 #nav 一个宽度，例如`width: 300px;` 并确保它们在单独的 div 或容器中，你应该得到你正在寻找的效果。

如果你能想出一个关于 jsFiddle 的例子，我很乐意为你玩弄它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T19:56:01.633

我倾向于通过浮动 div 标签然后使用它们的宽度定位它们来做到这一点，如下所示：

[http://jsfiddle.net/QgcL9/](http://jsfiddle.net/QgcL9/)

给这些课程上课可以让您浮动它们。

```
float:left;
width: 500px; 
```

如果您确保清除浮动，则可以在页面上的任何位置正常定位元素。

这里还有一些关于这种定位的有用示例： [http ://www.barelyfitz.com/screencast/html-training/css/positioning/](http://www.barelyfitz.com/screencast/html-training/css/positioning/)

# php - 尝试手动连接

> ID：16177758
> 
> 赞同：0
> 
> 时间：2013-04-23T19:37:02.803
> 
> 标签：php, codeigniter

我有一个带有字段的表单，可以使用 CodeIgniter 连接到数据库。数据由用户在表单中填写。是否可以知道连接是否建立？

```
$drive      = $this->input->post('drive');
$hostname   = $this->input->post('hostname');
$database   = $this->input->post('database');
$username   = $this->input->post('username');
$password   = $this->input->post('password');
$base       = $this->input->post('base');

$db = array(
                'hostname' => $hostname,
                'username' => $username,
                'password' => $password,
                'database' => $database,
                'dbdriver' => $drive,
                'db_debug' => FALSE);

       $cn =  $this->load->database($db);

if ($cn) { echo 'ok'; } else {echo 'nops';} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T20:19:41.903

您正在使用 明确禁用错误消息`'db_debug' => false`，因此我认为您不会收到 CI 投诉。但是，您可以[像 Database 库一样](https://github.com/EllisLab/CodeIgniter/blob/2.1-stable/system/database/DB_driver.php#L118)进行连接测试（因为每个字段都是公共的）：

```
// your original code here
$conn_success = $cn->conn_id ? true : false; 
```

# android - Listview 未更新（通知 datasetchanged）

> ID：16177759
> 
> 赞同：0
> 
> 时间：2013-04-23T19:37:05.927
> 
> 标签：android, android-listview

我在更改“数据集”后尝试更新我的列表视图，但它没有，除非我手动刷新视图或刷新活动。这不起作用：

```
 runOnUiThread(new Runnable() {
                    public void run() {
                        entriesListAdapter.notifyDataSetChanged();
                    }  
                }); 
```

虽然这样做：

```
 handler.postDelayed(new Runnable() {
              @Override
              public void run() {
                  onCreate(null);
                    entriesListAdapter.notifyDataSetChanged();
              }
              }, 1000); 
```

但这绝对不是正确的方法。我使用 notifydatasetchanged 错误吗？

我的整个活动：打包 app.wordpress；

```
 import app.wordpress.service.FetcherService;
 import someontherimports

 public class EntriesListActivity extends ListActivity {
private static final int CONTEXTMENU_REFRESH_ID = 4;

private static final int CONTEXTMENU_MARKASREAD_ID = 6;

private static final int ACTIVITY_APPLICATIONPREFERENCES_ID = 1;

private static final Uri CANGELOG_URI = Uri.parse("http://wordpress.com");

private static final int CONTEXTMENU_MARKASUNREAD_ID = 7;

private static final int CONTEXTMENU_DELETE_ID = 8;

private static final int CONTEXTMENU_COPYURL = 9;

private static final int DIALOG_ABOUT = 7;

public static final String EXTRA_SHOWREAD = "show_read";

public static final String EXTRA_SHOWFEEDINFO = "show_feedinfo";

public static final String EXTRA_AUTORELOAD = "autoreload";

private static final String[] FEED_PROJECTION = {FeedData.FeedColumns.NAME,
    FeedData.FeedColumns.URL,
    FeedData.FeedColumns.ICON
};

private Uri uri;

private EntriesListAdapter entriesListAdapter;

private byte[] iconBytes;

@Override
protected void onCreate(Bundle savedInstanceState) {
    if (MainTabActivity.isLightTheme(this)) {
        setTheme(R.style.Theme_Light);
    }

    super.onCreate(savedInstanceState);

    String title = null;

    iconBytes = null;

    Intent intent = getIntent();

    long feedId = intent.getLongExtra(FeedData.FeedColumns._ID, 0);

    if (feedId > 0) {
        Cursor cursor = getContentResolver().query(FeedData.FeedColumns.CONTENT_URI(feedId), FEED_PROJECTION, null, null, null);

        if (cursor.moveToFirst()) {
            title = cursor.isNull(0) ? cursor.getString(1) : cursor.getString(0);
            iconBytes = cursor.getBlob(2);
        }
        cursor.close();
    }

    if (!MainTabActivity.POSTGINGERBREAD && iconBytes != null && iconBytes.length > 0) { // we cannot insert the icon here because it would be overwritten, but we have to reserve the icon here
        if (!requestWindowFeature(Window.FEATURE_LEFT_ICON)) {
            iconBytes = null;
        }
    }

    setContentView(R.layout.entries);

    uri = intent.getData();

    entriesListAdapter = new EntriesListAdapter(this, uri, intent.getBooleanExtra(EXTRA_SHOWFEEDINFO, false), intent.getBooleanExtra(EXTRA_AUTORELOAD, false));
    setListAdapter(entriesListAdapter);

    if (title != null) {
        setTitle(title);
    }
    if (iconBytes != null && iconBytes.length > 0) {
        int bitmapSizeInDip = (int)TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, 24f, getResources().getDisplayMetrics());
        Bitmap bitmap = BitmapFactory.decodeByteArray(iconBytes, 0, iconBytes.length);
        if (bitmap != null) {
            if (bitmap.getHeight() != bitmapSizeInDip) {
                bitmap = Bitmap.createScaledBitmap(bitmap, bitmapSizeInDip, bitmapSizeInDip, false);
            }

            if (MainTabActivity.POSTGINGERBREAD) {
                CompatibilityHelper.setActionBarDrawable(this, new BitmapDrawable(bitmap));
            } else {
                setFeatureDrawable(Window.FEATURE_LEFT_ICON, new BitmapDrawable(bitmap));
            }
        }
    }
    if (RSSOverview.notificationManager != null) {
        RSSOverview.notificationManager.cancel(0);
    }

    getListView().setOnCreateContextMenuListener(new OnCreateContextMenuListener() {
        public void onCreateContextMenu(ContextMenu menu, View view, ContextMenuInfo menuInfo) {
            menu.setHeaderTitle(((TextView) ((AdapterView.AdapterContextMenuInfo) menuInfo).targetView.findViewById(android.R.id.text1)).getText());
            menu.add(0, CONTEXTMENU_REFRESH_ID, Menu.NONE, R.string.contextmenu_refresh);
            menu.add(0, CONTEXTMENU_MARKASREAD_ID, Menu.NONE, R.string.contextmenu_markasread).setIcon(android.R.drawable.ic_menu_manage);
            menu.add(0, CONTEXTMENU_MARKASUNREAD_ID, Menu.NONE, R.string.contextmenu_markasunread).setIcon(android.R.drawable.ic_menu_manage);
            menu.add(0, CONTEXTMENU_DELETE_ID, Menu.NONE, R.string.contextmenu_delete).setIcon(android.R.drawable.ic_menu_delete);
            menu.add(0, CONTEXTMENU_COPYURL, Menu.NONE, R.string.contextmenu_copyurl).setIcon(android.R.drawable.ic_menu_share);
        }
    });
}

@Override
protected void onListItemClick(ListView listView, View view, int position, long id) {
    TextView textView = (TextView) view.findViewById(android.R.id.text1);

    textView.setTypeface(Typeface.DEFAULT);
    textView.setEnabled(false);
    view.findViewById(android.R.id.text2).setEnabled(false);
    entriesListAdapter.neutralizeReadState();
    startActivity(new Intent(Intent.ACTION_VIEW, ContentUris.withAppendedId(uri, id)).putExtra(EXTRA_SHOWREAD, entriesListAdapter.isShowRead()).putExtra(FeedData.FeedColumns.ICON, iconBytes));
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.entrylist, menu);
    return true;
}

@Override
public boolean onPrepareOptionsMenu(Menu menu) {
    menu.setGroupVisible(R.id.menu_group_0, entriesListAdapter.getCount() > 0);
    return true;
}

public boolean onMenuItemSelected(int featureId, MenuItem item) {
    switch (item.getItemId()) {
        case R.id.menu_markasread: {
            new Thread() { // the update process takes some time
                public void run() {
                    getContentResolver().update(uri, RSSOverview.getReadContentValues(), null, null);
                }
            }.start();
            entriesListAdapter.markAsRead();
            break;
        }
        case R.id.menu_markasunread: {
            new Thread() { // the update process takes some time
                public void run() {
                    getContentResolver().update(uri, RSSOverview.getUnreadContentValues(), null, null);
                }
            }.start();
            entriesListAdapter.markAsUnread();
            break;
        }
        case R.id.menu_hideread: {
            if (item.isChecked()) {
                item.setChecked(false).setTitle(R.string.contextmenu_hideread).setIcon(android.R.drawable.ic_menu_close_clear_cancel);
                entriesListAdapter.showRead(true);
            } else {
                item.setChecked(true).setTitle(R.string.contextmenu_showread).setIcon(android.R.drawable.ic_menu_view);
                entriesListAdapter.showRead(false);
            }
            break;
        }
        case R.id.menu_deleteread: {
            new Thread() { // the delete process takes some time
                public void run() {
                    String selection = Strings.READDATE_GREATERZERO+Strings.DB_AND+" ("+Strings.DB_EXCUDEFAVORITE+")";

                    getContentResolver().delete(uri, selection, null);
                    FeedData.deletePicturesOfFeed(EntriesListActivity.this, uri, selection);
                    runOnUiThread(new Runnable() {
                        public void run() {
                            entriesListAdapter.getCursor().requery();
                        }
                    });
                }
            }.start();
            break;
        }
        case R.id.menu_deleteallentries: {
            Builder builder = new AlertDialog.Builder(this);

            builder.setIcon(android.R.drawable.ic_dialog_alert);
            builder.setTitle(R.string.contextmenu_deleteallentries);
            builder.setMessage(R.string.question_areyousure);
            builder.setPositiveButton(android.R.string.yes, new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int which) {
                    new Thread() {
                        public void run() {
                            getContentResolver().delete(uri, Strings.DB_EXCUDEFAVORITE, null);
                            runOnUiThread(new Runnable() {
                                public void run() {
                                    entriesListAdapter.getCursor().requery();
                                }
                            });
                        }
                    }.start();
                }
            });
            builder.setNegativeButton(android.R.string.no, null);
            builder.show();
            break;
        }
        case CONTEXTMENU_MARKASREAD_ID: {
            long id = ((AdapterView.AdapterContextMenuInfo) item.getMenuInfo()).id;

            getContentResolver().update(ContentUris.withAppendedId(uri, id), RSSOverview.getReadContentValues(), null, null);
            entriesListAdapter.markAsRead(id);
            break;
        }
        case CONTEXTMENU_MARKASUNREAD_ID: {
            long id = ((AdapterView.AdapterContextMenuInfo) item.getMenuInfo()).id;

            getContentResolver().update(ContentUris.withAppendedId(uri, id), RSSOverview.getUnreadContentValues(), null, null);
            entriesListAdapter.markAsUnread(id);
            break;
        }
        case CONTEXTMENU_DELETE_ID: {
            long id = ((AdapterView.AdapterContextMenuInfo) item.getMenuInfo()).id;

            getContentResolver().delete(ContentUris.withAppendedId(uri, id), null, null);
            FeedData.deletePicturesOfEntry(Long.toString(id));
            entriesListAdapter.getCursor().requery(); // he have no other choice
            break;
        }
        case CONTEXTMENU_COPYURL: {
            ((ClipboardManager) getSystemService(CLIPBOARD_SERVICE)).setText(((AdapterView.AdapterContextMenuInfo) item.getMenuInfo()).targetView.getTag().toString());
            break;
        }
        case R.id.menu_settings: {
            startActivityForResult(new Intent(this, ApplicationPreferencesActivity.class), ACTIVITY_APPLICATIONPREFERENCES_ID);
            break;
        }
        case R.id.menu_about: {
            showDialog(DIALOG_ABOUT);
            break;
        }

        case R.id.menu_refresh: {
            new Thread() {
                  public void run() {
                    sendBroadcast(new Intent(Strings.ACTION_REFRESHFEEDS).putExtra(Strings.SETTINGS_OVERRIDEWIFIONLY, PreferenceManager.getDefaultSharedPreferences(EntriesListActivity.this).getBoolean(Strings.SETTINGS_OVERRIDEWIFIONLY, false)));
                  }
                }.start();
                runOnUiThread(new Runnable() {
                    public void run() {
                        entriesListAdapter.notifyDataSetChanged();
                    }  
                });

            break;
        }

    }
    return true;
}

@Override
protected void onResume()
{
    super.onResume();
    setProgressBarIndeterminateVisibility(isCurrentlyRefreshing());
    registerReceiver(refreshReceiver, new IntentFilter("app.wordpress.REFRESH"));
}

@Override
protected void onPause()
{
    unregisterReceiver(refreshReceiver);
    super.onPause();
}

private BroadcastReceiver refreshReceiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        setProgressBarIndeterminateVisibility(true);
    }
};

@Override
protected Dialog onCreateDialog(int id) {
    Dialog dialog;

    switch (id) {

        case DIALOG_ABOUT: {
            AlertDialog.Builder builder = new AlertDialog.Builder(this);

            builder.setIcon(android.R.drawable.ic_dialog_info);     
            builder.setTitle(R.string.menu_about);
            MainTabActivity.INSTANCE.setupLicenseText(builder);         
            builder.setPositiveButton(android.R.string.ok, new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int which) {
                    dialog.cancel();
                }
            });
            builder.setNeutralButton(R.string.changelog, new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int which) {
                    startActivity(new Intent(Intent.ACTION_VIEW, CANGELOG_URI));
                }
            });
            return builder.create();
        }
        default: dialog = null;
    }
    return dialog;
}
private boolean isCurrentlyRefreshing()
{
    ActivityManager manager = (ActivityManager)getSystemService(ACTIVITY_SERVICE);
    for (RunningServiceInfo service: manager.getRunningServices(Integer.MAX_VALUE)) {
        if (FetcherService.class.getName().equals(service.service.getClassName())) {
            return true;
        }
    }
    return false;
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:48:59.040

您是指 Activity 中的这段代码吗？

```
 case R.id.menu_refresh: {
        new Thread() {
              public void run() {
                sendBroadcast(new Intent(Strings.ACTION_REFRESHFEEDS).putExtra(Strings.SETTINGS_OVERRIDEWIFIONLY, PreferenceManager.getDefaultSharedPreferences(EntriesListActivity.this).getBoolean(Strings.SETTINGS_OVERRIDEWIFIONLY, false)));
              }
            }.start();
            runOnUiThread(new Runnable() {
                public void run() {
                    entriesListAdapter.notifyDataSetChanged();
                }  
            });

        break; 
```

如果是这样，问题很可能是调用`runOnUiThread()`实际上不在`Thread`您创建的内部，而是在主线程上调用。

这段代码的结构方式，在选择刷新时，创建后台线程以触发广播`Intent`（不是必需的，顺便说一句，因为这也是一个异步过程......它立即返回）然后`notifyDataSetChanged()`立即运行（因为`runOnUiThread()`当从主线程调用只是`Runnable`立即执行）。

因此，您基本上同时发送广播和更新适配器……在此期间没有太多时间实际更改任何内容。如果您希望`sendBroadcast()`在某个接收器处理完之后阻塞并返回，情况并非如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T19:40:33.963

在你的 contentProvider 中，你应该调用[contentResolver.notifyChange](http://developer.android.com/reference/android/content/ContentResolver.html#notifyChange%28android.net.Uri,%20android.database.ContentObserver%29)来通知适配器 contentResolver 提供的数据发生了变化，这将为你更新 listView。

# java - Javadoc中的多个自定义标签分别显示？

> ID：16177760
> 
> 赞同：2
> 
> 时间：2013-04-23T19:37:06.820
> 
> 标签：java, ant, javadoc

在构建我们的文档时，我们决定使用一些自定义标签在类级别添加详细信息，并利用 Ant 任务进行构建。这是 ant 任务目标的示例：

```
<target name="doc">
    <javadoc 
        access="public" 
        additionalparam=" -tag SequenceStep:a:&quot;Sequence Step:&quot;"
        author="true" 
        destdir="ant/doc" 
        doctitle="Test"
        nodeprecated="false" 
        nodeprecatedlist="false" 
        noindex="true" 
        nonavbar="true" 
        notree="true" 
        source="1.6" 
        sourcepath="${src.dir};${test.dir}" 
        splitindex="false" 
        use="false" 
        version="true"
        private="on"
        failonerror="false">
            <classpath path="${full.test.classpath}" />
    </javadoc> 
```

在我一直在测试的类的内部，这是一个示例 Javadoc：

```
/**
 * @SequenceStep {@link package.DummyClass#methodOne()} Method one specifics
 * 
 * @SequenceStep {@link package.DummyClass#methodTwo()} Method two specifics
 */ 
```

我生成的 Javadoc 给了我一个如下所示的部分：

> **序列步骤：**
> 
> methodOne() 方法一细节，methodTwo() 方法二细节

我的期望是得到与@param 工作方式更等效的东西，每次使用标签时都列出一个。

如果可能的话，任何人都可以就如何获得以下输出之一提供建议吗？

> **序列步骤：**
> 
> methodOne() 方法一细节
> 
> methodTwo() 方法二细节

或者

> **序列步骤：**
> 
> methodOne() 方法一细节
> 
> **序列步骤：**
> 
> methodTwo() 方法二细节

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T19:55:17.947

试试这个：

```
/**
 * @SequenceStep 
 * <p>{@link package.DummyClass#methodOne()} Method one specifics</p>
 * <p>{@link package.DummyClass#methodTwo()} Method two specifics</p>
 */ 
```

# c# - iTextSharp：RestoreState 后剪切路径丢失

> ID：16177764
> 
> 赞同：1
> 
> 时间：2013-04-23T19:37:10.877
> 
> 标签：c#, pdf, itextsharp, itext

我正在使用 iTextSharp 生成 PDF 文件。我遇到了一个问题，如果我在做之后`SaveState()`，那么我的剪切路径会丢失并且不会剪切进一步的绘图。`RestoreState()``Clip()`

我不知道这是否是 iText/iTextSharp 中的错误，或者我做错了什么。下面是示例 C# 代码。

```
using (var fileStream = System.IO.File.OpenWrite(@"Problem.PDF"))
{
    var doc = new iTextSharp.text.Document();
    var writer = iTextSharp.text.pdf.PdfWriter.GetInstance(doc, fileStream);

    doc.Open();

    var content = writer.DirectContent;

    // Stroke where the blue box will be drawn
    content.NewPath();
    content.MoveTo(250, 250);
    content.LineTo(250, 350);
    content.LineTo(350, 350);
    content.LineTo(350, 250);
    content.LineTo(250, 250);
    content.SetRGBColorStroke(0, 0, 255);
    content.Stroke();

    // Stroke where the red box will be drawn
    content.NewPath();
    content.MoveTo(250, 150);
    content.LineTo(250, 250);
    content.LineTo(350, 250);
    content.LineTo(350, 150);
    content.LineTo(250, 150);
    content.SetRGBColorStroke(255, 0, 0);
    content.Stroke();

    // Set the clipping box
    content.NewPath();
    content.MoveTo(200, 200);
    content.LineTo(200, 300);
    content.LineTo(300, 300);
    content.LineTo(300, 200);
    content.LineTo(200, 200);
    content.Clip();

    // Save state, then fill the blue box (will be clipped)
    content.SaveState();

    content.NewPath();
    content.MoveTo(250, 250);
    content.LineTo(250, 350);
    content.LineTo(350, 350);
    content.LineTo(350, 250);
    content.LineTo(250, 250);
    content.SetRGBColorFill(0, 0, 255);
    content.Fill();

    // Restore state
    content.RestoreState();

    // Save state again, then fill the red box (will not be clipped... why not?)
    content.SaveState();

    content.NewPath();
    content.MoveTo(250, 150);
    content.LineTo(250, 250);
    content.LineTo(350, 250);
    content.LineTo(350, 150);
    content.LineTo(250, 150);
    content.SetRGBColorFill(255, 0, 0);
    content.Fill();

    content.RestoreState();

    doc.Close();
} 
```

在上面的代码中，我用一个红色的框和一个蓝色的框来表示剪切框将被绘制在哪里（用于验证）。那些被描边的盒子不应该被剪掉。填充的蓝色框被正确剪裁。 **红色的填充框没有被剪掉，但应该是我的理解。**

我已添加`ClosePath()`到各种路径（剪切、填充、描边等），而对结果没有任何更改。

由于设置了各种 gstate 值（不透明度、混合模式等），我需要在`SaveState()/RestoreState()`之后进行`Clip()`

我已经使用 iTextSharp 5.5.3 和 LGPL 版本 4.1.6 进行了测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:37:53.200

问题是您认为这`NewPath()`意味着“我想开始绘制一条新路径，这是我的坐标”。相反，它更多地意味着“我已经完成了我的路径，任何进一步的操作员都应该开始一条新路径。或者从规范：

> 结束路径对象而不填充或抚摸它。这个操作符应该是一个路径绘制无操作，主要用于改变当前剪切路径的副作用（见 8.5.4，“剪切路径操作符”）。

您几乎可以摆脱所有`NewPath()`呼叫，除了最需要的呼叫，即在呼叫后直接呼叫`Clip()`

```
content.Clip();
content.NewPath(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T06:58:21.003

这不是 iText 中的错误，也不是任何版本的 iTextSharp 中的错误。您几乎手动地在运算符之后编写 PDF 语法运算符。

让我们看一下 ISO-32000-1，第 8.5.4 节，标题为“剪切路径运算符”，更具体地说，在注 2 中。我引用：

> 由于剪切路径是图形状态的一部分，它的效果可以通过在一对`q`和`Q`运算符之间封闭剪切路径的修改和那些对象的绘制来定位到特定的图形对象（参见 8.4.2，“图形状态堆栈”）。运算符的执行`Q`会导致剪切路径恢复为`q`修改剪切路径之前运算符保存的值。

如果您想知道上述定义中的`q`and运算符是什么：是*保存状态*运算符，是*恢复状态*运算符。`Q``q`*`Q`*

 **我必须承认发生了一些奇怪的事情。人们会期望剪切路径在第一个之后仍然处于活动状态`RestoreState()`。如果此语法未正确呈现，则呈现语法的查看器可能会通过丢弃剪切路径来做错事......**

# php - 通过包含用户代理的哈希保护 PHP 会话不再适用于 IE10

> ID：16177767
> 
> 赞同：0
> 
> 时间：2013-04-23T19:37:33.970
> 
> 标签：php, session, security, user-agent

我在 PHP 中有一个会话管理类，每次加载会话时都会重新生成一个安全哈希，以防止会话劫持。最近，我遇到了一些抱怨，即使用 IE 10 的用户不断被注销。我已经将此问题追溯到 IE10 + 未知插件的可能问题，导致用户代理从一个页面加载到下一个页面加载略有不同。我没有证据证明这确实发生了，因为我无法重现它，但如果出现这种情况，这会中断会话是有道理的，因为即使浏览器用户代理字符串中的一个字符发生更改也会导致生成无效的安全哈希，从而导致注销。

我的问题很简单：假设上述情况属实，还有哪些其他值可以用来代替用户代理。这必须是某种可能因用户而异的常量字符串，并且必须由用户提供。起初我打算使用数据库中用户密码的散列版本，但后来我意识到这不好，因为它不是由用户提供的，因此在发生劫持尝试时将保持“正确”。

我知道 IP 不好，因为这可能会在整个浏览会话期间根据用户的本地网络设置而改变。我真的不确定是否`X-Forwarded-For`可靠，但有些事情告诉我它不可靠。

也许最好的解决方案是设置一些更高级别的浏览器检测，然后使用简化的浏览器名称，以便 UA 字符串中的细微变化不会影响哈希中使用的字符串......

无论如何，我只是希望对此有所了解，希望你们中的一些人对我有所帮助：P

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T19:54:09.253

我只是看了一下[PHP get_browser()](http://php.net/manual/en/function.get-browser.php)并决定最好只使用这个函数的派生字符串，这样对用户代理的轻微警告就不会中断会话：

```
// get browser data
$browser = get_browser();

// create security hash
// Other stuff is done here that I omitted from this post for security reasons :)
$_SESSION["security_hash"] = sha1($static_key . $dynamic_key . $browser->platform . $browser->browser . $browser->version); 
```

# sql-server - 程序集配置 CLR 存储过程

> ID：16177769
> 
> 赞同：3
> 
> 时间：2013-04-23T19:37:49.683
> 
> 标签：sql-server, stored-procedures, clr

是否可以有一个用于 CLR 存储过程的 app.config 文件。只是为了可以在配置文件中指定更多选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T19:40:46.920

我不这么认为。进程是sql server。

我建议使用您需要的数据创建一个配置表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-15T10:22:16.093

对于 SQL2008 和 2012，您可以在 /BINN 文件夹中创建一个配置文件，其名称为`sqlservr.exe.config`. 在 SQL2014 中，该功能似乎消失了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T20:17:24.343

您需要将配置放入`sqlservr.exe.config`，例如。[从 SQL CLR 访问应用程序配置设置](http://geekswithblogs.net/cicorias/archive/2006/05/01/76835.aspx)。这是一个坏主意，因为数据库是移动的，它们通过备份/恢复、分离/附加以及最重要的 HA 解决方案（如日志传送和镜像）进行传输。在每种情况下，配置设置都会丢失，因为 .config 文件不会与数据库一起传输。

正如 Daniel 建议的那样，最好的解决方案是使用您可以使用的非常强大的存储来存储配置信息：表。

# javascript - 尝试使用 .load() 从滑块中拉入多个链接

> ID：16177771
> 
> 赞同：0
> 
> 时间：2013-04-23T19:37:53.673
> 
> 标签：javascript, jquery

我对 jquery 真的很陌生，我正在尝试通过编码学习新事物。我有一个滑块处理 5 个从左到右滑动的主题。对于该滑块中的 5 个项目中的每一个，内部都有一个指向不同网页的链接，我想使用 .load() 方法将内容引入空白 div。

除了图片不工作和滑块部分不滚动之外，这就是我想要做的。

任何帮助将不胜感激，为我指明正确的方向。[代码在这里](http://jsfiddle.net/6cuam/)

```
<script>
$(document).ready(function() {

    $("#te").click(function(evt) {
        $('#news').empty().load('ppv_ons.html #ppv');
        evt.preventDefault();
    }); // end click

});  // end ready   
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T20:23:28.487

你可以得到你的内容

**$(document).ready(function() {
 $("#te").click(function(evt) {
   $('#news').empty();
    $('#news').load($( '#ppv').html());
    evt.preventDefault();
  });
});** 

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T20:27:54.740

我制作了 HTML：

```
<div class="link" id="te"><a href="ppv_wm.html" target="blank">Find out more</a></div> 
```

进入

```
<div class="link"><a id="te" href="ppv_wm.html" target="blank">Find out more</a></div> 
```

并将 jQuery 更新为如下所示：

```
$(document).ready(function() {
  $("#te").click(function(evt) {
    evt.preventDefault();
    $('#news').empty().load('ppv_ons.html #ppv');
  });
}); // end ready 
```

JSFIDDLE：http: [//jsfiddle.net/6cuam/8/](http://jsfiddle.net/6cuam/8/)

# opencl - OpenCL 兼容性无处不在？

> ID：16177776
> 
> 赞同：0
> 
> 时间：2013-04-23T19:38:04.917
> 
> 标签：opencl

如果我写一个需要OpenGL和OpenCL的桌面应用程序（以及两者之间的通信--基于opencl计算的渲染），用户将无法使用它的情况是什么？在过去的 3 年中，我们是否已经到了几乎所有台式机和笔记本电脑都可以使用 OpenCL 的地步？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T13:39:27.997

所有最近的独立 GPU 都支持 OpenCL，AMD APU 和 CPU 也是如此。使用 AMD APP SDK 可以支持所有 Intel CPU。英特尔的 OpenCL SDK 对其支持的 CPU 和英特尔 GPU 有一些限制。因此，如果没有支持的 GPU 可用，您的应用程序将始终能够回退到使用 CPU。我还没有遇到没有 OpenGL 的桌面。如果一切都安装正确，那么你不应该有任何问题。

您最大的问题将来自 OpenCL 和 OpenGL 实现中的驱动程序错误 - 我和我的朋友多年来已经看到了很多这样的问题。

# google-chrome-extension - 触发 io chrome 扩展似乎不起作用

> ID：16177777
> 
> 赞同：0
> 
> 时间：2013-04-23T19:38:07.660
> 
> 标签：google-chrome-extension, trigger.io

我第一次尝试触发io。

我正在尝试使用 chrome 扩展，并最终希望在部署到 IOS 和 android 之前可以在浏览器上运行/调试（使用 chrome 开发人员工具）。

我创建了您拥有的默认应用程序 - 我可以在 IOS 模拟器上运行它。

当我在 chrome 上运行它时，我得到以下信息： 所需的步骤是：

```
1) Go to chrome:extensions in the Chrome browser
2) Make sure "developer mode" is on (top right corner)')
3) Use "Load unpacked extension" and select the folder: 
```

我已按照给出的说明进行操作，但即使我退出浏览器并重新启动它并为默认应用程序运行 forge 构建，我也会得到相同的响应。

将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T09:24:32.927

当您执行问题中列出的步骤时，是否会安装扩展程序？

请注意，要查看您的应用在 Chrome 中运行，您需要使用[按钮模块](http://docs.trigger.io/en/v1.4/modules/button.html)之类的东西...

**但是**，如果您只想查看您的应用程序在浏览器中运行以便您可以使用开发者工具，请单击“web”而不是“chrome”——它将在您的浏览器中作为 Web 应用程序打开。

# php - 使用 PHP 保存 IMAP XLS 附件

> ID：16177779
> 
> 赞同：1
> 
> 时间：2013-04-23T19:38:24.737
> 
> 标签：php, imap, xls

我编写了一个脚本来检查我的 Gmail 帐户并从邮件中提取 XLS 文件附件。我正在使用以下代码从正文中获取附件：

```
$mege = imap_fetchbody($connection,$message_number,2); 
```

正在检索该消息。以下是上述代码的输出示例：

-Apple-Mail=_9EBAFC63-4E12-4E64-A4F9-F8D5834F3523 内容传输编码：7bit 内容类型：text/html；charset=us-ascii --Apple-Mail=_9EBAFC63-4E12-4E64-A4F9-F8D5834F3523 内容处置：附件；文件名=test.xls 内容类型：应用程序/八位字节流；x-mac-type=584C5338; x-mac-creator=5843454C; x-unix-模式=0644；name="test.xls" Content-Transfer-Encoding: base64 0M8R4KGxGuEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA EAAAIQAAAAEAAAD+////AAAAAAAAAAD//////////////////////// ///////////////////////////////////////// ///////////////////////////////////////// ///////////////////////////////////////// /////////////////////////////bABpAGIAcgBpADEAHgDwAAAACACQAQAAAAIA2gcBQwBhAGwAaQBiAHIAaQAxAB4A8AAAAgAkAEA...

这是意料之中的，因为 XLS 文件是 base64 编码的。但是，当我解码消息并保存到文件时，我得到一个空的 excel 文件。但是，它是一个excel文件。

在写入文件之前，我正在使用它来解码内容：

```
$message=imap_base64($mege); 
```

我想知道我是否应该对附件做更多的事情来填充文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T20:59:47.200

您正在获取邮件的完整正文，而不仅仅是附件。缺少的是解析 MIME 结构、定位实际感兴趣的部分、从 MIME 容器中提取该部分的代码，并且仅在根据`Content-Transfer-Encoding`标头（在这种特殊情况下为您的“base64”）解码之后。你不能盲目地对整个身体进行base64解码，并希望得到一个附件作为回报。

# java - 每次方法调用从索引 0 开始返回单个数组值，每次调用递增 1。

> ID：16177780
> 
> 赞同：0
> 
> 时间：2013-04-23T19:38:31.340
> 
> 标签：java, arrays

嘿家伙，我已经搜索了网络并且很难找到这个问题的答案，所以我认为这可能是不可能的，我是否能够使用一种方法来调用单个数组变量，每次调用都从 index[0] 开始每次我调用该方法遍历整个数组时递增 1？或者有没有更好的方法来做到这一点，比如每次都删除第一个数组变量？

感谢您的帮助，请记住，我是一个初学者，只是想学习做事的最佳方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:45:41.197

据我了解，您想要类似[Iterator](http://docs.oracle.com/javase/6/docs/api/java/util/Iterator.html)的东西，这是完全可能的。这是一个例子：

```
public class IteratorTest{

    static int[] numbers = {0, 1, 2, 3, 4, 5, 6, 7, 8, 9};
    static int index = 0;

    public static void main(String[] args){
        for (int i = 0; i < 10; i++){
            System.out.println(getNext());
        }
    }

    public static int getNext(){
        return numbers[index++];
    }

} 
```

调用时会`getNext()`抛出异常，`index >= numbers.length`但这几乎是我能理解的想法。

* * *

**编辑**

我在这里有一个 ArrayIterator，我认为上面的代码会更具说教性。但是，如果 Iterator 的实现很有趣（正如@David Conrad 建议的那样），我在这里有一个：

```
public class ArrayIterator<E> implements Iterator<E>{

    private E[] elements;
    private int index;

    public ArrayIterator(E[] elements){
        this.elements = elements;
        index = 0;
    }

    @Override
    public boolean hasNext(){
        return index < elements.length;
    }

    @Override
    public E next(){
        if(!hasNext()){
            throw new NoSuchElementException("No more elements in the array.");
        }
        return elements[index++];
    }

    @Override
    public void remove(){
        throw new UnsupportedOperationException("Remove operation is not supported.");
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T19:40:05.887

你的问题有点不清楚，但我认为这是你想做的事情的要点

```
for (int i = 0; i < someArray.length; i++) {
    someFunction(someArray[i]);
} 
```

当然你需要确定`someArray`并且`someFunction`被定义。

# javascript - 如何从 FileReader 中获取数据

> ID：16177781
> 
> 赞同：0
> 
> 时间：2013-04-23T19:38:31.507
> 
> 标签：javascript, html, filereader

我需要一点关于 FileReader API 的帮助。有什么方法可以从 FileReader 外部获取数据。我有一个带有方法的“类”，其中使用 FileReader 读取图像，我想将图像数据放入类局部变量（如下面的代码所示）。

我知道 FileReader 异步工作，我的解决方案是错误的。有什么办法让它工作吗？谢谢你。

```
CanvasState.prototype.addImage = function(inputFile) {
    var file = inputFile;
    var reader = new FileReader();
    reader.onload = this.loadImageData;
    reader.readAsDataURL(file);
}

CanvasState.prototype.loadImageData = function(e) {
    this.hasImage = true;
    this.imageData = e.target.result;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:45:20.297

尝试这个：

```
CanvasState.prototype.addImage = function(inputFile) {
    var file = inputFile, self = this;
    var reader = new FileReader();
    reader.onload = function(e) {
           self.hasImage = true;
            self.imageData = e.target.result;
       };

    reader.readAsDataURL(file);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-15T22:28:07.093

这是`this`在函数中设置方式的问题。当你这样做时：

```
 foo.bar(); 
```

`this`里面`bar()`会`foo`。但如果你这样做：

```
 var bar = foo.bar;
    bar(); 
```

`this`将是全局对象。

在您的情况下，问题在于当您设置 时`reader.onload`，您将其设置为从 CanvasState 原型中提取的函数。当阅读器加载然后调用该函数时，就像上面的示例一样，其中`this`将是全局对象，而不是与内部相同的`addImage`.

要解决此问题，您可以使用该`bind()`方法创建一个新函数`loadImageData`，该函数将以`this`您期望的方式调用。

基本上，改变：

```
...
reader.onload = this.loadImageData;
... 
```

至：

```
...
reader.onload = this.loadImageData.bind(this);
... 
```

查看[JavaScript 函数绑定](http://www.javascripture.com/Function#bind)以获取更多信息和交互式示例。

# excel - Excel 2013 - 双重依赖下拉和 VLookUp 创建销售报价

> ID：16177782
> 
> 赞同：0
> 
> 时间：2013-04-23T19:38:50.927
> 
> 标签：excel, drop-down-menu, vlookup

Excel中相当具体的问题。我正在尝试创建一个依赖于依赖下拉列表的依赖下拉列表。然后我想用来`VLookUp`查找“产品类型”“产品”和“产品选项”组合的相应价格，并用该数据填充销售报价。

这是一个视觉表示：

![在此处输入图像描述](https://i.stack.imgur.com/cLslj.jpg)

# sql-server - RAISERROR 后的 SQL Server 返回值

> ID：16177784
> 
> 赞同：0
> 
> 时间：2013-04-23T19:39:00.520
> 
> 标签：sql-server, tsql, raiserror

我有 StoredProc1 调用 StoredProc2。StoredProc2 然后执行一些验证，如果任何验证失败，它会发出 RAISERROR。例如，以下是 StoredProc2 的伪代码

```
BEGIN  
    --Perform validation1, validation2  
    IF validation1 Failed OR Validation2 failed
    BEGIN  
         RAISERROR('Something wrong', 16, 1)  
         RETURN  
    END  
END 
```

在 StoredProc1 中，我有

```
BEGIN  
    EXEC @ReturnVal = StoredProc2  
    IF @ReturnVal <> 0  
    BEGIN  
       RETURN  
    END  
END 
```

我的问题是关于 RAISERROR 之后的 StoredProc2 的 RETURN 关键字。由于我没有像 RETURN -1 那样明确指定 RETURN，StoredProc2 的返回值是多少？

谢谢维卡斯
_

# compilation - g++：致命错误：无法将 -o 与 -c、-S 或 -E 与多个文件一起指定

> ID：16177790
> 
> 赞同：10
> 
> 时间：2013-04-23T19:39:41.087
> 
> 标签：compilation, g++, makefile

我正在尝试使用其他库文件编译库文件。我在 makefile 中使用以下行来创建 gameobject.o：

```
lib/gameobject.o: src/gameobject.cpp src/vector.hpp lib/objectevent.o lib/sprite.o
g++ $^ -c -o $@ $(SFML_FLAGS) 
```

所有依赖项都正确编译，但在尝试编译 gameobject.o 时出现以下错误：

```
g++: fatal error: cannot specify -o with -c, -S or -E with multiple files 
```

我对使用 make/separating 编译还是有点陌生​​，所以我不太确定我应该做什么。我只需要编译它而不设置输出吗？我必须在不使用任何其他 .o 文件的情况下编译 gameobject.o 吗？如果这是真的，如果您不能使用其他库编译库，那么对于大型对象来说编译时间不会变得相当长吗？还是我只是完全错误地阅读了这个错误？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-23T19:50:37.660

您不是在此处构建库文件。文件`.o`是目标文件。通常每个源文件有一个目标文件。当您使用编译器的`-c`选项时，它采用单个源文件并将其编译为单个目标文件。您不能将其他目标文件添加到现有目标文件中，因此将`.o`和`.cpp`文件添加到同一编译器行中`-c`是行不通的。

如果您想创建一个库，则类似于`libfoo.a`（这里的“a”代表“存档”）。如果你想创建一个可执行文件，你也可以这样做。

在我们描述如何得到它之前，你需要更清楚你想要什么结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-11-07T06:37:14.963

在将一些解决方案项目合并为一个项目后，我遇到了同样的问题。我发现有两个具有相同名称的 .cpp 文件，在我重命名其中一个之后它就解决了。

# activepivot - 获取对当前 ActivePivotManager 的引用

> ID：16177792
> 
> 赞同：2
> 
> 时间：2013-04-23T19:39:43.810
> 
> 标签：activepivot

您如何获得对当前 ActivePivotManger 的引用？我找到了使用它的代码，但没有办法真正掌握它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:12:29.217

如果您查看上一个 v4.4.x 中的 SandboxConfig 类，您会看到该类的注释如下：

```
@PropertySource(value="classpath:sandbox.properties")
@Configuration
@Import(value={
        ActivePivotConfig.class,
        ActivePivotServicesConfig.class,
        WebServicesConfig.class,
        RemotingConfig.class,
        SecurityConfig.class
})
public class SandboxConfig { 
```

注解中的 ActivePivotConfig.class 是我们定义 activePivotManager 的类，它被定义为 SandboxConfig 类的成员：

```
 /** ActivePivot Manager, automatically wired */
   @Autowired
    protected IActivePivotManager activePivotManager; 
```

这里的@Autowired 很重要，因为这意味着它已经提供了。

在之前的 AP 版本中，我们在项目中将其定义如下：

```
<!-- ActivePivot Manager -->
    <bean id="ActivePivotManager" class="com.quartetfs.biz.pivot.impl.ActivePivotManagerFactory">
        <property name="resourceName" value="DESC-INF/ActivePivotManager.xml" />
        <property name="autoStart" value="false" />
        <property name="healthCheckPeriod" value="120"/>
    </bean> 
```

如果您想使用 ActivePivotManager 实例，请使用 SandboxConfig 中的内容并在那里添加您的逻辑，请使用那里定义的 ActivePivotManager 实例。

如果您对迁移到仍然受支持的完整 XML 布线不满意，因为我可以理解有些东西是隐藏的，并且您希望在某处清楚地看到 ActivePivotManager 的实例（这实际上是在 ActivePivotConfig.class 中完成的）。

# java - 尽管我已导入所需的 jar 和 dll 文件，但我无法初始化 openCV 数据类型

> ID：16177794
> 
> 赞同：1
> 
> 时间：2013-04-23T19:39:49.373
> 
> 标签：java, opencv

我使用opencv 2.4.4，我想用java检测和跟踪人脸。我在互联网上找到了如下示例。

例子

```
import hypermedia.video.*;
import java.awt.Rectangle;

float last = millis();
float interval = 100;
int startTime;
int noFaces = 0;
int noFacesPrev = 0;
int dx = 0;
int dy = 0;
int dwidth = 400;
int dheight = 400;

OpenCV opencv;

// contrast/brightness values
int contrast_value    = 0;
int brightness_value  = 0;

void setup() {

    size( 800,800 );

    opencv = new OpenCV( this );
    opencv.movie( "egypt.mov", 320, 240 );          // load movie file
    opencv.cascade( OpenCV.CASCADE_FRONTALFACE_ALT );  // load detection description, here-> front face detection : "haarcascade_frontalface_alt.xml"

    // print usage
    println( "Drag mouse on X-axis inside this sketch window to change contrast" );
    println( "Drag mouse on Y-axis inside this sketch window to change brightness" );

}

void stop() {
    opencv.stop();
    super.stop();
}

void draw() {

    // grab a new frame
    opencv.read();
    opencv.contrast( contrast_value );
    opencv.brightness( brightness_value );

    // proceed detection
    Rectangle[] faces = opencv.detect( 1.2, 2, OpenCV.HAAR_DO_CANNY_PRUNING, 40, 40 ); // 40,40 is the smallest size its looking for

 // draw face area(s)
  noFaces = faces.length;

  if (faces.length >=1 && noFaces > noFacesPrev) {
    startTime = millis();
    println(startTime);
    println(noFaces);
    println(noFacesPrev);
    noFacesPrev = noFaces;
  }
  if (faces.length == 0) {  // if there is no face, start over
    println("no face");
    startTime = 0;
    noFacesPrev = 0;
  }

 if (startTime > 0) {
    println("started");
    if(millis() - startTime >interval && (faces.length >=1)) {
      for ( int i = 0; i= 800){
      dy = dy+400;
      dx = 0;
      }
      if (dy >= 800){
      dy = 0;
      dx = 0; 
      }
      }
      startTime=0;
      println ("clock reset");
      noFacesPrev=0;
    }
  }
}

// Changes contrast/brigthness values

void mouseDragged() {
    contrast_value   = (int) map( mouseX, 0, width, -128, 128 );
    brightness_value = (int) map( mouseY, 0, width, -128, 128 );
}

void keyPressed()
{

  if (key == 's') {
    opencv.stop(); 
    super.stop();
  }
} 
```

当我想在我的项目中尝试此代码时，我无法初始化“ `OpenCV opencv;`”！另外，我无法导入“hypermedia.video”！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T19:56:47.540

OPENCV 不是数据类型。如果要检测图像中的人脸，可以在代码中导入 OpenCV 库。

并在调用任何 openCV 方法之前在 main 方法中调用 System.loadLibrary("opencv_java244") 。

[您可以在OpenCV](http://docs.opencv.org/2.4.4-beta/doc/tutorials/introduction/desktop_java/java_dev_intro.html)页面上找到代码和文档。

# java - 嵌套 JTrees：表达式树

> ID：16177795
> 
> 赞同：0
> 
> 时间：2013-04-23T19:39:49.913
> 
> 标签：java, swing, jtree

我正在尝试将后缀表达式转换为表达式树。我的方法是为表达式树设置一堆 JTree，为括号设置一堆字符串，为运算符设置一堆节点。

例如 postfi`( C ( A B OR ) AND )`

我可以填充堆栈，但是当我遇到')'时，我想在 JTree 堆栈中创建一个新的 JTree，它将包含运算符堆栈的 pop（运算符 JTree）作为根，以及两个表达式 JTree（弹出表达式堆栈两次）作为孩子。

当我尝试创建一棵新树时，如上所述，我无法将两个弹出的 JTree 添加到父运算符 JTree。还有另一种方法可以做到这一点吗？如何嵌套 2 个 JTree？如果我不清楚/需要发布代码，请告诉我。

# android - 了解 EndlessAdapter 中 cacheInBackground() 的返回值

> ID：16177800
> 
> 赞同：0
> 
> 时间：2013-04-23T19:40:03.763
> 
> 标签：android, android-asynctask, commonsware-cwac

我试图跟踪`boolean`变量的情况，`hasMoreData`以及`EndlessAdapter`为什么似乎过早地转向`false`。

让我从头开始运行会发生什么。 *注意：我使用的是`task`和`setRunInBackground(false);`*

我开始设置我的列表并设置适配器：

```
profileList = new ArrayList<ProfileReview>();
endlessAdapter = new EndlessProfileAdapter(getActivity(), profileList);
endlessAdapter.setRunInBackground(false);
listView.setAdapter(endlessAdapter); 
```

旁注：不确定这是否正确，但似乎我正在使用空适配器设置列表。

*在设置适配器后出现*的第一件事是方法`cacheInBackground()`，我的`profileList`大小为零，因此它设置为 0，就像`int startPoint`调用我的`AsyncTask`where`hasMoreData`设置为时一样`true`。同时，在这个（缓存）方法中，`hasMoreData` 返回`true`. *不知道为什么？因为列表的大小为零？还是因为它仍然与默认值相关联`true`？*

在任务中，它抓取前 10 个项目。

然后当用户滚动时，`thobber`开始旋转。并显示接下来的 10 个。 `Log.d`告诉我`profileList.size()`现在是 10，`hasMoreData`因此是错误的。

```
public void onItemsReady(ArrayList<ProfileReview> data) {
     profileList.addAll(data);
     endlessAdapter.onDataReady();
     hasMoreData = profileList.isEmpty();  \\ Log.'d this out
} 
```

*我的问题：*我的列表从 10 个项目开始，用户滚动，它又抓取了 10 个。然后在总共 20 个项目后停止（或何时停止`hasMoreData == false`。）但我还有更多项目要从中提取。我该如何保持`hasMoreData == true`？这是什么触发因素？显然触发器是列表大小（我认为？），为什么列表大小一旦开始抓取数据就会为 0？（直到课程结束）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T20:05:29.080

> 不确定这是否正确，但似乎我正在使用空适配器设置列表。

`EndlessAdapter`绝对设计为从非空适配器开始。事实上，它的设计假设用户必须滚动才能加载更多数据。您当前方法中的行为未指定，我不推荐这种方法。请加载一些数据，*然后*在您的第一批数据准备好后填充列表。

> 同时，在这个（缓存）方法中，hasMoreData 返回 true。不知道为什么？因为列表的大小为零？还是因为它仍然与默认值 true 相关联？

由于`EndlessAdapter`没有`hasMoreData`方法。[对源代码`EndlessAdapter`](https://github.com/commonsguy/cwac-endless/blob/master/src/com/commonsware/cwac/endless/EndlessAdapter.java)的搜索没有找到任何名为`hasMoreData`. 哎呀，“更多”这个词出现的唯一地方是在评论中。

*示例应用程序*具有价值`hasMoreData`。由于您没有使用此示例应用程序，因此我无法在您自己的代码中帮助您处理随机类的随机数据成员。

在示例应用程序中`EndlessAdapterCustomTaskFragment`，我使用了一个名为 的数据成员`hasMoreData`。这是一个`boolean`值，旨在从`cacheInBackground()`. 的责任`cacheInBackground()`是返回`true`是否我们应该继续加载数据（在当前批次刚刚加载之后），`false`否则。在这个示例应用程序的情况下，`hasMoreData`由对 的调用填充，它本身是由模拟加载一些数据`onItemsReady()`触发的`onPostExecute()`。设置为或取决于集合是否为空，因此它基本上只加载一次附加数据，然后调用它退出。`AsyncTask``hasMoreData``true``false``items`

但这是*示例应用程序*的行为。我什至没有*编写*这个类的大部分内容——它是作为一个补丁提供的，增加了对你自己的数据获取任务的支持。**不要认为示例代码仅仅是一个示例**。

因此，*您*需要将*您的值设置为对* *您的*应用程序逻辑`hasMoreData`有意义的任何值，以服务于*您*决定使用的任何角色。*如果*您的代码中的角色与示例中的角色相同，请保留它，直到您确定数据不足，然后设置它。**`hasMoreData` *`hasMoreData``true``false`***

# javascript - 如何将sails.js 模型与关联一起使用？

> ID：16177803
> 
> 赞同：3
> 
> 时间：2013-04-23T19:40:12.447
> 
> 标签：javascript, node.js, sails.js

我想使用具有以下数据库设计的sails.js 创建一个node.js 应用程序：

`Products <----> ProductAttributes <----> Attributes`

*请注意，这是给定的设计，无法更改。*

尽管sails.js 还不支持模型关联，但我想知道是否可以覆盖模型的CRUD 方法，甚至创建自己的方法，以便将上述设计应用于sails.js。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-24T01:09:58.053

如果您想参与协会的发展，请向 Google Group 发送说明。同时，我们所做的是，对于基于 SQL 的数据库，使用`Model.query()`，对于 nosql 数据库，当您需要访问数据时，使用两个单独的调用。

希望这会有所帮助，随着夏季的进行，请留意我们的最新消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-09T05:55:58.897

您可以使用 Sails.js v0.10 中的关联。npm installsails@git://github.com/balderdashy/sails.git#v0.10

这是文档.. [https://github.com/balderdashy/sails-docs/blob/master/reference/ModelAssociations.md](https://github.com/balderdashy/sails-docs/blob/master/reference/ModelAssociations.md)

# ios - 从移动的矩形呈现 UIPopoverController

> ID：16177806
> 
> 赞同：1
> 
> 时间：2013-04-23T19:40:16.933
> 
> 标签：ios, objective-c, uiscrollview, uipopovercontroller

刚遇到这个奇怪的问题，我在滚动视图中有一个滚动视图和按钮。我想`UIPopover`在触摸时显示按钮的 a ，`UITextFields`在`UIPopover`. 当键盘出现时问题就来了。在某些情况下，当`UIButton`视图中的 太高以至于弹出框只能通过 UIPopoverArrowDirectionUp 显示在其下方时，并且当键盘弹出时，此弹出框无法再向上移动并因此神奇地消失到左上角（可能是一些苹果的东西）。

我的解决方案是检查框架`UIPopover`并检查键盘是否有足够的空间，如果没有，请`UIScrollView`使用按钮向上滚动以便能够向上推`UIPopover`，因此请确保键盘和弹出框合身。

所以问题是：是否可以在按钮移动时移动弹出框？

谢谢

# emacs - 来自 melpa 的 js2-refactor：包 `emacs-24.1' 不可用

> ID：16177807
> 
> 赞同：19
> 
> 时间：2013-04-23T19:40:18.823
> 
> 标签：emacs, elpa

我使用的是 GNU Emacs 24.3.50.1（x86_64-pc-linux-gnu，GTK+ 版本 3.6.0），但是当我尝试使用包（melpa）安装 js2-refactor 时，我收到了这个奇怪的错误：

```
package-compute-transaction: Package `emacs-24.1' is unavailable 
```

任何想法这可能是什么？实际上，这可能来自于 js2-refactor: js2-mode 的依赖。它给出了同样的错误。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-04-25T09:37:39.227

造成这种情况的原因可能是`package.el`加载路径中挥之不去的旧版本。 `package.el`被正式包含在 GNU Emacs 24 中，并且早期 Emacs 版本的可下载文件不支持对内置包的依赖（`emacs-24.1`这里被认为是内置包）。

键入`M-x locate-library RET package`以查找 Emacs 的`package.el`来源。它显示的路径应以`lisp/emacs-lisp/package.elc`. 如果没有，请尝试删除指示的文件（或更改加载路径，以便 Emacs 找不到它）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-10-30T14:10:26.697

我通过卸载并重新安装 emacs (macOS/homewbrew) 解决了类似的问题。

# inner-join - 带有外连接和嵌套内连接的 FetchXML：是否可以在嵌套内连接上进行外连接？

> ID：16177812
> 
> 赞同：1
> 
> 时间：2013-04-23T19:40:29.630
> 
> 标签：inner-join, outer-join, fetchxml

我正在尝试使用 FetchXML 进行一些嵌套连接。我想对两个链接的子实体进行内部联接，然后对该结果进行外部联接以检索父级的所有行以及来自两个链接的子实体的数据（如果存在）。如果 childEntity2 中有记录，我只想要来自 childEntity1 的数据，但我总是想要来自父级的所有行。

在 T-SQL 中，它类似于

```
SELECT [fields] FROM ParentEntity OUTER JOIN 
    (childEntity1 INNER JOIN childEntity2 ON childEntity1.id = 
    childEntity2.childEntity1id) 
ON ParentEntity.id = childEntity1.parentEntityId. 
```

在 FetchXML 中，当我对所有内容使用 link-type=outer 时，我会按预期从父实体中获取所有行，但是当我将子实体上的链接类型更改为内部时，我的结果集不包括没有任何内容的行从两个子实体的连接返回。

是否可以像上面 FetchXML 中的 SQL 语句那样嵌套内部连接？

这是我的 FetchXML 的简化版本。当 childEntity1/childEntity2 上的链接类型为“outer”时，我从 parentEntity 获取所有行，但当它为“inner”时，parentEntity 的行由子实体的连接结果过滤。

```
<fetch version='1.0' mapping='logical' distinct='false'>
    <entity name='parentEntity'>
        <link-entity link-type='outer' name='childEntity1' from='parentEntityId' to='parentEntityId'>
            <link-entity link-type='inner' name='childEntity2' from='childEntity1Id' to='childEntity1Id'>
            </link-entity>
        </link-entity>
    </entity>
</fetch> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T22:25:27.390

请参阅我上面的评论。SQL Profiler 救了我，向我展示了发送到数据库的确切内容，并且连接按照我想要的方式嵌套。

# javascript - 在 IE 10 中查看生成的源代码

> ID：16177814
> 
> 赞同：2
> 
> 时间：2013-04-23T19:40:34.207
> 
> 标签：javascript, html, internet-explorer, internet-explorer-10, web-developer-toolbar

我正在尝试找到一种使用 IE 10 查看生成源的方法。使用 Chrome 开发工具和 Firebug，我可以看到 HTML 源发布 JavaScript/AJAX 操作，但在 IE 10 中，查看源命令和开发工具都只显示下载的源。

我正在构建一个单页 javascript Web 应用程序，并且在生成的源代码中遇到了仅在 IE 中发生的问题。使用 ChromeFrame 之类的东西或解决这个问题**不是**一种选择。我需要找到并修复在 IE 中导致它的根本问题。

你们都知道为 IE 10 生成的一组不同的开发工具或工具栏，它们可以让我检查这个难以捉摸的生成 html 吗？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-23T19:42:08.073

只需按 F12。如果 DOM 是通过 AJAX 操作的，您需要根据下面的评论使用蓝色刷新按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-10T12:05:05.890

我使用 alert(document.documentElement.outerHTML) 来实现这一点

# php - 如果选中按钮，则发送到其他电子邮件

> ID：16177815
> 
> 赞同：-2
> 
> 时间：2013-04-23T19:40:39.703
> 
> 标签：php, email, radio-button

这是我在网站上的表单的 PHP 代码。“我们可以向您发送有关我们餐厅的特殊活动和场合的信息吗？” 是表单上的是或否单选按钮。

当表单用户选中“是”按钮时，我希望将额外的电子邮件发送给另一个人。

当他们检查否或将其留空时，我希望电子邮件仅发送到主电子邮件地址而不是其他人。我已经摆弄了好几天，代码完全逃离了我，我能得到的任何帮助都将不胜感激。

```
<?php
if($_POST){

$p = $_POST["mailer"];
$body = "Email: ".$p['Email']."\n";
$body .= "First Name: ".$p['FirstName']."\n";
$body .= "Last Name: ".$p['LastName']."\n";
$body .= "Address: ".$p['Address']."\n";
$body .= "City: ".$p['City']."\n";
$body .= "State: ".$p['State']."\n";
$body .= "Zip: ".$p['Zip']."\n";
$body .= "Telephone: ".$p['Telephone']."\n";
$body .= "Date/Time: ".$p['Date and Time of Visit']."\n";
$body .= "Occassion: ".$p['Occasion']."\n";
$body .= "Restaurant and Location: ".$p['Restaurant and Location']."\n";
$body .= "Server: ".$p['Server\'s Name']."\n\n";
$body .= "Ratings:\n- Host Greeting: ".$p['Host Greeting']."\n";
$body .= "- Food Quality/Appeal: ".$p['Food Quality/Appeal']."\n";
$body .= "- Menu Selection: ".$p['']."\n";
$body .= "- Service: ".$p['Service']."\n";
$body .= "- Atmosphere: ".$p['Atmosphere']."\n";
$body .= "- Price/Value: ".$p['Price/Value']."\n";
$body .= "- Cleanliness: ".$p['Cleanliness']."\n";
$body .= "- Overall Experience: ".$p['Overall Experience']."\n\n";
$body .= "Questions:\n- - Will you recommend this restaurant to others? ".$p['Will you recommend this restaurant to others?']."\n";
$body .= "- Have you been to a BHG Restaurant before? ".$p['Have you been to a BHG Restaurant before?']."\n";
$body .= "- Would you be interested in receiving information about our private meeting/dining facilities and services? ".$p['']."\n";
$body .= "- May we send you information about special events and occasions at our restaurants? ".$p['May we send you information about special events and occasions at our restaurants?']."\n\n";
$body .= "Comments: \n".$p['How can we serve you better?']."\n";
if(!empty($_POST['url'])){ die('Thankyou'); }
if(isset($_POST['url']) && $_POST['url'] == '')

$to = "emailaddy@emailworld.com";

$subject = "You have a feedback ";

$message = $body;

$from = "blah@blah.com";

$headers = "From:" . $from;

$dbaddress  =   ''; 
$dbuser     =   ''; 
$dbpass     =   ''; 
$dbname     =   '';

    try{
        $dbcnx              =    mysql_connect($dbaddress,$dbuser,$dbpass) or die("Could not connect: " . mysql_error());
        mysql_select_db($dbname, $dbcnx) or die ('Unable to select the database: ' . mysql_error());
        $query              =   mysql_query("insert into feedback (FirstName, LastName, Email, Address, City, State, Zip, Telephone, TimeandDay, Occassion, ResturantAndLocation, ServerName, HostGreeting, FoodQuality, Service, Atmosphere, PriceValue, Clenliness, OverallExperience, QuestionOne, QuestionTwo, QuestionFour, Comments, tstamp, responded) values ('".mysql_real_escape_string($p['FirstName'])."', '".mysql_real_escape_string($p['LastName'])."', '".mysql_real_escape_string($p['Email'])."', '".mysql_real_escape_string($p['Address'])."', '".mysql_real_escape_string($p['City'])."', '".mysql_real_escape_string($p['State'])."', '".mysql_real_escape_string($p['Zip'])."', '".mysql_real_escape_string($p['Telephone'])."', '".mysql_real_escape_string($p['Date and Time of Visit'])."', '".mysql_real_escape_string($p['Occasion'])."', '".mysql_real_escape_string($p['Restaurant and Location'])."', '".mysql_real_escape_string($p['Server\'s Name'])."', '".mysql_real_escape_string($p['Host Greeting'])."', '".mysql_real_escape_string($p['Food Quality/Appeal'])."', '".mysql_real_escape_string($p['Service'])."', '".mysql_real_escape_string($p['Atmosphere'])."', '".mysql_real_escape_string($p['Price/Value'])."', '".mysql_real_escape_string($p['Cleanliness'])."', '".mysql_real_escape_string($p['Overall Experience'])."', '".mysql_real_escape_string($p['Will you recommend this restaurant to others?'])."', '".mysql_real_escape_string($p['Have you been to a BHG Restaurant before?'])."', '".mysql_real_escape_string($p['May we send you information about special events and occasions at our restaurants?'])."', '".mysql_real_escape_string($p['How can we serve you better?'])."', now(), null) ;", $dbcnx) or die("Unable to validate login and password with the database:" . mysql_error());            
    }catch (Excetion $e){}

mail($to,$subject,$message,$headers);

header( 'Location: ' );
} 
else 
{
header( 'Location: ' );
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T19:43:30.523

当您需要发送到附加地址时，只需将附加地址添加到以分号 (;) 分隔的 $to 变量中即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T20:17:52.253

```
if ($_POST['confirm']=='yes'){ //assumes check box name is 'confirm' and value is 'yes'
//new email
} 
```

# ios - 与新应用版本一起提交的新 iOS 应用内购买是否会在以前的应用版本中可用？

> ID：16177818
> 
> 赞同：1
> 
> 时间：2013-04-23T19:40:48.077
> 
> 标签：ios, in-app-purchase

我目前正在开发一个实施了应用内购买的 iOS 项目。当前的实现如下：

*   用于应用内购买的产品 ID 和其他元数据托管在远程服务器上。
*   应用程序从服务器请求此数据，然后使用来自服务器的产品 ID 执行 SKProductRequest。
*   从 SKProductRequest 返回为有效的产品 ID 将显示给用户。

我想提交一个新的应用程序包，其中包含一些仅在新版本中有效且被旧版本忽略的额外应用内购买。

所以我的问题是，如果我提交一个新的应用程序包以及一些新的应用内购买，之前应用版本中的 SKProductRequest 是否会将新的应用内购买标识符返回为有效？

如果从新捆绑包中请求，我是否必须为服务器创建一种仅返回新应用内购买的方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T22:36:09.360

这个问题不应该出现。您请求产品列表并使用类似的东西提供标识符

```
 [[SKProductsRequest alloc] initWithProductIdentifiers: prodset]; 
```

然后设置委托并开始。在 prodset 中，您有一个感兴趣产品的标识符列表。您的旧应用程序版本既不应该也不应该提供不相关产品的标识符。如果您从其他来源（您的服务器）下载产品列表，那么它可以并且应该根据版本进行过滤。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T20:20:40.720

我已经通过在我的产品元数据列表中包含一个最低版本号来解决这个问题。如果 IAP 最低版本晚于用户的版本，则弹出窗口建议用户升级，以便他们可以访问新功能。

# c++ - 三次贝塞尔曲线交互

> ID：16177824
> 
> 赞同：0
> 
> 时间：2013-04-23T19:41:12.237
> 
> 标签：c++, c, opengl, graphics, bezier

所以我目前在 XZ 平面上有一个三次贝塞尔补丁（y = 0，所以它是一个平面补丁）。该补丁由 16 个控制点和 400 个总网格点组成。我目前正在尝试实现的是选择中间 4 个控制点中的 1 个（其中任何一个），并在任何坐标方向上递增。

我认为我遇到问题的部分实际上是使用 OpenGL 绘图函数显示更改。下面是创建补丁的代码和我当前的绘图函数以及我当前使用的增量函数的示例。

网格是所有网格点的二维数组。控制是 16 个控制点的二维数组。control_point 由用户选择的菜单功能（选项 1-4）更改并初始化为 1。

编辑：修复了 switch 语句中的最后 2 个控制点。

```
void bezier_plane()
{
    CalcBezier();
    for (int i = 0; i < 19; i++) {
        for (int j = 0; j < 19; j++) {
            glPolygonMode(GL_FRONT_AND_BACK, GL_LINE);
            glBegin(GL_TRIANGLE_STRIP);
                glVertex3f(grid[i][j].x, grid[i][j].y, grid[i][j].z);
                glVertex3f(grid[i][j+1].x, grid[i][j+1].y, grid[i][j+1].z);
                glVertex3f(grid[i+1][j].x, grid[i+1][j].y, grid[i+1][j].z);
                glVertex3f(grid[i+1][j+1].x, grid[i+1][j+1].y, grid[i+1][j+1].z);
            glEnd();
        }
    }
}

void CalcBezier()
{
    float u;
    float v;
    u = 0;
    for (int i = 0; i < 20; i++) {
        v = 0;
        for (int j = 0; j < 20; j++) {
            for (int x = 0; x < 4; x++) {
                for (int y = 0; y < 4; y++) {
                    grid[i][j].x += control[x][y].x * Bezier3(x, u) * Bezier3(y, v);
                    grid[i][j].y += control[x][y].y * Bezier3(x, u) * Bezier3(y, v);
                    grid[i][j].z += control[x][y].z * Bezier3(x, u) * Bezier3(y, v);
                }
            }
            v+=.05;
        }
        u+=.05;
    }
}

/*Is called when a menu button is hit, indicating that the control point is incremented in the y direction*/
void OnYInc()
{
    switch(control_point) {
    case 1:
        control[1][1].y += 2;
        break;
    case 2:
        control[1][2].y += 2;
        break;
    case 3:
        control[2][3].y += 2;
        break;
    case 4:
        control[2][4].y += 2;
        break;
    }
    InvalidateRect(NULL, FALSE);
} 
```

我的 onDraw 函数也只是简单地调用 bezier_plane() 。现在，使用上面的代码，当我尝试根据 y 递增时。网格中的三角形只是变大了，但似乎根本没有正确绘制它。这有点难以描述。

结果看起来像这样。第一个屏幕截图是在我点击增量之前。第二个屏幕截图和第三个屏幕截图是单击 1 次和单击 10 次后的样子。我也不太确定为什么当我在 y 方向上增加时补丁的范围实际上会发生变化（随着我不断增加 y，它似乎变得更大）。

![增量前](https://i.stack.imgur.com/15LsW.png)

![点击 1 次后](https://i.stack.imgur.com/IdBkS.png)

![点击 10 次后](https://i.stack.imgur.com/a3PiU.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T23:13:51.483

激进7已经为你解决了。因为在调用 CalcBezier 之前没有将网格设置为零，所以每次调用 CalcBezier 时，所有网格值都会递增。将 OnYInc 更改为单独保留控制点，仅保留 InvalidateRect，您将看到相同的行为

# batch-file - 批处理文件中的 FOR 循环

> ID：16177826
> 
> 赞同：0
> 
> 时间：2013-04-23T19:41:20.890
> 
> 标签：batch-file

我正在尝试编写一个非常基本的批处理文件，但我被困在这个问题上。我已经写了：

> for %n in (1 1 10) 暂停

据我了解，这应该打开一个终端窗口并暂停 10 次。问题是当我运行批处理时，终端窗口只闪烁打开并且不执行任何操作。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T19:46:39.093

你的第一个问题是单`%`。这是直接在命令行运行它的正确语法，但在批处理文件中您需要使用`%%`. 详情请参阅`help for`。

此外，您编写的代码只会调用`pause`3 次：一次用于`1`，一次用于第二次`1`，一次用于`10`. 如果要以 1 为单位从 1 循环到 10，则需要使用`/l`：

```
for /l %%n in (1 1 10) do pause 
```

# oracle - Oracle Forms 6i 解析 LOV 代码

> ID：16177839
> 
> 赞同：1
> 
> 时间：2013-04-23T19:42:51.443
> 
> 标签：oracle, plsql, oracleforms

我有一个包含两列的 LOV，一列是代码，另一列是描述。我知道文本项有一个属性说从列表中验证但是我的代码字段和描述字段是显示项。我们不想强迫用户点击按钮来显示 LOV。在预表单触发器中，我在代码字段中设置了一个默认值。

我想从列表中获取/解析代码到它的描述，而不必从数据库中进行选择。有谁知道完成这项工作的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T07:20:15.773

我也有同样的问题。在运行时可能没有从记录组中检索标签列的解决方案。

但你可以这样做：

1.  将记录组查询存储在某处（包头或数据库列）。
2.  在运行时使用查询填充您的记录组。
3.  创建以查询和键值作为参数的数据库函数。然后该函数将返回键值的描述（使用动态 SQL，立即执行/dbms_sql）。
4.  使用 POST-QUERY 触发器中的函数：

`:block.item_description := your_new_function(l_query, :block.item_value);`

# c++ - 单例模式：auto_ptr 和 unique_ptr 的不同行为

> ID：16177840
> 
> 赞同：5
> 
> 时间：2013-04-23T19:42:54.427
> 
> 标签：c++, static, linker, singleton, auto-ptr

在实现工厂类时，我遇到了`std::auto_ptr`我无法理解的行为。我把问题简化为下面这个小程序，所以……我们开始吧。

考虑以下单例类：

单例.h

```
#ifndef SINGLETON_H_
#define SINGLETON_H_

#include<iostream>
#include<memory>

class singleton {
public:
  static singleton* get() {
    std::cout << "singleton::get()" << std::endl;
    if ( !ptr_.get() ) {
      std::cout << &ptr_ << std::endl;
      ptr_.reset( new singleton  );
      std::cout << "CREATED" << std::endl;
    }
    return ptr_.get();
  }

  ~singleton(){
    std::cout << "DELETED" << std::endl;
  }
private:
  singleton() {}
  singleton(const singleton&){}

  static std::auto_ptr< singleton > ptr_;
  //static std::unique_ptr< singleton > ptr_;
};

#endif 
```

单例.cpp

```
#include<singleton.h>o
std::auto_ptr< singleton > singleton::ptr_(0);
//std::unique_ptr< singleton > singleton::ptr_; 
```

这里使用智能指针来管理资源主要是为了避免程序退出时的泄漏。然后我在以下程序中使用此代码：

啊

```
#ifndef A_H_
#define A_H_

int foo();

#endif 
```

a.cpp

```
#include<singleton.h>

namespace {
  singleton * dummy( singleton::get() );
}

int foo() {  
  singleton * pt = singleton::get();
  return 0;
} 
```

主文件

```
#include<a.h>

int main() {

  int a = foo();

  return 0;
} 
```

现在*有趣*的部分。我分别编译了三个源：

```
$ g++  -I./ singleton.cpp -c 
$ g++  -I./ a.cpp -c 
$ g++  -I./ main.cpp -c 
```

如果我按此顺序明确链接它们：

```
$ g++ main.o singleton.o a.o 
```

一切都按我的预期工作，我得到以下标准输出：

```
singleton::get()
0x804a0d4
CREATED
singleton::get()
DELETED 
```

相反，如果我使用此顺序链接源：

```
$ g++ a.o main.o singleton.o 
```

我得到这个输出：

```
singleton::get()
0x804a0dc
CREATED
singleton::get()
0x804a0dc
CREATED
DELETED 
```

我尝试了不同的编译器品牌（英特尔和 GNU）和版本，并且这种行为在它们之间是一致的。无论如何，我无法看到行为取决于链接顺序的代码。

此外，如果`auto_ptr`被`unique_ptr`行为取代，则始终与我期望的正确行为一致。

这让我想到了一个问题：**有人知道这里发生了什么吗？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T19:56:25.530

`dummy`和`std::auto_ptr< singleton > singleton::ptr_(0)`构造的顺序是未指定的。

对于这种`auto_ptr`情况，如果你构造`dummy`then `singleton::ptr_(0)`，调用中创建的值`dummy`会被 的构造函数擦除`ptr_(0)`。

我会在`ptr_`via`ptr_(([](){ std::cout << "made ptr_\n"; }(),0));`或类似的东西的构造中添加跟踪。

它与它一起工作的事实`unique_ptr`是巧合的，并且可能是由于`unique_ptr(0)`可以确定它被归零的优化，因此什么都不做（`static`数据在构造开始之前被归零，所以如果编译器能够找出`unique_ptr(0)`只是将内存归零，它可以合法地跳过构造函数，这意味着您不再将内存归零）。

解决此问题的一种方法是使用一种保证使用前构造的方法，例如：

```
 static std::auto_ptr< singleton >& get_ptr() {
     static std::auto_ptr< singleton > ptr_(0);
     return ptr_;
   } 
```

并将对 的引用替换`ptr_`为`get_ptr()`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T19:56:04.810

未指定在不同翻译单元中定义的文件范围对象的构造顺序。然而，通常，在另一个翻译单元之前链接的翻译单元中定义的对象是在第二个翻译单元中定义的对象之前构造的。这里的区别在于`a.o`和`singleton.o`链接的顺序。当`singleton.o`在之前链接时，在之前`a.o`被`singleton::ptr_`初始化`dummy`，一切都很好。当先`a.o`被链接时，先`dummy`被初始化，从而构造单例；然后`singleton::ptr_`被初始化为 0，丢弃指向原始副本的指针`singleton`。然后在调用 to`foo`时，调用 to`singleton::get()`再次构造单例。

# java - java切换圈复杂度与性能

> ID：16177842
> 
> 赞同：2
> 
> 时间：2013-04-23T19:43:09.727
> 
> 标签：java, performance, switch-statement, cyclomatic-complexity

我在这里有一个案例，其中 switch 语句包含大约 40 个案例，每个案例都根据输入返回不同的配置对象。这种方法在度量中显示为具有太高的圈复杂度，通常我会将其更改为处理程序对象的映射。但是这个开关位于一段代码中，其中性能是最重要的，所以我想出了一个问题，即 HashMap 查找和处理程序调用如何与开关块执行性能进行比较。有人比较过吗？值得考虑吗？或者对于有限数量的 int 键是否有更快的查找对象？

干杯，凯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T19:44:22.050

我很确定 a 的内部表示`switch`使用某种与 a 具有相似结构的查找表`HashMap`，所以我的猜测是任何差异都可以忽略不计。

我会说性能在这里不值得考虑，只要使用为您提供最干净代码的任何解决方案即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-17T16:10:01.387

似乎搜索值比切换方法略快。因此，如果您的代码更改经常集中在哈希方法上，如果它经过优化并且不会经常更改，您可以使用 switch 方法而不会后悔。如果您的应用程序正在由多个程序员开发，您应该更喜欢散列方法以[防止将来出现错误](https://en.wikipedia.org/wiki/Cyclomatic_complexity#Correlation_to_number_of_defects)。

开关版本：27.32191395 ns。哈希版本：26.98444367 ns。

使用哈希获得的时间：1.23%。

我使用以下代码对其进行了测试：

导入 java.util.Random；

```
/**
 * @author ruslan.lopez
 */
public class CyclomaticVsHash {

    private static final Random RNG    = new Random();
    static int[]                myHash = { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11,
            12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28,
            29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40 };

    /**
     * @param args
     *            the command line arguments
     */
    public static void main(String[] args) {
        long iterations = 100000000;
        warmUp(iterations);
        System.out.println("Cycle1");
        double individualTime = getAverageTimePerIterationc1(iterations);
        iterations = 10000;
        double totalTime = getTotalTimec1(iterations);

        System.out.println("ns/iteration: " + individualTime);
        System.out.println("Total time for " + iterations + " runs: "
                           + totalTime);

        System.out.println("Cycle2");
        iterations = 100000000;
        warmUp(iterations);
        double individualTime1 = getAverageTimePerIterationc2(iterations);
        iterations = 10000;
        double totalTime1 = getTotalTimec2(iterations);

        System.out.println("ns/iteration: " + individualTime1);
        System.out.println("Total time for " + iterations + " runs: "
                           + totalTime1);

    }

    public static void warmUp(long iterations) {
        System.out.println("Starting warmup");
        for (int i = 0; i < iterations; i++) {
            runCycles();
            runCycles1();
        }
    }

    public static double getAverageTimePerIterationc1(long iterations) {
        // test
        System.out.println("Starting individual time test");
        long timeTaken = 0;
        for (int i = 0; i < iterations; i++) {
            long startTime = System.nanoTime();
            runCycles();
            timeTaken += System.nanoTime() - startTime;
        }
        return (double) timeTaken / iterations;
    }

    public static long getTotalTimec1(long iterations) {
        // test
        System.out.println("Starting total time test");
        long timeTaken = 0;
        for (int i = 0; i < iterations; i++) {
            long startTime = System.nanoTime();
            runCycles();
            timeTaken += System.nanoTime() - startTime;
        }
        return timeTaken;
    }

    public static double getAverageTimePerIterationc2(long iterations) {
        // test
        System.out.println("Starting individual time test");
        long timeTaken = 0;
        for (int i = 0; i < iterations; i++) {
            long startTime = System.nanoTime();
            runCycles1();
            timeTaken += System.nanoTime() - startTime;
        }
        return (double) timeTaken / iterations;
    }

    public static long getTotalTimec2(long iterations) {
        // test
        System.out.println("Starting total time test");
        long timeTaken = 0;
        for (int i = 0; i < iterations; i++) {
            long startTime = System.nanoTime();
            runCycles1();
            timeTaken += System.nanoTime() - startTime;
        }
        return timeTaken;
    }

    private static void runCycles() {
        Integer num = RNG.nextInt();
        int newnum;
        switch (num) {
            case 1:
                newnum = num * 1;
                break;
            case 2:
                newnum = num * 2;
                break;
            case 3:
                newnum = num * 3;
                break;
            case 4:
                newnum = num * 4;
                break;
            case 5:
                newnum = num * 5;
                break;
            case 6:
                newnum = num * 6;
                break;
            case 7:
                newnum = num * 7;
                break;
            case 8:
                newnum = num * 8;
                break;
            case 9:
                newnum = num * 9;
                break;
            case 10:
                newnum = num * 10;
                break;
            case 11:
                newnum = num * 11;
                break;
            case 12:
                newnum = num * 12;
                break;
            case 13:
                newnum = num * 13;
                break;
            case 14:
                newnum = num * 14;
                break;
            case 15:
                newnum = num * 15;
                break;
            case 16:
                newnum = num * 16;
                break;
            case 17:
                newnum = num * 17;
                break;
            case 18:
                newnum = num * 18;
                break;
            case 19:
                newnum = num * 19;
                break;
            case 20:
                newnum = num * 20;
                break;
            case 21:
                newnum = num * 21;
                break;
            case 22:
                newnum = num * 22;
                break;
            case 23:
                newnum = num * 23;
                break;
            case 24:
                newnum = num * 24;
                break;
            case 25:
                newnum = num * 25;
                break;
            case 26:
                newnum = num * 26;
                break;
            case 27:
                newnum = num * 7;
                break;
            case 28:
                newnum = num * 28;
                break;
            case 29:
                newnum = num * 29;
                break;
            case 30:
                newnum = num * 30;
                break;
            case 31:
                newnum = num * 31;
                break;
            case 32:
                newnum = num * 32;
                break;
            case 33:
                newnum = num * 33;
                break;
            case 34:
                newnum = num * 34;
                break;
            case 35:
                newnum = num * 35;
                break;
            case 36:
                newnum = num * 36;
                break;
            case 37:
                newnum = num * 37;
                break;
            case 38:
                newnum = num * 38;
                break;
            case 39:
                newnum = num * 39;
                break;
            default:
                newnum = num * 40;
                break;
        }
    }

    private static void runCycles1() {
        Integer num = RNG.nextInt();
        int nwenum = num > 0 && num < 39
                                        ? myHash[num - 1]
                                        : myHash[39];
    }
} 
```

# ios - 在 MonoDevelop 中使用自定义 TableCell 删除 IUTableView 分隔符

> ID：16177843
> 
> 赞同：0
> 
> 时间：2013-04-23T19:43:10.030
> 
> 标签：ios, xamarin.ios, uitableview

好的，我无法弄清楚如何使用 MonoDevelop 删除分隔符或设置自定义 UITableCell 的背景颜色。我确信我在某个地方设置了一些价值，这会压倒我的尝试，但我不知道那可能在哪里。

我试过按照链接的问题无济于事：

*   [不需要的表格单元格显示](https://stackoverflow.com/questions/13391615/unwanted-tablecells-showing)
*   [删除分组 UITableView 中的分隔符](https://stackoverflow.com/questions/8358287/remove-separator-in-grouped-uitableview)
*   [是否可以删除分隔表格单元格中行的黑线？](https://stackoverflow.com/questions/2727460/is-it-possible-to-remove-the-black-line-which-separates-the-rows-in-a-tablecell)
*   [删除分组 UITableView 中的分隔符](https://stackoverflow.com/questions/8358287/remove-separator-in-grouped-uitableview)
*   [我可以强制 UITableView 隐藏空单元格之间的分隔符吗？](https://stackoverflow.com/questions/1633966/can-i-force-a-uitableview-to-hide-the-separator-between-empty-cells)
*   [消除 UITableView 下面多余的分隔符](https://stackoverflow.com/questions/1369831/eliminate-extra-separators-below-uitableview-in-iphone-sdk)

简而言之，我有一个继承自 UITableViewCell 的自定义类。在使用 IB 的那个类中，我将背景颜色设置为 RGB(235、240、242)。我还有一个故事板，它有一个继承自 UITableViewController 的自定义类，在 IB 中，我将分隔符样式设置为无，将分隔符颜色设置为清除。我还将背景颜色设置为 RGB(235, 240, 242)。尽管如此，我仍然看到表格单元格的背景颜色为白色，每个单元格之间有一个分隔符。

接下来我尝试在 UITableViewCell 构造函数中设置背景颜色。我也尝试在 UITableViewController 类中设置分隔符和背景：

```
public partial class NavTableViewController : UITableViewController
{

...

    public override void ViewDidLoad ()
    {
        base.ViewDidLoad ();
        this.TableView.SeparatorColor = UIColor.Clear;
        this.TableView.SeparatorStyle = UITableViewCellSeparatorStyle.None;
        this.TableView.BackgroundColor = UIColor.FromRGB(235, 240, 242);
    } // ViewDidLoad 
```

**编辑** 下面是我目前与 IB 设置相处的一些截图。我想我还应该提到（尽管我看不出这会如何影响任何事情）Table View Controller 位于 View Container 内部。

![结果](https://i.imgur.com/CxfWIOV.png "结果")

![表视图配置](https://i.imgur.com/4okOa0j.png "表视图配置")

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T12:58:13.490

似乎将代码从自定义移动`ViewDidLoad`到`ViewWillAppear`内部`UIViewTableController`解决了这个问题。`UITableViewStyle`使用什么（普通或分组）似乎并不重要。唯一需要注意的是，在表格背景颜色的单元格之间仍然留有 1 个像素的边框，但出于我的目的，这没关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T18:33:06.723

仅当表格为 UITableViewStyle.Grouped 时才有效。

我已经看到了您所看到的行为（设置背景颜色）

# android - phonegap android GO按钮不提交表单

> ID：16177847
> 
> 赞同：0
> 
> 时间：2013-04-23T19:43:27.097
> 
> 标签：android, forms, cordova, button, submit

我正在用 Phonegap 编写一个应用程序，并且我有一个通过 ajax 发送的注册表单。
当您点击注册按钮并执行该`formcheck()`功能时，它工作正常。但是，当我`GO`从我的安卓手机点击按钮时，它会提交表单而不是完成整个`formcheck()`过程。我试过了：

```
<form id="RegForm" onsubmit="formcheck();return false;"> 
```

我的表单没有正确的提交按钮，但有一个像这样的按钮：

```
<input type="button" id="submitbtn" onclick="formcheck()"/> 
```

我还尝试创建一个`new OnSubmitForm()`调用该函数`formcheck()`但无济于事的函数。
感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T07:03:32.937

找到了！

1）将此添加到JS部分：

```
$(document).ready(function() {
    $("#YourFormName").submit(function() {
    FormCheck();
    return false;
    });
});

function FormCheck() {
... validation process here ...
} 
```

2) 确保在您的表单中包含一个提交按钮 .. ( `<input type="submit"`)

希望它会帮助其他人，所以我的 5 小时尝试和测试时间不会浪费:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-07T23:43:13.627

只需确保您的表单标签是：

```
<form type='submit' onsubmit='return false;'></form> 
```

这使得提交操作不做任何事情。

如果您还需要隐藏键盘，请参阅[如何使用 JavaScript 隐藏 Android 键盘？](https://stackoverflow.com/questions/8335834/how-can-i-hide-the-android-keyboard-using-javascript). 一个简单的 onsubmit='hideKeyboard(); 返回错误；' 会照顾好这个。

# jquery - 使滚动动画不停止但平滑

> ID：16177850
> 
> 赞同：1
> 
> 时间：2013-04-23T19:43:31.170
> 
> 标签：jquery, animation, scroll, smooth

你们有什么想法让这个（[http://hvlmnns​​.de](http://hvlmnns.de/middle/) /middle /）更顺畅吗？在我的系统上它卡住了一点。

有这种 ios 后卷效果也很好。

这是代码

```
$(document).ready(function(){
    var wx=$(window).width(),wy=$(window).height(),dx=$(document).width(),dy=$(document).height();
$('html,body').width(dx).height(dy).stop().animate({scrollTop:(dy-wy)/2,scrollLeft:((dx-wx)/2)},0);
$(document).mousemove(function(e){
    var x=(dx-wx)*((e.pageX-$(window).scrollLeft())/wx);
    var y=(dy-wy)*((e.pageY-$(window).scrollTop())/wy);
    $('body').scrollLeft(x).scrollTop(y);

});
}); 
```

我不确定这个动画和 dequeue() 的东西，但我认为它最终会是解决方案，但我怎么说不知道如何平滑滚动动画而不会一直停止。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T18:23:05.893

有点想通了 [http: //hvlmnns​​.de/middle/](http://hvlmnns.de/middle/)

不是最顺利的事情，也不是最好的，但这必须完成工作

```
$(document).ready(function () {
    $('body').css({
        position: 'relative',
        margin: 0,
        padding: 0,
        overflow: 'hidden',
        width: '100%',
        height: '100%'
    })
    var wx = $(window).width(),
        wy = $(window).height(),
        dx = $(document).width(),
        dy = $(document).height();
    $('body').width(dx).height(dy).scrollTop((dy - wy) / 2).scrollLeft((dx - wx) / 2);
    var x = 0,
        y = 0;
    $(document).mousemove(function (e) {
        x = (dx - wx) * ((e.pageX - $(window).scrollLeft()) / wx);
        y = (dy - wy) * ((e.pageY - $(window).scrollTop()) / wy);
    });
    var obj = $('body');
    var xp = 0,
        yp = 0;
    $('body').scrollTop((dy - wy) / 2).scrollLeft((dx - wx) / 2);
    var loop = setInterval(function () {
        xp += (x - xp) / 60;
            yp += (y - yp) / 60;
        obj.scrollTop(yp).scrollLeft(xp);
    }, 1);
}); 
```

# r - 增加 ggplot2 中图例演示的中断

> ID：16177854
> 
> 赞同：2
> 
> 时间：2013-04-23T19:43:51.620
> 
> 标签：r, ggplot2

我有一个数据框，我想使用 ggplot2 创建热图，我的数据框如下所示：

```
dput(head(x,50))
structure(list(DAY = structure(c(15765, 15765, 15765, 15765, 
15765, 15765, 15765, 15765, 15765, 15765, 15765, 15765, 15765, 
15765, 15765, 15765, 15765, 15765, 15765, 15765, 15765, 15765, 
15765, 15765, 15765, 15765, 15765, 15765, 15765, 15765, 15765, 
15765, 15765, 15765, 15765, 15765, 15765, 15765, 15765, 15765, 
15765, 15765, 15765, 15765, 15765, 15765, 15765, 15765, 15765, 
15765), class = "Date"), Time = c("00:14", "00:29", "00:44", 
"00:59", "01:14", "01:29", "01:44", "01:59", "02:14", "02:29", 
"02:44", "02:59", "03:14", "03:29", "03:44", "03:59", "04:14", 
"04:29", "04:44", "04:59", "05:14", "05:29", "05:44", "05:59", 
"06:14", "06:29", "06:44", "06:59", "07:14", "07:29", "07:44", 
"07:59", "08:14", "08:29", "08:44", "08:59", "09:14", "09:29", 
"09:44", "09:59", "10:14", "10:29", "10:44", "10:59", "11:14", 
"11:29", "11:44", "11:59", "12:14", "12:29"), CPU = c(12.9428571428571, 
8, 8.03333333333333, 7.83333333333333, 6.9, 7.1, 6.9, 5.2, 5.66666666666667, 
7, 6.46666666666667, 5.93333333333333, 5.9, 6.4, 4.73333333333333, 
4.2, 8.13333333333333, 11.8333333333333, 16.1, 22.1, 27.2, 28.2333333333333, 
25.3666666666667, 26.1666666666667, 24, 23.2, 24.1, 24.7666666666667, 
27, 27.8333333333333, 28.6, 30.6333333333333, 38.3, 33.5, 36.9, 
41.7333333333333, 50.0666666666667, 46.9666666666667, 45.6666666666667, 
45.1333333333333, 52.9333333333333, 49.9, 47.8666666666667, 47.7, 
55.5, 50, 48.8333333333333, 48.2333333333333, 53.6666666666667, 
50.1379310344828)), .Names = c("DAY", "Time", "CPU"), row.names = c(NA, 
50L), class = "data.frame") 
```

当我执行以下操作时，我只看到瓷砖上的一些点，大部分是白色的。我的热图中需要有方形颜色。

```
ggplot(x, aes(DATE, Time, fill=CPU)) + geom_tile() + theme_bw()
 + scale_x_datetime(breaks = "2 weeks", labels=date_format("%b %d, %Y"))
 + scale_y_datetime(breaks="2 hours", labels=date_format("%H:%M"))
 + guides(fill = guide_legend(keywidth = 3, keyheight = 1)) 
+ scale_fill_gradientn(name="CPU Utilization", colours=c("#F0FFFF","#AEEEEE","#ADD8E6","#87CEFA","#00FF00","#E4F224","#C9821E", "#FF0000", "#FF0000"), value=c(0,0.19,0.2,0.5,0.8,0.81,1),
limits=c(0,100), breaks = c(20, 30, 40, 50, 60, 70, 80, 90, 100)) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T05:28:32.040

您可以使用`scale_fill_gradientn()`您需要的颜色来获取填充值。通过参数`limits=c(0,100)`，您将获得此范围内的图例。然后使用参数`values=`并`colours=`设置颜色分布。在我的示例中，比例从深绿色开始，然后变为绿色，变为红色，然后变为深红色，再变为红色。最后又是绿色和深绿色。我在`values=`0 到 1 的范围内设置了颜色应该改变的点——从 0 开始，红色从 0.2 开始，以 0.8 结束，依此类推。

```
ggplot(y, aes(DAY, Time, fill=CPU)) + geom_tile() + 
  theme_bw() + 
  scale_x_date(breaks = "2 weeks", labels=date_format("%b %d, %Y")) + 
  scale_colour_discrete(name="15 Minute CPU") + 
  scale_fill_gradientn(name="CPU Utilization",
        colours=c("darkgreen","green","red","darkred","red","green","darkgreen"),
        values=c(0,0.19,0.2,0.5,0.8,0.81,1),
        limits=c(0,100),
        breaks = c(20, 30, 40, 50, 60, 70, 80, 90, 100)) 
```

![在此处输入图像描述](https://i.stack.imgur.com/hBNlJ.png)

# java - 为什么 Path 类允许文件中的文件？

> ID：16177856
> 
> 赞同：0
> 
> 时间：2013-04-23T19:43:58.730
> 
> 标签：java, path

我正在玩 NIO Path 的东西，遇到了这个问题：

下面的代码片段会打印什么？

```
Path p1 = Paths.get("\\personal\\readme.txt");
Path p2 = Paths.get("\\index.html");
Path p3 = p1.relativize(p2);
System.out.println(p3); 
```

答案是

```
..\..\index.html 
```

但这会使整个路径：\personal\readme.txt\index.html

这对我来说似乎是无稽之谈，因为您不能将文件放在这样的文件中。你能？

如果 readme.txt 是一个目录而不是一个文件，我完全可以接受，但我很困惑为什么它允许这样的文件路径存在？

或者有什么奇怪的方法可以让你真正做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T19:50:01.643

结果是`..\..\index.html`

从javadoc：

> 此方法尝试构造一个相对路径，当针对此路径解析时，会生成一个与给定路径定位相同文件的路径。例如，在 UNIX 上，如果此路径为“/a/b”且给定路径为“/a/b/c/d”，则生成的相对路径将为“c/d”。如果该路径和给定路径没有根组件，则可以构造相对路径。

这意味着您必须从该路径向上爬两个文件夹才能到达可以到达给定路径的路径，`index.html`.

请记住，这些都是路径，而不是实际的文件/文件描述符。

```
Path p1 = Paths.get("\\personal\\readme.txt");
Path p2 = Paths.get("\\personal\\index.html");
Path p3 = p1.relativize(p2);
System.out.println(p3); 
```

prints `..\index.html`，意思是从`\\personal\\readme.txt`，上一个然后访问`index.html`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T19:54:43.640

ISO 和 Zip 文件（因此是 JAR/WAR/XUL/CHM...）都表示可以包含文件文件夹结构的文件。这些文件既可以作为文件处理，也可以作为文件夹处理；两者都是它们的合法用途。因此，这在语义上是有意义的：

```
Path p1 = Paths.get("\\personal\\photos.zip");
Path p2 = Paths.get("\\family\\me.png");
Path p3 = p1.relativize(p2);
System.out.println(p3);" 
```

虽然我不知道 Java 中有任何以这种方式运行的实现，但它是 XUL 和 Windows 资源管理器中使用的语义。

# python - Python 组织/设计 if 语句的 Pythonic 方式

> ID：16177862
> 
> 赞同：3
> 
> 时间：2013-04-23T19:44:19.713
> 
> 标签：python, design-patterns, if-statement

我正在学习 python，我想确保我以正确的方式组织“if”语句。我经常遇到的情况如下：

```
if x == 0:
    dostuff_A
    if y == 0:
        dostuff_B            
else:
    dostuff_B 
```

如您所见，我不断重复“dostuff_B”，并且必须不断地更改代码两次。我知道我可以有一个函数来代替“dostuff_B”，但我的问题是关于 if 设计。我发现的另一个解决方法是执行以下操作，但随后我复制了 if 语句。

```
if x == 0:
    dostuff_A
if x != 0 or y == 0:
    dostuff_B 
```

有任何想法吗？提前致谢！

更新：删除冒号前的空格。还更新了我的解决方法，因为没有意义。原始版本是：

```
if x == 0:
    dostuff_A
if x == 0 and y == 0:
    dostuff_B 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T19:51:35.133

我看到已经发布了一些正确的答案，但他们没有解释他们是如何找到解决方案的。

一种简化嵌套`if-else`语句的方法是使用真值表：

```
x    y    what you call
-----------------------
0    0    A and B
0    1    A
1    0    B
1    1    B 
```

从上表可以看出，您只在 时调用`x == 0`A。让我们把它放到代码中：

```
if x == 0:
    somestuff_A 
```

从同一张表中，您可以看到唯一不调用 B 的时间是 when`x == 0`和`y == 1`。同样，让我们​​将其放入代码中：

```
if x != 0 or y == 0:
    somestuff_B 
```

或者：

```
if not x == 0 or y == 0:
    somestuff_B 
```

如果你把这两段代码放在一起，你会得到：

```
if x == 0:
    somestuff_A
if not x == 0 or y == 0:
    somestuff_B 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-23T19:47:15.783

我不知道它是否更pythonic，但第二种风格对我来说更清楚（我同意冒号前的空格，并将其删除）。

```
if x == 0:
    dostuff_A
if x == 0 and y == 0:
    dostuff_B 
```

这也适用于其他语言。

但是，您拥有的两个示例（现在我仔细查看了）在逻辑上并不等效；也许你的意思是：

```
if x == 0:
    dostuff_A
if x != 0 or y == 0:
    dostuff_B 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-23T19:57:50.833

考虑到这个初始代码：

```
if x == 0 :
    dostuff_A
    if y == 0 :
        dostuff_B            
else :
    dostuff_B 
```

它可以重写为：

```
if x == 0:
    dostuff_A
if x != 0 or y == 0:
    dostuff_B 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-23T20:00:13.607

据推测，您`dostuff_B`实际上是一个更大的代码块，在分支之间应该是相同的，如果您更改其中一个，`dostuff_B`您还需要更改另一个以保持一致。在这种情况下，复制代码是非常危险的，最好不要在`if`语句中冗余。

正如评论中指出的那样，您的第二个示例与第一个示例不同。它应该是：

```
if x == 0:
    dostuff_A
if x != 0 or y == 0:
    dostuff_B 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-23T20:05:31.240

Regardless of your example, which can be easily rewritten to the code below, I’d say it depends on the situation which makes more sense. In any way, I would try to avoid having to specify `dostuff_A` or `dostuff_B` more than once. So you are allowed to use more complicated conditions there. On the other hand I would keep the two-level if, if the first `dostuff_B` would be related to the previous `dostuff_A` (implying that the second `dostuff_B` would be something else here). If `dostuff_A` and `dostuff_B` are completely unrelated to each other, separating them completely would be preferable.

```
if x == 0:
    dostuff_A

if x != 0 or y == 0:
    dostuff_B 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-23T20:02:16.403

首先，你是对的，你的 do_stuff 应该在两个单独的函数中。假设，我提出以下建议：

```
if x == 0 and y == 0:
   do_stuff_A()
   do_stuff_B()
elif x == 0:
   do_stuff_A()
else:
    do_stuff_B() 
```

在我看来，这清楚地表明了当我阅读代码时发生了什么：

*   如果 x 和 y == 0，则 do_stuff_A() 和 do_stuff_B()
*   如果 x == 0，则 do_stuff_A()
*   在所有其他情况下，只需 do_stuff_B()

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-23T20:01:04.127

当您编写一次性脚本时，哪种设计更符合 Pythonic 并不重要——如果可以理解，那就太好了。当您开始将其重构为更有用的东西时，您可以使用相应的[重构](http://www.martinfowler.com/refactoring/catalog/replaceConditionalWithPolymorphism.html)。

# c# - 无法对 System.String 和 System.DateTime 执行“>”操作

> ID：16177866
> 
> 赞同：4
> 
> 时间：2013-04-23T19:44:38.830
> 
> 标签：c#, asp.net

我正在尝试按日期过滤我的 DataView：

```
DataTable dt = GetTableData();
DataView dvEvents = dt.DefaultView;
dvEvents.RowFilter = "date > #" + DateTime.Now.ToString() + "#"; 
```

但我收到了这个错误：

> **无法对 System.String 和 System.DateTime 执行“>”操作。**

我也试过`DateTime.Now.ToString("MM/dd/yyyy")`了，我得到了同样的错误。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T19:49:30.627

如果您使用的是字符串值，则需要将 替换`#`为`'`。

例如：

```
dvEvents.RowFilter = "date > '" + DateTime.Now.ToString() + "'"; 
```

请参阅[此参考](http://www.csharp-examples.net/dataview-rowfilter/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T19:51:09.393

它看起来像`date`被定义为一个字符串。你有两个选择。

您可以确保字符串以`yyyyMMdd`格式存储（以便排序和过滤正常工作）并进行过滤，例如：

```
 dvEvents.RowFilter = "date > '" + DateTime.Now.ToString("yyyyMMdd") + "'"; 
```

或者您可以`date`变成实际`DateTime`列并保留当前代码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-01T02:21:29.740

我有一个类似的问题，并且已经建议的解决方案都没有奏效。一个解决方法是使用

```
DataTable dt = GetTableData();
DataView dvEvents = dt.DefaultView;
dvEvents.RowFilter = "date > '" + DateTime.Now.ToString("MM/dd/YYYY") + "'"; 
```

希望这可以帮助某人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T07:05:59.370

如果日期来自数据库，那么您必须在进行比较之前进行语言环境转换。

# mongodb - 在 MongoDB 中更新集合属性名称时出错

> ID：16177867
> 
> 赞同：1
> 
> 时间：2013-04-23T19:44:50.687
> 
> 标签：mongodb

所以我有以下MongoDB集合的结构

```
{ "_id" : ObjectId("516c48631f6c263a24fbbe7a"), "oldname" : 1, "name" : "somename" } 
```

我想将 OLD NAME 重命名为 NEW NAME 所以它看起来像，

```
{ "_id" : ObjectId("516c48631f6c263a24fbbe7a"), "newname" : 1, "name" : "somename" } 
```

所以我正在写这个命令，

```
db.element_type.update({}, {$rename: {'oldname': 'newname'}}, false, true); 
```

但它给了我这个错误

```
failing update: objects in a capped ns cannot grow 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T19:50:01.690

根据错误消息，问题在于您正在尝试更新一个有上限的集合，可能使用的 a`newname`比`oldname`.

您可以在文档中[阅读有关上限集合的信息。](http://docs.mongodb.org/manual/core/capped-collections/)它们旨在维持秩序，这就是您遇到这种情况的原因。

~~如果您必须使用上限集合，也许您应该删除并重新插入而不是更新。~~

# javascript - css3 PIE.js 在 IE8 中不起作用

> ID：16177870
> 
> 赞同：1
> 
> 时间：2013-04-23T19:45:04.177
> 
> 标签：javascript, html, css, css3pie

我在 IE8 中遇到了 pie.js 的问题。这是我的CSS代码

```
.example{
  top:0;
  font-family:Verdana, Arial, Helvetica, sans-serif;
  padding:0;
  -moz-border-radius:5px;
  -webkit-border-radius:5px;
  border-radius:5px;
  font-weight:bold; 
  cursor:pointer;
  text-decoration:none;
  position:relative;
  z-index:1;
  background-position: 0 50%;
  background-repeat:repeat-x;
  text-align:center; 
  -pie-poll:true;  
  } 
```

我用 jQuery 调用它

```
jQuery(document).ready(     
                    function() {
                        if (window.PIE) {
                         $('.example').each(function() {
                         PIE.attach(this);
                        });
                     }                  
                }); 
```

它在 IE7 中运行良好，但是当我切换到 IE8 时，直到我将鼠标悬停在样式元素上，饼图样式才会呈现。它仅在完全加载页面后的第一次发生！！稍后它可以正常工作....

我很确定我使用绝对路径来加载 pie.js 并且我已经处理了 Z-index 以及 position:relative ...

就是不知道怎么回事……有没有人有同样的问题？你如何解决它？

# python - Django：我们可以对 F 对象使用回调方法吗？

> ID：16177874
> 
> 赞同：-4
> 
> 时间：2013-04-23T19:45:16.627
> 
> 标签：python, django

例子：

```
def modify_field(param):
   #...
Model.objects.update(some_field=modify_field(F('some_field')) 
```

* * *

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T19:11:36.760

显然，您可以有一个回调方法，但前提是您从不使用 F 对象修改字段并且您符合 F 支持的任何标准。

# python - Python XOR 操作和 ser.read()

> ID：16177875
> 
> 赞同：1
> 
> 时间：2013-04-23T19:45:20.047
> 
> 标签：python, xor, xbee

我正在实现一个 Python 脚本来读取 XBee 发送的帧。PC 将接收帧并处理它们。

我有一个问题，因为我在 XBee 中使用 AP=2，所以所有帧都可以有转义字符。我想检测它们并在使用它们之前输入真实值。

这是我读取转义字节的代码片段：

```
read = ser.read()
if(toHex(read) != '7d'): #toHex converts a byte in Hex representation
    #escaped char
    read = logical_xor(ser.read(), 20) #you have to take the next character and make xor
#################################
def logical_xor(str1, str2):
    return bool(str1) ^ bool(str2) 
```

但它告诉我 str 不能用于该操作。你知道我必须做什么来解决它吗？

另外，我曾经像这样一起读取四个字节：

```
read = ser.read(4) 
```

...并尝试与以前相同（尝试获得下一个位置（`read[x+1]`））但它告诉我类似的事情......

转换包括`XOR`生成下一个字符和`0x20`.

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:48:22.817

你似乎把事情复杂化了——究竟`ser.read()`返回了什么？单个字符串？如果是这样：

```
read = ser.read()
if ord(read) != 0x7d:
    #escaped char
    read = ord(ser.read()) ^ 0x20 
```

# sublimetext2 - 在 Sublime Text 2 中更改“下一个文件”和“上一个文件”快捷方式

> ID：16177877
> 
> 赞同：9
> 
> 时间：2013-04-23T19:45:32.220
> 
> 标签：sublimetext2, keymapping

我没有运气更改在 Sublime 中切换文件的键绑定。有人知道这笔交易在这里吗？我想要实现的只是 cmd+] 和 cmd+[ 来显示下一个和上一个文件。然后我可以使用 tab 和 shift+tab 进行所有缩进。

```
[
   { "keys": ["super+]"], "command": "Next File" },
   { "keys": ["super+["], "command": "Previous File" }
] 
```

感谢大家！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-11-01T05:05:09.943

这实际上是您可能一直在寻找的。我发现返回到我正在处理的上一个文件更有用，而不是在选项卡中左右移动。但是您可以绑定到这两种行为。

```
// This is very useful, go back to the previously viewed file regardless of
// tab order
  { "keys": ["super+["], "command": "next_view_in_stack" },
  { "keys": ["super+]"], "command": "prev_view_in_stack" } 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-23T19:53:30.587

尝试这个：

```
[
  { "keys": ["ctrl+]"], "command": "next_view" },
  { "keys": ["ctrl+["], "command": "prev_view" }
] 
```

当然，这会进入“Key Bindings - User”文件。

# gwt - 将对象添加到列表框

> ID：16177878
> 
> 赞同：0
> 
> 时间：2013-04-23T19:45:34.933
> 
> 标签：gwt

我正在寻找一种将字符串以外的对象添加到列表框的方法。

例如，如果我有一个带有字段品牌、成本、颜色的汽车类型的对象，我希望能够在显示品牌的列表框中选择汽车，并使用变更处理程序在窗口中显示成本。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T19:50:31.550

我认为你正在寻找的是一个[`CellList`](http://google-web-toolkit.googlecode.com/svn/javadoc/2.5/com/google/gwt/user/cellview/client/CellList.html). 这是它的外观[示例。](http://gwt.googleusercontent.com/samples/Showcase/Showcase.html#!CwCellList)

您需要做的是创建您自己的类型，[`Cell`](http://google-web-toolkit.googlecode.com/svn/javadoc/2.5/com/google/gwt/cell/client/Cell.html)为它提供您要显示的对象，它负责创建 HTML 来显示它。

然后，您需要将您的值放在一个列表中，并可能将[`ListDataProvider`](http://google-web-toolkit.googlecode.com/svn/javadoc/2.5/com/google/gwt/view/client/ListDataProvider.html)它提供给`CellList`它需要的对象。

[`CellList`](http://google-web-toolkit.googlecode.com/svn/javadoc/2.5/com/google/gwt/user/cellview/client/CellList.html)javadoc 有一些很好的基本示例。

# jquery - 如何使用具有 100000 条记录的 DataTables？

> ID：16177879
> 
> 赞同：2
> 
> 时间：2013-04-23T19:45:35.413
> 
> 标签：jquery, ajax, twitter-bootstrap, datatables

因为我在我的网站中使用[Twitter Bootstrap](http://twitter.github.io/bootstrap/)，因此选择了[DataTables](http://datatables.net/)在页面上显示我的数据。在某些情况下，我有超过 10 万条记录，并希望在表中将它们显示为每页 20 条记录，但我不想将所有 10 万条记录加载到客户端，以防只想加载使用 JQuery Ajax 的每个页面都需要，我如何使用 DataTables 实现这样的场景？所有样本似乎都将整个数据加载到客户端！或者我错过了它！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T08:55:49.350

正如 Keven B 所说：
它在文档中：[datatables.net/examples/data_sources/server_side.html](http://datatables.net/examples/data_sources/server_side.html)

# jquery - 使用jquery获取按钮的ID

> ID：16177881
> 
> 赞同：1
> 
> 时间：2013-04-23T19:45:37.240
> 
> 标签：jquery

我有用于多个按钮的 jQuery 代码。我正在尝试获取按下的按钮的 ID，但我得到的只是“未定义”。我已经尝试了以下两种方法，但都给出了相同的结果。

我究竟做错了什么？

谢谢！

```
$(document).ready(function () {

    $("#btnSearch, #btnDirectorSearch, #btnEditorSearch, #btnViewableSearch").click(function () {

         alert($(this).id);
         alert(this.id);
     });

 }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T19:47:16.337

尝试使用[`attr`](http://api.jquery.com/attr/)：

```
$(this).attr("id") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T19:47:26.610

你需要这样做——

```
$(this).attr('id'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T19:48:22.420

查看[jQuery.attr()](http://api.jquery.com/attr/)方法。

它可用于提取任何属性的值。

在您的情况下，您在 id 属性之后：

```
$(this).attr('id'); 
```

它还**可以用于设置**属性：

```
$(this).attr('id', 'funkyId'); 
```

每当您有问题时，最好的办法是直接查看 jQuery 文档（非常好）。

*当我用谷歌搜索“ jquery get id* ”时，我被直接带到了上面的链接。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-13T10:31:26.520

当单击处理程序执行时，jQuery 已确保设置`this`为触发事件的 DOM 元素。这意味着您可以使用

```
alert(this.id) 
```

访问`id`属性。这是因为[`id`属性是这样暴露](http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-63534901)的——不涉及 jQuery。

你也可以选择使用[jQuery 的`attr`方法](http://api.jquery.com/attr/)来代替：

```
alert($(this).attr("id")) 
```

这样，您可以从 构造一个 jQuery 对象`this`，然后继续`attr`对该对象使用该方法。请注意，它`$(this)`没有`id`属性。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-23T20:17:55.460

你可以从

**$(document).ready(function () {
$("#btnSearch, #btnDirectorSearch, #btnEditorSearch, #btnViewableSearch").click(function () {
alert ($(this).attr("id"));
} );
});**

# php - 我们如何查询对象 id 的 mongodb 数组？

> ID：16177882
> 
> 赞同：1
> 
> 时间：2013-04-23T19:45:39.587
> 
> 标签：php, mongodb

我有一个由对象 ID 组成的子数组

```
 "selections" : ["5176d1f09de5ee2808028da9", "5176d1f09de5ee2808028e4d", "5176d1f09de5ee28080292fe", "5176d1f19de5ee2808029867"] 
```

当用户登录时，这些是使用 PHP 会话注册的：

```
var_dump($selections);

array(16) { [0]=> string(24) "5176d1f09de5ee2808028a7c" [1]=> string(24) "5176d1f09de5ee2808029180" [2]=> string(24) "5176d1f09de5ee2808029283" [3]=> string(24) "5176d1f19de5ee280802990c"} 
```

我从会话中获取它们，然后在查询中使用它们：

```
$selectionsFromSession= $_SESSION['selections'];

$list=$collection->find(array("_id"=>array('$in'=>  $selectionsFromSession )), .... 
```

此查询不返回任何内容。这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T19:49:05.273

您需要实例化 MongoId 对象。

```
foreach( $selections as &$selection ) {
    $selection = new \MongoId( $selection );
} 
```

然后，您将实例化对象数组传递给您的查询。

# java - 使用 Jsoup 填充 ListView

> ID：16177883
> 
> 赞同：0
> 
> 时间：2013-04-23T19:45:39.817
> 
> 标签：java, android, screen-scraping, jsoup

我正在尝试使用 Jsoup 解析网站，获取我获得的信息并填充`ListView`. HTML 如下所示：

```
<ul class="list_view">
  <li>
    <a href="/username/" >
      <table class="pinner">
        <tbody>
          <tr>
            <td class="first_td">
              <img src="http://myimgurl.com/img.jpg">                                           
            </td>
            <td>
              <span class="user_name">User Name</span>
            </td>
          </tr>
        </tbody>
      </table> 
    </a>
  </li>
</ul> 
```

所以，从这个 HTML 中，我需要`href`从 a 标签和 span.user_name 文本中获取。我需要获取这两个元素并将它们存储在一个`HashMap`（我认为？？）现在，我有一个`AsyncTask`这样的（但我不认为我这样做是正确的）：

```
 private class MyTask extends AsyncTask<Void, Void, List<HashMap<String, String>>> {

    @Override
    protected List<HashMap<String, String>> doInBackground(Void... params) {

        List<HashMap<String, String>> fillMaps = new ArrayList<HashMap<String, String>>();
        HashMap<String, String> map = new HashMap<String, String>();
        try {
            Document doc = Jsoup.connect("http://myurl.com").get();
            Elements formalNames = doc.select("li a table tbody tr td span.user_name");
            Elements userNames = doc.select("li a"); 

            for (Element formalName : formalNames) {
                map.put("col_1", formalName.text()); 
                fillMaps.add(map);

                System.out.println(formalName.text()); 

            } 
            for (Element userName : userNames) {
                map.put("col_2", userName.attr("href").toString());
                fillMaps.add(map);

                System.out.println(userName.attr("href").toString());
            }

        } catch (IOException e) {
            e.printStackTrace();
        }
        return fillMaps; 

    } 

    @Override
    protected void onPostExecute(List<HashMap<String, String>> result) { 

        String[] from = new String[] {"col_1", "col_2"};
        int[] to = new int[] { R.id.text1, R.id.text2 };
        ListView _listview = (ListView)findViewById(R.id.listView1);

        SimpleAdapter _adapter = new SimpleAdapter(FriendsActivity.this, fillMaps, R.layout.friends, from, to);
        _listview.setAdapter(_adapter);
    }
} 
```

这成功打印出我想要的信息，但它没有填充`ListView`. 我曾尝试重新安排等，但仍然没有运气。如果有任何帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T20:31:36.190

检查您的 SimpleAdapter 类中的 getView()。getView() 返回的视图应正确显示每个项目。

进程完成后，您可以调用 _adapter.notifyDataSetChanged()

**更新**

好的，我想我找到了您可能引用的示例。问题是，您一次又一次地使用相同的 HashMap。如果您一次又一次地将任何字符串放在任何键（“col_1”或“col_2”）上，它只会保存最后一个。因此，当您在屏幕上显示它时（在 onPostExecute 之后），所有视图将显示最后一个正式名称和用户名，因为添加到列表中的所有 HashMap 都只保存相同的最后一个（它们实际上是同一个 HashMap）。

我建议您每次在 fillMaps 上添加新的 HashMap。

# ios - 当触摸向外拖动时，UISlider 拇指会发生变化

> ID：16177884
> 
> 赞同：0
> 
> 时间：2013-04-23T19:45:40.023
> 
> 标签：ios, uislider

我正在更改`UISlider`拇指上的图像，如下所示：

```
[mySlider setThumbImage:thumbRegular forState:UIControlStateNormal];
[mySlider setThumbImage:thumbActive forState:UIControlStateHighlighted]; 
```

当我擦洗时，一切都按我的预期工作，但是当我的手指在擦洗时从拇指上掉下来（拖到外面），拇指图像变回“thumbRegular”，即使擦洗本身继续正常进行。（并在拖动返回内部时变回“thumbActive”）。

关于如何纠正这种行为的任何想法？还是预期的行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-03T14:03:20.690

也发生在我身上。只需确保在设置拇指图像后设置 minimumValue、maximumValue 和 value，一切都可以在 ios 6 上正常工作。

```
[mySlider setThumbImage:[UIImage imageNamed:@"image.png"] forState:UIControlStateNormal];
[mySlider setMinimumTrackImage:[UIImage new] forState:UIControlStateNormal];
[mySlider setMaximumTrackImage:[UIImage new] forState:UIControlStateNormal];

mySlider.minimumValue = 0;
mySlider.maximumValue = 100;
mySlider.value = 100; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-06T14:21:41.430

您可以将拇指定义为正常状态并`viewDidLoad()`像您一样在内部拖动：

```
mySlider.setThumbImage(normalImage, forState: UIControlState.Normal)
mySlider.setThumbImage(selectedImage, forState: UIControlState.Highlighted) 
```

并在您`UISlider`的.`Touch Drag Outside``Value Changed``ViewController`

例子：

```
@IBAction func sliderValueChangedAction(sender: UISlider)  {
        mySlider.setThumbImage(normalImage, forState: UIControlState.Normal)
    }

@IBAction func sliderDragOutside(sender: UISlider) {
        mySlider.setThumbImage(selectedImage, forState: UIControlState.Normal)
    } 
```

这两个操作允许您区分正常状态和将拇指拖动到外部时的拇指`UISlider`。

# java - Android AlarmManager 不会启动服务

> ID：16177889
> 
> 赞同：0
> 
> 时间：2013-04-23T19:46:02.597
> 
> 标签：java, android, service, alarmmanager

我有两个 AlarmManager 实现，它们应该启动两个服务——LMW 和 BWM——由于某种原因，BWM 每次都启动而 LMW 没有。我已经多次查看源代码，但我真的不确定为什么会发生这种情况。

附言

adb shell dumpsys 警报显示对 BWM 的引用但没有对 LWM 的引用

非常感谢任何输入！

报警器来源：

```
public class Rules extends Activity {
    private String password;
    private PendingIntent mPendingIntent;
    String TIMELIMIT = "10";

    TextView textSsid, textSpeed, textRssi, Time;

    private static final int NOTIFY_ME_ID = 1337;
    private int count = 0;
    private NotificationManager notifyMgr = null;
    public Handler mHandler = new Handler();
    public long mStartRX = 0;
    public long mStartTX = 0;
    public long txBytes;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.rules);

        String NDEF_PREF = "prefs";
        SharedPreferences prefs = getSharedPreferences(NDEF_PREF,
                Context.MODE_PRIVATE);
        String name = prefs.getString("name", "");
        String code = prefs.getString("corename", "");
        String time = prefs.getString("time", "");
        String ssid = prefs.getString("restricted", "");
        Time = (TextView) findViewById(R.id.Time);
        Time.setText(time);
        textSsid = (TextView) findViewById(R.id.Ssid);
        textSpeed = (TextView) findViewById(R.id.Speed);
        textRssi = (TextView) findViewById(R.id.Rssi);
        Time = (TextView) findViewById(R.id.Time);
        Long.toString(mStartTX);
        Long.toString(mStartRX);
        Long.toString(txBytes);
        mStartRX = TrafficStats.getTotalRxBytes();
        mStartTX = TrafficStats.getTotalTxBytes();
        if (mStartRX == TrafficStats.UNSUPPORTED
                || mStartTX == TrafficStats.UNSUPPORTED) {
            AlertDialog.Builder alert = new AlertDialog.Builder(this);
            alert.setTitle("Uh Oh!");
            alert.setMessage("Your device does not support traffic stat monitoring.");
            alert.show();
        } else {
            mHandler.postDelayed(mRunnable, 1000);
        }

    }

    private final Runnable mRunnable = new Runnable() {
        public void run() {
            TextView RX = (TextView) findViewById(R.id.RX);
            TextView TX = (TextView) findViewById(R.id.TX);

            long rxBytes = TrafficStats.getTotalRxBytes() - mStartRX;
            RX.setText(Long.toString(rxBytes));
            long txBytes = TrafficStats.getTotalTxBytes() - mStartTX;
            TX.setText(Long.toString(txBytes));
            mHandler.postDelayed(mRunnable, 1000);

            final Chronometer myChronometer = (Chronometer) findViewById(R.id.chronometer);
            myChronometer.start();

            DisplayWifiState();
            this.registerReceiver(this.myWifiReceiver, new IntentFilter(
                    ConnectivityManager.CONNECTIVITY_ACTION));

        }

        private void registerReceiver(BroadcastReceiver myWifiReceiver2,
                IntentFilter intentFilter) {
            // TODO Auto-generated method stub

        }

        private BroadcastReceiver myWifiReceiver = new BroadcastReceiver() {

            @Override
            public void onReceive(Context arg0, Intent arg1) {
                // TODO Auto-generated method stub
                NetworkInfo networkInfo = (NetworkInfo) arg1
                        .getParcelableExtra(ConnectivityManager.EXTRA_NETWORK_INFO);
                if (networkInfo.getType() == ConnectivityManager.TYPE_WIFI) {
                    DisplayWifiState();
                }
            }
        };

        public Date getTimeFromTimeString(String time) {
            String[] splitStrings = time.split(":");

            Date timeDate = new Date();
            timeDate.setHours(Integer.parseInt(splitStrings[0]));
            timeDate.setMinutes(Integer.parseInt(splitStrings[1]));
            return timeDate;
        }

        // Long.parseLong(time)

        public void DisplayWifiState() {

            ConnectivityManager myConnManager = (ConnectivityManager) getSystemService(CONNECTIVITY_SERVICE);
            NetworkInfo myNetworkInfo = myConnManager
                    .getNetworkInfo(ConnectivityManager.TYPE_WIFI);
            WifiManager myWifiManager = (WifiManager) getSystemService(Context.WIFI_SERVICE);
            WifiInfo myWifiInfo = myWifiManager.getConnectionInfo();

            if (myNetworkInfo.isConnected()) {

                textSsid.setText(myWifiInfo.getSSID());

                textSpeed.setText(String.valueOf(myWifiInfo.getLinkSpeed())
                        + " " + WifiInfo.LINK_SPEED_UNITS);
                textRssi.setText(String.valueOf(myWifiInfo.getRssi()));
            } else {
                textSsid.setText("---");

                textSpeed.setText("---");
                textRssi.setText("---");
            }
            ;

            // Start service using AlarmManager

            Calendar cal = Calendar.getInstance();
            cal.add(Calendar.SECOND, 10);
            Intent intent = new Intent(Rules.this, LMW.class);
            PendingIntent pintent = PendingIntent.getService(Rules.this, 0,
                    intent, 0);
            AlarmManager alarm = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
            alarm.setRepeating(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(),
                    7 * 1000, pintent);

            String NDEF_PREF = "prefs";
            SharedPreferences prefs = getSharedPreferences(NDEF_PREF,
                    Context.MODE_PRIVATE);
            String name = prefs.getString("name", "");
            String code = prefs.getString("corename", "");
            String time = prefs.getString("time", "");
            String ssid = prefs.getString("restricted", "");

            // Start 2nd service using AlarmManager

            // Calendar cal = Calendar.getInstance();
            // cal.add(Calendar.SECOND, 10);
            // Intent intent2 = new Intent(Rules.this, KillTimer.class);
            // PendingIntent pintent2 = PendingIntent.getActivity(Rules.this, 0,
            // intent2,
            // 0);
            // AlarmManager alarm2 = (AlarmManager)
            // getSystemService(Context.ALARM_SERVICE);
            // alarm2.setRepeating(AlarmManager.RTC_WAKEUP,
            // cal.getTimeInMillis(),
            // time != null ? 1000 : 0, pintent2);

            // Date futureDate = new Date(new Date().getTime() + 86400000);

            // futureDate.setHours(8);
            // futureDate.setMinutes(0);
            // futureDate.setSeconds(0);

            // Start 3rd service using AlarmManager
            Intent intent3 = new Intent(Rules.this, BWM.class);
            PendingIntent pintent3 = PendingIntent.getActivity(Rules.this, 0,
                    intent3, 0);
            AlarmManager alarm3 = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
            alarm3.setRepeating(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(),
                    7 * 1000, pintent3);

            // click listener for the button to start service
            Button btnStart = (Button) findViewById(R.id.button1);
            btnStart.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View v) {
                    startService(new Intent(getBaseContext(), LMW.class));
                    startService(new Intent(getBaseContext(), BWM.class));
                    Intent startMain = new Intent(Intent.ACTION_MAIN);
                    startMain.addCategory(Intent.CATEGORY_HOME);
                    startMain.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                    startActivity(startMain);

                }

            });

            // click listener for the button to stop service
            Button btnStop = (Button) findViewById(R.id.button2);
            btnStop.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View v) {
                    stopService(new Intent(getBaseContext(), LMW.class));
                    Intent startMain = new Intent(Intent.ACTION_MAIN);
                    startMain.addCategory(Intent.CATEGORY_HOME);
                    startMain.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                    startActivity(startMain);

                }
            });

        }
    };
} 
```

低分子量来源：

```
public class LMW extends Service {
    String Watchdog = "Watchdog";
    String Dirty1 = "playboy";
    String Dirty2 = "penthouse";
    String Dirty3 = "pornhub";
    String Dirty4 = "thepiratebay";
    String Dirty5 = "vimeo";
    String Dirty6 = "wired";
    String Dirty7 = "limewire";
    String Dirty8 = "whitehouse";
    String Dirty9 = "hackaday";
    String Dirty10 = "slashdot";
    Long mStartRX = TrafficStats.getTotalRxBytes();
    Long mStartTX = TrafficStats.getTotalTxBytes();

    @Override
    public IBinder onBind(Intent arg0) {
        return null;
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        Toast.makeText(getApplicationContext(), "Watchdog Running!",
                Toast.LENGTH_SHORT).show();
        Parse.initialize(this, "7gjqmUcoqu1IZPJSSxXLdE4L8efAugCXA7snLSH6",
                "5NckF83MUBumQ8L8zL7Akc4p07beMRnmvgCfhZdH");

        ParseUser.enableAutomaticUser();
        ParseACL defaultACL = new ParseACL();

        // If you would like all objects to be private by default, remove this
        // line.
        defaultACL.setPublicReadAccess(true);

        ParseACL.setDefaultACL(defaultACL, true);

        Long.toString(mStartTX);
        Long.toString(mStartRX);
        ParseObject testObject = new ParseObject("TestObject");
        testObject.put("DataO", String.valueOf(mStartTX));
        testObject.put("DataI", String.valueOf(mStartRX));

        testObject.saveInBackground();
        String[] projection = new String[] { Browser.BookmarkColumns.TITLE,
                Browser.BookmarkColumns.URL };
        Cursor cursor = getContentResolver().query(
                android.provider.Browser.BOOKMARKS_URI, projection, null, null,
                null);
        String urls = "";
        if (cursor.moveToFirst()) {
            String url1 = null;
            String url2 = null;
            do {
                String url = cursor.getString(cursor
                        .getColumnIndex(Browser.BookmarkColumns.URL));
                // Log.i(Watchdog, url);
                if (url.toLowerCase().contains(Dirty1)
                        || url.toLowerCase().contains(Dirty2)
                        || url.toLowerCase().contains(Dirty3)
                        || url.toLowerCase().contains(Dirty4)
                        || url.toLowerCase().contains(Dirty5)
                        || url.toLowerCase().contains(Dirty6)
                        || url.toLowerCase().contains(Dirty7)
                        || url.toLowerCase().contains(Dirty8)
                        || url.toLowerCase().contains(Dirty9)
                        || url.toLowerCase().contains(Dirty10)) {
                    Intent intent2 = new Intent(LMW.this, Warning.class);
                    intent2.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                    startActivity(intent2);
                    break;
                }
            } while (cursor.moveToNext());

        }

        return START_STICKY;
    }

    @Override
    public void onDestroy() {

        super.onDestroy();
        Toast.makeText(this, "Service Stopped", Toast.LENGTH_LONG).show();

    }

    @Override
    public void onCreate() {
        super.onCreate();

    }
} 
```

# uml - 在序列图中引用给定类的实例

> ID：16177894
> 
> 赞同：3
> 
> 时间：2013-04-23T19:46:37.577
> 
> 标签：uml, sequence-diagram

我必须建模一个系统，其中类的对象`Person`将调用类`getBook(...) : Book`上的静态方法，该方法`Book`将返回特定书籍的实例。

**怎么引用操作得到的书本实例？**

到目前为止，我可以想到两种方法，我从未见过/使用过这两种方法，这就是我寻找*正确*方法的原因。

第一种方法是直接在获得的 book 实例上调用方法，例如，如果返回的引用`getBook(...) : Book`是 named `matchingBook`，我会使用`matchingBook.doSomething(...)`，就像拥有一个局部变量一样。

第二种方法，我在序列图中发现的更多，是让操作返回的 book 实例与其自己的生命线一起出现，例如在 Book 类旁边，并用标记为 的箭头引用它`doSomething(...)`。

但是，对于第二种方法，这个对象实际上是操作返回的对象并不那么明显。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T14:30:10.510

第二种方法是正确的。为了表明您指向的是返回的对象 ( `matchingBook`)，您可以将变量名称添加到生命线的标题中，如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/kO3qF.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T20:24:11.483

第二种方法是正确的。每当您对第一个操作返回的对象调用操作时，最好的办法就是在第一个调用的结果和生命线之间进行名称匹配。

无论如何，我真的不明白你对第一种方式的期望：你会放在`matchingBook.doSomething(...)`哪里？在指向哪条生命线的箭头上？

# ios - iOS Powerpoint Viewer 问题

> ID：16177900
> 
> 赞同：1
> 
> 时间：2013-04-23T19:46:51.147
> 
> 标签：ios, ios5, ios6, quicklook

我想在我的应用程序中实现一个 PowerPoint 查看器。我尝试使用快速查看框架。但它不支持过渡动画和全屏。

有人可以帮我实现这两件事。

我还尝试在 Web 视图中打开演示文稿。

先谢谢了！

# c# - 如何在我的应用中打开锁屏设置页面？

> ID：16177902
> 
> 赞同：1
> 
> 时间：2013-04-23T19:46:56.210
> 
> 标签：c#, windows-phone-7

我已经创建了一个超链接并实现了点击事件，但是我怎样才能让它打开我手机的锁屏设置页面呢？

我想为我的用户快捷方式，以便他们可以设置通知

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T19:54:06.293

您无法从 WP7 中的代码打开锁定屏幕设置。

我知道你已经标记了它，`windows-phone7`但是对于那些遇到这个问题并以 WP8 为目标的人，你可以在 WP8 中做到这一点。只需使用[LaunchUriAsync](http://msdn.microsoft.com/en-gb/library/windows/apps/hh701484.aspx)方法

```
var openedLock = await Launcher.LaunchUriAsync(new Uri("ms-settings-lock:")); 
```

`ms-settings-lock`是锁定屏幕设置 URI，但您可以在[此处](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj662937%28v=vs.105%29.aspx)查看其他可用的 URI 方案。

# python-2.7 - 对包含字典的列表进行操作并返回字典

> ID：16177903
> 
> 赞同：0
> 
> 时间：2013-04-23T19:47:02.243
> 
> 标签：python-2.7

我有一个元素列表，其中每个元素都是一种字典。我希望这个实现在 Python 中完成。

我的输入是这样的：

```
MyList = [{'Kathy':1, 'Bob':1, 'Spencer':1}, {'Kathy':4, 'Cynthia':2, 'Bob':3, 'Goldman':1}, {'Spencer':2, 'Bob':1}] 
```

我的输出应该是这样的：

```
MyDict = {'Kathy':5, 'Bob':5, 'Spencer':3, 'Cynthia':2, 'Goldman':1} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T19:52:21.237

使用[计数器](http://docs.python.org/3/library/collections.html#collections.Counter)：

```
>>> from collections import Counter
>>> myList = [{'Kathy':1, 'Bob':1, 'Spencer':1}, {'Kathy':4, 'Cynthia':2, 'Bob':3, 'Goldman':1}, {'Spencer':2, 'Bob':1}]
>>> myDict = Counter()
>>> for d in myList:
        myDict.update(d)
>>> myDict
Counter({'Kathy': 5, 'Bob': 5, 'Spencer': 3, 'Cynthia': 2, 'Goldman': 1}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T19:53:17.037

这是使用 defaultdict 的一种方法。

```
import collections

MyDict = collections.defaultdict(int)
for d in MyList:
    for k,v in d.items():
        MyDict[k] += v
MyDict = dict(MyDict) #if you want a normal dict 
```

编辑：看起来 Counter 版本更好。但是了解 defaultdicts 仍然很重要，以防你不得不做一些除了添加整数之外的事情。例如，它们对于累积列表或集合很有用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-01-28T12:55:12.110

这是执行此操作的另一种方式，在我看来，这比目前提供的替代方案更具 Python 风格（但它更有可能使用更多内存，因为它不是基于生成器）：

```
my_dict = {key: 0
           for one_dict in list_of_dicts
           for key in one_dict.keys()}
my_dict = {key: one_dict[key]+my_dict[key]
           for one_dict in list_of_dicts
           for key in one_dict.keys()} 
```

编辑：感谢@ShadowRanger 的洞察力，但是，在这种情况下，我宁愿使用 .keys() 选项专门恢复密钥，而不是简单地遍历字典中的每个密钥对，因为需要密钥将此类键添加到最终字典中。

# php - 解析错误：语法错误，意外的 T_STRING，期待 '(' in

> ID：16177909
> 
> 赞同：0
> 
> 时间：2013-04-23T19:47:21.670
> 
> 标签：php, syntax-error, php-parse-error

我一直在尝试为朋友做一个排名系统。一切准备就绪，但出现了一个错误。错误：

```
Parse error: syntax error, unexpected T_STRING, expecting '(' in /blablabla/sn_rank.php on line 8 
```

这是我的代码：

```
<?
function lul($pts, $low, $high) {
if($pts <= $low) return false;
if($pts >= $high) return false;
return true;
}
function get_rank($pts){
if lul($pts, "0", "75"){
return "Newcomer";
}
if lul($pts, "75", "175"){
return "Junior";
}
if lul($pts, "175", "325"){
return "Senior";
}
if lul($pts,"325", "525"){
return "Advanced";
}
if lul($pts, "525", "775"){
return "Veteran";
}
}
echo get_rank($_GET['pts']);
?> 
```

请不要小看，我是新来的。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:49:52.443

根据[http://lxr.php.net/xref/PHP_TRUNK/Zend/zend_language_parser.y#284，if](http://lxr.php.net/xref/PHP_TRUNK/Zend/zend_language_parser.y#284)的正确语法是：

```
if (expr) 
```

所以每次都使用：

```
if (lul(...)) { ... } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T19:50:35.877

你需要这样做：

```
if(lul($pts, "0", "75")){
  return "Newcomer";
} 
```

注意它是如何被括在括号中的？

# ruby-on-rails - 导轨：nested_form_for 不能为空

> ID：16177919
> 
> 赞同：1
> 
> 时间：2013-04-23T19:48:06.420
> 
> 标签：ruby-on-rails, ruby, rubygems

我正在尝试使用 nested_form gem 创建一个下拉列表，该下拉列表将显示链及其位置的列表。当用户单击提交按钮时，nested_form 应该在名为 users_locations 的连接表中创建一个新条目。但是，表单吐出如下错误：

```
User locations user can't be blank 
```

换句话说，它抱怨 user_id 为 NULL，因此它无法在表中创建条目（因为 user_id 是 user_locations 表中的必填字段）。

_form.html.erb（在用户视图文件夹中）

```
 <div class="field" id="location_toggle">
    <%= f.label "Location:", :class => "form_labels", required: true %>
    <%= f.fields_for :user_locations do |location| %>
       <%= location.grouped_collection_select :location_id, Chain.all, :locations, :name, :id, :name, include_blank: false %>
    <% end %>
    <%= f.link_to_add "Add a Location", :user_locations, :class => "btn btn-primary btn-small" %>
    <br/>
  </div> 
```

user.rb（模型）

```
belongs_to :chain
has_many :user_locations
has_many :locations, :through => :user_locations
...
accepts_nested_attributes_for :user_locations, :reject_if => :all_blank, :allow_destroy => true
validates_associated :user_locations, :message => ": you have duplicate entries."
...
attr_accessible :first_name, :last_name, ... , :user_locations_attributes 
```

users_controller.rb

```
def create
    @user = User.new(params[:user])
    @user.save ? (redirect_to users_path, notice: 'User was successfully created.') : (render action: "new")
  end 
```

日志显示：

```
SELECT 1 AS one FROM "user_locations" WHERE ("user_locations"."user_id" IS NULL AND "user_locations"."location_id" = 1) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T23:40:22.750

我假设你是`user_location` `validates :user_id, presence: true`什么，对吧？

我最近在回答[这个问题](https://stackoverflow.com/questions/16118417/how-to-set-foreign-key-through-the-controller-in-rails#comment23021960_16118417)时看了这个，似乎在创建嵌套模型时，所有要创建的对象的验证都会在它们中的任何一个被保存之前运行，因此即使你的模型会在它被`user_id`设置时设置已保存，验证时无法保存。

要解决此问题，您可能需要禁用创建验证，例如：

```
# user_locations.rb
validates :user_id, presence: true, on: :update 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T20:12:10.327

看起来您正在`simple_form`与默认的 Rails 表单助手混合并获得一些奇怪的行为。我没有使用过`simple_form`，但我的猜测是您可以通过更改为 来解决您的`f.fields_for`问题`f.simple_fields_for`。

这是一个可能有帮助的[例子。](http://hansay.com/2011/11/30/using-nested-form-with-simple-form/)

# javascript - 无法调整 skydrive API 返回的图片大小

> ID：16177920
> 
> 赞同：1
> 
> 时间：2013-04-23T19:48:09.470
> 
> 标签：javascript, css, api

大家晚上好，

我在处理 API 返回的个人资料图片大小时遇到​​问题。我尝试通过 CSS 更改它，或者将它们添加到 body 中的 div 容器中，或者将宽度和高度附加到 API 请求的返回中。但图片的大小仍然保持不变。有人指出我做错了什么？

这是我使用的代码

CSS 部分（显示属性有效，但宽度和高度无效）：

```
#meImg{width:12px; height:15px; display:inline; } 
```

Javascript：

```
<body><div id="meImg" style="width:12px; height:15px;"></div> </body>

<script src="//js.live.net/v5.0/wl.js" type="text/javascript" language="javascript"></script>
<script type="text/javascript" language="javascript">
 function displayMe() {
    var imgHolder = id("meImg");
 WL.api({ path: "me/picture", method: "get" }).then(
function (response) {
   if (response.location) {
          imgHolder.innerHTML = "<img src='" + response.location + "' /> ";
       }
 }
);
 }
 </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:51:59.137

您应该在标签上设置`width`and ，而不是在.`height``<img>``<div>`

编辑： OP 似乎正在将 javascript 添加到帖子中，这可能会改变事情。

编辑2：好的，看起来我一开始是对的。如果要使用 CSS 设置图像样式，则需要`<img>`直接使用它调用标签，而不是包含`<div>`. 将`id`or添加`class`到`<img>`标签，然后在其上调用 CSS。

# d3.js - 如何在 d3 选择之外引用/调用 d3 散点图中的数据

> ID：16177922
> 
> 赞同：0
> 
> 时间：2013-04-23T19:48:14.933
> 
> 标签：d3.js

我有一个 d3 散点图，想知道如何获取附加到单个记录（圆圈）的数据值，以便稍后在代码中调用它。假设我们有以下数据：

```
ID  X   Y
A   1   1
B   2   2
C   3   3 
```

如何获得记录 B 的 X 值？

有谁知道怎么做？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T04:14:06.840

您可能需要显示更多代码，因为这取决于您附加数据的方式。但假设你有类似的东西

```
var circle = svg.selectAll("circle").data(myArrayOfDataObjects)
  .enter().append("circle"); 
```

您可以为您创建的 DOM 元素分配一个 ID 或类：

```
circle.attr("id", function(d) { return "dataRow" + d.ID; }); 
```

现在您可以使用 d3、plain JS 或您选择的库在以后获取 DOM 元素的句柄。D3 将其数据作为`__data__`属性附加到 DOM 元素上，因此您可以引用它来获取数据。D3 还提供了`.datum()`获取这个值的方法：

```
var myDataRow = d3.selectAll("#dataRowB").datum();
var xValue = myDataRow.X; 
```

或者，在纯 JavaScript 中：

```
var myDataRow = document.getElementById("#dataRowB").__data__;
// etc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T21:59:01.573

如果 jQuery 是一个选项，在您的 d3 中，您可以使用 jQuery`.data()`函数将 d3 数据直接附加到 SVG 元素。只需运行类似`.each(function(d){ $(this).data(d) })`.

然后，您可以在任何地方使用 访问数据`$(selector).data()`，其中`selector`指向您感兴趣的 DOM 元素或元素，例如`'#RecordB'`.

如果您的数据更复杂，（例如，`d = {foo: 'foo', bar: 'bar'}`），您将使用`$(selector).data()[foo]`在与选择器指向的任何内容相关联的数据中抓取任何键入“foo”的数据。

# c# - RichTextBox 插入媒体文件（如视频）

> ID：16177924
> 
> 赞同：1
> 
> 时间：2013-04-23T19:48:18.273
> 
> 标签：c#, video, richtextbox, media

无论如何在richtextbox控件中插入一些媒体内容，如视频文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T20:10:54.477

您可以尝试使用免费的[CKEditor](http://ckeditor.com/)。基于其[丰富的内容功能](http://ckeditor.com/about/features#user-rich-content)，它支持 Flash 视频，所以我想这应该适合你。

# html - 如何根据页面内容加载不同的图像？

> ID：16177933
> 
> 赞同：0
> 
> 时间：2013-04-23T19:48:37.163
> 
> 标签：html, image, conditional, src

我希望能够根据条件参数将一张图片加载到静态 html 页面中；所以如果 X="something" 然后 src="something.jpg"，如果 X="another" 然后 src="another.jpg" 等等。

我不能使用数据库。

所以我正在寻找一些其他技术或方法，可以使用某种数组并根据页面中的独特内容从该数组加载一个图像。

我猜 jQuery 可能会完成这项工作，或者可能使用 XML/XSLT，但我不是程序员，所以我们将不胜感激地收到任何建议/指南/指针:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T20:02:12.130

如果您愿意使用 jQuery，您可以在 DOM 完成加载后添加图像。

在你的 html 中添加一个 div 标签

```
<div id="test"></div> 
```

并使用 JavaScript 将图像添加到您的逻辑中

```
$(document).ready(){
 yourLogic = true;
    if (yourLogic){
        ('#test').prepend('<img id="imgId" src="path.png" />')
    }else{
        ('#test').prepend('<img id="imgId" src="someOtherPath.png" />')
    }
} 
```

# python - 模块可以在控制台导入，但不能在脚本中导入

> ID：16177939
> 
> 赞同：1
> 
> 时间：2013-04-23T19:49:01.707
> 
> 标签：python, linux, module, python-module, env

我在运行脚本时遇到了一个奇怪的问题，我无法加载`pymongo`，但是当我运行 hashbang 解释器（`/usr/bin/env python`）时它是可用的。

最初的调用`import pymongo`被埋在一个班级的深处，但即使我在第 1 行调用它，它也会失败。

为什么是这样？

这是 python 控制台的一些输出，显示`pymongo`可用：

```
# /usr/bin/env python
Python 2.7.4 (default, Apr 23 2013, 14:02:51)
[GCC 4.4.7 20120313 (Red Hat 4.4.7-3)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import pymongo
>>> 
```

这是脚本的前三行

```
# head -n 3 ./app/app.py
#!/usr/bin/env python
# -*- coding: utf-8 -*-
import pymongo 
```

这是失败：

```
# python ./app/app.py
Traceback (most recent call last):
  File "./app/app.py", line 3, in <module>
    import pymongo
ImportError: No module named pymongo 
```

但是运行`/usr/bin/env`正常...为什么？

```
# /usr/bin/env python ./app/app.py
Traceback (most recent call last):
  File "./app/app.py", line 37, in <module>
    db = backend.flowbackend.getBackendObject(config.db_backend, config.db_host, config.db_port, config.db_user, config.db_password, config.db_name)
      File "./app/../lib/backend/flowbackend.py", line 268, in getBackendObject
    return MongoBackend(host, port, user, password, databaseName)
  File "./app/../lib/backend/mongobackend.py", line 13, in __init__
    self.connect()
  File "./app/../lib/backend/mongobackend.py", line 62, in connect
    self.conn = pymongo.Connection(self.host, self.port)
  File "/usr/local/lib/python2.7/site-packages/pymongo/connection.py", line 220, in     __init__
    max_pool_size, document_class, tz_aware, _connect, **kwargs)
  File "/usr/local/lib/python2.7/site-packages/pymongo/mongo_client.py", line 336, in     __init__
    raise ConnectionFailure(str(e))
pymongo.errors.ConnectionFailure: could not connect to 127.0.0.1:27017: [Errno 111]     Connection refused 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-12-24T19:18:05.237

我对 pyserial 也有同样的问题，但在我的情况下，我的脚本文件名为 serial.py，所以当我尝试导入 serial 时，它无法识别我的包。我只是重命名我的文件并且工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T19:15:37.237

跑步`/usr/bin/python`是2.6.6和`/usr/local/bin/python`2.7.4。 `pip-python`正在影响`/usr/bin/python`。

```
# pip-python -E /usr/local/bin/python freeze
distribute==0.6.10
iniparse==0.3.1
pycurl==7.19.0
pygpgme==0.1
urlgrabber==3.9.1
wsgiref==0.1.2
yum-metadata-parser==1.1.2

# pip-python install pymongo
...

# pip-python -E /usr/local/bin/python freeze
distribute==0.6.10
iniparse==0.3.1
pycurl==7.19.0
pygpgme==0.1
pymongo==2.5
urlgrabber==3.9.1
wsgiref==0.1.2
yum-metadata-parser==1.1.2

# pip-python -E /usr/bin/python freeze
distribute==0.6.10
iniparse==0.3.1
pycurl==7.19.0
pygpgme==0.1
pymongo==2.5
urlgrabber==3.9.1
yum-metadata-parser==1.1.2 
```

两个实例必须引用相同的`libs`. 好的...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T20:02:36.303

检查主目录中的 .pythonrc。控制台执行它（如果存在），脚本不执行。这是我现在唯一能想到的。也许它设置了 sys.path 使得 pymongo 可以访问。

我假设您正在尝试以您的身份运行脚本，即启动交互式解释器的同一用户。如果不是，那也可能是一个原因。

# serial-port - 字节流中数据包的标识

> ID：16177947
> 
> 赞同：5
> 
> 时间：2013-04-23T19:49:38.977
> 
> 标签：serial-port, checksum, packet, serial-communication

我与加速度计传感器的通信有点问题。传感器连续输出约 8000 个读数/秒。传感器通过适配器插入 USB 端口并显示为 com4。我的问题是我似乎无法从字节流中挑选出传感器读取数据包。数据包大小为 5 个字节，格式如下：

```
 High nibble                     Low nibble

Byte 1      checksum, id for packet start   X high
Byte 2      X mid                           X low
Byte 3      Y high                          Y mid
Byte 4      Y low                           Z high
Byte 5      Y mid                           Y low 
```

X, y, z 是加速度。

在传感器的文档中，它指出第一个字节中的高半字节是校验和（计算 Xhigh+Xlow+Yhigh+Ylow+Zhigh+Zlow），也是数据包开始的标识。我对针对外部设备进行编程非常陌生，并且无法真正掌握如何将校验和用作包开始的标识符（校验和不会一直变化吗？）。这是识别数据包开始的常用方法吗？有谁知道如何解决这个问题？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T22:18:00.073

> ...无法真正掌握校验和如何用作包开始的标识符（校验和不会一直变化吗？）。

是的，校验和会改变，因为它是从数据中派生的。
但即使是固定值的数据包开头半字节（本身）也不足以（最初）识别（或验证）数据包。由于这是二进制数据（而不是文本），因此数据可以采用与任何固定值数据包开头相同的值。如果您对该起始半字节进行了简单的扫描，该算法很容易将数据半字节误识别为起始半字节。

> 这是识别数据包开始的常用方法吗？

不，但考虑到高数据速率，这似乎是一种最小化数据包大小的方案。

> 有谁知道如何解决这个问题？

您最初可能必须一次扫描五个字节的每个序列（即数据包的长度）。
计算这个“数据包”的校验和，并将其与第一个半字节进行比较。
匹配表明您（可能）具有数据包对齐。
不匹配意味着您应该扔掉第一个字节，并测试下一个可能的数据包，该数据包将从第二个字节开始（即移动剩余的 4 个字节并附加一个新的第 5 个字节）。

一旦实现（或假设）数据包对齐，您需要不断验证每个数据包的校验和，以确认数据完整性并确保数据包数据对齐。任何校验和错误都应该迫使另一次寻找正确的数据包数据对齐（从当前“数据包”的第二个字节开始）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T20:24:56.060

你需要做的是在你的项目中用 c# 导入一些免费的 SerialPortTerminal，然后首先检查你得到的所有数据和数据包，除非你已经这样做了。不仅仅是阅读，您还需要做一些类似...

```
 using System;
   using System.IO.Ports;
   using System.Windows.Forms;

   namespace SPE
   {
     class SerialPortProgram
     {
       // Create the serial port with basic settings
       private SerialPort port = new SerialPort("COM4",      9600, Parity.None, 8, StopBits.One);

       [STAThread]
       static void Main(string[] args)
       { 
         // Instatiate this class
         new SerialPortProgram();
       }

       private SerialPortProgram()
       {
         Console.WriteLine("Incoming Data:");

         // Attach a method to be called when there      // is data waiting in the port's buffer
         port.DataReceived += new         SerialDataReceivedEventHandler(port_DataReceived);

         // Begin communications
         port.Open();

         // Enter an application loop to keep this thread alive
         Application.Run();
       }

       private void port_DataReceived(object sender,      SerialDataReceivedEventArgs e)
       {
         // Show all the incoming data in the port's buffer
         Console.WriteLine(port.ReadExisting());
       }
     }
   } 
```

# iphone - iPhone 的 Safari：为什么地理定位提示会出现两次？

> ID：16177951
> 
> 赞同：3
> 
> 时间：2013-04-23T19:50:04.990
> 
> 标签：iphone, ios, uiwebview, geolocation, mobile-safari

考虑以下 iPhone 场景：

1.  选择设置->常规->重置->重置位置和隐私（只是为了确保清除所有警告作为此测试的准备）
2.  打开 Safari 并指向[http://maps.google.com](http://maps.google.com)
3.  当 ["Safari" 想使用您的当前位置] 消息出现时选择确定。
4.  [当 [" https://maps.google.com](https://maps.google.com) " 想使用您当前的位置] 消息出现后，再次选择确定。

到目前为止，一切都很好。现在向上滚动，您可以看到 Safari 的 URL 框，然后选择重新加载按钮（URL 旁边的圆形箭头）。这将重新提交表单，并导致第 4 步中的消息再次出现！（至少在我的 iOS 6、iPhone 5 设备上）

知道为什么在我已经确认“ [https://maps.google.com](https://maps.google.com) ”以使用我当前的位置之后再次出现消息吗？这是一个已知的问题？

我在使用 UIWebView 的基于 iPhone 的应用程序中遇到了这个问题，所以我决定使用内置的 Safari 应用程序检查相同的场景。我很惊讶地发现 Safari 应用程序也会发生这种情况......

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T13:43:31.207

我相信这是因为 2 种不同类型的地理位置触发。首先，您拥有带有 safari 请求的本机 w3c，然后是浏览器中的 Phonegap 调用。我有同样的问题。我的问题是他在谷歌地图中的地理位置在重置位置和隐私设置后只会出现一次。发现谷歌在细则中设置了一些限制。现在正在探索一些开源 mappi g 选项（Openstreetmap），它将接受我的 google kml 文件。

# waf - 我的 Waf wscript 是否可以调用当前目录中的其他 wscript？

> ID：16177955
> 
> 赞同：3
> 
> 时间：2013-04-23T19:50:19.967
> 
> 标签：waf

我正在用 Waf 构建一个项目。它有几个第三方依赖项，我想从我的 main 构建每个依赖项`wscript`。我的项目是这样组织的：

```
/boost/
/gtest/
/source/
/waf
/wscript
/wscript_boost
/wscript_gtest 
```

每个“依赖项”`wscript_*`都定义了命令，就像我的 main 一样`wscript`。

```
def options(opt): pass
def configure(conf): pass
def build(bld): pass 
```

如果我将依赖`wscript`文件放在依赖文件夹中，我可以调用`opt.recurse('boost gtest')`，但我不想将我的文件与第三方文件混合。

有什么方法可以让我`wscript`调用`wscript_boost`and`wscript_gtest`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T09:39:43.130

我认为在当前的 Waf 实现中是不可能的（[`waflib.Context.Context.recurse`](https://code.google.com/p/waf/source/browse/waflib/Context.py?spec=svn345f6bc99f54b668aa5b2fc867f450ec6da2d960&r=c3cbd4c35350b4bae24fc3bb15998f16217ac922#282)使用全局`WSCRIPT_FILE`变量）。

虽然丑陋，但*可以*在 main 的开头破解它`wscript`：

```
import waflib.Context
original_recurse = waflib.Context.Context.recurse

def new_recurse(ctx,*args, **kwargs):
  original_wscript_file = waflib.Context.WSCRIPT_FILE
  try:
    waflib.Context.WSCRIPT_FILE = (original_wscript_file + 
                                   kwargs.pop('suffix', ''))

    original_recurse(ctx, *args, **kwargs)
  finally:
    waflib.Context.WSCRIPT_FILE = original_wscript_file

waflib.Context.Context.recurse = new_recurse 
```

你的主要`wscript`将是这样的：

```
def configure(cfg):
  cfg.recurse(suffix='_boost')
  cfg.recurse(suffix='_gtest') 
```

请注意，有一些副作用，`WSCRIPT_FILE`当您在`wscript_boost`文件中时会加上后缀。

您还可以向waf 项目[提交问题。](https://code.google.com/p/waf/issues/list "Waf 问题列表")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T14:01:06.270

这样做的方法通常是将 wscript 放入每个子目录并使用 recurse ：

```
/boost/
/boost/wscript
/gtest/wscript
/source/
/waf
/wscript 
```

并使用递归：

```
def build(bld):
     # ...
     bld.recurse("boost")
     bld.recurse("gtest")
     # ... 
```

# regex - 用“，”之间的正则表达式提取文本

> ID：16177957
> 
> 赞同：0
> 
> 时间：2013-04-23T19:50:31.130
> 
> 标签：regex, sequence

我一直在努力制作一个正则表达式来提取下面的信息，分为“，”之间的 3 部分。只有第一个和第二个序列（星期五和日期已成功）。

2013 年 4 月 26 日星期五 18:30

我希望有人有经验。

此致

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T19:57:01.047

为什么不简单地拆分字符串并修剪各个部分的多余空格？例如，用 C# 详细编写：

```
string input = "Friday, 26 Apr 2013, 18:30";

string[] parts = input.Split(',');

for (int i = 0; i < parts.Length; i++)
{
    parts[i] = parts[i].Trim();
}

Console.WriteLine(parts[0]);    // "Friday"
Console.WriteLine(parts[1]);    // "26 Apr 2013"
Console.WriteLine(parts[2]);    // "18:30" 
```

如果您真的想为此使用正则表达式，`^(.*),(.*),(.*)$`应该可以：

```
string input = "Friday, 26 Apr 2013, 18:30";

Regex regex = new Regex("^(.*),(.*),(.*)$", RegexOptions.Singleline);
Match match = regex.Match(input);

Console.WriteLine(match.Groups[1].Value.Trim());    // "Friday"
Console.WriteLine(match.Groups[2].Value.Trim());    // "26 Apr 2013"
Console.WriteLine(match.Groups[3].Value.Trim());    // "18:30" 
```

添加适当的错误检查留给读者作为练习。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T20:01:30.657

以下正则表达式匹配整个部分：

```
, 18:30
I hope someone has the experience.
Best regards

,+\s[0-9]+:[0-9]+ \r*.* 
```

但是，是的，这对于这种“, Hour:Minuts [...]” 格式非常特殊。如果您使用 PHP 或您的语言中的等价物，则应该进行拆分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T20:01:36.630

我认为你真正想要的是这样的：

```
from datetime import datetime
s="Friday, 26 Apr 2013, 18:30"
d=datetime.strptime(s, "%A, %d %b %Y, %H:%M")
d

Out[7]: datetime.datetime(2013, 4, 26, 18, 30) 
```

有关详细信息，请参阅[strptime](http://docs.python.org/2/library/datetime.html#datetime.datetime.strptime)和[日期格式](http://docs.python.org/2/library/datetime.html#strftime-and-strptime-behavior)文档 :)

编辑：对不起，我以某种方式假设您使用的是 Python。不过其他语言也有类似的习语，例如[PHP 的 date_parse](http://php.net/manual/en/function.date-parse.php)，C# 的[DateTime.Parse](http://msdn.microsoft.com/en-us/library/1k1skd40.aspx)等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T20:15:37.917

就像 m01 的回答一样，您可以使用 C# 尝试这种方法：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Globalization;

namespace TestDate
{
    class Program
    {
        static void Main(string[] args)
        {
            string dateString = "Friday, 26 Apr 2013, 18:30"; // Modified from MSDN
            string format = "dddd, dd MMM yyyy, HH:mm";

            DateTime dateTime = DateTime.ParseExact(dateString, format, CultureInfo.InvariantCulture);
            Console.WriteLine(dateTime);
            Console.Read();
        }
    }
} 
```

这将打印出在用户机器上配置的本地化日期和时间。对我来说，它在 2013 年 4 月 16 日下午 6:30:00 打印出来。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T20:04:07.087

您没有指定语言，所以我将使用标准的 REGEX 方法来回答这个问题。

`(?<=(^|,\s+)).+?(?=(,|$))`会为你工作。

让我打破它在做什么。

*   `(?<=(^|,\s+)`- 向前查找字符串或逗号的开头，后跟空格，但不要将其包含在匹配中。所有比赛都必须在他们面前有这个。
*   `.+?`- 抓住所有角色，但不要贪婪。
*   `(?=(,|$))` - 在后面寻找字符串或逗号的结尾。所有比赛都必须在他们身后有这个。

在您的测试用例上运行时`Friday, 26 Apr 2013, 18:30`，我得到 3 个匹配项：

*   `Friday`
*   `26 Apr 2013`
*   `18:30`

# javascript - 更改 HTML 标记文本 JavaScript

> ID：16177959
> 
> 赞同：0
> 
> 时间：2013-04-23T19:50:35.110
> 
> 标签：javascript, jquery, cordova

我想更改以下 html div 的内容。我正在使用 JQuery PhoneGap。我不能让它太工作，任何帮助都会很棒。

```
<div id="output"> This should change </div>
<script>
    $('#output').text('Changed with jQuery');
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T19:54:41.910

即使没有 jQuery，你也可以这样做：

```
document.getElementById("output").innerHTML = "CHANGED!"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T19:55:07.293

PhoneGap 经常与 jQuery 一起使用，但它们不是一回事。确保您已导入 jQuery。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T20:12:37.893

你应该这样写

**$("#output").html('你喜欢的内容');**

# sql - JPQL 查询 - 按计数排序

> ID：16177960
> 
> 赞同：0
> 
> 时间：2013-04-23T19:50:35.693
> 
> 标签：sql, jpa, hql, jpql

我需要实现一个命名查询，它返回一个按参加活动的朋友数量排序的活动列表。

例如，此查询返回按参加活动的人数排序的活动列表：

```
 SELECT r.event
    FROM RSVP AS r 
    JOIN r.event.rsvpList rr 
    WHERE r.profile.user.uuid = :userUuid 
    AND r.rsvpStatus = RSVPStatus.ATTENDING 
    GROUP BY r.event 
    ORDER BY COUNT(rr) DESC 
```

或其他示例，朋友事件列表：

```
 SELECT r.event 
        FROM RSVP AS r 
        WHERE r.profile IN 
            (   SELECT f.profileTo 
                FROM Friend f 
                WHERE f.profileFrom.user.uuid = :userUuid
            )
        AND r.rsvpStatus = :rsvpStatus  
        GROUP BY r.event 
```

我尝试执行以下操作：

```
 SELECT r.event
    FROM RSVP AS r 
    JOIN r.event.rsvpList rr 
    WHERE r.profile.user.uuid = :userUuid 
    AND r.rsvpStatus = RSVPStatus.ATTENDING
    AND rr.profile IN
        (
            SELECT f.profileTo 
            FROM Friend f 
            WHERE f.profileFrom.user.uuid = :userUuid
        )       
    GROUP BY r.event 
    ORDER BY COUNT(rr) DESC 
```

但是这个查询返回了发生在朋友身上的事件并跳过了其他事件。

这是我的数据库的简化图： ![方案](https://i.stack.imgur.com/wunX6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T21:54:35.067

您没有发布您的实体，所以我无法尝试，但我认为这应该可行：

```
SELECT r.event, (
    SELECT count(*)
    FROM RSVP rr
    WHERE rr.event = r.event
        AND rr.profile IN
        (
            SELECT f.profileTo 
            FROM Friend f 
            WHERE f.profileFrom.user.uuid = :userUuid
        )
    ) count
FROM RSVP AS r 
WHERE r.profile.user.uuid = :userUuid 
    AND r.rsvpStatus = RSVPStatus.ATTENDING      
ORDER BY 2 DESC 
```

这里的问题是 HQL 不支持`ORDER BY`子句中的子查询，因此您必须再选择一列仅用于排序。

# c# - 如何使用 protobuf 将 ServiceStack 服务与非 ServiceStack 客户端集成？

> ID：16177964
> 
> 赞同：3
> 
> 时间：2013-04-23T19:50:46.863
> 
> 标签：c#, servicestack, protocol-buffers, protobuf-net

我想在服务器端使用ServiceStack，我想使用protobuf-net作为ServiceStack使用的序列化系统。但是，一些客户端不会使用 ServiceStack 客户端库。他们将直接使用 protobuf-net。

在阅读广泛链接的 ServiceStack 协议缓冲区操作指南 ( [http://stevenhollidge.blogspot.in/2012/04/servicestack-rest-with-protobuf.html](http://stevenhollidge.blogspot.in/2012/04/servicestack-rest-with-protobuf.html) ) 时，它表明使用 [DataContract] 和 [DataMember(Order=i)]分别在类和属性上的属性。但是，当我阅读 protobuf-net 文档时，它表明属性是 [ProtoContract] 和 [ProtoMember(i)]。

如果我希望我的 DTO 同时使用本机 protbuf-net 和 ServiceStack 的 protobuf-net 包装器，我是否需要将这两个属性都添加到每个类和属性中，或者其中一个就足够了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T20:02:10.733

ProtoBuf 需要从 Properties 到数字索引的映射，[您指定的两个选项都是](https://stackoverflow.com/a/8179429/85785)执行此操作的等效方法：

```
[DataContract]
public class Dto
{
    [DataMember(Order=i)]
    public string PropertyName { get; set; }
}

[ProtoContract]
public class Dto
{
    [ProtoMember(i)]
    public string PropertyName { get; set; }
} 
```

# c++ - 理解 C++ 中的位移

> ID：16177966
> 
> 赞同：0
> 
> 时间：2013-04-23T19:51:02.960
> 
> 标签：c++, linux, gcc, bit-manipulation

我必须调试别人编写的 C++ 代码。我在位移方面的经验很少，因此这个问题。这是相同代码的修改（值和与位移无关的代码）版本：

```
void get16Bits1(const char * data)
{
    cout<<(((uint32_t)((const uint8_t *)(data))[1]) << 8)<<endl;
    cout<<(uint32_t)((const uint8_t *)(data))[0]<<endl;
}

int main(){
   const char * data = "francesmccurdey\0";
   get16Bits1(data);
   return 0;

} 
```

打印出来：

```
29184
102 
```

我没有得到的部分是`get16Bits1()`函数，转换为`uint32_t`改变输出。当我有这个时：

```
void get16Bits1(const char * data)
    {
        cout<<((const uint8_t *)(data))[1]<<endl;
        cout<<((const uint8_t *)(data))[0]<<endl;
    }

output is:
r
f 
```

我在 linux 架构上使用 gcc 编译器进行编译：x86_64 和字节顺序是小端。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T20:01:54.320

`cout<<(((uint32_t)((const uint8_t *)(data))[1]) << 8)<<endl;`

`data[1]`是`'r'`ASCII 中的 0x72。

`0x72 << 8 = 0x7200 = 29184`

对于下一行`get16Bits1()`：`cout<<(uint32_t)((const uint8_t *)(data))[0]<<endl`

此行仅将值 data[0] 打印为`uint32_t`. `data[0]`是`'f'`ASCII 中的 0x66（十进制中的 102）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T20:02:01.030

以十六进制查看输出是否有帮助？

```
7200
66 
```

*   [http://ideone.com/0tJcsQ](http://ideone.com/0tJcsQ)

# c# - 将 MySQL 查询转换为 Sqlite (SUBSTRING_INDEX)

> ID：16177969
> 
> 赞同：1
> 
> 时间：2013-04-23T19:51:24.550
> 
> 标签：c#, mysql, sqlite, substring

我正在开发一个 C# 项目，该项目有一个库来执行各种项目之间的常见任务。

我在库中有一个函数，它从表中获取警报列表。这个查询是在 MySQL 中完成的，但我现在需要与 SQLite 数据库相同的功能。

下面是我试图从 MySQL 移植到 Sqlite 的查询。

```
SELECT id, min(date) as min_date, max(date) as max_date, type, partMsg, level, page, COUNT(partMsg) AS msgCount FROM (SELECT id, date, type, SUBSTRING_INDEX(message, ':', 1) AS partMsg, level, page FROM alarms a WHERE acknowledged='0') p GROUP BY partMsg 
```

当我在 Sqlite 数据库上运行这个查询时，它会抛出一个异常，指出 SUBSTRING_INDEX 不是一个有效的函数。SQLite 是否具有与此相同的替代功能。

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T20:04:12.320

尝试：

```
SELECT id, min(date) as min_date, max(date) as max_date, type, partMsg, level, page, COUNT(partMsg) AS msgCount FROM (SELECT id, date, type, substr(message, ':', 1) AS partMsg, level, page FROM alarms a WHERE acknowledged='0') p GROUP BY partMsg 
```

# php - 在MYSQL中选择非注册值

> ID：16177970
> 
> 赞同：0
> 
> 时间：2013-04-23T19:51:29.373
> 
> 标签：php, javascript, mysql, select

我在 Mysql 中有两个表，Products 和 Inventory...

产品 int id_product varchar 名称

库存id_inventory product_id 存在

因此，当我的产品“3”缺货时，我删除了 Inventory 中 product_id = 3 的行现在我需要获取我在 Inventory 中删除的所有值，因为我需要报告丢失的产品...

如何进行此查询？

我用过`SELECT i.* FROM inventory i, products p WHERE i.product_id!=p.id_product`但是不行。。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:53:42.480

LEFT JOIN 会按照您的意愿进行操作，因为您要查找的行在产品行的库存中没有对应的行，因此会给出查询...

```
SELECT
    p.product_id
FROM product p
LEFT JOIN inventory i
ON i.product_id = p.product_id
WHERE i.product_id IS NULL 
```

或者，您可以简单地在不可用时不从库存中删除该行。然后做类似的事情

```
SELECT
    p.product_id
FROM product p
INNER JOIN inventory i
ON i.product_id = p.product_id
AND i.quantityInStock = 0 
```

无论哪种方式都有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T19:58:15.670

或者

```
select p.* from product p 
where not exists (select null from inventory i where i.product_id=p.id_product) 
```

# jquery - 如何在 asp.net mvc2 应用程序的 jquery 方法中访问 ViewModel 属性

> ID：16177973
> 
> 赞同：0
> 
> 时间：2013-04-23T19:51:36.487
> 
> 标签：jquery, asp.net-mvc-2

我正在研究 asp.net mvc2 应用程序。我有一个 ViewModel 定义如下：

```
 public class TestViewModel
    {
        /// <summary>
        /// Get and Set the EnabledSections
        /// </summary>
        public List<string> EnabledSections { get; set; }
    } 
```

我正在使用操作方法中的列表填充 TestViewModel 的属性 EnabledSections ：

```
public ActionResult TestAction(Student student, string[] sections = null)
{
      var model = new TestViewModel 
      {
        EnabledSections  = model.TestSections.Where(s => s.Value.Item2 == true).Select(s => s.Key).ToList();
      }
} 
```

我需要在 jquery 方法中访问 EnabledSections ：

```
function CheckEnabledSection(){
} 
```

谁能指导我解决上述问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T20:04:49.840

Firstly, you must pass your view model into your view, so from within your action it would look something like:

```
return View("ViewName",model); 
```

Also, be sure to declare the type of model within your view:

```
@model TestViewModel 
```

Then from within your view, you need to add any information from the model into your js:

```
<script>
  @{
    var jsSerializer = new JavaScriptSerializer();
  }
  var enabledSections = @jsSerializer.Serialize(Model.EnabledSections);//serialize the list into js array

</script> 
```

Now you can access the js variable `enabledSections` within your javascript

# internet-explorer - XMLHttpRequest 仅适用于 IE，不适用于其他浏览器

> ID：16177985
> 
> 赞同：0
> 
> 时间：2013-04-23T19:52:47.460
> 
> 标签：internet-explorer, google-chrome, firefox, post, xmlhttprequest

我已经做了任何可能的搜索，但仍然感到困惑。我试图将两个变量发送到某个 php 页面，但我的脚本仅适用于 IE；其他浏览器不想发送请求。怎么了？谢谢！

```
<script language="JavaScript" type="text/javascript">
function sendwnls(){

var hr = new XMLHttpRequest();

var url = "php_inc/rati.php";
var wn = "<?php echo $ln1 ?>";
var lns = "<?php echo $ln2 ?>";
var vars = "wn="+wn+"&ls="+ls;

hr.open("POST", url, true);

hr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");

 hr.onreadystatechange = function() {
 if(hr.readyState == 4 && hr.status == 200) {
  var return_data = hr.responseText;
  document.getElementById("status").innerHTML = return_data;
  }
  }

  hr.send(vars); // Actually execute the request
document.getElementById("status").innerHTML = "processing...";
} 
```

# mapreduce - Writing reduce function in couchbase

> ID：16177986
> 
> 赞同：4
> 
> 时间：2013-04-23T19:52:48.280
> 
> 标签：mapreduce, couchbase

This is my first attempt at couchbase. My json doc looks like this:

```
{
   "member_id": "12345",
   "devices": [
       {
           "device_id": "1",
           "hashes": [
               "h1",
               "h2",
               "h3",
               "h4"
           ]
       },
       {
           "device_id": "2",
           "hashes": [
               "h1",
               "h2",
               "h3",
               "h4",
               "h5",
               "h6",
               "h7"
           ]
       }
   ]
} 
```

I want to create a view which tells me all member_ids for a given hash.

Something like this:

```
h1["12345","233","2323"]  //233,2323 are other member id    
h2["12345"] 
```

The `member_id` should appear once in the set.

I wrote a map function

```
function (doc, meta) {
  for(i=0;i< doc.devices.length;i++)
  {
    for(j=0;j< doc.devices[i].hashes.length;j++)  {
        emit(doc.devices[i].hashes[j],null)
          }
  }
} 
```

and this returns

```
h1 "12345"
h1 "12345"
h2 "12345"
h1 "233" 
```

but I'm not able to move forward from here. How should I change my map function to reduce the result?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T22:47:45.863

地图功能。主要是你的，但`meta.id`作为一个值发出。

```
function(doc, meta) {
  for(i=0; i< doc.devices.length; i++) {
    for(j=0; j< doc.devices[i].hashes.length; j++)  {
      emit(doc.devices[i].hashes[j], meta.id)
    }
  }
} 
```

减少功能。只是从值返回唯一数组（取自[https://stackoverflow.com/a/13486540/98509](https://stackoverflow.com/a/13486540/98509)）

```
function(keys, values, rereduce) {
  return values.filter(function (e, i, arr) {
    return arr.lastIndexOf(e) === i;
  });
} 
```

# sql - 以平均每小时转置 SQLite 行和列

> ID：16177990
> 
> 赞同：1
> 
> 时间：2013-04-23T19:52:53.060
> 
> 标签：sql, sqlite, pivot

我在 SQLite 中有一个名为 param_vals_breaches 的表，如下所示：

```
id    param       queue       date_time              param_val    breach_count
1     c           a           2013-01-01 00:00:00    188          7
2     c           b           2013-01-01 00:00:00    156          8
3     c           c           2013-01-01 00:00:00    100          2
4     d           a           2013-01-01 00:00:00    657          0
5     d           b           2013-01-01 00:00:00    23           6
6     d           c           2013-01-01 00:00:00    230          12
7     c           a           2013-01-01 01:00:00    100          0
8     c           b           2013-01-01 01:00:00    143          9
9     c           c           2013-01-01 01:00:00    12           2
10    d           a           2013-01-01 01:00:00    0            1
11    d           b           2013-01-01 01:00:00    29           5
12    d           c           2013-01-01 01:00:00    22           14
13    c           a           2013-01-01 02:00:00    188          7
14    c           b           2013-01-01 02:00:00    156          8
15    c           c           2013-01-01 02:00:00    100          2
16    d           a           2013-01-01 02:00:00    657          0
17    d           b           2013-01-01 02:00:00    23           6
18    d           c           2013-01-01 02:00:00    230          12 
```

我想编写一个查询，它将显示一个特定的队列（例如“ **a** ”），其中每个参数每小时的平均**param_val**和**bypass_count 。**因此，转置数据以获得如下所示的内容：

```
Results for Queue A

         Hour 0         Hour 0              Hour 1         Hour 1              Hour 2         Hour 2
param    avg_param_val  avg_breach_count    avg_param_val  avg_breach_count    avg_param_val  avg_breach_count
c        xxx            xxx                 xxx            xxx                 xxx            xxx
d        xxx            xxx                 xxx            xxx                 xxx            xxx 
```

这可能吗？我不知道该怎么做。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T20:18:56.260

SQLite 没有 PIVOT 函数，但您可以使用带有`CASE`表达式的聚合函数将行转换为列：

```
select param,
  avg(case when time = '00' then param_val end) AvgHour0Val,
  avg(case when time = '00' then breach_count end) AvgHour0Count,
  avg(case when time = '01' then param_val end) AvgHour1Val,
  avg(case when time = '01' then breach_count end) AvgHour1Count,
  avg(case when time = '02' then param_val end) AvgHour2Val,
  avg(case when time = '02' then breach_count end) AvgHour2Count
from
(
  select param,
    strftime('%H', date_time) time,
    param_val,
    breach_count
  from param_vals_breaches
  where queue = 'a'
) src
group by param; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!7/f5e0e/11)

# c++ - 重新配置现有对象而不是替换它们的循环缓冲区？

> ID：16177994
> 
> 赞同：1
> 
> 时间：2013-04-23T19:53:17.217
> 
> 标签：c++, boost, circular-buffer

我正在考虑使用boost circular_buffer。从[这里](http://www.boost.org/doc/libs/1_53_0/libs/circular_buffer/doc/circular_buffer.html)：

> 为了实现最大效率，circal_buffer 将其元素存储在连续的内存区域中，然后启用：
> 
> 使用固定内存，没有隐式或意外的内存分配。

但我应该使用 circular_buffer 调用`cb.push_back(myObj)`。要进行此调用，我必须实例化此对象。当我调用`push_back`我的新对象时，请从 circular_buffer 中替换旧的、过时的对象。

因此，在使用 circular_buffer 时，我会大量分配内存，因为我必须为每个`push_back`.

但我真的想避免新对象的实例化。相反，我想从`circular_buffer`. 如果有可能？你能推荐一个允许重用其中的对象以避免昂贵的运行时内存分配的循环缓冲区吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T20:20:54.457

如果您的对象实例化成本足够高，您可以预先分配一个池，然后将`shared_ptr`池中的对象放入循环缓冲区以重用它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T20:36:09.120

也许您想要一个循环*迭代器*而不是循环*缓冲区*。使用默认构造元素填充固定长度的缓冲区。然后当你填充元素（通过循环迭代器）时，你可以只修改结构而不是复制。

有关循环迭代器的示例，请查看[此问题](https://stackoverflow.com/questions/2616643/is-there-a-standard-cyclic-iterator-in-c)的已接受答案。

# javascript - 将动态文本插入表单标题

> ID：16177998
> 
> 赞同：0
> 
> 时间：2013-04-23T19:53:38.537
> 
> 标签：javascript, jquery, jquery-mobile

我有一个多页表单，并想更改每页上的标题以反映插入在表单第一页上的 projectID

```
<div data-role="page" id="chapter1">
  <div data-role="header">
  <h1>Site Information ***(<!--want ProjectID entered here-->)*** <h1>
 </div><!--/header-->

 <div data-role="content">
 <Fieldset>
   <div class="_50">
     Project ID:<input type="text" name="ProjectID"> ***<!--ProjectID entered here-->***  
   </div> 
 <div class="_50">
    Project Name:<input type="text" name="ProjectName">
   </div>

<div data-role="page" id="chapter2">
 <div data-role="header">
 <h1>Samples Collected ***(<!--want ProjectID entered here-->)*** </h1>
 </div><!--/header-->

 <div data-role="content"> 
```

由于不熟悉创建网络表单，我不知道如何完成这项任务。协助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T20:00:02.400

向您的 h1 字段添加一个类或 id，然后将其用于：

```
$('#id_of_element).text('Your text to insert'); 
```

或者，如果 h1 在每个 上都是唯一的`#chapter`：

```
$('#chapter1 h1, #chapter2 h1').text('Your text to insert'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T20:01:07.230

尝试这个：

```
$("h1").html( $("h1") + " " + $("#ProjectID").val() ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T20:36:16.403

动态更改页眉、页脚和内容的正确方法是`.trigger('pagecreate')`在将标记附加到页面后使用。

> 基本页面解剖

```
<div data-role=page>
 <div data-role=header></div>
 <div data-role=content>stuff</div>
</div> 
```

> jQuery 移动

用新标题替换旧标题。

```
$('[data-role=header]').html('<div data-role=header><h1>new header</h1></div>'); 
```

增强新标记。

```
$('[data-role=page]').trigger('pagecreate'); 
```

**[演示](http://fiddle.jshell.net/Palestinian/b5JkK/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T20:10:18.553

*将动态文本插入表单标题*- 试试这种方式

```
 $("input[name='ProjectID']").on('keyup',function(){
     var val = $(this).val();
     var h = $(this).closest("div[id^='chapter']").find("div[data-role='header']").find("h1");
     $(h).html( $(h).html() + " " + val);
 }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T09:58:09.413

第一个分配给标题的 id

```
 <div data-role="header">
   <h1 id="header_content">Site Information ***(<!--want ProjectID entered here-->)***     <h1> 
```

集 ID 的脚本代码

```
 var projectId=111;
 $('#header_content').html('Site Information ***('+projectId+')***'); 
```

# css - Boostrap CSS - 按大小显示项目集合

> ID：16177999
> 
> 赞同：0
> 
> 时间：2013-04-23T19:53:40.060
> 
> 标签：css, twitter-bootstrap

我创建的对象列表将显示在我的视图中。好吧，我想每行显示 3 或 4 个。当我显示 3 时，我使用`class="span4"`，当我显示 4 时，我使用`class="span3"`。虽然，当 div 溢出时`span12`，下一个对象将显示为错误的大小，如下所示：

![显示错误](https://i.stack.imgur.com/NSNaf.png)

好吧，我希望第四个 div 显示在第一个 div 的正上方。我的代码是这样的：

```
<div class="span2">MENU</div>
<div class="span10 container-fluid">
    <div id="products" class="row-fluid"> 
    @foreach (Product product in Model)
    {
        <div class="span4 item-bordered text-center">
            <h3>@product.Name</h3>  
            <h6>@product.Description</h6>
        </div>
    }
    </div>
</div> 
```

这是一个重现我的问题的 JSFiddle：http: [//jsfiddle.net/Kiwanax/utPsh/](http://jsfiddle.net/Kiwanax/utPsh/)

有人能帮我吗？谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T20:02:02.203

我不确定引导网格系统是否设计用于列表...我会尝试使用 div 代替。

```
<div id="products" class="row-fluid">      
    <div class="span4 item-bordered text-center">
        <h3>Pelúcias Angry Birds</h3>  
        <h6>As mais lindas pelúcias dos pássaros mais queridos do momento.</h6>
    </div>

    <!--etc-->

</div> 
```

**编辑：**
此外，如果您的跨度加起来为 16，您将得到不希望的结果。所以我会坚持使用 3`span4`秒或 4`span3`秒。

**编辑：**
通过向网格跨度添加边框可能会遇到更多问题，因为它会将每个元素的宽度增加两倍（假设边框宽度为 1px）。因此，我将您的边框放在网格跨度 div 内的嵌套 div 上：

```
<div id="products" class="row-fluid">
    <div class="span4">
        <div class="item-bordered text-center">
            <h3>Pelúcias Angry Birds</h3>  
            <h6>As mais lindas pelúcias dos pássaros mais queridos do momento.</h6>
        </div>
    </div>

    <!--etc-->

</div> 
```

**编辑：**

Bootstrap 网格系统不是为处理超过 12 个跨度而设计的，因此您必须更改生成 html 的方式来解决它。

我看到你正在使用 MVC。假设您使用的是 Razor，您将需要按照以下方式做一些事情：

```
<div id="products">
    <div class="row-fluid">
    @{int counter = 0;}
    @foreach (var toy in toys) 
    {
        if (counter > 0 && counter % 3 == 0) <!--check if it's the beginning of the next row-->
        { 
            @:</div> <!--terminate previous row-->
            @:<div class="row-fluid"> <!--start a new row-->
        }
        <div class="span4">
            <div class="item-bordered text-center">
                <h3>toy.Name</h3>  
                <h6>toy.Description</h6>
            </div>
        </div>
        counter++;
    }
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T20:12:32.647

该类`span4`与 相结合，`row-fluid`旨在在一行中显示 3 个响应式元素。
要做你想做的事，只需添加一个新行并将第四个元素放入其中。

```
<div class="row-fluid">      
    <ul id="products">
        <li class="span4 item-bordered text-center">
            <h3>Pelúcias Angry Birds</h3>  
            <h6>As mais lindas pelúcias dos pássaros mais queridos do momento.</h6>
        </li>

        <li class="span4 item-bordered text-center">
            <h3>Pelúcias Angry Birds</h3>  
            <h6>As mais lindas pelúcias dos pássaros mais queridos do momento.</h6>
        </li>

        <li class="span4 item-bordered text-center">
            <h3>Pelúcias Angry Birds</h3>  
            <h6>As mais lindas pelúcias dos pássaros mais queridos do momento.</h6>
        </li>
    </ul>
</div>
 <div class="row-fluid">
    <ul id="products">
        <li class="span4 item-bordered text-center">
            <h3>Pelúcias Angry Birds</h3>  
            <h6>As mais lindas pelúcias dos pássaros mais queridos do momento.</h6>
        </li>
    </ul>
</div> 
```

我建议使用 divs 而不是 li's 来获得更轻的标记

或者您可以尝试从引导程序中覆盖左边距，将其设置为 0 并给出等效的右边距：

```
 .item-bordered {
    border: 1px solid #ccc;
    margin-left:0px !important;
    margin-right:1.4%;
} 
```

[**这是您更新的小提琴**](http://jsfiddle.net/utPsh/3/)