# StackOverflow 问答 14204000-14204999

# java - 编程实践：Java Logger (log4j)

> ID：14204004
> 
> 赞同：1
> 
> 时间：2013-01-07T21:04:52.433
> 
> 标签：java, eclipse, logging

在 Java 中，用于创建记录器，而不是调用

```
private static final Logger logger = LoggerFactory.getLogger("ClassName"); 
```

我创建了一个实用方法，它从堆栈跟踪返回类名并调用该方法。

```
private static final Logger logger = LoggerFactory.getLogger(Utilities.getInvokingClassName()); 
```

`Utilities.java`：

```
public static String getInvokingClassName()
{
    return new Throwable().getStackTrace()[1].getClassName();
} 
```

显然，我正在使用资源密集型流程，而优点是我在编码时具有更高的模块化。问题是这对性能的影响有多大？如果它不是太耗费资源，那为什么不是标准做法呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T21:09:01.133

它对性能的影响不大，但它可能没有被使用，因为它使一个非常简单的场景过于复杂。您的代码可能更加模块化，但它变得更难阅读和理解。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T21:20:20.207

您可以通过将 Class 对象传递给记录器来创建记录器。每当我得到一个记录器时，我通常会这样做：

```
public class Foo {
    private static final Logger LOG = LoggerFactory.getLogger(Foo.class);
... 
```

这比键入类名更容易，并且通常受益于快速查找替换和 IDE 代码辅助。我认为您的方法可能有点太棘手并且难以阅读。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-04T20:41:27.910

事实上，我认为你有点过于复杂了，因为你可以做一些更简单的事情：

```
this.getClass().getName() 
```

然后你可以把它改写成这样：

```
Logger logger = LoggerFactory.getLogger(this.getClass().getName()); 
```

就是这样。

# c# - 正则表达式 c# 匹配模式和忽略引号中的匹配

> ID：14204006
> 
> 赞同：1
> 
> 时间：2013-01-07T21:05:03.897
> 
> 标签：c#, regex, oracle

我希望能够在 SQL 语句中找到绑定变量（以冒号开头，然后是文本）：

```
SELECT * 
FROM TABLE 
WHERE TABLE_UID = :TABUID AND TABLE_TEXT = :TEXT 
```

我发现这个正则表达式可以找到绑定变量：

```
Regex reg = new Regex(":[\\w]*",
                      RegexOptions.Multiline & RegexOptions.IgnoreCase); 

foreach (Match m in reg.Matches(sql)) 
{
    bindVar.Add(m.Value); 
} 
```

我无法弄清楚的是如何忽略引号中存在的潜在绑定变量：

```
SELECT * 
FROM TABLE 
WHERE TABLE_UID = :TABUID AND TABLE_TEXT = TO_DATE(:TEXT, 'hh:mi:ss') 
```

:mi & :ss 不应在正则表达式中匹配。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T21:10:29.440

对于使用正则表达式来做你想做的事情的智慧，我有点动摇，但如果我是你，我会

*   复制您的输入字符串
*   去掉输入字符串中不需要的内容（在这种情况下，引号内的内容）
*   现在您不必担心引号中的内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T21:13:21.697

使用单词边界 \b

```
\\b:[\\w]* 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T22:19:24.040

这将匹配任何未包含在单引号中的内容：

```
(?<![\\S'])([^'\\s]+)(?![\\S']) 
```

我不够精明，不知道如何将它与你已经拥有的东西结合起来。

# youtube - 如何使用网站上的 Youtube 视频做到这一点？

> ID：14204019
> 
> 赞同：0
> 
> 时间：2013-01-07T21:05:51.560
> 
> 标签：youtube, embed, shuffle, playlist

那么我怎样才能做到这一点，当有人访问我的网站时，它会播放 youtube 视频并刷新，或者如果其他人继续播放，它会播放不同的视频，例如随机播放列表？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-17T21:19:53.150

在 api 中没有看到，但您可以列出您希望播放的视频，然后让一些代码从列表中随机选择一个。

# knockout.js - 淘汰原生模板

> ID：14204025
> 
> 赞同：0
> 
> 时间：2013-01-07T21:06:34.870
> 
> 标签：knockout.js

我打算将基于 Knockout 的页面转换为原生模板。但是，与 jQuery 模板相比，我有几个关于本机模板的局限性的问题。

使用 Knockout 本机模板，我可以在“if”控件中引用函数吗？

jQuery 模板：

```
 {{if GetFirstWord(ProductName) == "Premier"}} 
```

原生模板（这可能吗）

```
<!-- ko if: GetFirstWord(ProductName) == "Premier" --> 
```

另外，我可以使用本机模板访问这样的索引器吗：

```
{{each(i, d) Benefits}}
  <div class="{{if i%2==0}}even{{else}}odd{{/if}}">
{{/each}} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T21:49:45.867

第一个：是的，这是可能的，而且很可能您不需要更改太多代码。但是，为了适应 KnockoutJS 中更好的架构，您*可能还是想这样做。*它不仅适用于 KO，而且是一种更易于维护的更好的设计模式。

例如，这个

```
<!-- ko if: GetFirstWord(ProductName) == "Premier" --> 
```

具有相同的功能

```
<!-- ko if: currentWordisPremier --> 
```

在你的代码中你有类似的东西

```
self.currentWord = ko.observable("");
self.currentWordisPremier = ko.observable(false);
self.currentWord.subscribe(function(newCurrentWord){
  if(newCurrentWord === "Premier") self.currentWordisPremier(true);
}); 
```

*（这是一个简单的示例，您可以通过动态模板以更具可扩展性的方式设计您的代码）*

第二个：是的，但仅从 2.1 版开始通过`$index`关键字。您可以在此处阅读有关讨论的更多信息，并[在](http://knockoutjs.com/documentation/binding-context.html)[此处](https://github.com/SteveSanderson/knockout/pull/182)阅读一些文档。

与第一点一样，您可能希望更改一些 javascript 代码以不为模板提供太多逻辑。

```
{{each(i, d) Benefits}}
  <div class="{{if i%2==0}}even{{else}}odd{{/if}}">
{{/each}} 
```

在原生 KnockoutJS 模板中

```
<!-- ko foreach:Benefits -->
  <!-- ko if: $index %2 == 0 -->
  <div class="even"> ... </div>
  <!-- /ko -->
  <!-- ko ifnot: $index % 2 == 0 -->
  <div class="odd"> ... </div>
  <!-- /ko -->
<!-- /ko --> 
```

更好的方法可能是

```
<!-- ko foreach:Benefits -->
  <div data-binding="css: {"even" isEven, "odd": isOdd}"> ... </div>
<!-- /ko --> 
```

你在你的 js 中执行逻辑，可能只为你的数组执行一次。

```
 var index = 0;
  var updatedBenefits = ko.utils.arrayForEach(self.Benefits(), function(benefit) {
     var property = index++ %2 == 0 ? "isEven" : "isOdd";
     return benefit[property] = true;
  });
  self.Benefits(updatedBenefits) 
```

# javascript - 在 $.getJSON 函数中测试布尔变量时的奇怪结果

> ID：14204029
> 
> 赞同：0
> 
> 时间：2013-01-07T21:06:50.933
> 
> 标签：javascript, jquery, ajax, json

我遇到了一个问题，我似乎无法解决问题，并且由于我在网上找不到此类示例的任何其他示例，因此我（再次）转向了这个优秀的社区。

我不会通过说明这个函数（和许多其他函数）在协同工作时设计的所有内容来使这个问题过于复杂，但是，我会说这个函数（eventDayPlotter）在每个月的每一天都重复。我不明白以下代码段中包含的结果。

```
function eventDayPlotter(day, gridMod, monthAdjust)
{
    //Beginning of event day plotting.
    isAnEvent = false;

    $.getJSON("/JsonControl/Events.json", function (jsonObj) 
    {
        for (var i = 0; i < jsonObj.events.length; ++i) 
        {
            if(day == jsonObj.events[i].dateNumber && (navDate.getMonth() + monthAdjust) == (jsonObj.events[i].dateMonth -1) && navDate.getFullYear() == jsonObj.events[i].dateYear)
            {
                document.getElementById("cGrid" + gridMod).className="eventDay";
                console.log(jsonObj.events[i].title)
                document.getElementById("cGrid" + gridMod).onmousedown = function(){document.getElementById("eventBox").src="/Event htms/Event.htm"; document.getElementById("eventBox").document.getElementById("title").innerHTML = jsonObj.events[i].title;}
                isAnEvent = true;
            }
        }
    });
    if(isAnEvent == true)
    {
        console.log("true")
    }
    if(isAnEvent == false)
    {
        console.log("false")
    }
} 
```

**console.log 的结果（完整）**

```
33false _main.js:1708
Okmulgee Public Schools County Professional Day _main.js:1696
Okmulgee Public Schools Starts 3rd Quarter _main.js:1696
Okmulgee Public Schools-Closed in Observance of Martin Luther King Jr. Holiday 
```

我确实希望第一个 if 分支执行 3 次，但是，正如您所看到的，一旦诊断 if 分支（带有 console.logs 的分支）在 $.getJSON 函数之外（其中它们在逻辑上需要是，一旦它们包含有意义的内容）isAnEvent 总是错误的。我无法理解，因为它无论如何都没有超出范围（据我所知）。

另外，我不希望文件中的后面几行首先用 console.log 记录（在其他 3 行之前），但看起来这个函数正在向后执行？我的意思是，我知道这不可能是真的，但这怎么可能呢？我完全失去了...

当在第一个 if 分支内或在它之外（仍在 .getJSON 函数内）测试 isAnEvent 时，它的值并不总是它应该是的值（因为这不是他们在逻辑上需要去的地方），但它并不总是错误的但是，一旦在 .getJSON 函数之外，它始终为 false，即使它刚刚变为 true。

显然这里发生了一些我无法理解的事情。

最后，如果不是很明显，三件事：

1）我很好地抓取了 JSON 数据，并且

2）如果 json 文件中的任何日期与该日期匹配，则第一个 if 分支应该将 isAnEvent 设置为 true。然后下次调用 eventDayPlotter 时，它应该将 isAnEvent 重置为 false 并以相同的方式测试下一个日期（使用参数传入）。

3）控制台中没有显示脚本错误。

如果需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T21:11:59.363

`getJSON()`是异步的。这意味着它完成并在完成后的某个时间调用它的完成函数`eventDayPlotter()`。

因此，您只能测试`isAnEvent`完成函数内部的值。您无法在`eventDayPlotter()`.

* * *

`i`仅供参考，您可以通过在自执行函数闭包中捕获它来修复事件处理程序中的值，如下所示：

```
function eventDayPlotter(day, gridMod, monthAdjust)
{
    //Beginning of event day plotting.
    isAnEvent = false;

    $.getJSON("/JsonControl/Events.json", function (jsonObj) 
    {
        for (var i = 0; i < jsonObj.events.length; ++i) 
        {
            if(day == jsonObj.events[i].dateNumber && (navDate.getMonth() + monthAdjust) == (jsonObj.events[i].dateMonth -1) && navDate.getFullYear() == jsonObj.events[i].dateYear)
            {
                document.getElementById("cGrid" + gridMod).className="eventDay";
                console.log(jsonObj.events[i].title)
                (function(index) {
                    document.getElementById("cGrid" + gridMod).onmousedown = function(){document.getElementById("eventBox").src="/Event htms/Event.htm"; document.getElementById("eventBox").document.getElementById("title").innerHTML = jsonObj.events[index].title;}
                })(i);
                isAnEvent = true;
            }
        }
    });
} 
```

# jquery - Jquery 切换文本，选择所有实例

> ID：14204030
> 
> 赞同：2
> 
> 时间：2013-01-07T21:06:52.947
> 
> 标签：jquery

所以我遇到的问题是我有这个Div“回复”，里面是一个h1标签，里面有隐藏这个词。Hide这个词被包裹在一个带有“Toggle”类的span标签中我有Jquery代码，它基本上说每次你点击Div它都会切换span标签中的隐藏文本以显示，当然如果你再次点击它会恢复正常，我遇到的问题是我有这些类的多个实例，并且它改变了其他类的文本。我想知道 jquery 中是否有一种方法可以只切换我点击的特定一个，同时保持所有其他类相同（因为我需要大量重用它们）。

jQuery

```
 $('.Reply').toggle (
    function()  { $("span.Toggle").html("Show");}
    ,function()  { $("span.Toggle").html("Hide");}
   ); 
```

HTML

```
<div class="Reply">
  <h1><span class="Toggle">Hide</span> This Text</h1>
</div>

<div class="Reply">
  <h1><span class="Toggle">Hide</span> This Text</h1>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T21:13:37.040

是的，`this`用作选择器中的[上下文，](http://api.jquery.com/jQuery/)因此它只会更改当前单击的 div 内的切换

```
$('.Reply').toggle( function () {
  $("span.Toggle", this).html("Show");
}, function () {
  $("span.Toggle", this).html("Hide");
}); 
```

[上下文选择器的工作方式与find()](http://api.jquery.com/find/)完全相同

```
$(this).find("span.Toggle") 
```

[小提琴](http://jsfiddle.net/wirey00/wd9y4/)

# java - java.lang.String 的 toUpperCase() 源代码中的奇怪语法

> ID：14204032
> 
> 赞同：1
> 
> 时间：2013-01-07T21:07:01.060
> 
> 标签：java, syntax

> **可能重复：**
> [什么是扫描：Java 中的块？](https://stackoverflow.com/questions/14147821/what-is-a-scan-block-in-java)

我正在浏览一些 Java 标准库代码，并在 String.java ( -JDK 1.6.0_32 x64)中找到了该`toUpperCase`方法。`java.lang.String`我在下面的代码片段中删除了不相关的代码部分。

让我感到困惑的部分是`scan: { ... }`语法。我的印象是 lambda 表达式不是 SE 6 或 7 的一部分。有人可以启发我吗？

```
// String.java - line 2547 onwards.
public String toUpperCase(Locale locale) {
    // Do stuff.

    /* Now check if there are any characters that need to be changed. */
    scan: {
        // Do stuff.
    }

    // Do more stuff.
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T21:08:34.967

```
scan: { ... } 
```

它是一个带[**标签的语句**](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/branch.html)。通常在嵌套循环的情况下使用标签，您可以中断或继续循环。

例如：

```
outer:while(cond) {
in:while(cond){
   break outer;
}
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T21:08:28.290

它被称为标记语句。`scan`此处为标签，语句包含在`{...}`.

根据[Java 语言规范 14.7](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.7)

> 通过执行立即包含的 Statement 来执行带标签的语句。如果语句由标识符标记，并且包含的​​语句由于使用相同标识符的中断而突然完成，则标记语句正常完成。在语句突然完成的所有其他情况下，带标签的语句出于相同的原因突然完成

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-07T21:20:59.070

即使您没有循环，您也可以有一个标签（通常在 UPPER_CASE 中）。例如

```
scan: {
   if (condition) break;
   // do something
} 
```

我使用它的唯一地方是避免“找到”标志

```
FOUND: {
    for(MyType mt: myTypeList)
       if(condtion(mt))
            break FOUND;
    // not found code here
} 
```

如果你想写一个令人困惑的标签，你可以这样做

```
http://www.google.com
if (searching) {

} 
```

# objective-c - 目标 c 代表

> ID：14204035
> 
> 赞同：0
> 
> 时间：2013-01-07T21:07:14.770
> 
> 标签：objective-c, delegates

我的程序用计时器显示图像。我希望用户能够使用 UISlider 来调整计时器。

我有一个 Deck 类，它委托并监听另一个委托“SpeedSliderDelegate”。我希望我的 Deck 类监听来自 SpeedSliderDelegate 的更改并更新一个值。

如何设置我的 Deck.m 模型以收听 SpeedSliderDelegate...（就在 Deck.m 中的 if(self = [super init] 之后）

SpeedSliderDelegate.h

```
@protocol SpeedSliderDelegate <NSObject>
-(void)setSpeed:(float)currentSpeed;
@end 
```

甲板.h

```
#import "SpeedSliderDelegate.h"
#import <Foundation/Foundation.h>
#import "Card.h"

@protocol DeckLooperDelegate <NSObject>
-(void)cardHasChangedTo:card1 aCard2:(Card *)card2 totalCount:(NSInteger)totalCount stopTimer:(NSTimer*)stopTimer cards:(NSArray *)cards;
@end

@interface Deck : NSObject <SpeedSliderDelegate>

@property (nonatomic, retain)NSMutableArray *cards;
@property (nonatomic, retain)NSTimer *timer;
@property (nonatomic, retain)id <DeckLooperDelegate> delegate;
@property (nonatomic)NSInteger total;
@property (nonatomic) float testSpeed;

- (NSInteger) cardsRemaining;
- (void) startTimerLoop;

@end 
```

甲板.m

```
#import "Deck.h"
#import "Card.h"

@implementation Deck

@synthesize cards;
@synthesize timer;
@synthesize delegate;
@synthesize total, testSpeed;
- (id) init
{
    if(self = [super init])
    {
        //self.delegate = self    something like this... 

        cards = [[NSMutableArray alloc] init];
        NSInteger aCount, picNum = 0;

        for(int suit = 0; suit < 4; suit++)
        {
            for(int face = 1; face < 14; face++, picNum++)
            {
                if (face > 1 && face < 7)
                    aCount = 1;
                else if (face > 6 && face < 10)
                    aCount = 0;
                else
                    aCount = -1;

                NSString* imagePath = [[NSBundle mainBundle] pathForResource:[NSString stringWithFormat:@"card_%d", picNum] ofType:@"png"];

                UIImage* theImage = [[UIImage alloc] initWithContentsOfFile:imagePath];

                Card *card = [[Card alloc] initWithFaceValue:(NSInteger)face
                                                countValue:(NSInteger)aCount
                                                suit:(Suit)suit
                                                cardImage:(UIImage *)theImage];

                [cards addObject:card];
            }
        }
    }
    return self;

}

-(void)setSpeed:(float)currentSpeed
{
    testSpeed = currentSpeed;
}

-(void)startTimerLoop
{

    if (!timer)
    {
        timer = [NSTimer scheduledTimerWithTimeInterval:testSpeed target:self
                    selector:@selector(timerEvent:) userInfo:nil repeats:YES ];
        NSLog(@"Timer started!!!");
    }
}

-(void)timerEvent:(NSTimer*)timer
{
    srand(time(nil));

    int index = rand()%[cards count];
    Card *randomCard =[cards objectAtIndex:index];
    [cards removeObjectAtIndex:index];
    NSLog(@"%@" ,randomCard);

    int index1 = rand()%[cards count];
    Card *randomCard1 =[cards objectAtIndex:index1];
    [cards removeObjectAtIndex:index1];
    NSLog(@"%@" ,randomCard1);

    total += (randomCard.countValue + randomCard1.countValue);

    [self.delegate cardHasChangedTo:randomCard aCard2:randomCard1 totalCount:total stopTimer:self.timer cards:cards];

    if ([cards count] == 0)
    {
        [self.timer invalidate];
        self.timer = nil;
    }
}

- (NSInteger) cardsRemaining
{
    return [cards count];
}

- (NSString *) description
{
    NSString *desc = [NSString stringWithFormat:@"Deck with %d cards\n",
                        [self cardsRemaining]];
    return desc;
}

@end 
```

游戏视图控制器.h

```
#import "Deck.h"
#import "SpeedSliderDelegate.h"

@interface GameViewController : UIViewController <DeckLooperDelegate>

@property (nonatomic, retain) IBOutlet UIImageView *cardDisplay, *cardDisplay1;
@property (weak, nonatomic) IBOutlet UILabel *cardName, *cardName1;
@property (weak, nonatomic) IBOutlet UILabel *cardCount, *cardCount1;
@property (weak, nonatomic) IBOutlet UILabel *totalCount;
@property (nonatomic)int stop1;
@property (weak, nonatomic) IBOutlet UIButton *stopButton;
@property (weak, nonatomic) IBOutlet UIButton *restartButton;
@property (weak, nonatomic) IBOutlet UIButton *homeButton;
@property (weak, nonatomic) IBOutlet UISlider *speed;
@property (nonatomic, retain) id <SpeedSliderDelegate> delegate;

- (IBAction)start:(id)sender;
- (IBAction)stop:(id)sender;
- (IBAction)hideShow:(id)sender;
- (IBAction)homeAction:(id)sender;

@end 
```

游戏视图控制器.m

```
#import <QuartzCore/QuartzCore.h>
#import "GameViewController.h"
#import "Deck.h"

@implementation GameViewController

@synthesize cardDisplay, cardDisplay1, cardName, cardName1, cardCount, cardCount1, totalCount, stop1, stopButton, restartButton, homeButton, speed, delegate;

- (void)viewDidLoad
{
    [super viewDidLoad];

    Deck *deck = [[Deck alloc]init];
    NSLog(@"%@", deck);

    for (id cards in deck.cards)
    {
         NSLog(@"%@", cards);
    }

    deck.delegate = self;
    [deck startTimerLoop];

    cardDisplay.layer.cornerRadius = 7;
    cardDisplay.clipsToBounds = YES;

    cardDisplay1.layer.cornerRadius = 7;
    cardDisplay1.clipsToBounds = YES;

    [restartButton setHidden:YES];

    [delegate setSpeed:speed.value];

}

//#pragma mark - DeckDelegate
-(void)cardHasChangedTo:(Card *)card1 aCard2:(Card *)card2 totalCount:(NSInteger)totalC stopTimer:(NSTimer *)stopTimer cards:(NSArray *)cards
{

    [self.cardDisplay setImage:card1.cardImage];
    [self.cardDisplay1 setImage:card2.cardImage];

    self.cardName.text = card1.description;
    self.cardName1.text = card2.description;

    self.cardCount.text = [NSString stringWithFormat:@"%d", card1.countValue];
    self.cardCount1.text = [NSString stringWithFormat:@"%d", card2.countValue];

    self.totalCount.text = [NSString stringWithFormat:@"%d", totalC];

    if (stop1 == 86)
    {
        [stopTimer invalidate];
        stopTimer = nil;
    }

    if ([cards count] == 0)
    {
        [restartButton setHidden:NO];
    }

}

- (IBAction)start:(id)sender
{
    stop1 = 85;

    [cardDisplay setHidden:YES];
    [cardDisplay1 setHidden:YES];

    self.totalCount.text = @"0";

    self.cardCount.text = @"0";
    self.cardCount1.text = @"0";    

    self.cardName.text = @"";
    self.cardName1.text = @"";

    Deck *deck = [[Deck alloc]init];

    [NSTimer scheduledTimerWithTimeInterval:2 target:self
        selector:@selector(cardDisplayDelay:) userInfo:nil repeats:NO];

    NSLog(@"%@", deck);

    deck.delegate = self;
    [deck startTimerLoop];

    cardDisplay.layer.cornerRadius = 7;
    cardDisplay.clipsToBounds = YES;

    cardDisplay1.layer.cornerRadius = 7;
    cardDisplay1.clipsToBounds = YES;

    [restartButton setHidden:YES];

}

- (IBAction)stop:(id)sender
{
    stop1 = 86;  //cancelled

    [NSTimer scheduledTimerWithTimeInterval:2 target:self
                selector:@selector(restartButtonDelay:) userInfo:nil repeats:NO];
}

-(void)restartButtonDelay:(NSTimer*)timer
{
    [restartButton setHidden:NO];
}

-(void)cardDisplayDelay:(NSTimer*)timer
{
    [cardDisplay setHidden:NO];
    [cardDisplay1 setHidden:NO];
}

- (IBAction)hideShow:(id)sender
{
    if ([cardCount isHidden])
    {
        [cardCount setHidden:NO];
        [cardCount1 setHidden:NO];
        [totalCount setHidden:NO];
    }

    else
    {
        [cardCount setHidden:YES];
        [cardCount1 setHidden:YES];
        [totalCount setHidden:YES];
    }
}

- (IBAction)homeAction:(id)sender
{
    stop1 = 86;  //cancelled
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T22:50:55.483

The deck is not its own delegate. Right now your code says that a Deck is a SpeedSliderDelegate, and that a Deck's delegate is a DeckLooperDelegate.

If you always need a delegate for Deck, you can do it this way:

```
- (id) initWithDelegate:(id<DeckLooperDelegate>)delegate {
    if (self = [super init]) {
        self.delegate = delegate;

        cards = [[NSMutableArray alloc] init];
        NSInteger aCount, picNum = 0;

        // etc etc etc
    }
} 
```

Then, in the DeckLooperDelegate that creates the deck, you call it like this:

```
Deck *deck = [[Deck alloc] initWithDelegate:self]; 
```

Then you want your speed slider to set the deck as its delegate.

```
mySpeedSlider.delegate = deck; 
```

Now mySpeedSlider can call [delegate setSpeed:] to change the deck's speed.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T21:12:53.217

在更新类 .h

```
@protocol DoSomethingDelegate <NSObject>
-(void)doSomething;
@end

@property (assign, nonatomic) id <DoSomethingDelegate> delegate; 
```

在更新类 .m

```
-(void)doSomethingSomewhereElse {
    if (self.delegate != nil && [self.delegate respondsToSelector:@selector(doSomething)]) {
           [self.delegate performSelector:@selector(doSomething)];
       }
    } else {
       NSLog(@"Delgate doesn't implement doSomething");
    }
} 
```

在接收类中'.h：符合协议`<DoSomethingDelegate>`

```
@interface myDoSomethingClass : NSObject <DoSomethingDelegate>
... 
```

在接收类'.m 中实现委托方法：

```
-(void)someInit{
    //set the delegate to self
} 
```

在视图控制器 .m

```
-(void)doSomething{
     NSLog(@"The delegate told me to do this!");
} 
```

# continuous-integration - VS 构建的 c# 项目的持续集成工具

> ID：14204042
> 
> 赞同：-1
> 
> 时间：2013-01-07T21:07:58.187
> 
> 标签：continuous-integration, infrastructure

我们需要为 C# 项目设置持续集成基础架构。除了极少的用户端使用这些工具之外，我们没有人有任何其他体验。我们的要求是：

*   我们需要一个在 Windows 上运行的工具，因为我们希望我们的项目是 csc 构建的。使用单声道构建不是一种选择。

*   我们使用 SVN 服务器，它在 linux 上，它需要能够从中获取源代码。

你们中更有经验的同事可以推荐这样的工具吗？：） 提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T21:10:45.827

CruiseControl 是一个不错的选择。看看这里：[http ://cruisecontrol.sourceforge.net/](http://cruisecontrol.sourceforge.net/)

# java - Ajax / JSON 数据传输中断，更改了我的 Unicode 数据并破坏了我的 CRC 计算

> ID：14204045
> 
> 赞同：1
> 
> 时间：2013-01-07T21:08:05.717
> 
> 标签：java, ajax, json, unicode, crc16

我是一个接单网站的开发人员。它有一个`Tomcat/Java`后端并`JavaScript`在浏览器上广泛使用。我的程序管理与我们的用户的对话，内容涉及我们内部系统成功下订单所需的大量数据。我们所有的对话都使用该`HTTPS`协议。

不久前，我们曾经接受我们的表单数据（一个`Struts`应用程序），对其进行处理并再次将其作为表单返回。我注意到一些数据丢失错误。使用 的扩展`HttpServletRequestWrapper`，我可以看到某些用户*缺少*表单数据。到处都是订单项，非常令人痛苦。我们的数据应该是单一的。

因此，在最近的一次修订中，表单正在通过 Ajax 对话来回传输，使用`JSON`. 我们将表单数据转换为字符串，从中创建一个 CRC 和，然后将这两者包装到一个载体`JSON`对象中。另一方将提取表单数据字符串，应用相同的`CRC`转换，然后比较两个值。一切都很好，但是...

我发现我的`CRC`生成取决于数据字符串是否包含“高位”字符——默认情况下你从程序中得到的东西`Microsoft Word`，比如句子周围的那些花哨的双引号、外语元音等等。似乎底层的传输机制破坏了一些东西。

例如，如果我传回预格式化的 HTML，则正斜杠如

```
</b> 
```

在过程中转化为

```
<\/b> 
```

这不校验和相同。我可以检查额外的反斜杠，但我对传输机制任意重新格式化文本感到沮丧。

再举一个例子，我`JSON`在服务器上有一些数据：

```
 "alt_bill_contact":"ACCT PAY Rocío", 
```

（注意单词中“i”的花哨版本。）

它直接写入响应 ( `HttpServletResponse.getWriter().write(JSON output string)`)。下次我可以看到它在

```
ServerRequest.ajaxRequest = $.ajax({
    type : 'POST',
        url : ServerRequest.serverUrl,
        data : sendJSON,
        dataType : 'json',
        timeout: 200000,
        async : async,
        cache : false,
        error: function(XMLHttpRequest, textStatus, errorThrown) {

            if(ServerRequest.ajaxRequest != null) {
                ServerRequest.ajaxErrorResponseHandler(XMLHttpRequest, textStatus, errorThrown);
            }

            ServerRequest.ajaxRequest = null;
        },
        success : function(response) {

            if(ServerRequest.ajaxRequest != null) {
                ServerRequest.ajaxSuccessResponseHandler(response);
            }

            ServerRequest.ajaxRequest = null;
        }
    });

[snip]
    var something = ServerRequest.ajaxRequest.responseText; 
```

“某物”有：

```
 "alt_bill_contact":"ACCT PAY Roc?o" 
```

在哪里 ”？” 是显示为黑色钻石的字符之一。在内部，它是一个多字符 Unicode。

`CRC`我在每一端使用的主要是（`AnDan CRC software`我认为它是一个 CRC-16 实现）。我找不到一个好的链接，只有一些旧的下载页面:-(。

我想知道是否有一个开关或配置可以让我通过`CRC`处理来处理我的 Unicode 和高位字符。有任何想法吗？

# javascript - MVC：在没有任何 HTML 控件的视图中调用 Javascript 函数

> ID：14204046
> 
> 赞同：0
> 
> 时间：2013-01-07T21:08:06.860
> 
> 标签：javascript, asp.net-mvc-3, function, model

我有一个视图，在该视图中我会在页面加载时进行一些条件检查。

```
 if(model.count()>0){

 } 
```

然后，如果满足此条件，我想调用一个 javascript 函数。请问我该怎么做？

我知道如何在 html 控件中执行此操作，但是可以在没有任何控制的情况下完成吗？

或者我如何在 javascript 中进行此检查，从而必须参考视图的模型？

编辑

这是我现在所拥有的，但无法识别该功能：`The name myfunction does not exist in the current context`

```
<script>
    $(document).ready(function () {
        @if (Model.Count() > 0)
        {
           myfunction(Model.parameter);

        }
    });
</script> 
```

编辑

我把它改成了

```
@if (Model.Count() > 0)
{
<script type="text/javascript">

        $(document).ready(function () {
        myfunction(@Model.parameter);
     });

</script>
 } 
```

但不工作。即使我`alert("test" + @Model.parameter)`在 .ready(function()) 中尝试类似的东西，它也不起作用。

或者，我将不得不在视图中编写代码。我尝试消除该函数并在视图中执行此操作，但我需要一种将 html 元素的 id 属性设置为变量的方法。类似的东西`var variable = Model.param1`，然后拥有`<div id=variable></div>`。但是如何将 id 属性设置为变量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T21:11:48.537

那么你可以简单地在大括号之间添加javascript。所以如果你正在使用`Razor`

```
@if(model.count()>0){
    <script>
        // Javascript code here
    </script>
} 
```

这将做的是在页面中添加javascript，然后在浏览器呈现页面时执行。

一个好的做法是在整个文档准备好时执行此代码。如果您使用的是 jQuery，则可以使用`$(document).ready(function(){ /*Code goes here*/ });`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T10:28:38.770

使用 JavaScriptModel ( [http://jsm.codeplex.com](http://jsm.codeplex.com) )，您可以在控制器操作中编写以下代码：

```
if (list.Count > 0)
{
    this.AddJavaScriptFunction("myjavascriptfunction", parameter);
} 
```

您不需要修改您的视图，也不会有任何内联的干扰 javascript。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T21:22:36.507

您可以使用非渲染 html 元素（例如隐藏的 Div）并写出 的值`model.count`，甚至是 true/false 来表示是否`model.count > 0`进入该隐藏元素。然后在您的 JavaScript 中，您可以从隐藏元素中获取值并运行条件。

显然，如果应用该条件存在安全隐患，则这是不合适的。如果是这种情况，那么'bPratik 的建议会更合适。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T21:53:12.883

尝试像这样将 if 语句放在脚本标记之外

```
@if (Model.Count() > 0)
{
    <script type="text/javascript">

            $(document).ready(function () {
            myfunction(@Model.parameter);
         });

    </script>
} 
```

# c# - FileStream 每隔一个字符返回空字符

> ID：14204053
> 
> 赞同：4
> 
> 时间：2013-01-07T21:08:39.257
> 
> 标签：c#, text, file-io, filestream

我似乎对 C# 中的 Filestream 有一些问题。我正在尝试从 MSI 安装程序生成的 10mb 非常大的文本文件中读取最后一行。

我正在使用的代码是：

```
string path = @"C:\uninstall.log";
byte[] buffer = new byte[100];

using (FileStream fs = new FileStream(path, FileMode.Open, FileAccess.Read))
{
    long len = fs.Length;

    fs.Seek(-100, SeekOrigin.End);

    fs.Read(buffer, 0, 100);
}

string foo = Encoding.UTF8.GetString(buffer);
Console.WriteLine("\"" + foo + "\""); 
```

但输出看起来类似于：

```
H E L L O   W O R L D ! ! ! B L A H   B L A H 
```

显然，读取的流每隔一个字符就包含一个“\0”（空）字符。有谁知道是什么原因造成的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-07T21:10:19.413

该文件可能是 UTF-16 文件，而不是 UTF-8 文件。只需尝试使用`Encoding.Unicode`而不是`Encoding.UTF8`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-07T21:11:46.923

请改用[Encoding.UnicodeEncoding](http://msdn.microsoft.com/en-us/library/system.text.unicodeencoding.aspx)。您的文件以 UTF-16 编码，而不是 UTF-8。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-07T21:15:55.447

听起来文件实际上是 UTF-16 编码的。在 GetString() 中更改 UTF-8。

# javascript - Sammy.js 教程；模板抛出错误？

> ID：14204054
> 
> 赞同：2
> 
> 时间：2013-01-07T21:08:40.953
> 
> 标签：javascript, html, sammy.js

我正在尝试遵循他们在文档站点上提供的 Sammy.js 教程，当我尝试渲染我的模板时，它抛出了我：

> Uncaught SyntaxError: Unexpected token) sammy.template-latest.min.js:5

在铬。在 Firefox 中：

> [14:55:55.136] 语法错误：缺失；声明之前@mysitehere/workspace/scripts/vendor/sammy/plugins/sammy.template-latest.min.js:5

我的应用程序脚本是：

```
(function($) {

var app = $.sammy('#main', function() {

    this.use('Template');

    this.around(function(callback) {
      var context = this;
      this.load('data/items.json')
          .then(function(items) {
            context.items = items;
          })
          .then(callback);
    });

    this.get('#/', function(context) {
        context.app.swap('');           
        $.each(this.items, function(i, item) {
            context.render('templates/item.template', {id: i, item: item})
           .appendTo(context.$element());
        });
    });

});

$(function() {
  app.run('#/');
}); 
```

})(jQuery);

在标记中，我导入了：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
  <script src="scripts/vendor/sammy/sammy-latest.min.js" type="text/javascript" charset="utf-8"></script>
  <script src="scripts/vendor/sammy/plugins/sammy.template-latest.min.js" type="text/javascript" charset="utf-8"></script>
  <script src="scripts/vendor/sammy/plugins/sammy.json-latest.min.js" type="text/javascript" charset="utf-8"></script>
  <script src="scripts/application/application.js" type="text/javascript" charset="utf-8"></script> 
```

所有这些都解析为200。

我的模板路径经过验证并从他们的 github 存储库中复制。

我确实听说这可能是 Chrome 的问题，无法在 http:// 协议上提取数据，但我也在 FF 中尝试过，但也无济于事。

有任何想法吗？

# asp.net - 用户存储在 ASPX 和 VS 的什么地方？

> ID：14204069
> 
> 赞同：0
> 
> 时间：2013-01-07T21:09:31.590
> 
> 标签：asp.net, mysql, visual-studio-2010, visual-studio

我在 Visual Studio 2010 中使用默认的 .aspx Web 表单示例，我很好奇是否有人可以谈论默认登录/注册系统如何存储用户信息。据我所知，这没有存储在任何类型的 SQL 类型表中。

是否知道该文件的确切位置，以及如何与之交互？除了密码之外，我希望该表包含每个用户的 URL。（我猜“表”只包含用户名和密码）。

这是可能的还是我会更好地创建自己的登录/注册系统？我知道它不会有那么多编码，但利用已经存在的东西肯定会很好。

如果这很容易在某处的菜单中编辑，请原谅我。不知不觉就被扔进了一个以前经验很少的aspx项目。尽可能快地获取信息！

提前感谢您的投入！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T21:28:37.743

If you use the [`Membership`](http://msdn.microsoft.com/en-us/library/system.web.security.membership.aspx) class you have access to all the methods you need. This class includes methods for:

*   Creating users
*   Changing their password
*   Deleting Users
*   etc.

The users are stored in the `aspnetdb` and the information is in several tables. The main ones are:

*   aspnet_User - this stores the users
*   aspnet_Applications - which applications are running
*   aspnet_Membership - this relates the users to the applications they are authorised for
*   aspnet_Profile - user profile information the the application

This is a standard SQL database that exists on your SQL Server.

For a fuller explanation read [this MSDN](http://msdn.microsoft.com/en-us/library/aa478948.aspx) article.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T05:42:33.820

用户存储在 App_Data 文件夹中的 ASPNETDB.MDF 数据库中。默认情况下，该文件是隐藏的，因此我可以理解您为什么感到困惑。

要使 ASPNETDB 可见 - 在解决方案资源管理器中选择 App_Data 文件夹，然后单击*显示所有文件*。

![在此处输入图像描述](../Images/20b59747fec5ca670d3db097ee616cbc.png)

现在，如果您单击 .mdf 文件，数据库将在 Visual Studio 的服务器资源管理器中打开。

用户信息位于 aspnet_Users 和 aspnet_Membership 表中。

下面的查询将返回用户 ID、用户名、加密密码和电子邮件：

```
SELECT aspnet_Users.UserId, aspnet_Users.UserName, aspnet_Membership.Password, aspnet_Membership.Email
FROM     aspnet_Users INNER JOIN
                  aspnet_Membership ON aspnet_Users.UserId = aspnet_Membership.UserId 
```

# git - Cygwin git没有选择别名

> ID：14204078
> 
> 赞同：2
> 
> 时间：2013-01-07T21:10:20.747
> 
> 标签：git, cygwin, msysgit

我正在使用 Cygwin 和默认附带的 git (v1.7.9) (/usr/bin/git)。我还安装了 msysgit (v1.7.11.msysgit.0)。在我的 .bashrc 中，我做

`export GIT_CONFIG=path_to_.gitconfig`

当我运行时`git config --list`，我得到了我的内容`.gitconfig`（下面的相关摘录）：

```
 ...
 alias.co=checkout
 alias.br=branch
 alias.ci=commit
 alias.st=status
 alias.logp=log --pretty=format:"%h - %an, %ar : %s"
 alias.logl=log --pretty=oneline
 alias.graph=log --pretty=format:"%h - %an : %s" --graph
 ... 
```

但是，如果我跑步，`git ci -m "this is a test"`我会得到

```
 git: 'ci' is not a git command. See 'git --help'.

 Did you mean one of these?
    am
    citool
    commit
    config
    diff
    fsck
    gc
    init
    mv
    rm 
```

cygwin自带的git是不是要另外设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T21:59:34.147

想通了，那个 git 将尝试写入它在别名新命令时加载的 .gitconfig 文件，所以我运行了 .gitconfig 文件`git config --global alias.testalias random_git_command`。然后从我的主目录

```
 grepc -R testalias ./ 
```

我能够确定它正在使用`~/.gitconfig`. 所以解决方案是`ln -s [path_to_desired_.gitconfig] .gitconfig`在我的主目录中创建一个符号链接。

仍然觉得奇怪的是，当我运行时`git config --list`我可以看到别名列表，但是当我尝试运行它们时，git 不会将它们识别为有效别名......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-03T09:46:03.010

我通过在 git 别名中包含[alias](http://www.linfo.org/alias.html)命令解决了这个问题`.bash_profile`：

```
alias gch='git checkout'
alias br='git branch'
alias ci='git commit'
alias gs='git status'
alias gcd='git checkout develop'
alias gcm='git checkout master'
alias gph='git push'
alias gpl='git pull'
alias unstage='git reset HEAD --'
alias ga='git add -u .' 
```

# python - map() 的参数 2 在使用 celery 时必须支持迭代

> ID：14204079
> 
> 赞同：1
> 
> 时间：2013-01-07T21:10:20.453
> 
> 标签：python, django, celery

我将任务称为这样的一个组：

```
celery.group(getting_a_page.s(user, i,post) for i in range(no_of_pages))().get() 
```

这是我的任务：

```
@task(ignore_result=True)
    def getting_a_page(user,page_no,post):

        print "getting a posterous page"

        return True 
```

我哪里错了？这个错误是什么意思？

编辑：

错误信息：

```
/home/migrate/migrate/../migrate/apps/migrateuser/views.py" in start_migration
  72\.   getting_a_page(user)
File "/home/migrate/migrate/apps/posting_app/posting.py" in posterours_get_pages_task
  21\.   celery.group(getting_a_page.s(user, i,post) for i in range(no_of_pages))().get()
File "/usr/local/lib/python2.7/dist-packages/celery/canvas.py" in __call__
  316\.                     map(Signature.clone, self.tasks), partial_args) 
```

# ios - 在 Xcode 4.5 中设置 translatesAutoresizingMaskIntoConstraints 的位置

> ID：14204082
> 
> 赞同：37
> 
> 时间：2013-01-07T21:10:27.937
> 
> 标签：ios, xcode, ios6, xcode4.5, autolayout

我需要设置`translatesAutoresizingMaskIntoConstraints`为`NO`. 默认情况下，它设置为`YES`（以帮助大多数应用程序从 struts 和 springs 过渡到新的自动布局）。

Xcode中是否有可以将默认值从更改`YES`为的地方`NO`？

还是我必须为每个视图手动设置它？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2015-01-29T13:00:46.180

我迟到了这个问题，但在 Xcode 5 和 6 中仍然缺少提到的选项，所以这个问题仍然有意义。

实际上，我们总是可以通过在 Storyboard (Interface Builder) 中添加**用户定义的运行时属性来为视图/控件/对象的任何属性设置值，如下面的屏幕截图所示。**

它也适用于**translatesAutoresizingMaskIntoConstraints**。所以这个问题可以解决。

![在此处输入图像描述](../Images/522d00b6c4ca12509de17c300cef78a4.png)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-01-10T21:33:01.507

这是一个很好的问题——我试图为自己找到一个答案。可悲的是，看起来没有“快速修复”。目前，Apple 考虑基于约束的布局选择加入 - 甚至命名[`UIView`Class Reference](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIView_Class/UIView/UIView.html)的一部分：

> 选择基于约束的布局

但这种选择加入并不是全球性的。我认为这是因为如果您只是将 Springs & Struts 转换为 Constraints，则并非一切看起来都很好。一些 UI 元素会损坏，或者您会收到大量无法满足的约束错误。

我可以想到一种*可能的*解决方案 - 我自己没有尝试过，但是您可以在其上创建一个类别`UIView`，将**所有** 对象设置为`UIView`返回. 虽然我不知道这会破坏什么，但它会全局设置为.`NO``- (BOOL)translatesAutoresizingMaskIntoConstraints``translatesAutoresizingMaskIntoConstraints``NO`

[如果您想了解更多关于类别的信息，](http://www.mikeash.com/pyblog/friday-qa-2010-01-29-method-replacement-for-fun-and-profit.html)这里有一个很好的分类介绍！

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-06T08:06:37.587

当您必须更改子视图的大小或位置时。`(BOOL)translatesAutoresizingMaskIntoConstraints`在设置子视图的框架之前使用方法。

```
[self.benchmarkButton removeFromSuperview];
[self.benchmarkButton setTranslatesAutoresizingMaskIntoConstraints:YES];
[self.benchmarkButton setFrame:CGRectMake(20, self.benchmarkButton.frame.origin.y+40, 260, 30)];
[self.benchmarksView addSubview:self.benchmarkButton]; 
```

这样你的子视图就不会受到约束，因为它在 Xcode 4.3 及更高版本中是默认的（自动布局）。谢谢

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-12-03T08:30:53.987

根据文档，`NO`如果视图是通过 Interface Builder 添加的，则此属性会自动设置为。

[https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIView_Class/#//apple_ref/occ/instp/UIView/translatesAutoresizingMaskIntoConstraints](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIView_Class/#//apple_ref/occ/instp/UIView/translatesAutoresizingMaskIntoConstraints)

# vb.net - vb.net 改变图片的颜色

> ID：14204084
> 
> 赞同：1
> 
> 时间：2013-01-07T21:10:34.490
> 
> 标签：vb.net, graphics, colors

我正在努力解决以下问题：我有一张小图片被涂成红色。此颜色必须更改为另一种颜色（用户选择）。我使用了 msdn，一些谷歌搜索做了以下事情：

```
 Private Function GetPicture(Iterator As Integer, tempfile As String) As String
        Dim Rstring = ""

        If Colors.Count = 0 OrElse Iterator >= Colors.Count Then
            Rstring = tempfile
        Else
            Dim NewPicture = My.Computer.FileSystem.GetTempFileName()
            My.Computer.FileSystem.CopyFile(tempfile, NewPicture, True)
            Dim mypict = New Bitmap(NewPicture)

            Dim ColorList As New List(Of Color)

            For x = 0 To mypict.Width - 1
                For y = 0 To mypict.Height - 1
                    Dim mypixel = mypict.GetPixel(x, y)

                    If ColorList.Contains(mypixel) = False Then
                        ColorList.Add(mypixel)
                    End If
                Next
            Next

            Dim NewColor = Color.FromArgb(255, 0, 0, 255)
            Dim ListOfColorMaps As New List(Of ColorMap)
            For Each elem In ColorList
                Dim newcolormap = New ColorMap
                newcolormap.OldColor = elem
                newcolormap.NewColor = NewColor
                ListOfColorMaps.Add(newcolormap)
            Next

            Dim imageAttributes As New ImageAttributes()
            Dim width As Integer = mypict.Width
            Dim height As Integer = mypict.Height
            Dim colorMap As New ColorMap()

            'colorMap.OldColor = Color.FromArgb(255, 0, 0, 0) ' opaque red
            'colorMap.NewColor = Color.FromArgb(255, 0, 0, 255) ' opaque blue
            Dim remapTable As ColorMap() = ListOfColorMaps.ToArray
            imageAttributes.SetRemapTable(remapTable, ColorAdjustType.Bitmap)

            Dim tempBmp = New Bitmap(width, height)
            Dim g = Graphics.FromImage(tempBmp)
            g.DrawImage(tempBmp, New Rectangle(0, 0, width, height), 0, 0, width, height, GraphicsUnit.Pixel, imageAttributes)

            g.Save()
            g.Dispose()
            mypict.Dispose()

            Dim NewFileName = NewPicture.Remove(NewPicture.IndexOf("."c) - 1) & ".png"
            tempBmp.Save(NewFileName, Imaging.ImageFormat.Png)

            My.Computer.FileSystem.DeleteFile(NewPicture)

            tempBmp.Dispose()
            Rstring = NewPicture
        End If

        Return Rstring 
```

代码无异常运行，似乎找到了所需的颜色，但保存的 tempbmp 不包含图片。发生这种情况是因为代码在没有图形的 dll 中运行吗？

您几乎可以忽略“IF”部分——这与另一个用例有关。

问候和真诚的感谢 Christian Sauer

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T10:55:07.540

您没有显示任何图片，因为您正在绘制一个空位图。

您的问题从这里开始：

```
Dim tempBmp = New Bitmap(width, height)
Dim g = Graphics.FromImage(tempBmp)
g.DrawImage(tempBmp, New Rectangle(0, 0, width, height), 0, 0, width, height, _
            GraphicsUnit.Pixel, imageAttributes) 
```

*   您创建一个新位图（可能具有白色背景）。
*   `Graphics`然后从空位图创建一个新对象。
*   然后将**空位图**绘制到自身上。

您应该做的是绘制`mypict`对象（这是您要更改其颜色的位图）。因此，您的第三行应如下所示：

```
g.DrawImage(mypict, New Rectangle(0, 0, width, height), 0, 0, width, height, _
            GraphicsUnit.Pixel, imageAttributes) 
```

由于 Graphics 对象`g`关联`tempBmp`（在 DrawImage 操作之前为空），因此绘图`mypict`将使用您的参数绘制到它。

另一项建议是删除该`g.Save()`行。当您计划稍后恢复图形对象时，您可以保存它。执行 a`Graphics.Save()`不会保存图片。真正保存您所做更改的是该`tempBmp.Save()`行。

# parameters - 将十六进制值传递到 Verilog 中的模块

> ID：14204088
> 
> 赞同：5
> 
> 时间：2013-01-07T21:10:49.200
> 
> 标签：parameters, verilog

我创建了一个接受电线`[ 4 : 0 ]`作为输入的模块，并且我正在使用这个模块的几个实例。但是，我得到：

> 实例端口表达式中的语法错误

每当我传递一个包含 AF 的值时。

例如：

```
key_schedule i1(09); // works
key_schedule i1(0A); // doesn't work
key_schedule i1(15); // works
key_schedule i1(1D); // doesn't work 
```

如果有人知道出了什么问题，我会很感激他们的帮助。

另外，如果我传递一个值“C”，但我也有一个名为 的电线，会发生什么`C`？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-07T21:28:25.867

Verilog 将所有裸数字文字视为十进制。 `A`并且`D`不是合法的十进制值。

对于十六进制文字，您需要使用以下命令指定文字类型`'h`：

```
key_schedule i1('h0A); // works
key_schedule i1('h1D); // works 
```

请参阅 IEEE 标准（例如 1800-2009）的“编号”部分。

以下代码在 2 个不同的模拟器（Incisive 和 VCS）上为我编译而没有错误：

```
module tb;
    key_schedule i1(5'h1A);
    key_schedule i2('h1A);
endmodule

module key_schedule (input [4:0] in);
    always @(in) $display(in);
endmodule 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-07T21:29:48.563

来自[http://www.asic-world.com/verilog/syntax1.html#Integer_Numbers](http://www.asic-world.com/verilog/syntax1.html#Integer_Numbers)

Verilog HDL 允许将整数指定为

*   调整大小或未调整大小的数字（未调整大小为 32 位）
*   以二进制、八进制、十进制或十六进制为基数
*   基数和十六进制数字 (a,b,c,d,e,f) 不区分大小写
*   大小、基数和值之间允许有空格

句法：

```
[size]'[radix][value]; 
```

例子：

```
8'h1D;   # 8-bit hex value "1D" 
```

# javascript - 计时器不会死 javascript

> ID：14204091
> 
> 赞同：-2
> 
> 时间：2013-01-07T21:11:16.453
> 
> 标签：javascript, jquery, setinterval, long-polling

我正在做一些长时间的轮询。当某个陈述为真时，我有一个让按钮闪烁的功能。这里是：

```
function blinking(object, x) {

    console.log(x);

    if(x>0){

        var existing_timer = object.data('clock');
        if (existing_timer){
            clearInterval(existing_timer);
        }

        timer = setInterval(blink, 10);

        function blink() {
            object.fadeOut(400, function() {
               object.fadeIn(400);
            });
        }

    }

} 
```

现在..注意计时器被设置为“计时器”。当有人做某事使语句为假（使 x=0）时，我希望计时器在看到 x=0 时停止使按钮闪烁。这听起来很容易，但我什么都试过了哈。

我一直在研究和尝试不同的东西，但它似乎不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T21:14:56.533

如果您的变量计时器是全局的，那么您应该能够使用以下方法清除间隔：

```
clearInterval(timer); 
```

从 setInterval 返回的整数对于该计时器是唯一的，因此您需要清除它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T21:22:03.467

这是一个简单的实现。

[http://jsfiddle.net/AQgBc/](http://jsfiddle.net/AQgBc/)

```
var $led = $('#led'),
    blinkState = 0,
    blinkTimer,
    blinkDuration = 300,
    blink = function () {
      if (blinkState) {
        $led.toggleClass('on');
      }
      console.log('blink');
      blinkTimer = setTimeout(blink, blinkDuration);     
    };

$('button').on('click', function () {
  blinkState = (blinkState) ? 0 : 1;
});

blink(); 
```

我只是写了自己的，没有复制你的，但我认为最相关的问题只是使用 setTimeout 而不是担心 setInterval 并清除该间隔。

*编辑以回应评论：*

如果您希望它在用户操作之前一直闪烁，然后停止轮询，那就更简单了。

[http://jsfiddle.net/AQgBc/1/](http://jsfiddle.net/AQgBc/1/)

```
var $led = $('#led'),
    blinkState = 1,
    blinkTimer,
    blinkDuration = 300,
    blink = function () {
      if (blinkState) {
        console.log('blink');
        $led.toggleClass('on');

        blinkTimer = setTimeout(blink, blinkDuration);
      }   
    };

$('button').on('click', function () {
  blinkState = (blinkState) ? 0 : 1;
});

blink(); 
```

# javascript - 页面控件，就绪事件不起作用。Javascript Windows 8 应用程序

> ID：14204093
> 
> 赞同：0
> 
> 时间：2013-01-07T21:11:21.953
> 
> 标签：javascript, windows, html, visual-studio-2012

我刚开始用 Javascript、HTML5 和 CSS3 为 Windows 8 开发应用程序。

我的问题是，在调用该函数时`WinJS.Navigation.navigate (target-page.html)`，应用程序实际上加载了页面的文档 HTML，但应用程序没有执行事件`ready`。`target-page.js`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T11:47:52.643

The error was that in the "WinJS.Navigation.navigate ()" there wasn't the second arguments which is the state of the navigation, so the function became:"WinJS.Navigation.navigate (target-page.html, WinJS.Navigation.state)"

Thanks Bj

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T21:18:37.467

我认为您正在寻找特定的 Windows 事件。如果没有看到您的代码，很难确切地知道发生了什么。尝试这个：

```
 document.addEventListener("DOMContentLoaded", //Your event handler, false); 
```

# wxpython - FileOpen、FileSave 混淆

> ID：14204095
> 
> 赞同：0
> 
> 时间：2013-01-07T21:11:28.210
> 
> 标签：wxpython

我的程序有两个功能（除其他外）：一个用于保存文件，一个用于加载文件：

```
def OnFileSave(self, event):
    mystring = ...
    f = file(os.path.join(dirName[0], fileName[0]), 'w')
    f.write(mystring)
    self.PushStatusText("Spiel gespeichert!")
    f.close()
    e.Skip()
    return True

def OnFileOpen(self, event):
    dlg = wxFileDialog(self, "Load File", dirName[0], fileName[0],
                       "MyFiles (*.mf)|*.mf|All Files|*.*", wx.OPEN)
    if (dlg.ShowModal() == wx.ID_OK):
        fileName[0] = dlg.GetFilename()
        dirName[0] = dlg.GetDirectory()
        f = file(os.path.join(dirName[0]+'\\', fileName[0]), 'r')
        ...
        dlg.Destroy() 
```

两者都按预期工作，但现在我做了一点改变：当一个文件已经加载（名称！='default'）并且我想加载另一个文件时，应该在加载另一个文件之前保存第一个文件。所以我只在 OnFileOpen(self,event) 的顶部添加了这两行：

```
if name != 'default':
    return self.OnFileSave(event) 
```

现在的问题：第一个文件成功保存，但 FileDialog 没有打开（所以我无法加载另一个文件）。当我在“return self.OnFileSave(event)”中删除“return”时，FileDialog 打开，选择文件后 FileDialog 再次打开。有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T07:56:41.020

不要返回。只需调用类似：

```
if name != 'default':
    self.OnFileSave(None) 
```

# c# - 在 C# 中修改作为 DataSet 一部分的 DataTable - 更改未显示在 DataSet 中

> ID：14204096
> 
> 赞同：0
> 
> 时间：2013-01-07T21:11:43.167
> 
> 标签：c#, datatable, dataset

我在 C# 中工作，我有一个`DataSet`和一个`DataTable`. 我已将`DataTable`. 然后我用 SQL 查询`DataSet`填充。`DataTable`在调试器中，我可以看到我的`DataTable`. 我`DataTable`在 DataSet 的表列表中看到了我的，但它是一个`null`表（即，没有列，没有数据）。为什么数据不显示？这是我的代码：

```
DataSet ds = new DataSet();
DataTable dt = new DataTable("BaseData");
ds.Tables.Add(dt);
List<SqlParameter> paramz = new List<SqlParameter>();
paramz.Add(new SqlParameter("@LitHoldDetailsID", litHoldDetailsID));
dt = LHClassLibrary.LHDataAccessLayer.ExecuteSelect("usp_GetLitHoldDetails_A", paramz); 
```

我试过了

```
ds.AcceptChanges(); 
```

但这无济于事。我真的必须提前定义 DataTable 中的所有列吗？这是一个返回大量列的查询，所以我希望我可以跳过这一步。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T21:18:26.943

您可能需要像这样使用 SqlAdaptor.Fill(DataTable) ：

```
string sql = @"Data Source=.;Initial Catalog=test;Integrated Security=True";
SqlConnection conn = new SqlConnection(sql);
conn.Open();
SqlDataAdapter adaptor = new SqlDataAdapter("<sql query>", conn);
DataTable dt = new DataTable();
adaptor.Fill(dt); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T21:23:24.677

我将尝试以这种方式更改您的代码执行顺序

```
DataSet ds = new DataSet();
List<SqlParameter> paramz = new List<SqlParameter>();
paramz.Add(new SqlParameter("@LitHoldDetailsID", litHoldDetailsID));
DataTable dt = LHClassLibrary.LHDataAccessLayer.ExecuteSelect("usp_GetLitHoldDetails_A", paramz);
dt.TableName = "BaseData";
if(dt.DataSet != null) dt.DataSet.Tables.Remove(dt);
ds.Tables.Add(dt); 
```

我想 ExecuteSelect 方法将初始化并返回一个 DataTable，其中包含存储过程返回的所有列和行。

只有此时 DataTable 才被添加到您的 DataSet 中，而不是之前。
在您的代码中，该变量`dt`被分配给 ExecuteSelect 返回的 DataTable ，但这与之前创建的 DataTable 的引用不同，因此您的 DataSet 仍然是一个空表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T21:25:04.637

我总是这样做；希望这可以帮助！

```
using (SqlConnection con = new SqlConnection(SqlConString))
{
    string command = "Your Query Here...";
    using (SqlCommand cmd = new SqlCommand(command, con))
    {
        cmd.Parameters.AddWithValue("@Param", SqlDbType.Type).Value = YourParameter;

        con.Open();
        using (SqlDataAdapter da = cmd.ExecuteNonQuery())
        {
            da.Fill(dt);
        }
    }
} 
```

# c# - 生成矩形后应用程序变得迟缓

> ID：14204100
> 
> 赞同：0
> 
> 时间：2013-01-07T21:11:48.583
> 
> 标签：c#, silverlight

我只是在 c# 中玩弄矩形数组，一切正常，直到我想在矩形的“层”之间循环，在循环几次后应用程序（Silverlight）变得非常慢。

我的代码如下，是否可以就可能导致这种退化的原因提供任何建议？

```
 private int worldHeight = 20;
    private int currentLayerNo = 0;
    private int keypressCounter = 0;
    public MainPage()
    {
        InitializeComponent();
        createGrid();
    }
    private void createGrid()
    {
        blockCanvas.Children.Clear();
        int x = 0, y = 0;
        Layer generateWorld = new Layer();
        generateWorld.z = worldHeight;
        generateWorld.x = 50;
        generateWorld.y = 50;
        generateWorld.Gen();
        Rectangle[,] currentLayer = generateWorld.createLayer(currentLayerNo);
        for (int a = 0; a < currentLayer.GetLength(0); a++)
        {
            for (int b = 0; b < currentLayer.GetLength(1); b++)
            {
                Rectangle currentBlock = new Rectangle();
                currentBlock = currentLayer[a, b];
                blockCanvas.Children.Add(currentBlock);
                Canvas.SetTop(currentBlock, x);
                Canvas.SetLeft(currentBlock, y);
                y = y + 32;
            }
            x = x + 32;
            y = 0;
        }
        currentLayer = null;
        this.KeyDown += new KeyEventHandler(onKeyDown);
    }
    private void onKeyDown(object sender, KeyEventArgs e)
    {
               //Code here cycles between layers, each time calling the createGrid() method after altering currentLayerNo
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T21:24:55.773

在 Canvas 上清除和添加子项是性能密集型操作。如果要提高性能，请使用缓存。我的意思是不要重新创建所有这些矩形，而是简单地重用它们。

重新定位你需要的那些，如果你需要一些添加额外的，或者隐藏在上一步中创建的那些，但现在不需要了。

性能问题的另一个原因是您在调用 creategrid 时一遍又一遍地**添加相同的事件处理程序。**这意味着当您第二次按下该键时，您将调用 createGrid 2 次。在随后的每一次按键操作中，对 createGrid 的调用次数都会增加一倍。

尝试先删除该行，看看是否需要使用缓存。我在视觉上很重的 WPF 应用程序中需要它，它就像一个魅力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T21:27:19.277

每次您调用时，`createGrid()`您也会调用`this.KeyDown += new KeyEventHandler(onKeyDown);`它添加一个新的事件侦听器。

第一次调用`createGrid()`this 意味着 on key down`createGrid()`将被调用一次，然后将再次注册`KeyDown`，这意味着现在将被调用两次。在下一个`KeyDown`事件`createGrid()`被调用两次，每次它都将自己添加到`KeyDown`事件中。

重复直到放慢速度。

您可以将注册放在 MainPage 构造函数中。

# algorithm - 使用 min-hash 实现局部敏感散列

> ID：14204102
> 
> 赞同：7
> 
> 时间：2013-01-07T21:11:59.380
> 
> 标签：algorithm, locality-sensitive-hash, minhash

我已经阅读了很多教程、文档和使用 min-hash 实现 LSH（位置敏感散列）的代码片段。

LSH 试图通过散列随机子集并聚合它们来找到两个集合的 Jaccard 系数。我查看了 code.google.com 中的实现，但也无法理解他们的方法。我了解论文[Google 新闻个性化：可扩展的在线协作过滤](https://dx.doi.org/10.1145%2F1242572.1242610)，但我无法理解其中的任何实现。

有人可以用简单的话解释一下如何用 MinHash 实现 LSH 吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T13:46:38.857

您想实现 min-hash 算法，而*不是*LSH 本身。最小散列*是*一种 LSH 技术。因此，LSH 通常不近似 Jaccard 系数，最小散列的特定方法可以。

[Anand Rajaraman 和 Jeff Ullman 在《海量数据集挖掘》第 3 章](http://infolab.stanford.edu/~ullman/mmds/ch3.pdf)中进行了介绍。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-25T04:43:46.837

集合的最小哈希表示是估计 Jaccard 相似度的一种有效方法，以两个最小哈希集之间共享哈希的相对数量给出：

```
import random

def minhash():
    d1 = set(random.randint(0, 2000) for _ in range(1000))
    d2 = set(random.randint(0, 2000) for _ in range(1000))
    jacc_sim = len(d1.intersection(d2)) / len(d1.union(d2))
    print("jaccard similarity: {}".format(jacc_sim))

    N_HASHES = 200
    hash_funcs = []
    for i in range(N_HASHES):
        hash_funcs.append(universal_hashing())

    m1 = [min([h(e) for e in d1]) for h in hash_funcs]
    m2 = [min([h(e) for e in d2]) for h in hash_funcs]
    minhash_sim = sum(int(m1[i] == m2[i]) for i in range(N_HASHES)) / N_HASHES
    print("min-hash similarity: {}".format(minhash_sim))

def universal_hashing():
    def rand_prime():
        while True:
            p = random.randrange(2 ** 32, 2 ** 34, 2)
            if all(p % n != 0 for n in range(3, int((p ** 0.5) + 1), 2)):
                return p
    m = 2 ** 32 - 1
    p = rand_prime()
    a = random.randint(0, p)
    if a % 2 == 0:
        a += 1
    b = random.randint(0, p)
    def h(x):
        return ((a * x + b) % p) % m
    return h

if __name__ == "__main__":
    minhash() 
```

# sql-server - tsql：如何将查询结果导出到 .csv？

> ID：14204105
> 
> 赞同：2
> 
> 时间：2013-01-07T21:12:07.803
> 
> 标签：sql-server, tsql

我想将我的查询结果导出到 .csv 文件（本地）。我已经在谷歌上搜索了一段时间......似乎找不到一个很好的简单例子。谢谢您的帮助。

示例：“从表中选择前 3 个 *”到 ----->“c:\data\test_data.csv”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T21:18:52.623

您可以使用命令行[`bcp`](http://msdn.microsoft.com/en-us/library/ms162802.aspx)或 SQL Server Integration Services 来执行此操作

```
bcp "SELECT TOP 3 * FROM test.dbo.table1" queryout c:\temp\table1.csv -c -t, -T -S .\SQLEXPRESS 
```

# database - 每行和/或列的字节数

> ID：14204107
> 
> 赞同：1
> 
> 时间：2013-01-07T21:12:34.567
> 
> 标签：database, vertica

如何确定 Vertica 中特定 schema.table 的每行和/或列的字节数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T03:29:51.640

您要使用以下系统表：column_storage

它包含您需要的所有信息。每个节点每个投影的行数和字节数。您始终可以使用 SUM() 查询它以获得所需的剪辑。

# lua - 防止多次执行 Lua 脚本

> ID：14204108
> 
> 赞同：2
> 
> 时间：2013-01-07T21:12:40.993
> 
> 标签：lua

我正在 Linux 中编写一个只能运行一个实例的 Lua 脚本。为了在 Bash 中完成此操作，我将使用`mkdir`创建一个锁定文件，然后如果文件存在则立即从脚本返回；如果没有先前的实例正在运行，则允许脚本继续并在完成后删除锁定文件。

有没有办法在Lua中以原子方式“检查文件是否存在或如果不存在则创建它”？我在 Lua 文档中找不到任何此类功能，但我是该语言的新手。`io.open("filename","w")`看起来它不符合这些要求。如果没有原生的类似物`mkdir`，有没有更好的方法来完成这种类型的 Lua 脚本锁定？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T22:36:45.350

只需转录您最终得到的答案：

```
if not os.execute("mkdir lockfile >/dev/null 2>&1") then 
  return 
end 

--do protected stuff 

os.execute("rmdir lockfile") 
```

# mysql - PHP 未识别函数脚本

> ID：14204123
> 
> 赞同：-5
> 
> 时间：2013-01-07T21:13:30.390
> 
> 标签：mysql, cookies, php, minecraft

我尝试使用的代码如下，我仔细检查了它和所有内容，它一直说这个错误：致命错误：调用未定义的函数 Votifier()，我不知道问题出在哪里。这是我在这里问的最后手段，我已经在谷歌上搜索了 2 个小时.. 在此先感谢。

```
<?php
if (isset($_COOKIE['votfed']) && $_COOKIE['vofted'] == 'true') {
    exit();
} else {
    mysql_connect("", "", "")or die("cannot connect");
    mysql_select_db("")or die("cannot select DB");
    $result = mysql_query('SELECT * FROM servers WHERE id = "' . $_GET["server"] . '"');
    while ($row = mysql_fetch_array($result)) {
        $public_key  = $row['votifier_key'];
        $server_ip   = $row['ip'];
        $server_port = $row['votifier_port'];
        $username    = 'USERNAME';
    }
    $username = preg_replace("/[^A-Za-z0-9_]+/", '', $username);
    if (Votifier($public_key, $server_ip, $server_port, $username)) {
        echo 'Success!';
    } else {
        echo 'Error!';
    }
    ini_set('error_reporting', E_ALL);
    function Votifier($public_key, $server_ip, $server_port, $username) {

        $public_key = wordwrap($public_key, 65, "\n", true);
        $public_key = <<<EOF
-----BEGIN PUBLIC KEY-----
$public_key
-----END PUBLIC KEY-----
EOF;
        $address    = $_SERVER['REMOTE_ADDR'];
        $timestamp  = time();
        $string     = "VOTE\MC-ServerLists.com\n$username\n$address\n$timeStamp\n";
        $leftover   = (256 - strlen($string)) / 2;
        while ($leftover > 0) {
            $string .= "\x0";
            $leftover--;
        }
        openssl_public_encrypt($string, $crypted, $public_key);
        $socket = fsockopen($server_ip, $server_port, $errno, $errstr, 3);
        if ($socket) {
            fwrite($socket, $crypted);

            return true;
        } else
            return false;
    }

    mysql_connect("", "", "")or die("cannot connect");
    mysql_select_db("")or die("cannot select DB");
    mysql_query('insert into voters (server_id, ipaddress) VALUES ("' . $_GET["server"] . '", "' . $_SERVER['REMOTE_ADDR'] . '")');
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T21:24:47.320

如果你正确地格式化你的代码，你会看到函数是有条件定义的，因此，它的定义必须在你调用函数之前发生：

```
<?php
if (isset($_COOKIE['votfed']) && $_COOKIE['vofted'] == 'true') {
    // ...
} else {
    // ...
    $username = preg_replace("/[^A-Za-z0-9_]+/", '', $username);
    if (Votifier($public_key, $server_ip, $server_port, $username)) {
        echo 'Success!';
    } else {
        echo 'Error!';
    }
    function Votifier($public_key, $server_ip, $server_port, $username)
    {
        // ...
    }
    // ...
}
?> 
```

本质上，您正在执行以下代码：

```
<?php
if( false) {
} else {
    if( foo()) { 
        echo 'Foo!'; 
    }
    function foo() { 
        return true;
    }
} 
```

这应该向您显示`foo()`直到`else`执行之后才定义，但是您在块`foo()`的开头调用`else`（在定义之前）。

您的函数应该在`if`语句之外，如下所示：

```
<?php
function Votifier($public_key, $server_ip, $server_port, $username)
{
    // ...
}
if (isset($_COOKIE['votfed']) && $_COOKIE['vofted'] == 'true') {
    // ...
} else {
    // ...
    $username = preg_replace("/[^A-Za-z0-9_]+/", '', $username);
    if (Votifier($public_key, $server_ip, $server_port, $username)) {
        echo 'Success!';
    } else {
        echo 'Error!';
    }
    // ...
} 
```

或者，您可以将它放在`else`块的开头，但从可读性的角度来看，我不推荐它。

# arrays - 我有舍入错误吗？Perl

> ID：14204125
> 
> 赞同：2
> 
> 时间：2013-01-07T21:13:38.817
> 
> 标签：arrays, perl, loops, rounding, nested-loops

我的脚本应该执行以下操作。它需要一个旧的标量列表，并创建一个新的、相应的数字列表。旧列表称为@oldMarkers，新列表称为@newMarkers。

示例输入如下： `chr1, chr2, IMP, chr3, IMP, IMP, IMP, chr4`

示例输出如下：`1, 2, 2.1, 3, 3.1, 3.2, 3.3, 4`

脚本的重点是读取@oldMarkers 列表并输出一个列表，其中对于包含字母“chr”的元素的每个实例，一个整数被推入数组@newMarkers。对于@oldMarkers 中的每个IMP 实例，都会将一个十进制数添加到@newMarkers。新的十进制数与前一个数字具有相同的“基本整数”，但添加了 0.1。换句话说，“IMP”的多个后续实例应该与最近读取的“chr”条目具有相同的整数，并附加一个十进制值，用于计算与该最近“chr”相对应的 IMP 的数量入口。

下面的脚本几乎可以 100% 工作。它甚至通常在以下情况下工作。在@oldMarkers 的某些地方，有许多 IMP 条目。当一行中有超过 10 个 IMP 时，代码应该将值推送到 @newMarkers 以便该条目块的所有“IMP”具有相同的整数，这也与对应于最近的数字匹配在@oldMarkers 中读取“chr”的实例。对该整数加 0.1。当小数点的值达到 0.9 时，小数点“重新开始”回到 .1 并从那里上升，直到 IMP 条目的结束。

例如，如果 @oldMarkers 有 13 个“IMP”块并且是： `chr1, chr2, IMP, IMP, IMP, IMP, IMP, IMP, IMP, IMP, IMP, IMP, IMP, IMP, IMP, chr2`

那么@newMarkers 应该是： `1, 2, 2.1, 2.2, 2.3, 2.4, 2.5, 2.6, 2.7, 2.8, 2.9, 2.1, 2.2, 2.3, 2.4, 3`

脚本摘要：

原始文件包含多行两个元素。第一个元素并不重要，因此在代码中被跳过。每行的第二个元素是一个 ID，类似于“chr4”或“IMP”。循环读取每一行，将`while`第二个元素添加到数组@oldMarkers。

然后，逐项读取该数组。该脚本首先询问@newMarkers 中的条目是否对应于原始@oldMarker 列表中的“chr”或“IMP”。这是通过第一个`if`和`else`设置完成的。

接下来，对于这两个条件，进一步询问该条目是否来自对应于“chr”或“IMP”条目的数字本身。这是在第一个这样的集合中使用嵌入`if`和`else`集合完成的。

然后根据条件定义新元素并将其推送到@newMarker。

就像我说的，这主要是有效的。然而，有时，当 IMP 的拉伸超过 10 时，脚本不会“回收”小数。相反，它将 .1 添加到前面的值并输入一个新的整数整数。但对于超过 10 的其他拉伸，它工作正常。它与这个“错误”不一致。

你能发现问题吗？

```
my @oldMarkers = ();
my @newMarkers = ();

while ( my $line = <$FILE> )
    {
    chomp $line;
    my @entries = split( '\t', $line );
    push( @oldMarkers, $entries[ 1 ] ); 
    } ### end of while

for ( my $i = 0 ; $i < scalar @oldMarkers   ; $i++ )
    {  
     if ( $oldMarkers[ $i ] =~ m/chr/ ) ### is a marker
        {
         if ( $oldMarkers[ $i - 1 ] =~ m/IMP/ ) ### new marker comes after imputed site
            {
             push( @newMarkers, int( $newMarkers[ $i - 1 ] ) + 1 );            
            }

       else  ### is coming after a marker                                       
           {
            push( @newMarkers, $newMarkers[ $i - 1 ] + 1 ); 
           }    

      } ### if

   else    ### is an imputed site
      {
       if ( $oldMarkers[ $i - 1 ] =~ m/IMP/ ) ### imputed site is after another imputed site
          {
           my $value = $newMarkers[ $i - 1 ] - int( $newMarkers[ $i - 1 ] );

           if ( $value < .9 )
                {
                 push( @newMarkers, $newMarkers[ $i - 1 ] + .1 );   
                }

          elsif ( $value > .9 )
                {
                 push( @newMarkers, int( $newMarkers[ $i - 1 ] ) + .1  );   
                } 

        } ### if

   else ### imputed site is after a marker
        {
         push( @newMarkers, int( $newMarkers[ $i - 1 ] ) + .1 ); 
        }    

    } ### else   

} ### for    

print $newMarkerfile join( "\t", @newMarkers); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T21:51:33.290

仅使用整数算术来做到这一点会更容易和更可靠。基本上，跟踪两个整数值：一个用于前面的`.`数字，一个用于后面的数字。如果后面的数字`.`达到 10，则将其重置为 1：

```
my @newMarkers;
my $chrCount = 0;
my $impCount = 0;

foreach my $marker (@oldMarkers) {
    if ( $marker =~ /^chr\d+$/ ) {
        $chrCount++;
        $impCount = 0;
        push @newMarkers, $chrCount;
    } elsif ( $marker eq "IMP" ) {
        $impCount++;
        $impCount = 1 if $impCount == 10;
        push @newMarkers, "$chrCount.$impCount";
    } else {
        die "Unrecognized marker $marker";
    }
} 
```

（[codepad.org 上的演示](http://codepad.org/xbbWm7xo)）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T21:36:28.553

10 × 0.1 = 1，然而

```
>perl -E"$x=0; $x += 0.1 for 1..10; say sprintf('%0.16f', $x); say int($x);"
0.9999999999999999
0 
```

在处理浮点数时，您应该始终使用某种形式或舍入或公差。

太多的数字在二进制中是周期性的。你知道 1/3 在十进制中是如何周期性的吗？嗯，1/10 在二进制中是周期性的。2/10、3/10、4/10、6/10、7/10、8/10 和 9/10 也是如此。这些数字都不能用浮点数无误地表示。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-07T21:55:52.757

似乎工作正常：

```
$imp_order = 0;
$chr_order = 0;
for my $old (@oldMarkers) {   
  if ( $old =~ m/chr/ ) ### is a marker
  {

    $imp_order = 0;
    $chr_order++;

    push( @newMarkers,  $chr_order );    

  } ### if

  else    ### is an imputed site
  {
      $imp_order = 0 if $imp_order == 9;
      $imp_order++;
      push( @newMarkers, $chr_order + $imp_order / 10 );   

  } ### else   

} ### for 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-07T21:46:07.997

正如 ikegami 建议的那样，那些 int() 调用肯定会导致您的舍入问题。您可以使用 POSIX，然后根据需要使用 ceil() 或 floor() 来解决问题。

请参阅此处的文档：http: [//perldoc.perl.org/perlfaq4.html#Does-Perl-have-a-round%28%29-function%3F-What-about-ceil%28%29-and-floor %28%29%3F-三角函数%3F](http://perldoc.perl.org/perlfaq4.html#Does-Perl-have-a-round%28%29-function%3F-What-about-ceil%28%29-and-floor%28%29%3F-Trig-functions%3F)

例如，我认为您描述的确切错误可以通过替换来修复：

```
elsif ( $value > .9 )
    {
        push( @newMarkers, int( $newMarkers[ $i - 1 ] ) + .1  );   
    } 
```

和：

```
elsif ( $value > .9 )
    {
        push( @newMarkers, ceil( $newMarkers[ $i - 1 ] ) + .1  );   
    } 
```

对于每种情况，您可能应该用适当的舍入函数替换所有这些 int() 调用。

跟进：我实际上更喜欢建议分别跟踪“chr”计数/订单和“imp”计数/订单的多个解决方案，而不是作为单个浮点数。但我将把它留在这里，因为我认为它对发帖人有关如何实施四舍五入的解决方案具有指导意义。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-08T06:55:25.073

如果我理解正确，那么这就是所有必要的。

```
use strict;
use warnings;

my @old = do {
  open my $fh, '<', 'markers.txt' or die $!;
  map /([^\t]+)$/, <$fh>;
};

my @new;
my @marker;
my $chr = 0;

for (@old) {
  if ( /chr/ ) {
    @marker = (++$chr);
  }
  elsif ( @marker > 1 and $marker[1] == 9 ) {
    $marker[1] = 1;
  }
  else {
    $marker[1]++;
  }
  push @new, [@marker];
}

@new = map join('.', @$_), @new;

print join(', ', @new), "\n"; 
```

**输出**

```
1, 2, 2.1, 2.2, 2.3, 2.4, 2.5, 2.6, 2.7, 2.8, 2.9, 2.1, 2.2, 2.3, 2.4, 3 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-01-07T22:21:16.263

如果在您的第​​二个示例中，输出应为： 1 2 2.1 2.2 2.3 2.4 2.5 2.6 2.7 2.8 2.9 3 3.1 3.2 3.3 4

而不是 > 使用 >=

然后你有 2 个选项： int( $newMarkers[ $i - 1 ] ) + $value + .100000 或在 newMarkers[$i - 1] 的 int 值上加 1

# javascript - Socket 对象的 InDesign 脚本会产生神秘的错误消息

> ID：14204128
> 
> 赞同：1
> 
> 时间：2013-01-07T21:13:46.157
> 
> 标签：javascript, adobe-indesign, extendscript

我正在开发一个广播电子邮件模板，该模板将从 RSS 提要中从我们的博客中提取最新的三篇文章，并将相关部分插入文档中。

我查看了[文档](http://wwwimages.adobe.com/www.adobe.com/content/dam/Adobe/en/devnet/scripting/pdfs/javascript_tools_guide.pdf)，根据关于`File`对象的一些信息、我自己的一些调试以及[InDesign 论坛帖子](http://forums.adobe.com/message/4026092)，我了解到无法使用该`File`对象来获取在线 XML 文件。

另一种选择（不求助于外部脚本，其中一个对我来说无论如何都不起作用）似乎是使用该`Socket`对象。所以我回到文档并从那里逐字复制/粘贴此代码：

```
reply = "";
conn = new Socket;
// access Adobe’s home page
if (conn.open ("www.adobe.com:80")) {
// send a HTTP GET request
conn.write ("GET /index.html HTTP/1.0\n\n");
// and read the server’s reply
reply = conn.read(999999);
conn.close();
} 
```

当我运行它时，我收到了以下描述性错误消息：

![感谢您提供此错误消息，Adobe！](../Images/f07a8f5cde8c2593da81a3fbb01e667e.png)

搜索“89858 javascript 错误”没有任何用处。

所以我被困住了。Adobe 的代码示例有错误，或者更有可能是我的错误。如果我不得不猜测，我猜这是某种代理问题，但我不确定，也不知道如何找出答案。

任何人都可以帮忙吗？对象的原理对`Socket`我来说是有意义的，但如果我连样本都不能工作，我真的没有任何地方可做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T16:29:55.863

当您从函数调用返回某些对象（XML、Socket）时会发生上述错误，但返回值并未在任何地方分配。

```
function test() {
    var xml = new XML('<test />');
    return xml;
}
test(); 
```

以上将导致错误。要绕过它，您必须在某处分配返回值。

```
var result = test(); 
```

* * *

尝试把所有收集所有函数调用的结果。我不确定是哪一个导致了错误。

```
var reply = "";
var conn = new Socket;
// access Adobe’s home page
if (conn.open ("www.adobe.com:80")) {
    // send a HTTP GET request
    var result = conn.write ("GET /index.html HTTP/1.0\n\n");
    // and read the server’s reply
    reply = conn.read(999999);
    var close = conn.close();
} 
```

# java - 打印记录的好方法

> ID：14204129
> 
> 赞同：0
> 
> 时间：2013-01-07T21:13:53.273
> 
> 标签：java, parsing

我正在为我的公司编写一个文件翻译器，它从源文件中获取数据并将一堆分隔记录写入目标文件。记录具有以下形式：

标题*录音 1*录音 2*录音 3*录音 4

如果一条记录为空，并且后面可以有另一条记录，则不打印该值，但包含分隔符，例如：

标题*记录 1**记录 3*记录 4

如果记录为空，并且是系列中的最后一条记录，则省略值和分隔符，例如：

标题*记录 1*记录 2*记录 3

除了（伪代码）之外，我试图想出一种在代码中描述这一点的好方法：

```
if last record is empty
    print this
otherwise
    print this other thing 
```

我想代码并不太难看，但我想要一个更好的解决方案。我正在使用 StringBuilder 为每个事务编写数据（每组记录对应一个事务，因此我可以遍历 TransactionSet 对象。），如果可以的话，我会尽量避免使用大量的 switch/if 语句。如果有人知道更好或更优雅的方式来做到这一点，我很想听听。

编辑：澄清的伪代码块

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T21:17:24.113

你可以这样做

```
System.out.print("HEADER");
StringBuilder sep = new StringBuilder();
for(String rec: headings) {
   sep.append("*");
   if(rec != null && !rec.isEmpty()) {
      System.out.print(sep + rec);
      sep.setLength(0);
   }
}
System.out.println(); 
```

这样，如果您后面有一个标题，它只会打印一个“*”。

# iphone - 我使用哪个 iPad 后缀？

> ID：14204130
> 
> 赞同：1
> 
> 时间：2013-01-07T21:14:13.590
> 
> 标签：iphone, xcode, ipad

我是使用 Icon-72.png 和 Icon-72@2x.png 还是使用 Icon~ipad.png 和 Icon~ipad@2x.png 我听到不同的答案，我很困惑。我使用什么 iPad 图标后缀？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T21:21:54.757

[这](http://developer.apple.com/library/ios/#qa/qa1686/_index.html)是一个链接，描述了每个图标的所有名称，以及它们的用途。我在我的项目中使用`Icon-72.png`and `Icon-72@2x.png`，它运行良好！

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T21:32:30.910

我使用前两个。它得到常规和视网膜（@2x）。尽管您可以在构建设置中指定任何您想要的内容。

# asynchronous - 如何使用 httpxmlrequest 获取页面的标题

> ID：14204131
> 
> 赞同：0
> 
> 时间：2013-01-07T21:14:19.827
> 
> 标签：asynchronous, asp-classic, vbscript

是否可以使用 XMLHTTP 对象获取页面的标题？

```
function getTitle(url)
Dim objRequest

Set objRequest = CreateObject("Msxml2.ServerXMLHTTP.3.0")
objRequest.open "GET", url , false
objRequest.Send

'getMsg = objRequest.status
'getMsg = objRequest.ResponseText

end function 
```

我试过`objRequest.title`了，没有用。

**更新**

试过这个 - 可能不是防故障 - 现在有效：

```
f = objRequest.ResponseText
loc = Instr(f,"<title>")
loc2= Instr(f,"</title>")
getTitle = Mid(f,loc+7,loc2-loc-7) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T21:32:10.943

您必须将结果插入到 DOM 中才能在 HTML 中识别内容。然后你必须向 DOM 询问页面的标题。

从 XHR 返回的只是一团文本，直到您对其进行处理。

# apache - 如何保护我的 WAMP，以便只有 localhost 可以访问根目录？

> ID：14204135
> 
> 赞同：2
> 
> 时间：2013-01-07T21:14:44.710
> 
> 标签：apache, wampserver

我已经设法设置了我的 WAMP 配置，这样我就可以在我的客户正在开发时向他们展示他们的网站，但我想保护根目录，以便只有我可以访问它。

就目前而言，任何人都可以简单地访问该域名并查看我正在处理的所有其他项目。

例如，我希望能够让我的客户访问：[http://example.com/customer1](http://example.com/customer1)但我不希望他们看到[http://example.com](http://example.com)。

我知道我必须在我的`httpd.conf`文件中配置一些东西，但不确定该怎么做。

希望我能正确解释这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T21:28:18.123

```
Deny From All
Allow From localhost 127.0.0.1 
```

It's some time since I used apache, but this should do it.

# javascript - 围绕固定分隔线环绕文本

> ID：14204136
> 
> 赞同：2
> 
> 时间：2013-01-07T21:14:51.933
> 
> 标签：javascript, jquery, html, css

有没有办法创建一个即使网页上的内容发生变化也不会移动的html元素，它保持在相同的位置并且其余内容环绕它？

我想创建一条横跨动态网页的长线。当有人向网页添加更多内容时，该行应该保持完整，而不是像砖墙一样移动，其余内容围绕它移动或跳过它。

视觉示例：

```
content content content content content contentcontent content
content content content content content contentcontent content co
--------------------------------------------------------------------(long line)
ntent content contentcontent contentcontent contentcontent content
content contentcontent contentcontent contentcontent contentcontent 
```

请注意第二行文本如何在长行上换行以在该行之后继续。

希望有道理，

发现了这个问题，这或多或少正是我想要[的 jQuery Split content based on height](https://stackoverflow.com/questions/7032639/jquery-split-content-based-on-height)

被问到的却没有得到回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T21:44:24.317

```
.fencepost {float: left; width: 0.1px; height: 100px;}
.gate {float: left; clear: left; width: 99.9%; height: 30px;} 
```

[http://jsfiddle.net/isherwood/P6Z3p/](http://jsfiddle.net/isherwood/P6Z3p/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T21:25:39.083

我认为CSS不可能。您可能会为每个“页面”设置字符限制，并且当您使用 javascript 在页面上检测到字符限制超过时，您会强制用户将注意力集中在新的“页面”上。

线条的样式就无关紧要了——它只是一个普通的 HTML 元素宽度 100% 或其他东西，重要的是强制用户拆分

# sql - 具有日期范围的多选 sql 查询

> ID：14204150
> 
> 赞同：0
> 
> 时间：2013-01-07T21:15:48.550
> 
> 标签：sql

我有这个查询，我从员工名册表中获取不同统计数据的总数。

```
SELECT A.rempid AS EmpId, 
       E.flname, 
       A.rdo_total, 
       B.grave_total, 
       C.sundays, 
       D.holidays 
FROM   (SELECT rempid, 
               Count(rshiftid)AS RDO_Total 
        FROM   rtmp1 
        WHERE  rshiftid = 2 
        GROUP  BY rempid 
        HAVING Count(rshiftid) > 0) A, 
       (SELECT rempid, 
               Count(rshiftid)AS Grave_Total 
        FROM   rtmp1 
        WHERE  rshiftid = 6 
        GROUP  BY rempid 
        HAVING Count(rshiftid) > 0)B, 
       (SELECT rempid, 
               Count(rshiftid) AS Sundays 
        FROM   rtmp1 
        WHERE  Datepart(dw, rdate) = 1 
               AND rshiftid > 2 
        GROUP  BY rempid 
        HAVING Count(rshiftid) > 0)C, 
       (SELECT rempid, 
               Count(rshiftid) AS Holidays 
        FROM   rtmp1 
        WHERE  rdate IN (SELECT pubhdt 
                         FROM   pubhol) 
               AND rshiftid > 2 
        GROUP  BY rempid 
        HAVING Count(rshiftid) > 0)D, 
       (SELECT empid, 
               [fname] + ' ' + [sname] AS flName 
        FROM   remp1)E 
WHERE  A.rempid = B.rempid 
       AND A.rempid = E.empid 
       AND A.rempid = C.rempid 
       AND A.rempid = D.rempid 
ORDER  BY A.rempid 
```

我想在其中添加一个日期范围，以便我可以在 2 个日期内查询数据库。rTmp1 表有一个名为 rDate 的列。我想知道最好的方法是什么。我可以将它添加到存储过程中并将变量添加到每个选择查询中。或者有没有更好的方法在日期范围内运行查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T21:28:36.020

i think just add an additional where clause item similar to:

```
AND ( rDate > somedate AND rDate < someotherdate ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T21:31:52.313

为每个查询添加日期范围是最直接的解决方案。

使其成为存储过程总是可以通过查询完成，但与这种特定情况无关。

如果将表缩小到指定日期范围所产生的记录数大大少于整个表，则可以选择将这些记录插入[临时表或表变量](https://dba.stackexchange.com/questions/16385/whats-the-difference-between-a-temp-table-and-table-variable-in-sql-server)并在该表上运行现有查询/结果集。

虽然我没有任何数据要测试，但您可能会考虑以下查询，因为它更易于阅读并且性能可能更好。但是你必须自己检查结果，也许做一些调整。

```
DECLARE @startDate date = '12/01/2012'
DECLARE @endDate date = DATEADD(MONTH, 1, @startDate)

SELECT
  [e].[empid],
  [e].[fname] + ' ' + [e].[sname] AS [flName],
  SUM(CASE WHEN [t].[rshiftid] = 2 THEN 1 ELSE 0 END) AS [RDO_Total],
  SUM(CASE WHEN [t].[rshiftid] = 6 THEN 1 ELSE 0 END) AS [Grave_Total],
  SUM(CASE WHEN [t].[rshiftid] > 2 AND DATEPART(dw, [t].[rdate]) = 1 THEN 1 ELSE 0 END) AS [Sundays],
  SUM(CASE WHEN [t].[rshiftid] > 2 AND [h].[pubhdt] IS NOT NULL THEN 1 ELSE 0 END) AS [Holidays]
FROM [remp1] [e]
INNER JOIN [rtmp1] [t] ON [e].[empid] = [t].[rempid]
LEFT JOIN [pubhol] [h] ON [t].[rdate] = [h].[pubhdt]
WHERE [t].[rdate] BETWEEN @startDate AND @endDate
GROUP BY 
  [e].[empid],
  [e].[fname],
  [e].[sname]
ORDER BY [empid] ASC 
```

# jquery - jquery元素同一个类

> ID：14204153
> 
> 赞同：2
> 
> 时间：2013-01-07T21:15:56.323
> 
> 标签：jquery

我搜索了一种简单/干净的方法来获取与所选元素具有相同类的每个元素。

类似的东西（不工作）

```
var myElement = $("#elementId");

var listSameClass = $.hasClass(myElement.attr("class")); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T21:18:08.943

是的，这很简单：

```
var myElement = $("#elementId");
var classes = myElement.prop('class').split(/\s+/);
var classSelector = '.' + classes.join('.');
var otherElements = $(classSelector); 
```

演示：http: [//jsfiddle.net/mattball/58uQh](http://jsfiddle.net/mattball/58uQh)

* * *

不够小？让我们把它变成一个不可读的单行！

```
var myElement = $("#elementId");
var otherElements = $('.' + myElement.prop('class').replace(/\s+/g, '.')); 
```

[http://jsfiddle.net/mattball/PQ5fX/](http://jsfiddle.net/mattball/PQ5fX/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T21:18:00.930

如果我理解正确，我建议：

```
var currentClass = this.className,
    allWithClass = $('.' + className); 
```

但是，这确实假设存在一个类。

对于具有多个类的元素：

```
var classes = this.className.split(/\s+/).join('.'),
    allWithClass = $('.' + classes); 
```

不知何故，我没有意识到您首先选择了一个元素`id`，在这种情况下，我建议您使用马特的答案，因为任何更正都会将我的答案变成重复。哎呀。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T21:24:50.737

var myElClass = $(this).attr('class');
var $myEls = $(myEl).find(myElClass);

[http://api.jquery.com/find/](http://api.jquery.com/find/)

# php - 对象数组的数据模型

> ID：14204157
> 
> 赞同：0
> 
> 时间：2013-01-07T21:16:23.660
> 
> 标签：php, javascript, extjs, extjs4.1

我需要一些关于使用 Ext 创建网格的帮助。这是我正在使用的代码：

作为数据源，我有一个如下所示的数组：

```
var listaEventos = [
    {"nu_evento":"1","dt_solicitacao":"2013-01-04 14:29:26","no_evento":"nome do evento","empregado_responsavel":"nome do responsavel","contato":"contato unidade"},
    {"nu_evento":"2","dt_solicitacao":"2013-01-04 14:54:29","no_evento":"nome do evento","empregado_responsavel":"nome do responsavel","contato":"contato unidade"},
    {"nu_evento":"3","dt_solicitacao":"2013-01-04 14:55:35","no_evento":"nome do evento","empregado_responsavel":"nome do responsavel","contato":"contato unidade"},
    {"nu_evento":"4","dt_solicitacao":"2013-01-04 15:04:47","no_evento":"nome do evento","empregado_responsavel":"nome do responsavel","contato":"contato unidade"},
    {"nu_evento":"5","dt_solicitacao":"2013-01-04 15:07:24","no_evento":"nome do evento","empregado_responsavel":"nome do responsavel","contato":"contato unidade"},
    {"nu_evento":"6","dt_solicitacao":"2013-01-04 15:08:07","no_evento":"nome do evento","empregado_responsavel":"nome do responsavel","contato":"contato unidade"},
    {"nu_evento":"7","dt_solicitacao":"2013-01-04 15:17:27","no_evento":"nome do evento","empregado_responsavel":"nome do responsavel","contato":"contato unidade"}
]; 
```

使用 PHP 从 DBMS 查询该数组，PHP 使用 json 将数组存储在 HTML 文档中，然后我的 js 代码获取该数组并创建一个 Ext 网格来打印它，并进行排序和填充。问题是我无法让 Ext 理解每个数组元素都是网格的行，每个对象字段代表网格的列。

为此，我使用此数据模型：

```
Ext.define('eventosDataModel', {
    extend: 'Ext.data.Model',
    fields: [
       {name: 'nu_evento', type: 'string'},
       {name: 'dt_solicitacao', type: 'date',  dateFormat: "Y-m-d H:i:s"},
       {name: 'no_evento', type: 'string'},
       {name: 'empregado_responsavel', type: 'string'},
       {name: 'contato', type: 'string'}
    ],
    idProperty: 'eventos'
}); 
```

和这家商店：

```
var store = Ext.create('Ext.data.ArrayStore', {
    model: 'eventosDataModel',
    data: listaEventos
}); 
```

最后，我创建了网格：

```
var grid = Ext.create('Ext.grid.Panel', {
    store: store,
    stateful: true,
    collapsible: false,
    multiSelect: true,
    stateId: 'stateGrid',
    columns: columnsStructure,
    height: 350,
    width: 1200,
    title: 'Eventos Existentes',
    renderTo: 'eventos-extgrid',
    viewConfig: {
        stripeRows: true,
        enableTextSelection: true
    }
}); 
```

我在一个单独的变量中指定的列：

```
var columnsStructure = [
        {
            text     : '#',
            width     : 50,
            sortable : true,
            dataIndex: 'nu_evento'
        },
        {
            text     : 'Nome do Evento',
            width    : 300,
            sortable : true,
            dataIndex: 'no_evento'
        },
        {
            text     : 'Data da Solicitação',
            width    : 200,
            sortable : true,
            renderer : Ext.util.Format.dateRenderer('d/m/Y H:i:s'),
            dataIndex: 'dt_solicitacao'
        },
        {
            text     : 'Empregado Responsável',
            width    : 300,
            sortable : true,
            dataIndex: 'empregado_responsavel'
        },
        {
            text     : 'Contato',
            width    : 345,
            sortable : false,
            dataIndex: 'contato'
        }
    ]; 
```

它正确地创建了网格，创建了它的列，甚至创建了与数组元素数量一样多的行。但是所有单元格都是空白的！

我设法使它工作将每个对象转换为一个数组：

```
var listaEventos = [
    ["1","2013-01-04 14:29:26","nome do evento","user name","contato unidade"],
    ["2","2013-01-04 14:54:29","nome do evento","user name","contato unidade"],
    ["3","2013-01-04 14:55:35","nome do evento","user name","contato unidade"],
    ["4","2013-01-04 15:04:47","nome do evento","user name","contato unidade"],
    ["5","2013-01-04 15:07:24","nome do evento","user name","contato unidade"],
    ["6","2013-01-04 15:08:07","nome do evento","user name","contato unidade"],
    ["7","2013-01-04 15:17:27","nome do evento","user name","contato unidade"]
]; 
```

不涉及 JS 代码，如果我用这个数组输入它，所有数据都会显示在网格上！

这对我来说现在很好，但它的可维护性非常糟糕。将 PHP 的 DAO 链接到 Ext 的网格的所有内容都是元素添加到 PHP 上的数组并在 JS 上列出的顺序。当然，我可以对每个文件做一个重要的评论来解释顺序的重要性，但是如果 PHP 数组键与 JS 对象名称相关，并且 Ext 会理解它并按名称绑定而不是按简单顺序绑定，那就更好了.

有没有办法进行这种绑定？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T05:54:28.627

你应该使用正确`idProperty`的（你正在使用），我在你的数据数组中`idProperty: 'eventos'`没有看到。在你的情况下，我猜`eventos`应该是。`idProperty: 'nu_evento'`

# image - 提取视频的所有帧而不进行任何色度二次采样

> ID：14204160
> 
> 赞同：0
> 
> 时间：2013-01-07T21:16:36.823
> 
> 标签：image, ffmpeg, jpeg

我希望以 jpeg 格式但以 4:4:4 格式提取视频的所有帧，即没有应用任何色度子采样，因此 MCU 为 8x8。我不确定是否有办法轻松做到这一点，但我尝试了这个：

```
`ffmpeg -i Video.mpg Pictures%d.jpg` 
```

但这给了我 4:2:0 格式的图像。其他选项是将它们转换为 RGB，然后在不进行任何二次采样的情况下保存。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T04:36:34.170

视频始终以 YUV:420 格式编码。除非它的 H.264 高配置。所以首先确保输入视频有 YUV 4:4:4

# git - 为什么要使用分离的 git worktree？

> ID：14204163
> 
> 赞同：2
> 
> 时间：2013-01-07T21:16:46.560
> 
> 标签：git, workflow

在 git 中设置分离的工作树有哪些优点和/或适当的用例？我对涉及一系列服务器（例如，localhost -> staging server -> live server）的工作流的情况特别感兴趣。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T21:40:28.257

最大的优势（至少我看到）是能够[将更改发布到实时服务器](http://blog.ekynoxe.com/2011/10/22/git-post-receive-for-multiple-remote-branches-and-work-trees/)，而无需强制 git 存储库本身位于实时区域中。您可以随心所欲地将 repo 扔到任何地方，并使用分离的工作树进行结帐。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T21:40:06.513

我想`git`开发日志将是寻找明确用例的最佳场所。但是，实际上，我知道子模块现在使用它们（关联的存储库结构现在存储在下面`.git/modules`，而工作树相对于您自己的工作树位于预期的位置。我也用它来检查一个为检查目的进行不同的修订，而无需`stash`或`commit`首先 - 第二个结帐可以在您完成后被丢弃。不过，我认为您不希望在不同的提交上使用两个活动的工作目录，以提交额外的更改。那条路充满了破坏的味道。我想我可以想象一些随机的公司法令，即所有存储库必须位于已备份的特定文件系统上，但您可以将工作目录放在其他地方；虽然这显然是某人“没有得到它”的极端情况......

# jquery - 使用 jquery 的多功能选项卡

> ID：14204164
> 
> 赞同：0
> 
> 时间：2013-01-07T21:16:48.370
> 
> 标签：jquery, html, css

HTML：

```
<ul class="tabs">
<li><a href="#tab-one" class="current">Residential</a></li>
<li><a href="#tab-two">Commercial</a></li>
<li><a href="#tab-three">Agricultural</a></li>
</ul>

<div id="tab-one" class="tab_container"> 
    <div class="quick-search"> 
    <h2>Tab 1 - Quick Search:</h2>
    <form action="#" method="post">
      <label for="quick-search-1" class="screen-reader-text">Quick Search:</label>
      <input type="text" name="quick-search-1" id="quick-search-1" value="" placeholder="e.g. search"/>
            <button class="quick-search-submit" class="button" type="submit">Submit</button>
        </form>
    </div>
    <div class="adv-search"> 
    <h2>Tab 1 - Advanced Search:</h2>
    <form action="#" method="post">
         <label for="adv-search-1" class="screen-reader-text">Search:</label>
         <input type="text" name="adv-search-1" id="adv-search-1" value="" placeholder="e.g. search"/>
            <button class="adv-search-submit" class="button" type="submit">Submit</button>
        </form>
    </div>
</div>

<div id="tab-two" class="tab_container"> 
    <div class="quick-search"> 
    <h2>Tab 2 - Quick Search:</h2>
    <form action="#" method="post">
      <label for="quick-search-2" class="screen-reader-text">Quick Search:</label>
      <input type="text" name="quick-search-2" id="quick-search-2" value="" placeholder="e.g. search"/>
            <button class="quick-search-submit" class="button" type="submit">Submit</button>
        </form>
    </div>
    <div class="adv-search"> 
    <h2>Tab 2 - Advanced Search:</h2>
    <form action="#" method="post">
         <label for="adv-search-2" class="screen-reader-text">Search:</label>
         <input type="text" name="adv-search-2" id="adv-search-2" value="" placeholder="e.g. search"/>
            <button class="adv-search-submit" class="button" type="submit">Submit</button>
        </form>
    </div>
</div>

<div id="tab-three" class="tab_container"> 
    <div class="quick-search"> 
    <h2>Tab 3 - Quick Search:</h2>
    <form action="#" method="post">
      <label for="quick-search-3" class="screen-reader-text">Quick Search:</label>
      <input type="text" name="quick-search-3" id="quick-search-3" value="" placeholder="e.g. search"/>
            <button class="quick-search-submit" class="button" type="submit">Submit</button>
        </form>
    </div>
    <div class="adv-search"> 
    <h2>Tab 3 - Advanced Search:</h2>
    <form action="#" method="post">
         <label for="adv-search-3" class="screen-reader-text">Search:</label>
         <input type="text" name="adv-search-3" id="adv-search-3" value="" placeholder="e.g. search"/>
            <button class="adv-search-submit" class="button" type="submit">Submit</button>
        </form>
    </div>
</div>

<div class="advanced-search">
    <span>Advanced Search</span>
</div> 
```

jQuery：

```
$('.tab_container:not(:first)').hide();

$('ul.tabs li a').click(function(){
  var t = $(this).attr('href');
  $('.tab_container').hide();
  $(t).fadeIn('slow');
  return false;
}); 
```

当前所做的所有操作都是与单击的选项卡相关的内容的选项卡。

我需要这个首先只在每次单击每个选项卡时显示“快速搜索”。然后，如果用户单击高级搜索范围，则快速搜索 div 将与高级搜索 div 切换。

这可能吗？

查看我当前的[jsFiddle](http://jsfiddle.net/WxDme/39/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T21:32:30.533

您可以在当前可见的 div 中切换每个

```
$('ul.tabs li a').click(function () {
  var t = $(this).attr('href');
  $('.tab_container').hide();
  $(t).fadeIn('slow');
  updateWord();
  return false;
});
// on advanced-search div click
$('.advanced-search').click(function () {
  // toggle both divs inside the visible div
  $('div.tab_container:visible').find('.quick-search,.adv-search').toggle();
  updateWord();
});
// function to update wording on div
function updateWord() {
  var c = $('div.tab_container:visible').find('div:visible').attr('class');
  $('.advanced-search').text(function (i, v) {
    return c.split('-')[0] == 'quick' ? v.replace('Quick', 'Advanced') : v.replace('Advanced', 'Quick')
  });
} 
```

[小提琴](http://jsfiddle.net/wirey00/2MqsB/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T21:45:00.693

只是玩弄你的小提琴，我做了这些改变

```
$('.tab_container:not(:first)').hide();
$('.adv-search').hide();
$('ul.tabs li a').click(function(){
  var t = $(this).attr('href');
  $('.tab_container').hide();
  $(t).fadeIn('slow');
  return false;
});

$('.advanced-search').click(function(){
  var curTab = $('.tab_container:visible');
  curTab.find('.quick-search').hide()
  curTab.find('.adv-search').show();
}); 
```

# ruby-on-rails-3 - rspec 中无法识别命名路径

> ID：14204166
> 
> 赞同：0
> 
> 时间：2013-01-07T21:17:00.587
> 
> 标签：ruby-on-rails-3, rspec

我正在使用 Rails 3.1.0 和 Rspec 2.12.2。我想要一个我们通过 jQuery 发布到的操作：

```
/path/api/save-reply 
```

我有以下规格：

```
describe 'test adding new mb post' do
  it 'shall add a new mb post' do
    post :save_reply, mb_detail: 'here is my detail', timestamp_id: 123, parent_id: 50, depth: 0
  end
end 
```

使用以下命名路线：

路线.rb

```
post '/api/save-reply' => 'api_mb#save_mb_reply', :as => :save_reply, :defaults => { :format => 'json' } 
```

并得到以下错误：

```
1) ApiMbController test adding new mb post shall add a new mb post
   Failure/Error: post :save_reply, mb_detail: 'here is my detail', timestamp_id: 123, parent_id: 50, depth: 0
   AbstractController::ActionNotFound:
     The action 'save_reply' could not be found for ApiMbController
   # ./spec/controllers/api_mb_controller_spec.rb:16:in `block (3 levels) in <top (required)>' 
```

规范不应该调用正确的路径“save_mb_reply”而不是尝试“save_reply”吗？我究竟做错了什么？

如果我运行：

```
Mon Jan 07$ bundle exec rake routes | grep save_reply
                      save_reply POST   /arc/v1/api/save-reply(.:format)                                                 {:format=>"json", :controller=>"api_mb", :action=>"save_mb_reply"}
Mon Jan 07$ 
```

提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T21:36:08.193

控制器规范不使用路由来确定调用什么 - 他们只是调用您指定的方法。

# java - 未调用 XmlAdapter 以使 List 适应 Map

> ID：14204167
> 
> 赞同：2
> 
> 时间：2013-01-07T21:17:15.597
> 
> 标签：java, xml, jaxb

我在玩 JAXB，所以我问的很多问题只是想看看有什么可能。

我有以下 XML：

```
<bundleMappings>
    <mapping>
        <parameter attr = "value">asdas</parameter>
        <parameter attr = "value2">d123asdsad</parameter>
        <parameter attr = "value3">0</parameter>
    </mapping>
    <mapping>
        <parameter attr = "value">23123s</parameter>
        <parameter attr = "value2">qwerty</parameter>
        <!-- more parameter elements -->
    </mapping>
    <!-- more mapping elements -->
</bundleMappings> 
```

我希望`parameter`元素位于 a`Map<String, Parameter>`而不是 List 中，其中键是`attr`值，值是元素的内容。我关注了一些博客文章并提出了这个。

```
@XmlRootElement(name = "bundleMmappings")
public class BundleMappings { 
    @XmlElement(name = "mapping")
    private List<Mapping> mMappings;

    //getters setters
}

@XmlAccessorType(XmlAccessType.FIELD) 
public class Mapping {
    @XmlElement
    @XmlJavaTypeAdapter(ParameterAdapter.class)
    private HashMap<String, Parameter> mParameterMap;

    //getters setters
}

@XmlAccessorType(XmlAccessType.FIELD)
public class Parameter {
    @XmlAttribute(name = "attr")
    private String mName;

    @XmlValue
    private String mValue;

    //getters setters
} 

@XmlAccessorType(XmlAccessType.FIELD)
public class Parameters {
    @XmlElement(name = "parameters")
    private List<Parameter> parameters = new LinkedList<>();

    //getters setters
} 
```

和适配器：

```
public class ParameterAdapter extends XmlAdapter<Parameters, Map<String, Parameter>> {

    @Override
    public Parameters marshal(Map<String, Parameter> map) throws Exception {
        Parameters params = new Parameters();
        params.setParameters(new ArrayList<Parameter>());
        for (String name : map.keySet()) {
            Parameter p = new Parameter();
            p.setName(name);
            p.setValue(map.get(name).getValue());
            params.getParameters().add(p);
        }
        return params;
    }

    @Override
    public Map<String, Parameter> unmarshal(Parameters value) throws Exception {
        Map<String, Parameter> map = new HashMap<>();
        for (Parameter parameter : value.getParameters()) {
            map.put(parameter.getName(), parameter);
        }
        return map;
    }
} 
```

我用适配器中的断点做了一个小的解组测试，`unmarshal`它根本没有被调用。为什么不？

我还尝试`Mapping`用`List`. `@XmlElement(name = "parameter")`在这种情况下，`unmarshall`调用了但`Parameters`传递给它的参数有一个空列表。

**编辑**

如果我尝试编组：

```
<bundleMappings>
    <mapping>
        <mParameterMap>
            <parameter name="HOME_NETWORK_ID">12345</parameter>
        </mParameterMap>
    </mapping>
</bundleMappings> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T21:26:27.250

当您`XmlAdapter`在集合属性上指定 an 时，它适用于集合中的项目。

```
public class Mapping {
    @XmlElement
    @XmlJavaTypeAdapter(ParameterAdapter.class)
    private List<Parameter> mParameters;

    //getters setters
} 
```

这意味着`ParameterAdapter`需要看起来像，`Foo`您要转换的内容在哪里`Parameter`：

```
public class ParameterAdapter extends XmlAdapter<Foo, Parameter> { 
```

**地图示例**

`XmlAdapter`以下是我博客中用于`Map`属性的示例的链接：

*   [http://blog.bdoughan.com/2010/07/xmladapter-jaxbs-secret-weapon.html](http://blog.bdoughan.com/2010/07/xmladapter-jaxbs-secret-weapon.html)

# javascript - Extjs4 MVC 将项目保存到服务器

> ID：14204172
> 
> 赞同：1
> 
> 时间：2013-01-07T21:17:25.783
> 
> 标签：javascript, extjs, extjs4, extjs4.1, extjs-mvc

我正在使用 Extjs4.1 MVC。我想要做的是将一些数据保存到服务器，但我不知道正确的格式或我应该如何将数据提交到服务器。这是我的想法，但我不相信 Ajax 调用应该在控制器中，它应该在模型中还是在存储文件中？

我的控制器中的方法：

```
 submit: function(value) { 
    data = {"id": 100, "tdt": "rTk", "val": "445"}   // test data
    Ext.Ajax.request({
        url: 'http://test.myloc.com/providerSvc/dbproxy.php',
        params: {
          'do':'insert',
          'object': 'stk',
          'values': data
        },
        success: function(response){
            alert('response.responseText);
        }
    })
   } 
```

我的店铺：

```
Ext.define('STK.store.Stack', {
extend: 'Ext.data.Store',
model: 'STK.model.Stack',
autoLoad: true,
proxy: {
    type: 'ajax',
    api: {
          read: 'http://test.myLoc.com/providerSvc/dbproxy.php?do=get&object=stack'
    },
    reader: {
        type: 'json',
        root: 'data',
        successProperty: 'success'
    },
    writer: {
        type: 'json'            
    }
}
}); 
```

我的模型：

```
Ext.define('STK.model.Stack', {
extend: 'Ext.data.Model',
fields: ['id', 'tdt', 'val']
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T08:05:13.017

`store.sync()`仅当 GET 和 POST 的端点相同时才有效。

您可以做的是，对于 GET，通过连接到 URL 或通过创建类似的对象来设置 extraParams

```
extraParams[urlKeys] = paramObject[urlKeys];
store.getProxy().setExtraParams(extraParams); 
```

然后，

```
Store.getProxy().setUrl(StoreUrlForGET);
Store.load({
callback : function(rec, operation, success) {
if (success) {}
else {}
}); 
```

对于 POST 写一个 AJAX 请求，

```
Ext.Ajax.request({
url : StoreURLForPOST,
method : 'POST',
jsonData : Ext.JSON.encode(YourPostData),
success : function(response, request) {},
failure : function(response, request) {}
}); 
```

对于这个 AJAX 请求，您可以，

```
Ext.Ajax.setDefaultHeaders({
"TokenId" : TokenValue
}); 
```

所有这些代码都进入您的控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T21:27:13.770

我认为商店是进行 ajax 调用的合适场所。

您可以通过将一条记录添加到存储中来“保存”一条记录，然后调用“sync()”函数。

像这样的东西（注意：代码未经测试）：

```
 var store = Ext.create("STK.store.Stack");

    var record =  Ext.create("STK.model.Stack");

    record.set(xvalues);
    record.isDirty = true;
    record.setDirty(true);  // I don't know if this line is required

    store.add(record);

    store.sync({
        success: function(batch, options){

          alert("OK!")                

        },
        failure: function(batch, options){ 
           alert("failure!")
        }
    }); 
```

# encryption - 模数解密函数

> ID：14204173
> 
> 赞同：0
> 
> 时间：2013-01-07T21:17:35.190
> 
> 标签：encryption, modulus

假设我们有一个这样的加密函数：

```
f(x) = x^5 mod 21 
```

如何从该函数生成的加密文本中获取纯文本？如何表示解密函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T21:43:43.110

这是作业吗？如果是这样，您应该将其标记为作业，并接受您过去的一些问题的答案。

这看起来像 RSA，其中模数是两个素数的乘积（即 n = p*q）。只需按照[算法](http://en.wikipedia.org/wiki/RSA_%28algorithm%29)的步骤操作即可。在这种情况下，n = 21 = 7*3。这告诉你 phi(n) = (6*2) = 12。

如果 5 是加密指数 (e)，并且 phi(n) = 12，那么要计算解密指数，您需要找到 d 使得 e*d = 1 (mod phi(n))。换一种写法，e ^(-1) = d (mod phi(n))。您可以使用 Mathematica 中的[PowerMod](http://reference.wolfram.com/mathematica/ref/PowerMod.html)函数执行此操作：PowerMod[5, -1, 12]。

一旦你知道了模逆，剩下的就变得容易了：

> c = (m)^5 mod 21
> 
> m = (c)^d mod 21

# node.js - 如何关闭从实时捕获源主动流式传输的 Node.js FFMPEG 子进程？

> ID：14204174
> 
> 赞同：5
> 
> 时间：2013-01-07T21:17:37.850
> 
> 标签：node.js, ffmpeg, streaming-video

我是 Node.js 的新手，并且已经知道如何利用 child.spawn 启动一个 FFMPEG 实例，该实例用于捕获实时视频并通过 rtmp 将其发送到 Adob​​e Media Server。

我看到的每个将 FFMPEG 与 Node.js 结合使用的示例都带有时间限制的示例，因此一旦 FFMPEG 到达它正在转换的文件的末尾，子进程就会关闭。

在这种情况下，没有“文件结尾”。

如果我实例化：

```
 var ffmpeg = child.spawn('ffmpeg.exe', [args]); 
```

它创建实时提要。

我尝试使用以下命令立即关闭子进程：

```
 setTimeout(function() {
        ffmpeg.stdin.resume();
        ffmpeg.stdin.write('insert command to echo q to close FFMPEG');
        ffmpeg.stdin.end();
    }); 
```

但是，这似乎不起作用。我继续在我的测试盒上看到我的 rtmp 提要。

有没有办法通过 Node.js 中的标准输入向 FFMPEG 传递关闭命令？

提前致谢！

瑞克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T15:50:20.753

以下代码由我的主 app.js 使用 child_process.fork() 方法作为模块加载：

```
 var spawn = require('child_process').spawn;

    var ffmpeg = spawn('C:\\Program Files (x86)\\ffmpeg\\bin\\ffmpeg.exe', ['-y', '-threads', '-0', '-re', '-rtbufsize', '204800000', '-probesize', '4096', '-vsync', '2', '-async', '30', '-f', 'dshow', '-s', '320x240', '-i', 'video=Integrated Webcam:audio=Microphone Array (IDT High Defi', '-c:a', 'libvo_aacenc', '-ab', '48000', '-ar', '22050', '-ac', '2', '-c:v', 'libx264', '-s', '400x300', '-g', '96', '-x264opts', 'bitrate=1200', '-preset', 'ultrafast', '-profile:v', 'baseline', '-pix_fmt', 'yuv420p', '-aspect', '4:3', '-f', 'flv', 'rtmp://server']);

    setTimeout(function() {
        ffmpeg.stderr.on('data', function() {
            ffmpeg.stdin.setEncoding('utf8');
            ffmpeg.stdin.write('q');
            process.exit();
        });
    }, 10000); 
```

它远没有我做的那么复杂。主 app.js 是一个基本的 HTML 页面，它提供服务并使用 socket.io 接收事件及其相应的数据。在这种情况下，'true' 事件会加载 module.js 文件，该文件会启动 FFMPEG 的实时捕获会话，将其馈送到 RTMP 服务器，并在 10 秒的超时后正常关闭 FFMPEG。

我的下一个任务是通过从 Web 界面触发的事件将其关闭，而不是当前的超时测试方法。

查看 Windows 中的任务管理器，FFMPEG 进程与辅助节点进程一样关闭。

原因是我发现的 node-ffmpeg 模块都不支持通过捕获输入进行实时流式传输。它们似乎主要用于对现有内容进行转码。理想情况下，最终结果将是一个可以启动和停止 FFMPEG 的基于 Web 的界面。我们的用例将替换 Adob​​e Flash Media Live Encoder 作为我们的 Adob​​e Media Server 的源，因为它无法保存标准 mp4 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-01T17:28:20.890

您需要在文件完成流式传输到 ffmpeg 后发送 EOF。然后ffmpeg将正确完成并关闭

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T21:56:01.270

下面或多或少是使用 Node.js 启动和关闭实时 FFMPEG 会话问题的最终解决方案：

```
 var     spawn = require('child_process').spawn
,   fs = require('fs');

    function ffmpeg(cmd, opts, callback) {
    var p;
    //console.log(callback());
    if(p == undefined) {
        var p = spawn(cmd, opts);

        p.stderr.on('data', function(data) {
            /*p.stdin.setEncoding('utf8');
                p.stdin.write('q');
                process.exit()
            */
            fs.readFile(__dirname + '/server-state.json', function(error, data) {
                if(error) {
                        console.log(error); 
                    } else {
                        content = JSON.parse(data);
                        console.log(content['State']);

                        if(content['State'] == 'false') {
                            p.stdin.setEncoding('utf8');
                            p.stdin.write('q');
                            process.exit()
                        }
                    }
            });

        });

        return p;
    }

}

    ffmpeg_var = ffmpeg('C:\\Program Files (x86)\\ffmpeg\\bin\\ffmpeg.exe', ['-y', '-threads', '-0', '-re', '-rtbufsize', '204800000', '-probesize', '4096', '-vsync', '2', '-async', '30', '-f', 'dshow', '-s', '320x240', '-i', 'video=Integrated Webcam:audio=Microphone Array (IDT High Defi', '-c:a', 'libvo_aacenc', '-ab', '48000', '-ar', '22050', '-ac', '2', '-c:v', 'libx264', '-s', '400x300', '-g', '96', '-x264opts', 'bitrate=1200', '-preset', 'ultrafast', '-profile:v', 'baseline', '-pix_fmt', 'yuv420p', '-aspect', '4:3', '-f', 'mp4', __dirname + '/IntegrityTest.mp4'], function() {

    }); 
```

此代码封装在“module.js”文件中，该文件通过根 application.js 文件中的 child_process.fork() 实例化。它读取存储“状态”的文本文件。此状态通过根应用程序中的写入/读取方法切换。在 on('data') 事件中，它读取文件，如果检测到状态已更改为 false，然后通过将 'q' 命令写入标准输入来关闭 FFMPEG。

如果我要在更大范围内实现它，除了通过使用数据库来改进它之外，我更愿意接受有关更优雅的编码方式的反馈。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T21:50:00.670

你可以简单地[杀死](http://nodejs.org/api/child_process.html#child_process_child_kill_signal)它。

```
ffmpeg.kill(SIGHUB) 
```

或您希望的任何其他终止信号，请参阅[http://en.wikipedia.org/wiki/Unix_signal](http://en.wikipedia.org/wiki/Unix_signal)

* * *

如果我正确理解您的示例，您将节点进程的所有参数传递给 ffmpeg，包括流。为了让您`ffmeg.end()`工作，您必须直接从您的节点进程中流式传输。我认为 ffmpeg 在连续接收来自您的相机的数据时不会停止。

# .htaccess - .htaccess 从带有参数的目录重定向到子域

> ID：14204177
> 
> 赞同：0
> 
> 时间：2013-01-07T21:17:53.403
> 
> 标签：.htaccess

我基本上已经将一些计费软件从 domain.co.uk/billing/ 移动到 billing.domain.co.uk

我基本上需要一个 htaccess 重写规则来重定向所有内容

**从**

```
 domain.co.uk/billing/invoice?=1 
```

**到**

```
 billing.domain.co.uk/invoice?=1 
```

这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T21:23:18.083

你可以这样做[`Redirect`](http://httpd.apache.org/docs/2.2/mod/mod_alias.html#redirect)：

```
Redirect 301 /billing http://billing.billing.domain.co.uk 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T21:28:14.950

首先，您必须将[http://domain.co.uk](http://domain.co.uk)托管在某个地方。在它里面你有帐单文件夹。

在帐单文件夹中，您可以使用以下代码进行 htaccess：

< IfModule mod_rewrite.c >

```
Options +FollowSymLinks

RewriteEngine On

RewriteRule ^(.*)/invoice?=(.*)$ http://billing.domain.co.uk/invoice?=$2 [R=301,L] 
```

</IfModule>

# string - 如何使用strrep删除存储在变量中的字符串？

> ID：14204179
> 
> 赞同：0
> 
> 时间：2013-01-07T21:18:00.447
> 
> 标签：string, matlab

我是一个新的 matlab 用户，我可以通过将字符串存储在变量中并使用它来删除使用 strrep 删除字符串吗？例如

```
C = textread('input.txt', '%s', 'delimiter', '\n');
expr = '[^\n]*.Data [^\n]*';
fileread_info = regexp(filetext, expr, 'match')
for id=i:length(fileread_info)
C = strrep(C, 'fileread_info{i}', '');
end 
```

但这会删除文件 input.txt 中的 expr 一词。如何删除变量 expr 中包含的字符串？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T08:21:40.620

正如@Navan 已经建议的那样：

1.  您可以使用`regexprep`：

    `C = regexprep( C, expr, '' ); % will do the regular expression search + replace in one commnad`

2.  你应该取消引用`'fileread_info{i}'`：

    `C = strrep(C, fileread_info{i}, '');`

# azure - 如何使用在暂存和生产中运行的 Azure 诊断执行自动缩放？

> ID：14204183
> 
> 赞同：1
> 
> 时间：2013-01-07T21:18:10.767
> 
> 标签：azure, production-environment, staging, azure-diagnostics

我已经根据我网站的 Azure 诊断设置了 Azure 自动缩放。

由于 Staging 和 Production 只是彼此的精确副本，因此 Staging 和 Production 都将诊断存储到 SAME WadPerformanceCountersTable。

虽然我知道我可以通过使用 DeploymentId 来区分暂存槽和生产槽，但 Azure 自动缩放是否也能做到这一点？如果是这样，怎么做？

如果不是，如何将 Azure 诊断和自动缩放设置为仅基于生产数据自动缩放生产？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T01:46:19.530

**编辑：**我运行了另一个测试，该测试使用生产和登台的反应规则进行扩展。Autoscaler 可以区分暂存和生产。我认为它也可以区分不同的部署。

然而，这篇文章中的信息对于想要远程控制多个站点的诊断的任何人都很有用。

* * *

我不相信 Azure 自动缩放区分生产和暂存，更不用说不同的站点了。我的理由是，我能够使用来自完全不同网站的诊断信息自动缩放一个网站。

至于如何区分暂存和生产，这里有一些定义可以帮助理解以下答案：

*   Autoscaler = 执行自动缩放的工作角色
*   目标站点 = 要扩展的站点

最初，我认为我必须在我的目标站点中调用[Azure 服务管理 API](http://msdn.microsoft.com/en-us/library/windowsazure/ee460799.aspx)来定期检查它是否在暂存。这不是一个好的答案，因为最佳实践是确保生产和登台完全相同。

然后我意识到我可以通过编辑诊断配置来远程[“禁用”](http://msdn.microsoft.com/en-us/library/windowsazure/gg432992.aspx)站点上的诊断，以停止在我的 Autoscaler 中收集数据。自动缩放器将根据它们的 deploymentId 知道哪些部署正在暂存和生产。使用此信息，我们可以通过将诊断设置为默认配置来轻松打开或关闭诊断。

# opencv - 从特定链接读取流

> ID：14204185
> 
> 赞同：3
> 
> 时间：2013-01-07T21:18:13.343
> 
> 标签：opencv, mjpeg

我需要使用 OpenCV 库从 mjpeg 读取流。更详细的，我需要阅读`http://194.126.108.66:8887/`。但是当我尝试这样做时

```
VideoCapture ipCam;
ipCam.open("http://194.126.108.66:8887/") 
```

我得到错误`icvOpenAvi_XINE(): Unable to initialize video driver`。

我已经用另一个指向 mjpeg 的链接测试了这段代码 - [http://c-cam.uchicago.edu/mjpg/video.mjpg](http://c-cam.uchicago.edu/mjpg/video.mjpg) 它工作正常。这两个链接有什么区别？以及如何阅读`http://194.126.108.66:8887/`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T21:47:21.797

OpenCV 需要为其 VideoCapture 参数提供文件扩展名，即使并不总是需要扩展名（如您的情况）。

您可以通过传入一个以 mjpg 扩展名结尾的虚拟参数来“欺骗”它：

```
ipCam.open("http://194.126.108.66:8887/?dummy=param.mjpg") 
```

这适用于我类似的 OpenCV Python 案例，祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-30T06:59:25.877

这适用于 Mjpeg 流媒体和 OpenCV

```
cap.open("http://192.168.1.206:8080/?action=stream?dummy=param.mjpg") 
```

# mysql - MySQL 选择数据对

> ID：14204186
> 
> 赞同：1
> 
> 时间：2013-01-07T21:18:22.690
> 
> 标签：mysql, sql, select

我有两张桌子：

```
CREATE TABLE `digits` (
  `digit` tinyint(3) unsigned NOT NULL,
  `group` tinyint(3) unsigned NOT NULL
) ENGINE=InnoDB  DEFAULT CHARSET=utf8;

INSERT INTO `digits` (`digit`, `group`) VALUES
(1, 1),
(2, 1),
(3, 1),
(4, 2),
(5, 2); 
```

和

```
CREATE TABLE `scores` (
  `digit1` tinyint(3) unsigned NOT NULL,
  `digit2` tinyint(3) unsigned NOT NULL,
  `score` tinyint(3) unsigned NOT NULL
) ENGINE=InnoDB  DEFAULT CHARSET=utf8;

INSERT INTO `scores` (`digit1`, `digit2`, `score`) VALUES
(1, 2, 5),
(1, 4, 9),
(2, 3, 3); 
```

我想做的是选择所有带有分数的数字组合（不重复），如果没有分数，则选择 null

示例答案（`WHERE group <=1`）：

```
digit1 | digit2 | score
-----------------------
1      | 2      | 5
1      | 3      | null
2      | 3      | 3 
```

示例答案（`WHERE group <=2`）：

```
digit1 | digit2 | score
-----------------------
1      | 2      | 5
1      | 3      | null
1      | 4      | 9
1      | 5      | null
2      | 3      | 3
2      | 4      | null
2      | 5      | null
3      | 4      | null
3      | 5      | null
4      | 5      | null 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T21:25:07.857

尝试这个：

```
select d1.digit, d2.digit, s.score
from digits d1 join
     digits d2
     on d1.group <= <groupnumber> and
        d2.group <= <groupnumber> and
        d1.digit < d2.digit left outer join
     score s
     on s.digit1 = d1.digit and
        s.digit2 = d2.digit 
```

# iphone - 实时更新 plist 填充 UITableView

> ID：14204188
> 
> 赞同：1
> 
> 时间：2013-01-07T21:18:31.237
> 
> 标签：iphone, ios, uitableview, detailtextlabel

我正在尝试创建一个应用程序，该应用程序将显示在 3 层的表格中，并在 detailTextLabel 中显示这些楼层中有多少台计算机可用。目前我没有实时数据，但我想暂时保留一些虚假的固定数据，以后可以插入真实数据。

我想我会创建一个数组 FloorList 和 FloorListAvailable。楼层列表将包含“一楼”“二楼”“三楼”，而 FloorListAvailable 将显示有多少计算机可用。

我目前不确定如何去做，这听起来很容易，但我无法理解它。我考虑过使用 NSDictionary。我已经使用了 .plist，但是当我获得实时数据时，它可以通过动态更改吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T23:09:57.180

一种可能的方法：

1.  通过脚本（例如）生成实时数据；JSON 将是一个很好的格式
2.  让您的应用以合适的频率下载数据文件
3.  解析 JSON（参见：[NSJSONSerialization](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html) into own objects；例如数组
4.  使用这些数组作为表视图的数据源
5.  每当您获得新数据时，发送`reloadData`到您的表视图

# c++ - 从构造函数捕获异常而不将对象隐藏在 try 块中

> ID：14204191
> 
> 赞同：8
> 
> 时间：2013-01-07T21:18:38.390
> 
> 标签：c++, exception

我有一个类，其构造函数可能会引发异常。

```
class A {
    A() { /* throw exception under certain circumstances */ }
}; 
```

我想在客户端中为堆栈分配的实例捕获此异常。但我发现自己被迫`try`至少在实例必须存活的情况下扩展块。

```
try {
    A a;
    do_something(a);
} catch {
    // ...
} 
```

现在，当 try 块太大而无法追踪异常的来源时，这显然会成为一个问题：

```
try {
    A a1;
    A a2;
    do_something(a1, a2);
} catch {
    // Who caused the exception?
} 
```

我该怎么做才能避免这种情况？

**更新**：

似乎我没有很好地解释这个问题：出于显而易见的原因，我希望 try 块跨越必要的代码（即，仅构建）。

但这会产生一个问题，即我之后无法使用这些对象，因为它们已经超出了范围。

```
try {
    A a1;
} catch {
    // handle a1 constructor exception
}
try {
    A a2;
} catch {
    // handle a2 constructor exception
}

// not possible
do_something(a1, a2); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-07T21:28:24.927

A solution that doesn't require changing `A` is to use nested try/catch blocks:

```
try {
    A a1;
    try {
        A a2;
        do_something(a1, a2);
    }
    catch {
      // a2 (or do_something) threw
    }
} catch {
    // a1 threw
} 
```

Probably better to avoid doing this if possible though.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-07T21:28:21.067

Use heap-constructed objects instead of stack-constructed objects, so that you can test which objects have been constructed successfully, eg:

```
// or std::unique_ptr in C++11, or boost::unique_ptr ...
std::auto_ptr<A> a1_ptr;
std::auto_ptr<A> a2_ptr;

A *a1 = NULL;
A *a2 = NULL;

try
{
    a1 = new A;
    a1_ptr.reset(a1);
}
catch (...)
{
}

try
{
    a2 = new A;
    a2_ptr.reset(a2);
}
catch (...)
{
}

if( (a1) && (a2) )
    do_something(*a1, *a2); 
```

Alternatively (only if `A` is copy-constructible):

```
boost::optional<A> a1;
boost::optional<A> a2;

try
{
    a1 = boost::in_place<A>();
    a2 = boost::in_place<A>();
}
catch (...)
{
    //...
}

if( (a1) && (a2) )
    do_something(*a1, *a2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-12T00:09:12.613

在某些情况下可能很方便的另一种方法：

```
class ExceptionTranslatedA : public A {
public:
    template<typename Exc>
    ExceptionTranslatedA(Exc exc)
    try : A() {}
    catch (unhelpful_generic_exception) {
        throw exc;
    }
}; 
```

如果您只想在原始 try-catch 块中抛出不同的异常，这将特别有用，因为您可以完全摆脱它。它也感觉比为控制流引入布尔变量更优雅（即使它们隐藏在`boost::optional`s 中）。

# php - 一键发送带有当前页面名称的消息

> ID：14204195
> 
> 赞同：0
> 
> 时间：2013-01-07T21:18:54.427
> 
> 标签：php, html, email, joomla, message

我有一个包含超过 10000 个视频的网站，有时嵌入的视频不起作用，我需要向访问者显示此消息“如果视频不再显示，请单击此处”，当他们单击此消息时，我会从已点击的页面接收通知

我没有找到任何可以做到这一点的 joomla 扩展

如果我把这个 php 代码放在我的 joomla 网站的每个页面中

```
<form action="" method="post">
<input type="submit" value="Send details to embassy" />
<input type="hidden" name="button_pressed" value="1" />
</form>

<?php

if(isset($_POST['button_pressed']))
{
    $to      = 'nobody@example.com';
    $subject = 'the subject';
$message = 'hello';
$headers = 'From: webmaster@example.com' . "\r\n" .
    'Reply-To: webmaster@example.com' . "\r\n" .
    'X-Mailer: PHP/' . phpversion();

mail($to, $subject, $message, $headers);

echo 'Email Sent.';
}

?> 
```

它会一键向我发送一条消息。

如何接收包含用户点击的页面名称的邮件？

在 Joomla 中，我们可以使用这个 html 代码获取当前页面的名称。

```
<? $doc =& JFactory::getDocument();
echo $doc->getTitle();?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T22:29:31.763

就像是

```
$message = 'Page:' . $doc->getTitle(); 
```

应该做的伎俩。

# jquery - jQuery 在没有警报的情况下无法工作

> ID：14204196
> 
> 赞同：0
> 
> 时间：2013-01-07T21:18:58.473
> 
> 标签：jquery

`alert`我在下面有一些 JavaScript，但除非我有如下所示的，否则它不起作用。我知道这是某种时间问题，但我不知道如何解决它。有什么想法吗？

```
$(function() {
    $("#search_field").tokenInput("/searches/suggest_gems.json", {
    onAdd: function (item) {
    $('#search_field').val(item.name);
    // Doesn't work without alert("hi");
    },
    crossDomain: false,
    tokenLimit: 1,
    tokenValue: name
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T21:27:31.757

I've run into similar issues before. What I've found to work is using `$(window).load(function(){...})` instead of `$(function(){...})`. This buys enough time to let anything that's not ready by the time the DOM is loaded to be ready by the time the window is loaded fully. Hope this helps.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T21:36:19.353

尝试检查控制台是否有错误。在 Chrome 中，您可以使控制台持久化：[https ://stackoverflow.com/a/7661797/1446608](https://stackoverflow.com/a/7661797/1446608)

听起来像一个异步问题。当您使用 时`alert`，代码执行会停止，并且不会显示错误。如果您没有使用警报，则错误会停止代码执行，因此永远不会触发*onAdd*，因此不会执行该代码。

首先，尝试在*onAdd*被触发时检查元素*#search_field*是否仍然存在于 DOM中。

 *还要检查那个项目。*名称*不是未定义的。

检查*onAdd*被触发之前发生了什么。*

# c# - 正确的模板绑定到 DependencyProperty

> ID：14204197
> 
> 赞同：1
> 
> 时间：2013-01-07T21:19:07.013
> 
> 标签：c#, wpf, dependency-properties, templatebinding

我知道当我写它时这是不对的，我已经能够为[另一个答案](https://stackoverflow.com/questions/4638741/template-binding-in-control-template)收集大部分答案，但就是无法掌握最后一点。绑定确实从 UI 传递到 DependencyProperty（以及创建控件时的另一种方式）。

我的模板（需要将 IsChecked 绑定移动到实例）：

```
<ControlTemplate x:Key="MyHeaderedContentTemplate" TargetType="HeaderedContentControl">
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto" />
        <RowDefinition Height="1*" />
    </Grid.RowDefinitions>
    <ContentControl>
        <StackPanel Orientation="Horizontal">
            <CheckBox Margin="2,2,20,2"
                                    Content="All/None"
                                    IsChecked="{Binding Path=AllFeatureTypesChecked, Mode=TwoWay}" />
            <TextBlock Text="{TemplateBinding Header}" Margin="2"/>
        </StackPanel>
    </ContentControl>
    <ContentControl Grid.Row="1" Content="{TemplateBinding Content}" />
</Grid> 
```

实例：

```
<HeaderedContentControl Grid.Row="0" Grid.Column="2" Grid.RowSpan="2" Grid.ColumnSpan="2" Margin="4"
                    Template="{StaticResource  ResourceKey=MyHeaderedContentTemplate}"
                    Header="Feature Details by Type">
    <HeaderedContentControl.Resources>

    </HeaderedContentControl.Resources>
    <ListBox ItemTemplate="{StaticResource SelectableLinkNode}"
            ItemsSource="{Binding Features}"/>
</HeaderedContentControl> 
```

![内容绑定提供 CheckBox 项列表](../Images/915924a43651cb3c11eac51ae275ea4a.png)

还有 Setter（当然，还有一个 Boolean AllFeatureTypesChecked DependencyProperty）：

```
 /// <summary>
    /// Needs to be set on Startup and on ItemIsCheckedChanged Event from the Features List
    /// </summary>
    private void SetAllSelectedState()
    {
        bool allSelected = (Features.Count > 0);
        foreach (var CheckableItem in Features) {
            if (CheckableItem.IsChecked == false) {
                allSelected = false;
                break;
            }
        }

        SetCurrentValue(AllFeatureTypesCheckProperty, allSelected);

    } 
```

供参考，这是DP

```
public static readonly DependencyProperty AllFeatureTypesCheckProperty =
        DependencyProperty.Register("AllFeatureTypesCheck", typeof(Boolean), typeof(ReportSources),
        new FrameworkPropertyMetadata(false, FrameworkPropertyMetadataOptions.BindsTwoWayByDefault, OnAllFeatureTypesCheckedChanged)); 
```

这是非常有趣的东西，如果没有这里的很棒的人，我无法做到！谢谢！

更新：好的，现在我有了这个（头脑风暴）：

```
 <ControlTemplate x:Key="MyHeaderedContentTemplate" TargetType="HeaderedContentControl">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="1*" />
            </Grid.RowDefinitions>
            <ContentControl>
                <StackPanel Orientation="Horizontal">
                <ContentPresenter Content="{DynamicResource ResourceKey=CheckControl}" Margin="2,2,20,2"/>
                    <TextBlock Text="{TemplateBinding Header}" Margin="2"/>
                </StackPanel>
            </ContentControl>
            <ContentControl Grid.Row="1" Content="{TemplateBinding Content}" />
        </Grid>
    </ControlTemplate> 
```

像这样实例化：

```
 <HeaderedContentControl Grid.Row="0" Grid.Column="2" Grid.RowSpan="2" Grid.ColumnSpan="2" Margin="4"
                            Template="{StaticResource  ResourceKey=MyHeaderedContentTemplate}"
                            Header="Feature Details by Type"
                            >
        <HeaderedContentControl.Resources>
            <CheckBox x:Key="CheckControl"
                      Content="All/None"
                      IsThreeState="True"
                      IsChecked="{Binding Path=AllFeatureTypesChecked, Mode=TwoWay}"
                      />
        </HeaderedContentControl.Resources>
        <ListBox ItemTemplate="{StaticResource SelectableLinkNode}"
                 ItemsSource="{Binding Features}"/>
    </HeaderedContentControl> 
```

但在创建控件后仍然无法让 DP 上设置的值显示在 UI 上。

...当然可以在这里使用一些帮助，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T19:27:51.613

愚蠢，真的 - 或者相当愚蠢......但我责怪使用字符串进行注册。当标识符的拼写发生变化时，IDE 只是没有做足够的尝试来更新这些东西。

```
 public Boolean? AllFeatureTypesChecked
    {
        get { return (Boolean?) GetValue(AllFeatureTypesCheckedProperty); }
        set { SetValue(AllFeatureTypesCheckedProperty, value); }
    }

    #region Using a DependencyProperty as the backing store for AllFeatureTypesCheck.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty AllFeatureTypesCheckedProperty =
        DependencyProperty.Register("AllFeatureTypesCheck", typeof(Boolean?), typeof(ReportSources),
        new FrameworkPropertyMetadata(null, FrameworkPropertyMetadataOptions.BindsTwoWayByDefault, OnAllFeatureTypesCheckedChanged));
    #endregion 
```

注意对象属性上的拼写与 DP 上的注册名称。

# c# - C#接口编程，如何保证返回值是可序列化的

> ID：14204198
> 
> 赞同：0
> 
> 时间：2013-01-07T21:19:10.750
> 
> 标签：c#

我希望我可以为我的界面做这样的事情

```
public T GetAStuff() where T is serializable 
```

因此，我想保证实现者返回一个可序列化的输出

这可以实现吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T21:24:27.500

不，因为那里没有“可序列化”的通用定义。它极大地依赖于序列化器，并且许多需求是基于属性的，不能表示为通用约束。

*   `BinaryFormatter`只需要`[Serializable]`，或者可能`ISerializable`
*   `XmlSerializer`需要`public`和一个公共的无参数构造函数（这`T : new()`会有所帮助），并且是可选`IXmlSerializable`的（但是：它非常罕见，因为它很可怕）
*   `DataContractSerializer`可以使用`XmlSerializer`setup 或 use `[DataContract]`，但不需要公共无参数构造函数
*   JSON.NET、protobuf-net 等可以使用一系列属性或运行时配置，并且可能使用或可能不使用构造函数

你最好的办法是`T`在运行时检查你需要的具体细节，或者更简单：只要确保你的单元/集成测试涵盖了它需要的所有场景。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T21:22:42.133

```
public interface IFoo
{
    T GetAStuff<T>() where T : ISerializable; // or what ever you need to constrain T to
} 
```

-或者-

```
public interface IFoo<T> where T : ISerializable
{
    T GetAStuff();
} 
```

由于有许多不同的序列化选项，您可能无法限制类型。如果您只需要处理一个序列化选项，那么它可能是可能的。

# css - 将 DIV 放在同一个位置，切换它们

> ID：14204201
> 
> 赞同：0
> 
> 时间：2013-01-07T21:19:16.047
> 
> 标签：css, html, positioning

我对几个 DIV 有一点问题。

我需要将两个 DIV 定位在完全相同的位置，然后切换它们。随着一个 div 消失，另一个应该出现。这我将使用 jQuery toggle() 来完成。

问题是两个 DIV 都应该是页面流的一部分，并且定位方式完全相同。我将如何实现这一目标？

因此，有一些先前的 div 占据了某个位置，具有相对定位和非固定大小（取决于窗口尺寸）

```
<div class="header">
... </div> 
```

然后我的 div

```
<div id="galleria" style="height:700px;width:920px; margin:0 auto; border:1px solid green;   ">
 ... </div> 
```

和其他我的 DIV

```
<div id="aboutDiv" >
This is ABOUT
</div> 
```

后面的两个 div 应该占据同一个位置。我可以使用哪些定位标签？

由于灵活的元素，该设计会根据窗口大小进行调整——第一个 DIV“标题”，因此不可能进行绝对定位。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T21:23:15.367

把它们一个接一个

```
<div id="galleria" style="height:700px;width:920px; margin:0 auto; border:1px solid green;   "> ... </div>
<div id="aboutDiv" >
This is ABOUT
</div> 
```

两者都应该被定位`relative`，当一个被隐藏时，另一个会向上移动并且它们将在同一个位置 - 只要您使用切换来始终隐藏一个并显示一个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T21:22:23.107

您要么需要一个相对定位的父容器和绝对定位的子容器，要么隐藏一个并在其完全淡出时显示另一个

# mysql - 可以用mysql进行计算吗？

> ID：14204202
> 
> 赞同：2
> 
> 时间：2013-01-07T21:19:25.703
> 
> 标签：mysql, sql

我有一个用于照片评分的数据库表，并且想要检索评分最高的照片。我知道我需要根据从最高到最低排序的平均评分来执行此操作。DB 表如下所示：

```
id  rating  rated_photo_id 
--  ------  ------------- 
1   5       1       
2   6       1
3   3       2
4   4       1
5   7       2 
```

在 SQL 查询中执行此计算是否有效甚至可能？如果没有，维护第二个表来存储每个 photo_id 的平均值是否有意义？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T21:21:47.157

几乎所有数据库都可以做到这一点。查看 MySQL 的聚合函数。

[http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)

具体[http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_avg](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_avg)为您的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T21:22:36.333

是的，假设您在rated_photo_id 列上有一个索引，那么计算平均值既简单又高效

```
 select rated_photo_id, AVG(rating) as average_rating 
       from photos group by rated_photo_id order by average_rating desc 
```

对于特定的照片可以指定一个 id：

```
 select rated_photo_id, AVG(rating) 
     from photos where rated_photo_id = 2 group by rated_photo_id 
```

理想情况下，您的索引将是 (rated_photo_id, rating) 以覆盖这些查询——从而实现最快的执行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-07T21:23:17.250

您不需要第二张桌子。评级表包含您需要的信息。使用[MySQL 聚合函数`GROUP BY`](http://dev.mysql.com/doc/refman/5.5/en/group-by-functions.html)：

```
SELECT rated_photo_id, AVG(rating) AS AverageRating, COUNT(*) AS NumberOfRatings
FROM rating_table
GROUP BY rated_photo_id
ORDER BY AverageRating DESC 
```

输出：

```
+----------------+---------------+-----------------+
| rated_photo_id | AverageRating | NumberOfRatings |
+----------------+---------------+-----------------+
|              1 |        5.0000 |               3 |
|              2 |        5.0000 |               2 |
+----------------+---------------+-----------------+ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-07T21:23:10.277

您应该能够按照片 ID 进行分组，并在创建组时获得平均值。

```
SELECT rated_photo_id , AVG(rating) as rating
FROM photos 
GROUP BY rated_photo_id
ORDER BY rating DESC 
```

# iphone - 更新 UICollectionViewCell 中的 UIProgressView 以获取下载文件

> ID：14204204
> 
> 赞同：3
> 
> 时间：2013-01-07T21:19:32.497
> 
> 标签：iphone, objective-c, ios, uiprogressview

当我下载文件时，我试图更新 UICollectionViewCell 中的 UIProgressView，但有时 progressView 更新，有时不更新，我不明白为什么，这是显示 UICollectionViewCell 的代码：

```
-(UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath {

static NSString *cellIdentifier = @"documentCell";

UICollectionViewCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:cellIdentifier forIndexPath:indexPath];

NSManagedObject *doc = [self.magDocument objectAtIndex:indexPath.row];

 UIButton *btn = (UIButton *)[cell viewWithTag:2003];
[btn addTarget:self action:@selector(addDocument:) forControlEvents:UIControlEventTouchUpInside];
UIProgressView *progressBar = (UIProgressView *)[cell viewWithTag:2005];

return cell;
} 
```

这是开始下载的按钮：

```
- (IBAction)addDocument:(id)sender
{
self.directCellPath = [self.myCollectionView indexPathForCell:(UICollectionViewCell *)[[sender superview] superview]];

NSManagedObject *document = [self.magDocument objectAtIndex:self.directCellPath.row];

[self loadLink:[document valueForKey:@"docUrl"]];
}

- (void)loadLink:(NSString *)urlDownload
{
UICollectionViewCell *cell = (UICollectionViewCell *)[self.myCollectionView cellForItemAtIndexPath:self.directCellPath];
UIProgressView *prg = (UIProgressView *)[cell viewWithTag:2005];

AFDownloadRequestOperation *request = [[AFDownloadRequestOperation alloc] initWithRequest:requestUrl targetPath:zipDownloadPath shouldResume:YES];

    [request setProgressiveDownloadProgressBlock:^(NSInteger bytesRead, long long totalBytesRead, long long totalBytesExpected, long long totalBytesReadForFile, long long totalBytesExpectedToReadForFile) {

            NSLog(@"%f",totalBytesReadForFile/(float)totalBytesExpectedToReadForFile);
        NSArray *progress = [NSArray arrayWithObjects:prg,[NSNumber numberWithFloat:totalBytesReadForFile/(float)totalBytesExpectedToReadForFile], nil];

        [self performSelectorOnMainThread:@selector(updateProgressBar:) withObject:progress waitUntilDone:NO];
    }];

    [self.downloadQueue addOperation:request];
 }

- (void)updateProgressBar:(NSArray *)progress
{
UIProgressView *pgr = (UIProgressView *)[progress objectAtIndex:0];
[pgr setProgress:[[progress objectAtIndex:1] floatValue]];
} 
```

一次进度视图有效，另外一千次无效，我不明白如何更新进度视图，有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T06:58:36.393

创建您的 customCell 并在其中显示所有 Visible UIViews（初始化，添加子视图...）。比在 cellForItemAtIndexPath 中使用自定义方法来激活（显示）它。如果您考虑 MVC，cellForItemAtIndexPath 仅用于控制器，而不是视图。

在您的情况下，将所有 IBAction、loadLink 和 updateProgress 带到 customCell 并发送参数以激活它们，或者您可以创建像 CustomCellDelegate 这样的新协议进行通信。

查看更多信息：

[在集合视图单元格中设置文本时出错](https://stackoverflow.com/questions/14287353/error-setting-text-in-collection-view-cell/14289862#14289862)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T21:36:38.260

可能是线程问题。试试看嘛

```
dispatch_async(dispatch_get_main_queue(), ^{
            UIProgressView *pgr = (UIProgressView *)[progress objectAtIndex:0];
            [pgr setProgress:[[progress objectAtIndex:1] floatValue]];
       });//end block 
```

尝试异步或同步

# asp.net-mvc - Mvc 4 脚本包和 GZip

> ID：14204206
> 
> 赞同：5
> 
> 时间：2013-01-07T21:19:41.120
> 
> 标签：asp.net-mvc, iis, gzip, bundle

我已将我网站上的所有脚本添加到非常大的包中（大约 700kb）。现在我想让 IIS 压缩它，但我不能。

我已经尝试了在这里和网络上找到的所有东西，但没有任何帮助。静态 *.js 文件会被 gzip 压缩，但不会完整捆绑。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T15:33:43.523

检查[动态压缩](http://technet.microsoft.com/en-us/library/cc730629%28v=ws.10%29.aspx)。必须为 IIS 和您的网站启用它。您还必须在 applicationHost.config 中有一个有效的配置。

```
<httpCompression directory="%SystemDrive%\inetpub\temp\IIS Temporary Compressed Files">
        <scheme name="gzip" dll="%Windir%\system32\inetsrv\gzip.dll" />
        <dynamicTypes>
            <add mimeType="text/*" enabled="true" />
            <add mimeType="message/*" enabled="true" />
            <add mimeType="application/x-javascript" enabled="true" />
            <add mimeType="application/json" enabled="true" />
            <add mimeType="*/*" enabled="false" />
        </dynamicTypes>
        <staticTypes>
            <add mimeType="text/*" enabled="true" />
            <add mimeType="message/*" enabled="true" />
            <add mimeType="application/x-javascript" enabled="true" />
            <add mimeType="application/atom+xml" enabled="true" />
            <add mimeType="application/xaml+xml" enabled="true" />
            <add mimeType="*/*" enabled="false" />
        </staticTypes>
    </httpCompression> 
```

**重要提示：**捆绑响应的内容类型是`text/javascript`，因此请检查您的配置是否为该类型。

# sockets - WampServer - Windows 7：无法通过套接字“/var/run/mysqld/mysqld.sock”连接到本地 MySQL 服务器 (2)

> ID：14204208
> 
> 赞同：0
> 
> 时间：2013-01-07T21:19:45.430
> 
> 标签：sockets, wampserver, mysql

我正在使用 Dreamweaver CS6。我已成功将我的网站上传到远程服务器。

当我在线访问网站 (www.spiritual-calling.com) 时，我收到以下错误消息：

> “无法通过套接字‘/var/run/mysqld/mysqld.sock’(2)连接到本地MySQL服务器”

我一直在阅读一些文章，例如： http: [//nikinuryadin.wordpress.com/2011/09/17/cant-connect-to-local-mysql-server-through-socket-varrunmysqldmysqld-sock-2/](http://nikinuryadin.wordpress.com/2011/09/17/cant-connect-to-local-mysql-server-through-socket-varrunmysqldmysqld-sock-2/)

但我是新手，不知道他们说的是什么世界，

> “创建目录（如果它不存在）。#sudo mkdir /var/run/mysqld/”

有人可以详细解释一下吗...？

我在 Windows 7 上安装了 WampServer。

对不起，我对 Linux 了解不多。

谢谢！

# java - 使用 soundcloud api 进行搜索

> ID：14204211
> 
> 赞同：1
> 
> 时间：2013-01-07T21:20:03.913
> 
> 标签：java, api, soundcloud

我怎样才能让我的搜索结果的排序顺序与 soundcloud.com 上的排序顺序一样？当我在 soundcloud.com 上搜索时；它看起来不是按热度或 created_at 排序的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T00:09:17.413

如果您观察网络流量，您会发现以下 API 调用：

[https://api.soundcloud.com/e1/me/stream?limit=10&offset=0&linked_pa​​rtitioning=1&client_id=xxx](https://api.soundcloud.com/e1/me/stream?limit=10&offset=0&linked_partitioning=1&client_id=xxx)

# android - 是否可以将 Google Maps MapView 保存为图像？

> ID：14204212
> 
> 赞同：0
> 
> 时间：2013-01-07T21:20:14.757
> 
> 标签：android, google-maps-android-api-2

我正在创建通过在 MapView（Google Maps Android API v2）上创建覆盖来跟踪用户位置的应用程序。是否可以将地图及其叠加层保存为图像？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T22:26:19.493

使用[谷歌静态地图](https://developers.google.com/maps/documentation/staticmaps/) API。它返回带有任何覆盖的位置图像（带有比例、缩放、宽度、高度、纬度、长参数）wish。并且适用于简单的 http 请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T17:04:15.187

我不相信在 Google Maps Andoird API V2 中这是可能的。请参阅我不久前提出的问题：[Capture screen shot of GoogleMap Android API V2](https://stackoverflow.com/questions/13773658/capture-screen-shot-of-googlemap-android-api-v2)

您当然可以使用 DDMS 保存屏幕截图，但我怀疑这就是您想要做的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T21:26:53.337

this guy in the android development message threads had a similar problem: [https://groups.google.com/forum/?fromgroups=#!topic/android-developers/eGOyIkj4BfU](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/eGOyIkj4BfU)

He had the same issue you are having and seemed to have resolved it.

in iOS the problem is easy to fix. you can Render from context and save it as PNG or JPG in your camera roll or User Directory ;) Good luck with droid.

# xpages - 对话框中文件数据的空值：com.ibm.xsp.http.UploadedFile？

> ID：14204216
> 
> 赞同：0
> 
> 时间：2013-01-07T21:20:38.777
> 
> 标签：xpages

我找到了一些导入 CSV 文件的代码。它使用文件上传控件来获取文件的句柄。当我只在常规 xPage 上使用它时效果很好。

但我想在扩展页面对话框中使用它，但它不起作用。导致问题的线路是这条线路？

```
var fileData:com.ibm.xsp.http.UploadedFile =   facesContext.getExternalContext().getRequest().getParameterMap().get(getClientId('fileUpload1')); 
```

它总是返回 null。我的对话框上确实有一个名为 fileIpload1 的控件。

我在客户端 ID 中看到的区别在于，在直接 xPage 上，客户端 ID 是：view:_id1:_id19:fileUpload1，而当使用对话框时，客户端 ID 是：view:_id1:_id193:_id194:_id195： dlg_ImportParticipants:_content:form1:_id373:fileUpload1

如果有任何问题或解决方法，知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T21:53:38.360

这个问题的答案可以帮助你：[Ext lib dialog and file upload controls](https://stackoverflow.com/questions/9515394/ext-lib-dialog-and-file-upload-controls)

简而言之：您需要使用解决方法。

我使用它，因此如果您需要更多帮助，可以使用工作代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T18:49:27.353

感谢每个链接。我想现在对我来说可能有点复杂。我想出了自己的解决方案（有点）。我所做的是在我的主 xpage 上放置一个带有文件上传控件的面板。我的按钮取消隐藏面板。我的导入按钮会导入代码，但也会再次隐藏它。我仍然遇到的问题是，在导入执行后，我仍然在更新 xpage 上的“嵌入式”视图。

顺便说一句，我正在使用 CSS display 属性隐藏/取消隐藏面板。

这不像您发布的链接那样优雅，但要简单得多。

# c# - 如何使用 SQLite 在 DAL 和 BLL 之间共享类？

> ID：14204217
> 
> 赞同：0
> 
> 时间：2013-01-07T21:20:57.620
> 
> 标签：c#, sqlite, windows-runtime

例如，数据访问层定义：

```
public class Customer
{

    [PrimaryKey, AutoIncrement]
    public int Id { get; set; }

    [MaxLength(30)]
    public string Name { get; set; }
} 
```

这些属性`SQLite`用于映射表。问题是我需要`Customer`在 BLL 和表示层中使用该类。我想隔离 DAL 实现以避免添加对`SQLite`上层的引用。显然，如果我尝试在没有引用的情况下将`Customer`类添加到程序集中，问题出在属性上。`Common.dll``SQLite``SQLite`

例如，我可以创建另一个`Customer`类`CustomerBase`并将值从 映射`Customer`到`CustomerBase`。这对我来说似乎太乏味了，因为我管理了许多数据类。

对于这种情况，可以推荐哪种方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T21:25:20.707

我想说数据访问层应该与业务层 dto 分开。因此，只需在数据访问层中使用您的 sqllite 实体，然后在 BLL 中使用另一个 dto（数据传输对象），然后使用这两个对象之间的映射

# asp.net - Asp.net MVC4，如何在不使用任何提供程序的情况下使用角色

> ID：14204219
> 
> 赞同：0
> 
> 时间：2013-01-07T21:20:59.060
> 
> 标签：asp.net, asp.net-mvc-4

我想在 asp.net MVC4 项目中使用没有任何提供者的角色。

我在没有提供者的情况下成功登录和注销。

但是对于角色，我不知道如何设置它。

这是我的 AccountController.cs 的一部分

```
[HttpPost]
[AllowAnonymous]
[ValidateAntiForgeryToken]
public ActionResult Login(LoginModel model, string returnUrl)
{
    if (ModelState.IsValid && myLogin(model.UserName, model.Password, persistCookie: model.RememberMe))
    {
    FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe);

    //set Roles, how can I set role to users?
    if (HttpContext.User != null)
    {
        if (!Roles.RoleExists("Administrator"))
        {
        Roles.CreateRole("Administrator");
        }
        Roles.AddUserToRole(model.UserName, "Administrator");

        //string[] roles = { "Moderator", "Administrator" };
        //HttpContext.User = new GenericPrincipal(HttpContext.User.Identity, roles);
    }

    return RedirectToLocal(returnUrl);
    }

    // If we got this far, something failed, redisplay form
    ModelState.AddModelError("", "The user name or password provided is incorrect.");
    return View(model);
}

private bool myLogin(string userName, string password, bool persistCookie)
{
    if (userName == "root" && password == "root")
    {
    return true;
    }
    else
    {
    return false;
    }
} 
```

//set Roles 部分不起作用，错误消息说，

**未找到名为“root”的用户。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。异常详细信息：System.InvalidOperationException：未找到名为“root”的用户。**

网页配置

```
<system.web>
    <compilation debug="true" targetFramework="4.5" />
    <httpRuntime targetFramework="4.5" />
    <authentication mode="Forms">
      <forms loginUrl="~/Account/Login" timeout="2880" />
    </authentication>
    <roleManager enabled="true" /> 
```

我想使用角色检查来控制访问此页面，

```
[Authorize(Roles="Administrator")]
public ActionResult Contact()
{
      ViewBag.Message = "Your contact page.";
      return View();
} 
```

如何为用户定义角色？在操作上使用过滤器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T22:20:39.540

当您打电话时，`Roles.*`您基本上是在调用在您的 web.config 中注册的底层角色提供程序。如果您不想使用默认角色提供程序（适用于 SQL 服务器），您可以始终[`write a custom role provider`](http://msdn.microsoft.com/en-us/library/8fw7xh74%28v=vs.100%29.aspx).

您需要做的就是编写[`RoleProvider`](http://msdn.microsoft.com/en-us/library/system.web.security.roleprovider%28v=vs.100%29.aspx)该类的自定义实现，或者至少编写您打算使用的方法：

```
public class MyRoleProvider: RoleProvider
{
    ... your implementation comes here
} 
```

然后在 web.config 中注册您的自定义角色提供者以替换默认角色提供者：

```
<roleManager defaultProvider="DefaultRoleProvider">
    <providers>
        <add name="DefaultRoleProvider" type="MyNamespace.MyRoleProvider, MyAssembly" />
    </providers>
</roleManager> 
```

# c# - 最小化到托盘的问题

> ID：14204225
> 
> 赞同：0
> 
> 时间：2013-01-07T21:21:23.370
> 
> 标签：c#, winforms, icons, system-tray, trayicon

在我的 Windows 窗体应用程序（C#）中，我有这样的代码：

```
 private void frm_main_Resize(object sender, EventArgs e)
    {
        if ((this.WindowState == FormWindowState.Minimized) && (checkBox1.Checked))
        {
            this.ShowInTaskbar = false;

            notifyIcon1.Visible = true;
        }
    }

    private void notifyIcon1_DoubleClick(object Sender, EventArgs e)
    {
        if (this.WindowState == FormWindowState.Minimized)
        {
            this.WindowState = FormWindowState.Normal;
        }
        else
        {
            this.WindowState = FormWindowState.Minimized;
        }

        this.Activate();
    } 
```

我的 publick 表单有双击处理程序 `notifyIcon1.DoubleClick += new System.EventHandler(this.notifyIcon1_DoubleClick);`

当最小化的应用程序仍然出现在任务栏中时，如何更改？我希望在最小化状态下它只会在系统托盘中。为什么这个 coce deosnt 工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T21:31:34.697

我在我的项目中使用了类似的代码，你不需要隐藏和显示：

```
private void frm_main_Resize(object sender, EventArgs e)
{
    if (this.WindowState == FormWindowState.Minimized && checkBox1.Checked)
    {
        this.ShowInTaskbar = false;
        notifyIcon1.Visible = true;
    }
} 
```

也尝试处理`MouseClick`事件而不是`DoubleClick`

```
 private void notifyIcon1_MouseClick(object sender, MouseEventArgs e)
  {
     if (e.Button == System.Windows.Forms.MouseButtons.Left && e.Clicks == 2)
     {
        this.WindowState = FormWindowState.Normal;
        this.ShowInTaskbar = true;
        notifyIcon1.Visible = false;
        this.Activate();
     }
  } 
```

# powershell - 如何在powershell中列出zip中的文件？

> ID：14204230
> 
> 赞同：21
> 
> 时间：2013-01-07T21:21:40.120
> 
> 标签：powershell

我是 powershell 的新手，希望列出目录中 zip 文件中包含的所有文件。我不想使用任何第三方工具。

```
Structure of the directory is
mydir > dir
a.zip
b.zip
c.zip

with each file containing files named 1.txt or 2.txt or 3.txt

I am trying to get an output in the form

a.zip:1.txt
a.zip:2.txt
b.zip:files\3.txt
b.zip:4.txt
c.zip:1.txt
d.zip:10.txt 
```

等等。

不幸的是，我的环境不是 4.5 而是 4.0。我能够写出这段代码，但它仍然需要大量的解析来清理，因为解压缩会提供很多额外的信息。

```
$packagedir="C:\Packages"
$unzipcmd = "c:\bins\unzip.exe -l"
$unmatchstr = "*Archive*"
pushd .
cd $packagedir

$filelist= Get-ChildItem -Recurse | Select-Object -ExpandProperty FullName

 foreach ($item in $filelist) 
 {$ziplist = Invoke-Expression "$unzipcmd $item"; 
 foreach ($item2 in $ziplist) 
  {
   if ($item2.Contains("Archive") )
   {

   }
   else
   {
     echo $item "::" $item2}} 
   }
popd 
```

有没有更简单的方法来解析这个。unzip -l 输出中有很多额外的信息，如列标题、分隔符和日期以及每个文件名之前的其他日期。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-07T21:45:12.537

在 .NET Framework 4.5 中有一个非常方便的 ZipFile 类。
要列出存档文件中的条目，您可以在 Powershell 中像这样使用它：

```
[Reflection.Assembly]::LoadWithPartialName('System.IO.Compression.FileSystem')
[IO.Compression.ZipFile]::OpenRead($sourceFile).Entries 
```

* * *

**更新：**这似乎可以解决问题：]

```
[Reflection.Assembly]::LoadWithPartialName('System.IO.Compression.FileSystem')

foreach($sourceFile in (Get-ChildItem -filter '*.zip'))
{
    [IO.Compression.ZipFile]::OpenRead($sourceFile.FullName).Entries.FullName |
        %{ "$sourcefile`:$_" }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-08T16:10:27.520

如果你有[PowerShell Community Extensions](http://pscx.codeplex.com)，你可以使用它的`Read-Archive`cmdlet。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-09-17T08:50:02.177

我也有这个问题！我根据这个 AWESOME 脚本制作了这个 PS 脚本：[https ://gallery.technet.microsoft.com/scriptcenter/PowerShell-Get-Specific-9b35352f](https://gallery.technet.microsoft.com/scriptcenter/PowerShell-Get-Specific-9b35352f)

它所做的只是列出所有“txt”文件以及找到的 zip 文件！

原始脚本将文件复制到指定的目录中——这也非常有用。

一些注意事项：

您必须定义静态变量确保没有目录变量包含最后的反斜杠，即“目录”而不是“目录/”

这里是：

```
#----------------------------------------------------
# STATIC VARIABLES 
#----------------------------------------------------

$search  = "txt"
$zips   = "C:\zipfiles" 

#----------------------------------------------------
Function GetZipFileItems 
{ 
    Param([string]$zip) 

    $split = $split.Split(".")

    $shell   = New-Object -Com Shell.Application 
    $zipItem = $shell.NameSpace($zip) 
    $items   = $zipItem.Items() 

    GetZipFileItemsRecursive $items
}

Function GetZipFileItemsRecursive 
{     
    Param([object]$items) 
    ForEach($item In $items) 
    {
        $strItem = [string]$item.Name 
        If ($strItem -Like "*$search*")
        { 
            Write-Host "The txt files in the zips are : $strItem"   
        }
    }
}

Function GetZipFiles 
{ 
    $zipFiles = Get-ChildItem -Path $zips -Recurse -Filter "*.zip" | % { $_.DirectoryName + "\$_" } 

    ForEach ($zipFile In $zipFiles) 
    { 
        $split = $zipFile.Split("\")[-1] 
        Write-Host "Found zip-file : $split" 
        GetZipFileItems $zipFile 
    } 
}
GetZipFiles 
```

# java - 通过 Java Web Start (JNLP) 启动的小程序启动两次

> ID：14204231
> 
> 赞同：6
> 
> 时间：2013-01-07T21:21:41.950
> 
> 标签：java, applet, jnlp, java-web-start

我正在通过 JNLP 和 Java Web Start 启动一个小程序。我的问题是，当页面被加载时，两个 JVM 将启动两个 Java 控制台弹出窗口和两个“你想运行这个应用程序吗？”。弹出窗口。除此之外，小程序最终加载，甚至我的本机库也正确加载。我不确定是什么导致了双重启动。

编辑：另外，第一个加载的 JVM 会在大约 30-45 秒后自动关闭。

**html**

```
<script>
var attributes = { code:"com.osgi.swpc.applet.TrackerApplet.class", width:770, height:825};
var parameters = {jnlp_href: "tracker-applet.jnlp"};
deployJava.runApplet(attributes, parameters, "1.6");
</script> 
```

**jnlp**

```
<?xml version="1.0" encoding="UTF-8"?>
<jnlp spec="1.0+" href="">
    <information>
        <title>Tracker</title>
        <vendor>My Vendor</vendor>
    </information>
    <resources os="Windows">
        <!-- Application Resources -->
        <j2se version="1.6+" href="http://java.sun.com/products/autodl/j2se" />
        <jar href="tracker_applet.jar" main="true" />
        <nativelib href="applets/jacob.jar"/>
        <nativelib href="applets/com4j.jar"/>
    </resources>
    <applet-desc 
         name="Tracker Applet"
         main-class="com.osgi.swpc.applet.TrackerApplet"
         width="770"
         height="825">
     </applet-desc>
     <update check="background"/>
</jnlp> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T17:06:45.973

嗯……有趣的问题

我不太确定，因为有更多细节会很好......但我第一眼看到你指出主类重复：

...在 JS 中

```
var attributes = { code:"com.osgi.swpc.applet.TrackerApplet.class", width:770, height:825}; 
```

然后在 JNLP

```
main-class="com.osgi.swpc.applet.TrackerApplet" 
```

所以请尽量只拥有一个[主要的类属性](http://docs.oracle.com/javase/6/docs/technotes/guides/javaws/developersguide/syntax.html#applet_desc)。最好将其留在 JNLP 中并再次尝试启动；

* * *

如果您有其他问题的详细信息，请发表评论

报告是否有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-30T09:49:31.740

> 我不确定是什么导致了双重启动。

这取决于您使用的 Java 实现，但在最新版本的 Oracle JRE（以前是 Sun JRE）中，WebStart 应用程序将：

*   缓存 JNLP 文件
*   阅读 JNLP 文件以查找需要下载的资源列表（这些通常是您的 JAR）
*   使用最近下载的 JAR 构建一个命令来启动一个普通的 Java 应用程序
*   启动 Java 应用程序

（请注意，我并不是要完整描述 Java WebStart 的功能，而只是尝试提供一些对该过程的见解。）

这样，您首先有一个`javaws`可执行文件，它运行的时间几乎与下载 JAR 所需的时间一样长，然后是一个`java`可执行文件，它将执行实际的程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-16T20:51:05.013

如果 MSIE 发生这种情况，只想添加一个禁用“智能屏幕过滤​​器”的建议，尤其是在没有/缓慢互联网访问的情况下。

该选项的位置取决于 MSIE 版本，我认为在 MSIE 7 中它直接在 Extras 菜单中，而在 9 中它在 Internet 选项中的安全设置下。

# extjs - Sencha Touch 2 原生打包程序因多个“复制操作失败”错误而失败

> ID：14204234
> 
> 赞同：0
> 
> 时间：2013-01-07T21:21:55.240
> 
> 标签：extjs, sencha-touch, sencha-touch-2

尝试将我的 Sencha Touch 2 Web 应用程序打包到 iOS 的本机包装器中。我正在按照说明进行操作（这些说明看起来有些不正确或不完整），但是在构建命令执行期间我收到了大量的“复制操作失败”错误。

我的应用程序的名称是“Tally”，我正在使用命令行“sencha package build iOS/configFile.json”。

我的 configFile.json 如下：

```
{   
    "applicationName":"Tally",
    "applicationId":"com.mobyus.tally",
    "bundleSeedId":"3725XYGG8Y",
    "versionString":"1.0",
    "iconName":"icon.png",
    "inputPath":"../",
    "outputPath":"../../iOS/Tally",
    "configuration":"Debug",
    "platform":"iOS",
    "deviceType":"iPhone",
    "orientations": [
        "portrait",
        "portraitUpsideDown"
    ]
} 
```

我得到的错误代码如下所示，但其中有数百个（可能数千个）：

> 复制操作失败 src=on.i dst=./build/iOS/Tally.app/webapp/build/iOS/Tally.app/webapp/build/iOS/Tally.app/webapp/build/iOS/Tally.app/ webapp/build/iOS/Tally.app/webapp/build/iOS/Tally.app/webapp/build/iOS/Tally.app/webapp/build/iOS/Tally.app/webapp/build/iOS/Tally.app/ webapp/build/iOS/Tally.app/webapp/build/iOS/Tally.app/webapp/build/iOS/Tally.app/webapp/build/iOS/Tally.app/webapp/build/iOS/Tally.app/ webapp/build/iOS/Tally.app/webapp/build/iOS/Tally.app/webapp/build/iOS/Tally.app/webapp/build/iOS/Tally.app/webapp/build/iOS/Tally.app/ webapp/build/iOS/Tally.app/webapp/build/iOS/Tally.app/webapp/build/iOS/Tally.app/webapp/build/iOS/Tally.app/webapp/build/iOS/Tally.app/ webapp/build/iOS/Tally.app/webapp/build/iOS/Tally.app/webapp/build/iOS/Tally.app/webapp/build/iOS/Tally.app/webapp/build/iOS/Tally.app/ webapp/build/iOS/Tally。app/webapp/build/iOS/Tally.app/webapp/build/iOS/Tally.app/webapp/build/iOS/Tally.app/webapp/build/iOS/Tally.app/webapp/.hg/store/data /build/production/deltas/resources/css/app.css/3d83eee2cc226dc28a3cebf9df631c09175b839f.json.i

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T16:06:29.190

修好了 不太确定，但我认为问题在于我用于打包应用程序（Sencha CMD）的版本与使用 Sencha 2.0 生成的 Web 应用程序之间的不匹配。我在 Sencha 2.1 下重新创建了该应用程序，这似乎解决了它。

# mysql - MYSQL 5.x 选择中的选择案例

> ID：14204238
> 
> 赞同：-2
> 
> 时间：2013-01-07T21:22:14.150
> 
> 标签：mysql

是否可以在 Select 查询中执行此操作？

```
select case customField4
   case '4'
      customField4 = 'bob'
   case '5'
      customField4 = 'bill'
   case '6'
      customField4 = 'terry'
   case '7'
      customField4 = 'bobby'
   case '8'
      customField4 = 'sue' 
```

但是在选择查询中？我见过 If Else 但这只给了我两个选择。我需要的不止这些。

帮助会很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T21:23:58.657

看起来您的问题可以通过简单地编写来解决

```
SELECT 'has ' + customField4 AS customField4 
```

但更笼统地说，是的：

```
SELECT
    CASE customField4
    WHEN '4' THEN 'has 4'
    WHEN '5' THEN 'has 5'
    WHEN '6' ...
    END 
```

**编辑：**当然，由于问题已被编辑，因此第一个片段不是一个选项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T21:24:32.003

当然，使用`CASE`表达式：

```
SELECT CASE customField4
     WHEN '4' THEN 'has 4'
     WHEN '5' THEN 'has 5'
     WHEN '6' THEN 'has 6'
END AS customField4 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T21:26:46.707

SELECT 语句将是：

```
SELECT CASE customField4
   WHEN '4'
      THEN 'has 4'
   WHEN '5'
      THEN 'has 5'
   WHEN '6'
      THEN 'has 6'
   WHEN '7'
      THEN 'has 7'
   WHEN '8'
      THEN 'has 8'
   END 
```

关键字`SELECT`不是.`CASE`

# qt - qml中Flipable和MouseArea的组合出错

> ID：14204242
> 
> 赞同：1
> 
> 时间：2013-01-07T21:22:27.140
> 
> 标签：qt, qml

这可能是一个错误，但请继续阅读：

在以下代码中，当可翻转翻转（但反转）时，可翻转正面的鼠标区域保持活动状态，甚至从背面接管一些鼠标区域：

```
import QtQuick 2.0

Rectangle {
    height: 500
    width: 500

    Flipable {
        id: flipable

        anchors.fill:parent

        property bool flipped: false

        front: Rectangle{
            color: "black"
            anchors.fill: parent

            Rectangle {
                color:"darkgrey"
                height: parent.height / 2
                width: parent.width / 2

                MouseArea {
                    anchors.fill: parent
                    onClicked: flipable.flip()
                }
            }
        }
        back: Rectangle {
            id: yellow
            color: "yellow"
            anchors.fill: parent

            MouseArea {
                anchors.fill: parent
                onClicked: yellow.color = "green"
            }
        }

        transform: Rotation {
            id: rotation
            origin.x: flipable.width/2
            origin.y: flipable.height/2
            axis.x: 0; axis.y: 1; axis.z: 0     // set axis.y to 1 to rotate around y-axis
            angle: 0    // the default angle
        }

        states: State {
            name: "back"
            PropertyChanges { target: rotation; angle: 180 }
            when: flipable.flipped
        }

        transitions: Transition {
            NumberAnimation { target: rotation; property: "angle"; duration: 400 }
        }

        function flip () {
            flipped = !flipped
        }
    }
} 
```

当您按下灰色区域时页面会翻转，如果再次按下（现在它位于右侧的后面），它会再次翻转。正确的行为是黄色方块变为绿色，即使单击右上角也是如此。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-13T10:46:31.400

启用前后元素交替为我解决了这个问题：

```
front: Rectangle {
    enabled: !parent.flipped
    ...
}

back: Rectangle {
    enabled: parent.flipped
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T19:00:48.760

> 正确的行为是黄色方块变为绿色，即使单击右上角也是如此。

我评论了这一行：

```
preventStealing: true // doesnt work with my QtQuick 1.0 
```

它的行为方式正确。

你为什么把它放在第一位？

# django - 关于 Django 后端和 iOS 前端的 Amazon Web Services 设置的建议

> ID：14204243
> 
> 赞同：1
> 
> 时间：2013-01-07T21:22:29.307
> 
> 标签：django, amazon-web-services, amazon-ec2, load-balancing, amazon-cloudfront

在过去的几周里，我针对带有 PostgreSQL 数据库和 iOS 前端的 Django 后端的适当 Amazon Web Services 设置进行了大量研究。我是新手，我觉得我可能在这里问了一个愚蠢的问题，但是你们中的任何人对我该如何解决这个问题有什么建议吗？目前我的设置涉及两个实例。

一个 EC2 实例用于运行 Ubuntu 11.04 的 django 后端（大型实例），另一个实例用于运行 Ubuntu 11.04 的 postgresql 实例（大型实例）。

几个月来，我一直在使用这个设置进行开发和 60 个用户的 beta 测试，它一直坚如磐石。就在最近我已经完成了后端，我已经完成了前端，我正在将我的应用程序提交到应用程序商店。

在审批过程中，我希望做好生产准备并加强我的 AWS 设置。我的应用程序以社交照片共享为中心。用户可以在愿望清单上拍摄他们想要的东西并与他们的追随者分享。图片全部存储在S3中。

任何建议将不胜感激。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T05:12:30.310

我是一名开发人员，最近开始在 AWS 上部署我的 django 站点 - 我不擅长服务器，但我有一个设置过程，用于获取微实例以进行开发和快速运行。这些是我设置服务器的一些步骤：http: [//yaconiello.com/blog/setting-aws-ec2-instance-nginx-django-uwsgi-and-mysql/](http://yaconiello.com/blog/setting-aws-ec2-instance-nginx-django-uwsgi-and-mysql/)。我仅在您尚未在 AWS 大型实例上执行某些操作时才链接。

你和我的应用程序之间的一个很大区别是你使用 postgres 作为数据库。我编写了一个使用 PG 的应用程序，我做过的最大的性能提升是安装/配置[pgbouncer](http://wiki.postgresql.org/wiki/PgBouncer)。PGbouncer 像老板一样进行连接池。

此外，尽管我很喜欢 aws，但我停止使用 S3，转而使用 rackspace 的 cloudfiles + django-cumulus 包。我不喜欢 S3 的一些 boto/storages 支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T06:08:27.397

答案很大程度上取决于您对停机时间的容忍度与您对 AWS 的每月预算。几点：

*   永远不要在单个实例上运行任何重要的东西。对于您的应用程序层，您应该使用至少两个实例，每个实例位于单独的 AZ，负载由弹性负载均衡器分配。

*   对于 Postgres，设置两个实例（也在不同的 AZ 中）并配置复制。我还强烈建议您使用预置的 IOPS EBS 卷和预置的 IOPS 优化实例。

*   一定要看看 Elastic Beanstalk。这将极大地简化自动缩放应用程序层的设置，并使向其部署代码变得轻而易举。这也将使设置单独的暂存环境和生产环境变得容易，这样您就可以在将代码发布给用户之前对代码进行问答。

*   考虑设置 VPC 以提高安全性并更好地控制您的网络资源。有一点初步的学习曲线，但这是值得的，尤其是当您计划设置数据库复制时。

*   通过 CloudWatch 警报设置 SNS 警报，以便在出现问题时收到通知。

*   在扩大规模之前扩大规模。意思是，在升级到更大的实例之前使用更多的小实例。这可以最大限度地减少自动扩展组中单个实例故障的影响。它还允许更精细的自动缩放。在您对应用程序进行基准测试并发现您需要它们之前，不要使用大型实例。

*   一旦您知道您实际需要的实例大小，请购买预留实例以在 12 个月内节省至少 40%。

[我在我的博客](http://www.jamiebegin.com/category/amazon-web-services/)上详细介绍了其中一些项目（并提供了一些其他提示）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T22:02:49.370

我将 Google App Engine 用于我的一些项目并且讨厌它。我听说 AWS 比 App Engine 好，但仍然很贵。因此，与使用 Webfaction 之类的某种共享托管或专用服务器托管相比，您将花费更多的钱来让您的项目通过云启动。对于年轻的 Web 应用程序，我会推荐 Webfaction，而不是将流量合理地转移到云端（尽管我仍然不会）。

Google App Engine 云具有令人困惑的价格模型，Google 甚至都无法理解，而且他们几乎没有使用 Webfaction 之类的人或任何其他托管计划的自由。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-21T10:33:15.233

如果您完全不知道设置实例和东西，使用类似 fabric 的东西可能会有所帮助。

https://github.com/fabric/fabric/tree/1.6

# java - 对位于文件系统上的 XML 文件进行快速全文搜索。选择什么策略？

> ID：14204244
> 
> 赞同：1
> 
> 时间：2013-01-07T21:22:30.120
> 
> 标签：java, xml, search, indexing

我需要对位于文件系统上的 XML 文件实现最快的全文搜索。基本上我需要确定某些 XML 节点值是否包含特定的关键字。我考虑了几个选项：

*   遍历目录中的文件 -> 逐行读取文件 -> 使用 Matcher / Pattern 来确定关键字是否在这里
*   遍历目录中的文件 -> 使用 SAX 解析器
*   新文件到达目录后立即在所需的 XML 节点上创建索引（例如，使用 Solr），然后查询索引引擎

什么策略更好选择，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T21:32:46.097

如果 xml 文件很小（几 KB/几 MB），那么我建议您应该逐行读取它们（或使用其他一些 xml 解析技术来读取它们）。当您有一个非常大的 xml 文件时，Solr 将证明是有用的。Solr 也可以轻松读取小文件（但是，这完全取决于您有多少时间）

不确定 SAX 解析器。

# java - 格式化浮点数为两位十进制格式

> ID：14204247
> 
> 赞同：-1
> 
> 时间：2013-01-07T21:22:37.193
> 
> 标签：java

我正在尝试用两个十进制值（如果可能）以纯文本打印出浮点值。例如，如果我在数据库中有 229806210.039999，那么我想将其打印为 229806210.04，但由于某种原因，它以科学计数法打印出来：2.29806208E8，这是不正确的，因为最后两位数字是 08 而不是 10 .我尝试在打印之前将数字转换为双精度和货币格式，但数字仍然关闭（最后两位数字为 08 而不是 10）。有没有办法解决这个问题？这是我现在拥有的：

```
float amount = 0;
amount = something.getAmount() //this will run the query
                              //to retrieve the amount stored in database (i.e. 229806210.039999)
Stringbuilder buffer = new StringBuilder();
buffer.append ("the amount = " + amount)
emailObject.setBody(buffer.toString());
emailService.sendEmail(emailObject); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T21:25:55.323

## 你应该使用什么？

您应该使用 DecimalFormat。它接受具有所需格式的参数并返回格式化程序

文档可[在此处](http://docs.oracle.com/javase/tutorial/i18n/format/decimalFormat.html)获得。

## 只要给我看代码！

```
Double number = 1144.034;
DecimalFormat format = new DecimalFormat("0.00");
System.out.println(format.format(price)); 
```

输出是

```
1144.03 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T21:25:07.587

这看起来像 Java，所以请参阅 DecimalFormat。它很好地记录了如何格式化数字。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-07T21:31:46.750

DecimalFormat 提供（有时不需要）区域设置小数点（“。”与“，”）最近我改为使用

```
double x= ...;
String formatted = String.format(Locale.US, "%.2f", x); 
```

哪个更方便，（C风格格式化符号）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T21:28:51.540

A float has a limited accuracy of approximately 7 to 8 decimal digits. Once you store a value in a float you cannot expect more significant digits no matter how you post process it.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-07T21:37:06.683

浮点数用于具有固定有效数字位数的*近似计算。*也就是说，a`float`将只存储数字的指数，以及数字的前 24 位二进制数字（大约 7 个十进制数字）。由于您的号码超过 7 位，因此四舍五入会去掉剩余的数字。

至少，您需要使用 a`double`来保存数字。使用 16 位有效十进制数字，它至少可以表示该数量级的 0.01 的差异。然而，计算仍然只是近似的。

如果您需要精确的表示和计算，请使用 a`BigDecimal`代替。

最后，要格式化数字，请使用 NumberFormat。[Java 教程](http://docs.oracle.com/javase/tutorial/i18n/format/index.html)很好地解释了这一点。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-07T21:39:18.863

> 我尝试在打印之前将数字转换为双精度和货币格式，但数字仍然关闭（最后两位数字为 08 而不是 10）。有没有办法解决这个问题？

在事实为时已晚后将其转换为双重，信息已丢失。

您必须使用双精度，即每个值可能通过的地方都使用 64 位浮点（或者对于数据库，您可以使用固定精度）

* * *

`float`不是金额（或大多数东西）的最佳格式我建议使用 double 代替（或 BigDecimal 或具有固定精度的 long ）

代替

```
Stringbuilder buffer = new StringBuilder();
buffer.append ("the amount = " + amount)
emailObject.setBody(buffer.toString()); 
```

你可以写

```
emailObject.setBody(String.format("the amount = %.2f%n" , amount)); 
```

至少有一个换行符可能是“礼貌的”。;)

# html - 如何使用 HTML 元素调整浏览器窗口的大小？

> ID：14204248
> 
> 赞同：0
> 
> 时间：2013-01-07T21:22:37.327
> 
> 标签：html, css, browser, webkit, responsive-design

[我在网站](http://www.designbits.de)的右下角放了一个手柄，用户可以抓住它并拖动到左边，以观察设计如何适应不同的浏览器窗口大小（“响应式设计”）。

所以我将它添加到我的 HTML 中：

```
<a id="drag-me" title="Drag me to the left"></a> 
```

该`title`属性会弹出一个小工具提示，这很好。

然而，一些用户不明白这一点，并试图抓住红色`anchor`元素本身而不是浏览器窗口的右下角。

有什么办法可以改善这一点吗？

感谢您的任何想法...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T21:25:22.973

```
window.resizeTo(width,height) 
```

用于`self.resizeTo()`调整自己的窗口大小

[http://www.w3schools.com/jsref/met_win_resizeto.asp](http://www.w3schools.com/jsref/met_win_resizeto.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T21:26:40.603

您必须使用 javascript 中的 window.resizeTo() 方法来调整窗口大小。不幸的是，一些浏览器阻止了它，包括 chrome：

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T05:14:54.530

使用位置固定；底部：0；right:0 在 css 中，所以每次都能在当前浏览器屏幕上看到你的处理程序元素

# php - 计算两个数字就像抄表一样

> ID：14204250
> 
> 赞同：0
> 
> 时间：2013-01-07T21:22:52.233
> 
> 标签：php

需要帮忙。我正在制作电费系统，我在解决 2 个最大为 99999 的数字时遇到了问题，之后它将返回 00000。我将举个例子：

```
1st  reading ==== 00050
2nd  reading ==== 00100
3rd  reading ==== 01000
4th  reading ==== 10000
nth  reading ==== 99950
last reading ==== 00050 
```

如何解决第 n 次和最后一次阅读？答案必须是 100 ......我正在使用 php 代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T21:29:47.727

如果不查看代码，很难确切知道您需要什么，但一般方法如下：

```
// Assume you have $previous and $current
$difference = $current - $previous;
if ($difference < 0) {
    $difference = $current + (99999 - $previous);
} 
```

# android - 从 XML 加载时，如何从 Android 视图中删除默认属性？

> ID：14204258
> 
> 赞同：1
> 
> 时间：2013-01-07T21:23:19.893
> 
> 标签：android, user-interface, user-experience, seekbar

我正在开发一个使用一些基本视图类型的应用程序，但我发现 Android 中的默认属性非常难看（例如，亮黄色`SeekBar`）。如果我从代码创建它，只使用参数，我可以获得基本的搜索栏`context`，但我想知道是否有办法在 XML 布局文件中执行此操作。我可以设置一个属性来删除所有默认属性 - 例如`android:style="@null"`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T22:19:24.167

如果您不喜欢默认样式，您始终可以为小部件创建自己的样式，提供您自己的颜色和可绘制对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T22:13:27.447

有两个*正确*答案。首先是设置主题，比如[How to change android indeterminate ProgressBar color是怎么做的？](https://stackoverflow.com/questions/2638161/how-to-change-android-indeterminate-progressbar-color). 第二个选项是设置进度和拇指属性，如[搜索栏中所述，将路径颜色从黄色更改为白色](https://stackoverflow.com/questions/3480456/seek-bar-change-path-color-from-yellow-to-white)

# sql - 查询股票数据时间范围的变化

> ID：14204260
> 
> 赞同：3
> 
> 时间：2013-01-07T21:23:24.463
> 
> 标签：sql, ms-access

我正在寻找一个简单的查询，可以将较短时间范围内的股票数据更改为较高时间范围。考虑下表

```
 Open    High    Low    Close   Volume
    Date                                                       
    1999-01-04 10:22:00  1.1801  1.1819  1.1801  1.1817       4
    1999-01-04 10:23:00  1.1817  1.1818  1.1804  1.1814      18
    1999-01-04 10:24:00  1.1817  1.1817  1.1802  1.1806      12
    1999-01-04 10:25:00  1.1807  1.1815  1.1795  1.1808      26
    1999-01-04 10:26:00  1.1803  1.1806  1.1790  1.1806       4
    1999-01-04 10:27:00  1.1801  1.1801  1.1779  1.1786      23
    1999-01-04 10:28:00  1.1795  1.1801  1.1776  1.1788      28
    1999-01-04 10:29:00  1.1793  1.1795  1.1782  1.1789      10
    1999-01-04 10:31:00  1.1780  1.1792  1.1776  1.1792      12
    1999-01-04 10:32:00  1.1788  1.1792  1.1788  1.1791       4 
```

它每 1 分钟更新一次。如何通过查询将其更改为 2 分钟数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T07:15:13.363

答案在`SQL Server`. 因此，您可能需要更改一些语法以适应。在[分区方面检查这一点。](http://blogs.office.com/b/microsoft-access/archive/2009/07/29/creating-partition-queries.aspx).

还假设您的资产流动性极强，并且永远不会错过一分钟的滴答声... ;) 这个查询可以进一步改进。请试一试。

*   ## [SQLFIDDLE 演示](http://sqlfiddle.com/#!3/31ae4/33)

查询：[编辑以排除任何作为空值的 ohlcv 值..]

```
select z.dt, a.opens as o, z.h, 
z.l, b.closes as c, z.v
from (
select Dateadd(minute, 1, x.dates) as dt,
max(y.high) as h, min(y.low) as l,
sum(y.volume) as v
from ohlcv x
left join ohlcv y
on y.dates
between x.dates and 
Dateadd(minute, 1, x.dates)
where (DATEPART(MINUTE, x.Dates) % 2) = 0
group by Dateadd(minute, 1, x.dates)) z
left join 
ohlcv a
on a.dates = Dateadd(minute, -1, z.dt)
left join ohlcv b
on b.dates = z.dt
where not (a.opens is null or z.h is null 
or z.l is null or b.closes is null
or z.v is null)
; 
```

结果：

```
| DT                             |O       |H       |L       |C       | V  |
---------------------------------------------------------------------------
| January, 04 1999 10:23:00+0000 | 1.1801 | 1.1819 | 1.1801 | 1.1814 | 22 |
| January, 04 1999 10:25:00+0000 | 1.1817 | 1.1817 | 1.1795 | 1.1808 | 38 |
| January, 04 1999 10:27:00+0000 | 1.1803 | 1.1806 | 1.1779 | 1.1786 | 27 |
| January, 04 1999 10:29:00+0000 | 1.1795 | 1.1801 | 1.1776 | 1.1789 | 38 |
| January, 04 1999 10:31:00+0000 | 1.1781 | 1.1793 | 1.1776 | 1.1792 | 17 | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T21:30:44.223

您想对事物进行分组：

```
select floor(time/2) as time,
       sum(volume) as volume,
       max(case when time = 2*floor(time/2) then open end) as open,
       max(high) as high,
       max(low) as low),
       max(case when time = 2*floor(time/2)+1 then close end) as close
from t
group by floor(time/2) 
```

使用 可以使打开和关闭的公式更简单、更通用`row_number()`，但您需要指定数据库。

# mongoose - Mongoosejs：将两个'query.where'子句与'or'结合起来

> ID：14204261
> 
> 赞同：1
> 
> 时间：2013-01-07T21:23:31.513
> 
> 标签：mongoose

我有一个 mongoosejs `Query`，我正在尝试执行它。

我有：

```
query.where('loc').nearSphere(loc).maxDistance(range/6378.137);
query.where('name', name ); 
```

我想在不使用`this.find( $or: {} )`.

该代码应该找到位置在一个范围内的文档，或者名称与提供的名称匹配。

是否可以使用创建查询`query.or()`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T21:35:57.027

我想出了答案：

```
query.or([
    {
        nearSphere: 'loc',
        near: loc,
        maxDistance: (range/6378.137) },
    {
        "name": name
    }
]); 
```

我无法理解的部分是如何在`$or`子句中嵌入查询。

我想删除这个问题，但我把它留在这里，以防它对某人有帮助

# asp.net-mvc - 以下部分已定义但尚未为布局页面“~/Views/Shared/_blanklayout.cshtml”呈现：“JavaScript”。

> ID：14204263
> 
> 赞同：-1
> 
> 时间：2013-01-07T21:24:12.387
> 
> 标签：asp.net-mvc

我收到一个错误：当我尝试运行我的索引页面时，它会抛出一个错误，我应该在我的索引视图页面中添加什么？以下部分已定义但尚未为布局页面“~/Views/Shared/_blanklayout.cshtml”呈现：“JavaScript”。

**这是我的 _blacklayout 页面**

```
@{
    Layout = null;
}
 <link type="text/css" rel="stylesheet" href="@Url.Content("~/content/reset.css")">
    <link type="text/css" rel="stylesheet" href="@Url.Content("~/content/layout.css")">
    <link type="text/css" rel="stylesheet" href="@Url.Content("~/content/core.css")">
@RenderBody()
<script type="text/javascript">
    adroll_adv_id = "6MFN5K54DVCUROYTS4BE5J";
    adroll_pix_id = "GR7KUS3M3FA7BE2HPTH5EX";
    (function () {
        var oldonload = window.onload;
        window.onload = function () {
            __adroll_loaded = true;
            var scr = document.createElement("script");
            var host = (("https:" == document.location.protocol) ? "https://s.adroll.com" : "http://a.adroll.com");
            scr.setAttribute('async', 'true');
            scr.type = "text/javascript";
            scr.src = host + "/j/roundtrip.js";
            ((document.getElementsByTagName('head') || [null])[0] ||
    document.getElementsByTagName('script')[0].parentNode).appendChild(scr);
            if (oldonload) { oldonload() }
        };
    } ());
    </script>
    <script type="text/javascript">

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-19362393-2']);
        _gaq.push(['_setDomainName', 'netdocuments.com']);
        _gaq.push(['_trackPageview']);

        (function () {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();

</script>

**and this is my Index view page where I am using it:**

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_blanklayout.cshtml";
}

@section JavaScript{

 <script type="text/javascript">
     $(function () {
         $("a.fancybox").fancybox({
             'overlayShow': true,
             'autoSize': false,
             'autoResize': false,
             'autoDimensions': false,
             'enableEscapeButton': true,
             'showCloseButton': true,
             'width': 620,
             'height': 390,
             'type': 'iframe',
             'scrolling': 'no'
         });
     });
    </script>

     <link rel="stylesheet" href="@Url.Content("~/Content/fancybox/jquery.fancybox.css?v=2.1.2")" type="text/css" />
     <script type="text/javascript" src="@Url.Content("~/Content/fancybox/jquery.fancybox.pack.js?v=2.1.2")"></script>
    <link rel="stylesheet" href="@Url.Content("~/Content/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5")" type="text/css" />
    <script type="text/javascript" src="@Url.Content("~/Content/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5")"></script>
}

But it is showing an error

The following sections have been defined but have not been rendered for the layout page "~/Views/Shared/_blanklayout.cshtml": "JavaScript". 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T21:27:43.473

On the layout page, you need to specify where to render the "JavaScript" section

Somewhere in _blanklayout.cshtml add:

```
@RenderSection("JavaScript") 
```

# java - 需要帮助了解此复选框代码在 Android 中的工作原理

> ID：14204265
> 
> 赞同：0
> 
> 时间：2013-01-07T21:24:28.580
> 
> 标签：java, android, android-intent, android-widget

```
public class CheckBoxDemo extends Activity implements
    CompoundButton.OnCheckedChangeListener {
  CheckBox cb;

  @Override
  public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    setContentView(R.layout.main);

    cb=(CheckBox)findViewById(R.id.check);
    cb.setOnCheckedChangeListener(this);
  }

  public void onCheckedChanged(CompoundButton buttonView,
                               boolean isChecked) {
    if (isChecked) {
      cb.setText(R.string.checked);
    }
    else {
      cb.setText(R.string.unchecked);
    }
  }
} 
```

我难以理解的是，这条线在传入这个参数的情况下是如何工作的

```
cb.setOnCheckedChangeListener(this); 
```

此外，该方法`onCheckedChanged`并未在任何地方显式调用，Android 如何建立连接以将复选框状态连接到方法名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T21:25:53.490

您正在实现接口并且`onCheckedChanged()` *在*您的代码中。您的 Activity 现在也是 Listener。

实现接口时，还必须重写接口指定的方法。这意味着实现该接口的类现在可以充当该接口的实例。

```
public class CheckBoxDemo extends Activity implements
CompoundButton.OnCheckedChangeListener { 
```

你的`CheckBoxDemo`类实现`OnCheckedChangeListener`了，所以它现在可以作为一个`OnCheckedChangeListener`如果它需要的话。

然后稍后在您的代码中

```
public void onCheckedChanged 
```

这是接口中`CheckBoxDemo`需要实现的方法才能使一切正常工作。

因此，您现在可以使用`this`（引用您当前的`CheckBoxDemo`实例）传递给，`setOnCheckedChangeListener ()`因为所有先前的条件都已满足 - 您的类现在可以成功侦听检查事件。

有关更多信息，请阅读java 教程中的[接口](http://docs.oracle.com/javase/tutorial/java/IandI/createinterface.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T21:27:37.177

当你声明你的类时，它实现了一个从类调用的[接口](http://docs.oracle.com/javase/tutorial/java/concepts/interface.html)`OnCheckedChangeListener``CompoundButton`

```
implements
    CompoundButton.OnCheckedChangeListener 
```

当您使用[this](http://docs.oracle.com/javase/tutorial/java/javaOO/thiskey.html)时，它指的是您正在使用的 this 对象，它是`OnCheckedChangeListener`.
当您实现 a`Interface`和`Interface`has 方法时，您的`Activity`（或任何这样做的类）必须实现该方法。在您的情况下，它是`onCheckedChanged()`，因此您的 JVM 将知道建立这种关系。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T21:30:23.187

您可以查找 的源代码`CheckBox`，但它的工作原理非常粗略（这不是代码的摘录，而是对其外观的演示）：

```
public class CheckBox implements ... {
  private OnCheckedChangeListener occl;
  public void setOnCheckedChangeListener(OnCheckedChangeListener newlistener) {
    occl = newlistener;
  }
  /* this will be called when you click the CheckBox */
  public void check(...) {
      /* draw the check mark and similar things, then: */
      occl.onCheckedChanged(...);
  }
} 
```

所以你`onCheckedChanged()`实际上是被你的内部实现调用的`Component`，在这种情况下你的`CheckBox`.

# hadoop - 如何向从 Pig (Hadoop) 创建的文件添加标题行？

> ID：14204275
> 
> 赞同：7
> 
> 时间：2013-01-07T21:24:58.963
> 
> 标签：hadoop, apache-pig

我正在编写类似于以下内容的猪拉丁文脚本：

```
A = load 'data' using PigStorage('\t');
store A into my_data using PigStorage(); 
```

这输出

```
(Bob, 10, 4.0)
(Jim, 11, 3.25)
(Paul, 9, 2.75) 
```

我想为存储在 HDFS 中的每个文件添加第一个标题行

```
(Name, Age, GPA)
(Bob, 10, 4.0)
(Jim, 11, 3.25)
(Paul, 9, 2.75) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2015-07-01T07:55:40.233

您可以使用[CSVExcelStorage](https://pig.apache.org/docs/r0.12.0/api/org/apache/pig/piggybank/storage/CSVExcelStorage.html)作为存储功能，让您可以精确地执行您想要的操作：

> STORE output INTO '/outputfolder/' USING org.apache.pig.piggybank.storage.CSVExcelStorage('\t', 'NO_MULTILINE', 'UNIX', 'WRITE_OUTPUT_HEADER');

使用“WRITE_OUTPUT_HEADER”选项会将标题写入满足您的用例的每个文件。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-07T22:56:36.073

这对猪来说真的没有意义。每一行都是一个单独的数据记录，所以除非真的有一个人名叫`Name`，年龄为`Age`，GPA 为`GPA`，否则有这样一行是错误的。此外，Pig 不保证输出字段的顺序（除非使用`ORDER BY`），因此您的标题行可能会出现在任何地方。

您要求的是一种在 Pig 完成工作后保留模式的方法，这样您就不必记住它是什么或在某个地方查找它。从 Pig 0.10 开始，这可以`PigStorage`通过将关系的模式存储为 JSON 文件 .pig_schema 与输出在同一目录中来实现。有关它是什么以及如何使用它的更多详细信息，请参阅[此页面。](http://hadoopified.wordpress.com/2012/04/22/pigstorage-options-schema-and-source-tagging/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-21T02:14:46.217

答案是否定的，你不能做你真正想做的事。

正如@Winni 所建议的那样，通过保留架构文件可以解决问题，但这是很多黑客行为。

戴上消费者的帽子（我也是开发人员），我不得不说 Pig 缺少这个功能。当 Pig 在 PigStorage 中以 CSV 文件的形式输出内容时，我们不在乎它对猪有多大意义，以提供具有标题行的能力，让那些健忘的小用户理解数据。

什么时候，我有一排，大约有十个不同的日期时间，这让我几乎不可能理解数据，直到我手动添加标题行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-09T18:31:52.197

我认为你最好的选择是描述你要在 Grunt shell 的测试集上输出的关系，然后将其复制并粘贴到一个例如 bash 命令中，在你得到它之后将记录附加到文件的顶部从 HDFS 并将其转换为平面文件。所以像：

```
sed -i '1s/^/(Name, Age, GPA) /' filename.tsv 
```

（请注意，这将在原地写入，因此如果您是 shell 命令 n00b，可能会直接输出到新文件。）

# java - 为什么没有主函数重载的冲突？

> ID：14204278
> 
> 赞同：4
> 
> 时间：2013-01-07T21:25:03.353
> 
> 标签：java, main, variadic-functions

> **可能重复：**
> [我们可以重载 Java 中的 main 方法吗？](https://stackoverflow.com/questions/3759315/can-we-overload-the-main-method-in-java)

当我尝试编译并运行以下代码时，它正在工作，我在控制台上看到“A”。

为什么？

在我看来*(String... args)*是一样的*(String arg, String[] args)*。

```
public class AFewMainExample {
    public static void main(String... args) {
        System.out.print("A");
    }

    public static void main(String args) {
        System.out.print("B");
    }

    public static void main(String[] args, String arg) {
        System.out.print("C");
    }

    public static void main(String arg, String[] args) {
        System.out.print("D");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T21:33:59.233

这实际上在 JLS，[§12.1.4](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.1.4)中指定：

> 该方法`main`必须声明为`public`、`static`和`void`。它必须指定一个声明类型为数组的形式参数（ [§8.4.1](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4.1)`String` ） 。因此，可以接受以下任一声明：
> 
> *   **`public static void main(String[] args)`**
>     
>     
> *   **`public static void main(String... args)`**

除了调用函数的方式之外，可变参数类型和标准数组类型之间没有区别，正如[这里](https://stackoverflow.com/questions/301563/difference-fnstring-args-vs-fnstring-args)所指出的那样。因此，可变参数版本满足上面详述的所有标准并作为有效`main`方法通过。显然，所有其他`main`重载都不等效（否则会出现编译错误）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T21:28:32.830

第一个签名是唯一与 void main (String[] args) 匹配的签名

[差异 fn(String... args) 与 fn(String[] args)](https://stackoverflow.com/questions/301563/difference-fnstring-args-vs-fnstring-args)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T21:27:20.747

每个主要方法的参数（顺序（或）类型（或）两者）都不同，这仅留下一个具有真正主要语法的主要方法，因此没有问题。

如果添加以下 main 方法，您将看到编译时错误，因为现在有两个方法具有精确的语法。

```
public static void main(String[] args) {
    System.out.print("A");
} 
```

阅读本教程以获取有关[重载](http://docs.oracle.com/javase/tutorial/java/javaOO/methods.html)的更多信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T22:25:56.023

主要问题是：

```
+ signature of main(String... args) is different for
    - main(String[] args, String arg)
    - main(String arg, String[] args)

+ main(String... args) 
    - not equals for main(String[] args, String[] args2)
    - only for main(String[] args) 
```

尽管我在以下示例中发现了编译错误：

```
public class MainOverloadingExample4 {

void go(String s){
    System.out.println("void go(String s)");
}
void go(String ... s){
    System.out.println("void go(String ... s)");
}   
void go(String s, String ... arr){
    System.out.println("void go(String s, String ... arr){");
}   
public static void main(String[] args) {
    new MainOverloadingExample4().go("where I am?", "why I am here?");
}
} 
```

> 方法 go(String[]) 对于 MainOverloadingExample 类型不明确

# sql-server - T-SQL 案例函数

> ID：14204290
> 
> 赞同：-1
> 
> 时间：2013-01-07T21:25:45.577
> 
> 标签：sql-server, sql-server-2000

我正在尝试为我们的**SQL Server 2000**编写一个函数，我可以在其他存储过程中使用它来清理我们的机器 ID 号：

```
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- Description: The Purpose here is to just get the System (Chamber, Decay, Label, Tubing, etc.)
-- =============================================
CREATE FUNCTION [dbo].[fn_GetSysType] (@systemID varchar(50)) RETURNS varchar(50) AS
BEGIN
  declare @sysID varchar(50)
  set @sysID=LTrim(RTrim(@systemID))
  if (0<Len(@sysID)) begin
    set @sysID=(
      case when (0<CharIndex('Inspect', @sysID)) then 'Inspect'
*     case when (0<CharIndex('Label', @sysID)) then 'Label'
      case when (0<CharIndex('Tubing', @sysID)) then 'Tubing'
      case when (0<CharIndex('Expand', @sysID)) then 'Expand'
      case when (0<CharIndex('Decay', @sysID)) then 'Decay'
      case when (0<CharIndex('Chamber', @sysID)) then 'Chamber'
      case when (0<CharIndex('Water', @sysID)) then 'Water'
      case when (0<CharIndex('Sniff', @sysID)) then 'Sniff'
      case when (0<CharIndex('Packout', @sysID)) then 'Packout'
      case when (0<CharIndex('Shipping', @sysID)) then 'Shipping'
      else 'Unknown' end)
  end
  return @sysID
END
GO 
```

我尝试保存时的错误消息是：

> *关键字“case”附近的语法不正确。*

在上面的星号处。

我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T21:32:33.347

你只需要使用`CASE`一次。

```
...
set @sysID=(
  case when (0<CharIndex('Inspect', @sysID)) then 'Inspect'
       when (0<CharIndex('Label', @sysID)) then 'Label'
       when (0<CharIndex('Tubing', @sysID)) then 'Tubing'
       when (0<CharIndex('Expand', @sysID)) then 'Expand'
       when (0<CharIndex('Decay', @sysID)) then 'Decay'
       when (0<CharIndex('Chamber', @sysID)) then 'Chamber'
       when (0<CharIndex('Water', @sysID)) then 'Water'
       when (0<CharIndex('Sniff', @sysID)) then 'Sniff'
       when (0<CharIndex('Packout', @sysID)) then 'Packout'
       when (0<CharIndex('Shipping', @sysID)) then 'Shipping'
  else 'Unknown' end)
... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T21:33:40.627

大小写的 SQL Server 语法是：

```
set @sysID=(
      case when (0<CharIndex('Inspect', @sysID)) then 'Inspect'
           when (0<CharIndex('Label', @sysID)) then 'Label'
           when (0<CharIndex('Tubing', @sysID)) then 'Tubing'
           when (0<CharIndex('Expand', @sysID)) then 'Expand'
           when (0<CharIndex('Decay', @sysID)) then 'Decay'
           when (0<CharIndex('Chamber', @sysID)) then 'Chamber'
           when (0<CharIndex('Water', @sysID)) then 'Water'
           when (0<CharIndex('Sniff', @sysID)) then 'Sniff'
           when (0<CharIndex('Packout', @sysID)) then 'Packout'
           when (0<CharIndex('Shipping', @sysID)) then 'Shipping'
      else 'Unknown' end) 
```

请参阅[http://msdn.microsoft.com/en-us/library/ms181765.aspx](http://msdn.microsoft.com/en-us/library/ms181765.aspx)

# android - 在 gerrits 上执行 Diff“并排”时的自定义编辑器选项

> ID：14204291
> 
> 赞同：0
> 
> 时间：2013-01-07T21:25:47.913
> 
> 标签：android, git, gerrit

在 gerrits 上进行差异“并排”以检查引入的更改时，有没有办法在您想要的自定义编辑器上打开差异？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T03:38:50.857

不，无法从 Gerrit Web 界面在本地计算机上启动程序。但是，您可以使用 Gerrit 中提供的链接下载文件的两个版本，然后使用您选择的程序在本地对它们进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-09T18:19:04.403

从 2.11 版开始，Gerrit 在差异视图的修订版（右侧）的“下载”图标旁边提供了一个“编辑”图标。单击该图标会在浏览器中打开一个编辑器。编辑和保存文件将创建一个新的补丁集。

但是，它仍然不适合合并冲突。

# c# - 添加服务引用未正确生成 Reference.cs

> ID：14204293
> 
> 赞同：0
> 
> 时间：2013-01-07T21:25:54.170
> 
> 标签：c#, web-services, wsdl

我有一个在虚拟机 Debian OS 上运行的 Java 服务器，

无论如何，在服务器端创建了一个 WSDL 文件，并且从 Visual Studio 我正在使用 Web 服务。发现该服务，我正在添加此服务引用，但是，当我尝试构建时，我收到此错误：

> *“WindowsFormsApplication2.Properties.Settings”不包含“WindowsFormsApplication2_TravelAgency_TravelBooking”的定义，并且没有扩展方法“WindowsFormsApplication2_TravelAgency_TravelBooking”接受“WindowsFormsApplication2.Properties.Settings”类型的第一个参数（您是否缺少 using 指令或程序集引用?) C:\Users\Me\Documents\Projects\WindowsFormsApplication2\WindowsFormsApplication2\Web References\TravelAgency\Reference.cs 42*

这与以下内容有关`Reference.cs`：

```
this.Url = global::WindowsFormsApplication2.Properties.Settings.Default.WindowsFormsApplication2_TravelAgency_TravelBooking; 
```

`WindowsFormsApplication2_TravelAgency_TravelBooking`红色下划线。

我不知道发生了什么，并将添加所需的所有信息，不确定还要添加什么。

编辑：

我拥有的所有代码如下

`Program.cs`：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Windows.Forms;

namespace WindowsFormsApplication2
{
    static class Program
    {
        /// <summary>
        /// The main entry point for the application.
        /// </summary>
        [STAThread]
        static void Main()
        {
            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);
            Application.Run(new Form1());
        }
    }
} 
```

和：`Form1.cs`_`Form1.cs[Design]`

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using WindowsFormsApplication2.TravelAgency;

namespace WindowsFormsApplication2
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
            TravelBooking tb = new TravelBooking();

        }
    }
} 
```

编辑：

如果我在 Netbeans 中执行此操作并创建一个 Java Gui（只是为了测试）它可以正常工作并且效果很好。所以这就是为什么我认为这与生成的代码有关

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-19T14:43:37.890

问题在于动态 URL，当您没有在 App.config 中设置 URL 时，它会给您该错误，这里是关于如何将其从静态更改为动态并具有附加值的说明，它显示了以下代码在这两种情况下都会生成，当 URL 设置为动态时，自动生成的代码将尝试从 App.config 中获取它，`System.Configuration.ConfigurationSettings.AppSettings`或者在较新的版本中，从应用程序属性中获取它（这更糟），并且您可以从那里获得如果没有异常，则生成的代码会检查空值但不会捕获异常。

您可以自己验证这一点，将 URL 更改为 Dynamic 并检查生成的代码。一个简单的解决方案，如果您以后不需要更改 URL，将其设置为静态，另一种解决方案是在 App.config 中创建条目，或者，在 .NET 4+ 的项目中创建属性

希望这可以帮助

# android - Mac：AVD 无法启动

> ID：14204301
> 
> 赞同：1
> 
> 时间：2013-01-07T21:26:23.950
> 
> 标签：android, macos, avd

我正在尝试在 MAC 上使用 AVD。它以前运行良好，但现在由于未知原因无法启动。如果我尝试从 AVD 管理器启动虚拟设备，我会看到“正在启动 Android 模拟器”的窗口，但模拟器会启动，并且在进度条到达末尾后窗口会消失。如果我尝试从 AVD 中删除设备，则会弹出一条消息，指出 Android 虚拟设备当前正在模拟器中运行并且无法删除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T21:41:41.780

请参阅此错误报告：[https ://code.google.com/p/android/issues/detail?id=33462](https://code.google.com/p/android/issues/detail?id=33462)

我还遇到了关闭 Mac 上第二台显示器上的模拟器的问题。要么不要关闭第二个监视器上的模拟器，要么使用票证中的解决方法，并在你这样做时修改 emulator-user.ini 文件的 window.x 和 window.y 值。

# python - 在 Python 2.7 中返回打印函数

> ID：14204303
> 
> 赞同：1
> 
> 时间：2013-01-07T21:26:26.900
> 
> 标签：python, python-2.7

如何在 Python 2.7 中返回打印函数？在 Python 3 中，您可以键入`return print(True)`，但在 Python 2.7 中，当我尝试时，我得到一个无效的语法错误`return print True`。我是 Python 新手。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-07T21:38:38.887

在 Python 2.x`print`中不是函数，而是关键字。可能的最佳解决方案是导入类似 3.x 的打印行为，如下所示：

```
from __future__ import print_function

p = print         # now you can store the function reference to a variable
p('I am a function now!')

>>> I am a function now!

def get_print():
    return print   # or return it :)

get_print()

>>> <function print> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T21:35:27.650

这在 Python 2.7 中是不可能的，因为 print 不是一个函数，它是一个保留字*。您可以像这样轻松地为它创建一个函数：

```
def printf(x):
  print x 
```

然后你可以做你想做的事：

```
return (printf(True)) 
```

但是您必须进行重命名。

*这是在 python 3 上更优雅地解决的问题之一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T21:39:47.153

`print`，作为 Python 2 中的语句而不是函数，不能以这种方式使用。相反，您需要这样做：

```
from __future__ import print_function
def foo():
    return print(True)
foo() 
```

# java - 解析-D命令行参数java

> ID：14204304
> 
> 赞同：0
> 
> 时间：2013-01-07T21:26:30.950
> 
> 标签：java, ant

在java中解析这个命令行参数的最佳方法是什么？

```
$ ant run -Dfilename=(filename_value) -Dmemory_size=(memory_size) -Dk=(k_value) 
```

我实际上并没有使用 ant，但我的项目将在此命令行上进行评估。因此，我试图通过在运行配置中添加此示例参数来在 netbeans 上对此进行测试。

```
-Dfilename="C:\\Users\\y_guz_000\\Dropbox\\active projects\\ExternalSort2\\resources\\input.xml" -Dmemory_size="3"
-Dk="2" 
```

我正在输出结果：

```
System.out.println(System.getProperty("filename"));
System.out.println(System.getProperty("memory_size"));
System.out.println(System.getProperty("k")); 
```

然而结果是

```
null
null
null 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T22:16:53.847

您没有将系统变量传递给您的 java 程序，而是将它们传递给`ant`，所以这是预期的。谷歌搜索“ant run set system properties”这看起来是您需要的信息：http: [//ideoplex.com/id/372/setting-java-system-properties-with-ant](http://ideoplex.com/id/372/setting-java-system-properties-with-ant)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T23:41:46.797

*假设您有一个标准的 Netbeans Java SE 或 Maven Java 应用程序项目：*

在左侧的 Netbeans“项目”树中，右键单击您的项目图标。为“类别”列表选择“运行”列表项，您可以在那里输入您的程序和 VM 参数的文本字段（此处为 -D）。

# facebook-graph-api - FQL 在 Graph API 资源管理器中工作，但不在 php 代码中

> ID：14204307
> 
> 赞同：0
> 
> 时间：2013-01-07T21:26:41.083
> 
> 标签：facebook-graph-api, facebook-fql, facebook-php-sdk

我有这个代码：

```
//Create Query
$params = array(
    'method' => 'fql.query',
    'access_token' => '$user->accessToken',
    'query' => "SELECT uid, name FROM user WHERE uid IN (SELECT uid2 FROM friend WHERE uid1 = XXXXXXXX)",
);

//Run Query
$result = $facebook->api($params);

var_dump($result); 
```

当我运行包含上述代码的脚本时，我没有得到任何结果。相反，我收到错误“超出最大执行时间”。我已通过签入确认查询正常`Graph API Explorer`。此外，我还确认（通过调试）`$user->accessToken`包含正确的访问令牌以及用户提供的所有权限。

我也尝试过使用`urlencode`我的查询字符串......没有任何成功。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T21:28:52.080

您正在单引号引用您的访问令牌参考。

```
'access_token' => '$user->accessToken',
                 ^^^                ^^^ 
```

从字面上看，这将值设置为`$user->accessToken`。将右侧引号更改为双引号（或者更好的是，完全删除它们）。

干杯

# objective-c - How do I stop leftBarButtonItem from disappearing when navigationItem.titleView and rightBarButtonItem take up most of the UINavigationBar?

> ID：14204312
> 
> 赞同：2
> 
> 时间：2013-01-07T21:26:57.113
> 
> 标签：objective-c, ios, uinavigationbar, uibarbuttonitem, uinavigationitem

I have a `leftBarButtonItem` (using a custom view) that's acting as a replacement for a back button (as custom views can't be used on `backBarButtonItem`). I've also got a `rightBarButtonItem` (also using a custom view) and a custom titleView.

Everything works fine and dandy when the `leftBarButtonItem` is smaller than a certain width. The `rightBarButtonItem` can be huge and the titleView will resize and truncate to fit the available space, which is exactly how it should be, and how I want it.

However, with the same dimensions reversed (`rightBarButtonItem` smaller than a certain width and `leftBarButtonItem` huge), the `leftBarButtonItem` disappears entirely, and the `titleView` stretches to fit the entire space that previously would have held both the `leftBarButtonItem` and the `titleView`.

I tried swapping the custom views to see if it was something I had done, but the same problem persisted with the views swapped, again only on the `leftBarButtonItem`. I also tried using a regular title, without the custom `titleView`, to no avail.

In the documentation for `UINavigationItem`, under `leftBarButtonItems`, it notes that "If there is not enough room to display all of the items in the array, those that would overlap the title view (if present) or the buttons on the right side of the bar are not displayed." However, there should be more than enough room to fit both buttons and the title, as demonstrated by having a huge `rightBarButtonItem` and a truncated title. Not to mention, there is only a single `leftBarButtonItem`, not multiple, and I need it to appear to replace the back button functionality.

Any ideas on how to stop this from happening? Here's a snippet of the code I'm using:

```
self.navigationItem.titleView = [[TitleView alloc] initWithFrame:CGRectMake(0, 0, 220, 44)];
self.navigationItem.titleView.backgroundColor=[UIColor clearColor];

FollowButton *follow = [[FollowButton alloc] initWithFrame:CGRectMake(0, 0, 62, 34)];
UIBarButtonItem *followButton = [[UIBarButtonItem alloc] initWithCustomView:follow];
self.navigationItem.rightBarButtonItem = followButton;

BackButton *back = [[BackButton alloc] initWithFrame:CGRectMake(0, 0, 108, 34)];
[back addTarget:self.navigationController action:@selector(popViewControllerAnimated:) forControlEvents:UIControlEventTouchUpInside];
UIBarButtonItem *backButton = [[UIBarButtonItem alloc] initWithCustomView:back];
self.navigationItem.leftBarButtonItem = backButton; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-07-12T19:40:59.037

使抗压优先级更高`BackButton`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T05:49:07.330

你能检查标题栏按钮的宽度吗？它实际上是缩小还是 x 位置只是改变并被推离屏幕......如果宽度实际上变为“0”，那么您应该能够在加载后强制将其设置回所需的宽度其他按钮完成。

# ruby-on-rails-3 - Rails3 SOLR sort order using a child field

> ID：14204316
> 
> 赞同：0
> 
> 时间：2013-01-07T21:27:10.717
> 
> 标签：ruby-on-rails-3, solr

I have a working search using SOLR in a Rails 3 app. My controller returns results in pubdate order. I am trying to sub-order by the Section.name. How can I add the child field to the order-by syntax?

Here is my code:

```
@stories = Story.search do
    paginate(:page => params[:page])
    order_by :pubdate, :desc
    order_by :section_id                <---want to suborder by Section.name
    fulltext params[:search_query]
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T04:02:20.720

您需要将部分名称添加到父字段才能使用部分名称对其进行排序。
您可以检查任何 JIRA 的[Solr Join](http://wiki.apache.org/solr/Join)功能以启用对子字段的排序。

文档提到：-

> 对于习惯使用 SQL 的人来说，重要的是要注意 Solr 中的 Join 并不真正等同于 SQL Join，因为没有关于“从”连接的表的信息被传递到最终结果中。更合适的 SQL 类比是“内部查询”

# python - 如何复制列表字典？

> ID：14204326
> 
> 赞同：6
> 
> 时间：2013-01-07T21:27:32.670
> 
> 标签：python, dictionary, deep-copy

我如何复制列表字典，它的复杂性是什么？我试图复制的字典是这样的：

```
myDict = { 'k1': ['a', 'b', 'c'], 
           'k2': ['d', 'e', 'f'], 
           'k3': ['g', 'h', 'i'] } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-07T21:35:30.190

```
from copy import deepcopy
myCopy = deepcopy(myDict) 
```

`deepcopy`总是**这样**。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-07T21:45:21.667

复制任何复杂数据结构的最简单方法是[`copy.deepcopy`](http://docs.python.org/2/library/copy.html#copy.deepcopy). （如果您正在考虑自己做，请参阅[来源](http://hg.python.org/cpython/file/3.3/Lib/copy.py#l129)以了解所涉及的内容。）

复杂度显然应该是 O(NM)，其中 N 是`dict`条目数，M 是平均`list`条目数。但是让我们来解决它：

假设你有一个`dict`N 个键/值对，每个值是`list`一个平均 M 个元素。

如果`list`s 是简单值，则需要分配 1 个哈希表，并执行 2N+1 个简单副本和可能的 N 个哈希。s 是不可变的`string`，而且它们的长度都是 1，如果不是，Python 会将散列值缓存在大字符串中。所以，我们有 O(N) 的总操作。

但`list`s 不是简单的值。您需要分配一个新列表并复制`M`元素。这需要 O(M) 时间。因为有 N 个，所以是 O(NM)。

因此，总时间为 O(N + NM) = O(NM)。

而且，鉴于您有 NM 对象并且明确地想要复制所有这些对象，您真的没有办法打败它。

当然，您可以通过剥离无关部分`deepcopy`并将剩余的任何紧密循环移植到 Cython 或 C中来获得一个数量级的改进。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-07T21:51:05.400

您可以使用调用的内部字典方法`copy()`来复制字典：

例子：

```
a = {'s':[1,2,3], 'f':[5,4,2]}
b = a.copy() 
```

如果你改变`a`不会`b`改变。

并且复杂度是near `O(1)`，因为字典使用hash表来存储数据，访问它的数据是near `O(1)`，那么对于列表来说，访问数据和内存过程都是常数时间。所以它是near `O(1)`。

# c# - Selenium Grid 2 - 远程 webdriver 未在 FireFox 中设置用户代理首选项

> ID：14204334
> 
> 赞同：0
> 
> 时间：2013-01-07T21:28:08.260
> 
> 标签：c#, firefox, selenium, preference

我在 Windows 机器上使用 selenium server 2.28。我已经设置了集线器和节点。我正在使用 .net 编写我的测试用例。我正在使用以下代码来使用自定义 FireFox (17.0.1) 配置文件，用户代理已更改（更改为 iPhone）。

```
FirefoxProfileManager profileManager = new FirefoxProfileManager();
FirefoxProfile profile = profileManager.GetProfile(FireFox_Profile_Name);
profile.SetPreference("general.useragent.override", _sUserAgent);
DesiredCapabilities capability = DesiredCapabilities.Firefox();
capability.SetCapability(FirefoxDriver.ProfileCapabilityName, profile); 
```

我正在实例化一个`RemoteWebDriver`这样的实例：

```
driver = new RemoteWebDriver(new Uri("hub_uri"), capability); 
```

当我`about:config`在节点机器上检查 firefox 实例时，我根本看不到 general.useragent.override 首选项。如果我使用：

```
driver = new FirefoxDriver(profile); 
```

首选项设置正确。我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T20:11:28.553

我目前正在尝试做一些非常相似的事情（将 Firefox 设置为使用 Windows 身份验证）。

在我的（有些有限的）实验中，使用 just`profile`将与本地驱动程序实例一起工作，但在与 Selenium Server 交谈时却不行。我可以使用[这里](http://code.google.com/p/selenium/wiki/DesiredCapabilities#WebDriver)`profile.ToBase64String()`提示的方式将配置文件传递给 Selenium Server 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-24T22:54:57.953

以下是如何使用 Python 在 Grid 2 中传递用户代理。如果您不想要代理，只需将其删除。

```
 myProxy = IP:PORT
    proxy = Proxy({
        'proxyType': ProxyType.MANUAL,
        'httpProxy': myProxy,
        'ftpProxy': myProxy,
        'sslProxy': myProxy,
        'noProxy': '' # set this value as desired
        })

    desired_capabilities = webdriver.DesiredCapabilities.FIREFOX.copy()   
    browser_profile = webdriver.FirefoxProfile()          
    browser_profile.set_preference("general.useragent.override", 'USERAGENT' )           
    desired_capabilities["firefox_profile"] = browser_profile.update_preferences() 
    driver = webdriver.Remote(   command_executor='http://IPADDRESS:4444/wd/hub',desired_capabilities=desired_capabilities, browser_profile=browser_profile, proxy = proxy) 
```

希望有帮助

# javascript - Regex to bulk replace attributes[x] with getAttribute in HTML files

> ID：14204338
> 
> 赞同：0
> 
> 时间：2013-01-07T21:28:19.150
> 
> 标签：javascript, regex, internet-explorer, notepad++

In a boatload of HTML pages, I need to replace all strings like this:

```
language[0].attributes[24].value; 
```

with this:

```
language[0].getAttribute("attr"+24); 
```

where '24' can be any number.

I thought I could use Notepad++'s Find and Replace with regular expressions to do this, but have had no luck so far after much trial and error. I don't want to have to do this manually.

(This is because, when I upgraded to IE10, all the text on the webpages I support went out of whack. It seems that by definition XML attributes can be in any order, and that newer versions of IE reorder them. I now need to reference the attributes by name instead of index.)

Appreciate the help.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T21:33:51.853

找到以下正则表达式：

```
\.attributes\[(\d+)\]\.value 
```

并将其替换为

```
.getAttribute("attr"+\1) 
```

[http://regexr.com?33b0j](http://regexr.com?33b0j) <-- 看看它的实际效果！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T21:34:56.993

您应该在某些文本编辑器中使用一些通配符替换工具。我个人使用VS。Word等MS-Office程序也有这种可能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T21:35:32.760

查找内容：`\.attribute\[(\d+)\]\.value;`
替换为：`.getAttribute\("attr" + \1\);`

（我必须将我的 Notepad++ 版本的替换值中的括号转义为）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T21:38:11.833

用记事本++测试

```
language\[0\].attributes\[\s*(\d+)\s*\].value; 
```

替换为

```
language[0].getAttribute\("attr"+\1\); 
```

# wordpress - WordPress 永久链接 HTAccess 不工作

> ID：14204347
> 
> 赞同：1
> 
> 时间：2013-01-07T21:28:49.467
> 
> 标签：wordpress, .htaccess, permalinks

我有一个博客 (http://pra.getsquared.me)，它确实位于 (http://www.getsquared.me/blogs/praquilone)，我曾经拥有自定义永久链接

/%category%/%postname%

但我想把它改成

/%year%-%monthnum%-%day%-%category%-%postname%-%post_id%

旧的有效，新的无效。当我说它不起作用时，首页上的帖子链接显示新表单，但单击它会给我一个找不到页面的错误。

根据我阅读的内容（我可能错了），htaccess 文件可能是问题所在。我只有标准的东西。

```
#
# BEGIN Wordpress
#
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /blogs/praquilone/
    RewriteRule ^index\.php$ - [L]
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule . /blogs/praquilone/index.php [L]
</IfModule>
#
# END Wordpress
# 
```

我需要更新它吗？如果是这样，我该如何更改？如果不是，还有什么可能是错的？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T21:44:50.857

htaccess 只是将任何内容重定向到 index.php，它会加载 Wordpress 系统 (wp_load())。Wordpress 有一个组件，它解析 REQUEST_URI。

首先，它尝试将 REQUEST_URI 绑定到它的一个正则表达式中，这使它了解正在请求的资源类型（类别、标签、页面、帖子等），然后它尝试查找它是哪个资源（如果它是一个帖子, 找出哪个帖子是蛞蝓）。

您的问题的原因是 '%category%-%postname%' 没有被解析。它只是诸如“类别名称-帖子名称”之类的单词序列，因此 Wordpress 不知道类别在哪里结束，而帖子名称从哪里开始。

它无法绑定正则表达式，并且失败了。请注意，以前它们被“/”分割，这与“-”不同，但现在它不再起作用了。此外，始终以“/”结束 rewrite_rule。

尝试：/%year%-%monthnum%-%day%-%category%-%post_id%-%postname%/ 但是使用它你不能在类别和帖子中使用数字！

更好的规则：/%year%-%monthnum%-%day%/%category%/%post_id%/%postname%/

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T21:37:05.767

好吧，我假设您通过 WP-ADMIN 将您的**设置 > 永久链接**更改为新需要的永久链接。

有时....我发现将您的永久链接更改为另一种格式，保存它，然后将其更改为您想要的格式，然后保存就可以了。你的`.htaccess`文件对我来说看起来很正常。

抱歉，我无法提供更多帮助。

# android - runOnUiThread 中 TextView 上的 NullPointerException

> ID：14204351
> 
> 赞同：1
> 
> 时间：2013-01-07T21:28:51.693
> 
> 标签：android, multithreading, nullpointerexception

所以我有这个代码：

```
public class TargetActivity extends Activity {

protected MySurfaceView mActivity; 

  public TextView Text = null;

   /** Called when the activity is first created. */
   @Override
   public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.activity_target);

       Text = (TextView) findViewById(R.id.textView1);

   }

   public void receiveMyMessage()
    {
       Log.d("Essai", "Test 1");

       Text = (TextView) findViewById(R.id.textView1);

       Log.d("Essai", "Test 2");

        runOnUiThread(new Runnable() {
           @Override
           public void run() {
               if (Text != null) Text.setText("Done");
            }
        });
    }

} 
```

我在一个线程中调用 receiveMyMessage 来更改我的 TextView 中的文本但是当调用 il 时我有这个错误：

```
01-07 22:13:01.375: D/Essai(31552): Test 1
01-07 22:13:01.406: W/dalvikvm(31552): threadid=9: thread exiting with uncaught exception (group=0x4001f888)
01-07 22:13:01.406: E/AndroidRuntime(31552): FATAL EXCEPTION: Thread-9
01-07 22:13:01.406: E/AndroidRuntime(31552): java.lang.NullPointerException
01-07 22:13:01.406: E/AndroidRuntime(31552):    at android.app.Activity.findViewById(Activity.java:1637)
01-07 22:13:01.406: E/AndroidRuntime(31552):    at com.mat.archery.statistics.TargetActivity.receiveMyMessage(TargetActivity.java:36)
01-07 22:13:01.406: E/AndroidRuntime(31552):    at com.mat.archery.statistics.MySurfaceView.onDraw(MySurfaceView.java:133)
01-07 22:13:01.406: E/AndroidRuntime(31552):    at com.mat.archery.statistics.MySurfaceThread.run(MySurfaceThread.java:43) 
```

第 36 行是：`Text = (TextView) findViewById(R.id.textView1);` 我不明白为什么它是 NullPointer，如果我评论该行没有错误，但 TextView 没有改变，所以 Text 为空。

如果它可以帮助，这是布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:orientation="vertical"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent">

    <TextView
        android:id="@+id/textView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Test"
        android:textAppearance="?android:attr/textAppearanceLarge" />

<FrameLayout
 android:layout_width="fill_parent"
 android:layout_height="fill_parent">
<com.mat.archery.statistics.MySurfaceView
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"/>
</FrameLayout>
</LinearLayout> 
```

这是我调用另一个线程的地方：

```
public class MySurfaceThread extends Thread {
 private SurfaceHolder myThreadSurfaceHolder;
 private MySurfaceView myThreadSurfaceView;
 private boolean myThreadRun = false;

public double distance;
public String result;
public boolean touch = false; 

 public MySurfaceView mSurfaceView = null;

 public MySurfaceThread(SurfaceHolder surfaceHolder, MySurfaceView surfaceView) {
  myThreadSurfaceHolder = surfaceHolder;
  myThreadSurfaceView = surfaceView;
 }

 public void setRunning(boolean b) {
  myThreadRun = b;
 }

 @Override
 public void run() {

  // TODO Auto-generated method stub
  while(myThreadRun){
   Canvas c = null;

   try{

    c = myThreadSurfaceHolder.lockCanvas(null);
    synchronized (myThreadSurfaceHolder){
     myThreadSurfaceView.onDraw(c);

    }

   }
   finally{
    // do this in a finally so that if an exception is thrown
    // during the above, we don't leave the Surface in an
    // inconsistent state
    if (c != null) {
     myThreadSurfaceHolder.unlockCanvasAndPost(c);
    }
   }
  }
 }
} 
```

这就是 Draw，receiveMyMessage 被调用的地方：

```
public class MySurfaceView extends SurfaceView implements SurfaceHolder.Callback{

 private MySurfaceThread thread;
 private Paint paint = new Paint(Paint.ANTI_ALIAS_FLAG);
 private Paint paintJaune = new Paint(Paint.ANTI_ALIAS_FLAG);
 int cx, cy, offx, offy;
 private float initX, initY, radius;
 public double distx, disty, distance = 100;
 private boolean drawing = true;
 private boolean first = true;
 public boolean touch = false;

 public TextView Text;

 protected MySurfaceThread msurfacethread; 

public TargetActivity mActivity = null;

 public MySurfaceView(Context context) {
  super(context);
  // TODO Auto-generated constructor stub
  init();
 }

 public MySurfaceView(Context context, AttributeSet attrs) {
  super(context, attrs);
  // TODO Auto-generated constructor stub
  init();
 }

 public MySurfaceView(Context context, AttributeSet attrs, int defStyle) {
  super(context, attrs, defStyle);
  // TODO Auto-generated constructor stub
  init();
 }

private void init(){
        Log.d("Essai", "TargetActivity  5");

        getHolder().addCallback(this);
        thread = new MySurfaceThread(getHolder(), this);

        setFocusable(true); // make sure we get key events

        paint.setColor(getResources().getColor(R.color.Fleche1Default));
        paint.setStyle(Style.FILL);

        paintJaune.setColor(getResources().getColor(R.color.Jaune));
        paintJaune.setStyle(Style.FILL);

        mActivity = new TargetActivity();

        Text = (TextView) findViewById(R.id.textView1);

   }

 @Override
 public void surfaceChanged(SurfaceHolder arg0, int arg1, int arg2, int arg3) {
  // TODO Auto-generated method stub
  drawing = true;
 }

 @Override
 public void surfaceCreated(SurfaceHolder holder) {
  // TODO Auto-generated method stub
  thread.setRunning(true);
  thread.start();

 }

 @Override
 public void surfaceDestroyed(SurfaceHolder holder) {
  // TODO Auto-generated method stub
  boolean retry = true;
  thread.setRunning(false);
  while (retry) {
   try {
    thread.join();
    retry = false;
   }
   catch (InterruptedException e) {
   }
  }
 }

 @Override
    protected void onDraw(Canvas canvas) {
        // TODO Auto-generated method stub
        //super.onDraw(canvas);
     int width = this.getWidth(); 
     int height = this.getHeight(); 

        if(drawing){
            canvas.drawColor(Color.BLACK);
            canvas.drawCircle(width/2, height/2, 80, paintJaune);
            canvas.drawCircle(initX, initY, radius, paint);

            if (touch == true){
                distx = (width/2)-initX;
                distx *= distx;

                disty = (height/2)-initY;
                disty *= disty;

                distance = distx + disty;
                distance = Math.sqrt(distance);
            }

            if((distance + radius/2) < 40)
            {   
                mActivity.receiveMyMessage();
            }

        }
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        // TODO Auto-generated method stub
        //return super.onTouchEvent(event);

        int action = event.getAction();
        if (action==MotionEvent.ACTION_MOVE){
            initX = event.getX();
            initY = event.getY();
            radius = 30;
            drawing = true;
            first = false;
            touch = true;
        }
        else if (action==MotionEvent.ACTION_DOWN){
            initX = event.getX();
            initY = event.getY();
            radius = 30;
            drawing = true;
            first = false;
            touch = true;
        }
        else if (action==MotionEvent.ACTION_UP){
            try {
                Thread.sleep(50);
            } catch (InterruptedException e) {}
            drawing = false;
            first = false;
            touch = false;
        }

        return true;

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-05T16:36:25.777

这就是让你绊倒的原因

`mActivity = new TargetActivity();`

你不能那样做。只有系统可以实例化活动。

你也许可以脱身。`mActivity = (TargetActivity) getContext();`

我不建议这样做，但它会解决你的直接问题。

您应该考虑使用广播意图来发送消息。

`getContext().sendBroadcast(new Intent("DRAWING_FINISHED"));`

在这种情况下，您必须实现自己的广播接收器。

# c# - 如何在字符串列表中找到重复模式？

> ID：14204361
> 
> 赞同：3
> 
> 时间：2013-01-07T21:29:54.583
> 
> 标签：c#, pattern-matching, design-patterns

我有一个来自进程跟踪的方法列表。我想检测是否有任何东西本质上是在循环中调用的。例如，我可能有

```
method1
    method2
    method2
    method2 
```

可能会在一个可能的循环中显示“由方法 1 调用的方法 2 3 次”。

```
method3
    method1
    methodd
    methoda
    methodb
    methodc
    methodd
    methoda
    methodb
    methodc
    methodd 
```

将显示 'methoda、methodb、methodc、methodd 在一个可能的循环中 2 次'。

显然，不能保证有一个循环，但至少我们知道有一个重复的模式。唯一的输入是子列表（例如上面的方法 2、方法 2、方法 2）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T04:28:13.387

您可以按照顺序将子列表插入到链表中，然后运行链表循环检测算法。

例如有 2 个指针，1 个指针一次移动一个节点，另一个指针一次移动 2 个节点，如果存在循环，则较快的指针最终将与较慢的指针位于同一节点

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T15:54:57.780

构建一个带有最长公共前缀的后缀数组，并找到 K 个值 > 阈值的连续 LCP（其中 K 是另一个阈值）

在搜索中，要求找到的后缀的候选LCP在源字符串中是连续的/不重叠。搜索算法：

```
let minimum_iterations = 1
let minimum_pattern_length = 2
let src = source string
let suffix = sorted suffix array, 
             where each entry is suffix i0 (inclusive) to |src| (exclusive)
let lcp = longest common prefixes, 
             where lcp(i) = longest common prefix of suffix(i) and suffix(i-1) when i > 0,
             or 0 if i = 0

for i = 0 to |suffix|:
    if lcp[i] < minimum_pattern_length: continue        
    let j = i
    let iterations = 0
    let last_matched_i0 = suffix[i-1].i0
    while j < |suffix| and lcp[j] >= lcp[i]:
        if (suffix[j].i0 + lcp[i] + 1) = last_matched_i0: 
            iterations++
            last_matched_i0 = suffix[j].i0
        j++

    print 'pattern = ' .. suffix[i][0..lcp[i]] .. ' iterations = ' .. iterations
    print 'starting at ' .. suffix[j-1].i0 .. ' to ' .. suffix[i-1].i0 + lcp[i]

    skip pattern if wanted 
```

`(suffix[j].i0 + lcp[i] + 1) = last_matched_i0` 确保匹配的模式是连续的。如果它们都是模式，我们假设`suffix[j]`包含，因为在排序的后缀数组中总是在前面`suffix[j-1]``ab``abab`

示例：3ababab65

后缀

*   3ababab65
*   ababab65
*   babab65
*   abab65
*   bab65
*   ab65
*   b65
*   65
*   5

排序后缀以及最长公共前缀 (LCP - Suffix)：LCP(i) 是 SUFFIX(i) 和 SUFFIX(i-1) 之间的最长公共前缀

*   0 - 5
*   0 - 65
*   0 - 3ababab65
*   0 - ab65
*   2 - **ab** ab65
*   4 - **abab** ab65
*   0 - b65
*   1 - **b** ab65
*   3 -巴布**ab65**

LCP 候选人：

*   **ab** 65, **ab** ab65, **ab** abab65 - 连续，无重叠
*   **abab** 65, **abab** ab65 - 重叠
*   **b** 65, **b** ab65 - 不连续
*   **bab** 65, **bab** ab65 - 重叠

可能的模式：

*   抗体

您必须稍微修改代码以处理以下情况：

亚贝巴

您将有 aba 和 ababa 的后缀，LCP 为 3

* * *

Or you could just do this... [Shortest Repeating Sub-String](https://stackoverflow.com/questions/8633996/shortest-repeating-sub-string) ... Donno how efficient it is... but way easier.

# directx - 在 CG/HLSL 中计算屏幕纹理坐标

> ID：14204364
> 
> 赞同：2
> 
> 时间：2013-01-07T21:30:04.100
> 
> 标签：directx, shader, direct3d, hlsl

在 OpenGL 中，有时在进行多通道渲染和后处理时，我需要将纹素应用于作为全屏纹理合成一部分的基元的组装片段。通常情况下，当前通道来自屏幕的 FBO 纹理quad 已在上一次渲染中渲染。为了实现这一点，我在 SCREEN SPACE 中计算对象 UV 坐标。在 GLSL 中，我这样计算：

```
 vec2 texelSize = 1.0 / vec2(textureSize(TEXTURE, 0));
 vec2 screenTexCoords = gl_FragCoord.xy * texelSize; 
```

现在我正在尝试使用 CG/HLSL 的 Unity3D [。](http://en.wikipedia.org/wiki/Cg_%28programming_language%29)这些语言的文档很差。如何计算 CG/HLSL 中的屏幕 uv 坐标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T22:17:12.177

要计算屏幕 texcoords，您通常将屏幕分辨率或其倒数（`res`或）传递给着色器，然后使用由这些修改的`rcpres`全屏四边形（假设范围为 ）中的 texcoords 。`[0,1]`

**编辑：**请注意，在许多情况下，您想要两者都`res`可用`rcpres`。`res`对于计算当前位置很有用（你不想用`rcpres`它，因为它需要除法），但`rcpres`可以在 CPU 上计算一次，并且对于移动单个纹素很有用（`(res * uv) + rcpres)`从原点多一个纹素）。

就像是：

```
float2 res; // contains the screen res, ie {640, 480}

void postEffect(in float2 uv : TEXCOORD, ...)
{
    float2 pos = uv * res; // pos now contains your current position 
```

逻辑是来自 fs 四边形的坐标`0,0`位于 texel`0,0`和`1,1`texel `maxX,maxY`，因此知道尺寸，您可以相乘。

但是，您必须为每个效果提供值`res`，这取决于您的着色器系统（Unity3D 可能已经这样做了）。

# javascript - Javascript 函数仅适用于单个帖子

> ID：14204368
> 
> 赞同：0
> 
> 时间：2013-01-07T21:30:15.770
> 
> 标签：javascript, autorotate

我想做的是使用这个javascript自动旋转我的侧边栏上的广告。

```
function run() {
    var prev = $("#pengiklanan a.beriklan:first-child");
    $.unique(prev).each(function(i) {
      $(this).delay(i*1000).slideUp(function() {
        $(this).appendTo(this.parentNode).slideDown();
      });
    });
}

window.setInterval(run,19000); 
```

我侧边栏上的广告来源是

```
<div id="pengiklanan"><a href="https://www.facebook.com/messages/BelajarSeo" target="_blank" class="beriklan"><h6 class="ohiklan">Iklan Anda</h6><p><em>cepat, ruangan terhad</em></p></a>
<a href="https://www.facebook.com/messages/BelajarSeo" target="_blank" class="beriklan"><h6 class="ohiklan">Iklan Anda</h6><p><em>cepat, ruangan terhad</em></p></a>
<a href="https://www.facebook.com/messages/BelajarSeo" target="_blank" class="beriklan"><h6 class="ohiklan">Iklan Anda</h6><p><em>cepat, ruangan terhad</em></p></a>
<a href="https://www.facebook.com/messages/BelajarSeo" target="_blank" class="beriklan"><h6 class="ohiklan">Iklan Anda</h6><p><em>cepat, ruangan terhad</em></p></a>
<a href="https://www.facebook.com/messages/BelajarSeo" target="_blank" class="beriklan"><h6 class="ohiklan">Iklan Anda</h6><p><em>cepat, ruangan terhad</em></p></a>
<a href="https://www.facebook.com/messages/BelajarSeo" target="_blank" class="beriklan"><h6 class="ohiklan">Iklan Anda</h6><p><em>cepat, ruangan terhad</em></p></a>
<a href="https://www.facebook.com/messages/BelajarSeo" target="_blank" class="beriklan"><h6 class="ohiklan">Iklan Anda</h6><p><em>cepat, ruangan terhad</em></p></a></div> 
```

这个 javascript 函数在我的单个帖子上运行（在我的侧边栏上旋转广告）。但是在我的主页、页面、类别、标签和其他页面中，这个 javascript 不起作用。

请任何人... -[我的网站](http://www.forblogger.net/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T21:42:04.877

您页面上的一个脚本调用一个函数`jQuery.noConflict();`。这意味着您不再可以引用`jQuery`by`$`以避免与其他脚本发生冲突。

所以你要么需要删除那条线，但很可能有一个很好的理由。或者您可以将所有对 by 的引用`$`替换`jQuery`。

我使用 Firebug 找到了这个，它告诉你`$`没有定义。你只需要知道为什么它不是来自那里。

# wpf - 如何在 .NET 4 的后台线程中使用二进制格式化程序反序列化？

> ID：14204369
> 
> 赞同：0
> 
> 时间：2013-01-07T21:30:16.703
> 
> 标签：wpf, serialization, task-parallel-library, background-process

我正在尝试在后台线程中加载文件，同时在 UI 中显示进度条。看来`BinaryFormatter.Deserialize`功能以及更新都`ProgressBar`需要在一个STA线程上运行。我正在使用 TPL 库将 T 传递给`askScheduler.FromCurrentSynchronizationContext()`加载任务，但这似乎将`progressbar`更新和文件加载安排到*同一个*线程上，以便它们串行发生而不是并行发生。

我尝试过`TaskScheduler.Default`传入`LoadModelTask`，但这会在`BinaryFormatter.Deserialize`调用时出现 STA 错误。

是否有另一种方法可以在不需要我冻结 UI 线程的后台加载 WPF 对象？

我的代码：

```
 private void openFile()
        {
            OpenFileDialog dialog = new OpenFileDialog();
            dialog.DefaultExt = FILE_EXTENSION;
            dialog.Filter = "MFlow Documents|*.mpex;*.mpxc;*.mpoc";

            Nullable<bool> result = dialog.ShowDialog();
            if (result == true)
            {                
                string filename = dialog.FileName;

                var scheduler = TaskScheduler.FromCurrentSynchronizationContext();
                CancellationTokenSource source=new CancellationTokenSource();
                CancellationToken token = source.Token;

                feedbackWindow = new FeedbackWindow();
                feedbackWindow.ProgressBar.IsIndeterminate = true;
                feedbackWindow.ProgressLabel.Content = "Opening " + filename;
                feedbackWindow.Show();

                Task<Model> loadModelTask=
                    Task.Factory.StartNew<Model>(() => LoadModel(filename),
                    token, TaskCreationOptions.None, TaskScheduler.FromCurrentSynchronizationContext());
                loadModelTask.ContinueWith(task => AfterLoadModel(task), scheduler);

            }
        }

        private static Model LoadModel(string filename)
        {
            Model returnModel;
            string extension = filename.Split('.')[filename.Split('.').Length - 1];

            Stream stream = File.Open(filename, FileMode.Open);
                using (var gZipStream = new GZipStream(stream, CompressionMode.Decompress))
                {
                    BinaryFormatter formatter = new BinaryFormatter();

                    stream.Seek(0, SeekOrigin.Begin);
                    var test = formatter.Deserialize(gZipStream);
                    returnModel = (Model)formatter.Deserialize(gZipStream);

                    gZipStream.Close();
                    stream.Close();
                }
            }
            return returnModel;
        }

        private void AfterLoadModel(Task<Model> task)
        {
            try
            {
                task.Wait();
                switch (task.Status)
                {
                    case TaskStatus.RanToCompletion:
                        ModelResult = task.Result;
                        feedbackWindow.Close();
                        break;
                    default:
                        break;
                }

            }
            catch (AggregateException ex)
            {
                // For demonstration purposes, show the OCE message. 
                foreach (Exception v in ex.InnerExceptions)
                {
                    Debug.WriteLine("msg: " + v.Message);
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T21:37:36.747

*是否有另一种方法可以在不需要我冻结 UI 线程的后台加载 WPF 对象？*

绝对，绝对不是。

WPF UI 元素具有*线程关联性*，这意味着只能使用实例化它们的线程来触摸它们。由于父 UIElement 在其子 UIElement 中调用方法，因此负责构建可视化树中根元素的线程必须是构建可视化树中*所有*UIElement 的同一线程。

有关详细信息，请[阅读 MSDN 上的这篇文章。](http://msdn.microsoft.com/en-us/library/ms750441.aspx#System_Threading_DispatcherObject)

**如果您正在序列化/反序列化 UIElements**，那么您已经做错了。您应该根据反序列化、绑定到您的 UI 并通过 DataTemplates 中描述的 UIElements 显示的模型（POCO 类）和 ViewModels（本质上是模型，但带有更改通知）来描述您的数据。这通常被称为 MVVM 模式，它允许您异步处理数据，而无需（过多）担心 UI 中的线程（如果操作正确）。

**如果您只是想在长时间运行的操作期间更新您的 UI，**最好将一个属性绑定到您的 UI，该属性描述您的操作有多远，或者使用 DispatcherTimer 更新您的 UI（读取属性的当前状态) 或使用异步绑定来自动更新 UI（我相信 INPC 属性绑定会自动为您处理对 UI 线程的封送调用）。

最后一点，如果一个操作需要不到两秒钟，不要为了显示进度条而放慢速度。您的用户会感谢您。

# python - 机械化美丽的汤蟒

> ID：14204372
> 
> 赞同：0
> 
> 时间：2013-01-07T21:30:30.797
> 
> 标签：python, beautifulsoup, mechanize

我正在尝试使用漂亮的汤和机械化向网站提交表单。

Mechanize 本身会引发嵌套表单的错误，因此我尝试遵循使用另一个解析器的建议。这是代码：

```
 browser = mechanize.Browser()
    browser.addheaders = [('User-agent', 'Mozilla/5.0 (X11; U; Linux i686; en-US;      rv:1.9.0.1) Gecko/2008071615 Fedora/3.0.1-1.fc9 Firefox/3.0.1')]
    browser.set_handle_robots(False)
    response = browser.open('URL')
    soup = BeautifulSoup(response.get_data())
    response.set_data(soup.prettify())
    browser.set_response(response) 
```

但是我收到以下错误：

> UnicodeEncodeError：`'ascii'`编解码器无法对`u'\xbb'`位置 2006 中的字符进行编码：序数不在范围内（128）

对于这行代码：`response.set_data(soup.prettify())`

如果类型有问题，我不太确定这里会抛出什么错误？

# php - 如何使用 Javascript ajax 发送 url？

> ID：14204380
> 
> 赞同：6
> 
> 时间：2013-01-07T21:31:01.433
> 
> 标签：php, javascript, ajax

> **可能重复：**
> [如何在 JavaScript 中编码 URL？](https://stackoverflow.com/questions/332872/how-to-encode-a-url-in-javascript)

我正在尝试使用以下代码将 url 发送到 php 代码，但是由于 url 包含 &a=12&b=4 一旦我在我的 php 代码中获得“a”变量的值，地址的最后一部分被删除。

url = [http://www.example.com/help.jpg?x=10&a=12&b=4](http://www.example.com/help.jpg?x=10&a=12&b=4) 但我在 php 文件中得到的 url 是[http://www.example.com/help.jpg?x= 10](http://www.example.com/help.jpg?x=10)（&a=12&b=4被去掉了，我知道原因是javascript,ajax把它和url地址混在一起了，不知道它只是一个值但不知道如何解决）

```
 function upload(url){

            if (window.XMLHttpRequest)
            {// code for IE7+, Firefox, Chrome, Opera, Safari
                xmlhttp=new XMLHttpRequest();
            }
            else
            {// code for IE6, IE5
                xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
            }
            xmlhttp.onreadystatechange=function()
            {
                if (xmlhttp.readyState==4 && xmlhttp.status==200)
                {
                    document.getElementById("output").innerHTML= xmlhttp.responseText;
                }
            }
            xmlhttp.open("GET","Photos.php?a="+url,true);
            xmlhttp.send();
     }        

   if(isset($_GET["a"]))
   {
       $Address = $_GET["a"];
       echo $Address;

   } 
```

输出是 >>> " [http://www.example.com/help.jpg?x=10](http://www.example.com/help.jpg?x=10) " 但它应该是[http://www.example.com/help.jpg?x=10&a=12&b=4](http://www.example.com/help.jpg?x=10&a=12&b=4)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T21:34:10.537

您需要对参数进行编码

```
xmlhttp.open("GET","Photos.php?a="+encodeURIComponent(url),true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T21:36:14.890

您需要对 URL 进行编码。您可以使用 encodeURIComponent(str) 和 encodeURI(str) ，例如：

```
var eurl = encodeURIComponent("http://www.example.com/help.jpg?x=10&a=12&b=4");
xmlhttp.open("GET","Photos.php?a=" + eurl, true); 
```

# c# - 使用多个脚本在 TextField 中切换 C# 参数

> ID：14204382
> 
> 赞同：0
> 
> 时间：2013-01-07T21:31:09.620
> 
> 标签：c#, user-interface, unity3d

我正在使用 C# 在 Unity 中编写游戏。作为游戏的一部分，我在一些对象上附加了一个脚本。该脚本包含该`OnGUI()`方法。正如我之前在另一个[问题](https://stackoverflow.com/questions/14161545/c-sharp-value-switching-value-without-me-touching-it/14162634#14162634)中发现的那样，脚本因此`OnGUI()`被多次调用。

现在我试图插入一个`TextField`，使玩家能够输入他想从银行随身携带的货币价值（当玩家按下按钮确认时，选定的价值会提供给玩家）。但无论我尝试做什么，文本字段中的值仍然是 0（起始值）。

我想知道是否有一种方法可以输入 TextField，而不会被`OnGUI()`附加到多个对象的同一脚本中的多个函数覆盖，回到`0`?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T21:39:53.020

在 Unity 场景中创建一个空白对象，并将脚本附加到它。将文本字段的内容放入公共变量 int，并从其他脚本中引用该变量。您可以使用脚本的 GameObject.Find 和 GetComponent 方法来访问变量并在必要时写入变量。此外，如果您愿意，您可以执行 PlayerPrefs.SetInt 或 SetFloat 和 GetInt、GetFloat 来设置和检索值。但这在资源上很麻烦。

# php - 如果 current_user_can() 函数 500 错误

> ID：14204386
> 
> 赞同：1
> 
> 时间：2013-01-07T21:31:37.800
> 
> 标签：php, wordpress

我正在尝试编写一个函数来隐藏某些用户的管理栏。我正在从隐藏管理栏插件中借用一些代码。我写了以下导致服务器错误的内容：

```
<?php
/*Hides the Admin Bar in WordPress 3.1+
Tweaked Hide Admin Bar plugin */

if (  current_user_can('moderate_comments')  ) {
    function hide_admin_bar_prefs() {
        ?>

        <style type="text/css">
            .show-admin-bar {display: none;}
        </style> 

    <?php 
    }

    add_action( 'admin_print_scripts-profile.php', 'hide_admin_bar_prefs' );
    add_filter( 'show_admin_bar', '__return_false' );
}

?> 
```

如果我将 if 语句更改为真或假等式，它就可以正常工作。例如，如果我使用

```
if (1 == 1) {... 
or 
if (1 == 2) {... 
```

它按我的预期工作。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T23:59:56.057

由于您是从另一个插件复制和粘贴，您是否有可能在`hide_admin_bar_prefs()`这里重新声明该功能？检查禁用您从中复制此代码的插件是否可以解决此问题。如果是这种情况，那么使用不同的函数名称很可能会解决您的问题（并确保相应地更改调用中的第二个参数`add_action()`）。

# internet-explorer-8 - 为什么验证码图像在 IE8 中没有变化

> ID：14204391
> 
> 赞同：0
> 
> 时间：2013-01-07T21:31:52.497
> 
> 标签：internet-explorer-8, captcha

我面临一个重大问题。当我通过单击“不可读？更改文本”链接更改验证码的图像时。那么在这种情况下，只有 IE8 不改变图像，而其他浏览器支持它。如果有人知道它的原因，请告诉我。我的编码如下。谢谢

```
<div id="captcha1">
    <img src="captcha.php" id="captcha" />
        <br/>
            <a href="#" onclick="
    document.getElementById('captcha').src='captcha.php?'+Math.random();
    document.getElementById('captcha-form').focus();"
    id="change-image">Not readable? Change text.</a>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T14:59:54.430

好的，通过以下方式更改您的 Cache-Control 标头：

```
header('Cache-Control: no-cache, no-store, must-revalidate, post-check=0, pre-check=0'); 
```

从我读过的内容来看，后检查和预检查是特定于 IE 的。

查看更多文档。关于这个话题：

[http://php.net/manual/en/function.session-cache-limiter.php](http://php.net/manual/en/function.session-cache-limiter.php)

关于它的工作方式：

![在此处输入图像描述](../Images/723634c1c20131c69f34a6768db1bc81.png)

> 举个例子怎么样？假设 HTTP 服务器发送带有以下标头的图像： Cache-Control: post-check=3600,pre-check=43200 pre-check 和 post-check 都以秒为单位指定时间间隔。我们告诉 IE 缓存提到的图像 12 小时（60 * 60 * 12 秒）。第一个小时（60 * 60 秒）IE 将简单地显示其本地缓存中的图像。然而，在 60 分钟后，我们希望它在后台检查一个较新的，即它会显示缓存的一个，然后进行背景检查。12 小时后，IE 首先检查修改后的图像。

[资源](http://aspnetresources.com/blog/cache_control_extensions)

注意：在测试之前从浏览器中清除缓存；）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T21:36:33.390

我怀疑是 IE8 缓存问题；那是您的 Math.random() 无法正常工作。看看那里：[即使使用 mathrandom，IE8 仍在缓存我的请求](https://stackoverflow.com/questions/3002938/ie8-is-still-caching-my-requests-even-with-mathrandom)

# javascript - 下拉菜单的 CSS 与 Javascript（或库 js）

> ID：14204392
> 
> 赞同：-1
> 
> 时间：2013-01-07T21:31:53.353
> 
> 标签：javascript, jquery, css, jquery-ui

我即将开始一个需要下拉菜单的项目 - 基本上，它将由类别组成，并且在这些类别中 - 将有一个额外的子类别下拉菜单。翼。

```
MENU
---> Colors
---> Sizes --> Large
---> Makes     Medium 
```

每只猫“可能”都有一个子菜单。

我的问题是关于纯 CSS3 菜单的出现——以及它们与传统的 JS 创建的菜单相比有什么优势。我知道有一堆 jQuery 菜单以及 CSS3——我很好奇，现在哪个是更健壮/可维护的解决方案？

用于菜单创建的 CSS3 与 jQuery（或任何 js 解决方案）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T21:36:31.837

1.  您可以在不使用任何 CSS3 特定属性的情况下创建下拉菜单。
2.  除非您需要动画或实际需要 jQuery 或 javascript，否则请坚持使用 CSS。

为什么？

尽管不太可能，您的用户可能在其浏览器上关闭了 javascript，这意味着他们不会按照预期的方式看到您的菜单，普通用户无法禁用 CSS（是的，可以通过 Web 开发人员来完成）附加组件）。您还包括一个完整的库和脚本，用于一些不需要它的东西。

您所解释的根本不需要 jQuery 或 javascript，那么为什么还要使用它呢？

# php - 用php过滤密码

> ID：14204393
> 
> 赞同：1
> 
> 时间：2013-01-07T21:31:55.023
> 
> 标签：php

使用 php 内置过滤器（SANITIZE 和 VALIDATE）过滤密码的最佳方法是什么。如何验证密码长度？

使用数字应该很容易：

```
"options" => array(
   'min_range' => 6,
   'max_range' => 25
) 
```

那么在上面的例子中如何检查长度呢？

```
array(
   "filter" => SANITIZE_STRING,
   ->check length!?!
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T21:37:02.987

你可以使用 a`FILTER_VALIDATE_REGEXP`来做到这一点：

```
$password = "My Great Password";
filter_var($password, 
  FILTER_VALIDATE_REGEXP,
  array( "options"=> array( "regexp" => "/.{6,25}/"))
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T21:37:10.913

不知道，为什么要使用内置过滤器

```
if (strlen($password) < $options['min_range'])) {
  // Password too short
} 
```

现在只需对其进行哈希处理（使用安全哈希算法）并将其推送到数据库中。您无需进一步的步骤。但是，您可能想警告您的用户，如果他们尝试设置“简单密码”，例如常规单词、序列或类似的东西。另外我建议*不要*限制最大长度，因为你为什么要这样做？

# java - addView 等价但将 Preference 添加到 PreferenceScreen？

> ID：14204397
> 
> 赞同：1
> 
> 时间：2013-01-07T21:32:12.163
> 
> 标签：java, android

我最近不得不以编程方式向 LinearLayout 添加视图，我必须为 PreferenceScreen 做同样的事情，但我不知道如何。这是如何为 LinearLayout 完成的：

```
 LayoutInflater localLayoutInflater = (LayoutInflater)getBaseContext().getSystemService("layout_inflater");
    View myView = localLayoutInflater.inflate(R.layout.custom_layout, null);
    final PreferenceScreen ll=(LinearLayout)findViewById(R.id.linearlayoutID);
    ll.addView(myView); 
```

我怎样才能将首选项添加到 PreferenceScreen？

* * *

编辑：

这是我到目前为止所做的：

```
Preference preference = new Preference(this);
        preference .setTitle("WHATEVER");
        preference .setSummary("Summary");
        preference .setKey("your_key"); 
```

我设法创建了一个首选项并将其存储在 list1 中，我认为到目前为止还可以，但现在我需要弄清楚如何将它附加到里面`<PreferenceScreen id="@+id/list">`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T19:39:07.660

试试这个：

```
PreferenceGroup preferenceGroup = (PreferenceGroup) findPreference("containerId");
if (preferenceGroup != null) {
    preferenceGroup.addPreference(myNewPreference);
} 
```

PreferenceScreen 也是如此（每次我写 PreferenceGroup 时替换 PreferenceScreen ）。

# php - PHP 错误处理程序/静音错误

> ID：14204405
> 
> 赞同：1
> 
> 时间：2013-01-07T21:32:52.157
> 
> 标签：php, error-handling

我正在使用我们添加了自定义错误处理程序的应用程序。我们添加它的原因是为了让我们可以立即收到通知并跟踪应用程序中的问题。

这里的问题是，在调试模式下，我已切换错误处理程序以打印出所有错误。这里的目标是消除所有发生的错误。

现在，我正在尝试从可能会或可能不会被序列化的数据库中提取变量。所以，我目前知道的检测它们是否被序列化的唯一方法是添加一个测试。（即`if (unserialize($var)) { // do it }`）。

我可以将静音运算符添加到函数调用中，但自定义错误处理程序会忽略它。有没有办法检测给定的错误是否被静音？还是有更好的方法来做到这一点？

我无法修改数据库结构或数据。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T21:36:53.160

> 我可以将静音运算符添加到函数调用中，但自定义错误处理程序会忽略它。

实际上，在这种情况下，“静音”运算符可以正常工作。通过检查自定义错误处理程序中的错误报告设置，您可以遵循使用`@`抑制运算符的个别情况：

```
set_error_handler(function($errNo, $errStr, $errFile, $errLine) {
    if (0 !== error_reporting()) {
        $msg = "$errStr in $errFile on line $errLine";
        throw new ErrorException($msg, $errNo);
    }
}); 
```

如果`error_reporting() === 0`然后使用`@`抑制运算符。只要您在开始其他处理程序之前检查该值，您就可以了。

# python - Python 中的 scipy.sparse 点非常慢

> ID：14204406
> 
> 赞同：5
> 
> 时间：2013-01-07T21:32:56.983
> 
> 标签：python, numpy, scipy, sparse-matrix

以下代码甚至无法在我的系统上完成：

```
import numpy as np
from scipy import sparse
p = 100
n = 50
X = np.random.randn(p,n)
L = sparse.eye(p,p, format='csc')
X.T.dot(L).dot(X) 
```

有什么解释为什么这个矩阵乘法会挂起吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-07T22:04:54.380

`X.T.dot(L)`不是您可能认为的 50x100 矩阵，而是 100x100 的 50x100 稀疏矩阵的数组

```
>>> X.T.dot(L).shape
(50, 100)
>>> X.T.dot(L)[0,0]
<100x100 sparse matrix of type '<type 'numpy.float64'>'
    with 100 stored elements in Compressed Sparse Column format> 
```

似乎问题在于`X`'`dot`方法，它是一个数组，不知道稀疏矩阵。因此，您必须使用它的`todense`or`toarray`方法将稀疏矩阵转换为密集矩阵。前者返回一个`matrix`对象，后者返回一个`array`：

```
>>> X.T.dot(L.todense()).dot(X)
matrix([[  81.85399873,    3.75640482,    1.62443625, ...,    6.47522251,
            3.42719396,    2.78630873],
        [   3.75640482,  109.45428475,   -2.62737229, ...,   -0.31310651,
            2.87871548,    8.27537382],
        [   1.62443625,   -2.62737229,  101.58919604, ...,    3.95235372,
            1.080478  ,   -0.16478654],
        ..., 
        [   6.47522251,   -0.31310651,    3.95235372, ...,   95.72988689,
          -18.99209596,   17.31774553],
        [   3.42719396,    2.87871548,    1.080478  , ...,  -18.99209596,
          108.90045569,  -16.20312682],
        [   2.78630873,    8.27537382,   -0.16478654, ...,   17.31774553,
          -16.20312682,  105.37102461]]) 
```

或者，稀疏矩阵有一个`dot`知道数组的方法：

```
>>> X.T.dot(L.dot(X))
array([[  81.85399873,    3.75640482,    1.62443625, ...,    6.47522251,
           3.42719396,    2.78630873],
       [   3.75640482,  109.45428475,   -2.62737229, ...,   -0.31310651,
           2.87871548,    8.27537382],
       [   1.62443625,   -2.62737229,  101.58919604, ...,    3.95235372,
           1.080478  ,   -0.16478654],
       ..., 
       [   6.47522251,   -0.31310651,    3.95235372, ...,   95.72988689,
         -18.99209596,   17.31774553],
       [   3.42719396,    2.87871548,    1.080478  , ...,  -18.99209596,
         108.90045569,  -16.20312682],
       [   2.78630873,    8.27537382,   -0.16478654, ...,   17.31774553,
         -16.20312682,  105.37102461]]) 
```

# jquery - jQuery自动完成验证数据

> ID：14204407
> 
> 赞同：0
> 
> 时间：2013-01-07T21:33:00.043
> 
> 标签：jquery, spring, autocomplete

我已经使用 spring mvc 实现了自动完成下拉。现在我的问题是，当任何用户从自动完成下拉菜单中选择/选择任何值时，我如何确定所选值是否正确？换句话说，我想确保用户是否从自动完成中选择了正确的值。因为用户可以在输入文本框中输入随机字符串并提交（技术上，我还确保当用户从下拉列表中选择任何值时，提交将对用户可见，如果用户输入不正确的数据，按钮不应该被激活）。

这是一个代码

```
<script>
    $(function() {
        $( "input[name='creditCheck']" ).autocomplete({
            minLength: 2,
            source:function( request, response ) {
                $.ajax({
                    url: "creditCheck.ajax",
                    dataType: "json",
                    data: {
                        maxRows: 6,
                        startsWith: request.term
                    },
                success: function( data ) {
                    response( $.map( data.creditCheckData, function( item) {
                        return {
                            creditName: item.creditName,
                        }
                    }));
                }

                });
            }, 
```

上面的代码很好，它从服务器获取列表并显示自动完成数据。在下面的代码中，我只是切换按钮。但我也确保当用户从下拉列表中选择任何值时，提交将对用户，如果用户输入的数据不正确，则不应激活该按钮。

```
$('input[name="creditCheck"]').bind("change keyup", function () {
    if ($(this).val()!="") {
        $(this).nextAll("button[name='add']:first").removeAttr('disabled');
    } else {
        $(this).nextAll("button[name='add']:first").attr('disabled', 'disabled');
    }
}); 
```

# ios - iOS - 加载远程内容后无法滚动 UITableView

> ID：14204409
> 
> 赞同：0
> 
> 时间：2013-01-07T21:33:16.403
> 
> 标签：ios, uitableview, scroll

当我通过一个块加载远程内容时，我通过调用 reloadData 来更新 UITableView。但是，我无法滚动查看这些数据。我认为这是因为我已经声明表中的行数是保存列表内容的 NSArray 变量的长度。但是，当调用它时，列表的计数为零。我会假设通过在 tableView 上调用 reloadData 它会再次重新计算列表大小。也许我在这个过程中错过了一步。谢谢 这是我的代码

```
 -(void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    dispatch_async(kBgQueue, ^{
        NSData* data = [NSData dataWithContentsOfURL:
                        [NSURL URLWithString: @"MYURL"]];
        [self performSelectorOnMainThread:@selector(fetchedData:)
                               withObject:data waitUntilDone:YES];

    });
}
-(void) fetchedData:(NSData *)responseData
{
    NSError* error;
    id json = [NSJSONSerialization
                          JSONObjectWithData:responseData //1
                          options:kNilOptions
                          error:&error];

    self.dataList = json;
    dispatch_async(dispatch_get_main_queue(), ^(void) {
        [self.tableView reloadData];
    });
}
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [self.dataList count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"SongCell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

    // Configure the cell...
    if([self.dataList count] > 0){
        NSDictionary *chartItem = [self.dataList objectAtIndex:indexPath.row];
        NSDictionary *song = [chartItem objectForKey:@"song"];
        cell.textLabel.text = [song objectForKey:@"title"];
    }

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T21:38:55.750

检查您的`json`对象（因此`self.dataList`）在异步调用结束时是否不为零。如果是，则`[self.dataList count]`返回 0。

另外，请确保您正确设置了`self.dataList.dataSource`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T22:08:59.850

现在正在工作。问题的原因是我向 UITableView 添加了平移手势

```
[self.view addGestureRecognizer:self.slidingViewController.panGesture]; 
```

这似乎干扰了在表格上滚动的能力。希望这将有助于将来遇到此问题的任何人。

# java - 通用战争文件就像 API 概念

> ID：14204412
> 
> 赞同：0
> 
> 时间：2013-01-07T21:33:23.470
> 
> 标签：java, api, jakarta-ee

您可能知道，当一个 API 准备好后，只需将其添加到 J2SE 的类路径中，就可以在任何项目中使用它。我想知道是否可以创建一个网页并将其编译成一个war文件，就像一个API定义一样，这样它就可以在耳朵里直接使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T22:36:47.707

不，您不能使用war 文件来做到这一点，因为war 文件将定义一个与其他Web 应用程序分开的新Web 应用程序。

但是从 servlet 3.0 规范开始，您可以使用 jar 的 META-INF/resources 目录，将 jar 文件放置在 war 文件的 WEB-INF/lib 目录中。有关详细信息，请参阅[此问题](https://stackoverflow.com/questions/4732965/exposing-resources-from-jar-files-in-web-applications-tomcat7)。

# python - Tkinter - 在循环时设置字符串变量并获取条目值

> ID：14204414
> 
> 赞同：1
> 
> 时间：2013-01-07T21:33:27.057
> 
> 标签：python, loops, tkinter, tkinter-entry

我的目标是能够将字符串变量传递给两个不同的条目以进行用户验证并返回用户修改的值。如果代码执行一次，则代码可以正常工作；但是，当循环时，它仅在循环的第一次迭代期间正确执行。在随后的迭代中，条目的字符串变量为空白。

我已经尝试过`update_idletasks()`没有运气的睡眠时间。我在 Windows XP 上运行 Python 2.4。

```
# -*- coding: cp1252 -*-
import Tkinter

def retrieve_text():
    app_win.quit()

for item in range(3):

    numero_dossier = item+1
    version_dossier = item+2

    app_win = Tkinter.Tk()

    l = Tkinter.Label(app_win, text="Veuillez valider les informations suivantes et les corriger au besoin :")
    l.grid(row=0, column=0, columnspan=2)
    l.pack()

    v1 = Tkinter.StringVar()
    v1.set(numero_dossier)
    l1 = Tkinter.Label(app_win, text="Numéro de dossier:", anchor='w', justify='left')
    e1 = Tkinter.Entry(app_win, textvariable=v1)

    l1.pack()
    e1.pack()

    v2 = Tkinter.StringVar()
    v2.set(version_dossier)
    l2 = Tkinter.Label(app_win, text="Version du dossier:", anchor='w', justify='left')
    e2 = Tkinter.Entry(app_win, textvariable=v2)

    l2.pack()
    e2.pack()

    app_button = Tkinter.Button(app_win,text="OK",command=retrieve_text)
    app_button.pack()

    app_win.mainloop()

    app_win.withdraw()

    numero_dossier = e1.get().strip()
    version_dossier = e2.get().strip()

    print numero_dossier, version_dossier 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T22:16:21.990

这从根本上被打破了：

```
for item in range(3):
    ...
    app_win = Tkinter.Tk() 
```

Tkinter 根本不是为这种方式工作而设计的。你的程序应该只创建一个类的实例`Tk`，并且你应该只调用`mainloop`一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T05:26:46.173

关于为什么要多次构建小部件的问题没有任何理由，所以我认为这是一个错误。此外，实例的名称`app_win`可能`Tkinter.Tk`会欺骗您。实例化`Tkinter.Tk`启动一个 tcl 解释器，然后加载 tk 作为“奖励”给你一个窗口。

更明智的方法是只创建一次小部件，然后进行多次验证。这是为此调整的代码：

```
import Tkinter

NUM_D = range(3)
VER_D = range(3)
CURR_D = 0

def retrieve_and_update_text():
    global CURR_D
    num_d = e1.get().strip()
    ver_d = e2.get().strip()
    print num_d, ver_d

    CURR_D = (CURR_D + 1) % 3
    v1.set(NUM_D[CURR_D] + 1)
    v2.set(VER_D[CURR_D] + 2)

root = Tkinter.Tk()

l = Tkinter.Label(root, text=u"Label")
l.grid(row=0, column=0, columnspan=2)

v1 = Tkinter.StringVar()

l1 = Tkinter.Label(root, text=u"Num", anchor='w', justify='left')
e1 = Tkinter.Entry(root, textvariable=v1)
l1.grid(row=1)
e1.grid(row=1, column=1)

v2 = Tkinter.StringVar()
l2 = Tkinter.Label(root, text=u"Ver", anchor='w', justify='left')
e2 = Tkinter.Entry(root, textvariable=v2)
l2.grid(row=2)
e2.grid(row=2, column=1)

app_button = Tkinter.Button(root, text=u"OK", command=retrieve_and_update_text)
app_button.grid(row=3)

v1.set(NUM_D[CURR_D] + 1)
v2.set(VER_D[CURR_D] + 2)

root.mainloop() 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-08T20:07:08.887

感谢 Bryan Oakley 和 mmgp，我能够提出以下代码来满足我的需要，即使我在循环的每次迭代期间都调用了 mainloop 规则。欢迎所有评论。再次感谢！

```
# -*- coding: cp1252 -*-
import Tkinter
root = Tkinter.Tk()

def retrieve_and_update_text():
    #global CURR_D
    dossier = e1.get().strip()
    version = e2.get().strip().upper()
    print dossier, version

    root.quit()

for item in range(3):

    dossier = item+1
    version = item+2

    l = Tkinter.Label(root, text=u"Veuillez valider les informations suivantes et les corriger au besoin :")
    l.grid(row=0, column=0, columnspan=2)

    v1 = Tkinter.StringVar()

    l1 = Tkinter.Label(root, text=u"Dossier :", anchor='w', justify='left')
    e1 = Tkinter.Entry(root, textvariable=v1)
    l1.grid(row=1)
    e1.grid(row=1, column=1)

    v2 = Tkinter.StringVar()
    l2 = Tkinter.Label(root, text=u"Version :", anchor='w', justify='left')
    e2 = Tkinter.Entry(root, textvariable=v2)
    l2.grid(row=2)
    e2.grid(row=2, column=1)

    app_button = Tkinter.Button(root, text=u"OK", command=retrieve_and_update_text)
    app_button.grid(row=3)

    v1.set(dossier)
    v2.set(version)

    root.mainloop()

    if item == range(3)[-1]: # if last item
        root.withdraw() 
```

# c++ - c++ mfc csv文件读取

> ID：14204416
> 
> 赞同：1
> 
> 时间：2013-01-07T21:33:34.233
> 
> 标签：c++, file, csv, listbox

我在读取 csv 文件时遇到问题。我对 mfc 很陌生，希望有人能帮助我。所以...我有一个按钮，我用它打开文件对话框并选择 csv 文件。在 csv 文件中，我有不同的形状（矩形、椭圆、多边形）以及颜色和位置信息（分隔符是；）。现在我需要在 ListBox 中显示这些信息，而我被卡住了。我到目前为止（代码）......我不知道这没关系，我找不到任何好的帮助，所以我希望有人能给我一个提示。

```
void CDialogDrawing::OnBnClickedButton2()
{

      TCHAR filtri[] = _T("CSV files (*.csv)|*.csv||"); 
      CString path; 

      CFileDialog dlg(TRUE, _T("csv"), _T("*.csv"), OFN_FILEMUSTEXIST | OFN_HIDEREADONLY, filtri);
      dlg.m_ofn.lpstrTitle = _T("Open...");

      if(dlg.DoModal() == IDOK) //OK
      {
         path = dlg.GetPathName();
         //
         CStdioFile readFile;
         CFileException fileException;
         CString strLine;

         if(readFile.Open(path, CFile::modeRead, &fileException))
         {
             while (readFile.ReadString(strLine));
             {
                  seznamLikov.AddString(strLine);
             }
         }
         else
         {
             CString strErrorMsg;
             strErrorMsg.Format(_T("Can't open file %s , error : %u"), path, fileException.m_cause);
             AfxMessageBox(strErrorMsg);
    }
    readFile.Close();
 }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T21:35:05.950

后面的分号`while`：

```
while (readFile.ReadString(strLine));
{
    seznamLikov.AddString(strLine);
} 
```

删除它，因为它相当于：

```
while (readFile.ReadString(strLine)) {}

{
    seznamLikov.AddString(strLine);
} 
```

失败`AddString()`后将只调用一次含义。`ReadString()`

# iphone - 如何使用代码禁用 Revmob？

> ID：14204417
> 
> 赞同：0
> 
> 时间：2013-01-07T21:33:35.203
> 
> 标签：iphone, objective-c, xcode, in-app-purchase, revmob

我希望在我的免费游戏中为所有人启用 RevMob。当他们进行应用内购买以消除广告时，我想消除那些 RevMob 广告。

我首先在 AppDelegate 中有这段代码，以启动会话

> [RevMobAds startSessionWithAppID:@"lalala"];

然后在视图控制器中我有

```
> -(void)viewDidLoad {
> [[RevMobAds session] showBanner];
> [[RevMobAds session] showFullscreen];
> [[RevMobAds session] showPopup]; 
```

请帮助我或指出我正确的方向！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T20:31:39.113

如果您不熟悉应用内购买，您应该查看Ray Wenderlich 博客[的 iOS 6 教程中的应用内购买简介。](http://www.raywenderlich.com/21081/introduction-to-in-app-purchases-in-ios-6-tutorial)

# java - 将 DOM 解析器更改为不对空节点使用短符号

> ID：14204428
> 
> 赞同：1
> 
> 时间：2013-01-07T21:34:35.153
> 
> 标签：java, xml, dom, transformer

无论如何将 DOM Parser Empty 表示法从短格式更改为长格式？

我需要

```
 <book></book> 
```

而不是书

```
<book/> 
```

我们有一个第三方 XML 阅读器，它不能使用短符号。我所有的 XML 对象都是 DOM。最好的方法是什么？

```
TransformerFactory transformerFactory = TransformerFactory.newInstance();
Transformer transformer = transformerFactory.newTransformer();
DOMSource source = new DOMSource(doc);
StreamResult result = new StreamResult(XMLFile);
transformer.transform(source, result); 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T23:40:57.863

好吧，这是一个猜测：在转换器上将输出属性设置为“html”可能会这样做，因为 html 无法识别短路空标签（我认为）。

```
transformer.setOutputProperty(OutputKeys.METHOD, "html"); 
```

注意：未经测试！

更新：

我刚刚验证它有效。这个片段：

```
String xml = "<root><a/></root>";
Document doc = DocumentBuilderFactory.newInstance()
    .newDocumentBuilder()
    .parse(new ByteArrayInputStream(xml.getBytes()));
TransformerFactory tf = TransformerFactory.newInstance();
Transformer t = tf.newTransformer();
t.setOutputProperty(OutputKeys.METHOD, "html");
t.transform(new DOMSource(doc), new StreamResult(System.out)); 
```

产生这个输出：

```
<root>
<a></a>
</root> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-30T14:21:25.690

我有同样的问题。这是获得该结果的功能。

```
public static String fixClosedTag(String rawXml){

    LinkedList<String[]> listTags = new LinkedList<String[]>(); 
    String splittato[] =  rawXml.split("<");

    String prettyXML="";

    int counter = 0;
    for(int x=0;x<splittato.length;x++){
        String tmpStr = splittato[x];
        int indiceEnd = tmpStr.indexOf("/>");
        if(indiceEnd>-1){
            String nameTag = tmpStr.substring(0, (indiceEnd));
            String oldTag = "<"+ nameTag +"/>";
            String newTag = "<"+ nameTag +"></"+ nameTag +">";
            String tag[]=new String [2];
            tag[0] = oldTag;
            tag[1] = newTag;
            listTags.add(tag);
        }
    }
    prettyXML = rawXml;

    for(int y=0;y<listTags.size();y++){
        String el[] = listTags.get(y);

        prettyXML = prettyXML.replaceAll(el[0],el[1]);
    }

    return prettyXML;
} 
```

# powershell - Powershell 脚本输出和 Windows 资源管理器之间的 Date Created 属性存在差异

> ID：14204429
> 
> 赞同：1
> 
> 时间：2013-01-07T21:34:46.773
> 
> 标签：powershell

我编写了一个简单的 powershell 脚本，它递归地遍历文件树并以制表符分隔的形式返回每个节点的路径及其创建时间，这样我就可以将它写到一个文本文件中并使用它来进行统计分析：

```
echo "PATH  CREATEDATE"
get-childitem -recurse | foreach-object {
$filepath = $_.FullName
$datecreated = $_.CreationTime
echo "$filepath $datecreated"
} 
```

然而，一旦我这样做了，我注意到当我查看相同文件的相同属性时，由脚本生成的 CreationDate 时间正好比 Windows 资源管理器所说的早一小时。通过检查我的数据集的其余部分（以不同的格式记录周围的事件），很明显，我从 explorer 获得的结果是唯一符合整体叙述的结果，这让我相信 Powershell 有问题脚本，使其写出不正确的时间。有没有人知道为什么会这样？

问题背景：

我正在尝试纠正一些 XML 日志文件设计中的问题，这些文件在用户启动和停止使用应用程序时记录，而实际上应该记录用户通过工作流的不同阶段所花费的时间. 我找到了一种可能的方法来解决这个问题，方法是从用户与 XML 日志一起发送的一些备份文件中提取日期信息。备份是由我们的最终用户应用程序在用户在工作流的各个阶段之间转换的确切时刻生成的，因此我试图将这些文件的时间戳中的信息与原始 XML 日志的内容结合起来，以找出什么我想知道工作流程的步骤。

评论讨论中得出的观点总结：

*   这些文件与我正在运行的脚本位于同一台机器上（不是网络存储）
*   更正夏令时和时区提高了数据质量，但不是针对原始问题中提出的具体问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T15:03:43.580

我从未找到导致 powershell 与 explorer 的时间戳之间存在差异的最终技术原因，但我能够通过将我从 powershell 脚本中获得的所有时间戳减去一个小时来纠正它。然而，在这样做之后，我从 XML 日志文件中获得的时间戳与我使用 powershell 脚本从文件系统中提取的时间戳之间仍然存在很大的分歧。推断最终用户在生成文件时可能停留在同一时区，我编写了一个小算法来估计每个用户的时区，通过评估工作流和步骤中步骤 1 和步骤 2 之间的时间中位数2和3.如果用户的时区有问题，这两个时间跨度之一将是负数（因为估计了步骤 2 事件的时间，并且从 XML 日志中知道了步骤 1 和 3 事件的时间。）然后我将正值向下舍入到最接近的小时并应用该小时数作为该用户步骤 2 次的偏移量。总的来说，这使我的数据集中的不良数据量从 20% 下降到 0.01%，所以我对结果很满意。

如果有人需要它，这是我用来在时间戳中制作小时偏移的代码（不是 powershell 代码，这是在处理另一部分数据处理的 C# 脚本中）：

```
 DateTime step2time = DateTime.Parse(LastModifyDate);
    TimeSpan shenanigansCorrection = new TimeSpan(step2time.Hour-1,step2time.Minute,step2time.Second); 
    step2time= step2time.Date + shenanigansCorrection; 
```

重新定义变量的原因`step2time`是 DateTimes 在 .NET 中不可变。

# autohotkey - AutoHotKey - 批量电子邮件过滤脚本无法正常工作

> ID：14204430
> 
> 赞同：0
> 
> 时间：2013-01-07T21:34:54.003
> 
> 标签：autohotkey

所以我目前有以下代码：

```
f2::
SendInput, ^c
RegExMatch(clipboard, "[\w-_.]+@(?:\w+(?::\d+)?\.){1,3}(?:\w+\.?){1,2}", email)
WinActivate, emailaddresses - Notepad
SendInput, %email%`r
return 
```

它似乎正在工作，但我正在尝试获取它，以便如果我突出显示 5 个电子邮件地址，它会将它们分别发送到电子邮件地址中的不同行 - 记事本窗口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T04:41:43.790

如果您知道分隔符，则可以使用 StringSplit 并在其上运行您的函数。

来自[http://www.autohotkey.com/docs/commands/StringSplit.htm](http://www.autohotkey.com/docs/commands/StringSplit.htm)

```
f2::
SendInput, ^c
;put your delimiter here, assuming space/tab for now
StringSplit, txtArray, clipboard, %A_Tab%%A_Space%
Loop, %txtArray0%
{
  copyemail(txtArray%a_index%)
}
return

copyemail(sTxt) {
  FoundPos := RegExMatch(sTxt, "[\w-_.]+@(?:\w+(?::\d+)?\.){1,3}(?:\w+\.?){1,2}", email)
  if (FoundPos > 0) {
    WinActivate, emailaddresses - Notepad
    SendInput, %email%`r
  }
} 
```

见上面的样品，未经测试！

# jquery-autocomplete - Jquery自动完成UI，填充键而不是值

> ID：14204432
> 
> 赞同：0
> 
> 时间：2013-01-07T21:35:01.737
> 
> 标签：jquery-autocomplete

`enter code here`我正在使用 jquery 自动完成 ui。

我有一个文本框，其中用户键入美国州的名称并提出自动完成建议。这里进行了 ajax 调用，并按预期返回了 json 结果。

例如。当用户键入 "new" 时，返回的 json 响应是：

```
{"NH":"New Hampshire","NJ":"New Jersey","NM":"New Mexico","NY":"New York"} 
```

我想要的是当用户从建议列表中单击一个州时，例如“纽约”，而不是用州名填充文本框，而是填充其州代码（此处为“NY”）。

我当前的代码是：

```
$("#selectAllStateList").autocomplete( { source: "getStateList.html"
         }); 
```

****** *** *******更新******* *********

 ****好的..现在我改变了响应格式。所以当我输入 "de" 时，我会得到响应。

```
[{"label":"DE","value":"Delaware"},{"label":"RI","value":"Rhode Island"}] 
```

自动完成建议框向我显示 DE 和 RI ，但是当我单击 RI 时，Rhode Island 会填充在文本框中，而不是我想要的 RI。有人可以帮我怎么做。

感谢期待 Rachit

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T22:37:18.627

明白了..只是用值改变了标签。****

# google-app-engine - 从后备存储 (local_db.bin) 加载时，开发 appengine (HRD) 实例抛出 EOFException

> ID：14204436
> 
> 赞同：4
> 
> 时间：2013-01-07T21:35:14.903
> 
> 标签：google-app-engine, google-cloud-datastore, objectify

由于我已将 GAE 应用程序升级到 HRD 数据存储，因此它在我的本地开发环境中无法正常工作。可以将数据导入本地后备存储，并且 local_db.bin 清楚地包含数据（从其大小判断）。有时，我可以使用本地数据存储。但总是当我重新启动 GAE 服务器时，无法读取后备存储，并抛出以下异常：

```
INFO: Local Datastore initialized: 
    Type: High Replication
    Storage: [path removed]\local_db.bin
[date time] com.google.appengine.api.datastore.dev.LocalDatastoreService load
INFO: Failed to load from the backing store, [path removed]\war\WEB-INF\appengine-generated\local_db.bin
java.io.EOFException
    at java.io.ObjectInputStream$BlockDataInputStream.readFully(ObjectInputStream.java:2699)
    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1935)
    at java.io.ObjectInputStream.defaultReadObject(ObjectInputStream.java:479)
... more stacktrace lines ... 
```

这种情况始终如一地发生。我正在使用 App Engine SDK 1.7.4 和 Eclipse 插件。我还在使用 Objectify 3.1 来实现持久性。

在旧的（现已关闭的）谷歌群组论坛上有一个类似的问题，但没有答案，这就是我在这里发布这个的原因。

有谁知道为什么会发生这种情况，以及是否有解决方案？

# java - 将字节数组转换为密钥

> ID：14204437
> 
> 赞同：39
> 
> 时间：2013-01-07T21:35:26.603
> 
> 标签：java, byte, secret-key

我一直在尝试将字节数组转换为其原始的 SecretKey，但我没有更多的想法了。最有希望的尝试是这个：

```
byte[] encodedKey     = Base64.decode(stringKey);
SecretKey originalKey = SecretKeySpec(encodedKey, 0, encodedKey.length, "AES") 
```

在这里找到：[将密钥转换为字符串，反之亦然](https://stackoverflow.com/questions/5355466/converting-secret-key-into-a-string-and-vice-versa)

我使用的是import javax.crypto.spec.SecretKeySpec，所以应该正确使用SecretKeySpec的构造函数，至少参考[http://docs.oracle.com/javase/1.5.0/docs/api/javax/加密/规范/SecretKeySpec.html](http://docs.oracle.com/javase/1.5.0/docs/api/javax/crypto/spec/SecretKeySpec.html)。

尽管如此，我总是得到“The Method SecretKeySpec is undefined for ... [Class Name]”——我只是不明白。

我猜这只是一个小错误，但我就是想不通。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-01-07T21:37:14.363

您需要使用`new`关键字来调用构造函数并创建对象。

```
SecretKey originalKey = new SecretKeySpec(encodedKey, 0, encodedKey.length, "AES"); 
```

当您尝试在没有 的情况下调用它时`new`，编译器认为它可能是您在该类中定义的方法，因此您的错误消息。

# html - HTML5：如何使用 AngularJS 将焦点设置在列表中的文本输入上

> ID：14204446
> 
> 赞同：6
> 
> 时间：2013-01-07T21:35:43.623
> 
> 标签：html, input, focus, angularjs

我使用带有 ng-repeat 指令的 AngularJS 将对象数组显示为列表。

```
<li ng-repeat="cue in cues" class="form-inline">
    <input type="text" ng-model="cues[$index].text" class="input-xlarge"/>
    {{cue.isNewest}}
</li> 
```

属性“isNewest”仅在数组的一个元素上为真。我想将键盘焦点设置在该项目的文本输入上。我怎么能用 AngularJS 做到这一点？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-07T23:27:42.270

这是另一个使用 attrs.$observe 的指令实现：

```
myApp.directive('focus', function () {
  return function (scope, element, attrs) {
    attrs.$observe('focus', function (newValue) {
      newValue === 'true' && element[0].focus();
      // or, if you don't like side effects (see @Christophe's comment):
      //if(newValue === 'true')  element[0].focus();
    });
  }
}); 
```

请注意，插入的 DOM 属性值（即`{{cue.isNewest}}`）始终计算为字符串，因此将原因`newvalue`与字符串`'true'`而不是关键字进行比较`true`。

HTML：

```
<input type="text" ng-model="cues[$index].text" focus="{{cue.isNewest}}"
 class="input-xlarge" />{{cue.isNewest}} 
```

这个[小提琴](http://jsfiddle.net/mrajcok/Xktuz/)也有一个方法来切换数组中的哪个项目应该有焦点。

注意，如果你不加载 jQuery，我们需要`element[0].focus()`在链接函数中使用（不是`element.focus()`），因为 jqLit​​e 没有 focus() 方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-07T21:54:37.807

由于您将操作 DOM，因此您需要创建一个指令。就像是：

```
var app = angular.module('quirli', []);
app.directive('focusable', function() {
    return {
        restrict: 'A',
        scope: {
            focusable: '@'
        },
        link: function(scope, elm, attrs) {
            scope.$watch('focusable', function (value) {
                if (value) {
                    elm[0].focus();
                }
            });
        }
    };
}); 
```

**html:**

```
<html ng-app="quirli" lang="en">
....  
<input type="text" ng-model="cues[$index].text" class="input-xlarge" focusable="{{cue.isNewest}}"/> 
```

**注：**未经测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T21:44:16.483

AngularJS 中没有特殊功能可以接收焦点。您可以在控制器中使用 $watch 来解决此问题，也可以使用指令来解决。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-19T15:15:46.317

其他建议的答案对我来说可以工作 9/10 次，但很快我就开始体验“$digest already in progress”的乐趣。

我有 asgoth 和 Mark Rajcok 先前答案的略微修改版本。基本上，您注入 $timeout 依赖项并将 focus() 调用放在 timeout(...) 中。IIRC ng-focus 也是如此。

```
var app = angular.module('cgeers', []);
app.directive('focus', ["$timeout", function ($timeout) {
    return {
        restrict: 'A',
        link: function (scope, element, attrs) {
            scope.$watch(attrs.focus, function (value) {
                if (value) {
                    $timeout(function() { element[0].focus(); });
                }
            });
        }
    };
}]); 
```

# c# - 从 CSV 创建 XML 文件

> ID：14204451
> 
> 赞同：1
> 
> 时间：2013-01-07T21:36:17.043
> 
> 标签：c#, csv, xelement

我是 C# 的新手，我所有的编码都是文件观察器，当某个文件出现在文件夹中时会触发和事件，但最近我被赋予了从 CSV 文件生成 XML 文件的任务。

我做了一些谷歌搜索，我确实找到了一些`File.ReadAllLines`用于读取 csv 文件然后用于`XElement`创建 XML 文件的代码

……………………………………………………………………………………………………………………

```
string[] source = File.ReadAllLines("DailyEZETaranTrades.csv");
source = source.Skip(2).Take(source.Length - 1).ToArray();

            XElement cust = new XElement("GenevaLoader",
                from str in source.Skip(2).Take(source.Length - 1)
                let fields = str.Split(',')

                select new XElement("Buy_New",
                    new XElement("RecordID", fields[0].Replace(" ", "")),
                    new XElement("Portfolio", fields[1].Replace(" ", "")),
                    new XElement("Broker", fields[2].Replace(" ", "")),
                    new XElement("Custodian", fields[3].Replace(" ", "")),
                    new XElement("Transaction", fields[4].Replace(" ", "")),
                    new XElement("Status", fields[5].Replace(" ", "")),
                    new XElement("SecurityType", fields[6].Replace(" ", "")),
                    new XElement("Security", fields[7].Replace(" ", "")),
                    new XElement("SecurityDescription", fields[8].Replace(" ", "")),
                    ....
                    ....
                    .... 
```

这很好用，除了我的 cvs 文件会有不同的类别……例如，有些行是 BUY，有些是 SELL。如何将 CSV 解析为包含 BUY 或 SELL 文本的列，然后使用条件语句进行检查，如果它是 BUY ... 编写一组 XML，如果是 SELL，编写另一组XML 并继续直到 EOF ？

我已经阅读了一些页面，似乎 LINQ 是这样的？

如果您需要更多我的代码即时使用我会发布它。

# c++ - 从 C++ 中的链表中删除节点

> ID：14204458
> 
> 赞同：1
> 
> 时间：2013-01-07T21:36:36.057
> 
> 标签：c++, visual-c++, linked-list

我正在尝试学习 C++，但我有一点困惑。

我从中学习的文本告诉我，如果我想删除一个类型的节点，`const T&`我应该首先创建一个该节点类型的新指针，然后使用内置的 C++ 删除它`delete[]`。但是，如果我只是将要删除节点的上一个元素的链接设置到要删除的节点的下一个元素的链接，会发生什么？就像是：

```
*p = node.previous;
p-> next = node.next; 
```

或者这会导致内存泄漏吗？

我很困惑，因为我在其他地方读到永远不会删除指针，但我正在使用的示例代码具有以下内容：

```
Node<T> *p = node-to-be-deleted;
delete p; 
```

删除节点的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T00:34:33.660

假设您的节点如下所示：

```
struct Node
{
    Node*  previous;
    Node*  next;

    SomeType data;
}; 
```

然后：

```
*p = node.previous;
p-> next = node.next; 
```

然后**是**。这将导致内存泄漏。
它还`p->next->prev`指向错误的节点。

> 我很困惑，因为我在其他地方读到永远不会删除指针，但我正在使用的示例代码具有以下内容：

是的，最好的方法是“永不删除指针”。但这必须与一些背景相一致。您不应该手动删除指针，因为指针应该由控制其生命周期的对象管理。这些对象中最简单的是智能指针或容器。但是对于这种情况，这将是矫枉过正（因为您正在创建容器）。

在创建容器（列表）时，您需要自己进行管理（注意 C++ 已经有几个丢失的类型 std::list 用于 t 类型的值列表或 boost::ptr_list 用于指针列表到 T)。但尝试自己做是一个很好的练习。

这是一个初学者制作列表及其生成的评论的代码审查示例：

[http://codereview.stackexchange.com：C++](http://codereview.stackexchange.com)中[的链表](https://codereview.stackexchange.com/q/13060/507)

我希望这有助于解释如何创建和删除对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T21:40:18.367

```
Node* p = new Node; // This is how you allocate a node
delete p; // This is how you delete it 
```

delete[] 运算符应该用于动态分配的**数组**：

```
Node* nodelist = new Node[ 4 ]; // nodelist is now a (dynamically allocated) array with 4 items.
delete[] nodelist; // Will delete all 4 elements (which is actually just one chunk of memory) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T21:40:24.303

```
void deleteNode( Node * p )
{
    Node * temp = p->next;
    p->data = p->next->data;
    p->next = temp->next;
    free(temp);
} 
```

这是我几个月前做的事情。

```
template <class T>
T LinkedList<T>::remove(int pos)
{
    if (pos < 1 || pos > size)
    {
        throw pos;
    }
    ListNode * temp;
    if (pos == 1)
    {
        temp=head;
        head = head->next;
    }
    else
    {
        int i=1;
        ListNode * prev = head;

        while(i<pos-1)
        {
            i++;
            prev=prev->next;
        }
        temp = prev->next;

        prev->next = (prev->next)->next;

    }
    --size;
    return temp->item;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T21:47:51.577

仅当实现析构函数来更新周围实例的和指针时，直接删除`Node`才有意义，例如：`Node``previous``next``Node`

```
Node::~Node()
{
    if (previous) previous->next = next;
    if (next) next->previous = previous;
}

Node *p = node-to-be-deleted;
delete p; 
```

否则，您必须先更新`Node`指针，然后再删除有`Node`问题的指针，例如：

```
Node *p = node-to-be-deleted;
if (p->previous) p->previous->next = p->next;
if (p->next) p->next->previous = p->previous;
delete p; 
```

话虽如此，最好的方法是不要一开始就手动实现链表。在 C++ 中，请改用`std::list`容器，让它为您处理这些细节。

# jquery - FancyBox 图像分组

> ID：14204462
> 
> 赞同：0
> 
> 时间：2013-01-07T21:36:41.450
> 
> 标签：jquery, fancybox, gallery, grouping

我正在使用最新的 Fancybox，并且我试图在一页上拥有多个画廊。我尝试了`rel`分组属性和下面的示例。不管照片不分组。我已经尝试了我在论坛中看到的所有建议，但无济于事。我尝试将此片段作为页面中的脚本，但它也不起作用：

```
$(".fancybox").fancybox();

<a class="fancybox" data-fancybox-group="cover" href="images/horse1L.jpg"></a> 
```

你能提供的任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T21:58:43.477

这种结构使用`rel`like

```
<p> Gallery one</p>
<a rel="gallery01" class="fancybox" href="one_01.jpg">Gallery one / image 01</a>
<a rel="gallery01" class="fancybox" href="one_02.jpg">Gallery one / image 02</a>

<p>Gallery two</p>
<a rel="gallery02" class="fancybox" href="two_01.jpg">Gallery two / image 01</a>
<a rel="gallery02" class="fancybox" href="two_02.jpg">Gallery two / image 02</a> 
```

...使用此脚本：

```
$(document).ready(function() {
  $(".fancybox").fancybox(); // fancybox
}); // ready 
```

... 应该管用！！

检查此**[JSFIDDLE](http://jsfiddle.net/k7e3n/)**并将其与您的代码进行比较。

还要确保将 js 和 css fancybox 文件都更新到了最新版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T22:04:24.067

从我的 script.js 文件中删除以下行允许 rel 属性正常工作：

`$('.list4>li>figure>a, .list6>li>figure>a').attr('rel','appendix') .prepend('<span class="sitem_over"><strong></strong></span>')`

# php - 如何执行命令“set serveroutput on”

> ID：14204470
> 
> 赞同：2
> 
> 时间：2013-01-07T21:37:05.460
> 
> 标签：php, oracle, sqlplus

如何通过php在oracle（或mysql）中执行“set serveroutput on”命令？需要通过php查看程序的输出

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T21:50:50.680

不要使用 SET SERVEROUTPUT ON - 这是一个 SQLPLUS 命令（不是 SQL 语句）。

SET SERVEROUTPUT ON 不能在 PHP 或任何其他语言中用作 SQL 语句 - 它只是解释 SQLPLUS 程序的命令。（其他程序也可能解释此命令，但这是为了与 SQLPLUS 兼容。）

改用这样的东西：（假设`$db`是您的 PHP 数据库连接句柄）：

```
$sql = <<ADD YOUR SQL STATEMENT HERE>>;

if ($db->Execute($sql) === false) {
    echo "<B>ERROR:</B> An error occurred";
    echo "MESSAGE: " . $db->ErrorMsg()  . "<BR>";

}
else {
    //Successful
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T09:49:35.927

如果您想查看 sql 脚本的输出，我建议您启动一个执行 sqlplus 的 shell。您可以将 sqlplus 日志导出到文本文件并在读取文本文件后。

# javascript - 如何确定最后点击的是哪个按钮？

> ID：14204471
> 
> 赞同：0
> 
> 时间：2013-01-07T21:37:06.967
> 
> 标签：javascript, html, d3.js

如何确定最后点击的是哪个按钮？例如我有：

```
<input type="button" name= "zoomer" value="State View" id= 'States View' onclick="zoomout()"/>
<input type="button" name= "zoomer" value="County View" id= 'Counties View' onclick="countyView()"/> 
```

但是，每当我更改 RADIO 按钮时，我希望它考虑最后单击的按钮（县视图或州视图）。是否有可能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T21:42:30.197

`var last_clicked`您可以保留一个在函数`zoomout()`和中更新的全局 JavaScript 变量`countyView()`，然后检查`last_clicked`更改单选按钮时的值。或者，您可以使用分号终止对事件中函数的调用`onclick`，然后将值分配给事件字符串`last_clicked`内部`onclick`（尽管我不推荐它，因为它会使您的代码混乱）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T21:44:09.930

```
var lastClicked = "none";

function zoomout()
{
    // your code
    lastClicked = "states";
}

function countyView()
{
    //your code
    lastClicked = "county";
}

if(lastClicked == "county")
{

}
else if(lastClicked == "states")
{

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T21:45:44.440

可以通过使用外部变量来实现，例如

```
var clickedLast = "";

function zoomout() {
  clickedLast = "stateview";
  ... your code ...
}

function countyView() {
  clickedLast = "countyview";
  ... your code ...
} 
```

# javascript - 创建新的 div onClick，如果尚未创建

> ID：14204474
> 
> 赞同：0
> 
> 时间：2013-01-07T21:37:15.670
> 
> 标签：javascript, jquery, scope

```
launchApp: function() {
    $("#app1").on('click', function() {
        if (win === undefined) {
            var win = new AppWindow();
        }
    });
} 
```

每次我单击我`<div/>`的 with 时`ID #app1`，都会创建一个新的`<div/>`（窗口）。我的问题是`win`总是这样`undefined`！

如何在不分配`win`全局范围的情况下执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T21:40:55.343

让win成为“会员功能”？像这样

```
launchApp: function() {
    var that = this;
    $("#app1").on('click', function() {
        if (that.win === undefined) {
            that.win = new AppWindow();
        }
    });
} 
```

您能否提供有关您的问题的更多详细信息以更好地为您提供帮助？

# c# - 使用下拉列表 C# 进行高级搜索

> ID：14204475
> 
> 赞同：0
> 
> 时间：2013-01-07T21:37:30.997
> 
> 标签：c#, asp.net, sql

我正在做一个高级搜索代码..我有 6 个下拉列表，用户可以从一个或所有下拉列表中选择一个或多个值，或者选择“-”值，这意味着没有选择值..我的代码正在运行结果是所有值的联合..我怎样才能只找到相交？

我的意思是，如果我从第一个下拉列表中选择 (Asia)，从第二个下拉列表中选择 (Arabic)，我的结果是所有亚洲国家和所有使用阿拉伯语的国家.. 我怎么能只有亚洲国家会谈阿拉伯语 >> 相交？

```
if (!Class1.Search_Continent.Equals("-"))//DropDownList1.SelectedValue.ToString();
        {
            sunc.conn.Open();
            SqlCommand cmd1 = new SqlCommand("Select Country_name FROM Country WHERE Continent_name='" + DropDownList1.SelectedValue + "'", sunc.conn);
            SqlDataReader dr1;
            dr1 = cmd1.ExecuteReader();
            while (dr1.Read())
            {DropDownList9.Items.Add(dr1["Country_name"].ToString());}
            sunc.conn.Close();

            if (!Class1.Search_Country.Equals("-"))//DropDownList2.SelectedValue.ToString();
            {
                RemoveDuplicateItems(DropDownList9);
                sunc.conn.Open();
                SqlCommand cmd2 = new SqlCommand("Select Country_name FROM Country WHERE Country_name='" + DropDownList2.SelectedValue + "'", sunc.conn);
                SqlDataReader dr2;
                dr2 = cmd2.ExecuteReader();
                while (dr2.Read())
                {DropDownList9.Items.Add(dr2["Country_name"].ToString());}
                sunc.conn.Close();

                if (!Class1.Search_City.Equals("-"))//DropDownList3.SelectedValue.ToString();
                {
                    RemoveDuplicateItems(DropDownList9);
                    sunc.conn.Open();
                    SqlCommand cmd3 = new SqlCommand("Select Country_name FROM City WHERE City_name='" + DropDownList3.SelectedValue + "'", sunc.conn);
                    SqlDataReader dr3;
                    dr3 = cmd3.ExecuteReader();

                    while (dr3.Read())
                    {
                        DropDownList9.Items.Add(dr3["Country_name"].ToString());
                    }

                    //dr3.Close();
                    //conn3.Close();
                    sunc.conn.Close();
                    if (!Class1.Search_Religion.Equals("-"))//DropDownList4.SelectedValue.ToString();
                    {
                        RemoveDuplicateItems(DropDownList9);
                        //SqlConnection conn4 = new SqlConnection(@"Data Source=AK-PC\MSSQLSERVER1;Initial Catalog=DB;Integrated Security=True");
                        //conn4.Open();
                        sunc.conn.Open();
                        SqlCommand cmd4 = new SqlCommand("Select Country_name FROM Religion WHERE Religion_name='" + DropDownList4.SelectedValue + "'", sunc.conn);
                        SqlDataReader dr4;
                        dr4 = cmd4.ExecuteReader();

                        while (dr4.Read())
                        {
                            DropDownList9.Items.Add(dr4["Country_name"].ToString());
                        }

                        //dr4.Close();
                        //conn4.Close();
                        sunc.conn.Close();
                        if (!Class1.Search_Type.Equals("-"))//DropDownList5.SelectedValue.ToString();
                        {
                            RemoveDuplicateItems(DropDownList9);
                            //SqlConnection conn5 = new SqlConnection(@"Data Source=AK-PC\MSSQLSERVER1;Initial Catalog=DB;Integrated Security=True");
                            //conn5.Open();
                            sunc.conn.Open();
                            SqlCommand cmd5 = new SqlCommand("Select Country_name FROM Country WHERE Type_of_government='" + DropDownList5.SelectedValue + "'", sunc.conn);
                            SqlDataReader dr5;
                            dr5 = cmd5.ExecuteReader();

                            while (dr5.Read())
                            {
                                DropDownList9.Items.Add(dr5["Country_name"].ToString());
                            }

                            //dr5.Close();
                            //conn5.Close();
                            sunc.conn.Close();
                            if (!Class1.Search_Language.Equals("-"))//DropDownList6.SelectedValue.ToString();
                            {
                                RemoveDuplicateItems(DropDownList9);
                                //SqlConnection conn6 = new SqlConnection(@"Data Source=AK-PC\MSSQLSERVER1;Initial Catalog=DB;Integrated Security=True");
                                //conn6.Open();
                                sunc.conn.Open();
                                SqlCommand cmd6 = new SqlCommand("Select Country_name FROM Language WHERE Language_name='" + DropDownList6.SelectedValue + "'", sunc.conn);
                                SqlDataReader dr6;
                                dr6 = cmd6.ExecuteReader();

                                while (dr6.Read())
                                {
                                    DropDownList9.Items.Add(dr6["Country_name"].ToString());
                                }

                                //dr6.Close();
                                //conn6.Close();
                                sunc.conn.Close();

                                if (DropDownList1.SelectedValue.Equals("-") && DropDownList2.SelectedValue.Equals("-") &&
                                    DropDownList3.SelectedValue.Equals("-") && DropDownList4.SelectedValue.Equals("-") &&
                                    DropDownList5.SelectedValue.Equals("-") && DropDownList6.SelectedValue.Equals("-"))
                                {
                                    Button2.Enabled = false;
                                    Label1.Text = "you have to choose from the dropdown list";
                                }
                                else if (DropDownList9.SelectedValue.Equals("-"))
                                {
                                    Button2.Enabled = false;
                                    Label1.Text = "No result ";
                                }
                            }
                        }
                    }
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T22:05:16.963

通常，您希望在单个查询中执行此操作，例如：

```
SELECT Country_Name
FROM Country C
    INNER JOIN City CTY on (CTY.Country_Name = C.Country_Name)
    INNER JOIN Religion R on (R.Country_Name = C.Country_Name
WHERE ((@City ='') or (CTY.City_Name = @City))
  AND ((@Religion ='') or (R.Religion_Name = @Religion))
  AND ((@Government = '') or (C.Type_of_Government = @Government)) 
```

然后将@City、@Religion 和@Government 作为参数传递给查询。如果传入任何单个参数，则 WHERE 子句将对其进行过滤；如果该参数为空，则忽略。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T21:42:47.500

我会更改您的代码，以便它根据不同的选项创建一个查询，然后只返回该查询的结果。

例如：

```
string query = "Select Country_name FROM Country WHERE Continent_name='" + DropDownList1.SelectedValue + "'";
if (!Class1.Search_Country.Equals("-"))
   query+= " and Country_name='" + DropDownList2.SelectedValue + "'";

SqlCommand cmd1 = new SqlCommand(query, sunc.conn); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T21:47:17.090

您必须修改查询，如下所示。

```
SqlCommand cmd1 = new SqlCommand("Select Country_name FROM Country WHERE (Continent_name='" + DropDownList1.SelectedValue + "' or Continent_name=Continent_name) AND (Country_name='" + DropDownList2.SelectedValue + "' OR Country_name=Country_name) AND (City_name='" + DropDownList3.SelectedValue + "' OR City_name=City_name) AND (Religion_name='" + DropDownList4.SelectedValue + "' OR Religion_name=Religion_name) AND (Type_of_government='" + DropDownList5.SelectedValue + "' OR Type_of_government=Type_of_government) AND (Language_name='" + DropDownList6.SelectedValue + "' OR Language_name=Language_name)", sunc.conn); 
```

希望这可以帮助！！

# excel - VBA宏比较两列和颜色突出显示单元格的差异

> ID：14204477
> 
> 赞同：3
> 
> 时间：2013-01-07T21:37:47.093
> 
> 标签：excel, vba

我想为彼此不同的单元格着色；在这种情况下 colA 和 colB。这个函数可以满足我的需要，但看起来重复、丑陋和低效。我不精通VBA编码；有没有更优雅的方式来编写这个函数？

**编辑** 我试图让这个函数做的是： 1\. 突出显示 ColA 中不同或不在 ColB 中的单元格 2\. 突出显示 ColB 中不同或不在 ColA 中的单元格

```
 Sub compare_cols()

    Dim myRng As Range
    Dim lastCell As Long

    'Get the last row
    Dim lastRow As Integer
    lastRow = ActiveSheet.UsedRange.Rows.Count

    'Debug.Print "Last Row is " & lastRow

    Dim c As Range
    Dim d As Range

    Application.ScreenUpdating = False

    For Each c In Worksheets("Sheet1").Range("A2:A" & lastRow).Cells
        For Each d In Worksheets("Sheet1").Range("B2:B" & lastRow).Cells
            c.Interior.Color = vbRed
            If (InStr(1, d, c, 1) > 0) Then
                c.Interior.Color = vbWhite
                Exit For
            End If
        Next
    Next

    For Each c In Worksheets("Sheet1").Range("B2:B" & lastRow).Cells
        For Each d In Worksheets("Sheet1").Range("A2:A" & lastRow).Cells
            c.Interior.Color = vbRed
            If (InStr(1, d, c, 1) > 0) Then
                c.Interior.Color = vbWhite
                Exit For
            End If
        Next
    Next

Application.ScreenUpdating = True

End Sub 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T15:22:51.790

啊，是的，那是蛋糕，我整天都在做。实际上，您的代码看起来很像我这样做的方式。虽然，我选择使用整数循环而不是使用“For Each”方法。我可以在您的代码中看到的唯一潜在问题是 ActiveSheet 可能并不总是“Sheet1”，而且已知 InStr 会给出有关 vbTextCompare 参数的一些问题。使用给定的代码，我会将其更改为以下内容：

```
Sub compare_cols()

    'Get the last row
    Dim Report As Worksheet
    Dim i As Integer, j As Integer
    Dim lastRow As Integer

    Set Report = Excel.Worksheets("Sheet1") 'You could also use Excel.ActiveSheet _
                                            if you always want this to run on the current sheet.

    lastRow = Report.UsedRange.Rows.Count

    Application.ScreenUpdating = False

    For i = 2 To lastRow
        For j = 2 To lastRow
            If Report.Cells(i, 1).Value <> "" Then 'This will omit blank cells at the end (in the event that the column lengths are not equal.
                If InStr(1, Report.Cells(j, 2).Value, Report.Cells(i, 1).Value, vbTextCompare) > 0 Then
                    'You may notice in the above instr statement, I have used vbTextCompare instead of its numerical value, _
                    I find this much more reliable.
                    Report.Cells(i, 1).Interior.Color = RGB(255, 255, 255) 'White background
                    Report.Cells(i, 1).Font.Color = RGB(0, 0, 0) 'Black font color
                    Exit For
                Else
                    Report.Cells(i, 1).Interior.Color = RGB(156, 0, 6) 'Dark red background
                    Report.Cells(i, 1).Font.Color = RGB(255, 199, 206) 'Light red font color
                End If
            End If
        Next j
    Next i

    'Now I use the same code for the second column, and just switch the column numbers.
    For i = 2 To lastRow
        For j = 2 To lastRow
            If Report.Cells(i, 2).Value <> "" Then
                If InStr(1, Report.Cells(j, 1).Value, Report.Cells(i, 2).Value, vbTextCompare) > 0 Then
                    Report.Cells(i, 2).Interior.Color = RGB(255, 255, 255) 'White background
                    Report.Cells(i, 2).Font.Color = RGB(0, 0, 0) 'Black font color
                    Exit For
                Else
                    Report.Cells(i, 2).Interior.Color = RGB(156, 0, 6) 'Dark red background
                    Report.Cells(i, 2).Font.Color = RGB(255, 199, 206) 'Light red font color
                End If
            End If
        Next j
    Next i

Application.ScreenUpdating = True

End Sub 
```

我做了不同的事情：

1.  我使用了上面描述的整数方法（与“for each”方法相反）。
2.  我将工作表定义为对象变量。
3.  我在 InStr 函数中使用 vbTextCompare 而不是它的数值。
4.  我添加了一个 if 语句来省略空白单元格。提示：即使工作表中只有一列超长（例如，单元格 D5000 被意外格式化），所有列的 usedrange 也会被视为 5000。
5.  我使用 rgb 代码作为颜色（这对我来说更容易，因为我在这个隔间里有一张备忘单固定在我旁边的墙上哈哈）。

好吧，总结一下。祝你的项目好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-11-21T09:52:33.043

'比较两列并突出差异

```
 Sub CompareandHighlight()

        Dim n As Integer
        Dim valE As Double
        Dim valI As Double
        Dim i As Integer

        n = Worksheets("Indices").Range("E:E").Cells.SpecialCells(xlCellTypeConstants).Count
        Application.ScreenUpdating = False

        For i = 2 To n
        valE = Worksheets("Indices").Range("E" & i).Value
        valI = Worksheets("Indices").Range("I" & i).Value

            If valE = valI Then

            Else:

               Worksheets("Indices").Range("E" & i).Font.Color = RGB(255, 0, 0)

            End If
        Next i

    End Sub 
```

' 我希望这可以帮助你

# c# - 向 Lambda 函数添 加断点

> ID：14204478
> 
> 赞同：3
> 
> 时间：2013-01-07T21:37:51.070
> 
> 标签：c#, sharepoint, lambda

我正在尝试在我的 c# 代码中调试一个 Lamba，但似乎无论我在 lambda 中的哪个位置放置断点，它都不会进入它。我已经把它放在第一个括号，最后一个括号，return，我想看到的变量，我能想到的一切，但仍然没有。

当尝试调试 lambda 之外的任何行时，它没有问题，我做错了什么？

Lambda 如下：

```
clientProgramList.Items.OfType<SPListItem>().Where(x =>
{
    DateTime doa = x.GetValue<DateTime>("client1");
    DateTime dod = x.GetValue<DateTime>("client2");
    bool date = DateCompare.IsValidClient(enteredDate, endDate, doa, dod); 
    return date;
}); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-07T21:39:47.997

只是调用该`Where`方法根本不会*执行*谓词。

由于 LINQ 的延迟执行方法，在您尝试迭代返回值之前不会执行谓词 - 在这种情况下，您似乎忽略了这一点。

所以如果你这样做：

```
var items = clientProgramList.Items.OfType<SPListItem>().Where(x =>
{
    DateTime doa = x.GetValue<DateTime>("client1");
    DateTime dod = x.GetValue<DateTime>("client2");
    bool date = DateCompare.IsValidClient(enteredDate, endDate, doa, dod); 
    return date;
});

int count = items.Count(); 
```

那么当你尝试执行时，你的断点应该被击中`Count()`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-07T21:39:57.407

当您调用该`LINQ`查询时，不会调用 lambda，而是仅构造查询。`Where`子句被延迟评估（仅当您开始迭代项目时）。尝试`ToList()`在查询末尾添加，看看是否命中断点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T22:07:51.977

您不能像调试其他代码一样调试 lambda。lambda 是“惰性”执行的，这意味着在使用该值之前不会对其进行评估。在那之前，它只是一个排队查询。

如果您尝试追踪的错误是 ArgumentException，则很可能意味着它`clientProgramList.Items`为 null，您可以使用调试器轻松检查这一点。

# opengl - 如何为 GL_QUAD_STRIP 指定纹理坐标？

> ID：14204486
> 
> 赞同：1
> 
> 时间：2013-01-07T21:38:50.983
> 
> 标签：opengl

我试图了解如何为 GL_QUAD_STRIP 指定纹理坐标。

我已经设法让事情为一个四边形工作：

```
float vertices[] = { 0.0f, 0.0f, 1.0f,   +1.0f, 0.0f, 0.0f,  // bottom line
                     0.0f, 1.0f, 1.0f,   +1.0f, 1.0f, 0.0f}; // top line

unsigned int indices[] = {2, 0,  // x =  0
                          3, 1}; // x = +1

float textureCoordinates[] = { 1.0f, 0.0f, 
                               0.0f, 0.0f,
                               1.0f, 1.0f,
                               0.0f, 1.0f};
...

glBindBuffer(GL_ARRAY_BUFFER, 0); // unbinds any buffer object previously bound
glTexCoordPointer(2, GL_FLOAT, 0, textureCoordinates);
glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, ibufferid);
glDrawElements(GL_QUAD_STRIP, 4, GL_UNSIGNED_INT, BUFFER_OFFSET(0)); 
```

这是结果的外观（带有图像的白色矩形，其余部分用于帮助解释）： ![在此处输入图像描述](../Images/47a6427be6ab62df0ca6ff6baf232ade.png)

但是我不明白选择 textureCoordinates[] 背后的逻辑:-(。

第一个纹理坐标是(1,0)；我会假设这对应于右下角？

另外我会假设当OpenGL读取第一个索引：2时，它使用它来查找顶点：（0,1,1）：左上角。接下来它读取第一个纹理坐标：(1,0)。但如上所述，我认为这是纹理的右下角！？

然而，纹理显示为未旋转，所以这不可能！？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T23:51:42.383

就像顶点一样，纹理坐标也是根据使用的索引来选择的`glDrawElements()`。所以第一个纹理坐标不是（1,0），而是（1,1），因为第一个索引是2。顶点和坐标将根据下表，其中i =索引，v =顶点和t =纹理坐标. （我只考虑顶点的 x 和 y 坐标，因为在这种情况下 z 坐标并不重要。）

```
i   v     t
2 (0,1) (1,1)
0 (0,0) (1,0)
3 (1,1) (0,1)
1 (1,0) (0,0) 
```

如果我们把它画在一张纸上，我们可以看到这意味着坐标更有意义，因为索引很重要。（我建议您这样做！我必须这样做才能了解发生了什么。）请注意表格中的 y 坐标如何在给定索引的顶点和纹理坐标之间完美匹配。但是 x 坐标不匹配：当顶点 x = 0 时，纹理坐标 x = 1，反之亦然。我认为这会使图像看起来围绕 y 轴镜像，而不是以任何方式旋转。原始图像是什么样的？与我们在您发布的图像中看到的相比，它是否镜像，因此建筑物位于左侧？如果是这样，纹理坐标就是解释。在这种情况下，纹理坐标 2 和 3 应该交换位置。

如果您好奇，可以查看第 18 页的[OpenGL 2.1 规范，图 2.5(a)，了解为什么选择顶点索引。](http://www.opengl.org/registry/doc/glspec21.20061201.pdf)当投影到屏幕上时，它将创建一个顶点以逆时针方向指定的四边形。这很好，因为[glFrontFace()](http://www.opengl.org/sdk/docs/man2/xhtml/glFrontFace.xml)的初始值为`GL_CCW`，这意味着我们在渲染图像中看到了多边形的正面，如果启用了剔除，多边形将不会被*剔除*（参见[glCullFace()](http://www.opengl.org/sdk/docs/man2/xhtml/glCullFace.xml)）。（但默认情况下不启用剔除，因此它可能对您的情况很重要，也可能无关紧要。）

我希望这会有所帮助。如果有不清楚的地方请发表评论！

# ios - 设置 UINavigationBar 的背景图片

> ID：14204492
> 
> 赞同：1
> 
> 时间：2013-01-07T21:39:06.103
> 
> 标签：ios, storyboard, uinavigationbar, appearance, tint

我有这段代码：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    if([[UINavigationBar class] respondsToSelector:@selector(appearance)]
    {
        [[UINavigationBar appearance] setBackgroundImage:[UIImage imageNamed:@"bar-mid.png"] forBarMetrics:UIBarMetricsDefault];
    }
    //[[UINavigationBar appearance] setTintColor:[UIColor redColor]];
    return YES;
} 
```

如果我尝试将 TintColor 设置为红色（在注释的代码行中），它​​可以工作，但如果我尝试设置背景图像，它就不起作用！是的，我在“支持文件 > 图像”中有“bar-mid.png”图像。我使用故事板。这是结果：

![在此处输入图像描述](../Images/cf3472298e3a666fe344279b2719d302.png)

你能帮助我吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T22:00:03.483

我不明白为什么，但是我在 "greenNavigation.png" 和 "greenNavigation@2x.png" 中更改了两个图像的名称，我更改了`[UIImage imageNamed:@"bar-mid.png"`] `[UIImage imageNamed:@"greenNavigation.png"]`，现在它可以工作了。有人知道为什么吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-16T09:53:10.280

有时它也会发生在我身上。我使用“从硬盘中删除”选项从 xcode 中删除图像。再次从 Photoshop 保存网页。使用“将图像复制到解决方案文件夹”选项复制到 xcode。然后瞧。有用。我知道，解释不多，但它有时会起作用。也许它不喜欢图像编码或其他东西。

# javascript - 是否有设置或更新 POI lat lng 坐标值的 mapquest api 方法？

> ID：14204493
> 
> 赞同：0
> 
> 时间：2013-01-07T21:39:06.327
> 
> 标签：javascript, geocoding, mouseover, mapquest

处理该`mouseover`事件以确定是否`MQA.Poi`应`mouseover`在我的地图视口上的叠加层的回调中显示一个。我希望重用一个`MQA.Poi`，而不是每次应该显示它时都重新/实例化一个。

我基本上希望使用类似于`self.poi.setInfoContentHTML(contentHTML)`for 或`setValue`用于 MQA.Poi 或其任何父类的 API 方法来更新标记的 lat、lng。我想它会被称为 setLatlng，但我在文档中找不到这样的参考。

是否有任何用于设置或更新`MQA.Poi`坐标的 mapquest api 方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T20:06:49.943

我能够`click`使用以下代码更改 poi 的 lat/lng：

```
MQA.EventManager.addListener(poi, 'click', function(evt){
    this.setLatLng({lat:20,lng:20});
}); 
```

通过在 Chrome 中的事件函数中设置断点并`this.`在控制台中键入以列出可用方法来找到它。

# qml - 从 QAbstractListModel 继承的列表模型，列表项属性不会从 QML 更新

> ID：14204505
> 
> 赞同：1
> 
> 时间：2013-01-07T21:40:16.210
> 
> 标签：qml, qt-quick, qt5

我很难解释我的问题，所以我只是让它变得简单，并希望它能完成工作。我将 Qt5 与 QtQuick 2.0 一起使用。

我创建了一个继承自 QAbstractListModel 的 MyListModel 类，并保存 MyListItem 类型的项目。我在 QML ListView 中将其用作`model: myListModel`，并且委托`quantity`在可爱的 TextInput 框中显示来自 MyListItem 的属性。一切正常。

但是，当我更改`quantity`委托的值时，模型中的项目不会更新。我*知道*它们没有更新，因为我的`setQuantity(long desired_quantity)`函数，MyListItem 的成员，没有运行。长话短说，我不知道如何从委托中实际调用 setQuantity 函数。我可以通过添加`Q_PROPERTY(long quantity READ quantity WRITE setQuantity)`到 MyListItem 手动完成，然后使用`setContextProperty()`将`MyListItem myTemp`对象公开给 QML，然后调用`myTemp.quantity = 10`. 但很明显，如果委托不能写入数量属性（它只能从中读取），它就没有做这项工作。

有人可以指出我正确的方向吗？我觉得我已经尝试了 Qt 设计师可能期望的一切，但我一无所获。而且我找不到任何可以明确解决我的问题的文档。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T08:57:25.983

TextInput 框不会自动更新您的 c++ 模型，您必须自己执行此操作。您可以通过向您的模型添加一个插槽或 Q_INVOKABLE 方法来做到这一点：

```
//add a slot to you model
public slots:
 setDataInModel(const int index, const QVariant &value);
//or add Q_INVOKABLE method:
public:
 Q_INVOKABLE setData(const int index, const QVariant &value); 
```

您必须实现其中一种方法，以便它更改模型中相应的数据行。更新后不要忘记在方法内部调用**dataChanged方法。**然后，当 TextInput 更新时，您必须从 QML 委托手动调用这些方法：

```
onAccepted: {
  model.setDataInModel(index, text)
} 
```

这里的**index**是在每个委托中定义的属性，而 text 是来自 TextInput 的文本。

# esb - Mule ESB cxf 客户端配置

> ID：14204511
> 
> 赞同：1
> 
> 时间：2013-01-07T21:40:25.717
> 
> 标签：esb, mule

我正在使用 mule cxf 客户端来使用 Web 服务。如何更改 mule cxf 客户端的默认配置？我需要的是更改“Keep-Alive 标头”。其他选项是更改 http 协议版本以将其设置为 1.0，如果可能的话？谢谢你。

```
<cxf:jaxws-client operation="updateParcelDetails"
                  clientClass="com.pb.pts.service.endpoint.TrackingserviceV10"
                  port="ParcelTrackingServiceEndpoint_V1_0Port"
                  wsdlLocation="classpath:wsdl/TrackingV10.wsdl" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T22:25:35.307

这由 HTTP 传输控制，而不是 CXF 模块。

[HTTP 传输文档](http://www.mulesoft.org/documentation/display/MULE3USER/HTTP+Transport+Reference#HTTPTransportReference-OutboundendpointTheHTTPoutboundendpointallowsMuletosendrequeststoexternalserversorMuleinboundHTTPendpointsusingtheHTTPprotocol.)说：

> 的属性`<outbound-endpoint...>`
> 
> **保持活力**| `boolean`| 控制套接字连接是否保持活动状态。如果设置为 true，将返回连接器中指定的连接超时的 keep-alive 标头。如果设置为 false，将返回“Connection: close”标头。

你试过了吗？

# javascript - 避免与服务器发送事件相同的数据

> ID：14204515
> 
> 赞同：1
> 
> 时间：2013-01-07T21:40:40.917
> 
> 标签：javascript, server-sent-events

我正在使用服务器发送的事件通过 Web 应用程序将新数据推送给用户。我想避免显示两次相同的数据。我的想法是按照 Mozilla 文档的建议使用 e.lastEventId。

**test_stream.php 中显示的数据：**

id：3 数据：测试

**JS 脚本：**

```
var source = new EventSource('test_stream.php');
source.onmessage = function(e) {
    var now_id = e.lastEventId;

    if(last_id != now_id) {
        var last_id = e.lastEventId;
        document.body.innerHTML += e.data + '<br>';
    }
}; 
```

**问题 ：**

“测试”每 3 秒显示一次，而不是仅显示一次，直到有新数据出现。我得到了 ID，但看起来如果我在 js 脚本中的“if”不起作用......有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T21:55:20.273

```
var source = new EventSource('test_stream.php');
var last_id;
source.onmessage = function(e) {
    var now_id = e.lastEventId;

    if(last_id != now_id) {
        last_id = e.lastEventId;
        document.body.innerHTML += e.data + '<br>';
    }
}; 
```

# c - 在c中检查时间

> ID：14204516
> 
> 赞同：0
> 
> 时间：2013-01-07T21:40:42.783
> 
> 标签：c, time

我想检查一个进程是否仍在运行 - 如果是，请更新当前时间 - 如果没有返回函数 bc 进程已经死亡......如果进程没有死亡并且停止限制已经过去，那么你退出循环但似乎 currTime 没有更新......

```
int g_iStopLimit = 30; //declared globally

/////process gets signaled to be killed but may take a while to close cleanly...

time_t startTime, currTime;
time(&startTime);
currTime = time(NULL);

do //check to see if process gets killed
{
    if (kill(g_StatusInstance[i].pid, 0) == 0)  //some global array
    {
        currTime = time(NULL);
    }
    else
    {
        return;
    }

}while(currTime >= (startTime + g_iStopLimit));

////send a stronger signal and call kill - use recursion and call function over until it kills it 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T21:44:02.497

```
while(currTime >= (startTime + g_iStopLimit)); 
```

应该

```
while(currTime <= (startTime + g_iStopLimit)); 
```

最初，`startTime`并且`currTime`几乎相同，因此除非`kill`花费不寻常的时间，否则循环在第一次迭代后结束。

# php - 通过php将下拉菜单的值保存到cookie中

> ID：14204525
> 
> 赞同：0
> 
> 时间：2013-01-07T21:41:01.867
> 
> 标签：php, html, cookies

我正在尝试将下拉菜单的值保存到 cookie 中！但是cookie显示了不同的值！这是它的php代码：

```
if (isset($_POST['myselection'])){

$chooseone=$_POST['myselection'];
setcookie ("chosenlang",$chooseone, $t);
$setobr=$_COOKIE['chosenlang'];

} 
```

这是 HTML 部分：

```
<form method="post" action="">

<select name="myselection" id="myselection" onchange="this.form.submit();">
<option value="choose">choose your language:</option>
<option value="Eng">Eng</option>
<option value="Esp">Esp</option>
</select>

</form> 
```

问题是 $setobr 延迟显示 $chosenone；这意味着当我打印两者时，它首先显示相反的选择，然后是相同的选择！

有谁知道这是为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T21:46:59.790

你能仔细检查一下这条线吗

```
setcookie ("chosenlang",$myselection, $t); 
```

我希望它应该是 $chooseone 而不是 $myselection。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T21:52:48.647

当您使用 设置 cookie 时`setcookie()`，您是在告诉浏览器在下一个请求和之后的任何请求中发回此值，直到 cookie 被更改、过期或被删除。

`$_COOKIE`此函数调用不会更新。这是故意的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T22:15:25.280

这不起作用：

```
 setcookie("chosenlang", $chooseone, $t);
    $setobr = $_COOKIE['chosenlang']; 
```

超[`$_COOKIE`全局^(*文档*)](http://php.net/%24_cookie)仅包含作为请求一部分的 cookie。由于您只是为响应设置该 cookie，因此它将仅*在下一个*请求中可用。

精简它*可能*是您正在寻找的：

```
 setcookie("chosenlang", $chooseone, $t);
    $setobr = $_COOKIE['chosenlang'] = $chooseone; 
```

小心。也使用手册，它通常解释这些事情。[http://php.net/$_cookie](http://php.net/%24_cookie)

# macos - 在 Windows 中访问名称无效的文件

> ID：14204528
> 
> 赞同：3
> 
> 时间：2013-01-07T21:41:23.470
> 
> 标签：macos, winapi, filenames, createfile, shared-directory

我在 OS X 10.8 主机上的 VirtualBox 中运行 Windows 7。主机有一个共享文件夹，里面有一个名为的文件`>>>FILE<<<`。显然，OS X 本身对这样的文件名没有问题。`<`不幸的是，由于名称中的s 和s ，我似乎无法在 Windows 7 中打开这些文件`>`。在 C 中，此调用失败：

```
CreateFileW(
    L"\\\\VBOXSVR\\ft1\\>>>FILE<<<",
    GENERIC_READ,
    FILE_SHARE_READ,
    NULL,
    OPEN_EXISTING,
    FILE_ATTRIBUTE_NORMAL,
    NULL
    ); 
```

`GetLastError`返回`ERROR_INVALID_NAME`(123)。如果我将文件名更改为`FILE`，我会得到一个有效的句柄，一切都很好。

Windows 中是否有一种已知方法可以访问名称中包含无效字符的文件？假设一个生产环境没有对主机文件系统的直接写访问权限。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T22:07:16.743

@jcophenha 的答案是正确的。但是，如果您阅读[@jcopenha 链接到的页面](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365247%28v=vs.85%29.aspx#win32_file_namespaces)，它会声明`\\?\`前缀仅用于本地路径。您必须`\\?\UNC\`对 UNC 路径使用前缀，例如：

```
L"\\\\?\\UNC\\VBOXSVR\\ft1\\>>>FILE<<<" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T23:17:09.047

Windows 文件名中不允许使用and`<`字符。`>`所以这个文件不能在Win32下打开。

[命名约定](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365247.aspx#naming_conventions)文档列出了以下保留字符：

> *   <（小于）
> *   >（大于）
> *   ： （冒号）
> *   "（双引号）
> *   /（正斜杠）
> *   \（反斜杠）
> *   | （垂直条或管）
> *   ? （问号）
> *   *（星号）

Windows 在这方面与 *nix 系统有很大不同。在 *nix 上，对于文件中可以使用的字符，通常没有这样的操作系统强制限制。正如我的一个朋友曾经在他试图删除一个名为`*`并遭受最不幸后果的文件时发现的那样。

现在，可以想象这些限制在使用本机 API 时不适用。您可以尝试使用[`NtCreateFile`](http://msdn.microsoft.com/en-us/library/bb432380.aspx). 这可能只是工作！

# objective-c - 为什么 presentViewController:animated:completion: 崩溃？

> ID：14204529
> 
> 赞同：0
> 
> 时间：2013-01-07T21:41:24.603
> 
> 标签：objective-c, cocoa-touch, ios5, ios6

我在客户 iPhone（运行 iOS 5.1）上发生了奇怪的崩溃，我在 iOS 6 上使用以下代码完全没有问题：

```
- (IBAction)projectButtonPressed:(id)sender
{
   MEProjectViewController *viewController = [[MEProjectViewController alloc] initWithNibName:@"MEProjectViewController" bundle:nil];
   MEProjectNavigationViewController *navigationController = [[MEProjectNavigationViewController alloc] initWithRootViewController:viewController];
navigationController.navigationBar.barStyle = UIBarStyleBlack;
   //iOS 6
   if ([self respondsToSelector:@selector(presentViewController:animated:completion:)])
       [self presentViewController:navigationController animated:YES completion:NULL];
   else
       [self presentModalViewController:navigationController animated:YES];
} 
```

崩溃日志将右花括号显示为导致崩溃的行：

```
Incident Identifier: F261ECD3-29DF-4360-B5AB-6C1DD0906D6A
CrashReporter Key:   cce2db7ca2a68093009446fb47f71ea8c3991922
Hardware Model:      iPhone4,1
Process:         MagicEye-iPhone [855]
Path:            /var/mobile/Applications/1D9D4CB5-FA72-41A5-B9A7-D44BBB2417E2/MagicEye-iPhone.app/MagicEye-iPhone
Identifier:      MagicEye-iPhone
Version:         ??? (???)
Code Type:       ARM (Native)
Parent Process:  launchd [1]

Date/Time:       2013-01-07 20:14:12.348 +0000
OS Version:      iPhone OS 5.1 (9B179)
Report Version:  104

Exception Type:  EXC_CRASH (SIGABRT)
Exception Codes: 0x00000000, 0x00000000
Crashed Thread:  0

Last Exception Backtrace:
0   CoreFoundation                  0x378eb88f 0x37832000 + 759951
1   libobjc.A.dylib                 0x35df1259 0x35de8000 + 37465
2   CoreFoundation                  0x378eb789 0x37832000 + 759689
3   CoreFoundation                  0x378eb7ab 0x37832000 + 759723
4   UIKit                           0x3427e639 0x33f94000 + 3057209
5   UIKit                           0x3427e7a7 0x33f94000 + 3057575
6   UIKit                           0x3427e50f 0x33f94000 + 3056911
7   UIKit                           0x3420f0ed 0x33f94000 + 2601197
8   UIKit                           0x3417d4b3 0x33f94000 + 2004147
9   UIKit                           0x3405ae01 0x33f94000 + 814593
10  UIKit                           0x33fd0dbf 0x33f94000 + 249279
11  UIKit                           0x33ff5629 0x33f94000 + 398889
12  UIKit                           0x33fb9d7d 0x33f94000 + 155005
13  UIKit                           0x3407c4dd 0x33f94000 + 951517
14  UIKit                           0x33fc255d 0x33f94000 + 189789
15  UIKit                           0x33fc240b 0x33f94000 + 189451
16  UIKit                           0x3407c4a3 0x33f94000 + 951459
17  UIKit                           0x34031873 0x33f94000 + 645235
18  UIKit                           0x340311b7 0x33f94000 + 643511
19  UIKit                           0x3407ad89 0x33f94000 + 945545
20  UIKit                           0x340794eb 0x33f94000 + 939243
21  MagicEye-iPhone                 0x00069e21 -[MEMainViewViewController_iPhone projectButtonPressed:] (MEMainViewViewController_iPhone.m:203)
22  CoreFoundation                  0x378453fd 0x37832000 + 78845
23  UIKit                           0x33fb2faf 0x33f94000 + 126895
24  UIKit                           0x33fb2f6b 0x33f94000 + 126827
25  UIKit                           0x33fb2f49 0x33f94000 + 126793
26  UIKit                           0x33fb2cb9 0x33f94000 + 126137
27  UIKit                           0x33fb35f1 0x33f94000 + 128497
28  UIKit                           0x33fb1ad3 0x33f94000 + 121555
29  UIKit                           0x33fb14c1 0x33f94000 + 120001
30  UIKit                           0x33f9783d 0x33f94000 + 14397
31  UIKit                           0x33f970e3 0x33f94000 + 12515
32  GraphicsServices                0x3274f22b 0x3274a000 + 21035
33  CoreFoundation                  0x378bf523 0x37832000 + 578851
34  CoreFoundation                  0x378bf4c5 0x37832000 + 578757
35  CoreFoundation                  0x378be313 0x37832000 + 574227
36  CoreFoundation                  0x378414a5 0x37832000 + 62629
37  CoreFoundation                  0x3784136d 0x37832000 + 62317
38  GraphicsServices                0x3274e439 0x3274a000 + 17465
39  UIKit                           0x33fc5e7d 0x33f94000 + 204413
40  MagicEye-iPhone                 0x00028937 main (main.m:16)
41  MagicEye-iPhone                 0x000288d0 start + 40

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libsystem_kernel.dylib          0x35d6a32c 0x35d59000 + 70444
1   libsystem_c.dylib               0x31eb8208 0x31e6b000 + 315912
2   libsystem_c.dylib               0x31eb1298 0x31e6b000 + 287384
3   libc++abi.dylib                 0x354bdf64 0x354b7000 + 28516
4   libc++abi.dylib                 0x354bb346 0x354b7000 + 17222
5   libobjc.A.dylib                 0x35df1350 0x35de8000 + 37712
6   libc++abi.dylib                 0x354bb3be 0x354b7000 + 17342
7   libc++abi.dylib                 0x354bb44a 0x354b7000 + 17482
8   libc++abi.dylib                 0x354bc81e 0x354b7000 + 22558
9   libobjc.A.dylib                 0x35df12a2 0x35de8000 + 37538
10  CoreFoundation                  0x37841506 0x37832000 + 62726
11  CoreFoundation                  0x37841366 0x37832000 + 62310
12  GraphicsServices                0x3274e432 0x3274a000 + 17458
13  UIKit                           0x33fc5e76 0x33f94000 + 204406
14  MagicEye-iPhone                 0x00028930 main (main.m:16)
15  MagicEye-iPhone                 0x000288c8 start + 32

Thread 1 name:  Dispatch queue: com.apple.libdispatch-manager
Thread 1:
0   libsystem_kernel.dylib          0x35d5a3a8 0x35d59000 + 5032
1   libdispatch.dylib               0x34b44f04 0x34b41000 + 16132
2   libdispatch.dylib               0x34b44c22 0x34b41000 + 15394

Thread 2:
0   libsystem_kernel.dylib          0x35d6acd4 0x35d59000 + 72916
1   libsystem_c.dylib               0x31e73f36 0x31e6b000 + 36662
2   libsystem_c.dylib               0x31e73cc8 0x31e6b000 + 36040

Thread 3:
0   libsystem_kernel.dylib          0x35d6acd4 0x35d59000 + 72916
1   libsystem_c.dylib               0x31e73f36 0x31e6b000 + 36662
2   libsystem_c.dylib               0x31e73cc8 0x31e6b000 + 36040

Thread 4 name:  WebThread
Thread 4:
0   libsystem_kernel.dylib          0x35d5a004 0x35d59000 + 4100
1   libsystem_kernel.dylib          0x35d5a1fa 0x35d59000 + 4602
2   CoreFoundation                  0x378bf3ec 0x37832000 + 578540
3   CoreFoundation                  0x378be124 0x37832000 + 573732
4   CoreFoundation                  0x3784149e 0x37832000 + 62622
5   CoreFoundation                  0x37841366 0x37832000 + 62310
6   WebCore                         0x335010f0 0x33458000 + 692464
7   libsystem_c.dylib               0x31e7972e 0x31e6b000 + 59182
8   libsystem_c.dylib               0x31e795e8 0x31e6b000 + 58856

Thread 5 name:  com.apple.CFSocket.private
Thread 5:
0   libsystem_kernel.dylib          0x35d6a570 0x35d59000 + 71024
1   CoreFoundation                  0x378c363a 0x37832000 + 595514
2   libsystem_c.dylib               0x31e7972e 0x31e6b000 + 59182
3   libsystem_c.dylib               0x31e795e8 0x31e6b000 + 58856

Thread 0 crashed with ARM Thread State:
    r0: 0x00000000    r1: 0x00000000      r2: 0x00000001      r3: 0x00000000
    r4: 0x00000006    r5: 0x3edc8d98      r6: 0x00000002      r7: 0x2fe24a58
    r8: 0x00000000    r9: 0x00000000     r10: 0x3f560f60     r11: 0x00000024
    ip: 0x00000148    sp: 0x2fe24a4c      lr: 0x31eb820f      pc: 0x35d6a32c
  cpsr: 0x00000010 
```

有什么提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T07:36:29.063

终于用 iOS 5.1 模拟器找到了答案：自动布局！

```
*** Terminating app due to uncaught exception 'NSInvalidUnarchiveOperationException', reason: 'Could not instantiate class named NSLayoutConstraint' 
```

尽管将目标的部署目标设置为 4.3，但我没有收到任何编译器警告/错误，说明自动布局当然仅适用于 iOS 6。当您选择 nib 中的视图并设置时，您只会收到编译器错误再次在 Document Versioning 下部署到 iOS 4.3。相当混乱。

# jwt - Java 的 Json Web 令牌示例

> ID：14204532
> 
> 赞同：10
> 
> 时间：2013-01-07T21:41:46.547
> 
> 标签：jwt

HPW 的 Java 中是否有一个示例程序来创建标头，为 JWT（服务帐户）设置声明以便我获得访问令牌？

以下 URL 看起来很接近：
[https](https://developers.google.com/accounts/docs/OAuth2ServiceAccount#libraries)
://developers.google.com/accounts/docs/OAuth2ServiceAccount#libraries 但我一直在寻找任何示例程序。

有人有帮助链接吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-20T18:30:42.737

来自[http://code.google.com/p/jsontoken/](http://code.google.com/p/jsontoken/)

```
svn checkout http://jsontoken.googlecode.com/svn/trunk/ jsontoken-read-only 
```

还有一个完整的例子：

[https://code.google.com/p/gwdg-java/](https://code.google.com/p/gwdg-java/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-05-30T19:24:29.733

JJWT 旨在成为 JVM 和 Android 上最容易使用和理解的 JWT 库：

[https://github.com/jwtk/jjwt](https://github.com/jwtk/jjwt)

# qt - 在 MainWindow 中显示两个小部件

> ID：14204533
> 
> 赞同：0
> 
> 时间：2013-01-07T21:41:53.627
> 
> 标签：qt

我是 Qt 的新手。就目前而言，我有一张带按钮的桌子`btn`。单击按钮时，`setCentralWidget(view)`将接管窗口，因此我再也看不到表格了。但是，如果我删除`setCentralWidget(view)`，单击按钮时不会显示任何内容。

有没有办法可以在同一个窗口中显示两者？拆分或停靠？

（我删除了与我的问题无关的代码）

```
MainWindow::MainWindow()
{
    //etc

    packet = new QTabWidget;
    setCentralWidget(packet)
}

//other code

void MainWindow::create(const QString &a)
{
      QTableWidget* table = new QTableWidget;
      int tabIndex = packet->addTab(table, a);
      packet->setCurrentIndex(tabIndex);

      table->setRowCount(1);
      table->setColumnCount(2);

      table->setHorizontalHeaderLabels(QString("a;Simulator").split(";"));"));

      table->setItem(0,0,new QTableWidgetItem(a));

      QPushButton *btn = new QPushButton("load", this);
      connect(btn, SIGNAL(clicked()), this, SLOT(sim()));
      table->setCellWidget(0,1, btn);
}

void MainWindow::sim()
{
    QGraphicsScene* scene = new QGraphicsScene(QRect(-10, -10, 100, 50));
    QGraphicsView* view = new QGraphicsView();
    scene->addText("Network");
    view->setScene(scene);
    view->setGeometry(QRect(10, 10, 100, 50));

    setCentralWidget(view);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T21:51:04.757

您应该查看[QMdiArea](https://qt-project.org/doc/qt-4.8/qmdiarea.html)类 - 它被设计用作可以有许多内部小部件的主窗口的中央小部件。它还具有多种布局样式 - 在该页面上向下滚动以查看示例。

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T08:31:52.330

你应该继承 QWidget。例如，制作您自己的 MyWidget 类。例如，此类将在拆分器中包含一个 QGraphicsView 和一个 QTabWidget。并在您的 MainWindow 中将中央小部件设置为 MyWidget 的一个实例。

# ios - 伊瓦尔的问题

> ID：14204534
> 
> 赞同：2
> 
> 时间：2013-01-07T21:41:59.510
> 
> 标签：ios, cocoa-touch

我将 UIToolbar 子类化，因为我将在我的应用程序中重用它。UIToolbar 使用委托协议：

```
//
// UIToolbarCustom.h
//

#import <UIKit/UIKit.h>

@protocol UIToolbarCustomDelegate

@required
- (void)tab:(UIBarButtonItem *)sender;
- (void)ok:(UIBarButtonItem *)sender;

@end

@interface UIToolbarCustom : UIToolbar {

    id <UIToolbarCustomDelegate> delegate;

}

@property (strong, nonatomic) id delegate;

@end 
```

斯坦福 iOS 开发课程老师建议显式声明所有 ivars 前缀，如下划线，例如：

```
@implementation UIToolbarCustom

@synthesize delegate = _delegate;

@end 
```

但是，在这个指定的场景中，它给了我一个错误：

```
error: property 'delegate' attempting to use ivar '_delegate'... 
```

如果我使用，代码工作得很好：

```
 @synthesize delegate = __delegate; or
 @synthesize delegate; 
```

这里发生了什么？UIToolbar 类中是否有一个名为 _delegate 的私有实例变量？

**更新**

感谢大家的所有澄清和建议，我学到了很多东西。原来我是 iOS 开发的新手（这是我的第一个应用程序的第二个版本，所以我正在努力做正确的事=p）。按照提示，我提出了这个新的头文件：

```
//
// Toolbar.h
//

#import <UIKit/UIKit.h>

@protocol ToolbarDelegate

@required
- (void)tab:(UIBarButtonItem *)sender;
- (void)ok:(UIBarButtonItem *)sender;

@end

@interface Toolbar : UIToolbar

@property (strong, nonatomic) id delegate;

@end 
```

笔记：

1.  类前缀已删除。

2.  委托声明已被删除（我使用的是 ios 委托教程代码，但代码示例使用的是较旧的 xcode 版本，需要声明）。

3.  合成被移除了，我也不知道我们不再需要合成我们的属性了。

PS：显然代码不起作用，因为ivar问题。我要改名字，所以不用合成，反正也不知道用什么名字……

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T21:51:05.480

> 这里发生了什么？UIToolbar 类中是否有一个名为 _delegate 的私有实例变量？

是的，这正是问题所在。您需要为您的实例变量提供一个不同的名称。`__delegate`将起作用，或者您可以在名称前加上 3 个字母前缀（见最后一段）。

请注意，您已将 ivar 声明为`delegate`，然后在 synthesize 语句中告诉编译器使用`_delegate`. 实际上，这意味着您的`delegate`ivar 根本没有被使用。在任何情况下，如果您正在为 iOS（而不是 32 位 Mac）编写代码，就像您一样，您不需要在子类的 @interface 部分中显式声明实例变量，因为编译器会自动为你。

最后，将您自己的子类命名为以“UI”开头的名称是不好的形式，因为 UI 前缀是为属于 UIKit 的类保留的。您应该使用自己的 3 个字母前缀，否则根本没有前缀。问题是未来版本的 UIKit 可能会包含一个名为“UIToolbarCustom”的类，而您的子类会与它发生冲突。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T21:51:23.750

自从去年 Xcode 4.3 出来之后，你就不需要综合你的属性了。它由编译器为您完成（生成一个 ivar，并在其名称中添加前导下划线）。这意味着您也不需要声明 ivar。如果这样做，请务必将其命名为`_delegate`.

所以，你真正需要的是这一行：

```
@property (strong, nonatomic) id<UIToolbarCustomDelegate> delegate; 
```

**更新**：请参阅[Andrew Madsen 的](https://stackoverflow.com/a/14204661/839965)完整故事答案。原来 UIToolbar 有自己的名为`_delegate`. 谁知道！

# c# - 线程在没有锁定的情况下进行通信

> ID：14204536
> 
> 赞同：3
> 
> 时间：2013-01-07T21:42:02.077
> 
> 标签：c#, locking

如果我可以保证我的整个应用程序中只有一种方法会写入某个变量，那么我可以允许我的应用程序中的其他方法安全地读取该值吗？

如果是这样，我可以在不锁定变量的情况下摆脱那个特技吗？

在这种情况下，我正在做（或尝试做或想要做的）是让一个线程中的一种方法将值放入变量中，然后其他线程中的其他方法将读取该值并做出决定.

一个非常好的选择是锁定写入，同时允许读取。

在这里[查看有关锁定的 MSDN 页面](http://msdn.microsoft.com/en-us/library/c5kehkcz%28v=VS.100%29.aspx)，但没有看到这样做的方法。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-07T21:47:39.710

与往常一样，这在很大程度上取决于上下文。

*   在紧密循环中读取的变量可能存储在寄存器或本地缓存中，因此除非您有“围栏”，否则不会注意到任何变化；`volatile`将解决此问题，但作为副作用而不是明确的意图；大多数人（包括我）无法正确定义什么`volatile` *意思*- 所以要非常小心地将它用作“修复”。
*   超大类型（大型结构）不会是原子的（用于读取或写入） - 并且无法安全处理而没有撕裂的风险
*   一个对象或值可能涉及多个子值；如果它们没有原子地改变，它可能会导致问题

但是，您*可能会*发现`Interlocked`无需`lock`. 同时，无**竞争者**的速度快得离谱，甚至有`lock`竞争者的速度也快得**惊人**。坦率地说，我不确定你给出的想法是否值得：一个单位几乎可以肯定是足够快的，只要你首先在外面做想法，**只有**当你知道你想要做的改变时.**`lock`**`lock`**`lock``lock`******

 ******也有*，* `ReaderWriterLockSlim`但实际上*提高*性能的情况很少 - 根据我的经验，最简单的方法通常是最快的，意思是要么`lock`要么`Interlocked`。`ReaderWriterLockSlim`是一个更复杂的野兽，专为更复杂的场景而设计，因此有一点开销。数量不多，但足以让它值得仔细观察*。*******

# php - 将类函数注册为全局

> ID：14204538
> 
> 赞同：0
> 
> 时间：2013-01-07T21:42:05.843
> 
> 标签：php, nusoap

我想在 NuSOAP 下注册一个类方法，但不是将它注册为它的成员，我宁愿它在全局范围内。这是一些代码来描述我的意思（显然不起作用）：

```
class SOAPInterface
{
        public function Authenticate($walkid,$asdf)
        {
                return 7;
        }
}

        $namespace = '';
        $server = new soap_server();
        $server->debug_flag = false;
        $server->configureWSDL("WackyWsdl", $namespace,"my_wsdl_url");
        $server->wsdl->schemaTargetNamespace = $namespace;

        $server->register('SOAPInterface.Authenticate',                    // method name
          array('ContractorId' => 'xsd:int', 'Password'=>'xsd:string'),          // input parameters
          array('return' => 'xsd:int'),    // output parameters
          $namespace,                         // namespace
         $namespace . '#Authenticate',                   // soapaction
          'rpc',                                    // style
          'encoded',                                // use
          'Some doc'        // documentation
        );

        $HTTP_RAW_POST_DATA = isset($GLOBALS['HTTP_RAW_POST_DATA'])
                  ? $GLOBALS['HTTP_RAW_POST_DATA'] : '';
        $server->service($HTTP_RAW_POST_DATA);
        $this->autoRender = false;
        exit(); 
```

在这个例子中，我想`Authenticate`被称为`Authenticate`，而不是`SOAPInterface.Authenticate`。有什么简单的方法可以做到吗？

# objective-c - 如何将块参数传递给采用块的方法

> ID：14204539
> 
> 赞同：1
> 
> 时间：2013-01-07T21:42:12.657
> 
> 标签：objective-c, objective-c-blocks

我想声明一个将块作为参数的方法，以便在解除警报时执行，所以有如下内容。但无法找到将块参数传递给 onDismiss 部分的语法：

```
- (void) notifyUserOfProblemWithDismissBlock: ( (^)()) block
{
    [UIAlertView showAlertViewWithTitle: @"whatever"
                            message: nil
                  cancelButtonTitle: nil
                  otherButtonTitles:[NSArray arrayWithObject:     NSLocalizedString(@"BUTTON_OK", nil)]
                          onDismiss:^(int buttonIndex){
                              block;
                          }
                           onCancel:^ {}];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T21:45:12.207

如果您要传递兼容的块类型，则只需使用其参数名称：

```
...
onDismiss:theBlock
... 
```

否则（**这是您遇到的情况**），将其包装到另一个块中，在该块中您调用最初作为参数传入的块：

```
...
onDismiss:^(int btnIdx) {
    theBlock();
}
... 
```

此外，如果你不打算在一个块中做任何事情，如在 中`onCancel:`，你可以通过`nil`或`NULL`那里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T21:47:17.060

要将名为“block”的块直接传递给 UIAlertView 方法，它需要具有与该方法期望的解除块相同的签名（相同的返回类型、编号和方法类型）。既然没有，您可以传递一个具有正确签名的块，然后在该块的主体中*​​调用*您的块。您快到了。您缺少的关键是调用块的语法是：

堵塞（）;

所以，这样做

```
- (void) notifyUserOfProblemWithDismissBlock:(void(^)(void)) block
{
    [UIAlertView showAlertViewWithTitle:@"whatever"
                                message:nil
                      cancelButtonTitle:nil
                      otherButtonTitles:@[NSLocalizedString(@"BUTTON_OK", @"BUTTON_OK")]
                              onDismiss:^(int buttonIndex) {
                                  block();
                              }
                               onCancel:^{}];
} 
```

# java - 如何更改 Eclipse 哈希码生成器的素数

> ID：14204541
> 
> 赞同：-1
> 
> 时间：2013-01-07T21:42:23.923
> 
> 标签：java, eclipse, hashcode

[我读到](https://stackoverflow.com/questions/1835976/what-is-a-sensible-prime-for-hashcode-calculation/2816747#2816747)使用另一个素数然后 31 来生成哈希码更好。如何将`hashCode`生成器的 Eclipse 中的值更改为另一个值，然后是 31？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T22:09:45.390

这可能太明显了，但除非您生成大量覆盖 equals 和 hashCode 的类，否则您可以手动编辑 Eclipse 代码以替换您自己的素数。

换行：

```
final int prime = 31; 
```

至

```
final int prime = 61; 
```

或任何你喜欢的素数。但是，我认为您最好还是坚持使用 31，因为任何 hashCode 的使用都可能已经过它的测试。

# build - 如何在不使用 SDK/libs 等的情况下确定应用程序的构建（x86 或 x64）

> ID：14204542
> 
> 赞同：-1
> 
> 时间：2013-01-07T21:42:26.390
> 
> 标签：build, x86, 64-bit, qualifiers, determinants

我想确定程序的构建。它可以运行也可以不运行。我也想在我的代码中确定这样的事情，而不使用任何 SDK 或来自 .net fw 等的一些准备好的东西......

怎么做？

问题不在于确切的语言。它可能引用普通/纯 C、Lisp、Basic 等...

我想知道的是“在不使用 sdk 等帮助的情况下确定”。

PS请！注意。我已经强调了“没有像 sdk 这样的现成的东西”，使用控制台和实用程序，如 'dmesg'、'dumpbin' 等......在这个 Q 中也没有意义。更多的是关于自己查看文件的二进制文件而不其他程序的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T07:21:32.877

Linux 使用“elf”可执行文件。查看[elf 规范](http://refspecs.linux-foundation.org/LSB_4.0.0/LSB-Core-generic/LSB-Core-generic/elf-generic.html)以获取有关如何直接读取文件的详细信息。

Windows 使用“pe”格式的可执行文件。有关详细信息，请参阅[pe/​​coff 规范](http://download.microsoft.com/download/9/c/5/9c5b2167-8017-4bae-9fde-d599bac8184a/pecoff_v8.docx)。

# actionscript-3 - Flash AS3 从顶部降低舞台高度

> ID：14204550
> 
> 赞同：0
> 
> 时间：2013-01-07T21:43:02.727
> 
> 标签：actionscript-3, flash

我正在尝试从顶部降低舞台高度，以使物品在特定区域下生成。HUD 在哪里。

我曾经把我的HUD放在底部，这没有造成任何问题。因为我的功能有：

`headY = Math.ceil((((stage.stageHeight - hudHeight)))/(headWidth))*Math.random())*headWidth;`

这会将 stage.stageHeight 减少 80，因此头部可以正确生成。但是，当 HUD 位于顶部时，情况并非如此。这条线目前所做的是，它使头部无法在 stageheight 下生成 - 80 像素而不是顶部。

我的问题是；如何使代码从顶部减少舞台高度。

提前致谢，

霍尔迪

关于我的问题的额外信息：我实际上要做的就是“选择”舞台的底部，将舞台留在画面之外。我只是使用 stageheight 作为控制 800 像素的指标。因此，当我操纵舞台高度时，我不必更改代码。但因为这可能是不可能的。应该有不同的方式。我希望你现在明白我的问题。如果没有，我想做的是选择 80 像素以下的所有内容。舞台的高度是 800 像素，所以我需要选择 720 像素。但是，我找不到选择底部 720 像素的方法。只有顶部 720 像素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T21:55:30.070

尽管您的问题很难理解，但答案很可能是**您无法**理解的。stageHeight 是只读的。您可以在 HTML 中设置它，甚至可以将其设置为百分比。但是您不能在 Actionscript 中更改它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T22:43:52.810

你的问题的措辞方式让你很难理解你想要什么。

我猜你想要的是生成一个给定的对象并确保它不会与你的 HUD 在同一个空间中生成。

因此，如果您的屏幕是 800 x 800 ，并且您的 HUD 占据了屏幕的整个宽度和屏幕的顶部 80 个像素，您可以尝试这样做以获得有效的 y 生成位置：

```
var headY:Number = Math.random() * (800 - 80) + 80; 
```

这将为您提供 80 - 800 的结果值；

鉴于您的变量，我建议这样做：

```
var headY:Number = Math.random() * (stage.stageHeight - hudHeight) + hudHeight; 
```

现在，根据您的代码，您似乎也在尝试确保您生成的任何内容都不会部分超出屏幕的顶部或底部，因此您需要考虑头部的高度。所以考虑这段代码：

```
var headY:Number = Math.random() * ((stage.stageHeight - headHeight) - (hudHeight + headHeight)) + (hudHeight + headHeight); 
```

不完全确定这是否是您正在寻找的东西，但这是我能根据您的问题做的最好的事情，并试图假设您想要什么。

# android - 停止振动 onDestroy

> ID：14204551
> 
> 赞同：0
> 
> 时间：2013-01-07T21:43:05.670
> 
> 标签：android, android-activity, android-vibration

我有一项活动，它会在手机启动后振动 9 秒。我希望在活动离开前台时取消振动动作。这是我当前的代码：

```
 Handler handler = new Handler();
    handler.postDelayed(new Runnable() {
        public void run() {
            // change image
             screen.setImageResource(R.drawable.yama);

             vibrateMe();
        }
    }, 9000);

        }

public void vibrateMe() {

    Vibrator vibrate = (Vibrator)getSystemService(Context.VIBRATOR_SERVICE);

    vibrate.vibrate(2000);
}

public void stopVibrating(Vibrator vibrate) {

    vibrate.cancel();
}

@Override
  public void onDestroy() {
    super.onDestroy();

}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T21:56:02.660

你想取消你的runnable？有2个选项：

*   您可以使用[handler.removeCallbacksAndMessages(null)取消所有延迟的可运行文件](https://stackoverflow.com/questions/5883635/how-to-remove-all-callback-from-a-handler)
*   您应该将 ref 保存到 runnable (Runnable vibrateRunnable = new Runnable() ... )，然后在需要时使用[handler.removeCallbacks(vibrateRunnable)将其删除](http://developer.android.com/reference/android/os/Handler.html#removeCallbacks%28java.lang.Runnable%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T22:21:58.683

您可以使用 removeCallbacksAndMessages() 取消所有回调和消息；

```
public final void removeCallbacksAndMessages (Object token) 
```

在 API 级别 1 中添加 删除所有挂起的回调帖子并发送 obj 为令牌的消息。如果 token 为 null，则所有回调和消息都将被删除。

# ruby - 如何在 Test::Unit 2.5.x 中格式化输出

> ID：14204552
> 
> 赞同：0
> 
> 时间：2013-01-07T21:43:05.923
> 
> 标签：ruby, testunit

我们刚刚从使用带有红绿色 gem 的 Test::Unit 的第一个版本转移到 Test::Unit 2.5.3 并且输出有点搞砸了。

我只想让 Test::Unit 像 RSpec 一样输出测试结果，它几乎可以，但对我来说，每当发生故障或错误时，它就会在该位置输出结果，而不是聚合所有结果并输出它们最后在测试全部运行后。

在这种情况下，Redgreen 宝石似乎没有任何作用。

有没有办法让它按照我想要的方式格式化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T02:57:30.147

在翻阅文档后发现了这一点。您必须使用以下设置创建一个 test-unit.yml 并将其粘贴到您的 rails 应用程序的根目录中

```
runner: console
console_options:
  output_level: 2
  show_detail_immediately: false 
```

# css - 如何指定一个与多个值中的一个完全匹配的 CSS 选择器？

> ID：14204553
> 
> 赞同：0
> 
> 时间：2013-01-07T21:43:22.687
> 
> 标签：css, css-selectors

我在一个表单中有多个输入元素。我想为所有具有属性“type”且值为“text”或“email”的输入元素指定一个css选择器。如何指定单个选择器？

例如

```
#ABC.XYZ .MNQ input[type="text"] {
margin-bottom: 8px;
} 
```

我知道我可以在末尾加一个逗号，然后用 type="email" 重复整个选择器。想知道是否有更短的形式可以对任何特殊运算符执行相同的操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T21:59:18.507

我很确定最快的方法是：

```
#ABC.XYZ .MNQ input[type="text"] , #ABC.XYZ .MNQ input[type="email"] {
margin-bottom: 8px;
} 
```

有一个较短的选择线会很好看；但就整体代码执行效率而言，没有区别。

# android - Android中的谷歌地图标记集群

> ID：14204554
> 
> 赞同：1
> 
> 时间：2013-01-07T21:43:33.797
> 
> 标签：android, android-mapview, android-maps

是否有任何通用方法可以在*Android 应用程序中为 Google 地图实现标记集群？*

我有一个包含大约 10,000 个位置的数据库，并且希望以更智能的方式显示它们，而不仅仅是将数千个标记倾倒在一个很少比匹配框大的显示器上......理想情况下，应该可以从网站检索标记URL，尽管从可用性的角度来看，我不确定为此使用通常的 Async 函数是否有意义。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-29T20:50:17.803

[Clusterkraf](https://github.com/twotoasters/clusterkraf/)会为你工作。示例应用程序中高级模式的选项之一是在全球范围内聚集 10,000 个随机点。集群是在后台线程上完成的，因此即使在较旧的设备上也能正常工作。让它在大型数据集上执行的关键是将“扩展边界因子（过度绘制）”设置为 0。它在我的 Galaxy Nexus 上运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-03T07:40:22.203

***下面的代码对我有用：***

**主班**

```
 MapView mMapView;
                private GoogleMap googleMap;
                ClusterManager<MyItem> mClusterManager;

                        mClusterManager = new ClusterManager<MyItem>(getActivity(), googleMap);

                        mMapView = (MapView) v.findViewById(R.id.mapView);
                        mMapView.onCreate(savedInstanceState);

                        mMapView.onResume();// needed to get the map to display immediately

                        try {
                            MapsInitializer.initialize(getActivity().getApplicationContext());
                        } catch (Exception e) {
                            e.printStackTrace();
                        }

                       googleMap = mMapView.getMap();

                       //below code use in onPost() of Asynctask
                       googleMap.moveCamera(CameraUpdateFactory.newLatLngZoom(new LatLng(currentlat,currentlng), 15));

                                        mClusterManager = new ClusterManager<MyItem>(getActivity(), googleMap);

                                        googleMap.setOnCameraChangeListener(mClusterManager);
                                        googleMap.setOnMarkerClickListener(mClusterManager);
                                        CustomRenderer customRenderer = new CustomRenderer(getActivity(), googleMap, mClusterManager);                          
                                         mClusterManager.setRenderer(customRenderer);

                                for(int i=0;i<jarray.length();i++)
                                {

                                    JSONObject jobj_root=jarray.getJSONObject(i);
                                    JSONObject j_j_record=jobj_root.getJSONObject("Record");
                                    lat=j_j_record.getDouble("latitude");
                                    lng=j_j_record.getDouble("longitude");

                                     Location loc1 = new Location("");
                                    loc1.setLatitude(temp_lat);
                                    loc1.setLongitude(temp_lng);

                                    Location loc2 = new Location("");
                                    loc2.setLatitude(lat);
                                    loc2.setLongitude(lng);

                                    float distanceInMeters = loc1.distanceTo(loc2);
                                    if(distanceInMeters<2000)
                                    {
                                        //Toast.makeText(getActivity(), " kresp="+distanceInMeters, 34).show();
                                         MyItem offsetItem = new MyItem(lat,lng);
                                            mClusterManager.addItem(offsetItem);
                                    }

                                } 
```

**CustomRenderer.class**

```
public class CustomRenderer extends DefaultClusterRenderer<MyItem>{

    private boolean shouldCluster = true;
    private static final int MIN_CLUSTER_SIZE = 1;

    public CustomRenderer(Context context, GoogleMap map,ClusterManager<MyItem> clusterManager) {
        super(context, map, clusterManager);
        // TODO Auto-generated constructor stub
    }

    public void setMarkersToCluster(boolean toCluster)
    {
        this.shouldCluster = toCluster;
    }

    @Override
    protected boolean shouldRenderAsCluster(Cluster<MyItem> cluster) {

        if(shouldCluster)
        {
            return cluster.getSize() > MIN_CLUSTER_SIZE;
        }
        else
        {
            return shouldCluster;
        }

    }

} 
```

**MyItem.class**

```
public class MyItem implements ClusterItem {
    private final LatLng mPosition;

    public MyItem(double lat, double lng) {
        mPosition = new LatLng(lat, lng);
    }

    @Override
    public LatLng getPosition() {
        return mPosition;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T07:50:33.153

我使用了这个解决方案，它对我来说效果很好，我希望它有所帮助。

[http://code.google.com/p/android-playground-erdao/wiki/PhotSpot](http://code.google.com/p/android-playground-erdao/wiki/PhotSpot)

# photoshop - 设计师向开发人员请求的文件？

> ID：14204555
> 
> 赞同：2
> 
> 时间：2013-01-07T21:43:37.790
> 
> 标签：photoshop, psd

我有一个与移动图形设计和应用程序开发有关的问题。我将使用一个平面设计师来创建应用程序的设计、外观和感觉。然后我被告知请求分层的 .psd 文件，然后传递给开发人员。

我的问题是：分层 PSD 文件是我唯一需要向开发人员请求的东西吗？

我还应该考虑哪些其他事项？

谢谢大家的帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T23:13:22.627

他们已经足够好了。层使您的设计更具可配置性。当您购买分层 PSD 图像时，您可以轻松地从该 PSD 文件中获取/删除/移动对象（即按钮）。假设你有一个按钮并且你想将它移动到某个地方，你需要一张按钮的图片（即按钮的图片层），并且分层的 PSD 文件包含你可以轻松获得的图片层。其他一切都基于您是否喜欢该设计。*就那么简单。*

# bash - 非交互式 shell 命令的历史

> ID：14204556
> 
> 赞同：3
> 
> 时间：2013-01-07T21:43:41.490
> 
> 标签：bash

我一直在寻找一种方法来记录有关命令历史的一些更详细的信息。我的主要目的是粗略记录发出的命令，以便在调试我们的应用程序问题时构建粗略的服务器时间表。 *它不是用于非常详细的审计目的。* 我遇到了[这篇文章](https://stackoverflow.com/a/948515/507606)，它提出了一种很好的修改方法，以使用有关每个命令的附加信息`PROMPT_COMMAND`来扩充日志。`history`它建议将以下内容添加到`~/.bashrc`文件中：

```
export PROMPT_COMMAND='hpwd=$(history 1); hpwd="${hpwd# *[0-9]*  }"; if [[ ${hpwd%% *} == "cd" ]]; then cwd=$OLDPWD; else cwd=$PWD; fi; hpwd="${hpwd% ### *} ### $cwd"; history -s "$hpwd"' 
```

这很棒，除了它只在`PS1`发出提示时发生。有没有办法增强它以使用非交互式外壳（我认为这是正确的术语）？

例如，我想：

```
ssh host "ls | grep home" 
```

要为`ls | grep home`on创建一个条目`host`，但由于这不是通过`PS1`提示完成的，因此链接的解决方案不足。

我调查`auditd`了一下。这是一个很棒的实用程序，但详细程度超出了我的需要。我本可以很容易地解析日志，但是管道、重定向、循环变成了一场噩梦，无法理智地重建成与`history`已经报告的内容非常相似的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T21:59:28.723

一个简单的包装器`ssh`似乎是实现这一目标的直接方法。

```
shout () {
    local host
    host=$1
    shift
    ssh "$host" <<____HERE
        echo "$@" >>\$HOME/.shout-history
        bash -c "$@"
____HERE
} 
```

或者，如果您希望包装器在本地运行，

```
shout () {
    local host
    host=$1
    shift
    echo "$@" >>$HOME/.shout-history
    ssh "$host" "$@"
} 
```

我称之为`shout`反对`ssh`它应该，你知道，安静。另请参阅[此](https://dilbert.com/search_results?terms=loud+howard)。当然，如果您是管理员，您可以简单地移动`/usr/bin/ssh`到某个不起眼的地方并强制您的用户运行`/usr/local/bin/ssh`与上述类似的内容。知识渊博的用户很容易绕过它，但如果你真的很严厉，有办法让它变得更难。

例如，如果您是远程主机的管理员，您可以强制所有用户`/usr/local/bin/shout`作为他们的 shell 运行，并用或多或少相似的东西填充它。

```
#!/bin/bash
echo "$@" >>/home/root/im.in.ur.sh.reading.ur.seekrit.cmds.lol
exec /bin/bash -c "$@" 
```

只要确保脚本文件是世界可写的，但不是世界可读的。

# azure - Azure 表存储和缓存

> ID：14204559
> 
> 赞同：7
> 
> 时间：2013-01-07T21:43:47.377
> 
> 标签：azure, azure-table-storage, azure-caching

是否值得使用 Azure 缓存预览从 Azure 表存储缓存数据？或者表存储在大规模应用程序中是否足够快？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-07T21:47:09.987

简短的回答是**视情况而定**。在我目前正在处理的应用程序中，有一些信息我们使用缓存来处理从表存储中检索数据的延迟并适应每秒所需的事务数。

我们开始提供来自表存储的信息，并且仅在我们的性能要求决定时才转向缓存。我推荐一种类似的方法：让它工作，然后让它快速。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-08T00:01:45.740

除了**罗伯特**所说的，你还应该考虑以下几点：

Windows Azure 表存储允许存储高达 100TB 的大小（以块为单位）。乍一看，如此庞大的数据似乎势不可挡。但是，表存储可以分区。Azure 控制器可以将表存储的每个分区移动到单独的服务器，从而减少任何单个服务器的负载并提高性能。

如果您的应用程序负载非常高，则频繁插入的缓存将很快接近最大缓存大小，然后缓存项逐出过程开始。在大多数情况下，频繁的缓存插入和频繁的缓存项逐出过程最终会导致**性能下降**而不是提高。然后您将需要增加缓存的最大大小，这反过来会影响您的应用程序成本（有时这可能是一个障碍）。

最后但同样重要的是，您可以使用 OData 协议访问 Windows Azure 表存储数据，并`LINQ`使用 WCF 数据服务 .NET 库进行查询；Azure 缓存没有这种能力。

**请记住，这些要点对您的情况可能有效，也可能无效。一切都取决于您的系统架构；预期负载等**

我希望我的回答能帮助您做出良好的系统架构决策。

# html - 不能在段落上设置字体系列或字体大小

> ID：14204560
> 
> 赞同：1
> 
> 时间：2013-01-07T21:43:54.090
> 
> 标签：html, css, fonts, paragraph

嗨，出于某种奇怪的原因，我无法在本段中设置字体系列或字体大小。这是代码。我试图针对所有段落，但没有任何效果，文本保持不变。这是codepen链接[http://codepen.io/anon/pen/eHiAB](http://codepen.io/anon/pen/eHiAB)，你可以看到我将所有段落的大小设置为800px，但它不起作用。

CSS：

```
#about-us {
margin: 10px auto;
background-color:#FFF;
height:800px;
width:600px;
left:125px;
position: relative;
padding: 0 55px;
line-height: 36px;

}

#about-us p {
text-align:left;
padding-top: 20px;
margin: 0 40px;
}

body {
position:relative;
}

.sidemenu{
position:absolute;
background-color: #FFf;
width:170px;
height:740px;
margin-top: 10px;
list-style:none;
text-align:left;
z-index:0;
padding:0 35px;
padding-top:60px;

}

.sidemenu li a{
color:#222222;
padding: 0em 1em;
line-height: 3em;
border-bottom: dashed 1px #696868;
display:block;
}

.sidemenu li a:hover {
color:#D68D26;
} 
```

HTML：

```
<body> <!-- start of the body-->
            <ul class="sidemenu">
                <li><a href="">About Us</a></li>
                <li><a href="">Contact Us</a></li>
                <li><a href="">FAQ</a></li>
                <li><a href="">How To Order</a></li>
                <li><a href="">Term And Agreement</a></li>
                <li><a href="">Shipping Information</a></li>
            </ul>
            <div id="about-us">

            <p><h2>About Us</h2>Lorem ipsum dolor sit amet, consectetur  .<br        />  .</p>
            </div>

            </body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T21:48:47.903

为什么要在 ap 标签内放一个 h2 语句？你应该

```
<h2>About Us</h2>
<p>Lorem ipsum dolor sit amet, consectetur </p> 
```

那么你的css文件应该读到这个

```
#about-us p {
text-align:left;
padding-top: 20px;
margin: 0 40px;
font-size: 12px; //(or whatever you want)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T21:55:27.490

您的 p 标签内的 H2 标签导致了问题。

将 h2 移到 p 标签之外，然后它会选择 font-size: 800px 样式。

# c - Thrust - 如何使用我的数组/数据 - 模型

> ID：14204562
> 
> 赞同：0
> 
> 时间：2013-01-07T21:44:02.720
> 
> 标签：c, arrays, cuda, thrust, code-complexity

我是推力（cuda）的新手，我想做一些数组操作，但我在互联网上找不到任何类似的例子。

我有以下两个数组（2d）：

```
a = { {1, 2, 3}, {4} }
b = { {5}, {6, 7} } 
```

我希望推力计算这个数组：

```
c = { {1, 2, 3, 5}, {1, 2, 3, 6, 7}, {1, 2, 3, 5}, {1, 2, 3, 6, 7} } 
```

我知道它在 c/c++ 中是如何工作的，但不知道如何说要做它。

这是我的想法，它可能如何工作：

线程 1：取 a[0] -> 用 b 扩展它。将其写入 c。

线程 2：取 a[1] -> 用 b 扩展它。将其写入 c。

但我不知道该怎么做。我可以将数组 a 和 b 写入一维数组，例如：

```
thrust::device_vector<int> dev_a;
dev_a.push_back(3); // size of first array
dev_a.push_back(1);
dev_a.push_back(2);
dev_a.push_back(3);
dev_a.push_back(1); // size of secound array
dev_a.push_back(4);

thrust::device_vector<int> dev_b;
dev_b.push_back(1); // size of first array
dev_b.push_back(5);
dev_b.push_back(2); // size of secound array
dev_b.push_back(6);
dev_b.push_back(7); 
```

和伪函数：

```
struct expand
{
  __host__ __device__
  ?? ?? (const array ai, const array *b) {
      for bi in b: // each array in the 2d array
      {
          c.push_back(bi[0] + ai[0]); // write down the array count

          for i in ai: // each element in the ai array
             c.push_back(i);

          for i in bi: // each element in the bi array
             c.push_back(i);
      }
  }
}; 
```

有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T22:19:07.103

我想在这种操作中你不会在 GPU 上获得任何速度提升，因为它需要大量的内存访问——GPU 上的操作很慢。

但是，如果您无论如何都想实现这一点：

1.  我想，出于我之前写的原因，信任不会帮助您使用现成的算法。这意味着您需要编写自己的内核，但是，您可以将内存管理留给这样。

2.  在 CPU 内存中创建数组并在准备好后将整个数组复制到 GPU 总是更快。（CPU<->GPU 复制在较长的连续数据上更快）

3.  请记住，GPU 并行运行数百个线程。每个线程都需要知道要读什么以及在哪里写。

4.  全局内存操作很慢（300-400 个时钟）。避免线程从全局内存中读取整个数组以发现它只需要最后几个字节。

所以，我可以看到你的程序。

1.  使 CPU 内存中的一维数组如下所示：

    浮点数组1[] = { 1, 2, 3, 4}; 浮点数组2[] = { 5, 6, 7}; int arr1offsets[] = {0, 2, 3, 1}; // 第一个元素的位置和子数组对的长度 int arr2offsets[] = {0, 1, 1, 2};

2.  将您的数组和偏移量复制到 GPU 并为结果及其偏移量分配内存。我想，你必须计算一个联合子数组的最大长度并为最坏的情况分配内存。

3.  运行内核。

4.  收集结果

内核可能看起来像这样（如果我正确理解你的想法）

```
__global__ void kernel(float* arr1, int* arr1offset, 
                       float* arr2, int* arr2offset, 
                       float* result, int* resultoffset)
{
  int idx = threadIdx.x+ blockDim.x*blockIdx.x;
  int a1beg = arr1offset[Idx*2];
  int a2beg = arr2offset[Idx*2];
  int a1len = arr1offset[Idx*2+1];
  int a2len = arr2offset[Idx*2+1];
  resultoffset[idx*2] = idx*MAX_SUBARRAY_LEN;
  resultoffset[idx*2+1] = a1len+a2len;

  for (int k = 0; k < a1len; ++k) result[idx*MAX_SUBARRAY_LEN+k] = arr1[a1beg+k];
  for (int k = 0; k < a2len; ++k) result[idx*MAX_SUBARRAY_LEN+a1len+k] = arr2[a2beg+k];
} 
```

这段代码并不完美，但应该做正确的事情。

# c# - 从列表中获取元素 类

> ID：14204563
> 
> 赞同：0
> 
> 时间：2013-01-07T21:44:07.647
> 
> 标签：c#, linq, list, linq-to-objects

我有一个名为 Employee 的类，它代表公司中的每个员工。

```
public class Employee
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public int Age { get; set; }
    public string Email { get; set; }
} 
```

我创建了一个新的员工列表

```
public readonly List<Employee> Employees = new List<Employee>(); 
```

现在我想通过他\她的名字从列表中找到一名员工，但我不知道如何实现这一点，因此我们将非常感谢您的帮助和感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T21:46:18.867

使用 LINQ 查询：

```
Employees.FirstOrDefault(emp => emp.FirstName == "Rune" && emp.LastName == "S"); 
```

这将为您返回该名称的第一个员工，或者如果没有找到，`null`. 要获取具有该名称的所有员工，请`Where`改用：

```
Employees.Where(emp => emp.FirstName == "Rune" && emp.LastName == "S"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T21:47:52.080

非 Linq 方法使用[`List.FindAll`](http://msdn.microsoft.com/en-us/library/vstudio/fh1w7y8z.aspx)

```
List<Employee> foundEmployees = Employees
    .FindAll(e => e.LastName.Equals(empName, StringComparison.OrdinalIgnoreCase)); 
```

使用该`Equals`方法向您展示如何忽略大小写进行搜索。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T21:45:56.453

如果您能够使用 LINQ，您可以简单地查询列表：

```
Employees.Where(e => e.FirstName == "John" || e.LastName == "Doe"); 
```

或者，您也可以很容易地遍历列表并将任何匹配项添加到另一个结果列表中：

```
List<Employee> matches = new List<Employee>();

foreach(var employee in Employees)
{
    if(employee.FirstName == "John" || employee.LastName == "Doe")
        matches.Add(employee);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-07T21:46:10.560

只需使用 LINQ

```
var employee = Employees.Where(e => e.LastName == lastname).FirstOrDefault(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-07T21:46:11.253

[这](http://msdn.microsoft.com/en-us/library/bb534803.aspx)将为您提供`IEnumerable<Employee>`姓名匹配的员工：

```
string firstName = "Bob";
string LastName = "Smith";
var employees = Employees.Where(e => e.FirstName == firstName && 
                                     e.LastName == lastName); 
```

或者使用查询语法：

```
var employees = from e in Employees
                where e.FirstName == firstName && 
                      e.LastName == lastName
                select e; 
```

如果应该只有一名员工符合该标准，则使用[`SingleOrDefault`](http://msdn.microsoft.com/en-us/library/bb549274.aspx)：

```
Employee employee = Employees.SignleOrDefault(e => e.FirstName == firstName && 
                                                   e.LastName == lastName); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-07T21:46:24.790

当您说“按他/她的名字查找”时，您的意思是指您正在寻找所有名为“John”的人吗？使用 LINQ，看起来像这样：

```
var johns = Employees.Where(e => e.FirstName == "John"); 
```

请记住，这将返回 an`IEnumerable<Employee>`而不是`IList<Employee>`. 两者之间存在许多差异。

`.Where()`是可用于查询和操作列表的[众多扩展方法之一。](http://msdn.microsoft.com/en-us/library/vstudio/9eekhta0.aspx)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-07T21:46:28.210

您可以使用循环，或使用 LINQ：

此表达式为您提供第一个姓氏为“Smith”的员工，或者`null`如果您的列表中没有人使用此姓氏：

```
var res = Employees.FirstOrDefault(e => e.LastName  == "Smith"); 
```

此循环允许您枚举所有名字为“John”的员工：

```
foreach (var employee in Employees.Where(e => e.FirstName  == "John")) {
    ...
} 
```

您还可以列出通过给定过滤器的员工列表：

```
var smiths = Employees.Where(e => e.LastName  == "Smith").ToList(); 
```

如果原始列表不包含“Smith”，则结果列表将为空。

如果您不能使用 LINQ，则可以使用普通`foreach`循环：

```
foreach (var employee in Employees) {
    if (employee.LastName == "Smith") {
        ...
    }
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-01-07T21:46:40.613

尝试使用下一个代码片段

```
var firstName = "Jon";
var lastName = "Skeet";
var employees = Employees.Where(emp => emp.FirstName == firstName && emp.LastName == lastName); 
```

如果您想准确地找到一名员工，那么您可能想要使用`Single`而不是`Where`，在我的情况下这更合理。如果您想找到符合该标准的第一个员工，请使用“First”而不是“Where”。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-01-07T21:47:41.320

[http://code.msdn.microsoft.com/101-LINQ-Samples-3fb9811b](http://code.msdn.microsoft.com/101-LINQ-Samples-3fb9811b)

查看 WHERE simple1 和 simple2 的示例。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-01-07T21:48:49.317

最好的方法是使用 LINQ：

```
var employees = Employees.Where(e => e.FirstName.Equals("RuneS")).ToArray(); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-05-08T20:14:27.027

如果您需要通配符搜索使用包含。

Employees.Where(emp => emp.FirstName.Contains("Rune") && emp.LastName.Contains("S"));

# firefox-addon - Online Addon Builder - 如何在 Firefox 的 Addon Manager 中显示扩展的自定义图标

> ID：14204567
> 
> 赞同：1
> 
> 时间：2013-01-07T21:44:17.153
> 
> 标签：firefox-addon, icons, mozilla, firefox-addon-sdk, add-on

Online Addon Builder - 如何在 Firefox 的 Addon Manager 中显示扩展的自定义图标？

我知道这是一个更笼统的问题，在我提交这个问题之前，有人会向我抛出一个链接，但我去过那里相信我......

我已经使用在线插件生成器构建了我的插件，但我还没有准备好将它提交给 AMO 进行审查，因为我觉得它需要更多的东西才能完成。我找不到与我想要使用在线插件生成器执行的操作相关的具体信息。我已经安装并配置了本地化 SDK，该 SDK 使用名为 cfx 的工具，当然还有大量文档！

问题：可以使用 package.json 设置哪些显着的值来确定插件在插件管理器中的显示方式？哪些值得注意的材料/配置无法使用 package.json 设置，我该如何实现它们？

我已经从我的代码中删除了所有警告和错误，但是我使用的是图像的硬编码路径，而在我将它作为 PageMod 对象中的争论传递给内容脚本之前。为什么？我不确定，但我知道你们中的一个人知道如何配置扩展，我可以在其中指定 chrome://ez-magnetz/data/icon16.png 或类似的东西。这比在可以更改的路径名中使用 JUID 更好。

我的小部件有一个图标，但我如何为要在 AM 中显示的扩展程序指定一个主图标？(package.json||chrome.manifest)

使用两者中的后者（chrome.manifest）我如何将它包含在我的插件中以便检测到它？（如果可能的话，为了扩展图标的目的，使用在线插件构建器）

有人可以为我提供一个基本插件的 chrome.manifest 模板吗？

我需要 install.rdf 吗？优先于配置的是： install.rdf>>>chrome.manifest>>>package.json 我注意到它们之间的设置非常相似。

我去过 XUL 学校，我看到有用的信息在我的插件的上下文中似乎已经过时了。我已经阅读了 package.json 的基本信息并实现了简单的首选项，当然还有插件的描述。

* * *

> 我的理解是，我使用 Mozilla 的在线插件生成器创建了一个引导插件。那是对的吗？我现在唯一想做的就是在插件管理器中为我的扩展显示一个个人图标！+ 我想知道用户在 AMO 上捐款的方式和选择！

* * *

感谢您提前提供任何帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T22:18:58.203

要添加图标，只需执行以下两个步骤：

1.  将您要使用的图标上传到插件的数据目录，例如“data/icon.png”

2.  在附加信息对话框中将 png 文件的相对路径作为额外的 JSON 属性添加，例如：

{“图标”：“数据/图标.png”}

请参阅此屏幕截图以了解其外观示例：

[https://dl.dropbox.com/u/44296964/Screen%20Shot%202013-01-07%20at%202.15.49%20PM.png](https://dl.dropbox.com/u/44296964/Screen%20Shot%202013-01-07%20at%202.15.49%20PM.png)

*另外：每个帖子只问一个问题。*

# javascript - 根据下拉选择填充 2 个输入

> ID：14204583
> 
> 赞同：0
> 
> 时间：2013-01-07T21:45:24.767
> 
> 标签：javascript, html

我希望根据下拉列表的选择填写 2 个字段。这是我现在使用的代码（在我的情况下有效但不起作用）：

```
<script type="text/javascript">
function updateinput(){
var e = document.getElementById("event");
var catSelected = e.options[e.selectedIndex].value;

document.getElementById("minLvl").value=catSelected;
}
</script> 
```

和相关的HTML：

```
<table>
    <tr>
        <td>Event:</td>
        <td>
          <select name="Event" id="event" onChange="updateinput();">
            <option value="option1">option1</option>
            <option value="option2">option2</option>
            <option value="option3">option3</option>
            <option value="option4">option4</option>
            <option value="option5">option5</option>
            <option value="option6">option6</option>
            <option value="option7">option7</option>
          </select>
</td>
    </tr>
    <tr>
        <td>Starting Time:</td>
        <td><input type="text" name="dateTime"/></td>
    </tr>
    <tr>
        <td>Level Range:</td>
        <td><input type="text" size="3" maxlength="3" id="minLvl"> - <input type="text" size="3" maxlength="3" id="maxLvl"></td>
    </tr>
    <tr>
        <td>Notes:</td>
        <td><textarea></textarea></td>
    </tr>
    <tr>
        <td>Create Event:</td>
        <td><input type="button" value="Create event!"></td>
    </tr>
</table> 
```

我知道我可以`e.options[e.selectedIndex].text`用来获取文本并将其放入输入中，但是有没有办法可以为每个选项添加属性，就像`<option value="option1" minLvl="1" maxLvl="10">Option1</option>`然后从中提取数据`minLvl`，`maxLvl`然后将值填充到输入中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T21:47:29.637

```
function updateinput(){
var e = document.getElementById("event");
var catSelected = this.value;

document.getElementById("minLvl").value=catSelected;
}

<select name="Event" id="event" onChange="updateinput(this);"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T22:55:07.087

我能够让它与这段代码一起工作：

```
<script type="text/javascript">
function updateinput(){
var e = document.getElementById("event");
var minLvl = e.options[e.selectedIndex].getAttribute("minLvl");
var maxLvl = e.options[e.selectedIndex].getAttribute("maxLvl");

document.getElementById("minLvl").value=minLvl;
document.getElementById("maxLvl").value=maxLvl;
}
</script> 
```

`<option value="option" minLvl="1" maxLvl="3">option</option>`

# java - Java - 通过 setter 方法设置对象变量，但我不想再次更改它

> ID：14204584
> 
> 赞同：1
> 
> 时间：2013-01-07T21:45:32.007
> 
> 标签：java, web-services, spring

我有 Spring Web Services 项目，我可以在其中访问登录的用户名。

然后，这些过程通过几个类进行，但我想做的是，当我第一次在第一类中收到用户名时，将用户名设置在用户类/bean 中。

即以下：

**我的第一个网络服务课程：**

```
 // Set the Spring Security Name of the user
    user.setSpringSecurityUsername(request.getUserId());
    String springSecurityUsername = user.getSpringSecurityUsername(); 
```

**我的用户类**

```
private String springSecurityUsername = "";
private final String windowsUsername = System.getProperty("user.name");

public String getSpringSecurityUsername() {
    return springSecurityUsername;
}

public void setSpringSecurityUsername(String springSecurityUsername) {
    this.springSecurityUsername = springSecurityUsername;
}

public String getWindowsUsername() {
    return windowsUsername;
} 
```

我希望能够创建 User bean 的新实例并设置`SpringSecurityUsername`. 然后我希望将*用户*对象传递给其他处理类，但我不希望他们能够访问用户中的 setter 方法（例如，不希望其他类能够使用`.setSpringSecurityUsername`.

我只希望能够设置一次。

有人能帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T21:48:08.167

> 我只希望能够设置一次。

听起来你应该将它传递给构造函数。在某些情况下，您将类称为 bean - 它*是否必须*是具有无参数构造函数的严格 JavaBean？或者如果你只添加一个构造函数，一切都应该为你工作吗？

将其放入构造函数而不是忽略/抛出第二次`setSpringUsername`调用的好处是您根本无法表达不正确的代码。让事情变得不可能总是比告诉人们不要去做要好:)

（这也意味着您也可以将其设为 final 字段。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T21:48:08.380

听起来初始化值应该只是一个构造函数参数，根本不应该有 setter 方法。在这种情况下，从不调用 setter 也是有效的，包括一个不带参数的构造函数和一个带参数的构造函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T21:47:22.733

用一些值在内部初始化它，然后在你的设置器中检查它是否仍然具有该值。如果是，请允许设置。如果不是，它已经被设置了——在这种情况下什么也不做。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-07T21:48:44.250

您不能阻止该方法被调用，但您可以检查它之前是否被调用过：

```
boolean usernameSet = false;

public synchronized void setSpringSecurityUsername(String springSecurityUsername) {
    if (!usernameSet) {
        this.springSecurityUsername = springSecurityUsername;
        usernameSet = true;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-07T21:50:54.620

这实际上是构建器模式的要求。你让每个 setter 返回“this”，当你想完成它时，你调用一个像“finish”这样的方法来禁用所有的 setter。像这样：

```
新的 MyClass()
   .setAge(20)
   .setWeight(200)
   .setHeight(6.0)
   。结束（）;

```

根本不是一个坏模式，它为您提供了 java 的命名参数，而不会失去不变性的优势。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-07T21:53:02.867

我会说在构造函数中设置它而不是**设置**方法。

```
public User(String userName){
    this.springSecurityUsername = userName;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-07T22:00:45.750

这是一些允许设置一次的代码：

```
private Object v;

public void setV(Object o) {
    if (v == null) 
        v = o;
} 
```

或者，如果 null 是第一组的可能值 z，请执行以下操作：

```
private Object notSer = new Object();
private Object v = notSer;

public void setV(Object o) {
    if (v == notSer) 
        v = o;
} 
```

# .net - 在 Microsoft.Win32.OpenFileDialog 上调用 ShowDialog 时出现异常

> ID：14204598
> 
> 赞同：6
> 
> 时间：2013-01-07T21:46:40.590
> 
> 标签：.net, wpf, exception

我从部署在字段中的 WPF 应用程序获取报告，当尝试显示打开文件对话框时，将引发以下 ArgumentException。

```
Exception Message:   Value does not fall within the expected range.
Method Information:  MS.Internal.AppModel.IShellItem2 GetShellItemForPath(System.String)
Exception Source:    PresentationFramework
Stack Trace
  at MS.Internal.AppModel.ShellUtil.GetShellItemForPath(String path)
  at Microsoft.Win32.FileDialog.PrepareVistaDialog(IFileDialog dialog)
  at Microsoft.Win32.FileDialog.RunVistaDialog(IntPtr hwndOwner)
  at Microsoft.Win32.FileDialog.RunDialog(IntPtr hwndOwner)
  at Microsoft.Win32.CommonDialog.ShowDialog(Window owner)
  ... 
```

问题是，到目前为止，我还无法在我的开发环境中复制它，但我收到了来自该领域的几份报告，表明此异常正在发生。

有没有人见过这个？最重要的是，您是否知道原因和/或解决方法，而不仅仅是简单地在它周围放置一个 try/catch 并指示用户再次尝试他们正在尝试做的任何事情？

作为对评论的回应，这是打开对话框的代码（不，这不是检查返回类型的问题）。从 ShowDialog 中抛出异常（请参阅堆栈跟踪）：

```
Nullable<bool> result = null;

var dlg = new Microsoft.Win32.OpenFileDialog();
dlg.DefaultExt = ".txt";
dlg.Filter = "Text Files (.txt)|*.txt|All Files|*.*";
dlg.Title = "Open File";
dlg.Multiselect = false;
dlg.InitialDirectory = GetFolderFromConfig("folders.templates");
result = dlg.ShowDialog(Window.GetWindow(this));

if (result == true)
{
    // Invokes another method here..
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-09-23T18:30:01.377

非特殊目录（例如映射的网络驱动器）也可能出现此问题。在我的例子中，我们的`%HOME%`环境变量指向一个映射的网络驱动器 (Z:)。因此，以下代码会生成相同的异常：

```
Nullable<bool> result = null;

var dlg = new Microsoft.Win32.OpenFileDialog();
dlg.DefaultExt = ".txt";
dlg.Filter = "Text Files (.txt)|*.txt|All Files|*.*";
dlg.Title = "Open File";
dlg.Multiselect = false;
dlg.InitialDirectory = Environment.GetEnvironmentVariable("Home")+@"\.ssh"; // boom
result = dlg.ShowDialog(Window.GetWindow(this)); 
```

解决方案：

```
var dlg = new Microsoft.Win32.OpenFileDialog();
dlg.DefaultExt = ".txt";
dlg.Filter = "Text Files (.txt)|*.txt|All Files|*.*";
dlg.Title = "Open File";
dlg.Multiselect = false;
dlg.InitialDirectory = System.IO.Path.GetFullPath(Environment.GetEnvironmentVariable("Home")+@"\.ssh"); // no boom
result = dlg.ShowDialog(Window.GetWindow(this)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T23:08:54.333

这真的应该归功于@Hans Passant，因为他为我指明了正确的方向。

事实证明，一旦我弄清楚问题的真正原因，在我的开发计算机上复制（和修复）这个问题是微不足道的。事实证明，问题确实是 InitialDirectory 属性被设置为某个奇怪的值。就我而言，我可以通过将 InitialDirectory 设置为“\”来复制问题；

这是解决该问题的修改后的代码：

```
 try
 {
     result = dlg.ShowDialog(Window.GetWindow(this));
 }
 catch{
     dlg.InitialDirectory = Environment.GetFolderPath(Environment.SpecialFolder.MyComputer);
     result = dlg.ShowDialog(Window.GetWindow(this));
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-15T08:25:20.807

```
 ///<summary>
      /// Tries to handle inability of user to access file dialog folder
      /// by using other folder. Shows meaningful message to 
      /// user for action on failure.
      ///</summary>
      private bool? ShowDialogSafe()
      {
        try
        {
            return dlg.ShowDialog(Window.GetWindow(this));
        }
        // reacts on rare case of bad default folder, filter only folder related excepions
        catch (Exception handledEx) when (IsInitialDirectoryAccessError(handledEx))
        {
            var original = dlg.InitialDirectory;
            var possible = Environment.GetFolderPath(Environment.SpecialFolder.Personal);// hope user has access to his own, may try Desktop
            try
            {
                dlg.InitialDirectory = possible;
                return FileDialog.ShowDialog(Window.GetWindow(this));
            }
            catch (Exception ex) when (IsInitialDirectoryAccessError(ex))
            {
                var message = string.Format("Failed to access directories '{0}' and '{1}'. Please contact system administrator.", original, possible);
                throw new IOException(message, ex);
            }
        }
    }

    /// <summary>
    /// see GetShellItemForPath(string path) http://referencesource.microsoft.com/#PresentationFramework/src/Framework/MS/Internal/AppModel/ShellProvider.cs,f0a8bc5f6e7b1503,references
    /// System.IO.FileNotFoundException: 'The network name cannot be found. (Exception from HRESULT: 0x80070043)' - no such share exsits
    /// "Access is denied. (Exception from HRESULT: 0x80070005 (E_ACCESSDENIED))"}  System.UnauthorizedAccessException - folder is forbidden
    /// System.ArgumentException: 'Value does not fall within the expected range.' - badly formatted path
    /// </summary>
    /// <param name="handledEx"></param>
    /// <returns></returns>
    private static bool IsInitialDirectoryAccessError(Exception handledEx)
        => handledEx is IOException || handledEx is UnauthorizedAccessException || handledEx is ArgumentException; 
```

# android - 片段内 textview 的 settext() 不会改变 textview

> ID：14204599
> 
> 赞同：3
> 
> 时间：2013-01-07T21:46:51.257
> 
> 标签：android, android-widget, android-fragments, textview, android-fragmentactivity

我有一个片段活动，它为 viewpager 创建了几个片段。我正在制作的第一个片段是以前作为活动的端口。在活动的 onCreate 方法之前，根据一些先前的用户输入设置一个文本视图。

然而，现在这是一个片段，onCreateView 中的相同代码忽略了 setText() 方法，并且只在 UI 元素内显示默认的 XML 布局文本。

我见过其他人有这个问题，但还没有解决。如何为片段中的文本视图设置文本，就像它在活动中用于 onCreate 的方式一样？

谢谢。

编辑：我试图设置的文本是在创建主机 FragmentActivity （制作片段）时通过意图进入的。所以

```
Activity A + String str --> 
creates FragmentActivity (gets str from intent).  --> 
Fragment 1, textView TV, TV.sestText(str); 
```

如果您需要查看代码，请参阅此示例：

[http://thepseudocoder.wordpress.com/2011/10/04/android-tabs-the-fragment-way/](http://thepseudocoder.wordpress.com/2011/10/04/android-tabs-the-fragment-way/)

[http://thepseudocoder.wordpress.com/2011/10/05/android-page-swiping-using-viewpager/](http://thepseudocoder.wordpress.com/2011/10/05/android-page-swiping-using-viewpager/)

在 Tab1Fragment 中，我在 XML 文件中添加了一个 textview，并且我试图在 Tab1Frag 的 onCreateView 方法中调用 setText。

如果我记得，它是这样的......

```
public RelativeLayout onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);     
    if (container == null) {           
        return null;
    }

    View view = inflater.inflate(R.layout.frag1_layout, null);

    title = (TextView) view.findViewById(R.id.frag1_title);  
title.setText("Success!");

return (RelativeLayout)inflater.inflate(R.layout.frag1_layout, container, false);

} 
```

# .net - Visual Studio 默认按钮属性

> ID：14204609
> 
> 赞同：3
> 
> 时间：2013-01-07T21:47:31.803
> 
> 标签：.net, winforms

我正在构建一个带有几个按钮的应用程序，我想保留整个样式，除了文本，这样我就可以重新使用它而不必重新制作按钮。

有没有办法更改默认按钮样式，所以当我添加一个新按钮时，它会采用这些属性还是必须对其进行编码？

我确信我可以按下按钮样式，但想知道 VS 是否具有这些功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T21:52:34.630

您可以创建自己的按钮作为用户控件，然后创建使用（继承）自定义按钮的按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T21:53:59.260

您可以创建按钮集合，然后使用 foreach 循环设置您希望镜像的样式。（抱歉，我现在无法访问 IDE，所以这只是从臀部）。

```
foreach (Button btn in btnCollection)
{
      btn.Text = "";
      btn.BackColor = "Whatever color you like";
} 
```

或者，您也可以创建一个用户控件并从中继承。

# mongoose - 如何更新猫鼬默认字符串模式属性修剪？

> ID：14204611
> 
> 赞同：3
> 
> 时间：2013-01-07T21:47:32.580
> 
> 标签：mongoose

我想让每个字符串属性默认设置为 true 。有办法吗？

```
?? mongoose.Schema.String -> default { trim: true }

var schema = new Schema({
  p1: { type: String },
  p2: { type: String, trim: true }
  p3: { type: String, trim: true }
  p4: { type: String }
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-26T12:25:16.000

为模式路径重用通用配置的一个好方法是使用变量来设置它们。

像这样：

```
var trimmedString = { type: String, trim: true };

var schema = new Schema({
  p1: trimmedString,
  p2: trimmedString,
  p3: trimmedString,
  p4: trimmedString
}); 
```

您还可以从为您设置默认值的函数返回定义，但允许您进行两个覆盖（或添加其他设置，如索引或默认值）。

像这样：

（使用下划线库的[默认方法](http://underscorejs.org/#defaults)）

```
var _ = require('underscore');

var stringType = function(ops) {
  return _.defaults(ops || {}, {
    type: String,
    trim: true
  });
}

var schema = new Schema({
  p1: stringType(),
  p2: stringType({ index: true }),
  p3: stringType({ default: "something" }),
  p4: stringType({ trim: false })
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-09T19:22:30.587

您可以添加一个预处理函数，如下所示（MySchema 是您调用架构的名称）：

```
MySchema.pre('save', function(next) {
  for (var fld in this) {
    this[fld] = trim(this[fld]);
  }
  next();
}); 
```

那应该这样做。

# jsf - 如何在单击 JSF 按钮时调用 JS 函数并阻止页面重新加载/导航？

> ID：14204612
> 
> 赞同：3
> 
> 时间：2013-01-07T21:47:34.627
> 
> 标签：jsf, button, primefaces, onclick

使用 JSF 创建按钮以调用 JS 函数的首选方法是什么？

实际上我使用：

```
<p:button onclick="myJSFunction();" href="#"/> 
```

但我的网址以锚符号 ( `#`) 为后缀。

是否有另一种推荐的方法来创建不会重新加载/导航到 URL 但调用 JS 函数的按钮？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T22:17:20.760

那是因为它实际上正在导航到`#`. 您需要阻止按钮执行其默认操作，即导航到当前视图，或导航到 或 中指定的`href`URL `outcome`。您可以通过添加`return false;`到末尾来实现这一点`onclick`。

```
<p:button onclick="myJSFunction(); return false;" /> 
```

或者，如果`myJSFunction()`实际返回一个`boolean`应该确定按钮是否应该继续其默认操作的，则委托给它：

```
<p:button onclick="return myJSFunction();" /> 
```

`<h:button>`工作方式完全相同，只是标准外观。

另一种方法是使用`<p:commandButton type="button">`，它生成一个`<input type="button">`没有任何导航的真实值。这样你就不需要从`onclick`.

```
<p:commandButton type="button" onclick="myJSFunction()" /> 
```

然而，这需要一个`<h:form>`（尽管将它放在任何形式之外都不会破坏任何功能）。这同样适用于`<h:commandButton>`。

# ruby-on-rails-3 - rails 3 has_one 单选按钮

> ID：14204621
> 
> 赞同：0
> 
> 时间：2013-01-07T21:47:51.757
> 
> 标签：ruby-on-rails-3, controller, radio-button, has-one

使用 has_one 在表单中创建单选按钮时遇到问题

模型

```
Class User
has_one :role
accepts_nested_attributes_for :role

Class Role
attr_accessible :name
belongs_to :user 
```

控制器

```
@user = build_role 
```

单选按钮的表单

```
<div class="field">
 <% Role.offset(1).all.each do |role_fields| %>
  <%= radio_button_tag "user[role_fields_id][]", role_fields.id, @user.role_id == role_fields.id %>
  <%= role_fields.name %>
 <% end %>
</div> 
```

得到错误

```
undefined method `role_id' for #<User id: nil, name: nil, created_at: nil, updated_at: nil> 
```

我确定我在控制器中设置了关系，为什么这不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T23:47:02.317

我认为这一行：

```
<%= radio_button_tag "user[role_fields_id][]", role_fields.id, @user.role_id == role_fields.id %> 
```

应更正此：

```
<%= radio_button_tag "user[role_fields_id][]", role_fields.id, @user.role.id == role_fields.id %> 
```

我希望这会有所帮助。

# javascript - Knockout JS：属性特定的 css 绑定表达式

> ID：14204622
> 
> 赞同：2
> 
> 时间：2013-01-07T21:47:53.827
> 
> 标签：javascript, knockout.js

请参阅以下 jsFiddle 链接：http: [//jsfiddle.net/7gS6N/](http://jsfiddle.net/7gS6N/)。

我正在尝试通过淘汰 js 执行一些简单的字段级验证。

单击“添加错误”以模拟为名称字段添加错误。

当错误添加到 Errors 集合时，css 绑定会触发，表达式的计算结果为 true 并应用 css 类。

这很好，但我怎样才能使我的 css 绑定表达式属性特定？

```
css: { error: Errors().length > 0 } 
```

我只希望 Name 字段显示 css 类。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T22:07:51.650

你需要一个额外的 observable，所以而不是

```
self.Name = ko.observable("John") 
```

你用

```
self.Name = new Field("John Smith"); 
```

其中字段具有以下结构

```
function Field(value) {
  var self = this;
  self.value = ko.observable(value);
  self.hasError = ko.observable(false);
} 
```

你的标记看起来像

```
<div data-bind="with:Name">
  <input type="text" data-bind="value: value, css: { error: hasError }" />
</div> 
```

这种策略称为**装饰**对象；在这种情况下，我将您的变量“包装”在一个类中，但是您可以从那里添加`label`,`errorMessage`以及您希望所有这些特定字段具有的其他属性。[最后，我在这里](http://jsfiddle.net/jjperezaguinaga/7gS6N/1/)用工作示例更新了你的小提琴。

# javascript - 通过批处理文件自动登录到 Windows 7/Chrome 上的网站

> ID：14204623
> 
> 赞同：9
> 
> 时间：2013-01-07T21:48:00.547
> 
> 标签：javascript, windows, google-chrome, batch-file, vbscript

我有一个批处理文件。我有案例选择。如果用户键入 26，它将打开链接 1 chrome。如果用户键入 27，它将在 chrome 中打开链接 2。

但是我还是想不通，如何使用用户名和密码自动批量登录网站。

我在谷歌上寻找这样的脚本，但没有发现任何有用的东西。我知道一点 C++，unix，（还有一些 html 和 java 脚本）我不知道是否可以使用这些语言在 windows 机器上完成，但即使可以完成，我认为与 VB 或C## 或其他一些高级语言。

我学习了如何使用包含在 bat 文件中的基本 Windows 批处理命令打开多个站点，例如：

```
start chrome.exe http://yahoo.com
start chrome.exe http://www.google.tv 
```

但是我仍然无法弄清楚实际上单击 bat 文件将如何帮助我登录网站，甚至无需输入用户名和密码。

我是否需要开始学习 VB（Visual Basic）、dot net 或 windows 批处理编程才能做到这一点。这有那么难吗.. 请帮忙。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-23T09:26:59.430

您可以尝试以下代码：

```
set WshShell = WScript.CreateObject("WScript.Shell")
call WshShell.Run("http://www.gmail.com", 1, false) 'This will open your default browser

WScript.Sleep 2000
WshShell.SendKeys "username"
WScript.Sleep 1000
WshShell.SendKeys "{TAB}"
WScript.Sleep 1000
WshShell.SendKeys "password"
WshShell.SendKeys "{TAB}"
WScript.Sleep 1000
WshShell.SendKeys "{ENTER}"
WScript.Quit() 
```

代码打开您的浏览器，等待页面加载，然后输入用户名和密码，假设光标位于右侧输入框中（例如，在**Gmail**中，它将位于**用户名**输入框上）。否则，您必须使用**TAB**导航到正确的输入框。

如果您反对在脚本文件中写入密码，请将其保存在浏览器中并使用适当的 SendKeys 方法进行登录。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2018-03-08T04:30:03.213

我为我的网站尝试了上述脚本，但只能看到登录页面无法输入用户名和密码，需要帮助

```
@if (@CodeSection == @Batch) @then

@echo off

set SendKeys=CScript //nologo //C:JScript "%~F0"
START iexplore.exe "www.gmail.com"
timeout /t 5
%SendKey% "USERNAME{TAB}"
%SendKey% "PASSWORD{Continue}"

goto :EOF

@end
// JScript section

var WshShell = WScript.CreateObject("WScript.Shell");
WshShell.SendKeys(WScript.Arguments(0)) 
```

# actionscript-3 - ActionScript 3：动态文本帮助：游戏评分

> ID：14204632
> 
> 赞同：6
> 
> 时间：2013-01-07T21:48:25.617
> 
> 标签：actionscript-3, flash, dynamic, text

我对动作脚本 3 很陌生，我现在正在尝试制作一个非常基本的游戏。但是，无论我查看多少页，我都找不到让我的游戏保持得分的有效方法：/。

我想要做的是让它每 10 秒增加 10 分（现在我用一个键替换它，看看我是否可以让它工作，但它没有）。这是我现在尝试使用的代码：

```
 var playerScore:int = 0

    stage.addEventListener(MouseEvent.CLICK,onclick);

    function updateTextFields():void{
         playerScoreText.text = ("Player Score: " + playerScore);
    }

    if(Key.isDown(Key.G)){
          playerScore++; //increase playerScore by 1
          updateTextFields();
    } 
```

playerScoreText 是动态文本的名称，任何帮助将不胜感激:)

这段代码都是在时间轴中添加的

我认为问题很可能与动态文本的创建有关，但我不确定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T21:52:57.433

听起来你想用计时器类做这样的事情。您的关键代码没有正确编写。

```
var playerScore:int = 0;
var score_timer:Timer = new Timer(10000,0);
score_timer.addEventListener(TimerEvent.TIMER,updateTextFields);
score_timer.start();
function updateTextFields(e:TimerEvent):void
{
    playerScore+=10
    playerScoreText.text = ("Player Score: " + playerScore);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T22:07:35.143

确保正确嵌入字体并且动态文本字段的颜色与背景不同。

也代替写作

```
playerScoreText.text = ("Player Score: " + playerScore); 
```

试试这个

```
playerScoreText.text = "Player Score: " + String(playerScore); 
```

# c++ - D 构建过程

> ID：14204639
> 
> 赞同：6
> 
> 时间：2013-01-07T21:48:55.300
> 
> 标签：c++, c, compilation, linker, d

在 D 中构建（编译和链接）源代码的过程与 C/C++ 有何不同，尤其是在内联函数、D 的模块系统（而不是头文件）和构建工具方面。如何在 D 中重用模板实例化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T23:18:45.297

它没有太大区别，每个模块都被编译成自己的 obj 文件，然后链接在一起，IIRC 与 C/C++ 进程没有太大区别

然而，主要区别在于导入是*符号*而不是 C 的整个文件`#include`，这消除了对头文件的需要（尽管对于封闭源 API 有类似头文件的 .di 文件的选项）

模板确实需要包含在编译器可用的文件中（就像它们需要在 C++ 的头文件中一样）

# javascript - 来自用户提供的时间间隔的 jQuery 定时计数器

> ID：14204640
> 
> 赞同：0
> 
> 时间：2013-01-07T21:48:57.850
> 
> 标签：javascript, jquery, timer

我的最终目标是创建一个计时器，以用户提供的间隔产生声音。例如，他们在一个字段中输入 10，然后每 10 秒发出一次哔声。现在，我只是无法让 setInterval 在范围内显示效果。非常感谢任何让我重回正轨的帮助。谢谢！

```
<div id="ping_div">
  <p>
    Enter the desired interval in milliseconds to sound ping noise. <br />
    <input id="ping_val" type="text" /> <input id="set_ping" type="button" value="Submit" /><span id="ping_alert"></span>
  </p>
  <p>
<input id="go" type="button" value="Click to Start Pings"  />
<span id="progress"></span>
  </p>
</div>

____________________________

$(document).ready(function() {

  $('#set_ping').click(function() {
    interval = $('#ping_val').val();
    $('#ping_alert').text('The ping will sound every ' + interval + ' milliseconds.');
  });

  $('#go').click(function() {  
    setInterval(timer, interval); 
  });

  function timer() {
    var base = base + interval;
    $('#progress').text(base);
  }

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T21:53:45.553

您的代码按原样工作，但如果您进行了一些更改，它会更明显：

[http://jsfiddle.net/PxENF/3/](http://jsfiddle.net/PxENF/3/)

```
$(document).ready(function() {
  var base = 0, interval = 1000; // <-----
  $('#set_ping').click(function() {
    interval = parseInt($('#ping_val').val(),10); // <-----
    $('#ping_alert').text('The ping will sound every ' + interval + ' milliseconds.');
  });

  $('#go').click(function() {  
    setInterval(timer, interval); 
  });

  function timer() {
    base = base + interval; // <-----
    $('#progress').text(base);
  }

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T21:51:40.627

```
$('#go').click(function() {
    interval = $('#ping_val').val();
    $('#ping_alert').text('The ping will sound every ' + interval + ' milliseconds.');
    setInterval(timer, interval); 
  }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T22:14:58.273

您可以使间隔自支持，而无需声明全局变量：

```
$("#go").click(function() {
    var interval = $("#ping_val").val();
    setInterval(function(){ 
        var progress = $("#progress");
        var html = progress.html();
        var offset = html.length > 0 ? parseInt(html) : 0;
        progress.html(offset + interval);
     }, interval); 
  }); 
```

请记住，每次单击“开始”时都会开始一个新的间隔。这些会互相干扰。这会更好：

```
var runningInterval = 0;
$("#go").click(function() {
    clearInterval(runningInterval);
    $("#progress").html("0");
    var interval = $("#ping_val").val();
    runningInterval = setInterval(function(){ 
        var progress = $("#progress");
        var html = progress.html();
        var offset = html.length > 0 ? parseInt(html) : 0;
        progress.html(offset + interval);
     }, interval); 
  }); 
```

# magento - Magento - 按订单获取产品 SKU 和数量

> ID：14204645
> 
> 赞同：0
> 
> 时间：2013-01-07T21:49:44.917
> 
> 标签：magento, magento-1.7

我在“sales_order_place_after”事件上创建了一个事件观察者，当用户在 Magento 的结帐中下订单时触发。该事件触发了我的观察者，它需要获取以下信息，然后将其发送到外部库存管理系统。

所需信息：*订单上每个产品的 SKU 和数量*

我在下面包含了我的观察者模型的一部分。我正在访问订单对象。我可以获取订单中的所有商品，但是如何获取构成订单的每个商品的 SKU。例如，对于一个简单的产品，这很容易。 **但是，对于捆绑或可配置的产品，我不知道如何访问构成该捆绑产品的子项及其 SKU 和数量。** 这就是我需要的捆绑产品和可配置产品的信息。我需要选择的孩子的 SKU 和数量。对于我的生活，我无法弄清楚要调用什么方法来访问该信息。我希望有类似的东西：`$item->getBundleChildrenSkuQuantity();`

```
$order = $observer->getEvent()->getOrder();
    $joomecomPacket = array();

    if ($order->getTotalItemCount() > 0) {
        $items = $order->getAllItems();

        foreach ($items as $item) {
            $productType = $item->getProductType();

            switch ($productType) {
                case 'bundle':

                break;
                case 'configurable':

                default: // simple products
                    if (isset($joomecomPacket[$item['sku']])) {
                        $joomecomPacket[$item['sku']] += $item['qty_ordered'];
                    } else {
                        $joomecomPacket[$item['sku']] = $item['qty_ordered'];
                    }
                break;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-01T19:02:07.733

在您的可配置案例之后，您错过了休息时间。默认情况是针对可配置产品执行的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T23:34:59.377

尝试这个：

```
$items = $order->getAllVisibleItems(); // gives only parent items

foreach ($items as $item){

$childItem = $item->getChildren(); //do something with $cildItem like $childItem->getSku() etc...

} 
```

# python - 获取异常 pickle.dump

> ID：14204647
> 
> 赞同：2
> 
> 时间：2013-01-07T21:49:49.883
> 
> 标签：python, python-2.7

如果这已经在其他地方得到回答，我们深表歉意。我浏览了互联网并没有找到明确的答案

我有一个类定义（包含几个值和方法），以及一个列表中保存的类的多个实例。（每个列表条目都是一个实例化。）

当我尝试腌制列表时，我得到一个“pickle.PicklingError”异常。这使我了解到有些对象不是“可腌制的”，但我的简单列表似乎应该没问题。

哪些对象是不可腌制的？

这是进行酸洗的实际代码。（此代码是在一个类内部定义的方法，它还包含我需要腌制的类对象。这是问题的一部分吗？）

```
def Write_Transaction_History_To_File(self):
    if (self.Transaction_History == True): # if History is not empty

        filename = self.Transaction_Name + '_Transaction_History.bin'
        f = open(filename, 'w')

        try:
            pickle.dump(self.Transaction_History , f, -1)   #use highest protocol
        except pickle.PicklingError:
            print 'Error when serializing data'
        f.close()

    else:
        print 'No History to store' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T21:54:04.853

如果您尝试腌制不在模块范围内的嵌套类，您将遇到麻烦。

从[文档](http://docs.python.org/2/library/pickle.html#what-can-be-pickled-and-unpickled)：

```
The following types can be pickled:

None, True, and False
integers, long integers, floating point numbers, complex numbers
normal and Unicode strings
tuples, lists, sets, and dictionaries containing only picklable objects
functions defined at the top level of a module
built-in functions defined at the top level of a module
classes that are defined at the top level of a module
instances of such classes whose __dict__ or the result of calling __getstate__() is 
picklable (see section The pickle protocol for details). 
```

# mysql - 当来自不同表的字段处于 OR 条件时，MySQL 不使用索引

> ID：14204651
> 
> 赞同：2
> 
> 时间：2013-01-07T21:50:22.987
> 
> 标签：mysql, join, indexing

看到这个：[你能在mysql中使用“col1 OR col2”的索引吗？](https://stackoverflow.com/questions/1386917/can-you-use-index-in-mysql-using-col1-or-col2) 但我想我可以问这个相关的问题，以使讨论简单明了。

我有两张桌子：`lists`和`agree_and_disagree_count`。

`lists`表有两个`timestamp`字段`modified_on`和`first_publish_date`。这两个字段都有自己的索引。

`agree_and_disagree_count`table 也有一个`timestamp`field `date_created`，它也被索引。

在同一表中字段的以下 OR 语句中，使用了两个索引。

```
mysql>  EXPLAIN SELECT * FROM lists l
    ->  WHERE (l.modified_on > '2013-01-07 12:50:51' OR
    ->   l.first_publish_date > '2013-01-07 12:50:51')\G
*************************** 1\. row ***************************
           id: 1
  select_type: SIMPLE
        table: l
         type: index_merge
possible_keys: modifiedon,first_publish_date
          key: modifiedon,first_publish_date
      key_len: 4,9
          ref: NULL
         rows: 2
        Extra: Using sort_union(modifiedon,first_publish_date); Using where 
```

但是，如果字段来自不同的表，则看起来没有使用索引：

```
mysql> EXPLAIN SELECT * FROM lists l
    -> JOIN agree_and_disagree_count adc ON adc.list_id=l.list_id
    -> WHERE (l.modified_on > '2013-01-07 12:50:51' OR
    -> adc.date_created > '2013-01-07 12:50:51')\G
*************************** 1\. row ***************************
           id: 1
  select_type: SIMPLE
        table: adc
         type: ALL
possible_keys: list_id_type_id,idx_list_id,idx_date_created
          key: NULL
      key_len: NULL
          ref: NULL
         rows: 5114907
        Extra:
*************************** 2\. row ***************************
           id: 1
  select_type: SIMPLE
        table: l
         type: eq_ref
possible_keys: PRIMARY,modifiedon
          key: PRIMARY
      key_len: 4
          ref: adc.list_id
         rows: 1
        Extra: Using where 
```

为什么？

* * *

我不知道如何在评论中输入格式良好的回复，所以以下是对@Iserni 的回应，他非常好心地帮助我：

我做了以下事情：

```
use test;

-- create tables
create table lists (
list_id INT UNSIGNED NOT NULL AUTO_INCREMENT,
modified_on TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
first_publish_date DATETIME NULL DEFAULT NULL,
primary key (list_id)
) ENGINE=InnoDB;

create table agree_and_disagree_count (
id INT UNSIGNED NOT NULL AUTO_INCREMENT,
list_id int unsigned not null,
date_created TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
primary key (id)
) ENGINE=InnoDB;

-- create indices
create index index_modified_on on lists (modified_on);
create index index_first_publish_date on lists (first_publish_date);

create index index_data_created on agree_and_disagree_count (date_created);

-- load data
insert into lists (list_id, modified_on, first_publish_date) values 
(1, now(), now()),
(2, now(), now()),
(3, now(), now());

insert into agree_and_disagree_count (list_id, date_created) values 
(1, now()), (1, now()), (2, now());

-- query
EXPLAIN SELECT * FROM lists l JOIN agree_and_disagree_count adc 
ON adc.list_id=l.list_id WHERE (l.modified_on > '2013-01-01 12:50:51'
OR adc.date_created > '2013-01-07 11:50:51');

+----+-------------+-------+------+----------------------------------+------+---------+------+------+--------------------------------+
| id | select_type | table | type | possible_keys                    | key  | key_len | ref  | rows | Extra                          |
+----+-------------+-------+------+----------------------------------+------+---------+------+------+--------------------------------+
|  1 | SIMPLE      | l     | ALL  | PRIMARY,index_modified_on        | NULL | NULL    | NULL |    3 |                                |
|  1 | SIMPLE      | adc   | ALL  | index_data_created,index_list_id | NULL | NULL    | NULL |    3 | Using where; Using join buffer |
+----+-------------+-------+------+----------------------------------+------+---------+------+------+--------------------------------+

-- create new indexes suggested by Iserni
CREATE INDEX adc_test_ndx ON agree_and_disagree_count (list_id, date_created);
CREATE INDEX l_test_ndx ON lists (list_id, modified_on);

-- query
EXPLAIN SELECT * FROM lists l JOIN agree_and_disagree_count adc 
ON adc.list_id=l.list_id WHERE (l.modified_on > '2013-01-01 12:50:51'
OR adc.date_created > '2013-01-07 11:50:51');

+----+-------------+-------+-------+-----------------------------------------------+--------------+---------+------+------+--------------------------------+
| id | select_type | table | type  | possible_keys                                 | key          | key_len | ref  | rows | Extra                          |
+----+-------------+-------+-------+-----------------------------------------------+--------------+---------+------+------+--------------------------------+
|  1 | SIMPLE      | adc   | index | index_data_created,index_list_id,adc_test_ndx | adc_test_ndx | 8       | NULL |    3 | Using index                    |
|  1 | SIMPLE      | l     | ALL   | PRIMARY,index_modified_on,l_test_ndx          | NULL         | NULL    | NULL |    3 | Using where; Using join buffer |
+----+-------------+-------+-------+-----------------------------------------------+--------------+---------+------+------+--------------------------------+ 
```

看起来仍然在进行全扫描？

* * *

在接受的答案下方查看@Iserni 的评论。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T22:05:05.707

一旦`JOIN`开启`list_id`，MySQL 无法将列表标识符与查询中使用并保存在索引中的字段“链接”，因为没有索引包含*ID*和*这些*字段；并且您不能在索引上运行连接。

尝试创建这两个索引：

```
CREATE INDEX adc_test_ndx ON agree_and_disagree_count (list_id, date_created);
CREATE INDEX l_test_ndx ON lists (list_id, modified_on); 
```

并用 EXPLAIN 重试。在我的系统上，我尝试创建两个最小的表，每个表有两条记录：

```
mysql> EXPLAIN SELECT * FROM lists l JOIN agree_and_disagree_count adc 
ON adc.list_id=l.list_id WHERE (l.modified_on > '2013-01-01 12:50:51'
OR adc.date_created > '2013-01-07 11:50:51')\G
*************************** 1\. row ***************************
           id: 1
  select_type: SIMPLE
        table: l
         type: ALL
possible_keys: NULL
          key: NULL
      key_len: NULL
          ref: NULL
         rows: 2
        Extra:
*************************** 2\. row ***************************
           id: 1
  select_type: SIMPLE
        table: adc
         type: ALL
possible_keys: NULL
          key: NULL
      key_len: NULL
          ref: NULL
         rows: 2
        Extra: Using where; Using join buffer
2 rows in set (0.00 sec) 
```

接着：

```
mysql> CREATE INDEX adc_test_ndx ON agree_and_disagree_count (list_id, date_created);
Query OK, 0 rows affected (0.00 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> CREATE INDEX l_test_ndx ON lists (list_id, modified_on);
Query OK, 0 rows affected (0.00 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> EXPLAIN SELECT * FROM lists l JOIN agree_and_disagree_count adc 
ON adc.list_id=l.list_id WHERE (l.modified_on > '2013-01-01 12:50:51'
OR adc.date_created > '2013-01-07 11:50:51')\G
*************************** 1\. row ***************************
           id: 1
  select_type: SIMPLE
        table: l
         type: index
possible_keys: l_test_ndx
          key: l_test_ndx
      key_len: 9
          ref: NULL
         rows: 2
        Extra: Using index
*************************** 2\. row ***************************
           id: 1
  select_type: SIMPLE
        table: adc
         type: ref
possible_keys: adc_test_ndx
          key: adc_test_ndx
      key_len: 5
          ref: test.l.list_id
         rows: 1
        Extra: Using where; Using index
2 rows in set (0.00 sec)

mysql> 
```

正如预期的那样，我现在在两个表上都获得了索引。

您可以发布表的结构和现有索引，或者更好的是 SQLFiddle 吗？

# plsql - 如何动态执行以下插入操作

> ID：14204652
> 
> 赞同：0
> 
> 时间：2013-01-07T21:50:25.757
> 
> 标签：plsql

```
INSERT INTO table_name
        ( A, B, C, D, E ) 
        SELECT
            J,K,L,M,N FROM EMP 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T21:03:19.477

假设 emp 有 J、K、L、M、NI 列，你猜你需要一个类似下面的过程：

```
create or replace procedure dyna_insert
(
  pi_emp_no number
)
is
begin
  insert into table_name
  ( A, B, C, D, E) 
  select j,k,l,m,n from emp where emp_no = pi_emp_no;

end; 
```

# c# - FileSystemWatcher 阻止调试器捕获异常

> ID：14204664
> 
> 赞同：0
> 
> 时间：2013-01-07T21:51:14.017
> 
> 标签：c#, visual-studio-2010, filesystemwatcher

我一直在逼自己发疯，试图今天解决这个问题。一段时间以来，我一直在使用 FileSystemWatcher 来捕获文件更改。我最初在框架 3.5 上的一个项目已移至 4.0 以利用一些 EF 东西，它似乎影响了 Visual Studio 允许我调试利用 FileSystemWatcher 的代码的方式。这是我遇到的问题的一个小例子（请参阅 watcher_Changed）：

```
class Program
{
    static void Main(string[] args)
    {
        FileSystemWatcher watcher = new FileSystemWatcher(@"C:\inputFolder\");

        watcher.Changed += new FileSystemEventHandler(watcher_Changed);
        watcher.NotifyFilter = NotifyFilters.LastAccess
            | NotifyFilters.LastWrite
            | NotifyFilters.FileName
            | NotifyFilters.DirectoryName;

        Console.WriteLine("Ready");

        watcher.EnableRaisingEvents = true;
        Thread.Sleep(System.Threading.Timeout.Infinite);
    }

    static void watcher_Changed(object sender, FileSystemEventArgs e)
    {
        //This exception here (just an example), does not get sent to the debugger, rather it goes to the
        //console and then the application exits
        throw new ArgumentException();
    }
} 
```

将 ArgumentException 扔到控制台后，代码将始终为我关闭。在更复杂的情况下，这给我带来了一些主要的调试问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T22:06:01.020

我认为这是因为 Visual Studio 未配置为在`System.ArgumentException`抛出时中断，而是在用户处理时中断。由于异常发生在由它创建的线程中，`FileSystemWatcher`它可能没有任何类型的顶级异常处理程序。

要更改调试设置，请转到 Debug\Exceptions，然后展开`Common Language Runtime Exceptions`并搜索异常。或者使用`Find...`按钮。然后确保勾选了“Thrown”复选框。请注意，您可能通常不希望使用此选项，因为许多应用程序可能会正常处理异常。

# jquery - JS/jQ 处理大量 setTimeouts 的更有效方法

> ID：14204667
> 
> 赞同：3
> 
> 时间：2013-01-07T21:51:22.650
> 
> 标签：jquery, settimeout

我正在从事一个网络艺术项目，该项目需要许多对象以一定的间隔淡入和淡出（我希望使用 100 个或更多对象）。我让 jQ 读取包含元数据的 XML 文件并将 Ps 附加到正文，然后根据元数据中的信息告诉它们淡入和淡出。我正在使用 setTimeouts 来完成此操作。

这件作品最终会占用大量资源。在加载页面后的一两分钟内，我的机器开始喘息。（或者，我认为这可能不是资源问题，而是图形问题。）

有没有人有一些建议可以使这更加资源友好/高效？我很感激任何帮助！

这是实时链接： http: [//justwhatdoyoucallthis.com/trynottogiveup/](http://justwhatdoyoucallthis.com/trynottogiveup/)（小心资源浪费）

这是相关的脚本：

```
$.ajax({
    type: 'get',
    url: 'problems.xml', /* ...which contains like 99 problems */
    dataType: 'xml',
    success: function(problems) {
        $(document).ready(function() {
            var winWidth=$(window).width();
            var winHeight=$(window).height();
            $(problems).find('problem').each(function() {
                var probType=$(this).attr('type');
                var probAppear=$(this).attr('appear');
                var probName=$(this).children('name').text();
                var probID=(probName.replace(/\s/g, '')).toLowerCase();
                var probIntensity=($(this).children('intensity').text()+5)*10;
                var probInterval=$(this).children('interval').text();
                var probDuration=$(this).children('duration').text();
                var ranLeft=Math.random()*winWidth-(probIntensity/2);
                var ranTop=Math.random()*winHeight-(probIntensity/2);
                $('body').append('<p id="'+probID+'" class="'+probType+'" style="left: '+ranLeft+'px; top: '+ranTop+'px; height: '+probIntensity+'px; width: '+probIntensity+'px;"><span>'+probName+'</span></p>');
                (function showLoop() {
                    if(probAppear=='fade') { var fadeInDuration=1000; } else { var fadeInDuration=0; }
                    $('#'+probID).delay(probInterval*1000).fadeIn(fadeInDuration).delay(probDuration*1000).fadeOut(1000);
                    setTimeout(showLoop, 1000);
                })();
            });
        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T12:09:02.820

这是您的代码的优化版本，但就像 bvukelic 所说的那样，整个概念使用画布可能会更有效。

无论如何，我在代码中看到的问题是延迟和淡入淡出动作确实是同步调用的，但是超时是异步执行的，这意味着一段时间后，您对同一个对象有多个动作流（最多一百次） .

因此解决方案是将重复的超时作为回调附加到 .fadeOut() 操作。

```
$(function() {
    var $win = $(window),
        winWidth = $win.width(),
        winHeight = $win.height(),
        showLoop = function(prob) {
            var fadeInDuration = prob.appear == 'fade' ? 1000 : 0;
            $('#'+prob.id)
                .delay(prob.interval*1000)
                .fadeIn(fadeInDuration)
                .delay(prob.duration*1000)
                .fadeOut(1000, function() {
                    window.setTimeout(function() {
                        showLoop(prob); // synchronously repeated callback
                    }, 1000);
                });
        };

    $.ajax({
        type: 'get',
        url: 'problems.xml', /* ...which contains like 99 problems */
        dataType: 'xml',
        success: function(problems) {        
            $('problem', problems).each(function() {
                var $t = $(this),
                    probName = $('name', this).text(),
                    prob = {
                        type: $t.attr('type'),
                        appear: $t.attr('appear'),
                        name: probName,
                        id: probName.replace(/\s/g, '').toLowerCase(),
                        intensity: (parseInt($('intensity', this).text()) + 5) * 10,
                        interval: parseInt($('interval', this).text()),
                        duration: parseInt($('duration', this).text()),
                        pos: {
                            top = Math.random()*winHeight-(prob.intensity/2),
                            left = Math.random()*winWidth-(prob.intensity/2)
                        }
                    };

                $('<p>')
                    .append('<span>'+prob.name+'</span>')
                    .attr('id', prob.id)
                    .addClass(prob.type)
                    .width(prob.intensity)
                    .height(prob.intensity)
                    .css({
                        top: prob.pos.top,
                        left: prob.pos.left,
                    })
                    .appendTo('body');

                showLoop(prob);
            });
        }
    });
}); 
```

# orchardcms - 果园面包屑不适用于分类法

> ID：14204670
> 
> 赞同：1
> 
> 时间：2013-01-07T21:51:48.870
> 
> 标签：orchardcms, breadcrumbs

我正在使用 Orchard 1.6，并试图让我的面包屑小部件适用于所有页面和分类。

For the pages, when a page is selected, the breadcrumbs work as expected:

```
Home > My Page > My Sub Page 
```

但是，作为此菜单的一部分（主菜单，由“默认”果园配方设置），我添加了一些分类术语（通过将“菜单”部分添加到我的分类术语内容类型中）。

当我查看术语页面（前端）时，面包屑不会呈现为面包屑，而是呈现为完整菜单。

我想知道的是：如何让面包屑识别分类并正确呈现？

我需要添加到特定内容类型的部分吗？

现在我需要使用使用 HTML 小部件的肮脏、*肮脏*的解决方法；自然，我更喜欢实际的解决方案。

提前致谢！

# ember.js - 如何构建 Ember.js 应用程序

> ID：14204674
> 
> 赞同：105
> 
> 时间：2013-01-07T21:51:56.717
> 
> 标签：ember.js

随着 Ember JS 接近（并且达到！）版本 1.0.0，很难跟上它的发展。教程和文档来来去去，导致人们对最佳实践和原始开发人员的意图产生了很多困惑。

我的问题正是：Ember JS 的最佳实践是什么？是否有任何更新的教程或工作示例展示了 Ember JS 的使用方式？代码示例会很棒！

感谢所有人，尤其是 Ember JS 开发人员！

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2013-01-07T23:10:58.583

## Mike Grassotti 的最小可行 Ember.js 快速入门指南

本快速入门指南应能在几分钟内让您从**零到略大于零。**完成后，您应该对 ember.js 确实有效，并希望有足够的兴趣了解更多信息。

*警告：不要只是尝试本指南，然后认为 ember-sucks 会导致“我可以用 jQuery 或 Fortran 更好地编写该快速入门指南”或其他任何内容。我不是想在 ember 或任何东西上卖给你，本指南只不过是一个你好世界。*

### 第 0 步 - 查看 jsFiddle

[这个 jsFiddle](http://jsfiddle.net/mgrassotti/RTK54/)有这个答案的所有代码

### 第 1 步 - 包括 ember.js 和其他必需的库

Ember.js 需要 jQuery 和 Handlebars。确保在 ember.js 之前加载这些库：

```
<script type='text/javascript' src='http://code.jquery.com/jquery-1.9.1.js'></script>
<script type='text/javascript' src="http://cdnjs.cloudflare.com/ajax/libs/handlebars.js/1.0.0-rc.3/handlebars.js"></script>
<script type='text/javascript' src="http://cdnjs.cloudflare.com/ajax/libs/ember.js/1.0.0-rc.1/ember.js"></script> 
```

### 第 2 步 - 使用一个或多个把手模板描述您的应用程序的用户界面

默认情况下，ember 将使用一个或多个把手模板的内容替换您的 html 页面的正文。有一天，这些模板将位于由 sprockets 或 grunt.js 组装的单独的 .hbs 文件中。现在我们将所有内容保存在一个文件中并使用脚本标签。

首先，让我们添加一个`application`模板：

```
<script type="text/x-handlebars" data-template-name="application">
  <div class="container">
    <h1>Ember.js is easy?<small> Minimum Viable Ember.js QuickStart Guide</small></h1>
    <p>{{message}}</p>
  </div>
</script> 
```

### 第 3 步 - 初始化您的 ember 应用程序

只需添加另一个脚本块`App = Ember.Application.create({});`即可加载 ember.js 并初始化您的应用程序。

```
<script type='text/javascript'>
  App = Ember.Application.create({});
</script> 
```

这就是创建基本 ember 应用程序所需的全部内容，但这并不是很有趣。

### 第 4 步：添加控制器

Ember 在控制器的上下文中评估每个车把模板。所以`application`模板有一个匹配的`ApplicationController`. 如果您没有定义 Ember 会自动创建，但这里让我们自定义它以添加消息属性。

```
<script type='text/javascript'>
App.ApplicationController = Ember.Controller.extend({
    message: 'This is the application template' 
});
</script> 
```

### 第 5 步：定义路由 + 更多控制器和模板

Ember 路由器可以轻松地将模板/控制器组合到应用程序中。

```
<script type='text/javascript'>
  App.Router.map(function() {
    this.route("index", { path: "/" });
    this.route("list", { path: "/list" });
  });

  App.IndexController = Ember.Controller.extend({
    message: 'Hello! See how index.hbs is evaluated in the context of IndexController' 
  });

  App.ListRoute = Ember.Route.extend({
    setupController: function(controller) {
      controller.set('content', ['angular.js', 'backbone.js', 'ember.js']);
    }
  });

</script> 
```

`{{outlet}}`为了使这个工作，我们通过添加一个帮助器来修改我们的应用程序模板。Ember 路由器将根据用户的路线将适当的模板渲染到插座中。我们还将使用`{{linkTo}}`帮助程序添加导航链接。

```
 <script type="text/x-handlebars" data-template-name="application">
      <div class="container">
          <h1>Ember.js is easy?<small> Minimum Viable Ember.js QuickStart Guide</small></h1>
        <p>{{message}}</p>
        <div class="row">
          {{#linkTo index class="span3 btn btn-large btn-block"}}Home{{/linkTo}}
          {{#linkTo list class="span3 btn btn-large btn-block"}}List{{/linkTo}}
        </div>
        {{outlet}}
      </div>
    </script>

    <script type="text/x-handlebars" data-template-name="list">
      <h3 class="demo-panel-title">This is the list template</h3>
      <ul>
      {{#each item in content}}
          <li>{{item}}</li>
      {{/each}}
       </ul>
    </script>

    <script type="text/x-handlebars" data-template-name="index">
      <h3 class="demo-panel-title">This is the index template</h3>
      <p>{{message}}</p>
    </script> 
```

### 完毕！

[此处](http://jsfiddle.net/mgrassotti/A4hdE/1/embedded/result/)提供了此应用程序的工作示例。

您可以使用[这个 jsFiddle](http://jsfiddle.net/mgrassotti/RTK54/)作为您自己的 ember 应用程序的起点

### 下一步...

*   阅读[Ember 指南](http://emberjs.com/guides)
*   也许购买[Peepcode](https://peepcode.com/products/emberjs)截屏视频
*   在 Stack Overflow 或 ember IRC 中提问

*作为参考，我的原始答案：*

* * *

> 我的问题是针对任何 Ember.js 专家，当然还有各自的教程作者：我应该什么时候使用一个教程中的设计模式，什么时候使用另一个教程？

这两个教程代表了编写它们时的最佳实践。当然，每个人都可以从中学到一些东西，但遗憾的是，两者都注定会过时，因为 ember.js 的发展非常迅速。在这两者中，Trek 的要流行得多。

> 每个组件的哪些组件是个人喜好，随着我的应用程序成熟，哪些组件将被证明是必不可少的？如果您正在开发新的 ember 应用程序，我不建议您遵循 Code Lab 方法。它太过时了，没有用。
> 
> 在 Code Lab 的设计中，Ember 似乎更接近于存在于应用程序中（尽管它是 100% 的他的自定义 JS），而 Trek 的应用程序似乎更多地存在于 Ember 中。

你的评论太棒了。CodeLab 正在利用核心 ember 组件并从全球范围内访问它们。在编写时（9 个月前），这很常见，但今天编写 ember 应用程序的最佳实践与 Trek 所做的更接近。

也就是说，即使是 Trek 的教程也已经过时了。`ApplicationView`所需的组件`ApplicationController`现在由框架本身生成。

到目前为止，最新的资源是在[http://emberjs.com/guides/](http://emberjs.com/guides/)上发布的一组指南 ——它们是在过去几周从头开始编写的，反映了最新的（预发布）版本的 ember。

我还会在这里查看 Trek 的 wip 项目：[https ://github.com/trek/ember-todos-with-build-tools-tests-and-other-modern-conveniences](https://github.com/trek/ember-todos-with-build-tools-tests-and-other-modern-conveniences)

**编辑**：

@sly7_7：我还要举一个例子，使用 ember-data [https://github.com/dgeb/ember_data_example](https://github.com/dgeb/ember_data_example)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2015-04-18T18:56:12.877

Ember.js 新手和老手都应该利用一个重要的项目：

[***Ember-CLI***](http://www.ember-cli.com)

虽然它确实需要一定程度的命令行舒适度，但您可以在几秒钟内生成具有社区推荐的最佳实践的现代 Ember 项目。

虽然像 Mike Grassotti 的回答那样以艰难的方式设置 Ember.js 项目是有益的，但您不应该为生产代码这样做。尤其是当我们有这样一个功能强大且易于使用的项目时，就像`Ember-CLI`向我们展示了 Yehuda 认可的[幸福之路](http://media4.popsugar-assets.com/files/2014/08/07/827/n/1922283/de1315c2e39c1511_Animations-500-days-of-summer-8231477-400-225KzX1kN.xxxlarge/i/Which-accurately-captures-how-feels-have-gotten-some.gif)。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-03-28T07:37:34.810

@tomdale 制作了 30 分钟的新鲜截屏视频：https: [//www.youtube.com/watch? v=Ga99hMi7wfY](https://www.youtube.com/watch?v=Ga99hMi7wfY)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-07-28T01:17:50.680

我强烈推荐使用[Yeoman](http://yeoman.io)及其随附的余烬生成器。开箱即用，您可以获得开发、测试和准备生产应用程序所需的所有工具。作为额外的奖励，您将能够将视图模板拆分为多个文件，并从智能目录结构开始，这将有助于您创建可维护的代码库。

我已经写了一篇关于在大约 5 分钟内启动并运行它的教程。只需安装 node.js 并[在此处进行操作](http://matthewlehner.net/get-started-with-ember-js-in-5-minutes/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-07-22T19:12:07.263

[Fire Up Ember - Peepcode](https://peepcode.com/products/emberjs)截屏视频值得一看。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-07-20T21:23:12.870

[还可以阅读这个名为Let's Learn Ember](http://freecourses.tutsplus.com/lets-learn-ember/) from Tuts+ Premium的免费教程。它是免费的，因为它来自他们的`free courses`系列。这门课程，正如 Tuts 人所说的那样，分为 14 个易于理解的章节。

我希望这有帮助。

问候，

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-06-11T17:56:07.003

我更喜欢木炭自耕农方法。它为您提供了大量开箱即用的东西，包括：

*   使用“模块”方法的漂亮文件夹架构。
*   中性
*   实时重新加载
*   缩小
*   丑化
*   jshint

和更多。

并且它超级容易设置，只需运行`yo charcoal`创建一个应用程序然后`yo charcoal:module myModule`添加一个新模块。

更多信息在这里：[https ://github.com/thomasboyt/charcoal](https://github.com/thomasboyt/charcoal)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-10-21T00:35:52.887

我刚刚创建了一个入门工具包，如果您想使用最新的 EmberJS 和 Ember-Data 以及 Emblem 模板引擎。全部包含在 Middleman 中，因此您可以使用 CoffeeScript 进行开发。我的 GitHub 上的所有内容：http: [//goo.gl/a7kz6y](http://goo.gl/a7kz6y)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-01-08T18:21:52.027

尽管[Ember.js 上过时的 Flame](http://www.adobe.com/devnet/html5/articles/flame-on-a-beginners-guide-to-emberjs.html) 对于第一次看 ember 的人来说仍然是一个很好的教程。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-05-16T06:20:05.783

我已经开始制作一系列视频，这些视频从 Ember 之前开始，并致力于在现实世界的严肃用例中愤怒地使用 Ember。

如果您有兴趣看到这个消息（如果有兴趣，我很乐意最终将其公开），您绝对应该转到我发布的帖子并点击“喜欢”（或者只是在这里发表评论，我猜）：

[http://discuss.emberjs.com/t/making-ember-easier-to-approach-aka-crazy-screencasts-videos-that-will-stick-in-your-mind-for-learning-ember/5284](http://discuss.emberjs.com/t/making-ember-easier-to-approach-aka-crazy-screencasts-videos-that-will-stick-in-your-mind-for-learning-ember/5284)

我非常热衷于帮助社区蓬勃发展，同时也帮助人们学习如何以简单的方式构建标准网站。

# android - 如何将两个 onTouchListener 设置为同一布局中的两个按钮

> ID：14204675
> 
> 赞同：0
> 
> 时间：2013-01-07T21:51:57.113
> 
> 标签：android, drag-and-drop, ontouchlistener

我正在尝试制作拖放按钮，它们位于同一个 xml 中，我为它们创建了两个 onTouchListener，它们可以拖放，但是如果我移动其中一个，另一个也会移动，有人可以告诉我如何解决这个问题？这是我的代码：

```
 btn = (Button) findViewById(R.id.btn);
    btn.setDrawingCacheEnabled(true);
    btn.setOnTouchListener(new View.OnTouchListener() {
        public boolean onTouch(View view, MotionEvent me) {
            if (me.getAction() == MotionEvent.ACTION_DOWN) {
                status = START_DRAGGING;
            }
            if (me.getAction() == MotionEvent.ACTION_UP) {
                status = STOP_DRAGGING;
                Log.i("Drag", "Stopped Dragging");
            } 
            else if (me.getAction() == MotionEvent.ACTION_MOVE) {
                if (status == START_DRAGGING) {
                    LinearLayout.LayoutParams layoutParams = new LinearLayout.LayoutParams(
                            LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);
                    layoutParams.setMargins((int) me.getRawX() - 50,(int) me.getRawY() - 70, 0, 0);

                    layout.removeView(btn);
                    layout.addView(btn, layoutParams);
                    btn.invalidate();
                }
            }
            return false;
        }
    });

    btn1 = (Button) findViewById(R.id.btn1);
    btn1.setDrawingCacheEnabled(true);
    btn1.setOnTouchListener(new View.OnTouchListener() {
        public boolean onTouch(View view1, MotionEvent me1) {
            if (me1.getAction() == MotionEvent.ACTION_DOWN) {
                status = START_DRAGGING;
            }
            if (me1.getAction() == MotionEvent.ACTION_UP) {
                status = STOP_DRAGGING;
                Log.i("Drag", "Stopped Dragging");
            } 
            else if (me1.getAction() == MotionEvent.ACTION_MOVE) {
                if (status == START_DRAGGING) {
                    LinearLayout.LayoutParams layoutParams1 = new LinearLayout.LayoutParams(
                            LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);
                    layoutParams1.setMargins((int) me1.getRawX() - 50,(int) me1.getRawY() - 70, 0, 0);

                    layout.removeView(btn1);
                    layout.addView(btn1, layoutParams1);
                    btn1.invalidate();
                }
            }
            return false;
        }
    }
    ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T21:55:47.983

不要使用`LinearLayout`.

我会使用一个`RelativeLayout`或可能`FrameLayout`

另请参阅：http: [//developer.android.com/guide/topics/ui/declaring-layout.html](http://developer.android.com/guide/topics/ui/declaring-layout.html)

# objective-c - cocos2d 以速度生成多个相同的精灵

> ID：14204679
> 
> 赞同：1
> 
> 时间：2013-01-07T21:52:19.603
> 
> 标签：objective-c, ios, xcode, cocos2d-iphone

我对 iOS 和 cocos2d 很陌生，我在尝试创建我想要代码做的事情时遇到了问题。让我先给你一个纲要，然后我会展示我所拥有的。

到目前为止，我得到的是中间的一个巨大精灵，当它被触摸时，我想说从中心位置生成 2000 个不同的精灵，就像一个粒子系统一样，向各个方向射击。

首先，我尝试在 Cocos2d 上实现速度代码（用 Objective-c 编写），但没有成功。-代码-

```
-(void)ccTouchBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
  if(CGRectContainsPoint([[self getChildByTag:1] boundingBox], location))
     {
        for( int i = 0; i < 100; i++)
          {
             CCSprite *ballGuySprite = [CCSprite spriteWithFile:@"ball.png"];
             [self addChild:ballGuySprite z:7];
             ballGuySprite.position = ccp(((s.width + i *10) /2), (s.height + i *10) /2);
           }
      }
} 
```

这样做是当我触摸第一个精灵时，其他 100 个精灵相互重叠，通向右上角。

我使用的速度代码如下所示，当我尝试将其应用于精灵时，没有任何反应。- 速度代码 -

```
-(void) checkCollisionWithScreenEdges
{
if(ballGuysRect.origin.x <= 0)
{
    ballVelocity.x = abs(ballVelocity.x);

}

if(ballGuysRect.origin.x >= VIEW_WIDTH - GUY_SIZE)
{
    ballVelocity.x = -1 * abs(ballVelocity.x);
}

if(ballGuysRect.origin.y <= 0)
{
    ballVelocity.y = abs(ballVelocity.y);
}

if(ballGuysRect.origin.y >= VIEW_HEIGHT - GUY_SIZE)
{
    ballVelocity.y = -1 * abs(ballVelocity.y);
}

}

-(void) updateModelWithTime:(CFTimeInterval)timestamp
{
    if(lastTime == 0.0)
    {
        lastTime = timestamp;
    }
else
{
    timeDelta = timestamp - lastTime;

    lastTime = timestamp;

    ballGuysRect.origin.x += ballVelocity.x * timeDelta;
    ballGuysRect.origin.y += ballVelocity.y * timeDelta;

    [self checkCollisionWithScreenEdges];

}
} 
```

当我将该代码附加到精灵时，什么也没有发生。

我还尝试添加一个 CCParticleExplosion ，它确实做了我想要的，但我仍然想为每个生成的单独精灵添加一个触摸功能，它们往往会逐渐消失。

再说一次，我对此还是很陌生，如果有人能提供任何建议，那就太好了。

感谢您的患者和时间阅读本文。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T03:48:17.940

我不确定您使用的是哪个版本的 cocos2d，但有些事情看起来有点奇怪。

您的第一个问题似乎是您只是一遍又一遍地使用相同的精灵。

既然你想要这么多不同的精灵射击，我建议你使用 CCSpriteBatchNode，因为这可以简化事情并加快速度。

以下代码应该可以帮助您进行设置并使用 CCMoveTo 将它们移出屏幕：

```
 //in your header file:
    CCSpriteBatchNode *batch;

    //in your init method
    batch = [CCSpriteBatchNode batchNodeWithFile:@"ball.png"];

     //Then in your ccTouches method
    for( int i = 0; i < 100; i++)
      {
         CCSprite *ballGuySprite = [CCSprite spriteWithFile:@"ball.png"];
         [batch addChild:ballGuySprite z:7 tag:0];
         ballGuySprite.position = ccp(where-ever the center image is located);
          id actionMove = [CCMoveTo actionWithDuration:actualDuration 
                                position:ccp(random off screen location)];
          [ballGuySprite runAction:actionMove];
       } 
```

通常您的更新方法也类似于以下内容：

```
 -(void)update:(ccTime)delta{
        //check for sprites that have moved off screen and disable them. 
    } 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T22:14:22.130

您的代码对我来说看起来不错，但您似乎从未更新精灵的位置。在某处，`updateModelWithTime`我希望您分别设置`ballGuySprite.position = ballGuysRect.origin`其高度或宽度的一半。

另外，我看不出如何`updateModelWithTime`控制 100 个不同的精灵。我只看到`ballGuysRect`这里的一个实例。每个精灵都需要一个`ballGuysRect`，例如一个数组。

最后，我想说你并不真的需要`ballGuysRect`,`ballVelocity`和 sprite。`Ball`可以是 的子类`CCSprite`，包括速度向量。然后，您需要做的就是保留一系列`Ball`s 并管理它们。

# lambda - 不能将函数调用用作 s-exp 中的第一个参数

> ID：14204683
> 
> 赞同：1
> 
> 时间：2013-01-07T21:52:35.737
> 
> 标签：lambda, lisp, common-lisp

我正在尝试使用一个函数来返回一个普通 lisp 中的函数。但是，我遇到了一个奇怪的情况，我想解释一下。

这就是我想要做的：

```
(defun makefun(x) ;1
  (lambda (z)
    (+ x z)))

((makefun 1) 2) ;2 
```

这会导致非法函数调用。但是，以下内容是有效的：

```
((lambda (z) (+ 1 z)) 2) ;3

(funcall (makefun 1) 2) ;4 
```

为什么我不能像第一个例子那样使用 makefun ？我希望对 2 中的调用进行评估，因此它相当于第 3 行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T22:42:54.673

Common Lisp 有几个不同的[命名空间](https://stackoverflow.com/a/11877603/271324)，在[函数形式](http://clhs.lisp.se/Body/26_glo_f.htm#function_form)中，使用了操作符的[函数值](http://clhs.lisp.se/Body/26_glo_f.htm#functional_value)。您的`lambda`示例有效，因为[lambda 表单](http://clhs.lisp.se/Body/03_ababd.htm)是评估规则中的一个单独分支。你可以在谷歌上搜索“Common Lisp namespaces”“Lisp-1 vs. Lisp-2”了解更多细节，这里有很多[关于](https://stackoverflow.com/q/4578574/271324)这些主题的问题和答案。

但是，要回答您的特定问题，请使用[`funcall`](http://www.lispworks.com/documentation/HyperSpec/Body/f_funcal.htm)（您也可以查看[`apply`](http://www.lispworks.com/documentation/HyperSpec/Body/f_apply.htm)）：

```
(funcall (makefun 1) 2) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-07T22:56:08.183

如果已经在 Stackoverflow 上回答了类似的问题。这是一个副本。需要找到它。

反正。

```
(defun makefun(x) ;1
  (lambda (z)
    (+ x z)))

((makefun 1) 2) 
```

Common Lisp 不允许在函数位置求值。它要求您在其中放置一个符号或实际的 lambda 表达式。

记住：Common Lisp 有一个单独的*函数命名空间*。*值命名空间*不同。这里`MAKEFUN`返回一个值，该值在函数命名空间中不可用。

调用函数只有两种语法方式：

```
(foo 1 2) 
```

和

```
((lambda (a b) (list a b)) 1 2) 
```

参见[CLHS（Conses as Forms）](http://www.lispworks.com/documentation/HyperSpec/Body/03_abab.htm)。这里我们有一个*Lambda Form*。

添加编写能力`((some-function-returning-function) 1 2)`会使 Common Lisp 中的函数调用更加混乱：

*   `(foo 1 2)`将使用函数命名空间
*   `((some-function-returning-function) 1 2)`将使用值命名空间

# c# - 如何拆分特殊字符'##'和'}'

> ID：14204686
> 
> 赞同：-1
> 
> 时间：2013-01-07T21:52:49.350
> 
> 标签：c#, .net

我已经[在这里](https://stackoverflow.com/questions/11889780/how-to-split-a-string-with-in-c-sharp)和[这里尝试过](https://stackoverflow.com/questions/11889780/how-to-split-a-string-with-in-c-sharp) 仍然没有运气。

文本1：

> 一些包含 } 和再次 } 或可能 } 的文本

文本2：

> 一些包含 ## 和再次 ## 或者可能是 ## 的文本

这里我的代码

```
string str1 = "Some text that contained } and again } or maybe }";
// Some time its contained ##

string[] words;
if (str1.Contains("}"))
{
    words = str1.Split("}");
}
else if (str1.Contains ("##"))
{
    words = str1.Split("##");
} else {
    words = null;
} 
```

我有 2 个错误

> 'string.Split(params char[])' 的最佳重载方法匹配有一些无效参数

和

> 参数 '1'：不能从 'string' 转换为 'char[]' }

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T21:54:56.767

尝试使用

```
str1.Split(new [] {"}"}, StringSplitOptions.RemoveEmptyEntries); 
```

和

```
str1.Split(new [] {"##"}, StringSplitOptions.RemoveEmptyEntries); 
```

`StringSplitOptions.None`如果您想保留空字符串，则可以使用

[string.Split](http://msdn.microsoft.com/en-us/library/system.string.split.aspx)仅在下一个签名中将输入作为字符串 :`Split(String[], StringSplitOptions)`和`Split(String[], Int32, StringSplitOptions)`. 因此，至少您需要指定`StringSplitOptions`一个字符串并将其转换为一个字符串的数组，否则编译器不知道您要调用什么方法。

您可以通过删除一条`if`语句来减少逻辑。`Split`如果没有找到输入字符串的出现，该方法不会抛出任何异常。

```
string str1 = "Some text that contained } and again } or maybe }";

string[] words;
if (str1.Contains("}") || str1.Contains ("##"))
{
    words = str1.Split(new [] {"}", "##"}, StringSplitOptions.RemoveEmptyEntries);

}
else
{
    words = null;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T21:59:52.133

```
str1.Split(new [] {"}","##"}, StringSplitOptions.RemoveEmptyEntries); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-07T21:56:24.577

正如 Dave 提到的，字符串拆分只包含一个字符。如果需要拆分字符串，请使用以下代码

```
string str1 = "Some text that contained } and again } or maybe }";
    // Some time its contained ##

string[] words;
if (str1.Contains("}"))
{
    words = str1.Split(new string[] { "}" }, StringSplitOptions.None);
}
else if (str1.Contains ("##"))
{
    words = str1.Split(new string[] { "##" }, StringSplitOptions.None);
} else {
    words = null;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-07T21:58:46.237

试试这个代码。请注意，您也可以使用`Regex`，因此此类将允许您按模式拆分：

```
string str1 = "Some text that contained } and again } or maybe }";
// Some time its contained ##

string[] words;
if (str1.Contains("}"))
{
    words = str1.Split('}');
}
else if (str1.Contains ("##"))
{
    words = Regex.Split(str1, @"\#\#");
} else {
    words = null;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-07T22:14:27.843

[string.Split()](http://msdn.microsoft.com/en-us/library/y7h14879.aspx)在 C# 中的工作方式，你传入的参数应该是字符数组或者带选项的字符串。该方法还有其他重载，但这些与您的问题无关。
而不是 using `words = str1.Split("}")`，您应该使用`words = str1.Split('}')`which 传入一个字符，而不是一个字符串作为参数。
对于需要检查字符串而不是字符的情况，您应该使用`words = str1.Split(new string[] { "##" }, StringSplitOptions.None)`而不是`words = str1.Split("##")`.

您的最终代码应如下所示

```
string str1 = "Some text that contained } and again } or maybe }";
        // Some time its contained ##

string[] words;
if (str1.Contains("}"))
{
    words = str1.Split( ('}'));
}
else if (str1.Contains("##"))
{
    words = str1.Split(new string[] { "##" }, StringSplitOptions.None);
}
else
{
    words = null;
} 
```

[在此处](http://www.dotnetperls.com/split)查看有关如何使用拆分方法的教程

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-07T21:57:04.357

如果需要匹配`"##"`，[可以将字符串数组传递给 string.split](http://msdn.microsoft.com/en-us/library/tabh47cf.aspx)

```
tring[] separators = {"##"};
string [] sarr = mystr.Split(separators); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-07T22:24:57.430

如果您想通过 } 或 ## 拆分两个字符串，您可以使用要拆分的字符串数组。

```
stringToSplit.Split(new []{"}","##"}, StringSplitOptions.None); 
```

要查看此工作，请查看此 Doodle[如何正确使用 string.Split 的示例](http://bit.ly/UCI7HQ)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-01-07T22:28:39.470

为什么不在一行字符串中完成所有操作

```
str1 = "Some text that contained } and again } or maybe }"; 
var items = str1.Split(new string[] { "##" ,"}" },StringSplitOptions.RemoveEmptyEntries); 
```

# asp.net - 创建特定的 LoginError asp.net

> ID：14204688
> 
> 赞同：0
> 
> 时间：2013-01-07T21:52:55.857
> 
> 标签：asp.net, login

我正在使用 .net 4.5 的 LoginPage。当字段为空时，我收到一个红色错误，表示我无法连接。我想要做的是，当我输入用户名和密码时，我尝试登录数据库，如果我得到错误，我想要一个自定义错误，说明我无法登录数据库。这是代码：

```
protected void LoginButton_Click(object sender, EventArgs e)
    {
        if (!DBHandle.DBConnect(UserLogin.UserName, UserLogin.Password))
        {
        }
    }

    protected void UserName_TextChanged(object sender, EventArgs e)
    {

    }

    protected void UserLogin_LoginError(object sender, EventArgs e)
    {
        UserLogin.FailureText = "asdad";
    } 
```

我必须在条件中加入什么，才能导致 LoginError？

谢谢！

# codeigniter - codeigniter count_all_results

> ID：14204691
> 
> 赞同：11
> 
> 时间：2013-01-07T21:53:06.200
> 
> 标签：codeigniter, activerecord

我正在使用最新`codeIgniter`发布的版本，我也在使用`jquery` `datatables`from`datatables.net`

我写了这个函数：[https](https://gist.github.com/4478424) ://gist.github.com/4478424 ，它工作正常。除非我使用文本框输入内容进行过滤。过滤器本身会发生，但我的计数完全关闭。

我试图`$res = $this->db->count_all_results()`在 my 之前添加`get`，它完全停止了 get 的工作。我需要完成什么，`if ($data['sSearch'] != '')`然后利用整个查询而不`limit`查看存在多少带有搜索过滤器的总行。

如果您需要查看除我的要点之外的任何其他代码，请询问，我会继续发布。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-07T22:34:21.650

`$this->db->count_all_results()``$this->db->get()`在数据库调用中替换。

IE 您可以调用其中一个`count_all_results()`或`get()`，但不能同时调用两者。

您需要进行两次单独的活动记录调用。一个分配结果#，一个得到实际结果。

像这样的计数：

```
$this->db->select('id');
$this->db->from('table');
$this->db->where($your_conditions);
$num_results = $this->db->count_all_results(); 
```

对于实际查询（您应该已经拥有）：

```
$this->db->select($your_columns);
$this->db->from('table');
$this->db->where($your_conditions);
$this->db->limit($limit);
$query = $this->db->get(); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-08T03:46:46.207

您是否阅读过[https://www.codeigniter.com/userguide2/database/active_record.html#caching](https://www.codeigniter.com/userguide2/database/active_record.html#caching)？

我看到您正在尝试在需要“真实”总结果并同时进行限制的地方进行一些分页。

这是我在 CI 中编写的大多数代码中的实践。

```
    $this->db->start_cache();

    // 你的所有条件都没有限制
    $this->db->from();
    $this->db->where(); // 等等...
    $this->db->stop_cache();

    $total_rows = $this->db->count_all_results(); // 这将获得真正的总行数

    // 现在限制行数，以便返回每页结果
    $this->db->limit($per_page, $offset);
    $result = $this->db->get();

    返回数组（
        'total_rows' => $total_rows,
        '结果' => $结果，
    ); // 将此返回给控制器。

```

我在没有测试的情况下输入了上面的代码，但它应该像这样工作。我在所有项目中都这样做。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-07-11T14:02:59.130

您实际上也不必拥有 from ，您可以像这样在 count_all_results 中包含表名。

```
$this->db->count_all_results('table_name'); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-06-21T06:30:46.517

先用 no_reset_flag 计数。

```
$this->db->count_all_results('', FALSE);
$rows = $this->db->get()->result_array(); 
```

* * *

*系统/数据库/DB_query_builder.php*

```
public function count_all_results($table = '', $reset = TRUE) { ... } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-08T00:38:00.410

这

```
$this->db->count_all_results(); 
```

实际上取代了：

```
$this->db->get(); 
```

所以你实际上不能两者兼得。

如果您想在同一查询中同时获取并计算 num 行，您可以轻松地执行以下操作：

```
$this->db->from(....);
$this->db->where(....);
$db_results = $this->get();

$results = $db_results->result();
$num_rows = $db_results->num_rows(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-02-14T06:08:26.860

试试这个

```
 /**
        * @param $column_name   :   Use In Choosing Column name
        * @param $where         :   Use In Condition Statement
        * @param $table_name    :   Name of Database Table
        * Description           :   Count all results   
        */ 
    function count_all_results($column_name = array(),$where=array(), $table_name = array())
    {
        $this->db->select($column_name);
        // If Where is not NULL
        if(!empty($where) && count($where) > 0 )
        {
            $this->db->where($where);
        }
        // Return Count Column
        return $this->db->count_all_results($table_name[0]);//table_name array sub 0
    } 
```

然后简单调用方法

像这样

```
$this->my_model->count_all_results(['column_name'],['where'],['table name']); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-10-01T16:51:01.170

如果您的查询包含 group by，则使用 count_all_results 失败。我写了一个简单的方法来解决这个问题。防止两次编写查询的关键是将它们全部放在一个可以调用两次的私有方法中。这是一些示例代码：

```
class Report extends CI_Model {
    ...
    public function get($page=0){
        $this->_complex_query();
        $this->db->limit($this->results_per_page, $page*$this->results_per_page);
        $sales = $this->db->get()->result(); //no table needed in get()

        $this->_complex_query();
        $num_results = $this->_count_results();

        $num_pages = ceil($num_results/$this->results_per_page);

        //return data to your controller
    }

    private function _complex_query(){
        $this->db->where('a', $value);
        $this->db->join('(subquery) as s', 's.id = table.s_id');
        $this->db->group_by('table.column_a');

        $this->db->from('table'); //crucial - we specify all tables here
    }

    private function _count_results(){
        $query = $this->db->get_compiled_select();
        $count_query = "SELECT count(*) as num_rows FROM (".$query.") count_wrap";
        $r = $this->db->query($count_query)->row();
        return $r->num_rows;
    }
} 
```

# c++ - C++：用2个函数重载，一个在头文件中，一个不在

> ID：14204696
> 
> 赞同：2
> 
> 时间：2013-01-07T21:53:27.970
> 
> 标签：c++, header-files, overloading

假设我在其中一个头文件中声明了一个名为“ *void f(int x)* ”的函数（在 c++ 中，VS 2010 中），然后在相应的 cpp 文件中实现了它。在尝试仅在该源文件中添加重载函数（*void f(int x, int y)*）时（标题中没有声明），我收到错误“**函数不接受 2 个参数**”。
（这个函数写在调用函数的上面）。

头文件没有任何实现的代码。

我是否违反了一些 c++ 规则，或者仅仅是因为使用了 Visual？我必须在头文件中声明所有重载函数（或根本不声明）吗？

编辑：源文件：

```
int findNodeRec(int data, NodeTree *root) 
{ 
    return 1;
}
int Tree::findNodeRec(int data) 
{ 
    return findNodeRec(data, m_root); 
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-07T21:55:35.857

问题是一个参数版本被定义为一个类成员，而两个参数版本是一个自由函数。当编译器试图找到要调用的候选对象时，它不会混合不同的范围，因此它只会看到类范围版本，然后尝试根据参数选择最佳重载。

只需调用`::f(x, y)`它，它就会在全局范围内查找 free 函数。请注意，是否在标头中声明了自由函数并不重要。编译器仍然找不到它。

# objective-c - 如果“@end”是头文件的最后一行，Xcode 4 控制拖动不会创建第一个 IBOutlet 或 IBAction

> ID：14204697
> 
> 赞同：5
> 
> 时间：2013-01-07T21:53:29.700
> 
> 标签：objective-c, xcode, cocoa, ibaction, iboutlet

我从 Single View Application for iPhone 模板开始创建了一个 Xcode 4.5.2 项目。将 UIButton 添加到 MainStoryboard.storyboard 后，我可以从按钮控制拖动到 ViewController.h 的代码以创建新的 IBOutlet 或 IBAction。 ![有额外的线](../Images/240dd29c383b55dc156ff3a7d30420f2.png)

但是，如果我删除后面的最后一行`@end`，它是空的，控件拖动不会提供创建 IBOutlet 或 IBAction。 ![无需额外线路](../Images/f948ec411be8bdcb3c742d1cad430e9c.png)

如果我将一个属性添加到 ViewController，然后控件拖动提供再次创建 IBOutlets 和 IBActions。 ![现有财产](../Images/a85ba492bd15e8715cf365eb770e1e7a.png)

*编辑 1*：正如[jhilgert00](https://stackoverflow.com/users/1126783/jhilgert00)指出的那样，添加花括号，好像是为了创建一个声明实例变量的地方，导致 Xcode 再次提供创建 IBOutlets 和 IBActions。

这是一个 Xcode 错误吗？还是我不应该在之后修剪空行`@end`？

*编辑 2*：此问题已在 Xcode 5 中修复。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T01:00:55.127

我的回答是，这是一个应该在[https://bugreport.apple.com](https://bugreport.apple.com)提交的错误，我怀疑这里的任何人都可以给出有用的答案。也就是说，在文件末尾留下空格总是一个好主意！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-07T23:33:22.163

这似乎很愚蠢，但是为您打开和关闭花括号`@interface`似乎可以解决此问题。

```
#import <UIKit/UIKit.h>

@interface ViewController : View Controller {

// Drag your IBOutlets here...

}

@end 
```

[此答案](https://stackoverflow.com/a/13831921/1126783)的屏幕截图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-10T16:00:00.593

仅供参考，这发生在我身上，因为我没有将我的 ViewController 从通用的一个更改为我试图拖动到的那个，这是有道理的。

# ruby-on-rails - 将默认值添加到另一列的迁移

> ID：14204704
> 
> 赞同：1
> 
> 时间：2013-01-07T21:53:58.947
> 
> 标签：ruby-on-rails, postgresql, ruby-on-rails-3, default-value, rails-migrations

由于 updated_at 列在更新时会查看所有属性，因此我想添加一个 new_updated_at ，我将决定它何时更新。

通过迁移插入的默认值我希望它是当前的 updated_at。

如何将迁移的默认值设置为同一行但另一列的值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T22:20:13.627

我认为您必须手动进行初始化，`up`迁移中的一些 SQL 将处理它：

```
def up
    # Add the new column...
    connection.execute('update models set new_updated_at = updated_at')
end 
```

当然，您必须`models`用您的真实表名替换。

您可能需要修改生成的迁移并将其拆分为单独的方法`up`和`down`方法，但这应该不是问题。如果您不想这样做，请编写一个单独的迁移来初始化`new_updated_at`并将上述`connection.execute`调用放入该迁移的`up`方法中。

# javascript - jquery将数据保存在数组中

> ID：14204715
> 
> 赞同：0
> 
> 时间：2013-01-07T21:55:10.517
> 
> 标签：javascript, jquery

我想将每次点击数据保存并添加到数组中。我试过这个

```
var data = [];
var save = [];
s=0;
i=0;

some called function(){
  data[i++] = some result;
  data[i++] = some other result;
}

$('#someelement').click(function(){
save[s++] = data;
console.log(save); // for debugging
i = 0;
data = '';
}); 
```

第一次保存有效，但之后我只添加了空数组。任何指针？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T21:57:59.320

这是因为您将 Array 替换为字符串。

```
data = ''; 
```

您应该用新的 Array 替换它。

```
data = []; 
```

* * *

`data`或者通过添加 to 的浅拷贝`data`来重用Array `save`，然后清除`data`.

```
save[s++] = data.slice();

data.length = i = 0; 
```

这允许具有引用的任何其他代码`data`保留其引用，以便它始终查看`data`正在更新的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T22:07:16.593

您可能想尝试制作数据数组的副本：

```
save[s++] = data.slice(0); 
```

这样，无论数据数组发生什么都不会影响保存数组的项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T21:58:10.487

你可以使用这个：

```
data[data.length] = <some value>; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T21:57:13.800

如果您尝试将数据的当前内容添加到保存中的单个元素，请使用[Array.push](http://www.w3schools.com/jsref/jsref_push.asp)：

```
$('#someelement').click(function(){
    save.push(data);
    console.log(save); // for debugging
    i = 0;
    data = [];
}); 
```

...或者如果您希望将当前值`data`添加到`save`，请使用[Array.concat](http://www.w3schools.com/jsref/jsref_concat_array.asp)，重置`data`回空数组：

```
$('#someelement').click(function(){
    save = save.concat(data);
    console.log(save); // for debugging
    data = [];
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-07T22:10:34.670

您应该使用 [] 创建新数组。

这是工作示例：

```
<script>
   var data = [];
   var save = [];
   s=0;
   i=0;

function addRes(){
    data[i++] = 'some result';
    data[i++] = 'some other result';
}

$('#someelement').click(function(){
    addRes();
    save[s++] = data;
    console.log(save); // for debugging
    i = 0;
    data = [];
});
</script> 
```

# javascript - ExtJS 面积图 - 我如何将所有区域叠加在一起并具有不同的不透明度，而不是将这些区域堆叠在一起？

> ID：14204718
> 
> 赞同：0
> 
> 时间：2013-01-07T21:55:27.933
> 
> 标签：javascript, extjs, charts, visualization

我正在使用 ExtJS 4.1 创建一个面积图，一切都很好。

我有两个区域，目前一个区域出现*在另一个区域之上*。而不是那种行为，我如何叠加所有区域？我可以更改不透明度，以便所有区域都可见。

API 文档和几个在线资源中给出的示例仅显示了堆叠行为。这是面积图的默认和唯一实现，还是我缺少一个简单的配置？

正如在[区域图表示例](http://docs.sencha.com/ext-js/4-1/#!/example/charts/Area.html)中看到的那样，我希望它们都在一个平面上，而不是一个接一个地出现所有彩色区域。

请提供您的意见和建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T21:39:07.240

请改用带填充的折线图。为我工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T16:08:03.803

这可以通过创建附加系列而不是在 y 轴上具有一组数据点的单个区域系列来完成。从 Sencha 论坛得到答案。

```
series: [
  {
    type: 'area',
    highlight: false,
    axis: 'left',
    xField: 'name',
    yField: ['data1'],
    style: {
        opacity: 0.50
    }
},
  {
    type: 'area',
    highlight: false,
    axis: 'left',
    xField: 'name',
    yField: ['data2'],
    style: {
        opacity: 0.70
    }
} 
```

# android - 安卓隐藏应用

> ID：14204720
> 
> 赞同：24
> 
> 时间：2013-01-07T21:55:34.420
> 
> 标签：android, hidden, launcher

我正在编写一个（合法的）间谍程序。我想让这个程序隐藏在启动器上（这样就不会显示图标）。我试图从中删除`<category android:name="android.intent.category.LAUNCHER" />`行`AndroidManifest.xml`，但随后用户无法以首次启动模式（配置）启动应用程序。谁有什么想法？

我该怎么做？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-01-07T22:05:35.747

您需要将您的应用程序变成服务。以下是 Android 创建服务组件的过程：

[http://developer.android.com/guide/components/services.html](http://developer.android.com/guide/components/services.html)

在 MobiWare 上也发现了这个：

当您想在用户不知情的情况下跟踪移动设备的使用情况或收集一些数据时，这可能会对您有所帮助。

Step1：创建一个没有图标的应用程序。通常，活动在清单中声明如下。

```
 <activity
        android:label="@string/app_name"
        android:name="org.security.tracker.Tracker-activity" >
        <intent-filter >
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter> 
```

删除类别标签，您将不再获得应用程序图标。现在，你不再需要活动了。所以删除这个部分。但是您可能会想，应用程序将如何在没有任何触发器的情况下运行，或者应用程序的起点是什么。这就是解决方案。

```
<!-- Start the Service if applicable on boot -->
    <receiver android:name="org.security.tracker.ServiceStarter" >
        <intent-filter >
            <action android:name="android.intent.action.BOOT_COMPLETED" />
        </intent-filter>
    </receiver> 
```

这会触发您在 Receiver 中编写的代码，您可以运行服务来实现您的想法。

```
 <service android:name="org.security.tracker.serviceCode" /> 
```

您需要添加此权限，

```
 <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" /> 
```

您的代码仅在手机重新启动时运行。

步骤 2\. 编写您的代码

在重新启动时，接收器将启动，您可以在那里启动您的服务。

```
class ServiceStarter extends BroadcastReceiver {

@Override
public void onReceive(Context _context, Intent _intent) {

    Intent i = new Intent("com.prac.test.MyPersistingService");
    i.setClass(_context, ServiceCode.class);
    _context.startService(i);
  }

 } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-07-31T10:05:48.727

您可以`<category android:name="android.intent.category.LAUNCHER"/>`从 AndroidManifest.xml 文件中删除 。

但请记住添加`<category android:name="android.intent.category.LEANBACK_LAUNCHER"/>`，以便 Android Studio 能够编译您的应用程序（但从启动器中隐藏）:) :D

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-07T22:09:55.237

消除

```
<intent-filter >
 <action android:name="android.intent.action.MAIN" />
 <category android:name="android.intent.category.LAUNCHER" />
 </intent-filter> 
```

从清单文件

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2020-10-03T14:30:10.707

该应用程序可以通过编程方式隐藏，下面是从启动器菜单中隐藏该应用程序的代码。这也适用于android 10

```
// App will be hidden when this method will be called from menu
private fun hideApp() {

    val packageManager =packageManager
    val name =ComponentName(this,MainActivity::class.java)
    packageManager.setComponentEnabledSetting(name,PackageManager.COMPONENT_ENABLED_STATE_DISABLED,PackageManager.DONT_KILL_APP)
    Log.d("TAG", "hideApp: success")
} 
```

有关更多信息，您可以查看此链接[https://developer.android.com/reference/android/content/pm/PackageManager#setComponentEnabledSetting(android.content.ComponentName,%20int,%20int)](https://developer.android.com/reference/android/content/pm/PackageManager#setComponentEnabledSetting(android.content.ComponentName,%20int,%20int))

# php - 从文件中删除扩展名

> ID：14204727
> 
> 赞同：13
> 
> 时间：2013-01-07T21:55:48.487
> 
> 标签：php, function, filenames

> **可能重复：**
> [如何从字符串中删除扩展名（只有真正的扩展名！）](https://stackoverflow.com/questions/2395882/how-remove-extension-from-string-only-real-extension)

我是 php 的新手，还有很多东西要学！我正在为我们的 King County Iris Society 网站试验 MiniGal Nano。它非常适合我们的目的，但有一个小例外：照片文件名需要在缩略图下可见。我已经创建了一个解决方法，但它显示了扩展名。我找到了函数的代码示例，但不知道如何将它们合并到现有代码中。任何帮助将不胜感激。

示例链接：[http ://www.kcis.org/kcisphotogallery.php?dir=Iris.Japanese](http://www.kcis.org/kcisphotogallery.php?dir=Iris.Japanese)

非常感谢！

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-07T21:58:48.173

有几种方法可以做到这一点，但我认为其中一种更快的方法是

```
// $filename has the file name you have under the picture
$temp = explode('.', $filename);
$ext  = array_pop($temp);
$name = implode('.', $temp); 
```

另一个解决方案是这样。我没有测试过它，但它看起来应该在一个文件名中工作多个时期

```
$name = substr($filename, 0, (strlen($filename))-(strlen(strrchr($filename, '.')))); 
```

还：

```
$info = pathinfo($filename);
$name = $info['filename'];
$ext  = $info['extension'];

// Shorter
$name = pathinfo($file, PATHINFO_FILENAME);

// Or in PHP 5.4
$name = pathinfo($filename)['filename']; 
```

在所有这些中，`$name`包含不带扩展名的文件名

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-07T22:00:17.597

你可以使用`pathinfo()`它。

```
<?php

// your file
$file = 'image.jpg';

$info = pathinfo($file);

// from PHP 5.2.0 :
$file_name = $info['filename'];

// before PHP 5.2.0 :
// $file_name =  basename($file,'.'.$info['extension']);

echo $file_name; // outputs 'image'

?> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-07T22:12:10.860

如果您确定文件扩展名总是四个字符长（例如“.jpg”），您可以简单地使用`substr()`输出文件名的位置：

```
echo substr($filename, 0, -4); 
```

如果文件扩展名中有可能包含更多或更少字符的图像（例如“.jpeg”），您将需要找出最后一个句点的位置。由于您从第一个字符输出文件名，因此该句点的位置可用于指示要显示的字符数：

```
$period_position = strrpos($filename, ".");
echo substr($filename, 0, $period_position); 
```

有关这些函数的信息，请查看位于[http://php.net/substr](http://php.net/substr)和[http://php.net/strrpos](http://php.net/strrpos)的 PHP 手册。

# actionscript-3 - AS3 麦克风 as3 一段时间后没有响应

> ID：14204740
> 
> 赞同：0
> 
> 时间：2013-01-07T21:56:40.350
> 
> 标签：actionscript-3, microphone

```
package  {

import flash.display.MovieClip;
import flash.display.Sprite;
    import flash.events.*;
    import flash.media.Microphone;
    import flash.system.Security;
import flash.external.ExternalInterface;
import fl.controls.Slider; 
import fl.events.SliderEvent; 
import fl.controls.ProgressBar; 
import flash.events.ProgressEvent; 
import fl.controls.ProgressBarMode; 
import fl.controls.ProgressBarDirection; 
import flash.media.Sound; 

public class mic extends MovieClip {

    var micr:Microphone;
    var aSlider:Slider;
    var aPb:ProgressBar;
    var timeout:Number=1000;

    public function mic() {
        micr = Microphone.getMicrophone();
        micr.gain=60;
        micr.rate=5; 
        micr.setSilenceLevel(7,timeout);
        Security.showSettings("2");
        micr.setUseEchoSuppression(true);
        micr.setLoopBack(true);

        aSlider = new Slider(); 
        aSlider.width = 200; 
        aSlider.height = 3;
        aSlider.snapInterval = 1; 
        aSlider.tickInterval = 1; 
        aSlider.maximum = 20; 
        aSlider.minimum = 3; 
        aSlider.value = micr.silenceLevel;
        aSlider.move(25, 110);
        addChild(aSlider); 

        aPb = new ProgressBar(); 
        aPb.width = 200; 
        aPb.height = 3;
        aPb.move(25,130); 
        aPb.direction = ProgressBarDirection.RIGHT; 
        aPb.mode = ProgressBarMode.MANUAL; 
        aPb.minimum = 0; 
        aPb.maximum = 100; 
        addChild(aPb); 

        if (micr != null) {
            micr.setUseEchoSuppression(true);
            micr.addEventListener(ActivityEvent.ACTIVITY, activityHandler);
            micr.addEventListener(StatusEvent.STATUS, statusHandler);
            aSlider.addEventListener(SliderEvent.CHANGE, changeHandler); 

        }
    }

      private function activityHandler(event:ActivityEvent):void {
        if(event.activating){
            ExternalInterface.call("noiseEvent()");
            trace("activating=" + event.activating + ", activityLevel=" +  this.micr.activityLevel); 
        }
        aPb.setProgress(this.micr.activityLevel, aSlider.value); 
    }

    private function statusHandler(event:StatusEvent):void {
        trace("statusHandler: " + event);
    }

    private function changeHandler(event:SliderEvent):void { 
        micr.setSilenceLevel(event.target.value, timeout);
    }
}

} 
```

我需要监控麦克风活动，然后调用一些 js 函数。这是我拥有的全部代码。它工作正常，但大约 5 分钟。然后没有反应。有什么建议么？

MacOSx ML，Adobe Flash Player 11.5.31.5 Shockwave Flash 11.5 r31

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T22:32:19.760

似乎它只发生在 Mac Google Chrome 23.0.1271.101 中......

MAC：Safari，Firefox - 有效

Win8：Chrome，Firefox - 有效

# vim - 具有随机多个根的 Vim 文件浏览器

> ID：14204741
> 
> 赞同：0
> 
> 时间：2013-01-07T21:56:42.300
> 
> 标签：vim

我喜欢[Sublime Text](http://www.sublimetext.com/)的一件事是您可以拖动左侧面板中的任何文件夹，并且该文件夹可以独立于其他文件夹进行扩展。如何在 Vim 中实现相同的功能？

我目前正在使用目前支持单个根的 NERDTree。当您打开另一个文件夹时，它会替换当前的层次结构。所以我不介意放弃这个插件来支持另一种解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T00:55:02.810

Vim 附带的*netrw*插件允许打开多个不同的分割到不同的位置，例如垂直使用`:Vexplore`.

要使其显示递归树，请使用：

```
:let g:netrw_liststyle=3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T11:54:11.483

我不知道有什么插件可以做到这一点，但是从我对 NERDTree 源代码的简短尝试中，我知道修改插件来做你想做的事情并不是不可能的。这将涉及深入研究逻辑并修改/注释掉搜索和重用当前 NERDTree 缓冲区的部分。如果您熟悉 Vimscript，这不是一个巨大的挑战。（也许您甚至可以为其引入配置设置并将其发送给作者以包含在内。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T11:31:47.870

我花了一段时间，但我设法解决了一些问题。
我把它做成了一个单独的插件：[Vimpanel](http://mihaifm.github.com/vimpanel/)

除了能够拥有多个根的“杀手级功能”之外，我还放了很多其他有用的东西。

# java - 从 java Scanner 获取单独的字符

> ID：14204742
> 
> 赞同：2
> 
> 时间：2013-01-07T21:56:50.273
> 
> 标签：java

在 Java 的 Scanner 类中，为什么语法不存在，是否有一个命令会在不使用变量`nextChar()`的情况下做类似的事情？`String`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T21:58:29.587

两种解决方案：

*   use `toCharArray()`：这将返回一个`char[]`你可以使用 foreach 循环的对象；
*   将字符串长度与`.charAt()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T22:04:44.647

Java 的 Scanner 类对标记（完整的输出单元）进行操作。这通常是完整的单词、文本行、数字（整数、双精度数、浮点数等）。如果你想读取单个字符，你应该在这样的结构中使用 BufferedReader

```
BufferedReader in = new BufferedReader(new InputStreamReader(System.in)); 
```

替换`System.in`为您用于扫描仪的任何输入。然后用于`char c = (char)in.read()`从输入中读取下一个字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T22:05:59.430

如果您想要 char 级别的访问权限，您可以转到下面的级别并简单地使用 InputStream 接口：

```
public class Test
{
    public static void main(String[] args) throws Exception
    {
        while (true)
        {
            char c = (char)System.in.read();
            System.out.println("[" + c + "]");
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-12-01T09:46:19.000

```
Scanner s = new Scanner(System.in);
s.next(“.{1,}”); 
```

因此，您可以使用`Scanner#next()`方法并传递仅使用一个字符作为参数的正则表达式。
您可以使用上面的示例。

# regex - 带有通配符的不正确子目录需要 htaccess 重定向规则

> ID：14204746
> 
> 赞同：1
> 
> 时间：2013-01-07T21:57:02.577
> 
> 标签：regex, .htaccess, wildcard, subdirectory

我需要帮助编写 htaccess 重定向或重写规则 (mod_rewrite.c) 来处理以下情况：

`http://www.mysite.com/archive/[YEAR]/archive/[YEAR]/[CORRECT-PATH]`

应该重定向到：

`http://www.mysite.com/archive/[YEAR]/[PATH]`

基本上，有一些外部链接`/archive/[YEAR]/`在路径部分错误地加倍，其中应该只有一个实例。我每年都有一个子目录（/archive/2011、/archive/2012 等）——这些年份的目录是单独的 Drupal 安装的根目录——每个目录都有自己的 .htaccess 文件（这让我很吃惊）。

该`[CORRECT-PATH]`位通常是 Drupal 页面的别名，例如：

`http://www.mysite.com/archive/2012/winners/all`

我对通配符和匹配语法不太擅长 - 任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T00:12:52.817

尝试将这些规则添加到您的文档根目录：

```
RewriteEngine On
RewriteRule ^/?archive/([0-9]{4})/archive/\1/(.*)$ /archive/$1/$2 [L,R=301] 
```

这将检查任何 4 位数年份的年份是否重复。所以：

1.  `http://www.mysite.com/archive/1234/archive/2345/blah/blah`什么也没做
2.  `http://www.mysite.com/archive/2345/archive/2345/blah/blah`被重定向到
    `http://www.mysite.com/archive/2345/blah/blah`
3.  `http://www.mysite.com/archive/1234/blah/blah`什么也没做。

* * *

再次查看您的问题后，您需要为每个`/archive/[YEAR]`目录添加规则：

```
RewriteEngine On
RewriteBase /archive/2011/
RewriteRule ^archive/[0-9]{4}/(.*)$ $1 [L,R=301] 
```

并`RewriteBase`为您的每个目录更改。

# jquery - 用另一种风格的 css 改变 jQ ui-accordion-content

> ID：14204748
> 
> 赞同：0
> 
> 时间：2013-01-07T21:57:07.543
> 
> 标签：jquery, css, accordion

我一直在愚弄这件事，一定错过了一个事实。我在手风琴里面有一张桌子。该表有 trows 和 tdata。

```
<tr class='edit'> 
```

它拿起

```
ui-widget-content{ color:#99cc33; } 
```

（即萤火虫）

因为我只想更改行颜色，而不是其余的小部件内容。

```
<tr class='edit table-data'> 
```

并设置

```
.table-data{ color:#cccccc; } 
```

我认为这会起作用？？？

```
class='edit' 
```

是一个

```
$('form').on( { mouseenter: function() { ... 
```

效果很好，所以我已经注释掉以保持简单。

有人请赐教，在此先感谢。

```
.edit.table-data{ color:#cccccc; } fails 
```

正如下面评论中提到的，我正在尝试在 CSS 到达
客户端之前更改它。$('form').on() 随着客户的动作改变颜色就好了。

已解决- css .edit 中的错误 这里的教训似乎是不正确的 css 不是“完全忽略”。例如

```
 <tr class='edit data'> 
```

如果 .edit 失败，虽然正确的 .data 将不起作用。（至少使用 jQuery）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T22:17:55.280

如果我理解正确，您需要使用 CSS 特异性将表格内容恢复为原始颜色：

```
.table-data { color:#cccccc; }
.table-data .other-stuff { color: #000; } 
```

# jquery - jQuery AJAX call not accepting response data

> ID：14204759
> 
> 赞同：1
> 
> 时间：2013-01-07T21:57:26.933
> 
> 标签：jquery, ajax

Based on this [SO answer](https://stackoverflow.com/a/1801515/84162), I'm doing this:

```
$(document).ready(function () {
    $('#stateid').change(function () {
        $.ajax({
            url: "/admin/state_teamlist.php",
            data: {
                stateid: $("#stateid").val()
            },
            dataType: "json",
            success: function (json) {
                $('#teamid').empty().each(json, function (value, key) {
                    $('#teamid').append($("<option></option>")
                        .attr("value", value).text(key));
                });
            }
        });
    });
}); 
```

Data returned is valid JSON (from PHP's json_encode):

```
{"16734":"Anchorage Christian","12241":"Barrow","1060":"Bartlett","1064":"Chugiak","5802":"Colony","1061":"Dimond","1058":"Eagle River","1063":"East","3943":"Eielson","7104":"Homer","11597":"Houston","5568":"Juneau-Douglas","10229":"Kenai Central","14260":"Ketchikan","9444":"Kodiak","8443":"Lathrop","12152":"Monroe Catholic","7554":"Nikiski","4082":"North Pole","1065":"Palmer","1057":"Service","14370":"Seward","12271":"Sitka","11780":"Skyview","3308":"Soldotna","844":"South","9919":"Thunder Mountain","13803":"Valdez","9766":"Wasilla","1059":"West","1062":"West Valley"} 
```

But I'm getting this error:

Uncaught TypeError: Object # has no method 'apply'

The error line in jquery.JS is:

```
if ( callback.apply( obj[ i++ ], args ) === false ) { 
```

The full part around this is:

```
// args is for internal usage only
    each: function( obj, callback, args ) {
        var name,
            i = 0,
            length = obj.length,
            isObj = length === undefined || jQuery.isFunction( obj );

        if ( args ) {
            if ( isObj ) {
                for ( name in obj ) {
                    if ( callback.apply( obj[ name ], args ) === false ) {
                        break;
                    }
                }
            } else {
                for ( ; i < length; ) {
                    if ( callback.apply( obj[ i++ ], args ) === false ) {
Uncaught TypeError: Object #<Object> has no method 'apply'
                        break;
                    }
                }
            }

        // A special, fast, case for the most common use of each
        } 
```

The teamid select list empties correct, but isn't repopulated with the JSON data. I can post the HTML if needed, but I don't think that's a problem.

I've been through every SO answer on the topic but none of the solutions have fit my problem. Why am I getting this error?

I've tried jquery.min.js, different versions of jquery, changin the `$('teamid')` to the `$el` like in the references SO answer, and using .post and .get instead of .ajax and nothing seems to solve it. Please help.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T22:02:19.760

Your `each` in success callback isn't correct.

Chnage :

```
$('#teamid').empty().each(json, function (value, key) {.. 
```

TO:

```
$('#teamid').empty();
$.each(json, function (value, key) {... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T22:01:41.377

Why are you chaining `empty()` and `$.each` ? It doesn't make sense to chain them in this particular example.

```
$('#teamid').empty().each(json, function (value, key) {
     $('#teamid').append($("<option></option>").attr("value", value).text(key));
 }); 
```

Do one at a time.

```
 $('#teamid').empty(); 
  $.each(json, function (value, key) {
      $('#teamid').append($("<option></option>").attr("value", value).text(key));
  }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T22:02:10.733

Your use of .each is simply wrong.

```
$('#teamid').empty().each(json, function (value, key) {
    ...
}); 
```

In this case, jQuery tries to execute the json *function* (which isn't a function at all) for each `#teamid` element using the function's .apply method. Your json object doesn't have an apply method (and it shouldn't as json strings can't contain functions) hence the error.

Try this instead:

```
$("#teamid").empty();
$.each(json, function (value, key) {
    $('#teamid').append($("<option></option>").val(value).text(key));
}); 
```

# php - 多个条件

> ID：14204760
> 
> 赞同：2
> 
> 时间：2013-01-07T21:57:43.810
> 
> 标签：php

我是 php 新手，遇到了一些麻烦。我想在我博客的第 3 篇和第 6 篇文章中添加相同的小部件。我目前有

```
<div class="addArea">
                    <?php $i++;
                    if($i==3){get_sidebar(add);} ?>
</div> 
```

添加它适用于第三个帖子，但我如何将它添加到第六个帖子？

我尝试了以下但没有运气

```
<div class="addArea">
                    <?php $i++;
                    if($i==2){get_sidebar(add);} if($i==3){get_sidebar(add);} ?>
</div> 
```

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T22:02:14.173

```
<div class="addArea">
<?php 
     $i++;
     if ($i == 3 || $i == 6) { get_sidebar(add); } 
?>
</div> 
```

# ios - iOS：SocketRocket Mach-o 链接器错误

> ID：14204761
> 
> 赞同：0
> 
> 时间：2013-01-07T21:57:45.483
> 
> 标签：ios, linker-errors, socketrocket

我正在尝试将 SocketRocket 用于 iOS 项目，我正在开发...我一直按照[Socket Rocket - 安装 iOS](https://github.com/square/SocketRocket#installing-ios) 并使用提供的聊天示例作为指南的说明进行操作，但是当我使用时：

```
_webSocket = [[SRWebSocket alloc] initWithURLRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"ws://localhost:9000/chat"]]]; 
```

它抛出两个 Mach-O 链接器错误：

1：“_OBJC_CLASS_$_SRWebSocket”，引用自：HTViewController.o 中的 Objc-class-ref 未找到架构 i386 的符号

2：链接器命令失败，退出代码为 1（使用 -v 查看调用）

据我所知，我已经包含了正确的框架/dylibs（如 GitHub 上所述），并且我已将 -ObjC 添加到“其他链接器标志”选项中......我可能缺少什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T22:02:19.697

您必须`SRWebSocket`使用 i386 架构构建库。

[`Cocoapods`](http://cocoapods.org)您可以通过使用XCode之类的包管理器来避免此类错误。他们也有包中的`SRWebSocket`库[`SocketRocket`](http://cocoapods.org/?q=socketrocket)。

**编辑：**

如果该版本不是您想要的，您可以分叉[`Cocoapods Specs`](https://github.com/CocoaPods/Specs)存储库并将 Pod 升级到最新`SocketRocket`版本。

`pod repo`然后，您还可以使用命令将您的分叉存储库添加到本地 Cocoapods 安装中。

# html - Windows 8：使用 HTML5/CSS 创建 AppBar 样式按钮

> ID：14204763
> 
> 赞同：0
> 
> 时间：2013-01-07T21:57:48.027
> 
> 标签：html, css, windows-8, appbar

对于 Windows 8 应用程序，我可以使用“Segoe UI 符号”创建 AppBar 样式按钮，但它们已在矩形区域中绘制，因此具有矩形背景。因为我想在悬停期间将它们的背景设置为不同的颜色，所以我需要去掉这个矩形。

正如下面的问题所指出的，按钮和样式的定义如图所示。

请指导如何实现这一点。

[从角色创建图像](https://stackoverflow.com/questions/12037888/create-image-from-character/12039643#12039643)

HTML：

```
<button id="myAppBarIcon" class="normal-size-icon">&#xE1D8;</button> 
```

CSS：

```
.normal-size-icon {
    margin-top: 400px;
    margin-left: 630px;
    position: relative;
    font-size: 24px;
    font-family: 'Segoe UI Symbol';
    color: rgb(255, 255, 255);
    background: none;
    border: none;
} 
```

更新：

下面的代码可以解决问题，但字体没有正确对齐。可能是因为它没有正确对齐。下图显示了布局。

```
.normal-size-icon {
    font-size: 24px;
    font-family: 'Segoe UI Symbol';
    color: rgb(555, 255, 255);
    min-width: 0;
    min-height: 0;
    border-radius: 50%;
    border-style: solid;
    padding: 0;
    text-align: center;
} 
```

![字体未正确对齐](../Images/3e92db1a3621ea0a8fa13039a0a01db8.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T04:13:22.047

对于这一点，您需要进行设置`border-radius:50%;`，以便您的按钮将形状更改为圆形，然后添加`min-width:0; min-height:0;`，`text-align:center;`这是完整的 css：

```
.normal-size-icon {
    font-size: 24px;
    font-family: 'Segoe UI Symbol';
    color: rgb(555, 255, 255);
    min-width: 0;
    min-height: 0;
    border-radius: 50%;
    border-style: solid;
    padding: 0;
    text-align: center;
} 
```

如果你不需要边框，你可以设置`border:none;`. 对不起，我的英语不好

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T01:39:16.363

此行为由 驱动，`CSS hover selector`按钮的默认 CSS 将提供与浅色或深色主题对齐的内容，例如，

```
button:hover, input[type=button]:hover, input[type=reset]:hover,
input[type=file]::-ms-browse:hover {
    background-color: rgba(255, 255, 255, 0.13);
    border-color: rgb(255, 255, 255);
} 
```

您可以使用以下内容非常具体地覆盖它：

```
.normal-size-icon:hover {
    background-color: red;
} 
```

但是您可能希望对其他状态和对象进行类似处理。

看看你的参考文献中包含的`ui-light.css`and ；`![ui-dark.css][1]`所有的答案都在那里:)

![在此处输入图像描述](../Images/6a46c8b505fe9e48f74e4fe2d901105f.png)

# javascript - 当我尝试在 IE9 中打开时，我不断收到 SCRIPT1014: Invalid character LINE1 AND CHARACTER1

> ID：14204767
> 
> 赞同：-1
> 
> 时间：2013-01-07T21:57:57.943
> 
> 标签：javascript, internet-explorer-9, ie-developer-tools

> **可能重复：**
> [SCRIPT1014：无效字符](https://stackoverflow.com/questions/6261256/script1014-invalid-character)

我的 HTML 代码是

```
<html>

<head>

<style type="text/css">
#p1 span {
width: 65px;
display: block;
float: left;
}

</style>

</head>

<body>

<script charset="UTF-8"      src="C:\Users\Chris\Documents\Projects\HTML_XML_JAVASCRIPT\jscodeloginpage.js"></script>

<h1 style="text-align:center;" STYLE="font-family:verdana;">FDM Markets</h1>
<h2 style="text-align:center;">Trading Platform</h2></br>

<p1>Login</p1></br>
</br>

<form name="anyForm">
Username: 
<input type="text" name="anyName" size="15" onKeyUp="Complete(this, event)">
</br>
Password: <input type="text" size="15" name="password_box">
</form>

<span id="clock" style=font-size: 12">&nbsp;</span>

</body>

</html> 
```

我单独的 js 文件是

```
function Complete(obj, evt) {

var names = new Array("albert","alessandro","chris");
    names.sort();

if ((!obj) || (!evt) || (names.length == 0)) {
    return;
}

if (obj.value.length == 0) {
    return;
}

var elm = (obj.setSelectionRange) ? evt.which : evt.keyCode;

if ((elm < 32) || (elm >= 33 && elm <= 46) || (elm >= 112 && elm <= 123)) {
    return;
}

var txt = obj.value.replace(/;/gi, ",");
elm = txt.split(",");
txt = elm.pop();
txt = txt.replace(/^\s*/, "");

if (txt.length == 0) {
    return;
}

if (obj.createTextRange) {
    var rng = document.selection.createRange();
    if (rng.parentElement() == obj) {
        elm = rng.text;
        var ini = obj.value.lastIndexOf(elm);
    }
} else if (obj.setSelectionRange) {
    var ini = obj.selectionStart;
}

for (var i = 0; i < names.length; i++) {
    elm = names[i].toString();

    if (elm.toLowerCase().indexOf(txt.toLowerCase()) == 0) {
        obj.value += elm.substring(txt.length, elm.length);
        break;
    }
}

if (obj.createTextRange) {
    rng = obj.createTextRange();
    rng.moveStart("character", ini);
    rng.moveEnd("character", obj.value.length);
    rng.select();
} else if (obj.setSelectionRange) {
    obj.setSelectionRange(ini, obj.value.length);
        }
}

function tick() {

  var hours, minutes, seconds, ap;
  var intHours, intMinutes, intSeconds;
  var today;

  today = new Date();

  intHours = today.getHours();
  intMinutes = today.getMinutes();
  intSeconds = today.getSeconds();

  switch(intHours){

case 0: 

  intHours = 12;
      hours = intHours+":";
      ap = "A.M.";
      break;

case 12:

  hours = intHours+":";
      ap = "P.M.";
      break;

case 24:

  intHours = 12;
      hours = intHours + ":";
      ap = "A.M.";
      break;

default: 

  if (intHours > 12)

    {
        intHours = intHours - 12;
        hours = intHours + ":";
        ap = "P.M.";
        }

  if(intHours < 12)

   {
       hours = intHours + ":";
       ap = "A.M.";
       }

   break;

  } 

  if (intMinutes < 10) {
    minutes = "0"+intMinutes+":";
  } 

  else {
    minutes = intMinutes+":";
  }

  if (intSeconds < 10) {
    seconds = "0"+intSeconds+" ";
  } 

  else {
    seconds = intSeconds+" ";
  } 

  timeString = hours+minutes+seconds+ap;

  document.getElementById("clock").firstChild.nodeValue = timeString;

  window.setTimeout("tick()", 100);

  }

  window.onload=tick; 
```

当我尝试在 IE9 中打开 html 文件时，控制台中出现错误并显示： SCRIPT1014: Invalid character LINE1 AND CHARACTER1 The code works in Google Chrom tho 为什么它在 IE9 中不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T22:05:59.747

在您的代码示例中，我没有看到您的起始 html 标记。这可能是您错误的原因吗？

# actionscript-3 - 这个加载外部 swf 的 AS3 代码的空对象错误是什么？

> ID：14204769
> 
> 赞同：1
> 
> 时间：2013-01-07T21:58:05.390
> 
> 标签：actionscript-3, null, flash

当我为登录按钮添加鼠标事件侦听器时，出现空对象错误。（看构造函数中的注释）

我使用的是 Flash CS6，logInbutton 和 screen_log_in 等对象是 .fla 文件中的实例名称。这是 .as 文件。

我得到的错误是：

```
TypeError: Error #1009: Cannot access a property or method of a null object reference.
    at actions::indexPage() 
```

我的 AS3 代码：

```
package actions
{
    import flash.display.MovieClip;
    import flash.events.Event;
    import flash.events.ProgressEvent;
    import flash.events.IEventDispatcher;
    import flash.net.URLRequest;
    import flash.display.Loader;
    import fl.motion.MotionEvent;
    import flash.events.MouseEvent;

public class indexPage extends MovieClip
{
    public function indexPage():void
    {
        loadSWF("http://mathlympics.cu.cc/loginsystem.swf");

        //THIS IS THE LINE WHICH IS CAUSING THE ERROR
        //WHEN I COMMENT IT OUT THE ERROR IS GONE
        logInButton.addEventListener(MouseEvent.CLICK, goToLogIn);
    }

    var _swfLoader:Loader;
    var _swfContent:MovieClip;

    public function loadSWF(path:String):void 
    {
       var _req:URLRequest = new URLRequest();
       _req.url = path;

       _swfLoader = new Loader();
       setupListeners(_swfLoader.contentLoaderInfo);

       _swfLoader.load(_req);
    }

    function setupListeners(dispatcher:IEventDispatcher):void 
    {
       dispatcher.addEventListener(Event.COMPLETE, addSWF);
    }

    function addSWF(event:Event):void 
    {
       event.target.removeEventListener(Event.COMPLETE, addSWF);
       event.target.removeEventListener(ProgressEvent.PROGRESS, preloadSWF);
       _swfContent = event.target.content;
       screen_log_in.addChild(_swfContent);
    }

    function unloadSwf():void
    {
        _swfLoader.unloadAndStop();
        screen_log_in.removeChild(_swfContent);
        _swfContent = null;
    }

    function goToLogIn(e:MouseEvent):void
    {
        unloadSwf();
        screen_log_in.loadSWF("http://mathlympics.cu.cc/loginsystem.swf");
    }

    function goToRegister(e:MouseEvent):void
    {
        unloadSwf();
        screen_log_in.loadSWF("http://mathlympics.cu.cc/register.swf");
    }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T22:41:15.373

在阶段可用之前，您无法访问阶段。

```
public function indexPage():void
{
    addEventListener(Event.ADDED_TO_STAGE,init)
}

public function init(e:Event):void
{
    removeEventListener(Event.ADDED_TO_STAGE,init)
    loadSWF("http://mathlympics.cu.cc/loginsystem.swf");

    //THIS IS THE LINE WHICH IS CAUSING THE ERROR
    //WHEN I COMMENT IT OUT THE ERROR IS GONE
    logInButton.addEventListener(MouseEvent.CLICK, goToLogIn);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T00:26:53.540

我只是为未来的访客回答我的问题。我注意到问题的原因能够弄清楚，但我想出的是如何解决它。我只是将我的代码从文档类复制到框架中，它在那里工作得非常好。

# android - 在 Android 中使用 Layouts 定位按钮

> ID：14204775
> 
> 赞同：0
> 
> 时间：2013-01-07T21:58:30.713
> 
> 标签：android, android-layout

几个小时后，我无法修复活动底部的按钮。要么是不可见的，要么是在顶部。我也试过没有相对布局，我尝试添加另一个线性布局，但我仍然不知道如何设置这个按钮。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".News" >

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:src="@drawable/news" />

    <WebView
        android:id="@+id/webView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />

    <Button
        android:id="@+id/newsbutton"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:text="Chiudi" />

</LinearLayout>
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T22:10:17.323

```
<RelativeLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

    <ImageView
            android:id="@+id/imageView1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:src="@drawable/news" />

    <WebView
            android:id="@+id/webView1"
            android:layout_below="@id/imageView1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" />

    <Button
            android:id="@+id/newsbutton"
            style="?android:attr/buttonStyleSmall"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="bottom"
            android:layout_alignParentBottom="true"
            android:text="Chiudi" />
</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T22:19:24.283

首先，您在旧版 Android 布局编辑器中有一个警告，即 RelativeLayout 或 LinearLayout 无用。这应该给你一个提示。注意警告，它们在大多数情况下都很有用。

事实上，你可以**摆脱 LinearLayout**。

所以，解决方案是：

1.  **删除线性布局。**
2.  **添加`android:layout_below="@+id/imageView1"`到 Web 视图。**
3.  **添加`android:layout_alignParentBottom="true"`到按钮。**
4.  添加`android:contentDescription`到图像视图。
5.  使用 @string 而不是硬编码的字符串。

可选步骤未加粗，它们将删除警告。

整个工作代码，在 Android 4.1.2 下测试：

```
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

<ImageView
        android:id="@+id/imageView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:contentDescription="TODO: DESCRIPTION"
        android:src="@drawable/ic_launcher" />

<WebView
    android:id="@+id/webView1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/imageView1" />

<Button
        android:id="@+id/newsbutton"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="bottom"
        android:layout_alignParentBottom="true"
        android:text="Chiudi" />

</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T00:26:23.930

将以下内容复制粘贴到您的按钮组件中；）

```
 android:layout_marginBottom="147dp"
    android:layout_marginTop="50dp"
    android:layout_marginleft="50dp"
    android:layout_marginRight="47dp" 
```

只玩数字，我肯定会掌握它的:)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-07T22:09:58.210

只需在按钮中添加 android:layout_below="@id/webView1" 即可。

如果您要使用 LinearLayout，您可以像这样设置应该填充空白空间的 Widget：layout_height="0dp" 和 layout_weight="1"。这也应该完成这项工作。

# java - Java 中的 B+-树

> ID：14204776
> 
> 赞同：-2
> 
> 时间：2013-01-07T21:58:32.297
> 
> 标签：java, b-tree

我想用 Java 创建一个简单的 B+-Tree 实现，我需要一些帮助。我希望我的程序实现这些功能：搜索、插入、删除。

我的问题：

1.  用来表示树的最佳数据结构是什么？我在想TreeMap。
2.  在 B+-Tree 中，数据仅存储在叶节点 (K,V) 中，并且在内部节点中，而不是每条记录中的数据，都有一个指向子节点 (K,P) 的指针。我想要一个关于如何指向另一个节点的建议，因为我不能在 java 中使用指针。

另外，如果您有任何建议或者您有一个简单的实现我可以用作参考，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-07T22:33:52.410

B-tree（或任何存在的小变体）的全部意义在于将数据存储在磁盘上，以便可以通过少量磁盘访问来读取它。如果您要将所有内容都保存在内存中，则应该使用平衡二叉搜索树（可能是红黑树或展开树），甚至是香草 BST，但您的问题似乎都没有考虑到这一事实。

> 1.  用来表示树的最佳数据结构是什么？我在想TreeMap。

`TreeMap`是一种内存数据结构，因此尚不清楚这将如何帮助表示磁盘树。此外，这为您实现了一个二叉搜索树，因此如果您使用`TreeMap`.

> 2.  在 B+-Tree 中，数据仅存储在叶节点 (K,V) 中，并且在内部节点中，而不是每条记录中的数据，都有一个指向子节点 (K,P) 的指针。我想要一个关于如何指向另一个节点的建议，因为我不能在 java 中使用指针。

您不需要实际的指针来表示 B 树，只需要文件偏移量。您需要定义一种表示这些偏移量的方法（从文件开头开始的字节数或块数，具体取决于实现的其余部分的结构）并根据文件偏移量访问所有内容。事实上，您不应该*使用*标准 C 风格的指针来指向 B+-树中的节点。如果你这样做了，那么下次程序启动时这些指针将毫无意义，因此你将失去磁盘数据结构的持久性优势。

要干净地访问文件内容，我建议使用[内存映射](http://en.wikipedia.org/wiki/Memory-mapped_file)。在 Java 中创建内存映射文件对象的一种有用方法是[FileChannel.map](http://docs.oracle.com/javase/7/docs/api/java/nio/channels/FileChannel.html#map%28java.nio.channels.FileChannel.MapMode,%20long,%20long%29)。该方法返回一个[MappedByteBuffer](http://docs.oracle.com/javase/7/docs/api/java/nio/MappedByteBuffer.html)，您可以使用它来读取特定文件偏移量处的一大块字节。

# ruby - 在 padrino 框架内处理文件上传

> ID：14204777
> 
> 赞同：0
> 
> 时间：2013-01-07T21:58:37.157
> 
> 标签：ruby, file-upload, sinatra, padrino

我正在使用带有 Padrino 的 Sinatra 框架构建一个小文件上传服务。我对 html、php、rails 样式开发的整个世界都很陌生。仅使用[file_field_tag](http://www.padrinorb.com/guides/application-helpers#form-helpers)时，我可以生成一个通用的 html 文件字段标签，但正如我的圣经[w3school](http://www.w3schools.com/tags/tag_input.asp)所说，该标签仅生成文件的链接，我需要制作一个 ASP、PHP 文件来处理实际上传文件。

那么这里发生了什么？我是否需要创建自己的位于框架之外的 php 操作命令？这似乎是错误的解决方案。我宁愿让 padrino 处理文件的实际上传。当我咬紧牙关时，我写了一个很小的 ​​php 脚本，但是当我只想运行我的 php 脚本时，我的 padrino 表单填充器将“myaction.php”视为一个帖子页面。

# .htaccess - .htaccess 页面问题，像文件夹一样访问的图像

> ID：14204778
> 
> 赞同：0
> 
> 时间：2013-01-07T21:58:41.070
> 
> 标签：.htaccess, mod-rewrite

这个区域不是我最强的区域。但是感觉我有一个大概的了解。

好的，所以我的问题是这个。我有一家我工作的公司，出于某种原因，这些可以访问：

[http://www.pets4you.com/cats/](http://www.pets4you.com/cats/)（错了，应该不能和没有文件夹叫猫） [http://www.pets4you.com/cats.html](http://www.pets4you.com/cats.html)（正确的网址）

变得更好：pets4you.com/images/classifieds/ad_8e286189f9c4e622ea12ebdcdd10b646（嗯？）pets4you.com/images/classifieds/ad_8e286189f9c4e622ea12ebdcdd10b646.jpg

（无法制作 URL，我猜这里有 2 个链接限制）

我的托管公司告诉我这是：

```
RewriteEngine on
RewriteCond %{REQUEST_METHOD} ^(TRACE|TRACK)
RewriteRule .* - [F] 
```

我告诉他们他们错了。那是一个痕迹，并且评论它不会改变任何东西。

任何方式，我的代码（是的，很多东西，告诉我的老板！）：

```
Options +FollowSymLinks
Options -Indexes

RewriteEngine on
RewriteCond %{REQUEST_METHOD} ^(TRACE|TRACK)
RewriteRule .* - [F]

<IfModule mod_rewrite.c>
   RewriteCond %{HTTPS} !=on
   RewriteCond %{HTTP_HOST} !^www\..+$ [NC]
   RewriteRule ^ http://www.%{HTTP_HOST}%{REQUEST_URI} [R=301,L]

    RewriteCond %{REQUEST_URI} /+[^\.]+$
    RewriteRule ^(.+[^/])$ %{REQUEST_URI}/ [R=301,L]
</IfModule>

RewriteRule ^(.*\.(css|js))$ min/index.php?f=$1&debug=0 [L]
RewriteRule ^(.*)index.php$ http://www.pets4you.com/$1 [R=301,L]

# BEGIN COMPRESSION AND CACHING
<IfModule mod_deflate.c>
    # Enable compression
    # AddOutputFilterByType DEFLATE text/css text/javascript application/x-javascript text/html text/plain text/xml image/x-icon
    AddOutputFilterByType DEFLATE text/plain
    AddOutputFilterByType DEFLATE text/html
    AddOutputFilterByType DEFLATE text/xml
    AddOutputFilterByType DEFLATE text/css
    AddOutputFilterByType DEFLATE application/xml
    AddOutputFilterByType DEFLATE application/xhtml+xml
    AddOutputFilterByType DEFLATE application/rss+xml
    AddOutputFilterByType DEFLATE application/javascript
    AddOutputFilterByType DEFLATE application/x-javascript

    <IfModule mod_setenvif.c>
        BrowserMatch ^Mozilla/4 gzip-only-text/html
        BrowserMatch ^Mozilla/4\.0[678] no-gzip
        BrowserMatch \bMSIE !no-gzip !gzip-only-text/html
        BrowserMatch \bMSI[E] !no-gzip !gzip-only-text/html
    </IfModule>
    <IfModule mod_headers.c>
        # Make sure proxies deliver correct content
        Header append Vary User-Agent env=!dont-vary
        # Ensure proxies deliver compressed content correctly
        Header append Vary Accept-Encoding
    </IfModule>
</IfModule>
<IfModule mod_headers.c>
    # No ETags, No Pragma
    Header unset Pragma
    Header unset ETag
    # Default cache time to 1 year (31536000 sec)
    Header set Cache-Control "max-age=31536000, public, must-revalidate"
</IfModule>

# No ETags
FileETag none
# CACHE SETTINGS (mod_expires)

<IfModule mod_expires.c>
    # Turn on Expires
    # set default to "access plus 1 year"
    ExpiresDefault A31536000
    ExpiresActive On
    # html - "modification plus 1 hour"
    ExpiresByType text/html M3600
    # css and JavaScript - "modification plus 6 weeks"
    ExpiresByType text/css M3628800
    ExpiresByType text/javascript M3628800
    ExpiresByType application/x-javascript M3628800
</IfModule>

# No cache for php-files
<FilesMatch "\.(php)$">
    <IfModule mod_expires.c>
        ExpiresActive Off
    </IfModule>
    <IfModule mod_headers.c>
        Header set Cache-Control "private, no-cache, no-store, proxy-revalidate, no-transform"
    </IfModule>
</FilesMatch> 
<IfModule mod_php5.c>
    #php_value output_handler ob_gzhandler
    php_flag display_errors Off
    php_flag log_errors On
    php_value upload_max_filesize 500M
    php_value post_max_size 500M
    php_value memory_limit 1000M
    php_flag zlib.output_compression on
    php_value zlib.output_compression_level 2
    php_flag magic_quotes_gpc Off
    php_flag magic_quotes_runtime Off
    php_flag zend.ze1_compatibility_mode Off
    php_value mbstring.func_overload 0
    php_flag suhosin.session.encrypt Off
    php_value session.auto_start 0
    php_value session.gc_maxlifetime 54000
    php_value session.gc_divisor 500
    php_value session.gc_probability 1
    php_value mysql.connect_timeout 1000
    php_value mysql.allow_persistent Off
</IfModule>
##############
# ERROR PAGES#
##############
ErrorDocument 401 /errors.php?code=401
ErrorDocument 500 /errors.php?code=500
ErrorDocument 403 /errors.php?code=403
ErrorDocument 400 /errors.php?code=400
ErrorDocument 404 /errors.php?code=404
######################
# BREED DESCRIPTIONS #
######################
RewriteRule ^dog_breed_description/teapoodle/?$ http://www.pets4you.com/dog_breed_description/poodle/ [R=301,L]
RewriteRule ^dog_breed_description/toypoodle/?$ http://www.pets4you.com/dog_breed_description/poodle/ [R=301,L]

RewriteRule ^dog_breed_description/([^/]+) descriptions.php?page=$1 [NC]
RewriteRule ^cat_breed_description/([^/]+) descriptions.php?page=$1 [NC]
############
# CALENDAR #
############
#RewriteRule ^submitevent.html calendar.php?action=submitEvent [NC]
#RewriteRule ^calendar/([^/]+)/([^/]+)/([^/]+)/([^/]+) errors.php?code=404 [NC]
#RewriteRule ^calendar/([^/]+)/([^/]+)/([^/]+) errors.php?code=404 [NC]
#RewriteRule ^calendar/([^/]+)/([^/]+) calendar.php?year=$1&month=$2 [NC]
#RewriteRule ^calendar/([^/]+) calendar.php?year=$1 [NC]
#RewriteRule ^calendar/ calendar.php [NC]
#################
# PET DIRECTORY #
#################
RewriteRule ^petsupplies/dogs/(.*).html/?$ directory.php?type=dog&page=$1 [QSA,L]
RewriteRule ^petsupplies/cats/(.*).html/?$ directory.php?type=cat&page=$1 [QSA,L]
RewriteRule ^petsupplies/(.*).html/?$ directory.php?page=$1 [QSA,L]
RewriteRule ^petsupplies/search.php?$ directory.php?page=search [QSA,L]
RewriteRule ^petsupplies/?$ http://www.pets4you.com/petsupplies.html [R=301,L]
###############
# PET GALLERY #
###############
RewriteRule ^gallery/([^/]+) gallery.php?breed=$1 [QSA,L]
RewriteRule ^gallery/?$ gallery.php [QSA,L]
RewriteRule ^gallery/index.html?$ gallery.php [R=301,L]
############
# ARTICLES #
############
RewriteRule ^petarticles/([^/]+) articles.php?action=a&id=$1 [NC]
RewriteRule ^petarticles/?$ http://www.pets4you.com/petarticles.html [R=301,L]
RewriteRule ^petarticles?$ http://www.pets4you.com/petarticles.html [R=301,L]
RewriteRule ^petarticles.html/?$ articles.php [L]
RewriteRule ^articles_search.php/?$ articles.php [QSA,L]
################
# LOST & FOUND #
################
RewriteRule ^lost_found.html/?$ lost_found.php [QSA,NC,L]
########
# DOGS #
########
RewriteRule ^studservice.html?$ http://www.pets4you.com/dogs.html [R=301,L]
RewriteRule ^puppiesforsale/([^/]+) http://www.pets4you.com/dogs.html [R=301,L]
RewriteRule ^dogs/([^/]+) http://www.pets4you.com/dogs.html [R=301,L]
RewriteRule ^dogs/ http://www.pets4you.com/dogs.html [R=301,L]
RewriteRule ^dogs.html?$ dogs.php?start=0 [QSA,L]
RewriteRule ^dogs1/?$ dogs.php?start=1 [QSA,L]
RewriteRule ^dogs2/?$ dogs.php?start=2 [QSA,L]

RewriteRule ^cats/ http://www.pets4you.com/cats.html [R=301,L]
RewriteRule ^cats.html/?$ cats.php [L]

RewriteRule ^puppiesforsale.html?$ http://www.pets4you.com/dogs.html [R=301,L]
RewriteRule ^teapoodle.html?$ http://www.pets4you.com/poodle.html [R=301,L]
RewriteRule ^toypoodle.html?$ http://www.pets4you.com/poodle.html [R=301,L]
#############
# BREEDERS #
############
#RewriteRule ^dogbreeders/([^/]+) dog_breeders.php?breed=$1 [NC]
#RewriteRule ^dogbreeders/?$ http://www.pets4you.com/dog_breeders.html [R=301,L]
#RewriteRule ^dogbreeders.html/?$ dog_breeders.php [L]

#RewriteRule ^catbreeders/([^/]+) cat_breeders.php?breed=$1 [NC]
#RewriteRule ^catbreeders/?$ http://www.pets4you.com/cat_breeders.html [R=301,L]
#RewriteRule ^catbreeders.html/?$ cat_breeders.php [L]
################
# STATE PET ADS #
################
RewriteRule ^localpetads/(.*).html?start=([0-9])/?$ http://www.pets4you.com/dogs.html [R=301,L]
RewriteRule ^localpetads/(.*).html/?$ http://www.pets4you.com/dogs.html [R=301,L]
RewriteRule ^localpetads.html?$ http://www.pets4you.com/localpetads/ [R=301,L]
RewriteRule ^localpetads/([^/]+)/([^/]+) http://www.pets4you.com/dogs.html [R=301,L]
RewriteRule ^localpetads/([^/]+) http://www.pets4you.com/dogs.html [R=301,L]
RewriteRule ^localpetads/ http://www.pets4you.com/dogs.html [R=301,L]
###########
# GENERAL #
###########
RewriteRule ^sitemap.html?$ sitemap.php?start=1 [QSA,L]
RewriteRule ^sitemap2/?$ sitemap.php?start=2 [QSA,L]
RewriteRule ^sitemap3/?$ sitemap.php?start=3 [QSA,L]
RewriteRule ^sitemap4/?$ sitemap.php?start=4 [QSA,L]

RewriteRule ^terms.html/?$ terms.html [L]
RewriteRule ^google97ce2a2538777af1.html/?$ google97ce2a2538777af1.htm [L]
RewriteRule ^googlef7b2dff2a5d7b41b.html/?$ googlef7b2dff2a5d7b41b.htm [L]
RewriteRule ^dogvideos/ videos.php [NC]
RewriteRule ^topdogs/ breedratings.php [NC]
RewriteRule ^(.*).html/?$ pets4you.php?page=$1 [QSA,L] 
```

此外，有时当我输入“www.pets4you.com”时，它会指向 https (?) 其他让我一无所知的东西。

不是我最擅长的领域，.htaccess。有什么不对的告诉我。所有重定向工作正常。只是让我难以置信其他事情是由什么引起的。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T22:21:54.213

哦，我的，真是一团糟，肖恩。如果不正确了解服务器的内部结构（即主配置文件 (httpd-xxx.conf)），就无法准确说明发生了什么。

我发现的是：

1.  猫 URL 问题。负责的指令是：

    ```
    RewriteRule ^cats/ http://www.pets4you.com/cats.html [R=301,L]
    RewriteRule ^cats.html/?$ cats.php [L] 
    ```

2.  至于使用和不使用适当文件扩展名的图像：这听起来像是`mod_spelling`加载到 Apache 中（您必须与您的主机商核实）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T19:42:54.070

好的，所以我能真正解决这个问题的唯一方法就是这样做。

我没有使用cats.php，而是将文件重命名为catspage.php。由于某种原因，使用与请求相同的名称会导致奇怪的事情发生。cat.html 指向cats.php，但cats/ 能够被拉起并调用cats.php。现在回想起来，我之前不得不和另一个客户处理过这个问题。

重命名文件后，这些 URL 停止工作，这是我想要的。然而，图像是我们的服务器。我们与他们合作的每一个网站都这样做。

再次感谢大家。

# c# - 检查空字符串值的最佳 C# 方法

> ID：14204782
> 
> 赞同：-1
> 
> 时间：2013-01-07T21:58:50.567
> 
> 标签：c#, string, null

> **可能重复：**
> [如何检查字符串是否为空](https://stackoverflow.com/questions/7553567/how-to-check-if-string-is-null)

我需要能够检查`null`字符串内的值。我目前知道的最好的方法是`String.IsNullOrEmpty()`，它不适合我们正在尝试做的事情（`string.empty`允许值，不允许值`nulls`）。有没有人有什么建议？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-07T22:00:02.207

只需将您的字符串与`null`

```
bool stringIsNull = mystring == null; 
```

* * *

这是适合您的扩展方法

```
public static class ExtensionMethods
{
    public static bool IsNull(this string str)
    {
        return str == null;
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-07T22:00:20.137

您检查的方式与检查任何其他变量是否为空的方式相同：

```
if(variable == null)
{
  //do stuff
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-07T22:00:33.583

如果您想跳过`null`值，只需使用`!= null`：

```
if(str != null)
{

} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-07T22:01:40.723

```
if (variable != null) 
 //do your action for not null
else 
  //variable is null 
```

# intuit-partner-platform - 使用 c#devkit，我如何访问发票上的行 ItemID

> ID：14204783
> 
> 赞同：0
> 
> 时间：2013-01-07T21:59:01.153
> 
> 标签：intuit-partner-platform, quickbooks-online

使用 c# devkit，我如何访问发票上的行 ItemID？

我的响应 xml 有一个部分如下所示：

```
<Line>
    <Desc>TestItem</Desc>
    <Amount>66.00</Amount>
    <Taxable>false</Taxable>
    <ItemId idDomain="QBO">3</ItemId>
    <UnitPrice>33</UnitPrice>
    <Qty>2</Qty>
    <ServiceDate>2013-01-07-08:00</ServiceDate>
</Line> 
```

并且可以使用 devkit 从中提取数据，如下所示：

```
List<Intuit.Ipp.Data.Qbo.Invoice> customerInvoicesWithinDateRange = invoice.ExecuteQuery<Intuit.Ipp.Data.Qbo.Invoice>(context).ToList<Intuit.Ipp.Data.Qbo.Invoice>();
foreach (var invoiceFound in customerInvoicesWithinDateRange)
{
    foreach (var line in invoiceFound.Line)
    {
       things += line.Desc + " <br> ";
       things += line.Taxable.ToString() + " <br> ";
       things += line.ServiceDate.ToShortDateString() + " <br> ";
       things += line.Amount.ToString() + "<br>";
    }
} 
```

但是对象中没有 line.ItemId,line.Qty 也没有 line.UnitPrice。

我知道当我将 line.Items 对象设置为 ItemsChoiceType2 对象时，但是当我尝试访问 line.Items 对象时，我得到“NullReferenceException：对象引用未设置为对象的实例”。

我缺少哪些步骤来获得那个难以捉摸的“3”？

谢谢

编辑：@Peter 当我这样做时：

```
List<Intuit.Ipp.Data.Qbo.Invoice> customerInvoicesWithinDateRange = invoice.ExecuteQuery<Intuit.Ipp.Data.Qbo.Invoice>(context).ToList<Intuit.Ipp.Data.Qbo.Invoice>();
var quantity = customerInvoicesWithinDateRange[0].Line[0].Items[Array.IndexOf(customerInvoicesWithinDateRange[0].Line[0].ItemsElementName, Intuit.Ipp.Data.Qbo.ItemsChoiceType2.Qty)]; 
```

我得到“System.ArgumentNullException：值不能为空。” 在第 2 行。我认为 customerInvoicesWithinDateRange[0].Line[0].ItemsElementName 为空。在我的 foreach 循环中它也是空的。

编辑编辑：

nm，我实际上在查询中有一张发票，我猜它没有任何行。将其包装在以下内容中解决了最后一个障碍：

```
if (customerInvoicesWithinDateRange[0].Line[0].Items != null) 
```

再次感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T22:31:49.993

Items 中的对象在 ItemsChoiceType2 的 ItemsElementName 数组中定义。

因此，无需任何错误检查，可以从以下行获得数量：

```
var quantity = invoices[0].Line[0].Items[Array.IndexOf(invoices[0].Line[0].ItemsElementName, Intuit.Ipp.Data.Qbo.ItemsChoiceType2.Qty)]; 
```

# c++ - Webview - 如何检测黑莓级联中的 url 是否无效

> ID：14204786
> 
> 赞同：0
> 
> 时间：2013-01-07T21:59:20.097
> 
> 标签：c++, qt, webview, blackberry-10, blackberry-cascades

我正在尝试找到一种方法来检测 url 是否是 webview 的无效 url

例如，如果我这样做

myWebView->setUrl(QUrl("http://www.youtube.com")); //然后webview将更改为该页面，但如果我这样做...

myWebView->setUrl(QUrl("youtube.com")); //它不会改变，因为它认为它是一个无效的url。

是否有某种信号或某种属性可以用来检测它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T11:26:48.267

是的，您对此有解决方案：

您可以使用内置功能`isValid();`

例如：

```
myWwebView->url().isValid(); //It will return true or false value. 
```

如需更多帮助，请参阅以下[链接](http://harmattan-dev.nokia.com/docs/library/html/qt4/qurl.html#isValid)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T15:00:20.157

您可以连接到 WebView 的[loadingChanged](https://developer.blackberry.com/cascades/reference/bb__cascades__webview.html#loadingchanged)信号以查看页面是否加载成功。

# drop-down-menu - 如何使用 D3 中的下拉列表对数据集进行子集化以绘制折线图？

> ID：14204794
> 
> 赞同：1
> 
> 时间：2013-01-07T22:00:01.413
> 
> 标签：drop-down-menu, svg, d3.js, parameter-passing, subset

我正在尝试使用允许用户选择类别的下拉列表，然后 D3 svg 将通过基于所选项目的主列表子集来绘制与该类别关联的几行图表。我最初有一个带有漂亮方块的无序列表，当用户单击一条线上的任意位置时，图表将使用所选类别更新：

```
function select_category(data_key) {
  "use strict";
  var key_items = d3.select('.d3_curve-key')
    .selectAll('div')
    .data(data_key)
    .enter()
    .append('div')
    .attr('class', 'd3_curve-key_line')
    .attr('id', function(d) {return d.category_id + "_key";} )
    ;
  key_items.append('div')
    .attr('id', function(d) {
      return 'd3_curve-key_square_' + d.category_id;
      })
    .attr('class', function(d) {
      return 'd3_curve-key_square ' + d.category_id;
      })
    ;
  key_items.append('div')
    .attr('class', 'd3_curve-key_label')
    .text( function(d) {return d.category_name;} )
    ;
  d3.selectAll('.d3_curve-key_line')
    .on('click', get_category_data)
    ;
}

function get_category_data(data_key,i){
  var selected_id = data_key.category_id;
  var ts = d3.select('#'+selected_id);
  d3.json(
    "/category_details.json",
    function(data) {
      filtered_data = data.filter( function(d) {
        return d.category_id === selected_id;})
        ;
      draw_percentiles(filtered_data, selected_id);
      }
    );
}

function draw_percentiles(line_data, line_id){
  // SVG commands.
  .
  .
  .
} 
```

现在我正在尝试使用下拉菜单并传递相同的数据和子集参数，但由于某种原因，所选类别的参数（以及与此相关的数据集）没有被传递给绘图函数：

```
var selection_drop_down = d3.select('#d3_curve-selection_area')
  .append('select')
    .on('change', get_category_data)
  .selectAll('option')
  .data(data_key)
  .enter()
  .append('option')
    .attr('class', 'd3_curve-selection_area-drop_down_list')
    .attr('id', function(d) {return d.category_id + "_key";} )
    .attr('value', function(d) {return d.category_id;} )
    .text( function(d) {return d.category_name;} ) 
  ; 
```

下拉列表正确显示，但没有任何内容传递给 get_category_data 函数。

有人有任何想法/建议吗？先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T04:51:06.930

您的函数 get_category_data 被调用而没有任何参数传递给它。

因为它看起来不像 get_category_data 从这里使用索引变量，你可能会逃脱改变

```
var selected_id = data_key.category_id; 
```

至

```
var selected_id = this.category_id; 
```

并从改变你的函数的定义

```
function get_category_data(data_key,i){ 
```

至

```
function get_category_data(){ 
```

这个答案也可能有帮助： [使用 d3.js 添加下拉菜单](https://stackoverflow.com/questions/11903709/adding-drop-down-menu-using-d3-js)

# css - 更改 selectOneMenu 样式表（Primefaces）

> ID：14204797
> 
> 赞同：1
> 
> 时间：2013-01-07T22:00:13.573
> 
> 标签：css, jsf, primefaces, styles

我想更改我的 selectOneMenu 的背景颜色。当我尝试将样式设置为时，`style="background-color:#f6f6f6"`根本没有任何变化。

我试图用 a 包装它并将它`div`的定义添加到 style.css 但到目前为止没有任何变化。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-08T11:07:22.707

该`style`属性是相当无用的`<p:selectOneMenu>`。*通过右键单击View Source*或*Inspect Element*查看生成的 HTML 输出。它将应用于包装 div，而不是具体项目，更不用说列表了。要设置所选项目的样式，您需要通过属性选择`.ui-selectonemenu-label`菜单的子项。`styleClass`要设置列表样式，您需要通过属性选择`.ui-selectonemenu-list`面板的子项（下拉菜单） 。`panelStyleClass`

所以，总而言之，这应该做：

```
<p:selectOneMenu styleClass="menu" panelStyleClass="panel"> 
```

和

```
.menu .ui-selectonemenu-label { 
    background: pink;
}
.panel .ui-selectonemenu-list { 
    background: pink;
} 
```

确保在PrimeFaces 自己的样式*之后初始化/加载 CSS。*最好是在一个`.css`文件中声明它，该文件`<h:outputStylesheet>`由`<h:body>`.

### 也可以看看：

*   [如何使用自定义样式覆盖默认的 PrimeFaces CSS？](https://stackoverflow.com/questions/8768317/how-do-i-re-write-those-class-defined-in-primefaces-css)
*   [如何从特定的 PrimeFaces p:panelGrid 中删除边框？](https://stackoverflow.com/questions/10421581/how-to-remove-border-from-primefaces-ppanelgrid/10421651#10421651)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T22:03:35.947

如果您使用 p:selectOneMenu，您可以轻松地为项目设置样式。有关样式类名称，请参阅指南。

也许您可以使用 jquery 添加一些样式。

```
menuWidget.items.eq(1).addClass('customclass') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T22:46:42.943

您想要的是**覆盖**. 为此，您必须查找特定元素的样式定义 - 在文件中或使用 firebug。`primefaces.css``selectOneMenu`

因为`selectOneMenu`它会是 ie `ui-selectonemenu-items ui-selectonemenu-list`（取决于你想要什么风格）。

[这](http://www.mkyong.com/jsf2/primefaces/how-to-override-primefaces-css/)是一篇关于覆盖默认 Primefaces 样式的好文章。

**注意**：我不会`!important`像描述的那样亲自使用，因为它以后可能比有用的更有害。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T04:20:08.180

类似的帖子：[这里](https://stackoverflow.com/questions/8768317/how-do-i-re-write-those-class-defined-in-primefaces-css)和[这里](https://stackoverflow.com/questions/8578494/how-to-override-stylesheets-of-primefaces)。

与 Primefaces 规范相比，您需要以更具体的方式为元素提供 CSS。同样正如 Fallup 所建议的那样，您不应该使用`!important`，虽然它可以工作，但它有问题，而且看起来也不太好。

# sql-server - 为什么主键不是聚集索引而另一个索引是聚集的？

> ID：14204800
> 
> 赞同：3
> 
> 时间：2013-01-07T22:00:29.200
> 
> 标签：sql-server, primary-key, non-clustered-index

我今天正在查看我们的 SQL Server 数据库的索引，并注意到一个相对较小（非常旧）的表（3250 行），其中有一列类型为 varbinary(max) 的图像数据。

主键是一个非聚集索引，并且有另一个索引（在用户 ID 上并被删除）是聚集的。

同样，这是一张非常古老的桌子，当这张桌子被创建时，周围已经没有人了。

那么，有任何理由以这种方式设置它吗？我应该改变它吗？如果我应该这样做，有什么我应该注意的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T22:04:11.673

索引是基于用例的。PK 实际上是 PK 上的索引（您在索引中强制唯一性）并在查询中使用 PK 的地方使用。您可以轻松想象查询中使用的列不依赖于 PK 并使用其他列组合的情况。

现在想象一下，这个用例不是唯一的，而是主要的。在这种情况下，设计人员可以集中在这个用例上，而不是在那些使用频率较低的用例上。

我给你的建议是这样的：

1.  不要在不了解事物为何存在的情况下进行更改，因为原始设计可能出于很好的原因而存在 - 例如优化。
2.  考虑到您的系统设计和操作特性来设计您的索引和集群，不要只是盲目地添加东西。你应该用确凿的证据来做这件事，而不仅仅是“悬而未决”的选择。

相信我，我是被它咬了才学会的。我尽量不要在没有测试的情况下改变事情，这些测试提供了改变工作和不破坏其他事情的证据。在使用遗留系统时，这是一件至关重要的事情。

# php - Sql运行多个查询

> ID：14204807
> 
> 赞同：1
> 
> 时间：2013-01-07T22:01:22.620
> 
> 标签：php, sql

这是我在公司中获得第二高薪水的代码...

`select salary from org order by salary desc limit(1,1)`

上面的结果将是一行......最高薪水（100000），，，现在我想获取所有`emp_names`薪水第二高的员工......怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T22:02:44.323

将 DISTINCT 添加到您的查询中（以防多人具有相同的最高薪水），并像这样加入它：

```
select org.* from org
join (select distinct salary from org order by salary desc limit(1,1)) org_salary
  on org.salary = org_salary.salary 
```

[在这里](http://sqlfiddle.com/#!2/838d8/15)工作 sqlfiddle

# node.js - 覆盖nodejs内置的javascript库

> ID：14204813
> 
> 赞同：0
> 
> 时间：2013-01-07T22:01:37.263
> 
> 标签：node.js

我们需要更新 lib\buffer.js 文件来测试[https://github.com/strongloop/node/commit/5c94ae11a20a5192e73239e50e5edbbb33e1dc80](https://github.com/strongloop/node/commit/5c94ae11a20a5192e73239e50e5edbbb33e1dc80)

我想知道在启动节点 exe 时是否有任何方法可以传递新文件或文件位置，或者我是否必须重建节点二进制文件？..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T22:08:37.090

根据[文档](http://nodejs.org/api/modules.html)：

> Node 有几个模块编译成二进制文件。这些模块在本文档的其他地方有更详细的描述。
> 
> 核心模块在 lib/ 文件夹的节点源代码中定义。
> 
> 如果核心模块的标识符被传递给`require()`. 例如，`require('http')`将始终返回内置的 HTTP 模块，*即使存在该名称的文件*。

所以是的，你必须重建二进制文件。

# javascript - 防止插入字符并触发新事件

> ID：14204817
> 
> 赞同：0
> 
> 时间：2013-01-07T22:01:51.757
> 
> 标签：javascript, events, input, focus

我有问题，捕获“keydown”然后将焦点更改为“最后一个活动”焦点。

如果我将焦点设置到捕获事件的函数中的特定元素，“输入”元素之后会得到一个“字符”，或者整个“表单”元素捕获“输入”以再次提交表单。

我的代码：

[http://jsfiddle.net/BluesM/KkexX/4/](http://jsfiddle.net/BluesM/KkexX/4/)

我找到了方法，但这很笨拙。在我执行的捕获事件的函数中

```
 setTimeout(function(){newFocus.focus();  }, 30); 
```

在哪里

```
newFocus 
```

是我想要关注的元素。

但也许有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T22:31:42.643

`preventDefault()`提交表单后只需按下键即可。

[http://jsfiddle.net/KkexX/7/](http://jsfiddle.net/KkexX/7/)

# c# - 从字符串返回类型

> ID：14204821
> 
> 赞同：0
> 
> 时间：2013-01-07T22:02:13.807
> 
> 标签：c#

我不确定从哪里开始。我正在使用我的实体组件模型库为 XNA 编写一个 GUI 管理器。我希望能够将 XML 文档动态导入 GUI 表单。我的想法是拥有一个`"type"`包含控件类型的属性。例如`type="Image"`会告诉解析器制作一个图像。一旦有了它，它就可以调用它自己的 XML 解析方法来填充值。但是，我被困在这部分。

考虑这个文件：

```
<Gui>
  <BGImage type="Image">
    <Body>
      <Position>
        <X>0</X>
        <Y>0</Y>
      </Position>
    </Body>
    <ImageRender>
      <Texture>background</Texture>
      <Color>
        <R>255</R>
        <G>255</G>
        <B>255</B>
        <A>255</A>
      </Color>
    </ImageRender>
  </BGImage>
  <CheckBox type="Checkbox">
    <Body>
      <Position>
        <X>20</X>
        <Y>20</Y>
      </Position>
    </Body>
    <TileRender>
      <Index>0</Index>
      <Texture>checkbox</Texture>
      <Color>
        <R>255</R>
        <G>255</G>
        <B>255</B>
        <A>255</A>
      </Color>
    </TileRender>
    <TextRender>
      <Text>Checkbox</Text>
      <Font>spritefont</Font>
    </TextRender>
  </CheckBox>
</Gui> 
```

我要做的是让一个类解析这个 XML 文档并执行以下操作。任何带有 type 属性的标签都作为它们所代表的类型添加到表单中。例如，我有一个代表图像的 Image 类，示例中的 BGImage 应该制作一个 Image 并添加到表单中。我需要一种将 type="Image" 与 Image 类相关联的方法。

我已经有一种用于向游戏添加实体的方法，我的问题在于一种将字符串设为类型并从中实例化新实体的方法。

我要做的是从字符串返回一个类型，我不确定这是否可能。有没有办法在 C# 中做到这一点，还是我从错误的角度攻击这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T22:10:25.613

是的，您可以完全按照您的描述使用 C# 类型限定名称。

例如，限定名称`System.Drawing.Image`是“System.Drawing.Image, System.Drawing”。限定名称由几部分组成。在我的示例中，它是 [类型名称]、[程序集名称]。（[参考文章来自msdn](http://msdn.microsoft.com/en-us/library/yfsftwz6.aspx)）

只要将包含该类型的程序集加载到您的应用程序域中（在本例中，程序集是 System.Drawing），您就可以执行以下操作来实例化它：

```
var imageType = Type.GetType("System.Drawing.Image, System.Drawing");
System.Drawing.Image image = Activator.CreateInstance(imageType ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T22:32:52.833

帮自己一个忙，将映射从 xml 中的类型存储到其他资源的程序集中的具体类型。特别是如果您开始定义/扩展自己的类型。

例如

```
<Assembly name="System.Drawing", namespace = "System.Drawing">
<Type name = "PrettyPicture", Type = "Image"/>
</Assembly> 
```

ETC

将完全限定的名称放在布局文件中，如果您想更改任何内容，您将无处不在。

dtyron 在 Type.GetType 和 Activator.CreateInstance 的观点几乎为您提供了一个良好的开端。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T23:10:39.527

你可以写一个完整的解析器。它不像其他解决方案那么容易，但从长远来看它可能会更简单。

```
 Control Parse(XElement element)
    {
        var root = new XElementControlPair(element, ControlWrapper.Create(element));

        var stack = new Stack<XElementControlPair>();

        stack.Push(root);

        while (stack.Any()) //here we recursively search for any child elements
        {
            var elem = stack.Pop();

            var children = from child in elem.XElement.Elements() 
                           let ctl = ControlWrapper.Create(child)                               
                           where child.Attribute("type") != null 
                           select new XElementControlPair(child, ctl);

            foreach (var child in children)
            {
                stack.Push(child);
                elem.Control.Controls.Add(child.Control);
            }

        }

        return root.Control.MakeControl();

    }

class XElementControlPair
{
    public XElement XElement { get; private set; }
    public ControlWrapper Control { get; private set; }

    public XElementControlPair(XElement elem, ControlWrapper ctl)
    {
        this.XElement = elem;
        this.Control = ctl;
    }
}

abstract class ControlWrapper
{
    public List<ControlWrapper> Controls { get; private set; }
    protected readonly XElement element;

    public ControlWrapper(XElement element)
    {
        this.element = element;
    }

    public static ControlWrapper Create(XElement element)
    {
        var type = element.Attribute("type").Value.ToLower();

        switch (type)
        {
            case "image":
                return new ImageWrapper(element);

            case "textbox":
                return new TextBoxWrapper(element);

            case "checkbox":
                return new CheckBoxWrapper(element);

            //etc...
        }
    }

    protected abstract Control _MakeControl(); //here is where you tell it how to construct a particular control given an XElement

    public Control MakeControl()
    {
        var ctl = _MakeControl();

        foreach (var child in Controls)
            ctl.Children.Add(child.MakeControl());

        return ctl;
    }

} 
```

然后为每种类型的控件创建一个包装类来处理将 XML 转换为特定控件。例如：

```
sealed class ImageWrapper : ControlWrapper
{
    public ImageWrapper(XElement element) { } : base(element)

    protected override Control _MakeControl()
    {
        var image = new Image();

        var pos = element.Element("Position");

        var x = int.Parse(pos.Element("X").Value);
        var y = int.Parse(pos.Element("y").Value);

        image.Position = new Point(x, y);

        //continue setting other properties...

        return image;

    }
} 
```

# asp.net - .NET 预定义调色板颜色列表的 MS 图表？

> ID：14204827
> 
> 赞同：14
> 
> 时间：2013-01-07T22:02:37.590
> 
> 标签：asp.net, mschart, color-palette

Microsoft Chart for .NET（3.5、4.x）具有预定义的调色板，例如 Berry、Bright、SeaGreen 等。

每个调色板（十六进制或命名）是否有颜色列表？

谢谢！

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-01-08T15:57:17.227

[在Alex Gorev 的博客](http://blogs.msdn.com/b/alexgor/archive/2009/10/06/setting-chart-series-colors.aspx)上找到这张图片

![MS Chart 的预定义调色板](../Images/433c1edbf0f497c5bbd4c99f88c82234.png)

猜猜我可以使用颜色选择器来获取实际的颜色名称/代码

**编辑：**这是我提取的颜色列表：

```
Berry: 8A2BE2,BA55D3,4169E1,C71585,0000FF,8019E0,DA70D6,7B68EE,C000C0,0000CD,800080
Bright: 008000,0000FF,800080,800080,FF00FF,008080,FFFF00,808080,00FFFF,000080,800000,FF3939,7F7F00,C0C0C0,FF6347,FFE4B5
BrightPastel: 418CF0,FCB441,DF3A02,056492,BFBFBF,1A3B69,FFE382,129CDD,CA6B4B,005CDB,F3D288,506381,F1B9A8,E0830A,7893BE
Chocolate: A0522D,D2691E,8B0000,CD853F,A52A2A,F4A460,8B4513,C04000,B22222,B65C3A
EarthTones: 33023,B8860B,C04000,6B8E23,CD853F,C0C000,228B22,D2691E,808000,20B2AA,F4A460,00C000,8FBC8B,B22222,843A05,C00000
Excel: 9999FF,993366,FFFFCC,CCFFFF,660066,FF8080,0063CB,CCCCFF,000080,FF00FF,FFFF00,00FFFF,800080,800000,007F7F,0000FF
Fire: FFD700,FF0000,FF1493,DC143C,FF8C00,FF00FF,FFFF00,FF4500,C71585,DDE221
GrayScale: C8C8C8,BDBDBD,B2B2B2,A7A7A7,9C9C9C,919191,868686,7A7A7A,707070,656565,565656,4F4F4F,424242,393939,2E2E2E,232323
Light: E6E6FA,FFF0F5,FFDAB9,,FFFACD,,FFE4E1,F0FFF0,F0F8FF,F5F5F5,FAEBD7,E0FFFF
Pastel: 87CEEB,32CD32,BA55D3,F08080,4682B4,9ACD32,40E0D0,FF69B4,F0E68C,D2B48C,8FBC8B,6495ED,DDA0DD,5F9EA0,FFDAB9,FFA07A
SeaGreen: 2E8B57,66CDAA,4682B4,008B8B,5F9EA0,38B16E,48D1CC,B0C4DE,8FBC8B,87CEEB
SemiTransparent: FF6969,69FF69,6969FF,FFFF5D,69FFFF,FF69FF,CDB075,FFAFAF,AFFFAF,AFAFFF,FFFFAF,AFFFFF,FFAFFF,E4D5B5,A4B086,819EC1 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-02-19T15:48:36.833

我创建了一个扩展类，它返回托盘的颜色列表。

```
using System.Collections.Generic;
using System.Drawing;
using Color = System.Drawing.Color;

namespace Extensions.Colors {
    public static class ChartColorPallets   {

        public static List<Color> Bright 
            => new List<Color>() {
                "#008000".FromHex(),
                "#0000FF".FromHex(),
                "#800080".FromHex(),
                "#00FF00".FromHex(),
                "#FF00FF".FromHex(),
                "#008080".FromHex(),
                "#FFFF00".FromHex(),
                "#808080".FromHex(),
                "#00FFFF".FromHex(),
                "#000080".FromHex(),
                "#800000".FromHex(),
                "#FF0000".FromHex(),
                "#808000".FromHex(),
                "#C0C0C0".FromHex(),
                "#FF6347".FromHex(),
                "#FFE4B5".FromHex()
        };
        public static List<Color> GreyScale 
            => new List<Color>() {
                "#C8C8C8".FromHex(),
                "#BDBDBD".FromHex(),
                "#B2B2B2".FromHex(),
                "#A7A7A7".FromHex(),
                "#9C9C9C".FromHex(),
                "#919191".FromHex(),
                "#868686".FromHex(),
                "#7B7B7B".FromHex(),
                "#707070".FromHex(),
                "#656565".FromHex(),
                "#5A5A5A".FromHex(),
                "#4F4F4F".FromHex(),
                "#444444".FromHex(),
                "#393939".FromHex(),
                "#2E2E2E".FromHex(),
                "#232323".FromHex()
        };
        public static List<Color> Excel 
            => new List<Color>() {
                "#9999FF".FromHex(),
                "#993366".FromHex(),
                "#FFFFCC".FromHex(),
                "#CCFFFF".FromHex(),
                "#660066".FromHex(),
                "#FF8080".FromHex(),
                "#0066CC".FromHex(),
                "#CCCCFF".FromHex(),
                "#000080".FromHex(),
                "#FF00FF".FromHex(),
                "#FFFF00".FromHex(),
                "#00FFFF".FromHex(),
                "#800080".FromHex(),
                "#800000".FromHex(),
                "#008080".FromHex(),
                "#0000FF".FromHex()
        };
        public static List<Color> Light 
            => new List<Color>() {
                "#E6E6FA".FromHex(),
                "#FFF0F5".FromHex(),
                "#FFDAB9".FromHex(),
                "#FFFACD".FromHex(),
                "#FFE4E1".FromHex(),
                "#F0FFF0".FromHex(),
                "#F0F8FF".FromHex(),
                "#F5F5F5".FromHex(),
                "#FAEBD7".FromHex(),
                "#E0FFFF".FromHex()
        };
        public static List<Color> Pastel 
            => new List<Color>() {
                "#87CEEB".FromHex(),
                "#32CD32".FromHex(),
                "#BA55D3".FromHex(),
                "#F08080".FromHex(),
                "#4682B4".FromHex(),
                "#9ACD32".FromHex(),
                "#40E0D0".FromHex(),
                "#FF69B4".FromHex(),
                "#F0E68C".FromHex(),
                "#D2B48C".FromHex(),
                "#8FBC8B".FromHex(),
                "#6495ED".FromHex(),
                "#DDA0DD".FromHex(),
                "#5F9EA0".FromHex(),
                "#FFDAB9".FromHex(),
                "#FFA07A".FromHex()
        };
        public static List<Color> EarthTones 
            => new List<Color>() {
                "#FF8000".FromHex(),
                "#B8860B".FromHex(),
                "#C04000".FromHex(),
                "#6B8E23".FromHex(),
                "#CD853F".FromHex(),
                "#C0C000".FromHex(),
                "#228B22".FromHex(),
                "#D2691E".FromHex(),
                "#808000".FromHex(),
                "#20B2AA".FromHex(),
                "#F4A460".FromHex(),
                "#00C000".FromHex(),
                "#8FBC8B".FromHex(),
                "#B22222".FromHex(),
                "#8B4513".FromHex(),
                "#C00000".FromHex()
        };
        public static List<Color> SemiTransparent 
            => new List<Color>() {
                "#FF0000".FromHex(),
                "#00FF00".FromHex(),
                "#0000FF".FromHex(),
                "#FFFF00".FromHex(),
                "#00FFFF".FromHex(),
                "#FF00FF".FromHex(),
                "#AA7814".FromHex(),
                "#FF0000".FromHex(),
                "#00FF00".FromHex(),
                "#0000FF".FromHex(),
                "#FFFF00".FromHex(),
                "#00FFFF".FromHex(),
                "#FF00FF".FromHex(),
                "#AA7814".FromHex(),
                "#647832".FromHex(),
                "#285A96".FromHex()
        };
        public static List<Color> Berry
            => new List<Color>() {
                "#8A2BE2".FromHex(),
                "#BA55D3".FromHex(),
                "#4169E1".FromHex(),
                "#C71585".FromHex(),
                "#0000FF".FromHex(),
                "#8A2BE2".FromHex(),
                "#DA70D6".FromHex(),
                "#7B68EE".FromHex(),
                "#C000C0".FromHex(),
                "#0000CD".FromHex(),
                "#800080".FromHex()
        };
        public static List<Color> Chocolate 
            => new List<Color>() {
                "#A0522D".FromHex(),
                "#D2691E".FromHex(),
                "#8B0000".FromHex(),
                "#CD853F".FromHex(),
                "#A52A2A".FromHex(),
                "#F4A460".FromHex(),
                "#8B4513".FromHex(),
                "#C04000".FromHex(),
                "#B22222".FromHex(),
                "#B65C3A".FromHex()
        };
        public static List<Color> Fire
            => new List<Color>() {
                "#FFD700".FromHex(),
                "#FF0000".FromHex(),
                "#FF1493".FromHex(),
                "#DC143C".FromHex(),
                "#FF8C00".FromHex(),
                "#FF00FF".FromHex(),
                "#FFFF00".FromHex(),
                "#FF4500".FromHex(),
                "#C71585".FromHex(),
                "#DDE221".FromHex()
        };
        public static List<Color> SeaGreen 
            => new List<Color>() {
                "#2E8B57".FromHex(),
                "#66CDAA".FromHex(),
                "#4682B4".FromHex(),
                "#008B8B".FromHex(),
                "#5F9EA0".FromHex(),
                "#3CB371".FromHex(),
                "#48D1CC".FromHex(),
                "#B0C4DE".FromHex(),
                "#8FBC8B".FromHex(),
                "#87CEEB".FromHex()
        };
        public static List<Color> BrightPastel
            => new List<Color>() {
                "#418CF0".FromHex(),
                "#FCB441".FromHex(),
                "#E0400A".FromHex(),
                "#056492".FromHex(),
                "#BFBFBF".FromHex(),
                "#1A3B69".FromHex(),
                "#FFE382".FromHex(),
                "#129CDD".FromHex(),
                "#CA6B4B".FromHex(),
                "#005CDB".FromHex(),
                "#F3D288".FromHex(),
                "#506381".FromHex(),
                "#F1B9A8".FromHex(),
                "#E0830A".FromHex(),
                "#7893BE".FromHex()
        };
        private static Color FromHex(this string hex) => ColorTranslator.FromHtml(hex);
    }
} 
```

然后你可以得到颜色列表，只包含命名空间，然后你可以调用

```
List<Color> brightColors = ChartColorPallets.Bright; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-10-04T05:25:44.303

对 Yuriy 的回答 +1，但如果您正在寻找确切的颜色（33023 不是有效颜色，以及其他错误匹配），我在这里从实际值中提取它们：

```
Bright: "#008000", "#0000FF", "#800080", "#00FF00", "#FF00FF", "#008080", "#FFFF00", "#808080", "#00FFFF", "#000080", "#800000", "#FF0000", "#808000", "#C0C0C0", "#FF6347", "#FFE4B5"
Grayscale: "#C8C8C8", "#BDBDBD", "#B2B2B2", "#A7A7A7", "#9C9C9C", "#919191", "#868686", "#7B7B7B", "#707070", "#656565", "#5A5A5A", "#4F4F4F", "#444444", "#393939", "#2E2E2E", "#232323"
Excel: "#9999FF", "#993366", "#FFFFCC", "#CCFFFF", "#660066", "#FF8080", "#0066CC", "#CCCCFF", "#000080", "#FF00FF", "#FFFF00", "#00FFFF", "#800080", "#800000", "#008080", "#0000FF"
Light: "#E6E6FA", "#FFF0F5", "#FFDAB9", "#FFFACD", "#FFE4E1", "#F0FFF0", "#F0F8FF", "#F5F5F5", "#FAEBD7", "#E0FFFF"
Pastel: "#87CEEB", "#32CD32", "#BA55D3", "#F08080", "#4682B4", "#9ACD32", "#40E0D0", "#FF69B4", "#F0E68C", "#D2B48C", "#8FBC8B", "#6495ED", "#DDA0DD", "#5F9EA0", "#FFDAB9", "#FFA07A"
EarthTones: "#FF8000", "#B8860B", "#C04000", "#6B8E23", "#CD853F", "#C0C000", "#228B22", "#D2691E", "#808000", "#20B2AA", "#F4A460", "#00C000", "#8FBC8B", "#B22222", "#8B4513", "#C00000"
SemiTransparent: "#FF0000", "#00FF00", "#0000FF", "#FFFF00", "#00FFFF", "#FF00FF", "#AA7814", "#FF0000", "#00FF00", "#0000FF", "#FFFF00", "#00FFFF", "#FF00FF", "#AA7814", "#647832", "#285A96"
Berry: "#8A2BE2", "#BA55D3", "#4169E1", "#C71585", "#0000FF", "#8A2BE2", "#DA70D6", "#7B68EE", "#C000C0", "#0000CD", "#800080"
Chocolate: "#A0522D", "#D2691E", "#8B0000", "#CD853F", "#A52A2A", "#F4A460", "#8B4513", "#C04000", "#B22222", "#B65C3A"
Fire: "#FFD700", "#FF0000", "#FF1493", "#DC143C", "#FF8C00", "#FF00FF", "#FFFF00", "#FF4500", "#C71585", "#DDE221"
SeaGreen: "#2E8B57", "#66CDAA", "#4682B4", "#008B8B", "#5F9EA0", "#3CB371", "#48D1CC", "#B0C4DE", "#8FBC8B", "#87CEEB"
BrightPastel: "#418CF0", "#FCB441", "#E0400A", "#056492", "#BFBFBF", "#1A3B69", "#FFE382", "#129CDD", "#CA6B4B", "#005CDB", "#F3D288", "#506381", "#F1B9A8", "#E0830A", "#7893BE" 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-07T23:17:50.260

我花了很长时间试图找到同样的信息，但一直没有找到答案。

我最终不得不自己“发现”这些价值观。我只需要 BrighPastel 调色板，这就是我发现的：

```
'See Color Palette details here:http://blogs.msdn.com/b/alexgor/archive/2009/10/06/setting-chart-series-colors.aspx
Public BrightPastel_ColorPalette As Integer() = {15764545, 4306172, 671968, 9593861, 12566463, 6896410, 8578047, 14523410, 4942794, 14375936, 8966899, 8479568, 11057649, 689120, 12489592} 
```

高温高压

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-07T22:09:21.300

根据查看的文档

[http://technet.microsoft.com/en-us/library/dd239355(v=sql.100).aspx](http://technet.microsoft.com/en-us/library/dd239355(v=sql.100).aspx)

它是一组常用的 Microsoft 颜色代码，所有这些列表都可以在这里找到

[http://msdn.microsoft.com/library/ms531197.aspx](http://msdn.microsoft.com/library/ms531197.aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-05-03T16:56:40.813

我不可能是唯一一个想在网页上看到这个的人。所以这里有一些快速而肮脏的 VB.NET 代码来显示它。只需在页面上放置一个名为“LitColors”的文字。

希望这可以节省 30 分钟。

```
Protected Sub Page_Load(sender As Object, e As EventArgs) Handles Me.Load
    Dim ArrBright() As String = {"#008000", "#0000FF", "#800080", "#00FF00", "#FF00FF", "#008080", "#FFFF00", "#808080", "#00FFFF", "#000080", "#800000", "#FF0000", "#808000", "#C0C0C0", "#FF6347", "#FFE4B5"}
    Dim ArrGrayscale() As String = {"#C8C8C8", "#BDBDBD", "#B2B2B2", "#A7A7A7", "#9C9C9C", "#919191", "#868686", "#7B7B7B", "#707070", "#656565", "#5A5A5A", "#4F4F4F", "#444444", "#393939", "#2E2E2E", "#232323"}
    Dim ArrExcel() As String = {"#9999FF", "#993366", "#FFFFCC", "#CCFFFF", "#660066", "#FF8080", "#0066CC", "#CCCCFF", "#000080", "#FF00FF", "#FFFF00", "#00FFFF", "#800080", "#800000", "#008080", "#0000FF"}
    Dim ArrLight() As String = {"#E6E6FA", "#FFF0F5", "#FFDAB9", "#FFFACD", "#FFE4E1", "#F0FFF0", "#F0F8FF", "#F5F5F5", "#FAEBD7", "#E0FFFF"}
    Dim ArrPastel() As String = {"#87CEEB", "#32CD32", "#BA55D3", "#F08080", "#4682B4", "#9ACD32", "#40E0D0", "#FF69B4", "#F0E68C", "#D2B48C", "#8FBC8B", "#6495ED", "#DDA0DD", "#5F9EA0", "#FFDAB9", "#FFA07A"}
    Dim ArrEarthTones() As String = {"#FF8000", "#B8860B", "#C04000", "#6B8E23", "#CD853F", "#C0C000", "#228B22", "#D2691E", "#808000", "#20B2AA", "#F4A460", "#00C000", "#8FBC8B", "#B22222", "#8B4513", "#C00000"}
    Dim ArrSemiTransparent() As String = {"#FF0000", "#00FF00", "#0000FF", "#FFFF00", "#00FFFF", "#FF00FF", "#AA7814", "#FF0000", "#00FF00", "#0000FF", "#FFFF00", "#00FFFF", "#FF00FF", "#AA7814", "#647832", "#285A96"}
    Dim ArrBerry() As String = {"#8A2BE2", "#BA55D3", "#4169E1", "#C71585", "#0000FF", "#8A2BE2", "#DA70D6", "#7B68EE", "#C000C0", "#0000CD", "#800080"}
    Dim ArrChocolate() As String = {"#A0522D", "#D2691E", "#8B0000", "#CD853F", "#A52A2A", "#F4A460", "#8B4513", "#C04000", "#B22222", "#B65C3A"}
    Dim ArrFire() As String = {"#FFD700", "#FF0000", "#FF1493", "#DC143C", "#FF8C00", "#FF00FF", "#FFFF00", "#FF4500", "#C71585", "#DDE221"}
    Dim ArrSeaGreen() As String = {"#2E8B57", "#66CDAA", "#4682B4", "#008B8B", "#5F9EA0", "#3CB371", "#48D1CC", "#B0C4DE", "#8FBC8B", "#87CEEB"}
    Dim ArrBrightPastel() As String = {"#418CF0", "#FCB441", "#E0400A", "#056492", "#BFBFBF", "#1A3B69", "#FFE382", "#129CDD", "#CA6B4B", "#005CDB", "#F3D288", "#506381", "#F1B9A8", "#E0830A", "#7893BE"}

    Dim HTML As String = ""
    HTML = HTML & "<table>"

    HTML = HTML & "<tr>"
    HTML = HTML & "<td>Bright</td>"
    For Each a In ArrBright
        HTML = HTML & "<td style=""background: " & a.ToString & " "" >" & a.ToString & "</td>"
    Next
    HTML = HTML & "</tr><tr><td>&nbsp;</td></tr>"

    HTML = HTML & "<tr>"
    HTML = HTML & "<td>GrayScale</td>"
    For Each a In ArrGrayscale
        HTML = HTML & "<td style=""background: " & a.ToString & " "" >" & a.ToString & "</td>"
    Next
    HTML = HTML & "</tr><tr><td>&nbsp;</td></tr>"

    HTML = HTML & "<tr>"
    HTML = HTML & "<td>Excel</td>"
    For Each a In ArrExcel
        HTML = HTML & "<td style=""background: " & a.ToString & " "" >" & a.ToString & "</td>"
    Next
    HTML = HTML & "</tr><tr><td>&nbsp;</td></tr>"

    HTML = HTML & "<tr>"
    HTML = HTML & "<td>Light</td>"
    For Each a In ArrLight
        HTML = HTML & "<td style=""background: " & a.ToString & " "" >" & a.ToString & "</td>"
    Next
    HTML = HTML & "</tr><tr><td>&nbsp;</td></tr>"

    HTML = HTML & "<tr>"
    HTML = HTML & "<td>Pastel</td>"
    For Each a In ArrPastel
        HTML = HTML & "<td style=""background: " & a.ToString & " "" >" & a.ToString & "</td>"
    Next
    HTML = HTML & "</tr><tr><td>&nbsp;</td></tr>"

    HTML = HTML & "<tr>"
    HTML = HTML & "<td>EarthTomes</td>"
    For Each a In ArrEarthTones
        HTML = HTML & "<td style=""background: " & a.ToString & " "" >" & a.ToString & "</td>"
    Next
    HTML = HTML & "</tr><tr><td>&nbsp;</td></tr>"

    HTML = HTML & "<tr>"
    HTML = HTML & "<td>Semi Transparent</td>"
    For Each a In ArrSemiTransparent
        HTML = HTML & "<td style=""background: " & a.ToString & " "" >" & a.ToString & "</td>"
    Next
    HTML = HTML & "</tr><tr><td>&nbsp;</td></tr>"

    HTML = HTML & "<tr>"
    HTML = HTML & "<td>Berry</td>"
    For Each a In ArrBerry
        HTML = HTML & "<td style=""background: " & a.ToString & " "" >" & a.ToString & "</td>"
    Next
    HTML = HTML & "</tr><tr><td>&nbsp;</td></tr>"

    HTML = HTML & "<tr>"
    HTML = HTML & "<td>Chocolate</td>"
    For Each a In ArrChocolate
        HTML = HTML & "<td style=""background: " & a.ToString & " "" >" & a.ToString & "</td>"
    Next
    HTML = HTML & "</tr><tr><td>&nbsp;</td></tr>"

    HTML = HTML & "<tr>"
    HTML = HTML & "<td>Fire</td>"
    For Each a In ArrFire
        HTML = HTML & "<td style=""background: " & a.ToString & " "" >" & a.ToString & "</td>"
    Next
    HTML = HTML & "</tr><tr><td>&nbsp;</td></tr>"

    HTML = HTML & "<tr>"
    HTML = HTML & "<td>SeaGreen</td>"
    For Each a In ArrSeaGreen
        HTML = HTML & "<td style=""background: " & a.ToString & " "" >" & a.ToString & "</td>"
    Next
    HTML = HTML & "</tr><tr><td>&nbsp;</td></tr>"

    HTML = HTML & "<tr>"
    HTML = HTML & "<td>BrightPastel</td>"
    For Each a In ArrBrightPastel
        HTML = HTML & "<td style=""background: " & a.ToString & " "" >" & a.ToString & "</td>"
    Next
    HTML = HTML & "</tr><tr><td>&nbsp;</td></tr>"

    HTML = HTML & "</table>"

    LitColors.Text = HTML
End Sub 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-08-30T06:58:22.130

随着 .NET 的开源，您可以在此处找到所有图表调色板颜色：

[https://github.com/dotnet/winforms-datavisualization/blob/main/src/System.Windows.Forms.DataVisualization/Utilities/ColorPalette.cs](https://github.com/dotnet/winforms-datavisualization/blob/main/src/System.Windows.Forms.DataVisualization/Utilities/ColorPalette.cs)

# jsfiddle - jsfiddle是空白的

> ID：14204828
> 
> 赞同：1
> 
> 时间：2013-01-07T22:02:43.470
> 
> 标签：jsfiddle

> **可能重复：**
> [在 jsfiddle 上看不到代码，只有结果](https://stackoverflow.com/questions/14326559/not-seeing-code-on-jsfiddle-only-result)

我有一个奇怪的问题，在多个浏览器上，编码（HTML、JS、CSS）不显示。它的结果确实有效。但是，例如，如果我去，我没有编码

```
<http://jsfiddle.net/PFVxK/>

<http://i.imgur.com/sWvzE.png> 
```

我不只是去页面并删除编码。

知道发生了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T22:45:33.913

重新加载缓存应该可以解决问题。让我知道这是否有帮助。

您也可以[在此处](https://github.com/jsfiddle/jsfiddle-docs-alpha/issues)报告您的问题。

# jquery - 将 onclick 事件附加到 struts 单选按钮

> ID：14204833
> 
> 赞同：1
> 
> 时间：2013-01-07T22:02:57.590
> 
> 标签：jquery, onclick, struts, radio

我似乎无法将事件附加到我的 struts 单选按钮。

它定义为：

```
<s:radio id="useCourseList"
         name="useCourseList"
         required="true"
         label="Course List?"
         labelposition="top" 
         list="#{'1':'No','2':'Yes'}" 
         value="1" 
/> 
```

但我似乎无法为它创建点击事件。我试过

```
$('#useCourseList').click(function(event){
    if($(this).val() === '2') {
        renderCourseList();
    } else {
        switchToSingleCourseMode();
    }
}); 
```

但这附加到“useCourseList”——按钮的实际ID是“useCousreList1”和“useCourseList2”。

将相同的点击事件分配给它们似乎很不稳定，尤其是当以后添加更多选项时，我也必须添加这些选项。如何添加“一个并完成”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T22:10:55.313

我假设呈现的 html 的 id 不会与定义的完全相同。你可以试试：

```
$('[id*="useCourseList"]').click(... 
```

见[http://api.jquery.com/attribute-contains-selector/](http://api.jquery.com/attribute-contains-selector/)

# sql - 将数据从一个表插入到另一个具有相同列名的存储过程

> ID：14204834
> 
> 赞同：8
> 
> 时间：2013-01-07T22:03:01.960
> 
> 标签：sql, sql-server, tsql, stored-procedures

我有一张主桌和几张小桌。

*   `Master`表有`C1 | C2 | C3 | C4 | C5 |`
*   一张小桌子有`C1 | C2 | C3 |`

此外`@C1`（一个具有与表中 C1 的值匹配的值的变量`Master`。

两个表的列名匹配。我想创建一个存储过程，将值从`Master`表（`C1`、、`C2`和`C3`）插入到较小的表（`C1, C2, C3`）中。

我的努力：

```
Create proc Schema.Proc
(@C1 int)
AS
BEGIN
INSERT INTO SmallTable
(C1, C2, C3) --- Columns of smaller table
Values (SELECT C1, C2, C3 ---Columns of Master table
FROM MasterTable)
WHERE C1 = @C1 --- Where value of C1 of Master table matches the value of @C1
END 
```

请帮忙

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-07T22:05:56.680

您需要使用`INSERT INTO ... SELECT .....`语法 - 不`VALUES`涉及关键字：

```
CREATE PROCEDURE Schema.Proc
   (@C1 int)
AS
BEGIN
    INSERT INTO SmallTable(C1, C2, C3) --- Columns of smaller table
        SELECT C1, C2, C3 ---Columns of Master table
        FROM MasterTable
        WHERE C1 = @C1 --- Where value of C1 of Master table matches the value of @C1
END 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T22:05:54.453

你很亲近！只要 C1、C2 和 C3 是相同的数据类型，这应该可以工作。

```
Create proc Schema.Proc
(@C1 int)
AS
BEGIN
INSERT INTO SmallTable
(C1, C2, C3) --- Columns of smaller table
SELECT C1, C2, C3 ---Columns of Master table
FROM MasterTable
WHERE C1 = @C1
END 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-20T19:27:44.930

```
CREATE OR REPLACE PROCEDURE P_INSERT(U_ID NUMBER)
AS
BEGIN
INSERT INTO X(ID,NAME,SALARY)--X IS TABLE NAME 
SELECT ABC_ID,NAME,SALARY FROM ABC
WHERE ABC_ID=U_ID;--ABC_ID IS SAME VALUE OF U_ID
END; 
```

# asp.net - 为什么这个 MVC4 Web API 路由与 ASP.NET 网站项目相比不起作用？

> ID：14204836
> 
> 赞同：0
> 
> 时间：2013-01-07T22:03:21.527
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4

在 MVC4 Web API 项目中具有以下“itemtypelist”路由

```
public static void RegisterRoutes(RouteCollection routes)
{
  routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

  routes.MapRoute(
  name: "Default",
  url: "{controller}/{action}/{id}",
  defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
  );

  routes.MapRoute(
  name: "itemtypelist",
  url: "{controller}/list/{itemtype}/{searchtext}",
  defaults: new { controller = "home", action = "list", itemtype = (string)null, searchtext = (string)null }
  );

} 
```

旨在映射到以下控制器操作

```
[AcceptVerbs("GET", "POST")]
public IEnumerable<Repository.ViewModel.Brand> List(string itemType, string searchText) 
```

和网址

```
/api/brand/list/mytype/mysearchtext 
```

但是，该 URL 返回 404 消息。此路由和控制器操作在网站项目中有效，但在 Web API 项目中无效。MVC4 Web API 项目中有什么不同会导致找不到操作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-07T22:06:58.227

> MVC4 Web API 项目中有什么不同会导致找不到操作？

一切都不一样了。绝对的一切。从配置 API 路由的方式开始，经过整个模型绑定，直到基本控制器。因此，如果您想开发 Web API，基本上您会忘记所有关于 ASP.NET MVC 的知识。微软复制了每一件事。这是一个新的设计、新的程序集、新的命名空间、新的 API。与 ASP.NET MVC 无关。

因此，如果要配置 Web API 路由，则需要使用`MapHttpRoute`扩展方法，而不是`MapRoute`仅适用于标准 MVC 控制器的方法。不要将基类`System.Web.Mvc.Controller`（您习惯于在 MVC 应用程序中使用）与`System.Web.Http.ApiController`（您的 API 控制器的基类）混淆。那是两种完全不同的野兽。

下面是如何为 ApiController 配置路由：

```
GlobalConfiguration.Configuration.Routes.MapHttpRoute(
    name: "DefaultAPI",
    routeTemplate: "api/{controller}/{id}",
    defaults: new { id = RouteParameter.Optional }
); 
```

另请注意，在 RESTful API 中，您没有在路由中指定操作名称。它是从用于使用它的 HTTP 动词中假设的。这是[`good article`](http://www.asp.net/web-api/overview/web-api-routing-and-actions/routing-in-aspnet-web-api)我建议您阅读有关 Web API 中的 RESTful 路由的内容。

顺便说一句，如果您使用 Internet 或空模板创建一个新的 ASP.NET MVC 4 项目，您会注意到 Visual Studio 将为您创建 2 个文件：

1.  `~/App_Start/RouteConfig.cs`- 放置所有标准 MVC 路由的位置
2.  `~/App_Start/WebApiConfig.cs`- 放置所有 Web API 配置（包括路由、自定义格式化程序等）的位置

您还会注意到他们使用了两种完全不同的方法。不要忘记 Web API 可以是自托管的，例如在控制台应用程序中。这就是微软决定从头开始实施一切的原因。他们不希望与 ASP.NET MVC 有任何耦合。

# c++ - 在 C++ (Qt) 中使用非本地 IP 地址设置服务器

> ID：14204838
> 
> 赞同：0
> 
> 时间：2013-01-07T22:03:33.310
> 
> 标签：c++, qt, network-programming, ip-address

我是网络编程的新手，所以我不确定这是否真的是正确的问题，但我想用 C++ 制作一个服务器程序（我正在使用 Qt。）我使用了“财富服务器”示例创建一个简单的服务器，您可以通过输入服务器显示的 IP 地址与客户端连接。如果我输入 localhost (127.0.0.1) 我可以连接，但是服务器说它正在运行的地址是 169.254.253.67，我发现这是另一个本地地址（我也无法连接到它。）我运行服务器，所以它不在本地地址上？

这是我使用的示例：http: [//doc.qt.digia.com/qt/network-fortuneserver.html](http://doc.qt.digia.com/qt/network-fortuneserver.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T01:12:32.163

服务器实现获取所有发现的 ip 地址的列表，然后找到第一个非本地 ip。否则，它默认使用 localhost。如果您看到本地主机地址，则表明您的网络中未正确设置某些内容，并且 Qt 无法确定 LAN ip。

正如@drescherjm 在评论中所建议的那样，您可以通过`0.0.0.0`. 要查看此操作，您只需在使用`ipAddress`字符串设置状态标签之前添加一行：

```
// add this to force the socket to listen on all interfaces
ipAddress = QHostAddress("0.0.0.0").toString();
// or if you have a local static ip and want to be explicit
// ipAddress = QHostAddress("192.168.xxx.xxx").toString();

// followed by the already existing line for setting the text
statusLabel->setText(tr("The server is running on\n\nIP: %1\nport: %2\n\n"
                        "Run the Fortune Client example now.")
                     .arg(ipAddress).arg(tcpServer->serverPort())); 
```

现在，如果您的网络设置正确，任何其他可以看到运行服务器应用程序的计算机都应该能够在给定端口上连接。

# git - git 工作流分支更新

> ID：14204840
> 
> 赞同：2
> 
> 时间：2013-01-07T22:03:52.313
> 
> 标签：git, git-merge

这是情况。github 上有 3 个分支：master、his-tests、my-tests 让我们暂时忘记 master 分支。在 master 上的初步工作之后，与我一起工作的一个人创建了一个分支“his-tests”，他继续开发代码。然后我根据他创建了我的分支：

```
git checkout -b my-tests 
```

我在我的测试中添加了一些更改，提交并将其推送到 github。我的合作者看到了这些变化并在他的分支（他的测试）中实施了它们。几天后，他添加了更多更改，我想在我的分支（我的测试）中实现它们。我该怎么做？我知道我可以删除我的分支并再次克隆他的分支，但我不能继续这样做。正确的处理方法是什么？所以当我访问github时，我可以看到他的分支发生了变化（通常是1或2个文件）：

```
git branch -a
master
* my-branch
his-branch
remotes/origin/HEAD -> origin/master
remotes/origin/master
remotes/origin/my-branch
remotes/origin/his-branch 
```

那么我该怎么做才能将他的分支与我的分支合并。他拥有最新的文件状态，我希望更新 my-branch 中的所有文件。正如你所看到的，我已经结帐并且总是在我的分支中工作，我不会在他的分支中进行更改。这个循环的工作流程是用他的更改更新 my-branch，然后处理它以添加一些更改并将我的更改推送到 github 上的 my-branch。

您还需要更多信息吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T22:12:28.873

> 那么我该怎么做才能将他的分支与我的分支合并

您将他的分支与我的分支合并！

首先，确保您的本地存储库与您在 GitHub 上看到的相符：

```
$ git checkout his-branch
$ git pull 
```

一旦你的本地仓库是最新的，你可以将新的东西从合并`his-branch`到`my-branch`：

```
$ git checkout my-branch
$ git merge his-branch 
```

使用`git merge`将允许 git 处理两个分支之间任何可能的冲突。如果你有冲突但你不关心它们，你只是希望你的分支和他的一样，放弃你分支中的所有其他东西，你可以移动你的分支`git reset`：

```
$ git checkout my-branch
$ git reset --hard his-branch 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T22:12:54.763

您必须将他的分支合并到您的分支中：

```
git checkout my-test
git merge his-test 
```

你也`rebase`可以改变他的分支。这将使历史保持直截了当，但是您修改了历史（有些人认为这是不好的）

```
git checkout my-test
git rebase his-test 
```

如果您的同事在另一个遥控器上。首先添加遥控器：

```
git remote add my-colleague-remote git@hisremote.com 
```

然后，您引用此遥控器上的分支保留：

```
git fetch my-colleague-remote
git merge my-colleague-remote/his-branch 
```

# spring - JpaSpecificationExecutor：具有规范的复杂查询

> ID：14204841
> 
> 赞同：2
> 
> 时间：2013-01-07T22:03:53.420
> 
> 标签：spring, spring-data-jpa

我实际上正在使用不同的过滤器进行研究。

当我使用 JpaRepository 进行简单查询时，我发现 JpaSpecificationExecutor 可以使用 Criterias 进行动态查询。

我的问题是我需要使用 group by 和 count() 创建一个复杂的查询。group by 没问题，但我不知道如何覆盖“select”部分来放置“count”指令。

有人可以帮助我吗？

我正在使用 spring 3.1.2 和 spring-jpa-data 1.0.3 这是我的代码：

```
return new Specification< Article >() {

    @Override
    public Predicate toPredicate(final Root<Article> root,
        final CriteriaQuery<?> query, final CriteriaBuilder builder) {
        //count ???
        query.groupBy(root.get(Article_.id));
        Predicate p = builder.and(builder.like(root.<String> get(Article_.title), "%" + title + "%"));

        return p;
    }
} 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T09:49:27.387

不幸的是，您不能使用 spring-data 规范来做到这一点。

您可以在这里看到**为什么**以及**如何**在仍然使用 spring-data 时执行此操作（有一个仅返回一个字段的简单查询）： [spring-data 规范 - 返回 id 列表而不是对象](https://stackoverflow.com/a/13974078/935083)

要获取字段列表，您可以使用 JPA Tuple。你可以在这里找到一个例子： [JPA & Criteria API - Select only specific columns](https://stackoverflow.com/a/12702437/935083)

**短版**：您需要创建一个自定义的 spring-data 存储库，它将使用`CriteriaQuery<Tuple>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T02:16:12.723

如果您查看 Spring Data `org.springframework.data.jpa.repository.support.SimpleJpaRepository`，则有一个名为`getCountQuery(..)`. 此查询如下所示；

```
/**
 * Creates a new count query for the given {@link Specification}.
 * 
 * @param spec can be {@literal null}.
 * @return
 */
private TypedQuery<Long> getCountQuery(Specification<T> spec) {

    CriteriaBuilder builder = em.getCriteriaBuilder();
    CriteriaQuery<Long> query = builder.createQuery(Long.class);

    Root<T> root = applySpecificationToCriteria(spec, query);
    query.select(builder.count(root));

    return em.createQuery(query);
} 
```

这在 Spring Data JPA 的 Pageable 组件中使用，并可能提供解决方案

# .htaccess - htaccess 将特定文件和文件夹重定向到新站点，并将其他任何内容重定向到新站点上的特定页面

> ID：14204843
> 
> 赞同：1
> 
> 时间：2013-01-07T22:03:59.007
> 
> 标签：.htaccess, mod-rewrite, redirect, rewrite

我找不到任何人询问或回答我的具体情况。

我正在将具有大量静态产品和信息页面的旧电子商务站点移动到安装在新位置的新电子商务软件包（进入根目录中的新文件夹）。 [http://domain.com](http://domain.com)变成[http://domain.com/newstore](http://domain.com/newstore)

我知道我可以将整个站点重定向到新位置，但这不起作用，因为大部分新站点都是从电子商务软件动态运行的，并且产品页面地址甚至与旧站点都不接近。

我已经使用 RedirectMatch 为我知道需要重定向的所有产品页面创建了单独的重写，这很好。现在我需要我可能错过的任何页面来重定向到新商店的主页，但我显然无法重定向我不知道的内容。所以这是我的问题，我现在如何在不破坏我已有的 200 条 RedirectMatch 规则的情况下将任何剩余的页面重定向到主页？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T00:05:59.913

请注意，这`RedirectMatch`是 mod_alias，而不是 mod_rewrite。当两个模块的指令应用于相同的 URI 时，这两个模块并不总是能很好地相互配合。在不知道您的网站是如何设置的情况下，无法回答您的问题，但您可以使用 *mod_rewrite* 尝试类似的操作：

```
RewriteEngine On
# Check that the request isn't for an existing resource
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
# Check that the request isn't for the new store
RewriteCond %{REQUEST_URI} !^/newstore
# redirect to the new store
RewriteRule ^ /newstore/ [L,R] 
```

这里的原因是，如果请求不是针对现有页面、图像、脚本，可能会导致 404，并且如果请求不是针对`/newstore`文件夹中的动态站点，那么我们将其重定向到`/newstore/`文件夹。

但就像我说的，你有 200`RedirectMatch`条指令，而 mod_alias 并不总是与 mod_rewrite 配合得很好。您*可能*需要将它们全部转换为重写规则，但这可能没有必要。例子：

```
RedirectMatch 301 ^/old-path/old-page.html$ /newstore/?page=123 
```

将转化为：

```
RewriteRule ^/old-path/old-page.html$ /newstore/?page=123 [L,QSA,R=301] 
```

所有这些重写规则**必须*在*上述将所有 404 重定向到 /newstore* 的规则之前。因为它是一个“包罗万象”的规则，就像最后的手段一样，它需要在你所有的常规重定向之后。

# c++ - c++ 添加两个布尔数组

> ID：14204844
> 
> 赞同：2
> 
> 时间：2013-01-07T22:04:00.767
> 
> 标签：c++, boolean

我有一个数字作为布尔数组，但我需要对它进行算术运算，例如加减法和逻辑运算，例如`AND`使用其他类似的数字。如何在 C++ 中执行此操作而无需处理所有特定于布尔值的计算，并且简单地执行此操作。一个例子：

```
bool a[10];
bool b[10];
bool c[10];
c = a + b; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-07T22:08:34.223

您可以使用[`std::bitset`](http://en.cppreference.com/w/cpp/utility/bitset)

```
#include <bitset>

std::bitset<10> a(4);
std::bitset<10> b("0000001000");

std::bitset c = a.to_ulong() + b.to_ulong();

//Etc.
//You can also use
a[0] = 4; a[1] = 5; //to initialize / access 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T22:27:04.680

[`std::transform`](http://www.cplusplus.com/reference/algorithm/transform/)可以对来自两个容器的元素对执行二元运算，并将结果放入第三个容器。您可以使用[`std::logical_and`](http://www.cplusplus.com/reference/functional/logical_and/), 并[`std::logical_or`](http://www.cplusplus.com/reference/functional/logical_or/)获得所需的结果：

```
transform(a, a+10,
          b, b+10,
          c, logical_and<bool>());

transform(a, a+10,
          b, b+10,
          c, logical_or<bool>()); 
```

# java - 为什么层次聚类看不到数值属性？

> ID：14204846
> 
> 赞同：1
> 
> 时间：2013-01-07T22:04:06.793
> 
> 标签：java, weka, hierarchical-clustering

我在玩 Java、Weka 和 IP 地址。现在我正在尝试使用数据集进行层次聚类：源和目标 IPv4（转换为十进制）和协议 - 均来自 Wireshark 日志。

我将地址和协议保存在列表中，并以手动方式构建数据集

```
 FastVector atts = new FastVector();
    atts.addElement(new Attribute("from"));
    atts.addElement(new Attribute("to"));
    atts.addElement(new Attribute("protocol", (FastVector)null));
    Instances data = new Instances("Connections", atts, 0);

    for (int i=0; i<50; i++) {
        double[] vals = new double[data.numAttributes()];
        // Get address from list and with special method convert it to long
        vals[0] = from.get(i).getDecimal();
        vals[1] = to.get(i).getDecimal();
        // Protocol - String like "TCP"
        vals[2] = data.attribute(2).addStringValue(protocol.get(i));
        data.add(new Instance(1.0, vals));
     }

    HierarchicalClusterer hc = new HierarchicalClusterer();
    //hc.setDebug(true);
    hc.setPrintNewick(true);
    hc.setNumClusters(4);
    hc.buildClusterer(data);

    System.out.print(hc); 
```

当我从数据中打印一些随机实例时，我可以看到一切正常。但是在聚类的输出中只有关于协议的信息。例如（这只是一小部分）。

> 集群 1 ((MSNMS:0,MSNMS:0):0,MSNMS:0)

带有调试选项的输出类似于

> 合并 0 4 0.0 0.0
> 
> 合并 0 5 0.0 0.0
> 
> 合并 1 7 0.0 0.0

我做错了什么还是......像这样聚类数据集的整个想法只是愚蠢的？

# wpf - 如何在wpf中传递系统命令

> ID：14204852
> 
> 赞同：0
> 
> 时间：2013-01-07T22:04:27.527
> 
> 标签：wpf, command, system, shutdown

我想制作一个简单的 wpf 应用程序，它允许用户设置一个计时器，以便他们希望他们的计算机关闭。我之前已经将这样的程序作为 c++ 控制台应用程序，通过简单地传递命令“system(shutdown -s -f 6000)” - （在 6000 秒内关闭。我将如何在 wpf 应用程序中执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T22:29:33.433

您可以使用以下构造调用所有 shell 命令，例如运行关闭命令：

```
System.Diagnostics.Process.Start("CMD.exe", "shutdown -s -t 60000"); 
```

这将显示命令提示符窗口，如果不需要，您可以向进程添加 ProcessStartInfo：

```
var process = new System.Diagnostics.Process();
var startInfo = new System.Diagnostics.ProcessStartInfo();

startInfo.WindowStyle = System.Diagnostics.ProcessWindowStyle.Hidden;
startInfo.FileName = "cmd.exe";
startInfo.Arguments = "/C shutdown -s -t 60000";

process.StartInfo = startInfo;
process.Start(); 
```

# google-ads-api - 如何通过 Adwords API 更新最高每次转化费用出价？

> ID：14204853
> 
> 赞同：0
> 
> 时间：2013-01-07T22:04:28.553
> 
> 标签：google-ads-api

我可以看到如何通过 api 更新目标 CPA 出价但是我想知道您是否可以更新最高 CPA 出价？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-19T19:22:38.883

据我所知，你不能。最接近的选项是“TargetCpa”

# c# - 关闭时最小化

> ID：14204855
> 
> 赞同：0
> 
> 时间：2013-01-07T22:04:35.670
> 
> 标签：c#, minimize

简而言之，我有这个：

```
 private void Form1_FormClosing(object sender, FormClosingEventArgs e)
    {
            e.Cancel = true;
            this.WindowState = FormWindowState.Minimized;
            this.ShowInTaskbar = false;
    } 
```

而且它不起作用（按下“X”时程序关闭，而不是我的目的地 - 最小化它）；可能是什么问题呢？

```
this.ShowInTaskbar = false; // is used because app goes to system tray and it doesn't need to be showed in taskbar. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T22:06:40.210

为什么要费心测试看看窗口当前处于什么状态？

只需设置并将状态设置为最小化`e.Cancel`。`true`

=== 更新 ===

我创建了一个新的 Windows 窗体项目（使用 VS2010 和 VS2012 测试了 4.0 和 3.5 框架）。

从那里我将通知图标添加到 Form1 并将双击事件（下面的代码）和图标设置为我拥有的一些随机图标文件。我还设置了表单关闭事件（下面的代码）：

```
public partial class Form1 : Form {
        public Form1() {
            InitializeComponent();
        }

        private void Form1_FormClosing( object sender, FormClosingEventArgs e ) {
            e.Cancel = true;
            this.WindowState = FormWindowState.Minimized;
            this.ShowInTaskbar = false;
        }

        private void notifyIcon1_MouseDoubleClick( object sender, MouseEventArgs e ) {
            this.WindowState = FormWindowState.Normal;
        }
    } 
```

然后我运行了这个项目。当我单击关闭按钮时，表单被隐藏了。当我双击通知图标时，它又回来了。我在 Windows 7 上，但这没关系。

现在，我确实发现如果我将 Form1 设置为子窗体，就会发生一些奇怪的事情。但我不完全确定你在做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T22:20:43.637

IIRC，您不能将 this.ShowInTaskbar 设置为 false*并将*其最小化；为了做你想做的事，你需要这个：

```
private void Form1_FormClosing(object sender, FormClosingEventArgs e)
{
    e.Cancel = true;
    this.Visible = false;
} 
```

然后，无论您使用什么将表单恢复为标准视图，您只需输入：

```
this.Visible = true; 
```

如果您仍在寻找最小化动画，只需在设置可见性之前最小化表单。

# c++ - 如何使用文件在 SQL 或 sqsh 中输入变量列表？

> ID：14204856
> 
> 赞同：0
> 
> 时间：2013-01-07T22:04:37.060
> 
> 标签：c++, sql-server, c++11, sqsh

我对 SQL 很陌生，我想将 SQL 集成到我的 c++ 代码中，或者使用 c++ 输出文件作为 SQL 的输入变量。

例如我有一个查询：

```
use data_set1;
select a.cluster, b.pig, b.PDBgi, b.PDBaccession, a.Seqstar, a.Seqstp
from data_set1..clusterPDBpig a 
join pig2PDBgi_acc b
ON a.pig = b.pig where b.PDBaccession = '& 2Y69S' 
```

其中 b.PDBaccession 是一个 500-1000 的数据列表，我可以将它们放在 c++ 代码中的向量或输出文件中...如何在此处集成 SQL 查询？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T22:15:04.050

查找[SQL 表值参数](http://msdn.microsoft.com/en-us/library/bb510489%28v=sql.105%29.aspx)。

您可以创建用户定义的表类型参数，例如：

```
CREATE TYPE [dbo].[AccessionData] AS TABLE(
    [ValueToUse] [varchar](100) NOT NULL
    PRIMARY KEY CLUSTERED 
(
    [ValueToUse] ASC
)WITH (IGNORE_DUP_KEY = OFF)
)
GO 
```

然后在您的 SQL 代码中执行以下操作：

```
SELECT a.cluster, b.pig, b.PDBgi, b.PDBaccession, a.Seqstar, a.Seqstp
from clusterPDBpig a
    INNER JOIN pig2PDBgi_acc b on (a.pig = b.pig)
    INNER JOIN @InputData I on (I.PDBaccession = b.PDBaccession) 
```

@InputData 的类型在哪里`AccessionData`

以下链接提供了一些信息：

[http://www.christian-etter.de/?tag=table-valued-parameter](http://www.christian-etter.de/?tag=table-valued-parameter)

[http://www.c-sharpcorner.com/uploadfile/pchandraker/passing-table-valued-parameter-to-stored-procedu-part-1/](http://www.c-sharpcorner.com/uploadfile/pchandraker/passing-table-valued-parameter-to-stored-procedu-part-1/)

# eclipse - Eclipse GMF/GEF 不同图

> ID：14204862
> 
> 赞同：0
> 
> 时间：2013-01-07T22:04:56.963
> 
> 标签：eclipse, emf

我使用 GEF/GMF，现在我尝试了 Eugenia。我想用特殊的形式创建一个特殊的模型。在一个示例中，有一些图形称为“椭圆”、“矩形”和“圆形”。这些是我知道的唯一数字，我找不到任何包含所有不同数字的列表。有人知道更多数据或我可以找到列表的网站吗？

问候 Dotana

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T17:48:19.823

好的，我自己找到了解决方案。对于每个人：这些数字列在“org.eclipse.draw2d.geometry”下。

# ruby-on-rails - 在 Rails 中添加日期

> ID：14204864
> 
> 赞同：0
> 
> 时间：2013-01-07T22:05:03.053
> 
> 标签：ruby-on-rails, ruby, erb

我有一个 Rails 应用程序，它允许用户创建帖子（如博客），我想知道如何添加它的创建日期。怎么能加上呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T22:08:15.387

Rails`timestamps`在编写`create_table`迁移时提供了该方法，它会自动创建一个`created_at`和一个`updated_at`时间戳，并在创建/更新条目时相应地填充它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T22:08:55.387

每个 rails 模型都已经有默认`created_at`列，当第一次保存记录时，该列总是会更新。

```
post = Post.first
puts post.created_at 
```

# php - 如果 'Content-Type: application/json' 在标头中，则未创建 PHP 5.4.9 $_POST 超全局

> ID：14204869
> 
> 赞同：4
> 
> 时间：2013-01-07T22:05:17.050
> 
> 标签：php, amazon-elastic-beanstalk

我注意到在我的应用程序中使用 AWS Elastic Beanstalk PHP 5.4.9 AMI 时发生了一个奇怪的错误。

提交包含标头`'Content-Type: application/json'`的 GET AJAX 请求时，$_POST 超全局设置为空。如果我删除该标题，它将按预期设置为空白`array()`

这是预期的行为吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T18:08:04.133

原来这是PECL的一个问题。在运行 PHP 5.4 安装 PECL HTTP 时，当为 GET 请求提供“Content-Type: application/json”标头时，它会导致 $_POST 设置为 null。删除 PECL HTTP 解决了这个问题。

感谢 Michael@AWS 的发现。跨线程：[https ://forums.aws.amazon.com/message.jspa?messageID=413836](https://forums.aws.amazon.com/message.jspa?messageID=413836)

编辑：由 PHP 团队修复：[https ://bugs.php.net/bug.php?id=63947&edit=2](https://bugs.php.net/bug.php?id=63947&edit=2)

# postgresql - 使用 Pl/pgsql 插入表中

> ID：14204871
> 
> 赞同：0
> 
> 时间：2013-01-07T22:05:27.350
> 
> 标签：postgresql, plpgsql

我尝试使用 pl/pgsql 将 UUID 值添加到表中。这是我的代码：

```
CREATE OR REPLACE FUNCTION "Surrogate_gen"()
  RETURNS uuid AS
$BODY$DECLARE 
uid UUID;
BEGIN
uid:=(select uuid_generate_v1());
INSERT INTO public.Surrogate_Table(wert) VALUES(uid);
RAISE NOTICE 'My UUID is %',uid;
return uid;
END
$BODY$ 
```

如果我运行此代码，则会发生错误并显示： **Relation »public.surrogate_table« 不存在**

但是这个表存在于我的数据库中。我怎么解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T22:27:17.873

我猜你用这样的东西创建了代理表：

```
create table "Surrogate_Table" (...) 
```

请注意表名称周围的引号，并注意错误消息正在谈论`surrogate_table`. PostgreSQL 将所有未加引号的标识符折叠为小写，但您有一个混合大小写的表名。添加更多双引号以获得正确的大小写：

```
INSERT INTO public."Surrogate_Table"(wert) VALUES(uid); 
```

# php - 检查两个地址“可能”在php中是否相同

> ID：14204872
> 
> 赞同：4
> 
> 时间：2013-01-07T22:05:30.040
> 
> 标签：php, regex

我有这个地址：

```
Grimshaw Lane, Bollington, Macclesfield SK10 5JB, 
```

寻找这个地址，我得到这个（从一个 API）：

```
Bollington Wharf, Grimshaw Lane, Bollington, United Kingdom 
```

我知道 preg_match 是如何工作的，但我相信无论如何都必须比较两个相似的文本（相似，不同），并确定它们是否是相同的地址（即使它们有点不同）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T22:08:57.920

显然没有任何解决方案可以让您获得 100% 可靠的结果，但为什么不试试这个：通过 wget 将两个字符串发送到 Google 地图并比较结果。Google 至少投入了数万工时来解决您正在研究的问题，为什么不让他们处理呢？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T22:55:39.153

我不确定这是否有帮助，但我会考虑使用组合使用explode 在数组中创建多个字符串和levenshtein() 来比较array() 的不同元素。

这取决于您必须比较多少个数组，但如果您只有几个（不是数千个）

伪代码将是这样的：

```
$search_address = "Bollington Wharf, Grimshaw Lane, Bollington, United Kingdom";

$my_addresses = Array("Grimshaw Lane, Bollington, Macclesfield SK10 5JB", 
                         "Different Lane, YabbaDabbaDoo, Otherfield SK12 6BJ", 
                         ...);
$search_array = explode(',', $search_address);

$best_address = array();
$lowest_compare_value = 1000;
$lowest_compare_address = array();
foreach($my_addresses as $key => $my_address) {
   $current_address_array = explode(',', $value);
   $compare_value = 0;

   foreach(<elements in $my_address>) {

      $lowest_value = 1000;      
      foreach(<elements in $search_array) {
          $new_value = levenshtein($search_element, $my_element);
          if ($new_value < $lowest_value) { $lowest_value = $new_value; }
      }
      $compare_value += $lowest_value;
   }
   if($compare_value < $lowest_compare_value) {
      $lowest_compare_value = $compare_value
      $lowest_compare_address = $my_address;
   }

} 
```

现在您还应该考虑最大合理的 levenshtein 值可能是检查比较地址是否太远。

如前所述，此方法需要时间，不应该用于需要很高速度的应用程序或如果您有许多本地地址。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-25T23:59:57.950

我创建了这个实用程序，它已经为我工作了一段时间。当然，如果谷歌地图改变了他们的 API 接口，它就必须被修改。

```
<?php
// Queries google maps for the address components
function utl_GetAddressComponents( $location )
{
    $components = file_get_contents('http://maps.google.com/maps/api/geocode/json?address='.urlencode($location).'&sensor=false');
    $output = json_decode($components);

    return $output->results[0];
}
?> 
```

这是我用来从命令行运行它的测试文件：

```
tst_MatchingAddresses.php:

<?php
require_once( "utl_GetAddressComponents.php" );
$addr1 = $argv[1];
$addr2 = $argv[2];

$gmapsResult1 = utl_GetAddressComponents( $addr1 );
$gmapsResult2 = utl_GetAddressComponents( $addr2 );

$gmapsAddr1 = $gmapsResult1->formatted_address;
$gmapsAddr2 = $gmapsResult2->formatted_address;

print("Gmap1: ".$gmapsAddr1." ----- argv[1]: ".$argv[1]."\n");
print("Gmap2: ".$gmapsAddr2." ----- argv[2]: ".$argv[2]."\n");

if ( strcmp($gmapsAddr1,$gmapsAddr2) )
{
    print("==> Addresses match!\n");
}
else
{
    print("==> Addresses DO NOT MATCH!\n");
}
?> 
```

这是一个示例命令行：

```
php tst_MatchingAddresses.php "1600 Pennsylvania Ave, Washington DC" "1600 Pennsylvania Avenue, 20500" 
```

示例输出：

```
Gmap1: 1600 Pennsylvania Avenue Northwest, President's Park, Washington, DC 20500, USA ----- argv[1]: 1600 Pennsylvania Ave, Washington DC
Gmap2: 1600 Pennsylvania Avenue Northwest, President's Park, Washington, DC 20500, USA ----- argv[2]: 1600 Pennsylvania Avenue, 20500
==> Addresses match! 
```

注意：您可以将参数输入到file_get_contents，将urlencode等替换为地址，直接进入浏览器，它将显示json结果。

# java - 大于 127 的字节值

> ID：14204883
> 
> 赞同：3
> 
> 时间：2013-01-07T22:06:24.620
> 
> 标签：java, byte

//好吧有道理

```
Byte b = (byte)207;
System.out.println(b); //value = 207 
```

//ok 没有意义

```
Integer x = Integer.parseInt("11001111", 2); //207
Byte sens = (byte)x.intValue(); //207
System.out.println(sens); //Value = -49
System.out.println(sens.intValue()); //Value = -49 
```

这里发生了什么？

**那么如何声明/表示一个值高于 127 的 8 位字节**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-07T22:07:45.860

Java 中的字节是有符号的，所以它们从 -128 到 127。像这样转换一个 int 将在 1 处获取高位（表示[二进制补码](http://en.wikipedia.org/wiki/Two%27s_complement)符号中的负数）并将其转换为负数 -49。

从那里开始，当你用 将它转换回整数时`sens.intValue()`，它会获取新的负值并返回它，所以你仍然得到 -49。

`int`不幸的是，您需要在数据类型中存储大于 128 的字节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T23:29:31.207

由于 Java 的 Byte 已签名，因此您**不能**以字节表示大于 127 的值。

在您的示例中：

```
Byte b = (byte)207;
System.out.println(b); //value = 207 
```

有一个错误。println 的输出为 -49。

```
Byte b = (byte)207;
System.out.println(b); //value = -49 
```

这意味着两种情况是相同的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-16T20:05:18.310

正数不能超过 127，负数可以超过 128，是因为一个字节的 8 位数字中的第一个 1 表示它是负数还是正数：

1 = 负

0 = 正

并且由于您可以将“1111 1111”用于负数，因此可以得到-127。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-06T17:40:24.357

255 + 负 byteValue + 1 通过计数器操作返回您的数字。仍然建议存储在 int 中。

如果你喜欢它，最好在它周围放一个数字环。

# git - 强制 git 将不同的分支推送到不同的 repos

> ID：14204884
> 
> 赞同：2
> 
> 时间：2013-01-07T22:06:39.017
> 
> 标签：git

假设我有两个本地分支：master 和 dev。我想强制将 master 分支上的所有推送到一个名为 master 的仓库，并将 dev 上的所有推送到另一个名为 dev 的仓库。

为什么？因为我想维护两个持续集成环境，每个仓库一个。

我*真正*想做的是确保主仓库拒绝除 master 以外的所有分支，反之亦然。我不会无意中将错误的分支推送到错误的仓库，这一点很重要。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T22:15:49.233

利用

```
git branch dev --set-upstream dev/dev 
```

定义默认上游位置。

这不会完全保护您，但如果您使用不带参数的“push”，它应该转到正确的远程分支。

避免使用“+”或 --force 推动也有帮助。如果服务器使用 gitolite 之类的东西，请不要向您的用户授予“+”权限。这将拒绝非快进推动。

# wpf - 将图像添加到 WPF DataGrid

> ID：14204886
> 
> 赞同：0
> 
> 时间：2013-01-07T22:06:50.550
> 
> 标签：wpf, image, datagrid

我无法在 DataGrid (WPF) 中显示图像...有什么想法吗？

在 WinForms DataGridView 中太容易了 - 叹息

数据表

```
Dim DGV As CustomControl.DGVx = ImagesItemsGrid.FindName("ImagesItems_DGV")
            Dim DS As DataSet = e.Result
            Dim DT As DataTable = DS.Tables(0).Copy
            Dim vDT As New DataTable
            With vDT.Columns
                .Add("ID", GetType(Integer))
                .Add("Name", GetType(String))
                .Add("Description", GetType(String))
                .Add("Image", GetType(Image))
            End With 
```

图片

```
Dim vImageHeight As Integer = 0
            For Each Row As DataRow In DT.Rows
                With vDT.Rows
                    Dim ImageData As Byte() = DirectCast(Row("Image_Icon"), Byte())
                    Dim vImage As New Image
                    Dim vBitMap As New BitmapImage
                    Using vStream As New IO.MemoryStream(ImageData)
                                                    vImage.Source = BitmapFrame.Create(vStream, BitmapCreateOptions.None, BitmapCacheOption.OnLoad)
                    End Using
                    vImage.Height = 20
                    .Add(Row("Image_ID"), Row("Image_Name"), Row("Image_Description"), vImage)

                End With
            Next
            DT.Dispose() 
```

列

```
For Each Col As DataColumn In vDT.Columns
                Dim vDataType As String = Col.DataType.ToString
                Select Case vDataType
                    Case "System.Int32"
                        DGV.Columns.Add(New DataGridTextColumn With {.Header = Col.ColumnName, .Binding = New Binding(String.Format("[{0}]", Col.ColumnName))})
                     Case "System.Windows.Controls.Image"

                        Dim ImageCol As New DataGridTemplateColumn
                        ImageCol.Header = Col.ColumnName
                        Dim vFactory As New FrameworkElementFactory(GetType(Image))

                        Dim vBinding As New Binding(String.Format("[{0}]", Col.ColumnName))
                        vBinding.Mode = BindingMode.OneWay
                        vFactory.SetValue(Image.SourceProperty, vBinding)

                        Dim vCellTemplate As New DataTemplate
                        vCellTemplate.VisualTree = vFactory
                        ImageCol.CellTemplate = vCellTemplate
                        DGV.Columns.Add(ImageCol)

                    Case Else

                        Dim DGTC As New DataGridTextColumn
                        With DGTC
                            .Header = Col.ColumnName
                            .Binding = New Binding(String.Format("[{0}]", Col.ColumnName))
                        End With
                        DGV.Columns.Add(DGTC)
                End Select

            Next 
```

数据

```
DS.Dispose()
            DGV.DataContext = vDT
            DGV.ItemsSource = vDT.DefaultView 
```

文本数据按应有的方式显示，但是，尽管该列在那里，但图像没有任何内容...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T17:58:31.403

原来答案只是将“图像”保留为 Byte()

它现在有效

```
Case "System.Byte[]"

                        Dim ImageTemp As New DataTemplate
                        Dim ImageCol As New DataGridTemplateColumn
                        Dim vFactory As New FrameworkElementFactory(GetType(Image))
                        Dim vBinding As New Binding(Col.ColumnName)
                        vFactory.SetBinding(Image.SourceProperty, vBinding)
                        ImageTemp.VisualTree = vFactory
                        ImageCol.CellTemplate = ImageTemp
                        DGV.Columns.Add(ImageCol) 
```

# ruby-on-rails - 使用 HAML 原生支持本地主题的 Rails CMS？

> ID：14204889
> 
> 赞同：0
> 
> 时间：2013-01-07T22:07:08.243
> 
> 标签：ruby-on-rails, content-management-system, haml, refinerycms, locomotivecms

我想知道是否有任何支持本地主题编辑的CMS？我的意思是，如果你想在本地编写代码，locomotiveCMS 是最好的 rails CMS 之一，需要一个名为 LocomotiveEditor 的额外付费工具，

我也尝试过 Refinery CMS，这也是一个不错的，但是编写 HAML 代码看起来很痛苦。

还是有另一种方法可以做到这一点？

我唯一讨厌的是在浏览器中编码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-01T22:01:08.890

Locomotive 已经取消了编辑器，并开始使用一个名为 Wagon 的工具，它几乎可以做同样的事情，但也是开源的。你可能想检查一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T23:19:58.003

[Radiant CMS](https://github.com/radiant/radiant)使用 HAML，我自己没有使用过，但可能值得一看。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-26T01:34:25.983

有点旧，但为了回答。RefineryCMS 允许您覆盖默认页面的视图，还可以创建自定义视图模板和自定义布局模板。

您可以通过以下方式参考： [http ://refinerycms.com/guides/using-custom-view-or-layout-templates](http://refinerycms.com/guides/using-custom-view-or-layout-templates)

# c - volatile 和 __volatile__ 之间的区别

> ID：14204893
> 
> 赞同：5
> 
> 时间：2013-01-07T22:07:26.090
> 
> 标签：c, gcc, volatile

用 gcc 编译的 C 代码`volatile`和in 有什么区别？`__volatile__`

我正在查看 Linux 源代码，我注意到有些地方使用`__asm__ __volatile__`其他地方`asm volatile`，而其他地方使用`__asm__ volatile`.

我没有见过`__volatile__`used without `__asm__`，而我见过`volatile`在其他各种地方使用过。

`__volatile__`做什么和做什么有区别`volatile`吗？如果是这样，那是什么？`__volatile__`或者，如果没有，有时是否有理由使用？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-07T22:10:33.143

这只是为了向后兼容遗留代码。在后来的生活中添加到 C 中的关键字，例如`inline`, `volatile`,`asm`等，具有下划线前缀/后缀版本（`__inline__`, `__asm__`,`__volatile__`等），以便您可以在已经使用朴素名称作为类型/函数/变量的遗留代码中使用它们/任何。有一个命令行开关可以控制这一点，`-ansi`- 当您`gcc -ansi ...`仅使用这些较新关键字的下划线版本进行编译时，会被识别。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-07T22:19:14.960

### 因为`-ansi`

尽管`-ansi`不会使用真正的程序，`asm(),`但即使程序本身是用`-ansi`. （使用`-ansi`，gcc 不包括与严格 ISO C 冲突的扩展，例如 new 关键字。）

需要一个适当命名空间的替代方案`__asm__`，`asm`但系统无法在`-ansi`模式下定义它。现在，这并不是严格必要的`volatile,`，长期以来一直是关键字，但也许由于惯性，有人也（并且不必要地）做了一个`__volatile__`（保留的系统名称格式）来使用`volatile`，即使该程序也是合法`-ansi`的方式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-07T22:20:33.310

除了 Paul R 的回应；

鉴于您尚未定义以下任何名称：

*   `asm`并且`volatile`是**语言**关键字。你怎么知道的？它们前后没有下划线，因此它们是**语言**中的关键字。

*   `_something_`（一个下划线）是保留的**编译器**关键字、类型、宏等。

*   `__asm__`,`__volatile__`和`__whatever_else__`（两个下划线）是**标准库**关键字、宏等。

了解这一点将帮助您了解未来事物的含义、谷歌搜索的内容以及在哪里可以找到对它们的引用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-08T07:56:15.807

`__asm__`是 asm 的替代品。他们的意思是一样的。我可以在 GCC 文档中找到相关信息。

对于 volatile 和 __volatile，[1](http://www.ibiblio.org/gferg/ldp/GCC-Inline-Assembly-HOWTO.html)和[2](http://www.delorie.com/djgpp/doc/brennan/brennan_att_inline_djgpp.html)表示“如果你的汇编语句必须在你放置的地方执行”。但是我浏览 GCC 文档[3](http://gcc.gnu.org/onlinedocs/gcc/Extended-Asm.html)并没有找到这样的解释。我也不知道哪个答案是正确的：[2](http://www.delorie.com/djgpp/doc/brennan/brennan_att_inline_djgpp.html)中给出的答案或 Paul R.

# amazon-web-services - 从亚马逊产品广告 API 获取所有优惠列表

> ID：14204896
> 
> 赞同：25
> 
> 时间：2013-01-07T22:07:37.090
> 
> 标签：amazon-web-services, amazon, amazon-product-api

我需要能够使用亚马逊 API 获取产品的所有报价列表。这是我发送的请求：

```
http://webservices.amazon.com/onca/xml?Service=AWSECommerceService&Operation=ItemLookup&SubscriptionId=&AssociateTag=&Version=2011-08-01&ItemId=B007IJQDQQ&IdType=ASIN&ResponseGroup=Offers&Condition=All&MerchantId=All 
```

这将返回以下优惠：

```
<Offers>
<TotalOffers>1</TotalOffers>
<TotalOfferPages>1</TotalOfferPages>
<MoreOffersUrl>
http://www.amazon.com/gp/offer-listing/B007IJQDQQ%3FSubscriptionId%3DAKIAJTZ6VROOTPJAPPWQ%26tag%3Damazoautom-20%26linkCode%3Dxm2%26camp%3D2025%26creative%3D386001%26creativeASIN%3DB007IJQDQQ
</MoreOffersUrl>
<Offer>
<OfferAttributes>
<Condition>New</Condition>
</OfferAttributes>
<OfferListing>
<OfferListingId>
TR5sygI0VR7cwy3Hg0DBHwgCWFnkqXLyCR70jjMhy1h8gWlEisKYt5cqDbS2Fu1SEqDtfBILdxYDziJdFzfsqMpPJkBqcYV3DFovHx1nXWRy9wHS6CFZXknBvsCo1bxYS%2BsxAeYrZHrS6g6aakEJQA%3D%3D
</OfferListingId>
<Price>
<Amount>375</Amount>
<CurrencyCode>USD</CurrencyCode>
<FormattedPrice>$3.75</FormattedPrice>
</Price>
<AmountSaved>
<PercentageSaved>56</PercentageSaved>
<Availability>Usually ships in 1-2 business days</Availability>
<AvailabilityAttributes>
<IsEligibleForSuperSaverShipping>0</IsEligibleForSuperSaverShipping>
</OfferListing>
</Offer>
</Offers> 
```

如您所见，即使它说有 3 个新报价，它也只返回 1 个报价。有谁知道获得所有报价而不仅仅是最低报价的方法？Merchant ID='ALL' 不会这样做，其他任何响应组（如 offerFull、offerSummary 或 offer）也不会这样做。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-16T15:48:02.357

在做了一些研究之后，这在 API 中是不可能的，但是您可以解析标准页面的 HTML 以获取详细信息：

1）使用[http://simplehtmldom.sourceforge.net/](http://simplehtmldom.sourceforge.net/)解析HTML（如果你不使用php，你需要找到类似的东西）

2) CURL (确保你设置了你的标题，否则亚马逊会出错) [http://www.amazon.com/gp/offer-listing/B007IJQDQQ/?condition=new](http://www.amazon.com/gp/offer-listing/B007IJQDQQ/?condition=new)和[http://www.amazon.com/gp /offer-listing/B007IJQDQQ/?condition=used](http://www.amazon.com/gp/offer-listing/B007IJQDQQ/?condition=used)

3）要处理页面计数总数量（找到#new span.numberreturned）并除以15以计算出页面数。

4）您需要解析每个页面，URL 如下所示：

例如第 2 页 [http://www.amazon.com/gp/offer-listing/B005IMB5SG/?condition=used&startIndex=15](http://www.amazon.com/gp/offer-listing/B005IMB5SG/?condition=used&startIndex=15)

例如第 3 页 [http://www.amazon.com/gp/offer-listing/B005IMB5SG/?condition=used&startIndex=30](http://www.amazon.com/gp/offer-listing/B005IMB5SG/?condition=used&startIndex=30)

希望这些信息足以让您入门，抱歉，我无法访问我不久前编写的工作脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-12T19:37:13.977

[Product API 便签](http://webservices.amazon.com/scratchpad/)本返回一个“All Offers”链接，您可以通过 HTTP 手动获取并解析该链接以提供包含所需信息的 DOM 节点列表。

[![在此处输入图像描述](../Images/2f8c33436fcea55c2073dbb44eac99e9.png)](https://i.stack.imgur.com/nOMtG.png)

这就像`http://www.amazon.com/gp/offer-listing/B007IJQDQQ/?condition=used`几年前提到的链接@dciso，但包含的 API 信息有助于更接近亚马逊规则。

```
<ItemLookupResponse>
    <Items>
        <Item>
        <ASIN>B00I8BICB2</ASIN>
        <ParentASIN>B077PSDB4X</ParentASIN>
        <DetailPageURL>https://www.amazon.com/Sony-Mirrorless-Digitial-3-0-Inch-16-50mm/dp/B00I8BICB2?psc=1&SubscriptionId_____tag=_____&linkCode=xm2&camp=2025&creative=165953&creativeASIN=B00I8BICB2</DetailPageURL>
        <ItemLinks>
            ...
            <ItemLink>
                <Description>All Offers</Description>
                <URL>https://www.amazon.com/gp/offer-listing/B00I8BICB2?SubscriptionId=______&tag=_____&linkCode=xm2&camp=2025&creative=386001&creativeASIN=B00I8BICB2</URL>
            </ItemLink>
        </ItemLinks> 
```

# c++ - 提升 asio 缓冲区延迟分配

> ID：14204901
> 
> 赞同：3
> 
> 时间：2013-01-07T22:07:54.313
> 
> 标签：c++, boost, boost-asio

异步操作。

现在我传递预分配的字节缓冲区，例如：

```
s.async_receive_from(
    boost::asio::buffer( preallocated_pointer, preallocated_size ),
    _remote_endpoint,
    boost::bind(...)
    ); 
```

是否可以为此调用和其他调用进行延迟分配？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-08T01:41:25.353

延迟分配，或[在需要资源时](https://stackoverflow.com/questions/712683)分配，可以使用[`boost::asio::null_buffers`](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/reference/null_buffers.html). `null_buffers`可用于在 Boost.Asio 中获取反应器式操作。这对于与第三方库集成、使用共享内存池等很有用。Boost.Asio[文档](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/overview/core/reactor.html)提供了一些信息和以下示例代码：

```
ip::tcp::socket socket(my_io_service);
...
socket.non_blocking(true);
...
socket.async_read_some(null_buffers(), read_handler);
...
void read_handler(boost::system::error_code ec)
{
  if (!ec)
  {
    std::vector<char> buf(socket.available());
    socket.read_some(buffer(buf));
  }
} 
```

# c# - 使用 Kinect 录制音频

> ID：14204902
> 
> 赞同：3
> 
> 时间：2013-01-07T22:08:00.457
> 
> 标签：c#, audio, kinect, wav, kinect-sdk

我试图调整这个 Wav 录音样本： [http ://channel9.msdn.com/Series/KinectQuickstart/Audio-Fundamentals](http://channel9.msdn.com/Series/KinectQuickstart/Audio-Fundamentals)

对于新的 SDK（1.6 版），出于某种原因 - 生成的 .wav 文件无效

在初始化中：

```
 this.audioStream = this.sensor.AudioSource.Start();

        // Use a separate thread for capturing audio because audio stream read operations
        // will block, and we don't want to block main UI thread.
        this.readingThread = new Thread(AudioReadingThread);
        this.readingThread.Start();
        fileStream = new FileStream(@"d:\temp\temp.wav", FileMode.Create);

        int rec_time = (int) 20 * 2 * 16000;//20 sec
        WriteWavHeader(fileStream, rec_time); 
```

线程：

```
 private void AudioReadingThread()
    {

        while (this.reading)
        {
                int readCount = audioStream.Read(audioBuffer, 0, audioBuffer.Length);

                fileStream.Write(audioBuffer, 0, readCount);
        }
    } 
```

波形标题：

```
 static void WriteWavHeader(Stream stream, int dataLength)
    {
        //We need to use a memory stream because the BinaryWriter will close the underlying stream when it is closed
        using (var memStream = new MemoryStream(64))
        {
            int cbFormat = 18; //sizeof(WAVEFORMATEX)
            WAVEFORMATEX format = new WAVEFORMATEX()
            {
                wFormatTag = 1,
                nChannels = 1,
                nSamplesPerSec = 16000,
                nAvgBytesPerSec = 32000,
                nBlockAlign = 2,
                wBitsPerSample = 16,
                cbSize = 0
            };

            using (var bw = new BinaryWriter(memStream))
            {
                bw.Write(dataLength + cbFormat + 4); //File size - 8
                bw.Write(cbFormat);

                //WAVEFORMATEX
                bw.Write(format.wFormatTag);
                bw.Write(format.nChannels);
                bw.Write(format.nSamplesPerSec);
                bw.Write(format.nAvgBytesPerSec);
                bw.Write(format.nBlockAlign);
                bw.Write(format.wBitsPerSample);
                bw.Write(format.cbSize);

                //data header
                bw.Write(dataLength);
                memStream.WriteTo(stream);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T03:08:32.003

您忘记添加代码以将“RIFF Header”添加到文件中。代码很简单：

```
//RIFF header
WriteString(memStream, "RIFF");
bw.Write(dataLength + cbFormat + 4); //File size - 8
WriteString(memStream, "WAVE");
WriteString(memStream, "fmt ");
bw.Write(cbFormat); 
```

您还忘记`memStream`在“数据标题”处进行修改，您需要以下行：

```
WriteString(memStream, "data"); 
```

# filepicker.io - 使用 filepicker.io 上传视频

> ID：14204904
> 
> 赞同：1
> 
> 时间：2013-01-07T22:08:09.947
> 
> 标签：filepicker.io

我想允许从用户的计算机或所有可用的网络站点上传视频。我目前正在使用试用版。是否可以使用文件选择器进行视频上传？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T22:09:41.833

是的，您应该将 mimetype 指定为“video/*”

# java - 如何从双精度数中删除尾随零

> ID：14204905
> 
> 赞同：62
> 
> 时间：2013-01-07T22:08:11.620
> 
> 标签：java, double, zero, trailing

例如，我需要`5.0`成为`5`，或`4.3000`成为`4.3`。

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2013-01-07T22:16:34.423

你应该使用`DecimalFormat("0.#")`

* * *

为了`4.3000`

```
Double price = 4.3000;
DecimalFormat format = new DecimalFormat("0.#");
System.out.println(format.format(price)); 
```

输出是：

```
4.3 
```

* * *

如果是 5.000，我们有

```
Double price = 5.000;
DecimalFormat format = new DecimalFormat("0.#");
System.out.println(format.format(price)); 
```

输出是：

```
5 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-07T22:11:37.647

使用[十进制格式](http://docs.oracle.com/javase/7/docs/api/java/text/DecimalFormat.html)

```
 double answer = 5.0;
   DecimalFormat df = new DecimalFormat("###.#");
  System.out.println(df.format(answer)); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-07T22:09:37.887

使用格式字符串为“0.#”的 DecimalFormat 对象。

# java - 除了处理之外，Short 和 Character 有什么区别？

> ID：14204907
> 
> 赞同：7
> 
> 时间：2013-01-07T22:08:18.230
> 
> 标签：java

据我所知：

*   “按字节”，看起来它们是相同的（它们都是 2 个字节长）；
*   `Character`，但是，对它有更多的处理（静态`.isLetter()`方法和其他方法等）。

虽然我的问题可能听起来很愚蠢，但它们是：

*   除非我的第一个假设是错误的，否则为什么会有原始类型`char`并且`short`因为它们具有相同的“内部长度”，而且无论如何，Java 中没有无符号原始类型？
*   `Short`是`final`，如果不是，可以`Character`延长`Short`吗？

**编辑**：给出的答案，我错了：Java中有*一种*无符号的原始类型，那就是`char`......

**编辑 2**：@PatriciaShanahan 还提到在*算术*运算中， a 的`char`行为类似于无符号 16 位整数，就像 a 一样`short`。这包括左移，即带符号位*，*就像 for 一样`short`。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-07T22:10:33.983

本质区别是`short`有符号的，`char`是无符号的。

```
public class CharVsShort {
  public static void main(String[] args) throws Exception {
    short ffShort = (short)0xFFFF;
    char ffChar = (char)0xFFFF;

    System.out.println("all-1s-short = " + (int)ffShort);
    System.out.println("all-1s-char  = " + (int)ffChar);
  }
} 
```

印刷

```
all-1s-short = -1
all-1s-char  = 65535 
```

[Java 语言规范第 4.2](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.2)节指出

> 整数类型分别为`byte`、`short`、`int`和`long`，其值分别为 8 位、16 位、32 位和 64 位有**符号**二进制补码整数，以及，其值为代表 UTF-16 代码的`char`16 位**无符号**整数单位

（我的大胆）。它还明确给出类型的范围为

*   `byte`，从 -128 到 127，包括
*   `short`，从 -32768 到 32767，包括
*   `int`，从 -2147483648 到 2147483647，包括
*   `long`, 从 -9223372036854775808 到 9223372036854775807, 包括
*   `char`, 从 '\u0000' 到 '\uffff' 包括在内，即从 0 到 65535

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T22:10:04.160

它们目前不兼容，而且永远无法改变。但是要猜测它们*最初*为何不同 - 为数字数据和字母设置不同类型可能是一个*非常好的主意*，即使它们的内容以完全相同的方式工作，只是为了避免将它们混淆。那会很*糟糕。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-30T08:51:13.413

关于 short 和 char 要知道的事实：

1.  如果没有显式强制转换，永远不能将 char 原始变量分配给 short。

2.  如果没有显式转换，永远不能将短原始变量分配给 char。

    ```
    char c = 'c';
    short s = c; // will cause a compiler error

    short sh = 10;
    char ch = sh; // will also cause a compiler error 
    ```

3.  只有当值适合 char (0 - 65535) 时，才能将使用关键字 final 定义的短常量分配给 char，反之亦然。对于 item1 和 item2 中的示例。下面修复错误。

    ```
     final char c = 'c';
     short s = c; // compiles without any issues.

     final short sh = 10;
     char ch = sh; // compiles without any issues. 
    ```

但是，下面失败了，因为 char 是无符号的，即只能处理正文字。

```
 final short sh = -1;
     char ch = sh; // compiler error is thrown 
```

要修复错误，需要一个明确的案例。

```
 final short sh = -1;
     char ch = (char)sh; // compiler error is thrown 
```

# javascript - 通过javascript添加href - MSIE错误？

> ID：14204908
> 
> 赞同：0
> 
> 时间：2013-01-07T22:08:20.757
> 
> 标签：javascript, html

像下面这样通过javascript添加href是一种不好的做法吗？在 IE8 中，即使页面已更新，我也看到状态栏不断加载，我怀疑下面的代码会导致这种情况发生。

```
document.getElementById('sucessMsgId').innerHTML = 'Your profile has been updated. <a href='+xProfileUri+'>View Profile</a>'; 
```

正确的方法是什么？使用jQuery修复上述代码是否可以解决IE状态栏加载问题？

更新：发现IE浏览器状态加载不断，因为它进入这部分jQUery代码并没有完成执行。当我将加载事件附加到 iframe 并且仅在 IE8 中时，会发生这种情况。

```
for ( i = 0; i < handlerQueue.length && !event.isPropagationStopped(); i++ ) {
            matched = handlerQueue[ i ];
            event.currentTarget = matched.elem;

            for ( j = 0; j < matched.matches.length && !event.isImmediatePropagationStopped(); j++ ) {
                handleObj = matched.matches[ j ];

                // Triggered event must either 1) be non-exclusive and have no namespace, or
                // 2) have namespace(s) a subset or equal to those in the bound event (both can have no namespace).
                if ( run_all || (!event.namespace && !handleObj.namespace) || event.namespace_re && event.namespace_re.test( handleObj.namespace ) ) {

                    event.data = handleObj.data;
                    event.handleObj = handleObj;

                    ret = ( (jQuery.event.special[ handleObj.origType ] || {}).handle || handleObj.handler )
                            .apply( matched.elem, args );

                    if ( ret !== undefined ) {
                        event.result = ret;
                        if ( ret === false ) {
                            event.preventDefault();
                            event.stopPropagation();
                        }
                    }
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T21:08:27.780

这是由于同时发生了多个事件，并且 UI 同时使用成功消息进行更新。通过向更新 UI 的函数调用添加 setTimeout 来延迟 UI 的更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T22:30:25.330

这取决于`xProfileUri`包含什么。如果它包含引号中的 URL，那么应该没问题。确保不要忘记 URI 字符串前后的双引号。这可以在您的 innerHTML 分配字符串中完成，也可以在您将 URI 值分配给`xProfileUri`.

**编辑：**假设你有以下

```
var xProfileUri = 'http://google.com';
document.getElementById('successMsgId').innerHTML = 'Your profile has been updated. <a href='+xProfileUri+'>View Profile</a>'; 
```

这将输出以下 HTML：

```
Your profile has been updated <a href=http://google.com>View Profile</a> 
```

但是该`href`属性的格式不正确，因为它周围没有双引号。相反，请确保您具备以下条件之一：

```
var xProfileUri = '"http://google.com"';
//note the double quotes within the single quotes 
```

或者

```
document.getElementById('successMsgId').innerHTML =
    'Your profile has been updated. <a href="'+xProfileUri+'">View Profile</a>';
//note the double quotes after the = sign and before the greater-than sign 
```

# python - 从以前的 raw_input 调用密钥

> ID：14204912
> 
> 赞同：0
> 
> 时间：2013-01-07T22:08:38.277
> 
> 标签：python, dictionary, python-2.7

我正在用 Python 创建一个程序，以更好地学习该语言。

截至目前，我有两个空字典，一个名为`bankAccount`和`pinCode`。 `bankAccount`从 raw_input 和 input 中获取它的键和值，但是对于`pinCode`，我想从`bankAccount`字典中获取 raw_input 并将其用作`pinCode`字典中 PIN 的键。我怎样才能做到这一点？

我希望代码是通用的，所以如果另一个人输入信息，他们也会发生同样的事情，所以我不能使用`d[dictkey]`.

```
bankAccount = {} 
pinCode = {} 
bankAccount[raw_input("And what is your name?")] = input("Hello and welcome to MyBank, can I take your bank account number, please?") 
pinCode[] = input("Can we have your PIN code, please?") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T22:20:28.643

如果您从用户那里获得需要多次使用的输入（作为两个字典的键），则需要将值保存在变量中。对其他输入值也这样做可能不是一个坏主意，但这并不是严格要求的。像这样的东西会起作用：

```
name = raw_input("What is your name?")
acct = input("What is your account number?")
pin = input("What is your PIN?")

bankAccount[name] = acct
pinCode[name] = pin 
```

我不确定你最后一段关于代码是通用的是什么意思。如果您仍然需要帮助，则需要澄清该部分。

# intellij-idea - 我无法将代码直接从 IntelliJ Idea 复制到 StackOverflow

> ID：14204917
> 
> 赞同：0
> 
> 时间：2013-01-07T22:08:53.893
> 
> 标签：intellij-idea, copy, copy-paste, paste

我不能直接从 IntelliJ Idea 复制到 Stack Overflow。从 Intellij 粘贴`.txt`到 Stack 真的很烦人。

怎样才能文明粘贴？

编辑：我的软版本：

*   Intellij Idea 12 终极版
*   Linux Ubuntu 10

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-09T13:17:30.033

问题是我使用的是 openJDK，切换到 OracleJDK 解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T08:15:43.073

为什么不？因为它前面没有4个空格？我所做的是将代码粘贴到此文本区域，突出显示它，然后按 {} 按钮为我缩进它。

所以这

变成

```
So this 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-30T04:39:41.930

当我没有安装 svn 命令行客户端时，我遇到了同样的问题。它总是弹出一个对话框告诉我修复 svn 命令行客户端。

安装好svn命令行客户端后，就可以正常复制粘贴代码了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-12T16:55:21.420

我尝试了很多选项，但从 JDK 6 切换到 JDK 7 对我有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-26T14:21:29.673

就我而言，使用 IntelliJ 16.2 .. 17.2：

*   在 IntelliJ 中复制
*   粘贴到别处
*   失败

然而：

*   在 IntelliJ 中复制
*   **粘贴到 IntelliJ**
*   粘贴到别处
*   赢！

# wordpress - 我无权访问 wordpress 插件

> ID：14204919
> 
> 赞同：-1
> 
> 时间：2013-01-07T22:08:57.353
> 
> 标签：wordpress, plugins

我需要访问 wordpress 插件，但插件选项不在菜单中，我还在 wordpress.ORG 上创建了一个帐户，但仍然没有结果，我的用户角色是管理员。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T22:27:01.963

如果您没有看到插件选项，则可能是您的网站托管在 wordpress 上。**com**。*只有在您自己单独托管*的Web 服务器（例如，bluehost、godaddy 等）上安装了 Wordpress 时，您才有可用的插件。来源：[http ://en.support.wordpress.com/com-vs-org/](http://en.support.wordpress.com/com-vs-org/)

# android - Android 从源代码编译 webkit 并在应用程序中使用它

> ID：14204921
> 
> 赞同：2
> 
> 时间：2013-01-07T22:08:58.060
> 
> 标签：android

我构建自己的 Android webkit 的主要动机是尽量减少不同版本的 android 上不同视觉 webkit 的渲染不一致。

到目前为止，我已经尝试过：

*   下载android 2.2的源代码并使用（make framework）制作framework.jar并用它来替换eclipse项目中android SDK中的android.jar
*   将在（external/webkit/WebKit/android/jni）中注册的所有本机方法的包名从android.webkit更改为我的eclipse项目的包名（com/mycustomwebkit），然后使用（make libwebcore）创建库libwebcore 。所以
*   将整个 webkit java 类从 android 源（在 external/webkit/WebKit/android 中）复制到我的 eclipse 项目中，并使用它来创建我自己的 webview。
*   在 Eclipse 的 lib/armeabi 中包含 libwebcore.so
*   编译并创建apk文件

但应用程序在设备上启动时崩溃并出现以下错误：

```
04-18 10:39:23.561: W/dalvikvm(8214): No implementation found for native Lcom/tester/webkit/JWebCoreJavaBridge;.nativeConstructor 

()V
04-18 10:39:23.561: W/dalvikvm(8214): threadid=14: thread exiting with uncaught exception (group=0x2b4d61f8)
04-18 10:39:23.561: E/AndroidRuntime(8214): FATAL EXCEPTION: WebViewCoreThread
04-18 10:39:23.561: E/AndroidRuntime(8214): java.lang.UnsatisfiedLinkError: nativeConstructor
04-18 10:39:23.561: E/AndroidRuntime(8214):     at com.tester.webkit.JWebCoreJavaBridge.nativeConstructor(Native Method)
04-18 10:39:23.561: E/AndroidRuntime(8214):     at com.tester.webkit.JWebCoreJavaBridge.<init>(JWebCoreJavaBridge.java:66)
04-18 10:39:23.561: E/AndroidRuntime(8214):     at com.tester.webkit.BrowserFrame.<init>(BrowserFrame.java:237)
04-18 10:39:23.561: E/AndroidRuntime(8214):     at com.tester.webkit.WebViewCore.initialize(WebViewCore.java:236)
04-18 10:39:23.561: E/AndroidRuntime(8214):     at com.tester.webkit.WebViewCore.access$1(WebViewCore.java:230)
04-18 10:39:23.561: E/AndroidRuntime(8214):     at com.tester.webkit.WebViewCore$WebCoreThread$1.handleMessage

(WebViewCore.java:705)
04-18 10:39:23.561: E/AndroidRuntime(8214):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-18 10:39:23.561: E/AndroidRuntime(8214):     at android.os.Looper.loop(Looper.java:137)
04-18 10:39:23.561: E/AndroidRuntime(8214):     at com.tester.webkit.WebViewCore$WebCoreThread.run(WebViewCore.java:748)
04-18 10:39:23.561: E/AndroidRuntime(8214):     at java.lang.Thread.run(Thread.java:856) 
```

我完全走错了方向吗？有没有更好的方法来最小化不同版本的 android 上不同视觉 webkit 的渲染不一致？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T22:13:53.333

> 到目前为止我已经尝试过：下载android 2.2的源代码并使用（make framework）制作framework.jar并用它来替换eclipse项目中android SDK中的android.jar

那是行不通的。首先，设备上存在的类将取代您应用程序中的相同类。其次，WebKit 不是用 Java 实现的。

> 我完全走错了方向吗？

是的。

> 有没有更好的方法来最小化不同版本的 android 上不同视觉 webkit 的渲染不一致？

不要使用那些给你“在不同版本的 android 上呈现 webkit 的不同视觉不一致”的东西。

或者，使用具有兼容性层的框架来处理您正在尝试做的任何事情，在那里他们完成了解决“在不同版本的 android 上呈现不同版本的 webkit 的不一致性”的工作。

# android - 如何将片段作为视图添加到 ViewPager？

> ID：14204923
> 
> 赞同：0
> 
> 时间：2013-01-07T22:09:05.797
> 
> 标签：android, fragment, viewpagerindicator, fragmentpageradapter

我正在使用 viewPager 并想向其中添加片段：

```
public class MyFragment extends Fragment {
       public View onCreateView(LayoutInflater inflater, ViewGroup contner,
       Bundle savedInstanceState) {
       View view = inflater.inflate(R.layout.tab_frag2_layout, container, false);

        return view;
    }
    public static Fragment newInstance() {
        // TODO Auto-generated method stub
        MyFragment mfg = new MyFragment();
        return mfg;
    }

} 
```

我的寻呼机适配器：

```
public class ViewPagerAdapter extends PagerAdapter 
{

    private static String[] titles = new String[]
    {
        "Page 1",
        "Page 2",
        "Page 3",
        "Page 4"
    };
    private final Context context;

    public ViewPagerAdapter( Context context )
    {
        this.context = context;
    }

    @Override
    public String getPageTitle( int position )
    {
        return titles[ position ];
    }

    @Override
    public int getCount()
    {
        return titles.length;
    }

    @Override
    public Object instantiateItem( View pager, int position )
    {
        TextView v = new TextView( context );
        v.setText( titles[ position ] );
        ((ViewPager)pager).addView( v, 0 );

        //This gives me nullPointerException///////////////////////////////////

        MyFragment mfg = new MyFragment();
        ((ViewPager)pager).addView(mfg.newInstance().getView());

        return v;
    }

    @Override
    public void destroyItem( View pager, int position, Object view )
    {
        ((ViewPager)pager).removeView( (TextView)view );
    }

    @Override
    public boolean isViewFromObject( View view, Object object )
    {
        return view.equals( object );
    }

    @Override
    public void finishUpdate( View view ) {}

    @Override
    public void restoreState( Parcelable p, ClassLoader c ) {}

    @Override
    public Parcelable saveState() {
        return null;
    }

    @Override
    public void startUpdate( View view ) {}
} 
```

将 MyFragment 添加到 ViewPager 的正确方法是什么？我必须将它添加为视图，所以我使用 newInstance() 方法，但给了我一个 nullPointerException。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T22:19:38.107

使用 FragmentPagerAdapter（不是 ViewPagerAdapter）并实现其

```
Fragment getItem(int position){} 
```

与你的片段

```
return getNewInstance(); 
```

并且不要忘记从 FragmentActivity 类派生您的活动

# backbone.js - 主干表单 - 填充复选框

> ID：14204928
> 
> 赞同：1
> 
> 时间：2013-01-07T22:09:24.940
> 
> 标签：backbone.js, backbone-forms

我为具有以下架构的模型创建了一个主干表单（独立复选框）

```
schema: ->
  departments:
      type: "Checkboxes"
      title: "Department(s)*"
      options: (new CPP.Collections.Departments) # Return ALL departments 
```

模型的“部门”字段填充了包含这些部门子集的相同类型的集合。

例如，如果架构选项是一个包含部门的集合`[d1, d2, d3, d4]`，则 @model.get('departments') 可以返回一个包含`[d1, d3]`

但是在我的主干表单中，所有的复选框都是空白的，不应该检查那些涉及属于模型的部门的复选框吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T23:24:57.407

Checkboxes 表单元素根据模型 ID 而不是模型填充值。也就是说`@model.get('departments')`有望回归`[1, 3]`。

编辑：这是一个显示工作和非工作版本[的 JSFiddle 。](http://jsfiddle.net/ccwve/)

# opengl - 替换已弃用的 OpenGL：glEnum GL_LIGHTING

> ID：14204930
> 
> 赞同：0
> 
> 时间：2013-01-07T22:09:38.840
> 
> 标签：opengl, graphics, lighting

我浏览过的书籍和网站都告诉我使用 glEnable(GL_LIGHTING) 来启用照明。我已经看到这个枚举现在已被弃用。是什么取代了它，我应该在照明中注意哪些其他已弃用的项目？即使是新的 SO 问题仍然提到 GL_LIGHTING，所以我没有太多运气找到如何改变它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T22:11:56.817

它被自定义着色器取代。您应该创建您需要的任何基于光照的变量，并像对待着色器中的任何其他制服一样对待它们。

固定管道照明没有“内置”替代品，您需要自己实施。

# javascript - 检查 IF/OR 中的多个条件并且是 EMPTY Javascript

> ID：14204933
> 
> 赞同：0
> 
> 时间：2013-01-07T22:09:44.723
> 
> 标签：javascript

我有一个 if 语句，我想检查它是否是这些字符串之一以及它是否为空，但我不知道如何正确表达它。这是基本的，但我不知道如何在谷歌上说这个。非常感谢！

```
if(condition1 == "string" || condition2 == "string" && is empty){
    do this
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T22:32:54.837

编辑：更新参考您的 jsFiddle

```
//object drill down
var colField = evt.cell.field; //this gives me the column names of the grid in dojo
var mystring = item[colField] || ""; // gets item based on colField property
var fields = ["Owner", "Home", "Realtor", "Broker"]; // fields to check colField against

//here is the conditional statement. if column Owner, Home, Realtor or Broker property is empty in that object do the following
if(fields.indexOf(colField) !== -1 && mystring === "") {

} 
```

更新了 jsFiddle：http: [//jsfiddle.net/3AXN7/4/](http://jsfiddle.net/3AXN7/4/)

由于您要检查的列超过两列，因此将所有列名放在一个数组中，然后检查 colField 是否在数组中，而不是将所有这些条件放在 if 语句中，这样会更加清晰和可维护.

唯一的问题是 IE6-8 不支持 indexOf。如果要确保这适用于所有浏览器，则需要提供 indexOf 的默认实现。您可以使用以下代码执行此操作：

```
if (!Array.prototype.indexOf) {
  Array.prototype.indexOf = function (searchElement /*, fromIndex */) {
    "use strict";

    if (this === void 0 || this === null)
      throw new TypeError();

    var t = Object(this);
    var len = t.length >>> 0;
    if (len === 0)
      return -1;

    var n = 0;
    if (arguments.length > 0) {
      n = Number(arguments[1]);
      if (n !== n)
        n = 0;
      else if (n !== 0 && n !== (1 / 0) && n !== -(1 / 0))
        n = (n > 0 || -1) * Math.floor(Math.abs(n));
    }

    if (n >= len)
      return -1;

    var k = n >= 0
          ? n
          : Math.max(len - Math.abs(n), 0);

    for (; k < len; k++) {
      if (k in t && t[k] === searchElement)
        return k;
    }

    return -1;
  };
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T22:11:20.583

```
if((typeof condition1 == 'string' && condition1.length == 0) || (typeof condition2 == 'string' && condition2.length == 0)) 
```

将其分解，`(typeof condition1 == 'string' && condition1.length == 0)`只需检查变量是否为字符串且长度为 0。如果计算结果为 false，它将检查 condition2 是否为字符串且长度为 0。如果任一语句为 true，则 if 语句将返回真。

# c# - 使用 jQuery 过滤掉生成表的行的问题

> ID：14204936
> 
> 赞同：0
> 
> 时间：2013-01-07T22:09:51.083
> 
> 标签：c#, jquery, asp.net-mvc, razor

我正在尝试根据下拉菜单中的用户输入过滤掉 HTML 表的行。我的想法是如果第一行的第一列不等于下拉菜单的值，则删除行。然而，我唯一能够做到的就是删除第一列，删除所有内容，或者除第一列之外的所有内容，这取决于我如何弄乱 jquery 函数。我确定这很简单，但我无法弄清楚。我正在使用的代码如下： Jquert 函数：

```
<script type="text/javascript">
    $(document).ready(function () {
        $('tr').show();
        $('#searchBtn').click(function () {
            var weaverSet = $("#weaverSet").val();
            $('tr').each(function () {
                var weaveName = $('td.headerName').text();
                if ($.trim(weaveName) != $.trim(weaverSet)) {
                    $(this).hide();
                }
            });
        });
    }); 
```

桌子：

```
<table class="dataTable">
<tr>
    <th>
        WS Name &nbsp;
    </th>
    <th>
        M Number
        <br/>
        Bar Code
    </th>
    <th>
        Start Date
        <br/>
        Start Time
    </th>
    <th>
        Length
        <br/>
        Doff Length
    </th>
    <th>
        Name
        <br/>
        End Time
    </th>
    <th>
        B Number
    </th>
    <th>
        Dynamic Value
    </th>  
</tr>

          <tbody>
    @foreach (var item in MVCMasterDetail.DataAccess.ManTracDataProvider.GetTopData())
    { 

        <tr>
            <td class ="headerName">
                @item.WSName
            </td>
            <td>
                @item.MNumber
            </td>
            <td>
                @item.StartDate
            </td>
            <td>
                @item.Length
            </td>
            <td>
                @item.Name
            </td>
            <td>
                @item.bnumber
            </td>
            <td>
                @item.DynamicValue
            </td>
        </tr>
        <tr>
            <td>
            </td>
            <td colspan="99"> //This calls the partial view that renders the detail table inside of it
                @Html.Action("MasterDetailDetailPartial", new { id = item.WorkOrderActualId, LNumber = item.MNumber })

            </td>
        </tr>

    }
             </tbody> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T22:20:57.213

为什么不迭代 tds？

```
$('td.headerName').each(function () {
   var weaveName = $(this).text();
   if ($.trim(weaveName) != $.trim(weaverSet)) {
       $(this).parent().next().hide();
       $(this).parent().hide();
   }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T22:17:36.550

主要问题是这一行：

```
var weaveName = $('td.headerName').text(); 
```

选择器将返回页面中具有该类的每个 TD。当您尝试从元素集合中获取值（*如 text()*）时，只会返回集合中第一个元素的值。

在您只想`td.headerName`在该行中查找的所有 TR 循环中。可以`find()`用来做。

```
$('tr').each(function () {
     /* look for text in this row*/
     var weaveName = $(this).find('td.headerName').text();
     /* no need to trim "weaverset" each time, do it when variable created, saves many function calls*/
     if ($.trim(weaveName) != $.trim(weaverSet)) {
           $(this).hide();
      }
}); 
```

# enums - 实体框架 5 - 映射枚举 - “/”应用程序中的服务器错误。LINQ to Entities 不支持指定的类型成员“xxx”

> ID：14204939
> 
> 赞同：1
> 
> 时间：2013-01-07T22:09:55.543
> 
> 标签：enums, entity-framework-5, entity-framework-migrations

我一直遇到枚举不映射在实体框架 5（它支持枚举）中的问题。

当我调用`results.Where(r => r.Category = LogEntry.LogCategory.ERROR)`where results is an IQueryable 时，我得到指定类型成员 LogCategory 在 LINQ to Entities 中不受支持。

当我运行迁移时，Up() 方法不会映射表。

我的模型看起来像这样

```
public partial class LogEntry
{
public enum HttpMethod
{
    GET,
    POST,
    PUT,
    DELETE
};

public enum LogCategory
{
    PAGE_VISIT,
    TRANSACTION,
    AUTHENTICATION,
    FAILED_AUTHENTICATION,
    EXCEPTION,
    INPUT_VALIDATION_ERROR,
    SPECIFICATION_FAILURE,
    SYSTEM,
    PAGE_NOT_FOUND,
    UNAUTHORIZED_ACCESS

};

    public int LogId { get; set; }

    //public int? UserId { get; set; }
    //public virtual User user { get; set; }

    //public int? ForumId { get; set; }
    //public virtual Forum forum { get; set; }

    public DateTime DateTime { get; set; }
    public string IPAddress { get; set; }
    public string ActiveRole { get; set; }
    public string Title { get; set; }
    public string Details { get; set; }
    public LogCategory Category { get; set; }

    public String Url { get; set; }
    public HttpMethod Method { get; set; }
    public Boolean IsAjaxRequest { get; set; }
    public String UserAgent { get; set; }
} 
```

任何人有任何想法是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T22:09:55.543

所以事实证明，这个问题很简单。EF 不喜欢枚举成为 LogEntry 类的一部分。我把它移到了课外，突然一切正常了。

以为我会发布这个以防其他人遇到同样的问题，因为在 SO 上没有任何东西可以指出我正确的方向！

# process - 哪个需要更长的时间？在用户和内核模式之间切换或在两个进程之间切换？

> ID：14204944
> 
> 赞同：4
> 
> 时间：2013-01-07T22:10:20.863
> 
> 标签：process, kernel

**哪个需要更长的时间？**

在用户和内核模式之间切换（或）在两个进程之间切换？

也请说明原因。

**编辑：**我知道每当有上下文切换时，调度程序需要一些时间来保存其 PCB 中前一个进程的状态，然后从其相应的 PCB 重新加载下一个进程。对于用户模式和内核模式之间的切换，我知道必须更改模式位。这不是全部，还是还有更多？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-07T22:38:17.407

按 oh-my-god 的顺序在进程之间切换（假设您实际切换，而不是并行运行它们）。

从用户空间到内核空间的捕获过去常常通过处理器中断来完成。大约在 2005 年（不记得内核版本），在邮件列表上进行讨论后，有人发现高端至强处理器上的捕获速度比早期的 Pentium II 或 III 上的捕获**速度更慢**（绝对衡量！）（再次，我的记忆），他们用一个新的 cpu 指令实现了它`sysenter`（我认为它实际上是从 Pentium Pro 开始存在的）。这是在每个进程的虚拟动态共享对象 (vdso) 页面中完成的（通过 cat /proc/pid/maps 找到它）IIRC。

因此，如今，内核陷阱基本上只是几个 cpu 指令，因此与使用中断时的几十万或几十万相比（这在现代 CPU 上真的很慢），周期相当少。

进程之间的上下文切换很繁重。这意味着将所有处理器状态（寄存器等）存储到 RAM 中（实际上是在用户进程空间中的一个神奇内存位置，猜猜在哪里！），实际上会弄脏 cpu 中的所有缓存内存，并读回新的进程状态过程。与上次运行时相比，它（很可能）在 cpu 缓存中仍然没有任何内容，因此每次内存读取都将是缓存未命中，需要从 RAM 中读取。这个比较慢。当我在大学的时候，我“发明”了（好吧，我确实想出了这个主意，因为我知道 CPU 中有很多染料，但如果它不断供电就不够酷）一个无限大小的缓存，尽管没有供电在 CPU 中未使用（仅用于上下文切换，即）时，并在 Simics 中实现。实现了对我在 Linux 中称为 CARD（上下文切换活动，运行时昏昏欲睡）的魔法缓存的支持，并进行了相当多的基准测试。我发现它可以加速一台有许多繁重进程的 Linux 机器，它们共享同一个内核，大约 5%。不过，这是在相对较短（低延迟）的处理时间片上。

反正。上下文切换仍然很繁重，而内核陷阱基本上是免费的。

对于每个进程，回答用户空间中的哪个内存位置：

> 在地址零。是的，空指针！无论如何，您都无法从用户空间读取整个页面 :) 这可以追溯到 2005 年，但现在可能是一样的，除非 CPU 状态信息已经增长到大于页面大小，在这种情况下，他们可能已经更改了实现.

# bash - 使用bash从文件中提取文本

> ID：14204946
> 
> 赞同：3
> 
> 时间：2013-01-07T22:10:27.760
> 
> 标签：bash, sed, awk

我是 Linux 新手，有一个非常大的文本日志文件可以从中提取。我想使用bash？

例如，该文件包含：

```
Node:xyz
Time:01/07/13 14:26:17
INFO: Trusted certif ok

Node:abc
Time:01/07/13 14:26:18
INFO: Trusted certif ok

Node:def
Time:01/07/13 14:26:18
INFO: Trusted certif not ok 
```

我需要在 Node: 之后提取文本并将其添加到 Info: 之后的文本中以显示在一行上，输出重定向到一个新文件。我正在尝试 awk 和 sed，但还没有弄清楚。非常感谢帮助。

示例输出如下所示：

```
xyz Trusted certif ok
abc Trusted certif ok
dbf Trusted certif not ok 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-07T22:14:10.413

尝试这样做：

在[awk](/questions/tagged/awk "显示标记为“awk”的问题")

```
awk -F: '/^Node/{v=$2}/^INFO/{print v $2}' file.txt 
```

在[bash](/questions/tagged/bash "显示标记为“bash”的问题")中：

```
while IFS=: read -r c1 c2; do
    [[ $c1 == Node ]] && var=$c1
    [[ $c1 == INFO ]] && echo "$var$c2"
done < file.txt 
```

在[perl](/questions/tagged/perl "显示标记为“perl”的问题")中：

```
perl -F: -lane '
    $v = $F[1] if $F[0] eq "Node";
    print $v, $F[1] if $F[0] eq "INFO"
' file.txt 
```

在[python](/questions/tagged/python "显示标记为“python”的问题")中（在文件中，用法 : `./script.py file.txt`）：

```
import sys
file = open(sys.argv[1])
while 1:
    line = file.readline()
    tpl = line.split(":")
    if tpl[0] == "Node":
        var = tpl[0]
    if tpl[0] == "INFO":
        print var, tpl[1]
    if not line:
        break 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T22:17:35.810

使用 sed：

```
sed -n '/^Node/N;/Time/N;s/^Node:\([^\n]*\)\n[^\n]*\n[^ ]* /\1 /p' input 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-28T08:46:43.753

```
sed -n 'N;N;s/\n.*\n/ /;s/\S*://g;p;n' file 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T11:06:22.993

```
perl -F: -lane '$x=$F[1] if(/^Node:/);if(/^INFO:/){print "$x".$F[1];}' your_file 
```

测试如下：

```
> cat temp
Node:xyz
Time:01/07/13 14:26:17
INFO: Trusted certif ok

Node:abc
Time:01/07/13 14:26:18
INFO: Trusted certif ok

Node:def
Time:01/07/13 14:26:18
INFO: Trusted certif not ok

> perl -F: -lane '$x=$F[1] if(/^Node:/);if(/^INFO:/){print "$x".$F[1];}' temp
xyz  Trusted certif ok
abc  Trusted certif ok
def  Trusted certif not ok 
```

# jquery - Jquery mobile无法在手机中加载

> ID：14204950
> 
> 赞同：0
> 
> 时间：2013-01-07T22:10:51.680
> 
> 标签：jquery, jquery-mobile

我有一个奇怪的问题，如果我在任何浏览器中加载此页面，页面显示正常，但是当浏览器 jquery mobile 未加载时，页面如下：

[http://www.cuponeraclub.com/landing.html](http://www.cuponeraclub.com/landing.html)

在浏览器中打开它加载 jquery 好的，在移动 jquery 移动中不加载。

```
 <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <link ref="https://www.cuponeraclub.com/themes/livingsocial_v3.1/css/jquery.mobile-1.2.0.min.css" rel="stylesheet" type="text/css"/>
    <script src="https://www.cuponeraclub.com/themes/livingsocial_v3.1/scripts/jquery-1.8.3.js" type="text/javascript"></script>
    <script src="https://www.cuponeraclub.com/themes/livingsocial_v3.1/scripts/jquery.mobile-1.2.0.min.js" type="text/javascript"></script>

<div data-role="page">
    <div data-role="content">   
            <div class="ui-grid-solo">
                <div class="ui-block-a"><input type="text" id="email" placeholder="Email"></div>
            </div>
            <div class="ui-grid-solo">
                <div class="ui-block-a">
                    <select id="city">
                                                    <option value="22" >Ambato</option>
                                                    <option value="12" >Cuenca</option>
                                                    <option value="25" >Esmeraldas</option>
                                                    <option value="11" selected>Guayaquil</option>
                                                    <option value="26" >Ibarra</option>
                                                    <option value="27" >Loja</option>
                                                    <option value="24" >Machala</option>
                                                    <option value="28" >Manta</option>
                                                    <option value="29" >Portoviejo</option>
                                                    <option value="10" >Quito</option>
                                                    <option value="23" >Riobamba</option>
                                                    <option value="30" >Santo Domingo</option>
                                            </select></div>
            </div>
            <div class="ui-grid-solo">
                    <div class="ui-block-a"><button type="v" data-theme="b">Suscribete</button></div>
            </div>
    </div><!-- /content -->
</div><!-- /page -->

    <script>
    if (typeof jQuery == 'undefined') {  
    alert('undefined');} else {alert('ok');}
    </script> 
```

![在此处输入图像描述](../Images/8a8d2fba4e3132e6eca95f4d581c74cd.png)

* * *

```
 <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <link ref="https://www.cuponeraclub.com/themes/livingsocial_v3.1/css/jquery.mobile-1.2.0.min.css" rel="stylesheet" type="text/css"/>
    <script src="https://www.cuponeraclub.com/themes/livingsocial_v3.1/scripts/jquery-1.8.3.js" type="text/javascript"></script>
    <script src="https://www.cuponeraclub.com/themes/livingsocial_v3.1/scripts/jquery.mobile-1.2.0.min.js" type="text/javascript"></script>

<div data-role="page">
    <div data-role="content">   
            <div class="ui-grid-solo">
                <div class="ui-block-a"><input type="text" id="email" placeholder="Email"></div>
            </div>
            <div class="ui-grid-solo">
                <div class="ui-block-a">
                    <select id="city">
                                                    <option value="22" >Ambato</option>
                                                    <option value="12" >Cuenca</option>
                                                    <option value="25" >Esmeraldas</option>
                                                    <option value="11" selected>Guayaquil</option>
                                                    <option value="26" >Ibarra</option>
                                                    <option value="27" >Loja</option>
                                                    <option value="24" >Machala</option>
                                                    <option value="28" >Manta</option>
                                                    <option value="29" >Portoviejo</option>
                                                    <option value="10" >Quito</option>
                                                    <option value="23" >Riobamba</option>
                                                    <option value="30" >Santo Domingo</option>
                                            </select></div>
            </div>
            <div class="ui-grid-solo">
                    <div class="ui-block-a"><button type="v" data-theme="b">Suscribete</button></div>
            </div>
    </div><!-- /content -->
</div><!-- /page -->

    <script>
    if (typeof jQuery == 'undefined') {  
    alert('undefined');} else {alert('ok');}
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-10T10:25:54.800

当时我正在编写一个 jQuery Mobile 应用程序，只是偶然发现了这个问题。您的代码一般都可以，似乎只是您的头包含在您的库中不起作用。这是您在工作头骨架中的代码：

```
 <!DOCTYPE html>

<html>
    <head>
        <meta charset="utf-8" />
        <meta name="format-detection" content="telephone=no" />
        <!-- WARNING: for iOS 7, remove the width=device-width and height=device-height attributes. See https://issues.apache.org/jira/browse/CB-4323 -->
        <!-- next one gives arning in browser cause of 'target-densitydpi=device-dpi'
<!--<meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />-->
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height" />

        <!--<link rel="stylesheet" href="library/jquerymobile/jquery.mobile-1.4.2.min.css" />-->

        <!--<link rel="stylesheet" type="text/css" href="css/stylesIos.css" />-->
        <link rel="stylesheet" type="text/css" href="../css/jquery.mobile.flatui.css" />

        <!--- scripts -->
        <script type='text/javascript' src='http://code.jquery.com/jquery-1.10.2.min.js'></script>
        <script type='text/javascript' src='./library/jquerysoap/jquery.soap.js'></script>
        <!--<script type="text/javascript" src="./library/jqueryxml2json/jquery.xml2json.pack.js"></script>-->
        <script type="text/javascript" src="../library/jqueryxml2json/jquery.xml2json.new.js"></script>
        <script src="../library/jquerymobile/jquery.mobile-1.4.2.min.js"></script>

        <meta name="msapplication-tap-highlight" content="no" /> 
        <title>Eurofleurs</title>
        <script type="text/javascript">
            // $(document).delegate(".ui-content", "scrollstart", false);
        </script>
    </head>
    <body>
        <div data-role="page">
            <div data-role="content">   
                <div class="ui-grid-solo">
                    <div class="ui-block-a"><input type="text" id="email" placeholder="Email"></div>
                </div>
                <div class="ui-grid-solo">
                    <div class="ui-block-a">
                        <select id="city" data-role="ui-select">
                            <option value="22" >Ambato</option>
                            <option value="12" >Cuenca</option>
                            <option value="25" >Esmeraldas</option>
                            <option value="11" selected>Guayaquil</option>
                            <option value="26" >Ibarra</option>
                            <option value="27" >Loja</option>
                            <option value="24" >Machala</option>
                            <option value="28" >Manta</option>
                            <option value="29" >Portoviejo</option>
                            <option value="10" >Quito</option>
                            <option value="23" >Riobamba</option>
                            <option value="30" >Santo Domingo</option>
                        </select></div>
                </div>
                <div class="ui-grid-solo">
                    <div class="ui-block-a"><button type="v" data-`enter code here`theme="b">Suscribete</button></div>
                </div>
            </div><!-- /content -->
        </div><!-- /page -->
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T11:13:31.337

问题可能是 html 代码没有带有数据角色页面的容器 div。此 div 应该是包含数据角色内容的 html div 中的父级。

```
<div data-role='page'>
  <div id="cont" data-role="content" >
  ....
  </div>
</div> 
```

而此刻你有这个

```
<body> 
    <div id="cont" data-role="content" ...> 
        <div id="wrap" class="ui-grid-solo"> 
```

在此处查看文档[http://jquerymobile.com/demos/1.2.0/docs/about/getting-started.html](http://jquerymobile.com/demos/1.2.0/docs/about/getting-started.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T22:38:51.477

**更新**

我修改了测试链接，请到这里：[http ://www.cuponeraclub.com/landing.html?mb](http://www.cuponeraclub.com/landing.html?mb)

# android - android访问widget列表，哄/提醒用户安装widget

> ID：14204955
> 
> 赞同：1
> 
> 时间：2013-01-07T22:11:10.690
> 
> 标签：android, notifications, android-appwidget

我希望用户安装我的应用程序的小部件组件。目前我的“主要活动”只是弹出一个文本视图，说有一个小部件并查看他们的小部件列表。

不幸的是，现在这要求他们完全打开 mainactivity。如果他们想在他们的小部件列表中查看小部件。

我不想做任何烦人的事情，但是现在实际获取和使用小部件似乎确实存在很多障碍。

我可以做的事情：设置一个 onboot 服务来检查小部件是否在启动器屏幕上。它可以通过某种通知提醒用户一次或两次（曾经）。`onUpdate`小部件可以使用其方法或其他生命周期命令关闭该服务。我个人讨厌错误的通知。

我想做的一件事是以编程方式打开小部件列表。那可能吗？还有其他最佳做法吗？由于我们不能再只有小部件的应用程序，我仍然希望我的应用程序的主要组件是小部件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T21:18:56.257

> 设置一个 onboot 服务，检查小部件是否在启动器屏幕上

无论如何，这将要求用户在 Android 3.1+ 上启动您的活动。在此之前，您的“onboot 服务”将不会运行。

> 我想做的一件事是以编程方式打开小部件列表。那可能吗？

不可以。毕竟，用户必须在主屏幕上指明应用小部件首先到达的位置。

> 还有其他最佳做法吗？

一个纯粹是应用小部件的应用，除非很*明显*它只是一个应用小部件，否则会出现这类问题。这就是为什么许多应用程序小部件只是一个更重要的应用程序的一部分，因此如果用户选择不使用您的应用程序小部件，或者没有注意到它的存在，这没什么大不了的。

# ubuntu - 如何更改非打包应用程序崩溃的默认行为？

> ID：14204961
> 
> 赞同：17
> 
> 时间：2013-01-07T22:11:33.873
> 
> 标签：ubuntu, crash-dumps, coredump

如图所示，我们部署了一个启用了 apport 的 Ubuntu 服务器。

```
~$ cat /proc/sys/kernel/core_pattern 
|/usr/share/apport/apport %p %s %c 
```

不幸的是，apport 在处理非打包应用程序崩溃时的行为并不完全符合我们的喜好。在这些场景中，apport 正在工作目录中生成“核心”文件（假设 ulimit -c 已正确设置）。例如，从 apport 日志中，

```
ERROR: apport (pid 10117) Tue Jan  8 08:56:25 2013: executable: /home/jess/a.out (command line "./a.out")
ERROR: apport (pid 10117) Tue Jan  8 08:56:25 2013: executable does not belong to a package, ignoring
ERROR: apport (pid 10117) Tue Jan  8 08:56:25 2013: writing core dump to /home/jess/core (limit: 18889465931478580853760) 
```

令人沮丧的是，一旦有核心文件，它就不会被覆盖。因此，例如，如果我们正在测试一个应用程序并且忘记从工作目录中清除旧的核心文件，那么应用程序在测试期间崩溃，我们将看不到新的核心文件。即使它被覆盖，这也可能不是理想的，因为我们会失去旧的核心。

理想情况下，我们希望能够通过参数告诉 apport，例如，对于未打包的应用程序案例，生成一个具有根据指定模式格式化的文件名的核心文件（根据 core_pattern 文件规范）。 ..有什么办法可以做到这一点，或类似的东西吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2017-01-09T20:16:31.323

另一种选择是使用 Appport 来处理您的崩溃。它将保存核心转储以及有关崩溃的大量其他有用上下文。将以下行添加到`~/.config/apport/settings`（如果不存在则创建它）：

```
[main]
unpackaged=true 
```

现在崩溃将显示为 Appor 中的 .crash 文件`/var/crash`。您可以使用`apport-unpack`.

一个警告：如果用户选中“发送错误报告”复选框，Appor 似乎仍会尝试将这些崩溃上传到 Ubuntu 错误跟踪器；如果您正在处理专有代码等，这可能是一个问题。我正在寻找有关此的更多信息；似乎 /etc/apport/crashdb.conf 可以控制崩溃报告的发送位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-07T15:42:11.493

如果它是未打包的二进制文件，apport 仍将遵守，`/proc/sys/kernel/core_uses_pid`因此您可以设置它以增加获得正确核心文件的机会。

假定引用了 apport 本身，因此在这种`/proc/sys/kernel/core_pattern`情况下没有什么可以让 apport 回退。

您可以看到`/usr/share/apport/apport`内核核心模式使用 apport 调用的脚本中的代码。

一个明显的替代方法是创建一个新的 Python 脚本来使用，就像那个脚本一样，但对`write_user_coredump`函数进行修改，然后通过内核核心模式 sysctl 将其连接起来。

# php - 在客户端计算机或服务器上计算？

> ID：14204966
> 
> 赞同：0
> 
> 时间：2013-01-07T22:12:09.673
> 
> 标签：php, mysql

我会尽力使这个问题尽可能清楚，但请记住英语不是我的第一语言。我有一个使用 MySQL 数据库用 PHP 编写的 Web 应用程序。在一个表中，我可能有数千个条目，并且在每个条目中我都存储这些数据：

```
$hourly_rate,
$minutes 
```

当我通过循环处理我的表时，我使用以下公式计算净值：

```
$net_value = $minutes*($hourly_rate/60); 
```

现在的问题是，我是否应该在我的表上添加一个 $net_value 字段，使用 JQUERY 在客户端计算净值，然后将计算结果上传到 $net_value 字段中？考虑到我可能有 1000 个用户同时访问系统，您认为哪种方法最好？

谢谢你的帮助，

多纳托

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T22:16:37.840

这取决于价值的重要性。如果它一直被很多人访问，那么它可能值得存储在数据库中。

但我不建议使用 jQuery 进行计算，而是在服务器端进行以提高安全性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T22:14:53.630

通常我不会在数据库中存储如此简单的计算值。在 PHP 中进行计算只需要很少的时间，甚至不值得考虑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T22:20:58.937

将计算存储在数据库中是有充分理由的。很好的理由是这种计算可能会在应用程序中的多个地方使用。

我建议您创建一个视图，例如：

```
 create view vw_rates as
     select t.*, minutes*(hourly_rate/60) as net_value
     from t 
```

通过放入一个视图，每个人都将使用相同的定义。因此，例如按地区或时间进行汇总的报告将使用相同的定义。在其他数据库中，您可以使用计算列来做同样的事情，但 MySQL 不支持它们。

从性能的角度来看，对如此少量的数据进行如此简单的计算可​​能并没有什么不同。但是请记住，如果您有多个线程/进程，数据库可以并行执行这些类型的计算。

# google-api - Google 自定义搜索 API (CSE) - 仅检索讨论

> ID：14204972
> 
> 赞同：4
> 
> 时间：2013-01-07T22:12:31.520
> 
> 标签：google-api, google-custom-search

我想使用 Google 自定义搜索 API 仅在使用查询字符串等讨论中进行搜索`&tbm=dsc`。`tbm`不幸的是，API 文档中没有给出参数。

是否可以将搜索结果仅限于讨论？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:20:28.627

**将 Google 自定义搜索的搜索结果限制为仅讨论网站是不可能的。**以防万一，请记住[Google 自定义搜索用于搜索一个网站或一组网站。](https://developers.google.com/custom-search/)如果您的收藏都是讨论网站，那么这似乎不是 Google 自定义搜索的目的。但是，可能有一些有用的解决方法/解决方案。

**解决方法 0**

查找或生成您感兴趣的讨论网站集合，并基于此[创建自定义搜索。](http://www.google.com/cse/)这将实现（几乎）您所追求的相同结果。

**解决方法 1**

您也许可以使用细化标签执行重定向。[此示例重定向到 Google Scholar 搜索。](https://developers.google.com/custom-search/docs/queries#redirect)您也许可以使用`&tbm=dsc`.

```
<CustomSearchEngine>
  <Title>Universities</Title>
  <Context>
    <Facet>
      <FacetItem title="Papers">
        <Label name="papers" mode="FILTER"/>
        <Redirect url="http://scholar.google.com/scholar?q=$q"/>
      </FacetItem>
    </Facet>
  </Context>
</CustomSearchEngine> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T15:07:25.580

不，目前没有办法使用 CSE/GSS 进行讨论搜索。唯一的特殊搜索`image`记录在[API 参考中](https://developers.google.com/custom-search/docs/xml_results)。您可以使用标签和[优化](http://support.google.com/customsearch//bin/answer.py?hl=en&ctx=topic&answer=2631064&topic=2642564)将搜索限制在特定站点和/或模式。

# javascript - 将 JQuery 验证结果放置在单元格之外

> ID：14204973
> 
> 赞同：0
> 
> 时间：2013-01-07T22:12:34.063
> 
> 标签：javascript, jquery

我无法获取验证函数结果“必填字段”来填充表格的文本输入框。

当前代码将结果放在单元格的右侧而不是内部。我相当肯定它是 $(this).parent().append 部分，但在尝试了其他几种变体之后，我没有达到预期的结果。

*代码通过检查 class = requiredField 属性来验证单元格中当前是否存在值。

非常感谢任何提示。-谢谢。

```
<script type="text/javascript">
$(document).ready(function() {
$('form#commentform').submit(function() {
    $('form#commentform .error').remove();
    var hasError = false;
    $('.requiredField').each(function() {
        if(jQuery.trim($(this).val()) == '') {
            $(this).parent().append('<span class="error">*Required field</span>');
            hasError = true;
        }
    });
    if(!hasError) {
        alert('Validation Complete');
    }
    return false;
  });
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T22:16:50.710

您可以使用以下`after()`方法：

```
$(this).after('<span class="error">*Required field</span>'); 
```

[http://api.jquery.com/after/](http://api.jquery.com/after/)

# html - 如何在悬停时同时突出显示文本和背景颜色？

> ID：14204975
> 
> 赞同：0
> 
> 时间：2013-01-07T22:12:44.123
> 
> 标签：html, css, wordpress, hover, background-color

我正在尝试创建一个网格样式的投资组合页面，其中标题在悬停时突出显示。我还希望在图像上显示背景颜色。我已经创建了这两个，但无法弄清楚如何让它们同时发生。下面是 HTML 和 CSS 以及查看我的实际意思的链接。

```
.home_blog_box { position: relative; float: left; width: 287px; padding: 0 12px 12px 0; }
.home_blog_box img { width: 287px; height: 201px;  }
.home_blog_box h3 { position:absolute; width: 287px; height: 201px; bottom:3px; left:0px;}
.home_blog_box h3:hover {background-color: #777777; opacity:.85;}
.home_blog_box h3 a {opacity:0; color:#ffffff; text-decoration: none; font-size:30px;}
.home_blog_box h3 a:hover {opacity:1}

<div class="home_blog_box">
<?php } ?>
  <a href="<?php the_permalink(); ?>"><?php the_post_thumbnail('featured-blog'); ?></a>
    <h3><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h3>
</div><!--//home_blog_box--> 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T22:20:19.753

您可以使用 :after 或 :before 伪元素很好地做到这一点：http: [//jsfiddle.net/TpfA8/](http://jsfiddle.net/TpfA8/)

例子：

```
<div class="image-box">
  <img src="http://placehold.it/200x150" />
  <p>title</p>
</div> 
```

和相关的CSS：

```
.image-box {
  position: relative;
  overflow: hidden;
  width: 200px;
}

.image-box:hover:after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(200,100,100, 0.5);
}

.image-box p {
  display: none;
}

.image-box:hover p {
 display: block;
  position: absolute;
  top: 10px;
  left; 10px;
} 
```

使用 CSS 生成的内容，您正在围绕 '' 的内容（无）创建一个框，但此元素仍然遵循框模型（有点），因此它可以获得高度、宽度、位置等信息。

确保为您的图像容器指定宽度，以便您可以使用溢出：隐藏；财产。

# mysql - 双 LIKE 检查

> ID：14204979
> 
> 赞同：0
> 
> 时间：2013-01-07T22:13:05.623
> 
> 标签：mysql

如何创建查询以检查与表的比较，而不是需要两个或更多匹配，无论哪个但不相同。我想创建一个重复的列

```
Col1 Col2
 A    A
 B    B
 C    C 
```

`LIKE CONCAT('%',table.col1,'%')`并检查两者： `LIKE CONCAT('%',table.col2,'%')` 我只是不确定如何确保第二个不`LIKE`等于第一个，因为因为它们是等价的，所以上面的两个语句都会返回正数。但是我需要标记 AB 而不是 AA 之类的项目

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T22:15:37.267

使用这种方法，您可以添加另一个`AND`子句来强制执行此操作：

```
-- ...
WHERE foo LIKE CONCAT('%',table.col1,'%')
AND foo LIKE CONCAT('%',table.col2,'%')
AND table.col1 <> table.col2 
```

不过，我不确定使用重复列是最好的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T22:26:18.820

好的，试试这样的：

```
select s.*
from sentences s join
     words w
     on s.sentence like concat('%', w.word, '%') 
group by s.sentence
having count(*) > 1 
```

这会进行连接以获取匹配项，然后过滤掉少于两个匹配项的句子。

`s.*`with的`group by s.sentence`使用使用了一个名为 Hidden Columns 的 MySQL (mis) 特性，这在这种情况下可能很有用。

# java - Android：在 AsyncTask 中写入文件

> ID：14204980
> 
> 赞同：1
> 
> 时间：2013-01-07T22:13:13.923
> 
> 标签：java, android, writetofile

我希望能够在我的 AsyncTask 子类中写入本地目录，但我似乎无法弄清楚如何使用 getFilesDir()，因为据我所知，我无法在此创建 ContextWrapper 和 Context 的实例子类。

那么，我尝试了什么？我尝试通过尝试许多不同的方法来创建 Context 和 ContextWrapper 的实例以访问 getFilesDir() 方法，这是我知道如何获取文件目录的唯一方法。就是这样。我只知道该怎么做。

我可能遗漏了很多明显的东西，但我已经使用 Android 大约 2 天了，所以我仍然不知道如何正确调试我的问题。

非常感谢任何“ExplainLikeImFive”帮助。

编辑：

据我现在所知，您只能通过 Activity 获取 files 目录。这是为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T22:32:19.220

您需要使用`Context`对象来访问本地目录中的文件。您可以使用 an 的实例`Activity`作为您的`Context`对象。创建一个`AsyncTask`并给它一个引用你的`Activity`. 然后在您的 中`AsyncTask`，您可以使用`Activity`来访问文件系统：

```
activity.getFilesDir(); 
```

# asp.net - Visual Studio 2010 禁用外部网站调试

> ID：14204982
> 
> 赞同：1
> 
> 时间：2013-01-07T22:13:36.153
> 
> 标签：asp.net, visual-studio-2010, debugging

我正在使用 VS2010 改进一个 ASP.Net 网站。作为付款流程的一部分，我需要重定向到外部网站（如 Paypal）以在返回我的网站之前处理付款，但是该网站在其 JavaScript 中存在 Visual Studio 正在尝试调试的错误。我无意调试这个第三方的网站。有没有办法告诉 Visual Studio 仅调试属于我正在处理的项目的一部分或仅用于 localhost 的网站？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T17:46:29.377

回答我自己的问题。我最终改用 Chrome/Firefox 进行调试。除非您使用 IE，否则 Visual Studio 不会尝试调试 javascript。

然后，我可以使用 Chrome 中内置的 javascript 调试器来调试我在实际尝试修复的网站上遇到的任何 javascript 问题。

# python - 使用 shutil.copyfile 复制受限文件，而无需在 Python 中成为 root

> ID：14204984
> 
> 赞同：1
> 
> 时间：2013-01-07T22:13:52.490
> 
> 标签：python, shutil

我的 python 脚本执行的任务之一是提取整个 Linux Root FS tarball，然后将文件从中复制到目标目录中。这样做时，如果出现以下特殊受限文件（如 gshadow），我会收到错误消息：

```
File "script.py", line 553, in copy_rootfs
shutil.copy(sourceFileName,targetFileName)
File "/usr/lib/python2.6/shutil.py", line 88, in copy
copyfile(src, dst)
File "/usr/lib/python2.6/shutil.py", line 52, in copyfile
fsrc = open(src, 'rb')
IOError: [Errno 13] Permission denied: '/home/myuser/temp/home/embeduser/NFS/LinuxFS/etc/gshadow' 
```

从 tarball 中提取的文件 gshadow 的权限如下：

```
myuser@host temp]$ ls -l home/embeduser/NFS/LinuxFS/etc/gshadow 
---------- 1 myuser myuser 271 Nov  5 08:54 home/embeduser/NFS/LinuxFS/etc/gshadow 
```

有没有一种方法可以实现这一点，而无需以 root 身份运行我的 python 脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T12:51:51.817

你不能用 来做到这一点`shutil`，但很容易想出一些自定义的解决方案。诀窍是`gshadow`没有权限，但属于本地用户。因此，您可以使用 更改其权限`os.chmod()`，阅读它，然后（如有必要）将权限更改回来。

# typescript - 打字稿 - 当在对象中保留注释时，代码会以一种奇怪的方式编译

> ID：14204988
> 
> 赞同：3
> 
> 时间：2013-01-07T22:14:13.447
> 
> 标签：typescript

我有一个这样的打字稿文件......

```
var obj = {
    /** Test comment */
    prop1: '',
    prop2: ''
}; 
```

并且javascript编译为...

```
var obj = {
    prop1: /** Test comment */
    '',
    prop2: ''
}; 
```

这样做的问题是 JSDoc 在生成文档时看不到对象的属性，因为注释在属性之后。

我的解决方案是这样...

```
 var obj;
    obj = {};

    /** Test comment */
    obj.prop1 = '';

    obj.prop2 = ''; 
```

出于某种原因，在这种情况下，我必须将声明与初始化分开，否则类型脚本会`obj.propX = '';`在

> “{}”类型的值上不存在属性“propX”

我的问题：

1.  有没有其他人在对象中放置评论时遇到过这个问题？
2.  如果是这样，如果与我自己的解决方案不同，您是如何解决的？
3.  如果没有，我能做些什么来阻止错误的发生，这样我就可以将变量声明和初始化结合起来。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T23:38:52.617

这是一个错误。在未来的 TypeScript 版本中，注释将被正确保留。

同时，对于解决方法，您有两种选择：

任何一个

```
var obj: any = {}; // No type checking, anywhere, on obj 
```

或者

```
var obj: { prop1: string; prop2: string; } = {}; // More work, but type checking will happen now 
```

之后您可以执行此操作，它应该可以按预期工作：

```
/** Test comment */
obj.prop1 = ''; 
```

# php - 一组用于两个滑动列表的动态生成控件 (jQuery)

> ID：14204989
> 
> 赞同：0
> 
> 时间：2013-01-07T22:14:14.230
> 
> 标签：php, javascript, jquery, wordpress

我正在使用 Easy Slider 插件（[http://cssglobe.com/post/4004/easy-slider-15-the-easiest-jquery-plugin-for-sliding）](http://cssglobe.com/post/4004/easy-slider-15-the-easiest-jquery-plugin-for-sliding%29)来滚动几个列表。该插件动态生成列表的控件。所以出现了两组控件。我想知道是否可以将控件绑定到一个集合中。我希望单个控件同时滑动/滚动两个列表。我这样做的原因是我有 100% 宽度的背景，我想与包装器内的“功能”div 同时滚动。布局/css 运行良好 - 只需要使用 js。

功能

```
<script>
        $(document).ready(function(){
            $("#slides, #slideTop").easySlider({
                auto: true,
                continuous: true,
                numeric: true
            });
        });
</script> 
```

HTML

```
<div id="slides">
<ul>
<li class="slideOne"></li>
<li class="slideTwo"></li>
<li class="slideThree"></li>
</ul>
</div>

<div class="container_16">
<div class="grid_16">
<div id="slideTop">
<ul>
<li>One</li>
<li>Two</li>
<li>Three</li>
</ul>
</div> 
```

CSS

```
#slideTop{
    width:940px;
    height: 350px;
    background-color: #ccc;
    position: absolute;
    z-index: 9999;
    overflow: hidden;
}

#slides{
    width:100%;
    height: 350px;
    background-color: blue;
    margin: 0 auto;
    position: absolute;
    top:144px;
    z-index: -9999;
    overflow: hidden;

}

#slideTop ul {
    padding:0;
    width: 940px;
    height: 350px;
}

#slideTop ul li {
    height:350px;
    list-style:none;
    width: 940px;
}

#slides ul {
    margin: 0 auto;
    padding:0;
    width: 100%;
    height: 350px;
}

#slides ul li {
    margin:0;
    padding:0;
    height:350px;
    list-style:none;
    width:4000px;
    float: left;
}

.slideOne {
    background: url(images/one.gif) repeat-x;
    width: 100%;
    height: 350px;
}

.slideTwo {
    background: url(images/two.gif) repeat-x;
        width: 100%;
    height: 350px;
}

.slideThree {
    background: url(images/three.gif) repeat-x;
        width: 100%;
    height: 350px;
}

ul#controls {
    height:21px;
    padding:0;
    width:100px;
    position:absolute;
    z-index:500;
    top:620px;
    float:left;
    margin-left:430px
}

ul#controls li {
    float:left;
    height:21px;
    list-style-type:none;
    margin:0;
    padding:0 3px;
    width:21px
}

ul#controls li a {
    background:url(images/ss.png) no-repeat 0 0;
    display:block;
    float:left;
    height:21px;
    width:21px;
    border:none
} 
```

# asp.net - 无法从代码隐藏调用 App_Code 类

> ID：14204990
> 
> 赞同：24
> 
> 时间：2013-01-07T22:14:14.663
> 
> 标签：asp.net, mono, code-behind, app-code

我在“App_Code”文件夹中的文件中有一个类。我可以在“aspx”文件中使用它，但不能从代码隐藏文件中使用。如何使其对代码隐藏可见？

**注意：这是 Mono 上的 ASP.Net，我直接编写类，而不是使用 IDE 编译它们**

我的文件：

## ASPX 文件 (testappcode.aspx)

```
<%@ Page language="c#" src="TestAppCode.aspx.cs" Inherits="TestAppCode.TestAppCode" AutoEventWireup="true" %>
<html>
  <head>
    <title>Test App_Code Folder</title>
  </head>
  <body>
    <form id="contactForm" runat="server">
    <asp:TextBox id="Name" runat="server" ></asp:TextBox>
    <asp:TextBox id="Age" runat="server" ></asp:TextBox>
    <asp:Button ID="Submit" runat="server" Text="Submit" onclick="SubmitForm" />
    </form>
  </body>
<html> 
```

## 代码隐藏 (TestAppCode.aspx.cs)

```
using System;
using System.Web.UI.WebControls;

namespace TestAppCode
{
    public class TestAppCode : System.Web.UI.Page
    {
    protected void SubmitForm(object sender, EventArgs e)
    {
        //It fails here with the error: CS0246: The type or namespace name
        //`MyAppCodeClass' could not be found. Are you missing a using
        //directive or an assembly reference?
        MyAppCodeClass m = new MyAppCodeClass();
    }
    }
} 
```

## APP_CODE 类 (App_Code/MyAppCodeClass.cs)

```
public class MyAppCodeClass
{
         public MyAppCodeClass() {}
} 
```

我尝试给它一个命名空间，但这并不能解决问题。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-01-07T23:51:24.760

将您的课程更改`Build Action`为编译。

![在此处输入图像描述](../Images/735da1b9e9668b3c388a9033ad0e463c.png)

# c# - 在 foreach 循环内的 switch 嵌套中使用“继续”键盘

> ID：14204992
> 
> 赞同：17
> 
> 时间：2013-01-07T22:14:25.537
> 
> 标签：c#, loops, foreach, switch-statement, continue

我有下面的代码（实际上比你看到的要长得多！）

```
foreach (SensorPair sensor in _sensorPairs)
{
    sensorByte = (byte) sensor.Sensor;

    if (!packet.Contains(sensorByte))
        continue;

    index = packet.IndexOf(sensorByte);
    byteCount = sensor.ByteCount;

    switch (byteCount)
    {
        case 1:
            try
            {
                switch(sensor.ValueType)
                {
                    case SensorValueType.Unsigned:
                        val = (int)packet[index + 1];
                        if (val > 255)
                            //*** WHAT DOES THIS CONTINUE DO?
                            continue;   
                        else //rise the event
                           OnSensorReport();                              
                    break; 
```

您看到的关键字是否`continue`会导致 foreach 循环开始迭代下一个项目，或者它只是传递到下一个`case`语句？

如果它对 foreach 循环没有做任何事情，我如何强制代码退出开关并在 foreach 循环中开始下一次迭代？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-07T22:17:28.463

是的，它继续`foreach`循环。

[**查阅文档**](http://msdn.microsoft.com/en-us/library/vstudio/923ahwt1.aspx)总是有用的；-)

> continue 语句将控制权传递给包含它的 while、do、for 或 foreach 语句的下一次迭代。

或者更全面的[**C# 语言规范**](http://msdn.microsoft.com/en-us/library/vstudio/ms228593.aspx)：

**8.9.2 continue 语句**

> continue 语句开始**最近的封闭 while、do、for 或 foreach 语句**的新迭代。
> 
> continue 语句的目标是最近的封闭 while、do、for 或 foreach 语句的嵌入语句的终点。如果 continue 语句未包含在 while、do、for 或 foreach 语句中，则会发生编译时错误。
> 
> 当多个 while、do、for 或 foreach 语句相互嵌套时， continue 语句仅适用**于最里面的语句**。要跨多个嵌套级别转移控制，必须使用 goto 语句（第 8.9.3 节）。
> 
> continue 语句不能退出 finally 块（第 8.10 节）。当 continue 语句出现在 finally 块中时， continue 语句的目标必须在同一个 finally 块中；否则会发生编译时错误。
> 
> continue 语句执行如下：
> 
> *   如果 continue 语句退出一个或多个带有相关 finally 块的 try 块，则控制最初转移到最里面的 try 语句的 finally 块。当控制到达 finally 块的终点时，控制将转移到下一个封闭 try 语句的 finally 块。重复此过程，直到所有介入的 try 语句的 finally 块都已执行。
>     
>     
> *   控制转移到 continue 语句的目标。
>     
>     
> 
> 因为 continue 语句无条件地将控制转移到别处，所以 continue 语句的终点永远无法到达。

# visual-studio - 使用 Visual Studio 安装程序安装后如何启动网页

> ID：14204996
> 
> 赞同：1
> 
> 时间：2013-01-07T22:14:34.380
> 
> 标签：visual-studio, windows-installer, vsinstaller

我想在安装程序完成后启动一个 URL。我在项目内容中添加了一个 *.url 文件，并在 Visual Studio Installer 项目中添加了内容文件。然后我尝试在提交自定义操作中添加 *.url，将文件名放在名称字段中，EntryPoint 显示“提交”，InstallerClass 为假。

当我编译 Visual Studio 安装程序项目时，它给我一个错误，即在自定义操作的模块中找不到入口点“提交”*.url

是否可以在不添加 InstallerClass 的情况下执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T06:36:06.220

您可以使用 VB 脚本文件在 URL 文件上运行 shell 命令。看[这里](http://openlandscape.net/2009/03/23/executing-shell-commands-from-a-visual-studio-deployment-project/)

# jquery - 当我通过ajax调用单击保存按钮时显示图像指示器？

> ID：14204998
> 
> 赞同：0
> 
> 时间：2013-01-07T22:14:46.273
> 
> 标签：jquery, ajax, asp.net-mvc-3

我正在使用 .net MVC 3。我有一个 AJAX 调用来保存问卷答案，我需要一些类似于加载图标的图像指示器来向用户显示它已保存。

```
 <input id="SaveAccount"
        type="button"
        onclick="saveQuestioniare();"
        value=""
        alt="save account" title="save account" /> 
```

我的 AJAX 调用：

```
 function saveQuestioniare() {
           var formData = $("#SignupForm").serializeArray();
           $.ajax({
            url: '/Question/SaveQuestionaire?id=@ViewData["reviewId"]',
            type: 'POST',
            cache: false,
            dataType: 'json',
            data: formData,
                error: function (jqXHR, textStatus, errorThrown) {
                    alert(errorThrown);
                },
            success: function (json) {
                alert("Saved");
            }
        });
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T11:43:09.207

不要使用额外的插件，你可以通过 css 和 js 10 行代码而不是 300/400 或更多代码轻松完成

首先将您的图像设置为您想要的位置，例如：

```
<img src="...path to img" id="myimg" alt=""/>

#myimg{
margin:0;
position:relative;
top:20%;
bottom:20%;
left:0;
right:0;
display:none;
} 
```

然后在js中做

```
$.ajax({ ....
beforeSend:function(){
$('#myimg').show();
},
success:function(){
$("#myimg").hide();
}
...}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-08T00:39:31.907

使用阴影框，如[Lightbox](http://leandrovieira.com/projects/jquery/lightbox/)，一个 jQuery 插件，并触发它指向您最喜欢的“微调器”图像以指示加载，然后在“成功”处理程序中关闭它。