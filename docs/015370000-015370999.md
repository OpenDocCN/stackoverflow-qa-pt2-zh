# StackOverflow 问答 15370000-15370999

# nhibernate - 在 Fluent NHibernate 配置中设置任意属性

> ID：15370001
> 
> 赞同：2
> 
> 时间：2013-03-12T19:08:04.333
> 
> 标签：nhibernate, fluent-nhibernate

我有一个 Fluent NHibernate 项目，我需要在 NHibernate 配置上设置一些任意属性。我的第一次尝试是这样的，我从那里开始`Fluently.Configure()`，做一些流利的配置和调用`BuildConfiguration()`，然后在该配置上设置一些属性，最后`ISessionFactory`从中构建一个。

```
public static class NHibernateConfigurator
{
    private static readonly Configuration _configuration;
    private static readonly ISessionFactory _sessionFactory;

    static NHibernateConfigurator()
    {
        _configuration = Fluently.Configure()
            .Database(SQLiteConfiguration
                .Standard
                .InMemory()
                .Provider<TestConnectionProvider>()
                .FormatSql())
            .Mappings(m => m.FluentMappings.AddFromAssemblyOf<AcademicTermMapping>())
            .BuildConfiguration();

        _configuration
            .SetProperty(Environment.CollectionTypeFactoryClass, typeof(Net4CollectionTypeFactory).AssemblyQualifiedName)
            .SetProperty(Environment.CurrentSessionContextClass, "thread_static");

        var props = _configuration.Properties;
        if (props.ContainsKey(Environment.ConnectionStringName))
            props.Remove(Environment.ConnectionStringName);

        _sessionFactory = _configuration.BuildSessionFactory();

    } 
```

虽然我最终得到了一个工作会话工厂，`.SetProperty`但中间的调用似乎被忽略了。（特别是，我知道`Environment.CollectionTypeFactoryClass`被忽略了，因为我得到了异常。我假设它的其余部分也被忽略了。）

下一次尝试用于`ExposeConfiguration()`设置属性：

```
 static NHibernateConfigurator()
    {

        _configuration = Fluently.Configure()
            .Database(SQLiteConfiguration
                .Standard
                .InMemory()
                .Provider<TestConnectionProvider>()
                .FormatSql())
            .Mappings(m => m.FluentMappings.AddFromAssemblyOf<AcademicTermMapping>())
            .ExposeConfiguration(ConfigModifier)
            .BuildConfiguration();

        _sessionFactory = _configuration.BuildSessionFactory();

    }

    private static void ConfigModifier(Configuration config)
    {
        config.SetProperty(Environment.CollectionTypeFactoryClass, typeof(Net4CollectionTypeFactory).AssemblyQualifiedName);
        config.SetProperty(Environment.CurrentSessionContextClass, "thread_static");

        var props = config.Properties;
        if (props.ContainsKey(Environment.ConnectionStringName))
            props.Remove(Environment.ConnectionStringName);

    } 
```

但这似乎也不起作用。幸运的是，其中一个属性有对应的 fluent 方法，所以我可以这样做：

```
_configuration = Fluently.Configure()
    .CollectionTypeFactory<Net4CollectionTypeFactory>()
    // ... etc... 
```

但其余部分没有流利的等价物。我觉得我一定做错了。

**更新**

现在越来越奇怪了。按照@Firo 的建议，我检查了`BuildConfiguration()`. 在配置上手动设置属性`.SetProperty`，或者使用流利`.CollectionTypeFactory<Net4CollectionTypeFactory>()`的在配置上设置相同的属性。但它们最终以不同的顺序结束。所以我尝试在新配置上手动设置属性，然后从那里继续：

```
 static NHibernateConfigurator()
    {
        var baseConfig = new Configuration();
        baseConfig.SetProperty(Environment.CollectionTypeFactoryClass, typeof(Net4CollectionTypeFactory).AssemblyQualifiedName);

        _configuration = Fluently.Configure(baseConfig)
            .Database(SQLiteConfiguration
                .Standard
                .InMemory()
                .Provider<TestConnectionProvider>()
                .FormatSql())
            .Mappings(m => m.FluentMappings.AddFromAssemblyOf<AcademicTermMapping>())
            .ExposeConfiguration(ConfigModifier)
            .BuildConfiguration();

        _sessionFactory = _configuration.BuildSessionFactory();
    }

    private static void ConfigModifier(Configuration config)
    {
        config.SetProperty(Environment.CurrentSessionContextClass, "thread_static");

        var props = config.Properties;
        if (props.ContainsKey(Environment.ConnectionStringName))
            props.Remove(Environment.ConnectionStringName);
    } 
```

那行得通。不同的方法产生所有相同的属性，只是顺序不同。以上产生这些`_configuration.Properties`：

```
[0] = {[use_reflection_optimizer, True]}
[1] = {[collectiontype.factory_class, DataAccess.NHibernate.Net4CollectionTypeFactory, DataAccess.NHibernate, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]}
[2] = {[connection.provider, DataAccess.NHibernate.Tests.TestConnectionProvider, DataAccess.NHibernate.Tests, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]}
[3] = {[connection.driver_class, NHibernate.Driver.SQLite20Driver, NHibernate, Version=3.3.1.4000, Culture=neutral, PublicKeyToken=aa95f207798dfdb4]}
[4] = {[dialect, NHibernate.Dialect.SQLiteDialect, NHibernate, Version=3.3.1.4000, Culture=neutral, PublicKeyToken=aa95f207798dfdb4]}
[5] = {[hibernate.dialect, NHibernate.Dialect.SQLiteDialect, NHibernate, Version=3.3.1.4000, Culture=neutral, PublicKeyToken=aa95f207798dfdb4]}
[6] = {[query.substitutions, true=1;false=0]}
[7] = {[connection.release_mode, on_close]}
[8] = {[format_sql, true]}
[9] = {[connection.connection_string, Data Source=:memory:;Version=3;New=True;]}
[10] = {[current_session_context_class, thread_static]} 
```

其他方法`collectiontype.factory_class`按顺序移动，但顺序无关紧要。

# xcode - 使用绑定更改复选框的值

> ID：15370008
> 
> 赞同：0
> 
> 时间：2013-03-12T19:08:25.013
> 
> 标签：xcode, macos, cocoa, cocoa-bindings, nsbutton

我有一个带有布尔值和 3 个字符串的模型。我有一个带有复选框和 3 个文本字段的 UI。

UI 元素都使用 Interface Builder 绑定到模型中的值。我还在模型上使用一种方法来使用 KVO 动态启用和禁用复选框。

我想要做的是当复选框由于文本字段值的变化而被禁用时自动将复选框的值设置为 NSOffState 。

该复选框调用模型中名为 isComplete 的方法来检查值是否已准备好，但在那里设置模型对象的值似乎会使程序进入无限递归。

# loops - For 循环中的名称未定义错误？

> ID：15370019
> 
> 赞同：0
> 
> 时间：2013-03-12T19:09:11.140
> 
> 标签：loops, for-loop, python-2.7, undefined, netbeans-6.9

我是 Python 的新手（这是我的第二语言），所以希望我的问题可以帮助其他也在类似问题上苦苦挣扎的人。

作为参考，我使用的是 Netbeans IDE 6.9.1 并运行 Python 2.7.3。

有点背景故事，我正在研究论文的交通问题，我需要生成一个城市（节点）和道路（弧线）的网络。我正在使用下面的代码生成一个字符串，该字符串将传递给 open(file,'w') 操作，在该操作中我会将随机生成的数据写入文本文件。

例如：FNodes = '\DijkstraShortestPath\Data\100Nodes\Node5.txt'

当我在下面运行此代码时，我不断收到“*未定义名称'Fnodes' ”错误。*

我花了几个小时试图弄清楚这一点。这不应该被定义吗？毕竟，我确实写过“FNodes = bla bla bla”。

我尝试将其从循环中取出，但这会导致与“item”和“replications”相同的错误，因为它们在 FNodes 字符串中使用。这是有道理的，因为它们是在 for 循环中定义的。

如果你能帮助一个新人理解这个语法错误，那就太好了。

谢谢你的帮助。

```
R = 10  #Number of replications (trials)
NumNodes = [50,100,150] #Number of nodes (cities). Also the names of 3 folders.

for item in NumNodes: #Cycle through 50, 100, 150 nodes for folder path XXXNodes

    for replications in range(R): #Cycle through fileR.txt by replication number

        fNodes = "\\DijkstraShortestPath\\Data\\" + str(item) + "Nodes\\Node" \
        + str(replications + 1) + ".txt"

        print FNodes #This is a debugging step for me so I can see what's happening

        #Write to files and stuff... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T04:08:58.723

我注意到了错误并能够继续前进。

这是一个大写错误；print FNodes 应该是 print fNodes

# node.js - 使用 NodeJS 后端从 SPA 交付客户创作的内容

> ID：15370021
> 
> 赞同：1
> 
> 时间：2013-03-12T19:09:15.190
> 
> 标签：node.js, content-management-system

我正在使用 NodeJS 作为后端开发一个大型单页 Web 应用程序 (SPA)。应用程序中的一些屏幕（关于、联系我们、常见问题、新闻等）是理想情况下由客户动态填充的屏幕。是否有一个简单的解决方案允许客户持续自定义此内容而无需重新部署应用程序？

我不想将应用程序构建为 CMS 的一部分，因为大多数页面不遵循此模型。我真的只是想要一个小插件来管理这几个屏幕。

我已经简要地查看了[XML-RPC WordPress API](http://codex.wordpress.org/XML-RPC_WordPress_API)。还可以选择[使用 Google 电子表格作为简单的 CMS](http://gabrito.com/post/simple-cms-using-google-spreadsheet-api)。

有人在 SPA/NodeJS 应用程序中使用过这些或任何其他选项吗？我更喜欢预装的 Node 模块，我可以直接放入我的应用程序中，但在搜索中找不到任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T04:21:29.300

我最终选择了谷歌电子表格路线。使用以下 URL 语法从带有 AJAX 请求的电子表格中加载行相当简单：

```
https://spreadsheets.google.com/feeds/list/<spreadsheetId>/od6/public/values 
```

[这篇文章](http://datatables.net/forums/discussion/5611/how-to-grab-datatables-data-from-a-google-spreadsheet/p1)让我朝着解析从电子表格返回的数据的正确方向前进。

我还能够获得也存储在 Google Drive 中的电子表格参考图像文件。为了生成这些图像的 URL，我使用了以下格式：

```
http://googledrive.com/host/<GoogleDriveFolderId>/<fileName> 
```

要使此解决方案起作用，您必须将电子表格发布到网络上，并且必须将包含它们的文件夹作为公共共享给拥有链接的人（如果您不想这样做，则不可搜索）。包含图像的文件夹必须共享为公共和可搜索的。

总的来说，我认为它最终成为一个非常简单但功能强大的解决方案，允许非程序员编辑我网站上的少量内容。

# jquery - 获取特定选择的 id / value

> ID：15370025
> 
> 赞同：-1
> 
> 时间：2013-03-12T19:09:28.987
> 
> 标签：jquery, select, option

```
var tester = $("select[name='SELECTNAME']").attr('id'); 
```

谁能告诉我获取特定选择的 id / 值的正确方法是什么？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T19:23:53.417

```
$("select[name='SELECTNAME']").change(function() {
  var id = $(this).children(":selected").attr("id");
}); 
```

# javascript - Mootools 在不工作后注入

> ID：15370028
> 
> 赞同：0
> 
> 时间：2013-03-12T19:09:45.733
> 
> 标签：javascript, mootools, inject

Mootools 代码：

```
window.addEvent('domready', function() {
    var homeLink = $$('a.pathway');
    new Element('a', {'href': '/ru/produktsiya', 'html': 'Click me!'}).inject(homeLink, 'after');

}); 
```

为什么没有工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T19:19:55.680

`$$`返回一个元素的集合，当然，你不能在之后注入单个元素。

```
window.addEvent('domready', function() {
  var homeLink = $$('a.pathway');
  new Element('a[href="/ru/produktsiya"][text="Click me!"]'}).inject(homeLink[0], 'after');
}); 
```

您还可以使用 CSS 选择器逻辑来更轻松地创建元素，就像我在上面所做的那样：

# c++ - 需要帮助来理解班次计算并从我的代码中减少一些脂肪

> ID：15370029
> 
> 赞同：2
> 
> 时间：2013-03-12T19:09:51.723
> 
> 标签：c++, for-loop, encryption

我正在查看这段代码以读取我桌面上的一个文件，该文件解密了一个 cesar 密码，我一直试图弄清楚如何在这个程序中计算移位。

据我所知，Max e's 是频率最高的移位字母。由于 e 是英语中最常见的字母，因此程序试图将密码中出现频率最高的字符设置为英语中的“e”。就目前而言，这很好，但是有很多短语 e 不是最常见的字母，然后它就会落在它的脸上。

那么，我怎么能告诉程序猜测最常见的密码字母是纯文本中的 e 但万一不是，然后继续尝试将 e 转移到文本中第二个最常见的字母，等等上，直到我找到它？

一位朋友帮助了这部分，但英语很差，所以他很难向我解释。有人可以详细说明吗？非常感谢您的帮助！让我知道你的想法：

```
#include <iostream>
#include <string>
#include <cctype> // isalpha, islower, isupper, functions
#include <fstream>
using namespace std;

string caesarShift(string text, int shift);
int main()
{
    int maxEs = 0;       // # of e's in maxString
    int currentEs = 0;    // # of e'sin currentString
    string maxString;       // decrypted caesar shift with most e's
    string currentString;    //decrypted caesar shift

    string cipher;       // Stores cipher text
    char ch;    // Stores currentcharacter for reading
    ifstream fin("/Users/jasonrodriguez/Desktop/encrypted.txt");   //opens "encrypted.txt" file
    while( fin.get(ch) )    // readseach char into the cipher till EOF
    {
        cipher += ch;
    }
    fin.close();    // be safe andclose file

    for(int i=0; i < 26; i++)
    {
        currentEs =0;    // Reset counter
        currentString =caesarShift(cipher, i);    // get shifted text
        for(unsigned int x=0; x <currentString.size(); x++) // check each character of stringarray
        {
            if(currentString[x] == 'e' || currentString[x] == 'E') // check fore's
            {
                currentEs++;    // increment Ecounter
            }
        }
        if(currentEs > maxEs) //if currentEs is greater than maxEs, replace max with current
        {
            maxEs =currentEs;
            maxString= currentString;
        }
    }
    cout << maxString << endl;
    return 0;
}

/**
 string caesarShift(string text, int shift)
 Decrypts Caesar Shift using text and shift
 */
string caesarShift(string text, int shift)
{
    shift = shift % 26;    // Morethan 26 is redundant and unneeded
    char ch = 0; // holds current character
    char chs = 0;    // holds shiftedcharacter
    for(unsigned int i=0; i < text.size();i++)
    {
        ch = text[i];
        if( isalpha(ch) )
        {
            chs = ch -shift; // reverse shifting
            if( (islower(ch) && chs < 'a' )  // If is lowercase andshifted value is lower than 'a'
               ||
               ( isupper(ch) && chs < 'A' ) ) // Ifis uppercase and shifted value is lower than 'A'
            {
                chs += 26;    // Add 26(number ofletters) to get back to the correct place in alphabet
            }
            text[i] =chs;    // Set character to shifted character
        }
    }
    return text;
} 
```

**问题：**

1.  据我所知，Max e's 是频率最高的移位字母。由于 e 是英语中最常见的字母，因此程序试图将密码中出现频率最高的字符设置为英语中的“e”。就目前而言，这很好，但是有很多短语 e 不是最常见的字母，然后它就会落在它的脸上。那么，我怎么能告诉程序猜测最常见的密码字母是纯文本中的 e 但万一不是，然后继续尝试将 e 转移到文本中第二个最常见的字母，等等上，直到我找到它？

2.  我认为如果我将一个字符移动一个移位量，该字符可能会或可能不会超出范围。'a' + 3 是 'd' 可以，'x' + 3 是 '{' 不行。因此，如果字符在“z”之上，则删除 26，如果在“a”之下，则添加 26。可以是一个可用的功能。但是，您能否向我解释一下如何在程序中计算移位并将其应用于文件？它让我完全难过:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T22:57:32.103

**计算班次：**

首先，您需要将字母“A”到“Z”（假设只有大写字母）映射到整数 0 到 25。C++ 让您通过减法轻松做到这一点：

```
n = c - 'A'; 
```

现在您可以使用模算术执行移位：

```
n = (n + shift) % 26; 
```

最后映射回一封信：

```
p = n + 'A'; 
```

（请注意，您需要对这些示例中使用的变量进行适当的声明。我建议您使用比我使用的单字母变量名称更有意义的名称。）

# c - 如何在 mingw 编译器中使用 inet_pton()？

> ID：15370033
> 
> 赞同：10
> 
> 时间：2013-03-12T19:09:59.633
> 
> 标签：c, winsock2, mingw32

我正在尝试将 IPv6 兼容性添加到 C 中已经与 IPv4 兼容的程序中，但编译器存在一些问题。目前正在使用 mingw32-gcc-4.6.2 编译，在使用函数 inet_pton 时出现链接错误。

我试过让它为 vista 编译（因为 inet_pton 是一个 vista 函数），但似乎 mingw 缺少整个函数。

有什么方法可以将它添加到 mingw，或者我可能错过的任何其他选项？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-12T19:17:33.980

作者：Paul Vixie，1996。在 MinGW/GCC 中测试：

```
int inet_pton(int af, const char *src, char *dst)
{
    switch (af)
    {
    case AF_INET:
        return inet_pton4(src, dst);
    case AF_INET6:
        return inet_pton6(src, dst);
    default:
        return -1;
    }
} 
```

..

```
#define NS_INADDRSZ  4
#define NS_IN6ADDRSZ 16
#define NS_INT16SZ   2 
```

..

```
int inet_pton4(const char *src, char *dst)
{
    uint8_t tmp[NS_INADDRSZ], *tp;

    int saw_digit = 0;
    int octets = 0;
    *(tp = tmp) = 0;

    int ch;
    while ((ch = *src++) != '\0')
    {
        if (ch >= '0' && ch <= '9')
        {
            uint32_t n = *tp * 10 + (ch - '0');

            if (saw_digit && *tp == 0)
                return 0;

            if (n > 255)
                return 0;

            *tp = n;
            if (!saw_digit)
            {
                if (++octets > 4)
                    return 0;
                saw_digit = 1;
            }
        }
        else if (ch == '.' && saw_digit)
        {
            if (octets == 4)
                return 0;
            *++tp = 0;
            saw_digit = 0;
        }
        else
            return 0;
    }
    if (octets < 4)
        return 0;

    memcpy(dst, tmp, NS_INADDRSZ);

    return 1;
} 
```

...

```
int inet_pton6(const char *src, char *dst)
{
    static const char xdigits[] = "0123456789abcdef";
    uint8_t tmp[NS_IN6ADDRSZ];

    uint8_t *tp = (uint8_t*) memset(tmp, '\0', NS_IN6ADDRSZ);
    uint8_t *endp = tp + NS_IN6ADDRSZ;
    uint8_t *colonp = NULL;

    /* Leading :: requires some special handling. */
    if (*src == ':')
    {
        if (*++src != ':')
            return 0;
    }

    const char *curtok = src;
    int saw_xdigit = 0;
    uint32_t val = 0;
    int ch;
    while ((ch = tolower(*src++)) != '\0')
    {
        const char *pch = strchr(xdigits, ch);
        if (pch != NULL)
        {
            val <<= 4;
            val |= (pch - xdigits);
            if (val > 0xffff)
                return 0;
            saw_xdigit = 1;
            continue;
        }
        if (ch == ':')
        {
            curtok = src;
            if (!saw_xdigit)
            {
                if (colonp)
                    return 0;
                colonp = tp;
                continue;
            }
            else if (*src == '\0')
            {
                return 0;
            }
            if (tp + NS_INT16SZ > endp)
                return 0;
            *tp++ = (uint8_t) (val >> 8) & 0xff;
            *tp++ = (uint8_t) val & 0xff;
            saw_xdigit = 0;
            val = 0;
            continue;
        }
        if (ch == '.' && ((tp + NS_INADDRSZ) <= endp) &&
                inet_pton4(curtok, (char*) tp) > 0)
        {
            tp += NS_INADDRSZ;
            saw_xdigit = 0;
            break; /* '\0' was seen by inet_pton4(). */
        }
        return 0;
    }
    if (saw_xdigit)
    {
        if (tp + NS_INT16SZ > endp)
            return 0;
        *tp++ = (uint8_t) (val >> 8) & 0xff;
        *tp++ = (uint8_t) val & 0xff;
    }
    if (colonp != NULL)
    {
        /*
         * Since some memmove()'s erroneously fail to handle
         * overlapping regions, we'll do the shift by hand.
         */
        const int n = tp - colonp;

        if (tp == endp)
            return 0;

        for (int i = 1; i <= n; i++)
        {
            endp[-i] = colonp[n - i];
            colonp[n - i] = 0;
        }
        tp = endp;
    }
    if (tp != endp)
        return 0;

    memcpy(dst, tmp, NS_IN6ADDRSZ);

    return 1;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-10-28T16:56:17.503

我遇到了类似的问题`inet_ntop`。

您可能需要设置`_WIN32_WINNT`一个代表受支持的最低 Windows 版本的代码。这将启用仅在较新版本的 Windows 中受支持的 API。MSVC 会为您执行此操作，MinGW 不会，但它很容易修复。

例如，如果您想支持 Windows 7+，`#define _WIN32_WINNT 0x0601`

* * *

咨询[https://docs.microsoft.com/en-us/cpp/porting/modifying-winver-and-win32-winnt](https://docs.microsoft.com/en-us/cpp/porting/modifying-winver-and-win32-winnt)

```
//
// _WIN32_WINNT version constants
//
#define _WIN32_WINNT_NT4                    0x0400 // Windows NT 4.0
#define _WIN32_WINNT_WIN2K                  0x0500 // Windows 2000
#define _WIN32_WINNT_WINXP                  0x0501 // Windows XP
#define _WIN32_WINNT_WS03                   0x0502 // Windows Server 2003
#define _WIN32_WINNT_WIN6                   0x0600 // Windows Vista
#define _WIN32_WINNT_VISTA                  0x0600 // Windows Vista
#define _WIN32_WINNT_WS08                   0x0600 // Windows Server 2008
#define _WIN32_WINNT_LONGHORN               0x0600 // Windows Vista
#define _WIN32_WINNT_WIN7                   0x0601 // Windows 7
#define _WIN32_WINNT_WIN8                   0x0602 // Windows 8
#define _WIN32_WINNT_WINBLUE                0x0603 // Windows 8.1
#define _WIN32_WINNT_WINTHRESHOLD           0x0A00 // Windows 10
#define _WIN32_WINNT_WIN10                  0x0A00 // Windows 10 
```

# sql - SQL 查询计数和标签（如果是第一个）

> ID：15370035
> 
> 赞同：0
> 
> 时间：2013-03-12T19:10:01.897
> 
> 标签：sql, count, unique, record

我正在使用 SQL Server 管理 Studio 2010。

如果记录包含第一次出现的值，我需要我的查询来填充列。

我的查询返回的表很大，所以我将使用假装列来表达我的观点。我的查询当前返回一个看起来像这样的表

```
| ROW | ItemNumber | DateOpen | Status |
|  1  |      10045 | 5/5/2005 |   Open |
|  2  |      10045 | 5/5/2005 |   Open |
|  3  |      10046 | 5/5/2005 |   Open |
|  4  |      10046 | 5/5/2005 |   Open |
|  5  |      10046 | 5/5/2005 |   Open | 
```

我已经将行指示符添加到查询中，认为这将有助于识别第一次出现的 ItemNumber。如果记录是第一次出现，我需要有一个标记 X 的新列。

到目前为止我有这个

```
 DECLARE @ItemData Table(itemRow BIGINT, itemNumber BIGINT, DateOpen VARCHAR(15), status VARCHAR(15))
INSERT INTO @ItemData (itemRow, ItemNumber, DateOpen, Status)
SELECT Row_Number() OVER(ORDER BY Cm_ItemNumber) AS 'ROW'
       ,Cm_ItemNumber                            AS ItemNumber
       ,Dates_DateOpen                           AS DateOpen
       ,St_Status                                AS Status
FROM db_Items
JOIN db_Dates ON Dates_Item = Cm_ItemID
JOIN db_Status ON St_ID = Cm_StatusID
Select * from @ItemData 
```

将其放入表中然后单独选择的原因是因为查询中实际上有一个联合和更多内容，当我意识到我需要做一个唯一的检查器并将其添加到列中时，我认为最简单的方法是“事后”类型的东西，它会进入该 `Select * from @ItemData`部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T20:08:07.343

我没有对此进行测试，但它与我将要玩的路线一致......
使用您现有的查询作为 2 个 CTE 中的第一个：

```
With AllData as
(
SELECT Row_Number() OVER(ORDER BY Cm_ItemNumber) AS 'ROW'
       ,Cm_ItemNumber                            AS ItemNumber
       ,Dates_DateOpen                           AS DateOpen
       ,St_Status                                AS Status
FROM db_Items
JOIN db_Dates ON Dates_Item = Cm_ItemID
JOIN db_Status ON St_ID = Cm_StatusID
),
FirstRows as
(
SELECT Min(ROW) as Row, ItemNumber
FROM AllData 
GROUP BY ItemNumber
)
SELECT
  ad.*,
  Case When fr.Row IS NULL then '' else 'X' end as X_Col
FROM AllData ad LEFT JOIN FirstRows fr 
  ON ad.ROW=fr.Row 
```

# javascript - 使用 javascript timeOut() 的正确方法

> ID：15370038
> 
> 赞同：1
> 
> 时间：2013-03-12T19:10:07.823
> 
> 标签：javascript, timeout

例如，如果我要按照以下方式格式化我的代码

```
<script type="text/javascript">
    var timeout;
    function auto() {
        $.ajax({
                url: "functions/ajax.php",
                data: "func=auto",
                type: "GET",
                dataType: "json",
                success: function(data){
                       $.each(data.search, function (i, v) {
                               console.log('Success ' + v);
                       });
                },
                error: function (jqXHR, textStatus, errorThrown){
                       console.log('Error ' + jqXHR);
                }
        });
     }

    function start() {
    timeout = setTimeout('auto()', 2000);
    }

    function stop(){
        clearTimeout(timeout);
}
</script> 
```

my`var timeout`不是由值定义有关系吗？由于实际超时甚至没有处理，它运行`auto()`一次函数，然后停止

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T19:16:05.250

首先，不要在 setTimeout 中使用引号（我不确定，但我相信调用`eval()`），只需通过引用传入函数即可`setTimeout(auto, 2000)`：

其次，JavaScript 是一种动态类型的语言，这意味着变量没有固定的类型，它们可以根据情况而变化，因此您的代码是完全有效的。

最后，如果您不打算在超时期间中止超时，则无需清除它，因为它会在执行后消失。

# css - 我如何水平居中 的？

> ID：15370039
> 
> 赞同：2
> 
> 时间：2013-03-12T19:10:12.543
> 
> 标签：css, html, twitter-bootstrap, html-lists

我正在尝试将一些`<li>`集中在`<ul>`. 这是标记；

```
<ul class="thumbnails">
  <li>
    <a href="#" class="thumbnail">
      <img data-src="holder.js/250x200" alt="">
    </a>
  </li>
  <li>
    <a href="#" class="thumbnail">
      <img data-src="holder.js/250x200" alt="">
    </a>
  </li>
  <li>
    <a href="#" class="thumbnail">
      <img data-src="holder.js/250x200" alt="">
    </a>
  </li>
  <li>
    <a href="#" class="thumbnail">
      <img data-src="holder.js/250x200" alt="">
    </a>
  </li>
</ul> 
```

我有一些 CSS 来设置图像的样式，所以现在看起来像这样；

![在此处输入图像描述](../Images/dcdd42f7e150d98d5010780765cb9052.png) ![在此处输入图像描述](../Images/c143ad936b913934f672942bcf750862.png)

我试图让`<li>`'s 留在中心并且仍然均匀地填充空间。有任何想法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T19:14:03.623

如果宽度`ul`是可变的，我认为最好的方法如下：

```
ul.thumbnails  {
    text-align: center;
}

ul.thumbnails li {
    display: inline-block;
} 
```

# visual-c++ - 错误 C2143 VC++12

> ID：15370041
> 
> 赞同：0
> 
> 时间：2013-03-12T19:10:20.117
> 
> 标签：visual-c++, compiler-errors, c++-cli, header-files

我在一个非常简单的标题中收到 C2143 错误。你能帮我找出问题所在吗？

```
#ifndef GLOB_H_INCLUDED
#define GLOB_H_INCLUDED
#include <string>
#include <windows.h>

 extern string *name, *surname, *dob, *hospNo, *addr, *sex, *email, *phone, *nhs, *allerg, *indic, *notes;
 extern int leftc, rightc, middlec;
 extern string ks;

#endif 
```

如果您需要任何进一步的解释......在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T19:43:29.940

尝试`using namespace std;`在字符串头的包含之后添加:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T11:35:10.710

您缺少“std”命名空间 - 但不是在头文件中添加“using”子句（这是不好的做法），而是像这样限定您的名称：

```
#ifndef GLOB_H_INCLUDED
#define GLOB_H_INCLUDED
#include <string>
#include <windows.h>

extern std::string *name, *surname, *dob, *hospNo, *addr, *sex, *email, *phone, *nhs, *allerg, *indic, *notes;
extern int leftc, rightc, middlec;
extern std::string ks;

#endif 
```

# r - 重新排序 dcast 数据帧

> ID：15370042
> 
> 赞同：7
> 
> 时间：2013-03-12T19:10:20.500
> 
> 标签：r, dataframe

是否可以重新排序数据帧的列，这是 dcast() 调用 Ex 的结果

给定数据：

```
> dput(copyOfRes)
structure(list(docName = c("doc2", "doc1", "doc1", "doc1", "doc1", 
"doc1", "doc1", "doc1", "doc1", "doc1", "doc1", "doc2"), day_of_week = c(11, 
11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 2)), .Names = c("docName", 
"week_number"), row.names = c(NA, -12L), class = "data.frame") 
```

因此，当我按如下方式使用 dcast() 时：

```
library(reshape2)
dcast(copyOfRes, docName ~ week_number, length) 
```

结果是：

```
 docName 2 11
1    doc1 0 10
2    doc2 1  1 
```

我希望数据框的值减小`week_number`如下：

```
 docName 11  2
1    doc1 10 0
2    doc2 1  1 
```

我试过做`dcast(copyOfRes, docName ~ sort(week_number, decreasing= TRUE), length)`，但它仍然不起作用。有什么建议么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-12T19:21:43.653

您可以使用`factor()`内部`dcast()`设置适当的级别顺序。

```
 dcast(copyOfRes, 
   docName ~ factor(week_number,levels=unique(week_number)), length)
      docName 11 2
    1    doc1 10 0
    2    doc2  1 1 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-12T19:21:54.093

你可以`reorder`在这里使用`rev`

```
dcast(copyOfRes, docName ~ reorder(week_number,rev(week_number)), length)
Using week_number as value column: use value.var to override.
  docName 11 2
1    doc1 10 0
2    doc2  1 1 
```

# java - 合并排序问题

> ID：15370044
> 
> 赞同：5
> 
> 时间：2013-03-12T19:10:24.253
> 
> 标签：java, sorting

对于我的 java 作业，我正在努力编写一个递归合并排序类。截至目前，我有 3 种方法，一个“驱动程序”方法来启动递归，递归`mergeSort`方法和一个`merge`方法。根据我更改的变量，我的输出要么是全零数组，要么是按相同顺序排列的原始数组。唯一的问题是原始`mergeSort`方法必须接受一个数组，并且该`merge`方法不能返回任何内容。非常感谢任何帮助

```
import java.util.Arrays;
public class merge2 {
    public static void main(String[] args){
        int []a={22,45,1,4,89,7,0};
        mergeSort(a);
        System.out.println(Arrays.toString(a));                 
    }

    public static void mergeSort(int [] a){
        mergeSort(a,0,a.length-1);
    }

    public static void mergeSort(int []a, int beg,int end){
        if(beg<end){
            int mid=(beg+end)/2;
            mergeSort(a,beg,mid);
            mergeSort(a,mid+1,end);
            merge(a,beg,mid,end);
        }
    }

    private static void merge(int []a, int beg, int middle, int end){
        int [] d=new int[a.length];
        int mid=middle+1; //start of second half of array
        for(int i=0;i<d.length;i++){
            if(beg<=middle && mid<=end){  
                if(a[beg]<=a[mid]) {
                d[i]=a[beg];
                beg++;
                } else if(a[mid]<=a[beg]){
                        d[i]=a[mid];
                        mid++;
                }
            }else if(beg>middle){ 
                d[i]=a[mid];
                mid++;
            }else if(mid==a.length){
                d[i]=a[beg];
                beg++;
            }
        }
        for(int w=0;w<d.length;w++){
            a[w]=d[w];
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T19:47:30.767

这是 mergeSort 方法的伪代码。我看到您忽略了一个或两个要素的基本情况：

```
if (sublist has only one value)
   do nothing
else if (sublist has two values)
   switch if necessary
else    // recursion, divide list into two halves
   Find midpoint of current sublist
   Call mergeSort and process left sublist
   Call mergeSort and process right sublist
   merge left and right sublists 
```

至于您的合并方法，它是创建一个新数组而不是修改现有数组。我建议使用 ArrayLists 来实现它：

```
private void merge(int[] a, int first, int mid, int last)
  {
    ArrayList<Integer> left = new ArrayList<Integer>(mid - first + 1), right = new ArrayList<Integer>(last - mid);
    for(int m = first; m <= mid; ++m)   //initialize left sublist
    {
      left.add(a[m]);
    }
    for(int m = mid + 1; m <= last; ++m)    //initialize right sublist
    {
      right.add(a[m]);
    }
    int i = first;
    while(!left.isEmpty() || !right.isEmpty())  //while either list has an element
    {
      if(left.isEmpty())
      {
        a[i++] = right.remove(0);
      }
      else if(right.isEmpty())
      {
        a[i++] = left.remove(0);
      }
      else if (left.get(0) < right.get(0))
      {
        a[i++] = left.remove(0);
      }
      else
      {
        a[i++] = right.remove(0);
      }
    }
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T21:21:56.257

好的，我修复了您的解决方案。您的主要问题是在线标记为`//<= here`。当`mid`运行结束索引时，您没有从`a`to分配值，`d`因此它被填充`0`. 您必须替换`==`为`>=`才能解决此问题。
我还用索引修复了你的工作。您不必在每个级别上运行整个阵列。您的复杂性也会以这种方式受到影响。我认为它大约`O(n^2)`。只运行在此递归级别上处理的数组的一部分以保持`O(nlog(n))`复杂性就足够了。

固定算法如下

```
public static void main(String[] args){
    int []a={22,45,1,4,89,7,0};
    mergeSort(a);
    System.out.println(Arrays.toString(a));

}

public static void mergeSort(int [] a){
    mergeSort(a,0,a.length-1);
}

public static void mergeSort(int []a, int beg,int end){
    if(beg<end){
        int mid=(beg+end)/2;
        mergeSort(a,beg,mid);
        mergeSort(a,mid+1,end);
        merge(a,beg,mid,end);
    }
}

private static void merge(int []a, int beg, int middle, int end){
    int [] d=new int[a.length];
    int mid=middle+1; //start of second half of array
    int beg1=beg;
    for(int i=beg1;i<=end;i++){
        if(beg<=middle && mid<=end){  
            if(a[beg]<=a[mid]) {
            d[i]=a[beg];
            beg++;
            } else if(a[mid]<=a[beg]){
                    d[i]=a[mid];
                    mid++;
            }
        }else if(beg>middle){         
            d[i]=a[mid];
            mid++;
        }else if(mid>=end){ //<= here
            d[i]=a[beg];
            beg++;
        }
    }
    for(int w=beg1;w<=end;w++){
        a[w]=d[w];
    }
} 
```

# c# - 将 ListBox 的 SelectedItem 属性绑定到两个单独的 TextBox

> ID：15370045
> 
> 赞同：0
> 
> 时间：2013-03-12T19:10:26.917
> 
> 标签：c#, .net, wpf, binding, listbox

所以我有一个列表框，其中包含未经检查的模具打印列表。列表框包含一个字符串列表；模具打印具有“'row'x'col'”的命名约定。

示例：02x09、05x06 等。

我还有两个文本框，允许用户手动输入他们想要移动到的印模，但不是一个用于整个字符串的框，而是一个行文本框和一个列文本框。

示例：txtRow x txtCol；行文本框中的 02 和列文本框中的 09 会将您带到 02x09。

我希望用户还能够从未经检查的模具打印列表框中选择打印，并能够从那里加载该地图。最简单的方法是将列表框的 SelectedItem 属性绑定到两个 (row,col) 文本框。这很容易，因为当用户输入打印的行和列坐标时，所有映射模具打印的处理已经完成。

最大的问题：

如何将两个文本框绑定到列表框的单个 SelectedItem 属性？

换句话说，

如果列表框中当前的SelectedItem是“02x09”，如何将“02”绑定到行文本框，将“09”绑定到列文本框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T19:34:20.207

我建议您使用元素绑定和转换器从 02x09 转换值。所以你的一个文本框将有前半部分，第二个将有另一半。

这是一个示例代码。为你。

```
<Window x:Class="WPFTest.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:converters="clr-namespace:WPFTest"
        Title="MainWindow" Height="350" Width="525">
    <Window.Resources>
        <converters:MyConverter x:Key="converter"/>
    </Window.Resources>
        <Grid>
        <ListBox ItemsSource="{Binding Items}" Margin="0,0,360,0" x:Name="list">

        </ListBox>
        <TextBox Text="{Binding  Path=SelectedValue,Converter={StaticResource converter},ConverterParameter=0, ElementName=list}" Height="25" Width="100"/>
        <TextBox Text="{Binding  Path=SelectedValue,Converter={StaticResource converter}, ConverterParameter=1,ElementName=list}" Height="25" Width="100" Margin="208,189,209,106"/>

    </Grid>
</Window>

 public partial class MainWindow : Window
    {
        public List<string> Items { get; set; }

        public MainWindow()
        {
            InitializeComponent();
            if (Items == null)
                Items = new List<string>();
            Random ran = new Random();
            for (int i = 0; i < 10; i++)
            {
                Items.Add(ran.Next(1, 5) + "x" + ran.Next(5, 10));
            }

            this.DataContext = this;
        }

    }

    public class MyConverter : IValueConverter
    {
        public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            if (value == null)
                return "Null";

            var values = value.ToString().Split(new string[] { "x" }, StringSplitOptions.None);

            int x = 0;
            if (int.TryParse(parameter.ToString(), out x))
            {
                return values[x].ToString();
            }

            return "N/A";
        }

        public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            throw new NotImplementedException();
        }
    } 
```

# android - 覆盖Android中文本选择（在WebView中）的默认上下文操作栏

> ID：15370047
> 
> 赞同：27
> 
> 时间：2013-03-12T19:10:33.377
> 
> 标签：android, android-webview, contextual-action-bar

我想覆盖现有的默认上下文操作栏（CAB）以进行文本选择。我的意思是，当在 webview 上选择一些文本时，我想用我自己的按钮显示我自己的 CAB。我尝试使用 Android 文档实现 CAB。OnLongClickListener 不会捕获 Web 视图中的文本选择事件。捕获文本选择的事件是什么？是否可以隐藏默认 CAB 并在文本选择中显示我的 CAB？

```
childWebView.setOnLongClickListener(new OnLongClickListener() {
        @Override
     // Called when the user long-clicks on someView
        public boolean onLongClick(View view) {
            if (mActionMode != null) {
                return false;
            }

            // Start the CAB using the ActionMode.Callback defined above
            mActionMode = startActionMode(mActionModeCallback);
            view.setSelected(true);
            return true;
        }
    }); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-02-07T11:33:07.500

我已经能够解决这个问题。我也遇到了这个问题，在网上找不到任何解决方案。

因此，如果您设置了 LongClick 侦听器，Webview 将完全停止显示选择。在深入研究Webview代码后，我发现它正在调用WebView的方法startRunMode并传递一个SelectActionCallbackMode类的实例。

我只是扩展了 Webview 类并重写了 startRunMode 方法，如下所示：

```
public ActionMode startActionMode(ActionMode.Callback callback) 
{
    actionModeCallback = new CustomizedSelectActionModeCallback();
    return super.startActionMode(actionModeCallback);
} 
```

这迫使 Webview 显示我的回调，而不是显示 Webview 的默认回调。这确保了选择像以前一样顺利，每次选择时都会显示我的 CAB。唯一需要注意的是，我必须自己编写代码来解除 CAB。

在 4.1、4.2 和 4.3 设备上测试。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-23T11:27:08.213

官方文档[选择 | Android 开发人员](http://developer.android.com/design/patterns/selection.html)指出：

> **选择 CAB 操作**
> 
> 您可以决定哪些动作和元素出现在 CAB 中。使用[操作栏模式](http://developer.android.com/design/patterns/actionbar.html)中的指南来决定哪些项目要显示在顶层，哪些项目要移动到操作溢出。
> 
> **动态调整 CAB 动作** 在大多数情况下，您需要在用户向选择中添加更多项目时动态调整 CAB 中的动作。适用于单个选定数据项的操作不一定适用于同一种类的多个选定数据项。

不幸的是，引用中包含的链接链接到一个部分，该部分也只包含一般信息而没有实际进入细节。更糟糕的是，它链接回[选择 | Android 开发者](http://developer.android.com/design/patterns/selection.html)页面。

再看一点，我从 Lars Vogel那里找到[了这个教程。](http://www.vogella.com/articles/AndroidActionBar/article.html#menu_contextual_actionbar)我引用（格式化我的）：

> 上下文操作模式激活一个临时`ActionBar`覆盖应用程序`ActionBar`的特定子任务的持续时间。
> 
> 上下文动作模式通常通过选择一个项目或通过长按它来激活。
> 
> `startActionMode(`要实现这一点，请在View 或您的 Activity 上调用) 方法。此方法获取一个`ActionMode.Callback`负责上下文生命周期的对象`ActionBar`。
> 
> `View`您还可以通过该 `registerForContextMenu(view)`方法将上下文菜单分配给 a 。如果用户“长按”视图，也会激活上下文菜单。`onCreateContextMenu()`每次激活上下文菜单时都会调用该方法，因为上下文菜单在使用后会被丢弃。您应该更喜欢上下文操作模式而不是使用上下文菜单。

最突出的参考资料提到我们可以使用`registerForContextMenu(view)`. 我没有复制答案，而是找到了[J. Pablo Fernández的](https://stackoverflow.com/users/6068/j-pablo-fernandez)[这个答案](https://stackoverflow.com/a/436821/170781)，其中包含有关如何应用您自己的 CAB 的代码示例。注册一个新的上下文菜单应该覆盖任何默认菜单，但我不确定。由于我目前无法对此进行测试，我很高兴听到这是否解决了您的问题。

# cakephp - Cakephp：应用程序上线后如何更改盐和密码种子

> ID：15370054
> 
> 赞同：1
> 
> 时间：2013-03-12T19:11:03.710
> 
> 标签：cakephp

我有一个部署好的 cakephp 1.3 应用程序运行没有问题。但是我正在切换项目的开发团队，并且为了安全起见，我想更改盐和密码。

这是怎么做到的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T21:42:57.850

> **注意：** 以下步骤不一定要按顺序完成。 **先通读一遍，了解整个过程！**
> 
> **如果您一步一步地进行，您将破坏当前用户登录您网站的能力。** 例如，您应该在执行 #2 之前构建 #3 和 #4 - 但按以下顺序解释时更容易理解：

**1）保留旧盐**

首先，复制您当前的盐，并将其保存在某个地方。

**2) 更改站点盐值**

然后，进入您的`app/Core/config.php`文件并更改盐值。

> **警告：**
> 
> 请记住，任何以前散列的密码...等都将无效。没有真正的方法可以让他们回来，所以此时，您需要为用户创建某种 segway 以获取新密码。

**3) 创建一个 segway 供用户验证**

创建一个用户可以进入的流程并输入他们的用户名/旧密码，以便您验证是否使用`Security::hash($oldPass, 'sha1', $oldSalt);`. [[更多细节在这里]](http://book.cakephp.org/2.0/en/core-utility-libraries/security.html#Security%3a%3ahash)

**4）让他们创建一个新密码**

一旦您确认他们是他们所说的人，您就可以允许他们创建一个新密码，就像您在使用网站 $salt 值之前所做的那样。

*如果我有任何语法错误（在我脑海中），请原谅，但这应该让您了解一种处理它的方法。

# c++ - 仅提取正则表达式“表达式”的特定部分

> ID：15370060
> 
> 赞同：0
> 
> 时间：2013-03-12T19:11:24.257
> 
> 标签：c++, regex, pattern-matching, string-literals

我有一个表达式列表，我想验证并提取其中的特定部分。
这些表达式可以有以下任意组合：

*   字符串文字（可能转义，但不一定），用单引号表示
*   任意数量的*非*字符串文字且
    *非*行尾字符的字符，用分号表示

有效的表达式将在冒号之后开始，并以分号结束。
一个有效表达式的例子是：

```
: This is an *expression* 'with' and 'without \'escaped\' string literals', 
which ends with a semicolon!; 
```

从那个表达式中，我想提取：

*   `This is an *expression*`
*   `'with'`
*   `and`
*   `'without \'escaped\' string literals'`
*   `, which ends with a semicolon!`

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T20:57:07.253

谈到 RectangleEquals，答案是 std::regex re_("'(?:\\.|[^'])*'|[^']+");

# paypal - 托管 PayPal 布局 C 的 url

> ID：15370065
> 
> 赞同：0
> 
> 时间：2013-03-12T19:11:42.793
> 
> 标签：paypal

我使用布局 C 创建了一个 PayPal 托管的结帐页面，这是在 iframe 中使用的布局。我根本无法确定要在 iframe 中使用的 url！

我意识到答案可能就在我的眼皮底下，但相信我，我已经看过了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T16:30:11.387

[https://ppmts.custhelp.com/app/answers/detail/a_id/929/](https://ppmts.custhelp.com/app/answers/detail/a_id/929/)在第五部分有答案，底部有一个完整的基本演示 zip。

我建议通读该页面，但简而言之：

```
<iframe src='https://payflowlink.paypal.com?SECURETOKEN=.......&SECURETOKENID=........&MODE=TEST' width='490' height='565'
border='0' frameborder='0' scrolling='no' allowtransparency='true'></iframe> 
```

# java - Eclipse 错误：导入项目时“读取项目描述文件失败”

> ID：15370066
> 
> 赞同：3
> 
> 时间：2013-03-12T19:11:49.190
> 
> 标签：java, android, eclipse, ubuntu

我刚刚搬到 Ubuntu，并认为将我的 Android 项目从我的旧工作区导入到我在 Ubuntu 上的新工作区是一件简单的事情。哈！

我转到：新建-> 项目...-> 现有代码中的 Android 项目。选择“复制到工作区”。

我收到的错误是：

刷新本地更改时出现问题 使用本地文件系统刷新资源时出现错误。无法读取“MyProject”的项目描述文件 (.project)。该文件已在磁盘上更改，现在包含无效信息。在描述文件恢复到有效状态之前，项目将无法正常运行。

我检查了项目文件，没有任何问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T19:16:58.007

我建议使用您的工作区手动浏览文件夹并删除从您的项目中复制的任何内容。然后将您的项目“复制”到工作区（也可以手动）。下一个：

```
New -> Project... -> Android Project From Existing Code. 
```

但是不要再选中“复制到工作区”，因为你有它。那应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-10T00:56:37.273

在升级我的机器后导入 git 存储库并在 Windows 7 上自动添加项目时出现此错误（我还同时更改了 Eclipse 版本）。

我从我的 Eclipse 工作区中删除了这些项目，然后重新导入它们，然后它就可以工作了。

# sql-server-2008 - 无法弄清楚为什么经典 ASP 脚本会跳过集合中的第一条记录

> ID：15370068
> 
> 赞同：0
> 
> 时间：2013-03-12T19:11:57.243
> 
> 标签：sql-server-2008, asp-classic, legacy-code

我在这里拥有的是一个非常老套的经典 ASP (VBscript) 脚本的一部分，我需要将数据提取出来，以便将其移动到另一个源中。我遇到了麻烦，因为它似乎正在跳过它正在拉出的作品中的第一条记录。它似乎没问题，直到它达到只有一个值的记录，然后它似乎假装它是空的并继续前进。如果它有多个关联的记录，它会呈现它们，跳过第一个，然后继续。

此处的此脚本显示与列表关联的类别。（该部分未显示）

```
<%

If intCategoryID = "" Then
intCategoryID = request("ID")
End If
'Response.Write("Bus ID for Category: " & intCategoryID)
set rstCategories = nothing

intCountComma = 0
intFiveCat = 0

Set rstCategories = Server.CreateObject( "ADODB.Recordset" )

If blnFr = 1 Then
strSQL = "SELECT ID, Case Name_Displayed_L2 When '' Then Name_Displayed Else Name_Displayed_L2 End As Name_Displayed, Attraction_Sub_Types.FriendlyURL"

Else
strSQL = "SELECT ID, Name_Displayed, Attraction_Sub_Types.FriendlyURL"

End If

strSQL = strSQL & " From Attraction_Sub_Types Inner Join Attractions_Attraction_Sub_Types_Link ON Attractions_Attraction_Sub_Types_Link.Sub_TypeID = Attraction_Sub_Types.ID"
strSQL = strSQL & " Where Attractions_Attraction_Sub_Types_Link.AttractionID = '" & intCategoryID & "'"

set rstCategories = Conn.execute(strSQL)

If Not rstCategories.BOF And Not rstCategories.EOF Then
rstCategories.MoveFirst
'Do While (Not rstCategories.EOF AND intFiveCat <= 5 )
Do While (intFiveCat <= 5 )
intFiveCat = intFiveCat + 1

If Not rstCategories.EOF Then

If intCountComma <> 0 Then  

strNameDisplayed = rstCategories("Name_Displayed")

strSQL2 = "SELECT ID, Name_Displayed, Attraction_Types.FriendlyURL"
strSQL2 = strSQL2 & " From Attraction_Types Inner Join Attraction_Types_Sub_Types_Link ON Attraction_Types_Sub_Types_Link.TypeID = Attraction_Types.ID"
strSQL2 = strSQL2 & " Where Attraction_Types_Sub_Types_Link.Sub_TypeID = '" & rstCategories("ID") & "'"
set rstMaincats = Conn.execute(strSQL2)

If Not rstMaincats.EOF Then

strMainName = rstMaincats("Name_Displayed")
Else
strMainName = "unsorted"
End If

Response.Write("<td>")

%>

<%=strMainName%>-><%=strNameDisplayed%>

<% Response.Write("</td>")  

    Else
        intCountComma = intCountComma + 1
    End If

  rstCategories.MoveNext

'Do While ( intFiveCat <= 5 )

'Response.Write("<td>")

'Response.Write("</td>")

'intFiveCat = intFiveCat + 1
'Loop

Else
%>
<td>&nbsp;</td>
<%
End If

    Loop

Else 
Do While (intFiveCat <= 4 )
intFiveCat = intFiveCat + 1
%>
<td>&nbsp;</td>
<%
Loop
End If

If rstCategories.State = adStateOpen Then
rstCategories.Close
End If

Set rstCategories = Nothing
%> 
```

这张图片是这篇文章的输出：http: [//i.imgur.com/BAwSxWk.jpg](http://i.imgur.com/BAwSxWk.jpg)你那些显示空白的，应该有 1 个类别而不是显示没有，而其他显示的是第二个类别和向前。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T11:18:39.960

看起来您指定了要跳过的 rstCategories 的第一行

```
If intCountComma <> 0 Then 
    'ya-di-ya-di 
else 
    intCountComma = intCountComma + 1 
End If 
rstCategories.MoveNext 
```

*（换句话说，第一行没有完成 ya-di-ya-di）*

# sql-server - 返回指定日期列之间的行

> ID：15370069
> 
> 赞同：0
> 
> 时间：2013-03-12T19:11:58.010
> 
> 标签：sql-server, sql-server-2008, tsql

```
MatchDate   ColA    ColB    PossibleDate
01/01/2012  ABC     123     01/01/2012
01/01/2012  ABC     123     09/01/2012
01/01/2012  ABC     123     01/15/2013
09/01/2012  ABC     123     01/01/2012
09/01/2012  ABC     123     09/01/2012
09/01/2012  ABC     123     09/13/2012
09/01/2012  ABC     123     10/11/2012
09/01/2012  ABC     123     01/15/2013
01/15/2013  ABC     123     01/01/2012
01/15/2013  ABC     123     09/01/2012
01/15/2013  ABC     123     01/15/2013
01/15/2013  ABC     123     02/22/2013
08/15/2012  XYZ     777     08/15/2012
08/15/2012  XYZ     777     08/28/2012
08/15/2012  XYZ     777     10/11/2012
08/15/2012  XYZ     777     01/15/2013
01/15/2013  XYZ     777     01/15/2013
01/15/2013  XYZ     777     08/15/2012 
```

我正在寻找的结果：

```
MatchDate   ColA    ColB    PossibleDate
01/01/2012  ABC     123     NULL
09/01/2012  ABC     123     09/13/2012
09/01/2012  ABC     123     10/11/2012
01/15/2013  ABC     123     02/22/2013
08/15/2012  XYZ     777     08/28/2012
08/15/2012  XYZ     777     10/11/2012
01/15/2013  XYZ     777     NULL 
```

它应该为每个唯一的“MatchDate、ColA 和 ColB”列以及介于 MatchDate 和 PossibleDate 之间的任何“可能日期”返回行。

我添加了注释来解释为什么每列有效以及为什么无效：

```
 MatchDate  ColA    ColB    PossibleDate    (Notes)
01/01/2012  ABC     123     01/01/2012      (Not valid as it's MatchDate already exists for "ABC, 123")
01/01/2012  ABC     123     09/01/2012      (Not valid as it's MatchDate already exists for "ABC, 123")
01/01/2012  ABC     123     01/15/2013      (Not valid as it's MatchDate already exists for "ABC, 123")
09/01/2012  ABC     123     01/01/2012      (Not valid as it's MatchDate already exists for "ABC, 123")
09/01/2012  ABC     123     09/01/2012      (Not valid as it's MatchDate already exists for "ABC, 123")
09/01/2012  ABC     123     09/13/2012      (VALID as it's PossibleDate is NOT a MatchDate and it's between 09/01/2012 and the next possible MatchDate of 01/15/2013 for "ABC, 123")
09/01/2012  ABC     123     10/11/2012      (VALID as it's PossibleDate is NOT a MatchDate and it's between 09/01/2012 and the next possible MatchDate of 01/15/2013 for "ABC, 123")
09/01/2012  ABC     123     01/15/2013      (Not valid as it's MatchDate already exists for "ABC, 123")
01/15/2013  ABC     123     01/01/2012      (Not valid as it's MatchDate already exists for "ABC, 123")
01/15/2013  ABC     123     09/01/2012      (Not valid as it's MatchDate already exists for "ABC, 123")
01/15/2013  ABC     123     01/15/2013      (Not valid as it's MatchDate already exists for "ABC, 123")
01/15/2013  ABC     123     02/22/2013      (VALID as it's PossibleDate is NOT a MatchDate and it's between 01/15/2013 and the next possible MatchDate, which doesn't exist as it's the largest MatchDate for "ABC, 123")
08/15/2012  XYZ     777     08/15/2012      (Not valid as it's MatchDate already exists for "XYZ, 777")
08/15/2012  XYZ     777     08/28/2012      (VALID as it's PossibleDate is NOT a MatchDate and it's between 08/15/2012 and the next possible MatchDate of 01/15/2013 for "XYZ, 777")
08/15/2012  XYZ     777     10/11/2012      (VALID as it's PossibleDate is NOT a MatchDate and it's between 08/15/2012 and the next possible MatchDate of 01/15/2013 for "XYZ, 777")
08/15/2012  XYZ     777     01/15/2013      (Not valid as it's MatchDate already exists for "XYZ, 777")
01/15/2013  XYZ     777     01/15/2013      (Not valid as it's MatchDate already exists for "XYZ, 777")
01/15/2013  XYZ     777     08/15/2012      (VALID as it's PossibleDate is NOT a MatchDate and it's between 01/15/2013 and the next possible MatchDate, which doesn't exist as it's the largest MatchDate for "XYZ, 777") 
```

在此先感谢...希望它不会太混乱。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T20:02:33.420

不知道我是否理解所有，请试试这个。

[sqlfiddle](http://sqlfiddle.com/#!3/09a9f/8)

```
WITH cte AS
(SELECT *, 
   NexMatchDate = ISNULL(
       (SELECT MIN(MatchDate) 
        FROM t t2 
        WHERE t2.MatchDate > t.MatchDate
         AND t2.ColA = t.ColA AND t2.ColB = t.ColB)
     ,'99991231')
 FROM t
)
, datelist AS
(SELECT DISTINCT MatchDate, ColA, ColB
 FROM t
)
SELECT d.MatchDate, d.ColA, d.ColB, c.PossibleDate
from datelist d
LEFT JOIN cte c
  ON d.MatchDate = c.MatchDate
  AND d.ColA = c.ColA
  AND d.ColB = c.ColB
  AND c.PossibleDate > c.MatchDate AND c.PossibleDate < c.NexMatchDate
ORDER BY 1,2,3 
```

# ios - UISearchBar 上方的线

> ID：15370070
> 
> 赞同：4
> 
> 时间：2013-03-12T19:11:59.150
> 
> 标签：ios, uitableview, uisearchbar

很长一段时间以来，我一直试图删除 UISearchBar 上方的有害行，但无济于事。它在浅色背景上看起来很暗或在深色背景上看起来很亮：

![在此处输入图像描述](../Images/d1b9cb3b34d4bb5345052d025a99b3e0.png) ![在此处输入图像描述](../Images/081b46997884473af897804eb47a5f43.png)

我看了[这个问题](https://stackoverflow.com/questions/14228010/get-rid-of-line-above-uitableview)，但它与分隔符或下拉刷新无关。当我最终决定放弃并寻求帮助时，我再次开始四处寻找并找到了一个非常简单（尽管可能不完全直观）的解决方案，所以我想我会分享它以防其他人面临同样的问题。我将搜索栏配置如下：

```
// I tried this drawing method
[self.searchBar setBackgroundImage:[[UIImage imageNamed:@"linen_bg_bar.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 0, 0, 0)]];
// and this one.
[self.searchBar setBackgroundColor:[UIColor colorWithPatternImage:[UIImage imageNamed:@"linen_bg_bar.png"]]];
// Same problem either way.

[self.searchBar setPlaceholder:NSLocalizedString(@"Filter", @"placeholder text in the search bar")];
[self.searchBar setSearchFieldBackgroundImage:[[UIImage imageNamed:@"linen_textfield_search.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(16, 16, 16, 16)] forState:UIControlStateNormal];
[self.searchBar setImage:[UIImage imageNamed:@"linen_icon_search.png"] forSearchBarIcon:UISearchBarIconSearch state:UIControlStateNormal];
self.table.tableHeaderView = self.searchBar;
[self.table setBackgroundColor:[UIColor colorWithPatternImage:[UIImage imageNamed:@"linen_bg_dark.png"]]]; 
```

根据[这篇文章的](https://stackoverflow.com/a/8229991/970132)建议，我尝试在其上绘图，但似乎绘图*仍被*渲染到线以下。

```
CGRect rect = self.searchBar.frame;
UIView *lineView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, rect.size.width, 2)];
lineView.backgroundColor = [UIColor redColor]; 
```

请参阅带有我的红色“掩盖”行的示例：

![在此处输入图像描述](../Images/515a56a8ab0e4fc63dde2c3d57d6b5ab.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-13T15:14:14.913

我**不确定**这是否可行，但它是有道理的，因为必须为覆盖视图设置*负y 值。*

```
searchBar.clipsToBounds = YES; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-04-25T15:09:47.850

希望这可以帮助：

```
self.searchBar.layer.borderColor = Color.CGColor;
self.searchBar.layer.borderWidth = 1; 
```

您可以在 searchController 中找到 searchBar 属性

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-01-20T09:15:09.080

在我的情况下，我正在创建一个`UISearchBar`in 代码并将其作为右栏按钮项放置在导航栏中。将背景图像设置为空图像会删除 1 像素线。

```
searchBar.backgroundImage = UIImage() 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T19:12:28.757

事实证明，我所要做的就是将覆盖线的框架调整为从搜索栏*上方*1pt 开始，然后我的搜索栏顶部有一条漂亮的 1pt 灰线。

```
CGRect rect = self.searchBar.frame;
UIView *lineView = [[UIView alloc] initWithFrame:CGRectMake(0, -1, rect.size.width, 1)];
lineView.backgroundColor = [UIColor colorWithHexString:@"353535" alpha:1.0];
[self.searchBar addSubview:lineView]; 
```

瞧。

# ios - 将 uiimage 分配给 imageview

> ID：15370071
> 
> 赞同：0
> 
> 时间：2013-03-12T19:12:00.913
> 
> 标签：ios, uiimage, imageview

我无法执行一个非常简单的语句。它令人沮丧一小时。

```
self.mainImageView.image = [UIImage imageNamed:@"Radio"]; 
```

我试过了`[self.mainImageView setImage:[UIImage imageNamed:@"Radio"]];`

连接都很好。并且已经有一个分配给它的图像。我需要更改分配给此视图的图像。

尝试了各种排列`[UIImage imageNamed:@"Radio.png"];`

还尝试先分配图像，然后将其分配给图像视图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T19:15:33.987

这是两个原因之一：

a) imageView 未在界面生成器中连接，我假设您正在使用它，因此未初始化

b) 应用程序包中不存在该图像。

为了检查哪个原因指向您，请尝试运行 an`NSLog(@"%@", self.mainImageView);`以查看它是否是 a)，或者，在创建之前 NSLog 图像，并检查该文件是否存在于 Xcode 的文件管理器（左侧菜单）中。

# java - 过滤进入我的数组列表的内容

> ID：15370073
> 
> 赞同：0
> 
> 时间：2013-03-12T19:12:14.530
> 
> 标签：java, arraylist

我正在编写一个读取 .txt 文件并将每个单词存储到数组中的程序。到目前为止我有这个。它存储好...

```
 BufferedReader fr = new BufferedReader(new FileReader(file));
        ArrayList<String> words = new ArrayList<String>(50);
        String[] line;
        String str;
        while((str=fr.readLine()) != null)
        {
            line = str.split("(?s)\\s+");
            for(String word : line)
                words.add(word);
        }
        if(words.size() > 49){
            System.out.println("To many words in file.");
            System.exit(1);
        }
       for(String word : words){

            if(word.length() > 12){

            }
        }
        // Printing the content of words
        for(String word : words)
            System.out.println("sting entry:" + word);
    } 
```

但它存储太多。当我使用：

```
 for(String word : words)
     System.out.println("sting entry:" + word); 
```

检查并查看所有存储的内容，结果如下：

```
sting entry:it's
sting entry:yes-man
sting entry:murdered
sting entry:ok
sting entry:
sting entry:Hello
sting entry:Friend 
```

这很好，除了它将返回值作为一个单词读取并将其存储在数组中。我该如何防止这种情况？

另外，当我在它的时候......如果你注意到我的代码中有一些随机代码：

```
 for(String word : words){

        if(word.length() > 12){

        }
    } 
```

我想让它`ArrayList`也不会存储超过 12 个字符的字符串值。我该如何实现呢？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T19:18:44.090

此时在您的代码中，执行以下操作：

```
for (String word : line)
{
  word = word.trim();
  if (word.length > 0 && word.length <= 12) { words.add(word); }
} 
```

您也可以在其中放置其他过滤器，并在您知道如果有空间时将单词放入列表中时检查是否有太多单词。

# c# - 如何使用事件处理程序创建 BMI 计算器

> ID：15370076
> 
> 赞同：0
> 
> 时间：2013-03-12T19:12:31.437
> 
> 标签：c#, asp.net, event-handling

我对 aspx 比较陌生，并被分配了一项小任务来创建 BMI 计算器。这个计算器需要在一页内有两种形式（一种用于公制，一种用于英制/标准英尺、英寸和磅。我使用小型事件处理程序使这两种形式正常工作，但是在制作事件时我完全迷失了“计算”和“清除”按钮的处理程序。对于任务的第一部分，我需要为每个按钮设置一个单独的事件处理程序。我知道有一种方法可以使用单个事件处理程序，但我不允许在这个时候这样做！

我目前编写的代码。为了节省一些时间，我将只发布一种形式，即英制/标准形式。很抱歉，如果它很乱：

```
<form id="US" runat="server" visible="true">
   <div style="background-color:#4DB8FF; width:350px; height:300px; margin:auto; text-align:center;">
        <h4>
            Body Mass Index Calculator 
            <asp:Button id="btnUS" runat="server" text="US" OnClick="btnUS_Click" /> 
            <asp:Button id="btnMetric" runat="server" Text="Metric" OnClick="btnMetric_Click" /> <br />

            <script runat="server">
                protected void btnUS_Click(object sender, EventArgs e)
                {
                    this.US.Visible = true;
                    this.Metric.Visible = false;
                }

                protected void btnMetric_Click(object sender, EventArgs e)
                {
                    this.US.Visible = false;
                    this.Metric.Visible = true;
                }

            </script>
        </h4>

                  <asp:label ID="lbl1" Text="Height:" runat="server" />
                     <asp:TextBox ID="heightus" runat="server" />feet<br />
                     <asp:TextBox ID="heightus1" runat="server" />inch(es)<br />
                  <asp:Label ID="lbl2" Text="Weight:" runat="server" />
                     <asp:TextBox ID="weightus" runat="server" />lbs<br />
                <br />
                     <asp:Button ID="calcUS" Text="Calculate" runat="server" />
                     <asp:Button ID="clearUS" Text="Clear" runat="server"/> 
                <br /><br />
                  <asp:Label ID="lbl3" Text="Results:" runat="server" />
                     <asp:TextBox ID="resultus" runat="server" /> <br />

    </div>
</form> 
```

如您所见，有三 (3) 个文本框保存计算信息。英尺、英寸和磅文本框。我需要收集放置在这些框中的信息并使用它来计算个人 BMI。

任何帮助将不胜感激！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T19:28:46.737

这就是我要做的： id="US" runat="server" visible="true"> 体重指数计算器

```
 <script runat="server">
            protected void btnUS_Click(object sender, EventArgs e)
            {
                this.US.Visible = true;
                this.Metric.Visible = false;
            }

            protected void btnMetric_Click(object sender, EventArgs e)
            {
                this.US.Visible = false;
                this.Metric.Visible = true;
            }
             protected void calcUS_Click()
        {
              //do the computation here
              resultus.text = //put the results here
        }
        </script>
    </h4>

              <asp:label ID="lbl1" Text="Height:" runat="server" />
                 <asp:TextBox ID="heightus" runat="server" />feet<br />
                 <asp:TextBox ID="heightus1" runat="server" />inch(es)<br />
              <asp:Label ID="lbl2" Text="Weight:" runat="server" />
                 <asp:TextBox ID="weightus" runat="server" />lbs<br />
            <br />
                 <asp:Button ID="calcUS" Text="Calculate" runat="server" 
    onclick="calcUS_Click" />
                 <asp:Button ID="clearUS" Text="Clear" runat="server"/> 
            <br /><br />
              <asp:Label ID="lbl3" Text="Results:" runat="server" />
                 <asp:TextBox ID="resultus" runat="server" /> <br />

</div> 
```

# jquery - jQuery 中的动态翻转按钮

> ID：15370077
> 
> 赞同：0
> 
> 时间：2013-03-12T19:12:34.163
> 
> 标签：jquery, css

我的页面上有问号帮助链接。每个都位于具有相同类名和属性的 div 内。该属性用于从我的数据库中选择适当的文本。下面的代码抓取问号图像及其相应的文本：

```
echo "<div class=helptab att=runcampaign>".$help->GetHelpTab()."</div>"; 
```

这个函数的 php 代码在这里：

```
public function GetHelpTab() {
$helptab = "<div id=helptabs><img src=../images/help_tab.jpg>";
$helptab .= "<div id=helpwindow></div></div>";
return $helptab;

} 
```

我的页面包含多个帮助选项卡 div。当每个都滚动时，它会显示相应的文本。保存文本的文本窗口（帮助窗口）也会显示出来。但问题是窗口总是位于同一个位置。我需要它与适当的问号框一起显示。这是我的 jquery 来实现这一点：

```
$('.helptab').mouseenter(function() {

var classname = $(this).attr('att');
ShowText(classname);

});

function ShowText(classname) {

$.post('../lib/helptabtext.php', {
classname: classname,

}, function(data) {

if(data) {
    $('#helpwindow').show();
    $('#helpwindow').html(data);
}

}, 'text');

} 
```

# html - 如何在电子邮件中将表格转换为pdf文件

> ID：15370080
> 
> 赞同：0
> 
> 时间：2013-03-12T19:12:40.010
> 
> 标签：html, forms, pdf

是否可以编写一个 html 表单（使用 jquery 验证和所有其他提示和工具），当按下“发送”按钮时，它会将此表单的 PDF 发送到电子邮件......以供参考和打印！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T19:43:01.070

当您说“..it send...”时，“it”很可能是您的服务器发送 PDF，而不是 .js 文件中的 jQuery 代码。在此处阅读以了解更多信息...

[通过 mailto URI 附加文件](https://stackoverflow.com/questions/2372036/attach-file-through-mailto-uri)

# c# - .NET Dictionary 实现如何与可变对象一起使用

> ID：15370081
> 
> 赞同：8
> 
> 时间：2013-03-12T19:12:42.463
> 
> 标签：c#, .net, data-structures, hashtable

我知道不建议使用“可变”对象（其 GetHashCode() 方法在用作[Dictionary](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)中的键时可以返回不同结果的对象）。

以下是我对实现为哈希表的字典如何工作的理解：

例如，当我添加新密钥时`dict.Add(m1, "initially here was m1 object");`，`dict`计算`m1`使用该`GetHashCode()`方法的哈希码。然后它进行一些内部计算，最后将这个对象放入其内部数组的某个位置。

`dict[m1]`例如，当我使用键索引获取值时，`dict`再次计算哈希码。然后它进行一些内部计算，它给了我一个位于其内部数组内部计算位置的对象。

但我认为有一个我找不到的错误。

所以让我们假设我有这个代码：

```
 class MutableObject
    {
         Int32 m_value;

         public MutableObject(Int32 value)
         {
             m_value = value;
         }

         public void Mutate(Int32 value)
         {
             m_value = value;
         }

         public override int GetHashCode()
         {
             return m_value;
         }
   }

   static void Main(string[] args)
   {
         MutableObject m1 = new MutableObject(1);
         MutableObject m2 = new MutableObject(2);

         var dict = new Dictionary<MutableObject, String>();
         dict.Add(m1, "initially here was m1 object");
         dict.Add(m2, "initially here was m2 object");

         Console.WriteLine("Before mutation:");
         Console.WriteLine("dict[m1] = " + dict[m1]);
         Console.WriteLine("dict[m2] = " + dict[m2]);

         m1.Mutate(2);
         m2.Mutate(1);

         Console.WriteLine("After mutation:");
         Console.WriteLine("dict[m1] = " + dict[m1]);
         Console.WriteLine("dict[m2] = " + dict[m2]);

         Console.ReadKey(true);
   } 
```

当我调用`Mutate`方法时，键被交换。所以我认为它会给出交换的结果。但实际上这一行：`Console.WriteLine("dict[m1] = " + dict[m1]);`抛出 KeyNotFoundException，我不明白为什么。显然我在这里遗漏了一些东西......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-12T19:24:53.340

> .NET Dictionary 实现如何与可变对象一起使用

它没有。[Dictionary](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)的文档指出：

> 只要一个对象被用作 中的键`Dictionary<TKey, TValue>`，它就不能以任何影响其哈希值的方式发生变化。

由于您在对象中更改对象时`Dictionary`将无法正常工作。

至于为什么，不难看出。我们放入一个对象。假设哈希码是`1`. 我们将对象放`1`入哈希表的桶中。现在该对象从 Dictionary 外部发生变异，因此它的值（和哈希码）是`2`. 现在，当有人将该对象提供给字典的索引器时，它会获取哈希码，看看它是`2`，然后在`2`桶中查找。那个桶是空的，所以它说，“对不起，没有元素”。

现在让我们假设创建了一个新对象，其值和散列为`1`. 它被传递给 Dictionary，它看到哈希是`1`. 它在`1`存储桶中查找，发现该索引处确实有一个项目。它现在用于`Equals`确定对象是否实际上相等（或者这是否只是哈希冲突）。

现在，在您的情况下，它会在这里失败，因为您没有 override `Equals`，您使用的是比较引用的默认实现，并且由于这是一个不同的对象，它不会具有相同的引用。但是，即使您更改它以比较值，*第一个对象也被突变为具有 的值`2`，而不是`1`，因此无论如何它都不会匹配。其他人建议修复此`Equals`方法，您确实应该这样做，*但它仍然无法解决您的问题*。

一旦对象发生变异，找到它的唯一方法就是如果发生变异值是哈希冲突（这是可能的，但不太可能）。如果不是，那么根据 相等的任何东西`Equals`都不会知道检查正确的桶，并且检查正确的桶的任何东西都不会根据 相等`Equals`。

我一开始提到的引用不仅仅是一个最佳实践。对字典中的项目进行变异不仅是出乎意料的、奇怪的或表现不佳的。 *它只是行不通*。

现在，如果对象是可变*的，但在字典中没有发生突变，那*很好。这可能有点奇怪，*人们*可能会说这是不好的做法，即使它有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T19:16:45.983

进行字典查找以具有相同的哈希码是不够的。由于哈希冲突是可能的，因此键也必须与正在查找的索引相同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T19:18:12.083

您的`MutableObject`课程不会覆盖`Equals(object)`. 因此使用引用相等（从基类继承`System.Object`）。

第`Dictionary<,>`一个（快速）找到具有正确哈希码的任何键。然后它检查每个候选键以检查其中一个是否`Equals`是它正在搜索的键。

因此`Equals(object)`和`GetHashCode()`应该一起被覆盖。如果只覆盖其中一个，编译器会*发出警告*。

一旦密钥在 中时密钥的哈希码发生突变`Dictionary<,>`，该密钥将（可能）错放在 中`Dictionary<,>`，在错误的“桶”中，因此丢失。它不会被找到，因为搜索它总是发生在它不位于的存储桶中。

在此示例中，密钥丢失了，因此可以再次添加：

```
var dict = new Dictionary<MutableObject, string>();

var m = new MutableObject(1);

dict.Add(m, "Hello");

m.Mutate(2);

dict.Add(m, "world");

foreach (var p in dict)
    Console.WriteLine(p);

var otherDict = new Dictionary<MutableObject, string>(dict); // throws 
```

我实际上已经看到了这样的异常，在`Dictionary<,>`使用现有项目初始化一个时`Dictionary<,>`（两者都使用密钥类型的默认值`EqualityComparer<>`）。

# vba - VBA Excel：IF then 语句运行循环

> ID：15370100
> 
> 赞同：0
> 
> 时间：2013-03-12T19:13:44.067
> 
> 标签：vba, excel

我是 VBA 新手，但阅读书籍以提高。目前，我正在从列“A”中获取列，并将它们用作标识符以在另一列中运行 IF ELSEIF 语句。

基本上，`range(A1:A3)`每个单元格中都会存在值“ERIC”[A1 = ERIC，A2 = ERIC...]，其中`range(B1:B3)`将是三个不同的整数值 [B1 = 2，B2 = 9...]。我需要为范围“ERIC”找到这些整数中的较大者，并将范围“ERIC”的最大值放入单元格（C1）中。

`range(A4:A6)`然后对与整数范围(B4:B6) [B4 = 1, B5 = 4...] 相关的值“Sally”重复该过程。然后最大值将进入单元格（C4）我有大约 40 个名字。

请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T21:19:01.613

这应该按照您的要求进行。它假设你在`Sheet 1`，你的名字在`Column A`，值在`Column B`。

```
 Public Sub FindNameAndGreatestValue()
    Dim nameColumnRowCount As Integer
    Dim nameColumn As Integer
    Dim valueColumn As Integer
    Dim outputColumn As Integer
    Dim currentName As String

    nameColumnRowCount = Cells(Rows.Count, 1).End(xlUp).Row
    currentName = ""
    nameColumn = 1     '1 = A - change this to column that has names
    valueColumn = 4    '4 = D - change this to the column that has values
    outputColumn = 5   '5 = E - change this to column that should contain output
    Dim currentLargestForName As Integer
    Dim currentNameStartRow As Integer
    currentLargestForName = -999
    currentName = Cells(1, nameColumn).Value
    currentNameStartRow = 1

    Dim currentRow As Integer
    For currentRow = nameColumn To nameColumnRowCount + 1
        'if last known name is the same as the current row's name
        If StrComp(currentName, Cells(currentRow, nameColumn).Value, vbTextCompare) = 0 Then
            'if current rows number is larger than the last known largest number
            If currentLargestForName < CInt(Cells(currentRow, valueColumn).Value) Then
                currentLargestForName = CInt(Cells(currentRow, valueColumn).Value)
            End If
        Else
            'drop into here if the names no longer match, meaning a new name was found.
            'output the largest known number from the previous name into the first row of that name
            Cells(currentNameStartRow, outputColumn).Value = currentLargestForName
            currentNameStartRow = currentRow    'save the row this new name starts at for number output later
            currentLargestForName = CInt(Cells(currentRow, valueColumn).Value)
            currentName = Cells(currentRow, nameColumn).Value
        End If
    Next
End Sub 
```

**前**

![在此处输入图像描述](../Images/8cb83084b2adb7826d83d393e8feef26.png)

**后**

![在此处输入图像描述](../Images/c681bb280f124d32a1f31322c68ddcc5.png)

# mysql - ActiveRecord 不更新属性

> ID：15370102
> 
> 赞同：0
> 
> 时间：2013-03-12T19:13:50.040
> 
> 标签：mysql, ruby-on-rails, activerecord, attributes, save

这是一个代码片段及其结果输出。代码似乎更新了属性，但是当我在数据库中手动检查记录时，没有任何变化。.changed? 证实了这一点。返回假。我做错了什么？

```
class Ticket < ActiveRecord::Base
##+-----------------+-----------------------+------+-----+---------+-------+
##| Field           | Type                  | Null | Key | Default | Extra |
##+-----------------+-----------------------+------+-----+---------+-------+
##| ticketid        | bigint(20) unsigned   | NO   | PRI | NULL    |       |
##| ticketnumber    | bigint(20) unsigned   | NO   |     | NULL    |       |
##| contactname     | char(40)              | YES  |     | NULL    |       |
##| department      | char(40)              | YES  |     | NULL    |       |
##| tech            | char(40)              | YES  |     | NULL    |       |
##| timeopened      | char(18)              | YES  |     | NULL    |       |
##| timelastchanged | char(18)              | YES  |     | NULL    |       |
##| mintuesopen     | mediumint(8) unsigned | YES  |     | NULL    |       |
##| searchtermlist  | varchar(255)          | YES  |     | NULL    |       |
##+-----------------+-----------------------+------+-----+---------+-------+

attr_accessible :searchtermlist, :minutesopen, :timelastchanged, :tech

end

....

thisticket = Ticket.find_by_ticketid(ticketid)
    if thisticket != nil
        puts "---Ticket #{ticketid} Found!"
        if thisticket.searchtermlist.include? importedsearchtermlist
            puts "---Search term list current! Skipping..."
        else
            puts "---Updating search term list for ticket #{ticketid}"
            puts importedsearchtermlist
            puts thisticket.ticketid
            puts thisticket.searchtermlist
            updatedsearchtermlist = thisticket.searchtermlist << "," << importedsearchtermlist
            puts updatedsearchtermlist
            thisticket.searchtermlist = updatedsearchtermlist
            result = thisticket.save!
            puts result
            puts thisticket.changed?
            puts thisticket.searchtermlist
            sleep(60)
        end 
```

和输出：

```
---Ticket 47048 Found!
---Updating search term list for ticket 47048
virus
47048
update
update,virus
true
false
update,virus 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T19:21:47.597

使用`<<`不会更改属性值。您可以使用`thisticket.changes`不包含更改值的返回哈希进行检查。所以尝试使用：

```
updatedsearchtermlist += ( ',' + importedsearchtermlist) 
```

或者：

```
updatedsearchtermlist = [updatedsearchtermlist, importedsearchtermlist].join(',') 
```

代替：

```
updatedsearchtermlist = thisticket.searchtermlist << "," << importedsearchtermlist 
```

修复后也`changed?`将返回`false`（在您的调试结果中）。因为，您在保存记录后正在检查它。所以它总会回来`false`。

# css - WCAG 2.0 和 css 溢出：滚动属性

> ID：15370105
> 
> 赞同：1
> 
> 时间：2013-03-12T19:14:01.220
> 
> 标签：css, accessibility

我们的条款和条件页面有大量文本，我的客户希望文本“在带有滚动条的框中”，这样它就不会占用整个页面，人们只需在最后单击“是”没有实际阅读它。

我打算简单地使用带有“溢出：滚动”的 div，但它可以根据 WCAG 2.0 访问吗？我怀疑键盘可访问性可能是我们的问题，除非有办法解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T09:57:48.097

`overflow="scroll"`比`frames`和`iframe`s 更容易访问。与往常一样，测试、测试、测试，但您绝对走在正确的轨道上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T20:15:58.540

带有内部滚动条的 div 对所有用户来说同样烦人，尤其是残疾人，严格来说，根据 WCAG 2.0 不会无法访问

由用户代理（浏览器和辅助技术）提供类似滚动条的机制，残疾人也可以使用，[UAAG](http://www.w3.org/WAI/intro/uaag.php)是 MS、NVDA、Google 或 Mozilla 等供应商必须尊重的与该主题相关的建议。

当然，如果一个机制在许多 UA 中出现故障，即使您的内容根据 WCAG 2.0 仍然可以访问，您最好找到更好的解决方案。

# jquery - Jquery将偏移量设置为0不起作用

> ID：15370114
> 
> 赞同：1
> 
> 时间：2013-03-12T19:14:29.620
> 
> 标签：jquery, css, jquery-ui

我有一个工具提示，只有在未选中复选框时才会弹出按钮单击。我正在使用 JQuery 设置按钮相对于标签的位置。如果选中该复选框，我将隐藏工具提示，然后在上述相同情况下显示它。

```
 $('#chkbox').change(function(){
        if(($('#chkbox').attr('checked')=="checked") && $('#tooltip').is(':visible')==true){
            $('#tooltip').hide();
        }
});

    $('#Button').click(function(){  
        if(!($('#chkbox').attr('checked')))
        {
            var lbloffset = $('#Label').offset();
            $('#tooltip').offset({top:0,left:0});
            $('#tooltip').offset({top:lbloffset.top-25,left:lbloffset.left+$('#Label').width()});
            $('#tooltip').show();

        }
    }); 
```

工具提示隐藏在选中的复选框上，但是当我再次取消选中它并单击按钮时，它应该在我清除 $('#tooltip').offset({top:0,left:0}); 的相同位置显示工具提示 位置并再次重置它。但这并没有发生，而是工具提示将新的偏移位置添加到旧的偏移位置，并将其显示在页面的其他位置。我不确定为什么会这样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T19:20:47.023

您只需要设置`.offset`一次。我不清楚你想要它去哪里，但也许这就是你想要的：

```
var lbloffset = $('#Label').offset();
$('#tooltip').offset({top:lbloffset.top-25,left:lbloffset.left+$('#Label').width()}); 
```

# javascript - 没有 CORS 的跨域 PUT

> ID：15370115
> 
> 赞同：1
> 
> 时间：2013-03-12T19:14:29.847
> 
> 标签：javascript, cross-domain, gdata, cors, gdata-api

我的仅限客户端的 javascript 应用程序想要使用 gdata API。Gdata 写入是 PUT。

我可以使用 JSONP 读取 gdata。简单的。

我可以 POST 因为表单帖子不受[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)的约束。我什至可以用表格做[一些可爱](https://stackoverflow.com/questions/7925260/how-to-use-iframe-to-cross-domain-post-request)的事情。

但我的 API 不需要 POST，它需要 PUT。

如何在没有 CORS 的情况下跨域、仅在客户端放置（因为 gdata 不支持 CORS）？

* * *

更新：作为冰雹玛丽，我尝试[按照指示](https://developers.google.com/gdata/docs/2.0/basics)在 jquery XHR POST 中使用覆盖动词`X-HTTP-Method-Override: PUT`，但这不起作用；XHR 尊重 POST 的同源策略。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T19:24:45.870

您使用的是哪个 API？您可以尝试使用[GData JavaScript 客户端](https://code.google.com/p/gdata-javascript-client/)（已弃用）或更新的[Google APIs Client Library for JavaScript](https://code.google.com/p/google-api-javascript-client/)。根据您查询的 API，后者可能支持也可能不支持。

# php - PHP 成员的页面在没有用户凭据的情况下工作？

> ID：15370117
> 
> 赞同：-2
> 
> 时间：2013-03-12T19:14:43.053
> 
> 标签：php, mysql

我有这个 php 成员页面，它将显示来自 mysql 数据库的非常基本的信息。

我注意到的问题是，如果您退出并访问会员页面，即[http://www.mywebsite.co.uk/member.php?id=17](http://www.mywebsite.co.uk/member.php?id=17)并从浏览器刷新页面，它会将您登录用户帐户。它在哪里和是谁并不重要。它只会将访问者登录到 ID 为 17 或 PAGE Refresh 上的任何其他 ID 的帐户！

这是我的 member.php 代码

```
 <?php 
error_reporting(E_ALL);
ini_set('display_errors', '1');
?>
<?php
session_start(); // Must start session first thing
// See if they are a logged in member by checking Session data
$toplinks = "";
if (isset($_SESSION['id'])) {
    // Put stored session variables into local php variable
    $userid = $_SESSION['id'];
    $username = $_SESSION['username'];
    $toplinks = '<a href="member.php?id=' . $userid . '">' . $username . '</a> &bull; 
    <a href="member.php">Account</a> &bull; 
    <a href="logout.php">Log Out</a>';
} else {
    $toplinks = '<a href="join_form.php">Register</a> &bull; <a href="login.php">Login</a>';
}
?>
<?php
// Use the URL 'id' variable to set who we want to query info about
$id = preg_replace("[^0-9]", "", $_GET['id']); // filter everything but numbers for security
if ($id == "") {
    echo "Missing Data to Run";
    exit();
}
//Connect to the database through our include 
include_once "config/connect.php";
// Query member data from the database and ready it for display
$sql = "SELECT * FROM members WHERE id='$id' LIMIT 1";
$query = mysqli_query($db_conx, $sql);
$count = mysqli_num_rows($query);
if ($count > 1) {
    echo "There is no user with that id here.";
    exit(); 
}
while($row = mysqli_fetch_array($query, MYSQLI_ASSOC)){
$username = $row["username"];
$_SESSION['username'] = $username;
$userid = $row["id"];
$_SESSION['id'] = $userid;
// Convert the sign up date to be more readable by humans
$signupdate = strftime("%b %d, %Y", strtotime($row['signupdate']));
}
?> 
```

任何人都可以发现发生这种情况的原因？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T19:18:27.087

因为显然你让他们登录了。检查这一行；

```
$_SESSION['id'] = $userid; 
```

你这条线的主要目的是什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T19:18:46.810

```
// Use the URL 'id' variable to set who we want to query info about
$_SESSION['id'] = $userid; 
```

这就是那里的问题。如果您希望您的应用程序安全，请不要从 url 中提取数据。

在您检查他们的用户名和密码是否正确后，设置一个等于他们的用户 ID 的变量，并使用该值让他们登录。

# java - 按名称获取线程

> ID：15370120
> 
> 赞同：28
> 
> 时间：2013-03-12T19:14:49.817
> 
> 标签：java, android, multithreading

我有一个多线程应用程序，我通过`setName()`属性为每个线程分配一个唯一的名称。现在，我希望功能可以直接使用相应的名称访问线程。

类似于以下功能：

```
public Thread getThreadByName(String threadName) {
    Thread __tmp = null;

    Set<Thread> threadSet = Thread.getAllStackTraces().keySet();
    Thread[] threadArray = threadSet.toArray(new Thread[threadSet.size()]);

    for (int i = 0; i < threadArray.length; i++) {
        if (threadArray[i].getName().equals(threadName))
            __tmp =  threadArray[i];
    }

    return __tmp;
} 
```

上述函数检查所有正在运行的线程，然后从正在运行的线程集中返回所需的线程。也许我想要的线程被中断了，那么上面的函数就不起作用了。关于如何合并该功能的任何想法？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2014-12-11T01:59:21.953

皮特答案的迭代..

```
public Thread getThreadByName(String threadName) {
    for (Thread t : Thread.getAllStackTraces().keySet()) {
        if (t.getName().equals(threadName)) return t;
    }
    return null;
} 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-03-12T19:48:48.100

您可以使用[ThreadGroup](http://docs.oracle.com/javase/6/docs/api/java/lang/ThreadGroup.html)找到所有*活动*线程：

*   获取当前线程的组
*   `ThreadGroup.getParent()`通过调用直到找到具有空父组的组，沿着线程组层次结构向上工作。
*   调用`ThreadGroup.enumerate()`以查找系统上的所有线程。

这样做的价值完全让我无法理解......你可能会用命名线程做什么？除非你在`Thread`应该实现的时候进行子类`Runnable`化（从一开始就是草率的编程）。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-12T19:30:23.257

我最喜欢 HashMap 的想法，但是如果你想保留 Set，你可以迭代 Set，而不是通过转换为数组的设置：

```
Iterator<Thread> i = threadSet.iterator();
while(i.hasNext()) {
  Thread t = i.next();
  if(t.getName().equals(threadName)) return t;
}
return null; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-11T17:57:46.197

这就是我在此基础上的[做法](http://nadeausoftware.com/articles/2008/04/java_tip_how_list_and_find_threads_and_thread_groups)：

```
/*
    MIGHT THROW NULL POINTER
 */
Thread getThreadByName(String name) {
    // Get current Thread Group
    ThreadGroup threadGroup = Thread.currentThread().getThreadGroup();
    ThreadGroup parentThreadGroup;
    while ((parentThreadGroup = threadGroup.getParent()) != null) {
        threadGroup = parentThreadGroup;
    }
    // List all active Threads
    final ThreadMXBean threadMXBean = ManagementFactory.getThreadMXBean();
    int nAllocated = threadMXBean.getThreadCount();
    int n = 0;
    Thread[] threads;
    do {
        nAllocated *= 2;
        threads = new Thread[nAllocated];
        n = threadGroup.enumerate(threads, true);
    } while (n == nAllocated);
    threads = Arrays.copyOf(threads, n);
    // Get Thread by name
    for (Thread thread : threads) {
        System.out.println(thread.getName());
        if (thread.getName().equals(name)) {
            return thread;
        }
    }
    return null;
} 
```

# php - 无法通过 php 在服务器上上传图像

> ID：15370122
> 
> 赞同：0
> 
> 时间：2013-03-12T19:14:55.753
> 
> 标签：php

所以我在 php 中有这个代码，它采用表单的结果：

```
<?php if(isset($_POST['upload']) && $_FILES['userfile']['size'] > 0)
{
    $fileName = $_FILES['userfile']['name'];
    $tmpName  = $_FILES['userfile']['tmp_name'];
    $fileSize = $_FILES['userfile']['size'];
    $fileType = $_FILES['userfile']['type'];

    $path = $_SERVER['DOCUMENT_ROOT'] . "/uploads/";
    //$path = "uploads/";
    $path = $path . basename( $_FILES['userfile']['name'] );

    is_uploaded_file( $_FILES['userfile']['tmp_name'] ) or error( 'not an HTTP upload' ); 

    if (move_uploaded_file($_FILES['userfile']['tmp_name'], $path ) )
    {
        echo "The file ". basename( $_FILES['userfile']['name'] ) . " has been uploaded, and your information has been added to the directory"; 
    } 
    else
    {
        echo "Sorry, there was a problem uploading your file -->" . $path;
    }

    } ?> 
```

我遇到的问题是代码通过`is_uploaded_file`但执行时失败`move_uploaded_file`

这段代码是我在许多 php 论坛和教程中找到的代码。

任何人都知道为什么它不上传到我的服务器上。

编辑：

这是带有 html 代码的完整 .php 文件：

```
<!DOCTYPE html>
<html>
<head>
    <title>Montréal Accessible</title>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no"/>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="vendors/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.0/themes/base/jquery-ui.css">
    <link rel="stylesheet" type="text/css" href="stylesheets/home.css"/>
    <link rel="stylesheet" type="text/css" href="stylesheets/grid.css">
    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD9wqmeX_YlaRLZYrnNDOkHcXvlXa9cATo&sensor=false"></script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
    <script src="http://code.jquery.com/ui/1.10.0/jquery-ui.js"></script>
    <script type="text/javascript" src="scripts/home.js"></script>

    <?php if(isset($_POST['upload']) && $_FILES['userfile']['size'] > 0)
    {
        $fileName = $_FILES['userfile']['name'];
        $tmpName  = $_FILES['userfile']['tmp_name'];
        $fileSize = $_FILES['userfile']['size'];
        $fileType = $_FILES['userfile']['type'];

        $path = $_SERVER['DOCUMENT_ROOT'] . "/uploads/";
        //$path = "uploads/";
        $path = $path . basename( $_FILES['userfile']['name'] );

        is_uploaded_file( $_FILES['userfile']['tmp_name'] ) or error( 'not an HTTP upload' ); 

        if (move_uploaded_file($_FILES['userfile']['tmp_name'], $path ) )
        {
            echo "The file ". basename( $_FILES['userfile']['name'] ) . " has been uploaded, and your information has been added to the directory"; 
        } 
        else
        {
            echo "Sorry, there was a problem uploading your file -->" . $path;
        }

        $myvars = '';
        $ch = curl_init( $url );
        curl_setopt( $ch, CURLOPT_POST, 1);
        curl_setopt( $ch, CURLOPT_POSTFIELDS, $myvars);
        curl_setopt( $ch, CURLOPT_FOLLOWLOCATION, 1);
        curl_setopt( $ch, CURLOPT_HEADER, 0);
        curl_setopt( $ch, CURLOPT_RETURNTRANSFER, 1);

        $upImgResponse = curl_exec( $ch );*/
    } ?>

    <script type="text/javascript">
        window.onload = function()
        {
            loginForm = document.forms[0];
            loginForm.onsubmit=function()
            {
                var name = prompt ("Enter your name","")

                if( loginForm[0].value == '' )
                {
                    alert('Please enter a username');
                    return false;
                }
                else 
                {
                    loginForm.action='../Symfony/web/app.php/login/' + name + '/' + ...;
                    return true;
                }
            }
        }
    </script>

</head>
<body>
    <div id="container">
        <div id="headerBar">
            <div id="homeLogoColumn">
                <div id="homeLogo">Montréal Accessible</div>
            </div>
            <div id="searchBarColumn">
                <div id="searchBar" class="input-append">
                  <input id="appendedInputButton" type="text">
                  <a id="searchButton" class="btn btn-primary" href="#"><i class="icon-search icon-white"></i></a>
                </div>
            </div>
            <div id="anchorsColumn">
                        <a class="lastAnchor" href="#">À propos</a>
                        <a href="#">Contact</a>
                        <a href="#">Aide</a>
                        <!--<form name="input" action="" method="post">
                        <a href="#">Connexion</a><input type="submit" value="Connect">
                        </form> -->

            </div>
        </div>

        <form method="post" enctype="multipart/form-data">
        <table width="350" border="0" cellpadding="1" cellspacing="1" class="box">
        <tr>
        <td width="246">
        <input type="hidden" name="MAX_FILE_SIZE" value="2000000">
        <input name="userfile" type="file" id="userfile">
        </td>
        <td width="80"><input name="upload" type="submit" class="box" id="upload" value=" Upload "></td>
        </tr>
        </table>
        </form>

        <div id="mainContent">
                <div id="paramsAndResultsColumn">
                    <div id="paramsAndResultsTabs">
                      <ul>
                        <li><a href="#paramsTab"><span>Critères</span></a></li>
                        <li><a href="#resultsTab"><span>Résultats</span></a></li>
                      </ul>
                      <div id="paramsTab"></div>
                      <div id="resultsTab"></div>
                    </div>
                </div>
                <div id="mapCanvasColumn">
                    <div id="mapCanvas"></div>
                </div>
        </div>
    </div>
</body>
</html> 
```

编辑2：

显示的错误是“抱歉，上传时出现问题...”，这意味着它会通过其他...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T19:45:53.297

感谢您的所有帮助...问题是权限问题。我使用 chmod 755 而不是 chmod 777 设置文件夹的权限

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T19:33:04.777

使用这个 ` 0) { $fileName = $_FILES['userfile']['name']; $tmpName = $_FILES['userfile']['tmp_name']; $fileSize = $_FILES['userfile']['size']; $fileType = $_FILES['userfile']['type']; 回声 $tmpName;

```
 $path = "uploads/";
    $path = $path . basename( $_FILES['userfile']['name'] );

    is_uploaded_file( $_FILES['userfile']['tmp_name'] ) or error( 'not an HTTP upload' ); 

    if (move_uploaded_file($_FILES['userfile']['tmp_name'], $path ) )
    {
        echo "The file ". basename( $_FILES['userfile']['name'] ) . " has been uploaded, and your information has been added to the directory"; 
    } 
    else
    {
        echo "Sorry, there was a problem uploading your file -->" . $path;
    }

    /*$url="http://rapliq.lerb.polymtl.ca/Symfony/web/app.php/upimg/" . $fileName . "/" . $path . "/";

    $myvars = '';
    $ch = curl_init( $url );
    curl_setopt( $ch, CURLOPT_POST, 1);
    curl_setopt( $ch, CURLOPT_POSTFIELDS, $myvars);
    curl_setopt( $ch, CURLOPT_FOLLOWLOCATION, 1);
    curl_setopt( $ch, CURLOPT_HEADER, 0);
    curl_setopt( $ch, CURLOPT_RETURNTRANSFER, 1);

    $upImgResponse = curl_exec( $ch );*/
} ?>` 
```

这个问题出在浴缸上，你不必给主根。加上确保该文件夹是可访问的。

# java - Play Framework 2.1 - 在 Play Controller 中使用 java.util.properties 的语法错误

> ID：15370124
> 
> 赞同：-1
> 
> 时间：2013-03-12T19:15:01.127
> 
> 标签：java, playframework, playframework-2.1

尝试在 Play Controller 中使用 java.util.Properties 类时，我遇到了一种奇怪的冲突，请考虑以下几点：

```
package controllers;

import play.mvc.*;
import java.util.*;

public class Simple extends Controller {

   Properties prop = new Properties();

   prop.setProperty("database", "localhost");

} 
```

在 Eclipse 中，setProperty 方法返回：

标记的语法错误，错误的构造

标记的语法错误，删除这些标记

我认为这段代码在控制器中存在一些冲突，同样的两行代码在定制包中的简单 Java 类中工作。

任何帮助将不胜感激，我是有一些 Java 经验的新手。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T19:47:52.250

将这两行放在方法块中：

```
import play.mvc.*;
import java.util.*;

public class Simple extends Controller {
    public static void pickABetterMethodName() { // Method 
       Properties prop = new Properties();
       prop.setProperty("database", "localhost");
    }
} 
```

这将解决语法问题。原因是您不能在类声明本身中包含不是方法或字段声明的代码。行为在方法中实现。[这是关于类声明](http://docs.oracle.com/javase/tutorial/java/javaOO/classdecl.html)的 Java 教程，这里是关于[方法声明](http://docs.oracle.com/javase/tutorial/java/javaOO/methods.html)。

我认为您要做的是在控制器初始化期间执行代码。如果我没记错的话，在 Play 1.x 中，这可以通过`@OnApplicationStart`装饰器（在方法上）来实现。我不确定 Play 2.x 是否仍然如此。

**编辑**：使用 Play 2.x，您可以使用[Application 全局设置](http://www.playframework.com/documentation/2.0/JavaGlobal)来执行此操作。

# c# - 在视图模型中使用 ICommand 可以吗

> ID：15370129
> 
> 赞同：12
> 
> 时间：2013-03-12T19:15:17.490
> 
> 标签：c#, wpf, mvvm

`ICommand`我们在视图模型中使用的大多数 WPF mvvm 应用程序。但它指的是`System.Windows.Input`. 所以视图模型现在与`System.Windows.Input`命名空间紧密结合。根据我的理解，视图模型应该能够在普通的 C# winform 应用程序或 asp.net 应用程序中使用。

通常我们使用以下代码行来执行命令`RelayCommand`。

```
private RelayCommand testCommand;// or private ICommand testCommand;

public ICommand TestCommand
{
    get
    {
        return testCommand ?? 
            (testCommand = new RelayCommand(param => Test()));
    }
}

public void Test()
{

} 
```

我觉得我们需要删除所有`ICommand`并使用`RelayCommand`。`System.Windows`所以我们可以从视图模型中消除命名空间。所以最终的代码看起来像这样，

```
private RelayCommand testCommand;

public RelayCommand TestCommand
{
    get
    {
        return testCommand ?? 
            (testCommand = new RelayCommand(param => Test()));
    }
}

public void Test()
{

} 
```

对这种方法有什么建议吗？或者有什么方法可以`System.Windows`从视图模型中消除命名空间？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T19:20:29.370

> 对这种方法有什么建议吗？

这仍然不能将您与`System.Windows.Input`as `RelayCommand`still must implement分离`ICommand`，即使它是间接实现它。

`ICommand`在 ViewModel 中实现是为了实用而需要做的事情之一。理想情况下，`ICommand`（或类似的接口）将在非 XAML 特定的命名空间中实现。话虽如此，它直接在[Portable Class Libraries](http://msdn.microsoft.com/en-us/library/hh563947.aspx)中得到支持，因此它不像一般的 XAML 那样依赖于*特定*框架（WPF、Silverlight、Phone 等）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-12T20:46:20.663

如果您愿意，可以很简单地避免将您的 ViewModel 耦合到 ICommand。可能不是一个坏主意，WPF 可能有一天会走上 MFC 的道路。矫枉过正？也许，但这是*一个*方法：

在您看来：

```
<StackPanel>
    <Button Command="{Binding Path=MyCommand}"> Do it! Kill me Now!</Button>
    <TextBlock Text="{Binding Path=Message}"></TextBlock>
</StackPanel> 
```

将您的 ViewModel 注入您的 DataContext，从您的视图模型中承担本机命令的责任：

```
public class ViewModel : INotifyPropertyChanged
{
    public string Message { get; set; }
    public object MyCommand { get; set; }

    public void OnMyCommand(object parameter)
    {
        Message += "I Ran something" + Environment.NewLine;
    }

    public bool CanMyCommand(object parameter)
    {
        return true;
    }

    // Injected Native Command handler
    public ViewModel(ICommandFactory factory)
    {
        MyCommand = factory.CreateInstance(OnMyCommand, CanMyCommand);
    }

    public event PropertyChangedEventHandler PropertyChanged;
} 
```

注意我使用[FODY](https://github.com/Fody)来[编织](https://stackoverflow.com/questions/189359/what-is-il-weaving)属性更改处理程序。INotifyPropertyChanged 是 System.dll 顺便说一句。

现在，绑定这个合约：

```
public interface ICommandFactory
{
    object CreateInstance(Action<object> action, Func<object, bool> predicate);
} 
```

... 给你一个原生的 Command 对象的东西；

```
public class NativeCommand : ICommand
{
    private readonly Action<object> _action;
    private readonly Func<object, bool> _predicate;

    public NativeCommand(Action<object> action, Func<object, bool> predicate)
    {
        _action = action;
        _predicate = predicate;
    }

    public bool CanExecute(object parameter)
    {
        return _predicate(parameter);
    }

    public void Execute(object parameter)
    {
        _action(parameter);
    }

    public event EventHandler CanExecuteChanged;
}

public class NativeCommandFactory : ICommandFactory
{
    public object CreateInstance(Action<object> action, Func<object, bool> predicate)
    {
        return new NativeCommand(action, predicate);
    }
} 
```

`Bind<ICommandFactory>().To<NativeCommandFactory>();`

瞧，解耦的命令。

![跑步](../Images/dde98b2cc988b23f1aef7b5a75e65b00.png)

另请注意，您的注入是在初始应用程序启动时完成的。您的 ViewModel 与您选择的任何 IoC 容器分离。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T20:00:11.663

好吧，从理论上讲，你是对的。如果 ICommand 的 nice 完全独立于 UI 平台就好了。

但从实际的角度来看，如果您在 WPF 应用程序中使用 MVVM，那么您很有可能仍然相当依赖 WPF 的数据绑定和数据模板功能。尝试将 WinForms UI 放在类似的东西之上可能需要大量的额外工作。

我过去曾参与过一些相当大的 WPF/MVVM 项目。我们认为 MVVM 是一种将 UI 的特定细节从代码中分离出来的方法——不是为了让我们可以切换到 WinForms/ASP.NET/whatever，而是为了改变我们 UI 的外观和感觉（即编辑XAML），而无需更改 ViewModel。在这方面，MVVM 工作得很好。

如果您真的关心跨多种类型的项目共享代码，最好尝试将您的通用代码放在典型的“业务层”类型的类库中，而不是视图模型中。

# ruby - Ruby：读取文件/编码错误后，Sub 没有替换我的字符串？

> ID：15370130
> 
> 赞同：1
> 
> 时间：2013-03-12T19:15:17.750
> 
> 标签：ruby, string, file, encoding, utf-16

我对编程完全陌生，并且在过去几周学习了一些 ruby​​ 教程。我需要一个程序来替换大约 600 个文件中的几个单词。目前我被困在使用 sub 和 gsub 来更改我从特定文件中读取的变量中的单词。

```
My code looks like this:

Dir.glob("items/**/*.dat") do |item_dat_file| 
  puts "working on: " + item_dat_file + " ... "
  puts
  text_full = File.read(item_dat_file)

  puts text_full
  text_full.sub!('[UNIT]', "TESTIT")
  puts text_full 
```

不幸的是，变量 text_full 的两个输出都是相同的，没有任何东西被替换。

```
 [ U N I T] #=> should be changed
...
 [ / U N I T ] 
```

我正在从 utf-16 Little Endian 编码读取文件（这是文件所属的游戏给我的）。这可能是问题吗？因为在将其读入 ruby​​ 变量后，所有字符之间都会添加空格。Ruby 告诉我 item_dat_file.encoding，该文件是 UTF-8。

非常感谢。

编辑：

我发现了一个关于用 ruby​​ 打开 UTF-16 文件的提示。我更改了代码：

```
Dir.glob("items/**/*.dat") do |item_dat_file|
  puts "working on: " + item_dat_file + " ... "
  text_full = File.open(item_dat_file, "rb:UTF-16LE:UTF-8").read
  puts text_full.sub("UNIT", "TESTIT")
  puts text_full
end 
```

现在打印的文本很好，没有更多的空格字符。但是，当写回文件时，我该如何扭转呢？最后它应该再次具有 UTF-16。

编辑2：

这是我最初的问题的解决方案。

```
Dir.glob("items/**/*.dat") do |item_dat_file|
  puts "working on: " + item_dat_file + " ... "
  text_full = File.open(item_dat_file, "r:UTF-16LE:UTF-8").read
  text_full.sub!("UNIT", "TESTIT")
  puts text_full
  File.open(item_dat_file, "w:UTF-16LE").write text_full
end 
```

按预期工作。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T19:25:03.407

我假设输入/输出在 [UNIT] 中实际上没有空格。如果是这样，您需要将它们添加到要替换的模式中。

sub 和 gsub 之间的区别在于 gsub 将替换整个文本中的所有匹配模式，而 sub 只会做第一个。

这是来自 IRB 的快速测试，显示了差异：

```
irb(main):013:0> s = '[UNIT]
irb(main):014:0'
irb(main):015:0' blah
irb(main):016:0'
irb(main):017:0' [UNIT];
irb(main):018:0' '
=> "[UNIT]\n\nblah\n\n[UNIT];\n"

irb(main):021:0> print s.sub('[UNIT]', 'TESTIT')
TESTIT

blah

[UNIT];
=> nil

irb(main):022:0> print s.gsub('[UNIT]', 'TESTIT')
TESTIT

blah

TESTIT;
=> nil 
```

编辑：如果您使用的是 Unix/Linux，或者您的系统上有类似 GNU 的工具，您可以通过 find/grep/sed 在一行中执行此操作，如下所示：

```
find . -print | grep -i "items/.*/*.dat" | xargs sed "s/\[UINT\]/TESTIT/gi" 
```

这实际上会将更改的文件打印到命令行。如果它们看起来不错，并且您想实际覆盖它们，请将“-i”作为参数添加到 sed 命令。

编辑：好的，你是绝对正确的，这是一个编码问题，所以两字节字符编码是导致字符串不匹配和打印时空格的原因。我无法在 OSX 上提取 .adm 文件，所以我下载了一个 mod 并尝试使用其中的 .dat 文件，结果如下：

```
# encoding: utf-8
Dir.glob("*.dat") do |item_dat_file| 
    puts "working on: " + item_dat_file + " ... "
    fd = File.open(item_dat_file, "rb:UTF-16LE")

    text_full = fd.read().encode("UTF-8")

    puts text_full
    text_full.gsub!("[OBJECT]", "TESTIT")
    puts text_full
end 
```

基本上，您以 UTF-16LE 格式打开文件，读取它，然后将其编码为 UTF-8。像你想要的那样修改它，然后当你必须写回它时，你可以调用：

```
text_full.encode("UTF-16LE") 
```

并将其写入文件。此示例不处理回写文件，但应该不难弄清楚。

希望这可以帮助。

# c++ - std::map 超出需要的比较

> ID：15370132
> 
> 赞同：0
> 
> 时间：2013-03-12T19:15:19.990
> 
> 标签：c++, performance, map, stl

我正在尝试 std::map （在 MinGW 和 MSVC2008 中），我使用了以下代码：

```
#include <map>
#include <string.h>
#include <iostream>
using namespace std;

class MapManager
{public:
    void insert(char* n){
        cout << "Inserting " <<  n << endl;
        m_map[n] = 0;}
    void get(char* n){
        cout << "Finding (" << n << ")" << endl;
        int x = m_map[n];}
    struct cmp_str{
       bool operator()(char const *a, char const *b){
           cout << "operator(" << a << " " << b << ")\n";
           return strcmp(a, b) < 0;}
    };
    std::map<char*,int,cmp_str> m_map;
};
int main(){
    MapManager m;
    m.insert("Abc"); m.insert("Xyz"); m.insert("123"); m.insert("987"); 
    m.get("Abc"); m.get("Xyz");
 } 
```

结果如下：

```
Inserting Abc
Inserting Xyz
operator(Abc Xyz)
operator(Xyz Abc)
operator(Abc Xyz)
operator(Xyz Abc)
Inserting 123
operator(Abc 123)
operator(123 Abc)
operator(123 Abc)
operator(Abc 123)
Inserting 987
operator(Abc 987)
operator(123 987)
operator(987 123)
operator(987 Abc)
operator(987 Abc)
operator(Abc 987)
operator(123 987)
operator(987 123)
Finding (Abc)
operator(Abc Abc)
operator(123 Abc)
operator(Abc 123)
operator(987 Abc)
operator(Abc 987)
operator(Abc Abc)
Finding (Xyz)
operator(Abc Xyz)
operator(Xyz Abc)
operator(Xyz Xyz)
operator(Xyz Xyz) 
```

奇怪的是`Inserting Xyz`需要 4 次调用才能进行比较！

```
operator(Abc Xyz)
operator(Xyz Abc)
operator(Abc Xyz)
operator(Xyz Abc) 
```

map 用于插入/查找条目的算法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T19:16:54.153

它依赖于实现，唯一的要求是`insert`和`find`/都`[]`必须是 O(log n)。^(*通常它是在)[红黑树上](http://en.wikipedia.org/wiki/Red-black_tree) 的插入/搜索，可能不完全平衡。

（请注意，作为`std::map`模板，所有实现细节都将在头文件中，您可以仔细阅读......）

* * *

[* 至少对于这个用例。]

# naming-conventions - Storyboard Segue 标识符命名约定

> ID：15370133
> 
> 赞同：44
> 
> 时间：2013-03-12T19:15:22.630
> 
> 标签：naming-conventions, uistoryboardsegue

我正在构建一个大型故事板，我想知道是否有人**为 segue identifiers 提出了有用的命名约定**。

看起来 Apple 在他们的示例中只使用了“ShowX”，其中 X 是它所显示的视图的名称。到目前为止，我更喜欢使用“PushX”或“ModalX”来跟踪它是哪种类型的过渡。任何人有任何其他技巧或提示？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2014-11-12T14:58:52.927

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-10-30T09:47:02.413

这个问题没有正确答案。这取决于口味。我减轻了可读性。不要羞于给你的 segue 标识符起一个长名字；给出长而富有表现力的名称，因为 Objective-C 是一种非常冗长的语言，它利用我们编写非常易读的代码。

我已经搜索了一个官方约定，但我找不到任何约定。这是苹果必须说的：

> 您在 Interface Builder 中为您的 segues 分配标识符。标识符是您的应用程序用来区分一个segue 和另一个segue 的字符串。例如，如果您有一个源视图控制器可以连接到两个或多个不同的目标视图控制器，您将为每个 segue 分配不同的标识符，以便源视图控制器的 prepareForSegue:sender: 方法可以区分它们并适当地准备每个 segue .

[Ray Wenderlich 网站的](http://www.raywenderlich.com/5191)另一句话：

> 给 segue 一个唯一的标识符。（它只需要在源场景中是唯一的；不同的场景可以使用相同的标识符。）

一种选择标识符名称的有趣方法（有关更多信息，请参见上面的链接）：

1.  首先编写验证 segue 标识符名称的代码，然后再在界面构建器中设置名称。我说的是这段代码：`if ([segue.identifier isEqualToString:@"SegueIdentifierName"])`

2.  构建并运行！暂时不要在 Interface Builder 中填写标识符名称。您这样做是因为您可能有多个来自一个视图控制器的传出 segue，并且您需要能够区分它们。如果在您运行并触发您正在处理的 segue 时没有任何反应，那么您的 segue 名称标识符是唯一的并且很好用。相反，如果代码执行了您不希望的转场，则您的转场名称标识符存在冲突。

3.  修复冲突 - 如果有的话。

4.  在 Interface Builder 中填写 segue 标识符并测试它是否符合您的要求。

我喜欢这个，因为它就像一个 TDD 方法：编写一个失败的测试，编写一些代码来通过失败的测试，重构，重复。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-07-18T01:14:28.670

```
"ViewControllerAToViewControllerB" 
```

例如，如果您有一个 MasterViewController 和一个 DetailViewController，则 segue 标识符可能是：

```
"MasterToDetail" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-24T13:46:46.770

我个人不会使用前面的动画类型，如果你改变动画，你需要回到代码中。但是，如果您在源控制器中将 segue 标识符声明为常量，则可以在以后更轻松地更改名称，而无需深入研究代码。

我通常使用我给控制器的名称，没有“ViewController”。所以 RatingViewController 将是“评级”作为故事板。一个例外是 unwind segues，我将它们命名为以“returnTo”开头并以目的地名称结尾的那些（“returnToRating”）。

# html - IE9 表格布局固定 colspan 不被尊重

> ID：15370134
> 
> 赞同：3
> 
> 时间：2013-03-12T19:15:23.263
> 
> 标签：html, css, internet-explorer-9

我找到了这个主题，我的主题是相关的，但不一样：

[在 IE9 的 tds 上使用 cols 和 colspan 进行表格渲染](https://stackoverflow.com/questions/14236408/table-rendering-with-cols-and-colspan-on-tds-in-ie9)

我遇到的问题是我的表中的第二个 colspan=2 没有被 IE9 读取，有趣的是它可以在 IE7 和 IE8 中找到，但不能在 IE9 中找到。也许我做错了什么，所以这里是：

HTML：

```
<table id="test">
    <tbody>
        <tr>
            <td>COLSPAN = 1</td>
            <td colspan="2">COLSPAN = 2</td>
            <td>COLSPAN = 1</td>
            <td colspan="2">COLSPAN = 2</td>
        </tr>
    </tbody>
</table> 
```

CSS：

```
#test {
    width: 100%;
    border-spacing: 20px;
    border-collapse: separate;
    table-layout: fixed;
}

#test td {
    position: relative;
    background-color: #cccccc;
    box-shadow: 3px 3px 2px rgba(0,0,0,0.5);
    padding: 10px;
} 
```

jsFiddle：http: [//jsfiddle.net/DUCPp/1/](http://jsfiddle.net/DUCPp/1/)

应该发生什么： ![在此处输入图像描述](../Images/5f8ee04370bdcb77cf22794feee7b6a7.png)

IE9 给了我什么： ![在此处输入图像描述](../Images/7d80a546f9866e9443f25c3789863db6.png)

我确信这是一个 IE9 错误，但我无法在谷歌上找到它（也许我没有搜索正确的关键字？）。任何解决方案或错误报告的链接将不胜感激！

**更新：** 我在第二个 colspan=2 列之后添加了一个额外的列，它将正确呈现。我推断如果一行中的最后一列 colspan > 1，那么它只会被渲染为 colspan = 1。

关于修复的任何想法？我现在几乎可以肯定这是一个 IE9 错误 <_<

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T19:28:45.207

呵呵……IE9……

找到了一个“修复”......想法来自：[Colspan on cell in one row 似乎阻止在所有其他行中设置 TD 宽度。为什么？](https://stackoverflow.com/questions/8835756/colspan-on-cell-in-one-row-seems-to-prevent-setting-td-width-in-all-the-other-ro)

基本上我必须添加一个空行，其中包含正确的空单元格数：

```
<table id="test">
    <tbody>
        <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td>COLSPAN = 1</td>
            <td colspan="2">COLSPAN = 2</td>
            <td>COLSPAN = 1</td>
            <td colspan="2">COLSPAN = 2</td>
        </tr>
    </tbody>
</table> 
```

不漂亮...我需要删除单元格的填充以使其不显示。叹...

jsFiddle：http: [//jsfiddle.net/DUCPp/5/](http://jsfiddle.net/DUCPp/5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-03T19:27:09.027

您要做的是在标题中通过 TH 设置列的宽度，因为浏览器将使用它来确定后续行中的表格和列的宽度。

看看下面的例子：

```
<table>
    <thead>
        <tr style="height: 0px;">
            <th style="width: 110px; height:0px;"></th>
            <th style="width: 160px; height: 0px;"></th>
            <th style="width: 210px; height: 0px;"></th>
            <th style="width: 110px; height: 0px;"></th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td colspan="3">Hello</td>
            <td>There</td>
        </tr>   
    </tbody>  
</table> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T19:24:15.620

您似乎没有为列定义任何固定宽度。你应该在之前使用这样的东西`<tbody>`：

```
<col span="6" style="width:16%;" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-03T10:11:21.643

我通过在 HTML 代码的开头添加 doctype 声明解决了类似的问题。请参阅[http://www.w3.org/QA/2002/04/valid-dtd-list.html](http://www.w3.org/QA/2002/04/valid-dtd-list.html) 我添加的具体声明是针对版本“HTML 4.01 Transitional”。即放置在初始标签之前。

希望这可以帮助？

# c++ - 缓冲区溢出、格式化字符串错误和整数溢出的 C++ 安全框架

> ID：15370135
> 
> 赞同：2
> 
> 时间：2013-03-12T19:15:23.963
> 
> 标签：c++, integer, buffer, overflow, overrun

请问有谁知道任何可以防止缓冲区溢出、格式字符串错误和整数溢出的 C++ 安全框架？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T09:53:39.267

这是当前 Microsoft 编译器的标准功能，除了格式字符串错误。这些不是真正的 C++ 错误，而是 C 错误。C++ 格式化解决方案通常是类型安全的。

# ios - 团队环境中的故事板与笔尖

> ID：15370137
> 
> 赞同：1
> 
> 时间：2013-03-12T19:15:31.117
> 
> 标签：ios, storyboard, nib

我正在阅读关于 ios 开发的大书呆子牧场书，它已经有一年了，所以只针对 ios5，但他们建议不要使用故事板，因为在团队环境中，故事板文件通常会因为太多人试图更新而产生源代码控制冲突文件，并且当您拥有多个视图控制器时，它会变得杂乱无章，并且如果没有故事板，它所帮助的事情（如 segues）并不难做到。

我想知道是否有人可以分享在团队环境中使用故事板的经验，以及他们是否更喜欢 nib

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T19:18:55.090

甚至 .xib（笔尖）在团队环境中使用也非常危险，因为任何形式的合并都可能极其困难甚至不可能，而且很多时候只需接受一组更改并重做另一组即可。因为使用 .xib 的本地化程度更高，所以它比故事板更安全，但如果您有大量编辑的文件，则值得在代码中完成所有 UI，以便可以轻松合并所有更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T19:35:39.357

正如 rooster117 指出的那样，XIB 在多开发人员环境中可能会遇到与 Storyboard 相同的问题。

您可以做一些事情来减轻复杂性，但最重要的是要意识到您的开发团队必须作为一个“团队”工作并相互沟通。我们已经在一个系统中工作，在这个系统中，多个开发人员无法真正进入并同时对相同的文件进行重大修改。我们只需要认识到 XIB 和 Storyboard 需要更多的沟通。

另一种缓解问题的方法是使用多个故事板。我不是在谈论每个故事板 1 个项目，这违背了目的；但是您不必将整个应用程序粘贴在一个故事板中。将其分解为流并将每个流放入不同的 Storyboard 文件中。如果你在不同的流程中工作，没有问题，如果你在同一个流程中工作，你很可能会说很多话，所以它应该不太可能导致问题。

XIB 会最大程度地限制它，但对于大多数团队/项目来说，这可能是矫枉过正。

# c# - 如何在多维数组迭代期间参数化具有给定维度的方法？

> ID：15370141
> 
> 赞同：1
> 
> 时间：2013-03-12T19:15:46.487
> 
> 标签：c#, multidimensional-array, iteration

我有一个函数应用于二维数组 ( `double[,]`) 的每个元素，但仅沿给定维度。

我不得不创建两个函数，因为我不知道如何将所需的维度作为参数传递给方法。我最终得到了一个“vertical_foo”和一个“horizo​​ntal_foo”函数，它们几乎相同：

```
private double[,] vertical_foo (double[,] a) {

    int height = a.GetLength(0);
    int width = a.GetLength(1);          

    var result = new double[height, weight];

    for (int i = 0; i < height; i++) {
        for (int j = 0; j < width; j++) {

            // Here I use first ("i") dimension
            int before =  Math.Max(i-1, 0);
            int after = Math.Min(i+1, height-1);
            result[i,j] = (a[after, j] - a[before, j]) * 0.5;
        }
    }
    return result;
}

private double[,] horizontal_foo (double[,] a) {

    int height = a.GetLength(0);
    int width = a.GetLength(1);          

    var result = new double[height, weight];

    for (int i = 0; i < height; i++) {
        for (int j = 0; j < width; j++) {

            // Here I use second ("j") dimension
            int before =  Math.Max(j-1, 0);
            int after = Math.Min(j+1, height-1);
            result[i,j] = (a[i, after] - a[i, before]) * 0.5;
        }
    }
    return result;
} 
```

我想要这样的签名，其中第二个参数是我要应用索引的维度：

```
private double[,] general_foo (double[,] a, int dimension) {} 
```

非常欢迎任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T19:24:20.803

沿着这些路线做某事是否可以接受？

```
int before_i = i, after_i = i;
int before_j = j, after_j = j;
switch( dimension ) {
   case 0:
      before_i = Math.max(i-1,0);
      after_i = Math.min(i+1, width-1);
      break;
   case 1:
      before_j = Math.max(j-1,0);
      after_j = Math.min(j+1, height-1);
      break;
}
result[ i, j ] = (a[after_i, after_j] - a[before_i,before_j]) * 0.5 
```

它不是非常漂亮，但至少这样你不需要两个函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T19:31:07.403

我将对此进行尝试：

```
private double[,] general_foo(double[,] a, int dimension)
{
    var w = a.GetLength(0);
    var h = a.GetLength(1);
    var result = new double[w, h];
    var otherDimension = 1 - dimension; // NOTE only works for 2D arrays
    var otherDimensionLength = a.GetLength(otherDimension);
    var dimensionLength = a.GetLength(dimension);
    for (int i = 0; i < dimensionLength; i++)
    {
        for (int j = 0; j < otherDimensionLength; j++)
        {
            var setIndexes = new int[2] { j, j };
            setIndexes[dimension] = i;

            var beforeIndexes = new int[2] { j, j };
            beforeIndexes[dimension] = Math.Max(i - 1, 0);

            var afterIndexes = new int[2] { j, j };
            afterIndexes[dimension] = Math.Min(i + 1, dimensionLength - 1);

            var beforeValue = (double)a.GetValue(beforeIndexes);
            var afterValue = (double)a.GetValue(afterIndexes);
            result.SetValue((afterValue - beforeValue) * 0.5, setIndexes);
        }
    }

    return result;
} 
```

* * *

这是一个更通用的方法。它使用了一些 lambda，因此它也可以帮助您了解 lambda 的使用。

```
// Iterates through every item in a multidementional array array
private Array MutateArray<T>(Array a, Func<T, int[], T> selector)
{
    var rank = a.Rank;
    var lengths = Enumerable.Range(0, a.Rank)
                            .Select(r => a.GetLength(r))
                            .ToArray(); // Get length of a in each dimension
    var result = Array.CreateInstance(typeof(T), lengths);
    var index = new int[a.Rank];
    foreach (T item in a) // flattens array
    {
        result.SetValue(selector(item, index), index);

        // Get next index value (I'm sure this could be improved)
        for (var d = 0; d < rank; d++)
        {
            if (index[d] == lengths[d] - 1)
            {
                index[d] = 0;
            }
            else
            {
                index[d]++;
                break;
            }
        }
    }

    return result;
}

// Your "foo" method
private double[,] generic_foo(double[,] a, int d)
{
    var upperD = a.GetUpperBound(d);
    return (double[,])MutateArray<double>(a, (x, i) =>
    {
        var prev = i.ToArray(); // clone
        prev[d] = Math.Max(prev[d] - 1, 0);

        var next = i.ToArray(); // clone
        next[d] = Math.Min(next[d] + 1, upperD);

        var prevVal = (double)a.GetValue(prev);
        var nextVal = (double)a.GetValue(next);
        return (nextVal - prevVal) * 0.5;
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T19:32:47.873

你可以传入一个委托来提取你感兴趣的维度吗？（或 lambda）

`Func<int[,],int,int[]> accessor`这里表示函数的签名（其中最后一个模板参数是返回类型）

```
 private void Working()
   {
       DoSomething(GetRow,1);

   } 
```

因此，在本例中，您希望“DoSomething”工作者连续工作。

```
 private void DoSomething(Func<int[,],int,int[]> accessor, int Idx)
   { 
       int[,] theData = {{1,1,1,1,1},{2,2,2,2,2}};           
       int[] someData = accessor(theData,Idx);
   }

   public int[] GetRow(int[,] data,int index)
   {
       List<int> numbers = new List<int>();

       for (int i = 0; i < data.GetLength(1); i++)
       {
           numbers.Add(data[index, i]);
       }
       return numbers.ToArray();
   } 
```

在上面的例子中，你得到一个 2,2,2,2,2 的一维数组

我在这里解决提取多维数组的特定部分的一般情况...您传入的方法/ lambda 提取数据的有意义的部分...

# c# - ORM 代码优先 - 在设计期间修复

> ID：15370145
> 
> 赞同：0
> 
> 时间：2013-03-12T19:16:00.503
> 
> 标签：c#, asp.net-mvc, entity-framework, ef-code-first

我在理解 MVC4 简单 Web 应用程序中的对象关系映射时遇到了一点麻烦，其中有用户及其发布的评论。一个用户必须有很多评论。所以我在`UsersContext`课堂上添加了`public DbSet<UserWork> UserComments { get; set; }`

```
public class UsersContext : DbContext
{
    public UsersContext()
        : base("DefaultConnection")
    {
    }

    public DbSet<UserProfile> UserProfiles { get; set; }
    public DbSet<UserWork> UserComments { get; set; }
}

[Table("UserProfile")]
public class UserProfile
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int UserId { get; set; }
    public string UserName { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }

    public int? UserComId { get; set; }
    [ForeignKey("UserComId")]
    public virtual UserComment UserComLog { get; set; }        
}
public class UserComment 
{
    [Key]
    public int UserComId{ get; set; }
    public int UserId { get; set; }        
    public string Comments{ get; set; }
    public DateTime postDate{get;set}
} 
```

我现在一直在意识到每天发布的所有评论是如何存储的，以便我以后可以进行查询，例如`SELECT * FROM UserComment Inner join UserProfile ON UserComment.UserId=UserProfile.UserId WHERE postDate BETWEEN (...) AND (...)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T19:26:51.997

我假设您正在使用 Code First 迁移。

似乎您需要`UserProfile`稍微编辑您的课程以允许用户拥有多个评论。你需要做`UserComLog`一个集合。像：

```
public class UserProfile
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int UserId { get; set; }
    public string UserName { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public virtual ICollection<UserComment> UserComLog { get; set; }        
} 
```

这样，您将拥有一个具有多个评论的用户。然后，`UsersContext`您可以访问 Entity Framework 为您创建的数据库表。您只需要使用您的数据上下文来编写一个 Linq 语句来访问数据。

```
var context = new UsersContext();
var comments = context.UserComments.Where(d => d.postDate > new DateTime(2013,3,12) && d.postDate < new DateTime(2013,2,12) && d.UserId == userId); 
```

`comments`将是一个`IQueryable<UserComment>`，然后您可以将其传递到循环中以显示在页面上，或者如果您愿意，可以进一步过滤。

# python - 在 python 中跟踪 csv 负载

> ID：15370147
> 
> 赞同：0
> 
> 时间：2013-03-12T19:16:06.540
> 
> 标签：python, file

我想展示处理 csv 文件的进度。我已经搜索并发现了这个： [Tracking file load progress in Python](https://stackoverflow.com/questions/468238/tracking-file-load-progress-in-python) 但这会让我的生活变得更加艰难，因为我需要处理读取的字节。另一种方法是计算行数，但我不想在开始处理之前读取行数。

我的想法是获取文件大小（OS），当我处理文件时，我得到处理的字节（应该是最快的方法）。

还有其他显示进度的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T19:18:59.643

你可以把它停在球场上，对吧？csv 只是一个文本文件，您可以从`os`模块中获取文件大小。然后，从您读入的第一行开始，您可以计算每行的大小，并估计文件中的总行数。

* * *

但是，单击您的链接，这似乎是完全相同的建议:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T19:38:42.423

我找到[了 file.tell()](http://docs.python.org/2.7/library/stdtypes.html?highlight=ftell#file.tell)但我没有使用它。它应该给出文件中的位置。

# xml - XSLT 中的秒到时间

> ID：15370152
> 
> 赞同：2
> 
> 时间：2013-03-12T19:16:28.673
> 
> 标签：xml, xslt, datetime, xslt-1.0, seconds

其实我不是在问问题。我注册了 stackoverflow 来回馈一个帮助过我很多次的社区。

如果您使用的是 XSLT 1.0，则没有内置的时间计算。我想出了将秒转换为分钟和小时的方法。我希望这可以帮助别人！

```
<xsl:template name="format-duration">
  <xsl:param name="value" />

  <xsl:variable name="minutes" select="floor($value div 60) mod 60" />
  <xsl:variable name="seconds" select="$value mod 60" />
  <xsl:variable name="hours" select="floor($value div 3600)" />

  <xsl:if test="$hours">
    <xsl:if test="$hours &lt; 10">
      <xsl:text>0</xsl:text>
    </xsl:if>
    <xsl:value-of select="$hours" />

    <xsl:text>:</xsl:text>
  </xsl:if>

  <xsl:if test="$minutes">
    <xsl:if test="$minutes &lt; 10">
      <xsl:text>0</xsl:text>
    </xsl:if>
    <xsl:value-of select="$minutes" />
    <xsl:text></xsl:text>
  </xsl:if>

  <xsl:if test="$minutes and $seconds">
    <xsl:text>:</xsl:text>
  </xsl:if>

  <xsl:if test="$seconds">
    <xsl:value-of select="$seconds" />
    <xsl:text></xsl:text>
  </xsl:if>
</xsl:template> 
```

> 编辑：您还有其他方法可以实现相同的目标吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T20:39:18.303

首先，感谢您的贡献。但是，此实现存在一些问题。秒输出不考虑前导 0，但即使这是固定的，如果任何数字恰好为 0，输出也可能不明确。例如，输入`36005`、`605`和`36300`都产生结果`10:05`。

同样，如果其中两个数字恰好为零。输入`36000`产生输出`10:`，输入`600`和`10`两者都产生结果`10`。

以下是我将如何实现此功能：

```
 <xsl:template name="format-duration">
    <xsl:param name="value" select="." />
    <xsl:param name="alwaysIncludeHours" select="false()" />
    <xsl:param name="includeSeconds" select="true()" />

    <xsl:if test="$value > 3600 or $alwaysIncludeHours">
      <xsl:value-of select="concat(format-number($value div 3600, '00'), ':')"/>
    </xsl:if>

    <xsl:value-of select="format-number(floor($value div 60) mod 60, '00')" />

    <xsl:if test="$includeSeconds">
      <xsl:value-of select="concat(':', format-number($value mod 60, '00'))" />
    </xsl:if>
  </xsl:template> 
```

这样，小时仅在非零或可选打开时才显示，并且默认包括秒，但可以通过使用参数值选择省略。这应该减少关于时间应该代表什么的歧义。

`value`如果要格式化的值是当前上下文节点，它还允许省略参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-02-13T11:06:32.820

在 XSLT 1.0 中将秒数转换为时间 (HH:MM:SS)：

```
<xsl:template name="seconds-to-time">
    <xsl:param name="seconds"/>
    <xsl:variable name="h" select="floor($seconds div 3600)"/>
    <xsl:variable name="m" select="floor($seconds div 60) mod 60"/>
    <xsl:variable name="s" select="$seconds mod 60"/>

    <xsl:value-of select="format-number($h, '00')" />
    <xsl:value-of select="format-number($m, ':00')" />
    <xsl:value-of select="format-number($s, ':00')" />
</xsl:template> 
```

# r - 在 R 中分阶段采样

> ID：15370156
> 
> 赞同：1
> 
> 时间：2013-03-12T19:16:35.820
> 
> 标签：r, sampling

我正在从人口普查数据中进行一些抽样模拟，我想分两个阶段进行抽样。

*   首先，我想对每个村庄的 25 个家庭进行抽样。
*   其次，我想从每个家庭中抽取 1 个人。

我的数据是长格式的，带有村庄标识符、家庭标识符和二进制疾病状态 ( `0 = healthy`, `1 = diseased`)。以下代码运行*蒙特卡罗模拟*，对每个村庄的 25 个人进行 3000 次抽样，并记录抽样的疟疾阳性个体的数量。

但是，我想从每个村庄的 25 个抽样家庭中抽取 1 个样本。我想不通。

[这是我的数据的链接：](https://www.dropbox.com/s/gmb46wj4fw4tk2c/sampling%20data.txt)

```
d = read.table("data.txt", sep=",", header=TRUE)
villages = split(d$malaria, d$villageid)
positives = vector("list", 3000)
for(i in 1:3000) {
    sampled = lapply(villages, sample, 25)
    positives[[i]] = lapply(sampled, sum)
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T22:04:21.467

这个怎么样？

```
replicate(3000, sum(sapply(lapply(villages, sample, 25), sample, 1))) 
```

> lapply(villages, sample, 25) -> 为所有 177 个村庄提供 25 个家庭
> sapply(., sample, 1) -> 从 177 个村庄的每个村庄的 25 个人中抽取 1 个人
> sum(.) -> 将抽样值
> 相加-> 重复相同的功能 3000 次

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T22:41:23.170

我想出了一个解决方法。它非常复杂，涉及获取数据并创建另一个数据集。（我在 Stata 中这样做是因为我的 R 能力有限。）首先，我按门牌号对数据集进行排序并将其加载到 R (d.people) 中。然后我通过按门牌号折叠旧数据集来创建一个新数据集，并将其加载到 R (d.house) 中。我分两个阶段进行抽样，首先从人员数据集中的每个家庭中抽取 1 个人。然后，在将房屋数据集与从每个家庭抽样 1 人的输出相结合后，我可以从每个村庄抽样 25 个“家庭抽样人”。

```
d.people = read.table("people data", sep=",", header=TRUE)
d.houses = read.table("houses data", sep=",", header=TRUE)

for(i in 1:3000){
    houses = split(d.people$malaria, d.people$house)
    firststage = sapply(houses, sample, 1)
    secondstage = cbind(d.houses, firststage)
    villages = split(secondstage$firststage, secondstage$village)
    sampled = lapply(villages, sample, 25)
    positives[[i]] = lapply(sampled, sum)
    } 
```

# java - 如何投射 ArrayList 到字符串

> ID：15370157
> 
> 赞同：0
> 
> 时间：2013-03-12T19:16:40.607
> 
> 标签：java

这是我的代码：

```
ArrayList<String> contentArray = new ArrayList<String>();

for(HashMap<ArrayList<String>, String> subTopicsEntry : subTopics){
    contentArray = (ArrayList<String>) subTopicsEntry.get("Content");
} 
```

它给了我错误，arraylist 不能转换为 java.lang.string。

这里有什么问题？

如果我这样做：

```
ArrayList<?> contentArray = new ArrayList<?>();

for(HashMap<?, ?> subTopicsEntry : subTopics){
    contentArray = (ArrayList<?>) subTopicsEntry.get("Content");
} 
```

有用

有什么区别 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T19:19:50.830

首先是`Arrays.asList()`回报`List<String>`，不是`ArrayList<String>`。

您必须将变量定义为：

```
List<String> contentArray = new ArrayList<String>(); 
```

但这并不是您遇到的所有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T19:31:18.590

正如评论者所指出的，您（可能）错误地声明了您的地图。也许你的意思是

```
ArrayList<String> contentArray = new ArrayList<String>(); // this initializer is unnecessary, btw

for(HashMap<String, ArrayList<String>> subTopicsEntry : subTopics){
  contentArray = subTopicsEntry.get("Content"); // Note that a cast is no longer necessary
} 
```

我质疑你是否真的想要`ArrayList`s 在这里，但没有看到你的代码的其余部分很难说。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T20:13:04.073

我的答案代码是：

```
package Examples;

import java.util.ArrayList;
import java.util.List;

public class ExampleClass
{
private List<String> _list;

@Override
public String toString() // override default method
{
    String temp = "";
    for (String s : this._list)
    {
        temp += (temp.length() == 0 ? "" : ", ") + s;
    }
    return "ExampleClass: [" + temp + "]";
}

public ExampleClass() // initialize this example class
{
    this._list = new ArrayList<>();
    this._list.add("Hello!");
    this._list.add("Ciao!");
    this._list.add("Good morning!");
    this._list.add("Good afternoon!");
}
}

/*

// some code for using example
ExampleClass ec = new ExampleClass();
// prints next text to console:
// ExampleClass: [Hello!, Ciao!, Good morning!, Good afternoon!]
System.out.println(ec.toString());

*/ 
```

祝你今天过得愉快。尤里

# c# - 现在 WebServiceHost2Factory 已死，如何从 WCF 休息服务返回错误文本？

> ID：15370161
> 
> 赞同：5
> 
> 时间：2013-03-12T19:16:55.477
> 
> 标签：c#, .net, wcf, rest

我已经看到几个对 WebServiceHost2Factory 的引用作为[用于有效](http://www.robbagby.com/rest/effective-error-handling-with-wcf-rest/)处理 WCF Rest 服务中的错误的类。显然对于那个类，我只需要抛出一个 WebProtocolException 并且响应的主体将包含相关信息。

那个班级现在似乎已经失宠了。.NET 4 堆栈中的某个地方有替代品吗？

如果出现问题，我试图弄清楚如何在对 POST 操作的响应正文中返回错误文本。关键问题在所有 * 旁边

例子：

```
[Description("Performs a full enroll and activation of the member into the Loyalty program")]
[OperationContract]
[WebInvoke(Method = "POST", UriTemplate = "/fullenroll/{clientDeviceId}",
    BodyStyle = WebMessageBodyStyle.Bare,
    RequestFormat = WebMessageFormat.Json,
    ResponseFormat = WebMessageFormat.Json)]
public MemberInfo FullEnroll(string clientDeviceId, FullEnrollmentRequest request)
{
    Log.DebugFormat("FullEnroll. ClientDeviceId: {0}, Request:{1}", clientDeviceId, request);
    MemberInfo ret = null;
    try
    {
      //Do stuff
    }
    catch (FaultException<LoyaltyException> fex)
    {
        Log.ErrorFormat("[loyalty full enroll] Caught faultexception attempting to full enroll. Message: {0}, Reason: {1}, Data: {2}", fex.Message, fex.Reason, fex.Detail.ExceptionMessage);
        HandleException("FullEnroll", fex, fex.Detail.ExceptionMessage);
    }
    catch (Exception e)
    {
        Log.ErrorFormat(
            "[loyalty full enroll] Caught exception attempting to full enroll. Exception: {0}", e);
        HandleException("FullEnroll", e);
    }
    return ret;
}

/// <summary>
/// Deals w/ the response when Exceptions are thrown
/// </summary>
private static Exception HandleException(string function, Exception e, string statusMessage = null)
{
    // Set the return context, handle the error
    if (WebOperationContext.Current != null)
    {
        var response = WebOperationContext.Current.OutgoingResponse;

        // Set the error code based on the Exception
        var errorNum = 500;
        if (e is HttpException)
            errorNum = ((HttpException)e).ErrorCode;

        response.StatusCode = (HttpStatusCode) Enum.Parse(typeof (HttpStatusCode), errorNum.ToString());
        response.StatusDescription = statusMessage;
        // ****************************************************
        // How can I return this as the body of the Web Method?
        // ****************************************************
        WebOperationContext.Current.CreateTextResponse(statusMessage);
    }

    return (e is HttpException) ? e : new HttpException(500, string.Format("{0} caught an exception", function));
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T17:44:10.177

[这个答案](https://stackoverflow.com/a/757256/238722)似乎建议使用以下内容，

```
HttpContext.Current.Response.Write(statusMessage); 
```

* * *

**编辑**- 正如[评论中提到的托比布](https://stackoverflow.com/questions/15370161/now-that-webservicehost2factory-is-dead-how-do-i-return-error-text-from-a-wcf-r#comment21917568_15464018)，`AspNetCompatibility`是必需的。

以下是打开它的方法：

```
<system.serviceModel>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true">
    <!--  ...  -->
</system.serviceModel> 
```

# java - GWT Designer 不能与 Eclipse 4.2 服务版本 2 一起使用？

> ID：15370165
> 
> 赞同：0
> 
> 时间：2013-03-12T19:17:05.287
> 
> 标签：java, gwt, eclipse-plugin, installation, gwt-designer

[在安装了 Eclipse Juno 4.2 服务版本 2（Java EE 发行版）并完全按照此处](https://developers.google.com/eclipse/docs/install-eclipse-4.2)的 GWT 安装说明之后，我正在尝试完成[本教程](https://developers.google.com/web-toolkit/tools/gwtdesigner/tutorials/loginmanager)。

但是，我既没有在 Preferences 下获得 WindowBuilder 条目，也没有在出现的新项目对话框中出现 WindowBuilder 条目。我究竟做错了什么？

我在 amd64 上运行 Ubuntu 12.04.02 LTS，我尝试过 oracle jdk 7u17 和 Ubuntu 自己的 jdk6 发行版，但无济于事......

刚刚在Win2k3中尝试过。结果完全相同。谷歌开始惹恼我了。尝试我最简单的项目之一时，GWT 2.5.1 引发错误...

更新：它在一定程度上起作用。含义：WindowBuilder 无法识别 GWT Designer 的安装，并提供安装 GWT Designer for Eclipse *3.7*。因此，设计器工具栏的 GWT 选择可能性不存在。

更新：[提交的错误](https://bugs.eclipse.org/bugs/show_bug.cgi?id=403126)。

更新：错误已关闭，无法修复。他们不在乎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T07:53:53.707

他们确实在乎。GWT 是一个神奇的开发环境，不断进化。他们必须与新版本的浏览器、Javascript 和 Eclipse 版本竞争，因此有时可能不会始终记录最新的微小事物。您尝试运行的教程适用于 GWT Designer 2.3、GPE 2.3、Eclipse 3.7 和 Java 1.6。

本教程也适用于 Juno 4.2 SR2，但有一些小的改动：

在第 1 步中，只需创建一个 Web 应用程序项目。您可以生成项目示例代码，确保一切正常，然后清理它并坚持文件夹布局。

在第 3 步中，只需添加一个类并使其扩展 com.google.gwt.user.client.ui.Composite。添加一个空的构造函数，然后**您可以像往常一样打开 GWT 设计器**，以完成其余的工作。CSS styleName 属性已得到改进。有工具提示可以指导您。

PS：我的测试是在Ubuntu12.04-32bit、WinXP-32bit和Win7-64bit下使用JDK1.7.0_17-32bit和Eclipse-32bit进行的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-18T20:38:20.027

如果设计器选项卡默认不显示，我注意到我可以通过右键单击包资源管理器上的 .java 并选择“使用...打开”“WindowBuilder 编辑器”来获取它。

# oauth-2.0 - Foursquare API 断开用户连接

> ID：15370173
> 
> 赞同：0
> 
> 时间：2013-03-12T19:17:30.290
> 
> 标签：oauth-2.0, foursquare

我的用户已授权foursquare 连接到我的应用程序，但随后在我的应用程序上删除了他们的帐户。我使用foursquare实时推送api，foursquare不断推送不再使用我的应用程序的用户的签到。现在我只是忽略它们，但我想进行 API 调用以断开这些用户与我的应用程序的连接，因此我停止接收他们的推送。我在文档中找不到任何内容。任何指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:03:20.173

Foursquare 不提供以编程方式断开用户连接的方法。这里存在安全隐患，Foursquare 用户应该能够断开其任何应用程序的唯一方法是在使用其凭据登录foursquare.com 之后。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-13T16:14:26.460

我建议没有办法做到这一点会带来更严重的安全隐患，尤其是使用实时（推送）API。大多数用户不够精明，无法进入 Foursquare.com 删除应用程序，尤其是因为应用程序可以无缝连接。一旦有人删除了应用程序，每次用户签入时让应用程序的服务器继续接收推送消息是一个隐私问题。

# netbeans - javafx 如何比较颜色？

> ID：15370174
> 
> 赞同：0
> 
> 时间：2013-03-12T19:17:31.723
> 
> 标签：netbeans, javafx

对于学校，我们需要制作名为记忆的游戏，但我的游戏并不能很好地工作。我已经拥有所有卡片，它们也可以转身，但我不知道 javafx 如何比较颜色并在颜色不匹配时将卡片转回，或者如果颜色匹配则让卡片消失。你们能帮帮我吗？这是代码的一小部分：

```
d = Rectangle {
width: bind 150
height: bind 150
x: bind 500
y: bind 20
arcWidth: 20
arcHeight: 20
fill:  Color.GREEN
stroke: Color.BLACK
strokeWidth: 1.0
onMouseClicked:function(a: MouseEvent)
        {
           if(d.fill == Color.GREEN)
            d.fill = Color1.YELLOW
         else
            d.fill = Color.GREEN
        }
}
 if(Color1.equals("yellow"))
             && (Color2.equals("yellow"))
 {
  d.setVisible(false);
  j.setVisible(false);

 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T12:36:58.007

## 版本 2.X

JavaFX 显然是*部分*开源的（[堆栈溢出参考](https://stackoverflow.com/questions/13553375/where-can-i-download-the-javafx-2-2-source-code)）。从该链接中，我找到了**2.X**版本的类中`equals()`方法的源代码：`Color`

 **```
/**
 * Indicates whether some other object is "equal to" this one.
 * @param obj the reference object with which to compare.
 * @return {@code true} if this object is equal to the {@code obj} argument; {@code false} otherwise.
 */
@Override public boolean equals(Object obj) {
    if (obj == this) return true;
    if (obj instanceof Color) {
        Color other = (Color) obj;
        return red == other.red
            && green == other.green
            && blue == other.blue
            && opacity == other.opacity;
    } else return false;
} 
```

显然，`red`、`green`、`blue`和`opacity`需要相同。

## 版本 1.X

对于**1.X**版本，我只是查看了编译的类文件，并有足够的信心说实现与 2.X 相同（下面的片段）：

```
@com.sun.javafx.runtime.annotation.Public
  public boolean equals(java.lang.Object arg0);
  4  invokestatic javafx.lang.Builtins.isSameObject(java.lang.Object, java.lang.Object) : boolean [87]
 15  instanceof javafx.scene.paint.Color [80]
 18  ifeq 121
 22  checkcast javafx.scene.paint.Color [80]
 28  invokevirtual javafx.scene.paint.Color.get$red() : float [45]
 38  invokevirtual javafx.scene.paint.Color.get$red() : float [45]
 50  invokevirtual javafx.scene.paint.Color.get$green() : float [47]
 60  invokevirtual javafx.scene.paint.Color.get$green() : float [47]
 72  invokevirtual javafx.scene.paint.Color.get$blue() : float [48]
 82  invokevirtual javafx.scene.paint.Color.get$blue() : float [48]
 94  invokevirtual javafx.scene.paint.Color.get$opacity() : float [49]
104  invokevirtual javafx.scene.paint.Color.get$opacity() : float [49] 
```

从 1.X 到 2.X的`equals()`实现**没有改变。**

## 你真正的问题

如果`Color1`并且`Color2`确实是 type `Color`，您正在将它们与 type 的对象进行比较`String`：

```
if(Color1.equals("yellow")) && (Color2.equals("yellow")) 
```

比较将在此处失败：

```
if (obj instanceof Color) 
```

因此，该`equals()`方法将始终返回 false。您应该`equals()`与另一个类型的对象一起使用`Color`。**

# angularjs - AngularJs 在运行时在 Dom 上设置控制器

> ID：15370177
> 
> 赞同：0
> 
> 时间：2013-03-12T19:17:44.370
> 
> 标签：angularjs, lazy-loading

我正在尝试在运行时在 dom 对象上设置控制器：

此处的示例代码：http: [//jsfiddle.net/2FL3z/3/](http://jsfiddle.net/2FL3z/3/)

```
<div id="ctrl1">
    <p>{{message}}</p>
    <a href="#/view1" class="btn">{{btn1}}</a>
    <a href="#/view2" class="btn">{{btn2}}</a>
</div>

<div id="ctrl2">
    <p>{{message}}</p>
    <a href="#/view1" class="btn">{{btn1}}</a>
    <a href="#/view2" class="btn">{{btn2}}</a>
</div> 
```

```
/* CONTROLLER 1 (first.js) */
define([], function () {

    function FirstController($scope) {
        $scope.message = "I'm the 1st controller!";
        $scope.btn1 = "Ctrl1 Btn 1";
        $scope.btn2 = "Ctrl1 Btn 2";
    }

    // Get a reference to div#ctrl1 and apply this controller to it.
    return FirstController;
});

/* CONTROLLER 2 (second.js) */
define([], function () {

    function SecondController($scope) {
        $scope.message = "I'm the 2nd controller!";
        $scope.btn1 = "Ctrl2 Btn 1";
        $scope.btn2 = "Ctrl2 Btn 2";
    }

     // Get a reference to div#ctrl2 and apply this controller to it.
    return SecondController;
}); 
```

```
<!-- Expected Output -->
<div id="ctrl1" ng-controller='FirstController'>
    <p>I'm the 1st controller!</p>
    <a href="#/view1" class="btn">Ctrl1 Btn 1</a>
    <a href="#/view2" class="btn">Ctrl1 Btn 2</a>
</div>

<!-- References $scope of ctrl2 -->
<div id="ctrl2" ng-controller='FirstController'>
    <p>I'm the 2nd controller!</p>
    <a href="#/view1" class="btn">Ctrl2 Btn 1</a>
    <a href="#/view2" class="btn">Ctrl2 Btn 2</a>
</div> 
```

关于如何让它发挥作用的任何建议。我正在使用[https://github.com/matys84pl/angularjs-requirejs-lazy-controllers](https://github.com/matys84pl/angularjs-requirejs-lazy-controllers)但看起来整个应用程序都根据路由路径获取控制器。我需要将应用程序分成由不同控制器控制的部分。

我读过它不赞成在控制器中修改 dom，所以我正在寻找最佳实践——也许在 routes.js 中指定 dom 元素：

```
routeConfig.config('../partials/view1.html', 'controllers/first', '#someDomElementID') 
```

我不认为 angularjs-requirejs-lazy-controllers 是这样设置的。

谢谢！

# mysql - 在mysql中按行项目分组

> ID：15370182
> 
> 赞同：1
> 
> 时间：2013-03-12T19:18:10.573
> 
> 标签：mysql

我需要一列的结果在每一行上都不同。

这是数据的显示方式：

```
Ticketnumber  Legnumber  Commission
100           1          50
100           2          50 
```

这就是我需要它出现的方式：

```
Ticketnumber  Legnumber  Commission
100           1          100
100           2          0 
```

因此，当legnumber = 1 时，我需要按ticketnumber 对佣金进行分组，但是当legnumber > 1 时，佣金应该为零。我试图写一个案例陈述无济于事。关于如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T19:21:18.977

使用`GROUP BY`和内表

```
SELECT TicketNumber, LegNumber, 
CASE WHEN LegNumber = 1 THEN 
(SELECT SUM(Commission)  
FROM MyTable WHERE TicketNumber = MT.TicketNumber 
GROUP BY TicketNumber) ELSE 0 END AS Commission 
FROM MyTable MT 
```

小提琴 - [http://www.sqlfiddle.com/#!2/00a95/6](http://www.sqlfiddle.com/#!2/00a95/6)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T19:21:51.113

您可以使用`Group By`属性

```
SELECT Table1.TicketNumber, LegNumber
, CASE WHEN LegNumber = 1 THEN SUM(Table2.Commission) ELSE 0 END AS Commission 
FROM Table1 JOIN (SELECT TicketNumber, sum(commission) as commission
                  FROM table1
                  GROUP BY TicketNumber) table2
ON TABLE1.TICKETNUMBER = table2.ticketnumber
GROUP BY Table1.TicketNumber, LegNumber
ORDER BY Table1.TicketNumber, LegNumber 
```

[SQL小提琴](http://sqlfiddle.com/#!2/592f7/8)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T19:25:32.107

试试这个

```
 SELECT TicketNumber, LegNumber, 
 CASE WHEN LegNumber = 1 
      THEN (select SUM(Commission) from Table1  group by ticketnumber   ) 
      ELSE 0 END AS Commission 
 FROM Table1 GROUP BY TicketNumber, LegNumber 
```

[**在这里演示**](http://sqlfiddle.com/#!2/976e9/2)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T21:48:10.273

我会使用这个解决方案：

```
SELECT
  t1.Ticketnumber,
  t1.Legnumber,
  CASE WHEN Legnumber=1 THEN t2.sum_commission ELSE 0 END Commission
FROM
  Table1 t1 INNER JOIN (
    SELECT Ticketnumber, SUM(Commission) sum_commission
    FROM Table1
    GROUP BY Ticketnumber
  ) t2
  USING (Ticketnumber)
ORDER BY 
  t1.Ticketnumber,
  t1.Legnumber 
```

请[在此处](http://sqlfiddle.com/#!2/cf54f/1)查看小提琴。

# python - py2exe的困难

> ID：15370186
> 
> 赞同：3
> 
> 时间：2013-03-12T19:18:22.617
> 
> 标签：python, exe, converters

有了我之前问题的一些有用答案（见下文），我决定再试一次 py2exe。

我尝试了 py2exe.org ( [http://www.py2exe.org/index.cgi/Tutorial](http://www.py2exe.org/index.cgi/Tutorial) ) 中的教程，但在第 3 步出现错误。我完全按照说明执行了 1 和 2，并放入了两个文件（你好。 py 和 setup.py）在我安装 python 的主文件夹中：D:\Programs\Python。

运行“代码”表单第 3 步时，我收到以下错误，完全在输出的底部：“ImportError: DLL load failed: %1 is not a valid Win32-application.*”我有一个截图整个输出，但我不知道在哪里上传它。

额外信息：我有 64 位 Windows 7（专业版）和 Python 2.7.3（首先我有 3.3.0，但由于某些原因降级了）。换一个版本对我来说不是什么大问题。我下载了 py2exe 0.6.9。

注意：我无法在 32 位或 64 位的 py2exe 之间进行选择。我想应该更早出现一个错误，但知道它可能很方便。

*我从荷兰语直译了最后一部分，所以它可能与英文电脑略有不同。

上一个问题：

什么是最简单的 .py 到 .exe 转换器？我尝试了一些转换器，其中 cx_Freeze 和 py2exe。使用 cx_Freeze 太复杂了（我找不到好的教程）并且 py2exe 给出了一些错误。在我尝试理解这两个中的一个或尝试另一个之前，我想要一些你认为最好的转换器的输入，我需要一个很好的教程。我几乎没有使用 cmd 的经验，如果涉及到编程/python，我还是个新手，所以我正在寻找最容易使用的转换器。如果您说我真的需要一些 cmd 经验，请指导我学习 cmd 教程/课程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T19:52:30.310

您可以使用[GUI2exe](https://code.google.com/p/gui2exe/)，这是我认为最简单的方法！

您不会对转换器了解太多，但它可以毫无问题地完成工作。

附言。GUI2exe 不是转换器，它是使用转换器的 gui！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T19:22:59.163

py2exe给你什么样的错误？这就是我使用的，它对我来说就像一个魅力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T19:26:35.077

我以前用过`py2exe`。我假设您已经看过py2exe 项目页面上的[教程？](http://py2exe.org/index.cgi/Tutorial)

[Python 库](http://www.blog.pythonlibrary.org/2010/07/31/a-py2exe-tutorial-build-a-binary-series/)页面上也有一个很好的可用。

我用于`py2exe`复杂的 Python/Qt/PyQt 应用程序。您需要知道的最重要的事情`MSVCP90.dll`是需要该文件。您可以从[Microsoft](http://www.microsoft.com/downloads/details.aspx?FamilyID=9b2da534-3e03-4391-8a4d-074b9f2bc1bf&displaylang=en)获得。然后，您需要将它和它的许可证中提到的其他文件复制到 Python DLLs 目录。py2exe 教程中提供了详细说明（[第 5 步](http://py2exe.org/index.cgi/Tutorial#Step5)）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T19:28:33.663

尝试[py2exe](http://www.py2exe.org)和[`cx-freeze`](http://cx-freeze.sourceforge.net/). 这是您将在那里找到的两个最常见的。大多数其他人通常是 cx-freeze 的衍生物

# c++ - C++ 未解析的外部符号

> ID：15370187
> 
> 赞同：6
> 
> 时间：2013-03-12T19:18:26.887
> 
> 标签：c++, class, variables, static

嗨，我是 c++ 的初学者，我有带有静态方法的类，但我无法访问它们，这给我一个错误

```
 1>------ Build started: Project: CPractice, Configuration: Debug Win32 ------
1>  Source.cpp
1>Source.obj : error LNK2001: unresolved external symbol "private: static class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > CPractice::name" (?name@CPractice@@0V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@A)
1>c:\users\innersoft\documents\visual studio 2012\Projects\CPractice\Debug\CPractice.exe : fatal error LNK1120: 1 unresolved externals
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

这是我的代码

```
#include <iostream>
#include <stdio.h>
#include <cstdlib>
#include <string>

using namespace std;

class CPractice
{
    public:
        static void setName(string s)
        {
            name = s;
        }
        static string getName()
        {
            return name;
        }
    private:
        static string name;
};

int main()
{

    CPractice::setName("Name");
    cout << "\n" << CPractice::getName();
    system("PAUSE");
    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-12T19:20:09.347

```
static string name; 
```

事实上`static`，这一行只*声明* `name`- 你也需要定义它。只需将其放在您的类定义下方：

```
string CPractice::name; 
```

如果您最终将您的类移动到相应的头文件和实现文件中，请确保将此定义放在实现文件中。它应该只在一个翻译单元中定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T19:22:06.607

我认为您正在尝试使用 进行编译`gcc`，而您应该使用`g++`. 请参阅[g++ 和 gcc 有什么区别？](https://stackoverflow.com/a/172592/187954)了解更多信息。

您还需要`string CPractice::name;`在您的类定义下方添加。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T19:22:10.920

您只`name`在类中声明，静态变量需要像这样在类之外定义：

```
string CPractice::name ="hello" ; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T19:24:31.967

由于 name 是一个*静态*数据成员，您应该对其进行初始化:) 而不是指望与默认实例相关的构造函数。

在类定义之后添加它（是的，我知道它令人困惑，因为您的成员是私有成员，但这只是一个初始化）：

```
string CPractice::name; 
```

# javascript - 在 JavaScript 中使用 this.prototype.show

> ID：15370205
> 
> 赞同：0
> 
> 时间：2013-03-12T19:19:07.220
> 
> 标签：javascript, requirejs, ecmascript-5

以前 Modal 是一个函数并像这样定义

```
function Modal (heading){
               this.modal="Hello"; //works fine
               Modal.prototype.show = function(){ // Not working
                     $('#exceptionModal').modal('show');
               }    
 } 
```

我试图将其转换为 requirejs 模块

```
define("wbModal", function(){
    return{
            Modal: function(heading){
                   this.modal="Hello"; //works fine
                   this.prototype.show = function(){ // Not working
                         $('#exceptionModal').modal('show');
                   }
            }
    }
} 
```

我找不到有什么问题，如果`this.modal`可以工作，为什么`this.prototype.show`不工作？

以下是可以在控制台中找到的：

```
Uncaught TypeError: Cannot set property 'show' of undefined 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T19:21:33.267

正如错误消息告诉您的那样，`this.prototype`is `undefined`，因此您当然不能在其上设置属性。您将匿名函数与构造函数混淆了。

试试这个：

```
define("wbModal", function() {
    function ModalConstructor(heading) {
        this.modal = "Hello";
    }

    ModalConstructor.prototype.show = function() {
        // you'll probably want to use `this` in some way here
        $('#exceptionModal').modal('show');
    };

    return {
        Modal: ModalConstructor
    }
} 
```

或这个：

```
define("wbModal", function() {

    return {
        Modal: function(heading) {
            this.modal = "Hello";
            this.show = function() {
                $('#exceptionModal').modal('show');
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T19:22:39.283

```
this.prototype.show = function({ // Not working
                 $('#exceptionModal').modal('show');
           }); 
```

这是您应该输入的内容。检查牙套。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T19:23:03.323

`this`是从 的原型继承的对象`Modal`。它没有内部`[[Prototype]]`属性。您只需在对象上定义方法：

```
this.show = function() {

}; 
```

# mysql - 使用休眠@Transactional插入表

> ID：15370206
> 
> 赞同：0
> 
> 时间：2013-03-12T19:19:15.513
> 
> 标签：mysql, spring, hibernate, spring-mvc, transactions

我正在使用 @Transactional 注释来测试通过 Spring 应用程序将一些数据插入到其中一个表中。我的测试成功了，但我没有看到任何数据被插入到表中。

以下是相关的代码片段：

**我的测试：**

```
@TransactionConfiguration(transactionManager="MyTxManager")
@Transactional
public class MyTest {
    @Autowired
    private DataProvider provider;

    @Test
    @Transactional
    void testInsert() {
        Order purchaseOrder = new Order("ID1", "LER", "VDR1", 0, );
        provider.addRow(purchaseOrder);
    } 
```

}

**数据提供者：**

```
public class DataProvider extends DatabaseProvider {

    // some stuff...
    @Transactional
    public void insertRow(Order purchaseOrder) {
        /* 
         * SessionFactory is got through autowiring 
         * and is working perfectly fine.
         */
        Session session = sessionFactory.getCurrentSession();

        // This should save the row into the table - which it doesn't :(
        session.save(purchaseOrder);

    } 
```

}

**信息提供者.xml**

```
<bean id="DataProvider" class="com.util.DataProvider">
    <property name="sessionFactory" ref="MySessionFactory" />
</bean> 
```

**hibernate.xml 包含会话工厂的配置**

```
 class="org.springframework.orm.hibernate3.LocalSessionFactoryBean"
      parent="AbstractSessionFactory" depends-on="EnvironmentHelper">
    <property name="hibernateProperties">
      <props>
         <prop key="hibernate.connection.autocommit">true</prop>
         <prop key="hibernate.connection.provider_class">com.hibernate.ConnectionPool</prop>
         <prop key="hibernate.connection.driver_class">${driverClassName}</prop>
         <prop key="hibernate.connection.url">${databaseURL}</prop>
         <prop key="hibernate.connection.username">${databaseUsername}</prop>
         <prop key="hibernate.connection.password">${databasePassword}</prop>

         <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
         <prop key="hibernate.default_schema">${databaseDefaultSchema}</prop>
      </props>
    </property>
</bean>

<!-- Use Spring transactions for Hibernate -->
<tx:annotation-driven transaction-manager="MyTxManager" mode='proxy' proxy-target-class='true'/>

<bean id="MyTxManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager">
   <property name="sessionFactory" ref="MySessionFactory" />
</bean>    
</beans> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T09:42:53.213

我认为回滚交易的问题。请参阅此处的[defaultRollback](http://static.springsource.org/spring/docs/3.2.x/javadoc-api/org/springframework/test/context/transaction/TransactionConfiguration.html#defaultRollback%28%29)方法。试试这样：

```
@TransactionConfiguration(transactionManager="MyTxManager", defaultRollback=false) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T06:38:56.903

`MyProvider myProviderInstance = new MyProvider();` 您的问题是**myProviderInstance**不是由 Spring 容器维护的，您只是新建了它，所以 Spring 对此无能为力，肯定事务不起作用。您应该在 Spring applicationcontext.xml 中配置 bean 并使用 ApplicationtContext 加载它，您可以在 google 后找到数十个示例。而且由于您使用的是 Mysql，因此您应该确保您使用的是 innerDB 模式，否则 mysql 不支持该事务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T06:34:02.380

将该行添加`<tx:annotation-driven/>`到您的弹簧配置中

# c# - 使用 C# 的 Asp.net Formview

> ID：15370207
> 
> 赞同：0
> 
> 时间：2013-03-12T19:19:17.863
> 
> 标签：c#, asp.net, formview

我有一个绑定到对象数据源的表单视图。objectdatasource 从列表集合中获取其值。为了实现级联下拉列表，我不得不为下拉列表切换几个文本框控件。这些值填充得很好，级联下拉列表效果很好，但是在插入时我收到了这个烦人的无用消息

“指数数组的边界之外。” 所以我一直试图弄清楚这一点并且不能。

假设是我的下拉列表导致了问题，我尝试将此代码添加到后面的代码中，因为我手动绑定它们，因此它们没有 Text='<%# Bind("GroupID") %>

```
 protected void formGroupInput_ItemInserting(object sender, FormViewInsertEventArgs e)
{

    if (formGroupInput.CurrentMode == FormViewMode.Insert)
    {
                  e.Values["ddlStartTime"] = ((DropDownList)((FormView)sender).FindControl("ddlStartTime")).SelectedItem;
       e.Values["ddlEndTime"] = ((DropDownList)((FormView)sender).FindControl("ddlEndTime")).SelectedItem;
       e.Values["ddlRoomName"] = ((DropDownList)((FormView)sender).FindControl("ddlRoomName")).SelectedItem;
       e.Values["ddlJackNumber"] = ((DropDownList)((FormView)sender).FindControl("ddlJackNumber")).SelectedItem;
       e.Values["ddlInternetType"] = ((DropDownList)((FormView)sender).FindControl("ddlInternetType")).SelectedItem;
    }

} 
```

我猜它与此有关，因为当我尝试通过在我的 DLL 中的输入法上放置一个断点来调试它时，它甚至在显示错误之前还没有达到它。

谢谢

![在此处输入图像描述](../Images/2dab65f01b3e2d2807156bc831587a28.png)

填充下拉列表的代码

```
 protected void formGroupInput_DataBound(object sender, EventArgs e)
{

    if (formGroupInput.CurrentMode == FormViewMode.Insert)
    {
        DropDownList roomName = (DropDownList)(formGroupInput.Row.FindControl("ddlRoomName"));
        roomName.DataSource = getrooms.FetchRooms();
        roomName.DataTextField = "RoomName";
        roomName.DataValueField = "intRoom";
        roomName.DataBind();

       ****Same concept for other 2 dropdownlist ******

    }
} 
```

页面加载我称之为

```
 protected void Page_Load(object sender, EventArgs e)
{

    DropDownList startTime = (DropDownList)(formGroupInput.Row.FindControl("ddlStartTime"));

    if (startTime.Items.Count == 0)
    {
        startTime.Items.Add("12:00AM");
        startTime.Items.Add("12:30AM");
        for (int i = 1; i <= 11; i++)
        {
            startTime.Items.Add(i + ":00AM");
            startTime.Items.Add(i + ":15AM");
            startTime.Items.Add(i + ":30AM");
        }

        startTime.Items.Add("12:00PM");
        startTime.Items.Add("12:30PM");
        for (int i = 1; i <= 11; i++)
        {
            startTime.Items.Add(i + ":00PM");
            startTime.Items.Add(i + ":15PM");
            startTime.Items.Add(i + ":30PM");
        }
    }

    DropDownList endTime = (DropDownList)(formGroupInput.Row.FindControl("ddlEndTime"));

    if (endTime.Items.Count == 0)
    {
        Same As Above
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-21T15:19:19.917

只是为了将来这个问题的访客。如果您有一个已绑定但尚未在 formview 中设置的 Int32 参数，则会发生这种情况，因此控件的值是空字符串。空字符串会导致对 Int32 的解析错误。在您的 ObjectDataSource 控件中，您需要这样的东西：

```
<InsertParameters>
<asp:Parameter Name="MyParameterName" Type="Int32" ConvertEmptyStringToNull="true" />
</InsertParameters> 
```

# css - div从左边跨越：0到某个点，不管屏幕宽度+CSS

> ID：15370208
> 
> 赞同：0
> 
> 时间：2013-03-12T19:19:18.937
> 
> 标签：css

我需要做这样的事情： ![在此处输入图像描述](../Images/6f0c6f92958b05aa669dd13c0461fbd3.png)

黑色部分将是页面内容。1 和 2 是我要询问的 div。

我需要的是#1 从屏幕左侧的开始到一个固定的位置，比方说 10px 到内容开始的地方。

类似地，#2 必须从内容结束前 10px 到屏幕的右侧部分。

与屏幕宽度无关。最好使用 position: absolute 和 floating div，以免干扰已经到位的设计。

CSS可以吗？还是我必须求助于javascript？

谢谢！

# c# - 如果使用 linq-to-xml 对象的字段不存在，如何不创建 xml 元素

> ID：15370211
> 
> 赞同：0
> 
> 时间：2013-03-12T19:19:30.317
> 
> 标签：c#, .net, linq-to-xml

我正在使用 Linq to XML 创建一个 xml，这些值位于 Product 对象中。请参阅下面生成 xml 的 c# 代码片段：

```
new XElement(xn + "Products",
                    from p in products
                    select
                        new XElement(xn + "Product",
                            new XElement(xn + "ProductId", p.Id),
                            new XElement(xn + "Name", p.Name),
                            new XElement(xn + "Description", new XCData(p.LongDescription.StripHtml())),
                            new XElement(xn + "CategoryExternalId",
                                from c in categories
                                where c.Name == p.PrimaryCategory
                                select c.CategoryId),
                            new XElement(xn + "UPCs",
                                from s in p.SKU
                                select
                                    new XElement(xn + "UPC", s.UPC))))
                        )); 
```

挑战在于 UPC。如果产品 SKU 数组中没有 UPC 条目，我不想创建 UPCs xml 节点。上面代码片段中的iepSKU，是一个字符串UPC字段的数组。因此，如果不存在单个 UPC 字段，即如果**p.SKU.Count ==0**，那么我根本不希望创建 UPC xml 节点元素。

查看类模型片段：

```
public class Product
{
   public string Name { get; set; }
   public string Description { get; set; }
   public List<SKU> SKU { get; set; }
}

public class SKU
{
    public string UPC { get; set; }
    public string Name { get; set; }
    public string Overlap { get; set; }
    public string Productline { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T19:31:49.320

将其放在您的查询中：

```
(p.SKU.Count > 0 ? 
    new XElement("UPCs",
        from s in p.SKU
        select new XElement( "UPC", s.UPC)) :
    null) 
```

我创建了您的查询的简化版本：

```
var xml = new XElement("Products",
                    from p in products
                    select
                        new XElement("Product",
                            new XElement("ProductId", p.Id),
                            new XElement("Name", p.Name),
                            (p.SKU.Count > 0 ? new XElement("UPCs",
                                                    from s in p.SKU
                                                    select new XElement("UPC", s.UPC))
                                                : null))); 
```

对于这样的输入：

```
var products = new List<Product> {
    new Product {
        Id = 1,
        Name = "TestName",
        SKU = new List<SKU> {
            new SKU { Name = "test", UPC = "UPC1" },
            new SKU { Name = "test2", UPC = "UPC2" }
        }
    },
    new Product {
        Id = 1,
        Name = "TestName",
        SKU = new List<SKU> { }
    }
}; 
```

输出是：

```
<Products>
  <Product>
    <ProductId>1</ProductId>
    <Name>TestName</Name>
    <UPCs>
      <UPC>UPC1</UPC>
      <UPC>UPC2</UPC>
    </UPCs>
  </Product>
  <Product>
    <ProductId>1</ProductId>
    <Name>TestName</Name>
  </Product>
</Products> 
```

所以这正是你想要达到的目标，不是吗？

# php - Php PDO 循环资源而不是获取

> ID：15370212
> 
> 赞同：0
> 
> 时间：2013-03-12T19:19:31.673
> 
> 标签：php, mysql, azure, pdo

我一直在搜索互联网和这个论坛，但我仍然无法找到一种快速且特别是不会遇到内存使用问题的好方法。这是我的任务：

我在传统的mysql中做了什么：

我有 3 个表，假设：table1、table2 和 table3 假设 table1 有 300.000 行（例如，它们是购买项目）让我们假设 table2 是产品列表，并且有 10.000 行让我们假设表 3 是服务列表，也有 10.000 行

现在，我需要做的是生成一个报告，列出循环中的每次购买，这将检查购买的项目是用于产品还是服务，如果是产品，它将通过获取输出产品名称表 2 上的通讯员姓名列。如果它是一项服务，也会发生同样的情况......

1）在手册和论坛中，据说我不能在 PDO 中运行另一个查询而不读完我的所有行......这是这种情况，因为我需要运行另一个查询来获取产品/服​​务的名称。（在 mysql 中这非常简单，因为我可以处理许多结果资源并使用 mysql_result 在它们之间进行迭代）

2）有人说使用 fetchall 甚至 fetch 会爆炸我的内存使用量，我将无法执行此查询....我已经尝试获取一个包含所有结果（300K）的数组，它象征性地爆炸了内存我的服务器的使用...

所以，你们能帮帮我吗？我正在尝试将我的服务器移动到 Windows azure，它们只允许 pdo os sqlsrv .....

好的，正如有些人在这里问的那样，我的理论代码是：

```
// connect to mysql database
$sql = @mysql_connect("{server}","{login}","{password}");
@mysql_select_db("{database}");

// query:
$result = mysql_query("SELECT * FROM table1 ORDER BY purchase_date ASC");

for($i=0;$i<$num;$i++){

   if(mysql_result($result,$i,"purchase_type")==1){

         $result1 = mysql_query("SELECT product_name FROM table2 WHERE id='".mysql_result($result,$i,"purchase_type_id")."'");       
         $name = mysql_result($result1,0,"product_name");

   }else if(mysql_result($result,$i,"purchase_type")==2){

         $result1 = mysql_query("SELECT service_name FROM table3 WHERE id='".mysql_result($result,$i,"purchase_type_id")."'"); 
         $name = mysql_result($result1,0,"service_name");

   }else{

         $name = '{error}';
   }

   echo(($i+1)". ".$name." <br/>");

} 
```

PS：这只是一个示例代码....真正的代码比这更长更复杂....但是如果我能解决这里的理论，我可以弄清楚其余的...... :)

PS2：在有人问之前...... table2 和 table3 有不同的列......

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T20:24:44.170

```
SELECT 
  table1.*,
  COALESCE(table2.product_name, table3.service_name, '{error}') as name
FROM table1 
LEFT JOIN table2 
  ON table1.purchase_type = 1
  AND table2.id = table1.purchase_type_id
LEFT JOIN table3 
  ON table1.purchase_type = 2
  AND table3.id = table1.purchase_type_id
ORDER BY table1.purchase_date 
```

请注意，通过`purchase_type_id`引用 table2 或 table3 您会错过外键的一些优势。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T20:28:12.967

您可以尝试这样的事情（希望它有效，我在进行过程中编造了它）：

```
<?php
// connect to SQLserv database with PDO
$db = new PDO("sqlsrv:server=yourServer; Database=yourDB", "user", "password");

$statement = $db->prepare("SELECT * FROM table1 ORDER BY purchase_date ASC");
$statement->execute();
$main_result = $statement->fetchAll(PDO::FETCH_ASSOC);
$statement->closeCursor();
unset($statement);

$p_type1 = array();
$p_type2 = array();

foreach ($main_result as $row => $column) {
    switch ($column["purchase_type"]) {
        case 1:
            $p_type1[] = $column["purchase_type_id"];
            break;
        case 2:
            $p_type2[] = $column["purchase_type_id"];
            break;
    }
}

$names = array();

$statement = $db->prepare("SELECT product_name FROM table2 WHERE id = :id");
foreach ($p_type1 as $value) {
    $statement->execute(":id" => $value);
    $result = $statement->fetchAll(PDO::FETCH_ASSOC);
    $statement->closeCursor();
    $names[] = $result[0]["product_name"];
}
unset($statement);
$statement = $db->prepare("SELECT service_name FROM table3 WHERE id = :id");
foreach ($p_type2 as $value) {
    $statement->execute(":id" => $value);
    $result = $statement->fetchAll(PDO::FETCH_ASSOC);
    $statement->closeCursor();
    $names[] = $result[0]["service_name"];
}

foreach ($names as $key => $value) {
    echo "$key. $value<br />\n";
}
?> 
```

# c - 编译：未定义的引用

> ID：15370214
> 
> 赞同：2
> 
> 时间：2013-03-12T19:19:38.070
> 
> 标签：c, makefile, linker, linker-errors, undefined-reference

我正在努力将多个文件编译成一个通用程序。我收到一个错误：

> 对“pi”的未定义引用

这是我的代码和 Makefile 的骨架。我究竟做错了什么？谢谢！

文件：calcPi.c

```
#include <stdlib.h>
#include <stdio.h>
#include <sched.h>
#include <string.h>

#include "pi.h"

int main(int argc, char* argv[]) {
    long iterations = 1000000;
    int policy = 2;
    int numChildren = 3;
    pi(iterations, policy, numChildren);
    return 0;
} 
```

文件：pi.h

```
void pi(long iterations, int policy, int numChildren); 
```

文件：pic.c

```
#include "pi.h"

void pi(long iterations, int policy, int numChildren) {
    //lots of code here
} 
```

我正在使用 Makefile 编译它：

```
CC = gcc
CFLAGS = -c -g -Wall -Wextra
LFLAGS = -g -Wall -Wextra

all: calcPi pi

calcPi: calcPi.o
    $(CC) $(LFLAGS) $^ -o $@ -lm

pi: pi.o
    $(CC) $(LFLAGS) $^ -o $@ -lm

calcPi.o: calcPi.c
    $(CC) $(CFLAGS) $<

pi.o: pi.c
    $(CC) $(CFLAGS) $<

clean:
    rm -f pi calcPi
    rm -f *.o
    rm -f *~ 
```

编辑：响应对整个错误消息的请求：

在函数 'main'" calcPi.c:55: 未定义引用 'pi' collect2: 错误: ld 返回 1 退出状态 make: *** [calcPi.o] 错误 1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T19:26:07.667

首先，**pi**真的应该是一个单独的应用程序吗？

您从**calcPi**引用 pi() 函数，但它只被编译成**pi.o**，因此您需要将其添加为依赖项。

我认为您想要做的是使用**calcPi.o**和**pi.o**对象文件创建**calcPi 。**

 ****```
CC = gcc
CFLAGS = -c -g -Wall -Wextra
LFLAGS = -g -Wall -Wextra

all: calcPi

calcPi: calcPi.o pi.o
    $(CC) $(LFLAGS) $^ -o $@ -lm

calcPi.o: calcPi.c
    $(CC) $(CFLAGS) $<

pi.o: pi.c
    $(CC) $(CFLAGS) $<

clean:
    rm -f calc
    rm -f *.o
    rm -f *~ 
```****

# jquery - 用jquery改变css而不改变类

> ID：15370221
> 
> 赞同：0
> 
> 时间：2013-03-12T19:20:05.067
> 
> 标签：jquery, html, css

这里我有一些代码：

HTML

```
<div>
    <div class="ca_button"><a href="javascript:void(0)" class="ca_button" onClick="setQuality(-100, 'price_quality', '{$lang501}/{$lang502}');">1 button</a></div>
<div class="ca_button1"><a href="javascript:void(0)" class="ca_button1" onClick="setQuality(100, 'price_quality', '{$lang501}/{$lang502}');">2 button</a></div>
</div>
<div>
<div class="ca_button"><a href="javascript:void(0)" class="ca_button" onClick="setQuality(100, 'parameter2', '{$lang501}/{$lang502}');">1 button</a></div>
<div class="ca_button1"><a href="javascript:void(0)" class="ca_button1" onClick="setQuality(100, 'parameter2', '{$lang501}/{$lang502}');">2 button</a></div>
</div> 
```

JS

```
var rating_quality = new Array();
function setQuality(qulaity, type_rating, name)
{
    //alert('test' + qulaity + ' ->' + type_rating + ' ' + name);   
    rating_quality[type_rating] = qulaity;
    if(qulaity > 0)
    {
        //console.log($('#id_adv_' + type_rating).length);
        if ($('#id_adv_' + type_rating).length == 0)
        {
            $('#id_add_adventage').append("<div id='id_adv_" + type_rating + "'>" + name + "</div>");
            $('#id_disadv_' + type_rating).remove();
            $('#id_add_adventage').css('font-size', '12');
            $(this).css('background-color', '#9C0');

        }
    }
    else
    {
        if ($('#id_disadv_' + type_rating).length == 0)
        {
            $('#id_add_disadventage').append("<div id='id_disadv_" + type_rating + "'>" + name + "</div>");
            $('#id_adv_' + type_rating).remove();
            $('#id_add_disadventage').css('font-size', '12');
            $(this).css('background-color', '#C00');

        }
    }
    //console.log('------------ispis-------------');
    /*for(key in rating_quality)
    {
        console.log('key:'+ key + ' ' + rating_quality[key]);
    }
    */
} 
```

css

```
.ca_button  {
    display: inline-block;
    text-decoration: none;
    padding: 10px 20px;
    text-align: center;
    background-color: #BABABA;
    border-color: #FFFFFF;
    border-width: 1px;
    -webkit-border-radius: 4px 0px 0px 4px;
    border-radius: 4px 0px 0px 4px;
    border-style: solid;
    font-family: Arial, Helvetica, sans-serif;
    font-size: 13px;
    line-height: 120%;
    color: #FFF;
    -moz-border-radius: 4px 0px 0px 4px;
    min-height:8px;
    margin-top:15px;
    margin-left:48px;
}

.ca_button1  {
    display: inline-block;
    text-decoration: none;
    padding: 10px 20px;
    text-align: center;
    background-color: #BABABA;
    border-color: #FFFFFF;
    border-width: 1px;
    -webkit-border-radius: 0px 4px 4px 0px;
    border-radius: 0px 4px 4px 0px;
    border-style: solid;
    font-family: Arial, Helvetica, sans-serif;
    font-size: 13px;
    line-height: 120%;
    color: #FFF;
    -moz-border-radius: 0px 4px 4px 0px;
    width:73px;
    min-height:15px;
    margin-top:15px;
}

.button1:hover {
    background-color: #91B522;
    color: #FFF;
}

.button1:active {
    background-color: #91B522;
    color: #FFF;
}

.button1:visited {
    background-color: #91B522;
    color: #FFF;
} 
```

[http://jsfiddle.net/nJ895/8/](http://jsfiddle.net/nJ895/8/)

在这里，当我单击 1button 更改颜色时，我也需要单击 2button 更改 2button 上的颜色，但也需要 1button 失去颜色...所有这些都不会影响第二个 div 上的 1button 和 2button ...我怎么能去做？有没有办法做到这一点？谢谢！

# id_add_ ... 在这里不是必需的，而是代码的一部分，所以我决定在这里展示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T19:42:00.963

我正在扩展[Titanium 的答案，在这里找到](https://stackoverflow.com/a/15370326/1265817)。

为了使颜色变化保持在每组按钮内，只需使 Titanium 的变化相对于父级。此外，要使其在 button 和 button1 上都起作用，只需将它们添加到选择器中即可。

```
$(".ca_button, .ca_button1").click(function() {

  // Set $this to the clicked div, or the div holding the a that was clicked
    $this = $(this);
    if($this.is("a")) { $this = $this.parent(); }

 // Set $par to the parent of that div - this is the div that holds a given set of buttons
    $par = $this.parent();

 // Set the background color for all buttons in this set
    $par.find(".ca_button, .ca_button1").css("background-color", "#bababa");

 // Set the color of the currently clicked div
    if ($(this).hasClass("ca_button1")){
        $this.css("background-color", "#0F0");
    } else {
        $this.css("background-color", "#F00");
    }

    return false;

}); 
```

[http://jsfiddle.net/daCrosby/EC44Z/3/](http://jsfiddle.net/daCrosby/EC44Z/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T19:25:02.980

请参考`.css()`jQuery中的函数：http: [//api.jquery.com/css/](http://api.jquery.com/css/)

将此添加到您的代码中，您应该得到您要求的结果：

**JS**

```
$(".ca_button").click(function() {

    // Declare '$(this)' so it can be changed later
    $this = $(this);

    // If this is an 'a' tag, change $this
    if($this.is("a")) { $this = $this.parent(); }

    // Remove the background colour on all other buttons
    $(".ca_button").css("background-color", "#bababa");

    // Change the background colour on the button that has been clicked
    $this.css("background-color", "#f00");

    // Because there can be two elements called .ca_button when clicking,
    // we're returning false to stop the function from happening again
    return false;

}); 
```

**工作示例**

[http://jsfiddle.net/DsCw3/](http://jsfiddle.net/DsCw3/)

# css - CSS3试图摆脱一些空白

> ID：15370226
> 
> 赞同：0
> 
> 时间：2013-03-12T19:20:30.210
> 
> 标签：css

```
 .abovearea
    {
      height: 100px;

      background: #f1f1f1;
      width:100%;
      border-bottom: 1px solid #e5e5e5;
      overflow: hidden;

    }

      </style>

    </head>
    <body>

    <div class="abovearea">

Big Puppy

</div> 
```

当我在浏览器上运行该页面时，我仍然在灰色矩形的侧面和上边缘看到一些空白区域，其中包含“大小狗”这个短语。如何编码我的 CSS 以便没有空格？而是填满整个观看区域？

感谢堆栈溢出

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T19:27:24.007

在您的`<style>`部分中，添加`body { margin: 0 }`.

# kml - Google Earth 如何平滑地为 KML 地标制作动画

> ID：15370228
> 
> 赞同：0
> 
> 时间：2013-03-12T19:20:42.263
> 
> 标签：kml, google-earth-plugin

我有一些雷达数据要通过 Google 地球插件显示。一般是一些带有坐标和时间戳的地物。我按照[https://developers.google.com/kml/documentation/time](https://developers.google.com/kml/documentation/time)中的说明，尝试了时间戳和时间跨度，它工作正常。但显示效果并不理想。

对于时间戳解决方案，地标只是在“”标签指示的时间短暂闪烁。当我按下播放按钮时，地图上什么也没有。代码示例：

```
<Folder>
  <name>Vehicles</name>
  <description>Timeline information of vehicles</description>
  <Placemark>
    <name>2</name>
    <description>(-84.114231,39.785436,-0.000216),V(13.411216,37.555181) at 0.00s</description>
    <TimeStamp>
      <when>2012-09-19T08:00:00Z</when>
    </TimeStamp>
    <styleUrl>#vehicleStyle</styleUrl>
    <Point>
      <coordinates>-84.114231,39.785436,-0.000216</coordinates>
    </Point>
  </Placemark>
  <Placemark>
    <name>910</name>
    <description>(-84.110335,39.788438,-0.000024),V(0.000000,0.000000) at 0.80s</description>
    <TimeStamp>
      <when>2012-09-19T08:00:30Z</when>
    </TimeStamp>
    <styleUrl>#vehicleStyle</styleUrl>
    <Point>
      <coordinates>-84.110335,39.788438,-0.000024</coordinates>
    </Point>
  </Placemark>
  <Placemark>
    <name>2</name>
    <description>(-84.114133,39.785494,-0.000285),V(13.411216,37.555118) at 0.80s</description>
    <TimeStamp>
      <when>2012-09-19T08:00:30Z</when>
    </TimeStamp>
    <styleUrl>#vehicleStyle</styleUrl>
    <Point>
      <coordinates>-84.114133,39.785494,-0.000285</coordinates>
    </Point>
  </Placemark>
  <Placemark>
    <name>910</name>
    <description>(-84.110307,39.788410,-0.000046),V(3.499966,307.390012) at 1.60s</description>
    <TimeStamp>
      <when>2012-09-19T08:01:00Z</when>
    </TimeStamp>
    <styleUrl>#vehicleStyle</styleUrl>
    <Point>
      <coordinates>-84.110307,39.788410,-0.000046</coordinates>
    </Point>
  </Placemark>
</Folder>
                ... 
```

对于时间跨度的情况，动画是可以的，但每个对象后面总是有一个尾巴：前一帧中的地标不会在新时间跨度开始时立即消失。

代码示例：

```
...
 <Folder>
  <name>Vehicles</name>
  <description>Timeline information of vehicles</description>
  <Placemark>
    <name>2</name>
    <description>(-84.114231,39.785436,-0.000216),V(13.411216,37.555181) at 0.00s</description>
    <TimeSpan>
      <begin>2012-09-19T08:00:00Z</begin>
      <end>2012-09-19T08:00:10Z</end>
    </TimeSpan>
    <styleUrl>#vehicleStyle</styleUrl>
    <Point>
      <coordinates>-84.114231,39.785436,-0.000216</coordinates>
    </Point>
  </Placemark>
  <Placemark>
    <name>910</name>
    <description>(-84.110335,39.788438,-0.000024),V(0.000000,0.000000) at 0.80s</description>
    <TimeSpan>
      <begin>2012-09-19T08:00:10Z</begin>
      <end>2012-09-19T08:00:20Z</end>
    </TimeSpan>
    <styleUrl>#vehicleStyle</styleUrl>
    <Point>
      <coordinates>-84.110335,39.788438,-0.000024</coordinates>
    </Point>
  </Placemark>
  <Placemark>
    <name>2</name>
    <description>(-84.114133,39.785494,-0.000285),V(13.411216,37.555118) at 0.80s</description>
    <TimeSpan>
      <begin>2012-09-19T08:00:10Z</begin>
      <end>2012-09-19T08:00:20Z</end>
    </TimeSpan>
    <styleUrl>#vehicleStyle</styleUrl>
    <Point>
      <coordinates>-84.114133,39.785494,-0.000285</coordinates>
    </Point>
  </Placemark>
  <Placemark>
    <name>910</name>
    <description>(-84.110307,39.788410,-0.000046),V(3.499966,307.390012) at 1.60s</description>
    <TimeSpan>
      <begin>2012-09-19T08:00:20Z</begin>
      <end>2012-09-19T08:00:30Z</end>
    </TimeSpan>
    <styleUrl>#vehicleStyle</styleUrl>
    <Point>
      <coordinates>-84.110307,39.788410,-0.000046</coordinates>
    </Point>
  </Placemark>
</Folder>
                ... 
```

那么是否有任何解决方案可以使地标连续动画？谢谢。

不考虑 PS Track，因为数据点之间的跟踪信息暂时不可用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T21:03:45.993

如果我明白你在问什么，那么你可以通过使用 JavaScript api 简单地切换地标的样式来做到这一点。

为此，您可以简单地在您的 Kml 文档中创建一个样式，例如。

```
<Style id="vehicleStyleHighighted">
  <IconStyle>
     <color>ff00ff00</color>
     <colorMode>random</colorMode>
     <scale>1.5</scale>
     <Icon>
        <href>http://maps.google.com/mapfiles/kml/pal3/icon21.png</href>
     </Icon>
  </IconStyle>
</Style> 
```

然后，您可以使用该方法`setStyleUrl()`和计时器来设置每个地标的样式。`#vehicleStyleHighighted`IE 您可以在' 和 '之间切换每个地标样式`#vehicleStyleHighighted`。

如果您想要的不仅仅是一个简单的“开/关”动画，那么您可以使用此方法定义两个以上的动画状态，然后根据需要简单地应用它们。

# visual-studio-2012 - Visual Studio 2012 中是否有任何本地历史记录

> ID：15370230
> 
> 赞同：3
> 
> 时间：2013-03-12T19:20:54.643
> 
> 标签：visual-studio-2012, ide, visual-studio-extensions

这是一个非常有用的功能，有很多 IDE 可以提供它，但我找不到任何可以提供本地历史记录的扩展。

本地历史是指跟踪我对源代码所做的任何更改和编辑的东西，以便将来能够恢复它。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-08-02T12:28:13.440

有一个单独的扩展提供本地历史功能：http: [//visualstudiogallery.msdn.microsoft.com/226c2108-9da9-407d-b90d-9783040d27b8](http://visualstudiogallery.msdn.microsoft.com/226c2108-9da9-407d-b90d-9783040d27b8)

我认为本地历史功能补充了版本控制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T21:14:37.013

您所描述的是一个源代码控制系统。Visual Studio 默认不提供此功能，因为它的主要工作是编辑器。它确实支持许多源代码控制插件，其中许多是免费的，它们会为您完成这项工作。

例如`Git`，微软现在正式提供了一个免费插件。

> [http://visualstudiogallery.msdn.microsoft.com/abafc7d6-dcaa-40f4-8a5e-d6724bdb980c](http://visualstudiogallery.msdn.microsoft.com/abafc7d6-dcaa-40f4-8a5e-d6724bdb980c)

这可以与许多免费的 Git 提供程序一起使用

*   [CodePlex](http://codeplex.com)
*   [GitHub](http://github.com)
*   [Visual Studio 托管](https://visualstudio.com/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-18T01:49:17.430

可以选择两全其美：

[autogit - Visual Studio 扩展](http://visualstudiogallery.msdn.microsoft.com/45a3d62b-955e-43cb-9d91-255a837d5f35)

以下是本地历史记录与源代码存储库不同的一些反原因：

一些简单的原因：

*   防止意外更改或删除的简单保险。
*   可以更轻松地支持更智能的撤消、回溯或探索性编程。
*   通过查看发生的细粒度更改来恢复任务或跟踪任务。
*   重量轻，在您需要之前保持隐形。

一些更深层次的原因：

*   **更好的任务恢复：**研究表明，当可以按时间顺序审查更改时（与平面提交相比），恢复中断的任务或审查另一个人所做的更改会更容易。

*   **Auto-blog：** [automark](https://github.com/chrisparnin/automark)是一个姊妹项目，它可以检查一个 git 存储库，然后自动生成一个 markdown 文件，格式适合发布博客文章。

*   **个人分析：** Watts Humphrey 提倡使用个人软件流程等方法跟踪个人活动以实现自我提升的想法。使用[codealike](http://codealike.com/)或[codeivate](http://www.codeivate.com/)等服务，您可以跟踪编辑所花费的时间等。跟踪*实际*更改可以将此分析提升到另一个层次。

*   **API 分析：**在编程或使用特定 API 时经常犯错误。可以这样分析：“你花了3个小时搞清楚如何正确使用pygit2.create_commit()，创建github issue？”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-18T11:11:24.513

还有自动历史扩展：[https ://visualstudiogallery.msdn.microsoft.com/dfcb2438-180c-4f8a-983b-62d89e141fe3](https://visualstudiogallery.msdn.microsoft.com/dfcb2438-180c-4f8a-983b-62d89e141fe3)

它就像 Juha Palomäki 链接的那个，除了下载量、评论和平均评论略高。（我自己还没有尝试过，但计划在一两天内尝试）

# javascript - 网址随动画变化

> ID：15370239
> 
> 赞同：0
> 
> 时间：2013-03-12T19:21:25.387
> 
> 标签：javascript, html

我在谷歌网站上发现，他们实现了 url 更改而无需重新加载整个页面。示例：您在 www.googleio.com/first 点击一个按钮 url 更改为 www.googleio.com/first/second 内容“first”随着向左的过渡而消失，“second”的内容与另一个一起出现过渡。页面没有重新加载。这是怎么做的？

有人告诉我，您使用 Javascript 函数 'Header("Location: ../second")'，它在浏览器将 url 输入地址栏后中止，但在他重新加载之前。您只是让新内容与其他一些 javascript 一起出现。这是真的？我找不到任何关于此的信息。还是有其他解决方案？

多谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T19:29:18.323

这看起来不像是实际的页面重新加载，而是将 AJAX 与 pushState 路由器一起使用。

实际发生的情况是您的浏览器正在进行 AJAX 调用以获取下一页，然后在收到它时显示它。

它使用 HTML5 pushState 功能来更新 URL。

pushState（您可以在[此处](http://badassjs.com/post/840846392/location-hash-is-dead-long-live-html5-pushstate)了解更多信息）是一种 HTML5 功能，类似于网站过去使用的哈希 (#)。

# c++ - 计算位数：这条线是如何工作的？n=n&(n-1);

> ID：15370250
> 
> 赞同：10
> 
> 时间：2013-03-12T19:21:54.127
> 
> 标签：c++, algorithm, bitcount

我需要一些解释这个特定的行是如何工作的。
我知道这个函数计算 1 的位数，但是这条线究竟是如何清除最右边的 1 位的呢？

```
int f(int n) {
    int c;
    for (c = 0; n != 0; ++c) 
        n = n & (n - 1);
    return c;
} 
```

有人可以简单地向我解释一下或给出一些“证据”吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-12T19:28:37.343

任何无符号整数 'n' 将具有以下最后 k 位： 1 后跟 (k-1) 个零：100...0 请注意，k 可以为 1，在这种情况下没有零。

(n - 1) 将以这种格式结束：0 后跟 (k-1) 1：011...1

因此，n & (n-1) 将以“k”个零结尾：100...0 & 011...1 = 000...0

因此 n & (n - 1) 将消除最右边的“1”。每次迭代基本上都会删除最右边的“1”数字，因此您可以计算 1 的数量。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-04-01T13:30:41.513

我一直在复习位操作并遇到了这个问题。现在（3年后）可能对原始海报没有用处，但无论如何我都会回答以提高其他观众的质量。

**`n & (n-1)`等于零是什么意思？**

我们应该确保我们知道这一点，因为这是打破循环的唯一方法（`n != 0`）。比方说`n=8`。位表示将是`00001000`. `n-1`（或 7）的位表示为`00000111`. `&`运算符返回两个参数中设置的位。由于`00001000`并且`00000111`没有设置任何类似的位，因此结果将是`00000000`（或零）。您可能已经注意到数字 8 不是随机选择的。这是 2 的幂的示例`n`。所有 2 的幂（2、4、8、16 等）都将产生相同的结果。

当你传递一个不是 2 的指数的东西时会发生什么？例如，当 时`n=6`，位表示是`00000110`and`n-1=5`或`00000101`.The`&`应用于这 2 个参数，它们只有一个共同的位，即 4。现在，`n=4`它不是零，所以我们递增`c`并尝试与 相同的过程`n=4`。正如我们在上面看到的，4 是 2 的指数，因此它将在下一次比较中打破循环。**它正在切断最右边的位，直到`n`等于 2 的幂。**

**是什么`c`？**

它仅在每个循环中递增 1 并从 0 开始。`c`是在数字等于 2 的幂之前被切断的位数。

# python - 为什么这个 pip 调用在 Makefile 中成功但不是通过命令行？

> ID：15370251
> 
> 赞同：0
> 
> 时间：2013-03-12T19:21:54.170
> 
> 标签：python, pip

我最近在 Makefile 中遇到了这个问题：

```
develop:
      pip install "file://`pwd`#egg=MyProject" 
```

这在调用时工作正常，`make develop`但是当我通过命令行调用相同的命令时，它会出错“ `No such file or directory: /home/slack/tmp/myproject#egg=MyProject'`”

为什么它在 Makefile 中但没有从命令行显式调用时会起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T19:26:55.817

该`file://`位告诉 pip 从本地资源安装。该`pwd`命令告诉它本地资源在当前目录中，然后它附加了鸡蛋的名称。

我假设这个 make 文件设置了 egg，以便命名约定适用于这个查找，并且 makefile 中可能有一些默认变量或命令可以调整它。

# c++ - 用 C++ 下载文件的最简单的库是什么

> ID：15370253
> 
> 赞同：1
> 
> 时间：2013-03-12T19:22:05.903
> 
> 标签：c++, windows-vista

我想使用我的 c++ 程序下载具有完整 URL 地址的文件，哪个库最适合执行此操作？

我想知道这样的命令：

```
system("download [URL] [DESTINATION]"); 
```

或者

```
download(URL,DESTINATION); 
```

我正在使用 Windows，对不起，我忘了提及。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T19:35:02.440

您还没有提到操作系统，无论如何您可以使用`c`.

```
#include <stdio.h>
int main()
{
    system("wget url");
    return 0;
} 
```

更改`url`以获取您需要的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T19:28:34.523

看看卷曲

来自卷曲网站

> curl 是一个使用 URL 语法传输数据的命令行工具，支持 DICT、FILE、>FTP、FTPS、Gopher、HTTP、HTTPS、IMAP、IMAPS、LDAP、LDAPS、POP3、POP3S、RTMP、RTSP、SCP、>SFTP、 SMTP、SMTPS、Telnet 和 TFTP。curl 支持 SSL 证书、HTTP POST、HTTP PUT、FTP 上传、基于 HTTP 表单的上传、代理、cookie、用户+密码身份验证（Basic、Digest、NTLM、Negotiate、kerberos...）、文件传输恢复、代理隧道和busload >其他有用的技巧。

它是可用的最好的客户端库

[http://curl.haxx.se/](http://curl.haxx.se/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T19:28:57.377

[`libcurl`](http://curl.haxx.se/libcurl/)是广泛使用的多协议网络传输库之一。它可用于通过 HTTP 和许多其他协议下载文件或页面。

命令行客户端`curl`构建在`libcurl`库之上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T19:27:37.627

打电话给`system("command");`你可以使用一些可以实现下载的命令行工具。[wget](http://www.gnu.org/software/wget/)和[curl](http://curl.haxx.se/)就是这样的工具。后者甚至为 C 提供了一个[API](http://curl.haxx.se/libcurl/c/)，因此您可以编写自己的`download(...)`函数。

# java - 如何在 Google App Engine 中提取 rar 文件 (AppEngineFile)

> ID：15370261
> 
> 赞同：1
> 
> 时间：2013-03-12T19:22:18.193
> 
> 标签：java, google-app-engine, blobstore, rar

我的应用程序需要在 Google App Engine 中提取 rar 文件。[我可以使用这个库](https://github.com/edmund-wagner/junrar)提取 rar 文件， 但它只支持 java.io.File，不支持 AppEngineFile。我找不到任何解决方案来解决这个问题。有人有什么想法吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T23:42:04.510

junrar库[说它](https://github.com/edmund-wagner/junrar/tree/master/unrar)需要一个 InputStream，而不是一个文件。

您可能想尝试将 rar 文件上传到[BlobStore](https://developers.google.com/appengine/docs/java/blobstore/overview)，而不是从文件系统中读取。然后您可以使用[BlobstoreInputStream](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/blobstore/BlobstoreInputStream)将数据读入 unrar。

请注意，由于您无法写入文件系统，因此您需要将解压后的数据存储回 blobstore 或数据存储区。

# ios - .xcdatamodeld 文件未在 Xcode 中显示数据模型结构

> ID：15370264
> 
> 赞同：11
> 
> 时间：2013-03-12T19:22:25.167
> 
> 标签：ios, xcode, macos, core-data, watchkit

我的项目中有 .xcdatamodeld 文件，但它没有打开到数据模型中。

当我在 Xcode 中单击左侧边栏中的文件时，它会继续显示先前选择的文件的内容，而不是显示数据模型。同样，当我右键单击该文件并选择“Open As >”时，我无法选择将其显示为数据模型——什么也没有出现。我从 SVN 存储库中检查了代码，甚至文件管理器所有者也无法在他的工作区中看到它。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-01-30T18:22:40.470

这是我不时看到的症状。至少在一种情况下，这是由于 Xcode 在 project.pbxproj 文件部分的`path`组件中存储了错误的路径`XCVersionGroup`，并且在该部分中有明显不必要的附加`name`组件。手动编辑这个文件可能是可能的，但我总是不愿意直接使用项目文件，幸运的是有一个更简单的方法。

1.  在 Finder 中导航到您的 .xcdatamodeld 文件。最简单的方法是右键单击/按住 Ctrl 键单击 .xcdatamodeld 文件并选择“在 Finder 中显示”。
2.  将文件从 Finder 拖放到 Xcode 项目的 Project Navigator 中对 .xcdatamodeld 的当前引用的正上方或下方。
3.  单击确定接受导入，确保将其添加到正确的目标。（哪些目标是正确的将取决于您的项目。）
4.  现在，您将在 Project Navigator 中有两个对同一文件的引用。现在单击*其中任何*一个都将显示所需的数据模型结构。
5.  删除对模型文件的重复引用。单击其中一个文件引用（似乎无关紧要，尽管删除旧的可能更好），然后按 Delete。
6.  在出现的确认对话框中，请确保仅选择“删除参考”，并且不要将文件移动到垃圾箱。（这两个引用仅指向文件系统中的一个实际文件。移动到垃圾箱将因此丢弃唯一的副本。）

您现在只剩下一个对数据模型的引用，并且它可以工作。

似乎触发此错误的一件事是在磁盘上的文件结构中移动 .xcdatamodeld 文件。即使在正确地将文件与新位置重新关联之后（即它不再在侧边栏中显示为红色），上面提到的项目文件的一部分也没有正确更新，因此文件没有被完全正确地视为Xcode 数据模型文件。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-07-10T16:12:36.007

我在 Xcode 6.3 中遇到了同样的问题

唯一对我有用的解决方案是**将 .xcdatamodeld 文件从我的“资源”文件夹中移到**Xcode 项目资源管理器中的项目根文件夹中（文件系统上的位置无关紧要）

我仍然不确定为什么，只是在项目结构中移动文件的位置会导致它在单击时根本不显示..但显然，至少在我的设置中，它不喜欢住在 Resources 文件夹中..

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-09-07T09:53:36.077

由于一些黑暗的原因，有时 Xcode 需要 xcdatamodel **d**字段位于根文件夹中。[我在这里](https://stackoverflow.com/questions/13728021/xcode-cant-edit-coredata-model/32435681#32435681)写了一个答案，解释了如何做到这一点，但也是一种解决方法，可以将这个文件放在你想要的任何地方。

干杯!

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-12T20:03:37.457

该`.xcdatamodeld`文件是一个包。它包含`.xcdatamodel`包，每个版本的模型一个。每个`.xcdatamodel`里面都有一个`contents`文件，这是一个带有实体描述的*XML 。*要查看包中的内容，请在 Finder 中右键单击它们并选择*“显示包内容”*选项。

![在 Finder 中显示包内容](../Images/d7d704e32874bb12159cbf2858a0f321.png)

也许您没有将`contents`文件添加到您的存储库中。这样，当您从中创建全新的工作副本时，您将无法看到您的模型。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-10-17T18:56:26.730

我今天在 Xcode8 上成为这个问题的受害者。

我只是通过将 xcdatamodeld 文件放在项目导航器（左窗格）中的任何组之外来解决它。一移到群里，小家伙就再也打不开了。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-05-27T12:40:50.237

Xcode 7.3.1 也有类似的问题。

事实证明，这与数据模型包的配置方式有关。

我发现有一个嵌入式模型包嵌套在另一个模型包中。假设一个名为 FolderNodes.xcdatamodeld 的顶级数据模型包含另一个名称完全相同的数据模型... FolderNodes.xcdatamodeld。FolderNodes.xcdatamodeld 内部是包含模型信息的实际内容文件。

我的解决方案是将嵌入式包 FolderNodes.xcdatamodeld（编号 2）拖到 Xcode 项目中，而不是其封闭文件夹中。

Apple 使用该包进行版本控制，但我认为与移动数据模型文件相关的逻辑以某种方式破坏了原始包，从而创建了冗余包装器。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-08-22T12:18:09.490

确保您`Version Editor`的未激活。

在`Version Editor`要显示的 xml 代码中打开结果而不是`Data Model`. 您也无法`Data Model`在 .xcdatamodeld 文件的上下文菜单中进行选择`Project Navigator`。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-08-12T11:23:31.507

也发生在 XCode 8.3 上。

对我来说，将物理文件移动到不同的文件夹，然后删除原始参考，然后将其添加回同一个位置并再次建立参考就可以了。

# sql - 为什么使用命名键约束（例如：外键）

> ID：15370265
> 
> 赞同：1
> 
> 时间：2013-03-12T19:22:30.240
> 
> 标签：sql, foreign-keys

我不太熟悉，`SQL`请解释一下以下两者的区别以及最好的使用方式。使用一个比另一个有什么优势。

```
CREATE TABLE Employee
(
    Emp_Id int NOT NULL,
    Dep_Id int NOT NULL,
    ...
    FOREIGN KEY (Dep_Id) REFERENCES Department(Dep_Id)
); 
```

和

```
CREATE TABLE Employee
(
    Emp_Id int NOT NULL,
    Dep_Id int NOT NULL,
    ...

    CONSTRAINT fk_EmpDept FOREIGN KEY (Dep_Id) REFERENCES Department(Dep_Id)
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T19:38:01.920

我总是为我的键和约束命名，通常有足够的信息，任何查看键名的人都能够理解键的*作用*。

*   我命名的外键`FK_FieldName@TableName`。
*   我命名的主键`PKC_TableName`或`PKN_TableName`（“c”表示“clustered”，“n”表示“nonclustered”，尽管这并不重要）。
*   对于索引，我根据它们的唯一性、聚集性和索引的“I”来命名它们，例如`UNI_FieldName@TableName`.

命名的原因是为了方便，如果您需要删除对象，更重要的是，如果您的代码中的某些内容试图违反关系/约束。如果您收到一条消息说您违反了密钥，`FK_FieldName@TableName`但如果名称没有意义，则不太清楚问题出在哪里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T19:29:13.193

唯一的区别在于命名。如果您没有为约束明确设置名称，它将具有自动生成的名称。例如：FK_ *Employee* _Dep_Id__164452B1。你会在表键的描述中看到这个名字，在不同的例外等等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T19:30:21.037

如果您不命名外键，则数据库会为该字段隐式分配外键名称。

如果您命名外键，则数据库将其用作外键常量名称。

您可以`drop FOREIGN KEY foreign_key_name`用于删除约束（对于 MySql）。

您可以`drop constraint foreign_key_name`用于删除约束（对于 Oracle、MS Sql 等）。

您可以使用

```
ALTER TABLE TableName
ADD CONSTRAINT foreign_key_name
FOREIGN KEY (field)
REFERENCES foreign_key_table(Foreign_key_field) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T19:30:53.607

第一个例子 with`FOREIGN KEY (Dep_Id) REFERENCES Department(Dep_Id)`用在 MySQL 中，它不允许你给这个约束指定名称。

在第二个示例中，`CONSTRAINT fk_EmpDept FOREIGN KEY (Dep_Id) REFERENCES Department(Dep_Id)`您基本上可以更改`fk_EmpDept`为您想要的任何名称。它可用于 MySQL、SQL Server、Oracle、MS Access。

使用第二个版本，您还可以在多个列上创建外键约束。

# python - 读取多个文件并写入多个输出文件

> ID：15370276
> 
> 赞同：-5
> 
> 时间：2013-03-12T19:23:02.090
> 
> 标签：python

如果我在目录 C 中有多个文件，并且我想编写一个代码读取（自动）所有文件并处理每个文件，然后为每个输入文件编写一个输出文件。

例如在目录 C 我有以下文件：

```
aba 
cbr
wos
grebedit
scor 
```

提示：这些文件没有明显的扩展名

然后程序一一读取这些文件，进行处理，然后在目录中写入输出：

```
aba.out
cbr.out
wos.out
grebedit.out
scor.out 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T19:30:45.733

请允许我将您引导至[教程](http://docs.python.org/2/tutorial/inputoutput.html#reading-and-writing-files)。一旦您对一般的文件 IO 感到满意，这里有一个基本的工作流程供您扩展。

```
def do_something(lines):
    output = []
    for line in lines:
        # Do whatever you need to do.
        newline = line.upper()
        output.append(newline)
    return '\n'.join(output) # 

listfiles = ['aba', 'cbr', 'wos', 'grebedit', 'scor']

for f in listfiles:
    try:
        infile = open(f, 'r')
        outfile = open(f+'.out', 'w')

        processed = do_something(infile.readlines())

        outfile.write(processed)

        infile.close()
        outfile.close()
    except:
        # Do some error handling here
        print 'Error!' 
```

如果您需要从某个目录中的所有文件构建您的列表，请使用该`os`模块。

```
import os
listfiles = os.listdir(r'C:\test') 
```

# jquery - pageshow 事件未触发 Jquery Mobile 并看到进度条但页面未更改

> ID：15370285
> 
> 赞同：0
> 
> 时间：2013-03-12T19:23:23.590
> 
> 标签：jquery, jquery-mobile

我有一个页面，如下面的代码所示，可以在另一个 .html 页面的更改页面上正确加载。我知道 jquery mobile 中的 changepage 意味着新页面被加载到当前 DOM 中。所以我在 . 但是现在当我尝试更改页面时，我看到一个无休止的进度指示器并且没有发生更改页面。

```
 <!DOCTYPE html>
<html lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="viewport" content="initial-scale=1, maximum-scale=1">
        <title>Demo Mobile AUI</title>
        <!--<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
        <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>

        <script type="text/javascript" src="http://jzaefferer.github.com/jquery-validation/jquery.validate.js"></script>
        <script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
        <script type="text/javascript" src="WebSocketConnection.js"></script>-->
    </head>
    <body>
        <!--MAIN SCREEN-->
        <div data-role="page" id="home">
            <script type="text/javascript">
                $('#home').live('pageshow', function(event, ui) {
                    alert("pageshow");
                });
            </script>
            <div data-role="header" data-position="fixed" align="center">
                <div data-role="controlgroup" data-type="horizontal">
                <h1>
                    <a href="login.html" data-role="button" data-icon="back" data-iconpos="notext">Back</a>
                    <a href="#home" data-role="button" data-icon="grid">Menu</a> 
                    <a href="login.html" data-role="button" data-icon="delete" >Log Out</a>
                    <a href="#settings" data-role="button" data-icon="gear">Settings</a>
                </h1>
                </div>
            </div> 

            <div data-role="content" data-theme="b">
                <div data-role="collapsible-set">

                  <!-- Transmitter Configuration Collapsible List -->
                  <div data-role="collapsible" data-collapsed="false">
                    <h3>Transmitter Configuration</h3>
                    <ul data-role="listview" data-inset="false">    
                      <li>Power: <div id="power"></div></li>
                      <li>Set Point:</li>
                      <li>Reflected Power:</li>   
                      <li>Frequency:</li>
                      <li>
                        <label for="preset_list" class="select">Preset:</label>
                        <select name="preset_list" id="select-choice-0" data-inset="false" data-theme="a"></select>
                      </li>
                    </ul>
                  </div>

                  <!-- Tool Menu Collapsible List -->
                  <div data-role="collapsible" data-collapsed="true">
                    <h3>Tool Menu</h3>
                    <ul data-role="listview" data-inset="false"><li>
                    <form action="form.php" method="post">
                    <div data-role="fieldcontain">
                      <label for="graph" class="select">Current Graph:</label>
                      <select name="graph" id="select-choice-0" data-inset="false" data-theme="a">
                        <option value="spectrum">Spectrum</option>
                        <option value="EqFreq">EQ Frequency Response</option>
                        <option value="EqImpulse">EQ Impulse Response</option>
                        <option value="EqFilter">EQ Filter Delay</option>
                        <option value="lissajous">Lissajous Plot</option>
                      </select>
                    </div>
                    </form>
                    </li></ul>
                  </div>

                  <!-- Transmitter Log Collapsible List -->
                  <div data-role="collapsible" data-collapsed="true">
                    <h3>Transmitter Log</h3>
                  </div>

                  <!-- Meters Collapsible List -->    
                  <div data-role="collapsible" data-collapsed="true" data-inset="false">
                    <h3>Meter Readings</h3>
                    <ul data-role="listview" data-inset="false"><li>
                    <div id="checkBoxList">
                        <div data-role="collapsible" data-collapsed="true" data-inset="false">
                            <h3>Controller</h3>
                        </div>
                        <div data-role="collapsible" data-collapsed="true" data-inset="false">
                            <h3>Exciter</h3>
                        </div>
                    </div>
                  </div>
                  <textarea cols="40" rows="3" name="textarea" id="info_log" height="auto" width="auto"></textarea>
                </div>

              </div>
              <div data-role="footer" align="center">
                    &copy; Copyright  by Nautel Limited
              </div>
        </div>
    </body>
</html> 
```

我试图找到解决这个问题的方法，尽管我尝试了很多，但都没有解决这个问题。

问候， Shreyas

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T05:45:09.863

`.live()`已贬值。以后不要使用它。我注意到它之前可以工作，`jQuery Mobile 1.2.x`但之后停止工作`1.3.x`。

如下更改您的代码。

```
$('#home').on('pageshow', function(event, ui) {
    alert("pageshow");
}); 
```

我已经改变了`live`，`on`事件肯定会触发。

# java - 我可以根据其字段的值获取枚举吗？

> ID：15370288
> 
> 赞同：26
> 
> 时间：2013-03-12T19:23:34.357
> 
> 标签：java, string, enums

我想根据其字段值获取特定的枚举。

**枚举：**

```
public enum CrimeCategory {
    ASBO ("Anti Social Behaviour"),
    BURG ("Burglary"),
    CRIMDAM ("Criminal Damage And Arson"),
    DRUGS ("Drugs"),
    OTHTHEFT ("Other Theft"),
    PUPDISOR ("Public Disorder And Weapons"),
    ROBBERY ("Robbery"),
    SHOPLIF ("Shoplifting"),
    VEHICLE ("Vehicle Crime"),
    VIOLENT ("Violent Crime"),
    OTHER ("Other Crime");

    private  String category;

    private CrimeCategory (String category) {
        this.category = category;
    }

    public String returnString() {
        return category; 
    }
} 
```

**获取一个新的枚举：**

```
aStringRecivedFromJson = "Anti Social Behaviour"
CrimeCategory crimeCategoryEnum;
crimeCategoryEnum = CrimeCategory.valueOf(aStringRecivedFromJson); 
```

我一直在尝试找出一种方法，让上面带回一个枚举，以便它可以`HashMap`与其他`Crime`信息一起存储在一个中传递。

预期结果：`ASBO`

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-03-12T20:45:31.950

作为参考，这里有一个 HashMap 的替代解决方案：

```
enum CrimeCategory {
  ASBO("Anti Social Behaviour"),
  BURG("Burglary"),
  CRIMDAM("Criminal Damage And Arson"),
  DRUGS("Drugs"),
  OTHTHEFT("Other Theft"),
  PUPDISOR("Public Disorder And Weapons"),
  ROBBERY("Robbery"),
  SHOPLIF("Shoplifting"),
  VEHICLE("Vehicle Crime"),
  VIOLENT("Violent Crime"),
  OTHER("Other Crime");

  private static final Map<String, CrimeCategory> map = new HashMap<>(values().length, 1);

  static {
    for (CrimeCategory c : values()) map.put(c.category, c);
  }

  private final String category;

  private CrimeCategory(String category) {
    this.category = category;
  }

  public static CrimeCategory of(String name) {
    CrimeCategory result = map.get(name);
    if (result == null) {
      throw new IllegalArgumentException("Invalid category name: " + name);
    }
    return result;
  }
} 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-03-12T19:29:54.647

向`CrimeCategory`枚举添加静态方法：

```
public static CrimeCategory valueOf(String name) {
    for (CrimeCategory category : values()) {
        if (category.category.equals(name)) {
            return category;
        }
    }    
    throw new IllegalArgumentException(name);
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-10-12T18:20:42.147

基于实例字段的值返回枚举常量的静态工厂方法采用其他答案中描述的两种形式之一：基于迭代枚举值的解决方案，或基于`HashMap`.

对于常量数量较少的枚举，迭代解决方案应该与`HashMap`解决方案一样高效（这需要计算哈希码，将其与存储桶匹配，并假设不会发生哈希冲突）。

对于较大的枚举，基于映射的解决方案将具有更高的性能（但需要内存中的存储空间）。但是，如果不经常调用工厂方法，那么使用映射对整体性能的提升可能仍然非常小。

对静态工厂方法使用迭代查找或基于映射的查找的总体决定最终将取决于您的要求和环境。从迭代查找开始，然后在分析显示实际性能问题时更改为基于映射的实现永远不会错。

最后，从 Java 8 开始，`Streams`API 支持基于管道的映射解决方案（其性能应该类似于迭代解决方案）。例如，假设您想创建一个接口，您可以在任何枚举类上使用该接口来表达您的意图，即它应该可以通过它的实例字段之一进行匹配。我们称之为接口`Matchable`。该接口定义了一个方法，该方法返回您要匹配的实例字段（例如。`getField()`）。这个接口还可以定义一个静态工厂方法来从任何实现的枚举类返回一个常量：

```
interface Matchable {

    Object getField();

    public static <E extends Enum<E> & Matchable> E forToken(Class<E> cls, Object token) {

        return Stream.of(cls.getEnumConstants())
            .filter(e -> e.getField().equals(token))
            .findFirst()
            .orElseThrow(() -> new IllegalArgumentException("Unknown token '" +
                    token + "' for enum " + cls.getName()));
    }
} 
```

现在，您定义的任何实现的枚举类都`Matchable`可以使用`Matchable.forToken()`静态工厂方法来查找其实例字段值与提供的参数匹配的枚举常量。

泛型类型声明`E extends Enum<E> & Matchable`确保作为参数传递给方法的类型标记将用于实现的枚举类`Matchable`（否则代码将无法编译）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-11-23T14:00:30.457

Assylias的回答很棒。虽然我会`Optional`从工厂方法返回一个让客户端处理找不到枚举的情况（当然，`IllegalArgumentException`如果你在内部使用这个枚举并且你认为用错误的参数调用这个方法永远不会发生，那么抛出可能会更好 -这是你的选择）。

而且我会将它包装`Map`成不可修改的包装器，以免在您的枚举中意外修改它（这`Map`是私有的，但有人可以稍后在添加新功能时对其进行修改 - 它至少会强制考虑它）：

```
enum CrimeCategory {
    ASBO("Anti Social Behaviour"),
    BURG("Burglary"),
    CRIMDAM("Criminal Damage And Arson"),
    DRUGS("Drugs"),
    OTHTHEFT("Other Theft"),
    PUPDISOR("Public Disorder And Weapons"),
    ROBBERY("Robbery"),
    SHOPLIF("Shoplifting"),
    VEHICLE("Vehicle Crime"),
    VIOLENT("Violent Crime"),
    OTHER("Other Crime");

    private static final Map<String, CrimeCategory> MAP;

    static {
         Map<String, CrimeCategory> crimeCategoryMap = Arrays.stream(values())
                .collect(toMap(cg -> cg.category, e -> e));
         MAP = Collections.unmodifiableMap(crimeCategoryMap);
    }

    private final String category;

    private CrimeCategory(String category) {
        this.category = category;
    }

    public static Optional<CrimeCategory> of(final String name) {
        return Optional.ofNullable(MAP.get(name));
    }
} 
```

# r - 将绘图包装在 Rmd 文件中的另一个 html 容器中

> ID：15370291
> 
> 赞同：6
> 
> 时间：2013-03-12T19:23:41.680
> 
> 标签：r, knitr

我有一种情况，出于显示目的，我需要将输出的绘图包装在`<div>`容器中。

在最基本的层面上，这是我想做的：

```
```{r fig.width=7, fig.height=6,results='asis',echo=FALSE}
cat('<div>')
plot(cars)
cat('</div>')
``` 
```

但是，输出文档如下所示：

`![plot of chunk unnamed-chunk-2](figure/unnamed-chunk-2.png)`

如果您需要“包装”输出，是否有解决方法？

同样的行为似乎只在包装情节时才会发生。否则，包括封闭标签将按预期工作：

```
```{r fig.width=7, fig.height=6,results='asis',echo=FALSE}
cat('<div>')
cat('</div>')
plot(cars)
cat('<h1>Hello</h1>')
``` 
```

然而，包装图像似乎打破了它。我也注意到`<img>`被包裹在`<p>`是否有可能阻止这种行为？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T23:59:59.437

这是一种方法。

1.  首先，我们创建一个块挂钩来将块输出包装在标签内。
2.  我们将`wrap = div`作为块选项传递给 wrap inside `div`。
3.  设置`out.extra = ""`为`knitr`输出 html 以进行绘图输出。请注意，这仅适用于`div`tag 而不是`span`，因为 markdown 是在`span`tag.s中解析的

完毕！

这是Rmd、md 和 html 文件的要点，这里是[html](https://gist.github.com/ramnathv/d99463fa954e2631389c)[预览](http://htmlpreview.github.com/?https://gist.github.com/ramnathv/d99463fa954e2631389c/raw/90bdaa4437e0a5f51c48d88a4289c03fa47abd3c/wrap_chunk.html)

```
## knitr Chunk Hook to Wrap

```{r setup, echo = F}
knit_hooks$set(wrap = function(before, options, envir){
  if (before){
    paste0('<', options$wrap, '>')
  } else {
    paste0('</', options$wrap, '>')
  }
})
```

```{r comment = NA, echo = F, wrap = 'div', out.extra=""}
plot(mtcars$mpg, mtcars$wt)
``` 
```

# html - 简单的 html 5 画布不起作用

> ID：15370292
> 
> 赞同：0
> 
> 时间：2013-03-12T19:23:43.777
> 
> 标签：html, visual-studio

当我从visualstudio 2012 express运行它时，为什么它不能在我的Firefox中工作。它适用于 jsfiddle.net

```
<!DOCTYPE HTML>
<html>
  <head>
      <title></title>
    <style>
      body {
        margin: 0px;
        padding: 0px;
      }
    </style>
  </head>
  <body>
    <canvas id="myCanvas" width="578" height="200"></canvas>
    <script>
        var canvas = document.getElementById('myCanvas');
        var context = canvas.getContext('2d');

        context.beginPath();
        context.moveTo(100, 150);
        context.lineTo(450, 50);
        context.stroke();
    </script>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:35:33.997

在 Firefox 18.0.1 中为我工作。您是否尝试直接打开 HTML 文件？只是为了检查问题出在您的浏览器还是您的visualstudio？

还要检查是否在 Firefox 中启用了 JS：

启用和禁用 JavaScript

在 Firefox 中，您可以配置是否允许执行网页中的 JavaScript。要在 Firefox 中允许 JavaScript：

> *   在 Firefox 窗口顶部，单击 Firefox 按钮，然后选择选项
> *   在“选项”窗口中，选择“内容”面板。
> *   启用 JavaScript：选择此选项以允许 JavaScript 在您的计算机上执行。
> *   要更改高级设置，请单击高级...。
>     
>     
> *   单击“确定”关闭“选项”窗口

@MarcB 询问 JS 错误。有没有？

# jquery - 选择器上下文并不总是有效的？

> ID：15370294
> 
> 赞同：0
> 
> 时间：2013-03-12T19:23:50.470
> 
> 标签：jquery, selector, implementation

我有一个这样的代码块：

```
function funcName() {
    if(isOverlap("#obj1", ".obj2") == true) {
        doThisFunc(".obj2");
    }
}

function isOverlap(obj1, obj1){
    //check to see if objects overlap, returns true if so
}

function doThisFunc(obj1){
    counter++;
    $(obj1, this).remove();
} 
```

但这不会删除试图删除的类的特定实例，实际上它根本不会删除任何东西。你能向我解释为什么选择器上下文在这种情况下无效，以及一种只删除一个重叠的实例的方法吗？也许使用`.on()`and `.trigger()`？（我还不是很清楚这些是做什么的）

***编辑：*** [这](http://jsfiddle.net/Zeaklous/jh7LD/25/)是该项目的链接。if 语句位于 JavaScript 部分的第 157 行。“doThisFunc”实际上`getCoin(obj1)`是在同一部分的第 180 行开始的。我尝试使用 Vega 的补救措施，但我无法让它发挥作用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T19:25:32.877

函数中的`this`引用`doThisFunc`将是`window`对象。调用函数时，您没有维护上下文。从处理程序调用外部函数以维护上下文时使用`.call`或。`.apply`

```
doThisFunc.call(this, ".obj2"); 
```

# ruby-on-rails - Ruby 中用户输入字符串的插值

> ID：15370302
> 
> 赞同：1
> 
> 时间：2013-03-12T19:24:11.767
> 
> 标签：ruby-on-rails, ruby, string-interpolation

我不能强烈地制定我现在需要的东西，但想法是这样的：

用户输入一些看起来像模板的字符串

```
'Welcome to #{country}!' # or 'Welcome to %%country%%!', it's not essential 
```

是否有一些宝石（或者可能是像 Erb 这样的标准工具），可以做两件事：

1.  验证给定的字符串（即，如果我只允许`country`作为参数传递，带有其他参数的字符串将无效）

2.  用传递的参数插入给定的字符串（即`some_method('Welcome to #{country}!', country: 'Russia')) # => 'Welcome to Russia!'`）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-12T19:44:56.683

```
"Welcome to %{country}!" % {country: "Russia"}
# => "Welcome to Russia!"

"Welcome to %{country}!" % {person: "John"}
# => KeyError: key{country} not found 
```

# mysql - 如何在 SQL 查询中创建一种 IF

> ID：15370304
> 
> 赞同：1
> 
> 时间：2013-03-12T19:24:15.123
> 
> 标签：mysql, sql

我有两张表，需要加入。他们看起来像这样

![在此处输入图像描述](../Images/0c8fd05d2365101fe9620bf780f88b02.png)

![在此处输入图像描述](../Images/42769629f90e786d092097fe656eaa2c.png)

我需要加入它们，以便我拥有两个表中的所有数据，然后显示这样的信息 - 如果有德语翻译，则仅显示德语。如果没有德语，则显示英语（适用于所有对象）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T19:29:50.817

```
select  eng.entryid
,       coalesce(ger.name, eng.name)
from    YourTable eng
left join
        YourTable ger
on      ger.entryid = eng.entryid
        and ger.lang = 'ger'
where   eng.lang = 'eng' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T19:35:14.473

```
SELECT f1.id,f1.lang,f1.name
FROM foo AS f1
LEFT JOIN foo AS f2
ON f1.id=f2.id AND f1.lang<>f2.lang AND f2.lang='ger'
WHERE f2.id IS NULL 
```

[http://sqlfiddle.com/#!2/a0a75/9](http://sqlfiddle.com/#!2/a0a75/9)

如果不仅仅是英语和德语，最后一行应更改为

```
WHERE f2.id IS NULL AND (f1.lang='ger' OR f1.lang='eng') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T19:44:32.407

尝试：

```
select entry_id,
       case max(lang)
           when 'ger' then max(case lang when 'ger' then name end)
           else max(name)
       end as trans_name
from your_table
group by entry_id 
```

# php - 如何使用 Symfony2 从表中创建实体

> ID：15370309
> 
> 赞同：0
> 
> 时间：2013-03-12T19:24:25.790
> 
> 标签：php, symfony

我有一个给定的表，我想插入到我的数据库中。我知道 S2 可以从实体创建表，但相反的可能吗？我的意思是，是否可以从给定的表中创建实体？

否则，我想我只需要创建一个实体来对应我的表结构。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T19:43:12.990

```
php app/console doctrine:mapping:import AcmeBlogBundle annotation
php app/console doctrine:generate:entities AcmeBlogBundle 
```

这是官方文档中的一个示例。此代码从您的数据库创建所有实体（如果您在配置文件中指定了数据库）。

# javascript - 通过 jquery 使用另一个 html 文件的内容更改 div 内容

> ID：15370310
> 
> 赞同：6
> 
> 时间：2013-03-12T19:24:27.230
> 
> 标签：javascript, jquery, html

首先，我花了最后几个小时浏览相关主题的 stackoverflow。他们中的许多人似乎与我遇到的问题非常相似，甚至有一对几乎与我的问题非常相似。但是，对他们有用的修复似乎对我不起作用。我认为最好将我的代码发布并让其他人查看它们；我会尽量详细。

我正在尝试做的事情：我有一个带有 li 内部链接的页面设置，当它被点击时，它应该从我制作的另一个页面中提取一些 html 内容。更具体地说，它应该从该页面中的特定 div id 中提取 html 内容。我无法从中提取任何内容，并将其发布到我的主页 div。

我的带有导航菜单的 HTML 部分：

```
<ul id="nav_main">
    <li class="navLink">link here</li>
</ul> 
```

应该动态更改（单击时）的 div 标记为：

```
<div id="main_content">
    <p></p>
</div> 
```

我从中提取数据的另一个 .html 文件有一个如下所示的 div：

```
<div id="one">blahbalhblahblahlbhalbhlah</div> 
```

我遇到困难的部分是javascript代码。我尝试过使用加载和获取，但似乎都没有工作。这是我的骨架代码：

```
$(document).ready(function(){
    $("#nav_main li").on("click", function() {
        // here was my first attempt:
        $("#main_content p").load("contentholder.html #one");

        // my second attempt, using get():
        $.get("contentholder.html", function(data) {
            $("#main_content p").html(data)
        });
}); 
```

我的问题是#main_content 似乎没有改变。我认为问题在于加载和获取尝试不起作用，它们似乎没有按预期提取数据。

所有这些文件都在我的本地驱动器上。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T19:26:16.083

```
$(document).ready(function(){
     // your code here
}); 
```

你错过了`function(){`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T19:36:54.437

除了 Brad M 指出的语法错误之外，请记住，如果 AJAX 调用不是从服务器发出的，大多数浏览器都会阻止它们，所以如果你没有运行本地主机，你很可能会得到一个访问控制- 进行 AJAX 调用时出现允许来源错误。

在此处查看更多信息：[在 Javascript 中获取本地 HTML 文件的 HTML 代码](https://stackoverflow.com/questions/8486590/get-html-code-of-a-local-html-file-in-javascript)

# facebook - Facebook 无法从博客中获取正确的图片尺寸

> ID：15370317
> 
> 赞同：1
> 
> 时间：2013-03-12T19:24:43.157
> 
> 标签：facebook, image, thumbnails, blogger

一位朋友需要博客帮助，问题是当他从博客发布内容到 facebook 时，他无法获得正确的缩略图，问题是在 facebook 调试器中，它获得的图像是图片的缩略图。该博客在博客上，并且已使用共享按钮的插件（我不知道是哪个插件）。抱歉，我没有发布一些代码来更好地帮助您，但我只是在黑暗中寻找解决方案。

**编辑**

我添加了这些，但我又遇到了图片的问题，fb 调试器说它太小了。`data:blog.postImageThumbnailUrl`负责大小（72x72 生成）。有没有办法改变这个？

```
xmlns:og='http://ogp.me/ns# at the end of the html tag

<b:if cond='data:blog.pageType == &quot;item&quot;'>
<meta expr:content='data:blog.pageName' property='og:title'/>
<meta expr:content='data:blog.canonicalUrl' property='og:url'/>
<meta content='article' property='og:type'/>
</b:if>
<meta expr:content='data:blog.title' property='og:site_name'/>
<b:if cond='data:blog.postImageThumbnailUrl'>
<meta expr:content='data:blog.postImageThumbnailUrl' property='og:image'/>
<b:else/>
<meta content='https://fbcdn-sphotos-d-a.akamaihd.net/hphotos-ak-ash4/487911_488950037808372_1165794149_n.jpg' property='og:image'/>
</b:if>
<b:if cond='data:blog.metaDescription != &quot;&quot;'>
<meta expr:content='data:blog.metaDescription' name='og:description'/>
</b:if> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-03-05T16:09:55.440

您可以使用标签获得更高分辨率的图像 -`data:blog.postImageUrl`而不是`data:blog.postImageThumbnailUrl`

但截至 2016 年底，Blogger 会通过Blogger 模板中的自动添加`og:image`标签（以及`og:url`、`og:title`和`og:description`） 。`<b:include data='blog' name='all-head-content'/>`图像分辨率也更高（设置为 1200x630 像素，以符合[https://developers.facebook.com/docs/sharing/best-practices#images](https://developers.facebook.com/docs/sharing/best-practices#images)中规定的准则）

# jquery - 使用 jQuery 将一个标签添加到另一个标签中

> ID：15370323
> 
> 赞同：2
> 
> 时间：2013-03-12T19:24:54.873
> 
> 标签：jquery, html, tags

有一个困惑，我希望你们好心的人能帮我解决...

目标：

使用 jQuery，我试图添加所有出现的：

```
<pre> ... </pre> 
```

和：

```
<pre><code> ... </code></pre> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T19:27:05.620

```
$('pre').wrapInner('<code>'); 
```

参考：[wrapInner](http://api.jquery.com/wrapInner/)

**[jsFiddle 示例](http://jsfiddle.net/j08691/3zbWL/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T19:27:03.760

```
$('pre').html('<code>'+$('pre').html()+'</code>'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T19:29:09.717

使用 .wrapInner()

```
$("pre").wrapInner("<code></code>"); 
```

# forms - 插入访问表表单

> ID：15370333
> 
> 赞同：1
> 
> 时间：2013-03-12T19:25:20.720
> 
> 标签：forms, ms-access, vba, sql-insert

我创建了一个表，其目的是容纳我多年来创建的查询数据库，我创建了一个相应的表单来插入所有信息，但我无法让代码正常工作。

```
Private Sub cmd_go_Click()
Dim insertstring As String

    insertstring = "INSERT INTO KWTable (KW, Source, Code) VALUES (" & text_key.Value & "," & combo_source.Value & "," & text_code.Text & ");"

    DoCmd.RunSQL insertstring

End Sub 
```

目标表上的三列是 KW、Source 和 Code，插入其中的值是 text_key（这是我输入的关键字，因此我可以稍后在需要引用某些内容时搜索它们）、combo_source.Value（其中是一个组合框，其中包含保存这些代码和查询的数据库列表，我将在插入表时选择正确的）和 text_code（这是查询的实际代码本身）

该代码应该将关键字（文本）源（组合框列表）和代码（文本）插入到 KWTable 中。但是当我单击添加记录按钮时，我得到一个“运行时错误 424：需要对象”错误框，并且它突出显示了整个插入字符串行。我无法解决错误在哪里。有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T20:14:40.797

### 选项1

正如 Remou 所说，您的文字周围没有引号。我在您的每个字段周围添加了一些单引号，并添加了一些换行符以便于阅读。那样有用吗？

```
Private Sub cmd_go_Click()
    Dim insertstring As String
    insertstring = "INSERT INTO KWTable (KW, Source, Code) VALUES ('" & _
                    text_key.Value & "','" & _
                    combo_source.Value & "','" & _
                    text_code & "');"
    DoCmd.RunSQL insertstring

End Sub 
```

### 选项 2

我认为这将处理在您的表中存储单引号和双引号：

```
Private Sub cmd_go_Click()
Dim rst As recordset
Set rst = CurrentDb.OpenRecordset("KWTable ")
With rst
     .addnew
     .fields("KW")=text_key.Value
     .fields("Source")=combo_source.Value
     .fields("Code")=text_code
     .update
 End with
 End sub 
```

# php - 如何为 GET 和 POST 编写一个通用的 XMLhttpRequest 函数？

> ID：15370342
> 
> 赞同：0
> 
> 时间：2013-03-12T19:25:39.297
> 
> 标签：php, javascript, ajax, xmlhttprequest

我编写了用于制作 ajax POST 的 XMLhttpRequest 函数。当我添加新作业时，调用此函数并且添加的作业也以 HTML 显示。代码如下。

```
function req_add()
        {
            var hr = new XMLHttpRequest();
            var url = "To-Do.php";
            var content = document.getElementById("content").value;
            var vars = "content=" + content;

            hr.open("POST", url, true);
            hr.setRequestHeader("Content-type","application/x-www-form-
urlencoded");
            hr.onreadystatechange=function()
            {
                if(hr.readyState == 4 && hr.status == 200)
                {
                    var return_data = hr.responseText;
                    document.getElementById("result").innerHTML               
= return_data;
                }
            }
            hr.send(vars);
            document.getElementById("result").innerHTML =   

"Processing...";
        } 
```

之前我使用 $.getJSON 进行 GET 操作。现在我想编写一个可以完成 GET 和 POST 请求的函数。函数将像这样=> makeRequest(type,params,URL) ，type 用于 POST和获取。数据返回成功与否都会有onsuccess函数。而我写普通函数时会使用hr.send()吗？谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-13T14:31:56.243

这确实是可能的，当你谷歌它时有很多信息。搜索有关 XMLHttpRequest 对象以及它如何支持 GET/POST 请求以及如何传递参数的信息。

是的：您可以使用通用 XMLHttpRequest 对象（hr 变量）并有条件地/切换不同类型的请求。一定要正确处理错误和事件，你现在错过了很多。

你可以在这里找到一些信息：http: [//www.w3schools.com/ajax/ajax_xmlhttprequest_send.asp](http://www.w3schools.com/ajax/ajax_xmlhttprequest_send.asp)

在下面编辑，这适用于我的本地服务器，但是 js 有很多工作要做。您应该测试同时请求的完整性，例如...

编辑的HTML：

```
<html>
    <head>
        <title>To-Do</title>
        <meta name="description" content="To-Do" charset="utf-8">
        </meta>
        <script language="javascript" type="text/javascript">
            function mr(type, URL) {

                var hr = new XMLHttpRequest();

                //SET UP VARS CORRECTLY FOR GET/POST
                var content = document.getElementById("content").value;
                var vars = "content=" + content;

                if (type == 'GET')
                    URL = URL + '?' + vars;

                //SET EVENTHANDLERS (THERE ARE ALOT MORE)
                hr.onreadystatechange = function() {
                    if (hr.readyState == 4 && hr.status == 200) {
                        var return_data = hr.responseText;
                        document.getElementById("result").innerHTML = return_data;
                    }

                }
                //OPEN THE REQUEST
                hr.open(type, URL, true);

                //SET HEADERS
                hr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");

                switch(type) {
                    case 'GET':
                        hr.send();
                        break;
                    case 'POST':
                        hr.send(vars);
                        break;
                }

                document.getElementById("result").innerHTML = "Processing...";

            }
        </script>
        <style type="text/css">
            button {
                cursor: pointer
            }
            div {
                color: #666;
                font: normal 13px "Trebuchet MS";
                width: 350px;
                padding: 10px
            }
        </style>
    </head>

    <body>
        <div>
            Add Item:
            <input type="text" name="name" id="content">
            <br>
            <button onclick="javascript:mr('POST','post.php');" type="button" id="btn1">
                Submit
            </button>
            <br>
            <button onclick="javascript:mr('GET','get.php');" type="button" id="btn2" >
                List Jobs
            </button>
            <div id="result"></div>
        </div>
    </body>
</html> 
```

返回的 PHP 文件：

获取.php

```
<?php echo "GET\n"; if(isset($_GET)) print_r($_GET); ?> 
```

post.php

```
<?php echo "POST\n"; if(isset($_POST)) print_r($_POST); ?> 
```

# ios - 非常缓慢的软件向量，尤其是 CoreGraphics 与 OpenGL

> ID：15370344
> 
> 赞同：7
> 
> 时间：2013-03-12T19:25:45.913
> 
> 标签：ios, opengl-es, core-graphics, vector-graphics, openvg

我正在开发一个需要实时绘制贝塞尔曲线以响应用户输入的 iOS 应用程序。起初，我决定尝试使用 CoreGraphics，它有一个很棒的矢量绘图 API。然而，我很快发现性能非常缓慢，极其缓慢，以至于我的视网膜 iPad 上只有一条曲线时帧速率开始严重下降。（诚​​然，这是一个使用低效代码的快速测试。例如，曲线每帧都会重新绘制。但今天的计算机肯定足够快，可以每 1/60 秒绘制一条简单曲线，对吧？！）

在这个实验之后，我切换到了 OpenGL 和[MonkVG](https://github.com/micahpearlman/MonkVG)库，我高兴极了。我现在可以同时渲染数百条曲线而不会出现任何帧率下降，对保真度的影响很小（对于我的用例）。

1.  是否有可能我以某种方式滥用了 CoreGraphics（以至于它比 OpenGL 解决方案慢了几个数量级），还是性能真的那么糟糕？根据 StackOverflow/论坛关于 CG 性能的问题和答案的数量，我的预感是 CoreGraphics 存在问题。（我看到有几个人说 CG 不应该进入运行循环，它应该只用于不频繁的渲染。）从技术上讲，为什么会出现这种情况？
2.  如果 CoreGraphics 真的那么慢，那么 Safari 究竟是如何运行得如此流畅的呢？我的印象是 Safari 不是硬件加速的，但它必须同时显示数百个（如果不是数千个）矢量字符而不会丢失任何帧。
3.  更一般地说，使用大量矢量的应用程序（浏览器、Illustrator 等）如何在没有硬件加速的情况下保持如此快速？（据我了解，现在许多浏览器和图形套件都带有硬件加速选项，但默认情况下通常不会打开。）

* * *

更新：

我编写了一个快速测试应用程序来更准确地测量性能。下面是我的自定义 CALayer 子类的代码。

NUM_PATHS 设置为 5，NUM_POINTS 设置为 15（每条路径 5 个曲线段），代码在我的 iPad 3 上以非视网膜模式下 20fps 和视网膜模式下 6fps 运行。分析器将 CGContextDrawPath 列为具有 96% 的 CPU 时间. 是的——显然，我可以通过限制我的重绘矩形来进行优化，但是如果我真的真的需要 60fps 的全屏矢量动画怎么办？

OpenGL 把这个测试当做早餐吃。矢量图怎么可能这么慢？

```
#import "CGTLayer.h"

@implementation CGTLayer

- (id) init
{
    self = [super init];
    if (self)
    {
        self.backgroundColor = [[UIColor grayColor] CGColor];
        displayLink = [[CADisplayLink displayLinkWithTarget:self selector:@selector(updatePoints:)] retain];
        [displayLink addToRunLoop:[NSRunLoop mainRunLoop] forMode:NSRunLoopCommonModes];
        initialized = false;

        previousTime = 0;
        frameTimer = 0;
    }
    return self;
}

- (void) updatePoints:(CADisplayLink*)displayLink
{
    for (int i = 0; i < NUM_PATHS; i++)
    {
        for (int j = 0; j < NUM_POINTS; j++)
        {
            points[i][j] = CGPointMake(arc4random()%768, arc4random()%1024);
        }
    }

    for (int i = 0; i < NUM_PATHS; i++)
    {
        if (initialized)
        {
            CGPathRelease(paths[i]);
        }

        paths[i] = CGPathCreateMutable();

        CGPathMoveToPoint(paths[i], &CGAffineTransformIdentity, points[i][0].x, points[i][0].y);

        for (int j = 0; j < NUM_POINTS; j += 3)
        {
            CGPathAddCurveToPoint(paths[i], &CGAffineTransformIdentity, points[i][j].x, points[i][j].y, points[i][j+1].x, points[i][j+1].y, points[i][j+2].x, points[i][j+2].y);
        }
    }

    [self setNeedsDisplay];

    initialized = YES;

    double time = CACurrentMediaTime();

    if (frameTimer % 30 == 0)
    {
        NSLog(@"FPS: %f\n", 1.0f/(time-previousTime));
    }

    previousTime = time;
    frameTimer += 1;
}

- (void)drawInContext:(CGContextRef)ctx
{
//    self.contentsScale = [[UIScreen mainScreen] scale];

    if (initialized)
    {
        CGContextSetLineWidth(ctx, 10);

        for (int i = 0; i < NUM_PATHS; i++)
        {
            UIColor* randomColor = [UIColor colorWithRed:(arc4random()%RAND_MAX/((float)RAND_MAX)) green:(arc4random()%RAND_MAX/((float)RAND_MAX)) blue:(arc4random()%RAND_MAX/((float)RAND_MAX)) alpha:1];
            CGContextSetStrokeColorWithColor(ctx, randomColor.CGColor);

            CGContextAddPath(ctx, paths[i]);
            CGContextStrokePath(ctx);
        }
    }
}

@end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T12:43:18.410

您真的不应该将 Core Graphics 绘图与 OpenGL 进行比较，您正在比较完全不同的功能以实现非常不同的目的。

在图像质量方面，Core Graphics 和 Quartz 将远远优于 OpenGL，而且花费更少。Core Graphics 框架旨在实现最佳外观、自然抗锯齿的线条和曲线以及与 Apple UI 相关的润色。但这种图像质量是有代价的：渲染速度。

另一方面，OpenGL 的设计以速度为优先。高性能、快速绘图是 OpenGL 难以匹敌的。但是这种速度是有代价的：使用 OpenGL 获得平滑和优美的图形要困难得多。有许多不同的策略可以做一些像 OpenGL 中的抗锯齿一样“简单”的事情，Quartz/Core Graphics 更容易处理这些事情。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-07T18:03:53.813

免责声明：我是 MonkVG 的作者。

MonkVG 比 CoreGraphics 快得多的最大原因实际上并不是它使用 OpenGL ES 作为渲染支持来实现，而是因为它通过在任何渲染完成*之前将轮廓细分为多边形来“作弊”。*轮廓细分实际上非常缓慢，如果您要动态生成轮廓，您会看到速度大大减慢。OpenGL 支持（与使用直接位图渲染的 CoreGraphics 相反）的巨大好处是，任何诸如平移、旋转或缩放的变换都不会强制轮廓的完全重新镶嵌——它本质上是“免费的”。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-12T20:10:28.170

首先，看看[为什么 UIBezierPath 比 Core Graphics 路径快？](https://stackoverflow.com/questions/6327817/why-is-uibezierpath-faster-than-core-graphics-path)并确保您以最佳方式配置路径。默认情况下，`CGContext`会为路径添加很多“漂亮”选项，这会增加很多开销。如果您关闭这些功能，您可能会发现速度显着提高。

我在 Core Graphics Bézier 曲线中发现的下一个问题是当你在一条曲线中有许多组件时（当我超过大约 3000-5000 个元素时，我看到了问题）。我发现在`CGPathAdd...`. 减少路径中的元素数量可能是一个重大胜利。从我去年与 Core Graphics 团队的谈话来看，这可能是 Core Graphics 中的一个错误，并且可能已经修复。我没有重新测试。

* * *

编辑：通过进行以下更改，我在 iPad 3 上的 Retina 中看到 18-20FPS：

移动`CGContextStrokePath()`外循环。你不应该抚摸每条路径。你应该在最后抚摸一次。这将我的测试从 ~8FPS 提高到 ~12FPS。

关闭抗锯齿（可能在您的 OpenGL 测试中默认关闭）：

```
CGContextSetShouldAntialias(ctx, false); 
```

这让我达到了 18-20FPS（Retina）和高达 40FPS 左右的非 Retina。

我不知道你在 OpenGL 中看到了什么。请记住，Core Graphics 旨在使事物变得美丽；OpenGL 旨在让事情变得更快。Core Graphics 依赖于 OpenGL；所以我总是希望编写良好的 OpenGL 代码更快。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-09T23:10:08.177

您的减速是因为这行代码：

```
[self setNeedsDisplay]; 
```

您需要将其更改为：

```
[self setNeedsDisplayInRect:changedRect]; 
```

由您来计算每帧更改了哪个矩形，但是如果您正确执行此操作，您可能会看到超过一个数量级的性能改进而没有其他更改。

# c++ - 在新的引擎盖下

> ID：15370347
> 
> 赞同：4
> 
> 时间：2013-03-12T19:25:49.627
> 
> 标签：c++, malloc, new-operator

我在讨论多伦对[这个](https://stackoverflow.com/questions/3559938/memory-leak-unit-test-c/3560818?noredirect=1#comment21708367_3560818)问题的回答，据说

> [one] 可能会发现 C++ 标准库定义了 new 以在后台使用 malloc。

我想知道这是不是真的。C++ 标准是否定义`new`使用`malloc`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T19:28:58.593

> C++ 标准是否定义了新的使用 malloc？

*C++ 标准*（即定义 C++ 语言的标准文档）没有`operator new`根据`malloc()`. 但是，C++ 标准库的大多数*实现*`malloc()`都使用分配内存是合理的。

根据 C++11 标准的第 18.6.1.1/4 段（约`operator new`）：

> *默认行为*
> 
> *   执行循环：在循环内，函数首先尝试分配请求的存储空间。**未指定****尝试是否涉及对标准 C 库函数的调用`malloc`**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T19:28:11.040

> C++ 标准是否定义了新的使用 malloc？

不，尽管许多实现为默认实现这样做（为and`new`提供单独的堆没有多大意义）。`malloc``new`

此外，使用的分配器函数`new`是可定制的（参见 §3.7.4.1），因此假设`new' will always call`malloc` 是特别错误的，即使在给定的实现上也是如此。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T19:29:32.237

不，`malloc`只是分配内存。但是`new`分配内存并调用构造函数（如果需要）。

可能在您实现的某些部分中`new`找到`malloc`类似内存分配器的机制。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-12T19:29:56.223

我不这么认为，因为`malloc`不知道构造函数，并且除了声明一块内存之外，您还需要一些额外的东西

# ios - iOS 中蒙版时的图像模糊/质量损失

> ID：15370353
> 
> 赞同：3
> 
> 时间：2013-03-12T19:26:05.787
> 
> 标签：ios, ipad, cocoa-touch, ios6

我正在使用此功能屏蔽图像（左）

```
- (UIImage*)maskWithMask:(UIImage *)maskImage
{
    CGImageRef maskRef = maskImage.CGImage;

    CGImageRef mask = CGImageMaskCreate(CGImageGetWidth(maskRef),
                                    CGImageGetHeight(maskRef),
                                    CGImageGetBitsPerComponent(maskRef),
                                    CGImageGetBitsPerPixel(maskRef),
                                    CGImageGetBytesPerRow(maskRef),
                                    CGImageGetDataProvider(maskRef), NULL, false);

    CGImageRef masked = CGImageCreateWithMask([self CGImage], mask);
    UIImage *maskedImage = [UIImage imageWithCGImage:masked];

    CGImageRelease(masked);

    UIGraphicsBeginImageContextWithOptions(maskedImage.size,NO,0.0);
    [maskedImage drawAtPoint:CGPointZero];
    UIImage *newImg = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return newImg;
} 
```

蒙版后，生成的图像似乎质量下降/略微模糊，如照片右侧所示。我无法找出原因。我知道这不是重大损失，但足以在视网膜显示器上注意到，这就是我正在开发的。有什么想法吗？

![蒙版前后图像对比](../Images/774cdd66af2b9eeaef059330f02f4b9c.png)

# c# - 将 JSON (jQuery) 映射到 KeyValuePair

> ID：15370358
> 
> 赞同：2
> 
> 时间：2013-03-12T19:26:33.353
> 
> 标签：c#, json, keyvaluepair

我有一个带有许多属性的 JSON 对象，我通过 jQuery.ajax() 提交给 C# Web 服务 - 它看起来像这样：

```
var obj = {};
obj.LanguageCode = 1031;
obj.Gender = { 'Geschlecht': 'Mann' };
obj.City = { 'Stadt': 'Berlin' };
... 
```

某些属性（例如 Gender 和 City）存储我想映射到 KeyValuePair 的本地化/翻译提示和响应。我尝试以不同的方式格式化 Javascript，但数据仅在数据类型为 Dictionary 时才通过 - 当数据类型为 KeyValuePair 时，它不起作用。例如：

```
private Dictionary Gender { get; set; } // works: Gender[0] == {[Geschlecht,Mann]}
private KeyValuePair City { get; set; } // doesn't work: City == {[,]} 
```

如有必要，我可以使用 Dictionary，因为它可以工作，但似乎 KeyValuePair 更合适且更易于使用。您可以将 Javascript 对象映射到 KeyValuePairs，还是我坚持使用 Dictionary？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T19:33:35.153

看起来您需要一个`KeyValuePair`对象集合，而不是单个对象（即使您的集合只有一个项目） - 这就是 Dictionary 的全部内容，一个带有一些助手的集合。

但就个人而言，我建议建立一个实际的类来代表你的价值观，更好地组织它——更冗长一些，但我认为这是值得的。

```
// C#
public class LocalAndTranslated {
    public string Localized { get;set; }
    public string Translated { get;set; }
}

// JS
obj.Gender = { Localized: "Geschlecht", Translated: "Man" }; 
```

如果你愿意，你甚至可以在 javascript 中定义一个“类”：

```
var LocalAndTranslated = (function() {
    function LocalAndTranslated(localized, translated) {
        this.Localized = localized;
        this.Translated = translated;
    }
    return LocalAndTranslated;
})();

obj.Gender = new LocalAndTranslated("Geschlecht", "Man"); 
```

# android - 使用 ExpandableListAdapter 时使用 union 子句会引发异常

> ID：15370361
> 
> 赞同：0
> 
> 时间：2013-03-12T19:26:47.697
> 
> 标签：android, expandablelistadapter

我正在尝试使用 ExpandableListAdapter 显示 ExpandableListView。我有几个问题。第一个是使用 UNION 如下：

```
 Cursor cur = db.rawQuery("select ig._id, ig.nombre, 0 tipo from InteresGrupo ig where ig.nombre<>'General' "+
                             "union "+
                             "select i._id, i.nombre, 1 tipo from Interes i "+
                             "inner join InteresGrupo g on i.interesGrupo=g._id "+
                             "where g.nombre='General' "+
                             "order by ig.nombre", null); 
```

这引发了下一个异常：

```
Couldn't read row 0, col -1 from CursorWindow.  Make sure the Cursor is initialized correctly before accessing data from it. 
```

SQL 在 SQLite 编辑器中运行良好。最后，我可以将“UNION”更改为“UNION ALL”（我仍然不知道为什么）。

当我尝试订购元素时，下一个问题（仍未解决）出现了。我用了下一句话：

```
 Cursor cur = db.rawQuery("select ig._id, ig.nombre, 0 tipo from InteresGrupo ig where ig.nombre<>'General' "+
                             "union all "+
                             "select i._id, i.nombre, 1 tipo from Interes i "+
                             "inner join InteresGrupo g on i.interesGrupo=g._id "+
                             "where g.nombre='General' "+
                             "order by 2", null); 
```

同样的例外。SQL 语句在 SQLite 编辑器中再次运行良好，所以我认为在适配器中使用 SQL 语句时一定有一些限制。

在调用适配器的任何方法之前抛出异常，因此它与适配器内部的代码无关，而只是 SQL 语句（我猜）。我发生在接下来的三行中的第三行：

```
 ExpandableListView epView = (ExpandableListView)findViewById(R.id.lvIntereses);
    mAdapter = new MyExpandableListAdapter(cur, this);
    epView.setAdapter(mAdapter); 
```

任何人都可以给小费吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T19:52:21.807

```
"union all"+"select .... 
```

结果在`union allselect`..

您需要在 union all 和 select 之间留一个空格

前任。`"union all " + "select ....`

要不就`"union all select ..."`

# ajax - AJAX 如何在 JSP 上使用 Spring 访问地图列表 JSON

> ID：15370365
> 
> 赞同：0
> 
> 时间：2013-03-12T19:26:55.367
> 
> 标签：ajax, json, spring, jsp, spring-mvc

我正在尝试使用以下代码填充组合框`list`和数据：`list2`

```
$("#collectionPeriod").change(
    function(){
        alert('collectionPeriodIndex === ' + $(this).find('option:selected').index());
        $.ajax({
            type: "GET",
            url: "${pageContext.request.contextPath}/collectionMonitorCampus.htm",
            data: {collectionPeriodIndex: $(this).find('option:selected').index(), sYearIndexNext: $('#sYear').find('option:selected').index(), sYearVal: $('#sYear').find('option:selected').val()},
            success: function(data) {
                $("#submission").prop("disabled", false);
                $("#submission").empty();
                $("#category").empty();

                $.each($.map(data.list, function(val) {
                     $('#category').append(new Option(val,val));
                     console.log("val1 " + val);
                }));

                $.each($.map(data.list2, function(val) {
                     $('#submission').append(new Option(val,val));
                     console.log("val2 " + val);
                }));
            }
        });

    }); 
```

我遇到的问题是控制台只打印`val2`值并且`val`被完全忽略。我如何访问这些数据有错误吗？

我的控制器`list`并`list2`定义为`List<String> returnList = new ArrayList<String>();`

我放置的模型`list`和`list1 in is`Map model = new HashMap();`

我将 ModelAndView 返回为：

`return new ModelAndView("jsonView", model);`

任何帮助将不胜感激！谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T19:35:55.040

`.each()`和都是`.map()`能够访问`data.list`. 阅读更多关于**[.each()](http://api.jquery.com/each/)**和**[.map()](http://api.jquery.com/jQuery.map/)**

您可以使用一个或另一个，您不需要两者：

```
$.map(data.list, function(val, i) {
    $('#category').append(new Option(val,val));
    console.log("val1 " + val);
}); 
```

或者

```
$(data.list).each(function(i, val) {
    $('#category').append(new Option(val,val));
    console.log("val1 " + val);
}); 
```

注意参数顺序，`.each()`与`.map()`.

# c# - 如何为异步方法创建虚拟存根？

> ID：15370367
> 
> 赞同：0
> 
> 时间：2013-03-12T19:26:56.387
> 
> 标签：c#, .net, async-await

我有基类并创建虚拟存根供订阅者使用。我刚刚迁移到 async/await 模式并且无法正确处理任务。

这是我希望它在基类中的方式：

```
public virtual Task<bool> OnBeforeSaveAsync()
{
    return new Task<bool>(p => true);
} 
```

基本上，如果实现类没有覆盖 - 我希望这个函数完成并返回“True”

我应该如何编码？

# heroku - 尝试 git push 到远程分支时出错（Heroku）

> ID：15370373
> 
> 赞同：3
> 
> 时间：2013-03-12T19:27:09.480
> 
> 标签：heroku, github, git-push

嗨，我尝试将本地更改推送到 heroku 生产，但出现以下错误

```
Zhens-MacBook-Pro:Dailymuses-Server-Side zaikshev88$ git push heroku-production master:master
To git@heroku.com:dailymuses.git
! [rejected]        master -> master (non-fast-forward)
error: failed to push some refs to 'git@heroku.com:dailymuses.git'
hint: Updates were rejected because the tip of your current branch is behind
hint: its remote counterpart. Merge the remote changes (e.g. 'git pull')
hint: before pushing again.
hint: See the 'Note about fast-forwards' in 'git push --help' for details. 
```

这里的问题是，当我尝试执行 git pull 时，我被告知一切都是最新的

```
Zhens-MacBook-Pro:Dailymuses-Server-Side zaikshev88$ git pull origin master
From github.com:mingyeow/Dailymuses-Server-Side
* branch            master     -> FETCH_HEAD
Already up-to-date. 
```

这里有什么问题，我该如何解决？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-12T20:13:52.097

您的`push`命令是远程`heroku-production`，但您的`pull`命令是远程`origin`。该`non-fast-foward`消息意味着您当前存储库中的历史记录与 Heroku 远程不同；可能有人通过一些合并或变基推送了一个分支。

我恳请您不要将 Heroku 用作权威的 git 遥控器。假设你不是，你可以强制推送 Heroku master 分支来解决这个问题。

```
git push -f heroku-production master:master 
```

# android - Android Media Recorder 导致设备在长时间录制后锁定

> ID：15370375
> 
> 赞同：1
> 
> 时间：2013-03-12T19:27:13.760
> 
> 标签：android, mediarecorder, android-mediarecorder

我目前正在使用 Android Media Recorder 在流式传输之前从相机中捕获视频。

我发现如果我长时间连续记录内容 45 分钟 + 设备最终会锁定并且以下错误会连续写入日志

> 03-12 12:09:26.430: E/Camera2-StreamingProcessor(128): onFrameAvailable: Camera 0: 没有可用的记录缓冲区，丢帧

最终应用程序将显示“停止响应对话框”，我可以终止该应用程序。

似乎发生此问题所需的时间长度取决于我录制的分辨率和质量以及我之前完成的录制会话的时间长度和数量。重启设备确实改善了这种情况，我曾经在 720p 重启后有 1 小时 10 分钟。

在长时间录制方面，Android 是否存在已知限制？

我相信设备上的相机应用程序确实施加了录制限制，这是正确的吗？

有谁知道我在上面看到的错误的任何解决方案？

# c++ - C++ .exe 停止工作

> ID：15370376
> 
> 赞同：1
> 
> 时间：2013-03-12T19:27:15.603
> 
> 标签：c++

我在使用 c++ 时遇到了非常困难的时期。我制作了一个 hello world，它已经编译为制作 YouTube.exe 和 main.o。我运行该程序，它打印出 hello world，但随后说 YouTube.exe 已停止工作。即使我将 main.o 移动到不同的目录，YouTube.exe 仍然会打印 hello world 并停止工作！所以我有2个问题：1.为什么main.o被删除后程序仍然打印hello world？2\. 为什么程序停止工作？这是代码：

```
main.cpp:

#include<iostream>

using namespace std;

int main(){

    int a;
    cout << "Hello World!";
    cin >> a; //to make the program pause

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T19:29:49.587

因为 .o 文件是包含您的程序的[目标文件](http://en.wikipedia.org/wiki/Object_file)，但它仍需链接并重新定位到真正的可执行二进制文件。

这意味着它`YouTube.exe`已经包含了里面的内容`main.o`，但是是可执行格式。

实际发生的是编译器生成**.o**文件（每个目标文件由自己编译），然后链接器将所有**.o**文件链接在一起，解决任何依赖关系并重新定位生成真实**.exe**文件所需的内容。

# javascript - iFrame：如何使用 javascript 将服务器响应 (HTML) 直接显示到 iFrame 中？

> ID：15370377
> 
> 赞同：2
> 
> 时间：2013-03-12T19:27:19.670
> 
> 标签：javascript, html, iframe

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T14:14:54.660

With vanilla JavaScript:

```
document.MyFrame.document.body.innerHTML = serverResponse 
```

..where you have `<iframe name="MyFrame"></iframe>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T19:34:44.753

Not sure if this will work, I do something similar using jquery (but could do it just as easily without)...

```
$('iframe').contents().find("html")
    .append($("<head></head><body> blah blah blah </body>")); 
```

# matplotlib - 散点图 X 轴上的日期标签

> ID：15370382
> 
> 赞同：0
> 
> 时间：2013-03-12T19:27:25.887
> 
> 标签：matplotlib, python-3.3

所以我刚刚安装了 Python3.3、Numpy、MySQL Connector 和 Matplotlib。我有一个包含大量数据的表，我在其中编写了一个查询，将其输出为类似于以下内容：

```
Timestamp(unix)  Data(float)
1353000347       90.7000
1353007787       90.7000
1353015227       90.7000
1353000347       89.6899
1353007787       90.7000
1353015227       90.7000 
```

因此，通过大量的试验和错误并将教程和其他问题拼凑在一起，我最终得到了这个 python 脚本：

```
import matplotlib.pyplot as plt
import numpy as np
import mysql.connector

#Open DB Connection
cnx = mysql.connector.connect(host='localhost',database='db',
                              user='user',password='')
#Get Buffered Cursor
curA = cnx.cursor(buffered=True)

curA.execute(
"""
SELECT UNIX_TIMESTAMP(`timestamp`),`data1`
   FROM `data`
"""
)

rows = np.array(curA.fetchall())
cnx.close()

x = rows[:,0]
y = rows[:,1]
plt.scatter(x,y,20,'r','o',None,None,None,None,0.05,0)
plt.show() 
```

我有很多数据点会重叠（相同的坐标），所以我希望 alpha 真的很低。我在这里得到了我想要的：

![在此处输入图像描述](../Images/162e09fab20c0a02bee01553b75d61a8.png)

无论如何，我想要的是简单地将刻度标记格式化为日期（例如月、年）。我在这个问题上进行了很多搜索，并在[这里](https://stackoverflow.com/questions/5498510/creating-graph-with-date-and-time-in-axis-labels-with-matplotlib)找到了一个类似的问题，但是我无法对其进行调整或理解如何将其应用于我的脚本。这么简单的事情似乎过于复杂？

# android - 为什么 getFirstVisiblePosition 旋转到水平时正确，但旋转回来时错误？

> ID：15370383
> 
> 赞同：1
> 
> 时间：2013-03-12T19:27:31.513
> 
> 标签：android, listview, lifecycle

我有一个 Android 列表视图。当用户转动设备时，我希望列表的可见部分保持（大致）相同。所以我保存了销毁活动的第一个可见位置：

```
 @Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    this.currentPosition = this.listView.getFirstVisiblePosition();
    Log.i(TAG, "onSaveInstanceState, productFilter = " + this.productFilter + "; currentPosition = " + this.currentPosition);
    outState.putInt("productFilter", this.productFilter);
    outState.putInt("currentPosition", this.currentPosition);
} 
```

（请忽略productFilter，它与这个问题无关。）我在onCreate中恢复它，如下所示：

```
 Log.i(TAG, "onCreate");
    if (savedInstanceState != null) {
        this.productFilter = savedInstanceState.getInt("productFilter");
        this.currentPosition = savedInstanceState.getInt("currentPosition");
        Log.i(TAG, "productFilter = " + this.productFilter + "; currentPosition = " + this.currentPosition);
    } 
```

将模拟器从垂直旋转到水平时，效果很好。将其旋转回垂直时，`getFirstVisiblePosition()`save 方法中的 总是返回零，尽管实际可见的项目已经很远了。这是日志的输出：

```
03-12 19:16:36.140: INFO/WindowManager(51): Config changed: { scale=1.0 imsi=0/0 loc=de_DE touch=3 keys=2/1/2 nav=3 orien=2 layout=34}
03-12 19:16:36.180: INFO/ExperimentalList(777): onSaveInstanceState, productFilter = 0; currentPosition = 53
03-12 19:16:36.190: INFO/ExperimentalList(777): onCreate
03-12 19:16:36.190: INFO/ExperimentalList(777): productFilter = 0; currentPosition = 53
03-12 19:16:36.220: INFO/WindowManager(51): onOrientationChanged, rotation changed to 0
03-12 19:16:36.220: INFO/WindowManager(51): Setting rotation to 0, animFlags=0
03-12 19:16:36.241: INFO/WindowManager(51): Config changed: { scale=1.0 imsi=0/0 loc=de_DE touch=3 keys=2/1/2 nav=3 orien=1 layout=34}
03-12 19:16:36.270: DEBUG/StatusBar(51): updateResources
03-12 19:16:36.340: DEBUG/StatusBar(51): updateResources
03-12 19:16:36.610: INFO/ExperimentalList(777): onSaveInstanceState, productFilter = 0; currentPosition = 0
03-12 19:16:36.620: INFO/ExperimentalList(777): onCreate
03-12 19:16:36.620: INFO/ExperimentalList(777): productFilter = 0; currentPosition = 0 
```

有什么原因导致头寸第一次正确收益率为 53，但第二次为 0？我无法通过这里的日志证明这一点，但我发誓我尝试了几次，但我从未回滚到零！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T22:43:54.170

尝试使用 setSelection。后

```
this.currentPosition = savedInstanceState.getInt("currentPosition"); 
```

添加

```
this.listView.setSelection(this.currentPosition); 
```

*警告：这将更改您选择的项目。

# windows-phone-7 - XNA/XAML 混合项目中的 Windows Phone Toolkit 挂起应用程序

> ID：15370384
> 
> 赞同：0
> 
> 时间：2013-03-12T19:27:37.650
> 
> 标签：windows-phone-7, windows-phone-8

在 XNA/XAML 混合项目中使用 Windows Phone Toolkit 中的任何控件会在某些情况下挂起应用程序：

1.  创建“Windows Phone XAML 和 XNA App”项目

2.  通过键入以下内容为 WP Toolkit 添加 Silverlight：

    ```
    Install-Package SilverlightToolkitWP -Version 4.2012.6.25 
    ```

    在包管理器控制台中

3.  在 MainPage.xaml 添加工具包命名空间：

    ```
    <phone:PhoneApplicationPage
    ...
    xmlns:toolkit="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone.Controls.Toolkit"
    ...> 
    ```

4.  从工具包中添加任何控件，例如。时间选择器：

    ```
    <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
        <!--Create a single button to navigate to the second page which is rendered with the XNA Framework-->
        <Button Height="100" Content="Change to game page" Click="Button_Click" />
        <toolkit:TimePicker />
    </Grid> 
    ```

5.  在 WP8 设备或 WP8 模拟器上运行应用程序（在 WP7 上不存在此问题）

6.  点击“切换到游戏页面”按钮

7.  锁定和解锁屏幕或切换到另一个应用程序然后返回。

8.  单击返回按钮返回主页面

9.  单击 TimePicker 并尝试更改时间。

10.  应用程序没有被杀死，但 UI 被阻止

我读到 WP8 以 100% 的兼容性运行 WP7 应用程序，但似乎这不是真的……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T05:59:56.657

That's not the right version of the toolkit for WP8\. As of now you should use [https://nuget.org/packages/WPtoolkit](https://nuget.org/packages/WPtoolkit) (October 2012 version, version 4.2012.10.30)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-09T20:14:40.530

I finally found the solution for this bug! It's very easy to fix but was difficult to discover. Here's the line of code you have to add to your game page class in `OnNavigatedFrom(NavigationEventArgs e)` method. You have to add this `if` statement:

```
protected override void OnNavigatedFrom(NavigationEventArgs e)
{
    // Stop the timer
    timer.Stop();

    // Set the sharing mode of the graphics device to turn off XNA rendering
    if (e.IsNavigationInitiator)
        SharedGraphicsDeviceManager.Current.GraphicsDevice.SetSharingMode(false);
    base.OnNavigatedFrom(e);
} 
```

# api - 用于添加/删除数组元素的 RESTful API 端点？

> ID：15370387
> 
> 赞同：23
> 
> 时间：2013-03-12T19:27:43.150
> 
> 标签：api, http, mongodb, rest

我在 MongoDB 存储之上构建了 RESTful API，因此可以存储数组非常好。像这样创建新资源很简单：

`POST /users` `{ items: [ 1001, 1002, 1003 ] }`

但是用于添加新项目或删除项目的 HTTP 端点会是什么样子？

现在，我必须指定整个数组，包括我不想接触的元素：

`PATCH /users/{id}` `{ name: 'Bruce Wayne', items: [ 1001, 1002 ] }`

或者直接传入一个mongodb查询：

`PATCH /users/{id}?query[$push][items]=1003`

有一个更好的方法吗？

编辑：

我喜欢[StackMob 的 API](https://developer.stackmob.com/sdks/rest/api#a-arrays_and_relationships)是如何做到的。但是，如何同时更新`name`和删除元素`items`？例如，当我在管理仪表板上更新一堆用户的详细信息时？我认为在 mongodb 中替换整个数组不是一个好主意？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2015-11-16T17:32:25.987

传递 mongodb 查询似乎是个坏主意。根据您的后端实现，它可能会导致攻击者对您的数据做坏事，如[SQL 注入](https://en.wikipedia.org/wiki/SQL_injection)

您可以使用 PUT 或 PATCH 对资源上的属性修改进行建模，但有一些限制：

*   当使用`PUT`客户端时，期望发送资源的整个表示。它适合你，但它可能很麻烦。
*   使用`PATCH`客户端时，期望发送打算更改的属性，而不是整个资源。但是，您必须发送**整个 value**，而不仅仅是对 value 的项目的添加或删除。它再次起作用，但你不爱它。

我认为您正在寻找一种方法来模拟向数组添加和删除项目：

1.  我会将数组建模为自己的资源：`/users/:id/items`
2.  接受`POST`将项目添加到数组并`DELETE`从数组中删除。

它简单且 RESTful。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-02-19T10:27:08.660

根据 REST 标准创建和删除新请求 --> POST - 在集合中创建新资源并 DELETE - 删除资源

我可以给你一个例子，说明 Java 中的高级 HTTP 端点是如何使用 Jersey 的。您可以拥有一个资源类，其中指定了 HTTP 路径和特定路径，用于执行不同操作的方法。所以 URL 可能看起来像 - /rest/MyResource/Resource 伴随着请求 JSON 或 XML（包含您的输入数据）

这是一个示例资源类，它将作为您的入口点（当然，您必须在 web.xml 中进行配置才能为此类进行 URL 映射）-->

```
import javax.ws.rs.Consumes;
import javax.ws.rs.POST;
import javax.ws.rs.DELETE;
import javax.ws.rs.Produces;
import javax.ws.rs.core.MediaType;
import javax.ws.rs.core.Response;
import org.json.JSONObject;

public class SampleRESTServiceResource {

    /**
     * @param incomingJsonString
     * @return Response 
     */
    @POST
    @Consumes(MediaType.APPLICATION_JSON)
    @Produces(MediaType.APPLICATION_JSON)
    public Response createNewResource(JSONObject myJson) {
        // Do a call to a DAO Implementation that does a JDBC call to insert into Mongo based on JSON
        return null;

    }

    /**
     * @param incomingJsonString
     * @return Return response 
     */
    @DELETE
    @Produces(MediaType.APPLICATION_JSON)
    @Consumes(MediaType.APPLICATION_JSON)
    public Response deleteResource(JSONObject myJson) {
        // Do a call to a DAO Implementation that does a JDBC call to delete resource from  Mongo based on JSON
        return null;
    }
} 
```

如果你想尝试一个例子，你可以参考这个页面 --> [https://www.ibm.com/developerworks/library/wa-aj-tomcat/](https://www.ibm.com/developerworks/library/wa-aj-tomcat/)

# tomcat - Tomcat 6 忽略外部连接

> ID：15370389
> 
> 赞同：0
> 
> 时间：2013-03-12T19:27:44.703
> 
> 标签：tomcat, connection, localhost

我已经下载了 Tomcat 6.0.36 windows 服务安装程序并使用“最小”安装类型进行安装。之后我启动了 Tomcat 服务。

localhost:8080 工作正常，我看到了 Tomcat 的欢迎页面

192.168.1.131:8080 也可以正常工作（从本地机器，192.168.1.131 是它的局域网地址）

但是来自我局域网中的另一台机器 192.168.1.131:8080 没有打开！

行。我也有一个安装了 Run Jetty Run 插件的 Eclipse。我停止了我的 Tomcat 服务，并在同一个 8080 端口上从 eclipse 启动了码头服务器。和哇啦！

192.168.1.131:8080 在我局域网中的另一台机器上工作。这就是我排除路由/防火墙错误的原因。

我在 Win7 上用两台不同的机器作为服务器对其进行了测试。

我也尝试打开tomcat的访问日志，但没有什么有趣的，现在有来自外部机器的请求。

谁能帮我？非常感谢！对不起我丑陋的英语=）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T19:36:50.087

你可以尝试去

```
Control Panel\System and Security\Windows Firewall\Allowed Programs 
```

并检查是否允许tomcat exe

# livecode - LiveCode：如何关闭弹出按钮

> ID：15370390
> 
> 赞同：2
> 
> 时间：2013-03-12T19:27:45.310
> 
> 标签：livecode

如果我实例化一个弹出按钮，我可以通过选择其中一个选项或单击其他位置来关闭它。有没有一种好方法可以从脚本中消除它？我尝试设置 menuHistory，但似乎没有任何效果。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T12:50:30.800

标记 - 如果您在显示弹出菜单时检查 openStacks 的第一行是否为空？我认为是这样，然后你可以这样测试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T00:32:52.977

回答我自己的问题：

我还没有找到确定是否显示弹出菜单按钮的好方法——通常的属性检查似乎都不起作用。但我因此回避了这个问题：

在我的滚轮处理程序中，我

```
dispatch "menuPick" to button "PluginMenu" 
```

然后在 PluginMenu 按钮的 menuPick 处理程序中，我有

```
if pItemName is empty then
    lock screen
    put word 2 of the selectedline of field "xyzzy" into tLine
    select after line tLine of field "xyzzy"
    click at the selectedloc
    unlock screen
end if 
```

其中 pItemName 是普通的 menuPick 参数。如果我可以确定弹出窗口何时可见，我可以将 menuPick 调用限制为仅显示在屏幕上的时间，否则效果只是在行尾单击，如果弹出窗口在顶部则取消选择。

编辑：上面提到的滚轮处理程序在字段“xyzzy”的 rawKeyUp 处理程序中。

编辑2：如前所述，应该是“rawKeyDown”而不是“rawKeyUp”。正如 Trevor 所提到的，检查 openStacks 的第 1 行使它变得更好：

```
if line 1 of the openStacks is empty then
    dispatch "menuPick" to button "PluginMenu"
end if 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T20:08:28.217

您可能需要使用在suspendStack 上关闭的调色板堆栈来伪造您的弹出菜单。这样就不会涉及阻塞，您可以随时关闭它。在打开调色板后，您需要弄乱我认为的字段焦点，以便它仍然具有焦点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T20:57:34.743

我只是尝试单击包含以下脚本的按钮，然后单击弹出按钮。

```
on mouseUp
   set the uActive of me to not the uActive of me
   if the uActive of me then send "test" to me in 2000 millisecs
end mouseUp

on test
   put the millisecs
   if the uActive of me then send "test" to me in 2000 millisecs
end test 
```

弹出窗口似乎是模态的，并阻止了按钮脚本中的定时例程。我认为 Monte 伪造弹出窗口的想法可能是一个好主意；）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T19:50:44.147

您无法通过脚本访问已经打开的菜单。但是，在 Windows 上，如果您在 mouseDown 处理程序中使用弹出命令打开弹出菜单，则 mouseDown 处理程序将立即运行直到结束。如果您使用堆栈面板而不是常规弹出菜单，则可以通过脚本关闭堆栈面板（我没有尝试过）。我认为这在 Mac OS X 上是不可能的，因为菜单会阻止任何当前正在运行的脚本，直到菜单关闭。

# database - 这两个关系是否适合联合操作？

> ID：15370394
> 
> 赞同：5
> 
> 时间：2013-03-12T19:27:58.400
> 
> 标签：database, relational-database, union, relational-algebra

我不确定以下两种关系是否适合联合：

```
R: <- schema name
B
1
2
2
3
3 
```

和：

```
Q: -< schema name
A  B
5  1
6  1
4  2
3  4 
```

我想做工会：QU R. 我可以吗？结果是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T03:12:02.283

联合运算符要求这两个关系是联合兼容的。这意味着它们需要具有相同的属性集。请注意，这个概念比共享相同数量的属性略远。这是因为它还考虑了属性的内容。

这并不意味着两个属性应该具有相同的名称，而是两个属性应该具有相似的“数据类型”，而且我真的在这个示例中远离关系代数。在关系代数中没有这样的东西，但我认为如果你有编程背景，你会很容易通过思考这个概念来获得它。

EG：考虑以下关系：

*   **人**（名字，姓氏）
*   **国家**（名称、人口）

在这种情况下，Person 和 Country 不是联合兼容的，因为它们不共享同一组属性，即使它们共享相同数量的属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T20:06:24.090

事实上，这两个关系对于联合是不兼容的：它们具有不同数量的属性。经过更多研究后找到了答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-21T19:40:32.230

如果两个表具有相同数量的属性（列）并且对应的属性具有相同的数据类型（int、char、float、date 等），则称两个表是联合兼容的。对应属性是指两个关系的第一个属性，然后是第二个，依此类推。

**union compatible:**
A: (First_name (char), Last_name(char), Date_of_Birth(date))
B: (FName(char),LName(char),DOB(date))
两个表都有 3 个属性并且日期类型相同。

不兼容：
A: (First_name (char), Last_name(char), Date_of_Birth(date))
B: (FName(char),LName(char),PhoneNumber(number))

（第三个属性不同。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-03T04:20:54.120

[在此处](https://practice.geeksforgeeks.org/problems/what-is-union-compatibility-and-when-are-the-relations-said-to-be-union-compatible)查看Union Compatibility的更详细定义

在您的情况下，您提到的两个关系不是Union Compatibility，因为它们没有相同数量的属性[模式R有一个属性，模式Q有两个属性]
所以你不能申请对这些模式的 UNION 操作。

# javascript - 使用地图 api v3 在同一页面中的多个动态地图

> ID：15370400
> 
> 赞同：1
> 
> 时间：2013-03-12T19:28:14.593
> 
> 标签：javascript, google-maps

我有一个系统来保存我的地址，我有一个循环和所有地址的返回，我循环传递 div 的 id 和每个地址的脚本，它可以工作，但是它不能正确呈现所有地图。有人能帮我吗？

[http://quax.com.br/clientes/silvaesilva/escritorio](http://quax.com.br/clientes/silvaesilva/escritorio)

* * *

**我做了并最终使 iframe 正常运行，将所需的参数地址传递给 iframe 并在 iframe 中渲染。谢谢你。**

# javascript - 使用 id/hash 渲染cherrypy的模板

> ID：15370403
> 
> 赞同：0
> 
> 时间：2013-03-12T19:28:23.477
> 
> 标签：javascript, python, cherrypy

我将如何呈现页面并转到特定的 id？

现在我有这个代码的以下功能：

```
@cherrypy.expose
@require
def page():
    tmpl = lookup.get_template('page.html')
    return tmpl.render() 
```

但是，现在`page.html`确实有几个子页面，我可以通过 URL 访问，例如`mydomain.com/page#someid`.

有没有办法让模板直接进入id？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:22:18.380

我认为您正在混合这些想法，`#`URL 的一部分是客户的职责，专注于特定的元素 id。不过，我想您想通过 javascript 动态嵌入页面特定部分的块，我可以考虑两种可能性：

一，使用来自不同子模板的不同 id 组合整页模板，如果您使用模板模块，如 mako ，这很容易[，](http://www.makotemplates.org/)并制作一个cherrypy处理程序来返回各个部分，这当然是假设您是控制页面内容和 id 不是动态的（从 db 或其他东西生成），主站点是一堆`includes`.

```
@cherrypy.expose
def page_part(section):
    tpl_name = 'page_%s.html' % section
    # validate that the template exists, then:
    tmpl = lookup.get_template(tpl_name)
    return tmpl.render() 
```

Mako模板：

page.html：

```
<html>
  <body>
     <div id="main">
          This is the main content of the site!
      </div>
      <h4>Sections</h4> 
      <div id="section_1">
       <%include file="page_section1.html" />
      </div>

      <div id="section_2">
       <%include file="page_section2.html" />
      </div>
 </body>
</html> 
```

page_section1.html：

```
<p> Content of section 1</p> 
```

page_section2.html：

```
<p> Content of section 2</p> 
```

或者二，使用 jQuery 选择器或类似的东西来请求页面一次并在返回的 html 中进行子选择。

```
$.get('/page.html', 
      function(data){
          $('#this_page_id').html($('#sect_in_other_page', $(data)).html());
      }); 
```

# java - Play Framework 2.0.X 中的邮件表单

> ID：15370404
> 
> 赞同：1
> 
> 时间：2013-03-12T19:28:24.847
> 
> 标签：java, model-view-controller, playframework, playframework-2.0

我正在使用 Play Framework (2.0.4)，我想知道创建带有用于发送电子邮件的表单的页面的最佳方法是什么。我知道有一个用于发送电子邮件的插件，所以这不是问题 - 我可以使用发送电子邮件的方法编写控制器。

我的问题更多是关于我应该提供的操作（在路线文件中）。我应该创建一个接受参数（发件人姓名、发件人电子邮件、主题、正文）的 POST 操作吗？或者我应该以某种方式创建一个模型对象，该对象将填写在表单中并传递给控制器​​中的操作？最佳做法是什么？以及如何正确粘合它（动作在路由文件中应该如何显示，视图应该如何显示）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T19:40:14.443

您需要两个视图 - 一个带有表单（我们称之为`mailForm`），第二个 - 带有邮件的正文 ( `bodyHtml`)。`bodyTxt`（如果您想发送 HTML 和 TXT 版本，您可以选择创建。

专用模型将是很好的帮手，因为它将帮助您使用 Play 的`Form<T>`，如果需要，您还可以将发送的消息存储在 DB 中。无论如何，您也可以在字符串的地图上进行操作 - 特别是如果您计划制作许多动态表单（具有未知数量的字段）。

填写表单后，它将转到示例`sendEmail()`操作，您需要填写表单（`bindFromRequest`）最终创建对象并保存到数据库，最后作为参数传递给 bodyHtml 视图。当然，您应该将其与 toString 一起使用，而不是将呈现的视图作为操作的结果返回 - 与邮件程序一起发送。该操作应将重定向返回到某个“谢谢”页面。就这样。

注意：写得很快，如果有不清楚的地方，请告诉我......

# xcode - 如何从放置在 ViewController 中的 UIView 调用 UIView 控制器中定义的方法

> ID：15370412
> 
> 赞同：0
> 
> 时间：2013-03-12T19:28:44.123
> 
> 标签：xcode, uiview, methods, call

如何从放置在 ViewController 中的 UIView 调用在 UIView 控制器中定义的方法。

如果这是不可能的，那么我将如何使放置在 UIView 中的按钮调用 segue？

花了几个小时试图弄清楚这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T11:17:58.907

所以我花了一天的时间，但我设法找到了一个简单的解决方法。

在 UIView.h 创建一个 UIVIewController 属性，然后在您的 ViewController 中将 UIViews 属性设置为 .self 。

在 UIView 中完成此操作后，您可以访问该属性并从那里调用为 segue 做准备。

# php - PHP finally 子句

> ID：15370415
> 
> 赞同：3
> 
> 时间：2013-03-12T19:28:54.367
> 
> 标签：php, exception-handling

模拟 finally 子句的最佳实践是什么？[我意识到这可以被认为与这个问题](https://stackoverflow.com/questions/6043768/finally-clause-alternative-for-script-timeout)有关（尽管我不认为它是重复的）。

但是，就我而言，我想处理异常，我想使用由 python 定义的 finally （或任何 PHP 等效项或实践）：

> finally 子句总是在离开 try 语句之前执行，无论是否发生异常。

在 try-catch 块之后松散地编写代码对我来说似乎是一种丑陋的做法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-12T19:32:07.450

在[最终添加到 PHP 的 RFC 中](https://wiki.php.net/rfc/finally)，他们建议使用以下解决方法：

```
<?php
$db = mysqli_connect();
try {
   call_some_function($db);
} catch (Exception $e) {
   mysqli_close($db);
   throw $e;
}
mysql_close($db); 
```

因此，除非您升级到 PHP 5.5（将包含该`finally`结构），否则这可能是您的最佳选择。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-12T19:50:52.453

这可能被认为是一个不可回答的问题，但是有一些方法可以构建`finally`不需要的代码，例如“RAII 模式”（“资源获取是初始化”），其中资源的清理是在析构函数中完成的表示该资源的本地范围变量。

这个想法是，如果异常使您脱离函数范围，您的析构函数将触发，因此您的清理工作按预期进行。如果没有抛出异常，您将到达函数的末尾，并且您的变量将超出范围。

一个快速的谷歌找到了[这个简单的代码来做任意回调](http://blog.kentarok.org/entry/2012/09/30/205227)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T19:32:47.260

PHP 5.5 及更高版本确实具有[finally](http://php.net/manual/en/language.exceptions.php)构造。

从文档：

```
try {
    echo inverse(5) . "\n";
} catch (Exception $e) {
    echo 'Caught exception: ',  $e->getMessage(), "\n";
} finally {
    echo "First finally.\n";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-30T13:45:15.480

如果您仍然坚持维护 5.5 之前的遗留代码，并且您不介意每次调用都强制进行假抛出的开销，那么总会有这个肮脏的小技巧。

```
try { 
     // do your worst to mess things up.

     throw new Exception("finally");
} catch (Exception $e) {
    //TODO: after upgrading to 5.5, make this a legit try/catch/finally
    if ( ($msg = $e->getMessage())  != "finally"){
        // real catch
        echo "Exception doing something :" . $msg;
    } else {
        // quasi finally.
    };
} 
```

# caching - Windows Azure 角色内缓存与共享缓存

> ID：15370418
> 
> 赞同：1
> 
> 时间：2013-03-12T19:28:58.627
> 
> 标签：caching, azure, azure-web-roles, azure-worker-roles, shared-cache

我们在 Azure 中有一个网站，我们想缓存网站上的内容。将更新内容的应用程序将在 Azure 之外。我们让这个场景与共享缓存一起工作。然而，共享缓存被认为是一项遗留功能，因此我们想看看替代解决方案，包括使用角色内缓存。缓存的内容非常小，不应超过 1 MB，将被 C# 代码使用。

我们可以在 web 角色中使用 co-located 缓存，也可以使用 worker 角色使用专用缓存。

我们使用角色内缓存时遇到的问题是：

*   如何从外部应用程序更新协同定位缓存？

*   如果有办法从外部应用程序更新共存缓存，缓存通知可用于使所有共存缓存节点无效，对吗？

*   我们现在使用超小型 Web 角色实例 - 我们需要升级到小型/中型实例吗？

*   专用缓存是否更适合我们的场景？

    提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T02:38:14.917

在进行了大量研究并[在西蒙](https://stackoverflow.com/questions/14837213)在他已经提到的 SO 线程中的回复的指导下，以下是我的回复：

*   问：如何从外部应用程序更新 co-located 缓存？
*   答：我会在您的 Webrole 上公开一个公共端点，该端点会清除缓存。我会从您的外部应用程序调用该端点（该端点可以是服务、REST URL 等）。或者，将消息放入队列并让您的 Webroles 监视该队列并在他们收到队列中的消息时从缓存中清除该项目。无论哪种方式，您都在实现自己的通知机制

*   问：如果有办法从外部应用程序更新共存缓存，缓存通知可用于使所有共存缓存节点失效，对吗？

*   答：我不相信。位于同一位置的缓存的端点是严格内部的。

*   问：我们现在使用超小型 Web 角色实例 - 我们需要升级到小型/中型实例吗？

*   答：是的。我相信小型实例及更高版本支持托管缓存。您需要尝试一下，看看您获得了多少内存与剩余多少内存，以及这对您的主应用程序是否有用

*   问：专用缓存是否更适合我们的场景？

*   答：专用缓存与托管缓存实际上与负载有关。您的缓存和应用服务器上是否有足够的负载来证明将缓存移到单独的角色中是合理的？查看这篇文章以获得 Microsoft 的建议：http: [//msdn.microsoft.com/en-us/library/windowsazure/hh914129.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/hh914129.aspx)

# css - 为什么浏览器不自动更正不兼容的 CSS3 过渡？

> ID：15370421
> 
> 赞同：0
> 
> 时间：2013-03-12T19:29:00.823
> 
> 标签：css, firefox, browser, webkit, mozilla

为什么浏览器不自动更正 CSS3 过渡？Safari/Chrome 和 Firefox CSS 转换之间的唯一区别是“moz”和“webkit”。当然，firefox 可以添加一个自动更正功能，将 css 中的每个“webkit”实例更改为“moz”，问题就会得到解决。或者还有更多的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T19:38:20.323

通常 CSS 选择器的`-moz`and`-webkit`是特定于浏览器引擎的属性。选择器可能不稳定，或者在每个浏览器中优化行为时的行为不同。

他们不想“自动更正”到其他实现，因为其他浏览器对 CSS 属性的解释可能不同。在发生冲突时，它可能会导致关于哪些 CSS 属性应该“获胜”的问题。最后，它可能会增加每个浏览器的开发时间，因为他们需要弄清楚其他浏览器引擎在做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T08:46:01.557

最后，您想要的是根本不使用任何`-*`前缀。为此，需要有一个由*CSS 标准*定义的标准语法和行为，等等。然后，您无需使用不同的前缀重复`*-opacity: ...`多次，而只需编写`opacity: ...`一次，就像任何其他 CSS 声明一样。

无论当前标准怎么说，供应商特定的前缀都允许浏览器特定的行为。它允许供应商实施尚无标准的新功能，或在提交之前测试功能的实施。最终目标始终是按照标准定义的方式实现标准定义的所有功能；但你不会在一夜之间到达那里。新特性需要尽可能广泛地进行测试，以发现它们的实现问题或标准本身可能存在的问题。此测试通过供应商特定前缀提供功能来进行。

当您使用已记录的标准功能`opacity`（如 使用供应商特定的前缀功能时，这意味着您使用的功能可能会发生变化和/或可能无法始终如一地工作（目前），风险由您自担。浏览器供应商不会因为某种原因而相互接触前缀，他们朝着标准努力并最终使该功能不带前缀可用。

# iphone - UIButton导致UITextField字删除

> ID：15370424
> 
> 赞同：0
> 
> 时间：2013-03-12T19:29:09.170
> 
> 标签：iphone, ios, objective-c, xcode, uibutton

我对使用 UIButton 删除单词有疑问

例如，UITextField 中有 10 个字母。我通过按下 UIButton 进行编码，这样我就可以使用退格或删除功能来逐个删除字母。但是，我只希望用户能够删除 10 个字母中的最后 5 个字母。我该如何限制呢？

这是我的代码，

```
-(IBAction)delete:(id)sender{
    if ([display.text length] != 0) {
        display.text = [display.text substringToIndex:[display.text length]-1];
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T19:32:03.617

```
if ([display.text length] > 5) {
    display.text = [display.text substringToIndex:[display.text length]-1];
} 
```

# c# - 在新窗口中下载文件后显示消息

> ID：15370428
> 
> 赞同：1
> 
> 时间：2013-03-12T19:29:13.570
> 
> 标签：c#, javascript, asp.net-mvc, file, download

用户填写表格以下载文件。表单结果在新窗口中加载（target="blank"）。MVC 控制器操作在成功时返回 FileResult，在失败时返回我的“SelfClosingPage”视图。

这背后的目标是让用户在新页面中下载文件，如果发生任何错误，原始调用页面的 url 不会更改（到 /DownloadFile url）并且用户保留在表单页面上，而不是被定向到错误页面。

这一切都很好，除了我需要知道文件下载何时完成，因为我想 1）如果下载成功，隐藏“文件正在下载，请耐心等待”消息 2）如果文件显示错误消息下载失败。

我使用 Cookie 来执行此操作，并使用 JS 间隔定期检查 cookie 值。它要么从来没有工作，要么不再工作（我永远无法让 cookie 显示在原始页面上）。

请指教。我不能在我的 JS 中使用 C# 代码，因为它不起作用，因为它在页面加载时执行一次，并且我试图将 JS 与 C# 代码分离。

我认为我唯一的解决方案是执行 ajax javascript 回调，但我想避免这种情况。

**更新：**

找到了这些相关的 SO 链接，它们使用的方法与我尝试使用的方法相同。

[MVC3 - 文件下载 - 等待状态指示器](https://stackoverflow.com/questions/7504596/mvc3-file-download-wait-status-indicator)

[检测浏览器何时接收文件下载](https://stackoverflow.com/questions/1106377/detect-when-browser-receives-file-download)

**更新 2**

它又开始工作了。我认为 cookie 的到期日期不够长（尽管应该如此）。我只是将它从 10 分钟（文件下载不应超过此时间）更改为半天。

# php - 从特定类别中检索 CPT 帖子 | WordPress

> ID：15370430
> 
> 赞同：0
> 
> 时间：2013-03-12T19:29:19.417
> 
> 标签：php, arrays, wordpress, categories, custom-post-type

我目前正在使用以下数组从自定义帖子类型中检索帖子：

```
$args = array(
    'post_type' => 'event',
    'meta_query' => array(
    array(
        'key' => 'location',
        'value' => get_the_ID(),
        'compare' => 'like',
        )
    )
);
$events_list = new WP_Query($args); 
```

它工作得很好。

现在，我想知道我是否可以检索这些相同的帖子，但前提是它们出现在类别 ID '6' 中。

有人可以解释我如何更新我当前的代码以允许这样做吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T19:42:48.540

使用“猫”而不是“类别”：

```
$args = array(
    'post_type' => 'event',
    'cat' => 6,
    'meta_query' => array(
         array(
            'key' => 'location',
            'value' => get_the_ID(),
            'compare' => 'like',
         )
     )
);
$events_list = new WP_Query($args); 
```

# python - 使用 openpyxl 将多行字符串写入单元格

> ID：15370432
> 
> 赞同：28
> 
> 时间：2013-03-12T19:29:22.490
> 
> 标签：python, openpyxl

我正在尝试将数据写入具有多个换行符的单元格（我相信 \n），生成的 .xlsx 已删除换行符。有没有办法保留这些换行符？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2016-06-06T07:27:00.323

针对 openpyxl >= 2 更改了样式的 API。以下代码演示了现代 API。

```
from openpyxl import Workbook
from openpyxl.styles import Alignment

wb = Workbook()
ws = wb.active # wb.active returns a Worksheet object
ws['A1'] = "Line 1\nLine 2\nLine 3"
ws['A1'].alignment = Alignment(wrapText=True)
wb.save("wrap.xlsx") 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2013-03-13T11:35:41.283

**免责声明**：这在 Openpyxl 的最新版本中不起作用。查看其他答案。

在`openpyxl`您可以设置`wrap_text`对齐属性来包装多行字符串：

```
from openpyxl import Workbook

workbook = Workbook()
worksheet = workbook.worksheets[0]
worksheet.title = "Sheet1"

worksheet.cell('A1').style.alignment.wrap_text = True
worksheet.cell('A1').value = "Line 1\nLine 2\nLine 3"

workbook.save('wrap_text1.xlsx') 
```

![在此处输入图像描述](../Images/858b94233c667af05f95bf8e9a139cbc.png)

[XlsxWriter](https://xlsxwriter.readthedocs.org/en/latest/index.html)模块也可以做到这一点。

这是一个小的工作示例：

```
from xlsxwriter.workbook import Workbook

# Create an new Excel file and add a worksheet.
workbook = Workbook('wrap_text2.xlsx')
worksheet = workbook.add_worksheet()

# Widen the first column to make the text clearer.
worksheet.set_column('A:A', 20)

# Add a cell format with text wrap on.
cell_format = workbook.add_format({'text_wrap': True})

# Write a wrapped string to a cell.
worksheet.write('A1', "Line 1\nLine 2\nLine 3", cell_format)

workbook.close() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-09-28T12:14:48.057

只是一个附加选项，您可以在此处使用文本阻止“”“我的单元格信息”“””以及对齐的文本换行布尔值，并获得所需的结果。

```
from openpyxl import Workbook

wb= Workbook()
sheet= wb.active
sheet.title = "Sheet1"

sheet['A1'] = """Line 1
Line 2
Line 3"""

sheet['A1'].alignment = Alignment(wrapText=True)

wb.save('wrap_text1.xlsx') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-25T13:17:42.247

以防万一有人正在寻找我们遍历所有单元格以应用包装的示例：

小工作示例：

```
import pandas as pd
from openpyxl import Workbook
from openpyxl.styles import Alignment
from openpyxl.utils.dataframe import dataframe_to_rows

# create a toy dataframe. Our goal is to replace commas (',') with line breaks and have Excel rendering \n as line breaks.
df = pd.DataFrame(data=[["Mark", "Student,26 y.o"],
                        ["Simon", "Student,31 y.o"]], 
                  columns=['Name', 'Description'])

# replace comma "," with '\n' in all cells
df = df.applymap(lambda v: v.replace(',', '\n') if isinstance(v, str) else v)

# Create an empty openpyxl Workbook. We will populate it by iteratively adding the dataframe's rows.
wb = Workbook()
ws = wb.active # to get the actual Worksheet object

# dataframe_to_rows allows to iterate over a dataframe with an interface
# compatible with openpyxl. Each df row will be added to the worksheet.
for r in dataframe_to_rows(df3, index=True, header=True):
    ws.append(r)

# iterate over each row and row's cells and apply text wrapping.
for row in ws:
  for cell in row:
    cell.alignment = Alignment(wrapText=True)

# export the workbook as an excel file.
wb.save("wrap.xlsx") 
```

# perl - $x = undef 和 undef $x 之间的行为差 异

> ID：15370435
> 
> 赞同：2
> 
> 时间：2013-03-12T19:29:31.080
> 
> 标签：perl, garbage-collection

[`undef $x`不同于`$x = undef`](https://gist.github.com/mysz/5125381). 我的印象是两者都会触发垃圾收集和释放内存，但似乎`$x = undef`没有这样做。

这是语言错误吗？在做`$x = undef`时，它不应该释放内存吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T19:31:51.027

没有也没有。Perl 通过不释放您可能再次需要的内存来提高速度而不是内存使用。如果要释放字符串缓冲区，请使用`undef $x;`.

```
$ perl -MDevel::Peek -e'
   Dump($x);
   $x='abc'; Dump($x);
   $x=undef; Dump($x);
   undef $x; Dump($x);
'
SV = NULL(0x0) at 0x1c39284       <-- No body allocated
  REFCNT = 1
  FLAGS = ()                      <-- Undefined
SV = PV(0x3e8d54) at 0x1c39284    <-- PV body allocated
  REFCNT = 1
  FLAGS = (POK,pPOK)              <-- Contains a string
  PV = 0x3eae7c "abc"\0
  CUR = 3
  LEN = 12
SV = PV(0x3e8d54) at 0x1c39284    <-- PV body allocated
  REFCNT = 1
  FLAGS = ()                      <-- Undefined
  PV = 0x3eae7c "abc"\0           <-- Currently unused string buffer
  CUR = 3
  LEN = 12
SV = PV(0x3e8d54) at 0x1c39284    <-- PV body allocated
  REFCNT = 1
  FLAGS = ()                      <-- Undefined
  PV = 0                          <-- No string buffer allocated 
```

# c++ - 从注册表项中读取字符串值

> ID：15370440
> 
> 赞同：0
> 
> 时间：2013-03-12T19:29:39.213
> 
> 标签：c++, registry, windows-7-x64, visual-studio-2008-sp1

我的简化代码：

```
HKEY hKey;

if(someCondition)
    lRes = RegOpenKeyExW(HKEY_LOCAL_MACHINE, L"SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Run", 0, KEY_READ, &hKey);
else
    lRes = RegOpenKeyExW(HKEY_LOCAL_MACHINE, "SOFTWARW\\Wow6432Node\\Microsoft\\Windows\\CurrentVersion\\Run", 0, KEY_READ, &hKey);

if(lRes == ERROR_SUCCESS)
{
    std::wstring strKeyValue;
    lRes = GetStringRegKey(hKey, L"valueName", strKeyValue, L"bad");
    if(lRes == ERROR_SUCCESS)
    {
         //doSomething
    }
} 
```

两者都`RegOpenKeyExW()`返回`ERROR_SUCCESS`，但在一种情况下（从 读取`Wow6432Node`）`GetStringRegKey()`返回`ERROR_SUCCESS`并初始化 ，`strKeyValue`而在另一种情况下则返回`ERROR_FILE_NOT_FOUND`。所有路径和值名称都是正确的。这些条目是手动添加到注册表中的。

问题是什么？是任何凭据问题吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T20:53:57.720

注意：最初的问题是使用 HKEY_CLASSES_ROOT 和 HKEY_LOCAL_MACHINE 之间的区别是什么，以及为什么使用一种有效而另一种无效。这是该问题的答案。

取自微软来源： http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms724475 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724475(v=vs.85).aspx)

> HKEY_CLASSES_ROOT (HKCR) 键包含文件扩展名关联和 COM 类注册信息，例如 ProgID、CLSID 和 IID。它主要用于与 16 位 Windows 中的注册表兼容。
> 
> 类注册和文件扩展名信息存储在 HKEY_LOCAL_MACHINE 和 HKEY_CURRENT_USER 键下。HKEY_LOCAL_MACHINE\Software\Classes 项包含可应用于本地计算机上所有用户的默认设置。HKEY_CURRENT_USER\Software\Classes 键包含仅适用于交互式用户的设置。HKEY_CLASSES_ROOT 键提供了一个注册表视图，它合并了来自这两个源的信息。HKEY_CLASSES_ROOT 还为为以前版本的 Windows 设计的应用程序提供此合并视图。

所以不同的是：`HKEY_CLASSES_ROOT`会为以前版本的Windows呈现一个统一的注册表视图，并将默认用户设置与当前用户设置合并。它主要用于读取交互式用户的设置。它不应该用于存储值，只能用于读取，如提供的链接中所示，它实际上映射到“HKEY_CURRENT_USER”配置单元。

`HKEY_CURRENT_USER`是“真正的”注册表路径，因此出于安全原因，所有需要写访问权限的注册表交互都应该通过它。采用哪个分支取决于您是仅更新注册表中的用户设置，还是更新注册表中的所有用户设置。

# jquery - jQuery 验证器 addMethod 语法

> ID：15370441
> 
> 赞同：0
> 
> 时间：2013-03-12T19:29:48.250
> 
> 标签：jquery

我在互联网上找不到任何关于哪个版本更正确的信息。

```
 if (value == '00/00/0000'){
    return false;
    return /^\d{2}\/\d{2}\/\d{4}$/.test(value);
  } 
```

或这个

```
 if (value == '00/00/0000'){
    return false;
    return (/^\d{2}\/\d{2}\/\d{4}$/).test(value);
  } 
```

还有什么真正的区别，什么会更正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T20:11:01.007

() 不是必需的。

```
if (value === '00/00/0000'){
    return false;
} else {
    return /^\d{2}\/\d{2}\/\d{4}$/.test(value);
} 
```

# javascript - 开始刷新 javascript 函数，然后停止它们并重新开始刷新它们

> ID：15370448
> 
> 赞同：0
> 
> 时间：2013-03-12T19:30:00.230
> 
> 标签：javascript, html, jquery

我会尽力清楚地解释我的问题。所以我制作了一堆显示值并保持这些值最新的javascript函数，我需要一个间隔来刷新函数。

这些是我区间内的功能

```
var interval = null; //make global variable for interval

function refresh(){      // create a function that contains all the functions that need to be refreshed so I can pass this function to my setInterval
        g1.refresh(linearScaling(0, 32761 , 0 , 10, readData('IW0')));
        showAnalogText('textonly', 'IW0');
        g2.refresh(linearScaling(0, 32761 , 0 , 10, readData('IW1')));
        showAnalogText('textonly2', 'IW1');
        showDigInputImg('light1', 'IX2.0', '/imgs/lightON.png', '/imgs/lightOFF.png');
        showDigInputImg('light2', 'IX2.1', '/imgs/lightON.png', '/imgs/lightOFF.png');
        showDigInputBool('led1', 'IX2.0', 'radio');
        showDigInputBool('led2', 'IX2.1', 'radio');
        showDigInputBool('boolean1', 'IX2.0', 'bool');
        showDigInputBool('boolean2', 'IX2.1', 'bool');
        showDigInputBool('text1', 'IX2.0', 'text');
        showDigInputBool('text2', 'IX2.1', 'text');
        showDigInputImg('output1', 'QX2.0', '/imgs/lightON.png', '/imgs/lightOFF.png');
        showDigInputImg('output2', 'QX2.1', '/imgs/lightON.png', '/imgs/lightOFF.png');
        }, 1000) 
```

所以这些函数需要不断更新，它们使用ajax执行读取请求，但我也有写入函数，我想要完成的是在我执行写入函数时停止间隔，所以ajax请求停止并且我可以执行我的写请求，当写完成时，它会重新启动间隔。

这些是我的启动和停止功能：

```
 function startRefresh(){  //needs to be declared in my library but the function refresh() doesn't exist in library
        if (!interval){
            interval = setInterval(refresh, 1000);
        }
    }

    function stopRefresh(){  

            clearInterval(interval);
            interval = null;
    } 
```

我知道这可行，但问题是我正在构建一个库，以便用户可以重新使用我的函数供自己使用，因此 startrefresh 和 stoprefresh 函数将在库中，但 startrefresh 函数需要 refresh() （包含所有那些其他函数）但刷新只能在 HTML 页面本身的 javascript 中声明（而不是在库中），因为函数 refresh 包含在运行时创建的 g1 和 g2 等对象，所以我不能声明刷新() 在我的库中，因为它包含尚不存在的对象。

谁能帮我找到一个简单的解决方案，你可以改变你想要的任何东西，我只想要最有效的方式，用户可以将他需要刷新的所有功能放在一个间隔中，并在我执行写入时停止和启动间隔，但是 stop 和 startrefresh 函数需要在库中，用户不应该看到 start 和 stop 函数，它们在我的 write 函数中被调用。希望有人能理解并帮助我，我将非常感激，如果您需要更多解释，我很乐意给您

也许将所有函数放在某种变量中并将该变量传递给我的 startrefresh 函数，这行得通吗？

和平，斯蒂恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T19:33:41.563

为什么不使用函数作为参数`startRefresh`

```
function startRefresh(refresh) {
    if (!interval){
        interval = setInterval(refresh, 1000);
    }
} 
```

因此您可以使用匿名函数运行该函数

```
startRefresh(function() {
   //do stuff to be refreshed
}); 
```

或者在您的情况下，您也可以在匿名功能中存储刷新功能

```
startRefresh(function(){
    g1.refresh(linearScaling(0, 32761 , 0 , 10, readData('IW0')));
    showAnalogText('textonly', 'IW0');
    g2.refresh(linearScaling(0, 32761 , 0 , 10, readData('IW1')));
    showAnalogText('textonly2', 'IW1');
    showDigInputImg('light1', 'IX2.0', '/imgs/lightON.png', '/imgs/lightOFF.png');
    showDigInputImg('light2', 'IX2.1', '/imgs/lightON.png', '/imgs/lightOFF.png');
    showDigInputBool('led1', 'IX2.0', 'radio');
    showDigInputBool('led2', 'IX2.1', 'radio');
    showDigInputBool('boolean1', 'IX2.0', 'bool');
    showDigInputBool('boolean2', 'IX2.1', 'bool');
    showDigInputBool('text1', 'IX2.0', 'text');
    showDigInputBool('text2', 'IX2.1', 'text');
    showDigInputImg('output1', 'QX2.0', '/imgs/lightON.png', '/imgs/lightOFF.png');
    showDigInputImg('output2', 'QX2.1', '/imgs/lightON.png', '/imgs/lightOFF.png');
    }, 1000)
}); 
```

**更新**

```
function makeStartRefresher(refresh) {
    return function() {
        if (!interval){
            interval = setInterval(refresh, 1000);
        }
    }
} 
```

您可以使用此功能：

```
var startRefresh = makeStartRefresher(function() {
    g1.refresh(linearScaling(0, 32761 , 0 , 10, readData('IW0')));
    showAnalogText('textonly', 'IW0');
    g2.refresh(linearScaling(0, 32761 , 0 , 10, readData('IW1')));
    showAnalogText('textonly2', 'IW1');
    showDigInputImg('light1', 'IX2.0', '/imgs/lightON.png', '/imgs/lightOFF.png');
    showDigInputImg('light2', 'IX2.1', '/imgs/lightON.png', '/imgs/lightOFF.png');
    showDigInputBool('led1', 'IX2.0', 'radio');
    showDigInputBool('led2', 'IX2.1', 'radio');
    showDigInputBool('boolean1', 'IX2.0', 'bool');
    showDigInputBool('boolean2', 'IX2.1', 'bool');
    showDigInputBool('text1', 'IX2.0', 'text');
    showDigInputBool('text2', 'IX2.1', 'text');
    showDigInputImg('output1', 'QX2.0', '/imgs/lightON.png', '/imgs/lightOFF.png');
    showDigInputImg('output2', 'QX2.1', '/imgs/lightON.png', '/imgs/lightOFF.png');
    }, 1000)
}); 
```

# events - Google Analytics - 唯一事件并非按操作名称唯一

> ID：15370450
> 
> 赞同：2
> 
> 时间：2013-03-12T19:30:14.107
> 
> 标签：events, google-analytics

我设置了 Google Analytics (GA) 事件跟踪。当我看到“热门事件”报告时，为什么“唯一事件”数字与下面显示的行数不匹配。[查看屏幕：[单击此处](http://tinypic.com/r/346ql2p/6)] 这些行每行显示一个动作名称，并且动作名称都是唯一的（我检查了所有 23 行的唯一动作名称）。所以显示的总行数应该等于唯一事件数 - 不是吗？

我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-19T11:34:06.380

操作的唯一事件计数是发生该操作的访问次数。

此报告中的唯一事件总数应等于所有行上唯一事件的总和，而不是行数。这是因为唯一事件基于唯一的操作访问组合，并且每一行都有不同的操作。

换句话说，如果在一次访问中重复某个动作，则唯一事件计数不会增加，否则会增加。

因此，如果其中一行有 2 个唯一事件，则意味着该事件操作在 2 次单独的访问中触发，并且这两次访问都将包含在整体唯一事件中。

在您的示例中，您报告中的前 10 项操作每次仅发生 1 次访问（它们甚至可能都是同一次访问 - 您无法从该报告中看出）。

所以我猜在你的例子的第二页上有两行有 0 个唯一事件，其余的有 1 个唯一事件 - 所以它们加起来有 21 个唯一事件。

# php - Facebook PHP SDK 访问令牌

> ID：15370456
> 
> 赞同：0
> 
> 时间：2013-03-12T19:30:25.567
> 
> 标签：php, facebook, sdk, connect

我知道有很多话题

关于这个问题，但我见过的每一个问题似乎都没有解决方案！我收到了臭名昭著的“Oauth 异常 - 必须使用活动访问令牌来查询有关当前用户的信息”，我不知道该怎么办。

直到昨天，我的 facebook 连接都可以正常工作，现在，它今天突然停止工作。

谁能帮我解决这个问题？我正在使用 php sdk 在弹出窗口中将用户连接到 facebook，然后我让他自动化我的应用程序并将窗口重定向到一个名为 facebookReturn.php 的 php。在这个文件中，我应该获取用户信息，将其保存在 Session 中，然后关闭窗口并刷新后面的主页。

这是我的代码。

索引.php：

```
require_once 'phps/facebook.php';

$config = array();
$config[appId] = 'xxxx';
$config[secret] = 'xxxx';
$config[fileUpload] = false;
$facebook = new Facebook ($config);

$facebookId = $facebook->getUser();
echo "<br>facebook id: $facebookId";

if ($facebookId) {
    $userProfile = $facebook->api('/me');
    $logoutUrl = $facebook->getLogoutUrl();
}
else {
    $params = array ();
    $params[scope] = 'publish_stream, user_birthday, email, user_activities';
    $params[redirect_uri] = 'http://www.mydomain.com.br/phps/facebookReturn.php';
    $params[display] = 'popup';
    $loginUrl = $facebook->getLoginUrl($params);
} 
```

facebookReturn.php：

```
require_once 'facebook.php';
$config = array();
$config[appId] = 'xxxx';
$config[secret] = 'xxxx';
$config[fileUpload] = false;
$facebook = new Facebook ($config);

$user = $facebook->getUser();
$userProfile = $facebook->api('/me'); 
```

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-25T13:28:59.357

提醒：Facebook 令牌在 60 天后到期。

# python - Can't get amazon cmd shell to work through boto

> ID：15370463
> 
> 赞同：0
> 
> 时间：2013-03-12T19:30:56.627
> 
> 标签：python, amazon-web-services, amazon-ec2, boto

I'm trying to create an instance and login to the server using ssh, I'm following an example from a book:

```
import os
import time
import boto
import boto.manage.cmdshell

def launch_instance(ami="ami-54cf5c3d",
                    instance_type="t1.micro",
                    key_name="paws",
                    key_extension=".pem",
                    key_dir="~/.ssh",
                    group_name="paws",
                    ssh_port="22",
                    cidr="0.0.0.0/0",
                    tag="paws",
                    user_data=None,
                    cmd_shell=True,
                    login_user="ec2-user",
                    ssh_passwd=None):

    cmd=None
    ec2 = boto.connect_ec2() # Crededentials are stored in /etc/boto.cfg

    try:
        ec2.get_all_key_pairs(keynames=[key_name])[0]
    except ec2.ResponseError, e:
        if e.code == 'InvalidKeyPair.NotFound':
            print 'Creating keypair %s' % key_name
            key = ec2.create_key_pair(key_name)
            key.save(key_dir)
        else:
            raise

    try:
        group = ec2.get_all_security_groups(groupnames=[group_name])[0]
    except ec2.ResponseError, e:
        if e.code == 'InvalidGroup.NotFound':
            print 'Creating security group %s' % group_name
            group = ec2.create_security_group(group_name,
                                              'A group that allows SSH access')
        else:
            raise

    try:
        group.authorize('tcp',ssh_port,ssh_port,cidr)
    except ec2.ResponseError, e:
        if e.code == 'InvalidPermission.Duplicate':
            print 'Security group %s already authorized' % group_name
        else:
            raise

    reservation = ec2.run_instances(ami,
                                    key_name=key_name,
                                    security_groups=[group_name],
                                    instance_type=instance_type,
                                    user_data=user_data)
    instance = reservation.instances[0]

    print 'waiting for instance...'
    while instance.state != 'running':
        time.sleep(5)
        instance.update()
    print 'Instance is now running' 
    print 'Instance IP is %s' % instance.ip_address

    instance.add_tag(tag)

    if cmd_shell:
        key_path = os.path.join(os.path.expanduser(key_dir),
                                key_name + key_extension)
        cmd = boto.manage.cmdshell.sshclient_from_instance(instance,
                                                           key_path,
                                                           user_name=login_user)

    return (instance, cmd)

launch_instance() 
```

and that's the output I'm getting:

```
root@johntheripper-PORTEGE-Z835:~/boto# python ec2_launch_test.py 
Security group paws already authorized
waiting for instance...
Instance is now running
SSH Connection refused, will retry in 5 seconds
SSH Connection refused, will retry in 5 seconds
SSH Connection refused, will retry in 5 seconds
SSH Connection refused, will retry in 5 seconds
SSH Connection refused, will retry in 5 seconds
Could not establish SSH connection 
```

As you can see from the last line, that something wrong, I was thinking about permission, but even if I run it as a root, nothing changes.

However I'm able to connect to this instance through `ssh -i ........ ec2-user@.....` Can you please point me what I'm doing wrong?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-03T16:46:56.707

I think a better solution is to actually poll the instance to check if the ssh server is ready, then continue.

```
def poll_ssh(reservation): 
    # check if it is ready for ssh
    print '\nConnecting to ssh'
    for instance in reservation.instances:
        retry = True
        while retry:
            try:
                key_path = os.path.join(os.path.expanduser(KEY_DIR), KEY_NAME)
                key_path += '.pem'
                cmd = boto.manage.cmdshell.sshclient_from_instance(instance, key_path, user_name='ubuntu')
                #print 'debug: %s' % cmd
                if cmd:
                    retry = False #breaks the while loop once cmdshell returns true
                    cmd = None
                    print 'Connected to', instance
            except:
                time.sleep(5) # Let the sshd start up
        print 'Done\n' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T20:12:24.120

Sometimes it takes awhile for the ssh server to start up even though the instance is "running".

Throw in a `time.sleep(30)` and then try to connect using ssh and it should work.

[Reference](https://stackoverflow.com/questions/6025546/issues-trying-to-ssh-into-a-fresh-ec2-instance-with-paramiko)

# python - 如何向 re.findall ... Python 2.7 添加其他条件？

> ID：15370464
> 
> 赞同：0
> 
> 时间：2013-03-12T19:31:00.090
> 
> 标签：python, regex, findall

```
ORF_sequences = re.findall(r'ATG(?:...){9,}?(?:TAA|TAG|TGA)',sequence)  #thanks to @Martin Pieters and @nneonneo 
```

我有一行代码可以找到 A|G 的任何实例，后跟 2 个字符，然后是 ATG，当以 3 为单位读取时，ATG 后跟 TAA|TAG|TGA。仅在 A|G-xx-ATG 时有效-xxx-TAA|TAG|TGA 为 30 个或更多元素

我想添加一个条件

我需要 ATG 后跟一个 G

**所以 A|G-xx-ATG-Gxx-xxx-TAA|TGA|TAG #至少 30 个元素长** 示例：GCCATGGGGTTTTTTTTTTTTTTTTTTTTTTTTTGA ^ 可以工作

```
GCATGAGGTTTTTTTTTTTTTTTTTTTTTTTTTGA
^ would not work because it is an (A|G) followed by only one value (not 2) before the ATG and there is not a G following the A|G-xx-ATG 
```

我希望这是有道理的

我试过

```
ORF_sequences = re.findall(r'ATGG(?:...){9,}?(?:TAA|TAG|TGA)',sequence) 
```

但它似乎在 ATGG 的最后一个 G 之后使用了窗口大小 3

基本上我需要那个代码，其中第一次出现是 A|G-xx-ATG，第二次出现是 (G-xx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T19:34:35.747

如果您使用 字符组会更容易`[AG]`，无需将两个“免费”字符分组：

```
 ORF_sequences2 = re.findall(r'[AG]..ATG(?:...)*?(?:TAA|TAG|TGA)',fdna) 
```

或者你需要分组`A|G`：

```
 ORF_sequences2 = re.findall(r'(?:A|G)..ATG(?:...)*?(?:TAA|TAG|TGA)',fdna) 
```

将第一种形式应用于您的示例：

```
>>> re.findall(r'[AG]..ATG(?:...)*?(?:TAA|TAG|TGA)', 'GCCATGGGGTTTTGA')
['GCCATGGGGTTTTGA']
>>> re.findall(r'[AG]..ATG(?:...)*?(?:TAA|TAG|TGA)', 'GCATGGGGTTTTGA')
[] 
```

在您的尝试中，表达式匹配`A`, 或表达式，`G(?:..)ATG(?:...)*?(?:TAA|TAG|TGA)`因为该`|`符号适用于同一组中之前或之后的*所有内容。*由于它没有分组，因此它适用于整个表达式：

```
>>> re.findall(r'A|G(?:..)ATG(?:...)*?(?:TAA|TAG|TGA)', 'A')
['A']
>>> re.findall(r'A|G(?:..)ATG(?:...)*?(?:TAA|TAG|TGA)', 'GCCATGGGGTTTTGA')
['GCCATGGGGTTTTGA'] 
```

如果您需要在整个匹配中匹配一定数量的字符，则需要定制这 3 个字符`(?:...)`组以匹配最少次数：

```
 ORF_sequences2 = re.findall(r'[AG]..ATGG..(?:...){7,}?(?:TAA|TAG|TGA)',fdna) 
```

将匹配`A`或`G`后跟 2 个字符，然后是`ATGG`另外 2 个字符，然后*是至少*7 次 3 个字符（总共 21 个），然后是 3 个特定模式（或） `TAA`，从第一个字符开始总共至少 33 个字符到最后一个字符。额外的组成了 3 之后的模式，并与您评论中的示例相匹配：`TAG``TGA``..``ATG`

```
>>> re.findall(r'[AG]..ATGG..(?:...){7,}?(?:TAA|TAG|TGA)', 'GCCATGGGGTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTGA')
['GCCATGGGGTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTGA'] 
```

以及正确处理您的问题中给出的示例：

```
>>> re.findall(r'[AG]..ATGG..(?:...){7,}?(?:TAA|TAG|TGA)', 'GCCATGGGGTTTTTTTTTTTTTTTTTTTTTTTTTGA')
['GCCATGGGGTTTTTTTTTTTTTTTTTTTTTTTTTGA']
>>> re.findall(r'[AG]..ATGG..(?:...){7,}?(?:TAA|TAG|TGA)', 'GCATGAGGTTTTTTTTTTTTTTTTTTTTTTTTTGA')
[] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T19:48:28.440

为确保您获得至少 30 个字符，请使用`{n,}`量词：

```
r'[AG]..ATG(?:...){9,}?(?:TAA|TAG|TGA)' 
```

这可确保您在 ATG 开头和 TAA|TGA|TAG 终止符之间至少读取 9 个三元组（27 个字符）。

# geolocation - 无法从 BB10 设备获取网络位置

> ID：15370467
> 
> 赞同：3
> 
> 时间：2013-03-12T19:31:13.913
> 
> 标签：geolocation, blackberry-10, blackberry-android

我正在使用 Java 运行时支持将 Android 应用程序移植到 BlackBerry 10 OS。我的应用程序目前在 Android 设备上运行良好，但我无法从 BlackBerry 设备获取位置更新。

我的清单请求 COARSE_LOCATION 权限：

```
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" /> 
```

在我的代码中，我从 Activity 请求位置更新：

```
LocationListener listener = new LocationListener()
{
    public void onLocationChanged(Location location)
    {
        Log.v(TAG, "onLocationChanged");
        // Code to save returned location...
    }
    public void onStatusChanged(String provider, int status, Bundle extras) {}
    public void onProviderEnabled(String provider)  {}
    public void onProviderDisabled(String provider) {}
};
LocationManager lm = (LocationManager)this.getSystemService(Context.LOCATION_SERVICE);
lm.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, listener);
Log.v(TAG, "Registered network location listeners"); 
```

我看到从设备打印的“注册的侦听器”日志行，但我从未看到“onLocationChanged”被记录，并且我保存所提供位置的代码从未被调用。

在其他地方，我尝试获取最后一个已知位置：

```
LocationManager lm = (LocationManager)this.getSystemService(Context.LOCATION_SERVICE);
Location lastLocation = lm.getLastKnownLocation(LocationManager.NETWORK_PROVIDER); 
```

lastLocation 始终为空。

需要明确的是，这段代码在 Android 设备上运行良好，并且经过了很好的测试。

同样相关：BB10 设备报告我的应用程序具有 GPS 位置权限，但没有常规位置权限，即使我的清单仅请求 COARSE_LOCATION。可能有关系？

更新：

我有一张 BlackBerry Support 的未结票。他们说“这是一个已知问题，正在通过内部开发解决。”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T16:30:04.103

您是否已在条形描述符 xml 文件中读取地理位置权限集？

[http://developer.blackberry.com/air/documentation/bb10/r_barfile_dtd_ref_permission.html](http://developer.blackberry.com/air/documentation/bb10/r_barfile_dtd_ref_permission.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-12T19:48:13.050

问题出在 BlackBerry Android 运行时。它已在 OS 10.1 中修复。

支持票在这里（现已关闭）：[https ://www.blackberry.com/jira/browse/BBTEN-999](https://www.blackberry.com/jira/browse/BBTEN-999)

See this forum thread also: [http://supportforums.blackberry.com/t5/Android-Runtime-Development/Can-not-fetch-location-using-network-provider/m-p/2424553#M5040](http://supportforums.blackberry.com/t5/Android-Runtime-Development/Can-not-fetch-location-using-network-provider/m-p/2424553#M5040)

# c# - 我的 c# 参考去哪儿了？

> ID：15370469
> 
> 赞同：0
> 
> 时间：2013-03-12T19:31:15.717
> 
> 标签：c#, linq, reference, ssis, script-component

到目前为止，我还没有看到这样的问题 - 我在 SSIS 包中有一个脚本组件。到目前为止，我已经添加了一些参考。它似乎按预期工作。我添加了`System.Data.Linq`并且`System.Data.Linq.Mapping`它似乎工作正常（关键词上的颜色改变了颜色，智能感知红线消失了）。然后我关闭我的脚本并运行包，然后它没有工作（但也没有给我一个错误），我打开脚本组件并且引用消失了！我添加它，做同样的事情，打开它，它又消失了！我不知道发生了什么事

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T19:44:26.630

我要做的是在关闭解决方案（我假设您正在保存更改）之后，我将使用 TFS 或 VSS 对项目或解决方案进行文件比较。您的更改可能未正确保存，或者您可能正在编辑错误的项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T08:03:57.023

Sooooo 显然“保存所有”有效。即使我之前从未点击过“全部保存”，我只是添加了 System.Core 并保存了。奇怪的。

# java - 如何在java中复制（内存）数组？

> ID：15370474
> 
> 赞同：1
> 
> 时间：2013-03-12T19:31:57.180
> 
> 标签：java, arrays, memory

嗨，我想复制一个数组……我不想使用复制速度慢的“克隆”……我尝试了 arraycopy 和 copyOf，但它不起作用

```
for (int i = 0; i < arraySize; i++) {
            City[] tempCities = Arrays.copyOf(cities, cities.length) ;
            distance = 0;
            tempCities[i].setVisited();
} 
```

但这修改了我原来的数组（城市）。有谁知道如何复制并且没有另一个指向同一对象的指针

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T19:34:47.780

真正的问题是您将*引用*存储在数组中。如果您希望新数组中的对象独立于原始数组中的对象，则必须进行深层复制。为此，`cities[i].clone()`是你的朋友。

至于您的性能问题，很可能是由于您*在 loop 的每次迭代*期间都复制了数组。这是非常浪费的；一个副本就足够了。

# r - 在 for 循环中存储或打印“t.test”的结果

> ID：15370475
> 
> 赞同：1
> 
> 时间：2013-03-12T19:32:00.427
> 
> 标签：r, for-loop

我是 R 新手，在 R 中打印“for”循环的结果时遇到问题。这是我的代码：

```
afile <- read.table(file = 'data.txt', head =T)##Has three columns Lab, Store and Batch
lab1 <- afile$Lab[afile$Batch == 1]
lab2 <- afile$Lab[afile$Batch == 2]
lab3 <- afile$Lab[afile$Batch == 3]
lab_list <- list(lab1,lab2,lab3)
for (i in 1:2){
    x=lab_list[[i]]
    y=lab_list[[i+1]]
    t.test(x,y,alternative='two.sided',conf.level=0.95)
 } 
```

此代码运行没有任何错误，但在屏幕上不产生任何输出。我尝试使用“分配”将结果放入变量中，但这会产生错误：

```
for (i in 1:2){x=lab_list[[i]];y=lab_list[[i+1]];assign(paste(res,i,sep=''),t.test(x,y,alternative='two.sided',conf.level=0.95))}
Warning messages:
1: In assign(paste(res, i, sep = ""), t.test(x, y, alternative = "two.sided",  :
only the first element is used as variable name
2: In assign(paste(res, i, sep = ""), t.test(x, y, alternative = "two.sided",  :
only the first element is used as variable name 
```

请帮助我了解如何在循环中执行 t.test 并获得他们的结果，即在屏幕上打印或保存在变量中。

AK

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T19:45:06.540

我会像这样重写你的代码：

我假设你的数据是这样的

```
afile <- data.frame(Batch= sample(1:3,10,rep=TRUE),lab=rnorm(10))
afile
   Batch        lab
1      2  0.4075675
2      1  0.3006192
3      1 -0.4824655
4      3  1.0656481
5      1  0.1741648
6      2 -1.4911526
7      2  0.2216970
8      1 -0.3862147
9      1 -0.4578520
10     1 -0.6298040 
```

然后使用`lapply`您可以将结果存储在列表中：

```
lapply(1:2,function(i){
 x <- subset(afile,Batch==i)
 y <- subset(afile,Batch==i+1)
   t.test(x,y,alternative='two.sided',conf.level=0.95)
})

[[1]]

    Welch Two Sample t-test

data:  x and y 
t = -0.7829, df = 6.257, p-value = 0.4623
alternative hypothesis: true difference in means is not equal to 0 
95 percent confidence interval:
 -1.964637  1.005008 
sample estimates:
mean of x mean of y 
0.3765373 0.8563520 

[[2]]

    Welch Two Sample t-test

data:  x and y 
t = -1.0439, df = 1.797, p-value = 0.4165
alternative hypothesis: true difference in means is not equal to 0 
95 percent confidence interval:
 -6.588720  4.235776 
sample estimates:
mean of x mean of y 
 0.856352  2.032824 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T19:36:46.533

在循环中，您需要在许多情况下显式打印结果。尝试：

```
print(t.test(x,y,alternative='two.sided',conf.level=0.95)) 
```

或者

```
print(summary(t.test(x,y,alternative='two.sided',conf.level=0.95))) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T19:57:29.597

除了“汉森”打印解决方案外，还可以保存和打印结果，如下所示：

```
result <- vector("list",6)
for (i in 1:5){x=lab_list[[i]];y=lab_list[[i+1]];result[[i]] = t.test(x,y,alternative='two.sided',conf.level=0.95)}
result 
```

AK

# java - Hadoop 从/向 HDFS 写入/读取 int[]

> ID：15370479
> 
> 赞同：2
> 
> 时间：2013-03-12T19:32:30.063
> 
> 标签：java, hadoop, hdfs

我正在尝试了解如何在 HDFS 中的文件中写入和读取 int 数组。由于`int[]`数组不是`Writable`对象，因此我实际上正在使用该类`org.apache.hadoop.io.ObjectWritable`

所以写任务归结为以下调用：

```
new ObjectWritable(int[].class, array).write(arg0); 
```

相反，读取任务会导致以下结果：

```
int[] array = {};
new ObjectWritable(int[].class, array).readFields(arg0); 
```

我不太确定最后一个代码片段。事实上，如果我尝试执行它，我会`NullPointerException`在第二行得到一个。

如何正确执行`int[]`数组读取？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T21:20:21.967

对于对象数组，您应该使用内置类[ArrayWritable](http://hadoop.apache.org/docs/current/api/org/apache/hadoop/io/ArrayWritable.html)。正如 javadoc 所说，您必须对其进行子类化并创建一个新类型，如`IntArrayWritable`，它设置数组元素的正确类类型。

看一个[例子](https://stackoverflow.com/questions/7919035/serialization-using-arraywritable-seems-to-work-in-a-funny-way/9726227#9726227)，展示如何`IntArrayWritable`在映射器中填充一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T11:36:04.440

尽管 harpun 的解决方案正常工作，但我想到了另一个问题.. 这个问题更多的是关于性能，因为我的应用程序进行了大量的`int[]`写入和读取..

我认为以下解决方案应该更高效..

写：

```
WritableUtils.writeVInt(out, array.length);
for(int i=0; i<array.length; i++)
   WritableUtils.writeVInt(out, array[i]); 
```

读：

```
int[] array = new array[WritableUtils.readVInt(in)];
for(int i=0; i<array.length; i++)
   array[i] = WritableUtils.readVInt(in); 
```

而不是每次都将其包装成 IntArrayWritable ..

写：

```
IntWritable[] a = new IntWritable[array.length];
for(int i=0; i<a.length; i++)
   a[i] = new IntWritable(array[i]);
IntArrayWritable arrayWritable = new IntArrayWritable();
arrayWritable.set(a);
arrayWritable.write(arg0); 
```

读：

```
IntArrayWritable arrayWritable = new IntArrayWritable();
arrayWritable.readFields(arg0);
Writable[] a = arrayWritable.get();
int[] array = new int[a.length];
for(int i=0; i<array.length; i++)
   array[i] = ((IntWritable)a[i]).get(); 
```

不是吗？你怎么看？

# django - Django admin 中的 build_absolute_uri（用于 list_display 字段）

> ID：15370490
> 
> 赞同：1
> 
> 时间：2013-03-12T19:33:00.120
> 
> 标签：django, django-admin

我正在尝试在 Django 管理员的列表显示中显示绝对 URI：

```
from django.contrib import admin
class MyAdmin(admin.ModelAdmin):
    list_display = (
        'full_uri',
    )

    readonly_fields = (
        'full_uri',
    )

    def full_uri(self, obj):
        return u'<a href="{url}">{url}'.format(
            url = request.build_absolute_uri(reverse('view_name', args=(obj.pk, )))
        )
    full_uri.allow_tags = True 
```

问题 - 我无权访问请求对象（其中`build_absolute_uri`定义）。

我试图在本地覆盖`changelist_view`和存储请求，但这不是[线程安全](https://stackoverflow.com/a/3388173/1705056)的。

我也尝试过[这个](https://stackoverflow.com/a/8817935/1705056)解决方案，但它不是很优雅。

还有其他想法吗？

**编辑：**

这是一个安全的解决方案：

```
def changelist_view(self, request, extra_context=None):
    self.request = request
    try:
        return super(MyAdmin,self).changelist_view(request, extra_context=extra_context)
    finally:
        self.request = None 
```

**编辑2：**

根本不是线程安全的！[1](https://stackoverflow.com/a/6887028/1705056) [2](https://stackoverflow.com/questions/11764685/django-modeladmin-with-request-user-based-restrictions-on-the-fieldsets-needs-t) , ...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T21:52:04.643

每个扩展 admin.ModelAdmin 的类都有两个可以覆盖的函数：change_view 和 changelist_view。 `change_view`在编辑单个实例时`changelist_view`调用，在查看所有项目列表时调用。

这两个函数充当管理员的视图定义并包含页面的请求对象。这意味着在这两个函数中，您可以将请求存储为 的属性，`self`以使其可供从该视图调用的类中的其他函数访问。话虽如此，这样的事情应该可以工作：

```
from django.contrib import admin
class MyAdmin(admin.ModelAdmin):
list_display = (
    'full_uri',
)

readonly_fields = (
    'full_uri',
)

def change_view(self, request, object_id, form_url='', extra_context=None):
    # access the request object when in the change view
    self.request = request
    return super(MyAdmin, self).change_view(request, object_id, form_url=form_url, extra_context=extra_context)

def changelist_view(self, request, extra_context=None):
    # access the request object when in the list view
    self.request = request
    return super(MyAdmin,self).changelist_view(request, extra_context=extra_context)

def full_uri(self, obj):
    return u'<a href="{url}">{url}'.format(
        # access the request object through self.request, as set by the two view functions
        url = self.request.build_absolute_uri(reverse('view_name', args=(obj.pk, )))
    )
full_uri.allow_tags = True 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T13:17:47.117

我想我找到了一种以线程安全的方式执行此操作的方法，在里面创建一个函数`get_list_display`：

```
def get_list_display(self, request):

   def link_to_view(obj):
        return u'<a href="{url}">{url}'.format(
            url = request.build_absolute_uri(reverse('view_name', args=(obj, )))
        )
    token_access_link.short_description = _('link')
    token_access_link.allow_tags = True

    return (
        link_to_view,
    ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-13T04:34:28.727

如果我正确理解了这个问题，您只需要访问尚未发送的函数中的请求对象吗？

如果是这样，我发现[django-globals](https://pypi.python.org/pypi/django-globals)是最有帮助的，因为它提供了对当前请求和用户的通用访问（默认情况下应该可以像在烧瓶中一样访问！）

```
pip install django-globals 
```

设置.py

```
INSTALLED_APPS = [
   ...
   'django_globals'
]
MIDDLEWARE_CLASSES = [
    ...
    'django_globals.middleware.Global'
] 
```

视图.py

```
from django_globals import globals as djglobals

def myfunc():
    djglobals.user
    djglobals.request 
```

# java - 如何让 android 拼写检查框架工作

> ID：15370494
> 
> 赞同：2
> 
> 时间：2013-03-12T19:33:09.523
> 
> 标签：java, android, spell-checking

我试过让android拼写检查器工作

[http://developer.android.com/guide/topics/text/spell-checker-framework.html](http://developer.android.com/guide/topics/text/spell-checker-framework.html)

但是无法理解如何。hello 拼写检查器将加载一个空白活动，而服务示例什么也不做。

可以通过 sdk 示例访问它们。

有谁知道如何使用它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T08:07:29.823

它为您提供了他们在 HelloSpellChecker 中输入的单词的 TextView 和一些建议。首先安装 SampleSpellCheckerService，然后安装 HelloSpellChecker 应用程序。如果它第一次不起作用，请尝试对 HelloSpellCheckerActivity 进行微小更改（插入注释或叮当空间）并再次运行它，它会起作用。

# c# - 如何确保某些类成员在使用前被初始化

> ID：15370495
> 
> 赞同：-4
> 
> 时间：2013-03-12T19:33:18.280
> 
> 标签：c#, c++

我在思考语言结构，以及当我们谈论面向对象语言中的类和对象时，我们如何与现实世界进行比较。就像当人们谈论继承时，人们会引用父母和孩子的例子。我在我所知道的 OO 语言（主要是 C、C++、C#）中找不到的一件事是，它们没有将属性声明为强制的机制。我的意思是我不能定义一个叫做人类的类，并说脸、手和眼睛是我类的强制性属性。通过具有该构造，我可以强制使用我的类的任何人都需要在使用我的类之前设置这些属性。如果用户忘记设置这些属性，那么我应该得到一个编译时错误。

只是想看看社区对此的看法。

这就是我问上述问题的原因：

当我构建我的用户控件时，我想确保用户在使用我的控件时应该在他们的代码中设置一些属性。例如，假设我构建了一个客户用户控件，我的团队中的其他开发人员将使用该控件。我公开的一些属性是：“CustomerId”、“FirstName”、“LastName”、“Address1”、“City”、“State”和 ZipCode。现在我想确保我控制的任何消费者都应该设置“CustomerId”。使用构造函数强制设置值是一种方法，但它会引发运行时异常，以及用户如何从 .cs 文件调用该构造函数，而无需动态创建控件并将其添加到控件集合中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T19:38:02.267

是的，C++ 和 C# 允许通过构造函数实现这一点。

```
class A
{
public: 
    A(int x, int y, int z)
      : _x(x_, _y(y), _z(z) {}
private:
    int _x;
    int _y;
    int _z;
}; 
```

`A`如果不提供、 和的值`_x`，则无法创建 的实例。`_y``_z`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T19:37:13.187

原因是在对象构造期间应该提供满足类不变量所需的状态，因此您应该提供“强制”属性的值作为构造函数参数。您的问题是基于错误的假设，即对象的特征是通过属性设置状态。这是错误的，有几个原因，其中一些是：

*   许多（如果不是大多数）OO 语言都没有属性：Java、C++、...
*   你使用的只是形式上的一个对象，它实际上是一个普通的记录，它不是非常面向对象的，就像没有方法的 C++ 结构一样（参见底部关于 setter 与方法的注释）

允许客户端创建对象的实例，这些实例仅在以后设置为强制状态的正确值，这是在调试器公司中花费大量时间的可靠方法。

让我们采取一些`User`不变的方式，即必须始终设置名字和姓氏。

```
class User {
    public User(string first, string last) { ... }
    public User(string first, string last, uint age) : this(first, last) { ... }
}

// client code:
var user = new User("john", "doe");
var user2 = new User("Clint", "Eastwood", 82); 
```

编译器确保没有人可以在不满足不变量的情况下实例化对象。

现在将其与您的方法进行比较：

```
class User {
    public User(string first, string last) { ... }
    public User(uint age)  { ... }
    [Mandatory] public string FirstName { get; set; }
    [Mandatory] public string LastName { get; set; }
}

// client code:
var actor = new User(82); // << invalid
actor.FirstName = "Clint";
actor.LastName = "Eastwood"; // << valid 
```

这种方法会产生更多代码，并允许您的对象在一段时间内（在`<< invalid`和之间`<< valid`）处于无效状态。如果某些属性设置器抛出异常怎么办？你留下了四处漂浮的破碎的对象实例。您是否希望编译器也验证 setter 中的代码不能抛出？你认为这甚至可能吗？除此之外，每个实例化`User`实例的客户端都必须检查什么是强制属性，并确保设置所有这些属性。这有效地破坏了封装。

IMO，与 getter 不同，属性设置器应该很少见。我相信在这样的课程中，你不应该有 FirstName/LastName 的 setter，只有 getter。`SetName(string first, string last)`相反，如果您真的想允许更改名称，则应该有一种方法。原因如下：

```
// lets rename actor
actor.FirstName = "John";
actor.LastName = "Wayne"; 
```

如果最后一行抛出，你会留下约翰伊斯特伍德，一个我从未听说过的演员。这`actor.SetName("John", "Wayne")`不可能发生。

此外，对于您指定它们的依赖关系的属性，例如

```
obj.ErrorCode = 123;  // imagine that error code must be != 0
obj.ErrorMsg = "foo"; // in order to be allowed to set error code 
```

您还会为此引入属性而不是拥有`obj.SetErrorInfo(123, "foo")`吗？这很明显，属性破坏了封装，因为顺序是由实现细节引起的，这与方法调用不同。

很多时候，在 C# 等语言中，构造函数中提供了必需的状态或依赖项，而可以通过属性设置可选状态。但是，使语言面向对象的不是属性或继承。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T19:37:22.503

您可以使用 DDD 原则来做到这一点：创建一个具有私有默认构造函数的类，以及一个接受所需参数并验证其值的公共构造函数。如果值无效，则抛出异常，使对象无法创建。属性也可以有私有设置器而不是公共设置器。

您还可以创建一个“强制”属性并将其放在强制属性之上；并有一个机制来检查这个基于属性是否已经用属性装饰。

例子：

```
public class BlogEntry 
{
    private BlogEntry() {}
    public BlogEntry(string title, string body)
    {
        LastModifiedDate = DateTime.Now;
        Title = title;
        Body = body;

        var blogEntryValidator = new BlogEntryValidator();
        blogEntryValidator.ValidateAndThrow(this);     
    }

    public int Id { get; private set; }
    public string Title { get; private set; }
    public string Body { get; private set; }
    public DateTime? LastPublishDate { get; private set; }
    public DateTime LastModifiedDate { get; private set; }
    public virtual ICollection<Comment> Comments { get; private set; }        

    public void Publish()
    {
        LastPublishDate = DateTime.Now;
    }

    public void Unpublish()
    {
        LastPublishDate = null;
    }

    public void Modify(string title, string body)
    {
        Title = title;
        Body = body;
        LastModifiedDate = DateTime.Now;
    }

    public Comment AddComment(string commentText, string emailAddress, string name)
    {
        var comment = new Comment(this, commentText, emailAddress, name);
        if (Comments == null) Comments = new List<Comment>();
        Comments.Add(comment);
        return comment;
    }

    public void RemoveComment(Comment comment)
    {
        Comments.Remove(comment);
    }
}

public class Comment 
{
    private Comment() {}
    public Comment(BlogEntry blogEntry, string name, string emailAddress, string commentText)
    {            
        BlogEntry = blogEntry;
        Name = name;
        EmailAddress = emailAddress;
        CommentText = commentText;
        DateWritten = DateTime.Now;

        var commentValidator = new CommentValidator();
        commentValidator.ValidateAndThrow(this);    
    }

    public int Id { get; private set; }        
    public string Name { get; private set; }
    public string EmailAddress { get; private set; }
    public string CommentText { get; private set; }
    public DateTime DateWritten { get; private set; }
    public BlogEntry BlogEntry { get; private set; }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T19:38:23.267

你当然可以！只需在构造函数中使用参数来表示哪些是强制性的。

```
public class Human
{
    public Face Face { get; set; }
    public Hand Hand { get; set; }

    public Human(Face face, Hand hand) {} etc...
} 
```

在这种情况下，您不能使用私有构造函数，因此为了使用 Human 类，这些属性本质上是“强制性的”。

# r - ggplot2 绘制两个图例

> ID：15370496
> 
> 赞同：5
> 
> 时间：2013-03-12T19:33:20.087
> 
> 标签：r, ggplot2, legend, legend-properties

我几乎完成了下面的图表，但它有一个问题。

图中的图例绘制了两次。

这是数据：

```
structure(list(Period = c("January 1997 - August 2003", "September 2003 - Jun 2005", 
"Jul 2005 - Dec 2009", "January 1997 - August 2003", "September 2003 - Jun 2005", 
"Jul 2005 - Dec 2009"), Time.Period = structure(c(1L, 3L, 2L, 
 1L, 3L, 2L), .Label = c("Jan 1997 - Aug 2003", "Jul 2005 - Dec 2009", 
 "Sep 2003 - Jun 2005"), class = "factor"), Variable = structure(c(2L, 
 2L, 2L, 1L, 1L, 1L), .Label = c("Significant", "Zscore"), class = "factor"), 
 Score = c(8.798129, 4.267268, 7.280275, 1.64, 1.64, 1.64)), .Names = c("Period", 
 "Time.Period", "Variable", "Score"), class = "data.frame", row.names = c(NA, 
 -6L))

ggplot(glomor, aes(x=Time.Period, y=Score, group=Variable, shape=Variable, color=Variable)) +
 geom_point() +
 guides(fill=FALSE) +
 scale_x_discrete(limits=c("Jan 1997 - Aug 2003","Sep 2003 - Jun 2005","Jul 2005 - Dec 2009"),    expand=c(.08,0)) +
  geom_line(aes(linetype=Variable), size=1.5) +
  geom_point(size=4.2) +
  scale_linetype_manual(values=c(1,3)) +
  scale_color_manual(values=c("black", "grey40"), name="", labels=c("Signficant Z-Score",   "Moran's I Z-Score")) +
  scale_fill_discrete(name="", label=c("Signficant Z-Score", "Moran's I Z-Score")) +
  theme_classic()+
  ylim(0,10) +
  xlab("Time Periods") +
  ylab("Moran's I Z-Score") +
  theme(axis.title.x=element_text(size=14)) +
  theme(axis.title.y=element_text(size=14)) +
  theme(legend.position=c(.75, .85)) +
  theme(legend.background = element_rect(fill="white")) +
  theme(legend.key = element_blank()) 
```

有谁知道，为什么 ggplot2 会产生两个图例？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-12T22:57:51.290

您具有映射到的三种美学`Variable`：形状、颜色和线型。当图例具有相同的标题和标签时，它们会折叠在一起。您已将颜色的标题设置为空白，并为其指定了自定义标签（“显着 Z 分数”和“莫兰 I Z 分数”）。您还需要对线型和形状执行此操作，以使它们全部折叠在一起。

改变

```
scale_linetype_manual(values=c(1,3)) + 
```

到

```
scale_linetype_manual(values=c(1,3), name="", labels=c("Signficant Z-Score",   "Moran's I Z-Score")) + 
```

并添加

```
scale_shape_discrete(name="", label=c("Signficant Z-Score", "Moran's I Z-Score")) + 
```

（你也可以去掉，`scale_fill_discrete`因为你实际上并没有在任何地方使用填充美学。）

这给 ![在此处输入图像描述](../Images/da314a6e46c41daaa69a2ce755e05675.png)

# html - 将可爱滑块与 HTML5Boilerplate 集成

> ID：15370498
> 
> 赞同：0
> 
> 时间：2013-03-12T19:33:36.910
> 
> 标签：html, css, html5boilerplate

使用 HTML5Boilerplate 优化包含可爱滑块的页面时，幻灯片会下降大约 15 像素，并且会返回列表样式的光盘。这可以在[http://www.quailparkoflynnwood.com/dev/index.htm](http://www.quailparkoflynnwood.com/dev/index.htm)（未压缩）和[http://www.quailparkoflynnwood.com/dev/publish/index.htm](http://www.quailparkoflynnwood.com/dev/publish/index.htm)（压缩）中看到。任何有关查明原因的见解将不胜感激。我的回退是根本不压缩包含滑块的页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T21:46:39.300

问题是可爱的滑块样式没有包含在最终的压缩输出中。通过使用 main.css 保存所有 css 文件的导入语句来解决这个问题。在早期版本的 HTML5 样板中，这是正确的编码。我对 HTML5bp v4.1.0 的阅读似乎暗示这不再是预期的设置，但最新版本的 Build (v1.0) 仍然需要导入语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T20:02:30.517

我看不到滑块，带有光盘的图像实际上是列表项中的图像，因此您在 div#slideshow; 中有一个无序列表；也许 normalize.css 没有覆盖无序列表的样式规则。

将以下代码添加到样式标记或 css 文件以删除该样式

```
#slideshow ul {
list-style-type: none !important; /*remove disc !important to override other rules */
padding: 0; 
```

}

您的网站的页面速度得分为 51/100 :( 您有大量 404（对非现有资源的错误请求）和大图像（也未优化）。84c8a31.css 它很大而且缩小，并且似乎有重复的样式规则.

就我个人而言，我不会使用 js/css 缩小，因为它使进一步的维护变得非常复杂，以换取保存 som kb 和几个请求，在我看来，这是非常划算/有效的（对于常规大小的网站）。

如果您想优化您的网站，请开始优化和调整图像大小，查找并删除您提出的所有错误请求，尝试仅加载一两个带有您实际使用的样式规则的 css 文件，将脚本放在最后。

准备就绪时：gzip 文件并使用 .htaccess 文件添加缓存标头

祝开发者好运！

# jpa - 如何在不获取 JPA 中的子类的情况下查询超类表？

> ID：15370500
> 
> 赞同：0
> 
> 时间：2013-03-12T19:33:38.460
> 
> 标签：jpa

JPA 中是否有一种简单的方法来查询超类表，而不会自动神奇地加入子类表并构造完整的对象？考虑我有一个 Person 类和一个名为 Male 的 Person 子类（仅作为示例）。他们使用连接策略进行继承。我可以在不获取 Male 属性的情况下查询 Person 实例（没有 Male 实例的具体 Person 实例）吗？我很确定简单的答案是使用聚合而不是继承，但是在更改之前我想看看继承是否可行。

谢谢！

# asp.net - asp.Net ValidationGroup 正确验证，但 Enter 键除外

> ID：15370504
> 
> 赞同：0
> 
> 时间：2013-03-12T19:33:50.443
> 
> 标签：asp.net, validationgroup

我在这里看到了很多与这个问题非常接近的问题，但没有一个似乎适合这个特定的场景。

描述：我在主页面中有带有登录按钮的 ID 和密码字段。这些在“LoginValidationGroup”中并且工作正常。

现在，在 Default.aspx 中，我有一个电子邮件文本框和提交按钮，它们位于“NotifyMeValidation”组中，它们也可以工作，但如果你按下回车键而不是提交按钮，它们就不行了。提交按钮工作正常 - 输入键......不是那么多。

Enter 键会导致在 LoginValidationGroup 上进行验证，即使 TextBox 设置为 CausesValidation="true"，并且它位于 NotifyMeValidation 组中。

我保证人们会在该框中输入电子邮件并按 Enter。我会！！！当他们这样做时，他们会在顶部看到一个标注气球，告诉他们需要用户 ID。

我的错误是什么？如果我需要发布实际代码，我可以这样做。

实际上，让我继续做吧。

从 Default.aspx：

```
<asp:RequiredFieldValidator 
    runat="server"
    ValidationGroup="NotifyMeValidation"
    ID="EmailRequiredValidator"  
    ControlToValidate="SenderEmailTextBox"
    ErrorMessage="Email is Required" 
    Display="None" />
<ajaxToolkit:ValidatorCalloutExtender 
    runat="Server"
    PopupPosition="Left"
    ID="EmailRequiredValidatorExtender"
    Width="185px"
    TargetControlID="EmailRequiredValidator" 
    WarningIconImageUrl="/Images/warning.gif" />
<asp:Label ID="SenderEmailLabel" runat="server" ssociatedControlID="SenderEmailTextBox" EnableViewState="false" Text="Email:"></asp:Label>&nbsp;&nbsp;
<asp:TextBox ID="SenderEmailTextBox" runat="server" ValidationGroup="NotifyMeValidation" Width="350" BackColor="#cccccc" CausesValidation="true"></asp:TextBox>
<br /><br />
<asp:Button ID="SubmitButton" runat="server" ValidationGroup="NotifyMeValidation" EnableViewState="false" CssClass="submit" Text="Send" CausesValidation="true" OnClick="btnSubmit_Click" /> 
```

从母版页：

```
<asp:Label CssClass="LoginHeading" ID="UserNameLabel" runat="server" AssociatedControlID="UserNameTextbox">UserName:&nbsp;</asp:Label>
<asp:TextBox CssClass="LoginTextBox" ID="UserNameTextbox" runat="server"  ValidationGroup="LoginValidation" CausesValidation="True"></asp:TextBox>&nbsp;
<asp:Label CssClass="LoginHeading" ID="PasswordLabel" runat="server" AssociatedControlID="PasswordTextbox">Password:&nbsp;</asp:Label>
<asp:TextBox CssClass="LoginTextBox" ID="PasswordTextBox" runat="server" TextMode="Password" ValidationGroup="LoginValidation" CausesValidation="True"></asp:TextBox>&nbsp;
<asp:Button CssClass="LoginHeading" ID="LoginButton" runat="server" Text="Button" CommandName="Login"  ValidationGroup="LoginValidation" CausesValidation="True" onclick="LoginButton_Click" /> 
```

母版页验证器...

```
<asp:RequiredFieldValidator runat="server" ID="UIDRequired"
    ValidationGroup="LoginValidation"   
    ControlToValidate="UserNameTextbox"  
    Display="None"  
    ErrorMessage="<b>Required Field Missing</b><br />A User ID is required." />  
<ajaxToolkit:ValidatorCalloutExtender 
    runat="Server"
    ID="UIDValidationExtender"
    PopupPosition="Left"
    Width="185px"
    TargetControlID="UIDRequired" 
    WarningIconImageUrl="/Images/warning.gif" />
<asp:RequiredFieldValidator runat="server" ID="PWRequired"   
    ValidationGroup="LoginValidation" 
    ControlToValidate="PasswordTextbox"  
    Display="None"  
    ErrorMessage="<b>Required Field Missing</b><br />A password is required." />
<ajaxToolkit:ValidatorCalloutExtender 
    runat="Server"
    ID="PWValidationExtender"
    PopupPosition="Left"
    TargetControlID="PWRequired" 
    Width="185px"
    WarningIconImageUrl="/Images/warning.gif" />
<asp:CustomValidator 
    runat="server" 
    Display="None"
    ValidationGroup="LoginValidation" 
    ID="CustomUserExistsValidator"
    ControlToValidate="UserNameTextbox" 
    ErrorMessage="<b>Invalid UserID!</b><br />User ID doesn't exist. Please try again.<br />"
    OnServerValidate="CustomCheckUserExists"/>
<ajaxToolkit:ValidatorCalloutExtender 
    runat="server" 
    PopupPosition="Left"
    ID="UserIDCalloutExtender"
    TargetControlID="CustomUserExistsValidator"
    Width="185px"
    WarningIconImageUrl="/Images/warning.gif" />
<asp:CustomValidator 
    runat="server" 
    ID="CustomPWValidator"
    Display="None"
    ValidationGroup="LoginValidation" 
    ControlToValidate="PasswordTextbox" 
    ErrorMessage="<b>Invalid Password!</b><br />Please try again.<br />"
    OnServerValidate="CustomValidatePassword"/>
<ajaxToolkit:ValidatorCalloutExtender 
    runat="server" 
    PopupPosition="Left"
    ID="PWCalloutExtender"
    TargetControlID="CustomPWValidator"
    Width="185px"
    WarningIconImageUrl="/Images/warning.gif" />
<asp:CustomValidator 
    runat="server" 
    ID="CustomUserApprovedValidator"
    Display="None"
    ValidationGroup="LoginValidation" 
    ControlToValidate="UserNameTextbox" 
    ErrorMessage="<b>Approval Error!</b><br />This UserID exists, but is not yet approved.<br />"
    OnServerValidate="CustomCheckUserApproved"/>
<ajaxToolkit:ValidatorCalloutExtender 
    runat="server" 
    PopupPosition="Left"
    ID="UserApprovedCalloutExtender"
    TargetControlID="CustomUserApprovedValidator"
    Width="185px"
    WarningIconImageUrl="/Images/warning.gif" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T19:44:19.137

尝试`<asp:Panel>`在每组控件周围添加一个，并将该[`DefaultButton`属性](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.panel.defaultbutton.aspx)设置为用户点击时要单击的按钮的 ID `Enter`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T19:47:38.140

只是为了解释这里发生了什么，当您在文本框上按 enter 时，会触发 aspx 的默认按钮。为了处理这个问题，您可以在文本框上单击回车键时触发一些 jQuery 代码，然后此代码将执行您需要的特定按钮的单击。[检查这个](http://jagadeeshm.wordpress.com/2009/09/15/jquery-setting-default-submit-button-for-enter-key-using-jquery/)

# asp.net - 从Gridview中的超链接获取行

> ID：15370505
> 
> 赞同：0
> 
> 时间：2013-03-12T19:33:52.633
> 
> 标签：asp.net, gridview

我在 asp.net gridview 中有一个超链接字段，它在 aspx 文件中运行代码，例如

```
<asp:GridView ID="gvCoursesList" runat="server">
    <Columns>
        <asp:BoundField DataField="Course" HeaderText="Course">
        </asp:BoundField>
        <asp:TemplateField>
            <ItemTemplate>
                <asp:LinkButton ID="lblSignup" runat="server" Text="Sign Up" OnClick= "lblSignup_Click" />
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

在我的文件后面的代码中，我具有以下功能：

```
 protected void lblSignup_Click(object sender, EventArgs e)
    {
    } 
```

如何从此函数中检索第一列的值。我想做类似的事情

```
string course = gvCoursesList.DataKeys[e.RowIndex].Value.ToString(); 
```

但它不起作用。还有其他想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T19:47:55.703

@jishnusaha 应该是您应该采取的方法。这是另一种选择：[http ://forums.asp.net/p/1137287/1821091.aspx](http://forums.asp.net/p/1137287/1821091.aspx)

```
protected void lblSignup_Click(object sender, EventArgs e)
{
    LinkButton btn = sender as LinkButton;
    GridViewRow row = btn.NamingContainer as GridViewRow;

    string course = gvCoursesList.DataKeys[row.RowIndex].Value.ToString();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T19:38:01.747

```
<asp:GridView ID="gvCoursesList" runat="server" OnRowCommand="gvCoursesList_RowCommand">
<Columns>
    <asp:BoundField DataField="Course" HeaderText="Course">
    </asp:BoundField>
    <asp:TemplateField>
        <ItemTemplate>
            <asp:LinkButton ID="lblSignup" runat="server" Text="Sign Up" CommandName="SignUp" />
        </ItemTemplate>
    </asp:TemplateField>
</Columns> 
```

```
protected void gvCoursesList_RowCommand(object sender, GridViewRowCommandEventArgs e)
{
  if(e.CommandName=="SignUp")
  {
     string course = gvCoursesList.DataKeys[e.RowIndex].Value.ToString();
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T20:06:36.547

感谢codingbiz。他的解决方案只需要根据以下内容进行一些调整。

```
LinkButton btn = sender as LinkButton;
GridViewRow row = btn.NamingContainer as GridViewRow;
string course = row.Cells[0].Text; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T19:37:14.173

使用 .cells.text 获取值：

```
protected void lblSignup_Click(object sender, EventArgs e)
{
    GridViewRow row = gvCoursesList.rows[e.rowindex]
    string course = row.cells[cellIndex].text;
} 
```

# networking - 1 IPv4 地址有多少种可能的解释？

> ID：15370506
> 
> 赞同：-1
> 
> 时间：2013-03-12T19:33:58.663
> 
> 标签：networking, ip, network-protocols

考虑到子网掩码，1 个 IPv4 地址有多少种解释方式？根据[维基百科](http://en.wikipedia.org/wiki/Subnetwork#IPv4_subnetting)，似乎 1 个 IP 地址有 32 个可能的子网掩码，但我不知道。

我不清楚“网络掩码”是否与“子网掩码”相同；是否有将多个掩码应用于 IP 地址的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T20:17:08.993

网络掩码和子网掩码本质上是相同的东西，尽管可能有不同的表示。255.255.255.0 或 /24 都是掩码表示。给定的 IP 地址可能属于不同的网络掩码，但有一些标准准则。A 类网络通常在第一个八位字节中的数字较低。10.0.0.0 是 A 类私有空间，掩码为 255.0.0.0 这意味着 10.anything 是该网络的一部分，不应路由到该网络之外。您可以执行诸如超网之类的操作，这意味着将子网更改为 255.252.0.0 之类的东西，它限制了网络中的地址，但不是 ab 或 c 类。B 类网络是 255.255.0.0 。C 类是 255.255.255.0 。C 类在私有地址空间为 192.168.x.0-255 的家庭环境中更为常见。就解释IP地址而言，任何地址都是 1 个地址。子网掩码告诉您它是广播地址（最高地址）还是前缀（最低地址）或地址空间中的有效地址。它还告诉路由器是否应该路由数据包。

# javascript - 为什么这个新日期在 javascript 中不起作用？

> ID：15370507
> 
> 赞同：1
> 
> 时间：2013-03-12T19:34:02.103
> 
> 标签：javascript, jquery

我正在尝试显示格式为“MMM.dd HH:mm:ss.nnn”的日期。它在 IE 中错误地呈现它，我已经花了很长时间，但我无法弄清楚为什么我不能让它工作。

我知道 Date.UTC 返回自 1970 年 1 月 1 日以来 Date 对象中的毫秒数。所以，

```
var newDate = new Date(Date.UTC(year, month[, date[, hrs[, min[, sec[, ms]]]]])
newDate.toString("MMM. dd HH:mm:ss.")+row.timestamp.getMilliseconds(); 
```

将工作。

例子：

```
var newDate = new Date(Date.UTC(1950, 10, 10, 10, 09, 09, 100));
row.timestamp_f = newDate.toString("MMM. dd HH:mm:ss."); // Output => Nov. 10 05:09:09. 
```

但是，我从 jquey.each 函数中对此进行了交互，因此我正在使用的日期字符串是 ISO 8601：“2013-03-12T15:14:10.483”。所以，这就是我的想法。

```
var numMilisecond = Date.parse(row.timestamp);
var newDate = new Date(numMilisecond);
row.timestamp_f = newDate.toString("MMM. dd HH:mm:ss."); // Output => Dec. 31 19:00:00. 
```

row.timestamp 来自 JSON 响应

```
{"timestamp":"2013-03-12T15:14:10.483" ...} 
```

为什么代码不起作用？Date.parse 应该返回自 1970 年 1 月 1 日以来的毫秒数，然后我创建一个新的 Date obj，然后将其转换为字符串，就像第一个片段中的代码一样。我究竟做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T19:54:05.290

[`Date.toString`不应该接受任何论据](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/toString)。如果您想要一个真正的日期格式解决方案，您需要使用[插件](http://momentjs.com/)或自行开发。

```
var shortmonths = ['Jan','Feb','Mar','Apr',]; // remaining months are left as an exercise for the reader
row.timestamp_f = shortmonths[newDate.getMonth()]
                  + ". "+newDate.getDate() + " "
                  + newDate.toLocaleTimeString() + "."; 
```

# php - Doctrine 的查询构建器的目的是什么？

> ID：15370516
> 
> 赞同：4
> 
> 时间：2013-03-12T19:34:43.200
> 
> 标签：php, orm, doctrine, query-builder

我想知道使用学说构建查询的优点到底是什么，例如：

```
<?php
// $qb instanceof QueryBuilder

$qb->select('u')
   ->from('User u')
   ->where('u.id = :identifier')
   ->orderBy('u.name ASC');
   ->setParameter('identifier', 100); // Sets :identifier to 100, and thus we will fetch a user with u.id = 100 
```

我在这里看到的唯一优势是数据清理和参数绑定，这可以使用 PDO 轻松完成。

还有另一个例子：

```
<?php
// $qb instanceof QueryBuilder

// example8: QueryBuilder port of: "SELECT u FROM User u WHERE u.id = ? OR u.nickname LIKE ? ORDER BY u.surname DESC" using Expr class
$qb->add('select', new Expr\Select(array('u')))
   ->add('from', new Expr\From('User', 'u'))
   ->add('where', $qb->expr()->orX(
       $qb->expr()->eq('u.id', '?1'),
       $qb->expr()->like('u.nickname', '?2')
   ))
   ->add('orderBy', new Expr\OrderBy('u.name', 'ASC')); 
```

额外的依赖是性能成本真的值得吗？上面的语法对我来说似乎比包含查询的简单字符串更复杂。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T10:23:03.620

这种方式更具结构性。它还从 PHP 代码中删除了 DQL（或 SQL）代码，这样看起来更好。

# python - 手动安装 python 模块的问题 - 命令行和解释器

> ID：15370520
> 
> 赞同：0
> 
> 时间：2013-03-12T19:34:49.127
> 
> 标签：python, windows, installation

刚回到 python，我遇到了在 XP 机器上安装基本 python 模块的问题。我决心不采取“简单安装”的方法。

*   a) 我在 XP 机器上没有 python。
*   [b) 我从http://www.python.org./download/](http://www.python.org./download/)下载了“Python 2.7.3 Windows Installer” 。安装没有问题（安装在 C:/Python27 中）
*   c）我下载了 xlwt 0.7.4 [https://pypi.python.org/pypi/xlwt](https://pypi.python.org/pypi/xlwt)，这就是我遇到问题的地方。xlwt 的自述文件指出：“任何操作系统：将 .zip 文件解压缩到合适的目录，chdir 到该目录，然后执行“python setup.py install”。”

使用正确目录中的文件，按照说明操作似乎不起作用，因为我的命令提示符不将“python”识别为术语。（这是正常的，还是我应该手动更改我的环境变量？？）

看到这不起作用，我在[这个网站](http://docs.python.org/2/install/index.html)上阅读了一些信息，并决定从命令提示符输入 python 解释器并输入“setup.py install”。这也不起作用，口译员说：

```
File "<stdin>", line 1
  setup.py install
                 ^ 
```

我不确定为什么它无法识别 setup.py，因为我在正确的目录中：

```
path = os.getcwd()
print =os.listdir(path) 
```

打印：

```
['HISTORY.html', 'licences.py', 'PKG-INFO', 'README.html', 'setup.py', 'tests',
'xlwt'] 
```

我在这里遗漏了什么，还是假设我还做其他事情的自述说明？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T19:39:18.587

```
python setup.py install 
```

旨在在命令提示符下输入，而不是在 Python 解释器中输入。

看起来您的 PATH 环境变量设置不正确。将其更改为包含 python.exe 所在的目录，您应该能够运行 setup.py 脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T19:47:39.263

击中`Start -> Run...`、键入`cmd`和击中`Enter`。键入`cd \path\to\module\dir`。进入`c:python27\python setup.py install`setup.py 文件所在的目录，你应该很高兴。

# javascript - appendChild 不起作用。Javascript 新手

> ID：15370522
> 
> 赞同：2
> 
> 时间：2013-03-12T19:34:51.187
> 
> 标签：javascript, appendchild, textnode

我是 JavaScript 新手，目前有一个任务。一个问题要求我们将一个新的 textNode 附加到`<p>`标签上。但是我的 appendChild 不想工作。我所有的其他代码都可以正常工作，并且可以完成它应该做的事情。显然我做错了什么。

**编辑：** 在我的控制台中，我收到一个错误：未捕获的 TypeError：无法调用 null 的方法 'appendChild'

```
<head>
<style type="text/css">
#demo {
font-family: Verdana, Geneva, sans-serif;
font-size: 14px;
font-style: italic;
background-color: #996;
height: 25px;
width: 400px;
padding: 20px;
}
</style>
</head>

<body>

<p id = "demo">Existential div asks: &quot;Why I am I here?&quot;</p>

<script>

document.title="Tag, you're it!";

var parent=document.body;
var child=document.getElementById("demo");
parent.removeChild(child);

var para=document.createElement("p");
var node=document.createTextNode("The quick brown fox jumps over the lazy dog.");
para.appendChild(node);

var element=document.getElementById("demo");
element.appendChild(para);

with(para){
color: "#FFF";
fontFamily : "Arial";
backgroundColor: "#345";
fontSize: "30px";
textAlign: "center";
width: "600px";
height: "200px";
padding: "20px";
margin: "0px auto";
};

</script>
</body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T19:40:27.000

首先，您删除该元素，然后，您尝试在此之后添加一些内容。由于它已被删除，因此无法再在 DOM 中找到它。

```
var child=document.getElementById("demo");
parent.removeChild(child);

var element=document.getElementById("demo"); // returns nothing, since it was removed
element.appendChild(para); 
```

因此，如果您不想，就不要删除该元素。[JSFiddle 演示](http://jsfiddle.net/nSy5H/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T19:40:27.483

您正在删除此处的元素

```
var child=document.getElementById("demo");
parent.removeChild(child); 
```

然后尝试在这里使用它：

```
var element=document.getElementById("demo");
element.appendChild(para); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T19:43:11.360

你的逻辑是错误的。

您在这些行中删除名为 demo 的元素

```
var child=document.getElementById("demo");
parent.removeChild(child); 
```

然后，您尝试将子节点附加到您刚刚在此处删除的节点：

```
var element=document.getElementById("demo");
element.appendChild(para); 
```

您不能将元素附加到不再存在的元素。如果删除该`removeChild`行，则一切正常。

另外，您的 with 块是错误的，您需要将其更改为：

```
with(para.style){
    color = "#FFF";
    fontFamily = "Arial";
    backgroundColor = "#345";
    fontSize = "30px";
    textAlign = "center";
    width = "600px";
    height = "200px";
    padding = "20px";
    margin = "0px auto";
}; 
```

在那之后，一切都应该很好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T19:44:46.790

您正在删除演示，然后尝试稍后引用它。即使在销毁 p#demo 之后，请参阅此 jsFiddle 以获得一种更简洁的方式来执行您似乎正在尝试的操作。

[http://jsfiddle.net/FzBrS/](http://jsfiddle.net/FzBrS/)

```
document.title="Tag, you're it!";

var demo = document.getElementById("demo");
demo.parentNode.removeChild(demo);
var p = document.createElement("p");

document.body.appendChild(p);

var tn = document.createTextNode("The quick brown fox jumps over the lazy dog.");
p.appendChild(tn); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-12T19:54:16.350

您正在删除`<p id="demo">`（由变量 child 持有），然后您尝试向该元素添加子元素（已被删除）

您可以不删除此元素，也可以将`para`元素添加到`parent`

1.  删除这一行：`var element=document.getElementById("demo");`
2.  替换`element.appendChild(para);`为`parent.appendChild(para);`

一切都会正常工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-12T19:37:57.167

您的`with`块包含语法错误，这导致脚本根本无法运行。

将该块更改为：

```
with(para.style) {
    color = "#fff";
    fontFamily = "Arial";
    // and so on
} 
```

# javascript - 最快的手指优先应用程序架构 - Redis？

> ID：15370526
> 
> 赞同：0
> 
> 时间：2013-03-12T19:35:09.877
> 
> 标签：javascript, node.js, redis, database-performance, node-redis

我正在使用智能手机作为蜂鸣器编写“最快的手指优先”Node.JS 应用程序。我打算使用 Socket.IO 来处理进入应用程序的答案，但不知道在回合结束时存储数据以进行比较的最佳方式是什么。

我最初的想法是将每个传入套接字事件的答案数据插入到 Redis 中，因为它是基于 RAM 的，我的假设是它会很快。但是，将每个答案依次推送到数组中会更好吗？这会在传入的套接字事件期间持续存在吗？

希望听起来简洁！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T19:44:51.907

你说得对，数组会更快。这取决于您计划支持多少用户以及您计划如何扩展。如果您正在尝试提供任何人都可以创建“游戏”的“服务”，并且您计划在您的平台上支持数十万个“游戏”，请使用 Redis，因为您可能需要扩展您的 Web 层并关注一个 Web 服务器不会显示在另一个 Web 服务器上。

但是，如果您这样做是一次性的，一次支持一个游戏，甚至可能来自通过 wifi 连接到您的笔记本电脑的朋友（尽管 Internet 上的小型 Heroku 服务器也可以正常工作），那么我d 带一个数组。与外部数据库（甚至像 Redis 一样快的数据库）通信会增加复杂性。Node.js 是事件和单线程的，这意味着您不必担心竞争条件。你可以写

```
var firstPresser;
socket.on('press', function (presser) {
    if (!firstPresser) {
        firstPresser = presser;
        // return "You pressed first"
    } else {
        // return "You didn't press first"
    }
}); 
```

请原谅我的伪代码，我对 socket.io 并不特别熟悉，但我想你明白了。

# c# - 带有实时事件处理程序的未引用对象的垃圾收集

> ID：15370527
> 
> 赞同：2
> 
> 时间：2013-03-12T19:35:12.863
> 
> 标签：c#, .net

在以下程序中...

```
using System;

class Program
{
    static Parent parent;

    static void Main( string[] args )
    {
        parent = new Parent();
        // The program hereafter runs for a long time and occasionally
        // causes parent.SomeEvent to be raised.
    }
}

class Parent
{
    public event EventHandler SomeEvent;

    public Parent()
    {
        new Handler( this );
    }
}

class Handler
{
    public Handler( Parent parent )
    {
        parent.SomeEvent += parent_SomeEvent;
    }

    void parent_SomeEvent( object sender, EventArgs e )
    {
        // Does something important here.
    }
} 
```

请注意，实例化的`Handler`对象没有被引用，尽管它已经订阅了`SomeEvent`. 是否有可能，在程序运行一段时间后，垃圾收集器可能会决定消除该`Handler`实例，`parent_SomeEvent`因此无论何时引发其处理程序都将不再被调用`parent.SomeEvent`？

我需要对我正在编写的应用程序进行澄清。`Handler`如上所示，有许多类似的对象被实例化，而没有被引用。的中心目的`Handler`是订阅`SomeEvent`. 没有有用的方法来调用对`Handler`实例的引用，所以我可以不引用它。我在调试时没有遇到任何问题。但是现在我担心当应用程序长时间运行并且垃圾收集器更加活跃时，部署后可能会出现问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T19:38:27.363

`Handler`在删除对该对象的所有引用之前，不会对您的类的实例化对象进行垃圾收集。

因此，在您取消订阅所有事件处理程序之前，该对象将存在。因为订阅的事件处理程序也是连接`Parent`实例和`Handler`实例的另一个“引用”。

> 是否有可能，在程序运行一段时间后，垃圾收集器可能会决定消除 Handler 实例，因此每当引发 parent.SomeEvent 时将不再调用其 parent_SomeEvent 处理程序？

这正是 GC 只从堆中收集“未引用”对象的原因。您的场景将导致 undefined `NullReferenceException`s，完全取决于 GC 何时决定删除对象。幸运的是，情况并非如此:)。

此外，GC 足够智能，可以确定未引用对象（未引用岛）的隔离池。因此，在这种情况下，您的父对象也未被引用，GC 将确定整个对象链（`Parent`对象、`event`订阅和`handler`对象）未被引用，并将在下一个收集周期将它们全部收集起来。

如果可以，我会推荐[这篇 MSDN](http://msdn.microsoft.com/en-us/library/ms973837.aspx)文章。让您对 .NET 中垃圾收集的广泛概念有一个很好的概述。在编码时牢记非常有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T19:40:02.033

**Program**一直存在，它引用 Parent 的一个实例**，**因此**Parent**永远不会被垃圾收集（直到程序结束）。

**Parent**通过其事件处理程序**SomeEvent**保留一组委托，因此其中的任何委托都不会被垃圾收集。

所以简而言之，不，它不会被垃圾收集。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T19:40:02.943

当您运行程序时，`Parent`该类包含对`EventHandler`您在`Handler`构造函数中创建的委托实例的引用，而委托实例包含对该`Handler`实例的引用。所以`Handler`只要有对实例的引用，实例就不会被垃圾回收`Parent`。

# masm - masm 中的 If 语句：控制流指令中的语法错误

> ID：15370531
> 
> 赞同：0
> 
> 时间：2013-03-12T19:35:25.883
> 
> 标签：masm

我正在尝试`if`在 MASM 中使用宏，但我不断从 MASM 汇编程序中收到以下错误消息：`Syntax error in control flow directive.`我仍然不确定这里的语法错误是什么：MASM 中 if 语句的正确语法是什么？

```
.686p
.model flat,stdcall
.stack 2048

.data
X   byte         1;

ExitProcess proto, exitcode:dword 

.code
start:

.IF(x > 1): ; "syntax error in control-flow directive"
    mov ah, x;
.ENDIF

invoke  ExitProcess, 0
end start 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:00:05.277

) 后去掉冒号“:”。此外，您将 X 定义为大写字母，但使用小写 x，这是无效的。汇编是区分大小写的。

# java - LazyDataModel 调用了两次

> ID：15370536
> 
> 赞同：1
> 
> 时间：2013-03-12T19:35:55.563
> 
> 标签：java, jsf, primefaces

我正在使用 primefaces 中的数据表来显示记录列表。但是它在导航到页面时调用了两次加载内部方法（覆盖）。此行为会影响性能。

部分服务器端代码：

```
public void getInternalList() {    
    try {

        dataList = service.getInternalDetails(userId, 0, 5);

        if (null != dataList) {

            // Getting the current page data using lazy loading
            lazyModelEmployees = new LazyDataModel<Employee>() {
                @Override
                public List<Employee> load(int first, int pageSize, String arg2, SortOrder arg3, Map<String, String> arg4) {
                    List<Employee> currentPageEmployeeList = null;

                    try {
                        currentPageEmployeeList = service.getInternalDetails(userId, first, pageSize);
                    } catch (Exception e) {
                        exceptionHandler(e);
                    }

                    if (arg2 != null) {
                        Collections.sort(currentPageEmployeeList, new LazySorter(arg2, arg3));
                    }
                    int dataSize = currentPageEmployeeList.size();
                    this.setRowCount(dataSize);

                    if (dataSize > pageSize) {
                        try {
                            return currentPageEmployeeList.subList(first, first + pageSize);
                        } catch (IndexOutOfBoundsException e) {
                            return currentPageEmployeeList.subList(first, first + (dataSize % pageSize));
                        }
                    } else {
                        return currentPageEmployeeList;
                    }

                }
            };
            lazyModelEmployees.setRowCount(dataList.size());
            lazyModelEmployees.setPageSize(5);
        }
    } catch (Exception e1) {
        e1.printStackTrace();
    }
} 
```

# c++ - CUDA 运行时错误：未指定的启动失败和超出范围的共享或本地地址

> ID：15370537
> 
> 赞同：0
> 
> 时间：2013-03-12T19:35:56.803
> 
> 标签：c++, cuda

我在一个具有 1GB 全局内存的 GPU 上运行这个程序。它给出了以下错误：

```
Fatal error: cudaMemcpy1 error (unspecified launch failure at CheckDevice.cu:27)
*** FAILED - ABORTING
========= Out-of-range Shared or Local Address
=========     at 0x000006a8 in grid::SetSubgridMarker(grid*, grid*)
=========     by thread (0,0,0) in block (0,0,0)
=========     Device Frame:SetAllFlags_dev(param_t*, grid*) (SetAllFlags_dev(param_t*, grid*) : 0x108)
=========     Device Frame:SetAllFlags(param_t*, grid*) (SetAllFlags(param_t*, grid*) : 0x38)
=========     Saved host backtrace up to driver entry point at kernel launch time
=========     Host Frame:/usr/lib/libcuda.so (cuLaunchKernel + 0x3dc) [0xc9edc]
=========     Host Frame:/usr/local/cuda/lib64/libcudart.so.5.0 [0xa18a]
=========     Host Frame:/usr/local/cuda/lib64/libcudart.so.5.0 (cudaLaunch + 0x17f) [0x2f4cf]
=========     Host Frame:Transport [0xd395]
=========     Host Frame:Transport [0xd7bd]
=========     Host Frame:/lib/x86_64-linux-gnu/libc.so.6 (__libc_start_main + 0xed) [0x2176d]
=========     Host Frame:Transport [0x17bd]
=========
========= Program hit error 4 on CUDA API call to cudaMemcpy 
=========     Saved host backtrace up to driver entry point at error
=========     Host Frame:/usr/lib/libcuda.so [0x26a180]
=========     Host Frame:/usr/local/cuda/lib64/libcudart.so.5.0 (cudaMemcpy + 0x271) [0x348e1]
=========     Host Frame:Transport [0x2cea]
=========     Host Frame:Transport [0x3769]
=========     Host Frame:Transport [0xd7ee]
=========     Host Frame:/lib/x86_64-linux-gnu/libc.so.6 (__libc_start_main + 0xed) [0x2176d]
=========     Host Frame:Transport [0x17bd]
=========
========= Program hit error 4 on CUDA API call to cudaGetLastError 
=========     Saved host backtrace up to driver entry point at error
=========     Host Frame:/usr/lib/libcuda.so [0x26a180]
=========     Host Frame:/usr/local/cuda/lib64/libcudart.so.5.0 (cudaGetLastError + 0x1e6) [0x2a046]
=========     Host Frame:Transport [0x2cef]
=========     Host Frame:Transport [0x3769]
=========     Host Frame:Transport [0xd7ee]
=========     Host Frame:/lib/x86_64-linux-gnu/libc.so.6 (__libc_start_main + 0xed) [0x2176d]
=========     Host Frame:Transport [0x17bd]
=========
========= ERROR SUMMARY: 3 errors 
```

对于未指定的启动失败错误，相关代码行是一个 cudaMemcpy 操作：

```
cudaMemcpy(CurrentGrid, Grid_dev, sizeof(grid), cudaMemcpyDeviceToHost);
cudaCheckErrors("cudaMemcpy1 error"); 
```

然后如错误消息所示，它说`Out-of-range Shared or Local Address at 0x000006a8 in grid::SetSubgridMarker(grid*, grid*)`。是因为设备上的全局内存用完了吗？有没有办法返回设备上的内存使用情况？

在源代码中， checkDevice.cu 在 grid::SetSubgridMarker 之后执行，并且 checkDevice 不会在设备上消耗太多内存空间，所以我猜测（但没有太多信心）它`grid::SetSubgridMarker`耗尽了内存，因此没有空间启动 cudaMemcpy手术。有什么建议么？非常感谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T20:06:22.493

未指定的启动失败不是由于 cudaMemcpy 操作。这是紧接在该操作之前的内核启动的“遗留”错误。

内核启动失败可能是因为您正在使用`cuda-memcheck`.

您应该检查您的内核代码`SetSubGridMarker`是否对共享或本地内存进行了无效访问。

这些都不意味着您正在用完设备上的全局内存。

如果我在 C 中有一个这样的数组：

```
int C[5]; 
```

然后我尝试访问这样的元素：

```
int temp = C[6]; 
```

那是越界访问。您正在访问超出定义的变量存储的末尾。这并不意味着您“内存不足”。

`SetSubGridMarker`您的代码中正在发生类似的事情。你需要找出那是什么并修复它。 `cuda-memcheck`通过告诉您块 (0,0,0) 中的线程 (0,0,0) 正在进行这种非法访问，还可以为您提供线索。通过仔细查看该线程如何索引存储在本地或共享内存中的数据，您应该能够发现错误。

[您还可以使用此处](https://stackoverflow.com/questions/27277365/unspecified-launch-failure-on-memcpy/27278218#27278218)描述的方法来`cuda-memcheck`识别生成故障的特定内核代码行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T20:06:12.947

这是一个超出*范围*的异常，而不是超出*内存*的异常。这意味着，您正在访问不属于任何有效（即静态或动态分配）内存范围的内存。最常见的原因是数组中的偏移量太大或为负数，或者指针未正确初始化。

正如消息所述，错误是在内部引起的`grid::SetSubgridMarker()`。但是由于内核调用是异步的，因此在下一次 CUDA 调用之前无法报告错误，这恰好是`cudaMemcpy()`.

# javascript - 使用外部 JavaScript 文件更改 div 上的显示

> ID：15370538
> 
> 赞同：1
> 
> 时间：2013-03-12T19:35:58.683
> 
> 标签：javascript, css, html

我目前正在这样做：

```
<div id="textChange" style="display:none;">Blah blah</div>
<script type="text/javascript">
var d = new Date();
var funnyDate = (d.getFullYear() + "" + (d.getMonth()+11) + "" + (d.getDate()+10));
if((funnyDate>=20131916) && (funnyDate<=20131923))
{
document.getElementById("textChange").style.display ="block";
}
</script> 
```

并想将脚本移动到外部 JS 文件。我怎么做？我似乎没有为我工作。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T19:38:57.407

在您的 div 之后包含此脚本`#textChange`，它将起作用。例如在结束`</body>`标签之前：

```
...
<script src="funny-script.js" type="text/javascript"></script>
</body> 
```

这是最简单的方法。您也可以在`DOMContentLoaded`或`window.onload`事件上运行此代码，但看看您的脚本在做什么，我认为它没有意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T19:41:02.333

**1-打开记事本或记事本++或任何你用作文本编辑器的东西。**

**2-将 javascript 代码复制到没有和标签的文本编辑器**

```
var d = new Date();
 var funnyDate = (d.getFullYear() + "" + (d.getMonth()+11) + "" + (d.getDate()+10));
  if((funnyDate>=20131916) && (funnyDate<=20131923))
{
document.getElementById("textChange").style.display ="block";
  } 
```

**3-使用您想要的任何名称保存文件，并且不要忘记将 .js 扩展名添加到文件中，例如将文件保存为“test.js”**

**4-将“test.js”复制到与html页面相同的目录。**

**5-将此行添加到html页面**

```
<script type="text/javascript" language="javascript" src="test.js"></script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T19:42:31.727

一种方法是创建一个函数并将其包含在 js 文件中

```
function style_changer(){

var d = new Date();
var funnyDate = (d.getFullYear() + "" + (d.getMonth()+11) + "" + (d.getDate()+10));
if((funnyDate>=20131916) && (funnyDate<=20131923))
  {
    document.getElementById("textChange").style.display ="block";
  }
} 
```

现在在您的 html 中引用包含此函数的 js 文件，例如

```
<script type="text/javascript" src="yourscriptfilename.js" /> 
```

您可以将其包含在您的部分中，并且应该可以使用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T19:46:20.307

将脚本标签之间的所有内容放入另一个文件中。`.js`您应该使用文件扩展名保存此文件。假设您将其另存为`textChange.js`.

现在最简单的做法是在`<div>`标签之后包含脚本文件——所以基本上`<script>`标签和代码之前的位置，写：

```
<script type="text/javascript" src="textChange.js"></script> 
```

这假定“textChange.js”与您的 HTML 文件位于同一文件夹中。

...

但是，这太容易了！通常最好的做法是在HTML 文件中放置`<script>`标签。`<head>`您可以将上面的行向上移动到头部，但是脚本将在您执行之前加载`<div>`- 它会尝试执行它所做的事情并且它会失败，因为它找不到 div。因此，您需要在脚本文件中的代码周围放置一些内容，以便它仅在文档准备好时执行。

最简单的方法（可能有更好的方法）是编写以下内容......

```
window.onload = function () {
    var d = new Date();
    var funnyDate = (d.getFullYear() + "" + (d.getMonth()+11) + "" + (d.getDate()+10));
    if ((funnyDate>=20131916) && (funnyDate<=20131923))
        {
            document.getElementById("textChange").style.display ="block";
        }
} 
```

这将意味着您的脚本位于它应该在的头部，并且它仅在您的整个页面准备好时执行，包括您想要操作的 div。

希望这可以帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T19:40:06.483

保存用内容调用的文件`script.js`。

```
var d = new Date();
var funnyDate = (d.getFullYear() + "" + (d.getMonth()+11) + "" + (d.getDate()+10));
if((funnyDate>=20131916) && (funnyDate<=20131923))
{
    document.getElementById("textChange").style.display ="block";
} 
```

并将此标记放在您的 HTML 文档中。将它放在 之前，`</body>`这样您就会知道`textChange`在加载和执行脚本之前该元素将存在于 DOM 中。

```
<script type="text/javascript" src="script.js" /> 
```

*确保它`script.js`与您的 HTML 文档位于同一目录中。*

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-12T19:40:17.320

把下面的代码放在一个函数中

步骤1：

```
function onLoadCall()
var d = new Date();
var funnyDate = (d.getFullYear() + "" + (d.getMonth()+11) + "" + (d.getDate()+10));
if((funnyDate>=20131916) && (funnyDate<=20131923))
{
document.getElementById("textChange").style.display ="block";
}
} 
```

第2步：-

在页面加载时调用该函数

```
<body onload='onLoadCall()'>
...
</body> 
```

step3:- 现在将脚本移动到另一个文件，它将起作用

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-12T19:41:37.383

将脚本放在一个单独的文件中，并将其命名为 yourScript.js，最后将其包含在您的文件中

在脚本文件中添加代码

```
function changeFunnyDate(){
    var d = new Date();
     var funnyDate = (d.getFullYear() + "" + (d.getMonth()+11) + "" + (d.getDate()+10));
      if((funnyDate>=20131916) && (funnyDate<=20131923))
    {
    document.getElementById("textChange").style.display ="block";
      }
} 
```

最后在你的文件中添加脚本并调用方法

```
<script src="yourScript.js" type="text/javascript"></script> 
```

# matlab - 图像显示不正确

> ID：15370542
> 
> 赞同：2
> 
> 时间：2013-03-12T19:36:14.460
> 
> 标签：matlab, image-processing, color-mapping

我正在使用 MATLAB R2012b。我试图让 7 个图像显示在一个图形上，但我可以让 MATLAB 显示的图像看起来与原始文件完全一样。我将颜色图设置为灰色，希望你让它看起来一样，但没有它仍然不同。我已经包含了原始文件和我从 MATLAB 获得的内容，因此您可以看到正在发生的事情。

这是我的代码：

```
w8 = imread('Winter8','jpg');
subplot(2,4,1), image(w8);
title('Winter8.jpg');
axis('off','image');
colormap('gray');
truesize; 
```

以下是图片：

原件：

![Winter8Small.jpg 原创](../Images/f3697aa037f74eebbf1202e7bf133f49.png)

来自 MATLAB 的结果：

![Winter8Small.jpg 来自 MATLAB 的结果](../Images/10ba7e630a5bfd3950b61c1192307f50.png)

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T19:51:33.327

imagesc 似乎比 image 更好用

> 图像（w8）；
> 
> 颜色图（“灰色”）；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T20:16:11.253

`imagesc`在您的情况下制作更好看的图像，因为您似乎对使用灰色地图作为过滤器感兴趣。您可以使用 指定范围`clims`，但您没有使用 那么多的控制权`image`。

如果你按照`colorbar`你的身材跑，你就会明白我在说什么。

`image`在您希望更好地控制数据的情况下使用会更好。例如，如果您想以真彩色而不是颜色图绘制数据，与`image`函数相比，将其与函数一起破解会更容易，`imagesc`因为您不必担心`clims`使用真彩色图像进行缩放。

# stress - 经过一天的编码后感到焦虑和压力

> ID：15370543
> 
> 赞同：-1
> 
> 时间：2013-03-12T19:36:17.470
> 
> 标签：stress

我想知道是否有人在编码一天后感到焦虑；被你所从事的项目的艰巨感所拖累？此外，有关处理此问题的任何建议。

即使日子过得很好，有时它也会发生在我身上；完成了很多工作，没有真正的重大错误或障碍需要克服。

谢谢 x

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T19:49:15.097

我想说只对分配给你的部分承担情感责任，在一天开始时设定现实的期望，如果你达到了这些期望，在一天结束时庆祝成功。如果工作组织得很好，那么在项目结束时一切都应该到位。如果工作组织得不好，那么..好好负责或找到组织得更好的项目。

就我个人而言，我真的很嫉妒你能够花一整天的时间编码，这很少发生在我身上。

# javascript - 在 OnClick 中使用“if/else”

> ID：15370544
> 
> 赞同：5
> 
> 时间：2013-03-12T19:36:18.313
> 
> 标签：javascript, button, onclick, if-statement

首先，是否可以直接在带有 onclick 属性的 html 中编写 if/else 语句？如果是这样，为什么我的代码不起作用？

所以这是一个按钮。“Calc.Input.value”指的是文本输入，如果该字段为 0 或空白，我想显示错误消息。如您所见，在所有其他情况下，我希望发生其他一些事情。但这无关紧要，因为“其他”之后的所有内容之前都运行良好。

```
<INPUT TYPE="button" NAME="drop" id="dropbutton" style="background-color:#D1E8D5;" VALUE="
Släpp ankare " OnClick="if ("Calc.Input.value == ''" || "Calc.Input.value == '0'")
{window.alert("Please enter a number");} else 
{document.getElementById('dropbutton').value=' Justera 
längd ';document.getElementById('length').innerHTML =
Calc.Input.value;document.getElementById('dropbutton').style.cssText = 'background-
color:#FFF6B3;';}"> 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-12T19:39:56.807

只是不要把它放在 onclick 属性中。

利用

```
<INPUT TYPE="button" NAME="drop" id="dropbutton" style="background-color:#D1E8D5;" VALUE="Släpp ankare ">
<script>
document.getElementById('dropbutton').onclick = function() {
    if (Calc.Input.value == '' || Calc.Input.value == '0') {
         window.alert("Please enter a number");
    } else {
        document.getElementById('dropbutton').value=' Justera längd ';
        document.getElementById('length').innerHTML = Calc.Input.value;
        document.getElementById('dropbutton').style.backgroundColor = '#FFF6B3';
    }
    return false;
}
</script> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-12T19:40:05.720

您的代码不起作用的原因是您需要转义`"`引号，否则它将被解释为 HTML 属性符号。

我同意其他人的观点，在 HTML 中内联编写 JavaScript 是一种不好的做法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-01T03:56:07.307

sweetamylase 的回复是最好的，但您也可以考虑：

如果您的**onclick=**赋值包含在双引号中*（onclick="..."）*，那么请尝试在这些双引号内仅使用单引号字符（反之亦然）。

当您需要在动态插入元素时对 onclick 事件进行分配并且拥有单独的脚本函数并不是一个好的选择时，这可以使事情变得更容易。

例子：

```
<button onclick="alert('Do this'+' and that')">Press This</button> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-08-19T21:14:11.160

嗯，但是对于这样的事情怎么样：

```
<a href="#" onclick="if (a_function_to_get_language() == 'en') {
    alert('Some message');
}
else {
    alert('Some message in a different language');
}">Action</a> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-11T12:19:14.457

*   导航页面上的警报

```
 <script>
              function myFunction() {
            alert("You Are Not Signed In!");
                   }
                 </script> 
```

# ios - 如何将 UIGestureRecognizer 限制为特定的 UIView？

> ID：15370545
> 
> 赞同：0
> 
> 时间：2013-03-12T19:36:20.880
> 
> 标签：ios, objective-c, uikit, uigesturerecognizer

我有一组像这样分层的 UIView：

*   界面窗口
*   UIViewController
*   UIView（覆盖整个窗口；标签：41）
*   UIView (tag: 100 (覆盖UIView的上半部分 (tag:41))
*   UIScrollView（下半部分；标签：126）
*   UIView（涵盖 UIScrollView；标签：21）
*   UIView (tag:22) <----- 覆盖了 tag-21 UIView 的一部分

顶部的 UIView (tag:22) 是唯一一个我希望点击被识别的 UIView。使用 NSLog，标签总是引用标签：41。

这是我在 ViewController 中的代码（**-viewDidLoad**方法）：

```
 // Create and initialize a tap gesture  
 UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(singleTap:)];
 tap.numberOfTapsRequired = 1;
 tap.numberOfTouchesRequired = 1;
 [self.view addGestureRecognizer:tap]; 
```

这是处理水龙头的代码（也放在VC中）

```
- (void)singleTap:(UIGestureRecognizer*)gestureRecognizer {

CGPoint pt = [gestureRecognizer locationInView:self.view];

UIView *v = [self.view hitTest:pt withEvent:nil];
NSLog(@"\n\nx: %ld\ny: %ld\ntag: %d",(long)pt.x, (long)pt.y, self.view.tag);

if ([v isKindOfClass:[SubViewData class]]) {
    NSLog(@"SubViewData!");
    return;
} 
```

}

阅读事件处理指南（第 32 页），我发现第一个视图位于点击区域的约束范围内，是获得命中测试的视图，在本例中为 tag:41。我需要 tag:22 来进行命中测试，因为还有另一个 UIView (tag:100) 位于 tag:41 的上半部分，它也可以识别水龙头......

**更新：** 我添加了处理水龙头的代码......有没有一种方法可以以编程方式拒绝水龙头，除非它用于 UIVIew 标签：22？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T19:51:49.460

尝试将其附加到整个视图，实现委托方法

```
- (BOOL)gestureRecognizerShouldBegin:(UIGestureRecognizer *)sender {
   return (CGRectContainsPoint(self.myTargetView.frame, [sender locationInView:self.view]);
} 
```

如果您有多个`UIGestureRecognizers`并且为每个委托，请使用：

```
- (BOOL)gestureRecognizerShouldBegin:(UIGestureRecognizer *)sender {
    if (self.neededGestureRecognizer == sender) {
       return (CGRectContainsPoint(self.myTargetView.frame, [sender locationInView:self.view]);
    }
    return YES;
} 
```

匹配他们

# graph - 我可以使用 Cypher 来保证树结构的 MRCA 吗？

> ID：15370547
> 
> 赞同：3
> 
> 时间：2013-03-12T19:36:30.260
> 
> 标签：graph, nosql, neo4j, cypher

您好，我一直在使用 neo4j 和树数据，到目前为止效果很好。但是，我似乎找不到太多关于模式匹配通常如何工作的文档，所以我可以验证我正在做的查询是否会有预测的结果。

我有一棵树，节点为 1、2、3、4，其中 2 是 1 的子节点，3 + 4 都是 2 的子节点。从 1 到 2、2 到 3 和 2 到 4 有有向边。如果我执行以下 Cypher 查询，我是否总是得到返回节点 x 的最新共同祖先？

开始 a = 节点（3），b = 节点（4）

匹配 x-[ * ]->a, x-[ * ]->b

返回 x;

此查询为 x 返回节点 2，但我如何保证它永远不会返回 1？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T06:27:41.830

您可以执行以下操作：

```
start a=node(3), b=node(4)
match pa=x-[*]->a, pb=x-[*]->b
return x
order by length(pa) + length(pb)
limit 1 
```

[http://console.neo4j.org/r/ntvwuz](http://console.neo4j.org/r/ntvwuz)

# java - Java：Lists 的内存泄漏异常

> ID：15370549
> 
> 赞同：1
> 
> 时间：2013-03-12T19:36:38.257
> 
> 标签：java, list, loops, memory-leaks

我正在用 Java 及其允许内存泄漏的能力做一个小实验。我写了这个简单的代码：

```
import java.util.ArrayList;
import java.util.List;

public class Test {

public static void main(String[] args) {

    class Obj {
        int i;

        Obj(int i) {
            this.i = i;
        }
    }

    List<Obj> list;
    while(true) {
        list = new ArrayList<Obj>();
        for(int i = 0; i < 1000; i++) {
            Obj o = new Obj(i);
            list.add(o);
        }

        try {
            Thread.sleep(1); //<-- added to give the gc time to trash the previous iteration
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }
}
} 
```

执行此操作时（尤其是每次迭代都会将更多对象添加到列表中），您可以看到使用的内存量迅速增加。在每次迭代中添加 10000 个对象时，我能够非常快速地达到 2 GB。看起来好像列表（以及使用“链表”类似函数的其他类型的对象）不喜欢被删除。

当我没有将对象添加到列表中时，内存堆根本没有增加（这意味着垃圾处理正在完成它的工作）。我尝试将列表重置为 null 每次迭代然后重新声明它以及调用 clear() 方法。似乎没有任何效果。每当我在循环中使用 List 时，我的 RAM 都会呼救。

那么，为什么会出现这种情况？为什么垃圾处理不会在每次迭代时都摆脱列表而不是让它们堆积起来？List 接口不允许这种用法吗？我只是没有给垃圾处理足够的时间来摆脱最后一个实例吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T19:51:15.587

你的代码很好。除非您在 JVM 中遇到了一些晦涩且罕见的错误，否则也不会出现内存泄漏。可能发生的情况是您为 JVM 提供了大量内存来使用，并且决定使用该内存。

对您的代码进行了试验后，我可以重现您所看到的唯一方法是配置一个非常大的年轻代堆 ( `-Xmn`)。JVM 不需要在年轻代满之前运行垃圾收集器，因此该进程最终会使用相当多的内存。

但是，当年轻代堆满时，GC 会运行并收集所有无法访问的对象。

在以下屏幕截图中，右上角的图表显示了堆大小：

![视觉虚拟机](../Images/06ca41fcec60b8158c7a11a183b68674.png)

如您所见，在 19:47:50 之前出现了急剧下降。这是年轻代填满的时候，也是 GC 运行并收集所有旧列表的时候。

请注意，如果您使用操作系统工具来监控内存使用情况，那么在运行垃圾收集器时您可能不会看到下降。当一些堆对象被释放时，它们过去占用的内存通常不会被释放回操作系统。但是，它可以被同一进程重用。

如果内存使用是一个问题，您需要重新访问您提供给 JVM 的选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T19:59:12.577

您的代码中没有内存泄漏。你可以 100% 确定这一点。但是，这并不意味着即使所有当前活动的对象都小于堆，您也不会耗尽内存。

您无法使用像您这样的代码测试垃圾收集。GC 不会每次都被调用，也不会一次清理所有内容。如果您有大量数据快速刷新，您的 GC 将没有时间启动，并且您的代码可能内存不足。

同样重要的是要了解内存泄漏是使用分析工具测试的，而不是通过监视应用程序是否耗尽内存来测试的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T19:52:09.210

您需要在循环中的每次迭代之后设置`list`为。这样 GarbageCollector 知道它可以安全地清理。`null``while`

这也可以解决该行为。[http://docs.oracle.com/cd/E19159-01/819-3681/abebi/index.html](http://docs.oracle.com/cd/E19159-01/819-3681/abebi/index.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T19:57:16.250

（通常我只会评论并询问您设置的 VM 选项，但我没有足够的代表点来做到这一点）

我只是猜测，但也许您将 -Xms 设置为 1GB？此代码不会泄漏，但根据您的 VM 选项，该过程可能仍会占用大量内存。

# azure - 如何处理 SQL Azure 错误 10929？

> ID：15370550
> 
> 赞同：1
> 
> 时间：2013-03-12T19:36:39.980
> 
> 标签：azure, azure-sql-database

我在 SQL Azure 中使用了几个 web/worker 角色。[今天我开始收到这里](http://social.technet.microsoft.com/wiki/contents/articles/1541.windows-azure-sql-database-connection-management.aspx#Throttling_Limits)
描述的 SQL Azure 错误 10929 。

我得到的消息是我使用了最多 180 个连接中的 172 个，但服务器很忙，因此请求被拒绝。

任何关于如何解决这个问题的想法都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T20:05:33.557

您可以在这里做的事情的数量：

1) 发生错误时只需重试逻辑

2) 跨多个 SQL Azure 联合联合您的数据（这可能有帮助，也可能没有帮助，具体取决于您是在服务器级别还是在数据库级别受到限制）

3) 跨多个 SQL Azure 服务器分离数据

4）优化您的查询/索引，使它们运行得更快，完成得更快

5) 考虑使用 Azure 表存储而不是 SQL Azure

6) 考虑批处理数据库操作并通过辅助角色执行它们，并在 SQL Azure 开始节流时让辅助角色“减速”

和个人插件，使用[AzureWatch](http://www.paraleap.com)监控打开的连接和针对您的 SQL Azure 数据库执行的事务的数量。

# html - HTML / CSS：如何垂直对齐一个div内的图像相对于另一个

> ID：15370553
> 
> 赞同：0
> 
> 时间：2013-03-12T19:36:50.293
> 
> 标签：html, css

如何垂直对齐一个 div 内的图像相对于另一个图像大小是未知的；最大高度：150px；最大宽度：150px；

第一个 div 包含图像
第二个 div 包含文本

我想让两个浮动 div 具有相同的高度并在其中一个 div 内垂直对齐图像

没有桌子可以吗？

# javascript - 是否可以将大量数据写入 localStorage 或 DOM 而不会阻塞动画 gif 之类的东西？

> ID：15370566
> 
> 赞同：0
> 
> 时间：2013-03-12T19:37:38.120
> 
> 标签：javascript, performance

当我使用 PhoneGap 编写应用程序并下载相当大的数据块以存储以供离线使用（~4kb）时，我注意到如果有一个动画 gif 可见（例如 jQueryMobile 加载 gif），那么它会在数据时停止动画被写入LocalStorage。（也许这种情况更多的是关于写入 LocalStorage 的绝对数量，而不是关于记录的组合大小？）

将大块 HTML 添加到 DOM 也是如此。如果我渲染一个大约 100 的 HandlebarsJS 模板，`<li>`然后将其注入 DOM（这似乎是最佳实践），页面滚动和动画 gif 将停止运行，直到追加完成。

从用户的角度来看，应用程序似乎已经锁定了几秒钟（在某种意义上它已经......）并且有杀死它的诱惑；即使它仍在工作。

我能做些什么来防止这种行为吗？我什至愿意牺牲一点实际性能，因为它会提高感知性能......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T19:42:33.220

大块的。做一些测试，看看你可以在不影响“普通”电脑上的动画的情况下一次性写多少，并将你的写入限制在这个数量之内。只需多次附加或在 LocalStorage 的情况下写入连续键。

# android - 被替换的 ViewPager 和 BackStack 的生命周期？

> ID：15370573
> 
> 赞同：8
> 
> 时间：2013-03-12T19:38:03.693
> 
> 标签：android, android-fragments, android-viewpager, android-listfragment, android-nested-fragment

我真的搞砸了 android ViewPager 的生命周期，我开始认为我的应用程序结构有问题。因此，如果我可以执行以下操作，我想确认一下：

*   我有一个显示一些标签的应用程序。其中一个选项卡显示了一个 ViewPager，其中有两个 ListFragment。这些 ListFragment 是在 ViewPager 的 onCreate 事件中创建的。
*   当您单击其中一个 ListFragments 中的项目时，它会将整个 ViewPagerFragment 替换为不同的片段（这是另一个 ListFrament）。

这是我用新的 ListFragment 替换 ViewPager 的代码

```
FragmentManager fm = getFragmentManager();
android.support.v4.app.FragmentTransaction ft = fm.beginTransaction();

ft.replace(R.id.container, new RequestForm(requestsList.get(itemIndex)));
ft.addToBackStack(null);
ft.commit(); 
```

从那里开始，一切正常。但是，如果用户单击后退按钮，我会得到以下情况：

*   ViewPager 重新加载正常（来自 onCreateView），但里面的 ListFragment 不会显示。看起来我的 ListFragment 的对象还活着，但似乎他们失去了视图，并且没有调用 onCreateView 来重新创建它（因为在 ViewPager 出来时对象没有睡觉）。

我暂时不在这里发布更多代码，因为我的目的是了解我正在尝试做的事情是否可以以 Android 的思维方式进行。我是否必须与 Android SDK 对抗才能归档我想做的事情？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-13T13:40:28.577

好吧，如您所见，我不是 Android 用户（我对 iOS 上的 UI 了解更多）。这就是为什么我很困惑。

在查看了不同的应用程序后，我发现 Gmail 和 Google Play 确实有一些看起来有点像我的导航（用新片段替换 ViewPager，而不创建新活动）。

对于我的问题，这不是结构问题。创建 FragmentStatePagerAdapter 时，请务必使用 getChildFragmentManager() 而不是 getFragmentManager()！

```
ViewPagerAdapter adapter = new ViewPagerAdapter(getChildFragmentManager()); 
```

# android - 将数据从服务中的单独线程发送到服务类

> ID：15370576
> 
> 赞同：0
> 
> 时间：2013-03-12T19:38:19.260
> 
> 标签：android, multithreading, service

谁能给我推荐一个很好的教程，解释如何从服务类中的android单独线程类发送数据----->将数据发送到----->服务`oncreate()`方法。

线程可以是 timertask 或线程类或任何类型，但所有线程都在服务类中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T19:57:14.553

当你说的时候我不确定我是否理解

> 数据到-----> 服务 oncreate()

但是，您需要使用在服务的 onCreate 方法中创建的[处理程序](http://developer.android.com/reference/android/os/Handler.html)并将其传递给线程。[从线程向处理程序发布一个runnable](http://developer.android.com/reference/android/os/Handler.html#post%28java.lang.Runnable%29)将导致在ui 线程（即运行服务的线程）中执行runnable。

# php - PHP递归打印URL的每一部分

> ID：15370579
> 
> 赞同：1
> 
> 时间：2013-03-12T19:38:22.677
> 
> 标签：php, function, url, recursion, explode

我有一个关于在 PHP 中创建递归函数的问题。在将 URL 除以“/”之后，有什么更好的方法来打印 URL 的所有状态？

PS：基本情况将基于 URL，例如[http://www.domain.com](http://www.domain.com)

我需要的是：

例子：

```
$url = 'http://www.domain.com/1/2/3/4';

function strip_states($url){
  ?????
}

strip_states();

// Result
// print -> http://www.site.com.br/1/2/3
// print -> http://www.site.com.br/1/2
// print -> http://www.site.com.br/1
// print -> http://www.site.com.br 
```

我完全迷路了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T19:44:02.717

```
<?php

$url = 'http://www.domain.com/1/2/3/4';

$parts = explode('/', $url);

for ($i=count($parts); $i>=3; $i--) {
    echo implode('/', $parts) . PHP_EOL;
    array_pop($parts);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T19:54:51.453

```
<?php

$url = 'http://www.domain.com/1/2/3/4';

function strip_states($url)
{
    $url_parts = parse_url($url);
    $host = $url_parts['scheme'] . '://' . $url_parts['host'];

    if(false === isset($url_parts['path'])) {
        echo $host;
        return;
    }

    foreach(explode('/', $url_parts['path']) as $key => $part) 
    {
        if($key)
        {
             echo $host .= '/' . $part;
         echo "<br/>";
        }
    }
}

strip_states($url); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T20:02:32.540

抱歉，它不是递归的，但我希望它以某种方式对您有所帮助：

```
$url = 'http://www.domain.com/1/2/3/4';
strip_url($url);

function strip_url($url)
{
$largo = strlen($url);
$aux = ""; $cont = 0;
echo $url." len $largo"."</br>";

for ($i=0; $i<$largo; $i++)
{   
    if($url[$i]=="/"){$cont++;}  
    $aux = $aux.$url[$i];

    if($cont > 2 && $url[$i]=="/")
    echo $aux."</br>";    
}
echo $aux."</br>"; 

} 
```

来自智利的 Saludos ;)

# android - 多线微调器不起作用

> ID：15370582
> 
> 赞同：1
> 
> 时间：2013-03-12T19:38:27.917
> 
> 标签：android, spinner, multiline

我试图让我的多线微调器工作，以为我无法弄清楚为什么它不会！（它只显示单行 - 因此文本超出边缘）。我已阅读[此](https://stackoverflow.com/questions/6107500/how-to-wrap-lengthy-text-in-a-spinner)内容，但仍然无法正常工作。

这是我的 multi_line_spinner.xml 文件；

```
<CheckedTextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/text1"
    style="?android:attr/spinnerDropDownItemStyle"
    android:singleLine="false"
    android:layout_width="match_parent"
    android:layout_height="?android:attr/listPreferredItemHeight" /> 
```

还有我的活动（部分）xml文件；

```
 <Spinner
        android:id="@+id/schoolSpinner"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:ems="10" /> 
```

这是我以编程方式设置 Spinner 的地方

更新：我从连接到远程服务器的 AsyncTask 获取数据。（数据检索成功）。

```
ArrayList<String> schoolName = new ArrayList<String>();
    getTTData task = new getTTData();
            task.execute("1");
        try {
            dataSchool = task.get();
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (ExecutionException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        int x = 0;
        while(x<dataSchool.size()-1)
        {
            schoolName.add(dataSchool.get(x));
            x++;
            schoolID.add(dataSchool.get(x));
            x++;
        }

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_dropdown_item, schoolName);
    adapter.setDropDownViewResource(R.layout.multi_line_spinner);
    schoolSpinner.setAdapter(adapter);
    schoolSpinner.setOnItemSelectedListener(this); 
```

其中 schoolName 是字符串的 ArrayList。任何帮助深表感谢！

# objective-c - 如何停止 AudioToolbox 声音？

> ID：15370584
> 
> 赞同：4
> 
> 时间：2013-03-12T19:38:46.617
> 
> 标签：objective-c, xcode, avfoundation, audiotoolbox

我有两种不同的按钮按下声音动作。当我按下一个按钮时，它应该播放一个声音，当我按下另一个按钮时，它应该停止第一个声音并播放另一个，我该怎么做？

谢谢，

```
-(void) onButtonPressAlbina {
    [soundID2 stop];     
    NSString *soundPath = [[NSBundle mainBundle] pathForResource:@"albina" ofType:@"m4a"];
    SystemSoundID soundID;
    AudioServicesCreateSystemSoundID((__bridge CFURLRef)[NSURL fileURLWithPath: soundPath], &soundID);
    AudioServicesPlaySystemSound (soundID);
}

-(void) onButtonPressBalena {
    NSString *soundPath = [[NSBundle mainBundle] pathForResource:@"balena" ofType:@"m4a"];
    SystemSoundID soundID;
    AudioServicesCreateSystemSoundID((__bridge CFURLRef)[NSURL fileURLWithPath: soundPath], &soundID);
    AudioServicesPlaySystemSound (soundID);    
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T19:44:38.243

您无法停止通过“ `AudioServicesPlaySystemSound`”播放的声音，但您可以使用“ `AVAudioPlayer`”代替。

在对象中保留对“ `AVAudioPlayer`”的引用，然后在需要停止它时可以调用[“ `stop`” 。](http://developer.apple.com/library/ios/documentation/AVFoundation/Reference/AVAudioPlayerClassReference/Reference/Reference.html#//apple_ref/occ/instm/AVAudioPlayer/stop)

玩

```
#import <AudioToolbox/AudioToolbox.h>
#import <AVFoundation/AVAudioPlayer.h>
AVAudioPlayer  *player;

// ...

NSString *path;
NSError *error;
path = [[NSBundle mainBundle] pathForResource:@"albina" ofType:@"m4a"];
if ([[NSFileManager defaultManager] fileExistsAtPath:path]) 
{    
  player = [[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:path] error:&error];
  player.volume = 0.5f;
  [player prepareToPlay];
  [player setNumberOfLoops:0];
  [player play];    
} 
```

停止

```
if (player != nil)
{
  if (player.isPlaying == YES)
    [player stop];
} 
```

# c# - 访问多个 Outlook 帐户的全局地址列表

> ID：15370589
> 
> 赞同：0
> 
> 时间：2013-03-12T19:39:17.420
> 
> 标签：c#, outlook, office-interop, mapi

经过一小时的搜索，在这里试试运气。

假设您的 Outlook 2010 有两个活动帐户：john.doe@company.com、admin.test@company.com。

您需要为 admin.test@company.com 提取全局地址列表：

```
 using Microsoft.Office.Interop.Outlook;

            Application app = new Application();
            NameSpace ns = app.GetNamespace("MAPI");
            ns.Logon("", "", false, true);

            AddressList GAL = ns.AddressLists["Global Address List"];

            foreach (AddressEntry oEntry in GAL.AddressEntries)
            {
                // do something
            } 
```

这里的问题是 GAL 可以属于任何一个帐户，并且至少通过阅读 MSDN，这并不明显，您应该如何指定您真正想要使用的帐户。

如果我们将像这样遍历所有列表：

```
foreach (AddressList lst in ns.AddressLists)
{
    Console.WriteLine("{0}, {1}", lst.Name, lst.Index);
} 
```

我们可以看到有两个名为“Global Address List”的条目，两个名为“Contacts”的条目等索引不同，但仍然不清楚哪个条目属于哪个帐户。

对于文件夹，它做得很好，因为你可以使用这样的结构：

```
ns.Folders["admin.test@company.com"].Folders["Inbox"]; 
```

但我无法为地址列表找出类似的机制。

任何帮助表示赞赏。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T20:07:48.710

来自不同服务器的 GAL 需要使用配置文件 (IProfAdmin) 和帐户管理 API (IOlkAccountManager) 与相应的商店和帐户相关联。这些接口只能在 C++ 或 Delphi 中访问。您将需要从存储 (IMsgSTore) 和地址簿对象 (IABContainer) 中读取 PR_EMSMDB_SECTION_UID。如果您需要将其与帐户匹配，则在 IOlkAccount 对象的 PROP_MAPI_EMSMDB_SECTION_UID (0x20070102) 属性中将提供相同的值 -如果单击 IOlkAccountManager 按钮并双击 Exchange 帐户，您可以在[OutlookSpy中看到它。](http://www.dimastr.com/outspy/)

如果可以选择使用[Redemption](http://www.dimastr.com/redemption)，则可以使用[RDOExchangeAccount](http://www.dimastr.com/redemption/RDOAccount.htm#RDOExchangeAccount)对象，该对象公开 GAL、AllAddressLists、PrimaryStore、PublicFolders 等属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T16:17:26.410

我使用 Account.CurrentUser UID 和匹配的 AddressList UID 来选择正确的列表。我不知道使用 Store 是否是一种更好的方法，但是这个方法很好用。

理查德和德米特里感谢您的帮助。

此外，Dmitry 我要感谢您维护 Internet 上所有 MAPI 标记的唯一来源。

代码：

```
using Microsoft.Office.Interop.Outlook;

const string PR_EMSMDB_SECTION_UID = "http://schemas.microsoft.com/mapi/proptag/0x3D150102";

Application app = new Application();
NameSpace ns = app.GetNamespace("MAPI");
ns.Logon("", "", false, true);

string accountName = "admin.test@company.com";
string accountUID = null;

// Get UID for specified account name
foreach (Account acc in ns.Accounts)
{
    if (String.Compare(acc.DisplayName, accountName, true) == 0)
    {
        PropertyAccessor oPAUser = acc.CurrentUser.PropertyAccessor;
        accountUID = oPAUser.BinaryToString(oPAUser.GetProperty(PR_EMSMDB_SECTION_UID));
        break;
    }
}

// Select GAL with matched UID
foreach (AddressList GAL in ns.AddressLists)
{
    if (GAL.Name == "Global Address List")
    {
        PropertyAccessor oPAAddrList = GAL.PropertyAccessor;
        if (accountUID == oPAAddrList.BinaryToString(oPAAddrList.GetProperty(PR_EMSMDB_SECTION_UID)))
        {
            foreach (AddressEntry oEntry in GAL.AddressEntries)
            {
                // do something
            }
            break;
        }
    }
} 
```

# c - MpLab C，装配，中断定义的冲突

> ID：15370592
> 
> 赞同：0
> 
> 时间：2013-03-12T19:39:19.953
> 
> 标签：c, assembly, integration, pic24

我将一些新的 C 软件例程与现有的汇编语言安排放在一起。

我发现这些错误

```
 multiple definition of `_U1RXInterrupt'
    multiple definition of `_U2RXInterrupt'
    multiple definition of `_U3RXInterrupt' 
```

我在哪里、何时、如何让 C 编译器让我拥有`U1RXInterrupt`我的汇编例程？同上`U2RXInterrupt`

更新，2013 年 3 月 13 日

刚刚在C代码中找到了这个。这是我问题的根源吗？如果我把这个拿走，我的冲突会结束吗？

```
 //********************U1RX interrupt********************************//
   void __attribute__ ((interrupt, no_auto_psv)) _U1RXInterrupt(void) 
   {
    IFS0bits.U1RXIF = 0;
    U1Buf_RX=U1RXREG;
    //putcharUART2(U1Buf_RX);
   } 
```

我希望我的汇编语言例程能够处理 Uart 1

我猜我会为 U2RXInterrupt(void) 找到一个类似的处理程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:09:29.763

您只能为给定的中断定义一个子程序。无论 ISR 是通过 C 代码还是汇编程序定义的，它在您的应用程序中都必须是唯一的。

因此，如果您想使用您的汇编程序 ISR，您必须从 C 代码中删除另一个，或者不将您的应用程序与带来它的对象或库链接。

# javascript - 在新窗口中显示隐藏的 div 作为内容

> ID：15370593
> 
> 赞同：3
> 
> 时间：2013-03-12T19:39:32.627
> 
> 标签：javascript, jquery, css, youtube, popup

当您单击查看产品演示时，我正在尝试[在此页面上镜像视频播放器的功能。](http://cookware.lecreuset.com/cookware/product_5-1/2-qt.-Round-French-Oven_10151_-1_20002_10138)它会弹出一个新窗口（不是新选项卡），其中禁用滚动并定义了大小。重要的是我的弹出窗口也有这个。对话框不起作用。

我使用的视频是 YouTube 视频；我可以通过单击页面上的链接自行弹出视频。但是，我还需要能够在弹出（图像+文本）窗口中显示其他内容。

我是 jQuery 新手，所以我不知道实现这一目标的最佳方法。我的第一个想法是我可以将所有内容放在隐藏的 div 中，然后在单击元素时使该内容显示在新窗口中，并在单击时使用 jQuery 应用 css 以使其正确显示。

在对 SO 进行研究之后，我发现[了 this](https://stackoverflow.com/questions/3841100/write-content-to-new-window-with-jquery)，这很有效。问题是它在新选项卡中打开，而不是在新窗口中打开，并且 CSS 在新选项卡中丢失（我可以使用内联样式修复，虽然不理想，但我可以接受）。如果我可以将其设为新窗口而不是选项卡，我可以使用它。[这是我在小提琴中的代码，](http://jsfiddle.net/3D5DE/)它在下面：

```
<script type="text/javascript">
    function printClick() {
        var w = window.open();
        var html = $("#video-container").html();
        $(w.document.body).html(html);
    }

    $(function() {
        $("a#video-link").click(printClick);

    });
</script> 
```

进而：

```
<div id="product-description">
    <a href="#" id="video-link">
    <img src="cookware-product-demonstration-video.png" alt="View Product Demonstration Video" width="355" height="55" style="padding: 0px 0px 10px 0px;" border="0" />
    </a>
</div>
<div id="video-container" style="display: none;>
    <div id="video" style="width: 600px; position: relative; margin: 0px auto;">
        <div id="video-header">
            <img src="logo.gif" height="30" width="120" alt="Company Logo" style="float: left;"/>
            <p style="float: right">Product Demonstration Video</p>
        </div>
        <iframe width="600" height="338" src="http://www.youtube.com/embed/yeuCLMppZzc?rel=0"  frameborder="0" allowfullscreen></iframe>
    </div>
</div> 
```

但是，这真的是最好的方法吗？我觉得必须有更好的方法来做到这一点。我发现了一些将 target="_blank" 添加到 href 的帖子（[例如此处](http://jsfiddle.net/uh9GY/)），但是由于我没有打开 URL，因此到目前为止这对我不起作用。

任何有关如何执行此操作的帮助或建议表示赞赏。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T20:12:48.533

您可以做的是使用查询字符串。

使用[如何在 JavaScript 中获取查询字符串值中的函数？](https://stackoverflow.com/questions/901115/how-can-i-get-query-string-values)，在另一页上有以下内容：

JAVASCRIPT：

```
function getParameterByName(name)
{
  name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
  var regexS = "[\\?&]" + name + "=([^&#]*)";
  var regex = new RegExp(regexS);
  var results = regex.exec(window.location.search);
  if(results == null)
    return "";
  else
    return decodeURIComponent(results[1].replace(/\+/g, " "));
}

$(document).ready(function(){
    var width = 400,
    height = 300;

    //I've constructed it like this to prevent possible embedding errors

   var vid = 'http://www.youtube.com/v/' + getParameterByName("test");
   $('<object width="' + width + '" height="' + height + '">' +
   '<param name="movie" value="' + vid + '" />' +
   '<param name="allowFullScreen" value="true" />' +
   '<param name="allowscriptaccess" value="always" />' +
   '<param name="wmode" value="opaque">' +
   '<embed src="' + vid + '" type="application/x-shockwave-flash" width="' + width + '" height="' + height + '" allowscriptaccess="always" allowfullscreen="true" wmode="opaque" /></object>')
   .appendTo($('#div1')); 
}); 
```

第 1 页示例：http: [//fiddle.jshell.net/dirtyd77/rmEvY/5/](http://fiddle.jshell.net/dirtyd77/rmEvY/5/)

然后在另一个页面上，使用以下命令：

JAVASCRIPT：

```
$(document).ready(function(){
    $("#b1").click(function(){
       var url = 'http://fiddle.jshell.net/dirtyd77/rmEvY/5/show/?test=yeuCLMppZzc';
       window.open(url, '_blank', "height=400,width=450");  //set height and width to make new window
    });
}); 
```

演示：http: [//jsfiddle.net/dirtyd77/tVEBj/1/](http://jsfiddle.net/dirtyd77/tVEBj/1/)

这是最终产品的演示：http: [//fiddle.jshell.net/dirtyd77/tVEBj/1/show/](http://fiddle.jshell.net/dirtyd77/tVEBj/1/show/)

我可能会这样做，但这绝不是***最好***的方法。希望这是您正在寻找的。如果您有任何问题，请告诉我！祝你好运！

* * *

**编辑：**

经过一番修修补补，我找到了一种在一个页面中执行此操作的方法。

尝试这样的事情：

```
$(document).ready(function(){
    $("#b1").click(function(){
        var win = window.open('', '_blank', "height=400,width=450");
        var width = 400,
        height = 300,
        vid='http://www.youtube.com/v/yeuCLMppZzc';
        var obj = '<object width="' + width + '" height="' + height + '">' +
                            '<param name="movie" value="' + vid + '" />' +
                            '<param name="allowFullScreen" value="true" />' +
                            '<param name="allowscriptaccess" value="always" />' +
                            '<param name="wmode" value="opaque">' +
                            '<embed src="' + vid + '" type="application/x-shockwave-flash" width="' + width + '" height="' + height + '" allowscriptaccess="always" allowfullscreen="true" wmode="opaque" /></object>';
        win.document.write(obj);
    });
}); 
```

演示：

[http://fiddle.jshell.net/tVEBj/6/](http://fiddle.jshell.net/tVEBj/6/)

# objective-c - 对 NSFetchedResultsController 应用过滤器

> ID：15370594
> 
> 赞同：1
> 
> 时间：2013-03-12T19:39:44.300
> 
> 标签：objective-c, uitableview, core-data, filter, predicate

以下用于在表格上显示“引脚”列表，我可以使用操作表成功更改 _category。

我只想显示与给定类别（即旅行）匹配的结果，但仍然能够将不具有相同类别（即家庭）的 Pin 图添加到 managedObjectContext。

我已经尝试了很多方法来使用谓词来过滤获取的数据（通过将_category与Pin的'category'属性进行比较）无济于事 - 我得到的最远仍然显示我的所有条目，无论类别如何，但只允许pin要添加的所选类别。

大部分代码来自 Xcode 提供的 CoreData/TableView 模板。

任何帮助都会非常有帮助——这是我第一次使用 CoreData。

```
- (void)setFilter {
//load
NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
NSString *title = [prefs stringForKey:@"Filter"];
_category = title;

if ([title isEqualToString:@"None"] || title.length < 1) {
    title = [NSString stringWithFormat:@"All Pins"];
}else{
    title = [NSString stringWithFormat:@"%@ Pins", title];
}
self.navigationItem.title = title;

[self.tableView reloadData];
}

///////////////////////////////////////////////////////////////////////////
//
//                            Action Sheet
//
///////////////////////////////////////////////////////////////////////////

- (IBAction)showCategorySheet:(id)sender {
UIActionSheet *popupQuery;
popupQuery = [[UIActionSheet alloc] initWithTitle:@"Category" delegate:self cancelButtonTitle:@"All" destructiveButtonTitle:nil
                                otherButtonTitles:@"Family", @"Friends", @"Home", @"Work", @"Travel", nil];
popupQuery.actionSheetStyle = UIActionSheetStyleDefault;
[popupQuery showInView:self.view];
}

- (void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex {

NSString *filter;

if (buttonIndex == 0) {
    //Family
    filter = @"Family";
}else if (buttonIndex == 1) {
    //Friends
    filter = @"Friends";
}else if (buttonIndex == 2) {
    //Home
    filter = @"Home";
}else if (buttonIndex == 3) {
    //Work
    filter = @"Work";
}else if (buttonIndex == 4) {
    //Travel
    filter = @"Travel";
}else if (buttonIndex == 5) {
    //None
    filter = @"None";
}
//save
NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
[prefs setObject:filter forKey:@"Filter"];
[self setFilter];
}

///////////////////////////////////////////////////////////////////////////
//
//                               Table
//
///////////////////////////////////////////////////////////////////////////

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
return 60.0;
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
return [[self.fetchedResultsController sections] count];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
id <NSFetchedResultsSectionInfo> sectionInfo = [self.fetchedResultsController sections][section];
return [sectionInfo numberOfObjects];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell" forIndexPath:indexPath];
[self configureCell:cell atIndexPath:indexPath];
return cell;
}

- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
// Return NO if you do not want the specified item to be editable.
return YES;
}

- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
if (editingStyle == UITableViewCellEditingStyleDelete) {
    NSManagedObjectContext *context = [self.fetchedResultsController managedObjectContext];
    [context deleteObject:[self.fetchedResultsController objectAtIndexPath:indexPath]];

    NSError *error = nil;
    if (![context save:&error]) {
         // Replace this implementation with code to handle the error appropriately.
         // abort() causes the application to generate a crash log and terminate.
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }
}   
}

- (BOOL)tableView:(UITableView *)tableView canMoveRowAtIndexPath:(NSIndexPath *)indexPath
{
// The table view should not be re-orderable.
return NO;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad) {
    NSManagedObject *object = [[self fetchedResultsController] objectAtIndexPath:indexPath];
    self.detailViewController.detailItem = object;
}
}

///////////////////////////////////////////////////////////////////////////
//
//                           Data Handling
//
///////////////////////////////////////////////////////////////////////////

- (NSFetchedResultsController *)fetchedResultsController
{
if (_fetchedResultsController != nil) {
    return _fetchedResultsController;
}

NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
// Edit the entity name as appropriate.
NSEntityDescription *entity = [NSEntityDescription entityForName:@"Pin" inManagedObjectContext:self.managedObjectContext];
[fetchRequest setEntity:entity];

// Set the batch size to a suitable number.
[fetchRequest setFetchBatchSize:20];

// Edit the sort key as appropriate.
NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"creationDate" ascending:NO];
NSArray *sortDescriptors = @[sortDescriptor];

[fetchRequest setSortDescriptors:sortDescriptors];

// Edit the section name key path and cache name if appropriate.
// nil for section name key path means "no sections".
NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:self.managedObjectContext sectionNameKeyPath:nil cacheName:@"Master"];
aFetchedResultsController.delegate = self;
self.fetchedResultsController = aFetchedResultsController;

NSError *error = nil;
if (![self.fetchedResultsController performFetch:&error]) {
     // Replace this implementation with code to handle the error appropriately.
     // abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development. 
    NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
    abort();
}

return _fetchedResultsController;
}    

- (void)controllerWillChangeContent:(NSFetchedResultsController *)controller
{
[self.tableView beginUpdates];
}

- (void)controller:(NSFetchedResultsController *)controller didChangeSection:(id <NSFetchedResultsSectionInfo>)sectionInfo
       atIndex:(NSUInteger)sectionIndex forChangeType:(NSFetchedResultsChangeType)type
{
switch(type) {
    case NSFetchedResultsChangeInsert:
        [self.tableView insertSections:[NSIndexSet indexSetWithIndex:sectionIndex] withRowAnimation:UITableViewRowAnimationFade];
        break;

    case NSFetchedResultsChangeDelete:
        [self.tableView deleteSections:[NSIndexSet indexSetWithIndex:sectionIndex] withRowAnimation:UITableViewRowAnimationFade];
        break;
}
}

- (void)controller:(NSFetchedResultsController *)controller didChangeObject:(id)anObject
   atIndexPath:(NSIndexPath *)indexPath forChangeType:(NSFetchedResultsChangeType)type
  newIndexPath:(NSIndexPath *)newIndexPath
{
UITableView *tableView = self.tableView;

switch(type) {
    case NSFetchedResultsChangeInsert:
        [tableView insertRowsAtIndexPaths:@[newIndexPath] withRowAnimation:UITableViewRowAnimationFade];
        break;

    case NSFetchedResultsChangeDelete:
        [tableView deleteRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationFade];
        break;

    case NSFetchedResultsChangeUpdate:
        [self configureCell:[tableView cellForRowAtIndexPath:indexPath] atIndexPath:indexPath];
        break;

    case NSFetchedResultsChangeMove:
        [tableView deleteRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationFade];
        [tableView insertRowsAtIndexPaths:@[newIndexPath] withRowAnimation:UITableViewRowAnimationFade];
        break;
}
}

- (void)controllerDidChangeContent:(NSFetchedResultsController *)controller
{
[self.tableView endUpdates];
}

- (void)configureCell:(UITableViewCell *)cell atIndexPath:(NSIndexPath *)indexPath
{
NSManagedObject *object = [self.fetchedResultsController objectAtIndexPath:indexPath];
NSLog(@"object: %@", [object valueForKey:@"category"]);
NSLog(@"filter: %@", _category);
//time
NSDate *now = [object valueForKey:@"creationDate"];
NSString *formattedTime = [NSString stringWithFormat:@"%@", [self formattedDate:now type:@"date"]];

cell.textLabel.text = [[object valueForKey:@"pinName"] description];
cell.detailTextLabel.text = formattedTime;

if ([[object valueForKey:@"pinPictureThumb"] description].length > 0) {
    NSData *data = [object valueForKey:@"pinPictureThumb"];
    UIImage *img = [[UIImage alloc] initWithData:data];
    cell.imageView.image = img;
}else{
    cell.imageView.image = nil;
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T20:05:05.693

在您的 fetchedResultsController 方法中，您需要在 [fetchRequest setSortDescriptors:sortDescriptors]; 之后将一个 NSPredicate* 对象添加到您的 fetch 请求中。行，然后正常运行您的获取请求。

```
NSPredicate *fetchPredicate = [NSPredicate predicateWithFormat:@"category=%@", categoryToFind];
[fetchRequest setPredicate:fetchPredicate]; 
```

我上面显示的格式是从我的一些代码中复制的，因此它可能不是您正在寻找的确切谓词格式。如果您在正确格式化谓词时遇到问题，请在此处查看苹果文档：[https ://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Predicates/Articles/pSyntax.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Predicates/Articles/pSyntax.html)

SO上还有一堆关于格式化谓词的线程。

# php - 用 cakephp 输出标签？

> ID：15370595
> 
> 赞同：8
> 
> 时间：2013-03-12T19:39:48.927
> 
> 标签：php, cakephp

我已经在带有 xampp 的 Windows XP 中本地开发了一个带有 cakephp 的 Web 应用程序，并且一切正常。今天我将它部署到 CentOS 和 Ubuntu 服务器上，但我都遇到了问题。发生的事情是 Tab 空间与我的信息一起输出。假设我进行了一个应该返回的 ajax 调用，更准确地说，`OK`返回的是`" OK"``(0x09)OK`

我真的不知道这个标签是从哪里来的。我已将我的代码减少到最大，但我仍然得到它。

控制器

```
public function sendcomment() {
        $this->layout = 'ajax';
        $this->set('ret', 'OK');
    } 
```

看法

```
<?php echo $ret; ?> 
```

即使我不直接在布局上使用视图文件和输出信息，选项卡仍然存在：

控制器

```
public function sendcomment() {
        $this->layout = 'testlayout';
    } 
```

测试布局.ctp

```
OK 
```

无论布局是什么，所有操作都会发生这种情况。

有没有人经历过这个并知道可能发生了什么？我所有的文件都以 UTF-8 编码，没有 BOM，它们在 Windows 上通过 XAMPP 工作得很好。

- 编辑：

好吧，有人说这是配置问题，我真的不知道。然而，为了找到“标签”的来源，我开始在核心文件上添加回声并不断前进，直到最终找到标签所在的位置。从 cake webroot 的 index.php 开始，如果我放在方法`echo 'a'`之前`dispatch()`，我的输出是`a(0x09)OK`. 所以标签确实来自蛋糕。

现在问题来了，看看几次测试的结果，我终于卡住了，这让我一无所获。

现在我在`(CakeRoot)/lib/Cake/Routing/Dispatcher.php`。这里我们有以下方法：

```
protected function _loadController($request) {
    $pluginName = $pluginPath = $controller = null;
    if (!empty($request->params['plugin'])) {
        $pluginName = $controller = Inflector::camelize($request->params['plugin']);
        $pluginPath = $pluginName . '.';
    }
    if (!empty($request->params['controller'])) {
        $controller = Inflector::camelize($request->params['controller']);
    }
    if ($pluginPath . $controller) {
        $class = $controller . 'Controller';
        App::uses('AppController', 'Controller');
        App::uses($pluginName . 'AppController', $pluginPath . 'Controller');
        App::uses($class, $pluginPath . 'Controller');
        if (class_exists($class)) {
            return $class;
        }
    }
    return false;
} 
```

我正是在这一部分：

```
 App::uses($class, $pluginPath . 'Controller');
    if (class_exists($class)) {
        return $class;
    } 
```

现在这里是测试，如果我`echo`在 if 之前放一个正确的，像这样：

```
 App::uses($class, $pluginPath . 'Controller');
    echo 'a';
    if (class_exists($class)) {
        return $class;
    } 
```

我的输出将是`a(0x09)OK`. 但是，如果我将我的回声放在 if 中，如下所示：

```
 App::uses($class, $pluginPath . 'Controller');
    if (class_exists($class)) {
        echo 'a';
        return $class;
    } 
```

我的输出将是`(0x09)aOK`。我唯一想到的就是`class_exists()`与标签相呼应。但这没有任何意义。出于测试目的，我做了这个：

```
 App::uses($class, $pluginPath . 'Controller');
    if (TRUE) {
        return $class;
    } 
```

仍然在输出选项卡。更糟糕的是，如果我这样做`if == TRUE`，无论回声“a”是在 if 之前还是在 if 内部，输出都将始终为`a(0x09)OK`.

这里发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:50:27.620

> 所以标签确实来自蛋糕。

这是一个错误的结论。

## 你几乎拥有它

解释你的代码：

```
App::uses($class, $pluginPath . 'Controller');
echo "before";
if (class_exists($class)) {
    echo 'after';
    return $class;
} 
```

输出：`before(0x09)after`

这里没有什么大奥秘。以这种方式使用，[class_exists](http://php.net/manual/es/function.class-exists.php)将自动加载类 - 即包括它们，以及任何直接的类依赖项（因为它们也将调用类加载）。因此，它可以来自一个非常短的列表：

*   控制器`$class`/Controller.php
*   Plugin/Foo/Controller/FooAppController.php（如果是插件控制器）
*   Controller/AppController.php（如果存在）

这些文件之一具有前导或尾随空格 - 只需找到它并删除它。

## 使用您可以使用的工具

您无需猜测问题是什么文件，有很多很多工具会告诉您哪个文件是罪魁祸首。一个这样的工具是在[调试工具包插件](https://github.com/cakephp/debug_kit)中，例如：

```
-> Console/cake DebugKit.whitespace

Welcome to CakePHP v2.3.0-RC2 Console
---------------------------------------------------------------
App : app
Path: /path/to/app/
---------------------------------------------------------------
Checking *.php in /path/to/app/
!!!contains trailing whitespaces: /app/Controller/AppController.php 
```

# android - Android Logic 需要工作

> ID：15370596
> 
> 赞同：0
> 
> 时间：2013-03-12T19:39:49.773
> 
> 标签：android, database, android-emulator, logic

我正在尝试创建一个应用程序，在该应用程序中创建一个包含两个文本视图和一个复选框字段的列表视图，我希望当我单击复选框进行检查时，两个文本视图值都添加到数据库中，当我单击同一个复选框时取消选中一个复选框，然后都添加以前从数据库中删除的值。

我可以编写代码以在检查事件时在数据库上添加数据值，但在取消选中复选框时无法删除这些值。

```
package data.base;

import com.example.phone_no.DBhelper;

import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.CheckBox;
import android.widget.CompoundButton;
import android.widget.EditText;
import android.widget.CompoundButton.OnCheckedChangeListener;
import android.widget.ImageView;
import android.widget.TextView;

public class Second extends ArrayAdapter<String> {
 String string1[];

 Context context;
    String string[];
     TextView textView;
    TextView textView1,textView2;

    CheckBox checkBox;
    EditText editText;
    String string2[];

    public Second(Context context, String[] objects, String[] Object1,String[] object2)
    {

        super(context,R.layout.main,R.id.text1, objects);
        System.out.println("you in under super");
        this.context=context;
        this.string=objects;
        this.string1=Object1;
        this.string2 = object2;
      //  this.imageView = Object3;
    }
    @Override
    public View getView(final int position, View convertView, ViewGroup parent)
    {
        System.out.println("you in under getview");
        LayoutInflater inflater=(LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View view=inflater.inflate(R.layout.main,parent,false);
          textView=(TextView)view.findViewById(R.id.text1);
        System.out.println("you in under inflator");

        textView1=(TextView)view.findViewById(R.id.text2);
       // imageView = (ImageView)view.findViewById(R.id.text3);
        textView.setText(string[position]);
        textView1.setText(string1[position]);
        System.out.println("you are above of return");
        checkBox = (CheckBox)view.findViewById(R.id.check);
        textView2 = (TextView)view.findViewById(R.id.text3);
        textView2.setText(string2[position]);

        checkBox.setOnCheckedChangeListener(new OnCheckedChangeListener() {

            @Override
            public void onCheckedChanged(CompoundButton arg0, boolean arg1) {
                // TODO Auto-generated method stub

                if(checkBox.isChecked())   
               {

                 System.out.println("under check");
                 DBhelper DB = new DBhelper(context);
                 DB.open();
                 DB.delete_image(string2[position]);
                 DB.close();

               }

                else

               {
                   System.out.println("underhhhhhhhhhhhhhhhhhhhhhhh check");
                DBhelper DB = new DBhelper(context);
                DB.open();
                DB.adddata(string2[position], string[position], string1[position]);
                DB.getAlldata();
                DB.close();

               }

            }
        });

        return view;    //To change body of overridden methods use File | Settings | File Templates.

    }

} 
```

这是我的 DBhelper 类，它维护数据库操作：

```
package com.example.phone_no;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

public class DBhelper {
public static final String KEY_ID = "id";
public static final String KEY_NAME = "names";

public static final String KEY_PHONE = "phoneno";

private final Context ourContext;
private static final String DATABASE_TABLE = "Contactinfo";
private static final int DATABASE_VERSION = 27;
private static final String DATABASE_NAME = "contactdata.db";
private DbHelper ourHelper;
private SQLiteDatabase ourDatabase;
// end for location
private static class DbHelper extends SQLiteOpenHelper {
    public DbHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
        // TODO Auto-generated constructor stub
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub

        /*db.execSQL("CREATE TABLE " + DATABASE_TABLE + " (" + KEY_ID
                + " INTEGER PRIMARY KEY, " + KEY_NAME + " TEXT NULL , "
                + KEY_PHONE + " INTEGER NULL);");*/
        db.execSQL("CREATE TABLE " + DATABASE_TABLE + " (" + KEY_ID
                + " INTEGER , " + KEY_NAME + " TEXT NULL , "
                + KEY_PHONE + " INTEGER NULL);");

        // string value
        String y = "CREATE TABLE " + DATABASE_TABLE + " (" + KEY_ID
                + " INTEGER PRIMARY KEY  , " + KEY_NAME + " TEXT NULL , "
                + KEY_PHONE + " INTEGER NULL);";

        System.out.println("query" + y);
        Log.d("query", y);

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int arg1, int arg2) {
        // TODO Auto-generated method stub
        // TODO Auto-generated method stub
        db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE);
        onCreate(db);

    }

}

public DBhelper(Context c) {
    ourContext = c;
}
public DBhelper open() throws SQLException 
{
    ourHelper = new DbHelper(ourContext);
    ourDatabase = ourHelper.getWritableDatabase();
    return this;
}

public void close() 
{
    ourHelper.close();
}
public long adddata(String id,String name,String number) 
{
    // TODO Auto-generated method stub
    // add the custom Image Gallery Image Path to Data Base
    ContentValues cv = new ContentValues();
    cv.put(KEY_ID, id);
    cv.put(KEY_NAME, name);
    cv.put(KEY_PHONE, number);
    return ourDatabase.insert(DATABASE_TABLE, null, cv);
}

public void getAlldata() 
{
    Cursor details = null;
    if (ourDatabase.isOpen() == false)

        ourDatabase = ourHelper.getWritableDatabase();
    if (ourDatabase.isOpen()) 
    {
        details = ourDatabase.query(DATABASE_TABLE, null, null, null, null, null, null);
         for(details.moveToFirst();!details.isAfterLast();details.moveToNext())
        {
             String a=details.getString(0);
            String b=details.getString(1);
            String c=details.getString(2);
            System.out.println("id--"+a+"name"+b+"phoneno"+c);
        }

    }

}
public long delete_image(String id) 
  {
    if (ourDatabase.isOpen() == false)
        ourDatabase = ourHelper.getWritableDatabase();
      if (ourDatabase.isOpen()) 
        {
            return ourDatabase.delete(DATABASE_TABLE, KEY_ID + "=" + id, null);
        }
        return 0;
    }

} 
```

这是我的第二个类文件名 Second.java 在其中我无法在 if 条件下创建逻辑。

```
package data.base;

import com.example.phone_no.DBhelper;

import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.CheckBox;
import android.widget.CompoundButton;
import android.widget.EditText;
import android.widget.CompoundButton.OnCheckedChangeListener;
import android.widget.ImageView;
import android.widget.TextView;

public class Second extends ArrayAdapter<String> {
 String string1[];

 Context context;
    String string[];
     TextView textView;
    TextView textView1,textView2;

    CheckBox checkBox;
    EditText editText;
    String string2[];

    public Second(Context context, String[] objects, String[] Object1,String[] object2)
    {

        super(context,R.layout.main,R.id.text1, objects);
        System.out.println("you in under super");
        this.context=context;
        this.string=objects;
        this.string1=Object1;
        this.string2 = object2;
      //  this.imageView = Object3;
    }
    @Override
    public View getView(final int position, View convertView, ViewGroup parent)
    {
        System.out.println("you in under getview");
        LayoutInflater inflater=(LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View view=inflater.inflate(R.layout.main,parent,false);
          textView=(TextView)view.findViewById(R.id.text1);
        System.out.println("you in under inflator");

        textView1=(TextView)view.findViewById(R.id.text2);
       // imageView = (ImageView)view.findViewById(R.id.text3);
        textView.setText(string[position]);
        textView1.setText(string1[position]);
        System.out.println("you are above of return");
        checkBox = (CheckBox)view.findViewById(R.id.check);
        textView2 = (TextView)view.findViewById(R.id.text3);
        textView2.setText(string2[position]);

        checkBox.setOnCheckedChangeListener(new OnCheckedChangeListener() {

            @Override
            public void onCheckedChanged(CompoundButton arg0, boolean arg1) {
                // TODO Auto-generated method stub

                if(checkBox.isChecked())   
               {

                 System.out.println("under check");
                 DBhelper DB = new DBhelper(context);
                 DB.open();
                 DB.delete_image(string2[position]);
                 DB.close();

               }

                else

               {
                   System.out.println("underhhhhhhhhhhhhhhhhhhhhhhh check");
                DBhelper DB = new DBhelper(context);
                DB.open();
                DB.adddata(string2[position], string[position], string1[position]);
                DB.getAlldata();
                DB.close();

               }

            }
        });

        return view;    //To change body of overridden methods use File | Settings | File Templates.

    }

} 
```

在 if 条件下，它不会进入我使用删除方法的第一部分，这就是为什么它总是在检查和取消选中复选框的事件时在数据库中添加记录。

请帮忙。提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T20:07:19.097

尝试编辑这个

```
checkBox.setOnCheckedChangeListener(new OnCheckedChangeListener() {
        @Override
        public void onCheckedChanged(CompoundButton arg0, boolean arg1) {
            // TODO Auto-generated method stub

            if(!arg1)   
           {

             System.out.println("under check");
             DBhelper DB = new DBhelper(context);
             DB.open();
             DB.delete_image(string2[position]);
             DB.close();

           }

            else

           {
               System.out.println("underhhhhhhhhhhhhhhhhhhhhhhh check");
            DBhelper DB = new DBhelper(context);
            DB.open();
            DB.adddata(string2[position], string[position], string1[position]);
            DB.getAlldata();
            DB.close();

           }

        }
    }); 
```

并编辑这个

```
public boolean delete_image(int id) 

{
    if (ourDatabase.isOpen() == false)
        ourDatabase = ourHelper.getWritableDatabase();
      if (ourDatabase.isOpen()) 
        {
            return ourDatabase.delete(DATABASE_TABLE, KEY_ID + "=" + id, null) > 0;
        }
        return false;
    } 
```

希望这对您有所帮助。

# android - Listview滚动条消失

> ID：15370598
> 
> 赞同：2
> 
> 时间：2013-03-12T19:39:56.790
> 
> 标签：android, listview, scrollbars

我有一个从服务器获取数据的异步任务填充的列表视图。但是，当列表视图第一次出现时，滚动条会出现，然后立即消失。我的主要活动扩展了 MapActivity，因为我在列表视图上方显示了一张地图。有谁知道为什么滚动条消失以及如何纠正它？下面是我的主要布局。

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
 >

<TextView
    android:text="Address is: "
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:id="@+id/address_view" />

<com.google.android.maps.MapView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mapvw"
    android:layout_width="match_parent" 
    android:layout_height="250dp" 
    android:enabled="true"
    android:clickable="true"
    android:apiKey="xxxxxxxxxxxxxxxxxx"
    />
<ListView 
    android:id="@+id/list"
    android:layout_width="match_parent"
    android:layout_height="200dp"
    android:scrollbars="vertical"
    android:drawSelectorOnTop="false" />

</LinearLayout> 
```

这是我的列表视图的自定义布局。

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/linearLayout1"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

  <TextView
    android:id="@+id/viewtext"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center_vertical"
    android:minHeight="?android:attr/listPreferredItemHeight"
    android:paddingLeft="6sp"
    android:textColor="#000000"
    android:textSize="15sp"
    android:paddingRight="10sp"
    />
   </LinearLayout> 
```

下面是创建列表视图的逻辑：

```
@Override
    protected void onPostExecute(ArrayList<String> result) {
 ......... some code

 List<String> viewline = new ArrayList<String>();
   ..... some code
   mapView.postInvalidate();

        final ArrayAdapter<String> arrayAdpt = new ArrayAdapter<String>(getApplicationContext(), R.layout.listview, R.id.viewtext, viewline);

        ListView restaurant_list = (ListView) findViewById(R.id.list);
        restaurant_list.setChoiceMode(ListView.CHOICE_MODE_SINGLE);
        restaurant_list.setAdapter(arrayAdpt);
        restaurant_list.setScrollContainer(true);
        restaurant_list.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1,
                    int arg2, long arg3) {
                // TODO Auto-generated method stub
                Toast.makeText(getApplicationContext(), "You have selected " + String.valueOf(arg2) + " arg3=" + String.valueOf(arg3) , Toast.LENGTH_LONG).show();
            }

        }); 

    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T19:52:56.947

有两种方法可以阻止滚动条从`ListView`. 您只需要执行其中一项。

在代码中：

```
restaurant_list.setScrollbarFadingEnabled(false); 
```

在 xml 中：

```
android:fadeScrollbars="false" 
```

[参考](http://developer.android.com/reference/android/view/View.html#setScrollbarFadingEnabled%28boolean%29)

# javascript - Javascript图像滑动

> ID：15370605
> 
> 赞同：1
> 
> 时间：2013-03-12T19:40:13.033
> 
> 标签：javascript, jquery, web

在我上一篇关于使用 JQuery 控制单个 HTML 元素的帖子之后，我认为我会没事的，但我还没有再次陷入有点混乱的境地。

我能够在不传递单个元素的情况下使该功能正常工作，但是我不希望页面上的每个动画都在一次图像翻转时触发。

我将在下面提供一个 JSFiddle 链接以及我的脚本。

```
 <!-- slide image -->
    <script>

        function slideImage(elem)   

        {

            //Hide both the hover and overlay divs
            ".galleryHover".hide();             

            ".galleryOverlay".hide();

            //When the container div is hovered over trigger these events...
            $(".galleryContain",$(elem).parent()).hover(function()
            {
                //Slide .galleryHover along z-axis from -400 to 0 so its visible at a speed of 0.6s
                $(".galleryHover",$(elem).parent()).stop().show().css({ "left" : "-400px"}).animate({ left : 0}, 600);

                //Fade in the background overlay in 0.75s to 0.9 opacity
                $(".galleryOverlay",$(elem).parent()).stop().fadeTo(750, 0.9)

                //On mouse out...
            }, function(){

                //Slide .galleryHover +450 on the z-axis to provide illusion of sliding off the other way.
                $(".galleryHover",$(elem).parent()).stop().animate({ left : 450}, 750)

                //Over the course of 1 second, fade the background to 0 opacity.
                $(".galleryOverlay",$(elem).parent()).stop().fadeTo(1000,0)

            });

        });

    </script> 
```

当我的 DIV 悬停在上面时，我试图触发此事件（这是我认为我出错的地方，因为我确信您可以通过这种方式触发事件）

```
 <!-- OBJECT TO CONTAIN 1 GALLERY ITEM -->
                <div onhover="slideImage(this);" class="galleryContain">

                    <div class="galleryOverlay">

                    </div>

                    <div class="galleryHover">

                        <h1>Cool hovering slide effect!</h1>

                         <a href="#" onhover="slideDiv(this);"> <p class="blueText">08/03/2013 - ESPN Spoof for HP :</p> </a>

                    </div>  

                </div>      <!-- END FIRST ITEM --> 
```

JSFiddle 可以在这里找到：http: [//jsfiddle.net/w3RqG/2](http://jsfiddle.net/w3RqG/2)

请注意，此版本的工作原理是它针对鼠标悬停时的**所有**元素并为其设置动画

任何帮助将不胜感激

问候

亚历克斯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T19:54:43.493

将变量范围限定为悬停，以便您定位正确的悬停和叠加元素。在您的示例中，您分配`content`给所有“.galleryHover”。通过将其移动到悬停函数中并指定`.find()`，您只搜索元素中的那个。

[更新了 jsFiddle](http://jsfiddle.net/w3RqG/4/)

```
$(document).ready(function(){  
    $('.galleryOverlay, .galleryHover').hide()
    $(".galleryContain").hover(function(){
        var $this = $(this),
            $content = $this.find('.galleryHover'),
            $overlay = $this.find('.galleryOverlay');

        $content.stop().show().css({ "left" : "-400px" }).animate({ left : 0}, 600);
        $overlay.stop().fadeTo(750, 0.9) 
        } ,function(){
        var $this = $(this),
            $content = $this.find('.galleryHover'),
            $overlay = $this.find('.galleryOverlay');

            $content.stop().animate({left : 450}, 750)
            $overlay.stop().fadeTo(1000, 0)
        });
}); 
```

（抱歉抹掉你的评论）

# c - 计算文件中的行数 - C

> ID：15370607
> 
> 赞同：-1
> 
> 时间：2013-03-12T19:40:14.607
> 
> 标签：c, count, lines, readfile

我收到一个输入文件，里面有很多行。我希望能够计算行数，但也可以分析它们。

输入将是多行代码，只有整数。前任：

```
3 2
1 2
2 3
4 3
1 2
2 3
3 4 
```

这是棘手的部分：第一行有两个数字：3 和 2。（现在 3 不相关）。2真的很重要。它代表我必须阅读和保存的行数。所以，根据这个例子，我必须保存这些行

```
1 2
2 3 
```

那么为什么还有其他线路呢？- 你问。好吧，让我们将此输入视为块。在这行之后，`3 2`我读了两行。所以就像那个块结束了。但随后，线路`4 3`出现了。这意味着我必须做与第一个块完全相同的事情。所以，从这一行开始，`4 3`我现在知道我必须阅读并保存接下来的 3 行。表示线条

```
1 2
2 3
3 4 
```

我为此费尽心思，似乎找不到任何可能的解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:17:31.573

当你遇到这样的问题时，首先考虑结构很有用。这是主要算法的简单伪代码中的一种方法，可帮助您入门。除非您提供代码和问题，否则人们无法真正提供帮助。

```
declare line buffer array

while (read a line into buffer == succeeds) {
   scan buffer for two numbers (m, n)
   loop how many times? {
      read a line into buffer
      scan buffer for next two numbers (x, y)
   }
} 
```

翻译成 C 语言应该不会太难。然后您可以扩展它以存储您扫描的数字、计算行数或其他任何内容。

一旦你有了一些代码，如果它不起作用并且你无法弄清楚出了什么问题，你会得到很多帮助。

# javascript - JavaScript 中的图像失真算法

> ID：15370613
> 
> 赞同：0
> 
> 时间：2013-03-12T19:40:40.943
> 
> 标签：javascript, image, algorithm, distortion

所以我正在为 webapp 创造扭曲。我想实现一些类似于 mac 中的照相亭应用程序的效果。在网上很难找到材料。大多数文章（如[http://www.splashnology.com/article/pixel-distortions-with-bilinear-filter-in-html5-canvas/4739/](http://www.splashnology.com/article/pixel-distortions-with-bilinear-filtration-in-html5-canvas/4739/)）仅描述基础知识。现在，例如，我想让球化或旋转效果对角落更平滑，但我找不到任何解决方案。任何帮助，想法，资源？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-17T14:08:08.763

好吧，如果您对波浪等简单效果感兴趣，请阅读[http://ru.wikipedia.org/wiki/Синусоида](http://ru.wikipedia.org/wiki)，这是我们在 8 年级时的所有想法（谷歌翻译从俄语到英语）。

```
 <!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title></title>
        <script src="../js/common.js"></script>
        <link rel="stylesheet" href="style.css">
        <script>            

            addEventListener('load', function() {
                var cnv = gid('q');
                var ctx = cnv.getContext('2d');
                // характеризует сдвиг графика по оси Oy. Чем больше a, тем выше поднимается график
                var a = cnv.height / 2;
                // характеризует растяжение графика по оси Oy. Чем больше увеличивается b, тем сильнее возрастает амплитуда колебаний
                var b = 10;
                // характеризует растяжение графика по оси Ox. При увеличении c частота колебаний повышается
                var c = .05;
                // характеризует сдвиг графика по оси Ox. При увеличении d график двигается в положительном направлении оси абсцисс
                var d = 0;

                for (var i = 0; i < cnv.width; ++i) {
                    ctx.fillRect(i, ( a + b * Math.sin(c * i + d) ), 1, 1);
                }

                var cnv1 = gid('e');
                var ctx1 = cnv1.getContext('2d');
                ctx1.font = 'bold 30px Calibri';
                ctx1.fillText('Hello', 10, 30);
                var imd = ctx1.getImageData(0, 0, cnv1.width, cnv1.height);

                var cnv2 = gid('r');
                var ctx2 = cnv2.getContext('2d');
                ctx2.fillRect(0, 0, cnv2.width, cnv2.height);
                var imd1 = ctx2.getImageData(0, 0, cnv2.width, cnv2.height);
                var w = imd.width * 4;

                for (var i = 0, j, x, y, d = imd.data, d1 = imd1.data, l = d.length; i < l; i += 4) {
                    y = Math.floor(i / w);
                    x = i - w * y;   
                    j =  ( y + Math.floor( 10 * Math.sin(.01 * x) ) ) * w + x;
                    d1[j] = d[i];
                    d1[j + 1] = d[i + 1];
                    d1[j + 2] = d[i + 2];
                    d1[j + 3] = d[i + 3];
                }

        ctx2.putImageData(imd1, 0, 0);
            });

        </script>
    </head>
    <body>
        <canvas id="q" width="140" height="40"></canvas>
        <p>График синусоиды.</p>
        <canvas id="e" width="140" height="40"></canvas>
        <p>Изображение без искажения.</p>
        <canvas id="r" width="140" height="40"></canvas>
        <p>Изображение с искажением.</p>
    </body>
</html> 
```

# html - 将 stroke-width 设置为 0 兼容 Android 浏览器

> ID：15370615
> 
> 赞同：1
> 
> 时间：2013-03-12T19:40:43.310
> 
> 标签：html, css, svg

我正在尝试使用以下样式将笔划的宽度设置为 0：

```
.link {                                                                                                               
   stroke: #6E6E6E;                                                                                                    
   stroke-width: 0px;                                                                                                  
} 
```

这在 Chrome、Safari 和 Android 上的移动版 Chrome 中运行良好。但是，它不适用于 Android Mobile 浏览器（默认浏览器）。笔划宽度显示为 1px 而不是 0px。我试过*-webkit-stroke-width: 0px;* 但这也不能解决问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T19:52:13.410

我在旧版 Chrome 中遇到过这个错误，请参阅[https://code.google.com/p/chromium/issues/detail?id=15461](https://code.google.com/p/chromium/issues/detail?id=15461)

尝试两种解决方案：`stroke: none`或`stroke-width: 0.000001`

# javascript - 悬停文本以获得完整形式

> ID：15370619
> 
> 赞同：0
> 
> 时间：2013-03-12T19:41:07.930
> 
> 标签：javascript, jquery, html, jquery-ui, javascript-events

当我将鼠标悬停在立方体下方的文本时.....我需要显示一个带有文本的小窗口....我从 js 得到文本但不知道如何与悬停功能集成....可以你告诉我如何实现它......在下面提供我的代码......当我将鼠标悬停在 CRM 上时，它应该显示客户关系管理......在下面提供我的代码......当我悬停功能工作正常时将鼠标悬停在文本框上......但我不知道如何获取立方体下方的文本......我已经包含了 onmouseover 和 onmouseout 功能......但我不知道如何实现立方体下方的文字

```
$('document').ready(function() {
    window.setTimeout(function() {
        $('.cubeCell').each(function () {
            var htmlText = $(this).attr('data-text');
            $(this).append('<div class="cubeTextStyle">' + htmlText + '</div>');
        });
    }, 600);
});

<script type="text/javascript">
                function showStock(ii) {
                    var sh = $(ii).parent().find($('.divStock'));
                    var sharrow = $(ii).parent().find($('.stockarrow'));
                    sh.show();
                    sharrow.show();

                }
                /**
                 * hide stock
                 */
                function hideStock(ii) {
                    var shs = $(ii).parent().find($('.divStock'));
                    var sharrows = $(ii).parent().find($('.stockarrow'));
                    shs.hide();
                    sharrows.hide();
                }
                </script> 
```

HTML：

```
<div class="cubeCell" data-text="CRM" class="desktopContactImage cubeCell"
                      data-caption="&lt;a style='padding-left: 40px; font-size: 14px; color: grey;' href='/Inventory/Partnumber/?ps=list' &gt;Register&lt;/a&gt; &lt;div&gt; &lt;a style='padding-left: 40px; font-size: 14px; color: grey;' href='/Bom/Bom/?ps=list' &gt;Demo&lt;/a&gt; &lt;/div&gt; &lt;a style='padding-left: 40px; font-size: 14px; color: grey;' &gt;Reports&lt;/a&gt;"
                      data-image="http://intra.defie.co/images/Desktop_icons_02.07.13/guest.png"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:50:33.470

首先，请不要提供这样的小提琴......永远，将不同的语言分成相关的框，并使用资源选项卡链接到文件。它使我们的帮助变得更加清晰。

其次，不要包含不相关的代码，例如谷歌分析脚本，是的，您需要更多时间来格式化小提琴以用作示例，但您会得到更快的响应。

如果您只需将鼠标悬停在 CSM 上并在其下方显示“客户关系管理”，那么您可以执行以下操作。

```
$('.cubeTextStyle').hover(
   function(){
      $(this).append('<span>Customer Relationship Management</span>');
   },
   function(){
      $('.cubeTextStyle span').remove();
   }
); 
```

我没有使用你的小提琴，因为我不会筛选你所有的代码，但请看这个[新的基本小提琴](http://jsfiddle.net/vACa7/)。

# javascript - 正则表达式：如果 foo 是单词或在 URL 内，则替换它

> ID：15370623
> 
> 赞同：4
> 
> 时间：2013-03-12T19:41:24.950
> 
> 标签：javascript, regex

鉴于这种：

```
str = "foo myfoo http://thefoobar.com/food is awesome";
str.replace(magicalRegex, 'bar'); 
```

预期结果是：

```
"bar myfoo http://thebarbar.com/bard is awesome" 
```

我得到了这个`\b(foo)\b`部分，但我不知道如何`foo`从一个 url 中匹配和捕获。出于这些目的，假设 url 总是以`http`.

有什么帮助吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T20:51:10.707

您可以使用此代码（适用于您的示例，但尚未尝试使用更复杂的输入）：

```
str = 'foo myfoo http://thefoobar.com/food is awesome';
str = str.replace(/\bfoo\b/g, 'bar');
while (/http:\/\/[^\s]*?foo/.test(str))
    str = str.replace(/(http:\/\/[^\s]*?)?foo/g, function($0, $1) {
        return $1 ? $1 + 'bar' : $0;
    });
console.log(str); 
```

### 输出：

```
bar myfoo http://thebarbar.com/bard is awesome 
```

### 现场演示：http: [//ideone.com/8xGy2h](http://ideone.com/8xGy2h)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T20:44:14.597

我认为您将不得不采取多步骤才能正确完成这项工作。基本上你在这里做了两个单独的（尽管相似的）正则表达式替换：

1.  字符组“foo”的全局替换，如果它出现在链接中，并且
2.  字符串其余部分中***单词***“foo”的全局替换。

此代码将分别运行这两个步骤（首先是 URL，其次是字符串的其余部分）并给出最终替换：

```
var urlPattern = /(http:\/\/[^\s]+)/;
var urlFooPattern = /(foo)/g;
var globalFooPattern = /\b(foo)\b/g;

var str = "foo myfoo http://thefoobar.com/food is awesome";

var urlString = str.match(urlPattern)[0];
urlString = urlString.replace(urlFooPattern, "bar");

str = str.replace(urlPattern, urlString);

str = str.replace(globalFooPattern, "bar"); 
```

**注意：**这里假设字符串中只有一个 URL。. . 处理多个 URL 的可能性会更复杂一些：

1.  `var urlString = str.match(urlPattern)`使用数组捕获所有 URL
2.  通过遍历每个 URL 并在每个 URL 上执行单独的“foo 替换”来创建一个新数组
3.  循环遍历原始匹配数组并将其用作要被第二个数组中的更新值替换的模式

循环遍历由返回的所有 URL `var urlString = str.match(urlPattern)`，分别替换其中的“foo”，然后再次循环遍历，然后一次替换一个原始字符串。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-12T19:48:21.973

如果您想使用边界仅匹配“foo”而不匹配“myfoo”，则需要使用 or 操作 ( `|`) 来匹配 url——如果“foo”包含在 url 的中间，则必要时，它不会被单词边界包围。

像这样的东西应该适合你：

```
\b(foo)\b | http\S*(foo)\S* 
```

如果需要，您可以在[此处运行进一步的测试。](http://regexpal.com/)

* * *

编辑：抱歉，我认为 OP 正在寻求捕获这些单词和 URL。据我所知，不会捕获 URL 的根以进行替换的后向正则表达式在 JS 中并不天生支持，但可以经常使用简单的函数进行复制，[请参阅此处了解如何执行此操作的讨论](http://blog.stevenlevithan.com/archives/mimic-lookbehind-javascript)。

# android - MapFragment 和 Camera 似乎在同一个 Activity 中相互干扰

> ID：15370624
> 
> 赞同：3
> 
> 时间：2013-03-12T19:41:32.087
> 
> 标签：android, android-camera, mapfragment

我正在尝试将 Google Maps Android API v2 中的 MapFragment 与相机预览结合使用。我需要能够在相机预览和 MapFragment 之间切换，但我无法让它工作。

对于相机预览，我从[示例指南](http://developer.android.com/guide/topics/media/camera.html)中复制了 CameraPreview 类。当我想查看相机预览时，我将 CameraPreview 类的一个实例添加到我的活动中，使用

```
CameraPreview mPreview = new CameraPreview(this); 
addContentView(mPreview, new LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.MATCH_PARENT)); 
```

当我不使用 MapFragment 时，这可以正常工作。

对于 MapFragment，我已通过以下方式将其添加到我的活动布局中

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/activity_main"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    tools:context=".MainActivity" >

    <fragment
        android:id="@+id/map"
        android:layout_width="fill_parent"
        android:layout_height="match_parent"
        class="com.google.android.gms.maps.MapFragment" />

</LinearLayout> 
```

没有 CameraPreview 也能正常工作。我可以使用（例如隐藏）隐藏和取消隐藏 MapFragment：

```
FragmentTransaction ft = getFragmentManager().beginTransaction();
ft.hide(map_fragment);
ft.commit(); 
```

但是，当我尝试将两者结合使用时，问题就出现了，即隐藏 MapFragment，然后将 CameraPreview 实例添加到我的活动中。隐藏不起作用，似乎 MapFragment 以某种方式劫持了 CameraPreview 并具有优先权。一个奇怪的功能是，如果我强制屏幕进入睡眠状态然后将其唤醒，当它唤醒时，CameraPreview 就在那里。如果我反过来做，即先添加CameraPreview，然后隐藏MapFragment，行为是一样的。

仅供参考：我正在运行 Android 版本 4.1.1 的三星 Galaxy Note 2 LTE 上测试该应用程序。

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-09T08:45:00.103

在您的相机预览上使用 setZOrderOnTop(boolean)，例如 mPreview.setZOrderOnTop(true);。这个对我有用。

# php - 如何按所选选项显示 div？

> ID：15370629
> 
> 赞同：0
> 
> 时间：2013-03-12T19:41:47.060
> 
> 标签：php, javascript, ajax

我有一个选择列表，其中包含我需要保留的房间的客人数量，代码是：

```
<select name="txtHotelGuestNO" id="txtHotelGuestNO" class="hotels" onchange="show_room_choose()">
    <? for($i=1;$i<=100;$i++) echo "<option value=$i>$i</option>"; ?>
    </select> 
```

如果我选择 2 个人，我只需要显示 id 为*single*和*double*的 div，如下所示：

```
 <div id="single"> ... code</div>
<div id="double">... code</div> 
```

如果我选择超过 2 个，我们需要显示**所有**房间类型 div。

如果我选择 1 个人，我只需要显示**single**的 div 。

如何使用 ajax 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T19:47:40.047

如果你可以使用 jQuery：

```
// Wait for DOM to be ready (if you are including the JavaScript before the HTML, ie the <head>)
$(document).ready(function()) {
    // listen for when the user changes the value in the <select> dropdown
    $('#txtHotelGuestNO').change(function() {

        // get value selected
        var value = parseInt($(this).val(), 10);  // parseInt() converts the value to integer (base 10)

        if (value < 2) {
            // single
            $('#single').show();
            $('#double').hide();
        } else {
            // double
            $('#double').show()
            $('#single').hide();
        }
    });
}); 
```

您可以了解有关使用的 jQuery 方法的更多信息：

*   `.change()`：[http ://api.jquery.com/change/](http://api.jquery.com/change/)
*   `.val()`：[http ://api.jquery.com/val/](http://api.jquery.com/val/)
*   `.show()`：[http ://api.jquery.com/show/](http://api.jquery.com/show/)
*   `.hide()`：[http ://api.jquery.com/hide](http://api.jquery.com/hide)
*   `.ready()`：[http ://api.jquery.com/ready/](http://api.jquery.com/ready/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T19:58:38.817

将两个 div 设置为 display:none 并将选择的值发送到您的 onchange 函数：

```
function show_room_choose(value) {
     if(value==1) { 
          document.getElementById("single").style.display = "block"; 
          document.getElementById("double").style.display = "none";
     } else if(value==2) { 
          document.getElementById("single").style.display = "block"; 
          document.getElementById("double").style.display = "block";
     } else  { 
          document.getElementById("single").style.display = "block"; 
          document.getElementById("double").style.display = "block";
          // add whatever other divs to show here
     }
} 
```

# android - EditTextPreference 单行

> ID：15370630
> 
> 赞同：3
> 
> 时间：2013-03-12T19:41:55.060
> 
> 标签：android, android-preferences, edittextpreference

无论如何要制作一个 EditTextPreference 单行吗？我认为默认情况下没有属性可以做到这一点。有必要重写对象吗？有人做过吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-12T19:50:05.870

也许`android:singleLine="true"`在布局中：

[将edittext限制为单行](https://stackoverflow.com/questions/10978038/restrict-edittext-to-single-line)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-04-12T14:27:51.140

以下代码现在适用于`androidx.preferences >= 1.1.0-alpha01`：

```
 EditTextPreference author_name_pref = findPreference(getString(R.string.author_name_key));
        if (author_name_pref != null) {
            author_name_pref.setOnBindEditTextListener(new EditTextPreference.OnBindEditTextListener() {
                @Override
                public void onBindEditText(@NonNull EditText editText) {
                    editText.setSingleLine();
                }
            });
        } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T19:49:57.637

您可以通过调用来获取`EditText`支持您的内容。然后用它做任何你喜欢的事情，比如使用常规：`EditTextPreference``getEditText()``EditText`

```
EditTextPreference pref=new EditTextPreference(context);
EditText editText=pref.getEditText();
editText.setSingleLine(true); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T20:49:17.470

`<EditTextPreference>`支持可用于 的属性`<EditText>`，因此您应该能够使用`android:inputMode`等来控制`EditText`小部件的行为。

# c# - LINQ：唯一名称列表

> ID：15370633
> 
> 赞同：1
> 
> 时间：2013-03-12T19:42:07.810
> 
> 标签：c#, linq

（简化）

我有一个全名字符串列表。前**6 个**字符始终是**名字**。

```
List<string>()
  fredXXsmith
  aliceXFloor
  billXXjohnson
  fredXXperterson 
```

如何从 LINQ 中的这些字符串中获取唯一名字的列表？

```
 fredXX 
  aliceX 
  billXX 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T19:43:21.327

您只需要将全名投影到子字符串，然后使用`Distinct`：

```
var firstNames = names.Select(x => x.Substring(0, 6))
                      .Distinct(); 
```

这是假设（给定您的示例）您*始终*至少有 6 个字符（用 X 填充）。如果`ToList`你想要一个`List<string>`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T19:44:18.597

```
names.Select(fullName => fullName.Substring(0, 6)).Distinct(); 
```

`Substring`为您提供前六个字符，并`Distinct`为您提供独特的结果。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T19:46:39.600

```
names.Select(x => x.Substring(0,6)).Distinct() 
```

# php - 如何在 Apache 服务器中设置 CodeIgniter .htaccess 文件

> ID：15370635
> 
> 赞同：0
> 
> 时间：2013-03-12T19:42:15.610
> 
> 标签：php, apache, codeigniter

我在 Windows 7 操作系统上安装了 Apache 2.2、Php 5.4.5 和 Mysql 5.5.27。我的本地主机位置是 G:/local_server。我已经下载了 CodeIgniter_2.1.3 并解压到 local_server 并重命名 CodeIgniter。我在 CodeIgniter 文件夹中创建了一个 .htaccess 文件，并通过以下代码：

```
<IfModule mod_rewrite.c>
# Turn on URL rewriting
RewriteEngine On

# If your website begins from a folder e.g localhost/my_project then 
# you have to change it to: RewriteBase /my_project/
# If your site begins from the root e.g. example.local/ then
# let it as it is
RewriteBase / CodeIgniter/

# Protect application and system files from being viewed when the index.php is missing
RewriteCond $1 ^(application|system|private|logs)

# Rewrite to index.php/access_denied/URL
RewriteRule ^(.*)$ index.php/access_denied/$1 [PT,L]

# Allow these directories and files to be displayed directly:
RewriteCond $1 ^(index\.php|robots\.txt|opensearch\.xml|favicon\.ico|assets|forums)

# No rewriting
RewriteRule ^(.*)$ - [PT,L]

# Rewrite to index.php/URL
RewriteRule ^(.*)$ index.php/$1 [PT,L]
</IfModule> 
```

然后我从 application/config/config.php 更改了以下行

```
$config['index_page'] = 'index.php';  to $config['index_page'] = '';

$config['uri_protocol'] = 'AUTO'; to $config['uri_protocol'] = 'REQUEST_URI'; 
```

我还从 Apache httpd.conf 中删除了 # 以下行：

```
LoadModule rewrite_module modules/mod_rewrite.so 
```

但我仍然无法从 CodeIgniter 中隐藏 index.php 文件。:(

帮助表示赞赏。:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-12T21:54:34.473

这是我的好'ol可信赖的Codeigniter .htaccess文件：

```
RewriteEngine On
  RewriteBase /
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond $1 !^(templates|plugins)
  RewriteRule ^(.*)$ index.php/$1 [L] 
```

然后将您的基础重写为您需要的任何内容，添加您需要访问的目录（我在那里有模板和插件），您应该一切顺利。

当然，还要确保 Apache 启用了 mod_rewrite，否则你将无处可去！

# c# - 界面 方法 其中 T2 : T

> ID：15370637
> 
> 赞同：0
> 
> 时间：2013-03-12T19:42:28.180
> 
> 标签：c#, .net, generics

看看这个片段

```
public interface IExample<T>
{
    IExample<T> Exposes<TInclude>() 
        where T : TInclude;
} 
```

我希望编译时强制 T 可转换为 TInclude。可以进行运行时检查，但希望它是编译时。

上面抱怨 T 没有定义。

有什么建议么？我试图用 C# 泛型做的事情是可能的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T20:12:00.707

改写你的问题：

> 可以创建一个`where`子句来强制执行`TInclude`是`T`或派生自 的任何类型的约束`T`。我希望强制执行“相反方向”约束：即`TInclude`或`T`任何“基本类型”的`T`. 这可能吗？

不，C# 不支持这种约束。对不起。

> 有什么建议么？

Scala 支持我认为的那种约束。和 Java 一样，尽管 Java 的做法有点奇怪。但我想你不想改变语言。

你能更详细地描述你真正想用这个界面表示的概念吗？如果我们知道你想要做什么，那么给你实用的建议会更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T19:48:48.050

您可以将类型约束移动到接口级别，如下所示：

```
public interface IExample<T, U>
    where T : U
{
    IExample<T, U> Exposes();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T20:15:21.557

它可能有一天会实现：见[1.2 广义约束](http://research.microsoft.com/pubs/64042/ecoop06.pdf)

# java - Android上的Google Maps API无法正常工作

> ID：15370641
> 
> 赞同：1
> 
> 时间：2013-03-12T19:42:41.973
> 
> 标签：java, android, google-maps-api-2

我正在尝试将地图添加到我的 android 应用程序。
但是我收到了下面发布的错误。

我已经安装了 google play 服务，并且还添加
了我的应用程序所需的依赖项以支持地图。

我已将所需的 api 密钥添加到清单中，
在应用程序标记后添加了以下行

> 使用库 android:required="true"
> android:name="com.google.android.gms"

（以下在应用程序标签的元素中，而不是属性中）
知道我做错了什么吗？

```
 03-12 15:31:11.457: E/AndroidRuntime(12833): FATAL EXCEPTION: main
 03-12 15:31:11.457: E/AndroidRuntime(12833): java.lang.ExceptionInInitializerError
 03-12 15:31:11.457: E/AndroidRuntime(12833):   at java.lang.Class.newInstanceImpl(Native Method)
 03-12 15:31:11.457: E/AndroidRuntime(12833):   at java.lang.Class.newInstance(Class.java:1319)
 03-12 15:31:11.457: E/AndroidRuntime(12833):   at android.app.Instrumentation.newActivity(Instrumentation.java:1054)
 03-12 15:31:11.457: E/AndroidRuntime(12833):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2097)
 03-12 15:31:11.457: E/AndroidRuntime(12833):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
 03-12 15:31:11.457: E/AndroidRuntime(12833):   at android.app.ActivityThread.access$600(ActivityThread.java:141)
 03-12 15:31:11.457: E/AndroidRuntime(12833):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
 03-12 15:31:11.457: E/AndroidRuntime(12833):   at android.os.Handler.dispatchMessage(Handler.java:99)
 03-12 15:31:11.457: E/AndroidRuntime(12833):   at android.os.Looper.loop(Looper.java:137)
 03-12 15:31:11.457: E/AndroidRuntime(12833):   at android.app.ActivityThread.main(ActivityThread.java:5041)
 03-12 15:31:11.457: E/AndroidRuntime(12833):   at java.lang.reflect.Method.invokeNative(Native Method)
 03-12 15:31:11.457: E/AndroidRuntime(12833):   at java.lang.reflect.Method.invoke(Method.java:511)
 03-12 15:31:11.457: E/AndroidRuntime(12833):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
 03-12 15:31:11.457: E/AndroidRuntime(12833):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
 03-12 15:31:11.457: E/AndroidRuntime(12833):   at dalvik.system.NativeStart.main(Native Method)
 03-12 15:31:11.457: E/AndroidRuntime(12833): Caused by: java.lang.NoClassDefFoundError: com.google.android.gms.maps.model.LatLng 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:38:06.140

所以几天前我破解了这个问题，这就是我如何使它工作的。我删除了项目部分中谷歌播放库的所有痕迹。接下来我重新导入了 google play 库，但这次我也单击了将其复制到我的工作区的选项。接下来在编译路径中添加了这个库，它工作了。

# c++ - 使用索引安全的方式迭代 STL 容器以避免使用锁？

> ID：15370644
> 
> 赞同：1
> 
> 时间：2013-03-12T19:42:48.583
> 
> 标签：c++, performance, stl, locking

想知道以下列方式迭代 STL 容器（例如向量）是否安全，以避免锁定读/写，但只允许任何“写入”线程进行 push_back() 操作。

```
for (size_t i = 0; i < vec.size(); i++)
{
   const T& t = *vec[i];
   // do something with t
} 
```

我知道迭代器可能会因容器的更改而失效，但也许如果我们确保初始容器大小足够大以供将来添加，那么在不锁定读取或写入的情况下迭代元素也应该是安全的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T20:23:40.423

> 想知道以下列方式迭代 STL 容器（例如向量）是否安全，以避免锁定读/写，但只允许任何“写入”线程进行 push_back() 操作。

不要，这不是线程安全的。考虑一个试图读取一个值并进入当前缓冲区的线程。此时第二个线程正在增长缓冲区，并且在第一个线程获得指向缓冲区的指针之后，但在它实际读取值之前，第二个线程释放缓冲区的内容。第一个线程正在读取死对象，这是未定义的行为。

将问题限制为`reserve()`-ed 向量（即避免增加缓冲区的问题）该方法仍然不是线程安全的。中的代码`push_back()`将执行类似于：

```
template <...>
class vector {
   T *begin,*end,*capacity;   // common implementation uses 3 pointers

   void push_back(T value) {
       if (end == capacity) { /* grow vector and insert */ }
       else {
          new (end) T(value);
          ++end;
       }
   }
}; 
```

这里的问题是，如果没有同步机制，编译器可以重新排序指令，递增`end`并将其存储到内存中，然后调用`T`缓冲区元素的构造函数。如果发生这种重新排序，那么您的阅读器线程可能会看到一个`size()`包含当前存储的值的值，但该值尚未在向量中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T19:45:12.750

据我所知，您不应该编写代码来依赖它作为实现细节，并且它不是向量导出 API 的一部分。如果它有记录的行为，你可以依赖它，如果不是，那么不要这样做。任何依赖于实现而不是 API 记录部分的内容都可能在不同平台和同一平台上不同版本的工具上发生变化。

此外，来自@GManNickG 的评论-> 您将在调用 size() 时遇到**竞争条件**，因为它将被修改和读取而不会在此处锁定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T21:01:57.197

你不能依赖关于迭代器不会失效的建议（因为还有很多空间）。为此，您需要 shared_mutex 和 shared_lock 。（[使用示例](https://stackoverflow.com/questions/989795/example-for-boost-shared-mutex-multiple-reads-one-write)）

# python - Python ReadProcessMemory 没有读取足够的字节

> ID：15370646
> 
> 赞同：1
> 
> 时间：2013-03-12T19:43:01.860
> 
> 标签：python, memory, operating-system, ctypes

好吧，你们所有`ctypes`的大师都在那里...

我有一个每秒读取内存地址一百次的 python 脚本。存储在此内存地址的值表示一个无符号整数。该值随时间增加。不幸的是，当它通过 2^8、2^16 或 2^24 时，ReadProcessMemory 调用没有读取足够的字节来获取更大的整数。事实上，它似乎在第一次读取后没有读取正确数量的字节。

这是代码片段：

```
from time import sleep
from ctypes import *
from struct import *
pid = 0x0D50
op = windll.kernel32.OpenProcess
rpm = windll.kernel32.ReadProcessMemory
ch = windll.kernel32.CloseHandle
PAA = 0x1F0FFF
addy = 0x38D53368
ph = op(PAA,False,int(pid)) #program handle
lastvalue = 0
while True:
   datadummy = b'.'*4
   buff = c_char_p(datadummy)
   bufferSize = (len(buff.value))
   bytesRead = c_ulong(0)

   if rpm(ph,addy,buff,bufferSize,byref(bytesRead)):
       value = unpack('I',datadummy)[0]
       if lastvalue != value:
           print value
           print bytesRead
           lastvalue = value
   sleep(.01) 
```

输出可能类似于：

```
191
c_ulong(4L) ////Here it got 4 bytes like I expected
211
c_ulong(1L) ////But here it only got 1 byte.?? It should be reading 4 bytes everytime
231
c_ulong(1L) 
251
c_ulong(1L)
15           ////This value is incorrect, because it only reads 1 byte. (should be 271)
c_ulong(1L) 
```

在我看来，它只是读取前一个调用需要读取的字节数......

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T09:22:09.620

该表达式在您的模块的代码对象中`b'.'*4`创建了常量`'....'`。这个常量与 Python 中的任何其他对象一样是一个对象，除了它*应该*是不可变的。您使用 ctypes 违反了该假设。例如：

```
>>> from ctypes import *
>>> def f():
...   s = b'.'*4
...   buf = c_char_p(s)
...   memset(buf, 0, 1)
... 
>>> f.__code__.co_consts
(None, '.', 4, 0, 1, '....')
>>> c_char_p(f.__code__.co_consts[5]).value
'....'

>>> f() # set the first character to "\x00"
>>> f.__code__.co_consts
(None, '.', 4, 0, 1, '\x00...')
>>> c_char_p(f.__code__.co_consts[5]).value
'' 
```

a的`value`描述符`c_char_p`期望缓冲区是一个以 null 结尾的字符串。第一个字节变为 0，`value`返回一个空字符串。现在看看 191 打包为 little-endian 的值`unsigned long`：

```
>>> import struct
>>> struct.pack("<L", 191)
'\xbf\x00\x00\x00' 
```

这应该可以解释为什么`bufferSize`在第二次传球时变成 1。

如果字符串已被保留，您可以使解释器崩溃或使其无法使用。CPython API 中使用的大多数字符串都是实习的，模块、类、函数、属性和变量的名称也是如此。例如：

```
>>> from ctypes import *
>>> import numbers
>>> s = 'numbers'
>>> b = c_char_p(s)
>>> r = memset(b, 100, 1)
>>> s
'dumbers'

>>> numbers.Number
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'numbers' is not defined

>>> globals()[s].Number
<class 'numbers.Number'> 
```

* * *

`create_string_buffer`是一种一次性创建和设置`char`数组的便捷函数：

```
>>> b1 = create_string_buffer('test1')
>>> type(b1)
<class 'ctypes.c_char_Array_6'>
>>> b1.value
'test1'

>>> b2 = (c_char * 6)()
>>> b2.value = 'test2'
>>> type(b2)
<class 'ctypes.c_char_Array_6'>
>>> b2.value
'test2'
>>> b2.raw
'test2\x00' 
```

您也可以传递对 an 的引用`unsigned long`：

```
value = c_ulong() 
bytesRead = c_ulong()
rpm(ph, addy, byref(value), sizeof(value), byref(bytesRead)) 
```

* * *

另一个违反不变性假设的例子。小于 256 的整数被缓存，即使用它们的代码总是引用同一组对象。所以如果你改变其中一个，它会影响整个系统：

```
>>> offset = sizeof(c_size_t)*2
>>> addr = id(200) + offset
>>> n = c_int.from_address(addr)
>>> n
c_long(200)
>>> n.value = 2000000
>>> 
>>> 200 + 1
2000001 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T20:03:27.677

好的，我想通了。我需要使用`ctypes.create_string_buffer(init_or_size[, size])`而不是`c_char_p`我尝试过的。

工作代码：

```
from time import sleep
from ctypes import *
from struct import *
pid = 0x0D50
op = windll.kernel32.OpenProcess
rpm = windll.kernel32.ReadProcessMemory
ch = windll.kernel32.CloseHandle
PAA = 0x1F0FFF
addy = 0x543A88F0
ph = op(PAA,False,int(pid)) #program handle
lastvalue = 0
while True:

   buff = create_string_buffer(4)
   bufferSize = (sizeof(buff))
   bytesRead = c_ulong(0)

   if rpm(ph,addy,buff,bufferSize,byref(bytesRead)):
       value = unpack('I',buff)[0]
       if lastvalue != value:
           print value
           print bytesRead
           lastvalue = value
   sleep(.01) 
```

# sql - 为什么 MySQL 查询没有在 Oracle 11g 中编译？

> ID：15370649
> 
> 赞同：0
> 
> 时间：2013-03-12T19:43:13.490
> 
> 标签：sql, oracle, oracle11g

您好我在 Oracle 11g 下调用 SQL 查询有问题。在 MySQL 下工作正常。

看看[SQLFIDDLE](http://www.sqlfiddle.com/#!4/93c94/1)：

```
(SELECT IF(c.name IS NULL, '- Unknow -', c.name) as name,
    v.site,
    SUM(CASE WHEN v.status_id = 1 THEN 1 ELSE 0 END) Total_SuspectedViolations,
    SUM(CASE WHEN v.status_id = 2 THEN 1 ELSE 0 END) Total_ConfirmedViolations,
    SUM(CASE WHEN v.status_id = 3 THEN 1 ELSE 0 END) Total_ConfirmedNoViolations,
    SUM(CASE WHEN v.status_id = 4 THEN 1 ELSE 0 END) Total_NotDetermined,
    COUNT(*) Total,
    0  'isAll'
FROM violations v LEFT JOIN country c ON c.name = v.country
GROUP BY c.name, v.site)
union(
SELECT IF(c.name IS NULL, '- Unknow -', c.name) as name,
    '- All -',
    SUM(CASE WHEN v.status_id = 1 THEN 1 ELSE 0 END) Total_SuspectedViolations,
    SUM(CASE WHEN v.status_id = 2 THEN 1 ELSE 0 END) Total_ConfirmedViolations,
    SUM(CASE WHEN v.status_id = 3 THEN 1 ELSE 0 END) Total_ConfirmedNoViolations,
    SUM(CASE WHEN v.status_id = 4 THEN 1 ELSE 0 END) Total_NotDetermined,
    COUNT(*) Total,
  1  'isAll'
FROM violations v LEFT JOIN country c ON c.name = v.country
GROUP BY c.name)
UNION (
SELECT '- All -',
    '- All -',
    SUM(CASE WHEN v.status_id = 1 THEN 1 ELSE 0 END) Total_SuspectedViolations,
    SUM(CASE WHEN v.status_id = 2 THEN 1 ELSE 0 END) Total_ConfirmedViolations,
    SUM(CASE WHEN v.status_id = 3 THEN 1 ELSE 0 END) Total_ConfirmedNoViolations,
    SUM(CASE WHEN v.status_id = 4 THEN 1 ELSE 0 END) Total_NotDetermined,
    COUNT(*) Total,
    1  'isAll'
FROM violations v LEFT JOIN country c ON c.name = v.country)
ORDER BY name, isAll DESC, site 
```

你知道这段代码有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T20:04:16.520

有几件事不对...

首先，`IF()`在 Oracle 中不是有效的语法。您需要将其更改为`CASE`声明。

其次，您不能使用“”来命名列。所以你需要从'isAll'中去掉''。

最后，您是按站点排序的，但实际上并未命名该列。

最终查询应如下所示：

```
(SELECT CASE WHEN c.name IS NULL THEN '- Unknow -' ELSE c.name END as name,
    v.site as site,
    SUM(CASE WHEN v.status_id = 1 THEN 1 ELSE 0 END) Total_SuspectedViolations,
    SUM(CASE WHEN v.status_id = 2 THEN 1 ELSE 0 END) Total_ConfirmedViolations,
    SUM(CASE WHEN v.status_id = 3 THEN 1 ELSE 0 END) Total_ConfirmedNoViolations,
    SUM(CASE WHEN v.status_id = 4 THEN 1 ELSE 0 END) Total_NotDetermined,
    COUNT(*) Total,
    0  isAll
FROM violations v LEFT JOIN country c ON c.name = v.country
GROUP BY c.name, v.site)
UNION (
SELECT CASE WHEN c.name IS NULL THEN '- Unknow -' ELSE c.name END as name,
    '- All -' as site,
    SUM(CASE WHEN v.status_id = 1 THEN 1 ELSE 0 END) Total_SuspectedViolations,
    SUM(CASE WHEN v.status_id = 2 THEN 1 ELSE 0 END) Total_ConfirmedViolations,
    SUM(CASE WHEN v.status_id = 3 THEN 1 ELSE 0 END) Total_ConfirmedNoViolations,
    SUM(CASE WHEN v.status_id = 4 THEN 1 ELSE 0 END) Total_NotDetermined,
    COUNT(*) Total,
  1  isAll
FROM violations v LEFT JOIN country c ON c.name = v.country
GROUP BY c.name )
UNION (
SELECT '- All -',
    '- All -' as site,
    SUM(CASE WHEN v.status_id = 1 THEN 1 ELSE 0 END) Total_SuspectedViolations,
    SUM(CASE WHEN v.status_id = 2 THEN 1 ELSE 0 END) Total_ConfirmedViolations,
    SUM(CASE WHEN v.status_id = 3 THEN 1 ELSE 0 END) Total_ConfirmedNoViolations,
    SUM(CASE WHEN v.status_id = 4 THEN 1 ELSE 0 END) Total_NotDetermined,
    COUNT(*) Total,
  1  isAll
FROM violations v LEFT JOIN country c ON c.name = v.country)
ORDER BY name, isAll DESC, site 
```

您可以在此 SQLFiddle 中进行测试：[http ://sqlfiddle.com/#!4/93c94/55](http://sqlfiddle.com/#!4/93c94/55)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T20:11:33.127

除了格兰特的回答，还有其他一些优化。

您可能想替换：

```
 CASE WHEN c.name IS NULL THEN '- Unknow -' ELSE c.name END 
```

和：

```
 Coalesce(c.name,'- Unknow -') 
```

此外，您正在多个级别进行聚合，并且有一种语法会更有效且更少冗长：GROUP BY ROLLUP()

Tim Hall 有一篇关于高级分组主题的非常好的文章：[http ://www.oracle-base.com/articles/misc/rollup-cube-grouping-functions-and-grouping-sets.php](http://www.oracle-base.com/articles/misc/rollup-cube-grouping-functions-and-grouping-sets.php)

如果您决定不使用 ROLLUP 则将 UNION 更改为 UNION ALL - UNION 有一个隐含的 distinct 在这里什么都不做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T20:12:58.817

这是运行的更新[SQL Fiddle](http://www.sqlfiddle.com/#!4/93c94/77)。请确保它仍然产生您期望的结果。

# iphone - iOS 从 NSString 中删除前 N 个单词

> ID：15370651
> 
> 赞同：1
> 
> 时间：2013-03-12T19:43:26.053
> 
> 标签：iphone, ios, nsstring, nsregularexpression

如何从 NSString 中删除前 N 个单词？

比如……“我去商店买牛奶。” 我想删除前三个单词以使其...

“商店买牛奶。” （请注意，“the”一词之前也没有空格）。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T19:47:47.270

这个问题可以改写为“我怎样才能得到一个从字符串中的第 4 个单词开始的子字符串？”，这更容易解决。我在这里还假设少于 4 个单词的字符串应该为空。

无论如何，这里的主力是`-enumerateSubstringsInRange:options:usingBlock:`，我们可以用它来找到第 4 个单词。

```
NSString *substringFromFourthWord(NSString *input) {
    __block NSUInteger index = NSNotFound;
    __block NSUInteger count = 0;
    [input enumerateSubstringsInRange:NSMakeRange(0, [input length]) options:(NSStringEnumerationByWords|NSStringEnumerationSubstringNotRequired) usingBlock:^(NSString *substring, NSRange substringRange, NSRange enclosingRange, BOOL *stop) {
        if (++count == 4) {
            // found the 4th word
            index = substringRange.location;
            *stop = YES;
        }
    }];
    if (index == NSNotFound) {
        return @"";
    } else {
        return [input substringFromIndex:index];
    }
} 
```

它的工作方式是我们要求`-enumerateSubstrings...`用单词进行枚举。当我们找到第 4 个单词时，我们保存它的起始位置并退出循环。现在我们有了第 4 个单词的开头，我们可以从该索引中获取子字符串。如果我们没有得到 4 个单词，我们就返回`@""`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T19:49:55.377

最好的答案在这里：[How to get the first N words from a NSString in Objective-C?](https://stackoverflow.com/questions/1752946/how-to-get-the-first-n-words-from-a-nsstring-in-objective-c)

您只需要更改范围。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T19:54:09.320

**解决方案#1：**按照手动方式进行操作：跳过前 n 个空格。

```
NSString *cutToNthWord(NSString *orig, NSInteger idx)
{
    NSRange r = NSMakeRange(0, 0);
    for (NSInteger i = 0; i < idx; i++) {
        r = [orig rangeOfString:@" "
                        options:kNilOptions
                          range:NSMakeRange(NSMaxRange(r), orig.length - NSMaxRange(r))];
    }
    return [orig substringFromIndex:NSMaxRange(r)];
} 
```

**解决方案#2**（更干净）：在空格处拆分字符串，连接`n - k`结果数组的最后一个元素，其中`k`是要跳过的单词数，`n`是总单词数：

```
NSString *cutToNthWord(NSString *orig, NSInteger idx)
{
    NSArray *comps = [orig componentsSeparatedByString:@" "];
    NSArray *sub = [comps subarrayWithRange:NSMakeRange(idx, comps.count - idx)];
    return [sub componentsJoinedByString:@" "];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T19:53:33.553

在我的脑海中，并不像凯文巴拉德的解决方案那样光滑：

```
NSString *phrase = @"I went to the store to buy milk.";

NSMutableString *words = [[NSMutableString alloc] init];
NSArray *words = [phrase componentsSeparatedByCharactersInSet:[NSCharacterSet whitespaceCharacterSet]];

NSMutableIndexSet *indexes = [NSMutableIndexSet indexSetWithIndex:1];
[indexes addIndex:2];
[indexes addIndex:3];
[words removeObjectsAtIndexes:indexes];

NSString *output = [words componentsJoinedByString:@" "]; 
```

我的代码不适用于单词之间不使用空格的语言（如普通话和其他一些远东语言）。

# solr - 从 DocsAndPositionsEnum 检索所有术语位置

> ID：15370652
> 
> 赞同：2
> 
> 时间：2013-03-12T19:43:26.787
> 
> 标签：solr, lucene

我正在升级到 Solr 4.1，并且无法使用新 API 检索位置和偏移信息。我的**索引**包含一个文档，其中一个字段包含字符串“**一只快速棕色狐狸跳过一只懒狗**”。我正在**查询**我的索引以查找**“一”**并尝试检索与“一”相对应的位置和偏移量。

这是代码片段

```
Terms terms=reader.getTermVector(docId, fieldName);
TermsEnum termsEnum= terms.iterator(TermsEnum.EMPTY);
    BytesRef term;
    while((term=termsEnum.next())!=null){
        String docTerm = term.utf8ToString();
        DocsAndPositionsEnum docPosEnum = termsEnum.docsAndPositions(null, null, DocsAndPositionsEnum.FLAG_OFFSETS);
        //Check if the current term is the same as the query term and if so
        //retrieve all positions (can be multiple occurrences of a term in a field) corresponding to the term
        if (queryTerms.contains(docTerm)) {
            int position;
            while((position=docPosEnum.nextPosition())!=-1){
                int start=docPosEnum.startOffset();
                int end=docPosEnum.endOffset();
                //Store start, end and position in an a list
                }
        }
    } 
```

内部 while 循环不正确。任何关于如何遍历 DocsAndPositionsEnum 中所有位置的指针将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-13T14:23:18.870

这对我有用

```
Terms terms=reader.getTermVector(docId, fieldName);
TermsEnum termsEnum= terms.iterator(TermsEnum.EMPTY);
BytesRef term;
while((term=termsEnum.next())!=null){
            String docTerm = term.utf8ToString();
            //Check if the current term is the same as the query term and if so
            //retrieve all positions (can be multiple occurrences of a term in a field) corresponding to the term
            if (queryTerms.contains(docTerm)) {
                DocsAndPositionsEnum docPosEnum = termsEnum.docsAndPositions(null, null, DocsAndPositionsEnum.FLAG_OFFSETS);
                docPosEnum.nextDoc();
                //Retrieve the term frequency in the current document
                int freq=docPosEnum.freq();
                for(int i=0; i<freq; i++){
                    int position=docPosEnum.nextPosition();
                    int start=docPosEnum.startOffset();
                    int end=docPosEnum.endOffset();
                    //Store start, end and position in a list
                    }
            }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T20:57:40.297

你没有迭代到`Document`你的`DocsAndPositionsEnum`.

```
 if (queryTerms.contains(docTerm)) {
        docPosEnum.advance(docId)
        int freq=docPosEnum.freq();
        for(int i=0; i<freq; i++){
            int position=docPosEnum.nextPosition();
            int end=docPosEnum.endOffset();
            //Store start, end and position in an a list
        }
    } 
```

`docPosEnum.nextDoc()`我猜你可能想存储从返回的docid 。

# git - 远程和本地之间的 git diff（忽略非推送提交）

> ID：15370653
> 
> 赞同：1
> 
> 时间：2013-03-12T19:43:29.227
> 
> 标签：git

我希望看到在 a 之后查看给定远程分支上更改的最佳方式`git fetch`，但我想忽略我已提交的更改（但不是推送/合并）。一般来说，我的流量是

```
 git commit
 git commit # something else
 git fetch
 git diff HEAD^^..origin/stable # HEAD^^ is the commit right before my two commits above 
```

想看看是否有办法处理该 HEAD^^，以向我展示我所知道的 origin/stable（在本例中为 HEAD^^）和提取后的 origin/stable 之间发生了什么变化。

基本上，我希望看到自上次获取以来提交到分支的所有新代码，忽略我在本地分支上的任何暂存（或未暂存）更改。

谢谢您的帮助。

## 解决方案

根据下面@carl-norum 的回答，我将以下内容添加到 .git/config

```
 [alias]
    fetch-diff = !git fetch 2>&1 | awk '/[a-z0-9]+[.][.][a-z0-9]+/ { print $1 }' | xargs -L 1 git diff 
```

现在使用`git fetch-diff`which 将获取并打印每个分支的差异。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T19:51:45.667

```
git diff HEAD^^ origin/stable 
```

应该做你正在寻找的东西。但是，该`fetch`操作应该为您提供一些输出，例如：

```
76e5999..0564fab  master     -> origin/master 
```

显示哈希值的变化`origin/master`（在我的例子中）。你可以这样做：

```
git diff 76e5999 0564fab 
```

并查看所有这些差异。

# macos - Office 2011 Mac：如何将现有的 excel 图表链接到 powerpoint？

> ID：15370654
> 
> 赞同：1
> 
> 时间：2013-03-12T19:43:29.827
> 
> 标签：macos, ms-office, powerpoint, excel-2011

如何将 excel 工作表中的现有图表链接到 powerpoint 演示文稿中，这样当我更改 excel 文件时，powerpoint 也会更改？

我找到了[http://goo.gl/GcQa8](http://goo.gl/GcQa8)但是当我使用这个“与 excel 数据链接的图表”时，powerpoint 中的图表将不会更新。

编辑：当在excel中更改图表“后面”的数据时，powerpoint中的图表将被更改。但是，当我在 excel 中更改图表的标题时，它不会在 powerpoint 中更改。

欢迎任何帮助。TIA，杰瑞

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-28T17:05:37.010

我似乎也无法链接图表。您必须复制并粘贴图表。图表未链接，但数据已链接。因此，当我更改（原始）数据时，PowerPoint 中的图表会更新。

# python - 如何访问 Windows 设备上下文中的像素阵列？

> ID：15370655
> 
> 赞同：0
> 
> 时间：2013-03-12T19:43:29.727
> 
> 标签：python, winapi, pywin32

我正在开发一个小型自动化工具，它可以拍摄屏幕快照，进行一些模板匹配，然后做出相应的响应。我以前为此使用过 PIL，但它的`ImageGrab`功能仅限于主显示器，我需要选择抓取连接到机器的任何显示设备。经过一些简短的谷歌搜索，我得到了以下代码作为解决方案。

## 截图代码

```
def capture_display():
    monitors = win32api.EnumDisplayMonitors(None, None)
    hwnd = monitors[1][1].handle
    l,t,r,b = monitors[1][2]
    w = r - l
    h = b

    hwndDC = win32gui.GetWindowDC(hwnd)
    mfcDC  = win32ui.CreateDCFromHandle(hwndDC)
    saveDC = mfcDC.CreateCompatibleDC()

    saveBitMap = win32ui.CreateBitmap()
    saveBitMap.CreateCompatibleBitmap(mfcDC, w, h)
    saveDC.SelectObject(saveBitMap)
    saveDC.BitBlt((0, 0), (w, h),  mfcDC,  (l, t),  win32con.SRCCOPY)
    saveBitMap.SaveBitmapFile(saveDC,  'screencapture.bmp') 
```

这非常有效。但是，它会保存图像。我需要的只是访问内存中的底层像素阵列。

当然，也可以选择只保存它，通过 PIL 从磁盘重新加载，然后获取像素数据，但是这样做的 IO 开销太大而无法使用。

现在，我在国外使用 Windows API，但是，通过阅读 MSDN，我发现了这一点：

> ### 内存设备上下文
> 
> 它是内存中的一个位数组，应用程序可以临时使用它来存储在正常绘图表面上创建的位图的颜色数据。因为位图与设备兼容，所以内存 DC 有时也称为兼容设备上下文。

所以，看起来这些 DC 确实存储了像素数据，但我只是不知道如何访问它。我如何获得该底层像素阵列？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T19:55:21.890

最简单的方法是使用`GetDIBits`函数（在 Python 中`ctypes.windll.gdi32.GetDIBits`）： http: [//msdn.microsoft.com/en-us/library/windows/desktop/dd144879 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd144879(v=vs.85).aspx)

# ios - 在表格视图中保存复选标记

> ID：15370657
> 
> 赞同：-1
> 
> 时间：2013-03-12T19:43:31.687
> 
> 标签：ios, objective-c, cocoa-touch, uitableview

嗨，我是 xcode 的新手，我一直在寻找我的问题的答案。我有一个表格视图，并且像任务列表一样设置了复选标记。我想知道当我从一个视图移动到另一个视图时如何在我的任务列表中保存复选标记。现在，当我转到我的应用程序中的另一个视图时，当我回到表格视图控制器时，它就消失了。我没有设置核心数据，也没有使用播放列表。这里的代码很简单：

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{  
    UITableViewCell *cell = [self.tableView cellForRowAtIndexPath:indexPath];
    [tableView deselectRowAtIndexPath:indexPath animated:YES];

    if (cell.accessoryType == UITableViewCellAccessoryNone) {
        cell.accessoryType = UITableViewCellAccessoryCheckmark;
    } else {
        cell.accessoryType = UITableViewCellAccessoryNone;
    }
} 
```

当我回到表格视图时，检查是否有一些简单的代码可以保存它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T05:48:24.040

我采用了自定义复选框，并在 cellForRowAtIndexPath 中写道：

```
 static NSString *CustomCellIdentifier = @"CustomCell";

       ReportAttendedBy *cell = (ReportAttendedBy *)[tableView dequeueReusableCellWithIdentifier:CustomCellIdentifier];

        if (cell == nil)
        {
            NSArray *nib;
            nib = [[NSBundle mainBundle] loadNibNamed:@"ReportAttendedBy" owner:self options:nil];
            for(id oneObject in nib)
                if([oneObject isKindOfClass:[ReportAttendedBy class]])
                    cell = (ReportAttendedBy *)oneObject;
        }

        [cell setSelectionStyle:UITableViewCellSelectionStyleNone];
        cell.textLabel.font= [UIFont fontWithName:@"Arial Rounded MT Bold" size:15.0];
        cell.textLabel.textColor=[UIColor whiteColor];

        ReportCreateOrView *repVw= [arrAttendedBy objectAtIndex:indexPath.row];
        cell.txtCustName.text = repVw.strCustomer;
        cell.txtCustName.tag = indexPath.row + 100;
        cell.txtCustName.delegate = self;
        [cell.txtCustName addTarget:self action:@selector(goAway:) forControlEvents:UIControlEventEditingDidEndOnExit];

        [cell.btnCheckBox addTarget:self action:@selector(checkboxClicked:) forControlEvents:UIControlEventTouchUpInside];
        cell.btnCheckBox.tag = indexPath.row + 5000;

        NSLog(@"repVw.strSelected=== %@",repVw.strSelected);

        if([repVw.strSelected isEqualToString:@"1"])
        {
            [cell.btnCheckBox.currentBackgroundImage isEqual:[UIImage imageNamed:@"ckeckbox_checked.png"]];

          //  cell.txtCustName.userInteractionEnabled = true;
        }
        else
        {
            [cell.btnCheckBox.currentBackgroundImage isEqual:[UIImage imageNamed:@"ckeckbox_unchecked.png"]];
            //cell.txtCustName.userInteractionEnabled = false;
        }

        return cell; 
```

我在 checkboxClicked 方法中使用 1 和 0 维护复选框值，以及更改按钮的图像

```
 -(IBAction)checkboxClicked:(id)sender
    {
        NSLog(@"tag=== %d",[sender tag] - 5000);

        int index= [sender tag] - 5000;
        UIButton *btn= (UIButton *)sender;

        ReportCreateOrView *repObj= [arrAttendedBy objectAtIndex:index];

        if([btn.currentBackgroundImage isEqual:[UIImage imageNamed:@"checkbox_unchecked.png"]])
        {
            [btn setBackgroundImage:[UIImage imageNamed: @"checkbox_checked.png"] forState:UIControlStateNormal];
            selCustId = [repObj.strCustId intValue];
            val = 1;
            [self updateAttendedBy]; //in this method i've written query to update value in table

        }
        else if([btn.currentBackgroundImage isEqual:[UIImage imageNamed:@"checkbox_checked.png"]])
        {
            [btn setBackgroundImage:[UIImage imageNamed: @"checkbox_unchecked.png"] forState:UIControlStateNormal];
            selCustId = [repObj.strCustId intValue];
            val= 0;
            [self updateAttendedBy];
        }
   } 
```

并且不要忘记在 viewWillAppear 中编写获取值的方法。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T20:01:34.903

如果您想在应用程序重新启动之间保留复选标记的状态，最好的解决方案似乎是使用核心数据。虽然乍一看对于您尝试做的事情来说似乎有点矫枉过正，但当您的应用程序变得更多时，它肯定会得到回报先进的。您已经拥有一个可靠的数据管理系统，您可以在此基础上进一步构建。
在这种情况下，您可能想要创建一个表示任务的实体，在最简单的情况下，您只需要两个属性：`NSString`名称和`BOOL`isCompleted。当然，所有这些都可以使用简单的 XML 实现，但从一开始就使用 Core Data 会更有利于未来。

您可以在此处找到有关 Core Data 的更多信息。 [http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/CoreData/cdProgrammingGuide.html](http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/CoreData/cdProgrammingGuide.html)

# c++ - c++ QuickSort不清楚

> ID：15370661
> 
> 赞同：1
> 
> 时间：2013-03-12T19:43:50.360
> 
> 标签：c++, sorting, quicksort

我试图了解快速排序机制，但到目前为止我无法弄清楚。根据维基百科，步骤是：

**1.**从列表中选择一个元素，称为枢轴。

**2.**重新排序列表，使所有值小于枢轴的元素都在枢轴之前，而所有值大于枢轴的元素都在它之后（相等的值可以去任何一种方式）。在此分区之后，枢轴处于其最终位置。这称为分区操作。

**3.**将上述步骤递归地应用于具有较小值的元素的子列表和具有较大值的元素的子列表。

这是代码：

```
 int partition(int arr[], int left, int right)
    {
          int i = left, j = right;
          int tmp;
          int pivot = arr[(left + right) / 2];

          while (i <= j) {

                while (arr[i] < pivot)
                      i++;
                while (arr[j] > pivot)
                      j--;
                if (i <= j) {
                      tmp = arr[i];
                      arr[i] = arr[j];
                      arr[j] = tmp;
                      i++;
                      j--;
                }
          }
          return i;
    }
     void quickSort(int arr[], int left, int right) {
          int index = partition(arr, left, right);
          if (left < index - 1)
                quickSort(arr, left, index - 1);
          if (index < right)
                quickSort(arr, index, right);
    } 
```

除了一件事，一切对我来说都是清楚的。为什么分区函数返回`i`而不是`j`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T05:02:15.283

[我在这里](http://login2win.blogspot.in/2011/06/what-is-quick-sort-algorithm-how-to.html)找到了这个程序（和输出）。看一看，

```
#include <iostream>
using namespace std;

const int INPUT_SIZE = 10;

// A simple print function
void print(int *input)
{
    for ( int i = 0; i < INPUT_SIZE; i++ )
        cout << input[i] << " ";
    cout << endl;
}

// The partition function
int partition(int* input, int p, int r)
{
    int pivot = input[r];

    while ( p < r )
    {
        while ( input[p] < pivot )
            p++;

        while ( input[r] > pivot )
            r--;

        if ( input[p] == input[r] )
            p++;
        else if ( p < r )
        {
            int tmp = input[p];
            input[p] = input[r];
            input[r] = tmp;
        }
    }

    return r;
}

// The quicksort recursive function
void quicksort(int* input, int p, int r)
{
    if ( p < r )
    {
        int j = partition(input, p, r);        
        quicksort(input, p, j-1);
        quicksort(input, j+1, r);
    }
}

int main()
{
    int input[INPUT_SIZE] = {500, 700, 800, 100, 300, 200, 900, 400, 1000, 600};
    cout << "Input: ";
    print(input);
    quicksort(input, 0, 9);
    cout << "Output: ";
    print(input);
    return 0;
}

OUTPUT:-
Input: 500 700 800 100 300 200 900 400 1000 600
Output: 100 200 300 400 500 600 700 800 900 1000 
```

# c# - 在列表框中插入列表

> ID：15370663
> 
> 赞同：-1
> 
> 时间：2013-03-12T19:43:56.320
> 
> 标签：c#, list, class, listbox

我是 C# 新手，我正在尝试在 C# 中进行探索，但是我尝试在列表框中添加一个列表。

我遇到的错误是：`Object reference not set to an instance of an object.` 知道如何解决这个问题吗？

```
namespace WindowsFormsApplication
{
    public partial class Form1 : Form
    {
        something a = something iets();

        public Form1()
        {
            InitializeComponent();
        }
// part1
        class something {

            public List<string> testing { get  ; set; }
        }

// part2
        private void button1_Click(object sender, EventArgs e)
        {
            a.testing.Add("programming");
            a.testing.Add("over");
            a.testing.Add("something");

            foreach (string i in a.testing)
            { listBox1.Items.Add(i); }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T19:47:12.623

`testing`您必须在访问它之前的某个时间点进行初始化。

也许您可以将构造函数添加到 something 类。

```
public something()
{
  testing = new List<string>();
} 
```

正如上面的评论所指出的，替换

```
something a = something iets(); 
```

下面是这个。

```
something a = new something(); //this should be the correct thing. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T19:52:04.080

我认为您得到 a 的原因是`NullReferenceException`类中的字符串列表`something`未初始化。您可以定义一个无参数构造函数并在那里初始化列表。

```
public something()
{
    testing = new List<string>();
} 
```

您可能还想知道类和属​​性名称的第一个字母通常大写（例如，`class Something`而不是`class something`）。

此外，您可以使用该`AddRange`方法而不是在 foreach 循环中一一添加字符串。

```
listbox1.Items.AddRange(a.testing.ToArray()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T19:50:33.000

您的类“某事”从不初始化列表。你应该做的是这个。

```
class something{
private List<string> _list;
public something(){
    _list = new List<string>();
}

public List<string> testing {get{return _list;} set{_list = value;}} 
```

}

或者在您的 a.testing.Add() 行之前，您应该执行 a.testing = new List();

# java - 编译使用 JBoss erai 的 GWT 代码时出错

> ID：15370666
> 
> 赞同：0
> 
> 时间：2013-03-12T19:44:02.780
> 
> 标签：java, gwt, errai

我在编译我的 gwt 应用程序时遇到问题，它使用 JBoss Errai，这是完整的堆栈跟踪：

[http://pastebin.com/U7X6w1gb](http://pastebin.com/U7X6w1gb)

似乎该错误是由以下原因引起的：

> RuntimeException：加载编组扩展时出错：org.jboss.errai.enterprise.rebind.ObserversMarshallingExtension

# c++ - 为什么我可以使用以 0 大小启动的数组：Char ch[0];

> ID：15370668
> 
> 赞同：1
> 
> 时间：2013-03-12T19:44:06.203
> 
> 标签：c++, arrays, char

这是我的代码：

```
#include<iostream>
using namespace std;
int main(){
    char ch[0];
    cin >> ch;
    cout << ch;
    return 0;
} 
```

输入1：

```
abcdefghijklmnopqrstuvwxyza 
```

输出1：

```
abcdefghijklmnopqrstuvwxyza 
```

（工作正常，但我不知道为什么）

输入2：

```
abcdefghijklmnopqrstuvwxyzab 
```

输出2：

```
abcdefghijklmnopqrstuvwxyzab_ 
```

（请求输入）

输入3：

```
abcdefghijklmnopqrstuvwxyzabc 
```

输出3：（运行时错误）

当 output2 请求输入时，我们放入 input2，输出与 output2 相同（再次请求输入），当我们将 input1 或 input2 放入其中时，也会出现 output1 或 output2

有人可以解释这种现象吗？为什么会发生？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-12T19:45:55.700

大小为 0 的数组无效：

> 如果常量表达式 (5.19) 存在，它应该是一个整数常量表达式并且它的值应该大于零。

如果您的编译器接受它，它只是一个非标准扩展。`-pedantic`GCC 接受它，但如果您添加选项，则会发出诊断：

```
warning: ISO C++ forbids zero-size array ‘arr’ [-pedantic] 
```

尽管如此，读取零大小的非标准数组无疑会给您带来不确定的行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T20:44:26.707

正如 stfrabbit 指出的那样，该标准*明确*禁止声明大小为零的数组。但是出于我们不会讨论的[原因](http://gcc.gnu.org/onlinedocs/gcc/Zero-Length.html)`gcc`，允许这种事情作为扩展。

那么发生了什么？那么，当是时候寻找可接受的重载`operator>>`并且`operator<<`编译器将其`char ch[0]`视为`char[]`然后退化为`char *`.

它找到一个重载`char *`并调用它。所以你现在正在破坏随机内存（从地址开始`ch`就是谁知道什么）。如果您以前没有处于未定义的行为领域，那么您现在处于未定义的行为领域。

一旦你处于未定义的行为领域，*任何事情*都会发生：该程序可能导致宇宙开始收缩，或者它可能导致*一亿……百万……美元*神奇地出现在你的银行账户中。

或者它可能会崩溃。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T19:59:02.127

基本上`char ch[0]`; 是内存中定义的地址。你将它传递给 Cin 它从输入到它的字符开始写入。然后，您传递相同的地址，它会尝试理解它。基本上打印每个字符，直到它运行到 0。

您必须对为什么会看到这种行为进行深入调查，但这完全是浪费时间。该行为未定义，无法保证它以任何方式可重复。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T22:32:53.013

大多数编译器只会将数组设置为具有真正的起始地址，但不会占用任何空间，因此堆栈或结构中的后续变量将从与 0 大小的数组根本不存在时相同的地址开始。这通常用作结构的最后一个成员，当分配 n 个字节时，结构会被填充。然后可以索引作为最后一个成员的数组以访问该填充而无需指针数学。

例如。

```
struct foo
{
    int a;
    int b;
    char c[0];
};

foo* f = malloc(sizeof(foo) + 50);

for (int i = 0; i < 50; ++i)
    f->c[i] = 57; 
```

sizeof foo 很可能是 8 但这并不重要，因为 c 是该结构的结束地址，无论该结构如何字节对齐/填充。

一些 Win32 API 利用了这一点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T12:01:02.570

您遇到了经典的缓冲区溢出问题。尽管定义零大小的数组不符合要求，但发生的情况是，您在堆栈上获得了一个具有默认对齐大小的变量（通常为 4 或 8）。

因此，当您开始读取该变量时，您将数据放入堆栈，它开始覆盖您的堆栈帧。这不是立即可见的，但是它会破坏您的返回地址。

所以代码执行读取（很好），然后写入（这也很好），然后尝试返回。如果返回地址已被破坏，则会出现分段错误。否则，这可能会继续被忽视。在最后一个示例中没有得到输出的原因是由于缓冲输出 - 程序在退出之前没有更改刷新缓冲区（因为它是在从 main 返回之后完成的）。

这是一个示例，您可以如何查看代码覆盖堆栈数据：

```
int main(int argc, const char *argv[])
{
    int dummy1 = 0xCDCDCDCDCDCDCDCD;
    int dummy2 = 0xCDCDCDCDCDCDCDCD;

    char badvar[0];

    cin >> badvar;
    cout << badvar << endl;
    cout << dummy1 << endl;
    cout << dummy2 << endl;
    cout << flush;

    return 0;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-12T19:54:19.503

您需要有可以存储输入值的数组，这绝对无法处理。

```
char ch[0]; 
```

这绝对是一个`Segmentation`错误。

```
$./a.out 
12345678901234567890
Segmentation fault (core dumped) 
```

您需要定义`ch`为输入所需的大小。

# url - 浏览器如何使用查询字符串缓存 301 重定向

> ID：15370690
> 
> 赞同：6
> 
> 时间：2013-03-12T19:45:10.847
> 
> 标签：url, redirect, http-headers, http-status-code-301, http-redirect

我希望将 301 重定向到应用程序以获取查询字符串参数的特定值。

例如：

*   `http://www.example.com/page?id=1`→ 重定向到新页面
*   `http://www.example.com/page?id=2`→ 呈现正常响应

浏览器如何缓存重定向？

具体来说，在访问第一个 URL 后，某些浏览器会开始为 301 重定向`id=2`，还是基于完整 URL 的重定向？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-03-28T18:45:02.487

浏览器肯定会缓存 301 重定向，因为它是永久重定向。基本上，您是在告诉浏览器永远不要查看原始 URL 并自动转到第二个 URL。任何搜索引擎都会发生同样的事情。如果您打算再次使用该原始 URL，请确保使用临时重定向。

> 具体来说，访问第一个 URL 后，某些浏览器会开始为 id=2 执行 301 重定向，还是基于完整 URL 的重定向？

不，浏览器应该完整地看到每个 URI，因此`page?id=1`是不同的 URL `Page1?Id=2`，301 重定向仅适用于第一个 url。

请记住，浏览器正在执行重定向并根据其对 HTTP 规范的解释实现自己的规则。如果浏览器中有任何错误，您可能会得到不可预知的结果，但简短的回答是它们是对不同 url 的不同请求，并且每个请求都有自己的 HTTP 状态代码，因此它们可以被视为单独的页面。

# sql-server - 如何搜索 SQL Server 中使用字段或表的所有位置

> ID：15370691
> 
> 赞同：2
> 
> 时间：2013-03-12T19:45:11.080
> 
> 标签：sql-server

我需要知道在我的 SQL Server 数据库中使用表/字段的所有位置。

我毕竟是对这个表/字段做任何事情的所有存储过程、触发器、函数等。

“查找”选项似乎没有这样做，我不敢相信这样做的唯一方法是编写查询......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T19:47:15.533

查询是我唯一知道的。我用这个：

```
SELECT DISTINCT
    o.name AS Object_Name,o.type_desc
    FROM sys.sql_modules        m 
        INNER JOIN sys.objects  o ON m.object_id=o.object_id
    WHERE m.definition Like '%WhateverIAmSearchingFor%' 
```

我很想看看是否有人发布了一个更好的查询，也许，我可以用它来替换它。我已经有很长时间了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-12T20:22:14.730

我使用 Red Gate 的非常古老但免费的工具。它称为 SQL 搜索。它可以通过简单地指定名称来搜索任何数据库对象。很棒的是它实际上是 SSMS 插件，因此您可以从 SSMS 中使用它。我什至将它与 SSMS 2012 一起使用。

PS我与红门没有任何关系

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T19:53:02.240

查看视图、函数、触发器、存储过程等：

```
SELECT DISTINCT SO.NAME
  FROM SYSOBJECTS SO INNER JOIN
       SYSCOMMENTS SC ON SC.ID = SO.ID
 WHERE SC.TEXT LIKE '%foo%' 
```

# android - 和引擎手势

> ID：15370697
> 
> 赞同：0
> 
> 时间：2013-03-12T19:45:40.497
> 
> 标签：android, andengine, gesture

我尝试在andengine中绘制手势我创建了这个：

```
 protected int getLayoutID() {
    return R.layout.gesture;
}

protected int getRenderSurfaceViewID() {
    return R.id.gesture_rendersurfaceview;
}

protected int getGestureOverlayViewID() {
    return R.id.gesture_GestureOverlayView;
} 
```

在 Gesture.xml 我这个：

```
<?xml version="1.0" encoding="utf-8"?>
<AbsoluteLayout 
xmlns:android="http://schemas.android.com/apk/res/android" 
android:orientation="vertical" 
android:layout_width="fill_parent" 
android:layout_height="fill_parent"
>
<org.anddev.andengine.opengl.view.RenderSurfaceView 
                                    android:id="@+id/gesture_rendersurfaceview"
            android:layout_width="240px" 
            android:layout_height="240px"
            android:layout_margin="10px" />

   <org.anddev.andengine.opengl.view.GestureOverlayView 
   android:id="@+id/gesture_GestureOverlayView"
android:layout_width="fill_parent" 
android:layout_height="0dip"
android:layout_weight="1.0" />

 </AbsoluteLayout> 
```

我用这个，通常是标准代码

```
 mLibrary = GestureLibraries.fromRawResource(this, R.raw.gestures);
    if (!mLibrary.load()) {
        finish();
    }

    GestureOverlayView gestures = (GestureOverlayView) findViewById(R.id.gesture_GestureOverlayView);

    gestures.addOnGesturePerformedListener(this); 
```

但是程序在 GestureOverlayView 手势 = (GestureOverlayView) findViewById(R.id.gesture_GestureOverlayView); 中崩溃，请问如何在 AndEngine 中适应？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-09T09:44:08.787

and-engine 中已经有一个手势检测器类可用

`org.andengine.input.touch.detector.SurfaceGestureDetectorAdapter`

您可以使用它进行滑动检测，但您的要求尚不清楚，但这可能会对您有所帮助。

```
protected void onCreate(Bundle pSavedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(pSavedInstanceState);

        this.mSGDA = new SurfaceGestureDetectorAdapter(this) {

            @Override
            protected boolean onSingleTap() {
                // onSurfaceGesture("Tap");
                return false;
            }

            @Override
            protected boolean onSwipeDown() {
                onSurfaceGesture("Swipe Down");
                return false;
            }

            @Override
            protected boolean onSwipeLeft() {
                onSurfaceGesture("Swipe Left");
                return false;
            }

            @Override
            protected boolean onSwipeRight() {
                onSurfaceGesture("Swipe Right");
                return false;
            }

            @Override
            protected boolean onSwipeUp() {
                onSurfaceGesture("Swipe Up");
                return false;
            }

            @Override
            protected boolean onDoubleTap() {
                // onSurfaceGesture("Double Tap");
                return false;
            }

        };

        this.mSGDA.setEnabled(true);
} 
```

并注册它

`this.mScene.setOnSceneTouchListener(this.mSGDA);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T17:35:23.493

鉴于您提供的信息相当有限，您的`GestureOverlayView`构造函数可能已损坏。

# xpath - 我可以使用 xpath 找到只有锚作为子项的段落吗？

> ID：15370699
> 
> 赞同：1
> 
> 时间：2013-03-12T19:45:48.220
> 
> 标签：xpath

是否可以使用 XPath 找到只有锚（和可选空格）作为子级的段落？我可以达到“//p[a and not(*[not(self::a)] or text())]”，如果段落和锚标记之间没有任何空格，它会很好地工作。

举一些具体的例子，我想要一个匹配这些的查询（目前只匹配第一个）：

```
    <p><a>链接</a></p>
    <p> <a>带前导空格的链接</a></p>
    <p><a>带有尾随空格的链接</a> </p>
    <p> <a>用前导和尾随空格链接</a> </p>

```

但与这些不匹配：

```
    <p>介绍文字<a>链接</a>结尾文字。</p>
    <p><a>链接</a>结尾文本。</p>
    <p>介绍文字<a>链接</a></p>

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T19:50:58.703

关闭。使用`normalize-space`：

```
//p[a and not(*[not(self::a)] or normalize-space(string-join(text(),"")))] 
```

`string-join`用于解决 normalize-space 仅接受单个字符串作为输入的事实。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T07:39:08.483

我是这样解决的：

您正在寻找`<p>`包含一个`<a>`元素并且其规范化文本等于`<a>`子元素的规范化文本的所有元素：

```
//p[a and normalize-space(.) = normalize-space(a)] 
```

对于您的示例，它将返回以下结果（[Demo](http://eval.in/12575)）：

```
0: <p><a>link</a></p>
1: <p> <a>link with leading spaces</a></p>
2: <p><a>link with trailing spaces</a> </p>
3: <p> <a>link with leading and trailing spaces</a> </p> 
```

使用您的特定示例数据，甚至可以节省第二个`normalize-space`功能：

```
//p[a and normalize-space(.) = a] 
```

但是，对于您要寻找的东西来说，这可能太脆弱了。这是 Xpath 1.0 兼容的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T20:37:57.377

我发现以下解决方案比@wst 的解决方案好一点，它也适用于 XPath 1.0：

```
//p[a and not(*[not(self::a)] or text()[normalize-space()])] 
```

# python - 定期删除 Python 良好实践中的长字典 / 列表？

> ID：15370703
> 
> 赞同：6
> 
> 时间：2013-03-12T19:45:59.297
> 
> 标签：python

我一直在写一个很长的脚本，偶尔会构建大的字典和/或列表，我想知道`del`在我用完它们后是否可以通过删除它们来提高性能。或者将这些对象留在周围由垃圾收集处理是正常的做法吗？这里的最佳做法是什么？谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-12T19:57:20.937

`del`不等同于 free(3)。它不会强制 Python 释放内存。它可能根本不会释放内存。您应该避免将其完全与内存使用相关联。

唯一要做的就是从其范围`del`中删除一个*名称。*（或者从集合中删除一个项目，或者删除一个属性。但我认为这不是你在这里谈论的内容。）

实际上，这：

```
del foo 
```

相当于这个：

```
del LOCAL_SCOPE['foo'] 
```

所以这不会释放任何内存：

```
massive_list = list(range(1000000))
same_massive_list = massive_list
del massive_list 
```

...因为它所做的只是删除*name* `massive_list`。底层对象仍然有另一个名称，`same_massive_list`所以它不会消​​失。 `del`不是控制 Python 内存管理的秘密钩子；这只是*要求*Python*调用*其内存管理的几种方法之一。

（顺便说一句，CPython 是 refcounted + cycle-collected，而不是垃圾收集。对象在对它们的最后一个引用消失*后立即*被释放。垃圾不会到处等待被清理。当然，其他实现会有所不同东西；例如，PyPy 是垃圾收集的。）

现在，如果您使用的名称是 list/dict/whatever 的*唯一*名称，那么`del`肯定会导致其引用计数降至零，因此它将被释放。 **但是**，由于`del`'s 语义实际上是关于删除*names*，所以在这种情况下我不会使用它。我只是让变量退出范围（如果可行），或者将名称重新分配给空白列表，或者`None`，或者对您的程序有意义的任何内容。您甚至可以就地清空列表，即使同一个列表有多个名称，这也可以工作：

```
foo = list(range(1000000))
bar = foo
foo[:] = []
# Both `bar` and `foo` still refer to the original list, but now it's empty 
```

你可以对 dict 做同样的事情`d.clear()`。

我`del`在名称上使用的唯一位置是在类或模块范围内，我暂时需要一些辅助值，但*真的*不想将它作为 API 的一部分公开。这确实很少见，但这是我遇到的唯一一个我真正想要“删除此名称”语义的情况。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T19:53:00.970

`del`通常是没有必要的。

在 CPython 中，当没有对它们的引用时，对象就会消失。`del`仅删除对对象的一个​​引用；如果还有其他对该对象的引用，它将一直存在，并且`del`实际上并没有改善您的记忆状况。

相反，简单地将变量重新分配给不同的对象（例如，在循环顶部创建一个新的空列表）也会*最终*减少对该对象的引用，隐含地执行与`del`. 如果此时没有对该对象的其他引用，它将立即被释放。

还要记住，当函数返回时，局部变量会消失，因此您不需要显式地`del`在函数中定义任何名称。

一个例外是循环引用，其中两个（或更多）对象相互引用，但实际上没有一个对象可以通过名称访问；Python 会定期对它们进行垃圾收集，但如果在处理完对象后打破循环，则可以更快地释放它们。（这可能只需要一个`del`！）不过，这很有用的情况可能非常罕见。

在 IronPyothon（在 .NET CLR 上运行）或 Jython（在 JVM 上运行）中，最佳内存管理策略可能不同，因为使用了底层 VM 的垃圾收集器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T20:27:44.040

Python 的优点之一（与 C 等语言相比）是，通常您不必担心内存管理的细节，您可以专注于程序的目的。

所以我的建议是不要打扰*，除非*你有理由这样做（例如 python 正在吃掉你所有的 RAM）。

# c# - 对二维数组中的字段进行排序

> ID：15370705
> 
> 赞同：-2
> 
> 时间：2013-03-12T19:46:06.997
> 
> 标签：c#, sorting

```
class Baby
{
     string Name;
     Birth Birthy;
}

class Birth
{
     String BirthCity
     string HospitalName;
     DateTime Birthday;
} 
```

我需要按**DateTime 生日对对象数组的 Birth 集合进行排序**

我在想类似的东西

```
Foreach(Baby...)
{
     Foreach(Birth....)
     {
         ...Sort(....)
     }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T20:21:24.327

听起来像是 linq 的工作

```
List<Birth> sorted = source.OrderBy(b => b.Birthday).ToList() 
```

或者如果您需要对婴儿进行分类

```
List<Baby> sorted = source.OrderBy(b => b.Birthy.Birthday).ToList() 
```

# sql-server - 启动项目，将 100 多个数据转换为 SQL 数据库。正确的方法是什么？

> ID：15370706
> 
> 赞同：1
> 
> 时间：2013-03-12T19:46:09.840
> 
> 标签：sql-server, ssis, dts, data-conversion

我们将有大约 200 个文件（csv、excel、PDF、屏幕抓取）都需要进入 SQL 数据库。所以大多数数据源都会有一个独特的程序

到目前为止，我们只有两个想法：

1.  编写代码以根据需要以编程方式加载每个数据源，并编写代码以根据需要插入（这是一种简单的方法，但可能最耗时）

2.  为每个文件编写一个 XML 映射，将列从源映射到目标 SQL DB 的列/表。但是编写代码来解释这个自定义 XML 映射文件会变得复杂吗？

我们应该考虑其他任何工具或方法吗？我虽然也许 SSIS 可以以某种方式提供帮助？这似乎是 BizTalk 的项目类型，对吗？不过太贵了。。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T00:32:49.907

正如 Pondlife 所提到的，在现实世界的解决方案中，随着需求的全部复杂性被揭示，程序化解决方案通常变得越来越难以维护和支持。这通常在前面并不明显。

我会选择一个好的 ETL 工具 - SSIS 通常是目前平衡典型标准的最佳选择。然后，您需要预算一定数量的人工日来处理每个输入。对于一个非常简单的输入，您最快可能会达到每个文件 0.5 个工作日（包括设计、构建和单元测试）。

您可以通过复制您的第一个包作为其他包的起点来节省一些时间。

对于像这样的“原始”输入，我通常只需将未更改的数据加载到暂存表中即可启动每个包。此时我将每一列加载为 unicode 文本。然后后续的数据流或数据包可以提取该数据并交付它。这种方法确实加快了调试、测试和审计的速度——一旦您信任您的文件加载，您就可以使用 SQL 查询暂存表。

顺便说一句，SSIS 包实际上是一个描述输入、转换和输出要求的 XML 文档 - 类似于您的第 2 点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T08:26:26.163

没有普遍的正确方法。仅对您的特定情况更容易才重要。我会选择阻力最小的路径。这意味着如果某些文件更容易用 xml 映射（可能是 csv、excel 等），我会为这些文件使用 xml 映射。对于 xml 映射不起作用的其他人，我会选择其他东西。

现实情况是，某些方法在一种类型的数据源上效果更好，而另一些方法在另一种类型上效果更好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T04:10:08.240

珀尔。只需破解每种文件类型以生成适合 bcp 加载到数据库中的分隔文件。通常你可以在 Perl 中使用正则表达式来抓取 XML 文件中的内容，但是如果你知道 XML 并且输入的格式确实很好，那么 Perl 有很多解析器可以将正确的 XML 转换为正确的数据。;-)

Windows 上的 Perl 也将通过 Ole 自动化 Excel。去过那里，做到了，工作与预期一样好。将文件另存为文本。也许迭代它来修复它。根据需要重复。

正如其他人所建议的那样，我不同意这种事情不适合编程。它不是完美的，但可以渐近地减少错误，而手动过程并非如此。

将您的脚本、输入和输出都保存在不同的目录中。这样，您可以使用 Perl（或其他）来计算文件并验证转换。如果你对你的名字和扩展名很小心，很容易看出还有什么要做。让您的脚本适用于所有内容，包括加载数据库，以便您可以在任何时候以幂等方式重新运行它。在您注意到数据库中的数据存在只能通过调整解析器来解决的问题之后，非常令人满意。

快乐的黑客。

# ember.js - 兄弟项目控制器

> ID：15370707
> 
> 赞同：3
> 
> 时间：2013-03-12T19:46:11.820
> 
> 标签：ember.js

我的模板中有类似的代码：

`{{#each items itemController="item"}}`

有没有办法在`itemController`其中一个 s 的实例中获取对兄弟 s 的引用`itemController`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-26T14:52:20.617

项目控制器很快就会消失（请参阅[此处](https://github.com/emberjs/rfcs/pull/15)并搜索`itemController`）。我建议您为您的用例做的是创建一个组件，如下所示：

```
App.XItemComponent = Ember.Component.extend({
  classNames: ['item'],

  actions: {
    startEdit: function(){
      this.set('beingEdited', true);
      this.set('disallowEdits', true);
    },
    finishEdit: function(){
      this.set('beingEdited', false);
      this.set('disallowEdits', false);
    }
  }
});

<script type="text/x-handlebars" data-template-name="components/x-item">
  {{ item }} 
  <button {{ action "startEdit" }} {{ bind-attr   
    disabled=disallowEdits}}>Edit</button>
  {{#if beingEdited}}
    <button {{ action "finishEdit" }}>Save</button>
  {{/if}}
</script> 
```

`disallowEdits`是组件将与所有其他组件共享的属性（通过创建组件的模板的控制器），并且`beingEdited`是不与任何人共享的本地组件属性。

然后，您可以在模板中使用该组件，如下所示：

```
<script type="text/x-handlebars" data-template-name="index">
  <ul>
    {{#each item in model}}
      <li>{{x-item item=item disallowEdits=disallowEdits }}</li>
    {{/each}}
  </ul>
</script> 
```

完整的工作示例[在这里](http://emberjs.jsbin.com/niceh/3/edit?html,js,output)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-26T12:52:15.300

您需要将有关具有特定状态的孩子的信息存储在父控制器中。看一个例子

```
App.Child = Ember.ObjectController.extend({
    isEdited: false,

    actions: {
        toggleEditingMode: function() {
            old = this.get('parentController.currentlyEditing');

            if(typeof old !== "undefined" && old != this) {
                old.set('isEdited', false);
            }

            this.set('parentController.currentlyEditing', this);
        }
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T21:08:09.360

我删除了这个答案，因为回想起来，虽然它在技术上是正确的，但实际上并不正确。

# python - 找不到 PyMaps 变量

> ID：15370709
> 
> 赞同：2
> 
> 时间：2013-03-12T19:46:16.363
> 
> 标签：python, google-maps-api-3

我正在使用 Google Maps API 研究 PyMaps，这是我从 [http://www.lonelycode.com/2008/12/04/google-maps-and-django/找到的示例代码](http://www.lonelycode.com/2008/12/04/google-maps-and-django/)

```
def showmap():
from pymaps import Map, PyMap # import the libraries

# Create a map - pymaps allows multiple maps in an object
tmap = Map()
tmap.zoom = 3

# Latitude and lognitude - see the getcords function
# to see how we convert from traditional D/M/S to the DD type
# used by Googel Maps

lat = 0.0
long = 0.0

# These coordinates are for Hong Kong
dlat = "22 15 0 N"
dlong = "114 10 60 E"

dlat = dcode.lat.split(" ")
dlong = dcode.long.split(" ")

# Convert the coordinates
lat = getcords(float(dlat[0]), float(dlat[1]), float(dlat[2]), dlat[3])
long = getcords(float(dlong[0]), float(dlong[1]), float(dlong[2]), dlong[3])

# Inserts html into the hover effect
pointhtml = "Hello!"

# Add the point to the map
point = (lat, long, pointhtml, icon.id)

tmap.setpoint(point)
tmap.center = (1.757537,144.492188)

# Put your own googl ekey here
gmap = PyMap(key=GOOGLE_KEY, maplist=[tmap])
gmap.addicon(icon)

# pymapjs exports all the javascript required to build the map!
mapcode = gmap.pymapjs()

# Do what you want with it - pass it to the template or print it!
return mapcode 
```

问题是我在运行程序时遇到错误，我得到“NameError：未定义全局名称'dcode'”到底什么是dcode，我在哪里可以找到它？是不是打错字了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T19:53:40.820

我的猜测是它应该是这样的：

```
# These coordinates are for Hong Kong
dlat = "22 15 0 N"
dlong = "114 10 60 E"

dlat = dlat.split(" ")
dlong = dlong.split(" ") 
```

如果您也没有在`getcords`任何地方导入该函数，您可能会在这里遇到麻烦。

```
# Convert the coordinates
lat = getcords(float(dlat[0]), float(dlat[1]), float(dlat[2]), dlat[3])
long = getcords(float(dlong[0]), float(dlong[1]), float(dlong[2]), dlong[3]) 
```

另外我建议不要将`long`其用作变量名，因为它是一种`int`类型。

```
In [98]: long?
Type:       type
String Form:<type 'long'>
Namespace:  Python builtin 
```

# php - 用于模糊搜索的 PHP 库？

> ID：15370710
> 
> 赞同：4
> 
> 时间：2013-03-12T19:46:16.300
> 
> 标签：php

我正在寻找一个 PHP 库，它允许用户基本上输入命令以使用真正的英语运行。基本上我希望用户能够执行以下操作：

`Please search for all users in Europe`这相当于一个`select * where users = 'Europe'`

或者我的意图的另一个例子：

`Lookup (Find) the email address for John Smith`

注意：如果你能说也很好`for John Smith, Jane Smith, and John Doe`

理想情况下，我希望这个库可以扩展，这样我就可以在某些事情出现后对需要发生的事情进行编程，`find,email`例如`search,users`

有人知道可以执行上述操作的 PHP 库吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T20:11:26.010

据我所知，目前没有用于基于自然语言查询进行搜索的库，无论是 PHP 还是任何其他编程语言（我假设您不能使用[IBM Watson](https://en.wikipedia.org/wiki/Watson_%28computer%29) :)）。

我认为可行的方法是**基于语法的解析器**和**模糊搜索**：

使用像[Jison](http://zaach.github.com/jison/)这样的解析器生成器，您可以在用户浏览器上解析和“理解”与生成语法对应的所有语句，将生成的查询或中间表示发送到服务器。

它比 PHP 解析器更好，因为用户可以在键入时立即获得反馈，而且它比提交表单并收到错误更令人沮丧。在这种情况下，查询解释将是 99% 正确的，但在许多情况下，完全正确的（从人类的角度来看）查询将被拒绝，因为语法没有预见到。

另一种情况，你可以做一些预处理，比如去除停用词、使文本小写、词干提取等，然后用全文搜索引擎进行搜索（Lucene 可能是最强大的，但它是在 Java 中的）。PostgreSQL[支持它](http://www.postgresql.org/docs/8.3/static/textsearch.html)，MySQL 也有一些全文搜索功能。还可以使用索引和对空格和标点符号进行标记化文本来构建基于基本 RDBMS 的原始引擎。

哪种方式取决于您的数据和各种预期查询的多样化和嘈杂程度。也可以尝试实现一种混合方式，即使用语法解析文本，是否失败使用全文搜索。

# php - 使用 OptionTree 列表项元框

> ID：15370712
> 
> 赞同：1
> 
> 时间：2013-03-12T19:46:32.620
> 
> 标签：php, wordpress, meta-boxes

我使用这个插件[http://wordpress.org/extend/plugins/option-tree/](http://wordpress.org/extend/plugins/option-tree/)来创建一些自定义元框。

我试图使用他们的 ID 嵌入多个 Vimeo 视频。这是我在编辑器上显示它的方式， - 工作并且似乎数据保存没有问题。

```
add_action( 'admin_init', 'portfolio_meta_boxes' );
function portfolio_meta_boxes() {
$works_meta_box = array(
'id'        => 'works_item',
'title'     => 'Portfolio Item',
'desc'      => 'Add your portfolio item here.',
'pages'     => array( 'bkmworks' ),
'context'   => 'normal',
'priority'  => 'high',
'fields'    => array(
  array(
    'id'          => 'vimeo',
    'label'       => 'Vimeo videos',
    'desc'        => '',
    'std'         => '',
    'type'        => 'list-item',
    'rows'        => '',
    'post_type'   => '',
    'taxonomy'    => '',
    'class'       => '',
    'settings'    => array( 
      array(
        'id'          => 'vimeo_id',
        'label'       => 'Vimeo Video ID',
        'desc'        => 'Insert your Vimeo video ID. Example: https://vimeo.com/<strong>57747054</strong>. Insert only the numbers in bold.',
        'std'         => '',
        'type'        => 'text',
        'rows'        => '',
        'post_type'   => '',
        'taxonomy'    => '',
        'class'       => ''
      )
    )
  )
)); ot_register_meta_box( $works_meta_box );} 
```

但是，我不明白如何将元框数据显示到列表中。我不精通PHP，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T00:04:59.030

这就是我完成这项工作的方式，也许这会对某人有所帮助。

```
<ul class="video-list">
<?php $repeatable_fields = get_post_meta($post->ID, 'vimeo', true); ?>
    <?php foreach ($repeatable_fields as $v) {
        echo '<li><iframe src="http://player.vimeo.com/video/' . $v['vimeo_id'] . '" width="450" height="338" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe></li>'; 
    } ?>
</ul> 
```

# d3.js - 如何格式化 d3 图中显示的值

> ID：15370713
> 
> 赞同：6
> 
> 时间：2013-03-12T19:46:34.100
> 
> 标签：d3.js, nvd3.js

我正在尝试更改 nvd3 离散条形图中条形图顶部显示的值的格式。我相信我做错了什么，我不知道。

这是图表 [http://jsfiddle.net/looneydoodle/PdpRq/的js小提琴](http://jsfiddle.net/looneydoodle/PdpRq/)

这是代码

```
var basicformat = d3.format(',f');
d3graph.selectAll('g.nv-bar text').each(function(d,i){
  this.text(basicformat(this.value));
}); 
```

**编辑：**

想出了如何做到这一点，尽管这可能是一个不好的方法。这是更新的小提琴：http: [//jsfiddle.net/looneydoodle/PdpRq/2/](http://jsfiddle.net/looneydoodle/PdpRq/2/)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-12T20:51:26.750

看起来discreteBarChart 有一个`valueFormat()`方法。您可以在[第 232 行的 nvd3 源代码中看到它的定义。](https://github.com/novus/nvd3/blob/master/src/models/discreteBarChart.js)

因此，要设置不同于您所看到的默认格式的格式，您只需要：

```
chart.valueFormat(d3.format('f'))// Or whatever format you'd like 
```

[这是jsFiddle](http://jsfiddle.net/mrUSj/)

# php - MYSQL 在 PHP 变量的 3 个表中查找电子邮件

> ID：15370720
> 
> 赞同：1
> 
> 时间：2013-03-12T19:47:08.530
> 
> 标签：php, mysql, forms, login

我有三个`safe_workers, safe_companies and safe_customers`用于存储不同帐户类型的表。登录后，我需要一个查询来查找所有三个表中的 LoginEmail 和 LoginPassword 列，并根据登录页面传递的登录表单返回匹配项。

我是 MySQL 的初学者并尝试了以下方法，但显然它返回了一个错误。

```
select safe_companies.LoginEmail,ID 
from safe_companies,safe_customers 
WHERE LoginEmail='.$_POST[InEmail].' AND LoginPass= '.$_POST[InPass].' 
```

我不想比较表只是想匹配

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T20:37:39.340

我根据您的问题详细信息做出一个假设，即特定用户的 LoginEmail 和 LoginPass 值将仅存在于三个表之一中。如果是这种情况，您可以使用如下所示的 UNION。

```
SELECT a.LoginEmail, a.ID
FROM (
    SELECT LoginEmail, ID FROM safe_workers
    UNION
    SELECT LoginEmail, ID FROM safe_companies
    UNION
    SELECT LoginEmail, ID FROM safe_customers
) AS a
WHERE a.LoginEmail = 'InEmail' AND a.LoginPass= 'InPass'; 
```

但是，这可能会导致各种不良情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T20:05:12.390

如果我很好地理解了您的问题：

您正在寻找的是[http://dev.mysql.com/doc/refman/5.0/en/join.html](http://dev.mysql.com/doc/refman/5.0/en/join.html)

如果两个表都有一个名为 LoginEmail 的列。

```
SELECT
    sco.LoginEmail
FROM
   safe_companies AS sco
INNER JOIN
    safe_customers AS scu ON (sco.LoginEmail = scu.LoginEmail)
WHERE
    sco.LoginEmail = '" . $_POST['InEmail'] . "' AND
    scu.LoginPass = '" . $_POST['InPass'] . "' 
```

如果没有，请提供更多信息，例如表结构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T20:06:06.223

您可以使用该`UNION`语句来完成此操作。尝试这个：

```
$dbh = new PDO('...');

$where = 'WHERE LoginEmail = :email AND LoginPass = :pass';
$query = [];
foreach (['safe_workers', 'safe_companies', 'safe_customers'] as $table) {
    $query[] = "(SELECT LoginEmail, ID FROM {$table} {$where})";
}

/*
 * This will become something like this:
 * (SELECT LoginEmail, ID FROM safe_workers WHERE LoginEmail = :email AND LoginPass = :pass)
 * UNION
 * (SELECT LoginEmail, ID FROM safe_companies WHERE LoginEmail = :email AND LoginPass = :pass)
 * UNION
 * (SELECT LoginEmail, ID FROM safe_customers WHERE LoginEmail = :email AND LoginPass = :pass)
 */
$stmt = $dbh->prepare(implode(' UNION ', $query));

$stmt->bindParam(':email', $_POST['inEmail']);
$stmt->bindParam(':pass', $_POST['inPass']);
if ($stmt->execute()) {
    var_dump($stmt->fetch(PDO::FETCH_ASSOC));
} 
```

*注意：我使用 PDO 来准备语句并转义 POST 数据。看看它的[手册](http://php.net/manual/en/pdo.construct.php)。*

# mysql - SQL：二进制到 IP 地址

> ID：15370721
> 
> 赞同：9
> 
> 时间：2013-03-12T19:47:09.740
> 
> 标签：mysql, string, binary, string-formatting

我正在尝试将二进制 IP 转换为人类可读的 IP

```
SELECT HEX( `ip_bin` ) FROM `log_metadata` 
```

给我 `4333D26E000000000000000000000000`

和

```
SELECT INET_NTOA(0x4333D26E) 
```

给我`67.51.210.110`

所以我尝试了：

```
SELECT
  SUBSTRING( CONVERT(HEX(`ip_bin`), CHAR(32)), 1, 8 ) AS `A`
, INET_NTOA( 
  SUBSTRING( CONVERT(HEX(`ip_bin`), CHAR(32)), 1, 8 ) 
                                                     ) AS `B`
, INET_NTOA(hex(`ip_bin`))  AS `C`
, INET_NTOA(`ip_bin`)       AS `D`
FROM `log_metadata` 
```

但我只得到

```
+----------+------------+------------+---------+
| A        | B          | C          | D       |
+----------+------------+------------+---------+
| 4333D26E | 0.0.16.237 | 0.0.16.237 | 0.0.0.0 |
+----------+------------+------------+---------+ 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T19:59:06.920

```
mysql> select inet_ntoa(conv('4333d26e', 16, 10));
+-------------------------------------+
| inet_ntoa(conv('4333d26e', 16, 10)) |
+-------------------------------------+
| 67.51.210.110                       |
+-------------------------------------+
1 row in set (0.00 sec) 
```

检查它是否也可以在那里工作=)

## 编辑

问题是它`inet_ntoa`似乎是从*十进制* `strings`数字表示，而不是十六进制表示，或者从 hexadecimal 解析的`integers`。比较：

```
mysql> select inet_ntoa(0x4333d26e);
+-----------------------+
| inet_ntoa(0x4333d26e) |
+-----------------------+
| 67.51.210.110         |
+-----------------------+
1 row in set (0.02 sec)

mysql> select inet_ntoa('0x4333d26e');
+-------------------------+
| inet_ntoa('0x4333d26e') |
+-------------------------+
| 0.0.0.0                 |
+-------------------------+
1 row in set, 1 warning (0.00 sec) 
```

## 编辑

这更简单，似乎也有效：

```
SELECT INET_NTOA(CONV(ip_bin, 2, 10)) FROM log_metadata 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-10-18T15:26:09.817

当使用 Mysql 5.6.3 或更高版本时，它更容易使用`INET6_NTOA`——它接受一个二进制字符串并为其返回人类可读的格式。它还支持 IPv4 和 IPv6 地址并相应地返回格式。因此，在您的示例中，您将使用：

```
SELECT INET6_NTOA( `ip_bin` ) FROM `log_metadata` 
```

并且应该得到人类可读的结果。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-12-15T16:49:13.907

我发现我必须先调用`HEX`将我的二进制字段转换为十六进制字符串，所以以下对我有用：

```
select inet_ntoa(conv(HEX(ip_bin), 16, 10)) from log_metadata 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-11-14T14:59:16.373

仅供参考~这适用于较新版本的mysql

```
 SELECT INET6_NTOA( `ip_bin` ) FROM `log_metadata` 
```

这与

```
SELECT INET_NTOA( CONV( SUBSTRING(HEX(`ip_bin` ), 1, 8), 16, 10 )) FROM log_metadata; 
```

# ruby - Sidekiq 和 Capistrano，在单个队列上有多个工作人员

> ID：15370723
> 
> 赞同：2
> 
> 时间：2013-03-12T19:47:14.830
> 
> 标签：ruby, capistrano, sidekiq

我们已经让 sidekiq 在我们的应用程序上工作，它运行良好，但是在本地我有 4 个 sidekiq 工作人员，每个工作人员使用

```
sidekiq -r config.rb -c 20 -q websites 
```

我有四个队列，所以我从终端开始

```
sidekiq -r config.rb -c 20 -q websites
sidekiq -r config.rb -c 20 -q cafes
sidekiq -r config.rb -c 20 -q gyms
sidekiq -r config.rb -c 20 -q telephones 
```

我查看了 sidekiq 文档，但找不到答案，我已添加

```
set :sidekiq_processes, 4 
```

这给了我们四个过程

我们已将优先级添加到队列中作为短期解决方案。

我会手动在服务器上运行队列，但我不想失去与启动和停止部署的 capistrano 集成

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T20:16:25.263

我认为使用内置的上限配方不可能做到这一点。您可以处理多个队列，也可以有多个进程，但不能自定义每个进程的队列。

# c# - Asp.net 缓存查询

> ID：15370731
> 
> 赞同：2
> 
> 时间：2013-03-12T19:47:33.560
> 
> 标签：c#, asp.net

我目前有一个 asp.net 网站，将所有视图状态存储在服务器端。我遇到了一个问题。我有一个登录页面，其中列出了网格视图中的许多统计信息，每一行都有一个“查看”按钮，该按钮转到包含所选统计信息的详细列表的页面。

如果用户使用他们的后退按钮返回主列表并在 10 次重复后重复按下“查看”​​按钮的过程，初始登录页面将失去所有状态。我通过`<sessionPageState historySize="40">`在 web 配置中设置来解决这个问题，它允许上述过程重复 40 次，直到初始登录页面失去所有状态并需要完全重新加载。

现在这解决了这里的问题，但显然在其他页面上存在问题，当用户使用站点的其余部分时会导致较大的会话状态。解决这个问题的最佳方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-12T19:52:07.583

`View State`旨在存储正在加载的页面上对象的状态。它不存储在服务器端，而是页面控件及其值的集合，它们以 Base 64 编码字符串随页面一起发送出去。

为了在页面之间传递数据，您应该查看[Session](http://msdn.microsoft.com/en-us/library/ms972429.aspx)，只要用户处于活动状态，它就会持续存在（直到 Session 过期或您手动终止它）。

# c++ - 从另一个 .cc 文件调用 C++ 中的方法

> ID：15370739
> 
> 赞同：0
> 
> 时间：2013-03-12T19:47:45.173
> 
> 标签：c++, methods

我正在运行 CERN 的根程序并使用 C++ 脚本进行数据分析。

目前我正在运行自己的脚本来执行此分析，但我需要使用在其他人的文件中定义的名为“ccd.cc”的方法：

```
bool CCDCuts12(obj1, int1)
    {...} 
```

我需要使用我自己的代码中创建的 obj1 和 int1 来使用此方法的布尔结果，如下所示：

```
if(CCDCuts12(obj1, int1))
    {...}
else {cout << "This Event Did Not Pass the Cuts" << endl;} 
```

问题是，当我尝试这个时，ROOT 对我非常不满意，所以我假设我错误地调用了该方法，它需要某种 [object].CCDCuts12(obj1, int1) 才能工作......但是我不知道该怎么做或 [object] 会是什么......

作为参考，我已经在顶部做了#include 'ccd.cc' ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T19:48:47.507

您不应包含其他 C++ 文件。您应该在头文件 (.h) 中包含函数定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T19:53:28.010

你应该在这个文件中包含这个函数的声明

```
bool CCDCuts12(obj1, int1); 
```

可能它应该包含在`.h`文件中。

之后，您应该将两个文件链接到 1 个程序中

```
your_compiler file1.cc file22.cc 
```

# c# - 如何将实体设置从垂直选项卡切换到水平选项卡？

> ID：15370743
> 
> 赞同：1
> 
> 时间：2013-03-12T19:47:51.123
> 
> 标签：c#, tabs, navigation, enterprise-web-library

我永远不记得是否必须在页面或信息上实现接口，或者是否必须覆盖某些内容。我想要它在这里，所以我不必挖掘旧的解决方案。此外，此信息是否可在 EWL 评论或 EWL 网站上的任何地方获得？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:57:37.527

您需要`TabModeOverrider`从实体设置的`Info`类中实现：

```
partial class Info: TabModeOverrider {
    TabMode TabModeOverrider.GetTabMode() {
        return TabMode.Horizontal;
    }
} 
```

我认为现在其他任何地方都没有记录这一点。

# javascript - 如何使用单选按钮使用 HTML5 和 Javascript 更改 img src

> ID：15370747
> 
> 赞同：1
> 
> 时间：2013-03-12T19:48:10.537
> 
> 标签：javascript, image

我正在做一项任务，其中网页根据选择的单选按钮显示国家/地区的国旗。作业的目标是使用 Javascript 更改 img 元素的 src 属性。我不认为我们应该使用函数，因为直到下一章才会介绍这些函数。我遵循了当前章节中的所有指南，但它们只讨论更改文本，而不是图像。

这是我的代码：

```
<!DOCTYPE HTML>
<html>
    <head>
        <title>Flags</title>
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    </head>
    <body>
        <form name="CountryList" method="get">
            <table>
                <tr>
                    <td>
                        <input type="radio" name="country" onclick="document.ProductImage.src='argentina.jpg'" />Argentina
                        <br />
                        <input type="radio" name="country" onclick="document.ProductImage.src='australia.jpg'" />Australia
                        <br />
                        <input type="radio" name="country" onclick="document.ProductImage.src='bolivia.jpg'" />Bolivia
                        <br />
                        <input type="radio" name="country" onclick="document.ProductImage.src='cuba.jpg'" />Cuba
                        <br />
                        <input type="radio" name="country" onclick="document.ProductImage.src='finland.jpg'" />Finland
                        <br />
                        <input type="radio" name="country" onclick="document.ProductImage.src='france.jpg'" />France
                        <br />
                        <input type="radio" name="country" onclick="document.ProductImage.src='italy.jpg'" />Italy
                        <br />
                        <input type="radio" name="country" onclick="document.ProductImage.src='peru.jpg'" />Peru
                        <br />
                        <input type="radio" name="country" onclick="document.ProductImage.src='syria.jpg'" />Syria
                        <br />
                        <input type="radio" name="country" onclick="document.ProductImage.src='tunisia.jpg'" />Tunisia
                    </td>
                    <td>
                        <a><img id="ProductImage" src="" alt="Flag" /></a>
                    </td>
                </tr>
            </table>
        </form>
    </body>
</html> 
```

谁能指出我正确的方向或让我知道如果没有函数就不可能更改 img src 属性？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T19:53:49.253

如果您打算像那样内联，请更改

```
document.ProductImage.src 
```

至

```
document.getElementById('ProductImage').src 
```

一切都会好起来的。

不过，您确实应该调用一个函数来将代码保存在一个地方（如果图像的 ID 发生变化怎么办？）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T19:52:35.963

尝试：

```
document.getElementById('ProductImage').src='bolivia.jpg' 
```

等等...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T19:53:55.157

你并没有真正正确地选择图像，使用`document.getElementById("ProductImage").src = ...`，虽然我真的建议使用一个函数，内联处理程序已经过时了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T19:54:03.477

如果我没记错的话，而且[看起来我不是](http://jsbin.com/ugameb/1/edit)，`document.ProductImage`指的是属性设置为的`img`标签。如果您通过 ID 引用元素，请改用。`name``ProductImage``document.getElementById()`

你的修复：

```
<!DOCTYPE HTML>
<html>
    <head>
        <title>Flags</title>
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    </head>
    <body>
        <form name="CountryList" method="get">
            <table>
                <tr>
                    <td>
                        <input type="radio" name="country" onclick="updateProductImage('argentina.jpg')" />Argentina
                        <br />
                        <input type="radio" name="country" onclick="updateProductImage('australia.jpg')" />Australia
                        <br />
                        <input type="radio" name="country" onclick="updateProductImage('bolivia.jpg')" />Bolivia
                        <br />
                        <input type="radio" name="country" onclick="updateProductImage('cuba.jpg')" />Cuba
                        <br />
                        <input type="radio" name="country" onclick="updateProductImage('finland.jpg')" />Finland
                        <br />
                        <input type="radio" name="country" onclick="updateProductImage('france.jpg')" />France
                        <br />
                        <input type="radio" name="country" onclick="updateProductImage('italy.jpg')" />Italy
                        <br />
                        <input type="radio" name="country" onclick="updateProductImage('peru.jpg')" />Peru
                        <br />
                        <input type="radio" name="country" onclick="updateProductImage('syria.jpg')" />Syria
                        <br />
                        <input type="radio" name="country" onclick="updateProductImage('tunisia.jpg')" />Tunisia
                    </td>
                    <td>
                        <a><img id="ProductImage" name="ProductImage" src="" alt="Flag" /></a>
                    </td>
                </tr>
            </table>
        </form>
        <script>
            function updateProductImage(src) {
                document.ProductImage.src = src || 'no-image.jpg'; // Set image source to given source or no image of no source specified.
                // Or use document.getElementById("ProductImage").src instead.
                return true; // Continue with the click event.
            }
        </script>
    </body>
</html> 
```

作为奖励；上面代码的一个工作示例：http: [//jsbin.com/ihimay/1/edit](http://jsbin.com/ihimay/1/edit)

> 我不认为我们应该使用函数，因为直到下一章才会介绍这些函数。

我认为您可以通过生成干净的代码而不是凌乱的内联 javascript 来获得一些奖励积分。如果确实不是使用函数的选项，只需替换`updateProductImage('argentina.jpg')`为`document.ProductImage.src = 'argentina.jpg' || 'no-image.jpg'`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T19:56:58.233

更改`<img id`为`<img name`它似乎可以在 Chrome 中使用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-06T05:19:04.150

我想在不使用任何扩展程序的情况下通过单选按钮单击更改我的 Magento 商店中的产品图像。

我只想在单击单选按钮时将其颜色更改为棕褐色和 B/w 到相同的图像容器中。( [http://demo.lifestylewallart.com.au/](http://demo.lifestylewallart.com.au/) )

因为我的 magento 中会有很多图像，所以代码应该是最少的。

我在简单文件上使用 html 和 css 进行了尝试。

请看一下，让我知道我们如何在 magento 商店中以更好的方式使用它。

```
img { display: block; width: 50%; }

    .sepia {
    -webkit-filter: sepia(1);
    filter: sepia(1);
    }

    .gray {
    -webkit-filter: grayscale(1);
    filter: grayscale(1);
    } 
```

```
<html>
    <body>
    Original : - <img src="http://i.stack.imgur.com/CE5lz.png"><br>
    <div class="sepia">
    Sepia : - <img src="http://i.stack.imgur.com/CE5lz.png">
    </div>
    <div class="gray">
    Gray :- <img src="http://i.stack.imgur.com/CE5lz.png">
    </div>
    </body>
    </html>
```

# java - 显示在每一帧上变化的文本（如乐谱）

> ID：15370748
> 
> 赞同：7
> 
> 时间：2013-03-12T19:48:16.900
> 
> 标签：java, android, opengl-es

有没有什么简单的方法可以在右上角显示没有任何纹理的简单白色文本，这些纹理在 onDrawFrame 方法中实现 Renderer 的类中的每一帧都会发生变化？它是二维的，所以我相信不需要进行任何转换。我找到了很多教程，但是它们看起来都太复杂了，代码太多了。也许只需要几行代码就可以完成？如果这不可能，那么在不修改太多现有代码的情况下最简单的方法是什么？请显示完整的代码，因为我是新手。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-13T04:43:17.217

渲染器是一种 OpenGL 方法。OpenGL ES 本身并不支持文本。这留下了以下选项：

1.  使用纹理，使用 Android 的 Canvas 类对其进行绘制。
2.  使用图书馆。这很可能也会绘制到纹理上。
3.  用多边形创建文本。

由于您的问题是要求一个不绘制纹理的解决方案，因此 1 和 2 都出局了。因为你想要一些简单的东西，所以 3 也出来了。留下没有好的解决方案。

要考虑的替代方法是在您正在使用的 GLSurfaceView 之上分层另一个视图。您可以使用 RelativeLayout 轻松堆叠两个视图，其中一个是可以锚定到屏幕右上角的文本视图。伪代码如下：

```
<RelativeLayout ... />
    <GLSurfaceView ... />
    <TextView ... />
</RelativeLayout> 
```

这种方法的好处是让您摆脱 OpenGL 的要求来编写文本。我已经在我的几个应用程序上成功地做到了这一点。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-29T07:30:31.380

您可能想查看 Android SDK 示例附带的 API Demos 项目。有一个 OpenGL Sprite Text 示例可以完全满足您的要求。

您可以通过在模拟器（或设备）上安装 API Demos 并导航至：API Demos > Graphics > OpenGL ES > Sprite Text 来查看演示

这是一个屏幕截图：

![在此处输入图像描述](../Images/ad407670911e161e56fb1796de542f51.png)

在 Renderer 的 onDrawFrame 方法中，屏幕右下角的文本每帧都会发生变化。

您可以在 Android SDK 示例目录中找到源代码： *ApiDemos\src\com\example\android\apis\graphics\spritetext*

您需要将少量文件复制到您的项目中，并且只需很少的代码行就可以实现相同的功能。

**示例应用程序**：我创建了一个示例应用程序，通过重用 API Demos 项目中的代码来演示相同的内容。你可以从这里得到它 - [OpenGLText_eclipse_project.zip](http://www.appsrox.com/shared/OpenGLText_eclipse_project.zip)

简而言之，您可以完全重用 Grid.java、LabelMaker.java、NumericSprite.java。然后在您的渲染器中添加几行代码以使用上述类，如我的 TextRenderer.java 中所示

这是分数不断更新时的样子。

![在此处输入图像描述](../Images/b48f4b8fe2e7fe84539fb531ce16e7cb.png)

基本上，渲染分数就像这样简单：

```
LabelMaker mLabels = new LabelMaker();

mLabels.initialize(gl);
mLabels.beginAdding(gl);
int mLabelMsPF = mLabels.add(gl, "Score:", mLabelPaint);
mLabels.endAdding(gl);

mLabels.beginDrawing(gl, mWidth, mHeight);
mLabels.draw(gl, 0, 0, mLabelMsPF);
mLabels.endDrawing(gl);

NumericSprite mNumericSprite = new NumericSprite();
mNumericSprite.setValue(16);
mNumericSprite.draw(gl, 0, 0, mWidth, mHeight); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-30T07:20:41.513

尝试查看 CodeHead 的 Bitmap Font Generator 和 Android Loader，并尝试使用此代码。

[CBFG](http://www.codehead.co.uk/cbfg/)

[安卓加载器](http://www.codehead.co.uk/cbfg/TexFont.java)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-19T10:26:12.870

文本应该在与 OpenGL 不同的层中。

```
<FrameLayout>
    <GLSurfaceView/>
    <LinearLayout android:layout_gravity="top|right" >
        <TextView android:id="@+id/score" ... />
    </LinearLayout>
</FrameLayout> 
```

FrameLayout 允许视图堆叠在另一个之上。然后设置文本：

```
( (TextView) findViewById(R.id.score) ).setText( "Your Score" ); 
```

您可能需要在每次渲染 GLSurfaceView 后强制重新绘制乐谱布局，以避免 openGL 在文本顶部绘制。（不确定这个）

为了性能起见，使文本区域尽可能小（wrap_content为LinearLayout的宽度和高度）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-12T19:56:18.283

我使用了位图画布 drawText，但我仍然必须将其用作纹理，可能使用较小的位图和字体大小

```
bitmap = Bitmap.createBitmap(256, 256, Bitmap.Config.ARGB_8888);
canvas = new Canvas(bitmap);
h = (int)((((System.currentTimeMillis()/1000)/60)/60)%60);
    m = (int)(((System.currentTimeMillis()/1000)/60)%60);
    s = (int)((System.currentTimeMillis()/1000)%60);
    paint = new Paint();
    paint.setColor(Color.MAGENTA);
    paint.setTextAlign(Align.CENTER);
    paint.setTypeface(Typeface.DEFAULT_BOLD);
    paint.setTextSize(55);
time = String.valueOf(h) + "h" + String.valueOf(m) + "m" + String.valueOf(s) + "s";
canvas.drawText(time, bitmap.getWidth()/2, 100, paint);
int[] textureIds = new int[1];
    gl.glGenTextures(1, textureIds, 0);
    textureId = textureIds[0];
gl.glBindTexture(GL10.GL_TEXTURE_2D, textureId);
         GLUtils.texImage2D(GL10.GL_TEXTURE_2D, 0, bitmap, 0);

gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MIN_FILTER, GL10.GL_NEAREST);
    gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MAG_FILTER, GL10.GL_NEAREST);            
         gl.glBindTexture(GL10.GL_TEXTURE_2D, 0); 
```

如果你[在](http://beginning-android-games.googlecode.com/svn/trunk/)第 9 章 src/com.badlogic.androidgames.framework.gl.Font.java 是我用于位图字体的地方，我使用 Codeheads 位图字体生成器生成位图字体

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-28T18:05:28.643

您需要将乐谱文本绘制到位图上，然后将此位图用作纹理。

要在位图上绘制文本，您可以使用以下代码：

```
// Create and draw a texto to your bitmap.
Bitmap bm = Bitmap.createBitmap(300, 100, Bitmap.Config.ARGB_8888);
Canvas c = new Canvas(bm);
Paint p = new Paint();
p.setColor(Color.RED);
c.drawText("YOUR SCORE", 0, 0, new Paint()); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-27T02:54:40.197

在我看来，您可以使用 RelativeLayout 来包装 GLSurfaceView，也可以使用另一个 TextView 来放置您想要的任何位置。然后在你的 Renderer 构造函数中，传递 TextView 引用 GLES20TriangleRenderer(Context context, TextView tv) 在 onDrawFrame 方法中，调用

```
 ((Activity)mContext).runOnUiThread(new Runnable(){

        @Override
        public void run() {
            // TODO Auto-generated method stub
            tv.setText(Math.random() + " random");

        }

    }); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-31T14:21:19.623

您可以简单地将 a 附加`TextView`到您`Activity`的 's`WindowManager`并从那里显示它。如下。

```
TextView tv = new TextView(this);
tv.setText("FPS: 0");

//get WindowManager from Activity
WindowManager w = this.getWindowManager();

//setup view LayoutParams
WindowManager.LayoutParams lp = new WindowManager.LayoutParams(
    ViewGroup.LayoutParams.WRAP_CONTENT,
    ViewGroup.LayoutParams.WRAP_CONTENT,
    0,
    WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE
            | WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL,
    PixelFormat.TRANSPARENT);

//position
lp.gravity = Gravity.RIGHT | Gravity.TOP;

//attach view
w.addView(tv,lp); 
```

然后通过更新

```
activity.runOnUiThread(new Runnable(){

    @Override
    public void run() {
        tv.setText("FPS: " + fps);
    }

}); 
```

![在此处输入图像描述](../Images/08245210de2db7568a76fd05d1ccac1d.png)

# sql-server - SQL Server 作业依赖性

> ID：15370749
> 
> 赞同：0
> 
> 时间：2013-03-12T19:48:17.250
> 
> 标签：sql-server, sql-server-2000, sql-server-job

我在 SQL Server 2000 中有一个工作，它每晚运行并刷新数据，我有另一个工作在数据刷新并更新一些记录后运行。这两个工作没有相互关联。如果数据刷新作业失败，我需要知道如何停止或禁用更新作业。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T19:57:58.340

您可以通过指示作业状态的简单数据标志来执行此操作。例如，创建一个包含以下列的表：

*   作业ID
*   开始时间
*   时间结束
*   地位

在第一个作业中，在作业开始时写入一条新记录，然后在作业完成时设置状态标志以指示成功。接下来，当第二个依赖作业运行时，让它检查同一日期的状态标志，以确定前一个作业是否完成。如果它还没有完成（即，状态 <> '完成'），不要开始工作。

希望这可以帮助。

# jquery - 一个 li 项目的 jquery ui 可排序禁用

> ID：15370754
> 
> 赞同：37
> 
> 时间：2013-03-12T19:48:33.647
> 
> 标签：jquery, jquery-ui

是否可以仅针对一个列表项禁用可排序的 jquery ui？这是代码示例：

```
<ul class="sortable">
    <li>Item 1</li>
    <li>Item 2</li>
    <li>Item 3</li>
    <li>Item 4</li>
    <li>Item 5</li>
</ul> 
```

例如，当我单击项目时，我将禁用可排序。请帮忙。

这是javascript代码：

```
$(document).ready(function(){
    $('.sortable li').click(function(){
        // Disable sortable for this item.............
    });
}); 
```

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-03-12T19:57:44.777

当然，尝试这样的事情：

```
 $(".sortable").sortable({
      items: "li:not(.unsortable)"
    });
 $(".sortable").disableSelection(); 
```

通过使用[items 选项](http://api.jqueryui.com/sortable/#option-items)，您可以指定可以排序和不能排序的项目。

**[jsFiddle 示例](http://jsfiddle.net/j08691/67rZz/)**

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2015-04-20T12:32:19.930

您可以明确排除项目（除了不包括它们）：

```
$( ".sortable" ).sortable({
     cancel: ".disable-sort-item"
}); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-09-22T06:42:29.087

我知道，这个问题很老了。但我让你知道正确的答案。如何通过单击动态禁用和启用项目。因为我在 2016 年遇到了同样的问题：D

首先。您需要做的就是将项目设置为可排序的项目，这些项目将在开始时被禁用。添加参数什么从列表中删除禁用的项目（它需要在第一次初始化）：

```
var sortable = $("#sortable-sections");
sortable.sortable({
     items: 'li:not(.ui-state-disabled)',
     helper: 'clone',
});
sortable.disableSelection(); 
```

（示例中使用的引导程序）

然后只需添加事件监听器，我使用了 onClick，所以这里的例子：

```
sortable.find('li').click(function () {
    $(this).toggleClass('ui-state-disabled');
    $(this).hasClass('ui-state-disabled') ? $(this).removeData('sortableItem') : false;
}); 
```

只有当他有称为 sortableItem 的数据时，Sortable-item 才可排序，因此它将使其动态禁用，希望对某人有所帮助。

干杯!

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-12-17T22:10:42.730

这个问题有两个相似的答案......但他们的行为非常不同。

使用，您可以**动态地**`cancel`使项目*可排序/不可排序* ：

 **```
$(".sortable_cancel").sortable({ 
    cancel: ".unsortable" 
}); 
```

使用`items`，您可以使项目*可排序/不可排序*，但仅在**初始化时**：

```
$(".sortable_item").sortable({
    items: "li:not(.unsortable)"
}); 
```

查看此演示中的区别：

```
$(".sortable_cancel").sortable({
    cancel: ".unsortable"
});
 $(".sortable_cancel").disableSelection();

  $(".sortable_item").sortable({
      items: "li:not(.unsortable)"
    });
 $(".sortable_item").disableSelection();
```

```
.sortable {
    list-style-type: none;
    width: 60%;
    padding: 5px;
}

.sortable li {
  padding-left: 1.5em;
}

li.unsortable {
    background: #999;
    opacity:.5;
}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.0/jquery-ui.min.js"></script>
<div style="width:100%;">
    <div style="width:50%; float:left;">
        <label><b>Turn ON/OFF Item1 sortable</b></label>
        <ul class="sortable sortable_cancel">
            <li id="list1_toggle">Item1</li>
            <li>Item2</li>
            <li class="unsortable">Item3</li>
            <li>Item4</li>
            <li>Item5</li>
        </ul>
        <button onclick="$('#list1_toggle').toggleClass('unsortable')">Toggle Item1's unsortable</button>
    </div>

    <div style="width:50%; float:right;">
        <label><b>Item1 will remain sortable</b></label>
        <ul class="sortable sortable_item">
            <li id="list2_toggle">Item1</li>
            <li>Item2</li>
            <li class="unsortable">Item3</li>
            <li>Item4</li>
            <li>Item5</li>
        </ul>
        <button onclick="$('#list2_toggle').toggleClass('unsortable')">Toggle Item1's unsortable</button>
    </div>
</div>
```**

# javascript - 单击时，它应该使用 javascript 将用户导航回来

> ID：15370755
> 
> 赞同：-2
> 
> 时间：2013-03-12T19:48:39.363
> 
> 标签：javascript, jquery, url

用户在这个网址：`http://devi/socialsites/test/Lists/Tasks/AllItems.aspx`

当他们在该网址时，有一个链接文本应该将用户带回：

```
http://devi/socialsites/ 
```

我有一个 javascript 如下：

```
function NavigateToRootSiteCollection() {

   window.location.assign(window.location.pathname);
} 
```

但这只会将用户带到相同的网址。任何形式的帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T19:54:03.190

您可以使用此代码删除两个第一个目录：

```
window.location = window.location.pathname.replace(/^(\/?[^\/]+\/[^\/]+).*/, '$1'); 
```

或者只有一个，根目录

```
window.location = window.location.pathname.replace(/^(\/?[^\/]+).*/, '$1'); 
```

# asp.net - 单击按钮时获取下拉列表选定的值

> ID：15370756
> 
> 赞同：0
> 
> 时间：2013-03-12T19:48:42.797
> 
> 标签：asp.net, drop-down-menu

在 ASP.net 表单上，我有一个按钮和一个下拉列表。Dropdownlist 通过 LinqDatasource 填充。

我试图在单击按钮时获取选定的下拉列表值。

下拉列表从 Northwind db 的员工表中获取姓氏列表。

后面的代码是这样的，它将 ddl 值设为 null

页面

```
 <%@ Page Title="Home Page" Language="C#" AutoEventWireup="true"
    CodeBehind="Default.aspx.cs" Inherits="Demo._Default" %>
<form id="form1" runat="server">
<asp:DropDownList ID="Ddl_allGoldsets" runat="server" 
    DataSourceID="LinqDataSource1" DataTextField="LastName" 
    DataValueField="LastName">
</asp:DropDownList>
<asp:LinqDataSource ID="LinqDataSource1" runat="server" 
    ContextTypeName="Demo.linqDataContext" EntityTypeName="" GroupBy="LastName" 
    OrderGroupsBy="key" Select="new (key as LastName, it as Employees)" 
    TableName="Employees">
</asp:LinqDataSource>
<asp:Button ID="Button1" runat="server" onclick="Button1_Click" Text="Button" />
</form> 
```

代码隐藏

```
namespace Demo
{
    public partial class _Default : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {

        }

        protected void Button1_Click(object sender, EventArgs e)
        {
            linqDataContext dc = new linqDataContext();
            DropDownList ddl = (DropDownList)Page.FindControl("Ddl_allGoldsets");
            string val = ddl.SelectedValue;

            /* code that writes val into db*/
        }
    }
} 
```

上面的代码返回空值到ddl！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T21:02:19.907

你根本不需要使用`FindControl`。您应该能够`Ddl_allGoldsets`直接从代码隐藏中引用：

```
protected void Button1_Click(object sender, EventArgs e)
{
    DropDownList ddl = Ddl_allGoldsets;
    string val = ddl.SelectedValue;

    /* code that writes val into db*/
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T20:29:29.703

原因是您的下拉菜单不在 Page 控制之下。该窗体属于 Page 控件。您的下拉菜单将在表单控件下。

因此

```
DropDownList ddl = (DropDownList)Page.FindControl("nameofDropdownlist"); 
```

直接在 aspx 的根目录下查找名为“nameofDropdownlist”的 ddl。但它在表单标签内。

最好将 ddl 包装在 PlaceHolder 中并在 PlaceHolder Id 上使用 FindControl。

# python - 用于更改 html 代码的脚本。最好有一个简单的界面

> ID：15370763
> 
> 赞同：-3
> 
> 时间：2013-03-12T19:48:53.390
> 
> 标签：python, html, ruby, replace

我需要一个脚本来更改 html 文档的几个部分。我需要它的原因是因为我需要多次使用相同的 html 文件。

我最大的希望是它（如果可能有一个界面）拥有以下字段：

链接 [在此处插入]

姓名 [在此处插入]

等等。

[完成按钮]

然后将文档中的变量更改为输入字段中指定的变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T19:57:52.640

这就是我要做的。假设您希望用户输入他们自己的标题和内容。

1) 创建一个界面，该界面有 2 个文本框，可以接受标题和内容。

2) 假设您的 HTML 模板（您将经常使用的模板）如下所示：

```
<html>
<title>
@Title@
</title>
<body>
Welcome to my website - @Websitecontent@
</body>
</html> 
```

3) 使用 String.Replace 来解析 @title@ 和 @websitecontent@ 并将其替换为放置在 2 个文本框中的那个。[这是来自 MSDN 的一个很好的文档。](http://msdn.microsoft.com/en-us/library/fk49wtc1.aspx)

4) 在您的界面中创建一个名为“完成”的按钮，将解析后的模板保存到一个新的 HTML 文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T20:00:23.110

正如评论中所建议的那样，听起来您确实想使用模板系统（我也喜欢并使用 jinja（好东西））。

这是一个更简单的例子

```
title = "My Page"
html = '''

<html>
<head>
<title>{0}</title>
</head>
<body>
</body>
<html>

'''.format(title)
print html 
```

# html - 顶部的图像溢出？

> ID：15370766
> 
> 赞同：0
> 
> 时间：2013-03-12T19:49:08.810
> 
> 标签：html, css

我有一个正在开发的网站，并试图让图像在顶部溢出并在底部对齐。

[http://mytempsite.net/raven/](http://mytempsite.net/raven/)

现在 DIV 是 500PX 高，当图像大于它时，它的溢出隐藏在底部。问题是它使图像看起来很奇怪。我需要它来拉伸图像，因为我正在使网站响应，我知道的图像变得模糊，但这些只是临时图像。

我的问题是，有没有办法让图像的底部对齐并固定到 DIV 的底部，然后当它被拉伸得更大时，它会像负面一样在页面顶部溢出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T19:54:24.883

我认为您正在尝试显示图像的底部而不是顶部？如果是这种情况，请在选择器上将`#myGallery img`图像的位置更改为底部而不是顶部。

```
#myGallery img {
    display:none;
    position:absolute;
    bottom: 0;  // change this from top to bottom
    width: 100%;
    left:0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T21:01:24.243

我建议从您的 DIV 中删除高度，并从您的图像中删除 position: absolute，因为无论大小如何，您都需要图像的高度来定义 DIV 的高度。

在响应式幻灯片上，我开始使用以下 CSS：

```
.slide {
  width: 100%;
  float: left;
  margin-right: -100%;
} 
```

这允许您将它们堆叠在一起，就像绝对定位一样，但 DIV 会响应幻灯片的高度。

不过，您的底部也有白色渐变，我认为这是您提出问题的部分原因 - 您希望在较小的视图上使用渐变。

为此， img#fadeimage 应该有`position: absolute; bottom: 0; height: 100%`，但您可能还需要构建图像，以便顶部有更多空白空间。

# asp.net-mvc - MVC 数据注释范围验证无法正常工作

> ID：15370768
> 
> 赞同：19
> 
> 时间：2013-03-12T19:49:11.743
> 
> 标签：asp.net-mvc, asp.net-mvc-3, jquery-ui, data-annotations, asp.net-mvc-validation

我的`RangeValidator`模型中有一个属性，只允许 0 到 100 之间的整数。我有一个部分视图，显示一个表单以通过 jQuery UI 对话框更新属性。我查看了源代码，可以确认数据注释属性正在正确生成。但是，验证无法正常工作。它确实执行了某种验证，但没有使用我设置的范围。值 1、10 和 100 不会产生错误。任何其他一位或两位数的值都会产生错误。但是，如果我用零填充，所有小于 100 的值都可以。

模型：

```
public class MyModel
{
  ...
  [Required(ErrorMessage = "{0} is required")]
  [Range(typeof(int), "0", "100", 
         ErrorMessage = "{0} can only be between {1} and {2}")]
  public int Percentage { get; set; }
  ...
} 
```

局部视图：

```
@model MyApp.Models.Partials.MyModel

<div id="myDialog" class="editModal" title="Update Percentage">
  @using (Ajax.BeginForm("UpdatePercentage", "MyController", 
                         new AjaxOptions() { HttpMethod = "Post", 
                                             OnSuccess = "onUpdateSuccess" }, 
                         new { name = "myForm" }))
  {
    @Html.ValidationSummary(null, new { style = "width:auto;max-width:22em;               
                                                 float:left;clear:both;" })    
    <div style="width:auto;float:left;clear:both;">
      <div style="width:10em;float: left;text-align:right;clear:left;">
        @Html.Label("Percentage:")
      </div>
      <div style="width:12em;margin-left:1em;float:left;clear:right;">
        @Html.TextBoxFor(m => m.Percentage)
      </div>
    </div>
    <div style="width:23em;clear:both;text-align:center;">
      <hr />
      <input type="button" value="Cancel" class="cancelModalButton" 
             data-modal="myDialog" />
      <input type="submit" value="Submit" class="submitModalButton" 
             data-modal="myDialog" data-form="myForm" />
    </div>
  }
</div> 
```

产生的标记：

```
<div id="myDialog" class="editModal" title="Update Percentage">
  <form action="/Web/MyController/UpdatePercentage?Length=3" 
        data-ajax="true" data-ajax-method="Post" data-ajax-success="onUpdateSuccess" 
        id="form2" method="post" name="myForm">
    <div class="validation-summary-valid" data-valmsg-summary="true" 
         style="width:auto;max-width:22em;float:left;clear:both;">
      <ul>
        <li style="display:none"></li>
     </ul>
    </div>
    <div style="width:auto;float:left;clear:both;margin-bottom:.75em;">
      <div style="width:10em;float: left;text-align:right;clear:left;">
        <label for="Percentage:">Percentage:</label>
      </div>
      <div style="width:12em;margin-left:1em;float:left;clear:right;">
        <input data-val="true" data-val-number="The field Percentage must be a number." 
               data-val-range="Percentage can only be between 0 and 100" 
               data-val-range-max="100" data-val-range-min="0" 
               data-val-required="Percentage is required" id="Percentage" 
               name="Percentage" type="text" value="10" />
      </div>
    </div>
    <div style="width:23em;clear:both;text-align:center;">
      <hr />
      <input type="button" value="Cancel" class="cancelModalButton" data-modal="myDialog" />
      <input type="submit" value="Submit" class="submitModalButton" data-modal="myDialog" data-form="myForm" />
    </div>
  </form>
</div> 
```

我看到类型设置为`text`，如果我`TextBoxFor`将`EditorFor`其更改为 ，`number`但我仍然看到相同的行为。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-17T16:40:44.167

我遇到了这个确切的问题，并在[这里](https://stackoverflow.com/a/14989703/150342)找到了解决方案。您需要升级以下内容：

jQuery Validation（至少 1.11.1）
Microsoft jQuery Unobtrusive Validation（至少 2.0.30116.0）
Microsoft jQuery Unobtrusive Ajax（至少 2.0.30116.0）

该问题是由 jQuery 1.9.1 中的重大更改引入的

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T03:46:42.573

试试`[Range(0, 100)]`。完全删除`ErrorMessage`以确保您没有使用错误的格式和大括号破坏任何内容。

如果纯范围无法正常工作，请让力量 (MS) 与您同在！:)

# c# - 我应该为 asp.net mvc 应用程序中常用引用的程序集设置复制本地 false 吗？

> ID：15370773
> 
> 赞同：2
> 
> 时间：2013-03-12T19:49:32.687
> 
> 标签：c#, asp.net, .net, asp.net-mvc, .net-4.0

我的组织为业务逻辑内容定义了一些程序集。我们正在尝试为这些公共库设置持续集成，并维护引用它们的项目模板。这将使我们能够相对快速地完成小型维护应用程序。

目标是按版本将这些 dll 放在一个文件夹中，并在运行时在 Global.asax 中解析它们。如果没有在本地复制它们，我会发现各种东西都会中断，例如强类型的剃刀视图。

将它们放在一个共享目录中是否有任何真正的好处，或者是在引用共享项目源并复制本地的同时构建主要应用程序的最佳实践？

我的同事认为，如果业务逻辑发生变化，共享位置将便于以后修复错误。我觉得我们永远不需要全局更改某些对象或服务，如果我们这样做了，我们无论如何都必须触摸每个应用程序来处理更改。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T20:01:10.550

[将NuGet 包](http://docs.nuget.org/docs/creating-packages/creating-and-publishing-a-package)中的共享 DLL 发布到[本地 NuGet 服务器](http://docs.nuget.org/docs/creating-packages/hosting-your-own-nuget-feeds)！这样，每个依赖应用程序都可以显式依赖于包的特定版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T20:21:13.730

将您的 DLL 放在一个共享的公用文件夹中。这是为了防止您在应用程序中可能遇到的任何未来问题无法解决或“混淆”它应该使用的 DLL。

# javascript - 使用 google map api v3 获取 onclick 信息

> ID：15370774
> 
> 赞同：-2
> 
> 时间：2013-03-12T19:49:35.067
> 
> 标签：javascript, google-maps-api-3, map, textbox, onclick

我正在使用 google map api v3 做一个与地图相关的网络应用程序。现在我在地图的一侧有一组文本框，如下所示。红色的用户可以根据需要添加任意数量的航路点。

![在此处输入图像描述](../Images/919d61885e162cfced40ad9c0d63f426.png)

现在我想做一些类似于谷歌地图的事情，当用户点击地图或特定的兴趣点时，与该点相关的一些数据将显示在光标所在的文本框中。

有什么想法我可以完成这样的任务吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T20:03:50.777

每个文本框都必须有一个 ID。当你的事件被触发时，触发函数

```
<script>
var text_to_be_inserted = "sample";
function onEvent(){
    document.getElementById("textbox_1").value='';
    document.getElementById("textbox_2").value='';
    if(document.getElementById("textbox_1").focused){
        document.getElementById("textbox_1").value=text_to_be_inserted;
    }
    else if(document.getElementById("textbox_2").focused){
        document.getElementById("textbox_2").value=text_to_be_inserted;
    }
    else{
        // do nothing
    }
}
</script> 
```

# php - 登录后重定向cookie，表单如何处理？

> ID：15370780
> 
> 赞同：1
> 
> 时间：2013-03-12T19:50:11.160
> 
> 标签：php, forms, redirect, post, cookies

我将用户的当前 URL 保存在`$_COOKIE['redirect']`允许来宾用户访问的每个 PHP 页面上。但在每个页面上还有一个登录链接。当用户点击登录时，他会被带到一个登录页面——在成功认证后——通过引用`$_COOKIE['redirect']`.

这一切都很好，除了用户可以选择进入登录页面的页面之一是他在上一页*提交表单*后到达的页面。

因此，当用户被重定向到该页面时，它缺少从前一页的表单中填充所需的信息，因此它显示了损坏的链接等。

所以它是这样的：

1.  用户在第 1 页，并通过“post”将一些信息提交到第 2 页。
2.  用户现在在第 2 页，并决定使用“登录”链接，该链接将他带到登录页面。
3.  登录功能对用户进行身份验证，然后将他重定向到登录前的位置，即第 2 页。
4.  由于第 2 页不再有从第 1 页传递给它的信息，因此它变得一团糟，缺少链接和文本等。

除了重组我做所有事情的方式之外，还有什么解决方案吗？无论如何，重定向 URL 还能以某种方式记住通过上一页发布的重要信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:26:55.333

我最好的选择是这个..

**场景：** 用户提交了一些数据后，来到了第2页。您的 cookie 会将他重定向到该页面

**解决方案：** 因此，与其再次重新提交数据（我猜这是没用的），不如简单地将 page2 中的用户重定向到 page1，如果他没有所需的数据..

这需要确定，因为如果用户直接输入 page2 的 URL 会怎样......即，没有发布数据）......即使那样你也会遇到这个问题。所以上述解决方案阻止了这种情况的发生

# map - 如何下载 mapbox 画廊站点数据？

> ID：15370782
> 
> 赞同：0
> 
> 时间：2013-03-12T19:50:24.263
> 
> 标签：map, gist, mapbox

我正在尝试制作网络连接图。MapBox 地图库有一些布局非常精美的地图，我想将坐标数据用于其他目的。

我知道这是一个长镜头，但有谁知道这些地图如何呈现数据以及在它们准备好网络后是否可以访问坐标？

即地图： http: [//mapbox.com/tilemill/gallery/#tmcw.rrrr2](http://mapbox.com/tilemill/gallery/#tmcw.rrrr2)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T00:10:03.973

对于这张地图，你很幸运！[@tmcw](http://twitter.com/tmcw)在这里写过关于制作地图的过程：

**文章**
[http://macwright.org/2011/07/28/mapping-runs.html](http://macwright.org/2011/07/28/mapping-runs.html)

**演示**
[http://macwright.org/running](http://macwright.org/running)

**代码**
[https://github.com/tmcw/running](https://github.com/tmcw/running)

# google-places-api - Web Social 的 Google Place API 搜索

> ID：15370785
> 
> 赞同：-1
> 
> 时间：2013-03-12T19:50:41.137
> 
> 标签：google-places-api

Google Place API 搜索

网络社交

*   有网页
*   有 Facebook 页面
*   有推特页面
*   有 Yelp 页面
*   有电子邮件

如何在搜索中搜索或添加这些参数？

[https://maps.googleapis.com/maps/api/place/textsearch/xml?query=restaurants+in+Sydney&sensor=true&key=AddYourOwnKeyHere](https://maps.googleapis.com/maps/api/place/textsearch/xml?query=restaurants+in+Sydney&sensor=true&key=AddYourOwnKeyHere)

我应该在此处添加哪个属性以仅搜索那些有 Facebook 页面的地方？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T20:14:43.203

不，您不能添加这些参数；它们不是 API 的一部分。如果是这样，您可能必须自己编写代码才能对其进行筛选。我认为您不了解 API 的作用。

首先，您搜索可以为您提供[初步结果](https://developers.google.com/places/documentation/search#PlaceSearchResults)的业务。从那里您选择您想要了解更多的业务（如果可以通过 API 获得，您正在寻找的信息将在哪里），然后您将获得[有关业务](https://developers.google.com/places/documentation/details#PlaceDetailsResults)的详细信息。

# java - 使用 Swing 显示动画 PNG（apng）？

> ID：15370786
> 
> 赞同：14
> 
> 时间：2013-03-12T19:50:41.230
> 
> 标签：java, swing, png, gif, apng

我试图通过像往常一样`apng`将图像添加到 a 来显示动画 png（称为 ） 。`JLabel`这适用于普通`gif`动画，但是，我更希望能够支持`apng`。

我一直在网上搜索现有的框架或解决方案，但一无所获。有没有其他人找到一种在 Swing 中显示动画 png 的方法？

要了解我为什么要实现`apng`，请查看以下演示 GIF 限制的示例：http: [//jsfiddle.net/RUX8w/](http://jsfiddle.net/RUX8w/) *（您的浏览器必须支持 apng！）*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T19:22:40.410

“apng Java”的快速 Google 出现了[http://code.google.com/p/javapng](http://code.google.com/p/javapng)，特别是[http://code.google.com/p/javapng/source/browse/trunk/javapng2/src /apng/com/sixlegs/png/AnimatedPngImage.java?r=300](http://code.google.com/p/javapng/source/browse/trunk/javapng2/src/apng/com/sixlegs/png/AnimatedPngImage.java?r=300)

# java - Java - 重新加载类时关闭套接字

> ID：15370791
> 
> 赞同：1
> 
> 时间：2013-03-12T19:50:53.263
> 
> 标签：java, sockets, port, reload

所以我正在为 IRC 开发服务器，我添加了一个配置屏幕，您可以在其中编辑它正在使用的端口，但我必须重新初始化`Listen`该类才能使其生效，所以我在我的 Config 类中有这个：

```
Listen.closePorts();
new Listen(); 
```

这是我的听课：

```
package server.network;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.net.ServerSocket;
import java.net.Socket;

import server.Server;
import server.gui.GUIMain;

public class Listen {
    private static Socket socket = null;
    private int port;

    public Listen() {
        try {
            port = Server.listenPort;
            @SuppressWarnings("resource")
            ServerSocket serverSocket = new ServerSocket(port);
            GUIMain.jta.append("\nServer Started and listening for messages on port " + port + ".\n");

            while(true) {
                socket = serverSocket.accept();
                InputStream is = socket.getInputStream();
                InputStreamReader isr = new InputStreamReader(is);
                BufferedReader br = new BufferedReader(isr);
                String msg = br.readLine();
                GUIMain.jta.append("Received message from client: " + msg + "\n");
            }
        } catch (Exception e) {
            GUIMain.jta.append("Port " + port + " already in use!\n");
        } finally {
            try {
                socket.close();
            }  catch(Exception e) { }
        }
    }

    public static void closePorts() {
        try {
            socket.close();
            GUIMain.jta.append("Server closed\n");
        } catch (IOException e) { }
    }
} 
```

当我启动应用程序时，它运行此类，打开指定端口的套接字，但是当我尝试在此处关闭端口时：

```
public static void closePorts() {
    try {
        socket.close();
        GUIMain.jta.append("Server closed\n");
    } catch (IOException e) { }
} 
```

它挂在`socket.close();`

如果我注释掉`Listen.closePorts();`并尝试重新加载类并保持套接字打开，`catch()`如果端口与正在使用的端口相同，它要么挂起要么运行。

长话短说，如何在重新初始化课程并使用新端口之前关闭套接字？

这是它抛出的完整异常：

```
java.lang.NullPointerException
    at server.network.Listen.closePorts(Listen.java:44)
    at server.gui.GUISettings.actionPerformed(GUISettings.java:86)
    at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
    at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source)
    at java.awt.Component.processMouseEvent(Unknown Source)
    at javax.swing.JComponent.processMouseEvent(Unknown Source)
    at java.awt.Component.processEvent(Unknown Source)
    at java.awt.Container.processEvent(Unknown Source)
    at java.awt.Component.dispatchEventImpl(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Window.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$200(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T20:05:02.620

不提供直接解决方案，但不会引发异常，因为您的代码正在吞噬它们。空的 catch 块从来都不是好习惯。至少，使用 e.printStackTrace() 打印捕获的异常的堆栈跟踪

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T20:18:39.130

`socket`直到客户端发出请求后才分配变量。如果您`closePorts()`在此之前调用，您的程序仍将等待`socket = serverSocket.accept();`并`socket.close()`抛出 NullPointerException，因为`socket`仍将为 null。

有关 ServerSocket.accept() 的描述，请参见[http://docs.oracle.com/javase/7/docs/api/java/net/ServerSocket.html#accept(](http://docs.oracle.com/javase/7/docs/api/java/net/ServerSocket.html#accept()) )。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T22:49:59.690

这里没有类重新加载，您不需要关闭现有客户端接受的套接字。只需关闭 ServerSocket 并在新端口上重新创建它。

# c# - 针对不同场景设计用户控件

> ID：15370793
> 
> 赞同：-1
> 
> 时间：2013-03-12T19:51:04.097
> 
> 标签：c#

现在我正在开发一个注册系统，基本上有三种不同的场景来获取用户的个人信息（姓名，地址，例如） 1\. 从 table1 预填充数据 2\. 从 table2 预填充数据 3\. 新用户为空

我正在尝试为这三种情况制作个人信息用户控件，在这种情况下，我想我需要一个开关来确定要转到哪个表。我的问题是这样做值得吗？因为我不确定客户将来是否会添加更多场景。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T20:00:55.477

想法：尝试制作尽可能基本的控件 - 一个具有尽可能多的通用逻辑的控件，因此它可以作为所有三种情况的基础。

现在创建三个继承自该基本控件的新控件，同时尽量限制这三个控件中的逻辑。

现在希望“客户”（？）以后不要添加非常不同的场景；只要任何新场景没有太大不同，您无论如何都可以再次使用基本控制器中的逻辑。

希望这能让你坚持 DRY 原则，正如 Miky Dinescu 所提到的，同时仍然支持现有的和潜在的未来变化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T19:53:43.463

是的，总的来说，遵循 DRY（不要重复自己）原则是个好主意。如果您要在两个（或更多）地方展示相同的用户界面，您应该尝试一次编码/设计并重用它。

即使您只看到一个数据源，您也应该尝试将表示与模型和业务逻辑分离。

它使代码维护和测试更容易。

# html - 带有图像的 CSS 溢出容器不起作用？

> ID：15370796
> 
> 赞同：0
> 
> 时间：2013-03-12T19:51:17.657
> 
> 标签：html, css, image, overflow

我是一个全新的 CSS 的 javascript/PHP 程序员，并且在将图像显示在溢出的容器中时遇到了一些麻烦。我的理解是，下面的代码应该以三行显示图像，它们之间有 15 像素的空间。相反，它会在 div 所在位置的左上角显示一个图像。如果我删除 div 的 ID，图像会沿垂直线显示，如果我完全删除 div，它们通常会向右流过页面。当我给 div 一个背景颜色时，它看起来是正确的大小和正确的位置。

```
#items_container {
    position:absolute;
    overflow:auto;
    height:500px;
    width:500px;
}
.item_image {
    margin: 0 15px 15px 0;
    padding: 0 0 0 0;
}

<div id="items_container">
    <img src="imageLocation" height="150" width="150" class="item_image" />
    <img src="imageLocation" height="150" width="150" class="item_image" />
    <img src="imageLocation" height="150" width="150" class="item_image" />
    <img src="imageLocation" height="150" width="150" class="item_image" />
    <img src="imageLocation" height="150" width="150" class="item_image" />
    <img src="imageLocation" height="150" width="150" class="item_image" />
</div> 
```

我还尝试在 HTML 中为容器 div 指定高度/宽度，并在 CSS 中为图像类指定高度/宽度。也没有做任何事情。谢谢大家的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T19:57:28.677

不确定我是否完全理解这个问题，但这就是我将如何布局您的结构：

[http://jsfiddle.net/mDXL2/](http://jsfiddle.net/mDXL2/)

**HTML**

```
<div id="items_container">
    <img src="imageLocation" height="150" width="150" class="item_image" />
    <img src="imageLocation" height="150" width="150" class="item_image" />
    <img src="imageLocation" height="150" width="150" class="item_image" />
    <img src="imageLocation" height="150" width="150" class="item_image" />
    <img src="imageLocation" height="150" width="150" class="item_image" />
    <img src="imageLocation" height="150" width="150" class="item_image" />
</div> 
```

**CSS**

```
#items_container {
    overflow:hidden;
    height:500px;
    width:500px;
}
.item_image {
    float:left;
    margin: 0 15px 15px 0;
    padding: 0 0 0 0;
} 
```

溢出隐藏可以替换为清除，但我更喜欢走溢出隐藏路线。

之后，您只需要浮动所有 .item_image 元素。

# ios - 自定义视图在缩放后重绘时如何防止“反弹”效果？

> ID：15370803
> 
> 赞同：1
> 
> 时间：2013-03-12T19:51:55.770
> 
> 标签：ios, uiscrollview, zooming

**临时读者注意：**尽管有标题，但这个问题与`UIScrollView`属性`bounces`（滚动相关）或`bouncesZoom`.

我正在使用`UIScrollView`将缩放添加到自定义视图。自定义视图使用子图层来绘制其内容。每个子层都是一个`CALayer`实例，使用 . 添加到视图的主层`[CALayer addSublayer:]`。子层使用 CoreGraphics 来渲染它们的内容。

每次缩放完成后，自定义视图需要以新的缩放比例重新绘制其内容，以使内容再次显得清晰锐利。我目前正在尝试使用[此 SO question](https://stackoverflow.com/questions/3313947/redrawing-uiscrollview-contents-after-every-zoom)中显示的工作方法，即在每次缩放操作后将滚动视图的`zoomScale`属性重置为 1.0，然后调整`minimumZoomScale`和`maximumZoomScale`属性，以便用户不能放大/缩小比原来更多故意的。

内容重绘已经正常工作（！），但我缺少的是平滑的 GUI 更新，以便缩放的内容被重绘到位而不会出现移动。使用我当前的解决方案（代码示例在这个问题的底部），我观察到一种“反弹”效果：缩放操作结束后，缩放的内容会短暂移动到不同的位置，然后立即移动回原来的位置地点。

我不完全确定“反弹”效果的原因是什么：要么有两个 GUI 更新周期（一个用于重置`zoomScale`到 1.0，另一个用于重置`setNeedsDisplay`），或者正在发生某种动画，使这两个更改都可见，一个在另一个之后。

我的问题是：如何防止上述“反弹”效应？

**更新：**以下是一个最小但**完整**的代码示例，您可以简单地复制和粘贴来观察我正在谈论的效果。

1.  使用“空应用程序”模板创建一个新的 Xcode 项目。
2.  将下面的代码分别添加到`AppDelegate.h`和。`AppDelegate.m`
3.  在项目的链接构建阶段，添加对`QuartzCore.framework`.

进入的东西`AppDelegate.h`：

```
#import <UIKit/UIKit.h>

@class LayerView;

@interface AppDelegate : UIResponder <UIApplicationDelegate, UIScrollViewDelegate>
@property (nonatomic, retain) UIWindow* window;
@property (nonatomic, retain) LayerView* layerView;
@end 
```

进入的东西`AppDelegate.m`：

```
#import "AppDelegate.h"
#import <QuartzCore/QuartzCore.h>

@class LayerDelegate;

@interface LayerView : UIView
@property (nonatomic, retain) LayerDelegate* layerDelegate;
@end

@interface LayerDelegate : NSObject
@property(nonatomic, retain) CALayer* layer;
@property (nonatomic, assign) CGFloat zoomScale;
@end

static CGFloat kMinimumZoomScale = 1.0;
static CGFloat kMaximumZoomScale = 5.0;

@implementation AppDelegate

- (void) dealloc
{
  self.window = nil;
  self.layerView = nil;
  [super dealloc];
}

- (BOOL) application:(UIApplication*)application didFinishLaunchingWithOptions:(NSDictionary*)launchOptions
{
  [UIApplication sharedApplication].statusBarHidden = YES;
  self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
  self.window.backgroundColor = [UIColor whiteColor];

  UIScrollView* scrollView = [[[UIScrollView alloc] initWithFrame:self.window.bounds] autorelease];
  [self.window addSubview:scrollView];
  scrollView.contentSize = scrollView.bounds.size;
  scrollView.delegate = self;
  scrollView.minimumZoomScale = kMinimumZoomScale;
  scrollView.maximumZoomScale = kMaximumZoomScale;
  scrollView.zoomScale = 1.0f;
  scrollView.bouncesZoom = NO;

  self.layerView = [[[LayerView alloc] initWithFrame:scrollView.bounds] autorelease];
  [scrollView addSubview:self.layerView];

  [self.window makeKeyAndVisible];
  return YES;
}

- (UIView*) viewForZoomingInScrollView:(UIScrollView*)scrollView
{
  return self.layerView;
}

- (void) scrollViewDidEndZooming:(UIScrollView*)scrollView withView:(UIView*)view atScale:(float)scale
{
  CGPoint contentOffset = scrollView.contentOffset;
  CGSize contentSize = scrollView.contentSize;

  scrollView.maximumZoomScale = scrollView.maximumZoomScale / scale;
  scrollView.minimumZoomScale = scrollView.minimumZoomScale / scale;
  // Big change here: This resets the scroll view's contentSize and
  // contentOffset, and also the LayerView's frame, bounds and transform
  // properties
  scrollView.zoomScale = 1.0f;

  CGFloat newZoomScale = self.layerView.layerDelegate.zoomScale * scale;
  self.layerView.layerDelegate.zoomScale = newZoomScale;

  self.layerView.frame = CGRectMake(0, 0, contentSize.width, contentSize.height);
  scrollView.contentSize = contentSize;
  [scrollView setContentOffset:contentOffset animated:NO];

  [self.layerView setNeedsDisplay];
}

@end

@implementation LayerView

- (id) initWithFrame:(CGRect)frame
{
  self = [super initWithFrame:frame];
  if (self)
  {
    self.layerDelegate = [[[LayerDelegate alloc] init] autorelease];
    [self.layer addSublayer:self.layerDelegate.layer];
    // super's initWithFrame already invoked setNeedsDisplay, but we need to
    // repeat because at that time our layerDelegate property was still empty
    [self setNeedsDisplay];

  }
  return self;
}

- (void) dealloc
{
  self.layerDelegate = nil;
  [super dealloc];
}

- (void) setNeedsDisplay
{
  [super setNeedsDisplay];
  // Zooming changes the view's frame, but not the frame of the layer
  self.layerDelegate.layer.frame = self.bounds;
  [self.layerDelegate.layer setNeedsDisplay];
}

@end

@implementation LayerDelegate

- (id) init
{
  self = [super init];
  if (self)
  {
    self.layer = [CALayer layer];
    self.layer.delegate = self;
    self.zoomScale = 1.0f;
  }
  return self;
}

- (void) dealloc
{
  self.layer = nil;
  [super dealloc];
}

- (void) drawLayer:(CALayer*)layer inContext:(CGContextRef)context
{
  CGRect layerRect = self.layer.bounds;
  CGFloat radius = 25 * self.zoomScale;
  CGFloat centerDistanceFromEdge = 5 * self.zoomScale + radius;

  CGPoint topLeftCenter = CGPointMake(CGRectGetMinX(layerRect) + centerDistanceFromEdge,
                                      CGRectGetMinY(layerRect) + centerDistanceFromEdge);
  [self drawCircleWithCenter:topLeftCenter radius:radius fillColor:[UIColor redColor] inContext:context];

  CGPoint layerCenter = CGPointMake(CGRectGetMidX(layerRect), CGRectGetMidY(layerRect));
  [self drawCircleWithCenter:layerCenter radius:radius fillColor:[UIColor greenColor] inContext:context];

  CGPoint bottomRightCenter = CGPointMake(CGRectGetMaxX(layerRect) - centerDistanceFromEdge,
                                          CGRectGetMaxY(layerRect) - centerDistanceFromEdge);
  [self drawCircleWithCenter:bottomRightCenter radius:radius fillColor:[UIColor blueColor] inContext:context];
}

- (void) drawCircleWithCenter:(CGPoint)center
                       radius:(CGFloat)radius
                    fillColor:(UIColor*)color
                    inContext:(CGContextRef)context
{
  const int startRadius = [self radians:0];
  const int endRadius = [self radians:360];
  const int clockwise = 0;
  CGContextAddArc(context, center.x, center.y, radius,
                  startRadius, endRadius, clockwise);
  CGContextSetFillColorWithColor(context, color.CGColor);
  CGContextFillPath(context);
}

- (double) radians:(double)degrees
{
  return degrees * M_PI / 180;
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T20:22:17.237

根据您的示例项目，关键是您正在直接操作 CALayer。默认情况下，设置 CALayer 属性（例如 frame）会导致动画。使用的建议`[UIView setAnimationsEnabled:NO]`是正确的，但只影响基于 UIView 的动画。如果您执行 CALayer 等效项，请在您的 setNeedsDisplay: 方法中说：

```
[CATransaction begin];
[CATransaction setDisableActions:YES];
self.layerDelegate.layer.frame = self.bounds;
[CATransaction commit]; 
```

它可以防止隐式的换帧动画，并且在我看来是正确的。您还可以通过 LayerDelegate 类中的 CALayerDelegate 方法禁用这些隐式动画：

```
- (id<CAAction>)actionForLayer:(CALayer *)layer forKey:(NSString *)event {
    return (id)[NSNull null]; // NSNull means "don't do any implicit animations"
} 
```

原始建议：

也许您在不知情的情况下处于动画块中？或者，也许您正在调用的方法之一是设置动画块？如果您`[UIView setAnimationsEnabled:NO]`在代码之前并在之后重新启用它们怎么办？

如果它不是动画，那么它可能就像你所怀疑的那样；两种视图更新。（也许一个来自滚动视图，另一个来自您的代码？）在这种情况下，一些可运行的示例代码会很棒。

（出于好奇，您是否尝试过使用 CALayer 的 shouldRasterize 和 rasterizationScale 而不是伪造缩放级别？）

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-12T19:56:56.680

在 X Code 用户界面构建器中有一个`Bounce`设置（位于 下`Scroll View`）。

# sql - 带走 EXISTS 但留在开关中

> ID：15370812
> 
> 赞同：2
> 
> 时间：2013-03-12T19:52:17.460
> 
> 标签：sql, sql-server-2012

如何修改最终脚本以使其也具有排除开关？我不想`EXISTS`在最终脚本中使用：

```
SELECT MyField = 'x' INTO #Data
UNION SELECT MyField = 'y'
UNION SELECT MyField = 'z'
UNION SELECT MyField = 'j'
UNION SELECT MyField = 'q'
UNION SELECT MyField = NULL;

SELECT MyField = 'j' INTO #Exclusions
UNION  SELECT MyField = 'q'
UNION SELECT MyField = NULL;

DECLARE @ShowAll TINYINT = 1; -->>exceptions "switch" is turned ON so all data returned
SELECT *
FROM   #Data d
WHERE  @ShowAll = 1 OR 
       (
       EXISTS
         (
         SELECT d.MyField 
         EXCEPT
         SELECT MyField FROM #Exclusions
         )
       );

--can I simplify and get rid of the EXISTS but still include a switch based on @ShowAll ? 
SELECT *
FROM   #Data d
       EXCEPT
       SELECT MyField FROM #Exclusions; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T19:57:01.310

```
SELECT *
FROM   #Data d
       EXCEPT
       SELECT MyField FROM #Exclusions WHERE @ShowAll <> 1; 
```

[http://sqlfiddle.com/#!6/d41d8/3125](http://sqlfiddle.com/#!6/d41d8/3125)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T19:53:46.697

将其包装在存储过程中并将开关作为选项传递。

# ruby-on-rails-3 - 如何在 Rails 控制台中加载环境变量？

> ID：15370814
> 
> 赞同：33
> 
> 时间：2013-03-12T19:52:20.433
> 
> 标签：ruby-on-rails-3, environment-variables, irb, foreman

我认为这是一个小而简单的问题！

我正在使用`.env`文件来保留我所有的环境变量，并且我正在使用`foreman`.

不幸的是，这些环境变量在运行 rails 控制台时没有被加载，`rails c`所以我现在在运行控制台后手动加载它们，这不是最好的方法。

我想知道是否有更好的方法。

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-06-10T21:43:16.170

大约一年前，“运行”命令被添加到`foreman`

参考：[https ://github.com/ddollar/foreman/pull/121](https://github.com/ddollar/foreman/pull/121)

您可以按如下方式使用它：

`foreman run rails console`

或者

`foreman run rake db:migrate`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T07:19:21.290

rails 不知道 .env 文件中指定的环境变量，因为它特定于工头。您需要在调用 rails 控制台之前显式设置环境。看看[这个问题](https://stackoverflow.com/questions/5715157/read-run-environment-variables-in-a-text-file)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-06-14T10:39:48.460

我个人在开发和测试环境中使用[dotenv 。](https://github.com/bkeepers/dotenv)使用这种方法，您不必为命令添加前缀，只需在以下代码中调用初始化程序`config/application.rb`：

```
Bundler.require(*Rails.groups)

Dotenv::Railtie.load

HOSTNAME = ENV['HOSTNAME'] 
```

# php - 使用.htaccess，阻止用户访问资源目录，但允许源代码访问资源

> ID：15370820
> 
> 赞同：6
> 
> 时间：2013-03-12T19:52:50.877
> 
> 标签：php, .htaccess, security

抱歉，如果我的问题不清楚，但我不太了解行话。“资源目录”是指我的 css、php 脚本、图像、javascript 等。

我在我的图像目录中使用了一个 .htaccess 文件，其中包含

```
deny from all 
```

去做这个。尽管这阻止了人们在他们的浏览器中输入“www.example.com/images”并访问我的图像目录，但图像停止出现在我的网站上。

我认为这是因为 .htaccess 文件甚至拒绝我的源代码访问图像。如何让我的源代码访问目录？我还有一个每天晚上运行 php 脚本的 cron 作业。还需要允许 cron 作业访问脚本目录。

此外，使用 .htaccess 文件是保护网站的最佳方式吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-12T19:55:02.173

为了防止有人查看您的图像目录，您需要禁止`Directory Listing`. [http://viralpatel.net/blogs/htaccess-directory-listing-enable-disable-allow-deny-prevent-htaccess-directory-listing/](http://viralpatel.net/blogs/htaccess-directory-listing-enable-disable-allow-deny-prevent-htaccess-directory-listing/)

您不能使用`deny from all`，因为无法从 Web 浏览器从该目录加载任何内容，因此您在网站上加载的图像也不会加载。

`Options -Indexes`将不允许人们列出您的图像目录中的文件。请参阅[http://viralpatel.net/blogs/htaccess-directory-listing-enable-disable-allow-deny-prevent-htaccess-directory-listing/](http://viralpatel.net/blogs/htaccess-directory-listing-enable-disable-allow-deny-prevent-htaccess-directory-listing/)

为了保护数据不被不应该查看的人查看，您可以使用身份验证。您可以使用 htaccess 设置登录字段，或使用例如 PHP 或 python 的脚本之一。

使用 htaccess 登录脚本： 脚本： [http](http://www.htaccesstools.com/htpasswd-generator/) ://www.htaccesstools.com/htpasswd-generator/ 密码文件： [http ://www.htaccesstools.com/htaccess-authentication/](http://www.htaccesstools.com/htaccess-authentication/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-26T12:24:18.597

您可以阻止访问您想要的任何目录：

在你的 httpd.conf 文件中添加这个片段（你可以在这里找到 httpd.conf 文件 C:\wamp\bin\apache\apache2.4.9\bin）

```
<Directory "c:/wamp/www/directory_A/">
    Options -Indexes
</Directory> 
```

在这种情况下，您可以访问 www 目录，但不能在 directory_A 内。或者

```
<Directory "c:/wamp/www/directory_A/uploads/">
    Options -Indexes
</Directory> 
```

在这种情况下，您可以访问“directory_A/”目录，但不能在“uploads/”内。

# configuration - 如何在 SSIS 中动态设置执行包任务的位置

> ID：15370830
> 
> 赞同：1
> 
> 时间：2013-03-12T19:53:16.837
> 
> 标签：configuration, ssis, package, task, execute

我正在尝试在 SQL Server 2008 中设置一个“主”SSIS 包来运行其他“子”包。在开发“子”包时，我们将所有包都放在磁盘上，因此我们可以轻松调试它们，因此我们在开发过程中使用文件连接器并且可以很好地监控进度。

当我们部署时，我们将子包部署到 SQL Server 上的 SSIS，然后通过并更改所有执行包任务以使用“SQL Server”的位置值并设置 PackageName。完成后，我们部署“master”。

我想做的是在执行包任务上使用表达式来设置连接属性，以便我们可以根据环境进行配置。我们已经使用一个视图设置了一个 SQL Server 配置数据库，该视图检查查询的主机名并根据查询返回不同的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T20:20:12.607

你有选择。您使用表达式的思路是正确的，但您也可能会从使用配置中受益。

要使用表达式，您需要使用脚本任务或执行 SQL 任务来返回要处理的文件列表。

您要么必须将每个返回值分配给它自己的传递到表达式的变量，要么使用 FOR EACH 循环并通过列表工作，每次都分配子包的位置。

另一种选择是使用配置。我的偏好是在 SSIS 中使用配置表。如果在每个环境中都有相同的包列表，则可以传入根目录并使用表达式：@[User::RootPackagePath] + "\PackageName.dtsx"

或者，您可以简单地为配置表中的每个子包创建一条记录，并将其传递到包中。

## 根据评论编辑：

我成功地配置了一个包以通过配置更改以从文件系统调用一个包，然后是 SQL。

我只需要为每个传递 Connection 和 PackageName。对于 SQL，它需要来自连接管理器的名称（在我的例子中为 .\SQL2008R2）和包名称（\Package1）。对于文件系统，PackageName 是空白的，并且连接是连接管理器中的 FileConnection。

您必须将两者都保留在包中，但您可以在两者之间切换。

![配置](../Images/831d84c224f9ba3c50012741a87f73ae.png)

![执行前](../Images/11716debcaaf9bf3b8c09edf63504922.png)

![配置后](../Images/c51e35b2b86eec96e342b552071125ba.png)

# matlab - Matlab 中的这个生命游戏有什么问题？

> ID：15370833
> 
> 赞同：0
> 
> 时间：2013-03-12T19:53:26.663
> 
> 标签：matlab, conways-game-of-life

我正在尝试在 Matlab 中编写 Conway 的生活游戏，但总是出错。我没有收到错误，所以我真的不知道自己做错了什么，它什么也没做。我认为这个问题可能与单元格的计数（检查邻居的数量）或增加矩阵边界单元格的规则有关。

这是我的代码：

```
TIME = 10;
pulsar;     % creates begin matrix X
life{1} = X;
life = {};           % create list 'life'   

numrows = size(X,1); % calculate number of rows
numcolumns = size(X,2);  % calculate number of columns

current = X;        % make seed the first current(matrix you are starting off with in each step)
for i = 0:TIME;    % determine amount of times the loop will run
    nextnext = X;                     % create "nextnext" matrix to implement the rules of the game on (copy of X)
    for row = 2:numrows-1;              % for each row
        for column = 2:numcolumns-1;    % for each column
            east_of_row = column + 1;      % define how to count the cell right of target cell
            west_of_row = column - 1;      % define how to count the cell left of target cell             
            north_of_column = row - 1;     % define how to count the cell north of target cell              
            south_of_column = row + 1;     % define how to count the cell south of target cell               

            % count neighboring cells:
            neighbors = 0;                               % start counter 'neighbors' with 0

            while east_of_row <= size(X),
                 west_of_row <= size(X);,
                 north_of_column <= size(X);,
                 south_of_column <= size(X); 
                 if current(row,east_of_row) == 1              % if neighboring cell has a value of 1
                     neighbors + 1;                                 % add 1 to neighbors
                 end
                 if current(row,west_of_row) == 1              % if neighboring cell has a value of 1
                     neighbors + 1;                                  % add 1 to neighbors
                 end
                 if current(north_of_column,column) == 1       % if neighboring cell has a value of 1    
                     neighbors + 1;                                  % add 1 to neighbors
                 end
                 if current(south_of_column,column) == 1       % if neighboring cell has a value of 1    
                     neighbors + 1;                                   % add 1 to neighbors
                 end
                 if current(south_of_column,east_of_row) == 1  % if neighboring cell has a value of 1
                     neighbors + 1;                                   % add 1 to neighbors
                 end
                 if current(north_of_column,east_of_row) == 1  % if neighboring cell has a value of 1
                     neighbors + 1;                                  % add 1 to neighbors
                 end
                 if current(north_of_column,west_of_row) == 1  % if neighboring cell has a value of 1
                     neighbors + 1;                                  % add 1 to neighbors
                 end
                 if current(south_of_column,west_of_row) == 1  % if neighboring cell has a value of 1
                     neighbors + 1;                                   % add 1 to neighbors    
                 end
            end

    while east_of_row == 0,west_of_row == 0;,north_of_column == 0;,south_of_column == 0; 
    if current row,east_of_row ~= 0;
    if current(row,east_of_row) == 1              % if neighboring cell has a value of 1
        neighbors + 1;                                 % add 1 to neighbors
    end
    end
    if current row,west_of_row ~= 0; 
    if current(row,west_of_row) == 1              % if neighboring cell has a value of 1
        neighbors + 1;                                  % add 1 to neighbors
    end
    end
    if current north_of_column,column ~= 0;
    if current(north_of_column,column) == 1       % if neighboring cell has a value of 1
        neighbors + 1;                                  % add 1 to neighbors
    end
    end
    if current south_of_column,column ~= 0;
    if current(south_of_column,column) == 1       % if neighboring cell has a value of 1
        neighbors + 1;                                   % add 1 to neighbors
    end
    end
    if current south_of_column,east_of_row ~= 0;
    if current(south_of_column,east_of_row) == 1  % if neighboring cell has a value of 1
        neighbors + 1;                                   % add 1 to neighbors
    end
    end
    if current north_of_column,east_of_row  ~= 0;
    if current(north_of_column,east_of_row) == 1  % if neighboring cell has a value of 1
        neighbors + 1;                                  % add 1 to neighbors
    end
    end
    if current north_of_column,west_of_row ~= 0;
    if current(north_of_column,west_of_row) == 1  % if neighboring cell has a value of 1
        neighbors + 1;                                  % add 1 to neighbors
    end
    end
    if current south_of_column,west_of_row ~= 0;
    if current(south_of_column,west_of_row) == 1  % if neighboring cell has a value of 1
        neighbors + 1;                                   % add 1 to neighbors    
    end
    end
    end
    neigbors

        % rules of the game:

    if current(row,column) == 1              % in case a target cell has a value of 1:

        if neighbors < 2                           % if the number of neighbors is smaller than 2
            nextnext(row,column) = 0;                   % value of target cell gets 0 in nextnext
        end
        if neighbors == 2 , neighbors == 3      % if the number of neighbors is 2 or 3
            nextnext(row,column) = 1;                   % value of target cell stays 1 in nextnext
        end
        if neighbors > 3                        % if the number of neigbors is higher than 3
            nextnext(row,column) = 0;                   % value of target cell gets 0 in nextnext
        end
    end
    if current (row,column) == 0           % in case a target cell has a value of 0:

        if neighbors == 3                          % if the number of neighbors is 3
            nextnext(row,column) = 1;                   % value of target cell gets 1 in nextnext
        end
        if neighbors ~= 3                       % if the number of neigbors isn't 3
            nextnext(row,column) = 0;                  % value of target cell stays 0 in nextnext
        end
end
    end
    end

current = nextnext;       % make nextnext matrix the current matrix for the next step 
life{TIME+1} = nextnext;    % add matrix to list 'life
end

show(life); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T20:53:53.950

哇。你的代码在很多方面都很糟糕......你听说过matlab中的矢量化吗？

要计算每个单元格的邻居数量，您可以简单地通过以下方式完成：

```
neighbors = conv2( current, [1 1 1;1 0 1; 1 1 1], 'same' ); 
```

一旦你有了邻居的数量，你就可以简单地创建下一个时间步

```
nextnext = current.*( neighbors == 2 | neighbors == 3 ) + ... % all cells for which current == 1
           ( 1 - current ).*( neighbors == 3 ); 
```

您的代码存在一些问题：

1.  这条线`neighbors + 1; % add 1 to neighbors`实际上并**没有**给邻居加一。Matlab 没有`neighbors++`. 所以，如果你真的想增加`neighbors`，你必须明确地这样做：`neighbors = neighbors + 1;`

2.  我不知道你为什么使用`while`循环，但该语句`while east_of_row == 0,west_of_row == 0;,north_of_column == 0;,south_of_column == 0;`只检查第一个条件`east_of_row == 0`，其余的被评估为表达式，不计为循环条件。

3.  下一次，如果你没有得到你期望的结果并且你没有看到任何错误，请尝试逐步[调试你的代码。](http://www.mathworks.com/help/matlab/matlab_prog/debugging-process-and-features.html)

顺便说一句，你试过了吗

```
>> life 
```

# winforms - 自定义时间格式 0: 做什么？

> ID：15370836
> 
> 赞同：0
> 
> 时间：2013-03-12T19:53:30.433
> 
> 标签：winforms, c#-4.0, datetime-format

[MSDN 上的自定义日期和时间格式字符串](http://msdn.microsoft.com/en-us/library/8kb3ddd4%28v=vs.95%29.aspx)

上面的链接似乎经常使用 {0:MM/dd/yy H:mm:ss zzz}。

我了解所有字母和格式选项，但似乎找不到前面的“0：”是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T20:02:29.143

这`{0}`是一个复合格式占位符，表示格式值列表中的第一项。有关详细信息，请参阅[此 MSDN 文章](http://msdn.microsoft.com/en-us/library/26etazsy%28v=vs.110%29.aspx)，特别是底部附近称为“复合格式”的部分，或专门关于[复合格式](http://msdn.microsoft.com/en-us/library/txafckwd.aspx)的较大文章。但是，总结一下：

在 .NET 中，您可以执行两种字符串格式化：`ToString`格式化和复合格式化。它们都使用相同的自定义格式字符串语法。

当您有一个对象（如`DateTime`变量）并调用`DateTime.ToString()`该对象时，您可以传递一个格式化字符串，它将应用于该对象，并根据您的模式对其进行格式化。但是，如果您有多个对象，并且想要构建一个包含它们的值的复杂字符串，则改为调用[`String.Format`](http://msdn.microsoft.com/en-us/library/system.string.format.aspx). 该函数需要一个“格式字符串”，其中包含变量位所在的占位符，看起来像`{0:g}`或`{5:MM/dd/yy}`或其他东西。to 的其余参数`String.Format`是变量列表。占位符是第`{0}`一个变量，`{5}`是第 6 个，依此类推。

# html - 检查 Chrome 中的悬停元素？

> ID：15370838
> 
> 赞同：134
> 
> 时间：2013-03-12T19:53:39.953
> 
> 标签：html, css, hover, google-chrome-devtools

我试图通过 Chrome 的开发人员工具查看工具提示在网站上的结构。但是，即使我将鼠标悬停在项目上，当我“检查元素”时，html 中的工具提示也不会显示任何内容。我知道我可以将 Style 设置为`:hover`，但我仍然看不到工具提示的 html 或 css。

有任何想法吗？

* * *

## 回答 #1

> 赞同：160
> 
> 时间：2016-07-29T03:38:31.567

`F8`将暂停调试。

在 Mac 上，您可能需要打开开发人员工具的“源”选项卡。

将鼠标悬停在工具提示上，并`F8`在显示时按下。

您现在可以使用检查器查看 CSS。

* * *

## 回答 #2

> 赞同：101
> 
> 时间：2013-03-12T20:05:51.483

实际上，我发现了一个使用 Twitter Bootstrap 工具提示的技巧。如果您在另一台显示器上打开开发工具 (F12)，然后将鼠标悬停在元素上以显示工具提示，右键单击就像选择“检查元素”一样。保持该上下文菜单打开，将焦点移到开发工具上。工具提示的 html 应显示在元素旁边，它是 HTML 中的工具提示。然后您可以将其视为另一个元素。如果你回到 Chrome，HTML 就会消失，所以需要注意一些事情。

有点奇怪的方式，但它对我有用，所以我想我会分享它。

* * *

## 回答 #3

> 赞同：86
> 
> 时间：2014-08-06T17:54:38.237

**此解决方案无需任何额外代码即可工作。**

点击`command-option-j`打开控制台。单击控制台右上角的视窗按钮可在不同的窗口中打开控制台。

然后，在 Chrome 窗口中，将鼠标悬停在触发弹出窗口的元素上，点击`command-``您需要关注控制台的次数，然后键入`debugger`. 这将冻结页面，然后您可以检查元素选项卡中的元素。

* * *

## 回答 #4

> 赞同：67
> 
> 时间：2013-10-30T14:53:27.663

您只需要强制工具提示显示为

```
$('.myelement').tooltip('open'); 
```

现在无论悬停状态如何，工具提示都会显示。

在 DOM 底部附近向下滚动，您应该会看到标记。

**更新**见 cneuro 对 Bootstrap 3 的评论。

```
$('.myelement').tooltip('show'); 
```

**更新**见 Marko Grešak 对 Chrome 的回答，显然 Safari`$0`也可以用作当前选定元素的快捷方式。这似乎也适用于 Safari。

```
$($0).tooltip('show') 
```

* * *

## 回答 #5

> 赞同：47
> 
> 时间：2019-08-15T11:31:01.990

单击`f12`转到控制台选项卡并添加以下内容：

```
setTimeout(()=> {debugger},5000) 
```

这会给你 5 秒的时间做任何你想做的事情，它会在`5 seconds`. 然后你可以检查目标元素

（例如，悬停元素并等待 5 秒然后检查..）

* * *

## 回答 #6

> 赞同：29
> 
> 时间：2013-07-16T12:47:41.450

对我来说，接受的答案不起作用：单击 DevTools 会立即关闭 ToolTip。

但是，我发现[https://superuser.com/questions/249050/chrome-keyboard-shortcut-to-pause-script-execution](https://superuser.com/questions/249050/chrome-keyboard-shortcut-to-pause-script-execution)对我有帮助：

1.  在控制台：，运行：

```
 const F12 = 123
    window.addEventListener('keydown', function(event) { 
      if (event.keyCode === F12 ) {
        debugger; 
      }
    }); 
```

2.  使用检查器突出显示元素

3.  按 F12

您现在可以检查元素，暂停 JavaScript，这样 DOM 就不会改变。

* * *

## 回答 #7

> 赞同：26
> 
> 时间：2019-05-21T12:49:39.137

**单窗口答案，无需编码**

其他答案都不是很正确，也没有足够的细节，所以这是我的尝试。

*   使用 F12/Ctrl+Shift+I (Windows/Linux) 或 Command+Option+I (Mac) 打开 Chrome 的 DevTools。
*   在 DevTools 窗口中选择*Sources选项卡。*
*   使用鼠标，将鼠标悬停在要检查的元素上，以使工具提示可见。
*   按 F8 (Windows/Linux/Mac) 暂停脚本执行。主窗口将变灰，并出现“在调试器中暂停”弹出窗口。
*   在 DevTools 窗口中，选择*Elements*选项卡
*   对于 Bootstrap 工具提示，工具提示将显示为最后`<div>`一个`<body>`

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2018-07-03T17:33:32.413

JS激活工具提示无代码解决方案：

使用 Chrome 的 devtools 检查工具提示的包含/父元素。在“元素”选项卡中，右键单击该容器 DOM 元素，然后选择“中断”>“子树修改”。下次您将鼠标悬停在工具提示所在的 DOM 部分上时，JS 代码将暂停，以便您检查工具提示的内容。

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2019-09-19T10:39:35.030

跟着这些步骤

1.  在 chrome 中打开`Inspect`窗口。

2.  将鼠标放在工具提示上。

3.  按`F8`

    JS 执行将暂停，然后您可以检查工具提示。

4.  再次按下`F8`开始执行和`F10`调试。

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2020-03-23T12:37:59.050

编辑这些工具提示非常简单。

**第 1 步**：检查具有工具提示的元素。确保它在 devtools 中以蓝色突出显示。

**第 2 步**：右键单击元素（在 devtools 部分中）并选择：属性修改，在 Break on 下 [![在此处输入图像描述](../Images/8f9148b14e31f410fdfd3299049db615.png)](https://i.stack.imgur.com/wMk9Y.jpg)

**第 3 步**：将鼠标悬停在被检查的元素上，网站上会出现一个灰色叠加层，上面有一个小文本：在调试器中暂停

[![在此处输入图像描述](../Images/547858b36f6dc6462b1165ddd012914e.png)](https://i.stack.imgur.com/RMBJg.jpg)

在屏幕顶部

**第 4 步**：单击蓝色箭头，直到选择悬停状态。

**第 5 步**：检查和编辑工具提示

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2021-02-03T17:47:38.593

将鼠标悬停在元素上，按 F8 稍长一点，它将暂停脚本执行。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2015-11-28T11:17:47.937

这是一个简单的解决方案：如果您有动态工具提示，则可以通过（临时）将触发事件更改为`click`. 这将产生工具提示仅在单击时消失的效果：

```
$('body').tooltip({
    selector: "[data-toggle='tooltip']",
    trigger: "click"
}); 
```

这样，可以很容易地使用 FF 或 Chrome 的调试工具对其进行检查。

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2019-03-11T07:10:37.130

1) 点击 F12 打开 Inspect 窗口

2）转到源选项卡（控制台旁边）

3）现在将鼠标悬停在要检查的元素上并将鼠标悬停在那里。

4）使用键盘（Tab 或 shift+tab）将控件移动到暂停按钮或 F8[参考图像](https://i.stack.imgur.com/0S67g.png)

5）当键盘焦点在播放按钮上时。点击进入。你的悬停元素将被冻结你现在可以做任何事情

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2020-08-20T11:54:33.197

这是我在 Mac 上的做法：

1.  将鼠标悬停在具有打开 chrome devtools 的工具提示的元素上。
2.  等待工具提示出现。
3.  使用键盘快捷键打开 devtools 命令面板。`Cmd+Shift+P`为我工作。
4.  输入`Disable JavaScript`并按下`Enter`

这将防止所有使用 JavaScript 的工具提示消失。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2021-03-04T07:51:31.703

只需在控制台中点击一行脚本，然后按任意键即可进入调试模式。

```
window.onkeydown = () => { debugger } 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2019-08-19T14:09:17.327

开发工具提供了一种检查悬停元素（如工具提示）的方法。

1 - 使用 F12 打开开发工具。

2 - 选择“元素”选项卡。

3 - 选择包含工具提示的父元素。

4 - 单击“...”（在父元素的行上），然后选择“中断”/“子树修改”（见下图）

[![在父元素上设置中断](../Images/a602dd17d2c2db7895bc8c1976927721.png)](https://i.stack.imgur.com/BY8rN.png)

5 - 最后返回应用程序并显示工具提示。它应该在工具提示可见后阻止执行

希望它对某人有用！

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2021-05-10T04:14:27.303

1.  通过鼠标显示悬停的项目
2.  窗口 --> Ctrl + shift + c || Mac --> Command + Option + C

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2015-10-01T01:23:53.710

我遇到了这个问题，所以我去[了文档](http://getbootstrap.com/javascript/#tooltips-methods)并检查了页面上已经呈现的工具提示。这帮助我看到了工具提示的 dom 结构并进行了相应的编辑。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2017-02-07T15:12:09.927

在 Linux 上的 Chome 中，可以通过执行以下操作来实现 JS 生成的工具提示，例如 WikiPedia 上的参考：

如上所述，使用 F12 打开开发工具。在另一个窗口中打开它们。突出显示工具提示并单击 Ctrl-Shift-C（HTML 检查器）。当您移过提示时，开发窗口将显示相应的部分。

如果您需要在鼠标移开时保持提示打开，以便能够在另一个窗口中更彻底地检查它，请右键单击工具提示并保持上下文菜单处于打开状态，然后单击开发工具窗口。在这种情况下，它会将提示留在维基百科窗口中。

在某种程度上，它也适用于引导提示。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2017-08-03T18:35:10.477

出于某种原因，此处提供的答案在 Windows 上对我不起作用。我可以通过打开开发工具来检查工具提示，然后将鼠标悬停在显示工具提示的元素上，然后右键单击该元素（不是工具提示）。然后，将光标移到检查器面板并向下滚动到底部。工具提示元素应该仍然存在。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2020-05-22T05:18:36.597

我为这个问题找到的另一个解决方案。通过 Chrome 中的移动设备或平板电脑视图，在 Chrome 开发工具中按**Crt + Shift + M以在 Chrome 中查看移动设备视图。**在 ToolTip div 上单击（Tap），您可以通过**右键单击**工具提示来检查它

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2020-05-31T16:41:30.977

点击`command-option-j`打开控制台。单击控制台右上角的视窗按钮可在不同的窗口中打开控制台。

然后，在 Chrome 窗口中，将鼠标悬停在触发弹出窗口的元素上，点击`command-`您需要关注控制台的次数，然后键入`debugger`. 那会冻结页面；然后您可以检查元素选项卡中的元素。

* * *

## 回答 #23

> 赞同：-1
> 
> 时间：2017-01-20T15:32:17.673

值得注意的是，只有在首先通过 CSS :hover 规则启用提示文本时，从开发工具中切换 :hover 状态才会产生影响。切换仅将悬停状态应用于元素以进行渲染，但不会触发相应的 JavaScript 鼠标悬停事件。

当目标元素悬停时，许多框架（例如 AngularJS）通过 JavaScript 将工具提示 HTML 动态附加到文档正文的底部，因此任何数量的悬停和检查目标元素都无济于事。

在这种情况下，@joeyyang 的回答对我来说效果很好。

* * *

## 回答 #24

> 赞同：-3
> 
> 时间：2019-10-25T07:43:36.743

我发现的最简单的方法之一是：

1.  打开侧面的 Chrome 开发工具

2.  将鼠标悬停在元素上

3.  右键点击

4.  点击开发工具

5.  现在您可以检查和更改样式

# arrays - $/ 和 $\ 做什么？

> ID：15370841
> 
> 赞同：-1
> 
> 时间：2013-03-12T19:53:41.720
> 
> 标签：arrays, perl, special-variables

我在`$\ = $/`研究如何合并 2 个数组时发现，但我根本不明白这一点。一个例子：

```
use strict;
$\ = $/;

my @array1 = ("string1", "string2");
my @array2 = ("string3", "string4");

my @array = (@array1, @array2);

print for @array; 
```

他们的意思是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-12T19:58:42.583

`$\`是输出记录分隔符。它包含的任何内容都附加到每个`print`语句中。`$/`是输入记录分隔符，默认值为`\n`(newline)。通过将输出记录分隔符设置为换行符，您不必在打印语句中添加换行符，从而使语句：

```
print for @array; 
```

..看起来更平滑，相比

```
print "$_\n" for @array; 
```

请注意，如果他使用`use 5.010;`而不是`$\ = $/;`，他可以使用

```
say for @array; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T20:00:59.510

请参阅 Perl 文档，或者[这里有另一个很好的](http://www.kichwa.com/quik_ref/spec_variables.html)文章。

`$/`是输入记录分隔符，`$\`是输出记录分隔符。上面的链接有一些有用的助记工具来记住这些和所有其他特殊的 Perl 变量。

# javascript - cookie 值中的 javascript 错误和双引号

> ID：15370858
> 
> 赞同：0
> 
> 时间：2013-03-12T19:54:11.950
> 
> 标签：javascript, cookies

我有 2 个不同的站点，一个站点抛出 JavaScript 错误（超出我的处理范围），当我尝试登录该站点时，如果 cookie 值中有双引号，则登录过程不成功。而在另一个不存在 JavaScript 错误的站点中，登录过程是成功的。JavaScript 错误和双引号之间有什么关联吗？

这可能是一个非常开放的问题，不幸的是，执行上述场景的代码太大，无法将其粘贴到此处。

更新：

```
public static Cookie createCookie(HttpServletRequest request, String name,
   String value, boolean useDefaultPath) {

  logger.info("Cookie Name:" + name);
  logger.info("Cookie Value:" + value);
  logger.info("Cookie Domain:" + request.getServerName() + ":"
    + request.getServerPort());

  Cookie cookie = new Cookie(name, value);
  //String domain = request.getServerName();
  String domain = getSiteminderDomain(request);
  int idx = domain.indexOf('.');
  cookie.setDomain(domain.substring(idx+1));
  cookie.setMaxAge(DAY);
  if (useDefaultPath) {
   cookie.setPath(request.getPathInfo());
  } else {
   cookie.setPath("/");
  }
  logger.info("Cookie Value For Debug:" + value);
  return cookie;
} 
```

# c - C中使用浮点数的基本快速排序算法

> ID：15370862
> 
> 赞同：1
> 
> 时间：2013-03-12T19:54:21.650
> 
> 标签：c, algorithm, sorting, quicksort

基本上，在 C 中有一个快速排序算法，我需要对浮点数而不是整数进行排序。我已经编辑了代码来做到这一点（所以我想）但是当我执行代码时，只有少数在数字后面有小数位，其余的只有 '.0' 所以低于 3.4、6.5、2.3 的数字出来为2.3、3.0 和 6.5。有谁知道为什么会发生这种情况以及我该如何克服？请，任何帮助将不胜感激。

```
#include <stdio.h>

void quicksort(float [10],float,float);

int main()
{
    float array[] = {3.4, 6.5, 2.3};
  int i,elementsize = 3 ,any;

  quicksort(array,0,elementsize-1);

  printf("\nSorted elements: ");
  for(i=0;i<elementsize;i++)
    printf("%.1f ",array[i]);

  printf("\nPress Any Key to Exit");
  scanf("%d", &any);
  return 0;
}

void quicksort(float x[10],float first,float last)
{   int pivot, j, temp, i;

if(first<last){
         pivot=first;
         i=first;
         j=last;

         while(i<j){
             while(x[i]<=x[pivot]&&i<last)
                 i++;
             while(x[j]>x[pivot])
                 j--;
             if(i<j){
                 temp=x[i];
                  x[i]=x[j];
                  x[j]=temp;
             }
         }

         temp=x[pivot];
         x[pivot]=x[j];
         x[j]=temp;
         quicksort(x,first,j-1);
         quicksort(x,j+1,last);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T19:58:58.710

您正在使用 int 类型的临时变量 (temp) 来交换浮点数。这会导致不希望的截断。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T19:58:57.710

```
int pivot, j, temp, i;
^^^           ^^^^ 
```

`temp`应该有数组元素的类型，否则交换时元素会被转换。

# python - 修复 PYTHONHOME 以在 Python 中导入 liblas 模块

> ID：15370864
> 
> 赞同：0
> 
> 时间：2013-03-12T19:54:26.383
> 
> 标签：python, module, runtime-error, python-import, liblas

我在 Windows 64 位和 Python 2.7 上有以下错误消息。

liblas 模块版本是 `libLAS-1.7.0.win-amd64-py2.7.‌exe`

```
import liblas
Traceback (most recent call last):
  File "<interactive input>", line 1, in <module>
  File "C:\Python27\lib\site-packages\liblas\__init__.py", line 2, in <module>
    from core import get_version
  File "C:\Python27\lib\site-packages\liblas\core.py", line 138, in <module>
    las = ctypes.CDLL(os.path.join(local_dlls, lib_name))
  File "C:\Python27\Lib\ctypes\__init__.py", line 365, in __init__
    self._handle = _dlopen(self._name, mode)
WindowsError: [Error 193] %1 is not a valid Win32 application 
```

该模块安装在

```
C:\Python27\Lib\site-packages\liblas 
```

我多次使用这个模块（它是我工作的核心模块），但今天我遇到了这个问题。我卸载了 liblas，重新安装，卸载了所有 Python 和所有模块，然后重新安装了所有东西，我总是遇到同样的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T20:53:30.810

如果您安装了 64 位版本的 Python 和 32 位的 LibLAS dll，那么您可能会收到此类错误。[如果是这样，那么您可以在此站点](http://www.lfd.uci.edu/~gohlke/pythonlibs/#numpy)上找到该库的 64 位版本（实际上还有很多其他用于 Python 的 32 位和 64 位库）。

# jquery - 我需要帮助使用基于复选框的 jquery hide/show 隐藏标签

> ID：15370865
> 
> 赞同：0
> 
> 时间：2013-03-12T19:54:37.103
> 
> 标签：jquery, html

专家可以帮助菜鸟根据复选框选择显示/隐藏标签吗？

基本上，我希望 id=q2 在页面加载时隐藏。当用户选中第一个复选框时，它应该出现，当未选中时，应该隐藏。

我尝试实现在此站点上找到的代码，但它不起作用。

这是我的 jquery 代码并使用 ID

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
     <head>
     <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
     <title>Untitled Document</title>
 <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" ></script>
 <script language="javascript">

    $(document).ready(function() { 

       $("#q2").hide();   

       $("#q1a").change(function () {
           if(this.checked) {
        $('#q2').show();
    } else {
        $('#q2').hide();
    }   

    });
})
 </script>
 </head> 
```

这是我的 HTML 部分，根据第一个复选框，它应该显示/隐藏 id=q2。

```
 <body>
 <table>
   <tr>
     <td colspan="2"><input type="checkbox" name="Quais_medicamentos_voce_utiliza_Insulina" value="1" id="q1a" />
       &nbsp;&nbsp;Insulina<br />
       <input type="checkbox" name="Quais_medicamentos_voce_utiliza_GLP_1" value="1" />
       &nbsp;&nbsp;Análogo de GLP-1 (Victoza ou Byetta)<br />
       <input type="checkbox" name="Quais_medicamentos_voce_utiliza_Antidiabetico" value="1" />
       &nbsp;&nbsp;Antidiabético Oral (comprimido)<br />
       <input type="checkbox" name="Quais_medicamentos_voce_utiliza_Nao_utilizo" value="1" />
       &nbsp;&nbsp;Não utilizo nenhum medicamento<br />
       <input type="checkbox" name="Quais_medicamentos_voce_utiliza_Nao_sei" value="1" />
       &nbsp;&nbsp;Não sei</td>
   </tr>
   <tr>
     <td>&nbsp;</td>
   </tr>
   <div id="q2">
     <tr>
       <td height="23" colspan="2">Quais insulinas você utiliza?</td>
     </tr>
     <tr>
       <td colspan="2"><table width="809">
           <tr>
            <td width="173" valign="top"><input type="checkbox" name="Qual_is_insulinas_voce_utiliza_Apidra" value="1" />
               &nbsp;&nbsp;Apidra<br />
               <input type="checkbox" name="Qual_is_insulinas_voce_utiliza_Humalog_Mix_25" value="1" />
               &nbsp;&nbsp;Humalog Mix 25<br />
               <input type="checkbox" name="Qual_is_insulinas_voce_utiliza_Humalog" value="1" />
               &nbsp;&nbsp;Humalog<br />
               <input type="checkbox" name="Qual_is_insulinas_voce_utiliza_Humalog_Mix_50" value="1" />
               &nbsp;&nbsp;Humalog Mix 50<br />
               <input type="checkbox" name="Qual_is_insulinas_voce_utiliza_Humulin_70_30" value="1" />
               &nbsp;&nbsp;Humulin 70/30<br />
               <input type="checkbox" name="Qual_is_insulinas_voce_utiliza_Humulin_N" value="1" />
               &nbsp;Humulin N <br /></td>
            <td width="157" valign="top"><p>
                <input type="checkbox" name="Qual_is_insulinas_voce_utiliza_Humulin_R" value="1" />
                &nbsp;Humulin R<br />
                <input type="checkbox" name="Qual_is_insulinas_voce_utiliza_Insunorm_N" value="1" />
                &nbsp;Insunorm N<br />
                <input type="checkbox" name="Qual_is_insulinas_voce_utiliza_Insunorm_R" value="1" />
                &nbsp;Insunorm R<br />
                <input type="checkbox" name="Qual_is_insulinas_voce_utiliza_Insunorm_70_30" value="1" />
                &nbsp;Insunorm 70/30 <br />
                <input type="checkbox" name="Qual_is_insulinas_voce_utiliza_Lantus" value="1" />
                &nbsp;Lantus <br />
                <input type="checkbox" name="Qual_is_insulinas_voce_utiliza_Levemir" value="1" />
                &nbsp;Levemir<br />
                <br />
              </p></td>
            <td width="187" valign="top"><input type="checkbox" name="Qual_is_insulinas_voce_utiliza_Novolin_70_30" value="1" />
               &nbsp;&nbsp;Novolin 70/30 <br />
               <input type="checkbox" name="Qual_is_insulinas_voce_utiliza_Novolin_N" value="1" />
               &nbsp;&nbsp;Novolin N<br />
               <input type="checkbox" name="Qual_is_insulinas_voce_utiliza_Novolin_R" value="1" />
               &nbsp;Novolin R<br />
               <input type="checkbox" name="Qual_is_insulinas_voce_utiliza_NovoMix_30" value="1" />
               &nbsp;NovoMix 30<br />
               <input type="checkbox" name="Qual_is_insulinas_voce_utiliza_Novorapid" value="1" />
               &nbsp;Novorapid<br />
               <input type="checkbox" name="Qual_is_insulinas_voce_utiliza_Farmanguinhos_NPH" value="1" />
               &nbsp;Farmanguinhos  - NPH </td>
            <td width="272" valign="top"><p>
                <input type="checkbox" name="Qual_is_insulinas_voce_utiliza_Farmanguinhos_regular" value="1" />
                &nbsp;Farmanguinhos - Regular <br />
                <input type="checkbox" name="Qual_is_insulinas_voce_utiliza_Farmanguinhos_NPH_30_70" value="1" />
                &nbsp;Farmanguinhos - 30/70 <br />
                <input type="checkbox" name="Qual_is_insulinas_voce_utiliza_Nao_sabe" value="1" />
                &nbsp;Não sabe <br />
              </p></td>
          </tr>
         </table></td>
     </tr>
   </div>
 </table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T20:03:05.727

我不会把所有这些东西都放在一张大桌子上，而是有两个表格，隐藏和显示另一个，将它们封闭在一个 SECTION 或其他语义结构中，以显示它们在需要时是链接的。

如果这不是一个选项，请使用 THEAD 和 TBODY 将顶部和底部部分分开，并为 TBODY 提供您的`q2`id。在这样的表格中间使用 DIV 在语义上是不正确的。

这是您的代码与顶部周围有一个 THEAD 的表一起使用，并且您的 DIV 替换为 TBODY

[http://jsfiddle.net/TNMwh/](http://jsfiddle.net/TNMwh/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T19:59:05.057

你不能混合 div 和 tr

```
</tr>
<div id="q2">
<tr> 
```

这是错误的

而是将 id="q2" 添加到 tr 元素

```
<tr id="q2">...</tr> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T20:03:47.877

你不能把 a`<tr>`放在 a`<div>` 如果你只想隐藏一个`<tr>`然后添加 id 属性`<tr>` 如果你想从表中隐藏更多行，那么： 1\. 定义一个 css 类，比如说 hiddenRow：`.hiddenRow {display:none;}` 2\. 将这个类添加到您需要隐藏的所有行 3\. 将您的脚本更新为`$("tr.hiddenRow").hide();`

# c# - 从列表中查找包含任何一个字符串的任何实体

> ID：15370870
> 
> 赞同：0
> 
> 时间：2013-03-12T19:54:51.693
> 
> 标签：c#, linq, generics

由于某种原因，我无法完全理解这一点。

假设我们有一堂课`Foo`

```
public class Foo
{
    public string Name {get;set;}
} 
```

我们有一个通用列表。我想搜索通用列表并从字符串列表中挑选出那些`Name`包含任何字符串的列表。

所以像

```
var source = GetListOfFoos();//assume a collection of Foo objects
var keywords = GetListOfKeyWords();//assume list/array of strings
var temp = new List<Foo>();
foreach(var keyword in keywords)
{
    temp.AddRange(source.Where(x => x.Name.Contains(keyword));
} 
```

这里的问题是 a) 循环（我觉得不是最佳）和 b) 每个对象可能出现多次（如果名称是“Rob StackOverflow”并且有关键字“Rob”和关键字“Stackoverflow”） .

我想我可以打电话`Distinct()`，但又一次，感觉不是最理想的。

我认为我错误地处理了这个问题 - 我做错了什么？

* * *

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T19:57:23.593

> 我想搜索通用列表并从字符串列表中挑选出名称包含任何名称的列表。

听起来很简单：

```
var query = source.Where(e => keywords.Any(k => e.Name.Contains(k))); 
```

添加`ToList()`以获取结果为`List<Foo>`：

```
var temp = query.ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T20:13:50.767

将关键字放入 HashSet 以进行快速查找，这样您就不会进行 N ²循环。

```
HashSet<string> keywords = new HashSet<string>(GetListOfKeyWords(), StringComparer.InvariantCultureIgnoreCase);

var query = source.Where(x => keywords.Contains(x.Name)); 
```

编辑：实际上，我重新阅读了这个问题，并且是错误的。这只会匹配整个关键字，而不是查看名称是否包含关键字。致力于更好的修复。

我喜欢 MarcinJuraszek 的回答，但我也假设您想要不区分大小写的关键字匹配，所以我会尝试这样的事情：

```
var query = source.Where(f => keywords.Any(k => f.Name.IndexOf(k, StringComparison.OrdinalIgnoreCase) >= 0)); 
```

# linux - 阻止 Facebook 访问的 IPtables 异常

> ID：15370871
> 
> 赞同：0
> 
> 时间：2013-03-12T19:54:52.287
> 
> 标签：linux, iptables, slackware

我的网络上有 3 个 IP 范围，我使用命令行阻止了 Facebook 访问：

iptables -I FORWARD -m string --algo bm --string "facebook.com" -j DROP

我想对网络范围“192.168.0.x”做一个例外

我怎样才能做到这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T20:29:58.557

您可以简单地使用标记`negate`源 IP 地址。`!`

```
iptables -I FORWARD ! -s 192.168.0.0/24 -m string --algo bm --string "facebook.com" -j DROP 
```

# python - 为什么要分发和 pip 安装到我的 virtualenv 的 ./local/bin？

> ID：15370872
> 
> 赞同：25
> 
> 时间：2013-03-12T19:54:54.883
> 
> 标签：python, python-3.x, virtualenv, python-3.3, ubuntu-12.10

我使用 Python 3.3 的内置方式创建并激活了一个 virtualenv (venv)：

```
$ python3.3 -m venv env
$ source env/bin/activate 
```

此时`python`是我的 virtualenv 中的 python，我期望它：

```
(env) $ which python
/my_home_directory/env/bin/python 
```

现在我想安装distribute和pip，所以我下载安装脚本并运行它们：

```
(env)$ wget http://python-distribute.org/distribute_setup.py
(env)$ wget https://raw.github.com/pypa/pip/master/contrib/get-pip.py
(env)$ python distribute_setup.py
(env)$ python get-pip.py 
```

这些命令成功完成。在这一点上，我检查了我的 venv 以找到另一个以前不存在的名为“local”的目录。env/local/bin 包含我的 easy_install 和 pip 可执行文件，它们仍然是我系统现有的 easy_install 和 pip 的别名：

```
(env)$ ls env
bin  include  lib  local  pyvenv.cfg
(env)$ ls env/bin
activate  pydoc  python  python3  python3.3
(env)$ ls env/local/bin
easy_install  easy_install-3.3  pip  pip-3.3
(env)$ which easy_install
/usr/bin/easy_install
(env)$ which pip
/usr/bin/pip 
```

我相信这与 Python 2.x 的行为背道而驰。在这一点上，我希望`easy_install`并`pip`正在使用 virtualenv 的副本，并且使用它们来安装鸡蛋会将它们放入 virtualenv 中。

更进一步，我打开 env/bin/activate 发现 env/bin 被附加到系统路径，但 env/local/bin 不是。这解释了我所看到的行为。我可以通过编辑 env/bin/activate 以将 env/local/bin 目录添加到路径来解决此问题，例如：

```
_OLD_VIRTUAL_PATH="$PATH"
PATH="$VIRTUAL_ENV/bin:$PATH"
PATH="$VIRTUAL_ENV/local/bin:$PATH"  # my new line
export PATH 
```

那么，这里发生了什么？这是一个错误，还是我错过了什么？

我在 Ubuntu 12.10 上，以防万一。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-06T10:52:38.467

我感觉 Ubuntu 的 python 包中存在错误或在某个地方分发……但我没有追踪它（我不确定我是否关心）。

无论出于何种原因，都需要将 VIRTUAL_ENV 环境变量设置为 virtualenv 的根目录，以便分发和 pip 正确安装。

[这个要点](https://gist.github.com/samatjain/5720698)取自 Python 3 文档中的 Vinay Sajip 的代码示例，设置了所述变量；使用它时，distribute 和 pip 都会正确安装。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T08:53:35.733

它在 python 文档中。

'/usr/local' 是默认的[exec_prefix](http://docs.python.org/3/library/sys.html#sys.exec_prefix)。阅读[venv 文档](http://docs.python.org/3/library/venv.html)以了解如何更改默认行为的详细信息。那里甚至还有一个示例，展示了如何制作一个`venv.EnvBuilder`为您安装分发和 pip 的示例。

*如果您找到分发文档，请告诉我 ;-)*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T16:07:41.517

我有同样的问题。在`activate`脚本文件中，我需要添加为第一行（当然之后`#!...`）：

```
 unset PYTHON_PATH 
```

# javascript - 在表单提交JAVA / JAVASCRIPT期间传递DIV偏移量

> ID：15370875
> 
> 赞同：0
> 
> 时间：2013-03-12T19:55:11.553
> 
> 标签：javascript, jquery

好的，我有一个过滤器框，我在其中提交了一些表单变量以及 Java 中的一些隐藏变量。

出于这个问题的目的，我不会输入所有表单变量。

我需要做的是将DIV偏移量也作为变量传递给表单`top`和`left`

我知道我可以使用 javascript 获得偏移量：

```
var offset = $("#filterPanel").offset(); 
        //alert( $("#filterPanel").offset() ); 
         var top = offset.top;
         var left = offset.left;
          alert( "top = " +  top); 
          alert( "left = " +  left) 
```

当我按下“应用”按钮时，我需要做的是通过我的表单传递这两个变量：

```
<div class="sideMenuPanel" style="display: none; width: 290px; top: ${panelTop}px;" id="filterPanel">
<form name="filterForm" action="process.mgmtview_update_filters" method="get">
    <input type="hidden" name="metricGroup" value="${filterForm.metricGroup}" />
    <input type="hidden" name="referrer" value="${referrer}" />

        <tr>
            <td colspan="2" class="filter_section_header" style="text-align: center;">
                <input style="font-size: 8pt;" name="actionButton" value="Apply" type="submit" />

            </td>
        </tr>
    </table>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T19:59:26.950

假设您有隐藏的元素`top`并且`left`在您的表单中

`document.forms["filterForm"].top.value = top;` `document.forms["filterForm"].left.value = left;`

# html - 带有 CSS 的三角形图像

> ID：15370876
> 
> 赞同：2
> 
> 时间：2013-03-12T19:55:17.477
> 
> 标签：html, css, image, geometry

我已经到处搜索了好几个星期，但我找不到我的问题的答案。

是否可以在正三角形内放置图像？

我见过很多创建形状或蒙版的方法，但我需要一个真正的三角形，因为我需要有几个相邻的三角形，其中一些倒置对齐，就像在这个 = 图像中一样：

[http://www.tiikoni.com/tis/view/?id=d49c960](http://www.tiikoni.com/tis/view/?id=d49c960)

我用颜色来划分两种类型的三角形，但它们都有图像而不是颜色。

我试过使用 skewX、skewY 和旋转，我有足够的结果，但它并不完美：

```
<div class='pageTri2'>
<a href='#' class='option2'>
    <img src='image.jpg'>
</a>
</div>

<style>
.pageTri2 {
    overflow: hidden;
    position: relative;
    margin: 40px auto;
    width: 250px; height: 250px;
    display: inline-block;
}
.option2, .option2 img { width: 100%; height: 100%; }
.option2 {
    overflow: hidden;
    position: absolute;
    transform: skewX(-25deg) skewY(45deg);
    transform-origin: 50% 50% 0;
}
.option2:first-child {
    transform-origin: 100% 0;
}
.option2:last-child {
    transform-origin: 0 100%;
}
.option2 img { opacity: .75; transition: .5s; }
.option2 img:hover { opacity: 1; }
.option2 img, .option2:after {
transform: skewX(-20deg) skewY(-20deg) rotate(-50deg);
transform-origin: 0 100% 0;
}
.option2:first-child:after { top: 0; left: 0; }
.option2:last-child:after { right: 0; bottom: 0; }
</style> 
```

有没有可能得到完美的结果？还是我想错了方向？

谢谢麦芽酒

编辑：我做到了！！感谢 @Spudley 向我介绍 SVG 并感谢 @ov 提出使用 jsfiddle 的建议。

这是我的代码：http: [//jsfiddle.net/wkJKA/](http://jsfiddle.net/wkJKA/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T21:56:05.207

严肃地说，在看到你想要实现的目标的模型图像之后，我想说放弃在 CSS 中实现它的想法。

像这样的东西使用 SVG 而不是 CSS 做得更好。CSS 根本不是为创建复杂的形状模式而设计的。它可以做到，但它很快就会变得混乱，并且对于你想要的效果，你最终需要一些额外的 HTML 标记。SVG 正是为这种事情而设计的，并且做得很好。

唯一的缺点是在旧的 IE 版本中缺乏对 SVG 的支持，但是有一些解决方法。（无论如何，旧 IE 支持显然不是您的优先事项，因为您已经在使用`transform`和其他不适用于旧 IE 的 CSS）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T21:18:32.037

使用透明 png 或简单地用 css 做三角形。这是 css 形状的链接[http://www.css3shapes.com](http://www.css3shapes.com)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T22:52:08.763

您可以依靠边框渲染的细节来实现三角形的形状。然后可以使用伪元素添加形状。

```
.pointy:before {
  border:50px solid transparent;
  border-bottom:86px solid green;
  border-top:0px solid transparent;/*renders looking like a triangle with 100px sides*/
  width:0;
  height:0;
  display:inline-block;
  content:"";
  margin:0 -75px -5px 0; /*for a 50x50 icon*/
} 
```

[摆弄](http://jsfiddle.net/ovfiddle/gvPLh/)

# git - 无效的电子邮件地址 - Hg git

> ID：15370879
> 
> 赞同：0
> 
> 时间：2013-03-12T19:55:29.077
> 
> 标签：git, mercurial, tortoisehg

为什么我`"Invalid Email Address"`通过 TortoiseHg Hg-git 插件提交到 GitHub 时会得到？推送工作正常，但电子邮件地址无效。

我尝试了许多“解决方案”：

将此添加到`hgrc`：

```
[ui]
username = Xybrek <xybrek@myemail.com> 
```

并将其添加到全局 TortoiseHg`mercurial.ini`

我也尝试在我的项目路径中添加 authors.txt

然后将这一行添加到`hgrc`

```
[git]
authors = authors.txt 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-12T08:54:24.777

`authors.txt`应该位于存储库的根目录中。

不要忘记清除缓存的 git repo：

```
$ hg gclear 
```

# php - IF 语句中的 PHP 逻辑运算符

> ID：15370880
> 
> 赞同：1
> 
> 时间：2013-03-12T19:55:36.517
> 
> 标签：php, if-statement, operators, logical-operators

我有这个代码：

```
if ( ($oldTime < (time() - self::wait)) ) {
  if ($this->setTime())
  {
    return true;
  }
  else
  {
    return false;
  }
} else {
  return false;
} 
```

我可以将其替换为：

```
if ( ($oTime < (time() - self::wait)) && $this->setTime() ) {
  return true;
} else {
  return false;
} 
```

我需要它来检查是否`$this->setTime()`仅在`$oTime < (time() - self::wait)`为真时才返回真。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T19:57:03.930

```
return ($oTime < (time() - self::wait)) && $this->setTime() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T19:57:44.403

是的，你可以用这个

```
if ( ($oTime < (time() - self::wait)) && $this->setTime() ) {
        return true;
    } else {
        return false;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T19:58:39.110

如果 if 语句中带有 && （不是 || ）的第一个条件失败，它将自动转到 else 分支而不验证第二个条件

# c - 无法在 C 中删除文件

> ID：15370883
> 
> 赞同：0
> 
> 时间：2013-03-12T19:56:10.307
> 
> 标签：c, file, delete-file

我正在使用代码块，我想使用**C**删除文件。该文件由两个函数使用，但不是同时使用。

这是使用该文件的第一个函数：

```
double FileRead()
{
    double n,cl,cd,result;
    FILE *fd;
    char filename[] = "save.txt";
    char buff[5024];

    if ((fd = fopen(filename, "r")) != NULL)
    {
        fseek(fd, 0, SEEK_SET);
        while(!feof(fd))
        {
            memset(buff, 0x00, 5024);
            fscanf(fd, "%[^\n]\n", buff);
        }
         sscanf(buff, "%lf %lf %lf",&n,&cl,&cd);
         printf("cl: %1.5f  cd: %1.5f\n",cl,cd);

    result = (cl/cd);
    printf("The CL/CD ratio is : %1.5f\n",result);
    }
    else
        result = 0;

        fclose(fd);

    return result;
} 
```

这是第二个功能：

```
void evaluate(void)  /*evaluate the population */
{
    int mem;
    int i;
    double x[NVARS+1];
    char buffer[101] = "save.txt";

    FILE *controlpoints;

     double y[NVARS] = {1.00000,0.92544,0.82351,0.78301,0.74004,0.50199,0.40422,0.31056,        /*fixed values on x axis */
     0.18549,0.14954,0.11702,0.06331,0.02581,0.01334,0.00509,0.00000,0.00052,0.00555,0.03324,
     0.11345,0.33088,0.43678,0.60146,0.70751,0.8043,0.92047,0.98713,1.00000};

    for(mem = 0; mem < POPSIZE; mem++)
    {
        controlpoints = fopen("controlpoints2.txt","w");

        for(i = 0; i < NVARS; i++)
        {
           x[i+1] = population[mem].gene[i];

           fprintf(controlpoints,"%1.5f\n%1.5f\n",y[i],x[i+1]);

            printf("The value of population[%d].gene[%d] is %f\n",mem,i,population[mem].gene[i]);

        }

        fclose(controlpoints);
        rbspline();

        XfoilCall();

        population[mem].fitness = FileRead();

    }

  remove(buffer);
        if(remove(buffer) == 0)
          printf("File %s  deleted.\n", buffer);
        else
          fprintf(stderr, "Error deleting the file %s.\n", buffer);
} 
```

我一直收到消息“删除文件 save.txt 时出错”。你能检查一下并告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T19:57:40.240

您在第二个函数中的代码包含：

```
remove(buffer);
    if (remove(buffer) == 0)
        printf("File %s deleted.\n", buffer);
    else
        fprintf(stderr, "Error deleting the file %s.\n", buffer); 
```

您要删除该文件两次，第二次不存在，因此您报告失败。

修复：删除未选中的`remove(buffer)`行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T20:01:11.673

看这部分代码

```
 remove(buffer);
    if(remove(buffer) == 0)
      printf("File %s  deleted.\n", buffer);
    else 
```

我想你想要这个

```
ret=remove(buffer);
if(ret==0)
      printf("File %s  deleted.\n", buffer);
else 
```

# c# - 将双精度数转换为字符串

> ID：15370885
> 
> 赞同：0
> 
> 时间：2013-03-12T19:56:12.250
> 
> 标签：c#, string

当我`ToString()`在下面的方法中删除时，我没有收到错误，那为什么需要呢？

```
public string BuildEquation()
{
    switch (Choice)
    {
        case "A":
            return mNumber1.ToString() + "+" + mNumber2.ToString();
        case "S":
            return mNumber1.ToString() + "-" + mNumber2.ToString();
        case "M":
            return mNumber1.ToString() + "*" + mNumber2.ToString();
        default:
            return mNumber1.ToString() + "/" + mNumber2.ToString(); // corrected
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T20:02:16.320

来自 C# Language Specification 1.2，§7.7.4，加法运算符：

> 字符串连接：当一个或两个操作数都是字符串类型时，二元 + 运算符执行字符串连接。如果字符串连接的操作数为 null，则替换为空字符串。否则，通过调用从类型 object 继承的虚拟 ToString 方法，将任何非字符串参数转换为其字符串表示形式。如果 ToString 返回 null，则替换为空字符串。[...] 如果没有足够的可用内存来分配结果字符串，则可能会引发 System.OutOfMemoryException。

换句话说，+ 操作数将为您进行 ToString 转换。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-12T20:01:05.660

> 那么为什么有必要呢？

这不是必需的。

有些人可能会主观地认为包含它更具可读性，但省略它不仅不会导致任何错误，而且还会产生完全相同的输出。`ToString`省略调用没有功能变化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T20:02:02.140

这是因为您已经与字符串连接（“+”、“-”等），这意味着表达式的其余部分被解析为字符串类型。如果您没有连接这些额外的字符串，那么您需要调用`ToString()`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T20:02:58.927

连接`double`并`string`一起为您转换它。

否则，您可以将其转换为`.ToString()`

或使用 Convert.ToString(double) 方法。[http://msdn.microsoft.com/en-us/library/c309e6c9.aspx](http://msdn.microsoft.com/en-us/library/c309e6c9.aspx)

# c++ - 将文本文件加载到内存并分析其内容

> ID：15370888
> 
> 赞同：0
> 
> 时间：2013-03-12T19:56:21.327
> 
> 标签：c++, visual-c++

出于教育目的，我想为 PHP 编码构建一个 IDE。

我制作了一个表单应用程序并添加了`OpenFileDialog`..（我的 c# 知识很有用，因为它很容易......即使没有智能感知！）

在每种语言（甚至 PERL）中，加载文件并从中读取行基本相同。

但我的目标是编写自制的智能感知。我不需要有关richtextBox 及其生成的事件、endline、EOF 等的信息。

我的问题是，我如何处理数据？一行一行？

*   每行文本文件的结构？
*   循环链表中的所有结构？...
*   同时更新richtextBox？
*   搜索左括号和右括号、变量等

我认为微软在应用程序项目文件夹中存储了一种 SQL 类型的数据库。但是您将如何跟踪变量并以某种形式模拟它们呢？

我想知道如何在动态文本上有效地处理这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T20:05:07.097

以前从未考虑过这一点，这听起来像是一个有趣的挑战。

就个人而言，我认为您必须实现一个词法扫描器，将整个源文件标记为源树，每个标记还具有有关它的信息，将标记映射到源文件中的行/字符。

从那里你可以看到你想用它走多远 - 当有人将鼠标悬停在一个令牌上时，它可以使用它周围的代码上下文来更智能地了解你提供的“智能感知”。

将鼠标悬停在某些东西上会映射回您的源代码树，（在您构建它时）您将加载您想要显示的任何信息。

也许它是矫枉过正，但它听起来像一个有趣的项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T20:17:31.123

这听起来与这个问题有关： [https ://softwareengineering.stackexchange.com/questions/189471/how-do-ide-s-provide-auto-completion-instant-error-checking-and-debugging](https://softwareengineering.stackexchange.com/questions/189471/how-do-ide-s-provide-auto-completion-instant-error-checking-and-debugging)

该问题的公认答案推荐了这个我觉得非常有趣的链接：

[http://msdn.microsoft.com/en-us/magazine/cc163781.aspx](http://msdn.microsoft.com/en-us/magazine/cc163781.aspx)

简而言之，大多数 IDE 从代码生成解析树，这就是它们存储和管理的内容。

# mysql - where(IN(' ')) 和 Wher(IN(' ')) 的区别

> ID：15370896
> 
> 赞同：-1
> 
> 时间：2013-03-12T19:56:46.033
> 
> 标签：mysql

`WHERE (uID IN('2,3'))`和有什么区别`WHERE (uID IN(2,3))`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T19:59:53.543

第一个仅当`uID`等于文本字面量时才为真`2,3`。`uID`如果在数字上是`2`or ，则第二个为真`3`。

# jruby - 拥有 trinidad 的最简单方法取决于 jruby-rack 的替代版本？

> ID：15370906
> 
> 赞同：4
> 
> 时间：2013-03-12T19:57:11.843
> 
> 标签：jruby, jrubyonrails, jruby-rack, trinidad-gem

当前的 Trinidad gem 依赖于 jruby-rack 1.1.0，对于我的每一项资产，我的开发日志中都会显示一些错误

`/Users/bijan/.rvm/gems/jruby-1.7.3/gems/rack-1.4.5/lib/rack/utils.rb:399 warning: multiple values for a block parameter (2 for 1)`

这是一个显然已经在当前的 jruby-rack (1.2) master 分支中解决的问题，我想让 trinidad 依赖于此。

有没有办法从我的 Gemfile 中做到这一点？或者比分叉 Trinidad gem 并指定不同版本的 jruby-rack 更简单的解决方案（并希望它可以工作，因为它可能不会）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T20:37:22.827

TL; DR - 不是真的。您需要构建一个或两个项目，或者`jruby-rack`通过发布的方式从团队获得一些帮助。构建步骤见底部。

* * *

当前的 Trinidad 版本（[1.4.4](http://rubygems.org/gems/trinidad/versions/1.4.4)和 1.4.5B1 预发布版）使用`jruby-rack`乐观版本控制（`>= 1.1.10`和`>= 1.1.13`，分别），因此任何满足此要求的依赖项（例如，1.2.0）都将优先考虑，而不会触及 Trinidad。

不幸的是，由于 JAR 的打包方式，a `git:`or`github:`依赖项将不起作用。您需要自己[构建 gem](https://github.com/jruby/jruby-rack#building)。这还不错——除了工作的 JDK/JRuby 设置之外，您真的只需要 Maven。

一旦`jruby-rack`通过更改构建/发布，将能够在您的 Gemfile 中指定一个可行的版本（假设它的版本为 1.2.0）：

```
gem 'jruby-rack', '~> 1.2.0'
gem 'trinidad' 
```

也许`jruby-rack`团队可以将此特定更改移植到 1.1.13 维护线，并在不引入不兼容性的情况下推出 1.1.13.2 版本。或者他们可能愿意从大师那里做一个预发布。

* * *

我还没有测试过资产是否可以正常工作，但是构建和指定本地版本相对容易：

```
# Assuming mvn is on the path, JRuby is active, and you
# have gem install permissions:
git clone https://github.com/jruby/jruby-rack.git
cd jruby-rack
bundle install
bundle exec rake clean gem SKIP_SPECS=true
gem install --local target/jruby-rack-1.2.0.SNAPSHOT.gem 
```

在此之后，您可以`gem 'jruby-rack', '~> 1.2.0.SNAPSHOT'`在您的 Gemfile 中使用来满足 Trinidad 并测试您的问题是否已解决。

# node.js - MongoDB（Node.js）发现未返回预期结果

> ID：15370909
> 
> 赞同：1
> 
> 时间：2013-03-12T19:57:15.013
> 
> 标签：node.js, mongodb, database

我正在尝试从节点到 mongodb 服务器进行查找。这是代码：

```
var mongo = require('mongodb'),
    Server = mongo.Server,
    Db = mongo.Db;
var mongoServer = new Server(10.141.74.74, 28019,{auto_reconnect: true, safe:true});
var db = new Db("statusReport", mongoServer, {safe:true});

db.open(function(err,db){
        if(!err){
            db.collection("status",function(err,collection){
                if(!err){
                    collection.find({}, function(a,b){
                        console.log(a);
                        console.log(b);
                    });
                }else{
                    console.log("ERROR: could not open collection");
                }
            });
            db.close();
        }else{
            console.log("ERROR: could not open database");
        }
    }); 
```

但是，它不是返回数据而是返回：

```
{ db:
   { domain: null,
     _events: { open: [] },
     _maxListeners: 10,
     databaseName: 'statusReport',
     serverConfig:
      { domain: null,
        _events: null,
        _maxListeners: 10,
        host: '10.141.74.74',
        port: 28019,
        options: [Object],
        internalMaster: true,
        connected: true,
        poolSize: 5,
        disableDriverBSONSizeCheck: false,
        ssl: false,
        slaveOk: undefined,
        _used: true,
        _readPreference: null,
        socketOptions: [Object],
        logger: [Object],
        eventHandlers: [Object],
        _serverState: 'connected',
        _state: [Object],
        recordQueryStats: false,
        dbInstance: [Circular],
        dbInstances: [Object],
        connectionPool: [Object],
        isMasterDoc: [Object] },
     options: { safe: true },
     _applicationClosed: false,
     native_parser: undefined,
     bsonLib:
      { Code: [Function: Code],
        Symbol: [Function: Symbol],
        BSON: [Object],
        DBRef: [Function: DBRef],
        Binary: [Object],
        ObjectID: [Object],
        Long: [Object],
        Timestamp: [Object],
        Double: [Function: Double],
        MinKey: [Function: MinKey],
        MaxKey: [Function: MaxKey] },
     bson: {},
     bson_deserializer:
      { Code: [Function: Code],
        Symbol: [Function: Symbol],
        BSON: [Object],
        DBRef: [Function: DBRef],
        Binary: [Object],
        ObjectID: [Object],
        Long: [Object],
        Timestamp: [Object],
        Double: [Function: Double],
        MinKey: [Function: MinKey],
        MaxKey: [Function: MaxKey] },
     bson_serializer:
      { Code: [Function: Code],
        Symbol: [Function: Symbol],
        BSON: [Object],
        DBRef: [Function: DBRef],
        Binary: [Object],
        ObjectID: [Object],
        Long: [Object],
        Timestamp: [Object],
        Double: [Function: Double],
        MinKey: [Function: MinKey],
        MaxKey: [Function: MaxKey] },
     _state: 'connected',
     pkFactory:
      { [Function: ObjectID]
        index: 0,
        createPk: [Function: createPk],
        createFromTime: [Function: createFromTime],
        createFromHexString: [Function: createFromHexString] },
     forceServerObjectId: false,
     safe: true,
     notReplied: {},
     isInitializing: true,
     auths: [],
     openCalled: true,
     commands: [],
     _callBackStore: { domain: null, _events: {}, _maxListeners: 10, _notReplied: {} },
     logger: { error: [Function], log: [Function], debug: [Function] },
     slaveOk: false,
     tag: 1363118044637,
     eventHandlers:
      { error: [],
        parseError: [],
        poolReady: [],
        message: [],
        close: [] },
     serializeFunctions: false,
     raw: false,
     recordQueryStats: false,
     reaperEnabled: false,
     _lastReaperTimestamp: 1363118044637,
     retryMiliSeconds: 1000,
     numberOfRetries: 60,
     reaperInterval: 10000,
     reaperTimeout: 30000,
     readPreference: undefined },
  collection:
   { db:
      { domain: null,
        _events: [Object],
        _maxListeners: 10,
        databaseName: 'statusReport',
        serverConfig: [Object],
        options: [Object],
        _applicationClosed: false,
        native_parser: undefined,
        bsonLib: [Object],
        bson: {},
        bson_deserializer: [Object],
        bson_serializer: [Object],
        _state: 'connected',
        pkFactory: [Object],
        forceServerObjectId: false,
        safe: true,
        notReplied: {},
        isInitializing: true,
        auths: [],
        openCalled: true,
        commands: [],
        _callBackStore: [Object],
        logger: [Object],
        slaveOk: false,
        tag: 1363118044637,
        eventHandlers: [Object],
        serializeFunctions: false,
        raw: false,
        recordQueryStats: false,
        reaperEnabled: false,
        _lastReaperTimestamp: 1363118044637,
        retryMiliSeconds: 1000,
        numberOfRetries: 60,
        reaperInterval: 10000,
        reaperTimeout: 30000,
        readPreference: undefined },
     collectionName: 'status',
     internalHint: null,
     opts: {},
     slaveOk: false,
     serializeFunctions: false,
     raw: false,
     readPreference: 'primary',
     pkFactory:
      { [Function: ObjectID]
        index: 0,
        createPk: [Function: createPk],
        createFromTime: [Function: createFromTime],
        createFromHexString: [Function: createFromHexString] } },
  selector: {},
  fields: undefined,
  skipValue: 0,
  limitValue: 0,
  sortValue: undefined,
  hint: null,
  explainValue: undefined,
  snapshot: undefined,
  timeout: true,
  tailable: undefined,
  awaitdata: undefined,
  numberOfRetries: 5,
  currentNumberOfRetries: 5,
  batchSizeValue: 0,
  slaveOk: false,
  raw: false,
  read: 'primary',
  returnKey: undefined,
  maxScan: undefined,
  min: undefined,
  max: undefined,
  showDiskLoc: undefined,
  comment: undefined,
  tailableRetryInterval: 100,
  exhaust: false,
  partial: false,
  totalNumberOfRecords: 0,
  items: [],
  cursorId: { _bsontype: 'Long', low_: 0, high_: 0 },
  dbName: undefined,
  state: 0,
  queryRun: false,
  getMoreTimer: false,
  collectionName: 'statusReport.status' } 
```

我知道里面有东西，因为我可以使用 MongoHub 看到它。我也可以在那里查询。这里有什么问题？

我也尝试做 collection.insert(some data here) 并且插入工作。只是发现没有。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T20:48:45.460

`collection.find(callback)`返回光标，而不是文档。你想做：

```
collection.find().toArray(callback) 
```

# php - Magento 模块更改仪表板图

> ID：15370910
> 
> 赞同：7
> 
> 时间：2013-03-12T19:57:15.943
> 
> 标签：php, magento

我正在关注这篇文章[Change the Dashboard Graph in version 1.7/1.12 of Magento](https://stackoverflow.com/questions/14401516/change-the-dashboard-graph-in-version-1-7-1-12-of-magento)，以允许“处理”订单的销售显示在仪表板图上。我的文件位于正确的目录下方，并且在 config>advanced 中显示为活动的。我还重新索引、刷新了缓存和刷新了生命周期统计信息。我在日志中没有看到任何错误。你能看出有什么问题吗？我有 firegento 并启用了日志记录，但这也不起作用。

编辑：仪表板上的总收入似乎是正确的，但它没有反映在时间线图上。例如，上午 10 点可能有 2000 美元的 30 个条款的净订单，但它不会显示在时间图表上。赏金谁可以修复下面的脚本，以反映我的时间线！

CaitlinHavener/仪表板/etc/config.xml：

```
<?xml version="1.0"?>
<config>
    <modules>
        <CaitlinHavener_Dashboard>
            <version>1.0</version>
        </CaitlinHavener_Dashboard>
    </modules>
    <global>
        <models>
            <CaitlinHavener_Dashboard>
                <class>CaitlinHavener_Dashboard_Model</class>
            </CaitlinHavener_Dashboard>
            <reports_resource>
                <rewrite>
                    <order_collection>CaitlinHavener_Dashboard_Model_Reports_Resource_Order_Collection</order_collection>
                </rewrite>
            </reports_resource>
        </models>
    </global>
</config> 
```

CaitlinHavener/Dashboard/Model/Reports/Resource/Order/Collection.php

```
 <?php
/**
 * Show all orders, not only the invoiced one
 */
class CaitlinHavener_Dashboard_Model_Reports_Resource_Order_Collection extends Mage_Reports_Model_Resource_Order_Collection
{
    protected function _prepareSummaryLive($range, $customStart, $customEnd, $isFilter = 0)
    {
        $this->setMainTable('sales/order');
        $adapter = $this->getConnection(); 
        /**
         * Reset all columns, because result will group only by 'created_at' field
         */
        $this->getSelect()->reset(Zend_Db_Select::COLUMNS);

       /*  $expression = sprintf('%s - %s - %s - (%s - %s - %s)',
            $adapter->getIfNullSql('main_table.base_total_invoiced', 0),
            $adapter->getIfNullSql('main_table.base_tax_invoiced', 0),
            $adapter->getIfNullSql('main_table.base_shipping_invoiced', 0),
            $adapter->getIfNullSql('main_table.base_total_refunded', 0),
            $adapter->getIfNullSql('main_table.base_tax_refunded', 0),
            $adapter->getIfNullSql('main_table.base_shipping_refunded', 0)
        ); */

        $expression = sprintf('%s - %s - %s - (%s - %s - %s)',
            $adapter->getIfNullSql('main_table.base_total_invoiced', 'main_table.base_grand_total'),
            $adapter->getIfNullSql('main_table.base_tax_invoiced', 'main_table.base_tax_amount'),
            $adapter->getIfNullSql('main_table.base_shipping_invoiced',  'main_table.base_shipping_amount'),
            $adapter->getIfNullSql('main_table.base_total_refunded', 0),
            $adapter->getIfNullSql('main_table.base_tax_refunded', 0),
            $adapter->getIfNullSql('main_table.base_shipping_refunded', 0)
        );

        if ($isFilter == 0) {
            $this->getSelect()->columns(array(
                'revenue' => new Zend_Db_Expr(
                    sprintf('SUM((%s) * %s)', $expression,
                        $adapter->getIfNullSql('main_table.base_to_global_rate', 0)
                    )
                 )
            ));
        } else {
            $this->getSelect()->columns(array(
                'revenue' => new Zend_Db_Expr(sprintf('SUM(%s)', $expression))
            ));
        }

        $dateRange = $this->getDateRange($range, $customStart, $customEnd);

        $tzRangeOffsetExpression = $this->_getTZRangeOffsetExpression(
            $range, 'created_at', $dateRange['from'], $dateRange['to']
        );

        $this->getSelect()
            ->columns(array(
                'quantity' => 'COUNT(main_table.entity_id)',
                'range' => $tzRangeOffsetExpression,
            ))
            //BOF modification
           ->where('main_table.state NOT IN (?)', array(
                Mage_Sales_Model_Order::STATE_PENDING_PAYMENT,
               // Mage_Sales_Model_Order::STATE_NEW
               )
            )
            //EOF modification
            ->order('range', Zend_Db_Select::SQL_ASC)
            ->group($tzRangeOffsetExpression);

        $this->addFieldToFilter('created_at', $dateRange);

        return $this;
    }

    protected function _calculateTotalsLive($isFilter = 0)
    {
        $this->setMainTable('sales/order');
        $this->removeAllFieldsFromSelect();

        $adapter = $this->getConnection();

        // $baseTotalInvoiced    = $adapter->getIfNullSql('main_table.base_grand_total', 0);
        // $baseTotalRefunded    = $adapter->getIfNullSql('main_table.base_discount_refunded', 0);
        // $baseTaxInvoiced      = $adapter->getIfNullSql('main_table.base_tax_amount', 0);
        // $baseTaxRefunded      = $adapter->getIfNullSql('main_table.base_tax_refunded', 0);
        // $baseShippingInvoiced = $adapter->getIfNullSql('main_table.base_shipping_amount', 0);
        // $baseShippingRefunded = $adapter->getIfNullSql('main_table.base_shipping_refunded', 0);
        // $baseShippingRefunded = $adapter->getIfNullSql('main_table.base_shipping_refunded', 0);

        $baseTotalInvoiced    = $adapter->getIfNullSql('main_table.base_total_invoiced', 'main_table.base_grand_total'); // This will check if there is no invoice it will calculate based on the grand totals ( so when you generate and invoice u will have no issues with the numbers also )
$baseTotalRefunded    = $adapter->getIfNullSql('main_table.base_total_refunded', 0);
$baseTaxInvoiced      = $adapter->getIfNullSql('main_table.base_tax_invoiced', 'main_table.base_tax_amount'); // Same here for taxes
$baseTaxRefunded      = $adapter->getIfNullSql('main_table.base_tax_refunded', 0);
$baseShippingInvoiced = $adapter->getIfNullSql('main_table.base_shipping_invoiced', 'main_table.base_shipping_amount'); // Same here for shipping 
$baseShippingRefunded = $adapter->getIfNullSql('main_table.base_shipping_refunded', 0);

        $revenueExp = sprintf('%s - %s - %s - (%s - %s - %s)',
            $baseTotalInvoiced,
            $baseTaxInvoiced,
            $baseShippingInvoiced,
            $baseTotalRefunded,
            $baseTaxRefunded,
            $baseShippingRefunded
        );
        $taxExp = sprintf('%s - %s', $baseTaxInvoiced, $baseTaxRefunded);
        $shippingExp = sprintf('%s - %s', $baseShippingInvoiced, $baseShippingRefunded);

        if ($isFilter == 0) {
            $rateExp = $adapter->getIfNullSql('main_table.base_to_global_rate', 0);
            $this->getSelect()->columns(
                array(
                    'revenue'  => new Zend_Db_Expr(sprintf('SUM((%s) * %s)', $revenueExp, $rateExp)),
                    'tax'      => new Zend_Db_Expr(sprintf('SUM((%s) * %s)', $taxExp, $rateExp)),
                    'shipping' => new Zend_Db_Expr(sprintf('SUM((%s) * %s)', $shippingExp, $rateExp))
                )
            );
        } else {
            $this->getSelect()->columns(
                array(
                    'revenue'  => new Zend_Db_Expr(sprintf('SUM(%s)', $revenueExp)),
                    'tax'      => new Zend_Db_Expr(sprintf('SUM(%s)', $taxExp)),
                    'shipping' => new Zend_Db_Expr(sprintf('SUM(%s)', $shippingExp))
                )
            );
        }

        $this->getSelect()->columns(array(
            'quantity' => 'COUNT(main_table.entity_id)'
        ))
        ->where('main_table.state NOT IN (?)', array(
            Mage_Sales_Model_Order::STATE_PENDING_PAYMENT,
            //Mage_Sales_Model_Order::STATE_NEW
            )
         );

        return $this;
    }

}
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T06:43:49.173

您必须了解 Magento 中的 Order 流程​​，这样您才能完全了解图表的填充方式

1.  订单作为新订单进入商店（如后付款订单 - 货到付款，......）或待处理订单（信用卡订单或贝宝等。所有在线支付方式）。
    *   在这一步可以取消订单（因为没有生成发票）。
2.  如果是在线支付，则支付成功（因此订单已开票 - 已生成发票）。
3.  开票后发货的订单（生成发货）。
4.  订单已退款（部分或全部），因此生成贷项通知单。

**现在，如果您查看前面的步骤，您将看到如果订单处于NEW 和 CANCELED*状态***（不是状态），则不应该计算收入

它应该在订单开具发票时计算（因此您将获得收入和运费以及退款）

因此要计算收入和图表中 NEW STATE 的订单 Override 方法

> ```
> app/code/core/Mage/Reports/Model/Resource/Order/Collection.php
> /**
>  * Calculate totals live report
>  *
>  * @param int $isFilter
>  * @return Mage_Reports_Model_Resource_Order_Collection
>  */
> protected function _calculateTotalsLive($isFilter = 0){} 
> ```

```
 // Line 430
    ->where('main_table.state NOT IN (?)', array(
        Mage_Sales_Model_Order::STATE_PENDING_PAYMENT,
        Mage_Sales_Model_Order::STATE_NEW // Comment this line 
        )
     ); 
```

所以现在如果你评论这条线，订单将被计入（*ORDERS 图表*）

但总数仍未计算（因为没有发票/发货/退款）

因此，您需要将计算过程从使用发票金额更改为仅在发票之前使用 TOTALS 通过小的更改，您可以毫无错误地实现您想要的代码下面的代码

更改行（390 及以下为如下所示）：

```
$baseTotalInvoiced    = $adapter->getIfNullSql('main_table.base_total_invoiced', 'main_table.base_grand_total'); // This will check if there is no invoice it will calculate based on the grand totals ( so when you generate and invoice u will have no issues with the numbers also )
$baseTotalRefunded    = $adapter->getIfNullSql('main_table.base_total_refunded', 0);
$baseTaxInvoiced      = $adapter->getIfNullSql('main_table.base_tax_invoiced', 'main_table.base_tax_amount'); // Same here for taxes
$baseTaxRefunded      = $adapter->getIfNullSql('main_table.base_tax_refunded', 0);
$baseShippingInvoiced = $adapter->getIfNullSql('main_table.base_shipping_invoiced', 'main_table.base_shipping_amount'); // Same here for shipping 
$baseShippingRefunded = $adapter->getIfNullSql('main_table.base_shipping_refunded', 0); 
```

所以在简单的答案中，解决方案没有改变计算方式，但解决方案改变了计算的默认值

遵循此更改，您将得到您真正想要的:)

# c# - 在 WinForm 应用程序中将列表绑定到中继器

> ID：15370914
> 
> 赞同：1
> 
> 时间：2013-03-12T19:57:21.393
> 
> 标签：c#, winforms, list, binding, repeater

我最近[开始问这个问题](https://stackoverflow.com/questions/15367122/complex-layout-in-datagridview)。建议的方法是使用`DataRepeater`.

我看过很多关于如何绑定转发器的示例，但它们都是针对 ASP，而不是 Windows 窗体应用程序。

我已将`Label`,`PictureBox`和`Button`组件添加到模板中，但我无法成功地将我`IList<SomeObject>`的`DataRepeater`.

我想用列表中的信息填充这些组件。

如何在 WinForm 应用程序中将a 绑定`IList<SomeObject>`到 a ？`DatarRepeater`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:41:12.230

终于让它工作了！为了将来参考，这是我使用的：

首先调用此方法来初始化手动绑定，使用`BindingSource`：

```
private BindingSource bindingSource ;
private void InitUserListArea()
{
    _bindingSource = new BindingSource();
    _bindingSource.DataSource = tempUsers;
    _labelUserListRoleValue.DataBindings.Add("Text", _bindingSource, "Role");
    _labelUserListNameValue.DataBindings.Add("Text", _bindingSource, "Name");
    _labelUserListLastAccessValue.DataBindings.Add("Text", _bindingSource, "LastAccess");
    _dataRepeaterUserList.DataSource = _bindingSource;
} 
```

然后获取数据（在我的情况下来自网络服务）并用数据填充列表。填充列表后，或发生任何更改时：

```
private void RefreshDataRepeater()
{
    if (_dataRepeaterUserList.InvokeRequired)
    {
        _dataRepeaterUserList.Invoke((Action)(() => { RefreshDataRepeater(); }));
        return;
    }

    _bindingSource.DataSource = null;
    _bindingSource.DataSource = tempUsers;
    _dataRepeaterUserList.DataSource = null;
    _dataRepeaterUserList.DataSource = _bindingSource;
    _dataRepeaterUserList.Refresh();
} 
```

# extjs - Ext.List 在视图上前进后会弄乱行并显示？

> ID：15370920
> 
> 赞同：0
> 
> 时间：2013-03-12T19:57:31.783
> 
> 标签：extjs, sencha-touch, sencha-touch-2

我有一个导航视图，其中包含一个带有项目列表的列表视图，当您单击该项目时，它会推送一个新的列表详细信息页面。一切正常，花花公子，但是当我回到上一个列表时，它显示出所有混乱。

我已经在 Webkit 和 Mobile webkit 浏览器中对此进行了测试，结果是一样的。我正在寻找任何可能的反馈或建议，这些反馈或建议可能会指向 a) 解决问题或 b) 在发生这种情况时重新粉刷窗口，以便它自行纠正。

例子：

![示例图像](../Images/d537deb63db3020fcbecdaada2bc7e4a.png)

导航视图：

```
Ext.define('CA.view.speaker.Card', {
  extend: 'Ext.NavigationView',
  xtype: 'xSpeakerCard',

  config: {
    title: "Speakers",
    iconCls: "team",
    autoDestroy: false,

    items: [
      { xclass: 'CA.view.speaker.List' }
    ]
  }

}); 
```

列表显示：

```
Ext.define('CA.view.speaker.List', {

  extend: 'Ext.List',
  xtype: 'xSpeakerList',

  config: { 
    title: "Speaker List",
    store: "Speakers",
    fullscreen: true, 
    grouped: true,
    indexBar: true,
    itemTpl: [
        '{first_name} {last_name}'
    ]
  }
}); 
```

正在推送的详细视图：

```
Ext.define('CA.view.speaker.Detail', {

  extend: 'Ext.Container',
  xtype: 'xSpeakerDetail',

  config: {
    layout: 'vbox',
    scrollable: 'vertical',
    title: '',
    items: [
      { 
      xtype: 'xSpeakerDetailInfo', 
      docked: 'top' 
    },
    { 
      xtype: 'list', 
      store: 'SpeakerSessions',
      id: 'speaker-detail-info-session-list',
      flex: 3,
      itemTpl: [
        '{title}'
      ],
      items: [ 
        { 
        xtype: 'listitemheader', 
        cls: 'dark',
        html: 'Sessions'
      }
      ]
    }
    ]
  }

}); 
```

# c# - 正则表达式：匹配 { 和 } 之间的所有字符，如果它们之间有特定的字符串

> ID：15370927
> 
> 赞同：0
> 
> 时间：2013-03-12T19:57:50.040
> 
> 标签：c#, regex

我有一个这样的字符串：

```
{name|val1|test}{name|val1|test} 
```

我需要的是一个正则表达式，它选择

```
{name|val1|test} 
```

例如。那可能吗？我现在正在使用[Online RegExr](http://gskinner.com/RegExr/ "在线正则表达式")一段时间，但似乎我理解语法很愚蠢；-) 目前我能够分隔 {...} 组：

```
\{.+?\} 
```

这个字符串的“语法”是固定的。括号内不可能有括号。

语言是 C#

**为清除而编辑：**

我只想选择其中一个字符串，具体取决于中间的值。例如，如果我在寻找“ID1”，我只想选择括号以及它们之间包含“ID1”时的内容。

![在此处输入图像描述](../Images/72e48c8ca23a0cd2c6de1df574ff6cb3.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T20:15:16.050

只需将 id 放在正则表达式中，以便匹配它：

```
/\{[^}]*ID1[^}]*\}/ 
```

# php - 获取阿拉伯语数据，如果不存在则获取英文数据

> ID：15370934
> 
> 赞同：0
> 
> 时间：2013-03-12T19:58:20.770
> 
> 标签：php, mysql, sql, localization

你们好吗？

对不起我的英语。

我有两张桌子

**菜单**和**menus_localization**

## 菜单表

```
| id_menu | section_menu | active_menu |
|    1    |    footer    |     yes     |
|    2    |    footer    |     yes     | 
```

## 本地化表

```
| id_localization | id_menu |   name_menu   | link_menu                   | language_menu |
|       1         |    1    |      Home     |  http://example.com         |    english    |
|       2         |    1    |الصفحة الرئيسية|  http://example.com         |     arabic    |
|       3         |    2    |     signup    |  http://example.com/signup  |     english   | 
```

现在，我想获得一个阿拉伯语菜单，如果它不存在，则获得英语菜单。

像这样：

```
الصفحة الرئيسية
Signup 
```

这是我的查询：

```
SELECT *
FROM (`menus_localization` ML)
JOIN `menus` MS ON `MS`.`id_menu` = `ML`.`id_menu`
WHERE `MS`.`section_menu` =  'footer'
AND `ML`.`language_menu` =  'Arabic'
OR `ML`.`language_menu` =  'English'
GROUP BY `ML`.`id_menu` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T20:15:45.310

我假设您正在使用您添加的标签中的 php。如果是这样，请进行查询以检索您的页面信息。像这样的东西：

```
SELECT * FROM your_table  WHERE id_menu ='1' 
```

使用此查询，您将获得两个结果：

```
|       1         |    1    |      Home     |  http://example.com         |    english    |
|       2         |    1    |الصفحة الرئيسية|  http://example.com         |     arabic    | 
```

您可以使用 if 语句来确定要显示的语言

```
if($arabic) { // display arabic } else { // display english} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T20:17:52.067

要实现这一点，您需要使用 id 和语言加入`menus`两次`menus_localization`。如果它不为空，则先使用`COALESCE()`or`IFNULL()`接受阿拉伯语，否则回退到英语。`menu_name`

```
SELECT m.id_menu, 
       m.section_menu, 
       m.active_menu,
       COALESCE(l2.name_menu, l1.name_menu) name_menu,
       COALESCE(l2.link_menu, l1.link_menu) link_menu
FROM menus m LEFT JOIN 
     menus_localization l1 ON m.id_menu = l1.id_menu AND 
                              l1.`language_menu` =  'english' LEFT JOIN
     menus_localization l2 ON m.id_menu = l2.id_menu AND 
                              l2.`language_menu` =  'arabic' 
```

**[SQLFiddle 示例](http://sqlfiddle.com/#!2/93781/1)**

# arrays - 在 Jess 中使用二维数组

> ID：15370935
> 
> 赞同：1
> 
> 时间：2013-03-12T19:58:23.577
> 
> 标签：arrays, dimensional, jess

我一直在尝试为我在 Jess 中构建的游戏代表某个场景，到目前为止，我有一个特定的事实可以告诉每个场景的所有元素。由于此游戏场景将以文本格式表示（仅使用文本字符），因此我非常想根据从场景事实中检索到的信息，使用二维数组将某个字符与某个位置进行匹配。

任何人都可以给我一些关于如何实现这一目标的见解？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:34:07.410

Jess 本身没有这样的数据结构。您可以使用 Java list-of-lists，但从 Jess 操作会很尴尬。幸运的是，棋盘通常是一个*稀疏矩阵*，这意味着大多数位置都是空的，因此您只需要表示不是的位置。您可以将坐标直接放入您的游戏对象模板中——即，`x`在`y`这里：

```
(deftemplate game-object (slot name) (slot type) (slot x) (slot y) ...) 
```

或者您可以使用单独的“位置”模板并使用 id 将其与游戏对象匹配，例如

```
(deftemplate game-object (slot name) (slot type) (slot id) ...)
(deftemplate location (slot id) (slot x) (slot y)) 
```

一个重要的见解是模式匹配使得对所有对象的循环变得不必要。例如，假设您想检查与您的“英雄”角色在同一行中是否没有其他角色。你可以写这样的东西，不需要循环：

```
(defrule no-character-in-same-row-as-hero
    (game-object (name hero) (y ?y))
    (not (game-object (name ~hero) (y ?y)))
     =>
    // Do whatever you want, knowing that no other characters are in the same row
    ) 
```

# php - 不在mysql，php中更新

> ID：15370942
> 
> 赞同：1
> 
> 时间：2013-03-12T19:58:48.730
> 
> 标签：php, html, mysql, forms

好的，所以我正在创建一个考勤系统，我想标记一个学生是否在场，这是我的代码

```
 <?php
if (isset($_POST['submit'])) {

$present = $_POST['present'];

}
$test3= "SELECT * FROM course_attendance, students, courses, attendance WHERE course_attendance.course_id=courses.course_id AND course_attendance.week_id=attendance.week_number_id AND course_attendance.student_id= students.student_id AND courses.course_id='101' AND attendance.week_number_id='2' ";
$result = mysql_query($test3)  or die(mysql_error());

echo "</br><table border='1' align='center'><tr> <th><strong>Student ID</strong></th> <th><strong>First Name </strong></th> <th><strong>Last Name</strong></th> <th><strong>Present</strong></th> </tr> ";

while($rows=mysql_fetch_array($result)){
    echo"<form name='Biology_lecture11.php' method='post'>";
    echo "<tr><td width='100' align='center'>" .$rows['student_id'].
"</td><td width='120' align='center'>" .$rows['fname'].
"</td><td width='120' align='center'>" .$rows['lname'].
"</td><td><input type='text' name='present' value=" .$rows['present'] . ">";

}
echo "</table>";
?>
 <input type='submit' name='Submit' value='Submit'  >
   </form>

  <?php 

   $sql="UPDATE course_attendance SET present='$present' WHERE course_id='101' AND week_id='2' ";
  $result=mysql_query($sql);

  if($result){
      echo "Successfully logged the attendance";
  }
  else {
      echo"ERROR";

  }
  ?> 
```

问题是，它不会更新数据库中的当前字段，任何人都知道出了什么问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T20:09:16.563

您在表格标签和 while 循环中采用了一个表格，这将不起作用，这是正确的代码。

```
<?php
if (isset($_POST['submit'])) {

    $present = $_POST['present'];

    $sql="UPDATE course_attendance SET present='$present' WHERE course_id='101' AND week_id='2' ";
    $result=mysql_query($sql);

    if($result) {
        echo "Successfully logged the attendance";
    }
    else {
      echo"ERROR";
    }

}

?>

<form name='Biology_lecture11.php' method='post'>
<table border="1" align="center">
<tr>
    <th><strong>Student ID</strong></th>
    <th><strong>First Name </strong></th>
    <th><strong>Last Name</strong></th>
    <th><strong>Present</strong></th>
</tr>

<?php

$test3= "SELECT * FROM course_attendance, students, courses, attendance WHERE course_attendance.course_id=courses.course_id AND course_attendance.week_id=attendance.week_number_id AND course_attendance.student_id= students.student_id AND courses.course_id='101' AND attendance.week_number_id='2' ";
$result = mysql_query($test3)  or die(mysql_error());

while($rows=mysql_fetch_array($result)) {

echo "<tr><td width='100' align='center'>" .$rows['student_id']."</td>
      <td width='120' align='center'>" .$rows['fname']."</td>
      <td width='120' align='center'>" .$rows['lname']."</td>
      <td><input type='text' name='present' value=" .$rows['present']."></td></tr>";
}
echo "</table>";
?>

<input type='submit' name='Submit' value='Submit'  >
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T20:10:03.220

我看到的一个错误是，你把这个：

```
echo"<form name='Biology_lecture11.php' method='post'>"; 
```

在你的while循环中。所以它被推出了不止一次。尝试在循环之前的行中写下该部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T20:18:08.777

我看到的几个问题：

1：每次加载页面时，您的 UPDATE 代码都在运行。将更新块移动到 if (isset($_POST['submit'])) {} 块中。
2：当您打印出学生时，您会为每个学生创建一个名为“present”的输入。如果您要填写并提交数据，则只会将最后一个字段添加到数据库中。
3：您没有更新特定的学生。我会将输入字段更改为复选框并将其命名为“present[$rows[student_id]]”。
然后，一旦页面被处理，循环遍历 $_POST['present'] 的键/值。并更新其中的任何学生。

```
foreach (array_keys($_POST['present']) as $student_id) {
    if (is_numeric($student_id)) {
        $sql="UPDATE course_attendance SET present='true' WHERE course_id='101' AND week_id='2' and student_id='$student_id'";
    }
} 
```

如果出勤表没有自动填写学生，则必须修改 UPDATE。如果每个学生都不在那里，您必须运行查询以查看他们是否存在。如果他们不插入行。如果有，请更新该行。
4：将开始标签移动到表格开始之前和学生循环的外部。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T20:19:32.643

需要考虑两件事：首先，您有表单元素重复。正如上面的评论所说，取出这条线

```
echo"<form name='Biology_lecture11.php' method='post'>"; 
```

从循环。

其次，该`UPDATE`语句*更新*所有学生，您需要`WHERE`在 SQL 语句中添加一个标记。像这样的东西：

```
 <?php
if (isset($_POST['submit'])) {

$present = $_POST['present'];

}
$test3= "SELECT * FROM course_attendance, students, courses, attendance WHERE course_attendance.course_id=courses.course_id AND course_attendance.week_id=attendance.week_number_id AND course_attendance.student_id= students.student_id AND courses.course_id='101' AND attendance.week_number_id='2' ";
$result = mysql_query($test3)  or die(mysql_error());

echo "</br><table border='1' align='center'><tr> <th><strong>Student ID</strong></th> <th><strong>First Name </strong></th> <th><strong>Last Name</strong></th> <th><strong>Present</strong></th> </tr> ";
    echo"<form name='Biology_lecture11.php' method='post'>";    
while($rows=mysql_fetch_array($result)){
    echo "<tr><td width='100' align='center'>" .$rows['student_id'].
"</td><td width='120' align='center'>" .$rows['fname'].
"</td><td width='120' align='center'>" .$rows['lname'].
"</td><td><input type='text' name='present' value=" .$rows['present'] . ">";

}
echo "</table>";
?>
 <input type='submit' name='Submit' value='Submit'  >
   </form>

  <?php 

   $sql="UPDATE course_attendance SET present='$present' WHERE course_id='101' AND week_id='2' AND student_id =  the_student_id";
  $result=mysql_query($sql);

  if($result){
      echo "Successfully logged the attendance";
  }
  else {
      echo"ERROR";

  }
  ?> 
```

希望能帮助到你！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T20:28:07.933

这应该适合你。这将为每个学生分配一个唯一的`present`值，然后在回发时对其进行检查，如果设置，它会被清理并用于更新学生的出勤记录。

我还将 PHP 中的 echo'd HTML 提取为 HTML，并将您的表单移到表格之外（这可能会导致某些浏览器出现问题）。

```
<?php
// Update present values
if (isset($_POST['submit'])) 
{
    // Get a list of student ids to check
    $idsResult = mysql_query("SELECT student_id from students");

    while($idRow = mysql_fetch_array($idsResult))
    {
       // if the textbox for this student is set 
       if(isset($_POST['present'.$idRow['student_id']]) && !empty($_POST['present'.$idRow['student_id']]))
       {
          // Clean the user input, then escape and update the database
          $cleanedPresent = htmlspecialchars(strip_tags($_POST['present'.$idRow['student_id']]));
          $sql = "UPDATE course_attendance SET present='".mysql_real_escape_string($present)."' WHERE course_id='101' AND week_id='2' AND student_id=".$idRow['student_id'];
          $result = mysql_query($sql);

          if($result){
            echo "Successfully logged the attendance for ID ".$idRow['student_id'];
          }
          else {
            echo "ERROR updating on ID ".$idRow['student_id'];
          }
       }
    }
}

$test3= "SELECT * FROM course_attendance, students, courses, attendance WHERE course_attendance.course_id=courses.course_id AND course_attendance.week_id=attendance.week_number_id AND course_attendance.student_id= students.student_id AND courses.course_id='101' AND attendance.week_number_id='2' ";
$result = mysql_query($test3)  or die(mysql_error());
?>
<form name='Biology_lecture11.php' method='post'>
</br>
<table border='1' align='center'>
  <tr>
    <th><strong>Student ID</strong></th>
    <th><strong>First Name </strong></th>
    <th><strong>Last Name</strong></th>
    <th><strong>Present</strong></th>
  </tr>
<?php
while($rows=mysql_fetch_array($result)){
  echo "<tr><td width='100' align='center'>" .$rows['student_id'].
  "</td><td width='120' align='center'>" .$rows['fname'].
  "</td><td width='120' align='center'>" .$rows['lname'].
  "</td><td><input type='text' name='present".$rows['student_id']."' value=" .$rows['present'] . ">";
}
?>
</table>
<input type='submit' name='Submit' value='Submit'>
</form> 
```

替代（更好）方法：如果可以将当前值设置为简单的 0/1 或真/假，那么为每个学生使用复选框会更容易。在回发中，您可以通过选中每个指示在场学生的复选框来检索一组值，然后在一个查询中更新数据库表。这也可以防止恶意文本输入。

替代代码：

```
<?php
// Update present values
if (isset($_POST['submit'])) 
{
    // Get a list of student ids to check
    $idsResult = mysql_query("SELECT student_id from students");

    $presentIds = array();
    $absentIds = array();
    while($idRow = mysql_fetch_array($idsResult))
    {
       // If the student's checkbox is checked, add it to the presentIds array.
       if(isset($_POST['present'.$idRow['student_id']]))
       {
         $presentIds[] = $idRow['student_id'];
       }
       else
       {
         $absentIds[] = $idRow['student_id'];
       }
    }

      // Convert array to string for query
      $idsAsString = implode(",", $presentIds);

      // You can set present to whatever you want. I used 1\. 
      $sql = "UPDATE course_attendance SET present='1' WHERE course_id='101' AND week_id='2' AND student_id IN (".$idsAsString.")";
      $result = mysql_query($sql);

      if($result){
        echo "Successfully logged the attendance for IDs ".$idsAsString;
      }
      else {
        echo "ERROR updating on IDs ".$idsAsString;
      }

      // OPTIONAL: Mark absent students as '0' or whatever other value you want
      $absentIdsAsString = implode(",", $absentIds);
      // You can set present to whatever you want. I used 1\. 
      $absentQuery = "UPDATE course_attendance SET present='0' WHERE course_id='101' AND week_id='2' AND student_id IN (".$absentIdsAsString.")";
      $absentResult = mysql_query($absentQuery);

      if($absentResult){
        echo "Successfully logged absence for IDs ".$absentIdsAsString;
      }
      else {
        echo "ERROR updating absence on IDs ".$absentIdsAsString;
      }

}

$test3= "SELECT * FROM course_attendance, students, courses, attendance WHERE course_attendance.course_id=courses.course_id AND course_attendance.week_id=attendance.week_number_id AND course_attendance.student_id= students.student_id AND courses.course_id='101' AND attendance.week_number_id='2' ";
$result = mysql_query($test3)  or die(mysql_error());
?>
<form name='Biology_lecture11.php' method='post'>
</br>
<table border='1' align='center'>
  <tr>
    <th><strong>Student ID</strong></th>
    <th><strong>First Name </strong></th>
    <th><strong>Last Name</strong></th>
    <th><strong>Present</strong></th>
  </tr>
<?php
while($rows=mysql_fetch_array($result)){
  echo "<tr><td width='100' align='center'>" .$rows['student_id'].
  "</td><td width='120' align='center'>" .$rows['fname'].
  "</td><td width='120' align='center'>" .$rows['lname'].
  "</td><td><input type='checkbox' name='present".$rows['student_id']."' ";

  // NOTE: REPLACE 1 with whatever value you store in the database for being present. 
  // I used 1 since the update at the top of the code uses 0 and 1.
  if($rows['present']=='1')
  {
    echo "checked='checked' ";
  }
  // With a checkbox, you don't need to assign it a value.
  echo "value=" .$rows['present'];

  echo ">";
}
?>
</table>
<input type='submit' name='Submit' value='Submit'>
</form> 
```

# javascript - 无法将用户数据写入 Firebase

> ID：15370951
> 
> 赞同：4
> 
> 时间：2013-03-12T19:59:09.563
> 
> 标签：javascript, firebase

我是新手，所以请耐心等待。我正在尝试使用带有电子邮件和密码的 fire base 简单登录。我有这个工作：

```
var authClient = new FirebaseAuthClient(fireRef, function(error, user) {
          if (error) {
            // an error occurred while attempting login

                if(error.code === "INVALID_EMAIL"){ 
                    $('#log_email_error').hide();
                    $('#log_pass_error').hide();
                    $('#log_email_error').html("Invalid email specified.").fadeIn();
                    $('.login_button').removeClass('login_button_success').attr('value','Log in');          
                }
                if (error.code === "INVALID_PASSWORD") {
                    $('#log_email_error').hide();
                    $('#log_pass_error').hide();
                    $('#log_pass_error').html("The specified password is incorrect..").fadeIn();
                    $('.login_button').removeClass('login_button_success').attr('value','Log in');
                }

            console.log(error);
          } else if (user) {
            // user authenticated with Firebase
            hideLogin();
            $('.userInfo_cont').show();
            $('.userInfo').html('<div> '+  user.email + ' <span class="grey">| </span> </div>');
            $('.logout').on('click',function(){
                authClient.logout();
            });

            console.log('User ID: ' + user.id + ', Provider: ' + user.provider);

          } else {
            // user is logged out
            $('.userInfo_cont').hide();
            showLogin();
          }
    }); 
```

但是，当用户注册时，我想在 firebase/users 区域中存储一些额外的信息，我可以在注册时这样做：

```
$('#submit_reg').on('click',function(){
            var firstName = $('#regFirstname').val();
            var lastName = $('#regLastname').val();
            var email = $('#regUsername').val();
            var password = $('#regPassword').val();

            authClient.createUser(email, password, function(error, user) {
              if (!error) {
                   console.log('User Id: ' + user.id + ', Email: ' + user.email);

                       authClient.login('password', {
                                          email: email,
                                          password: password,
                                          rememberMe: false
                                        });

                       hideLogin();

                        userInfo = {

                            userId : user.id,
                            firstName : firstName,
                            lastName : lastName,
                            email : user.email

                        }

                        var url = USERS_LOCATION + "/" + user.id;
                        var userRef = new Firebase(url);

                        console.log(userInfo);

                        userRef.set(userInfo);

                  }else{
                    //display error

                    alert(error);

                  }
            });

        }); 
```

我的问题是当我实现文档中的读写规则时：

```
{
  "rules": {
    "users":{
     "$userid": {
        ".read": "auth.id == $userid",
        ".write": "auth.id == $userid"
      }
    }
  }
} 
```

当用户注册时，我得到一个权限被拒绝。因此它可以很好地注册用户，但不会将附加数据写入 /users/id 区域。

任何帮助将非常感激。

克雷格

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T23:46:07.350

在上面的代码段中，您正在调用`login()`，然后立即调用`set()`。这是有问题的，因为该`login()`方法是异步的，并且您几乎总是可以保证`set()`在登录尝试方法返回之前调用了该方法，因为`login()`它是非阻塞的，但会对 Firebase 服务器进行网络调用。

这意味着即使您使用`login()`正确的电子邮件和密码进行呼叫，您仍会尝试在身份验证过程完成之前设置数据。

我建议将您的`set()`逻辑移动到一个块中，该块仅在您确定用户已经通过身份验证时才会执行，例如在您调用`new FirebaseAuthClient()`并检测到登录用户时传递的回调中。

# sql-server - 使用 CASE 语句重新分配值 - T-SQL

> ID：15370953
> 
> 赞同：0
> 
> 时间：2013-03-12T19:59:13.813
> 
> 标签：sql-server, tsql, case

这是我的返回数据结构的简单示例：

```
id | cat id | value | reverse
1  | 1      | 5     | false
2  | 1      | 5     | false
3  | 2      | 2     | true
4  | 2      | 1     | false
5  | 1      | 3     | true 
```

在下面的 sql 语句中，我试图`value`按列获取每个类型组的计数`value`。如果该`reverse`列为真，我需要反转比例。所以规模将是：

```
5 = 1
4 = 2
3 = 3
2 = 4
1 = 5 
```

我尝试了以下 SQL 语句，但似乎没有将反向比例应用于计数，它只是一起忽略了反向标志：

```
select value, count(
case reverse
    WHEN false THEN 
        CASE value
        WHEN '5' THEN '1'
        WHEN '4' THEN '2'
        WHEN '3' THEN '3'
        WHEN '2' THEN '4'
        WHEN '1' THEN '5'

    END
    ELSE value
END
)
from table1
group by value 
```

我做错了什么？如何应用反向逻辑将反向问题值计算为正确值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T20:22:09.800

所以我可能会误解；如果是这样，我道歉。但我的理解是，您希望通过绝对值获得计数......所以如果我有五行的值为 1 和五行的值为 5（反转），我想对于值为 1，显示计数为 10。

假设是这种情况并且你有一个字符串而不是一个 int （但这些值都是整数而不是更复杂的东西：

```
 ;WITH reversed AS 
    (
        SELECT id, 
            [cat id], 
            CASE WHEN [reverse] = 1 THEN 6 - CAST([value] AS INT) 
                ELSE CAST([value] AS INT) END AS [calcValue]
        FROM table1
    )
    SELECT calcValue, COUNT(id) AS counts
    FROM reversed
    GROUP BY calcValue; 
```

原始计算的部分问题是您在分组之前没有对原始值做任何事情，您只是在计算 case 语句的计数。如果其中的`COUNT()`值不同，则不会有所不同，只要值不是`NULL`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T20:07:39.043

试试这个：

```
with data as ( 
  select * from ( values
    (1,1,5,'false'),
    (2,1,5,'false'),
    (3,2,2,'true'),
    (4,2,1,'false'),
    (5,1,3,'true')
    ) data(id,cat,value,reverse)
) 
select 
  id,
  cat,
  value = case when reverse='false' then value else 6-value end
from data 
```

返回这个：

```
id          cat         value
----------- ----------- -----------
1           1           5
2           1           5
3           2           4
4           2           1
5           1           3 
```

# django - 在 django social 上注册将他们联系起来

> ID：15370960
> 
> 赞同：0
> 
> 时间：2013-03-12T19:59:41.677
> 
> 标签：django

我想要一个注册系统，它允许使用所有正常注册好东西进行电子邮件确认。我将使用[userena](https://github.com/bread-and-pepper/django-userena)，这看起来很完美。

接下来，我需要允许用户与他们的 twitter 帐户链接，或者如果他们愿意，可以使用他们的 twitter 帐户进行签名。

那么我的选择是什么？我正在考虑使用[django social](https://github.com/omab/django-social-auth)。两者可以联系起来吗？还是有更好的解决方案？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T22:32:06.780

您可能想在[http://github.com/pennersr/django-allauth](http://github.com/pennersr/django-allauth)上查看 django-allauth——它提供“所有正常的注册好东西”以及 Twitter 登录（以及许多其他），全部来自盒子，带有刚刚工作的流程。

这是否是更好的解决方案，我将由您决定。

（注意：即使我是 allauth 的作者，这个答案也是诚实的，不应该被视为一种无耻的自我推销形式）

# php - Javascript JSON 到 PHP 数组

> ID：15370966
> 
> 赞同：2
> 
> 时间：2013-03-12T20:00:06.290
> 
> 标签：php, javascript, json

在我的 Javascript 中，我正在组装和排列如下：

```
 cachePHP = "'lat':'" + (Number(upDataItems[2])).toFixed(5)+"'";
cachePHP = cachePHP + ",'lon':'" + (Number(upDataItems[3])).toFixed(5)+"'";
cachePHP = cachePHP + ",'msec':'" + (parseInt(upDataItems[7])-parseInt(tz))+"'";
cachePHP = cachePHP + ",'spd':'" + (Number(upDataItems[0])).toFixed(1)+"'";
cachePHP = cachePHP + ",'hdg':'" + (Number(upDataItems[1])).toFixed(1)+"'";

dataCacheNew.push("{"+cachePHP+"}"); 
```

我向数组中添加了不同数量的数据，可以是 10 项，也可以是 100 项……然后我将其推送到 PHP 文件中。从 Javascript 调用 PHP 文件，如下所示：

```
"my.php?che="+JSON.stringify(dataCacheNew); 
```

在 PHP 中，如何获取数据以便“解析”它并将其发布到我的数据库？

更新 03/13：我仍然无法让它工作。根据以下建议更新，但仍然......没有工作！

我的 Javascript (jQuery):

```
 var jsonData = new Array();
    jsonData.push({
    lat: Number(56.34).toFixed(2),
    lon: Number(12.56).toFixed(2),
    msec: Number(123456799000).toFixed(2),
    spd: Number(4.2).toFixed(2),
    hdg: Number(1.4).toFixed(2)
}); 

jsonData.push({
    lat: Number(12.34).toFixed(2),
    lon: Number(34.56).toFixed(2),
    msec: Number(123456789000).toFixed(2),
    spd: Number(1.2).toFixed(2),
    hdg: Number(3.4).toFixed(2)
});

    $.ajax({
        url: 'insertCache.php',
        type: 'POST',
        data: "che="+JSON.stringify(jsonData),
        dataType: 'json',
        contentType: "application/json",
        success: function(result) {
            alert(result);
        }
    }); 
```

我的PHP：

```
$cache = $_POST['che'];
    writeData($cache,"insertCache.txt");

$cacheDecode = json_decode($cache);
writeData($cacheDecode,"insertCacheDecode.txt"); 
```

插入缓存.txt：

```
[{\"lat\":\"56.34\",\"lon\":\"12.56\",\"msec\":\"123456799000.00\",\"spd\":\"4.20\",\"hdg\":\"1.40\"},{\"lat\":\"12.34\",\"lon\":\"34.56\",\"msec\":\"123456789000.00\",\"spd\":\"1.20\",\"hdg\":\"3.40\"}] 
```

insertCacheDecode.txt 完全空白

是什么赋予了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T20:01:05.397

你可以使用这样的代码：

```
$array = json_decode($_GET['che']); 
```

请注意，您不需要创建字符串，您可以对嵌套对象进行字符串化：

```
dataCacheNew.push({
    lat: (Number(upDataItems[2])).toFixed(5),
    lon: (Number(upDataItems[3])).toFixed(5),
    msec: (parseInt(upDataItems[7])-parseInt(tz)),
    spd: (Number(upDataItems[0])).toFixed(1),
    hdg: (Number(upDataItems[1])).toFixed(1)
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T20:06:45.737

不要尝试自己构建 JSON 字符串。语言对此有内置的方法。而是按照您想要的方式构建对象，然后将其编码为 JSON。

```
var cachePHP = {
    lat: (Number(upDataItems[2])).toFixed(5),
    lon:(Number(upDataItems[3])).toFixed(5),
    msec: (parseInt(upDataItems[7])-parseInt(tz)),
    spd: (Number(upDataItems[0])).toFixed(1),
    hdg: (Number(upDataItems[1])).toFixed(1),
};

dataCacheNew.push(cachePHP);

console.log(JSON.stringify(dataCacheNew)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T20:05:05.210

您的 JSON 无效，因为您使用单引号作为属性名称。最重要的是，您正在对编码错误的 JSON 进行字符串化。

改用以下内容

```
dataCacheNew.push({
    lat: Number(upDataItems[2]).toFixed(5),
    lon: Number(upDataItems[3]).toFixed(5),
    ...
});
"my.php?che=" + JSON.stringify(dataCahceNew); 
```

# node.js - 在 Node 中处理流，其中操作取决于异步调用

> ID：15370967
> 
> 赞同：2
> 
> 时间：2013-03-12T20:00:06.263
> 
> 标签：node.js

我正在尝试编写一个节点程序，该程序采用数据流（使用 xml-stream）并将其合并并将其写入数据库（使用猫鼬）。我在弄清楚如何进行合并时遇到问题，因为在我处理下一条记录时数据可能还没有进入数据库。我正在尝试做类似的事情：

```
on order data being read from stream
  look to see if customer exists on mongodb collection 
    if customer exists 
      add the order to the document
    else
      create the customer record with just this order
    save the customer 
```

我的问题是客户的两个“附近”订单导致写入重复的客户记录，因为在第二个检查是否存在之前没有写入第一个记录。

从理论上讲，我认为我可以通过暂停 xml 流来解决这个问题，但是有一个错误阻止我这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T10:11:09.790

不确定这是不是最好的选择，但我最终会使用[异步](https://github.com/caolan/async) [队列。](https://github.com/caolan/async#queue)

[在我这样做的同时，添加了允许暂停的xml-stream](https://github.com/assistunion/xml-stream)（这是我用来处理流的）的拉取请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T21:12:30.993

来自流的数据中的客户对象是否有唯一字段？您可以在 mongoose 模式中添加唯一限制，以防止在数据库级别出现重复。

创建新客户时，添加一些后备逻辑来处理您尝试创建客户但同一客户同时由另一个保存创建的情况。发生这种情况时，再次尝试保存，但首先获取其他客户并将订单添加到获取的客户文档中

# javascript - 使用逗号初始化/设置多个变量，没有“var”？

> ID：15370968
> 
> 赞同：1
> 
> 时间：2013-03-12T20:00:08.507
> 
> 标签：javascript

我见过很多例子：

```
var foo = 1, bar = 2, baz = 3; 
```

但是，我可以不做同样的事情`var`吗？例子：

```
// Declare at top of block for readability's sake:
var foo, bar, baz;
// ... stuff here ...
// Later in script, I finally get around to initializing above vars:
foo = 1, bar = 2, baz = 3; // Is using commas without var legal? 
```

换句话说，在javascript中有一行我在没有`var`关键字的情况下初始化/设置多个变量是否合法？我还没有找到任何关于这是否被允许和/或得到很好支持的权威文档。

替代方案是：

```
foo = 1; bar = 2; baz = 3; 
```

* * *

这是促使我提出问题的现实世界的情况：

```
for (var i = 0, l = haystack.length; i < l; i++) { ... } 
```

...我想将`for`循环内的变量声明移动到父块的顶层，例如：

```
var i, l;

// ... stuff here ...

for (i = 0, l = haystack.length; i < l; i++) { ... } 
```

...但我只`var`在语句开头使用逗号。以上是合法的（？），还是应该是：

```
var i, l;

// ... stuff here ...

for (i = 0; l = haystack.length; i < l; i++) { ... } 
```

（注意添加的分号。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T20:01:03.543

In javascript you can separate expressions by commas and they will execute left to right, returning the value of the far right expression

So yes you can do this in general and the following is legal syntax.

```
for (i = 0, l = haystack.length; i < l; i++) { ... } 
```

See more about the comma operator here: [MDN Docs](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Comma_Operator)

# r - 运行 sqlite 时为空变量

> ID：15370971
> 
> 赞同：0
> 
> 时间：2013-03-12T20:00:12.453
> 
> 标签：r, sqlite, empty-list

所以我有一个变量设置为 R 中的 sqlite 查询，如下所示：

```
query<-paste("SELECT ID FROM DataTable WHERE Name = \'", X, "\'", sep="")
xid<-dbGetQuery(conn, query) 
```

如果 X 在数据库中，则 xid 是

```
1 obs. of 1 varaibles 
```

但如果 X 不在数据库中，则 xid 是

```
0 obs of 1 variables 
```

我不能使用`exists()`, or `Length()`or or `is.integer()`or`is.null()`或任何我能想到的东西来区分它们，因为它们都存在，长度相同且不为空。

我确定这很简单，但我对此很陌生（显然）。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T20:11:34.730

您可以使用`nrow`或`dim`在此处使用可重现的示例：

```
library(RSQLite)
driver <- dbDriver("SQLite")
conn <- dbConnect(driver, dbname='DB_KEY')

mydf <- read.table(text ='ID    NAme
1   2   OtherData1
2   2   OtherData2
3   2   OtherData3
4   2   OtherData4
5   2   OtherDat',head=T)

dbWriteTable(conn, "DataTable", mydf, append=TRUE)
dbDisconnect(conn)
X <- 'OtherData1'
query<-paste("SELECT type FROM Data1 WHERE name = \'", X , "\'", sep="")
conn <- dbConnect(driver, dbname='DB_KEY')
xid<-dbGetQuery(conn, query)

dim(xid)
[1] 1 1
dim(xid.notexist)
[1] 0 1 
```

当查询没有返回数据时，`dim(xid.notexist)[1]`=`nrow(xid.notexist)`等于 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T20:05:00.517

`dbGetQuery`返回一个数据框。在第一种情况下，它有一行，所以`nrow(xid)`应该是 1。在第二种情况下，它应该返回一个零行的数据帧，所以`nrow(xid)`应该是零。只需检查行数。

# html - CSS - display:none on hover self

> ID：15370973
> 
> 赞同：0
> 
> 时间：2013-03-12T20:00:21.793
> 
> 标签：html, css

我正在尝试创建一种效果，如果用户将鼠标悬停在某个元素上，该元素就会消失。我已经尝试了下面的代码，但似乎`display:none;`破坏了 CSS。我想知道为什么我的 CSS 不起作用，以及我将如何解决我的问题。

[http://jsfiddle.net/2c42U/](http://jsfiddle.net/2c42U/)

```
<div class="foo">text</div> 

.foo:hover {
    color: red;
    display: none;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-12T20:02:52.073

尝试更改元素的不透明度：http: [//jsfiddle.net/XtmVQ/](http://jsfiddle.net/XtmVQ/)

```
.foo:hover {
    opacity:0;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T20:04:05.097

试试这个而不是 display:none

```
visibility:hidden 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T20:04:23.633

试试这个：

```
.foo:hover {
    opacity: 0;
} 
```

您对此的最终意图是什么？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T20:06:28.013

正如@Richard 所说，使用不透明度

另外，要倒退，即执行以下操作：

```
filter:alpha(opacity=0); /* For IE8 and earlier */ 
```

您还可以添加一个过渡：

```
transition: 0.5s 
```

所以它不是即时的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-12T20:09:03.407

您可以执行其他人建议的操作，使用`opacity: 0;`or `visibility:hidden;`，但如果您必须将其隐藏在页面流程中。然后执行以下操作：

使用这样的 CSS：

```
.hidden{
    display: none !important;
} 
```

您可以使用该类`hidden`并将其应用于任何元素以隐藏它。对于您想要的悬停行为，您需要 JavaScript/jQuery 来应用类名。见[http://jsfiddle.net/rkH7F/](http://jsfiddle.net/rkH7F/)

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-03-12T20:02:30.170

我认为 css 行不通。使用 jQuery

**更新**

哦，我的坏。css 会工作，但 jquery 会有更好的效果

```
 $('#outer').mouseenter(function() {
       $("#outer").hide();
     }); $('#outer').mouseleave(function() {
       $("#outer").show();
     }); 
```

**固定的**

```
 $('#outer').mouseenter(function() {
       $("#outer").slideUp();
     }); $('#outer').mouseleave(function() {
       $("#outer").slideDown();
     }); 
```

# java - [修复和改进]通过按钮操作替换文件中的行

> ID：15370976
> 
> 赞同：1
> 
> 时间：2013-03-12T20:00:31.423
> 
> 标签：java, file, netbeans, replace

有一个文件`Activites.dat`，其格式如下：

**日**
**ActivityName**
**SupervisorName**
**位置**
**是否已支付？**

例如数据

```
Sunday
Advanced Open Water Dive Certificate
Mr.Jones
N/A
Yes

Sunday
Sailing
Mr. Jackson
N/A
Yes

Sunday
Generation Next
Ms.Steele
N/A
Yes 
```

现在，我在一个框架上有一个按钮，它显示了表格中当前选定活动的所有信息，并且框架工作正常；所选活动的所有数据都正确显示。

我现在需要做的是，当`btnSave`按下按钮时，保留原始值进行匹配`Activities.dat`以找出需要编辑/替换的数据，存储用户当前输入的数据，然后新数据替换中的旧数据`Activities.dat`

例如想要的结果

**最初的**

```
Sunday
Advanced Open Water Dive Certificate
Mr.Jones
N/A
Yes

Sunday
Sailing
Mr. Jackson
N/A
Yes

Sunday
Generation Next
Ms.Steele
N/A
Yes 
```

**编辑版本**

```
Sunday
Advanced Open Water Dive Certificate
Mr.Jones
N/A
Yes

**Monday**
**Sailing Elite Course**
**Mr.Jonathan**
**HS5**
**No**

Sunday
Generation Next
Ms.Steele
N/A
Yes 
```

**我当前（不工作）的代码**

```
 private void btnSaveActionPerformed(java.awt.event.ActionEvent evt) {                                        

//ALL "original-" STRINGS ARE INITIALISED BEFORE

        String nActivityName  =   txtActivityName.getText();
        Object nDay  =   comboboxDay.getSelectedItem().toString();
        String nSupervisor = txtSupervisor.getText();
        String nLocation = txtLocation.getText();
        String nPaid = null;

        //Check which option is selected: Paid or Not Paid
        if(radioYes.isSelected())
        {
            nPaid = radioYes.getText();
        }
        if(radioNo.isSelected())
        {
            nPaid = radioNo.getText();
        }

        File file = new File("Activities.dat");

        try{
                BufferedReader reader = new BufferedReader(new FileReader(file));
                BufferedWriter writer = new BufferedWriter(new FileWriter(file, true));

                while(reader.ready())
                {
                    String RDay = reader.readLine();    
                    String RActivityName = reader.readLine();
                    String RSupervisor = reader.readLine();
                    String RLocation = reader.readLine();
                    String RPaid = reader.readLine();
                    String nothing = reader.readLine();

                    //Match the exact same set of data as the original activity's data before edit.
                    if(RActivityName.equals(originalActivityName))
                    {
                        RDay.replace(RDay, (CharSequence) nDay);
//                                = nDay.toString();
                        RActivityName = nActivityName;
                        RSupervisor = nSupervisor;
                        RLocation = nLocation;
                        RPaid = nPaid;
                        nothing = nothing;
                    }
                    System.out.println(RDay + RActivityName + RSupervisor + RLocation + RPaid);
                }

        }
        catch(IOException e)
        {
                Logger.getLogger(AddActivity.class.getName()).log(Level.SEVERE, null, e);
        }

    } 
```

我可以存储原始值以进行比较并获取新数据，但我不知道如何用`Activities.dat`. 我该怎么做呢？

是的，我知道我有一个`BufferedReader`，但我没有使用它，因为我不知道在这种特殊情况下在哪里或如何使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T11:04:09.603

这是执行“读/写整个文件”方法的一种方法：

1.  创建一个封装单个活动的类，因此您可以在比一堆字符串更高的级别上实现逻辑：

    ```
    class Activity {
      String day;
      String activityName;
      String supervisorName;
      String location;
      String paid;
    } 
    ```

    这是一个非常粗略的课程大纲。为简洁起见，我没有包含适当的构造函数、getter `hashCode()`、`equals()`和`toString()`.

2.  创建另一个只关心从/向文件读取和写入活动的类。这再次使您的代码更易于理解。

    想想你想从那个类中得到什么，这些应该是调用者唯一可见的方法，例如

    ```
    /** Write activities to a file. */
    void writeActivities(File file, List<Activity> activities);

    /** Read activities from a file. */
    List<Activity> readActivities(File file); 
    ```

    然后实现方法，例如

    ```
    public class ActivityManager {
      // Don't rely on te platform default, use a fixed charset.
      private final static Charset UTF_8 = Charset.forName("UTF-8");

      /** Write activities to a file. */
      void writeActivities(File file, List<Activity> activities)
          throws IOException {
        try (PrintWriter out = new PrintWriter(
            new OutputStreamWriter(new FileOutputStream(file), UTF_8))) {
          boolean first = true;
          for (Activity activity : activities) {
            if (!first) {
              // Print a newline after every activity.
              out.println();
            }
            writeActivity(out, activity);
            if (first) {
              first = false;
            }
          }
        }
      }

      private void writeActivity(PrintWriter out, Activity activity) {
        out.println(activity.day);
        out.println(activity.activityName);
        out.println(activity.supervisorName);
        out.println(activity.location);
        out.println(activity.paid);
      }

      /** Read activities from a file. */
      List<Activity> readActivities(File file) throws IOException {
        try (BufferedReader in = new BufferedReader(
               new InputStreamReader(new FileInputStream(file),
            UTF_8))) {
          List<Activity> result = new ArrayList<Activity>();
          while (true) {
            Activity activity = readActivity(in);
            result.add(activity);

            String line = in.readLine();
            if (line == null) {
              break; // Reached end of file.
            }
            if (!line.equals("")) {
              throw new IllegalStateException(
                "Expected empty line but got: <" + line + ">");
            }
          }
          return result;
        }
      }

      private Activity readActivity(BufferedReader in) throws IOException {
        Activity activity = new Activity();
        activity.day = in.readLine();
        activity.activityName = in.readLine();
        activity.supervisorName = in.readLine();
        activity.location = in.readLine();
        activity.paid = in.readLine();
        return activity;
      }
    } 
    ```

    上面的代码依赖于 Java 7 中引入的[try-with-resources 功能](http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)。对于早期版本的 Java，您需要`try`通过恢复为链接中显示的通常的 declare-try-finally-close 样式来重写这两个块。

3.  从您的 UI 事件处理代码（如`actionPerformed()`方法）中，只需调用一个实例`ActivityManager`来读取和写入活动并在您的 UI 组件和`Activity`类之间进行转换。

# javascript - jQuery .on(click.class-name)

> ID：15370977
> 
> 赞同：3
> 
> 时间：2013-03-12T20:00:34.407
> 
> 标签：javascript, google-analytics

我正在查看 WordPress Google Analytics 插件，特别是外部链接 javascript 文件，但我无法弄清楚这种语法的含义：

```
$('a:external').on( 'click.wp-google-analytics', function(e){ 
```

我之前看到我们为外部链接定义了一个自定义过滤器，但我说的是`click.wp-google-analytics`. 我不知道点击可以有一个类名。谁能指出我理解这一点的正确方向以及为什么需要类名？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-12T20:03:00.987

这是一个命名空间事件。提供一种方法来确保您不会破坏可能由其他用户/插件附加的现有事件

[http://docs.jquery.com/Namespaced_Events](http://docs.jquery.com/Namespaced_Events)

# intellij-idea - IntelliJ 包含包含在排除目录中的目录？

> ID：15370978
> 
> 赞同：2
> 
> 时间：2013-03-12T20:00:44.560
> 
> 标签：intellij-idea, protocol-buffers, project-structure, generated-code

IntelliJ 可以包含包含在排除目录中的源目录吗？

我正在使用 Google Protocol Buffers 并将生成的类文件放在`target/proto-generated`目录中。我已经排除了目标目录，有没有办法标记`proto-generated`为源目录**并将**目录排除在外`target`？

*   目标<*排除*>
    *   班级
    *   原型生成的<***包含***>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T16:13:50.333

感谢 CrazyCoder

*“有关解决方法，请参见[youtrack.jetbrains.com/issue/IDEABKL-6054](http://youtrack.jetbrains.com/issue/IDEABKL-6054)。”*

# ksh - 如何在 CSV 文件中将时间戳从 MMDDYYYY 更改为 YYYYMMDD？

> ID：15370980
> 
> 赞同：0
> 
> 时间：2013-03-12T20:00:58.317
> 
> 标签：ksh

我有一个 csv 文件，内容如下：

```
"Name","Payment",...,"DATE"
"Mike","40",...,"12252012"
"Jack","55",...,"01162013"
... 
```

该文件包含大约数千个此类列表。并且有些字段的值可能是 8 位或更长的数字。有一件事是肯定的：DATE 字段是最后一列。

如何将其中的 DATE 列从 MMDDYYYY 更改为 YYYYMMDD 格式？

在 Korn Shell 中更好。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T20:03:29.753

**编辑：**如果日期字段始终是最后一个，您可以使用：

```
cat file.csv | perl -pe 's/(.*,")(\d{2})(\d{2})(\d{4})"/$1$4$2$3"/' 
```

或者

```
perl -p -i -e 's/(.*,")(\d{2})(\d{2})(\d{4})"/$1$4$2$3"/' file.csv 
```

* * *

如果 CSV 只有一个字段包含八位或更多位：

使用 Perl：

```
cat file.csv | perl -pe 's/(\d\d)(\d\d)(\d\d\d\d)/$3$1$2/' 
```

或更短（编辑文件到位）：

```
perl -p -i -e 's/(\d{2})(\d{2})(\d{4})/$3$1$2/' file.csv 
```

# paypal - Paypal DoDirectPaymentRequest 返回 NULL

> ID：15370986
> 
> 赞同：2
> 
> 时间：2013-03-12T20:01:08.050
> 
> 标签：paypal

我正在使用 Paypal 的经典 API 进行直接付款。这是代码：

```
 require('merchant-sdk-php-master/samples/PPBootStrap.php');

        $logger = new PPLoggingManager('DoDirectPayment');

        $address = new AddressType();
        $address->Name = $full_name;
        $address->Street1 = $address_1;
        $address->Street2 = $address_2;
        $address->CityName = $city;
        $address->StateOrProvince = $province;
        $address->PostalCode = $postal_code;
        $address->Country = $country;
        $address->Phone = $phone;

        $paymentDetails = new PaymentDetailsType();
        $paymentDetails->ShipToAddress = $address;
        $paymentDetails->OrderTotal = new BasicAmountType('CAD', $amount);

        $personName = new PersonNameType();
        $personName->FirstName = $first_name;
        $personName->LastName = $last_name;

        $payer = new PayerInfoType();
        $payer->PayerName = $personName;
        $payer->Address = $address;
        $payer->PayerCountry = $country;

        $cardDetails = new CreditCardDetailsType();
        $cardDetails->CreditCardNumber = $card_number;
        $cardDetails->CreditCardType = $card_type;
        $cardDetails->ExpMonth = $expiry_month;
        $cardDetails->ExpYear = $expiry_year;
        $cardDetails->CVV2 = $cvv;
        $cardDetails->CardOwner = $payer;

        $ddReqDetails = new DoDirectPaymentRequestDetailsType();
        $ddReqDetails->CreditCard = $cardDetails;
        $ddReqDetails->PaymentDetails = $paymentDetails;
        $ddReqDetails->PaymentAction = 'Sale';
        $ddReqDetails->IPAddress = $ip_address;
        $ddReqDetails->ReturnFMFDetails = true;

        $doDirectPaymentReq = new DoDirectPaymentReq();
        $doDirectPaymentReq->DoDirectPaymentRequest = new DoDirectPaymentRequestType($ddReqDetails);

        $logger->info("created doDirectPaymentReq Object");

        $paypalService = new PayPalAPIInterfaceServiceService();

        try{
            $doDirectPaymentResponse = $paypalService->DoDirectPayment($doDirectPaymentReq);
            var_dump($doDirectPaymentResponse);
        } 
        catch (Exception $ex){
            var_dump($ex);
        } 
```

这是它返回的对象：

```
object(DoDirectPaymentResponseType)#84 (15) { ["Amount"]=> NULL ["AVSCode"]=> NULL ["CVV2Code"]=> NULL ["TransactionID"]=> NULL ["PendingReason"]=> NULL ["PaymentStatus"]=> NULL ["FMFDetails"]=> NULL ["ThreeDSecureResponse"]=> NULL ["PaymentAdviceCode"]=> NULL ["Timestamp"]=> NULL ["Ack"]=> NULL ["CorrelationID"]=> NULL ["Errors"]=> NULL ["Version"]=> NULL ["Build"]=> NULL } ­ 
```

我是加拿大人，所以我不能使用新的 API，因为它们在这里还没有。我坚持使用经典的 API。为什么我会得到这个结果？

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T16:17:10.700

出于某种原因，昨天我得到了一个 NULL 值的对象。但是，今天我收到一条错误消息。我修复了错误并获得了成功。

为什么它今天而不是昨天向我显示错误消息，我不知道。我从未更改过任何代码，所以它一定是 Paypal 的结果。

仍然不知道出了什么问题，但就是这样。

# ruby-on-rails - Rails - CKEditor - 没有路线匹配 lang/fr.js 和 editor.css

> ID：15370989
> 
> 赞同：1
> 
> 时间：2013-03-12T20:01:18.493
> 
> 标签：ruby-on-rails, ckeditor

我正在尝试在生产中使用 CKeditor，但它总是失败。

日志：

```
Started GET "/backend/articles/lang/fr.js?t=C6HH5UF" for 127.0.0.1 at 2013-03-12 20:52:40 +0100

ActionController::RoutingError (No route matches [GET] "/backend/articles/lang/fr.js"): 
```

和

```
Started GET "/backend/articles/skins/kama/editor.css?t=C6HH5UF" for 127.0.0.1 at 2013-03-12 20:52:40 +0100
ActionController::RoutingError (No route matches [GET] "/backend/articles/skins/kama/editor.css"): 
```

在我的 prodcution.rb 中：

```
 config.serve_static_assets = true

  # Compress JavaScripts and CSS
  config.assets.compress = true

  # Don't fallback to assets pipeline if a precompiled asset is missed
  config.assets.compile = true 
```

我已经尝试根据这个问题明确添加文件 => [如何获取 ckeditor 资源以在 Rails 3.1 资产管道中编译和加载](https://stackoverflow.com/questions/9023523/how-to-get-ckeditor-resources-to-compile-and-load-in-rails-3-1-asset-pipeline)

```
 config.assets.precompile += [ /.*config\.js/, /.*fr.js/, /.*editor.css/ ] 
```

但它失败了......这意味着没有显示textareas。有人有想法吗？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-04T19:47:47.307

这可能会对您有所帮助，请尝试像这样添加：

在您的 production.rb 中：

```
config.assets.precompile += ['ckeditor/skins/kama/editor.css', 'ckeditor/lang/fr.js', 'ckeditor/skins/kama/editor.css'] 
```

并在布局中，在 html 的 HEAD 标签中添加这一行：

```
<script type="text/javascript">
  var CKEDITOR_BASEPATH = '/assets/ckeditor/';
</script> 
```

# r - 从 knitr 调用时 fread 的奇怪输出

> ID：15370993
> 
> 赞同：14
> 
> 时间：2013-03-12T20:01:38.333
> 
> 标签：r, data.table, knitr

我正在使用最近引入的`fread`函数 from`data.table`来读取数据文件。当我将代码包装到 knitr (Rmd) 文档中时，我注意到一些奇怪的输出，即如下行：

```
## 
0% 
```

即使`verbose`选项`fread`设置为 FALSE。我曾经`sink`隐藏此输出，但我想将确切的问题报告给包作者。这是一个最小的例子，

```
library(knitr)

test = "```{r}
require(data.table) 
fread('1 2 3\n')
```"
knit2html(text=test, output="test.html")
browseURL("test.html") 
```

什么是 0% 输出？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-13T00:01:18.123

这是一个百分比进度计数器。对我来说，它会打印 0%, 5%, 10%, ... 95%, 100% （例如），最后带有 a ，以便在提示符下键入时`\r`显示在调用下方的一行上。`fread`

但是当从函数、批处理和 knitr 调用时，这是不可取的。现在已将其删除。来自 v1.8.9 (rev 851) 的新闻：

> *   % 进度控制台仪表已被删除。在批处理模式、日志文件和不处理的报告中，输出不方便`\r`。很难检测`fread`从哪里调用，另外，通过将代码保存在 C for 循环中来删除它会加快`fread`一点速度（这就是为什么它不是可选的）。使用操作系统的系统监视器来确认 fread 正在进行。感谢 Baptiste 突出显示：
>     [从 knitr 调用时 fread 的奇怪输出](https://stackoverflow.com/questions/15370993/strange-output-from-fread-when-called-from-knitr)

只是对完整性的快速提醒。从顶部开始`?fread`：

> ***此功能仍在开发***中。例如，日期被读取为字符（它们可以在之后使用优秀的 fasttime 包或标准基本函数进行转换）和嵌入引号（“\””和“”“”）有问题。还有其他已知问题没有已修复且功能尚未实现。但是，您可能会发现它在许多情况下都有效。请向 datatable-help 或 Stack Overflow 的 data.table 标签报告问题。
> 
> ***尚未用于生产用途***。不是因为它在崩溃或错误的意义上不稳定（您的测试将显示它在您的情况下是否稳定），而是因为 fread 的论点和行为将来可能会改变；即，我们希望进行（希望是较小的）非向后兼容的更改。为什么它会被发布到 CRAN 呢？因为 CRAN 维护人员要求维护版本符合 R-devel 中新的更严格的测试，并且一些 Bioconductor 包依赖于 data.table 并且 Bioconductor 要求包通过 R-devel 检查。留下 fread 并写下这些段落比取出 fread 更快。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-13T00:26:25.967

报告不是问题。

正如 Matthew Dowle 所说，这是一个进度计数器`fread`

您可以设置`results = 'hide'`以避免包含这些结果

```
library(knitr)

test = "```{r, results = 'hide'}
require(data.table) 
fread('1 2 3\n')
```"
knit2html(text=test, output="test.html")
browseURL("test.html") 
```

看，没有进度条。

* * *

在实践层面上，我认为拥有`results = 'hide'`甚至`include = FALSE`迈出这样的一步是明智的。

您不会希望逐步重复这种读取，实际上，您只想读取一次数据，然后将其序列化（使用`save`，`saveRDS`或类似的），以便下次可以使用（这会更快）。

* * *

根据评论编辑

我会将处理分成许多较小的块。然后您可以不包含块中的读数，但包含未评估的虚拟版本（因此您可以看到代码，但不包含结果）

```
```{r libraries}
require(data.table) 
 ```

```{r loaddata, include = FALSE}
DT <- fread('yourfile')
```

```{r loaddummy, ref.label = 'loaddata', eval = FALSE, echo = TRUE}
```

```{r dostuff}
# doing other stuff
``` 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-17T04:08:53.047

里面有个参数调用`showProgress`，`fread`如果设置为`FALSE`，就看不到进度输出了。（在制作 r 降价时很有用。）

# bash - 提交后脚本不会导出以“@”开头的文件

> ID：15370998
> 
> 赞同：0
> 
> 时间：2013-03-12T20:02:17.070
> 
> 标签：bash, svn, post-commit

我正在使用这个提交后脚本（这不是我的工作，我从这里获得）。

```
#!/bin/bash

REPOS="$1"
REV="$2"

# A - Item added to repository
# D - Item deleted from repository
# U - File contents changed
# _U - Properties of item changed; note the leading underscore
# UU - File contents and properties changed

# Files and directories can be distinguished, as directory paths are displayed with a trailing "/" character.

LOOK=/usr/bin/svnlook
SVN=/usr/bin/svn 
DEV=/var/www/my_web

cd /var/tmp/svn
  for changes in `$LOOK changed $REPOS | awk '{print $1 "=" $2;}'`;
  do
        len=${#changes}
        idx=`expr index "$changes" =`;
        directory=${changes:$idx};
        action=${changes:0:$idx-1};
        if [ ${changes:len-1} = '/' ]
        then
            case "$action" in
                "A" ) \
                    mkdir --mode=775 -p $DEV/$directory;
                    chown www-data:www-data $DEV/$directory;
                    chmod 775 $DEV/$directory;
                    ;;
                "D" ) \
                    rmdir $DEV/$directory;
                    ;;
            esac
        else
            case "$action" in
                "A"|"U"|"UU" ) \
                    $SVN export --force --non-interactive -r HEAD -q file://$REPOS/$directory;
                    BASE=`basename $directory`;
                    DIR=`dirname $directory`;
                    chown www-data:www-data $BASE;
                    chmod 775 $BASE;
                    mkdir --mode=775 -p $DEV/$DIR;
                    cp -f --preserve=ownership $BASE $DEV/$DIR;
                    unlink $BASE;
                    ;;
                "D" ) \
                    rm -f $DEV/$directory;
                    ;;
            esac
        fi
  done

exit 0 
```

脚本完美运行 - 添加/删除文件、文件夹、设置权限，但如果我提交名称为“@layout.latte”的文件，我可以在我的服务器上的 SVN 树中看到这个文件（所以提交工作正常）但提交后脚本不会将此文件复制到我的 /var/www/my_web 文件夹中。

有谁知道为什么？非常感谢！我到处寻找，但我没有任何运气。

**编辑：**它也不适用于像“test@test.txt”这样的文件。这是因为“@”，但我不知道如何解决它。我认为像逃避这样的事情可能会有所帮助，但我真的不是一个“bash guy”:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T20:14:31.473

`@`在 Subversion URLs 中有一个特殊的含义——但只针对最终的`@`. 您需要在 URL 中将 URL 编码`@`为 %40，或在 URL 中附加一个尾随`@`。