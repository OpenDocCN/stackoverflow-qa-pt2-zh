# StackOverflow 问答 15412000-15412999

# c# - 如何用列c#中的文本替换标签文本

> ID：15412000
> 
> 赞同：0
> 
> 时间：2013-03-14T14:27:24.720
> 
> 标签：c#, sql, visual-studio-2010, select, sql-server-ce

我正在尝试在 Windows 窗体文本框中输入一个学生 ID，并且我希望相应的标签将文本从 label1 更改为 name 列中的数据。我真的对代码感到困惑，因此以下内容。

```
 private void button1_Click(object sender, EventArgs e)
                {

                    SqlCeConnection conn = new SqlCeConnection(@"Data Source=|datadirectory|databse.sdf");
                    conn.Open();
                    SqlCeCommand cmdSelect = conn.CreateCommand();
                    cmdSelect.CommandText = "SELECT * FROM StudentDetails WHERE StudentID = studentIDTextBox.Text";

                    SqlCeDataReader sr = cmdSelect.ExecuteReader();
                    DataSet sd = new DataSet();

                }
                  /* using (SqlCeDataAdapter dataAdapter = new SqlCeDataAdapter("SELECT * FROM StudentDetails WHERE StudentID = '" + studentIDTextBox.Text.ToString() + "'", conn)
                    {

                        // create the DataSet 
                        DataSet ITIADataSet = new DataSet();
                        // fill the DataSet using our DataAdapter 
                        dataAdapter.Fill();

        }
    }
    */ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T14:31:33.807

所以，第一件事是第一 - 你的 SQL 代码找不到任何东西，因为它正在寻找字符串“studentIDTextBox.Text”

你想要 " + studentIDTextBox.Text

其次，直接将字符串放入 SQL 代码中是一种让自己容易受到 SQL 注入攻击的好方法。

否则，你就快到了。

我会去做这样的事情：

```
string studentName = string.Empty;
    while (sr.Read())
    {
     studentName = sr["StudentName"].toString();

    }

lblMyLabel.Text = studentName; 
```

当然，当您没有返回数据时，您需要处理。

完成后不要忘记关闭连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T14:33:12.083

您不能`studentIDTextBox.Text`在这样的查询中使用。它将被视为文本。最好的方法是使用参数化查询

```
cmdSelect.CommandText = "SELECT * FROM StudentDetails WHERE StudentID = @StudentID";
cmdSelect.Parameters.AddWithValue("@StudentID",studentIDTextBox.Text);
or
cmdSelect.Parameters.Add(new SqlCeParameter("@StudentID",SqlDbType.{YourColumnDataType}){Value = studentIDTextBox.Text} 
```

或快速修复

```
cmdSelect.CommandText = String.Format("SELECT * FROM StudentDetails WHERE StudentID = {0}",studentIDTextBox.Text); 
```

请注意，上述内容容易受到 SQL 注入攻击

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T14:31:55.727

你不能这样做：

```
cmdSelect.CommandText = "SELECT * FROM StudentDetails WHERE StudentID = studentIDTextBox.Text"; 
```

因为那不会投入价值。你会想要这样的东西。

`cmdSelect.CommandText = "SELECT * FROM StudentDetails WHERE StudentID = " + studentIDTextBox.Text;`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T14:43:38.933

```
SqlCeConnection conn = new SqlCeConnection(@"Data Source=|datadirectory|databse.sdf");
            conn.Open();
            SqlCeDataAdapter da = new SqlCeDataAdapter("select MyDesiredValue from StudentDetails where StudentID = " + studentIDTextBox.Text + "", conn);
            DataTable dt = new DataTable();
            da.Fill(dt);
            label1.Text = dt.Rows[0][0].ToString(); 
```

# ios - 如何阅读越狱系统日志？

> ID：15412002
> 
> 赞同：1
> 
> 时间：2013-03-14T14:27:29.550
> 
> 标签：ios, jailbreak, syslog, crash-log

0 如何理解为什么gvidi应用程序在启动时下降？我有一个崩溃日志，但我无法从中读取任何有用的信息。

```
========================

ASL is here to serve you

Mar 13 14:28:13 iPhone-5 ubd[25644] <notice>: MS:Notice: Installing: com.apple.ubd [ubd] (793.00)

Mar 13 14:28:13 iPhone-5 ubd[25644] <notice>: MS:Notice: Loading: /Library/MobileSubstrate/DynamicLibraries/IAPFreeService.dylib

Mar 13 14:28:22 iPhone-5 Gvidi[25646] <notice>: MS:Notice: Installing: ru.gvidi [Gvidi] (793.00)

Mar 13 14:28:22 iPhone-5 Gvidi[25646] <notice>: MS:Notice: Loading: /Library/MobileSubstrate/DynamicLibraries/Activator.dylib

Mar 13 14:28:22 iPhone-5 Gvidi[25646] <notice>: MS:Notice: Loading: /Library/MobileSubstrate/DynamicLibraries/CameraTweak.dylib

Mar 13 14:28:22 iPhone-5 Gvidi[25646] <notice>: MS:Notice: Loading: /Library/MobileSubstrate/DynamicLibraries/FullForce.dylib

Mar 13 14:28:22 iPhone-5 Gvidi[25646] <notice>: MS:Notice: Loading: /Library/MobileSubstrate/DynamicLibraries/Nitrous.dylib

Mar 13 14:28:22 iPhone-5 Gvidi[25646] <notice>: MS:Notice: Loading: /Library/MobileSubstrate/DynamicLibraries/OctopusKeyboard.dylib

Mar 13 14:28:22 iPhone-5 Gvidi[25646] <notice>: MS:Notice: Loading: /Library/MobileSubstrate/DynamicLibraries/WinterBoard.dylib

Mar 13 14:28:22 iPhone-5 Gvidi[25646] <warning>: MS:Warning: nil class argument for selector setIconLabelAlpha:

Mar 13 14:28:22 iPhone-5 Gvidi[25646] <notice>: MS:Notice: Loading: /Library/MobileSubstrate/DynamicLibraries/libstatusbar.dylib

Mar 13 14:28:23 iPhone-5 SpringBoard[25531] <warning>: [TWEAK: ALOUD]: Now playing info: (null)

Mar 13 14:28:23 iPhone-5 locationd[54] <notice>: Location icon should now be in state 'Active'

Mar 13 14:28:23 iPhone-5 wifid[29] <error>: WiFi:[384863303.489445]: WiFi unquiescing requested by "locationd"

Mar 13 14:28:23 iPhone-5 wifid[29] <error>: WiFi:[384863303.545222]: WiFi unquiescing requested by "locationd"

Mar 13 14:28:23 iPhone-5 wifid[29] <error>: WiFi:[384863303.554465]: WiFi unquiescing requested by "locationd"

Mar 13 14:28:23 iPhone-5 wifid[29] <error>: WiFi:[384863303.600043]: WiFi unquiescing requested by "locationd"

Mar 13 14:28:24 iPhone-5 backboardd[25523] <warning>: CoreAnimation: updates deferred for too long

Mar 13 14:28:24 iPhone-5 kernel[0] <debug>: AppleAP3GDL::checkDataAvailable:414 DRDY was set after 0 iterations

Mar 13 14:28:24 iPhone-5 backboardd[25523] <warning>: CoreAnimation: timed out fence 28ee3

Mar 13 14:28:24 iPhone-5 SpringBoard[25531] <warning>: CoreAnimation: failed to receive fence reply: 10004003

Mar 13 14:28:24 iPhone-5 kbd[69] <warning>: -[TIXPCDataTransport _handleForPurpose:withReplyBlock:] couldn't get data source for purpose=__TIRDTAB

Mar 13 14:28:24 iPhone-5 Gvidi[25646] <warning>: *** -[NSKeyedUnarchiver initForReadingWithData:]: data is NULL

Mar 13 14:28:24 iPhone-5 securityd[25647] <notice>: MS:Notice: Installing: (null) [securityd] (793.00)

Mar 13 14:28:24 iPhone-5 securityd[25647] <notice>: MS:Notice: Loading: /Library/MobileSubstrate/DynamicLibraries/IAPFreeService.dylib

Mar 13 14:28:25 iPhone-5 ReportCrash[25649] <notice>: MS:Notice: Installing: (null) [ReportCrash] (793.00)

Mar 13 14:28:25 iPhone-5 ReportCrash[25649] <notice>: MS:Notice: Loading: /Library/MobileSubstrate/DynamicLibraries/IAPFreeService.dylib

Mar 13 14:28:25 iPhone-5 ubd[25651] <notice>: MS:Notice: Installing: com.apple.ubd [ubd] (793.00)

Mar 13 14:28:25 iPhone-5 ubd[25651] <notice>: MS:Notice: Loading: /Library/MobileSubstrate/DynamicLibraries/IAPFreeService.dylib

Mar 13 14:28:25 iPhone-5 ReportCrash[25649] <warning>: FAILED: dyld LOAD of <cssymbolowner: 0x1dd5e9b0=""> 946670BB-1CC2-3B74-B9E7-436CAF7DA1BA /var/mobile/Applications/E485C474-5A49-4C99-BA87-4722C3B5CAC4/Gvidi.app/Gvidi

Mar 13 14:28:25 iPhone-5 ReportCrash[25649] <warning>: FAILED: dyld LOAD of <cssymbolowner: 0x1dd5eb80=""> A059EB89-4E62-3EC0-9D63-294C525FF7A2 /Library/MobileSubstrate/MobileSubstrate.dylib

Mar 13 14:28:25 iPhone-5 ReportCrash[25649] <warning>: FAILED: dyld LOAD of <cssymbolowner: 0x1dd5f8a0=""> B0D1162A-8AB0-3529-BB90-E416895B568A /System/Library/Frameworks/MobileCoreServices.framework/MobileCoreServices

Mar 13 14:28:25 iPhone-5 ReportCrash[25649] <warning>: FAILED: dyld LOAD of <cssymbolowner: 0x1dd60690=""> 12DAEF21-4FD2-3415-8028-C97C22DC5CCA /usr/lib/libSystem.B.dylib

Mar 13 14:28:25 iPhone-5 ReportCrash[25649] <warning>: FAILED: dyld LOAD of <cssymbolowner: 0x1dd60ff0=""> 15676E2E-E142-3F59-8907-FF49FCEDE85B /usr/lib/system/libdyld.dylib

Mar 13 14:28:25 iPhone-5 ReportCrash[25649] <warning>: FAILED: dyld LOAD of <cssymbolowner: 0x1dd61f40=""> 0562A59B-DF8D-3F77-83E9-3F35D7E724A8 /usr/lib/system/libxpc.dylib

Mar 13 14:28:25 iPhone-5 ReportCrash[25649] <warning>: FAILED: dyld LOAD of <cssymbolowner: 0x1dd62ad0=""> 55826212-D8B4-352B-87D8-0F93BC9B25C6 /System/Library/PrivateFrameworks/CoreSurface.framework/CoreSurface

Mar 13 14:28:25 iPhone-5 ReportCrash[25649] <warning>: FAILED: dyld LOAD of <cssymbolowner: 0x1dd635c0=""> DBD4F278-C71B-3F21-9DA3-E895B1F6AC80 /usr/lib/liblockdown.dylib

Mar 13 14:28:25 iPhone-5 ReportCrash[25649] <warning>: FAILED: dyld LOAD of <cssymbolowner: 0x1dd63ea0=""> 83291308-3F7F-347F-BA13-40263FF13B52 /System/Library/PrivateFrameworks/IOAccelerator.framework/IOAccelerator

Mar 13 14:28:25 iPhone-5 ReportCrash[25649] <warning>: FAILED: dyld LOAD of <cssymbolowner: 0x1dd64d70=""> 584E0454-42BE-39FC-847F-FE1A5E4C99B2 /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libBLAS.dylib

Mar 13 14:28:25 iPhone-5 ReportCrash[25649] <warning>: FAILED: dyld LOAD of <cssymbolowner: 0x1dd65f70=""> 5E7169AD-0185-3BD0-BA0F-66648A67A010 /System/Library/PrivateFrameworks/DataMigration.framework/DataMigration

Mar 13 14:28:25 iPhone-5 ReportCrash[25649] <warning>: FAILED: dyld LOAD of <cssymbolowner: 0x1dd66cd0=""> 7109F645-A9CA-3A49-97B4-172AED228723 /System/Library/PrivateFrameworks/PrintKit.framework/PrintKit

Mar 13 14:28:25 iPhone-5 ReportCrash[25649] <warning>: FAILED: dyld LOAD of <cssymbolowner: 0x1dd67560=""> 81D69724-6510-3FA3-B85B-4125F0AD33F1 /usr/lib/libiconv.2.dylib

Mar 13 14:28:25 iPhone-5 ReportCrash[25649] <warning>: FAILED: dyld LOAD of <cssymbolowner: 0x1dd68390=""> 53AB26B3-1971-35A7-81D5-5819FD80F032 /System/Library/PrivateFrameworks/Marco.framework/Marco

Mar 13 14:28:25 iPhone-5 ReportCrash[25649] <warning>: FAILED: dyld LOAD of <cssymbolowner: 0x1dd68e60=""> ED43D4DB-46A4-3DB0-976E-EAC5F3BC77A1 /System/Library/PrivateFrameworks/MobileDeviceLink.framework/MobileDeviceLink

Mar 13 14:28:25 iPhone-5 ReportCrash[25649] <warning>: FAILED: dyld LOAD of <cssymbolowner: 0x1dd699a0=""> 137C1FBC-6A84-3D36-9038-348255635111 /System/Library/PrivateFrameworks/HomeSharing.framework/HomeSharing

Mar 13 14:28:25 iPhone-5 ReportCrash[25649] <warning>: FAILED: dyld LOAD of <cssymbolowner: 0x1dd6a750=""> 30360E7D-98A3-3F92-8545-1FE4C54CE112 /Library/MobileSubstrate/DynamicLibraries/IAPFreeService.dylib

Mar 13 14:28:25 iPhone-5 ReportCrash[25649] <notice>: Formulating crash report for process Gvidi[25646]

Mar 13 14:28:28 iPhone-5 locationd[54] <notice>: received EBUSY, try kScanTypeChannel, channel, 12, rssi -60, delayed 0.000s 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T00:30:10.400

此行似乎表明了该问题：

```
Mar 13 14:28:24 iPhone-5 Gvidi[25646] <warning>: *** -[NSKeyedUnarchiver initForReadingWithData:]: data is NULL 
```

但是如果没有您的源代码，就很难确定。问题可能类似于[此处](http://www.alexmedearis.com/nskeyedunarchiver-initforreadingwithdata-data-is-null/)解决的问题：也许您正在尝试将数据保存在某处，但不能确保将其保存到磁盘，然后稍后再尝试将其读回？在任何情况下，请查看您调用 initForReadingWithData 方法的任何位置，并确保在任何用例中其参数都不可能为空。

# jira - Grinder - JIRA 测试失败

> ID：15412009
> 
> 赞同：1
> 
> 时间：2013-03-14T14:27:40.593
> 
> 标签：jira, grinder

我正在尝试按照[此处所述为 JIRA 运行 Atlassian 的磨床测试](https://confluence.atlassian.com/display/ATLAS/JIRA+Performance+Testing+with+Grinder)

然而，每个测试的结果如下所示。

搜索使我相信当某些仪表板已更改时会出现这样的错误，但这不是我的问题，因为我安装了新的 JIRA，没有更改仪表板。

有没有人成功地让这套测试工作？

```
3/14/13 2:19:47 PM (thread 0 run 0 test 100): Aborted run due to Jython exception:
extraction pattern not matching:  
[title":"Introduction".*?renderedGadgetUrl":"http:\\/\\/.*?(\\/.*?)"] [calling TestRunner]
extraction pattern not matching: [title":"Introduction".*?renderedGadgetUrl":"http:\\/\\/.*?(\\/.*?)"]
    File "/home/users/smcconnell/grinder/jira-performance-tests/target/classes/test_scripts/./env.py", line 56, in extract
    File "/home/users/smcconnell/grinder/jira-performance-tests/target/classes/test_scripts/./dashboard.py", line 156, in notLoggedIn
    File "/home/users/smcconnell/grinder/jira-performance-tests/target/classes/test_scripts/./interactions.py", line 78, in goHome
    File "./agent_issue_browser.py", line 34, in __call__
3/14/13 2:19:49 PM (thread 0 run 1 test 100): Aborted run due to Jython exception: extraction pattern not matching: [title":"Introduction".*?renderedGadgetUrl":"http:\\/\\/.*?(\\/.*?)"] [calling TestRunner]
extraction pattern not matching: [title":"Introduction".*?renderedGadgetUrl":"http:\\/\\/.*?(\\/.*?)"]
    File "/home/users/smcconnell/grinder/jira-performance-tests/target/classes/test_scripts/./env.py", line 56, in extract
    File "/home/users/smcconnell/grinder/jira-performance-tests/target/classes/test_scripts/./dashboard.py", line 156, in notLoggedIn
    File "/home/users/smcconnell/grinder/jira-performance-tests/target/classes/test_scripts/./interactions.py", line 78, in goHome
    File "./agent_issue_browser.py", line 34, in __call__ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-29T14:36:40.527

我遇到了同样的问题。问题似乎是 JIRA 配置了 gzip 压缩。在“常规配置”页面上关闭 gzip 压缩后，测试开始运行。

# javascript - IE8 jQ 设置 CSS 属性（宽度或边距）被忽略

> ID：15412012
> 
> 赞同：1
> 
> 时间：2013-03-14T14:27:50.760
> 
> 标签：javascript, internet-explorer-8, image-caching

今天我在尝试操作图像时遇到了一个有趣的 IE8 情况。

我通过更改它们的 url 来替换加载的图像，当它们被加载时，我试图正确地挤压它们并以视口元素为中心（新图像不像它们的前辈那样是方形的）。但是在 IE8 中（还没有测试过 IE7，从同事那里听说过 IE9 - 一切都很好）图像没有缩放，它们只是以原来的大小下降，而我的

```
img.height(105);
img.css('margin-left', (shift?-shift:0)); 
```

被简单地忽略了。这是解决问题的代码。

```
 $('.people-images img').each(function () {
        var img = $(this);
        var oUrl = img.attr('src');

        oUrl = oUrl.replace(/[SM]Thumb/, 'LThumb');

        img.bind('load', function () {
            var img = $(this);
            if (this.width > this.height) {
                var shift = (this.width / (this.height / 105) - 105) / 2;
                img.height(105);
                img.css('margin-left', (shift?-shift:0));
            }
            else {
                var shift = (this.height / (this.width / 105) - 105) / 2;
                img.width(105);
                img.css('margin-top', (shift?-shift:0));
            }
        });

        img.attr('src', oUrl);
        img.attr('style', null);
        img.parent().attr('style', null);
    }); 
```

请寻找我的解决方案的自我答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T14:27:50.760

问题出在 IE 图像缓存和它处理事件处理程序的方式上。在这一行我自己清除了css `img.attr('style', null);`。因此，只需将这种样式删除移到顶部即可解决问题。

```
$('.people-images img').each(function () {
    var img = $(this);
    var oUrl = img.attr('src');

    oUrl = oUrl.replace(/[SM]Thumb/, 'LThumb');
    img.attr('style', null);

    img.bind('load', function () {
        var img = $(this);
        if (this.width > this.height) {
            var shift = (this.width / (this.height / 105) - 105) / 2;
            img.height(105);
            img.css('margin-left', (shift?-shift:0));
        }
        else {
            var shift = (this.height / (this.width / 105) - 105) / 2;
            img.width(105);
            img.css('margin-top', (shift?-shift:0));
        }
    });

    img.attr('src', oUrl);
    img.parent().attr('style', null);
}); 
```

我觉得这很奇怪，因为即使缓存的图像确实会立即加载，IE 怎么会在执行范围的中间触发回调？

猜猜，在 src 替换之前放置与样式相关的代码也应该有效，但我没有确认。

```
img.attr('style', null);
img.attr('src', oUrl); 
```

希望这可以帮助！

# python - python获取屏幕宽度高度cron

> ID：15412015
> 
> 赞同：0
> 
> 时间：2013-03-14T14:27:57.710
> 
> 标签：python

我们应该使用什么工具来获得用户系统屏幕分辨率，例如像素的宽度和高度。

试过：

*   GTK
*   os.popen("xrandr -q -d :0").readlines()[0]

两者都有问题

```
 display ":0" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:41:38.650

使用任一

```
import ctypes
user32 = ctypes.windll.user32
screensize = user32.GetSystemMetrics(0), user32.GetSystemMetrics(1) 
```

或者

```
from win32api import GetSystemMetrics
print "width =", GetSystemMetrics (0)
print "height =",GetSystemMetrics (1) 
```

这些都适用于窗户

如果你想使用 wxPython 使用（跨平台）：

```
import wx

wx.App(False) # The wx.App object must be created first!    
print wx.GetDisplaySize() 
```

使用 linux 你可以使用类似的东西

```
import subprocess
output = subprocess.Popen('xrandr | grep "\*" | cut -d" " -f4',shell=True, stdout=subprocess.PIPE).communicate()[0]
print output 
```

希望这可以帮助你

# mysql - 我在我的 SQL 查询中看不到错误

> ID：15412023
> 
> 赞同：1
> 
> 时间：2013-03-14T14:28:13.287
> 
> 标签：mysql, sql, variables

你们中的任何人都可以帮助我吗？这种语法有什么问题：

```
UPDATE subscriptions 
SET type_abonnement = 'premium', 
    betalingsmethode = 'EInvoice', 
    einvoice_email = 'email@email.com', 
    bank_naam = '', 
    tenaamstelling = '', rekeningnummer = '', 
    auto_afschrijving = '', 
    voorwaarden_akkoord = 'Akkoord met de voorwaarden', 
    gemachtigd_toezegging = 'Ik ben gemachtigd', 
WHERE 
    keycolumn = '5141d398ceeb7' 
```

错误信息：

> *您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 10 行的 'WHERE keycolumn = '5141d398ceeb7'' 附近使用正确的语法*

这是带有错误消息的 SQL 的回显。我使用的代码：

```
$sql="UPDATE subscriptions SET type_abonnement = '".$typeabonnement."',
        betalingsmethode = '".$betalingsmethode."',
        einvoice_email = '".$emailfactuur."',
        bank_naam = '".$bank."',
        tenaamstelling = '".$tenaamstelling."',
        rekeningnummer = '".$rekeningnummer."',
        auto_afschrijving = '".$afschrijving."',
        voorwaarden_akkoord = '".$voorwaarden."',
        gemachtigd_toezegging = '".$gemachtigd."',
        WHERE keycolumn = '".$uniqueid."'    ";

echo $sql;

mysql_query($sql) or die(mysql_error());

mysql_close(); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T14:30:15.843

```
...gemachtigd_toezegging = 'Ik ben gemachtigd', WHERE keycolumn... 
```

你在 WHERE = 错误之前有一个逗号

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T14:30:17.593

`,`在 where 子句之前有一个逗号，这可能是造成这种情况的原因。这里：

```
... 'Ik ben gemachtigd', WHERE ... 
```

*删除逗号，它应该可以工作*

# c++ - 并行执行比串行执行花费更多时间？

> ID：15412025
> 
> 赞同：1
> 
> 时间：2013-03-14T14:28:21.507
> 
> 标签：c++, linux, tbb

我正在研究 TBB 中的任务实现，并运行了用于并行和串行计算斐波那契数列的代码。

代码是：

```
#include <iostream>
#include <list>
#include <tbb/task.h>
#include <tbb/task_group.h>
#include <stdlib.h>
#include "tbb/compat/thread"
#include "tbb/task_scheduler_init.h"
using namespace std;
using namespace tbb;

#define CutOff 2

long serialFib( long n ) {
if( n<2 )
return n;
else
return serialFib(n-1) + serialFib(n-2);
}

class FibTask: public task 
{
    public:
    const long n;
    long* const sum;

    FibTask( long n_, long* sum_ ) : n(n_), sum(sum_) {}

    task* execute() 
    {
        // cout<<"task id of thread is \t"<<this_thread::get_id()<<"FibTask(n)="<<n<<endl;  // Overrides virtual function task::execute    
                // cout<<"Task Stolen is"<<is_stolen_task()<<endl;
        if( n<CutOff ) 
        {
            *sum = serialFib(n);
        }
         else
         {
            long x, y;
            FibTask& a = *new( allocate_child() ) FibTask(n-1,&x);
            FibTask& b = *new( allocate_child() ) FibTask(n-2,&y);
            set_ref_count(3); // 3 = 2 children + 1 for wait // ref_countis used to keep track of the number of tasks spawned at                            the current level of the task graph
            spawn( b );
                      // cout<<"child id of thread is \t"<<this_thread::get_id()<<"calculating n ="<<n<<endl;
            spawn_and_wait_for_all( a ); //set tasks for execution and wait for them
            *sum = x+y;
        }
        return NULL;
    }
};

long parallelFib( long n ) 
{
    long sum;
    FibTask& a = *new(task::allocate_root()) FibTask(n,&sum);
    task::spawn_root_and_wait(a);
    return sum;
}

int main()
{     
     long i,j;
     cout<<fixed;

     cout<<"Fibonacci Series parallelly formed is "<<endl;
      tick_count t0=tick_count::now();
     for(i=0;i<50;i++)
     cout<<parallelFib(i)<<"\t";
    // cout<<"parallel execution of Fibonacci series for n=10 \t"<<parallelFib(i)<<endl;

     tick_count t1=tick_count::now();
     double t=(t1-t0).seconds();
     cout<<"Time Elapsed in Parallel Execution is  \t"<<t<<endl;
     cout<<"\n Fibonacci Series Serially formed is "<<endl;
     tick_count t3=tick_count::now();

     for(j=0;j<50;j++)
     cout<<serialFib(j)<<"\t";
     tick_count t4=tick_count::now();
     double t5=(t4-t3).seconds();
     cout<<"Time Elapsed in Serial  Execution is  \t"<<t5<<endl;
     return(0);
} 
```

与串行执行相比，并行执行需要更多时间。在此并行执行中花费了 2500 秒，而串行花费了大约 167 秒。有人可以解释一下原因吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T14:31:29.507

高架。

当您的实际任务是轻量级时，协调/通信占主导地位，您不会（自动）从并行执行中获益。这是一个很常见的问题。

而是尝试串行计算 M 个斐波那契数（成本足够高），然后并行计算它们。你应该看到收获。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T01:35:39.650

将 Cutoff 更改为 12，在（Linux 上的 -O；Windows 上的 /O2）上进行优化编译，您应该会看到显着的加速。

示例中有很多并行性。问题在于，在 Cutoff=2 的情况下，有用的并行计算的各个单元被调度开销所淹没。提高截止值应该可以解决问题。

这里是分析。分析并行性有两个重要时刻：

*   work - 计算工作的总量。
*   span - 关键路径的长度。

可用的并行度是工作/跨度。

对于 fib(n)，当 n 足够大时，功大致与 fib(n) 成正比 [是的，它描述了自己！]。跨度是调用树​​的深度——它大致与 n 成正比。所以并行度与 fib(n)/n 成正比。因此，即使 n=10，也有大量可用的并行性来保持典型的 2013 台式机嗡嗡声。

问题是 TBB 任务需要时间来创建、执行、同步和销毁。将 Cutoff 从 2 更改为 12 允许串行代码在工作量如此之小以至于调度开销会淹没它时接管。这是递归并行性中的一种常见模式：并行递归，直到您处理好可以串行完成的工作块。在其他并行框架（如 OpenMP 或 Cilk Plus）中也有同样的问题：任务有开销，尽管它们可能比 TBB 多或少。所有这些变化都是最佳阈值。

尝试改变截止。较低的值应该给你更多的并行性，但更多的调度开销。较高的值会减少并行度，但会减少调度开销。在这两者之间，您可能会发现一系列可以提供良好加速的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T14:32:54.503

如果没有更多信息，将很难说。您需要检查：您的计算机有多少个进程？是否有任何其他程序可以使用它们的处理器？如果您想以（真正的）并行运行并获得性能优势，那么操作系统必须能够分配至少 2 个空闲处理器。此外，对于小型任务，分配线程和收集其结果的开销可能会超过并行执行的好处。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T14:35:05.800

我是否认为每个任务都是正确的`result of fib(n-1) + result of fib(n-2)`- 所以本质上，你开始一个任务，然后开始另一个任务，依此类推，直到我们有大量的任务（我试图把它们都数一遍时有点迷失了 - 我认为它是 n平方）。每个此类任务的结果用于将斐波那契数相加。

首先，这里没有实际的并行执行（可能除了两个独立的递归计算）。每个任务都依赖于它的子任务的结果，并且不能真正并行地做任何事情。另一方面，您正在执行大量工作来设置每个任务。你没有看到任何好处一点也不奇怪）

现在，如果您要通过迭代计算斐波那契数 1 .. 50，并且您开始，例如，系统中每个处理器内核执行一个任务，并将其与仅使用单个循环的迭代解决方案进行比较，我敢肯定会显示出更好的改进。

# tcl - TCL 刷新忽略退格

> ID：15412026
> 
> 赞同：0
> 
> 时间：2013-03-14T14:28:23.340
> 
> 标签：tcl, user-input, flush

在 tcl 中执行刷新以捕获用户输入时，有没有办法忽略退格？

我正在执行一个函数，我在一个变量中捕获用户输入，以便稍后在另一个命令中使用。所以我执行以下功能。

```
puts -nonewline "What is the username? "
flush stdout
set usrnm [gets stdin] 
```

因此，假设使用该命令，只要我不使用退格，一切都会按照我期望的方式工作，但是如果我确实使用退格，则会添加“\x7F”作为字符。有没有办法让退格不被视为一个字符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:37:44.893

这似乎取决于您的终端；当我使用这些键序列尝试该代码时：

*   `Backspace``a``b``c``Return`
*   `a``b``c``Backspace``d``Return`

然后在这两种情况下，我都会在变量中得到一个长度为 3 的字符串（通过 测量`string length`） 。`usrnm`当终端正确处于熟模式（通常的默认值）时，这是我所期望的。由于 a`\x7f`可能不是用户名中的有效字符，我猜你可以过滤掉它：

```
set usrnm [string map {\x7f ""} $usrnm] 
```

*绝对*确定字符不存在的唯一方法是将终端置于原始模式（也可能无回显）并自己进行所有字符输入处理。相对于问题的规模而言，这是一项巨大的工作。后置过滤器对我来说似乎更明智（我仍然想知道你的终端是怎么回事）。

* * *

[编辑]：要将终端恢复到熟模式，请执行以下操作：

```
exec stty -raw <@stdin 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-14T14:45:08.943

我最近遇到了这个问题，我写了一个程序来处理 char 127 字符（退格）。如果需要进行任何其他输入清理，您也可以在此处进行，例如删除特殊字符。我有一种感觉，这可以更优雅，但它确实有效。

```
proc cleanInput {str} {
    set return ""
    for {set i 0} {$i < [string length $str]} {incr i} {
        set char [string index $str $i]
        set asc [scan $char %c]
        if {$asc == 127} { #backspace
            if {[string length $return] > 0} {
                set return [string range $return 0 [expr "[string length $return] - 2"]]
            }
        } else {
            append return $char
        }
    }
    return $return
} 
```

# haskell - Haskell 相当于 Scala 的 groupBy

> ID：15412027
> 
> 赞同：20
> 
> 时间：2013-03-14T14:28:26.907
> 
> 标签：haskell

Scala 有一个`groupBy`关于列表的函数，它接受一个从列表项中提取键的函数，并返回另一个列表，其中项是由键和产生该键的项列表组成的元组。换句话说，是这样的：

```
List(1,2,3,4,5,6,7,8,9).groupBy(_ % 2)
// List((0, List(2,4,6,8)), (1, List(1,3,5,7,9))) 
```

（实际上，它看起来在当前版本中提供了一个`Map`，但这并不重要）。C# 有一个更有用的版本，可让您同时映射值（例如，如果您的键函数只是提取元组的一部分，则非常有用）。

Haskell 有一个`groupBy`，但它有些不同 - 它根据一些比较函数对事物的运行进行分组。

在我去写之前，`groupBy`Haskell 中是否有与 Scala 相当的东西？Hoogle 没有任何我期望签名看起来像的东西（如下），但我可能只是弄错了。

```
Eq b => (a -> b) -> [a] -> [(b,[a])] 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-14T14:36:33.043

您可以很容易地自己编写函数，但如果您想要一个有效的解决方案，您需要对分类器函数的结果放置一个`Ord`or`Hashable`约束。例子：

```
import Control.Arrow ((&&&))
import Data.List
import Data.Function

myGroupBy :: (Ord b) => (a -> b) -> [a] -> [(b, [a])]
myGroupBy f = map (f . head &&& id)
                   . groupBy ((==) `on` f)
                   . sortBy (compare `on` f)

> myGroupBy (`mod` 2) [1..9]
[(0,[2,4,6,8]),(1,[1,3,5,7,9])] 
```

您还可以使用哈希映射，`Data.HashMap.Strict`而不是对预期的线性时间进行排序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T15:40:40.440

具体来说，以下应该有效：

```
scalaGroupBy f = groupBy ((==) `on` f) . sortBy (comparing f) 
```

模这不会让你得到`f`每个组的结果，但如果你真的需要它，你可以随时使用

```
map (\xs -> (f (head xs), xs)) . scalaGroupBy f 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T14:39:36.780

这不是 List 库中的函数。

你可以把它写成 sortBy 和 groupBy 的组合。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T15:29:58.407

`trace`输入a`f`表明，使用@Niklas 解决方案，`f`对于长度为 2 或更长的任何列表中的每个元素，都会评估 3 次。我冒昧地对其进行了修改，以便`f`仅将其应用于每个元素一次。然而，目前尚不清楚创建和销毁元组的成本是否低于`f`多次评估的成本（因为`f`可以是任意的）。

```
import Control.Arrow ((&&&))
import Data.List
import Data.Function

myGroupBy' :: (Ord b) => (a -> b) -> [a] -> [(b, [a])]
myGroupBy' f = map (fst . head &&& map snd)
                   . groupBy ((==) `on` fst)
                   . sortBy (compare `on` fst)
                   . map (f &&& id) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-27T10:03:40.653

此解决方案将按 (fx) 中断和分组，无论它是否已排序

```
f = (`mod` (2::Int))

list = [1,3,4,6,8,9] :: [Int]

myGroupBy :: Eq t => (b -> t) -> [b] -> [(t, [b])]

myGroupBy f (z:zs) = reverse $ foldl (g f) [(f z,[z])] zs
  where
    -- folding function                        
    g f ((tx, xs):previous) y = if (tx == ty)
                           then (tx, y:xs):previous
                           else (ty, [y]):(tx, reverse xs):previous
        where ty = f y                        

main = print $ myGroupBy f list 
```

结果：[(1,[1,3]),(0,[4,6,8]),(1,[9])]

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-10-05T08:13:31.430

由于 Scala`groupBy`返回一个不可变的`HashMap`，它不需要排序，相应的 Haskell 实现也应该返回 a `HashMap`。

```
import qualified Data.HashMap.Strict as M

scalaGroupBy :: (Eq k, Hashable k) => (v -> k) -> [v] -> M.HashMap k [v]
scalaGroupBy f l = M.fromListWith (++) [ (f a, [a]) | a <- l] 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-01-18T22:14:24.247

我们还可以`then group by`在列表理解中使用类似 SQL 的语法，这需要`TransformListComp`语言扩展。

由于 Scala`groupBy`返回 a `Map`，我们可以调用`fromDistinctAscList`将列表推导转换为 a `Map`。

```
$ stack repl --package containers 
```

```
Prelude> :set -XTransformListComp
Prelude> import Data.Map.Strict ( fromDistinctAscList, Map )
Prelude Data.Map.Strict> import GHC.Exts ( groupWith, the )
Prelude Data.Map.Strict GHC.Exts> :{
Prelude Data.Map.Strict GHC.Exts| scalaGroupBy f l =
Prelude Data.Map.Strict GHC.Exts|   fromDistinctAscList
Prelude Data.Map.Strict GHC.Exts|     [ (the key, value)
Prelude Data.Map.Strict GHC.Exts|     | value <- l
Prelude Data.Map.Strict GHC.Exts|     , let key = f value
Prelude Data.Map.Strict GHC.Exts|     , then group by key using groupWith
Prelude Data.Map.Strict GHC.Exts|     ]
Prelude Data.Map.Strict GHC.Exts| :}
Prelude Data.Map.Strict GHC.Exts> :type scalaGroupBy
scalaGroupBy :: Ord b => (t -> b) -> [t] -> Map b [t]
Prelude Data.Map.Strict GHC.Exts> scalaGroupBy (`mod` 2) [1, 2, 3, 4, 5, 6, 7, 8, 9]
fromList [(0,[2,4,6,8]),(1,[1,3,5,7,9])] 
```

与 Scala 的唯一区别`groupBy`是上面的实现返回一个排序映射而不是哈希映射。有关返回哈希映射的实现，请参阅我在[https://stackoverflow.com/a/64204797/955091](https://stackoverflow.com/a/64204797/955091)上的其他答案。

# mysql - 将数据规范化到一张表中

> ID：15412028
> 
> 赞同：0
> 
> 时间：2013-03-14T14:28:27.280
> 
> 标签：mysql, sql, cakephp

仅当步骤 id 不存在时，我才尝试将所有用户的表步骤中的行插入表（usersteps）中。

```
INSERT INTO userssteps
(status,user_id,step_id)
SELECT  
'0' , 
(SELECT DISTINCT id from users),
(SELECT DISTINCT id from steps) 
```

我在上面的 MYSQL 上收到以下错误

```
#1242 - Subquery returns more than 1 row 
```

原因：新用户注册他们应该获得所有步骤，如果我创建一个新步骤，我想在 usersteps 中创建它以供当前用户查看。

如果有更聪明的方法可以做到这一点，我很想知道，但我很难过。我也在使用 cakePHP，所以如果有一种特殊的 cakePHP 方法可以帮助我，我会更喜欢。

表结构

```
steps:
id
name

users:
id
username
password

userssteps:
id
user_id
step_id
status 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:03:54.153

看起来您正在尝试生成笛卡尔积。[http://en.wikipedia.org/wiki/Cartesian_product](http://en.wikipedia.org/wiki/Cartesian_product)。

如果用户和步骤表之间没有关系，则它们不能被连接，只能相乘。

```
INSERT INTO userssteps
(status,user_id,step_id) 
select 0,
users.id,
steps.id
from users
inner join steps 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T14:41:24.460

子查询 (SELECT DISTINCT id from users) 和 (SELECT DISTINCT id from steps) 将返回所有 id。在插入子句中，您只需要一个值（您不能有超过 1 个值）。您可以尝试通过 ID 内部连接两个表

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T14:38:03.640

试试这个方法：

```
INSERT INTO userssteps
(status,user_id,step_id) 

select 0 as status,
users.id,steps.id
from users
inner join steps
on (users.id=steps.user_id); 
```

这种方式应该有效;）

PS：现在加入是正确的。

萨卢多斯。

# asp.net - 更改数据库结构后如何正确更新实体模型

> ID：15412030
> 
> 赞同：0
> 
> 时间：2013-03-14T14:28:27.477
> 
> 标签：asp.net, entity, modal-dialog

**我已经在我的项目中使用实体模式。** 我想从数据库更新我的实体模式，因为我改变了数据库结构* ***（添加三个表）。**** 但是当我更新我的实体模式时，这个更新。但是当我运行项目时，它会给出无效的对象名称“表名”。我不会删除我的实体模式，因为我的项目会很大。这个项目在 Asp.net 上使用 VS 2010。请给我很好的解决方案，因为我是第一次更新实体模式，我只从数据库更新实体模式中的三个表，但在其他表中出错。

**请告诉我如何正确更新实体模式**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:35:12.530

您是否尝试过迁移它？以下是如何使用代码优先迁移的链接

[http://msdn.microsoft.com/en-us/data/jj591621.aspx](http://msdn.microsoft.com/en-us/data/jj591621.aspx)

# php - 迭代对象并回显值

> ID：15412034
> 
> 赞同：0
> 
> 时间：2013-03-14T14:28:32.340
> 
> 标签：php, object, loops, foreach

我尝试了很多不同的方法。我设法让第一部分工作，但第二部分让水果名称不起作用。

我有一个存储在 中的对象，该对象`$food`的`print_r()`输出如下所示：

```
Food Object
(
    [id] => 1
    [values] => Array
        (
            [name] => Myfood
        )
    [objects] => Array
        (
            [0] => Fruits Object
                (
                    [id] => 1
                    [values] => Array
                        (
                            [name] => My Fruits
                        )
                    [objects] => Array
                        (
                            [0] => FruitType Object
                                (
                                    [id] => 1
                                    [values] => Array
                                        (
                                            [name] => Orange1
                                        )
                                )
                        )
                )
        )
) 
```

此代码成功显示“Myfood”：

```
foreach ($food->values as $key => $value) {
    echo "$key => $value";
} 
```

此代码成功显示“我的水果”：

```
echo '<br/>';

foreach ($food->objects as $id => $owner) {
    foreach ($owner->values as $key => $value) {
        echo "$key => $value";
    }
} 
```

我需要显示`FruitType`对象值的第二个代码块`Orange1`，我尝试了一些方法，但效果不佳。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:15:04.943

看起来您好像遇到了所有开发人员面临的最大绊脚石……命名事物。我可能没有做得更好，因为我不是 100% 确定你的最终目标是什么，但就嵌套循环而言，你走在正确的轨道上。

```
foreach ($food->objects as $i => $obj) {
    echo "name => {$obj->values['name']}\n";
    foreach ($obj->objects as $j => $type) {
        foreach($type->values as $key => $val){
            echo "    $key => $val\n";
        }
    }
} 
```

[工作示例](http://codepad.org/io2c0nyC)

虽然查看对象的结构 - 递归迭代可能更具可读性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T14:40:27.530

你为什么不直接使用这个`get_object_vars()`功能？

在这里查看更多信息：http: [//php.net/manual/fr/function.get-object-vars.php](http://php.net/manual/fr/function.get-object-vars.php)

# c# - menu with text, graphic and separator

> ID：15412040
> 
> 赞同：1
> 
> 时间：2013-03-14T14:28:41.307
> 
> 标签：c#, asp.net

I have a c# / asp.net web site that needs a menu system.

I was looking at the intrinsic asp:menu, but it does not seem to account for these requirements....

Text that is over a graphic and a graphic to indicate a separator between each menu choices.

It also has to use a different color to denote the menu choice that is currently active.

This is a single level menu only - based on a master page design (menu is on master page), menu choices are on content pages.

Does anyone have a free tool that can accomplish this?

thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:36:48.463

您可以使用`RadMenu telerik control`

[链接： http](http://demos.telerik.com/aspnet-ajax/menu/examples/overview/defaultcs.aspx) ://demos.telerik.com/aspnet-ajax/menu/examples/overview/defaultcs.aspx

你也可以阅读这篇文章：

[.NET 的最佳免费控件](https://stackoverflow.com/questions/361271/best-free-controls-for-net)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T14:38:49.573

这一切都可以通过 .NET 内置菜单来完成。

每个 ToolStripMenuItem 都有一个 BackgroundImage 属性（可以设置背景图形）。此类有一个 MouseHover 事件，您可以捕获该事件以编程方式更改颜色。

有一个[ToolStripSeparator](http://msdn.microsoft.com/en-us/library/system.windows.forms.toolstripseparator.aspx)类可以让你添加分隔符。

有关 .NET 中菜单的更详细讨论，请参阅[这篇文章](http://www.functionx.com/vcsharp/sdimdi/vcmi.htm)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-04T15:17:24.013

这是一个老问题。如果有人再来这里。这是给他们的:)

我就是这样做的。希望它可以帮助某人...

**方法 1\. 通过使用图像和代码**

每个菜单项都有一对图像。一个用于活动，一个用于未选择

**aspx 代码**

```
 <asp:Menu
            ID="Menu1"
            Width="1300px"
            runat="server"
            Orientation="Horizontal"
            StaticEnableDefaultPopOutImage="False"
            OnMenuItemClick="Menu1_MenuItemClick" >
            <DynamicSelectedStyle CssClass="mSelected" />
            <StaticSelectedStyle CssClass="mSelected" />
            <Items>
                <asp:MenuItem ImageUrl="images/selectedt1.jpg" Text="" Value="0" ></asp:MenuItem>
                <asp:MenuItem ImageUrl="images/unselectedt2.jpg" Text="" Value="1"></asp:MenuItem>
                <asp:MenuItem ImageUrl="images/unselectedt3.jpg"  Text="" Value="2"></asp:MenuItem>
                <asp:MenuItem ImageUrl="images/unselectedt4.jpg"  Text="" Value="3"></asp:MenuItem>
  </Items>
  </asp:Menu> 
```

**css**

```
 <style type="text/css">
.mSelected {border:none;border-collapse:collapse;border-width:0px;border-color:#ffffff;}  
</style> 
```

**aspx.cs 代码**

```
 protected void Menu1_MenuItemClick(object sender, MenuEventArgs e)
        {

            int i = 0; // index of the menu item
   if (Int32.Parse(e.Item.Value) == 0)
            {
                Menu1.Items[0].ImageUrl = "images/selectedt1.jpg";
                Menu1.Items[1].ImageUrl = "images/unselectedt2.jpg";
                Menu1.Items[2].ImageUrl = "images/unselectedt3.jpg";
                Menu1.Items[3].ImageUrl = "images/unselectedt4.jpg";
            }
            if (Int32.Parse(e.Item.Value) == 1)
            {
                Menu1.Items[0].ImageUrl = "images/unselectedt1.jpg";
                Menu1.Items[1].ImageUrl = "images/selectedt2.jpg";
                Menu1.Items[2].ImageUrl = "images/unselectedt3.jpg";
                Menu1.Items[3].ImageUrl = "images/unselectedt4.jpg";
            }
            if (Int32.Parse(e.Item.Value) == 2)
            {
                Menu1.Items[0].ImageUrl = "images/unselectedt1.jpg";
                Menu1.Items[1].ImageUrl = "images/unselectedt2.jpg";
                Menu1.Items[2].ImageUrl = "images/selectedt3.jpg";
                Menu1.Items[3].ImageUrl = "images/unselectedt4.jpg";
            }
} 
```

[方法一结果截图](http://i.stack.imgur.com/MBUm1.png)

**方法 2\. 使用 javascript 和 css**

**aspx 代码**

```
<asp:Menu
            ID="Menu1"
            runat="server"
            Orientation="Horizontal"
            StaticEnableDefaultPopOutImage="False"
            OnMenuItemClick="Menu1_MenuItemClick" DynamicSelectedStyle-ForeColor="Black" StaticMenuItemStyle-Height="22px" StaticMenuItemStyle-Width="120px" StaticMenuItemStyle-ItemSpacing="2px"  BackColor="#C3C3C3" Font-Size="16px" ForeColor="Black" Font-Names="cambria" StaticMenuItemStyle-VerticalPadding="3px" StaticMenuStyle-Width="900px" StaticSelectedStyle-BackColor="White" StaticSelectedStyle-ForeColor="Black" StaticMenuItemStyle-BorderColor="White" StaticMenuItemStyle-BorderWidth="2px">
            <Items>

                <asp:MenuItem Text="Building" Value="0"></asp:MenuItem> 

                <asp:MenuItem Text="Allocation" Value="2" ></asp:MenuItem>
                <asp:MenuItem Text="Rent" Value="3" ></asp:MenuItem>

                <asp:MenuItem Text="Kahramaa" Value="4" ></asp:MenuItem>

                <asp:MenuItem Text="Owner" Value="5" ></asp:MenuItem>

                <asp:MenuItem Text="Type" Value="6" ></asp:MenuItem>

            </Items>

        </asp:Menu> 
```

**javsascript 代码**

```
 <script src="Scripts/jquery-1.7.0.js" type="text/javascript"></script> 
<script  type ="text/javascript">
         $(function () {   

             $("ul.level1 li").click(function () {             
                $(this).css("background-color:#ffffff;color:#000000;");
             });
 });
</script> 
```

[方法二结果截图](http://i.stack.imgur.com/lV1DX.png)

# android - 阻止相机保存照片

> ID：15412047
> 
> 赞同：0
> 
> 时间：2013-03-14T14:28:47.410
> 
> 标签：android, android-camera, android-gallery

我有一个通过发送意图来捕获图片的应用程序。在将控制权返回给活动后，我检索意图、提取数据、将其转换为位图并在我的应用程序中使用它。只是一些简单的代码。

拍摄的照片受到一些隐私义务的约束，我的应用程序会小心删除所有数据。问题是相机应用程序拍摄的所有照片似乎都会自动保存到内部存储中。我成功地删除了设备截取的屏幕截图并清除了所有缩略图。剩下要做的是首先阻止相机应用程序存储图片。

我看到的问题是我放弃了对应用程序的控制，因此无法以任何方式影响它。我尝试启动`ACTION_IMAGE_CAPTURE_SECURE`但失败了。我更喜欢让应用程序不存储图像的方法，而不是必须扫描图像的内部存储位置并在我尝试但失败时删除它们的方法。

注意：我已经分配了所有正确的权限。如果您需要代码，我很乐意发布它，但在其他线程中没有什么是找不到的。如果我的首选方法没有解决方案，我将如何删除位于内部存储中的所有图像`DCIM\Camera`？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T14:30:20.107

如果您需要覆盖该行为，请不要通过意图拍摄照片。使用 android.hardware.Camera API 自己获取它们。

# python - 这不是元组吗？

> ID：15412055
> 
> 赞同：6
> 
> 时间：2013-03-14T14:29:04.480
> 
> 标签：python, django, tuples

我无法弄清楚我在这里做错了什么。我的错误是：在 /admin/ ' **CategoryAdmin.fields** ' 的错误配置必须是列表或元组。

CategoryAdmin.fields 不是元组吗？我读错了吗？

**管理员.py** ..

```
class CategoryAdmin(admin.ModelAdmin):
    fields = ('title')
    list_display = ('id', 'title', 'creation_date')

class PostAdmin(admin.ModelAdmin):
    fields = ('author', 'title', 'content')
    list_display = ('id', 'title', 'creation_date')

admin.site.register(
    models.Category, 
    CategoryAdmin
)
admin.site.register(
    models.Post, 
    PostAdmin
) 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-14T14:30:03.623

不它不是。您需要添加一个逗号：

```
fields = ('title',) 
```

正是*逗号*使它成为一个元组。括号在这里实际上是可选的：

```
>>> ('title')
'title'
>>> 'title',
('title',) 
```

括号当然仍然是个好主意，带括号的元组更容易在视觉上发现，并且括号将函数调用中的元组与其他参数区分开来（`foo(('title',), 'bar')`不同于`foo('title', 'bar')`）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-14T14:30:10.493

它应该是：

```
fields = ('title', ) 
```

例子：

```
In [64]: type(('title'))
Out[64]: str

In [65]: type(('title', ))
Out[65]: tuple 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-14T14:30:11.450

用这个替换它：

```
fields = ('title', ) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-14T14:30:17.217

标题后需要逗号：

```
fields = ('title',) 
```

# c++ - 用于比较（C）字符串中的特殊字符的正则表达式

> ID：15412060
> 
> 赞同：0
> 
> 时间：2013-03-14T14:29:14.057
> 
> 标签：c++, regex, visual-c++, mfc

我有一个 MFC 项目，我需要在其中读取和比较 (xml-) 文件中的各种配置字符串。

问题是它们可能包含一个或多个特殊字符，如 STX、ETX、LF、CR ... 等等。

一个想法是使用正则表达式。我可以简单地在文件中编写完整的正则表达式模式并将它们与匹配函数进行比较。

当我通过 google 和 msdn 查找时，MFC 有两个不同的（？）正则表达式框架，但我看不出它们之间有任何区别，也看不出它们是否能解决我的问题，即处理特殊字符。

你们中有人有使用这些框架的经验吗？你能推荐一个或者你能想到这个问题的另一种解决方案吗？

提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:43:48.623

我推荐 std::regex 或 boost::regex 而非标准替代品。此外，它们还能够支持特殊字符。

# python - Numpy 非零/flatnonzero 索引顺序；布尔索引中返回元素的顺序

> ID：15412061
> 
> 赞同：4
> 
> 时间：2013-03-14T14:29:14.197
> 
> 标签：python, numpy

我想知道 numpy.nonzero / numpy.flatnonzero 返回的索引的顺序。

我在文档中找不到任何关于它的内容。它只是说：

```
A[nonzero(flag)] == A[flag] 
```

虽然在大多数情况下这已经足够了，但有些时候您需要一个排序的索引列表。是否保证返回的索引在一维的情况下进行排序，或者我需要明确地对它们进行排序？（一个类似的问题是简单地通过选择一个布尔数组（A[flag]）返回的元素的顺序，根据文档，该数组必须相同。）

示例：在 flag 中查找 True 元素之间的“间隙”：

```
flag=np.array([True,False,False,True],dtype=bool)
iflag=flatnonzero(flag)
gaps= iflag[1:] - iflag[:-1] 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:02:46.480

给定[使用 integers 进行高级（或“花式”）索引](http://docs.scipy.org/doc/numpy/reference/arrays.indexing.html#integer)的规范，这`A[nonzero(flag)] == A[flag]`也是保证在一维情况下值从低到高排序的保证。但是，在更高的维度中，结果（虽然“排序”）具有与您预期不同的结构。

简而言之，给定一个整数`ind`的一维数组和一个`x`要索引的一维数组，我们对所有有效的`i`定义如下`ind`：

```
result[i] = x[ind[i]] 
```

`result`采用 的形状`ind`，并包含 的值 由`x`指示的索引`ind`。这意味着我们可以推断如果`x[flag]`保持 的原始顺序`x`，并且如果`x[nonzero(flag)]`与 相同`x[flag]`，则`nonzero(flag)`必须始终按排序顺序生成索引。

唯一的问题是，对于多维数组，索引存储为每个被索引的维度的不同数组。所以换句话说，

```
x[array([0, 1, 2]), array([0, 0, 0])] 
```

等于

```
array([x[0, 0], x[1, 0], x[2, 0]]) 
```

这些值仍然是排序的，但每个维度都被分解成自己的数组。（因此，您可以通过广播做一些有趣的事情；但这超出了此答案的范围。）

这种推理的唯一问题是——令我惊讶的是——我找不到一个明确的声明来保证布尔索引保留数组的原始顺序。尽管如此，我从经验中可以肯定它确实如此。更一般地说，*返回*一个`x[[True, True, True]]`反向版本的`x`.

# mysql - 在 rails 3.x Model.new 或 Model.update 中哪一项操作成本高？

> ID：15412072
> 
> 赞同：-2
> 
> 时间：2013-03-14T14:29:42.210
> 
> 标签：mysql, ruby-on-rails-3, activerecord

以下哪个操作在 Rails 3.2 中更快

```
Fact.delete    
Fact.new(:balance => 233, :profit_date => Date.now, :comments => "whatever") 
```

或者

```
Fact.update(:balance => 233, :profit_date => Date.now, :comments => "whatever") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:43:20.037

如果它们有效，您包含的两个代码片段会做不同的事情：

第一段代码不起作用，因为您正在调用`.new`on `fact`，它是类的*实例*，而不是类本身。它可能没有`.new`方法，如果有，它可能不会做你想做的事。要创建一个新的 Fact 对象，您可以使用`Fact.new`. 但即使你这样做了，ActiveRecord 的`.new`方法**也不会保存记录**。因此，`fact.delete; Fact.new`只删除记录，不保存记录。如果`Fact.create()`要创建和保存记录（或`fact = Fact.new()`后跟`f.save`），请使用。

第二件也行不通，因为你想要的方法是 named `.update_attributes`，而不是`.update`。你会得到一个错误。

现在，关于哪个更快的实际问题，删除一条记录然后重新创建它或只是更新它：找到两件事中哪一个更快的最佳方法是自己对其进行基准测试。这是因为答案将取决于您的数据库是如何设置的，它有多少记录，以及任何数量的其他因素。在我看来，`DELETE`随后的`INSERT`速度会比 慢`UPDATE`，但这与实际测试它不同，而且我所做的任何测试都将基于*我的*数据库设置而不是你的。

除非您打算多次这样做，否则这两种方法都可能“足够快”。鉴于此，`.update_attributes`无论它的相对性能如何，我都会使用它，因为这样代码会更有意义并且更具可读性。如果您多次这样做，您将通过重构以某种方式进行批量更新，从而获得更大的性能提升*。*

# ruby-on-rails - Rails：从 URL 保存文件并将其保存到 Amazon S3

> ID：15412079
> 
> 赞同：5
> 
> 时间：2013-03-14T14:29:58.357
> 
> 标签：ruby-on-rails, ruby, upload, amazon-s3, download

从给定的 URL 下载文件并立即将其上传到 Amazon S3 的更直接的方法是什么（+ 将有关文件的一些信息保存到数据库中，例如名称、大小等）？

现在，我既没有使用 Paperclip，也没有使用 Carrierwave。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-14T15:33:11.667

直截了当：

```
require 'open-uri'
require 's3'

amazon = S3::Service.new(access_key_id: 'KEY', secret_access_key: 'KEY')
bucket = amazon.buckets.find('image_storage')
url = 'http://www.example.com/url'
download = open(url)

file = bucket.objects.build('image.png')
file.content = (File.read download)

if file.save
  # Make a new ActiveRecord::Base class for this
  LogFile.create(size: download.size, type: download.type, name: url)
end 
```

[https://github.com/qoobaa/s3](https://github.com/qoobaa/s3)

# php - DOMPDF 乱码输出

> ID：15412080
> 
> 赞同：0
> 
> 时间：2013-03-14T14:30:01.577
> 
> 标签：php, dompdf

一月底，我编写了一个脚本，使用 DOMPDF 库从 HTML 生成 PDF 文件。

HTML如下：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

    <head>
        <title>test</title>

        <style type="text/css">

            *{
                color:#715335;
                font-family:Helvetica, Arial, Serif;
            }

            .i{font-style: italic;}
            .b{font-weight:bold;}

            h1, h2, h3, h4, h5, h6{display:inline;}
            h1{font-size:350%;}
            h3{font-size:275%;}
            h6{font-size:150%;}
            span{font-size:125%;}
            div{background-color:#fedebd;}

        </style>
    </head>

    <body>

        <div align="center" style="margin-left:10px;margin-right:10px;padding:0px;">
            <br />
            <br />
            <br />
            <br />
            <img src="img/banner/Bronze/top.gif" />
            <br />
            <br />
            <h1 class="b" style="color:#715335;">Bronze Certificate</h1>
            <br />
            <br />
            <h3 class="i" style="color:#715335;">Ruth Candlish</h3>
            <br />
            <br />
            <h6 style="color:#715335;">This certificate has been awarded to you for earning over 250 points on the LEAP System.</h6>
            <br />
            <br />
            <img src="img/barry.gif" />
            <br /><br />
            <img src="img/badge.gif" />
            <br />
            <h6 class="i">Date Awarded: 14-03-2013</h6>
            <br />
            <br />
            <span>Awarded by: Middle School</span>
            <br />
            <br />
            <img src="img/banner/Bronze/bottom.gif" />
            <br />
            <br />
            <br />
            <br />
        </div>

    </body>
</html> 
```

我正在使用两段代码来保存和呈现 PDF 文件。一个只是一个简单的`compile`函数，它根据输入变量（即学生姓名、分数等）生成 HTML，另一个是：

```
/*
 * @param   string  $data           : <HTML> from $this->compile();
 * @param   string  $size           : "a1","a2","a3","a4","a5","a6"...
 * @param   string  $orientation    : "landscape", "portrait"
 * @param   string  $name           : The name of the student, used to prefix the name of the output file
 */
public function save($data, $size, $orientation, $name, $type){
    $dompdf = new DOMPDF();
    $dompdf->set_paper($size, $orientation);
    $dompdf->load_html($data);
    $dompdf->render();
    $data = $dompdf->output();

    $filename = 'data/'.$type.'/'.$name.' - '.date("d-m-Y").'.pdf';
    return file_put_contents($filename, $data);
} 
```

当时，这个脚本运行完美。PDF 已创建并保存，带有图像。

我今天回到它，发现两件事：

1.  图像在保存的 PDF 中不起作用，但没有 X 表示它们丢失
2.  有大量乱码文本输出，我怀疑可能是字符形式的图像

这是一些输出：

```
‰PNG

IHDR»<  û;8úPLTEÿÿÿÅ__ÀVVÉlií%š$î:+ÃaUª4&ïK6ïD2ðW>ðQ9ñaEñ\BórU½VAònQòjMñeIòˆlôƒeô‚eô€bó}_ô`óz\ô|\óxZôyYóvXôwWö–yö’tõqõoõ‹mõˆjõ†hõ…fô‚cô~^ô|[¥:ù°—ø¥Š÷Ÿƒö›~öoökø‹iõ‰gÃdDúº¢ø«ö—uÎ|\±L&úÃ¬Æo<º`*Ø–hÞ¥uÕ‘EÍ„,Åxâ¯jç¾€ß¨SÙ /îÎ‡æºUä¶3íÍfôÝÛ­øæ˜þçƒþëŒþë†óÞzÿê{üålå¿ûî›ôç•ÿî‘ùèŠþî‰þëÿì~þìzþëwõápÿësóÞXÿèYÿæSî×LìÓ2ùÙîÍûØýÛûô»úñ­úï£îã–úí”ÿò•ùìùìùìŠøëˆøë…øë„øë‚øê€øê}ÜÏnøéz÷éxøétøéoøèjþëm÷çfþêg÷æ\þë_ÿçIûåCùä<þä5þã,ïÕ#ÿâ#þâÿáíÓõ×
øÝ
ÿáüÜ    ýÝûÛÿÞüÝÿÞõêŽùí‡ÿô÷ça÷çU÷åLöã+ñÛþèøâôÞÿåþöŒÿôuÿòHþì&õãöâÿîþôVýñÿúkþø8ÿþ¡ÿÿŒÿþxÿþYÿþFÿý-ÿþÿýØé½Ðå¯Ëâ§ÆàŸÂÞ˜¿Ü”¼ÚŽ¹Ù‰±Õ|­Óu¨ÑlžÍY˜ÊN¶Ø…´×£ÏcÆ<zÀÄ/…Æ;‰ÉU’ÍPÍGËiœÒg›Òb˜Ð]–ÐZ”Îu¢Ör ÕnŸÔkÓe™Ña–Ï“´Þ‹¯Ü…¬Û€©Ù}¦Øy¤×ržÓoœÓl™Ð²Èç¤¿ã™¸à—9‘(ˆ$~"¸@Zœ.³3L¯'B¥7¾QeŸ+«'6Ä`eŸ!'™"•¿QU½LP»EJ¯48ª.2¦*-£%*›$ÂXZ·AC³<=M$æ‚tRNS@æØf,IDAThÍÚwXTwºð±D(d2E)S£ˆn¢‘&amp;EÁÜ«fe]MŒ’½H‡À‚ÛM\“Ñ{APÈf€Xh*  }Á¬fM@©áyîïô33ewó¸÷ý#É3çŒóÉ÷yÏ¯iß~îÜßÎž9súô©'âããbcböí=~ìÈîOwîð÷óòòÚ¾yËÎ]»;¾o_Ll\|ü‰§NŸ>sæì¹sç¾ßÿ%ím•5‡Ëe±Õ?û>á»ïÎ; Øw}¶cûv/¯CÛwìüt÷‘cÇ÷î‹‰‰%ègÏ~—ð··$ç2ù¦|Ó¥|º5ùÓý¸ýlÇsÿ|'fßòÙ.Ø¾²ÇŸ8u
ØÏ¼M;‡Éä±--,,yæ|æÌì[6ÿÿ°[šs¹–¶6k–/_naÊgLgÏËåÀ.eeíº •H$Ivüç…¬Ý&lt;.“¥ÅÄŠÅ'Ôìß¾
; ³@ê¶+l–¯¶15§SÚÓO¸¯³÷ï“müè#O©§ÀÁQ°á?7§nu¹ot»˜–æážþÖí‡Áe[[ü
›Õ¶|sJ{¶ÊÙ]å$sëú=·
&'›\{¤®]_ˆ<ÃNrùG“ÙoÝÎg›,aÒ9,+K8z¶9>Ú¨Ûû=ävn²þuYY‹Æ¤Á|_‰ëÈ&amp;©ëàEnóåòu‹ÞºÅ ,1Å¢_ckÊ£´'÷Û½t–ywoe¹õ…»D²adÖœÁ9Q¢9“º¼ÿv6ÇLßÈÐÀl1Ž~…-Zµr_'ëwÊÊHa»ëð†ó.ƒGDƒAÏF1°g§ÿîöFe]²iš‹,®¡ž1À/1aÒÙ,+.>Ljô»{\·½l]·§[·ƒT2Øá~¹tyî¯ëuw>™þûÚÔ)êë”õ•
j=›m¨£¿è—˜ñy¶•—2÷ôd{;;ç´L™ÓÔ¤›t§ÔÁôŒàÏÒ
"™ÌM öX´hÊã÷µ×(šÛZž>m©­TP]·þÐlÞ= G£gó(í'NˆãÓäiÐø.ÊsÓ!   ˜›àñýˆH¶w_š<Vœý{÷L›BÙô¨µµåé“'
•Í7XðYºîzÉ¥¶k¬  û!|^ÑžWÿu»¢NYÛø ½
Ò7V·QÜa²Òp®®½   ÛÜrFö7® þe;ˆ½JQWÛØð¨­õéCeðækõæÎCð¸\>~åßl¯©©º_¥¨W6AÑ?l¬¤ºÇ”g©?wî<]Æt61­ÒöïOÈÍÍÍ
ô²¬gd2´ž‘J¡õ(ðY"øT.—Cýž
Ý›UÊþ™ÚƒÏS_hTÞ¯¨®F£oy@ù´ÒÌµL=]]ý%,¶)‡dÏøj=ZÎH9!åÊ+777øsøäÛ2ffŠAm//¿¿ºªŠþQ#µÆá¸’Íá¬b3äÿ’»íWP TPuCÕß××70ÐÛÛÛÓÓÓÕÕõìÙàà3ðïžžÞ^p¥»Üîÿõ“Ü¿Ì„.Œõ;xÐ+ü°¿öµšŽò²òŠûpô5j¦±ƒQžÇeré<µ¿Ìøj¨shhèÅ‹ßž?Ÿ˜xùr|||llljjrrttddxö«Y³ç€šõjxdtrrjl|üåÄÄóß^uÎÌ.û{<àëx4PëbûÏUeŽÌP3øóˆú:ãÛwþYû¶™Øý"ÃÃC‚ÀÖ÷À°(íËŠÇåeeHôÕJEû?d?™’²ŒÒ&gt;ì£ýÕ4vÕÐW¹_¿ùB#G   ÃÎ¼…½¡¹ Â—•—W(š(‡™éË'%×îWÌþ³Oõ
ŒŽööŽ¾îéÉgöÎw¾Ï8ùæ‰J:Gª}½þçŽ
_Qÿ¸ŠúO°bsè\:.:›´ÛöNÈ]ÛßÁÃöEž.}}Ž›æ÷
opîqøÂaµMŽaöe)d{~IqI±ö/N<)ð£ ÕÕt(+«?+ë(åÖï3ø¦|&T|¦©ùÒxø(ùW’½ßþÝçˆ½oQÖ Uâ:ÇQ"qtØšåð³¯›@íö¹   „ýfaÁ­7ò
ó5;ðhòÅ¤h½0ø¼0˜’§¬yüø±òå5“ÉcY‚íÞ
¸,8æ¦Llç”û  fïv¶ëÇì¢+RéŽÍ_ÉöÍRéç¸}jÊy³¯ÏM ~ÐoÞ¸þÓ¢[š¹““/^LÑG†Sñ¯-&ƒÁ²µ±Y³:%X
êãÕ6<óPü—_Cƒ$dW¹ÛwöOwnÙ.ñ’Ú¼c'aï]ä1€ô4Döü’’‚| ÿ)¯DóçC¯%Ç‚è££„Â”¾”A·²]a‹ÄŽþ|ü±¥ùR|ùRJÆ²Î¨ÝYE¶ï8ôÀB’l_çƒÚUCÿ›q    ÿ‘‚¢"€Ïm£e
Jºz59>6qºØÛ444´7h]á3¹`£daâm`<Ð[˜›[A×} †Çìîª—ãã¨=õÐpïè&éÄ>Û}ú{ç²\Ò£š»´¨Ž¾@«ã…þ i¢Â)SoR**ŠJ¸=Ï6ç²¬¬,¡³HoCDomn
ßïî‰‰ñ±q0Î öY=¯ûlÈîŽÚŸCíîCØKïÜ¾]TXœŸG1Ôøú‡PÈkšuíÚÚÚZ[[Û•jc
ŸÎa¿g
ôšÑ¯^Í[
ÿMÆ5Ððˆ=¹Ó>m\åí¦šBsïÃrïqHêê‰uúÅµ¿PmËÝOüLþí{wJoCÑkõÌkª¹¹®¡­åáÃ§`×ôäÉßÿþôAU}-~Õò—Ãf³¬µ£ÿØv)¼*ƒg§°Ý9ÛÝCîá$KrÚbowutõƒúýŠ§ËÙF7yœ“Ø±«–edfÕ›ÅwïÝ½SZZT’7sºRQÛÞ
Uì
ô­•ÄÜÊaðt gY[kD¿fõÆð=pÓ v±8N.ƒ6¬ˆ,ßáqf·Ht|¯ìWÅÙ¨´LŠÉ‘_Pz÷îÛ%±…
¡E°0Tctoª¬ihoo‡úÂ#úbÇÍ¤3Mïs9µèW }c½ž`¿É¸üN'j—;'eîE^@§íÛ!;Ø8eÎÈãâQ{¿ê+òè*/¯zXµäÂÈˆðÐàPad¤Ú¼
vÙ`€Úý£ªFÌÎ51[Ì¤Ž~¹%r´šŒ4¸}Ê[†¼øØrÚ7mÆì]³   {§]nÊ%
å­›ÚýÀÀØ×÷@àaÒXÓ¨¨­­ônüf,x.}‰™‰Éb=¦_nn rÿ{HEaOõstpü“d‹¶ý9˜˜R´»C«¢Â¼BuáŒ"–’Êºæfe­VôOUµcv33ýûPôxã@ø5|Ä~)%Ç¾ó7¼g^îÉ„íRçƒÓì¤Z=óRõnnÆ7jÊ¼‚âââ’’bõ¦‰
õó‚^ZáúDòJø<‹þŒú'-•hÓpè†Kàè™&lt;:=‹4àX.F—d)9—:‡P{\Zú²LêÐ–ï=Ô¾73-Ë]õ‰ú“ZPR’ŸêV^IañqxD€€?ŠGô^‰^èÅææ*E=¤oj"Gÿôa½³@z´ëÙøLìhîPðë;1{nôƒ  iNê…O5ì*»œŒÿQ£ç…Øõë?ºQH5¡AAï‡ã}}…èÊ ¥¾ìóHÑ·#Ñ?li®ÅìFF††@FÏe]¿Â
³ÓR~¼:¤š@í1ÓØáw”}â—m9äØóón‚ºqãÌÇÇIÿÈ°ÐOŠÞ×íø¶fEuÀÃú¦Æâ™%Ùa=½)“žYö{¨~…³ŸLÉqÿõùLí¿¬ÏI¹FŠ½ôË­[°¿o‚…Âp ?Fë}F"[›`ƒ]G_§Ä£oki%ìÆ5¢ÇºÞÖ·ÓR.çØuÂs“Xž–)ƒS/`v©ôÂ‘H–™™–ÏMÝ/ü1ƒDÏÃ:ªG¢¿Uˆ\#z„îÁ¤èŒôGí•`
ð•h×#Ïlka_¨oðXô ëyØ"Á‚ÅÀí>)9é/:Ó}|â¼½½÷ìIüâ‹­ç=°ýÏ¡‘‡FïÙs16Î¬    Ž!íÅ%‹þ§ë¨=("
Â‡…]À+Ò±++¡£
XOŽ¾­­·ëë-\hL=À“ì´«g³Ý;ûŸ÷CGÈ)rÆb[í±_œsÎ’Ôü‚ÂÂ’bRô×¯cöÃQ‘Xô˜Þ+Í]YUã‘g¶© êúöf’]_àµ£·b“ì´«§³;ûAML øô|†°÷ôº}ÎirÇ€‘½°Â“¢/(@í‰‡!==hœƒ~XîUåÑ7v½žˆž.YÉN»œžm¯zãÙRßTvz†º½¨àa==Éx‹&gt;íz,÷Ÿ«Ë*Èx4ú0;›¾@GO‰ÞoSÐ8¯n?   ðvª×ÛG=û²ú©L^Øu’£GíIþ0ÚõÈ€C¶—#ÉãÑ××Ac=Öïì÷è,X §½    =WÍNó¹,Û©^géLÎ>­±v°ëP‹³G^„ð zâ™õ@ímÀæÑ£3Un§ëèÂxu=òÌréjvšOºXÚflûì‘ÞQqö©du:-/¿´ô¶zô„:@¢G»> ëwØN½²®ùƒy::Ñ›™ðùtõÜi´ät±ÜYÕ7]î½‰ÅéštÈ~ÒÑç£ö€ÈXŸHDŒæNCìd=}3jg®Ò›§««C=i­áðNO“»wwÃG©šö®'¹8Ý‡¦Y·òï;=4\â¹ÇAxrôà™ÅíUe$<1\Ö×¡/Z¹«ŒæêBxµè®ç˜hAââceÞSÝãZöÁ®áòØto­o€ÜïÜEõDôhîqÒ“¢ÇÁÊº²²2Šèë›Ñƒ+k‰^½qù\ž¶„#“9u÷iØ»™ò˜x
:j'G_ŒÎMáqÉqÑG„‡£ßkz\¡ŽG¢¯Vâ/û–®5žëu°ÆAñF†lSà3Ež‹ú;t†í)ËŒ‰¥ºàKïÝÅõpôØMPôÕx<úh4zü[ÙTV¦ýýJ%~Êaa¾VàçiDodlÌã0µpýußqQ–Ë¢¾ÞÑ°ž™5k¸kŽXŠíÛC};íV!°£z8úló’|$DõG…‘ø÷jWiá+ª›Hïœ>\9ÇãÑë/\ÌZj;
†–ðR—Ù½½£³‡G,#GOw3t(FàKo—’6aaW¯%“¢OŠ"¿>P´W—©éËËï75“ÿJ„Á*K¹êÑë-Ðg®2Õ Õêð‘R©«`´wDàš*½räØkî¥åü½{ˆþÎ"ÒžÕ/<,ùÚÕääd”¦vžªh¨/WÓWwh¼Aà¸Ö@wî\Ø<·z†œUÄ_) ®]Ÿ¥J$›7H¤>ßµõõ÷æçÝ½‡d_Z¤vF&£èxÔž”®þEåãŽªŠr¬î×uÔ5ªß@c0W®43ÖC†xý…FK¸,®ÖÐ®]Á;R¡s±Ô-o¼ô<Ødƒá:]Ò8¤    öãz8øGhXæ÷¾ã1R5Jí?ÙŠÇüƒ¥åJ¤¬­þÀÓœP§©ÿòò:ô§ÝI£ÝÌƒ
(®üðC¨à (¿×Þ„õ[í=°êå¢ïÊ8VøÇÿ ©/&ÿIEND®B`‚ 
```

我觉得奇怪的是“PNG”也被标记在输出的顶部 - 所使用的文件都不是PNG文件，尽管它们可能曾经在Photoshop中转换过。

如果我从它们的目录中删除图像文件，乱码输出就会消失 - 大概是因为 DOMPDF 没有呈现它们。PDF 仍在创建中，但这次图像以小“X”标记存在，表示它们丢失了。

如果我`echo`之前`$dompdf->render()`和`echo`之后，`echo`'d 内容出现在乱码输出之前和之后 - 所以（再次，大概）这就是问题功能。

我认为自 1 月 30 日以来唯一改变的是我们的网络管理员将 PHP 从版本 5.2.9 升级到了 5.3。

我们使用 IIS 来托管这个网络服务器。

我试图用谷歌搜索这些问题，但似乎没有人遇到同样的问题。有没有人有什么建议？

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T11:27:02.820

升级到最新版本的 DOMPDF，现在我遇到了一个完全不同的问题。

# java - 为什么会在jsf文件中显示空指针异常？

> ID：15412087
> 
> 赞同：1
> 
> 时间：2013-03-14T14:30:13.147
> 
> 标签：java, jsf

这是我的 jsf 文件

```
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core">
    <h:head>

    </h:head>
    <h:body>
        <f:view>
            <h:form>
                <h1><h:outputText value="List"/></h1>
                <h:dataTable value="#{manageBean.tours}" var="item">
                    <h:column>
                        <f:facet name="header">
                            <h:outputText value="Tourid"/>
                        </f:facet>
                        <h:outputText value="#{item.tourid}"/>
                    </h:column>
                 </h:dataTable>
            </h:form>
        </f:view>
    </h:body>
</html> 
```

这是我的管理 bean

```
public class manageBean {
    private Tourpackage tour;
    private List<Tourpackage> tours;
    private sessionBean session;

    public manageBean() {
    }

    public List<Tourpackage> getTours() {
        return session.retrieveTour();
    }

    public void setTours(List<Tourpackage> tours) {
        this.tours = tours;
    }  
} 
```

这是我的会话 bean

```
public class sessionBean {
    private EntityManager em;

    public List<Tourpackage> retrieveTour(){
        Query query = em.createNamedQuery("Tourpackage.findAll");
        return query.getResultList();
    }
} 
```

这是我的实体类（不包括变量和方法）

```
@NamedQueries({
@NamedQuery(name = "Reservation.findAll", query = "SELECT r FROM Reservation r"),
@NamedQuery(name = "Reservation.findByReservationid", query = "SELECT r FROM Reservation r WHERE r.reservationid = :reservationid"),
@NamedQuery(name = "Reservation.findByReservationdate", query = "SELECT r FROM Reservation r WHERE r.reservationdate = :reservationdate")}) 
```

公共类预订实现可序列化{

Any1这里的JSF专家？？？每次我通过netbeans运行jsf文件时都会出现空指针异常，我使用的数据库在netbeans中。请原谅我糟糕的格式。

堆栈跟踪

```
java.lang.NullPointerException
at manageBean.getTours(manageBean.java:23)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at javax.el.BeanELResolver.getValue(BeanELResolver.java:363)
at com.sun.faces.el.DemuxCompositeELResolver._getValue(DemuxCompositeELResolver.java:176)
at com.sun.faces.el.DemuxCompositeELResolver.getValue(DemuxCompositeELResolver.java:203)
at com.sun.el.parser.AstValue.getValue(AstValue.java:138)
at com.sun.el.parser.AstValue.getValue(AstValue.java:183)
at com.sun.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:224)
at com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:109)
at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:194)
at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:182)
at javax.faces.component.UIData.getValue(UIData.java:731)
at javax.faces.component.UIData.getDataModel(UIData.java:1798)
at javax.faces.component.UIData.setRowIndexWithoutRowStatePreserved(UIData.java:484)
at javax.faces.component.UIData.setRowIndex(UIData.java:473)
at com.sun.faces.renderkit.html_basic.TableRenderer.encodeBegin(TableRenderer.java:81)
at javax.faces.component.UIComponentBase.encodeBegin(UIComponentBase.java:820)
at javax.faces.component.UIData.encodeBegin(UIData.java:1118)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1755)
at javax.faces.render.Renderer.encodeChildren(Renderer.java:168)
at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1757)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:402)
at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131)
at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
at java.lang.Thread.run(Thread.java:722) 
```

* * *

应用建议的解决方案后，我遇到了新问题：

```
com.sun.faces.mgbean.ManagedBeanCreationException: An error occurred performing resource injection on managed bean manage
at com.sun.faces.mgbean.BeanBuilder.injectResources(BeanBuilder.java:211)
at com.sun.faces.mgbean.BeanBuilder.build(BeanBuilder.java:103)
at com.sun.faces.mgbean.BeanManager.createAndPush(BeanManager.java:409)
at com.sun.faces.mgbean.BeanManager.create(BeanManager.java:269)
at com.sun.faces.el.ManagedBeanELResolver.resolveBean(ManagedBeanELResolver.java:244)
at com.sun.faces.el.ManagedBeanELResolver.getValue(ManagedBeanELResolver.java:116)
at com.sun.faces.el.DemuxCompositeELResolver._getValue(DemuxCompositeELResolver.java:176)
at com.sun.faces.el.DemuxCompositeELResolver.getValue(DemuxCompositeELResolver.java:203)
at com.sun.el.parser.AstIdentifier.getValue(AstIdentifier.java:103)
at com.sun.el.parser.AstValue.getValue(AstValue.java:179)
at com.sun.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:224)
at com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:109)
at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:194)
at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:182)
at javax.faces.component.UIData.getValue(UIData.java:731)
at javax.faces.component.UIData.getDataModel(UIData.java:1798)
at javax.faces.component.UIData.setRowIndexWithoutRowStatePreserved(UIData.java:484)
at javax.faces.component.UIData.setRowIndex(UIData.java:473)
at com.sun.faces.renderkit.html_basic.TableRenderer.encodeBegin(TableRenderer.java:81)
at javax.faces.component.UIComponentBase.encodeBegin(UIComponentBase.java:820)
at javax.faces.component.UIData.encodeBegin(UIData.java:1118)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1755)
at javax.faces.render.Renderer.encodeChildren(Renderer.java:168)
at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1757)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:402)
at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131)
at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
at java.lang.Thread.run(Thread.java:722)

Caused by: com.sun.faces.spi.InjectionProviderException: com.sun.enterprise.container.common.spi.util.InjectionException: Exception attempting to inject Remote ejb-ref name=manage/tour,Remote 3.x interface =entities.Tourpackage,ejb-link=null,lookup=,mappedName=,jndi-name=entities.Tourpackage,refType=Session into class manage: Lookup failed for 'java:comp/env/manage/tour' in SerialContext[myEnv={java.naming.factory.initial=com.sun.enterprise.naming.impl.SerialInitContextFactory, java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl, java.naming.factory.url.pkgs=com.sun.enterprise.naming}
at org.glassfish.faces.integration.GlassFishInjectionProvider.inject(GlassFishInjectionProvider.java:194)
at com.sun.faces.mgbean.BeanBuilder.injectResources(BeanBuilder.java:205)
... 56 more

Caused by: com.sun.enterprise.container.common.spi.util.InjectionException: Exception attempting to inject Remote ejb-ref name=manage/tour,Remote 3.x interface =entities.Tourpackage,ejb-link=null,lookup=,mappedName=,jndi-name=entities.Tourpackage,refType=Session into class manage: Lookup failed for 'java:comp/env/manage/tour' in SerialContext[myEnv={java.naming.factory.initial=com.sun.enterprise.naming.impl.SerialInitContextFactory, java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl, java.naming.factory.url.pkgs=com.sun.enterprise.naming}
at com.sun.enterprise.container.common.impl.util.InjectionManagerImpl._inject(InjectionManagerImpl.java:703)
at com.sun.enterprise.container.common.impl.util.InjectionManagerImpl.inject(InjectionManagerImpl.java:470)
at com.sun.enterprise.container.common.impl.util.InjectionManagerImpl.injectInstance(InjectionManagerImpl.java:171)
at org.glassfish.faces.integration.GlassFishInjectionProvider.inject(GlassFishInjectionProvider.java:184)
... 57 more

Caused by: javax.naming.NamingException: Lookup failed for 'java:comp/env/manage/tour' in SerialContext[myEnv={java.naming.factory.initial=com.sun.enterprise.naming.impl.SerialInitContextFactory, java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl, java.naming.factory.url.pkgs=com.sun.enterprise.naming} [Root exception is javax.naming.NamingException: Exception resolving Ejb for 'Remote ejb-ref name=manage/tour,Remote 3.x interface =entities.Tourpackage,ejb-link=null,lookup=,mappedName=,jndi-name=entities.Tourpackage,refType=Session' .  Actual (possibly internal) Remote JNDI name used for lookup is 'entities.Tourpackage#entities.Tourpackage' [Root exception is javax.naming.NamingException: Lookup failed for 'entities.Tourpackage#entities.Tourpackage' in SerialContext[myEnv={java.naming.factory.initial=com.sun.enterprise.naming.impl.SerialInitContextFactory, java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl, java.naming.factory.url.pkgs=com.sun.enterprise.naming} [Root exception is javax.naming.NameNotFoundException: entities.Tourpackage#entities.Tourpackage not found]]]
at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:518)
at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:455)
at javax.naming.InitialContext.lookup(InitialContext.java:411)
at javax.naming.InitialContext.lookup(InitialContext.java:411)
at com.sun.enterprise.container.common.impl.util.InjectionManagerImpl._inject(InjectionManagerImpl.java:599)
... 60 more

Caused by: javax.naming.NamingException: Exception resolving Ejb for 'Remote ejb-ref name=manage/tour,Remote 3.x interface =entities.Tourpackage,ejb-link=null,lookup=,mappedName=,jndi-name=entities.Tourpackage,refType=Session' .  Actual (possibly internal) Remote JNDI name used for lookup is 'entities.Tourpackage#entities.Tourpackage' [Root exception is javax.naming.NamingException: Lookup failed for 'entities.Tourpackage#entities.Tourpackage' in SerialContext[myEnv={java.naming.factory.initial=com.sun.enterprise.naming.impl.SerialInitContextFactory, java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl, java.naming.factory.url.pkgs=com.sun.enterprise.naming} [Root exception is javax.naming.NameNotFoundException: entities.Tourpackage#entities.Tourpackage not found]]
at com.sun.ejb.EjbNamingReferenceManagerImpl.resolveEjbReference(EjbNamingReferenceManagerImpl.java:191)
at com.sun.enterprise.container.common.impl.ComponentEnvManagerImpl$EjbReferenceProxy.create(ComponentEnvManagerImpl.java:1109)
at com.sun.enterprise.naming.impl.GlassfishNamingManagerImpl.lookup(GlassfishNamingManagerImpl.java:776)
at com.sun.enterprise.naming.impl.GlassfishNamingManagerImpl.lookup(GlassfishNamingManagerImpl.java:744)
at com.sun.enterprise.naming.impl.JavaURLContext.lookup(JavaURLContext.java:169)
at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:498)
... 64 more

Caused by: javax.naming.NamingException: Lookup failed for 'entities.Tourpackage#entities.Tourpackage' in SerialContext[myEnv={java.naming.factory.initial=com.sun.enterprise.naming.impl.SerialInitContextFactory, java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl, java.naming.factory.url.pkgs=com.sun.enterprise.naming} [Root exception is javax.naming.NameNotFoundException: entities.Tourpackage#entities.Tourpackage not found]
at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:518)
at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:455)
at javax.naming.InitialContext.lookup(InitialContext.java:411)
at javax.naming.InitialContext.lookup(InitialContext.java:411)
at com.sun.ejb.EjbNamingReferenceManagerImpl.resolveEjbReference(EjbNamingReferenceManagerImpl.java:186)
... 69 more

Caused by: javax.naming.NameNotFoundException: entities.Tourpackage#entities.Tourpackage not found
at com.sun.enterprise.naming.impl.TransientContext.doLookup(TransientContext.java:248)
at com.sun.enterprise.naming.impl.TransientContext.lookup(TransientContext.java:215)
at com.sun.enterprise.naming.impl.SerialContextProviderImpl.lookup(SerialContextProviderImpl.java:77)
at com.sun.enterprise.naming.impl.LocalSerialContextProviderImpl.lookup(LocalSerialContextProviderImpl.java:119)
at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:505)
... 73 more 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T14:34:57.493

`sessionBean session`在您的托管 bean 中永远不会初始化。如果您在 Java EE 6 环境中，请将其转换为 EJB：

```
@Stateless
public class sessionBean {

    @PersistenceContext(unitName = "yourPersistenceContextFileName")
private EntityManager em;
    //...
} 
```

然后只需在托管 bean 中将其称为 EJB。此外，您应该在方法中检索数据`@PostConstruct`，而不是在 getter 中，因为他的 getter 方法可以被多次调用]（[为什么 JSF 会多次调用 getter](https://stackoverflow.com/q/2090033/1065197)）：

```
@ManagedBean
@ViewScoped
public class manageBean {

    @EJB
    private sessionBean session;
    private List<Tourpackage> tours;

    @PostConstruct
    public void init() {
        tours = session.retrieveTour();
    }

    //plain getters/setters
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T14:31:45.953

用注释你的类`@ManagedBean`或将它们添加到`faces-config.xml`. 如果您使用的是 cdi，请使用`@Named`. 否则你无法访问你的 via el 表达式。

**无关**

按照惯例，Java 类型名称通常以大写字母开头：

管理豆 -> 管理豆

会话Bean -> 会话Bean

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T14:34:40.180

您的代码中没有注释！您只是忘记将它们包含在您的帖子中还是代码中缺少它们？至少您必须将 manageBean 注释为@ManagedBean（或@Named @Statefull）并将@Inject 注释添加到您注入的对象（EntityManager 和 sessionBean），否则容器将永远不会处理它们的生命周期（即为您实例化它们，这样您就不会' t 获得 NPE）

# c# - ButtonPressed 与 ButtonClicked

> ID：15412088
> 
> 赞同：0
> 
> 时间：2013-03-14T14:30:15.063
> 
> 标签：c#, events, user-interface

**关于ButtonPressed**和**ButtonClicked**是否有任何事件命名约定？我应该什么时候使用它们中的每一个？或者它们应该被视为同义词？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T14:32:28.497

它们不是同义词。

ButtonPressed 表示按钮已被按下但未释放，允许您在按钮按下但释放之前捕获事件。

ButtonClicked 表示按钮已被按下和释放

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T14:32:41.477

ButtonClicked 在按下鼠标按钮并随后在对象上释放时触发。ButtonPressed 在对象上按下鼠标按钮的第二次触发。

您可以通过在对象上按下鼠标来“取消”您的“点击触发”，但在释放鼠标按钮之前将其移开

看 ：

[这个 DevExpress 主题](http://documentation.devexpress.com/#windowsforms/DevExpressXtraEditorsRepositoryRepositoryItemButtonEdit_ButtonPressedtopic)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T14:32:54.187

ButtonPressed 更常见于当您将鼠标按住按钮时，或者当它是一个可以打开或关闭的切换按钮时，而 ButtonClicked 是当您单击并释放鼠标时。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T14:33:36.093

我倾向于使用“按下” - 请记住，您可以通过使用箭头键突出显示按钮并按 Enter 来按下按钮。如果您希望在单击时发生特定的事情，请使用`ButtonClicked`，否则使用`ButtonPressed`。还需要考虑按下与按下并释放的区别。

# xml - 将customUI插入excel文档

> ID：15412094
> 
> 赞同：0
> 
> 时间：2013-03-14T14:30:26.597
> 
> 标签：xml

基本上，大约 18 个月前，我使用 XML 标记将自定义 ui 添加到工作簿中。它包括：

```
<customUI xmlns="http://schemas.microsoft.com/office/2009/07/customui">
 <backstage> 
        <button idMso="ApplicationOptionsDialog" visible="false"/>
        <button idMso="FileSave" visible="false"/>
        <button idMso="FileSaveAs" visible="false"/>
        <tab idMso="TabShare" visible="false"/>
 </backstage>
</customUI> 
```

我这辈子都不记得我是怎么做到的，我需要把它添加到一个新的工作簿中，我只是不记得是怎么做到的。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-24T10:43:28.663

您可以使用 openxmldeveloper.org 中的“Office 自定义 UI 编辑器”，并按照[http://gregmaxey.mvps.org/word_tip_pages/customize_ribbon_main.html](http://gregmaxey.mvps.org/word_tip_pages/customize_ribbon_main.html)中提到的步骤进行操作， 希望对您有所帮助。

# struts2 - struts 2 包是否必须扩展“struts-default”？

> ID：15412101
> 
> 赞同：2
> 
> 时间：2013-03-14T14:30:37.777
> 
> 标签：struts2, struts-config

我在`struts.xml`. 但是tomcat6自从我添加后就无法启动了。里面的配置`struts.xml`是：

```
<package name="pkg2" namespace="/0314">

    <interceptors>
        <interceptor name="myInterceptor" class="com.chailie.test4.MyInterceptor"/>
        <interceptor-stack name="myInterceptorStack">
            <interceptor-ref name="myInterceptor"/>
        </interceptor-stack>
    </interceptors>
    <global-results>  
        <result name="success">/success.jsp</result>  
    </global-results>   
    <action name="test1" class="com.chailie.test4.HelloWorld1">         
        <result name="success">/success.jsp</result>
        <interceptor-ref name="myInterceptorStack"/>
    </action>
</package> 
```

当我启动 tomcat6 时，异常的堆栈跟踪是：

```
INFO: Choosing bean (struts) for interface org.apache.struts2.dispatcher.StaticContentLoader
三月 14, 2013 10:07:52 下午 com.opensymphony.xwork2.util.logging.jdk.JdkLogger info
INFO: Choosing bean (struts) for interface com.opensymphony.xwork2.UnknownHandlerManager
三月 14, 2013 10:07:53 下午 com.opensymphony.xwork2.util.logging.jdk.JdkLogger error
SEVERE: Dispatcher initialization failed
Unable to load configuration. - result - file:/C:/tomcat6/webapps/sstart/WEB-INF/classes/struts.xml:57:27
    at com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:69)
    at org.apache.struts2.dispatcher.Dispatcher.init_PreloadConfiguration(Dispatcher.java:390)
    at org.apache.struts2.dispatcher.Dispatcher.init(Dispatcher.java:436)
    at org.apache.struts2.dispatcher.ng.InitOperations.initDispatcher(InitOperations.java:69)
    at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.init(StrutsPrepareAndExecuteFilter.java:51)
    at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:295)
    at org.apache.catalina.core.ApplicationFilterConfig.setFilterDef(ApplicationFilterConfig.java:422)
    at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:115)
    at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4072)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4726)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:799)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:779)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:601)
    at org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:1079)
    at org.apache.catalina.startup.HostConfig.deployDirectories(HostConfig.java:1002)
    at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:506)
    at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1317)
    at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:324)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:142)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1065)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
    at org.apache.catalina.core.StandardService.start(StandardService.java:525)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
Caused by: No result type specified for result named 'success', perhaps the parent package does not specify the result type? - result - file:/C:/tomcat6/webapps/sstart/WEB-INF/classes/struts.xml:57:27
    at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.buildResults(XmlConfigurationProvider.java:636)
    at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.loadGlobalResults(XmlConfigurationProvider.java:807)
    at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.addPackage(XmlConfigurationProvider.java:477)
    at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.loadPackages(XmlConfigurationProvider.java:278)
    at org.apache.struts2.config.StrutsXmlConfigurationProvider.loadPackages(StrutsXmlConfigurationProvider.java:112)
    at com.opensymphony.xwork2.config.impl.DefaultConfiguration.reloadContainer(DefaultConfiguration.java:204)
    at com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:66)
    ... 31 more

三月 14, 2013 10:07:53 下午 org.apache.catalina.core.StandardContext start
SEVERE: Error filterStart
三月 14, 2013 10:07:53 下午 org.apache.catalina.core.StandardContext start
SEVERE: Context [/sstart] startup failed due to previous errors
三月 14, 2013 10:07:53 下午 org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap 
```

一旦我在包中添加了 extends='struts-default' 作为

```
<package name="pkg2" namespace="/0314" extends='struts-default'>

<interceptors>
    <interceptor name="myInterceptor" class="com.chailie.test4.MyInterceptor"/>
    <interceptor-stack name="myInterceptorStack">
        <interceptor-ref name="myInterceptor"/>
    </interceptor-stack>
</interceptors>
<global-results>  
    <result name="success">/success.jsp</result>  
</global-results>   
<action name="test1" class="com.chailie.test4.HelloWorld1">         
    <result name="success">/success.jsp</result>
    <interceptor-ref name="myInterceptorStack"/>
</action>
</package> 
```

tomcat6 可以正常启动。

所以我的问题是当我在 struts.xml 中添加一个“包”时。包是否必须从“struts-default”包扩展？我用谷歌搜索了这个，但“扩展”属性只是包元素的一个选项属性。那我为什么会有这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T14:54:15.640

检查原始的[strus-default.xml](http://struts.apache.org/release/2.2.x/docs/struts-defaultxml.html)，您会看到它定义了所有默认拦截器和结果，您没有在您的中定义结果，这就是最有可能失败的原因。我现在无法测试它，但我假设如果您添加调度程序结果的定义和默认类引用，那么它应该在不扩展它的情况下启动。

```
 <result-types>
     <result-type name="dispatcher" class="org.apache.struts2.dispatcher.ServletDispatcherResult" default="true"/>
 </result-types>

 <default-class-ref class="com.opensymphony.xwork2.ActionSupport" /> 
```

# html - 单击此 div 时 css 隐藏附近的 div（用于悬停）

> ID：15412102
> 
> 赞同：0
> 
> 时间：2013-03-14T14:30:42.840
> 
> 标签：html, css

我的代码：

```
<div>
<div class='top-class'>
Header Name
</div>
<div class='body-class'>
This is body a
</div>
</div>

<div>
<div class='top-class'>
Another Header Name
</div>
<div class='body-class'>
Another body
</div>
</div> 
```

我试过的CSS代码：

```
.top-class:hover + .body-class { display: block; } /* This is working */ 
```

但是，我希望在单击标题时发生这种情况。所以，我尝试了这个：

```
.top-class:visited + .body-class { display: block; } /* DIDNT work */ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:47:48.380

伪类“活跃”似乎可以完成这项工作

```
.top-class:active + .body-class { display: block; background-color: red; } 
```

你可以查看[我的 jsfiddle](http://jsfiddle.net/C7FFD/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T14:55:54.603

你可以`tabindex`在你的第一个 div 中使用它，然后它可以有焦点事件。

```
<div class='top-class' tabindex=1>Header Name</div> 
```

然后在css中测试`focus`伪类

```
.top-class:focus + .body-class { display: block; background-color: red; } 
```

[检查这个jsfiddle](http://jsfiddle.net/DoubleYo/HWUy2/2/)

# c# - 替换斜线和引号

> ID：15412104
> 
> 赞同：-7
> 
> 时间：2013-03-14T14:30:46.140
> 
> 标签：c#, string, replace

如何替换字符串内部？

```
 first string is = "1.jpg"
    with
    second string is \"cid:image1\" 
```

好吧，我没有把它放在字符串中因为有问题，你可以命名它`string1`并`string2`用`string3`.

更新

put in `string1`value `"1.jpg"`, and in `string2` `\"cid:image1"`, 并替换`string1`为`string2`获取`string1`值`\"cid:image1"`

`\`问题是写不出来怎么替换？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T14:32:35.843

```
var string1 = @"""1.jpg""";
var string2 = @"\""cid:image1\""";
string1 = string2; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T14:32:10.707

你可以使用`string.Replace`方法

链接：http : [//msdn.microsoft.com/fr-fr/library/vstudio/fk49wtc1.aspx](http://msdn.microsoft.com/fr-fr/library/vstudio/fk49wtc1.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T14:39:08.840

根据更新，我会试一试：

```
var string1 = @"""1.jpg""";
var string2 = @"\""cid:image1""";
string1 = string2; 
```

*   输入 string1 值“1.jpg”检查！
*   并在 string2 \"cid:image1" 中检查！
*   并将 string1 替换为 string2 以获取 string1 值 \"cid:image1" CHECK！

按规格！`string1`但是，无论如何，当您想要覆盖整个事物时，为什么要放入特定的东西仍然没有任何意义。

# python - Linux - 如何将位于多个子目录中的相同扩展名的文件直接复制到一个文件中？

> ID：15412107
> 
> 赞同：4
> 
> 时间：2013-03-14T14:30:58.260
> 
> 标签：python, linux, bash, csh

我有一个包含许多子目录的文件夹，每个子目录中都有一个`*.nr`文件。有 1000 个子目录，每个子目录至少包含一个`*.nr`文件。有没有一种快速的方法可以将所有这些`*.nr`文件复制到一个目录中？

我可以编写一个快速`python`脚本来遍历文件，但是如果有一种基于命令行的快速方法来执行此操作，这似乎有点过头了。

我一直在谷歌搜索，但我不确定我应该搜索哪些确切的术语。

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-14T14:34:52.743

就像是

```
find /path/to/src -name "*.nr" -exec cp \{\} /path/to/dest \; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-14T15:13:35.977

如果您在使用 GNU 的系统上`cp`，这样做会更快：

`find /path/to/src -name "*.nr" -print0 | xargs -0 cp -t /path/to/dest`

* * *

复制我的目录下的所有`.c`文件`src`：

```
time find ~/src -name "*.c" -exec cp \{\} ~/src/Cfound/ \;
. . .
real    0m1.838s
user    0m9.530s
sys     0m1.110s

time find . -name "*.c" -print0 | xargs -0 cp -t ./Cfound/
. . .
real    0m0.057s
user    0m0.010s
sys     0m0.060s 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T05:20:24.610

bash 中最简单的方法：

```
for F in */*.nr; do cp $F otherdir/ ; done 
```

# java - 从 SQLite 数据库填充 Android Listview

> ID：15412108
> 
> 赞同：0
> 
> 时间：2013-03-14T14:31:00.043
> 
> 标签：java, android, sqlite

我一直在尝试使用下面的代码从 SQLite 数据库填充 Android Listview。我已经从同一个类中的一个数组成功地做到了这一点。但在这种情况下，我试图从另一个类返回的字符串数组中填充它。我是新手，所以可能完全错了。如果有人可以查看代码并建议我做错了什么，那就太好了。

任何帮助都将不胜感激，因为我面临着完成它的巨大压力，谢谢！

**登录活动类**

公共类 LoginActivity 扩展 Activity {

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.login);
    final EditText txtUserName = (EditText)findViewById(R.id.txtUsername);
    final EditText txtPassword = (EditText)findViewById(R.id.txtPassword);
    Button btnLogin = (Button)findViewById(R.id.btnLogin);
    btnLogin.setOnClickListener(new OnClickListener(){

        @Override
        public void onClick(View v) {
            String username = txtUserName.getText().toString();
            String password = txtPassword.getText().toString();

            try{
                if(username.length() > 0 && password.length() >0)
                {
                    DBUserAdapter dbUser = new DBUserAdapter(LoginActivity.this);
                    dbUser.open();

                    int UID = dbUser.Login(username, password);

                    if(UID != -1)
                    {
                        // TEST
                        //int UID = dbUser.getUserID(username, password);
                        //getSitesByClientname(UID);
                        // END TEST
                        // MY TEST CODE TO CHANGE ACTIVITY TO CLIENT SITES
                                Intent myIntent = new Intent(LoginActivity.this, ClientSites.class);
                                //Intent myIntent = new Intent(getApplicationContext(), ClientSites.class);
                                myIntent.putExtra("userID", UID);
                                startActivity(myIntent);
                                //finish();
                        // END MY TEST CODE

                        //Cursor UserID = dbUser.getUserID();

                        Toast.makeText(LoginActivity.this,"Successfully Logged In", Toast.LENGTH_LONG).show();
                    }else{
                        Toast.makeText(LoginActivity.this,"Invalid Username/Password", Toast.LENGTH_LONG).show();
                    }
                    dbUser.close();
                }

            }catch(Exception e)
            {
                Toast.makeText(LoginActivity.this,e.getMessage(), Toast.LENGTH_LONG).show();
            }
        }

    });
} 
```

}

DBHelper**类**中返回字符串数组的方法

```
public String[] getSitesByClientname(String id) {
    String[] args={id};

    //return db.rawQuery("SELECT client_sitename FROM " + CLIENT_SITES_TABLE + " WHERE client_id=?", args);

        Cursor myCursor = db.rawQuery("SELECT client_sitename FROM " + CLIENT_SITES_TABLE + " WHERE client_id=?", args);
        // loop through all rows and adding to array
        int count;
        count = myCursor.getCount();
        final String[] results = new String[count];
        results[0] = new String();
        int i = 0;
        try{
            if (myCursor.moveToFirst()) {
                do {
                    results[i] = myCursor.getString(myCursor.getColumnIndex("client_sitename"));

                } while (myCursor.moveToNext());
            }   
        }finally{
            myCursor.close();
        }   
        db.close();
        // return results array
        return results; 
```

**ClientSites 类**

公共类 ClientSites 扩展 ListActivity {

```
 public final static String ID_EXTRA="com.example.loginfromlocal._ID";

    private DBUserAdapter dbHelper = null;
    //private Cursor ourCursor = null;
    private ArrayAdapter<String> adapter=null;

    //@SuppressWarnings("deprecation")
    @SuppressLint("NewApi")
    public void onCreate(Bundle savedInstanceState) {
        try
        {
            super.onCreate(savedInstanceState);
            //setContentView(R.layout.client_sites);

            Intent i = getIntent();
            String uID = String.valueOf(i.getIntExtra("userID", 0));
            //int uID = i.getIntExtra("userID", 0);

            //ListView myListView = (ListView)findViewById(R.id.myListView);

            dbHelper = new DBUserAdapter(this);

            dbHelper.createDatabase();

            //dbHelper.openDataBase();
            dbHelper.open();

            String[] results = dbHelper.getSitesByClientname(uID);

            //setListAdapter(new ArrayAdapter<String>(ClientSites.this, R.id.myListView, results));
            //adapter = new ArrayAdapter<String>(ClientSites.this, R.id.myListView, results);
            setListAdapter(new ArrayAdapter<String>(ClientSites.this, R.layout.client_sites, results));

            //ListView myListView = (ListView)findViewById(R.id.myListView);
            ListView listView = getListView();
            listView.setTextFilterEnabled(true);

            //@SuppressWarnings("deprecation") 
            //SimpleCursorAdapter adapter = new SimpleCursorAdapter(getBaseContext(), R.id.myListView, null, null, null);
            //CursorAdapter adapter = new SimpleCursorAdapter(this, R.id.myListView, null, null, null, 0);
            //adapter = new Adapter(ourCursor);

            //Toast.makeText(ClientSites.this, "Booo!!!", Toast.LENGTH_LONG).show();

            //myListView.setAdapter(adapter);

            //myListView.setOnItemClickListener(onListClick);

        }
        catch (Exception e)
        {
            Log.e("ERROR", "XXERROR IN CODE: " + e.toString());
            e.printStackTrace();
        }
    } 
```

}

对此的任何帮助都会很棒，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-13T10:42:44.363

创建自己的项目，活动很少。开始使用 sqlite 数据库

创建新应用程序。创建登录活动和数据库助手。试图从数据库上传数据。研究和开发 这里是一个如何使用 SQLite DB 的例子。

```
public class DBHelper extends SQLiteOpenHelper {

private static DBHelper instance;
private static final String DATABASE_NAME = "UserClientBase";
    private static final int DATABASE_VERSION = 1;
public static interface USER extends BaseColumns {
        String TABLE_NAME = "userTable";
        String NAME = "userName";
        String PASSWORD = "userPassword";
    }
public static interface CLIENT extends BaseColumns {
        String TABLE_NAME = "clientTable";
        String NAME = "clientName";
        String USER_ID = "userId";
    }
private static final String CREATE_TABLE = "CREATE TABLE IF NOT EXISTS ";
    private static final String DROP_TABLE = "DROP TABLE IF EXISTS ";
    private static final String UNIQUE = "UNIQUE ON CONFLICT ABORT";
private static final String CREATE_TABLE_USER = CREATE_TABLE + USER.TABLE_NAME + " (" + USER._ID
            + " INTEGER PRIMARY KEY, " + USER.NAME + " TEXT " + UNIQUE + ", " + USER.PASSWORD + " TEXT);";
private static final String CREATE_TABLE_CLIENT = CREATE_TABLE + CLIENT.TABLE_NAME + " (" + CLIENT._ID
            + " INTEGER PRIMARY KEY, " + CLIENT.NAME + " TEXT UNIQUE, " + CLIENT.USER_ID + " INTEGER);";
private DBHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }
public static DBHelper getInstance(Context context) {
        if (instance == null) {
            instance = new DBHelper(context);
        }
        return instance;
    }
@Override
    public void onCreate(SQLiteDatabase db) {
        db.execSQL(CREATE_TABLE_USER);
        db.execSQL(CREATE_TABLE_CLIENT);
    }
@Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        db.execSQL(DROP_TABLE + USER.TABLE_NAME);
        db.execSQL(DROP_TABLE + CLIENT.TABLE_NAME);
        onCreate(db);
    }
public long createUser(String newUserName, String newUserPassword) {
        ContentValues values = new ContentValues();
        values.put(USER.NAME, newUserName);
        values.put(USER.PASSWORD, newUserPassword);
        return getWritableDatabase().insert(USER.TABLE_NAME, null, values);
    }
public long createClient(long userId, String newClientName) {
        ContentValues values = new ContentValues();
        values.put(CLIENT.USER_ID, userId);
        values.put(CLIENT.NAME, newClientName);
        return getWritableDatabase().insert(CLIENT.TABLE_NAME, null, values);
    }
public boolean isCorrectLoginPassword(String login, String password) {
        Cursor userListCursor = getReadableDatabase().rawQuery(
                "SELECT * FROM " + USER.TABLE_NAME + " WHERE " + USER.NAME + " =? AND " + USER.PASSWORD
                        + " =?", new String[] { login, password });
        if ((userListCursor != null) && (userListCursor.getCount() > 0)) {
            return true;
        } else {
            return false;
        }
    }
public Cursor getUserClientList(String userName) {
        Cursor userClientList = getReadableDatabase().rawQuery(
                "SELECT * FROM " + CLIENT.TABLE_NAME + " INNER JOIN " + USER.TABLE_NAME
                        + " ON " + CLIENT.USER_ID + " = " + USER.TABLE_NAME + "." + USER._ID + " WHERE " 
                        + USER.NAME + " =?", new String[] { userName });
        return userClientList;
    }
}

Example of login button click listener.
String login = loginEdt.getText().toString();
String password = passwordEdt.getText().toString();
boolean loginSuccess = databaseHelper.isCorrectLoginPassword(login, password);
if(loginSuccess) {
Intent clientListIntent = new Intent(LoginActivity.this, ClientListActivity.class);
clientListIntent.putExtra(ClientListActivity.EXTRAS_LOGIN, login);
startActivity(clientListIntent);
} else {
Toast.makeText(LoginActivity.this, "Incorrect login/password", Toast.LENGTH_SHORT).show();
}

And example of listview with data from sql:

clientLv= (ListView)findViewById(R.id.listClient);
login = getIntent().getExtras().getString(EXTRAS_LOGIN);
dbHelper = DBHelper.getInstance(this);
Cursor clientList = dbHelper.getUserClientList(login);
adapter = new SimpleCursorAdapter(this, R.layout.row_client, clientList, new String[]{DBHelper.CLIENT.NAME}, new int[]{R.id.txtClientName} , SimpleCursorAdapter.FLAG_REGISTER_CONTENT_OBSERVER);
clientLv.setAdapter(adapter); 
```

# xml - 给定 xsd/xml 的 SAXParseException 代码 cvc-elt.1

> ID：15412109
> 
> 赞同：0
> 
> 时间：2013-03-14T14:31:06.153
> 
> 标签：xml, xsd, jaxb, moxy

我有一个给定的 xsd 文件并给出了该文件的示例。[xsd 与http://www.forum-datenaustausch.ch/hospitalinvoicerequest_400.xsd](http://www.forum-datenaustausch.ch/hospitalinvoicerequest_400.xsd)非常相似，但在根目录下多了一个元素。

问题是，如果我针对模式验证给定的 xml（使用 moxy 作为 JAXBCOntextFactory）我得到了这个错误：

```
enterCaused by: org.xml.sax.SAXParseException; lineNumber: 2; columnNumber: 221; cvc-elt.1: Cannot find the declaration of element 'invoice:request'. 
```

invoice:request 是 xml 开始的根元素：

```
<invoice:request role="production" xmlns:invoice="http://www.medidata.ch/QO/XSD" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.medidata.ch/QO/XSD QO_MDInvoiceRequest_400.xsd"> 
```

[如果我在线](http://www.freeformatter.com/xml-validator-xsd.html)或在 Eclipse中针对模式验证 xml （右键单击验证），一切正常。如果我将名称空间从

```
xmlns:invoice="http://www.medidata.ch/QO/XSD" 
```

到

```
xmlns:invoice="http://www.xmlData.ch/xmlInvoice/XSD" 
```

错误消失了-但由于附加元素，我得到了另一个错误。有了这个命名空间声明，我什至无法在没有验证的情况下读取内容：root 的 getter 返回 null。使用替代声明（“ [http://www.xmlData.ch/xmlInvoice/XSD](http://www.xmlData.ch/xmlInvoice/XSD) ”）并且没有验证一切正常！

那么名称空间声明有什么问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:44:51.590

该错误表明您的文档无效，因为没有定义具有本地名称`request`和命名空间前缀的元素`invoice`。您的实例文档具有该前缀的名称空间绑定和相同名称空间 URI 的架构位置提示，因此该部分似乎是正确的。

检查您的架构是否存在以下问题：

1.  架构的目标命名空间是否与文档根元素使用的命名空间相同（此处`http://www.medidata.ch/QO/XSD`）
2.  是否存在与根元素具有相同本地名称的元素的全局元素声明（此处`request`）
3.  如果您的根元素在架构中使用命名空间前缀声明，那么该前缀是否绑定到您的文档中使用的相同命名空间 URI

如果其中任何一项不正确，则您的文件无效。（稍后在您的模式或实例 XML 文档中可能还会出现其他问题，使其无效。）

通常（如果您的 XML 文档**确实**有效）此类问题是由以下两个原因之一引起的：

1.  找不到您的架构文档
2.  元素名称被误解，因为解析器未设置为命名空间感知

标记`xsi:schemaLocation="http://www.medidata.ch/QO/XSD QO_MDInvoiceRequest_400.xsd"`定义命名空间中元素的模式`http://www.medidata.ch/QO/XSD`是从相对（文件）位置找到的`QO_MDInvoiceRequest_400.xsd`。因此，如果您没有明确告诉解析器它应该使用什么模式文档，它将从输入文档所在的同一文件夹中查找具有该名称的文件。

由于第二个原因，我无法提供任何好的帮助，因为我不熟悉 moxy，但是/并且我假设 moxy 总是将 XML 文件作为命名空间感知处理。

# php - 我需要在 php 中使用一个正则表达式，它将 rel='lightbox[nason]' 添加到找到字符串 /gallery/dsc_ 的标签中

> ID：15412110
> 
> 赞同：0
> 
> 时间：2013-03-14T14:31:07.253
> 
> 标签：php, regex

我需要一个在 php 中使用的正则表达式，它将 rel='lightbox[nason]' 添加到找到字符串 /gallery/dsc_ 的 a 标记中。

示例输入字符串：http://myURL/gallery/dsc_8691-1-bw-3/'title='DSC_8691-1-bw'>

示例输出字符串：http://myURL/gallery/dsc_8691-1-bw-3/' title='DSC_8691-1-bw' rel='lightbox[nason]'>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T14:45:56.187

像那样

```
$count = null;
$returnValue = preg_replace('~(a.*href=(?:"|\').*/gallery/dsc_.*(?:"|\'))~U', '$1 rel="lightbox[nason]"', '<a href="http://myURL/gallery/dsc_8691-1-bw-3/" title="DSC_8691-1-bw">', -1, $count); 
```

# objective-c - 多视图控制器策略

> ID：15412114
> 
> 赞同：0
> 
> 时间：2013-03-14T14:31:12.673
> 
> 标签：objective-c, ios6

我正在制作一个应用程序，它有大约 20 个不同的视图控制器，它们被加载到一个容器视图中。有些视图有滑块和按钮，有些只有按钮。有没有一种策略可以让构建视图控制器更符合 Objective C 编码技术？

目前我正在尝试将类似的方法组合到模型对象中，但在我参与太多之前，我想我会问是否有更好的方法。我也愿意做基础工作和研究，因此任何可以为我指明正确方向的关键字都会有所帮助，即协议、代表等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T14:52:45.897

我给你的主要建议是考虑是否需要*控制*这些视图对象中的每一个。将 UIViewController 视为视图和模型之间的委托。如果您不需要极端的上下文切换（即，将新视图推送到导航堆栈上），那么让 20 个代表四处浮动真的是可取的吗？在大多数情况下，并非如此。无论如何，UIViewController 都不是一个“沉重的对象”，但是如果每次你决定将一个新组件扔到屏幕上时，你的子类 UIViewController 很快就会使你的代码库变得笨重和庞大。

尝试将注意力集中在将设置视图的逻辑和控制器的实际职责（对模型更改做出反应、调度操作、更新视图）分别划分为 UIView 子类和 UIViewController 子类。如果您确实需要将视图的某些组件分开，因为它的逻辑根本不适合主视图控制器的职责类别，那么，只有这样，新的视图控制器才合适。

# jquery - jquery 单选组在点击时切换

> ID：15412125
> 
> 赞同：0
> 
> 时间：2013-03-14T14:31:46.173
> 
> 标签：jquery

```
$("input[name=sample]").click(function(){
            $("#"+$(this).val()).show();
            $("#"+$("input[name=sample]:not(:checked)").val()).hide();
    });
}); 
```

我用它在两个 div 之间切换。但是当我添加第三个 div 和单选按钮时，这对第三个不起作用。它在点击时显示，但不隐藏其他人。什么会导致这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T14:35:03.430

向所有 Div 添加一个类，并在显示之前隐藏该类。（例如：class="divHide"）

```
$("input[name=sample]").click(function(){
    $(".divHide").hide();
    $("#"+$(this).val()).show();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T14:36:28.390

隐藏每个未选择的元素：

```
$("input[name=sample]").click(function(){
    $("#"+$(this).val()).show();
        $("input[name=sample]:not(:checked)").each(index, item){
            $("#" + $(item).val()).hide();
        });
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T14:36:46.000

您现在要隐藏多个元素，因此请使用以下内容：

```
$('input[name="sample"]').on('click', function(){
      $("#"+this.value).show();
      $("input[name=sample]:not(:checked)").each(function() {
          $('#'+this.value).hide();
      });
}); 
```

# python - 实例化 Python 对象，并使用列表

> ID：15412126
> 
> 赞同：4
> 
> 时间：2013-03-14T14:31:48.587
> 
> 标签：python, list, class, python-3.x

我对编程很陌生，并试图自学。我目前正在尝试学习如何从类构建对象，我认为我理解。我当前的任务是将对象添加到列表中并打印该列表。最终，我正在尝试构建一个程序，该程序创建一个对象并列出已在编号列表中创建的每个对象，即：

```
1 - tomato, red
2 - corn, yellow
etc... 
```

因此，首先，我只是尝试构建它的基本部分。这是我做的：

```
# Builds objects on instantiation for a vegetable and color
class Veg:
    def __init__(self, name, color):
        self.name = name
        self.color = color
        print('You have created a new', self.color, self.name, end='.\n')

# Function to create a new vegetable and store it in a list
def createVeg():
    name = input('What is the name of the Vegetable? ')
    color = input('What color is the vegetable? ')
    Veg(name, color)
    vegList.append(Veg)
    return

# Initialize variables
vegList = []
choice = 'y'

# Main loop
while choice == 'y':
    print('Your basket contains:\n', vegList)
    choice = input('Would you like to add a new vegetable? (y / n) ')
    if choice == 'y':
        createVeg()
    if choice == 'n':
        break

print('Goodbye!') 
```

当我运行它时，我得到以下信息：

```
Your basket contains:
 []
Would you like to add a new vegetable? (y / n) y
What is the name of the Vegetable? tomato
What color is the vegetable? red
You have created a new red tomato.
Your basket contains:
 [<class '__main__.Veg'>]
Would you like to add a new vegetable? (y / n) y
What is the name of the Vegetable? corn
What color is the vegetable? yellow
You have created a new yellow corn.
Your basket contains:
 [<class '__main__.Veg'>, <class '__main__.Veg'>]
Would you like to add a new vegetable? (y / n) n
Goodbye! 
```

因此，据我所知，除了打印列表之外，一切正常，我无法弄清楚。它似乎在附加列表属性，但不显示对象。我也尝试了一个“for”循环，但得到了相同的结果。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T14:40:34.943

这一切都按设计工作。该`<class '__main__.Veg'>`字符串是您的类实例的*表示形式。*`Veg`

[`__repr__`您可以通过给您的类一个方法](http://docs.python.org/3/reference/datamodel.html#object.__repr__)来自定义该表示：

```
class Veg:
    # ....

    def __repr__(self):
        return 'Veg({!r}, {!r})'.format(self.name, self.color) 
```

该`__repr__`函数所要做的就是返回一个合适的字符串。

使用上面的示例`__repr__`函数，您的列表将改为：

```
[Veg('tomato', 'red'), Veg('corn', 'yellow')] 
```

您确实需要确保您确实*附加*了新实例。代替：

```
Veg(name, color)
vegList.append(Veg) 
```

做这个：

```
newveg = Veg(name, color)
vegList.append(newveg) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T15:04:01.800

问题出在线路上

```
Veg(name, color)
vegList.append(Veg) 
```

您在这里所做的是创建一个新的 Veg，但不为它分配任何东西。然后，您将 Veg*类型*附加到列表中。此外，您需要通过将方法添加到您的类来告诉 Python 如何以`Veg`人类可读的方式打印您的对象。`__str__`最后，如果您直接打印一个列表 ( `print vegList`)，您将获得列表内容的机器可读表示，这不是您想要的。迭代列表的元素并直接打印它们将起作用。

这是具有必要更改的工作版本：

```
# Builds objects on instantiation for a vegetable and color
class Veg:
    def __init__(self, name, color):
        self.name = name
        self.color = color
        print('You have created a new', self.color, self.name, end='.\n')

    def __str__(self):
        return 'One {} {}'.format(self.color, self.name)

# Function to create a new vegetable and store it in a list
def createVeg():
    name = input('What is the name of the Vegetable? ')
    color = input('What color is the vegetable? ')

    vegList.append(Veg(name, color))
    return

# Initialize variables
vegList = []
choice = 'y'

# Main loop
while choice == 'y':
    print('Your basket contains:\n')
    for veg in vegList:
        print(veg)
    choice = input('Would you like to add a new vegetable? (y / n) ')
    if choice == 'y':
        createVeg()
    if choice == 'n':
        break

print('Goodbye!') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T15:02:17.293

你的问题在这里：

```
def createVeg():
    name = input('What is the name of the Vegetable? ')
    color = input('What color is the vegetable? ')
    Veg(name, color) # 1
    vegList.append(Veg) # 2
    return 
```

我注释为 #1 的行创建了一个 veg 对象的新实例。但是，它对它没有任何作用。它不会将它存储在任何地方，或者命名它，就像你写的一样`a = Veg(name, color)`。基本上，它创建对象，然后忘记它。

我注释为 #2 的行然后将 Veg CLASS 附加到列表中，而不是该类的实例。这就像将整数的概念添加到列表中，而不是添加实际的整数 5。

尝试将这两行替换为...

```
v = Veg(name, color)
vegList.append(v) 
```

完成此操作后，您仍然需要按照 Martijn Pieters 的回答来正确打印对象。

# iphone - 子类继承

> ID：15412131
> 
> 赞同：-1
> 
> 时间：2013-03-14T14:31:58.650
> 
> 标签：iphone, ios, objective-c

我子类化`UIScrollView`并添加了一些我想在`UITableView`. 是否可以从我的自定义滚动视图而不是 UIScrollView 继承表视图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T14:38:52.407

Objective-C 的强大功能之一是类别。

摘自[Objective-C： 类别](http://macdevelopertips.com/objective-c/objective-c-categories.html)：

> 作为子类化的替代方案，Objective-C 类别提供了一种向类添加方法的方法。有趣的是，您通过类别添加的任何方法都成为类定义的一部分，可以这么说。换句话说，如果你向 NSString 类添加一个方法，任何 NSString 的实例或子类都可以访问该方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T14:42:53.820

您应该能够扩展`UIScrollView`. 在扩展（或类别）范围内，扩展也应适用于所有子类。但是，我自己从未尝试过。

您不能子类化`UIScrollView`（比如说命名`MyScrollView`），然后创建您的子类 MyScrollView 的现有`UITableView`子类，而不是`UIScrollView`. 但是扩展`UIScrollView`应该有效。

但是，如果您在扩展中提供了方法 abc`MySuperView`同时`UITableView`还实现了 abc，则将调用 UITableView 的 abc。因此，我并没有真正看到这种构造与直接扩展或继承 UITableView 相比的优势。

# android - AIR / Android，内容 URI 到 AS3 文件路径

> ID：15412133
> 
> 赞同：1
> 
> 时间：2013-03-14T14:32:03.160
> 
> 标签：android, actionscript-3, air, filepath

I registered some file-extensions for my AIR-Android-App, so when a file is selected, my app receives an Invoke-Event in Flash/AS3 with the path to that file.This works fine for files/downloads/links.

然而，一些应用程序提供了一个内容URI，而不是一个直接的文件路径（例如，在下载之前的电子邮件附件）。

例如：内容：//gmail-ls/houseatreides@gmail.com/messages/6/attachments/0.1/BEST/false

问题：我怎样才能把它变成我可以在 AIR/AS3 中加载的东西。或者我如何命令其他应用程序来捕获文件？如果在 AIR 中不可能，是否有人知道可以完成工作的 ANE？

我找到了一篇如何在 JAVA 中进行原生操作的帖子：

[如何使用内容创建文件？](https://stackoverflow.com/questions/13727007/how-to-create-a-file-using-content)

也欢迎在 AIR 中无法进行的确认。谢谢你。

维达夫

# java - spring - 如何将通用（参数，值）对从我的登录控制器传递给我的身份验证提供程序？

> ID：15412141
> 
> 赞同：3
> 
> 时间：2013-03-14T14:32:23.907
> 
> 标签：java, spring, authentication, spring-security

我想要做的是在我的登录页面上读取一个 http 参数，例如`login.html?param=value`，然后传递`value`给我的 AuthenticationProvider。我的想法是以某种方式保存`value`在一个隐藏的参数中，但我仍然不知道如何传递它。这可能吗？我该怎么做呢？

编辑：遵循 Sanath 的建议并阅读了一些内容后，我终于能够解决问题——如果您对我是如何做到的感兴趣，请看下面。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T07:45:51.427

我做了以下事情，最后它就像一个魅力。

在我的 bean 配置文件中，我必须输入：

```
<http auto-config="true>
  ...
  <form-login ... authentication-details-source-ref="myWebAuthDetSource"/>
  ...
</http>
<beans:bean id="myWebAuthDetSource" class="com.my.pack.age.MyWebAuthDetSource"/>
... 
```

然后我已经像这样设置了我的`WebAuthenticationDetailsSource`实现：

```
public class MyWebAuthDetSource implements AuthenticationDetailsSource<HttpServletRequest, MyWebAuthDets> {
  public MyWebAuthDetSource buildDetails (HttpServletRequest context) {
    return new MyWebAuthDets(context);
  }
} 
```

然后我的`AuthenticationDetails`实现如下：

```
public class MyWebAuthDets extends WebAuthenticationDetails {
  private final String parameter;
  public MyWebAuthDets(HttpServletRequest request) {
    super(request);
    this.parameter = request.getParameter("paramId");
  }
} 
```

And then I overlook the most simple fact, that the authentication process processes only what it gets on submit from the login form, so I simply had to add the following in login.jsp:

```
...
<form id="j_spring_security_check" ... >
  <input type="hidden" name="paramID" value="${param['paramID']}" />
  ...
</form>
... 
```

And that was all. Now I can add an `authenticationProvider` and get my parameter with `.getDetails()` from the `authenticationToken`.

Thanks again @Sanath.

# ruby-on-rails - 使用 Rails 和 Squeel 对复杂条件下的结果进行排名

> ID：15412142
> 
> 赞同：0
> 
> 时间：2013-03-14T14:32:24.780
> 
> 标签：ruby-on-rails, squeel

我可能在这里做一些愚蠢的事情 - 我对其他方式持开放态度 - 但我试图根据*计算*字段对我的结果集进行排序：

```
Client.select{['clients.*',
               (cast((surname == matching_surname).as int) * 10 +
                cast((given_names == matching_given_names).as int) + 
                cast((date_of_birth == matching_date_of_birth).as int).as(ranking)]}.
       where{(surname =~ matching_surname) | 
             (given_names =~ matching_given_names) | 
             (date_of_birth == matching_date_of_birth)}.
       order{`ranking`.desc} 
```

我的问题是这`date_of_birth`可能为零。这会导致`cast((...).as int)`调用返回三个不同`1`的值 - 如果表达式计算为`true`; `0`如果表达式计算为`false`; 如果基础列`nil`值为`nil`.

表达式中的`nil`值会导致整个排名评估为`NIL`- 这意味着即使我有一条与 完全匹配的记录，`surname`并且`given_names`如果`date_of_birth`列是`nil`，`ranking`则记录的 是`nil`。

我曾尝试在`cast`that 检查中使用复杂的表达式`if not nil or the matching_value`，但是使用时它会因 Squeel 异常而失败，`|`并且 ruby​​ 在使用`||`and时会对其进行评估`or`。

我还尝试按别名列的顺序使用谓词：

```
order{[`ranking` != nil, `ranking`.desc]} 
```

但这会引发`ActiveRecord`异常，抱怨该列`ranking`不存在。

我走投无路了……有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T15:07:52.563

跳了一会儿舞之后，我能够计算出`ranking`使用一系列外连接到其他作用域的方法，如下所示：

```
def self.weighted_by_any (client)
  scope = 
    select{[`clients.*`,
            [
             ((cast((`not rank_A.id is null`).as int) * 100) if client[:social_insurance_number].present?),
             ((cast((`not rank_B.id is null`).as int) * 10) if client[:surname].present?),
             ((cast((`not rank_C.id is null`).as int) * 1) if client[:given_names].present?), 
             ((cast((`not rank_D.id is null`).as int) * 1) if client[:date_of_birth].present?)
            ].compact.reduce(:+).as(`ranking`)
          ]}.by_any(client)

  scope = scope.joins{"left join (" + Client.weigh_social_insurance_number(client).to_sql + ") AS rank_A ON rank_A.id = clients.id"} if client[:social_insurance_number].present?
  scope = scope.joins{"left join (" + Client.weigh_surname(client).to_sql + ") AS rank_B on rank_B.id = clients.id"} if client[:surname].present?
  scope = scope.joins{"left join (" + Client.weigh_given_names(client).to_sql + ") AS rank_C on rank_C.id = clients.id"} if client[:given_names].present?
  scope = scope.joins{"left join (" + Client.weigh_date_of_birth(client).to_sql + ") AS rank_D on rank_D.id = clients.id"} if client[:date_of_birth].present?
  scope.order{`ranking`.desc}
end 
```

where`Client.weigh_<attribute>(client)`是另一个如下所示的范围：

```
def self.weigh_social_insurance_number (client)
  select{[:id]}.where{social_insurance_number == client[:social_insurance_number]}
end 
```

这使我能够从检查 nil 中分离出值的比较，因此删除了我的布尔计算中的第三个值（TRUE => 1，FALSE => 0）。

干净的？高效的？优雅的？也许不是......但工作。:)

# 根据新信息进行编辑

[感谢Bigxiang 的回答](https://stackoverflow.com/a/18248250/1571834)，我已将其重构为更漂亮的东西 。这是我想出的：

首先，我`weigh_<attribute>(client)`用筛子替换了范围。我之前发现您可以在`select{}`范围的一部分中使用筛选器 - 我们将在一分钟内使用它。

```
sifter :weigh_social_insurance_number do |token|
  # check if the token is present - we don't want to match on nil, but we want the column in the results
  # cast the comparison of the token to the column to an integer -> nil = nil, true = 1, false = 0
  # use coalesce to replace the nil value with `0` (for no match)
  (token.present? ? coalesce(cast((social_insurance_number == token).as int), `0`) : `0`).as(weight_social_insurance_number)
end

sifter :weigh_surname do |token|
  (token.present? ? coalesce(cast((surname == token).as int), `0`) :`0`).as(weight_surname)
end

sifter :weigh_given_names do |token|
  (token.present? ? coalesce(cast((given_names == token).as int), `0`) : `0`).as(weight_given_names)
end

sifter :weigh_date_of_birth do |token|
  (token.present? ? coalesce(cast((date_of_birth == token).as int), `0`) : `0`).as(weight_date_of_birth)
end 
```

因此，让我们使用筛选器创建一个范围来衡量我们所有的标准：

```
def self.weigh_criteria (client)
  select{[`*`, 
          sift(weigh_social_insurance_number, client[:social_insurance_number]),
          sift(weigh_surname, client[:surname]),
          sift(weigh_given_names, client[:given_names]),
          sift(weigh_date_of_birth, client[:date_of_birth])
        ]}
end 
```

现在我们可以确定提供的条件是否与列值匹配，我们使用另一个筛选器*计算*我们的排名：

```
sifter :ranking do
  (weight_social_insurance_number * 100 + weight_surname * 10 + weight_date_of_birth * 5 + weight_given_names).as(ranking)
end 
```

并将它们加在一起以使我们的范围包括所有模型属性和我们的*计算*属性：

```
def self.weighted_by_any (client)
  # check if the date is valid 
  begin 
    client[:date_of_birth] = Date.parse(client[:date_of_birth])
  rescue => e
    client.delete(:date_of_birth)
  end

  select{[`*`, sift(ranking)]}.from("(#{weigh_criteria(client).by_any(client).to_sql}) clients").order{`ranking`.desc}
end 
```

因此，我现在可以搜索客户，并根据他们与提供的标准的匹配程度对结果进行排名：

```
irb(main): Client.weighted_by_any(client)
  Client Load (8.9ms)  SELECT *, 
                              "clients"."weight_social_insurance_number" * 100 + 
                              "clients"."weight_surname" * 10 + 
                              "clients"."weight_date_of_birth" * 5 + 
                              "clients"."weight_given_names" AS ranking 
                       FROM (
                             SELECT *, 
                                    coalesce(cast("clients"."social_insurance_number" = '<sin>' AS int), 0) AS weight_social_insurance_number, 
                                    coalesce(cast("clients"."surname" = '<surname>' AS int), 0) AS weight_surname, 
                                    coalesce(cast("clients"."given_names" = '<given_names>' AS int), 0) AS weight_given_names,         0 AS weight_date_of_birth 
                             FROM "clients" 
                             WHERE ((("clients"."social_insurance_number" = '<sin>' 
                                   OR "clients"."surname" ILIKE '<surname>%') 
                                   OR "clients"."given_names" ILIKE '<given_names>%'))
                            ) clients 
                       ORDER BY ranking DESC 
```

更干净、更优雅、更好用！

# encoding - 我可以从 Groovy 的 CLI 中读取西里尔文（俄语）字符吗？

> ID：15412143
> 
> 赞同：0
> 
> 时间：2013-03-14T14:32:27.807
> 
> 标签：encoding, groovy, command-line-interface

我有一个从 CLI 获取用户输入的 Groovy 脚本。CLI 支持西里尔字符，并且编码和字符集都是 UTF-8。然而，当 Groovy 读取带有西里尔字符的输入时，它看到的只是“???????”。此外，Groovy 无法使用给定参数创建目录或文件。有人对强迫 Groovy 接受西里尔字符有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T14:58:47.967

确保您使用的阅读器使用与您的 CLI 相同的编码。如果是，则显示字符可能会出现问题。您可以验证 groovy 得到的 Unicode 代码点，如下所示：

```
// test.groovy    
def input = System.in.withReader('UTF-8') { it.readLine() }

input.eachWithIndex { ch, index ->
    println "$ch, ${Character.codePointAt(input, index)}"
} 
```

从 CLI 运行：

```
$ echo $LANG
en_US.UTF-8
$ echo Здра́вствуйте | groovy test.groovy
З, 1047
д, 1076
р, 1088
а, 1072
́, 769
в, 1074
с, 1089
т, 1090
в, 1074
у, 1091
й, 1081
т, 1090
е, 1077 
```

# ios - KVO - 界面方向属性

> ID：15412146
> 
> 赞同：0
> 
> 时间：2013-03-14T14:32:28.700
> 
> 标签：ios, uiinterfaceorientation, key-value-observing

我正在尝试通过此代码从其他对象的 UIViewController 的 KVO 观察界面方向：

```
[((UIViewController *)self.delegate) addObserver:self forKeyPath:@"interfaceOrientation" options:NSKeyValueObservingOptionNew context:NULL]; 
```

并实现功能：

```
-(void)observeValueForKeyPath:(NSString*)keyPath ofObject:(id)object change:(NSDictionary*)change context:(void*)context 
{
 if ([keyPath isEqual:@"interfaceOrientation"]) 
  {
    // do something    
  }
} 
```

该方法仅在第一次调用，虽然我可以看到委托的属性 interfaceOrientation 在我旋转手机时发生了变化。

为什么？

请帮忙 ！

谢谢！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T20:27:56.633

你为什么用 KVO 做这个？UIViewControllers 内置了对此的支持。看着

```
 //iOS6 only
 - (BOOL)shouldAutomaticallyForwardRotationMethods
 {
    return YES;
 } 
```

并且`addChildViewController:`

# git - 使用 git 将分支 tarball 推送到 github

> ID：15412147
> 
> 赞同：1
> 
> 时间：2013-03-14T14:32:31.133
> 
> 标签：git, github, tar

我有一个 git 分支，让我们说 2 个目录，其中包含一些代码文件：

*   html代码
*   代码

我已经用 Git 在同一个分支中制作了这 2 个目录的 tarball。但是要使用 Git 创建一个 tarball，您需要执行“git add htmlcode jscode”

我现在遇到的问题是，它将我分支中的所有文件（即 htmlcode、jscode 和 tarball）推送到 Github。我知道为什么会发生这种情况，但不知道如何制作一个仅将 tarball 推送到 Github 的工作。

有谁能够帮助我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T14:43:47.697

这没有任何意义。如果您不想在 Git 中包含原始文件，为什么要使用 Git 生成 tarball？

只需使用 tar/gzip 命令本身：

```
tar czf my-code.tar.gz htmlcode jscode 
```

然后（如果你真的想这样做）将生成的文件添加到 Git：

```
git add my-code.tar.gz
git commit -m "Version-controlling a tarball for some unknown reason"
git push 
```

也就是说，*没有理由*只对 tarball 进行版本控制。您真的*非常*想在 Git 中包含原始源文件，并*排除*tarball。通过仅包含 tarball，您实际上只是在阻碍 Git 的内置压缩并使您的 repo 或多或少无用。

# soap - 将默认命名空间添加到肥皂体内的元素

> ID：15412154
> 
> 赞同：1
> 
> 时间：2013-03-14T14:32:45.413
> 
> 标签：soap, xsd, jaxb, wsdl, jax-ws

我已经从 wsdl 和 xsd 生成了一个 Web 服务客户端 (JAX-WS) 和模型。我对肥皂体内的命名空间有疑问。

假设我们有两个类：

```
@XmlRootElement(namespace="aNamespace") class A {
   @XmlAnyElement(lax = true) Object obj;
}

@XmlRootElement(namespace="bNamespace") class B {...} 
```

我要发送的对象是'a'：

```
A a = new A();
a.obj = new B(); 
```

我调用的服务需要 V1 或 V3 请求：

```
 V1
   ...
   <soapenv:Body>
      <A xmlns="aNamespace">
         <B xmlns="bNamespace">
            <B1>...</B1>
            <B2>...</B2>
         </B>
      </A>
   </soapenv:Body>
   ...

   V3
   ...
   <soapenv:Body>
      <a:A xmlns:a="aNamespace">
         <b:B xmlns:b="bNamespace">
            <b:B1>...</b:B1>
            <b:B2>...</b:B2>
         </b:B>
      </a:A>
   </soapenv:Body>
   ... 
```

尝试调用该服务时，我看到生成了以下请求：

```
 V2
   ...
   <soapenv:Body>
      <a:A xmlns:a="aNamespace", xmlns:b="bNamespace">
         <b:B>
            <b:B1>...</b:B1>
            <b:B2>...</b:B2>
         </b:B>
      </a:A>
   </soapenv:Body>
   ... 
```

并且服务返回错误。

我可以以某种方式将默认命名空间设置为 B（以便我看到`<B xmlns="bNamespace">`）吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:07:13.100

我通过将 B 编组到 DOM 对象中解决了这个问题。然后我将创建的 DOM 放入 A 中。

```
B b = new B();
Document bDocument = DocumentBuilderFactory.newInstance().newDocumentBuilder().newDocument();
JAXBContext.newInstance(B.class).createMarshaller().marshal(b, bDocument); 

A a = new A();
a.obj = bDocument; 
```

它会产生一些奇怪的结果，但是网络服务接受它：

```
 ...
   <soapenv:Body>
      <a:A xmlns:a="aNamespace" xmlns:ab="bNamespace">
         <b:B xmlns:b="bNamespace">
            <b:B1>...</b:B1>
            <b:B2>...</b:B2>
         </b:B>
      </a:A>
   </soapenv:Body>
   ... 
```

# r - 如何操作汇总表结果

> ID：15412161
> 
> 赞同：1
> 
> 时间：2013-03-14T14:32:59.107
> 
> 标签：r

我有一些看起来像这样的数据：

```
 A      B
6     Often  Often
7    Always Always
8    Rarely Rarely
9 Sometimes  Often

structure(list(A = structure(c(5L, 6L, 3L, 4L), .Label = c("", 
"Almost Never", "Rarely", "Sometimes", "Often", "Always"), class = c("ordered", 
"factor")), B = structure(c(5L, 6L, 3L, 5L), .Label = c("", "Almost Never", 
"Rarely", "Sometimes", "Often", "Always"), class = c("ordered", 
"factor"))), .Names = c("A", "B"), row.names = 6:9, class = "data.frame") 
```

使用摘要，我可以根据可能的响应获得每种响应类型的计数，这正是我想要的：

```
 A                B    
             :0               :0  
 Almost Never:0   Almost Never:0  
 Rarely      :1   Rarely      :1  
 Sometimes   :1   Sometimes   :0  
 Often       :1   Often       :2  
 Always      :1   Always      :1 
```

现在我想操纵这些数字来获得（经常+总是）/总响应。虽然摘要输出是字符输出——我可以在冒号上拆分，但必须有更好的方法。

给定上面的数据集，我如何计算每个问题的经常 + 总回答的百分比？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T14:39:29.073

这可以使用`apply`and来完成`table`（假设`d`是您的数据框）：

```
apply(d, 2, function(col) {
    tab = table(col)
    (tab["Often"] + tab["Always"]) / sum(tab)
}) 
```

请注意，仅当每列中始终至少有一个“总是”和一个“经常”时，上述内容才有效。以下内容稍微不简洁，但即使列中缺少“始终”或“经常”也可以使用：

```
sapply(1:NCOL(d), function(i) {
        tab = table(d[, i])
        (tab["Often"] + tab["Always"]) / sum(tab)
}) 
```

# php - 使用 Ajax 从数据库中动态获取数据，无需刷新间隔

> ID：15412166
> 
> 赞同：0
> 
> 时间：2013-03-14T14:33:12.233
> 
> 标签：php, javascript, jquery, ajax

我一直在处理 jquery/ajax 请求。我已经成功获得了一个 ajax 请求，它将从数据库中检索数据，问题是，我不断`window.setInterval()`地每 x 秒刷新一次这个函数。

我将如何更改它以保持 ajax 请求处于活动状态，因此它可以更新 html 内容，而不必为我的 ajax 脚本提供多个请求。

我的代码如下：

```
window.setInterval(function()
{
  $(function () 
  {
    $.ajax({                                      
        url: 'Ajax.php'+SearchTerm, dataType: 'json',  success: function(rows)        
        {
        $('#NumberOfVotes').empty();

            for (var i in rows)
            {
                var row = rows[i];          
                var QuestionID = row[0];
                var Votes = row[1];
                $('#NumberOfVotes')
                .append(Votes);
            } 
        } 
    });       
  });
}, 500); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T14:37:22.427

这在很大程度上取决于您的服务器如何能够动态更新其内容。也就是说，您正在寻找的是 websockets。Websockets 旨在取代长轮询范式。

编辑：由于您主要使用 php 作为服务器技术，请查看 Ratchet。我听说过它的好消息[http://socketo.me/](http://socketo.me/)

这是一篇关于使用 HTML [http://net.tutsplus.com/tutorials/javascript-ajax/start-using-html5-websockets-today/的优秀文章](http://net.tutsplus.com/tutorials/javascript-ajax/start-using-html5-websockets-today/)

.NET 在 SignalR [http://signalr.net/中有一个很棒的套接字库](http://signalr.net/)

那里有无数关于套接字的 php 文档 [http://php.net/manual/en/book.sockets.php](http://php.net/manual/en/book.sockets.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T14:38:35.103

考虑使用网络套接字——您可以在客户需要查找新数据时随时向他们发送消息——这样您就不会发出任何不必要的请求。尝试检查 pubnub - 服务很便宜，可以处理您需要的一切。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T14:39:07.440

您需要一些服务器端的东西来保持请求处于活动状态，直到它有东西要返回。这通常称为“彗星”、“长轮询”或“推送”。

原理是：

1.  您通过 AJAX 在客户端发送请求
2.  您的服务器收到请求，但尚未返回响应。它休眠/等待，直到它有东西要返回
3.  数据库中的新条目！您的服务器现在有一些东西要返回：它为等待请求返回一些 JSON 数据
4.  您收到响应服务器端，显示您必须显示的内容，然后返回步骤 1 发送另一个请求。

现在，实现服务器端将取决于您使用的语言/框架。

* * *

编辑 ：

一些使用 PHP 的例子：

[彗星和 PHP](http://www.zeitoun.net/articles/comet_and_php/start)

[使用 PHP 和 jQuery 的简单 Comet 实现](http://webscepter.com/simple-comet-implementation-using-php-and-jquery/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T14:42:50.023

您可以设置`xhr.multipart = true`和修改服务器代码。请参阅[多部分响应示例代码](http://newtonapples.com/ajax-program-multipart-responses-code/)。另一种方法是使用提到的 websockets

# sql - 根据表中包含的值搜索表

> ID：15412175
> 
> 赞同：0
> 
> 时间：2013-03-14T14:33:46.957
> 
> 标签：sql, sql-server, tsql

我有一个带有`reason_id`外键的表。我需要将其映射回其主表。我已经在我们的数据库中搜索匹配/相似的列名，但我找不到该表。

我有一个与`reason_id`. 我想搜索包含我拥有的列表的表。任何帮助，将不胜感激。

这是我为搜索列而运行的查询：

```
select 
  t.name as Table_Name,
  SCHEMA_NAME(schema_id) as schema_name,
  c.name as Column_Name
from
  sys.tables as t
  inner join 
  sys.columns c
  on
  t.OBJECT_ID = c.OBJECT_ID
where 
  c.name like '%reason%' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T11:37:13.940

没有简单的方法可以在其他表中找到相关数据。

我会尝试使用[ApexSQL Search](http://www.apexsql.com/sql_tools_search.aspx)或[SQL Search](http://www.red-gate.com/products/sql-development/sql-search/)等工具。两者都是免费的，您不会出错。

如果您只想使用 SQL 执行此操作，请识别所有表中具有相同数据类型的所有列。为此，请使用`sys.columns, sys.types and sys.tables`视图。找到所有列后，只需尝试开始为每个表编写查询，直到找到正确的列。

我会选择这样的东西

```
select COUNT(*)
from tableX
where tableX.matchedColumn in
(
    -- take 100 or more random rows from the original table
    -- if result gives you a number that is near to the number of values listed here then you are most probably on the right track
) 
```

# jquery - 使网站兼容不同屏幕尺寸的指南

> ID：15412177
> 
> 赞同：0
> 
> 时间：2013-03-14T14:33:57.200
> 
> 标签：jquery, html, css, backbone.js, single-page-application

我不是前端开发人员。我必须创建一个网站。用户必须在其中提交表单。他根据他以前的答案提出了不同的问题。我在互联网上搜索。我认为单页网站是一件好事，因为页面不会一次又一次地重新加载，所以它是一个很好的用户体验，但我的下一个目标是如何使外观网站适合大多数屏幕移动设备、电视、桌面、平板电脑等。请给出一些建议或要点以记住使网站兼容不同平台

# java - 如何从我的 Android 应用程序中的另一个 Activity 访问主 webview 实例？

> ID：15412180
> 
> 赞同：1
> 
> 时间：2013-03-14T14:34:03.473
> 
> 标签：java, android, cordova, webview

我用 PhoneGap 创建了一个 Android 应用程序。MainActivity 看起来像这样：

**MainActivity.java**

```
import org.apache.cordova.*;
import android.annotation.SuppressLint;
import android.os.Bundle;
import android.webkit.WebView;
import android.webkit.WebViewClient;

public class MainActivity extends DroidGap {
      @Override
      public void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        super.loadUrl("file:///android_asset/www/index.html");
      }
} 
```

另外，当我的 index.html 中的某个 JavaScript 事件发生时，我还有另一个活动被调用。在这种情况下，`onCreate(Bundle b)`被调用：

**MyUriActivity.java**

```
import android.app.Activity;
import android.os.Bundle;

public class MyUriActivity extends Activity {
    @Override
    public void onCreate(Bundle b){
        super.onCreate(b);

        // I want to access appView here, so I can call
        // appView.loadUrl("file:///android_asset/www/index.html");
    }
} 
```

如上面的评论所示，我想在这个事件发生时重新打开 index.html 但我不知道如何访问 webview 实例。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T11:33:13.573

要在您的两个操作之间进行通信，您应该使用[Intents](http://developer.android.com/reference/android/content/Intent.html)

它们允许您将自定义数据放入消息中并将其发送到另一个 Action，如下所示：

```
Intent intent = new Intent(Intent.ACTION_SEND);
intent.setType("text/plain");
intent.putExtra(android.content.Intent.EXTRA_TEXT, "News for you!");
startActivity(intent); 
```

M. Lars Vogel 在这方面有很多很好的例子（上面的例子来自他的博客

[http://www.vogella.com/articles/AndroidIntent/article.html](http://www.vogella.com/articles/AndroidIntent/article.html)

如果我正确理解您的问题，您希望在 MyUriActivity 中发生某些事情时让 MainActivity 显示某些内容（已加载的 WebView）。您应该在 MyUriActivity 中创建一个意图，然后将其发送到 MainActivity。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-18T11:25:42.067

这可能不是最优雅的解决方案，但您应该尝试一下。

由于两者都是您的应用程序，因此在 MainActivity 中创建一个 getFile() 方法并返回所需的文件（不仅仅是 URL，您需要返回文件）。然后使用MyUriActivity的反射来访问这个getFile()方法，应该可以得到需要的文件

# javascript - 滑块形式的磁带。Safari 中的错误

> ID：15412186
> 
> 赞同：12
> 
> 时间：2013-03-14T14:34:27.743
> 
> 标签：javascript, jquery, css, safari

我以胶带的形式制作了滑块。在 Chrome 和 Mozilla 中它看起来足够好，但在 Safari 中它看起来很糟糕。也许有人可以帮助解决问题？！？提前致谢！

[jsfiddle.net/mcbgv/7/](http://jsfiddle.net/mcbgv/7/)

CSS：

```
#wrapper1 #my_scroll {z-index:5; height:480px; width:640px; position:absolute; top:-10px; left:12px;}
#wrapper1 #bloc_wrap {height:480px; width:640px; z-index:7; overflow:hidden;}
#wrapper1 #wrapper_sl {height:480px;}
#wrapper1 #wrapper_sl .block {width:150px; background:blue; border:2px solid #fff; position:absolute; margin:-40px 0 0 0; z-index:1;  height:108px; overflow:hidden; transition: all 1.2s linear ; -webkit-transition: all 1.2s linear ; -moz-transition: all 1.2s linear ; -webkit-border-radius: 15px; -moz-border-radius: 15px; zoom: 1; border-radius: 15px;  -moz-background-clip: padding; -webkit-background-clip: padding-box; background-clip: padding-box;}
#wrapper1 #wrapper_sl .block img {border:0px solid #FFF; height:108px; cursor:pointer; margin:0 0 0 -16px; -webkit-border-radius: 20px; -moz-border-radius: 20px; border-radius: 20px;}
#wrapper1 #my_scroll .main {position:relative;}
#wrapper1 #my_scroll .main div {display:none; background:green; position:absolute; z-index:5; top:74px; left:78px;}
#wrapper1 #my_scroll .main div a {display:block; position:relative; width:560px; height:350px; border:solid 1px #000000; -webkit-border-radius:10px; -moz-border-radius:10px; border-radius:10px; overflow:hidden; color:#ffffff; text-decoration:none;} 
```

jQuery：

```
var docheight = $("#my_scroll").outerHeight();
var docwidth = $(window).width();
// Slider "circular motion" Drew - magart.com.ua START
var myDiv = document.getElementById("bloc_wrap");
var ImgDiv = $("#wrapper_sl").find(".block");
var ImgLink = $("#wrapper_sl").find(".block a");
var $size_dug = 230; //radius
var $smes_x = 230;
var $smes_y = docheight - $size_dug - 17;
var $kolvo = 14; //kolichestvo blokov
var $skorost = 200; //cem bolshe tem medlennei (dilitel skorosti)
var $ugol = (2 * Math.PI / $kolvo);
var $start_pr = 0;
var $global_v = 0;

var main = $('#my_scroll').find('.main');

$(ImgLink).click(function () {
    var ImgRel = $(this).attr('rel');
    main.find('div').fadeOut(100);
    $('#my_scroll .main ' + ImgRel).fadeIn(250);
});

function sec1() {
    $global_v = $global_v + 10;
    $nowz = (($global_v + $start_pr) / $skorost) + $ugol * 2;
    for (var ink = 0, len = $kolvo; ink < len; ink++) {
        uno1 = $(ImgDiv[ink]);
        $rad1 = ((ink + 1) * $ugol + $nowz);
        $deg1 = $rad1 * 360 / (2 * Math.PI) + 270;
        trata = Math.sin(-($rad1)) * $size_dug + $smes_x;
        if (trata > 260) {
            zind = 1;
        } else {
            zind = 10;
        }
        uno1.css({
            top: Math.cos($rad1) * $size_dug + $smes_y,
            left: trata,
            zIndex: zind,
            transform: 'skewX(-' + $deg1 + 'deg) rotateX(' + $deg1 + 'deg)',
            '-moz-transform': 'skewX(-' + $deg1 + 'deg) rotateX(' + $deg1 + 'deg)',
            '-webkit-transform': 'skewX(-' + $deg1 + 'deg) rotateX(' + $deg1 + 'deg)'
        });
    };

}

// Slider "circular motion" Drew - magart.com.ua END    

sec1(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T13:18:58.910

-webkit-transform 应该适用于 Chrome 和 Safari。

您使用的是哪个版本的 Safari？

PS：要使其在 Opera 中运行，您需要使用 -o-transform

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-15T09:56:19.950

Internet Explorer - `-ms-` Firefox - `-moz-` Chrome - `-webkit` Safari - `-webkit` Opera -`-webkit`

用于`-webkit-transform`Safari

# visual-studio-2012 - googletest 集成在 CLR/CLI 编译错误 LNK2028

> ID：15412194
> 
> 赞同：0
> 
> 时间：2013-03-14T14:35:02.173
> 
> 标签：visual-studio-2012, c++-cli, googletest

我对 CLI 中的谷歌测试完全陌生。刚刚设法设置并将 google test 与 Visual Studio 2012 集成。但是，当我尝试将我的项目的头文件包含在我的 tester.h 文件中时（因为我想测试该头文件中的函数），我遇到了以下问题错误：

```
Error   2   error LNK2028: unresolved token (0A0006FB) "public: __thiscall ExpenseTracker::ExpenseTracker(void)" (??0ExpenseTracker@@$$FQAE@XZ) referenced in function "private: virtual void __thiscall enter_settings_user_login_Test::TestBody(void)" (?TestBody@enter_settings_user_login_Test@@$$FEAEXXZ)  C:\Users\Jacky\Desktop\EzXpns3\test_project\main.obj    test_project
Error   3   error LNK2019: unresolved external symbol "public: __thiscall ExpenseTracker::ExpenseTracker(void)" (??0ExpenseTracker@@$$FQAE@XZ) referenced in function "private: virtual void __thiscall enter_settings_user_login_Test::TestBody(void)" (?TestBody@enter_settings_user_login_Test@@$$FEAEXXZ)   C:\Users\Jia Wei\Desktop\EzXpns3\test_project\main.obj  test_project 
```

我试过包括依赖项 gtestd.lib、kernel32.lib、user32.lib、advapi32.lib、Ws2_32.lib

问题稍微解决了。我没有使用expenseTracker.h 和ExpenseTracker.cpp，而是将ExpenseTracker.h 的所有实现放在头文件本身中，并且所有内容都编译得很好并进行了测试运行。但是，我的整个项目都是建立在头文件和 cpp 文件上的，为了测试目的而重做所有事情不是很明智，对吧？有人可以帮忙吗？

下面附上我的头文件。

//tester.h

```
#include "gtest/gtest.h" //include to use Google Unit test's stuff
#include "C:\Users\Jacky\Desktop\EzXpns3\Source - testing\EzXpns2\ExpenseTracker.h"

using namespace std;

class ExpenseTracker;
/************************************************************************/

/* We write test cases here */

/************************************************************************/

TEST(basic_test, add_simple_route)
{
    ASSERT_EQ(1, 1);
}

TEST(enter_settings, user_login)
{
    ExpenseTracker :: ExpenseTracker();
    //loadUserInfo();
    string username = "XXX_XXX";
    string password = "12345";
    //myTracker -> loadUserInfo();
    //bool result = myTracker -> login(username, password);
    //ASSERT_EQ(true, result);
}

void runTest(int argument_count, char** argument_vars)
{
    testing::InitGoogleTest(&argument_count, argument_vars); //initialize GTest
    RUN_ALL_TESTS();
    std::getchar(); //pause the program after all the testing
} 
```

//main.cpp

```
#include "tester.h"
#include <cstdio>

using namespace System;
using namespace testing;

int main(int argument_count, char** argument_vars)
{
    //int argc;
    //char** argv;
    //runTest(argc, argv);
    //InitGoogleTest(argc, argv);   

    testing::InitGoogleTest(&argument_count, argument_vars); //initialize GTest
    RUN_ALL_TESTS();
    std::getchar();

    return 0;
} 
```

//ExpenseTracker.h，我要包含的文件

```
#ifndef _EXPENSETRACKER_H
#define _EXPENSETRACKER_H

#include <string>
#include <vector>
#include "user2.h"

using namespace std;

class ExpenseTracker
{
private:
    vector<User*> allMyUsers;

public:
    ExpenseTracker(); //empty constructor
    void addUser(User*);
    int findUser(string);
    bool login(string, string);
    void loadUserInfo();
    User* getUser(string);
    int getUserSize();
};

#endif; 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-15T10:26:54.857

您需要为构造函数提供一个实现。换句话说，你应该改变：

```
 ExpenseTracker(); //empty constructor 
```

进入：

```
ExpenseTracker() {} // empty constructor 
```

但是，由于构造函数是空的，您不妨将其完全删除！

# php - 有没有更好的方法在 wordpress 中使用循环？

> ID：15412201
> 
> 赞同：0
> 
> 时间：2013-03-14T14:35:09.727
> 
> 标签：php, wordpress

我在 wordpress 中有一个日历自定义帖子类型。我让它在我的模板中运行良好，但我知道有更好的方法来运行循环。我使用了当月（1 月、2 月、3 月等）的自定义分类法，并在页面上逐月对帖子进行排序。目前，这意味着我必须运行 12 个单独的循环来获得我想要的功能，我确信这不是正确的方法。

这是我正在使用的代码，任何帮助将不胜感激。谢谢！

```
<div class="module">
<h2>January</h2>
<?php // Annual Events Posts
$calendar = new WP_Query('post_type=calendar&month=January'); 
while($calendar->have_posts()) : $calendar->the_post(); 
?>              
<div class="grid" style="background:none">

<div class="col-1">
    <h3>
        <?php 
            the_title();
        ?>
    </h3>
    <h4>
        <?php 
            $dateValue = get_post_meta( $post->ID, 'rhc_when', true );
            if($dateValue != '') {
                echo $dateValue;
            }; 
            $timeValue = get_post_meta( $post->ID, 'rhc_time', true );
            if($timeValue != '') { ?>, <?php
                echo $timeValue;
            }
         ?>                         
    </h4>
    <?php $content = the_content(); 
        if( $content !='') {
            echo $content;
        };
    ?>
</div>
</div>
<?php 
    endwhile;
    wp_reset_postdata();
?>
<hr>
<h2>February</h2>
<?php // Annual Events Posts
    $calendar = new WP_Query('post_type=calendar&month=February');
    while($calendar->have_posts()) : $calendar->the_post(); 
?>              
<div class="grid" style="background:none"> 
    <div class="col-1">
        <h3>
            <?php 
                the_title();
            ?>
        </h3>
        <h4>
            <?php 
                $dateValue = get_post_meta( $post->ID, 'rhc_when', true );
                if($dateValue != '') {
                    echo $dateValue;
                }; 
                $timeValue = get_post_meta( $post->ID, 'rhc_time', true );
                if($timeValue != '') { ?>, <?php
                    echo $timeValue;
                }
            ?>                          
        </h4>
        <?php $content = the_content(); 
            if( $content !='') {
                echo $content;
            };
        ?>
    </div>
</div>
<?php 
    endwhile;
    wp_reset_postdata();
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T14:52:07.380

我能想到的唯一不正确的是您使用`the_content()`. 如果要在确定是否要回显之前将 Post Content 设置为变量，则需要使用 get_the_content。除此之外，一切都很好，但我会更浓缩一点：

```
<div class="module">
<?php
// Annual Events Posts
$months = array(
    'January',
    'February',
    'March',
    'April',
    'May',
    'June',
    'July',
    'August',
    'September',
    'October',
    'November',
    'December'
);
foreach($months as $month){
    $calendar = new WP_Query('post_type=calendar&month='.$month); 
    if($calendar->have_posts()) :
    ?>
    <h2><?php echo $month; ?></h2>
    <div class="grid" style="background:none">
    while($calendar->have_posts()) : $calendar->the_post(); 
    ?>
        <div class="col-1">
            <h3><?php the_title(); ?></h3>
            <h4>
            <?php 
            if($dateValue = get_post_meta( $post->ID, 'rhc_when', true ))
                echo "$dateValue, ";
            if($timeValue = get_post_meta( $post->ID, 'rhc_time', true ))
                echo $timeValue;
            ?>                         
            </h4>
            <?php
            if($content = get_the_content())
                echo $content;
            ?>
        </div>
    <?php 
    endwhile;
    ?>
    </div>
    <hr>
    <?php
    endif;
    wp_reset_postdata();
}
?>
</div> 
```

另外，感谢您使用 WP_Query 而不是 query_posts。

**编辑：**

我添加了一个条件来确定是否需要编写网格 div 和标题。不过，总的来说，您的代码非常可靠。

# mysql - MySQL：循环遍历 IN 子句中的多个字段

> ID：15412202
> 
> 赞同：1
> 
> 时间：2013-03-14T14:35:10.517
> 
> 标签：mysql, where-in

我有一个宇宙，其中有一列有 3 种类型的 id。我知道我可以在 WHERE 语句中使用 3 个单独的 OR 子句

```
WHERE isin IN(n) 
OR cusip IN(n) 
OR psedol IN(n) 
```

但是有没有更有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-27T03:40:16.357

我会建议与 spsc_tech 有点不同

```
FROM y
LEFT JOIN z ON ( z.ID = y.ID AND Z.ISIN = n)
LEFT JOIN x ON ( x.ID = y.ID AND X.CUSIP = n)
LEFT JOIN w ON ( w.ID = y.ID AND w.psedol = n) 
```

如果您将条件放在连接中的 ON 子句中，则它比在 Where 子句中要快得多。跳这将工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-16T17:14:18.657

颠倒 IN 子句的顺序：

```
WHERE (n) IN (isin, cusip, psedol) 
```

**编辑：**上述内容仅在 (n) 仅是一列时才有效，例如，如果它是“(SELECT x FROM y)”。如果它是一个列表，那么颠倒顺序是行不通的，你必须保持原样。

如果 (n) 是一个选择，另一种解决方案是将您的选择器向上移动到您的连接中。联接比 IN 子句更有效。例如，如果 n 是“SELECT a FROM z”，您可以执行以下操作：

```
FROM y
INNER JOIN z ON z.ID = y.ID
INNER JOIN x ON x.ID = y.ID AND (x.isin = z.a OR x.cusip = z.a OR x.psedol = z.a) 
```

...但这取决于您整个查询的结构，因此您必须为我提供更多信息才能更具体。

# playorm - 在 PlayFramework 2.1 中安装 PlayOrm？

> ID：15412207
> 
> 赞同：1
> 
> 时间：2013-03-14T14:35:23.097
> 
> 标签：playorm

我采取的步骤：

1.  启动了一个新的 Play 应用程序。
2.  创建了一个 lib 文件夹。
3.  复制到lib：playOrm/output/jardist/*.jar + playorm/output/libs/playorm.jar + playorm/src/resources/play2plugin/plugin2.1jar
4.  更改了 conf 并添加了 play.plugins.conf 根据：[http ://buffalosw.com/wiki/PlayFramework-2.x-support/](http://buffalosw.com/wiki/PlayFramework-2.x-support/)
5.  在这一点上，我开始玩，并得到了 google gson 的缺失类异常。我也将它添加到库中。

现在，当我运行 play 应用程序时，我得到：

> 插件 [play.CorePlugin] 无法实例化。java.lang.NoSuchMethodException: play.CorePlugin.(play.Application)

我错过了什么？

更新：将我原始帖子中的文件名从 plugin.conf 更正为 play.plugins 并添加堆栈跟踪：

```
java.lang.NoSuchMethodException: play.CorePlugin.<init>(play.Application)
   java.lang.Class.getConstructor0(Unknown Source)
   java.lang.Class.getConstructor(Unknown Source)
       play.api.WithDefaultPlugins$$anonfun$plugins$1$$anonfun$apply$9.apply(Application.scala:137)
       play.api.WithDefaultPlugins$$anonfun$plugins$1$$anonfun$apply$9.apply(Application.scala:130)
   scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike.scala:244)
   scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike.scala:244)
   ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T14:12:10.203

好的。看来 play1.x.jar 在您的类路径中。由于 CorePlugin 仅存在于 Play1.x 中。请删除它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T05:41:28.173

1.  您能否提供完整的堆栈跟踪，因为这似乎是由于 Play 而不是 Playorm 本身。
2.  正如您上面的评论所说，您创建了 plugin.conf ..这不是必需的。请看文档，我们需要/conf/play.plugins文件，内容如下

    5000:com.alvazan.play2.Play2Plugin

# magento - Magento - 在管理控制器中显示带有成功消息的叠加层

> ID：15412208
> 
> 赞同：0
> 
> 时间：2013-03-14T14:35:29.943
> 
> 标签：magento, button, controller, overlay

我在 magento 管理员中有自定义模块和按钮。在控制器中，我从 magento 获取一些信息，单击时我想在叠加层中显示这些信息。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T01:55:27.900

[http://inchoo.net/ecommerce/magento-popup-dialog/](http://inchoo.net/ecommerce/magento-popup-dialog/) - 默认magento弹出窗口

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T16:40:03.790

为了成功：

```
Mage::getSingleton('adminhtml/session')->addSuccess($successMessage); 
```

对于错误：

```
Mage::getSingleton('adminhtml/session')->addError($errorMessage); 
```

# asp.net - 处于非活动视图时的多视图调用按钮单击事件

> ID：15412210
> 
> 赞同：0
> 
> 时间：2013-03-14T14:35:40.390
> 
> 标签：asp.net

我有一个有两个视图的多视图。索引 0 处的视图是“只读”，索引 1 处的视图是编辑视图。默认情况下，设置为仅显示视图：

```
<asp:MultiView ID="mv" runat="server" ActiveViewIndex="0"> 
```

我单击一个按钮，在视图 1 中输入一些信息，然后单击保存，然后使用以下代码进入视图 0：

```
protected void SaveLinkButton_Click(object sender, EventArgs e)
{
   if (Page.IsValid)
   {
      bool success = Save();

      if (success)
      {
         LoadViewMode();
         mv.ActiveViewIndex = 0;
      }                    
   }
} 
```

现在单击保存按钮后，当我处于只读视图中时。如果我刷新按钮，它会再次调用保存函数。我不知道为什么？

请提出解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:41:26.687

当您刷新页面（不是按钮）时，返回正在查看的页面的最后一个请求将重新提交给服务器。因此，服务器再次执行相同的代码。

# mysql - MySQL查询位置而不使用空间

> ID：15412213
> 
> 赞同：0
> 
> 时间：2013-03-14T14:35:43.707
> 
> 标签：mysql, optimization, query-optimization

我有这张桌子：

```
activity - activity_id - (INT) PRIMARY, 
            item_id (INT),
            user_id (INT)
            lat (FLOAT), 
            lng (FLOAT), 
            created_at (DATETIME) 
```

我想运行以下查询：

```
SELECT item_id, count(distinct user_id) as c_c
FROM activity
WHERE (lat BETWEEN X and X and lng BETWEEN X and X)
and created_at >= DATE(NOW(), INTERVAL 15 DAY)
GROUP by item_id
ORDER by c_c desc
LIMIT 10 
```

我以为我对以下字段做了索引：

```
lat,
lng,
created_at,
bid 
```

那 - 它会运行得非常快，但它仍然运行缓慢。这里的最佳索引是多少？我是否在其中包含了 user_id？

任何建议将不胜感激。

更新：

这是解释：

```
+----+-------------+----------+-------+-----------------------------------------+---------+---------+------+-------+----------------------------------------------+
| id | select_type |  table   | type  |              possible_keys              |   key   | key_len | ref  | rows  |                    Extra                     |
+----+-------------+----------+-------+-----------------------------------------+---------+---------+------+-------+----------------------------------------------+
|  1 | SIMPLE      | activity | index | lat,created_lat_lng,created_at,lat_user | item_id |       4 | NULL | 51510 | Using where; Using temporary; Using filesort |
+----+-------------+----------+-------+-----------------------------------------+---------+---------+------+-------+----------------------------------------------+ 
```

表上的索引：

```
+-----------------+----------------------+
|      Name       |       Columns        |
+-----------------+----------------------+
| lat             | lat, lng             |
| created_lat_lng | lat, lng, created_at |
| created_at      | created_at           |
| lat_user        | lat,lng,user_id,item |
| item_id         | item_id              |
+-----------------+----------------------+ 
```

# android - Android 在 ListAdapter 中设置视图可见性

> ID：15412214
> 
> 赞同：3
> 
> 时间：2013-03-14T14:35:45.817
> 
> 标签：android, list, visibility

我有带有arrayadapter的listview。我希望在单击列表项内的按钮时，该项目（而不是其他项目）中的特定视图可见或不可见。

这是我在适配器 getView() 方法中所做的代码：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {

    if (convertView == null) {

        convertView = vi.inflate(layoutResourceId, null, false);
        holder = new Holder();
        holder.setShare((ImageView) convertView.findViewById(R.id.share));
        holder.setShareButtons((LinearLayout)convertView.findViewById(R.id.shareButtons));
        convertView.setTag(holder);

    }
    holder = (Holder) convertView.getTag();

    holder.getShare().setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {

            if(holder.getShareButtons().getVisibility()==View.GONE){
                holder.getShareButtons().setVisibility(View.VISIBLE);

            }
            else{
                holder.getShareButtons().setVisibility(View.GONE);

            }

        }
    });

    return convertView;
} 
```

但我得到的只是奇怪的行为。onClickListener 和 setVisibilty 方法被正确调用，但我的视图有时会变得可见，有时不可见，这取决于列表滚动位置。

我做错了什么，我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T14:40:04.007

当滚动列表视图时，子视图被重用并重新分配到新位置。这是为了提高效率，因为创建新视图的成本很高。然而，它给程序员带来了负担——在每次 getView 调用时，您必须完全重置视图的每个值。因此，如果在子项中按下按钮会更改其成员之一的可见性，您需要记住每个数字位置的可见性应该是什么，并且在 getView 中您必须为每个元素设置适当的可见性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T14:40:02.663

出于性能原因，持有者旨在保留对内部视图的引用。**它与列表中显示的数据**无关- 仅与列表中的“单元格”有关。您应该根据您的数据确定内容是否可见。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T14:51:06.453

这是我的自定义适配器的片段，它将为您提供有关如何对适配器本身内的项目单击做出反应的示例：

功能：每一行代表一个可见或不可见的对象。不管看不看，形象都不一样。单击一个项目可以打开/关闭图像。

```
public class Exampledapter extends ArrayAdapter<CustomObject> {

    private Context mContext;
    private int mLayoutResourceId;
    private ArrayList<CustomObject> mData = null;

    public ExampleAdapter(Context context, int layoutResourceId, ArrayList<CustomObject> data, DataSource datasource) {
        super(context, layoutResourceId, data);
        this.mLayoutResourceId = layoutResourceId;
        this.mContext = context;
        this.mData = data;
    }

    @Override
    public View getView(final int position, View convertView, ViewGroup parent) {
        View lRow = convertView;
        ViewHolder holder = null;

        if (lRow == null) {
            LayoutInflater lInflater = ((Activity) mContext).getLayoutInflater();
            lRow = lInflater.inflate(mLayoutResourceId, parent, false);

            holder = new ViewHolder();
            holder.txtTitle = (TextView) lRow.findViewById(R.id.text_);
            holder.imageSeen = (ImageView) lRow.findViewById(R.id.image_toggle);

            lRow.setTag(holder);
        } else {
            holder = (ViewHolder) lRow.getTag();
        }

        holder.imageSeen.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                onListItemClick(position);
            }
        });

        if (mData.get(position).getSeen() == 1) {
            holder.imageSeen.setImageBitmap(mImageSeen);
        } else {
            holder.imageSeen.setImageBitmap(mImageUnseen);
        }

        holder.txtTitle.setText(mData.get(position).getTitle());
        return lRow;
    }

    protected void onListItemClick(int position) {
        if (mData.get(position).isSeen()) {       
            mData.get(position).setSeen(0);
        } else {  
            mData.get(position).setSeen(1);
        }
        notifyDataSetChanged();
    }

    class ViewHolder {
        TextView txtTitle;
        ImageView imageSeen;
    }
} 
```

# php - 如何通过 ajax 分别验证一个表单中的两个模型

> ID：15412215
> 
> 赞同：0
> 
> 时间：2013-03-14T14:35:47.447
> 
> 标签：php, yii, validation

我需要实现以下工作流程。

1.  用户输入 url
2.  用户单击“验证”按钮
    *   url 通过 ajax 进行验证（不为空且不存在）。
    *   如果 url 有效，则应从给定站点自动解析一些信息，并在同一页面上填写一些表单字段。
    *   这些表单字段也需要通过 ajax 进行验证（某些字段是必需的）。
3.  如果填写了所有必填字段，用户可以点击保存按钮。否则，系统会提示他填写所有剩余的必填字段。

实现这一目标的最佳方法是什么？url 字段和表单字段是一种形式的两个不同模型，为了保存我需要两者。

我已经实现了大部分工作流程，但我不确定这是否是正确的方法。我为我的表单启用了 ajax 验证。url 字段已正确验证，但其他字段未触发验证。也许是因为这些文件被打包在一个引导活动的形式中？

单击“验证”按钮后，我触发了一个自己的 ajax 请求，在这里我手动验证了 url。如果它有效，我会解析页面并返回所有找到的信息，否则我会返回错误。成功方法比显示错误或填写其他表单字段。有没有办法在发送我自己的 ajax 请求之前以编程方式触发 yii ajax 验证。

现在我被其他表单字段的 ajax 验证所困扰。提交、验证和保存成功效果很好。但我想要验证而不提交。我是否必须实现自己的 ajax 请求和响应处理，或者有没有办法使用一些 yii 内置功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T14:39:40.930

假设您有一个包含一些字段的表单：

*   禁用保存按钮。
*   有一个监听器来监听字段的变化。
*   具有可以验证每个字段并使其返回布尔值的独特函数。
*   如果所有验证的布尔值都为真，则启用保存按钮。

这也是一个很好的做法

*   有一个可以加载消息的 div，以便用户知道他的错误/无效的填写。

请注意

*   除非您在后端执行一些数据库功能，否则您不需要 Ajax。
*   如果需要，您可以使用验证按钮而不是侦听器。

我误会你了吗？

# asp.net - 将 Windows 安全用户名和密码嵌入到 aspx 页面

> ID：15412219
> 
> 赞同：0
> 
> 时间：2013-03-14T14:35:57.113
> 
> 标签：asp.net, html, xml

我正在尝试在我的 asp.net 应用程序中放置一个 IP 摄像头图像的链接。

除了一个小问题外，一切正常。

问题是我仍然每次都被要求从 Windows 安全中输入用户名和密码

代码如下：

```
 </form>
    <p>
        <img align="middle" alt="PC1" src="http://xxx.xxx.xxx.xxx/jpg/image.jpg" 
            id="reloader" onload="setTimeout('document.getElementById(\'reloader\').src=\'http://xxx.xxx.xxx.xxx/jpg/image.jpg?/'+new Date().getMilliseconds()', 500)"
            style="z-index: 1; left: 506px; top: 169px; position: absolute" /></p>
</body> 
```

我试过把

```
 userid:password@ 
```

在 IP 地址之前，但这使得该页面完全可见.. 任何帮助都是值得的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:39:44.920

允许 Internet Explorer 使用像这样在 URL 中传递的凭据的此功能在 5 多年前已被删除。它被视为一个安全漏洞。

这是描述删除此功能的知识库文章：http: [//support.microsoft.com/kb/834489](http://support.microsoft.com/kb/834489)

**更新**

有几种方法可以解决这个问题：

1.  关闭 IP 摄像机上的身份验证。
2.  如果您的 .Net 服务器可以通过网络访问您的 IP 摄像头，您的 .Net 应用程序可以将请求代理到摄像头并为您处理凭据。

# node.js - NodeJS - 需要模块返回空数组

> ID：15412222
> 
> 赞同：6
> 
> 时间：2013-03-14T14:36:01.817
> 
> 标签：node.js

编写我们可以编写的最简单的模块，我们写入 hello.js：

```
var hello = function(){
  console.log('hello');
};

exports = hello; \\ Doesn't work on Amazon EC2 Ubuntu Instance nor Windows Powershell 
```

我运行 Node 并需要模块

```
var hello = require('./hello');
hello; 
```

`{}`当我应该得到时，会返回一个空数组`[Function]`。

我尝试用 替换`exports`，`module.exports`但这在我的 Windows Powershell 上不起作用。它确实可以在我的 Amazon EC2 Ubuntu 实例上运行，那么为什么不起作用`exports`呢？API 有变化吗？如果这些都不起作用，Powershell 可能会发生什么？

我知道 Windows 不是最理想的开发环境，但我无法理解这么简单的事故。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-14T15:38:02.383

**编辑**

使用 ES6 导出会更好一些

```
export const hello = function(){
  console.log('hello');
}; 
```

导入看起来像

```
import {hello} from './file'; 
```

* * *

**原始答案**

你会想要使用`module.exports`

```
var hello = function(){
  console.log('hello');
};

module.exports = hello; 
```

如果只是导出一件事，我通常会在一行中完成所有操作

```
var hello = module.exports = function() {
  console.log('hello');
}; 
```

* * *

## 附加功能

如果您**使用命名函数**，如果您的代码中发生错误，您的堆栈跟踪将看起来更好。这是**我**写它的方式

```
// use a named function               ↓
var hello = module.exports = function hello() {
  console.log("hello");
}; 
```

现在`anonymous`，它不会在堆栈跟踪中显示函数名称，而是向您显示`hello`. 这使得查找错误变得更加容易。

我在任何地方都使用这种模式，以便我可以轻松地调试代码。这是另一个例子

```
// event listeners          ↓
mystream.on("end", function onEnd() {
  console.log("mystream ended");
};

// callbacks                              ↓
Pokemon.where({name: "Metapod"}, function pokemonWhere(err, result) {
  // do stuff
}); 
```

* * *

如果要**导出多个东西**，可以`exports`直接使用，但是必须提供一个`key`

```
// lib/foobar.js
exports.foo = function foo() {
  console.log("hello foo!");
};

exports.bar = function bar() {
  console.log("hello bar!");
}; 
```

现在，当您使用该文件时

```
var foobar = require("./lib/foobar");

foobar.foo(); // hello foo!
foobar.bar(); // hello bar! 
```

* * *

作为最后的奖励，我将向您展示如何`foobar.js`通过**导出单个对象**来重写它但仍然获得相同的行为

```
// lib/foobar.js
module.exports = {
  foo: function foo() {
    console.log("hello foo!");
  },
  bar: function bar() {
    console.log("hello bar!");
  }
};

// works the same as before! 
```

这允许您以**最适合该特定模块的方式编写模块**。耶！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-14T15:42:28.990

`exports`不起作用的原因是因为引用冲突。每个文件中的顶部变量是`module`具有属性的`module.exports`。加载模块时，会在后台创建**新变量。**会发生这样的事情：

```
var exports = module.exports; 
```

显然`exports`是参考`module.exports`，但是做

```
exports = function(){}; 
```

强制`exports`变量指向函数对象——它不会改变`module.exports`。就像这样做：

```
var TEST = { foo: 1 };
var foo = TEST.foo;
foo = "bar";
console.log(TEST.foo);
// 1 
```

通常的做法是：

```
module.exports = exports = function() { ... }; 
```

我不知道为什么它在 Windows Powershell 下不起作用。老实说，我什至不确定那是什么。:) 你不能只使用本机命令提示符吗？

# mysql - 在 Mysql ON 子句中用 AND 组合条件

> ID：15412224
> 
> 赞同：0
> 
> 时间：2013-03-14T14:36:10.687
> 
> 标签：mysql, sql, database

我有以下查询，用于根据 software_id 和级别过滤行。我已将条件放在 ON 条款中，因为我仍然希望返回行，而 JobadvertsSoftware 表中没有相应的行。

```
SELECT `Jobadvert`.`id` FROM `jobadverts` AS `Jobadvert` 

LEFT JOIN `users` AS `User` ON (`Jobadvert`.`user_id` = `User`.`id`) 

LEFT JOIN `jobadverts_softwares` AS `JobadvertsSoftware_0` ON
(`Jobadvert`.`id` = 'JobadvertsSoftware_0.jobadvert_id' AND 
(`JobadvertsSoftware_0`.`software_id` = '32' AND 
`JobadvertsSoftware_0`.`level` IN ('1', 4))) 

WHERE `Jobadvert`.`active` = 1 AND `User`.`premium` = '1' AND 
Jobadvert`.`department_id` = (5) 

GROUP BY `Jobadvert`.`id` 
```

问题是它还返回 JobadvertsSoftware-rows 其中 level 是 2 同样，如果我把它放在 WHERE 子句中，它将过滤掉不应该做的没有 JobadvertsSoftware 的行。如何告诉 MySQL 返回 Jobadvert 的所有行，其中给定的 software_id 和级别匹配或为 NULL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:51:22.420

尝试这个：

```
SELECT `Jobadvert`.`id`, `JobadvertsSoftware_0`.`level` 
FROM `jobadverts` AS `Jobadvert` 

LEFT JOIN `users` AS `User` ON (`Jobadvert`.`user_id` = `User`.`id`) 

INNER JOIN `jobadverts_softwares` AS `JobadvertsSoftware_0` ON
(`Jobadvert`.`id` = 'JobadvertsSoftware_0.jobadvert_id' AND 
(`JobadvertsSoftware_0`.`software_id` = '32' AND 
`JobadvertsSoftware_0`.`level` IN ('1', 4))) 

WHERE `Jobadvert`.`active` = 1 AND `User`.`premium` = '1' AND 
Jobadvert`.`department_id` = (5) 

GROUP BY `Jobadvert`.`id` 
```

萨鲁多斯！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T15:02:30.757

假设连接不需要 ON 子句中的级别参数，您可以在 Software 表上执行嵌套 SELECT 以首先清除不需要的数据：

```
SELECT * FROM jobadverts_softwares
WHERE 
   (`software_id` = 32 OR `software_id` IS NULL) --Select all software_id that are 32 or null
AND
   `level` IN (1, 4) 
```

然后，您可以将其作为嵌套语句合并到您的主 SQL 查询中，这样您只需加入在 LEFT JOIN 中过滤的数据，但保留您需要的任何空值：

```
SELECT `Jobadvert`.`id` 
FROM `jobadverts` AS `Jobadvert` 

LEFT JOIN `users` AS `User`
ON `Jobadvert`.`user_id` = `User`.`id`

LEFT JOIN 
(   --Software Subquery
    SELECT `jobadvert_id`, `level` FROM jobadverts_softwares
    WHERE 
       (`software_id` = 32 OR `software_id` IS NULL) --Select all software_id that are 32 or null
    AND
       `level` IN (1, 4)
) AS `software_subquery`

ON `Jobadvert`.`id` = `software_subquery`.`jobadvert_id`

WHERE
    `Jobadvert`.`active` = 1
AND 
    `User`.`premium` = '1'
AND 
    `Jobadvert`.`department_id` = 5 

ORDER BY `Jobadvert`.`id` --Changed GROUP BY to ORDER BY as not needed 
```

这是未经测试的，但请尝试一下，看看这是否会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T14:53:26.637

试试这个（如果某些字段在字符串上是数字有点不清楚，可能会更正）：

```
SELECT distinct(`Jobadvert`.`id`) FROM `jobadverts` AS `Jobadvert`  
LEFT JOIN `users` AS `User` ON (`Jobadvert`.`user_id` = `User`.`id`) 
LEFT JOIN `jobadverts_softwares` AS `JobadvertsSoftware_0` 
ON `Jobadvert`.`id` =     `JobadvertsSoftware_0.jobadvert_id`
WHERE 
`Jobadvert`.`active` = 1 
AND `User`.`premium` = '1' 
AND Jobadvert`.`department_id` = (5) 
AND JobadvertsSoftware_0`.`software_id` = '32' 
AND (`JobadvertsSoftware_0`.`level` IN (1, 4) OR `JobadvertsSoftware_0`.`level` is NULL) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-14T15:00:25.153

尝试这个：

```
SELECT j.id 
FROM jobadverts j 
LEFT JOIN User u ON (j.user_id = u.id) 
LEFT JOIN jobadverts_softwares AS js ON
(j.id = js.jobadvert_id)
WHERE j.active = 1 
  AND u.premium = '1' 
  AND j.department_id = (5) 
  AND js.software_id` = '32' 
  AND js.level IN ('1', 4))) 
```

除非以某种方式对数据求和，否则您不需要 GROUP BY。

# jquery - 访问控制允许来源错误

> ID：15412226
> 
> 赞同：3
> 
> 时间：2013-03-14T14:36:18.803
> 
> 标签：jquery, ajax, json, playframework

我正在使用以下脚本 -

```
<!DOCTYPE html>
<html>
<head>
<script src="jquery-1.9.1.min.js"></script>
<script>
function postForm() {

    $.ajax({
            type: 'POST',
            url: 'http://10.0.0.8:9000/demo',
            data: {"name" : "test"},
            contentType: "application/json; charset=utf-8",
            dataType: 'json',
        })
    }

</script>
</head>
<body>
    <form id="ajaxForm" onsubmit="postForm(); return false; "  method="post"> 
        <input id="test" type="text" name="name" value="Hello JSON" /> 
        <input type="submit" value="Submit JSON" /> 
    </form>

</body>
</html> 
```

我试图访问的计算机正在运行播放框架。我收到以下错误：

选项`http://10.0.0.8:9000/demo`404（未找到）jquery-1.9.1.min.js:5 XMLHttpRequest 无法加载`http://10.0.0.8:9000/demo`。Access-Control-Allow- Origin`http://localhost:8080`不允许 Origin。

我这两天都被难住了，谁能帮帮我？

提前谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-14T14:38:05.330

问题是您正在尝试进行跨域调用（从`http://localhost:8080`to `http://localhost:9000`）。[Same Origin Policy](http://en.wikipedia.org/wiki/Same_origin_policy)不允许这样做，因此浏览器正在尝试使用[跨域资源共享](http://www.w3.org/TR/access-control/)来询问服务器是否可以允许跨域调用。（这就是`OPTIONS`您看到的 HTTP 请求。）由于服务器没有回复`OPTIONS`带有允许调用的标头的请求，因此出于安全原因，浏览器会拒绝该请求。

SOP 适用于所有真正的“ajax”调用（例如，通过`XMLHttpRequest`）。您可以：

1.  更新服务器以实现对`OPTIONS`请求的响应，将标头传回以允许调用（这将使其在[大多数现代浏览器](http://caniuse.com/#feat=cors)上工作），或者

2.  向同一个端口发出请求（我猜你不这样做是有原因的），所以请求来自同一个来源并且 SOP 不适用，或者

3.  切换到使用`JSON-P`. 但是`JSON-P`不适合表单提交，因为它是`GET`, 并且`GET`操作意味着是[idempotent](https://stackoverflow.com/questions/1077412/what-is-an-idempotent-operation)，而大多数表单提交不是。因此，除非这恰好是一个幂等表单提交（例如，搜索），否则使用 JSON-P 充其量只是一个 hack。

# java - MATLAB java类

> ID：15412232
> 
> 赞同：1
> 
> 时间：2013-03-14T14:36:33.587
> 
> 标签：java, matlab, interface

我在 MATLAB 中使用 java 包时遇到了困难

首先，我将我的 .jar 添加到动态路径中：

```
filename = fullfile(pwd,'Compiled','SpectrometerInterface.jar');
ls(filename)

javaaddpath(filename); 
```

`ls`返回`SpectrometerInterface.jar`确认文件存在，并`javaclasspath`确认确实已添加。

然后当我请求一个对象时，使用

```
obj = javaObject('com.jellymatter.spectrometerinterface.UDPSpectrometer'); 
```

或者

```
obj = com.jellymatter.spectrometerinterface.UDPSpectrometer() 
```

它说找不到课程。它肯定在.jar中的正确目录中，我的类的简化版本如下

```
package com.jellymatter.spectrometerinterface;

public class UDPSpectrometer {
    private UDPInterface inter = null;

    public UDPSpectrometer(){
        /* Nothing here */
    }

    public void connect(String addr, int p1, int p2) throws CommunicationException{
        ...
    }

    public double[] get() throws CommunicationException, SpectrometerNotCalibratedException {
        ...
    }
} 
```

有什么建议么？

**编辑：诊断**

MATLAB 的 Java 虚拟机为已编译的 java (JDK 1.7) 降低了版本 (JRE 1.5)。

**编辑：解决方案**

我通过使用 JDK 1.5 编译解决了这个问题，但也可以在 MATLAB 中升级 JVM。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:19:14.857

请看一下[这个](http://matlab.izmiran.ru/help/techdoc/matlab_external/ch05mat5.html)并设置你的classpath.txt

# java - 无法连接 Active Directory 以重置密码

> ID：15412233
> 
> 赞同：0
> 
> 时间：2013-03-14T14:36:34.687
> 
> 标签：java, ssl, active-directory, ssl-certificate

我对这个领域完全陌生，在java方面也没有太多经验。我被分配了这项任务，我可以以管理员身份以简单模式连接并检索信息，但无法重置密码。我在许多网站上发现我必须为此使用 ssl，但是当我得到一个

“简单绑定失败”

错误我在下面发布了我所做的代码以及我注释掉的代码（我之前尝试过）。请帮忙。我无法从我收到的任何来源解决问题。我使用从服务器复制到我的密钥库的证书。这是使用它的正确方法吗？如果我删除 ssl 部分

```
 env.put(Context.SECURITY_PROTOCOL,"ssl"); 
```

我收到握手异常

```
Problem with TLS: javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path validation failed: java.security.cert.CertPathValidatorException: signature check failed

public class ActiveDirectory {
private DirContext ctx;

public boolean connect(String username,String password){
    Hashtable<String, String> env = new Hashtable<String, String>();
//      Properties env=new Properties();
    env.put(Context.SECURITY_PROTOCOL,"ssl");
    env.put(Context.INITIAL_CONTEXT_FACTORY,
            "com.sun.jndi.ldap.LdapCtxFactory");
    env.put(Context.SECURITY_AUTHENTICATION, "simple");
    env.put(Context.PROVIDER_URL, "ldap://192.168.1.199:389");
    env.put(Context.REFERRAL, "follow");

    // The value of Context.SECURITY_PRINCIPAL must be the logon username
    // with the domain name
    env.put(Context.SECURITY_PRINCIPAL, username+"@xxxx.net");

    // The value of the Context.SECURITY_CREDENTIALS should be the user's
    // password
    env.put(Context.SECURITY_CREDENTIALS, password);

    try {
        // Authenticate the logon user
        ctx = new InitialLdapContext(env,null);
        return true;
    }catch(NamingException e){
        System.out.println("Error in connecting : " + e.getMessage());
        return false;
    }

}

public boolean changePasswordAdmin(String userName,String newPassword){
    try {

        //set password is a ldap modfy operation
        //Secure the session with TLS

        StartTlsResponse tls = (StartTlsResponse)((LdapContext) ctx).extendedOperation(new StartTlsRequest());
        tls.negotiate();

        //set password is a ldap modfy operation
        ModificationItem[] mods = new ModificationItem[1];

        //Replace the "unicdodePwd" attribute with a new value
        //Password must be both Unicode and a quoted string
        String newQuotedPassword = "\"" + newPassword + "\"";
        byte[] newUnicodePassword = newQuotedPassword.getBytes("UTF-16LE");

        mods[0] = new ModificationItem(DirContext.REPLACE_ATTRIBUTE, new BasicAttribute("unicodePwd", newUnicodePassword));

        // Perform the update
        ctx.modifyAttributes(userName, mods);

        System.out.println("Reset Password for: " + userName);
        tls.close();
        ctx.close();
        return true;
    } 
    catch (NamingException e) {
        System.out.println("Problem resetting password: " + e);
    }
    catch (UnsupportedEncodingException e) {
        System.out.println("Problem encoding password: " + e);
    }
    catch (IOException e) {
        System.out.println("Problem with TLS: " + e);
    }
    return false;
}

public static void main(String args[]) throws NamingException {
    Security.addProvider(new com.sun.net.ssl.internal.ssl.Provider()); 
    // the keystore that holds trusted root certificates 
    System.setProperty("javax.net.ssl.trustStore", "C:\\keystore.jks"); 
    System.setProperty("javax.net.ssl.trustStorePassword", "****"); 
    System.setProperty("javax.net.ssl.keyStore", "C:\\keystore.jks"); 
    System.setProperty("javax.net.ssl.keyStorePassword", "****"); 

    ActiveDirectory d= new ActiveDirectory();
    d.connect("Administrator", "Group&Team2");
    System.out.println(d.fetchData("MG"));
    System.out.println(d.changePasswordAdmin("CN=Manager MG. Manager,OU=Manager,DC=xxxxx,DC=net", "Abcd@10"));
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:42:50.970

您的活动目录没有有效的证书。

这可能是因为根证书未在 Java 中导入。

[这](http://www.martin-probst.com/blog/2008/03/14/installing-importing-a-root-certificate-in-java/)是一个如何将证书导入java的小教程。

# ios - 从 FBLoginView 调用本机 iOS Facebook 应用程序时显示空白画布

> ID：15412234
> 
> 赞同：3
> 
> 时间：2013-03-14T14:36:34.733
> 
> 标签：ios, facebook, ios6

环境：

*   iOS 6.1.2
*   脸书 SDK 3.2
*   Facebook 应用程序版本 5.5（截至本帖为当前版本）
*   操作系统级别（本机）Facebook 连接**未配置**

问题：

我们正在使用 FBLoginView 来允许用户与 Facebook 连接。（[https://developers.facebook.com/docs/reference/ios/3.0/class/FBLoginView/](https://developers.facebook.com/docs/reference/ios/3.0/class/FBLoginView/)）。

预期的流程是，在按下 FB 登录按钮时，iOS 切换到本机 Facebook 应用程序并请求用户许可。

开关工作正常，本机 Facebook 应用程序切换到前台，但我们看到的只是带有取消按钮的蓝色导航栏和一个完全空的白色画布。

如果我们拖动画布，我们确实会看到“拉动刷新”动画，但没有显示任何内容。

这是目前坏了吗？你看到这些吗？或者它对你有用吗？

我们三重检查了“Facebook 上的管道应用”的 App ID 和配置是否已正确设置。

# php - PHP-无法从数据库下载.pdf文件，文件内容存储在mysql数据库中

> ID：15412240
> 
> 赞同：4
> 
> 时间：2013-03-14T14:36:50.563
> 
> 标签：php, mysql, pdf

我已经在 php 中编写了一个代码，它将回显一个 pdf 文件。每当我试图回显该 pdf 时，浏览器页面将变为灰色，并且出现左下角的加载图标，之后它无法显示那个pdf文件。

我可以向您保证，从数据库中获取数据的代码是完美的。没有错误或错误。在获取数据后，我使用以下标头来回显该文件。我不确定这些标头。

```
$mimetype = 'application/pdf';
$disposition = 'attachment';
header('Content-type: $mimetype');
header('Content-Disposition: inline; filename="$question"');
header('Content-Transfer-Encoding: binary');
header('Content-length: ' . strlen($question));
header('Accept-Ranges: bytes');
echo "$question"; 
```

注意：我在 content-decomposition 中使用了 .pdf 扩展名。但这对我来说没有什么成果。还使用了 readfile() 函数，它对我也没有帮助。谁能告诉我那里出了什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T14:42:34.257

主要原因`page is changing into gray colors`是浏览器无法正确检测内容类型。

试试这个：

```
header("Content-type: $mimetype");
header('Content-Disposition: inline; filename="'.$question.'"'); // Filename should be there, not the content 
```

代替 ：

```
header('Content-type: $mimetype');
header('Content-Disposition: inline; filename="$question"'); 
```

您的引号似乎无效，因此未正确指定内容类型。

**编辑**

为了清楚起见，我们假设这`$question`是二进制 PDF 内容。
这就是您的代码应该是什么：

```
header('Content-type: application/pdf');
header('Content-Disposition: inline; filename=anything.pdf');
header('Content-Transfer-Encoding: binary');
echo $question; 
```

**错误解释**

让我们讨论您的原始代码和您的错误。

```
$mimetype = 'application/pdf';
$disposition = 'attachment';

// First error: you have single quotes here. So output is 'Content-type: $mimetype' instead of the 'Content-type: application/pdf'
header('Content-type: $mimetype');

// Second error. Quotes again. Additionally, $question is CONTENT of your PDF, why is it here?
header('Content-Disposition: inline; filename="$question"');

header('Content-Transfer-Encoding: binary');

// Also bad: strlen() for binary content? What for?
header('Content-length: ' . strlen($question));

header('Accept-Ranges: bytes');
echo "$question"; 
```

**再编辑一次**

> 我有另一个查询...我想将文件名更改为 $year.pdf ..$ year 可能具有 2007 之类的值..我该怎么做？？？

试试这个 ：

```
$year = '2013'; // Assign value
header('Content-Disposition: inline; filename='.$year.'.pdf'); 
```

代替：

```
header('Content-Disposition: inline; filename=anything.pdf'); 
```

# matlab - 在 for 循环 MATLAB 中的每次迭代中更改变量名称

> ID：15412241
> 
> 赞同：0
> 
> 时间：2013-03-14T14:36:51.480
> 
> 标签：matlab, for-loop

我有一个大数组`P`，它在每次迭代中都会改变大小和值。我需要能够更改输出数组的标题以匹配给定的迭代，即对于 bin 1.4，我希望输出为 p1.4 或 p14。

任何人都可以帮忙吗？

```
for bin = 1:0.1:2;
    rows = find(DAT(:,27) > bin);
    p{bin} = DAT(rows,:);
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T14:49:44.663

如果我理解正确，代码是

```
for bin = 1:0.1:2;
    rows = find(DAT(:,27) > bin);
    current_p = DAT(rows,:);
    eval(sprintf('p%0.f=current_p;', bin * 10));
end 
```

但是你为什么需要这个？考虑使用更智能的容器，例如 containers.Map：

```
p = containers.Map('KeyType', 'double', 'ValueType', 'double')    
for bin = 1:0.1:2
     rows = find(DAT(:,27) > bin);
     p(bin) = DAT(rows,:);
end
disp(p(1.2)) 
```

可能更方便。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T14:43:54.207

怎么样

```
bins = 1:0.1:2;
for ii = 1: numel(bins)
    bin = bins(ii);
    rows = find( DAT(:,27) > bin );
    p{ii} = DAT(rows,:);
end 
```

# ruby-on-rails - 如何在视图中显示来自哈希的特定键值对？

> ID：15412242
> 
> 赞同：1
> 
> 时间：2013-03-14T14:36:57.623
> 
> 标签：ruby-on-rails, ruby, view, hash, controller

我的控制器中有一个哈希值，视图从中获取数据以进行显示。在我看过的教程中，我学习了如何显示哈希中的每个键、值对……但是如何只显示我想要的键、值对呢？

```
 creating the hash in the controller
    @app = {'title' => title, 'description' => description,
            'active' => active, 'featured'=> featured,
            'partner'=>partner
            }

    view: this displays each of the key,value pairs
    <% @app.each do |key, value| %>
        <li><%= "#{key}: #{value}" %>
    <% end %>

    tried this in the view just to display title, but isn't working
    <% @app.select do |ind_app| %>
        <strong><%= ind_app["title"] %>
    <% end %> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T14:39:12.693

如果要显示标题，只需询问标题！无需循环，您可以像这样直接访问哈希的所有值：

```
<strong><%= @app['title'] %></strong> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T14:39:10.220

您可以尝试先获得您想要的配对。尝试以下

```
<% @app.slice('title', 'active').each do |key, value| %>
    <li><%= "#{key}: #{value}" %>
<% end %> 
```

这只会显示哈希的标题和活动部分

# android - 更多视图是否意味着 ViewGroup 中的性能更差？

> ID：15412246
> 
> 赞同：2
> 
> 时间：2013-03-14T14:37:02.723
> 
> 标签：android, performance, viewgroup

我的应用程序中有一个 ViewGroup 库，每个子视图都与父视图一样大。这意味着父级一次只能显示一个子视图。但是，在屏幕之外，可能还有 10 或 20 个其他子视图仍在此视图组中 - 它们只是在可见矩形之外，但未设置为不可见。

这些视图是否会恶化视图组的性能（在绘制、触摸事件或某事时）？更多的浏览量是否意味着更差的性能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T14:56:50.507

> 更多的浏览量是否意味着更少的性能？

是的，就像您在浏览器中打开的标签越多意味着浏览网页的体验越慢一样。没有硬性规则规定 10 个 View 太多甚至 50 个，每个 View 消耗不同数量的资源，每个设备在减速之前处理不同的容量。但是，如果您通过采用极简设计实践反应过度，您可能会产生糟糕的用户体验。（想象一下回到只使用浏览器或任何其他程序中的一个选项卡......）

所以诀窍是在功能和响应能力之间找到一个快乐的媒介。

* * *

Android 的[DDMS](https://developer.android.com/tools/debugging/ddms.html)工具将帮助您了解您的应用程序消耗了多少内存以及它的响应速度。这是确定您是否有空间添加更多“花里胡哨”或是否应该“减脂”的最佳方法。

# c++ - 如何为模板的成员类型重载自由函数

> ID：15412248
> 
> 赞同：5
> 
> 时间：2013-03-14T14:37:06.567
> 
> 标签：c++, templates, overloading, c++03

我有一个定义一些成员类型的模板类。它类似于基于它自己的模板参数`std::map`定义它的方式，但在我的情况下，类型更复杂，所以它被定义为嵌套类。`value_type`

现在为了调试，我想`operator<<`为该类型定义。但是编译器告诉我它不能推导出外部模板的模板参数。

我的真实代码不像下面的例子那样做作，但是这个做作的例子演示了我尝试过的方法以及它是如何失败的：

```
#include <iostream>

template <typename Value> class Outer;

template <typename Value>
std::ostream &operator<<(std::ostream &, const typename Outer<Value>::Inner &);

template <typename Value>
class Outer {
  public:
    struct Inner {
    Value x;
    };

    void PrintSomething(Value v) {
    // the real program does something useful with the inner class, of course
    Inner inner = { v };
    std::cout << "Inner = " << inner << std::endl; // <---- THIS SAYS IT CAN'T FIND operator<<
    };
};

template <typename Value>
std::ostream &operator<<(std::ostream &s, const typename Outer<Value>::Inner &v) {
    return s << v.x;
}

int main() {
    Outer<int> o;
    o.PrintSomething(42);
    return 0;
} 
```

这是重现问题的完整示例。编译器（我已经尝试了其中的 3 个）说没有重载`operator<<`需要 type 的第二个参数`Outer<int>::Inner`。当我用没有其他重载的不同函数尝试相同的事情时，它反而说`C2783: could not deduce template argument for 'identifier'`，gcc 和 clang 一直说没有采用第二个参数的重载`Outer<int>::Inner`）。

那么有没有一种方法来定义`operator<<`任何`Outer<Value>::Inner`正确*的*`Value`（所以它不能被定义为成员）参数？

 *注意：我需要它在几个编译器中编译，其中一些没有任何 C++11 功能，所以我需要它是 C++03。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T14:48:18.490

你所拥有的是所谓的*不可演绎的上下文*。怎么可能`Value`推断出来？您可以部分专门化类模板，使编译器几乎不可能尝试和测试每个可能的实例化（其中有......嗯，无限的）。

有两种解决方法：`Inner`退出`Outer`，或结交`operator<<`内联朋友。后者是人们通常的方式。

```
template<class T>
struct Outer{
  struct Inner{
    T value;
    friend std::ostream& operator<<(std::ostream& os, Inner const& v){
      return os << v.value:
    }
  };
  // ...
}; 
```*

# jquery - 使用 JQuery 显示和隐藏行

> ID：15412252
> 
> 赞同：0
> 
> 时间：2013-03-14T14:37:25.260
> 
> 标签：jquery, html-table

基于这个封闭的问题：[Jquery Show/Hide Multiple Table Rows](https://stackoverflow.com/questions/10182187/jquery-show-hide-multiple-table-rows)

我想出了这个代码：http: [//jsfiddle.net/wG8qf/120/](http://jsfiddle.net/wG8qf/120/)

我不知道为什么当我展开表格时这个 tr 表现得很奇怪：

```
<tr>
   <td colspan="3" style="background-color: #f2f2f2; height: 20px;"></td>
</tr> 
```

我需要让它始终可见，这样我就可以在“订单”之间留出一些空间。尝试过 CSS 可见性但没有成功。

**HTML**

```
<table id="main-data-table" class="table table-striped table-hover">

<tr class="main" style="border-top: 3px #D2D2D2 solid; border-right: 1px #D2D2D2 solid; border-left: 1px #D2D2D2 solid;">
    <td colspan="3" class="success" style="background-color: #E1E1E1;">
        <div class="pull-left">
            <a class="main" href="#">109
            </a>
        </div>

    </td>
</tr>
<tr class="cabecalho data" style="border-right: 1px #D2D2D2 solid; border-left: 1px #D2D2D2 solid;">
    <td style="vertical-align: middle;">Descrição do Produto</td>

    <td class="right">Quantidade</td>
    <td class="right">Valor</td>
</tr>

<tr class= "data" style="border-right: 1px #D2D2D2 solid; border-left: 1px #D2D2D2 solid;">

    <td>

        <i class="icon-ok 60"></i>
        Dead Rising
    </td>

    <td class="right">1</td>
    <td class="right"><span class="unidade">R$ </span>24.59</td>

</tr>

<tr class= "data" style="border-right: 1px #D2D2D2 solid; border-left: 1px #D2D2D2 solid;">

    <td>

        <i class="icon-ok 60"></i>
        Kinect Sports
    </td>

    <td class="right">1</td>
    <td class="right"><span class="unidade">R$ </span>70.84</td>

</tr>

<tr class= "data" style="border-right: 1px #D2D2D2 solid; border-left: 1px #D2D2D2 solid;">

    <td>

        <i class="icon-ok 60"></i>
        Xbox 360 Black Play and Charge Kit
    </td>

    <td class="right">2</td>
    <td class="right"><span class="unidade">R$ </span>80.96</td>

</tr>

<tr class= "data" style="border-right: 1px #D2D2D2 solid; border-left: 1px #D2D2D2 solid;">

    <td>

        <i class="icon-ok 60"></i>
        Xbox 360 Rechargeable Controller Battery Pack Black
    </td>

    <td class="right">1</td>
    <td class="right"><span class="unidade">R$ </span>41.79</td>

</tr>

<tr class= "data" style="border-right: 1px #D2D2D2 solid; border-left: 1px #D2D2D2 solid;">

    <td>

        <i class="icon-ok 60"></i>
        Xbox 360 Wireless Controller - Glossy Black
    </td>

    <td class="right">1</td>
    <td class="right"><span class="unidade">R$ </span>77.00</td>

</tr>

<tr class="total data" style="border-right: 1px #D2D2D2 solid; border-left: 1px #D2D2D2 solid; border-bottom: 1px #D2D2D2 solid;">
    <td>Total</td>

    <td class="right">6</td>
    <td class="right"><span class="unidade">R$ </span>295.18</td>               

</tr>
<tr>
    <td colspan="3" style="background-color: #f2f2f2; height: 20px;"></td>
</tr>

<tr class="main" style="border-top: 3px #D2D2D2 solid; border-right: 1px #D2D2D2 solid; border-left: 1px #D2D2D2 solid;">
    <td colspan="3" class="success" style="background-color: #E1E1E1;">
        <div class="pull-left">
            <a class="main" href="#">108
            </a>
        </div>

    </td>
</tr>
<tr class="cabecalho data" style="border-right: 1px #D2D2D2 solid; border-left: 1px #D2D2D2 solid;">
    <td style="vertical-align: middle;">Descrição do Produto</td>

    <td class="right">Quantidade</td>
    <td class="right">Valor</td>
</tr>

<tr class= "data" style="border-right: 1px #D2D2D2 solid; border-left: 1px #D2D2D2 solid;">

    <td>

        <i class="icon-ok 60"></i>
        Kingston DataTraveler 108 16 GB Flash Drive
    </td>

    <td class="right">1</td>
    <td class="right"><span class="unidade">R$ </span>35.11</td>

</tr>

<tr class="total data" style="border-right: 1px #D2D2D2 solid; border-left: 1px #D2D2D2 solid; border-bottom: 1px #D2D2D2 solid;">
    <td>Total</td>

    <td class="right">1</td>
    <td class="right"><span class="unidade">R$ </span>35.11</td>                

</tr>
<tr>
    <td colspan="3" style="background-color: #f2f2f2; height: 20px;"></td>
</tr> 
```

**JAVASCRIPT**

```
$(function(){
  $("#main-data-table","body").on({'click':function(event){
    event.preventDefault();
    $(this).closest("tr.main").nextUntil("tr.main").toggle("fast");
   }},
   "a.main",null);
}); 
```

**CSS**

```
tr.data {display:none;} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-14T15:18:33.593

我改变了一些东西。验证是否可以解决您的问题：http: [//jsfiddle.net/wG8qf/145/](http://jsfiddle.net/wG8qf/145/)

HTML

```
<table id="main-data-table" border = "1">
    <tr>
        <th>Main</th>
        <th>Data</th>
    </tr>
    <tr class="main a">
        <td class="main"><a href="#">12345</a></td>
        <td class = "data">11111</td>
    </tr>
    <tr class="main b">
        <td class="main"><a href="#">12345</a></td>
        <td class = "data">11111</td>
    <tr class="main c">
        <td class="main"><a href="#">12345</a></td>  
        <td class = "data">11111</td>
    </tr>
    <tr class="data c">
        <td></td>  
        <td>11111</td>
    </tr>
    <tr class="data c">
        <td></td>  
        <td>11111</td>
    </tr>
    <tr class="data c">
        <td></td>  
        <td>11111</td>
    </tr>
</table> 
```

JAVASCRIPT

```
$(function(){
      $("#main-data-table").on({'click':function(event){
        event.preventDefault();
        var trClass = $(this).closest("tr.main").attr('class').split(' ')[1];
        console.log(trClass);
        $(this).closest("td.main").nextUntil("td.main").show();
        $(this).closest("#main-data-table").find('tr.'+trClass).show();
       }},
       "td.main a",null);
    }); 
```

CSS

```
.data {display:none;} 
```

# java - Java 中巧妙的异步重绘

> ID：15412260
> 
> 赞同：7
> 
> 时间：2013-03-14T14:37:41.313
> 
> 标签：java, multithreading, java.util.concurrent

我有一个来自 GUI 问题的用例，我想提交给您的睿智。

**用例**

我有一个 GUI，它根据用户在 GUI 中设置的一些参数显示计算结果。例如，当用户移动滑块时，会触发几个事件，这些事件都会触发新的计算。当用户将滑块值从 A 调整到 B 时，会触发几十个事件。

但是计算可能需要几秒钟，而滑块调整可以每 100 毫秒触发一次事件。

如何编写一个合适的线程来监听这些事件，并过滤它们以使结果的重绘更加生动？理想情况下，您会想要类似的东西

*   收到第一个更改事件后立即开始新的计算；
*   如果接收到新事件，则取消第一次计算，并使用新参数开始新的计算；
*   但要确保最后一个事件不会丢失，因为最后完成的计算需要是具有最后更新参数的计算。

**我试过的**

我的一个朋友 (A. Cardona) 提出了更新程序线程的这种低级方法，可以防止太多事件触发计算。我在这里复制粘贴（GPL）：

他把它放在一个扩展 Thread 的类中：

```
public void doUpdate() {
    if (isInterrupted())
        return;
    synchronized (this) {
        request++;
        notify();
    }
}

public void quit() {
    interrupt();
    synchronized (this) {
        notify();
    }
}

 public void run() {
    while (!isInterrupted()) {
        try {
            final long r;
            synchronized (this) {
                r = request;
            }
            // Call refreshable update from this thread
            if (r > 0)
                refresh(); // Will trigger re-computation
            synchronized (this) {
                if (r == request) {
                    request = 0; // reset
                    wait();
                }
                // else loop through to update again
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}

public void refresh() {
    // Execute computation and paint it
    ...
} 
```

每次 GUI 发送一个事件表明参数已更改时，我们调用`updater.doUpdate()`. 这导致该方法`refresh()`被调用的次数要少得多。但我无法控制这一点。

**其他方式？**

我想知道是否有另一种方法可以使用 jaca.concurrent 类。但是我无法在 Executors 框架中排序我应该从哪个开始。

你们中有人有类似用例的经验吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T15:39:36.030

如果您正在使用`Swing`，则`SwingWorker`提供了此功能，您不必自己处理线程池。

`SwingWorker`为每个请求触发一个。如果有一个新的请求进来并且工作人员没有完成，你可以`cancel()`，然后开始一个新的`SwingWorker`. 关于另一张海报所说的，我不认为`publish()`并且`process()`是您正在寻找的内容（尽管它们也非常有用），因为它们适用于工作人员触发事件的速度可能比 GUI 处理它的速度更快的情况。

```
ThingyWorker worker;

public void actionPerformed(ActionEvent e) {
    if( worker != null ) worker.cancel();
    worker = new ThingyWorker();
    worker.execute();
}

class ThingyWorker extends SwingWorker<YOURCLASS, Object> {
    @Override protected YOURCLASS doInBackground() throws Exception {
        return doSomeComputation(); // Should be interruptible
    }   
    @Override protected void done() {
        worker = null; // Reset the reference to worker

        YOURCLASS data;

        try {
            data = get();
        } catch (Exception e) { 
            // May be InterruptedException or ExecutionException                
            e.printStackTrace();
            return;
        }           

        // Do something with data
    }       
} 
```

action和`done()`method都是在同一个线程上执行的，所以可以有效的检查引用是否存在worker。

请注意，这实际上与允许 GUI 取消现有操作的操作相同，但取消是在触发新请求时自动完成的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T15:16:53.060

我将通过使用队列在 GUI 和控件之间提供更大程度的断开连接。

如果`BlockingQueue`在两个进程之间使用a。每当控件更改时，您都可以将新设置发布到队列中。

您的图形组件可以随时读取队列并对到达的事件采取行动或根据需要丢弃它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T15:28:52.290

我会调查 SwingWorker.publish() ( [http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html) )

Publish 允许 SwingWorker 对象的后台线程调用 process() 方法，但并非每个 publish() 调用都会导致 process() 调用。如果在 process() 返回之前进行了多个进程调用并且可以再次调用，则 SwingWorker 会将用于多个发布调用的参数连接到一个进程调用中。

我有一个进度对话框，显示正在处理的文件；文件的处理速度比 UI 跟得上它们的速度快，而且我不希望处理速度变慢以显示文件名；我使用了这个并且进程只显示发送到进程（）的最终文件名；在这种情况下，我想要的只是向用户指示当前处理的位置，他们无论如何都不会读取所有文件名。我的用户界面在这方面工作得非常顺利。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T15:33:38.500

看一下 javax.swing.SwingWorker 的实现（Java JDK 中的源代码），重点是两个方法之间的握手：*publish*和*process*。

这些不会直接适用于您的问题 - 但是它们演示了您如何将更新排队（发布）到工作线程，然后在您的工作线程（进程）中为它们提供服务。

由于您只需要最后一个工作请求，因此您甚至不需要为您的情况排队：只保留最后一个工作请求。在一小段时间（1 秒）内对“最后一个请求”进行采样，以避免每 1 秒停止/重新启动很多次，如果它已更改，则停止工作并重新启动。

* * *

您不想按原样使用*发布*/*处理*的原因是该*进程*始终在 Swing 事件调度线程上运行 - 根本不适合长时间运行的计算。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T16:23:20.000

这里的关键是您希望能够取消正在进行的计算。计算必须经常检查一个条件以查看它是否需要中止。

```
volatile Param newParam;

Result compute(Param param)
{
    loop
        compute a small sub problem
        if(newParam!=null) // abort
            return null;  

    return result
} 
```

将参数从事件线程切换到计算线程

```
synchronized void put(Param param)  // invoked by event thread
    newParam = param;
    notify();

synchronized Param take()
    while(newParam==null)
        wait();
    Param param = newParam;
    newParam=null;
    return param; 
```

计算线程确实

```
public void run()
    while(true)
        Param param = take();
        Result result = compute(param);
        if(result!=null)
            paint result in event thread 
```

# javascript - 如何使用 JSON 响应发送跨域 ajax 请求？

> ID：15412261
> 
> 赞同：0
> 
> 时间：2013-03-14T14:37:43.023
> 
> 标签：javascript, cross-domain, jsonp

伙计们，

我想发送一个跨域 ajax 请求（[http://dict.qq.com/dict?q=language](http://dict.qq.com/dict?q=language)），但是服务器只提供 JSON（**不是 JSONP**）响应，有没有办法发出请求？

这是我所做的：

```
$.ajax({
    url:"http://dict.qq.com/dict?q=language",
    dataType:"jsonp",
    type:'get',
    processData:false,
    crossDomain:true,
    contentType:"application/json",
    success:result
});

function result(data){console.log(data);} 
```

回应是：

```
Uncaught SyntaxError: Unexpected token : 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:42:03.853

服务器还需要配置为允许跨域请求，例如：

```
 Http.Response.current().accessControl("*", "GET,PUT,POST,DELETE,OPTIONS",false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T14:43:41.100

通常，[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)会阻止您这样做。如果您有权访问其他服务器，则可以尝试更改发送的 http 标头以规避此问题。这是使用[CORS（跨域资源共享）](http://www.html5rocks.com/en/tutorials/cors/)实现此目的的教程。

如果您无法控制远程服务器，也许您可​​以尝试使用服务器端代理，例如[这个](http://benalman.com/projects/php-simple-proxy/)

# refactoring - 在 D 中重构模块化结构

> ID：15412265
> 
> 赞同：2
> 
> 时间：2013-03-14T14:37:56.147
> 
> 标签：refactoring, d, modularization

以下是我通常开发应用程序的方式：

*   我首先将所有代码放在一个源文件中。
*   当它增长到足以模块化时，我将代码分成几个模块。
*   当模块足够长时，我再次拆分它们。以此类推，反复进行。
*   随着时间的推移，一些模块会缩小、删除或与其他模块合并。

此工作流程意味着有时需要在模块之间移动源文件。问题来了：

*当我将一个模块移动到另一个位置时，它会更改模块的名称，因此我必须手动遍历所有其他文件重命名导入。*

是否有一些组织技术可以避免这种烦人的程序？或者就是这样，我只需要研究一些自动化实用程序吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T17:58:34.657

您可以创建一个包含包`*.all`中`public import`所有模块的模块

那么您只需要从该模块中添加/删除模块名称

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T17:32:11.110

`module packagename.modulename;`您可以通过模块开头的指令覆盖模块名称。**尽管rdmd**使用 import 语句中的模块名称来形成文件系统路径来搜索它们的源，但它需要构建系统的帮助。但是，如果您将手动提供项目包含的所有源文件，它应该可以很好地解析模块名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T14:51:47.267

最好在开始编码之前定义实体。您可以使用一些建模语言来识别和编写您的实体。例如，如果您使用 java 来编写应用程序，那么您可以使用 UML 来建模这个应用程序。

此外，您必须将业务逻辑与数据分开。

如果您继续像今天一样这样做，您将浪费大量时间来处理文件名。

# database - 通过 phpMyAdmin 导入和替换已编辑的数据库

> ID：15412268
> 
> 赞同：0
> 
> 时间：2013-03-14T14:37:58.533
> 
> 标签：database, wordpress, dns

我将一个 wordpress 站点从一个域移动到另一个域。我一共运行了 4 次 sql 查询，将旧域名替换为新域名。2 个 sql 查询成功，2 个不成功。所以，我将数据库导入我的桌面，并在记事本++中进行了查找和替换。然后我通过 phpMyAdmin 将数据库导入回来，但我收到一条错误消息。我究竟做错了什么？谢谢

> 错误 SQL 查询：
> 
> -- -- 转储表数据`wp_comments` -- INSERT INTO `wp_comments`( `comment_ID`, `comment_post_ID`, `comment_author`, `comment_author_email`, `comment_author_url`, `comment_author_IP`, `comment_date`, `comment_date_gmt`, `comment_content`, `comment_karma`, `comment_approved`, `comment_agent`, `comment_type`, `comment_parent`, `user_id`) VALUES ( 1, 1, 'Mr WordPress', '', ' [http://wordpress.org /](http://wordpress.org/) ', '', '2013-02-01 10:33:14', '2013-02-01 10:33:14', '嗨，这是一条评论。\n要删除评论，只需登录并查看帖子的评论。在那里您可以选择编辑或删除它们。', 0, '1', '', '', 0, 0 ) ;
> 
> MySQL 说：
> 
> # 1062 - 键 'PRIMARY' 的重复条目 '1'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:40:09.573

如果您正在完全重新导入数据库，则值得删除整个数据库并从新的替换代码重新开始。

该错误是因为您已经导入了数据，并且在此之后尝试仅插入新数据，导致主键冲突。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T14:40:15.843

您将其中一个字段标记为数据库中的主键。您不能有两个具有相同主键的条目。

`1`是 MySQL 感到不安的那个键的值。通过查看您尝试运行的查询，它看起来像`comment_ID`、`comment_post_ID`或`comment_approved`是您用作的键`PRIMARY`（基于对应于的那些值`1`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T14:44:30.460

最好从一个新的**空**数据库开始，然后从旧数据库中导入数据。

# c# - 线程上的 UDP 侦听器并发布到 GUI

> ID：15412269
> 
> 赞同：0
> 
> 时间：2013-03-14T14:37:58.857
> 
> 标签：c#, multithreading, user-interface, udp

我正在运行一个基于对话框的程序，它定期发送 TCP，但也侦听 UDP 消息并将内容显示到 GUI。使用我最初使用的简单示例，一旦我开始在 while(true) 中监听，所有其他 GUI 功能都被关闭。然后我尝试生成一个线程来进行监听，但这些示例要求我创建一个新类，该类将 GUI 元素从我的视图中隐藏起来。

所以我的问题是，在不阻塞 GUI 线程的情况下侦听 UDP 消息并将内容写入 GUI 的最佳做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T14:41:27.003

您需要让代码在某种后台线程中进行监听。这很简单，有*很多*方法可以将后台线程串起来，从`Thread`类, `BackgroundWorker`, `Task`, `ThreadPool.QueueUserWorkItem`（尽管在你的情况下线程池线程不合适，你需要一个完整的线程，因为你的操作是长时间运行的）等等。

之后，您只需要某种方式来更新 UI。同样，有几种方法可以这样做（一些特定于您正在使用的 UI 功能（WPF、winform 等），而另一些则不是。

使用`IProgress<T>`特别有用，尤其是因为它不依赖于特定的 UI 技术。在 UI 中创建`Progress`对象，并指定当您有特定结果时如何更新 UI，将对象传递给后台工作人员，并`Report`在收到信息时让其进行。

一个示例可能如下所示：

```
private void Form1_Load(object sender, EventArgs e)
{
    Progress<string> progress = new Progress<string>();
    progress.ProgressChanged += data =>
    {
        textBox1.AppendText(data);
    };

    Thread tcpListener = new Thread(() => ListenForData(progress));
    tcpListener.Start();
}

private void ListenForData(IProgress<string> progress)
{
    while (true)
    {
        Thread.Sleep(1000);//placeholder for real IO to get data
        progress.Report("data");
    }
} 
```

如果您没有 C# 4.5，则创建自己的`Progress`类非常简单：

```
public interface IProgress<T>
{
    void Report(T data);
}

public class Progress<T> : IProgress<T>
{
    SynchronizationContext context;
    public Progress()
    {
        context = SynchronizationContext.Current
            ?? new SynchronizationContext();
    }

    public Progress(Action<T> action)
        : this()
    {
        ProgressReported += action;
    }

    public event Action<T> ProgressReported;

    void IProgress<T>.Report(T data)
    {
        var action = ProgressReported;
        if (action != null)
        {
            context.Post(arg => action((T)arg), data);
        }
    }
} 
```

# java - 通过命令行在 url 上打开文件 Office doc (Mac)

> ID：15412276
> 
> 赞同：0
> 
> 时间：2013-03-14T14:38:18.467
> 
> 标签：java, macos, command-line, terminal, ms-office

我正在尝试构建一个 Java 小程序，它将自动从 url 加载 Office 文件，并在 Mac Os 上使用正确的桌面应用程序打开它。

目前，我正在寻找可以帮助我做到这一点的命令行（不使用任何 Java）。我已经可以在我的 Mac 上打开一个本地文件： `open -a Libreoffice http://localhost:3000/myfile.docx` 但它会在我的网络浏览器上运行并尝试加载 url，而我实际上需要 Libreoffice 从 url 打开文件。而 open -a 似乎不是我想要的答案（[http://answers.microsoft.com/en-us/mac/forum/macoffice2011-macpowerpoint/how-to-startup-powerpoint-from-command-线/af3a6667-ab80-418b-9dfe-1c8ae9436d94](http://answers.microsoft.com/en-us/mac/forum/macoffice2011-macpowerpoint/how-to-startup-powerpoint-from-command-line/af3a6667-ab80-418b-9dfe-1c8ae9436d94)）

还有另一种方法可以通过进入正确的应用程序文件夹来启动正确的应用程序，例如： `Applications/Microsoft\ Office\ 2011/Microsoft\ Word.app/Contents/MacOS/Microsoft\ Word`

有人知道我该怎么做吗？

提前谢谢了

磷

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:27:34.210

首先尝试使用`curl`（或 Java）将文件下载到临时位置，然后`open`：

```
cd mytempdir  // specify your working directory
curl -O http://mywebsite.com/mydoc.docx  // download file to temp dir
open mydoc.docx 
```

# ios - iOS , iPhone 快照在背景/前景过渡

> ID：15412278
> 
> 赞同：0
> 
> 时间：2013-03-14T14:38:18.970
> 
> 标签：ios, background, snapshot, background-foreground

当 iOS 应用程序将状态从前台更改为后台时，操作系统会拍摄当前视图（屏幕）的快照，当它再次进入前台时，它会显示该快照。当应用程序从后台进入前台时，是否有任何方法（动画或任何东西）截取该快照并显示任何自定义图像？

注意：我不想拍摄任何视图的快照，我只想在应用程序从后台进入前台时显示任何自定义图像，以使其更加清晰，无论操作系统从后台进入前台时显示的任何快照，我想要用我的自定义图像替换该快照，我想要的行为是“每当从背景到前景发生转换时，应用程序每次都会显示我的自定义图像，无论它从哪个视图进入后台。” 提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T14:42:54.907

您可以注册`UIApplicationDidEnterBackgroundNotification`通知并显示您想要呈现的图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T15:47:28.617

AppDelegate 本身有两种委托方法：

```
 - applicationDidEnterBackground
 - applicationWillEnterForeground 
```

有关此方法的更多详细信息，请参阅[UIApplicationDelegate 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIApplicationDelegate_Protocol/Reference/Reference.html)

因此，使用这两种方法，您可以找到需要拍摄快照的事件和显示图像的其他事件。

现在，如何拍摄您的视图的快照，所以这里有一个代码片段：

```
 // define the frame as per your requirement
    CGRect contextRect  = CGRectMake(0, 0, myView.frame.size.width, 
                                   myView.frame.size.height); 
  // whatever you need

    UIGraphicsBeginImageContext(contextRect.size);  

    [myView.layer renderInContext:UIGraphicsGetCurrentContext()];

  UIImage* viewImage = UIGraphicsGetImageFromCurrentImageContext();

  UIGraphicsEndImageContext(); 
```

`viewImage`是包含屏幕截图图像的对象。`applicationWillEnterForeground`所以在方法中的 UIImageView 中显示这个图像。

希望这可以帮助您解决问题

# c# - 绑定到对象的属性

> ID：15412279
> 
> 赞同：1
> 
> 时间：2013-03-14T14:38:22.110
> 
> 标签：c#, wpf, xaml, data-binding, binding

我有一个“A”类。这个类 A 有一个对象 B。

我有一个数据网格。在这个数据网格上，我绑定了几个 A 属性。我想另外绑定一个 B 属性。

我试过这个：

```
<DataGridTextColumn Binding="{ Binding B.strDes}" Header="   Libellé type évènement   " Width="Auto" IsReadOnly="True"  /> 
```

我的问题是没有显示价值。

B 是对象属性，strDes 是 B 属性。

请问我怎样才能简单地在xaml中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:06:25.220

您可以尝试使用此语法

```
{Binding ElementName=B,  Path=strDes} 
```

注意：不要忘记来源

```
DataContext="{Binding Source=yourData}" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T15:12:01.290

我试过你的例子，它工作正常：

XAML：

```
<Window x:Class="DataGridBinding.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <DataGrid ItemsSource="{Binding ObjectAList}">      
            <DataGrid.Columns>
                <DataGridTextColumn Binding="{ Binding ObjectB.strDes}" Header="   Libellé type évènement   " Width="Auto" IsReadOnly="True"  />
            </DataGrid.Columns>
        </DataGrid>
    </Grid>
</Window> 
```

代码隐藏：

```
public partial class MainWindow : Window
{
   public List<A> AList { get; set; }

   public MainWindow()
   {
      InitializeComponent();
      AList= new List<A>();
      AList.Add(new A());
      AList.Add(new A());
      AList.Add(new A());
      AList.Add(new A());
      DataContext = this;
   }
} 
```

A类和B类：

```
public class A
{
   public B B { get; set; }

   public A()
   {
      B=new B();
   }
}

public class B
{
   private static int counter = 0;
   public string strDes { get; set; }

   public B()
   {
      strDes = "foo"+counter;
      counter++;
   }
} 
```

输出：

![在此处输入图像描述](../Images/11d14b0a97ea6b95b97ce133d891c007.png)

编辑：检查绑定的提示。将 TraceLevel 设置为“High”以获取有关它的更多信息：

```
<DataGridTextColumn Binding="{ Binding B.strDes, PresentationTraceSources.TraceLevel=High}" Header="   Libellé type évènement   " Width="Auto" IsReadOnly="True"  /> 
```

# android - 如何定期唤醒我的应用程序

> ID：15412287
> 
> 赞同：4
> 
> 时间：2013-03-14T14:38:56.140
> 
> 标签：android, service, android-alarms, background-service

我想在 Android 中创建一个功能，比如提醒。

我想启动我的应用程序/活动，当它没有运行，或者它的 UI 不可见时。

它类似于提醒，在所需时间唤醒应用程序。

我没有使用过任何类型的后台任务或服务，所以我不知道该做什么，或者我应该学习什么类型的课程或演示？

任何人都可以通过演示或教程链接给我一些建议。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T14:48:22.173

您好使用以下代码。这是服务。通过将挂起的 Intent 与警报管理器一起使用，您可以在需要的时间打开您的 UI。

```
import java.util.Calendar;
import java.util.Timer;
import java.util.TimerTask;
import android.app.AlarmManager;
import android.app.PendingIntent;
import android.app.Service;
import android.content.Context;
import android.content.Intent;
import android.database.Cursor;
import android.os.Handler;
import android.os.IBinder;
import android.os.Message;
import android.util.Log;
public class ScheduleCheckService extends Service{

    private Timer timer;
    final  int REFRESH=0;
    Context context;
    private PendingIntent pendingIntent;

    @Override
    public IBinder onBind(Intent intent) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public void onCreate() {
        // TODO Auto-generated method stub
        super.onCreate();
        context=this;
        //==============================================

        TimerTask refresher;
        // Initialization code in onCreate or similar:
        timer = new Timer();    
        refresher = new TimerTask() {
            public void run() {
              handler.sendEmptyMessage(0);
            };
        };
        // first event immediately,  following after 1 seconds each
        timer.scheduleAtFixedRate(refresher, 0,1000); 
        //=======================================================

    }

    final Handler handler = new Handler() {

        public void handleMessage(Message msg) {
              switch (msg.what) {
              case REFRESH: 
                   //your code here 

                  break;
              default:
                  break;
              }
          }
        };

         void PendingIntentmethod()
         {
         Intent myIntent = new Intent(context, YOURCLASS.class);        
         pendingIntent = PendingIntent.getActivity(context, 0, myIntent, 0);
         AlarmManager alarmManager = (AlarmManager)getSystemService(ALARM_SERVICE);
        Calendar calendar = Calendar.getInstance();

         }

} 
```

启动服务并在需要时停止服务，也不要忘记在清单文件中注册它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T14:42:54.703

看看 Android 服务类。
[http://developer.android.com/reference/android/app/Service.html](http://developer.android.com/reference/android/app/Service.html)

通过此服务，您可以定期启动（使用 TimerTask）一个 Intent 来打开您的应用程序，或者只设置一个通知，用户可以通过该通知使用所需的 Activity 打开应用程序。我更喜欢第二个选项，因为他的用户不希望应用程序只是在某个时候打开。

这是一个简单的服务教程： [http ://www.vogella.com/articles/AndroidServices/article.html](http://www.vogella.com/articles/AndroidServices/article.html)

# ruby-on-rails - 如何定义用户角色的权限

> ID：15412288
> 
> 赞同：0
> 
> 时间：2013-03-14T14:39:02.103
> 
> 标签：ruby-on-rails, authorization

我正在从头开始构建用户授权，并且一直在处理用户角色。我被困在权限部分，因为我不确定如何定义它。当我将“before_filter :authorize”添加到控制器时，它会在所有页面上显示“未初始化常量 ApplicationController::Permission”错误。

我知道错误来自我的 application_controller.rb 文件：

```
 def current_permission
    @current_permission || Permission.new(current_user)
  end

  def authorize
    if !current_permission.allow?(params[:controller], params[:action])
      redirect_to root_url, alert: "Not authorized."
    end 
```

权限.rb：

```
Class Permission < Struct.new(:user)
  def allow?(controller, action)
    if user.nil?
    controller == "galleries" && action.in?(%w[index show])
  elsif user.admin?
    true
  else
    controller == "galleries" && action != "destroy"
  end
  end 
```

我不知道如何在我的应用程序中正确定义权限，以便我不会收到该错误。有没有人有任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T14:51:29.083

您的`Permission`班级有两个问题：

1.  `Class`应该是`class`小写的`c`。
2.  你错过了`end`关闭课程。

* * *

我还必须指出，真的没有理由重新发明轮子。许多人选择使用[cancan](https://github.com/ryanb/cancan)或[declarative_authorization](https://github.com/stffn/declarative_authorization)来完成您想要完成的任务。

就个人而言，我喜欢更轻量级的[Pundit](https://github.com/elabs/pundit) gem，它似乎非常适合您想要完成的工作。

# c# - XML 到 DataTable - 返回空白单元格

> ID：15412292
> 
> 赞同：0
> 
> 时间：2013-03-14T14:39:10.900
> 
> 标签：c#, sql, xml

这将是一个冗长的问题——我整天都在试图解决这个问题，所以也许你们可以帮忙！我试图通过允许在以新结构（以 XML 格式）呈现时更改数据库结构来对我的数据库应用程序进行未来验证。

目前我正在设法将数据库结构导出到 XML 中。请参阅下面的工作代码：

```
 public void generateXMLStructureCompactDB(string fileName)
    {
        DataTable table = new DataTable();
        int position;
        FileStream fsWrite;
        StreamWriter sw;

        string version = "1.1.1.0";
        table.Columns.Add("TableName", Type.GetType("System.String"));
        table.Columns.Add("ColName", Type.GetType("System.String"));
        table.Columns.Add("Position", Type.GetType("System.Int32"));
        table.Columns.Add("DataType", Type.GetType("System.String"));
        table.Columns.Add("MaximumLength", Type.GetType("System.Int32"));
        table.Columns.Add("Precision", Type.GetType("System.Int32"));
        table.Columns.Add("Scale", Type.GetType("System.Int32"));
        table.Columns.Add("Nullable", Type.GetType("System.Boolean"));
        table.Columns.Add("Identity", Type.GetType("System.Boolean"));
        table.Columns.Add("IdentitySeed", Type.GetType("System.Int32"));
        table.Columns.Add("IdentityIncrement", Type.GetType("System.Int32"));

        string sql = "select Table_Name, Column_Name, Ordinal_Position, Data_Type, " +
            "Character_Maximum_Length, Numeric_Precision, Numeric_Scale, Is_Nullable, " +
            "case when AutoInc_Seed is null then 0 else 1 end as IS_IDENTITY, " +
            "AutoInc_Seed, AutoInc_Increment from information_schema.columns";
        runSQL(sql, out table);

        if (File.Exists(fileName))
            File.Delete(fileName);

        fsWrite = new FileStream(fileName, FileMode.OpenOrCreate, FileAccess.Write, FileShare.ReadWrite);
        sw = new StreamWriter(fsWrite, Encoding.ASCII);

        XmlWriter writer = new XmlTextWriter(sw);
        writer.WriteStartDocument(false);
        writer.WriteRaw(Environment.NewLine);
        writer.WriteComment("DBVersion=" + DBVersion + ", created=" + DateTime.Now.ToString());
        writer.WriteRaw(Environment.NewLine);

        writer.Close();
        sw.Close();
        fsWrite.Close();

        fsWrite = new FileStream(fileName, FileMode.Append, FileAccess.Write, FileShare.ReadWrite);
        sw = new StreamWriter(fsWrite, Encoding.ASCII);

        DataTable indexes = new DataTable();
        indexes.Columns.Add("TableName", Type.GetType("System.String"));
        indexes.Columns.Add("Schema", Type.GetType("System.String"));
        indexes.Columns.Add("IndexName", Type.GetType("System.String"));
        indexes.Columns.Add("Clustered", Type.GetType("System.Boolean"));
        indexes.Columns.Add("Unique", Type.GetType("System.Boolean"));
        indexes.Columns.Add("IndexColName", Type.GetType("System.String"));
        sql = "select Table_Name, Table_Schema, Index_Name, [Clustered], [Unique], " + 
            "Column_Name from information_schema.indexes";
        runSQL(sql, out indexes);

        table.TableName = "Tables";
        indexes.TableName = "Indexes";

        table.WriteXml(sw);
        sw.WriteLine("");
        indexes.WriteXml(sw);
        sw.Close();
        fsWrite.Close();
    } 
```

下面是我生成的 XML 文件（实际版本要大得多，但我已将其剥离为单个表和单个索引）：

```
<?xml version="1.0" encoding="us-ascii" standalone="no"?>
<!--DBVersion=1.0.0.0, created=14/03/2013 13:18:20-->
<DocumentElement>
  <Tables>
    <TABLE_NAME>ContactLog</TABLE_NAME>
    <COLUMN_NAME>ContactLogId</COLUMN_NAME>
    <ORDINAL_POSITION>1</ORDINAL_POSITION>
    <DATA_TYPE>int</DATA_TYPE>
    <NUMERIC_PRECISION>10</NUMERIC_PRECISION>
    <IS_NULLABLE>NO</IS_NULLABLE>
    <IS_IDENTITY>1</IS_IDENTITY>
    <AUTOINC_SEED>1</AUTOINC_SEED>
    <AUTOINC_INCREMENT>1</AUTOINC_INCREMENT>
  </Tables>
  <Tables>
    <TABLE_NAME>ContactLog</TABLE_NAME>
    <COLUMN_NAME>CustomerId</COLUMN_NAME>
    <ORDINAL_POSITION>2</ORDINAL_POSITION>
    <DATA_TYPE>int</DATA_TYPE>
    <NUMERIC_PRECISION>10</NUMERIC_PRECISION>
    <IS_NULLABLE>YES</IS_NULLABLE>
    <IS_IDENTITY>0</IS_IDENTITY>
  </Tables>
  <Tables>
    <TABLE_NAME>ContactLog</TABLE_NAME>
    <COLUMN_NAME>ContactDate</COLUMN_NAME>
    <ORDINAL_POSITION>3</ORDINAL_POSITION>
    <DATA_TYPE>datetime</DATA_TYPE>
    <NUMERIC_PRECISION>23</NUMERIC_PRECISION>
    <NUMERIC_SCALE>3</NUMERIC_SCALE>
    <IS_NULLABLE>YES</IS_NULLABLE>
    <IS_IDENTITY>0</IS_IDENTITY>
  </Tables>
  <Tables>
    <TABLE_NAME>ContactLog</TABLE_NAME>
    <COLUMN_NAME>ContactTypeId</COLUMN_NAME>
    <ORDINAL_POSITION>4</ORDINAL_POSITION>
    <DATA_TYPE>int</DATA_TYPE>
    <NUMERIC_PRECISION>10</NUMERIC_PRECISION>
    <IS_NULLABLE>YES</IS_NULLABLE>
    <IS_IDENTITY>0</IS_IDENTITY>
  </Tables>
  <Tables>
    <TABLE_NAME>ContactLog</TABLE_NAME>
    <COLUMN_NAME>AuditText</COLUMN_NAME>
    <ORDINAL_POSITION>5</ORDINAL_POSITION>
    <DATA_TYPE>nvarchar</DATA_TYPE>
    <CHARACTER_MAXIMUM_LENGTH>2048</CHARACTER_MAXIMUM_LENGTH>
    <IS_NULLABLE>YES</IS_NULLABLE>
    <IS_IDENTITY>0</IS_IDENTITY>
  </Tables>
  <Tables>
    <TABLE_NAME>ContactType</TABLE_NAME>
    <COLUMN_NAME>ContactTypeId</COLUMN_NAME>
    <ORDINAL_POSITION>1</ORDINAL_POSITION>
    <DATA_TYPE>int</DATA_TYPE>
    <NUMERIC_PRECISION>10</NUMERIC_PRECISION>
    <IS_NULLABLE>NO</IS_NULLABLE>
    <IS_IDENTITY>1</IS_IDENTITY>
    <AUTOINC_SEED>1</AUTOINC_SEED>
    <AUTOINC_INCREMENT>1</AUTOINC_INCREMENT>
  </Tables>
</DocumentElement>
<DocumentElement>
  <Indexes>
    <TABLE_NAME>ContactLog</TABLE_NAME>
    <INDEX_NAME>PK_ContactLog</INDEX_NAME>
    <CLUSTERED>false</CLUSTERED>
    <UNIQUE>true</UNIQUE>
    <COLUMN_NAME>ContactLogId</COLUMN_NAME>
  </Indexes>
</DocumentElement> 
```

现在这是读取 XML 文件的代码部分。XML 文件包含两个单独表的列 - `tables`（实际上是列列表）和`indexes`- 索引列表。它根据 的位置将文件一分为二`<DocumentElement>`，然后将这两个 XML 元素放入两个单独的表中。请参见下面的代码：

```
 static bool VerifyStructure()
    {
        FileStream fsWrite;
        int i;
        StreamWriter sw;
        string DBStructureVersion = "0.0.0.0";
        string xmlFile;
        string s;
        string tmp = Environment.GetEnvironmentVariable("TEMP");
        if (tmp == "")
            tmp = Environment.GetEnvironmentVariable("SystemDrive");
        try
        {
            xmlFile = tmp + @"\dbStructure.xml";
            if (File.Exists(xmlFile))
                File.Delete(xmlFile);

            fsWrite = new FileStream(xmlFile, FileMode.OpenOrCreate, FileAccess.Write, FileShare.ReadWrite);
            sw = new StreamWriter(fsWrite, Encoding.ASCII);
            sw.Write(syntos.Properties.Resources.dbStructure);
            sw.Close();
            fsWrite.Close();
        }
        catch (Exception ex)
        {
            MessageBox.Show("Error reading structure xml file: " + ex.Message);
            return false;
        }
        if (!File.Exists(xmlFile))
        {
            MessageBox.Show("XML Structure file '" + xmlFile + "' does not exist.");
            return false;
        }
        StreamReader sr = new StreamReader(xmlFile);
        s = sr.ReadLine();
        while (s != null)
        {
            if (s.Contains("DBVersion="))
            {
                i = s.IndexOf("DBVersion=");
                DBStructureVersion = s.Substring(i + 10);
                i = DBStructureVersion.IndexOf(",");
                DBStructureVersion = DBStructureVersion.Substring(0, i);
                break;
            }
            s = sr.ReadLine();
        }
        sr.Close();

        // Split the remaining XML file into two: table datatable file and index datatable file
        // Write out to file1 all the table information and to file2 all the index information
        string file1path;
        string file2path;

        try
        {
            file1path = tmp + @"\tables.xml";
            file2path = tmp + @"\indexes.xml";
            if (File.Exists(file1path))
                File.Delete(file1path);

            if (File.Exists(file2path))
                File.Delete(file2path);

            FileStream fsw1 = new FileStream(file1path, FileMode.OpenOrCreate, FileAccess.Write, FileShare.ReadWrite);
            FileStream fsw2 = new FileStream(file2path, FileMode.OpenOrCreate, FileAccess.Write, FileShare.ReadWrite);
            StreamWriter sw1 = new StreamWriter(fsw1, Encoding.ASCII);
            StreamWriter sw2 = new StreamWriter(fsw2, Encoding.ASCII);

            // Create a file containing just the table / column definitions
            sr = new StreamReader(xmlFile);
            s = sr.ReadToEnd();
            sr.Close();

            i = s.IndexOf("<DocumentElement>");
            s = s.Substring(i);
            i = s.IndexOf("</DocumentElement>");
            s = s.Substring(0, i + 18);
            sw1.Write(s);
            sw1.Close();
            fsw1.Close();

            // Create a file containing the index column definitions
            sr = new StreamReader(xmlFile);
            s = sr.ReadToEnd();
            sr.Close();

            i = s.IndexOf("</DocumentElement>");
            s = s.Substring(i + 18);
            sw2.Write(s);
            sw2.Close();
            fsw2.Close();
            sr.Close();
        }
        catch (Exception ex)
        {
            MessageBox.Show("Error producing the table and index XML file. " + ex.Message);
            return false;
        }

        DataTable table = new DataTable();
        table.Columns.Add("TableName", Type.GetType("System.String"));
        table.Columns.Add("ColName", Type.GetType("System.String"));
        table.Columns.Add("Position", Type.GetType("System.Int32"));
        table.Columns.Add("DataType", Type.GetType("System.String"));
        table.Columns.Add("MaximumLength", Type.GetType("System.Int32"));
        table.Columns.Add("Precision", Type.GetType("System.Int32"));
        table.Columns.Add("Scale", Type.GetType("System.Int32"));
        table.Columns.Add("Nullable", Type.GetType("System.Boolean"));
        table.Columns.Add("Identity", Type.GetType("System.Boolean"));
        table.Columns.Add("IdentitySeed", Type.GetType("System.Int32"));
        table.Columns.Add("IdentityIncrement", Type.GetType("System.Int32"));
        table.TableName = "Tables";

        DataTable indexes = new DataTable();
        indexes.Columns.Add("TableName", Type.GetType("System.String"));
        indexes.Columns.Add("Schema", Type.GetType("System.String"));
        indexes.Columns.Add("IndexName", Type.GetType("System.String"));
        indexes.Columns.Add("Clustered", Type.GetType("System.Boolean"));
        indexes.Columns.Add("Unique", Type.GetType("System.Boolean"));
        indexes.Columns.Add("IndexColName", Type.GetType("System.String"));
        indexes.TableName = "Indexes";

        // Read in the XML for the table / columns
        sr = new StreamReader(file1path);
        table.ReadXml(sr);
        sr.Close();
        if (table.Rows.Count == 0)
        {
            MessageBox.Show("No loadable table rows found in XML file");
            sw.Close();
            fsWrite.Close();
            return false;
        }
        sr = new StreamReader(file2path);
        indexes.ReadXml(sr);
        sr.Close();
        if (indexes.Rows.Count == 0)
        {
            MessageBox.Show("No loadable index rows found in XML file");
            sw.Close();
            fsWrite.Close();
            return false;
        }
        DbFunctions.BackupDatabase();
        bool success1 = CreateTempTables(table);
        return true;
    } 
```

通过使用断点和调试语句，我可以看到表正在填充正确数量的行和列 - 但是所有这些都是空的。只是空单元格。我曾经`table.Rows.Count`看到这个表中实际上有行。

如果有人能看到我在这里是否正确，我将永远感激不尽！提前致谢 ：）

编辑：我已经用不同的 XML 表对此进行了测试，它可以工作。我生成 XML 文件的方式一定有问题，但我看不到是什么。

只要允许我这样做，我就会在这个问题上增加赏金；）

**问题总结：**将系统生成的XML文件（第一个代码块）再次导入程序（第三个代码块）时，行和列都存在，但所有单元格都是空白的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:30:29.263

列名不匹配 - 名称区分大小写。您可以在空表上导入`XML`，该方法将为您创建列。[http://msdn.microsoft.com/es-es/library/system.data.datatable.readxml(v=vs.100).aspx](http://msdn.microsoft.com/es-es/library/system.data.datatable.readxml(v=vs.100).aspx)

# sql-server-2008 - SQL Server 2008 加密丢失

> ID：15412295
> 
> 赞同：1
> 
> 时间：2013-03-14T14:39:18.220
> 
> 标签：sql-server-2008, encryption

我已经在 SO 中阅读了很多东西，但我仍然无法弄清楚加密事物的整个机制......

我希望我的站点在 SQL Server 中写入数据。加密功能应该在哪里？我的数据库需要什么？

我想要我的网络服务来获取这些数据，处理它们并将它们插入另一个解密的 SQL Server。我也应该在那里声明相同的协议吗？怎么会知道加密，密钥才能解密？电路是什么样的？

很抱歉如此褪色（你可以拒绝帖子的模组），但我无法遵循 SQL 加密/解密机制的逻辑......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-08T01:04:30.367

您需要加密数据的不同点。

第一个是“运动”。这意味着您在两台机器之间传输数据时对数据进行加密。共同点包括浏览器和 Web 服务器之间（通常使用 SSL）以及 Web 服务器和数据库服务器之间（Kerberos 是 Windows 机器的共同点）。目的是防止有人窃听电线。

二是“休息”。这意味着数据应该在存储设施中进行加密：即 SQL 服务器。此处的目的是防止黑客获取数据库文件的副本时数据被解密。到目前为止，最简单的机制是利用 SQL Server 内置的加密机制。

有时采用的另一种“静态”加密选项是让 Web 服务器在将数据发送到 SQL 服务器之前对其进行加密。一般来说，这并不比简单地让数据库服务器自己处理加密/解密更有效。但是，它确实有几个缺点，例如几乎不可能从 SQL 服务器工具中查询数据。此外，密钥具有更广泛的分布，因为每个需要接触数据的应用程序都必须能够访问密钥才能工作。这可以通过在 SQL Server 之上使用服务层来处理数据管理而受到一定程度的限制。但是，同样，这并不能提供比您开箱即用的安全性更高的安全性。

# android - 异常情况下无法为startActivityForResult设置resultCode

> ID：15412300
> 
> 赞同：0
> 
> 时间：2013-03-14T14:39:37.127
> 
> 标签：android

我正常情况下的程序流程是

```
activity A (start"activity B"using startActivityForResult)
activity B (setResult and finish(), return to "activity A")
activity A (onActivityResult having result) 
```

在异常情况下，活动B可以调用另一个活动C。流程是这样的

```
activity A (start"activity B"using startActivityForResult)
activity B (start"activity C")
activity C (finish(),return to activity B)
activity B (setResult and finish(), return to "activity A")
activity A (onActivityResult having **no result!**) 
```

在这种情况下，如何将“活动B结果”发送到活动A？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T14:43:16.197

如果通过写作`(start"activity C")`您的意思是 B 不`startActivityForResult()`用于启动 C，那么 B 只需这样做，这样它就可以等待`C`返回，直到将结果返回给`A`.

# android - 滚动时 onTouch 的自定义 ListView 问题

> ID：15412303
> 
> 赞同：0
> 
> 时间：2013-03-14T14:39:42.410
> 
> 标签：android, listview, scroll

我有一个习惯`ListView`，我`OnTouchListener`为每个列表项设置了一个。当用户触摸项目时，我使用`TransitionDrawable`在 期间更改项目的背景颜色`MotionEvent.ACTION_DOWN`并使其恢复正常`MotionEvent.ACTION_UP`。

现在，当我滚动此列表时，滚动操作开始时触摸的项目会更改背景颜色。我想避免这种行为。因此，在滚动时，我想禁用背景颜色的任何更改。有没有办法做到这一点？请看下面的代码：

```
public class ListItemOnTouchListener implements OnTouchListener {

    @Override
    public boolean onTouch(View v, MotionEvent event) {

        Context mContext = getActivity().getApplicationContext();
        Resources res = mContext.getResources();
        switch (event.getAction()) {

        case MotionEvent.ACTION_DOWN:
            TransitionDrawable transitionDown = (TransitionDrawable) res
                .getDrawable(R.drawable.row_background_transition_down);
            v.setBackgroundDrawable(transitionDown);
            transitionDown.startTransition(350);
            Log.d(TAG, "ACTION_DOWN");
            return true;

        case MotionEvent.ACTION_UP:
            TransitionDrawable transitionUp = (TransitionDrawable) res
                    .getDrawable(R.drawable.row_background_transition_up);
            v.setBackgroundDrawable(transitionUp);
            transitionUp.startTransition(1000);
            // Get list view
            ListView listView = getListView();
            int position = listView.getPositionForView((LinearLayout) v.getParent());
            listView.performItemClick(v, position, 0);
            Log.d(TAG, "ACTION_UP");
            return true;

        case MotionEvent.ACTION_MOVE:
            Log.d(TAG, "ACTION_MOVE");
            break;

        case MotionEvent.ACTION_CANCEL:
            Log.d(TAG, "ACTION_CANCEL");
            v.setBackgroundResource(R.drawable.row_background_normal);
            break;
        }
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:53:03.897

您可以实现onListItemClick（与触摸时相同），而不是实现触摸，然后在该方法上您可以编写代码来更改触摸/单击的列表项的颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T14:42:22.130

当用户开始滚动时，您应该得到一个 ACTION_CANCEL。抓住这个并改变颜色。

# android - AsyncTask 并发问题

> ID：15412309
> 
> 赞同：0
> 
> 时间：2013-03-14T14:40:00.897
> 
> 标签：android, android-asynctask

我正在使用 Asynctask 进行网络操作。我正在使用第三方库从我的数据库中获取数据。

问题我在我的 asynctask 的 doInBackgroun 方法中进行查询，该方法最终调用了一个回调方法，该方法具有要显示的结果。但是在回调方法调用 itslef 之前调用了 onPostExecute 方法。因此，数据永远不会附加到我在 onPostExecute 中设置的适配器。

问题：如何等待 doInbackground 方法返回，直到回调方法被调用。这样我可以在数据可用后调用 onPostExecute 方法。

下面是我的 asyntTask，回调方法是 onCompleted。

在我的 onPostExecute 中，我使用数据在适配器中显示它。所以我没有完全发布它，因为它是一堆代码。

```
public class MyReviewLoadingTask extends AsyncTask<Void, Void, List<WYF_User_Items>>
    {
        ProgressDialog pdilog;
        List<WYF_User_Items> result_to_send_to_adapter;
        @Override
        protected void onPreExecute() 
        {
            // TODO Auto-generated method stub
            super.onPreExecute();
            pdilog=new ProgressDialog(SingleReviewActivity.this);
            pdilog.setIndeterminate(true);
            pdilog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
            pdilog.setMessage("please wait");
            pdilog.setTitle("Review Details");
            pdilog.show();
        }
        @Override
        protected List<WYF_User_Items> doInBackground(Void... params) 
        {
            // TODO Auto-generated method stub
            getDatabaseTable();

            MobileServiceQuery<WYF_User_Items> query=new MobileServiceQuery<WYF_User_Items>();
            query.select("review_rating","review_body","unique_user_id","userName");
            wyf_user_item_table.where().field("brand_name").eq(review_name).execute(new TableQueryCallback<WYF_User_Items>() {

                @Override
                 public void  onCompleted(List<WYF_User_Items> result, int arg1,
                        Exception arg2, ServiceFilterResponse arg3) {
                    // TODO Auto-generated method stub
                    Log.i(TAG, "size is "+result.size());
                    result_to_send_to_adapter=result;
                    for(int i=0;i<result.size();i++)
                    {
                        Log.i(TAG, "unique user id of all user who has entered review is "+result.get(i).getUnique_user_id()+" and their names are "+result.get(i).getUserName());

                    }

                }
            });

            wyf_user_item_table.select("review_rating").add(new MobileServiceQuery<WYF_User_Items>());
            return result_to_send_to_adapter;
        }
        @Override
        protected void onPostExecute(List<WYF_User_Items> result) {
            // TODO Auto-generated method stub
            super.onPostExecute(result);
            Log.i(TAG, "onPostExecute called");
            pdilog.dismiss(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:54:18.217

对于这个用例，你确实需要一个`AsyncTask`imo。如果已经`MobileQueryService`在不同的平台上运行`Thread`，只需在提供的回调上实现您的逻辑`onCompleted`。

# c# - 在继续之前等待一些事件（线程安全）

> ID：15412312
> 
> 赞同：0
> 
> 时间：2013-03-14T14:40:06.110
> 
> 标签：c#, multithreading, events

我有一个集成测试，我通过发送一个事件来触发事情。然后发生了一些异步事件，我希望由此引发特定数量的事件。

我的测试代码将等到这个数量的事件被引发。我通过对此事件的回调订阅和等待句柄来做到这一点。基本上

```
private AutoResetEvent thingsChangedEventOccurred = new AutoResetEvent(false);

private void OnThingsChangedEventOccurred(ThingsChangedEventData thingsChangedEventData)
{
this.thingsChangedEventOccurred.Set();
}

private void WaitForThisNumberOfThingsChangedEvents(int numberOfEventsToWaitFor)
{
    for (int eventsCaptured = 0; eventsCaptured < numberOfEventsToWaitFor; eventsCaptured++)
    {
        Assert.IsTrue(this.thingsChangedEventOccurred.WaitOne(60000));
    }
} 
```

在我发送启动事件的某个地方之后，我称之为 WaitFor.. 方法。我现在意识到这个实现在线程方面存在问题。我假设 AutoResetEvent 只能数到一。关于如何使这个线程安全的任何想法或模式？我想过让 eventsCaptured 成为一个领域......但是，由于其他原因，这有点不酷。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T17:22:03.333

我认为您正在寻找[CountdownEvent](http://msdn.microsoft.com/en-us/library/system.threading.countdownevent.aspx)。

基本上，您使用`CountdownEvent`您期望的事件数来初始化 a 。然后，随着每个事件的发生，代码会发出 信号`CountdownEvent`，在发出预期次数的信号后，它将被设置。

这是一件很方便的事情。一定要检查一下。

# php - OneToMany 关系与第三个表上的参考？

> ID：15412317
> 
> 赞同：0
> 
> 时间：2013-03-14T14:40:10.283
> 
> 标签：php, symfony, orm, doctrine-orm

我得到了两个具有简单 OneToMany 关系的实体，并且一切都按预期工作。

用户实体：

```
class User {
    /**
     * @ORM\OneToMany(targetEntity="Vita", mappedBy="owner")
     */
} 
```

和 vita 实体：

```
class Vita {
    /**
     * @ORM\ManyToOne(targetEntity="User", inversedBy="vitas")
     */
} 
```

到目前为止，一切都很好。但现在我更改了 vita 实体并添加了具有 OneToOne 关系的元实体。这个实体知道所有者和其他东西，但 vita 不再具有所有者属性。

我正在寻找的是使用第三张表作为参考的机会。有没有共同的学说方式？类似的东西？

```
class User {
    /**
     * @ORM\OneToMany(targetEntity="Vita", mappedBy="meta.owner")
     */
} 
```

编辑：

```
User
- id
- username
- password

Vita
- id
- meta_id
- [other fields]

Meta
- id
- owner_id (User)
- modifier_id (User)
- [other fields] 
```

*   一个用户有很多 Vita
*   一个 Vita 有一个 Meta

首先 owner_id 是 vita 的一个属性，现在它移到了 meta 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T18:59:32.523

根据关系模式，它应该如下所示：

```
class User {

    /**
     * @ORM\OneToMany(targetEntity="Meta", mappedBy="owner")
     */
    protected $metasOwned;

    /**
     * @ORM\OneToMany(targetEntity="Meta", mappedBy="modifier")
     */
    protected $metasModified;

}

class Vita {

    /**
     * @ORM\OneToOne(targetEntity="Meta", inversedBy="vita")
     */
    protected $meta;

}

class Meta {

    /**
     * @ORM\ManyToOne(targetEntity="User", inversedBy="metasOwned")
     */
    protected $owner;

    /**
     * @ORM\ManyToOne(targetEntity="User", inversedBy="metasModified")
     */
    protected $modifier;

    /**
     * @ORM\OneToOne(targetEntity="Vita", mappedBy="meta")
     */
    protected $vita;

} 
```

请注意，变量名称与关系的反面相关。

然后你只需运行命令

```
php app/console doctrine:generate:entities Your/AwesomeBundle/Entity 
```

它将为您创建 getter 和 setter，您将万事俱备。

`Your/AwesomeBundle/Entity`: 真正的路径是或可能是`src/Your/AwesomeBundle/Entity`。

# c# - 获取日期范围内的日期列表

> ID：15412325
> 
> 赞同：-4
> 
> 时间：2013-03-14T14:40:36.157
> 
> 标签：c#, asp.net

假设我有一个 LockedDate 列表。

LockedDate 有一个 DateTime 和一个 IsYearly 布尔值。如果 IsYearly 为真，则不应考虑该年份，因为它可以是任何年份。永远不应该考虑时间。

例如：X-Mas，12 月 25 日是每年一次。

现在我有一个 LockedDate 列表。

没有重复项。

现在我需要这个功能：

> 此函数将执行以下操作：如果 LockedDate 不是每年，并且日、月和年在源范围内，则添加到返回列表。
> 
> 如果 LockedDate 是每年一次，并且它的月/日在该范围内，则为该范围内的每一年添加一个新日期。
> 
> 假设我在 12 月 25 日将 IsYearly 设为 true。我的范围是 2013 年 1 月 22 日至 2015 年 2 月 23 日（含）。将需要将 2013 年 12 月 25 日作为新日期和 2014 年 12 月 25 日作为新日期添加到列表中。

```
List<Date> GetDateRange(List<LockedDate> source, DateTime start, DateTime end)
{

} 
```

谢谢

```
Dec 25 Yearly -> Dec 25 2013, Dec 25 2014
Dec 2, 2011  NOT Yearly -> Nothing
March 25, 2013 => March 25 2013 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T14:54:06.017

这可能会给你至少一个想法~~，它还没有经过测试~~：

```
List<DateTime> GetDateRange(List<LockedDate> source, DateTime start, DateTime end)
{
    if (start > end)
        throw new ArgumentException("Start must be before end");

    var ts = end - start;
    var dates = Enumerable.Range(0, ts.Days)
        .Select(i => start.AddDays(i))
        .Where(d => source.Any(ld => ld.Date == d
            || (ld.IsYearly && ld.Date.Month == d.Month && ld.Date.Day == d.Day)));
    return dates.ToList();
} 
```

**更新**这是您的示例数据的演示，它似乎工作：http: [//ideone.com/3KFi97](http://ideone.com/3KFi97)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T15:04:19.103

如果您有这样的 LockedDate 类：

```
public class LockedDate
{
       public DateTime Date { get; set; }
       public bool IsYearly { get; set; }
       ...
} 
```

比您可以使用此代码来获取所需的日期：

```
List<DateTime> GetDateRange(List<LockedDate> source, DateTime start, DateTime end)
{

       List<DateTime> dt = new List<DateTime>();
       foreach(LockedDate d in source)
       {
             if(!d.IsYearly)
             {
                  if(start<=d.Date && d.Date<=end)
                       dt.Add(d.Date);
             }
             else
             {
                  for(DateTime i = new DateTime(start.Year,d.Date.Month,d.Date.Day);i<=new DateTime(end.Year,d.Date.Month,d.Date.Day);i=i.AddYears(1))
                  {
                        dt.Add(i);
                  }
             }

      }
      return dt;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T14:57:58.493

此代码在不使用 Linq 的情况下执行您想要的操作：

```
 List<DateTime> GetDateRange(List<LockedDate> source, DateTime start, DateTime end)
    {
        List<DateTime> result = new List<DateTime>();

        foreach (LockedDate lockedDate in source)
        {
            if (!lockedDate.IsYearly && (lockedDate.Date >= start && lockedDate.Date <= end))
            {
                result.Add(lockedDate.Date);
            }
            else if (lockedDate.IsYearly && (lockedDate.Date >= start && lockedDate.Date <= end))
            {
                DateTime date = new DateTime(start.Year, lockedDate.Date.Month, lockedDate.Date.Day);

                do
                {
                    result.Add(date);
                    date = date.AddYears(1);
                } while (date <= end);
            }
        }

        return result;
    } 
```

一定要问你不明白的部分，所以我可以详细解释，但我认为这很简单。

此代码假定您的`LockedDate`类具有对象的`Date`属性`DateTime`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T15:38:16.667

```
var notYearly = lockDates.Where(d => !d.IsYearly && (d.Date.Date >= start && d.Date.Date <= end)).Select(d => d.Date);

var years = ((end - start).Days / 365) + 2;
var startYear = start.Year;

var yearly = lockDates.Where(d => d.IsYearly)
                        .SelectMany(d => Enumerable.Range(startYear, years)
                                                    .Select(e => new DateTime(e, d.Date.Month, d.Date.Day))
                                                    .Where(i => i.Date >= start && i.Date <= end));

var allDates = notYearly.Union(yearly) 
```

应该比仅遍历开始和结束之间的所有日子并检查（如果该日期正常）更有效。

# c# - 使用带有 C# 的 ASP.NET 以页面方式显示记录

> ID：15412330
> 
> 赞同：0
> 
> 时间：2013-03-14T14:40:44.960
> 
> 标签：c#, javascript, jquery, asp.net, html

我创建了从 MS SQL 数据库中检索数据并以格式良好的方式向用户显示的网页。检索的数据取决于用户选择的标准。但有时检索到的数据非常大。我想明智地向用户页面显示记录，即第一页上的 100 条记录和当用户单击下一步按钮时显示的下 100 条记录。这意味着用户第一次选择搜索条件时只检索100条记录，点击下一步按钮时检索下100条记录，以此类推，以减少从服务器到客户端的数据传输。

请建议我如何尽快实现这一目标。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T14:49:58.517

您要查找的内容称为**分页**。

这可以通过一百万种方式完成。你提到了 jquery、javascript 和 asp.net。出于显示目的，这一切都很好，但为了获得良好的性能，您需要确保页面的实际选择必须在后端完成。

一种方法是：http: [//msdn.microsoft.com/en-us/library/aa479347.aspx](http://msdn.microsoft.com/en-us/library/aa479347.aspx)这不是 jquery，但它显示了一种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T14:49:19.880

如果您想要简单快速的方式，那么请考虑使用这些 jQuery 插件

[jpaging](http://do-web.com/jpaging/overview) 或 数据[表](http://datatables.net/)。

您应该为此搜索设计模式。

请看这个[使用 jQuery 轻松构建强大的客户端 AJAX 分页](http://encosia.com/easily-build-powerful-client-side-ajax-paging-using-jquery/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T14:45:18.790

您可以使用[jqGrid](http://trirand.com/blog/jqgrid/jqgrid.html)或[DataTables](http://datatables.net/.)。两者都是非常流行的网格

要求用户在那里设置标准，然后根据该标准渲染网格。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T21:43:04.620

您对 asp.net 和 C# 的使用让我（可能是因为我偏爱它）认为“WebMatrix”。如果您确实在使用 WebMatrix，请查看它的 Grid Helper。但是，请注意，此方法可能会为您的 html 页面产生一些非常严重的开销（我的意思是，如果您查询 1,000 行并且每页仅使用 100 行，它将检索所有 1,000，使用 100，并浪费其他 900） . 此外，使用 WebGrid 会在表格中生成结果，这可能不是您喜欢的样式。

或者（仍在考虑“WebMatrix”），您可以在这里使用这篇文章（这是我的首选方法）： http: [//www.mikesdotnetting.com/Article/150/Web-Pages-Efficient-Paging-Without-The-WebGrid](http://www.mikesdotnetting.com/Article/150/Web-Pages-Efficient-Paging-Without-The-WebGrid)

别担心，这篇文章的解释非常简洁和准确（并且解释得比我好，所以我把它留给迈克来代替回答那个）。

# php - 在类别模块中显示父类别名称

> ID：15412333
> 
> 赞同：2
> 
> 时间：2013-03-14T14:40:52.340
> 
> 标签：php, smarty, prestashop

我在 prestashop 网站上工作，我想将类别模块的标题从“类别”更改为父类别的名称。因此，如果您在子类别页面上，则类别模块将具有父类别的标题，如果您在父类别页面上，则标题将是该类别名称。有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-12-29T21:27:35.803

```
 $category = new Category ($productcsv['id_category_default'],Context::getContext()->language->id);

 $category->name; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T18:50:04.197

我不知道类别模块，但这是它应该如何工作的：

在某处检索类别。在类别对象中，您会找到一个存储父类别 id 的属性（我不记得它是不是`id_parent`，`id_parent_category`但是这很容易找到）。使用此 ID，创建一个新的类别对象，您将拥有该名称。

# android - Android 应用程序中的模块化

> ID：15412335
> 
> 赞同：3
> 
> 时间：2013-03-14T14:41:03.723
> 
> 标签：android, design-patterns, modularity

我正在开发复杂性和功能都在增加的 Android 应用程序。由于我是新来的 android 开发（一般是对象编程），我需要一些方法来构建模块化 android 应用程序，以减少任何修改所需的工作量。

是否有通常用于此目的的模式？你能推荐最受关注的指南、作案手法，甚至书籍或手册吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:13:26.993

如果条件允许，请尝试在当地社区学院学习课程。

一些书：

*   Brett McLaughlin 的“Head First 面向对象分析与设计”；加里·波利斯；大卫·韦斯特
*   Paul Deitel 等人的“Java™：如何编程，第九版”

正如 Gabe 所说，这个问题太笼统了。

# session - 会话未保存在 ServiceStack 中

> ID：15412350
> 
> 赞同：1
> 
> 时间：2013-03-14T14:41:29.760
> 
> 标签：session, servicestack

我想使用会话功能但没有认证。我已经添加`Plugins.Add(new SessionFeature())`到`AppHost.cs`并且我有以下代码

```
public class CustomService : Service
{
public CustomResponse Any(CustomRequest pRequest)
{
    var CustomSession = base.Session.Get<CustomType>("MySession");//try to get the session
    if (CustomSession == null)
    {
        //create a new session
        CustomSession = new CustomType{MyId=1};
        base.Session["MySession"] = CustomSession;
        //base.Session.Set("MySession", CustomSession); //also tried this, to save the session.
        this.SaveSession(CustomSession,  new TimeSpan (0,20,0)); //Save the Session

    } 
}
} 
```

我遇到的问题`base.Session.Get<CustomType>("MySession")`是总是`null`. 我在会话的实施中遗漏了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:32:20.983

您需要使用 base.SaveSession() 保存会话。请参阅底部附近的[此处，有一个标题为“服务中的节省”的部分。](https://github.com/ServiceStack/ServiceStack/wiki/Sessions)

```
public class MyAppHost : AppHostBase
{
    public MyAppHost() : base("MyService", typeof(CustomService).Assembly)
    {
    }

    public override void Configure(Container container)
    {
       Plugins.Add(new SessionFeature()); 
    }
}

public class CustomType : AuthUserSession
{
    public int MyId { get; set; }
}

[Route("/CustomPath")]
public class CustomRequest
{
}

public class CustomResponse
{
}

public class CustomService : Service
{
    public CustomResponse Any(CustomRequest pRequest)
    {
        var CustomSession = base.SessionAs<CustomType>();
        if (CustomSession.MyId == 0)
        {
            CustomSession.MyId = 1; 
            this.SaveSession(CustomSession, new TimeSpan(0,20,0));
        }

        return new CustomResponse();
    }
} 
```

**更新：**

扩展方法存在 Resharper 问题，请参见[此处](https://stackoverflow.com/questions/4618742/resharper-intellisense-problem-with-extension-methods)，这似乎会影响 SaveSession()。 **解决方法：**

*   `ServiceExtensions.SaveSession(this, CustomSession);`ReSharper 可能会提示重新格式化并且它会起作用。
*   Ctrl-Alt-空格重新格式化
*   `RequestContext.Get<IHttpRequest>().SaveSession(CustomSession)`可以保存会话。

# c - 在 ubuntu 中为 MIPS 编译 netcat 的问题

> ID：15412351
> 
> 赞同：1
> 
> 时间：2013-03-14T14:41:29.683
> 
> 标签：c, compiler-construction, mips

我是新手，我有点搞砸了：

我正在尝试为 MIPS 编译 netcat 源代码，以便将其部署在我的路由器中，我所做的是：

下载 mips 的工具链：mips-linux-gcc

下载netcat源码并展开到一个文件夹

```
cd path/to/netcatsource

Execute:
CC=path/to/compiler/mips-linux-gcc ./configure --host=mips-linux

make 
```

make 命令工作正常，并在编译的 netcat 文件上尝试使用 file 命令显示：

```
file netcat
OUTPUT: ELF 32-bit MSB executable, MIPS, MIPS-I version 1 (SYSV), dynamically linked (uses shared libs), not stripped 
```

对我来说一切似乎都很好，但是如果我在我的 ubuntu 机器上执行 ./netcat ，它就可以工作，一旦我将它上传到路由器，它就会显示以下错误：

```
# ./netcat
Segmentation fault 
```

这是来自我的路由器的 /proc/cpuinfo：

```
# cat /proc/cpuinfo
system type             : 963281T_TEF
processor               : 0
cpu model               : Broadcom4350 V7.5
BogoMIPS                : 319.48
wait instruction        : yes
microsecond timers      : yes
tlb_entries             : 32
extra interrupt vector  : no
hardware watchpoint     : no
ASEs implemented        :
shadow register sets    : 1
core                    : 0
VCED exceptions         : not available
VCEI exceptions         : not available

unaligned exceptions            : 1395 
```

谁能帮我解决这个问题？问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-08T00:50:26.593

*（我无法添加评论，因为我没有足够的积分）*

尝试**静态编译**源代码
问题可能是因为您在路由器上没有必要的库，可能二进制文件指向**ld-linux.so**并且路由器使用**ld-uclibc.so**。
所以尝试静态构建...

**更新**
我推荐**buildroot**工具链，顺便说一下，它包括 netcat 和许多其他工具，如busybox

# vb.net - 我可以将 WebBrowser 控件的呈现引擎更改为旧版本吗？

> ID：15412353
> 
> 赞同：1
> 
> 时间：2013-03-14T14:41:41.573
> 
> 标签：vb.net, winforms, internet-explorer, internet-explorer-9, webbrowser-control

我有一个带有 webbrowsercontrol 的应用程序。此 webbrowsercontrol 将加载与 IE9 不兼容的页面。（无法更改，因为它是由其他人制作的） 默认情况下，VB.NET 2010 的 webbrowser 控件使用 IE9 渲染引擎，并且可以在某种兼容模式下运行。不幸的是，即使在兼容模式下，该页面也无法正常工作。有没有办法使用带有正版 IE7 或 IE8 渲染引擎的 webbrowser 控件？谢谢

更新

解释问题：我有一个页面，里面有一个 JAVA 小程序。这个 java 小程序有一个带有文本框的弹出窗口。这个文本框被迫留在前面直到关闭。这在 IE7 和 IE8 中运行良好。但是在 IE9 中，如果我移动浏览器窗口或访问任何其他应用程序，此消息框会跳到后面。并且不能再点击了。我的网络浏览器（运行任何仿真的 IE9）不起作用。即使我模拟 IE7 或 IE8，它也会在 IE9 上运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T22:23:15.117

> 有没有办法使用带有正版 IE7 或 IE8 渲染引擎的 webbrowser 控件？

可以，但它要求您将计算机上安装的 Internet Explorer 版本降级到版本 7 或 8，这不会带来友好的安装体验。

问题是 WebBrowser 控件总是使用安装在计算机上的 IE 版本，因为它只是将渲染委托给本机库 shdocvw.dll，与 IE 本身使用的库相同。在您的情况下，这似乎是 IE 9。但是，默认情况下，它也在 IE 7 兼容模式下运行。您可以通过[编辑注册表](https://stackoverflow.com/a/4357982/366904)来更改此设置，但不能更改渲染引擎的版本。

不幸的是，这意味着你不走运，因为在一台计算机上运行多个版本的 IE 不是而且从来不是受支持的配置。它[可以](https://stackoverflow.com/questions/574463/running-internet-explorer-6-internet-explorer-7-and-internet-explorer-8-on-the) 用于测试目的，但它需要额外的软件，并且版本不能很好地协同工作[。](https://stackoverflow.com/questions/909459/how-to-install-multiple-versions-of-ie-at-the-same-time)对于一个支持独立的 IE 浏览器而另一个驱动 .NET WebBrowser 控件来说，肯定不够好。

修复代码以在 IE 9 中正常工作是最佳选择。IE 9 代表了微软在标准兼容浏览器方面的缓慢进展，虽然它仍有一些怪癖，但值得支持。我知道你说过网站代码是由“其他人”维护的，但我建议向他们提交支持请求——他们的代码有问题，需要修复。如果您（或他们）在这方面需要帮助，他们可以在 Stack Overflow 上向我们的一些~~代码忍者~~网络标准专家咨询。

或者，您可以探索用替代控件替换 WebBrowser 控件。.NET Framework 有几个不错的，封装了其他流行浏览器使用的渲染引擎。例如：

*   **[WebKit .NET](http://webkitdotnet.sourceforge.net/)**是 Google Chrome 和 Apple Safari 使用的 WebKit 引擎的包装器。
*   **[GeckoFX](http://bitbucket.org/geckofx/)**是 Mozilla Firefox 使用的 Gecko 渲染引擎的包装器。
*   **[MozNet](http://se7en-soft.com/moznet/)**是 Gecko 的替代包装器。

不幸的是，如果您正在处理的代码写得如此糟糕，以至于 IE 9 在标准合规方面的微弱尝试使其陷入瘫痪，那么切换到另一个更符合标准的浏览器的渲染引擎不太可能带来很大的成功。

# java - 无法在 WebLogicServer 10mp1 上启动应用程序

> ID：15412357
> 
> 赞同：0
> 
> 时间：2013-03-14T14:41:49.500
> 
> 标签：java, weblogic, weblogic-10.x

无法启动我添加的应用程序。它处于准备状态，如果我尝试启动它，什么也不会发生。它是今天安装的新本地服务器。如果检查日志，它会说 -

```
####<2013-mar-14 kl 10:53 CET> <Warning> <netuix> <1> <AdminServer> <[ACTIVE] ExecuteThread: '2' for queue: 'weblogic.kernel.Default (self-tuning)'> <weblogic> <1363254820815> <BEA-423420> <Redirect is executed in begin or refresh action. Redirect url is /console/console.portal?_nfpb=true&_pageLabel=WebAppApplicationOverviewPage&WebAppApplicationOverviewPortlethandle=com.bea.console.handles.AppDeploymentHandle%28%22com.bea%3AName%3DCMGWebTool%2CType%3DAppDeployment%22%29.>

####<2013-mar-14 kl 13:19 CET> <Warning> <netuix> <1> <AdminServer> <[ACTIVE] ExecuteThread: '0' for queue: 'weblogic.kernel.Default (self-tuning)'> <weblogic> <1363263546931> <BEA-423420> <Redirect is executed in begin or refresh action. Redirect url is /console/console.portal?_nfpb=true&_pageLabel=HomePage1.> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T08:48:19.643

解决了。添加了一个监听地址，它起作用了。

# asp.net - 如何在 REST Web 服务中编写具有许多参数的方法

> ID：15412364
> 
> 赞同：3
> 
> 时间：2013-03-14T14:42:14.750
> 
> 标签：asp.net, web-services, rest, servicestack

我需要开发一个有很多参数的网络方法。在 REST 中，我了解 Web 服务通过将自身附加到特定实体而具有其自身的意义，并且 HttpVerb 确定操作类型。

这个 webmethod 不能与实体关联，它只是调用一个存储过程并返回数据，所以我假设它只有一个 GET 方法。但它的参数太多，无法放入 URL。那么，我是否需要考虑使用 POST 方法而不是 GET。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T01:39:10.937

它不会真正以 100% 的方式传递给 REST，但您可以使用一种 Web 方法，您可以调用该方法查看 url 的查询字符串部分以获取其他参数。

您将拥有一个路由为“/GetData”的 Web 方法。

domain.com/GetData?Parameters=firstParm=1^secondParm=info^thirdParm=test

然后在 web 方法中，您将检查参数的查询字符串，然后用“^”符号拆分字符串。

或者

domain.com/GetData?firstParm=1&secondParm=info&thirdParm=test

这你必须为每个参数做一个查询字符串。

# php - php foreach 无效参数

> ID：15412369
> 
> 赞同：0
> 
> 时间：2013-03-14T14:42:29.650
> 
> 标签：php, foreach

我正在构建一个视频搜索引擎，并想像 youtube 一样为每个人创建一个。问题是我在使用 php foreach() 时遇到问题。我收到无效的提供参数错误。这是代码：

```
<?php
$sql=mysql_query("SELECT*FROM videos WHERE Name='$nemo'");
while($row=mysql_fetch_array($sql,MYSQL_ASSOC)){
$name=$row['Name'];
}
foreach($name as $key=>values) {
echo '<div id="block'><h1>'.$name.'</h1></div>';    
}?> 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T14:49:26.223

您不应该使用[mysql](http://php.net/manual/en/function.mysql-query.php)扩展，因为它已被弃用，请改用[PDO](http://php.net/PDO)。

无论如何，我就是这样做的：

```
$sql = mysql_query("SELECT * FROM videos WHERE Name='$nemo'"); //be careful you might need to secure the $nemo var.

while($row = mysql_fetch_assoc($sql)) //fetch_assoc to have an associated array
{
    $name = $row['Name'];

    echo '<div id="block"><h1>'.$name.'</h1></div>'; //here you placed a ' instead of a "
    //Do the rest of your stuff here
} 
```

您的数据正在从`mysql_query`内部解析`while`，您无需使用`foreach`或其他任何方式再次解析它们。

写所有名字的另一个例子：

```
$sql = mysql_query("SELECT * FROM videos WHERE Name='$nemo'");

echo '<div id="block"><h1>';

while($row = mysql_fetch_assoc($sql)) 
    echo $row['Name'] . ',';

echo '</h1></div>'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T14:44:56.683

```
<?php
  $sql=mysql_query("SELECT*FROM videos WHERE Name='$nemo'");
  while($row=mysql_fetch_array($sql,MYSQL_ASSOC)){
    echo '<div id="block"><h1>'.$row['Name'].'</h1></div>';   
   }
?> 
```

$name 不是数组。你也不想在这里使用 foreach 。while 循环在那里工作。所以做这样的事情。如果你需要 foreach 那么 $name 被用作一个数组。

```
$name[] = $row['Name']; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T14:48:40.117

foreach 与数组一起使用，但`$name`它是字符串，因为您为其分配了单元格值。使它成为一个数组并向其中添加项目，它应该像`$name[]=$row['Name'];` 现在你的代码应该变成：

```
<?php
$sql=mysql_query("SELECT*FROM videos WHERE Name='$nemo'");
while($row=mysql_fetch_array($sql,MYSQL_ASSOC)){
$name[]=$row['Name'];
}
foreach($name as $key=>values) {
    echo '<div id="block"><h1>'.$name.'</h1></div>';    
}
?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T14:47:29.710

试试这个，你可以遍历结果集并在那里打印出 $row['Name'] 。

```
<?php
    $sql=mysql_query("SELECT*FROM videos WHERE Name='$nemo'");
    while($row=mysql_fetch_array($sql,MYSQL_ASSOC)){
      echo '<div id="block"><h1>'.$row['Name'].'</h1></div>';    
    }
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T15:16:23.517

如果您为 foeach() 提供除数组以外的任何参数，则会出现此错误...。阅读您的问题后，我想到的第一件事是参数不是有效的数组...正确的代码将是

```
 <?php
        $name = array(); // declare $name as array 
        $sql=mysql_query("SELECT*FROM videos WHERE Name='$nemo'");
        while($row=mysql_fetch_array($sql,MYSQL_ASSOC))
        {
         $name[]=$row['Name'];
        // now even $name = $row['Name'] means $name[0] = 'value of $row['Name']'
        }
       // Now it will definately work
        foreach($name as $key=>values) 
        {
            echo '<div id="block'><h1>'.$name.'</h1></div>';    
        }
     ?> 
```

# c# - 无法加载文件或程序集'Newtonsoft.Json.Net35

> ID：15412371
> 
> 赞同：7
> 
> 时间：2013-03-14T14:42:32.160
> 
> 标签：c#, .net, json

我的代码抛出了这个运行时异常

> {“无法加载文件或程序集 'Newtonsoft.Json.Net35, Version=4.0.2.0, Culture=neutral, PublicKeyToken=30ad4fe6b2a6aeed' 或其依赖项之一。系统找不到指定的文件。”：“Newtonsoft.Json。 Net35，版本=4.0.2.0，文化=中性，PublicKeyToken=30ad4fe6b2a6aeed"}

但我已经使用 NuGet 安装了 Newtonsoft.Json

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-14T15:52:10.423

几个选项：

*   确保 nuget 更新了您的 packages.config 文件并打开了 packagerestore。当使用 VCS 并且用户没有正确提交更改时，这些可能会导致问题。
*   尝试重新启动VS，我发现从VCS下拉后，引用并不总是正确更新
*   打开nuget，删除包并重新安装。

# assembly - 使用 NASM 的字符串长度

> ID：15412378
> 
> 赞同：0
> 
> 时间：2013-03-14T14:42:46.087
> 
> 标签：assembly, x86, nasm

我试图在 NASM 中编写代码来获取给定字符串的长度。但是它给出了一些垃圾值作为长度。代码如下：

```
 section .data
        a db "nitin",10,0
        msg db "length = %d",10,0
    section .text
        global main
        extern printf
    main:
         nop
         xor eax,eax
         mov eax, a
         xor edx,edx
    length:
         mov dl, byte[eax]
         cmp dl,0
         je print
         inc eax
         jmp length

    print:
         pusha
         push eax
         push msg
         call printf
         add esp,8
         popa
    done:
         nop 
```

结果显示：长度=132445678

你能帮我解决我的错误吗？

谢谢你

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T14:49:51.007

您的代码段中的 EAX 遵循字节的地址，而不是字符串中的索引。因此，您打印的不是长度，而是终止空字符的地址。

要么重新制定 EAX 以从零开始并读取地址 [a + eax] 处的字节，要么在打印出长度之前从 EAX 中减去 a 的地址。要么会工作。

编辑：对于第一种方法，主循环如下所示：

```
main:
     nop
     xor eax,eax ; removed the mov eax,a line - eax stays zero
     xor edx,edx
length:
     mov dl, byte[a+eax]         ; eax is the index in the string
     cmp dl,0
     ;The rest stays the same 
```

对于第二种方法，循环保持不变，但打印部分得到一个额外的`sub`：

```
print:
     sub eax, offset b ; convert from address to index
     pusha
     push eax
     push msg
     ; The rest is the same 
```

然而，这将是最短的方法：

```
main:
    nop
    mov edi, a ; the string we're scanning
    xor al, al ; That's what we're scanning the string for - a null valued byte
    mov ecx, 0ffffffffh ; we bet on string being null terminated - no hard limit on string scanning
    repne scasb ; Once this finishes, ECX is (0xffffffff - length - 1) (because the terminating null is counted too)
    mov eax, 0fffffffeh
    sub eax, ecx    ; Now eax is (0xffffffff - 1 - ecx), which is string length
print:
    ; Same as before 
```

查找`scas`命令以及如何将其与`repxx`前缀一起使用。就好像 C RTL 的一部分（strlen、strcpy 等）是在 Intel CPU 指令集中实现的。

附带说明一下，该片段有两条完全无关的行 -`xor eax, eax`并且`xor edx, edx`在函数的开头。两者都将寄存器清零，无论如何都会在下一行被覆盖。

# c# - 我可以将 Android 计费服务集成到使用 MonoDroid 制作的应用程序中吗？

> ID：15412380
> 
> 赞同：0
> 
> 时间：2013-03-14T14:42:48.350
> 
> 标签：c#, android, xamarin.android, xamarin, android-billing

目前正在讨论将 Xamarin 用于项目，有人对 android 计费系统有任何想法吗？理想情况下在订阅服务上。都是通过play store完成的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:37:37.907

[应用内结算](http://developer.android.com/google/play/billing/billing_integrate.html)需要从您的应用向`IInAppBillingService`. 这需要使用 AIDL 文件来调用 IPC 方法调用，但目前Mono for Android[不支持](http://docs.xamarin.com/guides/android/application_fundamentals/services/part_2_-_bound_services#Inter-process_Communication_with_Services)。但是，仍然可以在 Mono for Android 中使用 AIDL，但需要一些解决方法。看看[这个答案](https://stackoverflow.com/a/7876830/620138)。

另外，我听说有一些现有的解决方案可以进行应用内计费，请查看[this](https://github.com/MarkEaton1/Monodroid-InApp-Billing)或[this](https://github.com/jmawebtech/MonoGame-StarterKits/tree/master/Android/InAppBilling)。

# knockout.js - 热毛巾 SPA Durandal Knockout 和 Dynatree

> ID：15412386
> 
> 赞同：1
> 
> 时间：2013-03-14T14:42:54.547
> 
> 标签：knockout.js, dynatree, durandal, hottowel

我试图让 dynatree 控件在 Hottowel 视图模型中工作，基于这个小提琴，[http://jsfiddle.net/EZgNs](http://jsfiddle.net/EZgNs)

```
var ViewModel = function() {
    var self = this;
    self.initialized = ko.observable(false);
    self.items = ko.observableArray();

    // Use JSFiddle echo to simulate an AJAX service
    (function() {
        $.ajax({ url:"/echo/json/", data:data, type:"POST",
                 success:function(data)
                 {
                   // Map the returned JSON to the View Model  
                   ko.mapping.fromJS(data, {}, self.items);
                   self.initialized(true);
                 }
               });
     })();    
};

ko.bindingHandlers.dynatree = {
    update: function(element, valueAccessor, allBindingsAccessor, viewModel) {
        setTimeout( function() { $(element).dynatree()}, 0);
    }
};

ko.applyBindings(new ViewModel()); 
```

无法理解如何编辑 vm 以合并 dynatree ko。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T00:16:03.380

首先，你不应该明确地绑定你的视图模型；让杜兰达尔为你做这件事。接下来，您可以通过将绑定处理程序放在 main.js 或 shell.js 文件的 activate 方法中，在一开始就注册任何敲除绑定处理程序。这样，您可以保证绑定处理程序在绑定时可用于所有视图模型/视图组合。

# eclipse - 同步 Eclipse 项目

> ID：15412389
> 
> 赞同：1
> 
> 时间：2013-03-14T14:43:03.437
> 
> 标签：eclipse

我目前正在使用 Java 开发一个团队项目，使用 Eclipse 提交我对 SVN 存储库所做的更改。为了使事情更安全，我实际上有两个版本的 Eclipse 项目：一个是我直接使用的，另一个是我应该将测试后所做的更改复制到其中。然后后者将被提交并与团队的其他成员共享。

我在项目的第二个版本上做了一些工作。现在，我想将所有这些复制到第一个版本中。那么，如何在 Eclipse 上同步两个项目呢？将所有更改从一个复制到另一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T14:52:24.303

如果您使用的是 SVN，为什么要保留重复副本？SVN 为您做到这一点。您签出（或更新，如果您已经拥有该项目），然后进行修改，测试它们，并（假设它们测试正确）提交。没有理由不直接在您的工作副本上工作。

如果你搞砸了，你只需使用 SVN 将你的更改恢复到最后的良好状态。

当然，如果您正在进行可能影响整个应用程序的重大更改，同时对当前工单进行一些工作，您可能会考虑使用 SVN 分支。

# c# - C# WinRT - 从后面的代码创建和修改按钮

> ID：15412393
> 
> 赞同：0
> 
> 时间：2013-03-14T14:43:18.633
> 
> 标签：c#, button, windows-8, windows-runtime, code-behind

我正在寻找一些解决方案，但一无所获。我想简单地从后面的代码创建按钮并按照我的意愿修改它们。这个想法是创建一个可以使用“Tapped”或“Clicked”方法的按钮。

但是当我想添加“Tapped”方法时，我找不到方法。你有什么想法吗？

```
button = new Image { Width = 100 , Height = 100 };
button.Source = new Windows.UI.Xaml.Media.Imaging.BitmapImage(new Uri("ms-appx:/Assets/image.png"));
Canvas.SetLeft(button, width);
Canvas.SetTop(button, height);
canvasPlan.Children.Add(button); 
```

我找到了这个东西，但我不知道如何使用它：

```
button.Tapped += .. ? 
```

谢谢你的时间，问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T14:53:29.680

`button.Tapped +=`是一个事件。您需要使用 `+=`语法分配事件处理程序。事件处理程序是具有签名的方法`public void EventHandler(object sender, TappedRoutedEventArgs e)`。

您需要定义方法主体中发生的事情：

```
public void EventHandler(object sender, TappedRoutedEventArgs e){
 //determine what happens here
} 
```

请参阅[Button-Control](http://msdn.microsoft.com/en-US/library/windows/apps/windows.ui.xaml.controls.button)和[MSDN](http://msdn.microsoft.com/en-US/library/windows/apps/br230232.aspx)

# haskell - GADT 是何时在 GHC 中引入的？

> ID：15412394
> 
> 赞同：7
> 
> 时间：2013-03-14T14:43:19.460
> 
> 标签：haskell, ghc, gadt

GADT 是何时在 GHC 中引入的？（版本+日期）

此外，它们是否仍被视为语言扩展，或者它们现在是否是 Haskell 标准的一部分？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-14T14:51:13.103

2005 年 3 月发布的[ghc-6.4](http://www.haskell.org/ghc/docs/6.4/html/users_guide/release-6-4.html)首次支持 GADT 。

它们仍然是一种语言扩展，最新的标准 Haskell2010 没有采用它们（因为它是一个仅 GHC 的扩展，afaik）。

# django - 如果数据存在于其他模型中，则过滤数据？

> ID：15412406
> 
> 赞同：0
> 
> 时间：2013-03-14T14:43:48.010
> 
> 标签：django

```
class WPArticle(models.Model):
    title = models.TextField(unique=True)
    content = models.TextField()
    source = models.URLField() #article source 
    ctime = models.DateTimeField(auto_now_add=True)
    mtime = models.DateTimeField(auto_now=True,auto_now_add=True)
    post_tag = models.CharField(max_length=200)
    category = models.CharField(max_length=200)

    def __unicode__(self):
        return self.title

class WPSendRecord(models.Model):
    wpconf = models.ForeignKey(WPConf)
    wparticle = models.ForeignKey(WPArticle)
    ctime = models.TimeField(auto_now=True,auto_now_add=True)

    def __unicode__(self):
        return self.wparticle.title 
```

我想查询出所有不在 WPSendRecord 中的 WPArticle？如何编写代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T14:49:02.763

您可以使用[`exclude`](https://docs.djangoproject.com/en/1.3/ref/models/querysets/#exclude)QuerySet 方法：

```
 articles = WPArticle.objects.exclude(wpsendrecord__isnull=True) 
```

# r - 仅为某些组添加回归线 ggplot

> ID：15412413
> 
> 赞同：6
> 
> 时间：2013-03-14T14:44:18.040
> 
> 标签：r, ggplot2, trendline

我想在我的 ggplot 中添加趋势线，但仅限于重要的关系。现在`geom_smooth`或`stat_smooth`为每个组添加趋势线，但我想指定哪些组获得趋势线，哪些没有。

下面是我的脚本示例：

```
plot20<-ggplot(data, aes(x=data$Density, y=data$Total.degrees, color=Species, shape=Species)) 
+ geom_point(size=3) 
+ scale_shape_manual(values=shapeset) 
+ scale_colour_manual(values=colorset) 
+ theme(legend.position="none") 
+ geom_smooth(method=lm, se=FALSE) 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-14T16:21:21.733

一种解决方案是将`subset()`您的数据放入`geom_smooth()`其中并给出您需要绘制趋势线的值。

作为示例使用的数据`mtcars`（因为未提供示例数据）。`subset()` `cyl`选择 4 或 6 的值。Insede`geom_smooth()`也`aes()`应该重复。

```
ggplot(mtcars,aes(wt,mpg,color=factor(cyl)))+geom_point()+
    geom_smooth(data=subset(mtcars,cyl==4 | cyl==6),
               aes(wt,mpg,color=factor(cyl)),method=lm,se=FALSE) 
```

![在此处输入图像描述](../Images/f30e1b4baf0e5322acb95392b035f8d8.png)

# binary-search-tree - 平衡二叉搜索树的摊销复杂度

> ID：15412425
> 
> 赞同：1
> 
> 时间：2013-03-14T14:44:38.397
> 
> 标签：binary-search-tree, time-complexity, red-black-tree, amortized-analysis

我不完全确定摊销复杂性意味着什么。采用平衡二叉搜索树数据结构（例如红黑树）。正常搜索的成本自然是 log(N)，其中 N 是节点数。但是按升序排列的 m 次搜索序列的摊销复杂度是多少。它只是log（N）/m吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T17:30:08.343

好吧，您可以将渐近分析视为设置算法运行时间上限的严格方法，其中摊销分析是一种自由方法。

例如，考虑具有两个语句 S1 和 S2 的算法 A。执行 S1 的成本是 10，S2 是 100。这两个语句都放在一个循环中，如下所示。

```
n=0;
while(n<100)
{
  if(n % 10 != 0)
  {
    S1;
  }
  else
  {
    s2;
  }
  n++;
} 
```

这里 S1 执行的次数是 S2 的 10 倍。但是渐近分析只会考虑 S2 需要 10 个单位的时间并且它在一个循环中执行 100 次的事实。因此，执行时间的上限约为 10 * 100 = 1000。其中，摊销分析平均了语句 S1 和 S2 的执行次数。因此，执行的上限时间约为 200 次。因此，摊销分析可以更好地估计执行算法的上限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T14:55:43.080

我认为是 mlog(N) 因为你必须做 m 个搜索操作（每次从根节点到目标节点），而单个操作的复杂度是 log(N)。

编辑：@user1377000 你是对的，我把分期复杂度和渐近复杂度弄错了。但我不认为它是 log(N)/m... 因为不能保证您可以在 O(logN) 时间内完成所有 m 搜索操作。

[什么是算法的摊销分析？](https://stackoverflow.com/questions/11102585/what-is-amortized-analysis-of-algorithms) 我认为这可能会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T17:45:50.100

在**平衡**搜索树的情况下，摊销复杂度等于渐近复杂度。每个搜索操作都需要`O(logn)`时间，包括渐近的和平均的。因此，对于`m`搜索，平均复杂度为`O(mlogn)`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-13T11:28:22.070

一次性输入要找到的物品。

您可以从分而治之的角度来考虑它。

1.  取`x`根节点中的项目。
2.  二进制搜索`x`到您的项目数组`m`。
3.  将数组划分为小于`x`和大于的事物`x`。（忽略等于 的东西`x`，因为你已经找到了。）
4.  递归地在你的左孩子中搜索前一个分区，在你的右孩子中搜索后者。

一个最坏的情况：您的项目数组只是叶节点中的事物列表。（`n`大致是`2m`。）您必须访问每个节点。您的搜索将花费`lg(n) + 2*lg(n/2) + 4*lg(n/4) + ...`。那是线性的。可以将其视为进行越来越小的二进制搜索，直到您将数组中的每个元素都命中一次或两次。

我认为还有一种方法可以通过在搜索后跟踪您在树中的位置来做到这一点。C++`std::map`和`std::set`返回迭代器可以在树中左右移动，它们可能具有可以利用现有迭代器进入树的方法。

# winapi - 替换 Win32 属性表中的文本“OK”、“Cancel”、“Apply”和“Help”

> ID：15412427
> 
> 赞同：0
> 
> 时间：2013-03-14T14:44:42.850
> 
> 标签：winapi, mfc

在 Win32 属性表上，文本“OK”、“Cancel”、“Apply”和“Help”会自动以系统语言显示。如果软件的语言与系统的语言不同，这可能是个问题。

例如，如果客户在英文 Windows 上安装我们软件的法文版本，属性表的内容将为法文，但属性表底部的标准按钮无论如何都是英文的。

有谁知道我该如何更改这些文本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T08:11:20.587

实际上更改这些文本非常简单。唯一必须做的是从 CPropertySheet 派生一个类，重写 OnInitDialog 方法并更改重写的 OnInitDialog 中的文本。

```
class CMyPropertySheet : public CPropertySheet
{
public :
  CMyPropertySheet() ;

protected:
  virtual BOOL OnInitDialog();

  DECLARE_MESSAGE_MAP()
} ;

BOOL CMyPropertySheet::OnInitDialog()
{
  ...
  SetDlgItemText(IDOK, whatever..) ;
  SetDlgItemText(0x3021, whatever..) ;   // 0x3021 == IDAPPLY
  SetDlgItemText(IDCANCEL, whatever...) ;
  SetDlgItemText(IDHELP, whatever...) ;
} 
```

# r - R中的Multtest包返回未正确调整p值

> ID：15412428
> 
> 赞同：1
> 
> 时间：2013-03-14T14:44:43.037
> 
> 标签：r, vector, false-positive

我正在尝试使用 R 包 multtest 来调整 p 值列表以进行多次测试。但是，multtest 将仅返回与分析的 p 值列表等长的“1”字符列表。

输入文件是一个文本文件，其中 pvalue 由换行符分隔。该文件的一部分复制如下：

```
0.182942602
0.333002877
0.282000206
0.161501682
0.161501682 
```

我从 Bioconductor 下载了 multtest 包 (multtest_2.14.0)，并在 R 版本 x64 2.15.2 中运行它。有谁知道 multtest 和 R 2.15.2 之间是否存在兼容性问题？

我的代码：

```
library(multtest, verbose = FALSE)
table1 <- read.table("p-values.txt", header = FALSE, colClasses = "double")
table2 <-as.vector(as.double(table1[,1]))
results<-p.adjust(table2, method = c("holm", "hochberg", "hommel", "bonferroni", "BH", "BY", "fdr", "none"))
write.table(results, file = "output.txt") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:04:40.643

这不是错误——当在该 p 值向量中没有可被视为显着的 p 值时，这是正确的调整。

您的代码执行 Holm 校正（`method`仅接受一个参数，在这种情况下将使用`"holm"`方法，即向量中的第一项）。Holm 方法将在以下情况下正确返回所有

```
min(p) * length(p) > 1 
```

在那种情况下（使用这个多重假设检验框架），向量中没有可以被认为是显着的 p 值。

* * *

如果您想查看血淋淋的细节，该`holm`方法的代码（直接取自 multtest 包）是

```
i <- seq_len(lp)
o <- order(p)
ro <- order(o)
pmin(1, cummax((n - i + 1L) * p[o]))[ro] 
```

其中`p`是输入向量， 和`lp`是`n`向量的长度。该表达式`(n - i + 1L) * p[o]`是说“对于排序列表中的每个项目，`n+1`减去它的索引，然后乘以它的值”。对于最小项目，即`(n + 1 - 1) * min(p)`-> `n * min(p)`。表示累积最大值- 这`cummax`意味着后续项都不能小于第一个值。并且`pmin(1, ...)`意味着对于向量中的每个项目，如果项目大于 1，则将值设置为等于 1（因为大约 1 的 p 值是没有意义的）。

这意味着如果`n * min(p)`大于 1，则最小项的调整 p 值为 1，这意味着每个项目的调整 p 值必须为 1。

# jquery - Javascript JQuery倒数计时器

> ID：15412429
> 
> 赞同：0
> 
> 时间：2013-03-14T14:44:44.200
> 
> 标签：jquery, html, countdowntimer

我正在尝试为日期/时间创建一个简单的倒数计时器。

我目前只有以下几天可以运行运行良好的脚本：

```
<div id="countdown">

today = new Date();
BigDay = new Date("March 29, 2013");
msPerDay = 24 * 60 * 60 * 1000 ;
timeLeft = (BigDay.getTime() - today.getTime());
e_daysLeft = timeLeft / msPerDay;
daysLeft = Math.floor(e_daysLeft);
document.write(daysLeft + " days to go!");

</div> 
```

我现在正在尝试创建一个完整的倒数计时器（带有小时、分钟和秒）并创建了以下脚本。html 没有显示在页面上。

```
var today = new Date();
var BigDay = new Date("29 03 2013, 14:30:00");
var msPerDay = 24 * 60 * 60 * 1000 ;
var timeLeft = (BigDay.getTime() - today.getTime());
var e_daysLeft = timeLeft / msPerDay;
var daysLeft = Math.floor(e_daysLeft);
var e_hrsLeft = (e_daysLeft - daysLeft)*24;
var hrsLeft = Math.floor(e_hrsLeft);
var e_minsLeft = (e_hrsLeft - hrsLeft)*60;
var minsLeft = Math.floor(e_minsLeft);
var e_secsLeft = (e_minsLeft - minsLeft)*1000;
var secsLeft = Math.floor(e_secsLeft);
var timeString = daysLeft + " : " + hrsLeft + " : " + minsLeft + " : " + secsLeft;

$('document').ready(function(){

window.setInterval(function(){
$('#countdown').html(timeString);
}, 1000);

}); 
```

我不确定问题可能是什么。第一个脚本包含在 html 中，第二个是外部 js 文件。

编辑：现在显示 html，但是所有值都显示为 NaN。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-14T14:59:21.863

除了提到的语法错误之外，还有逻辑错误，您需要计算超时函数内的剩余时间字符串，否则这些值仅在页面加载时计算。

```
$(function(){
    var BigDay = new Date("29 Mar 2013, 14:30:00");
    var msPerDay = 24 * 60 * 60 * 1000 ;

    window.setInterval(function(){
        var today = new Date();
        var timeLeft = (BigDay.getTime() - today.getTime());

        var e_daysLeft = timeLeft / msPerDay;
        var daysLeft = Math.floor(e_daysLeft);

        var e_hrsLeft = (e_daysLeft - daysLeft)*24;
        var hrsLeft = Math.floor(e_hrsLeft);

        var e_minsLeft = (e_hrsLeft - hrsLeft)*60;
        var minsLeft = Math.floor(e_minsLeft);

        var e_secsLeft = (e_minsLeft - minsLeft)*60;
        var secsLeft = Math.floor(e_secsLeft);

        var timeString = daysLeft + " : " + hrsLeft + " : " + minsLeft + " : " + secsLeft;
        $('#countdown').html(timeString);
    }, 1000);
}) 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/aYn5A/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T14:53:25.187

你在这里有一个错误：`var minsLeft = Math.floor((e_minsLeft);`

第一个括号没有关闭，应该是`var minsLeft = Math.floor(e_minsLeft);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T14:53:57.633

因为您没有每秒运行 timeString 计算，所以 #countdown div 中的文本永远不会改变

# asp.net - 使用 URL 重写将参数添加到 url

> ID：15412430
> 
> 赞同：2
> 
> 时间：2013-03-14T14:44:45.420
> 
> 标签：asp.net, iis-7, url-rewriting

我尝试使用 URL 重写 IIS 模块，以便将 url 修改为另一个 url，该参数包含在原始 url 的路径中。

Exp : 原始 URL : myurl/specialattribute_123456

想要的网址：myurl?specialattribute=123456

我使用了 URL 重写模块并在 web.config 中生成了这个标签：

```
<rewrite>
    <rules>
    <rule name="RedirectRule1" stopProcessing="true">
         <match url=".*/specialattribute_(.*)/" />
         <action type="Redirect" url="myurl?specialattribute={R:1}" />
                </rule>
     </rules>
     <outboundRules>
          <preConditions>
               <preCondition name="ResponseIsHtml1">
                     <add input="{RESPONSE_CONTENT_TYPE}" pattern="^text/html" />
               </preCondition>
           </preConditions>
     </outboundRules>
</rewrite> 
```

但它没有用......有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:44:19.220

问题解决了 ：

匹配标记中 url 中的内容是您网站的基本 url 之后的内容。

`<match url="specialattribute_(.*)" /> <action type="Redirect" url="myurl?webserviceid={R:1}" redirectType="Temporary" />`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T15:15:04.297

试试这个：

```
<match url="*/specialattribute_*" />
         <action type="Redirect" url="myurl?specialattribute={R:2}" /> 
```

只需确保您在 UrlRewrite 模块规则设置中使用“通配符”即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T16:13:50.287

您的问题属于您正在使用的模式。

您的规则不匹配`myurl/specialattribute_123456`但匹配`myurl/specialattribute_123456/`。

如果您希望您的模式与`myurl/specialattribute_123456`您的示例一样匹配，请将您的规则模式更改为（只需删除尾随`/`）：

```
<match url=".*/specialattribute_(.*)" /> 
```

# magento - Magento - 运费增值税

> ID：15412432
> 
> 赞同：2
> 
> 时间：2013-03-14T14:44:54.233
> 
> 标签：magento, shipping

我正在尝试找出在 Magento 中为航运设置增值税的函数的位置；在结帐和客户的订单中。如果可能，运行的最后一个计算运输最终增值税的函数可能是最好覆盖的函数。问题是我想让运费增值税根据购物车中产品的增值税而有所不同。

以两种价格为 100 美元的产品为例。

一种产品的增值税为 25%，而另一种产品的增值税为 12.5%。

现在，我想做的是通过运行以下计算来计算运费的增值税：

```
((100*25)+(12.5*100))/200 = 18.75 
```

这意味着运费增值税为 18.75%。

当我这样做时，我还想知道如何为购物车中的每种产品获取增值税，因为每种产品都可以有不同的税级。

# java - 适配器安卓应用

> ID：15412435
> 
> 赞同：-1
> 
> 时间：2013-03-14T14:45:06.043
> 
> 标签：java, android, listview, adapter

我正在使用eclipse开发一个android应用程序，我正在测试一些代码以查看它是如何工作的，但是有一些错误我试图解决它们但我不能。我是移动开发的新手，我必须制定一个待办事项清单。问题是我不熟悉适配器和 listView，所以我试图理解它们。

Java 代码

```
 package com.example.test;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class SimpleListItem1Activity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.simple_list_item1);
        ListView listView = (ListView) findViewById(R.id.mylist);  

        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1, android.R.id.text1, values);

             listView.setAdapter(adapter);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.simple_list_item1, menu);
        return true;  }

    ListView listView = (ListView) findViewById(R.id.mylist);
    String[] values = new String[] { "Android", "iPhone", "WindowsMobile",
      "Blackberry", "WebOS", "Ubuntu", "Windows7", "Max OS X",
      "Linux", "OS/2" };

    // Define a new Adapter
    // First parameter - Context
    // Second parameter - Layout for the row
    // Third parameter - ID of the TextView to which the data is written
    // Forth - the Array of data

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
      android.R.layout.simple_list_item_1, android.R.id.text1, values);

} 
```

XML

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ListView
        android:id="@+id/mylist"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
    </ListView>

</LinearLayout> 
```

日志猫

```
 03-14 14:57:07.643: E/AndroidRuntime(773):     ... 11 more
[2013-03-14 17:54:54 - test] ------------------------------
[2013-03-14 17:54:54 - test] Android Launch!
[2013-03-14 17:54:54 - test] adb is running normally.
[2013-03-14 17:54:54 - test] Performing com.example.test.SimpleListItem1Activity activity launch
[2013-03-14 17:54:54 - test] Automatic Target Mode: launching new emulator with compatible AVD 'AVD_for_Nexus_S_by_Google'
[2013-03-14 17:54:54 - test] Launching a new emulator with Virtual Device 'AVD_for_Nexus_S_by_Google'
[2013-03-14 17:55:08 - Emulator] emulator: warning: opening audio input failed
[2013-03-14 17:55:08 - Emulator] 
[2013-03-14 17:55:08 - test] New emulator found: emulator-5554
[2013-03-14 17:55:08 - test] Waiting for HOME ('android.process.acore') to be launched...
[2013-03-14 17:56:06 - test] HOME is up on device 'emulator-5554'
[2013-03-14 17:56:06 - test] Uploading test.apk onto device 'emulator-5554'
[2013-03-14 17:56:07 - test] Installing test.apk...
[2013-03-14 17:57:06 - test] Success!
[2013-03-14 17:57:06 - test] Starting activity com.example.test.SimpleListItem1Activity on device emulator-5554
[2013-03-14 17:57:09 - test] ActivityManager: Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] cmp=com.example.test/.SimpleListItem1Activity }
[2013-03-14 18:07:20 - test] ------------------------------
[2013-03-14 18:07:20 - test] Android Launch!
[2013-03-14 18:07:20 - test] adb is running normally.
[2013-03-14 18:07:20 - test] Performing com.example.test.SimpleListItem1Activity activity launch
[2013-03-14 18:07:20 - test] Automatic Target Mode: launching new emulator with compatible AVD 'AVD_for_Nexus_S_by_Google'
[2013-03-14 18:07:20 - test] Launching a new emulator with Virtual Device 'AVD_for_Nexus_S_by_Google'
[2013-03-14 18:07:23 - Emulator] emulator: warning: opening audio input failed
[2013-03-14 18:07:23 - Emulator] 
[2013-03-14 18:07:23 - test] New emulator found: emulator-5554
[2013-03-14 18:07:23 - test] Waiting for HOME ('android.process.acore') to be launched...
[2013-03-14 18:08:21 - test] HOME is up on device 'emulator-5554'
[2013-03-14 18:08:21 - test] Uploading test.apk onto device 'emulator-5554'
[2013-03-14 18:08:21 - test] Installing test.apk...
[2013-03-14 18:10:25 - test] Failed to install test.apk on device 'emulator-5554!
[2013-03-14 18:10:25 - test] (null)
[2013-03-14 18:10:25 - test] Launch canceled! 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T14:49:09.633

编辑：

应该是这样的

```
public class SimpleListItem1Activity extends Activity {
 String[] values = new String[] { "Android", "iPhone", "WindowsMobile",
      "Blackberry", "WebOS", "Ubuntu", "Windows7", "Max OS X",
      "Linux", "OS/2" };

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.simple_list_item1);
        ListView listView = (ListView) findViewById(R.id.mylist);  

        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1, values);
             listView.setAdapter(adapter);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.simple_list_item1, menu);
        return true; 
 }

} 
```

* * *

```
 ListView listView = (ListView) findViewById(R.id.mylist);  

  ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
      android.R.layout.simple_list_item_1, android.R.id.text1, values);

       listView.setAdapter(adapter); 
```

**这段代码应该在 onCreate 里面**，但是你已经在外面声明了，所以你的列表视图总是空的，在你设置内容视图之前你不会得到视图。

**在 oncreate 中设置 contentView 后放置该代码**

# send - 多个收件人的 Interfax 开发人员帐户配置

> ID：15412437
> 
> 赞同：0
> 
> 时间：2013-03-14T14:45:09.047
> 
> 标签：send, fax, interfax

我想为发送和接收传真配置一个 interfax 帐户。

谁能告诉我如何发送/接收测试传真？

我知道这些`.sendFax()`和`.GetList()`方法，但是我如何向自己发送传真（在测试帐户中）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T06:46:36.377

我跟着文章，

[通过回调到 Web 应用程序接收传入的传真](http://www.interfax.net/en/node/698)

它工作正常。但它只会让您知道您已收到传真。

编辑：

您可以设置反馈网址并使用他们要求的参数。当 interfax 为您接收传真时，它会将其发送到您的反馈 url，并将直接转到您的数据库（如果您在页面加载事件中设置了此项）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-15T09:52:20.777

您可以使用以下代码

```
MessageItem[] faxList = null;
                Inbound inbound = new Inbound();
                ListType messageListType = ListType.NewMessages;
                int interFaxResult = inbound.GetList(AppConfig.InterfaxUsername, AppConfig.InterfaxPassword, messageListType, AppConfig.InterfaxMaxitems, ref faxList);
                if (interFaxResult == 0)
                {
                   // Save faxes in DB
                } 
```

# loader - 简单的模态加载器

> ID：15412438
> 
> 赞同：0
> 
> 时间：2013-03-14T14:45:11.003
> 
> 标签：loader, simplemodal

我是使用 jquery 的新手。我正在尝试在 simplemodal.js（Eirc Martin 的简单模态）中添加一个名为“jBox”的函数，该函数将获取数据（即链接）和选项，并使用 ajax 将内容加载到模态容器中。这样我想在我的页面上的几个地方轻松调用这个函数

```
 jBox = function(address, options){
        $.get(address, function(data) {     
            $.modal(data);
        }); 
    };
}); 
```

代码工作正常，但我想在内容完全加载之前添加加载图像。在 simplebox 中有很多关于 loader/spinner 的类似帖子，但对我没有任何作用。我正在尝试以下代码

```
$('#test').load('<img src="loader.gif">').html(data);
$('#test').modal(); 
```

但是，在某种程度上，它对我不起作用。任何想法我做错了什么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T11:03:24.707

我使用`ajaxStart`和`ajaxStop`事件。

```
$("body").on({
    ajaxStart: function() { 
        $(this).addClass("loading"); // so page knows it's in loading state
        // .. your modal code
    },
    ajaxStop: function() { 
        $(this).removeClass("loading"); // not it loading state anymore
        // .. What you should do if loading is done. (eg. hide modal)
    }    
}); 
```

在这种情况下，我将主体类设置为“加载”。因此，如果您愿意，可以在 css 中做一些魔术。我也倾向于使用它来禁用表单。

```
body.loading div.some-class {
    // your special style for during loading
} 
```

# ruby-on-rails - 是否有 GEM/软件/API 可用于将世界上的每个城镇添加到自动完成表单中？

> ID：15412441
> 
> 赞同：0
> 
> 时间：2013-03-14T14:45:20.470
> 
> 标签：ruby-on-rails, forms, full-text-search, search-engine, startup

我正在建立一家名为 Airlifte.com 的初创公司。它将有一个搜索表单作为主页，与 Kayak.com 非常相似。我的问题是，当有人搜索某个地方（例如城镇或城市）时，有没有办法让表单从列出世界上每个城镇/城市的数据库中自动完成？

因此，如果我开始在伦敦输入，例如 Lon，它会自动开始提出建议。对于所有有 Lon 的东西？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:34:37.043

一种方法是使用数据库的全文搜索。在 MySQL 中，您可以使用诸如“lon*”之类的通配符查询来进行前缀搜索。您可以使用其他软件包，包括开源软件包（如 Lucene）和商业软件包以获得更高的速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T20:51:30.960

[http://www.rubygeocoder.com/](http://www.rubygeocoder.com/)

Rails 的 Geo Coder 非常适合这一点。另请查看[http://railscasts.com/episodes/273-geocoder?view=asciicast](http://railscasts.com/episodes/273-geocoder?view=asciicast)。

艾琳

# jquery - 第一个悬停事件不起作用

> ID：15412443
> 
> 赞同：0
> 
> 时间：2013-03-14T14:45:22.350
> 
> 标签：jquery, html, css

我有以下 jQuery 脚本，它负责在鼠标悬停时显示隐藏的 div：

```
function mouseOverBoard() {
    function mouseOverBoard() {
        $(".boardControl").hover(function () { 
            $(this).find(".boardControllers").show(); },
            function () { 
                $(this).find(".boardControllers").hide(); }
            );
    }
} 
```

这是我的html代码：

```
<div class="portlet-header textSmall test boardControl" onmouseover="javascript:mouseOverBoard();" style="background: #e9f2f2; min-height: 55px;">
    <div class="boardControllers" style="display: none;">
        <img src="./images/editSmall.png" alt="Edit" title="Bearbeiten" />&nbsp; &nbsp;
        <img src="./images/deleteSmall.png" alt="Delete" title="Löschen" />&nbsp; &nbsp;
        <img src="./images/addNewEmployeeSmall.png" alt="New Employee" title="Mitarbeiter hinzufügen" />&nbsp; &nbsp;
        <a href="javascript:details();"><img src="./images/details.png" alt="Details" title="Detailsansicht" /></a>&nbsp; &nbsp;
    </div>
    Downloadbereich aktualisieren

</div> 
```

它工作没有任何问题，但只有在第一次触发事件之后。第一次什么都没有发生（隐藏的 div 只是没有显示）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:52:14.567

您使用这些功能的方式是错误的。只需使用：

```
$(document).ready(function(){
    $(".boardControl").hover(function () { 
      $(this).find(".boardControllers").show(); },
        function () { 
          $(this).find(".boardControllers").hide(); }
    );
}); 
```

# three.js - 选择克隆的网格

> ID：15412446
> 
> 赞同：3
> 
> 时间：2013-03-14T14:45:34.543
> 
> 标签：three.js

问题 ：

我创建了一个网格并克隆了它。当我尝试选择一个时，两个都被选中。网格具有不同的 ID，但材质和几何图形 ID 相同。

我创建了一个简单的 jsfiddle 示例：[jsfiddle](http://jsfiddle.net/YFkMy/8/)

我如何克隆：

```
var cloned =  object.clone(); 
```

或者

```
var cloned = new THREE.Mesh(object.geometry, object.material); 
```

在这两种情况下，结果是相同的，单击一次 - 选择两者。我试图改变材料ID，没有帮助。

如果我创建新材料，那么一切都很好，我可以分别选择每个对象：

```
var cloned = new THREE.Mesh(object.geometry, new THREE.MeshLambertMaterial(....)); 
```

或者

```
var cloned = new THREE.Mesh(object.geometry, object.material.clone()); 
```

**我的问题。**`object.clone().material`和 之间的材料有什么区别`object.material.clone()`？

同样的行为是当我创建许多具有相同材质的网格时。鼠标按下一个网格将选择所有 10 个网格。例子：

```
var geo = new THREE.CubeGeometry(....)
var material = new THREE.MeshLambertMaterial(....)
for(var i = 0; i < 10; i++){
    var mesh = new THREE.Mesh(geo, material);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T22:46:17.577

> 当我尝试选择一个时，两个都被选中。

那不是真的。只有一个被选中，但两个都被突出显示。

克隆网格会创建一个新网格，但新网格与原始网格共享材质（和几何体）。

因此，在您的演示中，您只有一个两个网格共享的材质实例。

这就是为什么当您更改一个网格的颜色时，其他网格也会发生变化。

# java - Izpack，Java - 将资源路径作为变量获取

> ID：15412450
> 
> 赞同：1
> 
> 时间：2013-03-14T14:45:50.033
> 
> 标签：java, variables, path, izpack

在安装过程中，我执行了一个 java 类。我将 install.xml 文件中的一些变量扔到这个 java 类中。

我的问题是我看不到将 IzPack 资源路径扔给此类的方法。没有 IzPack 内置变量。

但我知道它存储在某个地方，因为我把它交给了 IzPack 编译器：

"...\IzPack\bin\compile" "...\install.xml" **-b thepathIwouldliketoget**

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-15T18:29:27.490

@ 命令提示符：

```
C:\Program Files\IzPack\bin>compile -?

.::  IzPack - Version 4.3.5 ::.

.......

-> Command line parameters are : (xml file) [args]  
   (xml file): the xml file describing the installation  
   -h (IzPack home) : the root path of IzPack. This will be needed  
               if the compiler is not called in the root directory  of IzPack.  
               Do not forget quotations if there are blanks in the path.  
   -b (base) : indicates the base path that the compiler will use for filenames  
               of sources. Default is the current path. Attend to -h. 
```

只是为了澄清：`-b <path-name>`不完全是`IzPack resource path`. 如上所述，它是`base path`专门用于**解析其他文件路径**的。它的**默认值**是**当前目录**，即`C:\Program Files\IzPack\bin`在上面的示例中。

***现在，我还没有对此进行测试，但是可以通过该属性访问此路径`baseDir`***。
两个原因：

*   [**HERE**](http://izpack.org/documentation/advanced-features.html#apache-ant-integration)`Apache Ant Integration`部分将此属性指定为。 [](http://izpack.org/documentation/advanced-features.html#apache-ant-integration)**`'baseDir'`**

***   分析**命令行输入**的文件（在[**此处**](https://github.com/izpack/izpack/blob/master/izpack-compiler/src/main/java/com/izforge/izpack/compiler/cli/CliAnalyzer.java)`CliAnalyzer.java`找到它和其他源文件）具有以下代码块：[](https://github.com/izpack/izpack/blob/master/izpack-compiler/src/main/java/com/izforge/izpack/compiler/cli/CliAnalyzer.java)

     ****`if (commandLine.hasOption(ARG_BASEDIR)) { baseDir = commandLine.getOptionValue(ARG_BASEDIR).trim(); }`****** 

 ******可能，`base path`应该可以通过`${baseDir} or $baseDir`.******

# php - 调整正则表达式以在 url 的末尾查找 /

> ID：15412456
> 
> 赞同：1
> 
> 时间：2013-03-14T14:46:02.303
> 
> 标签：php, regex, url

我目前有这个代码：

```
// turn any url into url bbcode that doesn't have it already - so we can auto link urls- thanks stackoverflow
$URLRegex = '/(?:(?<!(\[\/url\]|\[\/url=))(\s|^))'; // No [url]-tag in front and is start of string, or has whitespace in front
$URLRegex.= '(';                                    // Start capturing URL
$URLRegex.= '(https?|ftps?|ircs?):\/\/';            // Protocol
$URLRegex.= '\S+';                                  // Any non-space character
$URLRegex.= ')';                                    // Stop capturing URL
$URLRegex.= '(?:(?<![[:punct:]])(\s|\.?$))/i';      // Doesn't end with punctuation and is end of string, or has whitespace after

$body = preg_replace($URLRegex,"$2[url=$3]$3[/url]$5", $body); 
```

它查找任何 url，并将它们转换为 bbcode（基本上自动链接 url），问题是如果一个 / 在它的末尾，它不会被解析。

有人可以告诉我如何解决这个问题吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T15:22:06.713

`[[:punct:]]`否定后视中的 将匹配，`/`从而防止其包含在匹配中。

您可以将 替换为`[[:punct:]]`包含要防止成为最后一个字符的所有特定字符的字符类，例如`[.,;!?:\"\'()-]`.

# c++ - 来自函数签名的 const 函数签名

> ID：15412457
> 
> 赞同：1
> 
> 时间：2013-03-14T14:46:04.347
> 
> 标签：c++, function, constants, typedef, signature

```
typedef void fv();
typedef std::add_const<fv>::type fvc;

typedef void fv_const() const;
static_assert(std::is_same<fvc,fv_const>::value,"Oops"); 
```

这不会编译，因为`fvc`and`fv_const`不是相同的类型。

是否可以从中派生类型`fvc`以`fv`使其等于`fv_const`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:06:28.343

添加`const`到非成员函数签名没有多大意义，但你可以这样做：

```
template<class T> struct add_f_const;
template<class R, class...Args>
struct add_f_const<R (Args...)> { typedef R type(Args...) const; };

static_assert(std::is_same<add_f_const<void()>::type, void() const>::value, "Oops"); 
```

`const`添加到成员函数中更常见：

```
template<class T> struct add_member_const;
template<class T, class R, class...Args>
struct add_member_const<R (T::*)(Args...)> { using type = R (T::*)(Args...) const; };

struct test {};
static_assert(std::is_same<add_member_const<void (test::*)()>::type,
  void (test::*)() const>::value,  "Oops"); 
```

# python-sphinx - 如何使用 sphinx-doc 添加指向完整源代码的链接？

> ID：15412461
> 
> 赞同：3
> 
> 时间：2013-03-14T14:46:16.873
> 
> 标签：python-sphinx

我用 python-sphinx 编写了一个文档，并使用`sphinx.ext.viewcode`扩展来将部分文档链接到相应的源代码。

如何在不突出显示内容的情况下添加指向该页面的链接？

# bash - 通过 capistrano 安装的 rvm 正在淹没输出

> ID：15412463
> 
> 赞同：2
> 
> 时间：2013-03-14T14:46:26.913
> 
> 标签：bash, shell, rvm, capistrano

我正在通过 capistrano 运行一个 shell 脚本来安装 rvm 和 ruby​​。跑步时

```
rvm install ruby-${RUBY_VERSION} 2>&1 > ../log/ruby_install.log 
```

在我的脚本中，所有输出似乎都进入了日志文件，滚动条输出除外。该输出被发送回 capistrano 并且它正在淹没输出，看起来很可怕。

有什么办法可以隐藏命令期间的进度吗？

我试着跑步

```
alias curl="curl --silent" 
```

在命令之前，但它根本不起作用，所以我猜安装是通过其他方式进行的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T14:49:28.330

尝试：

```
gem install rvm-capistrano -v ">=1.3.0.rc11" 
```

它包含使 curl 静音的代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T12:00:05.753

@mpapis 的回答引导我找到以下解决方案：

```
# Rename .curlrc if present
if [[ -f $HOME/.curlrc ]]; then
    echo "Backing up .curlrc"
    mv $HOME/.curlrc $HOME/.curlrc~
fi

# Create a temporary .curlrc configuration file, this prevents curl from flooding the Capistrano output
{
    echo "insecure"
    echo "silent" # Hide verbose output, it floods the capistrano output
    echo "show-error"
} > $HOME/.curlrc 
```

我将上面的代码片段添加到了我的 bash 脚本中，最后，我刚刚将 .curlrc 恢复到了之前的状态：

```
rm $HOME/.curlrc
if [[ -f $HOME/.curlrc~ ]]; then
    mv $HOME/.curlrc~ $HOME/.curlrc
fi 
```

这是从 rvm-capistrano 修改的，在原始的[Github Repository](https://github.com/wayneeseguin/rvm-capistrano/blob/master/lib/rvm/capistrano.rb#L124)上查看。

# python - 如何在python中绘制矩形的联合形状

> ID：15412465
> 
> 赞同：3
> 
> 时间：2013-03-14T14:46:31.757
> 
> 标签：python, matplotlib

我正在使用 Matplotlib 和 Python。我想绘制一组矩形的并集。矩形可以连接或断开。我还想为与其他组共同的侧面分配不同的颜色，因为我知道组之间没有重叠区域。你有什么主意吗？

谢谢你的帮助。

我添加了更精确的代码，我尝试为每组矩形制作一个集合并给它们相同的边缘颜色，但是如何只获得一个形状（矩形组的周长）？

```
import numpy as np
import matplotlib
from matplotlib.patches import Rectangle
from matplotlib.collections import PatchCollection
import matplotlib.pyplot as plt

fig=plt.figure()
ax=fig.add_subplot(111)
patches = []
ListCollections=[]

while Cd1:
  while Cd2:
      patches += Rectangle((x,y), 400, 200)

  p = PatchCollection(patches, cmap=None)
  p.set_edgecolor('red')
  p.set_facecolor(None)
  ListCollections.append(p)
  patches =[]

for l in ListCollections:
   ax.add_collection(p)

plt.show() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T22:12:33.850

看看Shapely。有一个明确的联合示例[http://toblerity.github.com/shapely/manual.html#object.union](http://toblerity.github.com/shapely/manual.html#object.union)。

要绘制 Shapely 几何图形，您可能还需要使用[https://pypi.python.org/pypi/descartes](https://pypi.python.org/pypi/descartes)。

最后，如果联合**必须**与 matplotlib 艺术家一起完成，我前几天为路径实现了[Cohen-Sutherland 裁剪算法](http://en.wikipedia.org/wiki/Cohen%E2%80%93Sutherland)- 我相信用另一个多边形裁剪一个多边形与采用它们的联合相同。如果这是您决定走的路线，我很乐意分享代码（但是当您拥有 Shapely 时，您为什么要分享！）。

# java - 从按钮打开一个新的 JFrame

> ID：15412467
> 
> 赞同：0
> 
> 时间：2013-03-14T14:46:31.830
> 
> 标签：java, swing, button, jframe, actionlistener

我想通过单击按钮（btnAdd）打开一个新的 JFrame；我试图创建一个动作监听器，但我没有运气；代码运行，但单击按钮时没有任何反应。有问题的方法是以下代码中的最后两个。任何帮助深表感谢！

```
package AdvancedWeatherApp;

import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Component;
import java.awt.Container;
import java.awt.Dimension;
import java.awt.FlowLayout;
import java.awt.Font;
import java.awt.Toolkit;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.BoxLayout;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingConstants;
import javax.swing.event.ListSelectionListener;

import weatherforecast.FetchWeatherForecast;

public class MainFrame extends JFrame implements ListSelectionListener {

private boolean initialized = false;
private Actions actions = new Actions();

private javax.swing.JScrollPane jspFavouritesList = new javax.swing.JScrollPane();
private javax.swing.DefaultListModel<String> listModel = new javax.swing.DefaultListModel<String>();
private javax.swing.JList<String> favouritesList = new javax.swing.JList<String>(
        listModel);

private javax.swing.JLabel lblAcknowledgement = new javax.swing.JLabel();
private javax.swing.JLabel lblTitle = new javax.swing.JLabel();

private javax.swing.JButton btnAdd = new javax.swing.JButton();
private javax.swing.JButton btnRemove = new javax.swing.JButton();

public void initialize() {
    initializeGui();
    initializeEvents();
    this.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
}

/**
 * 
 */
private void initializeGui() {
    if (initialized)
        return;
    initialized = true;
    this.setSize(500, 400);

    Dimension windowSize = this.getSize();
    Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();
    this.setLocation(screenSize.width / 2 - windowSize.width / 2,
            screenSize.height / 2 - windowSize.height / 2);
    Container pane = this.getContentPane();
    pane.setLayout(new BorderLayout());
    setLayout(new BorderLayout());
    setTitle("Favourite Weather Locations");

    JPanel jpSouth = new JPanel();
    jpSouth.setLayout(new FlowLayout());

    JPanel jpNorth = new JPanel();
    jpNorth.setLayout(new FlowLayout());

    JPanel jpCenter = new JPanel();
    jpCenter.setLayout(new BoxLayout(jpCenter, BoxLayout.PAGE_AXIS));

    JPanel jpEast = new JPanel();
    JPanel jpWest = new JPanel();

    getContentPane().setBackground(Color.WHITE);
    jpEast.setBackground(Color.WHITE);
    jpWest.setBackground(Color.WHITE);
    jpCenter.setBackground(Color.WHITE);

    getContentPane().add(jspFavouritesList);
    jpCenter.add(jspFavouritesList);
    jspFavouritesList.setViewportView(favouritesList);
    favouritesList
            .setSelectionMode(javax.swing.ListSelectionModel.SINGLE_SELECTION);
    favouritesList.addListSelectionListener(this);

    jpCenter.add(btnAdd);
    jpCenter.add(btnRemove);
    jpCenter.setAlignmentY(CENTER_ALIGNMENT);
    btnAdd.setText("Add Location");
    btnAdd.setAlignmentX(Component.CENTER_ALIGNMENT);
    btnAdd.setFont(new Font("Calibri", Font.PLAIN, 18));

    jpCenter.add(btnRemove);
    btnRemove.setText("Remove Location");
    btnRemove.setAlignmentX(Component.CENTER_ALIGNMENT);
    btnRemove.setFont(new Font("Calibri", Font.PLAIN, 18));

    getContentPane().add(jpEast, BorderLayout.EAST);
    getContentPane().add(jpWest, BorderLayout.WEST);

    getContentPane().add(jpSouth);
    jpSouth.add(lblAcknowledgement);
    add(lblAcknowledgement, BorderLayout.SOUTH);
    lblAcknowledgement.setText(FetchWeatherForecast.getAcknowledgement());
    lblAcknowledgement.setHorizontalAlignment(SwingConstants.CENTER);
    lblAcknowledgement.setFont(new Font("Tahoma", Font.ITALIC, 12));

    getContentPane().add(jpNorth);
    jpNorth.add(lblTitle);
    add(lblTitle, BorderLayout.NORTH);
    lblTitle.setText("Your Favourite Locations");
    lblTitle.setHorizontalAlignment(SwingConstants.CENTER);
    lblTitle.setFont(new Font("Calibri", Font.PLAIN, 32));
    lblTitle.setForeground(Color.DARK_GRAY);

    getContentPane().add(jpCenter);

}

private void initializeEvents() {
    // TODO: Add action listeners, etc
}

public class Actions implements ActionListener {
    public void actionPerformed(ActionEvent e) {
        String command = e.getActionCommand();
        command = command == null ? "" : command;
        // TODO: add if...if else... for action commands

    }
}

public void dispose() {
    // TODO: Save settings
    // super.dispose();
    System.exit(0);
}

public void setVisible(boolean b) {
    initialize();
    super.setVisible(b);
}

public static void main(String[] args) {

    new MainFrame().setVisible(true);
}

public void actionPerformed(ActionEvent evt){

    if (evt.getSource() == btnAdd) {
        showNewFrame();
        //OPEN THE SEARCH WINDOW    

        }

    }

private void showNewFrame() {
    JFrame frame = new JFrame("Search Window" );
    frame.setSize( 500,120 );
    frame.setLocationRelativeTo( null );
    frame.setVisible( true );   

}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T16:18:51.557

尽管您已经`actionPerformed`按照[ActionListener](http://docs.oracle.com/javase/7/docs/api/java/awt/event/ActionListener.html)接口实现了该方法，但您的类不是那种类型，因为您还没有*实现*该接口。一旦实现了该接口并将其注册到`JButton` `btnAdd`,

```
btnAdd.addActionListener(this); 
```

该方法将被调用。

更紧凑的替代方法可能是使用匿名接口：

```
btnAdd.addActionListener(new ActionListener() {
   @Override
   public void actionPerformed(ActionEvent e) {
      // handle button ActionEvent & display dialog...    
   }
}); 
```

* * *

*旁注：*

*   在应用程序中使用多个`JFrame`会为管理可能需要存在于帧之间的更新带来大量开销。`JDialog`如果需要另一个窗口，首选方法是使用模式。这将[在此处](https://stackoverflow.com/questions/9554636/the-use-of-multiple-jframes-good-bad-practice)进行更多讨论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-26T17:34:16.713

用这个 ：

```
btnAdd.addActionListener(this);

@Override

public void actionPerformed(ActionEvent e)
{
    MainFrame frame = new MainFrame();
    frame.setVisible(true);
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-12-12T08:45:27.993

看我的最后一行

`{ ActList.setVisible(true); }`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-10-19T14:51:48.960

在按钮内输入这个

```
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {   
this.dispose();
ActionListener ActList = new ActionListener();
ActList.setVisible(true); 
```

}

# openssl - 如何检查具有相同通用名称的现有证书 - openssl

> ID：15412469
> 
> 赞同：1
> 
> 时间：2013-03-14T14:46:36.820
> 
> 标签：openssl, certificate, pki

我试图理解一些代码有人为openssl 库/工具编写了一个包装器，以更新它。

一般来说，我对 openssl 和 PKI 完全陌生。我找到了以下文档/参考来帮助导航，但我无法找到我的问题的答案。

[http://users.dcc.uchile.cl/~pcamacho/tutorial/crypto/openssl/openssl_intro.html](http://users.dcc.uchile.cl/~pcamacho/tutorial/crypto/openssl/openssl_intro.html)

[http://www.madboa.com/geek/openssl/](http://www.madboa.com/geek/openssl/)

但我无法找到我的问题的答案。

**目标**

我需要完成的是修改一些代码，以便如果证书仍然处于活动状态，则无法创建具有相同通用名称和电子邮件地址的重复证书。我计划检查 index.txt 以查看是否存在具有相同通用名称的证书，如果尚未撤销，我将阻止用户再次创建它。

**问题：**

当我使用此 webtool 创建证书时，我看到 /etc/ssl/ 中的 index.txt 文件已更新为以“V”开头的记录。当我撤销证书时，V 更改为 R。但是，当我删除证书时，index.txt 文件中没有任何更新。记录保持不变 - 它没有更新为新状态，也没有从文件中删除。

**问题**

删除证书时未更新 openssl index.txt 文件是否是错误？
如果是，更新 index.txt 以删除证书的命令是什么？
也许包装器是问题所在......开发人员可能刚刚忘记运行命令行工具来更新 index.txt 文件？我想我只是不知道 openssl 应该如何处理证书删除，因此，我不知道我是否有错误......以及它是谁的错误。

有没有办法使用 openssl 工具集来检查重复的证书，这样我就不必手动检查 index.txt？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T20:56:05.907

删除证书不是 CA 通常会实施的操作。要在有效期结束前使证书失效，则将其吊销。但它们通常不会被删除，因为 CA 会想要跟踪它已颁发的证书。所以我不确定你为什么要删除证书。

但是，您似乎正在使用`openssl ca`与 OpenSSL 捆绑在一起的示例 CA 脚本。根据您的确切需求，您可能正在寻找`unique_subject` [配置文件选项](https://www.openssl.org/docs/apps/ca.html)，该选项强制任何主题只能同时存在一个有效证书。

# jquery - 在jquery中克隆后跟踪和隐藏旧元素

> ID：15412471
> 
> 赞同：1
> 
> 时间：2013-03-14T14:46:42.740
> 
> 标签：jquery, clone

我正在尝试克隆和元素，然后隐藏旧元素。实际上，我想使用旧元素的事件绑定，但要将旧元素移动到 DOM 中的新位置。

我克隆它并在需要的地方附加它。

现在，当我尝试隐藏旧元素时，克隆副本本身会被隐藏，旧元素不受影响。

## 请帮忙。:)

```
var $thead = $("#UserDataTable thead");
var $tfoot = $("#UserDataTable tfoot#myfooter");
var $clone = $tfoot.clone(true, true).attr("id", "ClonedFoot");
$thead.after($clone);
$("#UserDataTable tfoot#myfooter").hide(); 
```

* * *

最后一行代码隐藏了克隆的元素本身。我认为它应该隐藏id为myfooter的原始元素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T14:57:41.650

存在问题是因为在您的代码中您通过再次遍历 DOM 来隐藏。您已经在 vars 中绑定了每个元素，只需再次使用它们：

```
var $thead = $("#UserDataTable thead");
var $tfoot = $("#UserDataTable tfoot#myfooter");
var $clone = $tfoot.clone().attr("id", "ClonedFoot");
// now hide the original
$tfoot.hide();
$thead.after($clone); 
```

# html - 为什么使用“相对”定位时，这个元素的大小设置为 0px x 0px？

> ID：15412473
> 
> 赞同：4
> 
> 时间：2013-03-14T14:46:51.423
> 
> 标签：html, css

我一直在使用[这个 JavaScript 图像注释插件](http://www.zurb.com/playground/javascript-annotation-plugin)来为项目添加注释——我设法让它在一个只有这个 HTML 的空白网页上正常工作：

```
<div id="sample-image">
    <img src="img.jpg"></img>
</div> 
```

而这个注释的CSS：

```
.circle {
        border-radius: 50%/50%; 
        width: 20px;
        height: 20px;
        background: black;
    } 
```

这会产生正确的结果......

![显示正确定位的示例](../Images/a61050784fe2c21ca299577d6d410bd0.png)

但是，当我使用 Twitter 的 Boostrap 和这个 HTML 将它添加到另一个项目时

```
<div class="container-fluid">
      <div class="row-fluid">
        <div data-spy="affix" data-offset-top="200" class="span3">
          <div class="well sidebar-nav">
            <ul class="nav nav-list">
              <li><a href="#contact">Contact</a></li>
            </ul>
          </div>
        </div>
        <div style="float:right" class="span9">

            <div id="sample-image">
             <img src="img.jpg"></img>
           </div>
        </div>
... 
```

元素位于页面顶部，因为默认情况下它们具有 position: aboslute 属性，如下所示：

```
<a class="circle" data-toggle="tooltip" data-placement="top" data-original-title="Church" rel="tooltip" onmouseover="$(this).tooltip('show')" style="left: 406px; top: 247px; position: absolute;"></a> 
```

将其更改为 position: relative 会导致它们被正确放置，但根据 Chrome，它们的大小设置为 0px x 0px，因此它们不会显示。

任何想法为什么会这样？

谢谢，杰克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:53:57.280

float 有时会导致包含的对象崩溃。您是否尝试过使用“显示：内联块”？ [http://designshack.net/articles/css/whats-the-deal-with-display-inline-block/](http://designshack.net/articles/css/whats-the-deal-with-display-inline-block/)

# windows - 在 Windows 上创建 TrueCrypt 卷

> ID：15412476
> 
> 赞同：3
> 
> 时间：2013-03-14T14:47:10.157
> 
> 标签：windows, command-line, truecrypt

目前无法在 Windows 上使用命令行创建 TrueCrypt 卷。据官网介绍，这是“计划在未来实施”（见：[http](http://www.truecrypt.org/future) ://www.truecrypt.org/future ）。

对于自动化脚本，我想每天创建多个 TrueCrypt 卷。是否有任何解决方法或任何其他解决方案可以在 Windows 上创建 TrueCrypt 卷？Linux 不是一个选项，它必须是 Windows。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-07T18:45:03.013

For future reference. I was looking into this and apparently is not possible yet... [http://www.truecrypt.org/future](http://www.truecrypt.org/future)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-07T19:03:27.360

我认为你应该使用任何可用的 GUI 脚本工具来自动化 GUI，直到 truecrypt 更新它们的命令行选项。我在网上搜索了一下，发现了这个：

[http://www.autoitscript.com/forum/topic/151825-truecrypt-volume-creation-automation/](http://www.autoitscript.com/forum/topic/151825-truecrypt-volume-creation-automation/)

我还没有检查过，但也许它可以以某种方式帮助你......祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-05T19:43:50.193

As a possible workaround, you can once manually create truecrypt container. Than copy it and work with the copy. You can automate mounting, copying data to mounted volume, dismounting and so on.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-25T09:38:04.227

使用`/q`参数。见[这里](http://www.truecrypt.org/docs/?s=command-line-usage)。示例：`"C:\Program Files\TrueCrypt\TrueCrypt.exe" /q /lT /v "C:\mydata.tc"`。

# python - 为（非系统）Python 安装 rpm 模块

> ID：15412482
> 
> 赞同：7
> 
> 时间：2013-03-14T14:47:32.410
> 
> 标签：python, rpm

我需要支持一些使用旧 Python 版本（2.4）的软件。所以我下载并编译了 Python 2.4 并将其安装在 virtualenv 中。至此，一切OK，程序正常。

但是该软件正在尝试导入一个`rpm`模块。而且我找不到该模块的源代码（它不是标准 Python 库的一部分，afaict）。

通常，一旦启用 virtualenv ( `source env/bin/activate`)，我就可以使用`easy_install`. 但是`easy_install rpm`没有找到任何东西。有一个[pyrpm](https://github.com/mjvm/pyrpm)模块，但它不是一回事（它安装了一个名为“pyrpm”的模块）。谷歌搜索是无用的，因为它们都链接到关于如何构建 rpm 的文章......

如果我使用的是系统 python（在 Ubuntu 上），我可以安装该`python-rpm`软件包。但这是针对 Python 2.7 的。如何安装 Python 2.4 的等效版本？

[我的印象是，许多 Linux 系统使用的 rpm 库都包含一个 Python 库，该库被发行版打包为 python-dev。但我看不到如何访问任意 python 版本。]

**我不是在寻找包含 Python 2.4 的 RPM。我正在寻找一个名为 rpm 的模块，该模块由为 Python 2.4 编写的软件使用。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:00:55.560

它就在那里，在 python-rpm RPM 包中：

[http://rpmfind.net/linux/rpm2html/search.php?query=python-rpm](http://rpmfind.net/linux/rpm2html/search.php?query=python-rpm)

您可能需要下载包内容，提取它们，然后使用

```
python setup.py install 
```

从您的活动环境中。

当然，由于它是预编译的，您可能无法运行 C 扩展。

我对 RPM 不够熟悉，不知道您是否可以从那里获得源代码。

* * *

不保证该包将与您的 python 版本一起使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-26T12:33:24.390

没有简单的方法可以做到这一点；python 库是系统 rpm 包和 C 代码接口的一部分，因此与您机器上安装的 rpm 包密切相关。

相反，在使用 Python 2.4 的 VM（例如 CentOS 5）中安装旧操作系统要简单得多。然后一切都是一致的并且有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-29T08:01:01.240

rpm 模块的源代码可以在这里找到：[http ://www.rpm.org/wiki/Download](http://www.rpm.org/wiki/Download)

下载所需版本后，请阅读并按照安装说明在目标操作系统上进行编译。然后确保将安装选择的“site-packages”文件夹的正确路径添加到 PYTHONPATH 环境变量中。

测试启动你的python解释器并运行'import rpm'

高温下，

冉

# css - 我可以添加只有 CSS 的类吗？

> ID：15412487
> 
> 赞同：2
> 
> 时间：2013-03-14T14:47:56.450
> 
> 标签：css, class, inheritance

我想知道我是否可以以某种方式将类属性“继承”给某些元素，例如 body，例如：

```
.playfont{font-family: 'Play', sans-serif;}

body{.playfont} 
```

我知道我可以使用 JavaScript 或 LESS 来做到这一点，甚至可以在 HTML 标记中添加类，但是有没有任何纯 css 方法呢？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T14:49:56.297

最接近纯 CSS 的方法是这样的：

```
.playfont,
body { /* .... rules here */ } 
```

除此之外，您还需要一个预处理器。而且我上面描述的方式很快就会变得混乱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T14:56:40.547

不，但你可以这样做：

```
<html>
<head>
<style type="text/css">
h1, .test { 
    color: red;
}
</style>
</head>

<body>

<h1>Test</h1>
<h2 class="test">Test</h2>

</body>
</html> 
```

# jquery - jtable 对话框字段

> ID：15412488
> 
> 赞同：0
> 
> 时间：2013-03-14T14:48:03.003
> 
> 标签：jquery, asp.net, asp.net-mvc-3, jtable

您好，我需要帮助在 jquery jtable 插件对话框中添加一些字段作为隐藏字段...

我正在使用 asp.net mvc，我需要在 db 中添加我需要更新的所有字段。如果我不将此字段放在屏幕上，数据库行将更新为空值，因为 mvc 数据绑定系统不是在发布操作上找到它们将被创建为空值的字段......

因此，为了避免手动绑定并且因为信息不敏感，我想将表单中的所有字段都隐藏起来！我已经看到我可以在字段定义中添加可见性：'隐藏'，但这只是从网格中隐藏字段而不是从更新对话框中......有人可以解释我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-11T06:21:06.117

你只需要使用`list: false`

```
Password: {
    title: 'User Password',
    type: 'password',
    list: false
}, 
```

# java - 在Android中访问不同类中的变量

> ID：15412489
> 
> 赞同：0
> 
> 时间：2013-03-14T14:48:09.923
> 
> 标签：java, android

因此，假设用户在我的 Incomings 类的 EditText 字段中输入总计，然后我希望将其传递给我的 Results 类。我该如何在Android中解决这个问题？我知道最好的方法是使用 Accessor 方法。我的传入类：

```
public void onClick(View v) {

String userLoan = etLoan.getText().toString();
String userGrant = etGrant.getText().toString();
String userFirst = etFirst.getText().toString();

float fUserLoan = Float.parseFloat(userLoan);
float fUserGrant = Float.parseFloat(userGrant);
float fUserFirst = Float.parseFloat(userFirst);

float totalIncomings = fUserLoan + fUserGrant + fUserFirst;

Intent intent = new Intent(v.getContext(), Outgoings.class);
startActivity(intent);

}
}); 
```

我的结果类有一个空白函数，它将计算我在 MainAcivity 类中使​​用访问器方法尝试过的总数：

```
public float getTotalOutgoings() {
    return totalOutgoings;
}

public void setTotalOutgoings(float totalOutgoings) {
    this.totalOutgoings = totalOutgoings;
}

public float getTotalIncomings() {
    return totalIncomings;
}

public void setTotalIncomings(float totalIncomings) {
    this.totalIncomings = totalIncomings;
}

public float getTotalResult() {
    return totalResult;
}

public void setTotalResult(float totalResult) {
    this.totalResult = totalResult;
} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:51:18.803

通过意图附加功能：

```
Intent intent = new Intent(v.getContext(), Outgoings.class);
intent.putExtra ("total",totalIncomings);
startActivity(intent); 
```

然后在您的下一个活动中访问

```
Intent i = getIntent();
float totalComings = i.getFloatExtra("total",-1.0); 
```

现在关于你的结果类。这完全取决于您想对该课程做什么。如果您只需要一个简单的计算，请创建一个静态方法。数据传递通常是相反的。Activity 调用一个数据类，给它数据，*然后*数据类做它需要做的任何事情，并将结果返回给 Activity。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T14:57:32.147

采用

```
Bundle bd = new Bundle();  
bd.putFloat("key",value);  
intent.putExtras(bd);  
startActivityForResult(intent,1); 
```

在其他类
Bundle bund= getIntent().getExtras();
浮点值= bd.getFloat("key");

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-14T14:52:01.220

您是否尝试在 MainActivity 上调用函数？

```
MainActivity m = (MainActivity) getActivity();
m.setTotalIncomings(XXX); 
```

# asp.net-mvc-4 - 开发和测试网站和广告

> ID：15412490
> 
> 赞同：2
> 
> 时间：2013-03-14T14:48:15.893
> 
> 标签：asp.net-mvc-4, active-directory, iis-express

我正在开发一个使用 AD 进行 Windows 身份验证以及员工和组织信息的 Intranet 应用程序。该应用程序采用 c#、.NET MVC4。我使用 IIS Express 和 SQL Server Express 进行开发。员工由委托人的 Guid 引用，例如，记录的创建者将被引用为 AuthorId，其中包含表示来自 AD 的 Guid 的字符串。不同的用户根据他们的组成员看到不同的视图，例如使用相同的 url 管理员可以在编辑器视图中编辑类别，但用户只能在显示视图中看到类别。

问题： - 无需访问域 AD，如何测试查询 AD 的代码？- 如何在不更改域 AD 的情况下最好地假设不同的用户访问？

我正在考虑使用 ADAM 进行测试。但是我的问题是： - 我应该如何以及如何配置以使用此本地 ADAM 服务器进行身份验证？- ADAM 安装可以在我的第二台开发机器上还是应该在本地？- 当我在第二台开发机器上安装 ADAM 服务器时，连接字符串是什么样的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T14:22:37.943

经过大量阅读和尝试，我发现了以下内容：

不，如果不将假用户添加到您的域或为测试目的设置特定域，您就无法测试身份验证（即测试多个用户帐户和代码上的结果）。

但是为了在你的代码中测试角色系统，你可以对你的 MVC/API 控制器进行单元测试。为此，您必须模拟请求上下文。

MVC：[http ://darioquintana.com.ar/blogging/2009/05/23/aspnet-mvc-testing-a-custom-authorize-filters/](http://darioquintana.com.ar/blogging/2009/05/23/aspnet-mvc-testing-a-custom-authorize-filters/)

API：[http ://aspnetwebstack.codeplex.com/discussions/358709/](http://aspnetwebstack.codeplex.com/discussions/358709/)

两者的要点是您不能模拟整个主体（尤其是 Guid），但您可以伪造对角色请求的响应，然后您可以在测试中使用这些角色。

使用应用程序中的角色，您可以将您所在的组之一分配给您想要测试的角色，然后离开。对于角色系统的基础：

[http://geekswithblogs.net/tyarmer/archive/2010/02/25/strongly-typed-roles-in-mvc-with-authorize-attribute.aspx](http://geekswithblogs.net/tyarmer/archive/2010/02/25/strongly-typed-roles-in-mvc-with-authorize-attribute.aspx)

为这种测试设置本地 LDAP 服务器是无用的，而且工作量太大。

# c# - 如何在 ADS 中更改组名 (sAMAccountName)？

> ID：15412492
> 
> 赞同：3
> 
> 时间：2013-03-14T14:48:20.690
> 
> 标签：c#, active-directory

我正在尝试使用 c# 和 .NET 更改组的名称。它适用于以下代码：

```
 public void selectADSObject(string LDAP)
    {
        DirectoryEntry Entry = new DirectoryEntry(ADS_PATH);
        Entry.Username = ADS_USER;
        Entry.Password = ADS_PW;
        DirectorySearcher Searcher = new DirectorySearcher(Entry);
        Searcher.SearchScope = System.DirectoryServices.SearchScope.Subtree;
        Searcher.Filter = LDAP;
        AdObj = Searcher.FindOne();
        AdObj.GetDirectoryEntry().Rename("cn=newName");
    } 
```

只有“windows-pre 2000”名称没有重命名，我也需要它重命名。在[此](http://www.selfadsi.de/img/tutorial/ad-w2k8-group-attributes-01.png)页面上，我发现这`sAMAccountName`就是我所追求的。但是当我添加以下行时，它也不会更改 Windows 2000 之前的名称：

```
AdObj.GetDirectoryEntry().Properties["sAMAccountName"].Value = "newName";
AdObj.GetDirectoryEntry().CommitChanges(); 
```

如何更改 sAMAccountName / pre-windows 2000 名称？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T16:03:46.303

每次调用时：

```
AdObj.GetDirectoryEntry() 
```

它实际上创建了一个新对象！下一行中的所有更改都会丢失。请使用类似的东西：

```
var dent = AdObj.GetDirectoryEntry()
dent.Properties["sAMAccountName"].Value = "newName";
dent.CommitChanges();
dent.rename("cn=newName"); 
```

# android - 我可以查看连接到 wifi 网络的用户（或手机）数量吗

> ID：15412497
> 
> 赞同：0
> 
> 时间：2013-03-14T14:48:41.943
> 
> 标签：android, wifi, android-wifi

我已阅读这些[Android 上的 WiFi 入门](https://stackoverflow.com/questions/5322097/getting-started-with-wifi-on-android)。实施了 Marakana 的基本 wifi 功能教程。

但我的问题是：有没有办法找到连接到 wifi 网络的用户数量？

如果可以，请分享链接或资源。

如果不能完成，请提供一些细节，为什么不呢？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-05T19:13:34.857

获取网络上的计算机列表本质上是一个不可靠的命题，wifi 或有线。

共有三种常见方法：发现协议、扫描和被动侦听。

发现协议（例如来自 UPnP 框架的 LLDP）非常适合支持它们的设备。有时也适用于没有的设备。如果防火墙阻止它们，或者将交换机或 wifi 接入点配置为不允许设备之间的通信，它们根本不起作用。

扫描意味着，向每个可能的 IP 地址发送探测（例如 ping）。这是许多入侵检测设备阻止的事情，许多 wifi 接入点也会阻止您向另一台设备发送 ping。此外，扫描在 IPv6 中完全不可行，因为每个网络都有数十亿个 IP 地址要探测，而不是 IPv4 中通常的 254 个。

被动侦听是指，只关注网络上的二层流量，根据ARP流量（或所有流量）建立MAC地址表。只有当你有一个带有集线器的有线网络时，它才能可靠地工作——交换机不会在任何地方转发所有第 2 层流量（尽管你最需要的 ARP 消息通常是广播且可用的）。WiFi 隔离也可能会阻止您获得足够的第 2 层流量。

# modulo - 如何在 Visual Foxpro 中将 % 处理为负数

> ID：15412499
> 
> 赞同：0
> 
> 时间：2013-03-14T14:48:50.730
> 
> 标签：modulo, visual-foxpro

`%`中的负数怎么办`VF`？

> MOD(10,-3) = -2
> 
> MOD(-10,3) = 2
> 
> 模式（-10，-3）= -1

为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T14:57:40.073

它是一个常规模数：

> mod 函数定义为一个数超过不大于该数的除数的最大整数倍的量。

你可以这样想：

**10 % -3** :

小于*-3的**10*的*最大*倍数是*-2*。

 ****-2*`10 % -3`也是如此。

 ***-10 % 3** :

现在，为什么`-10 % 3`是*2*？

考虑它的最简单方法是在负数上加上*2*的倍数，使数字变为正数。

`-10 + (4*3) = 2`所以`-10 % 3`= `(-10 + 12) % 3`= `2 % 3`= 3

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T20:57:25.030

以下是我们在 The Hacker's Guide to Visual FoxPro 中所说的：

> MOD() 和 % 在处理正数时非常简单，但是当其中一个或两个数字为负时它们会变得有趣。理解结果的关键是以下等式：
> 
> MOD(x,y) = x - (y * FLOOR(x/y))
> 
> 由于没有为负数定义数学模运算，因此很高兴看到 FoxPro 的定义在数学上是一致的。但是，它们可能与您最初的预期不同，因此您可能需要检查负除数或股息。
> 
> 一些测试（和手册）告诉我们，正除数给出正结果，而负除数给出负结果。****

# matlab - 用于在 JVM 上进行富有表现力、功能丰富的数值计算的工具

> ID：15412501
> 
> 赞同：4
> 
> 时间：2013-03-14T14:49:01.993
> 
> 标签：matlab, scala, groovy, clojure, jvm

我正在寻找 JVM 上的数值计算工具。我的主要要求是表现力/可读性、易用性、评估和数学函数方面的特性。我想我在 JVM 上追求类似 Matlab 内核（可能包括一些基本库和无图形）之类的东西。我希望能够在正在运行的 JVM 上“抛出”计算代码，并希望对这些代码进行评估。我不想担心类型。任意精度和性能并不那么重要。

我想那里有一些不错的库，但我认为需要一种适当的语言来获得表现力。

你们建议使用哪种工具来解决 JVM 上富有表现力、功能丰富的数字计算？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T15:04:32.363

大多数 Mathworks Matlab 都是基于英特尔数学内核库 (MKL) 构建的，它是 (恕我直言) 线性代数计算中无与伦比的冠军。有 java 支持，但需要 500 美元（MKL，不仅仅是 java 支持）...

如果您想使用 java，最好的第二个选择是[jblas](http://jblas.org/)，它使用线性代数的行业标准 BLAS 和 LAPACK。

纯 Java 库的性能显然很糟糕，请参见[此处](https://stackoverflow.com/questions/529457/performance-of-java-matrix-math-libraries)...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T16:04:13.317

从[jGroovyLab](http://code.google.com/p/jlabgroovy/)页面：

> GroovyLab 环境旨在提供一个类似于 Matlab/Scilab 的科学计算平台，该平台由以 Groovy 语言实现的脚本引擎支持。GroovyLab 用户可以使用 Matlab-lke 命令控制台，也可以使用基于 jsyntaxpane ( [http://code.google.com/p/jsyntaxpane/](http://code.google.com/p/jsyntaxpane/) ) 组件的灵活编辑器，这提供了更方便的代码开发。此外，GroovyLab 支持基于 symja ( [http://code.google.com/p/symja/](http://code.google.com/p/symja/) ) 项目的计算机代数。

还有[GroovyLab](http://code.google.com/p/groovylab/)：

> GroovyLab 是 Groovy 类的集合，可提供类似 matlab 的语法和基本功能（线性代数、2D/3D 图）。它基于 jmathplot 和 jmatharray 库：

Groovy 为 Java 程序员提供了平滑的学习曲线和类似于 Ruby 的灵活语法。[在其上编写 DSL 也很容易](http://java.dzone.com/articles/groovy-dsl-simple-example)。

虽然 Groovy 的[性能对于动态语言来说相当不错](http://java.dzone.com/articles/groovy-20-performance-compared)，但如果您需要[静态编译](http://docs.codehaus.org/display/GroovyJSR/GEP+10+-+Static+compilation)，您可以使用它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T15:40:37.257

[Spire](https://github.com/non/spire)听起来像是在瞄准您正在查看的区域。它利用了许多最近的 scala 功能，例如宏来获得不错的性能，而不必牺牲高级语言的表现力。

还有[微风](https://github.com/scalanlp/breeze)，它针对机器学习，但包含相当多的线性代数内容。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-14T15:45:29.060

根据您想要从事的工作量以及您已经熟悉的语言， Clojure 世界中的[Incanter](http://incanter.org)可能值得一看。现在在 Clojure 中快速发展的还有[core.matrix](http://clojurefun.wordpress.com/2013/01/05/towards-core-matrix-for-clojure/)，它旨在将高级通用抽象封装在使用各种方法或包实现的线性代数中。

您在帖子中强调了表现力，Clojure 的好处在于，作为 Lisp，可以制作或扩展 DSL 以紧密匹配问题域。这是该语言（以及一般的 Lisps）的一大吸引力。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-15T09:27:50.580

我是Clojure的[core.matrix的原作者。](https://github.com/mikera/matrix-api)所以我在这个特定领域有明确的亲和力和更多的知识。也就是说，我仍然会尝试给你一个诚实的答案:-)

大约一年前，我和你的职位相同，正在寻找一种可扩展、灵活且适合部署为集群云服务的数值计算解决方案。

我最终选择了 Clojure，原因如下：

*   **函数式编程**：Clojure 本质上是一种函数式编程语言，比大多数其他语言更重要（尽管不如 Haskell....）。惰性无限序列、持久数据结构、贯穿始终的不变性等。当您处理大型计算时，这些都是优雅的代码。
*   **元编程**：我看到需要为向量/计算表达式进行代码生成。因此，成为 Lisp 是一个很大的优势：一旦您使用具有“完整语言”宏系统的同音语言完成代码生成，那么就很难找到其他类似的东西了。
*   **并发**性——Clojure 有一种令人印象深刻的多代码并发性方法。如果您还没有看过，请观看： http: [//www.infoq.com/presentations/Value-Identity-State-Rich-Hickey](http://www.infoq.com/presentations/Value-Identity-State-Rich-Hickey)
*   **交互式 REPL**：我一直认为对数据工作非常重要的东西。您希望能够“实时”使用您的代码/数据，以真实感受其属性。拥有带有交互式 REPL 的动态类型语言在这里可以创造奇迹。
*   **基于 JVM**：由于庞大的库/工具生态系统以及 JVM 作为运行时平台的出色工程，实用性的巨大优势。
*   **社区**：我看到 Clojure 进行了很多创新，尤其是在数据和分析的一般领域。

当时 Clojure 主要*缺乏*的是一个用于矩阵运算的优秀库/API。[Incanter](http://incanter.org/)中有一些不错的工具，但它们不是很通用或性能不佳。因此，我开始开发 core.matrix，它正在形成一个惯用的 Clojure 风格的 NumPY / SciPY 等价物。现在它仍在进行中，但如果你小心的话，它足以用于生产。

在低级矩阵支持方面，我还维护[了 vectorz-clj](https://github.com/mikera/vectorz-clj)，这是我尝试提供一个 core.mattrix 实现，它提供高性能向量/矩阵操作，同时保持纯 Java（即没有本机依赖项）。如果你对这个的表现感兴趣，不妨看看：

*   [http://clojurefu.wordpress.com/2013/03/07/achieving-awesome-numerical-performance-in-clojure/](http://clojurefun.wordpress.com/2013/03/07/achieving-awesome-numerical-performance-in-clojure/)

Clojure 之后我的第二个选择是 Scala。我喜欢 Scala 稍微成熟的和不错的静态类型系统。这两种语言都是基于 JVM 的，所以库/工具方面是平局。可能是 Lisp 的特性决定了它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-14T16:38:46.070

如果您碰巧可以访问 Mathematica，那么通过 J/Link 很容易让它与 JVM 一起工作。对于 Clojure 来说，[Clojuratica](http://clojuratica.weebly.com)是一个出色的库，可以让它尽可能地看起来简洁，尽管它已经有一段时间没有维护了，并且可能需要一些努力才能让它再次在现代环境中工作。

# algorithm - 从随机列出的边中检测多边形

> ID：15412505
> 
> 赞同：3
> 
> 时间：2013-03-14T14:49:13.800
> 
> 标签：algorithm, geometry, 2d, computational-geometry

我有一个包含许多多边形边缘的矢量图。每条边由起点和终点表示。没有明确指出边之间的连接。我需要从这些数据中提取多边形。这样做的明显方法是获取每条边的一个顶点，在所有其他边中搜索匹配的顶点，然后对边的下一个顶点重复此操作，直到我有一个闭环。但这是非常低效的。

有什么好的算法可以提取多边形，只给定边缘的起点和终点，没有特定的顺序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T14:53:59.490

尝试这样的事情（python-pseudocode）：

```
vertices = {} #map (x, y) coords to a list of all edges containing that vertex

for edge in edges:
    #add start & end vertices
    if edge.start not in vertices:
        vertices[edge.start] = []
    if edge.end not in vertices:
        vertices[edge.end] = []
    vertices[edge.start].append(edge)
    vertices[edge.end].append(edge) 
```

现在你有了所有的顶点和从每个顶点出来的所有边。您现在可以为您的算法做最初的想法，但不必在所有边中搜索匹配的顶点，查找是即时的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T17:18:35.270

一种简单的方法是：

```
Sort the list of edges by end point. Call that array edges
Create a new array, polygon, size is num_edges 
edgeIndex = 0
copy edge from edges[0] to polygon[0]
count = 1
while (count < number_of_edges)
{
    starting_point = edges[edgeIndex].endpoint
    // do a binary search to find the segment that starts
    // at this edge's end point
    newIndex = binary_search(edges, starting_point)
    copy edge[newIndex] to polygon[count]
    ++count
    edgeIndex = newIndex
} 
```

完成此操作后，`polygon`数组应按顺序包含边。

以上假设边缘点是合理输出的。也就是说，给定一个顶点为 '[(0, 0), (10, 10), (10, 0)]' 的三角形，边为：

```
{(0, 0), (10, 10)}
{(10, 10), (10, 0)}
{(10, 0), (0, 0)} 
```

虽然不一定按这个顺序。如果给定第二条边`{(10, 0), (10, 10)}`（即开始和结束是相反的），那么问题就有点困难了。

您可以使用哈希映射和直接查找来做同样的事情，这将比二进制搜索更快。

另请注意，这假设您不会有两个以上的边连接到任何单个点。

# python - 从 C++ 中的 Python 脚本中检索返回值

> ID：15412511
> 
> 赞同：0
> 
> 时间：2013-03-14T14:49:32.667
> 
> 标签：python, python-c-api

当我使用以下命令调用 Python 脚本时，我希望能够从 C++ 中检索一些结果：

```
 int nResult = PyRun_SimpleFileEx(PyFile_AsFile(pyFileObject), strScriptPath.GetBuffer(), 1); 
```

这里的目标是能够在我的 Python 脚本和我的 C++ 代码之间进行通信。我已经看到了一些调用 Python 函数时的代码示例，但没有看到整个脚本。

# c# - 反射 - 对象比较和默认值

> ID：15412512
> 
> 赞同：2
> 
> 时间：2013-03-14T14:49:36.020
> 
> 标签：c#, reflection, object-comparison

我正在尝试比较 C# 中的两个复杂对象，并生成一个包含两者之间差异的字典。

如果我有这样的课程：

```
public class Product
{
    public int Id {get; set;}
    public bool IsWhatever {get; set;}
    public string Something {get; set;}
    public int SomeOtherId {get; set;}
} 
```

一个例子，因此：

```
var p = new Product
                    {
                        Id = 1,
                        IsWhatever = false,
                        Something = "Pony",
                        SomeOtherId = 5
                    }; 
```

另一个：

```
var newP = new Product
    {
        Id = 1,
        IsWhatever = true
    }; 
```

为了获得这些之间的差异，我正在做的事情包括：

```
var oldProps = p.GetType().GetProperties();
var newProps = newP.GetType().GetProperties();

// snip 
foreach(var newInfo in newProps)
{
    var oldVal = oldInfo.GetValue(oldVersion, null);
    var newVal = newInfo.GetValue(newVersion,null);
}

// snip - some ifs & thens & other stuff 
```

有趣的是这条线

```
var newVal = newInfo.GetValue(newVersion,null); 
```

使用上面的示例对象，这一行会给我一个默认值 0 `SomeOtherId`（对于 bools & DateTimes & whathaveyou 的情况相同）。

我正在寻找的是一种`newProps`仅包含对象中明确指定的属性的方法，因此在上面的示例中，`Id`并且`IsWhatever`. 我玩了`BindingFlags`几次都没有用。

这可能吗？有没有更清洁/更好的方法，或者有什么工具可以帮我省去麻烦？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T14:59:39.840

没有标志可以告诉您是否明确设置了属性。您可以做的是将您的属性声明为可空类型并将值与空值进行比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T15:00:20.973

如果我理解正确，这就是微软使用 xsd 实用程序生成的 xml 包装类所做的事情，其中`XIsSpecified`​​每个属性都有一个或类似的东西`X`。

所以这也是你可以做的——而不是`public int ID{get;set;}`，添加一个私有成员`_id`，或者你选择调用它的任何东西，以及一个布尔属性，每当调用 setter时，该属性`IDSpecified`将设置为 true`Id`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T20:31:35.040

我最终在不使用反射的情况下解决了这个问题（或者至少不以这种方式使用它）。

它或多或少是这样的：

```
public class Comparable
{
    private IDictionary<string, object> _cache;

    public Comparable()
    {
        _cache = new Dictionary<string, object>();
    }

    public IDictionary<string, object> Cache { get { return _cache; } }

    protected void Add(string name, object val)
    {
        _cache.Add(name, val);
    }
} 
```

产品实现是这样的：

```
public class Product : Comparable
{
    private int _id;
    private bool _isWhatever;
    private string _something;
    private int _someOtherId;

    public int Id {get { return _id; } set{ _id = value; Add("Id", value); } }
    public bool IsWhatever { get { return _isWhatever; } set{ _isWhatever = value; Add("IsWhatever ", value); } }
    public string Something {get { return _something; } set{ _something = value; Add("Something ", value); } }
    public int SomeOtherId {get { return _someOtherId; } set{ _someOtherId = value; Add("SomeOtherId", value); } }
} 
```

然后比较非常简单

```
var dic = new Dictionary<string, object>();

foreach(var obj in version1.Cache)
{
    foreach(var newObj in version2.Cache)
    {
        //snip -- do stuff to check equality
        dic.Add(....);
    }
} 
```

不会严重弄脏模型，并且效果很好。

# android - 从 simcard 读取精确时间

> ID：15412520
> 
> 赞同：0
> 
> 时间：2013-03-14T14:49:48.913
> 
> 标签：android

我搜索了互联网并没有找到结果。有人可以告诉我是否有可能从 simcard 获得准确的时间？
我发现的只是从 GPS 和互联网获取时间，但我想获得离线的确切时间。不使用任何活动连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T14:53:08.977

如果您没有任何来源来确认现在是什么时间，您将如何获得确切的时间？您需要使用其中一种。您唯一的其他选择是希望系统时间正确，这可能已经足够好了 - 大多数手机都设置为从蜂窝网络同步时间，所以即使它短暂离线，它也不会关闭超过几毫秒. 如果这还不够准确，那么您需要使用蜂窝或 GPS 时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-15T18:35:19.010

绝对没有办法从 SIM 卡中获取当前时间。这是因为 SIM 卡没有时间。

# android - 带有 android、websockets 和 node.js 的 TLS v 1.2

> ID：15412527
> 
> 赞同：1
> 
> 时间：2013-03-14T14:49:58.993
> 
> 标签：android, node.js, ssl, websocket

我正在尝试将一些数据从 android (4.1) 应用程序发送到 node.js https 服务器，为此我使用 Gottox 的 socket.io 和 Weberknecht websockets。

我已经实现了通过 TLS 1.0 与密码套件通信应用程序和服务器

```
TLS_RSA_WITH_AES_128_CBC_SHA 
```

将其添加到服务器的选项中：

```
var options = {
   key: fs.readFileSync(...),
   cert: fs.readFileSync(...),
   ciphers:('AES128-SHA'),
} 
```

但我想使用 TLS v1.2 的密码套件

```
TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA 
```

这应该在 android 4.1 中受支持，所以我将密码选项更改为

```
ciphers:('ECDHE-ECDSA-AES256-SHA'), 
```

此外，为了使其工作，在 Weberknecht websockets 的 WebSocketConnection.java 中，我将 Sockets 更改为 SSLSockets，因此我可以使用以下代码启用 android 支持的所有密码套件：

```
socket = (SSLSocket) sslSocketFactory.createSocket(host, port);
String[] suites = socket.getSupportedCipherSuites();
socket.setEnabledCipherSuites(suites); 
```

但它不起作用，如果我删除服务器中的密码选项，或者我再次放置它所做的第一个密码套件，但仅限于 TLS 1.0。

堆栈错误是：

```
03-14 16:44:01.215: W/System.err(3762): io.socket.SocketIOException: Error while handshaking
03-14 16:44:01.220: W/System.err(3762):     at io.socket.IOConnection.handshake(IOConnection.java:313)
03-14 16:44:01.220: W/System.err(3762):     at io.socket.IOConnection.access$7(IOConnection.java:283)
03-14 16:44:01.220: W/System.err(3762):     at io.socket.IOConnection$ConnectThread.run(IOConnection.java:199)
03-14 16:44:01.225: W/System.err(3762): Caused by: javax.net.ssl.SSLException: Connection closed by peer
03-14 16:44:01.225: W/System.err(3762):     at org.apache.harmony.xnet.provider.jsse.NativeCrypto.SSL_do_handshake(Native Method)
03-14 16:44:01.225: W/System.err(3762):     at org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl.startHandshake(OpenSSLSocketImpl.java:371)
03-14 16:44:01.225: W/System.err(3762):     at libcore.net.http.HttpConnection.setupSecureSocket(HttpConnection.java:209)
03-14 16:44:01.225: W/System.err(3762):     at libcore.net.http.HttpsURLConnectionImpl$HttpsEngine.makeSslConnection(HttpsURLConnectionImpl.java:478)
03-14 16:44:01.225: W/System.err(3762):     at libcore.net.http.HttpsURLConnectionImpl$HttpsEngine.connect(HttpsURLConnectionImpl.java:442)
03-14 16:44:01.225: W/System.err(3762):     at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:289)
03-14 16:44:01.225: W/System.err(3762):     at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:239)
03-14 16:44:01.225: W/System.err(3762):     at libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:273)
03-14 16:44:01.230: W/System.err(3762):     at libcore.net.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:168)
03-14 16:44:01.230: W/System.err(3762):     at libcore.net.http.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:271)
03-14 16:44:01.230: W/System.err(3762):     at io.socket.IOConnection.handshake(IOConnection.java:304)
03-14 16:44:01.230: W/System.err(3762):     ... 2 more 
```

我一直在经历 WebSocketHandshake.java 和 IOConnection.java 但我没有找到问题的根源......

有什么建议吗？

如果需要，可以在此处查看客户端的代码：

[https://github.com/Javi44/LocAALTOn/tree/WebSockets-Gottox](https://github.com/Javi44/LocAALTOn/tree/WebSockets-Gottox)

编辑：

这是引发异常的方法：

```
private void handshake() {
    URL url;
    String response;
    URLConnection connection;
    try {
        setState(STATE_HANDSHAKE);
        url = new URL(IOConnection.this.url.toString() + SOCKET_IO_1);
        connection = url.openConnection();
        if (connection instanceof HttpsURLConnection) {
            ((HttpsURLConnection) connection)
                    .setSSLSocketFactory(sslSocketFactory);
        }
        connection.setConnectTimeout(connectTimeout);
        connection.setReadTimeout(connectTimeout);

        /* Setting the request headers */
        for (Entry<Object, Object> entry : headers.entrySet()) {
            connection.setRequestProperty((String) entry.getKey(),
                    (String) entry.getValue());
        }

        InputStream stream = connection.getInputStream();
        Scanner in = new Scanner(stream);
        response = in.nextLine();
        String[] data = response.split(":");
        sessionId = data[0];
        heartbeatTimeout = Long.parseLong(data[1]) * 1000;
        closingTimeout = Long.parseLong(data[2]) * 1000;
        protocols = Arrays.asList(data[3].split(","));
    } catch (Exception e) {
        error(new SocketIOException("Error while handshaking", e));
    }
} 
```

可能是使用 url 连接而不是 SSLSocket 的问题？是否可以将 url 连接更改为具有相同功能但使用 SSLSockets 的东西？

# sql - 有条件的求和

> ID：15412529
> 
> 赞同：1
> 
> 时间：2013-03-14T14:50:18.717
> 
> 标签：sql, sql-server, tsql

我对 clausule 有疑问`SUM`。我需要根据列的总和。

这可能吗？

有没有人有一个例子让我看看？

我的代码如下：

```
SELECT 
PL_MAT AS 'Código', 
RA_NOME AS 'Nome',
RJ_DESC AS 'Cargo',
SUM(PL_HORAS) AS 'Atrasos'
--SUM(PL_HORAS) AS 'Hora Extra' -- I need SUM this
FROM SPL020 
INNER JOIN SP9020 ON PL_PD = P9_CODIGO AND SP9020.D_E_L_E_T_ <> '*' AND SPL020.D_E_L_E_T_ <> '*'
INNER JOIN SRA020 ON RA_MAT = PL_MAT AND SRA020.D_E_L_E_T_ <> '*' AND RA_FILIAL = PL_FILIAL
INNER JOIN SRJ020 ON RJ_FUNCAO = RA_CODFUNC
WHERE PL_DATA BETWEEN '20120616' AND '20120715'
AND P9_CODIGO IN ('011','421','013','409')
--AND P9_CODIGO IN ('408','007','420','009','015','016','018') -- I need sum this 
AND RA_CODFUNC IN ('0408','1204','1233')--AUX COLETA C,MOTORISTA D,MOTORISTA CARRETEIRO
AND RA_SITFOLH NOT IN ('D','A')
AND PL_FILIAL = '05'
GROUP BY PL_MAT,RA_NOME,RA_ADMISSA,RA_CODFUNC,RJ_DESC,P9_DESC, PL_HORAS, P9_CODIGO
ORDER BY RA_NOME 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T14:52:25.520

这样做：

```
sum(case when p9_codigo in ('408','007','420','009','015','016','018') then pl_horas else 0 end) as 'Hora Extra' 
```

如果您将 AND P9_CODIGO IN ('011','421','013','409') 放在 where 子句中，则不会过滤上述内容。

因此，您将需要以不同的方式删除它们。

我想你会像这样需要它：

```
sum(case when p9_codigo in ('011','421','013','409') then PL_HORAS else 0 end) as 'Atrasos',
sum(case when p9_codigo in ('408','007','420','009','015','016','018') then pl_horas else 0 end) as 'Hora Extra' 
```

并从 where 子句中删除过滤器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T15:47:10.573

知道了 ！谢谢大家

```
SELECT 
DISTINCT PL_MAT AS 'Código', 
RA_NOME AS 'Nome',
RJ_DESC AS 'Cargo',
SUM(CASE WHEN P9_CODIGO IN ('082','080','030','409') THEN PL_HORAS ELSE 0 END) AS 'Atrasos',
SUM(CASE WHEN P9_CODIGO IN ('408','007','420','009','015','016','018') THEN PL_HORAS ELSE 0 END) AS 'Hora extra'
--SUM(PL_HORAS) AS 'Hora Extra' -- I need SUM this
FROM SPL020 
INNER JOIN SP9020 ON PL_PD = P9_CODIGO AND SP9020.D_E_L_E_T_ <> '*' AND SPL020.D_E_L_E_T_ <> '*'
INNER JOIN SRA020 ON RA_MAT = PL_MAT AND SRA020.D_E_L_E_T_ <> '*' AND RA_FILIAL = PL_FILIAL
INNER JOIN SRJ020 ON RJ_FUNCAO = RA_CODFUNC
WHERE PL_DATA BETWEEN '20120616' AND '20120715'
--AND P9_CODIGO IN ('011','421','013','409')
--AND P9_CODIGO IN ('408','007','420','009','015','016','018') -- I need sum this 
AND RA_CODFUNC IN ('0408','1204','1233')--AUX COLETA C,MOTORISTA D,MOTORISTA CARRETEIRO
AND RA_SITFOLH NOT IN ('D','A')
AND PL_FILIAL = '05'
AND RA_MAT = '000007'
GROUP BY PL_MAT, RA_NOME, RJ_DESC 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-14T15:03:28.210

podés probar esto:

选择名称，货物，总和（Hora_Extra）作为 Hora_Extra（选择 PL_MAT AS 'Codigo'，RA_NOME 作为'Nome'，RJ_DESC 作为'货物'，SUM（PL_HORAS）作为'Atrasos'，

P9_CODIGO 为 'Codigo'

从 SPL020

内部连接 ​​SP9020 ON PL_PD = P9_CODIGO

和 SP9020.D_E_L_E_T_ <> '*'

AND SPL020.D_E_L_E_T_ <> '*'

在 RA_MAT = PL_MAT 和 SRA020.D_E_L_E_T_ <> '*' 上内部连接 ​​SRA020

和 RA_FILIAL = PL_FILIAL

内连接 SRJ020 ON RJ_FUNCAO = RA_CODFUNC

WHERE PL_DATA BETWEEN '20120616' 和 '20120715'

AND P9_CODIGO IN ('011','421','013','409')

AND RA_CODFUNC IN ('0408','120​​4','1233')

AND RA_SITFOLH 不在 ('D','A')

AND PL_FILIAL = '05'

按 PL_MAT、RA_NOME、RA_ADMISSA、RA_CODFUNC、RJ_DESC、P9_DESC、PL_HORAS、P9_CODIGO 分组

) 作为 kk

其中 Codigo in('408','007','420','009','015','016','018') 按名称排序

Unos 提示：不使用波浪号 (C"ó"digo) 不使用 espacios en los campos (Horas Extras)

萨卢多斯

# bundle - 如何在 Launch4j 中使用 Bundle JRE 选项

> ID：15412530
> 
> 赞同：5
> 
> 时间：2013-03-14T14:50:19.713
> 
> 标签：bundle, exe, java, launch4j

我已经使用 Java 有一段时间了，足够长的时间来开始使用 GUI 生成我自己的程序，而不仅仅是在 Eclipse 中运行的教科书上的小示例程序。我想通过将可执行 Jar 包装到 Exe 中，使我的程序对用户，特别是 Windows 用户更加用户友好。所以我找到了 Launch4j，它似乎做得很好，但我不知道该程序中超过一半的选项是什么意思（我花了一个小时才弄清楚如何让它成为一个功能性的 Exe）。我把它交给了一个油炸的人来测试，他回复我说他遇到了 no JRE found 错误。好吧，我想知道如何强制最终用户拥有 JRE，然后我注意到 Launch4j 中的捆绑 JRE 选项。但是我该如何使用它呢？我是否下载了适用于 Windows 的 JRE 离线安装程序，如果可以的话，它会运行吗？找不到安装的？那么系统的正确版本（32位v 64位）呢？我想我在想我会把它引向这个包含 JRE 的神秘包，而我的包装程序将使用它来运行。谁能告诉我如何使用该功能，如果我必须下载什么等。

如果 Launch4j 不是执行此操作的最佳程序，那么请推荐其他程序，我才刚刚开始研究，因为我知道那里有更好的包装器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T15:00:37.873

您的“安装”将需要一个已安装的 JRE（包含`jre/bin`文件夹`java.exe`和所有其他文件）用于“捆绑”JRE。您不能使用 launch4j 打包 Java 安装程序。

如果找不到 JRE，它不会向您的朋友显示下载和安装 Java 的选项吗？

如果您想将 Java 与您的应用程序一起安装，请查看[NSIS](http://nsis.sourceforge.net/Main_Page)。

还有一个：[IzPack](http://izpack.org/)。它创建多平台安装程序。但是，由于它依赖于 Java，它与 launch4j 的情况相同 -> 您需要先下载并安装 Java。（我还没有使用 IzPack，但是当我在寻找解决方案时，它是我的替代方案之一。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-07T15:41:33.330

我创建了自己的launch4j 版本，它允许自动下载和安装所需的JRE。如果您想尝试一下，请在此处获取：[https](https://github.com/maztan/launch4j_auto_jre_download) ://github.com/maztan/launch4j_auto_jre_download 。运行launch4j 后，在“JRE”选项卡中设置选项。

# javascript - Javascript：倒数计时器

> ID：15412531
> 
> 赞同：0
> 
> 时间：2013-03-14T14:50:24.497
> 
> 标签：javascript, jquery

有人可以告诉我如何在 Javascript 或 JQuery 中制作倒数计时器，其中：

当计时器达到 21:00:00 (h:m:s) 时，它会自行重置并从 23:59:59 开始计数。这每天都在重复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:04:18.963

一个简单的谷歌搜索给了我一个链接到一些简单的倒计时脚本在这里[http://keith-wood.name/countdown.html](http://keith-wood.name/countdown.html)

但是我认为任何像将倒计时循环回到 23:59:59 的事情都需要对代码本身进行更多研究。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T15:25:34.730

您可以在此处查看一些 JQuery 计时器： [http ://www.tripwiremagazine.com/2012/11/jquery-countdown-scripts.html](http://www.tripwiremagazine.com/2012/11/jquery-countdown-scripts.html)

# objective-c - 我应该在我的 NSCell 上调用什么方法

> ID：15412533
> 
> 赞同：2
> 
> 时间：2013-03-14T14:50:39.760
> 
> 标签：objective-c, cocoa, mouseevent, nscell, nscontrol

我正在使用自定义 NSCells 编写自定义 NSControl。它是一个控件，所以它必须响应鼠标。我在我的控件上创建了一个 NSTrackingArea，实现`-mouseEntered:`了. （而且我必须实现，但我不知道在那里做什么，所以现在我还没有覆盖这些方法。）在这些方法中，我成功地确定了鼠标当前位于哪个单元格上。现在我有两个问题：`-mouseExited:``-mouseMoved:``-mouseUp/Down:`

*   这是跟踪鼠标的好方法吗？如果没有，我应该怎么做？
*   当鼠标点击、鼠标进入单元格、鼠标离开单元格等时，我应该在我的 NSCell 上调用什么方法？苹果的文档对此不是很清楚。

所以，基本上：**我应该什么时候调用我的 NSCell 上的什么方法来让它响应鼠标事件？**

**编辑：**
重读文档，我想我应该调用 NSCell's和`-trackMouse:inRect:ofView:untilMouseUp:`override`-startTrackingAt:inView:`和. 还有两个问题：1）文档给人的印象是只有在鼠标按下时才会调用它们。那是对的吗？那我应该怎么做呢？2）我应该在哪里/什么时候打电话给 NSCell 的？`-continueTracking:at:inView:``-stopTracking:at:inView:mouseIsUp:``-trackMouse:inRect:ofView:untilMouseUp:`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T13:25:52.783

我最终实现了自己的鼠标跟踪机制：

```
// MyControl.m:

- (void)mouseDown:(NSEvent *)theEvent {
    int currentCellIndex = [self indexOfCellAtPoint:[self convertPoint:[theEvent locationInWindow] fromView:nil]];
    if (currentCellIndex < [cells count]) {
        MKListCell *cell = [cells objectAtIndex:currentCellIndex];
        currentCell = cell;
        [currentCell mouseDown:theEvent];
    }
}

- (void)mouseUp:(NSEvent *)theEvent {
    int currentCellIndex = [self indexOfCellAtPoint:[self convertPoint:[theEvent locationInWindow] fromView:nil]];
    if (currentCellIndex < [cells count]) {
        MKListCell *cell = [cells objectAtIndex:currentCellIndex];
        [cell mouseUp:theEvent];
    }
}

- (void)mouseEntered:(NSEvent *)theEvent {
    int currentCellIndex = [self indexOfCellAtPoint:[self convertPoint:[theEvent locationInWindow] fromView:nil]];
    if (currentCellIndex < [cells count]) {
        MKListCell *cell = [cells objectAtIndex:currentCellIndex];
        currentCell = cell;
        [currentCell mouseEntered:theEvent];
    }
}

- (void)mouseExited:(NSEvent *)theEvent {
    int currentCellIndex = [self indexOfCellAtPoint:[self convertPoint:[theEvent locationInWindow] fromView:nil]];
    if (currentCellIndex < [cells count]) {
        MKListCell *cell = [cells objectAtIndex:currentCellIndex];
        [cell mouseExited:theEvent];
        currentCell = nil;
    }
}

- (void)mouseMoved:(NSEvent *)theEvent {
    int currentCellIndex = [self indexOfCellAtPoint:[self convertPoint:[theEvent locationInWindow] fromView:nil]];
    MKListCell *cell;
    if (currentCellIndex < [cells count]) {
        cell = [cells objectAtIndex:currentCellIndex];
    }
    if (currentCell != cell) {
        [currentCell mouseExited:theEvent];
        [cell mouseEntered:theEvent];
        currentCell = cell;
    }
    else {
        [currentCell mouseMoved:theEvent];
    }
}

- (void)mouseDragged:(NSEvent *)theEvent {
    int currentCellIndex = [self indexOfCellAtPoint:[self convertPoint:[theEvent locationInWindow] fromView:nil]];
    MKListCell *cell = nil;
    if (currentCellIndex < [cells count]) {
        cell = [cells objectAtIndex:currentCellIndex];
    }
    if (currentCell != cell) {
        [currentCell mouseExited:theEvent];
        [cell mouseEntered:theEvent];
        currentCell = cell;
    }
    else {
        [currentCell mouseMoved:theEvent];
    }   
}

- (int)indexOfCellAtPoint:(NSPoint)p {
    int cellIndex = (self.bounds.size.height - p.y) / cellHeight;
    return cellIndex;
} 
```

当然，在`MyCell.h`：

```
- (void)mouseDown:(NSEvent *)event;
- (void)mouseUp:(NSEvent *)event;
- (void)mouseMoved:(NSEvent *)event;
- (void)mouseEntered:(NSEvent *)event;
- (void)mouseExited:(NSEvent *)event; 
```

这些方法的实现为空（因此编译器不会抱怨，我可以将鼠标处理方法的实现留给子类）。

# codeigniter - datamapper orm 高级关系

> ID：15412536
> 
> 赞同：0
> 
> 时间：2013-03-14T14:51:00.517
> 
> 标签：codeigniter, orm, datamapper

我将 datamapper orm 与 codeigniter 一起使用

我的桌子是：

人员 ID、姓名、related_person1_id、related_person2_id

人可以有 1 个related_person1、1 个related_person2

如何在我的模型文件中设置关系？

它在文档中有所描述：

```
class Person extends DataMapper {
$has_many = array(
    'related_person' => array(
        'class' => 'person',
        'other_field' => 'person',
        'reciprocal' => TRUE
    ),
    'person' => array(
        'other_field' => 'related_person',
        'reciprocal' => TRUE
    )
); 
```

}

我怎样才能为超过 1 个相关人员设置？我应该如何布置我的桌子？我想和 1 个“人”表呆在一起。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T13:18:27.287

最好的办法是为关系创建一个单独的表。

所以你有一个人表：

```
id:int
name:text 
```

然后是关系表

```
id:int
person_id:int
related_to_person_id:int
relationship 
```

这样，您可以根据需要在每个人之间建立尽可能多的关系。

人员：

```
id | name
 1 | Jimmy Doublechin
 2 | Opie Hardabs
 3 | Anthony Predator 
```

关系：

```
id | person_id | related_to_person_id | relationship
 1 |         1 |                    2 | lover
 2 |         1 |                    3 | best buddy evar
 3 |         3 |                    2 | Mother 
```

然后

```
class Person extends Datamapper {
    public $has_many = array('relationships');
...

class Relationships extends Datamapper {
    public $has_one = array('person');
.... 
```

# string - 在lua中将字符串转换为表

> ID：15412537
> 
> 赞同：3
> 
> 时间：2013-03-14T14:51:05.630
> 
> 标签：string, lua, lua-table

我是lua的新手。我需要将以下字符串转换为 lua 表。我怎么能这样做？

```
str = "{a=1, b=2, c={d=3,e=4} }" 
```

我想将此字符串转换为 lua 表，以便我可以像这样访问它：

```
print(str['a']) -- Output : 1
print(str['c']['d']) -- Output : 3 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-14T14:57:27.470

您可以简单地将 a 添加`str =`到字符串的开头，然后让解释器将该字符串作为一个块加载。请注意，`loadstring`它不会运行块，而是返回一个函数。因此，您添加`()`以立即调用该函数并实际执行代码：

```
loadstring("str = "..str)() 
```

这会做同样的事情：

```
str = loadstring("return "..str)() 
```

如果您自己不生成字符串，那可能很危险（因为**任何**代码都会被执行）。在这种情况下，您可能需要手动解析字符串，以确保它实际上是一个表并且不包含错误的函数调用。

# zend-framework2 - 如何通过加入 Zend 框架来模拟“不在”？

> ID：15412540
> 
> 赞同：0
> 
> 时间：2013-03-14T14:51:12.763
> 
> 标签：zend-framework2, zend-db

我有两个链接的关系表“demande”和“reponse”，我想检索不在“reponse”中的“demande”的所有行。

我尝试加入：

```
$select = new Select ();

$select->columns(array("id"));
$select->from ("demande" );
$select->where->lessThan("dateArretMarche",$stringDate );
$select->join(
    array("rep" => 'reponse'), // table name,
    'demande.id = rep.id_demande',array(),  
    $select::JOIN_RIGHT);

$select ->where->isNull("rep.id");//<== it doesn't work 
```

但我不能选择“空”行”。我想“不在”是可能的，但 Zend 框架只提供“在”谓词。

谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T21:41:12.170

如果您只是将其包含在查询中怎么办？像这样：

```
$select ->where('rep.id IS NULL'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-14T05:24:14.120

如果你想使用`isNull`条件。那么你需要使用 with `Predicate`。试试下面的代码。

```
 $select->where(array(
        new \Zend\Db\Sql\Predicate\IsNotNull("rep.id")
            )
    ); 
```

# c++ - Mysql 连接器 C++ 和浮点数

> ID：15412542
> 
> 赞同：5
> 
> 时间：2013-03-14T14:51:14.507
> 
> 标签：c++, mysql, connector

我找不到有关从结果集中获取浮点数或如何将浮点数存储在准备好的语句中以创建查询以插入浮点数的任何信息。是否有可能做到这一点？我应该使用 char 数组存储它们吗？提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-14T15:18:14.817

对于结果检索，我希望您使用`ResultSet::getDouble`- for 语句，`PreparedStatement::setDouble`.

似乎没有`float`具体的适应，但基础列定义将是`FLOAT`or `DOUBLE`。

# qlikview - 如何在 Qlikview 中调用具有 3 个参数的大存储过程

> ID：15412545
> 
> 赞同：0
> 
> 时间：2013-03-14T14:51:17.307
> 
> 标签：qlikview

我有一个存储过程，其中包含 3 个带有多个`SELECT`s 和`INNER JOIN`s 的输入参数。我想在 QlikView 中调用存储过程。我遵循了很多教程，但我做到了。

我正在使用 OLE DB，我正在尝试如下调用：

```
SQL CALL [DB NAME].[dbo].[ABC] @_ End-Time ='2012-12-31 00:21:06.550', @_ Start-time = '2012-12-31 00:21:06.550',
@_ Username = 'XYZ'; 
```

这个对吗？如果没有，有哪些方法可以将存储过程调用到 Qlikview 中，我需要什么权限？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:40:58.767

我不确定您是否检查过此线程（[http://goo.gl/IiGD2](http://goo.gl/IiGD2)），但它可能有用。我从中注意到了几件事：需要将附加字符串添加到连接字符串“（模式为写入）”中，并且还需要激活 qv 中的“以读写模式打开数据库”。还要确保您有执行 sql 权限。

问候！斯特凡

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-18T21:47:57.920

一种解决方法可能是从表中检索三个输入变量，并使用 SQL 插入从 qlikview 更新此表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-12T14:36:48.897

可以从 QlikView 运行存储过程，但无法提取从中获得的任何输出。如果您想从 QlikView 检索任何数据，您应该将其转换为函数。制作MV是你最好的做法，你会有更好的表现。

# mysql - 任何人都可以在 MySQL IN 子句中解释这个逻辑

> ID：15412550
> 
> 赞同：1
> 
> 时间：2013-03-14T14:51:28.567
> 
> 标签：mysql

任何人都可以在 MySQL IN 子句中解释这个逻辑并帮助我理解这个问题

我有一个用户表，这个表用户属于一个或多个组。组表主键引用在用户表中通过逗号（，）分隔值更新，如下所示

```
Query 1\. SELECT * FROM user;
+---------+-----------+-------------------------+-----------+
| user_id | user_name | user_email              | group_id  |
+---------+-----------+-------------------------+-----------+
|       1 | suresh    | xxxx@yyyyyyyyyy.com     | 22        |
|       2 | sundar    | s7sundera@gmail.com     | 2         |
|       3 | tester    | xxxxxxxx@yyyyyyyyyy.com | 1,2,3,4   |
|       4 | gail      | zzzzzz@gmail.com        | 1,2,3,4,5 |
+---------+-----------+-------------------------+-----------+ 
```

如果我在 MySQL 中使用 IN 子句和 group id 值为 2 我只得到一个结果

```
Query 2\. SELECT * FROM user WHERE group_id IN(2)
+---------+-----------+---------------------+----------+
| user_id | user_name | user_email          | group_id |
+---------+-----------+---------------------+----------+
|       2 | sundar    | s7sundera@gmail.com | 2        |
+---------+-----------+---------------------+----------+ 
```

如果我在 MySQL 中使用 IN 子句和组 id 值作为 (1,2) 我得到三个结果

```
Query 3\. SELECT * FROM user WHERE group_id IN(1,2)
+---------+-----------+-------------------------+-----------+
| user_id | user_name | user_email              | group_id  |
+---------+-----------+-------------------------+-----------+
|       2 | sundar    | s7sundera@gmail.com     | 2         |
|       3 | tester    | xxxxxxxx@yyyyyyyyyy.com | 1,2,3,4   |
|       4 | gail      | zzzzzz@gmail.com        | 1,2,3,4,5 |
+---------+-----------+-------------------------+-----------+ 
```

我想获得像以下输出一样的组 id 2 用户，但它没有按预期工作

如果我使用此查询，我需要获得查询 3 结果，这可能吗？

```
SELECT * FROM user WHERE group_id IN(2) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T14:59:16.483

这太长了，不能作为评论，但您需要重新考虑您当前的表格设计。您不应该将`group_id`值存储为逗号分隔的列表。

您的表的结构应类似于以下内容：

```
create table user
(
    user_id int,  PK
    user_name varchar(50),
    user_email varchar(100)
);

create table groups
(
    group_id int, PK
    group_name varchar(10)
);

create table user_group
(
    user_id int,
    group_id int
); 
```

该`user_group`表将具有 the`user_id`和 the的主键，`group_id`因此您无法获得重复项，然后这些列应该是各个表的外键。此表将允许您为每个 user_id 拥有多个组。

然后，当您查询表时，查询将是：

```
select u.user_id, 
  u.user_name,
  u.user_email,
  g.group_id
from user u
inner join user_group ug 
  on u.user_id = ug.user_id
inner join groups g
  on ug.group_id = g.group_id 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/98dcf/1)。

如果您需要出于显示目的`group_id`在逗号分隔列表中显示值，您可以使用`GROUP_CONCAT()`：

```
select u.user_id, 
  u.user_name,
  u.user_email,
  group_concat(g.group_id order by g.group_id) group_id
from user u
inner join user_group ug 
  on u.user_id = ug.user_id
inner join groups g
  on ug.group_id = g.group_id
group by u.user_id, u.user_name, u.user_email 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/98dcf/3)

如果你重新设计你的表格，那么当你搜索它会变得更容易：

```
select u.user_id, 
  u.user_name,
  u.user_email,
  g.group_id
from user u
inner join user_group ug 
  on u.user_id = ug.user_id
inner join groups g
  on ug.group_id = g.group_id
where g.group_id in (1, 2) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/98dcf/4)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T14:56:59.820

传递`1,2`给`IN`操作员时，您要求使用`1`and `2`; 这就是为什么它将返回所有三个结果。如果您有一列以逗号分隔的值，则您违反了正常形式；因为每一列不应包含多个值。如果要在多值逗号分隔列中查找单个值，则可以使用`FIND_IN_SET`.

规范化的模式如下所示：

```
+---------+------------+--------------+
| 用户 ID | 用户名 | 用户邮箱 |
+---------+------------+--------------+
| 2 | 桑达尔| s7sundera@gmail.com |
| 3 | 测试仪 | xxxxxxxx@yyyyyyyyyy.com |
| 4 | 盖尔 | zzzzzz@gmail.com |
+---------+------------+--------------+

+---------+-----------+
| 用户 ID | group_id |
+---------+-----------+
| 2 | 2 |
| 3 | 1 |
| 3 | 2 |
| 3 | 3 |
| 3 | 4 |
| 4 | 1 |
| 4 | 2 |
| 4 | 3 |
| 4 | 4 |
| 4 | 5 |
+---------+-----------+

+----------+
| group_id |
+----------+
| 1 |
| 2 |
| 3 |
| 4 |
+----------+
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T15:04:27.683

MySQL 不会将逗号分隔的列表视为字符串以外的任何内容。当您这样做时`WHERE group_id IN(2)`，它会转换`group_id`为`INT`，因此可以将其与`2`.

当转换为 时`INT`，MySQL 在第一个非数字字符处停止。

例如，`'1,2,3,4,5' IN (2)`变成`1 IN (2)`。这是错误的。

你可以尝试用`FIND_IN_SET`它来做你想做的事，但效率不高（因为它不能使用索引；它需要读取*每一行*以查看是否匹配）。

```
WHERE FIND_IN_SET(2, group_id) 
```

要搜索多行，请使用`OR`.

```
WHERE FIND_IN_SET(1, group_id) OR FIND_IN_SET(2, group_id) 
```

*正确*的方法是创建一个“链接表”，其中包含每个用户的一个（或多个）行，显示他们所在的组。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T16:10:48.807

# 解释

查询的逻辑是什么`SELECT * FROM user WHERE group_id IN(1,2);`？

*   你给了一个数字列表`(1,2)`
*   被`groud_id`数字比较
*   结果出现在第一个逗号之前在数字上匹配 1 或 2 的任何内容

# 建议

我将要向您展示的内容可能看起来很不正统，但请跟随我...

下面的查询将获取 group_ids 中同时包含 1 和 2 的每一行：

```
SELECT user.* FROM
(SELECT * FROM (SELECT id,CONCAT(',',group_id ,',') group_ids
FROM user) U WHERE LOCATE(',2,',group_ids)) U1
INNER JOIN
(SELECT * FROM (SELECT id,CONCAT(',',group_id ,',') group_ids
FROM user) U WHERE LOCATE(',4,',group_ids)) U2
ON U1.id = U2.id
INNER JOIN user ON user.id = U2.id; 
```

这是创建我们的示例数据的代码

```
DROP DATABASE IF EXISTS sundar;
CREATE DATABASE sundar;
use sundar
CREATE TABLE user
(
    id int not null auto_increment,
    user_name VARCHAR(30),
    user_email VARCHAR(70),
    group_id VARCHAR(128),
    PRIMARY KEY (id)
);
INSERT INTO user (user_name,user_email,group_id) VALUES
('suresh' , 'xxxx@yyyyyyyyyy.com'     ,'22'),
('sundar' , 's7sundera@gmail.com'     ,'2'),
('tester' , 'xxxxxxxx@yyyyyyyyyy.com' ,'1,2,3,4'),
('gail'   , 'zzzzzz@gmail.com'        ,'1,2,3,4,5');
SELECT * FROM user; 
```

让我们创建您的示例

```
mysql> DROP DATABASE IF EXISTS sundar;
Query OK, 1 row affected (0.00 sec)

mysql> CREATE DATABASE sundar;
Query OK, 1 row affected (0.00 sec)

mysql> use sundar
Database changed
mysql> CREATE TABLE user
    -> (
    ->     id int not null auto_increment,
    ->     user_name VARCHAR(30),
    ->     user_email VARCHAR(70),
    ->     group_id VARCHAR(128),
    ->     PRIMARY KEY (id)
    -> );
Query OK, 0 rows affected (0.04 sec)

mysql> INSERT INTO user (user_name,user_email,group_id) VALUES
    -> ('suresh' , 'xxxx@yyyyyyyyyy.com'     ,'22'),
    -> ('sundar' , 's7sundera@gmail.com'     ,'2'),
    -> ('tester' , 'xxxxxxxx@yyyyyyyyyy.com' ,'1,2,3,4'),
    -> ('gail'   , 'zzzzzz@gmail.com'        ,'1,2,3,4,5');
Query OK, 4 rows affected (0.00 sec)
Records: 4  Duplicates: 0  Warnings: 0

mysql> 
```

这就是它的样子

```
mysql> SELECT * FROM user;
+----+-----------+-------------------------+-----------+
| id | user_name | user_email              | group_id  |
+----+-----------+-------------------------+-----------+
|  1 | suresh    | xxxx@yyyyyyyyyy.com     | 22        |
|  2 | sundar    | s7sundera@gmail.com     | 2         |
|  3 | tester    | xxxxxxxx@yyyyyyyyyy.com | 1,2,3,4   |
|  4 | gail      | zzzzzz@gmail.com        | 1,2,3,4,5 |
+----+-----------+-------------------------+-----------+
4 rows in set (0.00 sec)

mysql> 
```

同样，这里是一个凌乱的查询，可以得到你想要的：

```
SELECT user.* FROM
(SELECT * FROM (SELECT id,CONCAT(',',group_id ,',') group_ids
FROM user) U WHERE LOCATE(',1,',group_ids)) U1
INNER JOIN
(SELECT * FROM (SELECT id,CONCAT(',',group_id ,',') group_ids
FROM user) U WHERE LOCATE(',2,',group_ids)) U2
ON U1.id = U2.id
INNER JOIN user ON user.id = U2.id; 
```

在这里执行：

```
mysql> SELECT user.* FROM
    -> (SELECT * FROM (SELECT id,CONCAT(',',group_id ,',') group_ids
    -> FROM user) U WHERE LOCATE(',1,',group_ids)) U1
    -> INNER JOIN
    -> (SELECT * FROM (SELECT id,CONCAT(',',group_id ,',') group_ids
    -> FROM user) U WHERE LOCATE(',2,',group_ids)) U2
    -> ON U1.id = U2.id
    -> INNER JOIN user ON user.id = U2.id;
+----+-----------+-------------------------+-----------+
| id | user_name | user_email              | group_id  |
+----+-----------+-------------------------+-----------+
|  3 | tester    | xxxxxxxx@yyyyyyyyyy.com | 1,2,3,4   |
|  4 | gail      | zzzzzz@gmail.com        | 1,2,3,4,5 |
+----+-----------+-------------------------+-----------+
2 rows in set (0.00 sec)

mysql> 
```

好的，要不要找`(2,4)`？

```
mysql> SELECT user.* FROM
    -> (SELECT * FROM (SELECT id,CONCAT(',',group_id ,',') group_ids
    -> FROM user) U WHERE LOCATE(',2,',group_ids)) U1
    -> INNER JOIN
    -> (SELECT * FROM (SELECT id,CONCAT(',',group_id ,',') group_ids
    -> FROM user) U WHERE LOCATE(',4,',group_ids)) U2
    -> ON U1.id = U2.id
    -> INNER JOIN user ON user.id = U2.id;
+----+-----------+-------------------------+-----------+
| id | user_name | user_email              | group_id  |
+----+-----------+-------------------------+-----------+
|  3 | tester    | xxxxxxxx@yyyyyyyyyy.com | 1,2,3,4   |
|  4 | gail      | zzzzzz@gmail.com        | 1,2,3,4,5 |
+----+-----------+-------------------------+-----------+
2 rows in set (0.00 sec)

mysql> 
```

看起来它有效。

试试看 ！！！

# c# - InvalidCastException，错误的上下文？

> ID：15412552
> 
> 赞同：2
> 
> 时间：2013-03-14T14:51:35.320
> 
> 标签：c#, dll

我有一个执行数据转储的 exe。exe 将根据配置动态获取 DLL，并将类对象传递给它。DLL 有一个用它编译的这个类的副本，并且可以看到数据，在调试下，作为一个对象没有问题。但是，当我尝试将其转换为班级时，它告诉我由于上下文原因它不能。我确信我有时会忽略一些事情。

**错误：**

> [A]MyClass 不能转换为 [B]MyClass。类型 A 源自 'MyExe, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null' 在位置 'C:\MyPath\MyExe.exe' 的上下文 'Default' 中。类型 B 源自 'MyDLL, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null' 在位置 'C:\MyPath\MyDLL.dll' 的上下文 'LoadNeither' 中。

**执行代码：**

```
Object[] param = new Object[] { MyClass };
MethodInfo m = type.GetMethod("MyMethod");
reader = (SqlDataReader)m.Invoke(obj, param); 
```

**DLL 代码：**

```
public SqlDataReader MyMethod(Object param)
{
    SqlDataReader reader = new SqlDataReader();
    Type t = param.GetType();  //Returns MyClass

    if (param is MyClass)      //Returns false
        reportItem = (MyClass)param; //Never executes

    MyClass reportItem = (MyClass)param; //InvalidCastException

    //other code here, pulling data
    return reader;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T14:53:22.013

> DLL 有一个用它编译的这个类的副本

基本上不要那样做。您应该在*一个*程序集中拥有该类型，并且只有一个程序集。就 CLR 而言，它们是完全不同的类型。

您可能希望有一个插件和应用程序都可以引用的公共库。或者您可以让您的插件引用应用程序可执行文件并将类型保留在其中。

# jquery-mobile - 如何在 jQuery mobile 中调用默认错误

> ID：15412553
> 
> 赞同：0
> 
> 时间：2013-03-14T14:51:39.473
> 
> 标签：jquery-mobile

那么有没有一种方法可以在查询移动设备中使用默认错误显示消息？

# java - 在 Intellij Idea 中添加 throws 声明的快捷方式

> ID：15412555
> 
> 赞同：33
> 
> 时间：2013-03-14T14:51:46.683
> 
> 标签：java, intellij-idea, code-generation, keyboard-shortcuts

我使用 eclipse 已经有一段时间了，但在去年左右我试图习惯 Intellij Idea，因为这是他们在我目前的工作场所使用的。

我在 Idea 中找不到替代品的一个功能是 eclipse 添加 throws 声明的能力。在 Eclipse 中，我可以右键单击带下划线的字符串并选择“添加抛出声明”，然后将其添加到我的方法签名中，但我无法在 Idea 中找到它。Idea中有这样的功能吗？

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-03-14T15:04:18.697

当一段代码需要错误处理时，IntelliJ 会用红色下划线。将指针放在那段代码上，然后按`ALT`+ `ENTER`。IntelliJ 现在应该让您选择用 try/catch 包围它、添加 catch 子句或添加 throws 声明。

在您的情况下：单击带下划线的代码 → `ALT`+ `ENTER`→`Add Exception to Method Signature`

IntelliJ 还有一个快捷方式，可以将光标放在下一个错误或警告上：`F2`. 这 - 特别是与`ALT`+结合使用`ENTER`- 非常有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-03T22:08:22.077

在 Mac 上，它也是 Alt+Enter，但您必须位于红线的末尾，表明您必须处理异常。

# c# - C# Visual Studio 2010 - 将数据从 excel 文件导入 C# VS 数据库

> ID：15412556
> 
> 赞同：0
> 
> 时间：2013-03-14T14:51:47.157
> 
> 标签：c#, database, visual-studio-2010, excel, function

我在 c# vs2010 中有一个带有 SQL Server 数据库（3 个表）的项目

我需要从两个 Excel 文件中导入数据，一个用于填充`CapitalPlan`，另一个用于填充`MilestoneData`表格。

有人建议我使用 VS 2010 工具（请参阅 erd 图链接中的视图）填写此内容，而无需在我的任何 C# 表单中使用代码 - 我只需要用数据填充它，以便我可以创建和测试一些查询。

请任何人都可以建议我如何去做这件事？也许在 vs 中创建一个函数......我不完全确定

非常感激

下面的图片可能会有所帮助：

ERD 图

[http://i1186.photobucket.com/albums/z373/barbsbargainsltd/erd_zps059d4dac.jpg](http://i1186.photobucket.com/albums/z373/barbsbargainsltd/erd_zps059d4dac.jpg)

Excel CapitalPlan（填写资本计划表）

[http://i1186.photobucket.com/albums/z373/barbsbargainsltd/capplan_zps31bc1d6a.jpg](http://i1186.photobucket.com/albums/z373/barbsbargainsltd/capplan_zps31bc1d6a.jpg)

查看添加图片的评论（我还没有足够的代表）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:20:20.270

如果是一次性的，请使用 SQL Server 管理工作室[导入向导。](http://msdn.microsoft.com/en-us/library/ms141209.aspx)如果您需要以编程方式运行它而不是考虑创建 SSIS 包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T15:23:47.783

您可以使用这些步骤

• 服务 SQL Server DTS

• Microsoft SQL Server 2005 集成服务 (SSIS)

• SQL Server 链接服务器

• SQL Server 分布式查询

• 对象 ADO（ActiveX 数据对象）和 Microsoft OLE DB Provider for SQL Server

• Jet 4.0 的 ADO 和 Microsoft OLE DB 提供程序

链接示例： http: [//support.microsoft.com/kb/321686/fr](http://support.microsoft.com/kb/321686/fr)

# asp.net - ASP.NET MVC 中基于路径/url 的自定义错误页面

> ID：15412561
> 
> 赞同：1
> 
> 时间：2013-03-14T14:51:58.610
> 
> 标签：asp.net, asp.net-mvc, web-config

是否可以有一个基于 URL 或路径的自定义错误页面？例如，我希望 /images、/styles、/javascript 下发生的任何 404 错误都很快失败，并且找不到标准的 404。但是，其他任何东西都应该生成一个用户友好的自定义 404（这可能是一个更重的响应，是一个具有正常页面布局元素的用户友好页面）。这可能吗？现在我正在使用这样的东西：

```
<httpErrors errorMode="Custom" existingResponse="Replace">
  <remove statusCode="404" subStatusCode="-1" />
  <error statusCode="404" path="/notfound" responseMode="ExecuteURL" />
</httpErrors> 
```

但这会捕获*所有*404 错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T13:53:09.980

我还没有找到一个基于 .config 的解决方案来解决这个问题，但我最终要做的是：

*   我保留了我的`<httpErrors>`配置，该配置重定向到 /Error/NotFound
*   在里面`/Error/NotFound`，我观察我的排除条件并呈现我的错误页面的“基本”版本，它是最小和轻量级的，避免布局等。

    ```
    public ViewResult NotFound()
    {
        if(testForFastFail){
            return View("NotFoundBasic");
        }

        return View();
    } 
    ```

# c# - 通过串口检查外部硬件

> ID：15412564
> 
> 赞同：0
> 
> 时间：2013-03-14T14:52:08.070
> 
> 标签：c#, serial-port, communication

在我的代码中，我设置了以下值：

```
public SerialPort comPort = new SerialPort();
comPort.PortName = portName; 
```

例如，`PortName`可以是 COM17。

现在，如果我通过我的 GUI 添加了两个设备，都在 COM17 上，一个最终会引发异常（拒绝访问 COM17）。现在我想检查哪个设备挂在那个 COM 端口上，所以如果我的应用程序识别它，它可以通过端口发送命令，或者如果它未被识别，它将禁用我的 GUI 中的选项。

那么，有没有办法从 COM 端口获取唯一信息，我可以在安装时将其保存在我的数据库中？

编辑：澄清一下，如果错误的设备连接到该 COM 端口（除了我安装时），我会收到错误消息。我发现了那个错误，所以我知道它不是正确的。但我更想知道可能是哪种设备。假设我有 2 个驱动程序 DLL，2 个不同的设备，并且有人将它们切换了。然后我的应用程序可以检查并查看正确的名称，因此得出结论，这只是更改已安装对象的 COM 端口的问题，而不仅仅是抛出错误并说用户必须重新安装。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:07:28.683

这将取决于您的硬件。如果连接的设备会对特定的信号消息给出可预测且一致的响应，那么您可以使用它来识别它们。我做同样的事情来确定一个专有硬件连接到哪个 COM 端口。我遍历所有 COM 端口并发送一条消息，我知道该消息会从硬件给出特定响应。哪个端口给了我预期的结果是带有硬件的端口。

# php - 计算循环内的html表格列

> ID：15412569
> 
> 赞同：1
> 
> 时间：2013-03-14T14:52:15.943
> 
> 标签：php, html

我有一个基本问题，但现在它让我很痛苦。我只想要一个每行有三列的表格。当它有两列时，我想在一行中添加一个额外的空列。代码在这里...

```
$j=0;
while ($data = mysql_fetch_assoc($q))
{
    // when 3 columns fill, it create new row 
    if (($j%3) == 0)
    {
        echo "ADD A ROW";     
    }
    $j++;
} 
```

但是现在我需要知道这个循环中有多少列（`$j`值），以便当它有两列时在一行中添加一个额外的空列。我知道**count()**在循环中不可用。如果知道`$columnNumber`，我可以处理这个看起来像......

```
if ($columnNumber == 2)
{
    echo "ADD A COLUMN";      
} 
```

我怎样做

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T15:07:21.147

与`j`while 循环完成后的总列数一样，您可以计算需要多少额外的列：

```
$remainder = (j % 3);
$columnsLeft = ($remainder == 0 ? 0 : 3 - $remainder); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T14:54:40.287

```
$j = 1;
 while($data=mysql_fetch_assoc($q))
 {

  if($j == 3)
  {
    echo "ADD A ROW";   
    $j = 0;
  }
  $j++;
 } 
```

这会做的事情

# c++ - 放置新以避免复制构造函数

> ID：15412570
> 
> 赞同：2
> 
> 时间：2013-03-14T14:52:19.540
> 
> 标签：c++, placement-new

我有一个简单的类，其中包含一个指向它自己的成员之一的指针：

```
struct X {
    int val;
    int* pVal;
    X(int v) : val(v), pVal(&val) {}
}

X x(1); 
```

我有一些这样的代码：

```
void foo() {
    doStuffWith(x);
    x = X(2); // completely discard the old value of X, and start again
    doStuffWith(x);
} 
```

我担心当 x 被重新分配时，如果没有发生返回值优化，`x.pVal`将无效地指向临时成员。`X(2)`

我意识到我可以编写一个复制构造函数来解决这个问题。然而，一开始就进行复制似乎很浪费，而不是在一开始就在内存中的正确位置构建对象。

* * *

在这里使用placement new 操作符是否合理？或者这会对析构函数产生意想不到的后果？

```
void foo() {
    doStuffWith(x);
    new (&x) X(2); // completely discard the old value of X, and start again
    doStuffWith(x);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T15:07:23.677

完成这项工作的最明显（也可能是最有效）的方法是提供复制分配和复制构造操作符来“做正确的事情”，按照这个一般顺序：

```
struct X {
    int val;
    int* pVal;

    X(int v) : val(v), pVal(&val) {}   
    X(X const &other) : val(other.val), pVal(&val) {} 

    // pVal was already set by ctor, so just ignore it:
    X &operator=(X const &other) { val = other.val; return *this; }

    // and allow assignment directly from an int:
    X &operator=(int n) { val = n; return *this; }
}; 
```

然后其余代码可以只复制/分配`X`对象而无需跳过箍以防止损坏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T14:53:54.747

### 不

它不会破坏 的旧值`x`，但你是对的，默认的*复制赋值*运算符也不会做你想做的事。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-14T15:22:56.047

对我来说，如果在放置 new 之前调用 X 的析构函数，这似乎是完全可以接受的解决方案。即使实际上没有为类指定析构函数，它在语法上也是允许的。

```
struct X {
  int val;
  int* pVal;
  X(int v) : val(v), pVal(&val) {}
};

X x(1);

void foo() {
  doStuffWith(x);
  x.~X();
  new (&x) X(2); 
  doStuffWith(x);
} 
```

在这种形式下，它是为任何对象重用内存的正确方法（但前提是对象的 ctor 不能抛出！否则 UB 可能会在程序关闭时发生，即析构函数的双重调用）。

实际上，标准保证了以非数组形式从放置 new 传递和返回的指针的相等性：

> ### 18.6.1.3 安置表格
> 
> ...
> 
> void* operator new(std::size_t size, void* ptr) noexcept;
> 
> 返回：ptr。
> 
> 备注：故意不执行其他动作。

（并且转换为void*再返回相同的指针类型的结果也保证与源指针相同）

但是，为避免不正确使用该类，定义复制赋值和复制构造函数或将此类声明为不可复制（删除的）会更安全

并且只有最后一个（不可复制的）情况可以被视为使用placement new 的原因。

尽管我远没有提倡将placement new 用于一般用途，但它表达了直接重用对象内存的意图，并且不依赖于任何优化。复制构造函数和复制赋值当然更安全，但不要准确表达这个意图：实际上不需要“复制”，应该构造新对象来代替旧对象。

# javascript - 新样式不适用于事件上的元素

> ID：15412580
> 
> 赞同：0
> 
> 时间：2013-03-14T14:53:00.820
> 
> 标签：javascript, raphael

我使用 rahaeljs 动态生成了一些正方形。这些方块有一个事件处理程序。当我尝试操纵样式时，它会根据我尝试设置的 attr() 失败：

```
 function changeColor(obj) { 
      return function() { 
          obj.attr({cursor : 'pointer'}); 
      } 
  } 

   var main = function () {

    var width = 901;
    var height = 868;
    var space = 50;

    var paper = Raphael('paper', width, height);

    for (var y = 0; y < height; y += space) { 
        for (var x = 0; x < width; x += space) { 
            var r = paper.rect(x, y, space, space);
            r.attr({fill : 'transparent'})
            r.click(changeColor(r));

          } 
     } 

    };

    window.onload = main; 
```

如果我将光标设置为 {cursor : 'pointer'}，如果我尝试使用 obj.attr({fill : '#ff00ff'}); 更改填充颜色，则效果很好。在 changeColor 函数中，没有任何反应。控制台中也没有错误。

我正在使用最新版本的 raphael。

有什么建议么？

问候，迈克尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:38:59.937

你会对这个答案感到非常好笑或非常沮丧......问题与透明填充属性有关。SVG 将完全透明的对象视为不可点击，让点击事件过滤到它们下方的图层。因此，您的矩形没有收到点击事件。

如果你不能将颜色设置为纯色，你至少可以给 fill 属性一个很小的，几乎不明显的 alpha 量：

```
r.attr({ fill: 'rgba(255,255,255,0.001)' } ); 
```

完成后，您应该恢复营业了！

# .htaccess - htaccess重定向或重写到具有完整变量的表单结果页面

> ID：15412583
> 
> 赞同：0
> 
> 时间：2013-03-14T14:53:08.543
> 
> 标签：.htaccess, form-submit

我正在构建一个网站，它在产品搜索结果中调用页面选择器，页面选择器当前在当前 URL 的末尾添加了一个正斜杠和一个数字（代表页面）。

例如，如果我在“/laundry/Washing-Machines”上浏览洗衣机，然后单击选择器上的第 2 页，它会将我带到“/laundry/Washing-Machines/2”并加载第 2 页，这可以正常工作。

现在，我遇到的问题...

我在侧边栏中有一个表格，用户可以在其中按品牌、燃料类型、尺寸和颜色过滤 Range Cooker 搜索结果。该表单从数据库中收集满足搜索条件的产品，并在页面选择器旁边显示结果。

如果我将表单值保留为默认值并提交表单，则会在“/cooking/Range-Cookers/Search?brand=0&type=0&size=0&colour=0”上看到结果，但是当我单击选择器上的第 2 页时转到“cooking/Range-Cookers/2”，它给我一个 404。如果我在原始 URL 的末尾添加“&page=2”，我会看到第 2 页。

由于页面选择器是一个 php 包含，并且除了我的 Range Cooker 表单的结果之外的所有产品都可以正常工作，我宁愿找到一个使选择器 php 保持不变的解决方案。

有什么方法可以添加重定向到.htaccess，它会从我的页面选择器中获取一个链接，例如“cooking/Range-Cookers/5”，并将其正确应用到当前 URL，所有表单变量都完好无损，例如“cooking/Range-炊具/搜索？brand=1&type=2&size=0&colour=0&page=5"？

我在 HTML、CSS 和 PHP 方面有经验，但我是编辑 .htaccess 的新手，我希望能深入了解我如何实现这一点。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:23:47.487

您不能使用 .htaccess 执行此操作，因为当请求到达 Apache 或 .htaccess 时，信息不可用。

当您单击第 2 页的链接时，客户端会请求关联`href`属性中的 URL。它不提供当前页面上可用的任何其他信息。如果您希望传输此信息，您必须修改第 2 页的链接

```
cooking/Range-Cookers/2 
```

至

```
cooking/Range-Cookers/Search?brand=1&type=2&size=0&colour=0&page=2 
```

当您将页面交付给客户时。以下页面所需的任何其他信息也是如此。

# sockets - 如何使用 SocketConnection 在 Java ME 中创建 HttpConnection 实现？

> ID：15412586
> 
> 赞同：2
> 
> 时间：2013-03-14T14:53:15.980
> 
> 标签：sockets, java-me, httpconnection

在我使用的 Java ME 平台中，我只有 SocketConnection 类来连接到远程服务器。例如，我可以在给定的 ip 上使用`Connector.open("socket://"+ip+":"+port)`.

我想要的是实现一个 HttpConnection，它将使用 http 协议、一个 url 和端口 80 作为参数。我想这将类似于`Connector.open("http://www.google.com:80)`之后能够向服务器发送 GET、POST、DELETE、PUT 请求。

有没有办法通过url地址获取ip，然后使用http协议连接到这个ip？或者如果我的平台不支持它，那么我必须坚持使用套接字？我知道我的问题可能看起来有点抽象，所以请问您是否需要任何澄清。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T11:53:32.197

你必须坚持使用套接字。如果您使用的 Java ME 平台只有`SocketConnection`，则调用`Connector.open("http://www.google.com:80")`将引发异常。

# javascript - 下拉列表中的jquery目标选择选项

> ID：15412587
> 
> 赞同：0
> 
> 时间：2013-03-14T14:53:17.703
> 
> 标签：javascript, jquery

```
<select id="dropdown">
    <option value="200" selected>AMD Athlon 7x</option>
    <option value="300">Core i7</option>
    <option value="400">Core i5</option>
</select>
<select id="dropdown">
    <option value="250" selected>GTX 560 ti</option>
    <option value="350">GRX 680</option>
    <option value="40">ATI 6870</option>
</select> 
```

我根据选定的值计算最终产品的价格。

```
$('select').change(function() {
}); 
```

我需要这个函数来删除选定的属性并将其分配给选定的选项，但我不知道如何定位新选择的选项。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T14:56:56.327

```
$('select').change(function() {
     $(this).children(':selected').attr('selected', true);
}); 
```

但我不明白你为什么需要这个:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T14:55:41.557

像这样：

```
$('select :selected').change(function(){
  //more code
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T14:56:25.187

要获取所选选项，您的下拉列表应首先具有唯一 ID

```
<select id="dropdown1">
    <option value="200" selected>AMD Athlon 7x</option>
    <option value="300">Core i7</option>
    <option value="400">Core i5</option>
</select>
<select id="dropdown2">
    <option value="250" selected>GTX 560 ti</option>
    <option value="350">GRX 680</option>
    <option value="40">ATI 6870</option>
</select>

$("#dropdown1 option:selected"); 
```

现在，也就是说，您的下拉菜单将自动为您更改第一个下拉选择的选项。

另外，如果要在选中时抓取选中选项的值，使用.val()

```
$('select :selected').change(function(){
    $("#dropdown1 option:selected").val();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-01T02:38:21.157

上述示例存在语法错误。以下是不正确的（我试过了，它不起作用）：

```
$('select :selected').change(function(){ 
```

以下是来自 jQuery 站点示例代码（我也尝试过，它确实有效）：

```
<select name="garden" multiple="multiple">
  <option>Flowers</option>
  <option selected="selected">Shrubs</option>
  <option>Trees</option>
  <option selected="selected">Bushes</option>
  <option>Grass</option>
  <option>Dirt</option>
</select>
/* ... */
<script>
$( "select" ).change(function() {   // <<<<< this is the correct syntax
  var str = "";
  $( "select option:selected" ).each(function() {
    str += $( this ).text() + " ";
  });
})
</script> 
```

# jquery - 带有单击事件的表体自动滚动

> ID：15412594
> 
> 赞同：1
> 
> 时间：2013-03-14T14:53:32.840
> 
> 标签：jquery, html, css

我需要在每次单击添加更多按钮时创建一些输入框。我正在使用 jquery，但每次滚动条都不会随着输入框数量的增加而移动。它保留在顶部，因此在达到最大高度后，新字段将被隐藏。我已经使用了 scrollTop 但无法修复它。任何人都可以指导我。

`jQ2("#btnAddItem").click( function () {jQ2("#list_quick > tbody").append('<tr><td...</td></tr>')}`

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:18:43.747

在这里检查： [使用 jQuery 滚动到包含大量文本的 div 的底部](https://stackoverflow.com/questions/3742346/use-jquery-to-scroll-to-the-bottom-of-a-div-with-lots-of-text)

如果没问题，只需将其附加到`.click()`您选择的其他事件中即可。

# r - 使用 plyr 构建概率转移矩阵表

> ID：15412595
> 
> 赞同：1
> 
> 时间：2013-03-14T14:53:33.800
> 
> 标签：r, plyr

我正在尝试对连续时间马尔可夫链系统进行建模，其中在不同的时间间隔内我有不同的速率。

我像这样为每个时间段建立一个速率矩阵

```
make.rate.matrix <- function(c1, c2, m12, m21) {
  matrix(
    c(# State 1: lineages in different populations
      -(m12+m21), m21, m12, 0,
      # State 2: both lineages in population 1
      2*m12, -(2*m12+c1), 0, c1,
      # State 3: both lineages in population 2
      2*m21, 0, -(2*m21+c2), c2,
      # State 4: coalesced (catches both populations; absorbing)
      0, 0, 0, 0),
    byrow = TRUE, nrow=4)
} 
```

（如果您有兴趣，它正在模拟具有迁移的二元系统中的聚结密度）

cs 和 ms 的速率在不同的时间段内有所不同，因此我想为每个时间段构建一个速率矩阵，然后为每个时间段构建一个转换概率矩阵。

有两个时期，我可以指定这样的费率

```
rates <- data.frame(c1 = c(1,2), c2 = c(2,1), m12 = c(0.2, 0.3), m21 = c(0.4, 0.2)) 
```

我想使用从时间 0 到 t 的第一组费率和从时间 t 到 s 的第二组费率。

所以我想要一个第一和第二周期的速率矩阵表，以及从状态 a 移动到 b 通过第一和第二周期的概率转换矩阵。

```
mlply(rates, make.rate.matrix) 
```

给了我两个比率矩阵的列表，如果我想要一个可以轻松查找比率矩阵的表格，我可以做类似的事情

```
> xx <- array(unlist(mlply(rates, make.rate.matrix)), dim=c(4,4,2))
> xx[,,1]
     [,1] [,2] [,3] [,4]
[1,] -0.6  0.4  0.2    0
[2,]  0.4 -1.4  0.0    1
[3,]  0.8  0.0 -2.8    2
[4,]  0.0  0.0  0.0    0
> xx[,,2]
     [,1] [,2] [,3] [,4]
[1,] -0.5  0.2  0.3    0
[2,]  0.6 -2.6  0.0    2
[3,]  0.4  0.0 -1.4    1
[4,]  0.0  0.0  0.0    0 
```

然后我可以得到概率转换矩阵，如

```
> library(Matrix)
> t <- 1; s <- 2
> P1 <- expm(xx[,,1] * t)
> P2 <- expm(xx[,,2] * (s - t)) 
```

但我不知道如何获得这些表格，就像我可以为费率矩阵获得的表格一样。

我觉得我应该能够轻松到达那里，但我不知道如何到达那里。

如何获得一个表 P，其中 P[,,1] 是 P1，P[,,2] 是 P2？

# python - 如何将多个数据库文件与 numpy 结合起来？

> ID：15412597
> 
> 赞同：2
> 
> 时间：2013-03-14T14:53:40.997
> 
> 标签：python, numpy, matplotlib

我知道我可以使用 genfromtxt 命令读取带有 numpy 的文件。它是这样工作的：

```
data = numpy.genfromtxt('bmrbtmp',unpack=True,names=True,dtype=None) 
```

我可以通过以下方式轻松地绘制其中的内容：

```
ax.plot(data['field'],data['field2'], linestyle=" ",color="red") 
```

或者

```
ax.boxplot(data) 
```

它真棒。我现在真正想做的是读取整个文件夹的文件并将它们组合成一个巨大的数据集。如何将数据点添加到数据数据结构中？以及如何一次读取整个文件夹？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T15:18:47.260

要访问目录中的所有文件，请使用[os.walk](http://docs.python.org/2/library/os.html#os.walk)。

要“垂直”堆叠两个结构化 numpy 数组，请使用[np.vstack](http://docs.scipy.org/doc/numpy/reference/generated/numpy.vstack.html)。

要保存结果，请使用[np.savetxt](http://docs.scipy.org/doc/numpy/reference/generated/numpy.savetxt.html)以文本格式保存，或使用[np.save](http://docs.scipy.org/doc/numpy/reference/generated/numpy.save.html#numpy.save)以（较小的）二进制格式保存数组。

* * *

```
import os
import numpy as np

result = None
for root, dirs, files in os.walk('.', topdown = True):
    for filename in files:
        with open(os.path.join(root, filename), 'r') as f:
            data = np.genfromtxt(f, unpack=True, names=True, dtype=None)
        if result is None:
            result = data
        else:
            result = np.vstack((result, data))

print(result[:10]) # print first 10 lines
np.save('/tmp/outfile.npy', result) 
```

# java - 如何设置常量？

> ID：15412599
> 
> 赞同：-1
> 
> 时间：2013-03-14T14:53:43.173
> 
> 标签：java

```
public class Test2 {
    public static void main(String[] args) {

         if(args.length < 2) {
             System.err.println("Error !!");
             System.exit(1);    
        }
          float distance = Float.parseFloat(args[0]);
          float time = Float.parseFloat(args[1]);

          System.out.print("Velocity = " );
          System.out.print(distance / time);
          System.out.print(" m/s ");
        }   
} 
```

如何使变量保持不变？
恒定**距离 = 10** ;
恒定**时间 = 5** ;

谢谢大家！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T14:55:53.257

```
final float distance = Float.parseFloat(args[0]);
final float time = Float.parseFloat(args[1]); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T14:56:02.813

您可以尝试以下方法：-

```
public static final int x= 11; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T14:55:41.690

只需声明它们。

```
 public class Test2 {
        public static final float distance = 10;
        public static final float time = 5;
        public static void main(String[] args) {

             if(args.length < 2) {
                 System.err.println("Error !!");
                 System.exit(1);    
            }
              float distance = Float.parseFloat(args[0]);
              float time = Float.parseFloat(args[1]);

              System.out.print("Velocity = " );
              System.out.print(distance / time);
              System.out.print(" m/s ");
            }   
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T14:55:10.280

这是使用`final`关键字完成的

```
public static final int distance = 10 
```

然后你可以在`distance`任何你需要的地方使用 10 ( [src](http://www.roseindia.net/java/beginners/Varconstltr.shtml) )

另请参阅：[私有最终静态属性与私有最终属性](https://stackoverflow.com/questions/1415955/private-final-static-attribute-vs-private-final-attribute)

# c# - WiX dll嵌入

> ID：15412613
> 
> 赞同：1
> 
> 时间：2013-03-14T14:54:14.907
> 
> 标签：c#, wix, .net-2.0, wix2

我正在尝试将 .dll 嵌入到 wix 安装程序中，该安装程序在安装期间由其他 dll 使用，但不会安装到客户的系统上。

我目前有

```
<Binary Id="AutomationUtils" SourceFile="AutomationUtils\bin\Release\AutomationUtils.dll" />
...
<CustomAction Id="Install" BinaryKey="InstallUILib" DllEntry="AutomationUtils;RunInstallerDLL" Return="check" Execute="deferred" /> 
```

但即使我取出另一个 .dll - WiX 拒绝承认 AutomationUtils 的存在 .. 即使它构建正常（但是当你尝试运行它时会摔倒）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T15:33:27.877

将`BinaryKey='InstallUILib'`引用带有 的`Binary`元素`Id='InstallUILib'`。该`CustomAction/@DllEntry`属性是`Binary`元素中自定义操作 .dll 的函数入口点的名称。该名称需要[::GetProcAddress()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683212%28v=vs.85%29.aspx)可以访问。我很确定名为的函数`AutomationUtils;RunInstallerDLL`无效。

如果您希望执行托管代码自定义操作（您可能需要多个 .dll），这篇[文章](http://www.codeproject.com/Articles/132918/Creating-Custom-Action-for-WIX-Written-in-Managed)是可以的。否则，如果您要创建本机自定义操作，我建议您创建一个 .dll。

# ms-access - MS Access - TEXT 字段的排名

> ID：15412616
> 
> 赞同：0
> 
> 时间：2013-03-14T14:54:24.773
> 
> 标签：ms-access, text, rank

在 MS Access 2000 中，我有一个名为 [Stack Trace] 的表，我应该从中随机提取 400 条不同的文本列的记录。[我查看了此处](https://stackoverflow.com/questions/9937218/query-for-retrieving-random-records-from-ms-access)的一个示例，并向表中添加了一个自动编号字段，并编写了如下查询：

假设 [Appraisal Name] 是需要的不同字段，ID 是自动编号的主键，那么应该用什么查询来查找随机 400 条记录，其中一个文本字段具有不同的值？

第一个没有独特 [评估名称] 的查询。

```
SELECT Top 400 *
FROM   (SELECT *,
           Rnd(ID) AS RandomValue
        FROM  [Street Data])
ORDER  BY RandomValue ASC 
```

我知道我可以通过 Rank 操作在 sql server 中轻松实现这一点。我没有看到任何有用的链接来查找 varchar/text 字段的排名。我尝试使用以下查询查找排名。它没有成功。

```
SELECT
    ID,
    [Appraiser Name],
    (
        SELECT COUNT(*)
        FROM [Street Data] WHERE
        [Appraiser Name] <= T.[Appraiser Name]
    ) AS Rank
FROM [Street Data] AS T
ORDER BY ID, [Appraiser Name] 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:22:51.507

我解决了一些方法。但是，如果有任何简单的方法可以做到这一点，我欢迎。我创建了三个查询。第一个查找 Appraiser Name 的等级，第二个查找 Appraiser Name 的不同，第三个是最终查询。我尝试使用 rank = 1 的查询中的第一个，它给了我**加入不支持**的错误。那很不好。当我创建另一个 rank = 1 的查询，然后在最后一个查询中使用它时，它起作用了。

**StreetData_Appraiser**

```
SELECT ID, [Appraiser Name], (
        SELECT COUNT([Appraiser Name])
        FROM [Street Data]
WHERE [Appraiser Name] = T.[Appraiser Name]
AND ID <= T.ID
    ) AS Rank
FROM [Street Data] AS T
ORDER BY ID, [Appraiser Name] 
```

**StreetData_Distinct_Appraiser**（查询以屏蔽第一个查询并仅显示不同的记录并避免无效连接错误）

```
SELECT * FROM StreetData_Appraiser WHERE Rank = 1 
```

**最终查询**

```
SELECT TOP 400 *
FROM (SELECT ST.*,
           Rnd(ST.ID) AS RandomValue
        FROM  [Street Data] AS ST
        INNER JOIN [StreetData_Distinct_Appraiser] AS SA ON SA.ID=ST.ID)  AS STRecs
ORDER BY RandomValue 
```

# asp.net - 将 RSA SecurID 与 Active Directory 联合服务集成

> ID：15412618
> 
> 赞同：2
> 
> 时间：2013-03-14T14:54:29.613
> 
> 标签：asp.net, rsa, adfs

我正在尝试创建一个自定义 AD FS 2.0 登录页面，该页面将允许我使用 RSA SecurID 令牌对用户进行身份验证。我已通读[AD FS 2.0 分步指南：在 Extranet 中与 RSA SecurID 集成](http://technet.microsoft.com/en-us/library/hh344805%28v=ws.10%29.aspx)，但这并不能真正解决相同的问题。它详细介绍了使用 RSA 保护 adfs/ls 虚拟目录的场景，但是一旦用户提供了有效的用户名和密码，他们就会被简单地定向到 AD FS 登录页面，在那里他们需要输入他们的 AD 凭据以进行身份​​验证。

我还查看了 RSA SecurID Web SDK，但它似乎主要处理令牌代码的配置和检索。

最后，我查看了 RSA Authentication Agent for Web for IIS，但它似乎只提供了在身份验证浏览器 cookie 中添加、修改或删除数据的机制。

鉴于现有的 AD FS 扩展点，我相信我需要创建一个自定义表单登录页面。我不想对活动目录使用现有的用户名/密码身份验证，而是要提示输入用户名和密码并再次验证 RSA 身份验证服务器。验证后，我需要让 AD FS 作为有效的 Active Directory 用户接受这些凭据，生成适当的 SAML 票证并重定向回应用程序提供商联合服务以继续联合身份验证流程。

这就是我卡住的地方。我似乎找不到任何机制来验证代码（C#）中的 RSA 令牌代码。如果我能做到这一点，我相信我的下一步将是实现一个自定义的 ASP.Net 表单身份验证模块，但我不完全确定这是正确的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-10T08:31:24.000

麦克风

似乎没有人对此有答案。我有同样的问题，此时看起来它将是使用 SDK 的自定义 .net 开发

[http://www.emc.com/security/rsa-securid/rsa-securid-software-authenticators/web-sdk.htm](http://www.emc.com/security/rsa-securid/rsa-securid-software-authenticators/web-sdk.htm)

在示例代码等中没有发现任何来自 Microsoft 的内容。RSA 只是告诉您自己去进行自定义开发。

显然还有一个 RSA Java SDK (authapi.jar)，尽管这在任何公共站点上都不可用。我将联系 RSA 支持以查看是否可以获得 Java SDK。

# android - 无法在 DialogFragment 的 onCreateView 中禁用后退按钮

> ID：15412619
> 
> 赞同：0
> 
> 时间：2013-03-14T14:54:33.693
> 
> 标签：android, user-interface, android-dialogfragment

在创建自定义进度对话框片段时，我在这里有点困惑。一切正常，但由于我不希望用户“返回”直到 DialogFragment 被解除，所以我试图捕获 KeyEvent 并“禁用”。

虽然这很好用：

```
 @Override
public ProgressDialog onCreateDialog(Bundle savedInstanceState) {

    final ProgressDialog dialog = new ProgressDialog(getActivity());
    dialog.setMessage(getString(R.string.loading_text));
    dialog.setIndeterminate(true);
    dialog.setCancelable(false);

    // Disable the back button
    OnKeyListener keyListener = new OnKeyListener() {

        @Override
        public boolean onKey(DialogInterface dialog, int keyCode,
                KeyEvent event) {
            if( keyCode == KeyEvent.KEYCODE_BACK){  
                return true;
            }
            return false;
        }
    };
    dialog.setOnKeyListener(keyListener);
    return dialog;
} 
```

使用 onCreateDialog 并不能让我正确地为 Fragment 充气，因此，自定义我的 Fragment 的外观和感觉。另一方面，onCreateDialog 完美地捕获了后退键按下事件。切换到 onCreateView 时：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    //Inflate the XML view for the help dialog fragment
    View view = inflater.inflate(R.layout.progress_dialog_fragment, container);
    TextView text = (TextView)view.findViewById(R.id.loadingMessage);
    text.setText(Html.fromHtml(getString(R.string.loading_text)));

    // Disable the back button
    android.view.View.OnKeyListener keyListener = new android.view.View.OnKeyListener() {

        @Override
        public boolean onKey(View view, int keyCode, KeyEvent event) {
            if( keyCode == KeyEvent.KEYCODE_BACK){  
                return true;
            }
                return false;
        }
    };
    view.setOnKeyListener(keyListener);

    // request a window without the title
    getDialog().getWindow().requestFeature(Window.FEATURE_NO_TITLE);
    //Transparent Dialog background
    getDialog().getWindow().setBackgroundDrawable(new ColorDrawable(0));
    return view;
} 
```

事件未被捕获。这让我想到了另一个问题......因为我已经看到在许多 SO 问题中独特地使用 onCreateDialog 和 onCreateView ......两者之间有什么区别？

谢谢！

# jira - Jira 子任务在其状态随下拉列表更改时从父故事中消失

> ID：15412622
> 
> 赞同：0
> 
> 时间：2013-03-14T14:54:39.637
> 
> 标签：jira

Jira Sprint 工作视图在与其状态相对应的列中显示故事及其所有子任务。

您可以通过将子任务从一列拖到另一列来更改子任务的状态（例如，对于 Open to Awaiting QA）。

如果我不是通过拖放而是使用子任务本身的下拉菜单来更改子任务的状态，它会完全从 sprint 工作概述中消失（但它仍然作为故事的子任务存在）。

这是一个错误吗？我不理解这种行为，这导致我错过了概述页面中的子任务。

# sql - SQL：如何从行结果中获取不同的值

> ID：15412624
> 
> 赞同：0
> 
> 时间：2013-03-14T14:54:43.433
> 
> 标签：sql

我希望我能正确解释这一点。这就是表格的结果

![在此处输入图像描述](../Images/97494e8c24c55ddc658f303e268466eb.png)

4、5、6 的 Content_ID 是 NEWS。只要新闻的 IsContentUpdated 列有一个布尔值为真，我希望不同的 NEWS 布尔值为真，否则为假。

最终我只想得到的是

![在此处输入图像描述](../Images/1e4c29f671af4ce650d0cf7ffa76edc8.png)

我尝试使用计数为 IsContentUpdated 的临时表，但效果不佳。我有点相信我不应该需要临时表，但我想在这里做些什么时大脑抽筋。

任何帮助是极大的赞赏。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T14:59:22.523

不确定我理解得很好，但如果你想要的就是你展示的，它应该是

```
SELECT Page_ID, MAX(CAST(IsContentUpdated AS INT))
FROM Table
GROUP BY Page_ID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T15:00:23.910

这将为您提供一个不同的`Page_ID`s 列表，以及它们中的任何一个是否具有`IsContentUpdated = 1`：

```
select distinct Page_ID, max(IsContentUpdated)
from myTable
group by Page_ID 
```

# c++ - 计算 blob 的方向

> ID：15412626
> 
> 赞同：5
> 
> 时间：2013-03-14T14:54:44.440
> 
> 标签：c++, orientation, blob, ellipsis

![在此处输入图像描述](../Images/6fc854f5086e8e45cb262d9dab9e6b55.png)

我有一个带有白色斑点的图像，如附图所示。我想计算它的“方向”。想象一下，blob 位于具有 x 轴和 y 轴的坐标系中。我可以通过添加所有白色像素坐标并除以所有白色像素的总和来计算质心，但是要获得方向（我用红线标记），我必须找到一些极值点或类似的东西。

这在某种程度上与在该系统中定位省略号的问题有关，尽管到目前为止我还没有发现任何关于该问题的信息。

有人有任何线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:52:34.710

一种细化算法，甚至是中轴变换，以获得一个像素的点序列，然后选择这些点之间最远的点以找到具有正确方向的线

# php - 外壳卷曲和外壳压缩错误

> ID：15412627
> 
> 赞同：0
> 
> 时间：2013-03-14T14:54:48.683
> 
> 标签：php, wamp

我想在我的主机上安装一个 php 代码，它显示`Shell unzip and Shell cURL command not present`错误。

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:00:28.227

这段代码可能包含一些 cURL 函数，它调用你显然没有安装的 cURL 库。

如果你想安装它，这里是 cURL 的文档：http: [//curl.haxx.se/](http://curl.haxx.se/)

# python - Python 如何管理 sys.modules？

> ID：15412628
> 
> 赞同：2
> 
> 时间：2013-03-14T14:54:52.080
> 
> 标签：python, module, python-import

我想知道`sys.modules`字典的内容。例如，当我导入`compiler`包时：

```
>>> import compiler
>>> for k in sys.modules:
...     if k == 'compiler' or k.startswith('compiler.'):
...             print k
...
compiler.sys
compiler.ast
compiler.token
compiler
compiler.consts
compiler.warnings
compiler.transformer
compiler.struct
compiler.parser
compiler.symbol
compiler.imp
compiler.visitor
compiler.cStringIO
compiler.os
compiler.compiler
compiler.syntax
compiler.future
compiler.dis
compiler.pycodegen
compiler.misc
compiler.pyassem
compiler.types
compiler.symbols
compiler.marshal 
```

为什么会有类似`compiler.warnings`and的条目`compiler.marshal`？它们不是`compiler`包的一部分，也不是模块的实际属性：

```
>>> for k in sys.modules:
...     if k.startswith('compiler.') and hasattr(compiler, k.split('.')[1]):
...             print k
...
compiler.ast
compiler.consts
compiler.warnings
compiler.transformer
compiler.visitor
compiler.syntax
compiler.future
compiler.pycodegen
compiler.misc
compiler.pyassem
compiler.symbols 
```

包装内容是：

![显示编译器包内容的 Windows 资源管理器](../Images/c7b2e77d07114bd9ebb38ddfa3210109.png)

为什么字典中有“额外项目” `sys.modules`？它们是做什么用的？像这样的模块`marshal`不是`compiler`包的一部分，但带有前缀，`'compiler.'`我不明白为什么。此外，在导入*编译器*包后，还有一个`marshal`模块条目。`sys.modules`

 *```
sys.modules['marshal']
<module 'marshal' (built-in)> 
```

*注意：我随机选择了 marshal，它可以作为任何模块的通用替代品。**

# mysql - Rails：创建一条记录，然后立即读取它

> ID：15412630
> 
> 赞同：0
> 
> 时间：2013-03-14T14:55:02.723
> 
> 标签：mysql, ruby-on-rails, activerecord

我正在创建一条记录，然后从 after create 过滤器中将新创建的记录的 id 推送到队列中。

从另一个脚本中，我正在从队列中读取 id 并立即读取 id 的 db 记录。

```
record = Model.find(id)# this is giving error: Couldn't find record with ID 8732 
```

我正在使用带有 mysql2 gem 的 rails 2.3.14。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T20:54:52.097

你所经历的被称为竞争条件。

正如 ilan 指出的那样，您的第二个脚本或工作库正在尝试在记录完全写入（“提交”）之前访问它。

这个问题的一个常见解决方案是使用[**after_commit**](http://api.rubyonrails.org/classes/ActiveRecord/Transactions/ClassMethods.html#method-i-after_commit)回调而不是 after_create / after_save 等。

[Rails BestPractices 文章中](http://rails-bestpractices.com/posts/695-use-after_commit)的一个示例。

前：

```
class Notification < ActiveRecord::Base
  after_create :asyns_send_notification

  def async_send_notification
    NotificationWorker.async_send_notification({:notification_id => id})
  end
end

class NotificationWorker < Workling::Base
  def send_notification(params)
    notification = Notification.find(params[:notification_id])
    user = notification.user
    # send notification to user's friends by email
  end
end 
```

使用 after_commit 生命周期钩子重构后：

```
class Notification < ActiveRecord::Base
  after_commit :asyns_send_notification, :on => :create

  def async_send_notification
    NotificationWorker.async_send_notification({:notification_id => id})
  end
end 
```

进一步阅读：[Rails API 文档中的 after_commit](http://api.rubyonrails.org/classes/ActiveRecord/Transactions/ClassMethods.html#method-i-after_commit)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T14:57:38.807

也许查询结果`"SELECT * FROM Model WHERE id=8732"`在缓存中。

您应该尝试“重新加载”查询：

```
record = Model.find_by_id(id, true) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T20:16:47.493

原因与事务隔离级别有关。尽管您可以读取刚刚插入的条目，但在提交事务之前另一个进程无法读取。此提交发生在控制器返回后。

# sql - AngularJS JSTL 插入

> ID：15412634
> 
> 赞同：0
> 
> 时间：2013-03-14T14:55:23.127
> 
> 标签：sql, jsp, jstl, crud

我使用 jstl sql 进行原型设计，并希望将它与 angularjs 一起使用。下面的代码会导致我的数据库中出现空字段。如何在 jstl sql 代码中捕获参数？

**表单.html：**

```
<form ng-submit="submit()" ng-controller="crudCtrl">        
    <input type="text" name="name" id="name" ng-model="name"/>
    <input type="submit" name="submit" id="submit" value="Submit"/>
</form> 
```

**ctrl.js：**

```
function crudCtrl($scope, $http) {

    $scope.name = name;
    $scope.url = 'create.jsp';
    $scope.submit = function() {
        $http({
            method: 'POST',
            url: $scope.url,
            data: $scope.name,
            headers: {'Content-type': 'application/x-www-form-urlencoded'}
        }).success(function(data, status) {
            $scope.status = status;
            $scope.data = data;
            $scope.result = data;
        }).error(function(data, status) {
            $scope.data = data || "Fail";
            $scope.status = status;
        });
    }
} 
```

**创建.jsp：**

```
<sql:update dataSource="jdbc/postgres">
    INSERT INTO mySchema.test
    (
        name
    )
    VALUES(?)
    <sql:param value="${name}"/>
</sql:update> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:58:45.200

```
<sql:param value="${param.name}"/> 
```

有关 JSP EL 隐式对象的列表，请参阅[http://docs.oracle.com/javaee/1.4/tutorial/doc/JSPIntro7.html#wp71043](http://docs.oracle.com/javaee/1.4/tutorial/doc/JSPIntro7.html#wp71043)。

# regex - 使用参数验证 url 的正则表达式

> ID：15412637
> 
> 赞同：1
> 
> 时间：2013-03-14T14:55:30.927
> 
> 标签：regex, url

我一直在寻找解决这个问题的方法，但无济于事。我试图阻止用户输入格式不正确的 URL。目前我有这个正则表达式：

```
^(http|https)\://.*$ 
```

这会检查以确保用户在 URL 中使用*http*或*https*。但是，我需要更进一步并验证 URL 的结构。

例如这个 URL:`http://mytest.com/?=test`显然是无效的，因为没有指定参数。当我使用此 URL 时，我在 Web 上找到的所有正则表达式都返回有效。

我一直在使用[这个](http://www.regular-expressions.info/javascriptexample.html)网站来测试我一直在寻找的表达方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T15:57:26.317

看，我认为测试 URL 的最佳解决方案是：

```
 var url="http://mytest.com/?=test"; 
```

做2个步骤：

1-仅测试 URL 为：
`http://mytest.com/` 使用模式：

```
var pattern1= "^(http:\/\/www.|https:\/\/www.|ftp:\/\/www.|www.){1}([0-9A-Za-z]+\.)([A-Za-z]){2,3}(\/)?"; 
```

2- 通过使用来拆分 URL 字符串`pattern1`以获取 URL 查询字符串，并且如果 URL 具有查询字符串，然后使用以下模式再次对其进行测试：

```
var query=url.split(pattern1);
var q_str = query[1];
var pattern2 = "^(\?)?([0-9A-Za-z]+=[0-9A-Za-z]+(\&)?)+$"; 
```

祝你好运，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T20:28:56.940

我相信您遇到的问题来自这样一个事实，即查询字符串中的有效参数是什么或不是一个有效参数没有被普遍定义。特别是对于您的问题，有效查询的标准仍然没有从您应该失败的单个示例中得到很好的定义。

准确地说，请查看[RFC3986#3.4](https://www.rfc-editor.org/rfc/rfc3986#section-3.4)

也许您可以为应该是“可接受的”查询字符串制定一个标准，并从中获得答案。;)

# ruby-on-rails - 当不应该显示属性时，删除 slim 中的 HTML 标记属性

> ID：15412649
> 
> 赞同：18
> 
> 时间：2013-03-14T14:56:00.613
> 
> 标签：ruby-on-rails, ruby, erb, slim-lang

当类不应该在 Slim 中显示时，我想删除类属性。

在 ERB 中，我可以使用：

```
<input <%= "class='foo'" if false %> />
<input /> 
```

我如何在 Slim 中做到这一点？

我找到了这个，但我觉得必须有一个更惯用的解决方案：

```
| <input "#{'class=\"foo\"' if false}" /> 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-03-14T15:25:35.083

如果属性的值为`nil`，则整个属性将被省略（实际上，大多数情况下都会发生这种`nil`情况`false`，但看起来`class`属性的行为与`false`和不同`true`）：

```
input class=('foo' if condition) 
```

这将输出

```
<input class="foo" /> 
```

如果`condition`是`true`，并且

```
<input /> 
```

如果`condition`是假的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-04-21T18:40:59.857

您可以使用 splat (*) 运算符来帮助定义 slim 中标签的条件属性，使用包含要添加的属性的哈希。

[http://www.rubydoc.info/gems/slim/frames#Splat_attributes__](http://www.rubydoc.info/gems/slim/frames#Splat_attributes__)

splat 运算符将散列扩展为一组要添加到标签的属性。如果哈希为空，则不会添加任何属性。

例如，

```
- admin_classes = @User.admin? ? {class: "foo"} : {}
input *admin_classes 
```

如果@User.admin？== true，它应该呈现

```
<input class="foo"> 
```

否则如果@User.admin？== false，它应该呈现

```
<input> 
```

对于“类”之类的属性或其他打开属性合并的属性，您还可以执行以下操作：

```
- admin_classes = @User.admin? ? {class: ["foo","bar"]} : {}
input *admin_classes class="biz" 
```

如果@User.admin？== true，它应该呈现

```
<input class="foo bar biz"> 
```

否则如果@User.admin？== false，它应该呈现

```
<input class="biz"> 
```

# javascript - 需要帮助使用循环和替代 mod 来缩短/循环 javascript 函数

> ID：15412659
> 
> 赞同：-1
> 
> 时间：2013-03-14T14:56:26.330
> 
> 标签：javascript

我有一个动画，根据页面上的滚动位置显示 8 个可能的帧之一。每次滚动 20 像素时，都会显示下一帧，直到到达第 8 帧，然后在 160 像素后返回到第一帧。目前，如果页面长 2000 像素，我需要 100 个 if 语句，这看起来很荒谬。必须有一种方法可以使用使用循环的漂亮函数将其变为几行。一位朋友说这将是“mod”的工作，但显然 javascript 不能做 mod 或剩余部分。

我已经摘录了下面的脚本，但你可以在这里看到整个想法

[http://jsfiddle.net/jimmytheman/NnFmn/2/](http://jsfiddle.net/jimmytheman/NnFmn/2/)

```
function scroll() {

 if (window.pageYOffset < 20){

    setTimeout("document.images['ball'].src=imageArray[0].src",0);
}
else if (window.pageYOffset < 40){
    setTimeout("document.images['ball'].src=imageArray[1].src",0);
    }
else if (window.pageYOffset < 60){

    setTimeout("document.images['ball'].src=imageArray[2].src",0);
    }
else if (window.pageYOffset < 80){

    setTimeout("document.images['ball'].src=imageArray[3].src",0);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T15:15:32.413

您可以在 javascript 中使用模数它的`%`字符，[http://jsfiddle.net/NnFmn/4/](http://jsfiddle.net/NnFmn/4/)

但您可以使用以下代码缩短代码：

```
function scroll() {
    setTimeout(function() {
        document.images['ball'].src = imageArray[window.pageYOffset % 7].src;
    }, 0);
    return false;
} 
```

[http://jsfiddle.net/NnFmn/5/](http://jsfiddle.net/NnFmn/5/)

# javascript - 用jquery添加CSS样式没有效果

> ID：15412662
> 
> 赞同：3
> 
> 时间：2013-03-14T14:56:40.193
> 
> 标签：javascript, jquery, html, css

如果响应变量的长度大于 1，我正在尝试检查 AJAX 调用。如果是这样，我需要将此样式添加到我的页脚：

```
success: function(response) {
    for (var i = 0, len = response.results.length; i < len; i++) 
        {
            if(response.results.length>1)
            {
               $("#footer").css("position:relative");
            }
        }....
} 
```

这是我在我的 css 文件中预定义的样式：

```
#footer
    {
        z-index:11;
        bottom:0;
        position: fixed;
        float: left;
        width:100%;
        height:30px;
        background-color:black;
    } 
```

我做了一些调试，一切正常，但我的页脚元素仍然有`position:fixed`

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-14T14:57:35.970

尝试：

```
$("#footer").css("position", "relative"); 
```

或者：

```
$("#footer").css({ position: "relative" }); 
```

:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T14:59:02.613

.css() 的语法是错误的。这是：

```
$('#element').css('property', 'value'); 
```

看看**[文档](http://api.jquery.com/css/)**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T15:00:35.500

```
 document.getElementById('footer').style.position ='relative'; 
```

# r - 散点图ggplot2中的斜率和截距问题

> ID：15412671
> 
> 赞同：1
> 
> 时间：2013-03-14T14:57:01.160
> 
> 标签：r, ggplot2, lm

`mtcars`我正在使用数据集 ( )绘制回归线（线性`mpg ~ cyl`）。`mpg`我使用and运行了一个简单的线性模型`cyl`并执行了摘要。

来自线性模型摘要的截距与图形表示不匹配。

我很难理解发生了什么。如果我使用 R 的基础绘图功能来绘制散点图，我会得到与 ggplot2 相同的结果。我更改了 y 轴比例限制 (0, 40)，但没有成功。

这是我的代码

```
data(mtcars)
library(ggplot2)
p <- ggplot(mtcars, aes(x=cyl, y=mpg)) + geom_point(shape=1) # create graph
p + geom_smooth(method = lm, se=FALSE) # add line
lm.car <- lm(mpg ~ cyl) # create linear model
summary(lm.car) # summary 
```

![http://imageshack.us/photo/my-images/213/scatterplot.png/](../Images/f2da08376e8f42ac39c1449c99b866f4.png)

这是线性模型输出

```
> summary(lm.car)

Call:
lm(formula = mpg ~ cyl)

Residuals:
    Min      1Q  Median      3Q     Max 
-4.9814 -2.1185  0.2217  1.0717  7.5186 

Coefficients:
            Estimate Std. Error t value Pr(>|t|)    
(Intercept)  37.8846     2.0738   18.27  < 2e-16

cyl          -2.8758     0.3224   -8.92 6.11e-10 

Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1 

Residual standard error: 3.206 on 30 degrees of freedom
Multiple R-squared: 0.7262, Adjusted R-squared: 0.7171 
F-statistic: 79.56 on 1 and 30 DF,  p-value: 6.113e-10 
```

根据我使用的以下建议

```
data(mtcars)
library(ggplot2)
p <- ggplot(mtcars, aes(x=cyl, y=mpg)) + geom_point(shape=1) +
    xlim(0, 10)# create graph
p + geom_smooth(method = lm, se=FALSE) # add line 
```

这是输出： ![所需的图形输出](../Images/f54fac31e07f5992f00acd3c1a504170.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T18:40:04.877

当您进行回归分析时，如果值为 0，则值`Intercept`会显示值有多大。如果t 值为 37.8846，则表示如果值为 O ，则值为 37.8846。`y``x``cyl``mpg` `Intercep``mpg``cyl`

在`ggplot2`绘图回归线仅显示`cyl`4 到 6 的值（因为没有其他值）。

如果你计算你的值的预测值`mpg`，`cyl`你`4`将得到 26.38142。这就是你在情节上看到的价值。

```
predict(lm.car,data.frame(cyl=4))
       1 
26.38142 
```

# c# - RestSharp反序列化＆符号

> ID：15412673
> 
> 赞同：0
> 
> 时间：2013-03-14T14:57:04.347
> 
> 标签：c#, restsharp

我是 RestSharp 的快乐用户，但是我遇到了休息服务在字符串中返回 & 符号的问题。回应是：

`<response>` `<name>GE Healthcare Austria GmbH & Co OG</name>` `</response>`

**并且 RestSharp 由于&**引发异常

 **该怎么办？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:04:03.033

这是正常的行为。您必须为 restsharp 编写自己的反序列化器或替换无效符号以使用默认符号。**

# asp.net-mvc - ASP.Net MVC 应用程序在服务器上找不到主页索引页

> ID：15412674
> 
> 赞同：1
> 
> 时间：2013-03-14T14:57:09.990
> 
> 标签：asp.net-mvc, indexing, asp.net-mvc-routing

我在 godaddy.com 上部署了一个带有 razor 视图的 MVC Web 应用程序。我的应用程序在 localhost 上运行良好，但部署后，当我输入域名时，它无法路由到我的主页。我在 Global.axcs 文件中注册了以下路线。

```
 routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "HomePage", action = "Index", id = UrlParameter.Optional } // Parameter defaults
        ); 
```

Godaddy 的技术支持要求我在根目录中添加一个 index.html 文件。我确实添加了一个并评论了 Global 中的默认路由。它会加载 index.html。但我真的很想显示我的 /HomePage/Index

有谁知道为什么会这样，有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:08:59.803

我过去也遇到过类似的问题。

这里的一个问题可能是您的服务器没有安装 MVC（如我的情况）。

解决方案：我按照帖子将 MVC 程序集与我的 Web 应用程序一起部署。

[http://haacked.com/archive/2011/05/25/bin-deploying-asp-net-mvc-3.aspx](http://haacked.com/archive/2011/05/25/bin-deploying-asp-net-mvc-3.aspx)

**它对我有用。**

试一试，我认为它应该工作。

# svn - 将具有多个重命名的 subversion 存储库转换为 mercurial 存储库

> ID：15412676
> 
> 赞同：0
> 
> 时间：2013-03-14T14:57:14.063
> 
> 标签：svn, mercurial

我正在尝试将 subversion (svn) 存储库转换为 mercurial (hg)。过去 svn 存储库项目文件夹曾多次重命名。以下命令部分成功地将 svn 项目转换为 hg：

```
hg convert svn://localhost/project project-hg 
```

这会将最新版本转换回 svn 项目文件夹最后重命名的版本。此时，转换后的 hg 存储库（变更集 0）仅包含对存储库中所有文件的添加操作（文件内容与 svn 重命名发生时相同）。

我想保留 hg 项目中原始 svn 项目的历史一直到修订版 0，但我不确定如何克服重命名问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T11:18:15.237

尝试使用[hgsubversion](http://bitbucket.org/durin42/hgsubversion/)进行转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-08T13:59:30.837

这是我刚刚用来将我的项目转换为 1 重命名为 mercurial 的脚本。您必须在一个空目录中运行它，就像 rm -rfv * 每次迭代一样：

```
#!/bin/bash
set -e
svnpath=svn://host/repo/project
hg init
for r in $(svn log $svnpath | egrep -o '^r[0-9]+' | tac); do
  rm -rfv *
  svn export --force -r $r $svnpath .
  hg addremove -s 50
  message="$(svn log -c $r $svnpath | tail -n +4 | head -n -1)"
  echo "$message" >&2
  changes="$(hg st)"
  [[ "$changes" ]] && hg commit -m "$message"
done 
```

# svn - phpstorm + TortiseSVN + subversion/visualsvn？

> ID：15412681
> 
> 赞同：4
> 
> 时间：2013-03-14T14:57:24.957
> 
> 标签：svn, version-control, tortoisesvn, visualsvn, visualsvn-server

我将 PhpStorm 和 Dreamweaver 用于我的 PHP 项目，但现在我们将开始一个项目，该项目将有 6-8 人一起工作。

我想知道哪个更好 Subversion 或 VisualSVN？

是否可以将 VisualSVN 与 PhpStorm 一起使用？

设置就像每个人都有自己的电脑和一个文件服务器。

但是，该服务器也被 .NET 团队使用，他们已经安装了 Team Foundation Server。

现在，我还想将同一台服务器与 TortiseSVN 和 Subversion 或 VisualSVN 一起使用，以更好地与 PhpStorm 和 Dreamweaver 一起使用。

需要你们所有的开发者，指导。

**哪种方法更好？并且应该遵循。**

还要记住，我不想使用安装在本地 PC 上的 Subversion，每台 PC 只有 80GB 空间，其中包括软件、驱动程序窗口等。只想设置主要的中央 Subversion 服务器，但要设置安全的.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T15:36:29.973

*   [VisualSVN Server](http://en.wikipedia.org/wiki/VisualSVN_Server)是一个用于 Windows 的[Apache Subversion](http://subversion.apache.org/)服务器包。
*   您可以使用 PhpStorm 或 Dreamweaver 访问 VisualSVN 服务器。没有问题。
*   您可以在服务器机器上安装 VisualSVN Server（显然）。

# javascript - Google Scripts：将电子邮件发送到密件抄送列表时出错

> ID：15412682
> 
> 赞同：0
> 
> 时间：2013-03-14T14:57:26.573
> 
> 标签：javascript, email, google-apps-script

我正在尝试编写一个脚本来将电子邮件发送到位于谷歌电子表格中的分发列表。在将其移至实时环境之前，我正在使用列表中只有 3 个电子邮件地址的测试表。我想把它发给我，然后密送名单上的每个人。如果我将电子邮件地址列表放在 sendEmail 的收件人位置，该脚本可以正常工作，但当我尝试使用 sendEmail 的密件抄送高级参数将电子邮件地址移动到密件抄送地点时，脚本就不行了。在这种情况下，我收到以下错误：

遇到错误：无效电子邮件：[L;@130cab11

在这个错误中，每次我运行脚本时，“130cab11”部分都会发生变化。脚本中唯一一致的部分是“遇到错误：无效电子邮件：[L; ...”

我的脚本的相关部分如下：

```
// Retrieve data for the Email that will be sent///
   var email_column = ss.getSheetByName(sendtosheet)
   var lastrow = email_column.getLastRow()
   var get_email_data = email_column.getRange(2,2,lastrow-1,1).getValues()
   var emailTemplate = ss.getSheetByName("Email Templates").getRange("B1").getValue()
   var aliases = GmailApp.getAliases();
      Logger.log(aliases)

//Format the email
   var advancedArgs = {bcc:get_email_data,from: aliases[0]}
   var Self = "MyEmail@mycompany.com"
   var subject = "INVITE: Upcoming Focus Group Session";
   var message = emailTemplate

//Send the email
   GmailApp.sendEmail(Self, subject, message, advancedArgs) 
```

如果我在不使用 bcc 参数的情况下发送电子邮件并且 sendEmail 代码的结构如下所示，则此代码可以正常工作：

```
//Send the email
   GmailApp.sendEmail(get_email_data, subject, message, {from: aliases[0]}) 
```

我已经搜索了 stackoverflow 和 google 脚本手册以及我能想到的其他任何地方，因此将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-31T13:59:55.343

您需要将密件抄送列表作为字符串提供。

```
var get_email_data = email_column.getRange(2,2,lastrow-1,1).getValues() 
```

在上面的语句之后，`get_email_data`包含了一个二维对象数组，表示范围的内容。这就是为什么该错误消息抱怨的原因`[L;...`- 当它想要一个字符串时它有一个数组，但盲目地将它视为一个字符串并且发现它很困难。

在您执行此操作之前：

```
 var advancedArgs = {bcc:get_email_data,from: aliases[0]} 
```

...您需要将数组的内容加入到包含逗号分隔的子字符串列表的字符串中。幸运的是，Array 方法`.toString()`可以做到这一点，即使对于这个二维数组也是如此。

```
var get_email_data = email_column.getRange(2,2,lastrow-1,1).getValues()
                                 .toString(); 
```

# svn - 如何在 Windows 上控制对 SVN 服务器中标签的更改

> ID：15412685
> 
> 赞同：1
> 
> 时间：2013-03-14T14:57:30.790
> 
> 标签：svn, tags, access-control, visualsvn-server

**我们在Windows**上使用 VisualSVN Server 2.5.6 （重要！）。

我们的大多数 SVN 存储库都具有标准结构：

```
/trunk
/branches
/tags 
```

**我们想要：**

*   允许人们创建新标签
*   禁止他们修改现有标签

不要问...有时他们真的会尝试对现有标签进行更改））

我发现了一个非常好的预提交钩子—— 来自标准[钩子脚本的](http://svn.apache.org/repos/asf/subversion/trunk/tools/hook-scripts/)**svnperms.py**

配置文件中的示例 2 可能是我需要的：

```
[example2]
trunk/.* = *(add,remove,update)
tags/[^/]+/ = *(add)
branches/[^/]+/.* = *(add,remove,update) 
```

真的很强大很简洁！

但它在 Windows 上无法正常工作 - 失败并显示错误消息：

```
D:\Repositories\Ivan_dev\hooks>svnperms.py -r D:\Repositories\Ivan_dev -s default_permissions_configuration -R 8
svnlook author D:\Repositories\Ivan_dev -r 8
'{' is not recognized as an internal or external command,
operable program or batch file.error: command failed: svnlook author D:\Repositories\Ivan_dev -r 8
'{' is not recognized as an internal or external command,
operable program or batch file. 
```

据我了解，它失败是因为它在 Python 中的设计方式：

> svnperms.py 用来运行底层 svnlook 命令的 commands 模块仅适用于 Unix。

从这里：[http ://subversion.tigris.org/ds/viewMessage.do?dsForumId=462&dsMessageId=72052](http://subversion.tigris.org/ds/viewMessage.do?dsForumId=462&dsMessageId=72052)

我真的很喜欢 svnperms.py 的方法，它允许您控制**添加**、**删除**和**修改**操作（符合 SVN 中的 A、D 和 M 类型的更改），而不仅仅是authz 模块中的**读取**和**写入**。

此外，由于用于指定路径的正则表达式，它提供了无限的功能。

是否有类似的适用于 Windows 的 SVN 挂钩脚本？

不幸的是，我不了解 Python，但在 Perl 方面经验丰富。所以甚至考虑将 svnperms.py 重写为 Perl ......但这需要几个小时，加上测试......

# performance - 用于大型数据文档的 MongoDB 嵌入式与参考架构

> ID：15412695
> 
> 赞同：2
> 
> 时间：2013-03-14T14:57:47.823
> 
> 标签：performance, mongodb, database-design, database-schema

我正在为日志管理系统设计我的第一个 MongoDB 数据库模式，我想将日志文件中的信息存储到 mongoDB，但我无法决定应该为大型文档（嵌入式与参考）使用哪种模式。

注意：项目有很多来源，来源有很多日志（在某些情况下超过 1 000 000 条日志）

```
 {    
      "_id" : ObjectId("5141e051e2f56cbb680b77f9"),   
      "name" : "projectName",
      "source" : [{
          "name" : "sourceName",
          "log" : [{
              "time" : ISODate("2012-07-20T13:15:37Z"),
              "host" : "127.0.0.1",
              "status" : 200.0,
              "level" : "INFO",
              "message" : "test"
            }, {
              "time" : ISODate("2012-07-20T13:15:37Z"),
              "host" : "127.0.0.1",
              "status" : 200.0,
              "level" : "ERROR",
              "message" : "test"
            }]
        }]
    } 
```

我的重点是从数据库（非写入）读取数据期间的性能，例如过滤、搜索、分页等。用户可以按日期、状态等过滤源日志（所以我想在用户搜索或过滤数据时关注读取性能）

我知道 MongoDB 有 16Mbyte 的文档大小限制，所以我担心我是否会有 1 000 000 条日志用于一个源，这将如何工作（因为我可以为一个项目提供多个源，而源可以有多个日志）。当我要处理大型文档并且想要获得良好的阅读性能时，有什么更好的解决方案，我应该使用嵌入式模式还是参考模式？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T15:34:26.750

你的问题的答案都不是。您应该将架构扁平化为每个日志条目一个文档，而不是嵌入或使用引用，以便它可以扩展到超出 16MB 文档限制的任何内容，并且您可以访问 MongoDB 查询功能的全部功能和性能。

因此，摆脱数组字段并使用以下方法将所有内容移至顶级字段：

```
{    
    "_id" : ObjectId("5141e051e2f56cbb680b77f9"),   
    "name" : "projectName",
    "sourcename" : "sourceName",
    "time" : ISODate("2012-07-20T13:15:37Z"),
    "host" : "127.0.0.1",
    "status" : 200.0,
    "level" : "INFO",
    "message" : "test"
  }, {
    "_id" : ObjectId("5141e051e2f56cbb680b77fa"),   
    "name" : "projectName",
    "sourcename" : "sourceName",
    "time" : ISODate("2012-07-20T13:15:37Z"),
    "host" : "127.0.0.1",
    "status" : 200.0,
    "level" : "ERROR",
    "message" : "test"
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T16:12:48.370

我认为在数组中包含日志可能会变得混乱..如果项目和源实体除了名称之外没有任何属性（键）并且日志不会长时间存储，您可以使用每个有一个日志的[封顶集合](http://docs.mongodb.org/manual/core/capped-collections/)文档：

`{_id: ObjectId("5141e051e2f56cbb680b77f9"), p: "project_name", s: "source_name", "time" : ISODate("2012-07-20T13:15:37Z"), "host" : "127.0.0.1", "status" : 200.0, "level" : "INFO", "message" : "test"}`

也请参考：[http ://docs.mongodb.org/manual/use-cases/storing-log-data/](http://docs.mongodb.org/manual/use-cases/storing-log-data/)

封顶收藏品保持自然秩序。因此，您不需要时间戳索引即可按自然顺序返回日志。在您的情况下，您可能希望从特定源/项目中检索所有日志。您可以创建索引`{p:1,s:1}`来加速此查询。

但我建议你做一些“基准测试”来检查性能。试试上面的封顶收集方法。还可以尝试使用您建议的完全嵌入式架构对文档进行分*桶。*这种技术用于经典的[博客评论](http://docs.mongodb.org/manual/use-cases/storing-comments/)问题。因此，您只需将每个源的这么多日志存储在单个文档中，并在超过自定义大小时溢出到新文档。

# iphone - 旋转图像并返回其原始位置 - opengles glkit

> ID：15412696
> 
> 赞同：0
> 
> 时间：2013-03-14T14:57:54.503
> 
> 标签：iphone, ios, objective-c, opengl-es, glkit

我需要在 opengles GLkit 中旋转图像并将其恢复到 GLkit 中的原始位置。

```
rotation += 5;
_modelViewMatrix = GLKMatrix4Rotate( _modelViewMatrix, GLKMathDegreesToRadians(5), 1, 0, 0);
_modelViewMatrix = GLKMatrix4Rotate( _modelViewMatrix, GLKMathDegreesToRadians(rotation), 1,0,0); 
```

我需要将它在 x 轴上移动一定量并从它开始的地方回到它的原始位置。我该怎么做？

# c# - DbContext 仅在远程服务器上超时

> ID：15412701
> 
> 赞同：6
> 
> 时间：2013-03-14T14:58:01.973
> 
> 标签：c#, asp.net, asp.net-mvc-3, linq

我在这里有一个[Linq To Sql 查询](http://pastebin.com/XYTCSspn)（[或带括号](http://pastebin.com/YCmVSG6H)），它在我的本地 SQL2008 上工作，大约在 00:00:00s - 00:00:01s，但在远程服务器上，它需要大约 00:02:10s . dbo.Movies、dbo.Boxarts 中有大约 56k 项，dbo.OmdbEntries 中有 300k 项

```
{SELECT
//pull distinct t_meter out of the created object
Distinct2.t_Meter AS t_Meter
//match all movie data on the same movie_id
FROM ( SELECT DISTINCT
        Extent2.t_Meter AS t_Meter
        FROM    dbo.Movies AS Extent1
        INNER JOIN dbo.OmdbEntries AS Extent2 ON Extent1.movie_ID = Extent2.movie_ID
        INNER JOIN dbo.BoxArts AS Extent3 ON Extent1.movie_ID = Extent3.movie_ID
        //pull the genres matched on movie_ids
        INNER JOIN  (SELECT DISTINCT
                Extent4.movie_ID AS movie_ID
                FROM  dbo.MovieToGenres AS Extent4
                //all genres matched on movie ids
                INNER JOIN dbo.Genres AS Extent5 ON Extent4.genre_ID = Extent5.genre_ID ) AS Distinct1 ON Distinct1.movie_ID = Extent1.movie_ID
        WHERE 1 = 1
//sort the t_meters by ascending
)  AS Distinct2
ORDER BY Distinct2.t_Meter ASC} 
```

内部查询首先获取表中的所有相关项，然后创建一个新对象，然后从该对象中仅查找`t_Meter`不为空的 s。然后从这些`t_Meter`s 中，仅选择不同的项目，然后对它们进行排序，以返回 98 左右的列表`ints`。

我对 SQL 数据库的了解还不够，无法直观地知道这是否是一组极端的 db 调用以放入单个查询中，但是由于在我的本地服务器上只需要一秒钟或更短的时间，我认为它没关系。

* * *

编辑：这是我根本没有真正清理的 LINQ 代码：http: [//pastebin.com/JUkdjHDJ](http://pastebin.com/JUkdjHDJ)它很乱，但它完成了工作......我发现的修复是在调用`ToArray`之后`OrderBy`，但在`Distinct`帮助之前非常。所以而不是

```
 var results = IQueryableWithDBDatasTMeter.Distinct().OrderBy().ToArray() 
```

我做了

```
var orderedResults = IQueryableWithDBDatasTMeter.OrderBy().ToArray()
var distinctOrderedResults = orderedResults.Distinct().ToArray() 
```

我确定如果我链接了 Linq 代码（并清理了它）而不是自动生成的 SQL 查询，那么您将能够轻松解决这个问题，对此感到抱歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T17:37:21.137

这是我根本没有真正清理过的 LINQ 代码：http: [//pastebin.com/JUkdjHDJ](http://pastebin.com/JUkdjHDJ)它很乱，但它完成了工作......我发现的修复是在调用`ToArray`之后`OrderBy`，但之前`Distinct`帮助很大。所以而不是

```
 var results = IQueryableWithDBDatasTMeter.Distinct().OrderBy().ToArray() 
```

我做了

```
var orderedResults = IQueryableWithDBDatasTMeter.OrderBy().ToArray()
var distinctOrderedResults = orderedResults.Distinct().ToArray() 
```

我猜它是有效的，因为`Distinct`它只针对内存中的数组运行，而不是整个数据库的条目价值？不过我不太确定，因为旧的 LINQ 在我的本地服务器上完美运行。

我确定如果我链接了 Linq 代码（并清理了它）而不是自动生成的 SQL 查询，那么您将能够轻松解决这个问题，对此感到抱歉。

# jsf-2 - JSF2通过ajax动态加载页面

> ID：15412704
> 
> 赞同：0
> 
> 时间：2013-03-14T14:58:18.087
> 
> 标签：jsf-2, primefaces

当我单击 JSF2.0 中的菜单链接时，我想将页面加载到中央 div 中。我设置了一个面板菜单并写了一个这样的菜单项。

```
<p:menuitem >
<h:commandButton value="Edit Details"  action="#{formsBean.changeDisplay(1)}">
 <f:ajax  render=":editdiv"></f:ajax>
</h:commandButton>
</p:menuitem> 
```

要更新的组件是：

```
<h:panelGroup id="editdiv" rendered="#{formsBean.edituserdiv}" layout="block">
  <ui:include src="edituserdetails.xhtml">

 </ui:include>
 </h:panelGroup> 
```

该函数`formsBean.changeDisplay(1)`设置`edituserdiv`为 true 以显示相应的面板组。

在包含的页面中，我定义了一个表单。

同样在主页中，我调用预渲染函数将所有 div 设置为 false 以在第一页加载时不显示 div。

问题是当我单击菜单项时，不包含包含的页面。任何指针？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T15:04:23.880

问题是因为最初你`h:panelGroup`没有呈现，所以 AJAX 请求在生成的代码中找不到它，所以它不能更新它。将其封装在另一个中`h:panelGroup`并渲染它：

```
<h:panelGroup id="editdivParent" layout="block">
  <h:panelGroup id="editdiv" rendered="#{formsBean.edituserdiv}" layout="block">
    <ui:include src="edituserdetails.xhtml">

    </ui:include>
  </h:panelGroup>
</h:panelGroup> 
```

并将您的更改`f:ajax`为：

```
<f:ajax  render=":editdivParent"/> 
```

# c# - 不允许对 IsolatedStorageFileStream 异常进行操作

> ID：15412705
> 
> 赞同：0
> 
> 时间：2013-03-14T14:58:19.057
> 
> 标签：c#, windows-phone-8

好的，我已经搜索并尝试了所有可能的解决方案，但仍然抛出异常。任何帮助都会很棒。

```
public void SaveOrReplace(string fileContent)
        {
            using (IsolatedStorageFile storage = IsolatedStorageFile.GetUserStoreForApplication())
            {
                if (!storage.DirectoryExists("FX"))
                    storage.CreateDirectory("FX");

                if (storage.FileExists(FilePath))
                    storage.DeleteFile(FilePath);

                //when I debug, it code does not get past here
                // when I remove this first using no exception, but of course I can't write some text to the file
                using (IsolatedStorageFileStream fileStream = storage.CreateFile(FilePath))
                {
                    using (StreamWriter writer = new StreamWriter(fileStream))
                    {
                        writer.Write(fileContent);
                        fileStream.Dispose();
                    }
                }

            }
        } 
```

堆栈跟踪供您参考。

```
 at System.IO.IsolatedStorage.IsolatedStorageFileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, IsolatedStorageFile isf)
   at System.IO.IsolatedStorage.IsolatedStorageFile.CreateFile(String path)
   at FXNews.Models.FFNewsProvider.SaveOrReplace(String fileContent)
   at FXNews.Models.FFNewsProvider.<Load>d__b.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at FXNews.Models.FFNewsProvider.<GetNewsCollection>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at FXNews.ViewModels.PivotPageViewModel.<GetAllNews>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at FXNews.Views.PivotPage.<OnNavigatedTo>d__2.MoveNext() 
```

在这种情况下我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:21:45.473

好的，在随机摆弄代码之后，我设法把它弄对了。老实说，我不确定它背后的原因，但它确实有效。

```
public void SaveOrReplace(string fileContent)
{
    using (IsolatedStorageFile storage = IsolatedStorageFile.GetUserStoreForApplication())
    {
        if (!storage.DirectoryExists("FX"))
            storage.CreateDirectory("FX");

        if (storage.FileExists(FilePath))
            storage.DeleteFile(FilePath);

        using (IsolatedStorageFileStream fileStream = storage.OpenFile(FilePath, FileMode.CreateNew, FileAccess.Write, FileShare.Read))
        {
            using (StreamWriter writer = new StreamWriter(fileStream))
            {
                writer.Write(fileContent);
                writer.Dispose();
            }
            fileStream.Dispose();
        }

    }
} 
```

我改变了我的`FilePath`

```
private const string FilePath = "FX/ffcal.xml"; // does not work, throw a different exception after I did above changes
private const string FilePath = "FX/ffcal.txt"; // this works fine, save the xml in txt and parse it. It works okay 
```

# backbone.js - relatedModel 不从 Backbone.RelationalModel 继承——使用 RequireJS 和导出循环依赖

> ID：15412706
> 
> 赞同：2
> 
> 时间：2013-03-14T14:58:20.747
> 
> 标签：backbone.js, requirejs, circular-dependency, backbone-relational

我遇到了一个问题，这可能与我对使用`exports`/ [RequireJS](http://requirejs.org/) 进行循环依赖缺乏了解有关。

我得到了错误`relatedModel does not inherit from Backbone.RelationalModel`。

关于代码（在 CoffeeScript 中；我希望没问题）......

我有两个主干模型/RequireJS 模块，FooModel 和 BarModel：

**Foo型号：**

```
define (require) ->
  Backbone = require 'backbone'
  BarModel = require 'models/bar'

  FooModel = Backbone.RelationalModel.extend
    relations: [
      type: Backbone.HasMany
      key: 'theBars'
      relatedModel: BarModel  # <-- this is where the BB Relational error is coming from
    ]

  return FooModel 
```

**酒吧型号：**

```
define (require, exports) ->
  Backbone = require 'backbone'
  FooCollection = require 'collections/foos'

  BarModel = Backbone.RelationalModel.extend
    someFunction: ->
      # uses FooCollection
      # I've tried moving the require in here and getting rid of exports

  exports.BarModel = BarModel
  return BarModel # I've tried with and without this line, but CS just returns the last line anyway so removing it is functionally the same 
```

**我也试过：**

1.  扩展`FooModel`而`Backbone.Model`不是自己`Backbone.RelationalModel`创建`theBars`集合（在自定义函数中`parse`和自定义函数中）。(与另一个模型`BarModel`有`HasOne`关系，所以我需要它仍然是`RelationalModel`.

这可能是`exports`工作方式的问题吗？据我了解，`exports`只是提供一个对象来挂模块对象，以便模块可以在其他地方访问。发生错误是因为在我定义关系`BarModel`的代码中实际上不是主干模型吗？`FooModel`

## 更新

我似乎已经解决了我的问题，虽然我不确定如何。不能说我很高兴不理解它*为什么*起作用，但我确实很高兴它*起作用*了。另请参阅我在代码`_.memoize`下方的评论。`BarModel`

（在我让下面的代码工作之前，我创建了一个解决方法，我在`FooModel`的`parse`函数中创建了关联的集合并导出`BarModel`了。但是，`require 'collections/foos'`返回的响应是这样的：`{FooCollection: <Backbone.Collection Object>}`，即它意外地包装在另一个对象中。）

这是更新的代码：

**Foo型号：**

```
define (require) ->
  Backbone = require 'backbone'
  BarModel = require 'models/bar'
  BarCollection = require 'collections/bars'

  FooModel = Backbone.RelationalModel.extend
    relations: [
      type: Backbone.HasMany
      key: 'theBars'
      relatedModel: BarModel
      collectionType: BarCollection
    ]

  return FooModel 
```

**酒吧型号：**

```
define (require, exports) ->
  Backbone = require 'backbone'

  BarModel = Backbone.RelationalModel.extend
    someFunction: -> #this actually used to use _.memoize (sorry for the incomplete code), so maybe it would have tried to run the function argument immediately? 
      # uses FooCollection
      FooCollection = require 'collections/foos'

  return AttributeModel 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T03:11:48.850

您的 BarModel 需要`'collections/foos'`，对吗？而且我猜（因为没有代码`FooCollection`）该集合需要`'models/foo'`，因为集合需要定义它的模型对吗？最后，我可以从上面的代码中看到您的 foo 模型需要 'models/bar'。

换句话说 foos 需要 foo 需要 bar 需要 foos 需要 foo 需要 bar 需要 ...

无论 Require 决定如何订购，都必须先加载这三个中的一个，这会给您带来与您遇到的问题一样的问题。

解决方案是在加载所有三个模块之前不加载这三个模块之一。例如，如果您更改：

```
define (require, exports) ->
    Backbone = require 'backbone'
    FooCollection = require 'collections/foos'
    BarModel = Backbone.RelationalModel.extend
        someFunction: ->
            # uses FooCollection 
```

至：

```
define (require, exports) ->
    Backbone = require 'backbone'
    BarModel = Backbone.RelationalModel.extend
        someFunction: ->
            FooCollection = require 'collections/foos'
            # uses FooCollection 
```

现在 BarModel 可以加载了，虽然`someFunction`定义了，但它实际上还没有运行，所以它不需要 foos 并创建循环依赖。稍后，在加载所有内容并调用一些代码之后`someFunction`， foos 已经有机会加载，并且 require 应该可以工作。

现在我说*应该*因为你的评论而工作：

```
# I've tried moving the require in here and getting rid of exports 
```

同样，我不得不猜测，因为我看不到你的代码，但我想发生的事情是没有其他东西依赖于 foos，所以它永远不会被加载。为了使 foos 的 require 在 内部同步工作`someFunction`，必须事先加载 foos 模块。

要解决此问题，您只需添加对 foos 的依赖项......只是这次不在任何需要 foos 的模块中（或任何需要需要 foos 的模块，或......）。

希望有帮助。

# drupal - Drupal 7 Feeds - 如何将自定义分类字段映射为节点处理器中的目标？

> ID：15412708
> 
> 赞同：3
> 
> 时间：2013-03-14T14:58:25.997
> 
> 标签：drupal, mapping, taxonomy, feed

我有一个名为“Counties”的分类词汇。在那个词汇表中，我添加了新字段“ISO-id”。在我的 CSV 文件中，我有一列“ISO-id”。

我使用指向“县”分类法的字段创建内容类型。

当我尝试在提要导入器中为“ISO-id”映射目标时，我只能在目标选择器中找到“Counties”但没有“ISO-id”。

这样的事情可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-05T11:30:06.360

我猜您在进口商中使用了“节点处理器”。您必须将其更改为“分类术语处理器”：

1.  转到管理/结构/提要和“添加导入器”（例如：“术语导入”）
2.  “编辑”您创建的新导入器。
3.  将“提取器”设置为“文件上传”
4.  将“解析器”设置为“CSV”
5.  重要的！将“处理器”设置为“分类术语处理器” ![在处理器内部，选择“分类术语处理器”选项](../Images/fd50de67b5a5f269ec8f613c5e1e93c6.png)

6.  在处理器下，转到“设置”，选择正确的词汇，在您的情况下为“县”。

7.  在处理器下，转到“映射”，瞧！现在您可以将目标设置为您添加到该词汇表的字段，列表框中必须有“ISO-id”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-09T17:21:39.050

我相信您可以使用[Feeds Tamper](https://drupal.org/project/feeds_tamper)和[Feeds Tamper: Search term by field](https://drupal.org/project/feeds_tamper_stbf)来完成您要查找的内容。

这些模块的组合将允许 Feed 在分类术语字段中搜索要导入的值。然后它将使用具有匹配字段的分类术语。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T14:25:10.863

目标意味着drupal中的词汇......所以你的目标应该是'Counties'。我没有设置要在此处测试的安装提要，但您应该选择选择县，然后添加“ISO-id”作为源。

# xaml - 如何调整从 URL 返回的动态磁贴图像大小

> ID：15412709
> 
> 赞同：0
> 
> 时间：2013-03-14T14:58:27.030
> 
> 标签：xaml, windows-8, microsoft-metro, live-tile

我需要重新调整用于更新 Windows 8 现代应用程序中的动态磁贴的大小和图像。我正在通过 URL 检索图像，但图像对于磁贴的 310 x 150 大小限制来说太大了。我必须为 80 多个图像执行此操作，因此不能选择下载图像本身。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:10:34.577

我在 Windows 手机上做了类似的事情，看看如何在这里做到这一点：[调整 Live Tile 的图像大小 - WriteableBitmapEx](https://stackoverflow.com/questions/8684474/resize-image-for-live-tile-writeablebitmapex) 长博文版本：[http ://depblog.weblogs.us/2012/01/09/resize-images-将在实时瓷砖上使用 Windows-phone-7/](http://depblog.weblogs.us/2012/01/09/resize-images-to-be-used-on-live-tile-windows-phone-7/)

我还在 Windows 8 中使用了相同的场景，可以在此处找到示例：http: [//depblog.weblogs.us/2012/06/22/comdaybe-image-manipulation-in-windows-8-metro-app /](http://depblog.weblogs.us/2012/06/22/comdaybe-image-manipulation-in-windows-8-metro-app/)

但是这样确实会先下载原图，不知道是不是大问题？

# z3 - 从 Z3 C API 包装实体

> ID：15412711
> 
> 赞同：1
> 
> 时间：2013-03-14T14:58:33.300
> 
> 标签：z3

我正在 Z3 中尝试枚举排序，如在 Z3 中[调用某些策略后如何使用枚举常量中所述？](https://stackoverflow.com/questions/15085232/how-to-use-enumerated-constants-after-calling-of-some-tactic-in-z3)我注意到我可能对如何正确使用 C 和 C++ api 有一些误解。让我们考虑以下示例。

```
 context z3_cont;
   Z3_symbol e_names[2 ];
   Z3_func_decl e_consts[2];
   Z3_func_decl e_testers[2];

   e_names[0] = Z3_mk_string_symbol(z3_cont, "x1"); 
   e_names[1] = Z3_mk_string_symbol(z3_cont, "x2"); 
   Z3_symbol e_name = Z3_mk_string_symbol(z3_cont, "enum_type");  
   Z3_sort new_enum_sort = Z3_mk_enumeration_sort(z3_cont, e_name, 2, e_names, e_consts, e_testers);

   sort enum_sort = to_sort(z3_cont, new_enum_sort);
   expr e_const0(z3_cont), e_const1(z3_cont);

/* WORKS!
   func_decl a_decl = to_func_decl(z3_cont, e_consts[0]);
   func_decl b_decl = to_func_decl(z3_cont, e_consts[1]);
   e_const0 = a_decl(0, 0);
   e_const1 = b_decl(0, 0);   
*/
   // SEGFAULT when doing cout
   e_const0 = to_func_decl(z3_cont, e_consts[0])(0, 0);
   e_const1 = to_func_decl(z3_cont, e_consts[1])(0, 0);

   cout << e_const0 << " " << e_const1 << endl; 
```

我希望这两种代码变体能够用智能指针很好地包装 C 实体 Z3_func_decl，以便我可以与 C++ api 一起使用，但似乎只有第一个变体是正确的。所以我的问题是

1.  这是第二种方法不起作用的正确行为吗？如果是这样，我怎样才能更好地理解为什么不应该这样做的原因？

2.  未包装的 C 实体会发生什么，例如 Z3_symbol e_name - 这里我不包装它，我不增加引用。那么内存会被妥善管理吗？使用它安全吗？什么时候对象会被销毁？

3.  一个小问题：我没有在 C++ api 中看到 to_symbol() 函数。这只是不必要的吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T15:30:45.690

1.  每当我们创建一个新的 Z3 AST 时，`n`如果 的引用计数器为 0，Z3 可能会垃圾收集一个 AST。在这段有效的代码中，我们在创建任何新的 AST 之前进行包装`n`。当我们包装它们时，智能指针将碰撞它们的引用计数器。这就是它起作用的原因。在崩溃的那段代码中，我们 wrap ，然后在 wrap 之前创建。因此，在我们有机会创建.`e_consts[0]``e_consts[1]``e_consts[0]``e_const0``e_consts[1]``e_consts[1]``e_const1`

    顺便说一句，在下一个正式版本中，我们将支持在 C++ API 中创建枚举类型：http: [//z3.codeplex.com/SourceControl/changeset/b2810592e6bb](http://z3.codeplex.com/SourceControl/changeset/b2810592e6bb)

    此更改已在每晚构建中可用。

2.  `Z3_symbol`不是引用计数对象。它们是持久的，Z3 维护一个包含所有已创建符号的全局表。我们应该将符号视为唯一的字符串。

3.  请注意，我们可以使用类`symbol`和构造函数`symbol::symbol(context & c, Z3_symbol s)`。这些函数`to_*`用于包装使用带有智能指针的 C API 创建的对象。我们通常有一个函数`to_A`，如果有一个返回`A`对象的 C API 函数，并且在 C++ 中没有等效的函数/方法。

# metrics - 任何桌面应用程序度量服务（想想 OS X 的 Flurry）？

> ID：15412713
> 
> 赞同：3
> 
> 时间：2013-03-14T14:58:34.020
> 
> 标签：metrics

2013 年桌面应用程序指标收集有哪些选项？

我知道 Usermetrix 和 Deskmetrix，但他们肯定不是唯一的吗？如果您查看移动分析服务，市场似乎更加发达。

具体来说，我正在寻找使用分析（保留、崩溃报告、自定义事件报告、版本跟踪等内容。

编辑：我应该注意到我知道类似的问题，但它们已经有几年历史了，并且希望获得最新的图片，特别是自 Mac App Store 出现以来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-17T09:15:33.103

您应该查看[**Trackerbird 软件分析**](http://www.trackerbird.com)。

SDK 适用于 .NET/C++/Python 和 Mac OS X。集成只需几分钟，除了基本的安装/使用跟踪之外，您还可以将其用于应用内营销和转化分析。

免责声明：我隶属于该公司。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-06T21:33:22.943

虽然[Deskmetrix](https://deskmetrics.com/)看起来不错，但我最终还是使用了[Tapstream](http://tapstream.com)，因为它是免费的，而且 Deskmetrix 非常昂贵。

由于 Tapstream 的主要重点是评估广告活动，因此其分析功能相当差（例如与 Flurry 相比）。但是，它们允许自定义事件跟踪。

在开发[Mils](https://milsapp.com)时，Tapstream 同时支持 Mac OS X 和 Windows 8 帮助很大。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-02T21:53:20.887

我已经成功使用[Mixpanel](https://mixpanel.com/)（它有一个免费层）：他们没有官方的 Mac SDK（仅限 iOS），但我为他们的 API 编写了一个简单的 Obj-C 包装器：[https ://github.com /swisspol/MixpanelTracker](https://github.com/swisspol/MixpanelTracker)

# c# - RabbitMq：具有不同路由密钥的侦听器和发布者线程以直接交换

> ID：15412714
> 
> 赞同：0
> 
> 时间：2013-03-14T14:58:37.280
> 
> 标签：c#, rabbitmq, amqp

我正在尝试实现一个场景。
我的应用程序系统的一个组件需要从同一个直接交换但使用两个不同的路由密钥发送和接收数据。

```
So is there any thing I need to consider such as: 
Sharing of variables
    such as connection,channel,
Data flow to correct listener 
```

我的应用程序系统的两个组件使用相同的直接交换来发布数据，但使用不同的路由密钥。那么它安全吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T09:27:58.893

有关线程的指导，请查看[.net 客户端文档](https://www.rabbitmq.com/releases/rabbitmq-dotnet-client/v3.0.4/rabbitmq-dotnet-client-3.0.4-user-guide.pdf)，特别是标题为 .net 的第 2.9 节`Threading, deadlocks, and associated restrictions on consumers`。

总结是创建一个实例，每个线程`IConnection`创建一个通道（ ）。`IModel`

就您如何使用队列等而言……您需要确保逻辑对于您想要实现的目标是正确的。

# c# - 如何使用使用它的 .NET 应用程序的进程来调试 ActiveX 控件？

> ID：15412716
> 
> 赞同：4
> 
> 时间：2013-03-14T14:58:41.117
> 
> 标签：c#, visual-c++, activex, visual-studio-debugging, tstcon32

我使用 VS2008 在本机 C++ 中编写了一个 ActiveX 控件 (OCX)。

当我附加到 Microsoft ActiveX 控件测试容器 (TstCon32.exe) 的线程和我自己的引用该控件的本机 cpp 应用程序时，我可以正确调试它。

但是，我无法通过将其附加到引用控件的 .NET winform 应用程序的线程来调试它`MyCtrlNameLib.dll`和`AxMyCtrlNameLib.dll`。它在我的断点上显示以下消息：

> 当前不会命中断点。没有为此文档加载任何符号。信息

我想知道是否有办法调试 .NET Winform 应用程序引用的 ActiveX 控件。

我认为问题是我的 .NET 应用程序没有加载 MyCtrlName.ocx，因此没有添加 MyCtrlName.pdb。它改为加载 InterOp.MyCtrlNameLib.dll 和 AxInterOp.MyCtrlNameLib.dll。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:03:15.093

> *“我想知道是否有办法调试 .NET Winfrom 应用程序引用的 ActiveXControl”*

**不**，这是不可能的。

为什么？因为 ActiveX 是一个独立的组件，所以您的 C# 应用程序以二进制形式使用它。这个 .NET 应用程序完全没有关于 ActiveX 内部实现的信息，它只知道它的接口，以便可以使用这个组件提供的功能。

> *当我附加到 Microsoft ActiveX 控件测试容器 (TstCon32.exe) 的线程和我自己的引用控件的本机 cpp 应用程序时，我可以正确调试它*

因为调试 ActiveX 代码的唯一方法是附加到实际执行此代码的进程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T16:06:16.280

非常感谢@LihO 为我指出了正确的方向，我终于成功了。解决方案非常简单：只需转到我的 activeX 控件项目的属性。在**Debug**分支下，将“ **Debugger Type** ”设置为“ **Mixed** ”，所有断点都可以命中。

# openxml - c#-openxml word替换和分页符

> ID：15412727
> 
> 赞同：0
> 
> 时间：2013-03-14T14:59:18.220
> 
> 标签：openxml

我是新会员，我真的很喜欢这个网站，因为它总是对我有帮助

我的问题是

我想使用 openxml 替换 word 文档并添加分页符

结束然后我想写替换文本第二页

这是我的代码

> 使用 (WordprocessingDocument wordDoc = WordprocessingDocument.Open(@"d:\a.docx", true)) {

```
 using (StreamReader reader = new StreamReader(wordDoc.MainDocumentPart.GetStream()))
            {
                text = reader.ReadToEnd();
            }
            Regex regexText = new Regex("#db#");
            text = regexText.Replace(text, textBox4.Text.Trim());

            using (StreamWriter sw = new StreamWriter(wordDoc.MainDocumentPart.GetStream(FileMode.Create)))
            {

                sw.Write(text);

            }

            MainDocumentPart mainPart = wordDoc.MainDocumentPart;
            Run r = new Run();
            Paragraph para = new Paragraph(new Run(new Break() { Type = BreakValues.Page }));

            using (StreamWriter sw1 = new StreamWriter(mainPart.GetStream(FileMode.Create)))
            {
                sw1.Write(text);

            }

            mainPart.Document.Body.InsertAfter(para, mainPart.Document.Body.LastChild);
            mainPart.Document.Save();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-16T09:56:50.680

我建议您提前在 a.docx 中插入分页符。然后，使用 MergeField 找到要替换的位置。

这是[示例](https://webformdeveloping.wordpress.com/document/word-tips/)

# php - FOR循环制作表格和12个单元格然后换行

> ID：15412730
> 
> 赞同：1
> 
> 时间：2013-03-14T14:59:25.030
> 
> 标签：php, loops, for-loop

我希望这个 for 循环回显表格，制作 12 个单元格并在每个单元格中回显一年并制作一个新行

```
echo "<table>"
echo "<tr>";
for ($Year; $Year <= 2013; $Year++) {
    for ($i=0; $i <= 13; $i++) {

        if ($i==13) {
            echo "</tr><tr>";   
        }
    echo "<td style='text-align:center;'>$Year</td>";
    ++$Year;
    ++$i;
}
echo "</tr>";
}

echo "</table>"; 
```

这就是我得到的和我需要的 ![我的输出](../Images/9bf764a5d84ab61359d254a03a909194.png)

![我需要的](../Images/8707cdabdd673a3a3d72235fd537eab1.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:23:09.113

这段简单的代码呢？

```
echo "<table><tr>";

for($year = 1912; $year <= date('Y'); $year++)
{
    echo "<td style='text-align:center;'>{$year}</td>";
    if($year % 12 == 3) echo '</tr><tr>';
}

echo "</tr></table>"; 
```

不是很聪明，可以升级以更好地处理不同的起始值等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T15:34:21.327

另一种方法，使用`mod`而不是额外的`for`循环：

```
$Year = 1912;
$EndYear = 2013;
$i = 1;

echo "<table>";
echo "<tr>";

while ($Year <= $EndYear) {
    if (($i % 13) == 0) {
        echo "</tr><tr>";   
        $i = 1;
    }
    echo "<td style='text-align:center;'>$Year</td>";
    ++$i;
    ++$Year;
}
echo "</tr>";
echo "</table>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T15:41:13.803

使用一些 PHP-Fu 的其他技术：

```
$start = 1912;
$end = 2013;
$array = range($start, $end);
$array_chunks = array_chunk($array, 12);
$table = '<table>';
foreach($array_chunks as $chunk){
    $table .= '<tr><td>'. implode('</td><td>', $chunk) .'</td></tr>';
}
$table .= '</table>';
echo $table; 
```

如果你想拖钓，请使用这样的“for-loop”：

```
$start = 1912;
$end = 2013;
$array = range($start, $end);
$array_chunks = array_chunk($array, 12);
$table = '<table>';
$c = count($array_chunks);
for($i=0;$i<$c;$i++){
    $table .= '<tr><td>'. implode('</td><td>', $array_chunks[$i]) .'</td></tr>';
}
$table .= '</table>';
echo $table; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T15:43:27.720

```
<?php
echo "<table><tr>";
$i = 0;
for ($year= 1912; $year <= 2013; $year++) {
    echo "<td style='text-align:center;'>$year</td>";
    if(++$i == 12) {
        echo '</tr><tr>'; 
        $i=0;
    }
}
echo "</tr></table>"; 
```

# excel - 在工作表修改上执行 vba 代码

> ID：15412732
> 
> 赞同：0
> 
> 时间：2013-03-14T14:59:33.643
> 
> 标签：excel, vba

这是我的代码，列出了主工作表中所有工作表的链接：

```
 For i = 2 To Sheets.Count
          Sheets("main").Hyperlinks.Add Anchor:=Sheets("main").Cells(i, 2),_
          Address:="", SubAddress:="'" & Sheets(i).Name & "'!A1", TextToDisplay:=Sheets(i).Name
     Next i 
```

每次添加新工作表、删除现有工作表、重命名、重新定位时，我都想执行此代码。

我怎样才能做到这一点？

附言

如果有更好的解决方案我也会考虑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:58:28.740

我会将代码放在工作表“Main”的 Worksheet_Activate 块中。这样，每次激活工作表时都会更新超链接。

# jquery - jQuery UI 模态对话框导致网页已过期错误

> ID：15412739
> 
> 赞同：2
> 
> 时间：2013-03-14T14:59:40.277
> 
> 标签：jquery, asp.net, internet-explorer-9

我`"webpage had expired"`只在 IE9 中遇到错误。我正在调用带有 2 个提交按钮（图像按钮）的模式对话框。当我单击它们时，我可以看到弹出窗口，然后我收到“网页已过期”消息。

**我的功能：**

```
moreSubscribersQuestions: function () {
        var dlg=  $("#dialogMoreClients").dialog({
            modal: true,
            //dialogClass: 'WsErrorMessage'
            dialogClass: 'addMoreClientPopUp',
            width: 500,
            height:400
        });
        $('.ui-helper-clearfix:after').removeClass();
        //$('div.FinishPurchasePopUpBTn').each(function () {
        //    this.addClass('FinishPurchasePopUpBTn');
        //});
        dlg.parent().appendTo(jQuery("form:first"));
    } 
```

删除后 `dlg.parent().appendTo(jQuery("form:first"));`问题不再出现。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T17:31:18.817

Fraser Sherman 的这篇文章[The Most Likely Cause of "Webpage Has Expired"](http://smallbusiness.chron.com/likely-cause-webpage-expired-27135.html)描述了您可能会在 IE 中看到该错误的一些原因。以下是我阅读的[论坛帖子](http://forums.asp.net/t/1813697.aspx/1)中的一些其他想法。

在不确切知道自己在做什么的情况下，听起来您可能执行了 POST（可能使用 ASP.NET），然后尝试将用户重定向到浏览器历史记录中的页面。

解决该问题的选项可能是...

1.  找到另一种方法来重定向用户，而不是`window.history.go`类似技术（首选）
2.  确保页面不可缓存（可能会影响性能）
3.  将页面踢到兼容模式（最后的手段）

查看对话框中的代码会很有帮助。这可能会更深入地了解正在发生的事情。

# java - 如何使用协议缓冲区？

> ID：15412740
> 
> 赞同：2
> 
> 时间：2013-03-14T14:59:43.550
> 
> 标签：java, protocol-buffers

我看了很多教程，但我不明白如何使用协议缓冲区

为什么是“消息用户”？为什么不“类用户”？以及 Eclipse 是如何创建这样的消息的？为什么 name = 2 ？不是名称=“最大”

```
ption java_outer_classname="ProtoUser";

message User {

   required int32  id = 1;  // DB record ID
   required string name = 2;
   required string firstname = 3;
   required string lastname = 4;
   required string ssn= 5; 

   // Embedded Address message spec

    message Address {
      required int32 id = 1;
      required string country = 2 [default = "US"];; 
      optional string state = 3;
      optional string city = 4;
      optional string street = 5;
      optional string zip = 6;

      enum Type {
         HOME = 0;

         WORK = 1; 

       }

       optional Type addrType = 7 [default = HOME]; 

 }
   repeated Address addr = 16;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T15:12:28.983

> 为什么是“消息用户”？为什么不“类用户”？

Google Protocol Buffers (GPB)`class`在其语法中没有，而是有`message`。 [https://developers.google.com/protocol-buffers/docs/style](https://developers.google.com/protocol-buffers/docs/style)

这个文件只是文本文件，它应该有`.proto`扩展名。毕竟，您将在其上运行一个实用程序，该实用程序将生成真正的 Java 类，您可以将其导入并在您的项目中轻松使用。

[https://developers.google.com/protocol-buffers/docs/javatutorial](https://developers.google.com/protocol-buffers/docs/javatutorial)

编译你的协议缓冲区

```
protoc -I=$SRC_DIR --java_out=$DST_DIR $SRC_DIR/addressbook.proto 
```

`required string lastname = 4;`

4 代表**字段 id**，而不是值，它将用于生成比特流。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-22T04:24:17.543

Protobuffer 使用 message(keyword) 而不是 class 在你定义结构的类里面。架构。例如

```
 message Person{
  string name = 1;
  repeated string id = 2;
  Type phoneType = 3;
 }

enum Type{
 CellPhone = 0;
 HomePhone = 1;
 } 
```

在上面的例子中，我们定义了 Person Message 的结构。它的名称是数据类型是字符串，id 是字符串和类型的数组（当您只期望某些值时，请使用枚举。在这种情况下，我们假设 phoneNumber 可以是 CellPhone 或 HomePhone。如果有人正在发送任何其他值，然后 IT 将通过 UNKNOWN proto 值异常）

required：表示参数是必需的

要使用 proto 首先使用 mvn clean install 创建 proto 类 然后创建 protobuilder Protobuilder 为上面的 proto 设置

```
 Person person = Person.newBuilder().setName("testName")
 .setPhoneType(Type.CellPhone)
 .addAllId(listIds)
 .build; 
```

一旦你设置了这个值，你就不能改变它。如果要更改值，则需要创建另一个原型。Pesron person1 = Person.newBuilder(person).setName("ChangeName").build;

person1 将具有名称 ChangeName、phoneType CellPhone 和 ids 字符串数组。

更多信息： [https ://developers.google.com/protocol-buffers](https://developers.google.com/protocol-buffers)

# joomla - Joomla 2.5：当用户名/密码错误时，mod_login 重定向到 com_user

> ID：15412741
> 
> 赞同：0
> 
> 时间：2013-03-14T14:59:43.987
> 
> 标签：joomla, login, joomla2.5, joomla-extensions

我正在为我的 Joomla 网站使用 mod_login。它工作正常。但是，只要有错误的用户名/密码，它就会重定向到 com_user 而不是 mod_login。当我输入错误信息时，它会转到以下页面：

```
http://my_joomla_site/component/users/?view=login 
```

我怎样才能删除这个 com_user 接管我的 mod_login？如果用户名/密码错误，我希望它重定向到带有错误消息的 mod_login 页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T15:45:59.240

正如我在评论中所说，模块不是组件...... com_user 接管，因为当用户详细信息错误时，Joomla 无法将您发送到模块。

我相信您在某个菜单项中有一个模块，并且您希望在用户名/密码错误的情况下将用户重定向到该菜单。

我遇到了同样的问题，发现了这个插件： [Core Login Redirect](http://extensions.joomla.org/extensions/access-a-security/site-access/login-redirect/12395)

它允许您自定义各种情况的目的地，并且不需要编辑核心文件，因为这将是我的第二个建议（它有效，但使用插件无需走这条路）：

[http://forum.joomla.org/viewtopic.php?p=1296923#p1296923](http://forum.joomla.org/viewtopic.php?p=1296923#p1296923)

# windows - xcopy 语法？（批）

> ID：15412742
> 
> 赞同：1
> 
> 时间：2013-03-14T14:59:44.127
> 
> 标签：windows, batch-file

```
@echo off
xcopy /s/z/i Q:\U1210.exe C:\Users\jalozinski\Desktop\ 
START C:\Users\jalozinski\Desktop\U1210.exe 
```

所以这段代码的这个目的是将U1210.exe从Q:\驱动器复制到桌面，然后启动新复制的.exe。但由于某种原因，它会从 Q:\ 驱动器中复制随机文件夹和文件，我不知道为什么。我觉得它与 /s/z/i （我正在尝试这些，所以它可能是其中的一个）或与源文件路径有关。我觉得如果我关闭文件路径，它不会解决任何问题。

顺便说一句，这是批处理。：一世

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:16:12.823

让我们看看 XCOPY 有什么：
**/S** = 复制目录和子目录，除了空目录。
**/Z** = 以可重新启动模式复制网络文件。
**/I** = 如果目标不存在并且复制多个文件，则假定目标必须是一个目录。

首先，我会尝试不带**/S**，因为您不需要目录。
我将包括**/R**（覆盖只读文件。）
我还将包括**/Y**（禁止提示确认您要覆盖现有的目标文件。）

这就是我按照我认为你想要的方式工作的方式：

```
@ECHO OFF
set source=Q:\U1210.exe
set dest=C:\Users\jalozinski\desktop\

xcopy %source% %dest% /Z /R /Y
start %dest%\U1210.exe
exit 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T15:20:13.380

```
@echo off
xcopy Q:\U1210.exe C:\Users\jalozinski\Desktop\ 
START C:\Users\jalozinski\Desktop\U1210.exe 
```

这应该就是你所需要的

/s 正在复制所有子文件夹

/i 假设它是一个目录（如有疑问）

如果您的计算机速度非常慢，/z 是一种预防措施

所以你不应该需要任何这些命令

# android - 如何在 onActivityStart 和 onBackPressed 事件之间切换动画？

> ID：15412743
> 
> 赞同：0
> 
> 时间：2013-03-14T14:59:47.213
> 
> 标签：android, android-animation

由于我的应用程序设计的某些功能，我需要在事件中开始新的活动`onBackPressed`。

```
@Override
public void onBackPressed() {
    Intent intent = new Intent(this, SomeActivity.class);
    intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_NEW_TASK);
    startActivity(intent);
} 
```

问题是它看起来像用户在应用程序的深处进行 - 而不是用户返回。

因此，仅针对这种情况，我需要切换动画。我知道`overridePendingTransition`，但是如何获取系统默认动画（`activityCloseEnterAnimation`和其他动画）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T09:20:36.823

```
@Override
public void onBackPressed() {
    TypedArray activityStyle = getTheme().obtainStyledAttributes(new int[] {android.R.attr.windowAnimationStyle});
    int windowAnimationStyleResId = activityStyle.getResourceId(0, 0);
    activityStyle.recycle();

    activityStyle = getTheme().obtainStyledAttributes(windowAnimationStyleResId, new int[] {android.R.attr.activityCloseEnterAnimation, android.R.attr.activityCloseExitAnimation});
    int activityCloseEnterAnimation = activityStyle.getResourceId(0, 0);
    int activityCloseExitAnimation = activityStyle.getResourceId(1, 0);
    activityStyle.recycle();

    Intent intent = new Intent(this, MainActivity.class);
    intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_NEW_TASK);
    startActivity(intent);

    overridePendingTransition(activityCloseEnterAnimation, activityCloseExitAnimation);
} 
```

# objective-c - Apple Dev Center 中有哪些基础类文档可供新手阅读？

> ID：15412744
> 
> 赞同：1
> 
> 时间：2013-03-14T14:59:49.087
> 
> 标签：objective-c, cocoa-touch

抱歉，如果这是一个烦人的问题，但我是 iOS 开发的新手，因为很多人总是告诉我阅读 Apple 文档很重要，而且其中有很多，所以我虽然你可以列出一些基本的对于新手来说。

欣赏它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T15:32:22.613

我按以下顺序阅读：

*   使用 Objective-C 进行面向对象编程
*   你的第一个 iOS 应用
*   Objective-C 编程语言
*   可可基础知识指南
*   Objective-C 运行时编程指南（略读）
*   查看 iOS 控制器编程指南
*   适用于 iOS 的文本、Web 和编辑编程指南。
*   iOS 核心数据教程

这些指南之间存在一些重复/重叠，因此在前三个左右之后它将是一个快速阅读。

不要费心购买指南和食谱：他们只是反刍官方文档中的内容。阅读完基本文档后，请观看有关您感兴趣的主题的 Apple WWDC（在 iTunes 上免费）的一些视频，尤其是关于 ARC（关于内存管理）的讨论。

**更新：** 关于课程，您只需在需要使用它们时检查它们。最常用的可能是控制器（UINavigationController、UIViewController..）、NSString、UIButton、UITextView、UILabel 和所有容器（NSArray、NSMutableArray、NSSet、NSDictionary..）。但是，在您的代码中需要它们之前，我不会尝试研究它们。只是您使用它们的次数越多，这样做就越容易。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-14T15:36:35.993

以下是 iOS 技术的一些链接：

*   [iOS App Programming Guide](https://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40007072) : 从基本到高级的 iOS 编程概念解释
*   [使用 Objective-C 编程](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/ProgrammingWithObjectiveC/Introduction/Introduction.html#//apple_ref/doc/uid/TP40011210)：关于如何在 Objective-C 中进行编程
*   [Cocoa 编码指南](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CodingGuidelines/CodingGuidelines.html#//apple_ref/doc/uid/10000146i)：开发人员应遵循特定于语言/平台的编码规则/指南。这是 Cocoa 指南，所以在编写代码时请确保所有这些规则都得到满足。

在学习/搜索时，请优先参考[Apple iOS 文档，否则搜索引擎会为您提供帮助。](https://developer.apple.com/library/ios/navigation/)

希望这些信息可以帮助您开始 iOS 应用程序开发。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T15:15:25.940

有很多要阅读的内容，而在不知道您要查找的内容的情况下，这几乎是不可能的。我建议从斯坦福大学在线课程（您可以在 iTunesU 上找到）的 CS 193P iPhone 应用程序开发开始，它以比阅读文档更有效的方式总结所有内容，但如果您坚持 NSString 类是一个很好的方法开始。

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)

# google-app-engine - 无法创建应用程序，这是计划的“没有新用户”时间还是其他什么？

> ID：15412745
> 
> 赞同：0
> 
> 时间：2013-03-14T14:59:51.817
> 
> 标签：google-app-engine

非常简单的问题 - 卡在第 0 步。

我已经下载了 SDK，让我的应用程序在本地运行等。

但是，当我访问[https://appengine.google.com/start](https://appengine.google.com/start)并单击“创建应用程序”时，我会看到一个页面，上面写着

**服务器错误**
发生服务器错误。

这是我第一次使用 App Engine，因此我无法访问仪表板/控制面板/帐户区域或任何比非功能性“创建应用程序”按钮更深的东西。

我意识到这不是一个编程问题（嗯，在某种意义上它是但它不是*我*的编程问题），但我真的很感激一些帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:11:59.113

使用您的 gmail 帐户登录[appengine 。](http://appengine.google.com)

# jquery-ui - 为什么使用 Crossrider 和 JQueryUI 在 IE 中可以拖动一次 DIV？& 没有触发 Dragstop 事件？

> ID：15412746
> 
> 赞同：0
> 
> 时间：2013-03-14T14:59:55.270
> 
> 标签：jquery-ui, internet-explorer, jquery-ui-draggable, crossrider

我正在使用 Crossrider，我想向页面的 DOM 添加一个可拖动的 div。
以下代码在 Chrome 和 Firefox 上运行良好，并且为 Chrome 和 Firefox 触发了 dragstop 处理函数，没有任何问题。
但是对于 IE，div 是可以拖动一次的！ie div一旦放下就不能再拖动了，更奇怪的是在IE中根本没有触发dragstop事件处理程序！？

**如何在 IE 中解决这个问题！？**

这是代码：

*扩展名.js 文件*

```
appAPI.ready(function(jQuery) {              
    appAPI.resources.jQueryUI('1.10.1'); 
    appAPI.resources.includeCSS('styles.css');
    var $div = jQuery('<div class="square" ></div>').appendTo('body');
    $div.draggable( {containment: "window", scroll: false} );
    $div.bind('dragstop', function() {
        console.log("drag stopped ..."); 
    }); 
}); 
```

*样式.css 文件*

```
.square {
    display:block; 
    z-index: 1000001; 
    background-color: #000000; 
    height: 100px; 
    width: 100px;
    top: 0px;
    left: 0px;
    position: fixed;
} 
```

请注意，我尝试了没有 crossrider 的代码并在 IE 上运行它，它运行良好。
您可以使用此链接进行尝试：http: [//jsfiddle.net/GHaMV/](http://jsfiddle.net/GHaMV/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-28T10:42:05.717

我在使用 Crossrider 时遇到了同样的问题，并通过声明一个返回可拖动元素的处理函数来解决该问题，因此您的代码应如下所示：

```
$div.draggable({
      containment: window,
      helper: function() {
          return $div;
      }
}); 
```

希望能帮助到你...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T15:28:26.957

没有`dragstop`事件，只有`stop`钩子（[请参阅文档](http://jqueryui.com/draggable/#events)）：

[像这样](http://jsfiddle.net/GHaMV/1/)使用它：

```
$div.draggable({
    containment: "window",
    scroll: false,
    stop: function() {
        console.log("drag stopped ..."); 
    }
}); 
```

# facebook - facebook Admins 和 App ID 缺失：fb:admins 和 fb:app_id 标签缺失

> ID：15412750
> 
> 赞同：0
> 
> 时间：2013-03-14T15:00:06.450
> 
> 标签：facebook, facebook-opengraph

`Admins And App ID Missing: fb:admins and fb:app_id tags are missing. These tags are necessary for Facebook to render a News Feed story that generates a high click-through rate.`

调试器表明这个问题可能在某种程度上限制了我们的点击率。

那准确吗？它会对我们的点击率产生不利影响吗？

由于上述修复（添加管理员 ID），我们的用户是否存在任何潜在的隐私问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:59:39.713

**那准确吗？它会对我们的点击率产生不利影响吗？**

在官方发布的论文中，通过实施正确的开放图形标签，我们应该看到点击率提高了 2-3 倍。

**如果是，解决这个问题需要什么？**
添加管理员的 id

**而且，由于上述修复，我们的用户是否存在任何潜在的隐私问题？**
到目前为止还没有，因为用户正在管理他们的安全性

# php - 使用 JCrop 和 php 中的会话一次裁剪多个图像

> ID：15412751
> 
> 赞同：5
> 
> 时间：2013-03-14T15:00:16.623
> 
> 标签：php, jquery, image, crop, jcrop

[我有一个图像裁剪脚本，可以使用Jquery Jcrop 插件](http://deepliquid.com/content/Jcrop.html)一次裁剪一个图像。现在我想上传更多图像并使用 for 循环一张一张地裁剪它们。

做这个的最好方式是什么？

我将输入字段设置为多个，以便它可以上传多个。

## 编辑：

我用`$max`and编辑了下面的代码`count`。我认为我做错了。我该如何解决它，所以当我单击裁剪时，它会一个接一个地裁剪它们。

这是我的`uploaded.php`：

```
 <?php 
         session_start();
         $max = count($_FILES['userfile']['name']);
         for($i = 0; $i < $max; $i++){
            $target = $_FILES['file'][$i];
         }

         $target = "data/uploads/"; 
         $target = $target . basename( $_FILES['filename']['name']) ; 
         $_SESSION['target_path'] = $target;

         $ok=1; 
         if(move_uploaded_file($_FILES['filename']['tmp_name'], $target)) 
         {
             echo "De afbeelding *". basename( $_FILES['filename']['name']). "* is geupload naar de map 'uploads'";
         } 
         else 
         {
             echo "Sorry, er is een probleem met het uploaden van de afbeelding.";
         } 
    ?> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T06:04:19.597

我想你想要更像这样的东西：

```
<?php 
session_start();

$upload_dir = "data/uploads/"; 
for($i = 0; $i < 5; $i++){
     $target = $upload_dir . basename( $_FILES['file']['name'][$i]);
     if(move_uploaded_file($_FILES['file']['tmp_name'][$i], $target)) {
         echo "De afbeelding *". basename( $_FILES['file']['name'][$i]). "* is geupload naar de map 'uploads'";
     } else {
         echo "Sorry, er is een probleem met het uploaden van de afbeelding.";
     }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T06:19:51.007

你需要检查几件事

1) 要上传文件，请阅读： http: [//php.net/manual/en/features.file-upload.multiple.php](http://php.net/manual/en/features.file-upload.multiple.php) - 特别`input name="userfile[]"`是在 HTML 中，服务器上的文件显示为`$_FILES['userfile']['name'][0],...,$_FILES['userfile']['name'][N]`

2)`move_uploaded_file()`是一项安全检查，以确保文件有效，没有它就不要离开家 :-)

3）我推荐`imagemagick`库（[http://php.net/manual/en/imagick.cropimage.php](http://php.net/manual/en/imagick.cropimage.php)），我知道，Jcrop 演示使用 GD 库，但值得您花时间查看 imagemagick。

4）最后，如果一切都失败了，请使用`print_r($variable)`以确保文件正在进入您的服务器。

5) 有时可能是系统管理问题，例如不可写 /tmp 文件夹、磁盘已满、php.ini 中的上传大小限制和 Web 服务器内置超时。检查 phpinfo() 也有帮助

# excel - 循环列 VBA EXCEL 时忽略其他单元格值

> ID：15412758
> 
> 赞同：0
> 
> 时间：2013-03-14T15:00:26.157
> 
> 标签：excel, vba

我将从一个例子开始我的问题，否则将很难解释。

```
 A        B        C           D         E (ID)
1      word              letter                  1
       test              blabla                  
       other          
2      word              letter                  2
                         number
3      test              true                    3
4      other             false                   4
5      word              letter       Yes        5
6      word              letter       Yes        6
7      test              letter                  7 
```

**目标是什么？**

如果我试图用文字来解释目标，那将很难理解；这也很难解释 :) 无论如何我也添加了我的代码，如果你对 VBA 很好，你会比文本更好地理解代码。

如果一个值（在这个例子中：单词）也在其他行中，那么我们需要检查 C 列，并且如果 C 列中有一个值，我们在 C 列中找到了多个值（在这个例子中：字母），我们需要重新检查 A 列中的值是否也多次出现。

所以我已经制作了一个 SUB，它可以工作！:) 但如果单元格中有更多值，则不是。所以在示例中，当单元格中只有 1 个值时，如第 6 行和第 7 行，D 列返回：YES

**到目前为止，这是我的代码。**

```
Sub duplicates()

Dim source As Range
Dim source2 As Range

For Each source In Range("A1", Range("A" & Rows.Count).End(xlUp))
 If source.Value <> "" Then
    For Each source2 In Range("A1", Range("A" & Rows.Count).End(xlUp))

    If source.Value = source2.Value And source.Offset(0, 4).Value <> source2.Offset (0, 4).Value Then

        If source.Offset(0, 2).Value = source2.Offset(0, 2).Value Then

         source.Offset(0, 3) = "Yes"
        End If
    End If
    Next source2
  End If
 Next source
End Sub 
```

所以，我们应该在第 1 行和第 2 行返回：YES。希望你明白我的目标。希望有人可以提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T22:24:35.897

我的建议如下：

**A) 附加函数**将检查作为数组传递给函数的每个单元格的每个元素：

```
Function AnyEqual(ColA, ColB) As Boolean

Dim itemA, itemB
For Each itemA In ColA
    For Each itemB In ColB
    If itemA = itemB Then
        AnyEqual = True
        Exit Function
    End If
    Next
Next

End Function 
```

**B）在您的代码中进行了一些更改**- 将其放入`For Each source2`循环而不是您的内部代码：

```
If AnyEqual(Split(source, Chr(10)), Split(source2, Chr(10))) And _
    source.Offset(0, 4).Value <> source2.Offset(0, 4).Value Then

    If AnyEqual(Split(source.Offset(0, 2), Chr(10)), _
                   Split(source2.Offset(0, 2), Chr(10))) Then

        source.Offset(0, 3) = "Yes"
    End If
End If 
```

根据您提供的数据，它似乎工作正常。我希望这是您正在寻找的东西，因为理解您的需求有点复杂。

# .net - NetTcpActivator 服务（Net.Tcp 侦听器适配器）偶尔停止响应

> ID：15412761
> 
> 赞同：8
> 
> 时间：2013-03-14T15:00:31.020
> 
> 标签：.net, wcf, iis, iis-7, iis-7.5

在我当前的项目中，我们（我的意思是“项目团队”）使用托管在 IIS 上的 WCF 服务。

以下是一些可能很重要的技术细节：

1.  我们将 NET 3.5 用于 WCF 服务
2.  我们使用 NET.TCP 通信协议
3.  我们同时使用 IIS 7 和 IIS 7.5 来托管这些服务
4.  我们在每台服务器上使用多个 IIS 工作进程

所以，问题是 - 有时 WCF 服务变得不可用。当我们尝试访问这些 WCF 服务时，我们会收到超时错误。恢复 WCF 服务功能的唯一方法是重新启动 NetTcpActivator（Net.Tcp 侦听器适配器）Windows 服务。

根据我同事的理论，这个错误可能与这篇知识库文章中描述的问题有关：

> 修复：当您运行基于 .NET Framework 4 的 WCF 服务时，WCF 服务的 Smsvchost.exe 停止响应[http://support.microsoft.com/kb/2536618](http://support.microsoft.com/kb/2536618)

根据这篇文章，如果 SMSvcHost（承载 NetTcpActivator 和端口共享服务的容器服务）在超过 60 秒（不可配置的超时）内无法将请求路由到 w3wp（IIS 工作进程），则会挂起。不幸的是，我们无法找到重现此错误的方法。例如，我们将 SMSvcHost 限制为 1 个 CPU 内核和 1 个线程，并将挂起的连接扩展限制为 1M，并在用户模式下将其推至 100% CPU 负载。它没有挂起！

有时我们的负载测试会导致奇怪的错误，但是当我们停止它们时，所有服务都会自动恢复到正常状态。但有时负载不重可能会挂掉NetTcpActivator！

另外，我想说这不是一个新问题。我的同事在 3 年前就已经知道了（有关更多信息，请参阅此线程[http://forums.iis.net/t/1167668.aspx/1/10](http://forums.iis.net/t/1167668.aspx/1/10)）。而且，不幸的是，他们没有得到答案。一些配置更改后问题就消失了！现在它又回到了新服务器上。

我将非常感谢您的所有想法和想法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-11T21:04:13.060

好吧，经过大量研究，我找到了问题的原因。可能还有其他情况会发生这种情况，但希望这会对某些人有所帮助。微软正在他们的实验室中进行复制，最终应该会有修复。

在我们的例子中，所有的行星都必须对齐。我们有一个用于客户端和服务器的 .NET 4 集成应用程序池（在开发人员机器上）。该服务使用外部配置文件进行绑定 ( `<bindings configSource="serviceModel.bindings.config" />`)，该文件从另一个项目链接并在构建时复制，并将自定义构建任务添加到服务的 .csproj。

要重现该问题：

1.  停止所有正在运行的 SMSvcHost 服务（Net.Tcp*、Net.Pipe、Net.Msmq）。重新启动将不起作用，因为 SMSvcHost 进程不会消失。
2.  在 Visual Studio 中，为 WcfService 运行 Clean
3.  在 Windows 资源管理器中，删除 WcfService 中的 serviceModel.bindings.config
4.  运行 iisreset（摆脱 w3wp 并启动​​ SMSvcHost 服务——按 F5 是服务列表以查看）
5.  构建 WcfService（复制链接的配置文件）
6.  浏览到 WcfClient 页面，提交两次。如果您每次都遇到错误，则可能是您遇到了问题。在我们的主应用程序中，它在测试应用程序 CommunicationObjectFaultedException 中给出了超时，而不是超时，但两者都可以。
7.  停止 SMSvcHost 服务。如果出现问题，SMSvcHost 的事件 ID 8 将记录到系统事件日志中。

我还不知道 w3wp 或 SMSvcHost 是否是罪魁祸首。第 3 步很关键，虽然我还不能解释为什么。如果你不删除文件，那么一切都很好。如果您修改文件（创建日期保持不变），一切都很好。如果将配置 XML 移动到主 Web.config 文件中，一切都很好。当构建任务复制文件时，创建的日期会更新，所以我猜它是以某种方式缓存的，其中一个进程检测到日期更改。

如果您重新启动 SMSvcHost 服务（完全停止、完全启动）一次或两次，客户端请求将通过，从那时起您就没事了。

所以我现在的猜测是，这可能是部署后的一个问题，但如果你确保一切都在运行（并根据需要重新启动服务）那么你应该没问题。您也不能执行外部/链接文件。

一旦微软追踪到这个问题，我希望能有更多的见解。

**最后更新** 我忘了早点回来。微软基本上承认他们可能有一个错误，但由于有一个解决方法并且在票上花费了足够的时间，他们将关闭它并且没有进一步研究。当 SMSvcHost 使用以下设置启动时，似乎存在某种类型的竞争条件（类似于我之前发布的内容）：

1.  在 IIS 中托管 WCF
2.  使用非 HTTP 绑定，以便 SMSvcHost 发挥作用
3.  使用外部配置文件进行绑定`configSource`

链接外部配置与它无关。解决方法是不使用`configSource`我们现在正在做的。

# c++ - 我会通过此初始化获得副本或分配吗？

> ID：15412762
> 
> 赞同：3
> 
> 时间：2013-03-14T15:00:33.287
> 
> 标签：c++

比较 C++ 中的这两种初始化方法以获得一个简单的复数类。

```
complx one(1,3);
complx two = complx(3,4); 
```

在第二种情况下，我会得到一个构造函数，然后是一个赋值，然后是一个副本，还是只是构造函数？

是否可以区分这两种类型的初始化？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T15:07:37.377

```
complx two = complx(3,4); 
```

这是一个*复制初始化*。此规则涵盖了此初始化程序的特定语义：

> 如果初始化是直接初始化，或者**如果是复制初始化，其中源类型的 cv 非限定版本与目标的类 [...] 相同**，则考虑构造函数。枚举了适用的构造函数（13.3.1.3），并通过重载决议（13.3）选择最佳构造函数。调用如此选择的构造函数来初始化对象，使用初始化表达式或表达式列表作为其参数。[...]

也就是说，源类型与目标类型相同的复制初始化的行为类似于直接初始化。所以这使得声明等同于：

```
complx two(complx(3,4)); 
```

这会构造一个临时`complx`对象，然后使用复制/移动构造函数来构造`two`.

但是，可以省略此复制/移动：

> 当尚未绑定到引用 (12.2) 的临时类对象将被复制/移动到具有相同 cv-unqualified 类型的类对象时，可以通过将临时对象直接构造到目标中来省略复制/移动操作省略的复制/移动

但是，复制构造函数必须仍然可以访问，就*好像*它正在被调用一样。

可以区分这两种初始化吗？假设复制/移动是有效的，不可靠的，不。如果编译器确实在复制初始化中删除了副本，或者如果副本表现良好并且没有任何额外的副作用，那么两者的行为将完全相同。如果它没有忽略副本并且副本有一些额外的副作用，那么您会注意到不同之处。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T15:04:09.230

首先称为**直接初始化**。
它只是调用最佳匹配构造函数。

第二种情况称为**复制初始化**。
它创建一个类型的对象，`Complx`然后复制该对象以创建该`two`对象。
所以它涉及调用构造函数，然后调用复制构造函数。

编译器通常可以在可能的情况下省略复制构造函数调用（*有特殊条件，代码示例满足这些条件*）。但是没有任何优化得到保证，它们取决于编译器实现的效率，因此复制构造函数需要可用于第二个示例进行编译。

> **是否可以区分这两种类型的初始化？**

是的，除非复制构造函数可用且可访问，否则第二个示例将无法编译。

* * *

**好读：**

**[GotW #36：初始化](http://www.gotw.ca/gotw/036.htm)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T15:03:47.113

在 C++ 中，您可以通过像这样实现移动构造函数或复制构造函数来区分这两种类型的初始化

```
struct complx

{
  complx(complx && aOther){} // <- move constructor (C++11)
  complx(const complx & aOther){} // <- copy constructor (C++03)
  complx(float a, float b) {} // <- normal constructor
}; 
```

您的第一行代码将调用普通的构造函数。您的第二行代码称为使用右值进行复制初始化，并将调用 C++11 中的移动构造函数和 C++03 中的复制构造函数。请注意，在 C++03 中，`complx(complx && aOther){}`无法识别（无效语法），应将其删除。

# java - JVM 缺乏对 NaN 与 scala Double.NaN 的支持

> ID：15412766
> 
> 赞同：3
> 
> 时间：2013-03-14T15:00:48.213
> 
> 标签：java, scala, floating-point, jvm, jvm-languages

我最近在 Java 虚拟机规范中读到 JVM 不支持 NaN 值，也不支持溢出信号。

我特别指的是 jvms 7 的第 2.8.1 节，JVM 和 IEEE 754 支持的浮点运算之间的关键区别，其中指出：

```
"The floating-point operations of the Java Virtual Machine do not throw
exceptions, trap, or otherwise signal the IEEE 754 exceptional conditions of
invalid operation, division by zero, overflow, underflow, or inexact. The Java
Virtual Machine has no signaling NaN value." 
```

我是否误解了这一点？在 Scala（它依赖于 Bytecode 中的 Java 原语来表示数字类型）和 Java 的 Double 对象中，有一个 NaN 和一个正/负无穷大值（在 Java 中记录了相应的二进制值）。如果 JVM 不支持它们，如何有效地处理它们？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-14T15:08:05.163

您引用的文字说没有信号 NaN，而不是没有 NaN。

重要的是 Java 中的浮点运算会产生预期值（包括 NaN 和无穷大），但不会引发异常。

# android - 图像在 ListView 中重复

> ID：15412767
> 
> 赞同：7
> 
> 时间：2013-03-14T15:00:49.557
> 
> 标签：android, android-layout

我已经实现了应该从服务器下载图像并在 ListView 中显示它们的 android 应用程序，但是在下载图像时会发生非常有趣的事情

正如您在视频中看到的，尚未下载的图片由已下载的图片表示。这怎么可能发生？我想了快两天了。

[http://www.youtube.com/watch?v=lxY-HAuJO0o&feature=youtu.be](http://www.youtube.com/watch?v=lxY-HAuJO0o&feature=youtu.be)

这是我的 ListView 适配器代码。

```
public class MoviesAdapter extends ArrayAdapter<ParkCinema> {
        private ArrayList<ParkCinema> movieDataItems;   
        private Activity context;

        public MoviesAdapter(Activity context, int textViewResourceId, ArrayList<ParkCinema> movieDataItems) {
            super(context, textViewResourceId, movieDataItems);
            this.context = context;
            this.movieDataItems = movieDataItems;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) { 
            if (convertView == null) {
                LayoutInflater vi = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                convertView = vi.inflate(R.layout.movie_data_row, null);
                }

            ParkCinema movie = movieDataItems.get(position);

            if (movie!=null){
                        ImageView imageView = (ImageView) convertView.findViewById(R.id.movie_thumb_icon);
                        String url = movie.poster();

                         if (url!=null) {
                            Bitmap bitmap = fetchBitmapFromCache(url);
                            if (bitmap==null) { 
                                new BitmapDownloaderTask(imageView).execute(url);
                            }
                            else {
                                imageView.setImageBitmap(bitmap);
                            } 
                        } 
            }
            return convertView;
        }

        private LinkedHashMap<String, Bitmap> bitmapCache = new LinkedHashMap<String, Bitmap>();

        private void addBitmapToCache(String url, Bitmap bitmap) {
            if (bitmap != null) {
                synchronized (bitmapCache) {
                    bitmapCache.put(url, bitmap);
                }
            }
        }

        private Bitmap fetchBitmapFromCache(String url) {

            synchronized (bitmapCache) {
                final Bitmap bitmap = bitmapCache.get(url);
                 if (bitmap != null) {
                    return bitmap;
                } 
            }

            return null;

        }

    private class BitmapDownloaderTask extends AsyncTask<String, Void, Bitmap> {

            private String url;
            private final WeakReference<ImageView> imageViewReference;

            public BitmapDownloaderTask(ImageView imageView) {
                imageViewReference = new WeakReference<ImageView>(imageView);
            }

            @Override
            protected Bitmap doInBackground (String... source) {
                url = source[0];
                Bitmap image;
                try{
                    image = BitmapFactory.decodeStream(new URL(url).openConnection().getInputStream());
                    return image;
                    }
                catch(Exception e){Log.e("Error", e.getMessage()); e.printStackTrace();}
                return null;
                } 

            @Override
            protected void onPostExecute(Bitmap bitmap) {       
                addBitmapToCache(url, bitmap);
                imageViewReference.get().setImageBitmap(bitmap);               
            }
        }
    } 
```

编辑3：

```
public View getView(int position, View convertView, ViewGroup parent) { 
    if (convertView == null) {
        LayoutInflater vi = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE); 
        convertView = vi.inflate(R.layout.movie_data_row, null);
        }
    ParkCinema movie = movieDataItems.get(position);
    ImageView imageView = (ImageView) convertView.findViewById(R.id.movie_thumb_icon);
    if (movie!=null){
                String url = movie.poster();

                    if (url != null) {
                        Bitmap bitmap = fetchBitmapFromCache(url);
                        if (bitmap == null) {
                            imageView.setImageResource(R.drawable.no_image);
                            new BitmapDownloaderTask(imageView).execute(url);
                        }
                        else {
                            imageView.setImageBitmap(bitmap);
                        }
                    }
                    else {
                        imageView.setImageResource(R.drawable.no_image);
                    }
                }
                else {
                    imageView.setImageResource(R.drawable.no_image);
                } 

    return convertView;

} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-14T17:10:24.130

Aha! I think I may know the issue. Right now, your `getView` method sets your `ImageView` like this:

1.  Gets movie object at position
2.  Pulls out the movie's thumbnail url
3.  Using that url, it tries to find the image in the cache
4.  If it finds the image, it sets it
5.  If it can't find the image, it starts an async network request to go get it, and sets it after it gets downloaded.

Your issus arises since `ListView` reuses its rows' `View`s. When the first `View` scrolls off the screen, rather than inflate a new one, `ListView` passes the now offscreen row's `View` in as `convertView` for you to reuse (this is for efficiency).

When your `getView` gets a `convertView` that is getting reused, its `ImageView` has already been set from the row that had it before, so you see the old image from the offscreen row's `View`. With your current `getView` process, you check for the new row's image, and it doesn't find it in the cache, it starts a request to download it. While it is downloading, you see the old image until you get the new image.

To fix this, you need to make sure you set every field in the row's `View` immediately, to make sure you don't have any `View`s showing stale data. I would suggest you set the `ImageView` to the default `drawable` resource (you have set in your `R.layout.movie_data_row`) while you wait for the network download to get the image.

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    if (convertView == null) {
        LayoutInflater vi = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        convertView = vi.inflate(R.layout.movie_data_row, null);
    }

    ParkCinema movie = movieDataItems.get(position);
    ImageView imageView = (ImageView) convertView.findViewById(R.id.movie_thumb_icon);
    if (movie != null) {
        String url = movie.poster();

        if (url != null) {
            Bitmap bitmap = fetchBitmapFromCache(url);
            if (bitmap == null) {
                // Set the movie thumbnail to the default icon while we load
                // the real image
                imageView.setImageResource(R.drawable.movie_thumb_icon);
                new BitmapDownloaderTask(imageView).execute(url);
            }
            else {
                // Set the image to the bitmap we get from the cache
                imageView.setImageBitmap(bitmap);
            }
        }
        else {
            // Set the movie thumbnail to the default icon, since it doesn't
            // have a thumbnail URL
            imageView.setImageResource(R.drawable.movie_thumb_icon);
        }
    }
    else {
        // Set the movie thumbnail to the default icon, since there's no
        // movie data for this row
        imageView.setImageResource(R.drawable.movie_thumb_icon);
    } 
```

## **-Edit-**

Updated to be even more robust, using your `drawable`. You also have an issue with your `BitmapDownloaderTask`, it does not handle errors/null. Try adding this as well.

```
@Override
protected void onPostExecute(Bitmap bitmap) { 
    addBitmapToCache(url, bitmap);
    if (bitmap == null) {
        // Set the movie thumbnail to the default icon, since an error occurred while downloading
        imageViewReference.get().setImageResource(R.drawable.movie_thumb_icon);
    }
    else {
        imageViewReference.get().setImageBitmap(bitmap);
    }            
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-21T17:48:02.673

i had this issue and implemented lruCache ...i believe you need api 12 and above or use the compatiblity v4 library. lurCache is fast memory but it also has a budget, so if your worried about that you can use a diskcache ...its all described here [http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html](http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html)

I'll now provide my implementation which is a singleton i call from anywhere like this:

//where first is a string and other is a imageview to load

```
DownloadImageTask.getInstance().loadBitmap(avatarURL, iv_avatar); 
```

here's the ideal code to cache and then call the above in getView of an adapter when retrieving the web image:

```
 public class DownloadImageTask {

private LruCache<String, Bitmap> mMemoryCache;

/* create a singleton class to call this from multiple classes */

private static DownloadImageTask instance = null;

public static DownloadImageTask getInstance() {
    if (instance == null) {
        instance = new DownloadImageTask();
    }
    return instance;
}

//lock the constructor from public instances
private DownloadImageTask() {

    // Get max available VM memory, exceeding this amount will throw an
    // OutOfMemory exception. Stored in kilobytes as LruCache takes an
    // int in its constructor.
    final int maxMemory = (int) (Runtime.getRuntime().maxMemory() / 1024);

    // Use 1/8th of the available memory for this memory cache.
    final int cacheSize = maxMemory / 8;

    mMemoryCache = new LruCache<String, Bitmap>(cacheSize) {
        @Override
        protected int sizeOf(String key, Bitmap bitmap) {
            // The cache size will be measured in kilobytes rather than
            // number of items.
            return bitmap.getByteCount() / 1024;
        }
    };

}

public void loadBitmap(String avatarURL, ImageView imageView) {
    final String imageKey = String.valueOf(avatarURL);

    final Bitmap bitmap = getBitmapFromMemCache(imageKey);
    if (bitmap != null) {
        imageView.setImageBitmap(bitmap);
    } else {
        imageView.setImageResource(R.drawable.ic_launcher);

        new DownloadImageTaskViaWeb(imageView).execute(avatarURL);
    }
}

private void addBitmapToMemoryCache(String key, Bitmap bitmap) {
    if (getBitmapFromMemCache(key) == null) {
        mMemoryCache.put(key, bitmap);
    }
}

private Bitmap getBitmapFromMemCache(String key) {
    return mMemoryCache.get(key);
}

/* a background process that opens a http stream and decodes a web image. */

class DownloadImageTaskViaWeb extends AsyncTask<String, Void, Bitmap> {
    ImageView bmImage;

    public DownloadImageTaskViaWeb(ImageView bmImage) {
        this.bmImage = bmImage;
    }

    protected Bitmap doInBackground(String... urls) {

        String urldisplay = urls[0];
        Bitmap mIcon = null;
        try {
            InputStream in = new java.net.URL(urldisplay).openStream();
            mIcon = BitmapFactory.decodeStream(in);

        } catch (Exception e) {
            Log.e("Error", e.getMessage());
            e.printStackTrace();
        }

        addBitmapToMemoryCache(String.valueOf(urldisplay), mIcon);

        return mIcon;
    }

    /* after decoding we update the view on the mainUI */
    protected void onPostExecute(Bitmap result) {
        bmImage.setImageBitmap(result);

    }

} 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T15:13:33.553

视图被重用以提高适配器的性能。您应该使用另一种方法。你必须有一个重用你的观点的班级持有者。在您的情况下，您的课程应该是这样的：

```
 public class MoviesAdapter extends ArrayAdapter<ParkCinema> {
    private ArrayList<ParkCinema> movieDataItems;   
    private Activity context;

    public MoviesAdapter(Activity context, int textViewResourceId,       ArrayList<ParkCinema> movieDataItems) {
        super(context, textViewResourceId, movieDataItems);
        this.context = context;
        this.movieDataItems = movieDataItems;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) { 
        if (convertView == null) {
            LayoutInflater vi = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = vi.inflate(R.layout.movie_data_row, null);

                holder = new ViewHolder();

                holder.imageView = (BarImageView) convertView.findViewById(R.id.movie_thumb_icon);
              } else {
                        holder = (ViewHolder) convertView.getTag();

                  }

        ParkCinema movie = movieDataItems.get(position);

        if (movie!=null){

                    String url = movie.poster();

                     if (url!=null) {
                        Bitmap bitmap = fetchBitmapFromCache(url);
                        if (bitmap==null) { 
                            new BitmapDownloaderTask(imageView).execute(url);
                        }
                        else {
                            imageView.setImageBitmap(bitmap);
                        } 
                    } 
        }
        return convertView;
    }

    private LinkedHashMap<String, Bitmap> bitmapCache = new LinkedHashMap<String, Bitmap>();

    private void addBitmapToCache(String url, Bitmap bitmap) {
        if (bitmap != null) {
            synchronized (bitmapCache) {
                bitmapCache.put(url, bitmap);
            }
        }
    }

    private Bitmap fetchBitmapFromCache(String url) {

        synchronized (bitmapCache) {
            final Bitmap bitmap = bitmapCache.get(url);
             if (bitmap != null) {
                return bitmap;
            } 
        }

        return null;

public static class ViewHolder {

        ImageView imageView; 

    }

    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-13T04:47:29.320

I have spent hours trying to figure this one out as well...Thanks to Steven Byle's solution... Here is my solution to something similar when a user selects an item from a list:

```
adapter.setSelectedIndex(position); 
```

then in the custom adapter:

```
public void setSelectedIndex(int ind)
{
    selectedIndex = ind;
    notifyDataSetChanged();
} 
```

and then finally in the getView method of the adapter:

```
if(selectedIndex!= -1 && position == selectedIndex)
         {
             holder.tab.setBackgroundColor(Color.BLACK);
         }
         else{
             holder.tab.setBackgroundColor(Color.DKGRAY);
         } 
```

So in conclusion make sure you assign default values

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-01T07:32:49.897

In my case i used Picasso library instead of AsyncTask for downloading image. [enter link description here](http://square.github.io/picasso/)

Also write if else condition, that is set null to image if url is not available

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-03-14T15:56:03.260

而不是使用 convertview 对象每次都创建一个新视图。

```
View localView = ((LayoutInflater)parentscreen.getSystemService("layout_inflater")).inflate(R.layout.activity_list_row, null); 
```

通过如上充气。

# java - 为什么我的 For 循环中的 IF 语句从不满足它的条件？

> ID：15412771
> 
> 赞同：3
> 
> 时间：2013-03-14T15:01:27.793
> 
> 标签：java

我已经尝试了一切，但我不明白为什么会遇到这个问题。这是我正在使用的代码：

```
 for( int i=0; i< objarray.size();i++)
        {
            //Toast shows values
            Toast.makeText(getApplicationContext(), goingToId+""+objarray.get(i).getid(),Toast.LENGTH_SHORT).show();

            if (goingToId == objarray.get(i).getid())
            {
                //This Toast NEVER shows
                Toast.makeText(getApplicationContext(), "Inside the if statement",Toast.LENGTH_SHORT).show();

                glat = objarray.get(i).getlat();
                glon = objarray.get(i).getlon();
                loc = new Location("dummyprovider");
                loc.setLatitude(glat);
                loc.setLongitude(glon);
            }   
        } 
```

被比较的两个值都是字符串。在for循环中，两个值以toast的形式输出，我可以清楚地看到两者何时是相同的值，但是for循环总是在没有进入IF语句的情况下完成，或者IF语句永远不满足它的条件，但我不不知道为什么。

我一直在 C# 中做这种事情，而且它总是有效，谁能明白为什么这在 Android 中不起作用？我知道在我的帖子中没有太多信息可以继续，但是当我说它们的值在遍历 for 循环时最终匹配时，你可以相信我。任何建议将不胜感激，因为我一无所知。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-14T15:04:21.113

删除 if 语句末尾的分号：

```
 if (goingToId.equals(objarray.get(i).getid())) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-14T15:04:12.677

```
if (goingToId == objarray.get(i).getid()); //<<<< 
```

从 if 条件的末尾删除分号

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T15:04:58.163

**删除分号。**

```
if (goingToId == objarray.get(i).getid()); 
```

当您在语句末尾写分号时，`if`控制不会进入其中，而是进入`if`成为无法访问的代码。

`equals`了解和之间的区别`==`。

== 和 equals() 方法之间的区别。

== 用于比较参考。和 equals 方法检查字符串变量的内容。

例子。

第一个例子

```
String s1 = "FirstString";
String s2 = "FirstString";

if(s1 == s2) {
   //This condition matched true because java don't make separate object for these two string. Both strings point to same reference.
} 
```

第二个例子

```
String s1= "FirstString";
String s2 = new String("FirstString");

if(s1.equals(s2)) {
 //This condition true because same content.
}

if(s1 == s2) {
 //This condition will be false because in this java allocate separate reference for both of them
} 
```

结论：Java 检查字符串是否存在。如果我们使用 new 创建第二个字符串的对象并且具有不同的内容，那么它会创建对象并分配不同的引用，如果我们不使用 new 创建对象并且具有相同的内容，那么它分配与第一个字符串相同的引用包含.

# c# - 使用 MediaCapture 从 CaptureElement 以自定义分辨率拍摄照片

> ID：15412772
> 
> 赞同：10
> 
> 时间：2013-03-14T15:01:34.530
> 
> 标签：c#, image, windows-store-apps

我正在使用 CaptureElement 在我的 Windows 应用商店应用程序中显示相机源。现在我想在用户点击显示屏时将照片捕获为流，我使用下面的代码开始工作。不幸的是，返回的图像只有 640 x 360 的分辨率，但是相机（Surface RT）可以拍摄 1280x800 的图像，我想这样做。

我试过设置

```
 encodingProperties.Height = 800;
        encodingProperties.Width = 1280; 
```

但这没有用。那么如何更改分辨率呢？

```
 private async void captureElement_Tapped(object sender, TappedRoutedEventArgs e)
    {
        var encodingProperties = ImageEncodingProperties.CreateJpeg();
        //encodingProperties.Height = 800;
        //encodingProperties.Width = 1280;
        WriteableBitmap wbmp;

        using (var imageStream = new InMemoryRandomAccessStream())
        {
            await captureMgr.CapturePhotoToStreamAsync(encodingProperties, imageStream);
            await imageStream.FlushAsync();
            imageStream.Seek(0);
            wbmp = await new WriteableBitmap(1, 1).FromStream(imageStream);
        }

        capturedImage.Source = wbmp;
    } 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-14T22:03:50.077

所以我终于弄清楚了如何做到这一点，也摆脱了可怕的“HRESULT：0xC00D36B4”错误，部分归功于这里的代码： [http ://social.msdn.microsoft.com/Forums/en-US/ winappswithcsharp/thread/751b8d83-e646-4ce9-b019-f3c8599e18e0](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/751b8d83-e646-4ce9-b019-f3c8599e18e0)

我做了一些调整，这就是为什么我在这里重新发布我的代码

```
 MediaCapture mediaCapture;
    DeviceInformationCollection devices;

    protected override void OnNavigatedTo(NavigationEventArgs e)
    {
        devices = await DeviceInformation.FindAllAsync(DeviceClass.VideoCapture);
        this.mediaCapture = new MediaCapture();
        if (devices.Count() > 0)
        {
            await this.mediaCapture.InitializeAsync(new MediaCaptureInitializationSettings { VideoDeviceId = devices.ElementAt(1).Id, PhotoCaptureSource = Windows.Media.Capture.PhotoCaptureSource.VideoPreview });
            SetResolution();
        }  
    }

    //This is how you can set your resolution
    public async void SetResolution()
    {
        System.Collections.Generic.IReadOnlyList<IMediaEncodingProperties> res;
        res = this.mediaCapture.VideoDeviceController.GetAvailableMediaStreamProperties(MediaStreamType.VideoPreview);
        uint maxResolution = 0;
        int indexMaxResolution = 0;

        if (res.Count >= 1)
        {
            for (int i = 0; i < res.Count; i++)
            {
                VideoEncodingProperties vp = (VideoEncodingProperties)res[i];

                if (vp.Width > maxResolution)
                {
                    indexMaxResolution = i;
                    maxResolution = vp.Width;
                    Debug.WriteLine("Resolution: " + vp.Width);
                }
            }
            await this.mediaCapture.VideoDeviceController.SetMediaStreamPropertiesAsync(MediaStreamType.VideoPreview, res[indexMaxResolution]);
        }
    } 
```

虽然拍照，但请确保您始终使用 .VideoPreview，而不是 .Photo！

# linux - 哪种双栈服务器方法更好？

> ID：15412776
> 
> 赞同：4
> 
> 时间：2013-03-14T15:01:50.160
> 
> 标签：linux, sockets, network-programming, ipv6, ipv4

在应用程序中实现之前，我为双栈编写了两个服务器程序。

1.  双栈服务器程序，可以接受具有单个 IPv6 接口的 IPv6 和 IPv4 客户端。但是 IPv4 重新用作映射的 IPv6 地址。

2.  具有两个接口的双栈服务器程序正在监听，以便分别处理 IPv6 和 IPv4 客户端，如用于 IPv6 客户端的 IPv6 接口和用于 IPv4 客户端的 IPv4 接口，其中不涉及 IPv4 客户端向服务器请求的 IPv4 映射地址。

两者都工作正常。但是因为我只需要使用一种服务器模型来构建我的服务器应用程序。那么，如果有其他更好的模型，哪一个更可取，甚至建议我。？

*IPv4 映射的 IPv6 地址*是否会在未来产生任何问题。？

谁能帮帮我吗。在此先感谢您的帮助。（在 Linux 2.6.9 环境中工作并使用 C 进行网络编程。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T15:25:16.883

如果您可以使用 IPv6 完成所需的一切，那么我认为选项 1 会容易得多。你的代码会更干净，维护也会更容易。如果您依赖它，您可能希望在代码中将 IPV6_V6ONLY 标志显式设置为 0，以防系统管理员更改默认行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-25T18:36:18.493

第二种方法是最便携的。例如，OpenBSD 不允许在 IPv6 套接字上使用传入的 IPv4 流量，无论`IPV6_ONLY`选项如何。

# php - python / php - 跨语言字符串压缩（使用 gzcompress/urlencode/json）

> ID：15412777
> 
> 赞同：2
> 
> 时间：2013-03-14T15:01:51.393
> 
> 标签：php, python, base64, gzip

我在 Python 2.6 中有一个例程，将大量 html 文本存储在 AWS DynamoDB 数据库中，问题是这些“blob”在进行简单检索时会占用大量空间和计算单元，所以我正在寻找方法将字符串压缩成更轻量级的东西。

我已经对以下内容进行了一些简单的测试，并且它可以工作（大大减少了 DynamoDB 计算单元），但我正在寻找关于这是否是最好的方法的输入。

以下是我用来生成 json 数组的纯文本 gzip 压缩版本的 Python 2.6 代码。json 数组包含几个键，每个键都有一大块 html。

```
import urllib, json
str = urllib.quote(json.dumps({'foo1': 'bar'}).encode('zlib').encode('base64')) 
```

然后使用 php 我可以运行以下命令将字符串返回到其自然数组：

```
json_decode(gzuncompress(base64_decode(urldecode($str))),1); 
```

有没有人有任何提示或者这是实现我的目标的最佳方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T08:34:47.283

您真的需要将数据作为纯字符串存储在数据库中吗？您可以省略 base64 编码并将数据以二进制形式保存到数据库中，以稍微提高代码速度。无论如何，数据已被压缩，因此您无法直接将其可视化。[http://aws.amazon.com/about-aws/whats-new/2012/08/21/dynamodb-announces-binary-data-types/](http://aws.amazon.com/about-aws/whats-new/2012/08/21/dynamodb-announces-binary-data-types/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-31T19:40:19.320

您可以使用 base64 编码

蟒蛇代码：

```
import base64
print(base64.b64encode(b"Hello World").decode()) 
```

PHP代码：

```
base64_decode("your base64 encoded text from the python script") 
```

# phpmyadmin - 上传登录表格

> ID：15412778
> 
> 赞同：0
> 
> 时间：2013-03-14T15:01:51.410
> 
> 标签：phpmyadmin

我在我的计算机上使用**xampp创建了一个登录表单。**我对 php 很陌生，想知道如何将其上传到我的网站。正如我尝试过的那样，它只是说无法连接。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:12:40.610

通过 ftp 协议将文件上传到您的网络空间/服务器。试试filezila

# c++ - 如何使用使用 GetTempFileName() 生成的临时文件作为 createProcess() 的命令行输入

> ID：15412781
> 
> 赞同：0
> 
> 时间：2013-03-14T15:01:57.973
> 
> 标签：c++, c, windows

我需要处理的情况是：

1，我需要生成一个临时文件（路径和名称是使用GetTempFileName（）创建的
。2，使用这个临时文件作为createProcess（）的命令行。

代码如下所示：

```
char * tempFile = GenerateTmpFile ();   // self defined function (call GetTempFileName() to get temp file, return temp file path + name ,  so tempFile looks like c:\temp\x.tmp

char szCmd[1024];
strcpy(szCmd, "child.exe ");
strcat(szCmd, tempFile);   // so example of szCmd is: child.exe c:\temp\x.tmp

CreateProcess(NULL,
              szCmd,
              ...
              ); 
```

但是CreateProcess总是失败，返回错误代码2（2来自GetLastError（），CreateProcess返回0），我认为问题是因为临时文件路径，如果我给

```
szCmd ="child.exe c:\\temp\\x.tmp" 
```

手动，它工作正常。

有谁知道我如何让 CreateProcess 使用从 getTempFileName() 生成的临时文件路径+名称？

更新：我尝试在路径中添加'\'以使'\'成为双反斜杠，因此路径例如是：

```
c:\\temp\\x.tmp 
```

它仍然不起作用。

为什么它与使用字符串文字调用 CreateProcess 不同？

```
 CreateProcess(NULL,
               "child.exe c:\\temp\\x.tmp",
               ...); 
```

# opengl-es-2.0 - 我可以在 OpenGL ES 2.0 中控制绘图图元的 z 顺序吗？

> ID：15412783
> 
> 赞同：0
> 
> 时间：2013-03-14T15:02:04.250
> 
> 标签：opengl-es-2.0, z-order

我还是 OpenGL ES 2.0 的新手，并且已经很好地理解了转换矩阵操作。虽然我在绘制图元时对 z 顺序的相关性有点不清楚。例如，当我使用透视投影矩阵并用它变换四边形的顶点时，它确实会将四边形画得更小（这样它会显得更远）。但是，当我首先以较大的 z 顺序绘制一个四边形，然后以较小的 z 顺序绘制另一个四边形时，第二个四边形仍然出现在第一个四边形的前面。这是 ES 2.0 的预期还是我需要启用其他东西？是否有必要按 z 顺序对四边形进行排序，还是通过启用设置来解决这个问题？

例如，在 (0, 0.5, 0) 处绘制第一个四边形，在 (0, 0.5, -2.0) 处绘制第二个四边形。由于透视变换，第二个看起来更小，但在第一个前面。两个四边形具有相同的顶点。或许我还应该提到，在绘制这些四边形时，我不是在一次调用 glDrawElements() 中执行此操作，而是在循环中调用 glDrawElements()，例如绘制列表的每个模型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T19:43:18.727

除非你基本上是在做一个 2D 应用程序，否则你不想手动排序你的图元，你会想要使用`depth buffer`（*z-buffer*）。有关该主题的 OpenGL ES 1.1 教程在[这里](http://www.zeuscmd.com/tutorials/opengles/11-Depth.php)，这些东西在 ES 2.0 中没有任何不同。

确保在谷歌上获取一些帮助，以获得特定平台上的深度缓冲区设置，iOS/Android/GLUT/等中的颜色/深度缓冲区设置不同。

# reporting-services - 多值数组

> ID：15412785
> 
> 赞同：1
> 
> 时间：2013-03-14T15:02:06.883
> 
> 标签：reporting-services, sql-server-2008-r2

我正在尝试解决我的 sql 导出到表中的多行问题`DataSet1`。

基本上一个字段 ( `SUB_ATTRIBUTE_DESC`) 可以包含多个值。我的唯一标识符值是`UCN`. `FULL_NAME`每个 UCN 也是唯一的。我正在尝试将所有可能的答案组合在以逗号分隔的表格中的同一字段中，因此我将其作为表达式输入到表格的空白列中。

```
=join(LookupSet(Fields!FULL_NAME.Value, Fields!UCN.Value, 
      Fields!SUB_ATTRIBUTE_DESC.Value, "DataSet1"),",") 
```

我的表达式只是返回空白。

```
UCN:FULL_NAME:SUB_ATTRIBUTE_DESC  

1.....:ABC.............:Help  
1.....:ABC.............:Me  
1.....:ABC.............:Please 
```

我想要一个在我的表格中包含“Help,Me,Please”的字段

变成

```
UCN:FULL_NAME:New_Field  

1.....:ABC.............:Help,Me,Please 
```

你能帮我吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T15:12:18.353

尝试这个：

**[小提琴演示](http://sqlfiddle.com/#!3/9deb9/9)**

```
SELECT t1.UCN, t1.FULL_NAME,
       newCol =REPLACE( (SELECT SUB_ATTRIBUTE_DESC AS [data()]
                  FROM mytable t2
                  WHERE t2.UCN = t1.UCN
                  ORDER BY t2.SUB_ATTRIBUTE_DESC 
                  FOR XML PATH('')
            ), ' ', ' : ')
FROM mytable t1
GROUP BY t1.UCN, t1.FULL_NAME ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T16:33:51.347

你的表情如此贴近；问题是你在比较中`FULL_NAME`比较，没有匹配，因此你的结果是空的。`UCN``LookupSet``Join`

使用类似的东西：

```
=Join(LookupSet(Fields!UCN.Value
    , Fields!UCN.Value
    , Fields!SUB_ATTRIBUTE_DESC.Value
    , "DataSet1"), ",") 
```

或者：

```
=Join(LookupSet(Fields!FULL_NAME.Value
    , Fields!FULL_NAME.Value
    , Fields!SUB_ATTRIBUTE_DESC.Value
    , "DataSet1"), " ") 
```

我根据您的数据集对第一个表达式进行了简单的测试，对我有用：

![在此处输入图像描述](../Images/337c96ccdcbc033d45e537e10bea7e60.png)

**评论后编辑：**

您可以引用 Join 数组中的单个元素，并使用它在单独的列中显示这些元素，使用如下表达式：

```
=LookupSet(Fields!UCN.Value
    , Fields!UCN.Value
    , Fields!SUB_ATTRIBUTE_DESC.Value
    , "DataSet1")(0) 
```

将表达式末尾的元素编号更改为`(1)`或`(2)`以获取所需的元素。最终结果：

![在此处输入图像描述](../Images/aca0e61039013e774bda24c8b5de37df.png)

我能想到的几件事：

1.  顺序很重要 - 如果您没有对数据集进行排序，您可能会得到与`Join`和不一致的结果`LookupSet`。在数据库或 Tablix 级别订购。

2.  如果您需要动态列数，不确定这将如何工作，但如果它总是三个（或任何固定数字），您就可以了。

或者，您可以考虑`pivot`在数据库级别执行查询以获得所需的结果。

# typo3 - TYPO3 Flexform：仅在选择和隐藏翻译中显示原始记录

> ID：15412790
> 
> 赞同：2
> 
> 时间：2013-03-14T15:02:23.230
> 
> 标签：typo3

也许这是一个简单的问题。我有这个 flexform 配置来选择 tt_news 项目：

```
<selectNews>
    <TCEforms>
        <label>LLL:fileadmin/setup/locallang_xml/locallang_db.xml:tx_zoatac_pi2.selectNews</label>
        <config>
            <type>group</type>
            <internal_type>db</internal_type>
            <allowed>tt_news</allowed>
            <minitems>0</minitems>
            <maxitems>100</maxitems>
            <size>10</size>
        </config>
    </TCEforms>
</selectNews> 
```

现在我想要选择我只能选择原始项目并且隐藏翻译。所以当我有相同的英语、法语和德语新闻时，我只想看到英文的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:49:57.713

据我所知，在 TCA 或 FlexForm 中都不可能在*组类型字段中添加任何其他 WHERE 语句。*一年前我在[TYPO3 邮件列表](http://lists.typo3.org/pipermail/typo3-english/2012-June/081148.html)中问过类似的问题，但没有得到回应。

但是如果您使用的是 TYPO3 6.0 或更高版本，您可以考虑尝试使用*group*字段类型的**filter**属性。[在此处](http://docs.typo3.org/typo3cms/TCAReference/Reference/Columns/Group/Index.html)阅读更多相关信息。

# android - 动态设置线性布局元素间距android

> ID：15412793
> 
> 赞同：0
> 
> 时间：2013-03-14T15:02:29.930
> 
> 标签：android, android-linearlayout, param

我正在动态创建布局，我正在使用

```
LinearLayout layout = new LinearLayout(this);             
layout.setOrientation(LinearLayout.VERTICAL); 
```

将我的元素放在另一个下方。但是对于我的标题，我使用的是新布局

```
LinearLayout layout_header = new LinearLayout(this);             
layout.setOrientation(LinearLayout.HORIZONTAL); 
```

并将其添加到 LinearLayout 布局的视图中。但是在 LinearLayout layout_header 中，我有两个按钮，我希望其中一个在左侧，另一个在右侧。但两者都是并排的，我试图包括填充/边距但没有奏效。

我还为两个按钮创建了一个布局参数，并尝试单独添加边距/重力/填充，但仍然没有用。

请帮助如何将这些按钮放置在两个单独的角落。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:06:13.777

如果你想要最左边的东西和最右边的东西，使用相对布局更容易。只做第一个`android:layout_alignParentRight="true"`和另一个`android:layout_alignParentLeft="true"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T15:10:52.430

我会推荐 Gabe 的答案，因为这正是`RelativeLayout`s 的用途。但是，如果您出于某种原因想保留它`LinearLayout`，可以在两个s`View` *之间*`Button`放置一个不可见的：

```
<Button
    ... />
<View
    android:layout_width="0dp"
    android:layout_height="match_parent"
    android:layout_weight="1" />
<Button
    ... /> 
```

该`layout_weight`属性指定它应该占用剩余的空间。请务必使用`0dp`宽度，这样就不会干扰。

# html - 当为 :focus 和 :hover 定义转换时，CSS3 转换无法在 :focus 上工作

> ID：15412795
> 
> 赞同：0
> 
> 时间：2013-03-14T15:02:31.553
> 
> 标签：html, css

下面给出的是[alistapart 文章](http://alistapart.com/article/understanding-css3-transitions)的片段。但是“焦点”（点击）的转换似乎不适用于 Chrome（25.0.1364.172）和 Firefox（19.0.2）。但适用于 Opera(12.14)（在 Linux 上）。

知道为什么吗？

```
<!DOCTYPE HTML>
<html>
<head>
<style type="text/css">
a.foo {
  padding: 5px 10px;
  background: #9c3;
  -webkit-transition: background 0.3s ease;
  -moz-transition: background 0.3s ease;
  -o-transition: background 0.3s ease;
  transition: background 0.3s ease;
}
a.foo:hover,
a.foo:focus {
  background: #690;
}
</style>
</head>
<body>
<a href="#" class="foo">Transition me!
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T10:26:44.157

不知道为什么它不能在 Chrome 上运行，但可以尝试使用“onclick”事件而不是伪类。像下面这样的东西应该会给你在 Chrome 和其他人上同样的效果。

此外，建议使用“onclick”和类似事件而不是伪类。

[http://jsfiddle.net/RFauS/](http://jsfiddle.net/RFauS/)

```
<!DOCTYPE HTML>
<html>
<head>
<style type="text/css">
a.foo {
  padding: 5px 10px;
  background: #9c3;
  -webkit-transition: background 0.3s ease;
  -moz-transition: background 0.3s ease;
  -o-transition: background 0.3s ease;
  transition: background 0.3s ease;
}

a.foo_clicked {
  padding: 5px 10px;
  background: #690;
  -webkit-transition: background 0.3s ease;
  -moz-transition: background 0.3s ease;
  -o-transition: background 0.3s ease;
  transition: background 0.3s ease;
}

a.foo:hover
{  background: #690;
}
</style>
</head>
<body>
<a href="#" class="foo" onclick="this.className='foo_clicked';" tabindex="0" onBlur="this.className='foo';" >Transition me!</a>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T15:03:57.353

请检查[此页面](http://www.w3schools.com/cssref/css3_browsersupport.asp)，尤其是[此页面](http://www.w3schools.com/cssref/css3_pr_transition.asp)的兼容性。从 chrome 26.0、firefox 16 和 opera 12.10 过渡到 CSS 是可以的

# c++ - 保护游戏免受内存扫描仪（如作弊引擎）的影响

> ID：15412796
> 
> 赞同：6
> 
> 时间：2013-03-14T15:02:33.263
> 
> 标签：c++, security, memory

我正在制作一个 C++11 游戏，其中分数被发送到服务器。我将分数存储为一个简单的浮点数，因此使用[作弊引擎](http://en.wikipedia.org/wiki/Cheat_Engine)等软件的人可以在将分数发送到服务器之前轻松更改分数的值。

如何保护我的游戏免受此类攻击？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-14T15:08:35.820

您可以做很多选择，但最好的是不要接受来自客户的任何重要价值观。让服务器完成所有计算，然后将值发送给客户端。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T15:10:50.707

如果您必须首先在客户端执行任何操作，请加密您关心的任何数据（或所有数据，如果可能）。

让服务器计算任何重要的东西可能会更好。例如，在《使命召唤》中，您希望服务器决定谁被击中，以便个别玩家的计算机/延迟/等。不参与。

如果您正在做一个仅限本地 PC 的游戏并且只想在最后上传分数，那么服务器计算不是一个选项。在这种情况下，您确实必须首先坚持加密并混淆重要值。你能做的只有这么多；如果它是 100% 客户端计算的，它可能永远不会是防弹的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-14T15:11:53.973

您确实无法确保该值未被篡改。你可以做的是向服务器发送足够的信息，它可以确定“这可能吗”——例如，如果你的游戏是“吃豆人”风格的游戏，你还可以提供吃豆人的所有“Blob”——人吃了，或者每个级别的数量以及完成每个级别所花费的时间等。作弊者可以复制所有需要的额外数据并非不可能，但是如果您要发送更多数据，则这样做会变得更加困难.

但是您的软件中随时可用的任何数据都可能会被“调试器”类型的应用程序修改。你对此无能为力。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-04-15T17:14:13.487

总会有办法绕过您的保护。不管它有多好。但是，你可以**让它变得更难**。有一个例子：[https](https://github.com/jgk2Th/anti-wpm) ://github.com/jgk2Th/anti-wpm 。

基本上，重点是创建两个具有相同值的变量，并将其中一个变量移动到 RAM 中的不同位置（简单地说），以使其更难找到。然后，比较差异值。

这是该想法的简化代码。

```
int VariableToProtect = 0;
int pVar[ 1000 ] = { 0 };
int Pos = 0; // 'pseudo-position' of the element (with same value as VariableToProtect) in pVar

while( !GetAsyncKeyState( VK_SPACE ) )
{
    if( pVar[ Pos ] != VariableToProtect )
        printf( "detected!" );

    ++VariableToProtect;

    Pos = rand( ) % 1000;
    pVar[ Pos ] = VariableToProtect;

    Sleep( 10 );
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-01-14T07:35:34.170

如果它是大型多人游戏，那么理论上，您可以使用某种算法，让服务器从随机用户组请求特定问题的答案。作弊者将得到不同的答案，而无需重大勾结。

如果在像《使命召唤》这样的游戏中，你可能有 30 名玩家，并且如果发生杀戮，则需要超级多数同意。这样一来，任何一个团队都无法通过勾结的方式作弊。您仍然需要注意用于攀登排行榜的备用帐户。

# mysql - 在连接时选择值等于某个值的记录，但当它不等于时？

> ID：15412797
> 
> 赞同：0
> 
> 时间：2013-03-14T15:02:33.673
> 
> 标签：mysql, database, join

我正在尝试从 2 个表中选择记录，并由`unique_id`MySQL 中的一列连接。

表`profile`包含每个玩家 1 个唯一条目。

表`player_current_life`包含每个玩家的许多条目，所有条目都`player_current_life.is_dead = 1`可能包含 1 个条目`player_current_life.is_dead = 0`。

如果玩家在创建新角色之前被杀并离开游戏，他们将不会拥有`player_current_life.is_dead = 0`. 他们的所有记录都将是`player_current_life.is_dead = 1`.

我想：在 `profile.total_player_kills + player_current_life.player_kills`哪里`player_current_life.is_dead = '0'`

但

如果`player_current_life.is_dead = 0`该用户在循环中不存在，则仅 pull `profile.total_player_kills`。

这将循环表中的所有玩家并显示他们过去生命中的总击杀数 (profile.total_player_kills)，但如果他们有一个未死的角色 (player_current_life.is_dead = 0)，则同时拉取他们当前的生命击杀数。

到目前为止，我所拥有的只有在他们有一个在游戏中还活着的角色时才有效。

```
SELECT sum(profile.total_player_kills + player_current_life.player_kills) AS All_Player_Kills, profile.name AS Player_Name
FROM
  profile
LEFT OUTER JOIN player_current_life
ON profile.unique_id = player_current_life.unique_id AND player_current_life.is_dead = '0'
WHERE
  profile.total_play_time + player_current_life.play_time >= 10
GROUP BY
  profile.name 
```

因此，简而言之，如果他们有一个还活着的角色，则从`profile`AND中提取总击杀`player_current_life`数，如果他们没有，则仅从 中提取击杀数`profile`。

这是我制作的可视化表格，以更好地解释我要完成的工作。

```
profile (only increases when the player dies)
+-------------+-----------+--------------+
| Player_Name | unique_id | player_kills |
+-------------+-----------+--------------+
| Player1     | 12345     | 25           |
+-------------+-----------+--------------+ 
| Player2     | 67890     + 12           |
+-------------+-----------+--------------+
| Player3     | 54321     + 9            |
+-------------+-----------+--------------+

player_current_life (contains kill count not sent to "profile" where is_dead = 0)
+-------------+--------------+-----------+
| unique_id   | player_kills | is_dead   |
+-------------+--------------+-----------+
| 12345       | 8            | 0         |
+-------------+--------------+-----------+
| 12345       | 15           | 1         |
+-------------+--------------+-----------+
| 12345       | 10           | 1         |
+-------------+--------------+-----------+
| 67890       + 7            | 1         |
+-------------+--------------+-----------+
| 67890       + 5            | 1         |
+-------------+--------------+-----------+
| 54321       + 2            | 1         |
+-------------+--------------+-----------+
| 54321       + 7            | 1         |
+-------------+--------------+-----------+
| 54321       + 5            | 0         |
+-------------+--------------+-----------+ 
```

输出应该是：

玩家 1 击杀数 = 33 (25 + 8)

Player2 击杀数 = 12 (12 + 0)

Player3 击杀数 = 14 (9 + 5)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:12:25.427

您可以在 SELECT 子句中使用[if() 语句](http://dev.mysql.com/doc/refman/5.5/en/control-flow-functions.html#function_if)

```
SELECT sum(profile.total_player_kills + IF(player_current_life.is_dead = '0', player_current_life.player_kills, 0)) AS All_Player_Kills, profile.name AS Player_Name
FROM
  profile
LEFT OUTER JOIN player_current_life
ON profile.unique_id = player_current_life.unique_id 
WHERE
  profile.total_play_time + player_current_life.play_time >= 10
GROUP BY
  profile.name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T15:13:22.830

这不是很好的做法，但如果`is_dead`活着的玩家为零，死去的玩家总是 1，那么`(1-is_dead)`温暖的玩家将是 1，死者的玩家将是 0。

然后你可以做类似的事情

```
SELECT (profile.total_player_kills
    + SUM((1-is_dead) * player_kills)) AS All_Player_Kills,
    profile.name AS Player_Name
FROM
  profile
LEFT OUTER JOIN player_current_life
    ON profile.unique_id = player_current_life.unique_id
WHERE
    profile.total_play_time + player_current_life.play_time >= 10
GROUP BY
    profile.name 
```

死人的`player_kills`乘以0，因此被有效地忽略了。

更好的方法是

```
SELECT (profile.total_player_kills
    + SUM( CASE WHEN is_dead = 0 THEN player_kills ELSE 0 END) AS ... 
```

那更健壮，可以更容易地适应`is_dead`布尔类型。

更好的是我会选择一个子选择：

```
SELECT profile.total_player_kills + this_life.total_player_kills AS ...

FROM profile
LEFT OUTER JOIN

    ( SELECT unique_id, SUM(CASE WHEN is_dead = '0' THEN player_kills ELSE 0 END)
      AS total_player_kills
    FROM player_current_life
    GROUP BY unique_id ) AS this_life

ON (profile.unique_id = this_life.unique_id)
WHERE ... 
```

上面的版本有一个你可以查看的[SQLFiddle 。](http://www.sqlfiddle.com/#!2/e1d5a/1)

**注意**：我相信您的这段代码可能无法正常工作：

```
SELECT sum(profile.total_player_kills + ... 
```

因为对于当前生命表中的每个元组，总玩家击杀数都会添加一次，而不是每个玩家一次。

# maven - 如何在 maven 项目中选择要导入的正确包？

> ID：15412798
> 
> 赞同：0
> 
> 时间：2013-03-14T15:02:36.843
> 
> 标签：maven, intellij-idea, ejb, ejb-3.0, maven-3

我正在使用 IntelliJ IDea 12 Ultimate，并且创建了一个 Maven 项目。然后我创建了一个类，并尝试向它添加 @Entity 注释。现在，intellij idea 开始要求我将一些远程依赖项导入 pom.xml，而不是让我像处理非 maven 项目那样选择本地包。我怎么知道该选择哪个包？例如，当我有一个非 maven 项目时，我选择使用 javax.persistence 包，并且 ide 根据底层 JDK 添加了正确的导入。现在，如果我去[http://mvnrepository.com/](http://mvnrepository.com/)并搜索 javax.persistence 我会得到这个页面（[http://mvnrepository.com/artifact/javax.persistence/persistence-api](http://mvnrepository.com/artifact/javax.persistence/persistence-api)) 我有四种不同的东西可供选择（1.0-rev-1、1.0.2、1.0、1.0b）。我如何知道我的 JDK 使用哪个版本，以便选择正确的 maven 依赖项？谢谢你。

PS：这是 IntelliJ 在我搜索工件 id 时选择的（似乎它只选择了最新版本，独立于打包程序）：

```
<dependency>
          <groupId>org.hibernate.javax.persistence</groupId>
          <artifactId>hibernate-jpa-2.0-api</artifactId>
          <version>1.0.1.Final</version>
</dependency> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:19:28.340

如果你的项目需要外部依赖，说明你的 JDK 中没有包含它们，所以当你问*我的 JDK 使用的是哪个版本*时，其实并没有什么关系。我会说“最新的就是最好的”:)

如果您想使用 JPA 2，请参阅此线程：[在哪里可以找到 JPA2 Maven 依赖项？](https://stackoverflow.com/questions/6836772/where-can-i-find-a-jpa2-maven-dependency)

您将需要`javax.persistence`另一个依赖项来实现 JPA（Hibernate、toplink、OpenJPA 等）

# java - 自动售货机程序

> ID：15412799
> 
> 赞同：0
> 
> 时间：2013-03-14T15:02:38.037
> 
> 标签：java, if-statement

我必须创建一个简单的自动售货机程序，如果用户输入 2 个令牌，他们会得到 1 个。我的代码有点问题 - 如果我输入 1 个令牌并输入“Y”，我会收到“谢谢享受您的饮料”的消息，而它确实应该出现错误。

```
import java.util.Scanner;
/**
 * Vending Machine
 * 
 * @author - 
 * @version 1.0
 */

public class VendingMachine
{

int cans = 10;
int token = 20;

public void fillUp (int cans)
{
    if(cans <= 0)
    {
        cans = cans+=10;            
    }

}

public void tokenIn (int token)
{
    Scanner scan = new Scanner (System.in);
    System.out.println("Do you want something to drink? (Y/N)");

    boolean tokenIN = false;
    if(scan.next().equals("Y"))
    {
        tokenIN = true;
    }
    else
    {
        tokenIN = false;
    } 

    if(tokenIN = true && token >= 2 && cans >=1)
    {
        cans--;
        token-=2;
        System.out.println("Thanks, enjoy your drink!");    
    }
    else
    {
        System.out.println("Goodbye");
    }

}

public void getTokenCount (int token)
{
    System.out.println(token);
}

public void getCansCount (int cans)
{
    System.out.println(cans); 
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T15:05:46.197

我看到的一个问题是在以下行：

```
if(tokenIN = true && token >= 2 && cans >=1) 
```

您正在使用赋值运算符 ( `=`)，而您应该使用相等运算符 ( `==`)。当您的参数是布尔值时，您根本不需要运算符。 `if (tokenIN)`将评估与 相同`if(tokenIN == true)`，因此该行可以缩短为：

```
if(tokenIN && token >= 2 && cans >= 1) 
```

**注意：**由于赋值和运算符的短路逻辑，原始语句`if(tokenIN = true && ...`将*始终*计算为。`true``true``&&`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T15:10:50.133

问题本身：

```
if(tokenIN = true && token >= 2 && cans >=1) 
```

应该：

```
if(tokenIN == true && token >= 2 && cans >=1) 
```

如果你想做一个等于运算符。由于 tokenIN 已经是一个布尔值，你可以这样做：

```
if(tokenIN && token >= 2 && cans >=1) 
```

对您的代码的其他一些建议：

替换： `cans = cans+=10;`与`cans += 10;`

做equals之类的操作时，最好总是把常量放在前面，防止出现异常。替换`scan.next().equals("Y")`为`"Y".equals(scan.next())`

您可以将 if\else 替换为：

```
tokenIN = "Y".equals(scan.next()); 
```

由于 equals 已经计算为布尔值。

# visual-studio - 安装设置出错

> ID：15412801
> 
> 赞同：0
> 
> 时间：2013-03-14T15:02:41.810
> 
> 标签：visual-studio, installshield

我在 Visual Studio 2012 中使用 install shield 制作了安装程序文件，它在我的笔记本电脑上运行良好。当我尝试在其他电脑上安装它时，它显示此错误。

```
 Error 1309: Error read from file,then path of my installer 
 verify that file exist and you can access it 
```

需要什么工具吗？我安装了.net 4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-05T17:46:33.100

如果将安装程序 .zip/.msi 文件放置在导致其中包含的文件的路径超过 Windows 260 个字符的限制的文件夹中，则可能会导致此问题。

如果超过 Windows 字符限制，安装过程中文件名将被截断，因此安装程序无法找到它们。

解决方案可能是尝试使用另一条路径，例如“C:\Temp”。

# drupal - 使用令牌在 url fron 节点中传递 id 以查看（使用 viewfield）

> ID：15412802
> 
> 赞同：0
> 
> 时间：2013-03-14T15:02:42.643
> 
> 标签：drupal, drupal-7, drupal-modules, drupal-views

我有一个从 url 获取 termId 并显示附加到该 termId 的用户的页面（例如）： www.example.com/my-view/122 向我显示包含 termId 122 的所有用户

默认情况下，如果我没有指定任何术语，此页面会显示所有用户。(www.example.com/my-view)

现在我把这个页面（我的视图）放在一个节点中，这要归功于 viewfield 模块，我想将参数传递给节点中包含的视图（术语 122），所以我希望我必须按照指定使用 TOKENS 但我'不能正确使用它们。

事实上，当我在节点中包含页面 (my-view) 时，当我没有提供任何条款时，我会看到默认视图。一旦我尝试使用令牌，什么都不会出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T04:49:58.050

我不知道将令牌值作为视场的参数传递，但您当然可以使用上下文过滤器：

添加内容：在视图中有分类术语 ID 上下文过滤器（在高级下），当过滤器值不可用时，选择“提供默认值”并从 URL 中选择分类术语 ID。这应该在可用时将术语 ID 添加为参数。

或者

在 node.tpl.php 模板中使用：

```
<?php print views_embed_view('view_name', 'default', $arg); ?> 
```

只需获取术语 id 并将其作为参数传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T09:34:57.630

我认为您不必使用令牌：当您使用上下文过滤器时，您可以提供默认值（在您的情况下来自 URL 的值）。

然后你可以通过他的ID以therm ID作为后缀来访问容器节点，以避免404错误。

Normaly它应该工作！

# sql-server - 如何使用打印语句调试存储过程？

> ID：15412804
> 
> 赞同：50
> 
> 时间：2013-03-14T15:02:46.250
> 
> 标签：sql-server, tsql, stored-procedures

我正在尝试在 SQL Server Management Studio 2008 中调试存储过程。我想插入一些打印语句来测试一些我知道是错误的 IF 语句。

为了进行调试，我尝试使用该`PRINT '5'`命令。

我尝试使用`RAISERROR`like `'RAISERROR (N'Start',10,1) WITH NOWAIT'`。

但是这些没有显示任何打印输出，只有结果集。消息只是说`1 row affected`。

我试图这样编写代码（也许这是一种不正确的方法）：

```
SET NOCOUNT ON         
RAISERROR (N'Start',10,1) WITH NOWAIT    
DECLARE @DocHandle INT        
DECLARE @PageSize INT, @PageIndex INT, @TOTL_CONT NUMERIC(5,0), @Paging BIT        
DECLARE @Type INT, @Search varchar(20) , @ORDE nVARCHAR(50), @SORT_ID nVARCHAR(50) 
DECLARE @CreatedOn varchar(25), @SystemGenerate bit 
```

使用打印语句调试存储过程的最佳方法是什么？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-03-14T15:19:20.433

如果您使用的是 Microsoft SQL Server Management Studio (SSMS)，打印语句将在“消息”选项卡下打印出来，而不是在“结果”选项卡下。

[![在此处输入图像描述](../Images/a13ee6aee07ce85bcdc154e31b371a1f.png)](https://i.stack.imgur.com/LqrGm.png)

打印语句将出现在那里。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2015-05-28T20:02:06.690

这是打印语句使用的示例。他们应该像以前的人所指出的那样出现在消息选项卡下。

```
Declare @TestVar int = 5;

print 'this is a test message';
print @TestVar;
print 'test-' + Convert(varchar(50), @TestVar); 
```

![打印信息](../Images/4dd4b701a13b8bb4f7332d108430f066.png)

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2016-06-01T21:45:18.060

在我得到我重申的答案之前；我承认我在这里接受的唯一答案是[KM](https://stackoverflow.com/a/15413714/603807)[的](https://stackoverflow.com/users/65223/km)这个答案。以上。我对其他答案投了反对票，因为他们都没有真正回答所提出的问题，或者他们不够充分。PRINT 输出确实显示在消息窗口中，但这根本不是所要求的。

**为什么在我的存储过程执行期间不显示 PRINT 语句输出？**
这个答案的简短版本是您将存储过程的执行发送到 SQL 服务器，并且在完成整个事务之前它不会响应。这是位于[此外部链接](https://bytes.com/topic/sql-server/answers/82638-print-only-takes-effect-after-t-sql-completion)的更好答案。

*   如需更多意见/观察，请将您的注意力集中在此 SO 帖子[上](https://stackoverflow.com/questions/268384/print-statement-in-t-sql)。
*   具体看Phil_factor同一篇文章的这个[答案](https://stackoverflow.com/a/269983/603807)（哈哈！喜欢SQL幽默）
*   关于使用 RAISERROR WITH NOWAIT 的建议，请查看[JimCarden](https://stackoverflow.com/users/352896/jimcarden)对同一篇文章的[回答](https://stackoverflow.com/a/2928995/603807)

**不要做这些事**

1.  有些人的印象是他们可以在 PRINT 语句之后使用 GO 语句，但不能在 sproc 的内部使用 GO 语句。所以这个解决方案就出来了。
2.  我不建议选择你的打印语句，因为它只会用废话混淆你的结果集，如果你的 sproc 应该被程序稍后使用，那么你必须知道循环时要跳过哪些结果集通过数据阅读器的结果。这只是一个坏主意，所以不要这样做。
3.  SELECT-ING 打印语句的另一个问题是它们并不总是立即出现。对于不同的执行，我有不同的经验，所以不要期望与这种方法有任何一致性。

**在存储过程中替代 PRINT**
实际上，在我看来，这是一种令人讨厌的解决方法，因为语法在使用它的上下文中令人困惑，但谁知道它可能会在未来被 Microsoft 更新。我只是不喜欢仅出于打印调试信息的目的而引发错误的想法......

似乎解决此问题的唯一方法是使用，正如已经多次解释的那样，RAISERROR WITH NOWAIT。我提供了一个示例并指出了这种方法的一个小问题：

```
ALTER
--CREATE 
    PROCEDURE [dbo].[PrintVsRaiseErrorSprocExample]
AS
BEGIN
    SET NOCOUNT ON;

    -- This will print immediately
    RAISERROR ('RE Start', 0, 1) WITH NOWAIT
    SELECT 1;

    -- Five second delay to simulate lengthy execution
    WAITFOR DELAY '00:00:05'

    -- This will print after the five second delay
    RAISERROR ('RE End', 0, 1) WITH NOWAIT
    SELECT 2;
END

GO

EXEC [dbo].[PrintVsRaiseErrorSprocExample] 
```

两个 SELECT 语句的结果只会在执行完成后显示，*打印*语句将按上面显示的顺序显示。

**这种方法的潜在问题**
假设您有一个接一个的 PRINT 语句和 RAISERROR 语句，然后它们都打印。我确信这与缓冲有关，但请注意这可能会发生。

```
ALTER
--CREATE 
    PROCEDURE [dbo].[PrintVsRaiseErrorSprocExample2]
AS
BEGIN
    SET NOCOUNT ON;

    -- Both the PRINT and RAISERROR statements will show
    PRINT 'P Start';
    RAISERROR ('RE Start', 0, 1) WITH NOWAIT
    SELECT 1;

    WAITFOR DELAY '00:00:05'

    -- Both the PRINT and RAISERROR statements will show
    PRINT 'P End'
    RAISERROR ('RE End', 0, 1) WITH NOWAIT
    SELECT 2;
END

GO

EXEC [dbo].[PrintVsRaiseErrorSprocExample2] 
```

因此，这里的工作是，不要同时使用 PRINT 和 RAISERROR，只选择一个而不是另一个。如果您希望在存储过程执行期间显示输出，请使用 RAISERROR WITH NOWAIT。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2013-03-14T15:40:36.213

尝试使用：

```
RAISERROR('your message here!!!',0,1) WITH NOWAIT 
```

您也可以尝试切换到“结果到文本”，这只是默认工具栏上“执行”右侧的几个图标。

上述两项都已到位，如果您仍然看不到消息，请确保您正在运行与您正在编辑的过程相同的服务器/数据库/所有者版本。确保您正在点击 RAISERROR 命令，使其成为过程中的第一个命令。

如果一切都失败了，您可以创建一个表：

```
create table temp_log (RowID int identity(1,1) primary key not null
                      , MessageValue varchar(255)) 
```

然后：

```
INSERT INTO temp_log VALUES ('Your message here') 
```

然后在运行过程之后（提供没有回滚），只是`select`表。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-07T13:45:12.023

查看 MSDN 文档中的这个 Howto：[运行 Transact-SQL 调试器](https://msdn.microsoft.com/en-us/library/ff878060.aspx "这个 MSDN Howto 向您展示了如何使用 Transact-SQL 调试器")- 它**不是**使用 PRINT 语句，但它可能有助于您调试代码。

此 YouTube 视频：[SQL Server 2008 T-SQL 调试器](https://www.youtube.com/watch?v=618LE_FZCxI "YouTube 视频")展示了调试器的使用。

=> 存储过程是用[Transact-SQL](https://msdn.microsoft.com/en-us/library/bb510741.aspx "MSDN 中的 Transact-SQL 参考")编写的。这允许您调试所有 Transact-SQL 代码，因此它就像在 Visual Studio 中通过定义断点和观察变量进行调试一样。

*   [请参阅：调试 T-SQL 代码：调用](https://i.stack.imgur.com/Sq5k9.png)
*   [请参阅：调试 T-SQL 代码：监视变量](https://i.stack.imgur.com/v6C4V.png)

# iphone - NSMutableArray 具有相同的引用

> ID：15412807
> 
> 赞同：1
> 
> 时间：2013-03-14T15:03:00.343
> 
> 标签：iphone, ios, objective-c

使用 NSMutableArray 遇到问题。遇到将空 mutableArrays 添加到 NSMutableArray 的要求。当我删除最后一个数组时，之前添加的所有数组也会从父数组中删除。代码在这里，

```
NSMutableArray *collections = [[NSMutableArray alloc] init];

NSMutableArray *bookSet1 = [[NSMutableArray alloc] init];
[collections addObject:bookSet1];

NSMutableArray *bookSet2 = [[NSMutableArray alloc] init];
[collections addObject:bookSet2];

NSLog(@"bookSet1==bookSet2 %d", bookSet1==bookSet2);

[collections removeObject:bookSet2];

NSLog(@"Collections count==%d", [collections count]); 
```

结果

> ArrayTest[2356:c07] bookSet1==bookSet2 0 ArrayTest[2356:c07] 集合计数==0

检查它们是否具有相同的引用，但 equals 方法返回 false，因此它们肯定没有指向相同的内存位置。不知道为什么会有这样的行为。任何可能的解决方案来克服这一点。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-14T15:10:13.087

> 检查它们是否具有相同的引用但equals方法返回false

不。您没有使用`isEqual`. 如果你使用过`isEqual:`，你会得到`1`（即，`YES`）。

`NSMutableArray`（以及所有基本的 Cocoa 集合类）用于`isEqual:`确定两个对象是否相同。*这个方法可以被覆盖，如果它们的内容*在概念上被认为是相同的，它通常用于使对象比较相等，而不仅仅是它们的内存地址相同（如果后者是真的，我们不能比较字符串或任何类似的对象安全，例如）。

您无法真正克服这一点，**因为****这**是`removeObject:`. 如果由于某种原因不能使用它，您始终可以使用该`removeObjectIdenticalTo:`方法，该方法使用内存地址进行比较（[此处的文档](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/Reference/Reference.html#//apple_ref/doc/uid/20000138-BABDDBAG)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T15:48:43.263

1.  `removeObject:` **匹配是根据对象对 isEqual: 消息的响应来确定的。**即，如果对象的内容相同，则认为对象相同。

2.  `removeObjectIdenticalTo:` **匹配是使用对象地址确定的。**即，如果对象地址相同，则认为对象相同。

尝试

```
[collections removeObjectIdenticalTo:bookSet2]; 
```

这将根据地址删除您要删除的确切对象。

# java - 如何在 if 语句中使用这个布尔值？

> ID：15412808
> 
> 赞同：10
> 
> 时间：2013-03-14T15:03:03.510
> 
> 标签：java, if-statement, boolean

```
private String getWhoozitYs(){
    StringBuffer sb = new StringBuffer();
    boolean stop = generator.nextBoolean();
    if(stop = true)
    {
        sb.append("y");
        getWhoozitYs();
    }
    return sb.toString();
} 
```

这是我在编程课程中正在做的一个项目的一段代码。我遇到的问题是，在声明布尔停止并尝试为其分配一个随机生成的布尔值之后，我无法在 if 语句中使用它来确定是否应该将更多的 y 附加到 StringBuffer 中。我在构造函数中确实有 Random 生成器，所以这部分不是问题。我假设因为我在 if 语句之外声明了布尔值，所以我可以在内部使用它，但似乎并非如此。真正的问题是如何在 if 语句中使用随机确定的布尔值。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-14T15:03:59.157

`if(stop = true)`应该是`if(stop == true)`，或者只是（更好！）`if(stop)`。

这实际上是一个很好的机会来了解为什么总是使用`if(something)`如果你想看看它是否`true`而不是写作`if(something == true)`（糟糕的风格！）。

通过这样做`stop = true`，您将分配`true`给`stop`而不是进行比较。

**那么为什么`if`执行语句下面的代码呢？**

参见[JLS - 15.26。赋值运算符](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.26)：

> 在运行时，赋值表达式的结果是赋值发生后变量的值。赋值表达式的结果本身不是变量。

所以因为你写了`stop = true`，那么你就满足了`if`条件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-14T15:04:44.660

这里的问题是

if`(stop = true)`是分配而不是比较。

尝试`if (stop == true)`

另请查看[Java 程序员犯的十大错误](http://www.javacoffeebreak.com/articles/toptenerrors.html)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-14T15:15:23.030

实际上，如果您只需要使用 StringBuffer 的一个实例，而不是在每个递归调用中创建一个实例，那么整个方法会更简洁......我会选择：

```
private String getWhoozitYs(){
     StringBuffer sb = new StringBuffer();
     while (generator.nextBoolean()) {
         sb.append("y");
     }

     return sb.toString();
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-14T15:04:49.143

```
if(stop == true) 
```

或者

```
if(stop) 
```

= 用于分配。

== 用于检查条件。

```
if(stop = true) 
```

它将分配 true 以停止并评估 if(true)。所以它总是会执行 if 里面的代码，因为 stop 总是被赋值为 true。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-14T15:04:42.660

由于`stop`是布尔值，您可以将该部分更改为：

```
//...
if(stop) // Or to: if (stop == true)
{
   sb.append("y");
   getWhoozitYs();
}
return sb.toString();
//... 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-14T15:05:03.877

尝试这个：-

```
private String getWhoozitYs(){
    StringBuffer sb = new StringBuffer();
    boolean stop = generator.nextBoolean();
    if(stop)
    {
        sb.append("y");
        getWhoozitYs();
    }
    return sb.toString();
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-14T15:05:56.420

= 用于分配

写

```
if(stop){
   //your code
} 
```

或者

```
if(stop == true){
   //your code
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-03-14T15:06:05.903

另外你可以写

```
if(stop)
{
        sb.append("y");
        getWhoozitYs();
} 
```

# python - 使用python将大文件下载到谷歌云存储

> ID：15412810
> 
> 赞同：1
> 
> 时间：2013-03-14T15:03:12.223
> 
> 标签：python, google-app-engine, urllib2, google-cloud-storage

我正在编写一个 python GAE 程序。我想做的是使用 HTTP 协议下载文件并将其写入谷歌云存储。

但是如果我请求的文件很大（大于 1Mb），

```
url = urllib2.urlopen(link) 
```

不会工作。

它总是抛出一个 ResponseTooLargeError

这篇文章解释了为什么显示此错误：

[https://groups.google.com/forum/?fromgroups=#!topic/google-appengine/QEm-19vdcU4](https://groups.google.com/forum/?fromgroups=#!topic/google-appengine/QEm-19vdcU4)

但是它并没有解决我的问题，即将一个大文件下载到云存储中。

谁能帮我？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T18:15:37.527

[URL Fetch](https://developers.google.com/appengine/docs/python/urlfetch/overview)的每个响应的限制为32MB。请参阅 Python GAE SDK 的[配额和限制](https://developers.google.com/appengine/docs/python/urlfetch/overview#Quotas_and_Limits)部分。使用 App Engine，您将无法在一个请求中从大于该大小的 URL 复制任何内容。现在，您可以使用 GCS 或 Blobstore 将更大的内容直接从本地文件存储上传到 GAE，但不能从 URL 复制。

# vba - 在 vba 宏运行时，word addin 暂时禁用应用程序事件

> ID：15412813
> 
> 赞同：3
> 
> 时间：2013-03-14T15:03:18.537
> 
> 标签：vba, ms-word, vsto, add-in

我有一个使用 Visual Studio 2010 创建的 Office 2007 Word 插件，代码如下所示：

```
Public Class ThisAddIn
    Private Sub Application_DocumentChange() Handles Application.DocumentChange
        If Application.Documents.Count > 0 Then
            MsgBox("document change event.")
        End If
    End Sub
    Private Sub Application_DocumentOpen(Doc As Microsoft.Office.Interop.Word.Document) Handles Application.DocumentOpen
        MsgBox("document open event.")
    End Sub
End Class 
```

我们的 Word VBA 模板 (.dotm) 很少，其中的宏可以以编程方式打开或关闭文档。

如果 VBA 模板中的宏正在运行，我正在寻找一种不执行这些事件的方法。

如果我们在 VBA 中创建这个插件，我们将创建一个全局布尔变量，并在宏运行时切换它。根据全局布尔变量值，我们将跳过这些文档事件。如何在 Word 插件中实现相同的功能。

我们正在寻找 .net 支持，因此我们正在转向 .net。

# c# - 带有 DataTemplateSelector 的 WPF ListView：PropertyChanged 始终将焦点设置为 ListView

> ID：15412816
> 
> 赞同：1
> 
> 时间：2013-03-14T15:03:29.913
> 
> 标签：c#, wpf, listview, focus, propertychanged

我对这个问题感到非常沮丧，但也许它真的很微不足道，我只是看不出问题出在哪里。情况如下： 我有一个绑定到 ItemsSource 的 ListView。根据类型，DataTemplateSelector 决定使用哪个模板。

如果我通过控件（文本框）选项卡一切正常。只要我在文本框中输入一个值，然后从文本框属性中跳出标签，就会调用此属性的更改。我的控件得到更新。一切正常，但问题来了：当控件更新时，焦点不会移动到下一个制表位，而是跳转到 ListView。我该如何禁用它？我怎样才能让它移动焦点，就像没有输入数据并且没有引发属性更改一样？

提前致谢

更新：XAML 的一部分，如果您需要更多信息，请告诉我

**更新 2 ：**在 ListView 上设置 Focusable=false 后，如果 PropertyChanged 被提升，焦点现在会跳出整个 ListView 控件

ListView 声明：

```
<ListView x:Name="ListViewFields"
            KeyboardNavigation.TabNavigation="Cycle" 
            KeyboardNavigation.IsTabStop="False"
            ItemsSource="{Binding Path=Fields}"                                           
            ItemTemplateSelector="{StaticResource ControlDataTemplateSelector}" 
            ItemContainerStyle="{StaticResource ListViewItemStyle}"
            Template="{StaticResource listViewTemplate}" 
            Grid.IsSharedSizeScope="true">
</ListView> 
```

模板示例：

```
<DataTemplate x:Key="singleLineOfTextTemplate">
    <Grid Style="{StaticResource GridStyle}">
        <Grid.ColumnDefinitions>
            <ColumnDefinition SharedSizeGroup="MyFirstColumn" />
            <ColumnDefinition SharedSizeGroup="MySecondColumn" />
        </Grid.ColumnDefinitions>
        <Label Grid.Column="0" IsTabStop="False"
        Content="{Binding Path=Name}"
        />
        <TextBox  Grid.Column="1" x:Name="inputControl" IsTabStop="True"
        Text="{Binding Path=Value, Mode=TwoWay}"
        MinWidth="150"/>                 
    </Grid>
</DataTemplate> 
```

**更新 3：** 在 ListViewItems 的焦点丢失事件中，我可以看到焦点有时设置为 DisconnectedItem（请参阅[SO 上](https://stackoverflow.com/questions/14282894/wpf-listbox-virtualization-creates-disconnecteditems)的 DisconnectedItem ，这可能是我有这种行为的原因。

我现在通过手动恢复焦点来解决我的问题。在 ListViewItem GotFocus 和 LostFocus 事件中，我存储选定的 ListViewItem 并在需要恢复焦点时设置一个标志，然后可以在 ItemContainerGenerator.StatusChanged 事件中完成。

这个解决方案对我来说似乎很丑 - 任何其他解决这个问题的建议或方法仍然很好。

# android - 模拟 Android 的 LocationProvider

> ID：15412819
> 
> 赞同：0
> 
> 时间：2013-03-14T15:03:37.727
> 
> 标签：android, testing, gps, mocking

目前我正在通过模拟文件中的一些 GPS 数据来测试我的 android 应用程序的 LocationProvider，以便临时模拟真实设备上的运动。另外，我想即时从我的模拟数据切换到真实数据。以下代码适用于模拟从文件读取的 GPS 数据。但是，当我尝试停止模拟 GPS 数据时，我当前的位置会卡在文件中最后读取的 GPS 信号上。

因为我不想更改我的实际 android 应用程序的代码，所以我将我的模拟数据写入与 name 关联的 LocationProvider 中`GPS_Provider`。基于位置的应用程序可以通过简单地调用 `requestLocationUpdates(LocationManager.GPS_Provider, , ) 来读取模拟数据。棘手的部分是重置 GPS LocationProvider 以再次提供真实数据。在这里我被卡住了，不知道如何重新设置它。

```
 private AssetManager assetManager;
    private LocationManager locationManager;

    private String locationProviderName = LocationManager.GPS_Provider;

    private List<Location> allMockedPositions;

    private Handler handler;
    private int position;

    private Runnable runner = new Runnable() {

        @Override
        public void run() {
            if (position <= allMockedPositions.size()) {    
                Location mockedLocation = allMockedPositions.get(position++);
                locationManager.setTestProviderLocation(locationProviderName, mockedLocation);
                handler.postDelayed(runner, 500);
            }
        }
    };

    public MockLocationProvider(Context context) {
        assetManager = context.getAssets();
        locationManager = (LocationManager) context.getSystemService(Context.LOCATION_SERVICE);
    }

    public void startMockingLocation(Route route) {
        allMockedPositions = LocationData.getRouteData(assetManager, route, locationProviderName);
        startMocking();
    }

    private void startMocking() {       
        position = 0;
        handler = new Handler();
        handler.post(runner);
    }

    public void stopMockingLocation() {
        locationManager.clearTestProviderLocation(locationProviderName);
        stopMocking();
    }

    private void stopMocking() {
        handler.removeCallbacks(runner);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:44:50.353

您需要实现 a`LocationManager`并`LocationListener`获取手机的当前位置，然后在您的`stopMockingLocation`方法中使用该位置。您的代码中已经有一个，但作为参考，可以在[此处](http://developer.android.com/training/basics/location/currentlocation.html)和[此处](http://developer.android.com/training/basics/location/locationmanager.html)`LocationManager`找到有关如何设置此回调系统的文档。

基本上，您将配置您`LocationManager`从无线`NETWORK_PROVIDER`或`GPS_PROVDER`. 然后，如果在您的指定参数中存在已注册的更改，这会将新的位置信息提供给`LocationListener`您（您可以设置将注册更改的时间和距离范围）。

最后，在你的`LocationListener`你会看到一个方法`onLocationChanged`

```
private final LocationListener listener = new LocationListener() {      
    @Override     
    public void onLocationChanged(Location location) {         
    // A new location update is received.  Do something useful with it.           
    }     
}; 
```

当手机的位置在您定义的时间和距离参数内发生变化时，这就是所谓的。如果您只想在停止模拟后获取用户的位置，您可以简单地创建一个实例变量，从方法内将用户位置存储到该变量`onLocationChanged`，然后从您的`stopMockingLocation`方法内访问该位置。或者，您可以从内部调用其他方法，`onLocationChanged`但我无法提出建议，因为我不确定您到底要做什么。

# winapi - 无法使 Windows 通用查找对话框工作

> ID：15412821
> 
> 赞同：0
> 
> 时间：2013-03-14T15:03:44.247
> 
> 标签：winapi, replace, common-dialog

我真的不明白这些来自网络的例子。它们都是零碎的。没有一个简单简洁的示例如何制作经典的查找文本对话框。

我将我所知道的放入其中，但没有显示任何窗口并返回：`2147500037 0x80004005`

```
#include <windows.h>
#include <iostream>
#include <iomanip>

int main() {
  using namespace std;
  UINT uFindReplaceMsg;  // message identifier for FINDMSGSTRING 
  uFindReplaceMsg = RegisterWindowMessage(FINDMSGSTRING);
  wstring search_str = L"text to search";
  HWND findDialog = NULL;
  wchar_t szFindWhat[MAX_PATH];
  FINDREPLACEW fr;
  ZeroMemory( & fr, sizeof( FINDREPLACEW ) );
  fr.lStructSize = sizeof( FINDREPLACEW );
  fr.hwndOwner = NULL;
  fr.lpstrFindWhat = szFindWhat;
  fr.wFindWhatLen = MAX_PATH;
  findDialog = FindTextW(&fr);
  cout << GetLastError() << endl;
  cout << hex << GetLastError() << endl;
} 
```

您能否为我提供有效的代码，以便我可以从中构建。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:15:11.197

您没有检查来自`FindTextW`. 也就是说，你有：

```
findDialog = FindTextW(&fr);
cout << GetLastError() << endl; 
```

如果函数成功，则结果是句柄。如果函数失败，则返回值为 NULL。

根据[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646918%28v=vs.85%29.aspx)：

> 如果函数失败，则返回值为 NULL。要获取扩展错误信息，请调用 CommDlgExtendedError 函数。CommDlgExtendedError 可能会返回以下错误代码之一：

换句话说，`GetLastError`不会告诉你任何有意义的事情。`CommDlgExtendedError` *在检查句柄后*调用以查看它是否为 NULL。

# jquery - jquery mobile删除类不适用于点击事件

> ID：15412822
> 
> 赞同：1
> 
> 时间：2013-03-14T15:03:47.087
> 
> 标签：jquery, mobile

我在 jQuery mobile 中有一个按钮：

```
 <a href="#" data-role="button" id="show_edit" data-theme="d" data-corners="true" data-shadow="true" data-iconshadow="true" data-wrapperels="span" class="ui-btn ui-corner-left ui-btn-up-a ui-btn-up-d"><span class="ui-btn-inner ui-corner-left"><span class="ui-btn-text">Edit</span></span></a> 
```

如果我在控制台中执行此操作，它可以工作（按钮颜色更改）：

```
$('#show_edit').removeClass('ui-btn-up-d').addClass('ui-btn-up-a'); 
```

但是，如果我确实包含在页面上的点击处理程序中，那么“ui-btn-up-d”类不会被删除吗？

```
$('#show_edit').on('click', function() {
                    $(this).removeClass('ui-btn-up-d').addClass('ui-btn-up-a'); 
                }); 
```

编辑：我认为下面的答案是正确的，但是这是另一种方式，它也在改变数据主题：

```
$('#show_edit').attr('data-theme', 'a').attr('class', 'ui-btn ui-corner-left ui-btn-up-a'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T15:11:29.307

很可能您没有在正确的时间绑定事件，或者它针对错误的元素（例如在 jQM 中很容易无意中获得的重复 id）

例如，如果您的当前页面有一个`id="home"`，您可以像这样绑定它：

```
// every time the id="home" page is initialized, run this handler
$(document).on('pageinit','#home',function(){

    // ensure it targets only elements within this page, however it would
    // be better if you didn't use ID's in jQuery Mobile due to the way it 
    // handles pages.
    $('#show_edit',this).click(function() {
        //$(this).removeClass('ui-btn-up-d').addClass('ui-btn-up-a');
        $(this).toggleClass('ui-btn-up-d ui-btn-up-a');
    });

}); 
```

# asp.net-mvc - MVC 将项目从一个列表保存到另一个

> ID：15412831
> 
> 赞同：0
> 
> 时间：2013-03-14T15:04:02.733
> 
> 标签：asp.net-mvc, list

好的，所以要解释这一点，最好只是逐步完成。

我有一个用于管理运动队的 MVC 应用程序。这涉及创建夹具，还涉及选择一个团队来玩夹具。

ATM 我已经实现了灯具的创建，现在我正在努力让用户能够从`TeamRoster`属性中选择 Players 并将它们保存到对象的`StartingTeam`列表中`Fixture`。

目前我有一个`PickStartingTeam`视图，在这里我希望每个位置都标有一个下拉框（或类似的），其中填充`Player`了`Team` `Roster`属性中所有将其`Position`作为`Position`.

考虑一下，我在想如何将所有视图信息传递到

`FixtureController`方法将它们添加到`StartingTeam`列表中，然后将更改保存到数据库等。

以前有人遇到过这个吗？

提前谢谢了。

Ĵ

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:12:31.167

在视图中的每个位置下拉框中`PickStartingTeam`，您应为该位置提供一个唯一的位置 id，例如名称，并将每个位置`Player`的 id 作为选择值。

然后在该`FixtureController`方法中，您应首先获取每个位置值（即`Player`id），然后为`StartingTeam`每个位置分配所选值。最后，`StartingTeam`可以将其保存到数据库中。

# c++ - 有没有人使用带有 Expected 的 monadic 绑定式编程

> ID：15412834
> 
> 赞同：10
> 
> 时间：2013-03-14T15:04:09.087
> 
> 标签：c++, c++11, monads

（首先问题中的“绑定”与无关`std::bind`）

我看过[Expected<T>](http://channel9.msdn.com/Shows/Going+Deep/C-and-Beyond-2012-Andrei-Alexandrescu-Systematic-Error-Handling-in-C)的演讲，我认为关于这种技术历史的介绍缺少 Haskell 中这个东西背后的核心思想。

Haskell 的核心思想是你“从不”访问`Expected<T>`. 相反，您所做的是将 lambda 传递给`Expected<T>`将根据`Expected<T>`.

我本来希望这个“绑定”组合器是主要的方法`Expected<T>`，所以我不得不问这种编程风格是否由于某种原因被拒绝了。我将`then`在下面调用该组合器：

```
template <class T> class Expected<T> {
    ....
    template <class V, class F> Expected<V> then(F fun_) {
       if (!valid()) {
           return Expected<V>::fromException(this(??)); // something like that
       }
       return fun_(get());
    }
} 
```

这个组合器的要点是链接一个函数列表，您*不需要*检查错误，并且第一个失败的函数将使评估短路。

```
auto res = Expected<Foo>::fromCode([]() { return callFun1(...); })
             .then([](Baz& val) { return callFun2(..,val,..); })
             .then([](Bar& val) { return callFun3(val,...); }); 
```

或者这种语法开始类似于`>>=`Haskell 中使用的运算符。

```
auto res = []() { return callFun1(...); }
           >> [](Baz& val) { return callFun2(..,val,..); }
           >> [](Bar& val) { return callFun3(val,...); }; 
```

`callFun1`返回 a `Expected<Baz>`，`callFun2`返回 a `Expected<Bar>`，然后`callFun3`返回 a `Expected<Foo>`。

如您所见，此代码不检查错误。错误会停止执行，但它们仍然具有`Expected<T>`. `Either`这是在 Haskell中使用 monad 的标准方式。

正如我所说，肯定有人看过这个。

编辑：我为 callFun{1..3} 编写了错误的返回类型。他们返回`Expected<T>`，而不是`T`为`T`. 这是`then`or`>>`组合子的全部意义。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T15:20:58.787

`.then`与 Haskell 相比，将普通函数传递给 C++ 中的函数模板（例如，您的 . 如果它们被重载或模板，则必须为它们提供显式类型签名。这很丑陋，不适合单子计算链。

此外，我们当前的 lambda 是*单态*的，您必须显式输入参数类型，这使得整个情况变得更糟。

已经有许多（库）尝试使 C++ 中的函数式编程更容易，但它总是回到这两点。

最后但并非最不重要的一点是，C++ 中的函数式编程不是常态，有很多人对这个概念完全陌生，而类似“返回代码”的概念很容易理解。

（请注意，您的`.then`函数模板的`V`参数必须明确指定，但这相对容易修复。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T23:23:36.207

回答我自己的问题以提供更多信息并记录我的实验：

我残缺不全`Expected<T>`。我所做的是重命名`get()`为`thenReturn()`以阻止通过命名来使用它。我重命名了整个东西`either<T>`。

然后我添加了这个`then(...)`功能。我不认为结果那么糟糕（除了可能有很多错误），但我必须指出这`then` *不是一元绑定*。一元绑定是函数组合的变体，因此您对两个函数进行操作并返回一个函数。 如果可能，`then`只需将函数应用于 a 。`either`

我们得到的是

```
// Some template function we want to run.
// Notice that all our functions return either<T>, so it
// is "discouraged" to access the wrapped return value directly.
template <class T>
auto square(T num) -> either<T> 
{
    std::cout << "square\n";
    return num*num;
}

// Some fixed-type function we want to run.
either<double> square2(int num) 
{
    return num*num;
}

// Example of a style of programming.
int doit() 
{
    using std::cout;
    using std::string;
    auto fun1 = [] (int x)    -> either<int>    { cout << "fun1\n"; throw "Some error"; };
    auto fun2 = [] (int x)    -> either<string> { cout << "fun2\n"; return string("string"); };
    auto fun3 = [] (string x) -> either<int>    { cout << "fun3\n"; return 53; };
    int r = either<int>(1)
        .then([] (int x)    -> either<double> { return x + 1; })
        .then([] (double x) -> either<int>    { return x*x; })
        .then(fun2) // here we transform to string and back to int.
        .then(fun3)
        .then(square<int>)  // need explicit disambiguation
        .then(square2)
        .thenReturn();
    auto r2 = either<int>(1)
        .then(fun1)  // exception thrown here
        .then(fun2)  // we can apply other functions,
        .then(fun3); // but they will be ignored
    try {
        // when we access the value, it throws an exception.
        cout << "returned : " << r2.thenReturn();
    } catch (...) {
        cout << "ouch, exception\n";
    }
    return r;
} 
```

这是一个完整的例子：

```
#include <exception>
#include <functional>
#include <iostream>
#include <stdexcept>
#include <type_traits>
#include <typeinfo>
#include <utility>

template <class T> class either {
    union {
        T ham;
        std::exception_ptr spam;
    };
    bool got_ham;
    either() {}
    // we're all friends here
    template<typename> friend class either;
public:
    typedef T HamType;
    //either(const T& rhs) : ham(rhs), got_ham(true) {}
    either(T&& rhs) : ham(std::move(rhs)), got_ham(true) {}
    either(const either& rhs) : got_ham(rhs.got_ham) {
        if (got_ham) {
            new(&ham) T(rhs.ham);
        } else {
            new(&spam) std::exception_ptr(rhs.spam);
        }
    }
    either(either&& rhs) : got_ham(rhs.got_ham) {
        if (got_ham) {
            new(&ham) T(std::move(rhs.ham));
        } else {
            new(&spam) std::exception_ptr(std::move(rhs.spam));
        }
    }
    ~either() {
        if (got_ham) {
            ham.~T();
        } else {
            spam.~exception_ptr();
        }
    }
    template <class E>
    static either<T> fromException(const E& exception) {
        if (typeid(exception) != typeid(E)) {
            throw std::invalid_argument("slicing detected");
        }
        return fromException(std::make_exception_ptr(exception));
    }
    template <class V>
    static either<V> fromException(std::exception_ptr p) {
        either<V> result;
        result.got_ham = false;
        new(&result.spam) std::exception_ptr(std::move(p));
        return result;
    }
    template <class V>
    static either<V> fromException() {
        return fromException<V>(std::current_exception());
    }
    template <class E> bool hasException() const {
        try {
            if (!got_ham) std::rethrow_exception(spam);
        } catch (const E& object) {
            return true;
        } catch (...) {
        }
        return false;
    }
    template <class F>
    auto then(F fun) const -> either<decltype(fun(ham).needed_for_decltype())> {
        typedef decltype(fun(ham).needed_for_decltype()) ResT;
        if (!got_ham) {
            either<ResT> result;
            result.got_ham = false;
            result.spam = spam;
            return result;
        }
        try {
            return fun(ham);
        } catch (...) {  
            return fromException<ResT>();
        }
    }
    T& thenReturn() {
        if (!got_ham) std::rethrow_exception(spam);
        return ham;
    }
    const T& thenReturn() const {
        if (!got_ham) std::rethrow_exception(spam);
        return ham;
    }
    T needed_for_decltype();
};

template <class T>
auto square(T num) -> either<T> 
{
    std::cout << "square\n";
    return num*num;
}

either<double> square2(int num) 
{
    return num*num;
}

int doit() 
{
    using std::cout;
    using std::string;
    auto fun1 = [] (int x)    -> either<int>    { cout << "fun1\n"; throw "Some error"; };
    auto fun2 = [] (int x)    -> either<string> { cout << "fun2\n"; return string("string"); };
    auto fun3 = [] (string x) -> either<int>    { cout << "fun3\n"; return 53; };
    int r = either<int>(1)
        .then([] (int x)    -> either<double> { return x + 1; })
        .then([] (double x) -> either<int>    { return x*x; })
        .then(fun2) // here we transform to string and back to int.
        .then(fun3)
        .then(square<int>)  // need explicit disambiguation
        .then(square2)
        .thenReturn();
    auto r2 = either<int>(1)
        .then(fun1)  // exception thrown here
        .then(fun2)  // we can apply other functions,
        .then(fun3); // but they will be ignored
    try {
        // when we access the value, it throws an exception.
        cout << "returned : " << r2.thenReturn();
    } catch (...) {
        cout << "ouch, exception\n";
    }
    return r;
}

int main() {
    using std::cout;
    doit();
    cout << "end. ok";
} 
```

# c# - 在 WIX Bundle 与 VBScript 之间安装多个 MSI 的优缺点

> ID：15412836
> 
> 赞同：2
> 
> 时间：2013-03-14T15:04:09.707
> 
> 标签：c#, vbscript, wix, bundle, wix3.5

我们需要在我们的服务器上安装大约 4-5 个供应商 MSI（我们谈论的是接近 50k 的机器）。在安装过程中，我们需要根据运行它的机器传递一些属性。

我已经组装了一个 WIX Bundle 包，它从注册表中读取它需要的属性，并为写入注册表值创建了一个 C# 控制台应用程序。所以部署的最终输出将是 3 个文件（控制台应用程序、控制台 app.config、wix_bundle.exe）。我没有为此创建任何自定义引导程序，只是为此应用程序使用默认引导程序。

现在另一个处理相同 6MSI 的小组提出了一个 VBScript 来安装 Vendor Msi。他们还编写了管理升级/补丁等的逻辑。我们需要做出决定继续前进，我想知道这方面的利弊。我会提到我的想法，如果有错请补充或纠正我。

我不赞成或反对任何解决方案，但我需要确保该解决方案可以持续多年。我们将至少再使用 5-10 年。

任何帮助深表感谢！

WIX Bundle 的优点 1\. 所有的 MSI 都组合为一个实体，因此与 VBScript 相比，卸载非常容易。2\. 我们有一个与 WIX Bundle 相关联的版本，无需查找各个 MSI 的版本。3\. 控制台应用程序控制写入 WIX-Bundle 所需的属性，因此服务帐户/密码等具有某种抽象。

WIX BUndle 1 的缺点。我不知道它究竟如何处理补丁和升级。我看到很多帖子说他们看到 wix 包中的补丁/升级问题。2\. 通过注册表读取参数并不是最好的解决方案。如果我可以将属性作为命令行传递给 WIX 捆绑包，那就更好了。我知道我必须为此编写一个自定义引导程序？3.

VBScript 的优点 1\. 至少在我们的例子中，使用 VBScript 的解决方案是有效的，不需要额外的工作。2.

VbScript 的缺点 1\. 在安装过程中，我们使用了多个服务帐户，这些服务帐户会根据机器而变化，但在 VB 脚本中所有这些帐户（基于每台机器）以及密码都是硬编码的。2\. 维护脚本，因为它具有卸载/升级/补丁等使用 GUID/版本号等的逻辑。我们需要为每个版本保存/更新 vbscript 以确保它工作正常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T15:40:55.260

我会使用烧录。它围绕所有需要的包创建一个“身份”，您可以识别、升级、附加组件、补丁等。Burn 处理包的升级和补丁，Visual Studio 2012 将其用于所有产品、补丁和 VS 更新. 如果有问题，我希望看到在它们上面打开的错误。:)

[此外， wixstdba](http://wix.sourceforge.net/manual-wix3/wix_xsd_variable.htm)允许您通过设置刻录变量的命令行指定属性，请参阅`WixBalExtension`. 您不需要自定义 BA 来支持该功能。

Bundle 的另一个优点是，如果 MSI 失败，Burn 将尝试回滚以使机器再次处于良好状态。您可以控制回滚通过[RollbackBoundary](http://wix.sourceforge.net/manual-wix3/wix_xsd_rollbackboundary.htm)元素的距离。

# mysql - 当事务试图获取它已经持有的锁时出现死锁问题

> ID：15412838
> 
> 赞同：15
> 
> 时间：2013-03-14T15:04:12.773
> 
> 标签：mysql, transactions, innodb, deadlock

我发现了一个非常令人困惑的僵局情况，我需要帮助才能理解。

有两个事务正在进行：
(2) 为查询持有一个锁`delete from myTable where id = NAME_CONST('p_id',10000)`。这是 PRIMARY KEY 的锁，虽然不是完整的密钥，而是一个范围。看起来这对我来说是一个完整的写锁`lock_mode X locks rec but not gap`。
(1) 正在等待同一个锁，也等待查询`delete from myTable where id = NAME_CONST('p_id',10000)`。
(2) 也在尝试获取这个锁，MySQL 检测到死锁。

我无法理解的是为什么（2）必须再次获取锁，因为它已经持有它并且在所有情况下它都是一个写锁（lock_mode X）。

它看起来也适用于完全相同的查询。

这是表定义

```
create myTable (
  id int unsigned not null,
  value1 char(8) not null,
  value2 int unsigned,
  primary key (id, value1)
); 
```

这是来自的信息`SHOW ENGINE INNODB STATUS\G`

```
------------------------
LATEST DETECTED DEADLOCK
------------------------
130313 14:46:28
*** (1) TRANSACTION:
TRANSACTION 75ACB8A3, ACTIVE 0 sec, process no 6110, OS thread id 139973945382656 starting index read
mysql tables in use 1, locked 1
LOCK WAIT 2 lock struct(s), heap size 376, 1 row lock(s)
MySQL thread id 5154970, query id 5201313618 192.168.0.2 user updating
delete from myTable where id = NAME_CONST('p_id',10000)
*** (1) WAITING FOR THIS LOCK TO BE GRANTED:
RECORD LOCKS space id 22371 page no 1598 n bits 104 index `PRIMARY` of table `db`.`myTable` trx id 75ACB8A3 lock_mode X waiting
Record lock, heap no 32 PHYSICAL RECORD: n_fields 5; compact format; info bits 0
0: len 4; hex 0005af3a; asc :;;
1: len 8; hex 2020202020202020; asc ;;
2: len 6; hex 000075acb890; asc u ;;
3: len 7; hex ea0000020d011e; asc ;;
4: len 4; hex 00000065; asc e;;

*** (2) TRANSACTION:
TRANSACTION 75ACB890, ACTIVE 0 sec, process no 6110, OS thread id 139973957895936 starting index read
mysql tables in use 1, locked 1
7 lock struct(s), hea
p size 1248, 6 row lock(s), undo log entries 4
MySQL thread id 5155967, query id 5201313625 192.168.0.1 user updating
delete from myTable where id = NAME_CONST('p_id',10000)
*** (2) HOLDS THE LOCK(S):
RECORD LOCKS space id 22371 page no 1598 n bits 104 index `PRIMARY` of table `db`.`myTable` trx id 75ACB890 lock_mode X locks rec but not gap
Record lock, heap no 32 PHYSICAL RECORD: n_fields 5; compact format; info bits 0
0: len 4; hex 0005af3a; asc :;;
1: len 8; hex 2020202020202020; asc ;;
2: len 6; hex 000075acb890; asc u ;;
3: len 7; hex ea0000020d011e; asc ;;
4: len 4; hex 00000065; asc e;;

*** (2) WAITING FOR THIS LOCK TO BE GRANTED:
RECORD LOCKS space id 22371 page no 1598 n bits 104 index `PRIMARY` of table `db`.`myTable` trx id 75ACB890 lock_mode X waiting
Record lock, heap no 32 PHYSICAL RECORD: n_fields 5; compact format; info bits 0
0: len 4; hex 0005af3a; asc :;;
1: len 8; hex 2020202020202020; asc ;;
2: len 6; hex 000075acb890; asc u ;;
3: len 7; hex ea0000020d011e; asc ;;
4: len 4; hex 00000065; asc e;;

*** WE ROLL BACK TRANSACTION (1) 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-18T13:09:26.490

它不是同一个锁 - 锁事务 1 仅在（索引）记录上，而不是间隙锁。

这是正在发生的事情：

1.  事务 2 获得了（索引）记录的锁，*但没有记录之前的间隙*（'rec but not gap'），即它只有一个记录锁。
2.  事务 1 尝试获取记录上的锁和之前的间隙（即下一个键锁），但不能因为事务 2 有记录锁（因此事务 1 等待）。
3.  事务 2 尝试获取记录上的锁*和之前的间隙*（即下一个键锁）并且不能，因为事务 1 已经在等待同一个锁并且在队列中领先于它。
4.  僵局。

我不完全确定为什么事务 2 没有立即获取下一个键锁——也许获取记录锁和间隙锁的过程不是原子的（在这个词的一般意义上）。

我认为问题在于您有一个复合主键 (id, value1) 但您正在从一个范围中删除（仅指定 id） - 这需要间隙锁。请参阅[http://dev.mysql.com/doc/refman/5.0/en/innodb-record-level-locks.html](http://dev.mysql.com/doc/refman/5.0/en/innodb-record-level-locks.html)，特别是：

> 使用唯一索引锁定行以搜索唯一行的语句不需要间隙锁定。（这不包括搜索条件仅包括多列唯一索引的某些列的情况；在这种情况下，确实会发生间隙锁定。）

您可以更改您的代码，以便在删除时指定完整的主键，即 id*和*value1？

其他选项：

*   当出现死锁时重试删除，例如捕获代码中的错误，如果它是由死锁引起的，则重试。这种方法说起来容易做起来难，尤其是在遗留应用程序中，但 MySQL 页面推荐了[如何处理死锁](http://dev.mysql.com/doc/refman/5.0/en/innodb-deadlocks.html)：

> 如果由于死锁而失败，请始终准备好重新发出事务。死锁并不危险。再试一次。

*   在发出删除语句之前，用表级锁锁定整个表。但是，这可能会影响性能，并且是一种“大锤”方法。

# javascript - 如何从一个按钮/一个 href 链接调用多个 onclick 事件？

> ID：15412844
> 
> 赞同：0
> 
> 时间：2013-03-14T15:04:23.957
> 
> 标签：javascript, jquery, onclick, smarty

我有以下代码：

```
<input id="unassignButton" class="unassignButton" type="button" value="[[Unassign]]" onclick="javscript:unassignImage({$file.sid},{$listing_sid});"/> 
```

在最终代码中，可能会生成多个类似的输入`{$file.sid},{$listing_sid}`

所以我可以有，例如：

```
<input class="unassignButton" type="button" value="Unassign" onclick="javscript:unassignImage(1533,185);">
<input class="unassignButton" type="button" value="Unassign" onclick="javscript:unassignImage(1558,290);"> 
```

现在我想创建一个链接，该链接将`javscript:unassignImage`一一调用所有具有 unassignButton ID 的输入的“onclick”函数，并考虑适当的参数`unassignImage(1558,290)...`

我怎样才能做到这一点？

提前致谢， 方舟

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T15:07:51.003

```
$("#unassignAll").on('click', function () {
    $(".unassignButton").trigger('click');
}); 
```

这将同时调用`click`绑定到所有取消分配按钮的回调。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T15:13:14.527

您最好在 javascript 中分配点击处理程序而不是标记。另外 - 确保不要为每个按钮提供相同的 id `unassignButton`，因为 id 应该始终是唯一的，而类可以共享：

带有数据属性的标记：

```
<input id="{someUniqueId}" class="unassignButton" type="button" value="[[Unassign]]" data-fileSid="{$file.sid}" data-listingSid="{$listing_sid}"/> 
```

的JavaScript：

```
$(document).ready(function(){
    // bind click handler to each button using the data attributes above
    $('input.unassignButton').on('click', function(){
        unassignImage($(this).data('fileSid'),$(this).data('listingSid'));
    });

    // bind click handler to 'unassignAll' button/link (assumes you have a button with class 'unassignAll'
    $('input.unassignAll').on('click', function(){
        $('input.unassignButton').trigger('click');
    });
}); 
```

有关数据属性的更多信息，请参阅[.data() 上的 Jquery 文档](http://api.jquery.com/data/)

# python - 是否可以使用 python poplib 仅从收件箱中获取特定消息并仅删除检索到的消息？

> ID：15412845
> 
> 赞同：1
> 
> 时间：2013-03-14T15:04:26.503
> 
> 标签：python, email, poplib

我找不到我的确切问题，所以这里是：

我正在使用该`poplib`模块，并且可以成功地从我的收件箱中检索电子邮件并删除那些阅读。但是，我只想检索那些带有特定主题行的电子邮件（这样我就可以过滤掉垃圾邮件或错误发送的邮件）。检索后，我希望删除检索到的消息。

这可能与`poplib`我不知道的另一个模块一起使用吗？

# android - 从服务启动 Intent 会导致崩溃

> ID：15412846
> 
> 赞同：0
> 
> 时间：2013-03-14T15:04:27.487
> 
> 标签：android, android-service

回复：[启动另一个应用程序后返回应用程序](https://stackoverflow.com/questions/15396585/move-back-to-app-after-launching-another-app)

我现在已经设置了一个服务来运行我的 runCommand() 函数（见下文），但是当从运行命令中实际启动意图时，我的应用程序强制关闭：

```
E/AndroidRuntime (5448): FATAL EXCEPTION: Thread-931

E/AndroidRuntime (5448): android.util.AndroidRuntimeException: Calling startActvitiy() from outside of an Activity context requires the FLAT_ACTIVITY_NEW_TASK flas. Is this really what you want?

E/AndroidRuntime (5448): at android.app.ContextImpl.startActivity(ContextImpl.java:864)

E/AndroidRuntime (5448): at android.content.ContentWrapper.startActivity(ContextWrapper.java 276)

E/AndroidRuntime (5448): at packagename.MainService.runCommand(MainService.java:164) 
```

所以我的问题是我将如何从服务中启动所需的意图？

我的服务等级是：

```
public class MainService extends Service {

boolean copied = false;
private String mHandle;
private static final int REQUEST_WINDOW_HANDLE = 1;

@Override
public IBinder onBind(Intent arg0) {
    return null;
}

@Override
public void onCreate() {

}

@Override
public void onDestroy() {

}

@Override
public void onStart(Intent intent, int startId) {
    Thread usbUpdateThread = new Thread() {
        public void run() {             
            while (true) {
                while (!copied) {
                    try {
                        Thread.sleep(180000);
                    } catch (InterruptedException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                }
                runCommand("chmod -R 777 /media/cdrom/");
                copied = false; 
            }
        }
    };
    Thread InternetThread = new Thread() {
        public void run() {
            while (true){
                    try {
                        Thread.sleep(3600000);
                    } catch (InterruptedException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                    runCommand("php update.php");

            }
        }
    };
    Thread CheckThread = new Thread() {
        public void run() {
            while (true) {
                    try {
                        Thread.sleep(300000);
                    } catch (InterruptedException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                    runCommand("sh check.sh");
                }

        }
    };

    InternetThread.start();
    CheckThread.start();
    usbUpdateThread.start();
}

public boolean runCommand(String command) {
    Intent intent = new Intent("jackpal.androidterm.RUN_SCRIPT");
    intent.addCategory(Intent.CATEGORY_DEFAULT);
    intent.putExtra("jackpal.androidterm.iInitialCommand", command);
    intent.putExtra("jackpal.androidterm.window_handle", MainActivity.mHandle);
    startActivity(intent);

    return true;
} 
```

}

我的服务开始使用：

```
Intent intentService = new Intent(this, MainService.class);
    this.startService(intentService); 
```

在我的主要活动中

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T15:07:32.110

尝试添加此标志：

```
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T15:18:20.927

试试这个，它会解决你的问题。

```
Intent mInMainAndroidAct= new Intent(getBaseContext(), myActivity.class);
mInMainAndroidAct.addCategory(Intent.CATEGORY_DEFAULT);
mInMainAndroidAct.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
mInMainAndroidAct.putExtra("jackpal.androidterm.iInitialCommand", command);
mInMainAndroidAct.putExtra("jackpal.androidterm.window_handle", MainActivity.mHandle);
getApplication().startActivity(mInMainAndroidAct); 
```

# wpf - 为什么 Style 在 WPF 中的 Popup 上不能正常工作？

> ID：15412848
> 
> 赞同：2
> 
> 时间：2013-03-14T15:04:29.317
> 
> 标签：wpf, xaml, popup, styles

我不确定我是否使用了正确的方法，所以我尝试在这里描述我的情况。请帮忙指出细节。

我的目的是自定义 WPF`Popup`类并实现特定的弹出面板。我使用 CustomControl 来实现它，如下所示：

这里是`Generic.xaml`

```
<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:WpfApplication3">

    <Style TargetType="{x:Type local:CCPopup}">
        <Setter Property="AllowsTransparency" Value="True" />
        <Setter Property="StaysOpen" Value="False" />
        <Setter Property="Placement" Value="Center" />
        <Setter Property="Child">
            <Setter.Value>
                <Border Background="Red"
                        Width="30"
                        Height="30" />
            </Setter.Value>
        </Setter>
    </Style>
</ResourceDictionary> 
```

以下是代码，仅注册元样式信息：

```
public class CCPopup : Popup
{
    static CCPopup()
    {
        DefaultStyleKeyProperty.OverrideMetadata(typeof(CCPopup), new FrameworkPropertyMetadata(typeof(CCPopup)));
    }
} 
```

到目前为止我遇到的问题可以总结如下：

1）我试着写：

```
<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:WpfApplication3">

    <Style TargetType="{x:Type local:CCPopup}"  BasedOn="{StaticResource {x:Type Popup}}">
        <Setter Property="AllowsTransparency" Value="True"/>
        <Setter Property="StaysOpen" Value="False" />
        <Setter Property="Placement" Value="Center" />
        <Setter Property="Child">
            <Setter.Value>
                <Border Background="Red"
                        Width="30"
                        Height="30" />
            </Setter.Value>
        </Setter>
    </Style>
</ResourceDictionary> 
```

但这不起作用，我得到错误`{x:Type Popup}`无法解决。为什么？

关于我的 MainWindow.xaml：我只添加`<CCPopup x:Key="popup" />`它的资源并创建一个按钮，当我单击按钮时，我将弹出窗口绑定`PlacementTarget`到此按钮并`IsOpen`在代码中将弹出窗口的属性设置为 true。

2）当我在代码中创建CCPopup的实例时`CCPopup p = new CCPopup()`，有些Style不起作用，比如`AllowsTransparency`and `StaysOpen`，不会设置成我在xaml Style中给的值。但是当我从 xaml 创建一个实例`<CCPopup x:Key="popup" />`并从代码中的资源中引用它时，该样式可以正常工作。你能指出我哪里做错了吗？

3）只是好奇为什么`Popup`类没有`Template`财产？

谢谢你的帮助。

# itext - 在 XMLWorker itext 中创建空白下划线

> ID：15412849
> 
> 赞同：0
> 
> 时间：2013-03-14T15:04:31.110
> 
> 标签：itext, pdf-conversion

我有一个字段和一个带下划线的空白空间来放置值（如 Field_Name ***_* ____**）。我正在使用 itext 的 XMLWorker 在从 html 转换的 pdf 上执行此操作。我所想到的就是创建一个内联的空 div（在字段旁边）并给它一个边框底部。但没有显示border-bottom。有人有更好的工作想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T08:40:34.697

Border-bottom 不适用于元素。它确实适用于细胞。

来源：[http ://demo.itextsupport.com/xmlworker/itextdoc/CSS-conformance-list.htm](http://demo.itextsupport.com/xmlworker/itextdoc/CSS-conformance-list.htm)

# wpf - 如何在 DataGrid 中的多个选定行上执行命令？

> ID：15412854
> 
> 赞同：4
> 
> 时间：2013-03-14T15:04:37.617
> 
> 标签：wpf, command

我有一个带有上下文菜单的数据网格，它使用多个菜单选项的命令。目前它只允许我一次在 1 行上运行命令，我希望能够在单击菜单项一次时运行所有选定行的命令。我想使用命令，因为我们使用`CanExecute`启用/禁用命令，但`Click`如果没有其他选项，我将使用。

这是一次只允许 1 行的当前实现。

```
<DataGrid.RowStyle>
   <Style TargetType="{x:Type DataGridRow}">
      <Setter Property="ContextMenu">
         <Setter.Value>
            <ContextMenu>
               <MenuItem Visibility="Visible" 
                         Header="{Binding Path=ApplicationStrings.LaunchItemLabel,
                                          Source={StaticResource ResourceWrapper}}" 
                         Command="{StaticResource launchCommand}" 
                         CommandParameter="{Binding}" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T15:13:31.687

[将 DataGrid 的 SelectedItems 属性绑定到 ViewModel 属性，然后在您的 launchCommand 中访问该属性，而不是使用 CommandParameter 传回您的 SelectedItem。]

编辑：抱歉，我忘记了 SelectedItems 属性是只读的，未经修改就无法绑定。

您提到的 Sam 的[解决方法](http://blog.functionalfun.net/2009/02/how-to-databind-to-selecteditems.html)应该可以完成这项工作，否则以下方法也可以：

想法是将 DataRow 的 IsSelected 绑定到 DataItem 的属性（在我的示例中为 MyClass），然后在命令处理程序中，遍历集合并检查 IsSelected 属性。

xml:

```
<Window.DataContext>
    <local:ViewModel />
</Window.DataContext>

<Window.Resources>
    <local:BindingProxy x:Key="DataContextProxy"  Data="{Binding}" />
</Window.Resources>

<Grid>
    <DataGrid ItemsSource="{Binding MyRows}" >
        <DataGrid.Resources>
            <Style TargetType="{x:Type DataGridRow}">
                <Setter Property="IsSelected" Value="{Binding IsSelected}" />
                <Setter Property="ContextMenu">
                    <Setter.Value>
                        <ContextMenu>
                            <MenuItem Visibility="Visible" Header="Launch" 
                                      Command="{Binding Data.LaunchCommand, Source={StaticResource DataContextProxy}}" />
                        </ContextMenu>
                    </Setter.Value>
                </Setter>
            </Style>
        </DataGrid.Resources>
    </DataGrid>
</Grid> 
```

视图模型：

```
public class ViewModel : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;
    private void OnPropertyChanged(string propertyName)
    {
        if (this.PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }

    private ObservableCollection<MyClass> _myRows = new ObservableCollection<MyClass>();
    public ObservableCollection<MyClass> MyRows { get { return _myRows; } set { _myRows = value; OnPropertyChanged("MyRuns"); } }

    private ICommand _launchCommand;
    public ICommand LaunchCommand { get { return _launchCommand; } private set { _launchCommand = value; OnPropertyChanged("LaunchCommand"); } }

    public ViewModel()
    {
        MyRows = new ObservableCollection<MyClass>()
        {
            new MyClass() { Text = "Example Line 1" },
            new MyClass() { Text = "Example Line 2" },
            new MyClass() { Text = "Example Line 3" }

        };

        LaunchCommand = new ActionCommand(Launch);

    }

    private void Launch()
    {
        foreach (var row in MyRows)
        {
            if (row.IsSelected)
            {
                //...
            }
        }
    }
}

public class MyClass : INotifyPropertyChanged
{
    private string _text;
    public string Text { get { return _text; } set { _text = value; OnPropertyChanged("Text"); } }

    private bool _isSelected;
    public bool IsSelected { get { return _isSelected; } set { _isSelected = value; OnPropertyChanged("IsSelected"); } }

    public event PropertyChangedEventHandler PropertyChanged;
    private void OnPropertyChanged(string propertyName)
    {
        if (this.PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }
}

// http://www.thomaslevesque.com/2011/03/21/wpf-how-to-bind-to-data-when-the-datacontext-is-not-inherited/
public class BindingProxy : Freezable
{
    protected override Freezable CreateInstanceCore()
    {
        return new BindingProxy();
    }

    public object Data { get { return (object)GetValue(DataProperty); } set { SetValue(DataProperty, value); } }
    public static readonly DependencyProperty DataProperty = DependencyProperty.Register("Data", typeof(object), typeof(BindingProxy), new UIPropertyMetadata(null));
}

public class ActionCommand : ICommand
{
    public event EventHandler CanExecuteChanged;

    private Action _action;

    public ActionCommand(Action action)
    {
        _action = action;
    }

    public bool CanExecute(object parameter) { return true; }

    public void Execute(object parameter)
    {
        if (_action != null)
            _action();
    }
} 
```

# java - hibernate 和 PL/SQL 中的并行调用

> ID：15412869
> 
> 赞同：0
> 
> 时间：2013-03-14T15:05:02.863
> 
> 标签：java, spring, hibernate

我将 Spring MVC 与 spring hibernate(2.5.6) 和 Hibernate core(3.3.2GA) 一起使用。作为请求处理应用程序调用 DB（PL/SQL 调用和普通 HQL 调用）的一部分。

问题（死锁/唯一键约束冲突）依赖于表的修改，其中更新/删除操作是从休眠和 PL/SQL 调用的。它发生在系统承受最大负载时。你们中的任何人都可以提供您的观点来控制数据源的事务管理吗？

我在 spring bean XML 中使用以下配置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T05:39:08.117

我想我得到了解决方案，但不确定这是否有效。如果我们将以下属性设置为事务属性，那么 Spring 事务管理将处理死锁事务。它不会发生。

PROPAGATION_REQUIRED，-DeadlockLoserDataAccessException PROPAGATION_REQUIRED

# python - OSError: [Errno 2] 没有运行 2 个管道的此类文件或目录

> ID：15412874
> 
> 赞同：1
> 
> 时间：2013-03-14T15:05:16.573
> 
> 标签：python, pipe

我想在 shell 中执行多个命令。所以我选择管道来执行它，因为我必须按顺序将所有命令运行到一个 shell。

我已经有一个运行命令的管道，现在我想创建另一个管道来执行命令，当我尝试这样做时，python 在这一行给我错误

```
self.__subprocess = Popen(self._command, stdin=PIPE, stdout=PIPE) 
```

错误：

```
File "/usr/lib/python2.7/subprocess.py", line 679, in __init__
errread, errwrite)
File "/usr/lib/python2.7/subprocess.py", line 1249, in _execute_child
raise child_exception

OSError: [Errno 2] No such file or directory 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:08:32.837

您的系统很可能找不到`self._command`设置的文件。尝试添加完整路径，看看是否可以解决它。

它与管道无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-04T15:26:54.960

我认为这是同样的错误：

[系统跟踪 | 安卓 | 没有相应的文件和目录](https://stackoverflow.com/questions/11823007/systrace-android-no-such-file-or-directory)

我通过将“adb”的路径放入 $PATH 环境变量来解决它。

# php - 我可以将所有 PRINT 和 ECHO 输出重定向到 PHP 函数吗？

> ID：15412875
> 
> 赞同：3
> 
> 时间：2013-03-14T15:05:16.583
> 
> 标签：php, stdout

我继承了一些古老的代码来探索并弄清楚发生了什么。遍布意大利面条代码的是数百个几乎不可能遵循的回声和打印。

我一直在研究和使用 STDOUT 的变体进行谷歌搜索，但找不到任何不谈论使用和替代 PRINT/ECHO 的内容。

我正在寻找一种方法来有效地用我自己的名为“MyEcho”的函数*替换PHP Echo/Print，该函数将询问/记录从何时何地打印的内容。*

有没有办法做到这一点，或者我必须编写函数，并替换整个代码中使用的所有打印/回显？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-02-06T10:37:16.137

使用[输出控制功能](http://php.net/manual/en/ref.outcontrol.php)，如`ob_start()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T15:09:02.680

似乎直接重载 echo 可能是不可能的，但是[这个 StackOverflow 的另一个问题](https://stackoverflow.com/questions/2182743/can-i-override-the-php-built-in-function-echo)可能对你有一些线索。

您可以进行批量搜索/替换替换`echo`为`echo __FILE__ , __LINE__ ,`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T15:19:58.303

正如[echo 手册](http://php.net/manual/en/function.echo.php)所述，它不是真正的函数，而是一种语言结构，因此您不能像使用系统函数那样覆盖它。（使用命名空间）

我认为您最好的选择是简单地使用诸如[ecobyte 替换文本之](http://www.ecobyte.com/replacetext/)类的东西来替换`echo`和`print`其他东西。

请记住，您可能会遇到问题，因为括号不是必需的`echo`，`print`而是您的函数。echo 也可以使用 a 允许多个参数`,`，这也可能破坏您自己的方法。

我认为没有太多事情要做，然后全部替换并希望最好或手动完成。

# javascript - 带有 handlebars.js 的多个模板

> ID：15412885
> 
> 赞同：1
> 
> 时间：2013-03-14T15:05:49.510
> 
> 标签：javascript, jquery, libraries, handlebars.js

我是 javascript 和库的新手，所以这可能是一个简单的问题。我正在尝试使用handlebars.js 模板引擎和jQuery 制作几个简单的网页。我一直遇到的问题是制作多个页面。到目前为止，我有一个不同名称的主页。每个名称都有一个 jquery click 功能。如果我单击一个名称，我只需使用 jQuery 来更改当前页面。所以基本上，如果你点击一个名字，你会得到一个新模板，其中包含该人的图片列表，但在同一页面上说 index.html。这样做的问题是，如果您想返回第一个视图，“返回”按钮现在不起作用。我的结构不正确吗？链接是否应该发送到另一个页面和另一个模板？如果是这样，我如何根据按下的链接生成模板。

```
$(document).ready(function(){

var source = $(".some-template").html();
var template = Handlebars.compile(source);

data = { date: "today", firstUsers: [
{firstName: "person1", pictures: ["pic1", "pic2", "pic3"]},
{firstName: "person2", pictures: ["pic1", "pic2", "pic3"]},
{firstName: "person3", pictures: ["pic1", "pic2", "pic3"]},
{firstName: "person4", pictures: ["pic1", "pic2", "pic3"]},
]
};
$(".container").html(template(data))

$("li").click(function(){
    var name = $(this).html()
    $.each(data.firstUsers, function(i, item){
        if(name === item.firstName){
            y = item.pictures
            return y
        };//if function
    });//each function

    $(".container").hide()
    var source = $(".some-script").html();
    var template = Handlebars.compile(source);
    datas = {namer: name, pictures: y,}
    //console.log(datas.pictures)
    $(".content").html(template(datas))
});//click function
});//document ready 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T15:44:16.953

使用最佳实践，您可能应该有与每个页面相关联的 URL。如果您使用[window.history.pushState](http://badassjs.com/post/840846392/location-hash-is-dead-long-live-html5-pushstate)，有一种相当简单的方法可以让后退/前进按钮正常工作。

所以基本上它的工作原理如下：

1.  每次加载新模板时，都会推送新的浏览器状态。
2.  监听`onpopstate`事件，并在它触发时加载适当的模板。

为了可重用性，我将上面的函数分成两个单独的函数：

```
function loadUser(name) {
    var y;
    $.each(data.firstUsers, function(i, item){
        if(name === item.firstName){
            y = item.pictures
            return y
        };//if function
    });//each function

    $(".container").hide()
    var source = $(".some-script").html();
    var template = Handlebars.compile(source);
    datas = {namer: name, pictures: y,}
    //console.log(datas.pictures)
    $(".content").html(template(datas))
    window.history.pushState(null, null, name);
}

// Find the name of the user
// TODO: change the regex to match your URL scheme
function popStateResponder() {
    var name = window.location.pathname.match(/\w+$/)[0];
    loadUser(name);
}

$("li").click(function(){
    var name = $(this).html(),

    loadUser(name);
});//click function

$(window).on('popstate', popStateResponder); 
```

可能需要更改一些内容，但这是我通常用于此类任务的一般工作流程。

# php - 如何从 PHP 调用 WCF Rest 服务

> ID：15412886
> 
> 赞同：-1
> 
> 时间：2013-03-14T15:05:51.140
> 
> 标签：php, wcf, wcf-binding

嗨，我不习惯 Php，我创建了一个 WCF Rest 服务，任何人都可以告诉我如何从 php 代码调用该服务

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:07:51.503

[cURL](http://php.net/manual/en/book.curl.php)和 URL。这是休息；）

# c# - 如何用 Task.Factory.StartNew() 替换 ThreadPool.QueueUserWorkItem()？

> ID：15412887
> 
> 赞同：0
> 
> 时间：2013-03-14T15:05:53.877
> 
> 标签：c#, multithreading, linq, lambda, task-parallel-library

在 C# 3.0 中具有以下工作代码，如何将其转换为 C# 4.0 已替换该行

```
ThreadPool.QueueUserWorkItem(LongGetOrAdd(dict, 1)); 
```

经过

```
Task task1 = Task.Factory.StartNew(//? 
```

?

工作 C# 3.0 控制台应用程序的完整代码：

```
using System.Collections.Concurrent;
using System.Threading;
using System.Threading.Tasks;
class Program
{
  static void Main()
  {
    var dict = new ConcurrentDictionary<int, string>();
    ThreadPool.QueueUserWorkItem(LongGetOrAdd(dict, 1));

//???????
//Task task1 = Task.Factory.StartNew((Action)(LongGetOrAdd(dict, 1));

    Console.WriteLine("Press enter to continue:");
    foreach (var a in dict)
    Console.WriteLine("dict.Key = {0}  dict.Value = {1}  ", a.Key, a.Value);

    Console.ReadLine();
  }
  private static WaitCallback LongGetOrAdd(ConcurrentDictionary<int, string> dict, int index)
  {
    return o => dict.GetOrAdd
    (index, 
     i =>
       {
         Console.WriteLine("From method LongGetOrAdd()!");
         Thread.SpinWait(1000);
         return i.ToString();
       }
    );
  }
} 
```

产生输出：

```
Press enter to continue:
From method LongGetOrAdd()!

dict.Key = 1  dict.Value = 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T15:09:36.677

这应该做。

```
 var c = LongGetOrAdd(dict, 1);

    var t = Task.Factory.StartNew(() => c.Invoke(null));

    Task.WaitAll(task);
    Console.ReadLine(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T15:13:45.247

您只需要更改`LongGetOrAdd`返回的委托类型并调用其他方法。

您还需要从 lambda 中删除参数，因为您实际上并没有传递任何信息。

只需查看`Task.Factory.StartNew`.

```
private static Action LongGetOrAdd(ConcurrentDictionary<int, string> dict, int index)
{
    return () => dict.GetOrAdd
    (index,
     i =>
     {
         Console.WriteLine("======!");
         Thread.SpinWait(1000);
         return i.ToString();
     }
    );
}
private static void Main()
{
    var dict = new ConcurrentDictionary<int, string>();
    Task.Factory.StartNew(LongGetOrAdd(dict, 1));

    Console.WriteLine();
    Console.WriteLine("press any key to exit . . .");
    Console.ReadKey();
} 
```

# r - R - rbind 转置单列矩阵

> ID：15412890
> 
> 赞同：0
> 
> 时间：2013-03-14T15:05:58.297
> 
> 标签：r, dataframe, read.table, rbind

我对 R 很陌生，但似乎这是一个我无法找到答案的特定问题。

我的程序读入一些数据，然后根据我传递的列号向量将该数据的某些列绑定到几个数据帧之一，所以是这样的：

```
filename <- c("vector", "full", "of", "filenames")
colVal <- (32)    
InMat <- data.frame()
for (i in 1:length(filename)){
  file <- read.table(filename[i], header=TRUE, fill=TRUE, stringsAsFactors=FALSE)
  InMat <- rbind(InMat, file[c(2:dim(file)[1], colVal)])
  #...other matricies...
} 
```

我的问题在于只有一个所需列的情况，即 colVal 采用一个值。在这种情况下，我发现 InMat 基本上是从我所需要的转换而来的。更糟糕的是，当我读取多个文件时，它会绑定转置的所需列，因此我得到的行数等于我正在读取的文件数，列数与每个文件的每个所需列中的行数一样多。

似乎如果有 2 个所需的列（即 colVal 采用两个或多个值），那么它会按我的预期行事（即，一列被读取并作为一列存储在 InMat 中，每个附加文件的列存储在下面）。

我的问题是为什么 rbind 在只传递一个所需的列值时会有不同的行为，并且是否有一种简单的方法（读取；不添加一些笨拙的 if 或 for 循环来检查）来避免这种情况？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:23:25.747

简短回答：（数据帧上`[.data.frame`的`[`运算符）默认情况下将输出转换为可能的最低维度（通过参数`drop=TRUE`）。如果你只拉一列，那么它会转换为一个向量，然后它会创建一个矩阵，将其他向量通过`rbind`转换为一个矩阵。当你提取两列或更多列时，你得到一个数据框，所以输出的`rbind`是一个数据框。

快速解决方法是更改​​此行：

```
InMat <- rbind(InMat, file[c(2:dim(file)[1], colVal)]) #old line
InMat <- rbind(InMat, file[c(2:dim(file)[1], colVal),drop=FALSE]) #new line 
```

一种更像 R 的编码方式是使用`lapply`并调用`rbind`一次。因为 R 是按副本分配的，所以通过重复连接/添加来增长对象是非常低效的（参见[R Inferno](http://www.burns-stat.com/pages/Tutor/R_inferno.pdf)的第二个圆圈）。

```
filename <- c("vector", "full", "of", "filenames")
colVal <- (32)    
dfm <- lapply(filename, read.table
  , header=TRUE, fill=TRUE, stringsAsFactors=FALSE)
dfm <- lapply(dfm,`[`,colVal)
dfm <- do.call(rbind,dfm) 
```

如果您事先知道要提取的列的位置，则可以使用`colClasses`参数 of`read.table`并跳过阅读整个表格：

```
filename <- c("vector", "full", "of", "filenames")
colVal <- 32
cc <- rep.int("NULL",40) #where 40 is # of columns in table
cc[colVal] <- NA 
dfm <- lapply(filename, read.table
  , header=TRUE, fill=TRUE, colClasses=cc, stringsAsFactors=FALSE)
dfm <- do.call(rbind,dfm) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T15:20:09.880

当你只取一列时，它就变成了一个向量。如果您只是将所有值附加到向量而不是矩阵中会更好

```
InVec <- c()
for (i in 1:length(filename)){
  file <- read.table(filename[i], header=TRUE, fill=TRUE, stringsAsFactors=FALSE)
  InVec <- c(InVec, file[-1, colVal)])
  #...other matricies...
} 
```

使用 c() 也将比 rbind 快得多

# linux - /usr/local/include/SFML 授权被拒绝

> ID：15412891
> 
> 赞同：2
> 
> 时间：2013-03-14T15:06:04.830
> 
> 标签：linux, makefile, debian, sfml

在使用 SFML 的项目中，我试图通过 make 编译我的队友部分。在他的 ubuntu 上一切正常，但在我的 debian 上一切都出错了。

我将 libsfml 所需的所有包含放在 /usr/local/include/ 文件夹中，并将 libsfml 的所有 .so 放在 /usr/local/lib/ 上

`ls -l /usr/local/include : drw-rwSrw- 7 root User size date SFML`

我不知道大写的 S 是否是问题的关键，我以前从未见过。在 sudo 上使一切正常。但我不需要成为 root 来编译这样的项目。

有什么建议吗？

这是错误输出：

```
LibrarySFML.hpp:14:29: error: /usr/local/include/SFML/Graphics.hpp: Permission denied
LibrarySFML.hpp:15:27: error: /usr/local/include/SFML/System.hpp: Permission denied
LibrarySFML.hpp:16:27: error: /usr/local/include/SFML/Window.hpp: Permission denied 
```

LibrarySFML.hpp 第 14-15-16 行：

```
#include <SFML/Graphics.hpp>
#include <SFML/System.hpp>
#include <SFML/Window.hpp> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T11:06:37.720

大写`S`确实说明了问题。从 coreutils ls 信息页面：

> 如果设置了 set-user-ID 或 set-group-ID 位但未设置相应的可执行位。

这意味着 setgid 位是在目录上设置的（这会强制继承组所有权，在这里没有意义），但可执行位不是。对于目录，这是在目录中查找文件的能力。只有 root 可以看到该目录中的文件，并且只有这样，因为 root 可以忽略它。有人将目录的模式设置为只能用于文件的模式。

```
chmod 2775 /usr/local/include/SFML 
```

应该解决问题。（或者`755`，如果您想使用更传统的仅限 root 权限；Debian 正在迁移不再使用该`staff`组。）

# java - SOAP - 没有命名空间的前缀

> ID：15412896
> 
> 赞同：0
> 
> 时间：2013-03-14T15:06:16.647
> 
> 标签：java, soap, namespaces, prefix

这就是我要的：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:tps="http://mysite.it">
   <soapenv:Header/>
   <soapenv:Body>
      <tps:getBook>
         <tps:id>45</tps:id>
      </tps:Retrieve_getBook_Poi_Recordset>
   </soapenv:Body>
</soapenv:Envelope> 
```

但这是我有的：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:tps="http://mysite.it">
   <soapenv:Header/>
   <soapenv:Body>
      <tps:getBook xmlns:tps="http://mysite.it">
         <tps:id xmlns:tps="http://mysite.it">45</tps:id>
      </tps:Retrieve_getBook_Poi_Recordset>
   </soapenv:Body>
</soapenv:Envelope> 
```

我正在使用 javax.xml.soap.* 创建肥皂消息...我找不到在 param 标记中仅插入前缀的方法。

这是生成肥皂消息的代码：

```
MessageFactory msgFactory = null;
SOAPMessage message = null;
msgFactory = MessageFactory.newInstance(SOAPConstants.SOAP_1_2_PROTOCOL);
message = msgFactory.createMessage();
SOAPEnvelope messageEnvelope = message.getSOAPPart().getEnvelope();
SOAPBody messageBody = messageEnvelope.getBody();

messageEnvelope.addNamespaceDeclaration(PREFIX, getNameSpace(method));

SOAPElement soapMethod = messageBody.addChildElement(method, PREFIX);
SOAPElement param = soapMethod.addChildElement("id",PREFIX);
param.addTextNode("45"); 
```

我该怎么做才能只删除命名空间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-21T19:59:37.767

对于元素和属性节点：

```
Node node = ...;
String name = node.getLocalName(); 
```

将为您提供节点名称的本地部分。

正如您所提到的，您真的不想从 XML 中删除名称空间信息。对于您的特定情况，这是一个很好的解决方法，但我会保持名称空间信息不变。

# angularjs - 如何在 ng-repeat 中获取上一项？

> ID：15412897
> 
> 赞同：46
> 
> 时间：2013-03-14T15:06:19.850
> 
> 标签：angularjs, angularjs-ng-repeat

我有一个模板，只有当当前项目与前一个项目有一些不同的字段时，我才想在其中生成一些 HTML。如何访问 ng-repeat 中的上一个项目？

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2013-03-14T15:20:09.083

You can do something like

```
<div ng-app="test-app" ng-controller="MyController">
    <ul id="contents">
      <li ng-repeat="content in contents">
          <div class="title">{{$index}} - {{content.title}} - {{contents[$index - 1]}}</div>
      </li>
    </ul>
</div> 
```

JS

```
var app = angular.module('test-app', []);

app.controller('MyController', function($scope){
    $scope.contents=[{
        title: 'First'
    }, {
        title: 'Second'
    }, {
        title: 'Third'
    }]
}) 
```

Demo: [Fiddle](http://jsfiddle.net/arunpjohny/fg2AC/1/)

* * *

**Be careful:** `$index` is for the directive array, which may be different than the scope array. Use an inline variable to access the correct array.

```
<li ng-repeat="content in (correctContents = (contents | orderBy:'id'))">
  {{ correctContents[$index - 1] }} is the prev element
</li> 
```

If you filter or orderBy, `contents[$index] != content`.

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-14T15:19:01.877

一种方法是使用 $index 来定位上一个项目：

HTML：

```
<div ng-repeat="item in items">
  <span>{{$index}}: </span>
  <span ng-show="items[$index-1].name=='Misko'" ng-bind="item.name"></span>
</div> 
```

JS：

```
app.controller('AppController',
    [
      '$scope',
      function($scope) {
        $scope.items = [
          {name: 'Misko'},
          {name: 'Igor'},
          {name: 'Vojta'}
        ];

      }
    ]
  ); 
```

[普朗克](http://plnkr.co/edit/l8izibDpNOO9jITAOnC7)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-10-12T13:45:27.337

为什么不使用`key`from `ng-repeat`？（`$index`与之相比似乎很棘手`key`）

```
<div ng-repeat="(key, item) in data">
  <p>My previous item is {{ data[key-1] }}, my actual item is {{ item }}
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-21T13:11:06.290

```
<li ng-repeat="item in items">
    {{items[$index - 1].att == item.att ? 'current same as previous' : 'current not same as previous'}}
</li> 
```

# private - Setter 和 Getter 约定

> ID：15412899
> 
> 赞同：1
> 
> 时间：2013-03-14T15:06:22.897
> 
> 标签：private, setter, public, conventions, getter

```
public class Score {

    private String score;

    public String getScore() {
        return score;
    }
    public void setScore(String score) {
        this.score = score;
    }

} 
```

在一个项目中工作，我在其中找到了这段代码

这段代码的功能很简单，但是如果设置器是公共的，我不明白为什么要将字符串分数设为私有。对我来说，这看起来像是将分数设为私有的感觉被公共二传手打破了。

提前感谢您帮助我从新手发展到至少有点程序员。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:08:51.357

使用 getter 和 setter，因为如果您在项目的中途决定更改变量的工作方式，或者如果您想修改原始值，则必须检查您的代码并将所有调用更改为公共变量。

但是，使用 getter 和 setter，您可以更改在方法内部处理变量的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T15:07:42.210

乍一看，它确实看起来像是破损的封装。然而，上述有两个优点。

1.  执行。实现*不必*是`String`变量。setter 实现可以将它写入数据库，然后 getter 检索它。
2.  验证。仅仅公开该字段意味着您可以将其设置`String`为您想要的任何内容。通过引入 setter 方法，您可以检查（例如）长度、空值、内容等。

以上意味着您可以按照您想要的方式并以不同于接口的方式实现该类（想象一下 - 您可以将这些方法抽象为一个接口并提供*多个*实现，所有这些实现都以不同的方式运行）。因为它们遵循相同的接口，您可以用一种实现替换另一种实现，而无需更改周围的代码。

我会说（更进一步）我倾向于不喜欢上述模式。我的理由是，OO 的优势在于您可以告诉对象代表您做事，*而不是*让您自己提取字段并使用它们执行自己的逻辑。因此，我倾向于怀疑由字段和 setter/getter 组成的类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T15:12:12.163

1.  `private`关键字意味着这样声明的属性或方法仅在您的类中可见。

2.  `public`关键字意味着如此声明的属性或方法对任何人都是可见的。

这种做法被称为信息封装。公共 setter 和 getter 允许程序员控制这些函数的用户可以对您的私有属性执行什么操作。

# facebook - 使用 Social.framework 和 FB SDK 从 iPhone 上传 Facebook 视频

> ID：15412904
> 
> 赞同：0
> 
> 时间：2013-03-14T15:06:33.130
> 
> 标签：facebook, facebook-graph-api, video, file-upload, facebook-ios-sdk

我们的 ios 应用程序有问题。问题是，通过 ios 上传似乎不像预期的那样工作。这里真正的问题是我们可以从某些帐户上传，而我们不能从其他帐户上传（尽管我们以前可以这样做）。错误重现步骤如下： - 用户启动我们的应用程序；- 用户登录 facebook 并授予应用程序运行所需的权限；- 用户将视频上传到 Facebook；- facebook 回应上传成功；- 然后消息出现在 facebook 上，该视频无法处理。

同一视频已从其他帐户成功上传。

最奇怪的是，我们成功上传的视频在一段时间后从 Facebook 页面消失了。

所以，我们基本上想到的是，FB 对来自移动设备的用户有一些垃圾邮件保护限制。

那么，我要问的是，是否有人也有这样的问题？

将东西发送到 FB 的 PS 代码非常基本：

```
- (void)uploadVideoToFacebookFromFileURL:(NSURL *)url parameters:(NSDictionary *)parameters {
SLRequest *uploadRequest = [SLRequest requestForServiceType:SLServiceTypeFacebook
                                              requestMethod:SLRequestMethodPOST
                                                        URL:[NSURL URLWithString:kFBVideoURLString]
                                                 parameters:parameters];

NSData *videoData = [NSData dataWithContentsOfURL:url options:NSDataReadingMappedAlways error:NULL];

[uploadRequest addMultipartData:videoData
                       withName:@"source"
                           type:@"video/x-m4v"
                       filename:[url absoluteString]];

uploadRequest.account = self.socialAccount;

IDPLoadingView *loadingView = [IDPLoadingView loadingViewInView:self.view];
[uploadRequest performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {
    dispatch_async(dispatch_get_main_queue(), ^{[loadingView removeFromSuperview];});
    NSString *responseString = [[[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding] autorelease];
    if(error){
        NSLog(@"Error %@", error.localizedDescription);
        dispatch_async(dispatch_get_main_queue(), ^{[self showErrorSending];});
    } else {
        NSLog(@"%@", responseString);
        dispatch_async(dispatch_get_main_queue(), ^{[self showResult];});
    }
}]; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-30T11:10:03.017

您必须提出 2 个不同的请求。首先是读取权限，然后是首次使用登录 Facebook 用户的发布权限

```
NSArray * p = [NSArray arrayWithObjects:@"email", nil];

NSDictionary * dict=[NSDictionary dictionaryWithObjectsAndKeys:@"fb_app_id",ACFacebookAppIdKey,p,ACFacebookPermissionsKey,ACFacebookAudienceEveryone,ACFacebookAudienceKey, nil];

    NSDictionary *options = @{
                              ACFacebookAppIdKey: @"fb_app_id",
                              ACFacebookPermissionsKey: @[@"publish_actions", ],
                              @"ACFacebookAudienceKey": ACFacebookAudienceFriends,
                              };
    ACAccountType *facebookAccountType = [accountStore
                                          accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook];

    [accountStore requestAccessToAccountsWithType:facebookAccountType options:dict completion:^(BOOL granted, NSError *error) {
        NSLog(@"blablalba");
      //do nothing here.

    }];

    [accountStore requestAccessToAccountsWithType:facebookAccountType options:options completion:^(BOOL granted, NSError *error) {
 //code for upload here
}]; 
```

希望能帮助到你。

# python - 如何增加 python 列表的大小和填充？

> ID：15412906
> 
> 赞同：3
> 
> 时间：2013-03-14T15:06:40.073
> 
> 标签：python, list

假设我有这个列表：

```
[1,2,3,4] 
```

而且我要：

```
[1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4] 
```

这样做的最佳方法是什么？

我目前的方法是创建一个新列表：

```
x = [1,2,3,4]
y = [[n]*4 for n in x] 
```

这给出了：

```
[[1, 1, 1, 1], [2, 2, 2, 2], [3, 3, 3, 3], [4, 4, 4, 4]] 
```

这似乎很接近，但没有雪茄......有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-14T15:09:14.313

```
>>> x = [1,2,3,4]
>>> [n for n in x for _ in range(4)]
    [1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4] 
```

`itertools.repeat`确实在语义上更干净，谢谢，史蒂文：

```
from itertools import repeat
[repeated for value in x for repeated in repeat(value, 4)] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T15:09:37.690

您可以使用`itertools.chain()`或`chain.from_iterable()`展平列表列表（`y`在您的情况下）：

```
In [23]: lis=[1,2,3,4]

In [24]: from itertools import chain

In [31]: y = list(chain(*([n]*4 for n in lis)))

In [32]: y
Out[32]: [1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4] 
```

一些性能比较：

```
In [25]: x=[1,2,3,4]*1000  #can't use more than 1000 due to limited RAM

In [26]: %timeit list(chain(*([n]*1000 for n in x)))
1 loops, best of 3: 196 ms per loop

In [27]: %timeit list(chain.from_iterable(([n]*1000 for n in x)))
1 loops, best of 3: 177 ms per loop

In [29]: %timeit [n for n in x for _ in xrange(1000)]
1 loops, best of 3: 388 ms per loop

#three more solutions;from @Steven Rumbalski 

In [28]: %timeit [repeated for value in x for repeated in repeat(value,1000)]
1 loops, best of 3: 344 ms per loop

In [30]: %timeit list(chain.from_iterable(izip(*repeat(x,1000))))
1 loops, best of 3: 204 ms per loop

In [31]: %timeit list(chain(*izip(*repeat(x,1000))))
1 loops, best of 3: 238 ms per loop 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T15:17:21.900

您可以随时使用`reduce`

```
reduce(lambda x, y: x+y, [[n]*4 for n in x]) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-12-23T20:10:38.003

这就是我会怎么做。

```
x = [1,2,3,4]
y = x*4
y.sort() 
```

简单而整洁。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T15:08:56.140

简易方法：

```
y = [n for n in x*4] 
```

这将返回`[1, 2, 3, 4, 1, 2, 3, 4, ...]`。

要将其按您想要的顺序排列，您可以执行`x = sorted(x)`or `y = sorted([n for n in x*4])`。

这类似于`y = sorted(x*4)`.

最好的方法是按照@Pavel Anossov 的说法去做：

```
y = [n for n in x for _ in range(4)] 
```

这是最好的，因为它适用于任何序列，`sorted(x*4)`但不保持顺序，只适用于最初排序的列表。

# r - 聚合多个函数结果

> ID：15412908
> 
> 赞同：0
> 
> 时间：2013-03-14T15:06:41.763
> 
> 标签：r

我有预测变量列表和带有数据的 data.frame。我想做的是使用这个预测器并将它们的结果与一些聚合函数结合起来。我怎样才能做到这一点？

示例数据如下所示：

预测变量列表 p1 .. pn。（在我的情况下是树木）

每个预测变量返回两列：给定行的“分类概率”和“1 - 分类概率”。

我想对每个预测器返回的“分类概率”求和，并将其与“1 - 分类概率”的总和进行比较。

样本数据：

```
library('rpart');
size = 10;
samplesize=100;
mydata=data.frame(age=sample(10:40, samplesize, replace=TRUE), weight=rnorm(samplesize, mean = 60, sd = 20), girth=rnorm(samplesize, mean = 60, sd = 20))
mydata=cbind(mydata, dec=((mydata$weight > 40) | (mydata$girth > 60)))
attributes = colnames(mydata)[1:length(colnames(mydata)) - 1] 

model <- list();
for(i in 1:size) {
  attr = sample(1:length(attributes), sample(1:length(attributes)));
  fmla <- as.formula(paste("dec ~ ", paste(attributes[attr], collapse= "+")));
  tree <- rpart(fmla, data=mydata, method="class", control=model$rc);
  model[[i]] <- tree;
} 
```

其中 model 是预测变量列表，mydata 是实际数据。我现在可以预测：

```
predict(model[[1]], mydata) 
```

**选择**

我在这里无法实现的主要事情是聚合函数的结果。我可以在这里给出我有功能的更简单的情况：

```
f <- function (x, n) {
  data.frame(first = x + n, second=x * n);
} 
```

并希望获得结果列的总和以及列`first`中值的总和`second`（对于非全局的每一行）以进行以下调用：

```
f(1:4, 2)
f(1:4, 3)
..
f(1:4, n) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T16:26:47.497

这可能是替代方案的解决方案：

```
f <- function (x, n) {
  data.frame(first = x + n, second=x * n);
}

n <- 10

l <- lapply(2:n, f, x = 1:4)

### t(sapply(l, colSums))

Reduce('+', l) 
```

# javascript - Javascript：按引用传递

> ID：15412909
> 
> 赞同：3
> 
> 时间：2013-03-14T15:06:47.207
> 
> 标签：javascript, pass-by-reference

有人可以在下面的代码中解释我，为什么当我做 o = {} 时，对象没有被重置？

```
var funky = function (o) {
    o.z = null;
    o.a = "aaa";        
    o = {};
};

var x = { z: "zzz"};
funky(x);

console.log(x); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-14T15:07:33.193

因为 JavaScript 不通过引用传递。它按值传递引用。

区别很微妙，但很重要。它的要点是，对象变量的值不是对象；它是对对象的*引用*。传递一个变量会传递该引用的副本。有了它，您可以随意修改对象的内容，但不能以调用者可以看到的方式将其替换为整个其他对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T15:09:29.667

`o`只是它当前指向的任何东西的别名，它不是实例（按值传递）。

如果你想模拟“通过引用传递”，你可以这样做：

```
var x = { ... };
var container = { x: x };
funky(container); 
```

现在您可以在以下位置重置它`funky()`：

```
container.x = {}; 
```

# google-maps - 谷歌地图API中心标记

> ID：15412913
> 
> 赞同：1
> 
> 时间：2013-03-14T15:07:06.577
> 
> 标签：google-maps, google-maps-api-3

我有下面的代码，它在一个页面上放置 4 个地图，并根据地址为每个地图添加一个标记。但我需要映射到标记的中心。

```
<script type="text/javascript">
         var geocoder;
         var map0,map1,map2,map3;
         var markers = [];
          function initialize() {
            geocoder = new google.maps.Geocoder();
            var latlng = new google.maps.LatLng(-34.397, 150.644);
            var mapOptions = {
              zoom: 14,
              center: latlng,
              mapTypeId: google.maps.MapTypeId.ROADMAP
            }
            map0 = new google.maps.Map(document.getElementById("map_canvas1"), mapOptions);
            addPostCode('@address1',map0);
            map1 = new google.maps.Map(document.getElementById("map_canvas2"), mapOptions);
            addPostCode('@address2',map1);
            map2 = new google.maps.Map(document.getElementById("map_canvas3"), mapOptions);
            addPostCode('@address3',map2);
            map3 = new google.maps.Map(document.getElementById("map_canvas4"), mapOptions);
            addPostCode('@address4',map3);
          }

          function addPostCode(address,map) {
                geocoder.geocode( { 'address': address}, function(results, status) {
                if (status == google.maps.GeocoderStatus.OK)
                {
                    map.setCenter(results[0].geometry.location);
                    var marker = new google.maps.Marker({
                    map: map,
                    position: results[0].geometry.location,
                    center: results[0].geometry.location,
                    name: address
                });
                markers.push(marker);
                } else {
                    alert("Geocode was not successful for the following reason: " + status);
                }
                });
            } 
```

不完全确定将其置于该地图标记的中心位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:51:02.763

好吧，我编写了工作示例，您可以从这里看到：**[JS fiddle](http://jsfiddle.net/NUkCs/4/)**

我改变的几件事是`center: results[0].geometry.location`从标记中删除（因为标记只添加到位置和由 using 控制的地图`map.setCenter();`）我也稍微改变了类的名称，所以你可以随意修改它。干杯！

# c# - WF4.5 不编译并行 C# 工作流

> ID：15412914
> 
> 赞同：2
> 
> 时间：2013-03-14T15:07:07.760
> 
> 标签：c#, iis, workflow-foundation-4, workflow-foundation

我有一个 IIS 托管的 xamlx 工作流，其中包含我试图在并行版本控制中运行的 c# 表达式。

我完全喜欢这篇文章：[工作流服务的并行版本控制](http://msmvps.com/blogs/theproblemsolver/archive/2012/10/11/side-by-side-versioning-of-workflow-services.aspx)

工作流的新实例按预期工作，但是当我调用工作流的先前版本的实例时，它会引发一个错误，告诉我它没有被编译。

错误：

> 无法找到已编译位置“auxData”的 ICompiledExpressionRoot。确保已编译包含此表达式的活动的定义。

顺便说一句，我有一个编译工作流程的自定义工厂。

```
<serviceActivations>        
    <add service="Service1.xamlx" relativeAddress="~/Service1.xamlx" factory="MyServiceHostFactory" />
</serviceActivations> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T14:48:16.823

在分析了 .Net 的源代码后，我意识到我在自定义工作流工厂中覆盖的 CreateWorkflowServiceHost 方法在其返回对象中添加了所有支持的版本。

我所要做的就是迭代这个集合并编译它们。

最终源代码：

```
 protected override WorkflowServiceHost CreateWorkflowServiceHost(WorkflowService service, Uri[] baseAddresses)
    {
        var host = base.CreateWorkflowServiceHost(service, baseAddresses);

        // add your customizations here…
        CompileExpressions(service.Body);
        foreach (var supportedVersion in host.SupportedVersions)
        {
            CompileExpressions(supportedVersion.Body);
        }

        return host;
    } 
```

# oop - 真实世界的对象

> ID：15412933
> 
> 赞同：-1
> 
> 时间：2013-03-14T15:07:51.373
> 
> 标签：oop, object, concept

如果我们将**树**视为一个**对象**，那么它的叶子和树枝会是什么？
同样，如果我们把**狗**当作一个**物体**，那么它的腿、嘴巴和眼睛会是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T18:35:04.663

一棵树有一组分支。每个分支都有一组叶子。

即（伪代码）

```
class Tree {
    Branch[] branches;
}

class Branch {
    Leaf[] leaves;
}

class Leaf {

} 
```

狗也一样：狗有一组眼睛；它还有一组腿；它有一张嘴。

```
class Dog {
    Leg[] legs;
    Mouth mouth;
    Eye[] eyes;
} 
```

# asp.net - 尝试从 VB.Net 中的网页读取时无法在 excel 文件中找到引用的工作表

> ID：15412936
> 
> 赞同：0
> 
> 时间：2013-03-14T15:07:57.713
> 
> 标签：asp.net, vb.net, excel, oledb

我正在尝试构建一个允许用户选择 excel 文件的网页，然后该页面将读取页面的内容并在验证后将数据上传到数据库。

我有一个 fileUpload asp 控件，带有一个用于执行的按钮和一个用于显示数据的 gridview。这不是最终目标，但我只是为了测试脚本是否成功读取文件（它不是）。

我不断收到的错误是：

```
"The Microsoft Office Access database engine could not find the object 'Sheet1'. Make sure the object exists and that you spell its name and the path name correctly." 
```

我上传的excel文件肯定有一个Sheet1，所以我不确定发生了什么。

我不会假装对 OleDB 的工作原理有很多经验或了解，所以我确信这很简单。

我的代码如下：

```
Protected Sub Upload_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles Upload.Click
    If (testFile.HasFile) Then
        Dim conn As OleDbConnection
        Dim cmd As OleDbCommand
        Dim da As OleDbDataAdapter
        Dim ds As DataSet
        Dim query As String
        Dim connString As String = ""
        Dim strFileType As String = System.IO.Path.GetExtension(testFile.FileName).ToString().ToLower()

        'Check file type
        If strFileType.Trim = ".xls" Or strFileType.Trim = ".xlsx" Then
        Else
            MsgBox("Only excel files allowed")
            Exit Sub
        End If

        Try
            'Connection String to Excel Workbook
            If strFileType.Trim = ".xls" Then
                connString = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" & testFile.FileName & ";Extended Properties=""Excel 8.0;HDR=Yes;IMEX=2"""
            ElseIf strFileType.Trim = ".xlsx" Then
                connString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" & testFile.FileName & ";Extended Properties=""Excel 12.0;HDR=Yes;IMEX=2"""
            End If

            query = "SELECT * FROM [Sheet1$]"

            'Create the connection object
            conn = New OleDbConnection(connString)
            'Open connection
            If conn.State = ConnectionState.Closed Then conn.Open()
            'Create the command object
            cmd = New OleDbCommand(query, conn)
            da = New OleDbDataAdapter(cmd)
            ds = New DataSet()
            da.Fill(ds)

            grvExcelData.DataSource = ds.Tables(0)
            grvExcelData.DataBind()

            da.Dispose()
            conn.Close()
            conn.Dispose()
        Catch ex As Exception
            MsgBox(ex.Message)
        End Try
    Else
        MsgBox("Must have file")
        Exit Sub
    End If
End Sub 
```

我也很感激一个很好的资源，了解如何更多地了解 OleDB 以及我的代码的具体错误！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:51:50.110

您需要创建一个输出以从页面查看工作表，可能在 DropDownList 对象中（此代码有点难看，但应该为您指明正确的方向）。基本上首先返回您的床单以验证它是否存在......

```
 private void ProcessExcelFile(string fileName, bool isOpenXMLFormat)
    {
        string fn = System.IO.Path.GetFileName(fileName);
        String RelativePath = "YourPath/" + fn;
        string connectionString = String.Empty;
        OleDbConnection con;

        if (isOpenXMLFormat)
            //read a 2007 file  
            connectionString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" +
                fileName + ";Extended Properties=\"Excel 8.0;HDR=YES;\"";
        else
            //read a 97-2003 file  
            connectionString = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" +
                fileName + ";Extended Properties=Excel 8.0;";

        con = new OleDbConnection(connectionString);
        con.Open();

        //get all the available sheets  
        System.Data.DataTable dataSet = con.GetOleDbSchemaTable(OleDbSchemaGuid.Tables, null);

        //get the number of sheets in the file  
        string[] workSheetNames = new String[dataSet.Rows.Count];
        int i = 0;
        foreach (DataRow row in dataSet.Rows)
        {
            //insert the sheet's name in the current element of the array  
            //and remove the $ sign at the end  
            //workSheetNames[i] = row["TABLE_NAME"].ToString().Trim(new[] { '$' });
            workSheetNames[i] = row["TABLE_NAME"].ToString();
            i++;
        }
        SheetNames.DataSource = workSheetNames;
        SheetNames.DataBind(); 
```

# android - Android 水平文本视图关闭屏幕

> ID：15412938
> 
> 赞同：0
> 
> 时间：2013-03-14T15:08:02.200
> 
> 标签：android, screen, swipe, horizontal-scrolling

所以我正在制作一个应用程序，我想要一个充满字母的水平滚动条，每个字母代表一个音符。

我希望能够侧向滑动以选择不同的音符，始终将 1 个音符居中。它将像 G String 的 android 应用程序那样工作。他们如何获得这种效果？由于有很多笔记，不适合屏幕的笔记将在屏幕外并在刷入时出现在屏幕上。

图片供参考：[http ://tinyurl.com/cf2v9ke](http://tinyurl.com/cf2v9ke)

任何帮助，即使只是将我指向正确的方向，将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:16:48.787

这只是一个 Horizo​​ntalScrollView，您可以在其中添加布局。其余的所有标准行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T15:18:05.720

要获得“捕捉”效果，即当前选定的音符居中，我认为您可以使用`ViewPager`. 查看[Mark Murphy 的博客文章](http://commonsware.com/blog/2012/08/20/multiple-view-viewpager-options.html)，这看起来是一个很好的例子。

# css - 如何将多个背景与 LESS 混合

> ID：15412940
> 
> 赞同：3
> 
> 时间：2013-03-14T15:08:04.047
> 
> 标签：css, less

我有一个小问题......有没有什么选择可以将多个背景与 LESS 混合？

我在LESS中有这个背景设置：

```
.background_centered(
  @url,
  @position_horizontal: center,
  @position_vertical: top,
  @background-repeat: no-repeat,
  @transparency: transparent) {
    background: @arguments;
} 
```

现在：我需要写出具有多个背景的输出样式，所以我这样做：

```
.class {
   .background_centered(url('../img/war_top_baner_gp.png'),url('../img/war_header_bg.png'));
} 
```

在最终输出中有些东西是不正确的，我有这个：

```
background: url('/../img/war_top_baner_gp.png') 
            url('/../img/war_header_bg.png') top no-repeat transparent; 
```

怎么了？是否可以这样做？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-14T18:26:12.657

我不知道原生地具有应用/循环通过 mixin 的所有参数的功能，但是有很多选项可以克服这个问题。

您可以将自定义 javascript 函数添加到执行所需操作的 less 块中。[这是一个很好的自定义函数参考链接](http://leafo.net/lessphp/docs/#custom_functions)。

但是你也可以在 less 中构建一个小循环：

```
 // for loop
    .for(@l,@obg,@i:1) when (@l > @i) {
      @nbg: `@{url}[@{i}]`;
      @bg: ~"@{obg}, @{nbg} @{rest}";
      .for(@l, @bg, @i + 1);
    }

    // multiple background urls + additional bg properties
    .bgmixin(@url, @rest){
      @num: unit(`@{url}.length`);
      @bg: ~`@{url}[0]` @rest;
      .for(@num, @bg);
      background: ~"@{bg}";
    }

    // defining bg urls
    @url: 'url("../img/war_top_baner_gp.png")', 'url("../img/war_header_b‌g.png")';

    // including the bgmixin in .class
    .class{
      .bgmixin(@url, center top no-repeat transparent);
    } 
```

输出是

```
 .class {
          background: url("../img/war_top_baner_gp.png") center top no-repeat transparent,
                      url("../img/war_header_b‌g.png") center top no-repeat transparent;
    } 
```

如果我理解正确，这就是你想要的。

* * *

**编辑：**我只是想在这里补充一点，我的想法是找到一个更通用的解决方案，它实际上是通过数组元素循环/递归，这使得在它们各自的图像中使用不同的属性变得容易 - 所以你给函数提供一个数组urls 和其他属性的数组。在这里，我将尝试说明这个想法：

```
 .for(@l,@obg,@i:1) when (@l > @i) {
      @nbg: `@{url}[@{i}]`; @nattr: `@{attr}[@{i}]`;;
      @bg: "@{obg}, @{nbg} @{nattr}";
      .for(@l, @bg, @i + 1);
    }

    .bgmixin(@url, @attr){
      @num: unit(`@{url}.length`);
      @bg: ~`@{url}[0]` ~`@{attr}[0]`;
      .for(@num, @bg);
      background: ~"@{bg}";
    }

    @urls: "url('../img/centered_image_bg.png')", "url('../img/left_image_bg.png')";
    @attr: "center top no-repeat transparent", "left top y-repeat";

    .class{
      .bgmixin(@urls, @attr);
    } 
```

输出将如下所示：

```
 .class {
        background: url('../img/centered_image_bg.png') center top no-repeat transparent,
                    url('../img/left_image_bg.png') left top y-repeat;
    } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-14T18:39:58.657

在 LESS 中，将多个属性值传递给单个属性是一项挑战。您当前的代码显然适用于单一背景。要获得多个，您通常必须使用字符串。

下面允许通过将多个 url 作为单个字符串传递给第一个参数来输入多个 url，然后使用内联 javascript 对字符串进行替换并将这些 url 连接到其他参数。

**较少的**

```
.background_centered(
  @urls,   
  @position_horizontal: center,
  @position_vertical: top,
  @background-repeat: no-repeat,
  @transparency: transparent ) {

  @combinedValues: ~"@{position_horizontal} @{position_vertical} @{background-repeat} @{transparency}";
  @urlsRewrite: ~`@{urls}.replace(/\)/g, ') @{combinedValues}')`;
  background: @urlsRewrite;
}

.class {
   .background_centered("url('../img/war_top_baner_gp.png'), url('../img/war_header_bg.png')");
} 
```

**输出**

```
.class {
  background: url('../img/war_top_baner_gp.png') center top no-repeat transparent, url('../img/war_header_bg.png') center top no-repeat transparent;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-11T08:02:56.277

要将逗号分隔的参数列表传递给 mixin，只需`;`在 mixin 调用中使用而不是逗号：

```
 .mixin(@bg, @color) {
   background: @bg;
   color: @color;
 }

 .class {
   .mixin(url('img/bg.png') no-repeat, red; white);
 } 
```

输出：

```
.class {
  background: url('img/bg.png') no-repeat, #ff0000;
  color: #ffffff;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-20T06:59:39.273

您不需要在 mixin 中粘合多个背景。您可以使用[`merge`](http://lesscss.org/features/#merge-feature)LESS 语言的原生功能。

> 该`merge`功能允许将来自多个属性的值聚合到单个属性下的逗号或空格分隔列表中。`merge`对于**背景**和变换等属性很有用。

因此，您的 less 代码可能如下所示：

```
.element {
  background+: url("../1.png") center top no-repeat transparent;
  background+: url("../2.png") left top repeat;
  background+: url("../3.png") right top repeat;
} 
```

这比复杂的 mixin 简单得多。

生成的CSS：

```
.element {
  background: url("../1.png") center top no-repeat transparent,
              url("../2.png") left top repeat, 
              url("../3.png") right top repeat;
} 
```

# android - 失去焦点时隐藏软键盘

> ID：15412943
> 
> 赞同：49
> 
> 时间：2013-03-14T15:08:09.527
> 
> 标签：android

当我们有一个`EditText`并且它失去焦点时（对于一个不需要键盘的元素），软键盘应该自动隐藏还是我们应该自己隐藏它？

我将焦点从 a `AutoCompleteSearchView`（应该表现得像`EditText`我猜的那样）移动到 a `Button`，`requestFocus()`返回 true，但键盘没有隐藏。

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-03-14T15:23:15.853

最好的方法是为EditText设置一个OnFocusChangeListener，然后将键盘的代码添加到监听器的OnFocusChange方法中。当 EditText 失去焦点时，Android 将自动关闭键盘。

在您的 OnCreate 方法中是这样的：

```
EditText editText = (EditText) findViewById(R.id.textbox);
OnFocusChangeListener ofcListener = new MyFocusChangeListener();
editText.setOnFocusChangeListener(ofcListener); 
```

然后添加类：

```
private class MyFocusChangeListener implements OnFocusChangeListener {

    public void onFocusChange(View v, boolean hasFocus){

        if(v.getId() == R.id.textbox && !hasFocus) {

            InputMethodManager imm =  (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
            imm.hideSoftInputFromWindow(v.getWindowToken(), 0);

        }
    }
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-14T15:11:38.430

Android 不会为您隐藏键盘。如果您希望键盘在`EditText`失去焦点时隐藏，请尝试在该事件上使用如下方法：

```
private void hideKeypad() {
    EditText edtView = (EditText) findViewById(R.id.e_id);

    InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
    imm.hideSoftInputFromWindow(edtView.getWindowToken(), 0);
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-01-07T06:39:47.223

试试这个

```
 /**
 * Hide keyboard on touch of UI
 */
public void hideKeyboard(View view) {

    if (view instanceof ViewGroup) {

        for (int i = 0; i < ((ViewGroup) view).getChildCount(); i++) {

            View innerView = ((ViewGroup) view).getChildAt(i);

            hideKeyboard(innerView);
        }
    }
    if (!(view instanceof EditText)) {

        view.setOnTouchListener(new OnTouchListener() {
            @Override
            public boolean onTouch(View v, MotionEvent event) {
                hideSoftKeyboard(v);
                return false;
            }

        });
    }

}

/**
 * Hide keyboard while focus is moved
 */
public void hideSoftKeyboard(View view) {
    if (view != null) {
        InputMethodManager inputManager = (InputMethodManager) contentsContext_
                .getSystemService(Context.INPUT_METHOD_SERVICE);
        if (inputManager != null) {
            if (android.os.Build.VERSION.SDK_INT < 11) {
                inputManager.hideSoftInputFromWindow(view.getWindowToken(),
                        0);
            } else {
                if (this.getCurrentFocus() != null) {
                    inputManager.hideSoftInputFromWindow(this
                            .getCurrentFocus().getWindowToken(),
                            InputMethodManager.HIDE_NOT_ALWAYS);
                }
                view.clearFocus();
            }
            view.clearFocus();
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-14T15:22:15.683

试试这个，也许它会解决你的问题。

```
private void hideKeyboard() {
    InputMethodManager mImMan = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
    mImMan.hideSoftInputFromWindow(mYourEdttxtName.getWindowToken(), 0);
} 
```

[您可以从这里](https://stackoverflow.com/a/1109108/1466188)找到更多信息。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-06-01T09:25:23.760

您可以覆盖该`dispatchTouchEvent`方法来实现它：

```
@Override
public boolean dispatchTouchEvent(MotionEvent event) {

    if (event.getAction() == MotionEvent.ACTION_DOWN) {

        /**
         * It gets into the above IF-BLOCK if anywhere the screen is touched.
         */

        View v = getCurrentFocus();
        if ( v instanceof EditText) {

            /**
             * Now, it gets into the above IF-BLOCK if an EditText is already in focus, and you tap somewhere else
             * to take the focus away from that particular EditText. It could have 2 cases after tapping:
             * 1\. No EditText has focus
             * 2\. Focus is just shifted to the other EditText
             */

            Rect outRect = new Rect();
            v.getGlobalVisibleRect(outRect);
            if (!outRect.contains((int)event.getRawX(), (int)event.getRawY())) {
                v.clearFocus();
                InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
                imm.hideSoftInputFromWindow(v.getWindowToken(), 0);
            }
        }
    }
    return super.dispatchTouchEvent( event );
} 
```

**奖励：**在 EditText 获得焦点的情况下，触发事件的顺序是：

1.  `onFocusChange()`另一个 EditText 被调用（如果另一个 edittext 失去焦点）
2.  `ACTION_DOWN`叫做
3.  最后，`onFocusChange()`该 EditText 的方法将被调用。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-09-03T21:17:54.467

这个问题的解决方案已经在[这里](https://stackoverflow.com/questions/4828636/edittext-clear-focus-on-touch-outside)找到了。
它在活动上使用 DispatchTouchEvent，并且不会将每个 EditText 挂钩到 FocusChange 或 Touch 事件。
**这是更好的解决方案。**

我的 Xamarin 实现如下：

```
public override bool DispatchTouchEvent(MotionEvent ev)
    {
        if (ev.Action == MotionEventActions.Down)
        {
            var text = CurrentFocus as EditText;
            if (text != null)
            {
                var outRect = new Rect();
                text.GetGlobalVisibleRect(outRect);
                if (outRect.Contains((int) ev.RawX, (int) ev.RawY)) return base.DispatchTouchEvent(ev);
                text.ClearFocus();
                HideSoftKeyboard();
            }
        }
        return base.DispatchTouchEvent(ev);
    }

protected void HideSoftKeyboard()
    {
        var inputMethodManager = (InputMethodManager) GetSystemService(InputMethodService);
        inputMethodManager.HideSoftInputFromWindow(CurrentFocus.WindowToken, 0);
    } 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-10-26T08:56:52.240

只需创建一个静态方法

```
public static void touchScreenAndHideKeyboardOnFocus(View view, final Activity activity) {

    if (view instanceof EditText) {
        view.setOnFocusChangeListener(new View.OnFocusChangeListener() {
            @Override
            public void onFocusChange(View v, boolean hasFocus) {
                if (!hasFocus) {
                    if(activity != null) {
                       InputMethodManager inputMethodManager = (InputMethodManager) activity.getSystemService(Activity.INPUT_METHOD_SERVICE);
                       if (activity.getCurrentFocus() != null) {
                          inputMethodManager.hideSoftInputFromWindow(activity.getCurrentFocus().getWindowToken(), InputMethodManager.HIDE_NOT_ALWAYS);
                       }
                    }
                }
            }
        });
    }

    if (view instanceof ViewGroup) {
        for (int i = 0; i < ((ViewGroup) view).getChildCount(); i++) {
            View innerView = ((ViewGroup) view).getChildAt(i);
            touchScreenAndHideKeyboardOnFocus(innerView, activity);
        }
    }
} 
```

view 是您的布局的根视图.. 但要小心，如果您的编辑文本中有另一个焦点侦听器..

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-03-04T09:38:26.423

这对我有用：

```
InputMethodManager imm = (InputMethodManager) context.getSystemService(Context.INPUT_METHOD_SERVICE);
imm.toggleSoftInput(InputMethodManager.HIDE_IMPLICIT_ONLY, 0); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-12-24T12:00:19.483

只是想在一堆答案中添加一个 Kotlin 简化版本：

```
// onCreateView of the Fragment
myAutocompleteText.apply {
    setAdapter(adapter) // whatever the adapter is
    setOnFocusChangeListener { _, hasFocus ->
        if (hasFocus) requireActivity().closeKeyboard() // if called from an Activity instead of a Fragment, just replace it's reference instead of requireActivity()
    }
}

/**
 * Hides the keyboard if possible.
 */
object KeyboardUtils {
    fun Activity.hideKeyboard() {
        if (currentFocus != null) {
            (getSystemService(Context.INPUT_METHOD_SERVICE) as? InputMethodManager)?.hideSoftInputFromWindow(currentFocus!!.windowToken, 0)
        }
    }
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-06-28T10:48:30.080

我的问题用这段代码解决了（在片段中）

```
LinearLayout linearLayoutApply=(LinearLayout)rootView.findViewById(id.LinearLayoutApply);

    linearLayoutApply.setOnFocusChangeListener(new View.OnFocusChangeListener() {
        @Override
        public void onFocusChange(View v, boolean hasFocus) {
            if(hasFocus)
            {
                hideKeyBoard(v);
            }
        }
    }); 
```

隐藏键盘

```
 public void hideKeyBoard(View v)
{
    InputMethodManager imm=(InputMethodManager) getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);
    imm.hideSoftInputFromWindow(getActivity().getCurrentFocus().getWindowToken(), 0);
} 
```

# ios - 在 iOS 中，使 UIButton 具有与键盘键相同的效果

> ID：15412944
> 
> 赞同：3
> 
> 时间：2013-03-14T15:08:12.317
> 
> 标签：ios, keyboard, uibutton

我正在开发一个带有很多按钮的界面。我想从键盘键获得两种效果。

1.  在 iPhone 键盘中，按下“G”之类的键后，在手指离开屏幕之前，您可以随时将手指移动到另一个键，并且输入将是手指离开屏幕时的输入。
2.  当您按下 iPhone 键盘上的某个键时，该键会以某种方式变大。

因为我也有很多按钮，而且它们也像键盘一样很小。所以我认为这个效果将帮助用户更轻松地按下按钮而不会出错。普通的 UIButton 可以做到这一点吗？

先感谢您！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T15:21:50.507

您可以使用此[放大镜](https://github.com/acoomans/iOS-MagnifyingGlass)来实现该效果。对于其他效果，您应该阅读有关[触摸事件的信息](http://mobile.tutsplus.com/tutorials/iphone/iphone-sdk-learning-about-touch-events-basic-game-animation/)

```
- (void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{
    UITouch *touch = [[event allTouches] anyObject];

    CGPoint location = [touch locationInView:self.view];

    if (location.x >= img.x && location.x <= img.x && location.y >= img.y && location.y <= img.y)
    {
        // your code here...
    } 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T15:43:04.650

可以使用普通的 UIButton 来执行此操作，但您必须自己编写增长/收缩代码。基本思想是使用 Touch Down 事件来触发增长当前触摸按钮的代码（并缩小任何先前触摸的按钮）。然后使用 Touch Up Inside 事件来确定用户何时将手指从按钮上移开。接收到 Touch Up Inside 的按钮将是用户最后触摸的按钮。

# java - 如何获取在 void 方法中实例化的对象？

> ID：15412946
> 
> 赞同：0
> 
> 时间：2013-03-14T15:08:20.760
> 
> 标签：java, variables, methods

问题是我有2节课。第一类有一个创建第二类对象的方法。是否可以在没有返回语句的情况下获取该对象？也不让它成为一个领域

例子：

//第一类

```
public class First {

    public First() {
    }

    public void aMethod(Object o) {
        Second s = new Second(o);
    }
} 
```

//二等

```
public class Second {

    public Second() {
    }
} 
```

通过单击按钮调用该方法。

编辑：很抱歉造成混乱。但我不想更改代码的原因是因为我正在进行 JUnit 测试。

这两个类实际上是 jFrames，我正在尝试测试按钮。在第一类中，该方法通过按钮调用。在该方法中，它创建了第二个 Jframe。在这个 Jframe 中，我还想测试一个按钮，这就是为什么我需要实例化的 jFrame 对象。在 aMethod() 中，我还传递了第二个 JFrame 需要的一些参数。所以我不能单独测试它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:18:24.093

我能想到的有两种可能：

`aMethod()`1）例如添加参数`List list (or other types has Second Field)`，然后`list.add(new Second())`调用者可以从列表中获取它（最后一个元素）

2）另一个类（如果有的话），有一个静态字段`private static Second second`，你必须编写setter/getter，还要关心线程安全问题......那么你可以在实践中`aMethod()` `Foo.setSecond(new Second());`非常**糟糕**。

最后，我会问，你真的需要这样做吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T15:12:21.453

这完全取决于您的 First 对象是/需要的线程安全程度。

您可以设置一个实例变量，然后公开一个 getter，但也许您正试图在其他一些约束内工作，因为这似乎是仅返回值的一种非常奇怪的替代方法。

```
public class First {
    private Second s;
    public First() {
    }

    public void aMethod() {
         s = new Second();
    }

   public Second getSecond(){
        return s;
   }
} 
```

编辑：另一个答案，因为我以某种方式错过了无字段约束。

您可以使用 Observable 模式，以便您的客户端 Object 注册为 First 的侦听器，然后您可以这样做；

```
Second s = new Second();
setChanged();
notifyObservers(s); 
```

[http://docs.oracle.com/javase/6/docs/api/java/util/Observable.html](http://docs.oracle.com/javase/6/docs/api/java/util/Observable.html)

同样，这似乎有点矫枉过正，也许您可​​以提供更多关于您无法编辑方法签名或使用字段的原因的上下文。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T15:16:56.550

您也可以在传递给方法调用的参数中返回它。就像是：

```
 public void aMethod(Result result) {
             s = new Second();
             result.val = s;
        } 
```

其中 Result 可能是具有 Second 类型成员的类。或者也许是一个通用类：

```
Result<Second> 
```

但我不确定这会比简单的回报更好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-28T16:41:13.950

最常见的是使用所谓的工厂模式

```
public class First {

public First() {
}

public Second aMethod(Object o) {
    return new Second(o);
} 
```

}

# java - 如何将 SQL 查询转换为休眠

> ID：15412947
> 
> 赞同：0
> 
> 时间：2013-03-14T15:08:23.520
> 
> 标签：java, mysql, sql, hibernate

当我尝试运行它时，我得到“无法在类上找到适当的构造函数”。

SQL：

```
select c.*, count(s.student_id)
from class_tbl c    
left join students_tbl s on c.class_id = s.student_id
group by c.class_id 
```

这是我尝试过但似乎不起作用的方法 - HQL：

```
select new Class(class, count(students.studentId))
from Class as class    
left join class.students as students
group by class.classId 
```

我的对象类上有一个构造函数，例如：

```
public Class(Class class, long studentCount){
    // [...]
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:24:49.937

首先，不要使用 Class 作为类名，它是一个保留字。

我认为您的 HQL 应该如下所示：

```
"select new map(class, count(students.studentId) as studentCount) from Class class left 
join fetch class.students students group by class.classId"); 
```

# java - 优先禁用声音无法正常工作

> ID：15412953
> 
> 赞同：2
> 
> 时间：2013-03-14T15:08:32.710
> 
> 标签：java, android

我有一个偏好活动，其中只有一个设置，声音打开或关闭，它在我的所有游戏中都可以正常工作，除了在我的主菜单中，我仍然可以听到按钮点击的声音。但是，在我退出游戏并重新开始后，我的声音就关闭了。我的所有活动中的代码都完全相同，但不知何故，在游戏重新启动之前，它对主要活动不起作用。那是怎么回事？显然代码正在运行，但有些地方不对劲。无论如何，这是代码，不是全部，只是与此问题相关的代码......只有一个按钮，用于退出......以及下面，以防万一，我将发布整个活动代码：

```
public boolean music;
MediaPlayer buttonClicks;

SharedPreferences getPrefs = PreferenceManager.getDefaultSharedPreferences(getBaseContext());
        music = getPrefs.getBoolean("checkbox", true);

buttonClicks = MediaPlayer.create(this, R.raw.click);

dugme5.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                if(music == true){
                    buttonBack.start();
                        }
                finish();

            }
        }); 
```

全班：

```
public class Menu extends SwarmActivity implements OnClickListener{

    private boolean isNetworkConnected() {
          ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
          NetworkInfo ni = cm.getActiveNetworkInfo();
          if (ni == null) {
           // There are no active networks.
           return false;
          } else
           return true;
         }

    MediaPlayer buttonClicks;
    MediaPlayer buttonBack;
    Button dugme1, dugme2, dugme3, dugme4, dugme5, dugme6;
    TextView tvKviz;
    public boolean music;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        SharedPreferences getPrefs = PreferenceManager.getDefaultSharedPreferences(getBaseContext());
        music = getPrefs.getBoolean("checkbox", true);

        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);

        setContentView(R.layout.menu);

        //if ( Swarm.isEnabled() ) {
        Swarm.init(this, 4583, "e8398d93819da3d6d5f7d13f5b5a0deb");
        //}

        addListenerOnButton();

        boolean firstrun = getSharedPreferences("PREFERENCE", MODE_PRIVATE).getBoolean("firstrun", true);
        if (!firstrun){
            Intent swarm = new Intent("rs.androidaplikacijekvizopstekulture.SWARMPOPUP");
            startActivity(swarm);
        // Save the state
        getSharedPreferences("PREFERENCE", MODE_PRIVATE)
            .edit()
            .putBoolean("firstrun", false)
            .commit();
        }

        if ((!firstrun)&&(!isNetworkConnected())){
            Intent netPopup = new Intent("rs.androidaplikacijekvizopstekulture.NETPOPUP");
            startActivity(netPopup);
        }
    }

    private void addListenerOnButton() {
        Typeface naslov = Typeface.createFromAsset(getAssets(), "Lobster.ttf");
        Typeface dugmad = Typeface.createFromAsset(getAssets(), "Bebas.ttf");
        buttonClicks = MediaPlayer.create(this, R.raw.click);
        buttonBack = MediaPlayer.create(this, R.raw.button31);
        tvKviz = (TextView) findViewById(R.id.tvKviz);
        dugme1 = (Button) findViewById(R.id.bStart);
        dugme2 = (Button) findViewById(R.id.bPravila);
        dugme3 = (Button) findViewById(R.id.bTopScores);
        dugme4 = (Button) findViewById(R.id.bPodesavanja);
        dugme5 = (Button) findViewById(R.id.bIzlaz);
        dugme6 = (Button) findViewById(R.id.bKontakt);
        dugme1.setTypeface(dugmad);
        dugme2.setTypeface(dugmad);
        dugme3.setTypeface(dugmad);
        dugme4.setTypeface(dugmad);
        dugme5.setTypeface(dugmad);
        dugme6.setTypeface(dugmad);

        tvKviz.setTypeface(naslov);

        dugme1.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                if(music == true){
            buttonClicks.start();
                }
            startActivity(new Intent("rs.androidaplikacijekvizopstekulture.IZBOR"));

            }
        });
        dugme2.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                if(music == true){
                    buttonClicks.start();
                    Intent pref = new Intent("rs.androidaplikacijekvizopstekulture.PRAVILA");
                    startActivity(pref);
                        }
            }

        });

        dugme3.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                if(music == true){
                    buttonClicks.start();
                        }
                Swarm.showLeaderboards();
            }
        });

        dugme4.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                if(music == true){
                    buttonClicks.start();
                        }
                Intent pref = new Intent("rs.androidaplikacijekvizopstekulture.PREFS");
                startActivity(pref);

            }
        });
        dugme5.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                if(music == true){
                    buttonBack.start();
                        }
                finish();

            }
        });
        dugme6.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                if(music == true){
                    buttonClicks.start();
                        }
                Intent email = new Intent(Intent.ACTION_SEND);

                email.putExtra(Intent.EXTRA_EMAIL, new String[] { "marjanbazalac@gmail.com" });
                // email.putExtra(Intent.EXTRA_CC, new String[]{ to});
                // email.putExtra(Intent.EXTRA_BCC, new String[]{to});
                email.putExtra(Intent.EXTRA_SUBJECT, "subject...");
                email.putExtra(Intent.EXTRA_TEXT, "poruka...");

                // need this to prompts email client only
                email.setType("message/rfc822");

                try {
                    startActivity(Intent.createChooser(email, "Send mail..."));
                } catch (android.content.ActivityNotFoundException ex) {
                    Toast.makeText(Menu.this, "There are no email clients installed.", Toast.LENGTH_SHORT).show();
                }

            }
        });

    }

    public boolean onCreateOptionsMenu(android.view.Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
    public boolean onOptionsItemSelected(MenuItem item){
        switch (item.getItemId()){
        case R.id.menu_contact:
            Intent email = new Intent(Intent.ACTION_SEND);

            email.putExtra(Intent.EXTRA_EMAIL, new String[] { "marjanbazalac@gmail.com" });
            // email.putExtra(Intent.EXTRA_CC, new String[]{ to});
            // email.putExtra(Intent.EXTRA_BCC, new String[]{to});
            email.putExtra(Intent.EXTRA_SUBJECT, "subject...");
            email.putExtra(Intent.EXTRA_TEXT, "poruka...");

            // need this to prompts email client only
            email.setType("message/rfc822");

            try {
                startActivity(Intent.createChooser(email, "Send mail..."));
            } catch (android.content.ActivityNotFoundException ex) {
                Toast.makeText(Menu.this, "There are no email clients installed.", Toast.LENGTH_SHORT).show();
            }
            return true;
        }
        return false;
    }

    public void onClick(View v) {
        // TODO Auto-generated method stub

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:16:01.943

据我所知，您只是在创建活动时检查首选项，在`onCreate()`. 这就是为什么在游戏重新开始之前它不会改变的原因。

如果您希望它在每次单击按钮时检查它，只需编写一个简单的函数：

```
public boolean isMusicEnabled()
{
    SharedPreferences getPrefs = PreferenceManager.getDefaultSharedPreferences(getBaseContext());
    return getPrefs.getBoolean("checkbox", true);
} 
```

现在，`if(music == true)`您可以使用`if(isMusicEnabled())`.

或者，将检查移至`onResume()`，以便在从首选项活动返回菜单时调用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T15:16:04.523

您正在 Activity 的`onCreate()`方法中获得偏好。除非您`finish()`的主要活动在某处，否则它将保持“创建”状态，直到活动因其他原因完成或被系统关闭。

如果您获得偏好并更新您的声音设置`onStart()`，`onRestart()`我认为您会发现它按预期工作。

# c - 如何在 windows 或 linux 中查找 C 函数的经过时间

> ID：15412960
> 
> 赞同：1
> 
> 时间：2013-03-14T15:08:43.710
> 
> 标签：c, performance, timer, elapsedtime

我正在一个函数中执行一些操作`my_task`。我想计算 CPU 执行这个函数需要多少时间（或时钟周期），因为我要对这个函数进行性能改进。所以我参考了[windows API](http://www.songho.ca/misc/timer/timer.html)并编写了下面的代码。

```
typedef struct timer
{
    LARGE_INTEGER t1;
    LARGE_INTEGER t2;
    LARGE_INTEGER frequency;
}MY_TIMER_S;

int start_timer(MY_TIMER_S *a)
{
    QueryPerformanceFrequency(&a->frequency);
    QueryPerformanceCounter(&a->t1);
}

int stop_timer(MY_TIMER_S *a)
{
    double elsapsedtime;
    QueryPerformanceCounter(&a->t2);
    elapsedtime = (a->t2.QuadPart - a->t1.QuadPart) * 1000.0 / a->frequency.QuadPart;
    printf("Elapsed time is %lf ms\n", elapsedtime);
}

void main()
{
    MY_TIMER_S a = {0};
    int i = 0;

    for (i = 0; i < 3; i++)
    {
        start_timer(&a);
        my_task();
        stop_timer(&a); 
    }
} 
```

输出是

```
Elapsed time is 0.113352 ms
Elapsed time is 0.203253 ms
Elapsed time is 0.104254 ms 
```

这三个值精确到纳秒，但不精确。我之所以这样想，是因为在我的系统中并行运行的其他应用程序发生了进程切换。我检查了我的任务管理器，它显示为 124 个进程正在运行。所以我重新启动了我的系统（现在任务管理器中有 84 个进程），然后输出是

```
Elapsed time is 0.083162 ms
Elapsed time is 0.113223 ms
Elapsed time is 0.074258 ms 
```

在我用`start /high` [command](https://stackoverflow.com/questions/4208/windows-equivalent-of-nice)执行我的 exe 之后，我也没有得到精度值。

我的问题是如何在 windows 或 linux 中以更精确的方式计算函数的运行时间。

环境：i5 处理器上的 32 位 Windows 7，带有 Visual Studio 2005 C 编译器的 4Gb 内存

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T15:17:48.387

而不是做

```
for (i = 0; i < 3; i++)
{
    start_timer(&a);
    my_task();
    stop_timer(&a); 
} 
```

做

```
for (i = 0; i < 3; i++)
{
  start_timer(&a);
  for (j = 0; j < 30000; j++)
  {        
    my_task();        
  }
  stop_timer(&a); 
} 
```

# iphone - 为什么我的网络服务请求在 3G 连接上超时？苹果手机

> ID：15412961
> 
> 赞同：1
> 
> 时间：2013-03-14T15:08:45.160
> 
> 标签：iphone, web-services, connection, 3g

我向Web服务发出请求，但是当我选择3G连接时，调用了didfailwitherror方法并显示错误“请求超时”。当连接是 wifi 时，我得到了预期的结果。

我正确实现了所有可以触发的方法，但我不知道如何解决这个问题。这会发生吗，因为反应太大了？我也增加了 timeoutInterval，但没有成功。

这是回应：

[{“价值”：“2009 年 9 月 1 日 - 2009 年 10 月 23 日”}，{“价值”：“2009 年 9 月 1 日 - 2009 年 9 月 30 日”}，{“价值”：“17 noiembrie - 25 noiembrie 2009”}，{“价值” ：“2009 年 12 月 7 日 - 12 月 16 日”}，{“价值”：“2010 年 2 月 22 日 - 2010 年 2 月 29 日”}，{“价值”：“2010 年 8 月 1 日 - 8 月 31 日”}，{“价值”：“18 月 18 日 - 30 noiembrie 2010"}, {"value" : "14 februarie - 31 martie 2011"}, {"value" : "26 aprilie - 29 aprilie 2011"}, {"value" : "29 iunie - 20 iulie 2011"} ，{“价值”：“2011 年 9 月 6 日 - 9 月 14 日”}，{“价值”：“2011 年 10 月 10 日 - 2011 年 12 月 6 日”}，{“价值”：“2011 年 12 月 7 日 - 12 月 31 日”}，{“价值”：“2012 年 2 月 15 日 - 2012 年 3 月 30 日”}，{“价值”：“2012 年 4 月 5 日 - 2012 年 5 月 9 日”}，{“价值”：“2012 年 5 月 5 日”}，{“价值”：“ 05 noiembrie - 22 noiembrie 2012"}，{"value"："23 noiembrie - 2012 年 12 月 6 日"}，{"value"："03 decembrie - 2012 年 12 月 28 日"}]

这是代码：

```
 NSURL * url = [NSURL URLWithString:[NSString stringWithFormat:@"%@api-v2.asmx", MainUrl]];

NSMutableURLRequest * request = [NSMutableURLRequest requestWithURL:url
                                                        cachePolicy:NSURLRequestUseProtocolCachePolicy
                                                    timeoutInterval:50.0];

NSString * parameters = [[NSString alloc] initWithString:[self XmlRequest]];
NSLog(@"Request=%@", parameters);
NSString * msgLength = [NSString stringWithFormat:@"%d", [parameters length]];

[request addValue:@"text/xml; charset=utf-8" forHTTPHeaderField:@"Content-Type"];
[request addValue:@"http://tempuri.org/GetIndexLinkedTable" forHTTPHeaderField:@"SOAPAction"];
[request addValue:msgLength forHTTPHeaderField:@"Content-Length"];
[request setHTTPMethod:@"POST"];
[request setHTTPBody:[parameters dataUsingEncoding:NSUTF8StringEncoding]];

NSURLConnection * connection = [[NSURLConnection alloc] initWithRequest:request delegate:self startImmediately:YES];

if (connection){
    self.responseData = [NSMutableData data];
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:45:14.430

据我所知，连接应该保持活跃。`NSURLConnection`就网络数据传输而言，它是一个非常智能的类。但是，您可以尝试一些事情。有一个属性`NSURLRequest`可以设置超时间隔。可以设置如下

```
request.timeoutInterval = 60.0 
```

试试这个看看它是否有帮助，因为我听说在构造函数中使用它存在一些问题。您的数据可能不足以保证超时，因此还要检查您的服务器设置以确保它能够接受请求，并且还设置了合适的超时间隔。

# c - 使用 Unicode \uxxxx 的 UTF-8 格式输出

> ID：15412963
> 
> 赞同：1
> 
> 时间：2013-03-14T15:08:51.113
> 
> 标签：c, unicode, utf-8, arduino, output

我在这一点上被困在用[UTF-8](http://en.wikipedia.org/wiki/UTF-8)格式的字符串写入文件。我现在有 4E25 的值（例如）。但我需要写入带有前缀 \u 的文本文件。由于我不能直接将 a 附加`\u`到`4E25`，我该怎么做才能在[C](http://en.wikipedia.org/wiki/C_%28programming_language%29)中输出“\u4e25” ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:46:50.270

`\u`被解释为值的一部分。ie`\u00aa`在您的代码中不会被解释为后跟字符的转义字符`0024`。编译器只会将所有该序列转换为正确的字节（在本例`0xc2a3`中为 UTF-8）。

例如，没有什么可以阻止您使用`printf("\u00aa");`，但您不能这样做`printf("\u%s", str);`。如果您需要直接获取 UTF-8 代码，您可以使用八进制，例如

`printf("\302\243 \n"); // print UTF-8 sequence directly`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T15:27:08.453

您是说您只是想将文本字符串打印`"\u4e25"`到文件，但您不能因为编译器正在解释转义序列并打印实际的 unicode 字符？`'\'`如果是这样，答案很简单：字符的转义码是`\\`. 所以你会`fprintf` `"\\u4e25"`在你的源代码中生成`"\u4e25"`文件。

# sql - ORA-00001 违反唯一约束 (string.string)

> ID：15412976
> 
> 赞同：0
> 
> 时间：2013-03-14T15:09:15.303
> 
> 标签：sql, oracle, plsqldeveloper

我有两个彼此相同的表，并且`t1`具有比 更多的数据。我正在使用此查询将丢失的数据从to插入。`t2``t2``t1``t2``t1`

```
insert into t1
select * from t2
where not exist ( select * from t1
                  where t1.key1 = t2.key1
                  and t1.key2 = t2.key2) 
```

运行此查询时，我得到： ORA-00001 Unique constraint (string.string) 违反错误。

这两个表有`key1`和`key2`作为键。

由于唯一的约束是两个键，我不明白为什么会出现该错误。

编辑：我现在在“索引”中注意到有 2 个约束都是唯一类型的。

第一个是：key1，random_column 第二个是：key2

带来不便敬请谅解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:18:38.797

以防万一对唯一约束有不同的理解，我假设唯一约束是两个字段上的一个唯一索引。如果您对 key1 有唯一约束，对 key2 有唯一约束，那么当 t1 中存在具有相同 t2.key1 值但不同 t2.key2 值的记录时，这将失败，因为添加记录会导致两个t1 中的记录具有相同的 key1 值，这是由 key1 上的唯一约束所禁止的。

如果这是您所拥有的，您需要一个包含两个字段的唯一索引，而不是列约束。

一种可能性是 t2 中的值具有 NULL key1 或 NULL key2。

在表达式中，NULL 输入总是会导致 NULL 结果被认为是错误的。

因此，如果 t2 有一条 key1 为 NULL 且 key2 值为 'value2' 的记录，则 where 子句正在评估

```
select * from t1
where t1.key1 = NULL and t1.key2 = 'value2' 
```

这不等于

```
select * from t1
where t1.key1 is NULL and t1.key2 = 'value2' 
```

相反 t1.key1 = NULL 将是不真实的，选择将无法返回结果，exist 将是 false 并且 NOT(exist) 将是 true。但是如果 t1 已经有这样的记录，唯一性约束就会失败。

所以使用这个插入语句。

```
insert into t1
select * from t2
where not exist ( select * from t1
                  where (t1.key1 = t2.key1 or (t1.key1 is null and t2.key1 is null))
                  and (t1.key2 = t2.key2 or (t1.key2 is null and t2.key2 is null))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-11T13:05:32.943

使用*MINUS*结果集操作的理想情况

```
insert into t1
select * from t2
minus
select * from t1 
```

# ruby-on-rails - 如何测试使用来自 Devise 的 current_user 信息的控制器方法？

> ID：15412977
> 
> 赞同：1
> 
> 时间：2013-03-14T15:09:15.893
> 
> 标签：ruby-on-rails, rspec, devise, rspec-rails

我正在尝试测试从设计的 current_user 获取 user_id 的控制器方法。

在其他已回答的问题之后，我尝试使用 User mock_up 登录，但它给了我与[#<RSpec::Core::ExampleGroup::Nested_1::Nested_1:0x1057fd428> 错误的未定义方法 `sign_in'相同的问题使用 Devise 设置 RSpec](https://stackoverflow.com/questions/7141763/undefined-method-sign-in-for-rspeccoreexamplegroupnested-1nested-10/15400791#15400791)。在那个问题中，接受的答案说您不能在 rspec 集成测试中使用设计助手。

既然如此，我如何测试需要登录用户执行的控制器方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T13:58:42.627

你为什么不模拟“current_user”？由于它来自设计，它已经过测试......你应该没有覆盖问题与你的用户在测试中模拟它

# mysql - 嵌套 Where, Like or like MySql Query 不关心 Where 子句

> ID：15412980
> 
> 赞同：1
> 
> 时间：2013-03-14T15:09:27.290
> 
> 标签：mysql, where-clause, sql-like

我正在做一个新项目，对于这个项目，我需要一个存储在我的数据库中的商店“搜索引擎”。我对商店的名称和地址进行了 Like 查询，但仅限于商店有效的地方（设置为 1）。我的查询看起来像这样：

```
SELECT * 
FROM (`shops`) 
WHERE `shop_valid` = 1 
  AND `shop_address` LIKE '%lyon%' 
   OR `shop_name` LIKE '%lyon%' 
ORDER BY `shop_offer` desc 
LIMIT 5 
```

此查询返回的结果与名称和地址是正确的，但其中一些“shop_valid”设置为 0。例如，当我删除商店地址上的子句时，该查询适用于所有“shop_valid”设置为 1。像这样：

```
SELECT * 
FROM (`shops`) 
WHERE `shop_valid` = 1 
  AND `shop_name` 
LIKE '%lyon%' 
ORDER BY `shop_offer` desc 
LIMIT 10 
```

希望有人可以帮助我，我被困了一段时间......</p>

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T15:12:13.487

```
SELECT * FROM (`shops`) 
WHERE `shop_valid` = 1 
AND (`shop_address` LIKE '%lyon%' OR `shop_name` LIKE '%lyon%') 
ORDER BY `shop_offer` desc LIMIT 5 
```

你必须使用括号。当`OR`条件的一部分为真时，另一部分无关紧要。

# java - 某些命名空间中bean的spring父子上下文关系

> ID：15412981
> 
> 赞同：1
> 
> 时间：2013-03-14T15:09:28.243
> 
> 标签：java, xml, spring, namespaces

我想创建子 spring 上下文，我可以在其中定义对 aave 有好处的 bean。例如，我有一个很好的 jdbc 数据源，但它无法初始化我不希望 who 上下文崩溃

我使用

公共类 OptionalFactoryBean { AbstractApplicationContext child;

```
@Autowired
ApplicationContext parent;

public void init() {
    try {
        child = new ClassPathXmlApplicationContext(
                new String[] { "/java/dbpool/examples/sample/datasources/config/child-context.xml" }, parent);
    } catch (Throwable t) {
        System.out.println("Error init child context");
    }

}

public Object getBean(String name) {
    if (child != null) {
        return child.getBean(name);
    } else {
        return null;
    }

} 
```

但我想在 XML 中做类似的事情。我想知道我是否可以定义一个自定义名称空间并注册我的解析器，如[http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/extensible-xml.html](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/extensible-xml.html)

spring 中是否有任何钩子，我可以在某些命名空间中为 bean 定义父子关系？

# javascript - 如何使 Angular 中的 html 视图可重用

> ID：15412983
> 
> 赞同：-4
> 
> 时间：2013-03-14T15:09:31.460
> 
> 标签：javascript, angularjs

我是一名 PHP 开发人员，而且我是 Angular 的新手。

你可能知道，使用php可以将html内容拆分成head.html、footer.html等部分，以便在其他地方重复使用。

但是在 Angular 中，每个应用程序中只有一个，而且我只能使用一个带有路由规则的模板文件。

有什么解决办法吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T15:16:06.973

您可以使用[ngInclude](http://docs.angularjs.org/api/ng.directive%3angInclude)或自定义[指令](http://docs.angularjs.org/guide/directive)在特定页面中包含部分内容。

# ruby-on-rails-3.2 - 如何将目标添加到 Rails 表单助手？

> ID：15412984
> 
> 赞同：0
> 
> 时间：2013-03-14T15:09:32.830
> 
> 标签：ruby-on-rails-3.2

我正在使用`form_for`帮助程序并希望它提交到 iframe。

```
<%= form_for(section, :target => 'new_section_frame') do |f| %>
  ...
<% end %> 
```

然后我应该能够调用`$('form').submit()`并将表单提交到 iframe。除了目标不存在于输出 html 中之外，它会起作用。关于表单助手的[Rails 指南](http://guides.rubyonrails.org/form_helpers.html)没有这个特定的示例。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T15:50:15.323

与 html 相关的帮助程序选项`form_for`必须在 html 键中。像这样：

```
<%= form_for(section, :html => {:target=>'new_section_frame'}) do |f| %>
  ...
<% end %> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-09-21T12:35:40.860

这要短得多，并且应该在最近的 Rails 版本中工作：

```
<%= form_for(section, target: '_new') %> 
```

# ios - 如何让地址簿权限弹出窗口显示在顶部？

> ID：15412985
> 
> 赞同：1
> 
> 时间：2013-03-14T15:09:35.567
> 
> 标签：ios, addressbook, abaddressbook

我正在指导一个由 7 年级和 8 年级学生组成的团队，他们正在开发一个小型应用程序，该应用程序以大格式显示地址簿中的选择。你可以在 callmeapp.org 查看他们的一般项目。我们被困在如何提示用户许可以便我们可以访问地址簿。基本上用户提示没有正确显示。仅供参考，我们已经知道通过设置>常规>重置>重置位置和隐私来清除权限。

我们正在使用 xCode 4.6 并在运行版本 6.1.2 的 iPhone MC918LL/A 上进行测试。

我们从 DavidPhilipOster 在我们的 appdelegate.m didfinishlaunchingwithoptions 方法中的此线程中的响应代码开始：[如何在 iOS 6 中正确使用 ABAddressBookCreateWithOptions 方法？](https://stackoverflow.com/questions/12083643/how-do-i-correctly-use-abaddressbookcreatewithoptions-method-in-ios-6). 我们进行了一些编辑以清除我们遇到的错误。

现在，该应用程序启动到黑屏并在那里停留至少 24 秒，此时该应用程序似乎关闭，显示下方的权限提示。接受将我们发送到桌面。当我们重新打开应用程序时，它就像权限已被清除一样工作。或者，如果我们在屏幕为黑色时点击主页按钮（手机上的方形按钮），它会关闭以显示上述权限提示。权限窗口应在很短的延迟后显示，然后在用户授予权限时将我们留在应用程序中。

我们停留在一些 NSLog 点以查看发生了什么。我已将它们留在代码中以防万一。它将显示点 1、2、5，然后等待。清除提示 3、7、4 后，即使手机显示桌面，也要输入。

任何帮助或提示将不胜感激。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    NSLog(@"Point 1");
    ABAddressBookRef addressBook = ABAddressBookCreateWithOptions(NULL,NULL);

    __block BOOL accessGranted = NO;

    if (ABAddressBookRequestAccessWithCompletion != NULL) { // we're on iOS 6
        NSLog(@"Point 2");
        dispatch_semaphore_t sema = dispatch_semaphore_create(0);

        ABAddressBookRequestAccessWithCompletion(addressBook, ^(bool granted, CFErrorRef error) {
            NSLog(@"Point 3");
            accessGranted = granted;
            dispatch_semaphore_signal(sema);
            NSLog(@"Point 4");
        });
        NSLog(@"Point 5");

        dispatch_semaphore_wait(sema, DISPATCH_TIME_FOREVER);
        dispatch_release(sema);
    } else { // we're on iOS 5 or older
        NSLog(@"Point 6");

        accessGranted = YES;

    } 
    NSLog(@"Point 7");

    return YES;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-14T15:55:02.013

这里的主要问题是您在 application:didFinishLaunchingWithOptions: 中执行此操作。简而言之，这需要转移到另一个地方。iOS 对应用程序启动过程中发生的事情以及可能需要多长时间进行了限制。对于一个简单的应用程序，您可以将它移动到您的主视图控制器中，并在向最终用户显示任何结果之前检查它。

目前，因为您在此方法中使用了信号量，所以它会阻止函数返回。iOS 对等待的时间有硬性限制 - 然后它会杀死应用程序。简而言之，弹出窗口保持打开状态 - 但是当您按下 OK 时 - 应用程序被终止，因为 application:didFinishLaunchingWithOptions: 方法没有及时完成执行。

此外，我根本不推荐这里的信号量方法。有更好的方法来解决这个问题（见下文）。下面的代码只是一个例子。

```
- (void)setupViewWithContactsData
{
    // Do Something
}

- (void)setupViewWithoutContactsData
{
    // Do Something because Contacts Access has been Denied or Error Occurred
}

- (void)viewDidLoad
{
    [self checkForAddressBookAccess];
}

- (void)checkForAddressBookAccess
{
    if (ABAddressBookRequestAccessWithCompletion == NULL)
    {
        // iOS5 or Below
        [self setupViewWithContactsData];
        return;
    }
    else
    {
        // iOS6
        if (ABAddressBookGetAuthorizationStatus() == kABAuthorizationStatusNotDetermined)
        {
            ABAddressBookRequestAccessWithCompletion(addressBookRef, ^(bool granted, CFErrorRef error) {
          if(error)
                  {
                      [self setupViewWithoutContactsData];
                  }
                  else
                  {
                      [self setupViewWithContactsData];
                  }
             });
         }
         else if (ABAddressBookGetAuthorizationStatus() == kABAuthorizationStatusAuthorized) 
         {
             [self setupViewWithContactsData];
         }
         else 
         {
             [self setupViewWithoutContactsData];
         }
    }
} 
```

# php - PHP 模板语言

> ID：15412988
> 
> 赞同：0
> 
> 时间：2013-03-14T15:09:37.730
> 
> 标签：php, regex

我编写简单的模板语言，但嵌套语句有问题。例如我使用 Foreach，这个正则表达式：

```
preg_match('/\{foreach +\$(.*?)\}(.*?){\/foreach\}/sui', $this->content, $matches); 
```

一切正常，但是当我在 foreach 中嵌套 foreach 时，出现错误。因为正则表达式获取第一个开始标记但第二个结束标记。

> **{foreach $XY}**
> 
> {foreach $YX} **{/foreach}**
> 
> {/foreach}

我该如何解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:21:17.660

正如评论中所说，正则表达式不是解析嵌套上下文的最佳选择。（特别是如果您想构建结果的解析树。）

无论如何，你可以匹配它：

```
(?xi) {foreach \s++ \$\w++ } (?: [^{}]++ | (?R) )*+ {/foreach} 
```

可以用作：

```
preg_match_all(',{foreach \s++ \$\w++ } (?: [^{}]++ | (?R) )*+ {/foreach},xi', $str, $matches); 
```

这将为您提供最外层的匹配项。

# ruby-on-rails - 如何在创建用户后立即重置身份验证令牌

> ID：15412989
> 
> 赞同：0
> 
> 时间：2013-03-14T15:09:43.390
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, activeadmin

在 ActiveAdmin 中，当我创建一个新用户（不是管理员用户）然后在控制台中检查时，authentication_token 为 nil。我需要手动发出reset_authencation_token！在用户上，以便他可以连接。
如何在创建用户后立即填充此令牌？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T15:29:57.010

```
before_save :ensure_authentication_token 
```

将此添加到您的用户模型中。你不必使用`before_save`任何类似的钩子就可以了。

# c# - 如何打开设置魅力的当前页面

> ID：15412999
> 
> 赞同：0
> 
> 时间：2013-03-14T15:10:18.730
> 
> 标签：c#, xaml, windows-8, windows-runtime

如何在 Settings_CommandsRequested 上获取当前页面或框架？我想从设置窗格导航。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T17:03:13.773

当前`Frame`是您正在显示的，因此您可以定义如何访问它。您可以将实例引用保存为 App 类上的静态字段，或使用 IoC 容器来访问它。最简单的方法是对您的 App 类进行以下更新：

```
sealed partial class App : Application
{
    public static Frame RootFrame { get; private set; }

    ...

    protected override void OnLaunched(LaunchActivatedEventArgs args)
    {
        Frame rootFrame = this.RootFrame = Window.Current.Content as Frame;

        // Do not repeat app initialization when the Window already has content,
        // just ensure that the window is active
        if (rootFrame == null)
        {
            // Create a Frame to act as the navigation context and navigate to the first page
            rootFrame = this.RootFrame = new Frame();
            ... 
```

然后你可以简单地打电话`App.RootFrame`来获取你的框架。