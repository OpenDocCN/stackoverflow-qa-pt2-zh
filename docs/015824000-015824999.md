# StackOverflow 问答 15824000-15824999

# javascript - 仅对特定文件禁用 JSHint 缩进检查

> ID：15824005
> 
> 赞同：10
> 
> 时间：2013-04-05T00:28:23.990
> 
> 标签：javascript, indentation, jshint

我使用启用了缩进强制选项并将其设置为 4 的 jshint，并且希望对代码库中的大多数文件保持这种方式。

不过，在一个特定文件中，我想禁用此检查。

我尝试在顶部添加 jshint 评论，但没有奏效：

```
/* jshint indent: false */ 
```

这太糟糕了，因为这种语法适用于其他选项。例如，我可以使用以下命令禁用驼峰式强制执行选项：

```
/* jshint camelcase: false */ 
```

我怎样才能做到这一点？

一些答案表明缩进会自动启用白色选项，但我尝试了以下操作，但它也不起作用：

```
/* jshint white: false */ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T06:53:10.860

目前这是不可能的。JSHint 验证`indent`选项的值如下：

```
if (typeof val !== "number" || !isFinite(val) || val <= 0 || Math.floor(val) !== val) {
    error("E032", nt, g[1].trim());
    return;
} 
```

正如您在对问题的评论中注意到的那样，如果该值不是大于 0 的整数，这将引发错误。尽管它实际上并没有对该整数设置最大限制。

根据您运行 JSHint 的方式，可能会覆盖不关心缩进的文件的默认配置。例如，使用[JSHint Grunt 任务](https://github.com/gruntjs/grunt-contrib-jshint)，您可以这样做：

```
grunt.initConfig({
    jshint: {
        options: {
            /* Don't set indent here */
        },
        uses_defaults: ["somefile.js"],
        with_overrides: {
            options: {
                indent: 4
            },
            files: {
                src: ["someotherfile.js"]
            }
        }
    }
}); 
```

* * *

**更新**

我已经[打开了一个拉取请求](https://github.com/jshint/jshint/pull/989)，其中包含针对此问题的建议修复，所以请密切关注，我们将看看这个功能是否是 JSHint 团队想要添加的东西。

# ios - 以编程方式尝试 NSLayoutContraint 给出“无法同时满足约束”。

> ID：15824012
> 
> 赞同：0
> 
> 时间：2013-04-05T00:29:02.757
> 
> 标签：ios, ios6, autolayout

我似乎在以编程方式为我正在使用的 UITableView 设置约束时遇到了一些问题。我的尝试如下，并且尝试了所有`translatesAutoresizingMaskIntoConstraints`可能的组合。

```
 self.view.translatesAutoresizingMaskIntoConstraints = NO;
    _tableView.translatesAutoresizingMaskIntoConstraints = NO;
    [self.view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|-100-[_tableView]-20-|" options:0 metrics:nil views:NSDictionaryOfVariableBindings(_tableView)]]; 
```

我只是想在 UIViewController 上的 UITableView 的开头和底部添加一个空格。有人可以帮忙吗？

长长的错误如下。

```
Unable to simultaneously satisfy constraints.
    Probably at least one of the constraints in the following list is one you don't want. Try this: (1) look at each constraint and try to figure out which you don't expect; (2) find the code that added the unwanted constraint or constraints and fix it. (Note: If you're seeing NSAutoresizingMaskLayoutConstraints that you don't understand, refer to the documentation for the UIView property translatesAutoresizingMaskIntoConstraints) 
(
    "<NSAutoresizingMaskLayoutConstraint:0x75c8500 h=-&- v=-&- UITableView:0x799e400.midY == UIView:0x71a4ec0.midY>",
    "<NSLayoutConstraint:0x71a5800 V:[UITableView:0x799e400]-(20)-|   (Names: '|':UIView:0x71a4ec0 )>",
    "<NSLayoutConstraint:0x71a5a60 V:|-(100)-[UITableView:0x799e400]   (Names: '|':UIView:0x71a4ec0 )>"
)

Will attempt to recover by breaking constraint 
<NSLayoutConstraint:0x71a5800 V:[UITableView:0x799e400]-(20)-|   (Names: '|':UIView:0x71a4ec0 )>

Break on objc_exception_throw to catch this in the debugger.
The methods in the UIConstraintBasedLayoutDebugging category on UIView listed in <UIKit/UIView.h> may also be helpful.
2013-04-04 20:06:57.648 New eCard[29731:c07] Unable to simultaneously satisfy constraints.
    Probably at least one of the constraints in the following list is one you don't want. Try this: (1) look at each constraint and try to figure out which you don't expect; (2) find the code that added the unwanted constraint or constraints and fix it. (Note: If you're seeing NSAutoresizingMaskLayoutConstraints that you don't understand, refer to the documentation for the UIView property translatesAutoresizingMaskIntoConstraints) 
(
    "<NSAutoresizingMaskLayoutConstraint:0x75c8540 h=-&- v=-&- UITableView:0x799e400.height == UIView:0x71a4ec0.height>",
    "<NSAutoresizingMaskLayoutConstraint:0x75c8500 h=-&- v=-&- UITableView:0x799e400.midY == UIView:0x71a4ec0.midY>",
    "<NSLayoutConstraint:0x71a5a60 V:|-(100)-[UITableView:0x799e400]   (Names: '|':UIView:0x71a4ec0 )>"
)

Will attempt to recover by breaking constraint 
<NSLayoutConstraint:0x71a5a60 V:|-(100)-[UITableView:0x799e400]   (Names: '|':UIView:0x71a4ec0 )>

Break on objc_exception_throw to catch this in the debugger.
The methods in the UIConstraintBasedLayoutDebugging category on UIView listed in <UIKit/UIView.h> may also be helpful.
Unable to simultaneously satisfy constraints.
    Probably at least one of the constraints in the following list is one you don't want. Try this: (1) look at each constraint and try to figure out which you don't expect; (2) find the code that added the unwanted constraint or constraints and fix it. (Note: If you're seeing NSAutoresizingMaskLayoutConstraints that you don't understand, refer to the documentation for the UIView property translatesAutoresizingMaskIntoConstraints) 
(
    "<NSAutoresizingMaskLayoutConstraint:0x75c8540 h=-&- v=-&- UITableView:0x799e400.height == UIView:0x71a4ec0.height>",
    "<NSAutoresizingMaskLayoutConstraint:0x75c8500 h=-&- v=-&- UITableView:0x799e400.midY == UIView:0x71a4ec0.midY>",
    "<NSLayoutConstraint:0x71a5800 V:[UITableView:0x799e400]-(20)-|   (Names: '|':UIView:0x71a4ec0 )>"
)

Will attempt to recover by breaking constraint 
<NSLayoutConstraint:0x71a5800 V:[UITableView:0x799e400]-(20)-|   (Names: '|':UIView:0x71a4ec0 )>

Break on objc_exception_throw to catch this in the debugger.
The methods in the UIConstraintBasedLayoutDebugging category on UIView listed in <UIKit/UIView.h> may also be helpful. 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2015-02-27T11:02:52.673

我发现这个关于 UICollectionView 的问题。我想这是开始调试的一个好点。

[UICollectionView Cell + UiLabel 与 AutoLayout](https://stackoverflow.com/questions/25771026/uicollectionview-cell-uilabel-with-autolayout)

我尝试过但没有成功的解决方案的其他一些链接： [https :](https://blog.safaribooksonline.com/2012/10/27/tip-unsatisfiable-auto-layouts-in-ios-6/) [//blog.safaribooksonline.com/2012/10/27/tip-unsatisfiable-auto-layouts-in-ios-6/ UITableView with autolayout and offset constraints](https://stackoverflow.com/questions/25495377/uitableview-with-autolayout-and-offset-constraints)

# r - R 中的 plm、滞后变量和拟合值

> ID：15824019
> 
> 赞同：1
> 
> 时间：2013-04-05T00:29:49.593
> 
> 标签：r, lag, plm

我有一个面板数据集并尝试使用 plm 包来估计池化 OLS 模型。本质上，我正在做两个回归。首先，我尝试估计以下等式

```
y(t) = a + (a1 + a2*x1(t-1)) * x2(t) = a + a1*x2(t) + a2*x1(t-1)*x2(t) 
```

其中 (t-1) 表示应该滞后 1 个周期，* 表示简单乘法。我想提取拟合项 (a1 + a2*x1(t-1))，称其为“拟合”，然后在另一个回归中使用它，例如

```
z(t) = b + b1*fit(t) + b2*x1(t-1) 
```

我的面板 df 不平衡，可能如下：

```
Individual Date x1 x2 y
1 2001 0.5 0.2 0.3
1 2002 0.4 0.3 0.4
1 2003 0.6 0.15 0.5
1 2004 0.5 0.25 0.3
2 2002 0.5 0.25 0.1
2 2003 0.6 0.4 0.2
2 2004 0.7 0.7 0.3 
```

我尝试按如下方式拟合第一个回归：

```
df.plm <- plm(y ~ x2 + lag(x1,1):x2, data=df) 
```

这会给我前面提到的回归吗？而且，如果是这样，我如何从上面获得术语`(a1 + a2*x1(t-1))`，以便我可以在下一次回归中使用它？

# java - 如何将null返回到int方法

> ID：15824021
> 
> 赞同：0
> 
> 时间：2013-04-05T00:30:00.573
> 
> 标签：java

我是编程新手。我正在开发一个问答游戏软件。在这里，我希望将倒计时打印为“3,2,1，go...go...go”

```
 package t2;

import java.util.Scanner;
import java.util.Timer;
import java.util.TimerTask;

public class Stopwatch {
static int interval;
static Timer timer;

public static void main(String[] args) {
    Scanner sc = new Scanner(System.in);
    int delay = 1000;
    int period = 1000;
    timer = new Timer();
    interval = 3;
    System.out.println("3");
    timer.scheduleAtFixedRate(new TimerTask() {

        public void run() {
            System.out.println(setInterval());

        }
    }, delay, period);
}

 private static final int setInterval() {
    String go="go...go...go";
    if (interval == 2)
    {

        timer.cancel();
        return go;
    }

      return --interval;

}
} 
```

这表示 setInterval() 具有 int 作为返回值。如果我放置`System.out.print("go");` 在`return go;`它的位置打印 go 并打印 1 ，这是超出要求的。请任何朋友可以告诉我如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T00:36:39.117

一种选择是更改您的 setInterval() 方法以返回如下字符串：

```
private static final String setInterval() {
    String go="go...go...go";
    if (interval == 2)
    {

        timer.cancel();
        return go;
    }

    --interval;
    return String.valueOf(interval);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T00:35:06.183

将返回类型更改`setInterval`为 object 以利用重载`println`方法，并且条件应检查 1 而不是 2。也使用`print`而不是`println`在同一行上具有输出。

```
private static final Object setInterval() {
    String go="go...go...go";
    if (interval == 1)
    {

        timer.cancel();
        return go;
    }
    return --interval;
} 
```

**完整示例**

```
 package t2;

    import java.util.Scanner;
    import java.util.Timer;
    import java.util.TimerTask;

    public class Stopwatch {
        static int interval;
        static Timer timer;

        public static void main(String[] args) {
            Scanner sc = new Scanner(System.in);
            int delay = 1000;
            int period = 1000;
            timer = new Timer();
            interval = 3;
            System.out.print("3,");
            timer.scheduleAtFixedRate(new TimerTask() {

                public void run() {
                    System.out.print(setInterval() + ",");

                }
            }, delay, period);
        }

        private static final Object setInterval() {
            String go = "go...go...go";
            if (interval == 1) {

                timer.cancel();
                return go;
            }

            return --interval;
        }
    } 
```

# jquery - Ajax json 解析器错误

> ID：15824022
> 
> 赞同：0
> 
> 时间：2013-04-05T00:30:01.920
> 
> 标签：jquery, ajax, json, parse-error

我不断收到以下数据的 JSON 解析器错误（萤火控制台说“没有子对象”）：

（字符串）每次迭代的 var 数据

```
var data='['; 
data+=   '{ "title": "  Nac", "no1": "1212","no2": "12126"},';
data+=   '{ "title": "  Nac", "no1": "1212","no2": "12126"},';
data+=   '{ "title": "  Nac", "no1": "1212","no2": "12126"},';
data+= ']'; 
```

和 javascript 解析 json

```
var json = JSON.parse(data) 
```

和 jQuery AJAX 请求

```
 $.ajax({
        type: "POST",
        data: json,
        url : 'ticket.php',
        dataType: 'json',
        async: false,
        contentType : 'application/json; charset=utf-8',
        error: function(jqXHR, exception) 
        {
            if (jqXHR.status === 0) 
            {
                $('.item').html("err");
            } else if (jqXHR.status == 404) 
            {
                $('.item').html('err!');
            } else if (jqXHR.status == 500) 
            {
                alert("err!");
            } else if (exception === 'parsererror') 
            {
                $('.item').html('err parsererror');
            } else if (exception === 'timeout') 
            {
                $('.item').html('err!');
            } else if (exception === 'abort') 
            {
                $('.item').html('err!');
            } else 
            {
            $('.item').html('err!');
            }
        },
        success : function(data)
        {
            alert("okey");
        }           
    }); 
```

并且 ticket.php 是完全空的，因为我不知道如何在 php 中从 ajax 接收 json 数据

任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T00:35:02.920

`JSON.parse`给你一个 JavaScript 对象，如果你`json`在一个帖子中发送，那么发送 json 而不是一个对象。也不是构建一个 json 字符串，而是构建一个对象，然后将其字符串化

```
var data= [{
    "title": "  Nac",
    "no1": "1212",
    "no2": "12126"
},
{
    "title": "New",
    "no1": "12",
    "no2": "121"
},
{
    "title": "San",
    "no1": "1227",
    "no2": "1"
}];
var json = JSON.stringify(data);
        $.ajax({
        type: "POST",
        data: json,
        url : 'ticket.php',
        dataType: 'json',
        async: false,
        contentType : 'application/json; charset=utf-8',
        ... 
```

# asp.net - .NET GridView 更新，e.OldValues 为空

> ID：15824025
> 
> 赞同：1
> 
> 时间：2013-04-05T00:30:42.473
> 
> 标签：asp.net, vb.net, gridview, objectdatasource, updating

我正在使用 AJAX TabContainer 并在每个绑定到 ObjectDataSource 的选项卡中都有一个 asp GridView。ObjectDataSource 根据选择的选项卡返回不同的对象 (TabContainer AutoPostBack="True")。我将 ObjectDataSource 绑定到 GridView 基于 TabContainer 加载期间在代码中选择的选项卡，仅当 IsPostBack 时，因为在第一次加载时 TabContainer 不可见。我没有在其他任何地方绑定 GridView。GridView 中的字段是 Eval 而不是 Bind，因为参数是动态添加到 ObjectDataSource 的。

这是一个批量更新 GridView，所有字段均可编辑。当我更新 GridView 时，我看不到 e.OldValues。如果 GridView 中的字段设置为绑定，我可以检索 e.NewValues 螺母 e.OldValues 仍然为空...

有谁知道这笔交易是什么？

```
<asp:ObjectDataSource ID="odsEquipment" runat="server" TypeName="EquipmentDB" SelectMethod="GetEquipment" SortParameterName="sortExpression" UpdateMethod="UpdateEquipment">
    <SelectParameters>
        --Params
    </SelectParameters>
    <UpdateParameters>
        --Params
    </UpdateParameters>
</asp:ObjectDataSource>

<asp:TabContainer ID="tcDisciplines" runat="server" CssClass="ajax_tabController" ScrollBars="Horizontal" AutoPostBack="True">
--Tabs and GridViews with no properties 
```

代码背后：

```
Protected Sub tcDisciplines_Load(sender As Object, e As EventArgs) Handles tcDisciplines.Load
    If IsPostBack Then
        For Each discipline In disciplineList
            tcDisciplines.Tabs(discipline.ID).HeaderText = discipline.Discipline
            tcDisciplines.Tabs(discipline.ID).TabIndex = discipline.ID

            Dim gv As GridView = TryCast(tcDisciplines.Tabs(discipline.ID).Controls(0).FindControl("gv" + discipline.Abbr), GridView)
            gv.Visible = False

            If tcDisciplines.ActiveTabIndex = discipline.ID Then
                gv.Visible = True

                'Set properties
            End If
        Next
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T18:15:17.187

在 MSDN 上找到了一个小教程， http: [//msdn.microsoft.com/en-us/library/aa992036.aspx#Y3473](http://msdn.microsoft.com/en-us/library/aa992036.aspx#Y3473) 这个解决方法帮助了我。我使用了一个会话而不是一个行列表。

# c# - 在 WCF 服务中传递大量数据

> ID：15824028
> 
> 赞同：4
> 
> 时间：2013-04-05T00:30:58.263
> 
> 标签：c#, .net, wcf, web-services

我已经看到这个问题出现了几次，但没有真正确定的答案（因为很可能没有）......我有一个 WCF 服务需要从 SQL 中返回大约 14,000 行数据，这些数据在 List<> 中排序基于数组。

我的服务配置如下：

```
<system.serviceModel>
<bindings>
  <basicHttpBinding>
    <binding name="BasicHttpBinding_IParts" closeTimeout="00:01:00"
        openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
        allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
        maxBufferSize="2147483647" maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647"
        messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
        useDefaultWebProxy="true">
      <readerQuotas maxDepth="32" maxStringContentLength="2147483647" maxArrayLength="2147483647"
          maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
      <security mode="None">
        <transport clientCredentialType="None" proxyCredentialType="None"
            realm="" />
        <message clientCredentialType="UserName" algorithmSuite="Default" />
      </security>
    </binding>
  </basicHttpBinding>
</bindings>
<serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
<behaviors>
  <serviceBehaviors>
    <behavior>
      <serviceMetadata httpGetEnabled="true"/>
      <serviceDebug includeExceptionDetailInFaults="true"/>
      <dataContractSerializer maxItemsInObjectGraph="2147483647" />
    </behavior>
  </serviceBehaviors>
</behaviors> 
```

我的客户端配置如下所示：

```
<system.serviceModel>
    <bindings>
        <basicHttpBinding>
            <binding name="BasicHttpBinding_IParts" closeTimeout="00:01:00"
                openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
                maxBufferSize="2147483647" maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647"
                messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
                useDefaultWebProxy="true">
                <readerQuotas maxDepth="32" maxStringContentLength="2147483647" maxArrayLength="2147483647"
                    maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
                <security mode="None">
                    <transport clientCredentialType="None" proxyCredentialType="None"
                        realm="" />
                    <message clientCredentialType="UserName" algorithmSuite="Default" />
                </security>
            </binding>
        </basicHttpBinding>
    </bindings>
    <client>
        <endpoint address="http://localhost/RasFuseService/Parts.svc"
            binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IParts"
            contract="MyParts.IParts" name="BasicHttpBinding_IParts" />
    </client>
    <behaviors>
      <serviceBehaviors>
        <behavior name="MyServiceBehavior">
          <dataContractSerializer maxItemsInObjectGraph="2147483647"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
</system.serviceModel> 
```

有些事情不对，因为我收到了错误：

> 格式化程序在尝试反序列化消息时抛出异常：尝试反序列化参数 [http://tempuri.org/:GetSurplusECMResult](http://tempuri.org/:GetSurplusECMResult)时出错。InnerException 消息是“对象图中可以序列化或反序列化的最大项目数为“65536”。更改对象图或增加 MaxItemsInObjectGraph 配额。'。有关更多详细信息，请参阅 InnerException。

即使我明确地为 MaxItemsInObjectGraph 分配了一个最大整数......

我已经阅读了有关流式传输和分页的信息，但是单次返回的数据真的太多了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T13:14:19.910

想通了（打了*额头*）我最终在客户端写了一个不正确的条目。客户端的正确语法应该是：

```
 <behaviors>
    <endpointBehaviors>
      <behavior >
        <dataContractSerializer maxItemsInObjectGraph="2147483647"/>
      </behavior>
    </endpointBehaviors>
  </behaviors> 
```

不是

```
 <behaviors>
    <serviceBehaviors>
      <behavior>
        <dataContractSerializer maxItemsInObjectGraph="2147483647"/>
      </behavior>
    </serviceBehaviors>
  </behaviors> 
```

它现在返回并反序列化我的大数组而不会抱怨......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T02:21:39.380

我有一个案例，我的 WCF 服务一次返回几兆字节的原始表格数据。

XML 序列化很糟糕...大量元素和浪费空间，而且速度也很慢。在这种情况下，我处理了自己的响应生成，并返回了格式为 CSV 数据的数据。客户端生成、发送和解析的速度要快得多。

我使用的是 RESTful WCF（这是在 ASP.NET 将 WCF 替换为 REST 之前），所以我只是从我的 WCF 方法返回了一个 Stream。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T05:06:28.440

在您的客户端配置中，您的行为有一个名称，但您似乎没有使用该名称。在某处使用名称或省略名称以使您的行为成为服务配置中的默认行为。

# php - 将 JSON 数据发布到外部 URL

> ID：15824029
> 
> 赞同：1
> 
> 时间：2013-04-05T00:31:04.330
> 
> 标签：php, javascript, jquery, json, post

如何将 JSON 数据作为 url 字符串发布到外部 url（跨域）并绕过访问控制？

这是一个 jquery .ajax 发布请求，由于 Access-Control-Allow-Origin 而无法发送到外部 url：

```
var json = JSON.stringify(object);

$.ajax({
  type: 'POST',
  url: externalurl,
  data: json,
  dataType: 'json',
  success: function(data){console.log(data);},
  failure: function(errMsg) {
      console.log(errMsg);
  },
}); 
```

我收到了将数据发布到同一域并将“请求传递”到外部域的建议，尽管这个解决方案对我来说没有意义。我正在寻找最安全的解决方案。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T00:54:01.090

我不久前在 PHP 中做过这个。这是“传递请求”的示例。（您需要启用 PHP cURL，这对于大多数安装来说是相当标准的。）

```
<?php
    //Get the JSON data POSTed to the page
    $request = file_get_contents('php://input');

    //Send the JSON data to the right server
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, "http://location_of_server.com/");
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_POST, 1);
    curl_setopt($ch, CURLOPT_HTTPHEADER, array("Content-Type: application/json; charset=utf-8"));
    curl_setopt($ch, CURLOPT_POSTFIELDS, $request);
    $data = curl_exec($ch);
    curl_close($ch);

    //Send the response back to the Javascript code
    echo $data;
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T00:59:35.330

绕过同源策略的一种方法是使用 cURL 进行实际传输。

我将给出一个使用 PHP 的示例，但是您可以在任何服务器端语言上轻松地做到这一点。

在您的服务器上设置一个脚本，例如 send.php

首先你将你的ajax指向send.php

```
var json = JSON.stringify(object);

$.ajax({
    type: 'POST',
    url: send.php,
    data: json,
    dataType: 'json',
    success: function(data){console.log(data);},
    failure: function(errMsg) {
        console.log(errMsg);
    },
}); 
```

然后你的php脚本转发它：

```
<?php
    // Initialize curl
    $curl = curl_init();

    // Configure curl options
    $opts = array(
        CURLOPT_URL             => $externalscriptaddress,
        CURLOPT_RETURNTRANSFER  => true,
        CURLOPT_CUSTOMREQUEST   => 'POST',
        CURLOPT_POST            => 1,
        CURLOPT_POSTFIELDS      => 'field1=arg1&field2=arg2'
    );

    // Set curl options
    curl_setopt_array($curl, $opts);

    // Get the results
    $result = curl_exec($curl);

    // Close resource
    curl_close($curl);

    echo $result;
?> 
```

# ant - 使用带有ant的Java6注释处理器生成struts2 taglib

> ID：15824030
> 
> 赞同：0
> 
> 时间：2013-04-05T00:31:13.847
> 
> 标签：ant, struts2, taglib, apt

我已经编写了一些 Struts2 taglib 并希望将它们打包到一个 jar 中。我没有使用 maven，所以我曾经使用带有 apt 标签和 struts-annotations-1.0.5.jar 的 Ant。我的任务如下所示

```
<target name="generate-taglib" >
<apt classpathref="tags.classpath" factorypathref="tags.classpath"
            srcdir="StrutsTags" compile="false" destdir="dist/apt" fork="true"
            preprocessdir="bin" verbose="false" source="1.5" encoding="utf-8"

            factory="org.apache.struts.annotations.taglib.apt.TLDAnnotationProcessorFactory" includeantruntime="false">

            <compilerarg value="-AtlibVersion=1.0" />
            <compilerarg value="-AjspVersion=2.0" />
            <compilerarg value="-AshortName=mb" />
            <compilerarg value="-Auri=/struts-my-tags" />
            <compilerarg value="-Adescription='My Struts Tags'" />
            <compilerarg value="-AdisplayName='My Struts Tags'" />
            <compilerarg value="-AoutTemplatesDir=${basedir}/dist/taglib-doc" />
            <compilerarg value="-AoutFile=${basedir}/bin/META-INF/struts-my-tags.tld" />
        </apt>
</target> 
```

但是，由于 java 6 apt 已被删除或不受支持，我想在 Java 编译器中使用注释处理器。但我找不到任何直接的例子，我想出了以下

```
<target name="generate-taglib" depends="compile">
       <javac destdir="bin"
          debug="true"
          failonerror="true"
          compiler="javac1.6"
          srcdir="StrutsTags" includeantruntime="false" encoding="utf-8" verbose="true">
            <include name="**/*.java"/>
            <classpath refid="tags.classpath"/>
            <compilerarg line="-proc:only"/>
            <compilerarg line="-processor org.apache.struts.annotations.taglib.apt.TagAnnotationProcessor" />
            <compilerarg line="-s dist/apt" />
            <compilerarg line="-source 6"/>
            <compilerarg value="-AtlibVersion=1.0.1" />
            <compilerarg value="-AjspVersion=2.0" />
            <compilerarg value="-AshortName=mb" />
            <compilerarg value="-Auri=/struts-my-tags" />
            <compilerarg value="-Adescription='My Struts Tags'" />
            <compilerarg value="-AdisplayName='My Struts Tags'" />
            <compilerarg value="-AoutTemplatesDir=${basedir}/dist/taglib-doc" />
            <compilerarg value="-AoutFile=${basedir}/bin/META-INF/struts-my-tags.tld" />
        </javac>
</target> 
```

当我运行此任务时，任务成功完成，但是 struts-my-tags.tld 中没有生成任何内容。

有人可以告诉我有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T08:00:45.350

处理器是针对 APT 接口实现的。所以 about 永远不会奏效。我移植了 APT 版本来实现新的 Java 注释处理器

[struts-annotation-processor](https://github.com/lunaspeed/struts-annotation-processor)

# java - JOptionPane 多维数组输出

> ID：15824033
> 
> 赞同：0
> 
> 时间：2013-04-05T00:31:44.317
> 
> 标签：java, swing, joptionpane

好的，假设我有要显示的多维数组`JOptionPane.showMessageDialog`。我知道在使用时`System.out.println`，您使用 for 循环。但是数组大小由用户输入决定，因此我必须使用增量器。

例如：`userinput[k]`next to `usernumber[k]`then 下一行将是`userinput[k+1]`next to`usernumber[k+1]`

我遇到的麻烦是，通过使用我的循环，它会在单独的窗口中一次设置一个，而不是在一个窗口中的一个表中一起设置一个。

```
for (int k = 0; k < userinput.length; k++){
    JOptionPane.showMessageDialog(null, userinput[k]);
}

for (int k = 0; k < 2; k++){
    JOptionPane.showMessageDialog(null, usernumber[k]);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T00:36:20.150

将您的输出构建为单个`String`.

您可以使用`html`标签来提供额外的格式

```
StringBuilder sb = new StringBuilder(64);
sb.append("<html><table>");
for (int ui = 0; ui = < userinput.length; ui++) {
    sb.append("<tr><td>");
    sb.append(userinput[ui]);
    sb.append("</td>");
    for (int k = 0; k < 2; k++){
        sb.append("<td>");
        sb.append(usernumber[k]);
        sb.append("</td>");
    }
    sb.append("</tr>");
}
sb.append("</table></html>");
JOptionPane.showMessageDialog(null, sb.toString()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T00:34:12.140

使用 a`StringBuilder`并将数组的每个元素连接成一条显示消息，

# ruby-on-rails - Rails Associations has_one 最新记录

> ID：15824041
> 
> 赞同：21
> 
> 时间：2013-04-05T00:32:37.997
> 
> 标签：ruby-on-rails, activerecord, associations

我有以下模型：

```
class Section < ActiveRecord::Base
  belongs_to :page
  has_many :revisions, :class_name => 'SectionRevision', :foreign_key => 'section_id'
  has_many :references

  has_many :revisions, :class_name => 'SectionRevision', 
                       :foreign_key => 'section_id'

  delegate :position, to: :current_revision

  def current_revision
    self.revisions.order('created_at DESC').first
  end
end 
```

最近`current_revision`创建的`revision`. 是否可以`current_revision`变成一个关联，以便我可以执行查询`Section.where("current_revision.parent_section_id = '1'")`？或者我应该`current_revision`在我的数据库中添加一个列，而不是尝试虚拟地或通过关联来创建它？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2014-08-07T03:59:27.113

要在 has_many 上获得最后一个，您需要执行类似于 @jvnill 的操作，除了向关联添加具有排序的范围：

```
has_one :current_revision, -> { order created_at: :desc }, 
  class_name: 'SectionRevision', foreign_key: :section_id 
```

这将确保您从数据库中获得最新版本。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-04-05T01:31:32.693

您可以将其更改为关联，但通常，在查询中使用时，排序`has_one`或`belongs_to`关联总是被错误地解释。在你的问题中，当你把它变成一个关联时，那将是

```
has_one :current_revision, class_name: 'SectionRevision', foreign_key: :section_id, order: 'created_at DESC' 
```

这样做的问题是，当您尝试将其与其他查询结合使用时，它通常会给您错误的记录。

```
>> record.current_revision
   # gives you the last revision
>> record.joins(:current_revision).where(section_revisions: { id: 1 })
   # searches for the revision where the id is 1 ordered by created_at DESC 
```

所以我建议你添加一个`current_revision_id`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-11-07T05:24:46.240

正如@jvnill 提到的，`order`在进行更大的查询时使用停止工作的解决方案，因为`order`' 的范围是完整的查询而不仅仅是关联。

这里的解决方案需要准确的SQL：

```
 has_one  :current_revision, -> { where("NOT EXISTS (select 1 from section_revisions sr where sr.id > section_revisions.id and sr.section_id = section_revisions.section_id LIMIT 1)") }, class_name: 'SectionRevision', foreign_key: :section_id 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-05T01:35:42.650

我了解您想要获取每个部分的最后修订版本具有 parent_section_id = 1 的部分；

我有类似的情况，首先，这是 SQL（请认为类别为您的部分，帖子为修订版，user_id 为 parent_section_id -对不起，如果我没有根据您的需要移动代码，但我必须去）：

```
SELECT categories.*, MAX(posts.id) as M
FROM `categories` 
INNER JOIN `posts` 
ON `posts`.`category_id` = `categories`.`id` 
WHERE `posts`.`user_id` = 1
GROUP BY posts.user_id
having M = (select id from posts where category_id=categories.id order by id desc limit 1) 
```

这是 Rails 中的查询：

```
Category.select("categories.*, MAX(posts.id) as M").joins(:posts).where(:posts => {:user_id => 1}).group("posts.user_id").having("M = (select id from posts where category_id=categories.id order by id desc limit 1)") 
```

这行得通，很难看，我认为最好的方法是“剪切”查询，但是如果您有太多的部分，那么在遍历它们时会出现问题；您也可以将此查询放入静态方法中，而且，您的第一个想法是，在您的sections 表中有一个 revision_id 将有助于优化查询，但会放弃规范化（有时需要），您必须在为该部分创建新修订时更新此字段（因此，如果您要在庞大的数据库中进行大量修订，那么如果您的服务器速度较慢，这可能是个坏主意......）

**更新** 我回来了，呵呵，我正在做一些测试，看看这个：

```
def last_revision
    revisions.last
end

def self.last_sections_for(parent_section_id)
  ids = Section.includes(:revisions).collect{ |c| c.last_revision.id rescue nil }.delete_if {|x| x == nil}

  Section.select("sections.*, MAX(revisions.id) as M")
         .joins(:revisions)
         .where(:revisions => {:parent_section_id => parent_section_id})
         .group("revisions.parent_section_id")
         .having("M IN (?)", ids)
end 
```

我做了这个查询并使用我的表（希望我很好地命名了参数，它与之前的 Rails 查询相同，但我在优化时更改了查询）；留意小组；包含使其在大型数据集中成为最佳选择，抱歉我找不到与 has_one 建立关系的方法，但我会同意这一点，但也要重新考虑你在开头提到的领域。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-19T14:07:28.043

如果您的数据库支持`DISTINCT ON`

```
class Section < ApplicationRecord
  has_one :current_revision, -> { merge(SectionRevision.latest_by_section) }, class_name: "SectionRevision", inverse_of: :section
end 
```

```
class SectionRevision < ApplicationRecord
  belongs_to: :section
  scope :latest_by_section, -> do
    query = arel_table
      .project(Arel.star)
      .distinct_on(arel_table[:section_id])
      .order(arel_table[:section_id].asc, arel_table[:created_at].desc)
    revisions = Arel::Nodes::TableAlias.new(
      Arel.sql(format("(%s)", query.to_sql)), arel_table.name
    )
    from(revisions)
  end
end 
```

它适用于预加载

```
Section.includes(:current_revision) 
```

# php - HTML在嵌入式php上调用POST操作

> ID：15824042
> 
> 赞同：0
> 
> 时间：2013-04-05T00:32:43.983
> 
> 标签：php, html, phpbb, forums

我有一个 HTML 页面，通过 iframe 显示我的 phpBB3 论坛，如下所示：

```
 <iframe name="inlineframe" src="http://www.website.net/forums/index.php" frameborder="0" scrolling="auto" width="100%" height="1500" marginwidth="5" marginheight="5" ></iframe>. 
```

我这样做是为了在论坛顶部显示一个 HTML 编码的菜单栏。

在另一个 HTML 页面（主页）上，我有一个带有输入字段的容器，允许您通过以下代码直接登录到论坛：

```
 <form action="http://www.website.net/login.php?mode=login" method="post">
        <label for="username">Username</label><input type="text" name="username" required>
        <label for="password">Password</label><input type="password" name="password" required>
        <input type="submit" name="login" value="Login" class="loginbtn"/><a href="http://www.website.net/register.php">Register</a>
      </form> 
```

因此，如果用户在框中输入他们的登录信息并点击提交，他们会直接从主页进入论坛并自动登录。

当我将提交按钮直接链接到 phpBB 论坛（没有菜单栏）时，它工作正常，但当它被嵌入时（带有菜单栏）则不行。

如果与嵌入式 PHP 链接 (www.website.net/register.php) 一起使用，浏览器只需将我带到登录页面，而无需输入任何提交的字段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T01:37:46.197

最好的办法是修改你的论坛主题的标题模板并添加菜单栏，例如： http: [//openfantasy.org/forum/](http://openfantasy.org/forum/)

如果你想避免出于任何原因这样做，我建议你应该在 phpBB 中添加一个重定向到你想要登录后的页面。

查看 root\ucp.php (phpBB 3.0.11) 中的第 76-81 行

```
if ($user->data['is_registered'])
{
    redirect(append_sid("{$phpbb_root_path}index.$phpEx"));
}

login_box(request_var('redirect', "index.$phpEx")); 
```

将其更改为带有 IFrame 的页面的 URL，您应该会很好。

# qt - 如何从 QTextStream 制作 QString？

> ID：15824043
> 
> 赞同：9
> 
> 时间：2013-04-05T00:33:02.303
> 
> 标签：qt, qstring

这行得通吗？

```
QString bozo;
QFile filevar("sometextfile.txt");

QTextStream in(&filevar);

while(!in.atEnd()) {
QString line = in.readLine();    
bozo = bozo +  line;  

}

filevar.close(); 
```

bozo 会是 sometextfile.txt 的全部吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-05T00:46:30.563

为什么还要逐行阅读？您可以对其进行更多优化，并在向其添加行时减少不必要的字符串重新分配：

```
QFile file(fileName);
if (!file.open(QIODevice::ReadOnly | QIODevice::Text)) return;
QTextStream in(&file);
QString text;    
text = in.readAll();
file.close(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T01:21:54.060

正如 ddriver 提到的，您应该首先使用`file.open(…);`Other than that, yes`bozo`将包含使用您拥有的代码的整个文件。

在 ddriver 的代码中需要注意的一件事是这`text.reserve(file.size());`是不必要的，因为在以下行中：

```
text = in.readAll(); 
```

这将替换`text`为一个新字符串，因此对的调用`text.reserve(file.size());`将完成未使用的工作。

# c++ - 这个函数对向量的使用没有用吗？

> ID：15824047
> 
> 赞同：0
> 
> 时间：2013-04-05T00:33:47.423
> 
> 标签：c++

我之前看到了这个，对我来说没有任何意义：

```
void generate(std::vector<float> v)
{
 float f = generate_next_float();
 v.push_back(f);
} 
```

如果`v`作为引用或指针发送，那将是有意义的。但它是按值发送的，因此被复制到函数中，对吗？因此，一旦函数终止，所做的任何事情都将`v`立即无用，这`v`超出了范围，被删除了。

我对吗？

也就是说，函数`generate_next_float()`可能会做一些事情，所以不是没用，但是`vector`这里的使用似乎毫无意义。`f`不依赖它，什么也不返回。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T00:37:22.923

是的，就向量而言，`generate()`函数毫无意义；对调用者的更改`v`将不可见。

我有一种感觉，作者`generate()`错过了通过引用作为一种忽视，而不是作为一个计划:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T00:52:24.027

好吧，考虑到 std 容器不进行隐式数据共享，这意味着您将向函数传递一个新的深层副本，将浮点数 push_back 到该新副本中，然后在函数结束后将其丢弃。所以，在我看来，你是对的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T05:23:53.997

在这个函数中 std::vector v 不会改变，因为你没有给出向量作为参考。它只是在函数内复制，复制被更改，但不是原始的。您可以使用：

```
void generate(std::vector<float> &v) //input given as reference
{
  float f = generate_next_float();
  v.push_back(f);
} 
```

# sql - 如何根据相关表更新 DB2 中的值子集？

> ID：15824050
> 
> 赞同：0
> 
> 时间：2013-04-05T00:33:48.717
> 
> 标签：sql, db2, db2-luw

我正在尝试从 DB2 数据库中的 CLOB 字段中删除最后 10 个字符。我可以这样做：

```
UPDATE  report
SET     comment = LEFT(comment, (LENGTH(comment) - 10)) 
```

但是，我想根据报告是否在当前报告期间将截断限制为行的子集。我试过这个...

```
UPDATE  report
SET     comment =
        (   SELECT  LEFT(comment, (LENGTH(comment) - 10))
            FROM    report

                    INNER JOIN report_period
                    ON report.report_period_id = report_period.report_period_id

            WHERE   report_period.name = '2013 Interim Report'  ) 
```

...但我明白了

```
The result of a scalar fullselect, SELECT INTO statement, or
VALUES INTO statement is more than one row 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T00:37:24.013

没关系...问这个问题有助于在我的脑海中清除它。只需将连接移至 WHERE 子句....

```
UPDATE  report
SET     comment = LEFT(comment, (LENGTH(comment) - 10))
WHERE   report_id IN
        (   SELECT  report_id 
            FROM    report

                    INNER JOIN report_period
                    ON report.report_period_id = report_period.report_period_id

            WHERE   report_period.name = '2013 Interim Report'  ) 
```

# android - 谷歌地图没有谷歌API构建目标Android

> ID：15824053
> 
> 赞同：0
> 
> 时间：2013-04-05T00:34:20.577
> 
> 标签：android, google-maps

是否可以在非 Google API 构建目标上运行 Google 地图（API V1 很好）？我有一个没有内置 google api 的特殊模拟器。

当我尝试将 maps.jar 添加到我的项目中的 libs 文件夹中时，MapActivity 可以引用我正在获取下面显示的堆栈跟踪。为此，我正在使用 Google Maps API V1 Maps.jar。

我尝试将清单设置为使用，也将其删除，两者都不起作用。

谢谢！

```
04-04 17:23:20.553: E/AndroidRuntime(12458): FATAL EXCEPTION: main
04-04 17:23:20.553: E/AndroidRuntime(12458): java.lang.RuntimeException: Unable to       instantiate activity          ComponentInfo{com.google.android.maps/com.google.android.maps.MapMainActivity}:    java.lang.RuntimeException: stub
04-04 17:23:20.553: E/AndroidRuntime(12458):    at  android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1569)
04-04 17:23:20.553: E/AndroidRuntime(12458):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
04-04 17:23:20.553: E/AndroidRuntime(12458):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
04-04 17:23:20.553: E/AndroidRuntime(12458):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
04-04 17:23:20.553: E/AndroidRuntime(12458):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-04 17:23:20.553: E/AndroidRuntime(12458):    at android.os.Looper.loop(Looper.java:123)
04-04 17:23:20.553: E/AndroidRuntime(12458):    at android.app.ActivityThread.main(ActivityThread.java:3683)
04-04 17:23:20.553: E/AndroidRuntime(12458):    at java.lang.reflect.Method.invokeNative(Native Method)
04-04 17:23:20.553: E/AndroidRuntime(12458):    at java.lang.reflect.Method.invoke(Method.java:507)
04-04 17:23:20.553: E/AndroidRuntime(12458):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-04 17:23:20.553: E/AndroidRuntime(12458):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-04 17:23:20.553: E/AndroidRuntime(12458):    at dalvik.system.NativeStart.main(Native Method)
04-04 17:23:20.553: E/AndroidRuntime(12458): Caused by: java.lang.RuntimeException: stub
04-04 17:23:20.553: E/AndroidRuntime(12458):    at com.google.android.maps.MapActivity.<init>(Unknown Source)
04-04 17:23:20.553: E/AndroidRuntime(12458):    at com.google.android.maps.MapMainActivity.  <init>(MapMainActivity.java:10)
 04-04 17:23:20.553: E/AndroidRuntime(12458):   at java.lang.Class.newInstanceImpl(Native Method)
 04-04 17:23:20.553: E/AndroidRuntime(12458):   at java.lang.Class.newInstance(Class.java:1409)
04-04 17:23:20.553: E/AndroidRuntime(12458):    at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
04-04 17:23:20.553: E/AndroidRuntime(12458):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1561) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T00:57:27.887

没有。Google API 是必需的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T18:40:13.757

您应该使用 Google Maps Android API v2。API v1 已弃用，您将无法将其用于新应用程序。

API v2 的情况更糟。官方不支持在任何模拟器上运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T01:20:16.693

我认为您可以使用 webView 并从网络服务器加载您的地图。

# regex - 如何形成将解析以下内容的正则表达式？

> ID：15824058
> 
> 赞同：0
> 
> 时间：2013-04-05T00:35:09.323
> 
> 标签：regex

我需要解析以下行：

```
Action(X,X,Cash(50))Action(Y,Y,Material(30,Car,2))Action(I,I,Cash(50)) 
```

输出应如下所示：

```
Action(X,X,Cash(50))
Action(Y,Y,Material(30,Car,2))
Action(I,I,Cash(50)) 
```

我使用的正则表达式是：

```
String tokenRegex = "(Action+\\(([a-zA-Z]+|\\,|([a-zA-Z]+\\(\\d*|[a-zA-Z]+|\\,)\\))+\\))"; 
```

它无法解析“Action(Y,Y,Material(30,Car,2))”，但适用于“Action(X,X,Cash(50))”。我究竟做错了什么。什么是正确的正则表达式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T00:36:52.167

而不是使用正则表达式只是做一些事情的效果

```
string.replace(")A", ")\nA"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T00:50:20.050

我认为这样做：

```
String tokenRegex = "(Action\\([a-zA-Z]+,[a-zA-Z]+,[a-zA-Z]+\\(\\d+(,([a-zA-Z]+|\\d+))*\\)\\))"; 
```

我删除了一些在正则表达式中分组不需要的括号。如果您需要它们来捕获表达式的一部分，则必须将它们添加回来。

# python - 在 Python 中转换和统一 API 数据

> ID：15824062
> 
> 赞同：0
> 
> 时间：2013-04-05T00:35:28.070
> 
> 标签：python, django, api, rest, gevent

我正在尝试从几个第三方 API 中提取相似的数据，所有这些 API 的模式都略有不同，并将它们全部转换为统一的模式以存储在数据库中并通过统一的 API 公开。这实际上是对已经这样做的系统的重写，减去存储在数据库中，但它很难测试并且不是很优雅。我想我会向社区寻求一些智慧。这里有一些想法/我想要实现的目标。

*   一种指定从外部 API 模式到内部模式的模式映射的简单方法。我意识到转换为统一模式可能会丢失数据中的一些细微差别，但这就是生活。这种模式映射可能不容易做到，并且可能从我发现的有关此事的学术论文中过度杀伤。
*   另一种解决方案是允许第三方开发外部 API 的接口。这些第三方的代码质量可能知道也可能不知道，但可以通过彻底的测试来确定。
*   因此系统应该易于测试，我想通过模拟外部 API 调用来获得可重现的数据并确保解析和转换正确完成。
*   崩溃的外部 API 接口之一不应导致其余接口崩溃。
*   某种模式验证/方法来检测外部 API 模式是否在没有警告的情况下更改
*   这最终将被集成到 Django 项目中，因此可以将其编写为 Django 应用程序，这可能会使单元和集成测试更容易。另一方面，我想让它尽可能地与 Django 分离。虽然 API 接口必须知道要转换成什么格式，但这可以在运行时指定吗？

我错过了愿望清单中的任何内容吗？不切实际？走错路了？很想得到一些反馈。

我不确定是否有库/操作系统项目已经做了一些。我必须重新发明的轮子越少越好。作为操作系统项目，这其中的任何部分是否有价值？

在之前的版本中，我生成了一组处理单个请求的线程。尽管我从未使用过它，但有人告诉我应该将 gevent 视为处理此问题的一种方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T04:04:48.363

对于您的第二个要点，您应该查看[Temboo](http://temboo.com)。Temboo 规范了对 100 多个 API 的访问，这意味着您可以使用您选择的语言的通用语法与它们进行交流。在这种情况下，您将使用 Temboo Python SDK -[在此处](http://temboo.com/download)可用。

（全面披露：我在 Temboo 工作）

# wordpress - Wordpress - 将自定义字段添加到类别页面

> ID：15824063
> 
> 赞同：2
> 
> 时间：2013-04-05T00:35:35.837
> 
> 标签：wordpress

我想在`select`wordpress 的类别页面中添加一个自定义字段。我尝试搜索 google 和 WordPress，但我发现的解决方案已经过时并且不支持 ajax 更新。

请向我展示一个将自定义字段添加到类别页面并使用 ajax 的示例。谢谢

**更新：**

下面的链接解决了我的问题。简单而真棒

[http://en.bainternet.info/2011/wordpress-category-extra-fields](http://en.bainternet.info/2011/wordpress-category-extra-fields)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T05:27:29.937

有很多解决方案，但它们都有一个共同点。他们正在保存添加到选项表中的类别而不是帖子元表中的额外字段值。因为在下一次 wp 更新中，可能会丢失自定义类别字段值。因此，如果您的问题由此得到解决，那么野兔就是这样做的链接。

[与您的问题相关的整个讨论。](https://wordpress.stackexchange.com/questions/8736/add-custom-field-to-category)

[基于您发布的问题的教程。](http://en.bainternet.info/2011/wordpress-category-extra-fields)

# php - $_GET 在 Codeigniter 2.1.3 中不起作用

> ID：15824064
> 
> 赞同：0
> 
> 时间：2013-04-05T00:35:45.383
> 
> 标签：php, codeigniter

我想`ref`从看起来像这样的 URI 中获取价值`http://localhost/project/?ref=6` 现在我知道这`$_GET['ref']`在 codeigniter 中不起作用。我试图通过设置来启用它，`$config['allow_get_array'] = TRUE;`但它不起作用。

我在某处阅读了关于使用`$this->input->get('ref')`但没有运气的信息。在使用它之前，我确实`input`在 config.php 中加载了库。

> 注意：我想在模型中访问这个值

在 config.php 中添加

```
$config['uri_protocol'] = "PATH_INFO";
$config['permitted_uri_chars'] = 'a-z 0-9~%.:_\-?'; 
```

并评论了现有的`$config['uri_protocol'] = 'REQUEST_URI';`和`$config['permitted_uri_chars'] = 'a-z 0-9~%.:_\-';`

控制器代码为：

```
parse_str($_SERVER['QUERY_STRING'], $_GET);
        $ref = $this->security->xss_clean($_GET['ref']);
        log_message('info','>>>>>>>>>>>>>>>>>>enter email_invites method::'.$ref); 
```

但我仍然没有得到任何价值，并且不知何故我没有看到任何日志消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T01:18:33.230

此行将解析 URL 并`$_GET`使用 URL 的参数填充数组：

```
parse_str(substr(strrchr($_SERVER['REQUEST_URI'], "?"), 1), $_GET); 
```

然后可以像通常访问数组一样访问它，例如：

```
$ref = $_GET['ref']; 
```

您的配置 - *application/config/config.php* - 应设置如下：

```
$config['uri_protocol'] = "PATH_INFO"; 
```

# entity-framework-5 - DatePicker.Value.Set 绑定到数据源的错误

> ID：15824070
> 
> 赞同：4
> 
> 时间：2013-04-05T00:36:41.683
> 
> 标签：entity-framework-5, datetimepicker

我有一个名为 binding 的 bindingsource 控件，在 VS2012 中的一个表单上，以及一个绑定到它的 DateTimePicker 控件。

对于绑定属性，我有 MinDate = 1/01/1753 和 MaxDate = 31/12/9998 值已通过从日历中选择 Today 来设置 2013 年 5 月 4 日上午 11:27

我设置了一个绑定源使用

```
var dset = base.Context.ContactEvents;
var qry = dset.Where(p => p.Id > 0).OrderBy(x => x.Id);
qry.Load();
this.bindingSource.DataSource = dset.Local.ToBindingList(); 
```

绑定源的使用方式如下；

```
 public void RefreshBindingDataSourceAndPosition(BindingSource binding)
  {
    binding.DataSource = this.bindingSource.DataSource;  // error raised here
    binding.Position = this.bindingSource.Position;
  } 
```

错误信息是

> System.ArgumentOutOfRangeException 越过本机/托管边界 HResult=-2146233086 消息=“1/01/0001 12:00:00 AM”的值对“值”无效。“值”应介于“MinDate”和“MaxDate”之间。参数名称：值 Source=System.Windows.Forms ParamName=Value StackTrace：在 System.Windows.Forms.DateTimePicker.set_Value(DateTime value) InnerException：

我可以通过不绑定 Data Picker 并将其设置在 EventsBindingSource_CurrentChanged 事件中来解决该问题

然而，不得不这样做似乎很奇怪。我怎样才能让数据绑定工作？

[[更新] 这个问题和这里](https://stackoverflow.com/questions/5554109/visual-studio-2010-binding-issues)描述的类似描述 的问题，我试图在一个更简单的项目中重现该问题，以便尝试找出原因，但它在更简单的项目中有效。该项目也可以在另一台计算机上运行。我的计算机同时使用 SQL Server 2012 和 2008R2 时出现此问题。我尝试在控制面板中更改日期格式和国家/地区。我也尝试了 format 属性的不同设置。我还尝试将日期字段设置为支持 null。

当我将错误复制到剪贴板时，它显示以下内容；

> System.Reflection.TargetInvocationException 发生 HResult=-2146232828 Message=Exception 已由调用目标引发。Source=mscorlib StackTrace：在 System.RuntimeMethodHandle.InvokeMethod（对象目标，Object[] 参数，签名 sig，布尔构造函数）在 System.Reflection.RuntimeMethodInfo.UnsafeInvokeInternal（Object obj，Object[] 参数，Object[] 参数）InnerException： System.ArgumentOutOfRangeException HResult=-2146233086 消息=“1/01/0001 12:00:00 AM”的值对于“值”无效。“值”应介于“MinDate”和“MaxDate”之间。参数名称：值 Source=System.Windows.Forms ParamName=Value StackTrace：在 System.Windows.Forms.DateTimePicker。

我的EF课如下

```
public class ContactEvent : LoggedEntity
{

    public virtual SortableBindingList<ContactEventAttendee> Attendees { get; private set; }
    public virtual ContactEventType ContactEventType { get; set; }
    public string Details { get; set; }
    public DateTime? EventTime { get; set; }
    public virtual SortableBindingList<ContactEventItem> Items { get; private set; }
    public int State { get; set; }
    public string Title { get; set; }
    public override string ToString()
    {
        return "Contact Events";
    }
} 
```

它继承自

```
public abstract class LoggedEntity
{

   public LoggedEntity()
    {
        this.RowId = Guid.NewGuid();
        this.RowVersionId = 0;
        AppDomain dm = AppDomain.CurrentDomain;  // Gets the current application domain for the current Thread.
        object s = AppDomain.CurrentDomain.GetData("SiteNumber");
        this.SourceSiteNumber = Convert.ToInt32(s);
    }

    public LoggedEntity(int SiteNumber)
    {
        // the following 3 are used to identify the version 
        this.RowId = Guid.NewGuid();
        this.RowVersionId = 0;
        this.SourceSiteNumber = SiteNumber;
    }

    public int Id { get; set; }
    public Guid RowId { get; set; }

    [ConcurrencyCheck]
    public int RowVersionId { get; set; }
    public int SourceSiteNumber { get; set; }

} 
```

[更新] 类似的问题在[这里](https://stackoverflow.com/questions/16322718/setting-datasource-of-bindingsource-throws-argumentoutofrangeexception-exception?noredirect=1#comment26172527_16322718)

[[更新]这里](http://go4answers.webhost4life.com/Example/systemreflectiontargetinvocationexcept-80689.aspx)的另一个让我觉得我需要看看如何处理密钥。

[更新] 我在输出窗口中注意到以下内容

```
A first chance exception of type 'System.ArgumentOutOfRangeException' occurred in System.Windows.Forms.dll 
```

[更新]这导致我到 [这里](https://stackoverflow.com/questions/4393092/c-sharp-a-first-chance-exception-of-type-system-invalidoperationexception)

打开调试选项后，我发现了一个错误

```
Invalid object name 'dbo.__MigrationHistory'. 
```

然而，这是 EF5 中的一个已知错误

[[更新]：我在这里](https://stackoverflow.com/questions/3851924/inotifydataerrorinfo-argumentoutofrangeexception-when-raising-errorschanged-even)找到了另一个有类似未解决问题的人 发现我在运行 .EXE 时没有问题

[更新]我可以通过在工具->选项->调试->常规中禁用“异常跨应用程序域或托管/本机边界时中断”来跳过错误

[更新] 我添加了以下内容，所以我可以检查控件属性。

> ```
>  private void EventsBindingSource_BindingComplete(object sender, BindingCompleteEventArgs e)
>     {
>         // If the BindingComplete state is anything other than success, 
>         // set the ErrorProvider to the error message.
>         if (e.BindingCompleteState != BindingCompleteState.Success)
>         {
>             errorProvider1.SetError((Control)e.Binding.BindableComponent, e.ErrorText);
>             var errdesc = e.ErrorText;
>             var ctrl = (Control)e.Binding.BindableComponent;
>               var info = string.Format(
>                "{0} {1}",errdesc,
>                ctrl.ToString());
> 
>             Debug.Print(info);
>             // "Value of '1/1/0001 12:00:00 AM' is not valid for 'Value'. 
>              'Value' should be between 'MinDate' and 'MaxDate'.\r\nParameter name: 
>              Value System.Windows.Forms.DateTimePicker, Value: 1/1/1900 12:00:00 AM"
> 
>         }
>         else
>         {
>             errorProvider1.SetError((Control)e.Binding.BindableComponent, "");
>         }
>     } 
> ```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-02-16T18:01:41.497

异常的原因可能是 DatePicker 的 DataBinding "Value" 属性已设置为 BindingSource 字段。只需设置 DatePicker 的 DataBinding“Text”属性，数据绑定才能正常工作。检查 DatePicker 的 DataBinding“值”属性字段中是否有值，一旦删除，问题就会消失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-03T20:00:25.113

似乎关键问题是该属性是 Nullable DateTime。用于转录 DateTimePicker 组件的空值可能是“1 / 01/0001 12:00:00 AM”，这会产生与 MinValue 和 MaxValue 的配置相关的问题。使用 DataBinding 的 Advanced 选项卡可以选择将要使用的值设置为 null 解决此问题的一种方法是将值设置为 null 作为 MinDate，或者我们可以将 MinDate 设置为值 '01 / 01/0001 12 :00:00 上午'。尽管我的经验有限，但我相信这可能是您问题的根源。链接[http://msdn.microsoft.com/en-us/library/aa480734.aspx](http://msdn.microsoft.com/en-us/library/aa480734.aspx)可以在属性 DataBinding 的“高级”选项卡上看到其他内容。

# ruby - 如何序列化 AMF 正文并使用 Ruby RocketAMF 发送

> ID：15824074
> 
> 赞同：0
> 
> 时间：2013-04-05T00:36:53.893
> 
> 标签：ruby, amf

我正在尝试序列化 AMF 正文并使用 RestClient.post 发送它。

从 Charles 代理，我可以反序列化我的请求正文并显示如下：

```
# s is the raw binary from request body
pp RocketAMF::Envelope.new.populate_from_stream(s).messages 
```

![在此处输入图像描述](https://i.stack.imgur.com/HuLY2.png)

但是，我无法弄清楚如何序列化这样的对象并将其（使用 RestClient.post）发送到正文中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T02:39:48.230

您需要更改它使用的 URL，但以下是正确的方法。

```
require 'rubygems'
require 'RocketAMF'
require 'rest-client'

data = [] # whatever data you want
env = RocketAMF::Envelope.new :amf_version => 3
env.messages << RocketAMF::Message.new('BatchController.authenticate_iphone', '/1', data)
res = RestClient.post "http://localhost:9292/amf", env.to_s, :content_type => 'application/x-amf'
puts RocketAMF::Envelope.new.populate_from_stream(res).inspect 
```

# prolog - 定义过程时未定义的过程

> ID：15824075
> 
> 赞同：1
> 
> 时间：2013-04-05T00:36:54.013
> 
> 标签：prolog

我正在尝试定义一个简单的二叉搜索树。它存储在这样的列表中：[Key, Left Tree, Right Tree]。我相信我已经这样做了，但是当我尝试在现有树上使用 bstadd 时，我收到以下错误。

```
?- bstadd(19,[],T1), bstadd(9, T1, T2).
ERROR: bstadd/3: Undefined procedure: right/3
   Exception: (8) right(9, [[], []], _G3233) ? 
```

我在第 8 行用三个参数定义了正确。下面是我的代码：

```
% bstadd(Key, Tree, NewTree)
% add the element Key to the tree Tree and return an 
% new tree as NewTree. Element in the left subtree L must be less than Key and 
% elements in the right subtree R must be greater than Key.  This means duplicates 
% are not allowed in the binary search tree. Don’t put print statements in this 
% predicate.

right(Key, [TreeKey|TreeTail], [TreeKey|NewTree]) :- grabtail(KEY, TreeTail, NewTree]).
grabtail(KEY, [TreeKey|_], [TreeKey|NewTree]) :- bstadd(KEY, TreeKey, NewTree).
bstadd(KEY, [], [KEY,[],[]]).
bstadd(KEY, [TreeKey|TreeTail], [TreeKey|NewTree]) :- KEY > TreeKey, grabtail(KEY, TreeTail, NewTree).
bstadd(KEY, [TreeKey|TreeTail], [TreeKey|NewTree]) :- KEY < TreeKey, right(KEY, TreeTail, NewTree).

% inorder(Tree) 
% given a binary search tree Tree perform an inorder traversal of the 
% Tree printing (use print(X) ) the value of each vertex inorder.
inorder([TreeHead|TreeTail]) :- inright(TreeTail), print(TreeHead), intail(TreeTail).
inright([_|TreeTail]) :- intail(TreeTail).
intail([TreeHead|_]) :- inorder(TreeHead). 
```

任何和所有的见解都是值得赞赏的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T00:54:33.087

加载文件时，请始终查看系统所说的内容。我确信存在某种语法错误。在您的情况下，`right/3`最后包含语法错误。有一个无与伦比的收盘价`]`。

```
right(Key, [TreeKey|TreeTail], [TreeKey|NewTree]) :- grabtail(KEY, TreeTail, NewTree]).
                                                                                   ^^^ 
```

# java - 动态命名文本文件作为输出

> ID：15824076
> 
> 赞同：1
> 
> 时间：2013-04-05T00:36:57.073
> 
> 标签：java, printstream

我有一个 for 循环，在每次迭代中都应该生成一个文本文件。问题是命名文本文件。由于缺乏Java知识，我不知道如何动态命名输出文件。名称应取决于 for 循环的索引。提前致谢。我正在使用打印流。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T00:38:48.073

只需从您的索引变量构建一个文件名。

```
for(int x = 0; x < 10; x++){
    String fileName = "file_" + x + ".txt";
    File file = new File(fileName);
} 
```

# java - 得到递归方法的错误输出

> ID：15824077
> 
> 赞同：0
> 
> 时间：2013-04-05T00:37:00.567
> 
> 标签：java, recursion

```
 public static int getIndexOf(char ch, String str) {
    if (str == null || str.equals("")) {
        return 0;
     //base case
    }else{
        char first = str.charAt(0);
        if (ch != first) {
            return -1;
     //returns -1 when the character cannot be found within the string
        }else{
            int rest = str.length() - 1;
            if (str.charAt(rest) == ch) {
                return rest; 
            }
            return lastIndexOf(ch, str.substring(0, rest));
            //recursive case
        }
    }
} 
```

这是我的方法，它返回输入字符串的输入字符的索引。但是，当我在交互平面中运行它时，它返回错误的数字。例如，当我输入“a”和“peach”时，它应该返回 2，但它返回 -1。仅当在字符串中找不到字符时，此方法才应返回 -1。谁能告诉我如何处理它？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T00:40:03.230

好吧，您为什么不逐步分析一下逻辑，看看会发生什么。

```
getIndexOf('a', "peach") 
```

方法进入，字符串不为空或为空，因此它落入下一行代码。

```
char first = str.charAt(0); // this is 'p'

if (ch != first) {  // is 'p' equal to 'a'? no. so return -1
        return -1; 
```

然后你的其余逻辑将永远不会执行。你能看到如何解决这个问题吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T00:59:43.070

输出没有错，执行是！

先用文字思考。如果所需字符是字符串中的第一个字符，则结果为零。否则它是（1 + 切断第一个字符后保留的字符串中的索引）。现在对单词进行编码：

```
return (str.charAt(0) == ch) ? 0 : 1 + getIndexOf(ch, str.substring(1)); 
```

这还不能处理字符根本不在字符串中的情况。在这里`charAt(0)`调用最终会抛出`IndexOutOfBoundsException`，因为`str`没有一个！

处理这种情况的最简洁的方法是捕获异常。所以你有两个函数：`mustGetIndexOf`，它是上面的递归关系，和`getIndexOf`，它在 a 中调用上面的一个`try {} catch() {}`，在这种情况下返回 -1。

当然，如果您不想允许异常，您可以使用`if`特殊情况测试递归调用的结果`-1`。代码更丑陋，但它会工作。每当`-1`看到 a 时，`-1`再次返回。这会`-1`一直传播回调用者。异常以类似的方式“展开”堆栈上的递归调用，只需一次斩波，而不是您的`if`语句将执行的逐步调用方式。

我不会给你完整的代码，所以你可以继续学习。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T00:42:19.777

您的以下代码部分意味着它将检查字符串的第一个字符是否匹配，否则将返回-1。

```
char first = str.charAt(0);
        if (ch != first) {
            return -1; 
```

这表示如果第 0 个索引处的字符不匹配，则发送 -1，因此“peach”中的“p”与“a”不匹配，因此返回 -1。

你明白了吗？

# jquery - jQuery – 点击时启用/禁用页面上的所有样式表

> ID：15824089
> 
> 赞同：12
> 
> 时间：2013-04-05T00:38:14.800
> 
> 标签：jquery, css, stylesheet

是否可以通过单击“禁用/启用 CSS”按钮来检测当前页面上的所有样式表，并在第一次单击时禁用它们，以便不应用任何样式，然后在第二次单击时再次恢复它们？如果可能的话，知道 jQuery 会是什么样子吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-05T00:44:03.740

```
$('link[rel="stylesheet"]').attr('disabled', 'disabled'); 
```

这应该禁用所有这些，然后重新启用它们：

```
$('link[rel="stylesheet"]').removeAttr('disabled'); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-09-20T17:54:20.790

要禁用所有样式表：

```
$('link[rel~="stylesheet"]').prop('disabled', true); 
```

要重新启用所有样式表：

```
$('link[rel~="stylesheet"]').prop('disabled', false); 
```

我在这里使用[属性`~=`选择器](http://www.w3.org/TR/css3-selectors/#attribute-representation)，而不是`=`这样选择器仍然可以与`rel`属性所在的样式表一起使用[`alternate stylesheet`](https://developer.mozilla.org/en-US/docs/Web/CSS/Alternative_style_sheets)，而不仅仅是`stylesheet`。

此外，重要的是使用[`.prop`](http://api.jquery.com/prop/)，而不是[`.attr`](http://api.jquery.com/attr/)。如果您使用`.attr`，代码将无法在 Firefox 中运行。这是因为，[根据 MDN](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link#attr-disabled)，`disabled`它是[DOM 对象的](https://developer.mozilla.org/en-US/docs/Web/API/HTMLLinkElement#Properties)[属性`HTMLLinkElement`](https://developer.mozilla.org/en-US/docs/Web/API/HTMLLinkElement#Properties)，而*不是*`link`HTML 元素的属性。用作`disabled`HTML 属性是非标准的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-05T00:43:32.387

```
$('link[rel=stylesheet][href~="somelink.com"]').attr('disabled', 'true'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-05T00:47:23.977

这是一个粗略的示例，它依赖于将 id 分配给样式，然后使用变量删除和恢复它。

**HTML**

```
<style id="test">
.test{
  background: red;
  width: 100px;
  height: 100px;
}
</style>
<div class="test">Something</div>
<div id="remove">Click to Remove</div>
<div id="restore">Click to Restore</div> 
```

**Javascript**

```
var css = $("#test");
$("#remove").click(function(){
    css.remove();
});

$("#restore").click(function(){
    $("head").append(css);
}); 
```

**工作示例** [http://jsfiddle.net/Fwhak/](http://jsfiddle.net/Fwhak/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-16T15:42:10.567

我发现以下内容适用于我的所有浏览器：

```
CSS Link:
<link rel="stylesheet" href="http://basehold.it/22" data-role="baseline">

JQuery:
$('link[data-role="baseline"]').attr('href', ''); 
```

以上将只禁用一个样式表，并且可以打开和关闭它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-03T15:56:50.140

这是您可以尝试执行此操作的另一种方法。

```
$('*[rel=stylesheet]').attr('disabled', 'true');
$('link[rel=stylesheet]').attr('disabled', 'true'); 
```

另一方面，您删除该属性

```
$('link[rel=stylesheet]').attr('disabled', 'false');
$('*[rel=stylesheet]').attr('disabled', 'false'); 
```

# objective-c - mouseUp 不会在 Cocoa 中触发？

> ID：15824091
> 
> 赞同：2
> 
> 时间：2013-04-05T00:38:31.430
> 
> 标签：objective-c, macos, cocoa, mouseup

我正在尝试在我的应用程序中实现拖放功能，但遇到了 mouseUp 事件未触发的问题。如果我只是在视图上单击并释放它，它就会触发，但如果我拖动，我的 mouseDragged 事件就会触发，仅此而已。

通过尝试不同的事情，我发现问题出在我的 dragImage 调用中，但我现在不知道如何解决它。

这是我的代码：

```
-(void) mouseDragged:(NSEvent *)theEvent
{
   isDragging = YES;

   if ([selectedCellRowIndex longValue] >= 0)
   {
      NSImage *im = [[NSImage alloc]initWithContentsOfFile:@"/Users/UserName/Desktop/drag.png"];
      NSSize dragOffset = NSMakeSize(0.0, 0.0);
      NSPasteboard *pboard = [NSPasteboard pasteboardWithName:NSDragPboard];

      [pboard declareTypes:[NSArray arrayWithObject:NSTIFFPboardType]  owner:self];
      [pboard setData:[im TIFFRepresentation] forType:NSTIFFPboardType];

      [self dragImage:im
                   at:downPointRelativeToTable
               offset:dragOffset
                event:theEvent
           pasteboard:pboard
               source:self
            slideBack:YES];
  }
} 
```

有谁知道我的问题可能出在哪里？！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T07:06:30.540

在您的代码片段中，您正在获取`NSPasteboard`实例，但没有将数据复制到其中。这是必需的，否则您的拖动将无法正确启动 - 这可能就是您永远无法获得该`mouseUp:`事件的原因。

的文档[`dragImage:at:offset:event:pasteboard:source:slideBack:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSView_Class/Reference/NSView.html#//apple_ref/occ/instm/NSView/dragImage%3aat%3aoffset%3aevent%3apasteboard%3asource%3aslideBack%3a)声明

> 在调用此方法之前，您必须将要传输的数据放置在板上。为此，获取拖动粘贴板对象（NSDragPboard），声明数据的类型，然后将数据放到粘贴板上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T07:55:59.630

我用一个简单的 NSView 后代看到了这一点。在 mouseDown 上启动了拖动操作，并且从未触发 mouseUp。相反，对 super 的调用被阻塞，直到拖动操作完成（显然是本地运行循环）。因此，在调用从 super 返回后，我不得不将 mouseUp 处理放在 mouseDown 函数中。

# maven - 如何使用 Maven 将 WAR 部署到 Tomcat？

> ID：15824096
> 
> 赞同：22
> 
> 时间：2013-04-05T00:39:26.607
> 
> 标签：maven, tomcat

我将 Maven 与 Eclipse 一起使用。是否可以构建项目，然后将构建的 WAR 文件部署到 Tomcat 服务器？

我使用 Windows。我可以构建`WAR`文件，也可以手动将其部署在服务器上。但我想`WAR`在构建操作后自动部署文件，但它不起作用。我是Maven的新手。

我应该在我的运行配置中设置一些东西吗？我已经设定了`install`价值目标。

*pom.xml*

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>HelloWorld</groupId>
<artifactId>HelloWorld</artifactId>
<version>0.0.1-SNAPSHOT</version>
<packaging>war</packaging>
<name>HelloWorld</name>

<properties>
    <spring.version>3.2.2.RELEASE</spring.version>
</properties>

<dependencies>

    <!-- Java Server Pages Standard Tag Library -->
    <dependency>
        <groupId>jstl</groupId>
        <artifactId>jstl</artifactId>
        <version>1.2</version>
    </dependency>

    <!-- Spring 3 dependencies -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-core</artifactId>
        <version>${spring.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-beans</artifactId>
        <version>${spring.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>${spring.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-web</artifactId>
        <version>${spring.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-webmvc</artifactId>
        <version>${spring.version}</version>
    </dependency>
</dependencies>

<build>
    <directory>${project.basedir}/target</directory>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.3.2</version>
            <configuration>
                <source>${java-version}</source>
                <target>${java-version}</target>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-dependency-plugin</artifactId>
            <executions>
                <execution>
                    <id>install</id>
                    <phase>install</phase>
                    <goals>
                        <goal>sources</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
        <!-- Maven Tomcat Plugin -->
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>tomcat-maven-plugin</artifactId>
            <configuration>
                <server>Apache_Tomcat_7_x86</server>
                <warFile>${project.build.directory}/HelloWorld-0.0.1-SNAPSHOT.war</warFile>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-war-plugin</artifactId>
            <version>2.3</version>
            <configuration>
                <packagingExcludes>WEB-INF/web.xml</packagingExcludes>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

此外，我更改`settings.xml`了路径中的文件`~/.m2/settings.xml`。

*设置.xml*

```
 <servers>
      <server>
        <id>Apache_Tomcat_7_x86</id>
        <username>admin</username>
        <password>admin</password>
      </server>
  </servers> 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-05T02:17:20.893

同时我解决了它。有几个问题。

首先，我将Eclipse**运行配置中的****Goal**设置为.**`tomcat:deploy`**

 **我改变了`pom.xml`以下

```
<plugin>
  <groupId>org.codehaus.mojo</groupId>
  <artifactId>tomcat-maven-plugin</artifactId>
  <configuration>
    <url>http://localhost:8080/manager/text</url>
    <server>Apache_Tomcat_7_x86</server>
    <path>/HelloWorld</path>
  </configuration>
</plugin> 
```

配置中的 URL 取决于 Tomcat 版本。对我来说工作`text`，对于其他人来说，`html`在 URL 的末尾工作。当然， in`tomcat-users.xml`必须设置为角色`manager-script`或`manager-gui`.

也许它对其他人有帮助。**

# java - 如何从 Java 中的 ResultSet 复制/克隆单行？多线程实现

> ID：15824097
> 
> 赞同：0
> 
> 时间：2013-04-05T00:39:30.227
> 
> 标签：java, multithreading, resultset

我检索了一个包含很多行的 ResultSet。必须分析每一行，所以我想在一个新线程中分析每一行（别担心：我不会同时启动所有线程，比如说连续 10 个）。整个 ResultSet 将专门用于从中读取数据（因此，它是一种静态只读表）。

所以我想做的是：

```
ResultSet rs;

public void loadResultSet(){

    ...
    rs = _preparedStatement.executeQuery();

    int rowSize = 0;

    while (rs.next()) {
       rowSize++;
    }

    //this method starts 10 threads simultaneously
    runThreads(rowSize);

     ...

} 
```

和...

```
@Override
public void run() {

    //Unknown object that allows me to store a copy of a single row from ResultSet
    Foo foo = rs.absolute(index);

    //Then i can retrieve data just like a normal ResultSet
    String s = foo.getString(1);

    ....
    ....

} 
```

有什么建议吗？

样品非常感谢！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T08:29:05.637

如果我是你，我宁愿在单独的线程中执行查询，例如：

select * from table_name where mod(id,threadCount)=threadId

只需给每个线程一个 id 并执行它们。这样，每个线程将有不同的数据要处理

# ios - 如何使用 facebook-ios-sdk v3.2.1 清除令牌？

> ID：15824101
> 
> 赞同：1
> 
> 时间：2013-04-05T00:39:46.790
> 
> 标签：ios, facebook, token, facebook-ios-sdk

我正在使用[示例程序](http://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/authenticate/)来学习 facebook-ios-sdk，我发现了一个问题：如果我在我的设备上登录 Facebook 并运行该示例应用程序，一切都很好，但是，当我从设备中删除我的 Facebook 帐户并再次运行该示例应用程序，我仍然可以通过登录过程并且仍然可以看到 SCViewController（有一个快速应用程序切换到 Facebook 应用程序的过程，但我只需要单击“OKey”按钮，我没有无需填写任何电子邮件/密码信息即可登录 Facebook）。

我检查了代码，发现我的帐户从设备中删除后，`FBSession.activeSession.accessToken`仍然认为里面的令牌是有效的。有什么问题吗？以及如何清除令牌并弹出登录对话框？我已经`[FBSession.activeSession closeAndClearTokenInformation]`在注销时调用了，根据Facebook sdk文档，应该清除令牌，但事实并非如此。

我使用的环境：XCode 4.6.1、iPad 6.1 模拟器和 facebook-ios-sdk v3.2.1。

更新：在此处粘贴一些代码：在SCAppDelegate.m中，我添加了3个函数，不在示例代码中，而是在SDK在线文档中：

```
- (void)showLoginView
{
    UIViewController* topViewController = [self.navigationController topViewController];
    UIViewController* modalViewController = [topViewController modalViewController];
    // If the login screen is not already displayed, display it. If the login screen is
    // displayed, then getting back here means the login in progress did not successfully
    // complete. In that case, notify the login view so it can update its UI appropriately.
    if (![modalViewController isKindOfClass:[SCLoginViewController class]]) {
        SCLoginViewController* loginViewController = [[SCLoginViewController alloc]
                                                      initWithNibName:@"SCLoginViewController"
                                                      bundle:nil];
        [topViewController presentModalViewController:loginViewController animated:NO];
    } else {
        SCLoginViewController* loginViewController = (SCLoginViewController*)modalViewController;
        [loginViewController loginFailed];
    }
}

- (void)sessionStateChanged:(FBSession*)session state:(FBSessionState)state error:(NSError*)error
{
    switch (state) {
        case FBSessionStateOpen: {
            UIViewController* topViewController = [self.navigationController topViewController];
            if ([[topViewController modalViewController]isKindOfClass:[SCLoginViewController class]]) {
                [topViewController dismissModalViewControllerAnimated:YES];
            }
        }
            break;
        case FBSessionStateClosed:
        case FBSessionStateClosedLoginFailed:
            [self.navigationController popToRootViewControllerAnimated:NO];
            [FBSession.activeSession closeAndClearTokenInformation];
            [self showLoginView];
            break;

        default:
            break;
    }
    if (error) {
        UIAlertView* alertView = [[UIAlertView alloc]initWithTitle:@"Error" message:error.localizedDescription delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
        [alertView show];
    }
}

- (void)openSession
{
    [FBSession openActiveSessionWithReadPermissions:nil allowLoginUI:YES completionHandler:^(FBSession* session, FBSessionState status, NSError* error){
        [self sessionStateChanged:session state:status error:error];}];
} 
```

然后在 SCLoginViewController.m 中，我添加了一个按钮，而不是使用现有的 FBLoginView 对象来完成登录工作。该按钮的处理函数如下：

```
- (IBAction)performLogin:(id)sender {
    //[self.spinner startAnimating];
    SCAppDelegate* appDelegate = [UIApplication sharedApplication].delegate;
    [appDelegate openSession];
} 
```

然后在 SCViewController.m 中，我添加了另一个按钮来完成注销工作。该按钮的处理函数如下：

```
- (IBAction)logoutButtonWasPressed:(id)sender {
    [FBSession.activeSession closeAndClearTokenInformation];
} 
```

其他代码与示例代码中的几乎相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-23T20:45:48.310

除了清除令牌外，您还需要在使用 Safari 登录 Facebook 时清除存储在 Safari 中的 cookie。

以下适用于 iOS 5.1+ 上的 Facebook SDK 3+：

```
[FBSession.activeSession closeAndClearTokenInformation];

NSHTTPCookieStorage *storage = [NSHTTPCookieStorage sharedHTTPCookieStorage];
for(NSHTTPCookie *cookie in [storage cookies])
{
    NSString *domainName = [cookie domain];
    NSRange domainRange = [domainName rangeOfString:@"facebook"];
    if(domainRange.length > 0)
    {
        [storage deleteCookie:cookie];
    }
} 
```

# php - 打破关于段落标签的 WordPress 帖子

> ID：15824109
> 
> 赞同：0
> 
> 时间：2013-04-05T00:40:45.920
> 
> 标签：php, mysql, wordpress

我有一个包含两个数据库的站点。一个附加到运行网站部分内容的 WordPress 安装；另一个运行整个网站。我们称它们为 cwordpress 和 tdasite。

我已经弄清楚如何访问 wordpress 数据库并从中提取内容，但我不确定如何在 p 标签上将其分解，因为我正在提取 post_content 文件。我需要在侧边栏中显示文本，为了便于阅读，最好将其放在实际段落中。我从中提取的文章通常很短，但每篇都有三到五段。

我没有看到 wordpress 如何保存格式。很明显，因为 wordpress 页面显示正确，并且标签显示在查看源代码中，但它们在数据库中不可见。否则，我会使用 explode 将它们分成段落并以这种方式显示。但到目前为止，我什至无法将 post_content 对象转换为变量并打印出来！我正在尝试做的事情是可能的，还是我需要重新概念？

这是查询代码。

```
//Define the query to retrieve international news posts 
$newsquery = 'SELECT wp_posts.post_title, wp_posts.ID, wp_posts.post_content FROM wp_posts, wp_term_relationships, wp_term_taxonomy WHERE wp_posts.ID=wp_term_relationships.object_id AND wp_term_relationships.term_taxonomy_id=wp_term_taxonomy.term_taxonomy_id AND wp_term_taxonomy.taxonomy="category" AND wp_term_taxonomy.term_id=5 ORDER BY wp_posts.post_date DESC LIMIT 1';

if($r = mysqli_query($dbc, $newsquery)) { // Run the query.
   while ($row = mysqli_fetch_array($r)) {
   echo '<h3 class="betterheader" align="center">' . $row['post_title'] . '</h3><p class="sidebartext">' . $row['post_content'] . '</p>';
   }
   } else { 
   echo '<p style="color: red;">No international news today!</p>';
}
?> 
```

这会将我的帖子作为一个巨大的文本块返回，但是当我尝试将 post_content 声明为变量然后显示它时，什么都没有出现，这让我觉得我无法按照我想要的方式处理帖子。作为参考，这就是我为此所做的一切：

```
 $wppost = $row['post_title'];
    echo $wppost 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T00:57:14.620

要回答您的问题（*我正在尝试做什么，或者我需要重新概念吗？*），先生，html 标签是在页面/帖子模板中定义的，因此通常不包含在数据库值中。

我的建议是安装一个适用于侧边栏小部件的 Wordpress php-executor 插件，然后创建一个文本小部件并将您的 php 代码内容放在那里。我建议使用 get_the_title 和 get_the_content 等内置函数，如果您希望它们是动态的，只需应用正确的参数即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T04:20:46.493

```
<?php query_posts('showposts'); while(have_posts()): the_post();  the_title  the_content  endwhile; wp_reset_query(); ?> 
```

试试这个，它会帮助你

# javascript - Javascript RegExp 使用全局修饰符产生异常结果

> ID：15824111
> 
> 赞同：0
> 
> 时间：2013-04-05T00:41:31.643
> 
> 标签：javascript, regex

我能够解决这个问题，因为事实证明我不需要 /g。但我想知道是否有人能够解释为什么会发生以下行为。

```
x = RegExp( "w", "gi" )
x.test( "Women" )
    = true
x.test( "Women" )
    = false 
```

在评估表达式时，它将继续在真假之间交替。这是一个问题，因为我在字符串列表上使用了相同的编译正则表达式，导致一些在应该为真时评估为假。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T00:42:56.310

您不应该在用于 的正则表达式中使用全局修饰符`test`，因为它保留了最后一次搜索的索引并从那里开始下一个测试。

我问过[同样的问题](https://stackoverflow.com/questions/15610251/why-pattern-testname-opposite-results-on-consecutive-calls)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T00:43:24.197

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/test](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/test)

> 与 exec （或与它结合使用）一样，在同一个全局正则表达式实例上多次调用的 test 将超过上一次匹配。

本质上，该`RegExp`对象`x`在内部跟踪其最后一次匹配。当您`.test`再次调用时，它会尝试在`"w"`

当然，这只适用于正则表达式对象实例。

```
> /w/gi.test('Women')
true
> /w/gi.test('Women')
true 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T07:29:48.780

当您使用该`g`标志时，正则表达式将匹配的结束位置存储在其`lastIndex`属性中。下次您调用 、 或 中的任何一个时`test()`，`exec()`正`match()`则表达式将从字符串中的该索引开始尝试查找匹配项。

当没有找到匹配项时，它将返回 null，并`lastIndex`重置为 0。这就是您的测试不断交替的原因。它将匹配`W`, 然后`lastIndex`设置为 1。下次调用它时，将返回 null 并`lastIndex`重置。

与此相关的一个陷阱是您的正则表达式可以匹配空字符串。在那种情况下，`lastIndex`不会改变，如果你得到所有匹配，就会有一个无限循环。在这种情况下，您应该手动调整`lastIndex`它是否与空字符串匹配。

# polymorphism - 使用 Google 协议缓冲区多次反序列化消息

> ID：15824112
> 
> 赞同：0
> 
> 时间：2013-04-05T00:41:47.897
> 
> 标签：polymorphism, protocol-buffers, message-passing

我正在使用一个非常模块化的系统。消息可以由 src、dest、type 的 3 元组确定。

我正在研究使用协议缓冲区重新实现我们的消息。我已经通读了[Protocol buffer polymorphism](https://stackoverflow.com/questions/3460869/protocol-buffer-polymorphism)，[使用协议缓冲区进行多态性的正确方法是什么？](https://stackoverflow.com/questions/3018743/whats-the-right-way-to-do-polymorphism-with-protocol-buffers)和[http://www.indelible.org/ink/protobuf-polymorphism/](http://www.indelible.org/ink/protobuf-polymorphism/)

我想知道有没有人实施解决方案：

```
message header {
    required string src = 1
    required string dest = 2
    required string type = 3
} 
```

并创建单独的消息，其中：

```
message foo {
    required header h = 1
    required string a = 2
} 
```

单独的文件：

```
message bar {
    required header h = 1
    required uint32 num = 2
} 
```

在接收代码中有类似的东西：

```
Message.ParseFromString(msgStr)
if (Message.type == foo)
{
  FooMessage.ParseFromString(msgStr)
}
else {
    BarMessage.ParseFromString(msgStr)
} 
```

如果使用了这种方法，它比上述链接中描述的更好还是更差？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T08:32:05.800

我发现的唯一方法是将消息体序列化/反序列化为字节数组。然后您将获得所需的抽象级别：

```
message header {
    required string src = 1;
    required string dest = 2;
    required string type = 3;
}

message foo {
    required string a = 2;
}

message bar {
    required uint32 num = 2;
}

message request {
    required header h;
    required bytes data; // serialize foo or bar here
} 
```

然后你的代码将是这样的（这是一个伪代码）：

```
request req = request.ParseFromString(buffer);

if (req.h().type() == "foo") {
    foo msg = foo.ParseFromString(req.data);
    // process foo msg
}
else if (req.h().type() == "bar") {
    bar msg = bar.ParseFromString(req.data);
    // process bar msg
} 
```

# haskell - Haskell Parsec 解析器，用于以单词或括号开头，以单词结尾或括号结尾的表达式

> ID：15824114
> 
> 赞同：1
> 
> 时间：2013-04-05T00:42:02.550
> 
> 标签：haskell, parsec

我正在尝试弄清楚如何编写一个 Haskell Parsec 解析器来使用这些 Ruby 表达式中的任何一个：

```
 hello("test", 'test2') 
   my_variable
   hello(world("test"))
   (hello + " " + world) 
```

当解析器在任何这些项目的开头开始解析时，它应该返回整个字符串并在项目的末尾停止解析。如果其中任何一项后跟逗号，则不应使用该逗号。

我试过几次为这些类型的表达式编写解析器，但没有成功。没有必要解析这些表达式的子组件——我不需要完整的 AST。我只需要消耗和捕获这些类型的块。

我认为，除了任何前面的标识符之外，一个适当的启发式方法可能只涉及平衡任何括号并吃掉外部平衡括号内的所有内容。但是我需要一些帮助来编写一个以这种方式工作的解析器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-05T01:48:40.747

在不解析*所有内容*的情况下尝试解析是没有意义的。要么（a）编写一个结构化的、正确的解析器，要么（b）编写一些吃输入的东西，做一些计数和跟踪，但实际上并不解析它。你会发现使用 parsec 很难做到 (b)。关键问题是正确性：`this(example + "(with" + (weird ("bracketing)?")+"("))`除非您解析字符串，否则您将如何解析？你应该咬紧牙关`string`先写一个解析器，然后是解析器，然后是`identifier`相互递归`expression`和解析器。您不必返回 AST。`argumentList``function`

# vba - 使用 VBA 更改 Word MailMerge 字段的值

> ID：15824115
> 
> 赞同：1
> 
> 时间：2013-04-05T00:42:08.387
> 
> 标签：vba, ms-word, mailmerge

我有一个包含 MailMerge 字段的文档，但是我不想使用整个 datasource->mailmerge 的想法。相反，我在 Autonew() 上展示了一个 UserForm，并要求用户在字段中输入数据。

原因是因为这个文档是要与一行数据“合并”，所以要求用户为一行做整个数据源的事情是浪费时间。

我有一个使用 DocVariables 的工作解决方案，我相信大多数人会说这是正确的方法，但是这个客户喜欢在源文档中“看到”邮件合并变量（例如 <<1>>）的想法. 他们知道可以使用 Alt-F9 显示代码以查看 DocVariables，但他们坚持要使用 MergeFields。

使用 DocVariables 我使用以下方法。这行得通，所以我知道我的想法是正确的，并且我的其余代码工作正常。

```
ActiveDocument.Variables("varSurame").Value = .txtSurname 
```

但是，我无法锻炼如何对合并字段做同样的事情。我想做类似下面的事情（但没有要设置的“值”属性）。

```
ActiveDocument.MailMerge.Fields("Surname").value = .txtSurname 
```

.text 属性是只读的，所以我不能使用它。

以下呈现“书签未定义”错误。

```
ActiveDocument.MailMerge.Fields("Surname").Code.Text = .txtSurname 
```

关于如何在不使用数据源的情况下以编程方式更改邮件合并字段的值的任何想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T19:02:13.057

就像是：

```
Dim f as Word.Field

For Each f in ActiveDocument.Fields

  If f.Type = wdFieldMergeField Then

    ' you will either need to extract the name of the field from f.code here
    ' (roughly speaking, you should expect to find
    ' MERGEFIELD<white space><optional double quote>fieldname<optional double quote><white space><possible switches>
    ' or you could iterate through a list of field names and use instr to look for each name
    ' then

    f.Result.Text = "the text you want"
  End If
Next ' f 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-28T02:00:50.500

我有一个 Word 文档，我想拥有可以通过 VBA 从 Access 修改的 DocVariable 字段。我也想“看到”邮件合并字段。如果我创建的文档以 DocVariable 字段开头（例如，Insert>>Quick Parts>>Field 并插入一个 DocVariable 字段），它们要么不可见，要么显示整个长字段代码。因此，假设我有命名字段`FNAME`，并`DONATION`在一封信中感谢某人作为文档的捐赠。

最终文件应如下所示：

> ...感谢鲍勃捐赠 100 美元。它会...

使用 DocVariable 字段，它看起来像这样：

> ...感谢您对 . 它会...

或像这样：

> ...感谢 { DOCVARIABLE "FNAME"} 捐赠 { DOCVARIABLE "DONATION"}。它会...

如果 DocVariable 字段中包含 `* MERGEFORMAT' 之类的内容，甚至可能更长。这可能很愚蠢，但我绝对理解“看到”邮件合并字段的偏好，所以它看起来像这样

> ...感谢«FNAME»捐赠«DONATION»。它会...

我让它工作的方式是这样的：

1.  使用邮件合并域创建文档。您可能必须制作一个伪造的 Excel 文件或数据库来连接以添加字段。完成此操作后，您将“看到”文档中的邮件合并字段（例如，`«FNAME»`）。
2.  切换域代码 (alt-F9)，以便您看到`{ MERGEFIELD "FNAME"}`.
3.  对于每个邮件合并字段，将“MERGEFIELD”替换为“DOCVARIABLE”。只需在它上面输入，使其看起来像``{ DOCVARIABLE "FNAME"}`.
4.  再次切换域代码 (alt-F9)。它看起来像一个邮件合并字段（例如，`«FNAME»'），但您可以在 VBA 中像 DocVariable 字段一样使用它。

请注意，您实际上可以只插入一个邮件合并字段，然后复制/粘贴它，更改不同字段的名称。如果您只是插入一个 DocVariable 字段，那么邮件合并字段中一定有隐藏的东西会被复制，但我无法弄清楚它是什么。所以这绝对是一种解决方法，但它对我有用。它为您提供了两全其美的优势，“看到”邮件合并字段，但可以像 VBA 中的 DocVariable 字段一样使用它。

# uiwindow - 设置 UIScreen 值后保持 UIWindow 大小

> ID：15824116
> 
> 赞同：0
> 
> 时间：2013-04-05T00:42:12.213
> 
> 标签：uiwindow, airplay, uiscreen

我正在使用 AirPlay，iPad 的主要内容被传送到 AppleTV 上。

当我想要 iPad 上的信息与 AppleTV 上的不同时，我遇到了分辨率问题。

我实例化 UIWindow：

```
_atvWindow = [[UIWindow alloc] initWithFrame:CGRectMake(0, 0, 2048, 1536)]; 
```

*NSLog 表示窗口是我想要的帧大小*

我将 UIWindow 设置为 iPad 屏幕

```
_atvWindow.screen = [[UIScreen screens] objectAtIndex:0]; 
```

*NSLog 指示窗口框架现在是 1024x768*

这是一个视网膜 iPad。我希望尺寸保持视网膜并相应地设置图像。一旦我添加了视网膜质量的图像，它们（如您所料）就太大了。任何想法是什么导致了这个或我在这里缺少什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-11T16:58:34.260

您是否尝试从 [通知对象] 对象中的屏幕读取帧大小？

```
- (void)handleConnectedScreen:(UIScreen *)screen withViewController:(UIViewController *)controller {
    if(!_airPlayWindow)
    {
        CGRect frame = screen.bounds;
        _airPlayWindow = [[UIWindow alloc] initWithFrame:frame];
        _airPlayWindow.backgroundColor = [UIColor clearColor];
        [_airPlayWindow setScreen:screen];
        _airPlayWindow.hidden = NO;
    }

    UIViewController *oldController = _airPlayWindow.rootViewController;
    [_airPlayWindow setRootViewController:controller];
    [oldController removeFromParentViewController];
}

- (void)screenDidConnect:(NSNotification *)notification {
    ABOutputViewController *c = [[ABOutputViewController alloc] init];
    [self handleConnectedScreen:[notification object] withViewController:c];
}

[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(screenDidConnect:) name:UIScreenDidConnectNotification object:nil]; 
```

# c++ - 为什么向量的向量不能保证是连续的？（或者是吗？）

> ID：15824119
> 
> 赞同：1
> 
> 时间：2013-04-05T00:42:51.530
> 
> 标签：c++, stdvector

我知道`std::vector`元素在内存中保证是连续的。

那么，为什么您不能期望包含其他向量的向量具有连续的总集合呢？

该向量应该保证其封闭项目的连续内存布局，如果这些附件也是向量，那么我希望最顶层向量的全部内容都在连续内存中。

但在这个问题上似乎存在一些争论，关于这是否属实。可以安全地依赖它吗？有些人似乎[竭尽全力](http://objectmix.com/c/36159-contiguous-allocation-multi-dimensional-vector.html)实现这一目标，而我认为这是有保证的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T00:46:31.087

向量向量中的每个向量都是一个单独的对象，因此负责它的存储。所以，不，它决不能保证是连续的，事实上我无法真正看到存储在外部向量和它的内部向量中的数据可能是一个连续的内存块的情况。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T00:49:28.217

向量是包含指向实际数组的指针的对象。

向量的向量将是一个具有指向对象数组的指针的对象，每个对象都指向堆上其他地方的自己的数组。所以不，他们永远不会像你问的那样是连续的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-05T01:43:33.567

我认为回答这个问题的最正确的正式方式（而不是描述现有的实现）是基于 §23.3.6.1/1：

> [...]向量的元素是连续存储的，这意味着如果`v`是a `vector<T, Allocator>`，其中T是bool以外的某种类型，则它服从恒等式
> 
> ```
> &v[n] == &v[0] + n 
> ```
> 
> 对于所有人`0 <= n < v.size()`。

请注意，这讨论`&v[i]`了向量的各个元素的地址，特别是意味着向量的每个元素都具有恒定的大小`sizeof(T)`（因为这就是指针算法的工作原理）。

这意味着向量的元素不可能在运行时改变大小。如果 a`vector<vector<T>>`被实现为一个连续的内存块，则外部向量的成员本身就是向量，将被允许更改大小。

因此，必须有一个额外的间接级别，即各个向量必须包含某种指向存储在不同位置的可变大小数据结构的指针。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T00:50:01.837

让我们看一下vector的（逻辑）内存布局：

```
[size:4/8 bytes]
[capacity:4/8 bytes]
[other datamembers:n bytes]
*[elements:size*sizeof(element) bytes] << one contiguous memory (pointer to heap) 
```

使用向量的向量，它看起来像这样：

```
[size:4/8 bytes]
[capacity:4/8 bytes]
[other datamembers:n bytes]
* [
    [Vector:0]
        [size:4/8 bytes]
        [capacity:4/8 bytes]
        [other datamembers:n bytes]
        *[elements:size*sizeof(element) bytes] << pointer to contiguous memory for elements
    [Vector:1]
        [size:4/8 bytes]
        [capacity:4/8 bytes]
        [other datamembers:n bytes]
        *[elements:size*sizeof(element) bytes]
    [Vector:2]
        [size:4/8 bytes]
        [capacity:4/8 bytes]
        [other datamembers:n bytes]
        *[elements:size*sizeof(element) bytes]
    ...
    ...
] << contiguous memory of vectors 
```

这意味着向量有一个指向连续内存存储向量的指针，每个向量都存储指向另一个堆的元素，其中连续内存存储元素。

但是，如果您设法创建一个供向量使用的分配器，以便它分配连续的内存块，您仍然会面临这样的问题，即如果嵌套向量之一被删除，则内存不再是连续的。更不用说嵌套向量具有不同大小的情况了。

根据您的用例，您可以将客户连续块内存分配器用于向量向量，也可以使用手动分配和释放一个连续内存块的旧方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-05T01:04:50.013

问题是向量模板不包含它处理“内联”或直接处理的数据。换句话说，向量类将它所持有的数据数组装箱：向量类持有一个指向包含元素数组的内存区域的指针。它在结构上等价于：

```
template <typename T>
struct vector_eq {
    T *ptr;
}; 
```

并不是

```
template <typename T>
struct vector_neq {
    T arr[SIZE];
}; 
```

这需要`SIZE`在编译时知道（即 a `constexpr`），以便`arr`将元素包含在结构中。

我想应该可以专门`vector<vector<T>>`包含指向单个内存块的指针，并让它的方法返回共享该内存块的片的临时实例`vector<T>`，尽管它背后的逻辑可能有点毛茸茸。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-05T01:20:52.833

简单地说 - std::vector 保证元素连续存储。但这仅包括元素的成员数据，在向量的情况下，它将是它的大小、容量和类似的东西，加上指向实际向量数据的指针。

因此，向量向量将为您提供一个连续的向量向量，但这些向量的数据将动态分配在任意内存地址上。

由于需要在编译时知道对象大小，因此不能拥有大小不同的对象，唯一的方法是使用动态内存分配。如果您有一个固定大小的自定义向量，内部不使用动态内存分配，那么 a`std::vector<customVector>`将连续存储 customVectors，但您仍将拥有额外的辅助成员，这些成员将“中断”customVector 元素数据的实际连续性。

# java - 编辑默认部分并制作一组按钮

> ID：15824127
> 
> 赞同：1
> 
> 时间：2013-04-05T00:43:41.330
> 
> 标签：java, arrays, swing, netbeans

当我在 netbeans 中拖放一个按钮时，代码生成器会生成如下代码：

```
private javax.swing.JButton jButton1;
private javax.swing.JButton jButton2;
private javax.swing.JButton jButton3; 
```

如果我想要这些按钮的数组怎么办？如何在 netbeans 中编辑它？

像 ：

```
private javax.swing.JButton buttonArray[] = new JButton[3]; 
```

*注意：我使用的是 netbeans 7.3*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T00:45:48.173

简单地

```
JButton[] buttonArray = {jButton1, jButton2, jButton3}; 
```

会工作。

但是话虽如此，在这个阶段您可能最好不要使用 NetBeans 生成的代码，而是手动编写 Swing 应用程序。如果您了解 Swing，NetBeans 代码生成器可以节省您的时间，但如果您是 Swing 和 Java 的新手，虽然它可以帮助您创建简单的 GUI，但如果您想扩展信封，它可能会成为不可能的熊一点点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T00:46:27.010

但是，如果您使用的是表单编辑器，我很确定您不能。

你能做的就是自己创造一个……

```
public class MyAwesomeClass extends ... {
    private JButton[] arrayOfButtons = new JButton[] {
        jButton1, jButton2, jButton3
    };
    // Remainder of class
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T18:06:51.197

您可以正常生成表单，然后关闭 netbeans 并打开外部文本编辑器，例如 gedit（如果您使用的是 linux）并删除以下行：

```
// <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
// </editor-fold>//GEN-END:initComponents 
```

和

```
// Variables declaration - do not modify
// End of variables declaration 
```

完成后，保存文件并再次打开 netbeans，然后您可以自由编辑这些会话。在 netbeans 中完成代码编辑后，再次编辑文件并再次将行放入文件中。

# regex - 如何从“反汇编”文件中提取某些单词

> ID：15824129
> 
> 赞同：0
> 
> 时间：2013-04-05T00:43:44.263
> 
> 标签：regex, perl

我正在这样做：

```
#!/usr/bin/env/perl

open FILE1, "<Exed.exe";
open FILE2, ">Fileinhexadecimal.txt";

binmode FILE1;

while (<FILE1>) {
$lines = $_;
$lines = unpack("H*", $lines);
chomp $lines;
print FILE2 "$lines\n";
}

close (FILE1);
close (FILE2)
print "Finish\n";
<>; 
```

之后，我创建了其他程序来读取这个“.txt”文件来搜索一些信息。

使用此脚本，我正在创建一个包含 .exe 文件的十六进制数据的文本文件。我的大问题是：

1-我想用正则表达式提取行：（`/8B55-(.*)-8B55/`使用第二个脚本，这里没有发布）

2 - 这是问题：

曾经我的 file.txt 是这样的：

```
8B55-646464-8B558B55-636363-8B55
8B55-656565-8B558B55-666666-8B55 
```

当我运行脚本时，脚本只会弹出这些数据：

```
"646464", "656565". 
```

你还是不明白我的问题。我想提取：`646464, 636363, 656565, 666666`。但是脚本，当它找到第一个匹配项时，他会跳到下一行，不要阅读其余部分。

你能帮忙我怎么能抓住所有的比赛吗？其他例子：

```
8B55-646464-8B55987941651968798779878B55-686868-8B55
8B55-ILOVEYOU-8B55 
```

在这里，脚本只会捕获`646464`and `ILOVEYOU`。（缺少 686868）：/

我正在搜索一些数据的真实文件非常大并且有一些行，比这个例子大。

我尝试使用“g”： if ($lines =~ /(.*)/g) {

但不起作用。

我的第二个脚本：

我正在尝试运行此脚本：

```
#!/usr/bin/perl

open FILE, "<Fileinhexadecimal.txt";

while (<FILE>) {
$lines = $_;
if ($lines =~ /8B55-(.*)-8B55/g) {
print "-$1\n";
}
}
close (FILE)

<>; 
```

什么也没有发生。我正在尝试从一个巨大的文件中提取某些连续的单词，并且正在发生这种情况，我只是以 8B55 为例。但问题是一样的。新想法？我怎么能使用你的代码？

@match = /8B55-(.*?)-8B55/g; 打印“@match\n”；

？？？感谢您的回复，抱歉英语不好

真正的问题

该行是：

8BCEE84EC4FFFF6A016A2B6A2B686C0100008BCEE83CC4FFFF6A016A2B6A2B686C0100008BCEE82AC4FFFF6A016A0E6A0E686D0100008BCEE818C4FFFF6A016A146A1468F20100008BCEE806C4FFFF6A006A0E6A0E68700100008BCEE8F4C3FFFF6A016A1E6A1E6871010000

在这一行中，我有 6 个数据要提取。

我使用这个正则表达式来提取：

8BCEE8....FFFF6A(..)6A(..)6A(..)68(..)(..)0000

在第一行，我们有 3 个匹配项，在第二个我们有 2 个匹配项，最后一行我们有 1 个匹配项 (8BCEE8F4C3FFFF6A016A1E6A1E6871010000)

实际上，我想提取 \1 \2 \3 \4 和 \5。我尝试使用 if ：

if ($lines =~ /8BCEE8....FFFF6A(..)6A(..)6A(..)68(..)(..)0000/g) { print "$5$4 $1$2$3" }

但是有了这段代码，我每行只能匹配一个。并不是所有的比赛。明白了吗？：/我想在这里提取，例如：

8BCEE84EC4FFFF6A016A2B6A2B686C010000

我想提取 6A 之后的单词，6A 之后，6A 之后和 68 之后的 4 个字母。：/ \o/ 感谢您的建议，iluv u！

在这个文件中，有 1000 行具有相同的正则表达式。我想提取这 1000 行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T01:05:13.653

这有帮助吗？

```
while (<DATA>) {
  print $1, "\n" while /(?<=8B55-)(\w+)(?=-8B55)/g;
}

__DATA__
8B55-646464-8B558B55-636363-8B55
8B55-656565-8B558B55-666666-8B55
8B55-646464-8B55987941651968798779878B55-686868-8B55
8B55-ILOVEYOU-8B55 
```

**输出**

```
646464
636363
656565
666666
646464
686868
ILOVEYOU 
```

* * *

**更新**

这就是我认为您对完整问题所需要的。

```
while (<DATA>) {

  while (/8BCEE8....FFFF6A(..)6A(..)6A(..)68(..)(..)0000/g) {
    print join(' ', $1, $2, $3, $4, $5), "\n";
  }
}

__DATA__
8BCEE84EC4FFFF6A016A2B6A2B686C0100008BCEE83CC4FFFF6A016A2B6A2B686C0100008BCEE82AC4FFFF6A016A0E6A0E686D0100008BCEE818C4FFFF6A016A146A1468F20100008BCEE806C4FFFF6A006A0E6A0E68700100008BCEE8F4C3FFFF6A016A1E6A1E6871010000 
```

**输出**

```
01 2B 2B 6C 01
01 2B 2B 6C 01
01 0E 0E 6D 01
01 14 14 F2 01
00 0E 0E 70 01
01 1E 1E 71 01 
```

# macos - 如何为 git 正确设置 credential-osxkeychain

> ID：15824130
> 
> 赞同：3
> 
> 时间：2013-04-05T00:44:03.410
> 
> 标签：macos, git, keychain

我已按照有关[如何设置 git](https://help.github.com/articles/set-up-git)以将 OS X 钥匙串集成到 git 命令的说明进行操作。说明说密码提示应该再次出现，并且钥匙串访问窗口将出现。密码提示，但钥匙串窗口没有。此外，需要身份验证的后续命令（对`https://`url）提出了密码提示。这些命令都没有引发任何类型的错误或警告，说明出现问题。

我的问题是如何让 git 命令使用钥匙串进行`https://`请求，这样我就不必重新输入我的用户名和密码？

一些有用的命令输出如下：

```
$ ls $(dirname $(which git)) | grep git
git
git-credential-osxkeychain
git-cvsserver
git-receive-pack
git-shell
git-upload-archive
git-upload-pack
gitk
$ git credential-osxkeychain
Usage: git credential-osxkeychain <get|store|erase>
$ git config --global credential.helper
osxkeychain
$ uname -a
Darwin mac-alex 11.4.2 Darwin Kernel Version 11.4.2: Thu Aug 23 16:25:48 PDT 2012; root:xnu-1699.32.7~1/RELEASE_X86_64 x86_64
$ git --version
git version 1.7.5.4 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T01:05:39.787

您需要更新版本的 Git。在 Git 1.7.10 之前不支持凭证助手。

# azure - 部署的 Azure 虚拟应用程序 webrole 未编译

> ID：15824133
> 
> 赞同：1
> 
> 时间：2013-04-05T00:44:23.367
> 
> 标签：azure, azure-web-roles

在过去的几天里，我一直在将应用程序部署到 auze。一切看起来都不错，但我遇到了虚拟应用程序的问题。

在我的 servicedefinition 文件中，我有

```
 <Sites>
  <Site name="Web" physicalDirectory="D:\@code\Web">
    <VirtualApplication name="API" physicalDirectory="D:\@code\API"></VirtualApplication>
    <Bindings>
      <Binding name="Endpoint1" endpointName="Endpoint1" />
      <Binding name="Endpoint2" endpointName="Https" />
    </Bindings>
  </Site>
</Sites> 
```

两个应用程序都已部署并创建了虚拟应用程序，但是我无法运行 api 应用程序。我 rdp 到服务器上并环顾四周。API 项目没有被编译，基本上所有的 .cs 文件都在 siteroot > 1 的根目录中

我需要做一个额外的步骤来解决这个问题吗？

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T06:05:11.370

只有 WebRole 项目 ( `..Site name='Web'...`) 被“编译”。

您定义的所有其他站点，包括虚拟应用程序，都只是被复制。所以你需要指向`physicalDirectory`一个本地部署/编译的应用程序文件夹。例如，您可以为部署到本地文件系统的 API 项目创建发布配置文件。`physicalDirectory`然后在`VirtualApplication`定义中指定该部署的目标文件夹。

[这里](http://msdn.microsoft.com/en-us/library/windowsazure/gg433110.aspx)有一些文档。但是，没有明确提到它适用于网站项目而不是 Web 应用程序项目！它适用于开箱即用的 WebSite 项目，因为 WebSite 项目的部署模型只是`xcopy deployment`.

显然现在很少有人做网站项目。我们大多数人都在做 Web 应用程序项目。因此，对于 Web 应用程序，我们不能指向`physicalDirectory`项目文件夹，而是指向该项目的部署文件夹。

如果有人感到困惑 - 这里是关于[Web 应用程序项目与网站项目](http://msdn.microsoft.com/en-us/library/dd547590.aspx)的官方文档。

# entity-framework - 使用 EF 代码优先与连接表建立一对多关系

> ID：15824135
> 
> 赞同：4
> 
> 时间：2013-04-05T00:45:04.480
> 
> 标签：entity-framework, ef-code-first, one-to-many, jointable

我有一个关于如何使用 Code First fluent API 配置与连接表的一对多关系的问题。我有一家公司，联系人对象都共享一个共同的地址对象，如下所示

```
Class Address {
       public int AddressId
       .....
    }

Class Company {
   public int CompanyId
   ......
   public virtual ICollection<Address> Address
}

Class Contact {
   public int ContactID
   .......
   public virtual ICollection<Address> Address
} 
```

我预期的数据库结构将是

```
Company Table
   CompanyId PK NOT NULL
   .....

Contact Table
    ContactId PK NOT NULL
    .....

Address Table
    AddressId PK NOT NULL
    .....

CompanyAddress Table
    CompanyId NOT NULL
    AddressId NOT NULL

ContactAddress Table
    ContactId NOT NULL
    AddressId NOT NULL 
```

我能够通过使用以下流利的 API 来实现这一点

```
modelBuilder.Entity<Company>()
  .HasMany(c => c.Address)
  .WithMany()
  .Map(m =>
    {
      m => m.MapLeftKey("CompanyId")
            .MapRightKey("AddressId")
            .ToTable("CompanyAddress")});

modelBuilder.Entity<Contact>()
  .HasMany(c => c.Address)
  .WithMany()
  .Map(m =>
    {
      m => m.MapLeftKey("ContactId")
            .MapRightKey("AddressId")
            .ToTable("ContactAddress")}); 
```

但是 EF 开始将 Company 和 Address 视为多对多关系，当我尝试删除 Company 或 Contacts 时，它不会删除相应的地址记录（因为 EF 将它们视为多对多），我如何定义这种类型的关系使用具有级联删除选项的 EF。我搜索了3天多，很惊讶没有人谈论或提出这种情况，所以想知道我的方法是错误的还是答案很琐碎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T03:02:58.857

你不能在多对多中拥有它（这是你正在创造的 - 以及你所描述的）。

当您删除公司/联系人时-“加入”表记录被删除。

您可以简化它，只需在您的配置中执行此操作（删除所有您拥有的）：

```
modelBuilder.Entity<Company>()
    .HasMany(c => c.Address)
    .WithOptional()
    .WillCascadeOnDelete(true);

modelBuilder.Entity<Contact>()
    .HasMany(c => c.Address)
    .WithOptional()
    .WillCascadeOnDelete(true); 
```

# bash - 如何对目录中的每个文件顺序执行命令？

> ID：15824140
> 
> 赞同：0
> 
> 时间：2013-04-05T00:45:32.550
> 
> 标签：bash, shell, loops, scripting

我有一个目录，我正在通过 cron 轮询新的上传，并且在每次上传时运行一系列脚本。

该程序的一部分使用上传文件的名称从网络检索图像。

图像以通用名称 image.png 保存，然后被发送到下一个脚本进行更多处理。

只制作了一张图片，所以如果有 5 个新上传的文件，仍然只制作 1 张图片。

如何构建代码/脚本，以便我在 3 个不同脚本中拥有的程序的完整周期一次仅在一个文件上运行，换句话说，循环遍历目录并按顺序在每个文件上运行程序。

我只是想保留正在制作的 1 个图像文件的结构，但正在处理所有上传。

```
 shopt -s nullglob

           for file in /home/yt/box/moremusic/youtube/*;
           do
           python /home/yt/ytimage.py $file;
           /home/yt/uploadyt;
           done;

           shopt -u nullglob 
```

我在 /home/yt/box/moremusic/youtube/ 中使用 3 个文件尝试了该脚本，但只检索到了 1 个图像。

我怎样才能实现我的目标或至少走上正确的道路？或者实际上我怎样才能并行处理所有上传的文件并且仍然只有 1 个图像文件。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-05T03:04:04.353

尝试 bash 循环：

```
ls -1 | while read file; do
    echo $file;
done; 
```

# php - 编辑表单的 jQ Grid 问题不会向 SQL 数据库发送请求

> ID：15824142
> 
> 赞同：1
> 
> 时间：2013-04-05T00:45:47.980
> 
> 标签：php, javascript, jquery, sql, jqgrid

我是 jQ Grid 的新用户，我想实现一个编辑表单。我的网格当前链接到 SQL 数据库。SQL 数据库的数据正确显示在网格中。

当我选择一行并单击编辑按钮时，会出现一个编辑表单，其中包含所选行的数据。当我修改信息并单击提交时，修改显示在网格上，但我的** SQL 数据库没有更新**。如果我刷新页面，网格将显示 SQL 数据库的信息，我可以看到我的修改没有在数据库中进行（显示的数据与最初显示的数据相同）。

有人可以帮我吗？

这是我的网格代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>My First Grid</title>
 <link rel="stylesheet" type="text/css" media="screen" href="jquery-ui-1.10.2/themes/base/jquery.ui.all.css" />
<link rel="stylesheet" type="text/css" media="screen" href="css/ui-lightness/jquery-ui-1.8.2.custom.css" />
<link rel="stylesheet" type="text/css" media="screen" href="ui.jqgrid.css" />

<style type="text/css">
html, body {
    margin: 0;
    padding: 0;
    font-size: 75%;
}
</style>

<script src="js/jquery-1.9.0.min.js" type="text/javascript"></script>
<script src="js/i18n/grid.locale-en.js" type="text/javascript"></script>
<script src="js/jquery.jqGrid.min.js" type="text/javascript"></script>
<script src="js/jquery.jqGrid.src.js" type="text/javascript"></script>

<script type="text/javascript">
jQuery.extend(jQuery.jgrid.defaults, { autoencode:true });
</script>

<script type="text/javascript">

$(function(){ 
  $("#editgrid").jqGrid({
    url:'example.php',
    datatype: 'xml',
    mtype: 'GET',
    colNames:['Numero','Nature', 'Nom','Qualification','PrixMax','PrixMin'],
    colModel :[ 
      {name:'Numero', index:'Numero', width:55,cellEdit:true, celledittype:'text'}, 
      {name:'Nature',
      index:'Nature',
      editable: true,
      edittype: 'text',
      editoptions: { size: 10},
      editrules: {required: true },
      formoptions: { label: 'Nature' },
      width:90}, 
      {name:'Nom', index:'Nom', width:180, align:'right',editable: true,edittype:'textarea'}, 
      {name:'Qualification', index:'Qualification', width:80, align:'right',editable: true,edittype:'textarea'}, 
      {name:'PrixMax', index:'PrixMax', width:80, align:'right',editable: true,edittype:'textarea'}, 
      {name:'PrixMin', index:'PrixMin', width:150, sortable:false,editable: true,edittype:'textarea'} 
    ],
    pager: '#pager',
    rowNum:10,
    rowList:[10,20,30],
    sortname: 'Numero',
    sortorder: 'desc',
    viewrecords: true,
    emptyrecords: "Nothing to display",
    gridview: true,
    editurl:'edit.php',
    edittype:'text',
    caption: 'My first grid',
    loadonce:true,
});
    $("#bedata").click(function(){
    var gr = jQuery("#editgrid").jqGrid('getGridParam','selrow');
    if( gr != null ) jQuery("#editgrid").jqGrid('editGridRow',gr,{height:280,reloadAfterSubmit:false,edit:true},{editurl:'edit.php',mtype:'POST'});
    else alert("Please Select Row");
});
}); 
</script>

</head>
<body>

<table id="editgrid"><tr><td/></tr></table> 
<div id="pager"></div> 
<input type="BUTTON" id="bedata" value="Edit Selected" />
</body>
</html> 
```

这是应该更新我的数据库的edit.php：

```
<?php

$dbhost ="localhost";
$dbuser="root";
$dbpassword="";
$database="geoclients";
$db = mysql_connect($dbhost, $dbuser, $dbpassword) or die("Connection Error: " . mysql_error()); 
mysql_select_db($database) or die("Error connecting to db."); 
$tablename="clients";
mysql_set_charset('utf8',$database);
mysql_query("SET NAMES 'utf8'");

    $Num     =  mysql_real_escape_string($_POST['Numero']);
    $Nat   =  mysql_real_escape_string($_POST['Nature']);
    $Nom =  mysql_real_escape_string($_POST['Nom']);
    $Qual    =  mysql_real_escape_string($_POST['Qualification']);
    $PrixMax  =  mysql_real_escape_string($_POST['PrixMax']);
    $PrixMin   =  mysql_real_escape_string($_POST['PrixMin']);

    $sql = "UPDATE ".$tablename." SET Nature = '".$Nat."', Nom = '".$Nom."', Qualification = '".$Qual."', PrixMax = '".$PrixMax."' , PrixMin = '".$PrixMin."' WHERE Numero = ".$Num.";";

    echo $sql;

$result=mysql_query($sql) or die(mysql_error());

mysql_close($db);

?> 
```

与数据库的连接与最初用于填充网格的代码相同（正在工作），所以我假设这个连接代码正在工作。我还检查了似乎没问题的请求的 SQL 语法。我的 SQL 数据库托管在本地 wamp 服务器上。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T01:26:12.950

我使用 jqGrid，但不能说我曾经使用过内置编辑，我更喜欢自己处理所有这些东西以便更好地控制它。

看看这是否适合你：

```
$("#bedata").click(function() {

    var grid = $("#editgrid"),
        row  = grid.getGridParam('selrow'),
        data = grid.getRowData(row);

    if (row != null) {
        // Send the ajax request first
        $.ajax({
            url: edit.php,
            data: data,
            type: 'POST',
            success: function(data) {
                console.log(data); // check returned string here
               // here you can put extra code to handle the rows updating
            }
        });
    }
    else alert('Please select row');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T00:13:10.670

我终于发现了我的错误。我的 edit.php 使用了一个名为“Numero”的变量，因为它是我数据库中的主键，我需要它来更新正确的行。但是因为它是主键，所以我不希望用户能够编辑它。因此，似乎 Numero 变量没有与变量的其余部分一起发送，因此更新请求无法成功。

对不起我的愚蠢错误。感谢所有帮助过我的人。

# c# - 如何在 ASPX 项目的配置管理器中设置 AppSettings

> ID：15824146
> 
> 赞同：0
> 
> 时间：2013-04-05T00:45:55.757
> 
> 标签：c#, asp.net, configuration

这是一个带有 Visual Studio 2010 的 ASPX/CS 项目。这是一个配置管理器问题。

我正在成功调试（某种程度）一些已经在服务器上使用的代码。但是有一段代码在 live 版本中播放 URL，不应该在 debug/localhost 版本中使用。

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (ConfigurationManager.AppSettings["IsTesting"] == "false" && Request.Url.ToString().Contains("http:"))
        {
            Response.Redirect(Request.Url.ToString().Replace("http:", "https:"));
        }

        LoadMasterTemplate();
    } 
```

这段代码不应该出现在“Response.Redirect....”行上，因为 ConfigurationManager 中的“IsTesting”应用程序设置应设置为 true。我该如何设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T00:54:15.887

在您的 App/Web.config 文件中的`<configuration>`元素内，应该有（或者您应该创建）一个`<appSettings></appSettings>`标签，并且各个设置看起来有点像这样：

```
<appSettings>
  <add key="NewKey0" value="Something1" />
  <add key="NewKey1" value="Something2" />
</appSettings> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T00:55:24.763

“ConfigurationManager”查看 ASP.Net 解决方案的“Web.Config”，因此您可以在以下位置找到它：

```
<configuration>
  <appSettings>
    <add key="IsTesting" value="true"/>
  </appSettings>    
</configuration> 
```

或者，如果您访问 IIS 管理器并选择网站，然后单击“应用程序设置”，您可以通过 GUI 更改它。

# php - PHP中的单选按钮无法正常工作

> ID：15824152
> 
> 赞同：0
> 
> 时间：2013-04-05T00:46:36.783
> 
> 标签：php, input, radio-button

我有这个代码：

```
<?php 
if (isset($_POST['ans'])) {
    $answer = $_POST['ans']; 
    if ($answer == "ans1") {          
        echo 'Correct';      
    }
    else {
        echo 'Incorrect';
    }
}
?>
<form action="example.php" method="post">
  Answer 1 <input type="radio" name="ans" value="ans1" /><br />
  Answer 2 <input type="radio" name="ans" value="ans2"  /><br />
  Answer 3 <input type="radio" name="ans" value="ans3"  /><br />
  Answer 4 <input type="radio" name="ans" value="ans4"  /><br />
  <input type="submit" value="submit" />
</form> 
```

当我选择错误的按钮时，它告诉我不正确，当我选择正确的按钮时，它告诉我正确。问题是，如果没有选择任何按钮，则不会发生任何事情。它不会回显不正确或正确。即使答案是空的，那它也应该是不正确的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T00:47:39.780

尝试添加 else if 这样如果选择的按钮为空，它将传递给它。

```
 <?php
if (isset($_POST['ans'])) {
    $answer = $_POST['ans']; 
    if ($answer == "ans1") {          
        echo 'Correct';      
    }
    else if(empty($answer)){
        echo 'Select Button';
    }
    else {
        echo 'Incorrect';
    }

}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T00:48:22.190

而不是检查`$_POST['ans']`是否已发布某些内容：

```
if ('POST' === $_SERVER['REQUEST_METHOD']) {
    $answer = isset($_POST['ans']) ? $_POST['ans'] : false;
    if ($answer == "ans1") {          
        echo 'Correct';      
    }
    else {
        echo 'Incorrect';
    }
} 
```

另一种方法是添加另一个隐藏输入并检查它。

# c# - EWS - 获取用户的同行（同一个经理）

> ID：15824154
> 
> 赞同：0
> 
> 时间：2013-04-05T00:46:52.620
> 
> 标签：c#, .net, exchangewebservices

我正在尝试进行交换查询以获取用户的同行，如全局地址列表中所示。我的第一个想法是运行一个查询，该查询返回具有同一管理器的所有用户。

```
FindItemType request = new FindItemType();
DistinguishedFolderIdType[] fid = { new DistinguishedFolderIdType { Id = DistinguishedFolderIdNameType.contacts } };

request.ParentFolderIds = fid;
request.Traversal = ItemQueryTraversalType.Shallow;

ItemResponseShapeType props = new ItemResponseShapeType();
props.BaseShape = DefaultShapeNamesType.AllProperties;

request.ItemShape = props;

// insert restriction where "someone@somewhere.com" = contactsManager

FindItemResponseType response = _binding.FindItem(request); 
```

不幸的是，这会查询我的联系人列表，而不是 GAL。我怎样才能正确地做到这一点？

我无法查询 AD（应用程序旨在从内部网络运行），并且出于各种其他原因我不使用 EWS 托管 API。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T14:49:41.777

下面是如何使用 EWS for Exchange 2007 及更高版本访问 GAL 的示例；[取自这里](http://vivekiyer.net/2010/07/17/querying-the-global-address-list-gal-via-exchange-web-services-ews/)查看链接以获取一些有效的指针。此代码在 GAL 中搜索特定联系人。

```
static void Main(string[] args)
{
    ExchangeServiceBinding esb = new ExchangeServiceBinding();
    esb.Url = @"https://myserver/EWS/Exchange.asmx";
    esb.Credentials = new NetworkCredential(
                          "username",
                          @"password",
                          @"domain");

    // Create the ResolveNamesType and set
    // the unresolved entry.
    ResolveNamesType rnType = new ResolveNamesType();
    rnType.ReturnFullContactData = true;
    rnType.UnresolvedEntry = "test";

    // Resolve names.
    ResolveNamesResponseType resolveNamesResponse = esb.ResolveNames(rnType);
    ArrayOfResponseMessagesType responses = resolveNamesResponse.ResponseMessages;

    // Check the result.
    if (responses.Items.Length > 0 && responses.Items[0].ResponseClass != ResponseClassType.Error)
    {
        ResolveNamesResponseMessageType responseMessage = responses.Items[0] as ResolveNamesResponseMessageType;

        // Display the resolution information.
        ResolutionType[] resolutions =
        responseMessage.ResolutionSet.Resolution;

        foreach (ResolutionType resolution in resolutions)
        {
            Console.WriteLine("Name: " + resolution.Contact.DisplayName);
            Console.WriteLine("EmailAddress: " + resolution.Mailbox.EmailAddress);

            if (resolution.Contact.PhoneNumbers != null)
            {
                foreach (PhoneNumberDictionaryEntryType phone in resolution.Contact.PhoneNumbers)
                {
                    Console.WriteLine(phone.Key.ToString() + " : " + phone.Value);
                }
            }

            Console.WriteLine("Office location:" + resolution.Contact.OfficeLocation);
            Console.WriteLine("\n");
        }
    }
} 
```

# python - 如何让 Selenium 单击可变数量的“下一步”按钮？

> ID：15824156
> 
> 赞同：8
> 
> 时间：2013-04-05T00:47:05.090
> 
> 标签：python, selenium, selenium-webdriver

我有一个具有模式对话框的内部 Web 应用程序。不幸的是，我无法在此处发布实际的 Web 应用程序位置，但让我尽可能地描述这一点。

*   当应用程序启动时，您会在屏幕上看到一个框，告诉您一堆文本。您可以按“下一步”获取下一页文本。
*   在最后一页，“下一步”按钮被禁用，Web 应用程序的其余 UI 被启用。
*   页面数量不定，所以我不知道我必须单击“下一步”多少次。

我可以点击固定次数（例如：如果我知道有两个页面，我可以点击两次）但我不确定如何改变它，以便无论我有多少页它都会运行。我想要一个通用的解决方案；大概这使用了某种循环来检查按钮是否已启用。如果是，请单击它。如果它被禁用，则退出循环。

问题是：**如何在 Selenium 中设置一个循环，重复单击一个按钮直到它被禁用？**

这是我尝试过的代码：

```
from selenium import webdriver
from selenium.common.exceptions import TimeoutException
from selenium.webdriver.support.ui import WebDriverWait # available since 2.4.0
from selenium.webdriver.common.by import By
from selenium.webdriver.support import expected_conditions as EC # available since 2.26.0

# Create a new instance of the Firefox driver
driver = webdriver.Firefox()

driver.get("http://localhost/myapp")

try:
    wait = WebDriverWait(driver, 100)    
    wait.until(EC.element_to_be_clickable((By.ID,'menuIntroBox_buttonNext')))    
    driver.find_element_by_id("menuIntroBox_buttonNext").click()

    # Click through the introduction text... this is the problematic code.
    # Here I tried to wait for the element to be clickable, then tried to do a while 
    # loop so I can click on it as long as it's clickable, but it never seems to do the
    # break.
    wait.until(EC.element_to_be_clickable((By.ID,'main_buttonMissionTextNext')))
    while EC.element_to_be_clickable((By.ID,'main_buttonMissionTextNext')):
        element = driver.find_element_by_id("main_buttonMissionTextNext")
        element.click()
        print "Waiting until it's clickable."

        if not element.is_enabled():
            break

    print "Here is where I'd do other stuff.... the stuff I want to actually do in the test case."
finally:
    driver.quit() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T03:00:21.917

弄清楚了。这是相关的代码块：

```
wait.until(EC.element_to_be_clickable((By.ID, 'main_buttonMissionTextNext')))
while EC.element_to_be_clickable((By.ID,'main_buttonMissionTextNext')):
    driver.find_element_by_id("main_buttonMissionTextNext").click()
    if not driver.find_element_by_id("main_buttonMissionTextNext").click().is_enabled():
        break
    wait.until(EC.element_to_be_clickable((By.ID, 'main_buttonMissionTextNext'))) 
```

我发现了两件事：

1.  您可以使用 . 检查元素是否已启用`is_enabled()`。
2.  单击该元素后，您必须重新搜索该元素的 DOM。我猜这个对话框会自己重绘，所以你需要再次找到它。

我可能会重构它以使其看起来更好，但基本想法现在就在这里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T09:22:33.133

```
While driver.find_element_by_id("main_buttonMissionTextNext").isEnabled() {
  driver.find_element_by_id("main_buttonMissionTextNext").click();
  sleep(1);
}

//sleep function is in java, so you can "translate" it in python 
void sleep(int i){
  driver.manage().timeouts().implicitlyWait(i, TimeUnit.SECONDS);
} 
```

试试看，告诉我怎么了。

# ios - 从 nib 加载 UITableViewCell 子类时给出的类型错误

> ID：15824157
> 
> 赞同：0
> 
> 时间：2013-04-05T00:47:08.770
> 
> 标签：ios, uitableview, uikit, uinib

以下断言失败：

```
NSString *class = NSStringFromClass([RCTReceiptOptionsCell class]);
RCTReceiptOptionsCell *cell = [[[NSBundle mainBundle] loadNibNamed:class owner:self options:nil] objectAtIndex:0];
NSAssert([cell isKindOfClass:[RCTReceiptOptionsCell class]], @"cell is wrong class dummy"); 
```

我正在尝试从笔尖创建一个 UITableView 单元子类，这在过去对我有用。现在该方法`UIView`在 iOS 6.1 中返回 a。有想法该怎么解决这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T00:52:16.897

确保 nib 中根对象的类设置为`RCTReceiptOptionsCell`而不是默认值`UIView`.

# java - 无法在动作侦听器（Jframe）中引用非变量

> ID：15824158
> 
> 赞同：0
> 
> 时间：2013-04-05T00:47:15.833
> 
> 标签：java, arrays, swing, variables, jframe

以下程序的目标是要求用户输入一个电阻值，然后程序将输出每个数字对应的颜色。因此，这不包括所有数字。但是，该程序已经完成，我尝试将 JFrame 合并为一个额外的东西，除了我对如何在动作侦听器中打印相应的颜色感到困惑。

这一行调用了特定的方法，对于 3 位数字，然后继续打印颜色，除了我如何将它和我的其余代码合并到我的 JFrame 和/或 ActionListener 中。行 System.out.println(array3[i]);/

尝试在动作侦听器“无法引用非最终变量”中简单地打印颜色值时，我确实收到了错误....

我尝试过在线查看各种教程，甚至是 Java API 和指南，但都无济于事。总的来说，我似乎不知道如何将已经写入 JFrame 的代码合并到 JFrame 中，无论这是一个乏味的过程，我愿意合作并且非常感谢有关如何解决这个困境的一些见解。

```
import java.io.*;
import javax.swing.*;
//import javax.swing.JFrame;
//import javax.swing.JLabel;
//import javax.swing.JButton;
//import javax.swing.JPanel;
//import javax.swing.JTextField;
import java.awt.event.*;

public class test extends JFrame
{
  public static void main (String [] args) throws IOException
  {
    BufferedReader myInput = new BufferedReader (new InputStreamReader (System.in));

    //calling variables
    String input;
    int numInput;

    JLabel l = new JLabel("Hello and welcome to the Program (Press the button to start the instructions");
    //l.setAlignmentX(0);
    // l.setAlignmentY(0);

    //calling arrays
    int [] array = new int [5];
    int [] array2 = new int [3];
    String [] array3 = new String [3];
    String[] colours = {"black", "brown", "red", "orange", "yellow", "green", "blue", "violet", "gray", "white"};

    JFrame f = new JFrame("Hello JFrame");
    f.setSize(500,500);
    //f.getContentPane().setBackground(Color.CYAN);
    f.add(l);
    f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    f.setVisible(true);

    //JTextField t = new JTextField(16);

    JPanel p = new JPanel ();
    JButton b = new JButton("Press me") ;
    // b.setAlignmentX(0);
    // b.setAlignmentY(0);

    b.addActionListener(new ActionListener(){
      public void actionPerformed (ActionEvent e) {
        JOptionPane.showMessageDialog(null,"In the following program you (The user!) will input a number of a resistor value \nThe program will pass the information into methods and then proceed to print out \nThe coorelating colors (Press the button to be asked for input)");
        int number = Integer.parseInt(JOptionPane.showInputDialog("Please enter the resistor value"));

        JOptionPane.showMessageDialog(null, "The Colors are : " + (array3[i] + "\n" ));

      } 

    });

    p.add(b);
    p.add(l);
    //p.add(t);
    f.add(p);

    System.out.println("Hello and welcome to the Program (Press any key to con't)");
    input = myInput.readLine ();

    System.out.println("In the following program you (The user!) will input a number of a resistor value");
    System.out.println("The program will pass the information into methods and then proceed to print out");
    System.out.println("The coorelating colors (Press any key to be asked for input)");
    input = myInput.readLine();

    System.out.println("Enter a resistor value (Note that resistors can only acount to 4 decimal places");
    input = myInput.readLine ();
    numInput = Integer.parseInt (input);

    //colours for values
    array2 = values(array, input, colours);
    for(int i = 0 ; i < 3; i++){
      array3[i] = digitColours(array2[i], colours);
      System.out.println(array3[i]);// prints colours for values
    }

    //prints 4th colour for multiplier
    System.out.println(decimalPlaces(input, colours));

  } 

  public static int[] values (int [] digit, String num, String[] colours)
  {

    String holder;
    double numHolder;
    int lengthOfInput;
    int holder2;

    //tollerance
    holder = num.substring(3,4);
    digit[3] = Integer.parseInt(holder);
    holder2 = Integer.parseInt(num);
    // checks to see if above 5
    if(digit[3] < 5){
      digit[3] = digit[3]/holder2 * 100;
    }
    else if(digit[3] > 5){
      digit[3] = 10 - digit[3];
      digit[3] = digit[3]/holder2 * 100;
    }
    System.out.println(digit[3]);

    //Rounding of the input
    lengthOfInput = num.length() - 3;
    numHolder = Double.parseDouble(num);
    numHolder = numHolder/(Math.pow(10,lengthOfInput));
    numHolder = (int)(Math.round(numHolder)+0.5);

    // first three digits
    for(int i = 0; i < 3; i++){
      holder = num.substring(i,i+1);
      digit[i] = Integer.parseInt(holder);
    }

    //print out for information
    /*System.out.println("The first digit is rounded to:" + (int)digit[0]);
     System.out.println("The second digit is roudned to:" + (int)digit[1]);                   
     System.out.println("The third digit is roudned to:" + (int)digit[2]);  */
    /* */
    return new int[] {digit[0], digit[1],digit[2],digit[3]} ;// return
  }

  public static String digitColours(int decimalPlace, String[] colours){
    //calling additional variables
    String answer;
    answer = colours[decimalPlace];
    return answer;
  }

  //method to find the multiplier
  public static String decimalPlaces(String input, String[] colours){
    //calling additional variables
    int length = input.length();
    String answer;

    length = length - 3;
    answer = colours[length];

    return answer;
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T01:08:25.333

在 Java 中，您不能在匿名内部类中引用非最终变量。您尝试`array3`访问`ActionListener`. 您可以简单地更改`array3`为final，即：

```
final String [] array3 = new String [3]; 
```

此外，要打印数组的内容，您可以使用`Arrays.toString()`：

```
JOptionPane.showMessageDialog(null, "The Colors are : " + (Arrays.toString(array3))); 
```

# java - 当文件从 Git 同步到 Jenkins 工作区时，字符注入到 Java 类的字符串中

> ID：15824161
> 
> 赞同：0
> 
> 时间：2013-04-05T00:47:27.787
> 
> 标签：java, git, character-encoding, jenkins

我有一个具有以下内容的 Java 类：

```
public static final blob COPYRIGHT_MARK = new Blob("div.legal_footer span", "© " + new SimpleDateFormat("yyyy").format(new Date()) + " Acme LLC. All Rights Reserved."); 
```

具有该类的项目存储在 git 存储库中，并由 Jenkins 作业拉取以运行单元测试。当文件被拉入 Jenkins 作业工作区时，会在字符串中的版权符号之前注入一个字符：

```
public static final blob COPYRIGHT_MARK = new Blob("div.legal_footer span", "Â© " + new SimpleDateFormat("yyyy").format(new Date()) + " Acme LLC. All Rights Reserved."); 
```

这导致测试失败。

java 类被编码为 UTF-8。可以在本地构建项目并在本地运行测试，没有任何问题。Jenkins 实例在 OSX 上运行。代码也是在 Mac 上编写的。

我很难理解为什么文件在拉入工作区时会被更改。

关于检查什么的任何建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T12:27:51.507

您需要在一些配置文件/参数/环境变量中声明要使用的编码是 UTF-8。将文件物理编码为 UTF-8 只是成功了一半，文件的任何读者也需要了解这一事实。

* * *

没有字符注入，mojibake 也包含版权字符只是一个巧合。

您已将文件编码为 UTF-8，因此实际上它具有以下字节：

```
0xC2 0xA9 
```

当该文件的读者*知道*将该文件解释为 UTF-8 时，该字符`©`将正确显示。

但是，如果该文件的阅读者不知道用什么编码来解释该文件，则很可能会被错误地解释。

在您的情况下，该文件可能被错误地解释为 Windows-1252/cp1252/"ANSI" 或 ISO-8859-1。在这些编码`0xC2 0xA9`中`Â©`，所有其他字节都解码为与 UTF-8 中相同的字符——这又是一个巧合。如果您只使用具有相同编码映射的字符，您甚至不会注意到有问题。

[每个软件开发人员绝对、绝对必须了解 Unicode 和字符集的绝对最低要求（没有借口！）](http://www.joelonsoftware.com/articles/Unicode.html)

# perl - Perl - 转换匿名数组

> ID：15824164
> 
> 赞同：1
> 
> 时间：2013-04-05T00:48:00.523
> 
> 标签：perl

我可以操作单个数组元素并将对该数组的引用添加为哈希中的值。简单的。例如，这达到了预期的结果：

```
# split the line into an array
my @array = split;

# convert the second element from hex to dec
$array[1] = hex($array[1]);

# now add the array to a hash
$hash{$name}{ ++$count{$name} } = \@array; 
```

我的问题：是否可以使用匿名数组做同样的事情？我可以通过执行以下操作来接近：

```
$hash{$name}{ ++$count{$name} } = [ split ]; 
```

但是，这不会操纵匿名数组的第二个索引（将十六进制转换为十进制）。如果可以，怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T00:55:01.567

你要的是这个

```
my $array = [ split ];

$array->[1] = hex($array->[1]);

$hash{$name}{ ++$count{$name} } = $array; 
```

但这可能不是你的意思。

另外，与其使用顺序编号的散列键，不如使用数组散列，像这样

```
my $array = [ split ];

$array->[1] = hex($array->[1]);

push @{ $hash{$name} }, $array; 
```

您需要一种访问数组的方法来说出您想要修改的内容，但是您可以在将其推送到散列后对其进行修改，如下所示：

```
push @{ $hash{$name} }, [split];
$hash{$name}[-1][1] = hex($hash{$name}[-1][1]); 
```

虽然那真的不是很好。或者你可以

```
push @{ $hash{$name} }, do {
    my @array = [split];
    $array[1] = hex($array[1]);
    \@array;
}; 
```

甚至

```
for ([split]) {
    $_->[1] = hex($_->[1]);
    push @{ $hash{$name} }, $_;
} 
```

# javascript - 用javascript清除数组和文本框

> ID：15824165
> 
> 赞同：-1
> 
> 时间：2013-04-05T00:48:14.187
> 
> 标签：javascript, jquery, checkbox

每次选中复选框时，都会调用以下函数。我的问题是我需要另一个函数来清除此处所有可用的数据。

先解释一下我的问题：

该程序的概念是用复选框值更新文本框 - 如果选中两个复选框，则文本框将有两个值，依此类推。

我需要一个函数来清除复选框上的数据，这样当我单击第三个复选框时，它只需要通过从文本区域中删除第一个和第二个复选框来显示第三个复选框的值。这一切都应该在不重新加载页面的情况下发生

```
<script>
    function chkcontrol(j){
        var textbox = document.getElementById("list");
        var textbox1 = document.getElementById("val_id");
        var values = [];    
        var val_id=[];
        if(document.getElementById(1).checked) {
            values.push('A1');
            val_id.push('1');
        }
        if(document.getElementById(2).checked) {
            values.push('A2');
            val_id.push('2');   }
        if(document.getElementById(3).checked) {
            values.push("A3");
            val_id.push('3');
        }
        if(document.getElementById(4).checked) {
            values.push("A4");
            val_id.push('4');
        }
        if(document.getElementById(5).checked) {
            values.push("A5");
            val_id.push('5');
        }
        if(document.getElementById(6).checked) {
            values.push("A6");
            val_id.push('6');
        }

        textbox.value = values.join(",");
        textbox1.value = val_id.join(",");
    }

    function removeAll(){
    }
</script>

<input id="list" type="text" name="list">
<input id="val_id" type="text" name="val_id">
<input type="checkbox" name="ckb" value="A1" id="1" onclick='chkcontrol(0)';>
<label for="1"></label>
<input type="checkbox" name="ckb" value="A2" id="2" onclick='chkcontrol(0)';>
<label for="2"></label>
<input type="checkbox" name="ckb" value="A3" id="3" onclick='chkcontrol(0)';>
<label for="3"></label> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T00:59:37.257

我不知道你到底需要什么，但如果你需要“清除”一个 javascript 数组，只需将长度设置为 0（零）。

```
var a = [0,1,2,3,4,5,6,7,8,9];
a.length = 0; // truncate array 
```

[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/length#Description)说：“您可以随时设置长度属性来截断数组。”

希望对你有帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T01:18:22.873

为了节省一些打字（并且减少出错的机会），应该使用循环访问元素，例如

```
for (var i=1; i<7; i++) {

  if (document.getElementById(i).checked) {
    values.push('A' + i);
    val_id.push('' + 1);
  }
} 
```

如果元素在表单中，请考虑将它们作为表单的命名属性访问，而不是多次调用*getElementById ：*

```
var form = document.getElementById(formID);
... 
```

但是，为此您需要分配一个不是数字的名称以避免与控件的索引发生冲突，因此如果您将它们重命名为“input_1”等，那么您可以执行以下操作：

```
 if (form['input_' + i].checked) { 
```

要将“文本框”（我猜这是输入类型文本或文本区域元素）的值设置为默认值：

```
textbox.value = textbox.defaultValue;
textbox1.value = textbox1.defaultValue; 
```

要“清除”数组，请将其长度设置为 0：

```
values.length = 0; 
```

或者只是用一个新数组替换它

```
values = []; 
```

如果数组被多个变量引用，则做第一个；否则两者都可以。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T01:21:12.713

我不知道为什么我只花了 29 分钟在你的代码上，但无论如何都是这样。享受。对未来的几点建议：

1.  如果您要使用 jQuery，请尝试让您的脚本远离您的标记，即没有 onclick 事件。
2.  如果您发现自己在 DOM 元素集合上做无穷无尽的 if 语句，那么可能有更好的方法。

无论如何，我会下车，这是代码：

```
<html>
<head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $("input[type=\"checkbox\"][name=\"ckb\"]").click(function () {
                var values = [];
                var val_id = [];
                var checked = $("input[type=\"checkbox\"][name=\"ckb\"]:checked");
                if (checked.length < 3) {
                    checked.each(function (i, e) {
                        values.push($(e).val());
                        val_id.push($(e).prop("id"));
                    });
                } else {
                    values.push($(this).val());
                    val_id.push($(this).prop("id"));
                }
                $("input#list").val(values.join(","));
                $("input#val_id").val(val_id.join(","));
            });
        });
    </script>
</head>
<body>
    <input id="list" type="text" name="list">
    <input id="val_id" type="text" name="val_id">
    <input type="checkbox" name="ckb" value="A1" id="1">
    <input type="checkbox" name="ckb" value="A2" id="2">
    <input type="checkbox" name="ckb" value="A3" id="3">
</body>
</html> 
```

还有一个小提琴：http: [//jsfiddle.net/df59H/](http://jsfiddle.net/df59H/)

如果您需要清除这些框：

```
$("#someButtonId").click(function(){
    $("input#list").val("");
    $("input#val_id").val("");
}); 
```

# forms - 单击提交表单上的提交后重定向

> ID：15824172
> 
> 赞同：0
> 
> 时间：2013-04-05T00:48:54.817
> 
> 标签：forms, joomla, submission

我正在使用 Joomla 1.5.23，我希望用户在提交表单 (RSForm Pro) 上单击“提交”后直接进入登录页面，而不是带有另一个按钮的感谢页面（“继续'）。我如何消除这个额外的步骤？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T00:00:27.820

只需更改组件控制器中的重定向（您可以查看您提交的表单的“选项”和“任务”输入）。

请立即更新到最新的 1.5。版本（我认为至少是 0.26）并开始计划升级到 2.5。

# php - 图片上传，ajax，php，mysql

> ID：15824177
> 
> 赞同：1
> 
> 时间：2013-04-05T00:49:31.500
> 
> 标签：php, mysql, ajax, image, upload

我有一个问题。是否可以使用 Ajax POST 和 PHP 将图像从文件输入上传到 MySQL？

像这样：

```
<script type="text/javascript">
$(document).ready(function(){
    $("button").click(function(){
    $("#form_id").submit(function(){
            $.ajax({
            type:"POST",
                data:image_data,
                url:"/path_to_php/ImageSave.php",
                success: function(msg){
                        alert("ok");
                    }
            });
            return false;
        });
    });
});
</script>
<form name="form_name" id="form_id" action="#" method="POST">
    <input type="file" name="image" id="image" />
    <button>Save</button>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T01:43:02.547

上传文件并将其存储在数据库中可以通过多种方式完成。[这是执行此操作的一个教程。](http://www.onlamp.com/pub/a/php/2000/09/15/php_mysql.html). 但问题是，如果你想使用 Ajax 来做到这一点，那绝对是可能的，[检查一下，](http://net.tutsplus.com/tutorials/javascript-ajax/uploading-files-with-ajax/)但几乎常见的浏览器不支持它，解决方案是：

*   使用 iframe：[查看本教程](http://www.alfajango.com/blog/ajax-file-uploads-with-the-iframe-method/)
*   使用 jquery 插件[检查这篇文章](http://www.jquery4u.com/jquery-plugins/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-12T14:57:58.943

试试这个。

```
<script type="text/javascript">
    $(document).ready(function(){
    $("#button").click(function(){
     var form_data = $('#reg_form').serialize();
    $.ajax({
        type:"POST",
        url:"/path_to_php/ImageSave.php",
        data:form_data,
        success: function(data)
        {
            $("#info").html(data);
        }

    });
    }); 

    });
    </script> 
```

# cocos2d-iphone - Cocos2d-x：如何优化 100 个相同精灵的内存？

> ID：15824179
> 
> 赞同：1
> 
> 时间：2013-04-05T00:49:38.833
> 
> 标签：cocos2d-iphone, cocos2d-x, ccsprite, ccspritebatchnode

我的任务是在帧中绘制一个精灵 100 次。例如，我需要画一行由一个精灵“sprite.png”组成。我这样做：

```
CCSprite *spriteArr[ 100 ];

for ( unsigned int i = 0; i < 100; i++ ) {

    spriteArr[ i ] = new cocos2d::CCSprite();
    spriteArr[ i ]->initWithFile( "sprite.png" );
    spriteArr[ i ]->setPosition( cocos2d::CCPoint( i * 10, 100 ) );

    this->addChild( spriteArr[ i ] );

} 
```

这就是问题所在。我只为一个精灵分配内存 100 次，但我不知道如何以不同的方式进行。我该如何优化它？Cocos2d 中是否有一种方法可以使用坐标（x 和 y）绘制精灵，但不为每个相同的精灵分配内存？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T04:25:53.183

因为所有 100 个精灵都使用相同的纹理，所以最好的方法是使用`CCSpriteBatchNode`. 它将在 1 个单一的 OpenGL 调用中绘制它们。

```
CCSpriteBatchNode* batchNode = CCSpriteBatchNode::create("sprite.png", 100);
batchNode->setPosition(CCPointZero);
this->addChild(batchNode);

for(int i = 0;i < 100;++i)
{
   CCSprite* sprTest = CCSprite::createWithTexture(batchNode->getTexture());
   sprTest->setPosition(ccp(i*10,100));
   batchNode->addChild(sprTest);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-05T08:04:49.900

你很厉害。所有 100 个精灵都将引用同一个纹理对象，因此它只是内存中的一个纹理。每个 sprite 实例在此之上添加的内存少于 500 字节。

节省内存的最佳选择是使用 .pvr.ccz 格式的图像。

# c++ - 比较字符会导致总线错误

> ID：15824181
> 
> 赞同：0
> 
> 时间：2013-04-05T00:49:52.517
> 
> 标签：c++, char

我迷失了试图找出运行时错误。我有一个 struct 数据类型，并在 array 中实现了它`items[]`。在结构中，有一个`char name`定义。我还在使用 cin 将用户输入读取到`char`数据类型中。

```
i=0;
do {
printf("%c\n", items[i].name);
printf("%c\n", itemname);

//if ( items[i].name == itemname ) 
//found=true;
i++;
} while (i<numofitems || found); 
```

如果我取消注释 if 语句，`printf("%c\n", itemname);`似乎会运行数千次，然后是`Bus error: 10`. 请注意，numofitems 目前只有 5 个。

当前编写方式的输出：

```
A
C
B
C
C
C
D
C
E
C 
```

知道为什么我不能简单地比较一个字符是否等同于另一个字符吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T00:57:27.363

你的情况应该是`i<numofitems && !found`。现在，如果其中任何一个为真，它就会继续循环，并`found`在第三次迭代时变为真。

我将其重写为：

```
for (int i = 0; i <numitems; ++i)
    std::cout << items[i].name << '\n';
    std::cout << itemname << '\n';

    if ( items[i].name == itemname ) 
        break;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T00:57:22.370

正如@chris 所提到的，您的终止条件看起来是错误的。如果将 found 设置为 true，则循环将永远不会终止。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T01:02:11.767

当您设置“found=true”时，您正在使循环永远运行。要么改变你的循环测试，所以你在找到时退出，例如

```
} while (i < numofitems && found == false ); 
```

或在找到设置后放置一个break语句，例如。

```
if ( items[i].name == itemname ) {
    found = true;
    break;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T01:02:05.173

是的。另请注意，打印出 10 个字符。每个循环迭代打印两次，因此循环执行良好，直到 i 超过 numofitems。由于此时'found == true'，循环尝试第六次迭代，导致总线错误（通常称为[分段错误](http://en.wikipedia.org/wiki/Segmentation_fault)）

# javascript - 循环浏览 Canvas 中的文件夹图像

> ID：15824183
> 
> 赞同：0
> 
> 时间：2013-04-05T00:50:07.227
> 
> 标签：javascript, arrays, html, canvas

我试图让我的页面上的画布元素循环通过文件夹中的一组图像。我已经想出了如何在画布上设置图像，但我不确定如何一个接一个地制作多个图像。

我认为可以使用 for 循环和数组，但我不确定将所有图像存储在数组中的最佳方法是什么。

这是我的网站，它使用一张图片。Onload 它显示图像，在设定的时间画布被隐藏并出现回复按钮后：[http ://www3.carleton.ca/clubs/sissa/html5/](http://www3.carleton.ca/clubs/sissa/html5/)

我正在尝试的是让所有图像（25）一个接一个地快速显示。有点像[漫威的介绍动画](http://www.youtube.com/watch?v=8bxaZ4-ZNeU)，但更糟糕:)

到目前为止，这就是我为设置画布所做的工作

```
window.addEventListener("load", initCanvas);

var canvas, play, ctx, playLenght, img; 

function initCanvas(){
    getElements();    
    setCanvas();
}

function getElements(){
    canvas = document.getElementById('canvas');    
    play = document.getElementById('canvasPlay');
    play.addEventListener("click",setCanvas);
}

function setCanvas(){

    //Hide ctx play button
    play.style.visibility = 'hidden';

    //Make ctx visible   
    canvas.style.visibility = "visible";

    ctx = canvas.getContext("2d");

    //Clear ctx
    ctx.clearRect(0,0,canvas.width, canvas.height);

    playLenght = 3000;

    startAnimation();

    setTimeout(hideCanvas, playLenght);    
}

function startAnimation(){
    img = new Image();
    img.src ='images/canvas/canvas.batman.jpg';
    img.onload = function(){ctx.drawImage(img,0,0, canvas.width,canvas.height)}
}

function hideCanvas(){
    canvas.style.visibility = 'hidden';
    play.style.visibility = 'visible';
} 
```

这是一个作业，所以我不能在这里使用除画布以外的任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T00:59:49.120

```
function startAnimation(){
    var images = {"imagepath1","imagepath2"... all the way to 25!};
    for(int i=0; i<25; i++)
    {
        img = new Image();
        img.src = images[i];
        img.onload = function(){ctx.drawImage(img,0,0, canvas.width,canvas.height)}
    }
} 
```

您可能想在那里延迟，以免被人眼察觉/他们走得太快。

# java - 使用Android NDK自定义SQLite，SQLite源码

> ID：15824184
> 
> 赞同：1
> 
> 时间：2013-04-05T00:50:15.430
> 
> 标签：java, android, sqlite, android-ndk

我正在开发一个使用新的谷歌地图（见谷歌播放服务和库）和 gps 本地化的应用程序。在我的应用程序中，我还有一个 SQLite 数据库，它由一个名为**POI(DOUBLE Latitute,DOUBLE Longitude,VARCHAR(45) POIName)**的表组成。在**每个**新的 gps 值（LatLng）处，我需要查询数据库以获取最近的 POI。为此，我需要使用此[算法](http://www.spadamar.com/2007/12/calcolo-della-distanza-geodetica-tra-due-punti-della-superficie-terrestre/)并在 sql 中编写类似的内容。不难。正确的？

真正的问题是：SQLite 没有 cos、sin 和 acos 函数。我尝试使用 SQLite 源代码、Android NDK、Cygwin（我正在使用 W8）和我的项目来遵循这个[答案](https://stackoverflow.com/questions/7867099/how-to-create-a-user-defined-function-in-sqlite)......一起阅读官方文档，但没有结果。

有没有关于这个的***好***教程？或者有人可以**逐步向**我解释如何做到这一点？

[编辑：更多信息] 我在我的项目中创建了一个 jni 文件夹，我把它放在里面：SQLite 源代码；安卓.mk。

安卓.mk

```
#LOCAL_PATH is used to locate source files in the development tree.
#the macro my-dir provided by the build system, indicates the path of the current directory
LOCAL_PATH:=$(call my-dir)

#####################################################################
#            build sqlite3                                            #
#####################################################################
include $(CLEAR_VARS)
LOCAL_C_INCLUDES := $(LOCAL_PATH)/sqlite-amalgamation-3070900
LOCAL_MODULE:=sqlite3
LOCAL_SRC_FILES:=sqlite3.c
#include $(BUILD_STATIC_LIBRARY)

include $(BUILD_SHARED_LIBRARY) 
```

在 cygwin 中，我移动到 android-ndk-r8e 文件夹并运行：

```
./ndk-build -C 'C:/Eclipse/Workspace/MyApp' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-24T23:28:35.123

我能够在[No rule to make target error android ndk build sqlite](https://stackoverflow.com/questions/17811100/no-rule-to-make-target-error-android-ndk-build-sqlite/17846438)编译它。我现在一直在尝试使用该库=/

# c# - 如何使用 json.net 将 json 数组添加到 JObject 的属性中

> ID：15824194
> 
> 赞同：13
> 
> 时间：2013-04-05T00:51:35.320
> 
> 标签：c#, json, serialization, json.net, deserialization

我很难弄清楚如何将一组 json 对象添加到现有的`JObject`. 假设我`JObject`只有“修改”属性，并且我想添加另一个包含 json 对象数组的属性“IntersectGroups”，我该怎么做？我有一个`JObject[]`，当我序列化它时，它正是我需要的格式，但我正在寻找这样的东西：`mainJObject.Add("IntersectGroups", myJObjectArray)`

这是我序列化它时想要的最终 json 的示例。

```
...
"Modified": "2012-11-26T10:21:04.693",
"IntersectGroups": [
  {
    "Id": 1004,
    "UserId": 20003,
    "GroupId": 1001,
    "Admin": false,
    "Expires": "1900-01-01T00:00:00"
  },
  {
    "Id": 1003,
    "UserId": 20003,
    "GroupId": 1000,
    "Admin": false,
    "Expires": "1900-01-01T00:00:00"
  }
]
... 
```

**更新**

我的最终解决方案是使用 JArray 对象。JArray 是一个 JContainer，它是一个 JToken，您可以将它添加到 JObject。我的问题是我试图使用 JObject[]，它不是有效的 JToken

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-05-15T07:51:22.013

我的最终解决方案是使用该`JArray`对象。A`JArray`是 a `JContainer`，这是 a `JToken`，您可以将其添加到 a `JObject`。我的问题是我试图使用 a `JObject[]`，这不是有效的`JToken`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T00:57:15.773

查看`PopulateObject()`方法，它有一个很好的例子来说明如何做到这一点：

[http://james.newtonking.com/projects/json/help/index.html?topic=html/PopulateObject.htm](http://james.newtonking.com/projects/json/help/index.html?topic=html/PopulateObject.htm)

# java - 如何从文本区域中删除输入的数字？

> ID：15824202
> 
> 赞同：0
> 
> 时间：2013-04-05T00:53:00.283
> 
> 标签：java, arrays, swing, list, textarea

```
/*
 * IntegerSumsView.java
 * This is a program that allows an individual to add a list of numbers, and choose whether 
 * they add all numbers, or only even or odd numbers
 */

   public class IntegerSumsView extends FrameView {

//

int position = 0;
int[] aryInteger = new int[10];

 public IntegerSumsView(SingleFrameApplication app) {
    super(app);

    initComponents();

    // status bar initialization - message timeout, idle icon and busy animation, etc
    ResourceMap resourceMap = getResourceMap();
    int messageTimeout = resourceMap.getInteger("StatusBar.messageTimeout");
    messageTimer = new Timer(messageTimeout, new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            statusMessageLabel.setText("");
        }
    });
    messageTimer.setRepeats(false);
    int busyAnimationRate = resourceMap.getInteger("StatusBar.busyAnimationRate");
    for (int i = 0; i < busyIcons.length; i++) {
        busyIcons[i] = resourceMap.getIcon("StatusBar.busyIcons[" + i + "]");
    }
    busyIconTimer = new Timer(busyAnimationRate, new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            busyIconIndex = (busyIconIndex + 1) % busyIcons.length;
            statusAnimationLabel.setIcon(busyIcons[busyIconIndex]);
        }
    });
    idleIcon = resourceMap.getIcon("StatusBar.idleIcon");
    statusAnimationLabel.setIcon(idleIcon);
    progressBar.setVisible(false);

    // connecting action tasks to status bar via TaskMonitor
    TaskMonitor taskMonitor = new TaskMonitor(getApplication().getContext());
    taskMonitor.addPropertyChangeListener(new java.beans.PropertyChangeListener() {
        public void propertyChange(java.beans.PropertyChangeEvent evt) {
            String propertyName = evt.getPropertyName();
            if ("started".equals(propertyName)) {
                if (!busyIconTimer.isRunning()) {
                    statusAnimationLabel.setIcon(busyIcons[0]);
                    busyIconIndex = 0;
                    busyIconTimer.start();
                }
                progressBar.setVisible(true);
                progressBar.setIndeterminate(true);
            } else if ("done".equals(propertyName)) {
                busyIconTimer.stop();
                statusAnimationLabel.setIcon(idleIcon);
                progressBar.setVisible(false);
                progressBar.setValue(0);
            } else if ("message".equals(propertyName)) {
                String text = (String)(evt.getNewValue());
                statusMessageLabel.setText((text == null) ? "" : text);
                messageTimer.restart();
            } else if ("progress".equals(propertyName)) {
                int value = (Integer)(evt.getNewValue());
                progressBar.setVisible(true);
                progressBar.setIndeterminate(false);
                progressBar.setValue(value);
            }
        }
    });
}

@Action
public void showAboutBox() {
    if (aboutBox == null) {
        JFrame mainFrame = IntegerSumsApp.getApplication().getMainFrame();
        aboutBox = new IntegerSumsAboutBox(mainFrame);
        aboutBox.setLocationRelativeTo(mainFrame);
    }
    IntegerSumsApp.getApplication().show(aboutBox);
}

/** This method is called from within the constructor to
 * initialize the form.
 * WARNING: Do NOT modify this code. The content of this method is
 * always regenerated by the Form Editor.
 */
@SuppressWarnings("unchecked")
// <editor-fold defaultstate="collapsed" desc="Generated Code">
private void initComponents() {

    mainPanel = new javax.swing.JPanel();
    integerLabel = new javax.swing.JLabel();
    enterIntField = new javax.swing.JTextField();
    addIntButton = new javax.swing.JButton();
    sumAllButton = new javax.swing.JButton();
    userOutputField = new javax.swing.JTextField();
    sumEvenButton = new javax.swing.JButton();
    jScrollPane1 = new javax.swing.JScrollPane();
    userOutputArea = new javax.swing.JTextArea();
    sumOddButton = new javax.swing.JButton();
    removeIntButton = new javax.swing.JButton();
    menuBar = new javax.swing.JMenuBar();
    javax.swing.JMenu fileMenu = new javax.swing.JMenu();
    javax.swing.JMenuItem exitMenuItem = new javax.swing.JMenuItem();
    javax.swing.JMenu helpMenu = new javax.swing.JMenu();
    javax.swing.JMenuItem aboutMenuItem = new javax.swing.JMenuItem();
    statusPanel = new javax.swing.JPanel();
    javax.swing.JSeparator statusPanelSeparator = new javax.swing.JSeparator();
    statusMessageLabel = new javax.swing.JLabel();
    statusAnimationLabel = new javax.swing.JLabel();
    progressBar = new javax.swing.JProgressBar();

    org.jdesktop.application.ResourceMap resourceMap = org.jdesktop.application.Application.getInstance(integersums.IntegerSumsApp.class).getContext().getResourceMap(IntegerSumsView.class);
    integerLabel.setText(resourceMap.getString("integerLabel.text")); // NOI18N
    integerLabel.setName("integerLabel"); // NOI18N

    enterIntField.setText(resourceMap.getString("enterIntField.text")); // NOI18N
    enterIntField.setName("enterIntField"); // NOI18N

    addIntButton.setText(resourceMap.getString("addIntButton.text")); // NOI18N
    addIntButton.setName("addIntButton"); // NOI18N
    addIntButton.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            addIntButtonActionPerformed(evt);
        }
    });

    sumAllButton.setText(resourceMap.getString("sumAllButton.text")); // NOI18N
    sumAllButton.setName("sumAllButton"); // NOI18N
    sumAllButton.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            sumAllButtonActionPerformed(evt);
        }
    });

    userOutputField.setText(resourceMap.getString("userOutputField.text")); // NOI18N
    userOutputField.setName("userOutputField"); // NOI18N

    sumEvenButton.setText(resourceMap.getString("sumEvenButton.text")); // NOI18N
    sumEvenButton.setName("sumEvenButton"); // NOI18N
    sumEvenButton.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            sumEvenButtonActionPerformed(evt);
        }
    });

    jScrollPane1.setName("jScrollPane1"); // NOI18N

    userOutputArea.setColumns(20);
    userOutputArea.setRows(5);
    userOutputArea.setName("userOutputArea"); // NOI18N
    jScrollPane1.setViewportView(userOutputArea);

    sumOddButton.setText(resourceMap.getString("sumOddButton.text")); // NOI18N
    sumOddButton.setName("sumOddButton"); // NOI18N
    sumOddButton.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            sumOddButtonActionPerformed(evt);
        }
    });

    removeIntButton.setText(resourceMap.getString("removeIntButton.text")); // NOI18N
    removeIntButton.setName("removeIntButton"); // NOI18N
    removeIntButton.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            removeIntButtonActionPerformed(evt);
        }
    });

    javax.swing.GroupLayout mainPanelLayout = new javax.swing.GroupLayout(mainPanel);
    mainPanel.setLayout(mainPanelLayout);
    mainPanelLayout.setHorizontalGroup(
        mainPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(mainPanelLayout.createSequentialGroup()
            .addContainerGap()
            .addGroup(mainPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addComponent(userOutputField, javax.swing.GroupLayout.DEFAULT_SIZE, 372, Short.MAX_VALUE)
                .addGroup(mainPanelLayout.createSequentialGroup()
                    .addGroup(mainPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                        .addGroup(mainPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, mainPanelLayout.createSequentialGroup()
                                .addComponent(addIntButton)
                                .addGap(89, 89, 89))
                            .addGroup(mainPanelLayout.createSequentialGroup()
                                .addComponent(sumAllButton)
                                .addGap(73, 73, 73))
                            .addGroup(mainPanelLayout.createSequentialGroup()
                                .addComponent(sumEvenButton)
                                .addGap(61, 61, 61))
                            .addGroup(mainPanelLayout.createSequentialGroup()
                                .addComponent(sumOddButton)
                                .addGap(65, 65, 65)))
                        .addGroup(mainPanelLayout.createSequentialGroup()
                            .addComponent(integerLabel)
                            .addGap(18, 18, 18)
                            .addGroup(mainPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                .addComponent(removeIntButton)
                                .addComponent(enterIntField, javax.swing.GroupLayout.PREFERRED_SIZE, 30, javax.swing.GroupLayout.PREFERRED_SIZE))))
                    .addGap(18, 18, 18)
                    .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 181, javax.swing.GroupLayout.PREFERRED_SIZE)))
            .addGap(18, 18, 18))
    );
    mainPanelLayout.setVerticalGroup(
        mainPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(mainPanelLayout.createSequentialGroup()
            .addGap(48, 48, 48)
            .addGroup(mainPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                .addGroup(mainPanelLayout.createSequentialGroup()
                    .addGroup(mainPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                        .addComponent(integerLabel)
                        .addComponent(enterIntField, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(mainPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                        .addGroup(mainPanelLayout.createSequentialGroup()
                            .addGap(36, 36, 36)
                            .addComponent(removeIntButton))
                        .addGroup(mainPanelLayout.createSequentialGroup()
                            .addGap(18, 18, 18)
                            .addComponent(addIntButton)
                            .addGap(8, 8, 8)
                            .addComponent(sumAllButton)
                            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                            .addComponent(sumEvenButton)
                            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                            .addComponent(sumOddButton)))
                    .addGap(19, 19, 19))
                .addGroup(mainPanelLayout.createSequentialGroup()
                    .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 151, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGap(18, 18, 18)))
            .addComponent(userOutputField, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addContainerGap(17, Short.MAX_VALUE))
    );

    menuBar.setName("menuBar"); // NOI18N

    fileMenu.setText(resourceMap.getString("fileMenu.text")); // NOI18N
    fileMenu.setName("fileMenu"); // NOI18N

    javax.swing.ActionMap actionMap = org.jdesktop.application.Application.getInstance(integersums.IntegerSumsApp.class).getContext().getActionMap(IntegerSumsView.class, this);
    exitMenuItem.setAction(actionMap.get("quit")); // NOI18N
    exitMenuItem.setName("exitMenuItem"); // NOI18N
    fileMenu.add(exitMenuItem);

    menuBar.add(fileMenu);

    helpMenu.setText(resourceMap.getString("helpMenu.text")); // NOI18N
    helpMenu.setName("helpMenu"); // NOI18N

    aboutMenuItem.setAction(actionMap.get("showAboutBox")); // NOI18N
    aboutMenuItem.setName("aboutMenuItem"); // NOI18N
    helpMenu.add(aboutMenuItem);

    menuBar.add(helpMenu);

    statusPanel.setName("statusPanel"); // NOI18N

    statusPanelSeparator.setName("statusPanelSeparator"); // NOI18N

    statusMessageLabel.setName("statusMessageLabel"); // NOI18N

    statusAnimationLabel.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
    statusAnimationLabel.setName("statusAnimationLabel"); // NOI18N

    progressBar.setName("progressBar"); // NOI18N

    javax.swing.GroupLayout statusPanelLayout = new javax.swing.GroupLayout(statusPanel);
    statusPanel.setLayout(statusPanelLayout);
    statusPanelLayout.setHorizontalGroup(
        statusPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addComponent(statusPanelSeparator, javax.swing.GroupLayout.DEFAULT_SIZE, 400, Short.MAX_VALUE)
        .addGroup(statusPanelLayout.createSequentialGroup()
            .addContainerGap()
            .addComponent(statusMessageLabel)
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 230, Short.MAX_VALUE)
            .addComponent(progressBar, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
            .addComponent(statusAnimationLabel)
            .addContainerGap())
    );
    statusPanelLayout.setVerticalGroup(
        statusPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(statusPanelLayout.createSequentialGroup()
            .addComponent(statusPanelSeparator, javax.swing.GroupLayout.PREFERRED_SIZE, 2, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
            .addGroup(statusPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(statusMessageLabel)
                .addComponent(statusAnimationLabel)
                .addComponent(progressBar, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
            .addGap(3, 3, 3))
    );

    setComponent(mainPanel);
    setMenuBar(menuBar);
    setStatusBar(statusPanel);
}// </editor-fold>

private void addIntButtonActionPerformed(java.awt.event.ActionEvent evt) {                                             

    //I apologize if these comments are a little imformal...or doesn't quite make sense, I'm fairly new at this
    //Here, you add any integer into the enterIntField, and after pressing the addIntButton, the integer is inputted into the
    //userOutputArea, 
    //the "null" is for when you go to add a second integer, it does not input both first integer again ( as well as the second integer)
    //you can add up to 10 different variables.
    //Now I would also like to say I apologize if my any of my terminology is wrong...or makes no sense

    aryInteger[position] = Integer.parseInt(enterIntField.getText());
    position ++;

    userOutputArea.setText(null);

    for (int i = 0; i < position; i++) {
        userOutputArea.setText(userOutputArea.getText() + aryInteger[i] + "\n");

    }

}                                            

private void sumAllButtonActionPerformed(java.awt.event.ActionEvent evt) {                                             

    //this adds all numbers inputted and outputs it the userOutputField...

    int sumall = 0;

    for(int i = 0; i < position; i++)
    {
    sumall += aryInteger[i];
    }

    userOutputField.setText("The sum of all numbers is " + sumall);

}                                            

private void sumEvenButtonActionPerformed(java.awt.event.ActionEvent evt) {                                              

    //add all even numbers

    int sumeven = 0;

    for(int i = 0; i < position; i++)
    {
        if(aryInteger[i]%2==0) {
        sumeven += aryInteger[i];
        }
    }
    userOutputField.setText("The sum of all even numbers is " + sumeven);

}                                             

private void sumOddButtonActionPerformed(java.awt.event.ActionEvent evt) {                                             

    //adds only the odd numbers...

    int sumodd = 0;

    for(int i = 0; i < position; i++)
    {
        if(aryInteger[i]%2!=0) {
        sumodd += aryInteger[i];
        }
    }
    userOutputField.setText("The sum of all odd numbers is " + sumodd);

} 
```

问题就在下面...

```
private void removeIntButtonActionPerformed(java.awt.event.ActionEvent evt) { 
```

这里是我想创建一个“删除”按钮的地方，它取出已经在 userOutputArea 中输入的所有整数。因此用户可以从头开始，而无需退出程序并重新打开它。

我最初认为它会是“i”，因为这是用于在“addIntButtonActionPerformed”下方添加整数的变量/字母......但也许“i”只是下划线，因为在公共类下没有提及它？但是，我会在那里添加什么而不弄乱其他任何东西呢？然而，这对我来说是最有意义的……这只是我用 java 制作的第五个程序，所以我认为很有可能是非常错误的。我知道这很可悲，但这是我目前最好的尝试，在等待回复的同时我仍在尝试。即使是一个小小的提示也将不胜感激！

```
 aryInteger.remove(i);

}                                               
// 3 5 6 8 9
// Variables declaration - do not modify
private javax.swing.JButton addIntButton;
private javax.swing.JTextField enterIntField;
private javax.swing.JLabel integerLabel;
private javax.swing.JScrollPane jScrollPane1;
private javax.swing.JPanel mainPanel;
private javax.swing.JMenuBar menuBar;
private javax.swing.JProgressBar progressBar;
private javax.swing.JButton removeIntButton;
private javax.swing.JLabel statusAnimationLabel;
private javax.swing.JLabel statusMessageLabel;
private javax.swing.JPanel statusPanel;
private javax.swing.JButton sumAllButton;
private javax.swing.JButton sumEvenButton;
private javax.swing.JButton sumOddButton;
private javax.swing.JTextArea userOutputArea;
private javax.swing.JTextField userOutputField;
// End of variables declaration 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T02:33:06.823

看来您想清除`JTextArea`类型组件`userOutputArea`。如果我做对了，那么这行代码应该可以做到：

```
userOutputArea.setText(""); 
```

如果你的意思是别的，请进一步澄清你的任务。

# node.js - 基于 Promise 的节点 http 框架？

> ID：15824203
> 
> 赞同：18
> 
> 时间：2013-04-05T00:53:14.417
> 
> 标签：node.js, http, promise

节点框架通常通过`(err, result)`回调工作。

是否有一个基于 Promise 的 Node 的 http 框架，有一个健康的社区并且正在积极开发中（比如 express）？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2016-02-05T20:18:38.870

在 HTTP 客户端，有新的`fetch API` [https://fetch.spec.whatwg.org/](https://fetch.spec.whatwg.org/)

> `fetch()`允许您发出类似于 XMLHttpRequest (XHR) 的网络请求，主要区别在于 [它] 使用 Promises，它可以实现更简单、更清洁的 API，避免回调地狱，并且必须记住 XMLHttpRequest 的复杂 API

（[https://developers.google.com/web/updates/2015/03/introduction-to-fetch](https://developers.google.com/web/updates/2015/03/introduction-to-fetch)）

一些实现：

*   浏览器“poly-fill”（旧版浏览器）[https://github.com/github/fetch](https://github.com/github/fetch)
*   节点版本[https://www.npmjs.com/package/node-fetch](https://www.npmjs.com/package/node-fetch)
*   跨平台版本[https://github.com/matthew-andrews/isomorphic-fetch](https://github.com/matthew-andrews/isomorphic-fetch)（我不喜欢在这种情况下使用“同构”这个词......无论如何）

这里有一些示例代码：

```
fetch('/some/url', {method: 'get'})
  .then(function(response) {
    // rejoice \o/
  })
  .catch(function(err) {
    // error :-(
  }); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-02-05T19:47:03.780

有[https://github.com/mzabriskie/axios](https://github.com/mzabriskie/axios)

> 用于浏览器和 node.js 的基于 Promise 的 HTTP 客户端

示例代码：

```
// Make a request for a user with a given ID
axios.get('/user?ID=12345')
  .then(function (response) {
    console.log(response);
  })
  .catch(function (response) {
    console.log(response);
  }); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-05-26T18:39:58.810

我今天也有同样的问题，我找到了[q-io](https://github.com/kriskowal/q-io)，也是 kriskowal 的。它使用 Q.js 来承诺包装文件系统 io 以及服务器和 http 客户端。

我还没有尝试过，但目前它似乎没有围绕它建立一个活跃的社区。在一个充满了末日回调金字塔的世界里，看到了可悲的事情。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-10T00:21:55.890

你可能对Q Promise 库的作者 Kris Kowal 所写的[Joey感兴趣。](https://github.com/montagejs/joey)社区不大，但 Kris 经常在 freenode 的 #montage irc 频道上提供帮助。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-10-11T20:28:50.817

即使在 2016 年末，仍然不完全。

其他人跳过了 Koa.js，它确实支持基于生成器的“异步/等待”的承诺。

然而，我认为您的问题针对的是更深层次的集成，这可能是我所做的：一个 http 服务器，它以承诺的形式返回请求，然后可以链接在一起。

它基于 Promise 代表可以一次完成的异步任务的想法，因此服务器就像我封装在一个由 Promise 引发的回调中的 Promise 流。

它仍然是一个很酷的潜力（即对于较小的专业项目），因为它的代码很少（并且当前的概念位于 0 依赖项）

存储库中有更多详细信息：[https](https://github.com/rsxdalv/unframed) ://github.com/rsxdalv/unframed ，其中包括构建过程的演练。使用可以实际运行的代码 Node.js v6.6

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-10-02T08:50:44.793

对于 HTTP 客户端，我喜欢[http://www.npmjs.org/package/httpinvoke](http://www.npmjs.org/package/httpinvoke)。

对于 HTTP 服务器，我喜欢[https://github.com/mjackson/mach](https://github.com/mjackson/mach)；这很棒！

再说一次，我也不是 httpinvoke 的忠实粉丝，我工作，没关系。但我认为 API 比它需要的更复杂，而且我发现很难调试。我可能会遗漏一些东西。

或者，我使用推荐[kew](https://github.com/Medium/kew)（快速承诺实现）来包装回调样式方法。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-01-06T08:27:56.190

你可以试试aex。

[https://github.com/calidion/aex/](https://github.com/calidion/aex/)

Aex 是基于 Promise 的，仅 async / await，不再使用 typescript 编写的回调框架。

Aex 通过简单的函数调用与 express 中间件兼容。

# create-table - SQL 错误: ORA-00904: : 创建表时标识符无效

> ID：15824214
> 
> 赞同：0
> 
> 时间：2013-04-05T00:54:24.313
> 
> 标签：create-table

**SQL 错误：** ORA-00904

**我的代码是：**

```
CREATE TABLE VINTAGEWINE
(
WINE_ID            VARCHAR2(5)  NOT NULL,
WINE_NAME          VARCHAR2(25) NOT NULL
VINTAGE_YEAR       VARCHAR2(4)  NOT NULL,
EMPLOYEE_ID        VARCHAR2(6)  NOT NULL,
CONSTRAINT PK_VINTAGEWINE PRIMARY KEY(WINE_ID),
CONSTRAINT FK1-VINTAGEWINE FOREIGN KEY(WINE_NAME) REFERENCES WINE(WINE_NAME),
); 
```

**错误：**

```
Error at Command Line:8 Column:14
Error report:
SQL Error: ORA-00904: : invalid identifier
00904\. 00000 -  "%s: invalid identifier"
*Cause:    
*Action: 
```

我不知道我的代码有什么问题。我做了什么蠢事吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T00:57:58.670

我认为要么`CONSTRAINT FK1-VINTAGEWINE`是非法的，要么`FK1-VINTAGEWINE`必须引用。使用下划线而不是连字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-05T10:28:04.750

```
CREATE TABLE VINTAGEWINE
(
WINE_ID            VARCHAR2(5)  NOT NULL,
WINE_NAME          VARCHAR2(25) NOT NULL
VINTAGE_YEAR       VARCHAR2(4)  NOT NULL,
EMPLOYEE_ID        VARCHAR2(6)  NOT NULL,
CONSTRAINT PK_VINTAGEWINE PRIMARY KEY(WINE_ID),
CONSTRAINT FK1-VINTAGEWINE FOREIGN KEY(WINE_NAME) REFERENCES WINE(WINE_NAME)
); 
```

请试试这个。在外键约束定义的末尾插入了不需要的逗号。

# php - Facebook 应用程序中的无限循环

> ID：15824220
> 
> 赞同：0
> 
> 时间：2013-04-05T00:54:44.493
> 
> 标签：php, facebook

在我的 facebook 应用程序中，由于以下两行，我得到了一个无限重定向循环，尽管它昨天还在工作！

```
$loginUrl = $facebook->getLoginUrl(array('redirect_uri' => $fbconfig['appUrl'], 'scope' => 'user_birthday,email'));
  print "<script type='text/javascript'>top.location.href = '$loginUrl';</script>"; 
```

显然问题在于从 API 获取用户数据：

```
if ($user) {
      try {
        // If the user has been authenticated then proceed
        $user_profile = $facebook->api('/me');
      } catch (FacebookApiException $e) {
        error_log($e);
        $user = null;
      }
} 
```

# silverlight - Silverlight 应用程序无法从域服务项目访问资源命名空间

> ID：15824223
> 
> 赞同：0
> 
> 时间：2013-04-05T00:55:22.590
> 
> 标签：silverlight

嗨，我有一个 Silverlight 应用程序，它具有以下项目结构：

**解决方案**
|-------Project1.App（这是Silverlight应用项目）
|
|-------Project1.App.Service.Web（这是域服务项目）
|
|-------Project1.App.Web（这是网站项目）

`Project1.App.Web`对`Project1.App.Services.Web` _ `Project1.App`_`Project1.App.Web`

当我尝试访问`Project1.App.Services.Web` The Resource Designer.CS 中资源文件中的名称空间之一时，问题就出现了，`Project1.App.Services.Web`如下所示：

```
Namespace Project1.App.Resources.Server {
    using System;

    /// <summary>
    ///   A strongly-typed resource class, for looking up localized strings, etc.
    /// </summary>
   // This class was auto-generated by the StronglyTypedResourceBuilder
   // class via a tool like ResGen or Visual Studio.
   // To add or remove a member, edit your .ResX file then rerun ResGen
   // with the /str option, or rebuild your VS project.
[global::System.CodeDom.Compiler.GeneratedCodeAttribute("System.Resources.Tools.StronglyTypedResourceBuilder", "4.0.0.0")]
[global::System.Diagnostics.DebuggerNonUserCodeAttribute()]
[global::System.Runtime.CompilerServices.CompilerGeneratedAttribute()]
public class BatchTypeResources { 
```

`Project1.App.Services.Web`现在在与 silverlight 项目的项目中的一个共享类中

```
using Project1.App.Resources.Server; 
```

我收到以下错误：

> 命名空间“Project1.App.Resources”中不存在类型或命名空间名称“Server”（您是否缺少程序集引用？）C:\DEV\App\Source\Platform Development\Project1.App\Project1.App\ Generated_Code\Project1.App.Services.Web\Models\Shared\CustomValidations.shared.cs

请记住，如果我进入`Project1.App.Services.Web`项目并进入该类，则项目编译没有问题；编译失败的是 Silverlight 项目。

资源文件托管在`Project1.App.Services.Web`项目中，并作为链接文件添加到 silverlight 项目中。

任何想法为什么会失败？

# ios - 自定义 UICollectionViewCell 中的 UILabel 始终为空，无法更新文本

> ID：15824225
> 
> 赞同：16
> 
> 时间：2013-04-05T00:55:43.077
> 
> 标签：ios, ios6, storyboard, uilabel, uicollectionviewcell

我为 Apple 集合视图示例项目创建了一个非常简单的集合视图。我在情节提要的视图控制器中有一个集合视图，并在集合视图右上角的集合视图单元格内设置了一个标签。我已将其连接到自定义单元格中的 IBOutlet。以下是相关代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [self.workoutView registerClass:[Cell class] forCellWithReuseIdentifier:@"Cell"];
    ...
}

- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath {
    if (collectionView == self.collView) {
        Cell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:@"Cell" forIndexPath:indexPath];    
        cell.segmentTitle.text = @"some text";
        cell.backgroundColor = [UIColor whiteColor];
        return cell;
    }
    return nil;
} 
```

我在零件后面放了一个断点`segmentTitle.text`，segmentTitle 始终为空。因此，我在模拟器中看到的是空的白框。我错过了什么？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-04-05T01:19:23.493

StoryBoard里面的UICollectionViewCell不需要registerClass，在StoryBoard里面选择reuseidentifier即可。删除这一行：

```
 // [self.workoutView registerClass:[Cell class] forCellWithReuseIdentifier:@"Cell"]; 
```

并确保您以正确的方式连接：

- 在storyBoard到Cell中选择UICollectionViewCell的类类型

- 将 UILabel 拖入 Cell 并连接到 Cell.h

- 键入重用标识符

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-25T14:22:05.180

```
MainFeedCollectionView.registerClass(CollectionViewCell.self, forCellWithReuseIdentifier: "CollectionViewCell") 
```

我从我的代码中删除了这一行，现在它工作正常......

# php - mySQL 插入不起作用，但可以与其他表一起使用

> ID：15824234
> 
> 赞同：0
> 
> 时间：2013-04-05T00:57:42.257
> 
> 标签：php, mysql, database, web-applications

我有一个 mySQL 问题困扰了我好几个小时！

背景：我正在创建一个网络应用程序来教孩子们在触摸设备上使用不同的音乐符号

问题：运行这个单独的脚本后，尽管最后一个 echo 参数有效，但没有创建任何行。

奇怪：这是模仿我工作的其他脚本。

编辑：找到问题后，我将使用准备好的语句重新提供代码。

这是代码：

```
<?php

$database_connect = mysql_connect('localhost','ragstudi','*****');

if (!$database_connect) {die ('Not connected to SQL' . mysql_error());};

mysql_select_db('ragstudi_musicGameScores') or die ('db doesnt exist');

$userName = "Jimmy";//$_POST["username"];
$gameLevel = 1;//$_POST["level"];
$gameScore = 2300;//$_POST["score"];
$userGroup = "RagWway";

$highScores = mysql_query("INSERT INTO highScores (name, groupBy, level, score) values('".$userName."','".$userGroup."','".$gameLevel."','".$gameScore."')");
if (!$highScores){
    die(
        mysql_error()
        )
}; 
```

数据库 _musicGameScores 是这样设置的 Id, primary, auto increment, integer name, varchar groupBy, varchar level, integer score, integer

密码已加注星标。谢谢大家！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T00:58:38.017

`GROUP`是保留关键字。您必须正确地对其进行转义，以免它产生错误。

```
INSERT INTO highScores (id, user, `group`, level, score) VALUES(...) 
```

*   [MySQL 保留关键字列表](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

作为旁注，[`SQL Injection`](http://bobby-tables.com/)如果变量的值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用`PreparedStatements`，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T00:59:39.387

尝试在每一列中添加**``**，也许那里有一个保留关键字。

```
mysql_query("INSERT INTO highScores (`id`, `user`, `group`, `level`, `score`) values('','".$userName."','".$userGroup."','".$gameLevel."','".$gameScore."')"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T01:02:57.997

应该是这样的。干杯! :D

$highScores = mysql_query("INSERT INTO highScores (id, user, `group`, level, score) values('','".$userName."','".$userGroup."','".$gameLevel."' ,'".$gameScore."')");

# git - Git 仅拉取存储库的内容

> ID：15824237
> 
> 赞同：2
> 
> 时间：2013-04-05T00:58:07.807
> 
> 标签：git, version-control, github

有没有办法只 git pull 存储库的内容而不拉主文件夹？例如，我在名为“sample”的存储库中有一堆文件，但我只想将“sample”的内容提取到名为“local”的本地存储库中。我**不想**拉“样本”这样我得到：本地->样本->[内容]。有没有办法只提取内容？

我之所以问，是因为我在共享 Web 服务器上运行，该服务器要求我将我的内容放在特定文件夹下（并在文件夹中命名某些文件名）。

谢谢。

编辑：我之前不是很清楚。我在本地机器上工作，因此我**只**被允许更改我的文件夹的内容，而不是包含我的文件夹的文件夹的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T01:05:51.630

**选项1：：**

`git clone <repo_path> <folder name>`

所以在你的情况下，它会是`git clone sample.git local`

**选项 2::**

存在本地 repo 的文件夹名称不必与远程的相同。

做一个 git 克隆 ...

`git clone repo_pathOrURL`

然后重命名文件夹

因此，例如，您拥有`sample.git`远程存储库，请执行

`git clone sample.git`

这会将存储库克隆到`sample`本地计算机上的一个文件夹中。然后只需根据您的喜好重命名此文件夹，在您的情况下`local`，并继续使用常规的 git pull 和 push。

# css - 可以让 Zurb Foundation 4 选择下拉菜单在移动浏览器上工作吗？

> ID：15824238
> 
> 赞同：2
> 
> 时间：2013-04-05T00:58:14.580
> 
> 标签：css, html-select, zurb-foundation, css-frameworks

**我无法在任何**移动浏览器的 Foundation 4 选择下拉菜单中滚动选项。这使得 Foundation 的选择下拉菜单毫无用处。有没有办法让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-02T07:08:26.573

这里同样的问题。*解决这个问题的唯一方法（afaik）不是像亚马逊*那样使用自定义表单并构建自己的下拉列表：

```
<span id="nav-search-in" class="nav-sprite nav-facade-active" style="width: auto;">
   <span id="nav-search-in-content" style="width: auto; overflow: visible;">All</span>
   <span class="nav-down-arrow nav-sprite"></span>
   <select id="searchDropdownBox" class="searchSelect" style="top: 0px;">
        <option value="search-alias=aps" selected="selected">All Departments</option>
        <option value="search-alias=watches">Watches</option>
    </select>
 </span> 
```

将选择的不透明度设置为 0（查看其网页上的其他样式）并通过单击向下箭头跨度触发下拉菜单。

# mysql - 将数据从本地软件导入远程 MySQL 的最佳文件格式

> ID：15824239
> 
> 赞同：1
> 
> 时间：2013-04-05T00:58:15.330
> 
> 标签：mysql, file, import, format

让我澄清一下我到底在寻找什么。我正在为 php mysql 平台上的学校建立一个动态网站，该网站需要从学校使用的本地离线软件更新某些数据。我与软件提供商保持联系，软件提供商已准备好以我需要的任何格式提供数据。

那么什么是最好的格式，最简单，最快和更可靠。会是 csv、excel 等吗？主要是我需要本地数据库中的学生详细信息、成绩等。如果你们中有人做过类似的项目，我还需要注意什么？

期待回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T01:01:30.243

CSV 是最容易处理的。`LOAD DATA INFILE`如果您可以以 MySQL 可以使用的格式获取它，并且您可以访问数据库服务器本身，那么您甚至不需要在 PHP 中处理它。

Excel 根本不容易导入，并且可能以各种不明显的方式被破坏。除非您绝对需要支持它，否则最好避免它。

如果您正在构建一个新应用程序，我真的希望您使用[流行的 PHP 框架](http://www.phpframeworks.com/top-10-php-frameworks/)作为基础。其中一些包括用于处理 CSV 数据的模块，从而省去了您必须自己处理的麻烦。

# jquery - jQuery $.extend() 没有扩展对象

> ID：15824240
> 
> 赞同：2
> 
> 时间：2013-04-05T00:58:35.393
> 
> 标签：jquery, object

编写一个简单的日历脚本，尝试将事件发布到正确的日期；但是 jQuery`$.extend`并没有扩展我的`options`对象。以下是 HTML 文件的片段：

```
$("#cal").calendar({
    month: 2,
    events: [{
        date: "2013-4-10",
        workorder: 1234567890,
        district: 01,
        range: "2:00pm - 4:00pm",
        appNotes: "This is just a sample of some notes... end",
        installer: "John Doe",
        cityNotes: "This is just another sample of some notes... end"
    }, {
        date: "2013-4-1",
        workorder: 1234567890,
        district: 01,
        range: "3:00pm - 5:00pm",
        appNotes: "This is just a sample of some notes... end",
        installer: "John Doe",
        cityNotes: "This is just another sample of some notes... end"
    }]
}); 
```

我的插件的开头：

```
(function($){
    $.fn.calendar = function(options){
        var defaults= {
            month: null,
            prev: "prevMonth",
            curr: "currMonth",
            next: "nextMonth",
            events: []
        }, options = $.extend(defaults, options);
        return($(this).each(function(){
            var obj = $(this),
            // Etc... 
```

我能够访问对象的属性，但是它并没有像想象的那样被扩展。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T01:01:08.807

[`jQuery.extend`](http://api.jquery.com/jQuery.extend/)扩展传入的*第一个*对象 - 而不是做`$.extend(defaults, options)`do `$.extend({}, defaults, options)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T01:04:39.487

```
(function($){
    $.fn.calendar = function(options){
        var defaults= {
            month: null,
            prev: "prevMonth",
            curr: "currMonth",
            next: "nextMonth",
            events: []
        };
        options = $.extend(defaults, options); 
```

另外：请记住，目标是第一个对象......所以在这个例子中，默认值将通过选项扩展......

# php - 从 PHP 为 Postgresql 查询构建交互式 WHERE 子句

> ID：15824253
> 
> 赞同：1
> 
> 时间：2013-04-05T01:00:03.910
> 
> 标签：php, sql, postgresql, where-clause

我在 Linux 上使用 Postgresql 9.2 和 PHP 5.5。我有一个包含“患者”记录的数据库，我正在网页上显示这些记录。这很好用，但现在我需要添加交互式过滤器，以便它根据用户使用的过滤器仅显示某些类型的记录，比如有 10 个复选框，我根据这些信息构建一个临时 WHERE 子句和然后实时重新运行查询。我有点不清楚如何做到这一点。

如何使用 PHP 来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T07:00:27.267

您需要做的就是使用 $_POST 或 $_GET 接收用户选择的过滤器的所有数据，然后使用循环创建一个小函数，以按照查询需要的方式连接所有内容。

像这样的东西......在这种情况下，您的数据库中只有一个字段可以匹配。这是一个简单的场景，您需要添加更多字段，以便在每种情况下添加您真正需要的字段，没什么太复杂的。

```
<?php 

//recieve all the filters and save them in array

$keys[] = isset($_POST['filter1'])?'$_POST['filter1']':'';  //this sends empty if the filter is not set.
$keys[] = isset($_POST['filter2'])?'$_POST['filter2']':''; 
$keys[] = isset($_POST['filter3'])?'$_POST['filter3']':''; 

//Go through the array and concatenate the string you need. Of course, you might need AND instead of OR, depending on what your needs are.
foreach ($keys as $id => $value) {
    if($id > 0){
       $filters.=" OR ";
    }
    $filters.=" your_field = '".$value."' ";
}

//at this point $filters has a string with all your 

//Then make the connection and send the query. Notice how the select concatenates the $filters variable

$host = "localhost"; 
$user = "user"; 
$pass = "pass"; 
$db = "database"; 

$con = pg_connect("host=$host dbname=$db user=$user password=$pass")
    or die ("Could not connect to server\n"); 

$query = "SELECT * FROM table WHERE ".$filters; 

$rs = pg_query($con, $query) or die("Cannot execute query: $query\n");

while ($row = pg_fetch_row($rs)) {
  echo "$row[0] $row[1] $row[2]\n";

  //or whatever way you want to print it...
}

pg_close($con); 

?> 
```

上面的代码将从发送 3 个变量的表单中获取变量（假设它们都对应于数据库中的 SAME 字段，并生成一个字符串用作 WHERE 子句。

如果您的数据库中有多个字段要过滤，您需要做的就是注意如何将用户输入与您的字段匹配。

注意：出于实际原因，我没有在此处添加它...但是请清理用户输入。在查询中使用用户控制的数据之前，请始终清理用户输入。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T14:35:53.980

为此，我创建了一个[Where 子句生成器](https://github.com/chanmix51/Pomm/blob/master/Pomm/Query/Where.php)。它与 Pomm 项目一起提供，但您可以单独使用它。

```
<?php

$where = Pomm\Query\Where::create("birthdate > ?", array($date->format('Y-m-d')))
    ->andWhere('gender = ?', array('M'));

$where2 = Pomm\Query\Where::createWhereIn('something_id', array(1, 15, 43, 104))
    ->orWhere($where);

$sql = sprintf("SELECT * FROM my_table WHERE %s", $where2);

$statement = $pdo->prepare($sql);
$statement->bind($where2->getValues());

$results = $statement->execute(); 
```

这样，您的值就会被转义，您可以动态构建 where 子句。[您将在Pomm 的文档](http://pomm.coolkeums.org/documentation/manual-1.1#and-or-the-where-class)中找到更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T12:17:50.863

不要进行字符串连接。获得值后，只需将它们传递给**常量**查询字符串：

```
$query = "
    select a, b
    from patient
    where
        ($x is not null and x = $x)
        or
        ('$y' != '' and y = '$y')
"; 
```

如果用户未通知该值，则将其传递为 null 或空。在上面的查询中，`x = $x`如果为空，则条件将被忽略，如果`$x`为空，则`y = '$y'`条件将被忽略`$y`。

话虽如此，复选框将始终为真或假。您面临的确切问题是什么？

始终**清理**用户输入或使用驱动程序为您完成！

# javascript - 从 JSON 解析 YouTube 用户提要

> ID：15824254
> 
> 赞同：0
> 
> 时间：2013-04-05T01:00:10.287
> 
> 标签：javascript, jquery, json, youtube

我正在尝试制作一个脚本来获取特定用户在 YouTube 上最近 2 次上传的 JSON 提要。我试图使用这个脚本

```
<script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js'></script>
<script type="text/javascript">
// Set variables needed for query
var URL = "https://gdata.youtube.com/feeds/api/users/";
var UserName = "MyUsername";
var jsonFormat = "/uploads?v=2&alt=jsonc&max-results=2";
// Construct the JSON feed of the YouTube user's channel
var ajaxURL = URL + UserName + jsonFormat;
// Get the last videos of the YouTube account, parse it into HTML code
$.getJSON(ajaxURL, function(data){
     var htmlString = "";

    $.each(data.items, function(i,item){       
        // Here's where we piece together the HTML
        htmlString += '<iframe class="videos" type="text/html" width="640" height="390" src="http://www.youtube.com/embed/';
        htmlString += item.id;
        htmlString += '?autoplay=0" frameborder="0"></iframe>';
    });

    // Pop our HTML in the #videos DIV
    $('#videos').html(htmlString);

}); 
```

我一直在使用类似的脚本来解析 flickr 的 JSON，它运行良好。YouTube 的提要可能出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T02:48:56.177

您已将来自 YouTube 的 API 返回放入一个 javascript 对象`data`中，但请记住，YouTube 还将返回的对象封装在一个名为`data`.

因此，在第 14 行，当您开始遍历数据集时：

```
$.each(data.items, function(i,item){ 
```

...实际上应该是：

```
$.each(data.data.items, function(i,item){ 
```

这是您放入 jsFiddle 的代码（已更正）：http: [//jsfiddle.net/Up3W7/](http://jsfiddle.net/Up3W7/)

# iphone - 如何使用 UICollectionView 复制 iOS Chrome 选项卡效果

> ID：15824256
> 
> 赞同：5
> 
> 时间：2013-04-05T01:00:27.613
> 
> 标签：iphone, ios, objective-c

我正在创建一个应用程序，其中一个视图是 UIView 内的 UICollectionView。当所有活动选项卡都在视图中时，我正在尝试复制 Chrome for iOS 效果，如下所示：

![Chrome for iOS 打开标签视图](https://i.stack.imgur.com/xkDvo.png)

有没有人知道如何使用 UICollectionView 完成此操作，或者有指向教程的链接或可以提供帮助的内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T01:23:14.893

我有几个链接可能会有所帮助！

[示例代码 #1](https://github.com/KieranLafferty/KLNoteViewController)

[示例代码 #2](https://github.com/graetzer/SGTabs)

# php - 需要通过查找 PHP 标记来拆分带有换行符的字符串

> ID：15824258
> 
> 赞同：1
> 
> 时间：2013-04-05T01:00:41.960
> 
> 标签：php, regex

我正在尝试通过查找 PHP 标记来拆分带有换行符的字符串。

这是我到目前为止的代码：

```
$contents = '
some test
some more test
test 1
<?php 
test 2 and test 4
test 6
?>
test 7
test 9
<?php 
test 10
test 12
>?
test 13
<?php test 14
test 16 
?>
test 17
'; 
```

如您所知，PHP 代码是 EVEN 测试示例，ODD 测试示例位于 PHP 标记之外。

我要做的是在每次迭代 php 代码时提取到一个数组中：

预期结果：

```
array(
    [0] =>  <?php 
            test 2 and test 4
            test 6
            ?>

    [1] =>  <?php 
            test 10
            test 12
            >?

    [2] =>  <?php test 14
            test 16 
            ?>
) 
```

我试过用`preg_split`结束标签，然后用`$explode[1]`开始标签捕获，但我的代码是错误的......

```
$ends = preg_split("/[?>]/s", $contents, PREG_SPLIT_NO_EMPTY, PREG_SPLIT_DELIM_CAPTURE );
print_r($ends);
foreach($ends as $flufcode){
  $trimcode = explode('<?php', $flufcode);
  echo $trimcode . " next:";
} 
```

到目前为止我的`preg_split`不起作用，我相信我的正则表达式在换行后没有扫描。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T01:21:03.277

您的示例代码是错误的。和错误的预期结果......无论如何。并且使用正则表达式解析代码`<?php echo '?>'; ?>`将失败。

为了正确和轻松地解析，您应该使用[token_get_all](http://php.net/token_get_all)。给你的例子。

```
$tokens = token_get_all($contents);

$catch = false;
$codes = array();
$index = 0;
foreach ($tokens as $token)
    {
    if (is_array($token) && $token[0] == \T_OPEN_TAG)
        {
        $catch = true;
        $index++;
        $codes[$index] = '';
        }
    if ($catch)
        $codes[$index] .= is_array($token) ? $token[1] : $token;

    if (is_array($token) && $token[0] == \T_CLOSE_TAG)
        {
        $catch = false;
        }
    }

var_export($codes); 
```

将使用您提供的数据生成。

```
array (
  1 => '<?php
test 2 and test 4
test 6
?>
',
  2 => '<?php
test 10
test 12
>?
test 13
<?php test 14
test 16
?>
',
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T01:11:33.827

问号是一个正则表达式元字符——尝试转义它：

```
$ends = preg_split("/\\?>/sm", $contents, PREG_SPLIT_NO_EMPTY, PREG_SPLIT_DELIM_CAPTURE ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T01:17:17.150

我会用

```
preg_match_all("/<\?php.*?\?>/s", $contents, $matches); 
```

`<?php`这会不情愿地（而`?>`不是贪婪地）捕获所有内容。请注意，`$matches`数组将被嵌套。

# android - 如何为 Android 上的特定应用程序分配快速启动热键

> ID：15824263
> 
> 赞同：1
> 
> 时间：2013-04-05T01:01:23.133
> 
> 标签：android

我正在尝试为我的应用设置快速启动快捷键。

我可以使用以下代码调出快速启动屏幕：

```
launchIntent = new Intent();
launchIntent.setAction("android.intent.action.MAIN");
launchIntent.setPackage("com.android.settings");
launchIntent.setComponent(new ComponentName("com.android.settings", "com.android.settings.quicklaunch.QuickLaunchSettings"));
startActivityForResult(launchIntent,0); 
```

屏幕如下所示：[Quick Launch Screenshot](http://cdn3.mos.techradar.com///classifications/gadgets/phones/mobile-phones/Android/androidtips/quick-launch-320-100.jpg)。例如，您可以将应用程序分配给“a”，当您按 find-a 时，它将启动该应用程序。

我真正想做的是以编程方式将热键分配给特定的应用程序，但我不知道如何做到这一点。这可能吗，怎么做？

# json - 哪个 javascript 模板引擎嵌套适合生成 JSON

> ID：15824265
> 
> 赞同：2
> 
> 时间：2013-04-05T01:01:31.803
> 
> 标签：json, node.js, handlebars.js, mustache

小胡子和车把都很棒。我喜欢它们，因为它们各自的简单和卓越。Mustache 因为它是一个模板，所以它可以在很多地方和车把上工作，因为它只提供了一些更多的功能。

我面临的挑战是，它们似乎已被实现为输出 HTML 或其他标签成对且没有分隔符的文档结构。

为了进一步澄清，如果您有一个将在列表中输出的项目数组，那么这很好用：

```
<ul>
   {{#each items}}
   <li>{{name}}</li>
   {{/each}}
</ul> 
```

这很好用。但是如果你想输出类似 JSON 的东西：

```
[
   {{#each items}}
       { name:{{name}} }
   {{/each}}
] 
```

这不起作用，因为 JSON 要求列表中的项目用逗号分隔。而且你不能在最里面的 '}' 后面加上逗号，因为这也会导致错误。

在一些帖子/建议中，人们要求将可选的分隔符属性添加到#each 或添加#join。一位提交者说它应该作为插件实现，因为核心需要简单。

抛开政治。能够将 javascript 对象格式化为 JSON 字符串似乎非常适合模板。

**最后一个想法。实际上可能有更好的 Javascript Idiom 用于重新格式化 JavaScript 对象。我想这也会很有趣。

PS：我喜欢这个模板的一个原因是它可以自我记录。

更新：

handlebarsjs 团队的@Kevin 能够创建一个“帮助器”功能来实现我所缺少的功能。它不会很快成为核心，但该代码有效：

```
[
   {{#join items sep=','}}
       { name:{{name}} }
   {{/join}}
] 
```

# r - 使用 grid.draw() 时出现错误符号的 gridExtra tableGrob 错误

> ID：15824267
> 
> 赞同：1
> 
> 时间：2013-04-05T01:02:00.003
> 
> 标签：r, viewport, gridextra

以下代码

```
xta=t(rnorm(37,mean=400,sd=50))
xtb=tableGrob(xta,show.rownames=F,show.colnames=F,gpar.corefill=gpar(fill='white',col='black'),show.vlines=T,show.hlines=T)
grid.draw(xtb) 
```

给我一个错误

```
Error in seq.default(2, ncol, 1) : wrong sign in 'by' argument 
```

`grid.table(t(xta))`

## 编辑（mnel）

这可以追溯到`show.hline`论点`

```
 grid.table(xta, show.hline = TRUE) 
```

给

> seq.default(2, ncol, 1) 中的错误：'by' 参数中的错误符号

而默认

```
grid.table(xta) 
```

效果很好。

`d`当您作为,传递时会出现同样的问题`data.frame`（根据功能需要）

```
xtdf <- as.data.frame(xta)

grid.table(xtdf, show.hline = TRUE)

## Error in seq.default(2, nrow, 1) : wrong sign in 'by' argument
##  grid.table(xtdf) 
## works as expected 
```

# css - 响应式 CSS 背景属性

> ID：15824270
> 
> 赞同：-1
> 
> 时间：2013-04-05T01:02:18.090
> 
> 标签：css, twitter-bootstrap, responsive-design

我有这个标记：

```
 <ol class="carousel-indicators">

 <li data-target="#ShowCarousel-03" data-slide-to="0" class="active">
    <h4>Title</h4><br/><h5>Text</h5><br/><span>+</span>
 </li>

 <li data-target="#ShowCarousel-03" data-slide-to="1">
    <h4>Title</h4><br/><h5>Text</h5><br/><span>+</span>
 </li>

 <li data-target="#ShowCarousel-03" data-slide-to="2">
    <h4>Title</h4><br/><h5>Test</h5><br/><span>+</span>
 </li>

 <li data-target="#ShowCarousel-03" data-slide-to="3">
    <h4>Title</h4><br/><h5>Text</h5><br/><span>+</span>
 </li> 
```

这个CSS：

```
.carousel-indicators li{
    display:block;
    float:left;
    background: url(images/triangle.png) no-repeat;
    width:320px;
    height:176px;
    cursor: pointer;
    text-align:center;
} 
```

并且我的标记的容器 div 的宽度设置为**100%**

在我的实际分辨率（1366px 宽）上，li 元素对齐得很好，但是当我调整浏览器大小时，元素没有对齐。

我正在使用 twitter 引导框架。

我的问题是当分辨率较低时如何使这些元素缩放？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T07:16:19.680

对于响应式设计，您可以通过在代码中添加适当的类`.span4` `.span8`等来在轮播中使用引导网格系统。它会根据浏览器的大小调整轮播的大小，但网格系统的固定大小可能不适合您的需求。然后你需要用你自己的 css 覆盖一些尺寸，但如果你已经在你的站点中使用了网格系统，这可能很难处理。

这是文档站点[网格系统](http://twitter.github.com/bootstrap/scaffolding.html#gridSystem)

第二种方法是使用`em`or `%`for your carousel elements size 和 body 元素。通过一些媒体查询[http://www.w3.org/TR/css3-mediaqueries/](http://www.w3.org/TR/css3-mediaqueries/)您可以设置轮播在较低分辨率下的变化方式。1 em 通常等于 16px。计算新的 em 大小有点棘手，除以`1`父容器大小，whitch 是具有`16px`字体大小的 body 元素，然后乘以当前`px`大小：

```
1/16px*320px = 20em 
```

CSS：

```
body {
    font-size:1em; /* 16px */
}

.carousel-indicators li{
    display:block;
    float:left;
    background: url(images/triangle.png) no-repeat;
    width:20em; /* 1/16px*320px = 20em */
    height:11em; /* 1/16px*176px = 20em */
    cursor: pointer;
    text-align:center;
} 
```

提示。如果您希望也调用该背景图像，请使用`background-size`属性。

```
background-size:20em 11em; 
```

低于 1170 像素的屏幕尺寸：

```
@media (max-width:1170px){
   body {
      font-size: 0.875em; /* 14px */
   }
@media (max-width:800px){
   body {
      font-size: 0.75em; /* 12px */
   } 
```

您的`li`元素宽度将自动更改为`0.875em*20em = 17.5em`低于 1170 像素`0.75em*20em = 15em`的分辨率和低于 800 像素的分辨率。

希望有帮助！

# google-maps - Safari 6.0.2 中的 Google Maps API v3 *损坏*

> ID：15824274
> 
> 赞同：0
> 
> 时间：2013-04-05T01:03:11.517
> 
> 标签：google-maps

我有一个相当简单的谷歌地图实现，在 Mac 上的 Chrome 中运行良好。然而 - 我没有处理移动实现以及跨浏览器修复，并且发现地图本身没有正确显示/运行，更不用说应该显示的标记和信息窗口了。本机缩放工具从不显示，我无法单击地图上的任何位置或拖动它。

我一直在谷歌搜索和谷歌搜索，但没有出现太多。任何提示或帮助将不胜感激（虽然意识到这不是一个具体的代码问题 - 但）。

我在自己的应用程序中发现了这个问题，但使用 Google 的地图 API 的“hello world”进行了测试，这是完全相同的问题：

```
<!DOCTYPE html>  
<html>  
  <head>  
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />  
    <style type="text/css">  
      html { height: 100% }  
      body { height: 100%; margin: 0; padding: 0 }  
      #map-canvas { height: 100% }  
    </style>  
    <script type="text/javascript"  
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDSh0tsHL1DQBwI0-xfuQkUezonGxlt39k&sensor=false">  
    </script>  
    <script type="text/javascript">  
      function initialize() {  
        var mapOptions = {  
          center: new google.maps.LatLng(-34.397, 150.644),  
          zoom: 8,  
          mapTypeId: google.maps.MapTypeId.ROADMAP  
        };  
        var map = new google.maps.Map(document.getElementById("map-canvas"),
            mapOptions);
      }
      google.maps.event.addDomListener(window, 'load', initialize);  
    </script>  
  </head>  
  <body>  
    <div id="map-canvas"/>  
  </body>  
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:50:47.970

您的地图没有完全定义的大小。您需要同时指定高度和宽度，或者指定为具有大小的父元素的百分比，或者专门定义 div 的大小。如果未定义大小，则为零。

# mysql - 带有变量的 Powershell MYSQL 查询语法

> ID：15824275
> 
> 赞同：0
> 
> 时间：2013-04-05T01:03:15.717
> 
> 标签：mysql, powershell, syntax, scripting

sqlwriterow 函数我发送一个查询并从我正在寻找的特定行中检索数据。我在发送包含 powershell 变量的查询时遇到问题。现在，如果我输入 26（或我正在寻找的任何 id）而不是写 '$id'，我会得到预期的数据。但是，如果我输入变量，我将不会得到任何数据。并玩弄格式，例如取出我会得到的报价

> 您的 SQL 语法有错误；检查与您的 MariaDB 服务器版本相对应的手册，以获取在第 1 行的 '' 附近使用的正确语法

我尝试了各种格式化它的方法，例如

```
$sqlcmd4appcheck = "use spree; select * from tasks_profiles where id = '$id'"
$sqlcmd4appcheck = "use spree; select * from tasks_profiles where id = ``$id``"
$sqlcmd4appcheck = "use spree; select * from tasks_profiles where id = ''$id''"
$sqlcmd4appcheck = "use spree; select * from tasks_profiles where id = "$id"" 
```

代码：

```
function sqlwriterow($args1, $args2) {
    [void][system.reflection.Assembly]::LoadFrom(“C:\Program Files (x86)\MySQL\MySQL Connector Net 5.0.9\Binaries\.NET 2.0\MySQL.Data.dll”)
    $dbconnect = New-Object MySql.Data.MySqlClient.MySqlconnection
    $dbconnect.connectionString = "server=207.52.55.122;user id=spree;pwd=spr33Adm1n;database=spree"
    if (-not ($dbconnect.State -like "Open")) { $dbconnect.Open() }
    $sql = New-Object MySql.Data.MySqlclient.MySqlcommand
    $sql.Connection = $dbconnect
    $sql.Commandtext = $args1
    $dataset=New-Object system.Data.Dataset
    $dataAdaptor=New-Object MySql.Data.MySqlClient.MySqlDataAdapter($sql)
    $dataAdaptor.fill($dataset)
    $script:row = $dataset.tables[0].Rows[0].$args2
    $dbconnect.Close()

}

$id = 26
$sqlcmd4appcheck = "use spree; select * from tasks_profiles where id = '$id'"

sqlwriterow -args1 $sqlcmd4appcheck -args2 "app"; $app = $row 
```

# java - 将数据发布到新的 Google 表单

> ID：15824276
> 
> 赞同：3
> 
> 时间：2013-04-05T01:03:22.450
> 
> 标签：java, google-sheets, http-post, google-forms

使用以前（旧）版本的 google 表单，可以通过将 HttpPost 发送到这样的 url 以编程方式将数据发布到表单：

```
https://spreadsheets.google.com/formResponse?formkey=[key] 
```

和这样的数据：

```
entry.1.single=data&entry.2.single=moredata 
```

随着新版本的谷歌表单（我认为 2013 年 1 月发布）的 url 结构不同。这是“查看实时表单页面”的片段

```
<form action="https://docs.google.com/forms/d/1Ee330GpkMHX_0dKWmJb6ZPdm4FBhhqJSqBbgysEtq6M/formResponse" method="POST" ...
<input type="text" name="entry.1566150510" 
```

从这段代码片段中，我认为我可以发布到这样的网址：

```
https://docs.google.com/forms/d/[key]/formResponse 
```

有这样的数据：

```
entry.1566150510=data 
```

但我已经从 java(android) 尝试过这样的：

```
public void postData() {
    // Create a new HttpClient and Post Header
    HttpClient httpclient = new DefaultHttpClient();
    Log.i(myTag, "Inside postData()");
    String fullUrl = "https://docs.google.com/forms/d/1Ee330GpkMHX_0dKWmJb6ZPdm4FBhhqJSqBbgysEtq6M/formResponse";
    Log.i(myTag, "url = " + fullUrl);
    HttpPost httppost = new HttpPost(urlBase);

    try {
        // Add your data
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
        nameValuePairs.add(new BasicNameValuePair("entry.1566150510", "somedata"));
        UrlEncodedFormEntity data = new UrlEncodedFormEntity(nameValuePairs);
        Log.i(myTag, data.toString());
        httppost.setEntity(data);
        Log.i(myTag, EntityUtils.toString(data));
        // Execute HTTP Post Request
        ResponseHandler<String> responseHandler=new BasicResponseHandler();
        String response = httpclient.execute(httppost, responseHandler);
        Log.i("DocsUploader", "response = " + response);

    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

我得到 404，没有找到响应。

我在这里遗漏了一些明显的东西，还是谷歌刚刚删除了发布到新表单的功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T05:12:02.513

考虑使用 google-apps-script 进行更新（我怀疑它的工作量会减少）。即使谷歌进行更多调整，它也将继续工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T21:25:31.340

好的，关于我对 HttpClient 和 HttpPost 的使用做错了。我不确切知道我搞砸了什么，但我现在正在使用它并且它工作正常：

```
public void postData() {
    String fullUrl = "https://docs.google.com/forms/d/1Ee330GpkMHX_0dKWmJb6ZPdm4FBhhqJSqBbgysEtq6M/formResponse";
    HttpRequest mReq = new HttpRequest();
    String response = mReq.sendPost(fullUrl, "entry.1566150510=data");
    Log.i(myTag, response);
} 
```

其中 HttpRequest 是由 MattC 创建的帮助程序类，并作为对以下问题的回答发布：[Secure HTTP Post in Android](https://stackoverflow.com/questions/2253061/secure-http-post-in-android)。

# java - 列表视图不起作用？

> ID：15824278
> 
> 赞同：1
> 
> 时间：2013-04-05T01:03:28.107
> 
> 标签：java, android, eclipse, listview, android-arrayadapter

在一个小组中工作以制作一个 android 应用程序，目前我只需要创建一个由一个 ListView 组成的 Activity，该 ListView 显示几个可选择项（改编自一个字符串数组）——最终 ListView 将采用我们正在制作的一组对象，并且根据我们服务器上可用的对象，这个对象数组将会改变（因此，ListView 的条目将会改变）。但现在，我只需要让它与一个字符串数组一起工作。

所以，这是我活动的 xml 和 java main。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent"
    android:layout_gravity="center">

    <ListView
        android:id="@+id/gamesListView"
        android:layout_width="match_parent"
        android:layout_height="320dp"
        android:entries="@+id/gamesList"

    >
    </ListView>

    <Button
        android:layout_width="fill_parent"
        android:layout_height="45dp" 
        android:text="Create"
        android:id="@+id/bCreate"
    />

    <Button
        android:layout_width="fill_parent"
        android:layout_height="45dp"
        android:text="Refresh"
        android:id="@+id/bRefresh"
    />

</LinearLayout> 
```

* * *

```
package com.youcanthide.android.gamespage;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.ListView;

public class MainActivity extends Activity {

Button create, refresh; //browse
String gamesList[] = {"game1", "game2", "game3"};

//Game [] games; **********//the array of available games to populate the SlideView

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    create = (Button) findViewById(R.id.bCreate);
    refresh = (Button) findViewById(R.id.bRefresh);

    ListView games = (ListView) findViewById(R.id.gamesListView);

    //Will have to remake adapter for Game objects
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,    android.R.layout.simple_list_item_1, gamesList);
    games.setAdapter(adapter);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}

} 
```

我一直在尝试遵循 api 和简单的教程，但我仍然无法弄清楚它为什么会中断。eclipse 中没有错误消息，但是当我为活动运行模拟器时，它给了我“不幸的是（项目名称）已停止”。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T01:08:06.600

从您的 XML 中删除此行：

```
 android:entries="@+id/gamesList" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T01:07:14.603

您的 ListView 中有两个 id。删除一个。

```
 ListView games = (ListView) findViewById(R.id.gamesListView); 
```

在你的 xml 中删除`android:entries="@+id/gamesList"`。

```
<ListView
        android:id="@+id/gamesListView"
        android:layout_width="match_parent"
        android:layout_height="320dp"

    > 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T04:32:56.653

为什么你必须要求这一行 XML 文件。

```
android:entries="@+id/gamesList" 
```

从 xml 中删除此行并尝试此操作。

如果您发现任何问题，请告诉我。

# c# - 通过 PC USB 连接在 Windows Phone 8 上读取/写入文件

> ID：15824280
> 
> 赞同：0
> 
> 时间：2013-04-05T01:04:15.973
> 
> 标签：c#, windows-phone-8, windows-phone

我正在尝试为 Windows Phone 8 编写音乐播放器，因为当前的 XBox 音乐应用程序非常缺乏。基本上，我希望能够根据设备上的文件是否被评为高或低来同步设备上的文件。

由于设备本身不允许我删除或更改应用程序上的音乐文件，我正在考虑将评分数据库保存在隔离存储中，以便我可以写入数据。然后我会让PC上的配套应用程序从设备中读取这个数据库，然后删除评级下降的文件。

不幸的是，我完全无法通过代码访问我的 PC 上的设备。我知道这是可能的，因为我可以通过 Windows 资源管理器访问设备，但是当我加载一些 C# 代码来尝试读取文件时，它根本找不到设备。我使用文件选择器查看是否可以修改文件，但每次选择文件时，Windows 都会将文件从设备复制到 C:\ 上的临时目录中，因此当我尝试删除它时，它只会删除临时文件，并且该文件保留在设备上。

这到底是怎么回事？我似乎找不到任何有关通过 USB 访问代码中的 WP8 的信息。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:59:06.430

Codeplex 上的 Windows Phone Power Tools 可以通过 PC 连接将文件写入隔离存储 - 您可能需要查看其源代码：[https ://wptools.codeplex.com/](https://wptools.codeplex.com/)

# php - 使用表单和 php 从数据库中提取多个字段

> ID：15824284
> 
> 赞同：0
> 
> 时间：2013-04-05T01:04:47.800
> 
> 标签：php, mysql, drop-down-menu

我有一个包含多个字段的多行数据库。

我有一个包含下拉列表的表单。下拉列表显示数据库中每一行的一个数据库字段 (field_name)。

当用户选择所需的条目并点击 SUBMIT 时，该值将传递到 results.php 页面并可以通过 $_POST 使用。

所有这些目前都有效。

我想要一种方法来发送与从数据库中选择的字段（不仅仅是“field_name”）的行相对应的行的其余字段以及从下拉菜单中选择的内容。

例如，如果我有一个数据库，其中的行包含名为“name”、“date”和“age”的字段，我希望所有数据库行“name”出现在下拉列表中，并且一旦提交，将该特定名称的“日期”和“年龄”传递给 results.php 以在该页面上使用。

```
<html>
<head>
<title>Drop Down Test</title>
</head>

<body style="font-family: verdana; font-size: 11px;">

<?php

//Variables for connecting to database.
$hostname = "abcd";
$username = "abcd";
$dbname = "abcd";
$password = "abcd";
$usertable = "abcd";

//Connecting to database
$connection = mysql_connect($hostname, $username, $password) OR DIE ("Unable to connect to database!");
$db = mysql_select_db($dbname);

$query = "SELECT * FROM abcd";
$result = mysql_query($query) or die(mysql_error());

?>

<h2>Drop Down Test Form</h2>

<p>Please fill out the form below and click submit.</p>

<form action="results.php" method="POST">

    <p>Drop Down Test:
        <select name='event'>
        <!-- Drop down -->
        <?php
        while($row = mysql_fetch_array($result))
    {
        echo '<option>' . $row['field_name']. '</option>';
            }
        ?>
    </select>

    <p><input type="submit" value="Submit"><p>

</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T01:11:40.187

你应该`value`像这样选择你的选项：

```
echo '<option value = "'.$row['field_name'].'" name = "">' . $row['field_name']. '</option>'; 
```

然后你可以通过`$_POST['event'];`

**更新**

从选择中获取所有值，您可以使用`$_SESSION`变量将其传递给其他 php.file。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T01:12:35.490

```
 //  First of all, I advice you to connect via PDO, or at least msqli, because mysql_query is depreciated.
  //  To connect with database you need:
  DEFINE("USER", "root"); 
  DEFINE("DBNAME", "test"); 
  DEFINE("DBPASSWORD", ""); 
  DEFINE("DBHOST", "localhost");
  $dbh = new PDO('mysql:host='.DBHOST.';dbname='.DBNAME,USER,DBPASSWORD,array(PDO::MYSQL_ATTR_INIT_COMMAND => "SET NAMES utf8"));

   //The query:
   $sth = $dbh->prepare("SELECT name,age,date FROM test");
   $sth->execute();

  //the drop down form
    echo '<form action="results.php" method="POST">
    <select name="event"><option value=0></option>';
    while ($result = $sth->fetch(PDO::FETCH_ASSOC)) { extract($result);
    echo '<option value="date:'.$date.'-age:'.$age.'"/>'.$name.'</option>'; 
    echo '</select>
        <p><input type="submit" value="Submit"><p>
    </form>';
    }

//the event in the records.php by clicking submit
if(isset($_POST['event'])){
echo 'name:',$name'-date:',$date,'-$age',$age;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T17:17:58.457

这成功了（在 results.php 中）：

```
<?php

$hostname = "****";
$username = "****";
$dbname = "****";
$password = "****";
$usertable = "abcd";

$connection = mysql_connect($hostname, $username, $password) OR DIE ("Unable to connect to database!");
$db = mysql_select_db($dbname);

//it was this SQL query that was the key, namely the WHERE statement
$query = "SELECT * from abcd where field_name='$_POST[event]'"; 

$result = mysql_query($query) or die(mysql_error()); 
$row = mysql_fetch_row($result); 

echo "id: " . $row[0] . "<br/>";
echo "field_name: " . $row[1] . "<br/>";
//etc...

//try to throw the individual results into variables
$variable = $row[1];

echo "Check to see that the variable was passed a value: " . $variable . "<br />"; 
echo "Check to see that form selection carried over: " . $_POST['event'] . "<br />"; 

?> 
```

我意识到这不是“最新”的做事方式，我现在将尝试让一切“现代化”。

感谢所有的帮助！

# html - 搜索不会位于导航旁边

> ID：15824286
> 
> 赞同：0
> 
> 时间：2013-04-05T01:05:01.593
> 
> 标签：html, css, forms, input

我有一个水平菜单，想在其中放置一个搜索表单，但它似乎在新行上左对齐。我是 html 新手，所以只是学习基础知识（在我的第三个网站上工作真的掌握了 CSS 的窍门）。

```
<div id="nav">
    <span class="nav">
        <a href="#" alt="$"><span id="jqFade"><img src="images/skydevUpperNav.png"></span></a>
        <a href="#" alt="$"><span id="jqFade"><img src="images/goftbUpperNav.png"></span></a>
        <a href="#" alt="$"><span id="jqFade"><img src="images/genUpperNav.png"></span></a>
        <span id="searchBox">
            <form action="#" method="get">Search
                <input type="text" name="searchGoogle" size="12" maxlength="45" />
            </form>
        </span>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T01:09:11.270

利用`display: inline-block;`

工作小提琴：

[http://jsfiddle.net/wN6Ae/1/](http://jsfiddle.net/wN6Ae/1/)

CSS：

```
searchBox{
    display: inline-block;
    margin-left: 10px;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T01:09:29.140

表单元素`block`默认呈现，因此您需要将搜索框表单设置为`display: inline-block;`. 在 span 中包装块元素不是一个有效的解决方案，因为它不会改变所包含元素的呈现方式。

jsFiddle 演示：http: [//jsfiddle.net/Bf46a/](http://jsfiddle.net/Bf46a/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T01:13:15.897

您应该使用`<ul>`标签`<li>`进行导航，并且`float:left;`列表元素跨度不好。`list-style-type: none;`如果您不希望显示列表样式，请设置。`<img>`也应该关闭->`<img .... />`

# android - 在android的styles.xml中使用自定义属性

> ID：15824289
> 
> 赞同：5
> 
> 时间：2013-04-05T01:05:34.707
> 
> 标签：android, xml

我将自定义属性样式设置为

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <declare-styleable name="EffectsTextView">        
        <attr name="strokeWidth" format="float" />
        <attr name="strokeMiter" format="float" />
        <attr name="strokeColor" format="color" />        
    </declare-styleable>
</resources> 
```

在布局文件中，我可以使用这个自定义属性为这个属性分配一个命名空间：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"    
xmlns:effects="http://schemas.android.com/apk/res-auto/com.base.view.EffectsTextView"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="#40000000" >

 <com.base.view.EffectsTextView
        android:id="@+id/textView1"
        android:layout_width="290dip"
        android:layout_height="80dip"
        android:layout_marginLeft="5dip"
        android:layout_marginTop="16dip"
        android:gravity="center"
        android:text="SETTINGS"
        android:textSize="44dip"
        android:textStyle="bold"  
        effects:strokeWidth="10"  />    <--- custom tag "effects" 
```

但是它没有在styles.xml 中识别这个自定义标签

```
<style name="EffectsHeaderTextStyle">
     <item name="effects:strokeWidth">10</item>
</style> 
```

错误：未找到与给定名称、效果匹配的资源，尽管我将命名空间与在 RelativeLayout 文件中所做的相同。

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-05T01:13:38.013

将您的 XML 更改为：

```
xmlns:effects="http://schemas.android.com/apk/res/com.base.view.EffectsTextView" 
```

并改变你的风格：

```
<style name="EffectsHeaderTextStyle">
    <item name="strokeWidth">10</item>
</style> 
```

我对字体做了类似的事情：

[https://github.com/androidfu/CodeExamples/tree/master/com.androidfu.CustomFontsDemo](https://github.com/androidfu/CodeExamples/tree/master/com.androidfu.CustomFontsDemo)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-21T09:35:47.033

Gradle 不建议在`xmln:`.
在 Gradle 项目中，最终 APK 中使用的实际包可能会有所不同；例如，您可以在一个版本而不是另一个版本中添加 .debug 包后缀。因此，您不应该在资源中硬编码应用程序包；相反，使用特殊的命名空间`http://schemas.android.com/apk/res-auto`，这将导致工具为资源找出正确的命名空间，而不管构建期间使用的实际包。

# ruby - Ruby regex- gsub 是否存储它匹配的内容？

> ID：15824295
> 
> 赞同：21
> 
> 时间：2013-04-05T01:06:46.633
> 
> 标签：ruby, regex, gsub

如果我使用

```
.gsub(/matchthisregex/,"replace_with_this") 
```

gsub 会在某处存储与正则表达式匹配的内容吗？我想在我的替换字符串中使用它匹配的内容。例如像

```
"replace_with_" + matchedregexstring + "this" 
```

在我上面的示例中，matchedregexstring 将是 gsub 中存储的匹配项？抱歉，如果这令人困惑，我不知道该怎么说。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-04-05T01:42:19.607

来自[精美手册](http://ruby-doc.org/core/String.html#method-i-gsub)：

> 如果*replacement*是a `String`，它将替换匹配的文本。它可能包含对模式捕获组的反向引用，格式为`\d`，其中*d*是组号，或者`\k<n>`，其中*n*是组名。如果它是双引号字符串，则两个反向引用都必须以附加的反斜杠开头。但是，在*替换*中，特殊匹配变量，例如`&$`，不会引用当前匹配。
> [...]
> 在块形式中，当前匹配字符串作为参数传入，变量如`$1`, `$2`, $`, `$&`, 和`$'`会适当设置。块返回的值将替换每次调用的匹配项。

如果您不关心捕获组（即`(expr)`正则表达式中的内容），那么您可以使用块形式和`$&`：

```
>> 'where is pancakes house?'.gsub(/is/) { "-#{$&}-" }
=> "where -is- pancakes house?" 
```

如果您确实有捕获组，那么您可以`\n`在替换字符串中使用：

```
>> 'where is pancakes house?'.gsub(/(is)/, '-\1-')
=> "where -is- pancakes house?" 
```

或`$n`在块中：

```
>> 'where is pancakes house?'.gsub(/(is)/) { "-#{$1}-" }
=> "where -is- pancakes house?" 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-09-02T11:21:42.907

我在[这里](http://batsov.com/articles/2013/08/30/using-gsub-with-a-block/)发现 gsub 的匹配项实际上可以通过`Regexp.last_match`变量（[MatchData](http://www.ruby-doc.org/core-2.1.2/MatchData.html#method-i-captures)类）访问，如下所示：

```
my_string.gsub(my_regexp){ Regexp.last_match.inspect } 
```

举一个更实际的例子，如果你想记录所有匹配，它可以使用如下：

```
"Hello world".gsub(/(\w+)/) { Regexp.last_match.captures.each{ |match| Rails.logger.info "FOUND: #{match}"} }

#Rails log:
FOUND: Hello
FOUND: world 
```

在您的特定情况下，您可以执行以下操作：

```
mystring.gsub(/(matchthisregex)/){ mystring = "replace_with_#{Regexp.last_match[0].to_s}this"} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-06-08T19:20:30.537

对于所有 ruby​​ 版本：获取匹配字符串的简单方法。

```
.gsub(/matched_sym/) {|sym| "-#{sym}-"} 
```

# html - html5画布中的橡皮擦工具

> ID：15824299
> 
> 赞同：0
> 
> 时间：2013-04-05T01:07:27.927
> 
> 标签：html, canvas, html5-canvas

嗨，我正在我的应用程序中构建一个带有 html5 和 javascript 的 Windows 商店应用程序他们抹去的地方。我一直在尝试以不同的方式使用橡皮擦工具，例如我已将默认的 globalCompositeOperation 更改为“destination-out”，就像这段代码一样

```
 //Here is the error.
        if (clickTool[j] == "eraser") {
            ctx.globalCompositeOperation = 'destination-out';
            ctx.fillStyle = 'rgba(255,0,0,0.5);';
            ctx.strokeStyle = 'rgba(255,0,0,0.5);';

        }
        else {
            ctx.globalCompositeOperation = "source-over";
            ctx.strokeStyle = clickColor[j];
        } 
```

但不幸的是它对我不起作用。我已将所有代码上传到此链接：

[我的代码](http://jsfiddle.net/AHNxx/6/)

请我想有人可以帮助我。

谢谢，我很抱歉我的演讲，我是墨西哥人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T01:12:48.223

**使用多个图层。**有一个画布用于背景图像，另一个用于绘图；这就是为什么您永远不会删除任何背景图像的原因。

如果需要，您可以拥有多个层，因为它们通常不会影响性能。

当然，如果您可以组合图层，如果您认为绘图是“永久的”，则将最后绘制的曲线说成背景图层。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-28T09:55:21.477

维护一系列中点。首先将 globalCompositeOperation 用作“destination-out”，然后将“source-over”用作透明的橡皮擦轨迹。

以下是您需要与鼠标移动功能一起使用的代码

```
var handleMouseMove = function (event) {
    midPt = new createjs.Point(oldPt.x + stage.mouseX>>1, oldPt.y+stage.mouseY>>1);

   if(curTool.type=="eraser"){

            var tempcanvas = document.getElementById('drawcanvas');
  var tempctx=tempcanvas.getContext("2d");
  tempctx.beginPath();
  tempctx.globalCompositeOperation = "destination-out";   
  tempctx.arc(midPt.x, midPt.y, 20, 0, Math.PI * 2, false);     
  tempctx.fill();
  tempctx.closePath();
  tempctx.globalCompositeOperation = "source-over";
  drawingCanvas.graphics.clear();

  // keep updating the array for points 
  arrMidPtx.push(midPt.x);
  arrMidPty.push(midPt.y);
  stage.addChild(drawingCanvas);
  stage.update();

    }        

  }; 
```

我使用此代码制作了一个橡皮擦，其行为类似于笔并填充透明颜色而不是白色

# javascript - 在视图中调用主干模型函数

> ID：15824302
> 
> 赞同：0
> 
> 时间：2013-04-05T01:07:54.233
> 
> 标签：javascript, backbone.js, coffeescript

我的模型中有一个简单的函数，如果优先级为 100，它应该返回 true

```
class App.Models.Publication extends Backbone.Model
  urlRoot: '/api/publications'

  isIncredible: ->
    @get('priority') is 100 
```

在视图中我想调用该函数，但我不能

```
class App.Views.PublicationShow extends Backbone.View
  tagName: 'article'
  className: 'offer'
  template: JST['publications/show']

  render: =>
    if @model.isIncredible()
      $(@el).addClass('incredible').html(@template(publication: @model))
    else
      $(@el).html(@template(publication: @model))
    @modalEvent()
    this 
```

我得到：`TypeError: this.model.isIncredible is not a function`

就像我正在使用咖啡脚本一样

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T02:13:45.543

您需要通过以下任一方式在视图中初始化模型 1）在视图的初始化函数中设置它

```
class App.Views.PublicationShow extends Backbone.View
  tagName: 'article'
  className: 'offer'
  template: JST['publications/show']

  initialize: ->
      @model = new App.Models.Publication()

  render: =>
    if @model.isIncredible()
      $(@el).addClass('incredible').html(@template(publication: @model))
    else
      $(@el).html(@template(publication: @model))
    @modalEvent()
    this 
```

或 2) 在实例化时将模型实例作为参数传递给视图

```
pubModel = new App.Models.Publication(/*...*/)
pubShow = new App.Views.PublicationShow(model: pubModel) 
```

# extjs - ServiceStack MiniProfiler Ajax 请求记录

> ID：15824304
> 
> 赞同：4
> 
> 时间：2013-04-05T01:08:18.237
> 
> 标签：extjs, servicestack, mvc-mini-profiler

所以，在我的`Index.cshtml`页面中，当我最初加载页面时，我有：

```
@inherits ViewPage
<!DOCTYPE html>
<html>
    <head>
        <script type="text/javascript" src="ext-all-debug.js"></script>
        <script type="text/javascript" src="app.js"></script>
        <script type="text/javascript" src="app.ext.js"></script>
        <script type="text/javascript" src="dump.js"></script>
        @ServiceStack.MiniProfiler.Profiler.RenderIncludes().AsRaw() 
    </head>
    <body> 
    </body>
</html> 
```

![在此处输入图像描述](https://i.stack.imgur.com/1Q4Uf.png)

一切都好，我可以看到它分析索引、一堆 ExtJS，以及在服务器端（在 /api/session 中）对我的 ServiceStack 的第一个 ajax 调用。

现在，在我的 ExtJS 表单中，当我单击它时，我有一个 Customers 选项卡，它发送 ajax 请求到`/api/customers`，当我单击它时，我有一个选项卡调用`/api/orders`。

但是，当我开始单击“客户”选项卡时，Miniprofiler 不再将任何后续 ajax 请求添加到列表中？我认为 Miniprofiler 可以记录 ajax 请求没有什么特别需要做的吗？为什么它不为我记录后续的 ajax 请求？我错过了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-07-24T15:06:42.900

我知道这有点老了，但是如果有人有兴趣使用带有 angularjs 的 miniprofiler 的实现如下：

```
app.config(['$httpProvider', function ($httpProvider) {

    $httpProvider.interceptors.push(["$q", function ($q) {

        return {
            'response': function (response) {

                if (typeof (MiniProfiler) != 'undefined' && response.config.url.indexOf(".html") < 0) {
                    var stringIds = response.headers('X-MiniProfiler-Ids');
                    if (stringIds) {
                        MiniProfiler.fetchResultsExposed(angular.fromJson(stringIds));
                    }
                }

                return response || $q.when(response);
            }
        };

    }]);
}]); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-05T04:37:52.793

通过 Nuget 提供的当前版本不支持拦截 ExtJS ajax 调用。似乎有对该功能的[拉取请求](https://github.com/SamSaffron/MiniProfiler/pull/49)，但它尚不可用。

为了解决这个问题，我必须做以下事情：

```
Ext.require('Ext.Ajax');
Ext.onReady(function () {
    Ext.Ajax.on('requestcomplete', function (e, xhr, settings) {
        if (typeof (MiniProfiler) != 'undefined') {
            var stringIds = xhr.getResponseHeader('X-MiniProfiler-Ids');
            if (stringIds) {
                var ids = typeof JSON != 'undefined' ? JSON.parse(stringIds) : eval(stringIds);
                MiniProfiler.fetchResultsExposed(ids);
            }
        }
    });
}); 
```

# three.js - 将纹理应用到平面的正确方法是什么？

> ID：15824310
> 
> 赞同：0
> 
> 时间：2013-04-05T01:08:46.963
> 
> 标签：three.js

有没有一种方法可以将纹理渲染到没有网格的平面对象上，或者看起来像一个平面？在此[示例](http://sierraintegratedsolutions.com/Untitled.png)中，彩色区域是使用激光扫描仪创建的多条线绘制的一种形状。我希望它只有一个统一的纹理而不是几个面。谢谢！

```
<!DOCTYPE html>
<html lang="en">
<head>
    <title>TruViewTest</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <style>
        body {
            font-family: Monospace;
            background-color: #f0f0f0;
            margin: 0px;
            overflow: hidden;
        }
        #info {
            position: absolute;
            top: 0px;
            width: 100%;
            padding: 5px;
            text-align:center;
        }
    </style>
</head>
<body>
    <canvas id="debug" style="position:absolute; left:100px"></canvas>

    <script src="../build/three.min.js"></script>

    <script>

var camera, scene, renderer;

var windowHalfX = window.innerWidth / 2;
var windowHalfY = window.innerHeight / 2;

init();
animate();

function init() {

container = document.createElement('div');
document.body.appendChild(container);

camera = new THREE.PerspectiveCamera(50, window.innerWidth / window.innerHeight, 1, 1000);
camera.position.set(0, 150, 500);

scene = new THREE.Scene();

parent = new THREE.Object3D();
parent.position.y = 50;
scene.add(parent);

var slabTexture = new THREE.Texture();
var loader = new THREE.ImageLoader();
loader.addEventListener('load', function (event) {

    slabTexture.image = event.content;
    slabTexture.needsUpdate = true;

});
loader.load('textures/slabs/Small Files-Collage/RCRANBROWN3-10017_LKWD-small.jpg');

function addShape(shape, color, lncolor, x, y, z, rx, ry, rz, s) {

    // flat shape

    var geometry = new THREE.ShapeGeometry(shape);
    var material = new THREE.MeshBasicMaterial({
        map: color,
        overdraw: true
    });

    geometry.faceUvs = [
        []
    ];
    geometry.faceVertexUvs = [
        []
    ];

    for (var f = 0; f < geometry.faces.length; f++) {

        var faceuv = [
        new THREE.Vector2(0, 1),
        new THREE.Vector2(1, 1),
        new THREE.Vector2(1, 0),
        new THREE.Vector2(0, 0)];

        geometry.faceUvs[0].push(new THREE.Vector2(0, 1));
        geometry.faceVertexUvs[0].push(faceuv);
    }
    var mesh = THREE.SceneUtils.createMultiMaterialObject(geometry, [material, new THREE.MeshBasicMaterial({
        color: 0x000000,
        wireframe: true,
        transparent: true,
        overdraw: true
    })]);

    //var mesh = new THREE.Mesh( geometry, material );
    mesh.position.set(x, y, z);
    mesh.rotation.set(rx, ry, rz);
    mesh.scale.set(s, s, s);
    parent.add(mesh);

    // line

    var geometry = shape.createPointsGeometry();
    var material = new THREE.LineBasicMaterial({
        linewidth: 2,
        color: lncolor,
        transparent: true
    });

    var line = new THREE.Line(geometry, material);
    line.position.set(x, y, z);
    line.rotation.set(rx, ry, rz);
    line.scale.set(s, s, s);
    parent.add(line);

}

// Top
var TopShape = new THREE.Shape();
TopShape.moveTo(-383748, 422610);
TopShape.lineTo(-311945, 422414);
TopShape.lineTo(-95342, 422937);
TopShape.lineTo(79708, 423298);
TopShape.lineTo(228392, 422665);
TopShape.lineTo(411795, 422243);
TopShape.lineTo(567713, 419246);
TopShape.lineTo(637244, 420570);
TopShape.lineTo(636393, 266943);
TopShape.lineTo(635691, 104201);
TopShape.lineTo(635072, 10155);
TopShape.lineTo(396204, 8753);
TopShape.lineTo(396728, 150015);
TopShape.lineTo(-373284, 150015);
TopShape.lineTo(-373612, -480088);
TopShape.lineTo(-649288, -479927);
TopShape.lineTo(-649960, -262722);
TopShape.lineTo(-650305, -12511);
TopShape.lineTo(-650165, 162285);
TopShape.lineTo(-649661, 305543);
TopShape.lineTo(-648809, 422951);
TopShape.lineTo(-438166, 422758);
TopShape.lineTo(-383748, 422610);

// addShape( shape, color, x, y, z, rx, ry,rz, s );
addShape(TopShape, slabTexture, 0x333333, 60, 100, 0, 0, 0, 0, .0005);

renderer = new THREE.CanvasRenderer({
    antialias: true
});
renderer.setSize(window.innerWidth, window.innerHeight);
//renderer.sortObjects = false;
//renderer.sortElements = false;
container.appendChild(renderer.domElement);

//

window.addEventListener('resize', onWindowResize, false);
}

function onWindowResize() {
windowHalfX = window.innerWidth / 2;
windowHalfY = window.innerHeight / 2;
camera.aspect = window.innerWidth / window.innerHeight;
camera.updateProjectionMatrix();
renderer.setSize(window.innerWidth, window.innerHeight);

}

function animate() {
requestAnimationFrame(animate);
render();
}

function render() {
renderer.render(scene, camera);
}
    </script>
</body>
</html> 
```

# nginx - CentOS 5.5 Nginx 服务启动失败

> ID：15824311
> 
> 赞同：0
> 
> 时间：2013-04-05T01:09:03.973
> 
> 标签：nginx

我使用 Nginx repo 中的 YUM 在 centOS 5.5 中安装了 Nginx。

安装后初始处于服务停止状态。我想现在启动 Nginx 服务并将其配置为在启动时启动。在启动服务之前，我在 /etc/nginx/conf.d/ssl.conf 中创建了一个新的 ssl 配置

在此配置文件的第三行，我将服务器名称设置如下：

```
server_name   {{ www_name }}; 
```

我在终端中执行了以下命令：

```
$ chkconfig nginx on
$ service nginx start 
```

chkconfig 命令已成功执行，但 service start 命令给了我以下错误：

> 启动 nginx: nginx: [emerg] 指令 "server_name" 没有被 ";" 终止 在 /etc/nginx/conf.d/ssl.conf:3

这就是我的 ssl.conf 的样子：

> 服务器 {
> 听 443 default_server;
> server_name {{ www_name }};
> underscores_in_headers on;
> 开启ssl；
> ssl_certificate cert.pem;
> ssl_certificate_key cert.key;
> ...
> }

[此链接](http://nginx.org/en/docs/http/server_names.html)解释了解决方案，但我无法理解。令人惊讶的是，其他人之前在另一个 CentOS 上使用过这个 ssl.conf 文件，在其他地方，我没有改变任何东西！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T16:26:58.723

`{{ www_name }}`不是一个有效的条目。您需要使用域名字符串或正则表达式。您提供的链接显示了有效的示例。

# jquery - 使用外部 URL 的 getJSON

> ID：15824312
> 
> 赞同：0
> 
> 时间：2013-04-05T01:09:07.090
> 
> 标签：jquery

我正在尝试使用此脚本读取外部 JSON 文件：

```
$.getJSON('http://www.earthquake.usgs.gov/earthquakes/feed/geojson/1.0/hour',function( json ) {
//$.getJSON('hour',function( json ) {
    $.each( json.features, function( i, item ){
        alert(item.properties.mag);
    });
}); 
```

当我使用外部 url 时，此脚本不起作用，但是，当我使用本地小时文件（我从外部 url 复制和粘贴）时，此脚本工作正常。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T01:24:00.837

我将成为实际上发布此类问题的另一个答案的“那个人”。***由于相同的来源政策，您不能这样做（GOOGLE IT！）***

实际上，如果您确实需要这样做，您可以使用 PHP 设置代理并使用代理获取必要的数据。

# unit-testing - 在 Spock 中使用 GroovyMock 或类似方法模拟静态方法

> ID：15824315
> 
> 赞同：18
> 
> 时间：2013-04-05T01:09:29.550
> 
> 标签：unit-testing, groovy, spock, powermock, powermockito

初来乍到，如有遗漏，敬请见谅。我希望使用 Spock 绕过对静态方法的调用。反馈会很棒

使用 groovy 模拟，我认为我可以通过静态调用但没有找到它。作为背景，我正在改造遗留 Java 中的测试。禁止重构。我正在使用带有 groovy-1.8 的 spock-0.7。

对静态方法的调用与以下形式的实例调用链接在一起：

```
public class ClassUnderTest{

public void methodUnderTest(Parameter param){
  //everything else commented out
Thing someThing = ClassWithStatic.staticMethodThatReturnsAnInstance().instanceMethod(param);
   }

} 
```

staticMethod 返回 ClassWithStatic 的实例 instanceMethod 返回方法其余部分所需的 Thing

如果我直接执行全局模拟，它会返回模拟的实例 ok：

```
def exerciseTheStaticMock(){
    given:
    def globalMock = GroovyMock(ClassWithStatic,global: true)
    def instanceMock = Mock(ClassWithStatic)

    when:
    println(ClassWithStatic.staticMethodThatReturnsAnInstance().instanceMethod(testParam))

    then:
    interaction{
        1 * ClassWithStatic.staticMethodThatReturnsAnInstance() >> instanceMock
        1 * instanceMock.instanceMethod(_) >> returnThing
    }
} 
```

但是，如果我从 ClassUnderTest 运行 methodUnderTest：

```
def failingAttemptToGetPastStatic(){
    given:
    def globalMock = GroovyMock(ClassWithStatic,global: true)
    def instanceMock = Mock(ClassWithStatic)
    ClassUnderTest myClassUnderTest = new ClassUnderTest()

    when:
    myClassUnderTest.methodUnderTest(testParam)

    then:
    interaction{
        1 * ClassWithStatic.staticMethodThatReturnsAnInstance() >> instanceMock
        1 * instanceMock.instanceMethod(_) >> returnThing
    }
} 
```

它抛出一个 ClassWithStatic 的真实实例，该实例在其 instanceMethod 中继续失败。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-05T12:28:28.287

Spock 只能模拟在 Groovy 中实现的静态方法。要模拟在 Java 中实现的静态方法，您需要使用[GroovyMock](http://spockframework.org/spock/javadoc/1.0/spock/lang/MockingApi.html/)、[PowerMock](https://code.google.com/p/powermock/)或[JMockit](https://code.google.com/p/jmockit/)之类的工具。

PS：鉴于这些工具为了实现它们的目标而采用了一些深刻的技巧，我很想知道它们是否以及如何与在 Groovy/Spock（而不是 Java/JUnit）中实现的测试一起工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-02-27T09:47:44.353

以下是我使用 Spock (v1.0) 和 PowerMock (v1.6.4) 解决类似问题的方法（模拟从另一个静态类调用的静态方法调用）

```
import org.junit.Rule
import org.powermock.core.classloader.annotations.PowerMockIgnore
import org.powermock.core.classloader.annotations.PrepareForTest
import org.powermock.modules.junit4.rule.PowerMockRule
import spock.lang.Specification
import static org.powermock.api.mockito.PowerMockito.mockStatic
import static org.powermock.api.mockito.PowerMockito.when

@PrepareForTest([YourStaticClass.class])
@PowerMockIgnore(["javax.xml.*", "ch.qos.logback.*", "org.slf4j.*"])
class YourSpockSpec extends Specification {

@Rule
Powermocked powermocked = new Powermocked();

def "something something something something"() {
    mockStatic(YourStaticClass.class)

    when: 'something something'
    def mocked = Mock(YourClass)
    mocked.someMethod(_) >> "return me"

    when(YourStaticClass.someStaticMethod(xyz)).thenReturn(mocked)

    then: 'expect something'
    YourStaticClass.someStaticMethod(xyz).someMethod(abc) == "return me"

   }
} 
```

注解是可选的，仅在`@PowerMockIgnore`与现有库有冲突时使用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-29T17:06:42.497

我在 Groovy/Spock 中处理静态方法的方法是创建在实际代码中替换的代理类。这些代理类只返回您需要的静态方法。您只需将代理类传递给您正在测试的类的构造函数。

因此，当您编写测试时，您将访问代理类（然后将返回静态方法）并且您应该能够以这种方式进行测试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-17T04:24:50.933

一种解决方法是将静态方法调用包装到实例方法中。

```
class BeingTested {
    public void methodA() {
        ...

        // was:
        // OtherClass.staticMethod();

        // replaced with:
        wrapperMethod();

        ...
    }

    // add a wrapper method for testing purpose
    void wrapperMethod() {
        OtherClass.staticMethod();
    }
} 
```

现在您可以使用 Spy 来模拟静态方法。

```
class BeingTestedSpec extends Specification {

    @Subject BeingTested object = new BeingTested()

    def "test static method"() {
        given: "a spy into the object"
        def spyObject = Spy(object)

        when: "methodA is called"
        spyObject.methodA()

        then: "the static method wrapper is called"
        1 * spyObject.wrapperMethod() >> {}
    }
} 
```

如果它应该返回一个值，您还可以为包装器方法存根罐头响应。此解决方案仅使用 Spock 内置函数，并与 Java 和 Groovy 类一起使用，而不依赖于 PowerMock 或 GroovyMock。

# jquery - 引导轮播/预加载图像

> ID：15824316
> 
> 赞同：2
> 
> 时间：2013-04-05T01:09:44.873
> 
> 标签：jquery, twitter-bootstrap, carousel, image-preloader

我已经搜索过，但无法找到使用 Bootstrap Carousel 预加载图像的方法。我正在建立一个包含大量图像的投资组合网站，现在 Bootstrap 轮播在加载所有图像后可以正常工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T01:19:39.407

我很确定 Bootstrap 轮播中的图像不是动态加载的，而是与页面一起加载的。因此，您没有任何理由预加载。

当图像动态加载到页面上时使用预加载。发生这种情况时，页面必须将该图像与页面分开加载，从而导致动态添加和图像下载/显示之间出现不希望的延迟。

因为引导程序的轮播将其图像包含在 HTML 中并简单地用 javascript 隐藏，所以*图像*与页面一起加载，从而为您实现任何预加载。

**tl; dr：**你不能它已经为你完成了。

# python - 如何使用python正确处理Linux上的自动启动和停止

> ID：15824322
> 
> 赞同：0
> 
> 时间：2013-04-05T01:11:17.733
> 
> 标签：python, linux, service, autorun

我有两个脚本：“autorun.py”和“main.py”。我将“autorun.py”作为服务添加到我的 linux 系统中的自动运行中。完美运行！

现在我的问题是：当我想从我的自动运行脚本启动“main.py”，并且“main.py”将永远运行时，“autorun.py”也永远不会终止！所以当我这样做的时候

```
sudo service autorun-test start 
```

该命令也永远不会完成！

如何运行“main.py”然后退出，并完成它，当使用参数“stop”启动“autorun.py”时如何停止“main.py”？（这就是我认为所有其他服务的工作方式）

**编辑：**

解决方案：

```
if sys.argv[1] == "start":
    print "Starting..."
    with daemon.DaemonContext(working_directory="/home/pi/python"):
        execfile("main.py")
else:
    pid = int(open("/home/pi/python/main.pid").read())
    try:
        os.kill(pid, 9)
        print "Stopped!"
    except:
        print "No process with PID "+str(pid) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T01:27:38.613

首先，如果你想创建一个系统守护进程，你几乎肯定想要遵循[PEP 3143](http://www.python.org/dev/peps/pep-3143/)，并且你几乎肯定想要使用该[`daemon`](https://pypi.python.org/pypi/python-daemon/)模块来为你做这件事。

> 当我想从我的自动运行脚本启动“main.py”并且“main.py”将永远运行时，“autorun.py”也永远不会终止！

你没有说你是如何运行它的。如果您正在做任何`main.py`作为孩子启动并等待的事情（或者，更糟糕的是，尝试`import`/ `execfile`/etc. 在同一进程中），您就不能这样做。要么`autorun.py`必须启动和分离`main.py`（或通过某些外部工具间接这样做），要么`main.py`必须在启动时进行守护进程。

> 当使用参数“stop”启动“autorun.py”时，如何停止“main.py”？

您需要某种形式的进程间通信 (IPC)，以及`autorun`找到要使用的正确 IPC 通道的某种方式。

如果您正在构建网络服务器，正确的答案可能是作为客户端连接到它。但除此之外，最简单的做法是`kill`带有信号的进程。

如果您正在使用该`daemon`模块，它可以轻松地将信号映射到回调。或者，如果您不需要任何清理，只需使用`SIGTERM`，默认情况下会突然终止。如果这些都不适用，您将不得不设置一个自定义信号处理程序（并在该处理程序中做一些有用的事情——例如，设置一个您的主代码定期检查的标志）。

你怎么知道将信号发送到哪个进程？执行此操作的标准方法是`main.py`在启动时将其 PID 记录在 pidfile 中。你读了那个 pidfile，并用信号通知那里指定的任何进程。（如果您因为没有具有该 PID 的进程而收到错误，那仅表示守护程序已因某种原因退出 - 可能是因为未处理的异常，甚至是段错误。您可能想要记录它，但处理“停止" 否则成功。）同样，如果你使用`daemon`，它会为你做 pidfile 的东西；如果没有，你必须自己做。

您可能想查看计算机附带的守护程序的服务脚本。它们可能都是用 bash 而不是 Python 编写的，但要弄清楚它们在做什么并不难。或者……只需将其中一个用作骨架，在这种情况下，您实际上并不需要*任何*bash 知识；它只是名称上的搜索和替换。

如果你的发行版有 LSB 风格的初始化函数，你可以使用类似[这个例子](http://archives.aidanfindlater.com/blog/2009/09/04/sample-init-d-script/)的东西。那个比你需要做的要多得多，但它是所有细节的一个很好的例子。[或者用这个例子](http://werxltd.com/wp/2012/01/05/simple-init-d-script-template/)从头开始做这一切。`daemon`这个是从服务脚本进行pidfile管理和后台处理（将非守护程序转换为守护程序），如果您使用得当，则不需要这些，它使用的是SIGHUP而不是SIGTERM。您可以自行搜索 init.d 服务脚本的其他示例。

但是同样，如果您只是想为自己的系统执行此操作，最好的办法是查看您的发行版上的 /etc/init.d。那里将有几十个示例，其中 90% 将完全相同，除了守护程序的名称。

# ios - 哪些 iOS 崩溃报告服务不可靠？（< 50% 的错误被捕获）

> ID：15824327
> 
> 赞同：2
> 
> 时间：2013-04-05T01:11:43.080
> 
> 标签：ios, crash-reports

我尝试过 Crashlytics、Crittercism、BugSense 和 Flurry，但它们似乎都没有持续报告崩溃。前 3 个没有捕获他们声称的崩溃，最后一个明确没有捕获低级错误，例如取消引用 NULL 指针。他们想念他们中的很多人。昨天我为 Crashlytics 创建了大约 9 个错误，它捕获了 3 个。

其他人有类似的经历吗？有更好的崩溃报告服务吗？还是我可能做错了什么来获取不良数据？

# c++ - g++ 不编译某些嵌套模板

> ID：15824333
> 
> 赞同：3
> 
> 时间：2013-04-05T01:12:31.467
> 
> 标签：c++, templates, nested

定义 BREAK 时，g++ 4.7.2 不会编译以下内容，我认为这是有效的 C++。`A<U> tmp`如果将其更改为其他内容，它确实会使用定义的 BREAK 进行编译，例如`A<int> tmp`- 虽然这使得这里的最小测试用例可以工作，但在我的实际应用程序中并不好。这里有什么不是合法的 C++ 吗？

```
template <typename T>
class B {

};

template <typename T>
class A {
public:
    template <typename U> B<U> *alloc_B( );
};

template <typename T> template <typename U>
B<U> *A<T>::alloc_B( ) {
    return new B<U>( );
}

#ifdef BREAK
template <typename T>
class C {
public:
    template <typename U> void x(B<U> &b) {
        A<U> tmp;
        B<U> *tmp2;
        tmp2 = tmp.alloc_B<U>( );
        delete tmp2;
    }
};
#endif

int main( ) {
    A<int> a;
    B<float> *bp = a.alloc_B<float>( );
    delete bp;

#ifdef BREAK
    C<int> c;
    B<float> b;

    c.x(b);
#endif
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T01:16:06.530

`alloc_B`函数模板是一个从属名称。你必须这样称呼它：

```
tmp2 = tmp.template alloc_B<U>( ); 
```

这就是问题所在，这就是为什么它在您使用时起作用的原因`A<int>`，因为类型不再依赖于模板参数`U`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-05T01:18:32.723

这是由于`C++`令人讨厌的解析规则之一。当它看到 时`tmp.alloc_B<U>`，这不会被解释为模板，而是`tmp.alloc_B < U`. 要解决此问题，您需要明确指定这是一个模板：

```
tmp2 = tmp.template alloc_B<U>( ); 
```

# vcf-vcard - 在 vCard 3.0 中包含 GENDER 类型是否“非法”？

> ID：15824335
> 
> 赞同：2
> 
> 时间：2013-04-05T01:12:42.707
> 
> 标签：vcf-vcard

我了解 vCard 4.0 将引入一些常用的联系人属性字段（类型），如 GENDER、ANNIVERSARY 等。在 vCard 3.0 格式中没有标准的方式来表示这些。

我的问题是如果 vCard 3.0 对象包含 GENDER 类型，客户应该怎么做。这会使其成为无效的 vCAd，还是只是客户端会忽略这些字段？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T12:45:06.720

一些客户会添加一个`X-GENDER`属性。但是，由于它是扩展属性，因此无法保证读取 vCard 的应用程序会检测到它。

```
X-GENDER:Male 
```

资料来源：[http ://en.wikipedia.org/wiki/VCard#vCard_extensions](http://en.wikipedia.org/wiki/VCard#vCard_extensions)

您也可以继续包含一个`GENDER`属性，即使它不是 3.0 规范的一部分。规范说，如果 vCard 包含消费者无法识别的属性，则消费者必须忽略该属性并继续解析 vCard 的其余部分。

# adobe-director - Macromedia Director：反编译可执行文件

> ID：15824345
> 
> 赞同：0
> 
> 时间：2013-04-05T01:14:16.247
> 
> 标签：adobe-director

可以提取可执行文件吗？？

如果是，我可以使用哪些可能的软件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T19:24:31.117

这取决于您想要深入挖掘可执行文件以及您需要从 exe 中获得什么样的数据。与所有 exe 文件一样，您可以在低级别对其进行分析。但是我假设您想要一个高级工具来取回用于创建 exe 的导向器文件，对吗？对于 exe 文件（使用适当的导演措辞的“投影仪”），我不知道这样的工具。

但很多时候，exe 文件与扩展名为 .dxr 或 .dir 的文件一起使用。这些是导演文件。DXR 文件受到保护。但是通过将它们导入director，您可以提取其中包含的一些演员（图形等）。你需要对术语有深入的了解才能做到这一点。

您可能还会找到 .cst 或 .cxt 文件。这些是演员表。他们也可以保存媒体、脚本等。CXT 是受保护的版本。对于这些文件，对于 DXR 和 DIR 文件也是如此。

总而言之 - 这并不容易，而且你完全揭示所有代码和媒体的机会很低。大多数导演程序员使用受保护的文件来分发他们的程序。那些不允许透露包含的所有数据。

# templates - ember.js 和嵌套模板/视图

> ID：15824346
> 
> 赞同：4
> 
> 时间：2013-04-05T01:14:18.993
> 
> 标签：templates, ember.js, views

我仍在努力学习 ember.js，所以请多多包涵。

## 客观的

我目前正在创建一个单页 Web 应用程序。当应用程序时，应用程序将执行一个 ajax 调用，该调用将返回一个数字列表。应用程序将处理这些数字并为每个数字创建一个 div 并将其存储到一个 div 容器中。

每个 div 都会关联一个点击事件，因此当用户点击链接时，会弹出一个对话框。

## 代码

索引.html

```
 <script type="text/x-handlebars">
            <h2>Welcome to Ember.js</h2>
            {{outlet}}

        </script>

        <script type="text/x-handlebars" data-template-name="payloads"> 
            <div class="page">
                <div id="desktopWrap">
                    <div id="theaterDialog" title="Theater View" class="bibWindow1">
                            {{view.name}}
                    {{#each item in model}}
                        <div {{bindAttr id="item"}} {{action click item}}>
                            <div class="thumb1" ></div>
                            <div class="userDetails1">Payload {{item}}</div>
                            <div class="online1" ></div>
                        </div>
                        <div class="spacer10"></div>
                    {{/each}} 
                    </div>
                </div> 
            </div>
        </script> 
```

我的 app.js 文件在这里：

```
App = Ember.Application.create();

App.Router.map(function() {

});

App.IndexRoute = Ember.Route.extend({
  model: function() {
    return ['Payload_1', 'Payload_2', 'Payload_3'];
  }
});

App.PayloadsRoute = Ember.Route.extend({
   model: function() {
    return ['Payload_1', 'Payload_2', 'Payload_3'];
  } 
})

  App.IndexController = Ember.ObjectController.extend(
    {
        click: function(e)
        {
            alert("clicked:" + e);

        }
    }) 
```

## 大概的概念

上面的当前代码将创建具有 3 个 div 的“theaterDialogue”div 框。一个 onclick 动作通过控制器与每个 div 相关联。当用户单击第一个 div “payload 1”时，将在警报框中打印第二个 div “payload 2”等。我希望能够呈现一个新对话框（jquery 对话框），而不是打印出来内容将从模板呈现。我不清楚这是如何完成的……我知道视图用于存储模板的数据……但不知道如何将模板嵌套在由操作生成的模板中？

如果你能指点我，那就太棒了！

任何建议表示赞赏，D

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T13:11:46.780

嵌套的基本方法是，

*   定义嵌套路由（主要步骤，如果你做对了，你就快到了）
*   `{{outlet}}`如果您认为此视图稍后会附加一些内容，请 添加模板

例如我们有3个视图A、B、C，嵌套如下

```
一个
|_B
  |_C

```

然后模板 A & B 应该有`{{outlet}}`，而 C 是它不应该有的最后一个`{{outlet}}`

一个很好的[例子](http://jsfiddle.net/qeVGG/)

# windows - 从批处理文件所在的目录位置启动批处理文件命令提示符

> ID：15824351
> 
> 赞同：3
> 
> 时间：2013-04-05T01:14:41.170
> 
> 标签：windows, batch-file

我正在编写一个批处理文件，它使用它的父目录中的一些文件（比如说 Folder1）。

```
C:\User\Steve\Foder1\ 
```

现在我想让整个 Folder_1 可重定位，以便我可以将文件夹复制粘贴到我/其他人的计算机上的任何位置并运行批处理脚本。

```
D:\User\Random_guy\Folder1\ 
```

问题是如何在不编写另一个批处理脚本的情况下将批处理文件的命令提示符启动到 (D:\User\Random_guy\Folder1) 它的父目录。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T03:15:05.857

使用以下命令启动批处理文件：

```
pushd %~dp0 
```

这会将当前目录设置为包含批处理文件的文件夹。然后在批处理文件中，确保所有路径都相对于当前目录。

但是，如果您的批处理文件在执行过程中更改到其他目录，并且您仍然希望能够在不知道确切路径的情况下引用批处理的主文件夹的内容，请使用与`%~dp0`文件路径相同的路径你想用。例如，`FileA`与批处理文件来自同一文件夹的 a 将被寻址为

```
"%~dp0FileA" 
```

注意.`\`之前没有 a `FileA`。这是因为`%~dp0`已经包含一个尾随`\`，因此整个事物将评估为正确的路径。（尽管如果您确实添加了另一个反斜杠，例如`"%~dp0\FileA"`，它应该也可以工作，因为 Windows 通常会在路径中间忽略多个连续的反斜杠。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T01:16:53.633

批处理文件中的 %CD% 获取正在运行的当前目录/目录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T06:20:11.040

所以 - 如果我做对了，你想跑

```
`C:\steve\folder1\yourbat.bat` 
```

应该复制`C:\steve\somefiles`到哪个`D:\Random_guy`并将当前目录设置为`D:\Random_guy\folder1`？

```
@ECHO OFF
SETLOCAL
SET subdir=folder1
SET destdir=%~1
IF NOT DEFINED destdir ECHO Require destination username&GOTO :EOF 
SET destdir=%~1\%subdir%
:: Ensure destination exists
ECHO MD "%destdir%" 2>nul
SET "sourcefrom=%~dp0.."
ECHO COPY "%sourcefrom%\filestocopy" "%destdir%\..\"
ECHO CD /d "%destdir%" 
```

请注意`MD`，`COPY`和`CD`命令只是`ECHO`ed，您需要删除`ECHO`关键字才能执行它们。

使用参数运行批处理`D:\Random_guy`

# 3d - 在 three.js 中拉伸图形

> ID：15824358
> 
> 赞同：2
> 
> 时间：2013-04-05T01:15:44.677
> 
> 标签：3d, geometry, three.js

有没有办法将 3D 空间中的 2D 图形挤压成具有实际体积的 3D 几何图形？

具体来说，我正在尝试创建一个简单的应用程序来处理我的 3D 打印机的形状（我知道还有其他众所周知的程序，但我想自己尝试一下）。我已经修改了@LeeStemkoski 的其中一个教程（顺便说一句，这太棒了......如果你正在阅读这篇文章，谢谢！）在[这里](http://www.jonoshaughnessy.org/sandbox/mobius_shape_generator.html%22)创建一个 Mobius Strip 绘图员。它没有体积，显然不能打印。我想把它变成具有实际体积的几何体（防水网格）。

我看过像[这样](http://mrdoob.github.com/three.js/examples/webgl_geometry_extrude_splines.html)的 2D 挤压示例。似乎没有人解决我正在尝试做的事情。样条示例很接近，但我不知道是否可以使其适应我的目的。我正在尝试修改示例并查看支持的文档/库，但是我在这方面遇到了很多困难。

这在three.js中是否可行，还是我以错误的方式进行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-27T14:43:42.487

谢谢杜先生。我意识到我的做法是错误的。我试图获取一个图形函数并赋予它我现在知道的非常奇怪的体积（而不是简单地创建一个真实的几何图形）。谢谢您的帮助！

# css - 下拉选择框无法使用自定义 CSS 正确显示？

> ID：15824359
> 
> 赞同：0
> 
> 时间：2013-04-05T01:15:45.090
> 
> 标签：css, forms, google-chrome, safari, webkit

如何为 Chrome 和 Safari 添加自定义 CSS 选择框样式？有解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T01:15:45.090

答：需要加上 -webkit-appearance: none; 以及 Chrome 和 Safari 的高度值。

有什么建议么？

资源： [http ://bavotasan.com/2011/style-select-box-using-only-css/](http://bavotasan.com/2011/style-select-box-using-only-css/)

在 JSFiddle Remove 上试一试，并在 Google Chrome 中添加该样式：

**之前：** -http : [//jsfiddle.net/JoshSalway/jw6Qy/](http://jsfiddle.net/JoshSalway/jw6Qy/)

**之后：** -http : [//jsfiddle.net/JoshSalway/cMbTB/](http://jsfiddle.net/JoshSalway/cMbTB/)

```
select{
  -webkit-appearance: none;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-12T12:12:26.087

**<select> 标签是顽固的生物，但有*办法*。**

如果标签中有“大小”参数，则几乎所有 CSS 都会适用。使用这种技术，我创建了一个实际上等同于普通选择标签的小提琴，而且可以像可视语言中的 ComboBox 一样手动编辑该值（除非您将*readonly*放在输入标签中）。

所以这里有一个最小的例子来了解背后的原理：（
*你需要 jQuery 来实现点击机制）*：

```
<style>

    /* only these 2 lines are truly required */
    .stylish span {position:relative;}
    .stylish select {position:absolute;left:0px;display:none}

    /* now you can style the hell out of them */
    .stylish input    { ... }
    .stylish select   { ... }
    .stylish option   { ... }
    .stylish optgroup { ... }

</style>
...
<div class="stylish">
    <label> Choose your superhero: </label>
    <span>
        <input onclick="$(this).closest('div').find('select').slideToggle(110)">
        <br>
        <select size=15 onclick="$(this).hide().closest('div').find('input').val($(this).find('option:selected').text());">

            <optgroup label="Fantasy"></optgroup>
            <option value="gandalf">Gandalf</option>
            <option value="harry">Harry Potter</option>
            <option value="jon">Jon Snow</option>

            <optgroup label="Comics"></optgroup>
            <option value="tony">Tony Stark</option>
            <option value="steve">Steven Rogers</option>
            <option value="natasha">Natasha Romanova</option>

        </select>
    </span>
</div> 
```

这是更多样式的小提琴： [https ://jsfiddle.net/dkellner/7ac9us70/](https://jsfiddle.net/dkellner/7ac9us70/)

希望这可以帮助！

# filepicker.io - FilePicker.io 安全性 - 使用策略和签名策略时是否需要 API 密钥

> ID：15824366
> 
> 赞同：1
> 
> 时间：2013-04-05T01:16:14.390
> 
> 标签：filepicker.io

我有一个关于使用 Pick Widget 的安全问题。

我曾假设如果我提供了 data-fp-signature 和 data-fp-policy，我就不需要提供 API 密钥。

当我不提供 API 密钥时，我收到以下 JavaScript 错误“未捕获的 FilepickerException：找不到 API 密钥”

我已验证我生成的策略和签名策略与 filepicker.io 测试工具相匹配。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T05:55:29.983

API 密钥对于让 Filepicker.io 知道你是谁是必要的 - 策略和签名是验证你是你所说的人的方式，但你必须首先用你的 API 密钥表明你是谁（例如，以便我们查找您的安全秘密并验证签名哈希是否正确）

# authentication - WebApi - 注册后才能访问 CurrentUserId？

> ID：15824370
> 
> 赞同：0
> 
> 时间：2013-04-05T01:17:02.727
> 
> 标签：authentication, asp.net-mvc-4, asp.net-web-api

我有以下内容：

```
public HttpResponseMessage Register(RegisterModel model)
        {
            if (ModelState.IsValid)
            {
                    // Attempt to register the user
                    try
                    {
                        WebSecurity.CreateUserAndAccount(model.UserName, model.Password);
                        WebSecurity.Login(model.UserName, model.Password);
                        InitiateDatabaseForNewUser(model.UserName);

                        FormsAuthentication.SetAuthCookie(model.UserName, createPersistentCookie: false);

                        return Request.CreateResponse(HttpStatusCode.Created, WebSecurity.CurrentUserId); 
```

在此代码中，CurrentUserId（在最后）始终解析为 -1，因为 WebSecurity 直到方法关闭后才能看到新用户。我想从 Register() 方法返回个人资料或至少返回新注册用户的 id - 这如何实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T13:07:48.607

您应该能够像这样获取用户的 ID：

```
WebSecurity.GetUserId(model.UserName) 
```

# uml - UML 中依赖连接器的方向重要吗？

> ID：15824376
> 
> 赞同：0
> 
> 时间：2013-04-05T01:17:37.667
> 
> 标签：uml

我遇到了几个依赖关系的例子，例如包含、扩展，但它完全令人困惑。一个例子表明`include`应该朝着以下方向发展；

```
user profile --> login 
```

虽然`extends`应该是方向；

```
validate credit card <-- print receipt. 
```

鉴于`required`应该朝着的方向；对于我的一生，我不明白为什么这不能成为`include`

```
place order --> create account 
```

它们的构造方式也很重要，即

```
user profile --> login (include)

      **vs**

validate credit card (extend)
       ^
       |
       |
       |
  print receipt 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T17:10:58.317

我不确定我是否完全理解您问题的每个部分，但我们开始吧：

包含从包含到包含。它表示用例的强制子部分：

```
including -----------> included
          <<include>> 
```

扩展与包含相同，但子部分不是强制性的。不幸的是，箭头正好相反。这似乎让你很困惑。

```
including <----------- optionnally included
            <<extend>> 
```

当您谈到必需时，我想它是一个匿名的虚线箭头？事实上，这样的依赖可以写成任何东西，用例与否。这对于用例来说并不常见，但这可能意味着一个用例有另一个用例作为先决条件。与 include 的区别在于它不是子部分。在这种情况下，它是这样绘制的。

```
requiring -----------> required 
```

在您的示例中，似乎要下订单，您必须创建一个帐户（确实合乎逻辑）。但是帐户创建不是下订单的子部分，因此它不是包含。

至于您的最后一个问题，您是在谈论垂直/水平吗？如果是这样，那么在 UML 中就没有关系了。其实定位没有规则，唯一的规则就是保持清晰。

# java - ActionListener - 跟踪是否在 actionPerformed 方法中调用 actionPerformed？

> ID：15824379
> 
> 赞同：1
> 
> 时间：2013-04-05T01:17:45.957
> 
> 标签：java, swing, event-handling, actionlistener

假设我有一个带有 SelectPieceListener 的“选择”JButton。我想检查是否再次执行操作（单击选择按钮）。但是，actionPerformed 是无效的，所以我不能将它用作布尔表达式。

有没有办法做到这一点？还是使用另一个 JButton 来处理这个更好？

谢谢你。

```
public class SelectPieceListener implements ActionListener {
    @Override
    public void actionPerformed(ActionEvent e) {
        if(c == _st.checkMoveImpossible()) {
            System.out.println("No possible move for "+nextPlayer+": click select to skip turn, " +
                    "or click right to move " + t + " pieces.");

            if(**the action is performed**){_board.setcmi(1);}
            _board.update();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T02:29:13.663

您想知道选择按钮是否已经被点击过一次 (1) 吗？或者你想确保 actionPerformed 方法不被递归调用 (2)？

(1) 只需向 SelectPieceListener 添加一个名为“selectPressed”（或其他）的布尔字段，并在调用 actionPerformed 时将其设置为 true。

(2) 不用担心，您似乎没有手动调用它。

# vb.net - 需要在 linq vb.net 中进行 Sum IIF 查询

> ID：15824380
> 
> 赞同：-2
> 
> 时间：2013-04-05T01:17:50.740
> 
> 标签：vb.net

我是 linq 的新手，我需要在 vb.net 中从数据表中使用 linq 进行此查询

如果每列对查询有用，则将其设置为 VAR CHAR：

```
SELECT Sum(IIf([ColumnNameToCountValues] IN 
    ('value1','value2','value3') 
     And [EmployeId] Like '[IDvalue]' 
     And [PROJECT] LIKE '[ProjectName]',1,0)) 
    AS Total FROM [DatatableName]; 
```

此查询应返回一个整数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T04:37:33.263

您的错误在哪里，您的问题是什么，您尝试过什么？从你所说`"This query should return an integer."`的可能是你的输出有错误，不是吗？那么，为什么不将数据库列数据类型更改为`INT`

# ios - 无需进入设置即可登录 twitter IOS（如 instagram）

> ID：15824381
> 
> 赞同：4
> 
> 时间：2013-04-05T01:17:53.143
> 
> 标签：ios, twitter, acaccount, slrequest

我在 Twitter 与 IOS 的集成方面比较新

所以，我对此表示怀疑。

我在网络上的许多示例中看​​到，当您没有在 twitter 中连接帐户时，您只需显示一个警报并将用户重定向到设置以登录 twitter 帐户。

如何制作像 instagram 这样的登录表单？用户可以在哪里插入用户名和密码并提交？

我的代码现在是这样的：

```
accountStore = [[ACAccountStore alloc] init];
ACAccountType *twitterType = [accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter];

// Request access from the user to use their Twitter accounts.
[accountStore requestAccessToAccountsWithType:twitterType options:nil completion:^(BOOL granted, NSError *error) {
      if (granted == YES){
      //get accounts to use.
      accounts = [accountStore accountsWithAccountType:twitterType];
      if ([accounts count] > 0) NSLog(@"account: %@", accounts);
      }else{
         // show alert to inser user_name and password to login on twitter
         alertTwitterAccount = [[UIAlertView alloc]
                                      initWithTitle:@"Enter with your twitter account"
                                            message:nil
                                           delegate:self
                                  cancelButtonTitle:@"Cancel"
                                  otherButtonTitles:@"Login", nil];
         [alertTwitterAccount setAlertViewStyle:UIAlertViewStyleLoginAndPasswordInput];
         [[alertTwitterAccount textFieldAtIndex:0] setPlaceholder:@"User"];
         [alertTwitterAccount setDelegate:self];
         [alertTwitterAccount setTag:1];
         [alertTwitterAccount show];
      }
}]; 
```

任何人都有一些例子或知道如何使用 SLRequest 或 ACAccount 来做到这一点？

谢谢

# ruby-on-rails - Rails：获取属于模型的所有资产

> ID：15824385
> 
> 赞同：0
> 
> 时间：2013-04-05T01:18:16.263
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个品牌模型，它有很多资产：

```
class Brand < ActiveRecord::Base
  attr_accessible :name, :logo1, :logo2, :colour1, :colour2, :prices_attributes

  has_attached_file :logo1
  has_attached_file :logo2

  has_many :users
  has_many :welcome_messages
  has_many :silos
  has_many :articles, :through => :silos
  has_many :libraries
  has_many :covers, :through => :libraries
  has_many :products
  has_many :prices, :through => :products, :autosave => true, :dependent => :destroy

  accepts_nested_attributes_for :prices

end 
```

有没有一种快速的方法来获得分配给每个品牌的所有资产？还是我必须为每个人做类似的事情`brand.articles.each do |article| ...`？

干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T01:22:40.963

如果您想预先加载所有关联，您可以执行以下操作：

```
def self.all_associations
  includes(:users, :articles, :prices, :products) #and any other association
end 
```

然后你可以运行`Brand.all_associations`或`Brand.all_associations.find(1)`

正如 jvnill 所写，这将导致 n 个数据库查询，因此在上面的示例中为 5 个数据库查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T05:11:30.220

进一步 mind.blank 的解决方案，如果您不想重复自己，您可以进一步简化事情：

```
def self.all_associations
  includes *reflect_on_all_associations.collect(&:name)
end 
```

# jquery - 从 textarea 中返回包含元素的内容

> ID：15824387
> 
> 赞同：1
> 
> 时间：2013-04-05T01:18:24.283
> 
> 标签：jquery

我想制作一个脚本来提取我定义的元素中的所有内容。在这个例子中，它是`<u>`元素。

**HTML**

```
<textarea cols="75" rows="25" id="textShit"><u>sd</u></textarea><br>
    <input type="submit" name="submit" id="submit"/>
    <div id="res"></div> 
```

**JS**

```
$(function(){
    $('#submit').on('click',function(){
        $('textarea:contains("u")').each(function() {
            //$('#res').html($(this).val()+'<br>');
            alert($(this).val());
        })
    });
}); 
```

我想当我点击提交时，`<div class="res">` 它会返回 every 里面的内容`<u>`。

如何做到这一点？

[http://jsfiddle.net/warface/Ewve8/](http://jsfiddle.net/warface/Ewve8/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T01:28:09.480

```
$(function () {
    $('#submit').on('click', function () {
        var val = $.trim( $('textarea').val() );
        var text = $('<div/>').html(val).find('u').text();
        // console.log(text);
    })
}); 
```

[http://jsfiddle.net/Ewve8/1/](http://jsfiddle.net/Ewve8/1/)

更新：您可以使用`map`方法并加入返回数组的元素：

```
$('#submit').on('click', function () {
    var val = $.trim( $('textarea').val() ),
        text = $('<div/>').html(val).find('u').map(function(){
            return $(this).text();
        }).get();

    $('.res').html( text.join('<br>') ); 
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T01:26:35.377

你很亲密。一方面，您没有在小提琴中包含 jQuery 库。

只需将您的 textare 内容加载到 jQuery 对象中，它就会被解析。然后你可以使用`.filter('u')`来获取你想要的内容：

```
var html = $($(this).val());
$('#res').html(html.filter('u').html()); 
```

演示：http: [//jsfiddle.net/QhsDY/](http://jsfiddle.net/QhsDY/)

一个“陷阱”是它`.filter()`只会返回顶级元素，所以如果`<u>`嵌套它就行不通。解决方法是使用`.find()`，但诀窍是`.find()`不会查看顶级元素。因此，将内容包装在 a 中`div`，然后使用`.find()`：

```
var html = $('<div/>').html($(this).val());
$('#res').html(html.find('u').html()); 
```

演示：http: [//jsfiddle.net/QhsDY/1/](http://jsfiddle.net/QhsDY/1/)

至于多个`<u>`元素，请使用`.each()`：

```
var html = $('<div/>').html($(this).val());

html.find('u').each(function() {
    $('#res').append($(this).html()+'<br>');
}); 
```

演示：http: [//jsfiddle.net/QhsDY/2/](http://jsfiddle.net/QhsDY/2/)

# database - 使用 SQLite3 从 Perl 在数据库中创建表

> ID：15824392
> 
> 赞同：-2
> 
> 时间：2013-04-05T01:19:07.410
> 
> 标签：database, perl, sqlite, cpan, dbi

我在使用 dbi sqlite3 使用 Perl 创建的数据库中创建表时遇到问题。使用下面的代码，我希望该表包含端口探测器，每个源 ip 和端口一行。我不知道我是否做得正确，下面的代码由于某种原因不起作用，任何帮助将不胜感激。我的代码如下。

```
#!/usr/bin/perl

use strict;
use DBI;

my $dbh = DBI->connect(          
    "dbi:SQLite:dbname=test.db", 
    "",
    "",
    { RaiseError => 1}
) or die $DBI::errstr;

$dbh->do(CREATE TABLE probes (
  source CHAR(15) NOT NULL,
  port CHAR(5) NOT NULL,
  PRIMARY KEY (source,port)) );

$dbh->disconnect(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T02:07:31.753

您忘记将论点引用到`$dbh->do`. 有[很多](http://search.cpan.org/perldoc?perlop#Quote-Like_Operators)方法可以做到这一点。

```
$dbh->do( "CREATE TABLE probes ( ..." );
$dbh->do( 'CREATE TABLE probes ( ...' );
$dbh->do( qq[ CREATE TABLE probes ( ... ] );
$dbh->do( <<"END_SQL" );
CREATE TABLE probes (
   ...
END_SQL 
```

**补充：**要解决此问题，您只需在`$dbh->do`函数调用中的内容周围加上引号。

```
$dbh->do("CREATE TABLE probes (
  source CHAR(15) NOT NULL,
  port CHAR(5) NOT NULL,
  PRIMARY KEY (source,port))"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T01:32:35.133

您还应该`use warnings`在每个程序的顶部都有。

您需要为该`do`方法提供一个 SQL 字符串。通常使用*here 文档*来编写多行字符串，如下所示。

```
$dbh->do(<<'END_SQL');
CREATE TABLE probes (
    source CHAR(15) NOT NULL,
    port CHAR(5) NOT NULL,
    PRIMARY KEY (source, port) )
END_SQL 
```

请注意，该`END_SQL`行不能在行首或行尾包含*任何*空格。

# php - php代码没有改变标题

> ID：15824393
> 
> 赞同：0
> 
> 时间：2013-04-05T01:19:22.917
> 
> 标签：php

它给了我这个而不是改变标题：

> 警告：无法修改标头信息 - 第 24 行 /home/content/27/10711827/html/contact.php 中的标头已由（输出开始于 /home/content/27/10711827/html/contact.php:2）发送

这是代码。

```
<?php

if (empty($_POST) === false){
  $errors = array();
  $name = $_POST['name'];
  $email = $_POST['email'];
  $message = $_POST['message'];

  if (empty($name) === true || empty($email) === true || empty($message) === true){
    $error[] = 'Name, email and message is required!';
  } else{
    if (filter_var($email, FILTER_VALIDATE_EMAIL) === false){   
      $errors[] = 'That\'s not a valid email address';
    }
    if (ctype_alpha($name) === false){
      $errors[] = 'Name must only cotain letters';
    }

  }

  if(empty($errors) === true){
    mail('houseblendrecords@gmail.com', 'Contact form', '$message', 'From: ' . $email);
    header('Location: contact.php?sent');
    exit();
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T01:22:08.217

当您的代码在您尝试发送标头时已经产生了一些内容时，就会发生这种情况。确保您的代码没有产生任何警告。如果您确定不是这种情况，请确保在开始 <?php 标记之前没有任何空行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T01:30:37.440

如果在开始标记之前的空白不是问题，`<?php`还请检查您的文件编码。如果您的文件保存为 UTF-8，请确保将它们保存为不带 bom 的 UTF-8，否则将其重新保存为 ANSI。

# c - 为什么读取不起作用但 fgets 在我的程序中工作正常？

> ID：15824397
> 
> 赞同：2
> 
> 时间：2013-04-05T01:20:03.880
> 
> 标签：c, cygwin, system-calls, fgets

所以我的程序的特定部分如下所示：

```
printf("Please input command:\n>");
While 1 {
    if ((int c = read(STDIN_FILENO, input, Buffer_size) == 0) {
        break;
    }
    rest of the program uses strtok to break the input 
    down and store in array. Then pass it to a function which checks for 
    various commands and prints whatever was the command 
    suppose to do or gives syntax error for incorrect commands

    printf(">"); //last line

} 
```

所以这就是发生的事情：

```
Please input command:
addperson Batman
>person added
blahblah
Error: incorrect syntax 
```

由于某种原因，它不打印：“>”。同样，每次我输入任何内容后，即使使用正确的命令，它也会说同样的话。

但如果我使用这个：

```
printf("Please input command:\n>");
while 1 {
    if (fgets(input, Buffer_size, stdin) == NULL) {
        break;
    }
    ...
    printf(">");

} 
```

我得到：

```
Please input command:
> add_person Batman
person added
> blahbagwa
Incorrect syntax
> add_person Superman
person added 
```

注意“>”如何出现在每个输出中？我真的不知道为什么 read 不能正常工作；也许我对阅读的理解不是很好。有谁有想法吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-05T01:26:08.613

`read()`将阻塞，直到它收到足够的输入来填充整个缓冲区，其中`fgets()`将为每个输入的行返回一个缓冲区。

# matlab - 如何组合多个阻带滤波器的滤波器系数 - Matlab

> ID：15824401
> 
> 赞同：4
> 
> 时间：2013-04-05T01:20:50.513
> 
> 标签：matlab, filter, signal-processing

我想将几个阻带滤波器组合成一个滤波器，以了解当移除多个波段时滤波器如何改变相位。

这个[问题](https://stackoverflow.com/questions/10474043/how-can-i-turn-an-fir1-stop-band-filter-into-a-multiple-stop-band-filter)提供了两个滤波器的解决方案，但是如果有两个以上的滤波器频带怎么办？

这是一张显示每个单独滤波器的增益和相位的图像。

所以我的问题是：

1.  如果我在五个单独的操作中过滤数据，该阶段会发生什么
2.  我可以将过滤步骤合并为一个步骤吗？

我在 Matlab 中使用了 butter 和 freqz 函数。

```
[b,a] = butter(order,cutoff/(fs/2),'high');
[h,w] = freqz(b,a,fs); 
```

谢谢。

![在此处输入图像描述](https://i.stack.imgur.com/WPep3.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T00:22:24.857

相位和幅度 (dB) 将相加。如果你想在 Matlab 上看到你需要[级联](http://www.mathworks.com/help/signal/ref/dfilt.cascade.html)过滤器，例如：

```
% computes the coefficients
[b1,a1]=butter(8,0.6);          
[b2,a2]=butter(8,0.4,'high');   
[b3,a3]=butter(8,0.2,'high');   
% creates the filters
H1=dfilt.df2t(b1,a1);
H2=dfilt.df2t(b2,a2);
H3=dfilt.df2t(b3,a3);
% creates the cascate filter
Hcas=dfilt.cascade(H1,H2,H3)   
% plot    
Hcas.freqz() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T05:07:11.673

1.  在卷积阶段效应累积，总相位效应是所有滤波器的相位效应之和

2.  是的，你只需要将它们全部卷积以获得新的过滤器： conv(conv(filter1,filter2),filter3)

# android - 如何调试nexus 10？需要usb充电器但需要usb连接调试

> ID：15824404
> 
> 赞同：2
> 
> 时间：2013-04-05T01:20:59.587
> 
> 标签：android, usb, galaxy-nexus, usb-debugging

有没有人找到一个很好的解决方案来调试星系联结，因为它得到了权力？

我只能在连接到我的计算机时调试和使用 nexus 10。我只能在将 nexus 10 插入墙壁时为其充电。

它是从 USB 充电的，所以我应该怎么做才能让设备生根并使用 ADB 连接到它的 IP 地址？

他们做电缆吗？有没有办法通过 USB 插槽发送更多放大器？USB集线器可以工作吗？

什么，什么？这真是一场噩梦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T19:24:05.037

我看到您倾向于硬件解决方案，但我的回答更像是我正在使用的一种解决方法：我假设您的大部分调试都是在模拟器上进行的，但是如果您只需要知道在 nexus 10 上导致您的应用程序崩溃的原因，**也许您可以尝试 ACRA**来获取堆栈跟踪。我发现它非常有用，因为我无法测试所有设备和所有版本，而且我的 IDE 位于没有 USB 支持的 VM 上……我称之为“穷人调试”。更多关于这篇文章：[android - 如何发送崩溃报告](https://stackoverflow.com/questions/10815049/android-how-to-send-crash-reports "android - 如何发送崩溃报告")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T01:24:12.867

如果是我，我会得到两根 USB 电缆（一根 Nexus 10 电缆和另一根 USB-USB 电缆）并将电源线从一根连接到 Nexus 10 电缆。这样，您就可以将 Nexus 10 电缆从计算机插入 Nexus 10，并将另一根电缆从壁式充电器插入。

当然，您必须对此感到自在，并确保您的焊接。

编辑 1：我还应该注意，您可能希望查看 Nexus 10 侧面的 POGO 引脚。我相信这些引脚可用于为设备充电（我相信一点谷歌搜索会证实这一点）。您可以查看是否有任何可用于充电的坞站（几个月前我上次检查时还没有），从而使 USB 连接免费。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T16:45:34.273

如果您不介意 root 您的设备，或者已经这样做了。ADB over WIFI 可能是一种选择。您可以在这篇文章中找到 ADB over TCP 的说明： [如何使用 ADB over TCP 连接到 Android？](https://stackoverflow.com/questions/2604727/how-can-i-connect-to-android-with-adb-over-tcp)

# asp.net - 将会话变量传递给 SQLDataSource 时出错

> ID：15824407
> 
> 赞同：5
> 
> 时间：2013-04-05T01:21:05.090
> 
> 标签：asp.net, vb.net, session, sql-server-2012, sqldatasource

我正在尝试运行**Project.aspx**。Admin.apsx，当单击“查看配置文件”按钮时，应该创建一个会话“project_id”，因此两个 SQLDataSources 从 Session(“project_id”) 中获取 project_id 值。

我收到此错误：

![错误](https://i.stack.imgur.com/ONZoJ.png)

**项目.aspx**

```
<%@ Page Title="" Language="VB" MasterPageFile="~/MasterPage.master" AutoEventWireup="false" CodeFile="Project.aspx.vb" Inherits="Project" %>

<%@ Register assembly="System.Web.DataVisualization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" namespace="System.Web.UI.DataVisualization.Charting" tagprefix="asp" %>

<asp:Content ID="Content3" ContentPlaceHolderID="ContentPlaceHolder1" Runat="Server">
    <div id="project-image"><asp:Image ID="Image1" runat="server" Height="124px" Width="93px" />
        <asp:FormView ID="frmViewProject" runat="server" DataKeyNames="project_id" DataSourceID="SqlDataSource1" HorizontalAlign="Justify">
            <EditItemTemplate>
                project_id:
                <asp:Label ID="project_idLabel1" runat="server" Text='<%# Eval("project_id") %>' />
                <br />
                project_type:
                <asp:TextBox ID="project_typeTextBox" runat="server" Text='<%# Bind("project_type") %>' />
                <br />
                project_start:
                <asp:TextBox ID="project_startTextBox" runat="server" Text='<%# Bind("project_start") %>' />
                <br />
                project_finish:
                <asp:TextBox ID="project_finishTextBox" runat="server" Text='<%# Bind("project_finish") %>' />
                <br />
                project_duration:
                <asp:TextBox ID="project_durationTextBox" runat="server" Text='<%# Bind("project_duration") %>' />
                <br />
                project_budget:
                <asp:TextBox ID="project_budgetTextBox" runat="server" Text='<%# Bind("project_budget") %>' />
                <br />
                project_cost:
                <asp:TextBox ID="project_costTextBox" runat="server" Text='<%# Bind("project_cost") %>' />
                <br />
                project_name:
                <asp:TextBox ID="project_nameTextBox" runat="server" Text='<%# Bind("project_name") %>' />
                <br />
                <asp:LinkButton ID="UpdateButton" runat="server" CausesValidation="True" CommandName="Update" Text="Update" />
                &nbsp;<asp:LinkButton ID="UpdateCancelButton" runat="server" CausesValidation="False" CommandName="Cancel" Text="Cancel" />
            </EditItemTemplate>
            <EditRowStyle BorderStyle="Solid" Font-Bold="False" Font-Names="Verdana" Font-Overline="False" Font-Size="Small" HorizontalAlign="Right" VerticalAlign="Middle" />
            <InsertItemTemplate>
                project_type:
                <asp:TextBox ID="project_typeTextBox" runat="server" Text='<%# Bind("project_type") %>' />
                <br />
                project_start:
                <asp:TextBox ID="project_startTextBox" runat="server" Text='<%# Bind("project_start") %>' />
                <br />
                project_finish:
                <asp:TextBox ID="project_finishTextBox" runat="server" Text='<%# Bind("project_finish") %>' />
                <br />
                project_duration:
                <asp:TextBox ID="project_durationTextBox" runat="server" Text='<%# Bind("project_duration") %>' />
                <br />
                project_budget:
                <asp:TextBox ID="project_budgetTextBox" runat="server" Text='<%# Bind("project_budget") %>' />
                <br />
                project_cost:
                <asp:TextBox ID="project_costTextBox" runat="server" Text='<%# Bind("project_cost") %>' />
                <br />
                project_name:
                <asp:TextBox ID="project_nameTextBox" runat="server" Text='<%# Bind("project_name") %>' />
                <br />
                <asp:LinkButton ID="InsertButton" runat="server" CausesValidation="True" CommandName="Insert" Text="Insert" />
                &nbsp;<asp:LinkButton ID="InsertCancelButton" runat="server" CausesValidation="False" CommandName="Cancel" Text="Cancel" />
            </InsertItemTemplate>
            <InsertRowStyle HorizontalAlign="Center" VerticalAlign="Middle" />
            <ItemTemplate>
                project_id:
                <asp:Label ID="project_idLabel" runat="server" Text='<%# Eval("project_id") %>' />
                <br />
                project_type:
                <asp:Label ID="project_typeLabel" runat="server" Text='<%# Bind("project_type") %>' />
                <br />
                project_start:
                <asp:Label ID="project_startLabel" runat="server" Text='<%# Bind("project_start") %>' />
                <br />
                project_finish:
                <asp:Label ID="project_finishLabel" runat="server" Text='<%# Bind("project_finish") %>' />
                <br />
                project_duration:
                <asp:Label ID="project_durationLabel" runat="server" Text='<%# Bind("project_duration") %>' />
                <br />
                project_budget:
                <asp:Label ID="project_budgetLabel" runat="server" Text='<%# Bind("project_budget") %>' />
                <br />
                project_cost:
                <asp:Label ID="project_costLabel" runat="server" Text='<%# Bind("project_cost") %>' />
                <br />
                project_name:
                <asp:Label ID="project_nameLabel" runat="server" Text='<%# Bind("project_name") %>' />
                <br />

            </ItemTemplate>
            <RowStyle BorderStyle="None" HorizontalAlign="Left" VerticalAlign="Middle" />
        </asp:FormView>
        <asp:Chart ID="chrtComplete" runat="server" DataMember="DefaultView" DataSourceID="SqlDataSource2" EnableViewState="True">
            <series>
                <asp:Series ChartType="Pie" Legend="Completed" Name="Series1" XValueMember="project_start" YValueMembers="project_finish">
                </asp:Series>
            </series>
            <chartareas>
                <asp:ChartArea Name="ChartArea1">
                </asp:ChartArea>
            </chartareas>
            <Legends>
                <asp:Legend LegendStyle="Row" Name="Completed">
                </asp:Legend>
            </Legends>
            <Titles>
                <asp:Title Name="Project Completion">
                </asp:Title>
            </Titles>
        </asp:Chart>
        <asp:SqlDataSource ID="SqlDataSource2" runat="server" ConnectionString="<%$ ConnectionStrings:ConnStringDb1 %>" SelectCommand="SELECT [project_start], [project_finish] FROM [projects] WHERE ([project_id] = @project_id)">
            <SelectParameters>
                <asp:SessionParameter Name="project_id" SessionField="project_id" Type="Int32" />
            </SelectParameters>
        </asp:SqlDataSource>
    </div>
    <div id="project-info">
        <asp:SqlDataSource ID="SqlDataSource1" runat="server" ConnectionString="<%$ ConnectionStrings:ConnStringDb1 %>" SelectCommand="SELECT [project_id], [project_type], [project_start], [project_finish], [project_duration], [project_budget], [project_cost], [project_name] FROM [projects] WHERE ([project_id] = @project_id)">
            <SelectParameters>
                <asp:SessionParameter Name="project_id" SessionField="project_id" Type="Int32" />
            </SelectParameters>
        </asp:SqlDataSource>
    </div>
&nbsp;
    <br />
</asp:Content> 
```

**管理员.aspx**

```
Imports System.Data.SqlClient

Partial Class Admin
    Inherits System.Web.UI.Page

    Protected Sub btnSearchUser_Click(sender As Object, e As EventArgs) Handles btnSearchUser.Click

        Dim conn As New SqlConnection("Data Source=BRIAN-PC\SQLEXPRESS;Initial Catalog=master_db;Integrated Security=True")
        Dim searchComm As String = "SELECT username FROM users WHERE CONTAINS (username, @username)"

        Dim searchSQL As New SqlCommand

        conn.Open()

        searchSQL = New SqlCommand(searchComm, conn)
        searchSQL.Parameters.AddWithValue("@username", txtUserSearch.Text)

        Dim datareader As SqlDataReader = searchSQL.ExecuteReader()

        While datareader.Read

            lstUsers.Items.Add(datareader.Item("username"))

        End While

        datareader.Close()
        conn.Close()

    End Sub

    Protected Sub Page_Load(sender As Object, e As EventArgs) Handles Me.Load

    End Sub

    Protected Sub DropDownList1_SelectedIndexChanged(sender As Object, e As EventArgs) Handles drpProjects.SelectedIndexChanged

        Dim conn As New SqlConnection("Data Source=BRIAN-PC\SQLEXPRESS;Initial Catalog=master_db;Integrated Security=True")
        Dim sqlComm As String = "SELECT project_name FROM projects WHERE project_name=@projectname"
        Dim sqlProjname As New SqlCommand

        conn.Open()

        sqlProjname = New SqlCommand(sqlComm, conn)
        sqlProjname.Parameters.AddWithValue("@projectname", drpProjects.SelectedItem.Text)
        Dim datareader As SqlDataReader = sqlProjname.ExecuteReader()
        datareader.Read()

        If datareader.HasRows Then

            lblProjName.Text = datareader("project_name").ToString()
        End If

        datareader.Close()
        conn.Close()

        lblProjName.Visible = True
        grdProjDetails.Visible = True

    End Sub

    Protected Sub btnManageProj_Click(sender As Object, e As EventArgs) Handles btnManageProj.Click

        MultiView1.SetActiveView(View2)

    End Sub

    Protected Sub btnProjSettings_Click(sender As Object, e As EventArgs) Handles btnProjSettings.Click

        Dim conn2 As New SqlConnection("Data Source=BRIAN-PC\SQLEXPRESS;Initial Catalog=master_db;Integrated Security=True")
        Dim sqlComm2 As String = "SELECT project_id FROM projects WHERE project_name=@projectname"
        Dim sqlProjID As New SqlCommand

        conn2.Open()

        sqlProjID = New SqlCommand(sqlComm2, conn2)
        sqlProjID.Parameters.AddWithValue("@projectname", drpProjects.SelectedItem.Text)
        Dim datareader As SqlDataReader = sqlProjID.ExecuteReader()
        datareader.Read()

        If datareader.HasRows Then

            Dim UserID As String
            UserID = datareader("project_id").ToString

            Session("project_id") = UserID
            Server.Transfer("Project.aspx", True)

        End If

        datareader.Close()
        conn2.Close()

    End Sub
End Class 
```

**母版页.aspx**

```
<%@ Master Language="VB" CodeFile="MasterPage.master.vb" Inherits="MasterPage" %>
<%@ Import Namespace="System.Data.SqlClient" %>
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<script runat="server">

    Protected Sub Page_Load(sender As Object, e As EventArgs)

        If Session("userid") = Nothing Then
            txtLoginUser.Visible = True
            txtLoginPass.Visible = True

        Else

            Dim conn As New SqlConnection("Data Source=BRIAN-PC\SQLEXPRESS;Initial Catalog=master_db;Integrated Security=True")
            Dim useridComm As String = "SELECT name, surname FROM users WHERE user_id=@userid"
            Dim sqlUserID As New SqlCommand

            conn.Open()

            Dim userid As String = Session("userid")

            sqlUserID = New SqlCommand(useridComm, conn)
            sqlUserID.Parameters.AddWithValue("@userid", userid)
            Dim datareader As SqlDataReader = sqlUserID.ExecuteReader()
            If datareader.HasRows Then

                FormsAuthentication.RedirectFromLoginPage(datareader("user_id"), True)
                lblLoggedIn.Text = datareader("name").ToString() & " " & datareader("surname").ToString()

            End If
            datareader.Close()
            conn.Close()

        End If
    End Sub

   Protected Sub Button1_Click(sender As Object, e As EventArgs)

        Dim loginSQL As New SqlCommand
        Dim loginComm As String

        Dim CommonFunctions As New CommonFunctions()
        Dim dec_pass As String = CommonFunctions.EncryptPassword(txtLoginPass.Text.Trim)

        Dim conn As New SqlConnection("Data Source=BRIAN-PC\SQLEXPRESS;Initial Catalog=master_db;Integrated Security=True")

        loginComm = "SELECT user_id FROM users WHERE username=@username and password=@password"

        conn.Open()

        loginSQL = New SqlCommand(loginComm, conn)
        loginSQL.Parameters.AddWithValue("@username", txtLoginUser.Text.ToString)
        loginSQL.Parameters.AddWithValue("@password", dec_pass)
        Dim dr As SqlDataReader = loginSQL.ExecuteReader()
        dr.Read()

        If dr.HasRows Then
            Session("userid") = dr("user_id")
        ElseIf dr.HasRows = False Then

            lblRegister.ForeColor = Drawing.Color.Red
            lblRegister.Text = "Incorrect Username/Password."
        End If
        dr.Close()
        conn.Close()

    End Sub

</script>

<head>
    <meta charset="utf-8" />
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <title></title>
    <meta name="keywords" content="" />
    <meta name="description" content="" />
    <link rel="stylesheet" href="style.css" type="text/css" media="screen, projection" />
</head>

<body>

    <form id="form1" runat="server">

<div id="wrapper">

    <header id="header">
        <strong>Header:</strong> Mobile CMS

        </header>

<section id="login">

    <div id="login-form">

         <p>

                    <asp:Label ID="lblUsername" runat="server" Font-Bold="True" Text="U:"></asp:Label>
&nbsp;<asp:TextBox ID="txtLoginUser" runat="server" BorderStyle="None" BorderWidth="0px" Wrap="False"></asp:TextBox>
&nbsp;
                    <asp:Label ID="lblUsername0" runat="server" Font-Bold="True" Text="P:"></asp:Label>
                    <asp:TextBox ID="txtLoginPass" runat="server" BorderStyle="None" BorderWidth="0px" TextMode="Password" Wrap="False"></asp:TextBox>
&nbsp;
                    <asp:Button ID="btnLogin" runat="server" BorderStyle="None" OnClick="Button1_Click" Text="Login" />

                </p>

                <p>

                    <asp:Label ID="lblRegister" runat="server" Font-Bold="True" Font-Underline="True" ForeColor="#0000CC" Text="Register"></asp:Label>

                    <asp:Label ID="lblLoggedIn" runat="server"></asp:Label>

                </p>
         <p>

                    &nbsp;</p>

    </div>

</section>

<div class="navigation-bar">
       <ul class="navigation-menu">

            <li><a href="#" class="home">Home</a></li>
            <li><a href="#" class="mainsettings">Settings</a></li>
            <li><a href="#" class="profile">Profile</a>

                <ul>
                    <li><a href="#" class="messages">Messages</a></li>
                    <li><a href="#" class="settings">Profile Settings</a></li>
                </ul>

            </li>
            <li><a href="#" class="uploads">Uploads</a></li>
            <li><a href="#" class="documents">Media</a>

                <ul>
                    <li><a href="#" class="docs">Documents</a></li>
                    <li><a href="#" class="others">Others</a></li>
                </ul>

            </li>

            <li><a href="#" class="projects">Projects</a>

                <ul>
                    <li><a href="#" class="yprojects">Your Projects</a></li>
                    <li><a href="#" class="otherprojects">Other Projects</a></li>
                </ul>

            </li>

        </ul>

    </div>

    <section id="middle">

        <div id="container">
            <div id="content">
                <div>
                    <asp:ContentPlaceHolder id="ContentPlaceHolder1" runat="server">

                    </asp:ContentPlaceHolder>
                </div>
        </div>
        </div>

    </section>

    <footer id="footer">
        <strong>Footer:</strong> adsfdsgfds
    </footer>

</div>

    </form>

</body>
</html> 
```

截屏：![管理项目](https://i.stack.imgur.com/HFDjD.png)

怎么了？代码有什么问题？

我正在使用 VS 2012 Professional 和 SQL-Server 2012 Express

“查看配置文件”按钮的代码位于 btnProjSettings 下的 Admin.aspx 中：

```
 Protected Sub btnProjSettings_Click(sender As Object, e As EventArgs) Handles btnProjSettings.Click

        Dim conn2 As New SqlConnection("Data Source=BRIAN-PC\SQLEXPRESS;Initial Catalog=master_db;Integrated Security=True")
        Dim sqlComm2 As String = "SELECT project_id FROM projects WHERE project_name=@projectname"
        Dim sqlProjID As New SqlCommand

        conn2.Open()

        sqlProjID = New SqlCommand(sqlComm2, conn2)
        sqlProjID.Parameters.AddWithValue("@projectname", drpProjects.SelectedItem.Text)
        Dim datareader As SqlDataReader = sqlProjID.ExecuteReader()
        datareader.Read()

        If datareader.HasRows Then

            Dim UserID As String
            UserID = datareader("project_id").ToString

            Session("project_id") = UserID
            Server.Transfer("Project.aspx", True)

        End If

        datareader.Close()
        conn2.Close()

    End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T15:51:05.130

我相信您遇到的问题与在异步回发期间尝试重定向到另一个页面有关。

在您的`btnProjSettings_Click`事件处理程序中，替换：

```
Server.Transfer("Project.aspx", True) 
```

和：

```
Dim jsRedirect As String = "window.location.pathname = 'Project.aspx';"
ScriptManager.RegisterClientScriptBlock(Page, Page.GetType(), "Redirect to Project.aspx", jsRedirect, true) 
```

* * *

您收到该错误的原因是在异步回发期间，ASP.NET Ajax 库期望返回自定义消息，而不是标准 HTML 代码。反过来，当你调用 时`Server.Transfer`，服务器*会*返回指定页面的 HTML 代码；因此您看到的错误。

# c++ - 尝试创建指针数组时不允许不完整类型

> ID：15824408
> 
> 赞同：8
> 
> 时间：2013-04-05T01:21:07.077
> 
> 标签：c++, arrays, include

我创建了 2 个类，Branch 和 Account，我希望我的 Branch 类有一个 Account 指针数组，但我没有做到。它说“不允许不完整的类型”。我的代码有什么问题？

```
#include <string>
#include "Account.h"

using namespace std;

    class Branch{

    /*--------------------public variables--------------*/
    public:
        Branch(int id, string name);
        Branch(Branch &br);
        ~Branch();
        Account* ownedAccounts[];    // error at this line
        string getName();
        int getId();
        int numberOfBranches;
    /*--------------------public variables--------------*/

    /*--------------------private variables--------------*/
    private:
        int branchId;
        string branchName;
    /*--------------------private variables--------------*/
    }; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-05T01:25:09.860

尽管可以创建指向前向声明类的指针数组，但不能创建大小未知的数组。如果要在运行时创建数组，请创建一个指向指针的指针（当然也允许）：

```
Account **ownedAccounts;
...
// Later on, in the constructor
ownedAccounts = new Account*[numOwnedAccounts];
...
// Later on, in the destructor
delete[] ownedAccounts; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-05T01:25:30.390

你需要指定数组的大小......你不能让括号像这样悬空，里面没有任何东西。

# javascript - 如何使用 jQuery 验证 3 个选择元素？

> ID：15824413
> 
> 赞同：1
> 
> 时间：2013-04-05T01:21:48.560
> 
> 标签：javascript, jquery, validation

我正在尝试验证表单上的 3 个选择字段，我的应用程序是曲棍球记分应用程序，并且我正在录制得分比赛。A是得分手，B是主要助攻，C是次要助攻。我有以下验证规则：

1.  A 不能为空
2.  B 不能等于 A 或 C
3.  C 不能等于 A 或 B
4.  如果 B 为空，则 C 必须为空

所以换句话说，A、AB 或 ABC 是有效的组合，但都必须是唯一的。我通过将禁用的引导类/html 属性应用于提交按钮来禁用提交按钮。

在我的实际代码中，A = awayGoal，B = awayPAssist，C = awaySAssist

我目前有以下 jQuery 代码：

```
var awayGoal = $("#awayGoal");
var awayPAssist = $("#awayPAssist");
var awaySAssist = $("#awaySAssist");
var awayGSubmit = $("#submitAwayScore");

$('#awayScore select').change(function() {
if(awayGoal.val() != "" && awayPAssist.val() != awayGoal.val() && awayGoal.val() != awaySAssist.val()) {
    if(awayPAssist.val() != "" && awaySAssist.val() != "") {
        awayGSubmit.disableButton();
    }
    awayGSubmit.clearDisabled();
}
else {
    awayGSubmit.disableButton();
}
}); 
```

这允许唯一的 A + C 组合通过，但是，相同的 A + C 不会通过。每个选择元素都加载了参与游戏的玩家人数。还有第一个`option`是静态选项，称为 N/A，其代码是：`<option value="">N/A</option>`这允许管理员在主辅助和辅助辅助不存在的情况下拥有空的辅助辅助。

任何帮助将不胜感激，任何提高效率的方法都非常受欢迎，因为我刚刚开始使用 jQuery。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T01:46:50.537

由于您只有三个案例并且只有三个项目，您可以对每个条件进行强力检查，然后将它们组合在一起以确定按钮的禁用状态。

[JSBin 示例](http://jsbin.com/ivetop/2/edit)

```
var awayGoal = $("#awayGoal");
var awayPAssist = $("#awayPAssist");
var awaySAssist = $("#awaySAssist");
var awayGSubmit = $("#submitAwayScore");

$('#awayScore select').change(function() {
  var A = awayGoal.val();
  var B = awayPAssist.val();
  var C = awaySAssist.val();
  console.log(A,B,C);

  if(// case 1: only A 
     (A !== "" && B === "" && C === "") ||  

     // case 2: only A and B, A != B
     (A !== "" && B !== "" && C === "" && A !== B) || 

     // case 3: A, B, C, all unique
     (A !== "" && B !== "" && C !== "" && A !== B && A !== C && B !== C) ) { 

  //awayGSubmit.clearDisabled();
  console.log("enable button");
}
else {
    //awayGSubmit.disableButton();
    console.log("disable button");
}
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T01:37:49.527

我目前正在开发具有如此多的验证规则的系统。我尝试使用我自己构建的 jquery 进行验证，但是我必须考虑很多事情并且要编写很多代码。

我建议你尝试使用这个[jquery 验证引擎](https://github.com/posabsolute/jQuery-Validation-Engine)。您可以[在此处查看演示页面](http://www.position-relative.net/creation/formValidator/)它有很多功能，最有趣的部分是您可以定义自己的规则或验证。试试。

祝你好运。

# android - Android - 即使已加载图像也不会显示

> ID：15824420
> 
> 赞同：0
> 
> 时间：2013-04-05T01:22:50.860
> 
> 标签：android, android-layout, android-imageview

我设置了我的 imageview `layout width to a fix value`，`my layout height to wrapcontent`. imageview 的图像是通过 url 加载的。发生的事情是，当我的视图被绘制时，由于图像尚未加载，它只会绘制`layout_width`. 但是当图像已经加载时，不再绘制高度，因此不会显示图像。只有当我来回滚动时才会显示它，因为我猜那是视图将被重绘的时间。有没有办法解决这个问题？使用`invalidate()`无效。也许我做错了？

我将发布我的代码片段：这是扩展 BaseAdapter`getView`的**MyAdapter**：

```
 public View getView(int position, View convertView, ViewGroup parent){
    ViewHolder holder = null;

    LayoutInflater inflater = (LayoutInflater) context.getSystemService(Activity.LAYOUT_INFLATER_SERVICE);

    Typeface typeFaceMyriadReg = Typeface.createFromAsset(context.getAssets(), MYRIAD_REG);

    if(convertView == null){
        convertView = inflater.inflate(R.layout.shop_list_layout, null);
        holder = new ViewHolder();
        holder.txtShopName = (TextView) convertView.findViewById(R.id.name);
        holder.txtShopName.setTypeface(typeFaceMyriadReg);
        holder.txtShopDesc = (TextView) convertView.findViewById(R.id.desc);
        holder.txtShopDesc.setTypeface(typeFaceMyriadReg);
        holder.imageView = (ImageView) convertView.findViewById(R.id.prof_pic);
        holder.progBar = (ProgressBar) convertView.findViewById(R.id.img_progress);

        convertView.setTag(holder);
    }else{
        holder = (ViewHolder) convertView.getTag();
    }
        imageLoader=new ImageLoader(context.getApplicationContext(), holder.progBar);

    ShopRowItem shopItem = (ShopRowItem) getItem(position);

    holder.txtShopName.setText(shopItem.getShopName());
    holder.txtShopDesc.setText(shopItem.getShopDesc());
    imageLoader.DisplayImage(shopItem.getImageUrl(), holder.imageView);

    return convertView;
} 
```

然后是 ImageLoder 的一部分：

```
 public void DisplayImage(String url, ImageView imageView)
{
    imageViews.put(imageView, url);
    Bitmap bitmap=memoryCache.get(url);
    if(bitmap!=null){
        imageView.setImageBitmap(bitmap);
        progressBar.setVisibility(View.VISIBLE);
    }
    else
    {
        queuePhoto(url, imageView);
        progressBar.setVisibility(View.VISIBLE);

    }
} 

// ...
// ...

    //Used to display bitmap in the UI thread
class BitmapDisplayer implements Runnable
{
    Bitmap bitmap;
    PhotoToLoad photoToLoad;
    public BitmapDisplayer(Bitmap b, PhotoToLoad p){bitmap=b;photoToLoad=p;}
    public void run()
    {
        if(imageViewReused(photoToLoad))
            return;
        if(bitmap!=null){

            //should i do recalculations and adjustments here? ? ?

            photoToLoad.imageView.setImageBitmap(bitmap);
            progressBar.setVisibility(View.GONE);
        }   
        else{
                photoToLoad.imageView.setImageResource(stub_id);
                progressBar.setVisibility(View.VISIBLE);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T05:04:16.757

您可以通过在您的图像视图中放置一些加载图像来解决此问题，直到您从服务器获取图像数据。

```
public void DisplayImage(String url, ImageView imageView)
{
imageViews.put(imageView, url);
Bitmap bitmap=memoryCache.get(url);
if(bitmap!=null){
    imageView.setImageBitmap(bitmap);
    progressBar.setVisibility(View.VISIBLE);
}
else
{
    queuePhoto(url, imageView);
//add this line of code here.....
    imageView.setImageResource(R.drawable.your_image_placeholder);
    progressBar.setVisibility(View.VISIBLE);

}
} 
```

# jquery - SyntaxError：使用 jQuery.ajax() 的标签无效

> ID：15824421
> 
> 赞同：3
> 
> 时间：2013-04-05T01:23:04.953
> 
> 标签：jquery, ajax, jsonp

我正在尝试使用以下*jQuery*调用对我的服务器进行 Ajax调用：

```
$.ajax({
    type: "GET",
    dataType: "jsonp",
    url: "http://iceworld.sls-atl.com/api/&cmd=time",
    success: function (data) {
        console.log("success");
        console.log(data);
    },
    error: function (error) {
        console.log("error");
        console.log(error);
    },
}); 
```

我从浏览器中获得了我期望的数据，但 Firebug 一直说“SyntaxError：invalid label”，如下所示：

![无效标签](https://i.stack.imgur.com/S39HW.jpg)

所以，令我困惑的是为什么调用错误回调而不是成功。我想知道我在这里做错了什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T01:56:28.670

JSONP 数据必须以以下格式返回：`callback( jsonObject )`. 这就是您收到`invalid label`错误的原因。它需要一个函数，而不是 JSON 对象。您需要修改服务器代码以使用回调函数的名称包装返回值。当您请求 JSONP 时，jQuery 会自动将名称添加到请求中。如果您查看请求，您应该会看到如下内容：

```
http://iceworld.sls-atl.com/api/&cmd=time?callback=jQuery191035087670385837555_1365126604422&_=1365126604423 
```

您的脚本需要获取`callback`参数并使用它来包装数据，因此对于此示例，它看起来像这样：

```
jQuery191035087670385837555_1365126604422({"status":1,"data":"1365126534"}) 
```

如果您从同一来源访问服务器，则可以简单地使用 JSON。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T01:45:21.623

如果没有更多详细信息并且没有服务器发送的响应，很难清楚地回答。但是看这个，看起来服务器正在返回有效的 JSON；不是 JSONP 包装函数。尝试将其更改`dataType`为`JSON`（*虽然没有承诺，需要更多信息才能确定*）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-30T10:44:35.270

您的 json 返回值应采用**function_name(json_data)**格式。
像这样：

```
return({"status":a,"data":"123456789"}) 
```

创建一个函数作为' **return** '或与json返回值相同的名称。并且有响应时会自动调用**返回函数。**

```
 $.ajax(
{
  type: "GET",
  dataType: "jsonp",
  url: "http://iceworld.sls-atl.com/api/&cmd=time",

  error: function(error)
  {
    console.log("error");
    console.log(error);
  },
} );

function return()
{

console.log(data);

} 
```

跳它会正常工作

# php - 搜索php后对数组值进行排序

> ID：15824424
> 
> 赞同：0
> 
> 时间：2013-04-05T01:23:49.620
> 
> 标签：php, mysql, arrays

嗨，出于某些原因，当**我使用表单（POST 方法）进行搜索时，**我得到了一个如下所示的数组：

```
 Array(
            [0] =>Array ( [0] => 2008 [1] => Name1 [2] => Surname1 )
            [1] =>Array ( [0] => 2009 [1] => Name2 [2] => Surname2 ) 
            [2] =>Array ( [0] => 2010 [1] => Name3 [2] => Surname3 )
           ) 
```

如何在不执行任何其他查询并使用 $_GET 参数或其他参数来获取如下所示的数组的情况下对该数组进行排序：

```
 Array(
            [0] =>Array ( [0] => 2010 [1] => Name3 [2] => Surname3 )
            [1] =>Array ( [0] => 2009 [1] => Name2 [2] => Surname2 ) 
            [2] =>Array ( [0] => 2008 [1] => Name1 [2] => Surname1 )
           ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T01:25:00.810

带`array_reverse()`功能。

手册： http: [//php.net/manual/en/function.array-reverse.php](http://php.net/manual/en/function.array-reverse.php)

# c# - 将通用列表中的第一行分配给对象

> ID：15824428
> 
> 赞同：0
> 
> 时间：2013-04-05T01:24:32.653
> 
> 标签：c#, .net, c#-4.0

我有一个`Generic List<SomeCode>`包含多个值的列表。

我试图将列表中的第一行传递给一个对象：

```
if(list.count==1)
    SomeCode sc = list[0]; 
```

你能告诉我为什么会这样吗？

这是我的课

```
public class SomeCode
{
    private int _Somecodeid;
    private string _Somecodeescription;
    private string _Somecode;

    public int SomeCodeId
    {
        get { return _Somecodeid; }
        set { _Somecodeid = value; }
    }

    public string SomeCodeDescription
    {
        get { return _Somecodeescription; }
        set { _Somecodeescription = value; }
    }

    public string Code
    {
        get { return _Somecode; }
        set { _Somecode = value; }
    }
} 
```

我填充了一个列表 LIST 列表。该方法包含一个对象 SomeCode sc = new SomeCode

现在，当我将第一行分配给对象时

```
if(list.count==1)
    SomeCode sc = list[0]; 
```

然后分配除代码之外的所有值。

它获取列表中除第一个之外的所有项目。第一项打印如下：

```
"sc.SomeCode= SomeCode"s 
```

但是其他值被正确添加 sc.SomeCodeDescription = "Hello"; ETC

当我明确分配值时，它会起作用：

```
sc.firstItem = list[0].firstItem 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T02:12:13.850

尝试重载“=”运算符并分配匹配的值。像这样 [http://msdn.microsoft.com/en-us/library/aa288467(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa288467(v=vs.71).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T22:06:39.740

如果您的目标框架是 3.5 或更高版本，我认为您正在寻找的内容可以使用 LINQ 提供。请记住，您必须导入 System.Linq；试试这样的，

```
if(list.count==1)
  SomeCode sc = list.First(); 
```

# java - 在运行时覆盖或修改 Java 类构造函数

> ID：15824438
> 
> 赞同：2
> 
> 时间：2013-04-05T01:25:31.173
> 
> 标签：java, reflection, overriding, loader

我有一个类被实例化为序列的一部分（一个方法遍历类的随机列表并为每个类创建 3 个实例）

我正在编写该列表中的一个类（注意：所有类都存在于同一个包中）

我无法修改任何其他类的源文件，我需要停止我自己的所有类的实例化，或者用空方法覆盖它们的构造函数。

到目前为止，我已经尝试过使用反射，并且一直在查看类加载器，但无法弄清楚如何做到这一点

我可以通过反射获得对构造函数的引用，但到目前为止无法干扰它

编辑->我的想法（动态地重新编写和重新编译目标类），代码编译但我得到一个异常，阻止新类编译

```
private void reWrite(String name) {//throws IOException {
    try{
    File sourceFile = new File("/temp/" + "name" + ".java");
    System.out.println("file defined");
    FileWriter writer = new FileWriter(sourceFile);
    System.out.println("filewriter defined");

    writer.write("public class "+name+" extends Creature {/n"
            + "private static int instanceCount = 0;/n" + "public "+name+"() {/n"
            + " instanceCount++;/n" + "}/n" + "public void doTurn() {}/n"
            + "public final void creatureDestroyed() {/n"
            + " instanceCount--;/n" + "}/n"
            + "public final int getInstanceCount() {/n"
            + " return instanceCount;/n" + "}/n" + "}/n");
    writer.close();
    System.out.println("written");

    JavaCompiler compiler = ToolProvider.getSystemJavaCompiler();
    StandardJavaFileManager fileManager = compiler.getStandardFileManager(null,null,null);

    fileManager.setLocation(StandardLocation.CLASS_OUTPUT,
            Arrays.asList(new File("/temp")));
    // Compile the file
    compiler.getTask(
            null,
            fileManager,
            null,
            null,
            null,
            fileManager.getJavaFileObjectsFromFiles(Arrays
                    .asList(sourceFile))).call();
    System.out.println("compiled");
    fileManager.close();
    }catch(Exception e){
        System.out.println("Print");
    }
} 
```

编辑->以下是我根据以下评论提供的代码

```
try {
        getW = (World.class.getDeclaredMethod("getWorld"));
        getW.setAccessible(true);
        theWorld = getW.invoke(World.class);
        getK = (Creature.class.getDeclaredMethod("die"));
        getK.setAccessible(true);
    } catch (NoSuchMethodException exc) {
        System.out.println("Method Not Found.");
    } catch (Exception e) {
        System.out.println("well shit");
    }

    try {
        f = World.class.getDeclaredField("locations");
        f.setAccessible(true);
        locations = f.get(theWorld);
        loc = (ArrayList<Creature>) locations;
    } catch (Exception e) {
        System.out.println("well poop");
    }
    if (loc.size() > 0 && !allMine) {
        for (int i = 0; i < loc.size(); i++) {
            if (loc.get(i).getClass() != Colonial.class
                    && loc.get(i).getClass() != Plant.class) {

                try {
                    getK.invoke(loc.get(i));
                } catch (Exception e) {

                }

                loc.set(i, new OpenLand());
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T03:07:02.010

如果允许您修改命令行，您应该尝试 java 代理。代理是一个基本上在类加载之前挂钩的类，可以修改类的字节码。为了在不成为 JVM 专家的情况下修改字节码，javassist 是一个不错的库，它允许您编写一些类似 java 的代码并在方法之前/之后注入它。
所以基本上，你需要

1.  编写一个修改敌人类的构造函数的代理
2.  使用该代理启动 JVM

在这里，您有一些关于代理的最少信息：
[https](https://zeroturnaround.com/rebellabs/how-to-make-java-more-dynamic-with-runtime-code-generation/)
: //zeroturnaround.com/rebellabs/how-to-make-java-more-dynamic-with-runtime-code-generation/ 和 javassist 教程非常清楚：
[http:// jboss-javassist.github.io/javassist/tutorial/tutorial.html](http://jboss-javassist.github.io/javassist/tutorial/tutorial.html)
当然这是一个肮脏的黑客，但你要求它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-29T13:27:48.470

您可以使用[sun.misc.Unsafe#allocateInstance(MyClass.class)](http://www.docjar.com/html/api/sun/misc/Unsafe.java.html) 来构造实例，而无需实际调用构造函数。有关更多信息，请参阅[http://mishadoff.com/blog/java-magic-part-4-sun-dot-misc-dot-unsafe/](http://mishadoff.com/blog/java-magic-part-4-sun-dot-misc-dot-unsafe/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T03:12:57.407

您*不需要*“干涉”构造函数。它是固定的。你只需要*调用*它，`Constructor<T>.newInstance(...).`如果有需要设置的对象的其他属性，调用setter。如果设置器不存在，则无法执行。

# javascript - javascript 函数调用是否在整个脚本完成解析之前运行？

> ID：15824439
> 
> 赞同：2
> 
> 时间：2013-04-05T01:25:32.117
> 
> 标签：javascript, parsing, execution

我知道 Javascript 按顺序执行代码。~~但是，我总是试图确定是否有任何代码在编译~~执行每个函数后立即“逐行”运行，或者该脚本中的所有直接函数调用是否等待整个脚本完成解析，然后才能真正完成解析跑。

我想更好地理解 javascript 解析和执行代码的方式。主要用于外部脚本，在控制台日志中似乎有点难以观察。

一种适用的用途是在外部脚本中尽早尝试拦截“交互式”document.readyState，因为“交互式”状态有时会极早触发。根据[http://bugs.jquery.com/ticket/12282#comment:15](http://bugs.jquery.com/ticket/12282#comment:15)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T01:37:05.423

不可以。脚本标记的全部内容（无论它是内联的还是外部的）都必须在对其进行评估之前进行解析。

这是因为 javascript 'hoists' 变量和函数声明到其范围顶部的方式：http: [//elegantcode.com/2011/03/24/basic-javascript-part-12-function-hoisting/](http://elegantcode.com/2011/03/24/basic-javascript-part-12-function-hoisting/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T01:48:52.173

Javascript *一次[编译](https://stackoverflow.com/questions/3887408/javascript-function-declaration-and-evaluation-order/3887590#3887590)并执行一个脚本（标签）。因此，在每个脚本标记中，无论是内联的还是源自文件的，整个代码都会被编译然后执行。但是每个单独的脚本标签都是按顺序编译和执行的。

您可以通过简单地运行以下两个示例来检查这一点：

示例 1：

```
<html>
<script>
    alert(x);
    var x;
</script>
</html> 
```

上面的代码将警告“未定义”。另一方面..

示例 2：

```
<html>
<script>
    alert(x);
</script>
<script>
    var x;
</script>
</html> 
```

上面的代码会触发错误，因为 x 不存在。

* * *

注意：* [JavaScript 函数声明和评估顺序](https://stackoverflow.com/questions/3887408/javascript-function-declaration-and-evaluation-order/3887590#3887590)

# android - 如何对 Android ImageLoader 加载的图像应用过滤器？

> ID：15824448
> 
> 赞同：2
> 
> 时间：2013-04-05T01:26:51.157
> 
> 标签：android, android-image

我正在使用[Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader/)库来加载我的图像并进行缓存等。我正在尝试使用 JH Labs 库对其应用框模糊过滤器。我试图在 onLoadingComplete 事件中申请过滤，但它看起来不像是可变的位图。有没有人有过对 Android ImageLoader 加载的位图应用过滤器的经验？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-03T22:52:20.340

我终于让这个工作了。这是在 onLoadingComplete 事件中应用过滤器的正确方法。但是，由于那里的位图是不可变的，关键是要传入ImageView，再次调用setImageBitmap方法，将过滤后的位图设置为ImageView：

```
public void displayImageBlurred(String imageUri, final ImageView imageView) {
    this.displayImage(imageUri, imageView, true, 0, new SimpleImageLoadingListener() {

        @Override
        public void onLoadingComplete(Bitmap loadedImage) {
            int width = loadedImage.getWidth();
            int height = loadedImage.getHeight();

            BoxBlurFilter filter = new BoxBlurFilter();
            filter.setRadius(8.5f);

            int[] src = AndroidUtils.bitmapToIntArray(loadedImage);
            src = filter.filter(src, width, height);

            loadedImage = Bitmap.createBitmap(src, width, height, Config.ARGB_8888);
            imageView.setImageBitmap(loadedImage);
        }
    });
}

public void displayImage(String imageUri, final ImageView imageView, boolean callBackIfCached, long startTime, ImageLoadingListener listener) {
    ImageLoader imageLoader = ImageLoader.getInstance();
    imageLoader.displayImage(imageUri, imageView, defaultOptions, listener);
} 
```

# android - 为什么 android awesomeplayer 是使用 struct 而不是 class 制作的

> ID：15824449
> 
> 赞同：0
> 
> 时间：2013-04-05T01:27:18.990
> 
> 标签：android

我发现android的native层使用了class和struct。

例如，`MediaPlayer`, `Stagefrightplayer`, `Audioplayer`,`MetaData`是类。但是`Awesomeplayer`和`MediaSource`是结构。

尽管我读到该类和结构在使用上相似，但我想知道为什么`Awesomeplayer`将其创建为结构。有什么原因还是只是开发人员的口味？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T02:24:34.837

![在此处输入图像描述](https://i.stack.imgur.com/BCZgA.png)您尝试提及`awesomeplayer` 和`MediaSource`作为 Android API 吗？不，它们不是，它们是从 C++ 转换而来的结构；它们不属于 Android 库！

请看图表`stagefright`，该库来自 C/C++ 核心。Android 是 linux 核心，可以将 C/C++ utils、libs 带入其中。

参考： http: [//pierrchen.blogspot.sg/2012/03/share-with-you-what-have-learned-about.html](http://pierrchen.blogspot.sg/2012/03/share-with-you-what-have-learned-about.html)

# sql - 如何在不排序表的情况下获取最后 N 行

> ID：15824452
> 
> 赞同：0
> 
> 时间：2013-04-05T01:27:58.207
> 
> 标签：sql, postgresql

我有数百万行的表，需要获取特定 ID 的最后一行

例如具有 device_id = 123 的最后一行和具有 device_id = 1234 的最后一行

因为表格太大了，订购需要很多时间，是否可以选择最后 200 个而不订购表格，然后只订购这 200 个并获取我需要的行。

我该怎么做？

预先感谢您的帮助！

**更新**

我的 PostgreSQL 版本是 9.2.1

样本数据：

```
time                      device_id         data       data ....
"2013-03-23 03:58:00-04" | "001EC60018E36" | 66819.59 | 4.203
"2013-03-23 03:59:00-04" | "001EC60018E37" | 64277.22 | 4.234
"2013-03-23 03:59:00-04" | "001EC60018E23" | 46841.75 | 2.141
"2013-03-23 04:00:00-04" | "001EC60018E21" | 69697.38 | 4.906
"2013-03-23 04:00:00-04" | "001EC600192524"| 69452.69 | 2.844
"2013-03-23 04:01:00-04" | "001EC60018E21" | 69697.47 | 5.156
.... 
```

请参阅[此数据的 SQLFiddle](http://sqlfiddle.com/#!12/5710a)

因此，如果 device_id = 001EC60018E21 我想要具有该 device_id 的最新行。具有该 device_id 的最后一行是我想要的行是受让人，但它可能是也可能不是表的最后一行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T02:03:06.963

就个人而言，我会在`device_id`降序上创建一个复合索引`time`：

```
CREATE INDEX table1_deviceid_time ON table1("device_id","time" DESC); 
```

然后我会使用一个子查询来查找`time`每个的最高值，`device_id`并将子查询结果与主表连接起来`device_id`并`time`找到相关数据，例如：

```
SELECT t1."device_id", t1."time", t1."data", t1."data1"
FROM Table1 t1
INNER JOIN (
  SELECT t1b."device_id", max(t1b."time") FROM Table1 t1b GROUP BY t1b."device_id"
) last_ids("device_id","time") 
ON (t1."device_id" = last_ids."device_id" 
    AND t1."time" = last_ids."time"); 
```

请参阅[此 SQLFiddle](http://sqlfiddle.com/#!12/ddc2e/3)。

维护每个设备 ID 的最高时间戳的基于触发器的物化视图可能会有所帮助。但是，如果由于连接争夺更新锁，大多数连接可以插入给定设备 ID 的数据，这将导致并发问题。如果你不知道什么时候会出现新的设备 ID，因为你必须做一个 upsert，这也是一种痛苦——这是非常低效和笨拙的事情。此外，汇总表创建的额外写入负载和自动清理工作可能不值得；为更昂贵的查询付出代价可能会更好。

顺便说一句，`time`对于列来说这是一个糟糕的名称，因为它是一个内置的数据类型名称。如果可以，请使用更合适的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T02:03:24.713

获取每个 device_id 的“最后”行的一般方法如下所示。

```
select *
from Table1 
inner join (select device_id, max(time) max_time
            from Table1
            group by device_id) T2
   on Table1.device_id = T2.device_id
  and Table1.time = T2.max_time; 
```

在不使用 ORDER BY 的情况下获取“最后一个”200 个 device_id 数字实际上并不实用，但不清楚您为什么首先要这样做。如果 200 是一个任意数字，那么您可以通过取一个基于任意时间的表子集来获得更好的性能。

```
select *
from Table1 
inner join (select device_id, max(time) max_time
            from Table1
            where time > '2013-03-23 12:03'
            group by device_id) T2
on Table1.device_id = T2.device_id
and Table1.time = T2.max_time; 
```

# android - 搜索样式 EditText

> ID：15824454
> 
> 赞同：0
> 
> 时间：2013-04-05T01:28:03.147
> 
> 标签：android, android-edittext

我想使用“搜索”样式的 EditText，下面有细线，右边有一个麦克风图标（尽管我会用不同的功能替换那个图标），用于 Youtube 和谷歌地图等应用程序。

这是任何版本的 Android 中的原生元素吗？我似乎在任何地方都找不到对它的引用，尽管我确实找到了这个：

[Android EditText 类似于 Google 搜索 EditText](https://stackoverflow.com/questions/8562241/android-edittext-like-google-search-edittext)

这基本上说自己创建它，我已经完成了，但是如果有一个我不知道的更“原生”搜索 EditText，我宁愿使用它......

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T16:11:13.197

如果您想在应用程序中使用此 Search-EditText，您将在此处找到所需的所有信息：http: [//developer.android.com/guide/topics/search/index.html](http://developer.android.com/guide/topics/search/index.html)

Google 为没有 ActionBar 的 Android 2.X 和更高版本的带有 ActionBar 的 Android 提供了配置示例。在“创建搜索界面”下，您将找到“添加语音搜索”部分，其中包含麦克风图标，但我不知道如何覆盖其功能。

# html - 表格行跨度单元格跨度

> ID：15824455
> 
> 赞同：1
> 
> 时间：2013-04-05T01:28:04.090
> 
> 标签：html, css, html-table

这是我需要帮助的任务。我讨厌桌子，但这就是它所说的：

> “每个表格的第一行由一个表格单元格组成，该表格单元格跨越包含房地产列表名称的两列。每个表格中的第二行由两个表格单元格组成。”

我的代码：

```
<table>
    <tr>
        <th>
            <h3>TEST</h3>
        </th>
    </tr>
    <th rowspan="2"></th>
    <td>Something here !</td>
</tr>
</table> 
```

只是想验证我是否正确执行此操作？这是完整的代码：

[http://jsfiddle.net/4jzUc/](http://jsfiddle.net/4jzUc/)

此外，它应该看起来像这样：[http ://screencloud.net/v/aA5Y](http://screencloud.net/v/aA5Y)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T01:46:16.877

您想要跨越列，而不是行（`colspan`vs `rowspan`）。我想这就是你要找的。

```
<table>
    <tr>
       <th colspan="2">
           Title
       </th>  
    </tr>
    <tr>
       <td>First cell</td>
    </tr>                       
    <tr>
       <td>Second cell</td>
    </tr>
</table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T04:33:23.143

不，您的标记不正确。它甚至不符合 HTML 表格模型，正如您可以通过在文档上使用[http://validator.nu](http://validator.nu)`<!doctype html>`并在开始时打耳光看到的那样。更不用说它做任务要求的事情了。

这样的分配非常简单：你只是一个有两行两列的表格，只是第一行只有一个单元格，它跨越两列：

```
<table>
  <tr><td colspan=2>Real estate name
  <tr><td>A table cell <td>Another table cell
</table> 
```

您可以使用`th`代替 first `td`，因为它是一种标题单元格，但请注意，这会使其内容默认为粗体并居中（您可以在 CSS 中覆盖它）。

根据“应该看起来像”链接，您似乎应该`img`只在第二行的第一个单元格中放置一个元素，而那里的第二个单元格包含文本和一个`ul`元素。还有一点 CSS。请注意，对于此输出，您需要将第二行垂直对齐到顶部（使用 HTML`valign`属性或 CSS`vertical-align`属性）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-05T01:32:25.683

正确的代码：

```
<table>
   <tr>
       <th>
           <h3>TEST</h3>
       </th>
       <th rowspan="2">RowSpan2!</th>   
   </tr>
   <tr>
       <td>Something here !</td>
   </tr>                       
   <tr>
       <td>Something Else !</td>
   </tr>
</table> 
```

# codeigniter - Eloquent 找不到 Code Igniter 模型

> ID：15824460
> 
> 赞同：1
> 
> 时间：2013-04-05T01:28:53.857
> 
> 标签：codeigniter, laravel, eloquent

所以我将 Eloquent 与代码点火器一起使用并得到了一些有趣的错误。

```
class Brand_model extends MY_Model {

public function size()
{
    return $this->hasOne('Size');
}
} 
```

尝试加载我的 Size 模型时出现该行错误：

```
class Size extends  MY_Model {

    public function brand(){
        return $this->belongsTo('Brand');

    }

} 
```

“找不到班级大小”

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T17:16:44.057

您可以尝试将自动加载部分添加到您的 composer.json 文件中，如下所示：http: [//snipr.it/~Dh](http://snipr.it/~Dh)

然后 tun php composer.phar dumpautoload，它会从指定目录加载模型

在此之后，应该找到类。

其他选项就是 $this->load->model('Brand_model'); $this->load->model('size');

两个都试试，希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-02T02:53:19.553

您需要确保在索引文件中加载了作曲家自动加载。

[请在CodeIgniter_with_Eloquent](https://github.com/intuititve/codeigniter_eloquent)查看完整示例

**在index.php**的最后一行之前插入下面的代码：

```
require_once './vendor/autoload.php'; 
```

希望它有所帮助！

# php - Mysql：一对多和php分页

> ID：15824462
> 
> 赞同：0
> 
> 时间：2013-04-05T01:29:09.563
> 
> 标签：php, mysql, mysqli, pagination

这是我的表结构

```
CREATE TABLE `cats` (
  `cat_id` int(11) NOT NULL auto_increment,
  `cat_name` varchar(50) NOT NULL,
  `cat_status` tinyint(2) NOT NULL,
  PRIMARY KEY  (`cat_id`),
  KEY `cat_name` (`cat_name`,`cat_status`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=5 ;

-- 
-- Dumping data for table `cats`
-- 

INSERT INTO `cats` VALUES (1, 'news', 1);
INSERT INTO `cats` VALUES (2, 'sports', 1);
INSERT INTO `cats` VALUES (3, 'political', 1);
INSERT INTO `cats` VALUES (4, 'Computer', 1);

-- --------------------------------------------------------

-- 
-- Table structure for table `posts`
-- 

CREATE TABLE `posts` (
  `post_id` int(11) NOT NULL auto_increment,
  `user_id` int(11) NOT NULL,
  `post_title` varchar(150) NOT NULL,
  `post_desc` text NOT NULL,
  `post_time` int(10) NOT NULL,
  `post_status` tinyint(1) NOT NULL,
  PRIMARY KEY  (`post_id`),
  KEY `user_id` (`user_id`,`post_time`,`post_status`),
  FULLTEXT KEY `description` (`post_desc`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=3 ;

-- 
-- Dumping data for table `posts`
-- 

INSERT INTO `posts` VALUES (1, 1, 'Barcha vs R.madrid', 'Football Match Messi vs reonaldo', 1365122983, 1);
INSERT INTO `posts` VALUES (2, 1, 'Web Devlopment Basic', 'etc etc etc etc etc etc etc etc etc etc etc ', 1365122983, 1);

-- --------------------------------------------------------

-- 
-- Table structure for table `post_relation`
-- 

CREATE TABLE `post_relation` (
  `post_id` int(11) NOT NULL,
  `relation_type` varchar(10) NOT NULL,
  `with_id` int(11) NOT NULL,
  KEY `relation_type` (`relation_type`,`with_id`,`post_id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8;

-- 
-- Dumping data for table `post_relation`
-- 

INSERT INTO `post_relation` VALUES (1, 'cat', 1);
INSERT INTO `post_relation` VALUES (1, 'cat', 2);
INSERT INTO `post_relation` VALUES (2, 'cat', 4);
INSERT INTO `post_relation` VALUES (1, 'tag', 1);
INSERT INTO `post_relation` VALUES (1, 'tag', 4);
INSERT INTO `post_relation` VALUES (1, 'tag', 5);
INSERT INTO `post_relation` VALUES (2, 'tag', 6);

-- --------------------------------------------------------

-- 
-- Table structure for table `tags`
-- 

CREATE TABLE `tags` (
  `tag_id` int(11) NOT NULL auto_increment,
  `tag_name` varchar(50) NOT NULL,
  `tag_status` tinyint(2) NOT NULL,
  PRIMARY KEY  (`tag_id`),
  KEY `tag_name` (`tag_name`,`tag_status`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=7 ;

-- 
-- Dumping data for table `tags`
-- 

INSERT INTO `tags` VALUES (1, 'football', 1);
INSERT INTO `tags` VALUES (2, 'usa', 1);
INSERT INTO `tags` VALUES (3, 'war', 1);
INSERT INTO `tags` VALUES (4, 'messi', 1);
INSERT INTO `tags` VALUES (5, 'ronaldo', 1);
INSERT INTO `tags` VALUES (6, 'php', 1); 
```

SQLonline：[http ://sqlfiddle.com/#!2/9d20d/8](http://sqlfiddle.com/#!2/9d20d/8)

我现在正在尝试获取带有猫和标签的帖子

使用此 SQL 查询

```
SELECT
      posts.*, cats.cat_name as catname , tags.tag_name as tagname FROM
      post_relation INNER JOIN 
      posts ON ( post_relation.post_id = posts.post_id ) LEFT JOIN
      cats  ON ( post_relation.with_id = cats.cat_id and post_relation.relation_type = "cat"  ) LEFT JOIN
      tags  ON ( post_relation.with_id = tags.tag_id and post_relation.relation_type = "tag"  ) 
```

我想要这个数组的结果

```
$posts = array(
    array(
       "post_id" => 1 ,
       "user_id" => 1 ,
       "post_title" => "Barcha vs R.madrid" ,
       "post_desc" => "Football Match Messi vs reonaldo" ,
       "post_time"=>  1365122983 ,
       "post_status" => 1 ,
       "post_cats"  => array(
                          "1" => "news" , 
                          "2" => "sports" 
                       ) ,
       "post_tags"  => array(
                          "1" => "football" , 
                          "4" => "messi" ,
                          "5" => "Ronaldo" ,
                       )
     ) , 
   array(
       "post_id" => 2 ,
       "user_id" => 1 ,
       "post_title" => "Web Devlopment Basic" ,
       "post_desc" => "etc etc etc etc etc etc etc etc etc etc etc " ,
       "post_time"=>  1365122983 ,
       "post_status" => 1 ,
       "post_cats"  => array( 
                          "4" => "Computer" 
                       ) ,
       "post_tags"  => array(
                          "6" => "php" ,
                       ) 
     )
) 
```

**我可以在php中做这个数组没有问题但是**

在我的示例中，我只有**2 个帖子**

但我的查询返回**7 Rows**

如果我的查询仅使用 5 行进行分页

我的数组将丢失帖子 1 中的标签 帖子 2 中的标签

并且在第 2 页将仅显示丢失的标签

***如何使用 Perfect Pagination 进行查询并获取完整数组***

***如何优化我的查询***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T03:06:17.923

因为我认为您不能直接从 mysql 结果中获取多维数组，而是使用一些 php 代码购买

首先获取帖子，然后您可以循环进入它，并且通过 evry post_id 您可以将标签和猫作为每个帖子的数组，并将其与帖子数组放在一起

她是代码 $posts_array = array(); $posts_per_page = 5; // 你将从分页函数中得到它 // 检索所有帖子

```
 $posts_result = mysql_query("select * from posts ");

      while ($post = mysql_fetch_assoc($posts_result)) {
      // retreiving cats for evry post  
         $post_cat_q = 'SELECT   cats.cat_name
                          FROM     post_relation, cats
                          WHERE    post_relation.post_id = '.$post['post_id'].'
                                  AND post_relation.with_id = cat.cat_id
                                   AND post_relation.relation_type = "cat"';
         $post_cat = mysql_query($post_cat_q);
          while($cat = mysql_fetch_assoc($post_cat)){
              // loop in cats' rows to make an array and link it with the post array 
              $post['cats'][] = $cat;
          }

          // retreiving tags for evry post
          $post_tags_q = 'SELECT   tags.tag_name
                          FROM     post_relation, tags
                          WHERE    post_relation.post_id = '.$post['post_id'].'
                                  AND post_relation.with_id = tags.tag_id
                                   AND post_relation.relation_type = "tag"';
         $post_tags = mysql_query($post_tags_q);
          while($tag = mysql_fetch_assoc($post_tags)){
              // loop in tags' rows to make an array and link it with the post array 
              $post['tags'][] = $tag;
          } 

         $posts_array[] = $post;
      }
      echo '<pre>';
      // ptinting the resulted array 
      print_r($posts_array); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T01:58:22.203

现在您的 SQL 查询返回如下内容：

```
<?php

    $posts = array(
        array ('post_id' => 1, 'user_id' => 1 ...),
        array ('post_id' => 1, 'user_id' => 1 ...)
    );

?> 
```

每个“catname”和“tagname”列都有一个新行。

我建议在构建 php 数组时使用单独的查询，例如：

```
SELECT * FROM posts 
```

然后对于帖子的每次迭代，查询所需的数组，例如：

```
SELECT   cats.cat_name
FROM     post_relation, cats
WHERE    post_relation.post_id = 1
         AND relation_type = 'cat' 
```

这将为您的类别获取您的数组，同样为您的标签获取数组。

MySQL 没有办法在列中实际返回一个数组，如果你真的想用一个查询来完成这一切，你可能必须用一个子查询 CONCAT，然后让你的 php 使用 CSV 或其他东西将结果拆分为一个数组. 不推荐任何一种方式。

# excel - 在我的存档中引用我的收件箱的 VBA 代码 - 已关闭

> ID：15824466
> 
> 赞同：0
> 
> 时间：2013-04-05T01:29:18.480
> 
> 标签：excel, vba, outlook

我有这段代码，可用于访问主收件箱或收件箱子文件夹中的任何文件夹。

有谁知道如何引用我的存档文件夹或发送的项目？存档文件夹保存为“我的个人文件夹”

非常感谢

```
Sub ListAllItems()

    Dim OLF As Outlook.MAPIFolder, CurrUser As String
    Dim EmailItemCount As Integer, i As Integer, EmailCount As Integer
    Application.ScreenUpdating = False

    Cells(1, 1).Formula = "Subject"
    Cells(1, 2).Formula = "Recieved"
    Cells(1, 3).Formula = "Attachments"
    Cells(1, 4).Formula = "Recipients"
    Cells(1, 5).Formula = "SenderName"
    With Range("A1:F1").Font
        .Bold = True
        .Size = 14
    End With
    Application.Calculation = xlCalculationManual
    Set OLF = GetObject("", _
    "Outlook.Application").GetNamespace("MAPI").GetDefaultFolder(olFolderInbox).Folders("Toastmasters")
    EmailItemCount = OLF.Items.Count
    i = 0: EmailCount = 0
     ' read e-mail information
    While i < EmailItemCount
        i = i + 1
        If i Mod 50 = 0 Then Application.StatusBar = "Reading e-mail messages " & _
        Format(i / EmailItemCount, "0%") & "..."
        With OLF.Items(i)
            EmailCount = EmailCount + 1
            Cells(EmailCount + 1, 1).Formula = .subject
            Cells(EmailCount + 1, 2).Formula = Format(.ReceivedTime, "dd.mm.yyyy hh:mm")
            Cells(EmailCount + 1, 3).Formula = .Attachments.Count
            Cells(EmailCount + 1, 4).Formula = Not .UnRead
            Cells(EmailCount + 1, 4).Formula = .Recipients.Count
            Cells(EmailCount + 1, 5).Formula = .SenderName

        End With
    Wend
    Application.Calculation = xlCalculationAutomatic
    Set OLF = Nothing
    Columns("A:F").AutoFit
    Range("A2").Select
    ActiveWindow.FreezePanes = True
    ActiveWorkbook.Saved = True
    Application.StatusBar = False
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T05:45:21.090

**第二。**要设置对任何存档文件夹的引用，您应该将其设置如下：

```
Set OLF = GetObject("", "Outlook.Application").GetNamespace("MAPI").Folders("My Personal Folders") 
```

在哪里，可以选择使用索引号代替文件夹的“名称”（如果您有更多档案，通常为 2 或更多）。

**第一个。**我不确定您所说的“已发送物品”是什么意思。您是否询问带有已发送项目的文件夹：

```
Set OLF = GetObject("", "Outlook.Application").GetNamespace("MAPI").GetDefaultFolder(olFoldersSentMail) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T05:52:52.467

如果您需要访问辅助存储中的文件夹，请使用 Namespace.Stores 集合，然后使用 Store.GetRootFolder 访问存储的顶级文件夹。它的 MAPIFolder.Folders 集合可用于进一步向下钻取。

您还可以通过 Namespace.Folders 集合访问所有商店的顶级文件夹。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T23:37:59.767

如果较早的答案满足您的需求，那么它们可能比这个答案更容易实现。

我使用下面的例程在层次结构中查找指定的文件夹。我希望你发现第一个例程顶部的说明足够了。

```
Public Sub FindSelectedFolder(ByRef FolderTgt As MAPIFolder, _
                              ByVal NameTgt As String, ByVal NameSep As String)

  ' This routine (and its sub-routine) locate a folder within the hierarchy and
  ' returns it as an object of type MAPIFolder

  ' NameTgt   The name of the required folder in the format:
  '              FolderName1 NameSep FolderName2 [ NameSep FolderName3 ] ...
  '           If NameSep is "|", an example value is "Personal Folders|Inbox"
  '           FolderName1 must be an outer folder name such as
  '           "Personal Folders". The outer folder names are typically the names
  '           of PST files.  FolderName2 must be the name of a folder within
  '           Folder1; in the example "Inbox".  FolderName2 is compulsory.  This
  '           routine cannot return a PST file; only a folder within a PST file.
  '           FolderName3, FolderName4 and so on are optional and allow a folder
  '           at any depth with the hierarchy to be specified.
  ' NameSep   A character or string used to separate the folder names within
  '           NameTgt.
  ' FolderTgt On exit, the required folder.  Set to Nothing if not found.

  ' This routine initialises the search and finds the top level folder.
  ' FindSelectedSubFolder() is used to find the target folder within the
  ' top level folder.

  Dim InxFolderCrnt As Long
  Dim NameChild As String
  Dim NameCrnt As String
  Dim Pos As Long
  Dim TopLvlFolderList As Folders

  Set FolderTgt = Nothing   ' Target folder not found

  Set TopLvlFolderList = _
          CreateObject("Outlook.Application").GetNamespace("MAPI").Folders

  ' Split NameTgt into the name of folder at current level
  ' and the name of its children
  Pos = InStr(NameTgt, NameSep)
  If Pos = 0 Then
    ' I need at least a level 2 name
    Exit Sub
  End If
  NameCrnt = Mid(NameTgt, 1, Pos - 1)
  NameChild = Mid(NameTgt, Pos + 1)

  ' Look for current name.  Drop through and return nothing if name not found.
  For InxFolderCrnt = 1 To TopLvlFolderList.Count
    If NameCrnt = TopLvlFolderList(InxFolderCrnt).Name Then
      ' Have found current name. Call FindSelectedSubFolder() to
      ' look for its children
      Call FindSelectedSubFolder(TopLvlFolderList.Item(InxFolderCrnt), _
                                            FolderTgt, NameChild, NameSep)
      Exit For
    End If
  Next

End Sub
Public Sub FindSelectedSubFolder(FolderCrnt As MAPIFolder, _
                      ByRef FolderTgt As MAPIFolder, _
                      ByVal NameTgt As String, ByVal NameSep As String)

  ' See FindSelectedFolder() for an introduction to the purpose of this routine.
  ' This routine finds all folders below the top level

  ' FolderCrnt The folder to be seached for the target folder.
  ' NameTgt    The NameTgt passed to FindSelectedFolder will be of the form:
  '               A|B|C|D|E
  '            A is the name of outer folder which represents a PST file.
  '            FindSelectedFolder() removes "A|" from NameTgt and calls this
  '            routine with FolderCrnt set to folder A to search for B.
  '            When this routine finds B, it calls itself with FolderCrnt set to
  '            folder B to search for C.  Calls are nested to whatever depth are
  '            necessary.
  ' NameSep    As for FindSelectedSubFolder
  ' FolderTgt  As for FindSelectedSubFolder

  Dim InxFolderCrnt As Long
  Dim NameChild As String
  Dim NameCrnt As String
  Dim Pos As Long

  ' Split NameTgt into the name of folder at current level
  ' and the name of its children
  Pos = InStr(NameTgt, NameSep)
  If Pos = 0 Then
    NameCrnt = NameTgt
    NameChild = ""
  Else
    NameCrnt = Mid(NameTgt, 1, Pos - 1)
    NameChild = Mid(NameTgt, Pos + 1)
  End If

  ' Look for current name.  Drop through and return nothing if name not found.
  For InxFolderCrnt = 1 To FolderCrnt.Folders.Count
    If NameCrnt = FolderCrnt.Folders(InxFolderCrnt).Name Then
      ' Have found current name.
      If NameChild = "" Then
        ' Have found target folder
        Set FolderTgt = FolderCrnt.Folders(InxFolderCrnt)
      Else
        'Recurse to look for children
        Call FindSelectedSubFolder(FolderCrnt.Folders(InxFolderCrnt), _
                                            FolderTgt, NameChild, NameSep)
      End If
      Exit For
    End If
  Next

  ' If NameCrnt not found, FolderTgt will be returned unchanged.  Since it is
  ' initialised to Nothing at the beginning, that will be the returned value.

End Sub 
```

# javascript - 通过单击向上滚动时，jQuery Waypoints 粘性导航关闭 1px

> ID：15824467
> 
> 赞同：2
> 
> 时间：2013-04-05T01:29:32.313
> 
> 标签：javascript, jquery, jquery-waypoints

我快用 Waypoints 撕掉我的头发了。首先，我对 javascript 的经验还很遥远。我正在使用 Waypoints 1）将导航固定到屏幕顶部的某个点（这很好用）和 2），当到达某些部分时突出显示导航项。一切正常，除非您单击需要航点方向向上的导航项目，例如单击“异常值”，然后单击“目的地”。您会注意到航点似乎偏离了一个像素，并且“异常值”仍然突出显示。如果向上滚动一个像素，“目的地”最终会突出显示。这是复制此行为的唯一方法...单击向下滚动的导航项目可以正常工作。这是我的 JS：http: [//jsfiddle.net/TreUd/](http://jsfiddle.net/TreUd/)。这是它实施的网站：. 感谢您的帮助...非常感谢。

```
 <!-- waypoints -->
    <script type="text/javascript">
    $(document).ready(function(){
      $('.nav-container').waypoint(function(direction) {
        $('nav#main').toggleClass('sticky', direction === 'down');  
      });
    });
    </script>

    <script type="text/javascript">
    var sections = $("section");
        var navigation_links = $("nav a");

        sections.waypoint({
            handler: function(event, direction) {

                var active_section;
                active_section = $(this);
                if (direction === "down") active_section = active_section.prev();

                var active_link = $('nav a[href="#' + active_section.attr("id") + '"]');
                navigation_links.removeClass("selected");
                active_link.addClass("selected");

            },
            offset: 50
        })
    </script>
    <!-- end waypoints --> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T03:12:34.307

这绝对是一个奇怪的。您的标题上似乎有一个 3px 的边框，这可能是导致问题的原因。但是，如果您将航点的偏移量从 50 增加到 53，似乎可以解决问题。

```
var sections = $("section");
var navigation_links = $("nav a");

    sections.waypoint({
        handler: function (event, direction) {

            var active_section;
            active_section = $(this);
            if (direction === "down") active_section = active_section.prev();

            var active_link = $('nav a[href="#' + active_section.attr("id") + '"]');
            navigation_links.removeClass("selected");
            active_link.addClass("selected");

        },
        offset: 53
    }) 
```

# asp.net - 禁用 Durandal 内联样式

> ID：15824468
> 
> 赞同：3
> 
> 时间：2013-04-05T01:29:35.457
> 
> 标签：asp.net, single-page-application, durandal, hottowel

Durandal 似乎会自动将以下内联样式添加到包装其数据视图的 div 元素中：

```
style="margin-left: 0px; margin-right: 0px; opacity: 1; display: block;" 
```

这发生在使用 Durandal 的 Durandal 和 John Papa Hot Towel ASP.NET SPA 模板中。

此内联样式覆盖了我的外部样式表，因此我需要禁用此行为。我假设这是由其中一个 JavaScript 文件注入的，但我一生似乎无法弄清楚在哪里。

任何人都知道如何防止添加这种内联样式？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T03:45:13.120

这是由“入口”过渡（durandal/transitions/entrance.js）设置的。看起来过渡的最终终点是这些值，并且在过渡完成后它们不会被删除。

您可以通过不使用过渡来完全避免这种情况。这将需要几个步骤：

1.  在 main.js 中，修改您的 app.setRoot() 调用以删除“入口”参数。这将防止样式设置被添加到 shell 容器中
2.  在 shell.html 中，从 compose 绑定中移除转换设置。这将防止样式设置被添加到单个视图中。

另一种可能性是创建自己的过渡，使其更符合您的 CSS 要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T19:06:56.727

由于入口过渡将此样式添加到视图中的顶级元素 - 您可能只需将当前视图内容与另一个 div 包装在一起，并让它承受应用这些值的影响。

前：

```
<div class="container-narrow">    
    <div class="row-fluid">
        <div class="span12">
            <h2>Title</h2>
            ....
        </div>
    </div>
</div> 
```

后：

```
<div>
    <div class="container-narrow">    
        <div class="row-fluid">
            <div class="span12">
                <h2>Title</h2>
                ....
            </div>
        </div>
    </div>
<div> 
```

这在我将容器窄 div 居中的实例中有效

```
.container-narrow 
{
margin: 0 auto;
max-width: 400px;
} 
```

过渡后丢失了

# runtime-error - 无法创建木偶应用程序的新实例

> ID：15824469
> 
> 赞同：0
> 
> 时间：2013-04-05T01:29:46.877
> 
> 标签：runtime-error, marionette, listen, backbone-rails

嗨，我已经为我的 Web 应用程序安装了最新版本的“marionette-rails”和“rails-backbone”，但是在创建新的 marrionette 实例时遇到了问题。

这就是我在 Web 控制台中所做的

```
App = new Marionette.Application() 
```

之后我看到这个错误

```
TypeError: this.listenTo is not a function 
```

![在此处输入图像描述](https://i.stack.imgur.com/8NSHX.png)

这与木偶或骨干的版本控制有关吗？

我该如何解决这个问题，以便创建木偶的实例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T05:02:54.937

我意识到这个问题是由于旧版本的 rails-backbone 造成的。我做了一个 gem 更新以获得最新版本的 rails-backbone 来完成这项工作

# c++ - 为什么我们不应该在 sprintf 中包含最后一个数组元素？

> ID：15824470
> 
> 赞同：1
> 
> 时间：2013-04-05T01:29:55.423
> 
> 标签：c++, c

我有一个如下所示的代码，最后一条语句只有在我使用 l_plates[i] 时才有效。在下面的情况下，它会抛出一个错误“传递 'sprintf' 的参数 1 使指针从整数而不进行强制转换” 如果我也需要另一个用于 N 的 for 循环怎么办。如果我使用 sprintf，我应该使用额外的元素吗？请解释。提前致谢。

```
char type, letters[4], digits[5];
char l_plates[M][N];

for (i=0; i<M; i++) {
    scanf(" %c", &type);
    scanf("%3s", letters); 
    scanf("%4s", digits); 
    sprintf(l_plates[i][N], "%s %s %c", letters, digits, type);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T01:35:40.363

我在这里看到两个问题。首先， sprintf 的第一个参数应该是 a `char*`，而不是 a `char`，这是您发送给它的内容。

其次，一个大小数组的`N`索引从`0`到`N - 1`。通过尝试访问 element `N`，您正在走出数组。最后一个元素是`[N - 1]`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T01:34:45.480

在您的`sprintf`行中，表达式`l_plates[i][N]`指的是单个字符，并且您正在尝试向其写入整个字符串。

该变量`l_plates`是长度字符串的一维数组`N`（或字符的二维数组）。

如果您需要一个二维字符串数组，那么您需要使用以下内容进行定义`l_plates`：

```
char* l_plates[M][N]; 
```

然后相应*地 malloc*那些字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T01:36:42.583

让我们看一下 的声明`l_plates`：

字符 l_plates[M][N];

这表示这`l_plates`是一个字符数组的`N`数组`M`。另一种理解方式是将其视为二维字符数组。

那么是什么类型的`l_plates[i][N]`呢？这是一个`char`！换句话说，它是一个单一的符号。但是，`sprintf()`需要 a`char*`作为它的第一个参数。这就是为什么您的上述代码会出现编译器错误。

另一方面`l_plates[i]`是s的*数组*。`char`C 和 C++ 都可以将此数组转换为 a `char*`，因此编译器不会抱怨。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T01:37:12.837

这是因为`l_plates[i]`它是一个字符串，而`l_plates[i][N]`它是一个字符，尽管它是一个越界字符（因为`N-1`是最后一个字符）。

也就是说，您可能会更好`snprintf()`：

```
snprintf(l_plates[i], N, "%s %s %c", letters, digits, type); 
```

这可以确保你不会溢出你的字符数组。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-05T01:43:19.440

您应该查看指针和数组在 C 中的工作方式。

`l_plates[i][N]`实际上是指 a `char`，所以它甚至不会编译；sprintf 期望`char*`它写入输出的位置。`l_plates[i]`具有 type `char[N]`，可隐式转换为`char*`，指向内部数组的开头。将其作为 sprintf 的参数使其执行您可能想要的操作。

顺便说一句，`l_plates[i][N]`您正在以非法偏移量访问内部数组。大小为 N 的数组的偏移量应在 0 到 N-1 之间。C/C++ 不一定会在运行时抱怨这一点，但它几乎总是一个错误。在这种情况下`l_plates[M-1][N]`，确实指向分配给`l_plates`.

# c# - nhibernate标准设置子类父级的别名？

> ID：15824472
> 
> 赞同：2
> 
> 时间：2013-04-05T01:30:08.360
> 
> 标签：c#, nhibernate, nhibernate-criteria

我有一个抽象基类，其中包含一个名为“DateCreated”的属性；它有许多子类，其中一些相互链接。

当我尝试查询其中一个子类时，我收到 DateCreated 的模棱两可的列错误，因为它包含在多个表中。

以下是标准的片段：

```
.SetProjection(Projections.ProjectionList()
.Add(Projections.GroupProperty(Item.LinkField + ".Id"), "Measure")
.Add(Projections.Count("Id"), "StatCount")
.Add(Projections.GroupProperty("lnk." + Item.LinkTextField), "MeasureText")
.Add(Projections.SqlGroupProjection("MONTH(DateCreated) As [period]", "MONTH(DateCreated)", new[] { "period" }, new IType[] { NHibernateUtil.Int32 }))) 
```

我有什么方法可以指定子类与其父类之间连接的别名作为标准的一部分吗？我认为`CreateAlias`不会起作用，因为没有加入属性。

1.  如果我`{alias}.`给加上前缀`DateCreated`，它将`_this`在生成的 SQL 中加上前缀，虽然那是当前表的别名，但它不是包含该`DateCreated`字段的父表的别名，因此找不到该列。

2.  如果我在生成的 SQL 中为 NHibernate 赋予父表的别名添加前缀，则查询有效，但我认为这可能是个坏主意`this_1_.`。`DateCreated`

这是 NHibernate 生成的 SQL：

```
SELECT TOP (5) this_.incidenttype_id      AS y0_,
               Count(this_.module_id)     AS y1_,
               lnk1_.dicttext             AS y2_,
               Month(this_1_.datecreated) AS [StatFrequency]
FROM   tblincident this_
       INNER JOIN tblmodule this_1_
               ON this_.module_id = this_1_.id
       INNER JOIN tbldict lnk1_
               ON this_.incidenttype_id = lnk1_.id
       LEFT OUTER JOIN tbldictcode lnk1_1_
                    ON lnk1_.id = lnk1_1_.dict_id
       LEFT OUTER JOIN tbldictimage lnk1_2_
                    ON lnk1_.id = lnk1_2_.dict_id
       LEFT OUTER JOIN tbldictsdscategory lnk1_3_
                    ON lnk1_.id = lnk1_3_.dictimage_id
WHERE  this_1_.customer_id = 2
       AND this_1_.isarchive = 0
       AND this_1_.isactive = 1
       AND this_1_.isconfidential = 0
       AND this_.incidentdate BETWEEN '2012/01/01' AND '2013/04/01'
       AND this_1_.isactive = 1
       AND this_1_.customer_id = 2
       AND this_1_.orgunit_id BETWEEN 3 AND 1000
GROUP  BY this_.incidenttype_id,
          lnk1_.dicttext,
          Month(this_1_.datecreated) 
```

在此示例中，tblIncident 是 tblModule 的子类 DateCreated 包含在 tblModule 中。上述条件起作用的唯一原因是因为我传入了“this_1_”，因为它是由 nhibernate 自动分配给它的。使用“{alias}”会输出“this_1”，这会导致错误。

我显然想要一种方法来指定该别名。

# android - 小部件操作 onClick 和 onUpdate 按实例具有单独的功能

> ID：15824474
> 
> 赞同：0
> 
> 时间：2013-04-05T01:30:37.687
> 
> 标签：android, eclipse, android-widget

**更新：解决** [了 Android 小部件 - 点击操作，在 30 分钟内更新，单独的实例](https://stackoverflow.com/questions/15824817/android-widget-click-for-action-update-under-30-minutes-separate-instances)

用代码更正答案：

[Android Widget - 点击操作，在 30 分钟内更新，独立实例](https://stackoverflow.com/questions/15824817/android-widget-click-for-action-update-under-30-minutes-separate-instances)

我需要帮助编写小部件（在示例中，小部件是小部件活动，配置是配置活动）。我只需要小部件类代码。

小部件：

*   每隔几秒执行一次自动更新（用于名称和颜色），从配置活动的例程中检索数据（例如：每 5 秒小部件调用 Configuration.GetData(...)）
*   单击时小部件必须调用另一个过程（例如：Configuration.execute()），然后执行自动更新。

一切都必须在多个实例中工作（所以我必须将 appWidgetId 传递给所有例程）我已经有可以正常工作的配置活动（带有 appWidgetId 标识符的 SharedPreferences）

我已经阅读了很多答案和教程，但是在编码期间，我在小部件上遇到了这个问题：

第一次尝试：-只有一个实例可以正常工作，但是从第二个开始我无法正确获取 appWidgetId（所有小部件都像最新的一样工作）

第二次尝试：-onUpdate（带有alarmManager）对第一个实例工作正常，然后所有实例在它们的时间和其他实例时间自动更新......问题。

# ruby - 获取 Ruby 太平洋标准时间的日期值？

> ID：15824478
> 
> 赞同：0
> 
> 时间：2013-04-05T01:31:34.993
> 
> 标签：ruby, ruby-on-rails-3, mongodb

我们希望使用 Date 类在 Ruby 中以太平洋标准时间显示今天的日期（因为我们使用 Mongo 而 Mongo 无法处理 Time 类）。我们应该怎么做？

从本质上讲，我们要保证`today = Date.to_mongo Date.today`始终以 PST 形式返回今天的日期。

我们在 Rails 3.12 上并使用 MongoMapper。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T07:08:00.340

这有点低级（因为您操纵偏移量，而不是在某处声明“PST”），但可能会奏效：

```
d = DateTime.now.new_offset('-08:00').to_date 
```

不确定您是否有夏令时，这会使事情变得更复杂？

您*可以*将此代码段放入`Date.today`中，但这会覆盖机器设置，因此我会推荐更具体的内容，例如

```
class Date
  def self.today_pst
    DateTime.now.new_offset('-08:00').to_date
  end
end

today = Date.to_mongo Date.today_pst 
```

此外，警告，如果您转换回时间或日期时间，则不会保留该区域。

# javascript - 尝试在画布中有延迟的图像循环

> ID：15824480
> 
> 赞同：0
> 
> 时间：2013-04-05T01:31:55.337
> 
> 标签：javascript, html, arrays, loops, delay

我有 25 张图片想要快速显示，有点像没有效果的幻灯片。我的图像被命名为 0 到 26。

我尝试为延迟设置一个 for 循环和一个 setTimeout，但 setTimeout 仅在 for 循环结束时运行，在我的检查点显示 i = 25。

JS：

```
function startAnimation(){
for(var i=0; i<25; i++){
    setTimeout(function(){
       img = new Image();
       img.src = 'images/canvas/'+[i]+'.jpg';
       img.onload = function(){ctx.drawImage(img,0,0, 850,194)} 

       alert('CP. In setTimeout. i= '+i);
    },1000);
    ctx.clearRect(0,0,canvas.width, canvas.height); //clear image after 1 sec, loop to show next.
    alert('CP outside. i = '+i);            
} 
```

}

我遵循了这个解决方案[如何在 JavaScript 循环中添加延迟？](https://stackoverflow.com/questions/3583724/how-do-i-add-a-delay-in-a-javascript-loop)：

```
function startAnimation(){
    setTimeout(function(){
        img = new Image();
        img.src = 'images/canvas/'+[counter]+'.jpg';
        img.onload = function(){ctx.drawImage(img,0,0, canvas.width,canvas.height)};
        counter++;
        if(counter<26){
            startAnimation();
        }
    },150)
} 
```

它似乎像我想要的那样工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T01:45:27.120

```
//preload your images into an array first for smoother animation

function getImages(callback) {

  var imgs = [],
    loaded = 0,
    length = 25,
    i;

  for (i = 0; i < length; i++) {
    (function (i) {
      //create image
      var img = new Image();
      //set a callbacl
      img.onload = function () {
        //add to array
        imgs[i] = img;
        //increment loaded count
        loaded++;
        //if we loaded all of them, call the callback passing in the images
        if (loaded === length) callback(imgs);
      }
      //load
      img.src = 'images/canvas/' + [i] + '.jpg';
    }(i));
  }
}

function startAnimation(i) {

  //get all images
  getImages(function (imgs) {

    var i = 0;

    //run through ueach in an interval
    var animationInterval = setInterval(function () {

      ctx.clearRect(0, 0, canvas.width, canvas.height);

      if (i < imgs.length) {
        ctx.drawImage(img[i++], 0, 0, 850, 194)
      } else {
        clearInterval(animationInterval);
      }

    }, 1000);

  });
}

//call
startAnimation(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T02:01:24.123

基于以下代码片段：

```
//clear image after 1 sec, loop to show next. 
```

看来您误解了如何`setTimeout`工作。该`setTimeout`函数在返回之前不会等待。它立即返回并安排传递给它的代码/函数在以后执行（在您的情况下为 1 秒）。因此，您的循环所做的是创建 25 个 setTimeout，它们在循环执行后一秒钟同时执行。

围绕这个有两种解决方案。一，每晚一秒创建 25 个 setTimeouts：

```
for(var i=0; i<25; i++){
    setTimeout(function(){/* ... */}, 1000 * i);
} 
```

或者以递归方式调用 setTimeout 来处理您的图像列表：

```
function foo (i) {
    /* ... */
    if (i >= 0) {
        setTimeout(foo(i-1),1000);
   }
}

foo(24); 
```

第二种形式更为常见。

* * *

除了 setTimeout 问题。您还需要阅读闭包在循环中的工作方式，因为在您的循环中，所有 setTimeouts 都将以值执行，`i = 24`而不是`i`值 1 到 24。

请参阅：[请解释循环中 JavaScript 闭包的使用](https://stackoverflow.com/questions/3572480/please-explain-the-use-of-javascript-closures-in-loops/3572616#)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-05T01:59:37.513

与其使用 setTimeOut 和 for 循环，不如使用 setInterval 像这样...

```
var i = 0,
    img;

function startAnimation() {
    if (i >= 24) {
        clearInterval(timer); // or i = 0;
    }
    i++;
    img = new Image();
    img.src = 'images/canvas/' + [i] + '.jpg';
    img.onload = function () {
        ctx.drawImage(img, 0, 0, 850, 194);
    };

    alert('CP. In setTimeout. i= ' + i);

    ctx.clearRect(0, 0, canvas.width, canvas.height); //clear image after 1 sec, loop to show next.
    alert('CP outside. i = ' + i);
}

var timer = setInterval(startAnimation, 1000); 
```

# php - 在数据库中存储时区的正确方法？

> ID：15824482
> 
> 赞同：17
> 
> 时间：2013-04-05T01:32:03.010
> 
> 标签：php, mysql, timezone, save

让我解释一下：我不是在询问将特定日期时间的时区存储在数据库中的正确方法。我说的是时区本身。例如：

我有一个名为“用户”的 MySQL 表。现在，在这张表上，我希望有一列包含用户居住地的时区（这是由用户提供的，它将从列表中选择）。我正在使用 PHP，它有一个时区字符串列表，如下所示：

[美国时区列表](http://www.php.net/manual/en/timezones.america.php "美国时区列表")

现在，显而易见的解决方案（至少对我而言）是在“用户”表中创建一个 VARCHAR 列，然后将 PHP 使用的时区字符串存储在该列中。

现在我考虑一下，假设我将始终使用 PHP 与该数据库表进行交互，虽然现在确实如此，但将来可能不会如此。而且（如果我错了，请纠正我）PHP 的时区字符串可能不适用于其他编程语言，也许其他语言有自己的“常量”来处理时区。

那么，您将如何将用户的时区偏好保存在数据库列中呢？任何想法都值得赞赏。

注意：PHP 时区的有用之处在于，即使 DST 生效，它们也会自动将其考虑在内，这太棒了。所以你可以看到我对使用它们而不是仅仅存储数字偏移量的兴趣。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-05T03:27:34.667

> 而且（如果我错了，请纠正我）PHP 的时区字符串可能不适用于其他编程语言

好的，我会。:)

PHP 实现了[IANA/Olson/TZDB/ZoneInfo 数据库](http://www.iana.org/time-zones)（同一事物有很多名称）。这是最接近行业标准的东西，几乎所有编程语言和平台都实现了它。

唯一不支持它的操作系统是 Microsoft Windows，因为 Microsoft 维护自己的时区数据库。因此，对于以 Windows 为中心的平台，如 .Net，如果您想要支持这种时区样式，则必须使用一些[库。](http://nodatime.org)

[在时区标签 wiki](https://stackoverflow.com/tags/timezone/info)或[Wikipedia](http://en.wikipedia.org/wiki/Tz_database)上阅读更多信息。

所以是的 - 您只需将时区 id 字符串存储为 varchar。这是最好的做法。

# javascript - 如何制作循环？

> ID：15824486
> 
> 赞同：1
> 
> 时间：2013-04-05T01:32:24.887
> 
> 标签：javascript

我有一个 php 数组，它写`<div id="first_<?php echo $z; ?>" class="source">`

我正在尝试在 JavaScript 中创建一个循环，以便可以更改`style.display`每个循环的属性。s的总数`first_`可以是 0 到 100 之间的任何值。

我只知道该怎么做是这样的：

```
function setup() {
    cow = document.getElementById('first_1');
    cow.style.display='none';
    cow = document.getElementById('first_2');
    cow.style.display='none';
    cow = document.getElementById('first_3');
    cow.style.display='none';
  } 
```

我对如何做到这一点的猜测是这样的：

```
for (var i = 0; i < 100; i++) { 
    cow = document.getElementById('first_'var i);
    cow.style.display='none';
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T01:34:20.130

你使用`i`不当。仅`var`在*声明*变量时使用。

```
function setup() {
    for (var i = 0; i < 100; i++) {
        document.getElementById('first_' + i).style.display = 'none';
    }
} 
```

您需要确保您获得的元素存在，因此不会引发异常。您可以通过尝试获取元素来做到这一点，如果它是“真实的”，请设置`style.display`变量：

```
function setup() {
    for (var i = 0; i < 100; i++) {
        var elem = document.getElementById('first_' + i);
        if (elem)
            elem.style.display = 'none';
    }
} 
```

* * *

从我读到的内容，您希望能够提供最大值。您只需添加一个参数：

```
function setup(max) {
    for (var i = 0; i < max; i++) {
        ... 
```

此外，听起来它可以从 0 到 100*包括在内*。在这种情况下，只需将 更改`<`为`<=`：

```
function setup(max) {
    for (var i = 0; i < max; i++) {
        ... 
```

* * *

我建议这是不好的做法，您应该将整个`first_1`through`first_100`块包装在`div`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T01:35:08.380

```
for (var i = 0; i < 100; i++) { 
  var cow = document.getElementById('first_' + (i + 1));
  if (cow)
    cow.style.display='none';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T01:34:54.303

您添加`i`不正确，仅`var`在声明变量时使用，而不是使用它们。试试这个：

```
for (var i = 0; i < 100; i++) { 
    cow = document.getElementById('first_' + i);
    cow.style.display = 'none';
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T01:45:56.857

如果您不需要支持 IE7 或更早版本，则可以使用[**querySelectorAll()**](https://developer.mozilla.org/en-US/docs/DOM/Element.querySelectorAll)，使用属性选择器并遍历结果节点，类似于：

```
var elements = document.querySelectorAll('[id^="first_"]');

for(i = 0; i < elements.length; i += 1){
    elements[i].style.display = 'none';
} 
```

`querySelectorAll()`在 Chrome、FF、Opera、Safari 和 IE8+ 中受支持，并允许您指定任何有效的 CSS 选择器。

这里的好处是您不必预先知道您有多少元素，因为您只需动态创建一个节点集合，这些节点的标识符以该标识符开头`first_`并遍历它。

如果您只想选择以您`div`的 id 开头的元素，`first_`也可以在选择器中更具体并使用`document.querySelectorAll('div[id^="first_"]');`

* * *

[**演示**](http://jsfiddle.net/f2NxC/)- 使用`querySelectorAll()`

* * *

# c - 如何正确执行strcmp？

> ID：15824490
> 
> 赞同：0
> 
> 时间：2013-04-05T01:33:04.410
> 
> 标签：c, arrays, string, strcmp, getchar

我必须将字符串“death”与文本文件中的任意五个字符串进行比较。

我似乎无法让我的功能正常工作，但我看不出我做错了什么。有人有什么建议吗？

*注意：我的 strcmp 只返回 -1 或 1 但从不返回 0

```
#include <stdio.h>
#include <stdbool.h>
#include <string.h>

//Function to check if strings are a match regardless of case
bool doesMatch (char testText[], char testDeath[]) {
 if (strcasecmp(testDeath, testText) == 0) {
      return true;
 }
 else
      return false;
}

int main (int argc, char *argv[]) {
 char test1[5] = {getchar(), getchar(), getchar(), getchar(), getchar()};
 bool testMatch;
 char test2[5] = {'d','e','a','t','h'};

 //Test arrays until End of FIle
 while (test1[4] != EOF) {

      testMatch = doesMatch(test1, test2);
      if (testMatch == true) {
           printf ("Match!\n");
      }

      //"slide" array down one character
      test1[0] = test1[1];
      test1[1] = test1[2];
      test1[2] = test1[3];
      test1[3] = test1[4];
      test1[4] = getchar();

 }

 return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T01:43:18.123

正如 Havenard 所说， strcmp() 需要以空字符结尾的字符串，这意味着每个字符串都需要以字符结尾`'\0'`。如果您坚持自己将字符串拼凑在一起，则必须记住在每个字符串的末尾附加该空字符，以便对它们执行字符串函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T01:42:50.033

to 的参数`strcmp`必须由 NUL 终止。对当前代码的最简单更改是使数组长度为 6 个字符而不是 5 个，并用 0 或 '\0' 初始化第六个字符。或者，您可以`strncasecmp`使用长度为 5 的调用，这也将避免访问数组的第 6 个字符的未定义行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T01:45:25.950

假设您有充分的理由放弃`'\0'`输入的终止，您可以[`strncasecmp()`](http://linux.die.net/man/3/strncasecmp)改用：

```
bool doesMatch (char testText[], char testDeath[], size_t n) {
     return strncasecmp(testDeath, testText, n) == 0;
}

/*...*/
    testMatch = doesMatch(test1, test2, 5); 
```

# python - Python：运行脚本但不在解释器中时出现类型错误

> ID：15824491
> 
> 赞同：0
> 
> 时间：2013-04-05T01:33:17.103
> 
> 标签：python, installation, typeerror

我正在尝试通过命令行或在解释器中使用以下命令运行 Python 文件：

```
import sys
import subprocess
subprocess.call([sys.executable, "file.py", "arg1", "arg2", "arg3"]) 
```

但是程序返回一个 TypeError：“无法连接 'str' 和 'numpy.float64' 对象”。

我无法理解的是，当我在解释器中逐行运行程序时，没有这样的错误，一切都很好。

我不知道从哪里开始调试它，但我怀疑它可能与我的设置有关。

我在 Windows 7 中安装了 64 位版本的 Python 和 32 位版本的 Python。两个版本的 Python 都是 2.7。（这是由于使用了一些仅在 32 位中可用的模块 - 因此上面的程序正在 32 位版本中运行）。环境路径变量已被编辑为仅使用 32 位版本。

我不确定还有哪些其他信息是相关的，但请告诉我，我会挖掘它。

基本上我只想能够从命令运行程序：

```
python program.py arg1 arg2 arg3 
```

任何帮助是极大的赞赏

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T01:39:12.953

您很可能将参数传递给您的函数，而不将它们从它们的字符串表示形式转换 - 当您在解释器中测试代码并为其提供数字时，一切当然都会按预期工作。 *如果*你正在做这样的事情：

```
# Wild guess at what your code actually looks like

if __name__ == "__main__":
    # main_function(23.1, 44.9, 12.21)  # This works when uncommented ... why?
    main_function(sys.argv[1], sys.argv[2], sys.argv[3])  # This breaks ... why? 
```

然后知道当你打电话时：

```
python program.py 23.1 44.9 12.21 
```

你真的`main_function`用以下方式打电话：

```
main_function("23.1", "44.9", "12.21") 
```

您需要使用`float`类型构造函数将参数显式转换为浮点数。

# macos - 我的 .bash_profile 已锁定。我该如何编辑它？

> ID：15824493
> 
> 赞同：6
> 
> 时间：2013-04-05T01:33:44.967
> 
> 标签：macos, .bash-profile

我对我的 Mac 上的这个区域有点陌生。我昨天做了我的 .bash_profile 没有任何问题。现在，当我打开它时，textedit 说它已锁定并且不允许我解锁它。我尝试使用 chmod 644 更改权限，但这没有帮助。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-05T01:40:17.883

给自己该文件的写权限：

```
/usr/bin/sudo /bin/chmod u+rwx /Users/yourusername/.bash_profile
/usr/bin/sudo /usr/sbin/chown yourusername /Users/yourusername/.bash_profile 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-05T01:38:57.173

赛普拉斯弗兰肯菲尔德回答了这个问题

[无法在 Mac OsX 上编辑 bash_profile [关闭]](https://stackoverflow.com/questions/11692100/cannot-edit-bash-profile-on-mac-osx)

> sudo chown your_user_name ~/.bash_profile

# visual-studio - 是否可以更改 IntelliJ IDEA 中的调试快捷键

> ID：15824496
> 
> 赞同：4
> 
> 时间：2013-04-05T01:34:15.607
> 
> 标签：visual-studio, intellij-idea

我花了很多时间在 VS 上，最近开始在 IDEA 工作。VS 和 IDEA 中的调试快捷方式不同。例如，Idea 使用 F7 进入，而 VS 使用 F11。

我正在寻找在 IDEA 中更改调试快捷方式的能力。我做了一些研究并找到了 [keymaps](http://www.jetbrains.com/idea/webhelp/configuring-keyboard-shortcuts.html)。但我的简短研究表明，键盘映射可以让您更改编辑器快捷方式，而不是调试快捷方式。还是我对键盘映射的初步评估是错误的，我们可以用它来配置调试快捷方式？如果不是键盘映射，还有其他方法可以更改 IDEA 快捷方式吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-05T01:38:06.847

我认为您可以在 Keymap > Main menu > Run 下编辑相关快捷键

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-19T18:44:32.347

1.  转到菜单栏中的工具字段
2.  在下拉菜单中选择选项...选项
3.  选择环境
4.  选择键盘
5.  在“显示包含的命令”文本框中输入您尝试实现的操作，例如“Debug.Start”
6.  选择“按快捷键”文本框，然后按您喜欢的键盘配置
7.  单击分配
8.  完毕

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-10-20T21:08:14.463

您可以为 VS 键盘映射添加插件。

1.  转到`File->Settings->Plugins`并搜索键盘映射。我使用了 VSCode 之一。 [![在此处输入图像描述](https://i.stack.imgur.com/IdGgy.png)](https://i.stack.imgur.com/IdGgy.png)
2.  转到`File->Settings->Keymaps`并从列表中选择它 [![在此处输入图像描述](https://i.stack.imgur.com/xyRWx.png)](https://i.stack.imgur.com/xyRWx.png)
3.  完毕！

[![在此处输入图像描述](https://i.stack.imgur.com/WmXwK.png)](https://i.stack.imgur.com/WmXwK.png)

[![在此处输入图像描述](https://i.stack.imgur.com/m8sSG.png)](https://i.stack.imgur.com/m8sSG.png)

# asp.net-mvc - MVC 向导问题

> ID：15824499
> 
> 赞同：1
> 
> 时间：2013-04-05T01:34:40.347
> 
> 标签：asp.net-mvc, asp.net-mvc-3, viewmodel, wizard

我正在尝试在 MVC 中创建一个向导。因为我需要在每一步之后向数据库提交东西，所以我想将数据传回控制器而不是处理这个客户端。不过，我终其一生都无法弄清楚我做错了什么。我有一个包含每个步骤的 ViewModel 的 ViewModel 和一个 StepIndex 来跟踪我在哪里。每个步骤页面都被强类型化到包含的 ViewModel。出于某种原因，当我增加 StepIndex 时，它表明它在控制器中增加了，但它永远不会保留。我有一个隐藏的值，并且传递了 Step1 值。我已经尝试过 model.StepIndex++ 和 model.StepIndex + 1，它们都在控制器中显示为递增，但是在加载视图时使用了不正确的值。我什至关闭了缓存，看看这是否是原因。如果您发现我做错了什么，请告诉我。谢谢你，TJ

包含视图模型

```
public class WizardVM
{
    public WizardVM()
    {
        Step1 = new Step1VM();
        Step2 = new Step2VM();
        Step3 = new Step3VM();
    }

    public Step1VM Step1 { get; set; }
    public Step2VM Step2 { get; set; }
    public Step3VM Step3 { get; set; }
    public int StepIndex { get; set; }
} 
```

Step2 查看

```
@model WizardTest.ViewModel.WizardVM

@{
    ViewBag.Title = "Step2";
}

<h2>Step2</h2>

@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)

    @Html.HiddenFor(model => model.Step1.Foo)
    @Html.HiddenFor(model => model.StepIndex)    
    <fieldset>
        <legend>Step2VM</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.Step2.Bar)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Step2.Bar)
        </div>

        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
} 
```

控制器

```
 public ActionResult Index()
    {
        var vm = new WizardVM
            {
                Step1 = { Foo = "test" }, 
                StepIndex = 1
            };

        return View("Step1", vm);
    }

    [OutputCache(NoStore = true, Duration = 0, VaryByParam = "*")]
    [HttpPost]
    public ActionResult Index(WizardVM model)
    {
        switch (model.StepIndex)
        {
            case 1:
                model.StepIndex = model.StepIndex + 1;
                return View("Step2", model);
            case 2:
                model.StepIndex = model.StepIndex + 1;
                return View("Step3", model);
            case 3:
                //Submit here
                break;
        }

        //Error on page
        return View(model);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T14:14:36.767

在浏览器中检查 Step2 页面并查看隐藏字段的值，确保其值为 2。

放置一个断点`Index(WizardVM)`以检查是否从 Step2 中发布了 2 的值。在某些情况下，以前的值将从模型数据中恢复。有时您需要致电`ModelState.Clear()`或`.Remove("ProeprtyName")`

这将允许您准确缩小问题所在的范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T14:50:08.053

感谢 AaronLS 为我指明了正确的方向。需要进行的上述更改如下。

在视图页面中，将 HiddenFor 更改为 Hidden 就像这样...

```
@Html.Hidden("StepIndex", Model.StepIndex) 
```

并修改控制器以删除每个帖子中的隐藏字段，如下所示......

```
[OutputCache(NoStore = true, Duration = 0, VaryByParam = "*")]
    [HttpPost]
    public ActionResult Index(WizardVM model)
    {
        ModelState.Remove("StepIndex"); 
```

感谢Darin [Dimitrov](https://stackoverflow.com/questions/4710447/asp-net-mvc-html-hiddenfor-with-wrong-value)的解决方案。

# javascript - javascript 使用按钮更改页面背景颜色

> ID：15824504
> 
> 赞同：1
> 
> 时间：2013-04-05T01:34:47.477
> 
> 标签：javascript, button, background-color

我试图弄清楚如何使用按钮更改页面背景颜色的代码

所以基本上我已经写出了一个按钮的代码及其功能，但我无法弄清楚使用什么代码来使按钮改变整个页面的颜色

```
<script>
    function changeColor()
    {

    };
    function changeText()
    {
        alert ("change text in this part");
    };
    function sendMsg()
    {
        alert ("change msg content here");
    }
</script> 
```

```
<body>
    <h1>Welcome to my program!</h1>
        <button onclick="changeColor()">Color</button>
        <button onclick="changeText()">Text</button> </br>
            <p>Can I ask you something Ive always wanted to ask the real Batman?</p> </br>
                 <input type="text" name="">
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T01:37:11.583

```
 document.body.style.background = color; 
```

没有更多的东西，就这么简单！

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-08-18T07:19:14.913

亲爱的，试试这个代码：

```
<FORM> 
<INPUT type="button" value="Change to Yellow!" name="button3" onClick="document.bgColor='yellow'"> <br> 
<INPUT type="button" value="Change to Red!" name="button4" onClick="document.bgColor='red'"> <br> 
<INPUT type="button" value="Change back!" name="button5" onClick="document.bgColor='white'"> </FORM> 
```

# communication - Stellaris 微控制器和 OSX 之间的通信

> ID：15824506
> 
> 赞同：1
> 
> 时间：2013-04-05T01:34:59.813
> 
> 标签：communication, microcontroller, uart

我正在尝试将来自 Stellaris LM4F120 LaunchPad（[链接](http://www.ti.com/tool/ek-lm4f120xl)）ADC 的采样数据发送到运行 OSX 10.6.8 的主机。首先，我尝试使用 UART 每 1.25 毫秒发送 4 个字节的数据，这是我收集数据的速率。我通过在 OSX 端的命令行中运行的 minicom 读取这些值并打印到文本文件中。我测试了我正确地使用 1 Hz 输入正弦波对信号进行采样，并且在绘制结果时发现它是 1.5 Hz 正弦波，这表明发生了混叠。我认为 UART 向主机发送值的速度不够快，这意味着微控制器的采样速度没有我想要的那么快。

我尝试通过创建更大的数据缓冲区并一次发送所有数据来解决这个问题。我的问题是板上的内存只能容纳大约 32 kB，而我需要大约 400 kB，中间没有任何时间滞后。

我不确定接下来要尝试什么。我听说 USB 可能工作，但我不知道从哪里开始这条路。关于下一步采取什么方向的任何建议？我是使用微控制器的新手，所以我不确定在提高发送数据的速率时应该考虑哪些选项。

# c++ - 指向类族中各种类型的指针的限制？

> ID：15824508
> 
> 赞同：2
> 
> 时间：2013-04-05T01:35:20.563
> 
> 标签：c++, class, pointers, inheritance, derived-class

假设我有 4 个班级：A、B、C 和 D。

A 是基类。B源自A。C源自A。

D派生自B。

我有每种类型对象的向量。

我创建了从相关类（家庭？）中排除的第 5 个类，称为 Z。Z 包含一个指向 A 类对象的变量，称为**紫色。**

我可以通过执行以下操作来创建“家族间”通用指针： A * pUniversal;

并将 pUniversal 指向 A、B、C 或 D 可互换地指向存储在其类型向量中的对象。然后将 Z 的**紫色**变量设置为 pUniversal？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T01:55:33.730

是的，你可以这么做。这是拥有派生类的主要好处之一。

如果您有`A`应该由`B`or实现的功能`C`，请确保它们是虚拟的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T01:58:24.060

是的你可以！不，我不是 Obama =P，但您可能会考虑阅读有关[`reinterpret_cast<>`](http://msdn.microsoft.com/en-us/library/e0w9f63b%28v=vs.80%29.aspx)关键字（运算符）的内容。

* * *

**编辑：**`reinterpret_cast<>`可用于将基类的指针转换为派生类的指针。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T02:09:33.667

一个例子：

```
 #include <iostream>
  #include <vector> 
  class A
  {
  public:
    virtual void SayHi() {
      std::cout<<"A says hi"<< std::endl;
    }

  };

    class B : public A
    {
    public:
        virtual void SayHi() {
          std::cout<<"B says hi"<<std::endl;
        }

    };

    class C: public A 
    {
    public:
        virtual void SayHi() {
          std::cout<<"C says hi"<<std::endl;
        }
    };

    typedef std::shared_ptr<A> APtr;
    typedef std::vector<APtr> Container;

  int main()
  {
      Container myContainer;
      // Store A's instance or any of its derivatives.
      myContainer.push_back(APtr(new A));
      myContainer.push_back(APtr(new B));
      myContainer.push_back(APtr(new C));

      for(/*Container::iterator or */ auto pbase = myContainer.begin(); pbase != myContainer.end(); pbase++)
          (*pbase)->SayHi();

      myContainer.clear();

      return 0;
  } 
```

# magento - 将我的所有 EAV 属性添加到产品中

> ID：15824512
> 
> 赞同：0
> 
> 时间：2013-04-05T01:35:56.717
> 
> 标签：magento, magento-1.7

因此，我将通过 Alan Storm 的 Magento 教程并完成有关 EAV 属性的此页面。[http://alanstorm.com/magento_advanced_orm_entity_attribute_value_part_1](http://alanstorm.com/magento_advanced_orm_entity_attribute_value_part_1)

它完美无瑕，但我有几个问题。我有一个 XML 提要，我正在尝试从数据库中读取产品并将其存储在数据库中。虽然这有效，并且它们被添加到创建的新表中，但当我在管理 - > 产品下查看管理员时，没有列出任何产品。

当我转到目录-> 管理属性时，我还在管理员中注意到，我没有看到所有新的 EAV 属性。根据他的解释，并查看新的数据库表，我看到了实际产品数据和属性元数据的存储位置；在我新创建的表格中。

但我想：

1.  在管理员的管理产品中查看我保存到数据库中的所有这些新产品
2.  确保我添加的新 EAV（基于 XML 字段名称）在放置在主管理产品视图中时与这些项目相关联

我完全按照他的代码，只是根据我的实验更改了名称：

```
foreach ($xml as $c) {
        $car = Mage::getModel('vehicleimport/eavvehicle');
        ...
        ...
        ...
        $car->save();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T08:29:00.060

如果想使用 Magento 产品经理，那么你应该坚持 Magento 的核心功能。没有产品，`Catalog > Manage Products`因为您不使用 Mage_Catalog 模块及其实体来存储这些产品。

相反，您正在使用您的自定义模块。这不是存储目录的正确方法。

您似乎想在您的产品上使用一些自定义属性。这很好而且正确。但是您需要将它们添加到`catalog_product`实体中，而不是您的 custom `eavvehicle`。

要添加新产品属性，请转到管理面板`Catalog > Manage Attributes`并创建新属性。有一种方法可以动态创建它们。只需使用`Mage_Catalog_Model_Resource_Setup`对象，例如：

```
 $catalogSetup = Mage::getResourceModel('catalog/setup','default_setup');
$catalogSetup->addAttribute('catalog_product', 'attribute_name', array $attributeDefinition); 
```

或者您可以使用您的模块来定义设置，然后在需要时使用升级脚本添加新属性。

您还可以定义属性集来分组属性。这允许您只在产品上放置必要的属性。

您想`Mage::getModel('catalog/product')`用来添加您的产品。所以你的循环看起来像：

```
 foreach ($xml as $c) {
        $car = Mage::getModel('catalog/product');
        ...
        ...
        ...
        $car->save();
} 
```

如果您使用多个商店视图（可能是语言版本），那么您可以为同一产品设置不同的语言值。要将它们保存到正确的商店，您需要设置正确的商店视图，例如：

```
 $car = Mage::getModel('catalog/product');
$car->setStoreId(Mage::app()->getStore('french')->getId());
$car->setName('French Name of the car');
$car->save(); 
```

如果您不使用多个商店视图，那么`admin`在保存之前在产品上设置商店 ID 是安全的。

在 Magento 中创建新产品的必填字段/属性：

*   属性集ID
*   type_id（即简单、可配置、分组等）
*   website_ids（作为数组）
*   活跃
*   状态（不确定是否是强制性的）
*   能见度
*   根据需要设置的属性集中分组的所有属性（即 sku、名称、价格、tax_class_id 等）

# python-2.7 - 我的 python 代码出现（列表索引超出范围错误）...谁能告诉我一个原因

> ID：15824515
> 
> 赞同：-1
> 
> 时间：2013-04-05T01:36:39.857
> 
> 标签：python-2.7

下面给出的是一个 python 代码，它应该从列表中读取值，并在对每个值进行平方后获取所有值的总和。

```
def squareEach(nums):
    for i in nums[:-1]:
        s=nums[i]*nums[i]
        nums[i]=s

def sums(num):
    sum1=1
    for i in num[:-1]:
        sum1=sum1+num[i]
    return sum1

def toNumbers(strlist):
    for i in range(len(strlist)):
        strlist[i]=int(strlist[i])

file=raw_input("enter a filename: ")
openf=open(file,'w')
openf.write("1 2 3 4 5 6 7 8 9 10")
openf=open(file,'r')

s=''
for i in openf:
    s=i
s=string.split(s)

for i in range(len(s)):
    s[i]=int(i)
squareEach(s)
s=sums(s)
print s 
```

这是程序，我收到错误消息。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T01:40:26.010

Python for 循环遍历列表的元素（而不是索引）：

```
for i in [1, 2, 4]:
   print i

# Prints 1, 2 and 4 
```

您将通过使用每个元素的索引来修改现有的：

```
def squareEach(nums):
    for i in range(len(nums)):
        nums[i] = nums[i]*nums[i] 
```

虽然我会创建一个创建新列表的函数：

```
def squareEach(nums):
    return [n**2 for n in nums] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T01:45:58.093

您的代码存在许多问题。我建议您尝试阅读更多 Python 教程，以确保您了解基础知识。

```
file=raw_input("enter a filename: ") 
```

`file`是内置的，重新定义内置被认为是不好的做法。标准约定是在名称末尾添加下划线，例如`file_`。

```
s=''
for i in openf:
    s=i 
```

这将简单地将 s 分配给文件的最后一行。您可能想要的是`s = openf.read()`，它将为您提供整个文件内容。

```
for i in range(len(s)):
    s[i]=int(i) 
```

这会将 s 的内容分配给一堆整数，完全丢弃您从文件中读取的任何内容。你的意思可能是`s = map(int, s)`. 请注意，map 的使用有些争议，有些人更喜欢列表推导，即使`map`在这种情况下版本更短更容易。

```
for i in nums[:-1]: 
```

这会遍历列表中除最后一个数字之外的所有内容。

```
for i in nums[:-1]:
    s=nums[i]*nums[i]
    nums[i]=s 
```

除了前面提到的切片问题之外，您正在迭代列表中的值，而不是索引。写你想要做的最惯用的方式是

```
nums[:] = [x*x for x in nums] 
```

PS 请阅读在 Stack Overflow 上发布问题的指南。

# macos - 在辅助功能上设置窗口级别

> ID：15824519
> 
> 赞同：7
> 
> 时间：2013-04-04T11:19:34.877
> 
> 标签：macos, objective-c

我正在开发一个操作属于另一个应用程序的窗口的 Mac OS X 应用程序。我为此使用辅助功能。

我已经成功地移动了窗口并从我的应用程序中查询了它的属性。现在我需要让窗口保持“始终在顶部”。根据[另一篇文章](https://stackoverflow.com/questions/3278208/how-do-i-to-make-a-windowosx-always-hover-on-top-of-screen)，我需要将窗口级别设置为 NSFloatingWindowLevel。这可能通过 Accessibility API 实现吗？我没有看到任何与窗口级别相对应的[Accessibility](https://developer.apple.com/library/mac/#documentation/ApplicationServices/Reference/AXAttributeConstants_header_reference/Reference/reference.html)或[Carbon](https://developer.apple.com/library/mac/#documentation/Accessibility/Reference/AccessibilityCarbonRef/Reference/reference.html)属性。

# c# - C# 工作流代码活动结果

> ID：15824525
> 
> 赞同：2
> 
> 时间：2013-04-05T01:37:43.683
> 
> 标签：c#, workflow-foundation-4

您好，我是非常新的工作流。我正在尝试构建一个概念验证工作流，它将处理指定目录中的所有文件。我添加了一个 foreach 循环，然后添加了一个代码活动（ValidateXml），代码活动验证 xml 并返回 bool，它继承了 CodeActivity 类。

现在我看一下图片，我想在 WriteLine 活动中使用 codeactivity 的结果。

请帮助我如何做到这一点。

谢谢！![在此处输入图像描述](https://i.stack.imgur.com/wEQnq.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T07:55:19.910

你想做的事情很容易。请参阅下面的屏幕截图：

![样本](https://i.stack.imgur.com/ktV0e.jpg)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T02:03:21.127

添加一个`bool`变量，例如`bValid`在序列活动中。在 的属性对话框中`ValidateXml`，将 Result 分配给`bValid`。`bValid`将包含`ValidateXml`活动的返回值。

# php - CURL 发布到另一个域 SSL 证书错误

> ID：15824529
> 
> 赞同：1
> 
> 时间：2013-04-05T01:37:59.813
> 
> 标签：php, curl

我正在尝试将 curl 用于 API 的 HTTPS 地址。该 api 只是在发布到的页面上显示一个字符串结果，并且不会返回我的域。我不确定是否有其他方法可以做到这一点，但认为 CURL 是唯一的解决方案。

这有可能只发生在我的本地主机上吗？

接收错误：SSL证书问题，验证CA证书是否OK

```
//set the url, number of POST vars, POST data
curl_setopt($ch,CURLOPT_URL, $url);
curl_setopt($ch,CURLOPT_POST, count($fields));
curl_setopt($ch,CURLOPT_POSTFIELDS, $fields_string);

//execute post
$result = curl_exec($ch);
var_dump(curl_error($ch)); 
```

Result: string 'SSL证书问题，验证CA证书是否OK。详细信息：错误：14090086：SSL 例程：SSL3_GET_SERVER_CERTIFICATE：证书验证失败'（长度=146）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T01:44:28.630

默认情况下，PHP 会尝试验证对等方的证书。

如果你确定你不在乎，你可以这样做来看看 cURL 请求是否可以触发，只是为了测试：

```
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false); 
```

在执行 cURL 调用之前。

正确的方法是实际设置 cURL 调用以使用您的服务器现有的 CA 证书使用`CURLOPT_CAPATH`or `CURLOPT_CAINFO`。

# .net - 为 .net 服务和 GUI 前端存储数据/设置的最佳位置

> ID：15824534
> 
> 赞同：0
> 
> 时间：2013-04-05T01:38:49.477
> 
> 标签：.net, service, special-folders, settings

我有一个作为服务运行并同时作为服务前端运行的程序。

为这两个实例存储文件和数据的最佳策略是什么。

该程序以 3 种模式运行：-

*   完全作为服务
*   服务和前端 GUI（即 2 个实例）
*   图形用户界面

在所有情况下，文件和配置都需要具有创建/读/写访问权限，并且可以在其他所有模式下访问

ApplicationData、LocalApplicationData，似乎是特定于用户的，我不希望该服务在用户帐户下运行

CommonApplicationData，我认为对 UAC 下的普通用户有限制

CommonProgramFiles ProgramFiles 对 UAC 下的普通用户也有限制

但是对于最后两个示例，可以选择设置安装权限

有没有人对此有一个优雅的解决方案，或者可以指出我正确的方向

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T01:48:06.327

`%ALLUSERSPROFILE%`环境变量应该适合您的需要。它指向`C:\Documents and Settings\All Users`WinXP 和`C:\ProgramData`现代 Windows，两者都用于存储与用户无关的程序数据。

# android - 你能使用谷歌应用引擎作为安卓移动应用的服务器端解决方案吗

> ID：15824536
> 
> 赞同：-2
> 
> 时间：2013-04-05T01:38:55.567
> 
> 标签：android, google-app-engine

我有一个 android 应用程序，我想与服务器（和数据库）连接以存储持久数据。我可以使用 google App 引擎来提供此功能，包括帐户验证吗？您可能已经猜到了——我不是网络程序员，但我想选择正确的方向。

更清楚一点 - 我想使用服务器来提供一组 Web 服务，这些服务对存储在数据存储中的数据具有读/写访问权限

干杯，安东

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T01:53:19.273

肯定是的。以下是一些帮助您入门的链接：

1.  [创建一个 App Engine 连接的 Android 项目](https://developers.google.com/eclipse/docs/endpoints-androidconnected-gae)。
2.  [Google I/O 2011: Android + App Engine: A Developer's Dream Combination](http://www.youtube.com/watch?v=M7SxNNC429U) - YouTube 视频。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T01:46:22.640

我想是的，我个人使用 googleAppEngine 网络应用程序作为 ACRA 的 Be（Android 应用程序崩溃报告）。

检查[http://code.google.com/p/acra-reporter/](http://code.google.com/p/acra-reporter/)。

如果您下载发件人（这是 android 端），您将获得一个示例，说明如何通过 http 与 google 应用程序引擎进行交互。

希望这可以帮助 ：）

# asp.net - SQL Server 将行聚合为列值

> ID：15824540
> 
> 赞同：3
> 
> 时间：2013-04-05T01:39:31.300
> 
> 标签：asp.net, sql, sql-server

第一次在这个网站上发帖，但我过去经常使用它。我确实尝试过寻找这个问题的答案，但无法确定如何正确地提出问题，所以就这样吧。

我有一个表，其中每一行的评估编号为 1、2、3 或 4。每一行还有一个 ID，它是成员表的外键，另一个 ID 是与其他数据相关的外键行（保存测试信息的表）。

我需要做的是按成员资格组过滤此记录列表，然后创建某种类型的输出查询，其中列出：

1.  测试ID
2.  评估为 1 的记录数
3.  评估为 2 的记录数
4.  评估为 3 的记录数
5.  评估为 4 的记录数

我可以使用以下方法分别计算每个评估编号的计数：

```
SELECT Count(Eval), scores.TestID
FROM membership INNER JOIN (scores INNER JOIN tests ON scores.TestID = tests.TestID) ON membership.ID = scores.ClientID
WHERE membership.GroupID = <MembershipGroup> AND scores.Eval = 1; 
```

上面是主过滤器，scores.TestID 是“分组”ID，Count(Eval) 是我想要的聚合。基本上我的理想输出是：

```
ID |Count1|Count2|Count3|Count4
----------------------------------
100 |5 |8 |9 |12
101 |16 |2 |14 |11

```

……等等。再次，对不起，如果这是一个乱码，希望你们能提供帮助！

PS。结果查询将从 ASP.NET 检索以绑定到 ListView - 如果有人可以建议我是否最好将其编写为存储过程并查找或将其编码到 ASP 中的 SQLDataSource 中，将不胜感激:-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T01:49:26.650

您应该能够使用`SUM`,`CASE`和`GROUP BY`:

```
SELECT scores.TestID,
    SUM(CASE WHEN Eval = 1 THEN 1 ELSE 0 END) Count1,
    SUM(CASE WHEN Eval = 2 THEN 1 ELSE 0 END) Count2,
    SUM(CASE WHEN Eval = 3 THEN 1 ELSE 0 END) Count3,
    SUM(CASE WHEN Eval = 4 THEN 1 ELSE 0 END) Count4
FROM membership 
    INNER JOIN scores 
        ON membership.ID = scores.ClientID
    INNER JOIN tests ON scores.TestID = tests.TestID
WHERE membership.GroupID = <MembershipGroup>
GROUP BY scores.TestID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T01:49:33.040

考虑到您有一组预定义的 1-4 评估，我将使用案例语句与您的 group by 结合使用。

```
SELECT s.TestId, 
       SUM(CASE WHEN m.Eval = 1 THEN 1 ELSE 0 ) END AS Count1,
       SUM(CASE WHEN m.Eval = 2 THEN 1 ELSE 0 ) END AS Count2,
       SUM(CASE WHEN m.Eval = 3 THEN 1 ELSE 0 ) END AS Count3,
       SUM(CASE WHEN m.Eval = 4 THEN 1 ELSE 0 ) END AS Count4
FROM membership m
    INNER JOIN scores s ON  m.ID = s.ClientID 
WHERE m.GroupId = <MembershipGroup>
GROUP BY s.TestId 
```

至于问题的另一方面，我个人不使用 SQLDataSource 对象。此外，将它放在存储过程中允许您根据需要修改查询逻辑，而无需重新编译。也就是说，仅仅因为您使用的是存储过程并不意味着您不能使用 SQLDataSource 对象。

# mpi - 如何使用 MPI_Allgather

> ID：15824550
> 
> 赞同：1
> 
> 时间：2013-04-05T01:41:16.137
> 
> 标签：mpi

我正在测试 MPI_Allgather，我得到了奇怪的结果......下面的代码给了我一个输出：“P0 received: 0,42,-1780253336,42”。唯一正确的结果是第一个，因为他们都在派出他们的队伍。输出应为：“0, 1, 2, 3”。我不知道为什么这没有按预期工作。

```
int main(int argc, char* argv[])
{
    int rank = 0;
    int size = 0;
    MPI_Init(&argc,&argv);
    MPI_Comm_rank(MPI_COMM_WORLD,&rank);
    MPI_Comm_size(MPI_COMM_WORLD, &size);

    int* arr = new int[4];

    MPI_Allgather(&rank, 1, MPI_INT, arr, 4, MPI_INT, MPI_COMM_WORLD);

    if(rank == 0)
    {
    printf("P0 received: ");
    for(int i=0; i< 4; i++)
        printf("%i,", arr[i]);
    printf("\n");
    }
    delete arr;
    MPI_Finalize();
} 
```

# html - 加载资源失败：服务器响应状态为 404（未找到）错误在服务器中

> ID：15824552
> 
> 赞同：9
> 
> 时间：2013-04-05T01:41:18.793
> 
> 标签：html, .net, css

我正在尝试在我的图像文件夹中加载图像，但它不起作用。

调试时，我看到此错误：

```
Failed to load resource: the server responded with a status of 404 (Not Found) 
```

我的图像编码在 .css 文件中，即

```
background: url("../Images/bgbody.png") no-repeat; 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-05T01:43:52.780

使用浏览器的网络检查器 (F12) 查看浏览器何时请求 bgbody.png 图像、它使用的绝对路径以及服务器返回 404 响应的原因。

...假设 bgbody.png 确实存在:)

您的 CSS 是在样式表文件中还是在`<style>`页面的块中？如果它在样式表中，则相对路径必须相对于 CSS 样式表（而不是引用它的文档）。如果它在页面中，那么它必须相对于当前资源路径。如果您使用非基于文件系统的资源路径（即使用 URL 重写或 URL 路由），那么这将导致问题，最好始终使用绝对路径。

按照您的相对路径，看起来您将图像与样式表分开存储。我认为这不是一个好主意 - 我支持将图像和其他资源（如字体）存储在与样式表本身相同的目录中，因为它简化了路径并且也是一种更合乎逻辑的文件系统安排。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-02-26T15:15:29.763

默认情况下，匿名用户使用 IUSR 帐户。

您需要做的就是：

IIS -> 身份验证 -> 将匿名身份验证设置为应用程序池标识。

问题解决了 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T01:44:35.553

这只是意味着服务器找不到您的图像。

记住图片路径必须是相对于 CSS 文件位置的

检查路径以及图像文件是否存在。

# c - C编程分段错误链表程序

> ID：15824554
> 
> 赞同：0
> 
> 时间：2013-04-05T01:41:47.560
> 
> 标签：c, pointers, linked-list, segmentation-fault

我对 c （和这个站点）相当陌生，并且我在分段错误方面遇到了很多问题。我正在编写一个程序，该程序创建一个数字链接列表并按升序插入值。

```
 void insert(struct element **head, struct element *new){   
            if((*head)->next == NULL && (*new).i > (*(*head)->next).i){
                (*head)->next = new;
                return;     
            }
            if((*head)->next == NULL && (*new).i < (*(*head)->next).i){
                new->next = (*head)->next;
                *head = new;    
                return;
            }
            struct element *prev = *head;
            struct element *current = (*head)->next;
            while(current->next != NULL){
                if((*new).i < (*current).i){
                    prev = current;
                    current = current->next;
                } else if((*new).i > (*current).i){
                    new->next = current;
                    prev->next = new;
                }
            }
        }
        int main (void){
            struct element **head;
            int value;
            printf("%s", "TEST" );
            printf("%s" , "Please type in an integer value. ");
            scanf("%d" , &value);
            printf("%s", "TEST" );
            do{
                printf("%s", "TEST" );
                struct element *new;
                if((new = malloc(sizeof(struct element))) == NULL){
                return(NULL);
                }
                printf("%s", "TEST" );
                (*new).i = value;
                printf("%s", "TEST" );
                if(head == NULL){
                    *head = new;
                    printList(*head);
                }  else if(value <= 0){
                    printListBackwards(*head);
                }   
                else {

                    insert(head, new);
                    printList(*head);
                }
                } while(value > 0); 
```

我不需要关于插入或任何东西的逻辑是否正确的帮助。我什至没有机会真正测试它，因为在提示符后输入整数后，我立即遇到分段错误。我知道这看起来很时髦，但规范要求您使用指向结构的指针（链表的头部）的指针。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T01:55:20.353

您确定要 head 成为 an`element**`而不是 an`element*`吗？这种额外的分离程度会给您带来问题，其中最重要的是难以阅读的代码。

这是让我跳出来的主要内容：

```
if(head == NULL){
    *head = new;
    printList(*head);
} 
```

您正在确认 head 是一个 NULL 指针，然后立即尝试使用`*`. 如果你真的坚持 head 是一个双指针，那么你需要在取消引用之前动态分配它。像这样：

```
if(head == NULL){
    head = malloc(sizeof(element*));
    *head = new;
    printList(*head);
} 
```

这实际上可能在语法上并不完美（我来自 C++），但你明白了。不过，说到 C++，在 C 中将变量命名为“new”通常被认为是不好的做法，因为`new`它是 C++ 中的关键字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T02:06:13.983

```
struct element **head; 
```

你不想要那个。反而，

```
struct element *head = NULL; 
```

然后，当你调用插入时，使用

```
insert(&head, new); 
```

您还有许多其他错误和不良用法，但这是您特定问题的开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T01:45:04.300

您的帖子的第二行出现了段错误

```
if((*head)->next == NULL && (*new).i > (*(*head)->next).i){
    (*head)->next = new;
    return;     
} 
```

分段错误意味着您正在尝试访问不允许访问的内存。例如，您不能取消引用 NULL 指针。

你的`if`陈述是这样评估的。检查是否`(*head)->next`为空。

如果它不为 NULL，则跳过其余部分。

如果它为 NULL，那么您可以将以下每个替换`(*head)->next`为`NULL`. 这意味着以下部分`&& (*new).i > (*(*head)->next.i)`可以重写如下`&& (*new).i > ((*NULL).i)`......

简而言之，您正在尝试取消引用 NULL 指针值。

另请参阅@Parker Kemp 的帖子。有很多次你正确地检查了 NULL 但误解了它的含义。

我可以为你重写代码，但我认为你会从学习[本](http://www.cprogramming.com/tutorial/c/lesson15.html)教程或[本教程中受益更多](http://www.cse.sc.edu/~okeefe/tutorials/kovacs/Linked%20List%20Tutorial.htm)

我强烈建议您绘制数据结构图并为指针绘制箭头。

# php - 将长字符串转换为二维数组 PHP

> ID：15824556
> 
> 赞同：2
> 
> 时间：2013-04-05T01:42:09.470
> 
> 标签：php, string, explode, multidimensional-array, split

我有一个长字符串说“123~456!!!789~012!!!345~678!!!901~234!!!567~890!!!1234~5678”。我已经习惯了这个字符串中的分隔符类型**~**和**!!!** . 谁能建议我一种将这个字符串分解（拆分）为二维数组的有效方法。例子：

```
$txt = "123~456!!!789~012!!!345~678!!!901~234!!!567~890!!!1234~5678". 
```

爆炸/分裂后的二维数组。

```
array[0][0] = 123 ; array[0][1] = 456 ;
array[1][0] = 789 ; array[1][1] = 012 ; 
array[2][0] = 345 ; array[2][1] = 678 ;
array[3][0] = 901 ; array[3][1] = 234;
array[4][0] = 567 ; array[4][1] = 890;
array[5][0] = 1234 ; array[5][1] = 5678; 
```

谢谢。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T01:46:37.787

这就是它所需要的：

```
foreach(explode("!!!",$txt) AS $key => $subarray) {
    $array[$key] = explode("~",$subarray);
}
print_r($array); 
```

快速高效，您将获得二维数组。

见：http: [//3v4l.org/2fmdn](http://3v4l.org/2fmdn)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T01:47:42.260

您可以使用`preg_match_all()`using`PREG_SET_ORDER`然后映射每个项目来消除零索引：

```
$txt = "123~456!!!789~012!!!345~678!!!901~234!!!567~890!!!1234~5678";

if (preg_match_all('/(\d+)~(\d+)/', $txt, $matches, PREG_SET_ORDER)) {
        $res = array_map(function($item) {
                return array_slice($item, 1);
        }, $matches);
        print_r($res);
} 
```

或者，使用 double `explode()`：

```
$res = array_map(function($item) {
    return explode('~', $item, 2);
}, explode('!!!', $txt));
print_r($res); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T01:52:34.650

```
$txt = "123~456!!!789~012!!!345~678!!!901~234!!!567~890!!!1234~5678".
$firstSplit = explode("!!!",$txt);
$newArray = array();

for($i=0;$i<sizeof($firstSplit);$i++){
  $secondSplit = explode("~",$firstSplit[$i]);
  for($j=0;$j<sizeof($secondSplit);$j++){
    $newArray[$i][] = $secondSplit[$j];
 }
} 
```

我认为这样的事情应该有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T01:53:30.787

看看`preg_split()`功能。

```
$txt = "123~456!!!789~012!!!345~678!!!901~234!!!567~890!!!1234~5678";
$array = preg_split ('/!!!|~/', $txt);
print_r($array);

Output: 
Array ( [0] => 123 [1] => 456 [2] => 789 [3] => 012 [4] => 345 [5] => 678 [6] => 901 [7] => 234 [8] => 567 [9] => 890 [10] => 1234 [11] => 5678 ) 
```

# c# - C# AutoResetEvent WaitOne 被调度程序停止

> ID：15824558
> 
> 赞同：-1
> 
> 时间：2013-04-05T01:42:34.000
> 
> 标签：c#, dispatcher, autoresetevent, waitone

```
private void WaitForDriveToBecomeReady()
{
    AutoResetEvent syncEvent = new AutoResetEvent(false); //set wait signal to use later

    //dispatcher to be able to change stuff in xaml from within thread
    Action action1 = new Action(delegate() { grdMain.Children.Add(notification); });
    Action action2 = new Action(delegate() { grdMain.Children.Remove(notification); });
    Thread restoreThread1 = new Thread(()=>{
        grdMain.Dispatcher.Invoke(System.Windows.Threading.DispatcherPriority.Background, action1); //show a notification

        Thread.Sleep(1500); //sleep a bit...

        grdMain.Dispatcher.Invoke(System.Windows.Threading.DispatcherPriority.Background, action2); //hide a notification

        syncEvent.Set(); //signal to continue at *.WaitOne()
    });
    restoreThread1.Start();

    syncEvent.WaitOne(); //let main thread wait until *.Set(); is called
} 
```

如果您注释掉两个 grdMain.Dispatcher.Invoke(...);，上面的代码就可以完美运行。如果您注释掉 *.Set(); ，它也可以正常工作。和 *.WaitOne(); 但是为什么？我两个都需要^^。我不明白...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T01:54:40.900

假设`WaitForDriveToBecomeReady`在 Dispatcher 的线程上被调用，您将显式引入死锁。

考虑执行过程

*   您设置了重置事件
*   线程开始执行
*   调度程序线程调用`syncEvent.WaitOne()`，该线程现在被阻塞，直到该事件被设置
*   第二个线程执行`Dispatcher.Invoke`；这会将消息放入 Dispatcher 的队列并等待它处理它（在主线程上）

所以你让主线程阻塞等待最终将由第二个线程设置的事件。并且您让第二个线程阻塞等待主线程处理消息。教科书僵局。

一般来说，在 UI 线程上等待是不好的；像这样很容易出现死锁，但即使它有效，您仍然会阻止 UI 更新，从而创建一个无响应的程序。根据上面的代码段，很难说如何最好地重新组织您的代码，以便您不必阻塞 UI 线程，但似乎这个概念（准备驱动器，并在它准备好后做某事）将是一个候选者对于[异步方法](http://msdn.microsoft.com/en-us/library/vstudio/hh191443.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-25T15:42:21.057

我终于有时间继续阅读有关 async 和 await 的更多信息。感谢@Jacob 指出问题所在。

这是我的工作异步代码，用于只要您不连接驱动器就会出现的 toast 通知。

```
//the method
public async Task WaitForDriveAsync(string path, string waitingToastText)
{
    int width = 300;
    int height = 125;
    TextBlock toastTextBlock = new TextBlock() { Text = waitingToastText, HorizontalAlignment = HorizontalAlignment.Center, VerticalAlignment = VerticalAlignment.Center, FontSize = 23, Width = (width - 15), TextWrapping = TextWrapping.WrapWithOverflow };
    Grid notification = new Grid();
    notification.Width = width;
    notification.Height = height;
    notification.Background = Brushes.Red;
    notification.Margin = new System.Windows.Thickness(0, 27, 0.4, 0);
    notification.VerticalAlignment = VerticalAlignment.Top;
    notification.HorizontalAlignment = HorizontalAlignment.Right;
    notification.Children.Add(toastTextBlock);

    grdMain.Children.Add(notification);

    while (!Directory.Exists(path))
    {
        await Task.Delay(1000);
    }

    grdMain.Children.Remove(notification);
}

//to call it
private async void btnBackupNow_Click(object sender, RoutedEventArgs e)
{
    await WaitForDriveAsync(@"B:\", "Please connect your drive.");
} 
```

# ruby-on-rails - 插入 rspec 测试通过的 binding.pry 更改

> ID：15824560
> 
> 赞同：3
> 
> 时间：2013-04-05T01:42:54.113
> 
> 标签：ruby-on-rails, rspec, scope, pry, database-cleaner

tl; dr：我试图测试是否将正确的项目添加到数组中。当我运行测试时，它说东西被不加选择地添加到数组中。但是，当我将 binding.pry 放在 LessonPackage.available 的第一行时，测试通过了……但是现在，另外两个测试失败了。

现在这里有一些代码。

在原始测试中，我测试是否将正确数量的项目添加到数组中。这将测试 :current 范围。这是测试：

```
describe 'manage multiple lessons' do
  before :all do
    @six_package = create(:lesson_package)
    @thirteen_package = create(:lesson_package, name: 'thirteen', number_of_lessons: 13)
    @old_package = create(:lesson_package, name: 'canceled', current: false)
    @instructor = create(:instructor, base_lesson_price: 50, contract_rate: 40)
  end

  context 'available' do
    it 'return array of all available package managers when given defaults' do
      packages = LessonPackage.available(@instructor)
      packages.length.should be 2
      packages[0].class.should be LessonPackageManager
    end
  end
end 
```

请注意，@old_package 的“当前”属性应为 false。这是正在测试的代码：

```
class LessonPackage < ActiveRecord::Base
  ...
  scope :current, where(current: true)
  ...
  def self.available(instructor, method = 'self', lesson_type = 'private')
    LessonPackage.current.map do |package|
      manager = LessonPackageManager.make_package(instructor, package, lesson_type)
      manager.send(method)
    end
  end
end 
```

测试失败！但我知道这段代码有效，不仅因为它在开发模式下有效，还因为当我将 binding.pry 放在 LessonPackage.available 的第一行时，它突然有效！但是现在另一个测试被打破了：

```
describe 'managed lesson' do
  before :all do
    @six_package = create(:lesson_package)
    @instructor = create(:instructor, base_lesson_price: 50, contract_rate: 35)
  end

    describe 'booking lessons with a student' do
      before :each do
        @student = create(:student, area: 'herethere')
        package_manager = LessonPackage.manage('six', @instructor)
        package_manager.add_to_cart(@student)
      end

      subject {LessonBooking.first}

      its(:lesson_package)    {should eq @six_package}
    end
  end
end 
```

给出的原因是附加到第一节课预订的课程包的 ID 与创建的原始课程包不同。注意：此测试之前有效。唯一不同的是 binding.pry。

我正在使用 database_cleaner，这就是我配置它的方式：

```
 config.before(:suite) do
    DatabaseCleaner.strategy = :transaction
    DatabaseCleaner.clean_with(:truncation)
  end

  config.before(:each) do
    DatabaseCleaner.start
  end

  config.after(:each) do
    DatabaseCleaner.clean
  end 
```

# javascript - 如何通过javascript禁用浏览器另存为（文件->另存为）？

> ID：15824561
> 
> 赞同：0
> 
> 时间：2013-04-05T01:42:55.453
> 
> 标签：javascript, html, css

我正在寻找一些关于-的信息

如何禁用所有浏览器的“另存为”（文件 -> 另存为）功能。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T01:54:09.363

您不能在所有浏览器上禁用此功能。如果您不希望有人保存您的内容，那么您应该使用您的徽标/版权为内容添加水印。否则，您可能希望围绕您试图避免人们访问并因此能够保存的任何内容安装某种访问控制。

# jpa-2.0 - 使用本机查询连接两个表时出现异常 [EclipseLink-4002]

> ID：15824562
> 
> 赞同：0
> 
> 时间：2013-04-05T01:42:56.317
> 
> 标签：jpa-2.0, eclipselink, glassfish-3, ejb-3.1, nativequery

我有 2 张桌子赞助商和研究。赞助商和研究表中的列是：

赞助商表结构：

```
SponsorId: int primary key auto_increment,
SponsorName: varchar(30) unique not null,
Address: varchar(255) 
```

学习桌结构：

```
StudyId int primary key auto_increment,
StudyName varchar(30) unique not null,
SponsorId int not null foreign key to Sponsors table. 
```

Study to Sponsor 具有多对一关系。

我正在尝试在数据表中显示赞助商和研究中的字段，并对其执行创建、更新和删除操作。

这是我用来填充数据表的方法。

```
public List retrieveStudy() {
  Query query=getEntityManager().createNativeQuery("select"+    
              "s.studyId,s.studyName,s.sponsorId ,sp.sponsorName as"+    
              "sponsorName,sp.address from Study s left join Sponsors sp", 
               Study.class);
    return query.getResultList();
} 
```

在显示研究的数据表时，我想显示 SponsorName 而不是 SponsorId，因此，我使用了连接查询来获取 SponsorName。

现在我可以在数据表中显示 SponsorName，但是当我添加一条记录时，我得到了以下异常。

```
[EclipseLink-4002] (Eclipse Persistence Services - 2.2.0.v20110202-r8913):    orgException .eclipse.persistence.exceptions.DatabaseException
Internal Exception: com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: Unknown column 'SponsorName' in 'field list'
Error Code: 1054 
```

这是我的学习实体类

```
public class Study implements Serializable {
private static final long serialVersionUID = 1L;
@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
@Basic(optional = false)
@Column(name = "StudyId")
private Integer studyId;
@Basic(optional = false)
@NotNull
@Size(min = 1, max = 50)
@Column(name = "StudyName")
private String studyName;
@JoinColumn(name = "SponsorId", referencedColumnName = "SponsorId")
@ManyToOne(optional = false)
private Sponsors sponsorId;

@Column(name="SponsorName")
private String sponsorName;

// Constructors getters,setters
} 
```

jsf页面

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"   
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:p="http://primefaces.org/ui">

    <ui:composition template="/SRAtemplate.xhtml">
        <ui:define name="head">
            <title> Study </title>            
        </ui:define>
    <ui:define name="heading">
        Study 
    </ui:define>
    <ui:define name="body">
        <br/>
        <p:growl id="msg" autoUpdate="true"/>
        <br/>
        <h:form id="addstudyform">
            <p:panelGrid columns="2" styleClass="panelgridstyle">

                <f:facet name="header">
                    Add Study
                </f:facet>

                <h:outputLabel for="StudyName" value="StudyName*:"/>
                <p:inputText id="StudyName" value="#studyController.selected.studyName}" maxlength="20" 
                     required="true" requiredMessage="StudyName must be   entered"
                         validatorMessage="StudyName must be an alphanumeric value">
                    <f:validateRegex pattern="[a-zA-Z0-9\s]+"/>
                </p:inputText>

                <h:outputLabel for="Sponsor" value="Sponsor*:"/>
                <p:selectOneMenu id="Sponsor" value="#{studyController.selected.sponsorId}" effect="fade" effectSpeed="0" 
                       required="true" requiredMessage="Sponsor must be selected">  
                    <f:selectItems value="#{sponsorsController.itemsAvailableSelectOne}" var="sponsor" 
                           itemLabel="#{sponsor.sponsorId}" itemValue="#{sponsor}"/>  
                </p:selectOneMenu>

                <p:commandButton id="btnSaveStudy" value="Save" actionListener="#{studyController.createStudy()}"
                                 update=":studyform:studydt"/>
                <p:commandButton id="btnCancelStudy" value="Clear" type="reset" update=":addstudyform"/>

            </p:panelGrid>
        </h:form>
        <br/>
        <br/>
        <h:form id="studyform" style="alignment-adjust:middle">
            <p:dataTable id="studydt" value="#{studyController.retrieveStudy()}" var="item" 
                         paginator="true" rows="15" emptyMessage="No Records Found">

                <p:column filterStyleClass="filterstyle" filterBy="#{item.studyName}"
                          filterMatchMode="startsWith" style="text-align: left;">
                    <f:facet name="header"> StudyName </f:facet>
                    <h:outputText value="#{item.studyName}"/>
                </p:column>

                <p:column filterStyleClass="filterstyle" filterBy="#{item.sponsor}"
                              filterMatchMode="startsWith" style="text-align: center;">
                        <f:facet name="header"> Sponsor </f:facet>
                        <h:outputText value="#{item.sponsorName}"/>
                </p:column>                 

            </p:dataTable>
            </h:form>
    </ui:define>
    </ui:composition>
</html> 
```

这是 perisistence.xml 文件

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence"   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
   <persistence-unit name="ABCPU" transaction-type="JTA">
       <jta-data-source>jdbc/ABC</jta-data-source>
       <exclude-unlisted-classes>false</exclude-unlisted-classes>           
   </persistence-unit>
 <properties>
        <property name="eclipselink.ddl-generation.output-mode" value="database"/>
        <property name="eclipselink.jdbc.batch-writing" value="Buffered"/>
        <property name="eclipselink.logging.level" value="INFO"/>
        <property name="eclipselink.ddl-generation" value="create-or-extend-tables"/>
    </properties>
</persistence> 
```

**更新**

我认为我收到了错误，因为我在 Study 实体中添加了 SponsorName 列。

我们可以将一个实体的列映射到另一个实体吗？

如果是的话，有人可以建议我怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T12:56:25.127

看来您要做的是按照您希望将事物显示到实体设计中的方式工作，这似乎是个坏主意。当您想以不同的方式显示内容时，您将无法更改整个应用程序。

您不能以您尝试的方式将一个表/实体中的字段映射到另一个表/实体中。您已将您的赞助商实体映射到赞助商表 - StudyName 存在于不同的表中，因此您将始终在读取或写入此实体时遇到异常。以您希望在应用程序中使用它的方式创建实体 - 我认为在 Sponsor java 对象中使用 studyName 或在 study 对象中使用赞助商名称是没有意义的。如果有一个 getSponsorName 检查是否有关联的赞助商并在其上调用 getName，而不是尝试将名称存储在两个位置，难道不是更有意义吗？

如果这是您想要的，有很多选项可以取回字段和/或实体组合。JPQL 可以返回任何东西，例如

```
"SELECT s.studyId, s.studyName, sp.sponsorName, sp.address FROM Study s left join sp.sponsorId sp" 
```

将返回一个包含字段值的 Object[] 列表。或者

```
"SELECT s, sp.sponsorName FROM Study s left join sp.sponsorId sp" 
```

返回包含 Study 对象和引用的赞助商名称的 Object[] 列表。

您还可以使用本机查询并使用 ResultSetMappings 映射结果以获得相同的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T13:57:40.670

我的猜测是这是一个案例问题。尝试将您的 @Column 注释定义为全部大写。

如果你真的想使用驼峰式，那么你需要引用列名，即@Column(name="'StudyName'")。

还有持久性单元属性“eclipselink.jpa.uppercase-column-names”=“true”，它将强制所有列名称为大写。

# text-files - 如何在谷歌驱动器中查看 C# .cs 文件？

> ID：15824571
> 
> 赞同：3
> 
> 时间：2013-04-05T01:43:37.357
> 
> 标签：text-files, mime-types, google-drive-api, file-type

我的谷歌驱动器中有一些 .cs c# 源代码文件，我希望能够直接查看而无需下载它们。我怎样才能做到这一点？一般来说，当有一个文件扩展名不受支持的文本文件时，我如何将其视为来自谷歌驱动器的文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-30T17:06:57.823

看起来有一个 Google Drive App 可以让你看到 c# 文件，它叫做 Neutron Drive。不确定我刚刚尝试的功能如何，尽管它确实有代码突出显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-12T15:58:18.733

不幸的是，目前还不支持许多代码文件类型。[来自支持文档](https://support.google.com/drive/answer/2423485?hl=en&topic=2375192&ctx=topic#)

.txt 受支持，但除了在上传时分配的基础 mime 类型之外，无法查看`as`其他类型的文件。在 C# 的情况下，mime 类型是`text/x-csharp`. 这意味着更改文件的扩展名也无济于事，因为这不会修改 mime 类型。（试过了。不行。）

来自谷歌帮助文档：

**Google 云端硬盘可让您查看以下文件类型：**

```
Image files (.JPEG, .PNG, .GIF, .TIFF, .BMP)
Video files (WebM, .MPEG4, .3GPP, .MOV, .AVI, .MPEGPS, .WMV, .FLV)
Text files (.TXT)
Markup/Code (.CSS, .HTML, .PHP, .C, .CPP, .H, .HPP, .JS)
Microsoft Word (.DOC and .DOCX)
Microsoft Excel (.XLS and .XLSX)
Microsoft PowerPoint (.PPT and .PPTX)
Adobe Portable Document Format (.PDF)
Apple Pages (.PAGES)
Adobe Illustrator (.AI)
Adobe Photoshop (.PSD)
Tagged Image File Format (.TIFF)
Autodesk AutoCad (.DXF)
Scalable Vector Graphics (.SVG)
PostScript (.EPS, .PS)
TrueType (.TTF)
XML Paper Specification (.XPS)
Archive file types (.ZIP and .RAR) 
```

如果 Google 除了支持少数语言之外还支持其他语言，那就太好了，但真正简单的解决方法是允许在匹配的 mime 类型上进行纯文本查看`text/*`。在各种留言板上有很多关于这类功能的请求，但我没有看到任何可以让它看起来像谷歌的东西。

# javascript - 如何更改属性值的一部分

> ID：15824574
> 
> 赞同：0
> 
> 时间：2013-04-05T01:44:18.680
> 
> 标签：javascript, html

我有点棘手。我正在尝试仅更改分配给样式的字符串的一部分。我想用js把两个梯度子句中的50%改成不同的值，而不必在js中创建整个字符串。

是否有某种正则表达式交换与`setAttribute`？

```
<a class="item" id="bob" style="
background-image:-moz-linear-gradient(0deg, rgb(0, 255, 0) 0%, rgb(250, 250, 5) 50%, rgb(252, 3, 3) 100%);
background-image:-webkit-linear-gradient(0deg, rgb(0, 255, 0) 0%, rgb(250, 250, 5) 50%, rgb(252, 3, 3) 100%);
filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#00ff00',endColorstr='#fc0303',GradientType=1);">MYtext</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T03:51:46.053

该`style`属性是一个对象，而不是一个字符串。因此，您必须执行以下操作：

```
var bob = document.getElementById('bob');

var background = bob.style.backgroundImage;

if (background) {
    bob.style.backgroundImage = background.replace('50%','70%');
} 
```

如果您愿意，也可以`setAttribute`在`style`对象上使用：

```
bob.style.setAttribute('backgroundImage' ... 
```

但`setAttribute`在处理`style`对象时不能在 IE 上可靠地工作（或工作方式不同）。只需使用更短且更可靠的对象访问语法：

```
bob.style.backgroundImage = ... 
```

* * *

见：[http ://www.quirksmode.org/dom/w3c_core.html](http://www.quirksmode.org/dom/w3c_core.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T02:23:04.890

啊！

```
var el = document.getElementById('bob');
el.setAttribute('style', el.getAttribute('style').replace('50%', '30%')); 
```

但这会更好：

```
var el = document.getElementById('bob');
el.style.backgroundImage = el.style.backgroundImage.replace(/50%/g, '30%'); 
```

# java - 如何从匿名类内部访问封闭类实例变量？

> ID：15824577
> 
> 赞同：2
> 
> 时间：2013-04-05T01:44:36.147
> 
> 标签：java, anonymous-class, anonymous-inner-class

如何`instance variables`从匿名类的方法内部访问？

```
class Tester extends JFrame {

   private JButton button;
   private JLabel label;
   //..some more

   public Tester() {
        function(); // CALL FUNCTION
   }

   public void function() {
      Runnable r = new Runnable() {
         @Override
         public void run() {
            // How do I access button and label from here ?
         }
      };
      new Thread(r).start();
   }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-05T01:46:01.370

您正在寻找的是一个完全合格的地址，因为它们没有被标记`final`

```
final Runnable r = new Runnable() {
public void run() {
    Tester.this.button // access what you need
    Tester.this.label  // access what you need
}}; 
```

`Anonymous Inner Classes`您在构建`ActionListeners`和其他事情时也使用相同的访问模式。

这在规范中被解释为[15.8.4 Qualified this](http://docs.oracle.com/javase/specs/jls/se5.0/html/expressions.html#15.8.4)，反对票的人显然没有读过。也没有阅读代码来理解。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T01:53:53.817

> 如何`instance variables`从匿名类的方法内部访问？

如果需要，您只需访问它们：

```
class Tester extends JFrame {

   private JButton button;
   private JLabel label;
   //..some more

   public Tester() {
        function(); // CALL FUNCTION
   }

   public void function() {
      Runnable r = new Runnable() {
         @Override
         public void run() {
            System.out.println("Button's text is: " + button.getText());
         }
      };
      new Thread(r).start();
   }
} 
```

更重要的是：为什么这对你不起作用？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-06-30T07:55:59.063

以下代码可能会向您解释格式是`IncloseingClassName.this.VariableName;`

```
class Tester extends JFrame {
int abc=44;//class variable with collision in name
int xyz=4 ;//class variable without collision in name
public Tester() {
function(); // CALL FUNCTION  
}
public void function() {
Runnable r = new Runnable() {
int abc=55;//anonymous class variable
     @Override
     public void run() {
      System.out.println(this.abc);  //output is 55        
      System.out.println(abc);//output is 55 
      System.out.println(Tester.this.abc);//output is 44 
      //System.out.println(this.xyz);//this will give error
      System.out.println(Tester.this.xyz);//output is 4 
      System.out.println(xyz);//output is 4 
            //output is 4 if variable is declared in only enclosing method 
            //then there is no need of Tester.this.abcd ie you can directly 
            //use the variable name if there is no duplication 
            //ie two variables with same name hope you understood :)

     }
  };
  new Thread(r).start();
   }  } 
```

# bash - Bash 脚本：如何使用列表中的变量

> ID：15824578
> 
> 赞同：1
> 
> 时间：2013-04-05T01:44:49.803
> 
> 标签：bash, shell, unix, loops, scripting

我正在尝试编写一个脚本，该脚本将报告上次在文件夹中更新文件的时间。这些文件夹每天都会创建 例如：/home/user/todaysdate。在 todaysdate 文件夹中存在创建某些内容时创建的文件夹。例如，我们将有 fol1 fol2 fol3。我正在尝试获取一个脚本来登录每个文件夹并显示最后创建文件的时间。

```
#!/bin/bash
folder=`date +%Y%m%d`
ssh -q server "cd /home/user/$folder/ ; bash -c "ls -la | uniq" > list.txt 
```

这将创建一个包含不同文件夹的列表。现在我需要 ssh 进入我被卡住的每个文件夹。list.txt 的输出将是： fol1 fol2 fol3

```
ssh -q server "bash -c \"ls -ltr /home/user/$folder/<Need List Variable Here> | tail -1\"" awk '{print $8} 
```

上面的命令给了我时间。我相信我需要一个 while 循环来 ssh 进入服务器并进入在 list.txt 中创建的变量，但我无法继续工作。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T03:26:23.433

如果 list.txt 是空格分隔的（例如“fol1 fol2 fol3”），请尝试 bash for/in 循环：

```
for folder in $(cat list.txt);
do
    echo $folder;
done 
```

如果 list.txt 是换行符分隔然后尝试 bash while 循环：

```
cat list.txt | while read folder;
do
    echo $folder;
done 
```

有关 bash 循环的更多信息，请参阅此页面。

[http://tldp.org/HOWTO/Bash-Prog-Intro-HOWTO-7.html](http://tldp.org/HOWTO/Bash-Prog-Intro-HOWTO-7.html)

# android - 获取 ImageView 从中加载图像的文件名

> ID：15824579
> 
> 赞同：2
> 
> 时间：2013-04-05T01:44:55.947
> 
> 标签：android

我正在寻找 ImageView 对象的内置方法来告诉我从哪个文件中检索了图像。

例如，在我之前调用的代码中......

```
ImageView iv = new ImageView(MainActivity.this);                
iv.setImageBitmap(BitmapFactory.decodeFile(f.getAbsolutePath())); 
```

假设我不再引用“f”并且需要找出 f 是什么。有没有办法做到这一点？我的工作是创建一个扩展 ImageView 的类并有一个与之匹配的字符串。（或者在 ImageView 和 String 之间创建一个 Map）

建议？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-05T04:14:23.713

最简单的解决方法可能是为 ImageView 使用标签：

```
ImageView iv = new ImageView(MainActivity.this);
String path = f.getAbsolutePath();                 
iv.setImageBitmap(BitmapFactory.decodeFile(path));
iv.setTag(path); 
```

检索路径：

```
String path = (String) iv.getTag(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T01:53:06.003

据我所知，所有 BitmapFactory.decodeFile 返回的是一个位图。由于位图可以来自任何来源（并非所有来源都有路径，例如来自 RAM），因此它没有封装在其中的文件路径。

关于您的解决方法 - 任何方法都可以，但选择一个取决于您的内存/速度要求。例如，如果您只有一对，您可以使用 Pair 代替地图，或者您可以只将路径保留在位图旁边 - 但这只是吹毛求疵。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T03:23:40.423

```
// GET THE URI FROM THE IMAGE (YOU NEED A BITMAP FOR THIS -  WORKAROUND FOLLOWS)
Uri tempUri = getImageUri(getApplicationContext(), bitmap);

public Uri getImageUri(Context inContext, Bitmap inImage) {
    ByteArrayOutputStream bytes = new ByteArrayOutputStream();
    inImage.compress(Bitmap.CompressFormat.JPEG, 100, bytes);
    String path = Images.Media.insertImage(inContext.getContentResolver(), inImage, "Title", null);
    return Uri.parse(path);
}

// THE WORKAROUND (OPTIONAL IN CASE YOU DO NOT HAVE A BITMAP)
Bitmap bitmap = ((BitmapDrawable)youImageView.getDrawable()).getBitmap(); 
```

**信用：[https ://stackoverflow.com/a/8306683/450534](https://stackoverflow.com/a/8306683/450534)**

```
// NOW THAT YOU WILL HAVE THE URI, USE THIS TO GET THE ABSOLUTE PATH OF THE IMAGE
File finalFile = new File(getRealPathFromURI(tempUri));

public String getRealPathFromURI(Uri uri) {
    Cursor cursor = getContentResolver().query(uri, null, null, null, null); 
    cursor.moveToFirst(); 
    int idx = cursor.getColumnIndex(MediaStore.Images.ImageColumns.DATA); 
    return cursor.getString(idx); 
} 
```

根据我使用 Android 的经验，我唯一需要的是当我开始使用 Twitter4J SDK 和 TwitPic API 时。TwitPic 需要你要上传的图片的绝对路径。这是我找到的最好的解决方案（实际上是几种不同解决方案的组合），但它总是很有魅力。希望它可以帮助你。

# asp.net - C#中SqlParameter的性能

> ID：15824581
> 
> 赞同：0
> 
> 时间：2013-04-05T01:45:05.633
> 
> 标签：asp.net, sql-server

我有一个这样的存储过程：

```
create proc wsp_test
(
    @age           int
    , @userName    varchar(30)
)
as
    select    userID, userName
    from      Users
    where     userName  like '%' + @userName + '%'
    and       age > @age 
```

这是 C# 代码：

情况1：

```
SqlCommand _cmd = new SqlCommand();
_cmd.Parameters.Add("age", SqlDbType.Int, 4);
_cmd.Parameters.Add("UserName", SqlDbType.VarChar, 30); 
```

案例2：

```
SqlCommand _cmd = new SqlCommand();
_cmd.Parameters.Add("age", SqlDbType.Int);
_cmd.Parameters.Add("UserName", SqlDbType.VarChar); 
```

案例3：

```
SqlCommand _cmd = new SqlCommand();
_cmd.Parameters.Add("age");
_cmd.Parameters.Add("UserName"); 
```

案例4：

```
SqlCommand _cmd = new SqlCommand();
_cmd.CommandText = "EXEC wsp_test 20, 'John'"; 
```

现在我的问题是，指定参数的数据类型或长度与性能有什么关系？

哪一个的性能最好？是否有任何来自 Microsoft 网站的文档可供我依赖？

或者是否有任何安全原因来指定参数的数据类型和长度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T02:07:00.440

与此相比，数据类型的性能完全无关紧要：

```
where     userName  like '%' + @userName + '%' 
```

查询的这个特定部分将比处理参数花费更多的时间。

我建议在这个阶段不要关心性能。太早了。当然不是微基准是否指定参数的类型和长度。看看其他因素。是的，您应该指定类型，它使代码更易于维护，并且可以使运行时转换问题更容易识别和解决。

如果您稍后确定此特定代码是您的应用程序的瓶颈，请考虑对用户名字段使用全文。您还可以查看此代码使用情况的统计信息，并确定您是否真的需要它。大多数查询是否与用户名完全匹配或至少以开头匹配？对于您的用例来说，首先搜索完全匹配是否会更好，这会明显更快，并且只搜索未找到完全匹配的部分匹配？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T05:08:23.707

为了清楚起见，为了清楚无误地传达您的**意图**，我会使用

**案例5**：

```
SqlCommand _cmd = new SqlCommand();
_cmd.Parameters.Add("age", SqlDbType.Int);
_cmd.Parameters.Add("UserName", SqlDbType.VarChar, 30); 
```

对于`SqlDbType.Int`，指定大小没有必要也没有意义 - 它**始终是**4 个字节并且无法更改，无法调整。

对于`SqlDbType.VarChar`，我**总是**会指定长度，只是为了清楚你想在这个参数中拥有什么。这可能不是绝对需要的——但我喜欢对这类事情非常明确。

从性能的角度来看，我猜案例 1-3 将是等效的（给予或接受），而案例 4 对我来说似乎有点可疑，我不知道也不能真正判断是否做这种方式会对性能产生（负面）影响；我一开始就永远不会这样做（目前还不清楚，你在做什么并不那么明显，你没有使用参数来传递你的值 - 只是混乱！）

# plugins - 有什么方法可以访问 ElasticSearch 插件中的瞬态集群设置/状态？

> ID：15824582
> 
> 赞同：1
> 
> 时间：2013-04-05T01:45:11.323
> 
> 标签：plugins, elasticsearch

我想为插件存储一些在 ElasticSearch 集群中共享的简单状态（键值对）。（注意——插件不仅仅是一种存储状态的工具/方法，我想在插件中使用这种状态。）我尝试通过集群更新设置 API 执行此操作，

```
Settings newSettings = ImmutableSettings.settingsBuilder()
    .put(MY_SETTING, MY_VALUE).build();
client.admin().cluster().prepareUpdateSettings()
    .setTransientSettings(newSettings).execute().actionGet(); 
```

但是，不幸的是，这不起作用，因为`MY_SETTING`没有在`IndexDynamicSettingsModule`. 我不知道如何连接到那个模块（可能是它的`addDynamicSetting`方法）。**有没有办法在瞬态集群设置中存储自定义键值**？（参见[HTTP API](http://www.elasticsearch.org/guide/reference/api/admin-cluster-update-settings/ "HTTP API")）。

至于**替代方案**，似乎节点状态 API 可以返回自定义值，但这些更多的是人们可以通过插件计算和返回的东西，而不是可以存储为状态的东西。将值存储在静态变量中，并通过广播操作将这些值分布在整个集群中是一种选择，但如果它存在，我更喜欢简单的东西。

任何解决方案都需要对 ElasticSearch 版本升级相当稳健。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T10:35:19.997

动态设置的注册方式在 0.90 中进行了更改。因此，没有任何解决方案可以同时兼容 0.20.x 和 0.90.x 版本。对于 0.90.x 版本，您可以使用`addDynamicSettings`以下方法注册动态设置：

```
public class MyPlugin extends AbstractPlugin {

    /* ... */

    public void onModule(IndexDynamicSettingsModule indexDynamicSettingsModule) {
        indexDynamicSettingsModule.addDynamicSettings("index.my.setting");
    }
} 
```

至于替代方案，您可以通过实现和注册自己的[自定义数据工厂](https://github.com/elasticsearch/elasticsearch/commit/dfa67bf07166d99b674646860ade1a397010f600)来将数据添加到状态中。然后，您可以在主节点上更新集群状态并在所有节点上监听插件中的集群状态变化。

# ios - 设置 UIImageView.frame 偶尔会导致 EXC_BAD_ACCESS

> ID：15824583
> 
> 赞同：0
> 
> 时间：2013-04-05T01:45:14.683
> 
> 标签：ios, objective-c, cocoa, ios6, uiimageview

我得到一个 EXC_BAD_ACCESS。我已经尝试了所有有关不良访问的建议，但没有运气。我知道这是我设置 UIImageView 框架时造成的。

这是代码...

```
_backImageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"cardback_brothers_royal"]];
CGRect imageFrame = _backImageView.frame;
imageFrame.origin.x = -9;
imageFrame.origin.y = -9;
imageFrame.size.width = 151;
imageFrame.size.height = 225;
_backImageView.frame = imageFrame; 
```

回溯：

```
0   0x33cf3a22 in -[UIView(CALayerDelegate) actionForLayer:forKey:] ()
1   0x33aa201e in -[CALayer actionForKey:] ()
2   0x33aa1fce in actionForKey(CALayer*, CA::Transaction*, NSString*) ()
3   0x33aa1eba in CA::Layer::begin_change(CA::Transaction*, unsigned int, objc_object*&) ()
4   0x33a9d9e6 in CA::Layer::set_position(CA::Vec2<double> const&, bool) ()
5   0x33a9d8a2 in -[CALayer setPosition:] ()
6   0x33a9d832 in -[CALayer setFrame:] ()
7   0x33cf2aec in -[UIView(Geometry) setFrame:] ()
8   0x33cf2814 in -[UIImageView _setViewGeometry:forMetric:] ()
9   0x33cf2752 in -[UIImageView setFrame:] ()
10  0x0006cd88 in -[CardView loadBack] 
```

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2013-04-05T02:33:49.433

总是尝试像这样设置你的 ImageView 框架： YourImageView.frame = CGRectMake(x_position,y_position,width,height);

# javascript - 使用asp.net处理Repeater控件内的复选框列表

> ID：15824587
> 
> 赞同：0
> 
> 时间：2013-04-05T01:45:32.480
> 
> 标签：javascript, asp.net, .net, repeater

绑定中继器控件后，我的复选框如下所示，

我在这里有两个疑问：

1.  如果我选择第 1 组的复选框，则应选择第 1 组下的所有项目。我怎样才能做到这一点 ？

2.  我有“全选”按钮，单击该按钮应选择所有组的所有项目。由于复选框位于转发器控件内，我不确定如何处理它。

```
 Group 1
       Item 1
       Item 2

    Group 2
       Item 3
       Item 4

    Group 3
       Item 5 
       Item 6

  ASPX : 

    <ol>
        <asp:Repeater ID="rp_Groups" runat="server" OnItemDataBound="rp_Groups_ItemDataBound">
            <ItemTemplate>
                <ul>
                    <asp:CheckBox RepeatColumns="2" runat="server" ID="chk_Group" Text='<%# Eval("category_type") %>' Value='<%# Eval("service_type_category_id") %>' onclick="OnGroupClick" />

                     <asp:CheckBoxList runat="server" ID="chkServiceType" style="padding-left:20px" DataValueField="ServiceTypeID" DataTextField="Name" EnableViewState="true"
                     ></asp:CheckBoxList>

                  <br />
                </ul>
            </ItemTemplate>
        </asp:Repeater>
    </ol>

<script type="text/javascript">
    function OnGroupClick(group) { 
  for(item in group.getElementsByTagName('input')) {
     item.checked = group.checked;
  }
}

   function selectAll() {
        $("#<%=chkServiceType.ClientID %> input[type=checkbox]").each(function () {
            this.checked = true;
        })
    }
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T07:25:01.243

您需要从转发器 Itemdatabound 事件中添加复选框 onclick 事件，如下所示以调用 JavaScript 函数。

```
protected void rp_Groups_ItemDataBound(object sender, RepeaterItemEventArgs e)
    {
         try
        {
            System.Web.UI.WebControls.CheckBox chk =  (System.Web.UI.WebControls.CheckBox)e.Item.FindControl("chk_Group");

            chk.Attributes.Add("onclick", "selectGroupAll("+chk.ClientID+");");
        }
         catch (Exception ex)
         {

         }

    } 
```

然后你需要用 JavaScript 编写函数

1）选择组复选框的功能（我从后面的页面传递复选框组的客户端ID。现在我找到属于一个组的所有复选框并将它们选中为真。）

```
function selectGroupAll(chk) {         

            $(chk).parent().parent().find(":checkbox").attr("checked", true);

        } 
```

2）在按钮单击时选择全部

用 JavaScript 编写函数并从按钮单击事件中调用它

```
function selectAll() {

            $(':checkbox').each(function () {
                this.checked = true;
            });
        } 
```

调用函数的按钮形式

```
 <input type="button" value="Test" onclick="selectAll();" /> 
```

# android - Android 布局左侧的文本和右侧的图像

> ID：15824588
> 
> 赞同：1
> 
> 时间：2013-04-05T01:45:43.520
> 
> 标签：android, xml, android-relativelayout, android-imageview

我正在尝试制作一个列表，其中图像始终位于布局的右侧。同时，如果没有图像，我希望主题文本填满整个布局。

这就是我希望
在 Image is Hide
![在此处输入图像描述](https://i.stack.imgur.com/xGEgS.png)
With Image时实现的目标
![在此处输入图像描述](https://i.stack.imgur.com/2KhJ0.png)

当前输出：
文本前面的图像。
![在此处输入图像描述](https://i.stack.imgur.com/iA6jT.png)

```
<?xml version="1.0" encoding="UTF-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:padding="6dip" android:layout_height="?android:attr/listPreferredItemHeight">
    <TextView
        android:id="@+id/subject"        
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_alignParentBottom="true"
        android:text="Apple Orange Apple Orange Apple Orange Apple Orange Apple Orange Apple Orange"/>
    <TextView
        android:id="@+id/cdate"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"       
        android:layout_alignParentLeft="true"
        android:layout_alignParentBottom="true" 
        android:textColor="#8000FF"       
        android:text="Date" />
    <ImageView  
        android:id="@+id/icon"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"      
        android:layout_alignParentRight="true" 
        android:layout_alignRight="@id/subject"
        android:src="@drawable/icon" />
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T02:04:34.913

试试这个......干杯:)

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:padding="6dip" android:layout_height="?android:attr/listPreferredItemHeight">

<ImageView
    android:id="@+id/icon"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true" 
    android:src="@drawable/icon" />

<TextView
    android:id="@+id/subject"        
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"    
    android:text="Apple Orange Apple Orange Apple Orange Apple Orange Apple Orange Apple Orange"
    android:layout_toLeftOf="@id/icon"/>
<TextView
    android:id="@+id/cdate"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"       
    android:layout_alignParentLeft="true"
    android:layout_alignParentBottom="true" 
    android:textColor="#8000FF"       
    android:text="Date" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T02:05:46.180

你应该这样做：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="?android:attr/listPreferredItemHeight"
    android:padding="6dip" >

    <ImageView
        android:id="@+id/icon"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:src="@drawable/mark_ok" />

    <LinearLayout
        android:id="@+id/leftblock"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/subject"
        android:layout_alignTop="@+id/subject"
        android:layout_toLeftOf="@+id/icon"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/subject"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Apple Orange Apple Orange Apple Orange Apple Orange Apple Orange Apple Orange" />

        <TextView
            android:id="@+id/cdate"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Date"
            android:textColor="#8000FF" />
    </LinearLayout>

</RelativeLayout> 
```

# playframework-2.1 - 调用 form.get() 方法时出现 @inputDate 的执行异常

> ID：15824591
> 
> 赞同：0
> 
> 时间：2013-04-05T01:45:56.077
> 
> 标签：playframework-2.1, executionexception

我有一个日期类型的输入。属性是这样的：

```
@Formats.DateTime(pattern="dd/MM/yyyy")
public Date prazo; 
```

在`*.scala.html`文件中，我尝试了这个：

```
@helper.input(pedidoForm("prazo"), '_label -> "Prazo", '_help -> "") { (id, name, value, args) => 
    <input type="date" name="@name" id="@id" maxlength="14" @toHtmlArgs(args)>
} 
```

和

```
@inputDate(pedidoForm("prazo"), '_label -> "Prazo", '_help -> "") 
```

它编译并且似乎工作正常，但在控制器中我有类似的东西：

```
Form<Pedido> pedidoForm = form(Pedido.class).bindFromRequest();
...
pedidoForm.get(); // throws execution exception 
```

有谁知道会发生什么？

感谢您的关注。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T06:32:12.287

我认为您输入的日期格式错误。

形成我尝试过的。如果您`22/03/1989`作为输入值输入，则没有运行时异常。但是如果你输入`22 03 1989`了，就会发生异常。我认为这是因为您将`prazo`字段定义为`dd/MM/yyyy`日期格式。

所以让我们再看一遍。如果将`prazo`字段定义为`dd MM yyyy`日期格式，并且输入值`22 03 1989`作为输入值，则不会出现运行时异常。此外，还有一些我感兴趣的东西，如果你输入`22/03/1989`了也没有运行时异常。但是，使用您之前输入的日期，**无法正确解析**。

在这个阶段，我认为框架接受值就像`dd/MM/yyyy`一个`Date`对象。但是，如果您希望显示或输入其他日期格式，**则应**`@Formats.DateTime(pattern="dd MM yyyy")`使用注释。

# android - 使用 AsyncTask 实现 API 并将结果更新到 UI

> ID：15824597
> 
> 赞同：2
> 
> 时间：2013-04-05T01:46:09.580
> 
> 标签：android, android-asynctask

我在 API 中使用 AsyncTask 来执行网络操作。在 UI 部分有一个按钮，点击它会触发 API 来执行请求/异步任务。API 正在实现从 onPostExecute() 方法更新的回调。一旦 onPostExecute() 将数据传递给回调，API 就会获取正确的数据。这一切都很好。但是我在更新到 UI 时遇到了一些概念问题。这就是我想要实现的目标： 1-单击 UI 上的“按钮” 2-我想将 API 的响应字符串更新为 UI。我在执行 AsyncTask 后得到的这个响应字符串。

问题是 API 在当前执行线程中总是返回 null 作为响应。一旦 UI 线程完成，我就会看到 API/AsyncTask 数据进来。我知道我遗漏了一些非常微不足道但很重要的东西。你知道在 UI 上更新 API 响应的正确方法是什么吗？

**[更新]**

这是我的 UI 代码，其中包括单击按钮通过 API 触发异步任务（只是另一个实现回调以获取服务器响应的类）

```
button.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
                            API api = new API();
            Request request = new Request();
                    request.setUrl("http://www.example.com/");
                    api.fetch(request);

            try {
//It doesn't matter how much you wait here to return the response. 
//Response from task doesn't return in this thread. 
//If I click another button say "refresh" to refresh the data, then api.getResponseString() shows the response from server.
                Thread.sleep(2000);
//api.getResponseString() returns null. I expect it to return data just retrieved from server
                String text = api.getResponseString();
                System.out.println("Text: " + text);
                textView.setText(text);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    }); 
```

**API 代码**

```
public class Api implements ResponseCallbacks {

String responseString = null;

public void fetch(Request request) {
    makeRequest(request, this);
}

public void makeRequest(Request request,
        final ResponseCallbacks responseCallbacks) {
    MyTask asyncTask = new MyTask();
    asyncTask.setResponseCallbacks(responseCallbacks);
    asyncTask.execute(request);
}

@Override
public void onSuccess(Response response) throws IOException {
    if (response.isSuccess()) {
        responseString = "Success";
    } else {
        responseString = "Failed";
    }
}

public String getResponseString() {
    return responseString;
}
} 
```

**异步任务代码**

```
public class MyTask extends AsyncTask {
private ResponseCallbacks responseCallbacks;

public MyTask() {}

public void setResponseCallbacks(ResponseCallbacks callbacks) {
    this.responseCallbacks = callbacks;
}

@Override
protected Response doInBackground(Request... params) {
    Request request = params[0];
    Response Response = null;

    try {
        //Make Http call and gets response from remote server here...
    } catch (Exception e) {

    }

    return response;
}

protected void onPostExecute(Response response) {
    if (response.isSuccess()) {
        try {
            if (response.isSuccess()) {
                callbacks.onSuccess(response);
            }
        } catch (Exception e) {
            callbacks.onFailure(response);
        }
    }
}

} 
```

我想要的是在单击按钮后在 textView 中更新从服务器返回的文本。

***[更新 2]*** 显然，我发现如果我再定义一个回调，比如 UICallback 并让我的活动注册它，就可以解决问题。

**UICallback：**

```
public interface UICallback {
public void onFailure(String response);
void onSuccess(String response) throws IOException;
} 
```

让 Activity 实现它：

```
public class MainActivity extends Activity implements UICallback {
    .......
    api = new NetApi();
api.setUICallbacks(this);
    .......

    @Override
public void onSuccess(String response) throws IOException {
    String text = api.getResponseString();
//works !
    textView.setText(text);

}
} 
```

有没有人有比这更好的解决方案？我真的不喜欢 Activity 实现额外回调的想法。如果我的 api 本身可以通过 api.getResponseString() 完成获取数据后提供服务器响应，那就太棒了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T23:58:51.693

我的猜测是，您正在寻找的实际上是[runOnUIThread](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)。

如果你在 中使用它`onPostExecute`，你可以刷新你的 UI 数据，而无需注册回调和诸如此类的东西。像这样：

```
protected void onPostExecute(Response response) {
  if (response.isSuccess()) {
    try {
        if (response.isSuccess()) {

             runOnUiThread(new Runnable() {
                public void run() {
                    textView.setText(text);

                }
            });
        }
    } catch (Exception e) {
        callbacks.onFailure(response);
    }
  }
} 
```

同步替代方案是在主线程中使用 Runnable。您必须重新定义 MyTask 才能实施`Runnable`，然后`join`立即实施。像这样

```
Thread asyncTask = new Thread(MyTask());
asyncTask.start();
asyncTask.join();//gets called as soon as the task ends 
```

我的任务将是

```
public class MyTask implements Runnable{

     public void run(){
         //do whatever you need to do
     }
} 
```

# java - Java web start 不会自动下载相应的 JRE

> ID：15824601
> 
> 赞同：0
> 
> 时间：2013-04-05T01:46:34.343
> 
> 标签：java, jnlp, unsupported-class-version

听说Java web start 会自动下载最新的JRE。但它没有这样做。这是我的问题。

```
#### Java Web Start Error:
#### java.lang.UnsupportedClassVersionError: JVMCFRE003 bad major version; class=com/ibm/nzna/projects/qit/Qit, offset=6 
```

我知道我得到了这个，因为我已经在 J​​DK 7 上编译了代码并且我的机器有 JDK 6。如果我需要在我的 jnlp 文件中提及任何特定行，请告知

```
<?xml version="1.0" encoding="utf-8"?>

<!-- Do not edit! last regenerated 2012-11-11 05:50 PST by ReplicatorSender -->
<!DOCTYPE jnlp PUBLIC "-//Sun Microsystems, Inc//DTD JNLP Descriptor 6.0//EN" "http://java.sun.com/dtd/JNLP-6.0.dtd">
<!-- doctype points to Sun, not Oracle for compatibility. -->
<jnlp spec="6.0+" codebase="sample" href="qit_fester.jnlp" version="6.5.2">

  <information>
    <title>Quest Input Tool Fester 6.5.2</title>
    <vendor>Ashish Tyagi</vendor>
    <description>Quest Input Tool helps software and technology group to publish the information about product and document</description>
    <description kind="short">Quest Input Tool Fester</description>
    <description kind="one-line">Quest Input Tool Fester</description>
    <description kind="tooltip">QIT-FESTER</description>
    <!-- relative to codebase, need copy in same dir as jar, and jnlp file. -->
    <icon href="logo_fester.jpg" width="64" height="64" kind="default" />
    <icon href="qit_splash.gif" width="128" height="128" kind="splash" />
    <!-- online only -->
    <!-- create desktop shortcut to run the Replicator -->
    <offline-allowed/>
    <shortcut online="true">
      <desktop />
      <menu submenu="QIT" />
    </shortcut>
  </information>

  <security>
    <all-permissions />
  </security>

  <update check="background" policy="prompt-update" />

  <resources>
    <!-- any vendor -->
    <java version="1.6+"     java-vm-args="-ea" initial-heap-size="128m" max-heap-size="512m" />

    <!-- application code, download jar before we start. -->
    <jar href="qit_Ver3.1.jar" main="true" download="eager" />
    <jar href="lib/mail.jar" download="lazy" />
    <jar href="lib/activation.jar" download="lazy"/>
    <jar href="lib/bootstrap.jar" download="lazy"/>
    <jar href="lib/commons-discovery.jar" download="lazy"/> 
    <jar href="lib/commons-logging-api.jar" download="lazy"/>
    <jar href="lib/db2jcc.jar" download="lazy"/>
    <jar href="lib/db2jcc_license_cu.jar" download="lazy"/>
    <jar href="lib/HTMLWindow.jar" download="lazy"/>
    <jar href="lib/j2ee.jar" download="lazy"/>
    <jar href="lib/jaxp-api.jar" download="lazy"/>
    <jar href="lib/jtidy.jar" download="lazy"/>
    <jar href="lib/jxl.jar" download="lazy"/>
    <jar href="lib/kunststoff.jar" download="lazy"/>
    <jar href="lib/log4j-1.2.17.jar" download="lazy"/>
    <jar href="lib/LotusWordProcessor.jar" download="lazy"/>
    <jar href="lib/ras.jar" download="lazy"/>
    <jar href="lib/sax.jar" download="lazy"/>
    <jar href="lib/webservices.jar" download="lazy"/>
    <jar href="lib/wsexception.jar" download="lazy"/>
    <jar href="lib/xerces.jar" download="lazy"/>
    <jar href="lib/resource.jar" download="lazy"/>

    <!-- set -D system properties -->
    <property name="VIA" value="website" />
    <property name="AUTHENTICATION" value="none" />
    <property name="DEBUGGING" value="false" />
  </resources>

  <!-- application class with main method -->

</jnlp> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T02:29:35.480

> UnsupportedClassVersionError

问题是（99% 确定）代码是使用 1.7 SDK 编译的，*而没有使用[交叉编译选项](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/javac.html#crosscomp-options)*。

***请注意，要正确***进行交叉编译，需要访问`rt.jar`1.6 版本的 JRE 或 SDK。

# sql - Oracle 错误处理

> ID：15824604
> 
> 赞同：0
> 
> 时间：2013-04-05T01:46:51.287
> 
> 标签：sql, oracle

我正在编写一个程序并尝试记录一些 sql 插入查询成功状态。我不知道如何将 if ERR insert 写入错误日志表。

```
insert into TableA (select * from TableB);
commit;

**if (show ERR <> NULL)
 insert into TableErr** 
```

谁能告诉我我该怎么做？尝试搜索，但不知道要查找什么键

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T01:52:34.457

它被称为“异常处理”。看看[这个教程](http://www.plsql-tutorial.com/plsql-exception-handling.htm)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T10:55:37.610

除了在 PL/SQL 中处理错误的经典方法外，如果您使用 SQL 加载批量数据，请考虑使用错误处理表。

来自文档：[http ://docs.oracle.com/cd/E11882_01/server.112/e17120/tables004.htm#InsertDMLErrorLogging](http://docs.oracle.com/cd/E11882_01/server.112/e17120/tables004.htm#InsertDMLErrorLogging)

> 当您使用带有子查询的 INSERT 语句加载表时，如果发生错误，则该语句将终止并完全回滚。这可能会浪费时间和系统资源。对于此类 INSERT 语句，您可以通过使用 DML 错误记录功能来避免这种情况。
> 
> 要使用 DML 错误记录，请添加一个语句子句，该子句指定错误记录表的名称，数据库将在 DML 操作期间遇到的错误记录到该表中。当您将此错误日志记录子句添加到 INSERT 语句时，某些类型的错误将不再终止并回滚该语句。相反，会记录每个错误并继续执行该语句。然后，您稍后对错误的行采取纠正措施。

# php - 如何使用这个 jQuery 表达式查询我的 HTML？

> ID：15824606
> 
> 赞同：0
> 
> 时间：2013-04-05T01:47:20.040
> 
> 标签：php, html, dom

我正在处理 HTML，我需要查询它的特定子集，但我只知道如何使用 jQuery 选择器轻松完成此操作。

这是我的 PHP 代码：

```
$words = array('word');        
$baseUrl = 'http://lema.rae.es/drae/srv/search?val='; //word goes at the end        
$resultIndex = 0;

foreach($words as $word) {
    if (!isset($_REQUEST[$word]))
        continue;
    $contents = file_get_contents($baseUrl . urldecode(utf8_decode($_REQUEST[$word])));

    // THIS DOESN'T WORK! HOW DO I WRITE THIS IN PHP
    $dataineed = $contents.find(".ul a").attr("href"); 

    $contents = preg_replace('/(search?[\d\w]+)/','http://lema.rae.es/drae/srv/',     $contents);

    echo "<div id='results' style='
      //style
     ", (++$resultIndex) ,"'>", $dataineed, $contents,
        "</div>";
} 
```

我将在 jQuery 中使用的查询是这样的：

```
.find(".ul a").attr("href") 
```

如何使用 PHP 和 DOM 编写它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T01:52:20.000

使用 XPath：

```
$doc = new DOMDocument();
$doc->loadHTML($contents);
$xp = new DOMXPath($doc);

$dataineed = $xp->query('//*[contains(concat(" ",@class," ")," ul ")]//a')
    ->item(0)
    ->getAttribute('href'); 
```

# php - CGI 指数收益率 403（禁止）

> ID：15824612
> 
> 赞同：0
> 
> 时间：2013-04-05T01:48:18.003
> 
> 标签：php, nginx, fastcgi

我在 ubuntu 计算机上使用 php-cgi 运行 nginx。`/`除了访问从 nginx 产生“403 Forbidden”的主要细节之外，一切似乎都运行良好。参观`/index.php`作品就好了。如果我添加`index.html`并继续使用`/`它也可以。

```
server {
    root /home/ajcrites/projects/php/devays/public/;
    server_name sub.localhost;

    location ~ \.php$ {
        try_files $uri =404;
        fastcgi_split_path_info ^(.+\.php)(/.+)$;
        fastcgi_pass 127.0.0.1:9000;
        fastcgi_index index.php;
        include fastcgi_params;
    }
} 
```

似乎`fastcgi_index index.php;`会涵盖这一点，但显然情况并非如此。有什么我需要添加才能`/`服务的`/index.php`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T16:29:46.603

你需要添加`index.php`到你的 index 指令中，这样你就有了类似的东西`index index.html index.php;`

请参阅[http://nginx.org/en/docs/http/ngx_http_index_module.html](http://nginx.org/en/docs/http/ngx_http_index_module.html)

# android - 通过ajax发送android本地HTML表单到远程php服务器

> ID：15824613
> 
> 赞同：0
> 
> 时间：2013-04-05T01:48:34.293
> 
> 标签：android, android-webview

有没有办法通过 ajax 将 android 本地 HTML 表单发送到远程 php 服务器？（本地意味着文件在我的设备中） 我的情况是：在我的应用程序中，我的 android 设备中有一个 html 文件并加载到 webview 中，我的设备中也有 javascript 文件。我想要做的是将 html 表单数据发送到远程服务器。在我目前的情况下，它没有发送任何数据，我检查了 javascript 和 php 并且代码很好，并且它可以在应用程序的 iOS 版本上运行。我尝试了其他解决方法，我观察到的是，当我使用本地文件在 webview 中加载 html 文件时（例如 webview.loadUrl("file://"+ Environment.getExternalStorageDirectory()+"/android_asset/list. html")，android 正在本地寻找所有其他相关文件（例如 formsprocessor.php），尽管在 javascript/ajax 中，其函数中的所有必要参数都已正确提供。我遇到的错误是： FileNotFound: content://packagename.com/formsprocessor.php & Unknown chronium error: -6。有没有办法或最好的方法是什么？

谢谢，克林特。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T01:59:09.303

这解决了我的问题：使用了 javascripthandler，在我的 javascript 中，我从处理程序调用函数。所以基本上，android使用httppost处理数据上传到服务器。这是代码；

处理程序：

```
final class IJavascriptHandler{
     IJavascriptHandler(){}

     public void sendJSONToAndroid(String text){
            if(!Config.canConnect((ConnectivityManager) getSystemService(CONNECTIVITY_SERVICE), home) && dialogNoConnFlag == false)                 {
                    dialogNoConnFlag = true;
                    Config.notificationMsg(Config.ERRORNOCONN,home, Config.TITLE1 + " " + Config.TITLE6);
                    return;
                }
                try {
                    Log.v("SendToServer","Send JSON to Server");
                    String url = "";
                    JSONObject json_data = new JSONObject(text);
                    JSONArray names= json_data.names();
                    JSONArray values = json_data.toJSONArray(names);
                    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
                    for(int i = 0 ; i < values.length(); i++){
                        Log.v("Good",names.getString(i).toString());
                        if(names.getString(i).equals("url")) {
                            url = json_data.getString(names.getString(i)).toString();
                        }
                        nameValuePairs.add(new BasicNameValuePair( names.getString(i).toString(),  json_data.getString(names.getString(i)).toString()));

                    }
                    Config.uploadToServer(nameValuePairs, url);
                } 
                catch (JSONException e) 
                {
                     Config.notificationMsg(Config.ERRORMSG + e.getMessage(), (Activity) home, Config.TITLE1 + " " + Config.TITLE6);
                }
           }

    } 
```

httppost：

```
 public static String uploadToServer(List<NameValuePair> nameValuePairs, String url){
    if(Session.isordinaryHost)
    {
        httpclient = new DefaultHttpClient();
    }
    else
    {
        httpclient = new MyHttpClient().getNewHttpClient();
        ((AbstractHttpClient) httpclient).getCredentialsProvider().setCredentials(
              new AuthScope(Session.siteIp, 443), 
              new UsernamePasswordCredentials(Session.siteUsername, Session.sitePassword));
    }
    httppost = new HttpPost(url);  
    try 
    {
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

        // Execute HTTP Post Request
        HttpResponse response = httpclient.execute(httppost);
        HttpEntity entity = response.getEntity();  
        EntityUtils.toString(entity);  
    }
    catch (ClientProtocolException e) 
    {
         return e.getMessage();
    } 
    catch (IOException e) 
    {
         return e.getMessage();
    } 
    return null;
} 
```

的JavaScript：

```
function CheckCompleteRecords() {
DB.transaction(function(tx) {
    tx.executeSql(SelectCompleteForUploadStatement, [], function(tx, result) { 
    Dataset = result.rows;
        for (var i = 0, item = null; i < Dataset.length; i++) {
            item = Dataset.item(i);
    var a = createJSON(item['FormName'],item['UserID'],item['Image1'],item['Image2'],item['Image3'],item['Image4'],item['Image5'],item['Field1'],item['Field2'],item['Field3'],item['Field4'],item['Field5'],item['Field6'],item['Field7'],item['Field8'],item['Field9'],item['Field10'],item['Field11'],item['Field12'],item['Field13'],item['Field14'],item['Field15'],item['Field16'],item['Field17'],item['Field18'],item['Field19'],item['Field20'],item['Field21'],item['Field22'],item['Field23'],item['Field24'],item['Field25'],item['Field26'],item['Field27'],item['Field28'],item['Field29'],item['Field30'],item['Field31'],item['Field32'],item['Field33'],item['Field34'],item['Field35'],item['Field36'],item['Field37'],item['Field38'],item['Field39'],item['Field40'],item['Field41'],item['Field42'],item['Field43'],item['Field44'],item['Field45'],item['Field46'],item['Field47'],item['Field48'],item['Field49'],item['Field50'],item['Field51'],item['Field52'],item['Field53'],item['Field54'],item['Field55'],item['Field56'],item['Field57'],item['Field58'],item['Field59'],item['Field60'],item['Field61'],item['Field62'],item['Field63'],item['Field64'],item['Field65'],item['Field66'],item['Field67'],item['Field68'],item['Field69'],item['Field70'],item['Field71'],item['Field72'],item['Field73'],item['Field74'],item['Field75'],item['Field76'],item['Field77'],item['Field78'],item['Field79'],item['Field80'],item['Field81'],item['Field82'],item['Field83'],item['Field84'],item['Field85'],item['Field86'],item['Field87'],item['Field88'],item['Field89'],item['Field90'],item['Field91'],item['Field92'],item['Field93'],item['Field94'],item['Field95'],item['Field96'],item['Field97'],item['Field98'],item['Field99'],item['Field100'],item['CurrentDateTime'],item['Geolocation'],item['BarCode']);                             
    window.cpjs.sendJSONToAndroid(a);

            showStuff('SendServerBtn');
            window.location = "senttoserver://app_action";
    }
    });
});
} 
```

# asp.net-mvc-3 - MVC Telerik Grid 中的分页不起作用

> ID：15824621
> 
> 赞同：0
> 
> 时间：2013-04-05T01:49:13.513
> 
> 标签：asp.net-mvc-3, telerik-grid

我正在做一个项目，该项目将在页面上显示已毕业和当前学生。我使用 Telerik 网格在客户端呈现了该信息。该页面有两个单选按钮 - 一个单选按钮用于显示已毕业的学生，​​另一个单选按钮用于显示当前学生。每次用户单击其中一个单选按钮时，它都不会发布。现在的学生比研究生多。当用户访问当前学生的最后一页然后单击研究生单选按钮时，它不会显示任何研究生。Telerik 页面未按预期更新。本科生页面有 23 页，而研究生页面有 18 页。即使我们有 18 页，访问研究生页面仍然在第 23 页。

我按照这个例子添加了一个

```
.Pageable(paging => paging.Enabled((bool)ViewData["paging"]).PageTo(1)) 
```

它不会回到第一页。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T02:31:25.500

我不知道如何使这个分页正常工作。结果，我创建了两个会话变量，其值为 true 或 false，我将用户重定向到同一页面，将研究生和本科生标志设置为 false 或 true。如果用户是第一次进入，研究生标志被设置为 false，页面不会重定向。为本科生创建了相同的逻辑。

# jquery - Safari 浏览器不处理 JQuery 对，但在 IE|Chrome|FireFox 中可以正常工作

> ID：15824631
> 
> 赞同：2
> 
> 时间：2013-04-05T01:50:02.360
> 
> 标签：jquery, html, safari, cross-browser

我正在为我的兄弟制作一个页面。我主要使用 Jquery 和 HTML 来构建它。

我遇到的问题是页面在 IE Chrome 和 FireFox 中加载良好，但是当你在 Safari 中加载它时它会爆炸。如果不完全分开，您就无法访问卷轴链接。当你点击 reals 时，它应该展开 4 个视频。然后，当您单击另一个按钮时，它应该关闭这些按钮并继续前进。然而，它只是让它们打开。这仅在 Safari 中提醒您。

这是链接 [http://anthonyrussell.info/test/jbp/index.html](http://anthonyrussell.info/test/jbp/index.html)

这是我的来源

```
<!--This site is an RT Applications Inc. Production (http://www.AnthonyRussell.info) -->
<!--None of the content on this site is in the public domain. Anything that is taken from this site must first be approaved by the sites owner-->
<!--http://www.JaysonBernard.com Is owned by JaysonBernard and maintained by RT Applications Inc.-->

<html> 
    <head>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script><!--  for running live--> 
     <!--  <script src="jquery-1.9.1.min.js"></script>  <!--for running local-->
       <script> 
        $(document).ready(function(){       
            $("#WelcomeTable").hide();
            $("#Count").show();
            $("#Count").text("5").delay(500).fadeOut(1000,function(){
                $("#Count").text("4").show().delay(500).fadeOut(1000,function(){
                    $("#Count").text("3").show().delay(500).fadeOut(1000,function(){
                        $("#Count").text("2").show().delay(500).fadeOut(1000,function(){
                            $("#Count").text("1").show().delay(500).fadeOut(1000, function(){                               
                                $("#WelcomeTable").fadeIn(500,function(){
                                    $("#WelcomeImage").fadeIn(500);
                                    $("#Title").fadeIn(500,function(){
                                        $("#HomeBt").fadeIn(500,function(){
                                            $("#ReelBt").fadeIn(500,function(){
                                                $("#ResumeBt").fadeIn(500,function(){
                                                    $("#PhotosBt").fadeIn(500,function(){
                                                        $("#ContactBt").fadeIn(500);
                                                    });
                                                });
                                            });
                                        });
                                    });                                 
                                });
                            }); 
                        });
                    });
                });
            });
            $("#HomeBt").click(function(){
                $("#video").hide();
                $(".content").hide();
                $("#WelcomeImage").slideDown(200);
            });
            $("#ReelBt").click(function(){
                $("#video").hide();
                $(".content").hide();
                $("#WelcomeImage").slideUp(200, function(){
                    $("#ReelPage").slideDown(1000);
                });
            });
            $("#ResumeBt").click(function(){
                $("#video").hide();
                $(".content").hide();
                $("#WelcomeImage").slideUp(200, function(){
                    $("#ResumePage").slideDown(1000);
                });
            });
            $("#PhotosBt").click(function(){
                $("#video").hide();
                $(".content").hide();
                $("#WelcomeImage").slideUp(200, function(){
                    $("#PhotosPage").slideDown(1000);
                });
            });
            $("#ContactBt").click(function(){
                $("#video").hide();
                $(".content").hide();
                $("#WelcomeImage").slideUp(200, function(){
                    $("#ContactPage").slideDown(1000);
                });
            });
            $("#submit").click(function(){
                alert("I Told you not to click me bitch!");
            });
            $("#img1").mouseover(function(){
                $("#img1").css("width","400");
            });
            $("#img1").mouseout(function(){
                $("#img1").css("width","200");
            });
            $("#img2").mouseover(function(){
                $("#img2").css("width","400");
            });
            $("#img2").mouseout(function(){
                $("#img2").css("width","200");
            });
            $("#img3").mouseover(function(){
                $("#img3").css("width","400");
            });
            $("#img3").mouseout(function(){
                $("#img3").css("width","200");
            });
            $("#img4").mouseover(function(){
                $("#img4").css("width","400");
            });
            $("#img4").mouseout(function(){
                $("#img4").css("width","200");
            });
            $("#img5").mouseover(function(){
                $("#img5").css("width","400");
            });
            $("#img5").mouseout(function(){
                $("#img5").css("width","200");
            });
            $("#img6").mouseover(function(){
                $("#img6").css("width","400");
            });
            $("#img6").mouseout(function(){
                $("#img6").css("width","200");
            });
            $("#img7").mouseover(function(){
                $("#img7").css("width","400");
            });
            $("#img7").mouseout(function(){
                $("#img7").css("width","200");
            });
            $("#img8").mouseover(function(){
                $("#img8").css("width","400");
            });
            $("#img8").mouseout(function(){
                $("#img8").css("width","200");
            });
            $("#img9").mouseover(function(){
                $("#img9").css("width","400");
            });
            $("#img9").mouseout(function(){
                $("#img9").css("width","200");
            });
            $("#img10").mouseover(function(){
                $("#img10").css("width","400");
            });
            $("#img10").mouseout(function(){
                $("#img10").css("width","200");
            });
            $("#img11").mouseover(function(){
                $("#img11").css("width","400");
            });
            $("#img11").mouseout(function(){
                $("#img11").css("width","200");
            });
            $("#img12").mouseover(function(){
                $("#img12").css("width","400");
            });
            $("#img12").mouseout(function(){
                $("#img12").css("width","200");
            });
            $("#img13").mouseover(function(){
                $("#img13").css("width","400");
            });
            $("#img13").mouseout(function(){
                $("#img13").css("width","200");
            });
        });
       </script>

    </head>
    <body>
    <!--Buttons and Landing page logic-->
        <center>
            <table border=0 id="WelcomeTable" style="display:none; float:center;">

                    <td width=350>
                        <!--<p id="Title" style="display:none; font-size:70; line-height:55%; margin:2%">Jayson Bernard</p>-->
                        <img id="Title" style="display:none; margin:2%" src="images/jbLogo.png"/>
                        <br>
                        <table border=0>
                            <td width=350 height=50>                                                    
                                <button id="HomeBt" style="height:50; width:60; display:none;">Home</button>
                                <button id="ReelBt" style="height:50; width:60; display:none;">Reel</button>
                                <button id="ResumeBt" style="height:50; width:70; display:none;">Resume</button>
                                <button id="PhotosBt" style="height:50; width:60; display:none;">Photos</button>
                                <button id="ContactBt" style="height:50; width:70; display:none;">Contact</button>                  
                            </td>
                        </table>
                    </td>

                    <td>
                        <img style="display:none; line-height:70%;" id="WelcomeImage" src="images/landingPageImg.png" height=800 >
                    </td>

            </table>
            <p id="Count" style="font-size:150; margin:10% 45%; display:none;"></p>     
        </center>       
        <!--END-->

        <!--BEGINING-->
        <center>
            <table style="display:none;" id="ReelPage" class="content">
                <tr>
                    <td>
                        <h1>Reel</h1>
                    </td>
                </tr>
                <tr>
                    <td>                
                        <iframe width="560" height="315" src="http://www.youtube.com/embed/Hgc0FBJEZr4?rel=0" frameborder="0" allowfullscreen></iframe>         
                        <iframe width="560" height="315" src="http://www.youtube.com/embed/ZfsoW2YY9o8?rel=0" frameborder="0" allowfullscreen></iframe>
                    </td>
                </tr>
                <tr>
                    <td>
                        <iframe width="560" height="315" src="http://www.youtube.com/embed/uJO5O78qx54?rel=0" frameborder="0" allowfullscreen></iframe>                     
                        <iframe width="560" height="315" src="http://www.youtube.com/embed/gr0zfqVa0CM?rel=0" frameborder="0" allowfullscreen></iframe>
                    </td>
                </tr>
            </table>
        </center>
        <!--END-->

        <!--BEGINING-->
        <center>
            <table style="display:none;" id="ResumePage" class="content">
                <td width=600>
                    <h1>Resume</h1>
                    <p>Hair: Brown<br/>
Eyes: Blue<br/>
Height: 6'1"<br/>
Weight: 190 lbs<br/>
<br/>
FILM CHARACTER DIRECTOR<br/>
"The Landlord" "QVC Host" By: Emile Hyde<br/>
" D.I.N.K.'s" " Charles" By: Robert Alaniz<br/>
" An Unfortunate Idea" "The Clown" By: Nick Scala<br/>
" ILL WILL" "Chris" By: T.A. Jones<br/>
" XYRESIN" "Luke" By: Rice Omary<br/>
<br/>
TELEVISION<br/>
"Taking the Lunge" Reality show (me) Pesent<br/>
" Chicago Fire" "First basemen" 2012<br/>
"Underemployed" "Protective Father" 2011<br/>
"Turks" "Leather clad guy" 1999<br/>
"ER" "School teacher" 1998<br/>
<br/>
COMMERCIALS<br/>
"Green Landscaping" " Satisfied customer" 2011<br/>
" The Civil Rights Agenda" "Spokesman" 2011<br/>
<br/>
TRAINING<br/>
Act One Studio Scene Study/ Advanced O'Brian<br/>
Second City Classes A-D & Writing Upon Request<br/>
Marybeth Liss (Red Twist) Acting Coach/Vocal trainer Marybeth Liss<br/>
<br/>
SPECIAL SKILLS<br/>
Stand up Comedian and Writer.<br/>
Improv Skills and Comedic Timing.<br/>
Training in Judo.<br/>
Broad sword trained.</p>
                </td>
            </table>
        <center>
        <!--END-->

        <!--BEGINING-->
        <table style="display:none;" id="PhotosPage" class="content">
            <td width=600>
                <h1>Photos</h1>
                <table>
                    <tr>
                        <td>
                            <img id="img3" src="photos/3.jpg" width="200"/>
                            <img id="img4" src="photos/4.jpg" width="200"/>
                            <img id="img1" src="photos/1.jpg" width="200"/>
                            <img id="img2" src="photos/2.jpg" width="200"/>
                            <img id="img7" src="photos/7.jpg" width="200"/>
                            <img id="img10" src="photos/10.jpg" width="200"/>
                            <img id="img11" src="photos/11.jpg" width="200"/>
                        </td>
                        <td>
                            <img id="img5" src="photos/5.jpg" width="200"/>
                            <img id="img6" src="photos/6.jpg" width="200"/>
                            <img id="img8" src="photos/8.jpg" width="200"/>
                            <img id="img9" src="photos/9.jpg" width="200"/>
                            <img id="img12" src="photos/12.jpg" width="200"/>
                            <img id="img13" src="photos/13.jpg" width="200"/>
                        </td>
                    </tr>                                       
                </table>
            </td>
        </table>
        <!--END-->

        <!--BEGINING-->

        <center>

            <table style="display:none;" id="ContactPage" class="content">
                <tr>
                    <td>
                        <h1>Contact</h1>
                    </td>
                </tr>               
                <tr>
                    <td>
                        <a class="twitter-timeline" data-dnt="true" href="https://twitter.com/MrJayBernard" data-widget-id="319617825352323072">Tweets by @MrJayBernard</a>
                        <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
                    </td>
                    <td valign="top">
                        <table>
                            <tr>
                                <td>
                                    <a href="http://www.imdb.com/name/nm3981346/" target=_blank border="0"><img src="images/imdblogo.jpg" width=100 height=100 border="0"/></a>
                                </td>
                                <td>
                                    <a href="https://www.facebook.com/jayson.bernard1" target=_blank border="0"><img src="images/facebook_icon.png" width=100 height=100 border="0"/></a>
                                </td>
                            </tr>
                        </table>            
                        <form >
                            Send me a message!
                            <br/>
                            <textarea cols=30 rows=1>Subject</textarea>
                            <br/>
                            <textarea cols=30 rows=10>Content</textarea>
                            <br/>
                            <button id="submit" style="width:265;">Send</button>
                        </form> 
                    </td>
                </tr>               
            </table>
        </center>
        <!--END-->

    </body>
</html> 
```

任何洞察力都会受到赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T02:57:48.390

我会努力降低代码的复杂性。分部分考虑——你有一个对计时器倒计时的部分，一个隐藏计时器并显示按钮的部分，甚至可能还有一个控制每个按钮显示延迟的部分。

通过降低复杂性并提高可读性，您可以更轻松地在各种浏览器和环境中对代码进行故障排除。至于 iframe 没有和他们的容器一起隐藏，[这似乎已经被问过一次了](https://stackoverflow.com/questions/10700577/youtube-video-inside-iframe-not-hiding-in-safari-5-1)。

考虑以下内容，可在[http://jsfiddle.net/jonathansampson/9B39g/](http://jsfiddle.net/jonathansampson/9B39g/)上查看：

```
// Important references
var countdn = $("#countdown"),
    buttons = $("#buttons a"),
    seconds = 5;

// Interval to handle the countdown
var cInterval = setInterval(function () {
    countdn.fadeOut(250, reduceNum);
}, 1000);

// Logic responsible for the countdown
function reduceNum () {
    if ( --seconds ) {
        $(this).text(seconds).fadeIn(250);
    } else {
        clearInterval(cInterval);
        transitionLayout();
    }
}

// Logic to reveal our buttons when the time is right
function revealButtons () {
    buttons.each(function (index) {
        $(this).delay(index * 500).animate({ opacity: 1 }, 1000);
    });
}

// Logic to handle the transition
function transitionLayout () {
    countdn.remove();
    revealButtons();
} 
```

# c# - C# 多个表单打开而不是一个

> ID：15824639
> 
> 赞同：-1
> 
> 时间：2013-04-05T01:51:50.120
> 
> 标签：c#, foreach, listbox

我所做的是，我创建了许多不同人的实例，然后将每个人添加到一个名为 listOfPeople 的列表中，并将每个人的名字放在一个列表框中。然后我创建了一个新表单来打印我从列表框中选择的人的详细信息，但是当我选择一个人时，他们的所有详细信息都会以多种形式打开。例如，如果我在 listOfPeople 中有 Bill & Jill，并且我想查看 Bill 的详细信息，则会打开 2 个表单，一个显示 Bill 的详细信息，另一个显示 Jill 的详细信息。

我该如何解决这个问题，以便只打开一个表单？

```
//This is where I create the instance to open the details form for a person
private void detailsButton_Click(object sender, EventArgs e)
{
       if (peopleListBox.SelectedItem == null)
        {
            MessageBox.Show("No person selected!");
        }
        else 
        {                
            foreach (Person person in listOfPeople)
            {
                PersonDetails personDetails = new PersonDetails(person);
                personDetails.Show();
            }
         }
 }

   public partial class PersonDetails : Form
  {
    //This is the constructor that takes in the as a parameter and prints their data
    public PersonDetails(Person person)
    {
        InitializeComponent();
        displayNameLabel.Text = person.PrintData().ToString();
    }
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T01:54:22.817

假设 ListBox 中的项目是`Person`s，你只需要使用`SelectedItem`来创建一个人。在上面的代码中，foreach 循环显式地为列表中的每个人创建并显示一个表单。我不太清楚你为什么对这种行为感到困惑。

```
private void detailsButton_Click(object sender, EventArgs e)
{
    if (peopleListBox.SelectedItem == null)
    {
        MessageBox.Show("No person selected!");
    }
    else
    {
        PersonDetails personDetails = 
                        new PersonDetails(peopleListBox.SelectedItem);
        personDetails.Show();
    }
} 
```

如果`SelectedItem`不是一个人，那么您需要一种方法将 映射`SelectedItem`到 中的特定项目`listOfPeople`。例如，如果`SelectedItem`是一个名称的字符串表示，并且`listOfPeople`是一个`Dictionary<string, Person>`，那么你会做`PersonDetails personDetails = listOfPeople[peopleListBox.SelectedItem];`.

# c# - 将 youtube url 转换为 iframe 嵌入代码

> ID：15824642
> 
> 赞同：5
> 
> 时间：2013-04-05T01:52:00.063
> 
> 标签：c#, asp.net, regex

我一直在尝试找到一个正则表达式模式，用 iframe 嵌入代码 (C#) 替换字符串中的所有 youtube URL。显然，必须提取视频 ID。以下是应该匹配的 url 模式：

*   [http://www.youtube.com/watch?v=bSiDLCf5u3s](http://www.youtube.com/watch?v=bSiDLCf5u3s)
*   [https://www.youtube.com/watch?v=bSiDLCf5u3s](https://www.youtube.com/watch?v=bSiDLCf5u3s)
*   [http://youtu.be/bSiDLCf5u3s](http://youtu.be/bSiDLCf5u3s)
*   www.youtube.com/watch?v=bSiDLCf5u3s
*   youtu.be/bSiDLCf5u3s
*   [http://www.youtube.com/watch?feature=player_embedded&v=bSiDLCf5u3s](http://www.youtube.com/watch?feature=player_embedded&v=bSiDLCf5u3s)
*   www.youtube.com/watch?feature=player_embedded&v=bSiDLCf5u3s

所有可能的网址都应替换为：

```
<iframe title='YouTube video player' width='480' height='390' src='http://www.youtube.com/embed/VIDEO_ID_EXTRACTED' frameborder='0' allowfullscreen='1'></iframe> 
```

有人可以指出我正确的方向。

先感谢您

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-05T02:03:09.000

这是正则表达式：

```
(?:https?:\/\/)?(?:www\.)?(?:(?:(?:youtube.com\/watch\?[^?]*v=|youtu.be\/)([\w\-]+))(?:[^\s?]+)?) 
```

应该匹配您发布的所有链接并将视频 ID 提取为`$1`. 并使用以下代码将链接替换为`<iframe/>`：

```
const string input = "http://www.youtube.com/watch?v=bSiDLCf5u3s " +
                     "https://www.youtube.com/watch?v=bSiDLCf5u3s " +
                     "http://youtu.be/bSiDLCf5u3s " +
                     "www.youtube.com/watch?v=bSiDLCf5u3s " +
                     "youtu.be/bSiDLCf5u3s " +
                     "http://www.youtube.com/watch?feature=player_embedded&v=bSiDLCf5u3s " +
                     "www.youtube.com/watch?feature=player_embedded&v=bSiDLCf5u3s " +
                     "http://www.youtube.com/watch?v=_-QpUDvTdNY";
const string pattern = @"(?:https?:\/\/)?(?:www\.)?(?:(?:(?:youtube.com\/watch\?[^?]*v=|youtu.be\/)([\w\-]+))(?:[^\s?]+)?)";
const string replacement = "<iframe title='YouTube video player' width='480' height='390' src='http://www.youtube.com/embed/$1' frameborder='0' allowfullscreen='1'></iframe>";

var rgx = new Regex(pattern);
var result = rgx.Replace(input, replacement);

// result ==
// <iframe title='YouTube video player' width='480' height='390' src='http://www.youtube.com/embed/bSiDLCf5u3s' frameborder='0' allowfullscreen='1'></iframe>
// ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-20T03:31:21.550

```
//You can try this:

string strRegex = @"(?<EMBED>(<iframe|<object).*?src=[""'](?<SRC>(http:|https:)?//(www.)?[youtube\.com|youtu.be][^""']+).*?(</iframe>|</object>))";
Regex myRegex = new Regex(strRegex, RegexOptions.Singleline);
string strTargetString = @"<div align=""center""><iframe height=""315"" src=""//www.youtube.com/embed/NiCZAnmjYZ8"" frameborder=""0"" width=""560"" allowfullscreen=""true""></iframe></div> " + "\n" + @"<div align=""center""><iframe height=""315"" src=""//youtube.com/embed/NiCZAnmjYZ81"" frameborder=""0"" width=""570"" allowfullscreen=""""></iframe></div> " + "\n" + @"<div align=""center""><iframe height=""315"" src=""http://www.youtube.com/embed/NiCZAnmjYZ82"" frameborder=""0"" width=""560"" allowfullscreen=""""></iframe></div> " + "\n" + @"<div align=""center""><iframe height=""315"" src=""https://youtube.com/embed/NiCZAnmjYZ83"" frameborder=""0"" width=""560"" allowfullscreen=""""></iframe></div> " + "\n" + @"<div align=""center""><iframe height=""315"" src=""https://youtu.be/embed/NiCZAnmjYZ83"" frameborder=""0"" width=""560"" allowfullscreen=""""></iframe></div> " + "\n" + @"<div align=""center""><iframe height=""315"" src=""http://youtu.be/embed/NiCZAnmjYZ83"" frameborder=""0"" width=""560"" allowfullscreen=""""></iframe></div> " + "\n" + @"<a href=""https://youtu.be/embed/NiCZAnmjYZ83"">Youtube<a>" + "\n" + @"<div style=""text-align:center""><object width=""100%"" height=""100%"" id=""PlayerAS039128cb43804eb7894cba4e8b0220fc"" classid=""clsid:D27CDB6E-AE6D-11cf-96B8-444553540000""><param name=""movie"" value=""http://youtu.be/embed/NiCZAnmjYZ83""></param><param name=""allowFullScreen"" value=""true""></param><param name=""allowscriptaccess"" value=""always""></param><param value=""#000000"" name=""bgcolor""></param><param name=""wmode"" value=""opaque""></param><embed height=""100%"" width=""100%"" quality=""high"" bgcolor=""#000000"" flashvars="""" wmode=""opaque"" allowfullscreen=""true"" allowscriptaccess=""always"" name=""039128cb43804eb7894cba4e8b0220fc"" id=""039128cb43804eb7894cba4e8b0220fc"" style="""" src=""http://youtu.be/embed/NiCZAnmjYZ83"" type=""application/x-shockwave-flash""/></embed></object></div>" + "\n";

foreach (Match myMatch in myRegex.Matches(strTargetString))
{
  if (myMatch.Success)
  {
    // Add your code here
  }
} 
```

# ruby - 在redis订阅中捕获客户端连接断开

> ID：15824648
> 
> 赞同：1
> 
> 时间：2013-04-05T01:52:33.753
> 
> 标签：ruby, redis, sinatra

我正在尝试使用 Redis 和 Sinatra 流构建通知系统。但是，当连接关闭时我似乎无法捕捉到，因此阻塞的 Redis 订阅块似乎永远不会关闭。实现这一目标的最佳方法是什么？

```
get '/user/:id/next_notification' do
stream :keep_open do |out|

    $redis.subscribe("notifications:#{params[:id]}") { |on|

        on.message { |channel, msg|
            $redis.unsubscribe
            out << msg
        }
    }

    out.callback { 
        puts "unsub"
        # $redis.unsubscribe 
    }

    out.errback { 
        puts "unsub"
        # $redis.unsubscribe
    }
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-25T09:37:47.380

Redis Subscription 是一个阻塞调用。所以你需要在一个单独的线程中执行它。不知道如何在 Ruby 中做到这一点。但我确信 ruby​​ 中必须有线程库。

将 Blocking 调用包装在 try..catch 中，您将知道连接何时从服务器端关闭。

# php - 使用ajax从表中删除行

> ID：15824652
> 
> 赞同：0
> 
> 时间：2013-04-05T01:52:45.657
> 
> 标签：php, mysql, ajax

我在互联网上找到了这段代码，我需要 ajax 代码来发布`$row[ID]`到我的`delete.php`文件：

```
echo "<td><a id=$row[ID]  onclick=\"if(confirm('Are you sure you want to delete this?')) deleteRow(this.parentNode.parentNode.rowIndex); return false; \" href=\"\"  >del</A> </td>" 
```

我努力了：

```
function deleteRow(i){
    var makarios = document.getElementById('m').deleteRow(i)
    var mak;

    if (window.XMLHttpRequest) {
        // Mozilla, Safari, ... 
        mak = new XMLHttpRequest();
    } else if (window.ActiveXObject) {
        // IE 8 and older
        mak = new ActiveXObject("Microsoft.XMLHTTP");
    }

    var data = "id=" + makarios;
    mak.open("POST", "delete_basket.php", true);
    mak.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
    mak.send(data);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T02:03:08.847

如果您想要一个看起来比评论中的爵士乐更容易的 jQuery 示例：

```
function deleteRow(id)
{
  $.ajax({
    type: "POST",
    url: "delete.php",
    data: { id: id },
    success: function(data){
      alert("deleted");
    }
  });
} 
```

这假设您的删除脚本正在寻找`$_POST['id']`

您确实需要包含 jQuery 库。如果需要，您可以使用托管的：这是链接到托管版本的好资源： [是否有指向 Google API 上“最新”jQuery 库的链接？](https://stackoverflow.com/questions/441412/is-there-a-link-to-the-latest-jquery-library-on-google-apis)

我现在会选择 1.8 左右。当发生重大变化时，使用 latest 可能会导致不良的副作用。

如果您有具体问题，请随时提出，我可能会更新。

# java - 将 JPanel 数组添加到容器

> ID：15824654
> 
> 赞同：0
> 
> 时间：2013-04-05T01:53:04.970
> 
> 标签：java, arrays, swing, jpanel, containers

查看最后一行代码，这是我特别想将 JPanel 数组添加到容器的地方。非常感谢伙计们或加尔斯！

代码：

```
private JFrame b = new JFrame("Lotus");
private JLabel currentP = new JLabel();
private int currentS;
private Container pieces = new Container();
private JButton exitt = new JButton("EXIT");
private ImageIcon B1=new ImageIcon("C:\\Users\\Brusty\\Downloads\\p1.jpg");  
private ImageIcon B2=new ImageIcon("C:\\Users\\Brusty\\Downloads\\p2.jpg"); 
LinkedList<Stack<Integer>> spotList = new LinkedList<Stack<Integer>>(); 

//Creation of Gamepiece labels
public void Labels(){

JLabel[] labelsP1 = new JLabel[10];
JLabel[] labelsP2 = new JLabel[10];

for(int i = 0 ; i < labelsP1.length ; i++){
    labelsP1[i] = new JLabel(B1); 
    for(int j = 0 ; j < labelsP2.length ; j++){
        labelsP2[j] = new JLabel(B2); 
}
    Container c = b.getContentPane();
    c.setLayout(new GridLayout(13,3)); 
    c.add(pieces); 
    pieces.add(labelsP1); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T01:55:28.047

不知道我真的看到你的问题。您只需要遍历`labelsP1`数组并添加标签...

```
for (JLabel label : labelsP1) {
    pieces.add(label);
} 
```

# android - 可以指定一个taskaffinity 导致在Android 中创建一个新进程

> ID：15824656
> 
> 赞同：1
> 
> 时间：2013-04-05T01:53:15.333
> 
> 标签：android, android-intent

所以我有一个非常简单的应用程序。

```
活动一
活动 2（亲和力：mytask - launchMode=standard）
活动 3（亲和性：mytask - launchMode=standard）
广播接收器
服务

```

1.  BR 收到意图
2.  启动服务
3.  服务发挥它的魔力
4.  启动活动 2，该活动将在一段时间后启动活动 3。

现在我观察到的是，当活动 2 启动时，我看到我的应用程序有两个进程 ID。但是，如果我从 Activity1 -> 活动 2 导航。我只看到一个进程 ID。

我的问题是：

1.  指定任务亲和性会导致在 Android 中创建新进程吗？
2.  当活动具有任务关联性时，从服务启动活动与常规方案有何不同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-12T04:07:58.273

关于问题1：

使用默认配置，指定任务亲和性不会导致在 Android 中创建新进程，除非您指定属性 android:process 与默认配置不同。

关于问题2：

从服务启动activity，你必须在intent中设置NEW_TASK标志，如果存在具有相同affinity的任务，要启动的activity将在系统中查找，如果存在，则activity将在该任务中启动，否则它将在新任务中启动。

# vb.net - 计算属性中的电话类型

> ID：15824660
> 
> 赞同：0
> 
> 时间：2013-04-05T01:53:42.633
> 
> 标签：vb.net, visual-studio-2010, visual-studio-lightswitch

在以下代码示例中，[MainSwitchBoardPhone] 的属性类型为“Phone”。当我将计算出的 ClinicHospitalAddress 属性设为实体的摘要属性时，我希望电话号码以 (555) 555-5555 格式显示在数据输入屏幕中，而不仅仅是字符串。即5555555555。有没有办法做到这一点？

```
Private Sub ClinicHospitalAddress_Compute(ByRef result As String)
  ' Set result to the desired field value
  result = [ClinicHospital] & " " & [StreetAddress] & ", " & _
           [City] & " " & [MainSwitchBoardPhone] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T02:23:11.407

如下：

```
result = [ClinicHospital] & " " & [StreetAddress] & ", " & _ 
```

[城市] & " " & Format([MainSwitchBoardPhone],"(###) ###-####")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T12:17:12.237

尝试：

```
result = String.Format("{0} {1}, {2} (###) ###-####" _
    , [ClinicHospital] _
    , [StreetAddress] _
    , [City] _
    , Convert.ToInt64([MainSwitchBoardPhone]) _
    ) 
```

编辑：添加 Convert.ToInt64

# c# - 调用进度报告方法会显着减慢 Windows Phone 7 上的 C# 文件下载速度吗？

> ID：15824662
> 
> 赞同：0
> 
> 时间：2013-04-05T01:53:59.037
> 
> 标签：c#, .net, silverlight, windows-phone-7, webclient

我在 C# 中有一个 Windows Phone 7 (7.1) 方法，它给定一个字符串形式的 URL，将该 URL 的内容下载到一个文件中（参见下面的代码）。从代码中可以看出，我分配了一个*DownloadProgressChanged()*事件处理程序。在该处理程序中，如果调用者提供了**IProgress**对象，我将调用该对象的*Report()*方法。考虑到用户的网络连接速度可能很慢，我想确保下载速度尽可能快。**在WebClient 的***DownloadProgressChanged()*回调中调用*IProgress.Report()*方法会大大减慢下载速度吗？

 ***我对*IProgress.Report()*不够熟悉，无法知道它是在当前线程还是调用线程上执行。它是否在调用线程上执行？我担心的是重复的线程切换真的会让事情陷入困境。我可能会将对该方法的调用包装在*Task.Run()*调用中，以保持 UI 线程满意。但以防万一，我会问我的代码是否有任何潜在的问题，就陷入 UI 线程而言？

对与结构或性能有关的代码的任何其他评论表示赞赏。请注意，我在此应用中使用**Microsoft.Bcl.Async**包。

**更新（稍后添加）**：关于线程切换，显然在 UI 线程上引发了 DownloadProgressChanged() 事件，而不是在下载线程上，因此无需对 Dispatcher 等进行任何花哨的操作来进行 UI 更新设想。至少根据此代码项目文章：

[C# 5 Async 中的进度报告](http://www.codeproject.com/Articles/129447/Progress-Reporting-in-C-5-Async)

```
 public static void URLToFile(string strUrl, string strDestFilename, IProgress<int> progress, int iNumSecondsToWait = 30)
    {
        strUrl = strUrl.Trim();

        if (String.IsNullOrWhiteSpace(strUrl))
            throw new ArgumentException("(Misc::URLToFile) The URL is empty.");

        strDestFilename = strDestFilename.Trim();

        if (String.IsNullOrWhiteSpace(strDestFilename))
            throw new ArgumentException("(Misc::URLToFile) The destination file name is empty.");

        if (iNumSecondsToWait < 1)
            throw new ArgumentException("(Misc::URLToFile) The number of seconds to wait is less than 1.");

        // Create the isolated storage file.
        StreamWriter sw = openIsoStorFileAsStreamWriter(strDestFilename);

        // If the stream writer is NULL, then the file could not be created.
        if (sw == null)
            throw new System.IO.IOException("(Misc::URLToFile) Error creating or writing to the file named: " + strDestFilename);

        // Asynchronous download.  Note, the Silverlight version of WebClient does *not* implement 
        //  IDisposable.
        WebClient wc = new WebClient();

        try
        {
            // Create a download progress changed handler so we can pass on progress
            //  reports to the caller if they provided a progress report object.
            wc.DownloadProgressChanged += (s, e) =>
            {
                // Do we have a progress report handler?
                if (progress != null)
                    // Yes, call it.
                    progress.Report(e.ProgressPercentage);
            };

            // Use a Lambda expression for the "completed" handler
            //  that writes the contents to a file.
            wc.OpenReadCompleted += (s, e) =>
                e.Result.CopyTo(sw.BaseStream);

            // Now make the call to download the file.
            wc.DownloadStringAsync(new Uri(strUrl));
        }
        finally
        {
            // Make sure the stream is cleaned up.
            sw.Flush();
            sw.Close();

            // Make sure the StreamWriter is diposed of.
            sw.Dispose();
        } // try/finally

        // CancellationTokenSource srcCancelToken = new CancellationTokenSource();
        // srcCancelToken.CancelAfter(TimeSpan.FromSeconds(iNumSecondsToWait));
    } // public static void URLToFile() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T03:59:27.640

**No**, the download progress check does not necessarily affect the download speed. Mainly because the items that are checked are not downloaded per-se. When you initiate the download, you get a size declaration (content length) - that is used as a reference for a complete file. Then, the size of the local (downloaded) byte content is checked and a ratio can be built from the two values.

**NOTE:** Does not apply for streaming, for obvious reasons, since there is no final size estimate.***

# python - 分割线和线

> ID：15824666
> 
> 赞同：0
> 
> 时间：2013-04-05T01:54:14.450
> 
> 标签：python, file, list

所以，我想知道如何拆分文件的行并将它们放入列表中？我测试了一个适用于列表的一部分但不适用于其他块的代码：

该文件如下所示：

```
Rank Ballots

Riding 0

NDP LIBERAL GREEN CPC

NDP GREEN LIBERAL CPC

CPC LIBERAL GREEN NDP

NDP GREEN LIBERAL CPC

Riding 1

NDP LIBERAL GREEN CPC

LIBERAL GREEN NDP CPC

NDP GREEN LIBERAL CPC

LIBERAL GREEN NDP CPC

NDP GREEN LIBERAL CPC 
```

等等。

这是前半部分的代码，骑0：line = f.readline()

```
 while line !='':
    district = str.split(line)
    line = f.readline()
    a.append(district)
print(a) 
```

这是我为后半部分所做的代码：

```
header = f.readline().rstrip() 
riding = f.readline().rstrip()
riding = f.readline().rstrip()
votes = []

while riding !='':
    rank = str.split(riding)
    votes = []
    while rank != '':
        votes.append(rank)
        rank = str.split(riding)
        riding = f.readline().rstrip()

    print(votes)
    riding = f.readline().rstrip() 
```

当我打印它只是一个空白区域。我想知道是否有人可以帮忙。输出应该是每个骑行的列表。所以，对于 Riding 0：它会是 [[line 1], [line 2] etc] 和 Riding 1: [[line 1], [line 2]] 等等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T02:05:42.793

```
lines = [L.strip() for L in f if L.strip()][1:]

data = []
group = []

for L in lines:
    if L.startswith('Riding'):
        if group:
            data.append(group)
        group = []
        continue
    group.append(L.split())

print(data) 
```

输出：

```
[[['NDP', 'LIBERAL', 'GREEN', 'CPC'], ['NDP', 'GREEN', 'LIBERAL', 'CPC'], ['CPC', 'LIBERAL', 'GREEN', 'NDP'], ['NDP', 'GREEN', 'LIBERAL', 'CPC']]] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T01:57:44.280

这应该为您解决 -

```
import re

f = open('x.txt')
d = [l.strip() for l in f.readlines() if l.strip()]

groups   = {}
curr_key = ''
for line in d:
    if re.search('Riding [0-9]+', line):
        curr_key = line
        groups[curr_key] = []
    elif curr_key:
        groups[curr_key].append([line])

print groups

>>> {'Riding 1': [['NDP LIBERAL GREEN CPC'], ['LIBERAL GREEN NDP CPC'], ['NDP GREEN LIBERAL CPC'], ['LIBERAL GREEN NDP CPC'], ['NDP GREEN LIBERAL CPC']], 'Riding 0': [['NDP LIBERAL GREEN CPC'], ['NDP GREEN LIBERAL CPC'], ['CPC LIBERAL GREEN NDP'], ['NDP GREEN LIBERAL CPC']]} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T02:00:45.620

这就是我给你的代码。希望它有效

```
FileStream f = new Filestream(path,FileMode.Open);
StreamReader sf = new StreamReader(f); 
```

这里

```
while !sf.EndOfStream:
    district = str.split(' ')
    line = f.readline()
    a.append(district)
print(a) 
```

你失败了`str.split(' ')`；

# php - 如何使用php脚本删除目录中的文件

> ID：15824669
> 
> 赞同：0
> 
> 时间：2013-04-05T01:54:33.943
> 
> 标签：php, javascript, html, ajax, codeigniter-2

我想删除 profile_images 文件夹中的图像。我试过了

```
unlink(base_url() . "_profile_images/912aea1dd8144e07894f788978b917d3.jpg"); 
```

并且发生了错误

遇到 PHP 错误

严重性：警告

```
Message: unlink() [function.unlink]: http does not allow unlinking

Filename: controllers/controller.php

Line Number: 100 
```

我使用 codeigniter 来实现这个动作。有没有其他方法可以删除文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T02:05:03.567

您正在尝试删除 URL 字符串，您应该让 php 获取文件的完整路径和文件名，以便能够**取消链接**。

不确定您的路径是什么，但 PHP 有几个函数可以帮助您获取文件的完整目录路径。

```
$_SERVER['DOCUMENT_ROOT']; // Will get you PHP's document root, it's a good start. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T02:07:42.317

您将希望在您的服务器上使用实际的文件系统引用而不是 URL ...所以

unlink('/var/www/image_folder/file.jpg');

参数是文件的位置。

# php - 正则表达式匹配一些特殊字符

> ID：15824670
> 
> 赞同：-1
> 
> 时间：2013-04-05T01:54:37.950
> 
> 标签：php, regex, special-characters

我有这样的字符串：

```
 hello this is my_string is-very-cool & another stuff 
```

我如何通过所有特殊字符来爆炸（？）我的字符串，但允许空格 - 和 _ ？

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T01:56:25.920

```
preg_split('/[^\w -]/', $string) 
```

这将拆分任何不是 az、0-9、_、- 或空格的内容。

# php - laravel - 依赖注入和 IoC 容器

> ID：15824673
> 
> 赞同：4
> 
> 时间：2013-04-05T01:55:04.310
> 
> 标签：php, dependency-injection, inversion-of-control, laravel

我正试图围绕依赖注入和 IoC 容器展开思考，我以我的 UserController 为例。我在其构造函数中定义了 UserController 所依赖的内容，然后使用 App::bind() 将这些对象绑定到它。如果我使用 Input::get() 外观/方法/事物，我是否没有利用我刚刚注入的 Request 对象？我应该改用以下代码吗，既然 Request 对象被注入或 doInput::get() 解析为同一个 Request 实例？我想使用静态立面，但如果它们解析为未注入的对象，则不会。

```
$this->request->get('email'); 
```

依赖注入

```
<?php
App::bind('UserController', function() {
    $controller = new UserController(
        new Response,
        App::make('request'),
        App::make('view'),
        App::make('validator'),
        App::make('hash'),
        new User
    );
    return $controller;
}); 
```

用户控制器

```
<?php
class UserController extends BaseController {

protected $response;
protected $request;
protected $validator;
protected $hasher;
protected $user;
protected $view;

public function __construct(
    Response $response,
    \Illuminate\Http\Request $request,
    \Illuminate\View\Environment $view,
    \Illuminate\Validation\Factory $validator,
    \Illuminate\Hashing\BcryptHasher $hasher,
    User $user
){
    $this->response = $response;
    $this->request = $request;
    $this->view = $view;
    $this->validator = $validator;
    $this->hasher = $hasher;
    $this->user = $user;
}

public function index()
{
    //should i use this?
    $email = Input::get('email');
    //or this?
    $email = $this->request->get('email');

    //should i use this?
    return $this->view->make('users.login');

    //or this?
    return View::make('users.login');
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-06T08:50:51.817

如果您担心可测试性，那么您实际上应该只注入没有通过外观路由的实例，因为外观本身已经是可测试的（这意味着您可以在 L4 中模拟它们）。您不需要注入响应、哈希、视图环境、请求等。从外观上看，您只需要注入`$user`.

对于其他所有事情，我都会坚持使用静态外观。查看基类的`swap`and方法。您可以轻松地将底层实例替换为您自己的模拟对象，或者简单地开始模拟，例如.`shouldReceive`[`Facade`](https://github.com/laravel/framework/blob/master/src/Illuminate/Support/Facades/Facade.php)`View::shouldReceive()`

希望这可以帮助。

# ios - 在 iOS 应用程序中安装特定字体时遇到问题 - 不兼容的 TTF？

> ID：15824675
> 
> 赞同：3
> 
> 时间：2013-04-05T01:55:10.613
> 
> 标签：ios, xcode, fonts, truetype

我的代码仓库中有一些字体文件用于字体 Nubian 和 Nubian-Alt。它们已获得许可并已付费，并且需要使用。但是，我无法在 iOS 中使用此字体，并且即使字体在 Finder 中预览正常并被识别为 Truetype 字体，我也无法使用 Font Book 打开字体。

![Finder 的视图](https://i.stack.imgur.com/tflEC.png)

我首先尝试将 Nubian-Medium 添加到 iOS 应用程序 - 使用应用程序的 Info.plist 中的键“应用程序提供的字体”。该字体未出现在使用以下命令生成的列表中：

```
 for (NSString *familyName in [UIFont familyNames]) {
   for (NSString *fontName in [UIFont fontNamesForFamilyName:familyName]) {
     NSLog(@"%@", fontName);
   }
 } 
```

我检查了目标的“复制捆绑资源”构建阶段，看到字体已添加到列表中。

我尝试添加我在另一个应用程序中使用过的另一种字体“chess-merida-unicode.ttf”，以检查我是否正确添加了字体 - 我将它复制到应用程序并将其添加到应用程序提供的字体数组中，看到它出现在“复制捆绑资源”列表中，使用上面的代码片段报告为可用。

接下来，我查看了 OS X 中的字体——双击确实打开了 Font Book，但没有打开或添加字体。当我尝试将所有 Nubian 字体作为新集合拖入 Font Book 时，它报告了所有文件的问题，特别是在字体文件中包含的表格中。

![字体册显示的字体问题](https://i.stack.imgur.com/iSgXh.png)

选择所有字体，然后选择继续没有做任何事情。

我下载了一个名为 Font Agent Pro 的第三方应用程序的试用版，它也无法加载这些字体。

我找到了一个名为 fonts.com 的粗略站点并下载了另一个 Nubian-Medium ("ufonts.com_nubian-medium_1_.ttf") - Xcode 能够识别该文件。

我检查了这些文件的权限，并确保它们都是 rw 的，没有变化。

此时，您会怀疑文件只是损坏或损坏，但它们正在网页上使用（这也是项目的一部分）并且工作正常。我还可以采取哪些其他步骤？我该怎么做才能将这些文件添加到 iOS 项目中？如果有某些类型的 TTF 不能在 iOS 项目中使用，我如何检查这些是否属于那种类型？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T04:32:12.983

第 1 步：从[http://www.fontpalace.com/font-download/Nubian-Thin/下载 Nubian 字体](http://www.fontpalace.com/font-download/Nubian-Thin/)

第 2 步：在项目中添加字体 .ttf 文件

第 3 步：在应用程序中注册您的字体，`Fonts provided by application`在文件中设置密钥`info.plist`，有关详细信息，请参阅屏幕截图。

第 4 步：创建标签并为其分配字体，如下所示

```
UILabel *lbl = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 200, 50)];
[lbl setText:@"I am Nubian-Thin"];
[lbl setFont:[UIFont fontWithName:@"Nubian-Thin" size:26.0f]];

[self.view addSubview:lbl]; 
```

![有关更多参考，请参阅屏幕截图](https://i.stack.imgur.com/uwnKQ.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T21:01:53.017

答案似乎是这些字体是[“网络”字体](http://www.fontspring.com/support/general/difference-between-desktop-font-and-webfont)。我不知道如何区分，因为 TTF 文件看起来就像“桌面”字体。学习如何做到这一点是这个问题的目的。

实际上，从某人的硬盘中挖掘出一个旧存档会发现另一个使用 TTF 字体的存档。这些字体仍然有 8.3 个文件名，并且都是作为它们自己的字体系列的成员创建的（因此 Nubian-Medium 和 Nubian-MediumItalic 没有任何关系）。我将它们重新命名，然后通过 RoboFonts 的试用来纠正家庭关系。这导致 TTF 都在 Nubian 家族中。然后发现了一个奇怪的问题，使用这种字体创建的 UILabel 在框架顶部带有 1 像素的水平线。再次执行该过程但选择生成 OTF 输出摆脱了这条线。

字体很容易，除非它们不是，那么它们真的很难。

# ruby-on-rails - Rails：如何跟踪在没有此类方法的数组上调用的方法？

> ID：15824676
> 
> 赞同：2
> 
> 时间：2013-04-05T01:55:10.743
> 
> 标签：ruby-on-rails, ruby, methods, call

我试图在 Rails 应用程序中找出一些东西。我们有一个具有主题（主题类）的类站点，当站点上传主题时，它可以为特定站点安装它。所以我正在跟踪代码，我看到它调用了这样的方法'build'：

```
@theme = @current_site.themes.build(params[:theme]) 
```

主题方法只返回与该站点关联的主题对象数组。所以在rails控制台中我尝试了这个（包括结果）：

```
>> site.themes.method(:build).__file__
NameError: undefined method `build' for class `Array' 
```

然后我尝试了这个：

```
>> site.themes.respond_to? :build
=> true 
```

所以我的问题是双重的，我怎样才能找到“构建”的定义位置，以便我能够理解它是如何工作的？有人可以向我解释一下像“构建”这样的方法是如何工作的，因为它能够被调用没有这种方法的 Array 对象的结尾？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T02:23:37.760

给定您的`Site`模型`has_many :themes`，这是关联自动添加到其中的关联方法之一。

如果您想要更多阅读材料，请查看[关联基础指南](http://guides.rubyonrails.org/association_basics.html)（例如，关于[`has_many`关联](http://guides.rubyonrails.org/association_basics.html#has_many-association-reference)的部分），其中列出了所有添加的方法以及它们所采用的参数。

至于它究竟是如何工作的，这个`.themes`对象实际上是一个`AssociationProxy`（[这里的源](https://github.com/rails/rails/blob/2-3-stable/activerecord/lib/active_record/associations/association_proxy.rb)），`Array`它的目标是一个，而不是一个`Array`本身。`.class`返回`'Array'`是因为代理本身不响应该`.class`方法，而是`Array`通过`method_missing`. [这个答案](https://stackoverflow.com/questions/1529606/how-do-rails-association-methods-work#1554925)给出了更详细的解释。

# ios - 想要创建字符串来发布方法

> ID：15824682
> 
> 赞同：-2
> 
> 时间：2013-04-05T01:55:46.460
> 
> 标签：ios, objective-c, string

我想在 POST 方法中传递一个字符串..

字符串是`@"functionName=getCourses_by_category&json={"course_cat_id":"8"}"`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T03:36:11.047

来自 Apple 关于[如何发送 POST 数据](http://developer.apple.com/library/ios/#documentation/NetworkingInternetWeb/Conceptual/NetworkingOverview/WorkingWithHTTPAndHTTPSRequests/WorkingWithHTTPAndHTTPSRequests.html#//apple_ref/doc/uid/TP40010220-CH8-SW3)的文档：

```
NSString *bodyData = @"functionName=getCourses_by_category&json={\"course_cat_id\":\"8\"}";

NSMutableURLRequest *postRequest = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:@"https://www.apple.com"]];

// Set the request's content type to application/x-www-form-urlencoded
[postRequest setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];

// Designate the request a POST request and specify its body data
[postRequest setHTTPMethod:@"POST"];
[postRequest setHTTPBody:[NSData dataWithBytes:[bodyData UTF8String] length:[bodyData length]]];

// Initialize the NSURLConnection and proceed as usual 
```

# import - 如何从嵌入式谷歌地图中提取 KML 数据

> ID：15824685
> 
> 赞同：1
> 
> 时间：2013-04-05T01:56:12.903
> 
> 标签：import, extract, kml

我们有一张[滑雪道地图](http://www.plandespistes.nl/savoie/les-trois-vallees)

我想将它们提取到 KML 文件中，然后将它们导入 Google 地球，这样我就可以在滑雪假期使用它。

可能吗？导入部分很容易，但不知道如何获取它们。

# html - 无法通过键盘选项卡导航无序列表菜单

> ID：15824690
> 
> 赞同：1
> 
> 时间：2013-04-05T01:56:48.463
> 
> 标签：html, css

我试图弄清楚为什么我无法通过键盘导航使用多个无序列表的菜单。

有没有人有任何提示？我觉得它比 html 更像是一个 CSS 问题。

相关的 CSS：

```
/* MENU */

#cssmenu{
    border:none;
    border:0px;
    margin:0px;
    padding:0px;
    font: 67.5% 'Lucida Sans Unicode', 'Bitstream Vera Sans', 'Trebuchet Unicode MS', 'Lucida Grande', Verdana, Helvetica, sans-serif;
    font-size:11px;
    font-weight:bold;   
    }
#cssmenu ul{
    background:#333333;
    height:39px;
    list-style:none;
    margin:0;
    padding:0;
    display: table;
    width: 100%;

    }
#cssmenu li{
    padding:0px;
    display: table-cell;
    width: 115px;
    }

#cssmenu li a{
    background:#333333 url('../images/seperator.gif') bottom right no-repeat;
    color:#FFF;
    display:block;
    font-weight:normal;
    line-height:39px;
    margin:0px;
    padding:0px 0px;
    text-align:center;
    text-decoration:none;
    width: 115px;

    }

#cssmenu li a:hover, #cssmenu ul li:hover a{
    background: #2580a2;
    color:#FFFFFF;
    text-decoration:none;
    float: none;
    }
#cssmenu li ul{
    background:#333333;
    display:none;
    height:auto;
    padding:0px;
    margin:0px;
    border:0px;
    position:absolute;
    width:230px;
    z-index:200;
    /*top:1em;
    /*left:0;*/
    }
#cssmenu li:hover ul{
    display:block;

    }
#cssmenu li li {
    background:url('../images/sub_sep.gif') bottom left no-repeat;
    display:block;
    float:none;
    margin:0px;
    padding:0px;
    width:230px;
    }
#cssmenu li:hover li a{
    background:none;
    }
#cssmenu li ul a{
    display:block;
    height:35px;
    font-size:10px;
    font-style:normal;
    margin:0px;
    padding:0px 10px 0px 15px;
    text-align:left;
    width: 205px;

    }
#cssmenu li ul a:hover, #cssmenu li ul li:hover a{
    background:#2580a2 url('../images/hover_sub.gif') center left no-repeat;
    border:0px;
    color:#ffffff;
    text-decoration:none;
    width: 205px;

    }
#cssmenu p{
    clear:left;
    }  

:focus {outline:none;}
::-moz-focus-inner {border:0;} 
```

相关的 HTML 代码：

```
<div id="cssmenu">                                  <ul>                <li><a href="HTTP://wcmsdev/scripts/nc.dll?WCMS:HOMEPAGE:2059103169:pc=PC_90001">Home</a></li>          
                    <li class="has-sub">                <a href="HTTP://wcmsdev/scripts/nc.dll?WCMS:STANDARD:2059103169:pc=PC_90002">Operations</a>             <ul>            
                    <li><a href="HTTP://wcmsdev/scripts/nc.dll?WCMS:STANDARD:2059103169:pc=PC_90003">Individuals</a>                        
      </li>
                    <li><a href="HTTP://wcmsdev/scripts/nc.dll?WCMS:STANDARD:2059103169:pc=PC_90123">Aircraft owners</a>                        
      </li>
                    <li><a href="HTTP://wcmsdev/scripts/nc.dll?WCMS:STANDARD:2059103169:pc=PC_90276">Aircraft operators </a>                        
      </li>
                    <li><a href="HTTP://wcmsdev/scripts/nc.dll?WCMS:STANDARD:2059103169:pc=PC_90389">Flight training</a>                        
      </li>
                    <li><a href="HTTP://wcmsdev/scripts/nc.dll?WCMS:STANDARD:2059103169:pc=PC_90405">Aerodromes</a>                     
      </li>
                    <li><a href="HTTP://wcmsdev/scripts/nc.dll?WCMS:STANDARD:2059103169:pc=PC_90447">Office of airspace regulation</a>                      
      </li>
                    <li><a href="HTTP://wcmsdev/scripts/nc.dll?WCMS:STANDARD:2059103169:pc=PC_93439">Sport aviation</a>                     
      </li>
                    <li><a href="HTTP://wcmsdev/scripts/nc.dll?WCMS:STANDARD:2059103169:pc=PC_93379">Class D</a>                        
      </li>
                    <li><a href="HTTP://wcmsdev/scripts/nc.dll?WCMS:STANDARD:2059103169:pc=PC_100058">Non-towered aerodromes</a>                        
      </li>
                    <li><a href="HTTP://wcmsdev/scripts/nc.dll?WCMS:STANDARD:2059103169:pc=PC_90385">Dangerous goods</a>                        
      </li>
                    <li><a href="HTTP://wcmsdev/scripts/nc.dll?WCMS:STANDARD:2059103169:pc=PC_100808">Ground operations</a>                     
      </li>
                    <li><a href="HTTP://wcmsdev/scripts/nc.dll?WCMS:STANDARD:2059103169:pc=PC_100847"> Non-compliance notice </a>                       
      </li>
                    <li><a href="HTTP://wcmsdev/scripts/nc.dll?WCMS:STANDARD:2059103169:pc=PC_100374">Unmanned Aircraft Systems (UAS) </a>                      
      </li>
                    <li><a href="HTTP://wcmsdev/scripts/nc.dll?WCMS:STANDARD:2059103169:pc=PC_100705">General Aviation (GA) task force</a>                      
      </li>
                    <li><a href="HTTP://wcmsdev/scripts/nc.dll?WCMS:STANDARD:2059103169:pc=PC_100852">Regional Aviation Safety Forum (RASF)</a>                     
      </li>
                    <li><a href="http://casa.gov.au/aod" target="_top">Drug and Alcohol Management Plans</a>                        
      </li>
                    </ul></li>          
                    <li class="has-sub">                <a href="HTTP://wcmsdev/scripts/nc.dll?WCMS:STANDARD:2059103169:pc=PC_90473">Airworthiness</a>              <ul>            
                    <li><a href="HTTP://wcmsdev/scripts/nc.dll?WCMS:STANDARD:2059103169:pc=PC_100610">Maintenance regulations</a>                       
      </li>
                    <li><a href="HTTP://wcmsdev/scripts/nc.dll?WCMS:STANDARD:2059103169:pc=PC_90474">Personnel</a>                      
      </li>
                    <li><a href="HTTP://wcmsdev/scripts/nc.dll?WCMS:STANDARD:2059103169:pc=PC_90496">Certification and design</a>                       
      </li>
                    <li><a href="HTTP://wcmsdev/scripts/nc.dll?WCMS:STANDARD:2059103169:pc=PC_90507">Manufacturing</a>                      
      </li>
                    <li><a href="HTTP://wcmsdev/scripts/nc.dll?WCMS:STANDARD:2059103169:pc=PC_90515">Continuing airworthiness</a>                       
      </li>
                    <li><a href="HTTP://wcmsdev/scripts/nc.dll?WCMS:STANDARD:2059103169:pc=PC_90822">Airworthiness directives</a>                       
      </li>
                    <li><a href="HTTP://wcmsdev/scripts/nc.dll?WCMS:STANDARD:2059103169:pc=PC_90821">Maintenance organisations</a>                      
      </li>
                    <li><a href="HTTP://wcmsdev/scripts/nc.dll?WCMS:STANDARD:2059103169:pc=PC_101038">Flight test and evaluation</a>                        
      </li>
                    </ul></li>          
                    <li class="has-sub">                <a href="HTTP://wcmsdev/scripts/nc.dll?WCMS:STANDARD:2059103169:pc=PC_90900">Regulations &amp; policy</a>               <ul>            
                    <li><a href="HTTP://wcmsdev/scripts/nc.dll?WCMS:STANDARD:2059103169:pc=PC_90902">Current rules</a>                      
      </li>
                    <li><a href="HTTP://wcmsdev/scripts/nc.dll?WCMS:PWA:2059103169:pc=PC_91070">Changing the rules</a>                      
      </li>
                    <li><a href="HTTP://wcmsdev/scripts/nc.dll?WCMS:STANDARD:2059103169:pc=PC_91181">Enforcement action</a>                     
      </li>
                    <li><a href="HTTP://wcmsdev/scripts/nc.dll?WCMS:PWA:2059103169:pc=PC_91190">Policy notices</a>                      
      </li>
                    <li><a href="HTTP://wcmsdev/scripts/nc.dll?WCMS:STANDARD:2059103169:pc=PC_100396">Australia's state safety program</a>                      
      </li>
                    <li><a href="HTTP://wcmsdev/scripts/nc.dll?WCMS:STANDARD:2059103169:pc=PC_101078">Performance based navigation (PBN)</a>                        
      </li>
                    <li><a href="HTTP://wcmsdev/scripts/nc.dll?WCMS:STANDARD:2059103169:pc=PC_101326">Licensing regulations</a>                     
      </li>
                    </ul></li>          
                    <li class="has-sub">                <a href="HTTP://wcmsdev/scripts/nc.dll?WCMS:STANDARD:2059103169:pc=PC_91263">Manuals &amp; forms</a>                <ul>            
                    <li><a href="HTTP://wcmsdev/scripts/nc.dll?WCMS:STANDARD:2059103169:pc=PC_91264">Manuals</a>                        
      </li>
                    <li><a href="HTTP://wcmsdev/scripts/nc.dll?WCMS:STANDARD:2059103169:pc=PC_91308">Forms</a>                      
      </li>
                    <li><a href="HTTP://wcmsdev/scripts/nc.dll?WCMS:STANDARD:2059103169:pc=PC_91316">CASA online store</a>                      
      </li>
                    </ul></li>          
                    <li class="has-sub">                <a href="HTTP://wcmsdev/scripts/nc.dll?WCMS:STANDARD:2059103169:pc=PC_91314">Education</a>              <ul>            
                    <li><a href="HTTP://wcmsdev/scripts/nc.dll?WCMS:STANDARD:2059103169:pc=PC_101349">AviationWorx</a>                      
      </li>
                    <li><a href="HTTP://wcmsdev/scripts/nc.dll?WCMS:STANDARD:2059103169:pc=PC_100101">eLearning catalogue</a>                       
      </li>
                    <li><a href="HTTP://wcmsdev/scripts/nc.dll?WCMS:STANDARD:2059103169:pc=PC_91346">Flight Safety Australia</a>                        
      </li>
                    <li><a href="HTTP://wcmsdev/scripts/nc.dll?WCMS:STANDARD:2059103169:pc=PC_90006"> Pilot guides and information </a>                     
      </li>
                    <li><a href="HTTP://wcmsdev/scripts/nc.dll?WCMS:STANDARD:2059103169:pc=PC_100138">OnTrack</a>                       
      </li>
                    <li><a href="HTTP://wcmsdev/scripts/nc.dll?WCMS:STANDARD:2059103169:pc=PC_100994">Human factors</a>                     
      </li>
                    <li><a href="HTTP://wcmsdev/scripts/nc.dll?WCMS:STANDARD:2059103169:pc=PC_91430">Safety management systems</a>                      
      </li>
                    <li><a href="HTTP://wcmsdev/scripts/nc.dll?WCMS:STANDARD:2059103169:pc=PC_91329">Seminars and workshops</a>                     
      </li>
                    <li><a href="HTTP://wcmsdev/scripts/nc.dll?WCMS:STANDARD:2059103169:pc=PC_91317">Aviation safety advisers</a>                       
      </li>
                    <li><a href="HTTP://wcmsdev/scripts/nc.dll?WCMS:STANDARD:2059103169:pc=PC_91455">Advice for air travellers</a>                      
      </li>
                    <li><a href="HTTP://wcmsdev/scripts/nc.dll?WCMS:STANDARD:2059103169:pc=PC_91316">CASA online store</a>                      
      </li>
                    <li><a href="HTTP://wcmsdev/scripts/nc.dll?WCMS:STANDARD:2059103169:pc=PC_101317">Out-n-Back</a>                        
      </li>
                    </ul></li>          
                    <li class="has-sub">                <a href="HTTP://wcmsdev/scripts/nc.dll?WCMS:STANDARD:2059103169:pc=PC_91488">Services</a>               <ul>            
                    <li><a href="HTTP://wcmsdev/scripts/nc.dll?WCMS:STANDARD:2059103169:pc=PC_91489">Licences and registrations</a>                     
      </li>
                    <li><a href="HTTP://wcmsdev/scripts/nc.dll?WCMS:STANDARD:2059103169:pc=PC_91510">Service standards and fees</a>                     
      </li>
                    <li><a href="HTTP://wcmsdev/scripts/nc.dll?WCMS:PWA:2059103169:pc=PC_91499">Self Service Portal</a>                     
      </li>
                    <li><a href="HTTP://wcmsdev/scripts/nc.dll?WCMS:STANDARD:2059103169:pc=PC_91517">Permission application centre (PAC)</a>                        
      </li>
                    <li><a href="HTTP://wcmsdev/scripts/nc.dll?WCMS:STANDARD:2059103169:pc=PC_91521">Aviation medicals</a>                      
      </li>
                    <li><a href="HTTP://wcmsdev/scripts/nc.dll?WCMS:STANDARD:2059103169:pc=PC_100450">Delegates and authorised persons</a>                      
      </li>
                    </ul></li>          
                    <li class="has-sub">                <a href="HTTP://wcmsdev/scripts/nc.dll?WCMS:STANDARD:2059103169:pc=PC_91621">About CASA</a>             <ul>            
                    <li><a href="HTTP://wcmsdev/scripts/nc.dll?WCMS:STANDARD:2059103169:pc=PC_91622">Contact CASA</a>                       
      </li>
                    <li><a href="HTTP://wcmsdev/scripts/nc.dll?WCMS:STANDARD:2059103169:pc=PC_93342">CASA board</a>                     
      </li>
                    <li><a href="HTTP://wcmsdev/scripts/nc.dll?WCMS:STANDARD:2059103169:pc=PC_91668">CASA's Director</a>                        
      </li>
                    <li><a href="HTTP://wcmsdev/scripts/nc.dll?WCMS:STANDARD:2059103169:pc=PC_91703">Recent media releases </a>                     
      </li>
                    <li><a href="HTTP://wcmsdev/scripts/nc.dll?WCMS:STANDARD:2059103169:pc=PC_92568">Corporate publications</a>                     
      </li>
                    <li><a href="HTTP://wcmsdev/scripts/nc.dll?WCMS:STANDARD:2059103169:pc=PC_100448">CASA on Twitter</a>                       
      </li>
                    <li><a href="HTTP://wcmsdev/scripts/nc.dll?WCMS:STANDARD:2059103169:pc=PC_92918">Corporate policy</a>                       
      </li>
                    <li><a href="HTTP://wcmsdev/scripts/nc.dll?WCMS:STANDARD:2059103169:pc=PC_92936">Careers at CASA</a>                        
      </li>
                    <li><a href="HTTP://wcmsdev/scripts/nc.dll?WCMS:STANDARD:2059103169:pc=PC_92956">Research and statistics</a>                        
      </li>
                    <li><a href="HTTP://wcmsdev/scripts/nc.dll?WCMS:STANDARD:2059103169:pc=PC_100223">International Engagement</a>                      
      </li>
                    <li><a href="HTTP://wcmsdev/scripts/nc.dll?WCMS:STANDARD:2059103169:pc=PC_100330">CASA mailing lists</a>                        
      </li>
                    </ul></li>          
</ul>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T02:47:12.953

它不起作用，因为您只有`:hover`键盘不会触发的规则。当一个元素具有选项卡焦点时，它具有`:focus`伪类，当您添加它时，您会注意到您的菜单项在获得焦点时会亮起，但仍然不会打开菜单。

[jsFiddle：与`:focus`边规则一起使用`:hover`规则](http://jsfiddle.net/DnAtR/)

![在此处输入图像描述](https://i.stack.imgur.com/kESQ3.png)

这是由于以下规则：

```
#cssmenu li:hover ul,
#cssmenu li:focus ul{
    display:block;
} 
```

从来没有真正获得焦点，`li`因为它没有标签索引，`a`内部`li`获得焦点。由于`li`是父级，`ul`但又`a`是兄弟级，`ul`我们需要使用不同的规则来使此定位起作用。我们可以使用下一个兄弟选择器`+`来定位`ul`based on `a:focus`。这让我们更近了一步。

```
#cssmenu li:hover ul,
#cssmenu li a:focus + ul{
    display:block;
} 
```

[jsFiddle 应用了上述内容](http://jsfiddle.net/nVyMn/)

![在此处输入图像描述](https://i.stack.imgur.com/Dhfqy.png)

不幸的是，这是您使用 CSS 所能做到的（据我所知）。当我们尝试进入下一个`a`时，`:focus`将被丢弃在顶层`a`并且菜单将隐藏，因为子菜单将丢失`display:block;`。由于在应用样式时我们无法向上遍历树，因此当我们进一步向下时，我们无法将其应用`display:block`到祖先。`ul``:focus``a`

我能看到解决这个问题的唯一方法是使用 JavaScript 并处理顶级菜单项的`focus`（也许是 ）事件。`blur()`然后，我们还必须处理`click()`事件以在单击文档中的任何位置时隐藏菜单，否则它将保持活动状态。

[jsFiddle完全工作](http://jsfiddle.net/VR8Wx/)

![在此处输入图像描述](https://i.stack.imgur.com/VxCfa.png)

**CSS**

```
#cssmenu li.force-show ul,
#cssmenu li:hover ul,
#cssmenu li a:focus + ul{
    display:block;
} 
```

**JS**

```
$('#cssmenu > ul > li > a').focus(function () {
    $('#cssmenu > ul > li').removeClass('force-show');
    $(this).parent().addClass('force-show');
});

// Clear the menu class if clicked anywhere in the document.
$(document).click(function () {
    $('#cssmenu > ul > li').removeClass('force-show');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T02:34:47.807

问题是，`focus`在 CSS 中不会冒泡。我最近来的是[这个](http://jsfiddle.net/HUXyQ/)：

```
/* for instance use it that way */
#cssmenu li a:hover,
#cssmenu li a:focus, 
#cssmenu ul li:hover a, 
#cssmenu ul li:focus a { } 
```

该示例适用于第一级。但是在去第二个的时候，第一个失去了它`:focus`，所以子菜单又被隐藏了。我认为您需要对 JavaScript 有所帮助。

# javafx - JavaFX 将自定义项添加到窗格

> ID：15824691
> 
> 赞同：0
> 
> 时间：2013-04-05T01:56:51.503
> 
> 标签：javafx, pane

我有一个 FXML 文件，其中有一个窗格作为它的条目之一，用于我们程序的输出。我想让这个窗格包含一个 HTMLEditor。我对如何做到这一点有点困惑。该类使用推荐的单例模式，我可以调用控制器来获取窗格。

然后我发现自己必须创建一个内部类，因为 HTMLEditor 不是节点。所以我扩展了矩形来做到这一点，并使用 getChildren.add(htmlEditorWrapper) 尝试将其添加为节点。当然，当我运行程序时，HTMLEditor 并没有出现。

我的问题的要点：如何将 HTMLEditor 添加到窗格（位于 fxml 文件中）？

```
import javafx.scene.layout.Pane;
import javafx.scene.shape.Rectangle;
import javafx.scene.web.HTMLEditor;

/**
 * Gets the controller's outputPane (the console in the gui)
 * @author Matt
 *
 */
public class OutputPanel{

    private static Pane pane;
    private static HtmlEditorWrap htmlEditor = new HtmlEditorWrap();

    private static final OutputPanel outputPanel = new OutputPanel();

    private OutputPanel(){}

    public static OutputPanel getInstance(){
        pane = Controller.getOutputPane();
        pane.getChildren().add(htmlEditor);
        return outputPanel;
    }

    public void clear(){
        //htmlEditor.setHtmlText();
    }

    public static void write(String text){
        htmlEditor.setHtmlText(text + "\n");
    }

}

class HtmlEditorWrap extends Rectangle{

    HTMLEditor htmlEditor = new HTMLEditor();

    public HtmlEditorWrap(){
        htmlEditor.setLayoutX(200);
        htmlEditor.setLayoutY(200);
        htmlEditor.setHtmlText("TESTING");
    }

    public void setHtmlText(String text){
        htmlEditor.setHtmlText(text);
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T06:58:23.553

实际上[HtmlEditor](http://docs.oracle.com/javafx/2/api/javafx/scene/web/HTMLEditor.html)是一个`Node`. 尝试直接添加它。您是如何通过扩展获得编辑器的`Rectangle`？

# javascript - 获取最后一个单词 js

> ID：15824693
> 
> 赞同：1
> 
> 时间：2013-04-05T01:57:04.410
> 
> 标签：javascript, jquery, words

这将删除最后一个单词。我如何得到最后一个字（条纹）？

```
var BaseShirtURL = "Base Shirt Draped with Fabric Stripe";
BaseShirtURL = BaseShirtURL.substring(0, BaseShirtURL.lastIndexOf(" "));
alert(BaseShirtURL); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T02:00:31.620

要获得最后一句话：

```
BaseShirtURL.split(' ').pop(); 
```

要删除最后一个单词，您可以这样做：

```
BaseShirtURL = BaseShirtURL.replace(/\w+$/,''); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T01:59:57.380

这应该这样做：

```
var BaseShirtURL = "Base Shirt Draped with Fabric Stripe";
var stripe = BaseShirtURL.substring(BaseShirtURL.lastIndexOf(" ") + 1,
    BaseShirtURL.length());
alert(stripe); 
```

# php - 警告：strpos() [function.strpos]：foreach 语句中的空分隔符

> ID：15824698
> 
> 赞同：1
> 
> 时间：2013-04-05T01:57:27.977
> 
> 标签：php, warnings, strpos

我已阅读有关 strpos() 问题的所有主题，但找不到可以解决我的问题的主题。所以这里是代码。

```
foreach($titles_array as $k=>$v) {
if(strpos($subject,$v) !== false) {
        $i++;
    $asd[$titles['id']] = $i;   
}
} 
```

该脚本运行良好，我得到了我正在寻找的结果，但出现了这个错误：警告：strpos（）[function.strpos]：空分隔符

我读到它可能是数组中的空字符串或值，但我已经检查了它们，但我没有找到任何空字符串/值。我很感激任何帮助。祝一切顺利 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T02:04:49.970

当第二个参数 to`strpos`为空时，会出现“空分隔符”警告。你肯定有一个空值`$titles_array`。

我在这里转载了警告：http: [//3v4l.org/RnU3q](http://3v4l.org/RnU3q)

在你的循环`print_r($titles_array)`之前尝试。`foreach`

# view - IE9兼容模式

> ID：15824700
> 
> 赞同：0
> 
> 时间：2013-04-05T01:57:40.243
> 
> 标签：view, compatibility, internet-explorer-10

我有一个网站在 IE10 中无法正常运行的问题（某些页面使用 iframe）。在 IE10 中，我可以单击“兼容性视图”按钮，一切正常。

为了避免用户不得不这样做，我尝试在母版页的标题中（它是一个 .NET 网站）以及根 web.config（在 system.webserver 配置块中）插入元标记。我也试过 IE=9, IE-8 ...

没有任何效果。浏览器是否没有正确解释标签？我知道它会看到它，因为当标签存在时，“兼容性视图”图标就会消失。我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T11:31:59.967

ie 9 – 兼容性：`<meta http-equiv="X-UA-Compatible" content="IE=9">`
如果你想要 ie 8： `<meta http-equiv="X-UA-Compatible" content="IE=8">`
如果你想要两者：`<meta http-equiv="X-UA-Compatible" content="IE=9; IE=8;">`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T02:19:46.713

尝试

```
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1,requiresActiveX=true"> 
```

参考：[https ://github.com/h5bp/html5-boilerplate/blob/v4.1.0/doc/extend.md#internet-explorer](https://github.com/h5bp/html5-boilerplate/blob/v4.1.0/doc/extend.md#internet-explorer)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-20T18:39:12.393

尝试添加 Response.Cache.SetCacheability(HttpCacheability.NoCache);

```
example:
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="GeneralLedgerCodeListingCustomForm.aspx.cs" Inherits="xyz.GeneralLedgerCodeListingCustomForm" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<%
    Response.Cache.SetCacheability(HttpCacheability.NoCache);
%> 
```

# android - 最佳实践：使用 SQLiteOpenHelper 定义大型数据库？

> ID：15824702
> 
> 赞同：0
> 
> 时间：2013-04-05T01:57:45.523
> 
> 标签：android, android-sqlite

我有一个扩展 SQLiteOpenHelper 的类，我在其中定义了要创建的数据库表和列。这些是如下所示的字符串：

```
public String AS_COLUMN_A_BTN5 = "a_btn5"; 
```

然后我为每个 CREATE TABLE 语句定义了一个字符串。这些表是在 onCreate() 方法中创建的。

问题是我有超过 50 列，所以文件变得非常长且难以管理。

定义大量列的最佳实践是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T19:15:08.937

1.  将您的 create-database.sql 脚本写入文件并将其保存到您的 /assets 文件夹。
2.  在你身上使用以下内容`SQLiteOpenHelper`：

`onCreate`

```
@Override
public void onCreate( SQLiteDatabase db )
{
    InputStream in_stream = null;
    try {
        in_stream = mContext.getResources().getAssets().open( CREATE_SCRIPT );
        String[] statements = parseSqlFile( in_stream );
        for ( String statement : statements ) {
            db.execSQL( statement );
        }
    } catch ( IOException e ) {
        e.printStackTrace();
    } finally {
        try {
            if ( in_stream != null ) {
                in_stream.close();
            }
        } catch ( Exception e ) {
        }
    }
} 
```

在第 8 行，您将找到一个名为`parseSqlFile()`. 这是一种采用 SQL 脚本并将其拆分为 sql 语句的方法。你可以从[这里](https://gist.github.com/kdehairy/5339450)下载它（我从很久以前读过的博客中使用它。不幸的是，我不记得了）。

这样，您可以利用编辑器的语法突出显示来发现 sql 脚本中的拼写错误。

如果您有问题，请告诉我。

# jquery - JQuery 选项卡，将我的 div 放入显示中：无

> ID：15824704
> 
> 赞同：0
> 
> 时间：2013-04-05T01:58:22.217
> 
> 标签：jquery, shopify

我已经在我的网站中实现了一些选项卡以用于产品描述。

它可以工作，但是每个选项卡上的文本会在 2 秒后消失，计数后的某些内容正在将 display:none 样式添加到 div。

它从 Shopify 中的来源获取前 5 个 div，然后从另一个地方获取最后一个 div。

此外，第一个 div 会填充来自每个 div 的所有信息，直到您单击顶部的选项卡，它只会显示适当的信息。

这是代码：

```
<script>
 $(function() {                                   // <== shorter form of doc ready
$('#tabs > div').hide();
$('#tabs div:first').fadeIn('slow');
$('#tabs ul li:first').addClass('active');
$('#tabs ul li a').click(function(){
    $('#tabs ul li.active').removeClass('active');  // <== Only what you need
    $(this).parent().addClass('active');
    var selectedTab=$(this).attr('href');
    $('#tabs > div').fadeOut('slow', function() {       // <== Use a callback
        $(selectedTab).delay(500).fadeIn('slow');          // <== add a delay
    });        
    return false;
});

});
    </script>

<div id="tabs">
   <ul class="tabs">
     <li><a class="active" href="#tab-1">Why we love it</a></li>
     <li><a href="#tab-2">Made With</a></li>
     <li><a href="#tab-3">How to use</a></li>
     <li><a href="#tab-4">Characteristics</a></li>
     <li><a href="#tab-5">Meet the brand</a></li>
     <li><a href="#tab-6">Recipes</a></li>
   </ul>
  <div class="tabcontainer">
  <div class="description" itemprop="description">
    {{ product.description }}
  <div id="tab-5">
  {% if product.vendor == 'Loving Earth' %}
  {% include 'lovingearth' %}
  {% endif %}   
   </div>  
  </div>
 </div>
</div> 
```

提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T02:19:33.667

问题是由这条线引起的

```
$('#tabs > div').fadeOut('slow', function() {       // this line
    $(selectedTab).delay(500).fadeIn('slow');
}); 
```

你正在全力以赴`div`。我假设您想在单击其他链接时隐藏。你可能想这样做。`#tabs``fadeOut``#tab-5`

```
$('#tab-5').fadeOut('slow', function() {       // this line
    $(selectedTab).delay(500).fadeIn('slow');
}); 
```

更适合您的情况的解决方案是

```
$('div[id^=tabs]').fadeOut('slow', function() {       // this line
    $(selectedTab).delay(500).fadeIn('slow');
}); 
```

这将隐藏所有以 id 开头的 div`tabs`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T03:04:17.770

改变这个：

```
$('#tabs > div').fadeOut('slow', function() {       // <== Use a callback
    $(selectedTab).delay(500).fadeIn('slow');          // <== add a delay
});        
return false; 
```

对此：

```
 $('.tabcontainer div').fadeOut('slow', function() {       // <== Use a callback
    $(selectedTab).delay(500).fadeIn('slow');          // <== add a delay
});        
return false; 
```

既然`$('#tabs > div')`选择了它们中的每个元素`<div id="tabs">`，它们都被隐藏了——包括`tabcontainer`. 因为是你正在尝试`tabcontainer`的 s 的父级: ，所以没有结果，因为它仍然位于其*隐藏*的父级内部。`div``fadeIn()``$(selectedTab).delay(500).fadeIn('slow')`

 *此外，您`<li><a class="selected">...`在标记中设置了类，`<a>`但随后在脚本中，您将类添加到`<li>`: `$('#tabs ul li:first').addClass('active')`。这是无关的，但值得指出。

> **一个[Plunk 示例：http://plnkr.co/edit/qg4xQnhOmpUFKDdlGDB7?p=preview](http://plnkr.co/edit/qg4xQnhOmpUFKDdlGDB7?p=preview)**与上面的更改概述。*

# intellij-idea - IntelliJ IDEA 12.1 时不时吃掉 100% CPU

> ID：15824708
> 
> 赞同：17
> 
> 时间：2013-04-05T01:58:41.013
> 
> 标签：intellij-idea, cpu-usage

我刚刚将我的 IntelliJ IDEA 更新到最新的 12.1 版本，我发现我的笔记本电脑 CPU 使用率不时变为 100%，监控进度管理器我发现 IDEA 定期 fork 一个新的 Java 进程，它运行了几十秒并关闭. 在此期间 CPU 使用率接近 100%：![屏幕截图](https://i.stack.imgur.com/TLLpB.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T08:50:40.633

当您对源文件进行更改时，@CrazyCoder 提到的外部构建可能会自动编译您的项目。如果它太让您烦恼，您可以禁用自动编译`File > Settings > Compiler > Make project automatically`（取消选中该框）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-04T22:02:12.063

我让 IDEA 12 进程本身（不是分叉的 Java）占据 100%，并且对按键、导航等的响应非常缓慢。

最终我通过**清除缓存、首选项、应用程序支持目录等并卸载/重新安装**IDEA 12 解决了这个问题。你必须恢复你的偏好并让 Idea 重新索引你的项目（由于删除了它的缓存）——但这不应该采取长。

这是在 OS X[上清理的一些地方的列表](https://stackoverflow.com/a/2774369/863802)（对于 IDEA 12 来说有点过时，但一个有用的起点）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-25T07:12:06.717

我正在使用 IntelliJ 13 社区版，并在 Linux 上发现了这个问题。我的情况是 Intelli JBehave 插件导致了这些问题。

打开对话框时，Java 进程的 CPU 使用率立即下降到 5% 到 10%。禁用插件时也是如此。

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2014-10-14T08:19:24.400

转到主文件夹，然后导航到 .IntelliJIdea13\config\options

编辑文件“project.default.xml” 更改VM_PARAMETERS Xmx和Xms如下

它将 CPU 使用率降低到 50%

# css - 如何始终使用纯 CSS 在视口中将灵活的正方形居中？

> ID：15824709
> 
> 赞同：5
> 
> 时间：2013-04-05T01:58:50.983
> 
> 标签：css

我知道这个问题：[高度等于动态宽度（CSS 流体布局）](https://stackoverflow.com/questions/5445491/height-equal-to-dynamic-width-css-fluid-layout)

但我想要更多！！我想要一个灵活的容器，它始终具有正方形的纵横比，但最大高度和最大宽度为页面（窗口元素）的 100%，并且在它的顶部始终垂直和水平居中。

像这样：

```
// Container matches height of the window
// container-height = 100%; container-width = absolute-container-height
-page/browser-window-
-      #######      -
-      #cont-#      -
-      #ainer#      -
-      #######      -
---------------------

// container matches width of the window
// container-width = 100%;  container-height = absolute-container-width
--page---
-       -
-       -
-#######-
-#######-
-#######-
-#######-
-       -
-       -
--------- 
```

是否可以使用纯 css（甚至更好的跨浏览器）来实现这一点？

**编辑：** 我知道 css3 有[calc()](https://developer.mozilla.org/en-US/docs/CSS/calc)，但由于[移动浏览器支持不佳](http://caniuse.com/#search=calc)，我不想使用它。

**Edit2：** 好像，我没有让自己足够清楚。我需要包装器的高度和宽度来匹配窗口的高度或宽度，具体取决于哪个更小。方形容器不应超过窗口高度/宽度的较小值。

这就是如何使用 jQuery 完成的：

```
 // container/#main-wrapper has top: 50%,  left: 50%, position: absolute  via css  
 $(window).resize(function () {
    var $ww = $(window).width();
    var $wh = $(window).height();

    if ($ww > $wh) {
        $('#main-wrapper').css({
            height: $wh,
            width: $wh,
            marginTop : ($wh / 2) * -1,
            marginLeft : ($wh / 2) * -1
        });
    } else {
        $('#main-wrapper').css({
            height: $ww,
            width: $ww,
            marginTop : ($ww / 2) * -1,
            marginLeft : ($ww / 2) * -1

        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-28T03:36:33.397

我终于弄明白了。神奇的成分是视口单元。

鉴于此 html 结构：

```
.l-table
  .l-table-cell
    .square 
```

您可以使用这个 css（实际上是它的 css，但你明白了）让它工作

```
html,
body{
  height: 100%
}
l-table{
  background: orange;
  display: table;
  height: 100%; 
  width: 100%;
}
.l-table-cell{
  display: table-cell;
  vertical-align: middle;
  border: 2px solid black;
}
.square{
  background: red;
  margin: auto;
  @media (orientation:landscape) {
    width: 70vh;
    height: 70vh;
  }
  @media screen and (orientation:portrait) {
    width: 70vw;
    height: 70vw;
  }
} 
```

[http://codepen.io/johannesjo/pen/rvFxJ](http://codepen.io/johannesjo/pen/rvFxJ)

对于那些需要它的人，有一个[polyfill](https://github.com/saabi/vminpoly)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T18:32:49.300

**编辑：自从写下以下内容后，我在 Twitter 上提出了上诉，并得到了 Brian Johnson 的回复。他提出了一个在语义上不是 100% 完美的解决方案，但它非常好，我肯定会使用它。他要求我在这次讨论中分享它。[关联](http://blog.brianjohnsondesign.com/2013/responsive-centered-square-div-that-resizes-based-on-height-in-landscape-css/)**

我现在有同样的问题，我只是在输入几乎这个确切的问题，所以虽然我无法回答，但我想分享我到目前为止发现的内容，以防它帮助任何人想出最终解决方案。

为了澄清，我需要我的内容适合一个正方形，如果纵向填充浏览器宽度的 60%，如果横向填充浏览器宽度的 60%。

但是，这个正方形绝不能超过视口的宽度或高度。

使用[此处](http://absolide.tumblr.com/post/7317210512/full-css-fluid-squares)找到的技术，我设法创建了流体正方形，但在横向时它仍然超出了视口。

```
width: 60%;
height:0;
padding-bottom: 60%; 
```

[链接到 Codepen 示例](http://codepen.io/sanjaypoyzer/pen/dEzBq)

我曾尝试将这种技术翻转过来，`landscape`但这不起作用。（您可以在上面的示例中看到该代码，并注明。）

我不能使用简单的`max-height`属性，因为高度是由`padding-bottom`属性计算出来的。

我曾考虑像其他人建议的那样添加一个额外的 div（C-Link 的帖子真的很有趣），但我不知道如何让它做我们希望它在这里做的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T02:34:36.283

如果您将前面的概念更进一步，使用类似的 div 作为容器，怎么样。容器增加了最大高度和宽度。我试过了，容器没有向我扔滚动条。我必须说自己的行为很有趣。这对你有用吗？

```
<div id="container">
    <div id="centered">A DIV</div>
</div>

    #container {
    top:0;
    bottom:0;
    right:0;
    left:0;
    margin:auto;
    position:absolute;
    width:200px;
    height:200px;
    max-width:100%;
    max-height:100%;
    background:#00f;
    padding:0;
}
#centered {
    background: green;
    bottom: 0;
    height: 80px;
    left: 0;
    margin: auto;
    position: absolute;
    top: 0;
    right: 0;
    width: 80px;
} 
```

**更新小提琴：http:** [//jsfiddle.net/djwave28/mBBJM/96/](http://jsfiddle.net/djwave28/mBBJM/96/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T02:59:38.333

*html*

```
<div id="outer">
<div id="inner">YOUR CONTENTS HERE
</div>
</div> 
```

*css*

```
html, body{
height: 100%;
}
#outer{
max-height: 100%;
max-width: 100%; 
position: relative; 
height: 100%;
}
#inner{
position: relative; 
top: 50%; 
margin-top: -50% auto auto auto; 
background: red; 
text-align: center; 
color: yellow;
} 
```

看到这个**[小提琴](http://jsfiddle.net/B6uRt/1/)**。

# sql-server - sa密码自动不断自动变化

> ID：15824711
> 
> 赞同：3
> 
> 时间：2013-04-05T01:58:55.207
> 
> 标签：sql-server

我正在使用 SQL Server 2008 R2。从 2-3 周前开始，`sa`密码一直在自动更改。有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T02:04:29.007

确保您没有设置 SA 帐户在设定的时间后更改密码。在 PCI 合规模式下，您可能必须滚动安全密码。但是，您应该为您的 SA 帐户考虑这一点。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-02-05T09:06:53.780

```
**SA passwords** don't change or reset automatically. 
```

您可以在此链接访问可能的解决方案： [sa password keep changed automatically](http://www.dbforums.com/showthread.php?1007864-sa-password-keep-changing-automatically)

# javascript - 用于包含 html 的 Javascript，是否已缓存？

> ID：15824713
> 
> 赞同：0
> 
> 时间：2013-04-05T01:59:20.690
> 
> 标签：javascript, caching

我正在使用一种方法在服务器＃1上创建一个.js文件，其中包含document.writes来编写html代码，然后在服务器＃2上的html代码中包含一个简单的js来加载该html代码（有多个服务器＃2 ）。这基本上是替换 iframe 方法，其优点是每个服务器 #2 所有者控制自己的 css。

该方法按原样完美运行。我的问题必须处理缓存。每次在服务器 #2 上加载页面时，我都希望重新加载 .js，因为它会在服务器 #1 上频繁更改。我测试的每个浏览器似乎都是这种情况，但是我可以将其作为默认情况，还是取决于浏览器设置？尽管我读过关于缓存的所有内容，但我无法弄清楚是什么触发了这种情况下的负载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T02:06:47.687

您可以使用服务器端的 HTTP 标头控制浏览器缓存。喜欢`cache-control`和`cache-expiration`。更多在这里 - [http://www.w3.org/Protocols/rfc2616/rfc2616-sec13.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec13.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T02:18:27.993

在这种情况下，缓存是由 js 文件的缓存策略触发的。**不是**html 文件。

浏览器不会缓存呈现的页面（嗯，它会缓存后退按钮，但这不是我们要讨论的）。浏览器缓存源文件。因此，即使 html 页面被配置为长时间缓存，javascript 注入的内容也只会被缓存，只要它被配置为。

要配置缓存策略，您需要在服务器端设置特定的标头。有时您可以在 CGI 脚本中执行此操作。有时您可以在服务器配置文件中执行此操作。

谷歌“http缓存”并阅读了如何配置页面缓存或不缓存（还有谷歌“json禁用缓存”或“ajax禁用缓存”，因为这个问题在ajax中出现了很多）。

# python - 设置 Python 数组的索引

> ID：15824714
> 
> 赞同：0
> 
> 时间：2013-04-05T01:59:24.837
> 
> 标签：python

我正在尝试在 Python 中设置数组的索引，但它没有按预期运行：

```
theThing = []
theThing[0] = 0
'''Set theThing[0] to 0''' 
```

这会产生以下错误：

```
Traceback (most recent call last):
  File "prog.py", line 2, in <module>
    theThing[0] = 0;
IndexError: list assignment index out of range 
```

在 Python 中设置数组索引的正确语法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T02:01:23.127

Python 列表没有固定大小。要设置第`0`th 元素，您需要*有*第`0`th 元素：

```
>>> theThing = []
>>> theThing.append(12)
>>> theThing
[12]
>>> theThing[0] = 0
>>> theThing
[0] 
```

JavaScript 的数组对象的工作方式与 Python 的有点不同，因为它会为您填充以前的值：

```
> x
[]
> x[3] = 5
5
> x
[undefined × 3, 5] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T02:01:01.200

您正在尝试分配一个不存在的职位。如果要将元素添加到列表中，请执行

```
theThing.append(0) 
```

如果您真的想分配给索引 0，那么您必须首先确保列表非空。

```
theThing = [None]
theThing[0] = 0 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T02:02:26.123

这取决于你真正需要什么。首先，您必须[阅读有关列表的 Python 教程。](http://docs.python.org/2/tutorial/introduction.html#lists) 在你的情况下，你可以使用 smth 像：

```
lVals = [] 
lVals.append(0)
>>>[0]
lVals.append(1)
>>>[0, 1]
lVals[0] = 10
>>>[10, 1] 
```

# python - 如何舍入 Python 十进制实例

> ID：15824726
> 
> 赞同：5
> 
> 时间：2013-04-05T02:00:51.310
> 
> 标签：python, rounding

如何将 Python Decimal 实例四舍五入到特定位数，同时四舍五入到最接近的小数？

我尝试使用[文档](http://docs.python.org/release/3.1.5/library/decimal.html#decimal.Context)`.quantize(Decimal('.01'))`中概述的方法，并在[以前的答案](https://stackoverflow.com/questions/7515266/rounding-problem-with-python)中提出建议，但尽管尝试了不同的 ROUND_ 选项，它似乎并没有正确舍入。我也尝试过设置 getcontext().prec，但这似乎只控制整个数字中的总位数，而不仅仅是小数。

例如，我正在尝试做类似的事情：

```
assert Decimal('3.605').round(2) == Decimal('3.61')
assert Decimal('29342398479823.605').round(2) == Decimal('29342398479823.61')
assert Decimal('3.604').round(2) == Decimal('3.60')
assert Decimal('3.606').round(2) == Decimal('3.61') 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T02:12:31.463

我认为您需要使用该`decimal.ROUND_HALF_UP`选项来`quantize`获得您想要的东西。

```
>>> for x in ('3.605', '29342398479823.605', '3.604', '3.606'):
    print x, repr(Decimal(x).quantize(Decimal('.01'), decimal.ROUND_HALF_UP))

3.605 Decimal('3.61')
29342398479823.605 Decimal('29342398479823.61')
3.604 Decimal('3.60')
3.606 Decimal('3.61') 
```

# database-design - 如何为多个电话号码设计员工表？

> ID：15824727
> 
> 赞同：-1
> 
> 时间：2013-04-05T02:00:52.180
> 
> 标签：database-design

假设您正在设计一个 Employee 表，并且必须容纳不同的电话号码。现在是 Home、Work 和 Cell，但我想将来可能会有其他人。还可以说，企业关心知道每个员工使用什么样的手机。你会如何设计它？

这是一种非规范化的方式。很简单，但意味着为任何新电话类型添加一列：

**员工**

*   员工ID

*   员工姓氏

*   员工名字

*   员工家庭电话

*   员工工作电话

*   员工手机

*   手机号

**手机**

*   手机号

*   手机制造

*   手机型号

这是一种更规范化/可扩展的方式，但随后需要弄清楚将手机品牌/型号信息放在哪里，以获取 type = cell（但不是 type = home 或 work）的电话号码：

**员工**

*   员工ID

*   员工姓氏

*   员工名字

**员工电话**

*   员工电话号码

*   员工电话号码

*   电话类型 ID

**电话类型**

*   电话类型 ID

*   电话类型名称

*   CellPhoneTypeId <--非手机号码为空？似乎是糟糕的设计。

我的倾向总是倾向于可扩展（尽管更复杂）而不是简单（但可扩展性较差），但在这里我不确定.. 特别是当您考虑到员工可能永远不会拥有每种类型的手机只有一部时。如果您采用可扩展性，那么未来的代码就不能做出这样的假设，并且总是必须适应同一类型的多个数字的可能性（这不太现实）。

感谢您的任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T07:45:48.227

*员工*
**EmployeeID**
EmployeeLastName, EmployeeFirstName

*电话*
**PhoneID**
PhoneTypeID, PhoneNumber

*Phonetype*
**PhoneTypeID**
Phonemake, Phonemodel

*EmployeePhone*
**EmployeeID、Contact**
PhoneId、Notes

我建议`Phonetype`完全放弃的地方。实际上，这无关紧要——它很快就会充满陈旧的垃圾。我看不出有任何高级主管会觉得有必要将他们最新玩具的详细信息告知 IT 部门。毕竟，IT 应该自动知道，不是吗？

我会添加一个`Contact`字段 - 看，我对字段名称不太擅长，好吗？我的意思是`reason for contact`可能是“工作”或“家”或“周末”或“高尔夫俱乐部（星期四）”或其他。`Notes`可以用于well-notes，例如“医疗紧急`Ask for Jacinta`情况`contact`”。

至于拥有多部手机——我认识的一位医生携带三部手机——除了他的办公室电话、实习电话、至少 2 部医院办公室电话、家中的公共电话和家中的私人电话（以及多户人家……）他能记住所有的数字真是一个奇迹……

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T02:11:15.993

像这样的东西？

```
Phone
ID 
Name 
Number 
Type ENUM('Work', 'Home','Cell')

Employee
ID 
EmployeeLastName 
EmployeeFirstName 

EmployeePhone
ID
EmployeeID
PhoneID 
```

# java - 使用 .contains 方法忽略大小写的选项？

> ID：15824733
> 
> 赞同：73
> 
> 时间：2013-04-05T02:01:46.977
> 
> 标签：java, list, arraylist

是否可以选择使用方法忽略大小写`.contains()`？

我有一个`ArrayList`DVD 对象。每个 DVD 对象都有几个元素，其中一个是标题。我有一个搜索特定标题的方法。它有效，但我希望它不区分大小写。

* * *

## 回答 #1

> 赞同：186
> 
> 时间：2016-07-18T11:21:05.907

如果您使用的是 Java 8

```
List<String> list = new ArrayList<>();

boolean containsSearchStr = list.stream().anyMatch("search_value"::equalsIgnoreCase); 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-04-05T02:08:30.663

我猜你的意思是在字符串中搜索时忽略大小写？

我不知道，但是您可以尝试将要搜索的字符串转换为小写或大写，然后进行搜索。

```
// s is the String to search into, and seq the sequence you are searching for.
bool doesContain = s.toLowerCase().contains(seq); 
```

编辑：正如 Ryan Schipper 所建议的，您也可以（并且可能会更好）执行 seq.toLowerCase()，具体取决于您的情况。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2014-07-18T16:14:47.177

```
private boolean containsIgnoreCase(List<String> list, String soughtFor) {
    for (String current : list) {
        if (current.equalsIgnoreCase(soughtFor)) {
            return true;
        }
    }
    return false;
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2016-07-25T21:43:02.580

在 Java 8 中，您可以使用 Stream 接口：

```
return dvdList.stream().anyMatch(d -> d.getTitle().equalsIgnoreCase("SomeTitle")); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-04-05T02:34:36.387

这可能不是解决您的特定问题的最佳方法，但您可以使用该`String.matches(String regex)`方法或匹配器等价物。我们只需要根据您的预期标题构造一个正则表达式。这里变得复杂了。

```
List<DVD> matchingDvds(String titleFragment) {
    String escapedFragment = Pattern.quote(titleFragment);
    // The pattern may have contained an asterisk, dollar sign, etc.
    // For example, M*A*S*H, directed by Robert Altman.
    Pattern pat = Pattern.compile(escapedFragment, Pattern.CASE_INSENSITIVE);
    List<DVD> foundDvds = new ArrayList<>();
    for (DVD dvd: catalog) {
        Matcher m = pat.matcher(dvd.getTitle());
        if (m.find()) {
            foundDvds.add(dvd);
        }
    }
    return foundDvds;
} 
```

但这是低效的，而且纯粹是在 Java 中完成的。您最好尝试以下技术之一：

1.  学习`Collator`和`CollationKey`类。
2.  如果您别无选择，只能留在 Java 世界中，请在 DVD 中添加一个方法，`boolean matches(String fragment)`. 让 DVD 告诉您匹配的内容。
3.  使用数据库。如果它支持不区分大小写的排序规则，则以这种方式声明表的`title`列`DVD`。使用 JDBC 或 Hibernate 或 JPA 或 Spring Data，无论您选择哪个。
4.  如果数据库支持高级文本搜索，如 Oracle，请使用它。
5.  回到 Java 世界，使用`Apache Lucene`并可能使用`Apache Solr`.
6.  使用针对不区分大小写匹配而调整的语言。

如果您可以等到 Java 8，请使用 lambda 表达式。您可以通过以下方式构建正则表达式来避免我在上面使用的 Pattern 和 Matcher 类：

```
 String escapedFragment = Pattern.quote(titleFragment);
   String fragmentAnywhereInString = ".*" + escapedFragment + ".*";
   String caseInsensitiveFragment = "(?i)" + fragmentAnywhereInString;
   // and in the loop, use:
   if(dvd.getTitle().matches(caseInsensitiveFragment)) {
        foundDvds.add(dvd);
    } 
```

但这编译模式的次数太多了。小写的一切呢？

```
if (dvd.getTitle().toLowerCase().contains(titleFragment.toLowerCase())) 
```

恭喜；你刚刚发现了土耳其问题。除非您在 中声明语言环境，否则`toLowerCase`Java 会查找当前语言环境。小写字母很慢，因为它必须考虑土耳其的无点 i 和带点 I。至少你没有模式和匹配器。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-11-04T14:23:01.720

我知道我参加聚会有点晚了，但在 Kotlin 中你可以轻松使用：

```
fun Collection<String>.containsIgnoreCase(item: String) = any {
    it.equals(item, ignoreCase = true)
}

val list = listOf("Banana")

println(list.contains("banana"))
println(list.containsIgnoreCase("BaNaNa")) 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2020-11-13T07:31:45.420

> Kotlin 开发者，选择[任何](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/any.html)/[无](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/none.html)

```
private fun compareCategory(
        categories: List<String>?,
        category: String
    ) = categories?.any { it.equals(category, true) } ?: false 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-04-05T02:04:18.330

你不能保证你总是能取回`String`对象，或者你在`List`实现中使用的对象是一种忽略大小写的方法。

如果您确实想将`String`集合中的 s 与不区分大小写的内容进行比较，则需要遍历集合并在不区分大小写的情况下比较它们。

```
String word = "Some word";
List<String> aList = new ArrayList<>(); // presume that the list is populated

for(String item : aList) {
    if(word.equalsIgnoreCase(item)) {
        // operation upon successful match
    }
} 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-08-19T23:24:00.510

将两个操作数转换为小写（或大写）的直观解决方案具有为每个项目实例化一个额外的 String 对象的效果，这对于大型集合来说效率不高。此外，正则表达式比简单的字符比较慢一个数量级。

`String.regionMatches()`允许以不区分大小写的方式比较两个字符串区域。使用它，可以编写不区分大小写的“包含”方法的有效版本。以下方法是我使用的；它基于 Apache commons-lang 的代码：

```
public static boolean containsIgnoreCase(final String str, final String searchStr) {
    if (str == null || searchStr == null) {
        return false;
    }
    final int len = searchStr.length();
    final int max = str.length() - len;
    for (int i = 0; i <= max; i++) {
        if (str.regionMatches(true, i, searchStr, 0, len)) {
            return true;
        }
    }
    return false;
} 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2022-01-27T16:02:42.800

您可以使用 stream() 将 contains() 替换为 equalsIgnoreCase，如下所示

```
 List<String> names = List.of("One","tWo", "ThrEe", "foUR", "five", "Six", "THREE");
    boolean contains = names.stream().filter(i -> i.equalsIgnoreCase("three")).collect(Collectors.toList()).size() > 0; 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-09-28T11:46:33.067

使用 Kotlin 扩展功能的强大功能非常简单，这个答案可能对 Java 和 Kotlin 开发人员有所帮助。

```
inline fun List<String>.contains(text: String, ignoreCase: Boolean = false) = this.any { it.equals(text, ignoreCase) }

// Usage
list.contains("text", ignoreCase = true) 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-11-27T17:27:39.830

```
 private List<String> FindString(String stringToLookFor, List<String> arrayToSearchIn)
 {
     List<String> ReceptacleOfWordsFound = new ArrayList<String>();

     if(!arrayToSearchIn.isEmpty())
     {
         for(String lCurrentString : arrayToSearchIn)
         {
             if(lCurrentString.toUpperCase().contains(stringToLookFor.toUpperCase())
                 ReceptacleOfWordsFound.add(lCurrentString);
         }
     }
  return ReceptacleOfWordsFound;
 } 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-11-07T08:41:26.950

对于 Java 8，您可以使用以下另一种解决方案

```
List<String> list = new ArrayList<>();
String searchTerm = "dvd";

if(String.join(",", list).toLowerCase().contains(searchTerm)) {
  System.out.println("Element Present!");
} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-10-11T18:04:23.120

如果您正在寻找包含 & 不等于，那么我会提出以下解决方案。唯一的缺点是，如果您在以下解决方案中的 searchItem 是“DE”，那么它也会匹配

```
 List<String> list = new ArrayList<>();
    public static final String[] LIST_OF_ELEMENTS = { "ABC", "DEF","GHI" };
    String searchItem= "def";

     if(String.join(",", LIST_OF_ELEMENTS).contains(searchItem.toUpperCase())) {
            System.out.println("found element");
            break;
    } 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-07-23T21:25:44.397

对 the`dvdList`和您的进行空检查`searchString`

```
 if (!StringUtils.isEmpty(searchString)) {
        return Optional.ofNullable(dvdList)
                       .map(Collection::stream)
                       .orElse(Stream.empty())
                       .anyMatch(dvd >searchString.equalsIgnoreCase(dvd.getTitle()));
      } 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-07-26T11:30:03.397

对于 Java 8+，我建议使用以下库方法。

> org.apache.commons.lang3.StringUtils

```
list.stream()
   .filter(text -> StringUtils.containsIgnoreCase(text, textToSearch)) 
```

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2015-07-27T07:51:23.223

您可以对此应用小技巧。
将所有字符串更改为**相同的大小写**：**大写**或**小写**
**对于 C# 代码：**

列出 searchResults = sl.FindAll(s => **s.ToUpper()** .Contains( **seachKeyword.ToUpper()** ));

**对于 Java 代码：**

```
import java.util.*; 

class Test
{
    public static void main(String[] args)
    {
        String itemCheck="check";
        ArrayList<String> listItem =new ArrayList<String>();
        listItem.add("Check");
        listItem.add("check");
        listItem.add("CHeck");
        listItem.add("Make");
        listItem.add("CHecK");
        for(String item :listItem)
        {
            if(item.toUpperCase().equals(itemCheck.toUpperCase()))
            {
                System.out.println(item);
            }
        }

    }

} 
```

# php - 图片未上传 - Codeigniter

> ID：15824736
> 
> 赞同：0
> 
> 时间：2013-04-05T02:02:10.217
> 
> 标签：php, codeigniter, file-upload, image-uploading

我在正在开发的 Codeigniter 应用程序中上传图像时遇到问题。该代码在我的电脑（ubuntu）上运行良好，正如教程中给出的那样。但是当我在我的（centos）服务器上尝试这个时，它给出了一个错误“你没有选择要上传的文件。”。

仅供参考，我将代码粘贴在这里。

**控制器- Upload1.php**

```
 <?php

 class Upload1 extends CI_Controller {

    function __construct()
    {
            parent::__construct();
            $this->load->helper(array('form', 'url'));
    }

    function index()
    {
            $this->load->view('upload_form1', array('error' => ' ' ));
    }

    function do_upload()
    {
            $config['upload_path'] = './uploads/';
            $config['allowed_types'] = 'gif|jpg|png';
            $config['max_size']     = '100';
            $config['max_width']  = '1024';
            $config['max_height']  = '768';

            $this->load->library('upload', $config);

            if ( ! $this->upload->do_upload())
            {
                    $error = array('error' => $this->upload->display_errors());

                    $this->load->view('upload_form1', $error);
            }
            else
            {
                    $data = array('upload_data' => $this->upload->data());

                    $this->load->view('upload_success1', $data);
            }
    }
 }
 ?> 
```

**表格 - upload_form1.php**

```
 <html>
 <head>
 <title>Upload Form</title>
 </head>
 <body>

 <?php echo $error;?>

 <?php echo form_open_multipart('upload1/do_upload');?>

 <input type="file" name="userfile" size="20" />

 <br /><br />

 <input type="submit" value="upload" />

 </form>

 </body>
 </html> 
```

**成功页面-upload_success1.php**

```
 <html>
 <head>
 <title>Upload Form</title>
 </head>
 <body>

 <h3>Your file was successfully uploaded!</h3>

 <ul>
 <?php foreach ($upload_data as $item => $value):?>
 <li><?php echo $item;?>: <?php echo $value;?></li>
 <?php endforeach; ?>
 </ul>

 <p><?php echo anchor('upload1', 'Upload Another File!'); ?></p>

 </body>
 </html> 
```

可能是什么问题呢？我将“上传”目录设置为 777。所以这不太可能是原因。我也尝试了几个类似问题的解决方案，但没有奏效。错过了一些明显的东西吗？

版本：对于服务器- PHP 5.3.13 (cli) 我的 PC- PHP 5.3.3 。

Codeigniter 在本地和远程机器上是相同的——即 2.1.3

我会很感激你的建议！！

太感谢了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T03:14:25.087

根据您的代码，我看不到是否有任何表单验证来验证提交的输入是否对您的上传配置有效。您首先应该做什么：检查您尝试上传的文件是否适合上传配置。我认为 CI 的上传类不涵盖来自无效输入表单的错误。CMIIW。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-04T16:23:37.540

通常这是您没有将名称作为“用户文件”时的错误，因此请在任何浏览器中通过“查看源代码”检查输出

# python - 在 Facebook API + Python 中导航节点/连接/对象

> ID：15824737
> 
> 赞同：0
> 
> 时间：2013-04-05T02:02:26.147
> 
> 标签：python, facebook-graph-api

我正在使用[pythonforfacebook](https://github.com/pythonforfacebook)很好地连接到 Facebook ，我设置了一个访问令牌，可以授予我此信息，但我不知道获取包含我的朋友姓名和家乡的字典的正确语法。有人可以帮我解决这个问题吗？

```
import facebook
graph = facebook.GraphAPI("access token")
friends = graph.get_connections("me", "friends")
print friends[hometown] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T03:02:21.617

确保您拥有`friends_hometown`权限，还需要将其作为字段显式请求

```
friends = graph.get_connections("me", "friends", fields="hometown") 
```

那么你就无法访问你需要了解数据结构的家乡。`friends`持有`data`（持有你所有的朋友）和一个`paging`参数。

```
for fr in friends['data']:
    if 'hometown' in fr:
    print fr['id'] + ' ' + fr['hometown']['name'] 
```

# python - Python：将 a 附加到字典中的列表

> ID：15824740
> 
> 赞同：2
> 
> 时间：2013-04-05T02:02:32.403
> 
> 标签：python, list, dictionary, append

这会很长，但我不知道如何有效地解释这一点。

所以我有 2 个正在读取的文件。第一个文件有一个字符列表。第二个文件是 3 个字符的列表，然后是匹配的标识符字符（由制表符分隔）。

使用第二个文件，我制作了一个字典，其中 3 个字符作为项目，一个字符作为对应的键。我需要做的是从第一个列表中一次取 3 个字符并将其与字典进行比较。如果有匹配项，我需要获取相应的键并将其附加到我将打印出来的新列表中。如果匹配是“*”字符，我需要停止不继续将列表与字典进行比较。

我在比较时遇到问题，然后使用 append 函数制作新列表。

这是第一个输入文件的一部分：

```
Seq0
ATGGAAGCGAGGATGtGa 
```

这是第二部分：

```
AUU     I
AUC     I
AUA     I
CUU     L
GUU     V
UGA     * 
```

到目前为止，这是我的代码：

```
input = open("input.fasta", "r")
codons = open("codons.txt", "r")

counts = 1
amino_acids = {}

for lines in codons:
        lines = lines.strip()
        codon, acid = lines.split("\t")
        amino_acids[codon] = acid
        counts += 1

count = 1

for line in input:
        if count%2 == 0:
                line = line.upper()
                line = line.strip()
                line = line.replace(" ", "")
                line = line.replace("T", "U")

                import re

                if not re.match("^[AUCG]*$", line):
                        print "Error!"

                if re.match("^[AUCG]*$", line):
                        mrna = len(line)/3
                        first = 0
                        last = 3

                        while mrna != 0:
                                codon = line[first:last]
                                first += 3
                                last += 3
                                mrna -= 1
                                list = []

                                if codon == amino_acids[codon]:
                                        list.append(acid)

                                        if acid == "*":
                                                mrna = 0

                                for acid in list:
                                        print acid 
```

所以我希望我的输出看起来像这样：

```
M    L    I    V    * 
```

但我还没有接近这一点。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T03:11:32.950

如果不用正则表达式也能解决问题，最好不要使用。

```
with open('input.fasta', 'r') as f1:
    input = f1.read()

codons = list()
with open('codons.txt', 'r') as f2:
    codons = f2.readlines()

input = [x.replace('T', 'U') for x in input.upper() if x in 'ATCG']
chunks = [''.join(input[x:x+3]) for x in xrange(0, len(input), 3)]

codons = [c.replace('\n', '').upper() for c in codons if c != '\n']

my_dict = {q.split()[0]: q.split()[1] for q in codons }

result = list()

for ch in chunks:
    new_elem = my_dict.pop(ch, None)
    if new_elem is None:
        print 'Invalid key!'
    else:
        result.append(new_elem)
        if new_elem == '*':
            break

print result 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T02:20:46.303

以下是纯粹未经测试的代码。检查缩进、语法和逻辑，但应该更接近你想要的。

```
import re

codons = open("codons.txt", "r")
amino_acids = {}
for lines in codons:
        lines = lines.strip()
        codon, acid = lines.split("\t")
        amino_acids[codon] = acid

input = open("input.fasta", "r")
count = 0
list = []
for line in input:
    count += 1
    if count%2 == 0:    #i.e. only care about even lines
        line = line.upper()
        line = line.strip()
         line = line.replace(" ", "")
         line = line.replace("T", "U")

        if not re.match("^[AUCG]*$", line):
                print "Error!"
        else:
            mrna = len(line)/3
              first = 0
              while mrna != 0:
                  codon = line[first:first+3]
                  first += 3
                  mrna -= 1
                  if codon in amino_acids:
                      list.append(amino_acids[codon])
                      if acid == "*":
                          mrna = 0

for acid in list:
    print acid 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T02:21:25.460

在 Python 中，通常有一种方法可以避免使用计数器等编写显式循环。有一种非常强大的列表理解语法，可让您在一行中构建列表。也就是说，这是编写第二个`for`循环的另一种方法：

```
import re

def codons_to_acids(amino_acids, sequence):
    sequence = sequence.upper().strip().replace(' ', '').replace('T', 'U')
    codons   = re.findall(r'...', sequence)
    acids    = [amino_acids.get(codon) for codon in codons if codon in amino_acids]

    if '*' in acids:
        acids = acids[:acids.index('*') + 1]

    return acids 
```

第一行执行所有字符串清理。将不同的方法链接在一起使代码对我来说更具可读性。你可能喜欢也可能不喜欢。第二行`re.findall`以一种巧妙的方式使用每三个字符拆分字符串。第三行是一个列表推导，它在字典中查找每个密码子`amino_acids`并创建一个结果值列表。

没有简单的方法可以打破`for`列表推导式中的循环，因此最终`if`语句会切掉出现在 a 之后的任何条目`*`。

你可以这样调用这个函数：

```
amino_acids = {
    'AUU': 'I', 'AUC': 'I', 'AUA': 'I', 'CUU': 'L', 'GUU': 'V', 'UGA': '*'
}

print codons_to_acids(amino_acids, 'ATGGAAGCGAGGATGtGaATT') 
```

# shell - 排序忽略撇号 - 有时（除非它是唯一使用的列）；为什么？

> ID：15824747
> 
> 赞同：-1
> 
> 时间：2013-04-05T02:03:47.257
> 
> 标签：shell, sorting, locale, behavior

这在 Linux 和 cygwin 上都发生在我身上，所以我怀疑这不是一个错误。不过，我还是不明白。谁能解释一下？

考虑以下文件（制表符分隔，这是一个常规撇号）（我创建它`cat`以确保它不是问题的根源不是非打印字符）

```
$cat > temp
cat     1389
cat'    1747
ca't    3175
cat     46848484
ca't    720

$sort temp
<gives the exact same output as cat temp>

$sort -k1,1 temp
cat     1389
cat     46848484
cat'    1747
ca't    3456
ca't    720 
```

为什么我必须忽略第二列才能正确排序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T03:02:47.090

我拿出手册`sort`并注意到以下内容：

> *** 警告 *** 环境指定的语言环境会影响排序顺序。设置 LC_ALL=C 以获得使用本机字节值的传统排序顺序。

事实证明，语言环境实际上指定了字典顺序对于给定语言环境的工作方式。这很有意义，但由于某种原因，它会遍历多字段文件......

（另见：）
[linux 排序命令的异常行为](https://stackoverflow.com/questions/5868465/unusual-behaviour-of-linuxs-sort-command)
[如果有尾随字段，为什么排序命令排序不同？](https://stackoverflow.com/questions/10309033/why-does-the-sort-command-sort-differently-if-there-are-trailing-fields)

**您可以做几件事：**

您可以使用按字节值天真地排序

```
LC_ALL="C" sort temp 
```

这将给出一个更合乎逻辑的结果，但它可能不是您真正想要的结果。

您可以尝试通过将语言环境设置为 C 并告诉它您想要字典排序来进行更基本的字典排序：

```
LC_ALL="C" sort -d temp 
```

要排序输出您的语言环境信息并突出显示排序键，您可以使用

```
sort --debug temp 
```

就个人而言，我真的很想知道正在指定什么规则使排序在多个字段中表现得不直观。

他们应该在给定的语言和方言中指定正确的词典顺序。语言环境的功能根本不处理多字段情况，还是对行的“含义”采取某种不同的解释？

# c# - 没有流或缓冲区的 C# 音频输出

> ID：15824749
> 
> 赞同：-2
> 
> 时间：2013-04-05T02:03:47.693
> 
> 标签：c#, windows, audio, speaker

我正在开发一个我想要一些音频输出的程序。我会使用 System.Media.SoundPlayer，只是数据是动态实时生成的。我真的只想将扬声器设置为单字节值，并在需要时更改该值。任何缓冲区或流都会使这变得过于复杂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T02:10:39.940

你不能。 `System.Media.SoundPlayer`适用于流，可以根据需要动态生成或从文件生成。

学习使用流。它们并不复杂。当然比动态生成音频要简单。

# c++ - C ++函数返回一个右值，但是可以分配一个新值吗？

> ID：15824750
> 
> 赞同：9
> 
> 时间：2013-04-05T02:04:13.250
> 
> 标签：c++, assignment-operator, temporary, rvalue

代码如下：

```
 #include <iostream>
 using namespace std;

 class A {

 };

 A rtByValue() {
return A();
 }

 void passByRef(A &aRef) {
    // do nothing
 }

 int main() {
    A aa;
    rtByValue() = aa;            // compile without errors
    passByRef(rtByValue());      // compile with error 

    return 0;
 } 
```

g++ 编译器给出以下错误：

```
d.cpp: In function ‘int main()’:
d.cpp:19:23: error: invalid initialization of non-const reference of type ‘A&’ from an rvalue of type ‘A’
d.cpp:12:6: error: in passing argument 1 of ‘void passByRef(A&)’ 
```

它说我不能将右值作为非常量引用的参数传递，但我感到困惑的是为什么我可以分配给这个右值，正如代码所示。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-05T03:06:54.483

将右值传递`rtByValue()`给需要左值引用的函数不起作用，因为这需要从右值初始化左值引用参数。§8.5.3/5 描述了如何初始化左值引用——我不会完整引用它，但它基本上说可以初始化左值引用

*   来自另一个左值引用
*   或可以转换为中间类型的左值引用的东西
*   或来自右值，但前提是我们初始化的左值引用是常量引用

由于我们需要初始化的参数不是 const-reference，所以这些都不适用。

另一方面，

```
rtByValue() = aa; 
```

即，分配给临时对象是可能的，因为：

> (§3.10/5) 对象的左值是修改对象所必需的，但在某些情况下，类类型的右值也可用于修改其所指对象。[ 示例：为对象调用的成员函数（9.3）可以修改该对象。—结束示例]

所以这只是因为`A`它是类类型的，并且（隐式定义的）赋值运算符是一个成员函数。（有关详细信息，请参阅[此相关问题](https://stackoverflow.com/questions/6466253/if-temporaries-are-implicitly-non-modifiable-how-does-this-work)。）

（因此，`rtByValue()`例如，如果要返回 an `int`，则分配将不起作用。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T03:25:26.033

因为您可以（但不应该！）覆盖 operator= 以便在右值上调用它是有意义的。考虑以下代码：

```
#include<iostream>

using namespace std;

class foo;

foo* gotAssigned = NULL;
int assignedto = -1;

class foo {
public:
  foo(int v) : val(v) {}
  foo& operator=(int v) {
    assignedto=v;
    gotAssigned = this;
    val = v;
    return *this;
  }
  int val;
};

foo theFoo(2);

foo returnTheFooByValue() {
  return theFoo;
}

main() {
  returnTheFooByValue()=5;
  cout << "[" << assignedto << "] " << theFoo.val << " versus " << gotAssigned->val << endl;
} 
```

现在让我们通过几种方式编译它：

```
$ g++ -O0 -o rveq rveq.cc && ./rveq
[5] 2 versus 5
$ g++ -O1 -o rveq rveq.cc && ./rveq
[5] 2 versus 2
$ g++ -O4 -o rveq rveq.cc && ./rveq
[5] 2 versus -1218482176 
```

我不能保证你会看到同样的结果。

如您所见，分配发生了，但是任何尝试使用已分配的对象都会导致特定于实现的行为。

顺便说一句，这*仅*适用于用户定义的类型。这段代码：

```
int v(){
  return 2;
}

main(){
  v()=4;
} 
```

不编译。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T02:16:33.937

@ddriver 正如我所料，这输出数字 7。

```
#include <iostream>
 using namespace std;

 class A {
 public:
     int i;
     A() {i = 0x07;}
 };

 A rtByValue() {
return A();
 }

 void passByRef(A &aRef) {
     cout << aRef.i;
 }

 int main() {
    passByRef(rtByValue());
    return 0;
 } 
```

# android - addPreferencesFromResource

> ID：15824752
> 
> 赞同：3
> 
> 时间：2013-04-05T02:04:27.070
> 
> 标签：android, android-preferences, android-fragmentactivity, preferenceactivity

我知道这可能与以下内容重复：[在 PreferenceActivity 中使用什么代替“addPreferencesFromResource”？](https://stackoverflow.com/questions/6822319/what-to-use-instead-of-addpreferencesfromresource-in-a-preferenceactivity)

但我仍然无法让代码正常工作，希望能得到一些帮助。我无法得到：“addPreferencesFromResource(R.xml.preferences);” 去工作。

首选项未解析，即使它位于 R.xml 文件夹中。

我按照上面链接中的示例访问了这封信。

请帮忙！！

```
package com.example.oasisreference;

import android.R;
import android.R.xml;
//import android.annotation.TargetApi;
import android.os.Bundle;
import android.preference.PreferenceActivity;
import android.preference.PreferenceFragment;

public class Prefs extends PreferenceActivity  {

@Override
protected void onCreate(final Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    getFragmentManager().beginTransaction().replace(android.R.id.content, new   MyPreferenceFragment()).commit();
} 
```

* * *

```
public static class MyPreferenceFragment extends PreferenceFragment
{
@Override
public void onCreate(final Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    addPreferencesFromResource(R.xml.preferences);
}

}

} 
```

Res.xml 文件夹中的preferences.xml

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen 
xmlns:android="http://schemas.android.com/apk/res/android" >

<EditTextPreference
    android:title="User Name"
    android:key="name"
    android:summary="Enter your name"
    ></EditTextPreference>
<CheckBoxPreference
    android:title="Euro Currency"
    android:defaultValue="false"
    android:key="euro"
    android:summary="Check for Use Cost Calculator to be in Euros/Liters">
 </CheckBoxPreference>

</PreferenceScreen> 
```

菜单.xml

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

<item
    android:id="@+id/aboutUs"
    android:title="About the Author">
</item>
<item
    android:id="@+id/preferences"
    android:title="Preferences">
</item>
<item 
    android:id="@+id/exit"
    android:title="Exit">
</item>

</menu> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-21T07:07:51.657

删除 import android.R 它将起作用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-27T00:31:19.790

答案是，它实际上并没有被弃用......他们只是想让你使用 preferenceFragments （见下文）

事实证明，它是相同的例程名称，但它被实例化为一个不同类的preferenceFragment 的一部分。它没有被弃用。这很微妙，但开发人员网站上的示例从偏好片段中引用它。将不推荐使用的调用粘贴到preferenceFragment 类中，并亲自查看不推荐使用的情况

在preferenceFragment 类声明中：

```
package android.preference;

public abstract class PreferenceFragment extends android.app.Fragment {

// ...
    public void addPreferencesFromIntent(android.content.Intent intent) {
        /* compiled code */
    }

    public void addPreferencesFromResource(int preferencesResId) {
        /* compiled code */
    }
    // ... 
```

在另一个班级

```
package android.preference;

public abstract class PreferenceActivity extends android.app.ListActivity implements android.preference.PreferenceFragment.OnPreferenceStartFragmentCallback {

    /**
    * @deprecated
    */
@java.lang.Deprecated
public void addPreferencesFromResource(int preferencesResId) {
    /* compiled code */
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-06-29T11:20:26.633

`@SuppressWarnings("deprecation")`在方法之前添加`OnCreate`。

# haskell - ghc 7.4.2，动态调用模块

> ID：15824756
> 
> 赞同：11
> 
> 时间：2013-04-05T02:04:53.913
> 
> 标签：haskell, ghc, dynamic-loading

我正在尝试动态加载和执行模块，

下面是我的代码

测试模块.hs

```
module TestModule
        where

evaluate = "Hello !!!" 
```

调用.hs

```
module Invoke
        where

import GHC
import DynFlags
import GHC.Paths (libdir)
import Unsafe.Coerce (unsafeCoerce)
import Data.Dynamic

execFnGhc :: String -> String -> Ghc a
execFnGhc modname fn = do
        mod <- findModule (mkModuleName modname) Nothing
        --setContext [IIModule mod]
        GHC.setContext [ GHC.IIDecl $ (GHC.simpleImportDecl . GHC.mkModuleName $ modname) {GHC.ideclQualified = True} ]
        value <- compileExpr (modname ++ "." ++ fn)
        let value' = (unsafeCoerce value) :: a
        return value' 
```

Main2.hs

```
import GHC.Paths (libdir)
import GHC
import Invoke
--    import TestModule

main :: IO ()
main = runGhc (Just libdir) $ do
                        str <- execFnGhc "TestModule" "evaluate"
                        return str 
```

当我尝试运行程序时，它显示以下错误

```
[root@vps mypproj]# ./Main2 
Main2: <command line>: module is not loaded: `TestModule' (./TestModule.hs) 
```

不知道我错过了什么，有人可以帮我解决这个错误吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T03:57:33.390

我的想法是问题与您的路径有关，并且程序在无法加载“TestModule”时会静默错误，然后抱怨模块未加载。您是否尝试过将 execFnGhc 与已加载的模块一起使用，并且您是否尝试过加载自然存在于 GHC 中的模块，例如 Text.Parsec，然后在其中执行某些操作？

我会测试自己，但我在任何地方都看不到 GHC.Paths 库：/。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-21T00:51:44.957

我最近正在阅读相关的 GHC 源代码，除非它们已经被加载，否则它看起来`findModule`不适用于本地模块（在你的情况下）。`TestModule.hs`（但是，它适用于远程包中的模块。）

要对编译的模块进行 GHCi 风格的动态加载，最好的办法是使用`addTarget`和`load`. 正如评论中提到的，您还需要初始化会话动态标志。这是您的代码的工作版本：

```
module Invoke
        where

import GHC
import DynFlags
import GHC.Paths (libdir)
import Unsafe.Coerce (unsafeCoerce)
import Data.Dynamic

execFnGhc :: String -> String -> Ghc String
execFnGhc modname fn = do
        dflags <- getDynFlags
        setSessionDynFlags dflags
        let target = Target (TargetModule (mkModuleName modname)) True Nothing
        addTarget target
        load (LoadUpTo (mkModuleName modname))
        mod <- findModule (mkModuleName modname) Nothing
        GHC.setContext [ GHC.IIDecl $ (GHC.simpleImportDecl . GHC.mkModuleName $ modname) {GHC.ideclQualified = True} ]
        value <- compileExpr (modname ++ "." ++ fn)
        let value' = (unsafeCoerce value) :: String
        return value' 
```

的参数是`Target`什么？第一个是模块名称；第二个是我们是否应该被允许加载目标代码，或者总是解释模块；最后一个是可选的字符串缓冲区，您可以使用它来覆盖实际文件中的源代码（这是`Nothing`因为我们不需要它。）

我是怎么想出来的？我查看了 GHCi 用于在 GHC 源代码中实现这一点的代码，以及`compiler/main/GHC.hs`. 我发现这是弄清楚如何让 GHC API 做你想做的事情的最可靠的方法。

令人困惑？GHC API 与其说是设计的不如说是增加的……

# android - 单元测试和 Android 下载管理器

> ID：15824760
> 
> 赞同：5
> 
> 时间：2013-04-05T02:05:10.493
> 
> 标签：android, testing

我想对一个使用 Android DownloadManager 服务的类进行单元测试，但我不确定如何去做。我应该实际使用 DownloadManager 服务还是有什么方法可以模拟它？我宁愿不让我的测试调用外部 Web 服务器。我可以使用现有的测试库吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-06-23T09:19:48.440

1.  该解决方案使用[Robolectric](http://robolectric.org)

要知道的一件重要事情是**下载管理器请求的计数从 -1 开始**。因此，如果您将请求排入队列，则请求计数将为 0。

2.  模拟您的 DownloadManager 对象
3.  写你的测试

    ```
    public void shouldEnqueueRequest() {
    //...

    //...

    verify(downloadManager, times(1)).enqueue(anyObject());
    //Is the DownloadManager empty
    assertThat(shadowOf(downloadManager).getRequestCount(), greaterThan(-1));
    //Get the request from the DownloadManager
    ShadowRequest realRequest = shadowOf(shadowOf(downloadManager).getRequest(0));
    assertThat(realRequest, notNullValue());
    assertThat(realRequest.getDescription(), equalTo("Your description"));
    assertThat(realRequest.getTitle(), equalTo(APP_NAME));
    } 
    ```

# c# - 一组值范围中的数组值未显示

> ID：15824761
> 
> 赞同：-1
> 
> 时间：2013-04-05T02:05:21.463
> 
> 标签：c#, arrays

我正在尝试制作一个简单的程序来根据客户购买的商品数量显示折扣。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ConsoleApplication11
{
    class Program
    {
        const int SIZE = 4;
        static void Main(string[] args)
        {
            int itemsbought = 0;
            double discountItem = 0;
            int[] items = new int[SIZE] { 0, 10, 26, 61 };
            double[] discount = new double[SIZE] { 0.0, 0.05, 0.10, 0.15 };

            InputItems(ref itemsbought);
            getDiscount(items, discount, ref itemsbought, ref discountItem);

            Console.WriteLine("Your discount is {0}", discountItem);

        }

        private static void getDiscount(int[] items, double[] discount, ref int itemsbought, ref double discountItem)
        {
            int idx = 0;
            for (idx = 1; idx >= items.Length; idx++)
            {
                while (itemsbought >= items[idx])
                {
                    discountItem = discount[idx];
                    idx++;
                }
            }
        }
        private static void InputItems(ref int itemsbought)
        {
            Console.WriteLine("Enter the amount of items you bought");
            while (!int.TryParse(Console.ReadLine(), out itemsbought))
                Console.WriteLine("Error, whole numbers only");
        }
    }
} 
```

不知何故，我知道这个逻辑真的很糟糕，但我不确定。主题之一当然是显示与输入对齐的折扣。无论输入什么值，它都只是显示“折扣为 0”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T02:09:19.463

你的`for`循环全错了。首先，它没有执行，因为您的条件是`idx >= items.Length;`. 应该是相反的：`idx < items.Length;`. 其次，我不确定您为什么`idx`要`1`在初始化程序中设置为...

内部 while 循环也可能不会做你想做的事，但我什至不确定你一开始想让它做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T02:11:09.190

您需要修复循环条件检查部分，它使用的故障逻辑`idx >= items.Length;`应该是`idx < items.Length;`.

c# 中的数组具有从零开始的索引，因此它必须以`idx = 0`.

```
for (idx = 0; idx < items.Length; idx++)
{
    while (itemsbought >= items[idx])
    {
        discountItem = discount[idx];
        idx++;
    }
} 
```

# xml - 转换 XML 格式

> ID：15824771
> 
> 赞同：1
> 
> 时间：2013-04-05T02:07:27.267
> 
> 标签：xml, xslt

我在字符串中有一个格式如下的 XML：

```
 <?xml version="1.0" encoding="utf-8" ?> 
- <soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
- <soap:Body>
- <GetUserLinksResponse xmlns="http://microsoft.com/webservices/SharePointPortalServer/UserProfileService">
- <GetUserLinksResult>
- <QuickLinkData>
  <Name>System 1</Name> 
  <Group>General</Group> 
  <Privacy>Private</Privacy> 
  <Url>https://url1.com</Url> 
  <ID>6500</ID> 
  </QuickLinkData>
- <QuickLinkData>
  <Name>System 2</Name> 
  <Group>General</Group> 
  <Privacy>Private</Privacy> 
  <Url>https://url2.com</Url> 
  <ID>6499</ID> 
  </QuickLinkData>
- <QuickLinkData>
  <Name>System 3</Name> 
  <Group>Work</Group> 
  <Privacy>Private</Privacy> 
  <Url>http://url3.com</Url> 
  <ID>6845</ID> 
  </QuickLinkData>
  </GetUserLinksResult>
  </GetUserLinksResponse>
  </soap:Body>
  </soap:Envelope> 
```

我希望使用 xslt 或 c# 格式如下：

```
<?xml version="1.0" encoding="utf-8" ?> 
<root>
<Group>
<Value>General</Value>
<Item>
 <ID>6500</ID>
 <Name>System 1</Name>
 <Url>https://url1.com</Url>
</Item>
<Item>
 <ID>6499</ID>
 <Name>System 2</Name>
 <Url>https://url2.com</Url>
</Item>
</Group>
<Group>
<Value>Work</Value>
<Item>
 <ID>6845</ID>
 <Name>System 3</Name>
 <Url>https://url3.com</Url>
</Item>
</Group>
</root> 
```

可能有多个组我如何在 c# 中实现这一点（使用 xslt 或任何其他进程）

请帮忙...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T03:36:59.100

**这个简短而简单的转换：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:x="http://microsoft.com/webservices/SharePointPortalServer/UserProfileService"
 exclude-result-prefixes="x">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:key name="kGroupByVal" match="x:Group" use="."/>

 <xsl:template match=
   "x:Group[generate-id() = generate-id(key('kGroupByVal',.)[1])]">
  <Group>
   <Value><xsl:value-of select="."/></Value>
   <xsl:apply-templates select="key('kGroupByVal',.)/.." mode="inGroup"/>
  </Group>
 </xsl:template>

 <xsl:template match="x:QuickLinkData" mode="inGroup">
  <Item>
   <ID><xsl:value-of select="x:ID"/></ID>
   <Name><xsl:value-of select="x:Name"/></Name>
   <Url><xsl:value-of select="x:Url"/></Url>
  </Item>
 </xsl:template>
 <xsl:template match="text()"/>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<soap:Envelope
 xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <soap:Body>
        <GetUserLinksResponse
          xmlns="http://microsoft.com/webservices/SharePointPortalServer/UserProfileService">
            <GetUserLinksResult>
                <QuickLinkData>
                    <Name>System 1</Name>
                    <Group>General</Group>
                    <Privacy>Private</Privacy>
                    <Url>https://url1.com</Url>
                    <ID>6500</ID>
                </QuickLinkData>
                <QuickLinkData>
                    <Name>System 2</Name>
                    <Group>General</Group>
                    <Privacy>Private</Privacy>
                    <Url>https://url2.com</Url>
                    <ID>6499</ID>
                </QuickLinkData>
                <QuickLinkData>
                    <Name>System 3</Name>
                    <Group>Work</Group>
                    <Privacy>Private</Privacy>
                    <Url>http://url3.com</Url>
                    <ID>6845</ID>
                </QuickLinkData>
            </GetUserLinksResult>
        </GetUserLinksResponse>
    </soap:Body>
</soap:Envelope> 
```

**产生想要的正确结果：**

```
<Group>
   <Value>General</Value>
   <Item>
      <ID>6500</ID>
      <Name>System 1</Name>
      <Url>https://url1.com</Url>
   </Item>
   <Item>
      <ID>6499</ID>
      <Name>System 2</Name>
      <Url>https://url2.com</Url>
   </Item>
</Group>
<Group>
   <Value>Work</Value>
   <Item>
      <ID>6845</ID>
      <Name>System 3</Name>
      <Url>http://url3.com</Url>
   </Item>
</Group> 
```

**说明**：

正确使用**[孟池分组法](http://www.jenitennison.com/xslt/grouping/muenchian.html)**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T02:48:28.660

你应该使用：[Linq to xml](http://www.dotnetcurry.com/ShowArticle.aspx?ID=564)

首先，我会准备一组集合或更好的新类：Group 和 Item。

在第二阶段解析源文件，用数据填充集合。

最后，从这些类集合中使用 linq to xml 生成所需的文件结构。

祝你好运！

# android - Android：如何等到 Timer 和 Timertask 完成他们在 UI 线程上的工作

> ID：15824780
> 
> 赞同：0
> 
> 时间：2013-04-05T02:08:50.977
> 
> 标签：android

我有一个片段。在这个片段中，我有一个定期运行 timertask 的 Timer。我重写`onPause`了，所以当切换片段时，TimerTask 和计时器将停止它的工作。

```
@Override
        public void onPause() {
            super.onPause();
            timerTask.cancel();
            timer.cancel();
            timer.purge();
        } 
```

这是我切换片段的代码：

```
OrderFragment fragment2 = new OrderFragment();
                    fragment2.setArguments(arguments);
                    getSupportFragmentManager().beginTransaction().replace(R.id.item_detail_container, fragment2).commit(); 
```

但是当我切换不同的片段时，我经常收到`Null Point Exception`因为 TimerTask 无法访问 UI Thread 了（因为我已经使用过`runOnUIThread`）

所以，我的问题是：如何确保 Timer 和 TimerTask 在我可以更改片段之前停止所有工作。

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T02:20:54.600

仅仅通过切换显示的片段，您的片段可能不会进入后台。它的生命周期取决于 Activity 的。我认为，如果您添加`Log.d("yourFragment", "onPause()");`到 onPause() 方法，您会发现这是真的。

片段生命周期可以在这里找到：

[http://developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html)

请注意，它表示您的片段何时被删除/替换，但如果您只是从您的活动中显示另一个不计入的片段；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T03:00:50.700

似乎[onHiddenChanged(boolean hidden)](http://developer.android.com/reference/android/app/Fragment.html#onHiddenChanged%28boolean%29)是您需要的。从`Fragment` `onPause()`文档中：

> 这通常与包含 Activity 生命周期的 Activity.onPause 相关联。

所以`onPause()`当片段不再可见时不一定调用。将您的计时器取消代码移动到`onHiddenChanged()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T13:18:48.373

将您的`timer`.cancle 作为声明放在此上方：

```
timer.cancel();
OrderFragment fragment2 = new OrderFragment();
                fragment2.setArguments(arguments);  
getSupportFragmentManager().beginTransaction().replace(R.id.item_detail_container,      
fragment2).commit();

Declare private Timer timer; at class level 
```

# android - 从 SL4A 脚本启动 SL4A 脚本

> ID：15824782
> 
> 赞同：2
> 
> 时间：2013-04-05T02:09:08.820
> 
> 标签：android, python, sl4a, start-activity

我想从不同的 SL4A 脚本中启动后台 SL4A 脚本（在远程设备上）。我可以通过运行以下命令从终端启动脚本：

```
$ am start -a \
com.googlecode.android_scripting.action.LAUNCH_BACKGROUND_SCRIPT -n \
com.googlecode.android_scripting/.activity.ScriptingLayerServiceLauncher -e \
com.googlecode.android_scripting.extra.SCRIPT_PATH /sdcard/sl4a/scripts/main.py 
```

我无法将其转换为`startActivity`Python 中的调用。

[打开 Twitter 客户端的另一个问题](https://stackoverflow.com/questions/12737150/launch-android-app-from-sl4a-script)的答案效果很好，但我不知道如何扩展该代码。例如，您将如何添加脚本路径，以及将行放在哪里`com.googlecode.android_scripting/.activity.ScriptingLayerServiceLauncher`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-23T05:18:43.857

此函数将从另一个脚本中启动任何 SL4A 脚本。

第一个参数应该是您要启动的脚本的路径。该脚本可以是您安装了解释器的任何语言。

第二个参数是可选的，应该是一个布尔值。它默认为`False`. 它控制终端是否可见，因此您可以看到输出和错误。它不影响脚本是否具有 UI。

```
from android import Android
droid = Android()

def launch_script(path, visible=False):

    visibilty   = 'FORE' if visible else 'BACK'
    activity    = 'com.googlecode.android_scripting.action.LAUNCH_{0}GROUND_SCRIPT'.format(visibilty)
    extras      = {'com.googlecode.android_scripting.extra.SCRIPT_PATH': path}
    packagename = 'com.googlecode.android_scripting'
    classname   = 'com.googlecode.android_scripting.activity.ScriptingLayerServiceLauncher'
    intent      = droid.makeIntent(activity, None, None, extras, None, packagename, classname).result

    droid.startActivityIntent(intent) 
```

[这里有这段代码](https://gist.github.com/carlsmith/1970be371bae451e868b)的要点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T13:48:59.380

经过无数次失败的尝试后，我现在可以在 Ruby 中使用它了——与在 Python 中相比，我更容易以这种方式生成 JSON 附加内容。

重要的！在命令行版本中，您调用“com.googlecode.android_scripting/.activity.ScriptingLayerServiceLauncher”

在脚本中，这称为“com.googlecode.android_scripting.activity.ScriptingLayerServiceLauncher”，不带斜线。离开斜线会导致 sl4a 崩溃。

[代码]

需要'android'需要'json/pure'

d=Android.new

脚本 = '/sdcard/sl4a/scripts/YOUR_SCRIPT'

数据 = {"com.googlecode.android_scripting.extra.SCRIPT_PATH"=>脚本}

extras = JSON.generate(数据)

d.startActivity('com.googlecode.android_scripting.action.LAUNCH_BACKGROUND_SCRIPT','','',data,true,'com.googlecode.android_scripting','com.googlecode.android_scripting.activity.ScriptingLayerServiceLauncher')

[/代码]

我希望这有帮助！

# java - 如何在 Microsoft 笔设备上获取准确的 Java Swing 鼠标事件？

> ID：15824783
> 
> 赞同：2
> 
> 时间：2013-04-05T02:09:09.623
> 
> 标签：java, swing, mouseevent, pen, wacom

有没有人在 Surface Pro 或其他 Microsoft Wacom 笔平台上找到了 Java Swing 鼠标事件计时的解决方案？

目标是在绘图类型应用程序中创建响应式笔划输入，包括在笔划开始时。

此问题出现在运行 Windows 8 的 Surface Pro 上。我之前在运行 XP 的东芝 TabletPC 上观察到它。在这两种设备上，我相信笔传感器是 Wacom。

问题在于 mousePressed 和 mouseDragged 事件的时间安排。一个简单的程序将让 mousePressed 事件启动一个笔划，随后的 mouseDragged 事件为其添加点。

从表面上看，鼠标和笔在触发这些事件时的行为应该相似。

但事实上我观察到时间是非常不同的。对于鼠标，mouseDragged 事件在 mousePressed 事件之后大约 8 毫秒发生。凉爽的。

但是，使用笔时，行为很奇怪。当笔被按下时，会立即触发 mousePressed 事件。但是在第一个 mouseDragged 事件被发送之前有一个显着的延迟。这破坏了笔画的开始。调用 System.currentTimeMillis() 会返回欺骗性的答案。这些调用表明 mousePressed 事件和随后的 mouseDragged 事件同时发生。这是不可能的，因为活动地点大相径庭。

O/S、Wacom 驱动程序和 Java 之间肯定发生了一些有趣的事情。有没有人遇到过这个，或者更好的解决方案？

# java - 直接写入socket，获取TCP ZeroWindow

> ID：15824786
> 
> 赞同：1
> 
> 时间：2013-04-05T02:09:28.963
> 
> 标签：java, sockets, tcp, window

如您所见，我每 10 秒直接向特定套接字发送一个请求（以保持活动状态并被检测到），但它只能发送两次。使用wireshark，我发现我发送的第三个包有`TCP ZeroWindow`并且它无法发送到服务器。以下软件包也是如此。通常，窗口大小应保持在正常水平，而不是一直减小。源代码有什么问题？任何帮助表示赞赏！

***我得到了三个包裹：***

![第一个包裹](https://i.stack.imgur.com/BC76r.png) ![第二包](https://i.stack.imgur.com/v02Oz.png) ![第三包](https://i.stack.imgur.com/KwujM.png)

***源代码：很简单***

```
public class pediy {

    public static void main(String[] args) throws IOException {

        URL url = new URL("http://bbs.pediy.com");
        Socket socket = null;
        PrintWriter os = null;
        BufferedReader is = null;

        while(true) {

            socket = new Socket(url.getHost(), 80);
            os = new PrintWriter(socket.getOutputStream());

            String request = "GET / HTTP/1.1\nHost: bbs.pediy.com\nProxy-Connection: keep-alive\nAccept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\nUser-Agent: Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.56 Safari/537.17 CoolNovo/2.0.6.12\nAccept-Encoding: gzip,deflate,sdch\nAccept-Language: en-US;q=0.6,en;q=0.4\nAccept-Charset: utf-8;q=0.7,*;q=0.3\n";
            try {
                while (true) {

                    os.println(request);
                    os.flush();

                    System.out.println("Finished");
                    Thread.sleep(1000*10);
                }

            } catch (Exception e) {
                System.out.println("Error" + e);
            } finally {
                CloseAll(socket, os);
            }
        }
    }

    private static void CloseAll(Socket socket, PrintWriter os) throws IOException {
        if(socket != null) socket.close();
        if(os != null) os.close();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T02:15:34.697

这仅仅意味着 TCP 连接的另一端没有消耗（读取）您发送的数据，因此 TCP 流控制启动以减慢发送方的速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T03:17:20.410

出色地，

1.  您没有发送有效的 HTTP。HTTP 中的行终止符是`\r\n`，而不仅仅是`\n`，并且在标头之后需要有一个空行。

2.  您没有阅读回复。

所以另一端会有一些困难。你很幸运它还没有关闭连接。

# python - 按变量切片/跨步？

> ID：15824788
> 
> 赞同：0
> 
> 时间：2013-04-05T02:09:50.777
> 
> 标签：python, slice, stride

**背景**

我正在尝试用 python 编写一个基本的字母游戏。在游戏中，计算机版主从可能的单词列表中挑选一个单词。每个玩家（计算机 AI 和人类）都会看到一系列空白，每个字母对应一个单词。然后每个玩家猜测一个字母和一个位置，并被告知以下内容之一：

*   那封信属于那个位置（最好的结果）
*   那个字母在单词中，但不在那个位置
*   该字母不在任何剩余的空白处

当单词完全显示出来时，猜对最多字母的玩家将赢得一分。电脑版主又选了一个词，重新开始。第一个获得五分的玩家赢得比赛。在基本游戏中，两个玩家共享他们正在填写的同一组空白，因此玩家可以从彼此的工作中受益。

**我的问题**

有没有办法使用包含整数的变量来指定切片/步幅的程度？

因为秘密词是随机的，我无法知道它将包含多少个字符。我想首先根据用户选择的位置值的准确性来检查用户的输入（猜测），然后再检查字母是否出现在密码中（不仅仅是在他们指定的位置）。我在想我可以使用 len() 来确定秘密单词中的位置数，然后使用玩家的数字输入来切片/跨步到玩家指定的单词中的正确字符位置。

如何将用户提供的整数放入 slice/stride 命令？它似乎不接受将输入分配给变量，然后将变量放在切片/步幅内。

我是 python 的初学者，如果这是一个愚蠢的问题，我深表歉意——我最初的研究没有发现任何问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T02:15:58.543

简单地说，是的，你可以做到这一点。您需要确保您实际获得的输入*是*一个`int`，并从那里使用它。

```
some_word = "This is the song that doesn't end"
stride = int(raw_input("Stride distance? "))

print some_word[::stride]  # prints out "Ti stesn htdented" 
```

* * *

查看注释后，您可以通过索引来隔离字符串/序列中的单个字符。

```
some_word = "This is the song that doesn't end"
iso = int(raw_input("Isolated character? "))

print some_word[iso] # prints out whatever character is in that position, 0-based. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T03:01:34.647

看起来这样做了，试图根据用户输入 2 来隔离“dude”中的“u”。

```
userGuessPosition = 2

secretWord = ('dude')
slice1 = (secretWord.__len__()) - userGuessPosition - 1
print (secretWord[slice1:userGuessPosition]) 
```

# mysql - 数据库 为功能学校设计一个简单的数据库

> ID：15824790
> 
> 赞同：0
> 
> 时间：2013-04-05T02:10:19.767
> 
> 标签：mysql, sql, database

所以我在为我的数据库提出实体关系时遇到了一些麻烦，但是我已经完成了一些最小口径的设计过程。将创建数据库，以便学生可以有许多课程多对多的关系（我知道很明显）。该数据库需要每天跟踪家庭作业和出勤情况。但是，课程可以是一周中的一天或多天。

advisors->(advisorid, firstname, lastname, phone , email)

学生->（学生，名字，姓氏，电话，电子邮件）

课程->（课程ID，描述，开始日期，状态时间，房间）

学生课程->（学生，课程ID）

* * *

在这里我被卡住了，我正在考虑创建一个日历表，但是我将如何将数据与作业表和出勤率相关联。如果有任何建议会受到很大的批评，欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-04-03T09:57:49.523

您需要创建更多实体来实现高效的数据库设计。一种解决方案是：

```
Attendance(id,student_id,course_id,date)

Homework(id, course_offering_id, date) -- course_offering_id: primary key of student courses

-- since many to many relation lies between homework and student
Homework_Student(id, homework_id, student_id) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T03:30:25.960

您可以扩展学生课程表以添加更多列，例如

Studentcourses->(studentid,courseid,attendence(bool),datetime,homework(text),previoushomework(bool))

如果学生在课程安排的特定日期和时间在场，则出勤率将是真实的。

datetime->课程的日期和时间

homework-> 这显示学生得到的作业

previoushomework-> 当学生完成前一次的作业时，这将是真的

这是您在这个项目中可以拥有的最简单和最紧凑的表格设计，您还可以根据需要制作其他关系表格

希望可以解决您的问题

# android - 操作栏下拉菜单打开和关闭项目样式

> ID：15824793
> 
> 赞同：1
> 
> 时间：2013-04-05T02:10:54.367
> 
> 标签：android, android-actionbar

我正在尝试设置操作栏列表导航的样式，使其在关闭状态下具有白色文本。但是，当我这样做时，它已将**所有**文本变为白色，这不适用于白色下拉菜单。

有没有办法单独设计每个样式？文档不存在:(

![截屏](https://i.stack.imgur.com/VgtWH.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T06:52:53.873

为您的`Adapter`. 在这个我已经创建了一个布局里面我已经添加了一个`TextView`。和。`text color`_`background color`

并设置如下：

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(
                getBaseContext(), R.layout.my_spinner_style, R.id.textView1,
                COUNTRIES); 
```

这里

`R.layout.my_spinner_style`是我的自定义布局。

`R.id.textView1`是来自的文本视图 ID `my_spinner_style.xml`。

**您还可以在 TextView 中应用您的 awn 样式。**检查[这个](http://developer.android.com/guide/topics/ui/themes.html)和[这个](http://developer.android.com/guide/topics/resources/style-resource.html)aretical。

检查此代码：

![在此处输入图像描述](https://i.stack.imgur.com/piOCS.png)

里面`onCreate`：

```
/** Create an array adapter to populate dropdownlist */
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(
                getBaseContext(), R.layout.my_spinner_style, R.id.textView1,
                COUNTRIES);

        /** Enabling dropdown list navigation for the action bar */
        getActionBar().setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);

        /** Defining Navigation listener */
        ActionBar.OnNavigationListener navigationListener = new OnNavigationListener() {

            @Override
            public boolean onNavigationItemSelected(int itemPosition,
                    long itemId) {
                Toast.makeText(getBaseContext(),
                        "You selected : " + COUNTRIES[itemPosition],
                        Toast.LENGTH_SHORT).show();
                return false;
            }
        };

        /**
         * Setting dropdown items and item navigation listener for the actionbar
         */
        getActionBar().setListNavigationCallbacks(adapter, navigationListener); 
```

my_spinner_style.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#FFFF00" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Large Text"
        android:textAppearance="?android:attr/textAppearanceLarge" />

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T04:02:55.057

Probably, you can do it programmatically (though I never tried it):

```
 public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.menuId, menu);

    menu.findItem(R.id.itemId).getActionView().setBackground(...)
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-17T19:12:04.813

如果您使用`Adapter`（根据定义必须实现`SpinnerAdapter`），您有两个可以覆盖的回调。`getView`将为“选定”项目调用。`getDropDownView`将被调用下拉项目。您可以在那里设置不同的文本颜色。

# java - JFrame 总是为动作监听器中的变量打印出 null

> ID：15824797
> 
> 赞同：1
> 
> 时间：2013-04-05T02:11:50.750
> 
> 标签：java, arrays, swing, jframe, actionlistener

以下程序的目标是要求用户输入一个电阻值，然后程序将输出每个数字对应的颜色。因此，这不包括所有数字。但是，该程序已经完成，我尝试将 JFrame 合并为一个额外的东西，除了我对如何在动作侦听器中打印相应的颜色感到困惑。

我之前问过这个问题，但是由于忘记输入特定标签而得到的答复有限。但是，使用 ArraysToString 的用户回答实际上什么也没做，因为程序仍然设法打印空值。

[不能引用动作侦听器（Jframe）中的非变量](https://stackoverflow.com/questions/15824158/cannot-refer-to-non-variable-inside-action-listener-jframe/15824306?noredirect=1#15824306) JFrame 下面的方法可以根据数字编号收集电阻器的每个色带的信息，而在动作侦听器中，我尝试简单地打印出这些颜色，但它总是打印 null （3次）

我尝试过在线查看各种教程，甚至是 Java API 和指南，但都无济于事。总的来说，我似乎不知道如何将已经写入 JFrame 的代码合并到 JFrame 中，无论这是否是一个乏味的过程，我愿意合作，并且非常感谢有关如何解决这个困境的一些见解。

```
import java.io.*;
import javax.swing.*;
//import javax.swing.JFrame;
//import javax.swing.JLabel;
//import javax.swing.JButton;
//import javax.swing.JPanel;
//import javax.swing.JTextField;
import java.awt.event.*;
import java.util.Arrays;

public class test extends JFrame
{
  public static void main (String [] args) throws IOException
  {
    BufferedReader myInput = new BufferedReader (new InputStreamReader (System.in));

    //calling variables
    String input;
    int numInput;

    JLabel l = new JLabel("Hello and welcome to the Program (Press the button to start the instructions");
    //l.setAlignmentX(0);
   // l.setAlignmentY(0);

    //calling arrays
    int [] array = new int [5];
    int [] array2 = new int [3];
    String [] array3 = new String [3];
    String[] colours = {"black", "brown", "red", "orange", "yellow", "green", "blue", "violet", "gray", "white"};

    JFrame f = new JFrame("Hello JFrame");
    f.setSize(500,500);
    //f.getContentPane().setBackground(Color.CYAN);
    f.add(l);
    f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    f.setVisible(true);

    //JTextField t = new JTextField(16);

    JPanel p = new JPanel ();
    JButton b = new JButton("Press me") ;
   // b.setAlignmentX(0);
   // b.setAlignmentY(0);

    b.addActionListener(new ActionListener(){
      public void actionPerformed (ActionEvent e) {
        JOptionPane.showMessageDialog(null,"In the following program you (The user!) will input a number of a resistor value \nThe program will pass the information into methods and then proceed to print out \nThe coorelating colors (Press the button to be asked for input)");
        int number = Integer.parseInt(JOptionPane.showInputDialog("Please enter the resistor value"));

        final String [] array3 = new String [3];

       JOptionPane.showMessageDialog(null, "The Colors are : " + (Arrays.toString(array3)));

      } 

    });

    p.add(b);
    p.add(l);
    //p.add(t);
    f.add(p);

    System.out.println("Hello and welcome to the Program (Press any key to con't)");
    input = myInput.readLine ();

    System.out.println("In the following program you (The user!) will input a number of a resistor value");
    System.out.println("The program will pass the information into methods and then proceed to print out");
    System.out.println("The coorelating colors (Press any key to be asked for input)");
    input = myInput.readLine();

    System.out.println("Enter a resistor value (Note that resistors can only acount to 4 decimal places");
    input = myInput.readLine ();
    numInput = Integer.parseInt (input);

    //colours for values
    array2 = values(array, input, colours);
    for(int i = 0 ; i < 3; i++){
      array3[i] = digitColours(array2[i], colours);
      System.out.println(array3[i]);// prints colours for values
    }

    //prints 4th colour for multiplier
    System.out.println(decimalPlaces(input, colours));

  } 

  public static int[] values (int [] digit, String num, String[] colours)
  {

    String holder;
    double numHolder;
    int lengthOfInput;
    int holder2;

    //tollerance
    holder = num.substring(3,4);
    digit[3] = Integer.parseInt(holder);
    holder2 = Integer.parseInt(num);
    // checks to see if above 5
    if(digit[3] < 5){
      digit[3] = digit[3]/holder2 * 100;
    }
      else if(digit[3] > 5){
      digit[3] = 10 - digit[3];
      digit[3] = digit[3]/holder2 * 100;
    }
    System.out.println(digit[3]);

    //Rounding of the input
    lengthOfInput = num.length() - 3;
    numHolder = Double.parseDouble(num);
    numHolder = numHolder/(Math.pow(10,lengthOfInput));
    numHolder = (int)(Math.round(numHolder)+0.5);

    // first three digits
    for(int i = 0; i < 3; i++){
      holder = num.substring(i,i+1);
      digit[i] = Integer.parseInt(holder);
    }

    //print out for information
    /*System.out.println("The first digit is rounded to:" + (int)digit[0]);
     System.out.println("The second digit is roudned to:" + (int)digit[1]);                   
     System.out.println("The third digit is roudned to:" + (int)digit[2]);  */
    /* */
    return new int[] {digit[0], digit[1],digit[2],digit[3]} ;// return
  }

  public static String digitColours(int decimalPlace, String[] colours){
    //calling additional variables
    String answer;
    answer = colours[decimalPlace];
    return answer;
  }

  //method to find the multiplier
  public static String decimalPlaces(String input, String[] colours){
    //calling additional variables
    int length = input.length();
    String answer;

    length = length - 3;
    answer = colours[length];

    return answer;
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T02:18:55.823

数组 array3 将始终为 null，因为它是这样声明的：

```
 final String[] array3 = new String[3];

        JOptionPane.showMessageDialog(null,
              "The Colors are : " + (Arrays.toString(array3))); 
```

从上面的代码可以看出，它从未分配过任何类型的 String 对象，因此默认为 null。您必须先填充它才能保存非空值。想象一个类似于鸡蛋箱的对象数组：除非你用鸡蛋填充它，否则它总是空的。

我建议您将任何想要传递到内部类 final 的变量。但它必须在*外部*类中是最终的，而不是在*内部*类中：

更重要的是，我会将您的大部分代码*从*您的 main 方法中取出，从静态区域中取出并放入它所属的实例区域中。然后您可以使用类字段而不必担心局部最终变量。这就是我认为您当前程序的主要弱点——太多的静态代码和没有足够的符合 OOP 的类和对象。

您的另一个问题是您似乎试图将 Swing GUI 与控制台程序混合使用，该程序通过 GUI 和标准通过 BufferedReader 获取用户输入，这可能会导致灾难。我强烈建议您选择其中一个，在我看来，使用 Swing GUI 可能会更好，不要尝试混合这些不可混合的东西。

# android - 用于 pre-honeycomb 的 Android Actionbar 兼容性备用 xml

> ID：15824798
> 
> 赞同：0
> 
> 时间：2013-04-05T02:12:00.817
> 
> 标签：android, android-actionbar, android-3.0-honeycomb, android-2.3-gingerbread, android-actionbar-compat

我在我的应用程序中使用了 actiobarcompat 示例，并且正在尝试实现对 3.0 之前的设备的搜索。

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

<item
    android:id="@+id/menu_search"
    android:orderInCategory="1"
    android:title="@string/menu_search"
    android:icon="@drawable/ic_home"
    android:showAsAction="collapseActionView|ifRoom"
    android:actionViewClass="android.widget.SearchView" />

</menu> 
```

在 Honeycomb+ 上这工作正常，searchview 小部件出现在操作栏中。我想要做的是有第二个菜单 XML，所以我可以回退到旧的搜索活动方式。但是，没有 menu-v11 文件夹之类的东西，因为菜单文件夹本质上是 menu-v11，因为这是它开始支持它的版本。

我的问题是，使用操作栏兼容性示例，有没有办法以声明方式为 pre-honeycomb 添加一个备用按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T03:45:34.280

您能否更具体地说明您要实现的目标？

它是关于根据 API 版本调用不同的活动，操作栏与此无关。您在 onOptionsItemSelected 中分析 API 版本并采取相应措施。

如果您想要根据 API 版本不同的菜单项，只需创建一个文件夹*menu-v11*（或*menu-v14*）并将特定于版本的 xml-s- 放在那里。

顺便说一句，我使用*com.android.actionbarcompat*，它对我很有用！

# c++ - 将 Gtk::ComboBoxText 设置为不可编辑

> ID：15824799
> 
> 赞同：0
> 
> 时间：2013-04-05T02:12:12.043
> 
> 标签：c++, gtkmm

我将如何将 Gtk::ComboBoxText 设置为不可编辑，我的意思是在组合框中可能有 10 个选项可供选择 我怎样才能做到这一点，所以您根本不允许选择除我的文本之外的其他内容已设置为？（这个问题与我将 Gtk::Entry 放入组合框并使其不可编辑或类似的东西无关）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-26T17:45:29.137

set_sensitive(false) 修复了一切

# php - 将 HTML 值发布到 IFrame

> ID：15824800
> 
> 赞同：0
> 
> 时间：2013-04-05T02:12:13.323
> 
> 标签：php, html, iframe

我将如何使用 post 函数将字段传递到 IFrame？我正在使用目标标签，但它似乎不起作用。应该发生的是，当我提交字段时，它会将用户名和变量发布到论坛并让我登录。但是，我只是被重定向到登录页面。知道 iframe 与字段位于不同的文件中可能会有所帮助。

```
 <form action="http://www.website.net/login.php" method="post" target="my_iframe">
        <label for="username">Username</label><input type="text" name="username" required>
        <label for="password">Password</label><input type="password" name="password" required>
        <input type="submit" name="login" value="Login" class="loginbtn"/><a href="http://www.website.net/register.php">Register</a>
      </form>

     <iframe name="my_iframe" src="http://www.website.net/forums/ucp.php?mode=login" frameborder="0" scrolling="auto" width="100%" height=1500px marginwidth="0" marginheight="5" ></iframe> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T03:18:33.817

试试看：

```
<form action="http://www.website.net/login.php" method="post" target="my_iframe">
        <label for="username">Username</label><input type="text" name="username" required>
        <label for="password">Password</label><input type="password" name="password" required>
        <input type="submit" name="login" value="Login" class="loginbtn"/><a href="http://www.website.net/register.php">Register</a>
      </form>

     <iframe name="my_iframe" src="http://www.website.net/forums/ucp.php?mode=login" frameborder="0" scrolling="auto" style="width:100%;height:1500px;margin: 5px 0;"></iframe> 
```

您忘记在高度 iframe 的属性中插入“”。

请记住始终使用 CSS 然后 HTML 属性，根据 W3C HTML5/XHTML 1.0 规则，它们已被弃用。

# java - 使用字符串的数组的多个输入 - 名称

> ID：15824802
> 
> 赞同：-1
> 
> 时间：2013-04-05T02:12:25.970
> 
> 标签：java, arrays

我需要编写一个程序，让用户输入导师姓名列表。最多只能聘请 10 名同伴导师。然后，程序将根据按姓氏字母顺序排列的列表显示每个名称。这是我到目前为止所拥有的，但它不起作用，我不知道该怎么做。我需要它继续运行，直到我停止它并继续执行更多程序。

```
import javax.swing.JOptionPane;
import java.util.Arrays;

public class Report {

    public static void main(String[] args) {

          int numTutors = 10;
          String[] listNames = getTutorNames();
    }

    public static String[] getTutorNames() {

          String firstName;
        String lastName;
        String[] listNames = new String[10];

        for (int x = 0; x < listNames.length; x++) {
            firstName = JOptionPane.showInputDialog(null, "Enter Tutor's First Name: ");
            lastName = JOptionPane.showInputDialog(null, "Enter Tutor's Last Name: ");

            if (firstName.equals("")) &&  lastName.equals("")) {
                break; // loop end
            }
            listNames[x] = lastName + ", " + firstName;
        }
        return listNames;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T02:33:04.977

嗯，这是第一次。当我编辑代码时，IntelliJ 没有正确格式化代码，我很快就发现了这个错误列表。请记住 - 代码甚至不会*编译*，更不用说*运行*，直到这些被修复。

*   `int numTutors`不知从何而来。如果要定义它，请在方法调用之外执行此操作并将其设置为适当的值。

    ```
    public static void main(String[] args) {
        int numTutors = 10;
        String[] listNames = getTutorNames(numTutors);
    } 
    ```

*   这些声明无效：

    ```
    String = firstName;
    String = lastName; 
    ```

    `String`您需要介于和之间的某种变量名`=`。

    您也没有与您传递的合同相匹配`getTutorNames`- 您传递的内容或您接受的内容必须更改。我想是后者。

*   你不能`==`用来比较`String`。你*必须*使用`.equals()`. 这导致我...

*   你的休息在你的循环之外。将其移动到循环内。

    ```
    for (int x = 0; x < listNames.length; x++) {
        firstName = JOptionPane.showInputDialog(null, "Enter Tutor's First Name: ");
        lastName = JOptionPane.showInputDialog(null, "Enter Tutor's Last Name: ");
        if (firstName.equals(" "))&&lastName.equals(" ")){
            break; // loop end
        }
    } 
    ```

    ..*这*导致我...

*   您不会将值放在循环中的任何地方！你只是运行相同的代码十次！将它们放入阵列中。

    ```
    // after you check to see if the firstName and lastName are blank
    listNames[x] = firstName + lastName; // I don't know what you want to do with them from here. 
    ```

*   没有`.add()`数组。以上是如何将元素输入到数组中。

*   你`return`完全在你的方法块之外。将其移至您的方法中。

* * *

现在，这些是我能找到的问题。*首先*处理编译问题，然后可能会讨论代码逻辑中的错误。如果可以的话，找个安静的时间，确保你理解变量声明和`String`比较。我*强烈推荐*[Java wiki tag](https://stackoverflow.com/tags/java/info)中的阅读材料。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T06:40:45.463

很抱歉为这么小的事情做出回答，但你的

```
If (firstName.equals("")) && lastName.equals("")) { 
```

应该替换为

```
If ((firstName.equals("")) && lastName.equals(""))) { 
```

# python - 使用python拼接一行文本文件

> ID：15824807
> 
> 赞同：5
> 
> 时间：2013-04-05T02:12:51.090
> 
> 标签：python, bioinformatics

我正在尝试创建遗传特征。我有一个充满 DNA 序列的文本文件。我想从文本文件中读取每一行。然后将 4 个碱基的 4mers 添加到字典中。例如：样本序列

> ATGATATATCTATCAT

我要添加的是 ATGA、TGAT、GATA 等。在添加 4mer 时，ID 仅增加 1 的字典。

所以字典会保留...

```
Genetic signatures, ID
ATGA,1
TGAT, 2
GATA,3 
```

这是我到目前为止...

```
import sys  

def main ():
    readingFile = open("signatures.txt", "r")
    my_DNA=""

    DNAseq = {} #creates dictionary 

    for char in readingFile:
        my_DNA = my_DNA+char

    for char in my_DNA:             
        index = 0
        DnaID=1
        seq = my_DNA[index:index+4]         

        if (DNAseq.has_key(seq)): #checks if the key is in the dictionary
            index= index +1
        else :
            DNAseq[seq] = DnaID
            index = index+1
            DnaID= DnaID+1

    readingFile.close()

if __name__ == '__main__':
    main() 
```

这是我的输出：

```
ACTC
ACTC
ACTC
ACTC
ACTC
ACTC 
```

此输出表明它没有遍历字符串中的每个字符......请帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T02:26:28.750

您需要在循环之前移动您的`index`和`DnaID`声明，否则它们将在每次循环迭代时被重置：

```
index = 0
DnaID=1
for char in my_DNA:             
    #... rest of loop here 
```

进行更改后，您将获得以下输出：

```
ATGA 1
TGAT 2
GATA 3
ATAT 4
TATA 5
ATAT 6
TATC 6
ATCT 7
TCTA 8
CTAT 9
TATC 10
ATCA 10
TCAT 11
CAT 12
AT 13
T 14 
```

为了避免最后 3 个项目的长度不正确，您可以修改循环：

```
for i in range(len(my_DNA)-3):
    #... rest of loop here 
```

这不会遍历最后 3 个字符，从而产生输出：

```
ATGA 1
TGAT 2
GATA 3
ATAT 4
TATA 5
ATAT 6
TATC 6
ATCT 7
TCTA 8
CTAT 9
TATC 10
ATCA 10
TCAT 11 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T02:41:54.743

这应该会给你想要的效果。

```
from collections import defaultdict

readingFile = open("signatures.txt", "r").read()
DNAseq      = defaultdict(int)
window      = 4

for i in xrange(len(readingFile)):
    current_4mer = readingFile[i:i+window]
    if len(current_4mer) == window:
        DNAseq[current_4mer] += 1

print DNAseq 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T02:27:32.677

`index`每次通过以 开头的循环都被重置为 0 `for char in my_DNA:`。

另外，我认为循环条件应该`while index < len(my_DNA)-4:`与循环体一致。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-05T02:28:30.540

您的索引计数器会自行重置，因为它们处于 for 循环中。

我可以提出一些进一步的建议吗？我的解决方案如下所示：

```
readingFile = open("signatures.txt", "r")
my_DNA=""

DNAseq = {} #creates dictionary 

for line in readingFile:    
    line = line.strip()
    my_DNA = my_DNA + line

ID = 1
index = 0
while True:

    try:
        seq = my_DNA[index:index+4]
        if not seq in my_DNA:
            DNAseq[ID] = my_DNA[index:index+4]
        index += 4
        ID += 1
    except IndexError:
        break

readingFile.close() 
```

但是你想对重复项做什么？例如，如果像 ATGC 这样的序列出现两次？例如，两者都应该添加到不同的 ID 下，`{...1:'ATGC', ... 200:'ATGC',...}`还是应该省略？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-05T02:34:56.940

如果我理解正确，您正在计算每个连续的 4 个碱基串出现的频率？试试这个：

```
def split_to_4mers(filename):
    dna_dict = {}
    with open(filename, 'r') as f:
        # assuming the first line of the file, only, contains the dna string
        dna_string = f.readline();
        for idx in range(len(dna_string)-3):
            seq = dna_string[idx:idx+4]
            count = dna_dict.get(seq, 0)
            dna_dict[seq] = count+1
    return dna_dict 
```

在仅包含“ATGATATATCTATCAT”的文件上输出：

```
{'TGAT': 1, 'ATCT': 1, 'ATGA': 1, 'TCAT': 1, 'TATA': 1, 'TATC': 2, 'CTAT': 1, 'ATCA': 1, 'ATAT': 2, 'GATA': 1, 'TCTA': 1} 
```

# ruby-on-rails - 如何使帖子在显示之前需要管理员手动批准？

> ID：15824808
> 
> 赞同：0
> 
> 时间：2013-04-05T02:13:30.370
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我是一名新的 Rails 开发人员，我有一个 Rails 应用程序，我允许用户在其中发布帖子，同时允许他们选择选中复选框。我希望能够手动查看用户在发布过程中检查的所有帖子。现在，所有内容都已成功发布，但我希望对所有选中的帖子都进行此审核。进行此审查的最简单和最简单的方法是什么？

这是后控制器现在的样子

```
def create
    @post = current_user.posts.build(params[:post])
    if @post.save
      flash[:success] = "Shared!"
      redirect_to root_path
    else
      @feed_items = []
      render 'static_pages/home'
    end
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T04:32:22.527

为此，您最好将“已审核”字段的数据类型保持为“布尔”（在迁移文件中）。

要在您的视图中放置复选框，请检查： http: [//guides.rubyonrails.org/form_helpers.html#helpers-for-generating-form-elements](http://guides.rubyonrails.org/form_helpers.html#helpers-for-generating-form-elements)

另外，请注意，如果您想验证布尔字段的存在（其中真实值为真和假），则不能使用：

```
validate :field_name, :presence => true 
```

这是由于 Object#blank? 处理布尔值。假的空白？# => true 在这种情况下，您可以使用：

```
validates :field_name, :allow_nil => true, :inclusion => {:in => [true, false]} 
```

如果您将 false 作为默认值分配给新创建的帖子（并且您需要在触发验证之前执行此操作），则可以从上述验证语句中省略 ":allow_nil => true"。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T02:20:28.810

*我不是从 RoR 的角度谈论，而是在一般实施*

在数据库中，添加一个名为“Reviewed”的字段。它包含一个“Y”或“N”。默认应为“Y”。

现在，在保存或更新帖子时，将复选框标记为 Y 或 N 到此字段和模型中，仅查询“已审核”=“Y”的帖子。

这样，如果用户不勾选，默认值为'Y'，帖子就会显示，但如果用户勾选，则默认值为'N'，你开发一个评论界面（我希望你已经做过），在审查后，您将其标记为“Y”。

这很简单。如果您需要添加更多关于谁审查它、何时审查等信息，您可以添加更多数据库字段来存储它。

**更新**

我从事 ColdFusion 技术，我们有受 RoR 启发的 CFWheels 框架。
根据经验，我建议您使用表单助手。

试试这个代码

```
<%= check_box_tag(:post_reviewed) %>
<%= label_tag(:post_reviewed, "Review this post") %> 
```

有关更多详细信息，请阅读[ruby​​ on rails 中的复选框标签](http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-check_box_tag)和[复选框表单助手](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-check_box)

# sql - 从 sqlzoo 任务 10 到自联接的复杂子查询

> ID：15824810
> 
> 赞同：2
> 
> 时间：2013-04-05T02:14:03.423
> 
> 标签：sql, subquery, self-join

我正在尝试从[http://sqlzoo.net/wiki/Self_join解决任务 10](http://sqlzoo.net/wiki/Self_join)

这是我在选择中的选择：

```
SELECT  DISTINCT astops.name, bbstops.name FROM
  route a JOIN route b ON a.company=b.company AND a.num = b.num
              JOIN stops astops ON a.stop = astops.id
              JOIN stops bstops ON b.stop = bstops.id
WHERE astops.name = 'Craiglockhart' AND bstops.name IN (
  SELECT  aastops.name  FROM
    route aa JOIN route bb ON aa.company=bb.company
                                           AND aa.num = bb.num
                JOIN stops aastops ON aa.stop = aastops.id
                JOIN stops bbstops ON bb.stop = bbstops.id
  WHERE bbstops.name = 'Sighthill'
  ) 
```

此 sql 代码将不起作用，因为我无法使用内部“in”选择中定义的表名。解决方案是将“in”选择子查询更改为自联接。

问题是如何在这个例子中做到这一点？

我相信答案接近于这样的：

```
select  astops.name, cstops.name from
  route a join route b on a.company=b.company and a.num = b.num
              join route c on b.company=c.company and b.num = c.num and b.stop = c.stop
              join stops astops on a.stop = astops.id
              join stops bstops on b.stop = bstops.id
              join stops cstops on c.stop = cstops.id
where astops.name = 'Craiglockhart' and cstops.name = 'Sighthill' 
```

但是这里遗漏了一些东西......它是什么？

更新：

这是该问题的更详细版本：

有两个表：1个路线（编号，公司，停止）2个站点（id，名称）。

所以我们有一个巴士路线表，即：巴士号码，它的公司，以及它经过的停靠站......在这个选择中（[http://pastebin.com/SQ4vcRY3](http://pastebin.com/SQ4vcRY3)）（让它命名为query1）我想弄清楚是否可以通过两次变道从 Craiglockhart 到 Sighthill。
就像我在问：好的...我可以从 Craiglockhart 去某个地方...然后我可以从这个“某个地方”到“Sighthill”吗？这个query1有效！但是……为了让 sqlzoo 接受我的回答……我不仅需要向用户显示起始点的名称（Craiglockhart），还需要向用户显示最后一站的名称（'Sighthill'）。首先，我尝试从子查询为：（`bbstops.name`看[http://pastebin.com/bBeLTYRL](http://pastebin.com/bBeLTYRL)）这不起作用，因为你可以'

这就是为什么......仍在考虑如何在结果中获得最终停止名称......我决定将来自 query1 的子查询加入到主选择中......结果我得到了类似[http://pastebin.com/JdJdV5Wm](http://pastebin.com/JdJdV5Wm)的东西（让它被称为query2)…这个query2是有效的…它只是不起作用，因为什么都不显示…所以…我在从query1转换到query2时犯了一个错误…问题是如何正确地进行这种转换？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T03:58:42.650

```
SET SQL_BIG_SELECTS=1;

SELECT DISTINCT s1.name, s2.name
FROM route r1
     JOIN stops s1 ON r1.stop=s1.id AND s1.name='Sighthill' 
     JOIN route r2 ON r1.company=r2.company AND r1.num=r2.num
     JOIN route r3 ON r2.stop=r3.stop
     JOIN route r4 ON r3.company=r4.company AND r3.num=r4.num
     JOIN stops s2 ON r4.stop=s2.id AND s2.name='Craiglockhart' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-22T02:18:09.120

这对我有用：

```
SELECT DISTINCT r1.num, r1.company, s2.name, r4.num, r4.company

FROM route r1

JOIN stops s1 
ON s1.id = r1.stop 
AND s1.name = 'Craiglockhart'

JOIN route r2
ON r1.num = r2.num

JOIN stops s2
ON r2.stop = s2.id

JOIN route r3
ON s2.id = r3.stop

JOIN route r4
ON r3.num = r4.num
AND r3.company = r4.company

JOIN stops s3
ON r4.stop = s3.id
AND s3.name = 'Sighthill' 
```

# winapi - Win32 gui程序中的Winsock声明放在哪里？

> ID：15824811
> 
> 赞同：0
> 
> 时间：2013-04-05T02:14:10.373
> 
> 标签：winapi, winsock

所以我有一个带有 Windows 程序和所有东西的 win32 项目。我希望客户端能够连接到服务器，但同时能够处理窗口消息。所以我已经弄清楚了这部分。我将为客户端提供异步套接字。我唯一的问题是，我将 WSADATA、服务器结构和 socket() 声明放在哪里？在 WinMain 函数中？Windows 程序？

简而言之，我如何将一个winsock实现集成到winapi gui中？我如何将两者结合起来？我在网上找到的所有教程都只处理 Winsock 或 winapi，他们似乎从未将两者混合在一起。

# android - android：动态设置整个屏幕的背景颜色，或者如何设置actionbar覆盖布局，但不覆盖内容

> ID：15824812
> 
> 赞同：1
> 
> 时间：2013-04-05T02:14:11.793
> 
> 标签：android, android-actionbar, background-image, android-theme, titlebar

我的应用使用 Theme.Wallpaper 系列，这意味着当前壁纸用作应用的背景。这可能会导致可读性问题（取决于用户最喜欢的壁纸），因此我希望允许用户选择图像作为背景。

我试图实现它的方式是：

```
@Override
protected void onResume() {
    // Get wallpaper preferences to check if user selected a wallpaper and
    // display it
    SharedPreferences wallpaperPref = getSharedPreferences(WallpaperActivity.WALLPAPER_PREFERENCES, MODE_PRIVATE);
    int selectedWallpaper = wallpaperPref.getInt(WallpaperActivity.SELECTED_WALLPAPER, 0);
    if (selectedWallpaper != 0) {
        findViewById(R.id.pager).setBackgroundResource(selectedWallpaper);
        getSupportActionBar().setBackgroundDrawable(getResources().getDrawable(selectedWallpaper));
    } else {
        findViewById(R.id.pager).setBackgroundColor(Color.TRANSPARENT);
        getSupportActionBar().setBackgroundDrawable(new ColorDrawable(Color.TRANSPARENT));
    }
    super.onResume();
} 
```

共享首选项包含所选壁纸的资源 ID。

我的问题是标题栏和操作栏对此没有响应。有没有办法让他们也接受新的背景？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T02:37:52.943

1.  使标题栏和操作栏的背景透明。
2.  将[Window ActionBar Overlay](http://developer.android.com/reference/android/R.attr.html#windowActionBarOverlay)设置为 true。
3.  用 ActionBar 的高度填充主视图，这样 ActionBar 就不会覆盖任何内容。

你的 ActionBar 现在将位于背景视图之上，而不是在它之上。它将是透明的，以便让背景显示出来，并且不会被 ActionBar 覆盖。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T14:38:57.160

感谢@Sky的帮助，这就是我最终要做的事情：

1.  在我的应用程序样式中，我添加了这个项目：`<item name="windowActionBarOverlay">true</item>`这使得操作栏与我的布局重叠。这是解决原始问题的方法，但是只要布局内容重叠当然不能使用，所以这里是如何克服这个问题：

2.  在 dimen.xml 文件中，我添加了这两个维度以用作 paddingTop 值 `dimen name="actionBarSize" 56.0dip dimen`， `dimen name="actionBarWithTabsSize" 112.0dip dimen`。（添加 '<' 和 '/> 到位）这些对于 API 10 及更低版本是必需的，对于 API-11 及更高`?android:attr/actionBarSize`版本，可以将其设置为 paddingTop 值。

3.  在每个顶级布局上——也就是每个布局文件上的顶级元素被活动膨胀，我添加了一个 paddingTop 值，如下所示：`android:paddingTop="@dimen/actionBarSize"`除了在我实现了 tabbs 的布局上，我使用了`android:paddingTop="@dimen/actionBarWithTabsSize"`.

4.  在 xml 文件夹中的 preference.xml 文件中，我将此行添加到顶级 PreferenceScreen 元素：`android:layout="@layout/activity_settings"`。

5.  在布局文件夹中，我创建了一个名为“activity_settings.xml”的新布局文件。它包含一个 FrameLayout 作为顶级元素，具有此属性：`android:paddingTop="@dimen/actionBarSize"`，并且在 FrameLayout 中有一个具有 id 的 ListView 元素`android:id="@android:id/list"`。

6.  在我的 PreferenceActivity 子类上，在调用`addPreferencesFromResource(R.xml.preferences);`我添加`setContentView(R.layout.activity_settings);`. 这告诉首选项活动使用 activity_settings.xml 布局文件作为它的布局，并使用 ID 为“@android:id/list”的 ListView 作为它的首选项容器。这样您就可以控制顶级布局文件以设置它的填充。

# android - Android Widget - 点击操作，在 30 分钟内更新，独立实例

> ID：15824817
> 
> 赞同：0
> 
> 时间：2013-04-05T02:14:48.200
> 
> 标签：android, eclipse, android-widget

我试图创建一个小部件，单击时调用配置活动的例程，更新时调用配置活动的另一个例程，更新必须在 30 分钟内，并且创建的所有实例必须单独工作（在 onUpdate 和 onClick 中）。

下面的代码：单击不起作用（看不到 Toast 消息和其他功能）更新对于第一个实例工作正常，但对于多个小部件实例它工作不好：如果我在 10 秒之间创建 2 个实例（并且刷新设置为 20秒）所有将每 10 秒更新一次。

那是我的清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="it.fraschi.controllogiardinowg"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
       android:targetSdkVersion="17" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="it.fraschi.controllogiardinowg.Configurazione"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.appwidget.action.APPWIDGET_CONFIGURE"/>
            </intent-filter>
        </activity>
        <receiver android:name="it.fraschi.controllogiardinowg.ControlloWidget" android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
            </intent-filter>
            <intent-filter> 
                <action android:name="it.fraschi.controllogiardinowg.ControlloWidget.ACTION_WIDGET_CLICKED"/>
            </intent-filter>
            <intent-filter>
                    <action android:name="it.fraschi.controllogiardinowg.ControlloWidget.MY_OWN_WIDGET_UPDATE" />
                </intent-filter>
            <meta-data android:name="android.appwidget.provider" android:resource="@xml/widget_provider" />
        </receiver>
    </application>
</manifest> 
```

那是我的配置：

```
package it.fraschi.controllogiardinowg;

import java.util.Calendar;
import java.util.Random;

import android.os.Bundle;
import android.app.Activity;
import android.app.AlarmManager;
import android.app.PendingIntent;
import android.appwidget.AppWidgetManager;
import android.content.Context;
import android.content.Intent;
import android.content.SharedPreferences;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.AdapterView;
import android.widget.Button;
import android.widget.EditText;
import android.widget.RemoteViews;
import android.widget.Spinner;
import android.widget.Toast;
import android.widget.AdapterView.OnItemSelectedListener;

public class Configurazione extends Activity {

private static final String PREFS_NAME  = "it.fraschi.android.ControlloGiardinoWG";

    public static final String NOME  = "nome_";
    private static long millis = 60000;

    private int mAppWidgetId = AppWidgetManager.INVALID_APPWIDGET_ID;
    private int selectedTextColor;
    private int selectedBackgroundColor;

     public Configurazione() {
            super();
        }

     @Override
        public void onCreate(Bundle icicle) {
            super.onCreate(icicle);

            // Set the result to CANCELED.  This will cause the widget host to cancel
            // out of the widget placement if they press the back button.
            setResult(RESULT_CANCELED);

            // Set the view layout resource to use.
            setContentView(R.layout.activity_configurazione);

            // Find the widget id from the intent. 
            Intent intent = getIntent();
            Bundle extras = intent.getExtras();
            if (extras != null) {
                mAppWidgetId = extras.getInt(
                        AppWidgetManager.EXTRA_APPWIDGET_ID, AppWidgetManager.INVALID_APPWIDGET_ID);
            }

            // If they gave us an intent without the widget id, just bail.
            if (mAppWidgetId == AppWidgetManager.INVALID_APPWIDGET_ID) {
                finish();
            }

            //final Spinner backgroundColorSelector = (Spinner)findViewById(R.id.backgroundColor);
            final Button    saveButton = (Button)findViewById(R.id.btnSalva);
            final Button    cancelButton = (Button)findViewById(R.id.btnCancel);
            final EditText  editNome = (EditText)findViewById(R.id.editNome);
            /*textColorSelector.setOnItemSelectedListener(new OnItemSelectedListener() {
                @Override
                public void onItemSelected(AdapterView<?> parentView, View selectedItemView, int position, long id) {
                    selectedTextColor = Integer.parseInt(getResources().getStringArray(R.array.textColorsValues)[textColorSelector.getSelectedItemPosition()]);
                }

                @Override
                public void onNothingSelected(AdapterView<?> parentView) {}

            });*/

            saveButton.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    final Context context = Configurazione.this;

                    //prepare Alarm Service to trigger Widget
                       Intent intent = new Intent(ControlloWidget.MY_WIDGET_UPDATE);
                       PendingIntent pendingIntent = PendingIntent.getBroadcast(Configurazione.this, mAppWidgetId, intent, 0);
                       AlarmManager alarmManager = (AlarmManager)getSystemService(ALARM_SERVICE);
                       Calendar calendar = Calendar.getInstance();
                       calendar.setTimeInMillis(System.currentTimeMillis());
                       calendar.add(Calendar.SECOND, 30);
                       alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), millis, pendingIntent);
                       //ControlloWidget.SaveAlarmManager(alarmManager, pendingIntent);
                    ///

                    SharedPreferences.Editor prefs = context.getSharedPreferences(PREFS_NAME, 0).edit();
                    prefs.putString(NOME + mAppWidgetId, editNome.getText().toString());

                    prefs.commit();

                 // Push widget update to surface with newly set prefix
                    AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(context);
                    ControlloWidget.updateAppWidget(context, appWidgetManager, mAppWidgetId);

                    // Make sure we pass back the original appWidgetId
                    Intent resultValue = new Intent();
                    resultValue.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, mAppWidgetId);
                    setResult(RESULT_OK, resultValue);
                    finish();
                }
            });

            cancelButton.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    finish();
                }
            });

     }
    /*@Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.configurazione, menu);
        return true;
    }*/
     static String getName(Context context, String prefKey ,int appWidgetId) {
            SharedPreferences prefs = context.getSharedPreferences(PREFS_NAME, 0);
            String valuename = prefs.getString(prefKey + appWidgetId, "Non Trovato");

            return valuename;
        }
     static String getColor(Context context, String prefKey, int appWidgetId){
            ///Test
            SharedPreferences prefs = context.getSharedPreferences(PREFS_NAME, 0);
            String nome = prefs.getString(prefKey + appWidgetId, "Non Trovato");
            ///
            int number = (new Random().nextInt(100));
            String color = "DaConf"+Integer.toString(number)+nome;
            Toast.makeText(context, "ESEGUITO", Toast.LENGTH_LONG).show();
            return color;
     }

} 
```

那是我的小部件：

```
 import java.text.DateFormat;
        import java.text.SimpleDateFormat;
        import java.util.Date;
        import java.util.Random;

        import android.app.AlarmManager;
        import android.app.PendingIntent;
        import android.appwidget.AppWidgetManager;
        import android.appwidget.AppWidgetProvider;
        import android.content.ComponentName;
        import android.content.Context;
        import android.content.Intent;
        import android.os.Bundle;
        import android.os.Environment;
        import android.os.StatFs;

        import android.widget.RemoteViews;
        import android.widget.Toast;

        public class ControlloWidget extends AppWidgetProvider {
            public static String ACTION_WIDGET_CLICKED = "it.fraschi.controllogiardinowg.ESEGUI";
            public static String MY_WIDGET_UPDATE = "it.fraschi.controllogiardinowg.ControlloWidget.MY_OWN_WIDGET_UPDATE";
            static String strWidgetText = "";
            public static Boolean choice = false;

                @Override

                public void onReceive(Context context, Intent intent) {
                    // TODO Auto-generated method stub
                    //super.onReceive(context, intent);
                    String currentDateTimeString = DateFormat.getDateTimeInstance().format(new Date()); 
                    if(MY_WIDGET_UPDATE.equals(intent.getAction())){
                        Bundle extras = intent.getExtras();
                           if(extras!=null) {
                            AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(context);
                            ComponentName thisAppWidget = new ComponentName(context.getPackageName(),
    ControlloWidget.class.getName());
                            int[] appWidgetIds = appWidgetManager.getAppWidgetIds(thisAppWidget);
                            choice=false;
                            onUpdate(context, appWidgetManager, appWidgetIds);
                           }
                        Toast.makeText(context, "WIDGET UPDATE" +currentDateTimeString, Toast.LENGTH_LONG).show();
                    }
                    //Test Click
                    if(ACTION_WIDGET_CLICKED.equals(intent.getAction())){
                        Bundle extras = intent.getExtras();
                           if(extras!=null) {
                            AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(context);
                            ComponentName thisAppWidget = new ComponentName(context.getPackageName(),
    ControlloWidget.class.getName());
                            int[] appWidgetIds = appWidgetManager.getAppWidgetIds(thisAppWidget);
                            choice=true;
                            onUpdate(context, appWidgetManager, appWidgetIds);
                           }
                        Toast.makeText(context, "WIDGET PREMUTO", Toast.LENGTH_LONG).show();
                    }
                    //TestClick
                }

                @Override
                public void onEnabled(Context context) {
                    // TODO Auto-generated method stub
                    //super.onEnabled(context);

                    Toast.makeText(context, "onEnabled()", Toast.LENGTH_LONG).show();
                }

                @Override
                public void onUpdate(Context context, AppWidgetManager appWidgetManager,int[] appWidgetIds) {
                    // TODO Auto-generated method stub
                    //super.onUpdate(context, appWidgetManager, appWidgetIds);

                    final int N = appWidgetIds.length;
                    for (int i=0; i<N; i++) {
                        int appWidgetId = appWidgetIds[i];
                        // Create an Intent to launch ExampleActivity
                        Intent intent = new Intent(context, ControlloWidget.class);
                        intent.setAction(ACTION_WIDGET_CLICKED);
                        intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, appWidgetId);
                        PendingIntent pendingIntent = PendingIntent.getBroadcast(context, appWidgetId, intent,
                                PendingIntent.FLAG_UPDATE_CURRENT);

                        // Get the layout for the App Widget and attach an on-click listener
                        // to the button
                        RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.widget);
                        views.setOnClickPendingIntent(R.id.btnEsegui, pendingIntent);
                        // Tell the AppWidgetManager to perform an update on the current app widget
                        appWidgetManager.updateAppWidget(appWidgetId, views);
                        //updateAppWidget(context, appWidgetManager, appWidgetId);

                        //Toast.makeText(context, "onUpdate(): " + String.valueOf(i) + " : " +  String.valueOf(appWidgetId), Toast.LENGTH_LONG).show();
                    }
                     RemoteViews remoteWidget = new RemoteViews(context.getPackageName(),R.layout.widget);

                }

                public static void updateAppWidget(Context context, AppWidgetManager appWidgetManager,int appWidgetId){
                        //TestOnClick
                       RemoteViews remoteWidget = new RemoteViews(context.getPackageName(),R.layout.widget);
                       ///
                       Intent esegui = new Intent(context, ControlloWidget.class);
                       esegui.setAction(ACTION_WIDGET_CLICKED);
                       //Intent esegui = new Intent(ControlloWidget.ACTION_WIDGET_CLICKED);
                       PendingIntent pendingEsegui = PendingIntent.getBroadcast(context, appWidgetId, esegui, 0);
                       remoteWidget.setOnClickPendingIntent(R.id.btnEsegui, pendingEsegui);
                    //

                        //
                        if (choice){
                            RemoteViews updateViews = new RemoteViews(context.getPackageName(), R.layout.widget);
                            updateViews.setTextViewText(R.id.btnEsegui, "[" + String.valueOf(appWidgetId) + "]" + strWidgetText +
    Configurazione.getColor(context, Configurazione.NOME, appWidgetId));
                            appWidgetManager.updateAppWidget(appWidgetId, updateViews);

                            Toast.makeText(context, "onClick(): " + String.valueOf(appWidgetId) + "\n" + strWidgetText,
    Toast.LENGTH_LONG).show();

                        }else{
                                int number = (new Random().nextInt(100));
                                strWidgetText = Integer.toString(number);

                                RemoteViews updateViews = new RemoteViews(context.getPackageName(), R.layout.widget);
                                updateViews.setTextViewText(R.id.btnEsegui, "[" + String.valueOf(appWidgetId) + "]" + strWidgetText +
    Configurazione.getName(context, Configurazione.NOME, appWidgetId));
                                appWidgetManager.updateAppWidget(appWidgetId, updateViews);

                                Toast.makeText(context, "updateAppWidget(): " + String.valueOf(appWidgetId) + "\n" + strWidgetText,
    Toast.LENGTH_LONG).show();
                            }
                }
                static AlarmManager myAlarmManager;
                static PendingIntent myPendingIntent;

                @Override
                public void onDeleted(Context context, int[] appWidgetIds) {
                    // TODO Auto-generated method stub
                    //super.onDeleted(context, appWidgetIds);
                    myAlarmManager.cancel(myPendingIntent);
                    Toast.makeText(context, "onDeleted()", Toast.LENGTH_LONG).show();
                }
                static void SaveAlarmManager(AlarmManager tAlarmManager, PendingIntent tPendingIntent){
                    myAlarmManager = tAlarmManager;
                    myPendingIntent = tPendingIntent;
                }
        } 
```

*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T19:07:10.317

For Timing under 30 mins and multiple instances i've decided to use only one timer for all instances.

Below the code onCreate of Configuration Class:

```
private static long millis = 20000;

SharedPreferences read = context.getSharedPreferences(PREFS_NAME, 0);
String firstinstance = read.getString("FirstInstance", "KO");
if (firstinstance.equals("KO")) {
    SharedPreferences.Editor write = context.getSharedPreferences(
            PREFS_NAME, 0).edit();
    write.putString("FirstInstance", "OK");
    write.commit();
    Intent intent = new Intent(ControlloWidget.MY_WIDGET_UPDATE);
    PendingIntent pendingIntent = PendingIntent.getBroadcast(
            Configurazione.this, 0, intent, 0);
    AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);
    Calendar calendar = Calendar.getInstance();
    calendar.setTimeInMillis(System.currentTimeMillis());
    calendar.add(Calendar.SECOND, 10);
    alarmManager.setRepeating(AlarmManager.RTC_WAKEUP,
            calendar.getTimeInMillis(), millis, pendingIntent);
    ControlloWidget.SaveAlarmManager(alarmManager, pendingIntent);
} 
```

revert that process onDisabled of WidgetClass:

```
@Override
public void onDisabled(Context context) {
    // TODO Auto-generated method stub
    //super.onDisabled(context);
    SharedPreferences.Editor write = context.getSharedPreferences(PREFS_NAME, 0).edit();    
    write.putString("FirstInstance", "KO" );    
    write.commit();
    myAlarmManager.cancel(myPendingIntent);
}
static void SaveAlarmManager(AlarmManager tAlarmManager, PendingIntent tPendingIntent){
    myAlarmManager = tAlarmManager;
    myPendingIntent = tPendingIntent;
} 
```

Now, setting up button Action and My Own Update: Class declaration:

```
public static String ACTION_WIDGET_CLICKED = "your.packagename.ACTION_WIDGET_CLICKED";
public static String MY_WIDGET_UPDATE = "your.packagename.MY_WIDGET_UPDATE"; 
```

onReceive method:

```
@Override
public void onReceive(Context context, Intent intent) {
    // TODO Auto-generated method stub
    super.onReceive(context, intent);
    choice = false;
    // ////Toast.makeText(context, intent.getAction(),
    // ////Toast.LENGTH_LONG).show();
    // choice=false;

    Bundle extras = intent.getExtras();

    if (MY_WIDGET_UPDATE.equals(intent.getAction())) {
        choice = false;

        AppWidgetManager appWidgetManager = AppWidgetManager
                .getInstance(context);
        ComponentName thisAppWidget = new ComponentName(
                context.getPackageName(), ControlloWidget.class.getName());
        int[] appWidgetIds = appWidgetManager
                .getAppWidgetIds(thisAppWidget);

        onUpdate(context, appWidgetManager, appWidgetIds);
        // ////Toast.makeText(context, "AUTOUPDATE",
        // ////Toast.LENGTH_LONG).show();
    } else

    if (ACTION_WIDGET_CLICKED.equals(intent.getAction())) {
        // choice =true;
        AppWidgetManager appWidgetManager = AppWidgetManager
                .getInstance(context);
        ComponentName thisAppWidget = new ComponentName(
                context.getPackageName(), ControlloWidget.class.getName());
        int[] appWidgetIds = appWidgetManager
                .getAppWidgetIds(thisAppWidget);
        int appWidgetId = intent.getIntExtra(
                AppWidgetManager.EXTRA_APPWIDGET_ID, -1);
        // ////////
        RemoteViews remoteViews = new RemoteViews(context.getPackageName(),
                R.layout.widget);
        remoteViews.setTextViewText(R.id.btnEsegui,
                Configurazione.getName(context, "nome", appWidgetId));

        // ACTION CODE HERE
        appWidgetManager.updateAppWidget(appWidgetId, remoteViews);
        Log.d("LOG_Esecuzione",
                "Log Esecuzione, Widget n." + String.valueOf(appWidgetId));

    }

} 
```

Then onUpdate and updateAppWidget Method:

```
@Override
public void onUpdate(Context context, AppWidgetManager appWidgetManager,
        int[] appWidgetIds) {
    // TODO Auto-generated method stub
    // super.onUpdate(context, appWidgetManager, appWidgetIds);
    final int N = appWidgetIds.length;
    for (int i = 0; i < N; i++) {
        int appWidgetId = appWidgetIds[i];
        updateAppWidget(context, appWidgetManager, appWidgetId);
    }
}

public static void updateAppWidget(Context context, AppWidgetManager appWidgetManager,int appWidgetId){
    //TestOnClick

    RemoteViews remoteViews = new RemoteViews(context.getPackageName(),R.layout.widget);
    Intent myIntent = new Intent(context, ControlloWidget.class);
    myIntent.setAction(ACTION_WIDGET_CLICKED);
    myIntent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, appWidgetId);
    PendingIntent pendingIntent = PendingIntent.getBroadcast(context,appWidgetId,
            myIntent, 0);
    remoteViews.setOnClickPendingIntent(R.id.btnEsegui, pendingIntent);
    remoteViews.setTextViewText(R.id.btnEsegui,Configurazione.getName(context, "nome", appWidgetId));
    //On Update Code, Requested Action when onUpdate is called (for all widget), it also refresh pending intent                     

    appWidgetManager.updateAppWidget(appWidgetId, remoteViews);
    Log.d("LOG_UPDATE", "Log Update, Widget n."+String.valueOf(appWidgetId));
                                }
    appWidgetManager.updateAppWidget(appWidgetId, remoteViews);
} 
```

For separate instances is necessary:

On intentcreation:(on updateAppWidget)

```
RemoteViews remoteViews = new RemoteViews(context.getPackageName(),R.layout.widget);
Intent myIntent = new Intent(context, ControlloWidget.class);
myIntent.setAction(ACTION_WIDGET_CLICKED);
            //The line below is the appWidgetId Specification
myIntent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, appWidgetId);
PendingIntent pendingIntent = PendingIntent.getBroadcast(context,appWidgetId,
        myIntent, 0);
remoteViews.setOnClickPendingIntent(R.id.btnEsegui, pendingIntent); 
```

On receiving broadcast: (on onReceive)

```
if (ACTION_WIDGET_CLICKED.equals(intent.getAction())){
    //Commented are not used on that example
    //AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(context);
    //ComponentName thisAppWidget = new ComponentName(context.getPackageName(), ControlloWidget.class.getName());
    //int[] appWidgetIds = appWidgetManager.getAppWidgetIds(thisAppWidget);
    int appWidgetId = intent.getIntExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, -1); 
```

now we could call any routine everywhere passing appWidgetId and Context to function... Example:

```
Action.SomeAction(context,appWidgetId); 
```

For UPDATE TIMER, is also possible (without using preferences): Like the other intent could use `putExtra` then on broadcast: retrieve the int on broadcast receive

```
int appWidgetId = intent.getIntExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, -1); 
```

BUT now we don't call `onUpdate` method but directly `updateAppWidget` with that alternative solution every widget has his own time refresh (maybe configurable) I've preferred to have only one timer process active at same time and get all the widget updated at first instance widget update time

# php - Codeigniter：$_SESSION 在托管服务器上不起作用

> ID：15824824
> 
> 赞同：0
> 
> 时间：2013-04-05T02:16:11.767
> 
> 标签：php, codeigniter

代码在我的本地主机上运行良好，但是当我将项目移动到托管服务器时它会出错。它说

```
Severity: Notice  --> Undefined variable: _SESSION 
```

我正在使用 Codeigniter 2.1.3。双重检查`$autoload['libraries'] = array('database','session');`autoload.php

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T02:55:47.773

在调用 session_start() 之前，$_SESSION 不可用。我建议使用本机 CI 会话类函数 ( **$this->session->userdata('some_data')** ) 而不是使用默认的 PHP 会话。CI 不使用 php 会话，而是依赖于 cookie。要修改此通知，如果您希望继续您正在做的事情，您可以将 session_start() 添加到 index.php 文件中。

# c# - c# webBrowser 在标签之前选择下拉值

> ID：15824825
> 
> 赞同：0
> 
> 时间：2013-04-05T02:16:19.657
> 
> 标签：c#, select, drop-down-menu, browser, label

我正在编写程序，需要您的帮助。

我可以从一个下拉框中选择下拉菜单，但我想像 RoboForm 一样：

“字段名：”你的工作情况“内容：”农民

Und dann selected er in egal welcher Box, die neben/über (über im Source) die Label ist, den Inhalt。

然后他应该在任何旁边/上方（在源上）的框中选择，标签就是内容。

因此，我如何在标签下找到相应的框？

```
<label>your job situation</label>
<div class="w_bg_input EmploymentSelect longregistration"> 
<select tabindex="21"> 
<option value="-1"> Auswählen</option>
<option value="2796310"> farmer</option>
</select> 
</div> 
```

问候，Bl1zz4rD

# c# - 一个单元测试如何修改 XML 文档？

> ID：15824831
> 
> 赞同：1
> 
> 时间：2013-04-05T02:17:34.533
> 
> 标签：c#, unit-testing

我什至不知道如何开始为此方法创建单元测试：

```
public override void ModifyXmlDocument(Foo foo, string nodeToChange, string newValue)
{
    XmlDocument xmlDocument = new XmlDocument();
    xmlDocument.Load(foo.XmlPathAndFileName);
    XmlElement rootElement = xmlDocument.DocumentElement;
    // rest of method (to modify an XML doc) here
} 
```

该方法只是在 XML 文档中查找元素/节点并使用用户提供的值对其进行更新。（该方法比此处显示的更复杂。）

我遇到困难的部分是理解如何在不依赖硬盘的情况下执行此方法。但是`xmlDocument.Load()`需要一个文件路径并从磁盘加载一个文件。在方法结束时，它将更新的文件保存回磁盘。

如何使此方法可单元测试？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T02:22:53.077

有几种方法可以做到这一点，但都需要重构代码。`ModifyXmlDocument`将需要`XmlDocument`作为参数，然后你可以从那里模拟它。

```
public void test_that_xml_is_loaded()
{
    var sut = new SUT();
    var xmldocumentfake = new Mock<XmlDocument>(){CallBase=true};
    xmldocumentfake.Setup(x=>x.LoadXml(It.IsAny<String>()));

    sut.ModifyXmlDocument(foo, nodeToChange, newValue, xmlDocumentfake.Object);

   xmldocumentfake.Verify(x=>x.LoadXml(It.IsAny<String>()), Times.Once());
} 
```

您还可以将其包装`XmlDocument`在另一个类中，您可以将其编写为可以修改的抽象。同样，您必须将其传递进去。

此外，正如 Anthony Pegram 所暗示的那样，我的意思是：小心不要违反[单一责任原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)。当测试太难写时，这通常是你打破了那个原则的尖叫。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T02:24:36.640

几个选项：

*   如果您使用的是 VS2012 Ultimate，则可以使用 Fakes 创建一个 shim，该 shim 将覆盖 XmlDocument 打开文件时的行为。
*   当您进行测试时，请使用您的单元测试部署一个示例 XML 文件。然后在传入 Foo 实例时，使用该文件的路径。
*   尝试使用 XmlDocument.Load 的替代方法之一，例如采用流或 XmlReader 的方法。然后使用您可以覆盖的方法创建它。

# c# - 将 C# 字符串转换为字节以进行 COM 互操作

> ID：15824833
> 
> 赞同：-1
> 
> 时间：2013-04-05T02:17:47.253
> 
> 标签：c#, com-interop

我正在使用互操作调用 C++ COM 组件，并且编组需要将参数之一作为**ref Byte**传入。参数实际上是一个字符串。如何将字符串（或 char 数组）转换为 Byte 以传递给此方法？

方法 IDL

```
 [helpstring("method Read")]
    HRESULT _stdcall Read(
                    [in] unsigned char* path, 
                    [in] unsigned char command, 
                    [in] unsigned char nShortAddr, 
                    [out] short* pnDataSize, 
                    [out] unsigned char** ppbyData, 
                    [out] unsigned long* pnError); 
```

伊利诺伊州

```
.method public hidebysig newslot virtual 
        instance void  Read([in] uint8& path,
                            [in] uint8 command,
                            [in] uint8 nShortAddr,
                            [out] int16& pnDataSize,
                            [out] native int ppbyData,
                            [out] uint32& pnError) runtime managed internalcall 
```

在 Visual Studio 中看到的包装器中的方法

```
 public virtual void Read(ref byte path, byte command, byte nShortAddr,  
out short pnDataSize, System.IntPtr ppbyData, out uint pnError) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T19:54:33.167

这只是一个编写不佳的 COM 接口。它只能在 C++ 代码的进程内使用时工作。这可能是创作者的全部意图。像这样的参数类型声明`unsigned char*`是模棱两可的，它可能意味着一个字节是通过引用传递的，但也可能表示一个字节数组。您可以使用 IDL 中的属性来区分这两者，但它们没有被使用。因此，类型库导入器只能假设这是一个`ref byte`.

如果源 IDL 无法更新，则只有一个不错的解决方法，您必须编辑互操作库。为此，首先使用 ildasm.exe 反编译现有的。然后编辑参数类型，最好通过创建一个与示例具有相同声明的虚拟 C# 接口来完成。将 humpty-dumpty 与 ilasm.exe 重新组合在一起

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-05T02:20:23.703

### 您无法转换`String`为`Byte`

但是使用 ASCII 编码可以转换`String`为`Byte[]`

* * *

String is .Net is - 字符串是用于表示文本的 Unicode 字符的顺序集合。String 对象是表示字符串的对象的顺序集合`System.Char`。

你可以得到字符串作为`Byte[]`使用`System.Text.Encoding.ASCII.GetBytes(my_string)`

```
byte[] bytes = System.Text.Encoding.ASCII.GetBytes(my_string) 
```

# php - php回调函数到下一页

> ID：15824834
> 
> 赞同：0
> 
> 时间：2013-04-05T02:18:01.230
> 
> 标签：php, javascript, redirect, header

我正在使用一个允许我在某些事件后执行回调 php 函数的小部件。

`GET`我想要一个 php 函数，它允许我使用该方法转到下一页。

从

```
mypage.php?page=1 
```

到

```
mypage.php?page=2 
```

到

```
mypage.php?page=3 
```

等等...

我觉得像

```
$page = mysql_real_escape_string($_GET['page']); // ==0 if no $_GET['page']
function next_page($page) {
   header('Location: mypage.php?page='.++$page.'');} 
```

我知道使用标头可能很棘手。这可能很明显，但我更喜欢可靠和可扩展的东西。也许如果我可以执行一个`javascript.location`脚本。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T02:24:04.550

```
$page = 0;
if(isset($_GET['page']))
    $page = intval($_GET['page']);

function next_page($page) {
   $page ++;
   header('Location: mypage.php?page='.$page);
   exit;
} 
```

标题不应该被认为是棘手的。您只需确保在使用之前没有将任何输出发送到浏览器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T02:24:04.647

首先重新分配 $page 然后附加它：

```
$page = isset($_GET['page']) ? intval($_GET['page']) : 0; 
```

然后在你的函数中简单调用

```
$page++;
header('Location: http://address-to-page/?page=' . $page); 
```

# tomcat - IntelliJ，在 localhost 上部署，无需重启 tomcat

> ID：15824838
> 
> 赞同：1
> 
> 时间：2013-04-05T02:18:42.827
> 
> 标签：tomcat, web-applications, intellij-idea, remote-debugging

由于某些特殊原因，我的 webapp2 必须在 webapp1 之后部署。我知道在 IntelliJ 中，我可以使用两个 web 应用程序（2 个 war 文件）配置本地部署，但它以随机顺序启动并破坏我的应用程序。目前我必须手动启动tomcat（使用命令行），然后转到管理器页面（在本地主机上）并上传我的war文件。webapp1 是稳定的，所以大多数时候，我必须更改 webapp2 并上传并调试。我正在寻找一种方法，可以直接在 IntelliJ 中为 webapp2 设置部署，而无需重新启动 tomcat（我从 cmdline 开始，运行 webapp1）。一个存在吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:40:45.697

您应该配置 IDEA 以执行两个工件的部署和[更新](http://www.jetbrains.com/idea/webhelp/updating-a-running-java-ee-application.html)。只需使用本地 Tomcat 配置。

IDEA 具有工件部署顺序的配置。

# javascript - 在多个画布上显示不同的场景共享资源

> ID：15824840
> 
> 赞同：4
> 
> 时间：2013-04-05T02:19:13.187
> 
> 标签：javascript, google-chrome, three.js, webgl

我正在使用 three.js 创建一个交互式 Web 应用程序，但遇到了一个小绊脚石：

我在页面上的可拖动 div 中包含许多画布。在每个画布中，我希望显示一个应用了不同材质的无光照 3D 对象（每种材质都使用自定义着色器）。所有这些材料都使用相同的纹理（一种可能是蓝色的，一种可能是去饱和的，等等）。

页面上的画布数量可能会有所不同，但我预计数量通常会达到/超过 20 个画布，因此共享资源（特别是对于大型纹理）将非常有益。

到目前为止，我一直在使用多个渲染器、相机和场景，这些效果很好，直到我开始尝试在多个场景中使用相同的纹理。

大多数材料共享制服和属性以避免重复信息，并且还使所有材料彼此保持同步（例如，当一些材料随时间变化时，它们都应该以相同的方式变化）。

我想知道是否有一种方法可以在场景/渲染器/画布之间共享纹理？当我尝试时，出现以下错误：

```
WebGL: INVALID_OPERATION: bindTexture: object not from this context 
```

在我试图为这个问题找到解决方案的研究中，我发现可以通过创建多个视口来解决这个问题，但是我不知道如何在不同的画布上显示不同的视口。

```
TL/DR; 
```

我可以：

*   在不同的画布上显示相同的场景？
*   在不同的场景、渲染器和/或画布上使用相同的制服（包括纹理制服）？

提前致谢！

格里福克

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-05T18:17:23.273

不幸的是，您（还）不能跨画布共享资源。几个选项

1.  在同一画布的不同部分渲染不同的视口。

    示例：[http ://webglsamples.org/multiple-views/multiple-views.html](http://webglsamples.org/multiple-views/multiple-views.html)

2.  制作一个覆盖整个窗口的画布，使用占位符元素确定绘制位置，使用 getClientBoundingRect 设置视口和剪刀设置以在每个元素中绘制场景

    示例：[是否可以在 THREE.js 中启用无限数量的渲染器？](https://stackoverflow.com/questions/30608723/is-it-possible-to-enable-unbounded-number-of-renderers-in-three-js/30633132#30633132)

3.  将场景渲染到屏幕外画布，然后将其绘制到可见画布中。

    ```
    <canvas id="c1"></canvas>
    <canvas id="c2"></canvas>
    <script>
    var webglCanvas = document.createElement("canvas");
    var canvas1 = document.getElementById("c1");
    var ctx1 = canvas1.getContext("2d");
    var canvas2 = document.getElementById("c1");
    var ctx2 = canvas1.getContext("2d"); 
    ```

    ...从一个视图将场景绘制到 webglCanvas ...

    ```
    // copy scene to canvas1
    ctx1.drawImage(webglCanvas, 0, 0); 
    ```

    ...从另一个视图将场景绘制到 webglCanvas ...

    ```
    // copy scene to canvas2
    ctx2.drawImage(webglCanvas, 0, 0); 
    ```

    [这是一个活生生的例子](http://greggman.com/downloads/examples/three.js/examples/webgl_multiple_windows.html)（注意：在 Chrome26、FF20 的 Windows 上速度很慢，希望在未来的浏览器中能够修复）

4.  使用 OffscreenCanvas、transferToImageBitmap 等...（注意：截至 2018 年 1 月 8 日，此功能尚未在任何浏览器中提供，但它在 Firefox 的标志后面可用）

```
const one = document.getElementById("one").getContext("bitmaprenderer"); 
const two = document.getElementById("two").getContext("bitmaprenderer");

const offscreen = new OffscreenCanvas(256, 256);
constr gl = offscreen.getContext('webgl');

// ... some drawing for the first canvas using the gl context ...
gl.clearColor(1,0,0,1);
gl.clear(gl.COLOR_BUFFER_BIT);

// Commit rendering to the first canvas
let bitmapOne = offscreen.transferToImageBitmap();
one.transferImageBitmap(bitmapOne);

// ... some more drawing for the second canvas using the gl context ...
gl.clearColor(0,1,0,1);
gl.clear(gl.COLOR_BUFFER_BIT);

// Commit rendering to the second canvas 
let bitmapTwo = offscreen.transferToImageBitmap();
two.transferImageBitmap(bitmapTwo);
```

```
<canvas id="one"></canvas>
<canvas id="two"></canvas>
```

# r - R（GIS）中的大型.img文件处理

> ID：15824853
> 
> 赞同：4
> 
> 时间：2013-04-05T02:21:06.727
> 
> 标签：r, gis

我正在与美国国家土地覆盖数据集 (NLCD) 合作，对美国东北部 150 多个地点的栖息地类型进行分类。数据集非常大 (15GB)，因此我无法在此处上传，但它采用 .img 格式，分辨率为 30m。我有所有站点中心点的 GPS 坐标。我希望能够在该点周围 1 平方公里内提取土地覆盖类别的比例。我的问题是：

1) 如何将 .img 文件上传到 r？2) 如何从 GPS 坐标周围提取信息作为不同栖息地类别的比例？

以前有人在 r 中使用过这个数据集吗？如果是这样，我真的可以使用帮助。干杯，以色列

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T03:08:08.340

使用`raster`可以处理磁盘文件的包，一次只能读取块。

`raster`包有一个`extract`带参数的`buffer`函数。将缓冲区设置为适当的值（`1000`如果您的地图单位是米并且您想要一个`km`半径）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T03:00:48.153

感谢 mnel。我已经有了工作的基本想法（下面的代码）。现在，如果有人能给我一个关于如何计算每个坐标的每个类别的比例的指针。该`extract`函数为我提供了每组坐标的值矩阵。有没有办法总结这些数据？

```
#load in map and locality data
NLCD<-raster ('NLCD2006/NLCD2006.img')
sites<-read.csv('sites.csv', header=T)
#crop site data to just latitude and longitude
sites<-sites[,4:5]
#convert lat/lon to appropirate projection
str (sites)
coordinates(sites)  <-  c("Longitude",  "Latitude")
proj4string(sites)  <- CRS("+proj=longlat +ellps=WGS84 +datum=WGS84")
sites_transformed<-spTransform(sites, CRS("+proj=aea +lat_1=29.5 +lat_2=45.5 +lat_0=23 +lon_0=-96 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"))

#plot the map
plot (NLCD)
#add the converted x y points
points (sites_transformed, pch=16, col="red", cex=.75)
#extract values to poionts
Landcover<-extract (NLCD, sites_transformed, buffer=1000) 
```

# ruby-on-rails - 在哪里以及如何处理 Stripe 异常？

> ID：15824860
> 
> 赞同：10
> 
> 时间：2013-04-05T02:21:47.997
> 
> 标签：ruby-on-rails, ruby-on-rails-3, exception-handling, stripe-payments

我正在使用 Stripe 和 Ruby on Rails 3.2 构建一个小型概念证明。到目前为止，我已经观看了有关如何在 RoR 应用程序中实现 Stripe 的 Railscast，它运行得非常好。

我按照[RailsCast #288 Billing with Stripe](http://railscasts.com/episodes/288-billing-with-stripe)构建了我的应用程序。现在，我的用户可以添加和编辑他们的信用卡，甚至可以注册课程并在完成后对他们的信用卡收费。

现在我一直在使用 Stripe 的众多[测试信用卡](https://stripe.com/docs/testing)进行测试，我希望在出现异常时捕获尽可能多的异常。我在我的注册模型中使用了 Stripe 的[示例](https://stripe.com/docs/api#errors)错误，如下所示：

```
class Registration < ActiveRecord::Base

  belongs_to :user
  belongs_to :session

  attr_accessible :session_id, :user_id, :session, :user, :stripe_payment_id
  validates :user_id, :uniqueness => {:scope => :session_id}

  def save_with_payment(user, stripe_card_token)
    if valid?
      if user.stripe_customer_id.present?
        charge = Stripe::Charge.create(
            :customer => user.stripe_customer_id,
            :amount => self.session.price.to_i * 100,
            :description => "Registration for #{self.session.name} (Id:#{self.session.id})",
            :currency => 'cad'
        )
      else
        customer = Stripe::Customer.create(
            :email => user.email,
            :card => stripe_card_token,
            :description => user.name
        )
        charge = Stripe::Charge.create(
            :customer => customer.id,
            :amount => self.session.price.to_i * 100,
            :description => "Registration for #{self.session.name} (Id:#{self.session.id})",
            :currency => 'cad'
        )
        user.update_attribute(:stripe_customer_id, customer.id)
      end
      self.stripe_payment_id = charge.id
      save!
    end
  rescue Stripe::CardError => e
    body = e.json_body
    err  = body[:error]
    logger.debug "Status is: #{e.http_status}"
    logger.debug "Type is: #{err[:type]}"
    logger.debug "Code is: #{err[:code]}"
    logger.debug "Param is: #{err[:param]}"
    logger.debug "Message is: #{err[:message]}"
  rescue Stripe::InvalidRequestError => e
    # Invalid parameters were supplied to Stripe's API
  rescue Stripe::AuthenticationError => e
    # Authentication with Stripe's API failed
    # (maybe you changed API keys recently)
  rescue Stripe::APIConnectionError => e
    # Network communication with Stripe failed
  rescue Stripe::StripeError => e
    # Display a very generic error to the user, and maybe send
    # yourself an email
  rescue => e
    # Something else happened, completely unrelated to Stripe
  end
end 
```

我现在只是从错误中解救出来，并没有在一个被提出后真正采取行动，最终我想阻止当前的类注册发生并重定向一个带有 flash 错误的用户。

我已经阅读了[rescure_from](http://api.rubyonrails.org/classes/ActiveSupport/Rescuable/ClassMethods.html)但我不确定处理所有可能的 Stripe 错误的最佳方法是什么。我知道无法从模型重定向，您的专家将如何处理？

这是我的注册控制器：

```
class Classroom::RegistrationsController < ApplicationController
  before_filter :authenticate_user!

  def new
    if params[:session_id]
      @session = Session.find(params[:session_id])
      @registration = Registration.new(user: current_user, session: @session)
    else
      flash[:error] = "Course session is required"
    end

    rescue ActiveRecord::RecordNotFound
      render file: 'public/404', status: :not_found

  end

  def create
    if params[:session_id]
      @session = Session.find(params[:session_id])
      @registration = Registration.new(user: current_user, session: @session)
      if @registration.save_with_payment(current_user, params[:stripe_card_token])
        flash[:notice] = "Course registration saved with success."
        logger.debug "Course registration saved with success."
        mixpanel.track 'Registered to a session', { :distinct_id => current_user.id,
                                           :id => @session.id,
                                           'Name' => @session.name,
                                           'Description' => @session.description,
                                           'Course' => @session.course.name
        }
        mixpanel.increment current_user.id, { :'Sessions Registered' => 1}
        mixpanel.track_charge(current_user.id, @session.price.to_i)
      else
        flash[:error] = "There was a problem saving the registration."
        logger.debug "There was a problem saving the registration."
      end
      redirect_to root_path
    else
      flash[:error] = "Session required."
      redirect_to root_path
    end
  end

end 
```

感谢您花时间回复，非常感谢！

弗朗西斯

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-05T07:59:14.237

您是否想过将实际的 Stripe 调用放入**自定义验证器中？**

[http://apidock.com/rails/ActiveModel/Validations/ClassMethods/validate](http://apidock.com/rails/ActiveModel/Validations/ClassMethods/validate)

这样，您可以使用以下内容向对象添加错误

这背后的逻辑是无论如何您只想将成功的交易保存为“交易”，所以为什么不直接将 Stripe 费用放入验证器中。

```
validate :card_validation

def card_validation

    begin
        charge = Stripe::Charge.create(
           :customer => user.stripe_customer_id,
           :amount => self.session.price.to_i * 100,
           :description => "Registration for #{self.session.name} (Id:#{self.session.id})",
           :currency => 'cad'
        )
        etc etc
    rescue => e
      errors.add(:credit_card, e.message)
      #Then you might have a model to log the transaction error.
      Error.create(charge, customer)
    end

end 
```

通过这种方式，您可以处理错误，就像您从未保存的条目中获得的任何其他错误一样，而不是给出空白错误消息，或者必须处理来自 Stripe 的每个最后一个错误。

```
class Classroom::RegistrationsController < ApplicationController
  before_filter :authenticate_user!

  def create
    if params[:session_id]
      @session = Session.find(params[:session_id])

      params[:registration][:user] = current_user
      params[:registration][:session] = @session
      params[:registration][:stripe_card_token] = params[:stripe_card_token]

      @registration = Registration.new(params[:registration])
      respond_with(@registration) do |format|
        if @registration.save
          format.html {redirect_to root_path, :notice => "SOMETHING HERE TO TELL THEM SUC"}
        else
          format.html {render}
        end
      end
    else
      respond_with do |format|
        format.html {redirect_to root_path, :error => "SOMETHING HERE TO TELL THEM GET SESSION"}
      end
    end
  end

end 
```

# sql - SQL查询根据1列的值输出多列

> ID：15824863
> 
> 赞同：0
> 
> 时间：2013-04-05T02:22:00.253
> 
> 标签：sql, sql-server-2008, select, group-by, pivot

几个小时以来，我一直在用头撞墙。我已经设法将我需要的所有数据放到 1 个表中，但我就是不知道如何编写一个 select 语句，所以输出是我想要的方式。

基本上我有一张桌子：

```
ID| Date | Cost
a  03/11   5
a  02/11   4
b  01/11   3
b  04/11   7 
```

更改查询列输出的列是日期列。我希望能够将所有 ID 分组在一起，每行包含 ID 和与该 ID 相关的每个项目每月的成本，或者如果当月没有项目（从 jan-dec），则为 null

查询输出：

```
ID| JAN |FEB | MARCH | APR | MAY | JUN | JUL |......| OCT | NOV | DEC
a   NULL  4      5      NULL NULL.................................NULL
b   3    NULL   NULL     7   NULL.................................NULL 
```

感谢您在正确方向上的任何帮助！

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T02:56:44.437

```
;with data(ID, Date, Cost) as (
    select 'a', '20110311', 5 union all
    select 'a', '20110211', 4 union all
    select 'b', '20110111', 3 union all
    select 'b', '20110411', 7
)
--- the above just creates a virtual dataset named data.
--- Your query starts below here

select *
  from
    (
    select ID, left(upper(datename(month,Date)),3) Month_, Cost
    from data
    ) p
 pivot (sum(Cost) for Month_ in ([Jan],[Feb],[Mar],[Apr],[May],[Jun],[Jul],[Aug],[Sep],[Oct],[Nov],[Dec])) v 
```

# javascript - Keith Wood Datepick inMonth 变量

> ID：15824878
> 
> 赞同：0
> 
> 时间：2013-04-05T02:23:23.450
> 
> 标签：javascript, datepicker

我正在使用 Keith Wood 的 Datepick，并试图使用[此处](http://keith-wood.name/datepick.html)`onDate`找到的函数来阻止特定的日期范围。

参数的值和用途是`inMonth`什么？当我在上面指向 Keith Wood 网站的链接中包含“国庆日”示例中看到`Uncaught TypeError: Cannot read property 'dateClass' of undefined`的声明时，我的 Rails 网站给出了错误。`if (inMonth)`

任何见解都值得赞赏。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T13:19:22.870

该错误是由其他原因引起的，但该`inMonth`变量是为了确保`onDate`参数中使用的函数不适用于当前月份显示的其他月份的日期。例如，`onDate`当您在 4 月份时，它会阻止样式应用到 3 月 30 日。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-16T11:20:35.410

函数 onDate 必须返回值看起来像这样 `{ dateClass: 'CSSclassName', selectable: true, title: ''}`

# cocos2d-iphone - CCSequence 中的 CCEaseIn 等

> ID：15824885
> 
> 赞同：0
> 
> 时间：2013-04-05T02:24:48.970
> 
> 标签：cocos2d-iphone, sequence, easing

您如何在 CCSequence 中准确使用缓动？

~~与[将 CCEaseOut 与 CCSequence 一起使用有关吗？](https://stackoverflow.com/questions/9273061/using-cceaseout-together-with-ccsequence)~~

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T02:48:19.970

这是一个例子。这会将我的 mapNode 带回左边框，例如当弹出 LHS 菜单时。移动持续时间和加速度计算为预期位移的函数：

```
- (void)setLeftClamp:(float)leftClamp {

    _leftClamp = leftClamp;

    CGPoint currentPosition = self.mapNode.position;
    if (currentPosition.x > self.maxX) {
        // ease right back in position
        CGPoint delta         = ccp (self.maxX - currentPosition.x, 0);
        id      move          = [CCMoveBy actionWithDuration:[self moveDuration:delta] position:delta];
        id      ease          = [CCEaseIn actionWithAction:move rate:[self moveAcceleration:delta]];
        id      delay         = [CCDelayTime actionWithDuration:.1f];
        id      easeAndCenter = [CCSequence actions:ease, delay, [CCCallFunc actionWithTarget:self selector:@selector(onMoveComplete)], nil];
        [self.mapNode runAction:easeAndCenter];

        targetMapLocation_ = ccpAdd(self.mapNode.position, delta);
        mapDisplacement_   = delta;
        isMapMoving_       = YES;

    }

} 
```

# javascript - 如何在删除之前检查元素中是否包含 HTML？jQuery

> ID：15824886
> 
> 赞同：9
> 
> 时间：2013-04-05T02:24:53.803
> 
> 标签：javascript, jquery, html, remove-if

在一个函数中，我需要在尝试删除 html 并添加新内容之前检查 (div, span, p) 中是否包含任何 .html 元素。

不知道该怎么做...

我试过这个，但不工作：

```
// HERE below I tried to do a check to see if the div's have HTML, but did not work
    if ($('.'+rowName+' div').html) {
        $('.'+rowName+' div').html.remove();
        $('.'+rowName+' span').html.remove();
        $('.'+rowName+' p').html.remove();
    } 
```

全功能

```
// Create the Role / Fan rows
function rowMaker (rowName, roleName) {
    //alert(rowName+' '+roleName);

    // HERE below I tried to do a check to see if the div's have HTML, but did not work
    if ($('.'+rowName+' div').html) {
        $('.'+rowName+' div').html.remove();
        $('.'+rowName+' span').html.remove();
        $('.'+rowName+' p').html.remove();
    }

    // Blue button
    $('.'+rowName+' div').append(roleName);
    $('.'+rowName+' div').attr('id', 'blue-fan-'+roleName); 
    var blueButton = ('blue-fan-'+roleName);
    console.log('blueButton = '+blueButton);

    // Genres
    $('.'+rowName+' span').append(roleType);

    // Tags
    $.each(role_Actor, function(index, item) {
        $('.'+rowName+' p').append(item+', ');
    });

    $('#'+blueButton).click(function () {

        console.log('clicked blue button');

        // clears the role_Actor to be used to recapture checkboxes
        role_Actor = [];

        console.log('role_Actor = '+role_Actor);

        //$('#modal-'+roleId).modal();
        $('#modal-'+roleId).modal({persist:true});
        return false;
    });

} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-05T02:29:14.760

`html`是一个方法而不是一个属性，你需要使用`()`，然后你可以使用`length`String 对象的属性来检查返回的 html 字符串的长度：

```
if ( $.trim( $('.'+rowName+' div').html() ).length ) {
    // $('.'+rowName).find('div, p, span').remove();
    $('.'+rowName).find('div, p, span').empty();
} 
```

请注意，如果要更改元素的 HTML 内容，则无需删除该元素的当前 html 内容。`html`方法覆盖当前的 html 内容。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-05T02:29:16.577

检查孩子的长度。

```
if($('.'+rowName+' div').children().length > 0) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-05T02:30:30.510

您可以`.html()`为此使用（并考虑空格）：

```
var $row = $('.rowName');

if (!$row.find('div').html().trim().length) {
    $row.find('div, span, p').empty();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-05T02:30:00.693

尝试

```
if ($('.'+rowName+' div').html().length > 0) {
        $('.'+rowName+' div').empty();
        $('.'+rowName+' span').empty();
        $('.'+rowName+' p').empty();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-22T09:14:18.400

普通的 Vanilla JavaScript 也应该可以解决问题。

```
if(document.querySelectorAll('.'+rowName+' div')[0].childElementCount > 0){
  console.log("found");
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-18T17:10:03.827

像这样做：

```
var elementExists = $('.'+rowName+' div').html();
if (elementExists) { ... } 
```

# model-view-controller - Backbone.js：避免视图→模型→视图双重转换

> ID：15824887
> 
> 赞同：8
> 
> 时间：2013-04-05T02:25:01.123
> 
> 标签：model-view-controller, data-binding, backbone.js, model-binding

我正在尝试构建[这个：
![在此处输入图像描述](https://i.stack.imgur.com/Anv6c.png)](http://jsbin.com/asokok/2/edit)

当我编辑左侧的字段时，它应该更新右侧的字段，反之亦然。

*   编辑输入字段中的值会导致文本光标在其末尾跳转。

*   如屏幕截图所示，在华氏温度字段中键入“2”将被替换为 1.999999999999。发生这种情况是因为双重转换：
    **视图的 Fº → 模型的 Cº → 视图的 Fº。**

![畏缩](https://i.stack.imgur.com/G3Tsu.gif)

我怎样才能避免这种情况？

* * *

**更新：**

我想知道在 MVC 框架（例如 Backbone.js）中处理双向绑定的优雅方式。

# MVC

```
var Temperature = Backbone.Model.extend({
    defaults: {
        celsius: 0
    },
    fahrenheit: function(value) {
        if (typeof value == 'undefined') {
            return this.c2f(this.get('celsius'));
        }
        value = parseFloat(value);
        this.set('celsius', this.f2c(value));
    },
    c2f: function(c) {
        return 9/5 * c + 32;
    },
    f2c: function(f) {
        return 5/9 * (f - 32);
    }
});

var TemperatureView = Backbone.View.extend({
    el: document.body,
    model: new Temperature(),
    events: {
        "input #celsius": "updateCelsius",
        "input #fahrenheit": "updateFahrenheit"
    },
    initialize: function() {
        this.listenTo(this.model, 'change:celsius', this.render);
        this.render();
    },
    render: function() {
        this.$('#celsius').val(this.model.get('celsius'));
        this.$('#fahrenheit').val(this.model.fahrenheit());
    },
    updateCelsius: function(event) {
        this.model.set('celsius', event.target.value);
    },
    updateFahrenheit: function(event) {
        this.model.fahrenheit(event.target.value);
    }
});

var temperatureView = new TemperatureView(); 
```

# 没有 MVC

```
celsius.oninput = function(e) {
    fahrenheit.value = c2f(e.target.value)
}
fahrenheit.oninput = function(e) {
    celsius.value = f2c(e.target.value)
}
function c2f(c) {
    return 9/5 * parseFloat(c) + 32;
}
function f2c(f) {
    return 5/9 * (f - 32);
} 
```

它不仅解决了问题，还减少了代码 3.5⨉。显然我做错了 MVC。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-06-13T09:54:01.073

这是我对此的看法；而是在每次更改时渲染整个视图，在交互式视图中，使用视图的 jQuery 或纯 JS 上下文，就像您的非 MVC 示例一样。

[http://jsbin.com/fomugixe/1/edit](http://jsbin.com/fomugixe/1/edit)

正如 Backbone 文档所说：

> 避免了“双向数据绑定”。虽然它确实是一个漂亮的演示，并且适用于最基本的 CRUD，但它在您的实际应用程序中往往不是非常有用。有时您想在每次按键时更新，有时在模糊时，有时在面板关闭时，有时在单击“保存”按钮时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T02:53:00.453

想到了两种方法。正如 Kinakuta 提到的，您可以执行以下操作，这样您就可以对整数而不是小数进行数学运算：

```
temp = ((oldTemp * 100) * conversion stuff) / 100 
```

根据您希望应用程序的复杂程度，您还可以使用类似[`Backbone.ModelBinder`](https://github.com/theironcook/Backbone.ModelBinder). 它会自动将您的视图绑定到您的模型，因此当一个更新时，另一个会自动更新。然后，您可以将转换器函数附加到绑定，以便当您的值消失`view -> model`或`model -> view`通过转换器运行时。如果您对这个想法感兴趣，我可以详细说明。

**更新**：使用简单的临时转换器，Backbone 需要 3.5 倍的代码也就不足为奇了。MVC 框架可以减少大型项目中的臃肿，但对于小型应用程序来说，这可能是矫枉过正。例如，想象一下使用 Backbone 来显示“Hello World”。

至于您的问题，仅在更改一个输入值时才渲染*另一个输入值，而不是两者？*如果 F 输入发生变化，则重新渲染 C 框中的值。我会通过`ModelBinder`在我的模型中有两个属性来做到这一点：`tempF`和`tempC`. 当一个被修改时，我重新计算另一个，ModelBinder 会自动显示它。或者您可以不使用 MB，只听更改事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T02:46:46.703

在您保存开始转换的输入字段的视图级别设置一个变量，因此您不会在该字段上调用转换函数。

# javascript - 在 Contentedible 中设置选择开始和结束

> ID：15824888
> 
> 赞同：4
> 
> 时间：2013-04-05T02:25:17.037
> 
> 标签：javascript, range, selection, contenteditable

我正在尝试为使用基于语法的格式的网页创建一个 JavaScript 编辑器。它完全取代`innerHTML`了`<pre>`使用`onkeyup`. 但是，这会导致插入符号被移动到编辑器的开头。

我能找到的唯一解决方案是在进行更改之前获取选择开始和结束的偏移量，然后在最后设置它们。我用于获取选择开始和结束的代码是从[https://stackoverflow.com/a/4812022/2093695](https://stackoverflow.com/a/4812022/2093695)修改的：

```
var selStart, selEnd;
if (typeof window.getSelection != "undefined") {
    var range = window.getSelection().getRangeAt(0);
    var preCaretRange = range.cloneRange();
    preCaretRange.selectNodeContents(editor);
    preCaretRange.setEnd(range.endContainer, range.endOffset);
    selStart = preCaretRange.toString().length;
    selEnd = selStart + range.toString().length;
} else if (typeof document.selection != "undefined" && document.selection.type != "Control") {
    var textRange = document.selection.createRange();
    var preCaretTextRange = document.body.createTextRange();
    preCaretTextRange.moveToElementText(editor);
    preCaretTextRange.setEndPoint("EndToEnd", textRange);
    selStart = preCaretTextRange.text.length;
    selEnd = selStart + textRange.text.length;
} else selStart = 0; 
```

至少在 Firefox 中，这部分工作正常。我的问题是*设置*选择。到目前为止，我所拥有的如下：

```
// restore selection
if (selStart) {
    if (range) {
        range = window.getSelection().getRangeAt(0);
        range.setStart(editor,selStart);
        range.setEnd(editor,selEnd);
        // Doesn't work, in FF at least
        // Behavior: when there are no tags,
        //     for 0, caret set at beginning
        //     for 1, caret set at end
        //     for anything greater, "IndexSizeError: Index or size is negative or greater than the allowed amount"
        // when the editor contains tags,
        //     for 0, caret set at beginning of editor
        //     for 1, caret set at beginning of first tag (unless same as start of editor)
        //     for 2, caret set at end of first tag
        //     for 3, caret set at beginning of second tag
        //     for 4, caret set at end of second tag, and so on
        //     for a number that is 1 greater than whatever number would set the caret at the end of the last tag, caret set at end of editor
        //     for a number greater than that, same error as before
    } else if (document.selection && document.selection.createRange) {
        // Not sure what to do here
    }
} 
```

那是如何`setStart`和`setEnd`应该工作的？我究竟做错了什么？有没有更好的方法来设置选择的开始和结束，最好不使用库？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T08:52:38.383

我为此发布了几个不同的功能。我找不到我最近的一个，但下面有一个指向 jsFiddle 的链接，其中包含一个`restoreSelection()`应该有用的函数：

[https://stackoverflow.com/a/7404126/96100](https://stackoverflow.com/a/7404126/96100)

更新：我找到了此代码的更新版本。它应该工作相同，但内部更优雅一点。

[https://stackoverflow.com/a/13950376/96100](https://stackoverflow.com/a/13950376/96100)

# sql-server - 使用连接如何比较 2 列

> ID：15824890
> 
> 赞同：-1
> 
> 时间：2013-04-05T02:25:27.670
> 
> 标签：sql-server, sql-server-2008

我有 2 张桌子

**表 1**：

```
ID  Name
1   OS
2   Harddisk
3   RAM
4   WINDOWS
5   LINUX
6   SOLARIS
7   MAC
8   UNIX
9   DCCI 
```

**表2**：

```
ID Table1_ID   Table1_component
1   1            4
2   1            5
3   1            6
4   1            7
5   1            8
6   1            9 
```

我想加入上面 2 个表，我需要输出作为

```
Table1_ID   Table1_component
    OS          Windows
    OS          Linux
    OS          SOLARIS
    OS          MAC
    OS          UNIX
    OS          DCCI 
```

请帮助我，而不是`Table 2`我需要的名字`Table1`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T02:50:47.247

您需要 JOIN`Table1`两次才能获得结果：

```
select t1.name as table1_id,
  c.name as Table1_component
from table1 t1
inner join table2 t2
  on t1.id = t2.table1_id
inner join table1 c
  on t2.Table1_component = c.id 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/73aac/4)

# c# - C#字符串格式最佳重载方法匹配错误

> ID：15824895
> 
> 赞同：0
> 
> 时间：2013-04-05T02:26:18.553
> 
> 标签：c#, string, formatting

我对 C# 完全不熟悉，所以请耐心等待。

```
private static string GetFormattedValue(string dataType, dynamic cellValue)
    {
        string formattedCellValue = string.Empty;
        if (cellValue == null)
            cellValue = DBNull.Value;

        if (dataType == "STRING")
        {
            formattedCellValue = string.Format("'{0}',", cellValue);
        }
        else if (dataType == "NUMBER")
        {
            if (string.IsNullOrEmpty(Convert.ToString(cellValue)))
                cellValue = 0;
            formattedCellValue = string.Format("'{0}',", cellValue.ToString("F17"));
        }
        else if (dataType == "DATE")
        {
            formattedCellValue = string.Format("'{0}',", cellValue);
        }
        else
        {
            formattedCellValue = string.Format("'{0}',", cellValue.ToString("F17"));
        }

        return formattedCellValue; 
```

当`dataType`是 NUMBER 并且`cellValue`是整数时，我收到一条错误消息：“string.ToString(System.IFormatProvider) 的最佳重载方法匹配有一些无效参数”

`cellValue`通常会是非常小的数字，如果没有“F17”，将作为科学计数法返回（这会导致另一个错误），但也会是导致上述错误的整数。

这不是我的代码，我只是在运行它并且知道足以逐步完成它。任何想法如何确定是否`cellValue`可以读取以确定是否为整数？或任何其他更好的建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T02:34:13.750

有许多方法试图将字符串解析为数字，例如[Double.TryParse](http://msdn.microsoft.com/en-us/library/994c0zb1.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T02:35:09.607

F17 引用 Double 数据类型...不是字符串。

试试这个，让我知道：

```
 else if (dataType == "NUMBER")
        {
            if (string.IsNullOrEmpty(Convert.ToString(cellValue)))
                cellValue = 0;
            formattedCellValue = string.Format("'{0}',", Convert.ToDouble(Convert.ToString(cellValue)).ToString("F17"));
        } 
```

# ruby - rails 访问 ActionDispatch 错误

> ID：15824897
> 
> 赞同：0
> 
> 时间：2013-04-05T02:26:43.530
> 
> 标签：ruby, ruby-on-rails-3.2, actiondispatch

我正在尝试在保存之前更改此请求的数据

**要求**

```
{"image"=>{"picture"=>[#<ActionDispatch::Http::UploadedFile:0x10c865af8 @tempfile=#<File:/var/folders/bx/6z1z5yks56j40v15n43tjh1c0000gn/T/RackMultipart20130404-53101-1p7gv92-0>,
 @headers="Content-Disposition: form-data; name=\"image[picture][]\"; filename=\"ATA.png\"\r\nContent-Type: image/png\r\n",
 @content_type="image/png",
 @original_filename="ATA.png">,
 #<ActionDispatch::Http::UploadedFile:0x10c865ad0 @tempfile=#<File:/var/folders/bx/6z1z5yks56j40v15n43tjh1c0000gn/T/RackMultipart20130404-53101-992qy5-0>,
 @headers="Content-Disposition: form-data; name=\"image[picture][]\"; filename=\"ATA@2x.png\"\r\nContent-Type: image/png\r\n",
 @content_type="image/png",
 @original_filename="ATA@2x.png">],
 "album_id"=>"10"},
 "authenticity_token"=>"00/bnTiry5OIgGsXzeWIV2FccFiIRhsxuTg/Uep32H8=",
 "commit"=>"Submit",
 "utf8"=>"✓",
 "album_id"=>"10"} 
```

**控制器**

```
def create
    @album = Album.find(params[:album_id])
        p = Image.find(params[:image][:picture])
        p.each do |pic|
            @image = @album.images.new(params[:image][p => :picture])
        end
        if @image.save
            flash[:notice] = "Successfully added image!"
            redirect_to [:admin, @album, :images]
        else
            flash[:notice] = "failed"
        end
    end 
```

为什么这段代码会产生这个错误？如果这个错误得到解决，这段代码甚至可以为`:picture`散列中的每个数组创建一个新的图像对象吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T06:17:14.177

我想这是简单的错字：

```
p.each do |pic|
  @image = @album.images.new(params[:image][p => :picture])
end 
```

你做一个`do |pic|`但不使用`pic`任何地方。

# xml - XSLT - 将 xsl:template 输出包装在标签中

> ID：15824904
> 
> 赞同：1
> 
> 时间：2013-04-05T02:27:29.797
> 
> 标签：xml, xslt

我需要接收 1 个 .XML 文件，并输出 N 个作为输入文件子集的文件。该子集基于 2 个节点的谓词检查。我的计划是在 XSLT 模板上运行输入文件 N 次以输出每个文件。

我的输入如下所示：

```
<employee_data>
<employees>
    <employee id="1">
    <first_name>2sk8d</first_name>      
    <agency_code>38</agency_code>
    <offices_administered>
        <office_administered office_identifier="ALLPOIs" agency_code="HL" />
    </offices_administered>
    </employee>
    <employee id="2">
        <first_name>2sk8d</first_name>
        <agency_code>24</agency_code>
        <offices_administered>
            <office_administered office_identifier="ALLPOIs" agency_code="22" />
        </offices_administered>
    </employee>
    <employee id="3">
        <first_name>2sk8d</first_name>
        <agency_code>22</agency_code>
        <offices_administered>
            <office_administered office_identifier="ALLPOIs" agency_code="HL" />
        </offices_administered>
    </employee>     
</employees> 
```

我的 XSLT 看起来像这样

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<xsl:output method="xml" indent="yes"  encoding="utf-16"/>                

<xsl:template match="/employee_data/employees/employee[agency_code='22' or offices_administered/office_administered/@agency_code='22']">        
    <xsl:copy>
        <xsl:copy-of select="."/>
        <xsl:apply-templates/>
    </xsl:copy>         
</xsl:template>

<xsl:template match="@* | node()">
    <xsl:message terminate="no">
        Catch 1 <xsl:value-of select="name()"/>
    </xsl:message>
</xsl:template> 
```

我的问题是我的输出不包含 EmployeeData 或 Employees 根/父节点。

如果我将 xslt 更改为放入第一个 xsl:template-match，那么这些标签会重复多次/

如果我将匹配谓词更改为 /employee_data/employees[employee/agency_code='22' 或 employee/offices_administered/office_administered/@agency_code='22'] 那么我会得到所有员工。

这几乎就像我想要一些魔法来将我的整个比赛输出包装在我的两个父标签中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T03:07:50.497

**根据我从这个问题的理解，你想要这样的东西：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/">
   <employee_data>
        <employees>

          <xsl:apply-templates select=
          "/*/employees/employee
                [agency_code='22'
                or offices_administered/office_administered/@agency_code='22']"/>
        </employees>
  </employee_data>
 </xsl:template>

  <xsl:template match="employee">
   <xsl:copy-of select="."/>
  </xsl:template>

  <xsl:template match="@* | node()">
    <xsl:message terminate="no">
        Catch 1 <xsl:value-of select="name()"/>
    </xsl:message>
  </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<employee_data>
    <employees>
        <employee id="1">
            <first_name>2sk8d</first_name>
            <agency_code>38</agency_code>
            <offices_administered>
                <office_administered office_identifier="ALLPOIs" agency_code="HL" />
            </offices_administered>
        </employee>
        <employee id="2">
            <first_name>2sk8d</first_name>
            <agency_code>24</agency_code>
            <offices_administered>
                <office_administered office_identifier="ALLPOIs" agency_code="22" />
            </offices_administered>
        </employee>
        <employee id="3">
            <first_name>2sk8d</first_name>
            <agency_code>22</agency_code>
            <offices_administered>
                <office_administered office_identifier="ALLPOIs" agency_code="HL" />
            </offices_administered>
        </employee>
    </employees>
</employee_data> 
```

**产生了想要的正确结果**：

```
<employee_data>
   <employees>
      <employee id="2">
         <first_name>2sk8d</first_name>
         <agency_code>24</agency_code>
         <offices_administered>
            <office_administered office_identifier="ALLPOIs" agency_code="22"/>
         </offices_administered>
      </employee>
      <employee id="3">
         <first_name>2sk8d</first_name>
         <agency_code>22</agency_code>
         <offices_administered>
            <office_administered office_identifier="ALLPOIs" agency_code="HL"/>
         </offices_administered>
      </employee>
   </employees>
</employee_data> 
```

* * *

**二、XSLT 2.0 解决方案**

**使用 XSLT 2.0 可以通过一次转换运行创建所有 N 个文档：**

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:xs="http://www.w3.org/2001/XMLSchema">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:param name="pCodes" as="xs:string+" select="'22', '38'"/>
 <xsl:variable name="vDoc" select="/"/>

 <xsl:template match="/">
   <xsl:for-each select="$pCodes">
    <xsl:variable name="vCode" select="."/>
    <xsl:result-document href="'Agency'{.}.xml">
       <employee_data>
             <employees>

              <xsl:apply-templates select=
              "$vDoc/*/employees/employee
                    [agency_code=$vCode
                    or offices_administered/office_administered
                                              /@agency_code=$vCode]"/>
             </employees>
       </employee_data>
      </xsl:result-document>
  </xsl:for-each>
 </xsl:template>

  <xsl:template match="employee">
   <xsl:copy-of select="."/>
  </xsl:template>

  <xsl:template match="@* | node()">
    <xsl:message terminate="no">
        Catch 1 <xsl:value-of select="name()"/>
    </xsl:message>
  </xsl:template>
</xsl:stylesheet> 
```

**当我们在同一个提供的（上面的）XML 文档上运行这个转换时，会创建两个文件：**

```
Saxon 9.1.0.5J from Saxonica
Java version 1.6.0_31
Stylesheet compilation time: 610 milliseconds
Processing file:/C:/Program%20Files/Java/jre6/bin/marrowtr.xml
Building tree for file:/C:/Program%20Files/Java/jre6/bin/marrowtr.xml using class net.sf.saxon.tinytree.TinyBuilder
Tree built in 0 milliseconds
Tree size: 25 nodes, 21 characters, 9 attributes
Loading net.sf.saxon.event.MessageEmitter

Writing to file:/C:/Program%20Files/Java/jre6/bin/'Agency'22.xml
Writing to file:/C:/Program%20Files/Java/jre6/bin/'Agency'38.xml

Execution time: 94 milliseconds
Memory used: 11464160
NamePool contents: 26 entries in 26 chains. 6 prefixes, 7 URIs 
```

# c - C++ qsort 中的 size 参数有什么作用

> ID：15824907
> 
> 赞同：2
> 
> 时间：2013-04-05T02:28:05.910
> 
> 标签：c

在 qsort 中：

```
void qsort (void* base, size_t num, size_t size, int (*compar)(const void*,const void*)); 
```

文档解释：

```
size
Size in bytes of each element in the array.
size_t is an unsigned integral type. 
```

但通常 qsort 被调用为`qsort(...,...,sizeof(int),...)`, 或`qsort(...,...,sizeof(char *),...)`

如果我理解正确，由于无法确定字符串的大小，因此不再重要，而是使用 sizeof(char*) 作为类型声明。

有什么解释吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-13T07:54:22.550

`qsort`需要一个可以被视为数组的连续内存块。因此，数组中的每个项目必须具有相同的大小，并且您`qsort`在调用它时提供该大小。

如果您想将实际*字符串*存储在数组中，它们的大小必须相同，即最大字符串的大小。

而且，当您的比较函数比较它们时，`qsort`几乎肯定会移动大量内存来完成排序，因为它会自己交换字符串。

更常见的是将字符串本身存储在数组区域*之外*，并仅使用数组来存储*指向*这些字符串的指针。指针本身将被交换，但平均而言它们将比它们指向的字符串小得多。

例如，使用：

```
char *strings[] = {"xyzzy", "zorkmid", "twisty little passages", "plugh"}; 
```

该`strings`数组由四个指向这些字符串的指针组成，每个指针占用四个字节（在我的系统上，您的可能不同）。对数组进行`qsort`排序时，在该数组中移动的唯一东西是*指针。*

# youtube - 对 YouTube 加载页面的新方式感到好奇

> ID：15824909
> 
> 赞同：62
> 
> 时间：2013-04-05T02:28:18.630
> 
> 标签：youtube

我注意到，当我在观看视频时，单击徽标或相关视频时，屏幕上会出现红色进度条（徽标上方）。同时，有一个轻微的覆盖将内容“变灰”，然后在新页面中淡出。仅供参考，在进度条和转换发生之前，URL 会更改为新的 URL。

该栏的 div ID 是进度。看起来像是某种很酷的 jQuery ajax 加载，但会改变页面。我不知道。

![在此处输入图像描述](https://i.stack.imgur.com/BUqey.jpg)

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-06-15T22:37:16.013

YouTube 正在使用[HTML5 History API](http://diveintohtml5.info/history.html)向历史堆栈添加和删除页面 URL。这会导致地址栏中的 URL 发生变化，并且后退/前进按钮工作，同时仍然通过 JS (ajax) 实际加载页面。

此时实现具有向后兼容性的 API 的最简单方法是使用[History.js](https://github.com/browserstate/history.js/)。通过向后兼容性，我的意思是回退到不支持 HTML5 History API 的旧浏览器的哈希标记方法。

[查看 History.js 演示！](http://browserstate.github.io/history.js/demo/)

我认为 Twitter 可能是最著名的使用散列 URL 的网站示例。例如`twitter.com/#!/username`，多年来一直是常见的景象。这种方法的问题是哈希标签是客户端的，因此您需要 JS 来读取它们并提供正确的内容。任何非 JS 用户单击散列 URL 只会登陆 Twitter 的主页。

[顺便说一下， Beatport](http://www.beatport.com/)是最早使用 HTML5 History 技术的主要网站之一。SoundCloud 最近也实现了它。这两个网站都非常需要 HTML5 History，以确保在访问者浏览页面时播放音频。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-08-16T13:15:52.470

Youtube 已经开源了他们用于动态导航的库[spfjs](https://github.com/youtube/spfjs)。

> Structured Page Fragments - 或简称 SPF - 是一个轻量级的 JS 框架，用于从 YouTube 快速导航和页面更新。
> 
> SPF 使用渐进增强和 HTML5 与您的网站集成，通过仅更新在导航期间更改的页面部分而不是整个页面，从而实现更快、更流畅的用户体验。SPF 提供了用于发送文档片段的响应格式、用于脚本和样式管理的健壮系统、内存缓存、动态处理等。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-01-07T13:35:03.817

看看这个[演示](http://blog.ynh.io/2013/05/24/rebuild-youtubes-progress-bar.html)，也许可以帮助你，看看评论，有些人说很好，有些人说太复杂而无法实现

html:

```
<div>
  <dt></dt>
  <dd></dd>
</div> 
```

CSS：

```
#progress {
    position: fixed;
    z-index: 2147483647;
    top: 0;
    left: -6px;
    width: 1%;
    height: 2px;
    background: #0088CC;
    -moz-border-radius: 1px;
    -webkit-border-radius: 1px;
    border-radius: 1px;
    -moz-transition: width 500ms ease-out,opacity 400ms linear;
    -ms-transition: width 500ms ease-out,opacity 400ms linear;
    -o-transition: width 500ms ease-out,opacity 400ms linear;
    -webkit-transition: width 500ms ease-out,opacity 400ms linear;
    transition: width 500ms ease-out,opacity 400ms linear;
}

#progress dd, #progress dt {
    position: absolute;
    top: 0;
    height: 2px;
    -moz-box-shadow: #0088CC 1px 0 6px 1px;
    -ms-box-shadow: #0088CC 1px 0 6px 1px;
    -webkit-box-shadow: #0088CC 1px 0 6px 1px;
    box-shadow: #0088CC 1px 0 6px 1px;
    -moz-border-radius: 100%;
    -webkit-border-radius: 100%;
    border-radius: 100%;
}

#progress dt {
    opacity: .6;
    width: 180px;
    right: -80px;
    clip: rect(-6px,90px,14px,-6px);
}

#progress dd {
    opacity: .6;
    width: 20px;
    right: 0;
    clip: rect(-6px,22px,14px,10px);
} 
```

js：

```
$(document).ajaxStart(function() {
//only add progress bar if added yet.
  if ($("#progress").length === 0) {
    $("body").append($("<div><dt/><dd/></div>").attr("id", "progress"));
    $("#progress").width((50 + Math.random() * 30) + "%");
  }
});

$(document).ajaxComplete(function() {
//End loading animation
    $("#progress").width("101%").delay(200).fadeOut(400, function() {
      $(this).remove();
    });
}); 
```

# javascript - Dynamics CRM 2011：javascript，'null' 是 null 不是对象。错误

> ID：15824910
> 
> 赞同：0
> 
> 时间：2013-04-05T02:28:19.717
> 
> 标签：javascript, date, null, dynamics-crm-2011, field

我在 Dynamics CRM 2011 上使用 JavaScript。我试图通过比较两个日期字段来创建一个新字段。但是，我认为空值有问题。cas 错误消息出现：'null' is null not an object。

以下是脚本。请看看，让我知道你的想法。

```
function m1status() {

    var m1date = Xrm.Page.getAttribute("new_m1date").getValue()

    var today = Xrm.Page.getAttribute("new_todayis").getValue()

    if (m1date == null) {

        Xrm.Page.getAttribute("new_m1status").setValue('Not Booked');}

    else if (m1date.getTime() >= today.getTime()) {

        Xrm.Page.getAttribute("new_m1status").setValue('Booked');}

    else {

        Xrm.Page.getAttribute("new_m1status").setValue('Completed');}

    //Set the Submit Mode
    Xrm.Page.getAttribute("new_m1status").setSubmitMode("always");

} 
```

也很可能默认值为空。cas什么都没有出现。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T06:41:10.860

您的代码中有一些拼写错误，但是您可以通过这种方式重写您的代码并填写缺失的操作。

```
function m1status() {

    var m1date = Xrm.Page.getAttribute("new_m1date").getValue();
    var today = Xrm.Page.getAttribute("new_todayis").getValue();

    // you can have 4 cases
    // 1: both fields are null
    if (m1date == null && today == null) {
        Xrm.Page.getAttribute("new_m1status").setValue('Not Booked');
    }
    // 2: both fields are not null
    if (m1date != null && today != null) {

        if (m1date.getTime() >= today.getTime()) {
            Xrm.Page.getAttribute("new_m1status").setValue('Booked');
        }
        else {
            Xrm.Page.getAttribute("new_m1status").setValue('Completed');
        }
    }
    // 3: first field is not null, second field is null
    if (m1date != null && today == null) {
        // what need to do in this case?
    }
    // 4: first field is null, second field is not null
    if (m1date == null && today != null) {
        // what need to do in this case?
    }

    Xrm.Page.getAttribute("new_m1status").setSubmitMode("always");
} 
```

# bash - Bash - 如何在命令行中删除尾随的“/bin/java”？

> ID：15824915
> 
> 赞同：1
> 
> 时间：2013-04-05T02:28:50.630
> 
> 标签：bash, command-line, awk

我无法解决这个问题，似乎我在 awk 中的命令不够好：

基本上我想从一个简单的 Linux ls -l 中提取信息：

```
ls -l /etc/alternatives/java

lrwxrwxrwx. 1 root root 29 Apr  5 12:28 /etc/alternatives/java -> /jre/IBM/JDK6SR10FP1/bin/java 
```

然后我使用 awk 来检索这部分：

```
 ls /etc/alternatives/java -l | awk -F"->" '{print $2}'
 /jre/IBM/JDK6SR10FP1/bin/java 
```

由于我需要删除尾随的 /bin/java 以使其成为有效的 $JAVA_HOME，如何在 bash 中执行此操作？

我想要的是：

```
/jre/IBM/JDK6SR10FP1 
```

提前谢谢了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T02:32:47.850

假设您将此值分配`/jre/IBM/JDK6SR10FP1/bin/java`给`JAVA_HOME`使用命令替换：

```
JAVA_HOME=$(ls /etc/alternatives/java -l | awk -F"->" '{print $2}') 
```

然后你可以使用删除尾随部分

```
JAVA_HOME=${JAVA_HOME%/bin/java} 
```

有关更多信息，请参见例如[操作字符串部分](http://tldp.org/LDP/abs/html/string-manipulation.html)

# c - 欺骗 C 中的随机化器

> ID：15824922
> 
> 赞同：3
> 
> 时间：2013-04-05T02:29:19.607
> 
> 标签：c, random

我想得到 1 到 10 之间的随机数。它确实有效，但是当它处于循环中时，我并没有真正得到随机数。

```
int randomNum;
srand ( (unsigned int)time(NULL) );
randomNum = rand() % 10; 
```

我在这里和谷歌花了几个小时寻找解决方案，但看起来没有人真正解决它（或者我搜索得不够好）。我们从随机化器获得的值取决于秒（不是毫秒或其他东西，就像在其他编程语言中一样），这就是数字不是随机的原因。

此外，我不想下载 C 包，因为我在大学实验室运行我的代码，他们不允许这样做。

有没有人对这个问题有创造性的解决方案？也许一些数学函数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T02:45:09.840

为了说明西多的答案。

```
#include <stdlib.h>
#include <stdio.h>
#include <time.h>

int main(int argc, char** argv)
{
    int i;

    srand ( (unsigned int)time(NULL) );

    for (i = 0; i < 100; i++)
    {
        printf("%d ", 1 + (rand() % 10));
    }
    putchar('\n');
    return 0;
} 
```

这为我使用 time() 的一次性种子产生了以下结果。

```
7 10 2 4 4 4 2 1 7 7 10 4 3 10 2 9 6 9 2 9 7 10 4 1 1 8 2 4 8 1 2
4 2 3 9 5 8 1 7 4 9 8 10 1 8 1 1 5 1 4 5 7 3 9 10 3 6 1 9 3 4 10
8 5 2 7 2 2 9 10 5 9 8 4 1 7 7 2 3 7 5 8 6 10 8 5 4 3 7 2 8 2 1 7
7 5 5 10 6 5 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T02:33:10.363

不要多次播种随机数生成器。由于您的代码可能在同一秒内全部运行，因此每个查询都`rand`使用相同的种子，因此您每次都会得到相同的数字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T17:23:16.370

戴夫纽曼提供了一个很好的答案。或者，您也可以尝试使用伪随机生成器，例如

```
#include <stdio.h>
#include <time.h>
#include <stdlib.h>

int main()
{
    int a0; // this value will be our requirement
    int mod = 11; //this is the limit (0 - mod-1), here 10
    int a; // this stores the previous value of a0;
    int i; // loop variable
    int mul=25; //multiplicative factor
    int add=3; // additive factor
    int limit=100; // our limit
    srand ( (unsigned int)time(NULL) ); // initialize the seed
    a0 = rand() % mod;
    for(i=0;i<limit;i++)
    {
        printf("%d\t",a0);
        a = a0;
        a0 = (a * mul + add) % mod;
    }
    putchar('\n');
    return 0;
} 
```

输出：：

* * *

第一次运行::

```
2       10      4       3       1       8       0       6       7       9       2       10      4       3       1       8       0       6
7       9       2       10      4       3       1       8       0       6       7       9       2       10      4       3       1       8
0       6       7       9       2       10      4       3       1       8       0       6       7       9       2       10      4       3
1       8       0       6       7       9       2       10      4       3       1       8       0       6       7       9       2       10
4       3       1       8       0       6       7       9       2       10      4       3       1       8       0       6       7       9
2       10      4       3       1       8       0       6       7       9 
```

* * *

第二个输出::

```
9       2       10      4       3       1       8       0       6       7       9       2       10      4       3       1       8       0
6       7       9       2       10      4       3       1       8       0       6       7       9       2       10      4       3       1
8       0       6       7       9       2       10      4       3       1       8       0       6       7       9       2       10      4
3       1       8       0       6       7       9       2       10      4       3       1       8       0       6       7       9       2
10      4       3       1       8       0       6       7       9       2       10      4       3       1       8       0       6       7
9       2       10      4       3       1       8       0       6       7 
```

* * *

# javascript - 当用户尝试在文本框中输入密钥时发出警报

> ID：15824925
> 
> 赞同：0
> 
> 时间：2013-04-05T02:30:13.240
> 
> 标签：javascript, alert, textfield

所以我现在一直在寻找一些代码，当他们尝试在空白文本框中输入任何类型的文本时，会向用户发出一条消息（我知道如何发出警报）。

这是我的代码。我要添加什么来导致`sendMsg()`调用该函数？

```
<script>
  function sendMsg()
  {
    alert ("change msg content here");
  }
</script> 
```

这是HTML：

```
<body>
  <input type="text" name="">
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T02:33:32.077

这可能有效：

```
<input type="text" name="foo" onKeyUp="sendMsg()" /> 
```

即如果我理解你的问题。

干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T02:33:50.347

使用`onchange`事件。

```
<input type="text" name="" onchange="inputChanged();"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T02:35:54.787

您是否尝试过为您的输入提供一个 ID：

```
<input id="testing" type="text" name="" /> 
```

然后你的javascript将是：

```
document.getElementById('testing').onfocus = function() {
    // alert("change msg content here");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T02:39:53.097

您需要做的第一件事是将事件侦听器附加到`focus`文本框的事件（当您“聚焦”文本框时触发），为此您需要某种方式将其定位在DOM。最简单的方法是添加如下`id`属性：

```
<body>
        <input type="text" name="" id="msgContent">
</body> 
```

现在您可以使用该`document.getElementById`方法来查找元素：

```
var textBox = document.getElementById('msgContent'); 
```

然后你可以附加一个事件监听器：

```
textBox.addEventListener('focus', function () {
    alert('change msg content here');
}); 
```

请记住，该`addEventListener`方法在某些旧版本的 IE 中不可用，而是在[此处详细介绍了其他后备方法](https://developer.mozilla.org/en-US/docs/DOM/EventTarget.addEventListener)。

最后，如果您使用的是 , 等库`jQuery`，则`YUI`可以标准化浏览器差异以附加事件处理程序：

```
//jQuery example
$('#msgContent').on('focus', function () {
    alert('change msg content here');
}); 
```

# java - 纸牌问题-Java

> ID：15824928
> 
> 赞同：-1
> 
> 时间：2013-04-05T02:30:38.987
> 
> 标签：java

我在编译这个 DeckOfCards 类时遇到问题。`Deck2.Shuffle()`它一直告诉我指向and时找不到符号`Deck2.deal()`。任何想法为什么？

```
import java.lang.Math;
import java.util.Random;

public class DeckOfCards {
    private Cards[] Deck;
    private int cardHold;

    public DeckOfCards() {
        Deck = new Cards[52];
        int n = 0;
        for (int i = 1; i <= 13; i++) {
            for (int j = 1; j <= 4; j++) {
                Deck[n] = new Cards(i, j);
                n = n + 1;
            }
        }
        cardHold = -1;
    }

    public void Shuffle() {
        // shuffles ands resets deck
        int i = 0;
        while (i < 52) {
            int rando = (int) (5.0 * (Math.random()));
            Cards temp = Deck[rando];
            Deck[rando] = Deck[i];
            Deck[i] = temp;
            i++;
        }
    }

    public Cards deal() {
        // if there are any more cards left in the deck, return the next one and
        // increment
        // index; return null if all the cards have been dealt
        // ***Question, increment before or
        // after??***----------------------------------------
        if (!hasMoreCards()) {
            return null;
        } else {
            Cards temp = null;
            temp = Deck[cardHold];
            cardHold = cardHold + 1;
            return temp;
        }
    }

    public boolean hasMoreCards() {
        // returns true if there are more cards left, else return false
        if (cardHold == 0)
            return false;
        else
            return true;
    }

    public static void main(String[] args) {
        DeckOfCards Deck2 = new DeckOfCards();
        Deck2.Shuffle();
        for (int i = 0; i < 52; i++)
            System.out.println(Deck2.deal());
    }
} 
```

下面的类是 Card 类，这可能是导致问题的原因吗？

```
public class Cards {
    protected int rank;
    protected int suit;
    protected String[] sNames = { "Hearts", "Clubs", "Spades", "Diamonds" };
    protected String[] rNames = { "Ace", "2", "3", "4", "5", "6", "7", "8",
            "9", "10", "Jack", "Queen", "King" };

    public Cards(int Rank, int Suit) {
        suit = Suit;
        rank = Rank;
    }

    public String toString() {
        return ("Your card is: " + rNames[rank - 1] + " of " + sNames[suit - 1]);
    }

    public int getRank() {
        return rank;
    }

    public int getSuit() {
        return suit;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T02:33:47.647

您在`if`此处的语句表达式中使用了赋值运算符：

```
if (cardHold = 0) 
```

用。。。来代替

```
if (cardHold == 0) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T02:36:32.017

你的编译器问题已经过去了，但是你的代码有很多问题。

```
public class DeckOfCards {
    private Cards[] deck;
    private int cardHold;

    public DeckOfCards() {
        deck = new Cards[52];
        int n = 0;
        for (int i = 1; i <= 13; i++) {
            for (int j = 1; j <= 4; j++) {
                deck[n] = new Cards(i, j);
                n = n+1;
            }
        }
        cardHold = -1;
    }

    public void shuffle() {
        int i = 0;
        while (i < 52) {
            int rando = (int) (5.0*(Math.random()));
            Cards temp = deck[rando];
            deck[rando] = deck[i];
            deck[i] = temp;
            i++;
        }
    }

    public Cards deal() {
        return (hasMoreCards() ? deck[++cardHold] : null);
    }

    public boolean hasMoreCards() {
        return (cardHold != 0);
    }

    public static void main(String[] args) {
        DeckOfCards deck2 = new DeckOfCards();
        deck2.shuffle();
        for (int i = 0; i < 52; i++)
            System.out.println(deck2.deal());
    }
} 
```

和：

```
public class Cards {
    protected int rank;
    protected int suit;
    protected String[] sNames = {"Hearts", "Clubs", "Spades", "Diamonds"};
    protected String[] rNames = {"Ace", "2", "3", "4", "5", "6", "7", "8", "9", "10", "Jack", "Queen", "King"};

    public Cards(int rank, int suit) {
        this.suit = suit;
        this.rank = rank;
    }

    public String toString() {
        return ("Your card is: "+rNames[rank-1]+" of "+sNames[suit-1]);
    }

    public int getRank() {
        return rank;
    }

    public int getSuit() {
        return suit;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T02:53:55.773

您可能想要添加 import java.util.Date; 并且主程序中的随机播放功能和调用不同，一个有's'，另一个有'S'。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T03:37:56.800

试试这个：

```
import java.lang.Math;
import java.util.Date;
import java.util.Random;

public class DeckOfCards {

    private Cards[] Deck;
    private int cardHold;
    private Random rand;

    public DeckOfCards() {
        rand = new Random();
        Date d = new Date();
        rand.setSeed(d.getTime());
        Deck = new Cards[52];
        int n = 0;
        for (int i = 1; i <= 13; i++) {
            for (int j = 1; j <= 4; j++) {
                Deck[n] = new Cards(i, j);
                n = n + 1;
            }
        }
        cardHold = 0;
    }

    public void shuffle() {
        // shuffles ands resets deck
        int i = 0;
        while (i < 52) {
            // int rando = (int)(5.0 * (Math.random()));
            int rando = rand.nextInt(52);
            Cards temp = Deck[rando];
            Deck[rando] = Deck[i];
            Deck[i] = temp;
            i++;
        }
    }

    public boolean hasMoreCards() {
        // returns true if there are more cards left, else return false
        if (cardHold == 0)
            return false;
        else
            return true;
    }

    public static void main(String[] args) {
        DeckOfCards Deck2 = new DeckOfCards();
        Deck2.shuffle();
        for (int i = 0; i < 52; i++)
            System.out.println(Deck2.Deck[i]);

    }
} 
```

# c# - 重新排序类中的对象

> ID：15824930
> 
> 赞同：0
> 
> 时间：2013-04-05T02:31:28.533
> 
> 标签：c#, asp.net, json, wcf, sorting

我正在做 JSON 解析，我有以下结果；

```
{
"alias": {
    "OUTLET_NAME": "OUTLET_NAME"
},
"displayFieldName": "OUTLET_NAME",
"feature": {
    "features": [
        {
            "attribute": {
                "OUTLET_NAME": "CCK 24-hr Family Clinic"
            },
            "geometry": {
                "X": 17961.38,
                "Y": 40715.6875
            }
        },
        {
            "attribute": {
                "OUTLET_NAME": "Central Clinic and Surgery (Bedok)"
            },
            "geometry": {
                "X": 39091.43,
                "Y": 34142.043
            }
        },
        {
            "attribute": {
                "OUTLET_NAME": "Central Clinic and Surgery (Hougang)"
            },
            "geometry": {
                "X": 33835.53,
                "Y": 39431.01
            }
        },
        {
            "attribute": {
                "OUTLET_NAME": "Central Clinic and Surgery (Yishun)"
            },
            "geometry": {
                "X": 27410.125,
                "Y": 45743.45
            }
        },
        {
            "attribute": {
                "OUTLET_NAME": "Lifelink 24hrs Clinic and Surgery"
            },
            "geometry": {
                "X": 32343.502,
                "Y": 39151.2266
            }
        },
        {
            "attribute": {
                "OUTLET_NAME": "Medihealth Bishan 24 Hours Clinic and Surgery"
            },
            "geometry": {
                "X": 29984.7734,
                "Y": 36586.86
            }
        },
        {
            "attribute": {
                "OUTLET_NAME": "Mediline Wei Min Clinic"
            },
            "geometry": {
                "X": 36201.6328,
                "Y": 31674.46
            }
        },
        {
            "attribute": {
                "OUTLET_NAME": "Novena Clinic 24 Hours"
            },
            "geometry": {
                "X": 29197.53,
                "Y": 33659.6055
            }
        },
        {
            "attribute": {
                "OUTLET_NAME": "Raffles Medical Airport 24-hr Clinic"
            },
            "geometry": {
                "X": 44899.6836,
                "Y": 37431.73
            }
        },
        {
            "attribute": {
                "OUTLET_NAME": "Silver Cross Family Clinic (Serangoon)"
            },
            "geometry": {
                "X": 32329.1758,
                "Y": 37284.06
            }
        },
        {
            "attribute": {
                "OUTLET_NAME": "Shenton Family Medical Clinic (Bukit Gombak)"
            },
            "geometry": {
                "X": 18838.0039,
                "Y": 37873.7656
            }
        },
        {
            "attribute": {
                "OUTLET_NAME": "Medihealth Bishan 24 Hours Clinic and Surgery"
            },
            "geometry": {
                "X": 39090.3164,
                "Y": 34147.3477
            }
        },
        {
            "attribute": {
                "OUTLET_NAME": "Ang Mo Kio Polyclinic (NHG)"
            },
            "geometry": {
                "X": 29549.7285,
                "Y": 39377.99
            }
        },
        {
            "attribute": {
                "OUTLET_NAME": "Bedok Polyclinic (Singhealth)"
            },
            "geometry": {
                "X": 38940.74,
                "Y": 34247.7461
            }
        },
        {
            "attribute": {
                "OUTLET_NAME": "Bukit Batok Polyclinic (NHG)"
            },
            "geometry": {
                "X": 18479.2949,
                "Y": 37117.1133
            }
        },
        {
            "attribute": {
                "OUTLET_NAME": "Choa Chu Kang Polyclinic (NHG)"
            },
            "geometry": {
                "X": 18832.752,
                "Y": 40480.02
            }
        },
        {
            "attribute": {
                "OUTLET_NAME": "Clementi Polyclinic (NHG)"
            },
            "geometry": {
                "X": 20473.0254,
                "Y": 32777.65
            }
        },
        {
            "attribute": {
                "OUTLET_NAME": "Geylang Polyclinic (Singhealth)"
            },
            "geometry": {
                "X": 33995.8047,
                "Y": 33537.26
            }
        },
        {
            "attribute": {
                "OUTLET_NAME": "Hougang Polyclinic (NHG)"
            },
            "geometry": {
                "X": 34198.1172,
                "Y": 39108.6953
            }
        },
        {
            "attribute": {
                "OUTLET_NAME": "Jurong Polyclinic (NHG)"
            },
            "geometry": {
                "X": 16596.166,
                "Y": 36874.918
            }
        },
        {
            "attribute": {
                "OUTLET_NAME": "Marine Parade Polyclinic (Singhealth)"
            },
            "geometry": {
                "X": 36304.0234,
                "Y": 31631.8926
            }
        },
        {
            "attribute": {
                "OUTLET_NAME": "Marine Parade Polyclinic (Singhealth)"
            },
            "geometry": {
                "X": 28576.2051,
                "Y": 29132.0039
            }
        },
        {
            "attribute": {
                "OUTLET_NAME": "Tampines Polyclinic (Singhealth)"
            },
            "geometry": {
                "X": 40523.01,
                "Y": 37716.5547
            }
        },
        {
            "attribute": {
                "OUTLET_NAME": "Toa Payoh Polyclinic (NHG)"
            },
            "geometry": {
                "X": 30854.1777,
                "Y": 35203.2422
            }
        },
        {
            "attribute": {
                "OUTLET_NAME": "Woodlands Polyclinic (NHG)"
            },
            "geometry": {
                "X": 21546.4063,
                "Y": 45844.5977
            }
        },
        {
            "attribute": {
                "OUTLET_NAME": "Yishun Polyclinic (NHG)"
            },
            "geometry": {
                "X": 28427.4941,
                "Y": 45016.31
            }
        },
        {
            "attribute": {
                "OUTLET_NAME": "Pasir Ris Polyclinic (Singhealth)"
            },
            "geometry": {
                "X": 42028.0156,
                "Y": 38950.3164
            }
        },
        {
            "attribute": {
                "OUTLET_NAME": "Queenstown Polyclinic (Singhealth)"
            },
            "geometry": {
                "X": 24412.3555,
                "Y": 31231.8438
            }
        },
        {
            "attribute": {
                "OUTLET_NAME": "Sengkang Polyclinic (Singhealth)"
            },
            "geometry": {
                "X": 34765.73,
                "Y": 41634.793
            }
        }
    ]
},
"field": {
    "fi": [
        {
            "alias": "OUTLET_Name",
            "length": 200,
            "name": "OUTLET_NAME",
            "type": "esriFieldTypeString"
        }
    ]
},
"geometryType": "esriGeometryPoint",
"wkids": {
    "wkid": 3414
} 
```

}

我必须实现的是以下 JSON 格式：

```
{
"displayFieldName": "OUTLET_NAME",
"fieldAliases": {
    "OUTLET_NAME": "OUTLET_NAME"
},
"geometryType": "esriGeometryPoint",
"spatialReference": {
    "wkid": 3414
},
"fields": [
    {
        "name": "OUTLET_NAME",
        "type": "esriFieldTypeString",
        "alias": "OUTLET_NAME",
        "length": 200
    }
],
"features": [
    {
        "attributes": {
            "OUTLET_NAME": "Alexandra Hospital"
        },
        "geometry": {
            "x": 24412.561499999836,
            "y": 29892.22849999927
        }
    },
    {
        "attributes": {
            "OUTLET_NAME": "Changi General Hospital"
        },
        "geometry": {
            "x": 40924.62980000023,
            "y": 35863.99689999968
        }
    },
    {
        "attributes": {
            "OUTLET_NAME": "National University Hospital"
        },
        "geometry": {
            "x": 22393.636400000192,
            "y": 30731.8563000001
        }
    },
    {
        "attributes": {
            "OUTLET_NAME": "Singapore General Hospital"
        },
        "geometry": {
            "x": 28262.58440000005,
            "y": 29180.98860000074
        }
    },
    {
        "attributes": {
            "OUTLET_NAME": "Tan Tock Seng Hospital"
        },
        "geometry": {
            "x": 29668.50810000021,
            "y": 33693.00019999966
        }
    },
    {
        "attributes": {
            "OUTLET_NAME": "KK Women's and Children's Hospital"
        },
        "geometry": {
            "x": 29509.814699999988,
            "y": 32540.03519999981
        }
    },
    {
        "attributes": {
            "OUTLET_NAME": "Adam Road Hospital"
        },
        "geometry": {
            "x": 25778.033800000325,
            "y": 34343.84779999964
        }
    },
    {
        "attributes": {
            "OUTLET_NAME": "Mount Alvernia Hospital"
        },
        "geometry": {
            "x": 28502.294900000095,
            "y": 35975.92449999973
        }
    },
    {
        "attributes": {
            "OUTLET_NAME": "Paragon Medical Centre"
        },
        "geometry": {
            "x": 28230.75270000007,
            "y": 31911.52370000072
        }
    },
    {
        "attributes": {
            "OUTLET_NAME": "Raffles Hospital"
        },
        "geometry": {
            "x": 30665.577200000174,
            "y": 31499.313200000674
        }
    },
    {
        "attributes": {
            "OUTLET_NAME": "Thomson Medical Centre"
        },
        "geometry": {
            "x": 28906.391900000162,
            "y": 34174.550200000405
        }
    },
    {
        "attributes": {
            "OUTLET_NAME": "Mount Elizabeth Hospital"
        },
        "geometry": {
            "x": 28227.747800000012,
            "y": 31941.378900000826
        }
    }
]
} 
```

这是我在 WCF 服务中返回 JSON 的方法。

```
 [OperationContract]
[WebInvoke(Method = "GET",
        ResponseFormat = WebMessageFormat.Json,
        BodyStyle = WebMessageBodyStyle.Bare, UriTemplate = "json")]
Container GetClinicInfo();

 [DataContract]
public class Container
{
[DataMember]
public string displayFieldName { get; set; }
[DataMember]
public FieldAliases alias { get; set; }
[DataMember]
public string geometryType { get; set; }
[DataMember]
public SpatialReference wkids { get; set; }
[DataMember]
public fieldContainer field { get; set; }
[DataMember]
public Features feature { get; set; }

[DataContract]
public class Container
 {
    [DataMember]
    public string displayFieldName { get; set; }
    [DataMember]
    public FieldAliases alias { get; set; }
    [DataMember]
     public string geometryType { get; set; }
    [DataMember]
     public SpatialReference wkids { get; set; }
    [DataMember]
    public fieldContainer field { get; set; }
    [DataMember]
    public Features feature { get; set; }

public Container(string display,FieldAliases aliases,string type,SpatialReference spatial,fieldContainer container, Features fea)
{
    displayFieldName = display;
    alias = aliases;
    geometryType = type;
    wkids = spatial;
    field = container;
    feature = fea;
} 
```

现在，JSON 正在按字母顺序解析“Container”；

附图片：http: [//img600.imageshack.us/img600/2861/ehaehaehaeh.png](http://img600.imageshack.us/img600/2861/ehaehaehaeh.png)）

有谁知道我应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T03:17:57.537

您可以使用`Order`属性的`[DataMember]`属性来定义字段序列化的顺序：

```
[DataContract]
public class Container
{
    [DataMember(Order = 1)]
    public string displayFieldName { get; set; }
    [DataMember(Order = 2)]
    public FieldAliases fieldAliases { get; set; }
    [DataMember(Order = 3)]
    public string geometryType { get; set; }
    [DataMember(Order = 4)]
    public SpatialReference spatialReference { get; set; }
    [DataMember(Order = 5)]
    public fieldContainer fields { get; set; }
    [DataMember(Order = 6)]
    public Features features { get; set; }
} 
```

# c - 如何根据库中的地址查找函数名称

> ID：15824932
> 
> 赞同：0
> 
> 时间：2013-04-05T02:31:41.700
> 
> 标签：c

我正在使用 backtrace_symbols() 从我的 c 代码中打印堆栈（按照[http://www.gnu.org/software/libc/manual/html_node/Backtraces.html](http://www.gnu.org/software/libc/manual/html_node/Backtraces.html)上的说明）。但是，即使我使用 -g -rdynamic 构建了库，我也只能获取动态库中堆栈帧的地址。

现在，我有了正在运行的进程和库，如何找出每个帧地址对应的方法？先感谢您。

这是在 64 位 Linux 上。

我的打印示例如下所示：

```
Obtained 9 stack frames.
/tmp/libexample.so [0x2aaabaae9771]
/tmp/libexample.so [0x2aaabaae9828]
/tmp/libexample.so [0x2aaabaaa8138]
/tmp/libexample.so [0x2aaabaab2402]
/tmp/libexample.so [0x2aaabaabd029]
/tmp/libexample.so [0x2aaabaa1e23a]
/tmp/libexample.so [0x2aaabaa24ded]
/lib64/libpthread.so.0 [0x30b700677d] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T03:06:29.247

我认为您正在寻找该`dladdr`功能。

# php - php htaccess url重写问题

> ID：15824933
> 
> 赞同：0
> 
> 时间：2013-04-05T02:31:45.950
> 
> 标签：php, url-rewriting

我试图让 url 重写工作，但我没有得到任何地方。基本上我想要三个页面，一个用于音乐，然后是一般产品，另一个用于 mvie，每个都有一个查询字符串 &pagetype=general 等，但 URL 是[http://shopnbuy.vacau.com/browse/computers。 html?pageType=general](http://shopnbuy.vacau.com/browse/computers.html?pageType=general)将重定向到general_products.php，然后是music_products 和movie_products。所以它们都有相同的 url，只是参数 &pageType= 不同。下面是我的 htaccess 文件，这是我第一次尝试这样做

```
# Do not remove this line, otherwise mod_rewrite rules will stop working
RewriteBase /

RewriteEngine On

RewriteRule ^browse/([a-zA-Z0-9_-])\.html general_products.php?department=$1&pageType=general
RewriteRule ^browse/([a-zA-Z0-9_-])\.html music_products.php?department=$1&pageType=music
RewriteRule ^browse/([a-zA-Z0-9_-])\.html movie_products.php?department=$1&pageType=movie

url suppose to look like this
http://shopnbuy.vacau.com/browse/computers.html 
```

我得到的只是每个 url 重写的错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T02:41:21.727

我不太了解 htacess，但我最近使用它，我发现你实际上不能有效地使用“/”。我建议您将其更改为“_”。

据我了解，这可能是由于“/”作为指示每个参数的一个（我的意思是 A / B 排序逻辑）

不确定我是否正确解释自己，希望有知识的人纠正我，因为我也渴望了解它。

RewriteRule ^browse_computers / general_products.php?department=$1&pageType=general ([a-zA-Z0-9_-])

RewriteRule ^browse_music / music_products.php?department=$1&pageType=music ([a-zA-Z0-9_-]) RewriteRule ^browse_movies / movie_products.php?department=$1&pageType=movie ([a-zA-Z0-9_- ])

然而，结果将是这样的： [http ://shopnbuy.vacau.com/browse_computers](http://shopnbuy.vacau.com/browse_computers)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-06T16:26:43.010

有点不确定你的初始网址，但试试这个

^browse_(.+)/(.+)$browse/computers.html?pageType=$1

# python - django模型数据库中的最后一条记录

> ID：15824934
> 
> 赞同：0
> 
> 时间：2013-04-05T02:31:50.317
> 
> 标签：python, django, django-models

我正在尝试这样做：

我有一个位置评级记录表。在此表中，一个位置也可以有多个评分。但我想将搜索限制在相同位置的最后一条记录。例如：

一个`id`=1 的位置有 3 个评分：1、2、4。现在当用户搜索评分 2 时，该位置不应该**出现**，因为它的最后一条记录是 4。

**编辑**
有两个表（django 模型）：位置和评级。

我可以这样做吗：

```
all_locations = Location.objects.all() 
```

然后在模板中。`locations_rating`是`locationID`评级表中外键的相关名称。

```
{% for location in all_locations %}
  {{ location.locations_rating }}
{% endfor %} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T03:36:34.527

模型.py

```
class Location(models.Model):
    locationname = models.CharField(max_length=100)

    def __unicode__(self):
        return self.locationname

    def latest(self):
        return Rating.objects.values('rating').filter(von_location=self).order_by('-id')[0]

class Rating(models.Model):
   von_location = models.ForeignKey(Location,related_name="locations_rate")
   rating = models.IntegerField()

   def __unicode__(self):
        return "{0}".format(self.rating) 
```

视图.py

```
all_locs = Location.objects.all() 
```

模板

```
{% for location in all_locs %}
   {{ location.locationname }} - {{ location.latest.rating }}<br/>
{% endfor %} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T02:35:39.877

这纯粹是猜测，但你能做这样的事情吗？

```
Rating.objects.filter(location_id=1).order_by(id).reverse()[0] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T02:59:52.640

啊，我误解了这个问题。这是一种不太有效的方法来完成您的要求：

```
locations = Location.objects.all();
filtered = []
for location in locations:
    try:
        r = Rating.objects.filter(location=location).order_by(-id).[0]
        if r.rating = 2:
        filtered.append(location)
    except Exception as ex:
        pass 
```

# jquery - Jquery 大小文本

> ID：15824935
> 
> 赞同：0
> 
> 时间：2013-04-05T02:31:50.650
> 
> 标签：jquery, zooming

我创建了一个脚本，它应该增加或减小文本的大小（如下所示），但问题是当我单击其中一个图像并传递参数时，文本的大小保持不变`menos`

```
<script>

function increase_text(size,mode) {

    var size_ini=16;
    var size_max=20;
    var size_min=16;

    if (mode=="mas")
    {
        var size_increase = size_ini++;

        alert("ok"+size_increase);

        if (size_increase<20)
        {
            $(".content").css("font-size",""+size_increase+"px");
        }
        else
        {
            $(".content").css("font-size",""+size_max+"px");
        }
    }

    if (mode=="menos")
    {
        var size_increase = size_ini--;

        if (size_increase>=20 || size_increase>=size_min)
        {
            $(".content").css("font-size",""+size_increase+"px");
        }
        else
        {
            $(".content").css("font-size",""+size_min+"px");
        }
    }
}
</script> 
```

**标记**

```
<div style="position:relative;width:100%;border:0px solid;height:40px;">
<img src="http://127.0.0.1/tfw_end/wp-content/themes/thefactoyweb/images/text_decrease.png" onclick="increase_text('1','menos');" style="display:block;float:right;cursor:pointer;cursor:hand;" alt="Aumentar Texto" title="Aumentar Texto">
<img src="http://127.0.0.1/tfw_end/wp-content/themes/thefactoyweb/images/text_increase.png" onclick="increase_text('1','mas');" style="display:block;float:right;cursor:pointer;cursor:hand;" alt="Reducir Texto" title="Reducir Texto"></div> 
```

[http://jsfiddle.net/Wn6YJ/](http://jsfiddle.net/Wn6YJ/)

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T02:46:17.290

我认为问题在于您没有`size`在任何地方使用脚本中的变量，而是使用了其他变量（但从不使用那个变量）。

Creo que la questiona es que nousas el variable `size`en tu código en ninguna parte

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T03:06:07.353

有多个问题
1.`size_ini`是一个局部变量，这意味着它在每次调用`increase_text`
2 时都会重置。您的增量/减量逻辑也存在问题，即使它`size_ini`超过`size_max`了保持增量，所以在下一次`decrease`单击文本将以比允许的大得多的字体显示。

采用

```
var size_ini = 16;
var size_max = 20;
var size_min = 16;

function increase_text(size, mode) {
    if (mode == "mas") {
        size_ini = size_ini >= size_max ? size_max : size_ini + 1;
    } else if (mode == "menos") {
        size_ini = size_ini <= size_min ? size_min : size_ini - 1;
    }
    $(".content").css("font-size", size_ini + "px");
} 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/HS4EL/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T03:06:47.320

您的代码中有一些内容不起作用。

1.  `onclick="function() {}"`在 jsfiddler 中，由于范围问题，您需要避免使用。改为使用`$("img#reduce").click(function() {});`。
2.  当您单击图像时，您的代码将`size_ini`永远不会作为您的初始值，因为您在函数范围内启动。如果您可以更正您的代码并在它仍然不起作用时发布它，那么最好。`16``size_ini`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T03:24:40.060

我重写了，见[http://jsfiddle.net/Wn6YJ/1/](http://jsfiddle.net/Wn6YJ/1/)

它有几个问题，`init`值不应该输入`function`，如果输入`function`，`init`每次都会

# c# - C# - 循环配对和匹配

> ID：15824940
> 
> 赞同：1
> 
> 时间：2013-04-05T02:32:32.080
> 
> 标签：c#, algorithm, while-loop, streamreader

所以我被困在一个程序上，我有一系列的对，这些对可能会也可能不会连接在一起，形成一条通过这些对的完整路径。我需要能够检查一对中的第二个项目是否可以匹配另一对中的第一个项目，依此类推，直到没有任何对。例如，我的配对可能是：

(1,5)
(2,4)
(3,2)
(5,3)
(4,3)

我需要能够以某种方式遍历这些对，并根据一对的第二个数字是否与下一对的第一个数字匹配，检查我是否可以获得一条穿过每个对的完整路径。在此示例中，输出将是：

(1,5), (5,3), (3,2), (2,4), (4,3)

形成完全匹配。如果无法形成匹配，我需要报告失败。输入基于文本文件。到目前为止，我已经能够使用 Streamreader 读取文件并根据换行符拆分对，然后遍历并根据逗号将每对拆分为其项目。我对如何进行几乎一无所知，如果有人有一些想法，我将不胜感激。

```
StreamReader sr = new StreamReader("inputs.txt");
string line = null;
line = sr.ReadToEnd();
var str = line.Trim().Split('\n');
int length = str.Length;
int index=1;

while (index < length)
{
    var pair = str[index].Split(',');
    var item1 = pair[0];
    var item2 = pair[1];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T09:35:41.973

您描述的问题可以转换为另一种形式；[图](http://en.wikipedia.org/wiki/Graph_theory)。_

这是您提供的示例的外观。

![代表您的示例的有向图](https://i.stack.imgur.com/chZqE.png)

我画了一个从 1 到 5 的箭头，因为有一对 (1,5) 等等。

像这样的图上的路径只能按照箭头的方向。

您想知道的是：“此图中是否有一条使用每一对的路径，即越过每条边？”

这样的路径称为[欧拉有向路径](http://en.wikipedia.org/wiki/Eulerian_path)

维基百科列出了两种寻找此类路径的算法，即 Fleury 和 Hierholzer，这两种算法都是在 1800 年代后期发现的。希望这能让您了解从哪里开始解决这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T02:45:17.507

首先，您需要去掉括号 - 如果它们存在于您的输入文件中。请参阅`string.Trim`方法。

蛮力方法：

```
public class Pair
{
  public string First;
  public string Second;
}

List<Pair> pairs = new List<Pair>();
for (int index = 0; iter < str.Length; index++)
{
    var pair = str[index].Split(',');
    pairs.Add(new Pair(){First = pair[0], Second = pair[1]});
}

List<Pair> ordered = new List<Pair>();
ordered.Add(pairs[0]);
pairs.RemoveAt(0);

while (pairs.Count > 0)
{
    bool found = false;
    for (int iter = 0; iter < pairs.Count; iter++)
    {
        if (ordered[ordered.Count - 1].Second == pairs[iter].First)
        {
            ordered.Add(pairs[iter]);
            pairs.RemoveAt(iter);
            found = true;
            break;
        }
    }
    if (!found)
    {
      <report error>
      break;
    }
} 
```

错误检查留给读者作为练习。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T02:45:30.113

警告：这未经测试！

```
using System;
using System.IO;

class t1{
public static void Main(String[] args)
{
    StreamReader sr = new StreamReader("inputs.txt");
    string line = null;
    line = sr.ReadToEnd();
    var str = line.Trim().Split('\n');
    int length = str.Length;
    int[][] arr=new int[10][];//[str.Length][2];
    int index=0;

    while (index < length)
    {
        var pair = str[index].Split(',');
        var item1 = Convert.ToInt32(pair[0]);
        var item2 = Convert.ToInt32(pair[1]);
        arr[index]=new int[]{item1,item2};

        index++;
    }

    for (int i=0;i<arr.Length;i++)
    {
        for (int j=i+1;j<arr.Length;j++)
        {
            if  (arr[i][1] == arr[j][0])
            {
                    //MATCH
            }
            else
            {
                    //FAILURE
             }
        }
    }
}
} 
```

# python - 如何使用 matplotlib 绘制图像数据与时间的关系

> ID：15824947
> 
> 赞同：0
> 
> 时间：2013-04-05T02:33:07.337
> 
> 标签：python, matplotlib

我已经捕获了一组图像，每列都带有时间戳。我同时采样了其他带有时间戳的信号（例如陀螺仪数据）。我想在共享时间轴的两个垂直对齐的子图上绘制这些信号。

据我了解，我不能在子图中调用 imshow() 两次并将每个图像定位在沿 x 的不同位置（它们都共享起始位置，因此重叠，并且似乎没有设置来克服这个):

```
import matplotlib.pyplot as plt

fig, ax = plt.subplots(nrows=2, ncols=1, sharex=True)

ax[0].imshow(np.atleast_2d(I[0][0]).T, cmap=plt.cm.gray, \
                            interpolation='Nearest', aspect='auto')
ax[0].imshow(np.atleast_2d(I[0][1]).T, cmap=plt.cm.gray, \
                            interpolation='Nearest', aspect='auto') 
```

经过一番谷歌搜索，我找到了一个潜在的解决方案，需要在顶部子图中创建额外的轴，在其中我可以绘制每一列：

```
import matplotlib.pyplot as plt

fig, ax = plt.subplots(nrows=2, ncols=1, sharex=True)

ax[0].set_ylabel('Rows')
imax = fig.add_axes(ax[0].get_position().min + \
                [ax[0].get_position().xmax - ax[0].get_position().xmin] + \
                [ax[0].get_position().ymax - ax[0].get_position().ymin], \
                                                                sharey=ax[0])
imax.set_ylim([I.shape[2], 0])
imax.set_axis_off()
imax.imshow(np.atleast_2d(I[0][0]).T, cmap=plt.cm.gray, \
                             interpolation='Nearest', aspect='equal') 
```

尽管这将允许在我可以移动相关轴的任何位置灵活地定位每一列，但要在所有其他绘图显示的每个时间戳的图像中找到相对位置是一项相当艰巨的工作。

我错过了一种更简单的方法来完成这项工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T02:43:21.893

您可以`extent`用来控制在轴上绘制图像的位置：

```
ax = gca()
ax.imshow(rand(15,15), extent=[0, .5, 0, .5])
ax.imshow(rand(15,15), extent=[.5, 1,  .5, 1])

ax.set_xlim([0, 1])
ax.set_ylim([0, 1])

plt.draw() 
```

范围单位是数据单位。

![在此处输入图像描述](https://i.stack.imgur.com/vj5f3.png)

# ruby - 将utf8mb4字符串保存到mysql

> ID：15824956
> 
> 赞同：2
> 
> 时间：2013-04-05T02:33:52.610
> 
> 标签：ruby, unicode, mysql2, emoji

我有一个包含 utf8mb4 字符的 JSON 字符串。我首先解析 JSON，然后将结果编码回 JSON。之后，我将生成的 JSON 保存到 mysql 数据库。（这是一个简化的执行流程，我首先解析 JSON 然后将其编码回来是有现实原因的）。

问题是数据库以我放在那里的 JSON 字符串的前缀结尾，并且在第一个 utf8mb4 字符处被截断。

这是我的代码：

```
require 'json'
require 'mysql2'

TABLENAME = 'my_table'

settings = {
  :database => "my_database",
  :host => "localhost",
  :password => "my_password",
  :username => "my_username"
}

@database = Mysql2::Client.new settings
@json = %q({"test":"begin \ud83d\ude04\ud83d\udc4d\ud83d\udc4f\ud83d\udd14 end"})

begin
  obj = JSON.parse @json
rescue JSON::ParserError => e
  @json.force_encoding 'utf-8'
  encoded = @json.valid_encoding? ? @json : @json.encode!('utf-8', invalid: :replace, undef: :replace)
  obj = JSON.parse encoded
end

q = "create table if not exists `#{TABLENAME}` (json text not null) engine=InnoDB default charset=utf8"
@database.query q

text = @database.escape JSON.generate obj
q = "insert ignore into `#{TABLENAME}` (json) values('#{text}')"
@database.query q

q = "select * from `#{TABLENAME}`"
rs = @database.query q

rs.each {|r|
  p r
} 
```

输出是：

```
{"json"=>"{\"test\":\"begin "} 
```

我不知道为什么会发生这种情况，我将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T03:35:48.857

感谢@muistooshort 帮助我找到解决此问题的方法：

```
...
settings = {
  ...
  :encoding => 'utf8mb4'
}
...
q = "create table ... default charset=utf8mb4"
... 
```

当然，这只适用于支持 utf8mb4 的引擎。

# javascript - 如何使用媒体查询从 HTML 加载 javascript 文件

> ID：15824957
> 
> 赞同：4
> 
> 时间：2013-04-05T02:33:53.007
> 
> 标签：javascript, media-queries

是否有可能（如果可以）让媒体查询根据浏览器大小从 HTML 加载不同的 javascript 文件？

类似的东西？

```
<script media="screen and (max-width: 900px)" src="/js/menu_home.js"  type="text/javascript"></script> 
```

或者我在互联网上找到的类似的东西，但它没有加载任何一个文件

```
<script>
function require(path) {
  try{
    document.write('<script type="text/javascript" src="'+path+'"><\/script>');
  } catch(e) {
    var script = document.createElement('script');
    script.src = path;
    document.getElementsByTagName('head')[0].appendChild(script);
  }
}
if (isMedia("screen and (max-width:900px)"){
  require('/js/menu_home.js');
}
else {
  require('/js/menu_photo.js');
}
</script> 
```

在我的网站[http://www.kujawadesigns.com/web/where_art_thou/](http://www.kujawadesigns.com/web/where_art_thou/)上，我将其设置为加载不同的脚本文件，以允许手风琴菜单在正确的类别上展开。但是，我希望始终从移动版本中删除 expandfirst 类。如果你们建议我使用其他流程，请告诉我。

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T02:38:28.033

使用**matchmedia**，您可以仅在满足特定媒体查询条件时执行 JavaScript 块

```
<script>
    if (window.matchMedia('screen and (min-width: 600px)')){
      var head = document.getElementsByTagName("head")[0];
      s = document.createElement('script');
      s.setAttribute('type','text/javascript');
      s.setAttribute('src',jsname);
      head.insertBefore(s, head.firstChild);

    }
</script> 
```

参考：[http ://christianheilmann.com/2012/12/19/conditional-loading-of-resources-with-mediaqueries/](http://christianheilmann.com/2012/12/19/conditional-loading-of-resources-with-mediaqueries/)

注意：对于较旧/不受支持的 Web 浏览器，您可以尝试 matchMedia() polyfill，尽管它不支持 addListener。

# python - 如何使用 django 删除图像？

> ID：15824958
> 
> 赞同：1
> 
> 时间：2013-04-05T02:34:09.637
> 
> 标签：python, sql, django

我想知道如何在我的表单中添加删除按钮以删除图像。

该项目是一个简单的“图片查看器”，索引显示了所有存储的图像，但我想添加一个“x”图标来删除该特定图像。

这是我的代码。

**视图.py**

```
from django.shortcuts import render, redirect
from gallery.forms import ImageForm
from gallery.models import Image

def index(request, image_form=None):
    image_form = image_form or ImageForm(request.POST, request.FILES)
    if request.method == 'POST':
        if image_form.is_valid():
            new_image = Image(image=request.FILES['image_file'])
            new_image.save()
    # obtenemos el listado de imagenes registradas
    images_list = Image.objects.all().order_by('-id')
    return render(request, 'index.html', {
        'image_form' : image_form,
        'images_list' : images_list,

    }) 
```

**模型.py**

```
from django.db import models
from django.contrib import admin

class Image(models.Model):
    image = models.FileField(upload_to='static/gallery/%Y/%m/%d')

admin.site.register(Image) 
```

**表格.py**

```
from django import forms

class ImageForm(forms.Form):
    image_file = forms.FileField(
        label='choose a file',
        help_text = 'Max 2 megabytes'
    ) 
```

**index.html**（它显示图像列表）

```
<style>
    ul {list-style:none; width:800px;}
    ul li {float:left; margin:6px;}
</style>
<form action="./gallery" method="post" enctype="multipart/form-data">
    {% csrf_token %}
    <p> {{ image_form.non_field_errors }} </p>
    <p> {{ image_form.image_file.label_tag }} </p>
    <p> {{ image_form.image_file.help_text }} </p>
    <p>
        {{ image_form.image_file.errors }}

        {{ image_form.image_file }}
    </p>
    <p> <input type="submit" value="subir"> </p>
</form>

<h2>Im&aacute;genes</h2>
<ul>
{% for image in images_list %}
    <li>
        <img src="/{{ image.image }}" height="75" />
    </li>
{% endfor %}

</ul> 
```

我想在 index.html 上添加删除图像的删除按钮：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T02:50:47.237

网址.py

```
[.........]
url(
   r'^delete-image/(?P<id>\d+)/$', 
   'delete_image', 
   name="delete_image"
),
[.........] 
```

视图.py

```
def delete_image(request, id):
    image = Image.objects.get(pk=id).delete()
    return HttpResponseRedirect(reverse('app_name:url_name')) 
```

模板

```
<ul>
    {% for image in images_list %}
    <li>
        <img src="/{{ image.image }}" height="75" /> 
        <a href="{% url app_name:delete_image image.id %}">Delete</a>
    </li>
    {% endfor %}
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T03:12:05.337

### 视图.py

```
from django.views.generic.edit import DeleteView
from django.core.urlresolvers import reverse_lazy
from myapp.models import Image

class ImageDelete(DeleteView):
    model = Image
    success_url = reverse_lazy('index') 
```

### 网址.py

```
from myapp.views import index, ImageDelete

...
url(r'^image/(?P<id>\d+)/delete/$', ImageDelete.as_view(), name="image-delete"),
... 
```

### 索引.html

```
{% for image in images_list %}
    <li>
        <img src="/{{ image.image }}" height="75" />
        <a href="{% url 'myapp:image-delete' image.id %}">Delete</a>
    </li>
{% endfor %} 
```

# c# - 使用实体框架进行简单更新

> ID：15824961
> 
> 赞同：0
> 
> 时间：2013-04-05T02:34:25.700
> 
> 标签：c#, asp.net-mvc, linq, entity-framework

我有以下代码，我无法保存更改。我的方法的参数是一个字符串，其中包含我要在数据库中修改的产品的 RefCode，然后查询正在拉取应该修改的 BaseProduct。（我试图简化代码并将其设置为英文，因此我可能引入了一些语法错误，但在调试模式下的代码中，我从数据库中获取了所有信息）。Linq 查询中的“选择新”有什么问题吗？

```
public static void UpdateProduct(ViewProduct productToUpdate)
    {
        using (var context = new my_Entities())
        {
            var BaseProduct = (from prod in context.Product
                               where prod.Ref == productToUpdate.BaseProduct.RefPrd
                                      select new ViewBaseProduct
                                      {
                                          RefPrd = prod.Ref,
                                          DescrPrd = prod.DescrPrd,
                                          NormeCe = (bool)prod.NormeCE
                                      }).FirstOrDefault();

            if (BaseProduct != null)
            {
                //BaseProduct.NormeCe = false;
                BaseProduct = productToUpdate.BaseProduct;
                context.SaveChanges();
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T07:27:20.203

但是BaseProduct是一个ViewBaseProduct对象，ViewBaseProduct是一个实体类吗？它似乎是一个 ViewModel 类。

您必须获取 de Product 实体，修改他的字段并保存更改。您似乎只将更改应用于 ViewModel 类。

试试这个：

```
public static void UpdateProduct(ViewProduct productToUpdate)
{
    using (var context = new my_Entities())
    {
        var BaseProduct = (from prod in context.Product
                           where prod.Ref == productToUpdate.BaseProduct.RefPrd)
                          .FirstOrDefault();

        if (BaseProduct != null)
        {
            //BaseProduct.NormeCe = false;
            BaseProduct.field1 = productToUpdate.BaseProduct.field1;
            BaseProduct.field2 = productToUpdate.BaseProduct.field2;

            //update the necesary fields
            //......
            context.SaveChanges();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T02:45:08.053

这不会那样工作。您应该使用以下`CurrentValues.SetValues()`方法：

```
contexte.Entry(BaseProduct).CurrentValues.SetValues(productToUpdate.BaseProduct); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T04:42:34.200

我想你必须试试这个

```
public static void UpdateProduct(ViewProduct productToUpdate)
    {
        using (var contexte = new my_Entities())
        {
            var BaseProduct = (from prod in contexte.Product
                               where prod.Ref == productToUpdate.BaseProduct.RefPrd
                                      select new ViewBaseProduct
                                      {
                                          RefPrd = prod.Ref,
                                          DescrPrd = prod.DescrPrd,
                                          NormeCe = (bool)prod.NormeCE
                                      }).FirstOrDefault();

            if (BaseProduct != null)
            {
                BaseProduct.BaseProduct.RefPrd=productToUpdate.BaseProduct.RefPrd
                BaseProduct.BaseProduct.DescrPrd=productToUpdate.BaseProduct.DescrPrd
                BaseProduct.BaseProduct.NormeCE==(bool)productToUpdate.BaseProduct.NormeCE
                contexte.SaveChanges();
            }
        }
} 
```

# asp.net - 使用datalist时如何更改表格布局？

> ID：15824964
> 
> 赞同：1
> 
> 时间：2013-04-05T02:34:38.977
> 
> 标签：asp.net, .net, css, datalist

使用 datalist 时如何更改表格布局。下面是我用来填充数据的 aspx，但我得到的结果如示例 1 所示。由于表格布局，没有继续显示数据？怎样才能达到如例2所示的结果？

我需要使用数据列表，因为我使用的是中继器中不可用的重复列。

![在此处输入图像描述](https://i.stack.imgur.com/30OUb.png)

象素：

```
<asp:DataList ID="dl_Groups" RepeatColumns="2"  runat="server" 
    OnItemDataBound="dl_Groups_ItemDataBound" RepeatDirection="vertical" 
    ShowFooter="False" ShowHeader="False">
    <ItemTemplate>
       <asp:CheckBox runat="server" ID="chk_Group" Text='<%# Eval("category_type") %>' 
            Value='<%# Eval("service_type_category_id") %>' onclick="OnGroupClick" />
       <asp:CheckBoxList runat="server" ID="chkServiceType" Style="padding-left: 20px" 
            DataValueField="ServiceTypeID" DataTextField="Name" EnableViewState="true">
       </asp:CheckBoxList>
       <br />
    </ItemTemplate>
</asp:DataList> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T04:56:08.100

你有没有浏览过 CheckBoxList 的这些属性

```
 RepeatColumns="2"
  RepeatDirection="Vertical"
  RepeatLayout="Table" 
```

这些可能对您有帮助。

您还可以享受`css`
以下优惠

```
#chkServiceType tr{
display:inline-block;
margin-right:20px;
} ​

#chkServiceType tr label{
margin-left:5px;
} 
```

# c - 将 bsearch 与字符串数组一起使用时遇到问题

> ID：15824966
> 
> 赞同：5
> 
> 时间：2013-04-05T02:34:49.550
> 
> 标签：c, bsearch

尝试在 C 中的字符串数组上使用 c 内置 bsearch 时，我遇到了一些令人困惑的行为。这是代码。我知道您可以使用内置的 strcmp 来搜索字符串数组，但我将 myStrCmp 包括在内以用于调试目的，因为我不知道它为什么不起作用。

```
const char *stateNames[] = {"Alabama", "Alaska", "Arizona", "Arkansas", "California", "Colorado", "Connecticut", "Delaware", "Florida", "Georgia", "Hawaii", "Idaho", "Illinois", "Indiana", "Iowa", "Kansas", "Kentucky", "Louisiana", "Maine", "Maryland", "Massachusetts", "Michigan", "Minnesota", "Mississippi", "Missouri", "Montana", "Nebraska", "Nevada", "New Hampshire", "New Jersey", "New Mexico", "New York", "North Carolina", "North Dakota", "Ohio", "Oklahoma", "Oregon", "Pennsylvania", "Rhode Island", "South Carolina", "South Dakota", "Tennessee", "Texas", "Utah", "Vermont", "Virginia", "Washington", "Washington DC", "West Virginia", "Wisconsin", "Wyoming"};

int myStrCmp(const void *s1, const void *s2) {
  printf("myStrCmp: s1(%p): %s, s2(%p): %s\n", s1, (char *)s1, s2, (char *)s2);
  return strcmp(s1, s2);
}

int determineState(char *state) {
  printf("state: %s\n", state);
  for(int i = 0; i < 51; i++) 
    printf("stateNames[%i](%p): %s\n", i, &(stateNames[i]), stateNames[i]);

  char *found = (char *) bsearch(state, stateNames, 51, sizeof(char *), myStrCmp );

  if(found == NULL)
    return -1;

  return 0;
} 
```

这是调用此函数以查找 Alabama 时的一些输出。

```
stateNames[0](0x618440): Alabama
stateNames[1](0x618448): Alaska
stateNames[2](0x618450): Arizona
...
stateNames[24](0x618500): Missouri
stateNames[25](0x618508): Montana
stateNames[26](0x618510): Nebraska
stateNames[27](0x618518): Nevada
stateNames[28](0x618520): New Hampshire
stateNames[29](0x618528): New Jersey
stateNames[30](0x618530): New Mexico
stateNames[31](0x618538): New York
stateNames[32](0x618540): North Carolina
stateNames[33](0x618548): North Dakota
stateNames[34](0x618550): Ohio
stateNames[35](0x618558): Oklahoma
stateNames[36](0x618560): Oregon
stateNames[37](0x618568): Pennsylvania
stateNames[38](0x618570): Rhode Island
stateNames[39](0x618578): South Carolina
stateNames[40](0x618580): South Dakota
stateNames[41](0x618588): Tennessee
stateNames[42](0x618590): Texas
stateNames[43](0x618598): Utah
stateNames[44](0x6185a0): Vermont
stateNames[45](0x6185a8): Virginia
stateNames[46](0x6185b0): Washington
stateNames[47](0x6185b8): Washington DC
stateNames[48](0x6185c0): West Virginia
stateNames[49](0x6185c8): Wisconsin
stateNames[50](0x6185d0): Wyoming
myStrCmp: s1(0x415430): Alabama, s2(0x618508): 
                                               UA
myStrCmp: s1(0x415430): Alabama, s2(0x618570): A
myStrCmp: s1(0x415430): Alabama, s2(0x618540): PUA
myStrCmp: s1(0x415430): Alabama, s2(0x618528): 1UA
myStrCmp: s1(0x415430): Alabama, s2(0x618538): GUA
myStrCmp: s1(0x415430): Alabama, s2(0x618530): <UA 
```

如您所见，bsearch 在其搜索过程中访问的位置应该具有有效的字符串（正如在调用 bsearch 之前刚刚检查过的那样），但是如果您尝试在该位置打印 char *，则输出是垃圾。谁能看到我的错误？顺便说一句，当我调用 bsearch 并将最终参数设置为：

```
(int(*)(const void*, const void*))strcmp 
```

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-05T02:37:02.240

由于您使用的是 , 数组`const char *`，`bsearch()`因此会将指向这些元素的指针传递给比较函数。换句话说，它将`const char * const *`在它的第二个参数中接收。

```
int myStrCmp(const void *s1, const void *s2) {
  const char *key = s1;
  const char * const *arg = s2;
  printf("myStrCmp: s1(%p): %s, s2(%p): %s\n", s1, key, s2, *arg);
  return strcmp(key, *arg);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-21T18:44:43.360

您的状态名称（或键）需要是指向指针的指针。不必在`const`任何地方添加/删除。 `myStrCmp`需要取消引用以比较字符串。下面的代码可以满足我的想法。如果没有请告诉我，谢谢。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

const char *stateNames[] = {"Alabama", "Alaska", "Arizona", "Arkansas","California", "Colorado", "Connecticut", "Delaware", "Florida","Georgia", "Hawaii", "Idaho", "Illinois", "Indiana", "Iowa", "Kansas", "Kentucky", "Louisiana", "Maine", "Maryland", "Massachusetts", "Michigan", "Minnesota", "Mississippi", "Missouri", "Montana", "Nebraska", "Nevada", "New Hampshire", "New Jersey", "New Mexico", "New York", "North Carolina", "North Dakota", "Ohio", "Oklahoma", "Oregon", "Pennsylvania", "Rhode Island", "South Carolina", "South Dakota", "Tennessee", "Texas", "Utah", "Vermont", "Virginia", "Washington", "Washington DC", "West Virginia", "Wisconsin", "Wyoming"};

int myStrCmp(const void *s1, const void *s2) {
    printf("myStrCmp: s1(%p): %s, s2(%p): %s\n", s1, *(char **)s1, s2, *(char**)s2);
    return strcmp(*(char **) s1, *(char **) s2);
}

int determineState(char *state) {
    printf("state: %s\n", state);

    for(int i = 0; i < 51; i++)
        printf("stateNames[%i](%p): %s\n", i, &(stateNames[i]), stateNames[i]);

    char **found = (char **) bsearch(&state, stateNames, 51, sizeof(char *), myStrCmp );

    if(found == NULL){
        return -1;
    } else {
        printf("Found it!: %s\n", *found);

    }

    return 0;
}

int main(int argc, const char * argv[]) {
    determineState("Alabama");

} 
```

# c# - DataTable.ImportRow 没有添加行

> ID：15824967
> 
> 赞同：8
> 
> 时间：2013-04-05T02:34:53.670
> 
> 标签：c#, datatable

我正在尝试制作一个 DataTable，然后向其中添加几行。这是我的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Data;

namespace thisNamespace
{
    class Program
    {
        static void Main(string[] args)
        {
            DataTable dt=new DataTable();
            dt.Columns.Add("XYZID");
            DataRow dr=dt.NewRow();
            dr["XYZID"]=123;
            dt.ImportRow(dr);
            dr["XYZID"] = 604303;
            dt.ImportRow(dr);

        }
    }
} 
```

当我单步执行程序时，`dr`成功初始化并填充了值，但是之后`ImportRow(dr)`，行数`dt`仍然为 0。我觉得我必须遗漏一些明显的东西。这里出了什么问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-02-26T12:24:50.963

如果该行被分离（就像它第一次创建时一样） ImportRows 静默失败（没有例外） - 为了能够导入行，您必须将其添加到表中。之后，您可以将其导入其他表。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-05T03:18:08.613

试试这个代码：

`dt.Rows.Add(dr)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T04:19:04.450

它可以帮助你

```
DataTable table = new DataTable();
table.Columns.Add("Dosage", typeof(int));
    table.Columns.Add("Drug", typeof(string));
    table.Columns.Add("Patient", typeof(string));
    table.Columns.Add("Date", typeof(DateTime));

    //
    // Here we add five DataRows.
    //
    table.Rows.Add(25, "Indocin", "David", DateTime.Now);
    table.Rows.Add(50, "Enebrel", "Sam", DateTime.Now);
    table.Rows.Add(10, "Hydralazine", "Christoff", DateTime.Now);
    table.Rows.Add(21, "Combivent", "Janet", DateTime.Now);
    table.Rows.Add(100, "Dilantin", "Melanie", DateTime.Now); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T08:30:16.290

您首先需要添加行：

```
 dt.Rows.Add(dr); 
```

然后你必须调用下面的方法来提交它：

```
 dt.AcceptChanges(); 
```

# c# - c# 中的声明是分配内存还是分配内存的 new 运算符？

> ID：15824971
> 
> 赞同：2
> 
> 时间：2013-04-05T02:35:17.563
> 
> 标签：c#, initialization, operator-keyword

c# 中的声明是为要创建的变量分配内存还是 new 运算符分配内存并允许调用构造函数来初始化内存中分配的变量？

据我了解，没有 new 运算符就不能调用任何类型的构造函数。我对么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-05T03:43:43.437

> c# 中的声明是否为要创建的变量分配内存，或者是分配内存并允许调用讲师初始化内存中分配的变量的 new 运算符？

首先，让我们确保你问的是你认为你在问的问题。对于一个值类型，变量存储位置和值存储位置是*同一个 storage*。对于引用类型，与*变量*关联的存储位置包含对与*对象*关联的存储位置的*引用*。那些是完全不同的。

 *其次，让我们澄清一下“变量”的“声明”是什么意思。静态字段、实例字段、局部变量和形参都有声明。此外，如果局部变量和形参是封闭的 lambda 的外部局部变量，则它们的分配语义是不同的，当局部变量位于异步方法或迭代器块中时，语义也不同。

所以让我们假设你有一个引用类型的局部变量，并且对局部没有什么特别的：

```
void M() { 
    Animal x = new Giraffe();  ... 
```

当激活方法 M() 时，局部变量 x 的存储位置从短期存储（通常是堆栈或寄存器）中分配出来。

当评估“new Giraffe()”时，运行时会在长期存储（GC 堆）上为 Giraffe 分配内存，然后将对该对象的引用传递给构造函数。当构造函数返回时，引用然后分配给本地。

所以有*两个*存储位置。x 有一个短期位置，它只在方法激活时存在，并且有被引用的东西的长期存储，并且一直存在到垃圾收集器清理它为止。

如果这不能回答您的问题，请澄清您的问题。

> 你可以在没有 new 运算符的情况下调用构造函数吗？

我假设“构造函数”是指实例构造函数而不是静态构造函数。

不是通过任何“正常”的方式，不。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T02:39:15.373

没有规范的声明在 C# 中为 (object)null 分配内存...

```
string x;
// x = null in memory

string x = "";
// x = string in memory with value.

MyObjectType x;
// x = null;

MyObjectType x = new MyObjectType();
// x = MyObjectType in memory. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T02:45:37.653

引用类型的声明只占用引用空间，直到您使用 new 关键字创建对象。值类型也是如此

所以如果你有：

```
string s; // only reference type memory, which is based on the machine architecture. 
```

如果你有：

```
string s = "some string"; // reference (pointer) + memory allocated on the heap. 
```

值类型几乎相同，但是，它们的内存是在声明值类型的地方内联分配的。

你是对的，除非实例化/创建了该类型的对象，否则你不能在任何类型上调用构造函数。*

# xml - xml重复元素的最佳实践

> ID：15824975
> 
> 赞同：2
> 
> 时间：2013-04-05T02:36:18.493
> 
> 标签：xml, repeat

如本例所示重复 xml 元素是否可以接受？请注意，在第一个示例中，'period_data' 元素是如何直接在 'usage_history' 元素内重复的，而没有首先被包裹在类似于 'periods' 父元素的东西中。

最初，在我看来，将“periods”父元素包含在内似乎是多余的，因为无论如何，“usage_history”父元素中唯一的东西就是“period_data”元素。

谢谢你。

```
<usage_history num_periods="2">
    <period_data billing_year="2013" billing_period="2">
        content...
    </period_data>
    <period_data billing_year="2013" billing_period="1">
        content...
    </period_data>
</usage_history> 
```

与此相反...

```
<usage_history>
    <periods num_periods="2">
        <period_data billing_year="2013" billing_period="2">
            content...
        </period_data>
        <period_data billing_year="2013" billing_period="1">
            content...
        </period_data>
    </periods>
</usage_history> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T03:40:47.860

是的。没事儿。不需要额外的封闭元素。

我也会说这`num_periods="2"`是错误的，因为`period_data`元素应该自己解释。

# uitableview - 搜索显示控制器表格视图

> ID：15824976
> 
> 赞同：0
> 
> 时间：2013-04-05T02:36:22.920
> 
> 标签：uitableview, interface-builder, uisearchdisplaycontroller

我有一个搜索栏和搜索显示控制器，我从界面生成器右侧的对象列表中拖动。我将此对象放在 DetailViewController 的视图上。我将委托设置为 DetailViewController。我在 DetailViewController 中有代码，用于向在搜索栏中键入文本时显示的 tableview 提供搜索结果的 NSArray。基本上，搜索栏位于 Master/Detail 视图的 DetailView 顶部...。

除了如何访问 tableview 以便我可以在 Interface Builder 故事板中以图形方式设计 tableview 和单元格之外，一切都工作正常？我希望尽可能避免以编程方式设计视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T02:49:55.810

在您的应用程序运行并进行搜索之前，搜索显示控制器的表格视图不存在！所以在那之前没有什么可以设计的。您不能设置搜索显示控制器的`searchResultsTableView`; 你只能阅读它，所以显然你必须在代码中做到这一点。

# javascript - AJAX 捕捉到“失败”和“取消”向另一个域发送请求之间的区别

> ID：15824979
> 
> 赞同：4
> 
> 时间：2013-04-05T02:36:54.117
> 
> 标签：javascript, ajax, google-chrome

我正在向另一个域上的服务器发出 ajax 请求，但我实际上并不需要它的响应，只是为了知道它得到了我的请求。当一切正常时，在 Chrome 开发者工具（标题状态）中显示“已取消”，控制台显示“XMLHttpRequest 无法加载”，但服务器收到了我的请求。当服务器关闭时，标头状态不是数字，而只是“失败”。试图在 JS 上捕捉到这一关键差异，我在这两种情况下都得到了 XHR 状态 0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T02:51:33.313

*我正在向另一个域上的服务器发出 ajax 请求*

[由于同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)，您无法向其他域发出 ajax 请求。您想查看 JSONP，它本质上为远程 URL 写出一个`<script>`标签。

[JSONP 到底是什么？](https://stackoverflow.com/questions/2067472/what-is-jsonp-all-about)

使用 JSONP 调用检测成功/错误很棘手，它根本不像典型的 ajax 调用那样工作。理想情况下，您希望远程服务器在您的页面上调用回调函数，如上面的链接所述。

如果您不控制其他域，则可以尝试使用超时来检测错误。[这是一篇](https://stackoverflow.com/questions/4138470/jquery-getjson-with-timeout)讨论 jQuery 超时参数的帖子，尽管您当然也可以使用原始 javascript 实现自己的超时。

# mysql - Infobubble 仅显示通过 PHP/Mysql 添加的最后一个标记的内容，带有选项卡

> ID：15824983
> 
> 赞同：0
> 
> 时间：2013-04-05T02:37:27.430
> 
> 标签：mysql, google-maps-api-3, infobubble

我一直在尝试让 Infobubbles 使用地图上的 2 个选项卡，该地图上填充了来自 Mysql 数据库的标记和 ajax 调用。

问题是每个 infobubble 在选项卡中显示相同的内容，从添加的最后一个标记开始。这是整个js脚本，非常感谢任何帮助。

```
 var script = '<script type="text/javascript" src="http://google-maps-' +
      'utility-library-v3.googlecode.com/svn/trunk/infobubble/src/infobubble';
  script += '.js"><' + '/script>';
  document.write(script);

var customIcons = { 
  free: { 
    icon: 'http://labs.google.com/ridefinder/images/mm_20_blue.png', 
    animation: google.maps.Animation.DROP,
    shadow: 'http://labs.google.com/ridefinder/images/mm_20_shadow.png' 
  }, 
  paid: { 
    icon: 'http://labs.google.com/ridefinder/images/mm_20_red.png', 
    animation: google.maps.Animation.DROP,
    shadow: 'http://labs.google.com/ridefinder/images/mm_20_shadow.png' 
  } 
}; 

// End Custom Icons 

 var map, infoBubble; 

function initialize() { 
    var myOptions = { 
      zoom: 13, 
      mapTypeId: google.maps.MapTypeId.ROADMAP 
    }; 
    map = new google.maps.Map(document.getElementById('map'), 
        myOptions); 

    // Try HTML5 geolocation 
    if(navigator.geolocation) { 
      navigator.geolocation.getCurrentPosition(function(position) 
        { 
        var pos = new google.maps.LatLng(position.coords.latitude,position.coords.longitude); 

        var marker = new google.maps.Marker({ 
          map: map, 
          position: pos, 
                      icon:'images/markers/you.png', 
                      animation: google.maps.Animation.DROP, 
          title: 'Your Location.' 
        }); 

    infoBubble = new InfoBubble({
      maxWidth: 300,
      borderRadius: 10,
      borderWidth: 1,
      borderColor: '#2c2c2c',
      shadowStyle: 1
    });

  var infoWindow = new google.maps.InfoWindow; 

  // Change this depending on the name of your PHP file 
  downloadUrl("phpsqlajax_genxml.php", function(data) {
    var xml = data.responseXML; 
    var markers = xml.documentElement.getElementsByTagName("marker"); 
    for (var i = 0; i < markers.length; i++) 
    { 
        var name = markers[i].getAttribute("name"); 
        var address = markers[i].getAttribute("address"); 
        var citystate = markers[i].getAttribute("citystate"); 
        var phone = markers[i].getAttribute("phone"); 
        var type = markers[i].getAttribute("type");  
        var point = new google.maps.LatLng( 
          parseFloat(markers[i].getAttribute("lat")), 
          parseFloat(markers[i].getAttribute("lng"))); 
        var html = "<b>" + name + "</b> <br/>" + address + "<br/>" + citystate + "<br/>" + phone;  //html inside InfoWindow 
        var description = "<b>" + name + "</b> <br/>" + address + "<br/>" + citystate + "<br/>" + phone;  //html inside InfoWindow
        var icon = customIcons[type] || {}; 
        var marker = new google.maps.Marker({ 
            map: map, 
            position: point, 
            icon: icon.icon, 
            shadow: icon.shadow,
            animation: google.maps.Animation.DROP
        }); 
        bindInfoWindow(marker, map, infoBubble, html, description); 
    } 
    infoBubble.addTab('Tab 1', html);
    infoBubble.addTab('Tab 2', description);

  }); 

        map.setCenter(pos); 
      }, function() { 
        handleNoGeolocation(true); 
      }); 
    } else { 
      // Browser doesn't support Geolocation 
      handleNoGeolocation(false); 
    } 
  } 

  function handleNoGeolocation(errorFlag) { 
    if (errorFlag) { 
      var content = 'Error: The Geolocation service failed.'; 
    } else { 
      var content = 'Error: Your browser doesn\'t support geolocation.'; 
    } 

    var options = { 
      map: map, 
      position: new google.maps.LatLng(60, 105), 
      content: content 
    }; 

    var infoBubble = new google.maps.infoBubble(options); 
    map.setCenter(options.position); 
  } 

// Additional functions related to the DB Listing function 

function bindInfoWindow(marker, map, infoBubble, html) { 
  google.maps.event.addListener(marker, 'click', function() { 
    //infoBubble.setContent(html); 
    infoBubble.open(map, marker);
  }); 
} 

function downloadUrl(url, callback) { 
  var request = window.ActiveXObject ? 
      new ActiveXObject('Microsoft.XMLHTTP') : 
      new XMLHttpRequest; 

  request.onreadystatechange = function() { 
    if (request.readyState == 4) { 
      request.onreadystatechange = doNothing; 
      callback(request, request.status); 
    } 
  }; 

  request.open('GET', url, true); 
  request.send(null); 
} 

function doNothing() {} 

  function addTab() {
    var title = document.getElementById('tab-title').value;
    var content = document.getElementById('tab-content').value;

    if (title != '' && content != '') {
      infoBubble.addTab(title, content);
    }
  }
  google.maps.event.addDomListener(window, 'load', initialize); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:03:39.180

根据标记设置内容的代码被注释掉：

```
//infoBubble.setContent(html); 
```

因此，始终显示最后创建的信息窗口的内容。

[工作示例，包括选项卡内容](http://www.geocodezip.com/v3_SO_infoBubbleTabbedContent.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-16T10:53:11.207

谷歌地图信息窗口中的 Q 问题单击标记单击下一个标记时，它会打开带有选项卡的信息窗口，但是当再次单击下一个标记时，它会打开带有选项卡的信息窗口，但之前的选项卡没有关闭，这是代码

google.maps.event.addListener(marker, 'click', (function(marker, contentString) { return function() {

```
 infoBubble.addTab('Tab 1', contentString);
                          infoBubble.addTab('Tab 2', contentString12);
                          infoBubble.setContent(contentString); 
                          infoBubble.close('Tab 1', contentString);
                          infoBubble.open(map,marker); 
```

# java - 卡片构造器

> ID：15824984
> 
> 赞同：0
> 
> 时间：2013-04-05T02:37:40.063
> 
> 标签：java, constructor

我对如何正确制作这门课感到很困惑。我不知道如何使用所有这些混合值创建一个 ArrayList ......任何帮助将不胜感激。

```
public StandardCardImpl(Suit suit, int rank, StandardCardImpl deck) {
    face_up = false;

List<Card> cards = new ArrayList<Card>(DeckSize);
        cards.add(suit,rank,deck);

    if (rank < 1 || rank > KING) {
        throw new RuntimeException("Rank is out of range for standard card");
    }
    Iterator iterator = cards.iterator();
    this.suit = suit;
    this.rank = rank;
    this.deck = deck;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T02:42:40.343

也许你想要下面的？

```
cards.add(new Card(suit,rank,deck)); 
```

即用适当的成员创建一个新`Card`对象，然后将其添加到数组列表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T03:04:37.973

重来。什么是`Card`？它是一个有等级和西装的对象。所以你需要：

1.  一套`enum`名为西装。
2.  等级的一系列数字。可能是 2 到 14（10，Jack，Queen，King，Ace）。
    *   或者一个枚举：两个、三个、...、ACE。那可能有点多。
3.  一个`Card`有西装和等级的班级。

`Card`不应该有二传手，因为您不希望玩家在拥有一张牌时更换一张牌。所以，

```
public class Card {
    private final Suit suit;
    private final int rank;
    public Card(final Suit suit, final int rank) {
        this.suit = suit;
        this.rank = rank;
    }
    // Getters, toString, equals, hashCode, formatting for humans, etc.
} 
```

现在，您需要构建一个甲板。一副牌应该包含一张卡片列表，并且你必须能够洗牌。您可以将其设为`ArrayList<Card>`，但我会将其设为包含此类列表的对象，因为卡片组具有行为。`deck.deal()`比做`deal`内联的事情更清楚。

```
public class Deck {
    private List<Card> cards = new ArrayList<>();
    public Deck() {
        for (Suit suit: Suit.values()) {
            for (int rank = 2; rank <= ACE; rank ++) {
                cards.add(new Card(suit, rank));
            }
        }
        Collections.shuffle(cards);  // Perhaps use your own Random too.
    }
    public synchronized Card deal() {
        Card dealt = cards.get(0);
        cards.remove(0);
        return dealt;
    }
} 
```

这里有各种各样的设计决策要做。

1.  Rank 也应该是一个枚举吗？它使 for 循环更容易。
2.  构建甲板应该在`Deck`班级内部吗？假设您不仅要处理扑克和桥牌，还要处理 pinochle 或 bezique，其中每个花色中有 2 个 Ace-9。
3.  改组是否应该与加密质量的 RNG 相关联？
4.  您应该使用 a`Stack`还是`Deque`代替 a `ArrayList`？ `Stack`可能更清楚，而`Deque`s 不能被洗牌。
5.  你有一张牌面朝上或朝下的想法。那是一个补充。玩纸牌？
6.  如果甲板是空的，该怎么`deal`办？这是使用堆栈的一个很好的理由。

# html - Grails 渲染标签和 message.properties

> ID：15824986
> 
> 赞同：0
> 
> 时间：2013-04-05T02:37:58.283
> 
> 标签：html, grails, internationalization

我正在使用 g:render grails 标签来避免在我的应用程序中重复 HTML 的公共部分以重复。现在我需要在其中的一些中通过 message.properties 文件传递​​一些属性，例如部分的标题，以便可以翻译这些属性。为了使它工作，我使用了这个结构：

```
 <g:set var="title" value="${g.message (code: 'completed.thanks')}" />
 <g:render template="thankYou" contextPath="/completed/" model="[title:title,other:other]" /> 
```

但我想知道是否有更好的解决方案可以在渲染标签本身的模型中提供字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T08:06:17.650

如果传递的属性很多，这种方法就不是最好的了。在这种情况下，我建议使用 customTaglib 重新创建 g:message 的 custo 实现。例如，此自定义 gMessage 可以通过约定查找以模型参数为前缀的属性。比在 gsp 的渲染中你只能在模型中设置前缀字符串。

```
 <g:render template="thankYou" contextPath="/completed/" model="[prefix: 'pagex']" /> 
```

在您的模板 gsp 中：

```
...
<custom:message code="completed.thanks" prefix="${prefix}"/>
<custom:message code="completed.byebye" prefix="${prefix}"/>
... 
```

在属性文件中

```
pagex.thanks=bla bla bla
pagex.byebye=bla bla bla
pagey.thanks=bla bla bla
pagey.byebye=bla bla bla 
```

# c# - 将 Windows 用户控件添加到 WPF 视图

> ID：15824994
> 
> 赞同：1
> 
> 时间：2013-04-05T02:38:52.960
> 
> 标签：c#, wpf, winforms, user-controls

我需要将 Windows 窗体用户控件 (Barcode_Scanner.cs) 添加到 WPF 视图 (MainWindow.xaml)

有没有一种简单的方法可以做到这一点？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T02:55:45.143

您可以使用 WPF元素承载`Windows.Forms`控件。`WindowsFormsHost`

例子：

```
<Window x:Class="WpfApplication10.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:winforms="clr-namespace:System.Windows.Forms;assembly=System.Windows.Forms"
        xmlns:myControls="clr-namespace:MyContromNamespace;assembly=MyContromNamespace"
        Title="MainWindow" Height="195" Width="191" Name="UI">
    <Grid>
        <WindowsFormsHost>
            <winforms:Button Text="StackOverflow" />
        </WindowsFormsHost>

        <WindowsFormsHost>
            <myControls:MyUserControl  />
        </WindowsFormsHost>

    </Grid>
</Window> 
```

结果：

![在此处输入图像描述](https://i.stack.imgur.com/xK3gm.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T02:54:48.310

你可以用[WindowsFormsHost](http://msdn.microsoft.com/en-us/library/system.windows.forms.integration.windowsformshost%28v=vs.90%29.aspx)

所以我们需要做的第一件事（在创建一个新的 WPF 项目之后）是添加一些引用。您可以通过右键单击解决方案资源管理器中的引用文件夹并选择“添加引用”来执行此操作：

![在此处输入图像描述](https://i.stack.imgur.com/FTc4u.png)

然后你会得到一个这样的对话框：

![在此处输入图像描述](https://i.stack.imgur.com/oMB8m.png)

[等等 wpf-tutorial-using-winforms-in-wpf](http://tech.pro/tutorial/786/wpf-tutorial-using-winforms-in-wpf)

# c# - 如何使用 Selenium Webdriver .NET 绑定设置 Chrome 首选项？

> ID：15824996
> 
> 赞同：18
> 
> 时间：2013-04-05T02:39:09.717
> 
> 标签：c#, google-chrome, selenium, webdriver, selenium-webdriver

这是我正在使用的，可以成功设置用户代理，而下载首选项不能。

Windows 7、Chrome 26、Selenium-dotnet-2.31.2、chromedriver_win_26.0.1383.0

```
ChromeOptions chromeOptions = new ChromeOptions();
var prefs = new Dictionary<string, object> {
    { "download.default_directory", @"C:\code" },
    { "download.prompt_for_download", false }
};
chromeOptions.AddAdditionalCapability("chrome.prefs", prefs);
chromeOptions.AddArgument("--user-agent=" + "some safari agent");
var driver = new ChromeDriver(chromeOptions); 
```

取自 chromedriver.log：

```
[1.201][FINE]:      Initializing session with capabilities {

   "browserName": "chrome",

   "chrome.prefs": {

      "download.default_directory": "C:\\code",

      "download.prompt_for_download": false

   },

   "chrome.switches": [ "--user-agent=Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/534.57.2 (KHTML, like Gecko) Version..." ],

   "chromeOptions": {

      "args": [ "--user-agent=Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/534.57.2 (KHTML, like Gecko) Version..." ],

      "binary": "",

      "extensions": [  ]

   },

   "javascriptEnabled": true,

   "platform": "WINDOWS",

   "version": ""

} 
```

检查临时首选项文件在`*temp\Google\Chrome\User Data\Default\Preferences`, no`"default_directory"`和`"prompt_for_download"`已设置。

```
 "download": {
      "directory_upgrade": true
   }, 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2014-08-01T23:27:04.943

如果您已更新到 Chrome 版本 36.0.x 和 Selenium 2.42，则 Martins 解决方案不再有效。

好像已经更新了。您现在可以使用以下代码

```
ChromeOptions options = new ChromeOptions();
options.AddUserProfilePreference(string preferenceName, object preferenceValue); 
```

我目前使用它将我的打印机设置更改为“另存为 PDF”，而不是使用此代码作为示例的默认设置

```
ChromeOptions options = new ChromeOptions();
options.AddUserProfilePreference("printing.print_preview_sticky_settings.appState", "{\"version\":2,\"isGcpPromoDismissed\":false,\"selectedDestinationId\":\"Save as PDF\"); 
```

我认为马丁的解决方案非常好和准确，但它突然对我不起作用，所以我自然要看看我是否能找到解决方案。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-08-12T19:53:27.387

Selenium dotNet 驱动程序不支持设置`chrome.prefs`开箱即用。问题是`chrome.prefs`必须定义为`prefs`在`chromeOptions`节点下。该类`ChromeOptions`不包含此变量，因此您需要创建自己的`ChromeOptions`类：

```
public class ChromeOptionsWithPrefs: ChromeOptions
{
    public Dictionary<string,object> prefs { get; set; }
}

public static void Initialize()
{
    var options = new ChromeOptionsWithPrefs();
    options.prefs = new Dictionary<string, object>
    {
        { "intl.accept_languages", "nl" }
    };
    _driver = new ChromeDriver(@"C:\path\chromedriver", options);
} 
```

# c++ - 无法通过 Windows UDP 套接字发送数据：错误代码 10035

> ID：15824997
> 
> 赞同：0
> 
> 时间：2013-04-05T02:39:12.810
> 
> 标签：c++, sockets

我正在尝试通过套接字从在同一 Windows 7 pc 上运行的另一个程序接收程序的数据。为此，我制作了两个单独的程序，一个用于发送，另一个用于接收。发送程序显示成功，但接收程序无限期等待。当我将接收套接字置于非阻塞模式时，我收到错误代码 10035，即资源不可用。有没有我必须做的任何系统设置，比如防火墙或任何事情。虽然在禁用防火墙后我得到了同样的错误。我搜索了 stackoverflow.com 但无法解决我的问题。我在下面给出了发送和接收功能的代码。 **对于发送功能：**

```
#include "stdafx.h"
#ifndef UNICODE
#define UNICODE
#endif
#define WIN32_LEAN_AND_MEAN
#include <winsock2.h>
#include <Ws2tcpip.h>
#include <stdio.h>
// Link with ws2_32.lib
#pragma comment(lib, "Ws2_32.lib")
using namespace System;
int main(array<System::String ^> ^args)
{   
    char ch;
    int iRun =1;
    int iResult;
    WSADATA wsaData;
    SOCKET SendSocket = INVALID_SOCKET;
    sockaddr_in RecvAddr;
    unsigned short Port = 51234;
    char SendBuf[1024]="Testing";
    int BufLen = 1024;
    //----------------------
    // Initialize Winsock
    iResult = WSAStartup(MAKEWORD(2, 2), &wsaData);
    if (iResult != NO_ERROR) {
        wprintf(L"WSAStartup failed with error: %d\n", iResult);
        return 1;
    }
    //---------------------------------------------
    // Create a socket for sending data
    SendSocket = socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP);
    if (SendSocket == INVALID_SOCKET) {
        wprintf(L"socket failed with error: %ld\n", WSAGetLastError());
        WSACleanup();
        return 1;
    }
    //---------------------------------------------
    // Set up the RecvAddr structure with the IP address of
    // the receiver (in this example case "178.0.0.100")
    // and the specified port number.
    RecvAddr.sin_family = AF_INET;
    RecvAddr.sin_port = htons(Port);
    RecvAddr.sin_addr.s_addr = inet_addr("178.0.0.100");
    //---------------------------------------------
    // Send a datagram to the receiver
    wprintf(L"Sending a datagram to the receiver...\n");
    while(iRun) {
        iResult = sendto(SendSocket,
                     SendBuf, BufLen, 0, (SOCKADDR *) & RecvAddr, sizeof (RecvAddr));
       if (iResult == SOCKET_ERROR) {
        wprintf(L"sendto failed with error: %d\n", WSAGetLastError());
        //closesocket(SendSocket);
        //WSACleanup();
        //return 1;
    }
        wprintf(L"send success :data bytes: %d\n", iResult);
    } 
    //---------------------------------------------
    // When the application is finished sending, close the socket.
    wprintf(L"Finished sending. Closing socket.\n");
    iResult = closesocket(SendSocket);
    if (iResult == SOCKET_ERROR) {
        wprintf(L"closesocket failed with error: %d\n", WSAGetLastError());
        WSACleanup();
        return 1;
    }
    //---------------------------------------------
    scanf("enter any number to terminate %c",&ch);
    // Clean up and quit.
    wprintf(L"Exiting.\n");
    WSACleanup();
    return 0;   
    //Console::WriteLine(L"Hello World");
    //return 0;
} 
```

**对于接收功能**

```
#include "stdafx.h"    
#ifndef UNICODE
#define UNICODE
#endif    
#define WIN32_LEAN_AND_MEAN    
#include <winsock2.h>
#include <Ws2tcpip.h>
#include <stdio.h>    
// Link with ws2_32.lib
#pragma comment(lib, "Ws2_32.lib")    
using namespace System;    
int main(array<System::String ^> ^args)
{
    char ch;
    int iRun =1;
    int iResult = 0;    
    WSADATA wsaData;
    DWORD nonBlocking =1;    
    SOCKET RecvSocket;
    sockaddr_in RecvAddr;    
    unsigned short Port = 51234;    
    char RecvBuf[1024];
    int BufLen = 1024;    
    sockaddr_in SenderAddr;
    int SenderAddrSize = sizeof (SenderAddr);    
    //-----------------------------------------------
    // Initialize Winsock
    iResult = WSAStartup(MAKEWORD(2, 2), &wsaData);
    if (iResult != NO_ERROR) {
        wprintf(L"WSAStartup failed with error %d\n", iResult);
        return 1;
    }
    //-----------------------------------------------
    // Create a receiver socket to receive datagrams
    RecvSocket = socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP);
    if (RecvSocket == INVALID_SOCKET) {
        wprintf(L"socket failed with error %d\n", WSAGetLastError());
        return 1;
    }
            // Setting socket to non blocking mode
    if(ioctlsocket(RecvSocket, FIONBIO, &nonBlocking)!= 0)
            printf("can't Set socket to non blocking mode \n");
    //-----------------------------------------------
    // Bind the socket to any address and the specified port.
    RecvAddr.sin_family = AF_INET;
    RecvAddr.sin_port = htons(Port);
    RecvAddr.sin_addr.s_addr = htonl(INADDR_ANY);    
    iResult = bind(RecvSocket, (SOCKADDR *) & RecvAddr, sizeof (RecvAddr));
    if (iResult != 0) {
        wprintf(L"bind failed with error %d\n", WSAGetLastError());
        return 1;
    }
    //-----------------------------------------------
    // Call the recvfrom function to receive datagrams
    // on the bound socket.
    wprintf(L"Receiving datagrams...\n");
    while(iRun) {
    iResult = recvfrom(RecvSocket,
                       RecvBuf, BufLen, 0, (SOCKADDR *) & SenderAddr, &SenderAddrSize);
        if (iResult == SOCKET_ERROR) {
        wprintf(L"recvfrom failed with error %d\n", WSAGetLastError());
        Sleep(10);
        }
        //wprintf(L"recvfrom Success %d\n", iResult);
        //wprintf(L"Received Data %s \n",RecvBuf[BufLen]);
    }     
    //-----------------------------------------------
    // Close the socket when finished receiving datagrams
    wprintf(L"Finished receiving. Closing socket.\n");
    iResult = closesocket(RecvSocket);
    if (iResult == SOCKET_ERROR) {
        wprintf(L"closesocket failed with error %d\n", WSAGetLastError());
        return 1;
    }    
    //-----------------------------------------------
   scanf("enter any number to terminate %c",&ch);
    // Clean up and exit.
    wprintf(L"Exiting.\n");
    WSACleanup();
    return 0;

    //Console::WriteLine(L"Hello World");
    //return 0;
} 
```

任何人都可以帮忙。

问候

马亨德拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T03:29:46.627

你查了吗？Winsock 错误代码 10035 是`WSAEWOULDBLOCK`. 您处于非阻塞模式，您尝试的操作无法完成，因为发送时您的发送缓冲区已满或接收时您的接收缓冲区为空。