# StackOverflow 问答 15113000-15113999

# mongodb - Grails：查找具有列表属性的对象，其中包含具有给定属性值的对象

> ID：15113001
> 
> 赞同：3
> 
> 时间：2013-02-27T13:13:05.303
> 
> 标签：mongodb, grails, grails-orm

我正在开发 Grails 应用程序。我们有一个名为 User 的域对象，而 User 的属性之一是 Role 对象列表。角色有一些属性，其中之一是“名称”。

我需要找到在其角色列表属性中具有特定名称的角色的所有用户对象。

```
User: List<Role> roles

Role: String name 
```

因此，给定一个用户列表，我需要找到所有在其角色列表属性中具有名为“SUPERUSER”的角色的用户。

后端的数据库是 MongoDB，所以我们不能使用 SQL 查询或类似的东西（应用程序根本不使用 Hibernate）。据我所知，动态查找器和 CriteriaBuilder 解决方案都可以。

任何帮助，将不胜感激。我想我忽略了一些明显的事情，因为在我看来这并不应该那么难。至少，如果我正在编写 SQL，则不会。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T17:50:14.857

如果 Role 是一个单独的域对象，则不能直接这样做，因为 mongo 不支持连接。这通常在 mongo 中完成的方式是在用户对象中嵌入角色集合。因此，如果您像这样对 User 建模：

```
class User {
    List roles
    static embedded = ['roles']
} 
```

然后，您将能够使用条件或 where 查询，如下所示：

```
def superusers = User.where { roles.name == 'SUPERUSER' } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T17:12:34.207

那么条件查询呢：

```
List superUsers = User.withCriteria {
    roles {
        eq('name', 'SUPERUSER')
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T16:17:03.393

在这种情况下您可以使用 HQL（未经测试，可能需要一些调整）：

```
def users = User.executeQuery("s from User s inner join UserRole ur on s = ur.user where ur.role = :role", [role: Role.findByName("MYROLE")]) 
```

# php - 用于显示布尔值的文本表示的 PHP 函数

> ID：15113002
> 
> 赞同：0
> 
> 时间：2013-02-27T13:13:09.067
> 
> 标签：php, boolean

是否有一个 PHP 函数将“1”的布尔设置的文本版本显示为“True”或“On”等？

我知道如何使用 if() 语句来实现它，但我搜索并找不到任何可能是实现此目的的捷径。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T13:16:14.457

您正在寻找 var_export：

```
var_export(true, true) : string = "true" 
```

如果你有一个整数值，你可以预先使用类型杂耍：

```
var_export((bool) 1, true)
: string = "true"
var_export((bool) 0, true)
: string = "false" 
```

在尝试使用字符串“On”和“Off”运行它之前，请参阅关于类型杂耍的章节[http://php.net/manual/en/language.types.type-juggling.php](http://php.net/manual/en/language.types.type-juggling.php) - 第一个将评估为真，后者为——猜！（我会帮忙的，这也是真的）。所以要小心。然而，一个空字符串将被强制转换为 false。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T13:15:08.910

```
function boolToText($bool) {
  return $bool ? 'True' : 'False';
} 
```

# javascript - Knockout.JS Bindinghandlers moment.js

> ID：15113004
> 
> 赞同：3
> 
> 时间：2013-02-27T13:13:14.173
> 
> 标签：javascript, data-binding, knockout.js, momentjs

我想用 moment.js 格式化我的 knockoutjs 绑定日期。我的代码有什么问题？

```
 var modelNots;
        function NotsViewModel() {
            var self = this;
            self.msgs = ko.observableArray();     
        }
        modelNots = new NotsViewModel();
        var thediv=$("#notSection")[0];
        ko.applyBindings(modelNots, thediv );

        ko.bindingHandlers.Date = {
            update: function (element, valueAccessor) {
                var value = valueAccessor();
                var date = moment(value());
                var strDate = date.format('YYYY-MM-DD');
                $(element).text(strDate);
            }
        }; 
```

html:

```
<div data-bind="foreach: msgs">
   <div data-bind="text:Date"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T13:15:54.173

要在 Knockout 中使用新的数据绑定器，您正在创建一个新前缀，因此您的 html 应该如下所示（假设每个 msgs 元素都有一个“值”属性：

```
<div data-bind="foreach: msgs">
   <div data-bind="Date: value"></div>
</div> 
```

# java - 在线程中使用睡眠 - Java

> ID：15113008
> 
> 赞同：-4
> 
> 时间：2013-02-27T13:13:33.013
> 
> 标签：java, multithreading, multi-user

我计划实现一个多用户系统。

我可以在线程内使用睡眠吗？只是想知道它在运行多个线程时会导致任何问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T14:02:14.887

> 我计划实现一个多用户系统。

好的

> 我可以在线程内使用睡眠吗？

是的

> 只是想知道它会在运行多个线程时导致任何阻塞问题。

不

但是 - 除非您真的别无选择，否则建议避免在线程中睡觉。如果可以，您应该改用 s 等线程间通信技术`BlockingQueue`。

某种[PauseableThread](https://stackoverflow.com/a/10669623/823393)可能是更好的选择。

# ios - 有没有办法在没有 appId 的情况下发布到用户 Facebook 墙上？

> ID：15113010
> 
> 赞同：0
> 
> 时间：2013-02-27T13:13:37.683
> 
> 标签：ios, facebook

所以我想知道，有没有一种方法可以在没有 appId 的情况下使用 Facebook iOS SDK 发布到用户的 Facebook 墙上？

我希望显示一个模式窗口，并且用户会放置消息，但这只是我们不希望用户授权任何应用程序这样做。只是贴在他的墙上。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T13:16:41.007

不会。如果你确实找到了一种方法来做到这一点，那么 Facebook 很快就会阻止你的应用程序或针对它打补丁。

# iphone - ZBarSymbol 未正确读取代码

> ID：15113011
> 
> 赞同：0
> 
> 时间：2013-02-27T13:13:38.760
> 
> 标签：iphone, ios, nsstring, zbar-sdk

我在我的应用程序中使用 ZbarSdk 来扫描 qrcode，在我的

```
- (void) readerView: (ZBarReaderView*) viewdidReadSymbols: (ZBarSymbolSet*) syms
      fromImage: (UIImage*) img method, I am writing following code,

 for(ZBarSymbol *sym in syms) {
 NSLog(@"%i",[sym.data length]);
 NSLog(sym.data);
 resultText= [NSString stringWithString:sym.data];
 NSLog(resultText);
 break;       
} 
```

resultText 是 NSString 但是当我尝试扫描 QRCode 时，它​​会在字符串中显示奇数字符和数字，这给我带来了问题。

![我正在扫描的二维码](../Images/b20b280858c3de2c8eb35a02a205307e.png)

sym.data 的 Nslog 显示“ [http://www.winlogisticsmedia.com/images/bigkmr](http://www.winlogisticsmedia.com/images/bigkmr) 8.195737e-164ndhttp://www.winlogisticsmedia.com/images/bigkmr%20end%20sale.jpgale.jpg”

但是它应该显示“ [http://www.winlogisticsmedia.com/images/bigkmr%20end%20sale.jpg](http://www.winlogisticsmedia.com/images/bigkmr%20end%20sale.jpg) ”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:15:10.193

尝试`NSLog(@"%@", sym.data);`- 适用于我在 iOS SDK 6.1 上。

使用`NSLog(sym.data);`在 Xcode 中给出“格式字符串不是字符串文字（可能不安全）”警告，并在调试时出现 EXC_BAD_ACCESS 错误。

# php - 通过 AMI 拒绝所有拨出电话和访问

> ID：15113014
> 
> 赞同：0
> 
> 时间：2013-02-27T13:13:46.637
> 
> 标签：php, asterisk

这是我的场景：我想用 PHP 制作一个 AMI，当用户单击以在 Web 上调用时，它会使用发起登录进行拨出呼叫，并且......所以，我只需要拒绝所有拨出电话并在用户单击时允许它在网络上，它获得允许权限，呼叫号码然后挂断，然后再次获得拒绝权限。我不想获取您的源代码，我只想知道我的场景是否真实和适用，以及当我拒绝所有呼叫然后在点击网络时允许呼叫时的方法是什么。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:20:09.620

是的，任何场景都可以在星号上获得。

您已经创建了两个上下文。一种用于您没有外部访问的电话（可选的本地呼叫 phone2phone），另一种用于您的拨出应用程序。同样在拨出上下文中，您可以检查脚本设置的一些变量。有关更多信息，请查看任何书籍，我推荐“Asterisk the future of telephony”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T16:01:34.993

您可以让星号拨号计划决定是否发出呼叫，但这不应该由星号决定，而是由启动（发起）呼叫的 php 脚本决定。在您的 php 脚本中包含登录决策逻辑，而不是在星号中。

# ruby-on-rails-3.2 - 控制器的 Rspec 测试

> ID：15113018
> 
> 赞同：0
> 
> 时间：2013-02-27T13:13:52.957
> 
> 标签：ruby-on-rails-3.2, rspec2

我正在构建一个实现忘记密码功能的 Rails 应用程序。我需要使用 RSpec 为其编写测试用例。我对 RSPEC 非常陌生，并且从教程和截屏视频中了解了 rspec 如何工作的基本概念。但我不确定如何为控制器测试它。在我的控制器方法中，如果我从数据库中检索用户，那么我将如何使用 rspec 对其进行测试。我是否提供用于测试 rspec 的虚拟数据。？请在下面找到示例。

在 Usercontroller.rb 中

def forgot_pass

```
user = User.find_by_email(params[:email])
forget_pass = ForgetPassword.new
forgetpass.userid = user.email
forgetpass.status = true
forgetpass.save!
redirect_to login_url 
```

结尾

在我的 password_reset_spec

```
require 'spec_helper'
describe "PasswordResets" do
it "emails when user requesting password reset" do
        user=User.new
        forget_pwd = ForgetPassword.new
        #forget_pwd.userid.should == "prasad"
        #forget_pwd.token.should == "123456"
        forget_pwd.userkey = "14dd"
        visit auth_index_path
        click_link "Forgot Password"
        fill_in "Email", :with=> 'pp@gmail.com'
        click_button "Submit"
        current_path.should eq(login_path)
        page.should have_content("A verification mail has been sent to your email id. Click on the confirmation link to change the password")
        last_email.to.should include('pp@gmail.com')
     end
end 
```

在测试中如何测试用户是否存在并分配属性。就我而言， **user = User.find_by_email(params[:email]) forgetpass.userid = user.email**

请帮忙，因为我是 Rspec 的新手

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T02:24:48.200

你给自己设置的挑战是你试图一次测试太多的东西。您应该在 model_spec 中测试模型行为，并像在控制器中那样测试流行为。因此，您的集成/请求规范可以测试一切是否一起工作，并且您的用户和 ForgotPass 单元测试可以测试当他们收到正确的消息（来自控制器）时，他们是否做正确的事情。

将这些测试分解成小部分要容易得多。对模型方法进行单元测试意味着你可以使用存根/模拟来测试控制器，如果你想测试它的隔离性，或者你可以像你一样做请求规范测试，确信底层模型行为是正确的。

# css - 使用默认的 Twitter Bootstrap CSS 水平居中对齐 div

> ID：15113030
> 
> 赞同：6
> 
> 时间：2013-02-27T13:14:34.597
> 
> 标签：css, twitter-bootstrap

我知道如何在 CSS 中水平居中对齐 div。您需要将宽度设置为小于 100% 并在左右两侧设置自动边距。我想做这种默认样式的 Twitter Bootstrap。我不想编写额外的 CSS。想知道是否可以使用 Twitter Bootstrap 中使用的默认样式来实现。

要设置 div 的宽度，我使用`span*`. 但是`span*`是`float: left`。有没有类，可以设置div的宽度，但不会添加`float: left`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-27T13:27:47.797

要水平对齐使用偶数跨度样式（span2、span4 等）的 div，您需要使用偏移量。

```
<div class="offset3 span6">
    ...
</div> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T14:05:50.623

`pagination-centered` 在 div 中使用类，例如：

```
 <div class="row">
    <div class="span12 pagination-centered">
    <p> content</p>
   </div>
</div> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-13T05:44:41.677

Bootstrap 将内容居中的方式似乎是通过分配`class="center-block"`给它：[指向 Bootstrap 3 doc page 的链接](http://getbootstrap.com/css/#helper-classes-center)。

但是，它不适用于标题或段落。`class="text-center"`似乎在这些情况下有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T15:15:46.640

如果您想要水平对齐的元素是一个奇怪的跨度（@JayGee）并且您不想编写额外的 CSS（甚至不是内联的？），那么答案应该是：不，这是不可能的。否则我会去找@JayGee 的答案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-14T08:50:50.110

基于@JayGee 的回答。

```
<div class="row">
     <div class="col-sm-offset-4 col-md-offset-4 col-lg-offset-4 col-sm-4 col-md-4 col-lg-4">
     ... content here ...
     </div>
</div> 
```

# css - 根据浏览器调整图片大小

> ID：15113031
> 
> 赞同：0
> 
> 时间：2013-02-27T13:14:36.763
> 
> 标签：css, image, wordpress, browser, scale

我正在使用一个数组/循环从一个名为画廊（Wordpress）的自定义字段中获取我的图像。检索到的图像未调整大小，这意味着它们的最大宽度为 150 像素或最大高度为 150 像素。现在我想知道如何自动让这些图像适应浏览器的大小。Chrome 完美地做到了这一点，但 IE 和 FF 却没有。当我设置 img { width:100%;} 时，调整大小会起作用，但随后图像本身的大小就被搞砸了，正如您可以想象的那样。

还有其他可能让图像自动调整到浏览器大小吗？谢谢你的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T14:29:28.620

```
#img.source-image
{
    width: 100%;
    position: absolute;
    top: 0;
    left: 0;
} 
```

应该做的伎俩。

另外，让你的问题更清楚。

[http://css-tricks.com/how-to-resizeable-background-image/](http://css-tricks.com/how-to-resizeable-background-image/)有一些不错的例子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-18T09:46:58.240

尽量不要在表格内显示图像，因为表格需要在显示任何单元格之前加载每个单元格，从而增加下载查看时间。此外，尽可能尝试不要让浏览器调整任何图像的大小。你可以自己做这件事，效果会更好。您可以在 css 中定义以检测屏幕尺寸。然后设置一系列的屏幕尺寸来引导不同的图像，例如如果 window.width < 800px{load 800pxImage}, if window.width > 800px{load 1600pxImage} 这样你可以补偿浏览器窗口的种类繁多，因为有不可能一种设计适用于所有机器。这可能会产生更多代码并需要更多研究，但您应该研究一下。这是一个使用 HTML 和 CSS 的示例：

HTML /* 标准 body 和 div 设置来创建响应站点，该站点随每个浏览器窗口更改其大小，这是允许浏览器调整块部分的好方法 */

```
<body class="background">
     <div id="content" class="etc">
         .....
         ....
      </div>
</body> 
```

CSS

/* 创建一个简单的 css 文件以包含基本设置 */

```
body {
   font: 100%/1.4, Verdana, Geneva, Sans serif;
   margin: 0; padding: 0; border: 0;
   width: 100%; Height: 100%; }

div #content {
   width: 75%;
   text-align: center; }

/*Apply as default image to use if the window does not meat any criteria */
body.background {
   background-image: url(../Images/YourImage1600px);
   background-repeat: no-repeat; } 
```

/*判断屏幕大小是否等于或小于800px，如果是加载，则使用判断括号内的css。您可以有多个语句来确定多个设置。对于简洁的代码，您可以将所有新要求放入单独的 css 文件中，并在查询语句中，只需链接到 css 文件。因此从技术上讲，您可以拥有一个单独的 css 文件，该文件仅用于确定用户要求和加载其他 css 文件

```
@media only screen and (max-width: 800px){
    body.background {
        background-image: url(../Images/YourImage800px);
        background-repeat: no-repeat; 
    }
} 
```

我希望你能理解这一切，它会有所帮助。

# mysql - wordpress 克隆未在网络矩阵 2 上运行

> ID：15113035
> 
> 赞同：0
> 
> 时间：2013-02-27T13:14:45.150
> 
> 标签：mysql, wordpress, git, clone, webmatrix

我已经通过 git 克隆了 wordpress 站点。而且我正在尝试使用 WebMatrix 2 处理本地副本，但是当我运行该站点时，我得到空白页面，并且只有 favicon 正确显示。我想这是因为数据库。如果我只能访问 git clone，如何使它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T17:39:59.803

你需要在某个地方运行一个 msql 数据库 :) 你是从哪里得到这个 WordPress 存储库的？它是否在某处编写了 *.sql 文件以便您可以进行恢复？或者您是否正在尝试连接到已经在另一台服务器上运行的 mysql 数据库？

# php - DATEDIFF 结果的月平均值

> ID：15113039
> 
> 赞同：0
> 
> 时间：2013-02-27T13:14:59.283
> 
> 标签：php, mysql

我有两列。第一个带有“开始日期”，第二个带有“结束日期”。然后使用查询计算两者之间的天数差异。我想知道如何计算这个结果的月平均值。

这是我的查询

```
SELECT 
memos.sda.num_sda, 
memos.sda.fecha_gen_sda, 
memos.sda.recurso, 
fechas.bodega_recep_inf_1.num_sda, 
fechas.bodega_recep_inf_1.fecha_recep, 
DATEDIFF( fechas.bodega_recep_inf_1.fecha_recep, memos.sda.fecha_gen_sda ) 
AS date_difference, 
MONTHNAME( memos.sda.fecha_gen_sda ) AS nombre_mes
FROM memos.sda
INNER JOIN fechas.bodega_recep_inf_1 
ON memos.sda.num_sda = fechas.bodega_recep_inf_1.num_sda
GROUP BY memos.sda.num_sda 
```

结果：

```
 _________________________________________________________________________________________
 |num_sda  |fecha_gen_sda|recurso    | num_sda  |fecha_recep  |date_difference | nombre_mes|
 -------------------------------------------------------------------------------------------
 |25227    | 31-01-2013  |1RJB070031 |  25227   | 20-02-2013  | 20         | January
 |25228    | 31-01-2013  |1RVRV20015 |  25228   | 07-02-2013  | 7          | January
 |25229    | 31-01-2013  |1RKB010041 |  25229   | 07-02-2013  | 7          | January
 |25231    | 01-02-2013  |1RJB010585 |  25231   | 07-02-2013  | 6          | February
 |25232    | 01-02-2013  |1R¥R¥50080 |  25232   | 11-02-2013  | 10         | February
 |25235    | 01-02-2013  |1R¥R¥50022 |  25235   | 11-02-2013  | 10         | February
 |25237    | 01-02-2013  |3RBS040030 |  25237   | 12-02-2013  | 11         | February 
```

我需要所有列的平均值，但按 MONTH 分开。

所以，如果我使用

```
avg(DATEDIFF( fechas.bodega_recep_inf_1.fecha_recep, memos.sda.fecha_gen_sda)) AS avg 
```

不起作用，因为它只是行的平均值，而不是整个列的平均值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T13:22:28.523

就像是

```
SELECT 
AVG(DATEDIFF( fechas.bodega_recep_inf_1.fecha_recep, memos.sda.fecha_gen_sda ) 
AS avg_date_difference
FROM memos.sda
INNER JOIN fechas.bodega_recep_inf_1 
ON memos.sda.num_sda = fechas.bodega_recep_inf_1.num_sda
GROUP BY MONTH( memos.sda.fecha_gen_sda ) 
```

# git - git post-commit 钩子未执行

> ID：15113042
> 
> 赞同：2
> 
> 时间：2013-02-27T13:15:14.110
> 
> 标签：git, bash, githooks

我正在尝试使用[此处](http://thorehusfeldt.net/2011/05/13/including-git-revision-identifiers-in-latex/)`git`描述的方法实现一种将提交数据包含到 LaTex 文档中的方法。

钩子看起来像这样：

```
$ cat post-commit 
#!/bin/sh

cd ../..

git log -1 --format="format:\
                \\gdef\\GITAbrHash{%h}\
                \\gdef\\GITHash{%H}\
                \\gdef\\GITAuthorDate{%ad}\
                \\gdef\\GITAuthorName{%an}" >> git.tex 
```

当我执行`chmod a+x post-commit`then`./post-commit`时，文件会正确生成。但是，当我实际提交时，不会执行钩子。可能是什么问题呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T13:27:52.283

我想问题是你`cd ../..`为了导航到你的来源。

尝试将 替换`cd ../..`为`pushd ../..`. 调用后`git log`，恢复目录`popd`

* * *

**除此之外：**我怀疑你在这里想要一个 post-commit 钩子：如果你做了一个成功的提交，`git.tex`之后将被更改并且你有一个修改过的文件。

预**提交挂钩**将是更好的选择：在提交之前，挂钩被调用、修改`git.tex`然后将其添加到提交中。

另一种选择是为您的文件使用*涂抹*和*清洁*过滤器（ [http://git-scm.com/book/en/Customizing-Git-Git-Attributes#Keyword-Expansion](http://git-scm.com/book/en/Customizing-Git-Git-Attributes#Keyword-Expansion)）。每次你要做一个发布之类的事情时，只要做一个`git.tex`

```
git add git.tex 
```

这将*调用*生成`git.tex`. 此内容将被发送到 repo。检出文件时将运行污迹过滤器*。*它的职责是使文件为空，所以它只是

```
echo '' > git.tex 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T09:57:08.470

问题是我不需要这样做，`cd ../..`因为无论如何代码都是在存储库的根目录中执行的。另一个错误是`>> git.tex`，当然应该读`> git.tex`。

# c# - 样式化 ListView.SelectedItem - Windows 应用商店应用

> ID：15113047
> 
> 赞同：2
> 
> 时间：2013-02-27T13:15:28.987
> 
> 标签：c#, xaml, listview, windows-8, windows-store-apps

我有一个这样的 ListView：

```
<ListView ItemsSource="{Binding Source}" SelectionMode="Single"
ItemTemplate="{StaticResource MyItemTemplate}"
IsItemClickEnabled="True" ItemClick="ListView_OnItemClick">
</ListView> 
```

我想要实现的是将被选择/单击的元素设置为与其他元素不同的样式，并在选择另一个元素时再次返回。对我来说，最简单的方法是如果有某种方法可以更改所选项目的 DataTemplate。如果那不可能，任何类型的解决方案都非常感谢。

我尝试使用 DataTemplateSelector，但无法正常工作。不确定当所选项目发生变化时是否会重新选择模板。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T18:43:37.403

**DataTemplateSelector**旨在在数据*类型*更改时使用。例如，假设您有一个名为**Person**的基类和两个继承的类**Professor**和**Student**。您可以有一个名为**People**的集合，其中包含教授和学生。您将使用**DataTemplateSelector**在显示教授对象时使用一个数据模板，而另一个用于显示学生对象。

**DataTemplateSelector**和**DataTemplate**可能不是您想要的，因为它们通常与选择没有任何关系。您在选择项目时看到的所有 UI 元素（复选、紫色边框等）都是**ItemContainer**的一部分。在运行时，**DataTemplate**被放置在**ItemContainer**内，您可以通过编辑**ContainerTemplate**来更改它。

在 Expression Blend 中，右键单击 ListView 并选择*Edit Additional Templates -> Edit Generated Item Container (ItemContainerStyle) -> Edit a Copy*。您需要为自定义容器命名，我建议将其保存在应用级别而不是当前页面（否则您将无法在其他页面上使用它）。

给它一个名称并单击确定后，Blend 将切换到您正在编辑容器（而不是页面）的模式。确保您打开了**状态**面板（*Window -> States*如果您没有看到它），您应该会看到一堆状态。您要编辑的那个称为**Selected**，它位于名为**SelectionStates**的组中。

*完成更改后，单击“对象和时间轴*”面板顶部的按钮，该按钮看起来像带有向上箭头的水平线（当您将鼠标悬停在此按钮上时，它会显示*“将范围返回到 [页面]”*） . 现在您回到编辑页面而不是编辑容器。运行您的应用程序，您应该会看到差异。

**注意**：使用此方法，您可以更改有关*容器*的任何内容。诸如边框之类的东西，或者使项目更大或更小或在 3D 空间中倾斜（使用属性窗格中“变换”组下的“投影”来倾斜）。但是，您将无法显示或隐藏 DataTemplate 的某些部分。例如，当客户未被选中时，您将无法隐藏他们的名字。对于这些类型的更改，您可能必须尝试使用​​您自己的自定义 DataTemplateSelector。但我不知道是否可以在要求 DataTemplateSelector 生成模板时检查是否选择了某个项目。

开发支持、设计支持和更多的好处：http: [//bit.ly/winappsupport](http://bit.ly/winappsupport)

# arrays - 如何将作为函数参数传递的二维数组的特定行分配给c ++中的一维向量

> ID：15113052
> 
> 赞同：0
> 
> 时间：2013-02-27T13:15:42.613
> 
> 标签：arrays, vector, row, assign, dimensional

这就是我所做的，但是当我调试时出现分段错误（Step Into -> v.assign() 是问题所在。

```
void vertex::sort_all_neighbours(int i, int **array, int size_array){

v.reserve(size_array);    
v.assign(&array[i][0], &array[i][size_array-1]);
//for (j = 0; j < size_array; j++) v[j] = array[i][j];
make_heap(v.begin(), v.end());
sort_heap(v.begin(), v.end());
v.erase(v.begin());
assign_neighbors(i);
} 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T22:34:35.040

我可能会更改其他功能/程序中的某些内容，这是一个解决方案

```
void vertex::sort_all_neighbours(int i, int **array, int size_array){

v.reserve(size_array);    
v.assign(&array[i][0], &array[i][size_array]);
make_heap(v.begin(), v.end());
sort_heap(v.begin(), v.end());
v.erase(v.begin());
assign_neighbors(i);
} 
```

# sql - SQL Server - 加入两个表以获取数据

> ID：15113055
> 
> 赞同：-1
> 
> 时间：2013-02-27T13:15:50.983
> 
> 标签：sql, sql-server

努力编写查询以获取所需的信息。见下文：

表**客户**

```
CustId    CustName
1        Andy
2        Rob
3        Craig
4        Rashi 
```

表**客户订单**

```
CustId   OrderQuantity
1        3
2        5
3        10
1        2 
```

需要输出：

```
CustId    CustName     NumberofOrdersPlaced
1        Andy                  5
2        Rob                   5 
3        Craig                10
4        Rashi                 0 
```

如果 a`Customer`没有下任何订单，则`NumberofOrdersPlaced`应该设置为 0。

我正在为这个简单的查询而苦苦挣扎。请有人帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:18:16.887

```
select 
  c.custid,
  c.custname,
  co.sum(orderquantity) as NumberofOrdersPlaced
from customers c
left join customer_orders co on c.custid = co.custid
group by custid,custname 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T13:18:55.190

```
select c.custId
   ,c.custName
   ,(select count(1) from CustomerOrders where custId = c.custId) numberoforders
   from Customers c 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T14:43:21.163

你只需要`LEFT JOIN`在桌子上使用 a 。即使表中没有匹配的行，也会返回表中`LEFT JOIN`的所有行。`customers``customer_orders`

加入表格后，对于没有订单的客户，您可以使用[`COALESCE`](http://msdn.microsoft.com/en-us/library/ms190349.aspx)或[`IsNull`](http://msdn.microsoft.com/en-us/library/ms184325.aspx)将值替换为零：`null`

```
select 
  c.custid,
  c.custname,
  coalesce(sum(co.orderquantity), 0) as NumberofOrdersPlaced
from customers c
left join customer_orders co 
  on c.custid = co.custid
group by c.custid, c.custname
order by c.custid 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/10bf0/5)

# sql - SQL Server：按字母顺序排列所有数据，但将特定项目放在最后

> ID：15113058
> 
> 赞同：0
> 
> 时间：2013-02-27T13:16:11.930
> 
> 标签：sql, sql-server

[MySQL - 按字母顺序排列所有数据，但将特定项目放在最后](https://stackoverflow.com/questions/7246134/mysql-ordering-all-data-in-alphabetical-order-but-placing-a-particular-item-la)

这个问题已经被问到了 MySql，不幸的是这个解决方案不适用于 SQL Server。这是我当前的查询和结果：

```
select ShipMethodID As UseMe, Name As ShowMe 
from Purchasing.ShipMethod
union
Select 0 As UseMe, 'n/a' As ShowMe
order by ShowMe 
```

结果：

```
5   CARGO TRANSPORT 5
0   n/a
4   OVERNIGHT J-FAST
3   OVERSEAS - DELUXE
1   XRQ - TRUCK GROUND
2   ZY - EXPRESS 
```

我需要像这样进行排序：

```
0   n/a
5   CARGO TRANSPORT 5
4   OVERNIGHT J-FAST
3   OVERSEAS - DELUXE
1   XRQ - TRUCK GROUND
2   ZY - EXPRESS 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T13:18:51.630

```
select * from (
    select ShipMethodID As UseMe, Name As ShowMe 
    from Purchasing.ShipMethod
    union
    Select 0 As UseMe, 'n/a' As ShowMe
) t
order by (case when UseMe = 0 then null else ShowMe end) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T13:21:39.207

首先按一个字段排序，以便首先获得 N/A，然后按您真正想要排序的字段 - 如果您真的想要 n/a last then `order by DisplayOrder DESC, ShowMe`。

```
select      ShipMethodID As UseMe, Name As ShowMe, 1 AS DisplayOrder
from        Purchasing.ShipMethod
union
Select      0 As UseMe, 'n/a' As ShowMe, 0 AS DisplayOrder
order by    DisplayOrder, ShowMe 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-27T13:22:27.377

请尝试使用此查询..

```
select ShipMethodID As UseMe, Name As ShowMe, 1 As dummycolumn
from Purchasing.ShipMethod
union
Select 0 As UseMe, 'n/a' As ShowMe, 0 As dummycolumn
order by dummycolumn, ShowMe 
```

# c# - 即使 debug=false，Server.ScriptTimeout 也设置为 30000000

> ID：15113066
> 
> 赞同：3
> 
> 时间：2013-02-27T13:16:36.477
> 
> 标签：c#, asp.net, iis

我在运行 ASP.NET 4.5 Web 应用程序的实时服务器上遇到脚本没有超时的问题。

应用程序的 web.config 具有`<compilation debug="false" />`和不具有`<httpRuntime executionTimeout="" />`值集。machine.config 中的任何一个都没有任何值。

所以理论上脚本应该在默认的 110 秒内超时。

但是，在实时服务器上输出 Server.ScriptTimeout 的值表明该值为 30000000 秒，这是`<compilation debug="true" />`.

我可以确认 ScriptTimeout 也没有在代码中的任何地方设置。

是否还有其他地方可以设置此值或在某处覆盖该值？也许在 IIS 的某个地方？我查看了 IIS 配置，但没有什么特别突出的。

非常感谢

**更新**

按照 Jim Mischel 链接上的说明（谢谢）反编译在我们的实时服务器上运行的预编译程序集后，我发现 30000000 的 ScriptTimeout 实际上被放入了 WebForm 页面类的构造函数中。

```
[DebuggerNonUserCode]
public ProblemPage_aspx()
{
    // Initialisation code
    base.Server.ScriptTimeout = 30000000;
} 
```

当`<compilation debug="false" />`这行代码从类中省略时运行。

由此我只能假设我们正在调试模式下预编译应用程序。我会做一些进一步的调查，但看起来这毕竟可能不是环境配置问题。

# objective-c - 来自 xib 的可重用标头

> ID：15113080
> 
> 赞同：0
> 
> 时间：2013-02-27T13:17:26.157
> 
> 标签：objective-c, uitableview

我创建带有可重用标题的表格视图。当我从 xib 加载标题时，标题发生了一些奇怪的事情 ![](../Images/378d4a5a8f2e1d52eb6cfb56961f0be5.png)

```
- (UIView*)dequeueReusableHeaderView
{
    NSInteger indexAvailableView = [reusableHeaders indexOfObjectPassingTest:^BOOL(id obj, NSUInteger idx, BOOL *stop)
    { return  [obj superview] == nil; }];

    return (indexAvailableView != NSNotFound)? reusableHeaders[indexAvailableView] : nil;
}

- (void)enqueueReusableView:(UIView*)headerView
{
    [reusableHeaders addObject:headerView];
}

-(UIView*)tableView:(UITableView*)tableView viewForHeaderInSection:(NSInteger)section
{
    BGDiaryHeader *header = (BGDiaryHeader*)[self dequeueReusableHeaderView];
    if (!header) {
        UINib *headerNib = [UINib nibWithNibName:@"BGDiaryHeader_iPhone" bundle:nil];
        NSArray *aNib = [headerNib instantiateWithOwner:self options:nil];
        BGDiaryHeader *header = [aNib objectAtIndex:0];

    //if simple [[_ alloc]init] all works fine
    //    header = [[BGDiaryHeader alloc] init];
        [self enqueueReusableView:header];
    }
    //set display data
    return header;
} 
```

如果我在代码中创建标题视图，一切正常

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T06:06:50.767

**if*块中的*标头*阴影*

 *```
-(UIView*)tableView:(UITableView*)tableView viewForHeaderInSection:(NSInteger)section
{
    BGDiaryHeader *header = (BGDiaryHeader*)[self dequeueReusableHeaderView];
    if (!header) {
        UINib *headerNib = [UINib nibWithNibName:@"BGDiaryHeader_iPhone" bundle:nil];
        NSArray *aNib = [headerNib instantiateWithOwner:self options:nil];
        header = [aNib objectAtIndex:0];

        [self enqueueReusableView:header];
    }
    //set display data
    return header;
} 
```*

# sql - Postgresql 和 Oracle：从公共子查询更新多个表

> ID：15113086
> 
> 赞同：0
> 
> 时间：2013-02-27T13:17:44.700
> 
> 标签：sql, oracle, postgresql, oracle10g, postgresql-9.2

你好，我有 4 张桌子

第一个表是**菜单** 有列：

1.  身份证号PK
2.  parent_id 编号 FK 到 menu.Id
3.  标题字符变化（250）
4.  softdel 布尔默认值 false

第二个表是**页面**：

1.  标识为 PK
2.  menu_id 作为 menu.id 的 FK
3.  page_id 作为 page.id 的 FK
4.  softdel 布尔默认值 false

第三张表是**文章**：

1.  id 作为 PK 和 FK 到 page.id
2.  softdel boolean 默认设置为 false

和第四张表**article_lang**：

1.  partial_id 作为 PK
2.  id 作为 article.id 的 FK
3.  语言字符
4.  softdel boolean 默认设置为 false

当我'删除'（我的意思是设置softdel true）菜单时，我需要创建更新语句，例如200我还将softdel = false设置为所有parent_id = 200的菜单以及所有menu_id = menus_id的页面和page_id的文章= pages.id 等等....

我只需要 1 个更新语句就可以做到吗？？

如果我可以创建 JPA 查询或 EJB 查询，那就太好了 :)

在 oracle 我写声明：

```
update pub_menu pm set softdel = 0 where pm.id in (
with menu_tree(id, parent_id) as (
  select 
    t1.id , t1.parent_id
    from menu t1
    where t1.id = 454

    union all
    select 
    t2.id , t2.parent_id
      from menu_tree
      join menu t2 on menu_tree.id = t2.parent_id
)
select id from menu_tree

)

update menu_page pmp set softdel = 1 where pmp.menu_id in (
with menu_tree(id, parent_id) as (
  select 
    t1.id , t1.parent_id
    from menu t1
    where t1.id = 454

    union all
    select 
    t2.id , t2.parent_id
      from menu_tree
      join menu t2 on menu_tree.id = t2.parent_id
)
select id from menu_tree

) 
```

它的工作，但我这样做是不正确的：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:55:09.313

就像是：

```
with recursive menu_tree (id, parent_id) as (
   select id, parent_id
   from menu
   where id = 200
   union all 
   select c.id, c.parent_id
   from menu c
     join menu_tree p on p.id = c.parent_id
)
, deleted_menus (menu_id) as (
   update menu
      set softdel = true
   where id in (select id from menu_tree)
   returning menu.id
),
deleted_pages (page_id) as (
   update page
      set softdel = true
   where menu_id in (select menu_id from deleted_menus)
   returning page.id
),
deleted_articles (article_id) as (
   update article
     set softdel = true
   where page_id in (select page_id from deleted_pages)
)
update article_lang
   set softdel = true
where id in (select article_id from deleted_articles); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T13:49:25.917

如果您只是删除它们并让外键级联会更容易。

但是，您可以编写一个简短的触发函数来为您执行额外的删除操作。前 3 个表中的每一个都需要一个，但它们基本相同。他们需要在每个 ROW 的 AFTER 触发器中根据 OLD.id 更新链中的下一个表。

手册中的触发功能示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T13:53:52.113

您可以将多个更新与 CTE 结合起来：

```
WITH u1 AS (UPDATE menu SET softdel = TRUE WHERE menu.id = 200),
     u2 AS (UPDATE menu SET softdel = FALSE WHERE menu.parent_id = 200),
     u3 AS (...),
     u4 AS (...),
     -- and so on
SELECT 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-16T17:18:58.840

Oracle 不允许任何一条 sql 语句更新多个表。因此，在这种情况下，常规 CTE 无法避免代码重复。

但这可以通过使用[PL/SQL FOR LOOP IMPLICIT CURSOR](https://stackoverflow.com/questions/15854749/pl-sql-for-loop-implicit-cursor)来解决，如下所示：

```
begin
  for cur in (
    with menu_tree(id, parent_id) as (
        select t1.id, t1.parent_id
        from menu t1 where t1.id = 454
        union all
        select t2.id , t2.parent_id
        from menu_tree
        join menu t2 on menu_tree.id = t2.parent_id
    )
    select id from menu_tree
  ) loop
    update pub_menu pm set softdel = 0 where pm.id = cur.id;
    update menu_page pmp set softdel = 1 where pmp.menu_id = cur.id;
  end loop cur;
end; 
```

# jquery - 'History.statechange' 在 IE9 中 document.ready 期间触发

> ID：15113089
> 
> 赞同：1
> 
> 时间：2013-02-27T13:17:53.470
> 
> 标签：jquery, history.js

我有一个网页，它使用 history.js 根据哈希变化执行一些任务。

我使用 replaceState 来更改历史状态。

```
$(document).ready(function () {

    History.replaceState("state =1", "title", "?querystring");

    History.Adapter.bind(window, 'statechange', function () {
        var State = History.getState();
        if (State.title == "title")
            window.location.href = "default.aspx?mode=1";
        else
            window.location.href = "default.aspx?mode=2";
    });
}); 
```

然而，在 IE9 中的“document.ready”以及浏览器的后退/前进按钮上调用了“statechange”事件。但在 chrome 和 safari 中，仅在单击浏览器的后退/前进时调用它才能正常工作。

由于我根据标题重新加载页面。IE 通过不断地重新加载页面而发疯。

我浏览了有关该问题的所有可能的论坛和线程。但没有一个解决方案奏效。

请建议任何解决方法，仅在 IE9 和其他浏览器中的后退/前进按钮单击时调用“statechange”事件。

任何帮助将不胜感激。谢谢。

# java - 如何自动构建混合的 Scala\Java Eclipse 工作区？

> ID：15113090
> 
> 赞同：1
> 
> 时间：2013-02-27T13:17:55.217
> 
> 标签：java, eclipse, scala, continuous-integration, build-script

我有一个 Eclipse（3.7.2 + Scala 2.10 插件）工作区。它包含 10 多个 Scala 和 Java 项目。我想组织简单的 CI 构建。只需完全重新编译（无需测试、分发、样式检查......）是否存在用于生成脚本的快速且简单可重现的路径？我尝试使用标准 Eclipse 向导导出 Ant 脚本，但结果取决于机器并且不包含 Scala 项目的编译。在 sbt + eclipse 插件中，我遇到了 Java 项目编译的问题。更重要的是，在这种情况下，我们应该手动支持依赖关系。对于庞大且快速增长的工作空间来说，这不是一个好主意。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T19:10:26.907

我不知道有什么方法可以从 Eclipse 生成满足您要求的构建脚本。如果您正在寻找可重现的东西，最好的办法是使用外部构建工具并根据其模型生成 Eclipse 工件。我发现[M2E](http://eclipse.org/m2e/)是支持 Java 和 Scala 构建以及混合构建的最佳往返解决方案。要使用这种方法，您需要使用 Maven 作为外部构建技术。作为替代选项，您可以使用一些外部构建工具生成 Eclipse 工件。例如，您可以使用[SBT](https://github.com/harrah/xsbt/wiki)和[SBTEclipsify](https://github.com/musk/SbtEclipsify)、 Ant 和[Ant-Eclipse](http://sourceforge.net/projects/ant-eclipse/)或 Maven 来生成 Eclipse 项目。使用这种方法，您必须在每次构建更改时重新生成项目。其他构建工具可能提供类似的功能。

# exception-handling - 骆驼邮件捕获无效的凭据

> ID：15113094
> 
> 赞同：1
> 
> 时间：2013-02-27T13:18:05.947
> 
> 标签：exception-handling, apache-camel

我需要帮助来解决捕获像 AuthenticationFailedException 这样的异常的问题。

一般来说，我想捕捉骆驼邮件组件抛出的任何异常，然后以某种方式处理异常，例如向用户显示异常的原因。

我想使用 ConsumerTemplate 来验证骆驼端点：

字符串 imap = "imaps://imap.gmail.com:993?username=programmer* **@gmail.com&password=**** &unseen=false&delete=true&consumer.delay=5000";

交换 ex = consumerTemplate.receiveNoWait (imap);

是否可以使用 consumerTemplate 找到失败的原因？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T09:32:54.590

是的，如果有任何异常抛出，那么你可以从交易所得到，使用

```
exchange.getException() 
```

# ios - 在 iOS < 6 上作为应用内购买的可下载内容

> ID：15113096
> 
> 赞同：0
> 
> 时间：2013-02-27T13:18:10.613
> 
> 标签：ios, objective-c, download, in-app-purchase

根据[iOS 开发者库](http://developer.apple.com/library/ios/documentation/StoreKit/Reference/SKPaymentTransaction_Class/Reference/Reference.html#//apple_ref/occ/instp/SKPaymentTransaction/downloads) `downloads`属性仅存在于 iOS SDK 6.0 或更高版本中。

有没有办法在旧版本的 iOS 上使用可下载内容进行应用内购买？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T13:27:03.780

我以前没有看过 SKDownloads 的东西，但我确实找到了它的描述：http: [//xinsight.ca/blog/iap-content-download-in-ios6/](http://xinsight.ca/blog/iap-content-download-in-ios6/)

要回答您的问题，是的，您可以使用您自己的服务器上的可下载内容进行应用内购买。自几年前引入 IAP 以来，该功能就已经可用。您想要的是应用内购买编程指南中描述的“服务器产品模型”：http: [//developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/APIOverview/OverviewoftheStoreKitAPI.html #//apple_ref/doc/uid/TP40008267-CH100-SW1](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/APIOverview/OverviewoftheStoreKitAPI.html#//apple_ref/doc/uid/TP40008267-CH100-SW1)

# asp.net - asp.net IDataReader 计数情况

> ID：15113098
> 
> 赞同：0
> 
> 时间：2013-02-27T13:18:15.913
> 
> 标签：asp.net, idatareader

我知道 IDataReader 没有计数选项。而且您无法计算 datareader 中的行数并返回以再次读取它，因为它只会向前移动，这意味着您无法倒回它。我想到的最佳解决方案是执行 select 语句，计算 datareader 中的行数，然后执行另一个 select 语句并对数据执行任何您想做的事情。

这个问题可能已经在这里发布了很多次，但没有人对此给出真正的解决方案。不做第二个选择语句的最佳解决方案是什么？（选择很贵）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:26:44.820

好吧，如果您在阅读之前需要行数，这只是一个问题，否则只需对结果和计数进行交互即可满足您的需求。或者只是将所有内容读入数据集并从那里开始工作

假设您在读取第一行时需要行数，您总是可以做这样的事情（这不是一个好主意）

```
SELECT [The Real Fields],COUNT(*) as Qty
WHERE [Conditions]
UNION 
SELECT [The Real Fields],0 as Qty
WHERE [Conditions] 
```

这样，当您阅读第一行时，您就会知道有多少行可用。

是的，我知道可能有更好的方法来执行 SQL 以在没有联合和重复查询的情况下获取行数。

# r - 遍历文件夹层次结构

> ID：15113107
> 
> 赞同：2
> 
> 时间：2013-02-27T13:18:32.153
> 
> 标签：r

我有一个文件夹（my_files），里面有大约 1000 个文件夹。这 1000 个文件夹中的每一个都有 6 个 csv 文件。我想通过聚合每个目录的这 6 个 csv 来获得 1000 个 csv 文件。

我有以下代码：

```
files<-list.files("/Users/me/Desktop/my_files")
for (i in files)
{
         //open each directory in "files"
        //aggregate all csvs in the directory into one
       //name of the aggregated csvs should be the name of the folder they were inside of
} 
```

我正在尝试使用类似的东西：

```
for (i in files)
{
    files2<-list.files("/Users/me/Desktop/my_files/"i)
} 
```

列出 my_files 目录中的文件，但显然这是错误的语法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T13:29:25.637

我创建了一个文件夹，并用,和`my_files`填充了它。每个文件夹都包含一个带有隐藏消息的 file1.txt。让我们看看这些消息读到了什么。匿名函数可以适应读取所有文件并将它们组合起来。我会让你完成任务。`folder1``folder2``folder3`

```
# I've created a folder "my_files" that is...
setwd("q:/my_files")

# populated by three subfolders
thousand.folders <- list.dirs(full.names = TRUE)

result <- sapply(thousand.folders[-1], function(x) {
  file <- list.files(x, full.names = TRUE)  
  message(readLines(file))
})

file1 in folder1
file1 in folder2
file1 in folder3 
```

# iphone - iphone sdk 中的 GoogleAdMobAds

> ID：15113119
> 
> 赞同：7
> 
> 时间：2013-02-27T13:18:55.590
> 
> 标签：iphone, ios, google-ads-api

我在我的项目中导入了 libGoogleAdMobAds.a 和 Adsupport 框架。和所有头文件。链接器标志为：- -0bjC.Architecture 是 armv7。Xcode：- 4.5.2 和 ios 4.3 及更高版本。

但它仍然给我以下错误： -

```
Undefined symbols for architecture i386:
      "_CGSizeFromGADAdSize", referenced from:
          -[BannerExampleViewController viewDidLoad] in BannerExampleViewController.o
      "_OBJC_CLASS_$_GADBannerView", referenced from:
          objc-class-ref in BannerExampleViewController.o
      "_OBJC_CLASS_$_GADRequest", referenced from:
          objc-class-ref in BannerExampleViewController.o
      "_kGADAdSizeBanner", referenced from:
          -[BannerExampleViewController viewDidLoad] in BannerExampleViewController.o
    ld: symbol(s) not found for architecture i386
    clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

谁能帮我解决这个问题。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-23T06:47:00.023

您必须采取两个步骤：

1.  在构建设置中，选择链接。在此，您将找到“其他链接器标志”。为构建和发布设置 -Objc。
2.  您将使用定义的矩形初始化 Admob。考虑：`AbMod = [GADBannerView alloc]initWithFrame:CGRectMake(0,430,320,50)];`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-22T03:43:48.517

对于遇到此问题的任何人，请查看您是否缺少此文件：libGoogleAdMobAds.a

它解决了我的问题。

伊丹·米

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T14:04:04.417

[https://developers.google.com/mobile-ads-sdk/docs/admob/fundamentals](https://developers.google.com/mobile-ads-sdk/docs/admob/fundamentals)

请检查上面的 url 并下载最新的 google sdk 并尝试一下

注意：您是否将 IAD 框架添加到您的项目中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T16:11:56.343

我觉得它是 .a 静态库构建问题。您可以在[这里](http://google-mobile-dev.googlecode.com/files/BannerExample_iOS_2.7.zip)找到 AdBannerView 的 admob 工作示例。因此，将您的设置与它进行比较。和文档[在这里](https://developers.google.com/mobile-ads-sdk/docs/)。我努力工作并且工作正常。

# c++ - Qt c++ QPixmap 检查其是否已初始化

> ID：15113123
> 
> 赞同：0
> 
> 时间：2013-02-27T13:19:03.620
> 
> 标签：c++, qt, qpixmap

当我尝试检查时，我尝试检查 QPixmap 是否已初始化：

```
QPixmap pix;

    if(pix.data_ptr())
    or
    if(pix != null) 
```

其中 pix 是 QPixmap 类型的成员。

一切都给了我：

```
Access violation reading location 0x0000000c. 
```

如果 pix 为空，我如何签入代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T13:22:47.133

使用`isNull()`功能，

```
if(!item->pix.isNull()) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T16:37:13.450

无法初始化非指针 QPixmap 的唯一情况是执行如下代码时：

```
QPixmap getPixmap()
{
 // no return statement here
}

QPixmap pix = getPixmap();
// now pix is invalid but .isNull() will return false 
```

我对未初始化的 QStrings 也有类似的问题。

# c - 红外十六进制比较

> ID：15113128
> 
> 赞同：-2
> 
> 时间：2013-02-27T13:19:12.200
> 
> 标签：c, arduino

我是 c 编程的新手，正在尝试比较 IR HEX 字符串。我收到错误：左值需要作为赋值的左操作数。

我觉得我的问题在第 31 行左右。这是代码：

```
/* IRremote: IRrecvDemo - demonstrates receiving IR codes with IRrecv
* An IR detector/demodulator must be connected to the input RECV_PIN.
* Version 0.1 July, 2009
* Copyright 2009 Ken Shirriff
* http://arcfn.com
*/

#include <IRremote.h>

int RECV_PIN = 11;
IRrecv irrecv(RECV_PIN);
decode_results results;
String  stringAppleUp;  

void setup()
 {

  Serial.begin(9600);
  irrecv.enableIRIn(); // Start the receiver
 }

void loop() {

if (irrecv.decode(&results)) {
  Serial.println(results.value, HEX);
  Serial.println ("See it");
  stringAppleUp = string('77E150BC');  //apple remote up button

if (    ????        = stringAppleUp)  {
  Serial.println("yes");
  }
else
  {
  Serial.println("No");
  }
irrecv.resume(); // Receive the next value
  }
} 
```

这条线： if (??? = stringAppleUp) 我不知道应该把什么变量放在 ??? 是。

谢谢您的帮助。将要

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T02:20:52.710

你在考虑目标。第一个 results.value 返回一个 uint32_t，而不是字符串。其次，“字符串”与字符数组（又名“字符串”）不同。注意大写的 S。

```
stringAppleUp = String('77E150BC'); 
```

那么你可以

```
String Foo = String('bar');
if (Foo == stringAppleUp ) {
... 
```

Foo 是您要测试的内容。注意“==”的测试与“=”的分配

或者

```
char foo[] = "12345678";
if (strcmp(stringAppleUp, foo)) {
... 
```

你可以在[这里找到数组的 strcmp](http://www.nongnu.org/avr-libc/user-manual/group__avr__string.html#ga46f3cbd2de457c0fb340a1f379fc33ba)

最后，HEX 不是字符串，而是整数。只需测试 results.value。反对另一个整数。

```
#include <IRremote.h>

int RECV_PIN = 11;
IRrecv irrecv(RECV_PIN);
decode_results results;

void setup()
{

  Serial.begin(9600);
  irrecv.enableIRIn(); // Start the receiver
}

void loop() {

  if (irrecv.decode(&results)) {
    Serial.print(F("result = 0x"));
    Serial.println(results.value, HEX);

    if (results.value == 0x77E150BC)  {
      Serial.println("yes");
    }
    else {
      Serial.println("No");
    }
    irrecv.resume(); // Receive the next value
  }
} 
```

# android - 试图理解 getView() 和 Adapters

> ID：15113131
> 
> 赞同：0
> 
> 时间：2013-02-27T13:19:36.150
> 
> 标签：android, listview, checkedtextview

我是 Android 新手，我试图理解为什么以下代码不起作用：

```
...

    matList = (ListView) findViewById(android.R.id.list);
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_multiple_choice, mats);
    matList.setAdapter(adapter);
    matList.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
    matList.setOnItemClickListener(this);

    CheckedTextView v =(CheckedTextView) adapter.getView(1, null, null);
                    v.setText("n1"); 
```

特定行中的文本永远不会改变。我通过单击这样的项目找到了另一种方法（从上面继续）：

```
 matList.performItemClick(adapter.getView(i, null, matList), 2, 2);
}

public void onItemClick(AdapterView<?> arg0, View v, int p, long arg3) {

    CheckedTextView mat = (CheckedTextView) v;
    mat.setText("n2");
} 
```

它有效...... ListView 的第二行变为“n2”，而第一行保持不变......但由于某种原因，它似乎不是正确的方法。我已经尽可能多地搜索了，但我没有设法在上面找到任何东西。请帮助我理解为什么第一种方法不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T13:40:24.137

```
CheckedTextView v =(CheckedTextView) adapter.getView(1, null, null);
                v.setText("n1"); 
```

对于您的目的不正确，您不调用`getView`，`getView`由适配器调用以返回您在 ListView 中显示的视图；如果您愿意，`getView`如果您通过扩展 ArrayAdapter（例如）创建自定义适配器，则可以覆盖。

[你可以看看这个链接](https://stackoverflow.com/questions/8166497/custom-adapter-for-list-view)

# php - 如何使用 php/html 在 pdf 中搜索？

> ID：15113137
> 
> 赞同：-2
> 
> 时间：2013-02-27T13:20:00.753
> 
> 标签：php, html, search, pdf

大家好，我想制作一个可以搜索“许多”pdf文件的搜索引擎。我想搜索 pdf 文件中的内容，而不仅仅是标题。此应用程序用于归档我的文件，因此我可以轻松搜索匹配的单词。例如在 google 中，您可以使用“filetype:.pdf home”，结果将显示所有包含 home 字样的 pdf 文件。那么你能帮我处理这个基于网络的应用程序吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T14:15:21.253

如果您的应用程序在 linux 上运行并且您可以运行系统命令，您可以尝试使用“pdftotext”命令将 pdf 文件转换为纯文本，然后对其进行索引。

请记住，文本将按显示顺序排列，而不是语义正确的顺序（两栏文章会给出非常奇怪的结果），因此显示文本将毫无意义，搜索句子可能无法正常工作。

# objective-c - 目标模式不包含“%”。生成文件

> ID：15113138
> 
> 赞同：33
> 
> 时间：2013-02-27T13:20:03.353
> 
> 标签：objective-c, macos, binding, xamarin.ios, makefile

我在谷歌搜索过这个问题，但仍然没有解决问题的方法。我有 2 个 Makefile：一个作为示例，一个作为我的文件。 ***例子：***

```
BINDDIR=/src/binding
XBUILD=/Applications/Xcode.app/Contents/Developer/usr/bin/xcodebuild
PROJECT_ROOT=XMBindingLibrarySample
PROJECT=$(PROJECT_ROOT)/XMBindingLibrarySample.xcodeproj
TARGET=XMBindingLibrarySample
BTOUCH=/Developer/MonoTouch/usr/bin/btouch

 XMBindingLibrary.dll
libXMBindingLibrarySample-i386.a:
$(XBUILD) -project $(PROJECT) -target $(TARGET) -sdk iphonesimulator -configuration Release clean build -mv $(PROJECT_ROOT)/build/Release-iphonesimulator/lib$(TARGET).a $@
libXMBindingLibrarySample-armv6.a:
$(XBUILD) -project $(PROJECT) -target $(TARGET) -sdk iphoneos -arch armv6 -configuration Release clean      build -mv $(PROJECT_ROOT)/build/Release-iphoneos/lib$(TARGET).a $@

libXMBindingLibrarySample-armv7.a:
$(XBUILD) -project $(PROJECT) -target $(TARGET) -sdk iphoneos -arch armv7 -configuration Release clean build -mv $(PROJECT_ROOT)/build/Release-iphoneos/lib$(TARGET).a $@

libXMBindingLibrarySampleUniversal.a: libXMBindingLibrarySample-armv7.a libXMBindingLibrarySample-i386.a
lipo -create -output $@ $^

XMBindingLibrary.dll: AssemblyInfo.cs XMBindingLibrarySample.cs extras.cs libXMBindingLibrarySampleUniversal.a

$(BTOUCH) -unsafe --outdir=tmp -out:$@ XMBindingLibrarySample.cs -x=AssemblyInfo.cs -x=extras.cs --link-with=libXMBindingLibrarySampleUniversal.a,libXMBindingLibrarySampleUniversal.a

clean:
-rm -f *.a *.dll 
```

***我的文件：***

```
BTOUCH=/Developer/MonoTouch/usr/bin/btouch
BINDDIR=/src/binding
XBUILD=/Applications/Xcode.app/Contents/Developer/usr/bin/xcodebuild
PROJECT_ROOT=IIViewDeckControllerSample
PROJECT=$(PROJECT_ROOT)/IIViewDeckController.xcodeproj
TARGET=IIViewDeckController

all: IIViewDeckController.dll

libIIViewDeckController-i386.a:
$(XBUILD) -project $(PROJECT) -target $(TARGET) -sdk iphonesimulator -configuration Release clean build -mv $(PROJECT_ROOT)/build/Release-iphonesimulator/lib$(TARGET).a $@

libIIViewDeckController-armv7.a:
$(XBUILD) -project $(PROJECT) -target $(TARGET) -sdk iphoneos -arch armv7 -configuration Release clean build  -mv $(PROJECT_ROOT)/build/Release-iphoneos/lib$(TARGET).a $@

libIIViewDeckControllerUniversal.a: libIIViewDeckController-armv7.a libIIViewDeckController-i386.a
lipo -create -output $@ $^

IIViewDeckController.dll: AssemblyInfo.cs APIDefinition.cs StructsAndEnums.cs libIIViewDeckControllerUniversal.a
$(BTOUCH) -unsafe  -out:$@ APIDefinition.cs -x=AssemblyInfo.cs -x=StructsAndEnums.cs --link-with=libIIViewDeckControllerUniversal.a,libIIViewDeckControllerUniversal.a

clean:
-rm -f *.a *.dll 
```

使用示例文件一切正常，我的错误：

```
Makefile:4: *** target pattern contains no `%'.  Stop.
make: *** [all] Error 2 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2014-06-27T22:44:41.760

这是来自 Make 的错误信息。这意味着“您的一个文件名具有可能是正则表达式的一部分的字符”。Make 对文件系统和引用非常幼稚。它不相信：

```
foo:  'The bar.' 
```

指的是文字字符串。它`The`作为一个词，`bar.`作为另一个词，然后在句号上呕吐。改为这样做：

```
foo:  The\ bar\. 
```

或者在你的情况下，反斜杠到`.xcodeproj`.

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2017-10-19T07:58:43.083

这不起作用：

```
default:
        echo "Hello world!"
```

这会：

```
default:
	echo "Hello world!"
```

您看得出来差别吗？

没错，**第一个有空格，第二个有 tabs**。带空格的会给你：

> Makefile:2: *** 缺少分隔符。停止。

这就是为什么我们不能拥有美好的事物...

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2017-09-10T01:13:30.653

这个错误发生在我身上，因为我有一个形式的规则

```
foo: bar:
        baz 
```

（注意尾随`:`）。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2018-10-05T19:03:11.673

确保您的路径中没有`:`，即`cd ${url} => ://`. 如果是这样，请像这样逃避它：

```
cd ${url} => \:// 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-23T00:05:37.677

如果目标文件名（即时间戳）中有冒号，我会遇到这个问题，例如：

```
 all: foo_01:34.txt

 foo_%.txt: bar_%.txt
      foobar $< > $@ 
```

我不得不逃避它：

```
 all: foo_01\:34.txt

 foo_%.txt: bar_%.txt
      foobar $< > $@ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-05-10T06:16:36.277

当您的源文件包含在名称包含冒号 (:) 的目录中时，就会出现问题。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2018-12-19T05:28:21.747

已解决：只需转到它将显示在垂直选项卡部分的项目选项卡，然后转到常规并更改项目的位置

* * *

## 回答 #8

> 赞同：-4
> 
> 时间：2013-02-28T08:37:47.920

将第 11 行放在[https://github.com/mkovalyk/IIViewDeckControllerBinding/blob/master/src/binding/Makefile](https://github.com/mkovalyk/IIViewDeckControllerBinding/blob/master/src/binding/Makefile)上。`%'`不被 make 识别

# android - 如何将 ImageView 角度旋转重置为默认值？

> ID：15113139
> 
> 赞同：2
> 
> 时间：2013-02-27T13:20:06.603
> 
> 标签：android

我有一个 ImagaView，我在其中设置位图并使用 onTouchListener 概念进行了一些旋转。

```
If I set another Bitmap to same imageview,it is displaying in same angle which is left after doing rotation of previous image. 
```

所以，我只希望 ImageView 进入默认位置。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T14:11:13.540

您已经有代码可以在捏合时旋转 imageView，使用该代码将 imageview 的旋转重置为 0（零）。

顺便说一句，评价视图的功能是

```
myImageView.setRotation(float rotationInDegrees); 
```

例如

```
myImageView.setRotation(0); 
```

当您将新图像源应用到图像视图时调用它。

[http://developer.android.com/reference/android/view/View.html#setRotation(float)](http://developer.android.com/reference/android/view/View.html#setRotation%28float%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T16:00:41.513

如果您使用不同的位图，则只需传递`bmp = null;`或

```
if (null!=bmp){
    bmp.recycl();
    bmp=null;
} 
```

并在您的 imageView 中显示已修改的当前位图。

```
if (null!=change)
    imageview.setImageBitmap(change);
else 
    imageview.setImageBitmap(bmp); 
```

等等“以防您有多个位图。您可以在 android 市场上查看我的应用程序，我正在做与您要求的相同的事情！StyleMe - 照片编辑器。

## 编辑

在这种情况下，你必须

```
@Override 
public void onPause(){
    super.onPause();
    if ( all your bitmaps != null ){
        all.recycle;
        all=null;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T16:37:24.730

试试这个链接，这可能对你有帮助

[http://mobile.tutsplus.com/tutorials/android/android-sdk-creating-a-rotating-dialer/](http://mobile.tutsplus.com/tutorials/android/android-sdk-creating-a-rotating-dialer/)

和

[将旋转对象与数值对应](https://stackoverflow.com/questions/11459300/android-corresponding-rotated-object-to-numeric-values?lq=1)

# c# - 为什么返回 -1 而不是 0？

> ID：15113143
> 
> 赞同：0
> 
> 时间：2013-02-27T13:20:12.740
> 
> 标签：c#

最近我注意到为特定实体分配 id 的约定，我注意到如果 id 不存在则返回 -1。为什么返回 -1 而不是 0？

```
protected long AcqAgreementID
{            
    get
    {
        if(ViewState["AcqAgreementID"] != null)
        {
            return Convert.ToInt64(ViewState["AcqAgreementID"]);
        }
        else
        {
            return -1;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T13:21:39.883

我希望选择 -1，因为该值永远不能用于 ID。在这种情况下，它可以用来表示 ID 无效。

看起来这个函数的设计者打算让调用者检查返回值是否是特殊的标记值 -1。如果返回 -1，则调用者应采取适当的步骤。例如，调用者可能会显示或记录错误消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T13:25:50.383

通常 0 是有效的 id 或返回值。考虑一个具有索引或在字符串中搜索的控件。在为包含多个项目的控件查找选定索引或在字符串中查找某个字符的索引时，返回值 0 是完全正常的。索引 0 表示选择的第一个项目或在字符串的第一个位置找到一个字符。在这两种情况下，当没有选择或找到任何内容时都返回 -1。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T13:39:55.197

这是在`.NET`框架中返回索引的方法的标准。

> `public int FindIndex( Predicate<T> match )`方法返回与 match 定义的条件匹配的元素的第一次出现的从零开始的索引（如果找到）；否则，–1。

（[http://msdn.microsoft.com/en-us/library/x1xzf2ca.aspx](http://msdn.microsoft.com/en-us/library/x1xzf2ca.aspx)）

这样调用者就可以按照他们想要的方式处理未找到的 ID/索引。他们可能会抛出异常或通过从其他来源获取 ID；无论他们想要什么。

*相反，可以使用可*空类型，但这些方法的标准是在引入可空类型之前开发的。如果您可以控制此代码，则可以考虑更改它，但返回 -1 并没有错。绝对不要返回 0，因为 0 通常是有效的 ID/索引。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T13:22:38.163

在大多数情况下，您都不应该返回。您很可能应该抛出异常。

返回 0 或 -1 意味着调用程序必须检查这个已知的错误值，而不是简单地捕获异常。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T13:22:43.043

这是[魔术数字](http://en.wikipedia.org/wiki/Magic_number_%28programming%29)反模式的简单案例。

不应该这样做。应该使用常量或定义（取决于语言）。

一般的幻数；引起和你一样的问题和问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-27T13:22:53.510

这个问题有点开放式，有点太笼统了。用“它取决于”之类的东西来回答真的很容易。通常，当 0 是完全合法的域值时，您使用负值（例如，它在 ID 的允许范围内）

然而，这不是一个好用的模式：它让函数/API 的用户感到困惑（就像你一样）。您必须弄清楚该函数返回一个域中的数字（正整数）并且负值是不可能的，因此用作“invalud”值。

例如，在 C#/.NET 中，您应该考虑 Nullable 类型。他们通过添加一个额外的“值/状态”（null）明确地说“这个值不在域中”。除了可为空的类型之外，您应该考虑的其他有效约定是：

*   抛出异常（如 Int.Parse）
*   添加一个`out`参数来指示是否有效（如 Int.TryParse）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-27T13:25:34.623

我在想为 ID 使用不可为空的整数值的地方使用了这种模式。我不喜欢使用 0 作为“默认”/“未分配”ID，因为它是整数类型的默认值。这使我可以查看模型对象以确定它们是否应该插入或更新，并且我还可以判断它是否未知“0”。

这取决于您的架构，正如您从其他几篇文章中看到的那样，它可以针对可空 ID 与不可空 ID 进行宗教战争。

...

作为注释，我还看到/使用了模式，其中模型具有可空类型，该类型在调用需要不可空类型的函数/数据模型之前具有已知值（例如 -1）。这是我们在开发项目中总是进入的“它取决于”的令人敬畏的世界。

# php - 来自数据库 PHP 的数组

> ID：15113144
> 
> 赞同：1
> 
> 时间：2013-02-27T13:20:14.387
> 
> 标签：php, database, arrays, multidimensional-array

嗨，我需要从数据库创建一个数组；myTable 看起来像这样

```
id           | name       | address |
-------------+------------+---------------
1            | Peter      | Union Streeet|
2            | John       | King Street  | 
```

然后我有 sql 将从数据库中选择值

```
$record=mysql_query("SELECT * FROM myTable");
while($row=mysql_fetch_assoc($record)){
      //fill array how to fill array that will look like bellow from database???
} 
```

我需要创建看起来像这样的数组

```
$list = array (
    array('$row[id]', '$row[name]', '$row[address]'),
    // array('$row[id]', '$row[name]', '$row[address]')
    // FOR EACH LINE FROM DATABASE NEW NESTED ARRAY
); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T13:22:48.310

```
$record=mysql_query("SELECT * FROM myTable");
$list = array();
while($row=mysql_fetch_assoc($record)){
      //fill array how to fill array that will look like bellow from database???
    $list[] = row;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T13:23:32.523

试试这个 ：

```
while($row=mysql_fetch_assoc($record)){
     $list[] = $row;
}

echo "<pre>";
print_r($list); 
```

# jquery - jQuery $el.position(...) 未定义

> ID：15113145
> 
> 赞同：5
> 
> 时间：2013-02-27T13:20:15.413
> 
> 标签：jquery, jquery-animate

我有一个导航栏，它使用`<li>`列表中的另一个元素来创建下划线效果，该效果在悬停元素下方进行动画处理，并在鼠标移出时动画回活动元素。

小提琴：http: [//jsfiddle.net/jP59W/](http://jsfiddle.net/jP59W/)

它似乎在 Chrome 和 Firefox 中运行良好，但在 IE (8) 中我得到了一个`invalid argument error`但我看不出是什么原因造成的。

即使它在 Firefox 中工作，它仍然会抛出这个错误：

`$el.position(...) is undefined`这是这一行：

```
leftPos = $el.position().left; 
```

**HTML**

```
<div id="navbar">
    <ul class="clearfix">
        <li class="active">
            <a id="myoeHome" href="#">Welcome</a>
        </li>
        <li>
            <a id="myAccount" href="#">Your Profile</a>
        </li>
        <li>
            <a id="referAFriend" href="#">Refer A Friend </a>
        </li>
        <li>
        <a id="referralReport" href="#">View Rewards </a>
        </li>
        <li>
            <a id="shoutandShare" href="#">Write a Review </a>
        </li>
    </ul>
</div> 
```

**CSS**

```
#navbar {
    position: relative;
    background-color: #ffffff;
    width: 990px;
    margin: -21px 0 0 0;

    padding: 20px 0 0 0;
    height: 35px;

    zoom: 1;
}

#navbar ul {
    width: 945px;
    list-style: none;
    padding: 0 0 0 40px;
    margin: 0 auto;
    text-align: center;
    position: relative;
    top:-13px;

    *margin: -25px auto 0 auto;
}

#navbar ul li {
    display: inline-block;
    text-align: left;

    /* padding: 0 1px 0 1px; */

    /* margin: 0 60px 0 5px; */

    margin: 0 0 0 0;
    padding: 10px 0 24px 0;
    width: 185px;

    *display: inline;
    *zoom: 1;
     *margin: 25px -11px 0 0;
}

#navbar ul li a {
    font-family: Helvetica, Arial;
    font-size: 18px;
    color: #002e55;
    text-align: center;
    padding-bottom: 24px;

    *display: inline;
    *float: left;

 }

#magic-line {
    position: absolute;
    bottom: 8px;
    left: 0;
    height: 3px;
    background: url("http://www.4playtheband.co.uk/assets/nav-magic-line.png") no-repeat center bottom;
    margin: 0 !important;
    padding: 0 !important;

    *bottom: 7px;
    *z-index: 999;
    *height: auto;
 }

#navbar ul li a:hover {
     height: 4px;
     /*border-bottom: 3px solid #002e55;*/

     zoom: 1;

    *margin-top: -39px;

}

#navbar ul li a.active {
    background: url("../images/psd/active-nav-bg.png") no-repeat 49% 2px;
    height: 4px;
    border-bottom: 3px solid #002e55;

    zoom: 1;
} 
```

**jQuery**

```
// nav
var $el, leftPos, newWidth,
$mainNav = $("#navbar ul");

$mainNav.prepend("<li id='magic-line'></li>");
var $magicLine = $("#magic-line");

function navBar() {
    // console.log('navBar start');
    function checkActive() {
        // console.log('check active');
        // Hide magic line if nav bar has no active element
        if($('#navbar ul').children('.active').length < 1) {
            $magicLine.hide();
            //console.log($('#navbar ul').children('.active').length < 1);
            //console.log($('#magic-line'));
            //console.log('hide');
        }
        else {
            $magicLine.stop().animate({
                left: $magicLine.css('left', $(".active a").css('left')),
                width: $magicLine.width($(".active a").width())
            });
        }
    }
    checkActive();
    $magicLine
        .width($(".active a").width())
        .css("left", $(".active a").position().left)
        .data("origLeft", $magicLine.position().left)
        .data("origWidth", $(".active a").width());

    // $("#navbar ul li a").hover(function() {
    // apply hover function to li instead and just just el to it's child
    $("#navbar ul li").hover(function() {
        // $el = $(this);
        $el = $(this).children('a');
        leftPos = $el.position().left;
        newWidth = $el.width();
        $magicLine.stop().animate({
            left: leftPos,
            width: newWidth
        }, 600);
    }, function() {
        if($('#navbar ul').children('.active').length < 1) {
            $magicLine.stop();
            checkActive();
        } else {
            $magicLine.stop().animate({
                left: $magicLine.data("origLeft"),
                //width: $magicLine.data("origWidth")
                width: $magicLine.width($(".active a").width())
            }, 600);
        }
    });
}

$(document).ready(function() {
    $magicLine.width($(".active a").width());
    navBar();
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-03-30T03:41:48.153

发生此类问题时，我见过两种情况：

1.  您正在检查的项目当前隐藏（从未显示）或不在文档 DOM 中，因此没有实际坐标（您可以创建 DOM 片段）

2.  jQuery 对象（`$el`在您的情况下为 list ）为空；你可以通过测试知道`$el.length == 0`

由于`parent()`电话对您有用，因此您的问题肯定是案例（1）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T12:37:14.980

发现了问题。

改变了

```
leftPos = $el.position().left; 
```

到

```
leftPos = $el.parent().position().left; 
```

这解决了它。

# php - 为什么我不能多次重复使用 mysqli->realquery 而不再次连接？

> ID：15113146
> 
> 赞同：0
> 
> 时间：2013-02-27T13:20:16.817
> 
> 标签：php, mysqli

我第一次尝试使用 mysqli，我需要沿着我的脚本做一些查询。这是基本流程：

```
$mysqli = new mysqli("localhost", "root", "", "kiosk");
if ($mysqli->connect_errno) { echo "Failed to connect to MySQL: (" . $mysqli->connect_errno . ") " . $mysqli->connect_error; }

$mysqli->real_query("SELECT * FROM screens WHERE name = '" . $screen_code . "'");
$res = $mysqli->use_result();
$row = $res->fetch_assoc();

print_r(_content($row['wcode']));
die();

function _content($wcode) {
  global $mysqli;
  $mysqli->real_query("SELECT * FROM content WHERE wcode= '" . $wcode. "' ORDER BY id ASC");
  $res = $mysqli->use_result();
} 
```

mysql查询是正确的，已经直接在mysql上测试过，如果在_content中我重新连接到数据库一切正常，但我不想每次想查询时都连接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T13:48:49.140

使用时，`use_result()`您必须特别注意在使用同一连接发出新命令/语句之前检索完整的结果集。`store_result()`为您处理此过程。见[https://dev.mysql.com/doc/refman/4.1/en/mysql-use-result.html](https://dev.mysql.com/doc/refman/4.1/en/mysql-use-result.html)：

> 使用 mysql_use_result() 时，必须执行 mysql_fetch_row() 直到返回 NULL 值，否则，未获取的行将作为下一个查询的结果集的一部分返回。`Commands out of sync; you can't run this command now`如果您忘记执行此操作，C API 会给出错误！

php/mysql API 也是如此。

您可以通过[JOIN将两个查询合并为一个](https://dev.mysql.com/doc/refman/5.5/en/join.html)

```
SELECT
    c.foo, c.bar, c.baz
FROM
    screens as s
LEFT JOIN
    content as c
ON
    s.wcode=c.wcode
WHERE
    s.name = 'something'
ORDER BY
    c.id 
```

从而避免所有这些麻烦......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T13:42:41.500

我是 MySQLi 的新手，昨天才开始使用它。尝试使用`query()`而不是`real_query()`它对我来说很好。

# android - Android USB HOST 发现设备

> ID：15113148
> 
> 赞同：0
> 
> 时间：2013-02-27T13:20:22.030
> 
> 标签：android, filter, usb, device, host

我正在尝试使用 OTG 电缆将 USB 设备连接到 Samsumg Galaxy。我根据[http://developer.android.com/guide/topics/connectivity/usb/host.html](http://developer.android.com/guide/topics/connectivity/usb/host.html)教程制作了一个简单的代码，但它根本不起作用。到目前为止，我已经意识到动作始终是 android.intent.action.MAIN。也许这就是设备总是为空的原因。有人对这种程序有任何运气吗？

这是我的代码：

protected void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState);

```
setContentView(R.layout.activity_microstrain);

EditText find_device = (EditText)findViewById(R.id.find_device);

Intent intent = getIntent();

String action = intent.getAction();
Toast toast = Toast.makeText(getApplicationContext(), action,  Toast.LENGTH_SHORT);
toast.show();

UsbManager manager = (UsbManager) getSystemService(Context.USB_SERVICE);

UsbAccessory device = (UsbAccessory)  intent.getParcelableExtra(UsbManager.EXTRA_ACCESSORY);

find_device.setText((CharSequence) device);

} 
```

和清单：

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<uses-feature android:name="android.hardware.usb.host"/>

<uses-sdk
    android:minSdkVersion="16"
    android:targetSdkVersion="16" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" 
    android:launchMode="singleTask">
    <activity
        android:name="com.example.microstrain.MICROSTRAIN"
        android:label="@string/app_name" >

       <intent-filter >
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.HOME"/>
    <category android:name="android.intent.category.DEFAULT" />
    <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter> 
    <intent-filter>
        <action android:name="android.hardware.usb.action.USB_DEVICE_ATTACHED" />
    </intent-filter>
         <meta-data android:name="android.hardware.usb.action.USB_DEVICE_ATTACHED"  
             android:resource="@xml/device_filter" />
    </activity>
   <uses-library android:name="android.test.runner" />
</application>

<instrumentation android:name="android.test.InstrumentationTestRunner"
android:targetPackage="com.example.microstrain"
android:label="microstrain" /> 
```

和 xml/device_filter.xmk：

```
<?xml version="1.0" encoding="utf-8"?>

<resources>
   <usb-device vendor-id="6555" product-id="15717"/>  
</resources> 
```

# c# - linq中的最大函数

> ID：15113150
> 
> 赞同：-2
> 
> 时间：2013-02-27T13:20:28.177
> 
> 标签：c#, asp.net, linq

我想用 linq 在菜单表中接收最大 parentID。我使用这个代码：

```
var orderMenu = (from M in conn.Menus.ToList()
                                    where M.ParentID == _type
                                    select M.ParentID).Max(); 
```

但显示错误：

```
Sequence contains no elements 
```

（表格可能是空的）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T13:22:30.097

该查询是完全多余的。

您要求所有元素 where `M.ParentID == _type`，所以`Max`要么什么都没有（观察到的错误），要么`_type`，这取决于是否存在这样的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T13:23:25.987

如果你想返回说，最大值，或者如果集合中不存在任何东西，则返回零，你可能想要使用`DefaultIfEmpty()`加上`Max()`

```
var orderMenu = (from M in conn.Menus.ToList()
                                select M.ParentID).DefaultIfEmpty(0).Max(); 
```

# file-upload - 机器人框架文件上传

> ID：15113155
> 
> 赞同：0
> 
> 时间：2013-02-27T13:20:40.943
> 
> 标签：file-upload, robotframework

我必须编写一个必须上传文件的测试。这可能使用机器人框架吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T03:39:51.367

*SeleniumLibrary*中有一个**选择文件**关键字

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-22T16:21:27.423

我用了很多次我只是在机器人框架中写了一个函数，它需要 2 个参数 1 文件名 2 浏览位置

```
File Upload for Creative
[Arguments]         ${file}=
...                 ${browsrLocator}=
${NORMAL_PATH_UPLOAD_FILE_NAME}      Normalize Path       ${DataFiles}/${file}
Choose File         ${browsrLocator}        ${NORMAL_PATH_UPLOAD_FILE_NAME}
Sleep   3s 
```

而已 ..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-13T15:55:24.537

选择文件关键字可以在文件上传文本字段中输入带有名称的文件路径。但是，在单击文件然后单击“打开”按钮的窗口中，关键字无法与选择文件进行交互。要在打开文件窗口中单击文件并单击打开按钮，您可以使用 Robot Framework AutoItLibrary 关键字。 [查看 Robot Framework File Upload 的视频教程](https://youtu.be/AbK-tdKqs8Q)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-26T15:35:17.820

这以及其他涉及在 DOM 外部单击的问题可以通过几种方式解决。选择文件可能可以使用，但我从未尝试过，我已经看到了其他几个技巧来做同样的事情。

第一种是使用 AutoIT 在 DOM 外部单击，就像用户在进行手动测试时一样。我自己从未使用过它，但我已经看到它在 Robot Framework 中用于最小化窗口、打开 MS Paint 并画一条线，所以我很确定它也可以用于此目的。

第二种方法是通过创建一个机器人框架关键字来点击 DOM 外的截图。这就是我一直用来点击我无法通过 Robot Framework 正常访问的按钮的方法。使用截图工具来截图你想要点击的位置，中间的位置。它有点挑剔，但易于使用，所以我喜欢它。这是它的 Python 2.7.13 代码。

```
def click_by_image(self, image_name):
    if self.selenium_lib is None:
        self.selenium_lib = BuiltIn().get_library_instance('ExtendedSelenium2Library')
    pag.click(pag.locateCenterOnScreen(str(image_name))) 
```

假设您熟悉创建新的 Robot Framework 关键字（有关详细信息，请参阅其他问题/答案，这超出了本问题的范围），实现这一点应该非常简单。

编辑：我最近切换到选择文件，因为可以假设 Windows（或您正在运行的操作系统）GUI 正在工作，并且可以手动执行 Robot Framework 正在自动化的操作。有时单击几下也会更快，更可靠，并且可以在您关注另一个窗口时在后台运行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-05T06:16:05.673

ChooseFile 将在给定的定位器中粘贴文件路径。这就像仅输入文本。您可以将 AutoIT 用于此记录 autoit 脚本并将其转换为 au3 文件并按如下方式 **运行 Run And Return RC auitscriptforfileupload.au3**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-05-28T08:33:01.453

选择文件效果最好

例如：从执行目录导入文件以获取有关文件路径检查操作系统库的更多详细信息

```
Click Element    ${IMPORT}
Choose File      ${LOCATE_FILE}    ${CURDIR}${/}filename.txt
Click Element    ${VALIDATE_IMPORT} 
```*

# jquery - 在 twitter bootstrap 中重新加载当前活动选项卡

> ID：15113157
> 
> 赞同：4
> 
> 时间：2013-02-27T13:20:42.643
> 
> 标签：jquery, twitter-bootstrap

我正在遵循有关如何使用以下方法重新加载当前活动选项卡的[建议：](https://stackoverflow.com/questions/11388074/twitter-bootstrap-reload-current-tab)

```
$('#tab-loaded-content').load($('li.active a[data-toggle="tab"]').attr('href')); 
```

但是当我尝试这个时，结果是它加载了最初的活动选项卡（在我的 html 中定义为活动的选项卡）而不是当前活动选项卡。所以我正在寻找一些帮助来弄清楚如何做到这一点。

这是我的问题的简化版本：

```
<!DOCTYPE html>
  <html>
    <head>
      <link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.0/css/bootstrap-combined.min.css" rel="stylesheet">
    </head>
  <body>
    <div class="tabbable">      
      <ul id="mainTabs" class="nav nav-tabs">
        <li class="active"><a href="#tabWelcome" data-toggle="tab">Home</a></li>
        <li><a href="#tabProject" data-toggle="tab">Project</a></li>
        <li><a href="#tabEmail" data-toggle="tab">Invite Friends</a></li>
        <li><a href="#tabProfile" data-toggle="tab">My Profile</a></li>
      </ul>
      <div class="tab-content">
        <div class="tab-pane active" id="tabWelcome">
          welcome
        </div>
        <div class="tab-pane" id="tabProject">
          project
        <button id="button" class="btn">Create Project</button>
      </div>
      <div class="tab-pane" id="tabEmail">
        email
      </div>
        <div class="tab-pane" id="tabProfile">
          profile
        </div>
      </div>
</div>
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.0/js/bootstrap.min.js"></script>
<script>
    document.getElementById("button").addEventListener("click", function() {
        $('#mainTabs').load($('li.active a[data-toggle="tab"]').attr('href'));
    }, false);
</script>
</body>
</html> 
```

这个想法是当单击第二个选项卡上的“项目”按钮时，它应该重新加载该选项卡，但它会重新加载“欢迎”选项卡。

任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-12-05T11:01:24.613

我必须实现一个非常相似的功能。

基本上你需要掌握当前标签“停用”并再次显示它。

```
$(document).on('click', '#refresh', function () {
    var $link = $('li.active a[data-toggle="tab"]');
    $link.parent().removeClass('active');
    var tabLink = $link.attr('href');
    $('#mainTabs a[href="' + tabLink + '"]').tab('show');
}); 
```

有关工作演示，请参阅我的[jsFiddle](http://jsfiddle.net/ceokot/RqmKw/6/)。

请注意，演示使用的是 Bootstrap 3，因此使用`shown.bs.tab`事件来显示选项卡加载的时间。

# android - 三星s2中的Android admob案例错误

> ID：15113161
> 
> 赞同：1
> 
> 时间：2013-02-27T13:20:51.887
> 
> 标签：android, admob

错误是：

```
02-27 18:41:58.658: E/Ads(30699): An error occurred while destroying an AdWebView:
02-27 18:41:58.658: E/Ads(30699): java.lang.NullPointerException
02-27 18:41:58.658: E/Ads(30699):   at android.webkit.WebView.setWebViewClient(WebView.java:5168)
02-27 18:41:58.658: E/Ads(30699):   at com.google.ads.internal.AdWebView.destroy(SourceFile:252)
02-27 18:41:58.658: E/Ads(30699):   at com.google.ads.internal.c$e.run(SourceFile:191)
02-27 18:41:58.658: E/Ads(30699):   at android.os.Handler.handleCallback(Handler.java:605)
02-27 18:41:58.658: E/Ads(30699):   at android.os.Handler.dispatchMessage(Handler.java:92)
02-27 18:41:58.658: E/Ads(30699):   at android.os.Looper.loop(Looper.java:137)
02-27 18:41:58.658: E/Ads(30699):   at android.app.ActivityThread.main(ActivityThread.java:4511)
02-27 18:41:58.658: E/Ads(30699):   at java.lang.reflect.Method.invokeNative(Native Method)
02-27 18:41:58.658: E/Ads(30699):   at java.lang.reflect.Method.invoke(Method.java:511)
02-27 18:41:58.658: E/Ads(30699):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
02-27 18:41:58.658: E/Ads(30699):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
02-27 18:41:58.658: E/Ads(30699):   at dalvik.system.NativeStart.main(Native Method)
02-27 18:41:58.683: I/Ads(30699): onReceiveAd() 
```

我使用了以下代码：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >
    <com.google.ads.AdView
        android:id="@+id/ad"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        ads:adSize="BANNER"
        ads:adUnitId="........."
        ads:loadAdOnCreate="true" />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T13:36:42.950

获取使用以下链接的解决方案：

[https://developers.google.com/mobile-ads-sdk/download](https://developers.google.com/mobile-ads-sdk/download)

下载最新的jar文件使用6.3.0 jar就可以解决问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T13:32:34.563

```
An error occurred while destroying an AdWebView:
at android.webkit.WebView.setWebViewClient(WebView.java:5168) 
```

这只是 AdMob SDK 在设置`WebViewClient`. 这不是你的错。~~你对此无能为力。~~使用最新版本的 SDK。

# delphi - Delphi：OleVariant 和泛型

> ID：15113162
> 
> 赞同：7
> 
> 时间：2013-02-27T13:20:54.017
> 
> 标签：delphi, generics

考虑以下代码提取：

```
type
  MyIntf = interface
    procedure Work(param: OleVariant);
  end;

  MyClass<T> = class
    procedure MyWork(param: T);
  end;

var
  intf: MyIntf;

procedure MyClass<T>.MyWork(param: T);
begin
  //compiler error: E2010 Incompatible types: 'OleVariant' and 'T'
  intf.Work(param);
end; 
```

如上所示，这无法使用错误消息进行编译。我怎么能从我的泛型类中调用该`Work`函数？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-27T13:34:48.670

您的代码无法编译，因为编译器无法在泛型类的编译时保证有可能转换为所有可以想象的`T`.

面对时

```
intf.Work(param); 
```

在泛型方法中，编译器需要知道如何转换`param`为`OleVariant`. 它不能这样做。这是泛型与模板相比的限制之一。

* * *

`TValue`最简单的解决方案是在单元的帮助下在运行时进行转换`Rtti`。

```
procedure MyClass<T>.MyWork(param: T);
begin
  intf.Work(TValue.From<T>(param).AsVariant);
end; 
```

这是一个示例测试程序来证明可以`TValue`完成这项工作：

```
program SO15113162;
{$APPTYPE CONSOLE}

uses
  Rtti;

procedure Work(param: OleVariant);
begin
  Writeln(param);
end;

type
  MyClass<T> = class
    class procedure MyWork(param: T);
  end;

class procedure MyClass<T>.MyWork(param: T);
begin
  Work(TValue.From<T>(param).AsVariant);
end;

begin
  MyClass<Double>.MyWork(2.4);
  MyClass<string>.MyWork('hello');
  MyClass<Integer>.MyWork(-666);
  Readln;
end. 
```

**输出**

```
2.4
你好
-666

```

# c# - 嵌套视图模型：按钮操作和通信？

> ID：15113163
> 
> 赞同：1
> 
> 时间：2013-02-27T13:20:54.463
> 
> 标签：c#, wpf, mvvm, caliburn.micro

这将是一个冗长的问题，但长期以来我一直在通过构建丑陋的大型一体化课程来回避这个问题。

例如，我正在编写一个带有 MVVM 设计的 WPF 独立应用程序（我也使用 Caliburn.Micro），并且有一个`MainViewModel`带有`MainView`. 这个视图包含一个`StackPanel`，它的内容`StackPanel`绑定到一个 ViewModel `CentralVM`：

```
<StackPanel DockPanel.Dock="Top">
     <ContentControl Margin="10" Name="CentralVM"/>
</StackPanel> 
```

在`MainViewModel`课堂上，我有几个其他的 ViewModel，

```
private PropertyChangedBase _centralVM = new PropertyChangedBase();        
private LoggedInViewModel _loggedInVM = new LoggedInViewModel();
private LoginViewModel _logInVM = new LoginViewModel();

public PropertyChangedBase CentralVM {
    get { return _centralVM; }
    set { _centralVM = value; NotifyOfPropertyChange(() => CentralVM); }
}
public LoggedInViewModel LoggedInVM {
    get { return _loggedInVM; }
    private set { _loggedInVM = value; }
}
public LoginViewModel LoginVM {
    get { return _logInVM; }
    private set { _loginVM = value;}
} 
```

现在，在`MainViewModel`I 集合的构造函数中

```
CentralVM = LoginVM 
```

然后`StackPanel`自动绑定 View `LoginView`。会按照`LoginView`您的猜测进行，即您可以输入（用户名，密码），并且有一个评估条目的按钮，如果它是正确的，我想将设置切换`CentralVM`为`LoggedInVM`. 但是按钮事件“存在”在 的`LoginVM`实例中`LoginViewModel`，那么如何访问 中的`CentralVM`属性`MainViewModel`？

这当然只是一般问题的一个例子。我的第一个想法是执行以下操作：

-包含一个在单击按钮时设置`LoginVM`的属性（字符串类型） 。`LoggedInAs`-我向 中添加一个方法`MainViewModel`，如下所示：

```
private _loggedIn = false;
private void CheckForLoginChange() {
    if (_loggedIn == false && !String.IsNullOrEmpty(LoginVM.LoggedInAs)) {
        _loggedIn = true; 
        CentralVM = LoggedInVM;
    }
} 
```

- 最后，我将此方法调用添加到 的设置器中`LoginVM`，即

```
public LoginViewModel LoginVM {
    get { return _logInVM; }
    private set { _logInVM = value; CheckForLoginChange(); }
} 
```

但这不起作用。是不是因为虽然`LoginVM`点击按钮事件时发生了变化，但没有调用setter？

感谢您在这个方向上的任何帮助。我非常感谢一个详细的答案，而不仅仅是一些对“EventAggregators”或“Messengers”的流行语引用——我知道它们与可能的解决方案有关，但我还没有找到我能理解的好的文档......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T13:29:14.323

实际上，这正是 Event Aggregator 的工作。你有一个内置的 Caliburn.Micro。

这很容易，两者都`MainViewModel`应该`LoginViewModel`将聚合器作为依赖项：

```
private readonly IEventAggregator eventAggregator;
public MainViewModel(IEventAggregator eventAggregator)
{
    this.eventAggregator = eventAggregator;
    this.eventAggregator.Subscribe(this);
} 
```

对于`LoginViewModel`. 这里有一点警告，它们都应该接收*相同*的事件聚合器实例，因此事件可以正确传播（实际上，最好将 IoC 容器设置`IEventAggregator`为单例注入）。

现在`MainViewModel`应该实现，将作为消息的类`IHandle<T>`在哪里，比方说：`T`

```
public class LogInSuccessful
{
    public readonly string LoggedInAs;
    public LogInSuccessful(string loggedInAs)
    {
        LoggedInAs = loggedInAs;
    }
} 
```

然后

```
public class MainViewModel : ... , IHandle<LogInSuccessful>
{
    ....
    public void Handle(LogInSuccessful message)
    {
        //here you can change the VM and access message.LoggedInAs string. 
        //This method will be called when there's an appropriate event published
        //to the same event aggregator that the MainViewModel is subscribed to.
    }
} 
```

要发布事件，您必须在内部获取事件聚合器`LoginViewModel`，然后在某个时间点调用：

```
eventAggregator.Publish(new LogInSuccessful("Admin")); 
```

* * *

进一步编辑

这样，`LoginViewModel`只做一件事 - 验证凭据。如果它们有效，它会将事件发布到`MainViewModel`管理屏幕并应采取适当措施的 。`LoginViewModel`不应该“手动”更改主视图模型上的任何屏幕，这不是它的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T17:03:11.643

在回答您最后的评论时，您可以自定义引导程序，但老实说，如果您不打算使用 IoC 容器并且对该抽象级别不感兴趣，您可以只使用静态类来保存聚合器。

当然，您与实现耦合，但如果您只运行一个小项目并且对 DI/IoC 部分不感兴趣，它会做。

简单的类可能是

```
static class EventAggregatorProvider 
{ 
    private static EventAggregator _aggregator = new EventAggregator();

    public static EventAggregator Aggregator { get { return _aggregator; } }
} 
```

然后在您的代码中，只需通过静态类访问它：

```
public void SomeMethod()
{
    // Do something
    EventAggregatorProvider.Aggregator.Publish(new SomeMessage());
} 
```

# android - 在我的 android 应用程序中维护用户名

> ID：15113169
> 
> 赞同：0
> 
> 时间：2013-02-27T13:21:21.287
> 
> 标签：android

我正在创建一个简单的登录应用程序。登录成功后将显示用户名。在这里，我通过意图发送用户名，`Login Page`如下`Second Page`所示

```
String sendusername=results;
            Intent inte=new Intent(Login.this,SubmitActivity.class);
            inte.putExtra("displayusername", sendusername);
            startActivity(inte); 
```

在第二页中接收该意图，如下所示：

```
Intent inte=getIntent();
    final String Username=inte.getStringExtra("displayusername"); 
```

我在 .But 中显示了这个值`TextView`。但是，这里的问题是，当我回到第二页时，当我移动到转发页面后，它显示`null`的值代替了用户名。有人可以给我一个想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:25:33.337

看看使用 SharedPreferences。这是 Android 应用程序中最接近全局数据的东西。

保存用户名：

```
SharedPreferences prefs = context.getSharedPreferences("myPrivateData",
    PreferenceActivity.MODE_PRIVATE);
SharedPreferences.Editor editor = prefs.edit();
editor.putString("username", username);
editor.commit(); 
```

并读取用户名：

```
SharedPreferences prefs = context.getSharedPreferences("myPrivateData",
    PreferenceActivity.MODE_PRIVATE);
username = prefs.getString("username", null);  // where null is the default 
```

并确保在您的应用首次启动时清除此设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T13:25:01.633

登录后，您可以将用户名保存在共享首选项中，并且您可以随时获取用户名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T14:43:08.790

对我来说最好的方法是使用 Application 类。

请参阅此处的 android 文档：

[http://developer.android.com/reference/android/app/Application.html](http://developer.android.com/reference/android/app/Application.html)

并查看这篇文章：

[使用 Android Application 类来持久化数据](https://stackoverflow.com/questions/4208886/using-the-android-application-class-to-persist-data)

当你需要更多变量时，你可以简单地将它们添加到这个类中，基本上可以在任何你想要的地方使用它们。

# php - 因为我可以将查询结果排序到我的 sql 数据库？

> ID：15113170
> 
> 赞同：-3
> 
> 时间：2013-02-27T13:21:21.760
> 
> 标签：php, mysql, sql

我需要你帮帮我

我尝试了几种方法，我得到了错误

排序如下： 率 DESC 年龄 ASC 身高 DESC 体重 ASC

也想按字段排序

如果你能用一个例子来解释，那将是完美的注意顺序的方式和位置

```
 <? Php

                   $ O ='';
                   / / Put the appropriate information:
                   $ Data = array ('localhost', 'user', 'password');
                   $ Con = mysql_connect ($ data [0], $ data [1], $ data [2]);

                   if ($ con) {
                   $ O = 'Error: Could not connect to server. '. mysql_error ();
                   echo $ o;
                   exit;
                   }

                   / / Change the name of the database for yours
                   $ Db_name = 'database';

                   if (mysql_select_db ($ db_name, $ con)) {
                   $ O = 'Error: Could not select database "'. $ Db_name. '". '.                        mysql_error ();
                   echo $ o;
                   exit;
                   }

                   $ Table = 'users' / / Change this only if you know what it does.
                   $ Query = "SELECT * FROM $ table";
                   $ Where = "WHERE";
                   $ And = 0;

                   if (isset ($ _GET ['name']) &&! empty ($ _GET ['name'])) {
                   $ Where. = "Name LIKE '% $ _GET [name]%'";
                   $ And = 1;
                   }

                   if (isset ($ _GET ['rate'])) {
                   $ E = explode ('-', $ _GET ['rate']);

                   if (is_numeric ($ e [0]) && is_numeric ($ e [1])) {
                   if ($ and === 1)
                   $ Where. = "AND";

                   $ Where. = "Rate BETWEEN $ e [0] AND $ e [1]";
                   $ And = 1;
                   }
                   }

                   if (isset ($ _GET ['age'])) {
                   $ E = explode ('-', $ _GET ['age']);

                   if (is_numeric ($ e [0]) && is_numeric ($ e [1])) {
                   if ($ and === 1)
                   $ Where. = "AND";

                   $ Where. = "Age BETWEEN $ e [0] AND $ e [1]";
                   $ And = 1;
                   }
                   }

                   if (isset ($ _GET ['Height'])) {
                   $ E = explode ('-', $ _GET ['Height']);

                   if (is_numeric ($ e [0]) && is_numeric ($ e [1])) {
                   if ($ and === 1)
                   $ Where. = "AND";

                   $ Where. = "Height BETWEEN $ e [0] AND $ e [1]";
                   $ And = 1;
                   }
                   }

                   if (isset ($ _GET ['weight'])) {
                   $ E = explode ('-', $ _GET ['weight']);

                   if (is_numeric ($ e [0]) && is_numeric ($ e [1])) {
                   if ($ and === 1)
                   $ Where. = "AND";

                   $ Where. = "Weight BETWEEN $ e [0] AND $ e [1]";
                   $ And = 1;
                   }
                   }

                   if (isset ($ _GET ['City']) &&! empty ($ _GET ['city'])) {
                   if ($ and === 1)
                   $ Where. = "AND";

                   $ Where. = "City = '$ _GET [City]'";
                   $ And = 1;
                   }

                   if (isset ($ _GET ['Eyes']) &&! empty ($ _GET ['Eyes'])) {
                   if ($ and === 1)
                   $ Where. = "AND";

                   $ Where. = "Eyes = '$ _GET [Eyes]'";
                   $ And = 1;
                   }

                   if (isset ($ _GET ['Hair']) &&! empty ($ _GET ['Hair'])) {
                   if ($ and === 1)
                   $ Where. = "AND";

                   $ Where. = "Hair = '$ _GET [Hair]'";
                   $ And = 1;
                   }

                   if (strlen ($ where)> 6)
                   $ Query. = $ Where;

                   $ Result = mysql_query ($ query, $ con);

                   if ($ result) {
                   $ Nrows = mysql_num_rows ($ result);

                   if ($ nrows> 0) {
                   $ O ='';

                   while ($ row = mysql_fetch_assoc ($ result)) {

                   $ O. = "$ Row [image]";
                   }

                   $ O. = "";
                   Else {}
                   $ O = 'There were no results';
                   }
                   Else {}
                   $ O = 'Error: Unable to run the query. '. mysql_error ($ con);
                   }

                   mysql_free_result ($ result);
                   mysql_close ($ con);
                   echo $ o. "";
                   exit;
                   ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T14:52:06.200

在尝试修复 SQL 错误之前，请修复 PHP 错误。例如; `$ O`不正确，应该是`$O`和`$_GET[]`。此外，PHP 区分大小写，因此`$o`当您的意思是`$O`.

关于 SQL，正如 Benjamin 指出的那样，您需要在 SQL 关键字之前和之后放置空格，并且`$ Query. = $ Where;`可能应该是`$Query. = " ".$Where;`

此外，由于用户的权限取决于他们正在访问的数据库，因此您应该在提供用户详细信息之前选择数据库。（或同时）。

对于复杂的查询，请尝试使用 MySQL shell。一旦你弄清楚了查询，然后把它交给 PHP 端。至少我是这样做的。

祝你好运，小睡

# c# - 从服务器上的 SignalR 集线器设置 cookie

> ID：15113176
> 
> 赞同：9
> 
> 时间：2013-02-27T13:21:53.700
> 
> 标签：c#, asp.net, signalr

无论如何我可以从 SignalR 集线器内部设置一个 cookie，特别是`OnConnected`方法。我想发送一个带有会话 ID 的 cookie。

我试过这个，但它似乎没有用，它看起来也很尴尬，因为我不确定为什么我需要提供一个字符串和一个 cookie 的键值对。

```
public override Task OnConnected()
{
    var guid = new Guid();
    Context.RequestCookies.Add("SessionID", new Microsoft.AspNet.SignalR.Cookie("SessionID", guid.ToString()));
    return null;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-06-14T19:35:29.627

这是一个老问题，但如果有人偶然发现它，有一种方法可以从 Signalr 2.0+ 中的集线器添加 cookie。HttpContextBase 可以通过中心请求上下文访问，因此您可以执行以下操作：

```
var newCookie = new HttpCookie("cookieName", "cookieValue");
Context.Request.GetHttpContext().Response.Cookies.Add(newCookie); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T17:37:27.040

我最终决定从服务 MVC 控制器设置 cookie，但无论如何我都找不到在 SignalR 调用中设置它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T13:54:20.323

我选择子类化并使用 PersistentConnection 而不是 Hub，以便在服务器上有更多选项。

在我的情况下，我覆盖 OnConnectedAsync 并使用其中的 connectionId 来跟踪连接/会话。也许您可以考虑这种方法？

```
protected override Task OnConnectedAsync(IRequest request, string connectionId)
    { 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-13T23:30:06.733

Signal-R 是一个通信信道。它将尝试假设可能的最佳速度/技术，但会很好地降级，直到它以长轮询 http 请求结束。

当前最优的网络连接是使用 Websockets 建立的，但你不能依赖 100%

请注意，每个已建立的 Signal-R 连接还生成一个唯一 URL 作为连接请求的参数。这个参数是“连接ID”，如果你刷新浏览器，它会生成一个新的。

因此，如果您使用 cookie 作为“会话标识符”以便即使用户决定刷新浏览器也可以保持会话，请注意 cookie 值也会在该设备上打开的所有浏览器选项卡之间共享。

您不能从集线器的响应中写入 Cookie，但您可以使用例如编写 Cookie。Razor/MVC 控制器或纯 javascript...在您打开 Signal-R 连接之前 - 然后您可以从`Context.GetHttpContext().Request.Cookies`集合中读取该 Cookie 值。

但只读！

关键是，在普通 Razor 页面或任何您拥有的方式上创建“登录系统”，然后编写您需要的 cookie - 然后打开 Signal-R 连接并利用该会话用于您可能有的任何目的。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-04-05T07:29:49.897

我只是尝试了同样的事情，这似乎有效：

```
HttpContext.Current.Response.Cookies.Add(cookie); 
```

# python - 在 Python 扩展模块中将标准输入设置为宽字符方向

> ID：15113180
> 
> 赞同：1
> 
> 时间：2013-02-27T13:22:01.487
> 
> 标签：python, input, python-c-extension, widechar

在 C Python 扩展模块中，我使用了一个库，它可以执行**`fwide(stdin,1)`**. 这导致**`EOFError`**我**`input()`**在 Python 代码中调用。当我避免`fwide(stdin,1)`使用模块的 C 代码时，python 代码可以正常工作。

问题是，是否可以让 python 与宽字符一起工作`stdin`，还是必须`stdin`为 Python 保留窄字符模式？这是 Python 中的一个错误（它似乎不介意*stdout*设置为宽还是窄）？

这是 Python 3，我不知道 python 2 是否有相同的行为。

# numpy - 在周期性条件下切片numpy数组

> ID：15113181
> 
> 赞同：3
> 
> 时间：2013-02-27T13:22:03.610
> 
> 标签：numpy, python-2.7

如何在周期性条件下切片 3x3 形状的 numpy 数组。

例如，为简单起见，它是一维的：

```
import numpy as np
a = np.array(range(10)) 
```

如果切片在数组的长度范围内，则很简单

```
sub = a[2:8] 
```

结果是`array([2, 3, 4, 5, 6, 7])`。现在，如果我需要从 7 切片到 5 ......

```
sub = a[7:5] 
```

结果很明显`array([], dtype=int32)`。但我需要的是`array([7,8,9,0,1,2,3,4])`

有什么有效的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T13:38:34.937

我认为您正在寻找的是[numpy.roll](http://docs.scipy.org/doc/numpy/reference/generated/numpy.roll.html)。从例子：

```
x = np.arange(10)

np.roll(x, 2)
array([8, 9, 0, 1, 2, 3, 4, 5, 6, 7])

np.roll(x, -2)
array([2, 3, 4, 5, 6, 7, 8, 9, 0, 1]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T15:48:37.100

同样，在周期性条件下进行滚动或切片或切片的一种好且简单的方法是使用模数和 numpy.reshape。例如

```
import numpy as np
a = np.random.random((3,3,3))
array([[[ 0.98869832,  0.56508155,  0.05431135],
        [ 0.59721238,  0.62269635,  0.78196073],
        [ 0.03046364,  0.25689747,  0.85072087]],

       [[ 0.63096169,  0.66061845,  0.88362948],
        [ 0.66854665,  0.02621923,  0.41399149],
        [ 0.72104873,  0.45633403,  0.81190428]],

       [[ 0.42368236,  0.11258298,  0.27987449],
        [ 0.65115635,  0.42433058,  0.051015  ],
        [ 0.60465148,  0.12601221,  0.46014229]]]) 
```

假设我们需要对 [0:3, -1:1, 0:3] 进行切片，其中 3:1 是滚动切片。

```
a[0:3, -1:1, 0:3]
array([], shape=(3, 0, 3), dtype=float64) 
```

这是很正常的。解决方案是：

```
sl0 = np.array(range(0,3)).reshape(-1,1, 1)%a.shape[0]
sl1 = np.array(range(-1,1)).reshape(1,-1, 1)%a.shape[1]
sl2 = np.array(range(0,3)).reshape(1,1,-1)%a.shape[2]

a[sl0,sl1,sl2]
array([[[ 0.03046364,  0.25689747,  0.85072087],
        [ 0.98869832,  0.56508155,  0.05431135]],

       [[ 0.72104873,  0.45633403,  0.81190428],
        [ 0.63096169,  0.66061845,  0.88362948]],

       [[ 0.60465148,  0.12601221,  0.46014229],
        [ 0.42368236,  0.11258298,  0.27987449]]]) 
```

# f# - 在 Xamarin Studio 中找不到 FSharp.Core

> ID：15113182
> 
> 赞同：7
> 
> 时间：2013-02-27T13:22:08.103
> 
> 标签：f#, mono, xamarin-studio

我有一个使用 Xamarin Studio 创建的基本 f# 项目，但它声称找不到 FSharp.Core。

![构建错误](../Images/a7ca57a6d00d5fd700898ecad5d54011.png)

然而，带有 IDE 的 F# REPL 工作正常，所以我假设我在 mono 下安装了 f#。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T18:24:25.503

根据 Twitter 上的 Don Syme 的说法，这个错误只是装饰性的，无论如何项目都应该构建。还有一个跟踪这个的错误

[https://github.com/fsharp/fsharpbinding/issues/30](https://github.com/fsharp/fsharpbinding/issues/30)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T21:28:13.020

看看这个：

[https://github.com/fsharp/fsharp/issues/33](https://github.com/fsharp/fsharp/issues/33)

我认为您需要构建变体 FSharp.Core 才能完成这项工作。

* * *

编辑：FWIW，我刚刚在 Win7 上使用 F# 尝试了 Xamarin Studio，效果很好。我可以通过屏幕截图看出您正在使用 Mac OS X，所以无论问题是什么，它似乎都是特定于该操作系统的。与 Xamarin 联系并查看他们是否有任何想法可能是值得的。

顺便说一句，为了确保您可以在 Mac OS X 上测试相同的东西，我刚刚创建了一个 F# 控制台应用程序，构建并运行它，无需任何修改。希望这可能会有所帮助。

# c# - 在 Azure 上使用的 Tcp 高性能服务器/框架和配置

> ID：15113184
> 
> 赞同：2
> 
> 时间：2013-02-27T13:22:14.137
> 
> 标签：c#, wcf, azure, signalr, zeromq

我们需要编写高性能的 tcp 服务器并使用 azure 作为主机。我们有几种选择：

1.  在 c# 中编写自定义 tcp 服务器，如[http://blog.maartenballiauw.be/post/2010/01/17/Creating-an-external-facing-Azure-Worker-Role-endpoint.aspx](http://blog.maartenballiauw.be/post/2010/01/17/Creating-an-external-facing-Azure-Worker-Role-endpoint.aspx)所述。但我们不想重新发明轮子。

2.  使用 WCF（可能是最好的方法）。在这种情况下，我们需要很好地了解如何配置它，因为有很多配置选项。有人可以推荐一些配置吗？我们应该使用工作人员角色托管还是 IIS 托管？

3.  信号/R。据我了解，它有第一版，目前已准备好生产，可用作 tcp 服务器。signalR 和 WCF 哪个更好、性能更好？我们应该使用工作人员角色托管还是 IIS 托管？

4.  零/C ICE。有人用吗？

5.  使用此处描述的 ZeroMQ C# 绑定[http://zguide.zeromq.org/cs:asyncsrv](http://zguide.zeromq.org/cs:asyncsrv)

不幸的是，我们仍然不知道我们的协议的一些细节（但它将是二进制的）等等。因此，我们需要一种可能性来轻松更改某些服务器行为，而无需进行大的代码更改。

此外，很高兴知道 azure 的负载均衡器如何影响服务器行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T14:58:08.983

经过一番调查，我发现：

1.  编写自定义 tcp 服务器是我们唯一的选择。
2.  在 WCF 中可以做到，但非常困难，因为我们需要使用自定义绑定和自定义消息编码器，这在我们的案例中非常困难。
3.  Signal/R 不适合我们，因为它是为其他类型的任务而设计的。不适用于通用 TCP 服务器。
4.  没有找到任何相关信息。
5.  ZeroMQ 非常好，它支持 tcp 请求回复样式和多播，但它迫使我们在客户端使用 zmq，因为它使用自定义框架。不幸的是，我们的客户端是用硬件实现的，根本不可能添加 zmq。

# android - 即使在长按时也会执行 Onclick 事件

> ID：15113187
> 
> 赞同：4
> 
> 时间：2013-02-27T13:22:19.170
> 
> 标签：android, listview

我正在使用一个`ExpandableListView lv`. 这就是我所拥有的。

```
ExpandableListView lv=(ExpandableListView )findViewById(....);
lv.setOnChildClickListener(new ExpandableListView.OnChildClickListener(){
@Override
    public boolean onChildClick(ExpandableListView parent, View v,int gp, int cp, long id) {

        Toast.makeText(MainActivity.this, "Clicked", Toast.LENGTH_SHORT).show();
        //perform action    
        return true;
    }
});

lv.setOnCreateContextMenuListener(new OnCreateContextMenuListener() {
    @Override
    public void onCreateContextMenu(ContextMenu contextMenu, View v,ContextMenuInfo menuInfo) {     
        ExpandableListContextMenuInfo info = (ExpandableListContextMenuInfo) menuInfo;
        customMenu.show(v);
        //do other stuff
        contextMenu=null;
    }
}); 
```

当我长按一个子项目时，它`customMenu.show(v)`被调用，当我抬起手指时，它`OnClickListener`被调用。类似地，在一个组项目上长按然后松开手指，它`ContextmenuListener`会被调用，然后该组会展开以显示子项目。这是正常行为吗？我该如何防止这种情况？

我实际上想`long Click`在列表项上做一些事情。返回正常`true`工作`longClickListener`（消耗点击事件）。但我还需要获取项目的 id、组和子位置，这些仅`ContextMenuInfo`在`contextmenu`侦听器中提供。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-03-27T23:34:29.037

确保这件事

```
@Override
    public boolean onItemLongClick(AdapterView<?> parent, View view,
                int position, long id) {

        return true; //<-- this should be TRUE, not FALSE   
    } 
```

正在回归`true`。return`false`似乎继续调用 into 的方法`onClick()`。

这个解决方案至少对我有用。`return false`当我在 eclipse 中自动生成代码时，这是我的默认设置，我没想到要更改它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-01-01T00:05:23.857

设置一个全局布尔值，例如

```
boolean isLongClick = false;

public void onClick(View arg0) {

    if(isLongClick == false){ // this checks to see if it was long clicked
        // Perform your action here
    }
    isLongClick = false; // resetting longClick to false after bypassing action
}

public boolean onLongClick(View arg0) {
    isLongClick = true; 
    //perform other action here
    return false;
} 
```

它的作用是运行两个动作侦听器，一个用于单击，一个用于长单击。如果用户长按该对象，它会将布尔值设置为 true，从而阻止在 onClickListener 中执行该操作，但无论如何 onClickListener 仍会触发，因此我们确保在该方法中重置布尔值，以便长按后，该项目将再次接受单次按下。

当然，这意味着您需要获取按下的项目的 id 等。但是这种方法就像一个魅力。我刚刚在一个弹出菜单的应用程序中实现了它。我希望根据用户是单按还是长按锚点来弹出两个不同的菜单。因此，如果他们快速按下它会弹出一个（打开方式）菜单，如果长按它会弹出一个菜单（共享到、编辑、删除）等。

# joomla - JRequest::getVar('Variable') 在 joomla 中是否安全？

> ID：15113188
> 
> 赞同：1
> 
> 时间：2013-02-27T13:22:24.980
> 
> 标签：joomla, joomla2.5, joomla1.5, joomla1.6

我想知道 JRequest::getVar() 函数是否足以防止 sql 注入或 XSS，或者必须更好地使用其他一些东西来防止 joomla 站点中的 XSS 或 sql 注入。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T13:56:45.280

Assuming you are developing for Joomla 2.5+, you are not supposed to use `JRequest` anymore as it's deprecated.

New way of getting request variables is like this:

```
$jinput = JFactory::getApplication()->input;
// expecting integer, default 0
$user_id = $jinput->post->get('user_id', 0, 'INT');
// expecting string, default empty string
$user_name = $jinput->post->get('user_name', '', 'STRING') 
```

Third parameter for `$jinput` is filter, so if you know you want e.g. integer to be returned, set appropriate filter.

Note that for using `JInput`, `magic quotes` must be turned off.

To protect from sql injection, use

```
$db = JFactory::getDbo();
// $value is not safe
$value = $db->quote($value); 
```

And against XSS

```
$filter = JFilterInput::getInstance();
// $value is not safe
$value = $filter->clean($value); 
```

After reading your comments, I just want to add that there are no "bad characters" per se. Also, filtering against sql injection or xss is very different. For better understanding about filtering and escaping, reffer to [The Great Escapism](http://kunststube.net/escapism/)

# google-chrome - 谷歌浏览器更新导致新窗口中的链接非常小

> ID：15113196
> 
> 赞同：1
> 
> 时间：2013-02-27T13:22:39.007
> 
> 标签：google-chrome, external-links

当我点击我正在处理的项目上的外部链接（即在新窗口中打开的链接）时，新窗口很小......

还有其他人遇到过这个问题吗？

它是 Windows 7 的 Chrome 25.0.1364.97 m。

```
<a href="#" onclick="window.open('http://youtu.be/uvoZEN-fJoY?hd=1','youtubewindow', 'fullscreen=yes, scrollbars=auto');"> 
```

**编辑**

现在修好了，

找不到因此替换的潜在问题：

```
'fullscreen=yes, scrollbars=auto' 
```

和：

`'fullscreen=yes, scrollbars=yes, width=750, height=750'`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T02:41:56.620

根本问题在于 Chrome 25。

[https://code.google.com/p/chromium/issues/detail?id=178440](https://code.google.com/p/chromium/issues/detail?id=178440)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T14:04:12.143

我已经专门为这个问题安装了最新版本的 chrome，但无法重现您的问题。您使用的是哪个版本的 Chrome？什么操作系统？您能否将代码或链接粘贴到问题仍然存在的位置？你是用javascript打开窗口还是target="_blank"？

# jquery - 事件触发器上的 jQuery“父”范围感到困惑

> ID：15113197
> 
> 赞同：0
> 
> 时间：2013-02-27T13:22:40.437
> 
> 标签：jquery, scope, interaction

当用户单击链接时，我正在尝试检查该链接的容器是否具有`active`分配给它的类。

但我认为我在范围界定方面遇到了问题，因为当浏览器应用视觉样式时，点击在触发时看不到该类分配。

我创建了一个[复制问题](http://jsfiddle.net/markedup/F69nh/3/)的 jsfiddle 。非常感谢启蒙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T13:36:59.140

或者你可以使用`on`

```
$controls.on("click", "a", function(e) {
    e.preventDefault();
    var theParent = $(this).parent();
    //if you need 'i' here it is
    var i = $.inArray(theParent[0], $controls);
    console.log('L' + i + ': ' + theParent.hasClass('active'));
}); 
```

[http://jsfiddle.net/F69nh/6/](http://jsfiddle.net/F69nh/6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T13:37:20.177

一种解决方案可能是使用`var`关键字来缩小变量的范围：

```
$links.each(function () {
    var $link = $(this);
    ...
}); 
```

全局范围演示：

```
var a = 1;
function f(v) { a = v; };
console.log(a); // 1
f(2);
console.log(a); // 2 
```

本地范围演示：

```
var a = 1;
function f(v) { var a = v; };
console.log(a); // 1
f(2);
console.log(a); // 1 
```

查看这篇[关于 javascript 作用域的精彩文章](http://www.adequatelygood.com/2010/2/JavaScript-Scoping-and-Hoisting)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T13:26:36.247

`$link`超出了处理程序中的 annoynmous 函数的范围。您需要`$(this)`在点击处理程序中使用：

```
$links.each( function(i) {
    $link = $(this);
    $link.click( function(e) {
        e.preventDefault();
        console.log('L' + i + ': ' + $(this).parent().hasClass('active'));
    });
}); 
```

请参阅[**更新的 jsFiddle**](http://jsfiddle.net/F69nh/4/)。

* * *

如果您必须在不使用 的情况下解决此问题，也可以使用事件数据作为闭包`$(this)`，例如：

```
$links.each( function(i) {
    $link = $(this);
    $link.click({ link : $link }, function(e) {
        e.preventDefault();
        //console.log('L' + i + ': ' + $(this).parent().hasClass('active'));
        e.data.link.parent();
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T13:45:00.393

像这样简化你的 JavaScript：

```
var $controls = $('#controls li');
var $links = $('a', $controls);
var $control, $link;

$controls.each( function(i) {
    $control = $(this);
    if (i == 0) {
        $control.addClass('active');
    }
    console.log('C' + i + ': ' + $control.hasClass('active'));
});

$links.click(function(e) {
    e.preventDefault();
    console.log('L' + $(this).index() + ': ' + $(this).parent().hasClass('active'));
}); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-27T13:40:05.197

Here's another approach for a possible menu: [http://jsfiddle.net/earthdesigner/7uxcg/1/](http://jsfiddle.net/earthdesigner/7uxcg/1/)

The javascript portion:

```
$(document).ready(function(){
    $('nav a').click(function(){
        $('nav li').removeClass('active');
        $(this).parent().addClass('active');
    })  
}); 
```

# javascript - javascript JSON 高级

> ID：15113201
> 
> 赞同：1
> 
> 时间：2013-02-27T13:22:47.743
> 
> 标签：javascript, json, object, mootools, each

我找不到错误。也许你可以帮助我：我的代码如下：

```
var data  = {"product":[{"config":[{"id":"1","price":"100","sku":"10548796345","manufacturer":"Apple","name":"Product 1", "description":"Web site has two parts: the Site (which is what your site visitors see) and the Administrator (which is where you will want to do a lot of the site management). You need to log in to the Administrator separately. There is a link to the administrator on the top menu that you will see when you log .","cid":"1","qty":"102"}],"options":[{"color":[{"blue":"+10","count":"2"},{"red":"+20","count":"3"}]},{"size" :[{"S":"+10","count":"1"},{"M":"+20","count":"4"},{"L":"+30","count":"5"},{"XL":"+40","count":"2"}]}]},{"config":[{"id":"2","price":"100","sku":"10548796341","manufacturer":"Apple","name":"Product 2", "description":"Web site has two parts: the Site (which is what your site visitors see) and the Administrator (which is where you will want to do a lot of the site management). You need to log in to the Administrator separately. There is a link to the administrator on the top menu that you will see when you log in.","cid":"1","qty":"102"
}],"options":[{"color":[{"blue":"+10","count":"2"},{"red":"+20","count":"3"}]},{"size" :[{"S":"+10","count":"1"},{"M":"+20","count":"4"},{"L":"+30","count":"5"},{"XL":"+40","count":"2"}]}]}],"categories":[ {"id":1,"name":"Category 1", "description":"Category 1 description"}, {"id":2,"name":"Category 2", "description":"Category 2 description"}, {"id":3,"name":"Category 3", "description":"Category 3 description"}]}; 
```

将此代码复制并粘贴到：http: [//json.parser.online.fr/](http://json.parser.online.fr/)

下面的代码是作品。

```
 data.categories.each(function(c){
      var opt = new Option(c.name, c.id);               
      try {category_selector.add(opt, null)} catch (err) {category_selector.add(opt)}                          
    }); 
```

为什么此代码不能像上面的代码那样工作（返回未定义）：

```
data.product.each(function(p){

        var el = new Element('div.preview'),
            name = new Element('h3', {'html': '<a href="#!product/product?product_id='+parseInt(p.config.id)+'">' + p.config.name + '</a>'}).inject(el),
            desc = new Element('span', {'html': p.config.description}).inject(name, 'after');
            el.inject(container);   

}); 
```

附言

如果我将代码编辑为：

```
data.product.each(function(p, i){

                     var el = new Element('div.preview'),
                         name = new Element('h3', {'html': '<a href="#!product/product?product_id='+parseInt(p.config[i].id)+'">' + p.config[i].name + '</a>'}).inject(el);                         
                         el.inject(container);  

         }); 
```

它只会返回 1 个产品和控制台错误：p.config[i] is undefined...

PS 2：

```
 data.obj[1].config.each(function(p){ 
// [1] - return first product; [2] - return second; How to return all 1 and 2?   

         var el = new Element('div.preview'),
         name = new Element('h3', {'html': '<a href="#!product/product?product_id='+parseInt(p.id)+'">' + p.name + '</a>'}).inject(el);

         el.inject(container);  

             }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T14:42:04.617

工作代码如下：

```
for (var i=0;i<data.product.length;i++) {

                data.product[i].config.each(function(p){     

                     var el = new Element('div.preview'),
                         name = new Element('h3', {'html': '<a href="#!product/product?product_id='+parseInt(p.id)+'">' + p.name + '</a>'}).inject(el);
                         el.inject(container);  

                 });
          } 
```

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T13:31:26.400

`data.product.each`将运行回调 2 次（因为里面有 2 个对象）。第一次， p 将是配置对象。第二次，它将是选项对象。

您正在做类似的事情`p.config.id`，当 p 是“选项”时，这没有意义。看来您根本不需要使用 each 迭代器？只需`var p = data.product`在开始时使用，然后删除`each`迭代。

# java - “java -version”命令导致错误流

> ID：15113208
> 
> 赞同：-2
> 
> 时间：2013-02-27T13:22:59.640
> 
> 标签：java, cmd

我在错误流而不是输入流中得到以下命令的输出

```
Runtime rt = Runtime.getRuntime();
ProcessBuilder builder = new ProcessBuilder(new String[]{"cmd.exe","/c","java -version"});
Process pr =   builder.start();
BufferedReader input = new BufferedReader(new InputStreamReader(pr.getErrorStream()));
String line=input.readLine();
System.out.println(line); 
```

请解释

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T13:24:51.930

显然，Java 将版本字符串发送到`stderr`. 这不是一种非常罕见的做法，因为它不是客户端代码的输出。不要被名称误导`ErrorStream`：它的用途远不止错误；它基本上是主要通道旁边的一个信令侧通道，即`stdout`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T13:27:46.927

```
It works file in jdk7

    public static void main(String[] args) throws Exception {
        Runtime rt = Runtime.getRuntime();
        ProcessBuilder builder = new ProcessBuilder(new String[]{"cmd.exe","/c","java -version"});
        Process pr =   builder.start();
        BufferedReader input = new BufferedReader(new InputStreamReader(pr.getErrorStream()));
        String line=input.readLine();
        System.out.println(line);

    } 
```

# php - 尝试上传 CSV 文件时出现 fopen 错误

> ID：15113214
> 
> 赞同：0
> 
> 时间：2013-02-27T13:23:18.873
> 
> 标签：php, fopen

尝试导入 CSV 时，出现错误`Warning: fopen(/test-spreadsheet.csv) [function.fopen]: failed to open stream: No such file or directory in /home/.../public_html/wp-content/plugins/bulk-upload/import-response.php on line 49`

它还回`path: /test spreadsheet.csv`显了我回显以下内容的地方：

```
echo "path: " . $file_path; 
```

导入响应.php

```
 require_once("zip-util.php");
    require_once("script-generator.php");

    if ($_POST["verify_bulk_upload_postback"] == "Y")
    {
        if ($_POST["erase_all_data"])
        {
            $query = new WP_Query(array(
                    "post_type" => "people",
                    "posts_per_page" => -1
                ));

            $to_delete = array();
            //echo "<strong>Existed</strong><br /><br />";

            foreach ($query->posts as $post)
            {        
                $to_delete[] = $post->ID;

                if ($post->ID > 0)
                {                
                    $attachment_query = new WP_Query(array(
                        "post_parent" => $post->ID,
                        "posts_per_page" => -1,
                        "post_type" => "attachment"
                    ));

                    foreach($attachment_query->posts as $attachment)
                    {
                        $to_delete[] = $attachment->ID;
                    }
                }                
            }

            foreach ($to_delete as $id)
            {
                //echo "Deleting post with id " . $id . "<br />";
                wp_delete_post($id, true);
            }

        ?><div class="updated"><p><strong><?php _e('Existing Diamonds Deleted'); ?></strong></p></div><?php
        }

        $file_path = $uploaddir . '/' . basename($_FILES['csv_file']['name']);
echo "path: " . $file_path;
        $file = fopen($file_path, 'r');
//echo phpinfo();
        ScriptGenerator::generate($file);

        fclose($file);

        //echo "<br /><strong>Extracting images&hellip;</strong><br /><br />";

        $upload_dir_info = wp_upload_dir();
echo $upload_dir_info["path"];
        ZipUtil::unzip($_FILES["zip_file"]["name"], $upload_dir_info["path"]);

    ?>
    <div class="updated"><p><strong id="status">
        <img src="/wp-content/plugins/bulk-upload/loader.gif" />
        <?php _e('Uploading...'); ?>
    </strong></p></div>

    <?php /* if (count($error_rows) > 0) { ?>
    <div class="error">
        <?php foreach ($error_rows as $error_row) { ?>
            <p>Failed on: <?php print_r($error_row); ?></p>
        <?php } ?>
    </div>
    <?php } */ ?>

<?php

    }

?> 
```

zip-util.php

```
<?php
class ZipUtil
{
    public static function unzip($zip_file, $destination)
    {
        $zip = new ZipArchive();
        $res = $zip->open($zip_file);

        if ($res === TRUE)
        {
            $zip->extractTo($destination);
            $zip->close();
            echo "Images were unzipped.<br />";
        }
        else
        {
            echo "<strong>Failed to unzip images. Please check file permissions.</strong><br />";
    echo "Could not unzip $filename-- ".$res;
    return false;
        }
    }
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T13:27:29.560

这一行：

`$file_path = $uploaddir . '/' . basename($_FILES['csv_file']['name']);`

我有一种此时无效的感觉，`$uploaddir`所以不是去正确的目录，而是去根目录（/，而不是/home ...）

希望这是有道理的..

你可能只需要这个：`$ud = wp_upload_dir(); $uploaddir = $ud["path"];`在它上面的那一行。

# join - ASP 经典 - 我如何加入字符串数组/加入/内爆不起作用

> ID：15113216
> 
> 赞同：3
> 
> 时间：2013-02-27T13:23:21.107
> 
> 标签：join, asp-classic, request.form

```
Dim stringIdCollection
    stringIdCollection = Join( Request.Form( "id" ), "', '" ) )    
Dim whereStatement
    whereStatement = "WHERE id IN ('" & stringIdCollection & "');" 
```

我收到此错误：

> Microsoft VBScript 编译错误“800a0401”
> 
> 预期的语句结束
> 
> /includes/Process.asp，第 49 行 stringIdCollection = Join( Request.Form( "id" ), "', '" ) ) --------------------- -------------------------------------------------- -^

甚至可以在 Request.Form 上使用 Join 吗？

我希望输出为：

> “ID 在哪里（'122'、'344'、'599'）”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T15:15:45.853

该`join`函数需要一个数组作为第一个参数。在 Classic ASP (VBScript) 中，数据`Request.Form`总是字符串，所以不可能有一个实际的数组，你必须自己构建数组：

```
Dim myArray
myArray = Array(Request.Form("id"), Request.Form("id2"), Request.Form("id3"))

Dim stringIdCollection
stringIdCollection = Join( myArray , "', '" ) ) 
```

另请注意，在 Classic ASP 中，如果您提交多个具有相同名称（即`id`）的表单字段，它们将进入`Request.Form`已经用逗号分隔的字段。

与 PHP 中可以做的相反，命名多个表单字段时在末尾附加方括号 []，ASP 不会将其转换为 Request.Form 中的数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T07:31:06.503

这看起来像是应该删除的第二行的额外括号：

```
 stringIdCollection = Join( Request.Form( "id" ), "', '" ) 
```

* * *

编辑： 的文档[`Request.Form`](http://msdn.microsoft.com/en-us/library/ms525985%28v=vs.90%29.aspx)有点误导。返回的值`Request.Form("item")`实际上并不是一个数组，而是一个类似数组的对象。您可以使用该属性遍历这些值`Count`并在迭代时构建您的字符串：

```
Dim stringIdCollection, i

For i = 1 To Request.Form("id").Count
    If Len(stringIdCollection) <> 0 Then
        stringIdCollection = stringIdCollection & ","
    End If
    stringIdCollection = stringIdCollection & "'" & Request.Form("id")(i) & "'"
Next 
```

# jquery - jquery函数在click内有效，但在单独调用时无效

> ID：15113221
> 
> 赞同：1
> 
> 时间：2013-02-27T13:23:45.560
> 
> 标签：jquery, function

我正在尝试访问已使用 .html 插入的类元素。当我通过单击事件在函数中调用它时，它可以工作，但是当我直接调用它时，它没有......任何想法？

```
$("#textarea).html("<div>Lorem ipusum<span class='note-content'>Note text</span>Lorem ipusum</div>");

function collapseNotes() {
$(".note-content").animate({
    width:"50px",
    opacity: ".3",
}); 
}

//this works
$("#button").click(function() {
    collapseNotes();
});

//this doesn't work
collapseNotes(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:30:26.613

您在页面上加载内容`collapseNotes();` *之前*调用，请记住 JavaScript 是一种异步语言，您应该在使用它之前等待某些东西准备好，例如：

```
(function($) {
  console.log('DOM Loaded!');
  collapseNotes();
})($); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T13:27:28.040

```
$(document).ready(function () { 
    collapseNotes();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T13:28:31.577

尝试将整个 JQuery 放入：

```
$(document).ready(function(){
//your code here
}); 
```

应该通过确保加载整个 DOM 来解决它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T13:28:55.813

`**[LIVE DEMO](http://jsbin.com/isuqen/2/edit)**`

```
function collapseNotes() {
    $(".note-content").animate({
        width:"50px",
        opacity: "0.3" // extra comma "," removed
    }, 800);           // animation time !
}

$(function(){ // DOM is ready to be manipulated

    // Missing an " $("#textarea) <--- fixed
    $("#textarea").html("<div>Lorem ipusum<span class='note-content'>Note text</span>Lorem ipusum</div>");

    //this works
    $("#button").click(function() {
        collapseNotes();
    });

    //this works
    collapseNotes();

}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T13:32:58.640

试试[**jQuery 的 ready()**](http://api.jquery.com/ready/)函数：

```
$(document).ready(function() {
    collapseNotes();
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-27T13:52:13.633

从您的评论中，很明显您正在 AJAX 回调中创建注释。您的调用`collapseNotes`在回调之外，因此不会等到 AJAX 请求完成。

您的解决方案是将调用移至`collapseNotes`AJAX ( `getJSON`) 回调内部：

```
$.getJSON('text/1.json', function(data) {
    $("#chapter-text-area").html(data.content);
    collapseNotes(); // place the call here instead!
});

// this is called before the call to $('#chapter-text-area').html, 
// so no notes are found
collapseNotes(); 
```

由于 AJAX 请求是异步的，浏览器将在该`$.getJSON`行发送请求，然后立即转到下一条指令，即`collapseNotes()`. 它*不会*等待服务器响应请求，即触发您的回调。

您的代码从点击侦听器执行时起作用的原因是浏览器有时间在您点击按钮之前完成请求（因此创建注释）。

# c# - 将数据表拆分为多个数据表

> ID：15113227
> 
> 赞同：2
> 
> 时间：2013-02-27T13:24:01.640
> 
> 标签：c#, linq

这些是我的数据表的内容`dtAllData`。

```
 column_1  column_2  column_3    
 --------  --------  --------  
 sec_1       Test1        2
 sec_1       Result1      5
 sec_1       Unit1        2 
 sec_2       Test2        2           
 sec_2       Result2      2
 sec_2       Unit2        5
 sec_3       Test3        2 
 sec_3       Result3      2     
 sec_3       Unit3        2 
```

我需要根据 column 中的内容将其拆分为多个数据表`column_1`。

所以在这种情况下，我应该得到 3 个表（一个所有行都带有`sec_1`，另一个带有`sec_2`& 另一个带有`sec_3`）。

我试过这个：

```
var dtArray = dtAllData.AsEnumerable() 
                            .GroupBy(row => new
                            {
                                column_1 = (string)row["column_1"]
                            });
DataTable[] array = new DataTable[dtArray.Count()]; 
```

我怎样才能得到`array`桌子`dtArray`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T13:39:12.113

使用`CopyToDataTable()`方法将数据放入新的 DataTable。

```
var Result =  from x in dtAllData.AsEnumerable()
              where x.Field<string>("column_1") == "sec_1"
              select x;
DataTable t1 = Result.CopyToDataTable(); 
```

另一种方法是使用`LoadDataRow()`方法。[这是一个例子](http://social.msdn.microsoft.com/Forums/en/csharplanguage/thread/6d4e2579-f4b5-497c-ad00-7c347eb1f902)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T13:58:42.903

如果您知道 column_1 的确切名称，您可以使用[.Select](http://msdn.microsoft.com/en-us/library/det4aw50.aspx) `.Select("column_1 = sec_1")`等或使用[DataView](http://msdn.microsoft.com/en-us/library/system.data.dataview.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T14:09:07.550

修改`Kaf`的解决方案，我实现了我想要的：

```
var uniqueList = dtAllData.AsEnumerable().Select(x=> x.Field<string>("column_1")).Distinct();
List<string> myList = new List<string>();
myList =uniqueList.ToList();

DataTable[] array = new DataTable[myList.Count()];
int index = 0;
foreach (string item in myList)
{
    var Result =  from x in dtAllData.AsEnumerable()
                  where x.Field<string>("column_1") == item
                  select x;
    DataTable table = Result.CopyToDataTable();
    array[index] = table;
    index++;
} 
```

所以`array`包含3个具有不同值的数据表`column_1`

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2016-09-06T14:43:06.177

```
Function splitDataTable(ByVal tbl As DataTable) As DataTable()
    Dim tableCount = Math.Ceiling(tbl.Rows.Count / NewCountRows)

    Dim Divisor = tbl.Rows.Count / tableCount
    Dim tables = tbl.AsEnumerable().Select(Function(r, i) New With {.row = r, .index = i}).GroupBy(Function(x) Math.Floor(x.index / Divisor)).Select(Function(g) g.Select(Function(x) x.row).CopyToDataTable())
    Return tables.ToArray
End Function 
```

# java - Java 和 Jboss7：j_security_check 自定义实现

> ID：15113231
> 
> 赞同：1
> 
> 时间：2013-02-27T13:24:23.887
> 
> 标签：java, security, jboss7.x, jaas

我有这种情况：登录表单使用`DatabaseServerLoginModule`-所有身份验证数据都存储在数据库中的分隔表中，我需要将标志`j_usertype`[从下拉列表]传递给`j_security_check`可以`DatabaseServletLoginModule`在表之间切换并带来特定用户的标志。

有任何想法吗....？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:54:07.157

您可以轻松地向登录表单添加更多参数。当然，您需要编写自己的登录模块。然后问题是将添加的参数放入登录模块！

没有符合标准的方法来添加额外的参数`j_security_check`（这是一种耻辱 - 很多人都需要这样做）。

但是，有一种巧妙的方法可以达到同样的效果。有一个晦涩但有用的安全规范，称为[容器的 Java 授权合同](http://jcp.org/en/jsr/detail?id=115)(JACC)。它做了很多事情；一个更晦涩难懂的问题是，它为您提供了一种从调用堆栈中的任何位置访问与当前请求相关的各种对象的方法。您可以使用[`PolicyContext`](http://docs.oracle.com/javaee/6/api/javax/security/jacc/PolicyContext.html)具有静态方法的类来执行此操作[`getContext`](http://docs.oracle.com/javaee/6/api/javax/security/jacc/PolicyContext.html#getContext%28java.lang.String%29)。这从由字符串键标识的“策略上下文处理程序”中获取对象。规范中需要一些这样的处理程序，包括：

> 4.6.1.3 HttpServletRequest 策略上下文处理程序
> 
> 所有 Servlet 容器都必须注册一个 PolicyContextHandler，其 getContext 方法在使用键“javax.servlet.http.HttpServletRequest”调用时返回一个 javax.servlet.http.HttpServletRequest 对象。当这个handler被激活时，容器必须返回与容器正在处理的组件请求对应的HttpServletRequest对象。

把它放在一起，你可以这样做：

```
HttpServletRequest request = (HttpServletRequest)PolicyContext.getContext("javax.servlet.http.HttpServletRequest") 
```

一旦你有了[`HttpServletRequest`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html)，你可以很容易地用 . 获取任意请求参数[`getParameter`](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getParameter%28java.lang.String%29)。

我有责任指出，[我不是第一个提出这个建议的人](https://stackoverflow.com/q/11668878/116639)。该答案还表明了更好的形式：

```
HttpServletRequest request = (HttpServletRequest)PolicyContext.getContext(HttpServletRequest.class.getName()) 
```

# ruby - :symbol:Symbol 的未定义方法“存在”

> ID：15113233
> 
> 赞同：0
> 
> 时间：2013-02-27T13:24:26.797
> 
> 标签：ruby, ruby-on-rails-3, string, activerecord, null

我有一个`Program`带有字段 calle的表`Symbol`。

我想检索所有在符号中有值的程序。意思不是空字符串，也不是零。

如何使用 ActiveRecord 构建这样的查询？

这是我的代码：

```
<div class="control-group">
  <%= f.label :program %>
  <div class="controls">
    <%= f.select :program_id, Program.where(:symbol.exists => true).collect {|c| [c.name + " " + c.symbol, c.id]}, {}, :class => 'chzn-select' %>
  </div>
</div> 
```

我收到此错误消息：

> :symbol:Symbol 的未定义方法“存在”

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T13:39:50.147

Instead of using below syntax:

```
Program.where(:symbol.exists => true) 
```

Use below syntax to search record where symbol is not nil:

```
Program.where("symbol is not null") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T13:39:58.660

Your condition should be something like

```
Program.where("symbol IS NOT NULL AND symbol != ''") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T13:40:32.817

Simply put, you can't call a method directly on the symbol in your finder method. Because of the syntax, it's currently calling the `#exist` method on your `:symbol` symbol of the Symbol class.

My memory for [ActiveRecord queries](http://guides.rubyonrails.org/active_record_querying.html#conditions) is a bit bad, but you could always put a simple string condition like

```
@programs = Program.where("symbol <> ''") 
```

which says symbol not null and not an empty string either.

(this goes in your controller, and then you'll be able to use the controller instance variable `@programs` in your view for your select input.)

# couchdb - 今天 CouchApp 框架有哪些可能性？

> ID：15113234
> 
> 赞同：4
> 
> 时间：2013-02-27T13:24:27.707
> 
> 标签：couchdb, couchapp

我使用 CouchDB 作为事件日志，我想在它之上构建简单的 UI，这样我就可以更轻松地查询事件。

我可以使用原始 HTTP 调用并手动构建视图，也可以使用 CouchApp 框架。

问题是这些框架似乎没有得到积极维护。

我找到了[CouchApp](http://kan.so)和[Kanso](http://couchapp.org)

今天还有其他可能性吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T15:24:20.840

沙发应用程序很酷，但您肯定需要一个工具来创建和部署它们。我使用术语“couchapp”来指代直接从 CouchDB 提供的任何应用程序，但这个名称肯定是超载的......

第一个将应用程序部署到 couchdb 的工具也被命名为“couchapp”（有点混乱？）。它是用 Python 编写的，它使用许多文件夹和子文件夹以及许多单独的文件来代表您的最终 _ddoc。它现在已被“erica”取代。

在 Node.js 而不是 Python 中运行的另一个选项是“ [node.couchapp.js](https://github.com/mikeal/node.couchapp.js/) ”。这个不使用目录结构来表示 ddoc 结构，但允许您使用 javascript 像对象一样编写 ddoc。它安装了一个名为....（准备好了吗？）....“couchapp”的可执行文件。

最后，“ [Kanso](http://caolan.github.io/kanso/guides/getting_started.html) ”或“kan.so”，它不仅仅是一个推动工具，而且似乎是一种将其提升到新水平的认真尝试。这是我称之为“框架”的唯一一个。
它带来了一个包管理系统——您可以轻松下载和插入第三方 Kanso 包（及其依赖项）以扩展功能。模块系统可以将许多 javascript 模块捆绑到一个文件中以提供给浏览器。可能还有很多其他的东西——我才刚刚开始研究它，但似乎这可能是目前构建非平凡的沙发应用程序的最佳方式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-27T14:11:16.690

你看过[艾丽卡](https://github.com/benoitc/erica)吗？[它是couchapp](https://github.com/benoitc/couchapp) (Python)的 Erlang 继任者，具有更好[的功能](http://vimeo.com/30398347)，有助于开发和部署 CouchApps。

明显缺乏活动也可能表明这些工具只是工作。Couchapp 在技术上已被 Erica 弃用，但它运行良好。

另请注意，设计 CouchApp 的方法有很多。Erica 和 couchapp 都实现了“设计文档中的文件系统”方法，其中设计文档包含可作为常规目录和文件访问的附件。在这种情况下，键是文件名和文件内容的值。

例如，[Kanso](http://kan.so/)`app.json`处理包含应用内容描述的文件。思考：CouchApps 的 Makefile。

这些差异也可能影响您的选择。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-07-08T18:14:17.663

更新，2014

Cloudant 可能是当今最稳定的信息来源。couchapp.org 网站随波逐流，但该项目仍然以各种形式活跃。

还有 hood.ie 处于 alpha 阶段，这是一种想法的演变，与 Meteor.js 不同。

Kanso 仍然不会坐在 Windows 上。

这是 Cloudant 列表

```
•   CouchApp.py  
•   Erica  
•   Soca  
•   node.couchapp.js  
•   Reupholster  
•   Kanso  
•   Situp  
•   Mouch 
```

来自：[https ://cloudant.com/blog/app-management/#.U7wyjSjabt8](https://cloudant.com/blog/app-management/#.U7wyjSjabt8)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-03-11T04:24:12.650

无耻的自我推销：[https ://github.com/fiatjaf/reactive-couch](https://github.com/fiatjaf/reactive-couch)

在本文中，我将描述（并为您提供一个可以使用和调整的模板）一个系统，用于创建基于 CouchDB 的*列表*和*显示*功能以及[Facebook 的 React.js](http://facebook.github.io/react/)的服务器和客户端呈现的 CouchApp 。这是一个很好的系统，基于组件，非常易于维护，也可以爬取。

它不是一个框架（让[某些](https://moot.it/blog/technology/frameworkless-javascript.html)人满意的东西）（而且，所有引用的选项都不是框架），它只是一个使用 React、[curl.js](https://github.com/cujojs/curl)和[Erica](https://github.com/benoitc/erica)等已建立工具的系统。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-03T18:06:31.893

Soca 效果很好，已经用了一年多了，真的很满意。

至于前端层，我使用主干和主干.couchdb 适配器来管理数据并监听更改源以更新数据

[https://github.com/quirkey/soca](https://github.com/quirkey/soca) [https://github.com/pyronicide/backbone.couchdb.js](https://github.com/pyronicide/backbone.couchdb.js)

至于关于 soca 的快速说明，我在使用 ruby​​ 1.9.3 运行它时遇到了问题，但 REE(1.8.x) 仍然可以完美运行

# iphone - MPMoviePlayerController 控件随可访问性而消失

> ID：15113236
> 
> 赞同：0
> 
> 时间：2013-02-27T13:24:29.733
> 
> 标签：iphone, ios, mpmovieplayercontroller, accessibility, mpmovieplayer

我试图让我的应用程序以与 IOS 中的视频播放器相同的方式处理视频控件。

如果在使用 IOS 内置应用程序播放视频时，控件会一直显示在屏幕上，直到用户双击以将它们切换到视图中或视图之外。

只要控件保持可见，用户就可以轻松地在控件周围导航。

然而，在我的设置中，虽然我获得了与本机应用程序相同的全屏控件，并且可以将它们切换进出视图，但控件本身会自动淡出视图，但可访问性焦点指示器仍然存在。这使我可以通过语音在控件中导航来宣布它们，但是如果我双击以选择一个控件，它就像我只是双击视频以将控件切换回视图一样？

这是我显示播放器的方式。我找不到阻止控件消失的方法？

self.player = [[MPMoviePlayerController alloc] initWithContentURL:[NSURL fileURLWithPath:fn]];

```
 self.player.controlStyle = MPMovieControlStyleNone;

    self.player.view.frame = self.movieView.frame;

    [self.movieView addSubview:self.player.view];

    [self.player play];

    self.player.controlStyle =  MPMovieControlStyleFullscreen; 
```

# c# - 枚举字面量

> ID：15113237
> 
> 赞同：2
> 
> 时间：2013-02-27T13:24:36.720
> 
> 标签：c#, enumeration

我想知道是否有某种方法可以用整数声明一个枚举。或者如果有其他选择我可以使用。

例如：

```
enum panelSizes { 300, 305, 310, 315, ..., 50000}
                  [0]  [1]  [2]  [3]       [940] 
```

我需要为每种尺寸分配某种 ID，因此当用户输入特定宽度时，我必须能够识别相应的 cutSize 女巫存储在不同的数组中。

这是我避免尝试将 excel 文件读入我的程序并进行某种查找以识别某些相关信息的尝试。

请帮忙

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T13:26:45.620

由于您的方法无论如何都不允许使用名称，因此请使用数组：

```
 readonly int[] panelSizes = { 300, 305, 310, 315, ..., 50000}; 
```

然后，也许，添加一个枚举来索引它：

```
 enum panelSizeNames { a300, a305, a310, a315, ... , a50000 }  // or better names 
```

要得到

```
 int size = panelSizes[panelSizeNames.a315]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T13:27:13.490

在我看来，您似乎想要使用算法而不是查找来获得正确的切割尺寸。如果您的值像这样是线性的，则不需要字典/枚举/数组。

```
 int panelSize = 5000;
    int index = (panelSize - 300)/5; 
```

反之亦然

```
 int index = 940;
    int panelSize = (index * 5) + 300; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T13:27:08.920

字典怎么样？

```
 Dictionary<int, int> dic = new Dictionary<int, int>
        {
            { 0, 300 },
            { 1, 305 },
            { 2, 310 }
            ....
        }; 
```

请注意，如果键是从 0 到 N 的索引，那么简单的数组也可以...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-27T13:27:12.947

使用`Dictionary<int,int>`你在开始时加载的 id 和 width 作为键和值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T12:33:04.977

这是我所做的：

使用结构，我能够将输入数组与填充有大小的数组进行比较，然后将每个匹配大小的位置存储在数组“Identities”中。现在我可以轻松地编写从其他数组在相同位置返回值的方法......（类似于电子表格查找）

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace PalisadeWorld
{   
//struct to store all the 'identities' of each panel size in an array
struct ID
    {
        public int[] Identities;
        public ID(int[] widths, int rows)
        {
            int[] allWidths = { 300, 305, 310, 315, 320, 325, 330, ..., 5000 };
            int i,j;
            int[] Ids = new int[rows];

            for (i = 0; i < rows; i++)
            {
                for (j = 0; j < 941; j++)
                {
                    if (widths[i] == allWidths[j])
                    {
                        Ids[i] = j;
                        break;
                    }
                }
            }
            this.Identities = Ids;
        }
        public override string ToString()
        {
            string data = String.Format("{0}", this.Identities);
            return data;
        }
    }

class LookUpSheet
{   
    //retrieve calculated widths and number of panels from NewOrder.cs
    public int[] lookUp_Widths {get; set;}
    public int lookUp_Rows { get; set; }

    //Method returning number of pales
    public int[] GetNumPales1()
    {
        int[] all_numPales = { 2, 2, 2, 2, 2, 2, 2, 2, 2, ..."goes on till [941]"...};
        int[] numPales = new int[lookUp_Rows];

        ID select = new ID(lookUp_Widths, lookUp_Rows);

        for (int i = 0; i < lookUp_Rows; i++)
        {
            numPales[i] = all_numPales[select.Identities[i]];
        }

        return numPales;
    }
    //Method returning block sizes (mm)
    public int[] GetBlocks1()
    {
        int[] all_blocks = { 56, 59, 61, 64, 66, 69, 71, 74, "goes on till [941]"...};
        int[] blocks = new int[lookUp_Rows];

        ID select = new ID(lookUp_Widths, lookUp_Rows);

        for (int i = 0; i < lookUp_Rows; i++)
        {
            blocks[i] = all_blocks[select.Identities[i]];
        }
        return blocks;
    } 
```

感谢大家！

# iphone - iPhone 应用程序在 iPad 上以横向模式打开

> ID：15113241
> 
> 赞同：3
> 
> 时间：2013-02-27T13:24:48.313
> 
> 标签：iphone, ios, objective-c, xcode, ipad

事实：

开发了一个 iPhone 应用程序，它通常是可旋转的，但每个视图根本不可旋转。我们只需要一个显式视图中的旋转功能，因此我们必须在一般情况下启用旋转。

现在，当您在 iPad 上安装该应用程序并以横向模式打开它时，该应用程序以横向模式显示，如果您转动 iPad，您将无法将其旋转回纵向（这似乎是合乎逻辑的，因为视图中不允许旋转）。

我在模拟器中没有遇到过这种情况:(

有人知道该怎么做吗？抱歉没有包含代码...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T13:32:54.930

尝试添加“支持的界面方向（iPad）”并确保“纵向底部主页按钮”是列表中的第一个。此外，修改您的根视图控制器，使其仅显示在纵向中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-04T15:08:51.573

除了 Mike M 的回答，我在 mi RootViewController 中有这个：

**Objective-C**

```
- (BOOL)shouldAutorotate {
    return NO;
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation {
    return UIInterfaceOrientationPortrait;
}

- (UIInterfaceOrientationMask)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskPortrait;
} 
```

**迅速**

```
override func preferredInterfaceOrientationForPresentation() -> UIInterfaceOrientation {
    return UIInterfaceOrientation.Portrait
}

override func shouldAutorotate() -> Bool {
    return false
}

override func supportedInterfaceOrientations() -> UIInterfaceOrientationMask {
    return UIInterfaceOrientationMask.Portrait
} 
```

# java - JTable 删除行

> ID：15113243
> 
> 赞同：1
> 
> 时间：2013-02-27T13:24:54.783
> 
> 标签：java, swing, jtable

我有一列`JTable`我设置了一个 custom`TableCellRenderer`和一个 custom `TableCellEditor`，它返回一个包含 JTextField、JLabel、JButtons 和 JProgressBar 的 JPanel

当我尝试从表模型中删除一行时，它是一个扩展 AbstractTableModel 的类。这是删除行的方法。

```
public void removeRow(int row) {
 myList.remove(row);
 fireTableRowsDeleted(row, row);
} 
```

TableModel.fireTableRowsDeleted(int row) 无法正常工作，因为视图中的表继续显示已删除的行。另一方面，方法 TableModel.fireTableStructureChanged(); 正确更新 JTable。我应该使用哪一个？我检查了 DefaultTableModel.removeRow(int row) 方法，它只使用 fireTableRowsDeleted(int row);。

```
 public class TableTest {

    final static MyObjectTableModel model = new MyObjectTableModel();
    final static JTable table = new JTable(model);
    private static Map<Integer, Future> mapSubmittedReadProgress = new HashMap<Integer, Future>();
    final static StartProgressActionListener progressActionListener = new StartProgressActionListener();

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                new TableTest().createGUI();
            }
        });
    }

    public static class MyObjectTableModel extends AbstractTableModel {

        private LinkedList<MyObject> myList;

        public MyObjectTableModel() {
            super();
            myList = new LinkedList<MyObject>();
        }

        public MyObjectTableModel(SortedSet<MyObject> myObjects) {
            super();
            this.myList = new LinkedList<MyObject>(myObjects);
        }

        public void addRow(MyObject myObject) {
            myList.add(myObject);
            fireTableRowsInserted(myList.size() - 1, myList.size() - 1);
        }

        public void removeRow(int row) {
            myList.remove(row);
            fireTableRowsDeleted(row, row);
//      fireTableStructureChanged();
        }

        @Override
        public void setValueAt(Object aValue, int rowIndex, int columnIndex) {
            myList.set(rowIndex, (MyObject) aValue);
            fireTableCellUpdated(rowIndex, 0);
        }

        @Override
        public int getRowCount() {
            return myList.size();
        }

        @Override
        public int getColumnCount() {
            return 1;
        }

        @Override
        public Class<?> getColumnClass(int columnIndex) {
            switch (columnIndex) {
                case 0:
                    return MyObject.class;
                default:
                    throw new IllegalArgumentException("invalid column: " + columnIndex);
            }
        }

        @Override
        public Object getValueAt(int rowIndex, int columnIndex) {
            switch (columnIndex) {
                case 0:
                    return myList.get(rowIndex);
                default:
                    throw new IllegalArgumentException("invalid column: " + columnIndex);
            }
        }

        public MyObject getMyObjectAt(int row) {
            return myList.get(row);
        }

        @Override
        public boolean isCellEditable(int rowIndex, int columnIndex) {
            return true;
        }

        public int getIndexOf(MyObject myObject) {
            return myList.indexOf(myObject);
        }
    }

    private static void createGUI() {
        JFrame f = new JFrame("TableTest");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        for (int i = 0; i < 16; i++) {
            MyObject myObject = new MyObject();
            myObject.setText1("" + i);
            model.addRow(myObject);
        }
        table.setOpaque(false);
        table.setShowGrid(false);
        table.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
//        table.getSelectionModel().addListSelectionListener(new SelectionListener());
        table.setDefaultRenderer(MyObject.class, new MyTableCellRenderer());
        table.setDefaultEditor(MyObject.class, new MyTableCellEditor());
        table.setFillsViewportHeight(true);
        f.add(new JScrollPane(table));

        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }

    private static class MyTableCellEditor extends AbstractCellEditor implements TableCellEditor {

        private MyObjectPanel myObjectPanel = new MyObjectPanel(model, table);
        private transient List<CellEditorListener> listeners;

        public MyTableCellEditor() {
            myObjectPanel.addStartProgressActionListener(progressActionListener);
            listeners = new ArrayList<>();
        }

        @Override
        public boolean isCellEditable(EventObject e) {
            return true;
        }

        @Override
        public Component getTableCellEditorComponent(JTable table, Object value, boolean isSelected, int row, int column) {
            MyObject myObject = (MyObject) value;
            myObjectPanel.setMyObject(myObject, row);
            return myObjectPanel;
        }

        @Override
        public Object getCellEditorValue() {
            MyObject myObject = myObjectPanel.getMyObject();
            return myObject;
        }

        @Override
        public void addCellEditorListener(CellEditorListener l) {
            listeners.add(l);
        }

        @Override
        public void removeCellEditorListener(CellEditorListener l) {
            listeners.remove(l);
        }

        @Override
        protected void fireEditingStopped() {
            ChangeEvent ce = new ChangeEvent(this);
            for (int i = listeners.size() - 1; i >= 0; i--) {
                ((CellEditorListener) listeners.get(i)).editingStopped(ce);
            }
        }
    }

    private static class MyTableCellRenderer implements TableCellRenderer {

        private MyObjectPanel myObjectPanel = new MyObjectPanel(model, table);

        public MyTableCellRenderer() {
            myObjectPanel.addStartProgressActionListener(progressActionListener);
//            setOpaque(false);
            int cWidth = table.getWidth();
//            setSize(new Dimension(cWidth, 1000));
        }

        @Override
        public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
            MyObject myObject = (MyObject) value;
            myObjectPanel.setMyObject(myObject, row);
            table.setRowHeight(row, myObjectPanel.getPreferredSize().height);
            return myObjectPanel;
        }
    }

    private static class StartProgressActionListener implements ActionListener {

        @Override
        public void actionPerformed(ActionEvent e) {
            if(table.isEditing()) {
                table.getCellEditor().stopCellEditing();
            }
            final ExecutorService executor = Executors.newFixedThreadPool(1);
            Runnable progressRunnable = new ProgressRunnable(table.getSelectedRow());
            final Future<?> submit = executor.submit(progressRunnable);
            mapSubmittedReadProgress.put(table.getSelectedRow(), submit);
        }
    }

    private static class ProgressRunnable implements Runnable {

        private ExecutorService executor;
        private long beT;
        private int dur = 30; // s
        private int progress = 0;
        private int row;

        public ProgressRunnable(int row) {
            this.row = row;
            beT = System.currentTimeMillis();
        }

        @Override
        public void run() {
            boolean abort = false;
            int i = 0;
            while (i <= dur && !abort) {
                final long curT = System.currentTimeMillis();
                try {
                    Thread.sleep(1000);
                } catch (InterruptedException e) {
                    abort = true;
                    executor.shutdown();
                }
                if (Thread.currentThread().isInterrupted()) {
                    abort = true;
                    executor.shutdown();
                }
                progress = (int) Math.round(100 * ((double) (curT - beT) / 1000) / dur);
                MyObject myObject = new MyObject();
                myObject.setProgress(progress);
                table.setValueAt(myObject, row, 0);
                i++;
            }
        }
    }
} 
```

我的对象：

```
 public class MyObject {
    private String text1;
    private String text2;
    private int progress;

    public String getText1() {
        return text1;
    }

    public void setText1(String text1) {
        this.text1 = text1;
    }

    public String getText2() {
        return text2;
    }

    public void setText2(String text2) {
        this.text2 = text2;
    }

    public int getProgress() {
        return progress;
    }

    public void setProgress(int progress) {
        this.progress = progress;
    }
} 
```

我的对象面板：

```
public class MyObjectPanel extends javax.swing.JPanel {

private int row;
private MyObjectTableModel model;
private JTable table;

/**
 * Creates new form MyObjectPanel
 */
public MyObjectPanel() {
    initComponents();
}

MyObjectPanel(MyObjectTableModel model, JTable table) {
    this.model = model;
    this.table = table;
    initComponents();
}

/**
 * This method is called from within the constructor to initialize the form.
 * WARNING: Do NOT modify this code. The content of this method is always
 * regenerated by the Form Editor.
 */
@SuppressWarnings("unchecked")
// <editor-fold defaultstate="collapsed" desc="Generated Code">
private void initComponents() {

    jTextField1 = new javax.swing.JTextField();
    jTextField2 = new javax.swing.JTextField();
    jProgressBar1 = new javax.swing.JProgressBar();
    btnStart = new javax.swing.JButton();
    btnStop = new javax.swing.JButton();
    btnClose = new javax.swing.JButton();

    btnStart.setText("Start");

    btnStop.setText("Stop");

    btnClose.setText("Close");
    btnClose.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            btnCloseActionPerformed(evt);
        }
    });

    javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
    this.setLayout(layout);
    layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
            .addContainerGap()
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jTextField1)
            .addComponent(jTextField2)
            .addComponent(jProgressBar1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
            .addGroup(layout.createSequentialGroup()
            .addComponent(btnStart)
            .addGap(18, 18, 18)
            .addComponent(btnStop)
            .addGap(18, 18, 18)
            .addComponent(btnClose)
            .addGap(0, 199, Short.MAX_VALUE)))
            .addContainerGap()));
    layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
            .addContainerGap()
            .addComponent(jTextField1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
            .addComponent(jTextField2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addGap(18, 18, 18)
            .addComponent(jProgressBar1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addGap(18, 18, 18)
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
            .addComponent(btnStart)
            .addComponent(btnStop)
            .addComponent(btnClose))
            .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)));
}// </editor-fold>

private void btnCloseActionPerformed(java.awt.event.ActionEvent evt) {
    System.out.println("getMyObjectRow() : " + getMyObjectRow());
    table.getCellEditor().stopCellEditing();
    model.removeRow(getMyObjectRow());
}
// Variables declaration - do not modify
private javax.swing.JButton btnClose;
private javax.swing.JButton btnStart;
private javax.swing.JButton btnStop;
private javax.swing.JProgressBar jProgressBar1;
private javax.swing.JTextField jTextField1;
private javax.swing.JTextField jTextField2;
// End of variables declaration

void setMyObject(MyObject myObject, int row) {
    this.row = row;
    jTextField1.setText(myObject.getText1());
    jTextField2.setText(myObject.getText2());
    jProgressBar1.setValue(myObject.getProgress());
}

int getMyObjectRow() {
    return this.row;
}

MyObject getMyObject() {
    MyObject myObject = new MyObject();
    myObject.setText1(jTextField1.getText());
    myObject.setText2(jTextField2.getText());
    myObject.setProgress(jProgressBar1.getValue());
    return myObject;
}

void addStartProgressActionListener(ActionListener progressActionListener) {
    btnStart.addActionListener(progressActionListener);
} 
```

编辑：工作 SSCCE 使用面板的 netbeans GUI 构建器显示关闭问题。这似乎是一个索引问题，但找不到究竟是什么。稍后我将尝试在进度条正常工作的情况下发布完整的示例。

编辑 2：当单元格获得焦点时，我的进度条没有更新。关闭问题解决了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T16:07:25.240

我试过你的`TableModel`，效果很好。您的代码中的其他地方一定有问题。我找不到`MyObject`，所以默认渲染器`Object#toString()`用来显示一个空的。

```
public class TableTest {

    private static class MyObject {
        // empty
    }

    private static class MyObjectTableModel extends AbstractTableModel {
        // no change
    }

    private static void createGUI() {
        JFrame f = new JFrame("TableTest");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        final MyObjectTableModel model = new MyObjectTableModel();
        for (int i = 0; i < 16; i++) {
            model.addRow(new MyObject());
        }
        JTable table = new JTable(model);
        f.add(new JScrollPane(table));
        f.add(new JButton(new AbstractAction("Remove") {
            @Override
            public void actionPerformed(ActionEvent e) {
                model.removeRow(0);
            }
        }), BorderLayout.SOUTH);
        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                new TableTest().createGUI();
            }
        });
    }
} 
```

# windows - 更准确的 Windows 命令提示 DIR 修改时间

> ID：15113245
> 
> 赞同：9
> 
> 时间：2013-02-27T13:25:01.050
> 
> 标签：windows, cmd, last-modified

是否可以以毫秒甚至秒为单位在 Windows 命令提示符中查看上次修改文件的时间？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2016-05-05T18:50:28.490

答案确实有效，但另一个不错的`robocopy`选择适用于标准 Windows 控制台（不是 DOS 本身）：

`forfiles /c "cmd /c echo @file @ftime"`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-27T18:14:22.523

没有本地 Windows 命令行实用程序支持以毫秒为分辨率查看时间戳。

您最好的选择是使用 3rd 方工具或原生解决方案（Vista+），使用`robocopy`（支持秒）：

```
robocopy /L /TS . .. 
```

根据所使用的文件系统，跟踪比秒更精细的分辨率也可能微不足道或无用。请参阅[http://msdn.microsoft.com/en-us/library/windows/desktop/ms724290(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724290(v=vs.85).aspx)和[http://jpsoft.com/help/index.htm?timestamps.htm](http://jpsoft.com/help/index.htm?timestamps.htm)

FAT 的写入时间分辨率为 2 秒。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-09-21T19:40:38.427

另一位用户写道：“没有本地 Windows 命令行实用程序支持以毫秒为分辨率查看时间戳。” 这是不正确的。在 NTFS 文件系统中的文件上运行两个 wmic 命令中的任何一个，您将看到时间戳精确到百万分之一秒（微秒，比毫秒更短/更小）：

对于文件类型 = 文件：

```
G:\>wmic datafile where Name="G:\\c\\m\\d\\file.jpg" list /format:list
AccessMask=2032127
Archive=TRUE
Caption=g:\c\m\d\file.jpg
Compressed=FALSE
CompressionMethod=
CreationClassName=CIM_LogicalFile
CreationDate=20141109222121.770365-420
CSCreationClassName=Win32_ComputerSystem
CSName=LENOVO
Description=g:\c\m\d\file.jpg
Drive=g:
EightDotThreeFileName=g:\c\m\d\file.jpg
Encrypted=FALSE
EncryptionMethod=
Extension=jpg
FileName=file
FileSize=737719
FileType=JPEG Image
FSCreationClassName=Win32_FileSystem
FSName=NTFS
Hidden=FALSE
InstallDate=20141109222121.770365-420
InUseCount=
LastAccessed=20200909172756.711862-360
LastModified=20140817192345.000000-360
Manufacturer=
Name=g:\c\m\d\file.jpg
Path=\c\m\d\
Readable=TRUE
Status=OK
System=FALSE
Version=
Writeable=TRUE 
```

对于文件类型=文件文件夹/目录：

```
E:\>wmic FSDIR where Name="D:\\a\\b\\c\\folder" list /format:list
AccessMask=2032127
Archive=TRUE
Compressed=FALSE
CompressionMethod=
CSName=RPM-HP14-BW012N
Description=d:\a\b\c\folder
Drive=d:
EightDotThreeFileName=d:\a\b\c\folder
Encrypted=FALSE
EncryptionMethod=
Extension=
FileName=folder
FileSize=
FileType=File Folder
FSName=NTFS
Hidden=FALSE
InstallDate=20141109221702.051899-420
InUseCount=
LastAccessed=20200921013720.883985-420
LastModified=20200919161912.763540-420
Name=d:\a\b\c\folder
Path=\a\b\c\
Readable=TRUE
Status=OK
System=FALSE
Writeable=TRUE 
```

20141109222121.770365-420 = 2014-11-09 22 小时 21 分 21 秒 770365 微秒 420 分钟，与 UTC 时间不同。

百万分之一秒：请参阅[https://superuser.com/questions/937380/get-creation-time-of-file-in-milliseconds](https://superuser.com/questions/937380/get-creation-time-of-file-in-milliseconds)，其中包含通过不同方法生成的文本 - “[File] Birth [time]: 2015 -03-29 22:16:50.080654200 +0100”。“080654200”显示纳秒量 (080,654,200) 或十分之一微秒量 (0,806,542)。

维基百科说：NTFS 日期分辨率 = 100 ns - [https://en.wikipedia.org/wiki/NTFS](https://en.wikipedia.org/wiki/NTFS)

# wordpress - Wordpress：仅显示顶级类别

> ID：15113247
> 
> 赞同：11
> 
> 时间：2013-02-27T13:25:06.130
> 
> 标签：wordpress

我正在使用这段代码：

```
$args = array(
  'orderby' => 'name',
  'hierarchical' => 1,
  'style' => 'none',
  'taxonomy' => 'category',
  'hide_empty' => 0,
  'depth' => 1,
  'title_li' => ''
);

$categories = get_categories($args); 
```

我想做的是只列出顶级类别。当我使用这段代码时，我得到的不仅仅是一级。有人能帮我吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-27T13:42:56.777

没有`depth`论据`get_categories()`，您应该尝试：

```
$args = array(
  'orderby' => 'name',
  'parent' => 0
); 
```

> **`parent`**: (integer) 仅显示由其 ID 标识的类别的直接后代（即仅限子项）的类别。这不像 'child_of' 参数那样工作。此参数没有默认值。[在 2.8.4 中]

阅读更多：[http ://codex.wordpress.org/Function_Reference/get_categories#Get_only_top_level_categories](http://codex.wordpress.org/Function_Reference/get_categories#Get_only_top_level_categories)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-22T17:51:43.467

soju post 非常有用，因为要获得仅 1 级子类别的类别，我们应该只传递具有 subcategories 的类别 id。但是如果子类别没有任何帖子那么它不会显示但子类别子类别包含帖子所以添加'hide_empty' => 0，在上述情况下它看起来像

```
$args = array(
'taxonomy' => 'categories',
'parent' => 7,
'hide_empty' => 0,
); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-04-23T03:16:34.900

这是我从循环中获取顶级类别名称的脚本。这将包括仅检查了子类别且自身未明确检查的顶级类别。

```
<?php
    $categories = get_the_category();
    $topcats = array();
    foreach ($categories as $cat) {
        if ($cat->parent != 0) $cat = get_term($cat->parent, 'category');
        $topcats[$cat->term_id] = '<a href="/category/' . $cat->slug . '">' . $cat->name . '</a>';
    }
    echo implode(', ', $topcats);
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-21T13:41:12.353

此功能允许您选择哪个类别级别......所以在您的情况下，您可以选择级别 0，它看起来像`<?php display_cat_level(0,true); ?>`您的 single.php 主题文件

[https://github.com/pjeaje/code-snippets/blob/gh-pages/display%20a%20specific%20category%20level%20of%20a%20post%20inside%20the%20loop](https://github.com/pjeaje/code-snippets/blob/gh-pages/display%20a%20specific%20category%20level%20of%20a%20post%20inside%20the%20loop)

```
// http://wpquestions.com/question/showChronoLoggedIn/id/9333
// display a specific category level of a post inside the loop
// USAGE: <?php display_cat_level(X,true); ?> where TRUE = linked | false/empty = not linked
function get_level($category, $level = 0)
{
    if ($category->category_parent == 0) {
        return $level;
    } else {
        $level++;
        $category = get_category($category->category_parent);
        return get_level($category, $level);
    }
}

function display_cat_level( $level = 0 , $link=false){

    $cats = get_the_category( );
    if( $cats ){
        foreach($cats as $cat){
            $current_cat_level = get_level($cat);
            if( $current_cat_level  == $level ){
                if($link==true) {
                    echo '<a href="'.get_category_link($cat->cat_ID).'">'.$cat->name."</a><br />";
                } else {
                    echo $cat->name."<br />";
                }
            }
        }
    }
} 
```

# django - Django TokenAuthentication 缺少“授权”http 标头

> ID：15113248
> 
> 赞同：22
> 
> 时间：2013-02-27T13:25:07.260
> 
> 标签：django, authorization, django-rest-framework, http-token-authentication

我正在尝试将 TokenAuthentication 与我的一种观点一起使用。如[https://www.django-rest-framework.org/api-guide/authentication/](https://www.django-rest-framework.org/api-guide/authentication/)中所述，我将从登录中收到的令牌添加为 HTTP 标头，在我发送的请求中称为：“授权”。

问题是在我的单元测试中，身份验证失败。查看 TokenAuthentication 类，我看到正在检查的标头是“HTTP_AUTHORIZATION”而不是“授权”

我正在使用的视图：

```
class DeviceCreate(generics.CreateAPIView):
    model = Device
    serializer_class = DeviceSerializer

    authentication_classes = (TokenAuthentication,)
    permission_classes = (IsAuthenticated,) 
```

将标头更改为“HTTP_AUTHORIZATION”似乎可行，但感觉有些不对劲。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-27T14:24:36.897

> 查看 TokenAuthentication 类，我看到正在检查的标头是“HTTP_AUTHORIZATION”而不是“授权”

不太正确，在请求`META`字典中进行查找时，它实际查找的标头没有前面的`HTTP_`，因此实际上`request.META.get('HTTP_AUTHORIZATION', '')` *是*在请求中查找`Authorization`标头。

> 问题是在我的单元测试中身份验证失败将标头更改为“HTTP_AUTHORIZATION”似乎有效

我没有仔细检查测试客户端的外观，但我相信设置`HTTP_AUTHORIZATION`是你需要做的，相当于实际设置`Authorization`标题。如果您确实发出了一个 http 请求，您应该会发现设置 auth 标头的工作方式与您期望的完全一样。

请参阅`request.META`此处的文档：[https ://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpRequest.META](https://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpRequest.META)

**编辑**：

Django 文档中查找标题`request.META`：

> 除了上面给出的 CONTENT_LENGTH 和 CONTENT_TYPE 之外，请求中的任何 HTTP 标头都通过将所有字符转换为大写、用下划线替换任何连字符并在名称中添加 HTTP_ 前缀来转换为 META 键。因此，例如，名为 X-Bender 的标头将映射到 META 键 HTTP_X_BENDER。

关于使用测试客户端设置标头的 Django 文档：

> 但是，您可以使用关键字参数来指定一些默认标题。例如，这将`User-Agent`在每个请求中发送一个 HTTP 标头：
> 
> > > c = 客户端（HTTP_USER_AGENT='Mozilla/5.0'）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-09-24T17:11:25.650

[汤姆的回答](https://stackoverflow.com/a/15114464/1528682)很好，但并不完整。

您的代码可以在开发环境中正常工作（使用`runserver`），但如果您在 WSGI 服务器（在我的情况下为 Apache）中尝试它，服务器可以去除 Authorization 标头！

您可以在[Boone 的博客](http://blog.goosecreekapps.com/2012/03/08/using-http-basic-authentication-with-django-on-apache/)上找到一个很好的 Apache conf 修复程序，以将 Authorization 标头保留在请求中并使其正常工作：

```
RewriteEngine on
RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization},L] 
```

# iphone - 将 AVPlayer 快退 5 秒

> ID：15113251
> 
> 赞同：11
> 
> 时间：2013-02-27T13:25:13.773
> 
> 标签：iphone, ios, stream, avplayer

如何将流倒带 5 秒？

这是我在 viewDidLoad 中流式传输的代码：

```
AVPlayerItem* playerItem = [AVPlayerItem playerItemWithURL:[NSURL URLWithString:@"http://groove.wavestreamer.com:7321/listen.pls?sid=1"]];

[playerItem addObserver:self forKeyPath:@"timedMetadata" options:NSKeyValueObservingOptionNew context:nil];

music = [[AVPlayer playerWithPlayerItem:playerItem] retain];
[music play]; 

music = [[AVPlayer playerWithPlayerItem:playerItem] retain];
[music play]; 
```

谢谢你的回答...

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-24T18:29:29.070

```
- (NSTimeInterval)currentPlaybackTime
{
    return CMTimeGetSeconds(self.playerView.player.currentItem.currentTime);
}

- (void)setCurrentPlaybackTime:(NSTimeInterval)time
{
    CMTime cmTime = CMTimeMakeWithSeconds(time, NSEC_PER_SEC);
    [self.playerView.player.currentItem seekToTime:cmTime];
}

- (IBAction)scanBackward
{
    self.currentPlaybackTime -= 5.0f;
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-06-19T08:12:47.200

在 Swift 3+ 中，

```
fileprivate let seekDuration: Float64 = 5

@IBAction func seekForward(_ sender: Any) {
    guard let duration  = player.currentItem?.duration else {
        return
    }
    let playerCurrentTime = CMTimeGetSeconds(player.currentTime())
    let newTime = playerCurrentTime + seekDuration

    if newTime < (CMTimeGetSeconds(duration) - seekDuration) {

        let time2: CMTime = CMTimeMake(Int64(newTime * 1000 as Float64), 1000)
        player.seek(to: time2, toleranceBefore: kCMTimeZero, toleranceAfter: kCMTimeZero)

    }
}
@IBAction func seekBackward(_ sender: Any) {

    let playerCurrentTime = CMTimeGetSeconds(player.currentTime())
    var newTime = playerCurrentTime - seekDuration

    if newTime < 0 {
        newTime = 0
    }
    let time2: CMTime = CMTimeMake(Int64(newTime * 1000 as Float64), 1000)
     player.seek(to: time2, toleranceBefore: kCMTimeZero, toleranceAfter: kCMTimeZero)

} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2020-01-31T02:22:18.740

在 Swift 5 中：

```
 @IBAction func seekForward(_ sender: Any) {
    guard let duration  = player?.currentItem?.duration else {
        return
    }
    let playerCurrentTime = CMTimeGetSeconds(player!.currentTime())
    let newTime = playerCurrentTime + 5

    if newTime < (CMTimeGetSeconds(duration) - 5) {

        let time2: CMTime = CMTimeMake(value: Int64(newTime * 1000 as Float64), timescale: 1000)
        player!.seek(to: time2, toleranceBefore: CMTime.zero, toleranceAfter: CMTime.zero)

    }
}

@IBAction func seekBackward(_ sender: Any) {
    let playerCurrentTime = CMTimeGetSeconds(player!.currentTime())
        var newTime = playerCurrentTime - 5

        if newTime < 0 {
            newTime = 0
        }
    let time2: CMTime = CMTimeMake(value: Int64(newTime * 1000 as Float64), timescale: 1000)
    player!.seek(to: time2, toleranceBefore: CMTime.zero, toleranceAfter: CMTime.zero)
} 
```

# ios - 拖放对象，如贴纸 ios

> ID：15113254
> 
> 赞同：0
> 
> 时间：2013-02-27T13:25:20.157
> 
> 标签：ios, drag-and-drop

我想开发 io 应用程序来使用一些预定义的形状（图像）制作贴纸

我查看了示例[https://github.com/brynbellomy/iOS-DragAndDrop](https://github.com/brynbellomy/iOS-DragAndDrop)

这几乎是我的要求，但是当我开始拖动一个对象时，它将从原来的位置移除。

我需要拖动对象必须在原始位置可用才能再次将其添加到贴纸。

请帮我解决这个问题。有没有人使用上面的例子或在 ios 中创建类似视图的贴纸然后请与我分享。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T13:28:26.093

您需要在某个时候创建​​一个新的贴纸对象，当您拖动第一个贴纸对象时，它会留在后面。例如，每次拖走时，您都可以在同一位置创建一个新的。如果您在正确的时间执行此操作并适当地设置其 Z 顺序，您将获得我认为您正在寻找的无限贴纸堆的错觉。

# linux - /usr/bin/ld: 错误: 找不到 -larchives

> ID：15113255
> 
> 赞同：1
> 
> 时间：2013-02-27T13:25:26.467
> 
> 标签：linux, spring, compilation

我正在尝试在 64 位 Linux Mint 14 上编译 spring 并收到以下错误：

```
Linking CXX executable ../../../spring
/usr/bin/ld: error: cannot find -larchives
/usr/bin/ld: error: cannot find -larchives
collect2: error: ld returned 1 exit status
make[3]: *** [spring] Error 1
make[2]: *** [rts/builds/default/CMakeFiles/engine-default.dir/all] Error 2
make[1]: *** [rts/builds/default/CMakeFiles/spring.dir/rule] Error 2
make: *** [spring] Error 2 
```

我正在按照以下说明操作：[http](http://springrts.com/wiki/Building_Spring_on_Linux) ://springrts.com/wiki/Building_Spring_on_Linux 但不理解错误。有什么建议么？

注意：我正在克隆 repo git://github.com/spring/spring.git 并回滚到标记 91.0 以允许在线游戏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T12:51:50.987

我使用以下解决方法来解决依赖问题：

我没有克隆 git 存储库，而是下载了一个包含最新快照的 tarball（在我的例子中：spring_94.1_src.tar.lzma）参见：[http ://springrts.com/wiki/Download#Latest_Stable_Snapshot](http://springrts.com/wiki/Download#Latest_Stable_Snapshot)

编译 tarball 代码时没有报告错误。

# c# - 将 XML 导入类属性

> ID：15113257
> 
> 赞同：1
> 
> 时间：2013-02-27T13:25:29.123
> 
> 标签：c#, xml, winforms, import

我有这种格式的 XML：

```
<?xml version="1.0" standalone="yes"?>
<DocumentElement>
<Session>
<bIsImages>False</bIsImages>
<bIsPlayMedia>False</bIsPlayMedia>
<bIsSubject>False</bIsSubject>
<bIsVideo>False</bIsVideo>
<dtCreDate>2012-07-23</dtCreDate>
<dtSes_Date1>2001-01-01</dtSes_Date1>
<dtSes_Date2>2001-01-01</dtSes_Date2>
<dtSes_Date3>2001-01-01</dtSes_Date3>
<nClient_ID>32</nClient_ID>
<nDelay>32</nDelay>
<nImage_ID>32</nImage_ID>
<nOperator_ID>32</nOperator_ID>
<nSession_ID>32</nSession_ID>
<nVitality>32</nVitality>
<strDescr>qi stagnatie abq</strDescr>
<strMediaPath></strMediaPath>
<strName>qi stagnatie abq</strName>
<strPrimCause></strPrimCause>
<strSubjectPath>IDF_Eric duBosc.JPG</strSubjectPath>
</Session>
<SessionProgramData>
</SessionProgramData><SessionSubProgramData>
</SessionSubProgramData><SessionTuningData>
<SessionTuning>
    <SessionTuning_ID>332</SessionTuning_ID>
    <Session_ID>33</Session_ID>
    <Tuning>Brjesh</Tuning>
    <TuningDescr>Brijesh Desc</TuningDescr>
    <TuningIsNegative>false</TuningIsNegative>
    <TuningAddInfo>33</TuningAddInfo>
    <Amp>4.8</Amp>
    <Amp2 />
    <Amp3 />
    <Amp4 />
    <Amp5 />
    <Amp6 />
    <TunFreq>Brjesh</TunFreq>
    <TunFreq2 />
    <TunFreq3 />
    <TunFreq4 />
    <TunFreq5 />
    <TunFreq6 />
    <Revision2>false</Revision2>
    <Revision3>false</Revision3>
    <Revision4>false</Revision4>
    <Revision5>false</Revision5>
    <Revision6>false</Revision6>
    <AlreadyBalanced>false</AlreadyBalanced>
    <ImagePath>E:\Live Projects with Latest Source Code\SE-5\SE-5-Latest-04March11-Multilanguage-Chinese\SE-5\bin\Release\Images\</ImagePath>
    <Amp7 />
    <TunFreq7 />
    <Revision7>0</Revision7>
    <Description>Brijesh Note</Description>
    <TunRevDate>2013-02-20T18:08:48+05:30</TunRevDate>
    <TunRevDate2>2013-02-20T18:08:48+05:30</TunRevDate2>
    <TunRevDate3>2013-02-20T18:08:48+05:30</TunRevDate3>
    <TunRevDate4>2013-02-20T18:08:48+05:30</TunRevDate4>
    <TunRevDate5>2013-02-20T18:08:48+05:30</TunRevDate5>
    <TunRevDate6>2013-02-20T18:08:48+05:30</TunRevDate6>
    <TunRevDate7>2013-02-20T18:08:48+05:30</TunRevDate7>
    <Tuning_ID>20568</Tuning_ID>
</SessionTuning>
....So on
<SessionTuning>
    .....
    .....
</SessionTuning>

</SessionTuningData>
<Client>
<nClient_ID>32</nClient_ID>
<strAddress></strAddress>
<strCity></strCity>
<strCountry></strCountry>
<strFirstName>Eric</strFirstName>
<strImage>IDF_Eric duBosc.JPG</strImage>
<strLastName>Bosc</strLastName>
<strMI>du</strMI>
<strNote>ikke</strNote>
<strPhoneNum></strPhoneNum>
<strPostalCode></strPostalCode>
<strState></strState>
<strWorkPhone></strWorkPhone>
</Client>
<SE-5 />
</DocumentElement> 
```

有了多个`SessionTuning`，现在我想在我的字符串数组中导入这个 XML。

我现有的代码：

```
public static clsSessionTuningData[] GetSessionTuningFromXMLFile(string FileName)
        {
            try
            {

                StreamReader objReader = new StreamReader(FileName);
                string strData = objReader.ReadToEnd();
                objReader.Close();

                int nStart = 0, nEnd = 0;
                nStart = strData.IndexOf("<SessionTuningData>");
                nEnd = strData.IndexOf("</SessionTuningData>");
                if (nStart > 0 && nEnd > 0)
                {

                    nStart = nStart + "<SessionTuningData>".Length;
                    nEnd = nEnd + "</SessionTuningData>".Length;
                    strData = strData.Substring(nStart + 1, nEnd - nStart - 1);
                    string[] strSessionTuning = strData.Split('\r', '\n');
                    clsSessionTuningData[] objSessionTuning = new clsSessionTuningData[1];
                    clsDataType.XMLType objXML = new clsDataType.XMLType();

                    int j = 0;
                    for (int i = 0; i < strSessionTuning.GetLength(0); i++)
                    {
                        objXML = clsCommonFunc.GetXML(strSessionTuning[i]);

                        if (objXML != null)
                        {
                            switch (objXML.Name)
                            {
                                case "Revision2":
                                    objSessionTuning[j].bRevision2 = clsCommonFunc.IsYes(objXML.Value);
                                    break;
                                case "Revision3":
                                    objSessionTuning[j].bRevision3 = clsCommonFunc.IsYes(objXML.Value);
                                    break;
                                case "Revision4":
                                    objSessionTuning[j].bRevision4 = clsCommonFunc.IsYes(objXML.Value);
                                    break;
                                case "Revision5":
                                    objSessionTuning[j].bRevision5 = clsCommonFunc.IsYes(objXML.Value);
                                    break;
                                case "Revision6":
                                    objSessionTuning[j].bRevision6 = clsCommonFunc.IsYes(objXML.Value);
                                    break;
                                case "TuningIsNegative":
                                    objSessionTuning[j].bTuningIsNegative = clsCommonFunc.IsYes(objXML.Value);
                                    break;
                                case "Session_ID":
                                    objSessionTuning[j].nSession_ID = int.Parse(objXML.Value);
                                    break;
                                case "SessionTuning_ID":
                                    objSessionTuning[j] = new clsSessionTuningData();
                                    objSessionTuning[j].nSessionTuning_ID = int.Parse(objXML.Value);
                                    break;
                                case "TuningAddInfo":
                                    objSessionTuning[j].nTuningAddInfo = int.Parse(objXML.Value);
                                    break;
                                case "Amp":
                                    objSessionTuning[j].strAmp = objXML.Value;
                                    break;
                                case "Amp2":
                                    objSessionTuning[j].strAmp2 = objXML.Value;
                                    break;
                                case "Amp3":
                                    objSessionTuning[j].strAmp3 = objXML.Value;
                                    break;
                                case "Amp4":
                                    objSessionTuning[j].strAmp4 = objXML.Value;
                                    break;
                                case "Amp5":
                                    objSessionTuning[j].strAmp5 = objXML.Value;
                                    break;
                                case "Amp6":
                                    objSessionTuning[j].strAmp6 = objXML.Value;
                                    break;
                                case "TunFreq":
                                    objSessionTuning[j].strTunFreq = objXML.Value;
                                    break;
                                case "TunFreq2":
                                    objSessionTuning[j].strTunFreq2 = objXML.Value;
                                    break;
                                case "TunFreq3":
                                    objSessionTuning[j].strTunFreq3 = objXML.Value;
                                    break;
                                case "TunFreq4":
                                    objSessionTuning[j].strTunFreq4 = objXML.Value;
                                    break;
                                case "TunFreq5":
                                    objSessionTuning[j].strTunFreq5 = objXML.Value;
                                    break;
                                case "TunFreq6":
                                    objSessionTuning[j].strTunFreq6 = objXML.Value;
                                    break;
                                case "Tuning":
                                    objSessionTuning[j].strTuning = objXML.Value;
                                    break;

                                case "TuningDescr":
                                    objSessionTuning[j].strTuningDescr = objXML.Value;
                                    break;
                                case "AlreadyBalanced":
                                    objSessionTuning[j].bAlreadyBalanced = clsCommonFunc.IsYes(objXML.Value);
                                    break;
                                case "ImagePath":
                                    objSessionTuning[j].strImagePath = objXML.Value;
                                    break;
                                case "Amp7":
                                    objSessionTuning[j].strAmp7 = objXML.Value; // Krunal on 2-2-2012
                                    break;
                                case "TunFreq7":
                                    objSessionTuning[j].strTunFreq7 = objXML.Value;
                                    break;
                                case "Revision7":
                                    objSessionTuning[j].bRevision7 = clsCommonFunc.IsYes(objXML.Value);
                                    break;
                                case "Description":
                                    objSessionTuning[j].Description = objXML.Value;
                                    break;
                                case "TunRevDate":
                                    objSessionTuning[j].strRevDate = Convert.ToDateTime(objXML.Value);
                                    break;
                                case "TunRevDate2":
                                    objSessionTuning[j].strRevDate2 = Convert.ToDateTime(objXML.Value);
                                    break;
                                case "TunRevDate3":
                                    objSessionTuning[j].strRevDate3 = Convert.ToDateTime(objXML.Value);
                                    break;
                                case "TunRevDate4":
                                    objSessionTuning[j].strRevDate4 = Convert.ToDateTime(objXML.Value);
                                    break;
                                case "TunRevDate5":
                                    objSessionTuning[j].strRevDate5 = Convert.ToDateTime(objXML.Value);
                                    break;
                                case "TunRevDate6":
                                    objSessionTuning[j].strRevDate6 = Convert.ToDateTime(objXML.Value);
                                    break;
                                case "TunRevDate7":
                                    objSessionTuning[j].strRevDate7 = Convert.ToDateTime(objXML.Value);
                                    break;
                                case "Tuning_ID":
                                    objSessionTuning[j].nTuning_ID = int.Parse(objXML.Value);
                                    j++;//this is last field so increment by one,
                                    Array.Resize(ref objSessionTuning, j + 1);
                                    break;
                            }
                        }
                    }
                    return objSessionTuning;
                }
                return null;
            }
            catch (Exception ex)
            {
                clsErrorTrace.CreateLog("SessionTuning", ex);
                return null;
            }
        } 
```

但是，如果我知道 Last 属性是`Tuning_ID`.

有没有简单的方法可以解决这个问题..？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T13:43:06.183

当然，还有更简单的方法可以做到这一点。其中之一称为[序列化](http://msdn.microsoft.com/en-us/library/vstudio/ms233843.aspx)，您可以在其中将整个类转换为某种流，即 XML 和字节。你使用这个[`XmlSerializer`](http://msdn.microsoft.com/en-us/library/vstudio/system.xml.serialization.xmlserializer.aspx)类。这是一个简单的例子：

假设您有一个要存储的类和 XML 文件：

```
[Serializable] // you should mark the class as serializable
public class MyData
{
    public int Value { get; set; }
    public string Name { get; set; }
    public string[] SubItems { get; set; }
} 
```

此代码将其转换为 XML 文件：

```
MyData data = new MyData();
data.Name = "TestName";
data.Value = 100;
data.SubItems = new string[] {"Item1", "Item2", "Item3"};
XmlSerializer ser = new XmlSerializer(typeof(MyData));
using (FileStream file = new FileStream(fileName, FileMode.Create, FileAccess.Write))
{
    ser.Serialize(file, data);
} 
```

这是生成的文件：

```
<?xml version="1.0"?>
<MyData xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <Value>100</Value>
  <Name>TestName</Name>
  <SubItems>
    <string>Item1</string>
    <string>Item2</string>
    <string>Item3</string>
  </SubItems>
</MyData> 
```

要读取文件，请使用以下`Deserialize`方法：

```
using (FileStream file = new FileStream(fileName, FileMode.Open, FileAccess.Read))
{
    ser.Deserialize(file, data);
} 
```

另一种选择是使用 .NET 框架中的一个专用类来读取 XML 文件：

```
XDocument doc = XDocument.Load(fileName);
List<clsSessionTuningData> objSessionTuning = new List<clsSessionTuningData>()
foreach (var session in doc.Descendants("SessionTuningData"))
{
    XElement elem;
    clsSessionTuningData data = new clsSessionTuningData();
    elem = session.Element("Revision2");
    if (elem != null)
        data.bRevision2 = elem.Value;

    // and so on...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T13:40:00.703

You could:

1) load your XML into an [XMLDocument](http://msdn.microsoft.com/en-us/library/6kza7w4k.aspx), then navigate the document through its properties (mainly [ChildNodes](http://msdn.microsoft.com/en-us/library/system.xml.xmlnode.childnodes.aspx));

2) load your XML into an XMLDocument, then query the document using [XPath](http://www.w3schools.com/xpath/default.asp), creating a navigator via [CreateNavigator](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.createnavigator.aspx).

3) Parse your document with an [XmlReader](http://msdn.microsoft.com/en-us/library/cc189056%28v=vs.95%29.aspx).

4) Create a set of classes closely related to your Xml schema, and use a [XmlDeserializer](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.deserialize.aspx) to map a file to a set of objects (this is great, but tricky to set up, as the XmlDeserializer can be a bit stubborn to configure).

If I needed ALL the data, I'd go for option (4), possibly redesigning my XML/model classes to make the conversion easier.

If i needed some of the values, I'd probably go for (2), as it requires very little code. See some examples of (2) [here](http://www.codeproject.com/Articles/9494/Manipulate-XML-data-with-XPath-and-XmlDocument-C).

# silverlight - 银光。安全问题

> ID：15113259
> 
> 赞同：0
> 
> 时间：2013-02-27T13:25:32.603
> 
> 标签：silverlight, security, ssl

请告诉我，Silverlight 业务应用程序是否安全？

据我所知，用户可以从加载应用程序的本地计算机缓存中获取**.xap**文件，或者如果已知文件名和位置（它是用 HTML 代码编写的）直接获取 - 只需在浏览器的地址栏中键入它，文件就会是下载。（**问题一：正常吗？或者，某些特定主机的设置可以拒绝直接下载？**）

最有趣的是 - 所以，一旦下载网页，用户在文件系统中有一个**.xap文件。**现在**问题2：用户是否可以打开（我的意思是，反编译）这个xap文件，从而获得大量数据，包括检查用户的特定角色等等？在代码中，我定期检查特定角色中是否存在授权用户。取决于此，它可以由不同的内容提供。** *ps当然，我知道服务器端通过属性检查角色，演讲不是关于这个。*另外，我使用 MEF 模块化，并且，对于模块之间的通信，我使用了具有通信接口的全局库项目。**模块之间传递的信息会被窃取吗？**

下一个。包含一些应用程序设置的**web.config文件还有一个包含登录密码信息的数据库连接字符串。**还有**问题3：web.config，存储这样的数据够安全吗？**

最后一个问题——SSL 连接。我知道，我需要为此付费。无论如何，**问题 4：它如何保护应用程序并包含数据（在业务应用程序中）？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T07:07:15.090

问题 1\. 最终用户必须可以访问 xap 文件，因此我认为您不能阻止经过身份验证的用户从服务器获取它。即使它不可用，用户也可以在浏览器缓存中找到它。

问题 2a。是的，用户可以反编译 xap。它只是一个 zip 文件。重命名为 zip，提取内容，使用 Reflector 查看等。玩一下 Silverlight Spy，您还可以看到一些有趣的东西。您可以在您的程序集上使用混淆工具，这是一种有用的威慑，但即使这样也可以由拥有足够资源/精力的人反编译。

问题 2b。我认为可以看到“模块之间的信息传递”，因为可以使用 WinDbg 调试 Silverlight 应用程序。再一次，混淆至少有助于阻止随意的内省。

问题 3\. 是的，web.config 应该是安全的，除非您不遗余力地公开它。

问题 4\. SSL 不会阻止上面列出的 xap 文件的任何自省问题，但会阻止人们嗅探流量。您将遇到的唯一问题是如何减轻中间人攻击（代理在其自己的证书中替换）。有一些方法可以缓解这种情况，但我不知道最好的做法是什么。

根据您提出的问题，您应该减轻以下风险。想象一下，用户连接到您的 SL 应用程序，登录，然后您从服务器获取他们的“角色”。如果他们反编译了您的 xap，并发现他们需要以“管理员”角色开放对所有内容的访问，他们可以在 SL 应用程序和您的服务器之间放置一个代理并修改响应，以便 SL 应用程序认为他们处于“管理员”角色。这是一个中间人攻击，最终用户试图破解系统。即使您使用 SSL，这也是可能的，因为代理将使用自己的证书，并且最终用户可以将代理的证书添加到他们受信任的证书存储中。

我一直无法在客户端正确解决上述风险。我通过使用混淆，并在请求/响应中添加了一个自定义标头，这实际上是一个带有隐藏私钥的校验和来加密校验和，从而使黑客感到困难。但是，如果最终用户设法对 xap 进行反混淆/反编译，理论上他们将能够找到私钥并查看我的加密算法，因此能够在更改上述“角色”后替换为新的校验和例子。

总之，我得出的结论是不可能正确保护客户端。如果您认为风险足够大，最好在服务器上复制授权。

例如，如果要求用户必须是“admin”角色才能查看“customers”，那么如果用户是“admin”角色，我将在客户端显示“customers”屏幕。但是，在服务器上，当 SL 客户端调用服务来获取“客户”数据时，我还会检查当前经过身份验证的用户是否有权查看数据（而不是查看屏幕）。

# ruby-on-rails - Rails 'render' function rendering something for short duration

> ID：15113263
> 
> 赞同：0
> 
> 时间：2013-02-27T13:25:37.960
> 
> 标签：ruby-on-rails, render

I got

```
render :text => "Some text" 
```

what I really need is something like this

```
render :text => "Some text", :duration => 5000 
```

The "some text" will be rendered for a short duration of time and then it will disappear.

If it is not possible, can I use `:alert` tag for the same thing, and how exactly?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T13:48:59.793

You have to consider that you are using HTTP, which is stateless. This means: There is NO connection between client and server. It's always just:

*   Client: Hello server, please give me `http://.../someResource`
*   Server: Here it is

Every time the client asks for a resource the server cannot remember that he was there before (at least in plain strict HTTP). Then there came people and invented Sessions and Cookies, but that's a different story.

What I wanted to say: The server can ONLY send the requested resource and after this is done he doesn't know that there was a client and requested something.

You have only one choice for dynamic behaviour: JavaScript (and since CSS3, it should also be possible to trigger an animation that hides some div after 5000ms).

Now you have to consider:

*   Should the client itself hide the alert box? (that's the most common and most easy way using jQuery)
*   Should the server tell the client to hide it? (I know I said above that's not possible, but it actually is using something called `server push`, which is implemented in a library called `atmosphere` (formerly `comet`). But it's not a real message from the server, it's more a second request from the client which first gets answered by the server when there's an event to send to the client (`long-pooling`)). Notice: This also required JavaScript on the client side.

I'd say: Go with the first solution (`jQuery`) 'cause it's already built into Rails (at least if you are at Rails 3.1 or above)

Have a look here: [How to hide a div after some time period?](https://stackoverflow.com/questions/2426304/how-to-hide-a-div-after-some-time-period)

# arrays - 从数组绑定条件变量

> ID：15113267
> 
> 赞同：0
> 
> 时间：2013-02-27T13:25:51.097
> 
> 标签：arrays, data-binding, pdo, conditional

我正在尝试将旧的 MySQLI 查询转换为 PDO，同时还绑定所有变量以防止注入。此特定查询从数组中获取其“WHERE”条件。

```
$w=array();
if ($pos!='') $w[]="PositionId=':pos'";
if ($country!='') $w[]="CountryId=':country'";
if ($current!='') $w[]="IsCurrent=':current'";
if ($c1stat!='') $w[]=":c1stat :c1comp ':c1val'";
if ($c2stat!='') $w[]=":c2stat :c2comp ':c2val'";
if ($c3stat!='') $w[]=":c3stat :c3comp ':c3val'";
if ($c4stat!='') $w[]=":c4stat :c4comp ':c4val'";
if (count($w)) $where="WHERE ".implode(' AND ',$w); else $where='';

$query="SELECT * FROM table $where";
$result = $pdo->prepare($query);
$result->bindParam(':pos', $pos);
$result->bindParam(':country', $country);
$result->bindParam(':iscurrent', $current);
$result->bindParam(':c1stat', $c1stat); $result->bindParam(':c1comp', $c1comp); $result->bindParam(':c1val', $c1val);
$result->bindParam(':c2stat', $c2stat); $result->bindParam(':c2comp', $c2comp); $result->bindParam(':c2val', $c2val);
$result->bindParam(':c3stat', $c3stat); $result->bindParam(':c3comp', $c3comp); $result->bindParam(':c3val', $c3val);
$result->bindParam(':c4stat', $c4stat); $result->bindParam(':c4comp', $c4comp); $result->bindParam(':c4val', $c4val);
$result->execute(); 
```

我仍在尝试了解 PDO 和绑定变量，因此我正在努力进行这一工作。

$query 正在正确构建，例如，生成了带有 $country 条件的 WHERE 语句：

```
SELECT * FROM skaterRScareer WHERE PositionId>='2' AND CountryId=':country' 
```

那么为什么变量没有绑定呢？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:30:45.470

**除了数据文字**，你不能绑定任何东西：

*   字符串文字 - 好的
*   数字文字 - 好的
*   字符串文字的一部分 - 失败
*   标识符 - 失败
*   运营商 - 失败
*   功能 - 失败
*   语法关键字 - 失败
*   任意查询部分 - 失败

所以——唉！- 运算符或标识符没有占位符。您必须将它们列入白名单。

您的代码还有另一个问题。您必须仅为实际进入查询的占位符绑定变量

看，如果`$c3stat`为空，查询中将没有`:c3stat :c3comp :c3val`占位符 - 因此，您也不应该绑定相应的变量

做了

```
if ($c3val) {
    $w[] = "some field > :c3val";
    $values[":c3val"] = $c3val;
} 
```

也不需要在占位符周围添加引号。

这是一个关于白名单的例子

```
$fields     = array("name","price","qty");
$operators  = array(">","<","=");
$fkey       = array_search($_GET['sort'],$orders));
$okey       = array_search($_GET['sort'],$orders));
if ($fkey !== FALSE && $okey !== FALSE) { 
    $field  = $fields[$fkey]; 
    $op     = $operators[$okey]; 
    $query .= "$field $op :placeholder";
} 
```

# html - 向后兼容性和 HTML5 日期输入 - 日期格式

> ID：15113268
> 
> 赞同：0
> 
> 时间：2013-02-27T13:25:55.537
> 
> 标签：html, google-chrome, input, compatibility, backwards-compatibility

所以，我遇到了这个问题，也许我只是想不直，但是网站如何处理这个问题的例子会有所帮助。

我想使用 HTML5 日期输入 - 它很好而且流畅。但是，我需要该日期最终作为日期字段输入 mysql 数据库中。问题不在于 HTML5 日期输入中的 post 值 - 而是当它恢复为旧浏览器上的文本时。

如果我通过输入说“请格式化 YYYY-MM-DD”（这将是一个从许多浏览器访问的高度公开的应用程序），那么当使用显示日期选择器的 Chrome 时，Chrome 会自动格式化为 MM/DD/YYYY显示的日期，我听说这是针对用户的本地化。

问题是这样的：如何放置一个“请格式化YYYY-MM-DD”标签，该标签仅在恢复为文本框时才会显示？如果我向最终用户指定他们需要以一种方式对其进行格式化，而日期选择器只允许他们以不同的方式进行格式化，那会不会令人绝望地混淆？我预计此表单将在多个语言环境中使用，因此我无法预期默认格式。

请注意，这是一个前端问题；我了解如何获取 POST 值，但需要向后兼容文本框的 POST 值统一。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T06:03:08.603

您可以按如下方式使用占位符属性：

```
<input type="date" name="myName" placeholder="Please format YYYY-MM-DD"> 
```

当浏览器无法识别日期类型时，它将呈现为文本输入。占位符显示在文本输入上，但不显示在日期输入上。

现在，不幸的是，根据[caniuse](http://caniuse.com/input-placeholder "我可以使用占位符 attr 的测试")，只有 IE 10+ 支持 placeholder 属性。我不确定这对你来说是否是个问题。

如果这**是**一个问题，您可以使用[Modernizr](http://modernizr.com/ "Modernizr 网站")来测试诸如占位符支持之类的功能并将适当的类添加到正文中。如果是这种情况，您可以编写一个类似以下内容的 CSS 规则：

```
.my-input-label {
  display: none;
}
.no-placeholder .my-input-label {
  display: inline-block; // Or block, if you need to support IE < 8
} 
```

这将使标签显示在不支持占位符属性的任何东西上，但它们将从任何支持占位符属性的布局流中删除，从而优雅地降级。

最后，另一种选择是设置默认值。像这样的东西：

```
<input type="date" name="myName" value="Please format YYYY-MM-DD"> 
```

它没有那么优雅，从用户体验的角度来看更糟糕，但这种体验对于所有不支持`date`输入类型的浏览器都是通用的。

*注意：我没有在 IE 上测试过 Modernizr 的课程，所以我不肯定课程是`no-placeholder`.*

# scala - 在 Scala 中 - 将案例类列表转换为元组列表

> ID：15113269
> 
> 赞同：4
> 
> 时间：2013-02-27T13:25:58.533
> 
> 标签：scala

我有一个案例课

```
case class table(a: String, b: Option[String]) 
```

我有一个这种类型的列表 - 我们称之为 list1

```
val list1: List[table] = tabele.get() // just filling the list from an SQL 
```

现在我想将“表”列表更改为 (String,Option[String]) 的简单列表 我已经在此板上找到的是如何将案例类转换为这样的元组：

```
case class table(a:String, b:Int)
val (str, in) =  table.unapply(table("test", 123)).get() 
```

但我不知道如何在 List 上使用它 :( 我尝试了一些 foreach 之类的东西：

```
val list2: List[(String, Option[String])] = Nil
list1.foreach( x => list2 :: table.unapply(x).get())
'error (String,Option[String]) does not take parameters 
```

所以我的问题是-> 如何在列表的每个元组上使用 unapply？

预先感谢

* * *

PS：我实际上想更改列表的类型，因为我想在该列表上使用“.toMap” - 比如：

```
val map1 = list1.toMap.withDefaultValue(None) 
```

出现错误：

```
Cannot prove that models.table <:<(T,U) 
```

它适用于 (String, Option[String]) 列表

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-27T13:30:35.537

您想将列表的每个元素转换为另一个列表。你需要`foreach`的表弟`map`：

尝试：

```
 list1.map(table.unapply).flatten 
```

这是一种更好的写作方式：

```
 list1.map( tbl => table.unapply(tbl) ).flatten 
```

另一种方法是

```
 list1.map(table.unapply(_).get) 
```

哪个是简写

```
 list1.map( tbl => table.unapply(tbl).get ) 
```

并且只是使用`for`: (这说明了如何`unapply`在`for`理解中使用的版本)

```
 for (table(s,ms) <- list1) yield (s, ms) 
```

# java - Java被连续字符分割

> ID：15113272
> 
> 赞同：19
> 
> 时间：2013-02-27T13:26:01.980
> 
> 标签：java, string, split

我有以下示例，以更好地解释我正在尝试做的事情：

```
String text = "a,b,,,,c,,";
String[] split = text.split(",");
for(int i=0;i<split.length;i++){
    System.out.println("I = "+i+" "+split[i]);
} 
```

输出是：

```
I = 0 a

I = 1 b

I = 2 

I = 3 

I = 4 

I = 5 c 
```

但是，我想要的是获得一个大小为 8 的数组，其中还包含：

```
I = 6 

I = 7 
```

当然，最后两个元素将是空字符串，但对我来说获取它们是必不可少的。另外，我认为拥有它们是合乎逻辑的。我的意思是，如果我有：

```
String text = "a,b,,,,c,,d"; 
```

结果将是一个大小为 8 的数组，我认为这两个示例之间没有太大区别。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-27T13:27:20.683

```
String[] split = text.split(",", -1); 
```

[这种行为实际上看起来很棘手，但它实际上在官方文档](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#split%28java.lang.String,%20int%29)中得到了解释（恕我直言，不是很好）。

> 如果 n 为非正数，则该模式将被应用尽可能多的次数，并且数组可以具有任意长度

问题`text.split(",")`在于它相当于`text.split(",", 0)`. 使用 0 限制，如文档中所述：

> 如果 n 为零，则该模式将被应用尽可能多的次数，数组可以具有任意长度，并且**尾随的空字符串将被丢弃**。

您绝对不希望丢弃空字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T13:40:07.043

我更喜欢（如果您可以使用外部库）：

`String[] split = StringUtils.splitPreserveAllTokens(text, ',');`

在大多数情况下，该`StringUtils`库往往比默认的 java 实现更高效，因为……嗯，嘿，这就是 Apache 费心编写它的原因。另外，从表面上看，从方法名称中可以清楚地看出这个拆分在做什么，而乍一看，带有 -1 限制的常规字符串拆分可能不是。

# c# - 使用 C# 在 ASP.NET 中操作 ItemTemplate 内部控件

> ID：15113273
> 
> 赞同：3
> 
> 时间：2013-02-27T13:26:04.733
> 
> 标签：c#, asp.net

在下面的代码中，我想在用户处于特定角色时更改`<%# Eval("name") %>`为在运行时。`<%# Eval("role") %>`我怎样才能在代码后面（C#）中做到这一点？

我特别想用`User.IsInRole("Admin")`它来做这件事。

```
<ItemTemplate>
    <div class="comment">
        <asp:Label class="name" runat="server" ID="NAME"> <%# Eval("name") %> </asp:Label>
        <asp:Label class="date" runat="server" Text='<%# "Posted on: " + Eval("date") %>'></asp:Label>
        <asp:Label class="message" runat="server" Text='<%# Eval("Message") %>'></asp:Label>
    </div>
</ItemTemplate> 
```

更新：我正在使用 ListView。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T13:33:53.740

假设您在 aspx 中从**Post**类型的可枚举对象（来自 linq/collection/whatever...）中获取数据：

```
...
<asp:Label class="name" runat="server" ID="NAME">
      <%# ProcessName(Container.DataItem as Post) %>
</asp:Label>
... 
```

在后面的代码中：

```
protected string ProcessName(Post post){
    if(User.IsInRole("Admin")){
        return post.Name;
    }
    return post.Role;
} 
```

也许您可以在绑定之前评估 IsInRole，这样您就不必在每一行上执行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T13:30:12.010

您可以为此使用三元运算符吗？（我自己不确定）

```
<%# condition ? Eval("name") : Eval("role") %> 
```

或者在 VB.NET 的情况下

```
<%# If(condition, Eval("name"), Eval("role")) %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T13:52:46.303

好吧，多亏了 Joachim，我得到了这个简单的解决方案：

```
<ItemTemplate>
<div class="comment">
    <asp:Label class="name" runat="server" ID="NAME"> <%# User.IsInRole("Admin") ? Eval("role") : Eval("name") %> </asp:Label>
    <asp:Label class="date" runat="server" Text='<%# "Posted on: " + Eval("date") %>'></asp:Label>
    <asp:Label class="message" runat="server" Text='<%# Eval("Message") %>'></asp:Label>
</div> 
```

# vb.net - 有没有办法在排序项目时保持列表框的索引？

> ID：15113278
> 
> 赞同：1
> 
> 时间：2013-02-27T13:26:24.610
> 
> 标签：vb.net, dictionary, listbox

我正在使用列表框从 xml 文件中获取项目，每个项目都有一个 id、名称和内容，但我只在列表框中输入名称，并将其他数据存储在字典等变量中（整数：索引，字符串：名称），并保持列表框中的项目与字典中的项目之间的关系，现在一切都很好，但是如果我在列表框中对项目进行排序（在修改名称后）它会丢失索引排序，:(

排序前！

列表框 ---------------------- 字典 -------------- -

索引 | 值 -------------- 键 | 价值

0 | 管理员 ------------------ 0 | 管理员
1 | adam.ley -------------- 1 | 亚当利
2 | jean.clift --------------- 2 | 让·克利夫特

将 adam.ley 更改为零，然后对列表进行排序！！

0 | 管理员 ------------------ 0 | 管理员
1 | jean.clift --------------- 1 | 零
2 | 零-------------------------------- 2 | 让·克利夫特

谢谢大家 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:42:49.973

我认为你必须对项目进行分类。

有不止一个细节。像

类会说“MyItem”具有成员（整数 id、字符串名称、字符串内容）

这将是类结构并将此项目（类）添加到列表框中这可能在 c# 中必须有类似的东西在 vb.net

如需进一步参考，请检查此链接并获得提示。 [使用 ListBox 存储多条数据](https://stackoverflow.com/questions/9262118/using-listbox-to-store-multiple-pieces-of-data)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T12:50:04.123

所以在我创建了一个类之后：

```
Public Class ListItem

    Private _Id As Integer
    Private _Name As String

    ' Initialize the object.
    Public Sub New(ByVal Id As Integer, ByVal Name As String)
        _Id = Id
        _Name = Name
    End Sub

    ' Return the object's Name.
    Public Overrides Function ToString() As String
        Return _Name
    End Function

    ' Return the object's Id.
    Public Function Id() As Integer
        Return _Id
    End Function

End Class 
```

将新项目添加到列表框：

```
ListBox1.Items.Add(New ListItem(Id, Name)) 
```

它完美地工作:)！

但我需要的是获取例如具有 Id = 3 的项目的索引！

谢谢大家！祝你今天过得愉快 ;）

# matlab - 对齐捕获的深度和 rgb 图像

> ID：15113281
> 
> 赞同：1
> 
> 时间：2013-02-27T13:26:30.487
> 
> 标签：matlab, alignment, kinect, rgb, depth

以前有与我的问题相关的问题（[here](https://stackoverflow.com/questions/10391719/kinect-depth-and-image-frames-alignment)、[here](https://stackoverflow.com/questions/9677612/possible-to-change-alternateviewpointcap-or-mirrorcap-from-playback)和[here](https://stackoverflow.com/questions/13296059/kinect-converting-from-rgb-coordinates-to-depth-coordinates)），但是我的问题与它有不同的方面，我在之前提出的任何问题中都没有看到。

我使用 Kinect 深度传感器为我的研究获取了一个数据集。该数据集的格式为 .png 图像，用于特定时刻的深度和 rgb 流。为了给你更多的想法，下面是框架：

![RGB 图像](../Images/8a6406b372ebe8f5774d14827244437d.png)

![深度图像](../Images/2de083488ed70a83bce68b0eda5863f9.png)

编辑：我在这里添加边缘检测输出。

Sobel 边缘检测输出：

1.  RGB 图像 ![边缘RGB](../Images/f4980f9ebeac87ccf9efaf0c1b8ff2ef.png)

2.  深度图像 ![边缘深度](../Images/3ffc9a6097aa731568218ecb590a6d8f.png)

现在我要做的是对齐这两个帧，给我一个组合的 RGBZ 图像。

我不了解潜在的相机特性或 RGB 和红外传感器之间的距离。

有没有一种方法可以将 RGB 值与相应的 Z 值匹配？

我的想法之一是在两个图像中使用边缘并尝试匹配它们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T16:05:22.983

这适用于那些遇到同样问题的人。我认为分享我的发现可能会有所帮助。

正如比尔所说，相机校准是解决这个问题的最佳方法。

但是我发现，使用单应性和极线，这两个图像都可以对齐。这需要两个图像中至少有 8 个匹配特征。这是处理深度图像时的一个难题。

已经有几次尝试校准这些图像，可以在[这里](http://labs.manctl.com/rgbdemo/index.php/Documentation/KinectCalibrationTheory)找到，[这里](http://cv4mar.blogspot.co.uk/2011/03/kinect-color-detph-camera-calibration.html)都需要校准模式来校准。我试图实现的是对齐已经捕获的深度和 rgb 图像，这可以通过我校准来自我曾经记录的同一个 kinect 传感器的参数来完成。

我发现解决此问题的最佳方法是使用[OpenNI](http://kinectcar.ronsper.com/docs/openni/classxn_1_1_alternative_view_point_capability.html)和[Kinect SDK](http://social.msdn.microsoft.com/Forums/en-US/kinectsdknuiapi/thread/c39bab30-a704-4de1-948d-307afd128dab/)中的内置库函数对齐图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T14:48:19.667

一般来说，你试图从一对 RGB 和深度图像中做的事情是不平凡的和不明确的。作为人类，我们可以识别 RGB 图像中的手臂，并能够将其与深度图像中靠近相机的区域相关联。然而，计算机没有关于它期望 RGB 图像的哪些部分对应于深度图像的哪些部分的先验知识。

这种对齐的大多数算法使用相机校准的原因是这个过程允许这个不适定问题变得适定。

但是，仍然有办法找到对应关系，特别是如果您有很多来自同一个 Kinect 的图像对。然后，您只需搜索一组转换参数。我不知道任何现有的算法可以做到这一点，但是正如您在问题中指出的那样，您可能会发现类似对两个图像进行边缘检测并尝试对齐边缘图像的好地方。

最后，请注意，当物体靠近 Kinect 时，RGB 和深度图像之间的对应关系可能会变差，即使在图像经过校准之后也是如此。您可以在图像中看到一些这种效果 - 手在示例深度图像中产生的“阴影”在某种程度上表明了这一点。

# ios - 将正在运行的浮点数传递给另一个类

> ID：15113282
> 
> 赞同：1
> 
> 时间：2013-02-27T13:26:31.107
> 
> 标签：ios, objective-c, cocoa-touch

我正在使用来自 GitHub 的 MBProgressHUD，并希望将正在运行的进度浮动传递给另一个类。

在 A 类：

```
-(void)methodName
{
    HUD = [[MBProgressHUD alloc] initWithView:self.view];
    [self.navigationController.view addSubview:HUD];
    HUD.mode = MBProgressHUDModeAnnularDeterminate;
    HUD.delegate = self;
    HUD.dimBackground = YES;
    HUD.labelText = @"Loading";
    [HUD showWhileExecuting:@selector(myProgressTask) onTarget:self withObject:nil animated:YES];
}
- (void)myProgressTask
{
    HUD.progress = progress;
} 
```

B 类：

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    expectedLength = [response expectedContentLength];
    currentLength = 0;
    HUD.mode = MBProgressHUDModeDeterminate;
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    currentLength += [data length];
    float progress = currentLength / (float)expectedLength;
    NSLog(@"%f", progress);
} 
```

需要将 B 类的“浮动进度”传递给 A 类的方法：“myProgressTask”

NS日志：

```
2013-02-27 15:23:14.006 [8209:c07] 0.161726
2013-02-27 15:23:14.329 [8209:c07] 0.253171
2013-02-27 15:23:14.718 [8209:c07] 0.436063
2013-02-27 15:23:15.941 [8209:c07] 0.527508
2013-02-27 15:23:16.230 [8209:c07] 0.618954
2013-02-27 15:23:16.238 [8209:c07] 0.710400
2013-02-27 15:23:16.614 [8209:c07] 0.893291
2013-02-27 15:23:16.615 [8209:c07] 0.984736
2013-02-27 15:23:16.618 [8209:c07] 1.000000 
```

希望你能帮忙！提前致谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:31:51.153

将此方法更改为：

```
- (void)myProgressTask:(float)progress
{
    HUD.progress = progress;
} 
```

在您的 B 类更改中：

```
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    currentLength += [data length];
    float progress = currentLength / (float)expectedLength;
    NSLog(@"%f", progress);
    ClassA obj = [[ClassA alloc] init]; //Put autorelease if you are not using ARC.
    [obj myProgressTask:progress];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T14:13:03.007

有很多方法可以解决您的问题。我会使用[Key-Value Observing](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueObserving/KeyValueObserving.html)。

创建的`progress`属性。`Class B`然后改变：

```
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    currentLength += [data length];
    //float progress = currentLength / (float)expectedLength;
    self.progress = currentLength / (float)expectedLength;
    //NSLog(@"%f", progress);
    NSLog(@"%f", self.progress);
} 
```

然后注册的`class A`Key-Value 观察。`classB.progress`您可以在 init 中执行此操作`class A`。

```
[classB_object_reference addObserver:self
                          forKeyPath:@"progress"
                             options:NSKeyValueObservingOptionNew
                             context:nil]; 
```

将此方法添加到`class A`：

```
- (void)observeValueForKeyPath:(NSString *)keyPath
                      ofObject:(id)object
                        change:(NSDictionary *)change
                       context:(void *)context
{
    //do whatever you want here with the new value of classB_object.progress
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T13:29:38.300

最好的解决方案是使用协议。请参阅实用程序应用程序的 XCode 4 示例

在 A 类标头中：

```
@interface ClassA : UIViewController <ClassBDelegate>

@property float yourFloat; 
```

在 A 类实现中：

```
- (void)loadClassB
{
    ClassB *classB = [ClassB new];
    classB.delegate = self; 
} 
```

B类头文件：

```
@class ClassB;

@protocol ClassBDelegate
- (void)callbackMethod;
@end

@interface ClassB : UIViewController

@property (weak, nonatomic) id <ClassBDelegate> delegate;

@end 
```

B类实现：

```
- (void)viewDidLoad
{
    float newFloat = self.delegate.yourFloat; // <- the assignment occurs here
    [self.delegate callbackMethod];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T13:29:57.310

您可以使用以下任何一种：

1.  使变量全局

2.  静止的

3.  单身人士

4.  作为参数传递

5.  作为通知发布。

[在这里](https://stackoverflow.com/questions/15063078/how-to-access-a-property-of-a-viewcontroller-from-another-one-iphone/15063118#15063118)检查。

*注意：由于新程序员发现全局变量在列表顶部很容易，一旦他们习惯了 obj-c，他们就知道哪个是最好的以及何时。*

# apache2 - apache mod_perl : 基于 url 的动态处理程序

> ID：15113284
> 
> 赞同：0
> 
> 时间：2013-02-27T13:26:36.333
> 
> 标签：apache2, mod-perl2

我的要求如下。

如果请求的 url 像

```
http://localhost/mod_perl/TopModule/ActualModule/method1 
```

然后我应该调用 TopModule::ActualModule->method1 ()

如何配置 Apache 来执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-05T16:40:57.057

脚本名称后面的 URL 部分在 $ENV{PATH_INFO} 中传递给你的 perl 程序。因此，您可以创建一个称为 modulerunner 的 perl 脚本，您可以使用类似“ [http://whatever.host/modulerunner/Top/Actual/method](http://whatever.host/modulerunner/Top/Actual/method) ”的 URL 来调用它：

```
my $arg=$ENV{PATH_INFO};        <-- contains Top/Actual/method
my @arg=split("/", $arg);       <-- [ "Top", "Actual", "method" ]
my $method=pop @arg;            <-- removes "method", "Top" and "Actual" remain in @arg
my $modules=join("::", @arg);   <-- "Top::Actual"
my $call="$modules->$method()"; <-- "Top::Actual->method()"
eval $call;                     <-- actually execute the method 
```

然而，我完全不推荐这个——它打开了太多的安全漏洞，允许你的网站访问者调用任何模块中的任何 perl 函数。所以，除了你在自己的服务器上做这个没有连接到其他任何东西，我只会去一个非常无聊的 if-then-cascade 。

```
$p=$ENV{PATH_INFO};
if     ($p eq "Top/Actual/method") { Top::Actual->method(); }
elseif ($p eq "Other/Module/function" { Other::Module->function(); }
else {
    print "<font color=red>Don't try to hack me this way, you can't.</font>\n";
} 
```

哦，也不要在任何有生产力的东西上使用 <font> 标记；）

# jqgrid-asp.net - 如何在jqGrid中显示垂直滚动条

> ID：15113288
> 
> 赞同：0
> 
> 时间：2013-02-27T13:26:46.910
> 
> 标签：jqgrid-asp.net

目前我正在处理使用 jqGrid 的任务。我需要用 jqGrid 显示一个垂直滚动条。

```
$('#user-list').jqGrid({
            height: "auto",
            width: "590",
            url: getUsersForClientGroupUrl + "?random=" + Math.random(),
            rowNum: 10,
            mtype: 'POST',
            viewrecords: false,
            postData: { testGroup: gettestGroupId(), active: true },
            datatype: 'json',
            colNames: ['testGroupID', 'Login', 'Role'],
            pgbuttons: false,
            pgtext: null,
            viewrecords: false,
            colModel: [
                { name: 'testGroupID', index: 'testGroupID', hidden: true },
                { name: 'Login', index: 'Login', search: false, width: 130 },
                { name: 'Role', index: 'Role', search: false, width: 100 }
            ],
            caption: "Users for test group: " + gettestGroupName(),
            pager: '#users-pager',
            ondblClickRow: function (userId) {
                editUser(userId);
            },
            sortname: 'Login',
            sortorder: 'asc',
            loadui: 'enable',
            loadError: function (xhr, status) {
                location.reload();
            }
        }) 
```

**

*   图片详情：

**

![在此处输入图像描述](../Images/b2412047219a2519a2c72c26d8697d24.png)

任何人都可以帮助我解决问题。

谢谢和问候， 桑托什·库马尔·帕特罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T07:47:42.340

以下网址帮助我解决了这个问题。 [jqGrid垂直滚动条](https://stackoverflow.com/questions/14502628/jqgrid-vertical-scrollbar)

非常感谢 Charles Mighty 提供的帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T14:48:02.697

当网格大于分配的空间时会出现垂直滚动条，因此在您的情况下，将高度从自动更改为您喜欢的任何大小，并且您应该拥有垂直滚动条，请记住从当前位置减少高度

# javascript - Node.js 当前网址 - 非原创

> ID：15113291
> 
> 赞同：0
> 
> 时间：2013-02-27T13:27:06.870
> 
> 标签：javascript, node.js

如何在节点 js 中获取当前 url？我有以下代码，但它不能正常工作。

```
var http = require("http");

function onRequest(request, response) {
  console.log("Request received.");
  response.writeHead(200, {"Content-Type": "text/plain"});
  response.write("Hello World");
  console.log(request.headers.host);
  response.end();
}

http.createServer(onRequest).listen(3000); 
```

Apache 将 localhost:3000 重定向到 node.dev 域。当我运行上面的代码时，我有： localhost:3000 但我想要 node.dev （带有子域，所有 url）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:56:28.037

Ok, I have found the solution:

```
request.headers['x-forwarded-host'] 
```

# ruby-on-rails-3 - 修改活动记录响应

> ID：15113299
> 
> 赞同：0
> 
> 时间：2013-02-27T13:27:16.960
> 
> 标签：ruby-on-rails-3

这似乎是一个基本的问题，但我无法绕过它。我从数据库中获取一些数据并将其作为 JSON 提供。在我将它作为 JSON 提供之前，我想为数组中的每个散列添加一个值。

```
@locations.each do |location|
  if location[:image].present?
    location[:convient_new_url_value] = 'http://site.com/#{location.image}.jpg'
  end
end 
```

但是，我似乎无法为哈希添加值。我采取了错误的方法吗？

** 抱歉 - 更多信息 **

```
@locations = Location.find(:all, :order => "created_at")

@locations.each do |location|

  if location[:image].present?
    location[:convient_new_url_value] = 'http://site.com/#{location.image}.jpg'
  end
end 

respond_to do |format|
  format.html
end 
```

json 是在 HTML 模板中生成的：

```
<script>
    var location_data = <%= raw @locations.to_json() %>
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T15:43:36.887

最简单的方法可能是在您的模型中创建一个方法`convient_new_url_value`并将其传递给`to_json`：

```
class Location < ActiveRecord::Base
  ...
  def convient_new_url_value
    "http://site.com/#{self.image}.jpg" if self.image.present?
  end
end

<script>
  var location_data = <%= raw @locations.to_json(:methods => :convient_new_url_value) %>
</script> 
```

您的控制器所要做的就是从数据库中获取位置：

```
@locations = Location.all.order(:created_at) 
```

# machine-learning - Weka：匹配属性名称

> ID：15113302
> 
> 赞同：0
> 
> 时间：2013-02-27T13:27:23.723
> 
> 标签：machine-learning, weka

我有两个 weka`Instances`课程。我试图识别一个与另一个属性同名的属性。但是，使用：

```
if (testing.attribute(i).name() == training.attribute(j).name()) 
```

提高`False`每个属性。这是每个的 arff 文件。如您所见，两者都包含`attr1`、`attr2`和`attr3`。

```
@relation SampleTrain3Attributes
@attribute attr1 numeric
@attribute attr2 {a,b,c}
@attribute attr3 numeric
@data
1,a,2
3,b,4
5,c,6
7,a,8 
```

* * *

```
@relation SampleTest5Attributes
@attribute attr1 numeric
@attribute attr2 {a,b,c}
@attribute attr3 numeric
@attribute attr4 {d,e,f}
@attribute attr5 numeric
@data
1,a,2,d,3
3,b,4,f,4
5,c,6,e,8
7,a,8,d,9 
```

任何见解将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:51:03.167

`Attribute.name()`返回一个`String`。比较`String`s using`==`时，您是在比较引用。一般来说，只有当引用相同时才会产生 true，即，指向完全相同的对象。如果要检查它们是否具有相同的内容，请使用`String.equals()`，即，

```
if (testing.attribute(i).name().equals(training.attribute(j).name())) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T13:35:47.310

您需要比较字符串本身，而不是对它们的引用——

```
if (testing.attribute(i).name().equals(training.attribute(j).name())) 
```

# c++ - 提升序列化 - 序列化不可复制但可移动的对象？

> ID：15113305
> 
> 赞同：0
> 
> 时间：2013-02-27T13:27:30.137
> 
> 标签：c++, serialization, boost, noncopyable, movable

有可能吗？它不能开箱即用，因为它会在对象未序列化时尝试复制对象

更新 1：这些对象是不可复制的，因为它们分配内存，一旦分配，我看不出有任何理由在可以移动它时进行复制。反序列化部分应尽可能快。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T15:21:31.597

前段时间我遇到过类似的问题，而 IIRC 我没有找到任何解决方案，所以我反序列化了另一种类型的对象并将其输入到实际对象的构造函数中。另一种类型的设计只是为了快速反序列化并将其内容移动到实际对象。

# python - Flask、Heroku 和 Github 依赖项/文件结构

> ID：15113310
> 
> 赞同：0
> 
> 时间：2013-02-27T13:27:44.537
> 
> 标签：python, heroku, github, dependencies, flask

在整个烧瓶/heroku/github 业务上都是一个初学者，但是已经使用 python 好几年了，并且有使用 tortoise SVN 的经验。我一直在关注有关如何在此链接[https://devcenter.heroku.com/articles/python](https://devcenter.heroku.com/articles/python)上将代码推送到 heroku 的教程，经过大量修改后，我设法上传了我的网络应用程序。但是我肯定错过了一些东西。

目前在项目中，我有一个文件结构来组织不同的进程（例如 web 服务调用和数据库处理），然后通过以下代码将它们导入主应用程序：

```
## Webservices
dirname, filename = os.path.split(os.path.abspath(__file__))
WSdirname = dirname + '\\WebServices\\'
sys.path.append(WSdirname)

import WebservicesModule as WSmodule # Module resides in "WebSerivices" folder 
```

这意味着文件存储在类似的结构中

```
AppFolder\
    app.py
    WebServices\
        WebservicesModules.py
        ...
    Database\
        DatabaseModules.py
        ... 
```

这在本地有效。然而，一旦被 git 推送到 heroku，代码似乎无法访问该`WebservicesModule`模块。在表格中给出错误

> 导入错误：没有名为 WebservicesModule 的模块。

解释为什么我有这个文件结构；由于需要大量的 Web 服务，因此更容易将它们包含在同一个文件夹中。对于数据库操作等也是如此。

我的问题是这个。我的代码是不好的做法，意味着heroku不允许吗？或者 git hub 没有将我的文件上传到 heroku，因此无法找到它们（尽管位于主目录的文件结构中）？还是有什么我不知道的问题？尽管在代码中这样做，我是否需要在 requirements.txt 中将这些模块声明为依赖项？

为您可以提供的任何帮助干杯:)！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T03:03:35.647

问题是你在本地是在 Windows 上开发的，而 Heroku 的 slug 使用的是 Linux 的一些变体。 `\`是 Windows 上**`/`**的目录分隔符，但在 Linux 上是目录分隔符。

而不是硬编码`\WebServices\`用于`os.path.join`加入您的路径和子目录：

```
WSdirname = os.path.join(dirname, "WebServices") 
```

这将确保无论您部署到*什么*平台，都使用正确的目录分隔符。

# c - 带有信号捕捉器的套接字程序

> ID：15113312
> 
> 赞同：1
> 
> 时间：2013-02-27T13:27:46.853
> 
> 标签：c, sockets, tcp

我试图让我的 server.c 程序能够处理僵尸进程。最初，我`signal(SIGCHLD,SIG_IGN);`从[linuxhowtos.org/C_C++/socket](http://www.linuxhowtos.org/C_C++/socket.htm.)找到了这一行。这就像一个魅力。我可以与客户端连接，然后关闭客户端，一切仍然运行顺利。

但是，我正在尝试用文章中所写的 SigCatcher 替换 SIG_IGN，并且当客户端关闭时，我的服务器程序开始出现问题（它无限地继续接收“2”并输出它）。

我都试过了`wait3(NULL,WNOHANG,NULL)`，`wait(-1)`但这些都没有解决问题。我到底应该在这里做什么？

```
void *SignalCatcher(int n)
{
  wait3(NULL,WNOHANG,NULL);
} 
```

这是我的主要外观：

```
 //signal(SIGCHLD, SIG_IGN);
   signal(SIGCHLD, SignalCatcher);

   for(;;)
   {
      clilen=sizeof(cliaddr);
      connfd = accept(listenfd,(struct sockaddr *)&cliaddr,&clilen);

      if ((childpid = fork()) == 0)
      {
         close (listenfd);

         for(;;)
         {
            n = recvfrom(connfd,mesg,1000,0,(struct sockaddr*)&cliaddr,&clilen);
            write(connfd , "" , 1);
            mesg[n] = 0;
            printf("Received the following:\n");
            printf("%s",mesg);

         }

      }
      close(connfd);
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T22:23:01.670

```
void *SignalCatcher(int n)
{
  wait3(NULL,WNOHANG,NULL);
} 
```

应该：

```
void SignalCatcher(int signum)
{
  wait3(NULL,WNOHANG,NULL);
} 
```

返回类型在信号处理程序中*非常*关键（因为调用约定与普通函数调用不同）。无论如何，编译器*至少*应该发出警告。

第二：在循环中，您应该处理来自 recvfrom() 的错误返回。（和写（） ）

```
for(;;) {
        n = recvfrom(connfd,mesg,1000,0,(struct sockaddr*)&cliaddr,&clilen);
        if (n == -1 && errno = EAGAIN) continue;
        else if (n == 0) break; // for non-blocking sockets...
        write(connfd , "" , 1);
        mesg[n] = 0;
        printf("Received the following: %s\n", mesg);
     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T13:32:05.560

何必那么辛苦呢？只需在孩子一开始就将其守护进程（例如，fork 两次，第一个孩子立即退出，而孙子继续以 pid 1 作为其父进程。）除非有理由保持工作进程的父进程，否则这将大大简化了事情。

# android - 如何一次安装两个apk？

> ID：15113321
> 
> 赞同：0
> 
> 时间：2013-02-27T13:28:09.613
> 
> 标签：android, apk

我对我的应用程序有要求。我有一个用于显示书籍的应用程序和一个用于阅读书籍的应用程序，基本上是一个`Viewer`. 我有两个问题：

1.  是否可以在开始时同时安装两个 apk ？

2.  是否可以集成两个 apk ？

当我单击应用程序的第一个选项时，我得到了这个异常：

```
FATAL EXCEPTION: main
Unable to instantiate activity ComponentInfo{jp.co.atori.A12022411/jp.co.atori.A12022411A.FSDMainLauncherActivity}: java.lang.ClassNotFoundException: jp.co.atori.A12022411A.FSDMainLauncherActivity in loader dalvik.system.PathClassLoader[/data/app/jp.co.atori.A12022411-1.apk]
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1569)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
at android.app.ActivityThread.access$1500(ActivityThread.java:117)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:130)
at android.app.ActivityThread.main(ActivityThread.java:3683)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.ClassNotFoundException: jp.co.atori.A12022411A.FSDMainLauncherActivity in loader dalvik.system.PathClassLoader[/data/app/jp.co.atori.A12022411-1.apk]
at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1561) 
```

更改清单后，它看起来像：

```
<activity
    android:name="jp.co.atori.A12022411.MainActivity"
    android:label="@string/app_name" >
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
    <intent-filter>
        <action android:name="android.intent.action.VIEW" />
        <category android:name="android.intent.category.DEFAULT" />
        <category android:name="android.intent.category.BROWSABLE" />
        <data android:scheme="aircel-bookshelfviewer" />
    </intent-filter>
</activity>
<activity
    android:name="jp.co.atori.A12022411A.FSDMainLauncherActivity"
    android:label="@string/app_name"
    android:taskAffinity="com.jp.co.atori.A12022411A.FSDMainLauncherActivity.viewer"
    android:permission="com.smartebook.android.fsdreader.permission"
    android:theme="@android:style/Theme.NoTitleBar" >
    <intent-filter>
        <action android:name="FSDREADERAPPLICATION" />
        <category android:name="android.intent.category.DEFAULT" />
        <data android:mimeType="text/*" />
    </intent-filter>
</activity> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T13:35:25.483

您可以简单地将所有内容打包为一个应用程序 (APK)，并提供 2 个单独的启动器，一个用于阅读器，一个用于查看器。您的清单看起来像这样：

```
 <activity
        android:name=".ViewerActivity"
        android:icon="@drawable/viewer_logo"
        android:label="@string/viewer_activity_title" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity
        android:name=".ReaderActivity"
        android:taskAffinity="com.yourapp.reader"
        android:icon="@drawable/reader_logo"
        android:label="@string/reader_activity_title" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

因此，在用户安装您的应用程序后，他们将看到 2 个应用程序图标：一个将您带到您的阅读器，一个将您带到您的查看器。这些是同一个应用程序的 2 个入口点（但在用户看来它们是 2 个不同的应用程序）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T13:34:38.997

当用户安装一个应用程序时，在它第一次启动时，您可以简单地检查另一个应用程序是否安装在设备上。看到这个[帖子](https://stackoverflow.com/questions/6758841/how-to-know-perticular-package-application-exist-in-the-device)。如果未安装，您可以为 Play 商店触发 Intent，然后用户安装其他应用。你可以检查[这个](https://stackoverflow.com/questions/10922762/open-link-of-google-play-store-in-mobile-version-android)。

# c# - 在 Timer's Tick 事件中注册客户端脚本

> ID：15113322
> 
> 赞同：1
> 
> 时间：2013-02-27T13:28:09.263
> 
> 标签：c#

我正在尝试在计时器的滴答事件中注册脚本，但什么也没发生，

```
protected void UpdateTimer_Tick(object sender, EventArgs e)
        { 
                ScriptManager.RegisterClientScriptBlock(this, this.GetType(), "script", "ShowDialog()", true);
        } 
```

也试过`ScriptManager.RegisterStartupScript`了，但它不起作用。尝试调用简单警报但效果不佳。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T13:30:13.277

RegisterClientScriptBlock 仅在页面首次加载时才起作用。在服务器上的后台线程上调用它时，您不可能期望它能够工作。

相反，您需要注册一个启动计时器客户端的客户端脚本块 - 查看 javascript setTimeout。

例如在页面加载中

```
ScriptManager.RegisterClientScriptBlock(this, this.GetType(), "script", "window.setTimeout(ShowDialog, 1000);", true); 
```

或有论据...

```
ScriptManager.RegisterClientScriptBlock(this, this.GetType(), "script", "window.setTimeout(function(){ShowDialog(arg1,arg2);}, 1000);", true); 
```

# c++ - 错误的 cv::putText 结果

> ID：15113325
> 
> 赞同：2
> 
> 时间：2013-02-27T13:28:14.817
> 
> 标签：c++, opencv

我正在使用 openCV 在带有 cv::putText 的框架（cv::Mat）上绘制一些文本。但是，输出显示`4?=`or`,?,`等​​（每次运行都更改）而不是`"Funny text inside the box"`.

我的（简化）代码：

```
Mat image = Mat::zeros(imgH,imgW, CV_8UC1);
int fontFace = FONT_HERSHEY_COMPLEX_SMALL;
double fontScale = 1.5;
int thickness = 2;
Point textOrg(imgW/5, imgH/1.2);
string someText = "Funny text inside the box";
putText(image, someText, textOrg, fontFace, fontScale, Scalar::all(255), thickness, 8); 
```

可能是什么问题呢？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-06T02:49:59.167

好的，我在同样的问题上苦苦挣扎，最终解决了 OpenCV 库版本 2.4.9.0 rev 1。以下细节适用于 Android 本机活动，但任何平台的总体思路都是相同的。

对于 Android：我首先`OPENCV_LIB_TYPE:=STATIC`在**Android.mk**中添加了“”来尝试静态链接库。链接器给出了一堆关于 - 还有什么 - std::string 的错误。然后我碰巧注意到**Application.mk**`APP_STL := stlport_static`中有这一行“ ” 。我不知道它是如何到达那里的，但我将其更改为 " " 并且一切正常。**`APP_STL := gnustl_static`**

 **一般来说：尝试静态链接到 OpenCV 库以暴露错误。然后，您可以跟踪并修复包含和用于 STL 的实际库中的不匹配。

我希望这可以帮助遇到同样问题的其他人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T14:39:10.180

你确定你没有对字符串做任何其他事情吗？您的代码似乎运行良好：

![简历::putText](../Images/fc302d5892630f28ecee33888ee6f964.png)

这是我运行的完整代码：

```
#include "opencv2/core/core.hpp"
#include "opencv2/highgui/highgui.hpp"

using namespace cv;

int main()
{
    int imgW = 650;
    int imgH = 50;

    Mat image = Mat::zeros(imgH,imgW, CV_8UC1);
    int fontFace = FONT_HERSHEY_COMPLEX_SMALL;
    double fontScale = 1.5;
    int thickness = 2;
    Point textOrg(imgW/5, imgH/1.2);
    string someText = "Funny text inside the box";
    putText(image, someText, textOrg, fontFace, fontScale, Scalar::all(255), thickness,8);

    for(;;){
        imshow("text",image);
        if(waitKey(30) > 0) break;
    }

    return 0;
} 
```**

# ios - 重命名应用程序委托后，StoryBoard 应用程序无法正常工作

> ID：15113329
> 
> 赞同：0
> 
> 时间：2013-02-27T13:28:38.200
> 
> 标签：ios, storyboard, appdelegate

我有一个使用故事板技术的现有项目，我必须向它添加一个 SDK，并且必须将我的 AppDelegate.m 重命名为 AppDelegate.mm

重命名后，如果我运行应用程序，我会收到以下错误。

没有设置 appdelegate：必须指定 Ann App 委托类才能使用主故事 borad 文件

问候西坎德

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-27T20:41:56.413

当我尝试对我的项目进行 de-ARC（长篇故事）并通过我的主要功能复制我在网上找到的一些代码时，我遇到了类似的问题。原来我已经替换了这个：

```
int retVal = UIApplicationMain(argc, argv, nil, NSStringFromClass([cAppDelegate class])); 
```

有了这个：

```
int retVal = UIApplicationMain(argc, argv, nil, nil); 
```

把它放回以前的方式让它再次工作。

# javascript - 获取点击的链接按钮 ID，其中所有按钮都已绑定到一个功能

> ID：15113332
> 
> 赞同：0
> 
> 时间：2013-02-27T13:28:58.440
> 
> 标签：javascript, jquery

应用程序接收 html 潜水并创建一个页面并将其附加到应用程序

我将一组页面中的所有链接按钮绑定到一个函数，该函数将执行不同的任务，具体取决于页面的 ID 现在当页面有多个链接按钮时我遇到问题我需要单击按钮的 ID

html:

```
<a id="x">x </a>
<a id="y">y </a> 
```

JS：

```
 var btns = [];
   $('#page-' + newpages[j].pageID + ' a').each(function () {
       btns.push({
           id: this.id,
           value: this.value,
           name: this.name
       });
   });
   for (i in btns) {

       $('#' + btns[i].id).bind('click', function () {
           test(btns[i].id)
       });
       // bin all buttons in current page to test()
   }
};
};

function test(x) {
   var page = $('.ui-page-active').attr('id');

   /////////
   //here I'm trying to ge the ID of clicked button of that page (each ID means something)
   var pos = '';
   $('#' + page + ' a').click(function () {
       //Get the id of this clicked item

       var BID = $(this).attr("id");
       alert(BID);
       send(BID);
   }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T13:38:58.877

为什么不单独绑定到每个按钮上的点击事件呢？如果您仍然按 ID 切换，为什么要通过通用函数，任何共享功能都可以抽象为一个函数并由每个单击处理程序使用，因此您不会丢失任何内容。

# php - 检索数据并在下拉列表中显示（php/mysql）

> ID：15113335
> 
> 赞同：-2
> 
> 时间：2013-02-27T13:29:13.343
> 
> 标签：php, mysql, dreamweaver

谁能告诉我这个大坝代码中的错误是什么我疯狂地搜索错误但没有任何成功错误是我没有从表中获取任何数据为什么会发生这种情况？请帮帮我

# 索引.php

```
<html>
<head>
</head>
<body>
<form action="index.php" method="post">
<label for="searchByCountry">By Country</label>
            <select name="searchByCountry" id="searchByCountry">
             <option id="0">--select your country--</option>
             <?php
                 require_once('connfor_lamelchameltest.php'); 

               $getallCountries = mysql_query("SELECT country_name FROM country") or die("could not search for countries");
         if(mysql_num_rows($getallCountries) > 0) {

               while($viewallCountries = mysql_fetch_array($getallCountries)){

                ?>

               <option id="<?php echo $viewallCountries['country_name']; ?> "></option>
                 <?php } ?>
               <?php } ?>

            </select>
 </form>
 </body>
 </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T13:40:44.977

```
<html>
<head>
</head>
<body>
<form action="index.php" method="post">
<label for="searchByCountry">By Country</label>
            <select name="searchByCountry" id="searchByCountry">
             <option id="0">--select your country--</option>
             <?php
                 require_once('connfor_lamelchameltest.php'); 

               $getallCountries = mysql_query("SELECT country_name FROM country") or die("could not search for countries");
         if(mysql_num_rows($getallCountries) > 0) {

               while($viewallCountries = mysql_fetch_array($getallCountries)){

                ?>

               <option value="<?php echo $viewallCountries['country_name']; ?> ">
<?php echo $viewallCountries['country_name']; ?>
</option>
                 <?php } ?>
               <?php } ?>

            </select>
 </form>
 </body>
 </html> 
```

# uitableview - iOS 中 Pickerview 和 Tableview 的区别

> ID：15113336
> 
> 赞同：-1
> 
> 时间：2013-02-27T13:29:12.963
> 
> 标签：uitableview, uipickerview

我是iOS开发的新手，谁能说出这两个视图之间的主要区别是什么，表格视图和选择器视图..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T22:25:43.237

表格视图比选择器更通用。它是在移动设备上显示列表数据的主要机制。最重要的区别是您可以对主单元进行子类化，`UITableViewCell`以创建丰富且个性化的界面。从概念上讲，tableview 的内容长度基本上可以是无限的。

选择器视图在大小、样式和功能方面都受到更多限制。它实际上是一种标准化的方式，可以从有限数量的主要字符串中进行选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T09:16:26.150

我认为不需要比较 UITableViewController 和 Pickerview 控制器。我们可以根据需要使用自定义单元格而不是在选择器视图中自定义 UITabelview。

选择器视图只是从列表中选择一个。我们可以根据需要使用表格视图代替选择器，但不能使用选择器代替表格视图。如果我们从技术上讲，调用事件的委托方法之间没有太大区别。但是在界面生成器和视图组件的使用情况下，表视图有更多的监督。

# c# - 使用线程延迟一一显示几个文本框

> ID：15113339
> 
> 赞同：1
> 
> 时间：2013-02-27T13:29:23.143
> 
> 标签：c#, multithreading, visual-studio-2010, web-applications, asp.net-4.0

我是 C# 的初学者。我正在使用 C#.net 开发一个 Web 应用程序。

我的问题是，当我单击一个按钮时，我需要在 Web 表单中一个一个地显示一些文本框，并保持一些延迟。我已经输入了这样的按钮单击事件；

```
textBox1.Text = C1.ToString();
    Thread.Sleep(5000);

    textBox2.Text = C2.ToString();
    Thread.Sleep(5000);

    textBox3.Text = C3.ToString();
    Thread.Sleep(5000);

    textBox4.Text = C4.ToString(); 
```

这里 C1,C2,C3,C4 是存储一些值的整数变量。
输出在 (5000*3)=15000 时间段（15 秒后）后一次显示所有 4 个文本框。

**但实际上我需要它们每 5 秒后一个一个显示。** 当我按下按钮时， textBox1 应该显示，而 textBox2 应该在 5 秒后显示。我怎么能那样做？ **我可以使用线程来做到这一点吗？**或者请告诉我一个更好的方法。请帮我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T16:16:51.190

您要做的是将所有文本框发送到页面，但将它们隐藏在`<div>`or中`<span>`并将其样式设置为`hidden`. 然后用一些延迟的javascript慢慢地一一展示。

这是一个很好的关于在 javascript 中隐藏和显示网页上的元素的小教程。 [http://www.javascriptkit.com/javatutors/dom3.shtml](http://www.javascriptkit.com/javatutors/dom3.shtml)

以下是延迟显示的 javascript 的工作方式：

```
<script type="text/javascript">
    setTimeout(function() {showText1()}, 5000);

    function showText1 () {
        //javascript to set textbox1's div/span to visible
        setTimeout(function() {showText2()}, 5000);
    }

    function showText2 () {
        //javascript to set textbox2's div/span to visible
        setTimeout(function() {showText3()}, 5000);
    }

    function showText3 () {
        //javascript to set textbox3's div/span to visible
    }
</script> 
```

# asp.net - DropdownList 和 Textbox 未调用 SelectedIndex/Text 在 IE 和 FF 中的第一次回发时发生更改

> ID：15113342
> 
> 赞同：2
> 
> 时间：2013-02-27T13:29:45.837
> 
> 标签：asp.net, vb.net

我知道这是一个以前被问过几次的问题，但是环顾四周后，我似乎找不到适合我的答案。

我有一个带有 2 个文本框（设置为使用 JQuery 显示日期）、一个下拉列表和一个数据网格的 VB.NET 页面。

文本框和下拉列表都设置为触发事件（如果它们发生更改）以更新数据网格。

通常，这可以正常工作，但有一个例外；当我在初始页面加载后更改文本框或下拉列表的值时，它通常不会触发事件，回发设置为 false 并清除下拉列表值；这在 Chrome 中不会发生，并且在 Firefox 中的频率低于在 IE 中。

我尝试了以下方法：

我已经在所有项目上设置了 autopostback=true

尝试将未启用的额外项目添加到下拉列表

将框/列表移到更新面板之外

设置 ViewStateMode=Enabled

尝试添加一个设置为 Request.Form(ddlDropdownList.UniqueNumber) 的隐藏字段，并将其与页面加载中的 Request.Form(ddlDropdownList.UniqueNumber) 进行比较，作为触发事件的一种方式（建议说使用 Request.Forms，但这不是智能感知的一个选项吗？）

所有这些解决方案要么不起作用，导致其他问题，要么我做得不对（当然可能是这种情况）

提前感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:32:26.820

我不知道这是否会有所帮助，我已经有一段时间没有完成网络表单了，但我确实记得列表框存在问题，我必须在填充页面时检查页面是否不在回发中。

所以基本上在你的页面加载方法中，在初始化之前检查页面是否*不是*回发。我发现即使我选择了一个新项目，它也会将列表重置为默认状态。

这可能会或可能不会帮助你，但我认为至少值得一提。

# jsf - 如何在没有保存/打开对话框的情况下将文件从服务器下载到客户端机器到浏览器中设置的默认文件夹中？

> ID：15113344
> 
> 赞同：-1
> 
> 时间：2013-02-27T13:29:48.397
> 
> 标签：jsf, download, savefiledialog

在我的 jsf 应用程序中，文件名使用带有每个文件的复选框选项的数据表组件显示，它们是单个下载按钮。当用户选择任何文件并单击下载按钮时，它应该下载到浏览器设置的客户端机器默认文件夹或指定文件夹中。例如：（D：/dstoreFiles）不显示保存/打开/取消对话框。应用程序是使用eclipse开发的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T13:33:27.717

> *无需显示保存/打开/取消对话框。*

使用标准 HTTP/HTML 方法是不可能的，因为这将是安全漏洞。您不希望网站能够在您访问页面时将任意文件写入本地磁盘文件系统的任意位置而无需任何形式的确认，对吗？由于 JSF 基本上是一个位于 HTTP/HTML 之上的 MVC 框架，因此无论如何它都无法为您提供任何魔法以使其正常工作。

在 Java 术语中，这只能使用已签名 (!!) 小程序或 webstart (JNLP) 应用程序来实现。`<applet>`然后，您可以使用或`<object>`标记将其嵌入到您的 JSF（阅读：HTML）页面中。如有必要，您可以使用简单的 servlet 让网络浏览器中的小程序与网络服务器中的代码交互。

# c# - 找出所有 DLL 的依赖关系？

> ID：15113352
> 
> 赞同：53
> 
> 时间：2013-02-27T13:30:16.867
> 
> 标签：c#, .net-assembly, assemblies

我有一组 DLL（比如 20 个）。如何找出某个特定 DLL（例如 DLL A）所依赖的所有 DLL？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-02-27T13:32:33.533

如果您的意思是以编程方式，请使用[`Assembly.GetReferencedAssemblies`](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.getreferencedassemblies.aspx).

您可以递归地使用它来查找您需要的所有程序集。（所以你找到X的依赖关系，然后是依赖关系的依赖关系，等等）

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-02-27T13:40:46.240

由于问题被标记为“C#”，我假设您正在谈论托管 dll（程序集）。在这种情况下，dependencywalker 没有用。如果你想用一个程序来做到这一点，JetBrians 的 dotPeek 和 RedGate 的 Reflector 是不错的选择。或者您甚至可以使用 Visual Studio 中的对象检查器。

然而，这可能是一个漫长的过程，也很麻烦。`Assembly.GetReferencedAssemblies`正如 Jon 所提到的，我会编写一个简短的 C# 程序/F# 脚本，它使用.

相反，如果您想使用程序（C# 代码）检查本机 DLL 依赖关系，则必须检查 PE 文件（MS dll 和 exe 文件格式）及其 IAT（导入地址表）。不容易，但也不是不可能……

我将从[MSDN](http://msdn.microsoft.com/en-us/magazine/cc301805.aspx)和[这里](http://msdn.microsoft.com/en-us/windows/hardware/gg463119.aspx)开始了解 PE 部分，并使用托管库来阅读它（有很多，包括 Mono 项目中的一些（我在想[Cecil](http://www.mono-project.com/Cecil)，它也应该与本机二进制文件一起使用）；在过去我用过好约翰·高夫的[这个](http://perwapi.codeplex.com/)。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-02-27T13:31:57.823

您可以使用dependency walker [http://www.dependencywalker.com](http://www.dependencywalker.com)来解决这个问题。请注意 x32 和 x64 之间的区别。

> Dependency Walker 是一个免费实用程序，它可以扫描任何 32 位或 64 位 Windows 模块（exe、dll、ocx、sys 等）并构建所有依赖模块的层次树图。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2017-04-27T23:45:05.147

所有答案都归功于以前的作者使用`Assembly.GetReferencedAssemblies`. 这只是一个只适用于 .NET 程序集的即写即忘 C# 控制台应用程序。`return 0`在您能够检查的程序集上，并在成功时将它们输出到 STDOUT。其他一切都会`return 1`打印出某种错误输出。[你可以在这里](https://gist.github.com/the-nose-knows/02ef408011584f7e2b86f65f45e18e5a)抓住要点。

```
using System;
using System.Reflection;
using System.IO;
namespace DotNetInspectorGadget
{
    class DotNetInspectorGadget 
    {
        static int Main(string[] args) 
        {
          if(args.GetLength(0) < 1)
          {
            Console.WriteLine("Add a single parameter that is your" +
            " path to the file you want inspected.");
            return 1;
          }
          try {
                var assemblies = Assembly.LoadFile(@args[0]).GetReferencedAssemblies();

                if (assemblies.GetLength(0) > 0)
                {
                  foreach (var assembly in assemblies)
                  {
                    Console.WriteLine(assembly);
                  }
                  return 0;
                }
          }
          catch(Exception e) {
            Console.WriteLine("An exception occurred: {0}", e.Message);
            return 1;
          } finally{}

            return 1;
        }
    }
} 
```

用法：

```
call %cd%\dotnet_inspector_gadget.exe C:\Windows\Microsoft.NET\assembly\GAC_64\Microsoft.ConfigCI.Commands\v4.0_10.0.0.0__31bf3856ad364e35\Microsoft.ConfigCI.Commands.dll 
```

输出：

> ```
> mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
> System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
> System.Xml, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
> System.Management.Automation, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35
> System.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
> System.Security, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
> System.Management, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a 
> ```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-02-10T14:19:25.950

对于 .NET 程序集，查看程序集所依赖的程序集的绝佳工具是[AsmSpy](http://mikehadlow.blogspot.nl/2011/02/asmspy-little-tool-to-help-fix-assembly.html)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-04-18T13:24:58.930

如果您想要 DLL（文件），`Assembly.GetReferencedAssemblies`则还将返回 .Net Framework 程序集。

这是一个简单的代码片段，它将获取它可以在当前目录中找到的 dll（还包括一些其他相关文件）：

```
private readonly string[] _extensions = { ".dll", ".exe", ".pdb", ".dll.config", ".exe.config" };

private string[] GetDependentFiles(Assembly assembly)
{
    AssemblyName[] asm = assembly.GetReferencedAssemblies();
    List<string> paths = new List<string>(asm.Length);
    for (int t = asm.Length - 1; t >= 0; t--)
    {
        for (int e = _extensions.Length - 1; e >= 0; e--)
        {
            string path = Path.GetFullPath(asm[t].Name + _extensions[e]);
            if (File.Exists(path)) paths.Add(path);
        }
    }

    return paths.ToArray();
} 
```

你可以这样称呼它：`MessageBox.Show(string.Join("\r\n", GetDependentFiles(Assembly.GetEntryAssembly())));`

# tsql - 具有用户定义类型的动态“INSERT INTO”查询

> ID：15113354
> 
> 赞同：0
> 
> 时间：2013-02-27T13:30:22.363
> 
> 标签：tsql, sql-server-2012, user-defined-types, dynamicquery, sp-executesql

我有一个 SQL 表，每行包含某种 Virtuel-Tabel 的单个值 - 意味着真正存在的 SQL 表如下所示：

```
-----------------------------------------
|DataRecordset | DataField | DataValue  |
-----------------------------------------
| 1            | Firstname | John       |
| 1            | Lastname  | Smith      |
| 1            | Birthday  | 18.12.1963 |
| 2            | Firstname | Jane       |
| 2            | Lastname  | Smith      |
| 2            | Birthday  | 14.06.1975 |
----------------------------------------- 
```

我需要得到这样的感觉：

```
-------------------------------------
| Firstname | Lastname | Birthday   |
-------------------------------------
| John      | Smith    | 18.12.1963 |
| Jane      | Smith    | 14.06.1975 |
------------------------------------- 
```

真正现有的 SQL 表像第一个一样存储的原因是，围绕核心数据有更多信息......比如谁写了数据......什么时候写的数据......从哪个数据显着到什么时候......所以有很多不同的变量决定我使用第一个表中的哪一行来生成第二个。

我在 SQL Server 上创建了一个用户定义的表类型，它看起来像第二个表。

然后我开始写程序...

```
DECLARE @secondTable secondTable_Typ

DECLARE firstTable_Cursor CURSOR FOR SELECT DataRecordset, ... WHERE...lot of Text
OPEN firstTable_Cursor

FETCH NEXT FROM firstTable_Cursor
INTO @DataRecordset, @...

WHILE @@FETCH_STATUS = 0
BEGIN

  IF NOT EXISTS(SELECT * FROM @secondTable WHERE DataRecordset= @DataRecordset)
  BEGIN 
```

我遇到的问题......现在我需要某种动态查询，因为我想做这样的事情：

```
INSERT INTO @secondTable (DataRecordset, @DataField ) VALUES (@DataRecordset, @DataValue) 
```

但我不能像这样使用变量@DataField ...所以我使用谷歌并找到了函数sp_executesql ...我编写了以下代码：

```
SET @sqlString = 'INSERT INTO @xsecondTable  (DataRecordset, ' + @DataField + ') VALUES (@xDataRecordset, @xDataValue)'
EXEC sp_executesql @sqlString, N'@xsecondTable secondTable_Typ, @xDataRecordset smallint, @xDataValue sql_variant', @secondTable , @DataRecordset, @DataValue 
```

但是当我运行程序时出现错误，这意味着我必须将参数“READONLY”添加到“@xsecondTable”......

我认为问题是，sp_executesql 可以使用变量作为输入或作为输出......但我不确定是否可以将此用户定义的表类型放入此过程中......

有人知道如何让这段代码运行吗？

非常感谢您

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T13:36:50.360

您是否考虑过对数据进行 PIVOT？类似于以下内容：

```
SELECT
    [Firstname]
  , [Lastname]
  , [Birthday]
FROM
    (
        SELECT
            [DataRecordset]
          , [DataField]
          , [DataValue]
        FROM [Table]
    ) DATA
    PIVOT
    (
        MIN ([DataValue]) FOR [DataField] IN
        (
            [Firstname]
          , [Lastname]
          , [Birthday]
        )
    ) PVT 
```

# javascript - 如何设置 XDomainRequest 对象的内容类型？

> ID：15113355
> 
> 赞同：5
> 
> 时间：2013-02-27T13:30:25.887
> 
> 标签：javascript, http, xmlhttprequest, xdomainrequest

对于 XMLHttpRequest 这很简单：

```
var xhr = new XMLHttpRequest();
xhr.open('POST', MyUrl, true);
xhr.setRequestHeader('Content-Type', 'application/json') 
```

但是我如何为 XDomainRequest 实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-24T17:38:48.690

无法覆盖 XMLHttpRequest 内容类型。您应该在服务器上正确设置它，例如对于 php：

```
header('Content-type: application/json'); 
```

如果这不可能，那么您可以创建一个本地代理脚本，该脚本使用正确的标头镜像您的跨域脚本

# php - rowCount 返回 0，即使它不应该

> ID：15113356
> 
> 赞同：3
> 
> 时间：2013-02-27T13:30:26.187
> 
> 标签：php, mysql, pdo

```
$this->db->beginTransaction();
$this->db->query ('LOCK TABLES users WRITE');
$sql = 'INSERT INTO users (uname) VALUES (:uname)';
$sth = $this->db->prepare ($sql);
$sth->bindParam (':uname', $uname);
$sth->execute ();
if ($sth->rowCount()==0) {
  $this->db->rollBack();
  $this->db->query ('UNLOCK TABLES');
  throw new Exception('<strong>Oh snap!</strong> User name is taken! Try again.');
} 
```

我在我的数据库中手动设置了一个名为“test”的用户。当我创建一个名为“test2”的用户时，它就起作用了。但是每当我尝试创建第三个用户时，我都会得到`rowCount = 0`.

`uname`数据库中的`varchar(15)`.

```
if(isset($_POST['regUser']) && isset($_POST['regPwd']) && isset($_POST['regConfirmPwd'])) {  
    if($_POST['regPwd'] == $_POST['regConfirmPwd'] ) {  
        $user->newUser($_POST['regUser'], $_POST['regPwd']);

} else {  
    $user->error = "<strong>Oh snap!</strong> The passwords don't match!";
  }  
} 
```

将发布信息发送到我的 newuser 函数，它会停在那里的第一位代码。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:36:09.297

与其插入用户然后回滚，不如测试该用户是否可用（在锁定表之后），然后放心地进行插入。

# ruby - 如何在 ruby 中使用 Mechanize 和 XMLSimple 解析 XML？

> ID：15113358
> 
> 赞同：2
> 
> 时间：2013-02-27T13:30:30.210
> 
> 标签：ruby, xml, xml-parsing, mechanize, xml-simple

我正在尝试使用[Mechanize](http://mechanize.rubyforge.org/)获取远程 XML 文件以获取 icecast 状态信息。但是我在将 XML 文件从`Mechanize::File`格式传递到字符串或[XMLSimple](http://xml-simple.rubyforge.org/)可以使用的某种 XML 格式时遇到问题。

XML 文档如下所示：

```
<icestats>
  <admin>donschoe@stackoverflow.com</admin>
  <!-- ... -->
</icestats> 
```

我的代码现在看起来像这样：

```
require 'mechanize'
require 'xmlsimple'

server = 'example.net'
port = 8000
user = 'stackoverflow'
password = 'hackme'
agent = Mechanize.new
agent.user_agent_alias = 'Linux Firefox'
agent.add_auth("http://#{server}:#{port}/admin/status.xml", user, password)
agent.get("http://#{server}:#{port}/admin/status.xml")
xml = agent.current_page
status = XmlSimple.xml_in(xml)
puts status['admin'] 
```

这应该输出：`donschoe@stackoverflow.com`

但它抛出：

```
/home/user/.gem/ruby/1.9.1/gems/xml-simple-1.1.2/lib/xmlsimple.rb:191:in 'xml_in': Could not parse object of type: <Mechanize::File>. (ArgumentError) 
```

现在，我知道 XMLSimple 需要一个字符串，因此我尝试将`Mechanize::File`格式转换为字符串，将倒数第二行替换为：

```
status = XmlSimple.xml_in(xml.to_s) 
```

但这引发了一个更奇怪的异常：

```
/usr/lib64/ruby/1.9.1/rexml/parsers/baseparser.rb:406:in `block in pull_event': Undefined prefix Mechanize: found (REXML::UndefinedNamespaceException)
  from /usr/lib64/ruby/1.9.1/set.rb:222:in `block in each'
  from /usr/lib64/ruby/1.9.1/set.rb:222:in `each_key'
  from /usr/lib64/ruby/1.9.1/set.rb:222:in `each'
  from /usr/lib64/ruby/1.9.1/rexml/parsers/baseparser.rb:404:in `pull_event'
  from /usr/lib64/ruby/1.9.1/rexml/parsers/baseparser.rb:183:in `pull'
  from /usr/lib64/ruby/1.9.1/rexml/parsers/treeparser.rb:22:in `parse'
  from /usr/lib64/ruby/1.9.1/rexml/document.rb:231:in `build'
  from /usr/lib64/ruby/1.9.1/rexml/document.rb:43:in `initialize'
  from /home/user/.gem/ruby/1.9.1/gems/xml-simple-1.1.2/lib/xmlsimple.rb:965:in `new'
  from /home/user/.gem/ruby/1.9.1/gems/xml-simple-1.1.2/lib/xmlsimple.rb:965:in `parse'
  from /home/user/.gem/ruby/1.9.1/gems/xml-simple-1.1.2/lib/xmlsimple.rb:164:in `xml_in'
  from /home/user/.gem/ruby/1.9.1/gems/xml-simple-1.1.2/lib/xmlsimple.rb:203:in `xml_in'
  from debugging.rb:16:in `<main>' 
```

我的方法有什么问题？当我下载 XML 文件并使用本地 XML 文件时，上面的代码可以正常工作。

我特别在寻找 Mechanize 而不是 Nokogiri 的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T00:37:40.497

尝试改变：

```
xml = agent.current_page 
```

到：

```
xml = agent.current_page.body 
```

# actionscript-3 - 在动作脚本中输入角度时过度绘制圆圈？

> ID：15113361
> 
> 赞同：1
> 
> 时间：2013-02-27T13:30:40.583
> 
> 标签：actionscript-3, actionscript, actionscript-2, geometry

```
 var theTextField:TextField = new TextField();
    var theText:TextField = new TextField();

    theTextField.type = TextFieldType.INPUT;
    theTextField.border = true;
    theTextField.x = 50;
    theTextField.y = 10;
    theTextField.height = 20;
    theTextField.multiline = true;
    theTextField.wordWrap = true;

    theText.border = false;
    theText.x = 10;
    theText.y = 10;
    theText.text = "Angle";
    addChild(theText);
    addChild(theTextField);

    submit.addEventListener(MouseEvent.CLICK, click_handler);
    function click_handler(event:MouseEvent):void
    {
       var txt:String = theTextField.text;
       ang = Number(txt);

       if (ang<0)
       {
          angle =  -  ang;
       }
       else
       {
          angle = 360 - ang;

        }
       var circleSlider:CircleSlider=new CircleSlider(120,angle); //draw Circle    According to the angle i think here is problem becoz every time clicked it creates new circle and draw over the old circle.

       circleSlider.x = stage.stageWidth / 2;
       circleSlider.y = stage.stageHeight / 2;
       circleSlider.addEventListener(CircleSliderEvent.CHANGE,  circleSliderEventHandler);
       addChild(circleSlider);
           } 
```

有人能帮我吗。

```
 var circleSlider:CircleSlider=new CircleSlider(120,angle);//draw Circle    According to the angle i think here is problem becoz every time clicked it creates new circle and draw over the old circle. 
```

这段代码是问题所在。CircleSlider 是一个单独的类。我试过这样

```
 circleSlider.CircleSlider(120,angle); 
```

但它给出了一个错误“”通过静态类型 CircleSlider 的引用调用可能未定义的方法 CircleSlider。“”

当我运行程序并将值输入为 90 时。 ![123](../Images/2df5be0f75973dbfa800a849e3f3b475.png)

然后我输入另一个值 180 然后它变成 ![1233](../Images/3a8a0ef7840048d9f0fe5dba77fe98ac.png)

我该如何克服这个错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T13:44:14.127

每次执行单击处理程序时，您都在创建循环类的新实例并将其添加到舞台而不删除旧实例。我认为解决它的最好方法是将`CircleSlider`类的构造函数中的逻辑移动到一个单独的公共方法中，比如说`draw`并在点击处理程序中调用它。

您的代码将如下所示：

```
// Set up the circle once
var circleSlider = new CircleSlider();
circleSlider.x = stage.stageWidth / 2;
circleSlider.y = stage.stageHeight / 2;
circleSlider.addEventListener(CircleSliderEvent.CHANGE,  circleSliderEventHandler);

// and add it to the stage once
addChild(circleSlider);

function click_handler(event:MouseEvent):void
{
       var txt:String = theTextField.text;
       ang = Number(txt);

       if (ang<0)
       {
          angle =  -  ang;
       }
       else
       {
          angle = 360 - ang;

      }
        // Now simply redraw in the same circle instance
       circleSlider.draw(120,angle); //draw Circle    According to the angle i think here is problem becoz every time clicked it creates new circle and draw over the old circle.
} 
```

假设您使用绘图 API 来绘制图形，您可以在构造函数中（一次）绘制圆（似乎是恒定的），并在 draw 方法中绘制说明角度的线（重复）。您每次都需要像这样清除旧行：

```
// Assumes you're drawing in the graphics property of the class
this.graphics.clear(); 
```

# c# - 在 Datalist 中显示来自 Mysql 数据库的图像

> ID：15113362
> 
> 赞同：0
> 
> 时间：2013-02-27T13:30:44.173
> 
> 标签：c#, asp.net, mysql

我将图像路径和图像名称保存在 myqsl 数据库中。现在我想在 asp.net 数据列表中显示数据库中的图像。我有这样的查询结果 ![在此处输入图像描述](../Images/14961751cf70fa3eb862298cee62b886.png)

我想用 pageName 显示图片。我在 datalst 上做了类似的事情。

```
<asp:DataList ID="dtlistImages" runat="server" RepeatColumns="3" RepeatDirection="Horizontal"
                        BorderColor="#336699" BorderStyle="Solid" BorderWidth="2px">
            <ItemTemplate>
                <asp:Label ID="lblID" runat="server" Text='<%# Eval("pageName") %>' Font-Bold="true"
                            Font-Size="10pt" ForeColor="#336699" Width="100%"/>
                            </br>
                 <asp:Image ID="imgnewspaper" runat="server" ImageUrl='<%#  Eval("pageNumber") %>' />
                 </ItemTemplate>
                 <ItemStyle HorizontalAlign="Center" VerticalAlign="Top" />    
    </asp:DataList> 
```

代码背后：

```
 public DataTable getData(string query)
        {
            MySqlConnection conn1 = new MySqlConnection(ConfigurationManager.ConnectionStrings["ConnString"].ConnectionString);
            conn1.Open();
            MySqlCommand cmd = new MySqlCommand(query, conn1);
            MySqlDataAdapter da = new MySqlDataAdapter(cmd);
            DataTable dt = new DataTable();
            da.Fill(dt);
            return dt;
        }
        protected void btnshow_onclick(object sender, EventArgs e)
        {
            string query = "select cap_newspaper_page.pageServer,cap_newspaper_page.pagePath, pageNumber,pageName,newspaper.newspaperName,newspaper_station.newspaperStationName"+
                            " FROM cap_newspaper_page Inner Join cap_newspaper ON cap_newspaper_page.capnewspaperID = cap_newspaper.capnewspaperID inner join newspaper on newspaper.newspaperID=cap_newspaper.newspaperID"+
                            " inner join newspaper_station on newspaper_station.newspaperStationID=cap_newspaper.newspaperStationID where cap_newspaper.newspaperID="+ddlNewspaper.SelectedValue+" and cap_newspaper.newspaperStationID="+ddlNewspaperStation.SelectedValue+" and cap_newspaper_page.publishDate='"+tbDate.Text+" 00:00:00'";
            dtlistImages.DataSource = getData(query);           
            dtlistImages.DataBind();
        } 
```

但显示是这样的 ![在此处输入图像描述](../Images/9f3b4ed0a849c0c01ae2e7c0b5933783.png)

我如何也可以动态显示图像。基于查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:40:07.653

what does the source code for the compiled html look like? clearly the image paths must be invalid. if you check what the asp has written does this not give a strong clue as to what is wrong?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T13:41:11.677

You only have pageNumber and not pagePath in your Eval

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T14:11:55.023

```
<asp:Image ID="imgnewspaper" runat="server" ImageUrl='<%#  Eval("pagePath") %>' /> 
```

或者
您在本地缺少项目文件夹中的图像`printImages`，如果您在本地运行它，并且如果您在实时服务器上运行它，那么还要检查该文件夹中的图像。

**建议**我通过以下方式实现了同样的目标：

```
 <asp:ListView ID="ImagesList" runat="server" DataKeyNames="ID" GroupItemCount="4"  OnPagePropertiesChanging="ImagesList_PagePropertiesChanging">
        <EmptyDataTemplate>
            No Images found.
         </EmptyDataTemplate>
          <ItemTemplate>
               <asp:ImageButton ID="MyPicture" runat="server" OnClick="MyPicture_Click" CommandArgument='<%# Eval("ID") %>'  AlternateText='<%# Eval("Name") %>' ImageUrl='<%# Eval("ImagePath") %>' Autopostback="true"Width="155" Height="80" />
  </ItemTemplate>
</asp:ListView> 
```

# c# - 组合不使用 MVVM 和 XAML 更新

> ID：15113365
> 
> 赞同：1
> 
> 时间：2013-02-27T13:30:56.320
> 
> 标签：c#, xaml, mvvm

我在使用 MVVM 方法在 XAML 中对组合进行 DataBinding 时遇到问题。

我在后面的代码中设置了组合的源代码，如下所示：

```
AgesViewModel agesViewModel = new AgesViewModel();
comboAge.SelectedValuePath = "AgeID";
comboAge.DisplayMemberPath = "Age";
comboAge.ItemsSource = agesViewModel.GetAges(); 
```

该组合的 XAML 是：

```
<ComboBox x:Name="comboAge"
          SelectedValue="{Binding AgeID}" /> 
```

该组合是带有文本控件的页面的一部分，它们都 DataBind 很好。页面 DataContext 设置为一个 ViewModel (carViewModel)，它有一个名为 AgeID 的属性。

因此，当组合项目发生更改时，我希望使用所选值更新 carViewModel.AgeID。

每当我从组合中选择一个项目时，都不会更新。我究竟做错了什么？？

提前致谢

我正在使用 XAML、C#4.5 并在 Visual Studio 2012 中编写 Windows 商店应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T13:42:37.790

如果您想遵循 MVVM 模式，请让 ComboBox 的数据也可用`carViewModel`并*绑定*到它。

换句话说：

```
<ComboBox x:Name="comboAge" ItemsSource="{Binding MyAgeList}" SelectedValue="{Binding AgeID}" /> 
```

更改 ComboBox 中的值时，这也会更新`AgeID`属性。

假设 AgeID 是 int （当然，它可以是你想要的任何东西）然后`MyAgeList`应该像这样定义`carViewModel`：

```
public List<int> MyAgeList {get; set;}

// Constructor
public CarViewModel()
{
    MyAgeList = new AgesViewModel().GetAges();
} 
```

# c# - 如何将此字符串转换为日期时间？

> ID：15113366
> 
> 赞同：-7
> 
> 时间：2013-02-27T13:31:08.933
> 
> 标签：c#, .net, datetime

如何在 C# 中将字符串转换`"1319556419"`为 a ？`DateTime`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T13:33:33.440

这看起来像一个 UNIX 时间戳，如果是这样，它将是：

```
Int64 timestamp = Convert.ToInt64("1319556419");
DateTime newDate = new DateTime(1970,1,1).AddSeconds(timestamp); 
```

编辑：从外观上看，它实际上是几秒钟而不是几毫秒。

这给出了 2011 年 10 月 25 日的日期。

# windows-8 - 在 winrt 中删除 Back Stack 条目

> ID：15113367
> 
> 赞同：0
> 
> 时间：2013-02-27T13:31:16.677
> 
> 标签：windows-8, windows-runtime

如何在 Windows 8 xaml - C# 应用程序中删除回栈条目。我在stackoverflow中发现了一个类似的问题。但是任何答案都提供了一种实现功能的清晰方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T18:20:01.197

您的问题在这里得到解答：

[http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/5383710c-0bf6-4fa5-9bd0-2cb4e8754f61](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/5383710c-0bf6-4fa5-9bd0-2cb4e8754f61)

简而言之，它不受支持。它可以通过解决方法来完成，但该解决方法可能会在未来的版本中发生变化。

开发支持、设计支持和更多的好处：http: [//bit.ly/winappsupport](http://bit.ly/winappsupport)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-03T12:31:22.680

解决此问题的一种方法是获取您的框架，并从其 BackStack 中删除最后一个条目，如下所示：

```
mainFrame.BackStack.Remove(mainFrame.BackStack.LastOrDefault()); 
```

# asp.net-mvc - 在 MVC Web 应用程序中跨存储库共享 DbContext

> ID：15113368
> 
> 赞同：18
> 
> 时间：2013-02-27T13:31:19.053
> 
> 标签：asp.net-mvc, ef-code-first, repository-pattern, dbcontext, service-layer

## 问题

**在 MVC Web 应用程序中跨多个存储库共享 EF DbContext 的正确方法是什么？这样做是否谨慎/有必要，这样做或不这样做有什么陷阱？**

## 背景

认为：

*   **App.MvcSite**（几十个控制器，多个区域等）
*   **App.Services**（服务层，很多服务）
*   **App.Data**（许多存储库等）
*   ...等为简单起见排除（EF Code First 最新）

## 迄今为止的研究

我似乎在 SO 和互联网上找到了至少两/三种思想流派。

1.  **将您的 DbContext 共享/范围到请求**，以便单个请求具有由所有存储库共享的单个 DbContext。
2.  **在服务层共享/限定您的 DbContext** —— 服务维护单个 DbContext 并根据需要将其传递给每个存储库。
3.  **不要共享 DbContext，因为它们很便宜，**让每个 Repo 都有自己的。

在一个小型网站中，这不是问题，这就是为什么大多数 MS 和社区示例根本没有解决这个问题。

到目前为止，根据我的经验，我还没有使用过有限的存储库。我一直让服务使用 DbContext 并直接更改它，所以我不需要担心这一点。有人告诉我，从单元测试的角度来看，有限存储库有很大的好处……我们会看看它是否让剩下的事情变得有价值。

## 我的想法

> (1)**将您的 DbContext 共享/范围到请求**

这很有趣，因为它巧妙地避免了单例上下文的陷阱，一些开发人员认为这是答案，但发现 DbContext 不能那样工作。但它似乎有一个缺点，因为它假定所有存储库、服务等都将在整个请求中进行协调......这通常不是这种情况，对吗？如果一个 repo 在另一个 repo 完成其工作之前保存了更改会怎样。（外（内（内）））

> (2)**在服务层共享/限定您的 DbContext**

这对我来说更有意义，因为每个服务都应该协调一个特定的工作单元（故意小写）。因此，如果在一个请求中使用了多个服务，那么每个服务都有自己的数据库上下文是正确的（如果不需要的话）。

> (3)**不要共享 DbContext，因为它们很便宜**

这就是我一直这样做的方式......实际上我几乎总是每个请求只有一个 DbContext，因为只有一个服务被调用。有时可能是两个，因为协调工作的控制器调用了两个服务。但是考虑到我当前的应用程序，有许多有限的存储库，每个存储库都有自己的上下文意味着一个给定的请求可能有 3-10 个 DbContext 实例。我假设（也许是错误的）这是有问题的。

* * *

重复问题：

**在 MVC Web 应用程序中跨多个存储库共享 EF DbContext 的正确方法是什么？这样做是否谨慎/有必要，这样做或不这样做有什么陷阱？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T13:48:05.523

*   `DbContext`很便宜，但分布式事务却不是。
*   附加到一个上下文的对象不能在另一个上下文中使用（如果您有对象关系）

共享上下文的最简单方法是开始使用控制容器的反转：http: [//www.codeproject.com/Articles/386164/Get-injected-into-the-world-of-inverted-dependenci](http://www.codeproject.com/Articles/386164/Get-injected-into-the-world-of-inverted-dependenci)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T23:35:11.203

我会选择前两个选项之间的组合，关于你对第一个选项的看法，不要让存储库保存任何更改（这不是推荐的做事方式，Martin Fowler 说他自己），为此他介绍了工作单元模式。

# vb.net - VB.Net DLLImport

> ID：15113370
> 
> 赞同：0
> 
> 时间：2013-02-27T13:31:22.817
> 
> 标签：vb.net, pinvoke, dllimport

我有一个 PL/I Dll，我正在尝试将 DLL 导入到我的 VB.Net 应用程序中。第一次尝试成功，但在几次调用后，程序确实退出了，没有发表评论。并且不可能从两个不同的线程两次调用这些函数。我从 paramone 中的 DLL 得到结果。任何想法为什么这不能正常工作以及如何让它工作？

```
<DllImport(("PLIDLL.dll"), CallingConvention:=CallingConvention.StdCall)> _
    Public Shared Sub MYFUNC(ByVal LogonString As String, _
                              <MarshalAs(UnmanagedType.VBByRefStr)> ByRef paramone As String, _
                              ByVal paramtwo As String)
    End Sub 
```

如果有什么不清楚的请询问。

问候林

PS：我已经尝试重写 PL/I 代码，以便它返回一个字符串而不是 ByRef 值。同样的问题。

PLI 中的子：

```
 MYFUNC: PROC(LOGONSTRING,PARAMONE,PARAMTWO) REORDER
          OPTIONS(FROMALIEN NODESCRIPTOR
                  BYADDR LINKAGE(STDCALL));

          DEFAULT RANGE(*) STATIC;

   DCL LOGONSTRING CHAR(30);
   DCL PARAMONE CHAR(2033);            
   DCL PARAMTWO CHAR (5500); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T09:54:03.867

至少找到了一个可行的解决方案。

```
Module NativeMethods

<DllImport("kernel32.dll", SetLastError:=True)> _
    Public Function LoadLibrary(ByVal lpFileName As String) As IntPtr
    End Function

<DllImport("kernel32.dll", SetLastError:=True)> _
    Public Function GetProcAddress(ByVal hModule As IntPtr, ByVal procedureName As String) As IntPtr
    End Function

<DllImport("kernel32.dll", SetLastError:=True)> _
    Public Function FreeLibrary(ByVal hModule As IntPtr) As IntPtr
    End Function

End Module

<UnmanagedFunctionPointer(CallingConvention.StdCall)>
    Private Delegate Sub MYFUNC(ByVal LogonString As String, <MarshalAs(UnmanagedType.VBByRefStr)> ByRef PARAMONE As String, ByVal PARAMTWO As String)

Public Shared Sub CallFunction(ByRef workingObject As PLIOBJECT)
    Dim EntryPointer As IntPtr = NativeMethods.LoadLibrary("PLIDLL.dll")
    Dim FunctionPointer As IntPtr = NativeMethods.GetProcAddress(EntryPointer, "MYFUNC")
    Dim MyFUNC As MYFUNC= CType(Marshal.GetDelegateForFunctionPointer(FunctionPointer, GetType(MYFUNC)), MYFUNC)
    MyFUNC(workingObject.Logonstring, workingObject.PARAMONE, workingObject.PARAMTWO)
    Dim result As Boolean = NativeMethods.FreeLibrary(EntryPointer)

End Sub 
```

# delphi - 在 Delphi 或 C++ Builder 中从 OpenSubtitles 下载字幕？

> ID：15113379
> 
> 赞同：2
> 
> 时间：2013-02-27T13:31:56.640
> 
> 标签：delphi, download, c++builder, xml-rpc

我想使用 OpenSubtitles API 下载电影的字幕，但在任何地方都找不到完整的工作示例。我发现的唯一一件事是：

[http://www.yanniel.info/2012/01/open-subtitles-api-in-delphi.html](http://www.yanniel.info/2012/01/open-subtitles-api-in-delphi.html)

我做了这里所说的一切，但它是不完整的。我登录并找到字幕但不知道如何最终下载文件？

编辑：这是我到目前为止所做的；

```
unit OpensubtitlesAPI;

interface

uses
  IdHTTP, Classes, SysUtils;

  function LogIn(aUsername, aPassword,
                 aLanguage, aUserAgent: string): string;
  function LogOut(aToken: string): string;
  function SearchSubtitles(aToken, aSublanguageID,
                           aMovieHash: string;
                           aMovieByteSize: Cardinal): string;  overload;
  function SearchSubtitles(aToken, aSublanguageID: string;
                           aImdbID: Cardinal): string; overload;
  function SearchSubtitles(aToken, aSublanguageID,
                           aQuery: string): string;  overload;

implementation

function XML_RPC(aRPCRequest: string): string;
const
  cURL= 'http://api.opensubtitles.org/xml-rpc';
var
  lHTTP: TIdHTTP;
  Source,
  ResponseContent: TStringStream;
begin
  lHTTP := TIdHTTP.Create(nil);
  lHTTP.Request.ContentType := 'text/xml';
  lHTTP.Request.Accept := '*/*';
  lHTTP.Request.Connection := 'Keep-Alive';
  lHTTP.Request.Method := 'POST';
  lHTTP.Request.UserAgent := 'OS Test User Agent';
  Source := TStringStream.Create(aRPCRequest);
  ResponseContent:= TStringStream.Create;
  try
    try
      lHTTP.Post(cURL, Source, ResponseContent);
      Result:= ResponseContent.DataString;
    except
      Result:= '';
    end;
  finally
    lHTTP.Free;
    Source.Free;
    ResponseContent.Free;
  end;
end;

function LogIn(aUsername, aPassword, aLanguage, aUserAgent: string): string;
const
  LOG_IN = '<?xml version="1.0"?>' +
           '<methodCall>' +
           '  <methodName>LogIn</methodName>' +
           '  <params>'   +
           '    <param>'  +
           '      <value><string>%0:s</string></value>' +
           '    </param>' +
           '    <param>'  +
           '      <value><string>%1:s</string></value>' +
           '    </param>' +
           '    <param>'  +
           '      <value><string>%2:s</string></value>' +
           '    </param>' +
           '    <param>'  +
           '      <value><string>%3:s</string></value>' +
           '    </param>' +
           '  </params>'  +
           '</methodCall>';
begin
  //TODO: XML Encoding
  Result:= XML_RPC(Format(LOG_IN, [aUsername, aPassword, aLanguage, aUserAgent]));
end;

function LogOut(aToken: string): string;
const
  LOG_OUT = '<?xml version="1.0"?>' +
           '<methodCall>' +
           '  <methodName>LogOut</methodName>' +
           '  <params>'   +
           '    <param>'  +
           '      <value><string>%0:s</string></value>' +
           '    </param>' +
           '  </params>'  +
           '</methodCall>';
begin
  //TODO: XML Encoding
  Result:= XML_RPC(Format(LOG_OUT, [aToken]));
end;

function SearchSubtitles(aToken, aSublanguageID, aMovieHash: string; aMovieByteSize: Cardinal): string;
const
  SEARCH_SUBTITLES = '<?xml version="1.0"?>' +
                     '<methodCall>' +
                     '  <methodName>SearchSubtitles</methodName>' +
                     '  <params>' +
                     '    <param>' +
                     '      <value><string>%0:s</string></value>' +
                     '    </param>' +
                     '  <param>' +
                     '   <value>' +
                     '    <array>' +
                     '     <data>' +
                     '      <value>' +
                     '       <struct>' +
                     '        <member>' +
                     '         <name>sublanguageid</name>' +
                     '         <value><string>%1:s</string>' +
                     '         </value>' +
                     '        </member>' +
                     '        <member>' +
                     '         <name>moviehash</name>' +
                     '         <value><string>%2:s</string></value>' +
                     '        </member>' +
                     '        <member>' +
                     '         <name>moviebytesize</name>' +
                     '         <value><double>%3:d</double></value>' +
                     '        </member>' +
                     '       </struct>' +
                     '      </value>' +
                     '     </data>' +
                     '    </array>' +
                     '   </value>' +
                     '  </param>' +
                     ' </params>' +
                     '</methodCall>';

begin
  //TODO: XML Encoding
  Result:= XML_RPC(Format(SEARCH_SUBTITLES, [aToken, aSublanguageID, aMovieHash, aMovieByteSize]));
end;

function SearchSubtitles(aToken, aSublanguageID: string;
  aImdbID: Cardinal): string;
const
  SEARCH_SUBTITLES = '<?xml version="1.0"?>' +
                     '<methodCall>' +
                     '  <methodName>SearchSubtitles</methodName>' +
                     '  <params>' +
                     '    <param>' +
                     '      <value><string>%0:s</string></value>' +
                     '    </param>' +
                     '  <param>' +
                     '   <value>' +
                     '    <array>' +
                     '     <data>' +
                     '      <value>' +
                     '       <struct>' +
                     '        <member>' +
                     '         <name>sublanguageid</name>' +
                     '         <value><string>%1:s</string>' +
                     '         </value>' +
                     '        </member>' +
                     '        <member>' +
                     '         <name>imdbid</name>' +
                     '         <value><string>%2:d</string></value>' +
                     '        </member>' +
                     '       </struct>' +
                     '      </value>' +
                     '     </data>' +
                     '    </array>' +
                     '   </value>' +
                     '  </param>' +
                     ' </params>' +
                     '</methodCall>';

begin
  //TODO: XML Encoding
  Result:= XML_RPC(Format(SEARCH_SUBTITLES, [aToken, aSublanguageID, aImdbID]));
end;

function SearchSubtitles(aToken, aSublanguageID,
  aQuery: string): string;
const
  SEARCH_SUBTITLES = '<?xml version="1.0"?>' +
                     '<methodCall>' +
                     '  <methodName>SearchSubtitles</methodName>' +
                     '  <params>' +
                     '    <param>' +
                     '      <value><string>%0:s</string></value>' +
                     '    </param>' +
                     '  <param>' +
                     '   <value>' +
                     '    <array>' +
                     '     <data>' +
                     '      <value>' +
                     '       <struct>' +
                     '        <member>' +
                     '         <name>sublanguageid</name>' +
                     '         <value><string>%1:s</string>' +
                     '         </value>' +
                     '        </member>' +
                     '        <member>' +
                     '         <name>query</name>' +
                     '         <value><string>%2:s</string></value>' +
                     '        </member>' +
                     '       </struct>' +
                     '      </value>' +
                     '     </data>' +
                     '    </array>' +
                     '   </value>' +
                     '  </param>' +
                     ' </params>' +
                     '</methodCall>';

begin
  //TODO: XML Encoding
  Result:= XML_RPC(Format(SEARCH_SUBTITLES, [aToken, aSublanguageID, aQuery]));
end;
end. 
```

最后，我使用 C++ Builder 进行下一步操作：

```
void __fastcall TForm1::Button1Click(TObject *Sender)
{
    UnicodeString response = LogIn("", "", "en", "OS Test User Agent");
    XMLDocument1->XML->Text = response;
    XMLDocument1->Active = true;
    UnicodeString token = XMLDocument1->ChildNodes->Nodes[1]->GetChildNodes()->Nodes[0]->
                  GetChildNodes()->Nodes[0]->GetChildNodes()->Nodes[0]->
                  GetChildNodes()->Nodes[0]->GetChildNodes()->Nodes[0]->
                  GetChildNodes()->Nodes[1]->GetChildNodes()->Nodes[0]->
                  GetText();
    Memo1->Text = SearchSubtitles(token, "en", "7d9cd5def91c9432", 735934464);
    LogOut(token);
} 
```

当我执行此操作时，我得到如下响应：

```
<?xml version="1.0" encoding="utf-8"?>
<methodResponse>
<params>
 <param>
  <value>
   <struct>
    <member>
     <name>status</name>
     <value>
      <string>200 OK</string>
     </value>
    </member>
    <member>
     <name>data</name>
     <value>
      <boolean>0</boolean>
     </value>
    </member>
    <member>
     <name>seconds</name>
     <value>
      <double>0.008</double>
     </value>
    </member>
   </struct>
  </value>
 </param>
</params>
</methodResponse> 
```

下一个是什么？如何获取文件（字幕）位置？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T15:27:13.053

错误是：OpenSubtitles 需要 3 个字符的国家代码（“eng”而不是“en”）。

# android - 如何在android中为TextView的文本设置样式或字体？

> ID：15113386
> 
> 赞同：7
> 
> 时间：2013-02-27T13:32:19.010
> 
> 标签：android, user-interface, text, textview, android-styles

我想为文本设置样式或字体，`TextView`如下图所示：

![在此处输入图像描述](../Images/94d080e92b9cbaf7ee265049d1ccf4c7.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-27T13:35:20.727

```
<TextView
style="@style/CodeFont"
android:text="@string/hello" /> 
```

您需要制作该代码字体样式：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <style name="CodeFont" parent="@android:style/TextAppearance.Medium">
        <item name="android:layout_width">fill_parent</item>
        <item name="android:layout_height">wrap_content</item>
        <item name="android:textColor">#00FF00</item>
        <item name="android:typeface">monospace</item>
    </style>
</resources> 
```

直接来自：http: [//developer.android.com/guide/topics/ui/themes.html](http://developer.android.com/guide/topics/ui/themes.html)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-27T13:35:27.200

你需要一个自定义字体，然后你可以这样做：

```
Typeface mFont = Typeface.createFromAsset(getAssets(), "fonts/myFont.ttf");
MyTextView.setTypeface(mFont); 
```

您必须在资产文件夹中创建一个“字体”文件夹。把你的字体放在那里。
当然，您也可以创建自定义`TextView`。如果您愿意，请参考[这个答案](https://stackoverflow.com/a/14633032/1333975)，我给了一段时间。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-27T13:40:26.327

如果您想在许多 TextViews 上更改它，还有另一种方法，使用一个类：

```
public class MyTextView extends TextView {

public MyTextView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    init();
}

public MyTextView(Context context, AttributeSet attrs) {
    super(context, attrs);
    init();
}

public MyTextView(Context context) {
    super(context);
    init();
}

private void init() {
    if (!isInEditMode()) {
        Typeface tf = Typeface.createFromAsset(getContext().getAssets(), "fonts/Ubuntu-L.ttf");
        setTypeface(tf);
    }
} 
```

}

并在布局中替换：

```
<TextView 
...
/> 
```

和：

```
<com.WHERE_YOUR_CLASS_IS.MyTextView 
...

/> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T13:37:54.913

您可以创建一个包含您的 textview 的 layout.xml 文件。就像是 ：

```
textView.xml

<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
style="@android:style/Holo.ButtonBar" > 
```

如果您不想要这个，那么您可以创建您的自定义样式。像这样的东西：

```
<resources xmlns:android="http://schemas.android.com/apk/res/android">
    <style name="Custom" parent="@android:style/TextAppearance.Large" >
        <item name="android:typeface">monospace</item>
    </style>
</resources> 
```

并在布局文件中将样式更改为：

```
style="@style/Custom" 
```

# php - 减少复杂定制化应用程序中的数据库查询数量

> ID：15113390
> 
> 赞同：9
> 
> 时间：2013-02-27T13:32:33.107
> 
> 标签：php, mysql

我继承了一个用 PHP 编写的电子商务软件项目。当我检查代码库时，我在代码中发现了很多 SQL 语句。有很多类，如 Product、Category、User、Customer 等，每个类都有很多数据库查询。

我不知道如何处理这种情况，决定统计单页访问的总查询数。我封装了MySQL的查询功能，增加了一个计数器。

我对这个结果有点震惊。仅访问索引页，执行了 1633 个（！）MySQL 选择查询。列出一个类别的产品触发了近 2000 个查询。

我将查询输入到一个文本文件中进行分析。超过 90% 是可能只有一个或两个值的单选语句。现在我应该怎么做才能清理这个烂摊子？你有什么建议？我在 MySQL 服务器上启用了缓存。加载页面大约需要 490 毫秒。

## 附加细节

例如，有一个名为 Product 的类。在这个类中有 8 个单独的小 SQL 选择语句。

当您现在打开类别列表以显示产品时，最初的程序员使用一个 select 语句来获取所需产品的列表，然后为每个产品创建一个产品对象。

假设这个结果为我们提供了 20 种产品：

```
select id from products where price <= 10; 
```

然后他遍历结果并为每个条目创建一个产品对象：

```
$qresult = query("select id from products where price <= 10");
$products = array();
foreach ($qresult as $prod) {
  $products[] = new Product($prod['id']);
} 
```

仅此一项就为产品生成 20 * 8 个 SQL 查询。同样的方法也用于其他类（用户、客户、类别等）。

**前一段时间**

现在，几周/几个月过去了，我想分享我到目前为止所做的解决方案。

我可以将查询减少到每次页面访问 < ~50 次，并将页面加载时间减少到 400 毫秒以下。

我很容易做到了。我试图识别热点并建立一个表缓存类。每次访问此静态类都会将整个表内容加载到内存中，并且从现在开始的每个表请求都将从静态类的内存中提供出来。嗯，很脏，不是很好，但它可以工作，更快，减少总查询并节省服务器硬件。

我想我们也会把硬件扔到这个问题上，只要用户数量像现在这样增加。

如果我们到了用另一个替换应用程序的地步，我们肯定会选择一个数据库查询很好的解决方案

谢谢大家的建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T14:36:15.957

我使用的旧版应用程序也有同样的问题，同时查询效率低下！在短期内，我们只是把硬件放在了问题上，但至少任何未来的新工作都写得更好。听起来像是没有必要功能的自定义 ORM，或者没有以最佳方式使用的 ORM。

尝试重构这个：

```
$products = array();
foreach ($products as $prod) {
  $products[] = new Products($prod['id']);
} 
```

进入这个：

```
// Assuming products is an array of arrays, with each inner array
// containing all the values that make up an array
$products = array();
foreach ($products as $prod) {
  $products[] = Products::convertToObject($prod['id']);
} 
```

这将在每个循环中为您节省 N 次查询。如果您确保每个 ORM 类（`Products`等）都继承自类似的东西，`BaseORM`那么执行此操作的通用代码只需编写一次。

如果你发现你没有太多的连接方式，那么分支当前代码并尝试用 Propel 或 Doctrine 之类的东西替换你自己开发的 ORM。请注意，使用您不知道的 ORM 系统有一个学习曲线，但它们最终的回报通常比自己编写整个事情要好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T13:44:52.670

好吧，对于初学者来说，您需要确定的第一件事在于 php 领域，以及其中有多少调用被多次执行。仅此一项就可以减少您的人数。

除此之外，您可以做两件事。

1.  如果您有多个使用相同参数的查询（例如 productId，并且您带来了产品表、产品类别表等，那么您始终可以加入这些查询并根据您的需要提供一个结果（或者查看最常见的查询加入并使用）
2.  如果你有一个设置表，最好的办法是将所有表加载到内存中并从那里读取所有值，这样你就不必在需要设置的任何时候去数据库

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T13:45:34.447

我认为你的担心是对的。2,000 个查询似乎很多。

您已经确定了重构的两个很好的理由，查询量和页面响应时间——两者都是可衡量的并且适合重构。

虽然 MySQL 确实有一个查询缓存，但如果它能够从缓存中完成查询，它通常不会每次都查询底层数据，但与 MySQL 通信仍然可能存在网络成本。

您是否考虑过将值保存到内存或使用会话变量？

```
<?php
session_start();
// store session data
$_SESSION['sharedvalue']= "result of common MySQL query"
?>

< html>
< body>

< ?php
//retrieve session data - now each time you do this it isn't asking MySQL again
echo "Common Value=". $_SESSION['sharedvalue'];
?>

< /body>
< /html> 
```

另一种解决方案是拥有自己的缓存并从中查询公共值，更改或过期它们以刷新旧数据。这实际上取决于您的应用程序和用户群的大小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T13:42:58.617

可能有一个（或多个）循环（foreach 或 while 等）为每次迭代调用 mysql_query。

一旦找到该循环，您就可以决定如何优化它——例如，您可以一次将所有记录加载到一个数组中，然后循环在数组上工作，而不是每次都调用数据库。

# .net - Autofac 3.0 不能在 Mono 上运行

> ID：15113396
> 
> 赞同：3
> 
> 时间：2013-02-27T13:33:04.117
> 
> 标签：.net, mono, autofac

我一直试图让 Autofac 3.0.1 在 Mono 上工作，但到目前为止还没有成功。当我尝试在 Mono 3.0.5 上运行引用 Autofac 3.0.1 的应用程序时，出现以下异常：

```
Mono: Assembly Loader probing location: '/opt/mono-3.0.5/lib/mono/4.5/mscorlib.dll'.
Mono: Image addref mscorlib[0x14ce2c70] -> /opt/mono-3.0.5/lib/mono/4.5/mscorlib.dll[0x14ce1ec0]: 2
Mono: Assembly Loader probing location: '/opt/mono-3.0.5/lib/mono/4.5/mscorlib.dll'.
Mono: Assembly Loader loaded assembly from location: '/opt/mono-3.0.5/lib/mono/4.5/mscorlib.dll'.
Mono: Assembly mscorlib[0x14ce2c70] added to domain ConsoleApplication1.exe, ref_count=1
Mono: Assembly Loader probing location: 'ConsoleApplication1.exe'.
Mono: Image addref ConsoleApplication1[0x14d20230] -> /var/www/sites/erik/monoconsole/ConsoleApplication1.exe[0x14d1f4a0]: 2
Mono: Assembly ConsoleApplication1[0x14d20230] added to domain ConsoleApplication1.exe, ref_count=1
Mono: Assembly Loader loaded assembly from location: 'ConsoleApplication1.exe'.
Mono: Assembly Loader probing location: 'ConsoleApplication1.exe'.
Mono: Assembly Ref addref ConsoleApplication1[0x14d20230] -> mscorlib[0x14ce2c70]: 2
Mono: Assembly Loader probing location: '/var/www/sites/erik/monoconsole/Autofac.dll'.
Mono: Image addref Autofac[0x14d269b0] -> /var/www/sites/erik/monoconsole/Autofac.dll[0x14d25c40]: 2
Mono: Assembly Autofac[0x14d269b0] added to domain ConsoleApplication1.exe, ref_count=1
Mono: Assembly Loader loaded assembly from location: '/var/www/sites/erik/monoconsole/Autofac.dll'.
Mono: Assembly Ref addref ConsoleApplication1[0x14d20230] -> Autofac[0x14d269b0]: 2
Mono: The request to load the retargetable assembly mscorlib v2.0.5.0 was remapped to mscorlib v4.0.0.0
Mono: Assembly Ref addref Autofac[0x14d269b0] -> mscorlib[0x14ce2c70]: 3
Mono: The request to load the retargetable assembly System.Core v2.0.5.0 was remapped to System.Core v4.0.0.0
Mono: Assembly Loader probing location: '/opt/mono-3.0.5/lib/mono/gac/System.Core/4.0.0.0__7cec85d7bea7798e/System.Core.dll'.
Mono: Assembly Loader probing location: '/var/www/sites/erik/monoconsole/System.Core.dll'.
Mono: Assembly Loader probing location: '/opt/mono-3.0.5/lib/System.Core.dll'.
Mono: Assembly Loader probing location: '/opt/mono-3.0.5/lib/mono/gac/System.Core/4.0.0.0__7cec85d7bea7798e/System.Core.exe'.
Mono: Assembly Loader probing location: '/var/www/sites/erik/monoconsole/System.Core.exe'.
Mono: Assembly Loader probing location: '/opt/mono-3.0.5/lib/System.Core.exe'.
Mono: The following assembly referenced from /var/www/sites/erik/monoconsole/Autofac.dll could not be loaded:
     Assembly:   System.Core    (assemblyref_index=1)
     Version:    2.0.5.0
     Public Key: 7cec85d7bea7798e
The assembly was not found in the Global Assembly Cache, a path listed in the MONO_PATH environment variable, or in the location of the executing assembly (/var/www/sites/erik/monoconsole/).

Mono: Failed to load assembly Autofac[0x14d269b0]

Mono: Could not load file or assembly 'System.Core, Version=2.0.5.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e, Retargetable=Yes' or one of its dependencies.
Missing method .ctor in assembly /var/www/sites/erik/monoconsole/Autofac.dll, type System.Runtime.CompilerServices.ExtensionAttribute
Can't find custom attr constructor image: /var/www/sites/erik/monoconsole/Autofac.dll mtoken: 0x0a000015
Hello!
Mono: Unloading domain ConsoleApplication1.exe[0x2aaaab6f1cc0], assembly mscorlib[0x14ce2c70], ref_count=3
Mono: Unloading domain ConsoleApplication1.exe[0x2aaaab6f1cc0], assembly ConsoleApplication1[0x14d20230], ref_count=1
Mono: Unloading assembly ConsoleApplication1 [0x14d20230].
Mono: Unloading image /var/www/sites/erik/monoconsole/ConsoleApplication1.exe [0x14d1f4a0].
Mono: Unloading domain ConsoleApplication1.exe[0x2aaaab6f1cc0], assembly Autofac[0x14d269b0], ref_count=1
Mono: Unloading assembly Autofac [0x14d269b0].
Mono: Unloading image /var/www/sites/erik/monoconsole/Autofac.dll [0x14d25c40].
Mono: Unloading assembly mscorlib [0x14ce2c70].
Mono: Unloading image /opt/mono-3.0.5/lib/mono/4.5/mscorlib.dll [0x14ce1ec0]. 
```

有几点需要注意。首先，似乎无法加载 System.Core 2.0.5.0。这可能是因为 Autofac 3.0.1 是一个可移植的类库吗？

这个问题也导致了第二个问题，System.Runtime.CompilerServices.ExtensionAttribute中有一个Missing方法.ctor。我找到了一些关于这个问题的信息，看来这个问题是由于 ExtensionAttribute 类从一个 DLL 移动到另一个： http: [//www.lextm.com/2013/02/how-to-use-nuget -on-mono-part-iv.html](http://www.lextm.com/2013/02/how-to-use-nuget-on-mono-part-iv.html)

这个问题可以重现如下（见[https://gist.github.com/ErikSchierboom/5047101](https://gist.github.com/ErikSchierboom/5047101)）：

1.  创建 .NET 4.0 控制台应用程序
2.  添加对 Autofac 3.0.1 的引用（例如通过 NuGet）
3.  创建`ContainerBuilder`类的实例
4.  构建控制台应用程序
5.  在 Mono 下运行控制台应用程序

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T10:32:01.877

我在以下位置创建了这个问题的重现： [https](https://github.com/ErikSchierboom/monoportableclasslibraryextensionmethod) ://github.com/ErikSchierboom/monoportableclasslibraryextensionmethod它包含两个控制台应用程序和两个可移植类库。一个可移植类库将方法定义为扩展方法，而另一个则没有。一个控制台应用程序使用扩展方法版本，而另一个不使用。要验证问题，请在 Mono 3.0.5 环境中运行这两个控制台应用程序。使用扩展方法版本的会崩溃，另一个不会。

Mono 3.0.12 具有完整的 PCL 功能并防止发生此错误：[http ://www.mono-project.com/Release_Notes_Mono_3.0#New_in_Mono_3.0.12](http://www.mono-project.com/Release_Notes_Mono_3.0#New_in_Mono_3.0.12)

# mysql - Mysql 组 concat 与交换的平均值

> ID：15113398
> 
> 赞同：0
> 
> 时间：2013-02-27T13:33:18.557
> 
> 标签：mysql, concat

我有一个交易所清单，有汇率和日期，每天都会更新，

示例->

```
usd - 135 - 26/02/2013
Yen - 230 - 26/02/2013
GBP - 200 - 26/02/2013

usd - 136 - 25/02/2013
Yen - 230 - 25/02/2013
GBP - 205 - 25/02/2013 
```

我有一个查询将它们组合起来，查询是这样的->

```
SELECT Curr, Src, GROUP_CONCAT(Rate, '|', Feeddate 
ORDER BY feeddate ASC SEPARATOR ',' ) AS RateCal 
FROM rates 
```

所以看起来像这样->

```
usd - 135 | 26/02/2013, 136 | 25/02/2013
Yen - 230 | 26/02/2013, 230 | 25/02/2013
GBP - 200 | 26/02/2013, 206 | 25/02/2013 
```

但我也有一个查询来获取每个月每个交易所的平均值，这就是 ->

```
SELECT  Curr, DATE_FORMAT(Feeddate,'%Y-%M') AS 'Year', AVG(`Rate`) as 'Rate'
FROM rates, 
```

但我现在想要的是像上面一样拥有每个交换组 concat 的月平均值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T13:49:00.150

会不会是你要找的这个？使用您的样本数据并为`March`.

[SQL 演示](http://sqlfiddle.com/#!2/25e72/3)

```
select curr, monthname(date), avg(rate)
from rates
group by curr, monthname(Date);

| CURR | MONTHNAME(DATE) | AVG(RATE) |
--------------------------------------
|  GBP |        February |     202.5 |
|  GBP |           March |       207 |
|  usd |        February |     135.5 |
|  usd |           March |       136 |
|  Yen |        February |       230 |
|  Yen |           March |     232.5 | 
```

这看起来太简单了，不可能是真的。所以请发表评论。

## 根据 OP 的评论：

[SQL 演示 2](http://sqlfiddle.com/#!2/25e72/13)

```
select x.curr, 
GROUP_CONCAT(x.avgr, '|', x.mondate) as Months_Averages
from (select curr, monthname(date) mondate,
avg(rate) avgr
from rates
group by curr, monthname(date)
)x
group by x.curr;

| CURR |                      MONTHS_AVERAGES  |
------------------------------------------------
|  GBP |    202.5000| February,207.0000| March |
|  usd |    135.5000| February,136.0000| March |
|  Yen |    230.0000| February,232.5000| March | 
```

# java - 如何在作为片段的 ViewPager 内的片段中访问 getActivity()

> ID：15113401
> 
> 赞同：2
> 
> 时间：2013-02-27T13:33:26.607
> 
> 标签：java, android, android-fragments, android-viewpager

我在尝试更新 ViewPager 片段内的片段中的 ListView 时遇到问题。整个场景是 FragmentActivity 就像在 Fragment 之间进行通信的基础一样工作。

具体来说，ListFragment 单选片段在 FragmentActivity 中发送一个对象引用，然后将其重定向到 ViewPager 片段，该片段反过来应该更新它的另一个片段子片段。

一切似乎都很完美，第一次创建的 ViewPager 片段显示了我需要的数据，但是，当你在 ListFragment 中选择一行时，它会启动这个过程，同时进入这段代码中的 ViewPager 片段，

```
public void refreshDataWithClassType(ClassType classType) {
        Log.d(TAG, "Should refresh data");
        FragmentPagerAdapter fragmentPagerAdapter = (FragmentPagerAdapter) viewPager.getAdapter();
        for(int i = 0; i < fragmentPagerAdapter.getCount(); i++) {
            ExamsListFragment viewPagerFragment = (ExamsListFragment) fragmentPagerAdapter.getItem(i);
            if(viewPagerFragment != null) {
                // Do something with your Fragment
                // Check viewPagerFragment.isResumed() if you intend on interacting with any views.
                viewPagerFragment.refreshExams(classType.getClassTypeId());
            }
        }
    } 
```

我只是将消息发送到每个 ViewPagerFragment 以刷新我的数据（考试）。但是一段时间后我得到 NullPointerException 我发现在 refreshExams 方法中，

```
public void refreshExams(int classTypeId) {
        Bundle args = new Bundle();
        args.putInt(KEY_POSITION, getArguments().getInt(KEY_POSITION));
        args.putInt(KEY_CLASS_TYPE, classTypeId);
        setArguments(args);

        getRepositoryExams();

        if (examsArrayAdapter == null) Log.d(TAG, "ExamsArrayAdapter is NULL");
        if (getActivity() == null) Log.d(TAG, "Activity is NULL");

        if (examsList.size() == 0) {
            examsArrayAdapter.clear();
            examsArrayAdapter.notifyDataSetChanged();
        } else {
            examsArrayAdapter = new ExamsArrayAdapter(getActivity(), R.layout.exam_row_layout, (ArrayList<Exam>) examsList);
            listView.setAdapter(examsArrayAdapter);
        }
    } 
```

现在，即使我已经应该拥有这个 Fragment 实例，第一次创建它就可以了，

```
@Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        super.onCreateView(inflater, container, savedInstanceState);

        rootView = inflater.inflate(R.layout.exams_list_fragment, container, false);
        listView = (ListView) rootView.findViewById(R.id.examsListView);

        return rootView;
    }

    @Override
    public void onAttach(Activity activity) {
        super.onAttach(activity);

        try {
            callBackExamListener = (OnExamSelectedListener) activity;
        } catch (ClassCastException ex) {
            throw new ClassCastException(activity.toString() + " must implement OnExamSelectedListener");
        }
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);

        getRepositoryExams();
        examsArrayAdapter = new ExamsArrayAdapter(getActivity(), R.layout.exam_row_layout, (ArrayList<Exam>) examsList);
        listView.setAdapter(examsArrayAdapter);
        listView.setOnItemClickListener(listRowItemClickListener);
    } 
```

getActivity() 和examsArrayAdapter 为NULL ????

如何解决这个问题？

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T21:46:41.763

我实际上在这里认识了我的一些代码。我认为正在发生的事情是你没有检查以确保`viewPagerFragment`你得到的 s 是 in `onResume`，如果它们距离当前活动页面超过 1 页，它们可能会被破坏。如果`viewPagerFragment`不在`onResume`，则需要使用一种方法在 上设置布尔标志`viewPagerFragment`，以便`refreshExams`在进入时调用`onResume`。

```
 FragmentPagerAdapter fragmentPagerAdapter = (FragmentPagerAdapter) viewPager.getAdapter();
    for(int i = 0; i < fragmentPagerAdapter.getCount(); i++) {
        ExamsListFragment viewPagerFragment = (ExamsListFragment) fragmentPagerAdapter.getItem(i);
        if(viewPagerFragment != null) {
            // Do something with your Fragment
            // Check viewPagerFragment.isResumed() if you intend on interacting with any views.
            if(viewPagerFragment.isResumed())
                viewPagerFragment.refreshExams(classType.getClassTypeId());
        }
    } 
```

**但是**，我实际上发现，由于我创建 s 的方式，上面的这段代码只对我有效`FragmentPagerAdapter`，因为我使用 an`ArrayList`来保存我`Fragment`的 s，它会将它们返回到`getItem`. 由于Android 破坏了和s ，因此旋转时**失败。**我建议您查询s以使您的 s 退出，并确保在刷新之前检查每个是否都在，否则将您的标志设置为刷新。这个[问题](https://stackoverflow.com/questions/8785221/retrieve-a-fragment-from-viewpager/14530629#14530629)的公认答案是查看您的孩子的**正确**方法。`Activity``Fragment``FragmentManager``Fragment``ViewPager``viewPagerFragment``onResume`**`ViewPager``Fragment`**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-10T10:19:36.447

[如此处](https://stackoverflow.com/a/31302716)所述，

> 每个片段，即使是另一个片段的子片段，在添加到片段树时都会收到对 onAttach() 的调用。包含片段的活动作为参数传入。最简单的解决方案可能是将活动保存为片段的成员。然后它在以后需要时可用。

父 Activity 作为 Context 传入，因此您需要将其转换为 Activity。因此，您可以使用以下代码获取嵌套片段的包含活动：

```
private Activity mHostActivity;
@Override
public void onAttach(Context context) {
    super.onAttach(context);
    mHostActivity = (Activity) context;
} 
```**

# boost - 测试一个 boost 例子

> ID：15113406
> 
> 赞同：0
> 
> 时间：2013-02-27T13:33:37.173
> 
> 标签：boost, compilation, boost-filesystem

这是我第一次使用 Boost (1.5.3) 进行测试。我用 FileSystem 类做了一个例子。

我想我已经成功安装了二进制发行版，即运行 bootstrap.bat 和 b2.exe 在安装的文件夹中创建头文件和库。

如果我是正确的，没有 dll 库，只有我在 VS2008 项目配置中指出的静态库和头文件。

我去编译并得到这个：

```
Error   1   fatal error LNK1104: cannot open file 'libboost_filesystem-vc100-mt-gd-1_53.obj'    test_filesystem test_filesystem 
```

这是什么类型的错误？我认为编译器已经看到了所需的文件和库

谢谢

编辑01：

我最初添加了错误的库名称（缺少“.lib”），我已经纠正了它，但现在它得到“错误 15 致命错误 LNK1104：无法打开文件 'libboost_filesystem-vc90-mt-gd-1_53.lib' test_filesystem test_filesystem "

我是否正确输入了库名称？-> libboost_filesystem-vc90-mt-gd-1_53.lib？我通常这样输入库名称，并且我确定我已经为这个静态库添加了正确的路径

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T15:11:36.553

行，

我现在已经解决了这个问题。部分原因是提示“提升链接本身”

我安装了 boost 1.5.3，其中包括所有“libxx-vc100-xx-1_53.lib”，这些库旨在用于 VS2010 (vc10) 编译器。

我没有注意到这一点，并在 VS2008 (vc9) 和 boost/compiler 中编译了我的示例，自动链接到不可用的 vc9 库。

=>我通过在VS2010中编译相同的项目来解决它，最后完成了

# html - 页脚浮动在主要内容上

> ID：15113408
> 
> 赞同：0
> 
> 时间：2013-02-27T13:33:46.610
> 
> 标签：html, css, xhtml, responsive-design

所以我有一个网站可以在浏览器窗口中优雅地缩小，但我的标题之外的内容存在问题。主要和页脚元素只是徘徊在我所有内容的中间。我相信这可能与我为标题设置的高度有关，但我需要正确地隔开其中的所有元素。

这是该网站的链接：http: [//nathanlangley.co.uk/sitev5/index.html](http://nathanlangley.co.uk/sitev5/index.html)

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T13:39:01.920

“我相信这可能与我为标题设置的高度有关”

我只是按照您的链接，并按照您的建议，尝试从标题中删除高度属性。它修复它。

# apache - Fiddler 未捕获来自 Apache 服务器的出站请求

> ID：15113409
> 
> 赞同：2
> 
> 时间：2013-02-27T13:33:50.240
> 
> 标签：apache, request, fiddler

我正在使用 Fiddler 获取 Apache 服务器上的所有流量。问题是 Fiddler 捕获除了来自 Apache 的使用 Zend_HTTP_Client 发送的 HTTP 请求之外的所有内容。我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T14:11:56.620

```
 $config = array(
    'adapter'       => 'Zend_Http_Client_Adapter_Proxy',
    'proxy_host'    => '127.0.0.1',
    'proxy_port'    => 8888,
    'timeout'       => 60,
    'useragent'     => 'Test',
    'keepalive'     => true,
    'sslusecontext' => true
);

$client = new Zend_Http_Client('http://www.site.com/',  $config); 
```

# go - 何时使用缓冲通道？

> ID：15113410
> 
> 赞同：26
> 
> 时间：2013-02-27T13:33:51.833
> 
> 标签：go

缓冲通道的用例是什么？如果我想要多个并行操作，我可以使用默认的同步通道 eq。

```
package main
import "fmt"
import "time"

func longLastingProcess(c chan string) {
    time.Sleep(2000 * time.Millisecond)
    c <- "tadaa"
}

func main() {
    c := make(chan string)
    go longLastingProcess(c)
    go longLastingProcess(c)
    go longLastingProcess(c)
    fmt.Println(<- c)
} 
```

**增加缓冲区大小的实际情况是什么？**

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-28T19:54:31.133

通常，出于性能原因，通道中的缓冲是有益的。

如果一个程序是使用事件流或数据流方法设计的，通道为事件在一个进程和另一个进程之间传递提供了手段（我使用的术语*进程*与托尼霍尔的*通信顺序进程*（CSP）中的含义相同，即有效地与*goroutine*同义）。

*   有时程序需要其组件保持同步。在这种情况下，需要无缓冲的通道。

*   否则，向通道添加缓冲通常是有益的。这应该被视为一个优化步骤（如果没有设计出来，仍然可能出现死锁）。

*   通过使用带有小缓冲区的通道，可以实现新颖的节流结构（[示例](http://code.google.com/p/go-wiki/wiki/RateLimiting)）。

*   *occam*和*jcsp*中使用了特殊的覆盖或有损形式的通道，用于修复进程循环（或循环）的特殊情况，否则可能会死锁。这在 Go 中也可以通过编写覆盖 goroutine 缓冲区（[示例](http://play.golang.org/p/s19vUMysQr)）来实现。

你不应该仅仅为了修复死锁而添加缓冲。如果您的程序死锁，从零缓冲开始并考虑依赖关系会更容易修复。然后当你知道它不会死锁时添加缓冲。

您可以组合地构造 goroutines - 也就是说，goroutines 本身可能包含 goroutines。这是 CSP 的一个特性，极大地有利于可扩展性。在将组的外部使用设计为自包含组件时，一组 goroutine 之间的内部通道并不重要。这个原则可以在越来越大的范围内重复应用。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-02-27T20:04:25.720

给出一个更具体的用例：

假设您希望您的通道代表一个任务队列，以便任务调度程序可以将作业发送到队列中，并且工作线程可以通过在通道中接收作业来使用它。

进一步假设，尽管通常您希望及时处理每个作业，但工作人员完成任务所需的时间比调度程序安排任务所需的时间要长。

拥有缓冲区允许调度程序将作业存放在队列中，并且仍然保持对用户输入（或网络流量或其他任何内容）的响应，因为它不必在每次调度任务时工作人员准备好之前休眠。取而代之的是，它开展自己的业务，并相信工人会在较安静的时期赶上来。

如果你想要一个更具体的例子来处理特定的软件，那么我会看看我能做什么，但我希望这能满足你的需要。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-27T14:09:18.883

只要还有空间，缓冲通道对发送方来说是非阻塞的。这可以提高响应能力和吞吐量。

在一个缓冲通道上发送多个项目可确保按发送顺序处理它们。

来自 Effective Go（示例）：“[缓冲通道可以像信号量一样使用，例如限制吞吐量。](http://golang.org/doc/effective_go.html#channels) ”

一般来说，有很多用例和渠道使用模式，所以这不是一个令人筋疲力尽的答案。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-02-14T23:46:14.250

如果通道的接收者总是比发送者慢，那么任何大小的缓冲区最终都会被消耗掉。这将为您留下一个通道，该通道可以像无缓冲通道一样频繁地暂停您的 goroutine，因此您不妨使用无缓冲通道。

如果接收器通常比发送器快（除了偶尔的突发），则缓冲通道可能会有所帮助，并且应将缓冲区设置为典型突发的大小，您可以在运行时通过测量获得该大小。

作为缓冲通道的替代方案，最好只通过通道发送数组或包含数组的结构来处理突发/批处理。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T13:38:58.120

这是一个难题，因为程序不正确：它在收到一个 goroutine 的信号后退出，但启动了三个。缓冲通道使其没有什么不同。

编辑：例如，这里有一些关于通道[缓冲区](http://golang.org/doc/effective_go.html#channels)的一般性讨论。并进行一些[锻炼](http://tour.golang.org/#64)。和一[本书的章节](http://www.golang-book.com/10)差不多。

# powershell - 如何在 PowerShell 中连接字符串和变量？

> ID：15113413
> 
> 赞同：805
> 
> 时间：2013-02-27T13:34:02.987
> 
> 标签：powershell, string-concatenation

假设我有以下片段：

```
$assoc = New-Object PSObject -Property @{
    Id = 42
    Name = "Slim Shady"
    Owner = "Eminem"
}

Write-Host $assoc.Id + "  -  "  + $assoc.Name + "  -  " + $assoc.Owner 
```

我希望这个片段显示：

> `42 - Slim Shady - Eminem`

但相反，它显示：

> `42 + - + Slim Shady + - + Eminem`

这让我认为`+`运算符不适合连接字符串和变量。

你应该如何使用 PowerShell 来解决这个问题？

* * *

## 回答 #1

> 赞同：873
> 
> 时间：2013-02-27T13:37:03.240

```
Write-Host "$($assoc.Id) - $($assoc.Name) - $($assoc.Owner)" 
```

请参阅[Windows PowerShell 语言规范版本 3.0](https://www.microsoft.com/en-us/download/details.aspx?id=36389)，p34，子表达式扩展。

* * *

## 回答 #2

> 赞同：343
> 
> 时间：2015-09-08T10:25:22.393

单引号和双引号是有区别的。（我使用的是 PowerShell 4）。

你可以这样做（正如[本杰明所说](https://stackoverflow.com/questions/15113413/how-do-i-concatenate-strings-and-variables-in-powershell/53764321#53764321)）：

```
$name = 'Slim Shady'
Write-Host 'My name is'$name
-> My name is Slim Shady 
```

或者你可以这样做：

```
$name = 'Slim Shady'
Write-Host "My name is $name"
-> My name is Slim Shady 
```

单引号用于文字，请完全像这样输出字符串。双引号用于您想要完成一些预处理（例如变量，特殊字符等）

所以：

```
$name = "Marshall Bruce Mathers III"
Write-Host "$name"
-> Marshall Bruce Mathers III 
```

然而：

```
$name = "Marshall Bruce Mathers III"
Write-Host '$name'
-> $name 
```

（我发现*[How-to: Escape characters, Delimiters and Quotes](http://ss64.com/ps/syntax-esc.html)*非常适合参考）。

* * *

## 回答 #3

> 赞同：215
> 
> 时间：2016-01-11T11:34:48.867

你也可以使用`-join`

例如

```
$var = -join("Hello", " ", "world"); 
```

将“Hello world”分配给 $var。

所以要输出，在一行中：

```
Write-Host (-join("Hello", " ", "world")) 
```

* * *

## 回答 #4

> 赞同：146
> 
> 时间：2013-02-27T13:37:09.873

一种方法是：

```
Write-Host "$($assoc.Id)  -  $($assoc.Name)  -  $($assoc.Owner)" 
```

另一个是：

```
Write-Host  ("{0}  -  {1}  -  {2}" -f $assoc.Id,$assoc.Name,$assoc.Owner ) 
```

或者只是（但我不喜欢它；））：

```
Write-Host $assoc.Id  "  -  "   $assoc.Name  "  -  "  $assoc.Owner 
```

* * *

## 回答 #5

> 赞同：89
> 
> 时间：2013-02-27T13:37:39.453

尝试将要打印的任何内容包装在括号中：

```
Write-Host ($assoc.Id + "  -  "  + $assoc.Name + "  -  " + $assoc.Owner) 
```

您的代码被解释为传递给的许多参数[`Write-Host`](https://docs.microsoft.com/en-gb/powershell/module/Microsoft.PowerShell.Utility/Write-Host)。将其包裹在括号内将连接这些值，然后将结果值作为单个参数传递。

* * *

## 回答 #6

> 赞同：40
> 
> 时间：2013-02-27T13:49:30.357

另一种选择是：

```
$string = $assoc.ID
$string += " - "
$string += $assoc.Name
$string += " - "
$string += $assoc.Owner
Write-Host $string 
```

“最佳”方法可能是 CB 建议的一种：

```
Write-Host "$($assoc.Id)  -  $($assoc.Name)  -  $($assoc.Owner)" 
```

* * *

## 回答 #7

> 赞同：32
> 
> 时间：2017-09-11T00:15:27.593

虽然表达：

```
"string1" + "string2" + "string3" 
```

将连接字符串，您需要在括号前面放一个 $ 以使其在传递给 PowerShell 命令时作为单个参数进行评估。例子：

```
Write-Host $( "string1" + "string2" + "string3" ) 
```

作为奖励，如果您希望它跨越多行，那么您需要在行尾使用笨拙的反引号语法（反引号右侧没有任何空格或字符）。

例子：

```
Write-Host $(`
    "The rain in "        +`
    "Spain falls mainly " +`
    "in the plains"       )`
    -ForegroundColor Yellow 
```

（实际上，我认为 PowerShell 目前的实现有点错误，因为它需要括号之间不必要的反引号。如果 Microsoft 只是遵循[Python](https://en.wikipedia.org/wiki/Python_%28programming_language%29)或[Tcl](https://en.wikipedia.org/wiki/Tcl)括号规则，允许您在开始和结束括号之间放置任意数量的换行符，那么他们会解决了人们不喜欢 PowerShell 的大多数与行延续和字符串连接相关的问题。

我发现您有时可以在括号之间的行继续上保留反引号，但它是否会起作用真的很不稳定且不可预测......最好只添加反引号。）

* * *

## 回答 #8

> 赞同：30
> 
> 时间：2013-02-27T13:36:37.937

您需要将表达式放在括号中，以防止它们被视为 cmdlet 的不同参数：

```
Write-Host ($assoc.Id + "  -  "  + $assoc.Name + "  -  " + $assoc.Owner) 
```

* * *

## 回答 #9

> 赞同：14
> 
> 时间：2013-02-27T13:42:57.397

这是另一种方法：

```
Write-Host (" {0}  -  {1}  -  {2}" -f $assoc.Id, $assoc.Name, $assoc.Owner) 
```

* * *

## 回答 #10

> 赞同：14
> 
> 时间：2018-12-13T14:41:18.980

（当前 PowerShell 版本 5.1.17134.407）

这也适用于现在：

```
$myVar = "Hello"

echo "${myVar} World" 
```

注意：这只适用于双引号

* * *

## 回答 #11

> 赞同：10
> 
> 时间：2016-05-26T18:11:40.457

我只想使用 .NET [String.Format](https://msdn.microsoft.com/en-us/library/system.string.format(v=vs.110).aspx)带来另一种方法：

```
$name = "Slim Shady"
Write-Host ([string]::Format("My name is {0}", $name)) 
```

* * *

## 回答 #12

> 赞同：8
> 
> 时间：2017-04-19T08:23:11.400

每次使用 PowerShell 后，我似乎都在为这个（以及许多其他不直观的事情）而苦苦挣扎，所以我现在选择：

```
[string]::Concat("There are ", $count, " items in the list") 
```

* * *

## 回答 #13

> 赞同：7
> 
> 时间：2015-05-05T21:21:57.857

这些答案似乎都很复杂。如果您在 PowerShell 脚本中使用它，您可以简单地执行以下操作：

```
$name = 'Slim Shady'
Write-Host 'My name is'$name 
```

它会输出

> 我的名字是苗条的阴影

请注意如何在您的单词之间放置空格

* * *

## 回答 #14

> 赞同：6
> 
> 时间：2013-02-28T21:08:21.823

从*[在 PowerShell 中做什么/不做什么：第 1 部分](http://www.windowsitpro.com/blog/powershell-with-a-purpose-blog-36/scripting-languages/what-to-do--not-to-do-in-powershell-part-1-137475)*：

```
$id = $assoc.Id
$name = $assoc.Name
$owner = $assoc.owner
"$id - $name - $owner" 
```

* * *

## 回答 #15

> 赞同：6
> 
> 时间：2016-09-16T22:38:10.727

就像在 DOS 时代一样连接字符串。这对于日志记录来说是一件大事，所以你去吧：

```
$strDate = Get-Date
$strday = "$($strDate.Year)$($strDate.Month)$($strDate.Day)"

Write-Output "$($strDate.Year)$($strDate.Month)$($strDate.Day)"
Write-Output $strday 
```

* * *

## 回答 #16

> 赞同：5
> 
> 时间：2017-05-22T17:05:08.430

[Write-Host](https://msdn.microsoft.com/powershell/reference/5.1/microsoft.powershell.utility/Write-Host)也可以像这样连接：

```
Write-Host $assoc.Id" - "$assoc.Name" - "$assoc.Owner 
```

这是最简单的方法，恕我直言。

* * *

## 回答 #17

> 赞同：4
> 
> 时间：2019-12-05T19:11:28.173

如果要连接字符串以构建文件路径，请使用[Join-Path](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.management/join-path)命令：

```
Join-Path C:\temp "MyNewFolder" 
```

它会自动为您添加适当的尾随/前导斜杠，这使事情变得容易得多。

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2019-02-22T17:11:57.377

```
$assoc = @{
    Id = 34
    FirstName = "John"
    LastName = "Doe"
    Owner = "Wife"
}

$assocId = $assoc.Id
$assocFN = $assoc.FirstName
$assocLN = $assoc.LastName
$assocName = $assocFN, $assocLN -Join " "
$assocOwner = $assoc.Owner

$assocJoin = $assocId, $assocName, $assocOwner -join " - "
$assocJoin
#Output = 34 - John Doe - Wife 
```

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2022-01-06T17:19:18.390

个人比较喜欢这种风格：

```
[string]::Join(' - ', 42, 'Slim Shady', 'Eminem') 
```

或基于上述（无序）对象：

```
[string]::Join(' - ',$assoc.psObject.Properties.value) 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2019-02-12T14:53:21.373

只是为了好玩。您还可以直接访问 PSObject 的值，如下所示：

```
$assoc.psobject.Properties.value -join " - " 
```

但是，如果您没有指定对象应该是有序的，PowerShell 将以随机顺序显示这些值。所以你应该添加标志`[ordered]`：

```
$assoc = [pscustomobject] [ordered] @{
    Id = 42
    Name = "Slim Shady"
    Owner = "Eminem"
} 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2020-04-20T12:59:42.770

您还可以访问 C#/.NET 方法，以下内容也可以使用：

```
$string1 = "Slim Shady, "
$string2 = "The real slim shady"

$concatString = [System.String]::Concat($string1, $string2)

Output:

Slim Shady, The real slim shady 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2020-09-11T15:53:19.773

如其他地方所述，您可以使用 join。

如果您使用命令作为输入（就像我一样），请使用以下语法：

```
-join($(Command1), "," , $(Command2)) 
```

这将导致两个输出用逗号分隔。

相关评论见[https://stackoverflow.com/a/34720515/11012871](https://stackoverflow.com/a/34720515/11012871)

# ruby-on-rails - 缺少必需但已安装的 gem

> ID：15113414
> 
> 赞同：0
> 
> 时间：2013-02-27T13:34:03.377
> 
> 标签：ruby-on-rails, deployment, gem, ruby-on-rails-2

我的应用程序在我的个人计算机上运行良好，现在该部署了！

我尝试了几个小时将我的 Rails 2 应用程序部署到一个共同服务器。我准确地说我在服务器上没有太多权限，但供应商说我可以运行 Rails 应用程序。

我的 config/environment.rb 包含 8 个 config.gem。这是我运行“脚本/控制台生产”时得到的（真正的列表是 8 个宝石）

```
Missing these required gems:
  will_paginate  = 2.3.16
  ... 
```

但我刚刚安装了这个宝石！

```
# gem list -l will_paginate
  *** LOCAL GEMS ***
  will_paginate (2.3.16) 
```

我不知道错误可能在哪里......这是一些补充信息：

```
# which ruby
  /usr/bin/ruby
# which gem
  /usr/bin/gem 
```

我家有一些与 Rails 相关的预定义文件夹（~）：

```
~/.gem/specs/gemcutter.org%80/
~/.gem/specs/rubygems.org%80/
~/ruby/bin/gem
~/ruby/gems/ (with bin, cache, doc, gems and specifications subfolders)
~/ruby/gems/gems/will_paginate-2.3.16/ << my gem !
~/ruby/lib/ 
```

这是我的第一次部署，我不知道要检查什么...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T21:16:48.357

“它可以在我的电脑上运行”是任何技术中的常见问题......

我是 Ruby 新手，发现了两个用于管理我的开发和后续生产环境的宝贵工具：

*   [转速](https://rvm.io/)
*   [打包机](http://gembundler.com/)

不能解决您的直接问题，但可能有助于重新创建您的开发设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T10:04:00.273

我在此页面中找到了解决方案： [http ://www.redmine.org/boards/2/topics/5673](http://www.redmine.org/boards/2/topics/5673)

GEM_PATH 不是正确的。所以我将此行添加到我的 config/environment.rb 中，一切正常！

```
ENV['GEM_PATH'] = '/home/xxx/ruby/gems' 
```

# google-apps-script - 如何在 Google 应用程序功能中正确实现 AND 命令？

> ID：15113415
> 
> 赞同：0
> 
> 时间：2013-02-27T13:34:05.147
> 
> 标签：google-apps-script

我有一个函数可以检查第 7 列中的单元格是否被选中。

```
if (r.getColumn() == 7 && r.getValue() == "x") 
```

我如何写这个来检查是否检查了第 7 列或第 8 列？

```
if (r.getColumn() == 7 && r.getValue() == "x") OR if (r.getColumn() == 8 && r.getValue() == "x") 
```

似乎不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T14:02:53.200

`OR`表示为`||`

因此，如果您愿意`(7 OR 8) AND x`，只需编写：

```
if ((r.getColumn() == 7 || r.getColumn() == 8) && r.getValue() == "x") 
```

# xml - 在 IE、FF 和 chrome 中读取带有命名空间的 xml

> ID：15113416
> 
> 赞同：0
> 
> 时间：2013-02-27T13:34:06.573
> 
> 标签：xml, namespaces

我有以下带有命名空间的 xml 响应。

```
<?xml version="1.0"?>
<response status="200">
  <ns3:op xmlns="http://xxx.com/details/" 
              xmlns:ns2="http://xxx.com/mgmt/" 
              xmlns:ns3="http://xxx.com/list/">
    <ns2:ntfs count="140">
      <ns2:ntf>
        <ns2:Nid>4687807</ns2:Nid>
      </ns2:ntf>
    </ns2:ntfs>
  </ns3:op>
</response> 
```

我需要解析它并获取每一行的 Nid 值。我尝试使用 getElementsByTagName(ns3:op) 但它在 safari 中不起作用。还尝试使用 xmlDoc.documentElement.selectNodes("/response/op/ntfs"); 但它不适用于FF。有什么方法可以让我独立于命名空间和浏览器读取响应。

你好，

我的输出 xml 可能会更改，并且元素可能有也可能没有命名空间前缀。所以我需要解析xml而不考虑名称空间。我怎样才能做到这一点？这对我来说有点紧急，任何指点将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T13:36:47.093

使用命名空间，您需要使用`getElementsByTagNameNS`命名空间 URI

```
document.getElementsByTagNameNS('http://xxx.com/list/', 'op') 
```

然而，这显然在 IE 9 之前的版本中不起作用。通常推荐的跨浏览器解决方案是[Sarissa](http://dev.abiss.gr/sarissa/)，这是一个 JavaScript 库，它以适用于更多浏览器的方式实现 XPath 方法：

```
var xmlDoc = new DOMParser().parseFromString(....);
xmlDoc.setProperty("SelectionNamespaces", 'xmlns:ns3="http://xxx.com/list/"');
xmlDoc.setProperty("SelectionLanguage", "XPath");
var op = xmlDoc.selectSingleNode("/response/ns3:op"); 
```

# javascript - 为什么文本字段 id 与 ExtJs 4.1.3 中 IE 中的侦听器冲突？

> ID：15113425
> 
> 赞同：1
> 
> 时间：2013-02-27T13:34:43.430
> 
> 标签：javascript, forms, internet-explorer, extjs, listeners

我们的应用程序使用 ExtJs，并且在 4.1.3 版本中，IE 中出现了奇怪的行为。

**问题是，如果我们打开一个具有很少文本字段/组合的窗体的窗口，并且如果我们在关闭一次后重新打开该窗口，则应用于文本字段/组合的焦点/模糊侦听器将停止工作。**

以下是该问题的测试用例：

```
Ext.onReady(function(){             
    function getForm(){
        var form    =   {
            xtype:'form',
            width:550,
            items:[
                {
                    xtype:'textfield',
                    flex:1,
                    fieldLabel:'test1',
                    id:'disabledFieldId',
                    itemId:'disabledFieldId',
                    listeners:{
                        focus:function(){
                            console.log('focus first field');
                        },
                        blur:function(){
                            console.log('blur first field');
                        },
                        change:function(){
                            console.log('change first field');
                        }
                    }
                },
                {
                    xtype:'textfield',
                    flex:1,
                    fieldLabel:'test2'
                }
            ]
        };
        return form;
    }
    Ext.create('Ext.Button', {
        text: 'Open Window',
        renderTo: Ext.getBody(),
        handler: function() {
            var win     =       Ext.create('Ext.window.Window',{
                modal:true,
                items:[
                    getForm()
                ],
                width:550,
                height:200
            });
            win.show();
        }
    });
}); 
```

在上面的测试用例中，可以通过以下步骤来检查这个问题：

1.  在 IE 中加载页面并单击“打开窗口”按钮打开窗口

2.  单击第一个文本字段以将其聚焦，这将在控制台中打印一个语句-“聚焦第一个字段”

3.  现在关闭此窗口，然后从按钮再次打开它

4.  单击第一个文本字段 - 现在，控制台不会打印任何内容 - 焦点事件根本不会触发。

我检查并发现'focus'和'blur'事件没有触发，但'change'事件每次都会触发。

如果我们重新加载整个页面然后现在打开窗口，那么事件将再次开始触发。但在这种情况下，也只是一次。

**我发现如果从文本字段中注释了“id”，那么事情就会开始正常工作。但这很奇怪。'id' 如何与听众发生冲突？这是一个错误吗？**

请注意，不会引发任何错误。此外，窗口正在被破坏，元素正在被重新创建。

我也在 Chrome 和 Firefox 中对此进行了测试，发现这种行为仅在 IE 中发生（在 IE9 中检查，文档和浏览器模式设置为标准）。

此外，当我使用 4.1.1 之前的版本进行测试时，我发现 IE 也可以正常工作。

对此有任何想法吗？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T05:07:59.117

这最终被接受为版本 4.1.2 和 4.1.3 中的错误。[可以在此链接上检查](http://www.sencha.com/forum/showthread.php?257455-Focus-and-Blur-events-not-working-in-IE-9-with-4.1.3-version&p=944942#post944942)可以解决它的覆盖。

# codeigniter - Codeigniter 表单验证，如果不需要该字段，则自定义检查不起作用

> ID：15113426
> 
> 赞同：0
> 
> 时间：2013-02-27T13:34:43.557
> 
> 标签：codeigniter, validation

Gah..我花了很长时间在这方面，但我相信我已经找到了问题。

本质上，我有一个隐藏字段，当用户单击图像时会填充该字段。

要求用户单击图像，但我不希望使用 CI 表单验证类进行“必需”检查的通用表单错误消息。

因此，我很快在我的扩展表单验证类中创建了一个 image_required 函数，并设置了一个规则，以便将该规则应用于隐藏字段。

```
function image_required($str)
    {

    $CI =& get_instance();

    $CI->form_validation->set_message('image_required','Please click the image above.');

    if($str != '')
    {
        return TRUE;
    }
    else
    {
        return FALSE;
        } 
} 
```

如果隐藏字段为空，则不会调用错误。

我现在相信这是因为 CI 说这个字段是空的，但它不是“必需的”，因此我们将忽略该字段的所有其他验证规则。这个对吗？

如果是这样，我该如何去要求设置此字段但有自定义错误消息？

*刘海头*

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T13:48:47.243

如果您查看“_execute”例程 (system/libraries/Form_validation.php) 的源代码 (v2.1.3)，您将在第 486 行看到

```
 // If the field is blank, but NOT required, no further tests are necessary 
```

所以你是对的，它需要被要求，然后它会处理你的规则。

为了修复它，以便您可以拥有一个仍然处理规则的非必需空白字段，您应该通过在 application/libraries 文件夹中创建一个名为“MY_Form_validation.php”的文件来覆盖“_execute”方法（我认为，您可能需要准确检查您如何扩展现有库），然后复制“_execute”方法并更改代码以继续处理非必需但空白的条目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-05T11:29:55.107

我确实喜欢 CI，但我不得不说这不允许所需的灵活性。有一个不能为空但不是必需的字段是完全合理的。如，您不会强制“用户必须输入一个值”，但他们不能提交空白。我认为有人对 EMPTY 和 REQUIRED 感到困惑。

1）要求：用户必须在字段中输入一个值，并且不能为空（即''） 2）空：用户不必输入一个值，但是，如果他们这样做，它不能为空。这与 REQUIRED 不同...看起来我将再次使用回调。

REQUIRED 包含两个逻辑步骤（1-> 必须输入一个值，以及 2-> 不能为空）这两个步骤应在逻辑上分开以允许 / 或。

在约束条件下，它可以是 REQUIRED，NOT NULL。或不需要，不为空。

# c++ - C ++ 11类型到枚举映射？

> ID：15113437
> 
> 赞同：5
> 
> 时间：2013-02-27T13:35:42.147
> 
> 标签：c++, c++11, constexpr

我有一个像这样的枚举：

```
enum E
{
    TYPE_FLOAT,
    TYPE_CHAR,
    TYPE_INT
} 
```

我想创建一个编译时映射来为以下类型获取适当的 E：

```
GetE<float> // returns TYPE_FLOAT
GetE<char> // returns TYPE_CHAR
GetE<int> // returns TYPE_INT 
```

我想到了：

```
template<class T> struct GetE;

template<> struct GetE<float> { static constexpr E type = TYPE_FLOAT; };
template<> struct GetE<char> { static constexpr E type = TYPE_CHAR; };
template<> struct GetE<int> { static constexpr E type = TYPE_INT; }; 
```

但我收到如下错误：

```
undefined reference to `GetE<int>::type' 
```

最好的方法是什么？为什么会出错？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T13:50:11.537

这取决于您如何使用这些常量表达式。

ODR（单一定义规则）指出

> (§3.2/2) [...] 名称显示为潜在求值表达式的变量是 odr-used 除非它是一个满足出现在常量表达式 (5.19) 中的要求和左值到-立即应用右值转换 (4.1)。[...]

（然后，许多特殊的规则，例外和例外的例外。）

任何使用 odr 的变量*都必须有一个定义。*您的常量表达式有一个声明，但没有定义，所以除非您使用其中一个，否则这很顺利。

例如，以下进展顺利：

```
int main() {
  E e = GetE<float>::type;
  return 0;
} 
```

但这不会：

```
void f(const E &)
{ }

int main() {
  f(GetE<float>::type);
  return 0;
} 
```

因为`f`需要 (const) 引用，所以左值到右值的转换不能立即应用，因此这构成了 odr 使用。编译器会抱怨它错过了一个定义。

（备注。正如 ShafikYaghmour 发现的那样（参见评论），如果编译器使用优化，您可能不会收到投诉，因为引用可能会被优化掉。要重现编译器投诉，请使用`-O0`标志（或类似标志，具体取决于编译器） .)

为了解决这个问题，可以以通常的方式提供所需的定义，即在结构定义之外：

```
constexpr E GetE<float>::type;
constexpr E GetE<char>::type;
constexpr E GetE<int>::type; 
```

但是由于这必须发生在 .cpp（而不是头文件）中，您最终将不得不在两个不同的地方维护声明和定义，这很麻烦。

您刚刚在评论中建议的解决方案，即定义一个 constexpr （和内联）函数，听起来不错：

```
template <class T> constexpr E GetE();

template <> constexpr E GetE<float>()
{ return TYPE_FLOAT; }

template <> constexpr E GetE<char>()
{ return TYPE_CHAR; }

template <> constexpr E GetE<int>()
{ return TYPE_INT; }

void f(const E &)
{ }

int main() {
  E e = GetE<float>();

  f(GetE<float>());

  return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T13:42:48.617

静态成员变量需要在类范围之外*定义：*

```
class C {
    const static int x = 5;
};

decltype(C::x) C::x; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T13:42:59.657

也许是因为您忘记在枚举定义后加分号，这在 LiveWorkSpace 中对我有用：

```
#include <iostream>

enum E
{
   TYPE_FLOAT,
   TYPE_CHAR,
   TYPE_INT
} ;

template<class T> struct GetE;

template<> struct GetE<float> { static constexpr E type = TYPE_FLOAT; };
template<> struct GetE<char> { static constexpr E type = TYPE_CHAR; };
template<> struct GetE<int> { static constexpr E type = TYPE_INT; };

int main()
{
    std::cout << GetE<int>::type << std::endl ;
} 
```

这是代码的链接[http://liveworkspace.org/code/nHqUe](http://liveworkspace.org/code/nHqUe) $6

# android - Epub：脚注中断/不中断

> ID：15113438
> 
> 赞同：0
> 
> 时间：2013-02-27T13:35:42.807
> 
> 标签：android, css, epub

我的 epub 脚注在 iBooks 中分成所需的行数，但在其他阅读器（Android 的 Blue Fire、iMac 上的 Adob​​e Digital Editions 等）中没有，每个脚注都只在一行中，这导致文本在屏幕的右边距。

*   问题可能是什么？和 ...
*   我该如何解决这个问题？

所有脚注都放在章节末尾，在 epub 拆分到下一章之前。

HTML：

```
 <p class="u_indryk">Det vil sige at ingen leder, uanset, hvor dygtig han eller hun måtte være, kan rumme de mange informationer, som man skal forholde sig til en kompleks beslutningsproces. Det skyldes, at enhver handling udspringer af en mental model og denne model, har en indbygget begrænsning, der især bliver synlig, når verden forandrer sig hurtigt. Grunden er, at vi altid vil have en træghed i forhold til at omstrukturere eller „omprogrammere“ vores mentale model hurtigt nok. En vigtig erkendelse er derfor, at de bedste beslutninger ikke altid træffes af enkeltpersoner, men af grupper, fordi antallet af „hjerner“ også øger den mentale kapacitet: </p>

            <p class="liste"><span class="char-style-override-2">▷&amp;#9;</span>Den samme problemstilling kan ses fra mange forskellige synsvinkler.</p>
            <p class="liste"><span class="char-style-override-2">▷&amp;#9;</span>Der er en øget mulighed for at forholde sig mere kreativt og mere kritisk. </p>

        <p class="u_indryk">En tredje vigtig erkendelse er desuden, at mange ledere godt nok er gode til at træffe hurtige beslutninger, men at disse beslutninger altid vil blive truffet inden for en relativ snæver mental spændvidde. Hvis vi skal træffe gode beslutninger, der i højere grad er innovative og som bryder med de logikker der er i forvejen, må vi acceptere, at det tager længere tid, fordi kreative processer ikke i samme grad kan „speedes op“. </p>
        <p class="u_indryk">Dette leder mig hen til det næste tema, der handler om „&lt;span>kunsten at lede på kanten af kaos</span>“.</p>
        <p>&#160;</p>
        <div class="footnotes">
            <div class="footnote">
                <p class="fodnote"><a id="footnote-2129-63" class="footnote-anchor" href="#footnote-2129-63-backlink">63</a>&#9;Steve Jobs: „You have to think differently.“ Foredrag på Macworld Expo 1997.</p>
            </div>
            <div class="footnote">
                <p class="fodnote"><a id="footnote-2129-64" class="footnote-anchor" href="#footnote-2129-64-backlink">64</a>&#9;www.google.dk/corporate/index.html</p>
            </div>
            <div class="footnote">
                <p class="fodnote"><a id="footnote-2129-65" class="footnote-anchor" href="#footnote-2129-65-backlink">65</a>&#9;Alfred Josefsen: Noter fra konferencen Retorik.biz. „Når chefen tager ordet“. Afholdt af Rhetor, 2007.</p>
            </div>
            <div class="footnote">
                <p class="fodnote"><a id="footnote-2129-66" class="footnote-anchor" href="#footnote-2129-66-backlink">66</a>&#9;60-30-10-reglen formulerede jeg, efter at jeg havde gennemført en poll på linkedin, hvor jeg stillede spørgsmålet: „Hvilke temaer bør en karismatisk leder især fokusere på, når han kommunikerer sin vision og mission for fremtiden?“ Resultatet blev, at kun 7 % tillagde logos en betydning (ekspertviden, analyse, statistik, osv.), 30 % tillagde ethos en betydning (personlig dømmekraft og troværdighed), mens hele 63 % tillagde pathos (passion) en betydning. </p>
            </div>
            <div class="footnote">
                <p class="fodnote"><a id="footnote-2129-67" class="footnote-anchor" href="#footnote-2129-67-backlink">67</a>&#9;Citeret fra en tråd på linkedin, 2011.</p>
            </div>
            <div class="footnote">
                <p class="fodnote"><a id="footnote-2129-68" class="footnote-anchor" href="#footnote-2129-68-backlink">68</a>&#9;Sørensen, 2010.</p>
            </div>
            <div class="footnote">
                <p class="fodnote"><a id="footnote-2129-69" class="footnote-anchor" href="#footnote-2129-69-backlink">69</a>&#9;Der er naturligvis mange grunde til, at kommunikation og involvering ikke sker tilstrækkeligt, men jeg fremhæver især disse tre grunde. Disse bygger dels på forskningslitteraturen vedr. „participationsforskning“, dels på mine egne erfaringer, som topleder, mellemleder, konsulent og præstationstræner. </p>
            </div>
            <div class="footnote">
                <p class="fodnote"><a id="footnote-2129-70" class="footnote-anchor" href="#footnote-2129-70-backlink">70</a>&#9;Spørgsmålet blev stillet til ca. 3000 ledere og professionelle via linkedin-interesse&#173;grupper, 2012.</p>
            </div>
            <div class="footnote">
                <p class="fodnote"><a id="footnote-2129-71" class="footnote-anchor" href="#footnote-2129-71-backlink">71</a>&#9;Miller,1956.</p>
            </div>
        </div>
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T22:38:45.827

问题出在您的 CSS 中。检查`div.footnotes`,`div.footnote`和`p.footnote`for `white-space: pre`or `white-space: nowrap`，这两者都将防止行在页面末尾换行。删除它们，你应该很好。

# objective-c - 压缩音频上传到 soundcloud

> ID：15113440
> 
> 赞同：0
> 
> 时间：2013-02-27T13:35:45.803
> 
> 标签：objective-c, upload, compression, soundcloud, aac

我们的 ios 应用程序记录到 wav，然后可以上传到 Soundcloud。由于录音可以是 5 分钟，即 50 兆，所以上传速度很慢。是否有任何适用于 ios 的 Obj C 代码可以压缩为 AAC 或 IM4 等我们可以使用的代码？Iphone 4 及更高版本显然可以进行硬件/优化音频压缩。

在旧的 SC API 讨论中，一位名叫 Steve 的编码员讨论了这个问题，并说他已经让它工作了，所以看起来它是可能的。

[https://groups.google.com/forum/#!msg/soundcloudapi/2TxziUEPDwA/idJHmXJKlj0J](https://groups.google.com/forum/#!msg/soundcloudapi/2TxziUEPDwA/idJHmXJKlj0J)

谢谢马特布莱克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T16:14:18.957

这是可能的 - 在这里查看我的问题和稍后的回答：[Recording to AAC from RemoteIO: data is gettingwritten but file unplayable](https://stackoverflow.com/questions/10113977/recording-to-aac-from-remoteio-data-is-getting-written-but-file-unplayable)。

我现在忘记了文件大小数字，但我记得它们非常好。性能也不错（在第二代 iPad 上）。

我没有将它上传到 SoundCloud 做任何事情（有兴趣知道这是怎么回事）。

# jquery - Jquery 滑块不能在线协同工作，但它们在离线页面上工作正常

> ID：15113444
> 
> 赞同：1
> 
> 时间：2013-02-27T13:35:51.057
> 
> 标签：jquery, debugging, localhost, jquery-ui-slider

www.grapho-line.com 网站正在使用两个滑块，但只有主滑块在工作（带有大图片的那个）。缩略图滑块（在主 jquery 滑块正下方）无法正常工作，正如您在现场看到的那样。但是，当我在本地主机上运行网站时，两者都可以正常工作。

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Home | Grapho Line Trading LLC</title>
<link href="style.css" rel="stylesheet" type="text/css">
<link href="slider.css" rel="stylesheet" type="text/css">
<link href="themes/generic.css" rel="stylesheet" type="text/css" />
<link href="themes/1/slider2.css" rel="stylesheet" type="text/css" />
<script src="themes/jquery-1.7.1.min.js" type="text/javascript"></script>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript" src="s3Slider.js"></script>
<script type="text/javascript">
$(document).ready(function() {
    $('#slider1').s3Slider({
        timeOut: 5000 
    });
});
</script>
<script src="themes/1/jquery-slider.js" type="text/javascript"></script>

<meta http-equiv="content-type" content="text/html; charset=utf-8"/>
<script src="http://www.google.com/jsapi?key=AIzaSyA5m1Nc8ws2BbmPRwKu5gFradvD_hgq6G0" type="text/javascript"></script>
<script type="text/javascript">

google.load("feeds", "1");

function feedLoaded(result) {
  if (!result.error) {
    var container = document.getElementById("homenews3content");
    container.innerHTML = '';
    for (var i = 0; i < result.feed.entries.length; i++) {
      var entry = result.feed.entries[i];
      var div = document.createElement("div");
      div.appendChild(document.createTextNode(entry.title));
      container.appendChild(div);
    }
  }
}

function OnLoad() {
  var feed = new google.feeds.Feed("http://feeds.feedburner.com/KodakNewsReleases.xml");
  feed.includeHistoricalEntries(); // tell the API we want to have old entries too
    feed.setNumEntries(3);
    feed.load(feedLoaded);

}

  google.setOnLoadCallback(OnLoad);
  </script>

<style>

#main{

    background:#fabd2b;
    height:740px;

 }

 </style>

</head>

<body>

<div id="main">
<img src="logonew.png" id="kodaklogo" />
<img src="grapho.png" id="mainbackground"/>

<div id="headmenu">
<ul id="nav">
<li><a href="index.html">HOME</a></li>
<li class="sub"><a href="products.html">PRODUCTS</a>
<ul>
        <li><a href="flexographic&letterpress.html">  &nbsp;Flexographic & Letterpress</a></li>
        <li><a href="offsetctp.html">  &nbsp;Offset CTP</a></li>
        <li><a href="proofing&wideformat.html">  &nbsp;Proofing & Wide Format</a></li>
        <li><a href="brandprotectionsolutions.html">&nbsp;Brand Protection Solutions</a></li>
        <li><a href="enterprisemarketing.html">&nbsp;Enterprise Marketing</a></li>
        <li><a href="productionworkflow.html">&nbsp;Production Workflow Solutions</a></li>
        <li><a href="colormanagement.html">&nbsp;Color Management & Screening</a></li>

 </ul>
 </li>
 <li><a href="aboutus.html">ABOUT US</a></li>
 <li><a href="contactus.html">CONTACT US</a></li>
 </ul>

 </div>

 <div id="slider1">
    <ul id="slider1Content">
        <li class="slider1Image">
            <a href=""><img src="example_images/wide/flexcelnxplate.jpg" alt="1" /></a>
            <span class="left"><strong>KODAK FLEXCEL NX</strong><br /><br />KODAK FLEXCEL NX Plates are an important part of the KODAK FLEXCEL NX System. With the FLEXCEL NX System for the first time you can achieve gravure-class print quality on a wide variety of substrates.</span></li>
        <li class="slider1Image">
            <a href="aboutus.html"><img src="example_images/wide/flexoplates.jpg" alt="2" /></a>
            <span class="left"><strong>KODAK FLEXCEL SR</strong><br /><br />KODAK FLEXCEL SR Flexographic Plates have been designed to bring brand owners confidence that their packaging will be produced reliably and consistently, and to bring printers of packaging materials increased productivity and peace of mind.</span></li>
        <li class="slider1Image">
            <img src="example_images/wide/flexelnx.JPG" alt="3" />
            <span class="left"><strong>KODAK FLEXCEL NX System</strong><br /><br />The KODAK FLEXCEL NX Wide System allows you to take full advantage of the unique benefits that KODAK FLEXCEL NX Plates offer.It utilizes the proven KODAK SQUARESPOT Imaging Technology to deliver exceptional image quality. </span></li>
        <li class="slider1Image">
            <img src="example_images/wide/directengraving.jpg" alt="4" />
            <span class="left"><strong>KODAK FLEXCEL Direct</strong><br /><br />The KODAK FLEXCEL Direct System offers a brand new approach to direct engraving of elastomers for flexographic printing.The FLEXCEL Direct System is ideal for both printers and prepress service providers</span></li>
         <li class="slider1Image">
            <img src="example_images/wide/flexo.jpg" alt="6" />
            <span class="left"><strong>KODAK FLEXCEL NX System</strong><br /><br />YOU CAN with the KODAK FLEXCEL NX System, a complete solution for digital plate making that enables you to push the boundaries of flexo printing.</span></li>   
        <li class="slider1Image">
            <img src="example_images/wide/m800.jpg" alt="5" />
            <span class="left"><strong>KODAK MAGNUS 800</strong><br /><br />The KODAK MAGNUS 800 Platesetter is a reliable 8-page CTP device with advanced automation options, offering exceptional productivity and stability to meet the needs of offset printers.</span></li>

        <div class="clear slider1Image"></div>
    </ul>
 </div>

 <div id="homecenter">

  <div class="div2">
      <div id="mcts1">
        <a href="productionworkflow.html"><img src="images/DigiCap_300x140_695X250.jpg" /></a>
  <a href="brandprotectionsolutions.html">         <img src="images/3-pharma-protection.jpg" /></a>
  <a href="colormanagement.html">        <img src="images/header_spotless_695X250.jpg" /></a>
  <a href="enterprisemarketing.html">            <img src="images/mqdefault.jpg" /></a>
  <a href="products/ctp/prepress.html">            <img src="images/IPM-Hero2_695x210_695X250.jpg" /></a>
  <a href="proofing&wideformat.html">            <img src="images/proofingandwideformat.jpg" /></a>
  <a href="flexographic&letterpress.html">            <img src="images/flexographic.jpg" /></a>
  <a href="products/proofing/kodakmatchprint.html"><img src="images/matchprint_IceCudesLo_695X250.jpg" /></a>
    </div>
 </div>

 <br/><br/>

 <div class="homenews3">
  <b>&nbsp;&nbsp;&nbsp;Latest news from <a href="http://graphics.kodak.com" target="_blank" >Kodak Graphics</a></b><br/><br/>

    <div id="homenews3content">
   </div>

   </div>

   </div>

   </div>
  </body>

   </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-05T01:43:32.440

使用文件搜索查看以下路径是否有效：

```
themes/1/ 
```

# c# - c#从客户端到服务器实时上传到amazon s3

> ID：15113448
> 
> 赞同：5
> 
> 时间：2013-02-27T13:36:06.610
> 
> 标签：c#, wcf, amazon-s3

早上好，我有一个桌面应用程序将文件上传到 WCF 服务，然后 WCF 服务上传到 Amazon S3。

这是我接收文件并上传到 S3 的 WCF 方法。

```
public void UploadFile(RemoteFileInfo request)
        {
            config = new AmazonS3Config();
            config.CommunicationProtocol = Protocol.HTTP;
            accessKeyID = "XXXXXXX"; 
            secretAccessKeyID = "YYYYYYYY";
            client = Amazon.AWSClientFactory.CreateAmazonS3Client(accessKeyID, secretAccessKeyID, config);

            int chunkSize = 2048;
            byte[] buffer = new byte[chunkSize];

            using (System.IO.MemoryStream writeStream = new System.IO.MemoryStream())
            {
                do
                {
                    // read bytes from input stream
                    int bytesRead = request.FileByteStream.Read(buffer, 0, chunkSize);
                    if (bytesRead == 0) break;

                    // simulates slow connection
                    System.Threading.Thread.Sleep(3);

                    // write bytes to output stream
                    writeStream.Write(buffer, 0, bytesRead);
                } while (true);

                // report end
                Console.WriteLine("Done!");

                // start the uploading to S3
                PutObjectRequest fileRequest = new PutObjectRequest();
                fileRequest.WithInputStream(writeStream);
                fileRequest.Key = "testfile.pdf";
                fileRequest.WithBucketName("tempbucket");
                fileRequest.CannedACL = S3CannedACL.Private;
                fileRequest.StorageClass = S3StorageClass.Standard;
                client.PutObject(fileRequest);

                writeStream.Close();
            }

        } 
```

在我的客户端上，当我将文件上传到 WCF 服务时，我会实时获得进度，但是当我完成**100% 时，这并不意味着文件已经上传到 S3**，所以我想知道它是否可以上传在我写入流时将文件写入 S3（在 using 内部

```
(System.IO.MemoryStream writeStream = new System.IO.MemoryStream())
            { 
```

这可能吗？关于如何做的任何指导？

提前欣赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T14:18:37.803

您可以使用**[PutObjectRequest](http://docs.aws.amazon.com/sdkfornet/latest/apidocs/html/T_Amazon_S3_Model_PutObjectRequest.htm)****的InputStream**属性

```
public void UploadFile(RemoteFileInfo request)
{
    config = new AmazonS3Config();
    config.CommunicationProtocol = Protocol.HTTP;
    accessKeyID = "XXXXXXX"; 
    secretAccessKeyID = "YYYYYYYY";
    client = Amazon.AWSClientFactory.CreateAmazonS3Client(accessKeyID,secretAccessKeyID,config);

    int chunkSize = 2048;
    byte[] buffer = new byte[chunkSize];

    PutObjectRequest fileRequest = new PutObjectRequest();

    fileRequest.Key = "testfile.pdf";
    fileRequest.WithBucketName("tempbucket");
    fileRequest.CannedACL = S3CannedACL.Private;
    fileRequest.StorageClass = S3StorageClass.Standard;

    using (fileRequest.InputStream = new System.IO.MemoryStream())
    {
      do
      {
         // read bytes from input stream
         int bytesRead = request.FileByteStream.Read(buffer, 0, chunkSize);
         if (bytesRead == 0) break;

         // simulates slow connection
         System.Threading.Thread.Sleep(3);

         // write bytes to output stream
         fileRequest.InputStream.Write(buffer, 0, bytesRead);
       } while (true);

       // report end
       Console.WriteLine("Done!");

       client.PutObject(fileRequest);

    }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T14:28:13.083

我建议将文件作为块而不是流上传到 WCF。我这样做了，它工作得很好。您还需要稍后返回写入亚马逊的实际字节的消息，您可以在此基础上增加进度条。我知道这会导致您在客户端应用程序中编写一个 while 循环，但它会帮助您以 100% 的准确性显示大文件的进度。您的 WCF 函数应采用如下参数

```
[DataContract]
class RemoteFileInfo
{
    [DataMember]
    Byte[] myChunk;
    [DataMember]
    long myOffset;
    // other stuff you think you need to be sent each time.

} 
```

# c - 如何创建头节点

> ID：15113451
> 
> 赞同：2
> 
> 时间：2013-02-27T13:36:14.787
> 
> 标签：c, linked-list

我想我在 newList 中弄错了。Typedef 结构实现不得更改。这是我学校的一项实验室作业。在此先感谢 :)

```
#include<stdio.h>

    typedef struct node *nodeptr;
    struct node {
    int item;
    nodeptr next;
};
typedef nodeptr List;

List newList(); 
```

newList 创建一个标头并返回一个指向标头节点的指针

```
void display(List list);
void addFront(List list, int item);

List newList(){
    List list;
    list=(nodeptr)malloc(sizeof(List));
    list->next=NULL;
    return list;
} //I think my new list is incorrect..
void display(List list){
    nodeptr ptr=list;
    while(ptr!=NULL){
        printf("%d",ptr->item);
        ptr=ptr->next;
    }
    printf("\n");
}
void addEnd(List list, int item){
    nodeptr temp, ptr;
    temp=(List)malloc(sizeof(nodeptr));
    temp->item=item;
    temp->next=NULL;
    if(list->next==NULL)
        list=temp;
    else{
        ptr=list;
        while(ptr->next!=NULL)
            ptr=ptr->next;
        ptr->next=temp;
    }

} 
```

我似乎无法从列表中添加 10..

```
int main(void){
    List list=newList();
    addEnd(list,10);
    display(list);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T14:26:16.610

有很多方法可以解决这个问题，具体取决于您的实际需求（因为仅创建一个节点本身并没有多大意义）。但通常你有三个常见的选择——在堆栈上创建它，在全局内存中创建那个节点，或者动态分配它。下面是一些例子。

### 在堆栈上

```
#include <stdlib.h>

struct node {
    int item;
    struct node *next;
};

int main()
{
    struct node head;
    head.item = 0;
    head.next = NULL;
    /* Do something with the list now. */
    return EXIT_SUCCESS;
} 
```

### 在全局内存中

```
#include <stdlib.h>

struct node {
    int item;
    struct node *next;
};

static struct node head;

int main()
{
    /* Do something with the list now. */
    return EXIT_SUCCESS;
} 
```

### 动态分配

```
#include <stdlib.h>
#include <stdio.h>

struct node {
    int item;
    struct node *next;
};

int main()
{
    struct node *head;

    head = calloc(1, sizeof(struct node));
    if (head == NULL) {
        perror("calloc");
        return EXIT_FAILURE;
    }
    /* Do something with the list now. */
    return EXIT_SUCCESS;
} 
```

您可以在任何介绍性 C 书籍中阅读上述任何示例。

希望能帮助到你。祝你好运！

# java - 设置按钮字体时 TabGroupactivity 上的 NullPointerException

> ID：15113453
> 
> 赞同：0
> 
> 时间：2013-02-27T13:36:29.397
> 
> 标签：java, android, tabs

我在 TabGroupActivity 中加载的活动有点问题

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.user_profile);

    f = new Functions();
   String  j = f.getUserInfo();

  arialFont = Typeface.createFromAsset(this.getAssets(),"Arial.ttf");  

  username = (TextView)findViewById(R.id.txtProfileName);
  firstname = (TextView)findViewById(R.id.txtName);
  Address1 = (TextView)findViewById(R.id.txtAdd1);

  Cit = (TextView)findViewById(R.id.txtCity);
  PostCode = (TextView)findViewById(R.id.txtPost);
  Coun = (TextView)findViewById(R.id.txtCountry);
  Phon = (TextView)findViewById(R.id.txtPhone);

  dob = (TextView)findViewById(R.id.txtDOB);
  gender = (TextView)findViewById(R.id.txtGender);

  yourDetails = (Button)findViewById(R.id.Button01);
  payment = (Button)findViewById(R.id.Button02);
  billing = (Button)findViewById(R.id.Button03);
  history = (Button)findViewById(R.id.Button04);

  yourDetails.setTypeface(arialFont); <-- Null Pointer exception starts here
  payment.setTypeface(arialFont);
  billing.setTypeface(arialFont);
  history.setTypeface(arialFont);

  try {
    parseData(j);

} catch (JSONException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

我从代码中收到的错误是：

```
02-27 13:22:47.278: E/AndroidRuntime(929): Caused by: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.Ticketline.Ticketline/com.Ticketline.Ticketline.UserProfile}: java.lang.NullPointerException
02-27 13:22:47.278: E/AndroidRuntime(929):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1955)
02-27 13:22:47.278: E/AndroidRuntime(929):  at android.app.ActivityThread.startActivityNow(ActivityThread.java:1796)
02-27 13:22:47.278: E/AndroidRuntime(929):  at android.app.LocalActivityManager.moveToState(LocalActivityManager.java:135)
02-27 13:22:47.278: E/AndroidRuntime(929):  at android.app.LocalActivityManager.startActivity(LocalActivityManager.java:347)
02-27 13:22:47.278: E/AndroidRuntime(929):  at com.Ticketline.Ticketline.TabGroupActivity.startChildActivity(TabGroupActivity.java:61)
02-27 13:22:47.278: E/AndroidRuntime(929):  at com.Ticketline.Ticketline.Account.onCreate(Account.java:33)
02-27 13:22:47.278: E/AndroidRuntime(929):  at android.app.Activity.performCreate(Activity.java:4465)
02-27 13:22:47.278: E/AndroidRuntime(929):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
02-27 13:22:47.278: E/AndroidRuntime(929):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1919)
02-27 13:22:47.278: E/AndroidRuntime(929):  ... 18 more
02-27 13:22:47.278: E/AndroidRuntime(929): Caused by: java.lang.NullPointerException
02-27 13:22:47.278: E/AndroidRuntime(929):  at com.Ticketline.Ticketline.UserProfile.onCreate(UserProfile.java:83)
02-27 13:22:47.278: E/AndroidRuntime(929):  at android.app.Activity.performCreate(Activity.java:4465)
02-27 13:22:47.278: E/AndroidRuntime(929):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
02-27 13:22:47.278: E/AndroidRuntime(929):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1919)
02-27 13:22:47.278: E/AndroidRuntime(929):  ... 26 more 
```

我知道问题在于将按钮字体设置为 Arial，问题是我不明白为什么这是一个问题。如果我将 setTypeface 行注释掉，它可以正常工作，并将转移到其他在 TabGroupActivity 中设置了按钮字体的活动，这让我更加困惑。

任何可以向我解释这一点的人的最高分

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T13:53:15.397

解决了这个问题，在我之前开发此应用程序的编码人员将历史按钮的 ID 设为“btnHistory”而不是“Button04”。这自然会在空指针错误中解决，因为该活动中不存在 id“Button04”。

# sql - SQL Server Management Studio ZEROFILL

> ID：15113454
> 
> 赞同：6
> 
> 时间：2013-02-27T13:36:32.190
> 
> 标签：sql, sql-server-2008, ssms, zerofill

我正在尝试使用 ZEROFILL 添加一个 auto_increment 主键，最大大小为六。

所以它输出：

```
000001
000002 etc... 
```

但是，我真的很难实现这一目标并且找不到答案。如何在 SQL Server Management Studio 中设置此列类型？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-27T13:44:36.727

您不能使用 SQL Server 中的整数字段来执行此操作（我也不建议使用 Varchar）。

让 SQL Server 将字段存储为标识，然后（假设这是为了显示）在选择数据时格式化数据，如下所示：

```
SELECT RIGHT('000000' + CONVERT(VARCHAR(6),ID), 6) FROM Table 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T13:52:03.633

你想要达到的目标是不可能的。显示格式是在表示层而不是在数据库中完成的。您需要将值与值的表示分开。这两个值`1`和`000001`是相同的。

如果要返回**格式化的**内容，则必须将值作为字符串返回。只需将其转换为字符串，在开头添加多个零，然后保留最左边的*n 个*字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-05-09T19:25:12.737

```
SELECT FORMAT(2, N'000000')
--OR
SELECT FORMAT(2, CAST(REPLICATE(0, 6) AS NVARCHAR(6))) 
```

[https://docs.microsoft.com/en-us/sql/t-sql/functions/format-transact-sql?view=sql-server-ver15](https://docs.microsoft.com/en-us/sql/t-sql/functions/format-transact-sql?view=sql-server-ver15)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-18T11:34:18.640

通过创建一个函数

```
CREATE FUNCTION MyZeroFill (
 @N BIGINT,
 @D SMALLINT
 ) RETURNS VARCHAR(50) AS
BEGIN
RETURN RIGHT('0000000000000000000000000000000000000000000000'+CAST
(@N AS VARCHAR),@D)
END 
```

# ios5 - ios中的NSSharedPublicDirectory

> ID：15113455
> 
> 赞同：0
> 
> 时间：2013-02-27T13:36:33.190
> 
> 标签：ios5

我发现 NSSharedPublicDirectory 是在 ios 4.0 及更高版本中添加的。我试图找到有关此的详细信息但无法获取。可以解释一下上面 ios 4.0 中的 NSSharedPublicDirectory 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T09:33:01.597

[根据Apple 文档](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Miscellaneous/Foundation_Constants/Reference/reference.html#//apple_ref/doc/uid/TP40003793-CH3g-SW40)，NSSharedPublicDirectory 用于访问用户的公共目录：

> NSSharedPublicDirectory
> 用户公共共享目录的位置 (~/Public)
> 在 iOS 4.0 及更高版本中可用。
> 在 NSPathUtilities.h 中声明。

但是没有额外的解释。当我执行这个：

```
NSArray *Ar =  NSSearchPathForDirectoriesInDomains(
    NSSharedPublicDirectory, NSAllDomainsMask, YES); 
```

我得到这个文件夹路径：

```
/var/mobile/Applications/AppFolder/Public 
```

我还没有发现这个枚举对于 iPhone 的任何重要用途，因为 iPhone ( **AFAIK** ) 中没有共享的公共目录。

如果您了解更多信息，请更新我

# ios - 减少多行 UILabel 中最后一行的宽度

> ID：15113461
> 
> 赞同：20
> 
> 时间：2013-02-27T13:36:57.660
> 
> 标签：ios, objective-c, cocoa-touch, uilabel

我正在实现一个“阅读更多”功能，就像 Apple 的 AppStore 中的功能一样。但是，我使用的是 multiline `UILabel`。看看 Apple 的 AppStore，他们如何减少最后一条可见行的宽度以适应“更多”文本并仍然截断尾部（见图）？

![来自 AppStore 的 iBooks 示例图像](../Images/6f9780eb7732a30d58366033db3e3668.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-27T17:31:02.243

这似乎可行，至少在我所做的有限数量的测试中是这样。有两种公共方法。如果您有多个标签都具有相同的行数，则可以使用较短的标签 - 只需更改顶部的 kNumberOfLines 以匹配您想要的。如果您需要传递不同标签的行数，请使用更长的方法。请务必将您在 IB 中制作的标签的类别更改为 RDLabel。使用这些方法代替 setText:。如果需要，这些方法会将标签的高度扩展为 kNumberOfLines，如果仍然被截断，则会扩展它以适应触摸时的整个字符串。目前，您可以触摸标签中的任何位置。改变它应该不会太难，所以只有在 ...Mer 附近接触才会导致扩张。

```
#import "RDLabel.h"
#define kNumberOfLines 2
#define ellipsis @"...Mer ▾ "

@implementation RDLabel {
    NSString *string;
}

#pragma Public Methods

- (void)setTruncatingText:(NSString *) txt {
    [self setTruncatingText:txt forNumberOfLines:kNumberOfLines];
}

- (void)setTruncatingText:(NSString *) txt forNumberOfLines:(int) lines{
    string = txt;
    self.numberOfLines = 0;
    NSMutableString *truncatedString = [txt mutableCopy];
    if ([self numberOfLinesNeeded:truncatedString] > lines) {
        [truncatedString appendString:ellipsis];
        NSRange range = NSMakeRange(truncatedString.length - (ellipsis.length + 1), 1);
        while ([self numberOfLinesNeeded:truncatedString] > lines) {
            [truncatedString deleteCharactersInRange:range];
            range.location--;
        }
        [truncatedString deleteCharactersInRange:range];  //need to delete one more to make it fit
        CGRect labelFrame = self.frame;
        labelFrame.size.height = [@"A" sizeWithFont:self.font].height * lines;
        self.frame = labelFrame;
        self.text = truncatedString;
        self.userInteractionEnabled = YES;
        UITapGestureRecognizer *tapper = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(expand:)];
        [self addGestureRecognizer:tapper];
    }else{
        CGRect labelFrame = self.frame;
        labelFrame.size.height = [@"A" sizeWithFont:self.font].height * lines;
        self.frame = labelFrame;
        self.text = txt;
    }
}

#pragma Private Methods

-(int)numberOfLinesNeeded:(NSString *) s {
    float oneLineHeight = [@"A" sizeWithFont:self.font].height;
    float totalHeight = [s sizeWithFont:self.font constrainedToSize:CGSizeMake(self.bounds.size.width, CGFLOAT_MAX) lineBreakMode:NSLineBreakByWordWrapping].height;
    return nearbyint(totalHeight/oneLineHeight);
}

-(void)expand:(UITapGestureRecognizer *) tapper {
    int linesNeeded = [self numberOfLinesNeeded:string];
    CGRect labelFrame = self.frame;
    labelFrame.size.height = [@"A" sizeWithFont:self.font].height * linesNeeded;
    self.frame = labelFrame;
    self.text = string;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-12-05T04:45:42.970

由于这篇文章是从 2013 年开始的，我想给我的 Swift 实现来自@rdelmar 的非常好的解决方案。

考虑到我们正在使用 UILabel 的子类：

```
private let kNumberOfLines = 2
private let ellipsis = " MORE"

private var originalString: String! // Store the original text in the init

private func getTruncatingText() -> String {
    var truncatedString = originalString.mutableCopy() as! String

    if numberOfLinesNeeded(truncatedString) > kNumberOfLines {
        truncatedString += ellipsis

        var range = Range<String.Index>(
            start: truncatedString.endIndex.advancedBy(-(ellipsis.characters.count + 1)),
            end: truncatedString.endIndex.advancedBy(-ellipsis.characters.count)
        )

        while numberOfLinesNeeded(truncatedString) > kNumberOfLines {
            truncatedString.removeRange(range)

            range.startIndex = range.startIndex.advancedBy(-1)
            range.endIndex = range.endIndex.advancedBy(-1)
        }
    }

    return truncatedString
}

private func getHeightForString(str: String) -> CGFloat {
    return str.boundingRectWithSize(
        CGSizeMake(self.bounds.size.width, CGFloat.max),
        options: [.UsesLineFragmentOrigin, .UsesFontLeading],
        attributes: [NSFontAttributeName: font],
        context: nil).height
}

private func numberOfLinesNeeded(s: String) -> Int {
    let oneLineHeight = "A".sizeWithAttributes([NSFontAttributeName: font]).height
    let totalHeight = getHeightForString(s)
    return Int(totalHeight / oneLineHeight)
}

func expend() {
    var labelFrame = self.frame
    labelFrame.size.height = getHeightForString(originalString)
    self.frame = labelFrame
    self.text = originalString
}

func collapse() {
    let truncatedText = getTruncatingText()
    var labelFrame = self.frame
    labelFrame.size.height = getHeightForString(truncatedText)
    self.frame = labelFrame
    self.text = truncatedText
} 
```

与旧的解决方案不同，这对任何类型的文本属性（如 NSParagraphStyleAttributeName）都适用。

请随时批评和评论。再次感谢@rdelmar。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-27T14:03:16.583

有多种方法可以做到这一点，最优雅的是专门使用 CoreText，因为您可以完全控制如何显示文本。

这是一个混合选项，我们使用 CoreText 重新创建标签，确定它的结束位置，然后我们在正确的位置剪切标签文本字符串。

```
NSMutableAttributedString *atrStr = [[NSAttributedString alloc] initWithString:label.text];
NSNumber *kern = [NSNumber numberWithFloat:0];
NSRange full = NSMakeRange(0, [atrStr string].length);
[atrStr addAttribute:(id)kCTKernAttributeName value:kern range:full];

CTFramesetterRef framesetter = CTFramesetterCreateWithAttributedString((CFAttributedStringRef)atrStr);  

CGMutablePathRef path = CGPathCreateMutable();
CGPathAddRect(path, NULL, label.frame);
CTFrameRef frame = CTFramesetterCreateFrame(framesetter, CFRangeMake(0, 0), path, NULL);

CFArrayRef lines = CTFrameGetLines(frame);
CTLineRef line = (CTLineRef)CFArrayGetValueAtIndex(lines, label.numberOfLines-1);
CFRange r = CTLineGetStringRange(line); 
```

这为您提供了标签文本最后一行的范围。从那里，将它切开并将省略号放在您想要的位置是微不足道的。

第一部分创建一个属性字符串，它具有复制 UILabel 行为所需的属性（可能不是 100%，但应该足够接近）。然后我们创建一个framesetter和frame，并获取frame的所有行，从中我们提取标签的最后一个预期行的范围。

这显然是一种 hack，正如我所说，如果您想完全控制文本的外观，最好使用该标签的纯 CoreText 实现。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-06-14T04:29:56.097

我刚刚在 Swift 4 中编写了一个 UILabel 扩展，使用二进制搜索来加速子字符串计算

它最初是基于@paul-slm 的解决方案，但已经大相径庭

```
extension UILabel {

func getTruncatingText(originalString: String, newEllipsis: String, maxLines: Int?) -> String {

    let maxLines = maxLines ?? self.numberOfLines

    guard maxLines > 0 else {
        return originalString
    }

    guard self.numberOfLinesNeeded(forString: originalString) > maxLines else {
        return originalString
    }

    var truncatedString = originalString

    var low = originalString.startIndex
    var high = originalString.endIndex
    // binary search substring
    while low != high {
        let mid = originalString.index(low, offsetBy: originalString.distance(from: low, to: high)/2)
        truncatedString = String(originalString[..<mid])
        if self.numberOfLinesNeeded(forString: truncatedString + newEllipsis) <= maxLines {
            low = originalString.index(after: mid)
        } else {
            high = mid
        }
    }

    // substring further to try and truncate at the end of a word
    var tempString = truncatedString
    var prevLastChar = "a"
    for _ in 0..<15 {
        if let lastChar = tempString.last {
            if (prevLastChar == " " && String(lastChar) != "") || prevLastChar == "." {
                truncatedString = tempString
                break
            }
            else {
                prevLastChar = String(lastChar)
                tempString = String(tempString.dropLast())
            }
        }
        else {
            break
        }
    }

    return truncatedString + newEllipsis
}

private func numberOfLinesNeeded(forString string: String) -> Int {
    let oneLineHeight = "A".size(withAttributes: [NSAttributedStringKey.font: font]).height
    let totalHeight = self.getHeight(forString: string)
    let needed = Int(totalHeight / oneLineHeight)
    return needed
}

private func getHeight(forString string: String) -> CGFloat {
    return string.boundingRect(
        with: CGSize(width: self.bounds.size.width, height: CGFloat.greatestFiniteMagnitude),
        options: [.usesLineFragmentOrigin, .usesFontLeading],
        attributes: [NSAttributedStringKey.font: font],
        context: nil).height
}
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-05-29T11:44:29.503

[ResponsiveLabel](https://github.com/hsusmita/ResponsiveLabel)是 UILabel 的子类，它允许添加响应触摸的自定义截断标记。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-07-10T23:02:04.823

@paul-slm 上面的[答案](https://stackoverflow.com/a/34101383/3502608)是我最终使用的答案，但是我发现将一个可能很长的字符串的最后一个字符逐个剥离，直到标签符合所需的行数，这是一个非常密集的过程。*相反，一次将一个字符从原始字符串的开头复制到一个空白字符串*会更有意义，直到满足所需的行数。您还应该考虑不要一次踩一个字符，而是一次踩多个字符，以便更快地到达“最佳位置”。我替换`func getTruncatingText() -> String`为以下内容：

```
private func getTruncatingText() -> String? {
    guard let originalString = originalString else { return nil }

    if numberOfLinesNeeded(originalString) > collapsedNumberOfLines {
        var truncatedString = ""
        var toyString = originalString
        while numberOfLinesNeeded(truncatedString + ellipsis) != (collapsedNumberOfLines + 1) {
            let toAdd = toyString.startIndex..<toyString.index(toyString.startIndex, offsetBy: 5)
            let toAddString = toyString[toAdd]
            toyString.removeSubrange(toAdd)
            truncatedString.append(String(toAddString))
        }

        while numberOfLinesNeeded(truncatedString + ellipsis) > collapsedNumberOfLines {
            truncatedString.removeSubrange(truncatedString.index(truncatedString.endIndex, offsetBy: -1)..<truncatedString.endIndex)
        }

        truncatedString += ellipsis
        return truncatedString
    } else {
        return originalString
    }
} 
```

# c# - EntityFramework 执行存储过程时超时

> ID：15113469
> 
> 赞同：1
> 
> 时间：2013-02-27T13:37:08.340
> 
> 标签：c#, sql-server, entity-framework-5

我正在尝试在我的 SQL Server 2008 R2 上运行一个简单的存储过程。

当我使用 Studio Management 运行该过程时，不到一秒钟后我得到答案，使用 EF 运行时，2 分钟后出现超时异常（我将 CommandTimeout 设置为 2 分钟）。

当我使用 LINQ 时效果很好，但我更喜欢存储过程。

有谁知道可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T13:53:35.770

通常，当您使用除 Compact 之外的 SQL Server 版本时，您将需要在与实体框架的连接字符串中包含 MultipleActiveResultSets=True。这可能是你的问题。此外，正如其他人所建议的那样，您是否检查过 SQL Profiler 以查看正在发送到数据库的代码？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T13:43:20.827

这听起来很奇怪，特别是因为 EF 根据您的 Linq 语句进行了非常优化的查询，尝试使用 SQL 分析器查看发送到数据库的命令。

# java - log4j 记录一类

> ID：15113471
> 
> 赞同：0
> 
> 时间：2013-02-27T13:37:16.183
> 
> 标签：java, log4j

使用 JBoss 7、Java 6。

我的 log4j.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd">
<log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/">

<!-- general application log -->
<appender name="console" class="org.apache.log4j.ConsoleAppender">
      <param name="Target" value="System.out"/>
      <param name="Threshold" value="info"/>
      <layout class="org.apache.log4j.PatternLayout">
         <param name="ConversionPattern" value="%d{ABSOLUTE} %5p %c{1} --> %m%n"/>
        </layout>
    </appender>

<!-- additional logging -->
 <appender name="util" class="org.apache.log4j.RollingFileAppender">
        <param name="file" value="${user.home}/bs/logs/login.log"/>
        <param name="MaxFileSize" value="100KB"/>
        <param name="MaxBackupIndex" value="100"/>
        <layout class="org.apache.log4j.PatternLayout">
            <param name="ConversionPattern" value="%d{HH:mm:ss} %m%n"/>
        </layout>          
     </appender>

     <logger name="ru.bs.web" additivity="false">
        <appender-ref ref="console"/>
    </logger>

    <logger name="ru.bs.web.security">
        <appender-ref ref="util"/>
    </logger>

    <root>
        <level value="INFO"/>
    </root>

</log4j:configuration> 
```

问题 ：

我想通过 log4j 记录来自 ru.bs.web 包的所有应用程序使用控制台附加程序，并从文件中的 ru.bs.web.security 记录。

* * *

**如何从控制台附加程序中排除包 ru.bs.web.security ？**

我正在使用[如何使用 log4j.xml 配置 log4j 以根据类名附加到不同的日志文件中的配置？](https://stackoverflow.com/questions/880422/how-do-i-configure-log4j-using-log4j-xml-to-append-to-different-log-files-based)但它不起作用。

**我解决了！**

我的 XML 配置在这里：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd">
<log4j:configuration debug="false" xmlns:log4j="http://jakarta.apache.org/log4j/">

     <!-- general application log -->
    <appender name="console" class="org.apache.log4j.ConsoleAppender">
        <param name="Target" value="System.out"/>
        <param name="Threshold" value="info"/>
        <layout class="org.apache.log4j.PatternLayout">
            <param name="ConversionPattern" value="%d{ABSOLUTE} %5p %c{1} --> %m%n"/>
        </layout>
    </appender>

    <appender name="file" class="org.apache.log4j.RollingFileAppender">
        <param name="file" value="${user.home}/bs/logs/login.log"/>
        <param name="MaxFileSize" value="100MB"/>
        <param name="MaxBackupIndex" value="10000"/>        
        <layout class="org.apache.log4j.PatternLayout">
            <param name="ConversionPattern" value="%d{HH:mm:ss} %m%n"/>
        </layout>
    </appender>

    <logger name="ru.bs.web.security" additivity="false">
        <level value="LOGIN" class="ru.bs.web.util.LoginLevel"/>
        <appender-ref ref="file"/>
    </logger>

    <root>
        <level value="info"/>
        <appender-ref ref="console"/>
        <appender-ref ref="file"/>
    </root>

</log4j:configuration> 
```

和 ru.bs.web.util.LoginLevel 类：

```
public class LoginLevel extends Level {

    private static final long serialVersionUID = 1L;

    public static final int LOGIN_INT = INFO_INT + 100 ;
    public static final Level LOGIN = new LoginLevel(LOGIN_INT,"LOGIN",6);

    protected LoginLevel(int level, String levelStr, int syslogEquivalent) {
        super(level, levelStr, syslogEquivalent);
    }

} 
```

运行它 - log.log(LoginLevel.LOGIN, "from LOGGER!");

# mysql - 从 MySQL 中的两个表中选择数据

> ID：15113480
> 
> 赞同：11
> 
> 时间：2013-02-27T13:37:39.853
> 
> 标签：mysql, select, union, database-table

**我有什么：**下一个结构：

**table_zero**
-> ***id*** *(PRIMARY 自动递增)*
-> other

**table_1**
-> **id** *（表零 id 的外键）*
-> varchar(80) 示例值：(aahellobbb)
-> one_field

**table_2**
-> **id** *（表零 id 的外键）*
-> varchar(160) 示例值：(aaececehellobbb)
-> other_field

**我想要什么：**搜索并获取一个 (id,varchar) 数组，其中包含在 varchar 字段上与 LIKE '%str%' 匹配的所有匹配项。例如，如果我使用“hello”字符串进行搜索，那么我应该得到两个示例值及其各自的 id。这些 id 总是不同的，因为它们是对 PRIMARY KEY 的引用。

**我尝试了什么**：我尝试使用 UNION ALL，但在我的示例中它不适用于 LIMITS。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-27T13:43:30.673

通过使用`UNION`，您可能会获得多次具有相同 ID 的行。怎么用`LEFT JOIN`？

如果我理解了你的问题：

```
SELECT table_zero.id, table_1.varchar_field, table_2.varchar_field
FROM table_zero
  LEFT JOIN table_1 ON table_zero.id = table_1.id
  LEFT JOIN table_2 ON table_zero.id = table_2.id
WHERE table_1.varchar_field LIKE '%str%'
  OR table_2.varchar_field LIKE '%str%' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T13:59:44.363

试试这个

```
SELECT *
FROM 
(
SELECT table_zero.id AS ID, table_1.varchar_field AS field
FROM table_zero
  JOIN table_1 ON table_zero.id = table_1.id
WHERE table_1.varchar_field LIKE '%str%'
UNION
SELECT table_zero.id, table_2.varchar_field  AS field
FROM table_zero
  JOIN table_2 ON table_zero.id = table_2.id
) tbl
WHERE 
tbl.field LIKE '%str%' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-18T11:18:08.317

```
SELECT table_zero.id, table_1.varchar_field, table_2.varchar_field
FROM table_zero
  LEFT JOIN table_1 ON table_zero.id = table_1.id
  LEFT JOIN table_2 ON table_zero.id = table_2.id
WHERE table_1.varchar_field LIKE '%str%'
  OR table_2.varchar_field LIKE '%str%' 
```

# php - PHP中的占位符值导致问题

> ID：15113482
> 
> 赞同：0
> 
> 时间：2013-02-27T13:37:44.110
> 
> 标签：php, placeholder

我已经创建了一个房地产搜索表单，但是对于卧室数量，我有显示 Min 和 Max 的字段，直到用户输入数字。我使用此代码执行此操作；

```
<input type="text" name="room_no_min" id="room_no_min" value="Min" onblur="if(this.value=='')this.value='Min'" onFocus="if (this.value == 'Min') {this.value=''};" class="min_input">

<input type="text" name="room_no_max" id="room_no_max" value="Max" onblur="if(this.value=='')this.value='Max'" onFocus="if (this.value == 'Max') {this.value=''};" class="min_input"> 
```

但是，如果没有输入任何内容并显示结果，则 Min 框显示为空，而 Max 框继续正确显示 Max。要显示结果，我使用此代码；

```
 //check bedrooms
if(!empty($_GET["room_no_min"]) && is_numeric($_GET["room_no_min"])){
     $query[] = "'No_Bedrooms' >= '".$_GET["room_no_min"]."'";
     $room_min_val = $_GET["room_no_min"];
}
    if(!empty($_GET["room_no_max"])){
     $query[] = "'No_Bedrooms' <= '".$_GET["room_no_max"]."'";
     $room_max_val = $_GET["room_no_max"];
} 
```

其次是

```
<input type="text" name="room_no_min" id="room_no_min" value="<?php echo $room_min_val?>" value="Min" onblur="if(this.value=='')this.value='Min'" onFocus="if (this.value == 'Min') {this.value=''};" class="min_input">

<input type="text" name="room_no_max" id="room_no_max" value="<?php echo $room_max_val?>" value="Max" onblur="if(this.value=='')this.value='Max'" onFocus="if (this.value == 'Max') {this.value=''};" class="min_input"> 
```

我知道问题可能出在的地方是筛选 Min 值的 is_Numeric 部分，但似乎无法弄清楚如何使其工作。

请问有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T13:51:41.620

为什么不使用 HTML 标签占位符？

```
<input type="text" name="room_no_min" id="room_no_min" placeholder="Min" class="min_input"> 
```

这将为您省去很多麻烦。

# netbeans - Netbeans 7.3 的烦恼

> ID：15113484
> 
> 赞同：1
> 
> 时间：2013-02-27T13:37:47.387
> 
> 标签：netbeans, netbeans-7.3

我最近从 Eclipse 切换到 Netbeans 7.3 并遇到了很多怪癖，我想知道是否有其他人经历过它们和/或得到了解决方案。由于这些“问题”，我正在考虑再次切换回 Eclipse，但我对此表示怀疑，因为 NB 也有很多好东西！

这些是怪癖：

*   当创建一个新的 Java 类并在某个方法的某处打错字时，NB 不会直接识别/显示错误，而是在等待很长时间或重新启动 NB 之后。这也发生在现有的类上。
*   后台扫描任务有时卡在 100%
*   代码完成确实需要很长时间。甚至不要考虑重构或重命名一个类，因为扫描类路径需要超过 3 分钟（为什么，它是一个用于大声负载的新类）
*   热部署：更改并不总是与（Glassfish）服务器正确同步。有时需要完全取消部署和部署以反映源中所做的更改。
*   NB 操作我的 pom.xml 和 glassfish-web.xml：它向 pom.xml 添加了一个部署提示，并且还更改或删除了 glassfish-web.xml 中的上下文根。请停止这样做！
*   为什么 o 为什么我不能对我的整个项目进行“修复导入”。您*可以*对整个项目进行“组织导入”，但这不会添加缺少的导入。见[http://netbeans.org/bugzilla/show_bug.cgi?id=167031#c2](http://netbeans.org/bugzilla/show_bug.cgi?id=167031#c2)

在 Windows XP 上运行 NB 7.3，3GB RAM，2+GHz cpu 该项目是一个 Java 7 maven 项目，包含 12 个模块/子项目

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-11T22:30:08.800

我强烈建议您***不要***尝试安装 ScanOnDemand 插件。它完全破坏了我的 Netbeans，迫使我使用任务管理器来终止该进程。未找到现有项目；它们都被列为“无法识别的项目；缺少插件？”。我不得不重新安装 Netbeans。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-15T04:48:04.073

要寻找的一件事是允许的最大堆。尝试将“-J-Xmx2000M”添加到 Netbeans 启动。

参考：[设置堆大小](http://wiki.netbeans.org/FaqSettingHeapSize)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-10T10:10:28.473

我建议坚持使用你最喜欢的 IDE。Eclipse 仍然很流行，Juno 包表现良好，Kepler 已经可用。您可以尝试最新的软件包。

IntelliJ IDEA 看起来比其他 Java IDE 更好（重量轻、速度更快、与 SCM（源配置）工具的良好集成、易于云部署的可能性，除非您可以自由选择 IDE，无论您是大/小团队的一员, 否则不需要从一个转换到另一个。IntelliJ 是第一个为 Play 框架提供良好内置支持的 IDE

Google Android ADT 正在完全转向基于 IntelliJ IDEA 社区版的 AndroidStudio，以实现更快更好的 GUI 和应用程序开发。

作为一名 Java 开发人员，尝试使用其他 IDE 进行一些实验或出于任何原因让您想到它是不错的。

例如：Netbeans 带有 Java EE、Java7/Java2EE 中的示例应用程序，看起来更好，websockets 的很好的示例、Servlet3.0、NIO 示例等……但只要尝试它，或者如果它不起作用就忽略它。从数据库表生成实体非常容易，在 NetBeans 中创建 REST 端点它可能带有许多内置插件支持，支持各种 Java 框架，如 RESTful Web 服务框架、JSF2.x、Primefaces3.x、SpringMVC、Struts，但你可以不确定使用相同版本的框架。根据您的业务需求，某些插件可能无法正常工作。即使你对现有版本没问题，开发丰富的实时 UI 开发也不是很友好，因为 Netbeans 和 Primefaces，你需要手动创建 XHTML 模板。Netbeans 对 Glassfish 和 tomcat 提供了很好的支持，（其他服务器我不确定，但支持是内置的）。您可以轻松地进行远程部署。Netbeans 的 JavaEE 学习教程非常适合该主题的初学者。

Netbeans 也可作为压缩包提供，因此即使在 Windows 机器上也无需安装。

Eclipse 在Java RoboCode 学习工具（由IBM 很久以前发起开发）方面得到了更好的支持。

Netbeans 还对 HTML5、Groovy、PHP、C++ 提供了很好的支持（根据用户社区的帖子，因为我没有使用它们）。

# qtp - 如何在站点范围内使用 QTP 存储库对象？

> ID：15113487
> 
> 赞同：0
> 
> 时间：2013-02-27T13:37:59.070
> 
> 标签：qtp

有没有办法在任何页面上使用 QTP 对象存储库中的对象而不将它们绑定到特定页面？

这是一个例子：

我有一个带有顶级导航（主页、存档、论坛、关于、联系方式）的网站。QTP 将这些链接存储在特定页面下的对象存储库中。例如：

浏览器谷歌

-- 页面首页

---- 链接：首页

---- 链接：存档

---- 链接：论坛

---- 链接：关于

---- 链接：联系方式

现在我想`Link: Home`从 以外的页面访问`Homepage`，比如说从`Archive`页面。我需要将链接对象存储在`Archive`页面对象下还是有办法从任何页面访问链接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T14:16:11.190

您可以操作对象存储库中的描述属性。现在，您可能会看到带有 Name`Title`和 Value的 Homepage 对象的描述`Homepage`。您可以删除或更改此描述（您可以使用正则表达式作为通配符匹配）以匹配更多标题为“主页”的页面。有时您必须对作为此页面的父级的 Browser 对象执行相同的操作。

请注意：

*   当您扩大识别范围时，可能会匹配错误的页面，或者如果屏幕上有多个页面匹配相同的描述，则不会识别任何页面，因为它们不是唯一的。解决这个问题的方法：使用对两个页面都有效的唯一属性，或者作为最后的手段使用序号标识符
*   当您从页面学习新对象时，它们是在一个新页面下学习的（而不是您刚刚更改描述的那个），您必须合并两个页面。这可能是 QTP 的痛苦。

# jquery - 想根据某些条件显示正确的锂元素

> ID：15113491
> 
> 赞同：0
> 
> 时间：2013-02-27T13:38:13.807
> 
> 标签：jquery, html

我有这样的 html：ul 有几个 li 元素，带有删除按钮，

问题是：我需要用 CheckMark Image 符号显示正确的 li 元素，

假设我正在调用 ShowCheckMarkLi(Descriptions,Client)

那么只有 2 li 应该显示在带有 CheckmarkImage.Ico 的 UL 元素中，其他应该消失

html是这样的：-

```
 <ul>
            <li id="liRightDescriptions">
                <span>
                    <span>Descriptions</span>
                    <img class="removeImg" src="../Images/RemoveButton.ico" /></span>
            </li>
            <li id="liRightSpecialization">
                <span><span>Specialization</span><img style="display: none;" class="removeImg" src="../Images/RemoveButton.ico" /></span>
            </li>
            <li id="liRightOrgChart">
                <span>Org Chart</span><img style="display: none;" class="removeImg" src="../Images/RemoveButton.ico" />
            </li>
            <li id="liRightClient"><span>
                <span>Client</span>
                <img style="display: none;" class="removeImg" src="../Images/RemoveButton.ico" /></span></li>
            <li id="liRightAchievements"><span>
                <span>Achievements</span>
                <img class="removeImg" src="../Images/RemoveButton.ico" /></span></li>
            <li id="liRightMemberships"><span>
                <span>Memberships</span>
                <img class="removeImg" src="../Images/RemoveButton.ico" /></span></li>
            <li id="liRightGetRatings"><span>
                <span>Get Ratings</span>
                <img class="removeImg" src="../Images/RemoveButton.ico" /></span></li>
            <li id="liRightSkills"><span>
                <span>Skills</span>
                <img class="removeImg" src="../Images/RemoveButton.ico" /></span></li>
        </ul> 
```

我正在尝试这样：

```
 function ShowRightCheckMarkButton(Descriptions, Skills, Client, Achievements, Memberships, OrgChart, Specialization,GetRatings) {
            $('.divright').css("visibility", "visible");
            $('#listProjectRelated').empty();
            if (Achievements) {
                $('#listProjectRelated').append("<li id='liRightAchievements'><span><span>Achievements</span><img class='checkImg' src='../Images/Checkmark.ico'/></span></li>")
            }
            else
            {
                $('#listProjectRelated').append("<li id='liRightAchievements'><span><span>Achievements</span><img class='removeImg' src='../Images/RemoveButton.ico'/></span></li>")
            }
.
.
.
.
.
.

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T05:29:13.857

演示：http: [//jsfiddle.net/8YXDJ/](http://jsfiddle.net/8YXDJ/)

```
 function ShowLi(val) {
        $("#_ul li").css('display','none');
        $(val).each(function() { 
            var t = String(this);
            $("#_ul li span").filter(function() {
                return (jQuery.trim($(this).text()) == t);
            }).parent().css('display','');
        });
    }
ShowLi([ "Descriptions","Specialization","Skills" ]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T14:03:16.883

[在这里](http://jsfiddle.net/barney/44he8/)为您提供解决方案。您描述所需函数的方式的一个问题是您正在传递变量名——我假设这些是字符串。

在伪代码中，您想要实现的是（我认为）：

1.  抓住所有的清单。
2.  对于它们中的每一个，查看其文本是否匹配任何参数（'Client'、'Descriptions'）：
3.  如果是这样，请更改 li 中的图像以显示您提到的图标（并确保图像正在显示）。
4.  如果没有，请从列表中删除 li。

您要调用的函数的代码如下所示：

```
function ShowCheckMarkLi(){
    // Get all the lis
    var lis = document.getElementsByTagName('li');

    // Loop through them...
    for(var i = 0, l = lis.length; i < l; ++i){
        // And, for each, loop through the arguments
        for(var j = 0, m = arguments.length; j < m; ++j){
            // If the argument string is found in the li's text...
            if(lis[i].innerText.match(arguments[j])){
                // ...Find the image
                var img = lis[i].getElementsByTagName('img')[0]
                // ...Change its src attribute to replace all the text after the last slash with your filename
                img.src.replace(/[^\/]+$/, 'CheckmarkImage.Ico');
                // ...And make sure it's displayed.
                img.style.display = 'inline-block';
            }
            // Otherwise...
            else {
                // ...Remove it!
                lis[i].parentNode.removeChild(lis[i]);
            }
        }
    }
}

// Call your function with strings
ShowCheckMarkLi('Descriptions','Client'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T14:01:59.953

您的函数在以下行中引用了一个 id 'listProjectRelated'：

```
$('#listProjectRelated').empty(); 
```

这应该是 ul 元素的 id 吗？所以你的html的第一行应该是

```
<ul id="listProjectRelated"> 
```

# jqgrid - 如何在 jqgrid 中显示多个页面？

> ID：15113495
> 
> 赞同：1
> 
> 时间：2013-02-27T13:38:23.037
> 
> 标签：jqgrid

我正在从 cassandra 数据库中读取数据并在 jqGrid 中显示。但它在所有页面上显示相同的记录。我正在使用来自[http://javahunter.wordpress.com/2010/12/07/jqgrid-example/的代码](http://javahunter.wordpress.com/2010/12/07/jqgrid-example/)

这是我的 JSP 文件 -

```
enter code here

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>JQGrid Special</title>                
<!-- JAVASCRIPT FILES -->
<script src="thirdparty/jqgrid/jquery-1.3.1.js" type="text/javascript"></script>
<script src="thirdparty/jqgrid/jquery-ui-1.7.2.custom.min.js" type="text/javascript">                
</script>

<script src="thirdparty/jqgrid/jquery.layout.js" type="text/javascript"></script>
<script src="thirdparty/jqgrid/i18n/grid.locale-en.js" type="text/javascript"></script>
<script src="thirdparty/jqgrid/jquery.jqGrid.min.js" type="text/javascript"></script>
<script src="thirdparty/jqgrid/jquery.tablednd.js" type="text/javascript"></script>
<script src="thirdparty/jqgrid/jquery.contextmenu.js" type="text/javascript"></script>

<script src="thirdparty/jQueryPlugins/jQueryJsonPlugin/jquery.json-2.2.js"     
type="text/javascript"></script>

<script src="js/guestUser.js" type="text/javascript"></script>
<script src="js/modifyForm.js" type="text/javascript"></script>
<script src="js/addForm.js" type="text/javascript"></script>
<script src="js/commonFunctions.js" type="text/javascript"></script>
<script src="js/deleteRow.js" type="text/javascript"></script>
<script src="thirdparty/genPassword.js" type="text/javascript"></script>

<script src="thirdparty/jQueryPlugins/jQueryValidationplugin/jquery.validate.js"
type="text/javascript"></script>
<script src="thirdparty/jQueryPlugins/jQueryValidationplugin/jquery.validationEngine.js"      
type="text/javascript"></script>
<script src="thirdparty/jQueryPlugins/jQuerycustomalertsPlugin/jquery.alerts.js"   
type="text/javascript"></script>
<script   
src="thirdparty/jQueryPlugins/jQuerytextLimiterPlugin/jquery.inputlimiter.1.1.1.js"   
type= "text/javascript"></script>

<!-- CSS FILES -->
<link rel="stylesheet" type="text/css" media="screen"   
href="thirdparty/jQueryPlugins/jQuerycustomalertsPlugin/jquery.alerts.css"  />
<link rel="stylesheet" type="text/css" media="screen"   
href="thirdparty/jQueryPlugins/jQuerytextLimiterPlugin/jquery.inputlimiter.1.0.css"  />
<link rel="stylesheet" type="text/css" media="screen"   
href="thirdparty/jqgrid/css/themes/redmond/jquery-ui-1.7.1.custom.css" />
<link rel="stylesheet" type="text/css" media="screen" href="css/gugrid.css" />
<link rel="stylesheet" type="text/css" media="screen"   
href="thirdparty/jqgrid/css/ui.jqgrid.css" />
<link rel="stylesheet" type="text/css" media="screen"   
href="thirdparty/jQueryPlugins/jQueryValidationplugin/validationEngine.jquery.css"  />
<script>
        function fillGridOnEvent(){
            $("#jQGrid").html("<table id=\"list\"></table><div id=\"page\"></div>");
            jQuery("#list").jqGrid({
                url:'<%=request.getContextPath()%>/JQGridServlet?q=1&action=fetchData',
                datatype: "xml",
                height: 250,
                colNames:['Sr. No.','Student Name','Student Std.','Student RollNo.',"Action"],
                colModel:[
                    {name:'srNo',index:'srNo', width:90,sortable:true},
                    {name:'stdName',index:'stdName', width:130,sortable:false},
                    {name:'stdStd',index:'stdStd', width:100,sortable:false},
                    {name:'stdRollNo',index:'stdRollNo', width:180,sortable:false},
                    {name:'view',index:'view', width:100,sortable:false}
                ],
                multiselect: false,
                paging: true,
                rowNum:20,
                rowList:[10,20,30],
                pager: "#page",
                loadonce:false,
                recordtext:"View {0} - {1} of {10}",
                caption: "Student Details"
            }).navGrid('#page',{edit:false,add:false,del:false});
        }
        jQuery().ready(function (){
            //fillGrid();
            alert("ready");
        });
    </script>
</head>
<body onload="fillGridOnEvent();">
    <div id="jQGrid" align="center">
    </div>
</body>
</html> 
```

这是我的 servlet 文件 -

```
import java.io.IOException;
import java.io.PrintWriter;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

public class JQGridServlet extends HttpServlet {

protected void processRequest(HttpServletRequest request, HttpServletResponse response)
throws ServletException, IOException {        
    PrintWriter out = response.getWriter();
     try {

        if (request.getParameter("action").equals("fetchData")) {
            response.setContentType("text/xml;charset=UTF-8");                

            String status = request.getParameter("status");

            String rows = request.getParameter("rows");
            String page = request.getParameter("page");

            int totalPages = 0;
            int totalCount = 150;

            if (totalCount > 0) {
                if (totalCount % Integer.parseInt(rows) == 0) {
                    totalPages = totalCount / Integer.parseInt(rows);
                } else {
                    totalPages = (totalCount / Integer.parseInt(rows)) + 1;
                }

            } else {
                totalPages = 0;
            }
            System.out.println(totalPages);
            out.print("<?xml version='1.0' encoding='utf-8'?>\n");
            out.print("<rows>");
            out.print("<page>" + request.getParameter("page") + "</page>");

            out.print("<total>" + totalPages + "</total>");
            out.print("<records>" + 150 + "</records>");
            int srNo = 1;

            for (int i=0;i<150;i++) {
                out.print("<row id='" + i + "'>");
                out.print("<cell>" + srNo + "</cell>");
                out.print("<cell>Taher</cell>");
                out.print("<cell>8th</cell>");
                out.print("<cell>25</cell>");
                out.print("<cell><![CDATA[<a href='ViewStd.jsp'>View</a>]]></cell>");
                out.print("</row>");
                srNo++;                
            }
            out.print("</rows>");
        }

    } finally {
        out.close();
    }
} 

@Override
protected void doGet(HttpServletRequest request, HttpServletResponse response)
throws ServletException, IOException {
    processRequest(request, response);
} 

@Override
protected void doPost(HttpServletRequest request, HttpServletResponse response)
throws ServletException, IOException {
    processRequest(request, response);
}

@Override
public String getServletInfo() {
    return "Short description";
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T14:35:29.760

当您在 Servlet 中创建响应时，您应该*只包含应该*在页面上显示的行，而不是*所有*行。

因此，不要返回所有行：

```
for (int i = 0; i < totalRecords; i++) {
    printRecord(i);
} 
```

您应该只返回*所需*的行：

```
int firstRecord = (pageNumber - 1) * rowsPerPage;
int lastRecord = Math.min(firstRecord + rowsPerPage, totalRecords);
for (int i = firstRecord; i < lastRecord; i++) {
    printRecord(i);
} 
```

注意：有“pageNumber-1”是因为页码从 1 开始，而不是从 0 开始。“Math.min”在那里是因为*最后*一页的行数可能少于要求的行数；例如，如果您想要每页 10 行，并且总共有 32 条记录，则前三页将包含 10 行，但第四页只有 2 行。

顺便说一句，您链接的页面上还有另一个错误。确定“totalPages”的正确公式*不*应该是：

```
totalPages = (totalRecords / rowsPerPage) + 1; 
```

但反而：

```
totalPages = (totalRecords + rowsPerPage - 1) / rowsPerPage; 
```

为什么？如果总共有 30 条记录，并且您希望每页 10 行，则它只有 3 页，而不是文章中的 4 页。只有 31 条或更多记录才需要 4 页。

# java - 多核环境中的 BufferedReader

> ID：15113496
> 
> 赞同：7
> 
> 时间：2013-02-27T13:38:27.217
> 
> 标签：java, multicore, bufferedreader, inputstreamreader

我有 8 个文件。它们中的每一个大约为 1.7 GB。我正在将这些文件读入字节数组，并且该操作足够快。

然后按如下方式读取每个文件：

```
BufferedReader br=new BufferedReader(new InputStreamReader(new ByteArrayInputStream(data))); 
```

当使用单核按顺序处理时，大约需要 60 秒才能完成。但是，当将计算分布在 8 个独立的内核上时，每个文件需要的时间远远超过 60 秒。

由于数据都在内存中并且没有执行任何 IO 操作，我假设每个内核处理一个文件应该不超过 60 秒。因此，总共 8 个文件应该在 60 多秒内完成，但事实并非如此。

我是否缺少有关 BufferedReader 行为的信息？或上述代码中使用的任何阅读器。

值得一提的是，我首先使用此代码上传文件：

```
byte[] content=org.apache.commons.io.FileUtils.readFileToByteArray(new File(filePath)); 
```

整个代码如下所示：

```
For each file
 read the file into a byte[]
 add the byte[] to a list
end For
For each item in the list
 create a thread and pass a byte[] to it
end For 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T13:49:41.497

您实际上是如何“分配计算”的？是否涉及同步？您是否只是创建 8 个线程来读取 8 个文件？

你在什么平台上运行（linux、windows等）？在将单个进程从核心移动到核心以尝试平衡核心之间的负载之前，我已经从 Windows 调度程序中看到了看似奇怪的行为。这最终导致性能下降，而不仅仅是允许单个内核比其他内核使用得更多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T13:52:51.223

你的系统有多少内存？

8 x 1.7GB，+操作系统开销，可能意味着虚拟内存/分页必须发挥作用。这显然比 RAM 慢得多。

我很欣赏您说每个文件都在内存中，但是您实际上有 16GB 的可用 RAM，还是在抽象级别上还有更多的事情发生？

如果上下文切换也必须不断地切换页面，那将解释增加的时间。

# ruby-on-rails-3 - ActionController::TestCase 模拟 PayPal 购买

> ID：15113497
> 
> 赞同：3
> 
> 时间：2013-02-27T13:38:30.910
> 
> 标签：ruby-on-rails-3, unit-testing, paypal, functional-testing, activemerchant

有没有办法模拟购买 PaypalExpressGateway

我对 PayPal 付款处理使用了两个操作，第一个操作将用户带到 paypal 沙箱登录，并将重定向回我的应用程序以进行付款确认

但是该`PAYPAL_GATEWAY.purchase`方法不成功并返回错误消息`Payment has not been authorized by the user.`

好吧，我想这是由于跳过了授权用户购买的步骤

**有没有办法我可以伪造或模拟 PayPal 来接受交易？**

我`ActionController::TestCase`要测试这些操作`products#initiate_payment` `products#confirm_payment`将这些操作称为

```
post :initiate_payment, initiate_payment_action_params(@product)
get :confirm_payment, confirm_action_params(@product, product_purchased, paypal_token) 
```

并设置贝宝回调响应，然后重定向到贝宝登录

```
@setup_response = PAYPAL_GATEWAY.setup_purchase(amount, ip: request.remote_ip,
      items: [{name: @product.name, quantity: 1, description: @product.description, amount: amount}],
      currency: 'USD',
      return_url: url_for(action: 'confirm_payment',
                                 product_purchased: @product_purchased.id,                                   
                                 only_path: false),    
      cancel_return_url: url_for(action: 'index',
                                 product_purchased: @product_purchased.id,
                                 only_path: false))

redirect_to PAYPAL_GATEWAY.redirect_url_for(@setup_response.token) 
```

我已经在我的操作中处理了购买交易，我`products#confirm_payment`将 confirm_payment 的参数模拟为

```
{"product_purchased"=>"10", "token"=>"EC-91J25480XA799581U", "PayerID"=>"4QBC9Y658K6MA", "id"=>"55", "controller"=>"products", "action"=>"confirm_payment"}

get :confirm_payment, confirm_action_params(@product, product_purchased, paypal_token) 
```

PAYPAL_GATEWAY 的配置

`PAYPAL_GATEWAY ||= ActiveMerchant::Billing::PaypalExpressGateway.new(paypal_options)`

我还没有找到任何方法来实现这一点，所以这可能会帮助他们中的许多人......

除此以外的任何更好的解决方案将不胜感激

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T14:39:52.527

简短的回答是您必须经过并进行测试购买。另外，这将使您能够体验买家从头到尾的体验。您尝试跳过一两步是否有特殊原因？

一些商家也会只通过流程一次，并捕获发回的信息，然后使用相同的字符串创建一个表单页面，他们只是使用该页面将信息发布回他们的页面进行测试。这样他们就不必一遍又一遍地通过流程，但这可能会也可能不会取决于您的设置。

最典型的是选择选项 A 并从头到尾完成流程。

# android - 初始状态可绘制列表选择器不起作用

> ID：15113498
> 
> 赞同：0
> 
> 时间：2013-02-27T13:38:33.043
> 
> 标签：android, selector

这是我的列表视图代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:background="@color/darkgrey">
    <ListView
        android:id="@+id/list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:divider="#b5b5b5"
        android:dividerHeight="1dp"
        android:listSelector="@drawable/list_selector" />

</LinearLayout> 
```

这是列表选择器：

```
 <?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
    <item android:state_pressed="true"
    android:drawable="@drawable/gradient_bg_hover" />

  <item android:state_selected="true"
    android:state_pressed="false"
    android:drawable="@drawable/gradient_bg_hover" />

  <item android:drawable="@drawable/gradient_bg" />
</selector> 
```

我的目标是为列表项添加背景：初始（没有点击，没有焦点）-> 灰色背景。按下时 -> 蓝色背景。发布时 -> 灰色背景。

但最初的背景没有出现。打开应用程序和尚未单击项目时，不会显示灰色背景。有人知道如何解决这个问题吗？

java部分：

```
package com.example.whs;

import java.util.ArrayList;
import java.util.HashMap;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListView;

public class Index extends Activity {

    public static final Object TITLE = "title";
    public static final Object SUBTITLE = "subtitle";
    public static final Object THUMBNAIL = "thumbnail";
    protected static final String POSITION = null;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_index);

        // Back actionbar icon enable
        //ActionBar actionBar = getActionBar();
        //actionBar.setDisplayHomeAsUpEnabled(true);

        buildMenu();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.index, menu);
        return true;
    }

    //Builds the menu for listview
    public void buildMenu(){
        ArrayList<HashMap<String, String>> menu = new ArrayList<HashMap<String, String>>();
        //Arrays for info
        String[] menuTitleArray = {"Updates", "Gallerij"}; 
        String[] menuSubtitleArray = {"Bekijk updates", "Bekijk foto's en geef reacties", "Bekijk de updates"};
        String[] menuThumbnailArray = {"updates", "gallery"};
        for(int i=0; i < menuTitleArray.length; i++){
            // Build Hashmap for the item
            HashMap<String, String> item = new HashMap<String, String>();
            item.put((String) TITLE, menuTitleArray[i]);
            item.put((String) SUBTITLE, menuSubtitleArray[i]);
            item.put((String) THUMBNAIL, menuThumbnailArray[i]);
            menu.add(item);
        }

        // Add adapter to the list
        MenuAdapter adapter = new MenuAdapter(this, menu);
        ListView list = (ListView)findViewById(R.id.list);
        list.setAdapter(adapter);

        // Initialize the click event
        list.setOnItemClickListener(new OnItemClickListener(){
            @Override
            public void onItemClick(AdapterView<?> parent, View view, int position, long id){
                switch(position){
                case 0:
                    Intent intent = new Intent(Index.this, Updates.class);
                    startActivity(intent);
                }
            }
        });

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T15:00:55.273

我想这是因为您的列表行的布局 xml 有它自己的背景集。然后你的 listSelector 设置成功但被覆盖:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T14:04:16.670

使用你`android:listSelector="@drawable/list_selector"`的`custom item layout`你用于`ListView`物品。

就像你在`ListView`这里

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   android:orientation="vertical"
   android:background="@color/darkgrey">
    <ListView
        android:id="@+id/list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:divider="#b5b5b5"
        android:dividerHeight="1dp"
         />

</LinearLayout> 
```

它使用以下布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:listSelector="@drawable/list_selector">

</LinearLayout> 
```

**编辑**

您也可以使用选择器，例如

```
<item android:drawable="@drawable/button_bg_selected" android:state_selected="true"></item>
<item android:drawable="@drawable/button_bg_pressed" android:state_pressed="true"></item>
<item android:drawable="@drawable/button_bg_normal"></item> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T14:05:59.473

我猜您希望在列表行上添加选择器，而不是在 ListView 上：) 这是您的[链接](https://stackoverflow.com/questions/2562051/listview-item-background-via-custom-selector)。

# ruby-on-rails - 如何通过 mongoid 关联订购

> ID：15113502
> 
> 赞同：1
> 
> 时间：2013-02-27T13:38:39.500
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongoid3

我想通过具有关联值的集合进行排序。

例子：

> 我得到了一个帖子的多重关联，例如：
> 
> *   评论
> *   收视率
> *   附件

我如何通过这些关联订购帖子，例如：

> *   order_by most_commented
> *   order_by most_rated
> *   order_by most_associations ....

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-08T16:49:02.000

现在我可以回答这个问题了^^

在 Mongoid [3.1 版](https://github.com/mongoid/mongoid/blob/v3.1.0/CHANGELOG.md)中，活动记录功能“counter_cache”是可用的。例如，我收到了一篇带有引用评论的帖子：

```
class Post
  include Mongoid::Document
  field :body, type: String

  has_many :comments                                                                                                                                                                             
end

class Comment
  include Mongoid::Document
  field :body, type: String

  belongs_to :post, counter_cache: true                                                                                                                                                                             
end 
```

在这种情况下，每个帖子实例都有一个 comments_count 字段，其中包含帖子中引用的评论数。

现在您可以使用 comments_count 字段对您的帖子进行排序。请记住，此字段仅在至少存在一条评论时可用。或者在模型中使用默认值显式设置 comments_count 字段。

# ios - iAd 不显示在应用程序上

> ID：15113503
> 
> 赞同：1
> 
> 时间：2013-02-27T13:38:41.470
> 
> 标签：ios, iad

我有一个使用 iAD 网络的 iOS 应用程序。在法国下载该应用程序的用户可以看到 iAd 横幅，但我自己看不到任何 iAd 横幅。我是从英国来的。

在我的帐户中，我在过去 14 天内有以下统计数据：

*   51,668 个请求
*   56 次展示
*   0.11% 的填充率
*   0.12% 的 iAd 填充率
*   0.00% TTR

我也有一段时间没有任何收入。

我不明白的部分是我曾经从 iAd 网络获得收入，并且去年夏天我自己也看到了横幅。

我没有更改任何细节，我的合同很好，所以我不知道发生了什么。

有没有人对为什么会发生这种情况以及如何解决它有任何建议或想法？

谢谢

# c# - 如何在独立存储中检查文件的文件扩展名？

> ID：15113507
> 
> 赞同：1
> 
> 时间：2013-02-27T13:38:52.907
> 
> 标签：c#, windows-phone-7, isolatedstorage, file-extension

我需要在我的应用程序中填充 2 个列表。第一个列表应仅包含 .txt 文件，而第二个列表应包含 .jpg 文件。

现在我做的是这样的：

```
 foreach (string file in fileList)
                    {

                        if (file != "__ApplicationSettings")
                        {
                           ...
                        }
                     } 
```

但是我怎样才能检查文件扩展名？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T13:53:46.807

使用[Path.GetExtension](http://msdn.microsoft.com/en-us/library/system.io.path.getextension.aspx)方法：

```
if (Path.GetExtension(file) != ".jpg")
{
    ...
} 
```

# jquery - JQuery on Change 事件处理程序在 CoffeeScript 中不起作用

> ID：15113509
> 
> 赞同：1
> 
> 时间：2013-02-27T13:38:57.513
> 
> 标签：jquery, coffeescript

我正在尝试激活函数调用并传递文件选择事件。以下非 JQuery 工作正常：

```
class AddBTS
  constructor: () ->

    document.getElementById('upload_JSON').addEventListener('change', @select_json_changehandler, false)

  select_json_changehandler: (evt) =>
    console.log 'evt = ', evt 
```

我尝试了以下方法，它执行函数调用，但 evt 未定义：

```
class AddBTS
  constructor: () ->

    $('body').find('#upload_JSON').on 'change', => @select_json_changehandler()

  select_json_changehandler: (evt) =>
    console.log 'evt = ', evt 
```

我怎样才能正确地使用 JQuery 做第一个代码示例 - 非常感谢任何帮助:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T14:59:29.190

在您的第二个示例中，您正在为更改事件连接一个不同的事件处理程序，并让该事件处理程序调用 select_json_changehandler。您需要有一个参数化函数作为事件处理程序，它将事件作为参数接收，然后将该事件作为参数传递给 select_json_changehandler。

```
class AddBTS
    constructor: () ->
        $('body').find('#upload_JSON').on 'change', (evt) => @select_json_changehandler evt

    select_json_changehandler: (evt) =>
        console.log 'evt = ', evt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T17:57:24.770

在您的第一个示例中，您`@select_json_changehandler`作为回调传递。但是在第二个示例中，您将其包装在一个匿名函数 ( `=> @select_json_changehandler()`) 中，这会阻止传递参数。如果您传递与第一个相同的回调：

```
$('body').find('#upload_JSON').on 'change', @select_json_changehandler 
```

它应该按预期工作。

# iphone - 通过 IMAP 编辑 iOS 笔记

> ID：15113512
> 
> 赞同：5
> 
> 时间：2013-02-27T13:39:01.093
> 
> 标签：iphone, ios, email, imap, email-client

我想从服务器端以编程方式创建和编辑由 iOS Note 应用程序创建的笔记。

我可以在我的 IMAP 文件夹中看到由 iOS 设备创建的笔记，但我所做的任何更改都不会显示在 iOS 设备上。

这样的 API 存在吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:05:38.200

好吧，我使用 Thunderbird 的 HeaderTools 插件来完成这个，所以这当然是可能的。笔记应用程序会立即获取更改。
（我不是一个非常令人满意的解决方案，因为 HeaderTools 只允许在其自己的查看器/编辑器中编辑为 html 源代码）
我想你可以启动 wireshark 来精确调查发生了什么。草稿理论听起来很合理。如果我需要深入研究这个，我想我会直接用 python 试试，而不是在谷歌上搜索几个小时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-27T14:03:21.370

我只是想知道自己并尝试用 mutt 编辑笔记。由于电子邮件（无论如何通过 imap）不应该被编辑（正如@CodaFi 正确指出的那样），mutt 将注释复制到编辑器中，将其保存为新的“电子邮件”并删除旧的。编辑后的笔记会很好地同步到 Notes.app。

注意：便条/邮件的标题/主题来自正文的第一行。

PS（我认为它不会影响上述内容的有效性）：我的设置是私有 IMAP 服务器 & mbsync 与本地 Maildir & mutt。

# c# - Why are these linq outputs different?

> ID：15113514
> 
> 赞同：35
> 
> 时间：2013-02-27T13:39:03.947
> 
> 标签：c#, linq

1st statement:

```
IEnumerable<char> query = "Not what you might expect";

query = query.Where (c => c != 'a');
query = query.Where (c => c != 'e');
query = query.Where (c => c != 'i');
query = query.Where (c => c != 'o');
query = query.Where (c => c != 'u'); 
```

Output of `String.Join("", query)`: `"Nt wht y mght xpct"`

2nd statement:

```
query = "Not what you might expect";

foreach (char vowel in "aeiou")
    query = query.Where (c => c != vowel); 
```

Output of `String.Join("", query)`: `"Not what yo might expect"`

The outputs from these statements are different. Can any one explain why?

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-02-27T13:41:34.540

If you're using a C# version lower than 5.0 (where this was fixed), this is the reason:

The lambda in your query captures the loop variable `vowel`.
Because Linq likes to use deferred execution, the value of this reference is not read until the query gets executed (by iterating over it), which is after the `foreach` loop has finished. At that point, the most recent value of `vowel` is `u`, which is why you get the unexpected output.

You can get around this by copying the value to another temporary variable (or by upgrading to C# 5.0).

Try this:

```
query = "Probably what you might expect";

foreach (char vowel in "aeiou") {
    char currentVowel = vowel;
    query = query.Where (c => c != currentVowel );
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-02-27T13:42:57.070

这是因为您在变量上创建了一个闭包，该`vowel`变量会随时间变化。将其值存储在一个单独的变量中，它将起作用：

```
query = "Not what you might expect";

foreach (char vowel in "aeiou")
{
    var current = vowel;
    query = query.Where (c => c != current);
} 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-02-27T13:41:47.210

Read about closure. If you use `.NET 4.0` and below you will get different result. In `.NET 4.5` this behavior is changed(fixed). See also how compiler expand `foreach`.

# servicestack - 需要 HTTP 标头的 REST 服务的推荐模式？

> ID：15113517
> 
> 赞同：2
> 
> 时间：2013-02-27T13:39:12.740
> 
> 标签：servicestack

我正在实现一个 RESTful 服务，该服务将由 Dojo 框架的[RestStore 使用](http://dojotoolkit.org/reference-guide/1.8/dojo/store/JsonRest.html)，这将允许将服务绑定到各种小部件，如交互式网格或预先输入的 ajax 选择。

`RestStore`想要发送和接收 HTTP`Range`和`Content-Range`标头，以便将查询结果限制在特定子范围内。

ServiceStack（新 API）中将 HTTP 标头作为服务的一部分做出反应的最佳实践模式是什么？通常，服务方法 like`Get`无法访问 HTTP 标头，除非我错过了备用 API。

我看到的当前方式是实现一个属性，例如

```
 public class RangeSupporter : Attribute, IHasRequestFilter, IHasResponseFilter 
```

它将根据请求解析标头，并在响应时写入标头。然后将为该过滤器标记 DTO。

过滤器会将值（例如“First”和“Last”）传入和传出 DTO。但是，要知道 DTO 甚至具有这样的属性，它必须具有一些标记接口，例如

```
interface IHasRangeSupport {
    int First { set; get; }
    int Last { set; get; }
    int Total { set; get; }
} 
```

这样过滤器就可以将信息传入和传出 DTO，代码类似于：

```
 var r = request as IHasRangeSupport;
  if (r != null) {
      /// Access the DTO attributes for the range parameters
  } 
```

这看起来像是很多仪式，并且是一个非常尴尬的实施。

在实现 REST 服务时，是否有更好的模式来访问 HTTP 标头？

在我的特定用例中，不需要支持非 REST 端点（如 SOAP）。只有 HTTP 端点很重要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T17:16:42.927

**ServiceStack（新 API）中将 HTTP 标头作为服务的一部分做出反应的最佳实践模式是什么？**

我相信你可以在你的服务类中获得标题......

```
public class FooService : Service
{
    public object Get(Foo reqeust)
    {
       //get header
       var h1 = base.RequestContext.GetHeader("headerName");
       //get header differently
       var h2 = base.Request.Headers.Get("headerName");
    }
} 
```

# c# - Insert Permission denied when running from IIS

> ID：15113518
> 
> 赞同：0
> 
> 时间：2013-02-27T13:39:16.760
> 
> 标签：c#, asp.net, iis

Hi I am getting an Error while Inserting Record into databse while ruuning the Project from IIS and i will run through Visual Studio it is working well.

```
The INSERT permission was denied on the object 'tblPageInfo', database 'master', schema 'dbo'.

Description: An unhandled exception occurred during the execution of the current web  request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.Data.SqlClient.SqlException: The INSERT permission was denied on the object 'tblPageInfo', database 'master', schema 'dbo'.

Source Error: 

Line 43:             string s = "insert into tblPageInfo values('" + PageName + "','" +   Url + "','" + PageTitle + "','" + CanonicalUrl + "','" + MetaDescription + "','" +   MetaKeyword + "','" + H1Text + "','" + H2Text + "')";
Line 44:             SqlCommand cmd = new SqlCommand(s, con);
Line 45:             cmd.ExecuteNonQuery();
Line 46:             con.Close();
Line 47:         }

Source File: D:\Kartik\Materials\CMS\CMS\AddPage.aspx.cs    Line: 45 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T13:42:20.970

您的网站将在没有权限的用户（应用程序池的权限）的上下文中运行，可能是 NetworkService 或类似的。解决方案是创建一个对您的数据库具有相关权限的用户，并在连接字符串中明确声明凭据。

关于不做什么的建议*是*这样的。无论多么受诱惑，都不要向用户提供在这些权限下运行应用程序以使用集成安全性。这是不好的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T13:42:53.500

你在 web.config 中检查了 Visual Studio 和 IIS 中的连接字符串吗

# visual-studio-2010 - 单击打开项目时，我可以让 VS2010 查看 VSS 吗？

> ID：15113521
> 
> 赞同：1
> 
> 时间：2013-02-27T13:39:49.817
> 
> 标签：visual-studio-2010

如果我没有打开解决方案，我的 VS2010 环境会出现起始页。从那里，我可以打开最近项目列表中的几个项目之一，或者我可以从左上角的链接/按钮打开一个项目。当我这样做时，我会看到一个指向我的 C:\workingvss 的 Open Project 对话框（这是我团队中的每个人都遵循的关于我们的代码在本地的位置的约定）。但我几乎总是想浏览 VSS 数据库中的项目，我必须在对话框的左侧窗格中向上滚动才能看到“Microsoft Visual SourceSafe”。我不能让它从窗格的顶部开始，这似乎很愚蠢，但如果有办法，我无法弄清楚如何。

所以我转向你。每次我想打开一个项目时，我能做些什么来避免这种点击和拖动吗？

我意识到它默认为通过工具>选项>项目和解决方案>常规设置的项目位置参数。但我认为我需要保持原样，因为我*确实*希望在结帐时将我的东西保存到该位置。

我还认为，如果我从 C: 的根目录中删除了十个（在我的情况下）文件夹，左窗格将显示我的 VSS 选项，但我认为这在这台机器的情况下甚至是不可能的，也不是一个合理的解决方案任何情况。

[我的问题与如何更改默认打开文件对话框路径](https://stackoverflow.com/questions/3742723/how-to-change-the-default-open-file-dialog-path)有关，但不重复。

谢谢你的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T20:46:38.470

这不是一个很好的答案，但这是我目前没有技术的解决方法。如果我使“打开项目”对话框足够大以容纳它要显示的所有行，那么我的 VSS 行是可见的，我不必导航到它。幸运的是，Visual Studio 会记住从使用到使用的大小。

# d3.js - 多线图 D3.js

> ID：15113523
> 
> 赞同：0
> 
> 时间：2013-02-27T13:39:54.170
> 
> 标签：d3.js

根据此示例，我正在尝试在图表上绘制多条线：

[http://bl.ocks.org/mbostock/3884955](http://bl.ocks.org/mbostock/3884955)

正在使用 PHP 从 mySQL 数据库中提取数据 - 输出格式如下：

```
 [{"dateTimeTaken":"2013-02-21 07:39:29","reading":"12.2","parameterType":"Flouride"},
 {"dateTimeTaken":"2013-02-21 07:39:34","reading":"12.01","parameterType":"Temperature"}, 
 {"dateTimeTaken":"2013-02-2107:39:39","reading":"12.01","parameterType":"PH"},...etc. 
```

我想要每个 parameterType 一行，但没有任何运气让它工作。目前收到错误“Problem Parsing d”并且根本没有显示任何行。

[https://gist.github.com/Majella/ab32fe0151fd487da3f6](https://gist.github.com/Majella/ab32fe0151fd487da3f6)

如果有人能帮助我了解我哪里出错了，我将不胜感激？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T14:20:23.303

问题出在你的`data.map`调用中——它应该在结果数组中返回你想要的修改后的对象。要修复，只需修改`d`并返回它。

[这里](http://jsfiddle.net/3azQX/)的工作示例。

# erlang - stop and run again an application in erlang

> ID：15113527
> 
> 赞同：0
> 
> 时间：2013-02-27T13:39:59.673
> 
> 标签：erlang

have an application developed in Erlang and to run this application I need to do: **./build.sh && ./deploy.sh && ./erl_start.sh**

I want to make a function that will do the same thing as **Ctrl + C** and run **./build.sh && ./deploy.sh && ./erl_start.sh**

**meaning stop the application and run again this application**

I try with this function :

```
verify(Val)->
    if Val =:=40 ->
Pid = self(), 

io:format("~w~n",[Pid]),
spawn(fun() -> exit(Pid, kill) end),
    LsOut = os:cmd("./build.sh && ./deploy.sh && ./erl_start.sh");

    true -> ok

    end. 
```

and when I test this function I have this error :

```
1> model:verify(40).
<0.144.0>
** exception exit: killed 
```

I test this command :

```
1> [io:format("~p : ~p~n",[Pid,erlang:process_info(Pid,current_function)]) || Pid <- processes()].
<0.0.0> : {current_function,{init,loop,1}}
<0.3.0> : {current_function,{erl_prim_loader,loop,3}}
<0.5.0> : {current_function,{gen_event,fetch_msg,5}}
<0.6.0> : {current_function,{gen_server,loop,6}}
<0.8.0> : {current_function,{application_master,main_loop,2}}
<0.9.0> : {current_function,{application_master,loop_it,4}}
<0.10.0> : {current_function,{gen_server,loop,6}}
<0.11.0> : {current_function,{gen_server,loop,6}}
<0.12.0> : {current_function,{gen_server,loop,6}}
<0.13.0> : {current_function,{global,loop_the_locker,1}}
<0.14.0> : {current_function,{global,collect_deletions,2}}
<0.15.0> : {current_function,{global,loop_the_registrar,0}}
<0.16.0> : {current_function,{gen_server,loop,6}}
<0.18.0> : {current_function,{gen_server,loop,6}}
<0.19.0> : {current_function,{gen_server,loop,6}}
<0.20.0> : {current_function,{code_server,loop,1}}
<0.21.0> : {current_function,{gen_server,loop,6}}
<0.22.0> : {current_function,{standard_error,server_loop,1}}
<0.23.0> : {current_function,{gen_server,loop,6}}
<0.24.0> : {current_function,{user_drv,server_loop,5}}
<0.25.0> : {current_function,{group,server_loop,3}}
<0.26.0> : {current_function,{group,server_loop,3}}
<0.27.0> : {current_function,{shell,shell_rep,4}}
<0.28.0> : {current_function,{gen_server,loop,6}}
<0.29.0> : {current_function,{gen_server,loop,6}}
<0.36.0> : {current_function,{application_master,main_loop,2}}
<0.37.0> : {current_function,{application_master,loop_it,4}}
<0.38.0> : {current_function,{gen_server,loop,6}}
<0.39.0> : {current_function,{gen_event,fetch_msg,5}}
<0.40.0> : {current_function,{gen_server,loop,6}}
<0.41.0> : {current_function,{gen_server,loop,6}}
<0.44.0> : {current_function,{gen_server,loop,6}}
<0.45.0> : {current_function,{mnesia_locker,loop,1}}
<0.46.0> : {current_function,{gen_server,loop,6}}
<0.47.0> : {current_function,{mnesia_tm,doit_loop,1}}
<0.48.0> : {current_function,{gen_server,loop,6}}
<0.49.0> : {current_function,{gen_server,loop,6}}
<0.53.0> : {current_function,{gen_server,loop,6}}
<0.54.0> : {current_function,{gen_server,loop,6}}
<0.63.0> : {current_function,{disk_log,loop,1}}
<0.65.0> : {current_function,{gen_server,loop,6}}
<0.66.0> : {current_function,{gen_server,loop,6}}
<0.67.0> : {current_function,{gen_server,loop,6}}
<0.68.0> : {current_function,{gen_server,loop,6}}
<0.69.0> : {current_function,{mnesia_late_loader,loop,1}}
<0.105.0> : {current_function,{application_master,main_loop,2}}
<0.106.0> : {current_function,{application_master,loop_it,4}}
<0.107.0> : {current_function,{gen_server,loop,6}}
<0.108.0> : {current_function,{gen_server,loop,6}}
<0.109.0> : {current_function,{gen_server,loop,6}}
<0.110.0> : {current_function,{gen_server,loop,6}}
<0.111.0> : {current_function,{gen_server,loop,6}}
<0.112.0> : {current_function,{gen_server,loop,6}}
<0.113.0> : {current_function,{gen_server,loop,6}}
<0.114.0> : {current_function,{gen_server,loop,6}}
<0.115.0> : {current_function,{gen_server,loop,6}}
<0.117.0> : {current_function,{gen_server,loop,6}}
<0.118.0> : {current_function,{gen_server,loop,6}}
<0.119.0> : {current_function,{gen_server,loop,6}}
<0.120.0> : {current_function,{gen_server,loop,6}}
<0.121.0> : {current_function,{prim_inet,accept0,2}}
<0.123.0> : {current_function,{gen_server,loop,6}}
<0.124.0> : {current_function,{gen_server,loop,6}}
<0.125.0> : {current_function,{gen_server,loop,6}}
<0.126.0> : {current_function,{gen_server,loop,6}}
<0.127.0> : {current_function,{prim_inet,accept0,2}}
<0.129.0> : {current_function,{gen_server,loop,6}}
<0.130.0> : {current_function,{gen_server,loop,6}}
<0.131.0> : {current_function,{gen_server,loop,6}}
<0.132.0> : {current_function,{gen_server,loop,6}}
<0.133.0> : {current_function,{prim_inet,accept0,2}}
<0.135.0> : {current_function,{gen_server,loop,6}}
<0.136.0> : {current_function,{gen_server,loop,6}}
<0.137.0> : {current_function,{gen_server,loop,6}}
<0.138.0> : {current_function,{gen_server,loop,6}}
<0.139.0> : {current_function,{prim_inet,accept0,2}}
<0.140.0> : {current_function,{gen_server,loop,6}}
<0.143.0> : {current_function,{os,start_port_srv_loop,2}}
<0.144.0> : {current_function,{erl_eval,do_apply,5}}
[ok,ok,ok,ok,ok,ok,ok,ok,ok,ok,ok,ok,ok,ok,ok,ok,ok,ok,ok,
 ok,ok,ok,ok,ok,ok,ok,ok,ok,ok|...] 
```

and also I test this command :

```
1> [io:format("~p : ~p~n",[Pid,erlang:process_info(Pid,initial_call)]) || Pid <- processes()]. 
<0.0.0> : {initial_call,{otp_ring0,start,2}}
<0.3.0> : {initial_call,{erlang,apply,2}}
<0.5.0> : {initial_call,{proc_lib,init_p,5}}
<0.6.0> : {initial_call,{erlang,apply,2}}
<0.8.0> : {initial_call,{proc_lib,init_p,5}}
<0.9.0> : {initial_call,{application_master,start_it,4}}
<0.10.0> : {initial_call,{proc_lib,init_p,5}}
<0.11.0> : {initial_call,{proc_lib,init_p,5}}
<0.12.0> : {initial_call,{proc_lib,init_p,5}}
<0.13.0> : {initial_call,{erlang,apply,2}}
<0.14.0> : {initial_call,{erlang,apply,2}}
<0.15.0> : {initial_call,{erlang,apply,2}}
<0.16.0> : {initial_call,{proc_lib,init_p,5}}
<0.18.0> : {initial_call,{proc_lib,init_p,5}}
<0.19.0> : {initial_call,{proc_lib,init_p,5}}
<0.20.0> : {initial_call,{erlang,apply,2}}
<0.21.0> : {initial_call,{proc_lib,init_p,5}}
<0.22.0> : {initial_call,{standard_error,server,2}}
<0.23.0> : {initial_call,{proc_lib,init_p,5}}
<0.24.0> : {initial_call,{user_drv,server,2}}
<0.25.0> : {initial_call,{group,server,3}}
<0.26.0> : {initial_call,{group,server,3}}
<0.27.0> : {initial_call,{erlang,apply,2}}
<0.28.0> : {initial_call,{proc_lib,init_p,5}}
<0.29.0> : {initial_call,{proc_lib,init_p,5}}
<0.36.0> : {initial_call,{proc_lib,init_p,5}}
<0.37.0> : {initial_call,{application_master,start_it,4}}
<0.38.0> : {initial_call,{proc_lib,init_p,5}}
<0.39.0> : {initial_call,{proc_lib,init_p,5}}
<0.40.0> : {initial_call,{proc_lib,init_p,5}}
<0.41.0> : {initial_call,{proc_lib,init_p,5}}
<0.44.0> : {initial_call,{proc_lib,init_p,5}}
<0.45.0> : {initial_call,{proc_lib,init_p,5}}
<0.46.0> : {initial_call,{proc_lib,init_p,5}}
<0.47.0> : {initial_call,{proc_lib,init_p,5}}
<0.48.0> : {initial_call,{proc_lib,init_p,5}}
<0.49.0> : {initial_call,{proc_lib,init_p,5}}
<0.53.0> : {initial_call,{proc_lib,init_p,5}}
<0.54.0> : {initial_call,{proc_lib,init_p,5}}
<0.63.0> : {initial_call,{proc_lib,init_p,5}}
<0.65.0> : {initial_call,{proc_lib,init_p,5}}
<0.66.0> : {initial_call,{proc_lib,init_p,5}}
<0.67.0> : {initial_call,{proc_lib,init_p,5}}
<0.68.0> : {initial_call,{proc_lib,init_p,5}}
<0.69.0> : {initial_call,{proc_lib,init_p,5}}
<0.105.0> : {initial_call,{proc_lib,init_p,5}}
<0.106.0> : {initial_call,{application_master,start_it,4}}
<0.107.0> : {initial_call,{proc_lib,init_p,5}}
<0.108.0> : {initial_call,{proc_lib,init_p,5}}
<0.109.0> : {initial_call,{proc_lib,init_p,5}}
<0.110.0> : {initial_call,{proc_lib,init_p,5}}
<0.111.0> : {initial_call,{proc_lib,init_p,5}}
<0.112.0> : {initial_call,{proc_lib,init_p,5}}
<0.113.0> : {initial_call,{proc_lib,init_p,5}}
<0.114.0> : {initial_call,{proc_lib,init_p,5}}
<0.115.0> : {initial_call,{proc_lib,init_p,5}}
<0.117.0> : {initial_call,{proc_lib,init_p,5}}
<0.118.0> : {initial_call,{proc_lib,init_p,5}}
<0.119.0> : {initial_call,{proc_lib,init_p,5}}
<0.120.0> : {initial_call,{proc_lib,init_p,5}}
<0.121.0> : {initial_call,{proc_lib,init_p,5}}
<0.123.0> : {initial_call,{proc_lib,init_p,5}}
<0.124.0> : {initial_call,{proc_lib,init_p,5}}
<0.125.0> : {initial_call,{proc_lib,init_p,5}}
<0.126.0> : {initial_call,{proc_lib,init_p,5}}
<0.127.0> : {initial_call,{proc_lib,init_p,5}}
<0.129.0> : {initial_call,{proc_lib,init_p,5}}
<0.130.0> : {initial_call,{proc_lib,init_p,5}}
<0.131.0> : {initial_call,{proc_lib,init_p,5}}
<0.132.0> : {initial_call,{proc_lib,init_p,5}}
<0.133.0> : {initial_call,{proc_lib,init_p,5}}
<0.135.0> : {initial_call,{proc_lib,init_p,5}}
<0.136.0> : {initial_call,{proc_lib,init_p,5}}
<0.137.0> : {initial_call,{proc_lib,init_p,5}}
<0.138.0> : {initial_call,{proc_lib,init_p,5}}
<0.139.0> : {initial_call,{proc_lib,init_p,5}}
<0.140.0> : {initial_call,{proc_lib,init_p,5}}
<0.143.0> : {initial_call,{erlang,apply,2}}
<0.144.0> : {initial_call,{erlang,apply,2}}
[ok,ok,ok,ok,ok,ok,ok,ok,ok,ok,ok,ok,ok,ok,ok,ok,ok,ok,ok,
 ok,ok,ok,ok,ok,ok,ok,ok,ok,ok|...] 
```

I try with this function :

```
verify(Val) ->
    erlang:halt();

verify(_) ->
    % do nothing

   ok. 
```

and when I test I have this result :

```
1>  model:verify(40).
root@ubuntu:/home/afif/Desktop/ttest/erlang# 
```

it only exit the VM

but as I already said I want to **stop the application and run again this application**

and for this I try with :

```
verify(Val) ->
        erlang:halt(),
    LsOut = os:cmd("./build.sh && ./deploy.sh && ./erl_start.sh");
    verify(_) ->
        % do nothing

       ok. 
```

but I have the same result like the previous code

**what I've done is half of work remains how to run the program again**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T17:39:49.643

如果您只想退出 VM 以重新启动，可以使用函数 erlang:halt() 或 erlang:halt(Status)。从文档中：

> **停（）**
> 
> 停止 Erlang 运行时系统并指示正常退出调用环境。没有返回值。
> 
> > **停（）。**
> > 
> > > os_prompt%
> > 
> > **停止（状态）**
> > 
> > 类型：
> > 
> > > **状态 = 整数（） >= 0 | 细绳（）**
> 
> 状态必须是非负整数或字符串。停止 Erlang 运行时系统。没有返回值。如果 Status 是一个整数，它作为 Erlang 的退出状态返回给调用环境。如果 Status 是一个字符串，则生成一个以 String 为口号的 Erlang 故障转储，然后以非零状态码退出。
> 
> 请注意，在许多平台上，操作系统仅支持状态代码 0-255。

所以你的代码可能是：

```
verify(40) ->
    erlang:halt();
verify(_) ->
    % do nothing
    ok. 
```

但正如我在上一个问题中告诉你的那样，我认为你的方向并不好。

# breeze - 微风控制器没有返回正确的响应

> ID：15113535
> 
> 赞同：0
> 
> 时间：2013-02-27T13:40:12.090
> 
> 标签：breeze

我有一个简单的模型，它是 Entity Framework 5 Code First，ActiveEntity 是一个具有 int Id 属性和 bool IsActive 字段的抽象类。

```
public class License:ActiveEntity
{
    public string LicenseName { get; set; }

    public LicenseType LicenseType { get; set; }

    public State State { get; set; }

    public DateTime DateIssued { get; set; }

    public int ValidFor { get; set; }

}

public class LicenseType:ActiveEntity 
{
    [StringLength(100),Required]
    public string Description { get; set; }
}
public class State:ActiveEntity
{
    [StringLength(2)]
    [Required]
    public string Name { get; set; }

    [Display(Name = "Long Name")]
    [Required, StringLength(25)]
    public string LongName { get; set; }
} 
```

Breeze 在 LicenseController 上调用 GetLicenses：

```
[BreezeController]
public class LicenseController : ApiController
{
    private readonly EFContextProvider<LicensingContext> db = new EFContextProvider<LicensingContext>();

    [HttpGet]
    public string Metadata()
    {
        return db.Metadata();
    }

    [HttpPost]
    public SaveResult SaveChanges(JObject saveBundle)
    {
        return db.SaveChanges(saveBundle);
    }

    [HttpGet]
    public IQueryable<License> GetLicenses()
    {
        //for debugging purposes
        var retVal = db.Context.Licenses
            .Include(l => l.State)
            .Include(l=>l.LicenseType);
        return retVal;

    }

} 
```

db 上下文返回适当的数据，但它不会出现在响应中。我没有足够的信誉点来发布图像，但许可证类型和状态在上下文的响应中。

但是，控制器的响应不包含前三个对象的 licensetype 对象。[{"$id":"1","$type":"Volt.Telecom.Licensing.Models.License, Volt.Telecom.Licensing.Models","LicenseName":"低电压","状态":{ "$id":"2","$type":"Volt.Telecom.Licensing.Models.State, Volt.Telecom.Licensing.Models","Name":"FL","LongName":"Florida", "IsActive":false,"Id":23},"DateIssued":"2012-11-18T00:00:00.000","ValidFor":1095,"IsActive":false,"Id":1},{" $id":"3","$type":"Volt.Telecom.Licensing.Models.License, Volt.Telecom.Licensing.Models","LicenseName":"Contractors",

这是客户端上的 home.js 文件。

定义（['服务/记录器']，功能（记录器）{ var system = require('durandal/system');

```
var serviceName = 'api/License';

// manager is the service gateway and cache holder
var manager = new breeze.EntityManager(serviceName);

var vm = {
    activate: getLicenses,
    title: 'Licenses',

    licenses: ko.observableArray(),
    includeExpired: ko.observable(false),
    save: saveChanges,
    show: ko.observable(false)
};

//vm.includeExpired.subscribe(getLicenses);

function getLicenses() {

    log("querying Licenses", null, true);

    var query = breeze.EntityQuery.from("GetLicenses");

    //if (!vm.includeExpired()) {
    //    query = query.where("DateIssued.AddDays(ValidFor*-1)" > new Date(Date.now()));
    //}

    return manager
        .executeQuery(query)
        .then(querySucceeded)
        .fail(queryFailed);

    // reload vm.todos with the results 
    function querySucceeded(data) {
        log("queried Licenses", null, true);

        vm.licenses(data.results);
        vm.show(true); // show the view
    }

}

function queryFailed(error) {
    log("Query failed: " + error.message, null, true);
}

function saveChanges() {
    return manager.saveChanges()
        .then(function () { log("changes saved", null, true); })
        .fail(saveFailed);
}

function saveFailed(error) {
    log("Save failed: " + error.message, null, true);
}

function log(msg, data, showToast) {
    logger.log(msg, data, system.getModuleId(vm), showToast);
}
return vm;
//#endregion 
```

});

关于为什么会发生这种情况以及仅针对前三个项目的任何想法，我们将不胜感激。我喜欢微风作为我们需要编写的一些水疗中心的潜力，但这引起了我的一些担忧。

**更新 1** 如果我在它工作的数据库中更改 LicenseType_id 的顺序，则初始顺序为 123123，如果更改为 312123 或 321123，则响应中的所有六个都是正确的 [{"$id":"1","$type": "Volt.Telecom.Licensing.Models.License, Volt.Telecom.Licensing.Models","LicenseName":"Low Voltage","LicenseType":{"$id":"2","$type":"Volt .Telecom.Licensing.Models.LicenseType, Volt.Telecom.Licensing.Models","Description":"General Contractors","IsActive":false,"Id":3},"State":{"$id": "3","$type":"Volt.Telecom.Licensing.Models.State, Volt.Telecom.Licensing.Models","Name":"FL","LongName":"Florida","IsActive":false ,"Id":23},"DateIssued":"2012-11-18T00:00:00.000","ValidFor":1095,"IsActive":false,"Id":1},{"$id":"4 ","$type":"Volt.Telecom.Licensing.Models.License, Volt.Telecom.Licensing.Models","LicenseName":"Contractors","LicenseType":{"$id":"5"," $type":"Volt.Telecom.Licensing.Models.LicenseType, Volt.Telecom.Licensing.Models","Description":"Low Voltage","IsActive":false,"Id":1},"State": {"$ref":"3"},"DateIssued":"2012-11-18T00:00:00.000","ValidFor":1095,"IsActive":false,"Id":2},{"$id ":"6","$type":"Volt.Telecom.Licensing.Models.License, Volt.Telecom.Licensing.Models","LicenseName":"General Contractors","LicenseType":{"$id":"7","$type":"Volt.Telecom.Licensing.Models.LicenseType, Volt.Telecom. Licensing.Models","Description":"Contractors","IsActive":false,"Id":2},"State":{"$ref":"3"},"DateIssued":"2012-11- 18T00:00:00.000","ValidFor":1095,"IsActive":false,"Id":3},{"$id":"8","$type":"Volt.Telecom.Licensing.Models。许可证，Volt.Telecom.Licensing.Models","LicenseName":"Low Voltage","LicenseType":{"$ref":"5"},"State":{"$id":"9"," $type":"Volt.Telecom.Licensing.Models。州，Volt.Telecom.Licensing.Models","Name":"CA","LongName":"California","IsActive":false,"Id":35},"DateIssued":"2012-11-18T00 :00:00.000","ValidFor":1095,"IsActive":false,"Id":4},{"$id":"10","$type":"Volt.Telecom.Licensing.Models.License , Volt.Telecom.Licensing.Models","LicenseName":"Contractors","LicenseType":{"$ref":"7"},"State":{"$ref":"9"},"DateIssued ":"2012-11-18T00:00:00.000","ValidFor":1095,"IsActive":false,"Id":5},{"$id":"11","$type":"Volt .Telecom.Licensing.Models.License，Volt.Telecom.Licensing.Models","LicenseName":"General Contractors","LicenseType":{"$ref":"2"},"State":{"$ref":"9"},"DateIssued":"2012-11-18T00:00 :00.000","ValidFor":1095,"IsActive":false,"Id":6}]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T19:59:31.823

## 编辑：从 v 1.3.1 起，Breeze 现在支持继承。

问题可能是 Breeze 还不支持继承。这里有一个 UserVoice[建议](https://breezejs.uservoice.com/forums/173093-breeze-feature-suggestions/suggestions/3083057-support-inheritence-in-the-object-model)。请投票。我们非常重视这些建议。

要确认这是您的问题，您是否可以展平结构以便不需要继承并查看问题是否消失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T19:51:37.123

我认为，如果服务器到客户端之间有什么东西消失了，那是因为 Breeze 保留了空数据列，这可能会打乱数据结构并使敲除绑定功能失调。
在选择最小化 Breeze 性能时，您可以根据需要将该属性置于较低级别。
*1 - BreezeWebApiConfig.cs 级别
2 - 控制器级别
3 - 或 HttGet 级别*
此属性适用于我：
*var jsonx = Breeze.WebApi.BreezeConfig.Instance;
jsonx.GetJsonSerializerSettings().NullValueHandling = Newtonsoft.Json.NullValueHandling.Include;*

# javascript - Twitter Bootstrap 中的数据切换属性

> ID：15113537
> 
> 赞同：284
> 
> 时间：2013-02-27T13:40:19.130
> 
> 标签：javascript, jquery, html, twitter-bootstrap

Twitter Bootstrap 中的属性有什么作用`data-toggle`？我在 Bootstrap API 中找不到答案。

我之前也看到过类似的问题，[链接](https://stackoverflow.com/questions/10481684/where-does-data-toggle-attribute-of-bootstrap-framework-come-from)。但这对我没有多大帮助。

* * *

## 回答 #1

> 赞同：210
> 
> 时间：2013-02-27T13:48:46.890

它是一个 Bootstrap 数据属性，可自动将元素与它所在的小部件类型挂钩。Data-* 是 html5 规范的一部分，而 data-toggle 是特定于 Bootstrap 的。

一些例子：

```
data-toggle="modal"
data-toggle="collapse"
data-toggle="dropdown"
data-toggle="tab" 
```

浏览[Bootstrap JavaScript 文档](https://getbootstrap.com/docs/4.5/getting-started/javascript/)并搜索 data-toggle，您将看到它在代码示例中使用。

一个工作示例：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet"/>

<div class="dropdown">
  <a class="dropdown-toggle" data-toggle="dropdown" href="#">Dropdown trigger</a>
  <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
    <li><a href="#">Item</a></li>
  </ul>
</div>
```

* * *

## 回答 #2

> 赞同：75
> 
> 时间：2013-02-27T13:50:19.367

任何以开头`data-`的属性都是用于某些特定目的的自定义属性的前缀（该目的取决于应用程序）。`rel`它被添加为一种语义补救措施，以解决人们出于原始预期目的以外的目的大量使用和其他属性（`rel`通常用于保存高级工具提示等数据）。

在 Bootstrap 的情况下，我不熟悉它的内部工作原理，但从名称来看，我猜它是一个允许切换可见性的钩子，或者它所附加的元素的模式（例如可折叠[Octopress.org 上的](http://octopress.org/)侧栏）。

[html5doctor 有一篇关于 data- 属性的好文章](http://html5doctor.com/html5-custom-data-attributes/)。

[Cycle 2 是另一个广泛使用 data- 属性的例子](http://jquery.malsup.com/cycle2/)。

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2015-02-16T20:35:35.830

例如，假设您正在创建一个 Web 应用程序来列出和显示食谱。您可能希望您的客户能够在选择要打开的食谱之前对列表进行排序、显示食谱的功能等。为此，您需要在食谱的列表元素中关联烹饪时间、主要成分、用餐位置等内容。

```
<li><a href="recipe1.html">Borscht</a></li>
<li><a href="recipe2.html">Chocolate Mousse</a></li>
<li><a href="recipe3.html">Almond Radiccio Salad</a></li>
<li><a href="recipe4.html">Deviled Eggs</a></li> 
```

为了将这些信息放入页面，您可以做很多不同的事情。您可以为每个 LI 元素添加注释，您可以为列表项添加 rel 属性，您可以根据时间、膳食和成分（即）将所有食谱放在单独的文件夹中。大多数开发人员采用的解决方案是使用类属性来存储有关当前元素的信息。这有几个优点：

*   您可以在一个元素上存储多个类
*   类名可以是人类可读的
*   使用 JavaScript (className) 访问类很容易
*   该类与其所在的元素相关联

但是这种方法有一些主要缺点：

*   你必须记住这些课程是做什么的。如果您忘记或新开发人员接管了该项目，则可能会删除或更改这些类，而没有意识到这会影响应用程序的运行方式。
*   类也用于 CSS 样式，您可能会错误地将 CSS 类与数据类重复，最终在您的实时页面上出现奇怪的样式。
*   添加多个数据元素更加困难。如果您有多个数据元素，则需要通过 JavaScript 以某种方式访问​​它们，或者通过类的名称或在类列表中的位置。但是很容易搞砸。

我建议的所有其他方法都存在这些问题以及其他问题。但由于这是快速轻松地包含数据的唯一方法，所以我们就这样做了。救援的 HTML5 数据属性

HTML5 为任何元素添加了一种新类型的属性——自定义数据元素 (data-*)。这些是自定义（用 * 表示）属性，您可以添加到 HTML 元素中以定义所需的任何类型的数据。它们由两部分组成：

属性名称 这是属性的名称。它必须至少是一个小写字符并带有前缀 data-。例如：数据-主料、数据-烹饪时间、数据-餐。这是您的数据的名称。

属性值 与任何其他 HTML 属性一样，您将数据本身包含在由等号分隔的引号中。此数据可以是网页上有效的任何字符串。例如：data-main-ingredient="chocolate"。

然后，您可以将这些数据属性应用于您想要的任何 HTML 元素。例如，您可以在上面的示例列表中定义信息：

```
<li data-main-ingredient="beets" data-cooking-time="1 hour" data-meal="dinner"><a href="recipe1.html">Borscht</a></li>
<li data-main-ingredient="chocolate" data-cooking-time="30 minutes" data-meal="dessert"><a href="recipe2.html">Chocolate Mousse</a></li>
<li data-main-ingredient="radiccio" data-cooking-time="20 minutes" data-meal="dinner"><a href="recipe1.html">Almond Radiccio Salad</a></li>
<li data-main-ingredient="eggs" data-cooking-time="15 minutes" data-meal="appetizer"><a href="recipe1.html">Deviled Eggs</a></li> 
```

在 HTML 中获得该信息后，您将能够使用 JavaScript 访问它并根据该数据操作页面。

* * *

## 回答 #4

> 赞同：27
> 
> 时间：2014-06-24T03:27:42.900

从[引导文档：](http://getbootstrap.com/javascript/)

```
<!--Activate a modal without writing JavaScript. Set data-toggle="modal" on a 
controller element, like a button, along with a data-target="#foo" or href="#foo" 
to target a specific modal to toggle.-->

<button type="button" data-toggle="modal" data-target="#myModal">Launch modal</button> 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2016-04-21T07:04:59.367

已经给出了很多答案，但他们都没有抓住重点。让我们解决这个问题。

[http://www.w3schools.com/bootstrap/bootstrap_ref_js_collapse.asp](http://www.w3schools.com/bootstrap/bootstrap_ref_js_collapse.asp)

**言归正传**

1.  `data-`HTML5 解析器不会解析任何以 开头的属性。
2.  Bootstrap 使用该`data-toggle`属性来创建折叠功能。

**使用方法**：仅需 2 步

1.  添加到要折叠`class="collapse"`的元素。`#A`
2.  添加`data-target="#A"`和`data-toggle="collapse"`。

目的：如果我们使用 Bootstrap ，该`data-toggle`属性允许我们创建一个控件来折叠/展开一个（块）。`div`

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-02-27T13:50:10.933

此数据属性的存在告诉 Bootstrap 在用户交互时在另一个元素的视觉或逻辑状态之间切换。

它用于显示模式、选项卡内容、工具提示和弹出菜单以及设置切换按钮的按下状态。它在没有明确文档的情况下以多种方式使用。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2016-07-26T22:51:07.097

bootstrap 中 data-toggle 的目的是让您可以使用 jQuery 查找特定类型的所有标签。例如，您将 data-toggle="popover" 放在所有 popover 标记中，然后您可以使用 JQuery 选择器查找所有这些标记并运行 popover() 函数来初始化它们。您也可以将 class="myPopover" 放在标签上并使用 .myPopover 选择器来做同样的事情。该文档令人困惑，因为它使该属性看起来有些特殊。

这

```
<div class="container">
    <h3>Popover Example</h3>
    <a href="#" class="myPop" title="Popover1 Header" data-content="Some content inside the popover1">Toggle popover1</a>
    <a href="#" class="myPop" title="Popover2 Header" data-content="Some content inside the popover2">Toggle popover2</a>
</div>

<script>
    $(document).ready(function(){
        $('.myPop').popover();   
    });
</script> 
```

工作得很好。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2013-02-27T13:49:44.140

它是 Bootstrap 定义的 HTML5 数据属性。它将按钮绑定到事件。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-08-22T18:32:51.823

[在这里](http://getbootstrap.com/javascript/)`data-toggle`，您还可以找到更多可分配值的示例。只需访问该页面，然后`CTRL+F`搜索`data-toggle`。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2016-02-18T02:10:57.550

Bootstrap 利用 HTML5 标准在 javascript 中轻松访问 DOM 元素属性。

## 数据-*

> 形成一个属性类，称为自定义数据属性，允许在 HTML 和脚本可能使用的 DOM 表示之间交换专有信息。所有此类自定义数据都可以通过设置属性的元素的 HTMLElement 接口获得。HTMLElement.dataset 属性允许访问它们。

[参考](https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes#attr-data-* "参考")

# qt - QstackedWidget 在垂直排列时为箭头添加空间

> ID：15113540
> 
> 赞同：0
> 
> 时间：2013-02-27T13:40:31.910
> 
> 标签：qt, qt-designer

我有一个 ui 文件，如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<ui version="4.0">
 <class>MainWindow</class>
 <widget class="QMainWindow" name="MainWindow">
  <property name="geometry">
   <rect>
    <x>0</x>
    <y>0</y>
    <width>377</width>
    <height>600</height>
   </rect>
  </property>
  <property name="windowTitle">
   <string>MainWindow</string>
  </property>
  <widget class="QWidget" name="centralwidget">
   <layout class="QVBoxLayout" name="verticalLayout">
    <item>
     <widget class="QStackedWidget" name="top_pages">
      <property name="currentIndex">
       <number>0</number>
      </property>
      <widget class="QFrame" name="page">
       <layout class="QVBoxLayout" name="verticalLayout_2">
        <item>
         <widget class="QStackedWidget" name="stackedWidget_2">
          <property name="currentIndex">
           <number>1</number>
          </property>
          <widget class="QWidget" name="page_3">
           <layout class="QVBoxLayout" name="verticalLayout_3">
            <item>
             <widget class="QGroupBox" name="groupBox">
              <property name="title">
               <string>GroupBox</string>
              </property>
              <property name="alignment">
               <set>Qt::AlignLeading|Qt::AlignLeft|Qt::AlignTop</set>
              </property>
              <layout class="QVBoxLayout" name="verticalLayout_4"/>
             </widget>
            </item>
           </layout>
          </widget>
          <widget class="QWidget" name="page_4">
           <layout class="QVBoxLayout" name="verticalLayout_5">
            <item>
             <widget class="QGroupBox" name="groupBox_2">
              <property name="sizePolicy">
               <sizepolicy hsizetype="Preferred" vsizetype="Expanding">
                <horstretch>0</horstretch>
                <verstretch>0</verstretch>
               </sizepolicy>
              </property>
              <property name="title">
               <string>GroupBox</string>
              </property>
              <layout class="QVBoxLayout" name="verticalLayout_6"/>
             </widget>
            </item>
           </layout>
          </widget>
         </widget>
        </item>
       </layout>
      </widget>
      <widget class="QFrame" name="page_2"/>
     </widget>
    </item>
   </layout>
  </widget>
  <widget class="QMenuBar" name="menubar">
   <property name="geometry">
    <rect>
     <x>0</x>
     <y>0</y>
     <width>377</width>
     <height>19</height>
    </rect>
   </property>
  </widget>
 </widget>
 <resources/>
 <connections/>
</ui> 
```

我希望组框显示在整个窗口中（组框文本就在菜单下方。当我在应用程序中构建它并在 qt 设计器预览中查看时，它会在顶部留下一个空间 top_pages 的箭头所在位于。如何使组框扩展到这个空间？我可以打破布局并将其扩展到这个空间，但我认为这需要对stackedWidget_2 的每一页都这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T17:40:46.120

```
<?xml version="1.0" encoding="UTF-8"?>
<ui version="4.0">
 <class>MainWindow</class>
 <widget class="QMainWindow" name="MainWindow">
  <property name="geometry">
   <rect>
    <x>0</x>
    <y>0</y>
    <width>676</width>
    <height>595</height>
   </rect>
  </property>
  <property name="windowTitle">
   <string>MainWindow</string>
  </property>
  <widget class="QWidget" name="centralwidget">
   <layout class="QHBoxLayout" name="horizontalLayout">
    <item>
     <widget class="QGroupBox" name="groupBox">
      <property name="title">
       <string>GroupBox</string>
      </property>
      <layout class="QVBoxLayout" name="verticalLayout">
       <item>
        <widget class="QLabel" name="label">
         <property name="frameShape">
          <enum>QFrame::NoFrame</enum>
         </property>
         <property name="text">
          <string>&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.0//EN&quot; &quot;http://www.w3.org/TR/REC-html40/strict.dtd&quot;&gt;
&lt;html&gt;&lt;head&gt;&lt;meta name=&quot;qrichtext&quot; content=&quot;1&quot; /&gt;&lt;style type=&quot;text/css&quot;&gt;
p, li { white-space: pre-wrap; }
&lt;/style&gt;&lt;/head&gt;&lt;body style=&quot; font-family:'MS Shell Dlg 2'; font-size:8.25pt; font-weight:400; font-style:normal;&quot;&gt;
&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;span style=&quot; font-size:8pt;&quot;&gt;Some text &lt;/span&gt;&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;</string>
         </property>
        </widget>
       </item>
       <item>
        <widget class="QStackedWidget" name="top_pages">
         <property name="frameShape">
          <enum>QFrame::Panel</enum>
         </property>
         <property name="currentIndex">
          <number>1</number>
         </property>
         <widget class="QFrame" name="page">
          <layout class="QVBoxLayout" name="verticalLayout_2"/>
         </widget>
         <widget class="QFrame" name="page_2"/>
        </widget>
       </item>
      </layout>
     </widget>
    </item>
   </layout>
  </widget>
  <widget class="QMenuBar" name="menubar">
   <property name="geometry">
    <rect>
     <x>0</x>
     <y>0</y>
     <width>676</width>
     <height>18</height>
    </rect>
   </property>
  </widget>
 </widget>
 <resources/>
 <connections/>
</ui> 
```

我认为这就是你想要创造的。有几个堆栈小部件。我做了一个。只是为了表明我在堆叠的小部件周围添加了框框。它可以很容易地从属性中删除

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T20:27:02.940

这会产生您想要实现的布局吗？

```
<?xml version="1.0" encoding="UTF-8"?>
<ui version="4.0">
 <class>MainWindow</class>
 <widget class="QMainWindow" name="MainWindow">
  <property name="geometry">
   <rect>
    <x>0</x>
    <y>0</y>
    <width>377</width>
    <height>600</height>
   </rect>
  </property>
  <property name="windowTitle">
   <string>MainWindow</string>
  </property>
  <widget class="QWidget" name="centralwidget">
   <layout class="QVBoxLayout" name="verticalLayout">
    <property name="topMargin">
     <number>0</number>
    </property>
    <item>
     <widget class="QStackedWidget" name="top_pages">
      <property name="currentIndex">
       <number>0</number>
      </property>
      <widget class="QFrame" name="page">
       <layout class="QVBoxLayout" name="verticalLayout_2">
        <property name="topMargin">
         <number>0</number>
        </property>
        <item>
         <widget class="QStackedWidget" name="stackedWidget_2">
          <property name="currentIndex">
           <number>1</number>
          </property>
          <widget class="QWidget" name="page_3">
           <layout class="QVBoxLayout" name="verticalLayout_3">
            <property name="topMargin">
             <number>0</number>
            </property>
            <item>
             <widget class="QGroupBox" name="groupBox">
              <property name="title">
               <string>GroupBox</string>
              </property>
              <property name="alignment">
               <set>Qt::AlignLeading|Qt::AlignLeft|Qt::AlignTop</set>
              </property>
              <layout class="QVBoxLayout" name="verticalLayout_4"/>
             </widget>
            </item>
           </layout>
          </widget>
          <widget class="QWidget" name="page_4">
           <layout class="QVBoxLayout" name="verticalLayout_5">
            <item>
             <widget class="QGroupBox" name="groupBox_2">
              <property name="sizePolicy">
               <sizepolicy hsizetype="Preferred" vsizetype="Expanding">
                <horstretch>0</horstretch>
                <verstretch>0</verstretch>
               </sizepolicy>
              </property>
              <property name="title">
               <string>GroupBox</string>
              </property>
              <layout class="QVBoxLayout" name="verticalLayout_6">
               <property name="topMargin">
                <number>0</number>
               </property>
              </layout>
             </widget>
            </item>
           </layout>
          </widget>
         </widget>
        </item>
       </layout>
      </widget>
      <widget class="QFrame" name="page_2"/>
     </widget>
    </item>
   </layout>
  </widget><?xml version="1.0" encoding="UTF-8"?>
<ui version="4.0">
 <class>MainWindow</class>
 <widget class="QMainWindow" name="MainWindow">
  <property name="geometry">
   <rect>
    <x>0</x>
    <y>0</y>
    <width>377</width>
    <height>600</height>
   </rect>
  </property>
  <property name="windowTitle">
   <string>MainWindow</string>
  </property>
  <widget class="QWidget" name="centralwidget">
   <layout class="QVBoxLayout" name="verticalLayout">
    <property name="topMargin">
     <number>0</number>
    </property>
    <item>
     <widget class="QStackedWidget" name="top_pages">
      <property name="currentIndex">
       <number>0</number>
      </property>
      <widget class="QFrame" name="page">
       <layout class="QVBoxLayout" name="verticalLayout_2">
        <property name="topMargin">
         <number>0</number>
        </property>
        <item>
         <widget class="QStackedWidget" name="stackedWidget_2">
          <property name="currentIndex">
           <number>1</number>
          </property>
          <widget class="QWidget" name="page_3">
           <layout class="QVBoxLayout" name="verticalLayout_3">
            <property name="topMargin">
             <number>0</number>
            </property>
            <item>
             <widget class="QGroupBox" name="groupBox">
              <property name="title">
               <string>GroupBox</string>
              </property>
              <property name="alignment">
               <set>Qt::AlignLeading|Qt::AlignLeft|Qt::AlignTop</set>
              </property>
              <layout class="QVBoxLayout" name="verticalLayout_4"/>
             </widget>
            </item>
           </layout>
          </widget>
          <widget class="QWidget" name="page_4">
           <layout class="QVBoxLayout" name="verticalLayout_5">
            <item>
             <widget class="QGroupBox" name="groupBox_2">
              <property name="sizePolicy">
               <sizepolicy hsizetype="Preferred" vsizetype="Expanding">
                <horstretch>0</horstretch>
                <verstretch>0</verstretch>
               </sizepolicy>
              </property>
              <property name="title">
               <string>GroupBox</string>
              </property>
              <layout class="QVBoxLayout" name="verticalLayout_6">
               <property name="topMargin">
                <number>0</number>
               </property>
              </layout>
             </widget>
            </item>
           </layout>
          </widget>
         </widget>
        </item>
       </layout>
      </widget>
      <widget class="QFrame" name="page_2"/>
     </widget>
    </item>
   </layout>
  </widget>
  <widget class="QMenuBar" name="menubar">
   <property name="geometry">
    <rect>
     <x>0</x>
     <y>0</y>
     <width>377</width>
     <height>23</height>
    </rect>
   </property>
  </widget>
 </widget>
 <resources/>
 <connections/>
</ui>
  <widget class="QMenuBar" name="menubar">
   <property name="geometry">
    <rect>
     <x>0</x>
     <y>0</y>
     <width>377</width>
     <height>23</height>
    </rect>
   </property>
  </widget>
 </widget>
 <resources/>
 <connections/>
</ui> 
```

我所做的只是遍历所有小部件，并通过在对象编辑器（`centralWidget`、`page`、`page_3`、`page_4`）中选择它们并在属性编辑器中修改它们的布局属性来将它们的布局的上边距减少到 0。无需打破布局。

# android - 记录未插入 sqlite 数据库

> ID：15113542
> 
> 赞同：0
> 
> 时间：2013-02-27T13:40:39.050
> 
> 标签：android, sqlite

我在 Sqlite 数据库中有两个表。第一个表的列是`_id`as`primary key`和as 。第二个表的列为, 。`note` `date``_cid``foreign key``_cid``primary key``Category`

一些默认记录，我在创建它时已插入到第二个表中。

两个表都创建成功。**但是当我将记录插入第一个表时，没有插入**. 没有得到任何类型的异常。请指导我。

`Table 1`

`private static final String DB__CREATE1 = "CREATE TABLE " + TABLE_NAME_CATE + "(_cid INTEGER PRIMARY KEY AUTOINCREMENT, "+ "Category TEXT not null);";`

`Table 2`

`private static final String DB__CREATE2 = "CREATE TABLE " + TABLE_NAME + "(_id INTEGER PRIMARY KEY AUTOINCREMENT, "+ "Note TEXT not null, "+ "NoteDateTime TEXT not null, " + "_cid INTEGER not null, " + "FOREIGN KEY(_cid) REFERENCES Categories(_cid));";`

插入数据的方法

`public` `void` `insertData1( long c_id, String discription, String nDate)`{

```
 ContentValues  contentValues=new ContentValues();
    contentValues.put("note", discription);
    contentValues.put("date", nDate);
    contentValues.put("_cid", c_id);
    open();
    database.insert("TABLE_NAME", null,contentValues);
    close();
}` 
```

调用语句

`dbConnector.insertData1(1, textview.getText().toString(), nDateTime.toString());`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T14:07:30.703

对于第一个表，它应该如下所示：

```
 private static final String DB__CREATE1 = "CREATE TABLE " + TABLE_NAME_CATE + "( "+_cid+ "INTEGER PRIMARY KEY AUTOINCREMENT, "+Category +"TEXT not null);"; 
```

但是如果没有看到完整的代码，很难真正了解它。您是否为“类别”声明了变量（是否为字符串）？

并且对于您的第二个相同，您是否为“_id”、“Note”、“NoteDateTime”等声明了变量？

## 编辑

好的，我看到了一些我不明白的东西。如上所述，第一个表由 id、注释日期和外键组成。但这应该是这样的：

```
 private static final String DB__CREATE1 = "CREATE TABLE " + TABLE_NAME_CATE + "(_id INTEGER PRIMARY KEY AUTOINCREMENT, "+ "date TEXT not null,"+ " Category TEXT not null);"; 
```

您将 _cid 而不是 _id 传递给第一列，而您忘记了日期列。

然后，在您的第二个表中，您引用“Categories(_cid)”，但它不应该像在您的第一个表中声明的那样是“Category(_cid)”吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T06:35:28.907

如果没有完整的代码，真的很难指出确切的问题。我可以看到之前发布的答案很合乎逻辑。但是，根据我使用多表数据库的经验，事情非常繁琐，并且不像我们仅使用单个表那样工作。

I had a similar problem, I once created a multi-table database and I still don't way what's the problem because it created the tables, but it could not insert. Later I followed this procedure: [https://stackoverflow.com/a/5899110/1351867](https://stackoverflow.com/a/5899110/1351867) it worked!

So my guess is, you might have problem with database adapter or helper classes, and maybe it's confusing between two tables. Please post your full code if you still face problems.

# jquery - jQuery. Prevent jump to top on append()

> ID：15113545
> 
> 赞同：0
> 
> 时间：2013-02-27T13:40:49.477
> 
> 标签：jquery, html

I have scrollable div

> ```
> <div id="scrollable" style="overflow-y: auto; height:200px;max-height:800px;width: 80px;">
> <div>
> <table id="chat_content"></table>
> </div> 
> ```

And JS:

```
jQuery('#chat_content').append("<tr><td>Hi world</td></tr>"); 
```

But when i rich max. height and inserting, it lift me up to top of #scrollable

How to prevent this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T13:44:10.643

尝试这个

```
$('#chat_content').scrollTop($('#chat_content')[0].scrollHeight); 
```

它会立即滚动到聊天 div 的底部。在 append() 之后运行它。

# java - 让 GoogleAnalytics 在所有活动中工作

> ID：15113546
> 
> 赞同：0
> 
> 时间：2013-02-27T13:40:56.617
> 
> 标签：java, android, google-analytics, singleton, google-analytics-api

我想在我的应用程序的 7 个活动中跟踪所有活动和按钮点击。现在我正处于实施 GA 的开始阶段。我在打开的主菜单屏幕上运行它，并且可以在 google.com/analytics 上在线查看它。我的问题是如何将其实施到所有活动中？

现在在我的主菜单类中，我有这个：

```
private Tracker tracker;
private GoogleAnalytics ga;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.mainmenumain);

    EasyTracker.getInstance().activityStart(this);

    //Get the GA singleton.
    ga = GoogleAnalytics.getInstance(this);

    //ga.setDebug(true);

    //Use the GA singleton to get a Tracker object.
    tracker = ga.getTracker("UA-###-1"); 
```

我是否必须声明 2 个变量，然后在每个活动中调用`EasyTracker.getInstance().activityStart(this);`,`ga = GoogleAnalytics.getInstance(this);`和？`tracker = ga.getTracker("UA-####-1");`

我知道那里有类似的主题，但我要求的是新版本 2，`Google Analytics`而不是旧版本 1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T14:03:11.093

实现一个新的 BaseActivity 以在它的 onCreate 方法中完成工作，然后让所有 7 个活动都扩展 BaseActivity。
请记住在您的活动中调用 super.onCreate。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T14:04:45.883

对于 Analytcs V2，这些是您在活动中需要的仅有的 2 行：

```
EasyTracker.getInstance().activityStart(this); 
Tracker trackerV2 = EasyTracker.getTracker(); 
```

您有点混淆了 V1 和 V2 调用。跟踪器实例化（关联您的 API 密钥）是通过清单中的属性设置的，因此您不再需要以下行：

```
tracker = ga.getTracker("UA-####-1"); 
```

# css - 列表元素在 ie7 中消失

> ID：15113549
> 
> 赞同：0
> 
> 时间：2013-02-27T13:41:02.763
> 
> 标签：css, internet-explorer-7

[你可以在这里](http://www.codianmc.it)看到我目前正在工作的网站。
我知道，这是非常老式的，但我的客户是这样设计的，我只是按照他想要的方式实现它......别担心，你不会看太久的！
问题是，当鼠标悬停在 Internet Explorer 7（仅 7）中时，顶部的导航栏消失了……
确实，除了第一个元素之外的所有元素都消失了。出于某种原因，第一个仍然存在......我无法获得任何关于正在发生的事情的线索，我确信我应该使用某种 css 技巧！
所以这里是我的css（只有一个与导航栏相关的）。

```
/*Relevant part*/
.navigation-menu-wrapper {
    height: 143px;
    max-height: 143px;
    width: 829px;
}

.navigation-menu {
    list-style: none;
}

.navigation-menu-item {
    float: left;
    background-color: rgba(255, 255, 255, 0.6);
    filter: progid:DXImageTransform.Microsoft.gradient(GradientType=0, startColorstr='#99FFFFFF', endColorstr='#99FFFFFF'); /*IE 7/8 fix for rgba*/
    width: 163px;
    height: 143px;
    max-height: 143px;
    font-family: "Times New Roman";
    color: #000000;
    text-transform: uppercase;
    font-size: 24px;
    line-height: 143px;
    border: 1px solid #000000;
    margin: 0;
    padding:0;
}

.navigation-menu-item-selected {
    background-color: rgba(255, 255, 255, 1);
    filter: progid:DXImageTransform.Microsoft.gradient(GradientType=0, startColorstr='#FFFFFFFF', endColorstr='#FFFFFFFF'); /*IE 7/8 fix for rgba*/
}

/*End relevant part*/
/*Page CSS, just in case you need it*/

.page-wrapper {
    width: 1024px;
    height: 100%;
    max-height: 100%;
    min-height: 768px;
}

.center-content-wrapper {
    width: 824px;
    min-height: 768px;
    background-image: url("../../img/background.jpg");
    background-repeat: no-repeat;
}

.main-content-wrapper {
    width: 100%;
    min-height: 623px;
    max-height: 623px;
}

.main-content-overlay {
    margin: 25px;
    padding-left: 70px;
    padding-right: 70px;
    padding-top: 20px;
    background-color: rgba(0, 0, 0, 0.85);
    filter: progid:DXImageTransform.Microsoft.gradient(GradientType=0, startColorstr='#d8000000', endColorstr='#d8000000');
    min-height: 509px;
    max-height: 509px;
    height: 509px;
    overflow-y: auto;
    font-size: 14px;
    font-family: "Times New Roman";
} 
```

你能建议一个修复吗？即使是肮脏的把戏也将不胜感激！
谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:57:58.817

这是因为您将您`<a>`的列表项包裹起来......它应该是相反的方式。环绕你`<li>`的`<a>`

所以像这样作为一个例子：

```
<ul class="navigation-menu no-margin no-padding">
 <li class="navigation-menu-item single-line"><a class="navigation-menu-item navigation-
 menu-item-selected link-no-decoration" href="index.php">L'attivitá</a>
 </li> 
```

它以这种方式工作.. 对你所有的人都做同样的事情`<li>`，它会在 IE7 中工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T13:58:06.507

你的标记搞砸了。

```
<ul class="navigation-menu no-margin no-padding">
    <a class="navigation-menu-item navigation-menu-item-selected link-no-decoration" href="index.php">
        <li class="navigation-menu-item single-line">L'at (...) 
```

**在此上下文中，元素 a 不允许作为元素 ul 的子元素。**

# unit-testing - unit testing functions with Apache Camel Exchange as parameter

> ID：15113550
> 
> 赞同：13
> 
> 时间：2013-02-27T13:41:04.810
> 
> 标签：unit-testing, apache-camel, junit4, easymock

I am doing java camel development and I want to unit test(junit4) a bunch of functions with Exchange being passed in as parameter.

For example :

```
public finalObject getProperty(final Exchange exchange, final String property) throws Exception {
   //all about getting property from xml message in exchange via xpath
} 
```

Question: 1>Can I use EasyMock to mock Exchange ? And how to set a predefined xml as incoming message inside the exchange ?

2>If not do I need to setup camel test ? How to set a predefined xml as incoming message inside the exchange with camel test.

Thanks a lot.

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2014-06-17T19:40:58.567

您还可以像这样创建一个新的默认交换：

```
 CamelContext ctx = new DefaultCamelContext(); 
    Exchange ex = new DefaultExchange(ctx); 
```

# javascript - 制作 JavaScript 自定义滚动条

> ID：15113553
> 
> 赞同：1
> 
> 时间：2013-02-27T13:41:12.300
> 
> 标签：javascript

我说的**是“JavaScript”**。我正在尝试制作自己的 JavaScript 自定义滚动条。这几乎是成功的。问题是我无法获得滚动速度的准确乘数。这是我的代码：

```
var elem = document.getElementById('scroll-area'),
    track = elem.children[1],
    thumb = track.children[0],
    height = parseInt(elem.offsetHeight, 10),
    cntHeight = parseInt(elem.children[0].offsetHeight, 10),
    trcHeight = parseInt(track.offsetHeight, 10),
    distance = cntHeight - height,
    mean = 50, // For multiplier (go faster or slower)
    current = 0;

elem.children[0].style.top = current + "px"; // Set default `top` value as `0` for initiation
thumb.style.height = Math.round(trcHeight * height / cntHeight) + 'px'; // Set the scrollbar thumb hight

var doScroll = function (e) {

    // cross-browser wheel delta
    e = window.event || e;
    var delta = Math.max(-1, Math.min(1, (e.wheelDelta || -e.detail)));

    // (1 = scroll-up, -1 = scroll-down)
    // Always check the scroll distance, make sure that the scroll distance value will not
    // increased more than the content height and/or less than zero
    if ((delta == -1 && current * mean >= -distance) || (delta == 1 && current * mean < 0)) {
        current = current + delta;
    }

    // Move element up or down by updating the `top` value
    elem.children[0].style.top = (current * mean) + 'px';
    thumb.style.top = 0 - Math.round(trcHeight * (current * mean) / cntHeight) + 'px';

    e.preventDefault();

};

if (elem.addEventListener) {
    elem.addEventListener("mousewheel", doScroll, false);
    elem.addEventListener("DOMMouseScroll", doScroll, false);
} else {
    elem.attachEvent("onmousewheel", doScroll);
} 
```

和标记：

```
<div id="scroll-area">
    <div><!-- CONTENT --></div>
    <span class="scrollbar-track"><span class="scrollbar-thumb"></span></span>
</div> 
```

我的问题在`mean = 50`. 当您将容器滚动到内容底部时，我在演示页面中制作的红线应该停在容器的底部，不高于该底部。

有人对准确结果有想法吗？

**PS：**我还想添加一个功能，使用户能够通过拖动滚动条拇指来滚动内容。但我想我想首先关注这个问题。谢谢你的帮助。

**演示：http:** [//jsfiddle.net/tovic/2B8Ye/](http://jsfiddle.net/tovic/2B8Ye/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T14:53:37.803

你可以更容易地做到这一点。`top`您可以设置它的属性，而不是计算容器的`scrollTop`属性，您猜怎么着——您不必检查内容是否移动到高于 0 或低于高度，因为`scrollTop`属性**不能设置为小于 0 或大于容器的高度**！

[这是你修改过的小提琴](http://jsfiddle.net/dVsVq/13/)

请注意，我必须用附加包装所有内容，`<div id="everything">...</div>`这样滚动条就不会与`#scroll-area`div 一起滚动。

我还假设使用`clientHeight`而不是`offsetHeight`for `.scroll-content`div 在`cntHeight`变量中包含填充。

`scrollTop`您可以在本文中找到有关该物业[的](https://developer.mozilla.org/en-US/docs/DOM/element.scrollTop)更多信息。

# build-process - Gradle 的构建路径在哪里

> ID：15113557
> 
> 赞同：2
> 
> 时间：2013-02-27T13:41:20.783
> 
> 标签：build-process, gradle

我想用来`Gradle`为文件上传器[https://github.com/valums/file-uploader](https://github.com/valums/file-uploader)构建快照版本。

我的成绩版本是 1.4，当我继续运行`gradle zip`时`Mac OS X 10.7.5`，它会显示`BUILD SUCCESSFUL`，但我无法在哪里找到结果文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T18:00:36.983

从项目的 build.gradle 文件中：

```
task zip(type: Zip) {
    baseName "$filename-$version"
    from files("$buildDir")
    destinationDir file('release')
} 
```

所以目标文件夹称为发布，你会在项目根目录下找到它。

# javascript - 未捕获的类型错误：无法读取 chrome 扩展中未定义的属性“本地”

> ID：15113562
> 
> 赞同：12
> 
> 时间：2013-02-27T13:41:35.397
> 
> 标签：javascript, google-chrome-extension, local-storage, google-chrome-storage

我写了一个 Chrome 扩展程序。我不能使用 `localStorage.setItem`and`localStorage.getItem`来存储和检索，因为后台和浏览器操作在不同的环境中运行 [[如这里所示](https://stackoverflow.com/questions/14008580/localstorage-returning-null-in-a-different-tab-in-chrome)]。

所以我决定使用 Chrome 存储 API：

```
var storage = chrome.storage.local;
var myTestVar = 'somevar';
var obj = {};
obj[myTestVar] = $("#somevar").val();
storage.set(obj); 
```

这产生了以下错误：

> 未捕获的类型错误：无法读取未定义的属性“本地”

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-27T15:05:06.927

确保已在清单文件中声明了所有必要的[权限。](https://developer.chrome.com/extensions/declare_permissions.html)`"storage"`，在你的情况下。

一般来说，以下步骤应该可以解决明显未定义的 Chrome API 的问题：

1.  阅读您正在使用的 API 的文档并熟悉先决条件，通常是清单权限（[例如`chrome.storage`#manifest](https://developer.chrome.com/extensions/storage.html#manifest)）。
2.  [通过查看What's new](https://developer.chrome.com/extensions/whats_new.html)来检查您（用户的）Chrome 版本是否支持 API 。
3.  检查脚本是否在正确的[上下文](https://stackoverflow.com/questions/9915311/chrome-extension-code-vs-content-scripts-vs-injected-scripts)中运行。大多数 API 仅可用于扩展程序的进程。（`chrome.storage`API 也可以在内容脚本中使用）
4.  否则，请使用您通常的调试技巧：错别字、变量阴影、...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-27T15:09:16.853

如果您尝试将应用程序作为简单的 HTML 页面运行，在 Chrome 中打开 HTML 文件，则会收到此错误。

在 Chrome 中正确添加应用程序（作为扩展程序）然后运行它。

# c# - DropDownListFor optionLabel null 给出“呼叫不明确”

> ID：15113564
> 
> 赞同：2
> 
> 时间：2013-02-27T13:41:36.260
> 
> 标签：c#, asp.net-mvc

出于好奇，因为它很容易解决：[this documentation for`DropDownListFor`](http://msdn.microsoft.com/en-us/library/ee703561%28v=vs.108%29.aspx) says that `optionLabel`can be `null`. 但是，如果我在接到电话时尝试编译，`optionLabel`则会出现*模棱两可*的错误，因为还有一种方法在同一位置采用 an 并且显然是模棱两可的。那么a）文档错误b）有一种方法可以编译并指定我的意思c）文档意味着一种不同的方法，可以在不引起*调用的情况下出现模棱两可*的错误？`null`*`object``null``optionLabel``null`*

 **编辑：

我现在意识到，文档当然意味着`optionLabel`作为字符串变量传递的情况，总是传递`null`. 例如：

```
string optionLabel = null;

// Possibly do something with optionLabel

@Html.DropDownListFor(x => x.Name, selectList, optionLabel) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T13:45:15.277

文档是错误的。您不能拥有：

```
@Html.DropDownListFor(x => x.Value, Model.Values, null) 
```

因为这与[`following overload`](http://msdn.microsoft.com/en-us/library/ee703573%28v=vs.108%29.aspx).

或者，如果您坚持传递 null ，您可以使用命名参数来消除重载的歧义：

```
@Html.DropDownListFor(x => x.Name, new SelectList(null), optionLabel: null) 
```

就我个人而言，我经常使用命名参数来使代码更具可读性，因为 Microsoft 为 HTML 帮助程序编写了大量的重载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T13:45:23.350

也许转换为字符串可以解决问题？

```
 optionLabel:(string)null 
```**

# sql - SQL - 每月两个时间戳之间的分钟总和

> ID：15113569
> 
> 赞同：2
> 
> 时间：2013-02-27T13:41:48.837
> 
> 标签：sql, sql-server-2008

我正在寻找特定月份的开始日期和结束日期之间的分钟总和的 SQL 查询。

例如。我正在查找 2 月份使用的分钟数。

开始日期时间：27-02-13 00:00:00 结束日期时间：05-03-13 00:00:00

因为我只在寻找 2 月的总和，所以它应该只给我 3 天（以分钟为单位）的总和，而不是进入 3 月的额外 5 天。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:57:49.487

我无法验证它，但它应该看起来像：

```
SELECT DATEDIFF(minute, startDate, CASE when endDate > EOMONTH(startDate) THEN EOMONTH(startDate) ELSE endDate END) FROM ... 
```

GL！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T13:46:31.853

考虑使用`DATEDIFF`——这只会帮助你开始：

```
SELECT DATEDIFF(minute, starttime, endtime) 
```

[http://msdn.microsoft.com/en-us/library/ms189794.aspx](http://msdn.microsoft.com/en-us/library/ms189794.aspx)

要获取开始月份的最后一天，请使用`DATEADD`：

```
SELECT DATEADD(second,-1,DATEADD(month, DATEDIFF(month,0,starttime)+1,0)) 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!3/a9211/3)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T13:57:21.250

我把它分步骤来说明每个过程。您当然可以轻松地将其折叠起来，但我将由您来完成。

这是我的解决方案[http://www.sqlfiddle.com/#!3/b4991/1/0](http://www.sqlfiddle.com/#!3/b4991/1/0)

```
SELECT *
  , DATEDIFF(minute, StartDAte, NewEndDate) AS TotalMinutes
FROM
(
  SELECT *
    , CASE WHEN TempDate > EndDate THEN EndDate ELSE TempDate END AS NewEndDate -- Either EOM or old EndDate, whichever is smaller
  FROM
  (
    SELECT *
      , DATEADD(month, 1, CAST(Year + '-' + Month + '-1' AS DATETIME)) AS TempDate -- first day of the next month
    FROM
    (
      select *
       , CAST(DATEPART(month, StartDate) AS char(2)) AS Month
       , CAST(DATEPART(year, StartDate) AS char(4)) AS Year
      from tbl
    ) t0
  ) t1
) t2 
```

首先，我从原始`StartDate`. 然后我从中构建一个月初的日期。然后我加上一个月，让我得到下个月的第一个月。然后我检查新日期是 > 还是 < 前一个`EndDate`。我取两个日期中较小的一个。然后我使用原始和`StartDate`两者之间较小的那个来确定我的总分钟数。`TempDate``EndDate`

另请参阅 EOMONTH：http: [//msdn.microsoft.com/en-us/library/hh213020.aspx](http://msdn.microsoft.com/en-us/library/hh213020.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T14:12:28.220

我最近不得不解决一个类似的问题，我添加了两个新功能来帮助解决这个问题：

```
CREATE FUNCTION [dbo].[GREATESTDATE] 
(
    -- Add the parameters for the function here
    @Date1 DATETIME,
    @Date2 DATETIME
)
RETURNS DATETIME
AS
BEGIN

    IF (@Date1 < @Date2)
        RETURN @Date2
    ELSE 
        RETURN @Date1

END 
```

和...

```
CREATE FUNCTION [dbo].[LEASTDATE] 
(
    -- Add the parameters for the function here
    @Date1 DATETIME,
    @Date2 DATETIME
)
RETURNS DATETIME
AS
BEGIN

    IF (@Date1 > @Date2)
        RETURN @Date2
    ELSE 
        RETURN @Date1

END 
```

然后像这样使用它们：

```
DATEDIFF(D,dbo.GREATESTDATE(@StartDate1,@StartDate2),dbo.LEASTDATE(@EndDate1,@EndDate2)) 
```

# php - PHP数组计数并获取元素值

> ID：15113570
> 
> 赞同：0
> 
> 时间：2013-02-27T13:41:51.607
> 
> 标签：php

我对 PHP 和编程很陌生，所以我在这件事上遇到了麻烦。

整个情况的目的是从制表符分隔的文件中读取一列（已经这样做了），获取其中的所有不同项目，单独计算它们并将它们与

Column1 [item value - label], Column2 [count] 一起放入表中。

我有一维数组中的整列。现在，我想在旁边列出所有项目及其数量。问题是，我可以有超过 10 个不同的项目，甚至更多，所以我不能像这样手动完成（命名 10 个变量并计算每个变量）：

```
$arr = array("complete","fail","complete","exit","fail","fail","complete");
function isComplete($value){
    return ($value == "complete") ? true : false;
}

$complete = array_filter($array, 'isComplete');

<tr>
   <td>Complete</td>
   <td><?php echo count($complete)?></td>
</tr>

-- > Complete = 3 
```

我想避免为每个值手动创建每个函数，因为值可能因文件而异。

$array 中的项目数量最多可以达到 20+k，所以我需要全部自动化。有人可以帮我弄这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T13:46:31.157

遍历数组并将计数放在另一个数组中怎么样？( `$arrCount`)

```
$arr = array("complete","fail","complete","exit","fail","fail","complete");
$arrCount = Array();

foreach($arr as $value){
    $arrCount[$value] = array_key_exists($value,$arrCount) ? $arrCount[$value]+1 : 1;
    //If this key exists, add 1 to it, else make it equal to 1
} 
```

这将创建一个数组，其中键是各种标签，值等于标签总数。

**`print_r`输出：**

> 数组（[完成] => 3 [失败] => 3 [退出] => 1）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T13:46:35.520

伪代码：

```
$arr = array("complete","fail","complete","exit","fail","fail","complete");
$counts = array();
foreach($arr => $key as $value)
{
    if(array_key_exists($value, $counts))
    {
        $counts[$value]++;
    }else{
        $counts[$value] = 1;
    }
}
foreach($counts => $key as $value)
{
    echo '<tr>
   <td>' . $key . '</td>
   <td>' . $value . '</td>
</tr>';
} 
```

我们正在制作列表中元素的数组。如果该项目存在，则增加，否则创建值为 1。然后再循环一次以向用户显示每个项目的总计数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T13:47:41.260

也许我错过了重点，但是正常循环有什么问题？例如：

```
function countByValue($array, $value){
    $count  = 0;
    foreach($array as $val){
        if ($val == $value){
            $count++;
        }
    }
    return $count;
} 
```

并调用它

```
$complete = countByValue($arr, 'complete'); 
```

如果您想一次将它们全部计数，请使用 F4r-20 答案。

# python - 如何使用 pygtk 前进到“新页面”？

> ID：15113571
> 
> 赞同：2
> 
> 时间：2013-02-27T13:41:57.100
> 
> 标签：python, image, gtk, pygtk

我是 python 编程的新手，但我已经完成了教程，这些教程教我如何创建可点击的图像并将它们连接以触发回调函数。

我正在尝试编写一个脚本，允许我单击图像，然后移动到新窗口或不同可单击图像的“页面”。

有没有办法让我使用 pygtk 做到这一点？我考虑过创建类并使用 if else 语句来轮询我想使用的类，但它对我不起作用。还是我想不断隐藏和显示按钮和图像？

有没有办法修改我用来实现目标的示例代码？ [http://pygtk.org/pygtk2tutorial/examples/images.py](http://pygtk.org/pygtk2tutorial/examples/images.py)

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T14:51:42.957

您可以使用 a[`GtkNotebook`](http://developer.gnome.org/gtk3/stable/GtkNotebook.html)并[隐藏](http://developer.gnome.org/gtk3/stable/GtkNotebook.html#gtk-notebook-set-show-tabs)其选项卡。每当您需要更改页面时，只需[切换](http://developer.gnome.org/gtk3/stable/GtkNotebook.html#gtk-notebook-set-current-page)`GtkNotebook`.

# c - 我无法在c中打开文件

> ID：15113574
> 
> 赞同：1
> 
> 时间：2013-02-27T13:42:12.907
> 
> 标签：c, file, fopen

我在 d: 驱动器中创建了一个名为 abc 的文本文件。我无法打开它。请告诉我该怎么做。

```
#include<stdio.h>
#include<conio.h>
#include<stdlib.h>
void main()
{
    FILE *fp;
    clrscr();
    fp = fopen("D:/abc.txt","r");
    if(fp == NULL)
    {
        printf("\nCannot open");
        getch();
        exit(1);
    }
    fclose(fp);
    getch();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T13:44:04.963

你有错别字，试试

```
 fp = fopen("D:\\abc.txt","r"); 
```

反而。

或者，如果文件与程序位于同一文件夹中：

```
 fp = fopen("abc.txt","r"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-27T13:44:20.067

更正路径，它应该是“`D:\\abc.txt"`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-27T13:44:53.123

你的文件路径看起来有点奇怪。将其更改为

```
fp = fopen("D:\\abc.txt","r"); 
```

这可能会奏效。

除此之外，包括`<errno.h>`并检查它，如果它失败了。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-27T13:44:37.273

```
fp = fopen("D:/abc.txt","r"); 
```

应该

```
fp = fopen("D:\\abc.txt","r"); 
```

在路径中使用`\`，而不是`/`在 Windows 中使用，额外`\`用于转义序列。

**编辑**：

正如您向其他人评论的那样，这些答案`fp = fopen("D:\\abc.txt","r");`也不起作用，然后检查名称实际上是什么。您可能会错误地给出错误的名称，请检查您是否有这样的错误。

(1) 打开命令提示符
(2) 使用 DIR 命令打印文件名：

```
c:\Users\name> D:
D:\> DIR
 Volume in drive D is FUN BOX
 Volume Serial Number is B48A-3CE7

 Directory of d:\

 27-02-2013  19:23                 0 abc.txt.txt
 26-02-2013  22:05    <DIR>          BOLLYWOOD MOVIES
 27-02-2013  19:31                 0 x
           2 File(s)              0 bytes
           1 Dir(s)  11,138,654,208 bytes free 
```

文件名是`abc.txt.txt`，但是当你在文件夹扩展名中看到这个时，文件名看起来`abc.txt`

我是 Linux 用户，我通常在 Windows 中犯这个错误。这就是为什么。可能对你有帮助！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-27T15:37:08.967

如果您使用的是 TurboC，请将该文件放在 TC 的 BIN 目录中。并将路径指定为**fp = fopen("abc.txt","r");** 而不是任何其他替代路径。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-27T14:10:38.607

下一次，尝试使用 perror() 函数使错误更具体。Perror() 将解释错误代码，这将帮助您减少浪费时间，尝试查找错误类型。

将此添加到您的代码中...

```
if(fp == NULL)
{
perror(fp);
} 
```

运行时我收到错误消息

没有相应的文件和目录。（因为我运行了程序，并试图读取一个文件，而不是先创建它）

看，如果这是同样的问题，在你的情况下

# google-maps - 谷歌地图地理编码和绘制几个位置

> ID：15113575
> 
> 赞同：0
> 
> 时间：2013-02-27T13:42:15.787
> 
> 标签：google-maps, google-maps-api-3, google-geocoding-api

我正在尝试实现一个脚本，该脚本将对数组的所有位置进行地理编码并将其绘制到地图中。我是堆栈，因为我无法让地图适合屏幕中添加的所有标记。我花了很多时间尝试几种方法，这就是我想出的：

```
<!DOCTYPE html>
<html> 
<head> 
  <meta http-equiv="content-type" content="text/html; charset=UTF-8" /> 
  <title>Google Maps Multiple Markers</title>
  <script src="http://maps.google.com/maps/api/js?sensor=false" type="text/javascript"></script>
  <script src='//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js'></script>
  <script>

    var geocoder;
    var map;
    var markersArray = [];
    var bounds;

    //plot initial point using geocode instead of coordinates (works just fine)
    function initialize() {
        geocoder = new google.maps.Geocoder();
        bounds = new google.maps.LatLngBounds ();
        latlang = geocoder.geocode( { 'address': '5th Avenus New Yort'}, function(results, status) { 
            if (status == google.maps.GeocoderStatus.OK) {

                //map.setCenter(results[0].geometry.location);
                marker = new google.maps.Marker({
                    map: map,
                    position: results[0].geometry.location
                });

                markersArray.push(marker);
            }
            else{
                alert("Geocode was not successful for the following reason: " + status);
            }
        });
        var myOptions = {
            center: latlang, 
            zoom: 2, 
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            navigationControlOptions: {
                style: google.maps.NavigationControlStyle.SMALL
            }
        };
        map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

        plotMarkers();
      }

        var locationsArray = [
            ['Google Official','1600 Amphitheatre Parkway, Mountain View, USA'],
            ['Google 1','112 S. Main St., Ann Arbor, USA'], 
            ['Google 2','10 10th Street NE, Suite 600 USA']
        ];

        function plotMarkers(){
            for(var i = 0; i < locationsArray.length; i++){
                console.log(locationsArray[i][1]);
                //codeAddresses(locationsArray[i]);
            }

            //map.fitBounds (bounds);
        }

        function codeAddresses(address){
            geocoder.geocode( { 'address': address}, function(results, status) { 
                if (status == google.maps.GeocoderStatus.OK) {

                        //map.setCenter(results[0].geometry.location);
                        marker = new google.maps.Marker({
                            map: map,
                            position: results[0].geometry.location
                        });

                        bounds.extend (new google.maps.LatLng (results[0].geometry.location.ib,results[0].geometry.location.hb));
                        //console.log(bounds);

                    markersArray.push(marker); 
                }
                else{
                    alert("Geocode was not successful for the following reason: " + status);
                }
            });
        }

        google.maps.event.addDomListener(window, 'load', initialize);
  </script>
</head> 
<body>
  <div id="map_canvas" style="width: 100%; height: 700px;"></div>
</body>
</html> 
```

有人可以帮我解决这个问题，因为我似乎会永远坚持这个版本。

我有以下目标： 1\. 绑定显示的地图，以便显示地图中放置的所有标记。2\. 添加带有位置名称的 infoWindow。

我会欣赏任何帮助！

向大家问好，尼克

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T13:54:45.267

您需要做的是`bounds`在添加每个标记时扩展您的对象。然后在将它们全部添加后，调用`fitBounds`以将地图重绘到该边界对象的适当缩放级别。

在创建标记时在循环中添加一个 InfoWindow，绑定到每个标记。这对我有用：

```
var geocoder;
var map;
var markersArray = [];
var bounds;
var infowindow =  new google.maps.InfoWindow({
    content: ''
});

//plot initial point using geocode instead of coordinates (works just fine)
function initialize() {
    geocoder = new google.maps.Geocoder();
    bounds = new google.maps.LatLngBounds ();

    var myOptions = {
        zoom: 2, 
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        navigationControlOptions: {
            style: google.maps.NavigationControlStyle.SMALL
        }
    };
    map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

    geocoder.geocode( { 'address': '5th Avenus New Yort'}, function(results, status) { 
        if (status == google.maps.GeocoderStatus.OK) {
            map.setCenter(results[0].geometry.location);

            marker = new google.maps.Marker({
                map: map,
                position: results[0].geometry.location
            });

            bounds.extend(results[0].geometry.location);

            markersArray.push(marker);
        }
        else{
            alert("Geocode was not successful for the following reason: " + status);
        }
    });

    plotMarkers();
}

var locationsArray = [
    ['Google Official','1600 Amphitheatre Parkway, Mountain View, USA'],
    ['Google 1','112 S. Main St., Ann Arbor, USA'], 
    ['Google 2','10 10th Street NE, Suite 600 USA']
];

function plotMarkers(){
    var i;
    for(i = 0; i < locationsArray.length; i++){
        codeAddresses(locationsArray[i]);
    }
}

function codeAddresses(address){
    geocoder.geocode( { 'address': address[1]}, function(results, status) { 
        if (status == google.maps.GeocoderStatus.OK) {
            marker = new google.maps.Marker({
                map: map,
                position: results[0].geometry.location
            });

            google.maps.event.addListener(marker, 'click', function() {
                infowindow.setContent(address[0]);
                infowindow.open(map, this);
            });

            bounds.extend(results[0].geometry.location);

            markersArray.push(marker); 
        }
        else{
            alert("Geocode was not successful for the following reason: " + status);
        }

        map.fitBounds(bounds);
    });
}

google.maps.event.addDomListener(window, 'load', initialize); 
```

# tinymce - TinyMCE - 自定义“插入/修改表”弹出窗口

> ID：15113580
> 
> 赞同：1
> 
> 时间：2013-02-27T13:42:24.980
> 
> 标签：tinymce

我在我的应用程序中使用 TinyMCE。是否有可能从弹出窗口中删除字段，在单击“插入表格”按钮后显示？我只想有“列”和“行”字段。

![在此处输入图像描述](../Images/ec9f2e81abbc488fe11fbc2d0756edc0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T14:18:31.973

这不可能开箱即用，但您可以“自定义”此弹出窗口的模板。你可以在`/tiny_mce/plugins/table/table.htm`

# android - 我必须在 boost 中包含依赖库吗？

> ID：15113581
> 
> 赞同：1
> 
> 时间：2013-02-27T13:42:27.900
> 
> 标签：android, serialization, boost, makefile

我正在尝试构建一个使用 boost 进行序列化的 Android 项目的第 3 个月。

所以，我正在编译带有序列化的 Boost 1.49，以及大约 8 个其他库，如 date_time、文件系统、iostream 等。在此之前，尝试在没有这些库的情况下构建序列化会导致一些错误，如`no such file or directory: assert.hpp`archive.o . 所以！构建 boost 时，库之间存在依赖关系。知道了。

现在，当我在我的 Android 项目中包含静态库时，我是否也想要包含每个依赖库，或者我可以链接到我真正感兴趣的序列化库吗？我的猜测是，我还必须链接到序列化和每个依赖的静态库，但我想确定。（不必将它们都包括在内，可以节省我大量的时间、试验和错误）。

有没有一种简单的方法可以查看boost库之间的依赖关系是什么，所以我将来在构建boost时会知道编译序列化实际需要什么，或者在项目中包含哪些库（如果不仅仅是我想要的）？获得最终编译的推动是一种“喷洒和祈祷”的方法。

# xcode - 如何将 NSControl 连接到 IB 中的 Action *和*标签？

> ID：15113582
> 
> 赞同：1
> 
> 时间：2013-02-27T13:42:32.623
> 
> 标签：xcode, macos, interface-builder, action, nsslider

我正在尝试将 NSSlider 连接到标签 (takeIntValueFrom) 以显示其值，以及我的 .xib 中的 IBAction。但是，连接其中一个会断开另一个连接。

我可以以编程方式执行此操作，但我想知道 IB 中是否有办法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T13:43:28.737

**不，这是不可能的**

OSX 应用程序无法进行多操作。

# oracle - 如何在 Oracle 中实现特定的分层查询

> ID：15113595
> 
> 赞同：2
> 
> 时间：2013-02-27T13:43:02.377
> 
> 标签：oracle, hierarchical, connect-by

我有一个看起来像（Oracle 11.2.0.2.0）的表：

```
ParentID    ID       AllowsEntry
NULL        A188     N
A188        1881     Y
NULL        A189     N
A189        1891     Y
1891        189A     Y 
```

业务规则允许非叶级元素具有数据输入，但我需要像不需要那样报告它们我需要能够查询数据库以产生如下输出：

```
ParentID    ID
NULL        A188
A188        1881
NULL        A189
A189        1891_
1891_       189A 
```

所以基本上我需要将允许数据输入到叶级别的中间分支下推。新叶子需要汇总到一个重命名的分支：

```
Old Tree       New Tree
A188           A188         -- remains the same, no data entry at this level
  1881           1881       -- remains the same, data entry allowed at leaf
A189           A189         -- remains the same, no data entry at this level
  1891           1891_      -- this is the level that is wrong
    189A           1891     -- 1891 is push down into a new 1891_ level
                   189A     -- and rolls up into the new level.
                   189B     -- etc. 
```

谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T17:31:10.080

我认为您想向具有`AllowsEnrtry = 'Y'`. 节点元素也应该使用尾随下划线重命名。

您可以使用 UNION ALL 模拟修改后的数据并在此视图上运行递归查询：

```
SQL> WITH DATA AS (
  2     SELECT NULL parentid, 'A188' ID, 'N' allowsEntry FROM dual
  3     UNION ALL SELECT 'A188', '1881', 'Y' FROM dual
  4     UNION ALL SELECT  NULL , 'A189', 'N' FROM dual
  5     UNION ALL SELECT 'A189', '1891', 'Y' FROM dual
  6     UNION ALL SELECT '1891', '189A', 'Y' FROM dual
  7     UNION ALL SELECT '1891', '189B', 'Y' FROM dual
  8  ), leaf_also_nodes AS (
  9     SELECT *
 10       FROM DATA
 11      WHERE allowsEntry = 'Y'
 12        AND ID IN (SELECT parentid FROM DATA)
 13  ), data_plus AS (
 14     SELECT d.parentid,
 15            d.id,
 16            CASE WHEN l.id IS NOT NULL THEN l.id || '_' ELSE d.id
 17            END display_name
 18       FROM DATA d
 19       LEFT JOIN leaf_also_nodes l ON d.id = l.id
 20     UNION ALL
 21     SELECT ID, NULL, ID FROM leaf_also_nodes
 22  )
 23  SELECT rpad(' ', (LEVEL - 1) * 2, ' ') || display_name tree
 24    FROM data_plus
 25   START WITH parentid IS NULL
 26  CONNECT BY (PRIOR ID = parentid);

TREE
-----------------------------------------
A188
  1881
A189
  1891_
    189A
    189B
    1891 
```

# jquery - 3个div，主div作为图像，1个覆盖标题-顶部，另一个覆盖描述底部JQuery

> ID：15113597
> 
> 赞同：0
> 
> 时间：2013-02-27T13:43:14.697
> 
> 标签：jquery, html, hover, slide

我有一个初始阶段必须是什么的示例图像：

![在此处输入图像描述](../Images/c281e73230a726c345cefba8defc2d68.png)

如您所见，我将 div 内的主图像作为背景：宽度和高度 100%

标题 div - 顶部图像 div 的叠加层

和描述 div - 另一个覆盖在底部的图像 div

我正在寻找的是：一旦我将鼠标悬停在 iamge 的任何部分上，标题 div 就会滑出视图，而描述 div 会滑出视图。

有没有人遇到过这种 jQuery 结构的解决方案？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T13:58:55.057

我为你做了一个小jsfiddle。

[http://jsfiddle.net/A2E2n/](http://jsfiddle.net/A2E2n/)

jQuery代码是：

```
$(document).ready(function(){

    $("#img").hover(
      function () {
      $("#title").animate({"top":"-50px"},500);
      $("#desc").animate({"bottom":"-50px"},500);
  },
  function () {
      $("#title").animate({"top":"0px"},500);
      $("#desc").animate({"bottom":"0px"},500);
  }
  );

}); 
```

# java - Swing 样本申请表

> ID：15113600
> 
> 赞同：2
> 
> 时间：2013-02-27T13:43:25.353
> 
> 标签：java, swing

我想出了以下代码：

```
 String[] labels = {"Name: ", "Fax: ", "Email: ", "Address: "};
    int numPairs = labels.length;

    JFrame frame = new JFrame("SpringDemo1");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    //Set up the content pane.

    Container contentPane = frame.getContentPane();
    SpringLayout layout = new SpringLayout();
    contentPane.setLayout(layout);

    for (int i = 0; i < numPairs; i++)
    {
        JLabel lable = new JLabel(labels[i]);
        contentPane.add(lable);
        contentPane.add(new JTextField(15));
    }
    //Display the window.
    frame.pack();
    frame.setVisible(true); 
```

**期待：**

![在此处输入图像描述](../Images/b55dc89be25882281713742fda461a20.png)

**我得到了什么：**
默认值：

![在此处输入图像描述](../Images/c2fa7e26ff9bb0ac5364bd7dcd1dd52e.png)

* * *

调整大小时：

![在此处输入图像描述](../Images/c596e72a2ab2a593eb0ef2e3ca7337be.png)

结果与代码实际/通常的样子无关！

我还尝试复制粘贴并运行现成的代码：从[这里](http://docs.oracle.com/javase/tutorial/uiswing/examples/layout/SpringDemo1Project/src/layout/SpringDemo1.java)下载：

这就是结果的样子：

![在此处输入图像描述](../Images/edfdee8316a9d0e88259156523c0e5d8.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T15:11:46.453

要使用 SpringLayout 将组件放置在正确的位置，您应该使用（[SpringUtilities 类](http://docs.oracle.com/javase/tutorial/uiswing/examples/layout/SpringGridProject/src/layout/SpringUtilities.java)），下载它然后将其包含在您的项目中。你的代码应该是：

```
private static void createAndShowGUI() {
    String[] labels = {"Name: ", "Fax: ", "Email: ", "Address: "};
    int numPairs = labels.length;

    //Create and populate the panel.
    JPanel p = new JPanel(new SpringLayout());
    for (int i = 0; i < numPairs; i++) {
        JLabel l = new JLabel(labels[i], JLabel.TRAILING);
        p.add(l);
        JTextField textField = new JTextField(10);
        l.setLabelFor(textField);
        p.add(textField);
    }

    //Lay out the panel.
    SpringUtilities.makeCompactGrid(p,
                                    numPairs, 2, //rows, cols
                                    6, 6,        //initX, initY
                                    6, 6);       //xPad, yPad

    //Create and set up the window.
    JFrame frame = new JFrame("SpringForm");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    //Set up the content pane.
    p.setOpaque(true);  //content panes must be opaque
    frame.setContentPane(p);

    //Display the window.
    frame.pack();
    frame.setVisible(true);
} 
```

希望对你有帮助！

# android - 包含扩展操作视图的操作栏中的选项卡在旋转时重新出现

> ID：15113604
> 
> 赞同：2
> 
> 时间：2013-02-27T13:43:33.647
> 
> 标签：android, rotation, android-actionbar, actionbarsherlock, android-tabs

在我的 Android 应用程序中，我使用 ActionBarSherlock 来显示两个菜单项。一种是带有折叠操作视图的搜索项。此外，操作栏设置为`ActionBar.NAVIGATION_MODE_TABS`并包含三个选项卡。如果有足够的空间，这些选项卡将显示在操作栏中，否则将显示在操作栏下方。

我的问题出现在有足够空间用于栏中的选项卡的设备上：

![在此处输入图像描述](../Images/75b3a22d0102fe5d4396d37ddecca13d.png)

如果搜索操作视图被扩展，它会显示而不是选项卡，这很好：

![在此处输入图像描述](../Images/db5f9daf176349d951440a2ca67ec40b.png)

但是，如果设备被旋转，当搜索操作视图被扩展时，选项卡会以新的方向重新出现并与搜索操作视图重叠：

![在此处输入图像描述](../Images/cad43da235982753439f9630a31f9e9d.png)

*Galaxy Tab 10.1N*（运行 Android *4.0.4*）和*Galaxy Tab 7.0 Plus N*（运行 Android *3.2*）上的行为相同。有人知道如何解决这个问题吗？我很感激任何帮助！

这是一些代码：

## default_menu.xml

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">    
    <item android:id="@+id/SearchMenuItem"
          android:icon="@drawable/icon_search"
          android:title="@string/Search"
          android:actionLayout="@layout/search"
          android:showAsAction="always|collapseActionView"/>
    <item android:id="@+id/SettingsMenuItem"
          android:icon="@drawable/icon_settings"
          android:title="@string/Settings"
          android:showAsAction="always" />
</menu> 
```

## 搜索.xml

```
<?xml version="1.0" encoding="utf-8"?>

<EditText xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/searchEditText"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:paddingTop="10dip"
    android:paddingRight="8dip"
    android:hint="@string/Search"
    android:textColorHint="@color/white20"
    android:textColor="@color/white"
    android:textSize="14sp"
    android:textCursorDrawable="@null"
    android:drawableLeft="@drawable/icon_search_transparent"
    android:background="@drawable/edit_text_search"
    android:imeOptions="actionSearch"
    android:inputType="text"
    android:lines="1"
    android:maxLines="1"
    android:ellipsize="end" /> 
```

## 这是我添加标签的方法：

```
protected void addTabBar() {
    ActionBar ab = getSupportActionBar();
    ab.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

    ab.addTab(ab.newTab().setText("TAB1").setTabListener(this), false);
    ab.addTab(ab.newTab().setText("TAB2").setTabListener(this), false);
    ab.addTab(ab.newTab().setText("TAB3").setTabListener(this), false);
    ab.selectTab(ab.getTabAt(0));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-06T09:27:51.750

动作栏 Sherlock 中存在一个错误，当力流发生现在它已被删除。请参阅此处的版本历史更新[日志](https://github.com/JakeWharton/ActionBarSherlock/blob/master/CHANGELOG.md)...请更新动作栏 sherlock 或使用动作栏兼容

# perl - 如何在 perl 中进行命令替换？

> ID：15113607
> 
> 赞同：2
> 
> 时间：2013-02-27T13:43:49.173
> 
> 标签：perl

基本上在shell中会做这样的命令替换

```
a=`uname -a` 
```

那么在perl中怎么做呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-27T13:45:34.667

```
$a = qx( uname -a ) 
```

运算符与`qx`反引号相同，但更具可读性。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-27T13:51:39.333

在 Perl 中几乎相同 -

```
$a = `uname -a`; 
```

但是，正如[@William Purcell 所说](https://stackoverflow.com/a/15113645/622310)，`qx`它是相同的并且更具可读性。

# c# - 数据库条目期间的 NullReference 异常 C#

> ID：15113608
> 
> 赞同：0
> 
> 时间：2013-02-27T13:43:49.947
> 
> 标签：c#, nullreferenceexception

我在组合框值处有一个空引用异常。我允许在数据库中为空。但它不起作用。我应该怎么办？我在评论中提到了异常区域：这是我的源代码。

```
private void button1_Click(object sender, EventArgs e)
{
    con.Open();
    cmd.CommandText = "insert into mytable (userid, password, gender) values (@userid, @password, @gender)";
    cmd.Parameters.AddWithValue("@userid", textBox1.Text);
    cmd.Parameters.AddWithValue("@password", textBox2.Text);
    cmd.Parameters.AddWithValue("@gender", comboBox1.SelectedItem.ToString());//Here is exception line (NullReference Exception)
    cmd.ExecuteNonQuery();
    cmd.Clone();
    con.Close();
    MessageBox.Show("Record Added");
}

private void Form2_Load(object sender, EventArgs e)
{
    cmd.Connection = con;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T13:45:39.123

这些几乎总是很容易追踪，而您做到了！所以答案很简单：什么都不是。您需要检查是否选择了某个项目，因为`comboBox1.SelectedItem`可以`null`.

所以， ...

```
if (comboBox1.SelectedItem != null) { 
```

或者， ...

```
if (comboBox1.SelectedIndex > 0) { 
```

通常，您会进行一些验证，以防止它发生这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T13:47:05.807

如果`comboBox1.SelectedItem`为null，则不能调用该`ToString()`函数。（那是你的错误）

利用：

```
cmd.Parameters.AddWithValue("@gender", comboBox1.SelectedItem == null ? null : comboBox1.SelectedItem.ToString()); 
```

# spring - 使用 Spring JDBC 的 PreparedStatementCreator 的正确方法是什么？

> ID：15113610
> 
> 赞同：11
> 
> 时间：2013-02-27T13:43:52.417
> 
> 标签：spring, prepared-statement, jdbctemplate, spring-jdbc

据我了解，在 Java 中使用 PreparedStatement 是我们可以多次使用它。但是我在使用 Spring JDBC 的 PreparedStatementCreator 时有些困惑。

例如考虑以下代码，

```
public class SpringTest {

    JdbcTemplate jdbcTemplate; 
    PreparedStatementCreator preparedStatementCreator; 
    ResultSetExtractor<String> resultSetExtractor;

    public SpringTest() throws SQLException {

        jdbcTemplate = new JdbcTemplate(OracleUtil.getDataSource());

        preparedStatementCreator = new PreparedStatementCreator() {
            String query = "select NAME from TABLE1  where ID=?";
            public PreparedStatement createPreparedStatement(Connection connection) throws SQLException {
                return connection.prepareStatement(query);
            }
        };

        resultSetExtractor  = new ResultSetExtractor<String>() {
            public String extractData(ResultSet resultSet) throws SQLException,
            DataAccessException {
                if (resultSet.next()) {
                    return resultSet.getString(1);
                }
                return null;
            }
        };
    }
    public String getNameFromId(int id){
        return jdbcTemplate.query(preparedStatementCreator, new Table1Setter(id), resultSetExtractor);
    }

    private static class Table1Setter implements PreparedStatementSetter{

        private int id;
        public Table1Setter(int id) {
            this.id =id;
        }
        @Override
        public void setValues(PreparedStatement preparedStatement) throws SQLException {
            preparedStatement.setInt(1, id);
        }
    }
    public static void main(String[] args) {
        try {
            SpringTest  springTest = new SpringTest();

            for(int i=0;i<10;i++){
                System.out.println(springTest.getNameFromId(i));
            }
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }
} 
```

根据这段代码，当我调用 springTest.getNameFromId(int id) 方法时，它会从给定的 id 返回名称，这里我使用 PreparedStatementCreator 创建 PreparedStatement 并使用 PreparedStatementSetter 设置输入参数，并从 ResultSetExtractor 获得结果。但是性能很慢。

在调试并查看 PreparedStatementCreator 和 JdbcTemplate 内部发生的情况后，我知道 PreparedStatementCreator 每次都会创建新的 PreparedStatement ...！！！

每次当我调用方法 jdbcTemplate.query(preparedStatementCreator,preparedStatementSetter,resultSetExtractor) 时，它都会创建新的 PreparedStatement，这会降低性能。

这是使用 PreparedStatementCreator 的正确方法吗？因为在这段代码中我无法重用 PreparedStatement。如果这是使用 PreparedStatementCreator 的正确方法，那么如何从 PreparedStatement 的可重用性中获益？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T12:37:23.033

您使用 PreparedStatementCreator 的方式是正确的。

1.  在每个新事务中，您都应该创建全新的***PreparedStatement***实例，这绝对是正确的。***PreparedStatementCreator***主要用于包装代码块以轻松创建***PreparedStatement***实例，并不是说您应该在每个项目中重新创建新实例。
2.  PreparedStatement主要用于发送模板化和预编译的SQL语句DBMS，为SQL执行节省一些预编译时间。

总而言之，您所做的是正确的。使用***PreparedStatement***会比***Statement***有更好的性能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T12:48:31.577

Prepared Statements通常由底层连接池缓存，因此您不必担心每次都创建一个新的。

所以我认为你的实际用法是正确的。

JdbcTemplate 在执行后关闭语句，所以如果你真的想重用同一个准备好的语句，你可以代理语句并拦截语句创建器中的 close 方法

例如（未测试，仅作为示例）：

```
public abstract class ReusablePreparedStatementCreator implements PreparedStatementCreator {

    private PreparedStatement statement;

    public PreparedStatement createPreparedStatement(Connection conn) throws SQLException {
        if (statement != null)
            return statement;

        PreparedStatement ps = doPreparedStatement(conn);

        ProxyFactory pf = new ProxyFactory(ps);
        MethodInterceptor closeMethodInterceptor = new MethodInterceptor() {

            @Override
            public Object invoke(MethodInvocation invocation) throws Throwable {
                return null;  // don't close statement
            }
        };

        NameMatchMethodPointcutAdvisor closeAdvisor = new NameMatchMethodPointcutAdvisor();
        closeAdvisor.setMappedName("close");
        closeAdvisor.setAdvice(closeMethodInterceptor);
        pf.addAdvisor(closeAdvisor);

        statement = (PreparedStatement) pf.getProxy();

        return statement;       
    }

    public abstract PreparedStatement doPreparedStatement(Connection conn) throws SQLException;

    public void close() {
        try {
            PreparedStatement ps = (PreparedStatement) ((Advised) statement).getTargetSource().getTarget();
            ps.close();
        } catch (Exception e) {
            // handle exception
        }
    }

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-04T05:27:16.733

> 在调试并查看 PreparedStatementCreator 和 JdbcTemplate 内部发生的情况后，我知道 PreparedStatementCreator 每次都会创建新的 PreparedStatement ...！！！

我不确定为什么会如此令人震惊，因为`PreparedStatement`每次调用`connection.prepareStatement(query);`. 如果你想重复使用同一个，那么你不应该创建一个新的。

# javascript - jQuery $.each push(this) 无法正常工作

> ID：15113613
> 
> 赞同：1
> 
> 时间：2013-02-27T13:43:59.007
> 
> 标签：javascript, jquery, arrays

实际上我想创建一个简单的数组度假村。

```
var preSelected = "13_335 14_555";
var arrayClasses = preSelected.split(' ');
var arrayClassesSorted = new Array();

$.each(arrayClasses, function() {
//var elCount = $("li."+ this).size();
elCount = 20 ...... ;
arrayClassesSorted[elCount] = this;
    ....
}); 
```

结果应该是一个看起来像这样的数组（如果没有 li 类，计数器不起作用...）：

```
Array (
  [20] => 14_555
) 
```

但我得到的结果是这样的：

```
[20] => Array
    (
        [0] => 1
        [1] => 4
        [2] => _
        [3] => 5
        [4] => 5
        [5] => 5
) 
```

现在我想知道，为什么“this”会为这个数组创建第二个维度。

如果把它放入 String(this)，它的工作。但在这种情况下，这真的是“这个”的预期结果吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T13:47:36.783

我认为这只是控制台向您显示的内容，它实际上并不意味着您有一个二维数组。不要把你看到的一切都当作真理。

您正在分配一个字符串**对象**而不是字符串**原语**，并且控制台将该对象视为*类似数组的*对象，因为它具有 a`.length`和数字属性。

以下是 Chrome 控制台为字符串对象和字符串原语打印的内容：

```
> console.log(new String('foo'));
  String {0: "f", 1: "o", 2: "o"}
  undefined
> console.log('foo');
  foo
  undefined 
```

* * *

您应该始终避免使用字符串对象，因为它们会导致意外行为：

```
> new String('foo') === 'foo'
  false 
```

更好地分配原始值：

```
$.each(arrayClasses, function(val) {
    //var elCount = $("li."+ this).size();
    elCount = 20 ...... ;
    arrayClassesSorted[elCount] = val;
    ....
}); 
```

* * *

“字符串对象从何而来？” 你可能会问。

您正在分配`this`给数组：

```
arrayClassesSorted[elCount] = this; 
```

并且`this`将始终是一个对象（原始值被转换为对象），除非函数在[*严格模式下运行* ^([MDN])](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/Strict_mode)。

# jsf - java.lang.ClassNotFoundException: javax.servlet.jsp.jstl.core.Config

> ID：15113628
> 
> 赞同：51
> 
> 时间：2013-02-27T13:44:45.853
> 
> 标签：jsf, jstl, classnotfoundexception

当我在输入 URL 后运行我的应用程序时，这个异常来了。我使用的是 Eclipse 和 Tomcat7.0.35。我还添加了 Jstl.jar 和 jstl1.2.jar

我的代码是

```
java.lang.ClassNotFoundException: javax.servlet.jsp.jstl.core.Config
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1714)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)
    at org.apache.myfaces.view.jsp.JspViewDeclarationLanguage.buildView(JspViewDeclarationLanguage.java:91)
    at org.apache.myfaces.lifecycle.RenderResponseExecutor.execute(RenderResponseExecutor.java:78)
    at org.apache.myfaces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:241)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:199)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-02-27T13:50:38.683

该错误告诉您它找不到该类，因为它在您的应用程序中不可用。

如果您使用的是*Maven*，请确保您具有`jstl`工件的依赖项：

```
<dependency>
      <groupId>javax.servlet</groupId>
      <artifactId>jstl</artifactId>
      <version>1.2</version>
</dependency> 
```

如果您不使用它，只需确保将 JAR 包含在类路径中即可。请参阅[此答案](https://stackoverflow.com/a/292916/1300817)以获取下载链接。

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2013-02-27T14:00:35.790

下载以下 jar 并将其添加到您的`WEB-INF/lib`目录中：

*   [jsp-api-2.0.jar](http://repo1.maven.org/maven2/javax/servlet/jsp-api/2.0/jsp-api-2.0.jar)
*   [jstl-1.2.jar](http://repo1.maven.org/maven2/javax/servlet/jstl/1.2/jstl-1.2.jar)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-02-27T13:49:47.920

默认情况下，Tomcat 容器不包含任何 jstl 库。要修复它，如果您在 Maven 项目中工作，请在 Maven pom.xml 文件中声明 jstl.jar 或将其添加到应用程序的类路径中

```
<dependency>
    <groupId>javax.servlet</groupId>
    <artifactId>jstl</artifactId>
    <version>1.2</version>
  </dependency> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-27T13:47:47.027

将`jstl`jar 添加到您的应用程序类路径。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-27T13:47:27.507

您的类路径中可能缺少 jstl 库/tomcat 无法访问。

您需要在您的目录中至少添加以下 jar 文件`WEB-INF/lib`：

*   jsf-impl.jar
*   jsf-api.jar
*   jstl.jar

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-02-17T19:56:51.290

只是一个简短的评论：有时 Maven 不会将 jstl-.jar 复制到 WEB-INF 文件夹，即使 pom.xml 有它的条目。

我不得不手动将 JSTL jar 复制到文件系统上的 /WEB-INF/lib 中。这解决了问题。该问题可能与 Maven 战争打包插件有关。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-03-11T12:43:01.340

将[JSTL 库](http://mvnrepository.com/artifact/javax.servlet/jstl/1.2)作为依赖项添加到您的项目（`javax.servlet.jsp.jstl.core.Config`是此包的一部分）。例如，如果您使用的是[Gradle](http://gradle.org/)，您可以在 build.gradle 中编写：

```
dependencies {
    compile 'javax.servlet:jstl:1.2'
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-04-13T23:46:11.353

我有同样的问题。转到 Project Properties -> Deployment Assemplbly 并添加 jstl jar

# registration - Buddypress注册提交到哪个文件？

> ID：15113638
> 
> 赞同：0
> 
> 时间：2013-02-27T13:45:17.787
> 
> 标签：registration, buddypress

我的意思是 register.php 提交到哪个文件？

```
form action="" name="signup_form" id="signup_form" class="standard-form" method="post" enctype="multipart/form-data 
```

注意表单 action=""... 文件在哪里？

我需要编辑将注册数据插入数据库的文件。

这很重要，请告诉我谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-20T17:00:28.983

检查 bp-members 文件夹，您将在其中找到文件“bp-members-screens.php”。在注册用户之前，数据就是这样。可能无法完全解决您的问题，但它肯定会有所帮助，因为您的标题有答案。

为什么？我被要求用 BuddyPress 创建一个 WP 网站，但他们的安全性很差，我有很多幽灵注册和垃圾邮件发送者。当我尝试检查提交操作时，我发现它是空的，因此很难添加额外的安全性......好吧，我确实在那个文件中放置了额外的例程，所以提交了操作。

我花时间研究，网上没有明确的信息，这是我能得到的最接近的信息，最终解决了我的问题。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-20T13:45:54.020

它应该是您在buddypress 设置中设置的页面。默认为 /register。

# xml - 保存后 Word 自定义功能区重复

> ID：15113639
> 
> 赞同：0
> 
> 时间：2013-02-27T13:45:20.137
> 
> 标签：xml, vba, ribbon, ms-word

我在 MS Word 2007 功能区中创建了一个自定义选项卡。该选项卡及其所有功能都可以正常工作，并保存在启用宏的模板中。但是，在基于此模板创建新文档时，将其保存为普通 Word 文档或启用宏的文档然后关闭它：当我重新打开此文档文件时，自定义选项卡已复制自身！

由于这是在严重锁定的计算机和网络上开发的，因此我可以使用的工具相当有限。我仅限于用于 XML 方面的自定义 UI 编辑器工具和 VBA。我已经包含了创建工具栏的 XML 的开头。如果使用限定选项卡 ID，则选项卡内容在同一选项卡中重复。如果使用非限定选项卡名称，则整个选项卡会在功能区中复制自身。

我对此完全不知所措。自定义工具栏的两个实例都可以正常工作 - 只是其中有两个实例，而且很多人都会使用这个模板！

```
<?xml version="1.0" encoding="UTF-8" standalone ="yes"?>
<customUI xmlns="http://schemas.microsoft.com/office/2006/01/customui">
  <ribbon>
    <tabs>
    <tab id="rxTabCompanyName"
    label="Company Name Toolbar"
    insertBeforeMso="TabHome"
    tag="CompanyNameToolbarTag">
    <group id="rxgrpCompanyNameReportStyles"
           label="Report Text Styles">
      <box id="rxboxStyleX"
           boxStyle="horizontal">
        <menu id="rxmnuAllStyles"
              label="All Styles"
              supertip="List all styles"
              showLabel="true"
              image="AtkStyles"
              size="normal"> 
```

ETC...

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T14:26:49.833

我认为您的问题是因为您基于模板（*.dotx 或 *.dotm）创建了一个新文档，并且该模板包含用于显示功能区选项卡的功能区 XML。新文档也将包含相同的 XML，并将显示它自己版本的功能区选项卡。

我建议您创建两个模板文件：

*   一个包含功能区 XML 和响应用户操作、加载列表等所需的任何代码。将此模板复制到 Office 安装的 STARTUP 文件夹。

*   第二个只是一个空白 dotx，没有任何代码或功能区，但具有您想要的外观和内容。

根据第二个模板创建新文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T02:18:44.937

您是否在不同版本的 MS-Word 中打开并创建了新文档。如果模板是在早期版本中创建的，我已经看到使用 MS-Word 2010 会发生重复。

我已经对功能区命名空间进行了额外的引用，以便在 2007 年或 2010 年加载功能区：

customUI xmlns="http://schemas.microsoft.com/office/2009/07 / **customui** "

代替：

**customUI** xmlns=" http://schemas.microsoft.com/office/2006/01/customui

Ron de Bruin 的提示解释了 Excel 的类似问题： [http ://www.rondebruin.nl/ribbonx20072010.htm](http://www.rondebruin.nl/ribbonx20072010.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T14:18:37.213

您是否正在创建基于“dotm”模板的新文档？或者您是否正在打开“docm”文件（用作模板）并将其保存为新名称？

与 Excel 不同，Word 将新文档链接到其模板，因此当它基于模板 (dotm) 时，功能区不会复制到新的“实例化”文档。

但是，如果您使用“docm”文件作为模板，则（文档级别）功能区将被复制到“另存为”文件中。

这可能不是正在发生的事情，但这是一种可能性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-02T10:07:03.493

是否找到了解决此问题的方法，因为我遇到了同样的问题，即我的 .docm 仍然包含 customui？

我对 word 文档和模板的理解是文档（.docx 和docm）不包含功能区自定义，而模板（.dotx 和.dotm）包含。

我已经使用 customui 编辑器删除了自定义，但仍然想知道为什么这个启用宏的特定文档保留了自定义选项卡，因为如果我使用全新的模板测试这种情况，所有后续文档都不包含 customui。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-07T12:28:21.637

同样的问题在这里......我不知道它什么时候发生。但我想分享我的解决方法来修复很多文件。这是一个小 vba 脚本，用于删除目录中每个文件中的（加倍的）自定义功能区。确保 .dotm 文件不在目录中！

```
Private Sub remover()
Dim re As String
Dim docdir As String

Dim fs As Object
Dim fVerz As Object
Dim docFiles As Object
Dim docFile As Object

Dim wdApp As Object
Dim wdDoc As Object

docdir = "C:\your\destination\path"

Set fs = CreateObject("scripting.FileSystemObject")
Set fVerz = fs.getFolder(docdir)
Set docFiles = fVerz.Files

'loop all files
For Each docFile In docFiles
    If InStr(docFile, "") > 0 Then
        re = Shell("zip """ & docFile & """ -d ""*customUI.xml""", vbNormalFocus)
    End If
Next docFile 
End Sub 
```

# cakephp - cakephp saveAll 关联的模型字段未保存

> ID：15113648
> 
> 赞同：2
> 
> 时间：2013-02-27T13:45:39.077
> 
> 标签：cakephp, model

我目前正在使用 cakephp 2.2.3。

我有以下模型关联：

> 车辆模型 -> 车辆 -> 订单
> 
> 计划 -> 订单
> 
> 车辆HABTM标签

在 Vehicle 控制器中，添加操作，我有：

```
if(!empty($this->request->data)) {

    if($this->Vehicle->saveAll($this->request->data)) {

        $this->Session->setFlash('Vehicle was successfully added.');
    }

} 
```

$this->request->data 数组的格式如下：

```
array(
    'VehicleModel' => array(
        'category_id' => '2',
        'make_id' => '1'
    ),
    'Order' => array(
        'plan_id' => '2'
    ),
    'Vehicle' => array(
        'vehicle_model_id' => '13',
        'price' => ' 8700',
        'year' => '1994',
        'km' => '100',
        'color' => '61',
        'fuel' => '1',
        'gear' => '20',
        'type' => '51',
        'city' => 'Rio de Janeiro',
        'state' => 'RJ'
    ),
    'Tag' => array(
        'Tag' => array(
            (int) 0 => '69',
            (int) 1 => '11'
        )
    )
) 
```

**订单表**具有以下字段：

> id 、 plan_id 、 vehicle_id 、 created 、 modified 。

车型：

```
class Vehicle extends AppModel {

    public $belongsTo = array('User' , 'VehicleModel');
    public $hasMany = array('Order' , 'Image');
    public $hasAndBelongsToMany = array('Accessory' , 'Tag');
} 
```

订购型号：

```
class Order extends AppModel {

    public $belongsTo = array('Vehicle' , 'Part' , 'Plan');

    public $validate = array(
        'plan_id' => array(
            'rule' => 'notEmpty'
        )
    );

} 
```

我遇到的问题是 Order.plan_id 字段没有被保存，尽管所有其他字段都正常保存。我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T05:40:40.020

> 需要明确的是，当我手动进行多次保存时，一切正常。我的意思是，当我写：
> 
> ```
> $this->Vehicle->save() 
> ```
> 
> 然后设置
> 
> ```
> $this->request->data['Order']['vehicle_id'] = $this->Vehicle->id 
> ```
> 
> 最后
> 
> ```
> $this->Vehicle->Order->save() 
> ```
> 
> 一切正常。是 saveAll 给我带来了麻烦。

如果是这种情况，请查看在哪里`$this->request->data['Order']['vehicle_id'] = $this->Vehicle->id`。将此与上面的 var 转储进行比较，订单从不包含与主模型的关系，这让我问这是您要保存的新记录还是更新？如果您要设置新记录，我认为您可能不必在此处使用 saveAll，因为尚未设置主 ID。请参见：

[http://book.cakephp.org/2.0/en/models/saving-your-data.html#saving-related-model-data-hasone-hasmany-belongsto](http://book.cakephp.org/2.0/en/models/saving-your-data.html#saving-related-model-data-hasone-hasmany-belongsto)

**特别是：** “如果系统中还没有关联的模型记录（例如，您要同时保存一个新用户及其相关的 Profile 记录），您需要先保存主模型或父模型。”

他们基本上做你正在做的长版本。

# r - 无需更换即可实现更快的加权采样

> ID：15113650
> 
> 赞同：49
> 
> 时间：2013-02-27T13:45:48.813
> 
> 标签：r, performance, algorithm

> **这个问题导致了一个新的 R 包：** [`wrswoR`](https://github.com/muelleki/wrswoR)

R 的默认采样不使用替换`sample.int`似乎需要二次运行时间，例如，当使用从均匀分布中提取的权重时。对于大样本量，这很慢。有人知道**可以在 R 中使用**的更快的实现吗？两个选项是“rejection sampling with replacement”（参见stats.sx 上的[这个问题）和](https://stats.stackexchange.com/q/20590/6432)[Wong 和 Easton（1980）的算法（在](http://epubs.siam.org/doi/abs/10.1137/0209009)[StackOverflow 答案](https://stackoverflow.com/a/2149533/946850)中使用 Python 实现）。

感谢 Ben Bolker 暗示了在`sample.int`使用`replace=F`和非均匀权重调用时在内部调用的 C 函数：`ProbSampleNoReplace`。实际上，代码显示了两个嵌套`for`循环（第 420 行 ff 的行[`random.c`](https://github.com/wch/r-source/blob/trunk/src/main/random.c)）。

这是根据经验分析运行时间的代码：

```
library(plyr)

sample.int.test <- function(n, p) {
    sample.int(2 * n, n, replace=F, prob=p); NULL }

times <- ldply(
  1:7,
  function(i) {
    n <- 1024 * (2 ** i)
    p <- runif(2 * n)
    data.frame(
      n=n,
      user=system.time(sample.int.test(n, p), gcFirst=T)['user.self'])
  },
  .progress='text'
)

times

library(ggplot2)
ggplot(times, aes(x=n, y=user/n)) + geom_point() + scale_x_log10() +
  ylab('Time per unit (s)')

# Output:
       n   user
1   2048  0.008
2   4096  0.028
3   8192  0.100
4  16384  0.408
5  32768  1.645
6  65536  6.604
7 131072 26.558 
```

![阴谋](../Images/dbfa50d41d249e9c1b435fd2d2d18174.png)

**编辑**：感谢 Arun 指出未加权采样似乎没有这种性能损失。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-04T20:45:20.987

**更新：**

[Efraimidis 和 Spirakis](http://www.sciencedirect.com/science/article/pii/S002001900500298X)算法的`Rcpp`实现（感谢 @Hemmo、@Dinrem、@krlmlr 和[@rtlgrmpf](https://stackoverflow.com/a/12476317/1320535)）：

```
library(inline)
library(Rcpp)
src <- 
'
int num = as<int>(size), x = as<int>(n);
Rcpp::NumericVector vx = Rcpp::clone<Rcpp::NumericVector>(x);
Rcpp::NumericVector pr = Rcpp::clone<Rcpp::NumericVector>(prob);
Rcpp::NumericVector rnd = rexp(x) / pr;
for(int i= 0; i<vx.size(); ++i) vx[i] = i;
std::partial_sort(vx.begin(), vx.begin() + num, vx.end(), Comp(rnd));
vx = vx[seq(0, num - 1)] + 1;
return vx;
'
incl <- 
'
struct Comp{
  Comp(const Rcpp::NumericVector& v ) : _v(v) {}
  bool operator ()(int a, int b) { return _v[a] < _v[b]; }
  const Rcpp::NumericVector& _v;
};
'
funFast <- cxxfunction(signature(n = "Numeric", size = "integer", prob = "numeric"),
                       src, plugin = "Rcpp", include = incl)

# See the bottom of the answer for comparison
p <- c(995/1000, rep(1/1000, 5))
n <- 100000
system.time(print(table(replicate(funFast(6, 3, p), n = n)) / n))

      1       2       3       4       5       6 
1.00000 0.39996 0.39969 0.39973 0.40180 0.39882 
   user  system elapsed 
   3.93    0.00    3.96 
# In case of:
# Rcpp::IntegerVector vx = Rcpp::clone<Rcpp::IntegerVector>(x);
# i.e. instead of NumericVector
      1       2       3       4       5       6 
1.00000 0.40150 0.39888 0.39925 0.40057 0.39980 
   user  system elapsed 
   1.93    0.00    2.03 
```

**旧版：**

让我们尝试一些可能的方法：

**带替换的简单拒绝抽样。**这是一个比`sample.int.rej`@krlmlr 提供的更简单的功能，即样本大小始终等于`n`. 正如我们将看到的，假设权重均匀分布，它仍然非常快，但在另一种情况下非常慢。

```
fastSampleReject <- function(all, n, w){
  out <- numeric(0)
  while(length(out) < n)
    out <- unique(c(out, sample(all, n, replace = TRUE, prob = w)))
  out[1:n]
} 
```

**Wong 和 Easton (1980) 的算法**。这是[此](https://stackoverflow.com/a/2149533/946850)Python 版本的实现。它很稳定，我可能会遗漏一些东西，但与其他功能相比它要慢得多。

```
fastSample1980 <- function(all, n, w){
  tws <- w
  for(i in (length(tws) - 1):0)
    tws[1 + i] <- sum(tws[1 + i], tws[1 + 2 * i + 1], 
                      tws[1 + 2 * i + 2], na.rm = TRUE)      
  out <- numeric(n)
  for(i in 1:n){
    gas <- tws[1] * runif(1)
    k <- 0        
    while(gas > w[1 + k]){
      gas <- gas - w[1 + k]
      k <- 2 * k + 1
      if(gas > tws[1 + k]){
        gas <- gas - tws[1 + k]
        k <- k + 1
      }
    }
    wgh <- w[1 + k]
    out[i] <- all[1 + k]        
    w[1 + k] <- 0
    while(1 + k >= 1){
      tws[1 + k] <- tws[1 + k] - wgh
      k <- floor((k - 1) / 2)
    }
  }
  out
} 
```

**Wong 和 Easton 对算法的 Rcpp 实现。**可能它可以进一步优化，因为这是我的第一个可用`Rcpp`功能，但无论如何它运行良好。

```
library(inline)
library(Rcpp)

src <-
'
Rcpp::NumericVector weights = Rcpp::clone<Rcpp::NumericVector>(w);
Rcpp::NumericVector tws = Rcpp::clone<Rcpp::NumericVector>(w);
Rcpp::NumericVector x = Rcpp::NumericVector(all);
int k, num = as<int>(n);
Rcpp::NumericVector out(num);
double gas, wgh;

if((weights.size() - 1) % 2 == 0){
  tws[((weights.size()-1)/2)] += tws[weights.size()-1] + tws[weights.size()-2];
}
else
{
  tws[floor((weights.size() - 1)/2)] += tws[weights.size() - 1];
}

for (int i = (floor((weights.size() - 1)/2) - 1); i >= 0; i--){
  tws[i] += (tws[2 * i + 1]) + (tws[2 * i + 2]);
}
for(int i = 0; i < num; i++){
  gas = as<double>(runif(1)) * tws[0];
  k = 0;
  while(gas > weights[k]){
    gas -= weights[k];
    k = 2 * k + 1;
    if(gas > tws[k]){
      gas -= tws[k];
      k += 1;
    }
  }
  wgh = weights[k];
  out[i] = x[k];
  weights[k] = 0;
  while(k > 0){
    tws[k] -= wgh;
    k = floor((k - 1) / 2);
  }
  tws[0] -= wgh;
}
return out;
'

fun <- cxxfunction(signature(all = "numeric", n = "integer", w = "numeric"),
                   src, plugin = "Rcpp") 
```

现在一些结果：

```
times1 <- ldply(
  1:6,
  function(i) {
    n <- 1024 * (2 ** i)
    p <- runif(2 * n) # Uniform distribution
    p <- p/sum(p)
    data.frame(
      n=n,
      user=c(system.time(sample.int.test(n, p), gcFirst=T)['user.self'],
             system.time(weighted_Random_Sample(1:(2*n), p, n), gcFirst=T)['user.self'],
             system.time(fun(1:(2*n), n, p), gcFirst=T)['user.self'],
             system.time(sample.int.rej(2*n, n, p), gcFirst=T)['user.self'],
             system.time(fastSampleReject(1:(2*n), n, p), gcFirst=T)['user.self'],
             system.time(fastSample1980(1:(2*n), n, p), gcFirst=T)['user.self']),
      id=c("Base", "Reservoir", "Rcpp", "Rejection", "Rejection simple", "1980"))
  },
  .progress='text'
)

times2 <- ldply(
  1:6,
  function(i) {
    n <- 1024 * (2 ** i)
    p <- runif(2 * n - 1)
    p <- p/sum(p) 
    p <- c(0.999, 0.001 * p) # Special case
    data.frame(
      n=n,
      user=c(system.time(sample.int.test(n, p), gcFirst=T)['user.self'],
             system.time(weighted_Random_Sample(1:(2*n), p, n), gcFirst=T)['user.self'],
             system.time(fun(1:(2*n), n, p), gcFirst=T)['user.self'],
             system.time(sample.int.rej(2*n, n, p), gcFirst=T)['user.self'],
             system.time(fastSampleReject(1:(2*n), n, p), gcFirst=T)['user.self'],
             system.time(fastSample1980(1:(2*n), n, p), gcFirst=T)['user.self']),
      id=c("Base", "Reservoir", "Rcpp", "Rejection", "Rejection simple", "1980"))
  },
  .progress='text'
) 
```

![在此处输入图像描述](../Images/651e597238677c56596943a26dcd79f1.png)

![在此处输入图像描述](../Images/6e179c8ce217329f58075819bea47cbe.png)

```
arrange(times1, id)
       n  user               id
1   2048  0.53             1980
2   4096  0.94             1980
3   8192  2.00             1980
4  16384  4.32             1980
5  32768  9.10             1980
6  65536 21.32             1980
7   2048  0.02             Base
8   4096  0.05             Base
9   8192  0.18             Base
10 16384  0.75             Base
11 32768  2.99             Base
12 65536 12.23             Base
13  2048  0.00             Rcpp
14  4096  0.01             Rcpp
15  8192  0.03             Rcpp
16 16384  0.07             Rcpp
17 32768  0.14             Rcpp
18 65536  0.31             Rcpp
19  2048  0.00        Rejection
20  4096  0.00        Rejection
21  8192  0.00        Rejection
22 16384  0.02        Rejection
23 32768  0.02        Rejection
24 65536  0.03        Rejection
25  2048  0.00 Rejection simple
26  4096  0.01 Rejection simple
27  8192  0.00 Rejection simple
28 16384  0.01 Rejection simple
29 32768  0.00 Rejection simple
30 65536  0.05 Rejection simple
31  2048  0.00        Reservoir
32  4096  0.00        Reservoir
33  8192  0.00        Reservoir
34 16384  0.02        Reservoir
35 32768  0.03        Reservoir
36 65536  0.05        Reservoir

arrange(times2, id)
       n  user               id
1   2048  0.43             1980
2   4096  0.93             1980
3   8192  2.00             1980
4  16384  4.36             1980
5  32768  9.08             1980
6  65536 19.34             1980
7   2048  0.01             Base
8   4096  0.04             Base
9   8192  0.18             Base
10 16384  0.75             Base
11 32768  3.11             Base
12 65536 12.04             Base
13  2048  0.01             Rcpp
14  4096  0.02             Rcpp
15  8192  0.03             Rcpp
16 16384  0.08             Rcpp
17 32768  0.15             Rcpp
18 65536  0.33             Rcpp
19  2048  0.00        Rejection
20  4096  0.00        Rejection
21  8192  0.02        Rejection
22 16384  0.02        Rejection
23 32768  0.05        Rejection
24 65536  0.08        Rejection
25  2048  1.43 Rejection simple
26  4096  2.87 Rejection simple
27  8192  6.17 Rejection simple
28 16384 13.68 Rejection simple
29 32768 29.74 Rejection simple
30 65536 73.32 Rejection simple
31  2048  0.00        Reservoir
32  4096  0.00        Reservoir
33  8192  0.02        Reservoir
34 16384  0.02        Reservoir
35 32768  0.02        Reservoir
36 65536  0.04        Reservoir 
```

显然我们可以拒绝函数`1980`，因为它比`Base`这两种情况都慢。`Rejection simple`当第二种情况下只有一个概率为 0.999 时，也会遇到麻烦。

所以剩下`Rejection`, `Rcpp`, `Reservoir`. 最后一步是检查值本身是否正确。为了确定它们，我们将使用它们`sample`作为基准（也是为了消除`p`由于没有替换的抽样而不必一致的概率的混淆）。

```
p <- c(995/1000, rep(1/1000, 5))
n <- 100000

system.time(print(table(replicate(sample(1:6, 3, repl = FALSE, prob = p), n = n))/n))
      1       2       3       4       5       6 
1.00000 0.39992 0.39886 0.40088 0.39711 0.40323  # Benchmark
   user  system elapsed 
   1.90    0.00    2.03 

system.time(print(table(replicate(sample.int.rej(2*3, 3, p), n = n))/n))
      1       2       3       4       5       6 
1.00000 0.40007 0.40099 0.39962 0.40153 0.39779 
   user  system elapsed 
  76.02    0.03   77.49 # Slow

system.time(print(table(replicate(weighted_Random_Sample(1:6, p, 3), n = n))/n))
      1       2       3       4       5       6 
1.00000 0.49535 0.41484 0.36432 0.36338 0.36211  # Incorrect
   user  system elapsed 
   3.64    0.01    3.67 

system.time(print(table(replicate(fun(1:6, 3, p), n = n))/n))
      1       2       3       4       5       6 
1.00000 0.39876 0.40031 0.40219 0.40039 0.39835 
   user  system elapsed 
   4.41    0.02    4.47 
```

注意这里的几件事。由于某种原因`weighted_Random_Sample`返回不正确的值（我根本没有研究过，但假设均匀分布它可以正常工作）。`sample.int.rej`重复采样很慢。

总之，`Rcpp`在重复采样的情况下，这似乎是最佳选择，而在`sample.int.rej`其他情况下速度更快，也更易于使用。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-03-04T15:30:55.250

我决定深入研究其中的一些评论，发现[Efraimidis 和 Spirakis](http://www.sciencedirect.com/science/article/pii/S002001900500298X#)的论文很吸引人（感谢 @Hemmo 找到参考）。论文中的总体思路是这样的：通过生成一个随机统一数并将其提高到每个项目权重的 1 次方来创建一个密钥。然后，您只需将最高的键值作为样本。这效果很好！

```
weighted_Random_Sample <- function(
    .data,
    .weights,
    .n
    ){

    key <- runif(length(.data)) ^ (1 / .weights)
    return(.data[order(key, decreasing=TRUE)][1:.n])
} 
```

如果将 '.n' 设置为 '.data' 的长度（应该始终是 '.weights' 的长度），这实际上是一个加权的储层置换，但该方法适用于采样和置换。

**更新**：我可能应该提到上述函数期望权重大于零。否则`key <- runif(length(.data)) ^ (1 / .weights)`将无法正确订购。

* * *

只是为了好玩，我还使用了 OP 中的测试场景来比较这两个功能。

```
set.seed(1)

times_WRS <- ldply(
1:7,
function(i) {
    n <- 1024 * (2 ** i)
    p <- runif(2 * n)
    n_Set <- 1:(2 * n)
    data.frame(
      n=n,
      user=system.time(weighted_Random_Sample(n_Set, p, n), gcFirst=T)['user.self'])
  },
  .progress='text'
)

sample.int.test <- function(n, p) {
sample.int(2 * n, n, replace=F, prob=p); NULL }

times_sample.int <- ldply(
  1:7,
  function(i) {
    n <- 1024 * (2 ** i)
    p <- runif(2 * n)
    data.frame(
      n=n,
      user=system.time(sample.int.test(n, p), gcFirst=T)['user.self'])
  },
  .progress='text'
)

times_WRS$group <- "WRS"
times_sample.int$group <- "sample.int"
library(ggplot2)

ggplot(rbind(times_WRS, times_sample.int) , aes(x=n, y=user/n, col=group)) + geom_point() + scale_x_log10() +  ylab('Time per unit (s)') 
```

以下是时间：

```
times_WRS
#        n user
# 1   2048 0.00
# 2   4096 0.01
# 3   8192 0.00
# 4  16384 0.01
# 5  32768 0.03
# 6  65536 0.06
# 7 131072 0.16

times_sample.int
#        n  user
# 1   2048  0.02
# 2   4096  0.05
# 3   8192  0.14
# 4  16384  0.58
# 5  32768  2.33
# 6  65536  9.23
# 7 131072 37.79 
```

![性能比较](../Images/8e5063e3b9c6544f6806a82cdbb3ce6a.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-04T15:02:43.920

让我介绍一下我自己的一种基于[rejection sampling with replacement](https://stats.stackexchange.com/q/20590/6432)的更快方法的实现。这个想法是这样的：

*   生成一个比请求大小“有点”大的替换*样本*

*   丢弃重复的值

*   如果没有绘制足够的值，则使用adjusted和`n`参数 递归调用相同的过程`size``prob`

*   将返回的索引重新映射到原始索引

我们需要抽取多大的样本？假设均匀分布，结果是在[N 个总值中看到 x 个唯一值的预期试验次数](https://math.stackexchange.com/questions/247569/expected-number-of-trials-to-see-x-unique-values-out-of-n-total-values)。它是两个[谐波数](http://en.wikipedia.org/wiki/Harmonic_number)（H_n 和 H_{n - size}）的差。前几个谐波数列在表格中，否则使用使用自然对数的近似值。（这只是一个大概的数字，这里不需要太精确。）现在，对于非均匀分布，预期要抽取的项目数只能更大，所以我们不会抽取太多样本。此外，抽取的样本数量受到人口规模两倍的限制——我假设进行一些递归调用比抽样到 O(n ln n) 个项目要快。

代码可在 中例程的 R 包`wrswoR`中`sample.int.rej`找到[`sample_int_rej.R`](https://github.com/muelleki/wrswoR/blob/master/R/sample_int_rej.R)。安装：

```
library(devtools)
install_github('wrswoR', 'muelleki') 
```

它似乎“足够快”地工作，但是尚未进行正式的运行时测试。此外，该软件包仅在 Ubuntu 中进行了测试。感谢您的反馈。

# visual-studio - 回滚 tfs 中的变更集

> ID：15113652
> 
> 赞同：56
> 
> 时间：2013-02-27T13:45:58.287
> 
> 标签：visual-studio, tfs, visual-studio-2012

使用 Visual Studio 2012 和 TFS 2012，我想将变更集回滚到之前的变更集。

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2013-02-27T14:55:25.990

在 TFS 2012 中，

1.  查看要回滚的事物的历史记录。
2.  选择要回滚的变更集。
3.  右键单击更改集并选择“回滚”。
4.  检查挂起的更改是否正确（回滚命令将恢复整个更改集，而不仅仅是您选择的文件）
5.  报到。

在 TFS 2010 中，您可以`tf rollback`从 Visual Studio 命令提示符调用该命令，也可以安装[TFS 电动工具](http://visualstudiogallery.msdn.microsoft.com/c255a1e4-04ba-4f68-8f4e-cd473d6b971f)并使用与上述相同的过程

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-03-08T19:13:48.200

在 TFS / Visual Studio 2012 中，您有几个选项。

**回滚到特定版本**

在源代码管理资源管理器中：

*   右键单击要回滚的分支
*   单击回滚...
*   选择回滚到特定版本
*   输入您希望回滚到的变更集编号。

**回滚单个变更集（您也可以通过上面加载的对话框执行此操作）**

*   右键单击要回滚的变更集
*   选择回滚整个变更集

签入回滚。

* * *

## 回答 #3

> 赞同：-8
> 
> 时间：2013-02-27T13:48:46.427

我从未使用过 TFS 2012，但这在 2010 年有效

获取特定版本并选择要回滚到的版本，然后再次签入该代码。

# c# - 网络部署部署skiprule

> ID：15113653
> 
> 赞同：3
> 
> 时间：2013-02-27T13:46:03.870
> 
> 标签：c#, webdeploy

我正在尝试在 c# 中使用 web deploy api，除了一件事我试图排除根 web.config 文件并且我找不到正确的方法之外，我已经涵盖了大多数内容。

目前我有这个代码：

```
 var syncOptions = new DeploymentSyncOptions { DeleteDestination = false };
        syncOptions.Rules.Add(new DeploymentSkipRule("DontUpdateRootConfig", "update", "", "Web.config", "")); 
```

但这会忽略所有 web.config 文件，它应该只忽略根 web.config 文件。

下面的代码不起作用。它只是传输所有配置文件，包括根 web.config。

```
 var syncOptions = new DeploymentSyncOptions { DeleteDestination = false };
        syncOptions.Rules.Add(new DeploymentSkipRule("DontUpdateRootConfig", "update", "", "\\Web.config", "")); 
```

如何仅忽略根 web.config 文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T14:34:28.590

“绝对路径”参数是一个正则表达式。

我以这种方式解决了我的问题

```
var siteAndAppName = "example.com";
var syncOptions = new DeploymentSyncOptions { DeleteDestination = false };
syncOptions.Rules.Add(new DeploymentSkipRule("DontUpdateRootConfig", "update", "", siteAndAppName + "\\\\Web.config", "")); 
```

# iphone - 如何防止 ALAssetsLibrary 获取带有图书馆图像的视频缩略图？

> ID：15113654
> 
> 赞同：1
> 
> 时间：2013-02-27T13:46:05.950
> 
> 标签：iphone, objective-c, xcode, alassetslibrary, alasset

我正在使用以下代码访问所有 ALAssetsLibrary 图像，但 ALAssetsLibrary 为我提供了保存的视频缩略图图像以及来自 ALAssetsLibrary 的保存图像。如何使用代码防止这种情况，以便我只能获取保存的图像？

```
//Method to get all images from devices library
 - (NSMutableArray*)getAllImagesFromLibrary
 {
     //get all images from image library
     void (^assetEnumerator)(ALAsset *, NSUInteger, BOOL *) = ^(ALAsset *result, NSUInteger index, BOOL *stop) {
     if(result != NULL) {
         //Insert objects into array
         [self.arrOfAllImages addObject:result];
        }
     };

     void (^assetGroupEnumerator)(ALAssetsGroup *, BOOL *) =  ^(ALAssetsGroup *group, BOOL *stop) {
     if(group != nil) {
         [group enumerateAssetsUsingBlock:assetEnumerator];
        }
     };

     //NSMutableArray allacation
     NSMutableArray *arrOfAllImage = [[NSMutableArray alloc] init];
     static dispatch_once_t pred = 0;
     static ALAssetsLibrary *library = nil;
     dispatch_once(&pred, ^{
         library = [[ALAssetsLibrary alloc] init];
     });

     [library enumerateGroupsWithTypes:ALAssetsGroupSavedPhotos
     usingBlock:assetGroupEnumerator
     failureBlock: ^(NSError *error) {
         NSLog(@"Failure");
     }];

     return arrOfAllImage;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T16:05:32.637

在枚举之前设置一个[过滤器：](http://developer.apple.com/library/ios/#documentation/AssetsLibrary/Reference/ALAssetsFilter_Class/Reference/Reference.html)

```
[group setAssetsFilter: [ALAssetsFilter allPhotos]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T15:58:52.123

检查您的结果，如果它会对添加数组进行成像，否则不会

```
void (^assetEnumerator)(ALAsset *, NSUInteger, BOOL *) = ^(ALAsset *result, NSUInteger index, BOOL *stop) {
    if(result != NULL) {
        if ([[result valueForProperty:ALAssetPropertyType] isEqualToString:ALAssetTypePhoto])
        {
            //Insert objects into array
            [self.arrOfAllImages addObject:result];
        }
    }
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T04:48:24.893

**您可以通过ALAssetsGroupType**提及多种类型的 Asset

 **他们是

```
 ALAssetsGroupLibrary        
   ALAssetsGroupAlbum          
   ALAssetsGroupEvent          
   ALAssetsGroupFaces          
   ALAssetsGroupSavedPhotos    
   ALAssetsGroupPhotoStream    
   ALAssetsGroupAll 
```

1

> **ALAssetsGroup 库**
> 
> 包含从 iTunes 同步的所有资产的资料库组。
> 
> 在 iOS 4.0 及更高版本中可用。
> 
> 中宣布`ALAssetsLibrary.h`。

2

> **ALAssetsGroup相册**
> 
> 在设备上创建或从 iTunes 同步的所有专辑，不包括照片流或共享流
> 
> 在 iOS 4.0 及更高版本中可用。
> 
> 中宣布`ALAssetsLibrary.h`。

3

> **ALAssetsGroupEvent**
> 
> 所有事件，包括在相机连接套件导入期间创建的事件。
> 
> 在 iOS 4.0 及更高版本中可用。
> 
> 中宣布`ALAssetsLibrary.h`。

4

> **ALAssetsGroupFaces**
> 
> 从 iTunes 同步的所有面孔专辑。
> 
> 在 iOS 4.0 及更高版本中可用。
> 
> 中宣布`ALAssetsLibrary.h`。

5

> **ALAssetsGroupSavedPhotos**
> 
> 相机胶卷中的所有照片。
> 
> 在 iOS 4.0 及更高版本中可用。
> 
> 中宣布`ALAssetsLibrary.h`。

6

```
**ALAssetsGroupPhotoStream**

The PhotoStream album.

In iOS 6.0 and later, this also includes Shared Streams.

Available in iOS 5.0 and later.

Declared in `ALAssetsLibrary.h`. 
```

7

> **ALAssetsGroupAll**
> 
> 与除 ALAssetsGroupLibrary 之外的所有组类型进行 ORing 相同。
> 
> 在 iOS 4.0 及更高版本中可用。
> 
> 中宣布`ALAssetsLibrary.h`。

您可以查看更多详细信息[developer.apple](http://developer.apple.com/library/ios/documentation/AssetsLibrary/Reference/ALAssetsLibrary_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40009722-CH1-SW16)

**示例**：

```
 [library enumerateGroupsWithTypes:ALAssetsGroupSavedPhotos
     usingBlock:assetGroupEnumerator
     failureBlock: ^(NSError *error) {
         NSLog(@"Failure");
     }]; 
```**

# ios - Nimbus 与使用 cocoapods 的 iOS 4.3 不兼容

> ID：15113655
> 
> 赞同：4
> 
> 时间：2013-02-27T13:46:12.773
> 
> 标签：ios, objective-c, nimbus, cocoapods

当我尝试使用[cocoapods](http://cocoapods.org/)安装[Nimbus](http://nimbuskit.info/)时，出现以下错误：`[!] Nimbus (1.0.0) is not compatible with iOS 4.3.`

我不确定这个 iOS 4.3 是从哪里来的。但这里有更多细节：

我的 Podfile 内容：

```
platform :ios

pod 'AFNetworking', '0.9.1'

pod 'SSToolkit'
pod 'ConciseKit'
pod 'Nimbus' 
```

当我跑步时，`pod install`我得到：

```
warning: Insecure world writable dir /usr/local in PATH, mode 040777
warning: Insecure world writable dir /usr/local in PATH, mode 040777
Resolving dependencies of `./Podfile'
Updating spec repositories

Cocoapods 0.17.0.rc1 is available.

Resolving dependencies for target `default' (iOS 4.3)
[!] Nimbus (1.0.0) is not compatible with iOS 4.3. 
```

想法？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-27T13:53:59.173

当您不定义 iOS 版本时，cocoapods 假定 4.3 为默认版本

例如，如果您将 Podfile 定义如下，您的项目`platform :ios, '5.0'`的最低 iOS 版本将为 5.0

在您的情况下，这意味着 Nimbus 将更高的 iOS 版本号定义为其 podspec 中的最小值。根据您的项目最低目标，更新您的 Podfile 以支持更高版本或检查之前版本的 Nimbus 是否与 ios 4.3 兼容

用于为 pod 定义特定版本，`pod 'Nimbus', '0.X.Y'`其中 X 和 Y 是版本号

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-05-01T07:26:25.710

在您的 pod 文件中，将平台 :ios 替换为平台 :ios,'7.1'

# sql - 在生产中测试部署的方法？

> ID：15113658
> 
> 赞同：1
> 
> 时间：2013-02-27T13:46:16.180
> 
> 标签：sql, sql-server, sql-server-2012

我必须在生产数据库中实现许多更改，从创建新表到更改一些程序和约束。生产中的实施由第三方供应商手动完成。我必须向他们发送每个脚本的文件。我担心工具会出错或发生任何事情。但是由于我必须在阶段部署与生产中相同的脚本，所以在部署到其他环境之前，我必须制作一个好的验证后脚本。

所以，我有在每个表、视图和过程中留下评论的想法，以便测试它们，但我不太确定使用这种方法。

有一种更好的方法可以测试更改是否成功应用，而无需从表中插入/更新/删除或不运行程序，并从控制台获取“行”，以便部署的人复制并粘贴我的输出消息？

类似于...如果未创建程序或用户无权访问，则打印“ERROR ON THIS”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T14:05:16.853

1.  我会阅读 Andy 关于“数据库测试驱动开发”的博客。 [http://sqlblog.com/blogs/andy_leonard/archive/2012/08/07/revisiting-test-driven-database-development.aspx](http://sqlblog.com/blogs/andy_leonard/archive/2012/08/07/revisiting-test-driven-database-development.aspx)

2\. 我会以幂等的方式编写每个脚本。在计算中，幂等操作是指使用相同的输入参数多次调用它时不会产生额外影响的操作。

3\. A. 让第三方供应商在运行脚本时向您发送 SSMS 屏幕的“文本输出”或 B. 使用 sqlcmd.exe，并使用日志记录功能，并要求他们向您发送 .log文件。

-o 输出文件

[http://msdn.microsoft.com/en-us/library/ms162773.aspx](http://msdn.microsoft.com/en-us/library/ms162773.aspx)

这是一个“幂等”的 .sql 文件。如果 dbo.Employee.LastName 列最初是 64 个字符，则此脚本会更改它。更改为“不存在”（并删除 CHARACTER_MAXIMUM_LENGTH 检查）以创建以前不存在的任何列（这是我 99% 的脚本在已经“服务”的数据库上的样子）。还要注意变量的 sqlcmd“占位符”。但是我可以运行下面的脚本 1 次或 333 次，结果是一样的。

```
Use [$(DBNAME)]
GO

:Error $(ErrorOutputFileFromCommandLine) 

IF EXISTS (    SELECT TABLE_SCHEMA , TABLE_NAME FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_NAME = 'Employee' and TABLE_SCHEMA = 'dbo'    )
    BEGIN

        IF EXISTS 
        (
            SELECT * 
                FROM [INFORMATION_SCHEMA].[COLUMNS] 
            WHERE   
                TABLE_NAME = 'Employee' 
                AND TABLE_SCHEMA = 'dbo'
                AND COLUMN_NAME = 'LastName'
                AND CHARACTER_MAXIMUM_LENGTH < 128
        )
            BEGIN
                print 'Altering the column dbo.Employee.*LastName*'

                ALTER TABLE [dbo].[Employee]
                ALTER COLUMN [LastName] varchar(128) NOT NULL;

            END
        ELSE
            BEGIN
                print 'The column dbo.Employee.*LastName* already exists and supports 128 characters.'
            END

    END

GO 
```

# php - 通过 dblib 使用 MSSQL 时 PDO 连接所需的替代方案

> ID：15113659
> 
> 赞同：3
> 
> 时间：2013-02-27T13:46:21.987
> 
> 标签：php, database, pdo

我需要使用 PHP 连接到远程 MSSQL 服务器。我已经使用 dblib 成功连接，但它有一些非常“讨厌”的限制。

我发现它无法获取 ntext 格式的列行，有一个简单的解决方法，但它限制了输出（通过查询将 ntext 转换为 nvarchar），然后我注意到它也有获取行的问题以十进制格式（或者看起来，不幸的是，为所有内容抛出的一般错误 4004 并不是很有帮助）。

我喜欢需要太多的黑客攻击，有没有更好的方法来解决这个问题，也许我应该研究一个不同的数据库库来寻找我的连接？

值得注意的是，我使用 mssql_* 取得了巨大成功，但这显然不是一个理想的方法，我希望继续使用 PDO。

* * *

值得注意的事情；

我在 Debian 上运行，我知道微软已经发布了 ODBC 驱动程序，但是他们的驱动程序下载有问题，因此不起作用（至少在非 RHEL 系统上似乎没有）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T13:59:39.843

不要使用[`dblib/mssql:`](http://www.php.net/manual/en/ref.pdo-dblib.php)驱动程序。

如果您在 Windows 上，请使用[`sqlsrv:`驱动程序](http://www.php.net/manual/en/ref.pdo-sqlsrv.php)。（您必须下载一些 DLL——链接的说明。）

如果您使用的是 unix，请使用[PDO`odbc:`驱动程序](http://php.net/manual/en/ref.pdo-odbc.php)，最好使用 unixODBC 风格。在 Debian 和 Ubuntu 上，您可以通过简单的`apt-get install php5-odbc`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T21:07:52.967

当我执行时：

```
TDSDUMPCONFIG=stdout TDSDUMP=stdout tsql -S <name in TDS.conf> -U '<domain>\<username>' -p 1443 -P <password> 
```

我明白了：

```
log.c:196:Starting log file for FreeTDS 0.91
        on 2013-03-22 15:55:50 with debug flags 0x4fff.
config.c:185:Getting connection information for [XXX].
config.c:189:Attempting to read conf files.
config.c:354:... $FREETDSCONF not set.  Trying $FREETDS/etc.
config.c:367:... $FREETDS not set.  Trying $HOME.
config.c:293:Could not open '/home/hillb/.freetds.conf' ((.freetds.conf)).
config.c:297:Found conf file '/etc/freetds/freetds.conf' (default).
config.c:483:Looking for section global.
config.c:540:   Found section global.
config.c:543:Got a match.
config.c:565:   text size = '64512'
config.c:540:   Found section egserver50.
config.c:540:   Found section egserver70.
config.c:540:   Found section XXX.
config.c:554:   Reached EOF
config.c:483:Looking for section XXX.
config.c:540:   Found section global.
config.c:540:   Found section egserver50.
config.c:540:   Found section egserver70.
config.c:540:   Found section XXX.
config.c:543:Got a match.
config.c:565:   host = 'XXX'
config.c:595:Found host entry XXX.
config.c:599:IP addr is xxx.xxx.xxx.xxx.
config.c:565:   port = '1433'
config.c:565:   tds version = '8.0'
config.c:788:Setting tds version to 8.0 (0x701) from $TDSVER.
config.c:554:   Reached EOF
config.c:301:Success: [XXX] defined in /etc/freetds/freetds.conf.
config.c:714:Setting 'dump_file' to 'stdout' from $TDSDUMP.
config.c:224:Final connection parameters:
config.c:225:            server_name = XXX
config.c:226:       server_host_name = XXX
config.c:227:                ip_addr = xxx.xxx.xxx.xxx
config.c:228:          instance_name =
config.c:229:                   port = 1433
config.c:230:          major_version = 7
config.c:231:          minor_version = 1
config.c:232:             block_size = 0
config.c:233:               language = us_english
config.c:234:         server_charset =
config.c:235:        connect_timeout = 0
config.c:236:       client_host_name = x
config.c:237:         client_charset = UTF-8
config.c:238:               app_name = TSQL
config.c:239:              user_name = <domain>\<username>
config.c:242:                library = TDS-Library
config.c:243:              bulk_copy = 0
config.c:244:      suppress_language = 0
config.c:245:          encrypt level = 0
config.c:246:          query_timeout = 0
config.c:249:               database =
config.c:250:              dump_file = stdout
config.c:251:            debug_flags = 0
config.c:252:              text_size = 64512
config.c:253:           broken_dates = 0
config.c:254:     emul_little_endian = 0
config.c:255:      server_realm_name =
log.c:196:Starting log file for FreeTDS 0.91
        on 2013-03-22 15:55:50 with debug flags 0x4fff.
locale is "en_US.UTF-8"
locale charset is "UTF-8"
using default charset "UTF-8"
iconv.c:330:tds_iconv_open(0x98cb9e8, UTF-8)
iconv.c:187:local name for ISO-8859-1 is ISO-8859-1
iconv.c:187:local name for UTF-8 is UTF-8
iconv.c:187:local name for UCS-2LE is UCS-2LE
iconv.c:187:local name for UCS-2BE is UCS-2BE
iconv.c:349:setting up conversions for client charset "UTF-8"
iconv.c:351:preparing iconv for "UTF-8" <-> "UCS-2LE" conversion
iconv.c:391:preparing iconv for "ISO-8859-1" <-> "UCS-2LE" conversion
iconv.c:394:tds_iconv_open: done
net.c:205:Connecting to xxx.xxx.xxx.xxx port 1433 (TDS version 7.1)
net.c:270:tds_open_socket: connect(2) returned "Operation now in progress"
net.c:310:tds_open_socket() succeeded
util.c:156:Changed query state from DEAD to IDLE
net.c:741:Sending packet 
```

[十六进制转储已编辑]

```
token.c:555:processing result tokens.  marker is  fd(DONE)
token.c:2339:tds_process_end: more_results = 0
                was_cancelled = 0
                error = 0
                done_count_valid = 0
token.c:2355:tds_process_end() state set to TDS_IDLE
util.c:156:Changed query state from READING to IDLE
token.c:2370:                rows_affected = 0
util.c:104:logic error: cannot change query state from IDLE to PENDING
token.c:540:tds_process_tokens(0x98cb9e8, 0xbf82fb48, 0xbf82fb4c, 0x100)
token.c:543:tds_process_tokens() state is COMPLETED
locale is "en_US.UTF-8"
locale charset is "UTF-8"
using default charset "UTF-8" 
```

你到底在找什么？

# neural-network - 估计神经网络的平均误差超平面

> ID：15113660
> 
> 赞同：3
> 
> 时间：2013-02-27T13:46:24.140
> 
> 标签：neural-network

我有一个神经网络，我需要估计平均超平面，它表示所有训练示例的平均误差。训练示例同时出现。例如，如果我有一个单变量函数，那么我需要找到表示函数平均值的行。对于我的应用程序，不需要精确的平均值，启发式也可以。

所有训练示例中每个输出神经元的平均输出。在哪里：

```
t_j' = sum_i_1_to_N (t_i_j)/N 
```

训练示例的每个输出神经元的平均输出（如上计算）与每个示例的实际目标输出之间的平方差之和：

```
Avg Error = 1/2 * sum_i_1_to_N (sum_j_1_C (t_j' - t_i_j))^2) 
```

这是一种启发式方法，但我想知道它如何在`Avg Error`某个训练集上保持不变。

这种方式有效吗？有没有更好的方法来找到固定训练集的神经网络的平均值（种类）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-21T07:29:02.923

在不了解您的问题的情况下，我会说不。

> 平均误差 = 1/2 * sum_i_1_to_N (sum_j_1_C (t_j' - t_i_j))^2)

以上看起来更像是标准偏差而不是平均值。这不会告诉你太多，考虑一下：

`Error = sum_i_1_to_N (sum_j_1_C ( ABS(c_j' - t_i_j) ))`

（`c_j`j 处的正确输出在哪里）

现在您正在寻找与数值均值相同目的的计算便宜的数字（您可以将所有数字除以 N 以获得实际均值，但您为什么要打扰？）。RMS 如下所示：

`ErrorRMS = sum_i_1_to_N (sum_j_1_C ( ABS(e_j' - t_i_j)^2 ))`

无论您想要 RMS 还是平均值取决于您的问题，但通常情况下，这并不重要（具有较低 RMS 的集合无论如何都会*倾向于*具有较低的平均值，因此您*主要是*在进化相同的东西） .

请注意，`Error`这些`ErrorRMS`实际上并不是平均值或 RMS 值，但它们的排名相同，而且获得起来更便宜。

除此之外，假设您有一个具有多个输出的神经网络，通过多个步骤操作（从而产生您正在谈论的错误超平面），那么我首先建议以不同的方式构建问题。

您应该拥有一个具有超过 1 个输出的神经网络的唯一原因是，输出只能相互关联地理解。否则，您应该训练`N`神经网络，而不是 1 个带`N`输出的神经网络。话虽如此，如果您不能在一个步骤中产生一个错误来描述网络的*所有*输出，也许您应该将其划分为多个网络？然后，您可以简单地在测试网络的样本上获取误差的 RMS 或直接平均值。

这有意义吗？

# windows-phone-8 - 在 Windows Phone 8 中以编程方式创建相册

> ID：15113666
> 
> 赞同：1
> 
> 时间：2013-02-27T13:46:41.860
> 
> 标签：windows-phone-8, windows-phone

我正在为 Windows Phone 8 开发应用程序，它允许用户下载图标。如果该应用程序能够以编程方式在图片中心创建自定义相册并将图标保存在那里而不是将图像保存在名为`Saved Images`.

有没有办法在 Windows Phone 8 中创建相册并将图像保存到该文件夹​​？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T14:46:39.453

不幸的是，这是不可能的。

保存到媒体库时唯一可用的选项是保存到“[相机胶卷”](http://msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.xna.framework.media.medialibrary.savepicturetocameraroll%28v=xnagamestudio.42%29.aspx)或“[已保存图片](http://msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.xna.framework.media.medialibrary.savepicture%28v=xnagamestudio.42%29.aspx)”文件夹。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T14:47:17.943

不知道我怎么能把这个..让我做最简单的方法..

不，您不能在手机的图片库上创建自定义文件夹。

但是，您可以使用 skydrive 并在那里创建一个文件夹，然后使用它来做您需要做的任何事情。

它可以从设备上的相册中访问。

隐士

# asp.net - IIS7.5 中 x64 进程的内存限制

> ID：15113668
> 
> 赞同：4
> 
> 时间：2013-02-27T13:46:45.957
> 
> 标签：asp.net, .net, iis-7.5, clr

Windows Web 服务器 2008 R2 (x64) & .Net Framework 4.5

这是一个经典的 ASP.Net 网站（不是 web 项目，代码在**App_Code**目录中，并在网站启动时编译）

它依赖于**/Bin**目录中的许多参考 DLL。对于那些我有源代码的 DLL，我将它们编译为“x64”平台。

而且我还有一些其他没有源代码的DLL（mysql.data.dll / etc），它们被编译为“任何CPU”。我在*EditBin.exe*中修改了它们，以确保`IMAGE_FILE_LARGE_ADDRESS_AWARE`在它们的 PE 标头中指示标志。

根据这张表：http: [//msdn.microsoft.com/en-us/library/aa366778%28VS.85%29.aspx#memory_limits](http://msdn.microsoft.com/en-us/library/aa366778%28VS.85%29.aspx#memory_limits)

**除非设置了IMAGE_FILE_LARGE_ADDRESS_AWARE** ，否则 x64 进程不能使用超过 2GB 的内存。

如何验证它是否有效？有没有什么地方可以看到运行 x64 进程的内存限制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-03T05:58:16.380

我不知道您是否真的可以明确说明“看到内存限制”（假设您不信任您引用的 MS 自己的文档），而不是动手并深入研究 IIS 和/或 ASP.NET 源代码.

话虽如此，您可以尝试对站点进行压力测试，并监控内存消耗（通过`Task Manager`或`Process Monitor`），看看它是否超过 2GB。我会推荐[IIS 6 Resource Kit](https://www.microsoft.com/en-us/download/details.aspx?id=17275)`tinyget`的一部分，它[仍然可以与 IIS 7 一起使用](https://blogs.msdn.microsoft.com/kaevans/2011/04/14/tinyget-for-sharepoint/)。

`tinyget -svr:localhost -uri:/<your site> -loop:200 -threads:20`

您必须使用循环和线程数来尝试将其推送到 2GB 以上。`System.OutOfMemoryException`当您接近大约 1.4GB 的组合物理和虚拟私有字节时，我希望看到一个。您可能希望在站点本身中创建压力测试功能，*当然仅用于测试目的*，这将通过使用与良好实践完全相反的方式帮助您达到此限制。[您可以在此处](https://support.microsoft.com/en-us/kb/2020006)阅读有关导致 System.OutOfMemoryException` 的更多信息，然后执行他们建议反对的事情。例如，添加一个仅在一个非常大的循环中连接字符串的测试方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T14:00:03.760

尝试 procexp，来自 sysinternals [here](http://technet.microsoft.com/en-us/sysinternals/bb842062.aspx)。此应用程序可以监控 .NET 特定指标。

不过，根据您的链接，您应该至少能够处理 8GB。

请记住，执行 IMAGE_FILE_LARGE_ADDRESS_AWARE 与您的情况无关。您可以将所有组件编译为针对“任何 CPU”，唯一检查的标志是可执行文件的标志。

# asp.net - 标签在 FooterTemplate/Panel/SecurePanel/Div 中使用时不起作用

> ID：15113671
> 
> 赞同：2
> 
> 时间：2013-02-27T13:46:57.993
> 
> 标签：asp.net, label

遍历 Site_materials 表，找到的任何匹配项都将它们存储在“NumberOFDeliveries”中，这是应该在屏幕上显示它们的标签的 ID。

```
 //DELIVERIES
        int NumberOfDeliveries = (from Deliveries in db.Site_Materials
                              where Deliveries.Diary_Entry_Id == this.DiaryEntryId
                              select Deliveries).ToList().Count();
        if (NumberOfDeliveries > 0)
        {
            NoOfDeliveriesOnSite.Text = System.Convert.ToString(NumberOfDeliveries);
        }
        else
        {
            NoOfDeliveriesOnSite.Text = "0";
        } 
```

如果我在我的 aspx 页面中使用以下标签，则 t 会按预期显示。但是我在尝试将其显示在我想要的位置时遇到了问题...在 FooterTemplate/Panel/SecurePanel/Div 内

```
<FooterTemplate>
                        <asp:Panel runat="server" ID="AllLinks" HorizontalAlign="Center" Width="600px" >
                            <mesh:SecurePanel runat="server" ID="EmployeeLink" CssClass="SmallBoxLink" WebMasters="true" Admins="true" Clients="true" Employees="true">
                                <div style="height:25px; margin-top:12px; margin-bottom:12px;">
    <asp:Label ID="Delivery" runat="server" Text="Deliveries=" /><asp:Label ID="NoOfDeliveriesOnSite" runat="server" /> 
```

正如我所说，这段代码工作正常并显示正确的数量（当在 aspx 页面上的差异位置使用时）但是当我尝试将它显示在我想要的位置时，我得到了错误：来自 cs. 声明“NoOfDeliveriesOnSite”的页面不存在。

关于为什么的任何想法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T16:48:01.990

如果它在页脚中，则需要将控制编号设置为 -1。在这个例子中，我在页脚中有一个我想要处理的标签：

```
dim myLabel as label
myLable = myDataRepeater.Controls(myDataRepeater.Controls.Count - 1).FindControl("lableName") 
```

如果您尝试在用户控件中查找某个控件，则可能需要添加一个 notehr .FindControl 方法，即：

```
myLable = myDataRepeater.Controls(myDataRepeater.Controls.Count - 1).FindControl("lableName").findControls("anotherControl") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T13:51:45.377

您必须在它们所在的任何容器中找到控件。

您需要在问题中提供的代码示例上方添加它，以便您对该变量的引用有效：

```
SecurePanel EmployeeLink = (SecurePanel)AllLinks.FindControl("EmployeeLink");
Label NoOfDeliveriesOnSite = (Label)EmployeeLink.FindControl("NoOfDeliveriesOnSite"); 
```

根据您`FooterTemplate`的用途（`GridView`,`FormView`等），您可能还需要首先在其中找到“AllLinks” `Panel`。

# r - 从数据框中绘制时间序列

> ID：15113676
> 
> 赞同：1
> 
> 时间：2013-02-27T13:47:15.317
> 
> 标签：r, plot, dataframe

我正在尝试以这种格式从数据框中绘制时间序列：

```
Gene    t1  t2  t3      t4  t5
geneA   0.171708555542224   0.767412947810676   0.754849467082325   0.893904836629662   -0.451533145139049
geneB   0.32989453548287    0.304464261184109   0.632407796520215   1.2965570364275 -0.00269630000204213
geneC   1.47092503615513    0.708756145675017   1.27888805232732    1.45653164709635    0.913461102204938
geneD   0.379307974619187   0.577591822285932   -0.203915993729493  0.0743865362148819  0.561894770555292
geneE   -0.162029544343246  0.332622377925421   1.18614452957358    1.87262670303989    0.100212594882377
CG10170-RA  -0.152808420012908  -0.294930227688068  0.935190065253332   1.98475948430149    0.282560916666689 
```

对于每个基因（行），我希望有一条线代表 5 个不同时间点（列）的表达值。

这应该是相当微不足道的，但到目前为止我找不到方法......最简单的方法是什么？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T14:04:59.687

假设`DF`数据框首先将其置于更标准的形式中，其中每一列都是时间序列。然后使用`matplot`：

```
m <- setNames(t(DF[-1]), DF[[1]])
n <- nrow(m)
matplot(1:n, m) 
```

或者使用 zoo，我们可以使用经典图形、晶格图形或 ggplot2 图形对每个图形使用单个或多个面板进行绘制：

```
library(zoo)

z <- zoo(m)

# classic graphics
plot(z) # multiple panels
plot(z, screens = 1, col = 1:n) # one panel

library(lattice)
xyplot(z)
xyplot(z, screens = 1, col = 1:n)

library(ggplot2)
autoplot(z)
autoplot(z, facets = NULL) + aes(linetype = NULL) 
```

# ios - 使用“为 iOS 设备分发企业应用程序”提供更新的应用程序？

> ID：15113677
> 
> 赞同：4
> 
> 时间：2013-02-27T13:47:16.153
> 
> 标签：ios, uialertview, updates, in-house-distribution

我正在使用苹果的[为 iOS 设备分发企业应用程序分发 iPad 应用程序。](http://help.apple.com/iosdeployment-apps/mac/1.1/#)

在我的应用程序中，更新旧版本以防止访问过期信息非常重要。因此，我实现了应用程序更新机制如下。

当用户启动应用程序时，每次我通过请求我在自己的服务器上创建和托管的 Web 服务来将已安装的构建版本代码与服务器上的版本代码进行比较。如果找到更新，我会要求用户通过升级应用程序，当用户点击更新按钮时，我会按照[此处](https://stackoverflow.com/questions/13154619/update-in-house-apps-ios-enterprise-developer-program#comment18053560_13154837)`UIAlertView`的建议触发指向我服务器上 .plist 的 URL 。

`NSString *appUpgradeUrl = [NSString stringWithString:@"http://domain.com/manifest.plist"];` `NSURL *url = [[NSURL alloc] initWithString:[NSString stringWithFormat:@"itms-services://?action=download-manifest&url=%@", appUpgradeUrl]];` `[[UIApplication sharedApplication] openURL:url];`

现在`UIAlertView`屏幕上会弹出一个，并要求用户使用底部的两个按钮进行确认，取消和安装。当用户点击安装时，它只是被更新的版本替换，当用户点击取消时，它只是消失并且什么也不做。

现在这是我的问题：正如我所说，我想强制用户更新应用程序，更新到更新以防止访问过期信息非常重要。不幸的是，我不能这样做。我想收到有关取消按钮的单击事件的通知，以便我可以通过再次请求应用程序更新来强制用户更新应用程序`UIAlertView`。我可以这样做吗？

让我知道是否有比这更好的想法来强制更新应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-15T19:57:27.790

如其他答案所述，您不能成为系统警报的代表。但是，由于您的应用现在知道它已过时，它可以更改自己的 UI，例如，仅将清单 url 显示为按钮，并且在应用匹配某个版本之前不允许用户执行任何操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T18:24:38.817

在创建`UIAlertView`.

当`alertView:clickedButtonAtIndex:`用户单击警报视图上的按钮时调用。您可以根据单击的按钮的索引来决定要做什么，并`UIAlertView`使用您需要的任何按钮进行设置。（请参阅[UIAlertViewDelegate 协议参考](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIAlertViewDelegate_Protocol/UIAlertViewDelegate/UIAlertViewDelegate.html)。）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-10-03T06:42:33.113

因为我们无法访问系统生成警报的委托。我使用的解决方案是，我将用户重定向到更新屏幕。除非用户更新应用程序，否则他不能使用它的功能。

# c# - OutputCache - 指定要缓存的内容

> ID：15113679
> 
> 赞同：2
> 
> 时间：2013-02-27T13:47:17.143
> 
> 标签：c#, .net, asp.net-mvc, asp.net-mvc-3, outputcache

我使用 OutputCache 属性 [OutputCache(Duration = 3600)] 来缓存返回视图的控制器。但是该视图包含一个 Helper Method，该方法根据 Web.config 属性显示某些信息。问题是这些信息也被缓存了。有没有办法不缓存辅助方法信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T13:52:21.027

不幸的是 ASP.NET MVC 2 及更高版本不支持[甜甜圈缓存](http://haacked.com/archive/2008/11/05/donut-caching-in-asp.net-mvc.aspx)：

> 由于 ASP.NET MVC 2 处理请求的方式不同，替换块中的数据可以在不应该缓存的时候被缓存。不支持 ASP.NET MVC 的替换缓存，并且已从我们的 ASP.NET MVC Futures 项目中删除

这里[`great article`](http://www.devtrends.co.uk/blog/donut-output-caching-in-asp.net-mvc-3)解释了如何在 ASP.NET MVC 3 及更高版本中实现这一点。它基于[`ASP.NET MVC Extensible Donut Caching`](http://mvcdonutcaching.codeplex.com/)Codeplex 上可用的包。

# android - android sqlite 插入到哪里

> ID：15113684
> 
> 赞同：2
> 
> 时间：2013-02-27T13:47:34.727
> 
> 标签：android, sqlite

我想插入现有应用程序数据表的应用程序类别。我不知道我做的是否正确，但在我做的事情中我也得到了这个错误。

我应该如何正确地做到这一点？

**主要活动**

```
 AlertDialog.Builder builder = new AlertDialog.Builder(
            MainActivity.this);
    builder.setTitle("Please Select Category of : " + AppName); 
    builder.setItems(shareItems,
            new DialogInterface.OnClickListener() {
                @Override
                public void onClick(DialogInterface dialog, int item) {
                    // TODO Auto-generated method stub
                    String itemz = String.valueOf(shareItems[item]);
                    mySQLiteAdapter.insertcategory(AppName, itemz);
                }
            });
    AlertDialog shareAlert = builder.create();
    shareAlert.show(); 
```

**处理程序**

```
 public long insertcategory(String AppName, String itemz) {
            // TODO Auto-generated method stub
            Cursor crack = sqlitedb.rawQuery("INSERT INTO " + KEY_CATEGORY
                    + " VALUES ( ' " + itemz + " ' ) WHERE " + KEY_NAME
                    + " LIKE ?", new String[] { "%" + AppName+ "%" });
            return 0;
        } 
```

**更新的查询** 这是我用来更新表的。itemz 将值设为“游戏”，但未更新

```
public long insertcategory(String AppName, String itemz) {
        // TODO Auto-generated method stub

        ContentValues values = new ContentValues();
        values.put(KEY_CATEGORY, itemz);
        return sqlitedb.update(MYDATABASE_TABLE, values, KEY_NAME + " LIKE ?",
                new String[] { "%" + AppName + "%" });

    } 
```

表创建为

```
private static final String SCRIPT_CREATE_DATABASE = "create table "
            + MYDATABASE_TABLE + " (" + KEY_ID
            + " integer primary key autoincrement, " + KEY_NAME
            + " text not null, " + KEY_PACK + " text not null, " + KEY_PERM
            + " text not null, " + KEY_LEVEL + " text not null, "
            + KEY_CATEGORY + " text);"; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T13:55:45.257

The INSERT command does not have a WHERE clause because it inserts a completely new record.

It appears you want to set/change the value in an existing record. This would be done with an UPDATE command:

```
UPDATE MyTable SET category = 'Entertainment' WHERE name LIKE ? 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T13:56:00.217

You can't use `INSERT INTO` then use `WHERE` clause.

INSERT INTO means you're adding a new row in a table, which doesn't exist before. You can use WHERE on UPDATE and SELECT statement but not on INSERT INTO.

I'm guessing you mean UPDATE instead of INSERT INTO:

Try this:

```
public long insertcategory(String AppName, String itemz) {
            // TODO Auto-generated method stub
            Cursor crack = sqlitedb.rawQuery("UPDATE " + KEY_CATEGORY
                    + " SET yourFieldNameHere = ' " + itemz + " '  WHERE " + KEY_NAME
                    + " LIKE ?", new String[] { "%" + AppName+ "%" });
            return 0;
        } 
```

For insert, try this:

```
 public long insertcategory(String AppName, String itemz) {
                // TODO Auto-generated method stub
                Cursor crack = sqlitedb.rawQuery("INSERT INTO " + KEY_CATEGORY
                        + " VALUES(' " + itemz + " ')" });
                return 0;
            } 
```

Change yourFieldNameHere with the name of your table's field.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T14:08:25.313

您不能在 INSERT INTO 中使用 WHERE。如果使用 INSERT 将添加一个新行。如果您需要更新 KEY_NAME LIKE "%AppName% 使用 UPADATE 的行

# azure - 将照片从 Windows 8 上传到 Azure Blob 存储

> ID：15113690
> 
> 赞同：0
> 
> 时间：2013-02-27T13:47:52.227
> 
> 标签：azure, windows-8

Azure SDK 不适用于 Windows 8 APP。

如何从 Windows 8 应用程序将照片上传到 Azure Blob 存储？

我需要工作代码示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T14:15:57.317

无需 Windows Azure SDK 即可将照片从 Windows 8 应用程序上传到 Blob 存储。HttpClient 也可以正常工作：

```
using (var client = new HttpClient())
{
     CameraCaptureUI cameraCapture = new CameraCaptureUI();
     StorageFile media = await cameraCapture.CaptureFileAsync(CameraCaptureUIMode.PhotoOrVideo);
     using (var fileStream = await media.OpenStreamForReadAsync())
     {
          var content = new StreamContent(fileStream);
          content.Headers.Add("Content-Type", media.ContentType);
          content.Headers.Add("x-ms-blob-type", "BlockBlob");

          var uploadResponse = await client.PutAsync(
                                        new Uri(blobUriWithSAS), image);
     }
} 
```

您唯一需要做的就是获取 blob 的 url 以及签名访问签名。[Nick Harris 解释了](http://www.nickharris.net/2012/09/windows-8-how-to-upload-an-image-using-a-blob-storage-sas-generated-by-windows-azure-mobile-services/)如何使用移动服务来做到这一点。

# javascript - 在 JQuery Mobile 应用程序中显示 HighCharts

> ID：15113692
> 
> 赞同：4
> 
> 时间：2013-02-27T13:48:05.083
> 
> 标签：javascript, jquery, css, jquery-mobile, highcharts

我有以下一段 JQuery Mobile 应用程序主页的代码。它基本上是一个简单的主页，带有一个按钮，该按钮重定向到另一个页面（'chart 1'），该页面在页脚中包含 2 个标签栏：一个用于自身（'chart1'），另一个用于另一个页面（'chart2'）。当这些页面被加载时，我想在这两个页面的内容部分添加一些来自 HighCharts 库的图表。我尝试了几种方法（live、bind 等），但似乎没有任何效果。显示图表的唯一方法是使用 ready 方法（见下文）。我的问题是：是否有一种方法可以在单击按钮时在页面的特定区域显示图表？

加载图表的方法：

```
$(document).ready(function() {
var chart = new Highcharts.Chart({
    chart: {
        renderTo: 'containerYear',
        type: 'column',
        margin: [ 50, 50, 100, 80]
    },...and so on
}); 
```

主页代码：

```
 <div data-role="page" data-theme="b" id="main-page">
    <div data-role="header" data-position="fixed">
        <h1>Data</h1>
    </div>
    <div data-role="content">
        <ul data-role="listview" data-inset="true">
            <li data-role="list-divider">Data</li>
            <li><a href="#chart1" id="btn1" data-transition="slide">Graphs</a></li>
        </ul>
    </div>
    <div data-role="footer" data-position="fixed">
        <h4>CTK</h4>
    </div>
</div>

 <div data-role="page" data-theme="b" id="chart1">
    <div data-role="header" data-position="fixed">
       <a href="#main-page" data-icon="arrow-l" data-iconpos="left" data-transition="slide" data-direction="reverse">Back</a>
        <h1>Car Crashes</h1>
    </div>
    <div data-role="content">
        <div id="containerYear"></div>
    </div>
    <div data-role="footer" data-position="fixed">
        <div data-role="navbar">
            <ul>
                <li><a href="#chart1" data-role="tab" class="ui-btn-active">Chart 1</a></li>
                <li><a href="#chart2" data-role="tab" >Chart 2</a></li>
            </ul>
        </div>
    </div>

</div>

<div data-role="page" data-theme="b" id="chart2">
     <div data-role="header" data-position="fixed">
        <a href="#main-page" data-icon="arrow-l" data-iconpos="left" data-transition="slide" data-direction="reverse">Back</a>
        <h1>Car Crashes</h1>
     </div>
     <div data-role="content">
         <div id="containerMonth"></div>
     </div>
     <div data-role="footer" data-position="fixed">
        <div data-role="navbar">
            <ul>
                <li><a href="#chart1" data-role="tab">Chart 1</a></li>
                <li><a href="#chart2" data-role="tab" class="ui-btn-active">Chart 2</a></li>
            </ul>
        </div>
     </div>
</div> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T13:56:34.447

jQuery Mobile 在与其他 js 绘图框架一起使用时是独一无二的。它们只能与 pageshow 事件一起使用。

还有一件事，记得在 jQuery Mobile 初始化后初始化 HighCharts。

这是一个工作示例：http: [//jsfiddle.net/Gajotres/Eg9Xz/](http://jsfiddle.net/Gajotres/Eg9Xz/)

**HTML：**

```
<!DOCTYPE html>
<html>
<head>
    <title>jQM Complex Demo</title>
    <meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; minimum-scale=1.0; user-scalable=no; target-densityDpi=device-dpi"/>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>    
    <script src="http://code.highcharts.com/highcharts.js"></script>
    <script src="http://code.highcharts.com/modules/exporting.js"></script>    
</head>
<body>
    <div data-role="page" id="index">
        <div data-theme="a" data-role="header">
            <h3>
                First Page
            </h3>
            <a href="#second" class="ui-btn-right">Next</a>
        </div>

        <div data-role="content">
            <div id="container" style="min-width: 400px; height: 400px; margin: 0 auto"></div>
        </div>

        <div data-theme="a" data-role="footer" data-position="fixed">

        </div>
    </div>             
</body>
</html> 
```

**Javascript：**

```
$(document).on('pageshow', '#index', function(){    
    var chart;
    $(document).ready(function() {
        chart = new Highcharts.Chart({
            chart: {
                renderTo: 'container',
                type: 'line',
                marginRight: 130,
                marginBottom: 25
            },
            title: {
                text: 'Monthly Average Temperature',
                x: -20 //center
            },
            subtitle: {
                text: 'Source: WorldClimate.com',
                x: -20
            },
            xAxis: {
                categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun',
                    'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
            },
            yAxis: {
                title: {
                    text: 'Temperature (°C)'
                },
                plotLines: [{
                    value: 0,
                    width: 1,
                    color: '#808080'
                }]
            },
            tooltip: {
                formatter: function() {
                        return '<b>'+ this.series.name +'</b><br/>'+
                        this.x +': '+ this.y +'°C';
                }
            },
            legend: {
                layout: 'vertical',
                align: 'right',
                verticalAlign: 'top',
                x: -10,
                y: 100,
                borderWidth: 0
            },
            series: [{
                name: 'Tokyo',
                data: [7.0, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6]
            }, {
                name: 'New York',
                data: [-0.2, 0.8, 5.7, 11.3, 17.0, 22.0, 24.8, 24.1, 20.1, 14.1, 8.6, 2.5]
            }, {
                name: 'Berlin',
                data: [-0.9, 0.6, 3.5, 8.4, 13.5, 17.0, 18.6, 17.9, 14.3, 9.0, 3.9, 1.0]
            }, {
                name: 'London',
                data: [3.9, 4.2, 5.7, 8.5, 11.9, 15.2, 17.0, 16.6, 14.2, 10.3, 6.6, 4.8]
            }]
        });
    });

}); 
```

# ember.js - EmberJS：从商店批量“加载”时未设置模型关联

> ID：15113694
> 
> 赞同：0
> 
> 时间：2013-02-27T13:48:12.163
> 
> 标签：ember.js, ember-data

在我的应用程序的某个地方，服务器一次返回一堆记录。我在 Ember 中处理这个问题的方式是这样的：

```
$.each(json["foos"], function(idx, val){
    DS.get('defaultStore').load(App.Foo, val)
}); 
```

它工作正常，除非涉及到关联。如果我有以下情况：

```
App.Dad = DS.Model.extend({
    sons: DS.hasMany('App.Son')
})

App.Son = DS.Model.extend({
    dad: DS.belongsTo('App.Dad')
}) 
```

如果在代码中我这样做：

```
$.each(json["dads"], function(idx, val){
    DS.get('defaultStore').load(App.Dad, val)
});

$.each(json["sons"], function(idx, val){
    DS.get('defaultStore').load(App.Son, val)
}); 
```

然后每个儿子“知道”它的爸爸（我可以`a_son.get('dad')`），但爸爸不知道他们的儿子：`a_dad.get('sons').get('length')`返回 0。

我想原因是当我加载一个爸爸时，他的儿子还没有加载。但是有没有办法让这个工作？

我可以像这样“手动”做到这一点：

```
$.each(json["sons"], function(idx, val){
    DS.get('defaultStore').load(App.Son, val);
    App.Dad.find(val.dad_id).get('sons').pushObject(App.Son.find(val.id));
}); 
```

但必须这样做似乎很奇怪。

我整理了一个 JSFiddle 来说明这一点：http: [//jsfiddle.net/eq8pB/1/](http://jsfiddle.net/eq8pB/1/)

谢谢！

PJ

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T11:26:15.913

如果它对其他人有帮助：对于 store.load 建立关联，您确实需要在 JSON 中传递父子节点的相应数据。我是说：

```
DS.get('defaultStore').load(App.Dad, {id: 1, name: "Dad"});
DS.get('defaultStore').load(App.Son, {id: 1, name: "Son", dad_id: 1});

// Dad of ID 1 will NOT know who his sons are. cf http://jsfiddle.net/eq8pB/1/
// Son of ID 1 will know who his dad is.

DS.get('defaultStore').load(App.Dad, {id: 1, name: "Dad", sons: [1]});
DS.get('defaultStore').load(App.Son, {id: 1, name: "Son", dad_id: 1});

// Dad of ID 1 WILL know who his sons are. cf http://jsfiddle.net/eq8pB/3/
// Son of ID 1 will know who his dad is. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T22:09:11.140

如果你想建立一个**“一对多”的**关系，你必须重新开课`App.Dad`。

```
App.Dad = DS.Model.extend({
    someProperties: (...)
});

App.Son = DS.Model.extend({
    dad: DS.belongsTo('App.Dad')
});

App.Dad.reopen({
    sons: DS.hasMany('App.Son')
}); 
```

您应该看看[`ember-data test`](https://github.com/emberjs/data/blob/master/packages/ember-data/tests/integration/relationships/one_to_many_relationships_test.js)这是了解 ember 中关系如何运作的好方法。

# python - 如何从pdf文件中获取内容并将其存储在txt文件中

> ID：15113696
> 
> 赞同：0
> 
> 时间：2013-02-27T13:48:15.717
> 
> 标签：python, file-io, python-2.7

```
import pyPdf 
f= open('jayabal_appt.pdf','rb')
pdfl = pyPdf.PdfFileReader(f)
content=""
for i in range(0,1):
   content += pdfl.getPage(i).extractText() + "\n"
outpu = open('b.txt','wb')
outpu.write(content) 
f.close()
outpu.close() 
```

这不是从pdf文件中获取内容并将其存储在txt文件中......这段代码有什么错误？？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:56:57.083

A simple example from the author suggest doing this (You don't seem to be doing 'file'):

```
from pyPdf import PdfFileWriter, PdfFileReader

output = PdfFileWriter()
input1 = PdfFileReader(file("jayabal_appt.pdf", "rb")) 
```

Then you can do the following:

```
output.addPage(input1.getPage(0)) 
```

And sure, use a for loop for it, but the author doesn't suggest using extractText.

Just check out the website, the example is rather straight forward: [http://pybrary.net/pyPdf/](http://pybrary.net/pyPdf/)

However

pyPdf is no longer maintained, so I don't recommend using it. The author suggest to check out pyPdf2 instead.

A simple Google search also suggest that you should try pdftotext or pdfminer. There are plenty of examples out there.

Good luck.

# android - 获取点击项的名称

> ID：15113697
> 
> 赞同：2
> 
> 时间：2013-02-27T13:48:19.743
> 
> 标签：android, gridview, onitemclicklistener

我正在使用扩展 BaseAdapter 的类来填充我的布局上的 gridView。当我单击 gridView 的元素之一时，我想获取单击的项目的名称（其中名称是 R.drawable.name 中的名称）

所以这就是我写的

```
gridView.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                    long arg3) {
                    Intent intent = new Intent(ChoseActivity.this,
                            GameActivity.class);
                    String ab = getResources().getResourceEntryName(arg1.getId());
                    intent.putExtra("AB", ab);
                    startActivity(intent);
}
} 
```

我有这个错误

```
02-27 13:46:49.285: E/AndroidRuntime(24862): FATAL EXCEPTION: main
02-27 13:46:49.285: E/AndroidRuntime(24862): android.content.res.Resources$NotFoundException: Unable to find resource ID #0xffffffff
02-27 13:46:49.285: E/AndroidRuntime(24862):    at android.content.res.Resources.getResourceEntryName(Resources.java:1499)
02-27 13:46:49.285: E/AndroidRuntime(24862):    at com.example.kersplatt.ChoseActivity$1.onItemClick(ChoseActivity.java:36)
02-27 13:46:49.285: E/AndroidRuntime(24862):    at android.widget.AdapterView.performItemClick(AdapterView.java:284)
02-27 13:46:49.285: E/AndroidRuntime(24862):    at android.widget.AbsListView$PerformClick.run(AbsListView.java:1812) 
```

我不明白，因为单击的图像在我的资源中

**编辑1**

我在我的适配器的 getView 中尝试了这个，但仍然有同样的错误：

```
ImageView imageView = new ImageView(mContext);
imageView.setTag(R.drawable.currentimage); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T19:51:28.583

```
getResources().getResourceEntryName(arg1.getId()); 
```

您没有在此处指定上下文。可能：

```
this.getResources().getResourceEntryName(arg1.getId()); 
```

类似的东西

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-03T05:18:48.397

**如果您的图像在资源/可绘制**文件夹中的第一件事，而不是简单地创建一个类型的数组列表，`arraylist<integer>`接下来将所有这些图像添加到数组列表中，然后在您的适配器类中使用该数组列表（假设您知道如何膨胀自定义布局并使用您的数组列表在gridview中显示所有图像，因此对于您在问题中提出的文本，也为文本创建一个数组列表，这里的类型`arraylist<Integer>`只是因为它将保存资源/可绘制文件夹中的文本值（正如你所说的那样）或者你可以制作你自己的类型数组列表`arraylist<String>`并根据你的喜好添加一些字符串（名称）。

接下来所有的arraylist都会有一些位置，或者你可以在扩展布局的`(using method imageview.setId())`同时为图像设置id，并在那个imageview的clicklistener上检查或检索适配器类中的id或位置，所以在你找到位置之后，只需取值定位并搜索文本数组列表中的元素或项目（之前已经创建），并在用户单击事件发生时从数组列表特定位置获取项目，然后按照您的喜好显示或打印。如果需要有关问题的代码请让我知道并为我的英语感到抱歉。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T14:05:08.953

没有`getDrawableId`功能，因此您需要在更改其可绘制对象时为 ImageView 设置标签。

在您的适配器类`getview()`中，将标签设置为 imageview 对象，让标签成为可绘制资源的 id。

```
imageview.settag(r.drawable.currentimage) 
```

现在，当您想要 gridview 的可绘制 onClick 时，获取标签并从中获取可绘制`id`

```
int drawableId = (Integer)imageview.getTag(); 
```

您可以使用以下方法获取可绘制对象的名称

```
getResources().getResourceEntryName(int drawableId); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-06T11:36:44.937

我花了一些时间寻找一种方法来点缀它。在您的情况下，最简单的方法是使用 arg3 ，其中包含您单击的视图的 id，如下所示

```
String ab = getResources().getResourceEntryName(int()arg3); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-04-09T08:03:35.827

是的，如果您有图像的资源 ID，您可以获得图像的名称。您可以使用 getResourceEntryName(resourceId)

如果您使用 ArrayList 作为图像路径，则使用

```
String name = getResources().getResourceEntryName(ArrayListName.get(arg2)); 
```

如果您使用的是数组，那么

```
String name = getResources().getResourceEntryName(Arrayname[arg2]); 
```

# regex - 为 我怎样才能grep （或类似的东西）在文件后面有一个空行

> ID：15113698
> 
> 赞同：1
> 
> 时间：2013-02-27T13:48:24.190
> 
> 标签：regex, linux, unix, grep, pcre

我怎样才能`grep` *（或类似的东西）*在文件后面有一个空行`<?php`？

我试过没有成功：

```
grep -irn '(?<=.\r)\r<?php' * 
```

我在一些帖子中读到 grep 似乎不支持多行，而应该使用[pcregrep 。](http://www.pcre.org/)我怎么能`pcregrep`在`<?php`一个空行之后？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T14:26:20.253

以下应该做你想要的：

```
pcregrep -rinM '^\n<\?php' . 
```

# android - Android/Sony Smartwatch：无法实例化接收器 (ClassNotFoundException)

> ID：15113699
> 
> 赞同：1
> 
> 时间：2013-02-27T13:48:24.523
> 
> 标签：android, classnotfoundexception, sony-smartwatch

我得到了一个带有静态广播接收器的 ClassNotFoundException。在设备上通过 eclipse 安装应用程序时会触发异常。我正在开发一个索尼智能手表扩展，所以我需要使用来自索尼 sdk 的“SmartExtensionUtils”项目。只要我在代码示例项目中工作，一切都很好。我用 Maven + Android 开始了一个新项目，现在它不再工作了！！！不知道为什么？！？我估计包裹出了点问题......

我收到以下错误：

```
E/AndroidRuntime(11201): java.lang.RuntimeException: Unable to instantiate receiver com.bla.move.smartwatch.sony.ExtensionReceiver: java.lang.ClassNotFoundException: com.bla.move.smartwatch.sony.ExtensionReceiver 
```

我的广播接收器类称为 ExtensionReceiver。清单文件中的名称是相同的......

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="com.bla.move.smartwatch.sony"
  android:versionName="1.0" android:versionCode="1">

<uses-sdk android:minSdkVersion="7"/>

<uses-permission
    android:name="com.sonyericsson.extras.liveware.aef.EXTENSION_PERMISSION" />

<application android:icon="@drawable/icon" android:label="@string/app_name">
    <activity android:name="SmartWatchPreferenceActivity" android:label="@string/preference_activity_title">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
        </intent-filter>
    </activity>

    <service android:name=".SmartWatchExtensionService" />

    <receiver android:name=".ExtensionReceiver">
     <intent-filter>
       .....
     </intent-filter>
    </receiver>
    .... 
```

可能是什么问题呢？有什么建议么？？？我已经清理+重建（几次）！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T15:05:17.060

您是否在项目和 Maven 中都将`SmartExtensionAPI`和`SmartExtensionUtil`项目作为依赖项包含在内？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T13:33:58.403

尝试清理工作区（使用 -clean 标志启动 Eclipse），并确保项目的 JDK 合规性设置设置为 1.6（不是 1.7）！这对我有用。我设置了整个工作空间的JDK合规级别，而不是项目本身，错误就消失了！

# java - 如何让tomcat爆炸war文件

> ID：15113700
> 
> 赞同：5
> 
> 时间：2013-02-27T13:48:25.567
> 
> 标签：java, jsp, tomcat, servlets, tomcat7

参考[tomcat 和提取的文件](https://stackoverflow.com/questions/14945820/tomcat-and-extracted-files/14965275#14965275) ，我已将 server.xml 配置为`auto deploy : true`. 我的战争文件名是 ROOT.war，因为我不想在 site.com 之后使用 /subdir。

但我在 /webappts/ROOT 或任何地方都看不到 .css .js .java 或 .class 文件。（我将它们放在 ROOT.war 中，并且站点运行良好，可以反映它们）

我只看到 .class 和 .java

```
/var/cache/tomcat7/Catalina/localhost/_/org/apache/jsp/

/var/cache/tomcat7/Catalina/localhost/_/WEB-INF/classes/ 
```

如何配置tomcat来爆炸.war文件？

**更新一**

我有`Host name="localhost" appBase="/home/ubuntu/www" unpackWARs="true" autoDeploy="true"` ，但我仍然没有看到拆包。我的 ROOT.war 在 /home/ubuntu/www

**更新二**

我看到的一个问题是：

```
Feb 27, 2013 6:29:02 PM org.apache.catalina.startup.HostConfig deployWAR
INFO: Deploying web application archive /home/ubuntu/www/ROOT.war
Feb 27, 2013 6:29:02 PM org.apache.catalina.startup.ContextConfig init
SEVERE: Exception fixing docBase for context []
java.io.IOException: Unable to create the directory [/home/ubuntu/www/ROOT]
        at org.apache.catalina.startup.ExpandWar.expand(ExpandWar.java:100)
        at org.apache.catalina.startup.ContextConfig.fixDocBase(ContextConfig.java:720)
        at org.apache.catalina.startup.ContextConfig.init(ContextConfig.java:843) 
```

如果我**使用 chmod 777**在 /home/ubuntu/www/ 中**手动**创建 ROOT 。它给出**404**错误（不存在）

 ***** * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-27T20:22:18.993

您的`/home/ubuntu/www`文件夹需要可被 Tomcat 进程写入。所有者和组应该是`tomcat6/tomcat7`（取决于您使用的 TC）。像这样：

```
drwxrwxr-x  4 tomcat7 tomcat7 4096 Feb 27 14:08 webapps 
```

您不应该`chmod 777`使用该文件夹，正如您正确推测的那样，这是一个安全风险。`chown tomcat7:tomcat7`应该管用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T14:49:04.210

您需要确保`unpackWARs==true`已设置。

> 如果您希望将作为 Web 应用程序归档 (WAR) 文件放置在 appBase 目录中的 Web 应用程序解压缩到相应的磁盘目录结构中，则设置为 true，如果希望直接从 WAR 文件运行此类 Web 应用程序，则设置为 false。位于主机的 appBase 之外的 WAR 文件不会被扩展。

来源：http: [//tomcat.apache.org/tomcat-6.0-doc/config/host.html#Standard_Implementation](http://tomcat.apache.org/tomcat-6.0-doc/config/host.html#Standard_Implementation)****

# java - 如何通过外部查询订购标准（休眠）？

> ID：15113705
> 
> 赞同：2
> 
> 时间：2013-02-27T13:48:30.477
> 
> 标签：java, hibernate, hibernate-criteria

假设我有

```
 List cats = sess.createCriteria(Cat.class)
.add( Restrictions.like("name", "F%")
.addOrder( Order.asc("name") )
.list(); 
```

让我们假设 cat 类还有 2 个属性，`livesUsed`并且`livesTotal`.

`livesTotal`是否可以通过计算与`livesUsed`不添加新列到 db_cats之间的差异的查询来对条件进行升序`livesDifference`？

我该如何实施？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T14:11:25.927

> group by 子句和 order by 子句都不能包含算术表达式。

取自 Hibernate 文档：[http ://docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html#queryhql-grouping](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html#queryhql-grouping)

# python - 以 root 身份运行结构脚本

> ID：15113706
> 
> 赞同：5
> 
> 时间：2013-02-27T13:48:35.250
> 
> 标签：python, sudo, fabric, su

我正在尝试使用结构来自动化我在几台服务器上所做的一些管理工作。一般流程如下：

1.  SSH 与本地用户
2.  运行：`sudo su -`成为root（再次提供本地用户密码）
3.  以root身份完成工作:)

不幸的是，使用`run('sudo su -')`会阻止脚本的执行并允许用户输入。当我键入`exit`或`Ctrl+D`scipt 恢复时，但没有 root 权限。

我[在 Fabric 中的 Switching user 中](https://stackoverflow.com/questions/13080643/switching-user-in-fabric)看到了类似的问题，但我受到限制，`sudo su -`因为我不允许更改`/etc/sudoers`包含以下行的文件：

`localuser ALL = /usr/bin/su -`

我浏览了面料的来源，试图找到一种解决方法，但没有成功。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-18T14:56:23.470

遇到与您相同的问题（仅`sudo su - user`管理员允许，`sudo -u user -c cmd`不允许），这是我的工作解决方案`fabric`：

```
from ilogue.fexpect import expect, expecting, run 

def sudosu(user, cmd):
    cmd += ' ;exit'
    prompts = []
    prompts += expect('bash', cmd)
    prompts += expect('assword:', env.password)

    with expecting(prompts):
        run('sudo su - ' + user)

def host_type():
    sudosu('root', 'uname -s') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T14:41:17.700

您的问题有几种解决方案。首先，您想使用`sudo`. 您可以使用 fabric 方法来`sudo`代替（[sudo ref](http://docs.fabfile.org/en/1.4.2/api/core/operations.html?highlight=sudo#fabric.operations.sudo)）。`run``runs a shell command on a remote host, with superuser privileges`

例如，这些命令使用以下命令执行`sudo`：

```
sudo("~/install_script.py")
sudo("mkdir /var/www/new_docroot", user="www-data")
sudo("ls /home/jdoe", user=1001)
result = sudo("ls /tmp/") 
```

另一个想法是您想要包装一组命令（需要`sudo`编辑）。您可以使用 Fabric 上下文管理器 ( [ref](http://docs.fabfile.org/en/1.4.2/api/core/context_managers.html?highlight=cd#fabric.context_managers.cd) ) 来执行此操作。特别是，您可以使用`prefix`or `settings`。

例如：

```
with settings(user='root'):
    run('do something')
    run('do another thing') 
```

将询问您一次root密码，然后以root身份执行命令。您可以使用 tweek 设置来存储密码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-06T12:44:39.680

以下问题有一个解决方案`Sorry, user localuser is not allowed to execute '/usr/bin/su - -c /bin/bash -l -c pwd' as root on hostname.` 您可以尝试`sudo('mkdir ~/test_fabric',shell=False)`。使用 param`shell`来避免 bash param `-l`。

# mysql - 错误代码 1064，SQL 状态 42000：您的 SQL 语法有错误；

> ID：15113707
> 
> 赞同：27
> 
> 时间：2013-02-27T13:48:41.040
> 
> 标签：mysql, netbeans, jdbc

我正在使用最新版本的 MySQL ==> mysql-5.6.10-winx64.zip

创建了数据库，当我尝试执行这个简单的命令时，一切都很好“我认为”；

```
"select * from family" 
```

我收到了这个错误：

> 错误代码 1064，SQL 状态 42000：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“OPTION SQL_SELECT_LIMIT=DEFAULT”附近使用正确的语法

我花了很多时间寻找解决方案，但没有找到解决方案:(

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-28T04:45:12.660

这看起来像是来自 JDBC 驱动程序的错误。当 JDBC 驱动程序初始化连接时，它会向 MySQL 服务器发送几个命令，其中之一是：

```
SET OPTION SQL_SELECT_LIMIT=DEFAULT 
```

问题是`SET OPTION`语法已经被弃用了一段时间，现在在 MySQL 5.6 中不再有效。这是来自 MySQL 错误数据库的相关错误对话：

[错误 #66659：mysql 5.6.6m9 在 OPTION SQL_SELECT_LIMIT=DEFAULT 上失败](http://bugs.mysql.com/bug.php?id=66659)

尝试升级您的 JDBC MySQL 驱动程序。错误对话列出了一些其他选项，以防升级驱动程序不是一个选项。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-05-08T13:43:28.857

我按照上面的说明进行操作，这对我有用！

1.  从这里下载最新的 jar 文件： [http](http://dev.mysql.com/downloads/mirror.php?id=412737) : //dev.mysql.com/downloads/mirror.php?id=412737 解压 将 jar 文件“mysql-connector-java-5.1.25-bin.jar”复制到这个文件夹： C:\Program Files\NetBeans 7.3\ide\modules\ext

2.  在 Netbeans IDE 中：断开与数据库的连接。单击服务。展开驱动程序。右键单击 MySQL，然后按自定义。添加最新驱动程序删除以前的驱动程序。

3.  重新连接到 IDE 中的数据库。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-04T16:36:47.890

几周前我遇到了同样的问题。按照以下步骤，它非常解决了这个问题。

1.  将 jar 文件的最新版本 (mysql-connector-java-5.1.23-bin) 复制到 ..\NetBeans 7.3\ide\modules\ext。我早期版本的驱动程序是 mysql-connector-java-5.1.18-bin。

2.  在 NetBeans IDE 中更改驱动程序版本。在 IDE 的服务窗口中，展开驱动程序 -> 右键单击​​ MySQL（连接器/J 驱动程序）并选择自定义。删除较早的驱动程序并将其指向最新的驱动程序（C:\Program Files (x86)\NetBeans 7.3\ide\modules\ext\mysql-connector-java-5.1.23-bin.jar）。单击确定并重新启动 IDE。

这应该可以解决问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-29T23:24:36.973

如果驱动程序建议不起作用，请检查您的 sql 是否有不可打印的字符。我只花了一个小时解决这个问题，却在我的 sql 语句末尾发现了一个隐藏的 u+200b 字符。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-07T06:42:12.047

当我将 mysql 表结构文件转储到 DB 时，我得到了同样的错误。错误是将语法用于删除所有表之前但没有检查它们在数据库中的存在。问题出在“ **DROP TABLE usermgmt** ”。我删除了删除表行的代码，这次它没有任何错误。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-05-02T11:31:54.650

我在表的名称前面加上数据库名称，例如

```
select * from database_name.table_name; 
```

它工作得很好，所以很可能存在名称冲突。

# java - findByCriteria 通过忽略大小写返回值

> ID：15113708
> 
> 赞同：0
> 
> 时间：2013-02-27T13:48:42.377
> 
> 标签：java, hibernate

我正在使用以下代码来检查用户。

```
DetachedCriteria queryCriteria = DetachedCriteria
queryCriteria.add(Restrictions.eq("UserName", userObj.getUserName().trim()));
userList = htObj.findByCriteria(queryCriteria); 
```

其中 userobj 是从支持 bean 传递的用户对象

问题是它返回没有类型限制的结果，例如虽然我输入'admin'作为用户名并且数据库中有'ADMIN'它匹配记录

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T15:08:49.750

我认为问题更多在于数据库而不是条件查询：检查[Hibernate 限制中限制“等于 id”的大小写敏感](https://stackoverflow.com/questions/9066143/case-sensitive-on-restrictions-equals-id-in-hibernate-restrictions)并相应地配置您的数据库。

# uitableview - UISearchBar：FilterContentForSearchText 在 UITableView 上不起作用（结果未显示在表格上）

> ID：15113714
> 
> 赞同：0
> 
> 时间：2013-02-27T13:48:56.993
> 
> 标签：uitableview, nspredicate, uisearchdisplaycontroller

**问题部分解决，见帖子结尾：**

`UITableView`在不工作时显示搜索结果。`table`保持空白，不显示任何内容`results`，但`searching`必须工作，因为当我`search`处理不在其中的内容时，`table`我会立即`"No Results"`在`table`.

注意：在我`IB`用我`connect`的`delegate`.`UISearchBar``Connection Inspector``Controller`

希望你能帮忙。

**米：**

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return (tableView == self.searchDisplayController.searchResultsTableView) ? [self.seriesArrayFiltered count] : [self.seriesArray count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"SeriesCell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    Serie *aSerie = nil;

    if (tableView == self.searchDisplayController.searchResultsTableView) {
        NSLog(@"search is displaying");
        aSerie = self.seriesArrayFiltered[[indexPath row]];
    } else {
        NSLog(@"search is NOT displaying");
        aSerie = self.seriesArray[[indexPath row]];
    }

    UILabel *valueLbl = (UILabel *)[cell viewWithTag:101];
    valueLbl.text = aSerie.name;

    return cell;
}

-(void)filterContentForSearchText:(NSString*)searchText scope:(NSString*)scope {

    [self.seriesArrayFiltered removeAllObjects];

    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"SELF.name contains[c] %@",searchText];
    self.seriesArrayFiltered = [NSMutableArray arrayWithArray:[self.seriesArray filteredArrayUsingPredicate:predicate]];
}

-(BOOL)searchDisplayController:(UISearchDisplayController *)controller shouldReloadTableForSearchString:(NSString *)searchString
{
    [self filterContentForSearchText:searchString scope:
     [[self.searchDisplayController.searchBar scopeButtonTitles] objectAtIndex:[self.searchDisplayController.searchBar selectedScopeButtonIndex]]];

    return YES;
}

-(BOOL)searchDisplayController:(UISearchDisplayController *)controller shouldReloadTableForSearchScope:(NSInteger)searchOption
{
    [self filterContentForSearchText:self.searchDisplayController.searchBar.text scope:
     [[self.searchDisplayController.searchBar scopeButtonTitles] objectAtIndex:searchOption]];

    return YES;
} 
```

**H：**

```
#import <UIKit/UIKit.h>

@interface SeriesTableVC : UITableViewController <UISearchDisplayDelegate, UISearchBarDelegate>

@property (nonatomic, strong) NSArray *seriesArray;
@property (nonatomic, strong) NSMutableArray *seriesArrayFiltered;

@property (weak, nonatomic) IBOutlet UISearchBar *seriesSearchBar;

@end 
```

**当我更改以下代码时，我现在可以看到搜索结果，但我想知道为什么无法识别标签。**

*在：`cellForRowAtIndexPath`*

```
//UILabel *valueLbl = (UILabel *)[cell viewWithTag:101];
//valueLbl.text = aSerie.name;

cell.textLabel.text = aSerie.name; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T19:23:21.140

您创建的单元格不包含标签，因此

```
UILabel *valueLbl = (UILabel *)[cell viewWithTag:101]; 
```

返回`nil`，设置`valueLbl.text = aSerie.name;`无效。

创建单元格时，您必须创建标签并将其作为子视图添加到单元格中：

```
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    UILabel *valueLbl = [[UILabel alloc] initWithFrame:...];
    [cell.contentView addSubview:valueLbl];
} 
```

# oracle11g - 如何确定表空间的大小 oracle 11g

> ID：15113716
> 
> 赞同：15
> 
> 时间：2013-02-27T13:48:58.733
> 
> 标签：oracle11g, tablespace

我有一个包含三个表的数据库。我需要将历史分区数据移动到其他模式现在我正计划创建新的“历史”表。我不知道如何测量分区和子分区的大小。你能帮我吗？请给我一些建议。

提前致谢。娄

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-02-27T15:01:02.113

以下查询可用于确定表空间和其他参数：

```
select df.tablespace_name "Tablespace",
       totalusedspace "Used MB",
       (df.totalspace - tu.totalusedspace) "Free MB",
       df.totalspace "Total MB",
       round(100 * ( (df.totalspace - tu.totalusedspace)/ df.totalspace)) "Pct. Free"
  from (select tablespace_name,
               round(sum(bytes) / 1048576) TotalSpace
          from dba_data_files 
         group by tablespace_name) df,
       (select round(sum(bytes)/(1024*1024)) totalusedspace,
               tablespace_name
          from dba_segments 
         group by tablespace_name) tu
 where df.tablespace_name = tu.tablespace_name 
   and df.totalspace <> 0; 
```

来源：[https ://community.oracle.com/message/1832920](https://community.oracle.com/message/1832920)

对于您的情况，如果您想知道分区名称及其大小，只需运行以下查询：

```
select owner,
       segment_name,
       partition_name,
       segment_type,
       bytes / 1024/1024 "MB" 
  from dba_segments 
 where owner = <owner_name>; 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-12-04T06:35:47.940

一种方法是使用下面的 sql 查询

```
--Size of All Table Space

--1\. Used Space
SELECT TABLESPACE_NAME,TO_CHAR(SUM(NVL(BYTES,0))/1024/1024/1024, '99,999,990.99') AS "USED SPACE(IN GB)" FROM USER_SEGMENTS GROUP BY TABLESPACE_NAME
--2\. Free Space
SELECT TABLESPACE_NAME,TO_CHAR(SUM(NVL(BYTES,0))/1024/1024/1024, '99,999,990.99') AS "FREE SPACE(IN GB)" FROM   USER_FREE_SPACE GROUP BY TABLESPACE_NAME

--3\. Both Free & Used
SELECT USED.TABLESPACE_NAME, USED.USED_BYTES AS "USED SPACE(IN GB)",  FREE.FREE_BYTES AS "FREE SPACE(IN GB)"
FROM
(SELECT TABLESPACE_NAME,TO_CHAR(SUM(NVL(BYTES,0))/1024/1024/1024, '99,999,990.99') AS USED_BYTES FROM USER_SEGMENTS GROUP BY TABLESPACE_NAME) USED
INNER JOIN
(SELECT TABLESPACE_NAME,TO_CHAR(SUM(NVL(BYTES,0))/1024/1024/1024, '99,999,990.99') AS FREE_BYTES FROM  USER_FREE_SPACE GROUP BY TABLESPACE_NAME) FREE
ON (USED.TABLESPACE_NAME = FREE.TABLESPACE_NAME); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-13T18:36:52.093

SELECT b.tablespace_name, tbs_size SizeGb, a.free_space FreeGb FROM ( SELECT tablespace_name, ROUND (SUM (bytes) / 1024 / 1024 / 1024, 2) AS free_space FROM dba_free_space GROUP BY tablespace_name) a, ( SELECT tablespace_name, SUM (bytes) / 1024 / 1024 / 1024 AS tbs_size FROM dba_data_files GROUP BY tablespace_name) b WHERE a.tablespace_name(+) = b.tablespace_name ORDER BY 1

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-05T22:19:03.957

[在 oracle 中检查表空间大小](https://www.oraask.com/2021/04/check-tablespace-usage-in-oracle.html)的一种方法是运行此查询

```
SELECT   TABLESPACE_NAME, ROUND (SUM (BYTES) / 1048576) "Total Size MB"
    FROM     DBA_DATA_FILES
    GROUP BY TABLESPACE_NAME 
```

# actionscript-3 - 向对象添加功能（形状/MC）

> ID：15113719
> 
> 赞同：0
> 
> 时间：2013-02-27T13:49:02.447
> 
> 标签：actionscript-3, flash

我从 Flash 中的 AS2 慢慢变得对 AS3 更有经验。

有什么方法可以将函数添加到某种类型的已创建对象（可能是 Shape 或 MovieClip）？

过去，我使用过：

```
var testshape = _root.createEmptyMovieClip();
testshape.onEnterFrame = function():Void
{
    testshape._alpha -= 10;
    if(testshape._alpha < 20)
    {
        testshape.removeMovieClip();
    }
} 
```

我可以在 AS3 中做类似的事情吗？

可能使用 eventListeners 或类似的东西。

目前我有它：

```
var testshape:MovieClip = new MovieClip();
testshape.graphics.beginFill(0xFF0000); 
testshape.graphics.drawCircle(300,300,50);
testshape.graphics.endFill();
testshape.addEventListener(Event.ENTER_FRAME, function runEvent():void
{
    testshape.alpha -= 0.1;
    if(testshape.alpha < 0.2)
    {           
        testshape.removeEventListener(Event.ENTER_FRAME,runEvent);
        removeChild(testshape);
    }
});
addChild(testshape); 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T14:01:00.440

请参阅以下代码。

```
var testShape:MovieClip = new MovieClip();
addChild(testShape);
testShape.addEventListener(Event.ENTER_FRAME, function():void{
    testShape.alpha -= 0.1;
    if(testShape.alpha < 0.2)
    {
        removeChild(testShape);
    }
}); 
```

## 已编辑

试试这个：

```
var testShape:MovieClip = new MovieClip();
testShape.graphics.beginFill(0xff0000);
testShape.graphics.drawCircle(100,100,100);
testShape.graphics.endFill();
addChild(testShape);
testShape.addEventListener(Event.ENTER_FRAME, onEnter);

function onEnter(e:Event):void
{
    testShape.alpha -= 0.1;
    if(testShape.alpha < 0.2)
    {
        testShape.removeEventListener(Event.ENTER_FRAME, onEnter);
        removeChild(testShape);
    }
}; 
```

# multithreading - 使用 Perl ithread 的奇怪变量行为

> ID：15113721
> 
> 赞同：1
> 
> 时间：2013-02-27T13:49:14.367
> 
> 标签：multithreading, perl, variables, threadpool

我正在尝试基于稍微改变的老板/工人模型来实现多线程应用程序。基本上，主线程创建了几个老板线程，每个老板线程又产生两个工作线程（可能更多）。这是因为老板线程每个处理一个主机或网络设备，工作线程可能需要一段时间才能完成工作。

我`Thread::Pool`用来实现这个概念，到目前为止效果很好；我也不认为我的问题与`Thread::Pool`（见下文）有关。前面非常简化的**伪代码：**

```
use strict;
use warnings;

my $bosspool = create_bosspool();   # spawns all boss threads
my $taskpool = undef;               # created in each boss thread at
                                    # creation of each boss thread 

# give device jobs to boss threads
while (1) {
  foreach my $device ( @devices ) {
    $bosspool->job($device);
  }

  sleep(1);
}

# This sub is called for jobs passed to the $bosspool
sub process_boss
{
  my $device = shift;

  foreach my $task ( $device->{tasks} ) {
    # process results as they become available
    process_result() while ( $taskpool->results );
    # give task jobs to task threads
    scalar $taskpool->job($device, $task);
    sleep(1); ### HACK ###
  }

  # process remaining results / wait for all tasks to finish
  process_result() while ( $taskpool->results || $taskpool->todo );

  # happy result processing
}

sub process_result
{
  my $result = $taskpool->result_any();

  # mangle $result
}

# This sub is called for jobs passed to the $taskpool of each boss thread
sub process_task
{
  # not so important stuff

  return $result;
} 
```

顺便说一句，我不使用`monitor()`-routine 的原因是因为我必须等待所有工作`$taskpool`完成。现在，除非您删除该`### HACK ###`行，否则此代码的效果非常好。不睡觉，`$taskpool->todo()`如果您添加它们或接收它们的结果太“快”，将无法提供正确数量的仍然打开的工作。就像，您总共添加了 4 个作业，但`$taskpool->todo()`之后只会返回 2 个（没有待处理的结果）。这会导致各种有趣的效果。

好的，`Thread::Pool->todo()`废话，让我们尝试一种解决方法：

```
sub process_boss
{
  my $device = shift;

  my $todo = 0;

  foreach my $task ( $device->{tasks} ) {
    # process results as they become available
    while ( $taskpool->results ) {
      process_result();
      $todo--;
    }
    # give task jobs to task threads
    scalar $taskpool->job($device, $task);
    $todo++;
  }

  # process remaining results / wait for all tasks to finish
  while ( $todo ) {
    process_result();
    sleep(1); ### HACK ###
    $todo--;
  }
} 
```

只要我保持`### HACK ###`线路，这也可以正常工作。如果没有这一行，此代码将重现 的问题`Thread::Pool->todo()`，因为`$todo`它不仅会减少 1，还会减少 2 甚至更多。

我只用一个老板线程测试了这段代码，所以基本上没有涉及多线程（当涉及到这个子例程时）。`$bosspool`，`$taskpool`尤其`$todo`是没有`:shared`，没有副作用，对吧？这个子程序中发生了什么，它只由一个老板线程执行，没有共享变量、信号量等？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-10T22:09:55.193

我建议实现“工作者”线程模型的最佳方法是使用`Thread::Queue`. 做这样的事情的问题是确定队列何时完成，或者项目是否已出列并等待处理。

您可以使用`Thread::Queue`while 循环从队列和队列中获取元素，`end`以便 while 循环返回 undef 并且线程退出。

因此，您并不总是需要多个“老板”线程，您可以使用多种不同风格的`worker`输入队列。我会质疑为什么在那种情况下你需要一个“老板”线程模型。似乎没有必要。

参考： [Perl daemonize with child daemons](https://stackoverflow.com/questions/26296206/perl-daemonize-with-child-daemons/26297240#26297240)

```
#!/usr/bin/perl

use strict;
use warnings;
use threads;
use Thread::Queue;

my $nthreads = 4;

my @targets = qw ( device1 device2 device3 device4 );

my $task_one_q = Thread::Queue->new();
my $task_two_q = Thread::Queue->new();

my $results_q = Thread::Queue->new();

sub task_one_worker {
    while ( my $item = task_one_q->dequeue ) {

        #do something with $item

        $results_q->enqueue("$item task_one complete");
    }
}

sub task_two_worker {
    while ( my $item = task_two_q->dequeue ) {

        #do something with $item

        $results_q->enqueue("$item task_two complete");
    }
}

#start threads;

for ( 1 .. $nthreads ) {
    threads->create( \&task_one_worker );
    threads->create( \&task_two_worker );
}

foreach my $target (@targets) {
    $task_one_q->enqueue($target);
    $task_two_q->enqueue($target);
}

$task_one_q->end;
$task_two_q->end;

#Wait for threads to exit.

foreach my $thr ( threads->list() ) {
    threads->join();
}

$results_q->end();

while ( my $item = $results_q->dequeue() ) {
    print $item, "\n";
} 
```

如果您愿意，您可以对线程执行类似的操作`boss`- 您可以创建一个队列`boss`并通过引用工作人员将其传递。我不确定这是否有必要。

# php - 此表达式“PI-1234-265K”的正则表达式

> ID：15113723
> 
> 赞同：2
> 
> 时间：2013-02-27T13:49:21.850
> 
> 标签：php, regex

我需要一个正则表达式来验证以下代码，在我声明所需结果的代码后面。

```
<?php
    $codes[] = 'PI-1234-265K'; // true
    $codes[] = 'PIS2-12FG-265K'; // false
    $codes[] = 'PI-1234FG-265K'; // false
    $codes[] = 'PI-1234-2'; // false
    $codes[] = 'PI-1234-265K12313'; // true
    foreach($codes as $code){
        var_dump(preg_match('/[a-zA-Z0-9]{2}-[a-zA-Z0-9]{4}-[a-zA-Z0-9]{2,}/', $code));
        echo '<br/>';
    }
?> 
```

目前第一部分没有得到正确检查，它返回 11001 但所需的结果是 10001。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T13:51:03.417

你需要[锚定](http://www.regular-expressions.info/anchors.html)你的正则表达式

```
var_dump(preg_match('/^[a-zA-Z0-9]{2}-[a-zA-Z0-9]{4}-[a-zA-Z0-9]{2,}$/', $code)); 
```

`^`匹配字符串的开头

`$`匹配字符串的结尾

如果您不这样做，您将获得部分匹配。意味着在您的第二种情况下 "PIS2-12FG-265K" 它匹配**S2-12FG-265K**，因此您的匹配不会从头开始。

# ruby-on-rails - Rails Active Record 嵌套属性验证在同一个请求中

> ID：15113727
> 
> 赞同：0
> 
> 时间：2013-02-27T13:49:34.753
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, nested-attributes, rails-activerecord

我有两个样板房和预订。预订日期验证一切正常。但是当我尝试在同一个请求中更新或创建多个预订时。验证无法检查同一请求参数中的无效预订。

举个例子，假设预订表是空的。

```
params = { :house => {
  :title => 'joe', :booking_attributes => [
    { :start_date => '2012-01-01', :finish_date => '2012-01-30 },
    { :start_date => '2012-01-15', :finish_date => '2012-02-15 }
  ]
}} 
```

第二次预订也保存，但它的 start_date 在第一次预订间隔之间。当我一一保存它们时，验证工作。

```
class House < ActiveRecord::Base
  attr_accessible :title, :booking_attributes
  has_many :booking
  accepts_nested_attributes_for :booking, reject_if: :all_blank, allow_destroy: true
end

class Booking < ActiveRecord::Base
  belongs_to :house
  attr_accessible :start_date, :finish_date

  validate :booking_date
  def booking_date

    # Validate start_date
    if Booking.where('start_date <= ? AND finish_date >= ? AND house_id = ?',
      self.start_date, self.start_date, self.house_id).exists?
      errors.add(:start_date, 'There is an other booking for this interval')
    end

    # Validate finish_date
    if Booking.where('start_date <= ? AND finish_date >= ? AND house_id = ?',
      self.finish_date, self.finish_date, self.house_id).exists?
      errors.add(:finish_date, 'There is an other booking for this interval')
    end
  end
end 
```

我google了将近2个小时，找不到任何东西。解决此问题的最佳方法是什么？

一些资源

*   [http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html)
*   [http://railscasts.com/episodes/196-nested-model-form-part-1](http://railscasts.com/episodes/196-nested-model-form-part-1)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T00:37:17.653

这只是我 15 分钟的快速研究，所以我可能错了，但我相信这是您问题的根本原因：

accept_nested_attributes_for 在幕后做了什么，它为新的 Booking 对象调用“构建”（此时没有验证任何内容，对象是在内存中创建的，而不是存储到数据库中）并注册验证和保存挂钩以在父对象（House ) 被保存。因此，据我所知，首先为所有创建的对象调用所有验证（通过为每个对象调用“有效？”。然后，*如果我做对了*，它们会使用 insert_record(record,false) 保存(:validate => false)，因此不会第二次调用验证。

您可以查看这些页面中的来源：[http](http://apidock.com/rails/v3.2.8/ActiveRecord/AutosaveAssociation/save_collection_association) ://apidock.com/rails/v3.2.8/ActiveRecord/AutosaveAssociation/save_collection_association，http : [//apidock.com/rails/ActiveRecord/Associations/HasAndBelongsToManyAssociation/insert_record](http://apidock.com/rails/ActiveRecord/Associations/HasAndBelongsToManyAssociation/insert_record)

您验证调用 Booking.where(...) 来查找重叠的日期范围。此时，新创建的 Booking 对象仍然只在内存中，没有保存到 db 中（记住，我们只是为循环中的每个对象调用 valid?，稍后将完成保存）。因此，对数据库运行查询的 Booking.where(...) 在那里找不到它们并且什么也不返回。因此他们都通过有效？阶段然后保存。

简而言之，以这种方式一起创建的记录不会相互交叉验证（仅针对数据库中先前存在的记录）。因此，您看到的问题。

因此，要么一个一个地保存它们，要么在保存之前在同时创建的预订中检查此类日期重叠的情况。

# c# - 发现多个类型的家庭控制器

> ID：15113729
> 
> 赞同：0
> 
> 时间：2013-02-27T13:49:39.367
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-areas

我需要在新区域中放置一个新家，但我有一个错误：找到了与名为“Home”的控制器匹配的多种类型。如果服务此请求的路由 ('{controller}/{action}/{id}') 未指定命名空间来搜索与请求匹配的控制器，则可能会发生这种情况。如果是这种情况，请通过调用采用“namespaces”参数的“MapRoute”方法的重载来注册此路由。我的新区

区域/行政/控制器/家庭控制器

领域/行政/观点/首页

我的 AdministrativoAreaRegistration

```
 public override void RegisterArea(AreaRegistrationContext context)
    {
        context.MapRoute(
            "Administrativo_default",
            "Administrativo/{controller}/{action}/{id}",
            new { controller = "Home", action = "Index", id = UrlParameter.Optional }
        );

    } 
```

在全球我有

```
 public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Home", action = "Index", id = UrlParameter.Optional }, new[] { "Preparacao.Gerenciar.Web.Controllers" } // Parameter defaults
        );
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T13:55:45.693

You should specify the namespace constraint in your area route registration (check if the namespace is correct):

```
public override void RegisterArea(AreaRegistrationContext context)
{
    context.MapRoute(
        "Administrativo_default",
        "Administrativo/{controller}/{action}/{id}",
        new { controller = "Home", action = "Index", id = UrlParameter.Optional },
        new[] { "Preparacao.Gerenciar.Web.Areas.Administrativo.Controllers" }
    );
} 
```

the same way you did with your main route registrations:

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    routes.MapRoute(
        "Default", // Route name
        "{controller}/{action}/{id}", // URL with parameters
        new { controller = "Home", action = "Index", id = UrlParameter.Optional },  // Parameter defaults
        new[] { "Preparacao.Gerenciar.Web.Controllers" }
    );
} 
```

# jsplumb - 为什么连接线显示远离 JSPlumb 中的 Div？

> ID：15113732
> 
> 赞同：0
> 
> 时间：2013-02-27T13:49:43.440
> 
> 标签：jsplumb

这是**[我的 JSFiddle](http://jsfiddle.net/XbcZv/13/)**

查询 - 当我尝试在 ID A1 和 B 之间建立连接时，连接粉色线显示远离 Div B。突出显示的粉色线下方远离 Div B。这就是问题所在

**![截屏](../Images/052cdc68f1947975ed76bf04a9ca0a0e.png)**

**jQuery**

```
//Setting up drop options
var targetDropOptions = {

};

connectorHoverStyle = {
    lineWidth: 7,
    strokeStyle: "#2e2aF8",
    cursor: 'pointer'
}

//Setting up a Target endPoint
var targetColor = "#316b31";
var targetEndpoint = {
    anchor: "LeftMiddle",
    endpoint: ["Dot", { radius: 8}],
    paintStyle: { fillStyle: targetColor },
    //isSource: true,
    scope: "green dot",
    connectorStyle: { strokeStyle: targetColor, lineWidth: 8 },
    connector: ["Flowchart", { curviness: 63}],
    maxConnections: -1,
    isTarget: true,
    dropOptions: targetDropOptions,
    connectorHoverStyle: connectorHoverStyle
};

//Setting up a Source endPoint
var sourceColor = "#ff9696";
var sourceEndpoint = {
    anchor: "RightMiddle",
    endpoint: ["Dot", { radius: 8}],
    paintStyle: { fillStyle: sourceColor },
    isSource: true,
    scope: "green dot",
    connectorStyle: { strokeStyle: sourceColor, lineWidth: 4 },
    connector: ["Flowchart", { curviness: 63}],
    maxConnections: -1,
    //            isTarget: true,
    dropOptions: targetDropOptions,
    connectorHoverStyle: connectorHoverStyle
};

jsPlumb.bind("ready", function () {

    jsPlumb.animate($("#A"), { "left": 50, "top": 100 }, { duration: "slow" });
    jsPlumb.animate($("#B"), { "left": 300, "top": 100 }, { duration: "slow" });
    jsPlumb.animate($("#C"), { "left": 540, "top": 100 }, { duration: "slow" });
    jsPlumb.animate($("#D"), { "left": 780, "top": 100 }, { duration: "slow" });

    var window = jsPlumb.getSelector('.window');
    jsPlumb.addEndpoint(window, targetEndpoint);
    jsPlumb.addEndpoint(window, sourceEndpoint);
    jsPlumb.addEndpoint(jsPlumb.getSelector('#A1'), sourceEndpoint, targetEndpoint);

    jsPlumb.draggable(window);

    jsPlumb.importDefaults({
        ConnectionOverlays: [
            ["Arrow", { location: 0.8}],
            ["Label", {
                location: 0.5,
                id: "label",
                cssClass: "aLabel"
            }]
        ]
    });
}); 
```

**HTML**

```
<div id="A" class="a window" style="width: 100px; height: 100px; border: solid 1px;">
    <strong>A</strong>
    <div id="A1">
    </div>
</div>
<div id="B" class="b window" style="width: 100px; height: 100px; border: solid 1px;">
    <strong>B</strong>
</div>
<div id="C" class="c window" style="width: 100px; height: 100px; border: solid 1px;">
    <strong>C</strong>
</div>
<div id="D" class="d window" style="width: 100px; height: 100px; border: solid 1px;">
    <strong>D</strong>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T18:41:02.073

我想在同一个 Div 上有多个锚点，提供的 ID 应该是这些锚点的属性。

为了做到这一点。我首先删除了额外的 div。现在假设有人想要显示两个源锚。为此，我在 **jquery.jsPlumb-1.3.16-all-min.js**文件中进行了修改

以下是此文件中的原始代码行

```
this.makeNode = function (E, D) { 
    return f("circle", { cx: E[2] / 2, cy: E[3] / 2, r: E[2] / 2
} 
```

修改如下。**我现在为每个 anchor(circle) 添加 id 属性**。

```
this.makeNode = function (E, D) { 
    var attr = $('#'+obj[0].endpoint.elementId).attr('actionID');
    return f("circle", { cx: E[2] / 2, cy: E[3] / 2, r: E[2] / 2, id: attr 
} 
```

**我如何获得 id 的价值？**

在上面查询中显示的 Div 中，我添加了一个属性**操作**并分配了一些我想要分配的 ID。像下面

```
jsPlumb.getSelector('#first').attr('actionID', 'p1'); 
```

**最后添加 EndPoint**

```
jsPlumb.addEndpoint(jsPlumb.getSelector('#first'), sourceEndpoint); 
```

同样，我可以根据需要根据 ID 分配尽可能多的不同 Anchors。

```
jsPlumb.getSelector('#first').attr('actionID', 'p3');
jsPlumb.addEndpoint(jsPlumb.getSelector('#first'), [TopMiddle]); 
```

**您将如何在 Connection 上分配 Source ID 和 target ID？**

```
jsPlumb.bind("jsPlumbConnection", function (CurrentConnection) {
    if (CurrentConnection.connection.targetId == 
                                    CurrentConnection.connection.sourceId)
        jsPlumb.detach(CurrentConnection.connection);
    else {
        var obj = CurrentConnection.sourceEndpoint.canvas.children[0].firstChild.id;
        init(CurrentConnection.connection, obj);
    }
});

init = function (connection, CircleID) {
    connection.getOverlay("label").setLabel(CircleID + "-" + connection.targetId);
}; 
```

希望这对面临相同问题的用户有所帮助...

# linq - LINQ：由同一类型对象集合的多个属性组成的单个列表

> ID：15113740
> 
> 赞同：3
> 
> 时间：2013-02-27T13:49:59.007
> 
> 标签：linq, entity-framework

```
 var userIds = books.Select( i => new{i.CreatedById,i.ModifiedById}).Distinct();

 var lst = from i in userIds select i.CreatedById;

 var lst1 = from i in userIds select i.ModifiedById;

 var lstfinal = lst.Concat(lst1).Distinct(); 
```

还有其他方法可以获得相同的结果吗？？？

这里：books 是书籍对象的集合，即 IEnumerable。

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-27T13:53:06.750

替代解决方案 -[`SelectMany`](http://msdn.microsoft.com/en-us/library/bb534336.aspx)来自所需属性的数组：

```
var lstfinal = books.SelectMany(b => new [] { b.CreatedById, b.ModifiedById })
                    .Distinct(); 
```

或枚举书籍收藏两次。[`Union`](http://msdn.microsoft.com/en-us/library/bb341731.aspx)不包括重复项，所以你不需要打电话`Distinct`（我会这样）：

```
var lstfinal = books.Select(b => b.CreatedById)
                    .Union(books.Select(b => b.ModifiedById)); 
```

# django - Django 对行的许可取决于一个或多个字段内容

> ID：15113749
> 
> 赞同：1
> 
> 时间：2013-02-27T13:50:12.177
> 
> 标签：django, django-admin

用例：“我有一个标准用户模型，它有一个 Userprofile 模型，其中包含作为 Region 模型的 ForeignKey 的字段区域。用户可以在 Django 标准的权限组中。

在 django-admin 用户模型页面中，site-admin 组中的用户 kalle 可以看到所有用户。用户 pelle 位于 regionA1-admin 组中，可以看到所有将其用户配置文件区域设置为 regionA1 的用户。”

django 中以安全方式处理此用例的最佳实践是什么？

它可能是用户以外的其他模型。可以添加和删除区域。在这种情况下使用区域，但可以是形成标准的一个或多个字段。这仅适用于 django-admin 界面，不适用于与常规站点上的数据库交互时。

# jquery - 空哈希和无哈希的区别

> ID：15113752
> 
> 赞同：5
> 
> 时间：2013-02-27T13:50:22.997
> 
> 标签：jquery, anchor

使用 jQuery，有没有办法区分当前的无哈希和空哈希`window.location`？

这就是我所说的“空哈希”：

```
http://domain.tld/# 
```

这是“无哈希”：

```
http://domain.tld/ 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T13:55:21.080

`window.location.hash`将返回`""`无哈希和空哈希。如果您出于某种原因需要进行区分，您可以`window.location.href`按以下方式拆分`#`：

```
var frag = window.location.href.split("#");

if (frag.length == 1) {
    // No hash
}
else if (!frag[1].length) {
    // Empty hash
}
else {
    // Non-empty hash
} 
```

或根据您的要求首先检查现有哈希：

```
if (window.location.hash) {
    // Non-empty hash
}
else if (window.location.href.split("#").length == 1) {
    // No hash
}
else {
    // Empty hash
} 
```

另请参阅：[如何在不刷新页面的情况下使用 JavaScript 从 window.location 中删除哈希？](https://stackoverflow.com/questions/1397329/how-to-remove-the-hash-from-window-location-with-javascript-without-page-refresh/5298684#5298684)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T13:54:32.377

为此，您不需要 jQuery。如果您有一个空哈希，那么您需要做的就是检查`window.location.href`. `true`如果哈希为空，则返回以下内容：

```
window.location.href.lastIndexOf('#') === window.location.href.length - 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-30T09:56:28.463

对于那些对 Andy E 解决方案的可重复使用版本感兴趣的人。我做了一个简单的函数来获取实际的哈希状态，作为按位值。

```
/**
 * Checks if the location hash is given, empty or not-empty.
 *
 * @param {String} [href] Url to match against, if not given use the current one
 * @returns {Number} An integer to compare with bitwise-operator & (AND)
 */
function getHashState(href) {
  var frag = (href || window.location.href).split('#');
  return frag.length == 1 ? 1 : !frag[1].length ? 2 : 4;
} 
```

您可以使用按位与运算符 ( `&`) 轻松比较返回值。

```
if (getHashState() & 1); // no hash
if (getHashState() & 2); // empty hash
if (getHashState() & 4); // no empty hash 
```

# c++ - pkg-config 找不到 opencv

> ID：15113753
> 
> 赞同：10
> 
> 时间：2013-02-27T13:50:24.363
> 
> 标签：c++, opencv, pkg-config

我在 lubuntu 12.10 发行版上安装了 opencv。然后，当我尝试编译使用 opencv 的代码时，它说找不到它。所以我在终端尝试：

```
pkg-config --cflags --libs opencv 
```

它回答我找不到opencv。但是这些文件安装在 /usr/lib 中。我不明白为什么它找不到它们。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-01-16T17:42:06.500

您必须放在`pkg-config --cflags --libs opencv`g++ 行的末尾。例如 ：

```
g++ test.cpp -o test `pkg-config --cflags --libs opencv` 
```

编译

```
g++ `pkg-config --cflags --libs opencv` test.cpp -o test 
```

不编译并且有未定义的引用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2020-09-18T11:54:56.220

对于 OpenCV 4，您可能必须使用：

```
pkg-config --cflags --libs opencv4 
```

（注意最后的4！）

# jquery - 向我的 JSON Flickr 提要脚本添加无限滚动功能？

> ID：15113754
> 
> 赞同：1
> 
> 时间：2013-02-27T13:50:27.790
> 
> 标签：jquery, json, scroll, flickr, infinite

我正在创建一个照片博客来显示我的 365 项目照片。这就是我目前所拥有的。它一次性返回我的整个照片流......

```
 $.getJSON('http://api.flickr.com/services/rest/?format=json&method=flickr.photos.search&api_key=ea494d6b294a94aed2a1f5a04530e387&user_id=57288432@N00&extras=description,date_taken&jsoncallback=?',

function(data){
    $.each(data.photos.photo, function(i, rPhoto){
        var basePhotoURL = 'http://farm' + rPhoto.farm + '.static.flickr.com/' + rPhoto.server + '/' + rPhoto.id + '_' + rPhoto.secret;
        var thumbPhotoURL = basePhotoURL + '.jpg';
        var mediumPhotoURL = basePhotoURL + '_b.jpg';

        var photoStringBuild = '<article style="background-image:url(' + thumbPhotoURL + ')"> <span class="info"><h1><a href="' + mediumPhotoURL + '" title="' + rPhoto.title + '">' + rPhoto.title + '</a></h1><h2>' + rPhoto.datetaken + '</h2><p>' + rPhoto.description._content + '</p></span> </article>';

            photoStringBuild : photoStringBuild ;

        $(photoString).appendTo("#flickr");
    });
}); 
```

这行得通。见这里（[http://hey.ac](http://hey.ac)）。我现在想做的是添加无限滚动功能，以便在向下滚动浏览器时逐步加载照片。

我已经下载了 Infinite Scroll ( [https://github.com/paulirish/infinite-scroll](https://github.com/paulirish/infinite-scroll) )，它看起来很棒。这是就我的 jQuery 黑客能力而言。我已经阅读了自述文件，JSON 部分提供了以下代码，看起来它可能接近我应该使用的代码......

```
 $('#flickr').infinitescroll({
  // other options
  dataType: 'json',
  appendCallback: false
}, function(json, opts) {
  // Get current page
  var page = opts.state.currPage; 
  // Do something with JSON data, create DOM elements, etc ..
}); 
```

我想要一些指示来帮助解决这个问题。干杯，阿里

# java - CountDownTimer 不断重复循环

> ID：15113757
> 
> 赞同：-1
> 
> 时间：2013-02-27T13:50:36.313
> 
> 标签：java, android

我有一个计时器：

```
new CountDownTimer(10000, 1000) {
        public void onTick(long millisUntilFinished) 
            {label.setText("Seconds Remaining: " + millisUntilFinished / 1000);}

        public void onFinish() {doSomething();}
     }.start(); 
```

它从 10 开始倒计时，如果达到 0，则运行方法“doSomething()”。但它不断地重复自己。我需要 'doSomething()' 总共只运行 10 次。请记住，如果计时器未达到 0，则还需要运行另一个方法。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T14:44:13.623

是的，很高兴知道 doSomething() 做了什么。此外，您可以使用 onTick 而不是 onFinish 获得 10 倍的执行。这真的取决于你想要达到什么目标。例如，如果 doSomething 不是可重入的，则使用 onTick 是不够的。

# django - django-cms 无法编辑/添加插件到页面

> ID：15113762
> 
> 赞同：0
> 
> 时间：2013-02-27T13:50:47.030
> 
> 标签：django, heroku, amazon-s3, django-cms

我有一个关于heroku 和amazon s3 的django 项目。我正在使用 django 1.4.2 和 django-cms 2.3.4 我的问题是我无法编辑或向页面添加任何插件。昨天它运行良好，但是在我更改了文本字段中的一些内容之后，一切都出错了……文本字段的问题现在已修复，但我仍然无法编辑/添加任何插件。我唯一知道的是以下错误消息：

```
Failed to load resource: the server responded with a status of 403 (Forbidden) 
Failed to load resource: the server responded with a status of 403 (Forbidden) 
Failed to load resource: the server responded with a status of 403 (Forbidden) 
Failed to load resource: the server responded with a status of 403 (Forbidden) 
Failed to load resource: the server responded with a status of 403 (Forbidden) 
Failed to load resource: the server responded with a status of 403 (Forbidden) 
Failed to load resource: the server responded with a status of 403 (Forbidden) 
Failed to load resource: the server responded with a status of 403 (Forbidden) 
Failed to load resource: the server responded with a status of 403 (Forbidden) 
Failed to load resource: the server responded with a status of 403 (Forbidden) 
Failed to load resource: the server responded with a status of 403 (Forbidden)

Uncaught ReferenceError: cms_plugin_editor_jQuery is not defined xy.herokuapp.com:396
Uncaught TypeError: Cannot call method 'get' of undefined change_form.js:48 
```

谁能帮帮我？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:33:11.790

我有同样的问题。花 2 个小时尝试以理智的方式解决它。还没有找到答案。我在 app rev 33。我已经在 heroku 网站上恢复到 32 版本。它在那里工作。恢复到 33 并且它也有效。

也许它与heroku有关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-09T00:25:23.367

检查您是否没有遇到 CSRF 中间件未加载的问题。CMS 期望它在管理员中，并在它不可用时生成此错误。

# gcc - 错误：无效的“asm”：在 GCC 中使用内联汇编时，在 %-letter 后缺少操作数编号

> ID：15113768
> 
> 赞同：3
> 
> 时间：2013-02-27T13:51:20.100
> 
> 标签：gcc, assembly, x86, inline-assembly

我正在尝试转换 MS 的简单汇编代码以与 gcc 一起使用，我尝试转换的 MS 汇编就在下面。我有两个`int`变量，`number`并且`_return`：

```
mov eax, number
neg eax
return, eax 
```

而且，我试过这个：

```
asm("movl %eax, %0" :: "g" ( number));
asm("neg %eax");
asm("movl %0, %%eax" : "=g" ( return )); 
```

但是，编译器给了我这个错误：

> main.c:17:9：错误：无效的“asm”：%-letter 后缺少操作数编号

错误在哪里，以及如何解决此错误？谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-27T13:56:14.857

你不能那样做，因为你在不告诉编译器的情况下覆盖寄存器。另外，the`%`是一个特殊字符，类似于 printf。

最好将所有指令放在一个中`asm`，否则编译器*可能会*在两者之间做一些意想不到的事情。

试试这个：

```
asm("movl %%eax, %1\n\t"
    "neg %%eax\n\t"
    "movl %0, %%eax" : "=g" ( _return )  : "g" ( number) : "eax"); 
```

不过，可能有更好的方法：

```
asm("neg %0": "=a" ( _return )  : "a" ( number)); 
```

我不知道为什么你不能这样做（在 C 中）：

```
_return = -number; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-27T13:58:40.710

尝试类似：

```
#include <stdio.h>
#include <stdlib.h>
int main(int ac,char**av)
{
    int n=ac>1?atoi(av[1]):42;
    asm ("movl %0, %%eax \n\t"
         "neg %%eax \n\t"
         "movl %%eax, %0 \n\t" : "+r" (n)::"eax");
    printf("%d\n",n);
} 
```

问题是：

*   操作数的顺序是`instr src,dst`
*   ％％ 代替 ％
*   没有独立的汇编程序行——输入/输出/clobber 列表与*所有*汇编程序块相关联
*   '+r' 拥有一个既可用作输入又可用作输出的参数
*   我怀疑甚至 MS 是否允许以这种方式使用关键字“return”

并使其更加高效：

```
asm("neg %0" : "+r" (n) ::);  // works as well 
```

# shell - 如何通过运行 shell 脚本来 ftp 远程服务器

> ID：15113772
> 
> 赞同：0
> 
> 时间：2013-02-27T13:51:34.733
> 
> 标签：shell, unix

```
ftp ipaddress
bin
hash
cd path
get filename
quit 
```

我希望这些行在 shell 脚本中执行，仅在输入用户名和密码后执行第一行，其余行未执行，并且控件卡在 ftp> 提示符处

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T14:10:19.117

或者，您可以使用 shell“此处”文档：

```
#!/bin/bash 

ftp -in <<EOS
user pswd
bin
hash
cd path
get filename
quit
EOS 
```

这里的文档通过打开程序的标准输入发送所有内容，就像您在命令行中输入一样。请注意，ftp 客户端可能很挑剔，而且每个客户端似乎都有自己的一套陷阱，因此`man ftp`可能需要进行一些实验和使用。

看起来这在 Stackoverflow 上已经出现过，您可能想阅读 [如何使用 shell 脚本 ftp 多个文件](https://stackoverflow.com/questions/6692799/how-to-ftp-multiple-file-using-shell-script)

IHTH

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T14:04:36.657

一旦你的脚本调用了程序`ftp`，shell 就会失去控制，直到 ftp 程序完成。所以你需要使用一些新技术。一种方法是使用程序`expect`，您可以在此处获得提示：[https](https://stackoverflow.com/a/12598169/4323) ://stackoverflow.com/a/12598169/4323 。另一种方法是使用更“可脚本化”的 FTP 客户端，例如`lftp`在 Linux 上，它具有特定功能，可以实现您想要的那种脚本化使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T14:05:26.737

如果您想在脚本而不是交互式 shell 中执行此操作，则需要使用非交互式 FTP 客户端。[ncftp](http://www.ncftpd.com/ncftp/)是您可以查看的一个。

# mysql - 非唯一外键

> ID：15113776
> 
> 赞同：1
> 
> 时间：2013-02-27T13:51:46.380
> 
> 标签：mysql, sql, database, key

外键必须是唯一的吗？

我正在尝试创建一个表来存储引用用户的外键和列“profileIconId”。该表的目的是列出用户拥有的图标。我想使用级联删除。

我的另一个选择是用于`SELECT FROM WHERE`检索列表并用于`DELETE FROM WHERE`在删除用​​户时删除与键匹配的所有行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T13:53:24.163

不，他们没有。事实上，外键最常见的用途之一是一对多的关系，例如*客户*和*订单*之间的关系。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-27T14:06:57.803

不，表中的外键在所述表中不必是唯一的。

但是，因为它是另一个表的主键，所以它在这个表中必须是唯一的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-27T13:52:34.307

**不。**

但值必须首先存在于父表中，然后才能将其插入表中。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-27T13:53:12.197

不，外键不必是唯一的。事实上，缺乏唯一性是一对多或多对多关系的必要条件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-11T00:49:58.433

**外键**必须引用被引用表中的一组唯一属性。因此，您的外键：*user*和*profileIconId*不需要是唯一的，但它们引用的内容可以。

考虑以下架构：

```
CREATE TABLE users (
  id INTEGER PRIMARY KEY,
  ... omitted ...
);

CREATE TABLE icons (
  id INTEGER PRIMARY KEY,
  ... omitted ...
);

CREATE TABLE user_icons (
  user INTEGER REFERENCES users,
  profileIconId INTEGER REFERENCES icons
); 
```

`user`and`profileIconId`值不需要在表中是唯一的，`user_icons`但`id`在`users`and中`icons`必须是唯一的（或者在技术上是**候选**主**键**）。

请注意，在这种情况下，引用的列必须是唯一的才有资格作为主键。

这将是一种可接受的方式来实现创建满足*用户具有零个或多个图标*关系的表的目标。

# php - 在初始页面加载时运行提交按钮

> ID：15113777
> 
> 赞同：0
> 
> 时间：2013-02-27T13:51:52.183
> 
> 标签：php, mysql, drop-down-menu

我有一个使用下面下拉菜单中的变量的表。当用户在下拉列表中选择选项时，表格会根据与选择相关的变量提取信息。当页面第一次加载时，它会出错，说查询缺少下拉列表中的变量。如果我从下拉列表中进行选择，它会刷新页面并解决问题。我需要下拉菜单来最初提交数据或查询在初始页面加载时获取其变量所需的任何内容。

```
$selected = 'selected = "selected" ';
$Country =$ID_SOCIEDAD;
echo "<form name='country_list' method='POST' action='http://opben.com/colombia/familias-de-carteras' >";

echo "<select name='Country' tabindex='1' >";

while($row = mysql_fetch_array($result))
  {

                echo " <option  ".($row['Fund_Manager_Company_Code'] == $Country? $selected : '')."value='". $row['Fund_Manager_Company_Code'] ."'>". $row['Fund_Manager_Company_Name'] ."</option>";

                  }
       echo "     </select>
    <input type='submit' value='Filter' />";
 echo "   </form> 
```

这是下拉菜单选项的 sql 查询：

```
$result = mysql_query("

 SELECT 
 ID_SOCIEDADADM as Fund_Manager_Company_Code,   
 DES_SOCIEDAD_CORTO as Fund_Manager_Company_Name

FROM dr_lista_rentabilidad_diaria

GROUP BY ID_SOCIEDADADM
")

  or die(mysql_error()); 
```

这是表的查询：

```
 $result = mysql_query("
      SELECT 
  ID_CARTERA as Fund_ID,
      DES_CARTERA_CC as Fund_Name,
      DES_CARTERACLASE as Class_Name,
      DES_CARTERACLASE_ESP as Special_Class_Name,
      FORMAT(POR_RENTCARTERA_C1,2) AS Yield_1month

      FROM dr_lista_rentabilidad_diaria
      WHERE COD_PAIS       = $COD_PAIS
      AND   ID_SOCIEDADADM = $ID_SOCIEDAD
      AND   `ID_COLUMNA_C1`= $ID_COLUMNA
      ORDER BY DES_CARTERA_CC ASC

  ")

       or die(mysql_error()); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-27T14:02:53.997

您没有发布您的查询，因此很难给出适当的答案。但是，我的猜测是您在该查询中的某处有变量 $_POST['Country'] 。那你为什么不这样做：

```
$country = $_POST['Country'];
if (!isset($country)) { $country = 'US'; }

$query = 'SELECT * FROM table WHERE country = ' . $country; 
```

编辑：正如 BenM（正确地）指出的那样，这个代码片段绝对不能保存。您不应将其包含在您的生产代码中。它只是为了让您了解如何通过始终为国家/地区提供有效值来避免您遇到的 SQL 错误。

# java - ECDSA 签名在验证时总是返回 false

> ID：15113781
> 
> 赞同：1
> 
> 时间：2013-02-26T12:22:52.427
> 
> 标签：java, digital-signature, ecdsa

我有 3 个测试密钥——RSA、DSA 和 ECDSA。RSA 和 DSA 基于密钥的签名在验证后返回 true。但是基于 ECDSA 的签名总是返回 false（即使签名匹配）。

相同的代码用于验证所有 3 个测试密钥（除了传递给的提供程序对象的差异`Signature.getInstance()`）。我的代码如下：

```
Signature ecdsa = Signature.getInstance("SHA1withECDSA");
ecdsa.initSign(pk);
ecdsa.update(rawKeyBytes);
byte[] signatureBytes = ecdsa.sign(); 

Signature ecdsa3 = Signature.getInstance("SHA1WithECDSA");
ecdsa3.initVerify(puk);  
ecdsa3.update(rawKeyBytes);
System.out.println("Verifying: "+ecdsa3.verify(signatureBytes)); 
```

程序的输出总是`Verifying: false`. 当我将提供程序更改为`SHA1WithRSA`并使用 RSA 密钥（使用上面相同的代码）时，验证返回 true，与基于 DSA 的密钥相同。有人提到它与`ECPoint`传递给`ECPublicKeySpec()`构造函数有关，当尝试从私钥创建公钥时，如下所示：

```
ECPrivateKey ec = (ECPrivateKey) privateKey;
ECPublicKeySpec ecKeySpec = new ECPublicKeySpec(
    ec.getParams().getGenerator(),
    ec.getParams()
); 
```

有人提到，如果使用与私钥不同的密钥，签名验证（使用公钥）将失败`ECPoint`。但我实际上是`ECPoint`从`PrivateKey`对象 ( `ec`) 中得到的。请问有什么解决办法吗？

# java - 如何检查字符是否正确

> ID：15113785
> 
> 赞同：2
> 
> 时间：2013-02-27T13:52:19.607
> 
> 标签：java, boolean, character

我有一堆字符，想删除不是'#''的所有内容。“E”和“G”。

我试着用这个：

```
if (buffer.get(buffertest) == 'G'|'E'|'#'|'.') 
```

但是遇到了不兼容类型的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T13:54:02.080

这个根本问题是按位 OR 运算符和 Java 运算符优先级层次结构的错误使用。这种类型的 Java 表达式从左到右求值，== 运算符优先于 |。结合起来，您的表达大致转化为：

```
(buffer.get(buffertest) == 'G') | 'E' | '#' | '.' 
```

`buffer.get(buffertest) == 'G' evaluates to a boolean.<br> The second part of the expression`表达式“E”的第一部分| '#' | '.'` 计算为一个 int，它被缩小为一个 char

这会导致不兼容的类型编译时错误。您可以通过以下方式扩展检查来更正您的代码：

```
char ch = buffer.get(buffertest);
if(ch == 'G' || ch == 'E' || ch == '#' || ch == '.') {
   // do something
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T13:54:31.093

您没有显示 的​​类型`buffer`，这使事情变得更加困难。但假设`buffer.get`返回 a `char`，您可以使用：

```
if ("GE#.".indexOf(buffer.get(buffertest) >= 0) 
```

或者您可以根据 Simulant 的回答明确检查每个选项......或者做同样的事情但只调用`get`一次：

```
char x = buffer.get(buffertest);
if (x == 'G' || x == 'E' || x == '#' || x == '.') 
```

您的原始代码失败，因为`|`试图对四个字符执行按位“或”操作......这与在四个*条件*上执行逻辑“或”不同。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-27T13:55:43.570

您需要单独比较每个字符。假设`buffer.get(buffertest)`返回 a `char`，这是如何做到的：

```
char c = buffer.get(buffertest);
if (c == 'G' || c == 'E' || c == '#' || c == '.') {
    // do something
} 
```

或者，您可以执行以下操作：

```
char c = buffer.get(buffertest);
if ("GE#.".contains(Character.toString(c))) {
    // do something
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-27T13:54:27.080

```
if (buffer.get(buffertest) == 'G'||
 buffer.get(buffertest) == 'E'||
 buffer.get(buffertest) == '#'||
 buffer.get(buffertest) == '.') 
```

# java - 当我重新启动tomcat“上下文初始化失败”时出现此错误

> ID：15113789
> 
> 赞同：0
> 
> 时间：2013-02-27T13:52:27.897
> 
> 标签：java, spring

当我重新启动tomcat“上下文初始化失败”时出现此错误

```
[ERROR][2013-02-26 15:48:49,432][ContextLoader] - [Context initialization failed]
org.springframework.beans.factory.parsing.BeanDefinitionParsingException: Configuration            problem: Failed to import bean definitions from relative location  [applications\applications.xml]
Offending resource: ServletContext resource [/WEB-INF/config/context/appContext.xml];  nested exception is  org.springframework.beans.factory.parsing.BeanDefinitionParsingException: Configuration  problem: Failed to import bean definitions from relative location [..\..\..\..\schema\ab- products\common\resources\appContext-services.xml]
Offending resource: ServletContext resource [/WEB-INF/config/context/applications/applications.xml]; nested exception is org.springframework.beans.factory.BeanDefinitionStoreException: IOException parsing XML document from ServletContext resource [/schema/ab-products/common/resources/appContext-services.xml]; nested exception is java.io.FileNotFoundException: Could not open ServletContext resource [/schema/ab-products/common/resources/appContext-services.xml] 
```

这是appContext-services.xml，它存在于/schema/ab-products/common/resources/appContext-services.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:aop="http://www.springframework.org/schema/aop"
xmlns:p="http://www.springframework.org/schema/p"
xmlns:util="http://www.springframework.org/schema/util"
xmlns:security="http://www.springframework.org/schema/security"
xsi:schemaLocation="
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-2.0.xsd
http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.0.xsd
http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-2.0.xsd">

<!-- ========================= Start of SERVICE DEFINITIONS ========================= -->

<!--
    Per-activity configuration bean.
-->
<bean id="AbCommonResources-configuration"
    class="com.archibus.service.cost.Configuration">
    <property name="defaultDateStart" value="1980-01-01" />
    <property name="defaultDateEnd" value="2099-12-31" />
</bean>

<!-- 
    Remote version of CostService. This service is not used when the client calls WFRs. 
    TODO: fix proxyInterfaces="com.archibus.utility.Immutable": define and use ICostService interface.
-->
<bean id="CostService-remote"
    class="org.springframework.aop.framework.ProxyFactoryBean"
    p:proxyInterfaces="com.archibus.utility.Immutable"
    p:target-ref="CostService">
    <property name="interceptorNames">
        <list>
            <value>securityInterceptor</value>
            <value>exceptionHandlingInterceptor</value>
        </list>
    </property>
</bean>

<!-- 
    Local version of CostService, used by WFRs. 
-->
<bean id="CostService"
    class="com.archibus.service.cost.CostService"
    scope="prototype"
    p:configuration-ref="AbCommonResources-configuration">
</bean>

<!--
    Cost beans.
-->
<bean id="actualCost"
    class="com.archibus.app.common.finance.domain.ActualCost"
    scope="prototype">
</bean>
<bean id="scheduledCost"
    class="com.archibus.app.common.finance.domain.ScheduledCost"
    scope="prototype">
</bean>
<bean id="recurringCost"
    class="com.archibus.app.common.finance.domain.RecurringCost"
    p:configuration-ref="AbCommonResources-configuration"
    scope="prototype">
</bean> 
```

这是applications.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.0.xsd">

<import resource="..\..\..\..\schema\ab-products\common\resources\appContext-services.xml" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T15:44:06.683

谢谢你的回复，我解决了这个问题。快到java版了。我将我的 java 版本 1.4 更改为 1.6，所以现在没有问题了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T13:57:28.380

堆栈错误非常清楚。加载时上下文初始化失败 `/WEB-INF/config/context/applications/applications.xml`

我猜你导入以下文件， `/schema/ab-products/common/resources/appContext-services.xml`

将文件移动到 `/WEB-INF/config/context/applications/`并更新您的导入语句`applications.xml`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T13:57:45.773

问题似乎是：

```
nested exception is java.io.FileNotFoundException: Could not open ServletContext resource [/schema/ab-products/common/resources/appContext-services.xml] at 
```

是否`appContext-services.xml`存在于指定位置，并且可读（即具有正确的权限）？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T13:56:25.727

Goodness - here's your problem:

```
 java.io.FileNotFoundException: Could not open ServletContext resource [/schema/ab-products/common/resources/appContext-services.xml] 
```

Spring couldn't find that app context XML in the CLASSPATH.

Check the location and the way you've declared it in the web.xml. One or both are wrong.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T13:56:26.073

the problem might be the your xml file location

FileNotFoundException means it is unable to find the file in that path.

# sql - 使用多个“LIKE”优化存储过程

> ID：15113790
> 
> 赞同：1
> 
> 时间：2013-02-27T13:52:30.967
> 
> 标签：sql, sql-server, sql-server-2008, tsql, stored-procedures

我传入了一个逗号分隔的值列表，我需要将这些值与数据库进行比较

这是我传入的值的示例：

```
@orgList = "1123, 223%, 54%" 
```

要使用通配符，我认为我必须这样做`LIKE`，但查询运行了很长时间并且只返回 14 行（结果是正确的，但它只是需要永远，可能是因为我使用了不正确的连接）

我可以做得更好吗？

这就是我现在所做的：

```
declare @tempTable Table (SearchOrg nvarchar(max) )

insert  into @tempTable
   select * from dbo.udf_split(@orgList) as split 

-- this splits the values at the comma and puts them in a temp table

-- then I do a join on the main table and the temp table to do a like on it.... 
-- but I think it's not right because it's too long. 

select something 
from maintable gt
join @tempTable tt on gt.org like tt.SearchOrg
where
    AYEAR= ISNULL(@year, ayear)
    and (AYEAR >= ISNULL(@yearR1, ayear) and ayear <= ISNULL(@yearr2, ayear))
    and  adate = ISNULL(@Date, adate)
    and (adate  >= ISNULL(@dateR1, adate) and adate <= ISNULL(@DateR2 , adate)) 
```

最终结果将`maintable.org`是 1123 或以 223 开头或以 554 开头的所有行

我的日期疯狂的原因是因为有时存储过程只检查一年，有时检查一年范围，有时检查特定日期，有时检查日期范围......所有未使用的东西都作为空值传入。

也许问题在那里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T14:03:10.213

尝试这样的事情：

```
Declare @tempTable Table
(
   -- Since the column is a varchar(10), you don't want to use nvarchar here.
   SearchOrg varchar(20)
);

INSERT INTO @tempTable
SELECT * FROM dbo.udf_split(@orgList);

SELECT 
   something
FROM 
   maintable gt
WHERE
   some where statements go here
And
   Exists
   (
      SELECT 1
      FROM @tempTable tt
      WHERE gt.org Like tt.SearchOrg
   ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T14:14:27.503

您的查询可能难以优化。部分问题是`where`条款中的内容。您可能想先过滤这些，然后使用`like`. 或者，您可以尝试加快连接速度，然后对结果进行全表扫描。

SQL Server 应该优化`like`'abc%' 形式的语句——即通配符位于末尾的位置。（例如，请参见[此处](http://www.adathedev.co.uk/2010/05/optimising-like-conditions-with.html)。）因此，您可以从 上的索引开始`maintable.org`。幸运的是，您的示例符合此标准。但是，如果您有 '%abc'（通配符在前），那么优化将不起作用。

为了使索引发挥最佳作用，它可能还需要考虑`where`子句中的条件。换句话说，添加索引是暗示性的，但查询的其余部分可能会排除索引的使用。

而且，让我补充一下，这些类型的搜索的最佳解决方案是使用 SQL Server 中的全文搜索功能（请参阅[此处](http://msdn.microsoft.com/en-us/library/ms142571%28v=sql.105%29.aspx)）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T14:29:50.080

这种带有可选过滤器`LIKE`并由表（！）驱动的动态查询很难优化，因为几乎没有什么是静态已知的。优化器必须创建一个非常通用的计划。

**您可以通过magnitute**做两件事来加快速度：

1.  玩`OPTION (RECOMPILE)`。如果编译`times`是可接受的，这将至少处理所有可选过滤器（但不处理 LIKE 表）。
2.  做代码生成和`EXEC sp_executesql`代码。使用内联到 SQL 中的所有子句构建一个查询`LIKE`，使其看起来像这样：（`WHERE a LIKE @like0 OR a LIKE @like1 ...`不确定是否需要`OR`or `AND`）。这允许优化器摆脱连接并只执行普通谓词）。

# xml - 使用 Apple 脚本解析 XML

> ID：15113798
> 
> 赞同：0
> 
> 时间：2013-02-27T13:53:01.743
> 
> 标签：xml, applescript, automator

我尝试创建一个从网站下载图像的 Automator 工作流程。图像的名称在一个 xml 文件中，我想提取它们以创建一个像[http://test.com/images/dynamic_image_name.jpg这样的 url](http://test.com/images/dynamic_image_name.jpg)

当我拥有 Automator 的 URL 时，我发现了如何下载图像，但我正在寻找一种解析 XML 文件的方法，以便提取图像名称并自动生成好的 URL。

这是 XML 文件的一部分：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
<key>Managers</key>
<dict>
    <key>Sophie Barriac</key>
    <dict>
        <key>image</key>
        <string>sophie.png</string>
        <key>Téléphone</key>
        <dict>
            <key>number</key>
            <string>0460046150</string>
            <key>mobile</key>
            <string>0614589665</string>
        </dict>
        <key>Email</key>
        <dict>
            <key>email</key>
            <string>sophie.barriac@cgi.com</string>
        </dict>
    </dict>
    <key>Kevin Berthier</key>
    <dict>
        <key>image</key>
        <string>kevin.png</string>
        <key>Téléphone</key>
        <dict>
            <key>number</key>
            <string>0469646007</string>
        </dict>
        <key>Email</key>
        <dict>
            <key>email</key>
            <string>kevin.berthier@cgi.com</string>
        </dict>
    </dict>
</dict> 
```

我看到了一些关于 AppleScript 的东西，但我对此一无所知。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T09:46:26.187

由于您发布的 XML 文件是一个`.plist`文件，因此您可以使用以下内容：

```
tell application "System Events"
    set plistFile to contents of property list file "PATH TO PLIST FILE"

    set managersPlist to property list item "Managers" of plistFile
    set managers to every property list item of managersPlist

    repeat with manager in managers
        set imageFile to value of property list item "image" of manager
        display dialog imageFile
    end repeat
end tell 
```

这将提取所有`image`键的值。

# java - 在 JPanel 上绘图而不重新绘制背景

> ID：15113799
> 
> 赞同：0
> 
> 时间：2013-02-27T13:53:03.917
> 
> 标签：java, swing, jpanel, repaint, glasspane

我有一个算法可以在 JPanel 上显示漂亮的分形。每当用户将鼠标悬停在面板上时，我希望能够在分形面板上显示网格线“十字准线”。

我已经通过一种快速、简单的方法来绘制这样的东西（`fractal`是分形 JPanel 的名称）来实现这一点：

```
@Override
public void mouseMoved(MouseEvent e) {
    Graphics g = fractal.getGraphics();
    // <problematic part>
    //   This is computationally expensive to do. It takes a good 0.2 seconds.
    //   This must be done to clear 'old' crosshairs
    fractal.repaint();
    // </problematic part>

    Color c = fractal.getColourScheme().getGridlineColour();
    g.setColor(new Color(c.getRed(), c.getGreen(), c.getBlue(), 50));

    // Draw crosshairs around the mouse's current point
    g.drawLine(e.getX(), 0, e.getX(), fractal.getHeight());
    g.drawLine(0, e.getY(), fractal.getWidth(), e.getY());
} 
```

如图所示，我必须 repaint() 以清除任何旧的十字准线。

我有一种感觉，我需要在诸如 Glass Pane 之类的东西上绘制我的十字准线才能放在我的 JPanel 之上——但是，JPanel 不提供 Glass Pane。JRootPane 可以——我可以用它来代替吗？

### 附言

`Line2D`目前我正在用很多小s逐个像素地绘制分形。我最终会将其更改为生成`BufferedImage`- 在这种情况下，这个问题甚至会重要吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T14:08:57.270

我认为您使用玻璃板的想法将永久解决您的问题。无论您选择如何绘制分形本身，或者它是否显示在 JPanel 或任何其他类型的组件中，都不再重要。每个对象都应该真正对自己的数据和操作负责，因此不同的对象确实可能是一个不错的设计选择。

话虽如此，您仍然需要重新粉刷玻璃板。您应该能够使用该`public void repaint(long tm, int x, int y, int width, int height)`方法仅重新绘制面板的某些部分，而不是重新绘制整个部分。

[JavaDoc](http://docs.oracle.com/javase/6/docs/api/javax/swing/JComponent.html#repaint%28long,%20int,%20int,%20int,%20int%29)指出：

> 如果组件正在显示，则将指定区域添加到脏区域列表。*在所有当前挂起的事件都被调度后，组件将被重新绘制*。

# breeze - 带有工作单元/存储库模式的微风

> ID：15113804
> 
> 赞同：8
> 
> 时间：2013-02-27T13:53:15.193
> 
> 标签：breeze, single-page-application

我只是想知道我应该如何在一个单独的数据层项目中实现微风的**EFContextProvider 。**另外，由于该项目是一个类库而不是 MVC 4 应用程序，我应该如何将它包含到我的项目中？我真的不需要 Breeze NuGet 包中的全部技巧，只**需要 EFContextProvider 的**东西。我想使用**EFContextProvider** DbContext 包装器实现工作单元模式，就像 John Papa 在他精彩的复数课程中所做的那样。有人做过吗？有小费吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T04:45:06.920

我们有一个更复杂的示例，称为“TempHire”，它具有完整的 UoW，带有 Repos 和单独的模型项目。

Breeze.NET 组件（Breeze 应用程序的 .NET 服务器端助手……如果您使用 .NET）都在一个 .DLL 中它们根本不依赖 MVC……zip。那里有 Web API 的东西。也许这就是你所关心的。嗯...请记住，这是[GitHub 上的开源代码](https://github.com/IdeaBlade/Breeze)。您不受 Breeze .DLL 的限制。用你想要的部分构建你自己的。

在我看来，UoW 距离 Repository 很短。如果您了解有界上下文是什么并且可以将其转换为 DbContext 实现，我认为您自己不需要太多帮助来进行转换。它没有魔法。

对于每个人，我强烈推荐 Scott Allen 在[Pluralsight 设计模式课程](http://pluralsight.com/training/courses/TableOfContents?courseName=patterns-library)中关于 Repository 和 UOW 的视频……这可能是我见过的对这些模式的最清晰、无术语的阐述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T12:04:05.330

这是 Breeze 人员发布的一篇关于如何使用 Breeze 在服务器上使用 UoW 和 Repo 的帖子 [http://www.breezejs.com/spa-template#server](http://www.breezejs.com/spa-template#server)

# php - PHP 秒差 time() PHP

> ID：15113806
> 
> 赞同：0
> 
> 时间：2013-02-27T13:53:19.110
> 
> 标签：php, mysql, time

嗨，我正在尝试使用 php 和 html 执行以下操作：我有一个提交 time() 并将其存储为变量`TIMESTAMP`的`$POST`表单，下次提交表单时会发布一个名为的新变量`DELAY`，即 time( )- `TIMESTAMP`。该过程似乎有效，但我的问题似乎是 PHP time() 函数似乎有点飘忽。

我可以每隔 3 秒提交一次表格，有时`DELAY`= 3，因为有时它不正确，比如 7 秒甚至 12 秒。返回当前时间时如何使`time()`函数更准确？

我需要在延迟大于 15 秒时才执行的 MySQL 查询中使用延迟

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T14:21:32.510

这肯定与 php time() 无关。

如果您在虚拟机上运行，​​如果主机配置不正确，您可能会遇到时间漂移。检查是否是这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T18:15:53.717

我希望这段代码对你有帮助

```
function DifTime($T1,$T2){
         $diff=abs($T2-$T1);
         $years   = floor($diff / (365*60*60*24)); 
         $months  = floor(($diff - $years * 365*60*60*24) / (30*60*60*24)); 
         $days    = floor(($diff - $years * 365*60*60*24 - $months*30*60*60*24)/ (60*60*24));
         $hours   = floor(($diff - $years * 365*60*60*24 - $months*30*60*60*24 - $days*60*60*24)/ (60*60)); 
         $minuts  = floor(($diff - $years * 365*60*60*24 - $months*30*60*60*24 - $days*60*60*24 - $hours*60*60)/ 60); 
         $seconds = floor(($diff - $years * 365*60*60*24 - $months*30*60*60*24 - $days*60*60*24 - $hours*60*60 - $minuts*60)); 
         return array('Day'=>$days,'Month'=>$months,'Year'=>$years,'Hours'=>$hours,'Minuts'=>$minuts,'Seconds'=>$seconds);
     } 
```

样本：

```
 $Data=DifTime(TIMESTAMP,(time()-TIMESTAMP)+TIMESTAMP);
  printf("%d:%d:%d:%d", $Data['Day'], $Data['Hours'], $Data['Minuts'], $Data['Seconds']); 
```

输出：

```
0:0:0:10 
```

# java - 运行用户 java 代码然后将结果返回给 webbrowser 的 webserver

> ID：15113810
> 
> 赞同：1
> 
> 时间：2013-02-27T13:53:31.243
> 
> 标签：java, webserver

我是 Java 编程的新手，让我解释一下我打算实现的目标。

1.  我在 Linux 机器上存在 java 类文件。
2.  我想从其他机器远程运行这些并将结果（testng 结果或 junit）返回到 windows 机器。

我的方法

1.  创建一个包含我的脚本的网络服务器（在 Linux 机器上）。
2.  使用 webbrowser 连接到它并执行 java 类，然后将结果从服务器推送到 webbrowser。

您能否提供我可以学习完成此任务的链接，或者如果您有更好的方法，请指导我。

# php - 如何从 CLI 运行 php 脚本？

> ID：15113811
> 
> 赞同：3
> 
> 时间：2013-02-27T13:53:43.027
> 
> 标签：php, codeigniter

我将方法存储在`Z:\work\project\apps\controllers\_cron\tools\method`

如何使用命令行调用“方法”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:58:25.453

简单如

`C:\path\to\php.exe -f "Z:\path\to\file.php"`

资料来源： [谷歌中“从命令行窗口运行 php”的#1 结果](http://php.net/manual/en/install.windows.commandline.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T13:56:13.967

You run the PHP executable with the location of the file as an argument (Windows example: `php.exe path/to/method.php`). The location of `php.exe` depends on where you installed it.

**[Read more.](http://www.php.net/manual/en/features.commandline.options.php)**

# php - Ajax 搜索帖子错误

> ID：15113821
> 
> 赞同：0
> 
> 时间：2013-02-27T13:54:12.253
> 
> 标签：php, javascript, jquery, ajax, pdo

我需要两件事的帮助。第一：如果我点击空提交按钮。它应该向我显示一个错误。第二：如果有0个结果，就会报错。

```
$(document).ready(function(){
    $(".search").click(function(){
        $.post("search.php", { keywords: $(".keywords").val() }, function(data){
            $("div#search").empty()
            $.each(data, function(){
                $("div#search").append("- <a href='#?id=" + this.id + "'>" + this.title + "</a><br>");
            });
        }, "json");
    });
}); 
```

--

```
$query = $db->prepare("SELECT `media`.`id`, `media`.`title` FROM `media` WHERE `media`.`title` LIKE :keywords");

$keywords = (isset($_POST['keywords']) === true) ? $_POST['keywords'] : '';

if (empty($keywords) === true) {
    $error = 'error';
    echo json_encode( $error );
} else {
    $query->bindValue(':keywords', '%' . $keywords . '%', PDO::PARAM_STR);
    $arr = array();
    $query->execute();
    while( $row = $query->fetch(PDO::FETCH_ASSOC) ) {
        $arr[] = array( "id" => $row["id"], "title" => $row["title"]);
    }
    echo json_encode( $arr );
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T14:08:57.503

好的，我在本地机器上煞费苦心地重新创建（jsfiddle 不允许您复制/粘贴）它。您的 html/js 代码应如下所示：

```
<html>
    <head>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    </head>
    <body>
        <input type="text" name="search" class="keywords">
        <input type="submit" name="submit" class="search">
        <div id="search"></div>
        <script>
            $(document).ready(function(){
                $(".search").click(function(){
                    $.post(
                        "search.php", 
                        { keywords: $(".keywords").val() }, 
                        function(data){
                              $("div#search").empty()
                          $("div#search").append(data);
                        }, 
                        "json"
                    );
                });
            });
        </script>
    </body>
</html> 
```

对于 PHP search.php 页面：

```
<?php
$keywords = (isset($_POST['keywords']) === true) ? $_POST['keywords'] : '';
if (empty($keywords) === true) {
    echo json_encode( "error" );
}
else {
    // run mysql commands
    // if resultset == empty
    // echo json_encode( "error" );
    echo json_encode( "actual data" );
}
?> 
```

* * *

要在 javascript 中解析 json 数据，请执行以下操作：

```
$.post(
  "search.php", 
  { keywords: $(".keywords").val() }, 
  function(data) {
    $("div#search").empty();
    obj = JSON.parse(data);
    $("div#search").append(obj.id + " " + obj.title);
  }, 
  "json"
 ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T13:57:50.580

尝试使用`$(this)`而不是`this`

# flot - jQuery Flot：缩放时更改 xaxis

> ID：15113829
> 
> 赞同：0
> 
> 时间：2013-02-27T13:54:28.087
> 
> 标签：flot

有没有办法让 x 轴从显示小时切换到例如工作日、月份..缩小时？

目前我的x轴配置如下：

```
xaxis: {
    mode: "time",
    minTickSize: [1, "second"],
    timeformat: "%H:%M:%S",
} 
```

我的默认图表看起来不错，但是当我缩小足够多的时间时，xaxis 上的标签只会显示“00:00”。如何更改以`timeformat`使日期也包含在内？例如`Tue 27 00:00`或类似的。

这是一个图形被缩小很多的示例（显然我需要远程一些数据点以使其看起来更平滑..）

![例子](../Images/7ee5c1b46c3326f62c794a05bc58e3cd.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T14:12:58.000

您可以使用标准说明符添加日期，例如 %Y-%m-%d。完整列表可以在[时间序列数据](https://github.com/flot/flot/blob/master/API.md#time-series-data)部分下的 API 文档中找到。

要根据范围更新格式，即放大时显示 HMS 但缩小时显示 YMD，比较棘手。您需要监听“plotzoom”事件并检查范围以查看格式是否需要更改。如果是这样，请使用 getOptions() 检索和更新绘图的选项，然后调用 setupGrid & draw 以使用新格式重新绘制绘图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-13T13:47:50.440

我通过为 X 轴制作自定义 tickFormatter 解决了这个问题：

在您的 xaxis 选项中放置：

```
xaxis: {
    mode: "time",
    tickFormatter: customXAxisFormatter,
    ...
} 
```

那么您的 customXAxisFormatter 可能是例如。：

```
function customXAxisFormatter(val, axis)
{
    var d = new Date(val);

    // If time difference is more than 24 hours
    if ((axis.max - axis.min) > (24*3600*1000))
        return d.strftime("%a<br>%H:%M");
    else
        return d.strftime("%H:%M");
} 
```

我希望这有帮助 ：）

# eclipse - Eclipse添加项目覆盖maven依赖

> ID：15113832
> 
> 赞同：0
> 
> 时间：2013-02-27T13:54:35.580
> 
> 标签：eclipse, maven, dependencies

我有一个使用其他小项目的 Maven 项目。我将它们添加到主人的 pom 文件中。所以我的 Eclipse 项目属性如下所示：

```
>Master project
  >Java Resources
   >Libraries
     >JRE System Library
     >Maven dependencies
        >smallProj1.jar
        >smallProj2.jar 
```

问题是我没有所有代码，`smallProj1`并且`smallProj2`每当将它们添加到我的工作区时，Eclipse 都会覆盖 maven 依赖项，只是调用这两个项目，而不是从我的本地 maven 存储库中调用 jar 文件，然后我将所有代码都包含在这些红色下划线中. 将项目属性添加到工作区后，Eclipse 中的项目属性如下所示：

```
>Master project
>smallProj1
>smallProj2
  >Java Resources
   >Libraries
     >JRE System Library
     >Maven dependencies
        >smallProj1   (not jar anymore - folder)
        >smallProj2   (not jar anymore - folder) 
```

由于我还想在编码时查看`smallProj1`和`smallProj2`编码，因此我想将它们都保留在我的工作区中。但我希望我`Master project`使用我提供的 jar 文件，而不是工作区中的小项目。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:58:20.557

您可以右键单击一个项目并设置“Maven”->“禁用工作区分辨率”。这将让 Maven 从 Maven 中找到依赖项，而不是在工作区中。我认为不可能在依赖的基础上做到这一点。

但我认为在您的情况下，最好修复工作区中损坏的 smallProjX（因为它们完全包含您需要的代码），以便可以正确构建主项目。

# ruby-on-rails - 访问导轨包括 has_many

> ID：15113833
> 
> 赞同：1
> 
> 时间：2013-02-27T13:54:36.973
> 
> 标签：ruby-on-rails, include, has-many

我有一个名为“Match”的模型和一个名为“Bet”的模型

```
class Match < ActiveRecord::Base
    ...
    has_many :bets
end 
```

我的模型赌注：

```
class Bet < ActiveRecord::Base
   attr_accessible :match_id, :user_id, :bet 
   ...
   belongs_to :match
   belongs_to :user
end 
```

我正在使用以下代码一起选择一些匹配项和用户的投注：

```
@matches = Match.includes(:bets).where("bets.user_id = ? or bets.user_id is NULL", @user.id) 
```

如何使用此查询访问用户投注？

使用这个不起作用：

```
@matches.each do |match| 
    match.bet.bet
    ... 
```

如何访问比赛中的投注属性？

谢谢！！

* * *

使用此代码尝试@sevenseacat 答案：

```
 @user ||= User.find_by_id(params[:user_id]) if params[:user_id]

  if @user
    @matches = Match.includes(:home_team, :away_team, :bets).where("bets.user_id = ? or bets.user_id is NULL", @user.id) #.group_by{ |match| match.date.strftime("%d/%m/%y")}

    @matches.each do |match| 
      match.bets.each do |bet| 
        bet.bet 
      end 
    end
  end 
```

* * *

我已将其更改为 match.bets.first （对于每个 match_id 和 user_id 我只有 1 个赌注，所以它可以工作）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T13:56:17.903

您只需`match.bets`在您的区块内进行操作即可访问每场比赛的投注。

如果您想迭代这些赌注，请使用另一个`each`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T14:04:21.383

@sevenseacat 是对的
`@match.bet.each { |bet| bet.attr }`，也许对你有好处

# c# - 将此代码从 c# 转换为 VB.NET 时出现问题

> ID：15113835
> 
> 赞同：-1
> 
> 时间：2013-02-27T13:54:41.617
> 
> 标签：c#, vb.net

我在将以下代码从 c# 转换为 VB.NET 时遇到问题。我已经尝试过在线转换器，但它们都在抛出错误。有人可以告诉我转换后的 VB.NET 代码吗？

```
FixedPage page2= new FixedPage();
PageContent page2Content = new PageContent();
((IAddChild)page2Content).AddChild(page2); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T13:55:37.047

你试过什么？

这个怎么样...

```
Dim page2 As New FixedPage()
Dim page2Content As New PageContent()
DirectCast(page2Content, IAddChild).AddChild(page2) 
```

# javascript - 清除队列后Jquery动画变慢

> ID：15113838
> 
> 赞同：0
> 
> 时间：2013-02-27T13:55:00.523
> 
> 标签：javascript, jquery, animation, loops

希望您能帮助解决 jQuery 中的动画问题。我正在使用以下代码制作一个可以启动和停止的动画循环，并且可以选择动画元素是脉冲还是移动，如箭头所示：

```
//set the flashing pointer on or off
function flashPointer(state, time, el, style){
    switch(state){
        case "on":
            loopPointer(time, style, el);
        break;
        case "off":
            $(el).stop(true, false).fadeOut(100, function(){ 
                $(el).clearQueue();
            });
        break;
    } 
```

}

```
//make a pointer graphic fade in and out
function loopPointer(time, style, el){
    switch(style){
        case "fade":
        $(el).fadeIn(time, function(){
            $(this).fadeOut(time, function(){
                loopPointer(1000, "fade", el);
            }); 
        });
        break;

        case "move":
        $(el).fadeIn(time).animate({top:15}, time, function(){
            $(this).animate({top:0}, function(){
                loopPointer(1000, "move", el);
            }); 
        });
    }
} 
```

知道为什么如果我多次启动和停止动画，它会变得越来越慢吗？

当然也欢迎任何其他意见和改进点。

谢谢大家 ;)

杰米

更新

我这样调用这些函数：

```
flashPointer("on", 1000, "#pointer", "move");
flashPointer("off", 1000, "#pointer", "move");
flashPointer("on", 1000, "#pointer", "fade");
flashPointer("off", 1000, "#pointer", "fade"); 
```

我调用一次上述函数来打开推子，例如，当浏览器请求访问用户的地理位置信息时，一旦获得所需的信息/权限，再次调用以将其关闭。

希望这有助于解释我想要做什么？

谢谢你的帮助！

杰米

# asp.net-mvc - webgrid asp.net mvc3的post项目

> ID：15113839
> 
> 赞同：4
> 
> 时间：2013-02-27T13:55:02.463
> 
> 标签：asp.net-mvc, asp.net-mvc-3, webgrid

我有这些 DTO

```
public class Header
{
    public int HeaderId{get;set;}
    public int Description{get;set;}
    public List<HeaderItem> HeaderItems{get;set;}

}

public class HeaderItem
{
    public int HeaderItemId{get;set;}
    public string DetailDescription{ get; set; }
    public bool Selected{ get; set; }
} 
```

我有这个控制器

```
 [HttpPost]
    public ActionResult PostMethod(Header dto)
    {
        ...
    } 
```

和这个 html

```
 @using (Html.BeginForm("PostMethod", "Controller", FormMethod.Post, new { id = "form" }))

{

@Html.TextBoxFor(x => x.Description)    

var grid = new WebGrid(Model.HeaderItems);
    }
    @grid.GetHtml(tableStyle: "grid",
    htmlAttributes: new { id = "grid" },
    columns: grid.Columns(
    grid.Column("Selected", "Seç", format: (item) => Html.CheckBox(String.Format("Selected_{0}", (int)item.HeaderItemId), false)),
    grid.Column("HeaderItemId", "", format: (item) => Html.Hidden("HeaderItemId")),
    grid.Column("DetailDescription", "Description")
    ) 
```

}

因此，此网格有一个复选框和一个 HiddenField，其中包含每行的 HeaderItemId 值。

我想发布我的表单并填充 Header 类的属性 HeaderItems。

我怎样才能达到这个解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T14:05:46.227

> 我怎样才能达到这个解决方案？

像这样：

```
columns: grid.Columns(
    grid.Column(
        "Selected", 
        "Seç", 
        format: 
            @<text>
                @{ var index = Guid.NewGuid().ToString(); }
                @Html.Hidden("HeaderItems.Index", index)
                @Html.Hidden("HeaderItems[" + index + "].HeaderItemId", (int)item.HeaderItemId)
                @Html.CheckBox("HeaderItems[" + index + "].Selected", (bool)item.Selected)
            </text>
    ),
    grid.Column("HeaderItemId")
    grid.Column("DetailDescription", "Description")
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T14:04:05.547

尝试更改您的`Html.CheckBox`for`Html.CheckBoxFor`和相同的`Html.Hidden`for `Html.HiddenFor`。

这将是：

```
@grid.GetHtml(tableStyle: "grid",
    htmlAttributes: new { id = "grid" },
    columns: grid.Columns(
             grid.Column("Selected", "Seç", format: (item) => Html.CheckBoxFor(m => item.HeaderItemId)),
             grid.Column("HeaderItemId", "", format: (item) => Html.Hidden(m => item.HeaderItemId)),
             grid.Column("DetailDescription", "Description")
    )
) 
```

我没有测试它以为...

# c++ - no matching function for call to ' '

> ID：15113856
> 
> 赞同：18
> 
> 时间：2013-02-27T13:55:46.477
> 
> 标签：c++

I was given to implement the function:

```
 "static double distanta (const Complex&, const Complex&);" 
```

which return the distance between two Complex numbers. The definition of the function it is inside the Complex class and I have implemented it like that:

```
double Complex::distanta(const Complex &a, const Complex &b)
{    
    double x = a.real() - b.real();
    double y = a.imag() - b.imag();

    return sqrt(x * x + y * y);
} 
```

As far as I know a static function can only access static members and my class only has

```
double _re;
double _im; 
```

as data members.

Within the main function I have called it as:

```
#include <iostream>
#include "complex.h"

using namespace std;

int main()
{
    Complex* firstComplexNumber; 
    firstComplexNumber = new Complex(81, 93);

    cout << "Numarul complex este: " << *firstComplexNumber << endl;

    Complex* secondComplexNumber;
    secondComplexNumber = new Complex(31, 19);

    cout << "Distanta dintre cele doua numere" <<endl << endl;
    Complex::distanta(firstComplexNumber, secondComplexNumber);
    return 0;
} 
```

and the error I get is:

error: no matching function for call to 'Complex::distanta(Complex*&, Complex*&)'

Could you please tell me what is it that I'm doing wrong? Thanks!

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-27T14:02:45.573

You are passing pointers (`Complex*`) when your function takes references (`const Complex&`). A reference and a pointer are entirely different things. When a function expects a reference argument, you need to pass it the object directly. The reference only means that the object is not copied.

To get an object to pass to your function, you would need to dereference your pointers:

```
Complex::distanta(*firstComplexNumber, *secondComplexNumber); 
```

Or get your function to take pointer arguments.

However, I wouldn't really suggest either of the above solutions. Since you don't need dynamic allocation here (and you are leaking memory because you don't `delete` what you have `new`ed), you're better off not using pointers in the first place:

```
Complex firstComplexNumber(81, 93);
Complex secondComplexNumber(31, 19);
Complex::distanta(firstComplexNumber, secondComplexNumber); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-27T14:03:29.063

You are trying to pass pointers (which you **do not delete**, thus leaking memory) where references are needed. You do not really need pointers here:

```
Complex firstComplexNumber(81, 93);
Complex secondComplexNumber(31, 19);

cout << "Numarul complex este: " << firstComplexNumber << endl;
//                                  ^^^^^^^^^^^^^^^^^^ No need to dereference now

// ...

Complex::distanta(firstComplexNumber, secondComplexNumber); 
```

# javascript - 从包含 300 个问题的数组生成课堂测验的想法

> ID：15113857
> 
> 赞同：-4
> 
> 时间：2013-02-27T13:55:51.157
> 
> 标签：javascript, jquery, html, logic, pseudocode

我想从我不想要答案开始，我只想要想法，所以本质上这是伪代码或概念的协作头脑风暴:)

问题：我被要求编写一个生成类测验的程序，这个测验需要从一个数组（300+-）中获取问题并以随机顺序打印出来，并且只有 x 个。每个测验都需要是唯一的，尽管它们可能在测验的不同时间包含相同的问题。该测验将采用电子格式，因此如果某些问题是多项选择，我将需要某种功能，该功能会为每个选择生成一个带有单选按钮的表格（这里有点混乱）。我现在只担心客户端编程。我将使用 JavaScript 作为客户端的东西，但请随意参考任何其他语言。

请随时添加任何建议和/或建议:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T14:06:36.620

像这样：

```
int quizlength = 10;//number of questions to display
var QuestionNumbers;//store list of question numbers
while (questionNumbers.Length < quizlength)
{
    int randomNo = new random();//remember to set min and max values as well as a salt
    if(!QuestionNumbers.Any(x=>x == randomNo)//if the question number is not yet in the list
    {
        QuestionNumbers.Add(randomNo);
    }
} 
```

# java - Having trouble compiling and recreating a JAR file using Eclipse

> ID：15113862
> 
> 赞同：0
> 
> 时间：2013-02-27T13:55:56.967
> 
> 标签：java

I have a Java JAR file that was developed to run in the browser. It works fine. There doesn't appear to be any sort of build file associated with the source code I've been given and I'm attempting to create a project and/or build script.

The source code references some third party code. What I've done is unzipped the JAR file into a folder that has this structure:

```
\App\src\com
\App\src\META-INF
\App\src\applet 
```

The "com" folder contains subfolders which contain the .CLASS files for the third party libraries. "applet" contains the .JAVA source code files (one folder, maybe 15 files).

The code appears to be written in 1.4 syntax (I manually attempted to compile some of the .JAVA files and it complained that some things were deprecated and/or required the older version).

I created a Java Project in Eclipse and pointed it to the \App folder. Then I went into the Properties for the project and went to Libraries and and clicked on "Add Class Folder" and added the \App\src\com folder. Then I went to "Order and Export" and moved this to the top. I also set the Java Compiler version to 1.4.

I am getting a large number of compiler errors, all of which seem to stem from the fact that it says it can't resolve an import. This import is the set of .CLASS files contained in the "com" subfolders. The namespace matches the directory structure.

This seems like it should be really straightforward, but I've tried various things and don't seem to be making any progress. Based on what I've read I'm sure it has something to do with the pathing but I'm at a loss at this point on how to fix it.

(I'm sure it goes without saying that I'm not a Java dev.)

Any thoughts or ideas as to where I'm going wrong?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T14:08:21.850

您能否尝试右键单击 Eclipse 的导航器。选择 Import>General>archive file>（要导入的 Jar 文件）。此时您应该正确导入了 jar 文件。如果您遇到任何问题，请告诉我。

# ajax - Is it IMPOSSIBLE to POST JSON with XDomainRequest?

> ID：15113866
> 
> 赞同：1
> 
> 时间：2013-02-27T13:56:02.433
> 
> 标签：ajax, internet-explorer, post, xdomainrequest

As I am not able to find a way to set the content-type to JSON for the data I sent via XDomainRequest,

I naturally ask:

Is it IMPOSSIBLE to POST JSON with XDomainRequest?

"[Only text/plain is supported for the request's Content-Type header](http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx?PageIndex=2)"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:58:49.627

看看其他一些问题，我会说这是可能的。

例如：[如何使用 POST 方法在 XDR 中发送 JSON 数据](https://stackoverflow.com/questions/10442961/how-to-send-json-data-in-xdr-using-post-method)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-06T07:24:58.793

您仍然可以将 JSON 作为纯文本 POST 并让服务器端直接读取 POST 正文并进行处理，即使对于 IE 而言，缺少 Content-Type 也是如此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-05T11:56:31.913

根据[http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx](http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx)

您不能发送 `content-type : application/json`xdr。您甚至不能发送任何其他自定义标头。xdr 仅限于`text/plain`

你能做的最好的就是`JSON.stringify()`在服务器端使用和解析它。

```
xhr.send(JSON.stringify(jsonObject)) 
```

# .net - .Net 4.5 是否包含 .Net 4.0

> ID：15113873
> 
> 赞同：15
> 
> 时间：2013-02-27T13:56:27.753
> 
> 标签：.net, deployment, frameworks, clickonce

我正在使用 Winforms 开发 C# 桌面应用程序。我使用 Visual Studio 的单击一次安装工具创建了安装策略。幸运的是，它为客户端提供了检测、下载和设置相关的必备组件。

我的问题是我开始使用 .NET 4.0 开发此应用程序，然后将其升级到 .NET 4.5，现在在先决条件列表中检查了 4.5 和 4。我想知道如果我取消选中 .NET 4.0 组件会好吗？

.NET 4.5 是否包含 .NET 4.0？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-27T14:17:48.683

安装 .NET 4.5 后，它有效地替换了机器上的 .NET 4.0。.NET 4.0 被新版本的 .NET 4.5 覆盖——根据微软的说法——它应该是 100% 向后兼容的。

阅读这些非常好的文章：

[.NET 4.5 是 .NET 4.0 的就地替代品](http://www.west-wind.com/weblog/posts/2012/Mar/13/NET-45-is-an-inplace-replacement-for-NET-40)

[.NET 版本控制和多目标 - .NET 4.5 是对 .NET 4.0 的就地升级](http://www.hanselman.com/blog/NETVersioningAndMultiTargetingNET45IsAnInplaceUpgradeToNET40.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T13:58:34.640

我认为如果您以 4.5 为目标，则不需要 4.0

请参阅[安装 .NET Framework 4.5](http://msdn.microsoft.com/en-us/library/5a4x27ek.aspx)

> .NET Framework 4.5 替换了 .NET Framework 4。在安装了 .NET Framework 4 的系统上安装 .NET Framework 4.5 时，程序集将被替换。*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-27T14:00:37.543

它本身不*包括*它（因为某些部分被覆盖），但是如果您以 4.0 为目标，那么它应该与 4.5 一起使用，**反之亦然**。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T13:59:26.413

问题的答案在这里：http: [//msdn.microsoft.com/en-us/library/5a4x27ek.aspx](http://msdn.microsoft.com/en-us/library/5a4x27ek.aspx)

恰恰：

> • .NET Framework 4.5 替换了 .NET Framework 4。在安装了 .NET Framework 4 的系统上安装 .NET Framework 4.5 时，程序集将被替换。

因此，没有 .NET 4.5 不包含 .NET 4.0。您仍然有可能会错过一些程序集

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T14:02:12.537

您可以为 .NET 4.5 编译应用程序并在 4.0 运行时上运行它——直到您遇到 4.0 上不存在的新功能。此时应用程序会在运行时爆炸。假设您编写了一些主要是 .NET 4.0 的代码，但只有 .NET 4.5 的一些新功能 - .NET 将愉快地启动您的应用程序并正常运行 4.0 的所有内容，直到它达到 4.5 代码 - 然后毫不客气地崩溃在运行时。

因此，没有 .NET 4.5 不包含 .NET 4.0。

# vba - 打开文档时，有没有办法在 Word 中显示 customUI 选项卡？

> ID：15113874
> 
> 赞同：4
> 
> 时间：2013-02-27T13:56:30.400
> 
> 标签：vba, ms-word, ribbon

我在 Word 中有一个自定义功能区选项卡，它是使用 CustomUI 编辑器创建的，其中包含许多可以正常工作的按钮。我试图找出是否可以在打开 Word 文档时设置此自定义选项卡的焦点。[或创建新文档时。]

目前，它默认只显示主页选项卡。我找到了打开和关闭自定义选项卡的方法，但不是“设置焦点”。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T23:37:45.380

您可以通过 Microsoft Active Accessibility 实现此目的，我已包含以下网页中的代码，但如果您想了解更多信息，请检查是否退出。（样本位于页面底部）。

[http://www.wordarticles.com/Shorts/RibbonVBA/RibbonVBADemo.php](http://www.wordarticles.com/Shorts/RibbonVBA/RibbonVBADemo.php)

在一个新模块中，您拥有接受可访问性 API 的代码：

```
 ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' '
    ' Definitions and Procedures relating to Accessibility, used by the Ribbon VBA  '
    ' Demonstration UserForm. The constants have been lifted from oleacc.h, and are '
    ' just a subset of those available.                                             '
    '                                                                               '
    '                                                    Tony Jollans, August 2008\. '
    ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' '

    Option Explicit

    Public Const CHILDID_SELF                  As Long = &H0&
    Public Const STATE_SYSTEM_UNAVAILABLE      As Long = &H1&
    Public Const STATE_SYSTEM_INVISIBLE        As Long = &H8000&
    Public Const STATE_SYSTEM_SELECTED         As Long = &H2&

    Public Enum RoleNumber
        ROLE_SYSTEM_CLIENT = &HA&
        ROLE_SYSTEM_PANE = &H10&
        ROLE_SYSTEM_GROUPING = &H14&
        ROLE_SYSTEM_TOOLBAR = &H16&
        ROLE_SYSTEM_PAGETAB = &H25&
        ROLE_SYSTEM_PROPERTYPAGE = &H26&
        ROLE_SYSTEM_GRAPHIC = &H28&
        ROLE_SYSTEM_STATICTEXT = &H29&
        ROLE_SYSTEM_TEXT = &H2A&
        ROLE_SYSTEM_BUTTONDROPDOWNGRID = &H3A&
        ROLE_SYSTEM_PAGETABLIST = &H3C&
    End Enum

    Private Enum NavigationDirection
        NAVDIR_FIRSTCHILD = &H7&
    End Enum

    Private Declare Function AccessibleChildren Lib "oleacc.dll" _
                        (ByVal paccContainer As Object, ByVal iChildStart As Long, ByVal cChildren As Long, _
                               rgvarChildren As Variant, pcObtained As Long) _
                    As Long

    Public Function GetAccessible _
                        (Element As IAccessible, _
                         RoleWanted As RoleNumber, _
                         NameWanted As String, _
                         Optional GetClient As Boolean) _
                    As IAccessible

        ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' '
        ' This procedure recursively searches the accessibility hierarchy, starting '
        ' with the element given, for an object matching the given name and role.   '
        ' If requested, the Client object, assumed to be the first child, will be   '
        ' returned instead of its parent.                                           '
        '                                                                           '
        ' Called by: RibbonForm procedures to get parent objects as required        '
        '            Itself, recursively, to move down the hierarchy                '
        ' Calls: GetChildren to, well, get children.                                '
        '        Itself, recursively, to move down the hierarchy                    '
        ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' '

        Dim ChildrenArray(), Child As IAccessible, ndxChild As Long, ReturnElement As IAccessible

        If Element.accRole(CHILDID_SELF) = RoleWanted And Element.accName(CHILDID_SELF) = NameWanted Then

            Set ReturnElement = Element

        Else ' not found yet
            ChildrenArray = GetChildren(Element)

            If (Not ChildrenArray) <> True Then
                For ndxChild = LBound(ChildrenArray) To UBound(ChildrenArray)
                    If TypeOf ChildrenArray(ndxChild) Is IAccessible Then

                        Set Child = ChildrenArray(ndxChild)
                        Set ReturnElement = GetAccessible(Child, RoleWanted, NameWanted)
                        If Not ReturnElement Is Nothing Then Exit For

                    End If                  ' Child is IAccessible
                Next ndxChild
            End If                          ' there are children
        End If                              ' still looking

        If GetClient Then
            Set ReturnElement = ReturnElement.accNavigate(NAVDIR_FIRSTCHILD, CHILDID_SELF)
        End If

        Set GetAccessible = ReturnElement

    End Function

    Private Function GetChildren(Element As IAccessible) As Variant()
        ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' '
        ' General purpose subroutine to get an array of children of an IAccessible  '
        ' object. The returned array is Variant because the elements may be either  '
        ' IAccessible objects or simple (Long) elements, and the caller must treat  '
        ' them appropriately.                                                       '
        '                                                                           '
        ' Called by: GetAccessible when searching for an Accessible element         '
        ' Calls: AccessibleChildren API                                             '
        ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' ' '
        Const FirstChild As Long = 0&
        Dim NumChildren As Long, NumReturned As Long, ChildrenArray()

        NumChildren = Element.accChildCount

        If NumChildren > 0 Then
            ReDim ChildrenArray(NumChildren - 1)
            AccessibleChildren Element, FirstChild, NumChildren, ChildrenArray(0), NumReturned
        End If

        GetChildren = ChildrenArray
    End Function 
```

然后在您的`ThisTemplate`or`ThisDocument`模块中：

```
 Option Explicit

    Private Sub Document_New()
        SwitchTab "MyTab"
    End Sub

    Private Sub Document_Open()
            SwitchTab "MyTab"
    End Sub

    Private Sub SwitchTab(TabName As String)
        Dim RibbonTab   As IAccessible

        'Get the Ribbon as an accessiblity object and the
        Set RibbonTab = GetAccessible(CommandBars("Ribbon"), ROLE_SYSTEM_PAGETAB, TabName)

        'If we've found the ribbon then we can loop through the tabs
        If Not RibbonTab Is Nothing Then
            'If the tab state is valid (not unavailable or invisible)
            If ((RibbonTab.accState(CHILDID_SELF) And (STATE_SYSTEM_UNAVAILABLE Or _
                         STATE_SYSTEM_INVISIBLE)) = 0) Then
                'Then we can change to that tab
                RibbonTab.accDoDefaultAction CHILDID_SELF
            End If
        End If

    End Sub 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-03T11:38:49.233

给出的答案是不必要的复杂。最简单的解决方案是山姆回答的一部分。

您在自定义 XML 的自定义 UI 根节点中添加引用方法名称的“onLoad”-callback 属性。例如：

```
<customUI xmlns="http://schemas.microsoft.com/office/2009/07/customui" onLoad="Ribbon_Load">
<ribbon startFromScratch="false">
    <tabs>
        <tab id="customTab" label="Custom Tab">
        </tab>
    </tabs>
</ribbon>
</customUI> 
```

然后，您将具有正确签名的回调方法添加到文档中的模块。在此方法中，您将可以访问 IRibbonUI 对象，该对象可用于激活选项卡 - 无论是自定义选项卡还是内置选项卡。以下示例激活了一个 id 等于“customTab”的自定义选项卡：

```
Sub Ribbon_Load(ribbon As IRibbonUI)
    ribbon.ActivateTab "customTab"
End Sub 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-10-25T12:42:04.137

我想通过简单地将所有代码复制到您工作的文档的模块中来对 CubeChase 的出色[答案](https://stackoverflow.com/a/15124723/6161587)进行补充，该答案在 32 位实例上对我有用。

但是，当您处理 64 位实例时，需要更改一些代码。

而不是**私有声明函数......只要**：

```
Private Declare Function AccessibleChildren Lib "oleacc.dll" _
                    (ByVal paccContainer As Object, ByVal iChildStart As Long, ByVal cChildren As Long, _
                           rgvarChildren As Variant, pcObtained As Long) _
                As Long 
```

您需要声明**Private Declare PtrSafe Function ... As LongPtr**。因此函数变为：

```
Private Declare PtrSafe Function AccessibleChildren Lib "oleacc.dll" _
                    (ByVal paccContainer As Object, ByVal iChildStart As Long, ByVal cChildren As Long, _
                           rgvarChildren As Variant, pcObtained As Long) _
                As LongPtr 
```

另请参阅[此网站](http://www.jkp-ads.com/articles/apideclarations.asp)以获取更多说明。

*请注意，我使用此代码在 Excel 2016 中获取**SolverStudio**工作。我被[http://solverstudio.org/using-studio/提到了这个页面](http://solverstudio.org/using-studio/)*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-27T17:18:47.547

在您的自定义功能区选项卡被绘制到功能区后，您可以向模型发送密钥，如下所示：

`Application.SendKeys "%keytosend%"`

要找出需要发送的密钥，请打开工作簿并按`Alt`。您会注意到键图标显示在选项卡上。

![在此处输入图像描述](../Images/fed613784e90882741cb66d643a8337e.png)

例如，要加载`Page Layout`选项卡，您可以像这样发送密钥：

`Application.SendKeys "%P%"`

**注意：**您可能必须告诉自定义功能区代码要调用什么宏`onLoad`。这可以在 XML 中使用`Custom UI Editor`. 加载包含自定义功能区代码的工作簿，然后将`onLoad`属性添加到`<customUI></customUI>`标记，如下所示：

![在此处输入图像描述](../Images/548437a9d77b25af921a67ea97186383.png)

添加后，您必须创建一个与`onLoad`您定义的函数匹配的 VBA 函数（在本例中为ribbonLoad）。在该函数中，您可以发送适当的密钥：

```
Sub ribbonLoad(ctl As IRibbonUI)
    Application.SendKeys "%Y1%"
End Sub 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T23:44:18.003

我无法让 Sendkeys 解决方案足够可靠地工作。Active Accessibility 解决方案似乎有效，但需要的时间比我多一点。稍后我一定会回顾这种方法。

我确实发现如果自定义选项卡是选项卡列表中的第一个选项卡，则可以显示它。我使用了这些设置：

```
<customUI xmlns="http://schemas.microsoft.com/office/2006/01/customui">
<ribbon startFromScratch="false"> 
<tabs>
<tab id="customTab" insertBeforeMso="TabHome" label="CustomTabName"> 
```

感谢您的替代品。非常感激。

# svn - SVN项目文件夹结构

> ID：15113875
> 
> 赞同：1
> 
> 时间：2013-02-27T13:56:33.887
> 
> 标签：svn

我是svn的新手。我已经在 Linux CentOS 6.3 机器上安装了 SVN。我在 SVN 下创建了几个项目，位置是`/var/www/svn/<MyRepos>`..

现在我们必须在一个文件夹下创建几个 repos，所以它应该如下所示：

```
/var/www/svn/Common/ProjA/[trunk,branch,tags]
/var/www/svn/Common/ProjB/[trunk,branch,tags]
/var/www/svn/release/ProjA/[trunk,branch,tags]
/var/www/svn/release/ProjB/[trunk,branch,tags] 
```

我`/common`通过 Linux 创建了目录`mkdir`并创建了`/ProjA`thru `svnadmin create`，这是成功的，但是当尝试从浏览器访问时，它无法连接。这是正确的方法吗？请指教。

注意：文件将通过 cvs2svn 工具从 cvs 导入，因为我们正在从 CVS 迁移到 SVN。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T14:24:08.563

您不能使用标准 shell 命令`mkdir`、`cp`、`mkdir`、`mv`等来操作 Subversion 存储库中的目录结构。您必须使用 Subversion 客户端并将其指向存储库 URL。目录/文件结构通过主机文件系统不可见 - 它只能通过 Subversion 库查看和操作。

在继续之前，您必须[阅读精美的手册](http://svnbook.red-bean.com/en/1.7/index.html)*并*了解存储库如何工作以及如何与之交互的基础知识。你不能只是安装它，抛出一些 shell 命令，然后寄希望于最好的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T11:19:23.293

谢谢大家的建议。我找到了解决方案，我只需要在其中创建新的位置标签`subversion.conf`即可创建上述结构。

# javascript - Mootools 注入克隆元素

> ID：15113881
> 
> 赞同：2
> 
> 时间：2013-02-27T13:56:49.473
> 
> 标签：javascript, mootools, inject

我需要克隆一个元素，一旦调整页面大小，就会覆盖那里的当前元素。

我当前的代码不起作用，如下所示：

```
var clone = false;
window.addEvent("domready",function(){
    clone = $$('.view').clone();
    /* Wait for images to be 100% loaded otherwise they might not have width/height */
    var lazyloader = new LazyLoad({
        onComplete: function(){
            setupWall();
            window.addEvent('resize:throttle(1000)', function(){
                /* Delete old viewport and add back with cloned version */
                var view = $$('.view');
                if(view){
                    wall = null;
                    view.dispose();
                }
                var cloneElement = $$('#wrapper').inject(clone);
                console.log(cloneElement);
                //setupWall();
            });
        }
    });
}); 
```

运行时`$$('#wrapper').inject(clone);`出现以下错误：

> 无法调用 null 的方法“appendChild”

正如这里的评论中所建议的那样，html也是如此。

```
<div id="wrapper">  
    <section class="view" id="wall">
        <div class="panel" id="panel1"><img src="_assets/images/loading.gif" data-src="http://placekitten.com/701/310" /></div>
        <div class="panel" id="panel2"><img src="_assets/images/loading.gif" data-src="http://placekitten.com/702/320" /></div>
        <div class="panel" id="panel3"><img src="_assets/images/loading.gif" data-src="http://placekitten.com/703/330" /></div>
        <div class="panel" id="panel4"><img src="_assets/images/loading.gif" data-src="http://placekitten.com/704/340" /></div>
        <div class="panel" id="panel5"><img src="_assets/images/loading.gif" data-src="http://placekitten.com/705/350" /></div>
        <div class="panel" id="panel6"><img src="_assets/images/loading.gif" data-src="http://placekitten.com/706/360" /></div>
        <div class="panel" id="panel7"><img src="_assets/images/loading.gif" data-src="http://placekitten.com/707/370" /></div>
        <div class="panel" id="panel8"><img src="_assets/images/loading.gif" data-src="http://placekitten.com/708/380" /></div>
        <div class="panel" id="panel9"><img src="_assets/images/loading.gif" data-src="http://placekitten.com/709/390" /></div>
        <div class="panel" id="panel10"><img src="_assets/images/loading.gif" data-src="http://placekitten.com/710/400" /></div>
        <div class="panel" id="panel11"><img src="_assets/images/loading.gif" data-src="http://placekitten.com/711/410" /></div>
    </section>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T17:13:23.917

`$$()`返回一个集合。当你真的想要一个元素时，你不应该克隆一个集合。

如果您的意思是通过 id 获取单个元素，请使用`$("id");`- if 通过选择器`document.getElement('.class')`（或任何`node.getElement`）。$ 不像 jquery 中的，它更像`document.getElementById()`.

而且，`element.inject(target)`- 单个 el，而不是集合 - vs`target.adopt(element(s))`

```
window.addEvent("domready",function(){
    var clone = document.getElement('.view').clone();
    /* Wait for images to be 100% loaded otherwise they might not have width/height */
    var lazyloader = new LazyLoad({
        onComplete: function(){
            setupWall();
            window.addEvent('resize:throttle(1000)', function(){
                /* Delete old viewport and add back with cloned version */
                var view = $$('.view');
                if(view.length){
                    wall = null;
                    view.destroy();
                }
                var cloneElement = $('wrapper').adopt(clone);
                console.log(cloneElement);
                //setupWall();
            });
        }
    });
}); 
```

# java - No endpoint java exception

> ID：15113883
> 
> 赞同：0
> 
> 时间：2013-02-27T13:56:55.617
> 
> 标签：java, web-services, apache, exception, axis

I get the exception : No endpoint.

This is the code:

```
InsuredDetailsLocator locator_MDP =new InsuredDetailsLocator();        
locator_MDP.setInsuredDetailsSoapEndpointAddress("http://mgnt184:8056/MDP_InsuredDetails_WS/InsuredDetails.asmx");
InsuredDetailsSoapStub service = new InsuredDetailsSoapStub();
UpdateInsuredDetails_Input request_MDP =new UpdateInsuredDetails_Input();
request_MDP.setSystemName(urlProps.getProperty(MDP_USERNAME));
request_MDP.setSystemPassword(urlProps.getProperty(MDP_PASSWORD));
request_MDP.setID(11111);
request_MDP.setFAMILY_NAME("hhhh");
request_MDP.setFIRST_NAME("dddd");![enter image description here][1]
request_MDP.setKOD_DIVUR_SHIVUKI_ELC(insuree.getKodDivurShivukiElc());
//I get here the exception :No endpoint          
//calling the method:
UpdateInsuredDetails_Output response_MDP= service.recieveMDMDataInsuredDetails(request_MDP); 
```

When the compiler is going to the method: recieveMDMDataInsuredDetails , inside InsuredDetailsSoapStub class - I got the error from there, this is the code inside the method:

```
public il.co.migdal.ws.tempuri.UpdateInsuredDetails_Output recieveMDMDataInsuredDetails(il.co.migdal.ws.tempuri.UpdateInsuredDetails_Input l_input) throws java.rmi.RemoteException {
    if (super.cachedEndpoint == null) {
        throw new org.apache.axis.NoEndPointException();
    }
..... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T14:01:11.197

您正在对象上设置端点，`locator_MDP`但在对象上进行调用，该对象与（至少在发布的代码中）`service`没有关系`locator_MDP`

# r - 更改在 R Windows GUI 中运行脚本的 Cntrl + R 快捷方式

> ID：15113885
> 
> 赞同：4
> 
> 时间：2013-02-27T13:56:57.810
> 
> 标签：r, keyboard-shortcuts

是否可以更改“Control + R”快捷方式以将脚本从 Windows GUI 中的 R 文本编辑器发送到 R 控制台？我想将其更改为“Control + Enter”，更像是我 Mac 上的快捷方式。我在 Mac 上完成所有正常工作，但必须在 PC 上使用 R 才能与一些仅限 PC 的计算软件进行交互。

补充花絮：

*   如果不需要的话，我宁愿不在 PC 上运行 IDE，尽管这可能是解决方案。
*   我`Rstudio`在我的 Mac 上使用，但`Rstudio`与我正在运行的 PC 软件不兼容

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T21:39:39.443

简短的回答是：
**“不，没有 [内置] 方法可以更改 R 控制台中的菜单快捷方式”**

然而，我在这里收集 - 社区 wiki 风格 - 作为对这个问题的评论发布的一些建议。

一种方法可能是下载 R 源代码，破解它（参见[**src/gnuwin32/editor.c**](https://github.com/wch/r-source/blob/trunk/src/gnuwin32/editor.c)的大约 625 行：） ，然后重新构建 R 二进制文件（参见 R for Windows FAQ，了解您需要从源代码构建的工具）。这似乎是一种相当激进的方法，只是为了方便使用备用击键序列......

类似的方法可能是创建一个自动修补程序，该程序将修补 R 可执行文件，方法是定位上面提到的 editor.c 的编译逻辑周围的字节模式，并将其替换为所需击键的字节序列。此解决方案可能对二进制文件中的更改很敏感，但也完全避免了构建过程......

实现此目的的更简单方法可能是使用外部文本编辑器。大多数现代编辑器都有宏或配置可用于，例如，在 R 中为所选文本执行源命令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-06T10:14:47.297

Rstudio 0.99.644 中提供了自定义键盘快捷键。有关更多信息，请参阅[https://support.rstudio.com/hc/en-us/articles/206382178-Customizing-Keyboard-Shortcuts](https://support.rstudio.com/hc/en-us/articles/206382178-Customizing-Keyboard-Shortcuts)。

# android - Android：在 GLSurfaceView 中创建纹理会从标准硬件加速视图元素中删除纹理

> ID：15113893
> 
> 赞同：3
> 
> 时间：2013-02-27T13:57:15.587
> 
> 标签：android, opengl-es, opengl-es-2.0, textures, glsurfaceview

我有一个`GLSurfaceView`嵌入在常规 Android 布局中的游戏。在应用程序运行一段时间后，创建了大量纹理然后删除（所有显示的文本都动态渲染为纹理，如果不使用，则再次删除），来自其他布局元素的纹理会丢失它们的纹理。

例如，文本视图或按钮会丢失它们的文本纹理。![混乱的按钮文本](../Images/3ebc33554ece98545e39f725431524fb.png)

这似乎是所有 Android 版本 > 3 的问题，其中布局由 OpenGL ES 渲染器渲染。

没有任何游戏纹理会丢失。只有视图纹理。

`glGenTextures`和是同步的`glDeleteTextures`，所以这不应该是一个问题..

在混合常规 android 视图和 OpenGL 时，是否还有其他需要注意的事项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:05:56.097

好的，我发现我有什么问题。我通过调用`mTextureManager.deleteAllTextures()`我的片段来删除 UI 线程上的纹理`onPause();`

我通过删除我的纹理来解决它

```
mSurfaceView.queueEvent(new Runnable(){
    //delete all textures here
} 
```

希望这会帮助其他人......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-03T10:20:37.790

因为无论如何我都在做所有排队到表面视图的纹理处理，所以它不可能是由那个引起的（就像 CFlex 指出的那样）。

最后它是以下内容：我在渲染器的构造函数中调用了一些 gl 方法。但是，渲染器在创建上下文*之前*是构造函数，因为渲染器必须在初始化时传递给表面视图。所以 gl 调用似乎弄乱了布局上下文。

有趣的是，大多数设备似乎并不关心（除了描述的丢失纹理的行为）。但是，lg p990 在启动时因“未创建上下文”异常而崩溃，这给出了最后的线索。在没有在渲染器构造函数中进行 gl 初始化之后，但后来效果消失了。

请。投票支持 CFlex 的答案，因为它解决了问题的一个重要部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-23T18:27:17.633

我有同样的问题。下一行帮助我解决了这个问题。

```
<application android:hardwareAccelerated="false" ...> 
```

想知道我测试的所有设备都没有出现什么问题。

# git - 尝试使用 GIT 作为工作记录器得到“非快进更新被拒绝”错误

> ID：15113895
> 
> 赞同：1
> 
> 时间：2013-02-27T13:57:23.433
> 
> 标签：git, github

我知道这听起来可能很疯狂，但我认为它会奏效.. 我们必须每周向经理报告快速获胜，所以我想的是我们可以使用 git 进行日志记录，然后经理可以直接通过 7日志的天数。

所以我使用以下命令创建了一个 git repo

```
mkdir mynotes.git
cd mynotes.git
git init 
```

然后我在其中创建这个脚本：

```
#!/bin/sh
clear
echo "Quick Logging (Press Enter on a blank line to exit)"
while true
do
    echo
    read -p "log> " logtext
    if test -z "$logtext"
    then
        exit 0
    else
    git commit --allow-empty -m "$logtext"
    fi
done 
```

因此，团队中的每个人都可以执行 git pull 并推送到存储库。我遇到的问题是，如果有人在其他人登录时推送到存储库，然后尝试推送，我们会收到此错误。

```
 ! [rejected]        master -> master (non-fast-forward)
error: failed to push some refs to 'git@git.xxxx.git'
To prevent you from losing history, non-fast-forward updates were rejected
Merge the remote changes before pushing again.  See the 'Note about
fast-forwards' section of 'git push --help' for details. 
```

我们怎样才能让这个系统工作..如果我们能让它工作听起来很棒

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T14:16:48.503

尽管您收到错误的原因与[此问题](https://stackoverflow.com/questions/1713137/github-first-push-problem-how-to-merge-remote-changes)重复，但让我为您提供更多详细信息，因为您似乎将工作流程与报告混为一谈...

> 因此，团队中的每个人都可以执行 git pull 并推送到 repo

假设您正在执行上述步骤，那么您的拉动很可能由于冲突而失败。在推送更改之前，您必须解决冲突以完成合并。做一个`git status`查看冲突的文件，修改它们，`git add`将它们暂存，然后提交和推送。

我会推荐另一种方法。管理您的开发工作流程中的合并，并分别进行 7 天报告。该`git log`命令有一个很好的选择：

```
git log --since="7 days ago" 
```

检查该`git log`命令的手册，因为它有大量其他有用的格式化选项。

```
git log --since="7 days ago" --pretty=format:"%ad|%h|%cn|%s" 
```

您可以在专用的本地存储库上使用该 git log 命令，该存储库仅在您想要打印 7 天日志之前从远程提取，或将其重定向到文件或另一个脚本。

# c - 具有多个语句的三元运算符

> ID：15113897
> 
> 赞同：6
> 
> 时间：2013-02-27T13:57:26.683
> 
> 标签：c, if-statement, ternary-operator

我有一个程序流程如下：

```
if(a)
{
    if((a > b) || (a > c))
    {
        doSomething();
    }
    statementX;
    statementY;
} 
```

我需要将其转换为条件表达式，这就是我所做的：

```
(a) ? (((a > b) || (a > c)) ? doSomething() : something_else) : something_else; 
```

我在哪里插入语句statementX，statementY？由于在这两种可能的情况下都需要执行，我真的找不到办法。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-27T14:00:36.463

您可以像这样使用逗号`,`运算符：

```
a ? (
    (a > b || a > c ? do_something : do_something_else), 
    statementX, 
    statementY
  ) 
  : something_else; 
```

以下程序：

```
#include <stdio.h>

int main ()
{
    int a, b, c;

    a = 1, b = 0, c = 0;

    a ? (
      (a > b || a > c ? printf ("foo\n") : printf ("bar\n")),
      printf ("x\n"),
      printf ("y\n")
    )
    : printf ("foobar\n");
} 
```

为我打印：

```
foo
x
y 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T14:28:47.593

您可以使用嵌套的三元运算符语句

```
if(a)
{
if((a > b) || (a > c))
{
    printf("\nDo something\n");
}
printf("\nstatement X goes here\n");
printf("\nstatement X goes here\n");
} 
```

上面的代码，可以替换为

```
(a) ? (   ( a>b || a>c )? printf("\nDo something\n");  :  printf("\nstatement X goes here\n");printf("\nstatement Y goes here\n");  )   : exit (0); 
```

这里的明显优势是能够减少给定逻辑的代码行数，但同时也降低了代码的可读性。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-27T14:00:28.093

考虑到您正在执行语句而不是分配，我会坚持这个`if()`条件。对于可能遇到那段代码的任何其他人来说，它也可以说更具可读性。

将某些东西做成单行可能看起来不错，但就失去可读性而言，这是不值得的（没有性能提升）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-11-30T17:22:00.060

C 三元运算符优先级和关联的设计允许这样做：

```
return c1 ? v1 :
       c2 ? v2 :
       c3 ? v3 :
       c4 ? v4 :
       vdefault; 
```

由于 == != >= <= < >、&&、||、^^ 运算符的优先级高于三元运算符，因此由于三元运算符本身，不需要括号。

# c# - 从服务启动新用户会话

> ID：15113901
> 
> 赞同：6
> 
> 时间：2013-02-27T13:57:41.787
> 
> 标签：c#, session-0-isolation

我有以下问题：

从服务中，我需要在用户会话中启动应用程序。没有人类用户登录那台机器，因为它是一台服务器。启动的应用程序必须有一个会话！= 0。

**当前的“解决方案”**

我在机器启动时使用了计划任务，该任务启动（当然是在会话 0 中）在同一台机器上启动远程桌面登录的应用程序：这会创建一个用户会话 > 0，并且在用户启动时，这是最终的应用程序发射。它有效，但太棘手了。

有什么最聪明的方法吗？由于可能没有用户登录，因此我可以重用已经打开的用户会话至关重要。

**重大更新**

经过大量研究和部分成功，并且由于系统管理员在为特定目标创建用户方面的一些不灵活，我决定使用**OpenGL**而不是 WPF 来渲染会话 0 中损坏的 3d 部分。令人惊讶的是，它花费的时间少于预期. 我认为将这个问题作为参考可能对其他想要尝试从服务呈现**Viewport3D**的人有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T13:51:27.337

我不确定我是否正确理解您的需求，但也许只是使用给定凭据开始流程并重定向输入和输出是您所需要的。使用给定凭据启动过程：

```
 Process p = new Process();

  p.StartInfo = new ProcessStartInfo(fileName, args);
  p.StartInfo.UserName = userName;
  p.StartInfo.Password = pass;

  p.Start(); 
```

您可能还需要重定向应用程序的输入和输出。这个问题在这篇文章的 CodeProjecgt 上有很好的[描述](http://www.codeproject.com/Articles/18577/How-to-redirect-Standard-Input-Output-of-an-applic)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T16:50:59.223

我不确定这是否可行，但也许[这个答案](https://stackoverflow.com/questions/1438371/win32-api-function-to-programmatically-enable-disable-device)对你的情况有所帮助。

使用我提供的答案中的类和以下方法（使用适当的值）：

```
public static void EnableVideoDrivers(bool enable)
{
    // every type of device has a hard-coded GUID, put here the one for
    // video drivers
    Guid videoGuid = new Guid("{device GUID}");

    // get this from the properties dialog box of this device in Device Manager
    string instancePath = @"Device Instance Path";

    DeviceHelper.SetDeviceEnabled(videoGuid, instancePath, enable);
} 
```

这是[流行的设备类 GUID](http://pcsupport.about.com/od/driverssupport/a/device-class-guid.htm)的列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-27T02:35:04.847

这就是我从本地 Windows 服务为特定用户会话启动进程的方式。

它使用 C#，从`kernel32.dll`、`wtsaspi.dll`、`userev.dll`和`advapi32.dll`.

对于上下文，我的代码将搜索所有用户会话。在我的场景中，我的服务在 Windows 终端服务器上运行，并希望在每个用户的会话中保持特定应用程序“活动”。意思是，如果我们检查它并且它不再运行，我们重新启动它。

这是程序逻辑（缩写），这是您调用启动用户进程的方法的方式：

```
foreach(var sesh in ProcessExtensions.GetSessions().Where(r => r.State == "Active").ToList())
{
    var running = procs.Any(r => r.ProcessName == filename && r.SessionId == sesh.SessionId);
    if (!running)
    {
        try
        {
            ProcessExtensions.StartProcessForSession(sesh.SessionId, (string)item, "/restart", System.IO.Path.GetDirectoryName((string)item), true);
        }
        catch (Exception ex)
        {
            Trace.TraceWarning("Error: {0}", ex);
        }
    }
} 
```

这是`ProcessExtensions`所有好东西所在的实现。

**免责声明**- 我没有编写此代码，这是我在网上找到的一个示例，并根据我的需要进行了调整。如果您撰写了原始帖子。对缺少脚注表示歉意。

**ProcessExtensions.cs**

```
public static class ProcessExtensions
{
    #region Win32 Constants

    private const int CREATE_UNICODE_ENVIRONMENT = 0x00000400;
    private const int CREATE_NO_WINDOW = 0x08000000;

    private const int CREATE_NEW_CONSOLE = 0x00000010;

    private const uint INVALID_SESSION_ID = 0xFFFFFFFF;
    private static readonly IntPtr WTS_CURRENT_SERVER_HANDLE = IntPtr.Zero;

    #endregion

    #region DllImports

    [DllImport("advapi32.dll", EntryPoint = "CreateProcessAsUser", SetLastError = true, CharSet = CharSet.Ansi, CallingConvention = CallingConvention.StdCall)]
    private static extern bool CreateProcessAsUser(
        IntPtr hToken,
        String lpApplicationName,
        String lpCommandLine,
        IntPtr lpProcessAttributes,
        IntPtr lpThreadAttributes,
        bool bInheritHandle,
        uint dwCreationFlags,
        IntPtr lpEnvironment,
        String lpCurrentDirectory,
        ref STARTUPINFO lpStartupInfo,
        out PROCESS_INFORMATION lpProcessInformation);

    [DllImport("advapi32.dll", EntryPoint = "DuplicateTokenEx")]
    private static extern bool DuplicateTokenEx(
        IntPtr ExistingTokenHandle,
        uint dwDesiredAccess,
        IntPtr lpThreadAttributes,
        int TokenType,
        int ImpersonationLevel,
        ref IntPtr DuplicateTokenHandle);

    [DllImport("userenv.dll", SetLastError = true)]
    private static extern bool CreateEnvironmentBlock(ref IntPtr lpEnvironment, IntPtr hToken, bool bInherit);

    [DllImport("userenv.dll", SetLastError = true)]
    [return: MarshalAs(UnmanagedType.Bool)]
    private static extern bool DestroyEnvironmentBlock(IntPtr lpEnvironment);

    [DllImport("kernel32.dll", SetLastError = true)]
    private static extern bool CloseHandle(IntPtr hSnapshot);

    [DllImport("kernel32.dll")]
    private static extern uint WTSGetActiveConsoleSessionId();

    [DllImport("Wtsapi32.dll")]
    private static extern uint WTSQueryUserToken(uint SessionId, ref IntPtr phToken);

    [DllImport("wtsapi32.dll", SetLastError = true)]
    private static extern int WTSEnumerateSessions(
        IntPtr hServer,
        int Reserved,
        int Version,
        ref IntPtr ppSessionInfo,
        ref int pCount);

    #endregion

    #region Win32 Structs

    private enum SW
    {
        SW_HIDE = 0,
        SW_SHOWNORMAL = 1,
        SW_NORMAL = 1,
        SW_SHOWMINIMIZED = 2,
        SW_SHOWMAXIMIZED = 3,
        SW_MAXIMIZE = 3,
        SW_SHOWNOACTIVATE = 4,
        SW_SHOW = 5,
        SW_MINIMIZE = 6,
        SW_SHOWMINNOACTIVE = 7,
        SW_SHOWNA = 8,
        SW_RESTORE = 9,
        SW_SHOWDEFAULT = 10,
        SW_MAX = 10
    }

    private enum WTS_CONNECTSTATE_CLASS
    {
        WTSActive,
        WTSConnected,
        WTSConnectQuery,
        WTSShadow,
        WTSDisconnected,
        WTSIdle,
        WTSListen,
        WTSReset,
        WTSDown,
        WTSInit
    }

    [StructLayout(LayoutKind.Sequential)]
    private struct PROCESS_INFORMATION
    {
        public IntPtr hProcess;
        public IntPtr hThread;
        public uint dwProcessId;
        public uint dwThreadId;
    }

    private enum SECURITY_IMPERSONATION_LEVEL
    {
        SecurityAnonymous = 0,
        SecurityIdentification = 1,
        SecurityImpersonation = 2,
        SecurityDelegation = 3,
    }

    [StructLayout(LayoutKind.Sequential)]
    private struct STARTUPINFO
    {
        public int cb;
        public String lpReserved;
        public String lpDesktop;
        public String lpTitle;
        public uint dwX;
        public uint dwY;
        public uint dwXSize;
        public uint dwYSize;
        public uint dwXCountChars;
        public uint dwYCountChars;
        public uint dwFillAttribute;
        public uint dwFlags;
        public short wShowWindow;
        public short cbReserved2;
        public IntPtr lpReserved2;
        public IntPtr hStdInput;
        public IntPtr hStdOutput;
        public IntPtr hStdError;
    }

    private enum TOKEN_TYPE
    {
        TokenPrimary = 1,
        TokenImpersonation = 2
    }

    [StructLayout(LayoutKind.Sequential)]
    private struct WTS_SESSION_INFO
    {
        public readonly UInt32 SessionID;

        [MarshalAs(UnmanagedType.LPStr)]
        public readonly String pWinStationName;

        public readonly WTS_CONNECTSTATE_CLASS State;
    }

    #endregion

    public static IEnumerable<UserSessionData> GetSessions()
    {
        //var bResult = false;
        var hImpersonationToken = IntPtr.Zero;
        //var activeSessionId = INVALID_SESSION_ID;
        var pSessionInfo = IntPtr.Zero;
        var sessionCount = 0;

        if (WTSEnumerateSessions(WTS_CURRENT_SERVER_HANDLE, 0, 1, ref pSessionInfo, ref sessionCount) != 0)
        {
            var arrayElementSize = Marshal.SizeOf(typeof(WTS_SESSION_INFO));
            var current = pSessionInfo;

            for (var i = 0; i < sessionCount; i++)
            {
                var si = (WTS_SESSION_INFO)Marshal.PtrToStructure((IntPtr)current, typeof(WTS_SESSION_INFO));
                current += arrayElementSize;

                var data = new UserSessionData
                {
                    SessionId = (int)si.SessionID,
                    State = si.State.ToString().Substring(3),
                    Name = si.pWinStationName
                };
                yield return data;
            }
        }

    }

    private static bool GetUserTokenForSession(int sessionId, ref IntPtr phUserToken)
    {
        var bResult = false;
        var hImpersonationToken = IntPtr.Zero;
        var pSessionInfo = IntPtr.Zero;

        if (WTSQueryUserToken((uint)sessionId, ref hImpersonationToken) != 0)
        {
            // Convert the impersonation token to a primary token
            bResult = DuplicateTokenEx(hImpersonationToken, 0, IntPtr.Zero,
                (int)SECURITY_IMPERSONATION_LEVEL.SecurityImpersonation, (int)TOKEN_TYPE.TokenPrimary,
                ref phUserToken);

            CloseHandle(hImpersonationToken);
        }

        return bResult;
    }

    private static bool GetCurrentUserSessionToken(ref IntPtr phUserToken)
    {
        var bResult = false;
        var hImpersonationToken = IntPtr.Zero;
        var activeSessionId = INVALID_SESSION_ID;
        var pSessionInfo = IntPtr.Zero;
        var sessionCount = 0;

        // Get a handle to the user access token for the current active session.
        if (WTSEnumerateSessions(WTS_CURRENT_SERVER_HANDLE, 0, 1, ref pSessionInfo, ref sessionCount) != 0)
        {
            var arrayElementSize = Marshal.SizeOf(typeof(WTS_SESSION_INFO));
            var current = pSessionInfo;

            for (var i = 0; i < sessionCount; i++)
            {
                var si = (WTS_SESSION_INFO)Marshal.PtrToStructure((IntPtr)current, typeof(WTS_SESSION_INFO));
                current += arrayElementSize;

                if (si.State == WTS_CONNECTSTATE_CLASS.WTSActive)
                {
                    activeSessionId = si.SessionID;
                }
            }
        }

        // If enumerating did not work, fall back to the old method
        if (activeSessionId == INVALID_SESSION_ID)
        {
            activeSessionId = WTSGetActiveConsoleSessionId();
        }

        if (WTSQueryUserToken(activeSessionId, ref hImpersonationToken) != 0)
        {
            // Convert the impersonation token to a primary token
            bResult = DuplicateTokenEx(hImpersonationToken, 0, IntPtr.Zero,
                (int)SECURITY_IMPERSONATION_LEVEL.SecurityImpersonation, (int)TOKEN_TYPE.TokenPrimary,
                ref phUserToken);

            CloseHandle(hImpersonationToken);
        }

        return bResult;
    }

    public static bool StartProcessForSession(int sessionId, string appPath, string cmdLine = null, string workDir = null, bool visible = true)
    {
        var hUserToken = IntPtr.Zero;
        var startInfo = new STARTUPINFO();
        var procInfo = new PROCESS_INFORMATION();
        var pEnv = IntPtr.Zero;
        int iResultOfCreateProcessAsUser;

        startInfo.cb = Marshal.SizeOf(typeof(STARTUPINFO));

        try
        {
            if (!GetUserTokenForSession(sessionId, ref hUserToken))
            {
                throw new Exception("StartProcessAsCurrentUser: GetSessionUserToken failed.");
            }

            uint dwCreationFlags = CREATE_UNICODE_ENVIRONMENT | (uint)(visible ? CREATE_NEW_CONSOLE : CREATE_NO_WINDOW);
            startInfo.wShowWindow = (short)(visible ? SW.SW_SHOW : SW.SW_HIDE);
            startInfo.lpDesktop = "winsta0\\default";

            if (!CreateEnvironmentBlock(ref pEnv, hUserToken, false))
            {
                throw new Exception("StartProcessInSession: CreateEnvironmentBlock failed.");
            }

            if (!CreateProcessAsUser(hUserToken,
                appPath, // Application Name
                cmdLine, // Command Line
                IntPtr.Zero,
                IntPtr.Zero,
                false,
                dwCreationFlags,
                pEnv,
                workDir, // Working directory
                ref startInfo,
                out procInfo))
            {
                iResultOfCreateProcessAsUser = Marshal.GetLastWin32Error();
                throw new Exception("StartProcessAsCurrentUser: CreateProcessAsUser failed.  Error Code -" + iResultOfCreateProcessAsUser);
            }

            iResultOfCreateProcessAsUser = Marshal.GetLastWin32Error();
        }
        finally
        {
            CloseHandle(hUserToken);
            if (pEnv != IntPtr.Zero)
            {
                DestroyEnvironmentBlock(pEnv);
            }
            CloseHandle(procInfo.hThread);
            CloseHandle(procInfo.hProcess);
        }

        return true;
    }

    public static bool StartProcessAsCurrentUser(string appPath, string cmdLine = null, string workDir = null, bool visible = true)
    {
        var hUserToken = IntPtr.Zero;
        var startInfo = new STARTUPINFO();
        var procInfo = new PROCESS_INFORMATION();
        var pEnv = IntPtr.Zero;
        int iResultOfCreateProcessAsUser;

        startInfo.cb = Marshal.SizeOf(typeof(STARTUPINFO));

        try
        {
            if (!GetCurrentUserSessionToken(ref hUserToken))
            {
                throw new Exception("StartProcessAsCurrentUser: GetSessionUserToken failed.");
            }

            uint dwCreationFlags = CREATE_UNICODE_ENVIRONMENT | (uint)(visible ? CREATE_NEW_CONSOLE : CREATE_NO_WINDOW);
            startInfo.wShowWindow = (short)(visible ? SW.SW_SHOW : SW.SW_HIDE);
            startInfo.lpDesktop = "winsta0\\default";

            if (!CreateEnvironmentBlock(ref pEnv, hUserToken, false))
            {
                throw new Exception("StartProcessAsCurrentUser: CreateEnvironmentBlock failed.");
            }

            if (!CreateProcessAsUser(hUserToken,
                appPath, // Application Name
                cmdLine, // Command Line
                IntPtr.Zero,
                IntPtr.Zero,
                false,
                dwCreationFlags,
                pEnv,
                workDir, // Working directory
                ref startInfo,
                out procInfo))
            {
                iResultOfCreateProcessAsUser = Marshal.GetLastWin32Error();
                throw new Exception("StartProcessAsCurrentUser: CreateProcessAsUser failed.  Error Code -" + iResultOfCreateProcessAsUser);
            }

            iResultOfCreateProcessAsUser = Marshal.GetLastWin32Error();
        }
        finally
        {
            CloseHandle(hUserToken);
            if (pEnv != IntPtr.Zero)
            {
                DestroyEnvironmentBlock(pEnv);
            }
            CloseHandle(procInfo.hThread);
            CloseHandle(procInfo.hProcess);
        }

        return true;
    }

} 
```

# python - 将交互式 python 中的默认 repr 从 builtins.repr 更改为 reprlib.repr

> ID：15113904
> 
> 赞同：1
> 
> 时间：2013-02-27T13:57:49.440
> 
> 标签：python, console, interactive, repr

在交互式 Python 提示符下，当我不将表达式的输出绑定`foo`到名称时，Python 会将 的输出写入`builtins.repr(foo)`终端。

在较新版本的 Python 中，存在[一种替代`repr`实现](http://docs.python.org/3.2/library/reprlib.html)，它不会在屏幕上显示具有长字符串表示的对象，如下所示：

```
In [297]: import random, string, reprlib

In [298]: long_str = ''.join(random.choice(string.ascii_letters) for _ in range(1000))

In [299]: print(repr(long_str))
'LcOKLSfEifohPxWIPZEbwLSTlXTLIeJNxBfTpfyjtpnetKHPoEqwgtcsSRGupdzTidaGoekQOrlRedOchiIFzVLlXxlRNJVCIlYaQhFUlzOpoHyfFLgYUaBhHtasSttYlUwlGcLwriLOWUxqdEfoVfFNbOANQgGPvByewTMCqFNRONFwumScFITLWUnlrxmzQkWNfhtEGWNNlKAdkfvmuxigyEtaZYmbQIxoQEUFfPAvGomrdDVMzprNNRfUqJMACWFEgpGNFBasgDRCYooSOvfXGtauuVHHKgbebLUVXtGZDJMTiSTMXxkPWjpiUqGCrxzEwkMmniIXuLDNjbNhqmaIePxDibJMbpDSiFutsQEHUhXfBbfymjMlyurWSlOFYGePRFFlWtNIrvwJaBuUCYQjGQFVnmUSrQHbbpDEkeOuBfTIsDZdQsyOsmJhmluwzhDDZPayCbOnkJgBkcshMISCVATIiPDwPShoBQuhkPSBMOiMJoRPILhoTYMroUUafuRbhgZgkyGGqKBTWJRDQqQZOiSAjRxgAyNHHhQLozVlCTTrNbjKDbKgvgbcmZOjdDaxqnYrajVxgBqJfMoAJegmqOVlVgZGnOZJOrmwAOaqYdqGavsskyLxsxFcUekORQjKxaFuvqemoqYujbnfabrZNiBLSXkxRThYFlRKyrpbUtmYbITSMADSEQMIGkoDGxsedwqzisDSJvTmzEiAAVZQGjnmLRpvKcPrmkYFyjJVpBHUhWaiqIFLrExLeSCZJurMteYdLWJgMCLbdlUqaChYqbBCoddXlwCMkHjQtbwOFOVroMaFuCCmeVUbjuvXeYOovXXewUXaWAmWvRlpoTRVqSLOUfZFYTHNPWUkoBADgYJdZboTxSZxlncxJlwtVpHqpjdRqfzgiAtKXrVVYQQBWcQhZzMFmNWRoDgdRSouqRUGqhPbKmLMszRrLmIDLmFJQuyPAJnENFmLbmXiendQKLfCKmpTICujAJsA'

In [300]: print(reprlib.repr(long_str))
'LcOKLSfEifoh...CKmpTICujAJsA'

In [301]: long_str
Out[301]: 'LcOKLSfEifohPxWIPZEbwLSTlXTLIeJNxBfTpfyjtpnetKHPoEqwgtcsSRGupdzTidaGoekQOrlRedOchiIFzVLlXxlRNJVCIlYaQhFUlzOpoHyfFLgYUaBhHtasSttYlUwlGcLwriLOWUxqdEfoVfFNbOANQgGPvByewTMCqFNRONFwumScFITLWUnlrxmzQkWNfhtEGWNNlKAdkfvmuxigyEtaZYmbQIxoQEUFfPAvGomrdDVMzprNNRfUqJMACWFEgpGNFBasgDRCYooSOvfXGtauuVHHKgbebLUVXtGZDJMTiSTMXxkPWjpiUqGCrxzEwkMmniIXuLDNjbNhqmaIePxDibJMbpDSiFutsQEHUhXfBbfymjMlyurWSlOFYGePRFFlWtNIrvwJaBuUCYQjGQFVnmUSrQHbbpDEkeOuBfTIsDZdQsyOsmJhmluwzhDDZPayCbOnkJgBkcshMISCVATIiPDwPShoBQuhkPSBMOiMJoRPILhoTYMroUUafuRbhgZgkyGGqKBTWJRDQqQZOiSAjRxgAyNHHhQLozVlCTTrNbjKDbKgvgbcmZOjdDaxqnYrajVxgBqJfMoAJegmqOVlVgZGnOZJOrmwAOaqYdqGavsskyLxsxFcUekORQjKxaFuvqemoqYujbnfabrZNiBLSXkxRThYFlRKyrpbUtmYbITSMADSEQMIGkoDGxsedwqzisDSJvTmzEiAAVZQGjnmLRpvKcPrmkYFyjJVpBHUhWaiqIFLrExLeSCZJurMteYdLWJgMCLbdlUqaChYqbBCoddXlwCMkHjQtbwOFOVroMaFuCCmeVUbjuvXeYOovXXewUXaWAmWvRlpoTRVqSLOUfZFYTHNPWUkoBADgYJdZboTxSZxlncxJlwtVpHqpjdRqfzgiAtKXrVVYQQBWcQhZzMFmNWRoDgdRSouqRUGqhPbKmLMszRrLmIDLmFJQuyPAJnENFmLbmXiendQKLfCKmpTICujAJsA' 
```

我可以以某种方式告诉 Python 在交互式提示中使用`reprlib.repr`而不是`builtin.repr`表示未分配的输出吗？我最好对适用于任何 Python shell 的答案感兴趣，或者对至少适用于 IPython 的答案感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T15:41:05.907

您正在寻找的可能是`sys.display_hook`： http: [//docs.python.org/2/library/sys.html#sys.displayhook](http://docs.python.org/2/library/sys.html#sys.displayhook)。

# javascript - jQuery 解析 HTML 而不加载图像

> ID：15113910
> 
> 赞同：18
> 
> 时间：2013-02-27T13:58:09.533
> 
> 标签：javascript, jquery, ajax, image

我从其他页面加载 HTML 以从该页面提取和显示数据：

```
$.get('http://example.org/205.html', function (html) {
    console.log( $(html).find('#c1034') );
}); 
```

这确实有效，但由于`$(html)`我的浏览器尝试加载在 205.html 中链接的图像。这些图像在我的域中不存在，所以我收到很多 404 错误。

有没有办法像解析页面一样`$(html)`但不将整个页面加载到我的浏览器中？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-27T14:01:37.570

使用正则表达式并删除所有`<img>`标签

```
 html = html.replace(/<img[^>]*>/g,""); 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2018-05-05T23:03:43.590

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-06-17T02:16:03.617

很抱歉恢复了一个老问题，但这是搜索如何尝试阻止已解析的 html 加载外部资产时的第一个结果。

我接受了 Nik Ahmad Zainalddin 的回答，但它有一个弱点，即`<script>`标签之间的任何元素都会被清除。

```
<script>
</script>
Inert text
<script>
</script> 
```

在上面的示例`Inert text`中，将连同脚本标签一起被删除。我最终改为执行以下操作：

```
html = html.replace(/<\s*(script|iframe)[^>]*>(?:[^<]*<)*?\/\1>/g, "").replace(/(<(\b(img|style|head|link)\b)(([^>]*\/>)|([^\7]*(<\/\2[^>]*>)))|(<\bimg\b)[^>]*>|(\b(background|style)\b=\s*"[^"]*"))/g, ""); 
```

此外，我添加了删除`iframe`s 的功能。

希望这可以帮助某人。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-11-20T11:09:07.580

使用以下方式解析 html 会自动加载图片。

```
var wrapper = document.createElement('div'),
    html = '.....';
wrapper.innerHTML = html; 
```

如果用于`DomParser`解析 html，则不会自动加载图像。有关详细信息，请参阅[https://github.com/panzi/jQuery-Parse-HTML/blob/master/jquery.parsehtml.js](https://github.com/panzi/jQuery-Parse-HTML/blob/master/jquery.parsehtml.js)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-27T14:02:13.230

您可以使用 jQuerys`remove()`方法来选择图像元素

```
console.log( $(html).find('img').remove().end().find('#c1034') ); 
```

或从 HTML 字符串中删除 then 。就像是

```
console.log( $(html.replace(/<img[^>]*>/g,"")) ); 
```

关于背景图像，您可以执行以下操作：

```
$(html).filter(function() {
    return $(this).css('background-image') !== ''; 
}).remove(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-01-02T08:24:38.357

以下正则表达式替换 ajax 加载返回的数据字符串中所有出现的`<head>, <link>, <script>, <style>`, 包括`background`和`style`属性。

```
html = html.replace(/(<(\b(img|style|script|head|link)\b)(([^>]*\/>)|([^\7]*(<\/\2[^>]*>)))|(<\bimg\b)[^>]*>|(\b(background|style)\b=\s*"[^"]*"))/g,""); 
```

测试正则表达式：[https ://regex101.com/r/nB1oP5/1](https://regex101.com/r/nB1oP5/1)

我希望有一种更好的解决方法（除了使用正则表达式替换）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-04-28T00:42:28.863

您可以使用以下正则表达式来删除所有 src 属性，而不是完全删除所有 img 元素：

```
html = html.replace(/src="[^"]*"/ig, ""); 
```

# java - Jersey JAX-RS 客户端 XML 到 java.util.List 反序列化

> ID：15113913
> 
> 赞同：1
> 
> 时间：2013-02-27T13:58:21.960
> 
> 标签：java, web-services, rest, jersey, jax-rs

我正在尝试访问一个 JAX-RS 服务（球衣实现），它返回一个 XML 格式的员工 java.util.list。

Service 方法签名如下所示：

```
@GET
@Path("/getEmployeeListXML")
@Consumes(MediaType.TEXT_PLAIN)
@Produces(MediaType.APPLICATION_XML)
public List<EmployeeXML> getEmployeeListXML(@QueryParam("id") String id){
    //Some code which returns a List<EmployeeXML>
} 
```

返回的 XML 格式如下：

```
<employeeXMLs>
    <employeeXML>
            <empId>1</empId>
            <empName>John</empName>
            <empAge>35</empAge>
            <empSex>Male</empSex>
    </employeeXML>
    <employeeXML>
            <empId>2</empId>
            <empName>Lisa</empName>
            <empAge>23</empAge>
            <empSex>Female</empSex>
    </employeeXML>
</employeeXMLs> 
```

为了从我的球衣客户端访问它，我使用以下代码：

```
List<EmployeeXML> empListXML = (List<EmployeeXML>)service.path("rest").path("GetService").path("getEmployeeListXML").accept(MediaType.APPLICATION_XML).get(EmployeeXML.class); 
```

这是不正确的，因为返回类型应该是一个列表，但在 get 方法中，目前我正在尝试检索单个对象。我不知道如何在这里从客户端检索列表:(

我得到了这个例外：

```
 unexpected element (uri:"", local:"employeeXMLs"). Expected elements are <{}employeeListXML>,<{}employeeXML> 
```

请帮助我完成这项工作。

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T14:11:18.813

您可以使用`GenericType`该类来获取对象列表：

```
List<EmployeeXML> empListXML = (List<EmployeeXML>)service.path("rest").path("GetService").path("getEmployeeListXML").accept(MediaType.APPLICATION_XML).get(new GenericType<List<EmployeeXML>>(){}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T14:05:59.173

您需要使用“超类型令牌”来定义客户端类中的返回类型：

```
List<EmployeeXML> empListXML = service
    .path("rest")
    .path("GetService")
    .path("getEmployeeListXML")
    .accept(MediaType.APPLICATION_XML)
    .get(new GenericType<List<EmployeeXML>>() {}); 
```

为了“保留”Jersey 在反序列化服务器响应时将使用的通用参数信息，需要超类型标记。

# php - 使用文本输入进行电子邮件编码

> ID：15113915
> 
> 赞同：0
> 
> 时间：2013-02-27T13:58:26.753
> 
> 标签：php, html, email, encoding, character-encoding

我想在文本框中编码一个电子邮件 ID。电子邮件 ID 保存在数据库中。当页面加载时，我使用 php 从数据库中检索电子邮件 ID 并显示在文本输入中，当我在页面源中看到电子邮件 ID 时，应该对电子邮件 ID 进行编码。如何使用 php 和 html 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T14:00:14.653

尝试这个：

```
function encode_email($e) {
  $output = '';
  for ($i = 0; $i < strlen($e); $i++) { $output .= '&#'.ord($e[$i]).';'; }
  return $output;
}

 echo(encode_email('email@in.com')); 
```

# javascript - 如何在不硬编码最大范围的情况下在 flot.js 中设置最小步长？

> ID：15113916
> 
> 赞同：0
> 
> 时间：2013-02-27T13:58:27.670
> 
> 标签：javascript, scale, flot

我正在研究每天的推文图表，现在这个数字很小。足够小，以至于 Flot 使用 0.1 的步长，这没有任何意义；没有推文的 1/10 这样的东西。

我尝试了一些设置来将步长提高到 1，但唯一对我有用的是硬编码最大范围为 100。这很糟糕，因为当推文较低时它会显示一个近乎空的图表，并且会溢出推文高时的图表。什么是更永久的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T14:14:29.220

使用“minTickSize”轴选项；有关更多信息，请参阅文档的[自定义轴](https://github.com/flot/flot/blob/master/API.md#customizing-the-axes)部分。

# java - 一种在Java中给定Color对象获取相应十六进制颜色代码的方法？

> ID：15113918
> 
> 赞同：10
> 
> 时间：2013-02-27T13:58:36.853
> 
> 标签：java, class, colors, hex, decode

我检查了 Color 的 Java 类文档，发现我可以`(e.g. "#FFFFFF")`使用该`Color.decode();`方法从十六进制代码字符串生成 Color 对象。

我想为我正在处理的项目实现相反的过程，但似乎没有为此类内置的方法。

是否有捷径可寻？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-27T14:03:18.653

```
String.format("#%06x", color.getRGB() & 0x00FFFFFF) 
```

掩码用于移除 alpha 分量，在位 24-31

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T14:21:33.513

```
Color color = Color.BLUE;
Formatter f = new Formatter(new StringBuffer("#"));
f.format("%02X", color.getRed());
f.format("%02X", color.getGreen());
f.format("%02X", color.getBlue());
f.toString(); //#0000FF 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T14:01:56.163

阅读本文：[使用 JColorChooser 获取 Html 颜色代码](https://stackoverflow.com/questions/4059133/getting-html-color-codes-with-a-jcolorchooser)

答案有一种将颜色转换为十六进制值的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-21T16:43:25.800

还有另一种方法。以为我只是添加了这个替代方案。

```
// ARGB = (255, 255, 0, 0) (Red) 
// hex -> "ffff0000"
String hex = Integer.toHexString(color.getRGB());

// Reduced to RGB: hex -> "#ff0000"
hex = "#" + hex.substring(2, hex.length()); 
```

# sql - 将 Text 或 Varchar 转换为 Decimal 类型

> ID：15113924
> 
> 赞同：1
> 
> 时间：2013-02-27T13:58:51.150
> 
> 标签：sql, tsql, decimal, varchar

在列`[Return rate]`中，我的值如下：

```
20.0%
17.1% 
etc 
```

在我的查询中，我想在计算中使用这些值。

因此，首先，我将 替换为`'%'`空字符串`''`：

```
REPLACE([Return Rate], '%' ,'') AS [Test] 
```

这行得通，当 [Return rate] 为“20.0%”时，我得到类似“20.0”的值。

然后我尝试在计算中使用这个 [Test] 值，例如：

```
(REPLACE([Return Rate], '%' ,'') * 10) AS [Test] 
```

但是我在逻辑上得到了一个错误，所以我尝试转换这个文本值来执行我的计算：

```
CAST ( REPLACE([Current Xelus FE Return Rate], '%' ,'') AS decimal(2,1))  [Decimal Test] 
```

在这里我得到了错误：

> ```
> Arithmetic overflow error converting varchar to data type numeric.
> Warning: Null value is eliminated by an aggregate or other SET operation. 
> ```

有人回答这个错误吗？非常感谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T14:07:19.993

如果您的任何行包含空值，您将收到此错误。尝试一个 IsNull，如下所示：

```
CAST( 
 IsNull( 
  REPLACE([Current Xelus FE Return Rate], '%' ,'') 
 , '0.0')
AS decimal(5,1))  [Decimal Test] 
```

如果您的数据包含非数字值（如您所提到的，诸如“N/A”之类的值），您可以使用 IsNumeric() 函数消除它们：

```
CAST( 
  CASE WHEN IsNumeric(
    IsNull( 
      REPLACE([Current Xelus FE Return Rate], '%' ,'') 
    , '0.0')
  ) = 1 THEN IsNull(REPLACE([Current Xelus FE Return Rate], '%' ,''),'0.0')
  ELSE '0.0' 
  END
AS decimal(5,1))  [Decimal Test] 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-27T14:10:47.690

尝试将其转换为 FLOAT - decimal(2,1) 是不够的：

```
CAST ( REPLACE([Current Xelus FE Return Rate], '%' ,'') AS FLOAT) 
```

然后你应该能够做进一步的计算

```
CAST ( REPLACE([Current Xelus FE Return Rate], '%' ,'') AS FLOAT) * 10 
```

# asp.net - 所有更新面板同时回发

> ID：15113927
> 
> 赞同：0
> 
> 时间：2013-02-27T13:58:56.617
> 
> 标签：asp.net, updatepanel

我有一个 C# .net 4.0 网站项目，上面有一个相当复杂的过滤搜索页面。在中继器中添加了多个更新面板。当一个 UpdatePanel 进行回发时 - 所有其他 UpdatePanel 也会同时回发。

这成为一个问题，因为根据用户选择查看的项目数量可能会有很多很多的 UpdatePanel。我知道 UpdatePanels 并不理想 - 我没有写这个，但必须尝试快速修复它！

LandingPage 包含一个 UpdatePanel，里面有一个 Repeater 控件。在转发器中有一个名为 Article 的用户控件。Article 控件包含一些 HTML 和称为 Save 的第二个用户控件。Save 控件也有一个 UpdatePanel。

我遇到的问题是只有第一个 btnSave 事件被引发。因此，如果我单击“btnSave”，它会起作用，但所有后续按钮单击事件都不会触发。

我还注意到 Save 控件中的所有 UpdatePanel 实例同时回发 - 这是正常的吗？

所以页面的简化视图是这样的：

**登陆页面.aspx**

```
<asp:UpdatePanel ID="pnl" runat="server" UpdateMode="Conditional" ChildrenAsTriggers="false">
  <ContentTemplate>
    <asp:Repeater ID="resultsRep" runat="server">
      <ItemTemplate>
        <uc:Article id="Article1" runat="server" />
      </ItemTemplate>
    </asp:Repeater>
    <asp:Button id="btnLoadMore" runat="server" Text="Load More" />
  </ContentTemplate>
  <Triggers>
    <asp:AsyncPostBackTrigger ControlID="btnLoadMore" EventName="Click" />
  </Triggers>
<asp:UpdatePanel> 
```

**自定义用户控件“文章”**

```
<asp:PlaceHolder ID="ArticlePanel" runat="server">
  <!-- Assorted HTML stuff here -->
  <uc:Save id="Save1" runat="server" />
</asp:PlaceHolder> 
```

**自定义用户控件“保存”**

```
<asp:UpdatePanel ID="ctl" runat="server" UpdateMode="Conditional" ChildrenAsTriggers="True">
  <ContentTemplate>
    <asp:LinkButton ID="btnSave" runat="server" OnClick="btnSave_Click" CausesValidation="False" Text="Save" />
  </ContentTemplate>
</asp:UpdatePanel> 
```

一如既往地提前感谢。

**编辑**

经过进一步调查，使用 Firebug 控制台我发现没有发生后续的回发，因为抛出了以下错误：

```
505|error|500|Invalid postback or callback argument.  
Event validation is enabled using <pages enableEventValidation="true"/> in configuration or <%@ Page EnableEventValidation="true" %> in a page.  
For security purposes, this feature verifies that arguments to postback or callback events originate from the server control that originally rendered them.  
If the data is valid and expected, use the ClientScriptManager.RegisterForEventValidation method in order to register the postback or callback data for validation.| 
```

所以似乎我以某种方式发回了一些狡猾的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T16:31:23.777

问题归结于使用嵌套的 UpdatePanel。我不知道错误本身实际上来自哪里，但经过反复试验，我发现父 UpdatePanel 配置不正确。

父 UpdatePanel 应该是这样的：

```
<asp:UpdatePanel ID="pnl" runat="server" UpdateMode="Always" ChildrenAsTriggers="true"> 
```

区别在于 UpdateMode="Always" 和 ChildrenAsTriggers="true"。UpdateMode 告诉父 UpdatePanel 在任何子重新加载时刷新。ChildrenAsTriggers 属性允许子 UpdatePanel 导致刷新父。

所以现在它可以工作了——主要是。我仍然有每一个 UpdatePanel 每次都发回的问题。它确实效率低下，但我似乎无法阻止它。

# sorting - Backbone.js 模型的顶级集合不会排序

> ID：15113929
> 
> 赞同：0
> 
> 时间：2013-02-27T13:59:05.670
> 
> 标签：sorting, backbone.js, backbone-relational

我正在开发我的第一个 Backbone.js 应用程序，并且遇到了一些奇怪的行为，我担心这可能表明我的设计存在问题。我的数据如下所示：

```
Syllabus
    Dance
        Figure
        Figure
        Figure
    Dance
        Figure
        Figure
    etc. 
```

我创建了这个模型来表示它：

```
$.syllabus.Syllabus = Backbone.RelationalModel.extend({
    urlRoot: '/api/syllabus',
    idAttribute: 'id',
    relations: [{
        type: Backbone.HasMany,
        key: 'danceAssignments',
        relatedModel: '$.syllabus.DanceAssignment',
        collectionType: '$.syllabus.DanceAssignmentCollection',
        reverseRelation: {
            key: 'syllabus',
            includeInJSON: 'id'
        }
    }]
});

$.syllabus.DanceAssignment = Backbone.RelationalModel.extend({
    urlRoot: '/api/danceassignments',
    idAttribute: 'id',
    relations: [{
        type: Backbone.HasMany,
        key: 'figureAssignments',
        relatedModel: '$.syllabus.FigureAssignment',
        collectionType: '$.syllabus.FigureAssignmentCollection',
        reverseRelation: {
            key: 'danceAssignment',
            includeInJSON: 'id'
        }
    }],
});

$.syllabus.DanceAssignmentCollection = Backbone.Collection.extend({
    model: $.syllabus.DanceAssignment,
    urlRoot: '/api/danceassignments',

    comparator: function(danceAssignment) {
        return danceAssignment.get('index');
    },
});

$.syllabus.FigureAssignment = Backbone.RelationalModel.extend({
    urlRoot: '/api/figureassignments',
    idAttribute: 'id'
});

$.syllabus.FigureAssignmentCollection = Backbone.Collection.extend({
    model: $.syllabus.FigureAssignment,
    url: '/api/figureassignments',

    comparator: function(figureAssignment) {
        return figureAssignment.get('index');
    },
}); 
```

当我更改其成员之一的 index 属性时，FigureAssignmentCollection 会自动排序，但 DanceAssignmentCollection 不会，当我明确告诉它时它也不会排序。比较器被调用，但是如果我在排序之后打印出集合的内容，它们的顺序是错误的，并且界面会使它们乱序。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T18:56:24.833

我找到了解决方案。我的观点是将 danceAssignments 集合渲染为 SyllabusView 的一部分。一旦我添加了一个以集合作为数据的 DanceListView 并让它渲染 DanceViews 而不是 SyllabusView 执行它，舞蹈开始正确排序，并且其他一些非常奇怪的行为也得到了解决。

# java - .java的Java含义~

> ID：15113936
> 
> 赞同：2
> 
> 时间：2013-02-27T13:59:30.280
> 
> 标签：java, tilde

通过键入`jar -tf myJar.jar MyProject`我进入文件列表，除了普通`.java`和`.class`文件之外，还有一个`.java~`文件。我已经阅读了谷歌搜索它是由于其他一些不完整的`file.java`. 如果是这样，我该如何继续删除这些文件？因为在真实文件夹中除了file.java 和file.class 没有其他文件。

提前致谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-27T14:00:37.693

它们几乎肯定只是由您使用的任何文本编辑器自动创建的备份文件。你应该可以删除它们。

我确定它们*在*真正的文件夹中 - 您的 shell/explorer 可能正在向您隐藏它们。只需尝试使用命令行按名称删除它们，即使它们没有出现在自动完成中。

（当我们不知道您正在使用哪个编辑器、哪个操作系统或您如何查看目录时，很难更具体...）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T14:03:13.637

这些是 vim 备份文件。有关一些配置选项，请参阅[此处](http://vim.wikia.com/wiki/Remove_swap_and_backup_files_from_your_working_directory)和[此处](http://scratching.psybermonkey.net/2011/02/vim-how-to-stop-vim-creating-tilde.html)，以避免弄乱您的工作目录。

# ruby-on-rails - 使用carrierwave更新时保持旧文件名

> ID：15113948
> 
> 赞同：1
> 
> 时间：2013-02-27T14:00:18.477
> 
> 标签：ruby-on-rails, ruby, carrierwave

使用carrierwave，我想在不更改位置（文件名）的情况下更改图像。这样，旧图像的所有链接仍然有效，但指向新图片。

例如，我上传了一张图片“promotion1.png”。我在编辑器中链接到此图像。之后，我有一个新的促销（promotion2.png），并且想更新图像而不必再次去编辑器。所以旧文件名指向新文件。

如何才能做到这一点？我不想被迫使用相同的文件名。我 = 一个不知情的客户 :)

# c# - 为什么 Automapper 和 NHibernate 会导致 N+1？

> ID：15113950
> 
> 赞同：1
> 
> 时间：2013-02-27T14:00:19.873
> 
> 标签：c#, nhibernate, automapper

我用 NHibernate 创建了这个查询：

```
public IList<Category> GetCategoriesByUsername(string username)
{
    Category cAlias = null;
    User uAlias = null;
    Keyword kAlias = null;

    var categories = SessionFactory.GetCurrentSession().QueryOver<Category>(() => cAlias)
    .JoinAlias(() => cAlias.User, () => uAlias)
    .Where(() => uAlias.Username == username)
    .Future<Category>();

    var keywords = SessionFactory.GetCurrentSession().QueryOver<Keyword>(() => kAlias)
    .JoinAlias(c => c.Category, () => cAlias)
    .Where(() => cAlias.Id == kAlias.Category.Id)
    .Future<Keyword>();

    IList<Category> list = (List<Category>)categories.ToList();

    return list;
} 
```

这很好用，并给了我一个类别列表，其中每个类别都有自己的关键字。在我的服务层中，我尝试将其转换为带有 Automapper 的 ViewModel，它可以正常工作但不如预期。对于类别列表中的每个关键字，它都会创建一个新查询 (N+1)。它不使用列表中每个类别中已填充的关键字。

这些是我的模型和视图模型：

```
public class Category
{
    public virtual Id { get; set; }
    public virtual string Name { get; set; }
    public virtual ICollection<Keyword> Keywords { get; set; }
    public virtual User User { get; set; }
}

public class CategoryView
{
    public int Id { get; set; }
    public string Name { get; set; }
    public IList<KeywordSummaryView> Keywords { get; set; }
}

public class Keyword
{
    public virtual int Id { get; set; }
    public virtual string Name { get; set; }
    public virtual string Description { get; set; }
    public virtual Category Category { get; set; }
}

public class KeywordSummaryView
{
    public int Id { get; set; }
    public string Name { get; set; }
} 
```

我的映射：

```
public class AutoMapperBootStrapper
{
    public static void ConfigureAutoMapper()
    {
        Mapper.CreateMap<Category, CategoryView>();
        Mapper.CreateMap<Keyword, KeywordSummaryView>();
    }
}

public static class CategoryMap
{
    public static IList<CategoryView> ConvertToCategoryView(this IList<Category> category)
    {
        return Mapper.Map<IList<Category>, IList<CategoryView>>(category);
    }
} 
```

从模型到视图模型：

```
IList<Category> categories = _categoryRepository.GetCategoriesByUsername(request.Username);

response.Categories = categories.ConvertToCategoryView(); 
```

**它不使用列表中每个类别中已填充的关键字，而是为每个关键字 (N+1) 创建一个新查询。有什么我做错了吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T14:31:10.737

我想这两个都应该防止 N+1 选择

```
public IList<Category> GetCategoriesByUsername(string username)
{
    User uAlias = null;

    var categories = SessionFactory.GetCurrentSession().QueryOver<Category>(() => cAlias)
    .Fetch(x => x.Keywords ).Eager
    .JoinAlias(() => cAlias.User, () => uAlias)
    .Where(() => uAlias.Username == username);
    .TransformUsing(Transformers.DistinctRootEntity)
    .List<Category>();

    return categories ;
}

public IList<Category> GetCategoriesByUsername(string username)
{
    User uAlias = null;
    Keyword kAlias = null;

    var categories = SessionFactory.GetCurrentSession().QueryOver<Category>(() => cAlias)
    .JoinAlias(() => cAlias.User, () => uAlias)
    .JoinAlias(x => x.Keywords , () => kAlias, JoinType.LeftOuterJoin)
    .Where(() => uAlias.Username == username);
    .TransformUsing(Transformers.DistinctRootEntity)
    .List<Category>();

    return categories;
} 
```

希望这会有所帮助

# oracle - 导入oracle 10g数据库时ctxhx.exe停止工作

> ID：15113952
> 
> 赞同：0
> 
> 时间：2013-02-27T14:00:26.690
> 
> 标签：oracle

在导出 oracle 数据库转储文件后，使用 exp 命令并且没有警告，我正在尝试使用 imp 命令导入它。导入过程一直有效，直到最后一个表结束，之后出现以下 Windows 错误：

“ctxhx.exe 已停止工作”

导入过程会在 dos 窗口中无限期地持续几个小时，而在我关闭弹出窗口后，Windows 会定期显示上述错误。似乎在解决此 exe 问题之前无法完成导入。

我已经从我的系统中完全卸载了 oracle 10g r2 数据库，使用 Oracle Universal Installer 并在清理注册表以及主文件夹等之后。然后重新安装了相同的 oracle 10g r2。

我以前多次使用 exp 和 imp 命令导出和导入同一个数据库，从来没有出现过问题。

我正在使用 OracleText 索引硬盘上的 pdf 文件，因此创建了首选项、索引和目录。

问题仅在开发机器中。具有完全相同配置（windows 版本、oracle 版本和版本等）的生产服务器工作正常。

每次我在开发机器上导入数据库时​​，我都会运行以下脚本：

```
connect
sys as sysdba
<password>

drop user dms cascade;
create user dms identified by pqrs;

grant connect to dms;
grant create session to dms;

grant create any sequence to dms;
grant drop any sequence to dms;

grant create any directory to dms;
grant drop any directory to dms;

grant dba to dms;
grant sysdba to dms;

grant execute on ctxsys.ctx_ddl to dms;

create or replace directory documents as 'c:\uploadedFiles';

quit;

c:\>imp 
```

转储文件创建只有一个用户 dms 的数据库（模式 + 数据 + 过程等）。

在运行 imp 命令之前，我确保将 pdf 文件复制到 c 驱动器上的上述文件夹中。

该文件夹设置为只读，我无法更改它，因为每次我从 windows 或 dos 更改它时，它都会自动设置为只读。这应该不是问题，因为在生产中它具有相同的只读设置并且运行良好。

windows server 2008\. oracle 10g r2 企业版。64 位机器和甲骨文。

# .net - 为什么回收不起作用？

> ID：15113954
> 
> 赞同：6
> 
> 时间：2013-02-27T14:00:33.150
> 
> 标签：.net, wpf, scroll, recycle

我们有一个桌面应用程序，其中有一个 ListView，它`ListView.ItemTemplate`是一个扩展的 KPageScrollViewer`ScrollViewer`

虽然我们设置`VirtualizingStackPanel.IsVirtualizing="True"`和 `VirtualizingStackPanel.VirtualizationMode="Recycling"`

我们注意到 KPageScrollViewer 的构造函数（在 中`ItemTemplate`）总是在查看 ListView 中的项目时执行。

我们的预期是它会被创建 4 到 5 次，然后，相同的实例将用于查看数据，因为我们使用的是 Recycling 模式，但这不会发生，因此我们最终会得到越来越多的 KPageScrollViewer 实例创建..

是因为我们定制了`ListView.ItemsPanel`吗？

```
<ListView.ItemsPanel>
    <ItemsPanelTemplate >
        <p:KVirtualizingStackPanel IsItemsHost="True" 
```

请问有什么想法吗？我想知道哪些原因可能导致失去回收功能？

```
<ListView  x:Class="KETAB.KStudio.Stage.PagesView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:p="clr-namespace:KETAB.KStudio.Stage"
    Name="PagesList" ScrollViewer.HorizontalScrollBarVisibility="Hidden" ScrollViewer.VerticalScrollBarVisibility="Hidden" 
    Loaded="instScroll_Loaded"
    AllowDrop="True" 
    MouseMove="PagesList_MouseMove"
    ScrollViewer.PanningMode="None"
    VirtualizingStackPanel.IsVirtualizing="True"
    VirtualizingStackPanel.CleanUpVirtualizedItem="PagesList_CleanUpVirtualizedItem"
    VirtualizingStackPanel.VirtualizationMode="Recycling"
    >

    <ListView.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary  Source="Resources/StageResources.xaml"/>
                <ResourceDictionary Source="/KETAB.KStudio.UserControls;component/ScrollViewerStyle.xaml" />
            </ResourceDictionary.MergedDictionaries>
            <SolidColorBrush  x:Key="{x:Static SystemColors.HighlightBrushKey}" Opacity="0.4" Color="Transparent" />
            <SolidColorBrush  x:Key="{x:Static SystemColors.ControlBrushKey}"  Opacity="0.4" Color="Transparent"  />
            <!--<p:PageWidthConverter x:Key="PageWidthConverter" />-->
            <p:PageWidthConverter x:Key="pageWidthConverter" />
            <p:PageHeightConverter x:Key="pageHeightConverter" />
            <Style  TargetType="{x:Type ListViewItem}">
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type ListViewItem}">
                            <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
                <Setter Property="FocusVisualStyle"
            Value="{x:Null}"/>
            </Style>
        </ResourceDictionary>
    </ListView.Resources>

    <ListView.ItemTemplate>
        <DataTemplate x:Name="PagesViewDataTemplate">
            <DataTemplate.Resources>
                <Style x:Key="PageHostStyle" TargetType="{x:Type p:KPage}">
                </Style>
            </DataTemplate.Resources>
            <p:KPageScrollViewer Name="ScrollContainer" 
                                Padding="{Binding ElementName=PagesList, Path=PageScrollViewerPadding}" 
                                Height="{Binding ElementName=PagesList, Path=ScaleY, Converter={StaticResource pageHeightConverter}}"
                                Width="{Binding ElementName=PagesList, Path=ScaleX, Converter={StaticResource pageWidthConverter}}"
                                MaxHeight="{Binding ElementName=PagesList, Path=Height}"   
                                MaxWidth="{Binding ElementName=PagesList, Path=Width}"    
                                ScrollViewer.HorizontalScrollBarVisibility="{Binding ElementName=PagesList, Path=PageScrollVisibilityHori}" 
                                ScrollViewer.VerticalScrollBarVisibility="{Binding ElementName=PagesList, Path=PageScrollVisibilityVert}"                                 >
                <Grid x:Name="MarginStack" >
                    <p:KPage x:Name="KPage" SizeChanged="KPage_SizeChanged" >

                    </p:KPage>
                </Grid>
            </p:KPageScrollViewer>
        </DataTemplate>
    </ListView.ItemTemplate>

    <ListView.ItemsPanel>
        <ItemsPanelTemplate >
            <p:KVirtualizingStackPanel IsItemsHost="True"  
                                x:Name="WrapPanel1" 
                                Orientation="{Binding ElementName=PagesList, Path=MyOrientation}" 
                                VerticalAlignment="Center" 
                                HorizontalAlignment="Center"
                                ClipToBounds="{Binding ElementName=PagesList, Path=PanelClipToBounds}"           
                                Height="{Binding ElementName=PagesList, Path=ScaleY, Converter={StaticResource pageHeightConverter}}"
                                Width="{Binding ElementName=PagesList, Path=ScaleX, Converter={StaticResource pageWidthConverter}}"
                                MaxHeight="{Binding ElementName=PagesList, Path=Height}"   
                                MaxWidth="{Binding ElementName=PagesList, Path=Width}"    
                                >
            </p:KVirtualizingStackPanel>
        </ItemsPanelTemplate>
    </ListView.ItemsPanel>

</ListView> 
```

**编辑**

这里是使用 ListView 的地方：(p:PagesView)

```
<Window x:Class="KETAB.KStudio.UI.WindowMain"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"    
    xmlns:kStudioControls="clr-namespace:KETAB.KStudio.UI"   
    xmlns:toolBoxUIPanel="clr-namespace:KETAB.KStudio.UI"   
    xmlns:Controls="clr-namespace:KETAB.KStudio.UserControls;assembly=KETAB.KStudio.UserControls"
    xmlns:p="clr-namespace:KETAB.KStudio.Stage;assembly=KETAB.KStudio.Stage"
    xmlns:tb="http://www.hardcodet.net/taskbar"
    SizeChanged="Window_SizeChanged"    
    WindowState="Maximized" 
    WindowStyle="None"
    Background="Transparent"
    ResizeMode="CanResizeWithGrip"  
    PreviewKeyUp="WindowMain_PreviewKeyUp"
    Closed="WindowMain_Closed"   
    Stylus.IsPressAndHoldEnabled="False"
    Stylus.IsTapFeedbackEnabled="False"
    Stylus.IsTouchFeedbackEnabled="False"
    Stylus.IsFlicksEnabled="False"
    AllowsTransparency="True">

    <Grid FlowDirection="LeftToRight" Name="MainUIContainer">
        <Grid.RowDefinitions>
            <RowDefinition Height="auto" MinHeight="0"   />
            <RowDefinition />
        </Grid.RowDefinitions>

        <tb:TaskbarIcon
                    x:Name="MyNotifyIcon"
                    IconSource="/KETABStudio;component/KStudioControls/KStudioIcons/Notify.ico"
                    ToolTipText="KETAB Studio" Visibility="Collapsed"/>

        <Border Name="borderContainer" ClipToBounds="True" Margin="0,0,0,0" Grid.Row="1" Grid.Column="0" BorderThickness="2, 0, 2, 2" 
                BorderBrush="{StaticResource MainWindowBorderColor}"  Background="White">
            <Grid Background="Transparent"  ClipToBounds="True" Name="MainUISplit"  SizeChanged="MainUISplit_SizeChanged">
                <!--main backgound depends on this grid-->
                <Grid.RowDefinitions>
                    <RowDefinition />
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="auto" />
                </Grid.ColumnDefinitions>

                <Grid Background="{StaticResource background}" Margin="0" ClipToBounds="True" Name="applicationBackground">
                    <Rectangle Name="OpacityRectangle" Visibility="Hidden" Margin="0,0,-60,0" Fill="Black" ></Rectangle>                       
                </Grid>

                <!--Page Area-->
                <Grid Grid.Column="0" Grid.Row="0" Margin="0" Name="PageArea" AllowDrop="True">
                    <p:PagesView  Name="PageList" />
                    <Controls:PageLoadingControl  x:Name="pageLoadingControl"  Visibility="Collapsed"/>
                    <Controls:HelpMode x:Name="HelpModeInstance" Visibility="Collapsed"/>
                </Grid>
            </Grid>
        </Border>
    </Grid>
</Window> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:36:51.347

我阅读了以下可能有帮助的内容...与您使用 ItemsPanel 的方式有关：[虚拟化 ItemsControl？](https://stackoverflow.com/questions/2783845/virtualizing-an-itemscontrol)- 我意识到这不是完全相同的主题，但它对一个非常相似的问题有很好的解释。

希望它会有所帮助。

# cuda - cuda：分配指向图像和图像的指针数组

> ID：15113960
> 
> 赞同：0
> 
> 时间：2013-02-27T14:00:39.053
> 
> 标签：cuda

我是 CUDA 的新手。我想将一堆图像复制到设备上。

```
unsigned char** _devStackImagesCuda = NULL;
int stackSize = 5;//should be replaced by argument to the function
if(_devStackImagesCuda == NULL)\\allocate array of pointers on the device
{
    cudaMalloc(&_devStackImagesCuda,  sizeof(unsigned char*)  * stackSize);
    cudaMemset(_devStackImagesCuda, 0, sizeof(unsigned char*) * stackSize);
}

for(int i = 0; i < stackSize; i++)
{

    if(_devStackImagesCuda[i] == NULL) //allocates one image on the device.
        cudaMalloc(&_devStackImagesCuda[i], imageSize * sizeof(unsigned char));
    cudaMemcpy(_devStackImagesCuda[i], _imageStack->GetImage(i, dummy, true), imageSize, cudaMemcpyHostToDevice);//copy image data to device
} 
```

可以吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T15:02:54.910

如评论中所示，您的方法存在几个问题。

1.  特别是作为初学者，您应该始终对您的 cuda 调用（包括内核调用）进行错误检查。在我下面的代码中是一个例子，或者参考[这个问题/答案](https://stackoverflow.com/questions/14038589/what-is-the-canonical-way-to-check-for-errors-using-the-cuda-runtime-api)
2.  在 cuda 中创建指针到指针的排列有时并不直观，因为 cudaMalloc'ing 顶级指针然后 cudaMalloc'ing 其下方的指针的方法将不起作用。这是因为要将其下方的指针传递给 cudaMalloc，我们必须将顶层指针传递给 cudaMalloc，但这*已经*是一个设备指针。cudaMalloc 希望您传递一个主机指针，然后 cudaMalloc 将位于设备上。因此，为了解决这个问题，通常需要在主机上创建影子或并行指针排列，并将所有这些依次传递给 cudaMalloc，然后将这些指针复制到设备。有关示例，请参见下面的代码。
3.  您还想测试主机上设备指针的有效性，看看您是否需要 cudaMalloc 它。这不起作用，因为它会导致取消引用主机上的设备指针。特别是在这一行：`if(_devStackImagesCuda[i] == NULL)`，您正在尝试查看 _devStackImagesCuda[i] 是否有效，但为了做到这一点，您必须取消引用，`_devStackImagesCuda`但是您之前已经对此指针（指向指针）执行了 cudaMalloc，因此它现在是一个设备指针，不允许在主机上取消引用。我建议您跟踪是否需要以其他方式对这些指针进行 cudaMalloc。

我相信这样的事情会奏效：

```
#include <stdio.h>

#define cudaCheckErrors(msg) \
    do { \
        cudaError_t __err = cudaGetLastError(); \
        if (__err != cudaSuccess) { \
            fprintf(stderr, "Fatal error: %s (%s at %s:%d)\n", \
                msg, cudaGetErrorString(__err), \
                __FILE__, __LINE__); \
            fprintf(stderr, "*** FAILED - ABORTING\n"); \
            exit(1); \
        } \
    } while (0)

int main(){

  unsigned char ** _devStackImagesCuda=0;

  int stackSize = 5;
  int imageSize = 4;
  unsigned char *temp[stackSize];
  unsigned char dummy_image[imageSize];
// first create top level pointer
  if ( _devStackImagesCuda == 0) //allocate array of pointers on the device
    {
    cudaMalloc(&_devStackImagesCuda,  sizeof(unsigned char*)  * stackSize);
    cudaCheckErrors("cm 1");
    }
// then create child pointers on host, and copy to device, then copy image
  for(int i = 0; i < stackSize; i++)
    {

    cudaMalloc(&temp[i], imageSize * sizeof(unsigned char));
    cudaCheckErrors("cm 2");
    cudaMemcpy(&(_devStackImagesCuda[i]), &(temp[i]), sizeof(unsigned char *), cudaMemcpyHostToDevice);//copy child pointer to device
    cudaCheckErrors("cudamemcopy1");
    cudaMemcpy(temp[i], dummy_image, imageSize*sizeof(unsigned char), cudaMemcpyHostToDevice); // copy image to device
    cudaCheckErrors("cudamemcpy2");

    }

return 0;
} 
```

顺便说一句，如果您可以将图像数组视为连续区域，则可以大大简化事情。像这样：

```
unsigned char images[NUM_IMAGES*IMAGE_SIZE]; // or you could malloc this
unsigned char *d_images;
cudaMalloc((void **) d_images, NUM_IMAGES*IMAGE_SIZE*sizeof(unsigned char));
cudaMemcpy(d_images, images, NUM_IMAGES*IMAGE_SIZE*sizeof(unsigned char), cudaMemcpyHostToDevice); 
```

并通过以下方式访问单个图像元素：

```
unsigned char mypixel = images[i + (IMAGE_SIZE * j)]; // to access element i in image j 
```

# c# - 如何确定程序是否使用 DirectX，如果使用，DirectX 表面大小是多少？

> ID：15113964
> 
> 赞同：6
> 
> 时间：2013-02-27T14:00:57.867
> 
> 标签：c#, directx, screenshot

我正在使用[Spazzarama 的](https://github.com/spazzarama/Direct3DHook)Direct3DHook 从应用程序中捕获屏幕截图（目的是通过 Internet 流式传输它们）。虽然当应用程序使用 DirectX 时这很有效，但如果应用程序不使用 DirectX（例如记事本），它就会失败。

1.  如何确定正在运行的应用程序（进程）是否使用 DirectX？原因是在这种情况下，我需要使用不同的方式来捕获屏幕，例如使用 GDI+。
2.  当此 DirectX 应用程序未在全屏模式下运行时，如何获取 DirectX 表面的大小？例如，当我捕获在窗口模式下运行的游戏的屏幕时，应用程序大小也包括窗口框架的大小等，并且我捕获的屏幕通常太大。

# git - 每 5 天将 git master 分支上传到生产服务器

> ID：15113968
> 
> 赞同：1
> 
> 时间：2013-02-27T14:01:06.153
> 
> 标签：git, apache, bitbucket

我有一个 web 应用程序，我们正在开发一个大约 4 人的团队，使用 Git Flow 并且它运行良好。我们的主人（据我们所知）被视为可用代码的生产版本。一旦 master 更新，它就会上传到我们的客户可以访问的生产服务器。

我们希望每 5 天获取 master 分支并将其以当前状态上传到我们的生产服务器。它存储在 BitBucket 中。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T14:13:26.703

git 中有一些钩子可用于附加自定义操作。但是，由于您希望这按时间安排而不是在 git 中发生某些事件时发生，所以我会编写一个脚本来从生产中提取最新的并部署它。

将此脚本设置为按计划运行，一切就绪。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-28T23:19:44.613

调查[http://jenkins-ci.org](http://jenkins-ci.org)。我们这样做了，而且效果很好。

如果您有任何问题，请告诉我.. 在推特上@JohnathanMSmith

每次项目发生更改或时间检查时，您都可以让 jenkins ci 执行此操作。

# android - Onclicklistner 在片段列表视图中不起作用

> ID：15113969
> 
> 赞同：5
> 
> 时间：2013-02-27T14:01:06.493
> 
> 标签：android, listview, fragment, android-listfragment, custom-adapter

我在 listfragment 中有一个带有自定义适配器的 listview，并且还为 listview 设置了 onclicklistner。但是 Onclicklistner 不起作用。

这是我的代码：

```
public class BasicFragment extends ListFragment {

ListView lv;
MyCustomAdapter adapter;

@Override
public void onCreate(Bundle si) {
    super.onCreate(si);
}

@Override
public void onActivityCreated(Bundle b) {
    super.onActivityCreated(b);
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

    View view = inflater.inflate(R.layout.fragment_basic, container, false);
    lv = (ListView) view.findViewById(android.R.id.list);
    FetchedData DT = FetchedData.StaticDataTransfer();
    RecepiesProperties[] AryObjaz = DT.getData();
    getdata(AryObjaz);
    adapter = new MyCustomAdapter(getActivity(), R.layout.listview_layout,
            Dataset);
    lv.setAdapter(adapter);

    lv.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {
            Toast t = Toast.makeText(getActivity(), "Message",
                    Toast.LENGTH_SHORT);
            t.show();
        }
    });

    return view;
}} 
```

MyCustomAdapter.java

```
public class MyCustomAdapter extends ArrayAdapter<Recipes> {

Context context;
int layoutResourceId;
Recipes data[] = null;
Typeface typeface;
public ImageLoader imageLoader;

public MyCustomAdapter(Context context, int textViewResourceId,
        Recipes[] dataset) {
    super(context, textViewResourceId, dataset);
    this.layoutResourceId = textViewResourceId;
    this.context = context;
    this.data = dataset;
    imageLoader = new ImageLoader(context.getApplicationContext());
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View row = convertView;

    LayoutInflater inflater = ((Activity) context).getLayoutInflater();
    row = inflater.inflate(layoutResourceId, parent, false);
    RecipesHolder holder = new RecipesHolder();
    holder.imgIcon = (ImageView) row.findViewById(R.id.imageView1);
    holder.txtTitle = (TextView) row.findViewById(R.id.title);
    holder.category = (TextView) row.findViewById(R.id.category);
    holder.source = (TextView) row.findViewById(R.id.source);
    holder.country = (TextView) row.findViewById(R.id.country);
    holder.readytime = (TextView) row.findViewById(R.id.readytime);
    holder.tips = (Button) row.findViewById(R.id.tips);
    holder.fav = (Button) row.findViewById(R.id.fav);

    Recipes ap = data[position];

    imageLoader.DisplayImage(ap.getIMAGENAME240(), holder.imgIcon);
    holder.txtTitle.setText(ap.getNAME());
    holder.category.setText(ap.getCATEGORY());
    holder.source.setText(ap.getSOURCE());
    holder.country.setText(ap.getCOUNTRY());
    holder.readytime.setText(ap.getREADYTIME());

    return row;
}

static class RecipesHolder {
    ImageView imgIcon;
    TextView txtTitle;
    TextView category;
    TextView source;
    TextView country;
    TextView readytime;
    Button tips;
    Button fav;
}} 
```

//listview_layout.xml

```
<RelativeLayout
android:layout_width="wrap_content"
android:layout_height="wrap_content"><ImageView
    android:id="@+id/imageView1"
    android:layout_width="100dp"
    android:layout_height="100dp"
    android:layout_alignParentLeft="true"
    android:focusable="true"
    android:layout_alignParentTop="true"
    android:layout_marginLeft="5dp"
    android:layout_marginTop="10dp" />

<TextView
    android:id="@+id/readytime"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/country"
    android:layout_alignBottom="@+id/country"
    android:layout_marginLeft="73dp"
    android:layout_toRightOf="@+id/country"
    android:focusable="true"
    android:text="TextView"
    android:textColor="#000" />

<TextView
    android:id="@+id/country"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/imageView1"
    android:layout_alignLeft="@+id/source"
    android:focusable="true"
    android:text="TextView"
    android:textColor="#000" />

<TextView
    android:id="@+id/source"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/country"
    android:layout_alignLeft="@+id/category"
    android:focusable="true"
    android:text="TextView"
    android:textColor="#000" />

<TextView
    android:id="@+id/category"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/source"
    android:layout_alignLeft="@+id/title"
    android:text="TextView"
    android:focusable="true"
    android:textColor="#000" />

<TextView
    android:id="@+id/title"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/category"
    android:layout_toRightOf="@+id/imageView1"
    android:text="TextView"
    android:focusable="true"
    android:textColor="#000" />

<Button
    android:id="@+id/fav"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/tips"
    android:layout_below="@+id/source"
    android:focusable="true"
    android:background="@drawable/favourite" />

<Button
    android:id="@+id/tips"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_alignTop="@+id/textView1"
    android:layout_marginRight="14dp"
    android:background="@drawable/yellow" /></RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-05T15:34:39.647

当listview中的所有控件（按钮，textviews）设置为focusable false时，终于解决了这个问题。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-27T14:40:39.177

检查您的 MyCustomAdapter，自定义布局中的某些小部件（例如：Button、ImageButton）将消耗点击事件，然后永远不会调用 onItemClick。

在您的适配器的 getView 方法中使用以下代码来获取 onClick 事件。

```
 row.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

        }
    }); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-05T11:53:48.387

根据 Android API 文档：

> **ListFragment 具有由单个列表视图组成的默认布局。** 但是，如果您愿意，您可以通过从 onCreateView(LayoutInflater, ViewGroup, Bundle) 返回您自己的视图层次结构来自定义片段布局。**为此，您的视图层次结构必须包含一个 ID 为“@android:id/list”的 ListView 对象（如果它在代码中，则为列表）**

由于您没有发布片段的布局文件，我不确定这里出了什么问题。以下代码是您使用 ListFragment 的默认列表视图时的样子。如果您使用 ListFragment，您应该利用可用的其他方法，例如`setListAdapter`和`onListItemClick`。您还可以在不使用 ListFragment（仅使用 Fragment）的情况下做同样的事情。

片段代码（修改了您的代码）

```
public class BasicFragment extends ListFragment {

    MyCustomAdapter adapter;

    @Override
    public void onCreate(Bundle si) {
        super.onCreate(si);
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        // not sure what you are doing here but data fetch should be asynchronous if it interacts with DB or makes network call
        FetchedData DT = FetchedData.StaticDataTransfer();
        RecepiesProperties[] AryObjaz = DT.getData();
        getdata(AryObjaz);
        adapter = new MyCustomAdapter(getActivity(), R.layout.listview_layout, Dataset);
        setListAdapter(adapter);
    }

    @Override
    public void onListItemClick(ListView l, View v, int position, long id) {
        Toast t = Toast.makeText(getActivity(), "Message",
        Toast.LENGTH_SHORT);
        t.show();

    }
} 
```

* * *

**此外，我修改了您的适配器代码以帮助回收视图，您当前的代码没有使用视图回收并且总是在膨胀视图。**

适配器代码：

```
public class MyCustomAdapter extends ArrayAdapter<Recipes> {

    Context context;
    int layoutResourceId;
    Recipes data[] = null;
    Typeface typeface;
    public ImageLoader imageLoader;
    private LayoutInflater inflater;

    public MyCustomAdapter(Context context, int textViewResourceId, Recipes[] dataset) {
        super(context, textViewResourceId, dataset);
        this.layoutResourceId = textViewResourceId;
        this.context = context;
        this.data = dataset;
        imageLoader = new ImageLoader(context.getApplicationContext());
        inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View row = convertView;
        RecipesHolder holder = null;
        //recycling views
        if(null == row){
            row = inflater.inflate(layoutResourceId, parent, false);
            holder = new RecipesHolder();
            holder.imgIcon = (ImageView) row.findViewById(R.id.imageView1);
            holder.txtTitle = (TextView) row.findViewById(R.id.title);
            holder.category = (TextView) row.findViewById(R.id.category);
            holder.source = (TextView) row.findViewById(R.id.source);
            holder.country = (TextView) row.findViewById(R.id.country);
            holder.readytime = (TextView) row.findViewById(R.id.readytime);
            holder.tips = (Button) row.findViewById(R.id.tips);
            holder.fav = (Button) row.findViewById(R.id.fav);
            row.setTag(holder);
        }else{
            holder = (RecipesHolder)row.getTag();
        }
        Recipes ap = data[position];

        imageLoader.DisplayImage(ap.getIMAGENAME240(), holder.imgIcon);
        holder.txtTitle.setText(ap.getNAME());
        holder.category.setText(ap.getCATEGORY());
        holder.source.setText(ap.getSOURCE());
        holder.country.setText(ap.getCOUNTRY());
        holder.readytime.setText(ap.getREADYTIME());

        return row;
    }

    static class RecipesHolder {
        ImageView imgIcon;
        TextView txtTitle;
        TextView category;
        TextView source;
        TextView country;
        TextView readytime;
        Button tips;
        Button fav;
    }
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-04T13:51:07.193

当您夸大您的视图时，您的视图中似乎有 2 个按钮：

这`row.findViewById(R.id.tips);`

还有这个`row.findViewById(R.id.fav);`

您应该删除这些按钮（如果您不想点击它们，请将它们替换为文本视图）

或者，如果您想要点击这些按钮，您可以对每个按钮使用 OnClickListeners，对整个视图使用另一个 OnClickListener。

* * *

**例子**

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View row = convertView;

    //we only inflate if the row is null!!
    if(row == null) {
        LayoutInflater inflater = ((Activity) context).getLayoutInflater();
        row = inflater.inflate(layoutResourceId, parent, false);
        RecipesHolder holder = new RecipesHolder();
        holder.imgIcon = (ImageView) row.findViewById(R.id.imageView1);
        holder.txtTitle = (TextView) row.findViewById(R.id.title);
        holder.category = (TextView) row.findViewById(R.id.category);
        holder.source = (TextView) row.findViewById(R.id.source);
        holder.country = (TextView) row.findViewById(R.id.country);
        holder.readytime = (TextView) row.findViewById(R.id.readytime);
        holder.tips = (Button) row.findViewById(R.id.tips);
        holder.fav = (Button) row.findViewById(R.id.fav);
        //we set the tag of the view to this holder so we can get it everytime
        row.setTag(holder);
    }
    //change this to final so that you can use it inside your click listeners
    final Recipes ap = data[position];

    //here we get the holder of the view from its tag
    RecipesHolder holder = (RecipesHolder) row.getTag();

    //no changes to ur setup
    imageLoader.DisplayImage(ap.getIMAGENAME240(), holder.imgIcon);
    holder.txtTitle.setText(ap.getNAME());
    holder.category.setText(ap.getCATEGORY());
    holder.source.setText(ap.getSOURCE());
    holder.country.setText(ap.getCOUNTRY());
    holder.readytime.setText(ap.getREADYTIME());

    //now the click listeners

    //tips button
    holder.tips.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            //tips has been clicked
            //do whatever you want with `ap`
        }
    });
    //fav button
    holder.fav.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            //fav has been clicked
            //do whatever you want with `ap`
        }
    });
    //whole item click
    row.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            //the row has been clicked
            //do whatever you want with `ap`
        }
    });
    return row;
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-02-27T14:13:40.367

将以下代码放入`onViewCreated()`方法中：

```
@Override
public void onViewCreated(View view, Bundle savedInstanceState) {

    ListView list = (ListView) view.findViewById(android.R.id.list);

    list.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
                      Toast t = Toast.makeText(getActivity(), "Message",
                             Toast.LENGTH_SHORT);
                      t.show();
        }
    }); 

} 
```

问题可能在于 onViewCreate() 中还没有构建视图，因此不建议在那里设置监听器。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-02-27T14:24:03.110

```
 lv.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
                //your code
        }
   }); 
```

我认为这应该有效

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-03-10T11:42:53.130

适配器有方法 areAllItemsEnabled()，它可能有用。

**公共抽象布尔 areAllItemsEnabled ()**

指示是否启用此适配器中的所有项目。如果此方法返回的值随时间变化，不保证会生效。如果为 true，则表示所有项目都是可选择和可点击的（没有分隔符。）

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-02-27T14:21:38.533

```
@Override

public void onListItemClick(ListView l, View v, int position, long id) {
    // TODO Auto-generated method stub
    super.onListItemClick(l, v, position, id);
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-12-09T06:17:06.910

只需放入`android:focusable="false" android:clickable="false"`布局。对于所有文本视图、按钮等。问题已解决。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-03-27T07:10:09.590

我有一个类似的问题，我花了很长时间才弄清楚出了什么问题。以前我的片段的 onListItemClick() 打开了新活动，但在返回片段后，onListItemClick() 侦听器不再工作。

```
@Override
public void onListItemClick(ListView l, View v, int position, long id) {
    super.onListItemClick(l, v, position, id);
    // additional code (e.g. open new activity)
} 
```

这个问题是通过在我的自定义 ArrayAdapter 中创建一个侦听器来解决的。我将此代码放在 getView() 中：

```
 rowView.setOnClickListener(new View.OnClickListener() {
        final int p = position;
        @Override
        public void onClick(View v) {
            Log.d("FeedListAdapter", "onClick()");
            openPost(p);    // for example
        }
    }); 
```

我整晚都在解决这个问题（现在是早上 8 点），我想我应该将我的解决方案发布给处于类似位置的其他人:)

# mime-types - 我应该为 MPP 文件使用哪种 MIME 类型？

> ID：15113973
> 
> 赞同：0
> 
> 时间：2013-02-27T14:01:36.500
> 
> 标签：mime-types, ms-project

我已经看到了一个示例，说明我打算从这个问题[将文档上传到 sql server](https://stackoverflow.com/questions/13917038/uploading-documents-in-sql-server-2008-using-asp-net-c-sharp)我可以正常工作，但是您将如何上传 .mpp 文件？我一直在寻找它的类型，但似乎找不到任何东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T14:05:27.397

[如此处](http://filext.com/file-extension/MPP)详述，您可以看到一些可以使用的不同 MIME 类型。以下是该列表：

> 应用程序/vnd.ms-project、应用程序/msproj、应用程序/msproject、应用程序/x-msproject、应用程序/x-ms-project、应用程序/x-dos_ms_project、应用程序/mpp、zz-application/zz-winassoc-mpp

注意：“[文件扩展名] 的 MIME 类型”是搜索这些内容时使用的好词组

# ruby-on-rails - 在 ruby gem 中提供 before_filter

> ID：15113975
> 
> 赞同：1
> 
> 时间：2013-02-27T14:01:43.603
> 
> 标签：ruby-on-rails, ruby, rubygems

我有一个 gem，其中包含一个设计为在 Rails 中作为 before_filter 运行的方法：

```
before_filter :method_in_gem 
```

当他们想在他们的应用程序中调用这个 before_filter 时，由开发人员决定（即我不想以任何方式对他们强制执行它）

如何以控制器能够获取的方式公开此方法？我有我的方法`gem_name/lib/controllers.rb`

如果相关，我的 gem 是用 bundler 创建的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T14:09:25.187

尝试以下

```
module ModuleName
  def self.included(base)
    base.extend ClassMethods
  end

  module ClassMethods
    def meth(args)
      before_filter :bf_method

      include ModuleName::InstanceMethods
    end 
  end 

  module InstanceMethods
    def bf_method
      # ...
    end 
  end 
end 
```

然后只需将模块包含在您的控制器中

```
class ApplicationController < ActionController::Base
  include ModuleName
end 
```

# asp.net - 尝试从 ASP.NET 页面调用 ASP 经典页面

> ID：15113976
> 
> 赞同：0
> 
> 时间：2013-02-27T14:01:45.473
> 
> 标签：asp.net, asp-classic

也就是说，在 ASP.NET 页面的代码隐藏中，我试图调用 ASP 经典页面。我正在尝试这种方式：

```
...
Dim full As String

full = "<script type=""text/javascript"">window.open(""/FSP_LOCAL_31900_8/script/solicitudesoferta/confirmoferta2.asp"",""fraCOConfirmacion"");<" & "/script>"

Response.Write(full)
... 
```

但看起来这不起作用。任何想法都会有很大帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T14:55:53.977

当您使用 时`Response.Write(full)`，您会将字符串发送到任何已经存在的 HTML 内容的正上方，因此它将不起作用。

相反，使用：

```
Dim full As String
full = "window.open('/FSP_LOCAL_31900_8/script/solicitudesoferta/confirmoferta2.asp','fraCOConfirmacion');"
Page.ClientScript.RegisterStartupScript(this.GetType(), "myscript", full, true); 
```

请注意，我已经`<script>`从您的字符串中删除了标签，因为最后一个参数`RegisterStartupScript`表示您是否要添加标签。

# ruby-on-rails - 我如何在java中创建和发布我自己的gem文件，比如jar文件

> ID：15113981
> 
> 赞同：0
> 
> 时间：2013-02-27T14:01:54.350
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rubygems

如何在 java 中创建和发布我自己的 gem 文件，如 jar 文件。

完成此任务的任何链接或演练或步骤教程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T17:00:48.807

您可能想使用[bueller](https://github.com/dkastner/bueller)。它为您创建`gemspec`文件，然后您只需执行`gem build YOUGEMSPEC.gemspec`：

```
~ bueller PROJECT --summary "PROJECT SUMMARY" \
                  --user-name "" --user-email "" \
                  --github-username "" \
                  --homepage ""
# bueller’s output
~ gem build PROJECT.gemspec 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T14:28:15.010

看看[这个 railscast](http://railscasts.com/episodes/245-new-gem-with-bundler?view=asciicast) 和这个 ruby​​gems[教程](http://guides.rubygems.org/make-your-own-gem/)

# javascript - 在 Div 元素中将字符串截断为 125 个字符

> ID：15113982
> 
> 赞同：1
> 
> 时间：2013-02-27T14:01:55.057
> 
> 标签：javascript, html, dojo, truncate

我有具有以下内容的 Div 元素

`It is a dummy text Lorem Ipsum Iswwpe ID DFDLJLKDjlk It is a dummy text Lorem Ipsum Iswwpe ID DFDLJLKDjlk It is a dummy text Lorem Ipsum Iswwpe ID DFDLJLKDjlk <a href="#">click here</a>`

我必须将 DIV 内容修剪为 125 个字符，并且必须在最后添加“更多”链接。我使用 DOJO 库作为 JS 库

我用于修剪和替换更多链接的以下代码。但是，长度包括`<a href="#"> and </a>`标签。我不想只获得文本长度。

```
 var name= elm.innerHTML;                    
                if(name.length > 125){
                     var subtext = name.substring(125, feednamelength);name.replace(subtext , '<a href="#">More</a>');

                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T14:08:37.027

好吧，这是针对 javascript 的。`[**Demo**](http://jsfiddle.net/9N6s3/)`

```
function short(length) {
    var s = document.getElementsByTagName("div");
    var len = s.length;
    for(var i = 0; i < len; i++) {
       var g = s[i].innerHTML;
       var x = ". . . More";
       var leng = length-5;
       var html = g.substring(0, leng)+"";
       var allHTML = html+x;
       s[i].innerHTML = allHTML;
    }
}
short(125); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T14:14:49.457

有什么理由必须使用 Javascript？不是每个人都启用它。如果你的服务器上有 PHP，你可以这样做，

```
echo substr($inputText, 0, 125); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T14:15:11.057

我已将以下 css 解决方案用于类似情况。它是基于悬停的，而不是单击“更多”，但表现得很好。

```
<style type="text/css">
.longtextautoexpand {
max-width:350px;
white-space:nowrap; 
overflow:hidden;
text-overflow:ellipsis;
}
.longtextautoexpand:hover {
overflow:visible;
}
</style>

<p class="longtextautoexpand">
When text must stay on one line, but there is not enough room for it all, this article      provides a solution.
</p> 
```

# c# - “签出”资源的数据结构？

> ID：15113983
> 
> 赞同：0
> 
> 时间：2013-02-27T14:01:55.080
> 
> 标签：c#, data-structures

我试图找出解决以下问题的最佳方法。

我需要在地图上绘制路线。我有一个有序的颜色池，我想从中挑选。如果第一种颜色可用（尚未使用），我想使用该颜色。如果使用第一种，我想使用第二种颜色，依此类推。另外，我画的路线可以分组。因此，如果组相同，它们可能会共享相同的颜色。

这是一个例子：

颜色列表（订单事项）：蓝色，红色，绿色，黄色......

*   第一条路线是A组。蓝色可用：BLUE
*   第二条路线是 B 组。蓝色不可用。红色可用：RED
*   第三条路线是 A 组。A 组已经在使用蓝色，所以使用：蓝色
*   第二条路线被删除
*   第四条路线是 C 组。蓝色不可用。红色可用：RED
*   第五条路线是 D 组。蓝色和红色不可用。绿色可用：绿色

我正在讨论这种系统的最佳数据结构是什么。我需要维护颜色及其顺序，哪些组已“签出”颜色，以及何时可以将颜色“释放”回可用选择池中。

有什么建议么？

**编辑：**

我目前的策略是使用两种数据结构。首先是一个字典，其中键是组名，值是正在使用的颜色，所以我知道谁当前正在使用什么颜色。第二个结构将是一个堆栈，用于维护可用颜色的顺序。

所以当我想添加一个新的路由时，我首先去字典检查我的组名是否存在。如果是这样，我将使用指定的颜色。如果没有，我将从堆栈中提取下一个可用颜色，然后将我的组合添加到字典中。

与此相关的问题是，它不会使用颜色维护每个组中有多少条路线的计数。因此，假设我在 A 组中有两条使用蓝色的路线。我删除了一条路线。我如何知道是否还有其他 A 组路线仍在使用蓝色？我不知道我是否可以将蓝色放回堆栈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T19:16:57.080

我的很相似。我可能应该清理它更多...

```
 class ColorAssigner
{
    public Dictionary<string, ColorGroupDetails> ColorAssignments { get; private set; }
    public SortedList<double, Color> Colors { get; private set; }

    public ColorAssigner()
    {
        ColorAssignments = new Dictionary<string, ColorGroupDetails>();
        Colors = new SortedList<double, Color>()  { { 1, Color.Blue}, {2, Color.Red}, {3,Color.Green}, {4,Color.Yellow} };
    }

    public Color RequestColor(string groupName)
    {
        if (ColorAssignments.ContainsKey(groupName)) 
        {
            ColorAssignments[groupName].Count++;
            return ColorAssignments[groupName].AssignedColor;
        }

        var assignedColor = GetNextAvailableColor();

        ColorAssignments.Add(groupName, new ColorGroupDetails() { Count = 1, AssignedColor = assignedColor });

        return assignedColor;
    }

    private Color GetNextAvailableColor()
    {
        var assignedColors = ColorAssignments.Select(a => a.Value.AssignedColor).ToList();

        return Colors.Values.Except(assignedColors).First();
    }

    public void ReleaseColor(string groupName)
    {
        if (ColorAssignments.ContainsKey(groupName))
        {
            var count = ColorAssignments[groupName].Count -= 1;

            if (count < 1) ColorAssignments.Remove(groupName);
        }
    }
}

    class ColorGroupDetails
    {
        public int Count { get; set; }
        public Color AssignedColor { get; set; }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T18:39:47.287

我能够使用 a`Dictionary`和 a来实现这一点`SortedList`

```
internal class ColorUseCounter
{
    public ColorUseCounter(int ColorID, Color Color)
    {
        this.ColorID = ColorID;
        this.Color = Color;
        Count++;
    }

    public int ColorID { get; set; }
    public Color Color { get; set; }
    public int Count { get; set; }
}

private static Dictionary<double, ColorUseCounter> UsedColors = new Dictionary<double, ColorUseCounter>();
private static SortedList<int, Color> AvailableColors = new SortedList<int, Color>()
{
    { 1, Color.FromArgb(74, 117, 175) },
    { 2, Color.FromArgb(226, 134, 48) },
    { 3, Color.FromArgb(94, 158, 64) },
    { 4, Color.FromArgb(185, 58, 46) },
    ...
    ...
}; 
```

键控在 GroupID 上，在我的`Dictionary`情况下是双精度。因此，当我有绘制路线时，我首先检查我的 GroupID 是否在我的`Dictionary`. 如果是，我使用该颜色作为我的路线并将 1 增加，`Count`以便我知道有多少路线正在使用它`Color`。

如果我的 GroupID 不在 中`Dictionary`，我会转到`SortedList`使用 的优先级`Colors`作为键的我的。所以我抓住了第一个项目`SortedList`并将其添加到`Dictionary`我的 GroupID 旁边。`Color`然后我从中删除它，`SortedList`因为它不再可用。

当我删除一条路线时，我只需检查`Dictionary`是否`Count`已归零。如果是这样，我删除`Dictionary`条目并将其重新插入`Color`到`SortedList`.

工作很棒。

# c# - 只要有空格且下一个字符是数字，就进行字符串拆分

> ID：15113986
> 
> 赞同：-1
> 
> 时间：2013-02-27T14:01:56.367
> 
> 标签：c#

只要有空格并且下一个字符是数字，我想拆分一个字符串。例如输入字符串：

```
Golden State 97   Indiana 108 (FINAL) 
```

应该拆分为：

```
string[0]:Golden State
string[1]:97
string[2]:Indiana
string[3]:108
string[4]:FINAL 
```

请帮我解决这个问题。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T14:08:50.583

如果你使用正则表达式

```
var regex = new Regex(@"^(.*) (\d+) (.*) (\d+) \((.*)\)$"); 
```

那么你可以得到你的价值观

```
var m = regex.Match("Golden State 97 Indiana 108 (FINAL)");
if (m.Success)
{
    var string0 = m.Groups[1].Value; // Golden State
    var string1 = m.Groups[2].Value; // 97
    var string2 = m.Groups[3].Value; // Indiana
    var string3 = m.Groups[4].Value; // 108
    var string4 = m.Groups[5].Value; // FINAL
} 
```

（只要团队名称中没有任何数字组！）

您*可以*通过拆分来做到这一点，但没有必要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T14:30:02.377

另一个使用正则表达式的解决方案。这比其他解决方案更通用，因为输入格式不固定。

```
var input = "Golden State 97 Indiana 108 (FINAL)";
var regex = new Regex(@"(?:[a-z][a-z ]*)?[a-z]|\d+", RegexOptions.IgnoreCase);
var values = regex.Matches(input).Cast<Match>().Select(m => m.Value).ToArray(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T14:08:25.250

我建议使用正则表达式来解析字符串。

这是我快速创建的一个

"^([a-zA-Z\s]+) (\d+) ([a-zA-Z\s]+) (\d+) (.+)$"

假设它始终处于您上面描述的形状，这将匹配各个部分。

阅读 MSDN 上的 RegEx 课程。括号中的 RegEx 部分称为组。将字符串与 RegEx 匹配后，您可以访问组，每个组将包含字符串的一部分，例如“Golden State”。

[http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.aspx](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.aspx)

# linux - Bash - 更正格式（sed？）

> ID：15113989
> 
> 赞同：2
> 
> 时间：2013-02-27T14:02:05.120
> 
> 标签：linux, bash

我有一个 IFCONFIG 的输出，我已将其清理为三个主要部分：

1) 名字

2) IP 地址

3) 网络掩码

目前这是通过以下字符串完成的：

```
ifconfig -a | grep eth -A 1 | awk '{print $1,$2,$4}' | sed 's/Link HWaddr//g;s/inet addr\://g;s/Mask\://g;s/\-\-//g;/^$/ d' | grep -v 'UP\|^ ' 
```

输出如下所示：

```
eth0 
192.168.0.60 255.255.255.0
eth1 
1.1.1.1 255.255.255.0
eth2 
eth2:2 
10.2.2.1 255.255.255.0
eth2:3 
10.3.3.1 255.255.255.0
eth2:4 
10.4.4.1 255.255.255.0
eth2:5 
10.5.5.1 255.255.255.0
eth2:6 
10.6.6.1 255.255.255.0
eth2:7 
10.7.7.1 255.255.255.0
eth2:8 
10.8.8.1 255.255.255.0
eth2:9 
10.9.9.1 255.255.255.0
eth2:10 
10.10.10.1 255.255.255.0
eth2:11 
10.11.11.1 255.255.255.0
eth2:12 
10.12.12.1 255.255.255.0
eth2:13 
10.13.13.1 255.255.255.0
eth2:14 
10.14.14.1 255.255.255.0
eth3 
eth3.2 
10.30.30.1 255.255.255.0
eth3.7 
10.33.77.1 255.255.255.0 
```

现在，我有一些问题需要纠正：

1）我需要格式为（IFNAME IP 地址网络掩码），这意味着我需要将 IP/网络掩码向上移动一行到它的关联 IF

2）我想删除当前没有配置的接口。在上面的示例中，您可以看到 eth2 和 eth3 在物理接口上缺少配置，并且只有子接口/vlan 串接在它们之上。

再次感谢您一如既往的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T14:13:56.070

尝试将以下内容添加到您的命令中：

```
$ ... | tr -d '\n' | sed 's/eth/\neth/g' | awk 'NF>1'
eth0 192.168.0.60 255.255.255.0
eth1 1.1.1.1 255.255.255.0
eth2:2 10.2.2.1 255.255.255.0
eth2:3 10.3.3.1 255.255.255.0
eth2:4 10.4.4.1 255.255.255.0
eth2:5 10.5.5.1 255.255.255.0
eth2:6 10.6.6.1 255.255.255.0
eth2:7 10.7.7.1 255.255.255.0
eth2:8 10.8.8.1 255.255.255.0
eth2:9 10.9.9.1 255.255.255.0
eth2:10 10.10.10.1 255.255.255.0
eth2:11 10.11.11.1 255.255.255.0
eth2:12 10.12.12.1 255.255.255.0
eth2:13 10.13.13.1 255.255.255.0
eth2:14 10.14.14.1 255.255.255.0
eth3.2 10.30.30.1 255.255.255.0
eth3.7 10.33.77.1 255.255.255.0 
```

它首先删除所有新行以将所有内容拉到一行，然后根据字段`sed`将其重新拆分为行。`eth`最后，它`awk`仅用于打印超过 1 个字段的行。

（但是，我确信您的整个命令可以进一步简化。看起来您的管道太多了！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T15:26:12.033

只是为了好玩，您可以在 sed 中进行所有操作：

```
ifconfig -a | sed -ne '/^eth/{s/\n//;h;n;H;g;s/\(\S*\).*inet addr:\([0-9.]*\).*Mask:\([0-9.]*\).*/\1 \2 \3/;p;}' 
```

说明：对于以“eth”开头的每一行，删除换行符然后将该行放入保留空间 (h)。获取下一行 (n) 并附加该行以保留空间 (H)。用保留空间 (g) 覆盖当前行。对组合行执行替换以提取有用的位，然后打印结果。

# mysql - SQL 连接和子查询，子查询到 SQL 连接

> ID：15113995
> 
> 赞同：0
> 
> 时间：2013-02-27T14:02:15.820
> 
> 标签：mysql, sql, performance, join, subquery

我编写了这个 SQL 查询来获取不在邀请表中的用户的朋友，并且它可以工作，但是我读到子查询是性能消耗者，我对 JOINS 不是很好，任何帮助修改这个查询只是在加入将不胜感激。

**这是 SQL 查询**

```
SELECT friend.id,
       friend.first_name
FROM   friends AS friend
       INNER JOIN friends_users AS friendsUser
         ON ( friend.id = friendsUser.friend_id
              AND friend.id NOT IN (SELECT friend_id
                                    FROM   friends_invitations
                                    WHERE  friends_invitations.user_id = 1) )
ORDER  BY friendsUser.id ASC 
```

**这是表结构**

```
friends
id   first_name

friends_users
id  friend_id  user_id

friends_invitations
id  friend_id user_id 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T14:12:00.600

子查询不一定是性能消耗者，您的查询是否存在性能问题？无论如何，大多数时候最快的查询方法是使用`NOT EXISTS`：

```
SELECT  friend.id, 
        friend.first_name 
FROM friends AS friend 
INNER JOIN friends_users AS friendsUser 
    ON friend.id = friendsUser.friend_id  
WHERE NOT EXISTS (SELECT 1 FROM friends_invitations 
                  WHERE friends_invitations.user_id = 1
                  AND friend_id = friend.id)
ORDER BY friendsUser.id ASC 
```

[这是一个链接](http://explainextended.com/2009/09/15/not-in-vs-not-exists-vs-left-join-is-null-sql-server/)`NOT IN`，解释了,`LEFT JOIN`和`NOT EXISTS`（对于 SQL Server）之间的区别。因此，测试这些不同的选项并为您的桌子选择正确的选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T14:04:48.757

你可以用`LEFT JOIN`这个，

```
SELECT  friend.id,
        friend.first_name
FROM    friends AS friend
        INNER JOIN friends_users AS friendsUser
            ON friend.id = friendsUser.friend_id 
        LEFT JOIN   friends_invitations
            ON friend.id = friends_invitations.friend_id AND
                friends_invitations.user_id = 1
WHERE   friends_invitations.friend_id IS NULL
ORDER   BY friendsUser.id ASC 
```

# python - 对齐和非默认浮点表示

> ID：15113997
> 
> 赞同：1
> 
> 时间：2013-02-27T14:02:32.053
> 
> 标签：python, string, format

对于我的工作，我经常在开始使用之前检查一些文件的内容，并开始使用检查和一些漂亮的打印来创建 ipython 笔记本来总结我得到的内容。为此，我通常使用`print`并`str.format`获得有序输出或浮点数中的固定数字小数。我能做的总结在这里：

```
f = 32.4321413432
a = 34121
print('float {ff} and integer {ii}'.format(ff=f, i=i))
print('float {ff:.4f} and integer {ii:d}'.format(ff=f, ii=i))
print('float {ff:>20} and integer {ii:>10}'.format(ff=f, ii=i)) 
```

输出

```
float 32.4321413432 and integer 34121
float 32.4321 and integer 34121
float        32.4321413432 and integer      34121 
```

有时我希望能够将对齐方式和小数位数设置**在一起并获得这样的输出**

```
float        32.4321 and integer      34121 
```

我已经尝试了许多`.4f`和`>20`in的组合，`{ff:...}`但我得到了

> ValueError：无效的转换规范

我想要的是否可能，如果是，语法如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T14:19:36.777

你的意思是这样吗？

```
f = 32.4321413432
i = 34121
print('float {ff:>20.4f} and integer {ii:>10}'.format(ff=f, ii=i)) 
```

产生

```
float              32.4321 and integer      34121 
```

# jquery - jQuery 验证 - 错误消息不断重复

> ID：15113999
> 
> 赞同：1
> 
> 时间：2013-02-27T14:02:40.010
> 
> 标签：jquery, jquery-validate

我尝试使用自定义错误消息，但是当出现错误时，当我按下正文或按钮`errorPlacement`时，它会不断重复。`Send Message`

下面是我的 jQuery 代码，这是我的[jsfiddle](http://jsfiddle.net/ruslyrossi/SNb2V/2/)

```
 $(document).ready(function () {
       $("#myform").validate({
           rules: {
               message: {
                   required: true,
                   minlength: 5,
                   maxlength: 753
               }
           },
           debug: true,
           errorPlacement: function (error, element) {
               error.appendTo('#invalid');
           },
           messages: {
               message: {
                   required: "Enter your text message",
                   minlength: jQuery.format("Enter at least {0} characters"),
               }
           }
       });
   }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T16:04:05.563

[`errorLabelContainer``errorPlacement`](http://docs.jquery.com/Plugins/Validation/validate#toptions)如果您希望错误在特定容器中而不是在每个输入元素旁边，[请使用](http://docs.jquery.com/Plugins/Validation/validate#toptions)[而不是。](http://docs.jquery.com/Plugins/Validation/validate#toptions)

**您的 jsFiddle 已修改：http: [//jsfiddle.net/mXm4N/](http://jsfiddle.net/mXm4N/)**

```
$(document).ready(function () {
    $("#myform").validate({
        rules: {
            message: {
                required: true,
                minlength: 5,
                maxlength: 753
            }
        },
        errorLabelContainer: '#invalid',
        messages: {
            message: {
                required: "Enter your text message",
                minlength: jQuery.format("Enter at least {0} characters"),
            }
        }
    });
}); 
```

**HTML**：

```
<div id="invalid"></div>
<form>
    ...
</form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T15:40:28.670

id 无效的元素必须包含在您的表单中。

如果您使用下面的 errorPlacement，插件仅在表单中查找元素，它找不到它，只会插入另一个元素。

```
errorPlacement: function (error, element) {
  // element with id=invalid must be within the form being validated,
  // otherwise use errorLabelContainer
  error.appendTo('#invalid');
} 
```

如果您尝试自己获取错误列表，而不是将它们放在字段旁边，请使用 errorLabelContainer。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T14:11:45.477

看看这个页面：

[http://docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)

并阅读有关递归和提交处理程序的信息——这可能会有所帮助。