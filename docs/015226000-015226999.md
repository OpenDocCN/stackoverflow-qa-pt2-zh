# StackOverflow 问答 15226000-15226999

# asp.net - XML 解析错误：找不到元素？

> ID：15226003
> 
> 赞同：0
> 
> 时间：2013-03-05T14:13:44.317
> 
> 标签：asp.net

我有一个关于 IIS 和 ASP.Net 的问题。

我迁移到了一个新服务器，我必须运行一个上传/下载应用程序。这个应用程序在旧服务器上运行良好，现在我遇到了一些解析错误，我不明白它来自哪里。当我尝试下载一些文件时它可以工作，而且我有一个连接并且登录系统可以工作。但是如果我尝试上传一些文件，那么就会出现这个解析错误。一开始我以为这一定是一些权限问题，但是在我添加了一些用户权限之后，它就没有任何意义了。

XML 解析错误：

> 未找到元素 位置：[http](http://www.mywebsite.com/DownloadManager/DMUpload.aspx?folderId=22767&guid=271334658&cancel=1) ://www.mywebsite.com/DownloadManager/DMUpload.aspx?folderId=22767&guid=271334658&cancel= 1 第 1 行，第 1 列：

这是我的 upload.aspx 文件：

```
<%@ Page language="c#" Codebehind="DMUpload.aspx.cs" AutoEventWireup="false" Inherits="DownloadManager.DMUpload" EnableSessionState="ReadOnly"%>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" >
<HTML>
  <HEAD>
        <title>DMUpload</title>
        <meta content="Microsoft Visual Studio .NET 7.1" name="GENERATOR">
        <meta content="C#" name="CODE_LANGUAGE">
        <meta content="JavaScript" name="vs_defaultClientScript">
        <meta content="http://schemas.microsoft.com/intellisense/ie5" name="vs_targetSchema">
        <LINK href="StyleSheet.css" type="text/css" rel="stylesheet">
  </HEAD>
    <body MS_POSITIONING="GridLayout">
        <form id="Form1" onsubmit="uploadpop(this);" method="post" encType="multipart/form-data"
            runat="server">
            <TABLE class="navigation" id="tbNavigation" cellSpacing="0" cellPadding="0" width="100%"
                border="0">
                <TR>
                    <TD align="right"><asp:panel id="Panel4" runat="server" CssClass="panelButtons" Width="800px">
<asp:button id=btSave tabIndex=3 runat="server" CssClass="butt" Text="Speichern"></asp:button>
<asp:button id=btBack tabIndex=3 runat="server" CssClass="butt" Text="Zurück"></asp:button>
<asp:button id=btLogout tabIndex=3 runat="server" CssClass="butt" Text="Logout"></asp:button>
                        </asp:panel></TD>
                </TR>
                <tr>
                    <TD align="left"><asp:panel id="Panel1" runat="server" CssClass="panelBreadcrumb"></asp:panel><asp:label id="lbBreadCrumb" runat="server" Font-Bold="True"></asp:label></TD>
                </tr>
            </TABLE>
            &nbsp;
            <asp:label id="lbWarten" style="Z-INDEX: 103; LEFT: 24px; POSITION: absolute; TOP: 248px" runat="server"
                Height="40px" ForeColor="Red" Font-Size="Medium" Width="536px">bitte warten...</asp:label><asp:panel id="panelUpload" style="Z-INDEX: 104; LEFT: 24px; POSITION: absolute; TOP: 96px"
                runat="server" Height="104px" Width="528px">
<asp:label id=Label1 runat="server" Width="304px">Dateiauswahl:</asp:label><INPUT 
id=uploadFile1 style="WIDTH: 536px; HEIGHT: 22px" type=file size=70 
runat="server"> <INPUT id=uploadFile2 style="WIDTH: 536px; HEIGHT: 22px" 
type=file size=70 runat="server"> <INPUT id=uploadFile3 
style="WIDTH: 536px; HEIGHT: 22px" type=file size=70 runat="server"> <INPUT 
id=uploadFile4 style="WIDTH: 536px; HEIGHT: 22px" type=file size=70 
runat="server"> <INPUT id=uploadFile5 style="WIDTH: 536px; HEIGHT: 22px" 
type=file size=70 runat="server">
            </asp:panel></form>
        <script language="javascript">

            document.getElementById("lbWarten").style.visibility = "hidden";

            function uploadpop(inForm)
            {
                document.getElementById("lbWarten").style.visibility = "visible";

                if(inForm.uploadFile1 != null)
                {
                    if(    inForm.uploadFile1.value !="" 
                        || inForm.uploadFile2.value !="" 
                        || inForm.uploadFile3.value !="" 
                        || inForm.uploadFile4.value !="" 
                        || inForm.uploadFile5.value !="")
                    {
                        strUniqueID = Math.floor(Math.random() * 1000000) * ((new Date()).getTime() % 1000);                
                        thePos = inForm.action.indexOf("?");
/*
                        if (thePos >= 0)
                            inForm.action = inForm.action.substring(0, thePos);
                        inForm.action += "?guid=" + strUniqueID + "&cancel=1";
*/
                        if (thePos >= 0)
                            inForm.action += "&guid=" + strUniqueID + "&cancel=1";
                        else
                            inForm.action += "?guid=" + strUniqueID + "&cancel=1";

                        window.open("DMProgressBar.aspx?guid=" + strUniqueID,"","toolbar=0,scrollbars=0,location=0,status=0,menubar=0,resizable=0,height=275,width=600,top=70,left=100");
                    }
                }               
                inForm.submit();
                return true;
            }

            function ClearInput()
            {
                node = document.getElementById("panelUpload");
                if(node != null)
                {
//                  node.removeNode(true);
                    node.parentNode.removeChild(node);
                }
                return true;
            }

        </script>
    </body>
</HTML> 
```

我真的不明白，为什么它不起作用。

aspx 上传必须将文件发送到名为 uploads 的临时文件夹中，并且在文件上传后，必须将其发送到根据用户权限保留的 oder 文件夹。我注意到该文件已上传并将其保存在临时文件夹中，但随后什么也没发生，就像我说的那样，我收到了解析错误。

我不知道可能是什么问题，我真的需要一些帮助。

只是一件额外的事情，如果我尝试在 localhost 下运行应用程序，我只会得到网站的主页。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-26T09:59:28.553

似乎有以下原因。

**应用程序所在的文件夹在只读模式下没有“所有人”组。添加“所有人”后它工作正常！**

请查看[文章](https://geonet.esri.com/thread/50693)了解更多详情。

[http://forums.asp.net/t/1004395.aspx?What+causes+this+XML+Parsing+Error+no+element+found](http://forums.asp.net/t/1004395.aspx?What+causes+this+XML+Parsing+Error+no+element+found)

[http://www.c-sharpcorner.com/Forums/Thread/216997/how-to-resolve-xml-parsing-error-no-element-found.aspx](http://www.c-sharpcorner.com/Forums/Thread/216997/how-to-resolve-xml-parsing-error-no-element-found.aspx)

# jquery - 过滤依赖requirejs

> ID：15226005
> 
> 赞同：0
> 
> 时间：2013-03-05T14:13:54.800
> 
> 标签：jquery, .net, backbone.js, requirejs

我的应用程序中有一个主干 /jquery /underscore /requirejs 应用程序，并且有几个级别的视图层次结构。一个主视图正在渲染我的配置文件中设置的几个子视图，这些子视图正在渲染它们在配置文件中设置的子视图，也使用以下语法创建层次结构：

```
'MainView': { deps: ['MainCView'] },
'MainCView': { deps: ['MainContentBView', 'MainFooterView', 'MainHeaderView'] },
'MainContentBView': { deps: ['TopMenuView', 'AdvertView', 'ProductsContentView'] } 
```

我这样做的原因是因为我想在整个应用程序中的一个地方配置我的视图。

问题是如何在定义后根据某些条件过滤这些视图依赖项？

# ormlite-servicestack - 将 IDbConnectionFactory 注入服务类

> ID：15226008
> 
> 赞同：1
> 
> 时间：2013-03-05T14:14:00.727
> 
> 标签：ormlite-servicestack

我今天开始使用 ServiceStack。所以，如果我做错了什么，请告诉我。

我正在尝试将 Db 注入到我的服务类中，为此我正在使用此代码

```
[TestFixture]
public class UserServiceTests
{
    private UserService service;

    [SetUp]
    public void SetUp()
    {
        var appHost = new BasicAppHost();
        var dbFactory = new OrmLiteConnectionFactory(":memory:", false, SqliteDialect.Provider);
        appHost.Container.Register<IDbConnectionFactory>(dbFactory);
        service = new UserService();
        service.SetAppHost(appHost);
    }

    [Test]
    public void Calling_post_method_with_valid_User_saves_it_in_database()
    {
        var User = new User { Name = "Acme Limited" };
        var id = service.Post(User);
        Assert.AreEqual(1, id);
    }
} 
```

有两个问题：1）我遇到异常：

```
Could not load file or assembly 'System.Data.SQLite, Version=1.0.82.0, Culture=neutral, PublicKeyToken=db937bc2d44ff139' or one of its dependencies. The located assembly's manifest definition does not match the assembly reference. (Exception from HRESULT: 0x80131040) 
```

有没有简单的方法来解决这个问题？我们真的需要 SQLite 进行测试吗，是否有可用的 Fake 对象？

2) 编译器警告 - service.SetAppHost(appHost)。SetAppHost 已弃用。如何在不使用 SetAppHost 的情况下将 Db 注入我的服务类？

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T15:23:50.063

听起来您与 Sqlite 存在平台不兼容问题，请确保您为您的机器使用了正确的 Sqlite 包。

As for `service.SetAppHost(appHost)` the [deprecated message](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.ServiceInterface/Service.cs#L31) says to use `service.SetResolver(appHost)` as **IAppHost** also implements `IResolver`, so use that.

# youtube-api - 谷歌 youtube 数据 api v3 youtube.videos.insert 503 错误

> ID：15226011
> 
> 赞同：1
> 
> 时间：2013-03-05T14:14:12.783
> 
> 标签：youtube-api

youtube.videos.insert 503 错误

昨天我可以上传视频文件。但今天我无法通过 google api v3 上传视频文件

正在上传文件...发生可重试的 HTTP 错误 503：

```
{
 "error": {
  "errors": [
   {
    "domain": "global",
    "reason": "backendError",
    "message": "Backend Error"
   }
  ],
  "code": 503,
  "message": "Backend Error"
 }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T18:12:09.763

503 表示 YouTube 服务器后端出现暂时性错误。现在它对我有用。请再试一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T17:49:04.123

抱歉，没有真正回答您的问题，但目前似乎存在“503”后端错误。我在使用 v3 objective-c YouTube API 测试我的 iOS 应用程序时遇到同样的问题 - 我一直遇到相同的 503 错误，20 次上传中只有 2-3 次通过。甚至 Google OS X 示例应用程序也经常失败。后端确实有一些东西......我一周前向 YouTube API 报告了一个错误。

# java - RotateTransition 当前角度 javafx2

> ID：15226014
> 
> 赞同：3
> 
> 时间：2013-03-05T14:14:21.960
> 
> 标签：java, animation, javafx-2

我正在使用 RotateTransition 旋转图像，如果 (x,y) 最初是该图像上一个点的位置，并且该位置将随着图像旋转而不断变化。我想知道在任何给定时间那个点的位置。如何获得该点的新位置？

```
 ImageView wheel= new ImageView();
    wheel.setImage(image);

    rotateTransition = new RotateTransition(Duration.seconds(10), wheel);
    rotateTransition.setFromAngle(0);
    rotateTransition.setToAngle(360);
    rotateTransition.setInterpolator(Interpolator.LINEAR);
    rotateTransition.setCycleCount(Timeline.INDEFINITE); 
```

//我正在遵循的当前方法似乎不准确：

```
 rotateTransition.currentTimeProperty().addListener(
     new ChangeListener<Duration>() {public void changed(ObservableValue<? extends Duration> ov, Duration t, Duration t1) {
            double degree = ((360 * t.toSeconds()) / 10);
            xVal.set(((120) * Math.cos(degree * (Math.PI / 180))) + 162.5);
            yVal.set(((120) * Math.sin(degree * (Math.PI / 180)) + 162.5)); 
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:45:04.457

要获取当前的旋转角度，您应该使用[rotateProperty](http://docs.oracle.com/javafx/2/api/javafx/scene/Node.html#rotateProperty%28%29)的`ImageView`：

```
 wheel.rotateProperty().addListener(new ChangeListener<Number>() {
        @Override
        public void changed(ObservableValue<? extends Number> observable, 
                            Number oldValue, 
                            Number newValue) {
            System.err.println("Rotation of " + newValue + " degrees");
        }
    }); 
```

# ruby-on-rails - 从模型中获取参数

> ID：15226015
> 
> 赞同：1
> 
> 时间：2013-03-05T14:14:22.363
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我很确定有更好的方法来做我想做的事，所以请告诉我。

我有一个*Item*模型，可以卖给某人（有 a`sale_price`和 a `buyer_id`）或传递（不卖给任何人 -`sale_price`零和 no `buyer_id`）。

到目前为止，我只是依靠用户输入适当的价格/买家组合，但我想在项目编辑表单中添加第二个提交按钮，它只是说“通过”。( `<input type="submit" name="pass" value="Pass" />`)。

通过按下该按钮提交后，我想覆盖用户选择的任何内容`sale_price`并`buyer_id`自己设置它们。

我想我应该`:before_save`在 item.rb 中做一个，但我不知道如何从模型中检测按钮 - 或者它是否可能（或建议）。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T14:27:03.473

您可以区分控制器中的提交类型：

```
def create
  item = Item.new(params[:item])

  if params[:commit] == "Pass"
    item.sale_price = nil
    item.buyer_id = nil
  end

  if item.save
    # ...usual rails stuff
  end
end 
```

当然，如果你在控制器中有提交类型，你可以通过虚拟属性将它传递到模型中，如果你愿意，可以使用回调：

```
class Item < ActiveRecord:Model
  attr_accessor :pass

  before_save :reset_sale_price

  private

  def reset_sale_price
    if pass
      self.sale_price = nil
      self.buyer_id = nil
    end
  end
end

class ItemsController < ApplicationController

  def create
    item = Item.new(params[:item])
    item.pass = (params[:commit] == "Pass")

    if item.save
      #... standard rails stuff
    end
  end
end 
```

希望能帮助到你。干杯!

# php - 如何使mysqli连接功能？

> ID：15226019
> 
> 赞同：7
> 
> 时间：2013-03-05T14:14:30.480
> 
> 标签：php, mysql, mysqli, database-connection

我在使用 mysqli 将我连接到数据库的函数时遇到问题。我的目标是`getConnected();`在需要连接的地方输入。

这是代码：

```
function getConnected()
{
    $host = 'localhost';
    $user = 'logintest';
    $pass = 'logintest';
    $db = 'vibo';

    $mysqli = new mysqli($host, $user, $pass, $db);

    if ($mysqli->connect_error) {
        die('Connect Error (' . mysqli_connect_errno() . ') '
            . mysqli_connect_error());
    }
} 
```

`$mysqli`这是我在调用后尝试使用时遇到的错误`getConnected()`：

> 注意：未定义变量：第 19 行 C:\xampp\htdocs\xampp\loginsystem\index.php 中的 mysqli

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-05T14:23:54.063

正如一些用户所建议的（并且是最好的方法），返回 mysqli 实例

```
function getConnected($host,$user,$pass,$db) {

   $mysqli = new mysqli($host, $user, $pass, $db);

   if($mysqli->connect_error) 
     die('Connect Error (' . mysqli_connect_errno() . ') '. mysqli_connect_error());

   return $mysqli;
} 
```

例子：

```
$mysqli = getConnected('localhost','user','password','database'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-21T23:36:14.993

您不需要创建这样的功能。正确完成后，与 mysqli 的连接只需 3 行代码。这种功能的定义和执行将增加两倍。

打开连接时请记住始终遵循三个步骤：

1.  启用 mysqli 错误报告。
2.  创建 mysqli 类的实例。
3.  设置正确的字符集。推荐的一个是`utf8mb4`

如果您想将这 3 行包含在一个函数中，您可以执行以下操作：

```
function getConnected(): \mysqli {
    $host = 'localhost';
    $user = 'logintest';
    $pass = 'logintest';
    $db = 'vibo';

    mysqli_report(MYSQLI_REPORT_ERROR | MYSQLI_REPORT_STRICT);
    $mysqli = new mysqli($host, $user, $pass, $db);
    $mysqli->set_charset('utf8mb4');

    // return the instance of mysqli class
    return $mysqli;
} 
```

但是，硬编码这些值没有多大意义。这些值应该来自环境变量（例如使用[`getenv()`](https://www.php.net/manual/en/function.getenv.php)函数读取）或来自配置文件。例如：

```
function getConnected(): \mysqli {
    mysqli_report(MYSQLI_REPORT_ERROR | MYSQLI_REPORT_STRICT);
    $mysqli = new mysqli(getenv('DB_HOST'), getenv('DB_USER'), getenv('DB_PASS'), getenv('DB_NAME'));
    $mysqli->set_charset('utf8mb4');

    // return the instance of mysqli class
    return $mysqli;
} 
```

# javascript - 条件重定向 URL java

> ID：15226030
> 
> 赞同：0
> 
> 时间：2013-03-05T14:15:10.713
> 
> 标签：javascript

它可以有条件地将当前 URL 重定向到新 URL，这样我就可以编写“一个脚本”并将其复制到同一脚本的所有当前旧 HTML 中。它将帮助那些为旧 URL 添加书签并重定向到新 URL 的用户。

我有一个像

1.  `www.oldsite.com/a1.html`
2.  `www.oldsite.com/a1/5698.html`
3.  `www.oldsite.com/x1.html`
4.  `www.oldsite.com/YY1.html`

并希望获取用户的当前 URL 并使用 location.path 并根据路径（后缀）重定向到 newsite.com，即

1.  `www.oldsite.com/a1.html` 至`www.newsite.com/b1.html`
2.  `www.oldsite.com/a1/5698.html`至`www.newsite.com/b1/5698.html`
3.  `www.oldsite.com/x1.html`至`www.newsite.com/99.html`
4.  `www.oldsite.com/YY1.html` 至`www.newsite.com/ZZ1.html`

我尝试了很多次但失败了！

由于我是 HTML 的新手，任何人都可以帮助我吗？我的网站拥有一百多个旧的 html！

这是我的草稿

```
 <html>
 <head>
 <javascript>
 if window.location.path='/al.html'

  {
 window.location="http://www.newsite.com/b1.html"}

  else if window.location.path='/al/5698.html'

  {
 window.location="http://www.newsite.com/b1/5698.html"}
   .........

 </script>
  </head> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T14:23:39.843

给定

```
import java.net.URI;

URI oldUri; 
```

您可以通过从旧的 uri 创建新的 uri 来进行翻译。

```
URI newUri = new URI(
    oldUri.getScheme(),
    "www.newsite.com",
    translatePath(oldUri.getPath()),
    oldUri.getQuery(),
    oldUri.getFragment()); 
```

您没有提供足够的示例让我知道应该做什么，但是给出了一个类似return`translatePath`的字符串。`"/a1.html"``"/b1.html"`

# iphone - 带有分组单元格的普通 UITableView

> ID：15226033
> 
> 赞同：1
> 
> 时间：2013-03-05T14:15:14.110
> 
> 标签：iphone, ios, uitableview

我正在尝试创建一个 UITableView ，其标题的行为类似于普通 UITableView （即顶部的浮动，直到它们被下一个标题取代，依此类推......

但是单元格本身将对它们具有分组外观。

我已将 TableViewStyle 设置为 UITableViewStylePlain 以获得标题的正确行为。

现在，我认为我唯一的选择是创建图像以用作我自己的自定义单元格的背景。

我将需要一个顶部、底部、中间和单个图像，这些图像将具有圆角以涵盖所有可能性。

还有另一种方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:22:56.937

你已经写了选项 A)。您也可以采取相反的方式（不需要图像，但需要更多逻辑）：

1.  采用`UITableViewStyleGrouped`
2.  在 tableView 顶部添加一个浮动标题视图作为单独的视图
3.  设置`UITableViewDelegate`
4.  通过委托设置标题视图
5.  使用`scrollViewDidScroll:`（tableView 委托也委托 scrollViewDelegate）并检查哪个部分是当前最顶部的部分，将浮动标题更新为其内容并将浮动标题的位置更新为`scrollView.contentOffset`

# javascript - .empty() 当用户输入太快时不起作用

> ID：15226036
> 
> 赞同：-1
> 
> 时间：2013-03-05T14:15:19.803
> 
> 标签：javascript, jquery

创建[了这个](http://www.fbstatussearch.com/)网站。如果搜索框中的字符输入缓慢（显示 5 个结果），则可以正常工作，但是当快速输入时，会显示 5 个结果的倍数，表明这`.empty()`不起作用。请指导。

文件准备好，

```
<script type="text/javascript">
$(document).ready(function () {
$("#search").keyup(function(e){
$("#status").empty();
/*
var keyCode = e.keyCode || e.which;

if(keyCode == 13) {*/
myFunction();
//}
});
$("#status").hide();
$("#more").hide(); 
});
</script> 
```

添加了更多的 JS，var nexturl =""; 变量lastid =“”；变量参数；

```
function myFunction() {
    param = $('#search').val();
    //alert("I am an alert box!");
    if (param != "") {
        $("#status").show();
        //alert("Show ");
        var u = 'https://graph.facebook.com/search/?callback=&limit=5&q='+param;
        $("#data").empty();     //empty the data div
        //alert("emptied?");
        getResults(u);
        $("#more").show(); 
        }

    $("#more").click(function () { 
    $("#status").show();
    //alert("Show ");
    $("#more").hide();  
    pageTracker._trackPageview('/?q=/more');
    var u = nexturl;
    getResults(u);
  });
}
</script> 
```

所涉及的 HTML，

```
<div style="margin-bottom:10px;float:right;">
        <form action="" method="get" id="searchform" onsubmit="return false;">
        <input name="q" type="text" id="search" onClick="this.select();" size="32" maxlength="128" class="txt"  style="padding: 0 5px;" >
        <input type="button" id="hit" value="Search" onclick="myFunction();return false" class="btn">
        </form>
</div>
</div>
<div id="data_container">
<div id="data">
    <div id="status_container">
  <div id="status"><img src="loader.gif" alt="loading facebook status search"/></div>
  </div>
</div>
</div> 
```

getResults() 函数，

```
function getResults(u) {
//$("#status").show();  
$("#data").empty();                                                 // print that we are in
    $.ajax({
        dataType: "jsonp", 
        url: u,
        success: function(res) {                                                        // take an object res
                $("#data").empty(); 
              $("#status").show();                                                      // show status
              $("#more").show();    
              if (res.data.length) {                                                    // check length of res
                                                                    // print if >0
                nexturl = res.paging.next;                                              // calculate next url
                  $.each(res.data, function(i,item){
                    if (item.id != lastid) {
                        lastid = item.id;
                        var html ="<div class=\"post\">";

                        html += "<div class=\"message\"><a href=\"http:\/\/www.facebook.com\/profile.php?id="+item.from.id+"\">"+item.from.name+"</a> ";

                        if (item.message) { 
                            html += item.message+"<\/div>";
                        } else {
                            html += "<\/div>";
                        }
                        if (item.picture) { 
                            html += "<div class=\"image\"><img src=\""+item.picture+"\"></div>";
                        } else {
                            html += "<div class=\"image\"><\/div>";
                        };
                        if (item.link) { 
                            html += "<div class=\"link\"><a href=\""+item.link+"\">"+item.name+"</a></div>";

                            if (item.caption) { 
                                    html += "<div class=\"caption\">"+item.caption+"</div>";
                            };
                            if (item.description) { 
                                    html += "<div class=\"description\">"+item.description+"</div>";
                            };

                        };

                        html += "<div class=\"meta\">";

                        if (item.icon) { 
                            html += "<span class=\"icon\"><img src=\""+item.icon+"\"></span> ";
                        };
                        var t = item.created_time;
                        var time = t.substring(0,19)+"\+00:00";
                        html += "<span class=\"time\">"+$.cuteTime({},time)+"<\/span> ";
                        html += " <\/div>";

                        html +="</div>";
                        $("#data").append(html) ;
                    }
                  });
                    $("#more").appendTo("#data");
                    $("#more").show();
                    $("#status").appendTo("#data");

            } else {
                $("#data").append("<h3 class=\"none\">No entries found. Please try another search.</h3>");
            }; 
        } 

    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:23:51.117

在 Chrome 和 FireFox 中它确实对我有用。它只是随着每个角色继续变化并赶上来——这是典型的。不过，在结果更改之间添加一个短暂的延迟可能是个好主意，这样您就可以更好地跟踪和观察更改以进行测试，或者在 .empty() 触发时向控制台报告以及该选择器的内容是什么之后确保它按您期望的方式工作。

# php - 使用公式从数据库中选择特定的

> ID：15226037
> 
> 赞同：0
> 
> 时间：2013-03-05T14:15:23.480
> 
> 标签：php, forms, select, mysqli, where

嘿，我正在做一个可以买猪的网站，当客户想买猪时，他们可以在猪身上选择他们想要的不同东西。到目前为止，所有的问题都是是或否的问题。例子：

你想让猪胖吗？是 x 否

然后我有一个猪在哪里的数据库，例如，如果它很胖，它会说是或否。但重点是，如果客户选择它想要一个大耳朵的大肥猪，我希望结果只显示胖且耳朵大的猪。

这是我的一些选择代码：

```
<form name="form1" method="post" action="resultat.php">
  <label>Mellem 7 mrd. og 3 år</label><br />
  <input type="radio" name="valg" value="ja" required="required" />ja<br />
  <input type="radio" name="valg" value="nej" required="required" />nej<br />
  <label>Antal smågrise over 10 pr. fødsel</label><br />
  <input type="radio" name="valg2" value="ja" required="required" />ja<br />
  <input type="radio" name="valg2" value="nej" required="required" />nej<br />
  <label>Hurtig vægtforøgelse (over 600 gram pr. dag over 180 dage)</label><br />
  <input type="radio" name="valg3" value="ja" required="required" />ja<br />
  <input type="radio" name="valg3" value="nej" required="required" />nej<br />
  <label>Fedt</label><br />
  <input type="radio" name="valg4" value="ja" required="required" />ja<br />
  <input type="radio" name="valg4" value="nej" required="required" />nej<br />
  <label>Kraftige ben</label><br />
  <input type="radio" name="valg5" value="ja" required="required" />ja<br />
  <input type="radio" name="valg5" value="nej" required="required" />nej<br />
</form> 
```

这是一些 resultat.php 代码：

```
<?php 
  require_once 'dbconn.php'; //forbind til databasen
  // Forklar, hvilke data du vil have
  $sql = "SELECT navn, ung, antal, vaegt, fedt, ben, levende, overlevelse, overlevelsefirst, bornweight FROM grise";
  // Send forespørgslen til databasen og modtag svaret
  $result = $conn->query($sql);
?> 
```

# html - 仅在 HTML 中创建选项卡

> ID：15226039
> 
> 赞同：-2
> 
> 时间：2013-03-05T14:15:32.580
> 
> 标签：html

是否有一种基本方法可以在没有 CSS 和/或 Javascript 和/或 JQuery 的情况下在 HTML 页面中创建多个内容选项卡？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:19:32.733

我不认为这是可能的。JQuery 将是我最好的选择，因为实现很容易。你可以看看JQUERYUI。还有其他 javascript 库可以帮助您轻松实现您想要的。我的下一个选择是 CSS

# classification - 有谁知道如何根据预测生成 AUC/Roc 区域？

> ID：15226043
> 
> 赞同：2
> 
> 时间：2013-03-05T14:15:39.550
> 
> 标签：classification, weka, evaluation, prediction, roc

我知道 weka 中的 AUC/ROC 区域（[http://weka.wikispaces.com/Area+under+the+curve](http://weka.wikispaces.com/Area+under+the+curve)）基于 e Mann Whitney 统计数据（[http://en.wikipedia.org/wiki/Mann -惠特尼_U](http://en.wikipedia.org/wiki/Mann-Whitney_U) )

但我的疑问是，如果我有 10 个标记实例（Y 或 N，二进制目标属性），通过将算法（即 J48）应用于数据集，那么这 10 个实例上有 10 个预测标签。那我到底应该用什么来计算 AUC_Y、AUC_N 和 AUC_Avg？使用预测的排名标签 Y 和 N 还是实际标签（Y' 和 N'）？或者我需要计算TP率和FP率？

谁能给我一个小例子，并指出我应该使用哪些数据来计算基于 Mann Whitney 统计方法的 AUC？提前致谢。

样本数据：

```
inst#    actual predicted  error   PrY     PrN
1        1:y        1:y          *0.973   0.027
2        1:y        1:y          *0.999   0.001
3        2:n        1:y      +   *0.568   0.432
4        2:n        2:n           0.382  *0.618
5        1:y        2:n      +    0.421  *0.579
6        2:n        2:n           0.146  *0.854
7        1:y        1:y          *1       0    
8        1:y        1:y          *0.999   0.001
9        2:n        2:n           0.11   *0.89 
10       1:y        2:n      +    0.377  *0.623 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T20:06:23.783

计算 AUC 是基于您的结果排名。我刚刚阅读了 Mann-Whitney-U 统计数据，我认为这基本上是我在代码中一直这样做的方式。

首先，你需要一些东西来对你的结果进行排名。通常，这是分类器的决策值（例如[，到 SVM 的超平面的距离](https://stats.stackexchange.com/questions/14876/interpreting-distance-from-hyperplane-in-svm)），但 WEKA 主要使用类概率。在您的示例中，PrY 和 PrN 之和为 1，这很好，因此您可以选择其中任何一个，例如 PrY。

然后，您按 PrN 对您的实例进行排名：

```
inst#    actual predicted  error   PrY     PrN
7        1:y        1:y          *1       0    
8        1:y        1:y          *0.999   0.001
2        1:y        1:y          *0.999   0.001
1        1:y        1:y          *0.973   0.027
3        2:n        1:y      +   *0.568   0.432
5        1:y        2:n      +    0.421  *0.579
4        2:n        2:n           0.382  *0.618
10       1:y        2:n      +    0.377  *0.623
6        2:n        2:n           0.146  *0.854
9        2:n        2:n           0.11   *0.89 
```

根据 Wikipedia 关于 Mann-Whitney-U 统计的内容，您现在需要总结每个**实际**班级，它被另一个班级“击败”的频率。对于正实例 (y)，这将是

```
0, 0, 0, 0, 1, 2 => Sum: 3 
```

对于否定的实例 (n)

```
4, 5, 6, 6 => Sum: 21 
```

所以 U_y = 3 和 U_n = 21，检查它：

```
U_y + U_n = 24 = 6 * 4 = #y * #n 
```

AUC_y 然后将是（在[wikipedia](http://en.wikipedia.org/wiki/Mann-Whitney_U#Area-under-curve_.28AUC.29_statistic_for_ROC_curves)之后）

```
AUC_y = U_y / (#y * #n) = 3 / 24 = 0.125
AUC_n = U_n / (#y * #n) = 21 / 24 = 0.875 
```

现在，在这种情况下，我坚信 AUC_n 是您想要的 AUC。我们按升序对 PrN 进行排序，所以 AUC_n 就是我们想要的。

对我们刚刚所做的事情的更直观和图形化的描述是：

我们根据实例的决策值/类别概率对实例进行排序。如果我们按 PrN 升序排序，则积极的应该排在第一位。（如果我们按 PrY 升序排序，负数应该排在第一位。）现在我们画一个图，从坐标 (0,0) 开始。每次我们遇到一个实际的正面实例，我们就画一个单元。每次遇到负例，我们就画一个单位。这条线现在分隔成区域，在 ASCII 艺术中看起来像这样（我会尽快用像样的图像替换它）：

```
|..##|
|.###|
|####|
|####|
|####|
|####| 
```

分隔线是 ROC，它下面的区域（因此得名）是 AUC。这里的 AUC 是 21 个单位，我们需要通过将其除以 24 的总面积来归一化，得到 21/24 = 0.875

您还可以进行已经标准化的整个计算，这相当于将其绘制为 FPR 与 TPR。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-27T21:15:18.377

聚会迟到了，但这是我编写的一些 R 代码，用于根据您的数据 AUC 计算并绘制 ROC。在这种情况下，我使用了您的`actual`和`PrY`字段。希望这可以帮助您了解如何进行计算。

```
true_Y = c(1,1,1,1,2,1,2,1,2,2)
probs = c(1,0.999,0.999,0.973,0.568,0.421,0.382,0.377,0.146,0.11)

getROC_AUC = function(probs, true_Y){
    probsSort = sort(probs, decreasing = TRUE, index.return = TRUE)
    val = unlist(probsSort$x)
    idx = unlist(probsSort$ix)  

    roc_y = true_Y[idx];
    stack_x = cumsum(roc_y == 2)/sum(roc_y == 2)
    stack_y = cumsum(roc_y == 1)/sum(roc_y == 1)    

    auc = sum((stack_x[2:length(roc_y)]-stack_x[1:length(roc_y)-1])*stack_y[2:length(roc_y)])
    return(list(stack_x=stack_x, stack_y=stack_y, auc=auc))
}

aList = getROC_AUC(probs, true_Y) 

stack_x = unlist(aList$stack_x)
stack_y = unlist(aList$stack_y)
auc = unlist(aList$auc)

plot(stack_x, stack_y, type = "l", col = "blue", xlab = "False Positive Rate", ylab = "True Positive Rate", main = "ROC")
axis(1, seq(0.0,1.0,0.1))
axis(2, seq(0.0,1.0,0.1))
abline(h=seq(0.0,1.0,0.1), v=seq(0.0,1.0,0.1), col="gray", lty=3)
legend(0.7, 0.3, sprintf("%3.3f",auc), lty=c(1,1), lwd=c(2.5,2.5), col="blue", title = "AUC") 
```

![在此处输入图像描述](../Images/4e8afc1dd21d4f2ac0de65fa53c3042c.png)

# google-maps - 谷歌地图路线更详细的点

> ID：15226045
> 
> 赞同：0
> 
> 时间：2013-03-05T14:15:44.987
> 
> 标签：google-maps, google-maps-api-3

目前，如果我使用 搜索路线，`DirectionsService`它将返回一条具有 1 条或更多条腿的路线，并且每条腿都包含多个步骤。每一步似乎都对应于道路的转弯。例如，如果我沿着街道 1 行驶 2 公里，而街道 1 完全是一条笔直的道路，那么它将只包含我可以在该街道上穿越的两个点（台阶）。第一步将是沿街 1 的旅程的起点，下一步将是旅程的终点​​。这是有道理的，但不幸的是，我正在用标记为沿着地图的旅程制作动画。当旅途中有很长的直线步骤时，这会导致地图上的巨大跳跃。

有没有办法获得更详细的步骤，以便每个步骤之间的距离（通过道路）或多或少是线性的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T15:16:53.997

您可以沿着折线上的顶点之间的直线移动。

有关执行此操作的一种方法，请参[见此示例](http://www.geocodezip.com/v3_animate_marker_directions.html)。

# javascript - google.maps.geometry.spherical 错误

> ID：15226053
> 
> 赞同：21
> 
> 时间：2013-03-05T14:16:08.597
> 
> 标签：javascript, google-maps, google-maps-api-3

我在谷歌地图上使用几何时遇到了一些麻烦。我收到以下错误：“无法获取未定义或空引用的属性‘球形’。”

这是来自 w3c 的一些代码以及我的一些补充。

```
var x=new google.maps.LatLng(52.395715,4.888916);
var stavanger=new google.maps.LatLng(58.983991,5.734863);
var amsterdam=new google.maps.LatLng(52.395715,4.888916);
var london=new google.maps.LatLng(51.508742,-0.120850);
function initialize()
{
var mapProp = {
  center:x,
  zoom:4,
  mapTypeId:google.maps.MapTypeId.ROADMAP
};

var map=new google.maps.Map(document.getElementById("googleMap"),mapProp);
var myTrip=[stavanger,amsterdam,london];
var flightPath=new google.maps.Polyline({
    path:myTrip,
    strokeColor:"#0000FF",
    strokeOpacity:0.8,
    strokeWeight:2
    });
flightPath.setMap(map);

try{
    var markerpos = google.maps.geometry.spherical.interpolate(flightPath.getAt(0), flightPath.getAt(1), .5);
    // also tried //
    //var Spherical = google.maps.geometry.spherical;
    //var markerpos = Spherical.interpolate(flightPath.getAt(0), flightPath.getAt(1), .5);
    //var markerpos = google.maps.geometry.spherical.interpolate(amsterdam, london, .5);
}
catch(ex){alert(ex);}

var marker = new google.maps.Marker({position: markerpos,
    map: map,  clickable: false
});
} 
```

上面的代码有什么问题？

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2013-03-05T14:24:10.033

您是否使用参数加载了[正确的库](https://developers.google.com/maps/documentation/javascript/libraries)`libraries=`？

```
<script src="https://maps.googleapis.com/maps/api/js?v=3&sensor=false&libraries=geometry"></script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-03-26T12:43:47.787

如果您正在使用`@googlemaps/js-api-loader`，请像这样包含它

```
const loader = new Loader({
  apiKey: "xxxxxxxxxx",
  version: "weekly",
  libraries: ["geometry"], // additional libraries
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-25T13:39:20.363

首先，您需要导入库模块，然后是 auth 密钥模块。我认为这里的问题是在执行库函数时导入库模块没有完成。如果您首先导入身份验证密钥模块，则会在库模块加载未完成时立即调用 initialize() 方法。所以你需要先导入库模块，然后再导入认证模块。

# java - Scanner.scan / 初始化变量

> ID：15226054
> 
> 赞同：1
> 
> 时间：2013-03-05T14:16:10.753
> 
> 标签：java

我有一个简单的小问题，我需要从scanner.scan中读取变量“age”，用户输入一个数字。它一直告诉我初始化它，但为了做到这一点，我需要为变量提供一个整数，我不想这样做。我该如何解决这个问题？

```
import java.util.*;

import java.io.*; 

import java.util.Scanner;

public class Person

{

    public static void main(String[]args) 

    {

    int age;

    Scanner scan = new Scanner(System.in);

    System.out.println("Enter in your age.");

     if (age < 18) 

     {
         System.out.println("Youth is a beautiful thing.");
     } 

     else

     {
        System.out.println("Age is just a state of mind.");
     }

}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T14:19:03.820

您必须阅读`age`. 见下文。

```
import java.util.*;
import java.io.*; 
import java.util.Scanner;
public class Person
{
   public static void main(String[]args) 
   {
      int age;
      Scanner scan = new Scanner(System.in);

      System.out.println("Enter in your age.");
      age = scan.nextInt(); <---- **//This is what you are missing**

      if (age < 18) 
      {
         System.out.println("Youth is a beautiful thing.");
      } 

      else
      {
         System.out.println("Age is just a state of mind.");
      }
   }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-05T14:20:07.357

在 System.out.println("输入你的年龄。");

```
 age = scan.nextInt(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-05T14:19:17.230

你没有`age`在任何地方阅读。为此，请在初始化扫描后执行以下操作。

```
age = scan.nextInt(); 
```

# java - JPA 一个字段依赖于同一张表中的另一个字段

> ID：15226062
> 
> 赞同：3
> 
> 时间：2013-03-05T14:16:50.833
> 
> 标签：java, jpa

我有一个有两个字段的类

```
@Column(name = "transactionDate", nullable = true)
private Date transactionDate;

@Column(name = "nextTransactionDate", nullable = true)
private Date nextTransactionDate

-- 
```

这两个字段都可以为空。但如果 transactionDate 不为 null，则 nextTransactionDate 不得为 null。如何使用 JPA 实现字段之间的上述关系？任何代码片段，链接将不胜感激。

注意：我使用的是 JPA 而不是 Hibernate。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T15:31:57.200

您可以在对象模型或应用程序中验证这一点，而不是通过数据库约束。您还可以通过自己的 DDL 脚本在数据库中定义自己的检查约束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T03:03:38.490

最好在 DAO 或服务层对 biz 逻辑进行编码，而不是在 ORM 级别定义它。JPA 和 ORM 工具只是为了解决持久性问题而不是商业逻辑问题而设计的。

# php - 如果在第一个下拉列表中选择了一个值（使用变量），则显示第二个下拉列表？

> ID：15226065
> 
> 赞同：0
> 
> 时间：2013-03-05T14:16:52.343
> 
> 标签：php, javascript, jquery

有什么方法可以在下拉列表中选择某个值并根据该选择显示第二个下拉列表？我知道如何只用普通的单词来做，但是如果我使用变量名呢？

```
University Name: <select name="university" id="university">
<?php 
    while($row = mysql_fetch_array($uniName)) {
        echo "<option>" . $row['uni_name'] . "</option>"; 
    }
?> 
</select>
<br/>
Course Name: <select name='course' id='course'>
<?php 
    while($row = mysql_fetch_array($courseNames)) {
        echo "<option>" . $row['course_name'] . "</option>"; 
    }
?>
</select> 
```

如您所见，在第一个下拉列表中，我添加了从数据库中检索到的所有大学名称。我对课程也做了同样的事情。

现在我该如何修改下面的代码：

```
$(document).ready(function() {
    $('#course').hide();

    $('#university').change(function () {
        if ($('#university option:selected').text() == "Harvard University"){
            $('#course').fadeIn('slow');
        }
        else { 
            $('#course').fadeOut('slow');
        }
    });
}); 
```

我想根据用户选择的内容放一个变量，而不是“哈佛大学”。像 $university_name 之类的东西，然后我将创建一个新查询并仅显示属于某个 $university_name 的课程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T14:28:12.780

正如我在评论中已经说过的，我建议使用 AJAX 来填充该`course`框。

```
$.ajax("getCourses.php", {
    data: { UID: uid },
    type: 'POST',
    done: function(result) {
        $("#course").html(result);
}); 
```

这将用输出的任何内容填充选择标签`getCourses`。

UID 当然是相关大学的 ID。

[此页面](http://api.jquery.com/jQuery.ajax/)包含您需要的所有信息。如需更多信息和示例，Google 是您的朋友 :)

# android - 在片段中使用 Google Map v2 的推荐方法是什么？

> ID：15226067
> 
> 赞同：17
> 
> 时间：2013-03-05T14:16:56.750
> 
> 标签：android, android-mapview, android-maps, android-maps-v2

我想使用自定义布局在片段内添加地图。

1.  我可以使用 ChildFragmentManager 来添加 SupportMapFragment。我目前正在使用这种方法。但是它有缺点，因为子片段事务是异步的，并且很难保证 getMap 不会返回 null。
2.  另一种方法是从 super 扩展 SupportMapFragment 存储 mapView`onCreateView`

    `mapView = super.onCreateView(inflater, container, savedInstanceState);`

    并将其插入到膨胀的布局中。主要问题是片段尝试从保存的状态恢复 Google Maps SDK 在内部崩溃。

有没有其他方法可以解决这个问题。如果 Google Map 团队的某个人会推荐正确的方法，那就太好了，因为您没有在示例中包含类似的内容。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-07T21:40:19.320

所有`FragmentTransaction`s 都是异步的。如果您希望您的交易立即发生，您必须像这样强制他们完成：

```
getChildFragmentManager().beginTransaction.add(R.id.container, new MyMapFragment(), "MyMapFragment").commit();
getChildFragmentManager().executePendingTransactions();
/* getMap() should not return null here */ 
```

来自[Android 开发者网站](http://developer.android.com/reference/android/app/FragmentManager.html#executePendingTransactions%28%29)：

> 在 a`FragmentTransaction`提交后`FragmentTransaction.commit()`，它被安排在进程的主线程上异步执行。如果您想立即执行任何此类挂起的操作，您可以调用此函数（仅从主线程）来执行此操作。请注意，所有回调和其他相关行为都将在此调用中完成，因此请注意从何处调用它。
> 
> **返回**
> 如果有任何待执行的事务要执行，则返回 true。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T04:24:39.660

您可以在 Fragment（或 Activity）中使用[MapView](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/MapView)，这将允许您使用所需的任何布局。

即您的布局可能如下所示：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <com.google.android.gms.maps.MapView
        android:id="@+id/map"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

</FrameLayout> 
```

您还需要将 Fragment 的生命周期方法（例如 onCreate、onResume 等）转发到 MapView。

唯一的区别（似乎是 Google Maps 中的错误？）是您还需要手动初始化 Google Maps：

```
private void setUpMapIfNeeded() {
    if (mMap == null) {
        mMap = mMapView.getMap();
        if (mMap != null) {
            // Thought official docs says that it is not necessary to call
            // initialize() method if we got not-null GoogleMap instance from
            // getMap() method it seems to be wrong in case of MapView class.
            try {
                MapsInitializer.initialize(getActivity());
                setUpMap(mMap);
            } catch (GooglePlayServicesNotAvailableException impossible) {
                mMap = null;
            }
        }
    }
} 
```

# javascript - 动态页面 (jQuery) 未正确加载 javascript

> ID：15226074
> 
> 赞同：0
> 
> 时间：2013-03-05T14:17:18.053
> 
> 标签：javascript, jquery, html, css

我目前正在编写一个小型网站，并且刚刚修改了[此处](http://css-tricks.com/dynamic-page-replacing-content/)找到的教程以使动态内容加载工作。您会在主页上看到，如果您单击链接，视图将展开以显示其下方的视频，但是如果您使用左侧边栏（最高评分）导航到同一页面，您将看到所有链接已扩展，我无法弄清楚出了什么问题，有什么想法吗？

网站在[这里](http://drue.co.uk/1site/index.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T14:21:21.120

您在 scripts.js 中的代码（第 67 行）：

```
$("nav a[href="+newHash+"]").addClass("link2currentpage"); 
```

导致以下错误：

```
Uncaught Error: Syntax error, unrecognized expression: [href=index.html] 
```

您需要在您的 href 周围加上引号：

```
$("nav a[href='"+newHash+"']").addClass("link2currentpage"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T14:25:04.283

折叠可扩展元素 ( `prepareList`) 的函数只调用一次 - 当 DOM 准备好时。

当您使用侧边栏导航时，页面不会刷新，因此不会再次调用该函数。

添加`prepareList()`到`$mainContent.fadeIn`回调（您当前拥有的位置`/* Stop loading animation */`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T14:21:12.770

你有一个错误：

> 不安全的 JavaScript 尝试从 URL http://www.youtube.com/embed/GaoLU6zKaws?rel=0 的框架访问具有 URL [http://drue.co.uk/1site/index.html](http://www.youtube.com/embed/GaoLU6zKaws?rel=0)[的](http://drue.co.uk/1site/index.html)框架 。域、协议和端口必须匹配。

出于安全原因，您不能在 Javascript 中发出跨站点 Ajax 请求。

您可以使用 YouTube 的 API 添加嵌入式播放器：[https ://developers.google.com/youtube/youtube_player_demo](https://developers.google.com/youtube/youtube_player_demo)

# backbone.js - 与backbone.js 的简单rails 集成

> ID：15226075
> 
> 赞同：0
> 
> 时间：2013-03-05T14:17:19.723
> 
> 标签：backbone.js, ruby-on-rails-3.2

使用 Rails 和主干呈现第一页时遇到问题。请假设我已正确安装并运行所有 gem。大多数咖啡脚本文件是使用“rails g主干：脚手架学生”生成的，但我更改了一些文件和目录结构。这只是为了尝试理解流程而不是其他任何事情。我还在数据库中加载了一些学生数据。最后，当这个 Rails 应用程序被部署（开发）并且我访问 localhost:3000 时，我没有收到初始化函数中的警报。

这是文件。

* * *

应用程序/模型/学生.rb

```
class Student < ActiveRecord::Base
  attr_accessible :dob, :email, :name, :phone_number
end 
```

* * *

应用程序/控制器/students_controller.rb

```
class StudentsController < ApplicationController
  respond_to :html, :json

  def index
    respond_with (@students = Student.all)
  end
end 
```

* * *

配置/路由.rb

```
School::Application.routes.draw do

  resources :students

  root :to => 'students#index' 
```

* * *

应用程序/视图/布局/application.html.erb

```
<!DOCTYPE html>
<html>
<head>
  <title>School</title>
  <%= stylesheet_link_tag    "application", :media => "all" %>
  <%= javascript_include_tag "application" %>
  <%= csrf_meta_tags %>
</head>
<body>
  <tbody>
    <div id="students">
      <%= yield %>
    </div>
  </tbody>
</body>
</html> 
```

* * *

应用程序/视图/学生/index.html.erb

```
<%= content_for :javascript do %>
  <%= javascript_tag do %>
    window.School.initialize({ students: <%= @students.to_json %> });
  <% end %>
<% end %> 
```

* * *

应用程序/资产/javascripts/application.js

```
//
//= require jquery
//= require jquery_ujs
//= require jquery-ui-1.8.18.custom.min
//
//= require underscore
//= require json2
//= require backbone
//= require backbone_rails_sync
//= require backbone_datalink
//= require backbone-forms
//= require school
//= require_tree ./models
//= require_tree ./collections
//= require_tree ./views
//= require_tree ./routers
//= require_tree ../templates
//= require_tree . 
```

* * *

应用程序/资产/javascripts/school.js.coffee

```
#= require_self
#= require_tree ../templates
#= require_tree ./models
#= require_tree ./collections
#= require_tree ./views
#= require_tree ./routers

window.School =
  Models: {}
  Collections: {}
  Routers: {}
  Views: {}
  initialize: (data) -> alert 'Hello for rails' 
```

* * *

应用程序/资产/javascripts/collections/students.js.coffee

```
class School.Collections.StudentsCollection extends Backbone.Collection
  model: School.Models.Student
  url: '/students' 
```

* * *

应用程序/资产/javascripts/models/student.js.coffee

```
class School.Models.Student extends Backbone.Model
  paramRoot: 'student' 
```

* * *

应用程序/资产/javascripts/路由器/students_router.js.coffee

```
class School.Routers.StudentsRouter extends Backbone.Router
  initialize: (options) ->
    @students = new School.Collections.StudentsCollection()
    @students.reset options.students

  routes:
    "index"    : "index"
    ".*"       : "index"

  index: ->
    @view = new School.Views.Students.IndexView(students: @students)
    $("#students").html(@view.render().el) 
```

* * *

应用程序/资产/javascripts/views/students/index_view.js.coffee

```
School.Views.Students ||= {}

class School.Views.Students.IndexView extends Backbone.View
  template: JST["templates/students/index"]

  initialize: () ->
    @options.students.bind('reset', @addAll)

  addAll: () =>
    @options.students.each(@addOne)

  addOne: (student) =>
    view = new School.Views.Students.StudentView({model : student})
    @$("tbody").append(view.render().el)

  render: =>
    @$el.html(@template(students: @options.students.toJSON() ))
    @addAll()

    return this 
```

* * *

应用程序/资产/模板/学生/index.jst.ejs

```
<h1>Listing students</h1>

<table id="students-table">
  <tr>
    <th>Name</th>
    <th>DOB</th>
    <th>Email</th>
  </tr>
</table> 
```

* * *

html输出

```
<!DOCTYPE html>
<html>
<head>
  <title>School</title>
  <link href="/assets/application.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/students.css?body=1" media="all" rel="stylesheet" type="text/css" />
  <script src="/assets/jquery.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery_ujs.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery-ui-1.8.18.custom.min.js?body=1" type="text/javascript"></script>
<script src="/assets/underscore.js?body=1" type="text/javascript"></script>
<script src="/assets/json2.js?body=1" type="text/javascript"></script>
<script src="/assets/backbone.js?body=1" type="text/javascript"></script>
<script src="/assets/backbone_rails_sync.js?body=1" type="text/javascript"></script>
<script src="/assets/backbone_datalink.js?body=1" type="text/javascript"></script>
<script src="/assets/backbone-forms.js?body=1" type="text/javascript"></script>
<script src="/assets/school.js?body=1" type="text/javascript"></script>
<script src="/assets/students/edit.js?body=1" type="text/javascript"></script>
<script src="/assets/students/index.js?body=1" type="text/javascript"></script>
<script src="/assets/students/new.js?body=1" type="text/javascript"></script>
<script src="/assets/students/show.js?body=1" type="text/javascript"></script>
<script src="/assets/students/student.js?body=1" type="text/javascript"></script>
<script src="/assets/models/student.js?body=1" type="text/javascript"></script>
<script src="/assets/collections/students.js?body=1" type="text/javascript"></script>
<script src="/assets/views/students/edit_view.js?body=1" type="text/javascript"></script>
<script src="/assets/views/students/index_view.js?body=1" type="text/javascript"></script>
<script src="/assets/views/students/new_view.js?body=1" type="text/javascript"></script>
<script src="/assets/views/students/show_view.js?body=1" type="text/javascript"></script>
<script src="/assets/views/students/student_view.js?body=1" type="text/javascript"></script>
<script src="/assets/routers/students_router.js?body=1" type="text/javascript"></script>
<script src="/assets/application.js?body=1" type="text/javascript"></script>
  <meta content="authenticity_token" name="csrf-param" />
<meta content="46vcYK8H3HIUfZh9wfu+AtzCKs+/2TnESA2ILxhFx0E=" name="csrf-token" />
</head>
<body>
  <tbody>
  <div id="students">

  </div>
  </tbody>
</body>
</html> 
```

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T12:55:09.303

你有几个看似相关和不相关的问题。

1.  您的索引未正确呈现的原因是因为您有一个不存在的命名收益的内容块。要开始`<%= content_for :javascript do %>`工作，请将以下内容添加到`application.html.erb`：

    `<%= yield :javascript %>`

    但是，这将使您的代码显示出来，它很可能不会让它正确运行。

2.  由于您正在使用**rails-backbone** gem 并利用模板，您只需在 index.html.erb 中包含以下内容：

    ```
     <div id="students"></div> 
    ```

*然后使用以下命令在index.html.erb*中实例化您的骨干路由器：

```
<script type="text/javascript">
  $(function(){
   try {
     window.SchoolRouter = new School.Routers.StudentsRouter({ students: <%= @students.to_json %> });
     backbone.history.start();
   }catch(e){
     alert(e); // alert so that you see it.
   }
  });
</script> 
```

当涉及到 JavaScript 时，请确保您在浏览器中使用 FireBug 或开发面板。*console.log()*是你最好的朋友。

# c# - Visual Studio 调试器挂起，无法从 w3wp 分离

> ID：15226078
> 
> 赞同：10
> 
> 时间：2013-03-05T14:17:24.013
> 
> 标签：c#, visual-studio-2012, visual-studio-debugging, freeze

我继承了一个庞大而陈旧的代码库，我正在经历一种我从未见过的行为。有时，在调试时，如果我在 Watch 窗口中浏览对象或集合，调试器会挂起。它始终是相同的位置、相同的对象类型等。大约 15 秒后，Visual Studio 回到我身边，但调试器不再工作，直到我重新启动调试会话。当我停止调试器时，我得到：

```
"Cannot detach from one or more processes: [6088] w3wp.exe: 
All outstanding func-evals have not completed, detaching is not allowed 
at this time." 
```

我必须终止该过程才能继续。

我已经阅读了足够多的关于这个问题的理论，认为它与线程有关，但那是我头上的几英尺。我想知道是否有人遇到过这种情况，如何找出具体问题，最重要的是如何预防。我什至会采取一个解决方案来阻止调试器进入该分支，以免破坏我的调试器，因为这很烦人。

欢迎任何和所有的建议。由于工作要求，我不能分享很多代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T14:21:28.843

这可能是由您尝试调用的代码中的无限递归/循环引起的，但您可以通过使用此处命名空间中的一些“调试器...”属性来绕过该问题：[System.Diagnostics](http://msdn.microsoft.com/en-us/library/15t15zda.aspx) which告诉调试器不要进入等。

# java - 线程处于 RUNNABLE 状态但堆栈跟踪显示它正在处理？

> ID：15226080
> 
> 赞同：1
> 
> 时间：2013-03-05T14:17:26.737
> 
> 标签：java, multithreading, performance, stack-trace

在为 Java 应用程序进行*线程转储*后，几个线程快照呈现如下：

```
Thread t@384
   java.lang.Thread.State: RUNNABLE
    at xmlpdf.text.Word.allocateArrays(Word.java:205)
    at xmlpdf.text.Word.calculateWidth(Word.java:237)
    at xmlpdf.text.TextFormatter.format(TextFormatter.java:167)
    at xmlpdf.text.TextFormatter.formatToWidthImpl(TextFormatter.java:116)
    at xmlpdf.text.TextBlock.formatToWidthImpl(TextBlock.java:71)
    at xmlpdf.tables.TextCell.formatToWidthImpl(TextCell.java:45)
    at xmlpdf.tables.Cell.formatToWidth(Cell.java:349)
    at xmlpdf.tables.Row.assignCellWidths(Row.java:97)
    at xmlpdf.tables.Table.layout(Table.java:354)
    at xmlpdf.tables.Table.formatRowsToWidth(Table.java:329)
    at xmlpdf.tables.Table.formatToWidthImpl(Table.java:373)
    at xmlpdf.Block.formatToWidth(Block.java:57)
    at xmlpdf.renderer.Page.formatWidthAndHeight(Page.java:200)
    at xmlpdf.renderer.Page.addBlockWhichIsNotFooterWholePagesOnly(Page.java:1026)
    ..... 
```

*几个相同的线程（由Thread Name*标识）处于完全相同的状态。

仅供参考，通过 JMX 检查还显示这些线程运行了 4 小时。

**问题：**

一个线程怎么会处于某种`RUNNABLE`状态，但`Stack Trace`它却显示它正在做某事？

我认为`RUNNABLE`总是意味着线程仅**可**用于处理任何新任务而不是处理任务。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T14:20:40.250

Thread.State.RUNNABLE API：*处于可运行状态的线程正在 Java 虚拟机中执行，但它可能正在等待来自操作系统的其他资源，例如处理器*

# parsing - “默认值”包含什么？

> ID：15226086
> 
> 赞同：0
> 
> 时间：2013-03-05T14:17:47.073
> 
> 标签：parsing, ecmascript-5, abstract-syntax-tree, spidermonkey

我正在使用**[Esprima](http://esprima.org)**解析器，它输出与[Mozilla Spider Monkey Parser API](https://developer.mozilla.org/en-US/docs/SpiderMonkey/Parser_API)兼容的[AST](http://en.wikipedia.org/wiki/Abstract_syntax_tree)格式。

在**[Mozilla Docs](https://developer.mozilla.org/en-US/docs/SpiderMonkey/Parser_API#Functions)**中，它将`Function`节点指定为：

```
interface Function <: Node {
    id: Identifier | null;
    params: [ Pattern ];
    defaults: [ Expression ];
    rest: Identifier | null;
    body: BlockStatement | Expression;
    generator: boolean;
    expression: boolean;
} 
```

**财产将`defaults`包含什么？**它总是显示为一个空数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T05:44:27.910

Mozilla JS AST 的默认值包含 ES6 默认参数值。

例如，

```
 function t(i = 20) { }

defaults will be [{ type: 'Literal', value: 20 }]. 
```

因为它是基于 ES6 草案的，所以 Esprima master 分支无法识别它。

# android - 我有一个查询要从 res > raw 的 raw 目录播放 wave 文件

> ID：15226094
> 
> 赞同：0
> 
> 时间：2013-03-05T14:18:14.620
> 
> 标签：android

我有一个关于从 res > raw 的 raw 目录播放 wave 文件的查询，我在按钮单击事件上编写了一个代码，这是我的代码

```
public void buttonOnclick(View v) {         
    try {           
        MediaPlayer mMediaPlayer = new MediaPlayer();           
        mMediaPlayer = MediaPlayer.create(this, R.raw.sc1malf);
        mMediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
        mMediaPlayer.setLooping(true);          
        mMediaPlayer.start();                   
    } catch(Exception e) {           

    }   
} 
```

但此代码不适用于三星 android 手机，任何人都可以更正此代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:21:39.073

尝试把`mMediaPlayer.prepare();`之前`start()`。

# inno-setup - Inno Setup - 如何在安装过程中读取 INF 文件

> ID：15226096
> 
> 赞同：5
> 
> 时间：2013-03-05T14:18:16.367
> 
> 标签：inno-setup, inf

在设置过程中，我需要知道如何从 INF 文件 [.inf] 中读取值。我希望安装程序检查我要更新的程序版本，该程序版本不存储在注册表或任何其他文件中，仅在 .inf 文件中。然后必须从中获取版本。

我得到了你的答案，@Tlama，我不能使用 DLL 来获取软件的版本。该程序仅将当前版本保存在 INF 文件中。

我想做的是让安装程序检查我正在使用的软件的当前版本，并在标签文本中显示该版本。

inf信息是这样的：

```
NetVersion=1.1.1.1
PatchVersion=2.0.1
ProductName=SoftwareX 
```

我只需要 PatchVersion 在它说版本之后显示：####：

![在此处输入图像描述](../Images/0ecb4c6557b34eb029bc16832b1288d9.png)

这是我要修复的代码：

```
function GetInfsam: String;
var
  sVersion : String;
Begin
  sVersion := '';
  GetIniString('', 'PatchVersion', 'sVersion', '{app}\Sam.inf');
  Result := sVersion;
end;

Procedure InitializeWizard7();
var
  L2Ver1 : Tlabel;
  L2Ver2 : Tlabel;
Begin
  L2Ver1:=  TLabel.Create(WizardForm);
  L2Ver1.Transparent:= True;
  L2Ver1.AutoSize:= False;
  L2Ver1.WordWrap:= True;
  L2Ver1.Font.name:= 'Agency FB';
  L2Ver1.Font.Size:= 12;
  L2Ver1.Font.Color:= clwhite;
  L2Ver1.Caption:= 'Version:';
  L2Ver1.Parent:= WizardForm.SelectdirPage;
  L2Ver1.Left := 5;
  L2Ver1.top := 260;
  L2Ver1.Width := 150;
  L2Ver1.Height := 40;

  L2Ver2:=  TLabel.Create(WizardForm);
  L2Ver2.Transparent:= True;
  L2Ver2.AutoSize:= False;
  L2Ver2.WordWrap:= True;
  L2Ver2.Font.name:= 'Agency FB';
  L2Ver2.Font.Size:= 12;
  L2Ver2.Font.Color:= clwhite;
  L2Ver2.Caption:= GetInfsam;
  L2Ver2.Parent:= WizardForm.SelectdirPage;
  L2Ver2.Left := L2Ver1.Width + L2Ver1.Left + 8;
  L2Ver2.top := 260;
  L2Ver2.Width := 100;
  L2Ver2.Height := 40;
End; 
```

请，我需要帮助来修复我的代码。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-05T14:24:24.533

## 如何读取 INF 文件？

INF 文件只是一种带有[`specified syntax`](http://msdn.microsoft.com/en-us/library/aa741215%28v=vs.85%29.aspx). 因此，要使用 INF 文件，您需要将它们视为普通的 INI 文件。假设你有一个这样的 INF 文件：

```
[Add.Code]
File.dll=File.dll

[File.dll]
File=http://www.code.com/file.dll
FileVersion=1,0,0,143 
```

[`FileVersion`](http://msdn.microsoft.com/en-us/library/aa741215%28v=vs.85%29.aspx#keys)您可以使用以下方式读取密钥[`GetIniString`](http://jrsoftware.org/ishelp/topic_isxfunc_getinistring.htm)：

```
procedure InitializeWizard;
var
  Version: string;
begin
  Version := GetIniString('File.dll', 'FileVersion', '', 'c:\File.inf');
  if Version <> '' then
    MsgBox('File version: ' + Version, mbInformation, MB_OK);
end; 
```

## 更新：

**1.格式错误的INF文件**

根据您的更新，如果您的 INF 文件的内容如下所示：

```
NetVersion=1.1.1.1
PatchVersion=2.0.1
ProductName=SoftwareX 
```

那么它不是一个格式正确的 INF 文件，而是一个以 INF 扩展名保存的名称值对文本文件。真实 INF 文件必须`[]`为每个键值集都有一个有效部分，但您的文件中缺少此部分。

**2\. 空Section参数值不能调用GetIniString函数**

您不能[`GetIniString`](http://jrsoftware.org/ishelp/topic_isxfunc_getinistring.htm)使用空`Section`参数值调用函数，因为对于内部调用的[`GetPrivateProfileString`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724353%28v=vs.85%29.aspx)函数，这意味着返回给定文件的所有部分名称，而不是指定键的值。例如下面的调用是无效的，因为第一个参数`Section`不能为空：

```
GetIniString('', 'KeyName', 'Default', 'c:\File.xxx'); 
```

**3\. 如何使用名称值对文本文件？**

您只需像使用文本文件一样使用该文件。对于键值文本文件处理将是理想的使用`TStringList`类，或者至少在 Delphi 中。不幸的是，在 InnoSetup 中，`TStringList`该类没有发布键值内容操作所需的属性，因此您需要制作自己的键值文本文件解析功能。这是获取给定键值的方法。因为键值分隔符应该是`=`符号。此函数在成功找到`AKeyName`给定`AFileName`文件中的键时返回键值`ADefault`，失败时返回默认值：

```
function GetKeyValue(const AKeyName, AFileName, ADefault: string): string;
var  
  I: Integer;
  KeyPos: Integer;
  KeyFull: string;
  FileLines: TArrayOfString;
begin
  Result := ADefault;
  if LoadStringsFromFile(AFileName, FileLines) then
  begin
    KeyFull := AKeyName + '=';
    for I := 0 to GetArrayLength(FileLines) - 1 do
    begin
      FileLines[I] := TrimLeft(FileLines[I]);
      KeyPos := Pos(KeyFull, FileLines[I]);
      if KeyPos > 0 then
      begin
        Result := Copy(FileLines[I], KeyPos + Length(AKeyName) + 1, MaxInt);
        Break;
      end;
    end;
  end;
end; 
```

要从当前选择的安装路径中预期的文件中读取`PatchVersion`密钥的值，`Sam.inf`您可以使用类似的东西。每当您的用户更改目录编辑框中的文本以及将显示目录选择页面时，此脚本将更新标签值：

```
var
  // target version label must be declared globally
  L2Ver2: TLabel;

procedure DirEditChange(Sender: TObject);
var
  FilePath: string;
begin
  // assign the expected INF file path
  FilePath := AddBackslash(WizardForm.DirEdit.Text) + 'Sam.inf';
  // read the PatchVersion key value, return N/A if not found
  L2Ver2.Caption := GetKeyValue('PatchVersion', FilePath, 'N/A');
end;

procedure InitializeWizard;
begin
  // create the target label as before
  L2Ver2 := TLabel.Create(WizardForm);
  ...
  // bind the DirEditChange method to the directory edit's OnChange event
  WizardForm.DirEdit.OnChange := @DirEditChange;  
end;

procedure CurPageChanged(CurPageID: Integer);
begin
  // if the page has been turned to the select directory page, update the
  // label caption by firing the assigned OnChange event method manually
  if (CurPageID = wpSelectDir) then
    DirEditChange(nil);
end; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T14:24:59.167

我所有的 INF 文件都具有类似于 INI 文件的结构。如果这也是你的情况，我建议你打开你的 INF，就好像它是 INI 一样，使用（如 TLama 建议的那样）

*在设置功能中：*

```
function GetIniInt(const Section, Key: String; const Default, Min, Max: Longint; const Filename: String): Longint;
function GetIniString(const Section, Key, Default, Filename: String): String; 
```

*在预处理器中：*

```
str ReadIni(str 1, str 2, str 3, str? 4) 
```

**说明** *（来自 Inno Setup 帮助）*

从 INI 文件中读取值。参数 1 必须是 INI 文件的名称，参数 2 – INI 文件中某个节的名称，第三个参数是要读取的节中的键。最后一个可选参数可用于提供失败时返回的默认值，如果省略，则返回空字符串。

# actionscript-3 - 如何将动态文本保存在框架中，以便文本在回到框架时出现？

> ID：15226101
> 
> 赞同：0
> 
> 时间：2013-03-05T14:18:22.233
> 
> 标签：actionscript-3

我在框架 1 中有一个动态文本。假设动态文本的实例是 myText。动态文本中的文本将根据某些事件而改变。我提供了一个按钮转到下一帧并提供另一个按钮返回到第 1 帧（使用 prevFrame() 和 nextFrame() ）我想要的是当我们回到第 1 帧时，在我们离开帧之前的动态文本中的文本1 还会在那里。

我试图将文本保存在数组中的动态文本中，但是当我“单击”按钮返回到第 1 帧 [usinf prevFrame()] 时，数组中的内容为空，但如果我有一个按钮在其他框架中并尝试跟踪数组，文本在其中..

我这样做正确吗？或任何想法如何做到这一点？

谢谢你..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T15:12:49.273

也许你在进入第一帧时重新初始化了数组。创建一个全局变量并在设置它的值时检查未定义；即var txt；if ( undefined == txt ) { txt = "文本"; }

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T15:19:41.043

在 btn1.press 上做

```
foo=myText.text
nextFrame 
```

在 btn2.press 上做

```
prevFrame
if (foo!=undefined)
    myText.text = foo 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T08:50:16.970

您可能正在初始化第 1 帧中的数组。检查数组是否已经初始化，如果已经初始化，请不要初始化。我假设你在第一帧中有这样的东西`var arr = new Array();`，所以你需要添加检查

```
if(arr == null)
  arr = new Array(); 
```

# javascript - jqueryui 小部件工厂更改方法

> ID：15226104
> 
> 赞同：0
> 
> 时间：2013-03-05T14:18:35.733
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-widget-factory

我正在编写一个 jqueryui 小部件，我想在小部件更改时获取一些小部件数据（使用 _trigger）。我使用的小部件如下：

```
$("#myDiv").myWidget({
    change: function(e) {
        alert($("#filter").myWidget('getWidgetData'));
        // do something with the widget data.
    }
}); 
```

此代码有效（当小部件调用 _trigger 时，警报会触发并显示小部件数据）。但是，这是在更改回调中获取小部件数据的正确/最佳方式吗？例如，我似乎无法调用 this.getWidgetData 或 e.getWidgetData。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-10T11:29:23.437

您可以将数据附加到您触发的更改事件。你应该有类似的东西：

```
this._trigger('change', e); 
```

并且可以使用：

```
this._trigger('change', e, { widgetData: this.getWidgetData() }); 
```

该`_trigger`函数接受[文档](http://api.jqueryui.com/jquery.widget/#method-_trigger)`A hash of data associated with the event.`中描述的第三个参数。

您的代码将变为：

```
$("#myDiv").myWidget({
    change: function(e, data) {
        alert(data.widgetData);
        // do something with the widget data.
    }
}); 
```

# javascript - JS确认后执行post方法

> ID：15226120
> 
> 赞同：1
> 
> 时间：2013-03-05T14:19:12.693
> 
> 标签：javascript, html

我正在使用ASP **.Net MVC 4****剃刀**

在表单上，​​在提交操作中，我想设置 javascript 的确认对话框。如果我单击“确定”，将执行发布方法。否则不会。所以我用：

```
<td ><input type="submit" value="Process" name="btnProcess" onclick="confirm('Proceed?')"/></td> 
```

但点击**取消**后，它正在执行控制器。我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T14:20:16.107

```
<td ><input type="submit" value="Process" name="btnProcess" onclick="return confirm('Proceed?')"/></td> 
```

# ios - iOS：如何从传递的图像字符串中填充按钮图像

> ID：15226122
> 
> 赞同：0
> 
> 时间：2013-03-05T14:19:15.810
> 
> 标签：ios, objective-c

目前我有一个`RootViewController`和一个`PopViewController`（popover segue）。

在`RootViewController`我有一个`imageView`(*card) 中，它确实填充了 `NSString *value`来自`PopViewController`.

我还有一个`Button`(*cardButton)，我真的希望在其中填充这个字符串生成的图像文件。

根视图控制器.m

```
- (void)dismissPop:(NSString *)value {
NSString *imagefile;
imagefile = [NSString stringWithFormat:@"%@.png",value];
//card.image = [UIImage imageNamed:imagefile];
cardButton.currentBackgroundImage = [UIImage imageNamed:imagefile];

[[currentPopoverSegue popoverController] dismissPopoverAnimated: YES]; // dismiss the popover
}

@end 
```

我之前的编程教育为零，并且仅对类似代码进行了这么远的解释。我玩过`UIButton`-line的语法

```
cardButton.currentBackgroundImage = [UIImage imageNamed:imagefile]; 
```

试图做一个`UIButton`等效的`UIImageView`-line

```
card.image = [UIImage imageNamed:imagefile]; 
```

哪个有效。

使用当前代码，我得到！分配给只读属性（错误）。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T14:25:53.290

如果要更改图像，请使用此代码

```
[cardButton setImage:[UIImage imageNamed:imagefile] forState:UIControlStateNormal]; 
```

如果你真的想改变背景图片然后使用这个

```
[cardButton setBackgroundImage:[UIImage imageNamed:imagefile] forState:UIControlStateNormal]; 
```

# javascript - 点击展开菜单

> ID：15226140
> 
> 赞同：1
> 
> 时间：2013-03-05T14:20:00.927
> 
> 标签：javascript, jquery, html, css

我有一个看起来像这样的基本菜单。

```
<ul id="menu">
<li id="auctions">Auctions</li>
<li class="submenu">Submenu 1</li>
<li class="submenu">Submenu 2</li>
<li class="submenu">Submenu 3</li>
</ul> 
```

我希望隐藏三个子菜单，直到单击文本“拍卖”。然后它们应该出现，并在第二次单击“拍卖”时再次隐藏，依此类推。我试过这样的事情。

```
$(function() {
    $('#auctions').click(function() {        
        $('#menu').animate({'height': '200'});
        $('#submenu').animate({opacity : 'toggle'});
    }, function () {
        $('#menu').stop().animate({'height': '100'});
        $('#submenu').animate({opacity : 'toggle'});
    });
}); 
```

老实说，我很讨厌 jquery。我该如何处理？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-05T14:25:40.880

使用[jQuery 的`.slideToggle()`](http://api.jquery.com/slideToggle/)，还要确保`.submenu`不可见：

JAVASCRIPT：

```
$(function() {
    $('#auctions').click(function(){
      $('.submenu').slideToggle();
    });
}); 
```

CSS：

```
.submenu{display:none;} 
```

演示：http: [//jsfiddle.net/dirtyd77/SLGdE/4/](http://jsfiddle.net/dirtyd77/SLGdE/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T14:23:39.427

这对你有用吗？

```
$('#auctions').click(function(){
  $("#menu, .submenu").toggle();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T14:26:09.873

您的基本结构很好，但我不会使用`css()`. 改为使用`slideToggle()`：

```
$(function() {
    $('#auctions').click(function() {        
        $('.submenu').slideToggle();
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T14:29:43.810

你为什么不使用这个代码：

```
 $(function() {
$('.submenu').hide();
   $('#auctions').click(function() {        
       //$('#menu').animate({'height': '200'});
       $('.submenu').toggle("slow");

});

}); 
```

除了你使用`"#submenu"`和在你的html中`class`你应该使用它`".submenu"`

# python - 在python中使用全局变量/ lambda函数时指针无效？

> ID：15226144
> 
> 赞同：2
> 
> 时间：2013-03-05T14:20:12.820
> 
> 标签：python, pointers, memory, lambda

我遇到了一个奇怪的错误，我真的不确定是什么原因造成的。

我有一个包含 lambda 函数的列表，我已将此列表设置为全局变量，如下所示。然后使用所需的函数输入在“残差”函数中引用全局变量。

```
from numpy import array

from math import exp

from guppy import hpy   
hp = hpy()
hp.setrelheap()

rate_array = [[0, "4.91*(10**-22)*(T_m**4)"],                                                
              [1, "1.4*(10**-18)*(T_m**0.928)*exp(-T_m/16200)"]]  

global k

k = [0,0]

for i in range(0,2):

    k[i] = (eval('lambda T_m,T_r,Z_initial: ' + rate_array[i][1]))

def residual(t,y,yd):

    Z_initial = 10

    res_0 = -k[1](y[2],y[3], Z_initial)*y[0]
    res_1 = -k[0](y[2],y[3],Z_initial)*y[1]

    return array([res_0,res_1 ])

y = [0,0,0,0]
yd= [0,0,0,0]
t=0

residual(t,y,yd)

print("\nMemory statistics are as follows:\n")
print hp.heap() 
```

运行残差函数似乎给出了无效的指针错误或分段错误。代码时不时地运行，但大多数时候它不会运行。我看不出代码有什么问题，所以我不确定发生了什么。有什么特别明显的吗？

额外：我意识到这是一种奇怪的方法，但要解释一下：“rate_array”包含字符串，因为它根据用户是否要编辑它被腌制/解封。

此外，残差函数由第 3 方软件集成，它只允许显示 3 个输入，所以我不能像往常一样将数组作为输入传递给函数。我也不能将它附加到包含 rate_array 中，因为它不会将 lambda 函数作为可接受的类型。

通常 lambda 函数/表达式可能只是在残差函数本身中，只是额外的代码行，但是用户不可能在代码运行之前对其进行编辑.....真是一团糟！

编辑：抱歉，我大量削减了代码以尝试使其更易于解释，但在此过程中只是输入了完全错误的内容，现在已更正。

错误代码：

```
*** glibc detected *** python: free(): invalid pointer: 0x0000000002a7aa50 ***
======= Backtrace: =========
/lib/x86_64-linux-gnu/libc.so.6(+0x7eb96)[0x7fd857ddbb96]
/usr/local/lib/python2.7/dist-packages/guppy/sets/setsc.so(+0xbeeb)[0x7fd841bd1eeb]
/usr/local/lib/python2.7/dist-packages/guppy/sets/setsc.so(+0xbf73)[0x7fd841bd1f73]
python[0x48abf9]
python[0x48a9de]
python(PyEval_EvalFrameEx+0x52c)[0x45fb2c]
python(PyEval_EvalFrameEx+0xcb7)[0x4602b7]
python(PyEval_EvalCodeEx+0x199)[0x467209]
python(PyEval_EvalCode+0x32)[0x4d0242]
python[0x5102bb]
python(PyRun_FileExFlags+0x9a)[0x44a466]
python(PyRun_SimpleFileExFlags+0x2bc)[0x44a97a]
python(Py_Main+0xb36)[0x44b6bc]
/lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xed)[0x7fd857d7e76d]
python[0x4ce0ad] 
```

# php - 在模板中包含特定的 Joomla 模块

> ID：15226147
> 
> 赞同：0
> 
> 时间：2013-03-05T14:20:16.850
> 
> 标签：php, joomla, include, joomla-template, joomla-module

我在`PHP`编码的复制粘贴体育场，所以我想在这里指出正确的方向。

在本页面：

[http://anansi.dk/index.php?option=com_configbox&view=category&prod_id=2&cat_id=27&Itemid=227&lang=da](http://anansi.dk/index.php?option=com_configbox&view=category&prod_id=2&cat_id=27&Itemid=227&lang=da)

我正在尝试加载一个名为`mod_hot_joomla_carousel_pro`底部的模块 - 在其他元素下方。我尝试这样做的方法是在模板中使用用于包含价格模块的同一条 PHP。它看起来像这样：

```
<?php 
   include_once(KPATH_ROOT.DS.'modules'.DS.'mod_hot_joomla_carousel_pro'.DS.'mod_hot_joomla_carousel_pro.php');
?> 
```

它起作用了——有点——你可以看到箭头。但是我如何让它加载特定的模块实例，包括图片和所有？

最好的，阿斯特丽德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T14:34:21.563

您想在页面上显示模块吗？更好地添加模块的位置并在这个位置调整模块`<jdoc:include type="modules" name="position-0" />` 但是如果你想要包含模块，最好这样做

```
<?php
$doc = JFactory::getDocument();
$module = JModuleHelper::getModule('mod_hot_joomla_carousel_pro',$title);
//get and update params
$params = new JRegistry;
$params->loadString($module->params);
$params->set('some_param_of_module',$some_value);
//render module
$renderer = $doc->loadRenderer('module');
$content = $renderer->render($module, array('params'=> $params));
print $content;
?> 
```

# c# - 发布时定义的 DEBUG

> ID：15226148
> 
> 赞同：5
> 
> 时间：2013-03-05T14:20:18.977
> 
> 标签：c#, asp.net-mvc, visual-studio-2010, publish

我有一个奇怪的问题

```
#if (!DEBUG)
    checkLicense();
#endif 
```

`Release`这在和`Debug`配置中都可以正常工作。但是当我尝试使用发布配置发布时，这个条件不会执行。看起来发布正在使用调试 dll。

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T15:06:00.127

有一个设置来控制是否根据不同的部署模式为每个项目定义DEBUG常量。[请参阅此答案](https://stackoverflow.com/a/6929731/808532)以通过确保选中复选框来验证是否为“释放模式”定义**了**`Define DEBUG constant`常量。

 **如果未选中该框，则在编译站点之前，预处理器会删除您的调试代码，并且不会执行任何代码，即使您按照其他答案的建议包含 ELSE 也是如此。

如果这不起作用，那么另一种可能性是您运行发布代码的机器可能具有`machine.config`部署[元素](http://msdn.microsoft.com/en-ca/library/ms228298%28v=vs.80%29.aspx)：

```
<deployment retail="true" /> 
```

此元素覆盖`web.config`您的应用程序的设置，并将机器上所有 .NET 应用程序的调试标志设置为 false。

所以如果可能的话，检查一下。虽然我认为我给你的第一个选项更有可能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T14:33:59.893

首先你必须确保你进入这个“if”并使用try\catch。

```
#if (!DEBUG)
MessageBox.Show("I'm in");
try{
    checkLicense();}
catch{MessageBox.Show("ERROR IN checkLicense");}
#endif 
```

然后取出一个版本并运行它。如果你在“如果”中，你就会知道，如果你有例外，你也会知道。

你也可以试试

```
#if DEBUG
....
#else
..... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T16:03:57.243

替代我的其他答案，因为我刚刚注意到 mvc 标签，而在我假设您使用的是 WebForms 之前。

您是否偶然在视图中提供了代码片段？

因为如果是这种情况，那么在运行时生成视图时，项目的 DEBUG 设置将不会受到尊重 - 它只会尊重 web.config 文件中的调试标志。

[有关更多信息，请参阅此答案。](https://stackoverflow.com/a/1379021/808532)**

# r - R exdir 不存在错误

> ID：15226150
> 
> 赞同：9
> 
> 时间：2013-03-05T14:20:21.310
> 
> 标签：r, unzip, rstudio

我正在尝试使用 R 下载和提取 zip 文件。每当我这样做时，我都会收到错误消息

> 解压缩错误（temp，list = TRUE）：'exdir' 不存在

我正在使用基于 Stack Overflow 问题的代码[Using R to download zipped data file, extract, and import data](https://stackoverflow.com/questions/3053833/using-r-to-download-zipped-data-file-extract-and-import-data)

举一个简化的例子：

```
# Create a temporary file
temp <- tempfile()

# Download ZIP archive into temporary file
download.file("http://cran.r-project.org/bin/windows/contrib/r-release/ggmap_2.2.zip",temp)

# ZIP is downloaded successfully:

# trying URL 'http://cran.r-project.org/bin/windows/contrib/r-release/ggmap_2.2.zip'
# Content type 'application/zip' length 4533970 bytes (4.3 Mb)
# opened URL
# downloaded 4.3 Mb

# Try to do something with the downloaded file
unzip(temp,list=TRUE)

# Error in unzip(temp, list = TRUE) : 'exdir' does not exist 
```

到目前为止我已经尝试过：

*   手动访问临时文件并使用 7zip 解压缩：可以做到这一点没问题，文件在那里并且可以访问。
*   将临时目录更改为 c:\temp。同样，该文件已成功下载，我可以访问它并使用 7zip 解压缩它，但是 R 在尝试访问它时会抛出 exdir 错误消息。

R 版本 2.15.2

R-Studio 版本 0.97.306

**编辑：**如果我使用[unz](http://stat.ethz.ch/R-manual/R-devel/library/base/html/connections.html)而不是[unzip](http://stat.ethz.ch/R-manual/R-devel/library/utils/html/unzip.html) ，则代码有效，但我无法弄清楚为什么一个有效而另一个无效。来自 CRAN 的指导：

*   unz 读取（仅）zip 文件中的单个文件...
*   unzip 从 zip 存档中提取文件或列出文件

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2016-02-05T18:28:32.030

在 Windows 设置中：当我将 exdir 指定为路径时出现此错误。对我来说，解决方案是删除路径名中的尾随 / 或 \\。

这是一个示例，如果它不存在，它确实创建了新文件夹

```
locFile <- pathOfMyZipFile
outPath <- "Y:/Folders/MyFolder"
# OR
outPath <- "Y:\\Folders\\MyFolder"

unzip(locFile, exdir=outPath) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-02-06T01:15:31.487

这可能以另一种方式表现出来，并且文档没有说明原因。**您的 exdir 不能以“/”结尾，它必须只是目标文件夹的名称。**

例如，这因 'exdir' 不存在而失败：

```
unzip(temp, overwrite = F, exdir = "data_raw/system-data/") 
```

这很好用：

```
unzip(temp, overwrite = F, exdir = "data_raw/system-data") 
```

大概当 unzip 在 exdir 路径的末尾看到“/”时，它一直在寻找；而省略“/”则表示 unzip “你找到了，在此处解压缩”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-08-17T09:42:05.630

晚了几年，但我在尝试使用`unzip()`. 这似乎是一个错误，因为`unzip`如果指定了 state的手册页，`exdir`它将被创建：

> exdir 将文件解压到的目录（相当于 unzip -d）。如有必要，将创建它。

我一直在使用的解决方法是手动创建必要的目录：

```
dir.create("directory")
unzip("file-to-unzip.zip", exdir = "directory/") 
```

痛苦，但它似乎有效，至少对我来说。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-17T15:32:38.803

我在 Windows 7 机器上使用 R3.2.1。

我发现解决此问题的方法需要几个步骤，但它对我有用：

1.  创建一个向量，其中包含您从中下载文件的 url 的名称，例如

> file_url <- " [http://your.file.com/file_name.zip](http://your.file.com/file_name.zip) "

2.  使用 download.file 指定下载文件的 url（使用新创建的向量），后跟压缩文件的文件名（应该是 url 名称的最后一部分）。它将被保存在您的工作目录*中，例如

> 下载.file(file_url, "file_name.zip")

*如果您不确定您的工作目录，您可以使用 getwd() 来检查它。如果要更改工作目录，可以使用 setwd("C:users/username/...") 将其设置为您想要的。

3.  使用“解压缩”将文件解压缩到您的工作目录中，使用您将使用 exdir 设置的名称，例如

> unzip("file_name.zip", exdir = "file_name")

4.  要检查您的工作，您可以使用 list.files，例如

> list.files("file_name")

希望这可以帮助！

# eclipse - Subclipse SVN 修订号构建变量

> ID：15226151
> 
> 赞同：0
> 
> 时间：2013-03-05T14:20:21.870
> 
> 标签：eclipse, svn, subclipse

我在 Eclipse 中编程并使用 Subclipse 作为 SVN 插件。有没有办法在 Eclipse 中创建一个构建变量，该变量将采用当前项目的 SVN 修订版？

# graphics - 在 DirectXTK 中将位图渲染到 SpriteBatch

> ID：15226154
> 
> 赞同：0
> 
> 时间：2013-03-05T14:20:33.040
> 
> 标签：graphics, directx, windows-phone-8

我需要将一些 C++ 应用程序移植到 Windows Phone 8（它已经在 Android、iOS、WinCE 和 Win32 上）。目前我需要解决如何显示图形。我可以从核心应用程序获取渲染位图，并且在成功初始化 DirectXTK 后，我可以渲染一些 DDS 纹理（DirectXTK::SpriteBatch）。现在我需要将我的位图转换为纹理然后渲染它。你能帮我解决这个问题吗？或者有什么方法可以将位图直接放入后备缓冲区并在没有 SpriteBatch 的情况下将其显示在显示器上？

非常感谢

托马斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-30T14:29:10.413

由于 Windows Phone 8 不支持 WICTextureLoader，将位图渲染到纹理的唯一方法是将纹理映射到 CPU 并将位图资源复制到映射纹理的资源上。

ID3D11DeviceContext::Map() [http://msdn.microsoft.com/en-us/library/windows/desktop/ff476457(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ff476457(v=vs.85).aspx)

```
D3D11_MAPPED_SUBRESOURCE mappedBuffer;
HRESULT hr = pContext->Map(pTexture, 0, D3D11_MAP_WRITE_DISCARD, 0, &mappedBuffer);

if(hr == S_OK)
{
    // copy your bitmap onto mappedBuffer.pData
    ...

    pContext->Unmap(pTex, 0);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T20:40:59.720

DirectX 工具包具有 WICTextureLoader。您可以使用它代替 DDSTextureLoader 来加载 .bmp(bitmap) 文件。希望这有帮助！

[http://directxtk.codeplex.com/wikipage?title=WICTextureLoader&referringTitle=DirectXTK](http://directxtk.codeplex.com/wikipage?title=WICTextureLoader&referringTitle=DirectXTK)

# visual-studio-2010 - VS2010 是否支持 Wix3.5？

> ID：15226155
> 
> 赞同：0
> 
> 时间：2013-03-05T14:20:33.150
> 
> 标签：visual-studio-2010, installation, wix, wix3.5

我尝试安装 WiX 3.5，但我使用 WiX 开发的旧 wix 项目无法在 VS2010 中打开。

我需要处理任何特定设置吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T15:15:52.057

这是一个矩阵：

*   [WiX v3.5](http://robmensching.com/blog/posts/2011/1/31/wix-v3.5-released/)支持`VS2005`, `VS2008`, `VS2010`.
*   [WiX v3.6](http://robmensching.com/blog/posts/2012/9/3/wix-v3.6-released/)支持`VS2008`, `VS2010`, `VS2012`.
*   [WiX v3.7](http://robmensching.com/blog/posts/2012/12/24/wix-v3.7-released/)支持`VS2008`, `VS2010`, `VS2012`.
*   [WiX v3.8](http://www.joyofsetup.com/2013/10/14/visual-studio-2013-support-for-wix-available/)支持`VS2008`, `VS2010`, `VS2012`, `VS2013`.
*   WiX v4.0 将支持`VS2010`, `VS2012`, `VS2013`.

但是，您可能会考虑升级到 WiX v3.7，因为它是最新的并且与 WiX v3.5 兼容。

# liferay - Liferay 在 tomcat 6 上启动时出现错误

> ID：15226159
> 
> 赞同：0
> 
> 时间：2013-03-05T14:20:47.883
> 
> 标签：liferay, tomcat6

我的系统上安装了 tomcat 6 和 liferay 6.1.1 ce-ga2。启动 tomcat 时，这是我在 catalina.out 中遇到的以下错误。

```
INFO: Deploying configuration descriptor liferay.xml
Mar 5, 2013 6:18:33 PM org.apache.tomcat.util.digester.Digester fatalError
SEVERE: Parse Fatal Error at line 22 column 2: The markup in the document preceding the root element must be well-formed.
org.xml.sax.SAXParseException: The markup in the document preceding the root element must be well-formed.
        at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:195)
        at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.fatalError(ErrorHandlerWrapper.java:174)
        at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:388)
        at com.sun.org.apache.xerces.internal.impl.XMLScanner.reportFatalError(XMLScanner.java:1414)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$PrologDriver.next(XMLDocumentScannerImpl.java:925)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:648)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:511)
        at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:808)
        at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:737)
        at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:119)
        at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1205)
        at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:522)
        at org.apache.tomcat.util.digester.Digester.parse(Digester.java:1626)
        at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:593)
        at org.apache.catalina.startup.HostConfig.deployDescriptors(HostConfig.java:563)
        at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:498)
        at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1277)
        at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:321)
        at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1053)
        at org.apache.catalina.core.StandardHost.start(StandardHost.java:785)
        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)
        at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:445)
        at org.apache.catalina.core.StandardService.start(StandardService.java:519)
        at org.apache.catalina.core.StandardServer.start(StandardServer.java:710)
        at org.apache.catalina.startup.Catalina.start(Catalina.java:581)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
Mar 5, 2013 6:18:33 PM org.apache.catalina.startup.HostConfig deployDescriptor
SEVERE: Error deploying configuration descriptor liferay.xml
org.xml.sax.SAXParseException: The markup in the document preceding the root element must be well-formed.
        at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1231)
        at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:522)
        at org.apache.tomcat.util.digester.Digester.parse(Digester.java:1626)
        at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:593)
        at org.apache.catalina.startup.HostConfig.deployDescriptors(HostConfig.java:563)
        at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:498)
        at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1277)
        at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:321)
        at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1053)
        at org.apache.catalina.core.StandardHost.start(StandardHost.java:785)
        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)
        at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:445)
        at org.apache.catalina.core.StandardService.start(StandardService.java:519)
        at org.apache.catalina.core.StandardServer.start(StandardServer.java:710)
        at org.apache.catalina.startup.Catalina.start(Catalina.java:581)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
Mar 5, 2013 6:18:33 PM org.apache.catalina.startup.HostConfig deployDescriptor
INFO: Deploying configuration descriptor fedora.xml
Mar 5, 2013 6:18:39 PM org.apache.catalina.startup.HostConfig deployDescriptor
INFO: Deploying configuration descriptor host-manager.xml
Mar 5, 2013 6:18:39 PM org.apache.catalina.startup.HostConfig deployDescriptor
INFO: Deploying configuration descriptor manager.xml
Mar 5, 2013 6:18:39 PM org.apache.catalina.startup.HostConfig deployDescriptor
INFO: Deploying configuration descriptor core-plugins.xml
Mar 5, 2013 6:18:39 PM org.apache.catalina.loader.WebappClassLoader validateJarFile
INFO: validateJarFile(/home/fedora/tomcat/temp/1-core-plugins/WEB-INF/lib/servlet-api-2.5.jar) - jar not loaded. See Servlet Spec 2.3, section 9.7.2\. Offending class: javax/servlet/Servlet.class
Mar 5, 2013 6:18:39 PM org.apache.catalina.startup.HostConfig deployWAR 
```

我的`liferay.xml`文件包含以下代码：

```
<?xml version="1.0" encoding="UTF-8"?>
<Context reloadable="true">
    <Loader loaderClass="org.springframework.instrument.classloading.tomcat.TomcatInstrumentableClassLoader"/>
    <Resource name="jdbc/dwspring2" auth="Container" type="javax.sql.DataSource" maxActive="100" maxIdle="30" maxWait="10000" username="userid" password="password" driverClassName="com.mysql.jdbc.Driver" url="jdbc:mysql://localhost:3306/springtutorial"/>
</Context> 
```

任何想法或经验都会非常有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T14:34:23.357

您使用 2 种不同类型的报价

...“jdbc/dwspring2”</p>

在整个文件中使用开头的那个。

# .net - 更新 XmlValidatingReader 函数以使用 XMLReader？

> ID：15226161
> 
> 赞同：2
> 
> 时间：2013-03-05T14:20:49.393
> 
> 标签：.net, xml, validation, xsd, xmlreader

我正在尝试找到以下函数的替代方法，该函数使用过时的 System.xml.XmlValidatingReader()。如何调整此代码以使用 XMLReader，这是 Visual Studio 建议的替代方法？随时用 C# 或 VB.NET 发表回复。我传递给函数的 xmlString 是引用 XSD 模式的原始 xml。

```
 'VALIDATE XML
    Public Shared Function validateXml(ByVal xmlString As String) As XmlDocument
        xmlErrorStr = ""
        Dim strReader As New StringReader(xmlString)
        Dim xmlr As New XmlTextReader(strReader)
        Dim xmlvread As New XmlValidatingReader(xmlr)

        ' Set the validation event handler
        AddHandler xmlvread.ValidationEventHandler, AddressOf ValidationCallBack

        Try
            While (xmlvread.Read)
            End While
        Catch ex As Exception
            xmlErrorStr = "<Error>" & vbCrLf & "<Exception>The XML document is invalid or malformed</Exception>" & vbCrLf & "</Error>"
        End Try

        'Close the reader.
        xmlvread.Close()
        strReader.Close()

        Dim xmlDocument As New XmlDocument

        xmlDocument.LoadXml("<Errors>" & xmlErrorStr & "</Errors>")

        Return xmlDocument
    End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T18:06:43.753

您可以通过将适当配置的方法传递给方法重载`XmlReaderSettings`之一来创建验证阅读器。`XmlReader.Create()`有关概述，请参阅[http://msdn.microsoft.com/en-ca/library/9khb6435.aspx](http://msdn.microsoft.com/en-ca/library/9khb6435.aspx)，有关概述，请参阅[http://msdn.microsoft.com/en-us/library/system.xml.xmlreadersettings.validationtype.aspx](http://msdn.microsoft.com/en-us/library/system.xml.xmlreadersettings.validationtype.aspx)一个更完整的例子。

# java - Eclipselink 插入 ID 为 0 的实体

> ID：15226164
> 
> 赞同：-1
> 
> 时间：2013-03-05T14:21:05.493
> 
> 标签：java, jpa, eclipselink

我刚刚发现 EclipseLink（2.3.0 和 2.4.1）有一个相当奇怪的问题，只是想问是否有人可以确认这是一个错误，而不仅仅是我遗漏了一些明显的东西......

基本上，我涉及两个实体，让我们简单地称它们为 A 和 B。A 有一个急切的（如果重要的话），对 B 的非级联多对一单向引用，该引用在数据库中使用连接列建模。DB 表 A 包含列 ID (PK)、B_ID（FK 到 B.ID）等，表 B 包含列 ID 等。

现在，我有一个 As 列表，应该使用对新 B 实例的引用进行更新。在伪代码中类似于：

```
for(A a : list) {
    // using some criteria, check if perhaps a matching B
    // entity is already found in the database
    B b = perhapsGetExistingBFromDatabase();

    if(b == null) {
        // no existing B was found, create a new
        b = new B();
        // set values in B
        b.setFoo(4711),
        b.setBar(42);

        // save B
        em.merge(b);
    }

    // set reference from A to B ...
    a.setB(b);
    // ... and update A
    em.merge(a);
} 
```

由于引用是非级联的，因此有必要合并 b 和 a。一切都按预期工作。

然后，某人（我）将关系的级联类型从无更改为合并/持久，因为代码中的其他地方需要这样做。我希望旧代码能够工作，合并 b 并不是真正需要的，恕我直言不应该受到伤害吗？一个简短的测试确认它仍然有效，插入了新的 B 实体并相应地更新了 A。

但是，它仅在列表中只有一个 A 实体时才有效。第二次运行循环会导致 EclipseLink 自动刷新会话，因为`perhapsGetExistingBFromDatabase`执行了“SELECT .. FROM B”，缓存了一个合并的 B 实体，它希望数据库表是最新的。使用代码中的 FINEST 日志记录级别和断点，我可以验证 EclipseLink 确定需要为新的 B 实体生成一个 id，它调用序列生成器并在实体的正确字段中设置 id。尽管如此，EclipseLink 仍会调用类似于以下的 SQL 语句：

```
INSERT INTO B (ID, ...) VALUES(0, ...);
UPDATE A SET B_ID = 0 WHERE ID = ...; 
```

生成的 id 在某处丢失，EclipseLink 尝试创建一个 id=0 的新实体。数据确实是无效的，后来，EclipseLink 也抛出了 PersistenceException：在工作单元克隆中遇到 Null 或零主键。

错误还是我的错误？

* * *

编辑：詹姆斯要求 B.ID 的映射：

```
@Id
@GeneratedValue(generator = "sq_idgen", strategy = GenerationType.SEQUENCE)
@SequenceGenerator(name = "sq_idgen", sequenceName = "...", allocationSize = 100)
@Column(name = "id")
protected long id; 
```

请注意，删除不必要的内容`em.merge(b);`可以解决我的问题。对我来说，为什么调用合并会导致 EclipseLink 完全失败，试图插入一个没有填充 id 的 B 实例，这对我来说并不明显。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T15:29:59.947

奇怪的是，B 的 Id 是如何映射的？

似乎合并后的 B 可能会以某种方式获得两个单独的实例（因为没有任何东西可以将它们识别为相同的，因为它们没有 ID）。并不是说 merge() 通常不需要，它仅对分离的对象需要，例如在使用序列化时（尝试使用 persist 代替）。

为避免刷新，您可以将 EntityManager 或持久性单元中的 flushMode 设置为 COMMIT 而不是 AUTO。

# c# - 64 位操作系统中的“类未注册（HRESULT 异常：0x80040154 (REGDB_E_CLASSNOTREG)）”

> ID：15226167
> 
> 赞同：0
> 
> 时间：2013-03-05T14:21:09.607
> 
> 标签：c#, .net

我们使用带有框架 2.0 的 VS 2005 开发了一个 Windows 应用程序。此应用程序在 32 位操作系统上完美运行。现在我们需要支持 64 位操作系统。

在使用 64 位操作系统时，我们收到以下错误消息。

> “类未注册（HRESULT 异常：0x80040154 (REGDB_E_CLASSNOTREG)）”。

以下是代码块

```
System.ComponentModel.ComponentResourceManager resources = new System.ComponentModel.ComponentResourceManager(typeof(Driver));     
this.axDriver = new AxCCNAccess.AxDriver();     
((System.ComponentModel.ISupportInitialize)(axDriver)).BeginInit();     
SuspendLayout();     
//     
// axDriver     
//    
axDriver .Enabled = true;   
axDriver .Location = new System.Drawing.Point(241, 211);   
axDriver .Name = "axDriver ";    
axDriver .OcxState = ((System.Windows.Forms.AxHost.State)(resources.GetObject("axDriver .OcxState")));    
axDriver .Size = new System.Drawing.Size(41, 42);     
axDriver .TabIndex = 0;     
//     
// Driver     
//     
AutoScaleDimensions = new System.Drawing.SizeF(6F, 13F);    
AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;     
ClientSize = new System.Drawing.Size(292, 266);     
Controls.Add(axDriver );   
Name = "DriverContainer";  
Text = "DriverContainer";     
try     
{
((System.ComponentModel.ISupportInitialize)(axDriver )).EndInit(); 
}    
catch (Exception ex)  
{
string sss = ex.Message;
}
ResumeLayout(false); 
```

在 try 块中遇到问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-11T07:47:04.353

我认为这是你这边的问题，因为我卸载了那个 ocx 中的一个软件，直到那个时候另一个软件不能正常工作，之后我注册了

> RICHTX32.ocx 或 RICHTX64.ocx

（使用您的系统位版本 32 或 64）现在可以正常工作。我认为这会有所帮助。

# zend-framework2 - Zend Framework 2 使用一个共享库创建多个网站

> ID：15226178
> 
> 赞同：0
> 
> 时间：2013-03-05T14:21:29.793
> 
> 标签：zend-framework2

如果我想将一个库用于使用 Zend Framework 2 的多个站点，我该怎么办？例如，我想要**/var/www/zf2-lib**和**/var/www/site-1**，**/var/www/site-1**等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T14:25:53.933

将库添加到您的环境中`include_path`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T15:25:30.357

您可以将 yo9ur ZF2 安装的路径添加到 PHP 配置中的 include_path：

[http://www.php.net/manual/en/ini.core.php#ini.include-path](http://www.php.net/manual/en/ini.core.php#ini.include-path)

例如，将路径更改为以下共享 ZF2 库的位置：

php.ini

```
include_path=".:/usr/share/pear;/usr/local/include/ZF2/library/Zend" 
```

# c++ - 每次保存时，我的应用程序文件都会自动对齐到桌面左侧。在 Windows XP 上运行良好

> ID：15226180
> 
> 赞同：0
> 
> 时间：2013-03-05T14:21:36.387
> 
> 标签：c++, file, windows-7, mfc

我有一个基于 MFC 的应用程序。我已经将我的应用程序创建的文件拖到桌面的（右下），它可以是桌面上的任何位置。

现在，如果我再次打开我的文件并执行保存操作，它总是会自动向左对齐。我的应用程序的文件可以保留它们在 Windows XP 上的位置。它在那里工作得很好。此问题出现在 Windows 7 和 Windows 8 上。

在调试我的代码库时，我发现调用 ::MoveFile() ( [http://msdn.microsoft.com/en-us/library/windows/desktop/aa365239%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365239%28v=vs.85%29.aspx) ) ，实际上是将文件放在桌面的左侧。

在这个问题上我无法得到任何东西。似乎没有其他人遇到过这个问题:(。

朝这个方向的任何指示 - 可能出了什么问题，或者这些事情是否需要完全独立的处理，以及是否有标准的方法来做这将有很大的帮助。

此外，在上述场景中，MS Word、写字板、记事本在我的 win 7 和 win 8 机器上都可以正常工作。

# google-app-engine - 如何创建与市场应用程序关联的服务帐户？

> ID：15226186
> 
> 赞同：1
> 
> 时间：2013-03-05T14:21:46.387
> 
> 标签：google-app-engine

我有一个谷歌应用引擎市场应用程序，带有一个关联的 API 控制台，我在其中启用了一些 API。我需要设置一个服务帐户，以便我可以在我的应用程序中使用 GDrive。

通常，API 控制台（对于给定的 API 项目）以一个大的 OAuth2 按钮开始，我可以从中创建一个服务帐户。我的市场应用程序的 API 控制台不存在此类按钮。

如何创建与我的市场应用程序关联的服务帐户？

总体而言，API 控制台的“授权访问”部分似乎缺失。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T02:48:24.297

API 控制台的“授权访问”部分实际上是存在的，只是不可见。在为现有应用启用 GDrive 并确保正确设置所有 API 项目设置后，我使“授权访问”部分可见（通过 CSS 调整）并尝试添加服务帐户。第一次失败（可能是由于启用 GDrive API 或其他一些 API 控制台设置有一些延迟）；随后的尝试导致为 API 项目创建了一个服务帐户。成功！

# javascript - Ajax 文件上传进度在移动浏览器上不起作用

> ID：15226187
> 
> 赞同：4
> 
> 时间：2013-03-05T14:21:47.667
> 
> 标签：javascript, ajax

我正在使用 Ajax 使用以下 JavaScript 代码生成文件上传进度条

```
function ulpoad_file(){ 

    var o = $id("progress");

    para = document.createElement("p")
    para.style.height = 2 + 'px'; 
    var progress = o.appendChild(para);
    var file = $id("file").files[0];

    var xhr = new XMLHttpRequest(); 

    xhr.upload.addEventListener("progress", function(e) {      
        var pc = parseInt(100 - (e.loaded / e.total * 100));
        progress.style.backgroundPosition = pc + "% 0";        
        p = 100-pc;
        $id("status").innerHTML = p.toString() + "% Uploaded";
    }, false);

    xhr.onreadystatechange = function(e) {
        if (xhr.readyState == 4) {
            progress.className = (xhr.status == 200 ? "success" : "failure");
        }
    };

    xhr.open("post", "", true);
    xhr.onreadystatechange = function() {
        if (xhr.readyState == 4) {
            callback(xhr.responseText);
        }
    }

    var datas = new FormData();
    datas.append('file', file);

    xhr.send(datas);  

}

function $id(id) {
    return document.getElementById(id);
} 
```

这适用于 chrome 和几个 firefox 版本。

但是“xhr.upload.addEventListener”不适用于移动浏览器（手机和标签中的安卓浏览器）和 Linux 机器中的 Firefox。

这有什么问题吗？在移动浏览器中使用 Ajax 作为进度条的正确方法是什么？

谢谢

# r - 子集数据框R避免for循环

> ID：15226188
> 
> 赞同：-1
> 
> 时间：2013-03-05T14:21:50.803
> 
> 标签：r, for-loop, dataframe, vectorization, subset

在一个大型数据帧（超过 100 万行）中，我正在计算特定范围内并满足第三个标准的元素（行）的数量。我有 33 个这样的范围，并使用非常慢的 for 循环来给我答案，没问题。

由于速度是一个大问题，我将不胜感激任何帮助让它运行得更快。我可以摆脱 for 循环和“矢量化”或任何类型的“应用”解决方案吗？

提前致谢

代码：

```
N.data<-c(1:33)
Lower<-c(0,100000,125000,150000,175000,200000,225000,250000,275000,300000,325000,350000,375000,400000,425000,450000,475000,500000,550000,600000,650000,700000,750000,800000,850000,900000,950000,1000000,1100000,1200000,1300000,1400000,1500000)

Upper<-c(100000,125000,150000,175000,200000,225000,250000,275000,300000,325000,350000,375000,400000,425000,450000,475000,500000,550000,600000,650000,700000,750000,800000,850000,900000,950000,1000000,1100000,1200000,1300000,1400000,1500000, 5000000)

for (i in 1:(length(N.data))){
N.data[i]<-nrow(dataset[dataset$Z==c & dataset$X > Lower[i] & dataset$X < Upper[i],])
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:35:05.067

更有效的方法：

```
# first logical index (vector)
idx1 <- dataset$Z == c

# second logical index (matrix)
idx2 <- mapply(function(l, u) dataset$X > l & dataset$X < u, Lower, Upper)

# combine both indices and count number of rows
N.data <- colSums(idx1 & idx2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T16:01:09.183

`apply`函数不是矢量化的。它们只是 for 循环的更有效实现。为了使用矢量化实现您所寻求的，这是一种方法。

```
# Create a Dummy Dataset and Breaks
dataset = data.frame(
  X = rpois(100, 10),
  Z = rpois(100, 20)
)
breaks = seq(0, max(dataset$Z), length = 5)

# Add Column with Breaks
dataset = transform(dataset, Z2 = cut(Z, breaks, labels = FALSE))

# Use Aggregate to compute length for each value of Z2
c = 10
aggregate(Z ~ Z2, data = dataset, length, subset = (X == c)) 
```

这应该比 using 更有效`mapply`，因为它是完全矢量化的。

# javascript - MVC 4 应用程序的 Jquery Carousel 问题

> ID：15226191
> 
> 赞同：1
> 
> 时间：2013-03-05T14:21:52.753
> 
> 标签：javascript, asp.net-mvc-4

我的回旋处 Jquery 轮播插件有问题，我已经查看了这里的一些答案，但仍然无法解决问题。

所以我有一个轮播，我正试图将它应用于我的 MVC 4 应用程序，它包含在包中，如下所示：

```
 public static void RegisterBundles(BundleCollection bundles)
    {
        bundles.Add(new ScriptBundle("~/bundles/jquery").Include(
                    "~/Scripts/jquery-{version}.js"));

        bundles.Add(new ScriptBundle("~/bundles/jqueryui").Include(
                    "~/Scripts/jquery-ui-{version}.js"));

        bundles.Add(new ScriptBundle("~/bundles/jqueryval").Include(
                    "~/Scripts/jquery.unobtrusive*",
                    "~/Scripts/jquery.validate*"));
        bundles.Add(new ScriptBundle("~/bundles/jquerycarousel").Include(
                    "~/Scripts/jquery.roundabout.js")); 
```

这被链接到我的 _layout 页面，如下所示：

```
 @Styles.Render("~/Content/css")
    @Scripts.Render("~/bundles/modernizr")
    @Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/bundles/jquerycarousel") 
        <script>
        $(document).ready(function () {
            $('ul').roundabout();
        }); 
```

我已经尝试过不使用捆绑（使用基本 HTML 的 IE）以及直接将脚本渲染到脚本源），但问题仍然存在！

错误是：

```
Uncaught TypeError: Object [object Object] has no method 'roundabout' 
```

然而，在 chrome 检查器中，当我打开标题标签时，我可以单击 roundabout.JS 文件并直接进入它，所以它必须很好地引用它，Jquery 也是如此，这是唯一需要的两个文件！

下面是显示两个“可链接”脚本文件和文档就绪脚本的图片。

![Chrome 检查器中的错误视图](../Images/c1840d21f1dfd6745554b9471180def9.png)

Javascript不是我的强项:(所以任何帮助将不胜感激。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T15:14:58.430

好吧，伙计们，我似乎已经修好了。事实证明，MVC 4 在布局页面底部为您呈现（参考？）jquery，就在结束标记之前，如下所示：

```
 @Scripts.Render("~/bundles/jquery") 
```

由于某种原因，这导致它无法工作，我已将其删除并将我的脚本渲染版本保留在标签的顶部，这似乎已经解决了这个问题。

希望这可以帮助任何有同样问题的人！

# jquery - Jquery 找不到动态创建的单选按钮

> ID：15226192
> 
> 赞同：0
> 
> 时间：2013-03-05T14:21:55.373
> 
> 标签：jquery, asp.net, radio-button

我正在尝试有一个单选按钮列表，当用户单击其中一个时，我想要 Alert("Warning message") 。

我创建了一个静态单选按钮，如果单击它，我可以看到 Alert() 框。但是，如果我单击动态创建的单选按钮，则不会显示 Alert()。

这是静态单选按钮，这会触发 Alert()

```
<input type="radio" class="radio_profile" name="radio_profile" id="radio_profile_not_found" value="0"> 
```

这是在 webmethod 中创建的，这不会触发 Alert()

```
 rtn_str = "<input type='radio' class='radio_profile' name='radio_profile' id='radio_profile_" + dr["ProfessionalID"].ToString() + "' value='" + dr["ProfessionalID"].ToString() + "' >" 
```

这是Jquery代码

```
$("input[name='radio_profile']").change(function () {
     alert('Warning Message');
}); 
```

请您帮我修复动态创建的单选按钮以触发 Alert() 框

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T14:24:26.353

您需要将[事件委托](http://api.jquery.com/on/#direct-and-delegated-events)与以下[`.on()`](http://api.jquery.com/on/#direct-and-delegated-events)功能一起使用：

```
$(document).on('change', 'input[name="radio_profile"]', function(e) {
    alert('Warning Message');
}); 
```

理想情况下，`document`您应该`.on()`在选择包含所有动态添加的单选按钮的静态（页面加载时存在）元素后调用，而不是调用 。静态元素离它们越近越好。如果没有看到页面的 HTML，很难知道应该是什么元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T14:24:03.133

函数运行时，该`change()`事件将绑定到与选择器匹配的所有元素。它不知道新元素。您将不得不运行该函数以再次重新绑定事件处理程序 - 或使用`on('change', function(){`.

JQuery 文档解释更多：[http ://api.jquery.com/on/](http://api.jquery.com/on/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T14:24:31.533

```
$(document).on("change",'input[name="radio_profile"]',function(){
 alert('Warning Message');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T14:28:42.233

在 asp.net 中，您可以将属性 ClientIDMode="Static" 粘贴到单选按钮控件。这样您就可以使用页面中指定的控件 ID。您还可以根据控件 ID 进行事件处理。

# xml - 使用 XSLT 将 XML 转换为 CSV

> ID：15226194
> 
> 赞同：2
> 
> 时间：2013-03-05T14:22:10.073
> 
> 标签：xml, xslt, csv

我正在寻找一种智能高效的 XSLT，它可以将 XML 文档转换为 CSV 数据。它应该处理子节点中所有可能的元素。例如，XML 看起来像这样

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<sObjects>
   <sObject>
     <Name>Raagu</Name>
     <BillingStreet>Hoskote</BillingStreet>
   </sObject>
   <sObject>
      <Name>Rajath</Name>
      <BillingStreet>BTM</BillingStreet>
      <age>25</age>
   </sObject>
   <sObject>
      <Name>Sarath</Name>
      <BillingStreet>Murgesh</BillingStreet>
      <location>Bangalore</location>
   </sObject>
</sObjects> 
```

我的输出 CSV 应该是这样的

```
Name,BillingStreet,age,location
Raagu,Hoskote,,
Rajath,BTM,25,
Sarath,Murgesh,,Bangalore 
```

所有行都应该有 CSV 中所有键的字段，即使 XML 确实有它的值。

以下是我通过查看此处的不同示例得出的 XSLT 代码。

这是我想出的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="text"/>
    <xsl:variable name="delimiter" select="','"/>

    <xsl:key name="field" match="sObject/*" use="name()"/>

    <xsl:template match="/">

        <xsl:for-each select="/*/*/*[generate-id()=generate-id(key('field', name())[1])]">
            <xsl:value-of select="name()"/>

            <xsl:if test="position() != last()">
                <xsl:value-of select="$delimiter"/>
            </xsl:if>
         </xsl:for-each>

        <xsl:text>&#xa;</xsl:text>

        <xsl:for-each select="/*/sObject">

            <xsl:variable name="property" select="." />
            <xsl:for-each select="$property/*">

                <xsl:variable name="value" select="." />
                <xsl:value-of select="$value"/>
                <xsl:if test="position() != last()">
                    <xsl:value-of select="$delimiter"/>
                </xsl:if>
                <xsl:if test="position() = last()">
                    <xsl:text>&#xa;</xsl:text>
                </xsl:if>

             </xsl:for-each>

        </xsl:for-each>

     </xsl:template>
 </xsl:stylesheet> 
```

并将其打印出来

```
Name,BillingStreet,age,location
Raagu,Hoskote
Rajath,BTM,25
Sarath,Murgesh,Bangalore 
```

但我希望所有行都应该包含第一行所有键的多次值。

您能帮我使用 XSLT 代码实现这一目标吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T14:47:37.890

两步解决方案怎么样

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="text"/>
    <xsl:variable name="delimiter" select="','"/>

    <xsl:key name="field" match="/*/*/*" use="local-name()"/>

    <!-- variable containing the first occurrence of each field -->
    <xsl:variable name="allFields"
         select="/*/*/*[generate-id()=generate-id(key('field', local-name())[1])]" />

    <xsl:template match="/">
        <xsl:for-each select="$allFields">
            <xsl:value-of select="local-name()" />
            <xsl:if test="position() &lt; last()">
                <xsl:value-of select="$delimiter" />
            </xsl:if>
        </xsl:for-each>
        <xsl:text>&#10;</xsl:text>
        <xsl:apply-templates select="*/*" />
    </xsl:template>

    <xsl:template match="*">
        <xsl:variable name="this" select="." />
        <xsl:for-each select="$allFields">
            <xsl:value-of select="$this/*[local-name() = local-name(current())]" />
            <xsl:if test="position() &lt; last()">
                <xsl:value-of select="$delimiter" />
            </xsl:if>
        </xsl:for-each>
        <xsl:text>&#10;</xsl:text>
    </xsl:template>
</xsl:stylesheet> 
```

这里的技巧是该`allFields`变量将包含一个具有每个名称的元素，因此我们为每一行迭代的是*这个*节点列表，而不仅仅是该行中实际存在的元素。既然你说你想在任意命名空间等中支持 XML。我使用了类似`/*/*/*`而不是硬编码任何特定元素名称的模式（`/*/*/*`只匹配作为文档元素的孙子元素的任何元素，而不管元素名称如何），并且我使用`local-name()`而不是`name()`忽略任何命名空间前缀（它会处理`<sObject>`,`<sObject xmlns="foo">`并且`<f:sObject xmlns:f="foo">`完全相同）。

# c - 同时访问文件。奇怪的锁定行为

> ID：15226199
> 
> 赞同：2
> 
> 时间：2013-03-05T14:22:28.233
> 
> 标签：c, linux, file, locking

我无法理解我的程序行为。

```
int MyOpenWrite(char *name,int flags) {
    int fd;
       unsigned long tm;
    unsigned long t;

    tm=time(0)+5;  //5 seconds
    for (;;) {
        fd = open(name,flags,S_IREAD|S_IWRITE|S_IRGRP|S_IWGRP|S_IROTH|S_IWOTH);
        if (fd>0) break;
        if (time(0)>=tm) return -1;
    } 
    //1111111111111111111
    LockFile(fd);
        DelayInSeconds(60);
    //2222222222222222222222
    return fd;
}

int LockFile(int fd) //return 0 - OK; -1 - Error
{
    struct flock    lock;

    lock.l_type = F_WRLCK;
    lock.l_start = 0;
    lock.l_whence = SEEK_SET;
    lock.l_len = 0;
    return fcntl(fd,F_SETLKW,&lock);
} 
```

这是 cgi-bin 程序。我已经开始了一个将数据附加到某个文件的请求。如您所见，它在锁定后延迟 60 秒。然后我重新编译了程序，没有这个延迟，并做了下一个请求。第二个程序在 //1111 和 //22222 之间等待，直到第一个程序退出。我希望第二个程序在等待 5 秒后返回带有 -1 代码的 MyOpenWrite。但开放周期没有延迟。但是 LockFile 有很长的延迟。这里有什么问题？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T15:39:42.563

发生这种情况是因为您使用的是*咨询锁定*，即文件没有被物理阻止而无法打开，而是它将通过`fcntl()`.

您的两个版本的代码都使用相同的代码 for `LockFile()`，这意味着第二个将等待第一个；`open()`除非文件不存在或无法打开以进行读写，否则调用不太可能失败。

如果您不想在文件已锁定时等待，则应`F_SETLK`使用`F_SETLKW`. `-1`如果无法获得锁，它将立即返回。

# jquery - 未触发 Windows Phone 7.5 touchend 事件

> ID：15226200
> 
> 赞同：0
> 
> 时间：2013-03-05T14:22:30.900
> 
> 标签：jquery, windows-phone-7, cordova, cordova-2.0.0

我使用适用于 iOS、Android 和 Windows Phone 的 Cordova 2.2.0 框架编写应用程序。我有以下适用于两者的代码：Android 和 iOS，但不适用于 Windows Phone 7.5。

```
$(document).ready(function() 
{
    //document.addEventListener("deviceready", devReady, false);
    devReady();
});

function devReady()
{                       
    document.getElementById('index_login_butt').addEventListener('touchend',     indexLoginClicked, false);
}

function indexLoginClicked() 
{       
        //console.log("######## indexLogin");
        var color = $(this).css("background-color");
        var lighter = lighterColor(color, .1);
        $(this).css("background-color", lighter);
} 
```

我已经花了一整天的时间来找出为什么这段代码不起作用。我不知道我应该在哪个/如何初始化这些块以使它们工作。我试图在互联网上寻找，但找不到任何有用的东西。我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:35:01.040

Windows Phone 7.x 具有不实现触摸 API 的 Internet Explorer 9 Mobile。您必须改用“点击”事件。

# iphone - 使用加速度计数据 x,z,y 查找设备方向

> ID：15226202
> 
> 赞同：0
> 
> 时间：2013-03-05T14:22:43.227
> 
> 标签：iphone, ios, xcode, math, accelerometer

我们如何从`x,y,z(accelerometer)`. 我试图通过识别`x,y,z`值来获取设备方向，但它不同。我为 iPhone、iPad 获得了不同的价值。有什么方法可以找到使用 Accelerometer，因为我将它用于后台应用程序。UIDeviceOrientation 不适用于后台应用程序。

提前致谢。

# javascript - 我在哪里放置 NaN 代码？

> ID：15226213
> 
> 赞同：0
> 
> 时间：2013-03-05T14:23:26.447
> 
> 标签：javascript, countdowntimer

这是一个新问题。如果没有输入任何内容或文本，我想让我的 Nan 说“这不是数字”。我知道物理代码，但我不知道把它放在哪里，或者我是否必须创建一个函数。无论我把它放在哪里，它要么循环并说出首先输入的内容，然后是“这不是一个数字”或“这不是一个数字”，然后是 NaN，或者它根本不起作用。

```
javacript:
window.onload = function (){

var myDiv = document.getElementById("wrapper");
wrapper.setAttribute("align","center");
var startButton = document.getElementById("start");
var pauseButton = document.getElementById("pause");
var secondsBlock = document.getElementById("seconds");
var timer = document.getElementById("timer");
var newTime = document.createElement("h1");

    newTime.innerHTML = secondsBlock.value;
    timer.appendChild(newTime);

    //setTimeout(function countdown () {
     var numbers = (newTime.innerHTML);
     newTime.innerHTML = numbers;

var newNumber;

function countdown(count){

    newNumber =secondsBlock.value;
    var numbers = (newNumber);
    newTime.innerHTML = numbers;

    stopper = setInterval(reduceAndShow, 1000);

    if (numbers <10){
        newTime.style.color = "red";
        newTime.innerHTML = "0" + numbers;
    };   

};

function reduceAndShow(){
    newNumber--;
    var numbers = (newNumber);
    newTime.innerHTML = numbers;

    stopCountdown();

    if (newNumber <10){
        newTime.style.color = "red";
        newTime.innerHTML= "0" + newNumber;
    };  

};

function stopCountdown(){
    if(newNumber <= 0){
    clearInterval(stopper);
    };
};

startButton.onclick = function(){
    countdown();
};  

function pauseBut(){
    clearInterval(stopper);
};

pauseButton.onclick =function(){
    pauseBut()
    };

html:
<div id="wrapper">
Seconds: <input type="text" name= "seconds" id="seconds"> <input type="button"    
value="Start" id="start"> <input type="button" value="Pause" id="pause">

<div id="extraText"></div>

 <div id="timer"></div>
 </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T14:47:30.713

您应该让您的示例在 JSFiddle.net 中运行，以便人们可以看到整个事情，并为您调查为什么它不起作用。

[这是我为你做的一个。](http://jsfiddle.net/QxdUy/)

我已将您的代码更改为以下代码。主要区别是我将它分为两​​个功能。一个检查输入是否为有效数字，另一个进行倒计时/显示。我改变的另一件小事是你声明倒计时函数的方式，你声明了两次，我已经改变了它，所以它只声明了一次：

```
window.onload = function(){

    var myDiv = document.getElementById("wrapper");
    var startButton = document.getElementById("start");
    va r pauseButton = document.getElementById("pause");
    var secondsBlock = document.getElementById("seconds");
    var timer = document.getElementById("timer");
    var newTime = document.createElement("h1");

    function countdown(count) {
        newTime.innerHTML = count;
        if (count < 10) {
            newTime.style.color = "red";
        };
        timer.appendChild(newTime);
        if (count > 0) {
            setTimeout(function () {
                countdown(count - 1);
            }, 1000);
        }
    }

    function testInput() {
        var count = seconds.value;
        if (count == "" || isNaN(count)) {
            newTime.innerHTML = "This is not a number";
            timer.appendChild(newTime);
        } else if (count > 100) {
            newTime.innerHTML = "Number must be between 0 and 99"
            timer.appendChild(newTime);
        } else {
            countdown(count);
        }

    }

    startButton.onclick = testInput;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T14:32:49.593

看起来像一个非常简单的案例

```
if (typeof(seconds.value) == "number") { newTime.innerHTML = seconds.value; }
else { newTime.innerHTML = "This is not a number"; }
timer.appendChild(newTime); 
```

# python - 有没有办法在 mongodb 中获取集合的所有字段名称？

> ID：15226218
> 
> 赞同：6
> 
> 时间：2013-03-05T14:23:33.680
> 
> 标签：python, mongodb, python-2.7

有什么方法可以在 MongoDb 中获取集合的字段（列名）。就像我们在mysql中一样：

```
SHOW columns FROM table_name 
```

或任何检查集合中是否存在特定字段的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T14:32:09.127

第一个问题不，因为集合中的每个文档都是独立的；第二个问题是（使用`$exists`）：

```
# Get the count of docs that contain field 'fieldname'
db.coll.find({'fieldname': {'$exists': 1}}).count() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T14:28:38.273

在 MongoDB 中，每个条目都可以包含不同数量的字段，以及不同的字段名称。这就是为什么 Mongo API 中没有这样的命令的原因：在 MySQL 中，您可以这样做，因为每一行都将具有相同数量的列和相同的列名。在 MongoDB 中，你不能做出这个假设。您可以做的是通过以下方式检查检索到的文档中是否存在字段：

```
if field_name in doc:
    # Do stuff. 
```

`field_name`您要检查是否存在的“列”名称在哪里，而 doc 是光标指向的当前名称`doc`。请记住，这`doc`是一个 dict，因此您可以像对待 Python 中的任何其他 dict 一样对待它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-25T18:28:17.950

这不是最佳实践，但您可以在 shell 中键入

Object.keys(db.posts.findOne())

注意：这不会向您显示对象中的内部键，您可以使用 map reduce 来解决此问题，但如果您的对象很简单，这几乎可以完成任务。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T16:17:16.453

由于每个文档都是相互独立的，因此没有简单的方法可以做到这一点，但是，如果您想了解您的收藏中的内容，您可以使用 Variety，如下所述：

[http://blog.mongodb.org/post/21923016898/meet-variety-a-schema-analyzer-for-mongodb](http://blog.mongodb.org/post/21923016898/meet-variety-a-schema-analyzer-for-mongodb)

它基本上 Map Reduces 您的集合以找出您在其中的哪些字段。

正如@JohnnyHK 所说，您可以使用以下方法检查字段的存在： [http](http://docs.mongodb.org/manual/reference/operator/exists/)`$exists` : //docs.mongodb.org/manual/reference/operator/exists/

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T15:05:20.080

我在处理一些第三方异构数据时遇到了同样的问题，我在整个集合上使用 map reduce 解决了这个问题，这是我使用的 js 代码，以防你发现它有用：

```
function MapKeys() {      
var tmp,tmpEmpty,ChildObjTp,ChildIsAr; 
var levelCurrent=0; 
var record=this;
function isArray(obj) {return typeof(obj)=='object'&&(obj instanceof Array);}  
//function emptyIf(obj){if (obj=='tojson')   {return  ' ';} else {return obj+' '}; }  //@note date fields return .tojson so strip it
function emptyIf(obj){if (typeof(this[obj])=='function')   {return  ' ';} else {return obj+' ';} }  //@note date fields return .tojson so strip it
//var toType = function(obj) {      // * http://javascriptweblog.wordpress.com/2011/08/08/fixing-the-javascript-typeof-operator/
//    return ({}).toString.call(obj).match(/\s([a-zA-Z]+)/)[1].toLowerCase() 
//  }
function keysToArray(obj,propArr,levelMax, _level) {
    /** example: r1=keysToArray(doc,[null,[] ],2,0) 
        _level is used for recursion and should always called with 0
        if levelMax is negative returns maximum level
        levelMax=0 means top level only 2 up to 2nd depth level etc.
    */ 
        for (var key in obj) { 
            if (obj.hasOwnProperty(key)) { 
                if (obj[key] instanceof Object && ! (obj[key]  instanceof Array))  
                    if (levelMax < 0 || _level+1  <= levelMax) { 
                        {propArr[1].push(keysToArray(obj[key],[key,[] ],levelMax,_level+1));}
                    }
                    else {}  //needed coz nested if ?  
                {propArr[1].push(key);} 
            }
        } 
        return  propArr;
    } 
//----------------------------------------------------------------------------------------------
function arrayToStr(lst,prevKey,delimiter, inclKeys,levelMax,_level,_levelMaxFound) {
    /** example: r2=arrayToStr(r1,'','|',true,2,0,0)
        _level and _levelMaxFound is used for recursion and should always called with value 0
        if levelMax is negative returns maximum level
        levelMax=0 means top level only 2 up to 2nd depth level etc.
    */ 
        var rt,i;
        _levelMaxFound=Math.max(_level,_levelMaxFound);
        if (prevKey !=='') {prevKey += '.';}
        var rtStr ='';  
        if (lst[0])     {prevKey += lst[0]+'.';} 
        if (inclKeys)   {rtStr += prevKey.slice(0,-1);} 
        for (var n in lst[1]) {
            i=lst[1][n];
            if (typeof(i)=='string') {
                rtStr += delimiter + prevKey + i;
            }
            else
            {
                if (levelMax < 0 || _level+1  <= levelMax) {
                    rt=arrayToStr(i,prevKey.slice(0,-1),delimiter, inclKeys,levelMax,_level+1,_levelMaxFound);
                    rtStr += delimiter + rt[0];
                    _levelMaxFound=Math.max(rt[1],_levelMaxFound);
                }
                else {} 
            }
        }
        if (rtStr[0] == delimiter) {rtStr=rtStr.slice(1);}  // Lstrip delimiters if any
        return [rtStr,_levelMaxFound]
    }
//----------------------------------------------------------------------------------------------

var keysV=keysToArray(this,[null,[] ] ,parms.levelMax, 0);   // we can't sort here coz array is nested
keysV = arrayToStr(keysV,'',' ', parms.inclHeaderKeys,-1,0,0); 
var MaxDepth=keysV[1];
keysV=keysV[0].split(' ');  // so we can sort 
keysV.sort();               // sort to make sure indentical records map to same id 
keysV=keysV.join(' ');
emit  ({type:'fieldsGrp',fields:keysV}, {cnt:1, percent:0.0,depth:MaxDepth,exampleIds:[this._id]});}

function ReduceKeys (key, values) { 
//var total = {cnt:0,percent:0.0,exampleIds:[]}  
var total = {cnt:0, percent:0.0,depth:values[0].depth,exampleIds:[]}
for(var i in values) {
    total.cnt += values[i].cnt; 
    if (total.exampleIds.length < parms.Reduce_ExamplesMax){ 
        total.exampleIds = values[i].exampleIds.concat(total.exampleIds);  
        }
    } 
return total;} 
```

# label - 2D 图上的标签，在 gnuplot 4.0 中是否可能

> ID：15226221
> 
> 赞同：0
> 
> 时间：2013-03-05T14:23:42.763
> 
> 标签：label, gnuplot

我已经在 gnuplot 中看到了几个标签示例（其中两列定义了 2D 图，第三列用于制作适用于 2D 图中点的标签）但我似乎无法让它们工作我的gnuplot。

我们有 4.0，似乎标准示例适用于 4.2 及更高版本。

有什么方法可以使用三列在 gnuplot 4.0 中定义带有标签的二维图？

我试过这样的事情：

```
plot "datafile.gnu" using ($3+3):($4+3):2 with labels, "datafile.gnu" using 3:4 with lines
plot "datafile.gnu" using 3:4:2 with labels, "datafile.gnu" using 3:4
plot "datafile.gnu" using 3:4 with lines, '' using 2 with labels
.... 
```

3 & 4 是 x & y 的列，2 是包含我想要在每个点的标签的列。

无论我尝试什么，我都会收到错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T01:05:54.300

gnuplot4.0 很古老。因此，我无权访问它的副本——但是，您可以尝试这样的事情：

```
!awk '{printf "set label \"%s\" at %f,%f point\n",$3,$1,$2 }' datafile.gnu > labels.gnuplot
load "labels.gnuplot" 
```

# objective-c - 滑块值，int 到二进制转换

> ID：15226224
> 
> 赞同：0
> 
> 时间：2013-03-05T14:23:47.523
> 
> 标签：objective-c, cocoa-touch

我想将 UISlider 值的 value 属性更改为其二进制形式。

至于我做了什么：

```
-(IBAction)setValue:(id)sender
{

    int value =(int)([sliderValue value] *200);

    NSLog(@"slider value int %i", value);

    NSLog(@"hex 0x%02X",(unsigned int)value);

    NSMutableArray *xx;
    [xx addObject:[NSNumber numberWithInt:value]];

    NSLog(@"%@",xx);

    NSInteger theNumber = [[xx objectAtIndex:value]intValue];
    NSLog(@"%@",theNumber);
    NSMutableString *str = [NSMutableString string];
    NSInteger numberCopy = theNumber; // so won't change original value
    for(NSInteger i = 0; i < 8 ; i++) {
        // Prepend "0" or "1", depending on the bit
        [str insertString:((numberCopy & 1) ? @"1" : @"0") atIndex:0];
        numberCopy >>= 1;
    }

    NSLog(@"Binary version: %@", str);

} 
```

但是，有一个问题。每当滑块值更改时，它都会转换为整数和十六进制，但不会转换为二进制。谁能帮我找出我犯错的地方？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T14:59:15.963

```
- (IBAction)setValue:(id)sender
{
    NSInteger value = (NSInteger)([sliderValue value] * 200.0);

    NSMutableString *binaryString = [[NSMutableString alloc] init];
    for(NSInteger numberCopy = value; numberCopy > 0; numberCopy >>= 1)
    {
        // Prepend "0" or "1", depending on the bit
        [binaryString insertString:((numberCopy & 1) ? @"1" : @"0") atIndex:0];
    }

    NSLog(@"%@", binaryString);
} 
```

这应该记录值的二进制表示。除了您的数组缺少初始化程序（为简洁起见，我已经完全删除）之外，您的原始文件存在缺陷，因为您使用了从 0 到 8 的索引，这意味着它只会记录值的前 8 位。`NSInteger`是 32 位或 64 位，这就是为什么您从 Stack Overflow 中提取的原始代码改为检查我们进行位移的值是否已达到零的原因。此外，正确的说明符`NSInteger`是`%ld`在将 a 转换`NSInteger`为 a之后`long`，而不是`%@`。记录对象方法`%@`返回的字符串。`description`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T14:39:47.417

这：

```
NSMutableArray *xx;
[xx addObject:[NSNumber numberWithInt:value]]; 
```

你不需要创建 NSMutableArray 的实例，你只需声明一个指向它的指针。分配初始化它，它会没事的。

# python - 文件一级路径中的导入模型应用程序出错

> ID：15226226
> 
> 赞同：1
> 
> 时间：2013-03-05T14:19:36.997
> 
> 标签：python, django, exception

当我尝试`sys.path`从 django 项目中的文件添加新的 python 路径时出现错误。我这样做是因为我需要创建一个 python 脚本来在数据库中包含一个 csv 文件。我有一个像这样的一般项目的应用程序：

```
/project/Scripts/file.py 
```

一般项目是这样的：

```
/project/project/ 
```

即，我需要在路径中包含它在一般项目中的应用程序，以使用此应用程序的模型。

我在文件中的行如下：

```
import sys

sys.path.append('absolut path')

from app import models
from app.models import model 
```

当我从终端弹出这个文件时出现的错误是：

```
user:~/repositorios/project/Scripts$ python file.py 

Traceback (most recent call last):

  File "file.py", line 8, in <module>

    from app import models

  File "path", line 1, in <module>

    from django.db import models

  File "/usr/local/lib/python2.7/dist-packages/django/db/__init__.py", line 11, in <module>

    if settings.DATABASES and DEFAULT_DB_ALIAS not in settings.DATABASES:

  File "/usr/local/lib/python2.7/dist-packages/django/conf/__init__.py", line 52, in __getattr__

self._setup(name)

  File "/usr/local/lib/python2.7/dist-packages/django/conf/__init__.py", line 45, in _setup
    % (desc, ENVIRONMENT_VARIABLE))

django.core.exceptions.ImproperlyConfigured: Requested setting DATABASES, but settings are not configured. You must either define the environment variable DJANGO_SETTINGS_MODULE or call settings.configure() before accessing settings.user:~/repositorios/project/Scripts$ python file.py 

Traceback (most recent call last):

  File "file.py", line 8, in <module>

    from app import models

  File "path", line 1, in <module>

    from django.db import models

  File "/usr/local/lib/python2.7/dist-packages/django/db/__init__.py", line 11, in <module>

    if settings.DATABASES and DEFAULT_DB_ALIAS not in settings.DATABASES:

  File "/usr/local/lib/python2.7/dist-packages/django/conf/__init__.py", line 52, in __getattr__

self._setup(name)

  File "/usr/local/lib/python2.7/dist-packages/django/conf/__init__.py", line 45, in _setup
    % (desc, ENVIRONMENT_VARIABLE))

django.core.exceptions.ImproperlyConfigured: Requested setting DATABASES, but settings are not configured. You must either define the environment variable DJANGO_SETTINGS_MODULE or call settings.configure() before accessing settings. 
```

我有这样的项目结构：

*   页
    *   脚本
        *   文件.py
    *   页
        *   应用程序
            *   **初始化**.py
            *   模型.py
            *   测试.py
            *   视图.py

我正在 Scripts 的“File.py”中编写代码，我想将“app”的模型使用到“Scripts”文件夹中。

当我尝试（在 File.py 中）

> > '导入应用程序'
> > 
> > '从应用程序导入模型'

出现一个错误，上面写着：“模块'app'不存在”。

我尝试使用（在 File.py 中）编写路径：

> > 导入系统
> > 
> > sys.path.append(路径)
> > 
> > 导入应用
> > 
> > 从应用导入模型

如何在 File.py 中使用 app 的模型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:53:34.677

您正在正确设置 sys.path，但是因为您正在处理 Django 模型，所以您还需要导入您的设置。

回溯应该给你一些关于哪里出了问题的迹象。特别是这一行：

```
django.core.exceptions.ImproperlyConfigured: Requested setting DATABASES, but settings are not configured. You must either define the environment variable DJANGO_SETTINGS_MODULE or call settings.configure() before accessing settings.user:~/repositorios/project/Scripts$ python file.py 
```

查看此[链接](http://www.b-list.org/weblog/2007/sep/22/standalone-django-scripts/)以了解正确导入 Django 模型的几种不同方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T14:34:08.390

```
foo.bar.__path__.append('sample/foo/bar')
from foo.bar import app 
```

# java - Jasper 报告中的对齐方式

> ID：15226231
> 
> 赞同：-1
> 
> 时间：2013-03-05T14:24:03.633
> 
> 标签：java, swing, jasper-reports, alignment

我可以通过Java代码（Swing）为Jasper报告传递参数的高度，宽度，顶部，左侧等属性吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:44:41.733

您的问题不是很清楚或具体，我不知道您尝试或搜索了什么。因此，不确定您需要传递哪种类型的参数或您想要的方式，但也许这会帮助您有一个起点：[JasperFillManager.fillReport](http://jasperreports.sourceforge.net/api/net/sf/jasperreports/engine/JasperFillManager.html#fillReport%28net.sf.jasperreports.engine.JasperReport,%20java.util.Map%29)。您可以通过`JasperFillManager.fillReport`. 另请查看可能有帮助的[导出器参数。](http://jasperreports.sourceforge.net/api/net/sf/jasperreports/engine/JRExporterParameter.html#JRExporterParameter%28java.lang.String%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T19:21:10.523

我了解您想通过参数定义对象的样式，但无法在参数中定义高度、宽度等样式。您可以做的是使用条件样式。

# android - 我们如何创建每 30 秒发送一次通知而没有活动的 Android 服务？

> ID：15226232
> 
> 赞同：-1
> 
> 时间：2013-03-05T14:24:03.437
> 
> 标签：android, android-intent, android-service, android-notifications

***你好，朋友，***

*我无法在我的设备中运行 Android 服务。它在模拟器中运行良好。* 这是我的示例代码：请查看代码。

***MyScheduleReceiver.java：***

```
 package com.smpt.wi_ficonnector;
    import java.util.Calendar;
    import android.app.AlarmManager;
    import android.app.PendingIntent;
    import android.content.BroadcastReceiver;
    import android.content.Context;
    import android.content.Intent;

    public class MyScheduleReceiver extends BroadcastReceiver {

// Restart service every 30 seconds
private static final long REPEAT_TIME = 1000 * 30;

@Override
public void onReceive(Context context, Intent intent) {
    AlarmManager service = (AlarmManager) context
            .getSystemService(Context.ALARM_SERVICE);
    Intent i = new Intent(context, MyStartServiceReceiver.class);
    PendingIntent pending = PendingIntent.getBroadcast(context, 0, i,
            PendingIntent.FLAG_CANCEL_CURRENT);
    Calendar cal = Calendar.getInstance();
    // Start 30 seconds after boot completed
    cal.add(Calendar.SECOND, 30);
    //
    // Fetch every 30 seconds
    // InexactRepeating allows Android to optimize the energy consumption
    service.setInexactRepeating(AlarmManager.RTC_WAKEUP,
            cal.getTimeInMillis(), REPEAT_TIME, pending);

    // service.setRepeating(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(),
    // REPEAT_TIME, pending);

}
} 
```

***我的服务.java：***

这个类调用wifiservice类。这将启动服务。

```
 package com.smpt.wi_ficonnector;
    import android.app.Service;
    import android.content.Intent;
    import android.os.IBinder;

    public class MyService extends Service {

@Override
public void onCreate() {
    super.onCreate();
}

@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    return super.onStartCommand(intent, flags, startId);
}

@Override
public IBinder onBind(Intent intent) {
    return null;
}

} 
```

***MyStartServiceReceiver.java：***

这个类调用我的服务类。该服务类将向用户显示通知。

```
 package com.smpt.wi_ficonnector;
    import android.content.BroadcastReceiver;
    import android.content.Context;
    import android.content.Intent;

    public class MyStartServiceReceiver extends BroadcastReceiver {

@Override
public void onReceive(Context context, Intent intent) {
    Intent service = new Intent(context, WifiService.class);
    context.startService(service);
}
} 
```

***WifiService.java：***

此类用于检查 wifi 连接并每 30 秒发送一次通知。

包 com.smpt.wi_ficonnector；

```
 import android.app.Notification;
    import android.app.NotificationManager;
    import android.app.PendingIntent;
    import android.app.Service;
    import android.content.Context;
    import android.content.Intent;
    import android.net.ConnectivityManager;
    import android.net.NetworkInfo;
    import android.os.Binder;
    import android.os.IBinder;

    public class WifiService extends Service {

private final IBinder mBinder = new MyBinder();

@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    // TODO Auto-generated method stub

    boolean networkStatus = haveNetworkConnection();
    ConnectivityManager connManager = (ConnectivityManager) getSystemService(CONNECTIVITY_SERVICE);
    NetworkInfo netInfo = connManager.getNetworkInfo(ConnectivityManager.TYPE_MOBILE);
    Notification not;
    NotificationManager mNotificationManager = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
    if(networkStatus == true || netInfo.isConnected() == true){
         not = new Notification(R.drawable.on, "Wi-Fi Connector", System.currentTimeMillis());
    } else {
         not = new Notification(R.drawable.off, "Wi-Fi is not connector", System.currentTimeMillis());
    }

    PendingIntent contentIntent = PendingIntent.getActivity(this, 0, new Intent(this, MainActivity.class), Notification.FLAG_ONGOING_EVENT);        
    not.flags = Notification.FLAG_ONGOING_EVENT;
    if(networkStatus == true || netInfo.isConnected() == true){
        not.setLatestEventInfo(this, "Wi-Fi Connector" , "Wi-Fi is connected. You can download data.", contentIntent);
    } else {
        not.setLatestEventInfo(this, "Wi-Fi Connector" , "Wi-Fi is not connected. You can not download data.", contentIntent);
    }

    mNotificationManager.notify(1, not);

    return Service.START_NOT_STICKY;
}

@Override
public IBinder onBind(Intent intent) {
    return mBinder;
}

public class MyBinder extends Binder {
    WifiService getService() {
        return WifiService.this;
    }
}

private boolean haveNetworkConnection() {
    boolean haveConnectedWifi = false;
    boolean haveConnectedMobile = false;

    ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo[] netInfo = cm.getAllNetworkInfo();
    for (NetworkInfo ni : netInfo) {
        if (ni.getTypeName().equalsIgnoreCase("WIFI"))
            if (ni.isConnected())
                haveConnectedWifi = true;
        if (ni.getTypeName().equalsIgnoreCase("MOBILE"))
            if (ni.isConnected())
                haveConnectedMobile = true;
    }
    return haveConnectedWifi || haveConnectedMobile;
}
} 
```

***AndroidManifest.xml：***

此清单文件告诉 android 应用程序在后台运行服务。它不会使用任何活动。

```
 <?xml version="1.0" encoding="utf-8"?>
    <manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.smpt.wi_ficonnector"
    android:versionCode="1"
    android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="11" />
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE"></uses-permission>
<uses-permission android:name="android.permission.CHANGE_WIFI_STATE"></uses-permission>
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <!--activity
        android:name="com.smpt.wi_ficonnector.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity-->

    <service
        android:name=".WifiService"
        android:icon="@drawable/ic_launcher"
        android:label="@string/service_name" >
    </service>

    <service
        android:name="MyService"
        android:process=":meinprocess"
        android:icon="@drawable/ic_launcher"
        android:label="@string/service_name" >
    </service>

    <receiver android:name="MyScheduleReceiver" >
        <intent-filter>
            <action android:name="android.intent.action.BOOT_COMPLETED" />
        </intent-filter>
    </receiver>
    <receiver android:name="MyStartServiceReceiver" >
    </receiver>

</application> 
```

**我的代码在模拟器中运行良好。但它不适用于真实设备。请帮我找出问题所在。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T15:29:50.307

`BOOT_COMPLETED`从 Android 3.1 开始，除非用户至少运行了一次应用程序，否则您将不会收到Intent。由于清单中没有活动，因此用户无法运行您的应用程序。这不适用于运行 Android 3.1 或更高版本的设备。

[请参阅http://developer.android.com/about/versions/android-3.1.html](http://developer.android.com/about/versions/android-3.1.html)上的“在已停止的应用程序上启动控件”

# c# - 不适合 LINQ？

> ID：15226236
> 
> 赞同：4
> 
> 时间：2013-03-05T14:24:09.293
> 
> 标签：c#, asp.net, linq

有没有办法按组过滤员工：例如：

```
List<String> notInGroups = GetNotInGroups();

    var list = from p in employees 
    where p.Group.Name notin(notInGroups)
    select p; 
```

有没有办法做这样的事情？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T14:25:34.373

你可以做！包含，如：

```
var list = from p in employees
where !notInGroups.Contains(p.Group.Name)
select p; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T14:26:53.717

无法测试，但不会像这样的工作？

```
var notInGroups = GetNotInGroups();
var list = from p in employees 
           where notInGroups.Contains(p.Group.Name) == false
           select p; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T14:27:05.957

试试`where !notInGroups.Contains(p.Group.Name);`你的`WHERE`条款。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T14:29:29.500

你可以做这样的事情..

```
List<String> notInGroups = GetNotInGroups();

var list = from p in employees 
           where !(notInGroups.Contains(p.Group.Name))
           select p; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-05T14:34:36.303

`List`不是特别适合在集合中搜索以查看它是否包含特定项目的任务，这正是您想要做的。虽然编写代码很容易（已经有很多答案显示如何），但您将从使用可以更有效地搜索的更合适的数据结构中显着受益，例如`HashSet`：

```
var notInGroups = new HashSet<string>(GetNotInGroups());

var list = from p in employees 
    where !notInGroups.Contains(p.Group.Name)
    select p; 
```

# javascript - 当用户登录时，FB.getLoginStatus() 在 Firefox 中返回“未知”

> ID：15226244
> 
> 赞同：0
> 
> 时间：2013-03-05T14:24:21.063
> 
> 标签：javascript, facebook, firefox

在我的网站中，我测试用户是否登录 Facebook 以建议他/她喜欢我的 Facebook 网站页面。

然后，我使用常规的 Facebook Js SDK 函数来了解用户是否登录：

```
FB.getLoginStatus(function(response) {
    if (response.status === 'connected') {
        var accessToken = response.authResponse.accessToken;
        fbuid = response.authResponse.userID;
        status = 'connected';
    } else if (response.status === 'not_authorized') {
        fbuid = null;
        status = 'not_authorized';
    } else { // the user isn't logged in to Facebook.
        status = 'generic';
        fbuid = 1;
    }

    that.evaluateFbStatus(status, fbuid);
} 
```

它适用于除 Firefox 之外的所有浏览器。

在 Firefox 中，即使用户登录 Facebook 并且状态为**not_authorized**或**connected ，它也总是返回****unknown**。

 ****接受任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T14:59:01.097

问题是由于第三方 cookie 造成的。

要在 Firefox 中使用 Facebook SDK 功能，需要打开设置并启用第三方 cookie*首选项 > 隐私 > 接受第三方 cookie*

请查看[此页面](http://developers.facebook.com/bugs/325967120821879/)以获取更多详细信息。****

# java - 获取非同质容器元素的类型

> ID：15226249
> 
> 赞同：0
> 
> 时间：2013-03-05T14:24:36.883
> 
> 标签：java, generics

我有一个`ArrayList<Container>`，但是，`Container`可以是`Container<String>`等`Container<Integer>`，在迭代数组列表时，我需要找出它是什么类型的容器并做出相应的响应。我知道java有类型擦除，但是有没有办法预先存储类型并在以后检索它？就像是

```
public T type; 
```

并在以后使用它，例如

```
container.type A = container.dosomething(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T14:30:01.890

在运行时，Java 不会保留泛型的类型信息。发生类型删除，并且所有容器都被认为是相同的运行时类型。使用反射可以获得有关泛型的信息，但很少值得付出努力。您应该考虑重新设计代码，或者使用`getClass()`容器中的元素来确定容器中实际元素的类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T19:08:32.970

变量的类型是编译时的概念。它的目的只是为了允许编译器确定允许对该变量或表达式进行哪些操作。

因此，“在编译时不知道的类型”是完全没用的，因为编译器不知道可以用它做什么。所以变量也可以是 typed `Object`。

# pointers - 无法为模块中的派生数据类型分配初始值

> ID：15226252
> 
> 赞同：0
> 
> 时间：2013-03-05T14:24:43.543
> 
> 标签：pointers, module, initialization, fortran, derived-types

在 Fortran`module`中，我试图将初始值分配给其组件是过程指针的派生数据类型，但收到错误消息：意外指针分配。

在 a`module`中，如何将初始值赋给包含过程指针的派生类型？

```
 module pointer_mod  

    use legendrePolynomials
    implicit none

    interface
      function func (z)
      real*8 :: func
      real*8, intent (in) :: z
      end function func
    end interface

    type proc_ptr
      procedure (func), pointer, nopass :: f_ptr
    end type proc_ptr

    type(proc_ptr), dimension(6) :: basis

    basis(1) % f_ptr => Legendre0 ! or basis(1) % f_ptr => null()

    end module pointer_mod 
```

在哪里：

```
 function Legendre0(x) result(y)
    real, intent(in) :: x
    real :: y
    y = 1
    end function 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T15:14:25.207

您收到错误消息，因为您在任何子例程之外发出指针分配，通常只应发生声明。将赋值放入子程序（见下文）表明，如果您确保该`Legendre0()`函数也使用 real*8 类型以匹配接口声明（出于测试目的，我还将 Legendre 函数放在相同的模块）：

```
module pointer_mod  
  implicit none

  interface
    function func (z)
      real*8 :: func
      real*8, intent (in) :: z
    end function func
  end interface

  type proc_ptr
    procedure (func), pointer, nopass :: f_ptr
  end type proc_ptr

  type(proc_ptr), dimension(6) :: basis

contains

  subroutine test()
    basis(1)%f_ptr => Legendre0 ! or basis(1) % f_ptr => null()
  end subroutine test

  function Legendre0(x) result(y)
    real*8, intent(in) :: x
    real*8 :: y
    y = 1
  end function Legendre0

end module pointer_mod 
```

作为附加评论：您应该考虑声明您的真实变量，例如

```
integer, parameter :: dp = kind(1.0d0)
real(dp) :: whatever 
```

而不是`real*8`过时的符号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T15:33:07.887

另一种解决方案是将 Legendre0 的函数指针设为所有类型 (proc_ptr) 变量的默认值。

```
type proc_ptr
  procedure (func), pointer, nopass :: f_ptr => Legendre0
end type proc_ptr 
```

但这可能不是您想要的，因为您正在处理一个指针数组。

# visual-c++ - 迭代八叉树遍历

> ID：15226254
> 
> 赞同：1
> 
> 时间：2013-03-05T14:24:53.457
> 
> 标签：visual-c++, octree

尽管我尝试以二叉树遍历的方式接近它，但我无法弄清楚迭代八叉树遍历的过程。对于我的问题，我有具有子指针和父指针的八叉树节点，我想迭代并且只将叶节点存储在堆栈中。另外，迭代遍历比递归遍历更快吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T15:01:16.470

确实有点像二叉树遍历，只是需要存储一点中间信息。递归算法本身不会变慢，但会为 O(log8) 递归调用使用更多的堆栈空间（八叉树中的 10 亿个元素大约有 10 级）。迭代算法也需要相同数量的空间来提高效率，但您可以将其放入堆中，以免堆栈溢出。

递归地你会做（伪代码）：

```
function traverse_rec (octree):
    collect value  // if there are values in your intermediate nodes
    for child in children:
         traverse_rec (child) 
```

达到迭代算法的最简单方法是使用堆栈或队列进行深度优先或呼吸优先遍历：

```
 function traverse_iter_dfs(octree):
     stack = empty
     push_stack(root_node)
     while not empty (stack):
         node = pop(stack)
         collect value(node)
         for child in children(node):
             push_stack(child) 
```

Replace the stack with a queue and you got breath first search. However, we are storing something in the region of O(7*(log8 N)) nodes which we are yet to traverse. If you think about it, that's the lesser evil though, unless you need to traverse *really* big trees. The only other way is to use the parent pointers, when you are done in a child, and then you need to select the next sibling, somehow.

If you don't store in advance the index of the current node (in respect to it's siblings) though, you can only search all the nodes of the parent in order to find the next sibling, which essentially doubles the amount of work to be done (for each node you don't just loop through the children but also through the siblings). Also, it looks like you at least need to remember which nodes you visited already, for it is in general undecidable whether to descend farther down or return back up the tree otherwise (prove me wrong somebody).

All in all I would recommend against searching for such a solution.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T14:51:20.947

取决于你的目标是什么。您是否试图查找节点是否可见、光线是否与其边界框相交，或者节点中是否包含点？

假设您正在做最后一个，检查一个点是否/应该包含在节点中。我将向 Octnode 添加一个方法，该方法获取一个点并检查它是否位于 Octnode 的边界框内。如果它确实返回 true，否则返回 false，非常简单。从这里，调用从头节点开始的向下钻取方法并检查每个子节点，简单的“for”循环，以查看它位于哪个 Octnode 中，最多可以是一个。

这是您的迭代与递归算法发挥作用的地方。如果您想要迭代，只需存储指向当前节点的指针，并将此指针从头节点交换到包含您的点的节点。然后继续向下钻取直到达到最大深度或找不到包含它的 Octnode。如果您想要一个递归解决方案，那么您将在找到该点的 Octnode 上调用此向下钻取方法。

我不会说迭代与递归在速度方面有很大的性能差异，但它可能在内存性能方面存在差异。每次递归时，都会在堆栈中添加另一个调用深度。如果你有一个很大的八叉树，这可能会导致大量的调用，可能会耗尽你的堆栈。

# spring - Spring缓存框架可以用来缓存不可序列化的对象吗？

> ID：15226255
> 
> 赞同：4
> 
> 时间：2013-03-05T14:24:55.573
> 
> 标签：spring, ehcache, serializable

我需要缓存一个无法序列化的对象。我正在寻找一些方法来通过包装器缓存这些类型的对象。可以做到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T16:01:25.303

您要缓存的对象不需要序列化，但是您生成的用于存储相应对象的键当然必须序列化。

*   [使用 Spring Annotations 和 Ehcache 缓存示例](http://web.archive.org/web/20130605094701/http://developers-blog.org/blog/de/2010/06/07/Caching-Example-with-Spring-Annotations-and-Ehcache)
*   [使事情@Cacheable](http://web.archive.org/web/20140403022227/http://www.bagdemir.com/2011/10/06/making-things-cacheable/)
*   [ehcache-spring-annotations（使用可缓存）](http://code.google.com/p/ehcache-spring-annotations/wiki/UsingCacheable)
*   [ehcache-spring-annotations（常见问题）](http://code.google.com/p/ehcache-spring-annotations/wiki/FrequentlyAskedQuestions)

# c# - Javascript regexp.test() .NET 等价物

> ID：15226258
> 
> 赞同：1
> 
> 时间：2013-03-05T14:24:59.960
> 
> 标签：c#, javascript, regex, equivalent

如何在 C# 中执行以下操作：

```
var re = /^\d{4}(\/\d{2}){2} \d{2}(:\d{2}){2}$/;
re.test('2013/03/05 15:22:00'); // returns true 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T14:27:10.737

您可以`Regex.IsMatch`改用 ( [docs](http://msdn.microsoft.com/en-us/library/sdx2bds0.aspx) )。

```
Regex.IsMatch("2013/03/05 15:22:00", @"^\d{4}(\/\d{2}){2} \d{2}(:\d{2}){2}$"); // true if match 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-05T14:30:50.843

下面的代码应该能让你到达你想去的地方。

```
Regex rx = new Regex(@"^\d{4}(\/\d{2}){2} \d{2}(:\d{2}){2}$");
String test = "2013/03/05 15:22:00";

if (rx.IsMatch(test))
{
    //Test String matches
}
else
{
    //Test String does not match
} 
```

# android - 三星应用商店中的 Google Play 应用

> ID：15226260
> 
> 赞同：2
> 
> 时间：2013-03-05T14:25:05.957
> 
> 标签：android, google-play, samsung-smart-tv

我四处搜索并试图找出有关新三星应用商店的一些信息。我为它构建了一个应用程序`Google Play`，我想知道是否可以将它部署到`Samsung App Store`.

我猜 Android SDK 并不是专门为 Google Play 构建的。但是查看三星 SDK 文档，它似乎与标准 SDK 完全不同。

有人对三星有任何经验或知道我可以找到更多信息的链接吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T14:27:50.537

Google Play 是一个非专属应用商店。您可以通过其他渠道自由分发您的应用程序，例如 Amazon App Store、Samsung App Store、电子邮件 apk，甚至直接从您自己的网站下载。

任何使用 Android SDK 编写的应用程序*都*可以在任何运行支持的 Android 版本的设备上运行（假设 OEM 具有无错误且基于 AOSP 的 ROM）。

但请记住，某些拥有三星应用商店的设备可能没有 Google Play，并且可能无法使用应用内计费和许可等 Google 服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-28T09:03:38.757

请注意三星应用程序，他们收取巨额费用，有许多中介（代理、专员）。在 Google Play 中，您可以获得 70% 的销售额，而在三星应用程序中，您只能获得 30-35% 的销售额……而且您在 6 个月后获得报酬。

# php - PHP fopen（）创建没有修改权限的文件

> ID：15226261
> 
> 赞同：0
> 
> 时间：2013-03-05T14:25:10.560
> 
> 标签：php, linux, file-permissions

从 apache 调用的 PHP 脚本执行以下命令：

```
$h = fopen(getcwd()."tmp.txt","w");
fprintf($h,"hi");
fclose($h); 
```

生成一个由我的个人用户 ID 拥有的具有 644 权限的文件。但是，再次执行脚本会导致错误，因为 Apache/PHP 以用户 wwwrun 运行，因此没有权限覆盖文件或对其进行 chmod。

放置文件的目录在我的主目录中，具有 777 权限。我怎样才能让 PHP 创建 wwwrun 拥有的文件，或者使用 666 权限创建它，或者做其他事情，以允许它被 PHP 覆盖。

理想情况下，我正在寻找一种解决方案，该解决方案也适用于 PHP 通过使用该`exec`函数调用的外部程序创建文件的情况；这似乎遇到了同样的问题，因为外部程序作为 wwwrun 运行，但外部程序创建的文件归我的个人用户 ID 所有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T15:25:54.220

事实证明，有问题的目录安装在不支持 linux 文件权限的文件系统上。

# java - 我是否应该同步访问存储“DataSource”的最终静态属性，该属性在服务器启动时设置一次？

> ID：15226264
> 
> 赞同：0
> 
> 时间：2013-03-05T14:25:24.507
> 
> 标签：java, multithreading

我有一个静态的 final 属性存储 a `DataSource`，可以由多个线程访问。这`DataSource`是在 Tomcat 启动时设置的。

我应该同步访问这个`DataSource`吗？我担心的是，`DataSource`一个线程可能会更改内部状态，而另一个线程看不到。

我仍然不清楚是否可以在不同步的情况下访问“只读”静态字段，或者在任何情况下它是否是强制性的。

[我在这个答案](https://stackoverflow.com/a/2429278/1768736)中读到，也许只有初始化属性的方法需要同步，所以我的代码就可以了：

```
public static final DataSource myDataSource;
static {
    InitialContext context = new InitialContext();
    myDataSource = (DataSource) context.lookup("jdbc/DataSource");
} 
```

但是真的可以吗？在性能方面做到这一点的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T14:30:07.820

如果按照您的方式对其进行初始化，则访问数据源引用是线程安全的。

请记住，数据源本身中方法的线程安全性是一个完全不同的问题。即使您正确地获取了对象引用，如果不同步并被许多线程访问，它的内部状态也可能变得无效。

顺便说一句：为什么不这样写：

```
public static final DataSource myDataSource = (DataSource) new InitialContext().lookup("jdbc/DataSource"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T14:33:42.917

java.sql.DataSource 是一个接口，它的 API 没有说明任何关于安全性的内容，因此它取决于实现。例如 apache-dbcp BasicDataSource 是线程安全的，因为它的方法是同步的。

# sql - 特定月份活动的 SQL 查询

> ID：15226266
> 
> 赞同：-1
> 
> 时间：2013-03-05T14:25:40.727
> 
> 标签：sql, reporting

我们有人在两个特定日期（例如 2013 年 1 月 15 日至 2013 年 2 月 3 日）之间租房。我的任务是显示一个“活跃”报告，显示每个月有多少活跃出租。例如，这将显示在 1 月计数和 2 月计数中。

对此的任何帮助将不胜感激。我一直在寻找类似的东西，但没有找到任何东西。我对 sql 的了解主要是简单的添加/更改/删除代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T14:31:34.810

```
SELECT * FROM `rentals` WHERE `date` BETWEEN '2013-03-04' AND '2013-04-04' 
```

显然用你自己的替换表名和列名......这是MySQL，你没有指定你在发布时使用的数据库软件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T14:29:38.493

查找在两个日期之间“活动”的记录的通用方法是

```
 ...
 WHERE startDate <= @periodEnd AND endDate >= @periodStart 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T14:35:23.947

如果您想在每个月中查找活动，您需要从月份列表开始，然后将它们与活动记录进行比较。让我假设你每个月都有一个开始。

```
select months.yyyymm, count(*) as NumActives
from (select distinct to_char(startdate, 'yyyy-mm') as yyyymm
      from activity
     ) as months join
     activity a
     on yyyymm between to_char(a.startdate, 'yyyy-mm') and to_char(a.enddate, 'yyyy-mm')
group by months.yyyymm 
```

我使用 Oracle/Postgres 函数`to_char()`将日期转换为年月表示。其他数据库有其他方法来实现相同的目标。

# java - 从 xpages 客户端脚本和常规注释表单调用 HttpServlet 类？

> ID：15226268
> 
> 赞同：0
> 
> 时间：2013-03-05T14:25:41.940
> 
> 标签：java, xpages, lotus-domino, lotus

我是 Java 新手（同样，有一段时间没有接触过它）。

我有一个简单的（计划中的更复杂的）HttpServlet 类，我试图从网页调用它，无论是从常规的 Notes 表单还是 xPage 上的 csjs。

```
package com.pnc.cld;

import java.io.IOException;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

public class HelloWorld extends HttpServlet
{
    private static final long serialVersionUID = -2950148158748149L;

    public void doGet(HttpServletRequest request, HttpServletResponse response)
    throws ServletException, IOException
    {
        System.out.println("doGet: Hello World!");
    }

    public void doPost(HttpServletRequest request, HttpServletResponse response)
    throws ServletException, IOException
    {
        System.out.println("doPost: Hello World!"); 
    }
} 
```

我在[这里](http://translate.google.com/translate?hl=en&ie=UTF8&prev=_t&sl=auto&tl=en&u=http://www.ibm.com/developerworks/cn/lotus/xpage-servlet/index.html)找到了这篇文章。

它最初是中文的，所以它有点难以理解，但从我能够从中收集到的信息，您需要添加一个 IServletFactory 类，它将 servlet 映射到您的 url，以便可以在您的浏览器中调用它。

但是我遇到了错误。[这篇文章](http://hasselba.ch/blog/?p=746)修复了其中一些

但我仍然遇到一些错误。其中之一：

> ServletFactory 类型必须实现继承的抽象方法 IServletFactory.getServletMatch(String, String) ServletFactory.java

此外，文章似乎说您需要添加`com.ibm.xsp.adapter.servletFactory`到服务目录，但我在 PC 上的任何地方都找不到该文件。

有没有更好的文章或有希望的工作示例来调用 httpservlet？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T08:02:42.263

也许您应该研究 Sven 博客文章中的示例数据库。将 Domino Designer 切换到 Java 透视图并查看“代码/Java”部分。在那里你找到3个文件。其中之一处理 URL 并将它们映射到 servlet。第三个存储在 META-INF 文件夹中，并定义 IServletFactory 应在何处查找 ServletFactory 类（第二个文件）。第一个文件是 servlet 本身。但要小心：我们也遇到了示例数据库中的错误。非常简单的原因：在 servlet 代码中引发了“静态”异常：-D 删除该代码就可以了。我们在 8.5.3 机器上对此进行了测试，但我相信它也适用于旧版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T00:56:39.570

Bruce，在 Domino 上，您需要实现 servlet OSGi 样式。从我的[webDAV 中窃取 OpenNTF 上 Domino](http://www.openntf.org/internal/home.nsf/project.xsp?action=openDocument&name=WebDAV%20for%20IBM%20Domino)项目的代码。servlet 肯定在工作！

# ios - iOS静态库中的单例

> ID：15226269
> 
> 赞同：2
> 
> 时间：2013-03-05T14:25:43.030
> 
> 标签：ios, objective-c

我有一个包含单例类（FMDB SQLite 数据访问）的静态库，现在我从我的主应用程序打开连接并做一些事情......这有效，之后我的库中的一个方法想要调用我的方法单身人士，我得到的错误是

```
-[FMDatabase executeQuery:withArgumentsInArray:]: message sent to deallocated instance 0xa443960 
```

这不可能是我想要实现的吗？

这是我单身的简短版本

```
 static MySingleton* _sharedMySingleton = nil;

    FMDatabase *database;

     #ifndef __clang_analyzer__
    +(MySingleton*)sharedMySingleton
     {
    @synchronized([MySingleton class])
    {
        if (!_sharedMySingleton)
            [[self alloc] init];

        return _sharedMySingleton;
    }
      }
      #endif

    +(id)alloc
     {
    @synchronized([MySingleton class])
    {
        NSAssert(_sharedMySingleton == nil, @"Attempted to allocate a second instance of a singleton.");
        _sharedMySingleton = [super alloc];
        return _sharedMySingleton;
    }
     }

     -(Resource *)getResourceForName:(NSString *)name
    {    
    NSString *select = @"SELECT Data, MimeType FROM File WHERE FileName = ? LIMIT 1";

    NSArray *arguments = [NSArray arrayWithObject:[NSString stringWithFormat:@"/%@", name]];

    FMResultSet *s = [database executeQuery:select withArgumentsInArray:arguments];

    if (s == NULL)
    {
        FuncFileLog(@"getResourceForName file cant be loaded: %@", [database lastErrorMessage]);
        return nil;
    }
    NSData *data = nil;
    NSString *mimeType;

    while ([s next])
    {
        data = [NSData dataFromBase64String:[s stringForColumnIndex:0]];
        mimeType = [s stringForColumnIndex:1];
    }

    Resource *resource = [[[Resource alloc] initWithData:data mimeType:mimeType] autorelease];

    return resource;
    }

    -(BOOL)openDatabase
    {
    database = [FMDatabase databaseWithPath:[self getDocumentResourcePath]];
    return [database open];
    }

     -(void)closeDatabase
   {
        [database close];
       [database release];
   }

    -(void)dealloc
    {
    if (database != NULL)
    {
        [self closeDatabase];
    }
    [baseUrl release];
    [super dealloc];
    }

    @end 
```

编辑：

我发现来自 FMDatabase 的 dealloc 在我的应用程序开始返回后被调用，但不知道为什么。

编辑2：

目前我认为一个问题是这条线

数据库 = [FMDatabase databaseWithPath:[self getDocumentResourcePath]]; 在这里我必须保留对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:51:51.470

您实际上并没有分配单例实例：

```
if (!_sharedMySingleton)
    [[self alloc] init]; 
```

应该：

```
if (!_sharedMySingleton)
     _sharedMySingleton = [[self alloc] init]; 
```

并转储该覆盖的`alloc`方法。

也`database`应该是类中的实例变量，而不是全局范围。

# python - 绕过 Python 脚本的提示

> ID：15226276
> 
> 赞同：-3
> 
> 时间：2013-03-05T14:25:56.457
> 
> 标签：python

有一个 weblogic 脚本 test.sh，其中包含以下代码。

```
echo "Starting   ...."
java weblogic.WLST helloworld.py
echo "Ending ..." 
```

打印“Starting ....”后的输出提示输入以下消息

> 如果创建密钥文件后未将其保存在安全位置，则创建密钥文件会降低系统的安全性。是否要创建密钥文件？是或否

然后我必须手动按下我希望自动化为“y”的 y 或 n。

这是我除了不需要用户干预之外。

我需要以某种方式自动传递'y'，以便脚本继续流动，而不是停止用户输入。

以下是 helloworld.py 脚本的内容

```
connect(user1,p@ss,'t3://myhost:9999')
storeUserConfig(userConfigFile='userconfig.secure',userKeyFile='userkey.secure') 
disconnect() 
exit() 
```

你能帮我吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T09:29:41.680

问题已在此处得到解答->[需要来自 Unix shell 的控制-> Python -> & 返回](https://stackoverflow.com/questions/15268745/need-control-from-unix-shell-python-back)

解决方案是 python 中的 subprocess() 。

# out-of-memory - 将视频上传到 Android 中的 PandaStream

> ID：15226282
> 
> 赞同：1
> 
> 时间：2013-03-05T14:26:17.073
> 
> 标签：out-of-memory, httpurlconnection, pandastream

我想将大型视频文件上传到 pandastream。我能够通过流媒体上传小视频。但是当上传大视频时，由于内部缓冲而出现内存不足异常。所以为了克服这个问题，我尝试了以下两种方法：

**通过使用 setFixedLengthStreamingMode()** 但我得到了预期的 234 个字节的异常，但收到了 384 个字节......

**通过在此处使用 setChunkedStreamingMode()** 上传大型视频时，我得到了文件未找到的异常。

任何人都可以帮我解决问题。

# google-apps-script - 如何将 gmail 消息或线程保存到本地文件

> ID：15226286
> 
> 赞同：1
> 
> 时间：2013-03-05T14:26:27.307
> 
> 标签：google-apps-script

我正在尝试编写一个脚本，该脚本将使用给定的标签（可能，除非有人可以告诉我如何检测是否打勾）将 gmail 消息或完整线程写入本地文件。

我可以检索消息或线程，这是最后一点，在本地保存。

我已经查看了从消息内容创建文档并执行 getAs("application/PDF")，但我仍然遇到如何在本地保存它的问题。

换句话说，我正在尝试自动化“打印全部”“另存为 PDF”功能。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T16:51:54.670

ContentService 具有称为[downloadAsFile](https://developers.google.com/apps-script/class_textoutput#downloadAsFile)的功能，它允许您设置 Web 应用程序，例如当用户访问链接时开始下载文件。

[你可以在Github](https://github.com/entaq/GoogleAppsScript/blob/master/ContentService/Addressbook-VCF/Code.gs)上看到一个例子，我在[这个视频](http://www.youtube.com/watch?feature=player_detailpage&v=JRGzVdliQOQ#t=1510s)中做了一个演练。

# python - 如何在 Python3 中使用 datetime 将天数转换为月数？

> ID：15226287
> 
> 赞同：1
> 
> 时间：2013-03-05T14:26:37.150
> 
> 标签：python, datetime, python-3.3

有没有一种特殊的方法可以得出这个，还是我们必须创建循环？这个函数的参数实际上是(year, num_of_days)。但我不知道如何从中得出几个月。这是我到目前为止所拥有的（不完整），但它没有考虑到不同的月份。有没有更简单的方法来解决这个问题？提前致谢！

```
def daynum_to_date(year : int, daynum : int) -> datetime.date:
    '''Return the date corresponding to the year and the day number, daynum,
    within the year.

    Hint: datetime handles leap years for you, so don't think about them.

    Examples:
    >>> daynum_to_date(2011, 1) # first day of the year
    datetime.date(2011, 1, 1)
    >>> daynum_to_date(2011, 70)
    datetime.date(2011, 3, 11)
    >>> daynum_to_date(2012, 70)
    datetime.date(2012, 3, 10)
    '''

    import calendar
    totalmonths = 0
    i = 1
    while i < 13:
        month_days = calendar.monthrange(year,i)[1]
        months = daynum//int(month_days)
        if months in range(2):
            days = daynum % int(month_days)
            totalmonths = totalmonths + 1

        else:
            daynum = daynum - int(month_days)
            totalmonths = totalmonths + 1
            i = i + 1
        return datetime.date(year, totalmonths, days) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T18:02:36.933

你快到了：

```
import calendar
import datetime

def daynum_to_date(year : int, daynum : int) -> datetime.date:
    month = 1
    day = daynum
    while month < 13:
        month_days = calendar.monthrange(year, month)[1]
        if day <= month_days:
            return datetime.date(year, month, day)
        day -= month_days
        month += 1
    raise ValueError('{} does not have {} days'.format(year, daynum)) 
```

这使：

```
>>> daynum_to_date(2012, 366)
datetime.date(2012, 12, 31)
>>> daynum_to_date(2012, 367)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 10, in daynum_to_date
ValueError: 2012 does not have 367 days
>>> daynum_to_date(2012, 70)
datetime.date(2012, 3, 10)
>>> daynum_to_date(2011, 70)
datetime.date(2011, 3, 11)
>>> daynum_to_date(2012, 1)
datetime.date(2012, 1, 1) 
```

# jpa - JPA 警告：“没有映射与状态字段路径‘t.progress’相关联”

> ID：15226289
> 
> 赞同：6
> 
> 时间：2013-03-05T14:26:41.270
> 
> 标签：jpa, eclipselink, jpql

我将 JPA (EclipseLink 2.4.1) 与包含命名查询的映射文件一起使用。Eclipse 在我的映射文件中显示以下警告消息：

```
No mapping is associated with the state field path 't.progress'. 
```

警告的类型为`JPA Problem`。我的 -file 中的相应行`named-queries.xml`如下所示：

```
<named-query name="FinishedTasks">
    <query><![CDATA[SELECT t FROM Task t WHERE t.progress = 100]]></query>
</named-query> 
```

但是，查询在执行时运行良好，因此在运行时没有警告。

这是文件的`Task.java`样子（摘录）：

```
@Entity
public class Task extends Issue {
    private Integer progress = 0;
    public Integer getProgress() {
        return progress;
    }

    public void setProgress(final Integer progress) {
        this.progress = progress;
    }
} 
```

`Issue.java`看起来像这样（摘录）：

```
@Entity
@Inheritance(strategy = InheritanceType.JOINED)
public class Issue implements Serializable {
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private long id;

    public long getId() {
        return id;
    }
    public void setId(final long id) {
        this.id = id;
    }
} 
```

我没有关于使用问题的查询的警告。

所以我的问题是，我该如何摆脱警告？并且警告是否有一些我不知道的含义（如上所述，查询运行良好）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-02T04:34:20.793

> *没有映射与状态字段路径“t.progress”相关联*

我相信这完全是由于 Eclipse JPA 详细信息视图（`orm.xml`编辑器），一般与 EclipseLink 或 JPA 无关。该警告提醒您命名查询正在使用*未在映射文件中映射*`t.progress`的 JPA 查询路径 ( ) 。View / xml 编辑器不分析您的 java 类的元数据，因此不知道它*是否通过 JPA 注释映射*。

 **即该工具正在为您做最好的工作，它可能会给它的技术/范围限制。

**解决方案：**

*   了解消息的含义，手动确保通过 JPA 注释解决警告（或者，如果您确实必须，将适当的实体映射插入到您的实体映射 XML 文件中），然后继续...

:^)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T20:09:02.710

这似乎是错误的。

```
<named-query name="FinishedTasks">
  <query><![CDATA[SELECT t FROM Task t WHERE t.progress = 100]]></query> 
</named-query> 
```

我在 CDATA 中找不到类似的东西。[请参阅http://wiki.eclipse.org/EclipseLink/Examples/JPA/QueryOptimization](http://wiki.eclipse.org/EclipseLink/Examples/JPA/QueryOptimization)中的示例

在您的 named-queries.xml 中尝试此操作。或者使用@NamedQuery 注释，如下所示。

```
<named-query name="FinishedTasks">
  <query>SELECT t FROM Task t WHERE t.progress = 100</query> 
</named-query> 
```

我只是建立一个测试项目并使用它

包装测试；

导入 javax.persistence.Entity；导入 javax.persistence.NamedQuery；

```
@Entity
@NamedQuery(name = "FinishedTasks", 
  query = "SELECT t FROM Task t WHERE t.progress = 100")
public class Task extends Issue {
    private Integer progress = 0;

    public Integer getProgress() {
        return progress;
    }

    public void setProgress(final Integer progress) {
        this.progress = progress;
    }
} 
```

使用 JUnit 并没有解决任何警告。

```
package test;

import static org.junit.Assert.assertEquals;

import java.util.List;

import javax.persistence.EntityManager;
import javax.persistence.EntityManagerFactory;
import javax.persistence.Persistence;
import javax.persistence.Query;

import org.junit.After;
import org.junit.AfterClass;
import org.junit.Before;
import org.junit.BeforeClass;
import org.junit.Test;

public class TaskTest {
    private static EntityManager em;

    @BeforeClass
    public static void setUpBeforeClass() throws Exception {
        EntityManagerFactory factory = Persistence.createEntityManagerFactory("test");
        em = factory.createEntityManager();

        em.getTransaction().begin();
        Task t = new Task();
        t.setProgress(100);
        em.persist(t);
        em.getTransaction().commit();
    }

    @AfterClass
    public static void tearDownAfterClass() throws Exception {
        em.close();
    }

    @Test
    public void test() {
        Query q = em.createNamedQuery("FinishedTasks");
        List<?> list = q.getResultList();

        int expected = 1;
        int actual = list.size();
        assertEquals(actual, expected);
    }
} 
```

我的日志

> [EL 信息]：2013-05-01 21:57:55.561--ServerSession(1763596)--EclipseLink，版本：Eclipse Persistence Services - 2.4.1.v20121003-ad44345 [EL 信息]：连接：2013-05-01**

# ruby - Ruby 没有找到宝石，但它们出现在宝石列表中，并在 irb 控制台中工作？

> ID：15226290
> 
> 赞同：1
> 
> 时间：2013-03-05T14:26:44.217
> 
> 标签：ruby

我有一个 Ruby 应用程序，它使用 deamon-kit 创建一个守护程序，它每 3 秒运行一次 cron 任务。

问题是我正在尝试使用 Errbit 添加一些错误检查，所以这需要我：

```
require 'hoptoad_notifier' 
```

在我的脚本中。但是，脚本抱怨找不到文件？

```
.rvm/gems/ruby-1.9.2-p320@stitch/gems/activesupport-3.0.5/lib/active_support/dependencies.rb:239:in `require': no such file to load -- hoptoad_notifier (LoadError) 
```

让我感到困惑的是，当我运行时，gem 已安装

```
gem list | grep hoptoad_notifier 
```

我明白了

```
hoptoad_notifier (2.4.11) 
```

我做的另一个测试是在同一个终端窗口上弹出 irb 控制台，在确保我在正确的 RVM gemset 中之后：

```
1.9.2p320 :001 > require 'hoptoad_notifier'
 => true
1.9.2p320 :002 > 
```

瞧，hoptoad 正在加载。只有在加载我的守护程序套件守护程序时，我才会收到错误消息。

更让我困惑的是，当我查看我的 require 块时：

```
require 'rubygems'
require 'resque'
require 'hoptoad_notifier' 
```

它正在寻找 ruby​​gems 和 resque，但不是 hoptoad_notifier？为什么，当我注释掉 hoptoad 时，它也不会抱怨 resque 和 ruby​​gems？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:57:59.650

dameon-kit 使用捆绑器，因此您不需要包含 ruby​​gems。在您的 Gemfile 中包含以下几行：

```
gem 'resque'
gem 'hoptoad_notifier' 
```

跑`bundle install`

并像往常一样包含您的宝石：

```
require 'resque'
require 'hoptoad_notifier' 
```

它对我有用。

# php - 使用php将用户名密码与目标页面放在同一页面上

> ID：15226298
> 
> 赞同：-1
> 
> 时间：2013-03-05T14:27:25.090
> 
> 标签：php, mysql

我正在尝试使用 php 创建一个管理面板。但我想要做的是，当任何用户点击主页时，首先询问他们的用户名和密码是否都正确，然后显示主页的内容，否则不显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:40:39.753

您可以通过使用 Htaccess 密码保护来实现这一点。

创建一个 .htaccess 文件

```
AuthUserFile /usr/somewhere/.htpasswd
AuthType Basic
AuthName "My Files"
Require valid-user 
```

创建一个 .htpasswd 文件（在您上面提到的路径中）

```
mark:test1234 
```

你不需要 PHP 的东西来做到这一点！

参考[http://weavervsworld.com/docs/other/passprotect.html](http://weavervsworld.com/docs/other/passprotect.html)

# python - 如何检测字符串后缀并从列表中删除这些后缀元素？- Python

> ID：15226301
> 
> 赞同：1
> 
> 时间：2013-03-05T14:27:26.900
> 
> 标签：python, string, list

如何检测字符串后缀并从列表中删除这些后缀元素？ **我知道这看起来像一个 NLP、词干提取/词形还原任务，但该任务需要一个更简单的功能。**

鉴于，如果列表中存在非后缀项，我需要删除具有`s`和后缀的元素：`es`

```
alist = ['bar','barbar','foo','foos','barbares','foofoos','bares'] 
```

我需要输出：

```
alist = ['bar','barbar','foo','foofoos'] 
```

我尝试了以下方法，但它不起作用，因为当我整理 alist 时，它`['bar', 'barbar', 'barbares', 'bares', 'foo', 'foofoos', 'foos']`没有`['bar', 'bares', 'barbar', 'barbares', 'foo', 'foos', 'foofoos']`

```
alist = ['bar','barbar','foo','foos','barbares','foofoos','bares']

prev = ""
no_s_list = []
for i in sorted(alist):
  if i[-2:] == "es" and i[:-2] == prev:
    continue
  elif i[-1:] == "s" and i[:-1] == prev:
    contine
  else:
    prev = i
    no_s_list.append(i) 
```

上述输出：

```
>>> sorted(alist)
['bar', 'barbar', 'barbares', 'bares', 'foo', 'foofoos', 'foos'] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-05T14:33:27.303

```
def rm_suffix(s,suffixes):
    for suf in suffixes:
       if s.endswith(suf):
          return s[:-len(suf)]
    return s

alist = ['bar','barbar','foo','foos','barbares','foofoos','bares']
salist = set(alist)
suffixes = ('es','s')
blist = [x for x in alist 
         if (not x.endswith(suffixes)) or (rm_suffix(x,suffixes) not in salist)]
print blist  # ['bar', 'barbar', 'foo', 'foofoos'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T14:52:14.083

你也可以`regex`在这里使用：

`re.split()`将返回类似：

`barbar`-->`['barbar']`

`foos`-->`['foo', 's', '']`

`barbares`-->`['barbar', 'es', '']`

`foofoos`-->`['foofoo', 's', '']`

因此，如果返回列表的长度大于 1，并且在此返回列表中找到第一个元素，`alist`则可以将其删除。

`code`：

```
In [106]: alist = ['bar','barbar','foo','foos','barbares','foofoos','bares']

In [107]: s=set(alist)

In [108]: for x in s.copy():
     sol=re.split(r'(es|s)$',x)
     if len(sol)>1 and sol[0] in s:
         s.remove(x)
   .....:         

In [109]: s
Out[109]: set(['bar', 'foofoos', 'barbar', 'foo']) 
```

# google-chrome - Google Analytics Event Tracking 仅针对 Chrome 上的多个帐户不触发

> ID：15226302
> 
> 赞同：3
> 
> 时间：2013-03-05T14:27:28.523
> 
> 标签：google-chrome, cross-browser, google-analytics, web-analytics, event-tracking

我对 Google Analytics 事件跟踪有一个问题，该问题*仅*在 Chrome 上出现，在其他浏览器上没有。

我在我的网站上触发了以下 Google Analytics 跟踪代码，以点击锚链接：

```
_gaq.push(['_trackEvent', 'Basket Remove', product_name, product_code, product_price, false]);          
_gaq.push(['rollup._trackEvent', 'Basket Remove', product_name, product_code, product_price, false]); 
```

使用 Web 代理工具，我可以看到第一个正在触发，但第二个没有。这似乎是一些`_trackEvent`点击的情况，其中点击是指向另一个页面的链接，正如我所说的那样，**只**在谷歌浏览器中很明显。

就好像 Chrome 已经决定在完成 JavaScript 执行之前重定向到锚点中的链接。我在 IE 或 FF 中没有遇到这个问题。

我尝试过`setTimeout`在通话之后和通话之间坚持，但无济于事。

```
setTimeout('document.location="' + link.href + '"', 500); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-05T20:50:37.927

问题在于，当请求在当前窗口中加载新页面时，Chrome（和其他浏览器）将取消任何待处理的图像请求。您可能很幸运，第一个 _trackEvent 请求被记录下来，因为在第二个 _trackEvent 期间进行了额外的处理。

向链接添加延迟时，您需要确保不执行链接的默认操作 - 否则默认操作会在 setTimeout 函数发生之前跟随链接。

以下代码检查链接是否在新窗口中打开——如果没有，它会延迟链接 150 毫秒：

```
function track(link) {
  _gaq.push(['_trackEvent', 'Basket Remove', product_name, product_code, product_price, false]);          
  _gaq.push(['rollup._trackEvent', 'Basket Remove', product_name, product_code, product_price, false]);
  if ('_blank' == link.target) return true;
  var url = link.href;
  setTimeout(function(){ document.location = url; }, 150);
  return false;
}

<a href="someURL" onclick="return track(this);">ClickMe</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-13T08:47:05.800

对于那些到达这里并且建议的答案对他们不起作用的人：

我所做的是放置跟踪代码（即`_gaq.push()`在`setTimeout`函数内，并给出 1500ms 作为参数。

我和我一起工作`analytics.js`，我的代码如下所示：

```
setTimeout(function(){ga('send', 'event', 'click' , 'label',2);}, 1500); 
```

所以本质上，我不会通过跟踪干扰我的网站的自然使用。而是在用户所做的事情已经发生之后报告跟踪。

# android - sensorLandscape 引发 Resources$NotFoundException

> ID：15226303
> 
> 赞同：2
> 
> 时间：2013-03-05T14:27:34.513
> 
> 标签：android, android-sensors

我正在尝试为不同的 API 级别设置正确的横向模式，但遇到了一个问题：

我在清单文件中将我的活动的方向设置为横向，并在活动代码中评估 API 级别是否更高，如果它大于 API 8，则将其设置为 sensorLandscape，如下所示：

```
public static final int ANDROID_BUILD_GINGERBREAD = 9;
public static final int SCREEN_ORIENTATION_SENSOR_LANDSCAPE = 6;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    if (Build.VERSION.SDK_INT >= ANDROID_BUILD_GINGERBREAD) {
        setRequestedOrientation(SCREEN_ORIENTATION_SENSOR_LANDSCAPE);
    }
    setContentView(R.layout.results);
} 
```

它在 ICS、JB 和 GB 上运行良好，但在 Honeycomb 平板电脑上，它`setContentView`在纵向模式下崩溃。在风景上很好......：S

布局文件是：

```
layout:
    main.xml
layout-land:
    main.xml
    results.xml 
```

如果 API 级别应该支持，我不明白为什么不能在 HC 平板电脑上工作`sensorLandscape.`

谢谢你的时间！

# asp.net - Sitecore 设置是否总是优于 Web.config 中的 ASP.NET 应用程序设置？

> ID：15226307
> 
> 赞同：1
> 
> 时间：2013-03-05T14:27:47.370
> 
> 标签：asp.net, web-config, sitecore

`<configuration><sitecore><settings><setting>`在创建特定于应用程序的设置时，是否有过传统的 ASP.NET appSettings 应该优先于 Sitecore 设置（即）的情况？我可以想到使用 Sitecore 设置的几个优点，例如，能够将这些设置拉到 App_Settings/Include 文件夹中，但我不确定使用 ASP.NET appSettings 的任何优点。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-05T16:58:04.787

我建议第三种方法。我强烈建议创建一个配置文件，并与`IConfigurationSectionHandler`您的项目（或程序集）相对应。这可以防止`appSettings`或`sitecore/settings`成为垃圾场，并防止魔术字符串（即配置密钥）被乱扔在您的代码中。这种方法还允许开发人员快速确定特定程序集中代码的设置位置（配置文件的名称应与程序集相似）。此外，使用 Slow Cheetah，您可以将配置转换添加到文件中。

除了非常特定于 Web 应用程序项目本身的设置之外，我不喜欢将 appSettings 用于任何其他设置。例子`aspnet:MaxHttpCollectionKeys`就像 Trayek 提到的那样，`ClientValidationEnabled`或者`UnobtrusiveJavaScriptEnabled`

同样，我不喜欢将 Sitecore 设置用于存储 Sitecore 模块的设置或其他对 Sitecore 系统的自定义设置之外的任何事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T15:27:46.200

我认为 Sitecore 配置路线的优势正如您所描述的那样。也就是说，您的设置可以在 App_Settings/Include 中分离到它们自己的 .config 文件中。通过 configSource 属性将设置移动到 web.config 之外在某种程度上是可能的，但 Sitecore 允许您需要任意数量的文件。这样，每个组件的设置都可以包含在它们自己的文件中（并以此方式分发）。

另一个优势是能够利用 Sitecore 的配置修补机制。如果您的组件安装了默认设置文件，但某个环境需要覆盖某个值，您可以放置​​第二个文件来覆盖这些值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T14:51:35.610

我们还使用 Sitecore 设置进行配置。另一个优点是您有一个很好的界面来读取属性：

```
Sitecore.Configuration.Settings.GetBoolSetting("MySettings", false); 
```

我能想到的唯一缺点是，Inlude 文件夹中的文件将在运行时呈现，而 web.config 中的设置则不会。因此，如果您有数千个设置，您可以考虑将它们添加到 web.config。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T15:25:43.280

在我们的项目中，我们倾向于在 appSettings.config 中使用全局设置，例如用于获取地址信息的 URL，在 Sitecore 设置中使用 Sitecore 特定设置。

我认为这主要是一个偏好问题，尽管我认为可能有一些设置只能添加到 中`<appsettings>`，例如[aspnet:MaxHttpCollectionKeys](http://support.microsoft.com/kb/2661403)（虽然我还没有测试将它添加到 Sitecore 设置中）。

继续凯文的缺点（至少，我如何理解），是您无法快速查看您正在使用的设置 - 您可以访问 website/sitecore/admin/showconfig.aspx （尽管这只会给您web.config的`<sitecore>...</sitecore>`部分。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-05T22:18:25.713

appSettings 的优点是它可以在任何地方开箱即用，而且非常简单。了解 ASP.NET 的每个人都知道 appSettings 是什么。虽然 Sean Kearney 提供了一些很好的建议，但我觉得这有点违反 KISS 规则。您已经有两种不同的配置设置选项......为什么要添加第三个？这似乎完全没有必要，除非您要处理数百个设置。

您可以通过将 appSettings 放入自己的文件中来快速轻松地使 appSettings 更易于管理。

# asp.net - 在本地主机上应用 SSL

> ID：15226308
> 
> 赞同：0
> 
> 时间：2013-03-05T14:27:50.497
> 
> 标签：asp.net, iis, ssl

![在此处输入图像描述](../Images/5c4d85132b04787fe03fec08dae029ee.png)我正在使用自签名证书在我的示例 Web 应用程序中应用 SSL。目的是在我从 http 转到 https 或相反时测试会话可用性。我的本地主机地址是本地主机：5366。我做了这些如下：

我在 IIS 中添加了一个网站。但是很困惑，当使用http绑定时，我给了端口5366。我工作正常但是当我删除它并应用https时，端口5366。页面没有加载。

那么，我应该怎么做才能做到这一点呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T14:44:48.903

它有点令人困惑，但如果我敢打赌，你正在从 VS 和发布的站点交换调试模式，如果我错了，请纠正我。我以这种方式配置了我的 https 站点：

1.  将 IIS 配置为通过端口 443 接受 https。
2.  将网站文件系统位置设置为某个文件夹
3.  使用 VS 将您的网站发布到此文件夹
4.  通过它到达`https://localhost`

希望它有效！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T16:15:48.507

我的项目不在 iis 物理路径中。因此，它没有加载我想要的页面。感谢你们。

# entity-framework - EntityFramework：如何配置级联删除以使外键无效

> ID：15226312
> 
> 赞同：31
> 
> 时间：2013-03-05T14:28:16.583
> 
> 标签：entity-framework, entity-framework-5

EntityFramework 的文档指出以下行为是可能的：

> 如果依赖实体上的外键可以为空，Code First 不会在关系上设置级联删除，并且当主体被删除时，外键将设置为空。

（来自[http://msdn.microsoft.com/en-us/jj591620](http://msdn.microsoft.com/en-us/jj591620)）

但是，我无法实现这种行为。

我有以下使用代码优先定义的实体：

```
public class TestMaster
{
    public int Id { get; set; }
    public string Name { get; set; }        
    public virtual ICollection<TestChild> Children { get; set; }       
}

public class TestChild
{
    public int Id { get; set; }
    public string Name { get; set; }
    public virtual TestMaster Master { get; set; }
    public int? MasterId { get; set; }
} 
```

这是 Fluent API 映射配置：

```
 protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<TestMaster>()
                    .HasMany(e => e.Children)
                    .WithOptional(p => p.Master).WillCascadeOnDelete(false);

        modelBuilder.Entity<TestChild>()
                    .HasOptional(e => e.Master)
                    .WithMany(e => e.Children)
                    .HasForeignKey(e => e.MasterId).WillCascadeOnDelete(false);
    } 
```

外键可以为空，导航属性映射为可选，所以我希望级联删除按照 MSDN 的描述工作 - 即取消所有子项的 MasterID，然后删除 Master 对象。

但是当我实际尝试删除时，我收到了 FK 违规错误：

```
 using (var dbContext = new TestContext())
        {
            var master = dbContext.Set<TestMaster>().Find(1);
            dbContext.Set<TestMaster>().Remove(master);
            dbContext.SaveChanges();
        } 
```

在 SaveChanges() 上，它抛出以下内容：

```
System.Data.Entity.Infrastructure.DbUpdateException : An error occurred while updating the entries. See the inner exception for details.
----> System.Data.UpdateException : An error occurred while updating the entries. See the inner exception for details.
----> System.Data.SqlClient.SqlException : The DELETE statement conflicted with the REFERENCE constraint "FK_dbo.TestChilds_dbo.TestMasters_MasterId". The conflict occurred in database "SCM_Test", table "dbo.TestChilds", column 'MasterId'.
The statement has been terminated. 
```

我做错了什么还是我误解了 MSDN 所说的内容？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-03-05T17:48:34.947

它确实像描述的那样工作，但 MSDN 上的文章没有强调**它只有在子实体也加载到上下文**时才有效，而不仅仅是父实体。因此，您必须使用预先加载（或任何其他方式将子加载到上下文中），而不是使用`Find`（仅加载父级）：`Include`

```
using (var dbContext = new TestContext())
{
    var master = dbContext.Set<TestMaster>().Include(m => m.Children)
        .SingleOrDefault(m => m.Id == 1);
    dbContext.Set<TestMaster>().Remove(master);
    dbContext.SaveChanges();
} 
```

这将从数据库中删除主节点，将`Child`实体中的所有外键设置`null`为并将子节点的 UPDATE 语句写入数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-29T13:00:34.733

在遵循@Slauma 的出色回答后，我仍然遇到与 OP 相同的错误。

所以不要像我一样天真，认为下面的例子最终会得到相同的结果。

```
dbCtx.Entry(principal).State = EntityState.Deleted;
dbCtx.Dependant.Where(d => d.PrincipalId == principalId).Load();

// code above will give error and code below will work on dbCtx.SaveChanges()

dbCtx.Dependant.Where(d => d.PrincipalId == principalId).Load();
dbCtx.Entry(principal).State = EntityState.Deleted; 
```

首先将子项加载到上下文中**，然后再将**实体状态设置为已删除（如果您这样做的话）。

# r - 在另一个角落绘制图形

> ID：15226313
> 
> 赞同：9
> 
> 时间：2013-03-05T14:28:17.010
> 
> 标签：r, graphics, plot

我应该如何在 R 中另一个图的角落呈现一个小图？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-05T15:14:33.157

我知道这个问题已经结束了，但我把这个例子抛诸脑后。

一旦你掌握了基础知识，你就可以很容易地用基本的“网格”包来做这样的自定义可视化。这是我使用的一些自定义函数的快速示例以及绘制数据的演示。

![示例图](../Images/4ba4992526da909c4f61b65ad6455fcc.png)

* * *

**自定义函数**

* * *

```
# Function to initialize a plotting area.
init_Plot <- function(
    .df,
    .x_Loc, 
    .y_Loc, 
    .justify, 
    .width, 
    .height
    ){

    # Initialize plotting area to fit data.
    # We have to turn off clipping to make it
    # easy to plot the labels around the plot.
    pushViewport(viewport(xscale=c(min(.df[,1]), max(.df[,1])), yscale=c(min(0,min(.df[,-1])), max(.df[,-1])), x=.x_Loc, y=.y_Loc, width=.width, height=.height, just=.justify, clip="off", default.units="npc"))

    # Color behind text.
    grid.rect(x=0, y=0, width=unit(axis_CEX, "lines"), height=1, default.units="npc", just=c("right", "bottom"), gp=gpar(fill=space_Background, col=space_Background))
    grid.rect(x=0, y=1, width=1, height=unit(title_CEX, "lines"), default.units="npc", just=c("left", "bottom"), gp=gpar(fill=space_Background, col=space_Background))

    # Color in the space.
    grid.rect(gp=gpar(fill=chart_Fill, col=chart_Col))
}

# Function to finalize and label a plotting area.
finalize_Plot <- function(
    .df, 
    .plot_Title
    ){

    # Label plot using the internal reference
    # system, instead of the parent window, so
    # we always have perfect placement.
    grid.text(.plot_Title, x=0.5, y=1.05, just=c("center","bottom"), rot=0, default.units="npc", gp=gpar(cex=title_CEX))
    grid.text(paste(names(.df)[-1], collapse=" & "), x=-0.05, y=0.5, just=c("center","bottom"), rot=90, default.units="npc", gp=gpar(cex=axis_CEX))
    grid.text(names(.df)[1], x=0.5, y=-0.05, just=c("center","top"), rot=0, default.units="npc", gp=gpar(cex=axis_CEX))

    # Finalize plotting area.
    popViewport()
}

# Function to plot a filled line chart of
# the data in a data frame.  The first column
# of the data frame is assumed to be the
# plotting index, with each column being a
# set of y-data to plot.  All data is assumed
# to be numeric.
plot_Line_Chart <- function(
    .df,
    .x_Loc,
    .y_Loc,
    .justify,
    .width,
    .height,
    .colors,
    .plot_Title
    ){

    # Initialize plot.
    init_Plot(.df, .x_Loc, .y_Loc, .justify, .width, .height)

    # Calculate what value to use as the
    # return for the polygons.
    y_Axis_Min <- min(0, min(.df[,-1]))

    # Plot each set of data as a polygon,
    # so we can fill it in with color to
    # make it easier to read.
    for (i in 2:ncol(.df)){
        grid.polygon(x=c(min(.df[,1]),.df[,1], max(.df[,1])), y=c(y_Axis_Min,.df[,i], y_Axis_Min), default.units="native", gp=gpar(fill=.colors[i-1], col=.colors[i-1], alpha=1/ncol(.df)))
    }

    # Draw plot axes.
    grid.lines(x=0, y=c(0,1), default.units="npc")
    grid.lines(x=c(0,1), y=0, default.units="npc")

    # Finalize plot.
    finalize_Plot(.df, .plot_Title)

} 
```

* * *

**演示代码**

* * *

```
grid.newpage()

# Specify main chart options.
chart_Fill = "lemonchiffon"
chart_Col = "snow3"
space_Background = "white"
title_CEX = 1.4
axis_CEX = 1

plot_Line_Chart(data.frame(time=1:1860, EuStockMarkets)[1:5], .x_Loc=1, .y_Loc=0, .just=c("right","bottom"), .width=0.9, .height=0.9, c("dodgerblue", "deeppink", "green", "red"), "EU Stocks")

# Specify sub-chart options.
chart_Fill = "lemonchiffon"
chart_Col = "snow3"
space_Background = "lemonchiffon"
title_CEX = 0.8
axis_CEX = 0.7

for (i in 1:4){
    plot_Line_Chart(data.frame(time=1:1860, EuStockMarkets)[c(1,i + 1)], .x_Loc=0.15*i, .y_Loc=0.8, .just=c("left","top"), .width=0.1, .height=0.1, c("dodgerblue", "deeppink", "green", "red")[i], "EU Stocks")
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-05T15:51:07.687

您也可以使用`par(fig=..., new=TRUE)`.

```
x <- rnorm(100)
hist( x, col = "light blue" )
par( fig = c(.7, .95, .7, .95), mar=.1+c(0,0,0,0), new = TRUE )
qqnorm(x, axes=FALSE, xlab="", ylab="", main="")
qqline(x, col="blue", lwd=2)
box() 
```

![角落里的小地块](../Images/d8372583c3dfc0d78d269e442e05a4b7.png)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-05T14:44:17.377

我已经用这样的东西做到了：

```
# Making some fake data
plot1 <- data.frame(x=sample(x=1:10,10,replace=FALSE),
                    y=sample(x=1:10,10,replace=FALSE))
plot2 <- data.frame(x=sample(x=1:10,10,replace=FALSE),
                    y=sample(x=1:10,10,replace=FALSE))
plot3 <- data.frame(x=sample(x=1:10,10,replace=FALSE),
                    y=sample(x=1:10,10,replace=FALSE))

layout(matrix(c(2,1,1,3,1,1),2,3,byrow=TRUE))
plot(plot1$x,plot1$y)
plot(plot2$x,plot2$y)
plot(plot3$x,plot3$y) 
```

和命令`matrix`可`layout`让您将多个图形排列成一个图形。基本上，您将每个图的数量（按照您将要调用的顺序）放入每个单元格中，然后无论安排如何，最终都会成为您的图的布局方式。例如，在上面的例子中，`matrix(c(2,1,1,3,1,1),byrow=TRUE)`会产生一个如下所示的矩阵：

```
 [,1] [,2] [,3]
[1,]    2    1    1
[2,]    3    1    1 
```

所以，你可以得到这样的结果：

![多图示例](../Images/25628c158d2a2cfcc72520e1d4946504.png)

编辑添加：

好的，所以，如果你想在角落整合一个情节，你可以`layout`通过简单地改变矩阵来使用相同的命令。例如，这是不同的代码：

```
layout(matrix(c(1,1,2,1,1,1),2,3,byrow=TRUE))
plot1 <- data.frame(x=1:10,y=c(9,10,8,7,3,4,1,2,5,6))
plot2 <- data.frame(x=1:10,y=c(6,7,5,1,2,8,3,10,9,4))
plot(plot1$x,plot1$y,type="o",col="red")
plot(plot2$x,plot2$y,type="o",xlab="",ylab="",main="",sub="",col="blue") 
```

得到的矩阵是：

```
 [,1] [,2] [,3]
[1,]    1    1    2
[2,]    1    1    1 
```

出来的情节是这样的：

![示例多图 2](../Images/522567dc1479d0574f7aa03f9233d701.png)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-03-05T20:13:53.107

TeachingDemos 包中的`subplot`函数正是为基本图形执行此操作。

创建全尺寸图，然后`subplot`在子图中使用所需的绘图命令调用并指定子图的位置。该位置可以通过诸如“topleft”之类的关键字指定，也可以在当前绘图用户坐标系中为其指定坐标。

# javascript - 使用 PHP 检查表单是否已提交

> ID：15226314
> 
> 赞同：0
> 
> 时间：2013-03-05T14:28:25.263
> 
> 标签：javascript, jquery

我使用这个选择框从中选择一个选项并根据选择显示内容。我没有使用提交按钮提交此表单，这就是为什么我在此下拉框中添加了 onsubmit/onchange 功能。

这是我的下拉框：

```
<select class="select" name="type" onchange="document.forms[0].submit();">
    <option value="1">Tutor</option>
    <option value="2">Institute</option>
    <option value="3">Student</option>
</select> 
```

谁能告诉我如何检查此选择框是否已使用 Javascript 选择了一个选项？当然，我需要确保检查表单是否使用 PHP 提交。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:36:05.460

像这样使用jquery：

```
$("select[name='type']").change(function(){
    if($(this).val() != ""){
        $(this).parent().submit();   
    }
}); 
```

HTML：

```
<form>
<select class="select" name="type">
    <option value="">Select one</option>
    <option value="1">Tutor</option>
    <option value="2">Institute</option>
    <option value="3">Student</option>
</select>
</form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T14:33:20.867

使用 isset

```
if (isset($_POST["type"])) ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T14:33:03.743

为什么不从 PHP 代码中产生“回声”？

```
echo $_POST['type']; 
```

从您的 PHP 代码。我不确定这是否正确，但我相信您应该得到一些响应：“1”、“2”或“3”，具体取决于提交的值。收音机我记不太清楚了，见谅。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T14:42:17.330

您可以检查从选择的名称提交的 POST，然后检查它是一个整数，如下所示：

```
if(isset($_POST['type'] && is_int($_POST['type']) )
  {
   // It's been submitted and you can do your processing 
  } 
```

希望有帮助。

# batch-file - 批处理脚本中的目录创建和转移

> ID：15226315
> 
> 赞同：0
> 
> 时间：2013-03-05T14:28:28.197
> 
> 标签：batch-file, jad

我有三个子文件夹：文件夹`GHI`在里面`DEF`，里面在`ABC`. 每个文件夹都有一个类文件 ( `xyz.class`)。这意味着一个目录结构，如：

```
ABC/
    XYZ.class
    DEF/
        XYZ.class
        GHI/
            XYZ.class 
```

这三个`XYZ.class`文件并不相似，但名称相同。

我尝试了一个脚本，它使用 JAD 反编译, ,文件夹`xyz.class`中的所有 es并将反编译的 java 文件保存到新位置。`ABC``DEF``GHI`

我有两个问题：

1.  由于三个文件同名，所以会出现是否覆盖的警告
2.  我可以将这三个文件保存在我不想要的同一个文件夹中。我想在所需位置创建三个类似的文件夹（如`ABC`、`DEF`、`GHI`）并保存新创建的 java.lang.

有谁知道该怎么做？

```
for /r . %G% in (*.class) do jad -s .java -af -d "%my_desired_filelocation%" "%G%" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T16:10:18.010

这样的事情应该让你开始......

```
@echo off
for /R %%G in (*.class) do (
    echo %my_desired_filelocation%\%%~pG
    rem md "%my_desired_filelocation%\%%~pG"
    rem jad -s .java -af -d "%my_desired_filelocation%\%%~pG" "%%~fG"
) 
```

# javascript - 在网站上全局加载脚本

> ID：15226316
> 
> 赞同：3
> 
> 时间：2013-03-05T14:28:28.537
> 
> 标签：javascript, jquery

我有一个网站，其中包含某种需要 30 行脚本的插件。这样的插件存在于整个站点页面（嗯，现在只有两个），因为它是标题的一部分，这也是相同的。

我想知道是否有一种方法可以避免每次我从一个页面更改为下一个页面时执行那个 30 行长的脚本，因为标题是相同的，从而缩短了加载时间。（如果你说 30 行代码对浏览器来说不算什么，那我的问题就会得到解答）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T14:35:48.893

不用担心，脚本会被浏览器缓存，不会再次下载。大约 30 行代码是否很多：取决于这些行的作用！只用几行甚至一行代码就可以编写极其昂贵的代码。

# html - 如何使用 CSS 选择列表中的第二个属性？

> ID：15226317
> 
> 赞同：-1
> 
> 时间：2013-03-05T14:28:31.877
> 
> 标签：html, css

好的，这一直困扰着我——你如何在这样的列表中实际选择第二**个**属性？

```
<li class="coolstuff">
    <a href="">CoolStuff1</a>
</li>
<li class="coolstuff">
    <a href="">CoolStuff2</a>
</li> 
```

我正在看，`.coolstuff > a:nth-child(2)`但它不起作用...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T14:30:55.200

像这样：

```
.coolstuff:nth-child(2) a 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/rjmrd/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T14:30:16.587

你的 CSS 应该是：

```
li.coolstuff:nth-child(2) a 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T14:35:19.570

你几乎是对的。代替

```
.coolstuff > a:nth-child(2) 
```

正确解决的方法是：

```
.coolstuff:nth-child(2) a 
```

因为你想获得第二个 .coolstuff ，它是一个。( [JFiddle](http://jsfiddle.net/A2Tv8/) )

不是每一个很酷的东西都是第二个！（[您当前的代码示例 - JFiddle](http://jsfiddle.net/dKwgQ/)）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T14:33:52.867

用法是

```
.coolstuff:nth-child(2) a 
```

**JSFiddle**：http: [//jsfiddle.net/neekdamon/G7arK/1/](http://jsfiddle.net/neekdamon/G7arK/1/)

# java - org.hibernate.Session.save() 到底是做什么的？

> ID：15226318
> 
> 赞同：22
> 
> 时间：2013-03-05T14:28:33.193
> 
> 标签：java, hibernate

我知道这会`Session.save()`持续存在瞬态对象。而且我看到它也有`saveOrUpdate()`，还有`persist()`。

我想那`save()`相当于`SQL INCLUDE`，是吗？

如果我有一个已经存在于 DB 上的对象并且我拥有`save()`它，是否会包含另一行，是否会更新其字段，或者它会被忽略而没有任何反应？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-05T14:40:55.537

**`save`和之间的区别`saveOrUpdate`**

`save`和`saveOrUpdate`方法之间的主要区别在于`save`生成一个新的标识符并`INSERT`记录到数据库中，而`saveOrUpdate`可以`INSERT`根据记录的存在或者更新。因此`save`将继续进行而不执行存在检查，另一方面`saveOrUpdate`将检查是否存在，如果记录存在，它将被更新，否则将插入新记录。

**`persist`和的基本区别`save`**

`save`1)和之间的第一个区别`persist`是它们的`return`类型。与`save`方法类似，`persist`也`INSERT`记录到数据库中，但返回类型`persist`是`void`，而返回类型`save`是`Serializable object`。

`persist`2)和之间的另一个区别`save`是这两种方法都使瞬态实例持久化。但是，`persist`方法不保证标识符值将立即分配给持久实例，分配可能发生在刷新时间。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-05T14:44:18.580

```
 save Persists an entity. Will assign an identifier if one doesn't exist.
     If one does, it's essentially doing an update. 
     Returns the generated ID of the entity. 
```

我的建议是，您确实需要阅读[此](https://stackoverflow.com/questions/161224/what-are-the-differences-between-the-different-saving-methods-in-hibernate)内容以进一步进行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T14:42:30.423

据我所知，它是这样发生的：

1.  `save()`只是在拯救你的实体
2.  `persist()`正在将您的实例修改为托管实体。这意味着如果您对其进行操作并且您的交易仍处于打开状态，那么它将在您调用时自动保存`flush()`（如果我没记错的话）
3.  `merge()`还有一个类似`persist()`的，但它返回一个新实例，而不是修改你的旧实例....
4.  `saveOrUpdate()`你可以[在这里看到](https://stackoverflow.com/questions/170962/nhibernate-difference-between-session-merge-and-session-saveorupdate)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-11T05:22:56.640

save() method insert the record into database . but saveorupdate() method check the pk if pk is found then it's update the data else insert the data into database .

# javascript - jQuery手机滑动换页

> ID：15226319
> 
> 赞同：2
> 
> 时间：2013-03-05T14:28:33.623
> 
> 标签：javascript, jquery, html, ios, jquery-mobile

对于我的生活，我无法弄清楚为什么当我向右滑动时我无法更改我的 JQuery 移动文档中的页面。我知道滑动事件是正确写入的，因为当我将其换出时，`alert("test");`它会正确触发。

这是我所做的：

```
<script>
$(function() {
  $('.table').on('swiperight', function(){
     $.mobile.changePage("#home");
   });
});

</script> 
```

我参考了 JQuery 移动文档和论坛上的其他帖子，但未能解决此问题。有任何想法吗？

这是该项目的一个小提琴。[http://jsfiddle.net/a6TZW/](http://jsfiddle.net/a6TZW/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T14:48:28.017

您无需将此事件包装在`$function()`其中，因为此类事件一旦发生就会触发。

**滑动事件：**

```
$(document).on('swiperight','.table', function()
  { $.mobile.changePage("#page2"); 
 });

$(document).on('swipeleft','.table', function()
  { $.mobile.changePage("#page1"); 
 }); 
```

此外，您可以通过以下方式组合它们：

```
$(document).on('swiperight swipeleft','.table', function(event) {
 if (event.type == 'swiperight') {
  $.mobile.changePage("#page2");
 }
 if (event.type == 'swipeleft') {
  $.mobile.changePage("#page1");
 }
}); 
```

JSfiddle：[在这里测试](http://jsfiddle.net/FwwkT/)

# actionscript-3 - 当对象被重新转换为原始类型时，为什么不重置属性？

> ID：15226321
> 
> 赞同：-1
> 
> 时间：2013-03-05T14:28:34.607
> 
> 标签：actionscript-3

我试图在这里问这个问题，但无法得到满意的答案。（[为什么编译器应该允许函数中参数的超类](https://stackoverflow.com/questions/14649115/why-should-compiler-allow-super-class-of-a-parameter-in-a-function)）再次尝试询问。为什么在类上进行强制转换时不会丢失成员函数？在下文中，我预计，在转换为 Sprite 之后，该类应该丢失有关当前帧的所有信息。但它保留了信息，好像铸造只是一种“炫耀”，而不是内部“实际完成”？

```
import flash.display.MovieClip;
import flash.display.Sprite;

var mc:MovieClip 
mc.gotoAndStop(2);
trace(mc.currentFrame);  // output 2  --> that's ok 

var sprite:Sprite = Sprite(mc)

trace( MovieClip(sprite).currentFrame);//output 2, value not lost, which is questionable 
```

输出：2 2

我知道，答案可以是，Adobe 就是这样做的。但这是什么逻辑？理想的逻辑应该是，在转换和重新转换之后，所有值都必须恢复为默认值。（在这种情况下为“0”）

五。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T14:43:31.223

Cast 不会清除成员字段。投射显示其他人可以从此对象访问但不更改对象的内容。

在 Flash 中，对象是通过引用传递的。假设您在内存中有一个对象（在您的情况下为 mc ）。当您通过转换 mc 创建 sprite 时，您将引用（内存地址）传递给 sprite var。此时 mc 和 sprite 指向内存中的相同地址。当您将 sprite 投射到 MovieClip 时，您会从 mc 传递相同的地址。而这个地址就是MovieClip mc的地址，此时currentFrame会访问mc的值。强制转换不像复制构造函数

编辑。通过使用此[链接](https://stackoverflow.com/questions/1343282/how-can-i-get-an-instances-memory-location-in-actionscript)，我创建了简单的代码来证明我的话：

```
var memoryHash:String;

var mc: MovieClip = new MovieClip();
var s: Sprite = Sprite( mc );
try
{
      FakeClass(mc);
}
catch (e:Error)
{
    memoryHash = String(e).replace(/.*([@|\$].*?) to .*$/gi, '$1');
}

trace( memoryHash );
try
{
    FakeClass(s);
}
catch (e:Error)
{
        memoryHash = String(e).replace(/.*([@|\$].*?) to .*$/gi, '$1');
}

trace( memoryHash ); 
```

和假类：

> 包 { 公共类 FakeClass { 公共函数 FakeClass() {} } }

输出将显示 mc 和 s 的内存地址。如您所见，它们是相等的。在我的 mashine 中，输出是

> @35ed041 @35ed041

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T14:40:06.847

我不确定您要在这里做什么，但是像 MovieClip(sprite).currentFrame 这样的事情显然会导致奇怪的结果。因为您将您的精灵投射为一个影片剪辑，所以它将有一个当前帧。尝试在精灵上做 currentFrame 看看会发生什么。

# android - Android WAP_PUSH_RECEIVED 解析

> ID：15226323
> 
> 赞同：1
> 
> 时间：2013-03-05T14:28:39.443
> 
> 标签：android, broadcastreceiver, mms

我制作了一个简单的 BroadcastReceiver 来在本机应用程序之前捕获 MMS。现在我想解析这个 MMS 的数据以便做一些工作。

在我的`onReceive`方法中，我有以下代码：

```
if (intent.getAction().equals(MMS_RECEIVED) && intent.getType().equals("application/vnd.wap.mms-message"))
{
    Log.e(">>>>>", "MMS");

    try
    {
        byte[] pushData = intent.getByteArrayExtra("pdu");

        // What to do with that ?
    }
    catch (Exception e)
    {
        e.printStackTrace();
    }

    // TODO Send notification
} 
```

如何检索彩信数据并下载相关部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T16:23:04.790

这可能很有用。被处理的 mms 与 SMS 完全不同，下面的链接与我所做的类似：[https ://github.com/romannurik/dashclock/blob/master/main/src/main/java/com/google/android /apps/dashclock/phone/SmsExtension.java](https://github.com/romannurik/dashclock/blob/master/main/src/main/java/com/google/android/apps/dashclock/phone/SmsExtension.java)

# javascript - jQuery 可排序启用

> ID：15226327
> 
> 赞同：7
> 
> 时间：2013-03-05T14:28:58.270
> 
> 标签：javascript, jquery, jquery-ui-sortable

我正在禁用拖动 jquery 可排序列表，但不确定如何启用它，请有人指出我的方向，

```
$(".anotherClass").sortable('disable'); //it disables it 
```

我似乎在文档中找不到任何东西。

这个问题说在这里启用输入但它不起作用

```
$("#wantedItems").sortable({
    receive: function (event, ui) {
        //enable the input here  which input ???????????????????????????????
    }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T14:31:29.707

你只需用“启用”来调用它

```
$( ".selector" ).sortable( "enable" ); 
```

方法文档： http: [//api.jqueryui.com/sortable/#method-enable](http://api.jqueryui.com/sortable/#method-enable)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T14:31:43.193

```
simply write.....

$(".anotherClass").sortable() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T14:32:07.540

**使能够（）**

启用可排序。

*   此方法不接受任何参数。

**代码示例：**
调用 enable 方法：

```
$( ".selector" ).sortable( "enable" ); 
```

链接：[http ://api.jqueryui.com/sortable/#method-enable](http://api.jqueryui.com/sortable/#method-enable)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-29T05:43:53.580

要再次启用`sortable()`，您可以使用

`$(".anotherClass").sortable("enable");`

单击带有 id 的按钮来切换启用/禁用`toggleButton`

```
$('#toggleButton').click(function() {
    //check if sortable() is enabled and change and change state accordingly
  // Getter
  var disabled = $(".anotherClass").sortable( "option", "disabled" );
  if (disabled) {
    $(".anotherClass").sortable( "enable" );
  }
  else {
    $(".anotherClass").sortable("disable");
  }
}); 
```

# .net - 匿名事件处理程序如何注销自己？

> ID：15226330
> 
> 赞同：0
> 
> 时间：2013-03-05T14:29:12.193
> 
> 标签：.net, wpf, events, lambda

我正在尝试对 WPF FrameworkElement 实现扩展方法，该方法允许用户在加载元素时仅执行一次操作。

这里的想法是，如果元素稍后被卸载然后再次加载，则不会再次调用该操作。

但是我找不到匿名事件处理程序在调用时注销自身的正确语法......

```
public static void ExecuteOnceWhenLoaded(
        this FrameworkElement element,
        Action action)
{
    if(element.IsLoaded)
    {
        action();
    }
    else
    {
        RoutedEventHandler handler;
        handler = (s, e) =>
        {
            element.Loaded -= handler; // ERROR: handler is not initialized
            action();
        }
        element.Loaded += handler;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T14:39:22.563

也许：

RoutedEventHandler 处理程序 = null;

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T14:45:33.490

做就是了

```
 RoutedEventHandler handler = null; // Initialize handler with null
    handler = (s, e) =>
    {
        element.Loaded -= handler;
        action();
    }
    element.Loaded += handler; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T15:24:19.727

这应该是编译时错误，因为您试图取消订阅尚未创建的处理程序。在这种情况下，最好创建一个处理程序方法并在第一次执行该方法时取消订阅该处理程序？并且没有充分的理由为什么您应该在它不是闭包时执行匿名方法。

# javascript - 将图像从用户计算机添加到画布

> ID：15226332
> 
> 赞同：8
> 
> 时间：2013-03-05T14:29:14.433
> 
> 标签：javascript, jquery, html, canvas, fabricjs

我正在开发一个允许用户创建动态幻灯片的网络应用程序。目前，无论如何将计算机用户的图像添加到画布，我都遇到了问题。我正在使用输入按钮从计算机获取文件，它吸引了一个将图像添加到画布的函数。

到目前为止，我已经尝试了不同的方法将图像添加到画布以及这个：[动态地将图像添加到画布](https://stackoverflow.com/questions/6944382/dynamically-add-image-to-canvas)

但是这里显示的代码在我的情况下不起作用，因为它只是将图像绘制到画布中，但它不允许它像 Fabricsjs 中的 Kitchensink.js 演示那样可拖动和调整大小。

我也尝试将图像转换为 Base64 并使用 LoadJSON 将其转换回来，但我遇到了这个错误：

```
Uncaught TypeError: Cannot read property 'length' of undefined fabric.js:2089
enlivenObjects fabric.js:2089
fabric.util.object.extend._enlivenObjects fabric.js:9025
fabric.util.object.extend.loadFromJSON fabric.js:8953
sub 
```

Sub 指的是我为添加图像而调用的函数。

我也尝试过这段代码：

```
document.getElementById('imgLoader').onchange = function handleImage(e){
var reader = new FileReader();
reader.onload = function(event){
var img = new fabric.Image();
img.onload = function(){
img.set({
    left : 250,
    top : 250,
    angle : 20,
      padding: 10,
      cornersize: 10
    });
    image.scale(getRandomNum(0.1, 0.25)).setCoords();
    canvas.add(image);
}
img.src = event.target.result;
}
reader.readAsDataURL(e.target.files[0]);
} 
```

捕获这些错误：

```
Uncaught TypeError: Cannot read property 'width' of undefined fabric.js:14358
fabric.Image.fabric.util.createClass._setWidthHeight fabric.js:14358
fabric.Image.fabric.util.createClass._initConfig fabric.js:14334
fabric.Image.fabric.util.createClass.setElement fabric.js:14127
fabric.Image.fabric.util.createClass._initElement fabric.js:14322
fabric.Image.fabric.util.createClass.initialize fabric.js:14097
(anonymous function) fabric.js:2679
klass fabric.js:2728
reader.onload diapo.js:746 
```

我显然已经没有想法了，只实现了绘制图像但没有将其添加到画布中。

总之，我想将具有相同属性的图像添加到我的 Fabricjs 画布中，无论可拖动为 Kitchensink 演示。在此先感谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-05T17:55:13.957

您的代码中有一个基本错误，您试图将图像数据添加到 fabric.Image 对象的 src 属性。

您需要做的是用您的结果创建一个 Image 对象，并将其传递给 fabric.Image 对象，如下所示：

```
var imgObj = new Image();
imgObj.src = event.target.result;
imgObj.onload = function () {
  var image = new fabric.Image(imgObj);
} 
```

我在这里做了一个工作示例：http: [//jsfiddle.net/jaibuu/Vp6wa/](http://jsfiddle.net/jaibuu/Vp6wa/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-05-06T12:52:32.083

通过 Fabric js 从计算机上传画布中的图像。

```
var canvas = new fabric.Canvas('canvas');
document.getElementById('file').addEventListener("change", function (e) {
  var file = e.target.files[0];
  var reader = new FileReader();
  reader.onload = function (f) {
    var data = f.target.result;                    
    fabric.Image.fromURL(data, function (img) {
      var oImg = img.set({left: 0, top: 0, angle: 00,width:100, height:100}).scale(0.9);
      canvas.add(oImg).renderAll();
      var a = canvas.setActiveObject(oImg);
      var dataURL = canvas.toDataURL({format: 'png', quality: 0.8});
    });
  };
  reader.readAsDataURL(file);
});
```

```
canvas{
  border: 1px solid black;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://rawgit.com/kangax/fabric.js/master/dist/fabric.min.js"></script>
<input type="file" id="file"><br />
<canvas id="canvas" width="450" height="450"></canvas>
```

# php - 如何在 CodeIgniter 2.1.3 中使用 memcache（不是 memcached）

> ID：15226335
> 
> 赞同：1
> 
> 时间：2013-03-05T14:29:30.030
> 
> 标签：php, codeigniter, caching, memcached

Codeigniter 带有一个 memcached 驱动程序库，但这不适用于 memcache（注意缺少的 d）。任何人都知道如何将 memcache 实现到 codeigniter 2.1.3 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:45:01.190

似乎 CI 只是试图`Memcached`在他们的驱动程序上使用：

```
system/libraries/Cache/drivers/Cache_memcached.php 
```

检查`_setup_memcached`私有函数。

这个[用于 codeigniter 的第 3 方 memcached 库为](https://github.com/tomschlick/memcached-library)我们提供了很好的服务。如果您[查看代码](https://github.com/tomschlick/memcached-library/blob/master/libraries/memcached_library.php)，您可以看到它在设置客户端类型时`Memcache`优先。`Memcached`如果你想反过来，你可以轻松地切换它。

# knockout.js - KoGrid 和可观察的属性

> ID：15226336
> 
> 赞同：0
> 
> 时间：2013-03-05T14:29:30.260
> 
> 标签：knockout.js, kogrid

我正在考虑使用 KoGrid，我花了一段时间才弄清楚如何使用可观察的属性。[我发现关于自定义模板](https://github.com/Knockout-Contrib/KoGrid/wiki/About-Custom-Templates)的 wiki 页面很有帮助，我必须使用`$parent.entity['editableField']`. 但是，我无法让 css 绑定工作。

请参阅我的[plunker](http://plnkr.co/edit/hVjzwPaUVNm6mIVEEeA6)或下面从他们的示例修改的副本。我可以打赌姓名和年龄会更改为可观察的，但第一行，第 2 列应该是绿色的（年龄 > 30）。

```
function stringCellTemplateVM() {
    var self = this;
    this.selectedItems = ko.observableArray([]);
    this.myData = ko.observableArray([{ name: ko.observable("Moroni"), age: ko.observable(50) },
                     { name: "Tiancum", age: 43 },
                     { name: "Jacob", age: 27 },
                     { name: "Nephi", age: 29 },
                     { name: "Enos", age: 34 }]);
    this.gridOptions = { 
        data: self.myData,
        selectedItems: self.selectedItems,
        multiSelect: false,
        columnDefs: [{field: 'name', displayName: 'Name'},
                    {field: 'age', displayName: 'Age', cellTemplate:'<div data-bind="attr: { \'class\': \'kgCellText colt\' + $index()},css: { green: $parent.entity[\'age\'] > 30 }, html: $parent.entity[\'age\']"></div>'}]
    };

    this.increaseAge = function(){
      this.myData()[0].age(this.myData()[0].age()+1);
      //alert(this.myData()[0].age());
      //this.myData()[0].name(this.myData()[0].name() + this.myData()[0].age());
    };
}
var vm = new stringCellTemplateVM();
ko.applyBindings(vm); 
```

1.  这是使用可观察属性的正确方法吗？
2.  当满足该要求时，如何使 css 绑定工作以将其更改为绿色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T19:46:49.360

我认为他们使用的方法很好。

至于 css 绑定，请尝试将所有年龄属性更改为可观察，然后将您的 css 绑定更改为：

`css: { green: $parent.entity[\'age\']() > 30 }`

请注意，我添加`()`了从 observable 中获取值。

请注意，您也可以使用样式绑定来实现相同的目的：

`style: { backgroundColor: $parent.entity[\'age\']() > 30 ? \'green\' : \'\' }`

这有点冗长，但您不需要使用单独的 css 类。

**编辑：**

这是一个[示例小提琴](http://jsfiddle.net/rpallas/VsCrQ/)，展示了如何使用[计算出的 observable](http://knockoutjs.com/documentation/computedObservables.html)来提供更复杂的逻辑

# lucene - 为什么 Lucene QueryParser 需要 Analyzer

> ID：15226337
> 
> 赞同：8
> 
> 时间：2013-03-05T14:29:31.127
> 
> 标签：lucene, analyzer, query-parser

我是 Lucene 的新手，并尝试`Query`使用`QueryParser`.

我想知道，为什么该`QueryParser.Parse()`方法根本需要一个 Analyzer 参数？

如果分析与查询有关，那么在处理常规对象`Analyzer`时也应指定an （等），如果不是，为什么需要它？`Query``TermQuery``BooleanQuery``QueryParser`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-05T14:32:16.837

索引时，Lucene 将文本划分为原子单元（令牌）。在这个阶段，可能会发生很多事情（例如小写、词干、删除停用词等）。最终结果是一个术语。

然后，当您查询时，Lucene 将完全相同的算法应用于查询，因此它可以将术语与术语匹配。

问：为什么`TermQuery`不需要分析仪？
A：`QueryParser`对象解析查询字符串并产生`TermQuery`（也可以产生其他类型的查询，例如`PhraseQuery`）。`TermQuery`已经包含与索引中形状相同的术语。如果您（作为程序员）绝对确定自己在做什么，则可以`TermQuery`自己创建一个——但这假设您知道查询解析的确切顺序，并且您知道索引中的术语是什么样的。

问：为什么`BooleanQuery`不需要分析仪？
答：`BooleanQuery`只需使用运算符（AND/OR/MUST/SHOULD 等）连接其他查询。没有任何其他查询，它本身并不是真正有用的。

这是一个**非常**简化的答案。我强烈推荐阅读[《信息检索简介](http://nlp.stanford.edu/IR-book/)》这本书；它包含编写 Lucene（和其他类似框架）所基于的理论。这本书在网上免费提供。

# java - Java 中的线程、等待、通知、休眠

> ID：15226338
> 
> 赞同：0
> 
> 时间：2013-03-05T14:29:37.607
> 
> 标签：java, sleep, wait, notify, jprogressbar

我正在开发/开发一个桌面应用程序，其中按钮具有动作侦听器并执行大量后台任务，我之前没有使用线程、等待、通知或睡眠。我只是对学习哪一个以及使用哪一个感到困惑，否则当我单击按钮时，JFrame 就会冻结。

1）有人可以建议我使用什么更容易吗？

2) 我正在使用带有 setvalue(n) 方法的 jprogress bar，但我想用加载时间自动替换 n，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:33:06.230

如果您使用 Swing 作为 GUI，您应该使用“SwingWorker”类：

[http://docs.oracle.com/javase/tutorial/uiswing/concurrency/simple.html](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/simple.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T14:36:57.100

1）当您单击按钮进入新线程时，您需要将运行的代码移动。像这样的东西会起作用：

```
public class Worker implements Runnable {
    Thread t;
    public Worker() {
        t = new Thread(this);
    }
    @Override
    public void run() {
        //do stuff here
    }
    public void start() {
        t.start();
    }
} 
```

然后，当您单击 JFrame 中的按钮时：

```
Worker w = new Worker();
w.start(); 
```

2）您可以`setProgress()`使用任何您想要的调用`int`（例如，在开始时获取当前时间，在结束时获取当前时间，所用时间=结束开始）。只要确保你也使用`setMaximum()`过。

# c# - 外部 javascript 文件中的资源语言值

> ID：15226341
> 
> 赞同：0
> 
> 时间：2013-03-05T14:29:40.143
> 
> 标签：c#, javascript, jquery, asp.net-mvc

在外部 JS 文件中具有资源多语言值的最佳方法是什么？

我找到了不同的方法，但我不能把它们放在外部 JS 文件中，我想得到反馈：

视图中的 1º var

```
<script> var buttonLabel = @Resources.MapCenterButtonTitle</script> 
```

2º 视图中的隐藏输入

```
@Html.Hidden("buttonLabel", Resources.MapCenterButtonTitle) 
```

3º 我试过这个[https://stackoverflow.com/a/6217109/1480877](https://stackoverflow.com/a/6217109/1480877)但它不允许 const var 中的资源值

4º任何其他可能比那些更好。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T14:40:57.943

我这样做：

脚本文件：

```
function InitSomething(resources){

} 
```

看法：

```
@{
    var serializer = new JavaScriptSerializer();
    var resources = serializer.Serialize(new { buttonLabel = Resources.MapCenterButtonTitle });
}

<script type="text/javascript" src="@Url.Content("src")" onload="InitSomething(@resources)"></script> 
```

# python - Python：将unicode转换为文件指针

> ID：15226342
> 
> 赞同：1
> 
> 时间：2013-03-05T14:29:41.077
> 
> 标签：python

我有一个变量说 f ，它被初始化为一个 unicode 字符串

```
f= u"<open file 'C:\\IVR\\log\\IVR.log', mode 'r' at 0x02A8AB20>" 
```

我想将其转换为文件指针类型。可能吗？IE

```
f=<open file 'C:\\IVR\\log\\IVR.log', mode 'r' at 0x02A8AB20> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T14:48:02.730

而不是`f`在您的 JSON 中使用，使用`f.name`which 将只是文件的名称。然后，您可以轻松地重新打开它。

如果您希望您的程序仍然打开文件，您可以创建一个字典，其中文件名作为键，文件对象作为值。这实际上会更安全，因为攻击者无法打开任意文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T14:41:03.623

您不能将字符串转换为文件文件指针对象。您可以做的最好的事情是解析文件名并重新打开文件。

# ruby-on-rails - webrick 何时与 development.log 不同

> ID：15226347
> 
> 赞同：0
> 
> 时间：2013-03-05T14:29:45.960
> 
> 标签：ruby-on-rails, webrick

使用默认配置运行，我还没有看到消息出现在 webrick 窗口中但没有出现在 development.log 中的实例，反之亦然。有谁知道我应该期望只出现在两个位置之一的特定消息？是否有好的文档描述 Rails 的处理如何将输出定向到两个位置（webrick 和日志文件）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T15:56:43.613

`log/development.log`当 Rails 处于开发阶段时，WEBrick 的服务器输出会同时记录在 stdout 和 to in 中。Rails 开发中的日志级别`:debug`默认设置为，因此您可以在两个地方看到`:debug`、`:info`、`:warn`、`:error`和`:fatal`日志消息。

# css - 媒体查询在浏览器上看起来与移动设备上的不同

> ID：15226349
> 
> 赞同：0
> 
> 时间：2013-03-05T14:29:48.277
> 
> 标签：css, mobile, media-queries

使用此查询导入布局：

```
@media screen and (min-width : 320px) and (max-width : 640px) 
```

这是网址： [http ://www2.madeinweb.com.br/jobs/adc/prototype/html/](http://www2.madeinweb.com.br/jobs/adc/prototype/html/)

一开始我只使用调整大小的浏览器。但是当我尝试在移动设备（iphone 4、5、ipod 4 和 Galaxy S2）上查看时，情况却大不相同，完全不同。

所以我开始专注于移动视图（它是一个 web 视图，所以浏览调整大小不是问题），但是当我尝试从 Galaxy S3 中查看它时，结果与浏览器几乎相同（糟糕） .

我知道 S3 正在以应有的方式行事（据我所知），因为它与浏览器的方式相同，但是其他设备呢，我在那里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:34:02.530

移动设备通常会缩放内容以适应屏幕，您需要告诉设备该网站是移动友好的，而不是缩放像素。

在你的 html 文件的头部添加这个：

```
<meta content="True" name="HandheldFriendly">
<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
<meta name="viewport" content="width=device-width"> 
```

这应该适用于大多数 android 设备，iPhone 可能需要也可能不需要不同的元标记。

# matlab - Matlab“断言失败”错误作为parfor goind on？

> ID：15226350
> 
> 赞同：1
> 
> 时间：2013-03-05T14:29:48.877
> 
> 标签：matlab, parallel-processing, runtime-error, parfor

我有代码段

```
display('Descriptor Extraction...');

DESCRIPTORS = {};
descriptor_for_each_class = {};
num_classes = length(imgs_dir);
IMAGES = {};
for i = 1:num_classes
    class_name = classes{i};
    fprintf('Feature Extraction for CLASS %s\n',class_name);
    full_path = fullfile(imgs_path,class_name);

    class_dir = dir(full_path);
    image_names = {class_dir(3:length(class_dir)).name};
    num_imgs = length(image_names);

    descriptors = {};
    parfor j = 1:num_imgs
        image_name = image_names{j};
        %fprintf('Feature Extraction for IMAGE %d/%d\n',j,num_imgs);
        img_path = fullfile(full_path,image_name);
        I = imread(img_path(:,:));
        I = standarizeImage(I);
        I = rgb2gray(I) ;
        IMAGES{i,j}.I = I;
        IMAGES{i,j}.class_name = class_name;
        IMAGES{i,j}.name = image_name;
        [f, d] = vl_dsift(I, 'size', binSize) ;
        descriptors{j}=d;
    end
    DESCRIPTORS = [DESCRIPTORS descriptors];
end 
```

当 parfor 部分完成一个时期时，在第二个时期开始时，Matlab 给出以下错误：

```
Error using parallel_function (line 589)
Assertion failed.

Error in feat_extraction (line 34)
    parfor j = 1:num_imgs 
```

我找不到代码上的错误。有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T14:44:07.913

我通过更改 parfor 部分来解决问题，如下所示

```
descriptors = {};
    images = {};
    parfor j = 1:num_imgs
        image_name = image_names{j};
        %fprintf('Feature Extraction for IMAGE %d/%d\n',j,num_imgs);
        img_path = fullfile(full_path,image_name);
        I = imread(img_path(:,:));
        images{j}.I = I;
        images{j}.class_name = class_name;
        images{j}.image_name = image_name;
        I = standarizeImage(I);
        I = rgb2gray(I) ;
        %IMAGES{i,j}.name = image_name;
        [f, d] = vl_dsift(I, 'size', binSize) ;
        descriptors{j}=d;
    end
    ALL_DATA{i}=images;
    DESCRIPTORS = [DESCRIPTORS descriptors];
end 
```

# sql - Shell 脚本在 SQL 代码后停止

> ID：15226358
> 
> 赞同：1
> 
> 时间：2013-03-05T14:30:07.913
> 
> 标签：sql, sh

我的代码总是在 ENDOFSQL 之后停止；如何解决此问题并打印最后一个回声？

```
#!/bin/bash

sqlplus db/pass << ENDOFSQL

@script.sql

exit;   
ENDOFSQL;

echo -e "text" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T15:08:15.520

您必须删除`;`末尾的分号`ENDOFSQL;`。否则，您的此处文档将延伸到文件末尾，`ENDOFSQL;`并且`echo`是此处文档的一部分

```
#!/bin/bash

sqlplus db/pass << ENDOFSQL

@script.sql

exit;   
ENDOFSQL

echo -e "text" 
```

详情见[`Here Documents`](http://www.gnu.org/software/bash/manual/bashref.html#Here-Documents)_

> 这里文档的格式是：
> 
> ```
> <<[-]word
>         here-document
> delimiter 
> ```
> 
> 这种类型的重定向指示 shell 从当前源读取输入，直到看到**只包含单词**（没有尾随空格）的行。然后将所有读取到该点的行用作命令的标准输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T14:37:24.537

像这样称呼它：

```
#!/bin/bash

sqlplus db/pass @script.sql
echo -e "text" 
```

确保您`exit`的 .sql 文件末尾有 。

# java - 安卓浏览器问题。下载提出两个请求而不是一个

> ID：15226359
> 
> 赞同：0
> 
> 时间：2013-03-05T14:30:10.060
> 
> 标签：java, android, download, request

我的应用程序分发文件并收集统计信息。前段时间我注意到如果用户尝试从 android 下载文件 - 服务器收到两个请求而不是一个。第一个请求失败，因为`Caused by: java.net.SocketException: Connection reset by peer: socket write error` 第二个请求已正确处理并且用户在手机上收到了文件。所以它或多或少都可以，但在这种情况下，我的统计数据不正确。我在 [另一个线程][1] 上看到了类似的问题

[1]：[https](https://stackoverflow.com/a/8579181/273418) ://stackoverflow.com/a/8579181/273418但没有任何解决方案

分发文件的servlet代码

```
try {
  StringBuilder typeHeader = new StringBuilder("application/vnd.android.package-archive");
  String contentType = FdConstants.CONTENT_TYPE_HEADER.getValue();
  response.setHeader(contentType, typeHeader.toString());
  StringBuilder dispositionHeader = new StringBuilder("attachment; filename=\"");
  dispositionHeader.append(fileName.toUpperCase());
  dispositionHeader.append("\"");
  String contentDisposition = FdConstants.CONTENT_DISPOSITION_HEADER.getValue();
  response.setHeader(contentDisposition, dispositionHeader.toString());
  response.setContentLength(fileStream.available());
  // copy it to response's OutputStream
  IOUtils.copy(fileStream, response.getOutputStream());
  response.flushBuffer();

} finally {
  IOUtils.closeQuietly(fileStream);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T10:25:46.143

按照设计的行为[https://code.google.com/p/android/issues/detail?id=1978](https://code.google.com/p/android/issues/detail?id=1978) 类似的问题 [Android 正在发送 2 个请求以通过移动浏览器下载一个文件](https://stackoverflow.com/questions/14259037/android-is-sending-2-requests-to-download-one-file-via-mobile-browser?rq=1)

# windows-8 - Visual Studio 2012 设计器在开发人员许可证续订后崩溃

> ID：15226360
> 
> 赞同：4
> 
> 时间：2013-03-05T14:30:11.127
> 
> 标签：windows-8, visual-studio-2012, windows-store-apps, designer

碰巧是我两次。一旦我的开发人员许可证到期并提示我更新它，我的 Visual Studio 设计器就会开始崩溃，并且当我尝试加载任何 xmal 时出现以下异常：

```
System.Runtime.InteropServices.COMException
The application cannot be started. Try reinstalling the application to fix the problem. (Exception from HRESULT: 0x80073CFC)
   at Microsoft.Expression.HostUtility.AppPackage.AppPackageNativeMethods.IApplicationActivationManager.ActivateApplication(String appUserModelId, String activationContext, ActivateOptions options, Int32& processId)
   at Microsoft.Expression.HostUtility.AppPackage.WrtUtility.ActivateApplication(String appUserModelId, String activationContext, Object site)
   at Microsoft.Expression.HostUtility.Platform.AppContainerProcessDomainFactory.ActivateApplicationInternal(String appUserModelId, String activationContext, Object site)
   at Microsoft.Expression.HostUtility.Platform.AppContainerProcessDomainFactory.CreateDesignerProcess(String applicationPath, String clientPort, Uri hostUri, IDictionary environmentVariables, Int32& processId, Object& processData)
   at Microsoft.Expression.DesignHost.Isolation.Primitives.ProcessDomainFactory.ProcessIsolationDomain..ctor(ProcessDomainFactory factory, IIsolationBoundary boundary, AppDomainSetup appDomainInfo, FrameworkName targetFramework, String identifier, String baseDirectory)
   at Microsoft.Expression.DesignHost.Isolation.Primitives.ProcessDomainFactory.CreateIsolationDomain(IIsolationBoundary boundary)
   at Microsoft.Expression.HostUtility.Platform.AppContainerProcessDomainFactory.CreateIsolationDomain(IIsolationBoundary boundary)
   at Microsoft.Expression.DesignHost.Isolation.Primitives.IsolationBoundary.Initialize()
   at Microsoft.Expression.DesignHost.Isolation.Primitives.IsolationBoundary.CreateInstance[T](Type type)
   at Microsoft.Expression.DesignHost.Isolation.IsolatedExportProvider.Initialize()
   at Microsoft.VisualStudio.ExpressionHost.Services.VSIsolationService.CreateExportProvider(IIsolationTarget isolationTarget, ICatalogFactory catalogFactory, IExportFilter filter)
   at Microsoft.Expression.DesignHost.Isolation.IsolationService.CreateLease(IIsolationTarget isolationTarget)
   at Microsoft.Expression.DesignHost.IsolatedDesignerService.CreateLease(IIsolationTarget isolationTarget, CancellationToken cancelToken, DesignerServiceEntry& entry)
   at Microsoft.Expression.DesignHost.IsolatedDesignerService.IsolatedDesignerView.CreateDesignerViewInfo(CancellationToken cancelToken)
   at Microsoft.Expression.DesignHost.Isolation.IsolatedTaskScheduler.InvokeWithCulture[T](CultureInfo culture, Func`2 func, CancellationToken cancelToken)
   at Microsoft.Expression.DesignHost.Isolation.IsolatedTaskScheduler.<>c__DisplayClassa`1.<StartTask>b__6()
   at System.Threading.Tasks.Task`1.InnerInvoke()
   at System.Threading.Tasks.Task.Execute() 
```

我已经尝试了很多来找到问题的解决方案，但没有任何效果，唯一的出路是重新安装 Windows 并重新安装 Visual Studio。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-03T12:51:55.427

尝试清除您的 Visual Studio 和 Team Foundation Server（如果适用）缓存。我知道这听起来很奇怪，但我的团队都遇到了一个非常相似的问题，这是唯一一直有效的事情（除了完全重新安装）。

删除这些位置的所有文件：

TFS 缓存：C:\Users[用户名]\AppData\Local\Microsoft\Team Foundation[版本]\Cache

一种可能的 VS 缓存位置：c:\Users\\AppData\Local\Temp\VWDCache

可能适用也可能不适用的连接问题，仅表明 VS 加载项目的缓存版本可能在您的情况下具有冲突的许可证信息：[https ://connect.microsoft.com/VisualStudio/feedback/details/758523/visual-studio-2012 -reloads-a-cached-version-of-an-edited-csproj-file](https://connect.microsoft.com/VisualStudio/feedback/details/758523/visual-studio-2012-reloads-a-cached-version-of-an-edited-csproj-file)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-03T05:48:47.097

类似的事情曾经发生在我身上。尝试清理项目，也就是清理`bin`项目`obj`文件夹中的文件夹。

# java - Java正则表达式在href标签之间提取数据

> ID：15226362
> 
> 赞同：6
> 
> 时间：2013-03-05T14:30:15.587
> 
> 标签：java, regex

我正在尝试在 Java 字符串中的 href 标记之间提取数据。我可以通过替换所有和子字符串以及使用 indexOf 等来实现这一点。

我想知道如何使用正则表达式获取数据。

所以基本上我正在尝试提取数据并存储在字符串或列表中。

```
String data ="12345";
        String sampleStr ="";
        for(int i=0; i<10; i++) {
         data+=i;
        sampleStr += "<a href=\"javascript:yyy_getDetail(\'"+data+"\')\">"+data+"</a>"+", ";
        }           

        System.out.println(sampleStr);
        String temp = sampleStr.substring(sampleStr.indexOf("\">")+2); 
```

任何有关的建议将不胜感激。什么应该是正则表达式，所以我只提取数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T14:46:01.940

这是满足您需求的示例。请注意，完整匹配将包含带有锚标记的字符串，并且您搜索的内容位于`group 1`.

```
String data ="12345";
String sampleStr ="";
for(int i=0; i<10; i++) 
{
 data+=i;
 sampleStr += "<a href=\"javascript:yyy_getDetail(\'"+data+"\')\">"+data+"</a>"+", ";
} 

Pattern pattern = Pattern.compile("<a[^>]*>(.*?)</a>");
Matcher matcher = pattern.matcher(sampleStr );
while (matcher.find()) 
{
        System.out.println("Result "+ matcher.group(1));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T14:46:31.807

请改用 HTML/XML 解析器。你的生活会轻松很多。

HTML 通常是非常不一致的，你不能确定它会变成你想要的样子。

实际上有一个著名的答案，在[RegEx match open tags except XHTML self-contained tags](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags#1732454)

如果您选择使用 HTML/XML 解析器，您应该看看[Best XML parser for Java供您选择：)](https://stackoverflow.com/questions/373833/best-xml-parser-for-java)

# xcode - 升级 *.nib 文件失败，因为它依赖于 Interface Builder 3 插件

> ID：15226365
> 
> 赞同：1
> 
> 时间：2013-03-05T14:30:20.860
> 
> 标签：xcode, xcode4, xcode4.5, nib

我最近将我的 XCode 从 3.2.2 升级到了 4.5.2。一个旧项目编译得很好，但我不能更改它的三个 *.nib 文件中的两个。

当试图打开它时，XCode 告诉我该文档依赖于 Interface Builder 3 插件，我应该单击升级。

当我单击“升级”时，XCode 返回升级失败，因为它依赖于一个非常具有误导性的 Interface Builder 3 插件。

消息框截图：

![在此处输入图像描述](../Images/6c3b45cf612676a71276ed697ba069fd.png)

![在此处输入图像描述](../Images/757212b5457ea0306fa65425286e2302.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T15:22:30.407

来自[Xcode 的新功能](http://developer.apple.com/library/mac/#documentation/DeveloperTools/Conceptual/WhatsNewXcode/Articles/xcode_4_1.html)：

**Interface Builder 插件支持**

> 如果您在 Xcode 3 中使用了 Interface Builder 插件，您可以继续在 Xcode 4 中构建和运行您的项目，并且您可以更新您的项目以使您的 nib 文件在 Xcode 4 中可编辑。
> 
> Xcode 4 对 Interface Builder 3 插件提供有限的支持。具体来说，您可以使用 Interface Builder 插件依赖项构建项目，但不能编辑 nib 文件。当您尝试打开具有插件依赖项的 nib 文件时，Xcode 4 会显示一个对话框，建议您更新该文件。如果您同意，Xcode 会将使用插件构建的自定义对象类转换为最近的 AppKit 类。如果无法进行转换，Xcode 4 会提供详细的错误消息。在这种情况下，**您必须先使用 Interface Builder 3 删除插件依赖项，然后才能在 Xcode 4 中编辑 nib 文件**。

# jpa - 使嵌入字段在 JPA 中不可更新

> ID：15226366
> 
> 赞同：1
> 
> 时间：2013-03-05T14:30:23.820
> 
> 标签：jpa, jpa-2.0, eclipselink

我想让我的实体中的@Embedded 字段“foo”在 JPA 2.0 中不可更新

```
 @Entity
    public class Entity {

      @Id
      @SequenceGenerator(name = "Seq", sequenceName = "SEQ", allocationSize = 10)
      @GeneratedValue(generator = "Seq", strategy = GenerationType.SEQUENCE)
      String id;

      @Embedded
      private FooEmbeddable foo;
    }

    @Embeddable
    public class FooEmbedable{

       String fooString;
       String barString;
    } 
```

如果我有另一个实体而不是 @Embeddable 我可以使用 @Column 注释的 updatable=false 属性，但 @Embedded 中没有这样的属性

我发现了一个例子，@Column(updatable=false) 注释直接用于 Embeddable 的字段。IE

```
 @Embeddable
    public class FooEmbedable{
       @Column(updatable=false)
       String fooString;

       @Column(updatable=false)
       String barString;
    } 
```

..但是如果我将 FooEmbedable 用于另一个我希望它可以更新的表，会发生什么？

我想念什么吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T15:59:36.083

当您有多个映射同一列的映射并且您想指定一个作为所有者时，updatable=false 更适用。

如果您只是不想更新某些内容，那么就不要在您的应用程序中更改它（甚至不要为其添加 set 方法）。

# c++ - 如何在 C++ 枚举的 switch 语句中获取枚举值是否 > const N？

> ID：15226367
> 
> 赞同：0
> 
> 时间：2013-03-05T14:30:26.497
> 
> 标签：c++, switch-statement

有：

```
switch(val){
    case 1:
    break;
    case 2:
    break;
} 
```

`case val > N:`是否可以添加到它`const long long N = 100;`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T14:33:40.263

是的，但不是作为切换的一部分，请执行以下操作：

```
if ( val > N)
{
   // whatever
} else {
  switch(val){
    case 1:
    break;
    case 2:
    break;
  }
} 
```

`case`'s 只能是单个常量值。之所以这样，是因为`switch`C 的语句应该可以作为跳转表来实现。高级语言经常允许更复杂的比较，使其成为一系列`if () {} else if () {}`语句的有效语法糖。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T14:32:12.813

不，C++`switch`案例只处理单个值。

您可以添加一个`default`带有`if`语句的案例来检查范围。或者直接使用`if`不带`switch`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T14:33:12.333

我可以建议这个：

```
switch(val){
    case 1:
    break;
    case 2:
    break;
    case 3:
    case 4: //etc
    default:
     //case > 100
} 
```

# php - 滚动在 php 的 while 循环中出现的 div

> ID：15226373
> 
> 赞同：1
> 
> 时间：2013-03-05T14:30:43.003
> 
> 标签：php, jquery, mysql

```
<?php
while ($row2 = mysql_fetch_array ($res2)) 
{
  //echo "<div id='filmstrip' style='float:left;overflow-x:Scroll;width:920px;margin:0 auto; background:#f9f9f9; padding:10px; height:130px;overflow-y:hidden;white-space: nowrap;'>";
  echo '<div id="sortable1"  class="connectedSortable">';
  echo "<img id='$row2[id]'  style='width:100px;float:left;height:100px;border:2px solid #b06c1c;border-radius:10px;' src=\"user_data/" . $row2['filename'] . "\" alt=\"\" /><br />";
  //echo "</div>";
  echo '</div>';
}
?> 
```

在这里，我将表格中的图像显示到一个名为`sortable1`. 我希望它`img`水平滚动。当我为 应用 CSS 时`sortable1`，滚动条会出现在每个图像上，但不会出现在包含所有图像的 div 上。任何人都可以提出解决方案吗？我是 PHP 和 Jquery 的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T14:35:51.997

应该是：

```
<?php
echo "<div id='filmstrip' style='float:left;overflow-x:Scroll;width:920px;margin:0 auto; background:#f9f9f9; padding:10px; height:130px;overflow-y:hidden;white-space: nowrap;'>";
while ($row2 = mysql_fetch_array ($res2)) 
{
  echo '<div id="sortable1"  class="connectedSortable">';
  echo "<img id='$row2[id]'  style='width:100px;float:left;height:100px;border:2px solid #b06c1c;border-radius:10px;' src=\"user_data/" . $row2['filename'] . "\" alt=\"\" /><br />";
  echo '</div>';
}
echo "</div>";
?> 
```

# c# - c#什么需要处理时间？

> ID：15226380
> 
> 赞同：-5
> 
> 时间：2013-03-05T14:31:02.267
> 
> 标签：c#, time, processing

我正在做一个视频处理程序，其中时间非常关键。我在程序中没有任何困难，但我想从你那里知道，编码中的哪些事情需要最多的处理时间？循环？如果语句？goto 语句？功能？写/读文本文件？其他事情？我的程序包含很多上述各项，我想知道哪些事情花费的时间最多，以便我可以尽量减少时间（在我的应用程序中甚至是 1 秒）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T14:33:56.277

使用上面的数据不可能给出准确的答案。它很可能会出现在对视频处理库的某些库调用中，但这只是猜测。

因此，唯一明智的答案是：使用分析器来找出您的程序究竟将时间花在了哪里。

[分析器](http://en.wikipedia.org/wiki/Profiling_%28computer_programming%29)是一个程序，它分析您的程序并确定它在哪里花费时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T14:40:04.087

我同意使用分析器。在某些情况下，使用分析器可能会使程序减慢太多或占用太多内存。在这种情况下，明智地使用时间测量： [秒表](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx)

可能会成功。

# c++ - 派生类的 std::vector 成员的复制分配在以多态方式使用时会导致内存泄漏

> ID：15226382
> 
> 赞同：0
> 
> 时间：2013-03-05T14:31:05.777
> 
> 标签：c++, inheritance, polymorphism, stdvector

在下面的代码中，我想`input` `vector<double>`在`derived`类中存储一个。我通过应用复制赋值来实现，`std::vector`因为向量被传递给`setIT`函数。我需要它来使用在派生中实现的计算。在此复制分配期间出现内存泄漏。

可以通过使用来避免这种泄漏：`vector<double> * input`而不是`vector<double> input`，但我不明白为什么。

任何人都可以澄清这一点吗？提前致谢。

```
#include "utilities.h"
#include <fstream>

using namespace std;
using namespace astro;

class base
{
  public:
    base () { cout<<" in base default constructor "<<endl; }
    virtual void setIT (void *v) = 0;
    virtual double compute () = 0;
};

class derived : public base
{
  protected:
    vector<double> input;

  public:
    derived ();
    virtual void setIT (void *v);
    virtual double compute () { /* using input vector to return something */ return 0; }
};

derived::derived () : base()
{
    cout<<" in derived default constructor "<<endl;
    input.resize(0);
}

void derived::setIT (void *v)
{
  cout<<" in derived setIT "<<endl;
  vector<double> * a = reinterpret_cast<vector<double>* >(v);
  input = *a;
  for (uint i = 0; i<input.size(); i++)
    cout<<i<<" "<<input[i]<<endl;
}

int main ()
{
  vector<double> test;
  fill_linear(test,5,1.,6.); // linear filling of test vector by '5' values between 1 and 6

  base * t = new derived;
  t->setIT (&test);
  cout<<t->compute()<<endl;

  delete t;
  t = NULL;
  return 0;
} 
```

输出：

```
 in base default constructor 
 in derived default constructor 
 in derived setIT 
0 1
1 2.25
2 3.5
3 4.75
4 6
1 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-05T14:35:35.087

实际上你的程序调用了未定义的行为。

`base`类的析构函数**必须**是`virtual`明确定义的。

只需将析构函数定义为：

```
virtual ~base() {} 
```

即使它是空的也要这样做！

有关详细信息，请阅读以下内容：

*   [我的析构函数什么时候应该是虚拟的？](http://www.parashift.com/c++-faq/virtual-dtors.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T14:48:15.943

避免在 C++ 中使用 void 指针。如果要处理不同的类型，请改用模板。

```
class Base
{
public:
  virtual ~Base(){}
  virtual double compute() const=0;
};

template<typename T>
class Derived : public Base
{
private:
  std::vector<T> m_input;
public:
  void set_it(const T& in)
  {
    m_input = in;
  }
  double compute() const{/*Do the computation and return*/;}
}; 
```

# c# - 使用集合和泛型实现接口

> ID：15226387
> 
> 赞同：0
> 
> 时间：2013-03-05T14:31:09.267
> 
> 标签：c#, entity-framework, collections, interface

我正在尝试在实体框架类生成的类中进行一些抽象，并进行如下设置：

```
EntityClassA (Generated)
{
   EntityCollection<EntityClassB> EntityClassBs;
}

EntityClassB (Generated)
{
   (...)
} 
```

* * *

```
Partial EntityClassA : InterfaceA
{
   (...)
}

Partial ClassB : InterfaceB
{
   (...)
}

InterfaceA
{
   IEnumerable<InterfaceB> EntityClassBs;
} 
```

但我不断收到问题说 EntityClassA 没有正确实现，因为返回类型在 EntityClassB 上不匹配。

**更新：**抱歉，我不打算在这种状态下提交这个问题。更新示例以包含正确的 interfaceA 属性名称和更详细的说明。请记住，这只是一个示例，命名法并不代表实际名称。

我想要做的是我有一个 wpf 控件类库和一个数据库。WPF 库引用用于构造自定义表的一个类的数据库。所以我试图做的是通过使用接口来依赖数据包。有没有办法可以这样进行，还是有更推荐的方式？

我看到的是我需要完全匹配接口属性的签名，我不能实现这样的接口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:41:43.347

您没有提出问题，也没有提供有关您正在使用的返回类型的任何详细信息，因此根据您的陈述，我会假装您正在尝试这样做：

```
Partial EntityClassA : InterfaceA
{
   IEnumerable<ClassB> IClassBs {get; set;}
}

Partial ClassB : InterfaceB
{
   (...)
}

InterfaceA
{
   IEnumerable<InterfaceB> IClassBs;
} 
```

这是无效的。该`InterfaceA`接口指定`IClassBs`（顺便说一下，名称不好的属性）如果`InterfaceB`s 则返回一个集合。更改方法*签名*以返回`ClassB`s 的集合与接口定义不匹配。

请注意，您可以在`ClassB`不更改返回类型的情况下返回一个实际的 s 列表：

```
Partial EntityClassA : InterfaceA
{
   IEnumerable<InterfaceB> IClassBs 
   {
       get
       {
           return new List<InterfaceB>() {new ClassB()};
       }
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T15:16:56.550

我想我明白你想要做什么。也许您可以尝试添加另一个属性，而不是更改签名（不能这样做），该属性只返回相同的属性，但带有您正在寻找的签名。

```
Partial EntityClassA : InterfaceA
{
    IEnumerable<InterfaceB> CollectionEntityClassBs
    {
        get{ return (some cast or somthin)EntityClassBs;  }
    }
}

InterfaceA
{
   IEnumerable<InterfaceB> CollectionEntityClassBs;
} 
```

# ssis - 由于截断问题，DTS pkg 转换为 SSIS 失败

> ID：15226390
> 
> 赞同：1
> 
> 时间：2013-03-05T14:31:20.233
> 
> 标签：ssis, truncate, dts, truncation

我遇到了一个问题，我需要将 DTS pkgs 带到新服务器并让它们作为计划的 SQL 作业运行。我已经进入 DTS pkg 并编辑了连接以包括新的 2008 服务器名称和新的 UNC 路径。DTS 包采用固定长度的平面文件并将这些值加载到 db 表中。编辑 DTS 后，我导出到结构化 DTS 包文件。然后我转到新服务器并使用迁移向导将 DTS 转换为 DTSX 文件。完成后，我将 DTSX 导入具有“依赖服务器存储和角色进行访问控制”保护级别的集成服务。

然后我运行该软件包，但由于以下原因而失败：

```
Source: Copy Data from Medical Services to  cabinet   dbo   SERVICE_FILE  Task Flat File Source [1]    

 Description: Data conversion failed. The data conversion for column "Col004" returned status value 4 and status text "Text was truncated or one or more characters had no match in the target code page.". 

 End Error  Error: 2013-03-04 23:19:13.01     Code: 0xC020902A     Source: Copy Data from Medical Services to  cabinet   dbo   SERVICE_FILE  Task Flat File Source [1]     Description: The "output column "Col004" (22)" failed because truncation occurred, and the truncation row disposition on "output column "Col004" (22)" specifies failure on truncation. A truncation error occurred on the specified object of the specified component.  End Error  Error: 2013-03-04 23:19:13.01     Code: 0xC0202092     Source: Copy Data from Medical Services to  cabinet   dbo   SERVICE_FILE  Task Flat File Source [1]     Description: An error occurred while processing file "\\hpf15release\global$\cold\coldin\FTP_DXPX\Medical_Services_Master_File" on data row 1\.  End Error  Error: 2013-03-04 23:19:13.01     Code: 0xC0047038     Source: Copy Data from Medical Services to  cabinet   dbo   SERVICE_FILE  Task SSIS.Pipeline     Description: SSIS Error Code DTS_E_PRIMEOUTPUTFAILED.  The PrimeOutput method on component "Flat File Source" (1) returned error code 0xC0202092\.  The component returned a failure code when the pipeline engine called PrimeOutput(). The meaning of the failure code is defined by the component, but the error is fatal and the pipeline stopped executing.  There may be error messages posted before this with more information about the failure.  End Error  DTExec: The package execution returned DTSER_FAILURE (1).  Started:  11:19:12 PM  Finished: 11:19:13 PM  Elapsed:  0.952 seconds.  The package execution failed.  The step failed. 
```

我正在使用与旧服务器中使用的相同的包...和平面文件，它在旧服务器上运行良好。它试图复制到的表具有具有相同特征的相同列......所以试图了解这个错误来自哪里。

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:12:08.413

如果与以前的相同，请检查您的目标表结构。它可能是数据类型问题。我之前遇到过同样的问题，并通过数据类型转换修复了它。

# macos - MAMP 出现异常 MySql 错误

> ID：15226394
> 
> 赞同：13
> 
> 时间：2013-03-05T14:31:31.497
> 
> 标签：macos, mamp, mysql

*   我设置了 MAMP Pro。在此之前，我设置并删除了 MAMP 和 XAMPP。我疯狂地删除了前两个的所有文件。从那时起，Apache 没有在 Mamp 默认端口 8888 上运行，并且 - MySql 根本没有运行。
*   一行写着“检查 mysqld 进程是否已经运行”我检查了它，但它不是！- 这是错误日志。

> ```
> InnoDB: Check that you do not already have another mysqld process
> InnoDB: using the same InnoDB data or log files.
> InnoDB: Unable to lock ./ibdata1, error: 35
> InnoDB: Check that you do not already have another mysqld process
> InnoDB: using the same InnoDB data or log files.
> InnoDB: Unable to lock ./ibdata1, error: 35
> InnoDB: Check that you do not already have another mysqld process
> InnoDB: using the same InnoDB data or log files.
> InnoDB: Unable to lock ./ibdata1, error: 35
> InnoDB: Check that you do not already have another mysqld process
> InnoDB: using the same InnoDB data or log files.
> 130305 19:49:08  InnoDB: Unable to open the first data file
> InnoDB: Error in opening ./ibdata1
> 130305 19:49:08  InnoDB: Operating system error number 35 in a file operation.
> InnoDB: Error number 35 means 'Resource temporarily unavailable'.
> InnoDB: Some operating system error numbers are described at
> InnoDB: http://dev.mysql.com/doc/refman/5.5/en/operating-system-error-codes.html
> 130305 19:49:08 InnoDB: Could not open or create data files.
> 130305 19:49:08 InnoDB: If you tried to add new data files, and it failed here,
> 130305 19:49:08 InnoDB: you should now edit innodb_data_file_path in my.cnf back
> 130305 19:49:08 InnoDB: to what it was, and remove the new ibdata files InnoDB created
> 130305 19:49:08 InnoDB: in this failed attempt. InnoDB only wrote those files full of
> 130305 19:49:08 InnoDB: zeros, but did not yet use them in any way. But be careful: do not
> 130305 19:49:08 InnoDB: remove old data files which contain your precious data!
> 130305 19:49:08 [ERROR] Plugin 'InnoDB' init function returned error.
> 130305 19:49:08 [ERROR] Plugin 'InnoDB' registration as a STORAGE ENGINE failed.
> 130305 19:49:08 [ERROR] Unknown/unsupported storage engine: InnoDB
> 130305 19:49:08 [ERROR] Aborting
> 
> 130305 19:49:08 [Note] /Applications/MAMP/Library/bin/mysqld: Shutdown complete
> 
> 130305 19:49:08 mysqld_safe mysqld from pid file /Applications/MAMP/tmp/mysql/mysql.pid ended 
> ```

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2014-03-18T04:50:09.743

只需在 MAC 上搜索“活动监视器”应用程序并搜索任何名为 mysql 的任务并结束它。然后重启 MAMP 就可以了。希望它可以帮助某人。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-05-12T17:04:21.717

结束**Activity Monitor**应用程序中的任何`mysql`或`mysqld`任务（或其他） 。

 *** * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-03-22T04:10:50.820

如果你不能用**Activity Monitor**杀死它们，在**终端**做
`$ ps aux | grep mysqld`
第二列是进程ID，你可以用（如果是1234）停止它
`$ kill 1234`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-22T02:55:27.157

我通过 kill mysqld 进程解决了这个问题：

要杀死**Linux 上的**所有 mysqld 进程：

```
# killall mysqld mysqld_safe 
```

至少等待 10 秒钟，以便它干净地关闭。现在，运行这个命令来检查是否还有一些 mysqld 进程仍然存在？

```
# ps aux | grep mysqld 
```

如果您仍然能够看到更多内容，请运行以下命令：

```
killall -9 mysqld mysqld_safe 
```

这将杀死所有 mysqld 进程。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-11-16T12:05:16.410

只需重新启动您的电脑，这为我解决了它**

# wordpress - 根据页面（菜单）更改选定的下拉选项

> ID：15226398
> 
> 赞同：0
> 
> 时间：2013-03-05T14:31:40.983
> 
> 标签：wordpress, select, drop-down-menu, menu, option

我在我的 WP 主题中使用下拉菜单，并使用选择框。在选择新选择选项时，页面更改页面。但是，当呈现新页面时，选择菜单中的默认选项仍然是“起始页”（第一个）。

我该怎么做才能对当前页面进行这一更改？

**header.php：**

```
<div id="navigation" role="navigation">

    wp_nav_menu(array(
        'container' => false,
        'menu_id' => 'nav',
        'theme_location' => 'primary', // your theme location here
        'walker'         => new Walker_Nav_Menu_Dropdown(),
        'items_wrap'     => '<select>%3$s</select>',
        'fallback_cb'    => 'bp_dtheme_main_nav'
    ));

    class Walker_Nav_Menu_Dropdown extends Walker_Nav_Menu{
        function start_lvl(&$output, $depth){
            $indent = str_repeat("\t", $depth);
            }

        function end_lvl(&$output, $depth){
            $indent = str_repeat("\t", $depth);
        }

        function start_el(&$output, $item, $depth, $args){
            $item->title = str_repeat("&nbsp;- ", $depth).$item->title;

            parent::start_el($output, $item, $depth, $args);

            $href =! empty( $item->url ) ? ' value="'   . esc_attr( $item->url ) .'"' : '#';

            $output = str_replace('<li', '<option '.$href, $output);
        }

        function end_el(&$output, $item, $depth){
            $output .= "</option>\n"; // replace closing </li> with the option tag
        }
    } ?>

</div> 
```

**jQuery：**

```
$("#navigation select").on('change', function() {
    window.location = jq(this).find("option:selected").val();
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T14:45:51.593

由于每个选项的值都是一个 URL，因此只需遍历每个选项并与当前页面 URL 进行比较。如果它们相同，请将选项的属性设置为选中。

```
$("#navigation option").each(function () {
    if ($(this).val() === window.location.toString()) {
        $(this).prop('selected', true);
    }
}); 
```

# django - 夹层搜索引擎

> ID：15226403
> 
> 赞同：0
> 
> 时间：2013-03-05T14:31:46.217
> 
> 标签：django, search, case-sensitive, mezzanine

我使用[夹层 CMS](http://mezzanine.jupo.org/)。它有 {% search_form "app.model" %} 模板标签，它工作正常，但它区分大小写搜索。如何进行不区分大小写的搜索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T09:30:01.203

Mezzanine 的搜索已经不区分大小写。

# java - 不幸的是，应用程序在 android 的 AVD 上停止了

> ID：15226406
> 
> 赞同：0
> 
> 时间：2013-03-05T14:31:48.117
> 
> 标签：java, android, string, casting, android-edittext

我正在尝试构建一个简单的计算器应用程序，该应用程序具有：

3`EditText`代表 2 个数字和结果。

6 `Buttons`+ - * / = 清除。

在 AVD 上运行此应用程序时，它会闪烁“不幸的是应用程序已停止！”

这意味着会遇到某种异常，但我无法理解是什么。

当我检查 Logcat 时，有一些东西*"EditText cannot be typecast to String"*。

请帮我调试这个异常。

```
package com.example.calci_ver1;

import android.os.Bundle;
import android.app.Activity;
import android.view.*;
import android.widget.*;

public class MainActivity extends Activity {

Button badd, bsub, bmul, bdiv, beq, bclr;
static EditText et1, et2, et3;

static int i=0, n1, n2;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    badd = (Button)findViewById(R.id.button1);
    bsub = (Button)findViewById(R.id.button2);
    bmul = (Button)findViewById(R.id.button3);
    bdiv = (Button)findViewById(R.id.button4);
    beq = (Button)findViewById(R.id.button5);
    bclr = (Button)findViewById(R.id.button6);

    et1 = (EditText)findViewById(R.id.editText1);
    et2 = (EditText)findViewById(R.id.editText2);
    et3 = (EditText)findViewById(R.id.editText3);

    badd.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            i = 1;
        }
    });

    bsub.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            i = 2;
        }
    });

    bmul.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            i = 3;
        }
    });

    bdiv.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            i = 4;
        }
    });

    beq.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub

            String s1, s2;

            s1 = et1.getText().toString();
            s2 = et2.getText().toString();

            n1 = Integer.parseInt(s1);
            n2 = Integer.parseInt(s2);

            calculation();

            i = 0;
        }
    });

    bclr.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            et1.setText("");
            et2.setText("");
            et3.setText("");
        }
    });
}

public static void calculation() {

    switch(i)
    {
        case 1: et3.setText(n1+n2);
        break;

        case 2: et3.setText(n1-n2);
        break;

        case 3: et3.setText(n1*n2);
        break;

        case 4: et3.setText(n1/n2);
        break;
    }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T15:14:46.800

我发现可能导致应用程序崩溃的问题..

删除您在`calculation()`方法中编写的代码。

实际上你的问题是你传递了两个数字的结果，它给出了数值并且`android`有方法，`edittext` `setText(int resid)`所以它意味着它的搜索文本`string.xml`不存在。所以它会使您的应用程序崩溃。因此，您需要将结果转换为`String`.

用这个。

```
public static void calculation() {

    switch(i)
    {
        double result = 0;
        case 1: 
            result = n1+n2;
            et3.setText(String.valueOf(result));
        break;

        case 2: 
            result = n1-n2;
            et3.setText(String.valueOf(result));
        break;

        case 3: 
            result = n1*n2;
            et3.setText(String.valueOf(result));
        break;

        case 4: 
            result = n1/n2;
            et3.setText(String.valueOf(result));
        break;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T15:05:21.847

使用 android:inputType="number" 强制它为数字。

将结果字符串转换为整数（例如，Integer.parseInt(myEditText.getText().toString())）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T14:40:53.710

我发现当你调用`.setText()`命令时 AVD 偶尔会抛出这些错误，但我从未在现实生活中的设备上遇到过错误，所以只需在你的 AVD 上重新安装程序。我会环顾四周，因为我遇到了这个问题，而且我知道我以前在 SO 上见过它。

# eclipse - 将现有 JSP 项目导入 Eclipse 或 Net Beans

> ID：15226407
> 
> 赞同：5
> 
> 时间：2013-03-05T14:31:52.180
> 
> 标签：eclipse, netbeans, web-project

我正在尝试从本地主机上的某个服务器导入项目。

我更喜欢在 NetBeans 中导入它，但 Eclipse 也可以。我现在在 NetBeans 中设置了 Tomcat 服务器。然后我尝试使用现有源创建新的 Java Web 项目，然后通过向导，当我应该选择网页文件夹时，Web-inf 内容显示：“网页文件夹与项目文件夹重叠。”

但我不确定我应该在那里进行什么样的设置。如果您可能有一些建议或视频教程，那就太棒了..

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-02-15T18:25:12.100

A common error that may arise at the final stage is of the project creation is --

"Web Pages folder overlaps Project folder."

To solve this issue, use the following simple steps.

*   Inside the project folder, create a folder called web.

*   Move the sources and the WEB-INF file into the web directory. You are good to go! When you create the project now from the existing sources, the process will be seamless!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T14:40:53.603

可以直接通过eclipse导入，有导入某个项目的选项，不要新建项目

# android - AsyncTask 未在 UI 线程上更新

> ID：15226412
> 
> 赞同：6
> 
> 时间：2013-03-05T14:32:05.460
> 
> 标签：android, user-interface, android-asynctask, thread-safety

我有一个 AsyncTask 更新 ActionBarSherlock 进度实现。尽管 onProgressUpdate 声称在 UI 线程上执行，但它以某种方式引发了线程错误。

```
protected void onProgressUpdate(Integer... values)
{
    setSupportProgress(values[0]);
} 
```

错误是：

> 03-06 00:13:11.672: E/AndroidRuntime(4183): at com.anthonymandra.framework.GalleryActivity$ShareTask.onProgressUpdate(GalleryActivity.java:476)
> 
> 只有创建视图层次结构的原始线程才能接触其视图。

据我所知，我应该为此访问 UI 线程...

我的应用程序中有许多正在工作的 AsyncTasks，但根据要求，这里是 doInBackground（简化版）：

```
for (MediaObject image : toShare)
{
    BufferedInputStream imageData = image.getThumbStream();
    File swapFile = getSwapFile(...);
    write(swapFile, imageData);
    ++completed;
    float progress = (float) completed / toShare.size();
    int progressLocation = (int) Math.ceil(progressRange * progress);
    onProgressUpdate(progressLocation);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T14:39:19.833

好的，问题是当您应该调用 publishProgress 时，您正在调用 onProgressUpdate。OP自己想出了这个，所以我只是复制粘贴了它，所以他/她不需要等待接受答案。以下是 AsyncTasks 如何工作的信息，这是很好的知识。

* * *

你是`AsyncTask`在 UI 线程上创建的吗？如果你不是，那就是问题所在。`onProgressUpdate`将在创建`AsyncTask`.

更新：让我们有一些代码挖掘时间（API 15 源代码）！

```
protected final void publishProgress(Progress... values) {
    if (!isCancelled()) {
        sHandler.obtainMessage(MESSAGE_POST_PROGRESS,
                new AsyncTaskResult<Progress>(this, values)).sendToTarget();
    }
} 
```

这家伙会称它为静态`Handler`sHandler。[文档](http://developer.android.com/reference/android/os/Handler.html)说：

*当您创建一个新的处理程序时，它会绑定到创建它的线程的线程/消息队列——从那时起，它会将消息和可运行对象传递到该消息队列并在它们从消息中出来时执行它们队列。*

感谢 Bruno Mateus 的文档查找技巧：

> 看，我在文档页面找到：线程规则 - 必须遵循一些线程规则才能使此类正常工作： - AsyncTask 类必须加载到 UI 线程上。这是从 JELLY_BEAN 自动完成的。- 任务实例必须在 UI 线程上创建。必须在 UI 线程上调用 execute(Params...)。- 不要手动调用 onPreExecute()、onPostExecute(Result)、doInBackground(Params...)、onProgressUpdate(Progress...)。- 任务只能执行一次（如果尝试第二次执行将抛出异常。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T15:19:18.237

您可以将 AsyncTask 声明为活动的内部类，如下所示：

```
public void onClick(View v) {
   new DownloadImageTask().execute("http://example.com/image.png");
}

 private class DownloadImageTask extends AsyncTask {
      protected Bitmap doInBackground(String... urls) {
          return loadImageFromNetwork(urls[0]);
     }

     protected void onPostExecute(Bitmap result) {
          mImageView.setImageBitmap(result);
     }
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T15:38:36.173

我手动调用：

```
onProgressUpdate 
```

你应该打电话

```
publishProgress 
```

容易犯错，但信息很好。西蒙和布鲁诺值得称赞，如果您愿意，请发布答案。感谢您的快速和广泛的响应！

# php - php preg_match 函数第三个参数

> ID：15226417
> 
> 赞同：0
> 
> 时间：2013-03-05T14:32:14.197
> 
> 标签：php, regex, preg-match

我正在阅读 preg_match 函数的在线手册并写了一段代码来测试它。除此之外，我还使用`preg_grep`.

这是代码：

```
$subject = array("Robert");
$subject2 = "Robert";
$pattern = "/./";

$result = preg_grep($pattern, $subject);
$result2 = preg_match($pattern, $subject2, $matches);
echo "<pre>";
print_r($result);
print_r($matches);
echo "</pre>"; 
```

对于`preg_grep`我得到了我所期望的，一个值为“Robert”的数组元素[0]，这是有道理的。

因为`preg_match`我得到了一个意想不到的结果，至少就我对正则表达式的理解而言。它是一个值为“R”的数组元素[0]。

这是为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T14:33:31.757

`.`匹配除换行符以外的任何字符。所以它会返回第一个字符，因为`+`它不存在。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T14:40:54.820

因为`/./`意味着一个字符，而不是全部。您应该使用量词：

*   `*`表示 0 个或多个字符
*   `+`表示 1 个或多个字符
*   `?`表示 0 或 1 个字符

如果你给量词加上后缀，`?`则意味着不贪婪的匹配（这意味着它试图匹配尽可能少的字符，而不是尽可能多的字符）。

一个完整的结果：

```
Input string: 'Robert'

Regex    Result
=====    ======

/.*/     Robert
/.*?/    null
/.+/     Robert
/.+?/    R
/.?/     R
/.??/    null 
```

# php - curl 在命令行中可以正常工作，但不能在 php 中

> ID：15226421
> 
> 赞同：3
> 
> 时间：2013-03-05T14:32:25.193
> 
> 标签：php, curl

我使用 curl 从 PHP 中检索 url 的内容。它适用于大多数 url，但对于某些 url，它只返回一个空字符串（从命令行“卷曲”这样的 url 就可以了）。这是我运行 curl 的方式：

```
$curl_session = curl_init($site->url);
curl_setopt($curl_session, CURLOPT_HEADER, 0);
curl_setopt($curl_session, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($curl_session, CURLOPT_CONNECTTIMEOUT, TIMEOUT);
$output = curl_exec($curl_session);
curl_close($curl_session); 
```

我还检查了 curl 似乎没有给出任何错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-13T15:08:43.157

您可以使用

```
echo shell_exec("www.example.com"); 
```

# ruby-on-rails - 更改日期月份不起作用

> ID：15226422
> 
> 赞同：0
> 
> 时间：2013-03-05T14:32:29.083
> 
> 标签：ruby-on-rails, datetime

我有一个付款清单，如果必须完成 X 次，我想通过在前一个日期添加 +1 来更新月份。

例如，今天每月节省 3 次的付款：

*   2013 年 3 月 5 日
*   2013 年 4 月 5 日
*   2013 年 5 月 5 日

我写了这个：

```
for payment in @order.payments
  if (payment.monthly)
    for month in 0..(payment.nb_of_times - 1)
      payment.date = payment.date.to_date >> month
      ordered_payment << payment
    end
  else
    ordered_payment << payment
  end
end 
```

但问题是它返回：

*   2013 年 5 月 5 日
*   2013 年 5 月 5 日
*   2013 年 5 月 5 日

你能告诉我我哪里错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T14:43:16.383

您应该使用 Rails 方式来实现您的代码：

```
@order.payments.each do |payment|
  if payment.monthly
    payment.nb_of_times.times do |nb_month|
      payment.date = payment.date + nb_month.months # this is awkward because of the variable name
      payment.save
      ordered_payment << payment
    end
  else
    ordered_payment << payment
  end
end 
```

（该`.times`方法非常有用，对于每个整数（Fixnum），您都可以调用`.times`它以迭代 X 次）

我们在这里使用的另一个非常有用的方法`.months`是可用于整数（Fixnum）。它将整数转换为日期中的月份数。它也适用于`.years`, `.hours`,`.weeks`等：

```
irb(main):008:0> Time.now + 1.years
#=> 2014-03-05 10:09:58 -0500
irb(main):009:0> Time.now + 1.months
#=> 2013-04-05 10:10:01 -0400
irb(main):010:0> Time.now + 1.hours
#=> 2013-03-05 11:10:04 -0500
irb(main):011:0> Time.now + 1.seconds
#=> 2013-03-05 10:10:08 -0500

# With a variable:
irb(main):014:0> Time.now + Patient.first.id.hours
  Patient Load (1.1ms)  SELECT "patients".* FROM "patients" LIMIT 1
#=> 2013-10-08 06:12:04 -0400 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T14:49:56.413

如果您正在尝试做我认为您要做的事情 - 也就是说，在您的`@order.payments`日期之后以月为间隔返回一个日期数组，对于`payment.nb_of_times`时间，这应该可以解决问题：

```
ordered_payment = []
@order.payments.each do |payment|
  if payment.monthly
    payment.nb_of_times.times do |i|
      ordered_payment << payment.date + (i+1).months
    end
  else
    ordered_payment << payment.date
  end
end 
```

这应该返回一个日期数组。

# r - 如何在 R 中绘制时间序列簇？

> ID：15226424
> 
> 赞同：4
> 
> 时间：2013-03-05T08:31:46.817
> 
> 标签：r, time-series, data-visualization, cluster-analysis

只需阅读 Ratanamahatana、Lin、Gunopulos 和 Keogh 的[“挖掘时间序列数据”pdf](http://www.cs.gmu.edu/~jessica/BookChapterTSMining.pdf)。有人知道如何像图 1.7 那样在 R 中可视化时间序列集群吗？ ![在此处输入图像描述](../Images/76b4100c2138d330a370cf326482fa34.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T00:44:49.720

您可以使用迷你图可视化 100 多个时间序列序列。如果您还想要分层排序，您可以通过 2 个步骤实现。

1.  按多级集群对时间序列序列的 data.frame 进行排序。（这假设您已经计算了每个系列的集群层次结构。）

2.  在您的 R 设置中下载并安装[SparkTable 。](http://cran.r-project.org/web/packages/sparkTable/index.html)现在为您的 TS 序列绘制迷你图。查看[SparkEPS](http://www.inside-r.org/packages/cran/sparkTable/docs/sparkEPS)的 Inside-R 页面。

[statExchange 上的这个答案](https://stats.stackexchange.com/questions/8242/plotting-sparklines-in-r)正是您在绘图部分所需要的，所以我不会在这里复制相同的示例。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T21:02:14.420

这个图*很可能*是用*绘图*程序制作的，而不是用数据挖掘软件制作的。

没有人会像这样对 6 个观察结果进行聚类分析。直观地查看它们并手动完成比弄清楚如何让程序以这种方式可视化它更容易。

# android - Android GreenDao - 仅删除特定实体的缓存对象

> ID：15226428
> 
> 赞同：7
> 
> 时间：2013-03-05T14:32:54.980
> 
> 标签：android, orm, greendao

我在我的 Android 应用程序中使用 GreenDao ORM。

[如此处](https://stackoverflow.com/questions/11387961/greendao-delete-from-db-and-session)所述，可以使用

```
DaoSession.clear(); 
```

为了清除会话的**所有**缓存对象。

我的问题是：如何清除**特定实体**的缓存对象（而不是全部）？我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T09:41:44.197

下个版本会有`dao.detachAll()`。提交在这里： [https ://github.com/greenrobot/greenDAO/commit/6a658c84e7de97073a260e062b06e3cc13a18196](https://github.com/greenrobot/greenDAO/commit/6a658c84e7de97073a260e062b06e3cc13a18196)

旁注：用于`yourDao.detach(yourEntity)`从身份范围中删除单个实体。这会强制对该数据库对象的后续查询返回不同的对象。

# java - Android 地图应用找不到正确的 MapView

> ID：15226429
> 
> 赞同：0
> 
> 时间：2013-03-05T14:32:55.367
> 
> 标签：java, android, api, maps

我制作了一个使用 Google Android Maps API V2 的应用程序，并且我遵循了 Google 提供的指南中的每一步，但不幸的是它不能正常工作，每次我尝试启动它时它都会崩溃。

问题似乎在于它不是在寻找 com.google.android.gms.maps.MapView 这是 Android Maps API V2 的 MapView 而是在寻找 com.google.android.maps.MapView 这是 MapView对于 Android Maps API V1，我想知道如何更改它？

```
03-04 00:26:51.274: E/dalvikvm(14369): Could not find class 'com.google.android.maps.MapView', referenced from method com.cornboyzmaps.googlemapsA.MainActivity.onCreate 
```

**MainActivity.java**

```
package com.example.name;

import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import com.google.android.gms.maps.SupportMapFragment;

public class MainActivity extends FragmentActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        SupportMapFragment fragment = new SupportMapFragment();
        getSupportFragmentManager().beginTransaction()
                .add(android.R.id.content, fragment).commit();
    }
} 
```

**activity_main.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
      android:id="@+id/map"
      android:layout_width="wrap_content"
      android:layout_height="match_parent"
      class="com.google.android.gms.maps.SupportMapFragment"/> 
```

**清单.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.name"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="16" />

    <permission
        android:name="com.example.name.permission.MAPS_RECEIVE"
        android:protectionLevel="signature" />

    <uses-permission android:name="com.example.name.permission.MAPS_RECEIVE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" 
        android:debuggable="true" >
        <activity
            android:name="com.example.name.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <meta-data
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="**api_key**" />
    </application>

    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true" />

</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T14:45:12.340

您是否尝试过使用 setContentView 正常扩展 xml 布局？现在看起来您正在尝试从 xml 片段制作片段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T14:48:13.863

在activity_main.xml 中，您不应该有地图片段，因为您以编程方式添加它。
我要做的是将activity_mail.xml 更改为包含将成为片段容器的Framelayout。例如：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

   <FrameLayout
        android:id="@+id/fragment_container"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />
</RelativeLayout> 
```

之后在 MainActivity.java 中，您应该为 Framelayout 找到 ViewbyId 并添加 mapfragment。
同样奇怪的是，您收到 MapView 错误但您的代码中没有错误。也许您可以发布更多代码？

# actionscript-3 - 如何在 AS3 中检测 StaticText？

> ID：15226432
> 
> 赞同：4
> 
> 时间：2013-03-05T14:33:05.620
> 
> 标签：actionscript-3

我的 Flash 项目中有 StaticText 字段，当鼠标悬停在它们上方时，我需要运行一些代码。所以我尝试了这段代码

```
 stage.addEventListener(MouseEvent.MOUSE_OVER, mouseRollOver);
  function mouseRollOver(event:MouseEvent):void {
  var tf:StaticText  = event.target as StaticText;
  if (tf){
  //my code
  }
} 
```

但它不起作用。当我使用动态文本字段并用 var tf 中的 TextField 替换 StaticText 时，它工作正常。我还认为，如果我可以让鼠标检测到的不是 StaticText 作为目标，而是某种具有某些文本属性的对象（例如“可选择”设置为 true），那么我可以让这个东西与静态文本字段一起工作，但我不能不知道如何做到这一点。无论如何，我需要以某种方式将静态文本字段检测为目标。任何帮助，将不胜感激。
提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T14:37:45.257

您最好的选择是将静态文本框放在影片剪辑中，然后根据它分配您的代码。静态文本框没有实例名称，也无法操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T15:05:19.987

很难做到这一点。查看此链接[在此处输入链接描述](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/text/StaticText.html) 如您所见，您可以检查 DisplayObject 是否为 StaticText，并通过检查 mousX 和 MouseY 属性，您可以找到翻转是否与此字段相关。如果您使用动态文本并取消选中可选字段，您将获得一个充当静态字段的文本字段

**编辑** 这是我的意思的解释：让我们有一个静态文本字段进入黑色 Flash 文档的阶段。

```
var myFieldLabel:StaticText
var i:uint;

//This for check for all staticFields in state and trace its text. It is possible and it is working. I my case I have only one field and I get reference to it in myFieldLabel:StaticText var. Also I change it's alpha to 0.3.
for (i = 0; i < this.numChildren; i++) 
{
 var displayitem:DisplayObject = this.getChildAt(i);
 if (displayitem instanceof StaticText) {
     trace("a static text field is item " + i + " on the display list");
     myFieldLabel = StaticText(displayitem);

     trace("and contains the text: " + myFieldLabel.text);
     trace( myFieldLabel.mouseX);
     myFieldLabel.alpha = 0.3;
 }
}

//Adds event listener to the stage for mouse move event
stage.addEventListener(MouseEvent.MOUSE_MOVE, mouseRollOver);

//This is an event handler. I check if the mouse position is within the static field
function mouseRollOver(evnt:MouseEvent):void 
{
if ( 0 <= myFieldLabel.mouseX && myFieldLabel.mouseX <= myFieldLabel.width && 0 <= myFieldLabel.mouseY && myFieldLabel.mouseY <= myFieldLabel.height )
{
    mouseOverStaticText( evnt)
}
else
{
    mouseNotOverStaticText( evnt)
}
}

// this two methods change the static field alpha. Thay are only to show that is posible to detect and manipulate some properties of the StaticField.
function mouseOverStaticText( evnt)
{
 myFieldLabel.alpha = 1;
}
function mouseNotOverStaticText( evnt)
{
 myFieldLabel.alpha = 0.3;
} 
```

我不确定管理 StaticText 字段的目的是什么。如果您必须做某事，StaticText 不是为了管理而设计的，这几乎可以肯定该字段不能是静态的 - 它们可以是动态的（没有可选择的属性）或者可以用 MovieClip 封装，或者您的解决方案中可以有不同的解决方案案子。

# java - 在android中使用Skydrive api获取文件列表

> ID：15226436
> 
> 赞同：0
> 
> 时间：2013-03-05T14:33:11.230
> 
> 标签：java, android, onedrive

如何在 android 中使用 SKYDRIVE API 从 skydrive 获取文件和文件夹列表？

我想知道 java 代码而不是 REST 服务。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T14:37:57.613

[GitHub 上有一个名为Live SDK for Android](https://github.com/liveservices/LiveSDK-for-Android)的很棒的项目，它可以让你走上正轨。

[示例包](https://github.com/liveservices/LiveSDK-for-Android/tree/master/sample/src/com/microsoft/live/sample)包含有价值的示例，可以让您快速浏览文件和文件夹。

# django - django模型：在保存对象之前检查关系

> ID：15226438
> 
> 赞同：0
> 
> 时间：2013-03-05T14:33:12.527
> 
> 标签：django, django-models, django-admin, django-validation

我有 django 模型由两个类`annualReport`和`annualReportAttachment`

两个模型之间的关系是`oneToMany`。在管理表单中，我需要验证用户是否上传了至少一个文件，因此我在`annualReport`类中使用以下 clean 方法

```
def clean(self):
    attachments = annualReportAttachment.objects.filter(annualReport=self)
    if len(attachments) == 0:
        raise ValidationError("You should upload at least one file") 
```

问题是附加文件尚未保存，因此`attachments`变量为空并且表单总是引发该错误。

如何检查用户是否至少上传了一个文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T14:43:41.180

您需要确保您的内联模型中至少有一个表单被保存。为此，我建议利用[https://code.google.com/p/wadofstuff/wiki/WadOfStuffDjangoForms中的 RequireOneFormSet 类](https://code.google.com/p/wadofstuff/wiki/WadOfStuffDjangoForms)

# json - 猫鼬返回指定为子文档的标签的 json 列表

> ID：15226439
> 
> 赞同：3
> 
> 时间：2013-03-05T14:33:12.920
> 
> 标签：json, node.js, express, mongoose

所以我有这个问题让我在过去的 4 天里一直很忙，我有一个这样的架构和子文档架构：

```
var mongoose = require( 'mongoose' ),
    Schema = mongoose.Schema;

var ProjectSchema = new Schema({
    name: String,
    author: String,
    category: String,
    description: String,
    tags: [TagSchema]
});

var TagSchema = new Schema({
    name: String,
    date: Date
});

mongoose.model( 'TagSchema', TagSchema );
mongoose.model( 'Project', Project ); 
```

我想要的是所有ProjectSchemas的所有标签的列表，无论我尝试什么，我要么得到NONE，要么只是最新项目的标签。我只是不知道更多，因为无论我做什么，我总是以失败告终。我做错了什么，猫鼬没有 findAll 这样的东西吗？

```
app.get('/tags.json', function(req, res) {
    TagSchema.find({}, function ( err, tags ){
        var json = JSON.stringify(tags);
        console.log(json);
    tags = tags.map(function (tag) {
        return tag.toObject();
    });
    console.log(json == JSON.stringify(tags));
    res.json(json);
    });
}); 
```

和

```
app.get('/tags.json', function(req, res) {
    Project.find(function (err, projects) {
        projects.forEach( function( project ){
            res.json(project.tags);
        });
    });
}); 
```

我尝试过的其他任何东西都回来了

```
[ ] 
```

或者出错了...

（另外我想知道，如果我将标签添加到项目中并且它已经存在，我如何确保我可以阻止它添加。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T15:00:52.813

`find`当您应该尝试在模型上调用它时，您正在尝试调用模式。

如果您将文件的底部更改为：

```
var TagModel     = mongoose.model( 'TagModel', TagSchema );
var ProjectModel = mongoose.model( 'ProjectModel', Project ); 
```

然后在你的`app.get`函数调用中：

```
app.get('/tags.json', function(req, res) {
    TagModel.find({}, function ( err, tags ){ //changed this to the model instead of the schema
        var json = JSON.stringify(tags);
        console.log(json);
    tags = tags.map(function (tag) {
        return tag.toObject();
    });
    console.log(json == JSON.stringify(tags));
    res.json(json);
    });
}); 
```

和

```
app.get('/tags.json', function(req, res) {
    ProjectModel.find(function (err, projects) {
        projects.forEach( function( project ){
            res.json(project.tags);
        });
    });
}); 
```

模型是从您的模式定义编译的构造函数，表示可以从数据库中保存和查询的文档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T15:02:15.873

当您`TagSchema`在自己的模型中使用并`ProjectSchema`像您一样嵌入时，重要的是要了解`tags`集合中的文档`tags`和项目文档数组中的文档没有内在联系。`tags`因此，如果您将标签保存为项目的一部分，除非您也明确地将它们添加到该集合中，否则它们不会最终出现在集合中。

您发布的代码中的一些具体问题：

1.  你需要`TagSchema`在使用它之前定义它`ProjectSchema`。
2.  您应该传递`ProjectSchema`给`mongoose.model`呼叫，而不是`Project`.
3.  将架构和模型名称分开，因为不清楚代码中的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T17:05:25.310

在@alawson421 的代码和一些数组魔法的帮助下，它完美地工作，再次感谢@JohnnyHK 向我展示了模式和模型之间的区别。继承人的工作修复：

```
app.get('/tags.json', function(req, res) {
    ProjectModel.find(function (err, projects) {
        var taglist = [];

        projects.forEach( function( project ){
            //console.log(JSON.stringify(project.tags));
            project.tags.forEach( function( tag ){
                console.log(tag);
                taglist.push(tag.name);
            }); 
        });

        res.json(taglist);
    });
}); 
```

输出是：

```
[
    "test",
    "meep",
    "lalela",
    "another test",
    "ihopethisworks",
    "noderocks",
    "i am not a mongo",
    "ice cream rocks"
] 
```

# c - 我在我的程序中找不到任何错误，但它没有提供所需的输出

> ID：15226440
> 
> 赞同：-1
> 
> 时间：2013-03-05T14:33:21.160
> 
> 标签：c, printing, for-loop

```
#include <stdlib.h>
#include <stdio.h>

int main(void)
{

int a[]={1,2,3,4,5};
int b[]={0,0,0,0,0};
int *p;
int i;
p=b;
for( i =0 ; i<5 ; i++)
{
    b[i]=a[i]+1;
    *p=b[i]-1;
    printf(" %i \t %i \t %i \n" ,*p,b[i],a[i]);

}
return 0;
} 
```

我希望输出为：

```
*p   b   a
 1   2   1
 2   3   2
 3   4   3
 4   5   4
 5   6   5 
```

但它显示如下：

```
*p   b   a
 1   1   1
 2   3   2
 3   4   3
 4   5   4
 5   6   5 
```

即使我在每个 a[] 中添加 +1。但对于第一次打印，它显示 1 个输出。为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T14:36:51.820

要指向的`p=b;`集合。因此，虽然增加了，但又减少了。`p``b[0]``b[0]``b[i]=a[i]+1;``*p=b[i]-1;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T14:37:46.017

问题是：

```
int a[]={1,2,3,4,5};
int b[]={0,0,0,0,0};
int *p;
int i;
p=b; // <<---- HERE 
```

你`p`指出 array 的第一个元素`b`，然后在这段代码中：

```
b[i] = a[i]+1;
*p = b[i]-1; 
```

尽管您将值分配给`2`第一个元素，`*p = b[i]-1;`但再次将其重写`1`，这就是输出第一行的原因：

```
1 1 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T14:41:46.500

这将是您的程序的工作版本：

```
#include <stdlib.h>
#include <stdio.h>

int main(void)
{

int a[]={1,2,3,4,5};
int b[]={0,0,0,0,0};
int c[]={0,0,0,0,0}; //another array
int *p;
int i;
p=c; // point p to a new array to write to.
for( i =0 ; i<5 ; i++)
{
    b[i]=a[i]+1;
    *p=(b[i]-1);
    printf(" %i \t %i \t %i \n" ,*p,b[i],a[i]);

}
return 0;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T14:46:12.140

关键是设置 p=b。p 和 b 都是指针，这意味着 *p 和 b[0] 都指向同一个数据。

在循环的第一次迭代中，您首先将一个添加到 b[0]，然后减去一个。对于以下迭代，*p 仍然与 b[0] 相同，但该值取自更高的索引。

# php - PHP DOMDocument 忽略 XSD 架构

> ID：15226458
> 
> 赞同：1
> 
> 时间：2013-03-05T14:34:01.300
> 
> 标签：php, xml, xsd

验证任何 VAST2.0 XML 代码

```
$xsdPath='https://github.com/chrisdinn/vast/blob/master/lib/vast_2.0.1.xsd'
$domdoc= new DOMDocument(); 
$domdoc->loadHTML($xml_input); 
if(!$domdoc->schemaValidate($xsdPath)){/* ... */} 
```

返回无意义的消息，例如`Error 1845: Element 'html': No matching global declaration available for the validation root.`

在我看来，这并没有真正的意义，因为模式 xsd 和庞大的 xml 都不包含或不需要带有 name 的标记或元素。

尝试相同的

```
$reader = new XMLReader();
$reader->XML($xml_input);
$valid = $reader->setSchema($xsdPath);
$reader->read();
$reader->close(); 
```

返回相同的错误代码。

我检查了xsd twiche。[这和https://github.com/chrisdinn/vast/blob/master/lib/vast_2.0.1.xsd](https://github.com/chrisdinn/vast/blob/master/lib/vast_2.0.1.xsd)上的一样。

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T15:44:33.243

当我取消引用您为 XSD 架构文档提供的 URI 时，我没有得到 XSD 架构文档。我得到一个 HTML 文档，它显示了 XSD 模式文档的呈现。对于希望看到 xs:schema 元素来发出您引用的错误消息的验证器来说，这对我来说非常有意义，而它却看到了一个 HTML 元素。

您可以找到实际为验证器所需的 XML 文档提供服务的 URI，也可以制作本地副本并指向该本地副本。但是，期望 PHP 的模式验证能够找到隐藏在该 HTML 中的 XSD 文档的要求超出了您的合理预期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T05:56:26.407

要加载 XML，您应该使用`loadXML()`，而不是`loadHTML()`：

```
$xsdPath = 'https://raw.github.com/chrisdinn/vast/master/lib/vast_2.0.1.xsd';
//                  ^^^
//                  using raw version
$domdoc= new DOMDocument();
$domdoc->loadXML($xml_input);
//           ^^^
//           Not loading HTML here
if (!$domdoc->schemaValidate($xsdPath)) {
    // ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T05:45:38.857

错误很简单：

> 错误 1845：元素“html”：没有可用于验证根的匹配全局声明。

意味着该元素`<html>`未在 XSD 中声明，因此无法使用该 XSD 验证文档。

> 在我看来，这并没有真正的意义，因为模式 xsd 和庞大的 xml 都不包含或需要带有名称的标记或元素。

您正在加载一个 HTML 文档。无论字符串/文件是否包含该 html 元素，DOMDocument*都*包含它，因此验证尝试针对 XSD 对其进行验证，然后由于 XSD 没有任何声明而失败。

# .htaccess - 空 HTACCESS 丢弃网页（403 错误）

> ID：15226462
> 
> 赞同：1
> 
> 时间：2013-03-05T14:34:08.347
> 
> 标签：.htaccess, php, conf.d

我知道那里有一些（可能）相同的问题，但我找不到任何可行的解决方案。

我已将 .htaccess 文件放在服务器上我的 index.php 旁边。即使 .htaccess 为空，站点也会返回错误 403（禁止访问）。

我想做的是删除 .php 扩展名。

```
http://foo.net/web_new/index_1024.php 
```

即使我将以下内容放入 .htaccess 中，该网站仍然返回错误 403。

```
<IfModule mod_rewrite.c>
   Options +FollowSymLinks
   RewriteEngine on 
   RewriteCond %{REQUEST_FILENAME} !-d 
   RewriteCond %{REQUEST_FILENAME}\.php -f 
   RewriteRule ^(.*)$ $1.php
</IfModule> 
```

我在网上找到，要启用 mod_rewrite，我应该在`httpd.conf`. 但是我搜索了整个服务器（ftp），但没有任何线索。

phpinfo() 在哪里找到 conf.d 文件

```
/etc/php5/conf.d 
```

我的根在哪里

```
/srv/www/web6/ 
```

任何想法，我能做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T14:38:23.270

1.  确保`.htaccess`有 644 权限
2.  我认为你可以删除它`ifModule`......我发现它在那里“乱七八糟”......
3.  你的代码看起来不错...

# pdf - 您将如何混合电子和传统/湿/手写签名？

> ID：15226464
> 
> 赞同：0
> 
> 时间：2013-03-05T14:34:09.517
> 
> 标签：pdf, pdf-conversion, electronic-signature

我对您对我建议的解决方案的评论以及您认为在日常实践中也可能行之有效的解决方案感兴趣，即使不是没有法律疑问（有点像传真签名工作：[http ://www.schneier.com /blog/archives/2008/06/fax_signatures_1.html](http://www.schneier.com/blog/archives/2008/06/fax_signatures_1.html)）。

传统上，这个过程是这样的：我们测试设施中的科学家制定了一个研究计划。经过审查过程，他将其一式两份打印在纸上并用笔签名。然后他拿着纸包走到测试设施经理那里，他也用笔在上面签名。然后整个堆栈通过传统邮件发送给研究赞助商，后者签署其中一个计划并将其发送回我们的测试设施（再次通过传统邮件）。

有趣的是，还有另一种变体已经在使用：科学家将研究计划（这是一个 word 文档）转换为 PDF 文件（通过将其打印到 PDF 打印机）。他打印出学习计划的最后一页（“签名”页）。他用钢笔在签名页上签字，然后走到同样用钢笔签字的测试设施经理那里。扫描签名页，然后将学习计划 PDF 的最后一页替换为扫描的签名页（使用 Adob​​e Acrobat）。然后将修改后的 PDF 以电子方式通过电子邮件发送给研究发起人。研究赞助商打印最后一页并用笔签名。然后，他要么通过传统邮件或传真将该页面发送给我们，要么扫描页面并通过电子邮件将其发送给我们（作为图像或将扫描的图像转换为 PDF 后，取决于他的技术技能）。

我目前的实施计划：科学家编写研究计划并将其上传到我们的服务器应用程序（“系统”）。他插入他的智能卡 USB 令牌并单击“签名”。系统将word文档转换为PDF并进行电子签名。测试设施经理收到系统通知，插入他的智能卡 USB 令牌并单击“签名”。系统将他的签名添加到 PDF。然后通过网络将研究计划提供给研究赞助商，后者可以决定旧流程中描述的任何行动（打印和签名，然后邮寄/传真/扫描+电子邮件）。如果他在技术上真的是最新的，他甚至可以选择以电子方式签署 PDF 并通过电子邮件返回。你觉得这个计划怎么样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-02T17:18:12.553

这可能会或现在可能会有所帮助，但 DocuSign 可以为您处理湿签名（通过传真）和标准电子签名的混合。

为了全面披露，我为 DocuSign 工作，但我建议将此作为解决方案而不是销售策略。

# jquery - 无法读取 null 的属性“aoColumns”

> ID：15226465
> 
> 赞同：0
> 
> 时间：2013-03-05T14:34:11.220
> 
> 标签：jquery, jquery-plugins

我正在使用 jquery 数据表，以下是我正在使用的代码

```
function fnFixedColumnsTableTools() {
        var oTable = $(".datatable").dataTable({
                "bJQueryUI": true,
                "bSort": false,
                "aaSorting": [],
                "iDisplayLength": -1,
                "sScrollX": "100%",
                "sScrollXInner": "150%",
                "bScrollCollapse": true,
                "oLanguage": { "sUrl": "Scripts/jquery.dataTables-ES.txt" },
                "sDom": '<"H"Tf>t<"F"i>',
                "oTableTools": {
                    "sRowSelect": "multi",
                    "sSwfPath": "Scripts/copy_csv_xls_pdf.swf",
                    "aButtons": [{ "sExtends": "copy", "bSelectedOnly": "true" }, "xls", "csv", "pdf"]
                }
        });
        new FixedColumns( oTable, {
            "iLeftColumns": 3,
            "iLeftWidth": 350
        } ); 
```

这是我在数据表中使用的表。该表是动态的，并在侧服务器中创建列号

```
<asp:GridView ID="gvReport" runat="server" AutoGenerateColumns="True" EnableViewState="False" CssClass="display dataTable" >
            <Columns>
                <asp:TemplateField HeaderText="No.">
                    <ItemTemplate><%#Container.DataItemIndex + 1%></ItemTemplate>
                </asp:TemplateField>
            </Columns>
        </asp:GridView> 
```

# c# - C#/WP7 Json.net 解析到列表

> ID：15226469
> 
> 赞同：0
> 
> 时间：2013-03-05T14:34:24.043
> 
> 标签：c#, json, windows-phone-7

我在解析 JSON 以在 C# 中列出时遇到问题。我正在使用 Json.net 来解析 json。我的问题是我收到错误“将值“高”转换为类型时出错”。请帮我。

我的json：

```
{"sold":{"high":40.64625,"low":35.02,"avg":37.929384985,"buy":40.28,"sell":40.3}} 
```

我的代码：

```
public class sold
{
    public string high { get; set; }
    public string low { get; set; }
    public string avg { get; set; }
    public string buy { get; set; }
    public string sell { get; set; }

}

   void webClient_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
    {
        JObject something = JObject.Parse(e.Result);
        IList<JToken> results = something["sold"].Children().ToList();
        IList<sold> searchResults = new List<sold>();
        foreach (JToken result in results)
            {
sold searchResult = JsonConvert.DeserializeObject<sold>(result.ToString());
searchResults.Add(searchResult);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T14:35:54.180

属性 high 是 double 类型，你可以尝试使用你的类的这个实现来**出售**

```
public class sold
{
public double high { get; set; }
public double low { get; set; }
public double avg { get; set; }
public double buy { get; set; }
public double sell { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T08:22:31.110

尝试为已售商品数组添加一个包装类，并在一次调用中反序列化整个数组。我没有用 json.net 试过这个，但它适用于 DataContractJsonSerializer。

```
public class SoldItemList
{
     public SoldItem[] sold { get;set; }
}
public class SoldItem
{
    public double high { get; set; }
    public double low { get; set; }
    public double avg { get; set; }
    public double buy { get; set; }
    public double sell { get; set; }
} 
```

# html - Html.DropDownListFor 中的渲染错误

> ID：15226471
> 
> 赞同：1
> 
> 时间：2013-03-05T14:34:29.723
> 
> 标签：html, asp.net-mvc-4, razor-2

我的 MVC4 项目中出现了一种异常错误。在尝试使用 W3C 标记验证器验证每一页时，我发现一个页面中的一个选择是无效的，原因很明显（错过了`<`西撒哈拉的起点）

```
<select id="PER_Citizenship" name="PER_Citizenship">
    <option value="">Please select</option>
    <!-- more options -->
    <option value="we">West Bank</option>
    option value="eh">Western Sahara</option>
    <option value="ye">Yemen</option>
    <!-- more options -->
</select> 
```

这很有趣，因为该`Html.DropDownListFor`方法正在构建选择。此外，我使用相同的对象作为参数来填充同一页面中另外 5 个选择的列表，并且它们都正确呈现。

```
@Html.DropDownListFor(model => model.PER_Citizenship, (SelectList)ViewBag.Countries) 
```

这不是页面中第一次或最后一次`ViewBag.Countries`使用，所以我不知道为什么会发生这种情况。

有没有人遇到过这个问题？你有没有想出一些解决方案？

非常感谢！

# jquery - 降线 Jquery 菜单

> ID：15226472
> 
> 赞同：0
> 
> 时间：2013-03-05T14:34:30.330
> 
> 标签：jquery, css, html

认为我在正确的轨道上，但是`subLink`当鼠标离开子链接菜单项并将鼠标悬停在非子链接上时需要关闭栏，`subLink`但如果其子链接到子链接则不关闭（希望这是有道理的）。

`subLink`例如，如果鼠标从子链接悬停状态悬停（例如），即 Home 或 Contact 将不会打开该栏并将其关闭。

我知道目前mouseleave是整体的`#main-nav`，但我被困在如何去做这件事上，可能真的很简单，但是嘿必须从某个地方开始吧？只是为了让大家知道我从[tutplus](http://net.tutsplus.com/tutorials/javascript-ajax/a-different-top-navigation/)采购了这个菜单，并试图重新创建我自己的菜单，谢谢。

请在下面查看我当前的代码：

**CSS：**

```
html, body {
    background: #2d2620;
    text-align: center;
    margin: 0px;
    height: 100%;
    width: 100%;
}
#wrap {
    margin-left: auto;
    margin-right: auto;
    width: 900px;
    position: relative;
    background: url(body.png) center no-repeat;
    min-height: 600px;
}
#body-image {
    margin-top: 60px;
}
#main-nav {
    margin: 0px 0px 0px 2px;
    text-align: left;
    min-height: 25px;
    padding-top: 10px;
    padding-left: 0px;
}
#main-handle {
    width: 605px;
    float: right;
    margin-top: -1px;
}
#main-nav li {
    display: inline;
    list-style: none;
}
#main-nav li a {
    margin-right: 5px;
    font-size: 15px;
    text-decoration: none;
    color: #f2f2f2;
    font-family: Arial, Helvetica, sans-serif;
    text-transform: uppercase;
    font-weight: bold;
    padding: 10px;
    outline: 0;
    position: relative;
    top: -2px;
}
#main-nav li a:hover, #main-nav li a.active {
    background: #514539;
}
#sub-link-bar {
    background: #514539;
    min-height: 1px;
    border-bottom: #645546 1px solid;
}
.sub-links {
    display: none;
    position: absolute;
    width: 100%;
    text-align: left;
    left: 0px;
}
#main-nav li .sub-links li a:hover{
    background: #2d2620;
}
#main-nav li a.close{
    display: none;  
    position: absolute;
}
#main-nav li a.close:hover{
    background: #900;
}
.round {
    display:block
}
.round * {
    display:block;
    height:1px;
    overflow:hidden;
    font-size:.01em;
    background:#645546
}
.round1 {
    margin-left:3px;
    margin-right:3px;
    padding-left:1px;
    padding-right:1px;
    border-left:1px solid #443a30;
    border-right:1px solid #443a30;
    background:#56493c
}
.round2 {
    margin-left:1px;
    margin-right:1px;
    padding-right:1px;
    padding-left:1px;
    border-left:1px solid #322a23;
    border-right:1px solid #322a23;
    background:#594c3e
}
.round3 {
    margin-left:1px;
    margin-right:1px;
    border-left:1px solid #594c3e;
    border-right:1px solid #594c3e;
}
.round4 {
    border-left:1px solid #443a30;
    border-right:1px solid #443a30
}
.round5 {
    border-left:1px solid #56493c;
    border-right:1px solid #56493c
}
.roundfg {
    background:#645546
} 
```

**JavaScript：**使用 jQuery 1.3.2 库。

```
$(document).ready(function(){
    $("#main-nav li a.main-link").hover(function(){
        $("#main-nav li a.main-link").removeClass("active");
        $(this).addClass("active");
        $("#sub-link-bar").animate({
            height: "40px"                     
        });
        $(".sub-links").hide();
        $(this).siblings(".sub-links").fadeIn();
    });
    $("#main-nav").mouseleave(function(){
        $("#main-nav li a.main-link").removeClass("active");
        $(".sub-links").fadeOut();
        $("#sub-link-bar").animate({
            height: "1px" 
        });     
    });
}); 
```

**HTML：**

```
</head>
 <body>
   <ul id="main-nav">
    <li><a class="main-link active" href="">Home</a></li>
    <li><a class="main-link subLink" href="">Tutorials</a>
      <ul class="sub-links" style="display: none;">
        <li><a href="" title="">Design</a> </li>
        <li><a href="" title="">HTML &amp; CSS</a> </li>
        <li><a href="" title="">Other</a> </li>
        <li><a href="" title="">PHP</a> </li>
        <li><a href="" title="">Ruby</a> </li>
        <li><a href="" title="">Site Builds</a> </li>
        <li><a href="" title="">Tools &amp; Tips</a> </li>
        <li class="cat-item cat-item-35"><a href="" title="">Wordpress</a> </li>
      </ul>
    </li>
    <li><a class="main-link subLink" href="">Articles</a>
      <ul class="sub-links" style="display: none;">
        <li><a href="" title="">General</a> </li>
        <li><a href="" title="">Interviews</a> </li>
        <li><a href="" title="">News</a> </li>
        <li><a href="" title="">Web Roundups</a> </li>
      </ul>
    </li>
    <li><a class="main-link subLink" href="">Freebies</a>
      <ul class="sub-links" style="display: none;">
        <li><a href="" title="">Books</a> </li>
        <li><a href="" title="">Icons</a> </li>
        <li><a href="" title="">Lightboxes</a> </li>
        <li><a href="" title="">Others</a> </li>
        <li><a href="" title="">Plugins</a> </li>
        <li><a href="" title="">Themes</a> </li>
        <li><a href="" title="">Tooltips</a> </li>
      </ul>
    </li>
    <li><a class="main-link subLink" href="">Videos</a>
        <ul class="sub-links" style="display: none;">
            <li><a href="" title="">Screencasts</a></li>
        </ul>
    </li>
    <li><a class="main-link" href="">Contact</a></li>
  </ul>
</div>
<div id="sub-link-bar"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T16:21:29.363

**更新：**

[JSF](http://jsfiddle.net/hUDgJ/4/)中。

这是新的JS：

```
$(document).ready(function(){
    $('#main-nav > li').hover(function(){
        //Checks if it's already active, if so, does nothing.
        if(!$(this).find('.main-link').hasClass('active')){
            $("#main-nav > li a.active").removeClass("active");
            $(this).find('.main-link').addClass("active");
            //checks if there's a subnav, then opens it
            //otherwise it closes the #sub-link-bar
            if($(this).find('li').length){
                //$("#main-nav li a.close").stop().fadeIn();
                //There is no .close
                var that = this;
                $("#sub-link-bar").stop().animate({ height: "40px"}, function(){
                    $(that).find(".sub-links").fadeIn();
                });
            }
            else {
                 $(this).find(".sub-links").stop().fadeOut( function(){
                    $(this).css('opacity','1');
                    $("#sub-link-bar").stop().animate({height: "1px"});
                 });
            }
        }
    }, function(){
        //Checks if it has a subnav, if so, hides the text first, then the bar
        //if not, just closes the bar
        if($(this).find('li').length){
            $(this).css('opacity','1');
            $("#sub-link-bar").stop().animate({height: "1px"});
        }
        $("#sub-link-bar").stop().animate({height: "1px"});   
       $(this).find('.main-link').removeClass('active');
    });
}); 
```

也添加`top:49px`到您的`.sub-links`CSS 中。

# java - 组合框无法正常工作

> ID：15226473
> 
> 赞同：-1
> 
> 时间：2013-03-05T14:34:30.470
> 
> 标签：java, swing, jcombobox, listeners

我这里有一个简单的订购系统，需要用户输入收银员姓名、客户姓名和密码。用户完成该过程后，它将显示一个包含不同餐点的组合框。

我想要发生的是，一旦我点击了一顿饭，它应该显示我选择的饭菜的名称，并且应该执行我在 actionlistener 中声明的动作。

该程序编译得很好，但我想要发生的逻辑不起作用，我正在尽力解决这个问题，但我想我自己无法做到这一点，请帮助我，谢谢！

```
 import java.util.Scanner;
    import javax.swing.*;
    import java.awt.*;
    import java.awt.event.*;

public class SubokUlit {
    private JComboBox combo;
    private String a  = "";
    private static int answer;
    private static int total = 0;
    private static int total1 = 0;
    private static int wew = 0;
    private static String order1 = "";
    private static String order2 = "";
    private static Scanner inp = new Scanner(System.in);

 public SubokUlit(){
    String mgaPagkainTo[] = {"PM1 (Paa/ Spicy Paa with Thigh part)","PM2 (Pecho)"};    
    JFrame frame = new JFrame("Mang Inasal Ordering System");
    JPanel panel = new JPanel();
    combo = new JComboBox(mgaPagkainTo);
    combo.setBackground(Color.gray);
    combo.setForeground(Color.red);
    panel.add(combo);
    frame.add(panel);
        combo.addActionListener(new ActionListener(){ // The logic in here does not work
    public void actionPerformed(ActionEvent e){
        String str = (String)combo.getSelectedItem();
        a = str;
        if(a.equals("PM1 (Paa/ Spicy Paa with Thigh part)")){ // If I select PM1 in the combo box it should do the following. But it doesn't work
                 System.out.print ("\n\n\n\t\tYou have chosen Paborito Meal 1.\n");
                    System.out.print ("\t\t\tPlease enter the quantity: ");
                    int quantity1 = inp.nextInt();
                    total = quantity1 * 99;
                    order1 = quantity1 +  " " + "PM1 " + "                                   " + total +"\n";
        }
        else if(a.equals("PM2 (Pecho)")){ // The same thing should alaso happen here in PM2
            System.out.print ("\n\n\n\t\tYou have chosen Paborito Meal 2.\n");
                System.out.print ("\t\t\tPlease enter the quantity: ");
                int quantity2 = inp.nextInt();
                total1 = quantity2 * 99;
                order2 = quantity2 +  " " + "PM2 " + "                                   " + total1 +"\n"; 
        }
    } 
    });

        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(300,100);
        frame.setVisible(true);
}

public static void main(String[]args) {
      Scanner inp = new Scanner(System.in); 
      String userNamePoe  = "";
      String customerNamePoe  = "";
      String sanKaKain  = "";
      boolean ulitinMoPows = true;
      boolean tryAgain = true;

        System.out.print("\nInput Customer Name: ");
        String customerName = inp.nextLine();
        customerNamePoe = customerName;
        System.out.print("\nInput Cashier Name: ");
        String user = inp.nextLine();
        userNamePoe = user;
     do{
        System.out.print("\nInput either Dine In or Take Out: ");
        String dInDOut = inp.nextLine();
        sanKaKain = dInDOut;
            if (sanKaKain.equals("Dine In") || sanKaKain.equals("Take Out")){
             System.out.print("");
             ulitinMoPows = false;
             }
            else{
             JOptionPane.showMessageDialog(null, "Try again! Please input Dine In or Take Out only!","Error", JOptionPane.ERROR_MESSAGE);
                 ulitinMoPows = true;
                 System.out.print ("\f");
                }
     }while(ulitinMoPows);
     do{
        System.out.print("\nInput password: ");
        String pass = inp.nextLine();
        if(pass.equals("admin")){
            System.out.print("");
            tryAgain = false;
        }
        if(!pass.equals("admin")){
            JOptionPane.showMessageDialog(null, "Try again! Invalid password!","Error Logging-In", JOptionPane.ERROR_MESSAGE);
        tryAgain = true;
         System.out.print ("\f");
        }
}while(tryAgain);

        System.out.print("\n\n\t\tCashier: " +userNamePoe);
        System.out.print("                          "+sanKaKain);
        System.out.print("\n\t\tCustomer Name: " +customerNamePoe);

        SubokUlit j = new SubokUlit(); //Supposedly, once the selecting of meal is done, it should now go to the next part wherein the total bill will display and asks the user how much is his cash.

    int lahatNgOrderMo = total + total1; 
    double multiplierVat = 0.12;
    double vatCollected = lahatNgOrderMo * multiplierVat;
        System.out.print("\n\n\tYour total bill is: "+lahatNgOrderMo); // Displays the bill
        System.out.print("\n\tCash Tendered: "); // Asks the user how much is his cash
    double cashTendered = inp.nextInt();
    double sukliMo = cashTendered - lahatNgOrderMo;

        System.out.print("\n\n\t\t                         MANG INASAL");
        System.out.print("\n\t\t                     BLUMENTRITT BRANCH");
        System.out.print("\n\t\t         #1631-1633 BLUMENTRITT ST.,");
        System.out.print("\n\t\t            STA CRUZ. MANILA 0000");
        System.out.print("\n\t\t               (932) 885-5844\n");
        System.out.print("\n\t\t            Operated by: R L YU");
        System.out.print("\n\t\t            TIN 202-161-017-000 VAT");
        System.out.print("\n\t\t        ACC. NO.: 050-204079836-000019");
        System.out.print("\n\t\t             Tel. #: (02)493-6801");
        System.out.print("\n\n\t\tCashier: " +userNamePoe);
        System.out.print("\t\t   STATION: 2");
        System.out.print("\n\t\t---------------------------------------------");
        System.out.print("\n\t\tO.R #: 84486");
        System.out.print("                          "+sanKaKain);
        System.out.print("\t\t\n                Customer Name: " +customerNamePoe);
        System.out.print("                        24");
        System.out.print("\n\t\t---------------------------------------------");
        System.out.print("\n\t\t                 >>SETTLED<<\n\n");
        System.out.print(""+order1);
        System.out.print(""+order2);
        System.out.print("\n\n\t\tSUB TOTAL:                              "+lahatNgOrderMo);
        System.out.print("\n\t\tDELIVERY VAT:                            0.00");
        System.out.print("\n\t\t                                       ======");
        System.out.print("\n\t\tAMOUNT DUE:                              "+lahatNgOrderMo);
        System.out.print("\n\n\t\tVAT 12% COLLECTED                    "+vatCollected);
        System.out.print("\n\n\t\tCASH Tendered:                         "+cashTendered);
        System.out.print("\n\t\t                                       ======");
        System.out.print("\n\t\tCHANGE:                                 "+sukliMo);
        System.out.print("\n\t\t              >>Ticket #: 62<<");
        System.out.print("\n\t\t      Created: ");
        System.out.print("\n\t\t      SETTLED: ");
        System.out.print("\n\n\t\t*********************************************");
        System.out.print("\n\t\tTHIS SERVES AS AN OFFICIAL RECEIPT.");
        System.out.print("\n\n\t\tFor Feedback: TEXT MIO467(Comments/ Suggest");
        System.out.print("\n\t\tions)  and  SEND  to  0917-5941111 or CALL US");
        System.out.print("\n\t\tat 0917-5596258");
        System.out.print("\n\t\tEmail: feedback@manginasal.com");
        System.out.print("\n\n\t\t     THANK YOU FOR DINING WITH US!");
        System.out.print("\n\n\t\t*********************************************");
        System.out.print("\n\t\tS/N: 120416ASL03/1105-6105-9230");
        System.out.print("\n\t\tDT S/N: 41-L6971 (P0S1)");
        System.out.print("\n\t\tPERMIT NO: 0412-031-125295-000");
        System.out.print("\n\t\tMIN: 120276752");

} 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:44:41.347

您必须确保将事件监听器附加到您的 JComboBox，以便应用程序知道发生某事时该做什么。

在这种情况下，您要附加一个[`ItemListener()`](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/event/ItemListener.html).

你可以使用这样的东西：

```
combo.addItemListener(new ItemListener() {

    @Override
    public void itemStateChanged(ItemEvent e) {
        System.out.println("Meal chosen: " + combo.getSelectedItem().toString());
        String optionalParameter = combo.getSelectedItem().toString();
        DoMethodWhatYouNeedToDoWhenYouSelectedSomething(optionalParameter);
    }
}); 
```

编辑：您的代码应该是这样的：

```
combo.addActionListener(new ItemListener(){ 

    @Override
    public void itemStateChanged(ItemEvent e){
        String str = (String)combo.getSelectedItem();
        a = str;
        if(a.equals("PM1 (Paa/ Spicy Paa with Thigh part)")){ 
             System.out.print ("\n\n\n\t\tYou have chosen Paborito Meal 1.\n");
             System.out.print ("\t\t\tPlease enter the quantity: ");
             int quantity1 = inp.nextInt();
             total = quantity1 * 99;
             order1 = quantity1 +  " " + "PM1 " + "                                   " + total +"\n";
        }
        else if(a.equals("PM2 (Pecho)")){ 
            System.out.print ("\n\n\n\t\tYou have chosen Paborito Meal 2.\n");
            System.out.print ("\t\t\tPlease enter the quantity: ");
            int quantity2 = inp.nextInt();
            total1 = quantity2 * 99;
            order2 = quantity2 +  " " + "PM2 " + "                                   " + total1 +"\n"; 
        }
    } 
}); 
```

# c# - 解决方案不会在用户未处理的异常中中断

> ID：15226479
> 
> 赞同：0
> 
> 时间：2013-03-05T14:35:07.470
> 
> 标签：c#, winforms, exception, exception-handling, objectdisposedexception

我正在处理一个工作项，它给出了一个例外

```
System.ObjectDisposedException:
Cannot access a disposed object.
Object name: 'TabControlWorkSpace'. 
```

在`Debug->Exceptions`窗口中，我检查了所有选项（在用户未处理下），期望该解决方案在发生异常时会中断。过去它对我很有用，并帮助我直接跳到根本原因。但是这一次，发生了错误，我得到了异常窗口（带有发送和不发送按钮），但我的解决方案没有因异常而中断。我可以知道任何解决方法或我缺少的东西。如果我需要提供更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T15:18:29.580

转到`TOOLS`-> `Options`-> `Debugging`-> 取消选中“仅启用我的代码”

转到`DEBUG`-> `Exceptions...`-> 选中所有框

单击`OK`按钮。

这将打破发生的任何异常。

# mysql - MySql 查询：有时会得到一个空的结果集

> ID：15226480
> 
> 赞同：0
> 
> 时间：2013-03-05T14:35:10.453
> 
> 标签：mysql

我有这个查询：

```
SELECT  CONCAT(f.name, ' ', f.parent_names) AS FullName, 
        stts.name AS 'Status', 
        u.name AS Unit, 
        city.name AS City, 
        hus.mobile1 AS HusbandPhone, 
        wife.mobile1 AS WifePhone, 
        f.phone AS HomePhone, 
        f.contact_initiation_date AS InitDate, 
        fh.created_at AS StatusChangeDate, 
        cmt.created_at AS CommentDate, 
        cmt.comment AS LastComment, 
        f.reconnection_date AS ReconnectionDate,
        (
            SELECT  GROUP_CONCAT(t.name) 
            FROM    taggings tgs JOIN tags t 
                    ON tgs.tag_id = t.id
            WHERE   tgs.taggable_type = 'family' AND 
                    tgs.taggable_id = f.id
        ) AS HandlingStatus
FROM    families f 
        JOIN categories stts ON f.family_status_cat_id = stts.id
        JOIN units u ON f.unit_id = u.id
        JOIN categories city ON f.main_city_cat_id = city.id
        JOIN contacts hus ON f.husband_id = hus.id
        JOIN contacts wife ON f.wife_id = wife.id
        JOIN comments cmt ON f.id = cmt.commentable_id AND 
                    cmt.created_at = (SELECT MAX(created_at) FROM comments WHERE commentable_id = f.id)
        JOIN family_histories fh ON f.id = fh.family_id AND 
                    fh.created_at = (SELECT MAX(created_at) FROM family_histories WHERE family_id = f.id AND family_history_cat_id = 1422) AND 
                fh.family_history_cat_id = 1422
WHERE   f.id = 12212 
```

问题在于第二个 SELECT（列 -HandlingStatus）。我不明白，但是当列有结果时（作为独立查询测试） - 我得到一个空结果集，当没有结果时 - 我得到一个结果。为什么？

# php - 我应该将 Monolog 自定义处理程序放在 Symfony2 项目中的什么位置？

> ID：15226481
> 
> 赞同：0
> 
> 时间：2013-03-05T14:35:11.700
> 
> 标签：php, symfony, handler, composer-php, monolog

我创建了一个从`AbstractProcessingHandler`. 我已经看到我可以把它放进去`src/MyNamespace/MyBundle/Monolog/`，但它让我有点担心，因为这个处理程序用于我记录数据的其他几个包中。所以其他包需要 MyBundle 才能正常工作，只是因为这个处理程序。

我试图将我的处理程序类放入，`lib/`但它似乎不起作用（也许我必须对 Autoload 做一些特别的事情？）。

或者我应该专门为这个处理程序创建一个新包？

编辑：我不能真正放置我的自定义处理程序类，`vendor/monolog/monolog/src/Monolog/Handler`因为那样我就无法将它添加到我的 git 存储库：存在冲突，因为此文件夹由另一个 git 存储库（由 Composer 创建）管理

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T15:07:04.010

在 Monolog 的结尾，对于放置它的位置或如何称呼它实际上没有任何限制。关键只是它实现了独白的 HandlerInterface 或从现有的处理程序之一扩展。

现在这取决于您的处理程序是什么，如果它是其他人可以使用的通用东西，您可以将其作为拉取请求提交给 monolog。
如果没有，您可以为它创建一个自己的作曲家包，或者将其放入`src/Acme/Monolog/FooHandler`或类似的东西中，因此它保留在您的应用程序中，但显然不在捆绑包中。缺点是您需要在其中一个捆绑包中将其配置为服务，因此您仍然对那里的捆绑包有某种依赖性。
也许将它作为自己的捆绑包是有意义的。但是对于一个类来说，它是相当多的样板。
如果您的所有捆绑包都是特定于应用程序的并且不太可能从中提取出来，那么尽管 IMO 具有跨捆绑包依赖关系是可以的。
无论如何，依赖性不是很强，因为一个包可以包含处理程序并对其进行配置。其他包仍然可以记录到独白，即使处理程序不存在，它们也可以记录。它只是不会去那个特定的处理程序。什么都不应该打破。

如您所见，这只是很多权衡，如果不了解您的项目，很难说哪种解决方案最合适。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T14:49:12.860

如果你想拥有你的处理程序类，`lib/`你需要将`lib/`文件夹添加到你的`composer.json` 自动加载部分。例如：

```
"autoload": {
    "psr-0": { "": ["src/", "lib/"] }
} 
```

查看 Composer 文档：

[基本用法](http://getcomposer.org/doc/01-basic-usage.md#autoloading)

[自动加载](http://getcomposer.org/doc/04-schema.md#autoload)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-19T03:53:28.493

我认为这里的常用方法是在您的 Bundle 中使用具有明确依赖关系的“Bridge”目录。如果您有其他依赖于此的捆绑包，我们所做的是创建一个 ServiceBundle，它基本上适用于应用程序内所有捆绑包中的所有共享服务。如果您有分发此捆绑包的计划，这可能不适合您，但可能不适合您。

# javascript - 如何使用 Raphael JS 在悬停时将路径卷曲成螺旋状

> ID：15226484
> 
> 赞同：2
> 
> 时间：2013-03-05T14:35:17.880
> 
> 标签：javascript, animation, svg, raphael

我有一组 Raphael 路径，我想在单独的路径悬停时对其进行动画处理。

客户发送了我已转换为 Raphael 代码的 SVG 插图。这只是较大图像的一小部分。

我正在尝试做的事情如下：

[起始画布](https://i.stack.imgur.com/Jd78D.png)

从一行中的一组路径对象开始。当您将鼠标悬停在红色路径上时，它们会以螺旋形动画，直到它们形成

[结束画布](https://i.stack.imgur.com/6EpVP.png)

我做了一些研究，我认为我将不得不沿着一条隐藏的路径为每个圆圈设置动画，该路径描绘了他们必须移动以达到最终螺旋形状的弧线（[沿路径动画](https://stackoverflow.com/questions/1032541/how-to-animate-a-raphael-object-along-a-path)），但我'我不确定这是否是创建此动画的最有效方式。

最重要的是，我不确定如何计算圆圈将遵循的隐藏路径的角度和大小。制作此动画的最佳方式是什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-19T00:34:17.237

自从被问到已经一年多了，但也许它可能对其他人有所帮助。

使用高中时的简单代数思想，您可以定义两个函数：线性和螺旋。

```
function linear(i){
    x = i*15;
    y = x;
    return {cx:x+offset,cy:y+offset};
}

function spiral(i){
    r = 50 - i*5;
    x = r*Math.cos(i);
    y = r*Math.sin(i);
    return {cx:x+offset,cy:y+offset};
} 
```

这只是一个 5 分钟的摆弄，所以它可能看起来很便宜。当然，您可以使用定义更好的算法`transform`函数定义更好的算法。

[jsfiddle在这里](http://jsfiddle.net/meanyack/Qt6yF/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T09:41:25.553

我认为沿着隐藏路径移动每个圆圈是最简单的方法。

我建议在 InkScape 矢量编辑器中创建一个新的 SVG 文件，在开始和结束位置绘制圆圈，然后用弧线连接它们。保存文件。然后在任何文本编辑器中打开文件并将所有数据复制到您的 JS 代码中（复制路径的“d”参数和圆的坐标）。

# android - android:layout_alignParentBottom = "true" 使用键盘

> ID：15226493
> 
> 赞同：16
> 
> 时间：2013-03-05T14:35:35.153
> 
> 标签：android

我在屏幕底部有一个按钮栏（它的父级是整个屏幕的RelativeLayout）（在android：layout_alignParentBottom =“true”的帮助下）

问题是，当显示键盘时，该条出现在键盘正上方，从而减小了显示器其余部分的尺寸。

即使显示键盘，您对如何强制按钮栏保持在屏幕底部有任何想法吗？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-03-05T14:41:49.827

在`AndroidManifest.xml`中，设置`android:windowSoftInputMode="adjustPan"`为您的活动。有关更多详细信息，请参阅[文档](http://developer.android.com/guide/topics/manifest/activity-element.html)。

# asp.net-mvc - 程序集绑定重定向不起作用

> ID：15226494
> 
> 赞同：13
> 
> 时间：2013-03-05T14:35:41.447
> 
> 标签：asp.net-mvc, redirect, binding, azure, .net-assembly

我正在尝试在 Azure 上部署一个测试 Web 应用程序，但是当我在本地计算机上运行 Azure 模拟器时，我从附加到我的 WebRole 的 Azure 模拟器控制台收到此错误：

```
System.TypeLoadException: Unable to load the role entry point due to the following     exceptions:
-- System.IO.FileLoadException: Could not load file or assembly 'System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of its dependencies. The located assembly's manifest definition does not match the assembly reference. (Exception from HRESULT: 0x80131040)
File name: 'System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35'

=== Pre-bind state information ===
LOG: User = COLLAB\mirko.lugano
LOG: DisplayName = System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35
(Fully-specified)
LOG: Appbase = file:///C:/Code/Application/<MyWebProject>.Azure/csx/Debug/roles/<MyWebProject>/approot/bin
LOG: Initial PrivatePath = C:\Code\Application\<MyWebProject>.Azure\csx\Debug\roles\<MyWebProject>\approot\bin
Calling assembly : ActionMailer.Net.Mvc, Version=0.7.4.0, Culture=neutral, PublicKeyToken=e62db3114c02a1c2.
===
LOG: This bind starts in default load context.
LOG: Using application configuration file: C:\Code\Application\<MyWebProject>.Azure\csx\Debug\roles\<MyWebProject>\base\x64\WaIISHost.exe.Config
LOG: Using host configuration file: 
LOG: Using machine configuration file from C:\Windows\Microsoft.NET\Framework64\v4.0.30319\config\machine.config.
LOG: Post-policy reference: System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35
LOG: Attempting download of new URL file:///C:/Code/Application/<MyWebProject>.Azure/csx/Debug/roles/<MyWebProject>/approot/bin/System.Web.Mvc.DLL.
WRN: Comparing the assembly name resulted in the mismatch: Major Version
ERR: Failed to complete setup of assembly (hr = 0x80131040). Probing terminated.

---> System.Reflection.ReflectionTypeLoadException: Unable to load one or more of the requested types. Retrieve the LoaderExceptions property for more information.
  at System.Reflection.RuntimeModule.GetTypes(RuntimeModule module)
  at System.Reflection.RuntimeModule.GetTypes()
  at System.Reflection.Assembly.GetTypes()
  at Microsoft.WindowsAzure.ServiceRuntime.RoleEnvironment.GetRoleEntryPoint(Assembly entryPointAssembly)
  --- End of inner exception stack trace ---
  at Microsoft.WindowsAzure.ServiceRuntime.RoleEnvironment.GetRoleEntryPoint(Assembly entryPointAssembly)
  at Microsoft.WindowsAzure.ServiceRuntime.RoleEnvironment.CreateRoleEntryPoint(RoleType roleTypeEnum)
  at Microsoft.WindowsAzure.ServiceRuntime.RoleEnvironment.InitializeRoleInternal(RoleType roleTypeEnum)
[fabric] Role state Unknown 
```

只要我在本地机器上安装了 MVC3（MVC3 程序集在 GAC 中），一切都运行良好，但是由于我删除了 MVC3（Azure 没有安装 MVC），我收到了这个错误。我的网络应用程序经常包含 MVC4，并且运行良好。然后我考虑了程序集绑定重定向，我注意到在我的 web.config 文件中我已经有了：

```
 <runtime>    
  <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">      
    ...
    <dependentAssembly>        
      <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" culture="neutral" />
      <bindingRedirect oldVersion="0.0.0.0-4.0.0.0" newVersion="4.0.0.0" />
    </dependentAssembly>
    ...
  </assemblyBinding>
</runtime> 
```

根据我在互联网上阅读的文档，这应该已经是正确的。我也尝试将我的（*版本 4.0.0.0*）的**SpecificVersion**属性设置为**false**但无济于事。我错过了什么吗？调用程序集不应该自动重定向到正确版本的 MVC 程序集吗？任何想法都非常感谢。谢谢。`System.Web.Mvc.dll`***`ActionMailer.Net.Mvc`***

 **** * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-05T15:43:30.183

在 Azure WebRoles 中，默认情况下（在完全 IIS 模式下）RoleEntryPoint 与 WebRole 的其余部分隔离开来，并在不同的进程中运行。

这样做的副作用是您的 RoleEntryPoint 将无法访问您的**web.config**。

*   Azure SDK 1.3 -1.7 将在**WaIISHost.exe.config中查找**

*   Azure SDK 1.8+ 将查看**WebRoleProjectName.dll.config**。

通过对 SDK 的最新更改，您应该能够将*app.config*放置在您的项目中，然后您的角色入口点应该可以访问它。

[您可以在此 Microsoft博客文章](http://blogs.msdn.com/b/windowsazure/archive/2010/12/02/new-full-iis-capabilities-differences-from-hosted-web-core.aspx)或此[Stackoverflow 文章](https://stackoverflow.com/a/12911703/1016885)中阅读有关此内容的更多信息

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-05T16:41:00.587

谢谢符文的宝贵提示。这并没有解决我的问题，但它为我指明了正确的方向，因为我拥有最新版本的 Azure SDK (1.8)，而这个 WaIISHost.exe.config 技巧不再适用于最新版本的 Azure。[这里](http://blog.fullscale180.com/post/2012/11/08/WaIISHostexeconfig-in-Web-Roles-does-not-work-in-Windows-Azure-SDK-18)说明了我刚才所说的以及对我有用的解决方案，即将 WaIISHost.exe.config 文件重命名为 MyWebAppName.dll.config（将其放置在您的 web 应用程序中的 web.config 文件的同一级别，并且将其复制到输出目录属性设置为“始终复制”。当然，此配置文件包含我上面描述的绑定重定向部分。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-02T00:10:15.713

到今天为止，使用最新的 SDK 会自动为您生成一个 WebRoleProjectName.dll.config，其中包含 Web.config 的内容并复制到输出目录。

但是，这不会自动包含在部署包中！为此，您必须采用一种骇人听闻的解决方案：通过选择“显示所有文件”将生成的文件包含在项目中，然后仅包含此文件。csproj 中的结果更改应如下所示（不是，不要将其选择为“始终复制”！）：

```
<Content Include="bin\WebRoleProjectName.dll.config" /> 
```***

# jquery - 相对 div 根据内容调整到绝对定位的 div 高度

> ID：15226499
> 
> 赞同：4
> 
> 时间：2013-03-05T14:35:55.803
> 
> 标签：jquery, css

我在相对定位的 div 中有一个绝对定位的 div。

我需要将父级相对 div 重新调整为绝对 div 的大小（这是动态变化，取决于它所在的页面）

我已经读过这可以使用 jquery 来完成，但我无法让它工作。

这是我所拥有的...

html

```
 <div class="product-view">
<div style="float:left;">Product Image</div>
 <div class="product-shop">
<div id="mm_grid_wrapper">
<table>dynamic content</table>
</div> 
```

CSS...

```
 .product-view {
    margin-top: 5px;
    border: 1px solid #cecece;
    padding: 22px 0 0 0;
    position: relative;
    bottom:0px;

}
.product-view .product-shop {
    text-align: left;
    width: 48%;
    float: left;/*max-width: 329px;*/
}

    #mm_grid_wrapper{
position:absolute;
left:10px;
margin:0 310px 0 0;
max-width: 1630px;
top:0;
height:100%;
}

} 
```

javascript...

```
$(function()
{
    $('.product-view') .css({'height': (($('#mm_grid_wrapper').height()) + 20)+'px'});

    $('#mm_grid_wrapper').bind('resize', function(){
        $('.product-view') .css({'height': (($('#mm_grid_wrapper').height()) +20)+'px'});
             });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T15:35:52.097

1.  删除“底部：0px;” 从你的css中的产品视图类，它会弄乱你的html。

2.  尝试将您的 jquerycode 放入 DOM 就绪侦听器中：

    ```
     $(document).ready(function(){
        $('.product-view') .css({'height': (($('#mm_grid_wrapper').height()) + 20)+'px'});

        $('#mm_grid_wrapper').bind('resize', function(){
          $('.product-view') .css({'height': (($('#mm_grid_wrapper').height()) +20)+'px'});
         });
     }); 
    ```

3.  在 jquery 中使用“resize()”和“height()”函数，所以你的最终代码将是这样的：

    ```
     $(document).ready(function(){
        $('.product-view').height($('#mm_grid_wrapper').height() + 20);

        $('#mm_grid_wrapper').resize(function(){
          $('.product-view').height($('#mm_grid_wrapper').height() + 20);
         });
     }); 
    ```

# ruby - Zurb Foundation - 如何更改项目模板？

> ID：15226505
> 
> 赞同：1
> 
> 时间：2013-03-05T14:36:17.530
> 
> 标签：ruby, compass-sass, zurb-foundation, webstorm

每次我构建一个项目时，我都必须移动目录。我们还使用 Require.js，因此我还必须从以前的项目中复制并粘贴导入所有基础功能的 javascript 初始化文件。

我使用 Webstorm 5 的 Foundation 项目模板或通过命令行使用以下命令创建这些项目：

```
compass create my_project -r zurb-foundation --using foundation 
```

我该去哪里修改这些项目模板？这是在一些红宝石路径上吗？有项目清单文件之类的吗？

谢谢，斯科特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T21:06:01.243

您可以从 GEM_HOME 获取 gem 安装的位置

`echo $GEM_HOME`

在我的情况下，我得到这样的东西：

`/Users/myusername/.rvm/gems/ruby-1.9.3-p286`

然后在`gems`目录中您可能会看到几个基础实例。在我的例子中，“ls”显示以下目录：

```
zurb-foundation-3.2.1
zurb-foundation-3.2.2
zurb-foundation-3.2.5
zurb-foundation-4.0.2
zurb-foundation-4.0.3 
```

如果您要使用`compass create my_project -r zurb-foundation --using foundation`它将从最新版本中提取，在我的情况下为 4.0.3。

如果你想直接编辑指南针蓝图，它在：

`zurb-foundation-4.0.3/templates/project`

通过修改这些文件，它会按照你的意愿去做，但是，如果你曾经运行过`gem update`它，它可能会拉下一个新版本的基础并开始使用它。

您可能需要考虑创建基础项目的分支，进行所需的更改，然后使用 bundle 来创建您的指南针项目。您甚至可以轻松地创建一个脚本来做到这一点。

在[Zurb Foundation 4 文档页面上查看 Sass](http://foundation.zurb.com/docs/sass.html)的“从 Git 创建项目”下的内容

# php - 使用 PHP 释放传递的变量

> ID：15226511
> 
> 赞同：0
> 
> 时间：2013-03-05T14:36:55.137
> 
> 标签：php, variables, release

我正在使用 javascript 和 PHP 将一些变量传递给页面以接收它。

本质上，我收到这样的变量：

```
if(isset($_REQUEST['command']) && $_REQUEST['command']=='add' && $_REQUEST['itemId']>0) 
```

这将使代码进入 PHP 参数以将商品添加到购物车。

当用户继续浏览网站（即他去结帐）时，问题就出现了。如果他想返回上一页，“add”变量仍然存在，并且代码进入 Add to cart 参数并将另一个项目添加到购物车，而这不应该发生。

使用后如何释放变量？还是有更好的解决方案？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T14:38:39.223

这是由于参数仍在查询字符串中。为了防止这种情况，您需要实现该[`POST/REDIRECT/GET`模式](http://en.wikipedia.org/wiki/Post/Redirect/Get)。

# python - 追加到嵌套在字典中的列表

> ID：15226519
> 
> 赞同：0
> 
> 时间：2013-03-05T14:37:26.197
> 
> 标签：python, list, dictionary, nested, nested-lists

我正在尝试附加到嵌套在字典中的列表中，这样我就可以看到哪些字母跟在一个字母后面。我在底部有我想要的结果。为什么这不匹配？

```
word = 'google'
word_map = {}

word_length = len(word)
last_letter = word_length - 1

for index, letter in enumerate(word):
    if index < last_letter:
        if letter not in word_map.keys():
            word_map[letter] = list(word[index+1])
        if letter in word_map.keys():
            word_map[letter].append(word[index+1])
    if index == last_letter:
        word_map[letter] = None

print word_map

desired_result = {'g':['o', 'l'], 'o':['o', 'g'], 'l':['e'],'e':None}
print desired_result 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T14:44:12.323

使用标准库对您有利：

```
from itertools import izip_longest
from collections import defaultdict

s = 'google'

d = defaultdict(list)
for l1,l2 in izip_longest(s,s[1:],fillvalue=None):
    d[l1].append(l2)

print d 
```

这里的第一个技巧是成对产生字母（`None`最后是 a）。这正是我们所做的`izip_longest(s,s[1:],fillvalue=None)`。从那里，只需将第二个字母附加到与第一个字符对应的字典列表中即可。defaultdict 允许我们避免各种测试来检查键是否在字典中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T14:41:00.443

```
if letter not in word_map.keys():
   word_map[letter] = list(word[index+1])

# now letter IS in word_map, so this also executes:
if letter in word_map.keys():
    word_map[letter].append(word[index+1]) 
```

你的意思是：

```
if letter not in word_map.keys():
   word_map[letter] = list(word[index+1])

else:
   word_map[letter].append(word[index+1]) 
```

另一件事：如果最后一个字母也出现在单词的中间怎么办？

# php - 通过服务器端脚本（不是 js）的纬度和经度

> ID：15226520
> 
> 赞同：0
> 
> 时间：2013-03-05T14:37:28.677
> 
> 标签：php, google-maps

我想知道是否有没有使用 javascript 来获取一个地方的纬度和语言（在 Gmaps、Bing 或其他东西上），因为这需要通过 REST API 工作。

我无法创建 gMaps 对象（用户没有 javscript）。

有什么方法可以向某些 google/bing api 发送 HTTP 调用并获得 lat 和 long（或一组可能的值）作为回报？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T14:40:57.657

当然 - 您可以使用 maps api`maps.googleapis.com/maps/api/geocode/json`并发送请求`curl`

查看[Web](https://developers.google.com/maps/documentation/webservices/?hl=en)服务文档

# java - 如何在侦听器中使用上下文？

> ID：15226521
> 
> 赞同：2
> 
> 时间：2013-03-05T14:37:29.103
> 
> 标签：java, android, listener, android-context

我有这样的代码：

```
else if (v == mSettings)
{
    if (disappearView.getVisibility() == View.VISIBLE)
    {
        AlphaAnimation fadeOutAnimation = new AlphaAnimation(1, 0); // start alpha, end alpha
        fadeOutAnimation.setDuration(1000); // time for animation in milliseconds
        fadeOutAnimation.setFillAfter(true); // make the transformation persist
        Animation out = AnimationUtils.makeOutAnimation(this, true);
        disappearView.startAnimation(out);
        disappearView.setVisibility(View.INVISIBLE);
        out.setAnimationListener(new Animation.AnimationListener()
        {
            public void onAnimationEnd(Animation animation)
            {
                disappearView.setVisibility(View.GONE);
                Animation in = AnimationUtils.loadAnimation(this, android.R.anim.fade_in);
                bannerView.startAnimation(in);
                bannerView.setVisibility(View.VISIBLE);
            }

            @Override
            public void onAnimationRepeat(Animation animation) { }

            @Override
            public void onAnimationStart(Animation animation) { }
        });
    }
    else {
        Animation in = AnimationUtils.loadAnimation(this, android.R.anim.fade_in);
        disappearView.startAnimation(in);
        disappearView.setVisibility(View.VISIBLE);
        bannerView.setVisibility(View.INVISIBLE);
        bannerView.setVisibility(View.GONE);
    }
} 
```

除了animationListener中的这一部分之外，这一切都有效：

```
Animation in = AnimationUtils.loadAnimation(this, android.R.anim.fade_in); 
```

它想要一个有效的上下文，但它正在接收一个动画监听器，我给它什么上下文，上下文真的让我很困惑。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T14:38:31.660

将其更改为：

```
Animation in = AnimationUtils.loadAnimation(MyActivityName.this, android.R.anim.fade_in); 
```

[它想要一个扩展Context](http://developer.android.com/reference/android/content/Context.html)的任何类的实例。由于它位于匿名内部类中，因此当您使用时，`this`您指的是内部类实例，而不是您的 Activity。我的代码片段引用了包装匿名内部类的 Activity 类。由于[Activity](http://developer.android.com/reference/android/app/Activity.html)扩展了 Context，因此这是一个有效的参数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-05T14:39:02.890

在侦听器内部，`this`指的是`Listener`. 尝试使用`ActivityName.this`

# java - Struts2标签插入

> ID：15226524
> 
> 赞同：0
> 
> 时间：2013-03-05T14:37:38.993
> 
> 标签：java, struts2, struts-tags

我目前正在从 Struts 2.0.11.1 升级到 Struts 2.3.7，但是我遇到了 Struts 标签的输出问题（例如`<s:radio>`和`<s:textarea>`。之前，这些标签的输出是两个`<div>`，一个包含标签，并且一个包含单选按钮/文本区域。但是在我升级后，`<br>`两者之间有一个`<div>`。

前：

```
<div id="wwlbl_something_someString" class="wwlbl">
    <label for="something_someString" class="desc">Some label</label>
</div>
<div id="wwctrl_something_someString" class="wwctrl">
    <!--radiobuttons/textarea -->
</div> 
```

后

```
<div id="wwlbl_something_someString" class="wwlbl">
    <label for="something_someString" class="desc">Some label</label>
</div>
<!-- I don't want this.. -->
<br>
<!-- -->
<div id="wwctrl_something_someString" class="wwctrl">
    <!--radiobuttons/textarea -->
</div> 
```

该jsp：

```
 <li class="wwgrp flowClear">
        <h3 class="header"><s:text name="something.header"/></h3>
        <ol class="nobullets">
          <s:radio list="yesNoList"
                   label="%{getText('something.text.label')}"
                   name="something.someString"
                   value="something.some"
                   disabled="%{readOnly}"/>
        </ol>
      </li> 
```

@评论：这个项目中有很多以前从未见过的东西（不是很好）；）

有谁知道这是否在 Struts 中发生了变化，如果是，如何避免创建`<br>`'s？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T15:51:28.617

我实际上偶然发现了答案。作为对最后一条评论的回答`struts.ui.theme`设置为`css_xhtml`.

[http://depressedprogrammer.wordpress.com/2007/04/11/struts-2-form-control-templates/](http://depressedprogrammer.wordpress.com/2007/04/11/struts-2-form-control-templates/)

> 一个快速说明，xhtml_css 主题还会`<br/>`在标签和控件之间生成一个非常无用的标签，这可能会影响你的整个外观，摆脱这个你必须`.wwgrp br { display: none; }`在你的 CSS 样式表中做一个。

所以我认为这样做可以解决问题，它是由 struts 主题添加的，可能在我更新 Struts 版本时发生了变化。

欢迎提供有关通常如何设置/应该设置的指针，因为我对此一无所知.. :)

# linux - centos上配置以太网或wifi inernet

> ID：15226530
> 
> 赞同：1
> 
> 时间：2013-03-05T14:37:51.463
> 
> 标签：linux, centos

如何在笔记本电脑上配置以太网或 wifi，我按照本[教程](http://architects.dzone.com/articles/centos-minimal-installation)进行操作，我的以太网正常启动，但我仍然无法从 ping 8.8.8.8 dns 接收任何数据包，我的笔记本电脑上有以太网和 wifi ......机器工作完美，但在真正的操作系统上它不会工作......如果我ping

`ping 127.0.0.1`

或者

`ping localhost`

可能是什么问题呢？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T15:44:34.970

可能是您的界面已关闭。

```
ifconfig eth0 up 
```

Eth0 是一个接口名称，用于获取“ifconfig”中可见接口类型的列表

你也应该向我们提供接口列表，可能还有硬件

```
dmesg 
```

将在您的笔记本电脑上显示设备的完整列表。

还要注意其中一些命令需要root / sudoer。

无线网络：[http ://wiki.centos.org/HowTos/Laptops/Wireless](http://wiki.centos.org/HowTos/Laptops/Wireless)

# javascript - AngularJS 指令中的可选表达式属性

> ID：15226531
> 
> 赞同：13
> 
> 时间：2013-03-05T14:37:52.047
> 
> 标签：javascript, angularjs, angularjs-directive

我有一个自定义导航指令，需要一个可选的“禁用”属性，我不确定它是否可能。

在我的主控制器中：

```
.controller('NavCtrl', ['UserResource','RoleResource'], function(UserResource,RoleResource){
      var user = UserResource.getUser();
      var roles = RoleResource.getRoles();
      UserService.init(user, roles); //????

}); 
```

在我的指令中：

```
.directive('navItem', function(){
    return{
        restrict: 'A',
        scope: {
            text: '@',
            href: '@',
            id: '@',
            disable: '&'

        },
        controller: function($scope, $element, $attrs){
            $scope.disabled = ''; //Not sure I even need a controller here
        },
        replace: true,
        link: function(scope, element, attrs){
            scope.$eval(attrs.disable);
        },
        template: '<li class="{{disabled}}"><a href="{{href}}" id="{{id}}">{{text}}</a></li>'

    }

}); 
```

在我的 HTML 中，我想做这样的事情：

```
<div data-nav-item text="My Text" href="/mytemplate.html" id="idx"
     disable="UserService.hasRole('ADMIN,BILLING') && someOtherFn(xxx) || ..."> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-05T17:39:56.507

您可以通过将 $eval 调用更改为

```
scope.$parent.$eval(attrs.disable); 
```

因为您需要评估包含在`attrs.disable`父范围中的表达式，而不是指令的隔离范围。但是，由于您使用的是 '&' 语法，它会自动评估父范围内的表达式。因此，只需执行以下操作：

```
if(angular.isDefined(attrs.disable)) {
    scope.disable();
} 
```

[小提琴](http://jsfiddle.net/mrajcok/fFsRr/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-27T06:29:45.280

最近我遇到了这个问题，发现我在 index.html 中有多个指令文件的引用（脚本标记）。一旦我删除了这些额外的引用，问题就消失了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T04:31:32.003

做同样事情的一种方法是这样的[http://jsfiddle.net/fFsRr/7](http://jsfiddle.net/fFsRr/7)。

您可以`todisableornot="rights[1]"`像这样用您的表达式替换`todisableornot="UserService.hasRole('ADMIN,BILLING') && someOtherFn(xxx) || ..."`。

现在，正如 Mark Rajcok 所说，`todisableornot`只要您调用该属性，该属性就会在父范围内进行评估。所以

`<li ng-class="{adminRole:todisableornot()}"><a href="{{href}}" id="{{id}}">{{text}}</a></li>``adminRole`如果`todisableornot`属性评估为真（在父范围的上下文中），将应用类。

您可以通过更改`$scope.rights =[true, false];`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-23T14:27:11.060

A more appropriate implementation for this specific problem would be to have an optional binding to a simple model property that has its value assigned from your complex statement. The Angular documentation repeatedly mentions that the best practice is to bind to model properties and not to functions. The "&" binding for directives is primarily useful for implementing callbacks, where you need to passing data from the directive to its parent.

Implementing an optional binding looks like this:

Code:

```
angular.module("testApp", [])
.controller("testCtrl", ["$scope", function testCtrl($scope) {
    $scope.myFlag = false;
}])
.directive("testDir", function testDir() {
    return {
        restrict: "EA",
        scope: {
            identity: "@",
            optional: "=?"
        },
        link: function testDirLink($scope, $element, $attrs) {
            if (typeof $scope.optional == "undefined") {
                $scope.description = "optional was undefined";
            }
            else {
                $scope.description = "optional = '" + $scope.optional + "'";
            }
        },
        template: "<div>{{identity}} - {{description}}</div>"
    };
}); 
```

HTML:

```
<div ng-app="testApp" ng-controller="testCtrl">
    <test-dir identity="one" optional="myFlag"></test-dir>
    <test-dir identity="two"></test-dir>
</div> 
```

Fiddle: [http://jsfiddle.net/YHqLk/](http://jsfiddle.net/YHqLk/)

# c# - 使用 Autofac 注册部分封闭的泛型类型

> ID：15226536
> 
> 赞同：34
> 
> 时间：2013-03-05T14:38:03.183
> 
> 标签：c#, generics, autofac, unit-of-work

我有`UnitofWork`课，它实现了`IUnitOfWork`. 我尝试用 Autofac 注册它：

```
var builder = new ContainerBuilder();
builder
    .RegisterGeneric(typeof(UnitOfWork<Repository<>,>))
    .As(typeof(IUnitOfWork))
    .InstancePerDependency(); 
```

实现是：

```
public class UnitOfWork<T, O> : IUnitOfWork
    where T : Repository<O>
    where O : BaseEntity
{
}

public interface IUnitOfWork : IDisposable
{
    void SaveChanges();
} 
```

给出错误**“预期类型”**

但是这个在另一个项目上工作：

```
public class Repository<T> : GenericRepository<T> 
    where T : BaseEntity
{
    public Repository(IDbContext context) : base(context) { }   
}

public abstract class GenericRepository<T> 
    : IRepository<T>, IQueryable<T> where T : BaseEntity
{
}

builder
    .RegisterGeneric(typeof(Repository<>))
    .As(typeof(IRepository<>))
    .InstancePerHttpRequest(); 
```

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-03-05T16:14:31.277

您**不能在****a**中部分打开课程（例如，`UnitOfWork<Repository<>,>`您已指定`T`但未指定`O`），请尝试：**`typeof`**

```
var builder = new ContainerBuilder();
builder
    .RegisterGeneric(typeof(UnitOfWork<,>))
    .As(typeof(IUnitOfWork))
    .InstancePerDependency(); 
```

`where T : Repository<O>`通用约束将处理第一个参数应该是`Repository<>`

**但它不起作用，`RegisterGeneric`因为它需要一个通用接口**，所以需要创建一个`IUnitOfWork<T,O>`……</p>

但是你的模型很奇怪。为什么`UnitOfWork`需要`Repository<>`类型参数？

`Repository<>`您可以在`UnitOfWork<E>`构造函数中获取一个，而不是将其作为类型参数：

```
public class UnitOfWork<E> : IUnitOfWork<E> where E : BaseEntity
{
    private readonly Repository<E> repository;

    public UnitOfWork(Repository<E> repository)
    {
        this.repository = repository;
    }

    //.. other methods

} 
```

在哪里 `IUnitOfWork<E>`

```
public interface IUnitOfWork<E> : IDisposable where E : BaseEntity
{
    void SaveChanges();
} 
```

和 Autofac 注册：

```
var builder = new ContainerBuilder();
builder
    .RegisterGeneric(typeof(Repository<>)).AsSelf();
builder
    .RegisterGeneric(typeof(UnitOfWork<>))
    .As(typeof(IUnitOfWork<>))
    .InstancePerDependency();
var container = builder.Build();

// sample usage
var u = container.Resolve<IUnitOfWork<MyEntity>>(); 
```

# javascript - 带数字寻呼机的 bxslider

> ID：15226538
> 
> 赞同：1
> 
> 时间：2013-03-05T14:38:09.953
> 
> 标签：javascript, css, wordpress, slider, bxslider

我有一个滑块，我想使用数字而不是项目符号。我也想数字滑动。

代码如下，wordpress中的部分：

```
<!-- Begin News Slider -->
        <?php $loop = new WP_Query( array( 'post_type' => 'news', 'posts_per_page' => 25 ) ); ?>
        <div class="news-slider-container">
            <div class="news-slider-content">

                <ul class="bxslider">
                    <?php while ( $loop->have_posts() ) : $loop->the_post(); ?> 
                    <li>
                        <a href="<?php the_permalink(); ?>" title="<?php printf( esc_attr__( '%s', 'foo' ), the_title_attribute( 'echo=0' ) ); ?>">
                            <div class="news-thumb"><?php the_post_thumbnail(''); ?></div>
                            <p><?php the_title(); ?></p>
                        </a>
                    </li>
                    <?php endwhile; ?>
                </ul> 
            </div>
        </div>
        <script type="text/javascript">
            $('.bxslider').bxSlider({
                auto: true,
                pager: 'short'
            });
        </script> 
```

对于寻呼机，我没有看到任何数字选项。

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-06T15:34:36.730

您可以自定义css：

```
.bx-wrapper .bx-pager {
    font-size: 12px;
}
.bx-wrapper .bx-pager.bx-default-pager a {
    width: 22px;
    height: 21px;
    -moz-border-radius: 0;
    -webkit-border-radius: 0;
    border-radius: 0;
    text-indent: 0;
    background-color: #ffffff;
    border: 1px solid #dddddd;
}
.bx-wrapper .bx-pager.bx-default-pager a:hover, .bx-wrapper .bx-pager.bx-default-pager a:focus {
    background-color: #f5f5f5;
    text-decoration: none;
}
.bx-wrapper .bx-pager.bx-default-pager a.active {
    background: rgb(255, 173, 198);
} 
```

如果您使用 Chrome 开发工具，这很容易。

# c++ - PointCloudLibrary 项目-> pcl/io/boost.h 导致问题：AccessViolationException

> ID：15226540
> 
> 赞同：-1
> 
> 时间：2013-03-05T14:38:15.830
> 
> 标签：c++, boost, access-violation, point-cloud-library

我的程序是用 C# 编写的，但这个项目是用 C++ 编写的。我需要包含`pcl/io/boost.h`才能使用点云。但是，我的问题是在初始化包含它的类时出现 AccessViolationException 错误。它给出了这样的解释：

> 尝试读取或写入受保护的内存。这通常表明其他内存已损坏。

我花了 2 天时间才发现问题出在 boost 上，但我之前遇到过麻烦......

我运行 Windows 7，VS 2010 x64 在 x64 中安装了 pcl 的所有内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T08:28:07.210

好的，我修复了它，事实证明我可以通过查看我在 boost 中使用的内容 (shared_array) 来解决该错误，并检查 boost 文件夹中是否有库，而不是 pcl/io/boost。

因此，对于将来的参考，如果您在第三方的 pcl 库上出现错误，请检查您是否可以使用第三方库而不是 pcl/第三方。

# ios - iOS 电子邮件地址验证

> ID：15226545
> 
> 赞同：4
> 
> 时间：2013-03-05T14:38:32.533
> 
> 标签：ios, regex, ios6, nsregularexpression

我有一个表格，我想做的是在将电子邮件地址插入我的数据库之前验证它们。我已经阅读了多篇关于此的帖子，但没有一个解决了我的问题。

这是我到目前为止的代码。

```
-(BOOL) validEmail:(NSString*) emailString {
    NSString *regExPattern = @"[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?";  

    NSRegularExpression *regEx = [[NSRegularExpression alloc] initWithPattern:regExPattern options:NSRegularExpressionCaseInsensitive error:nil];

    NSUInteger regExMatches = [regEx numberOfMatchesInString:emailString options:0 range:NSMakeRange(0, [emailString length])];

    if (regExMatches == 0) {
        return NO;
    } else
        return YES;
} 
```

正则表达式几乎匹配每个电子邮件地址，但当地址格式为 abc,def@gmail.com 时，它无法将其视为无效地址。它不会拿起逗号。

有人知道我哪里出错了吗？谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-10-20T20:07:24.583

**你的正则表达式太简单了。这将起作用：**

```
(?:(?:\r\n)?[ \t])*(?:(?:(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t]
)+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:
\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(
?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ 
\t]))*"(?:(?:\r\n)?[ \t])*))*@(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\0
31]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\
](?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+
(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:
(?:\r\n)?[ \t])*))*|(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z
|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)
?[ \t])*)*\<(?:(?:\r\n)?[ \t])*(?:@(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\
r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[
 \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)
?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t]
)*))*(?:,@(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[
 \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*
)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t]
)+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*)
*:(?:(?:\r\n)?[ \t])*)?(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+
|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r
\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:
\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t
]))*"(?:(?:\r\n)?[ \t])*))*@(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031
]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](
?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?
:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?
:\r\n)?[ \t])*))*\>(?:(?:\r\n)?[ \t])*)|(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?
:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?
[ \t]))*"(?:(?:\r\n)?[ \t])*)*:(?:(?:\r\n)?[ \t])*(?:(?:(?:[^()<>@,;:\\".\[\] 
\000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|
\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>
@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"
(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*))*@(?:(?:\r\n)?[ \t]
)*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\
".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?
:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[
\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*|(?:[^()<>@,;:\\".\[\] \000-
\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(
?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*)*\<(?:(?:\r\n)?[ \t])*(?:@(?:[^()<>@,;
:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([
^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\"
.\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\
]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*(?:,@(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\
[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\
r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] 
\000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]
|\\.)*\](?:(?:\r\n)?[ \t])*))*)*:(?:(?:\r\n)?[ \t])*)?(?:[^()<>@,;:\\".\[\] \0
00-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\
.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,
;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?
:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*))*@(?:(?:\r\n)?[ \t])*
(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".
\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[
^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]
]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*\>(?:(?:\r\n)?[ \t])*)(?:,\s*(
?:(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\
".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*)(?:\.(?:(
?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[
\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t
])*))*@(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t
])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?
:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|
\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*|(?:
[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\
]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*)*\<(?:(?:\r\n)
?[ \t])*(?:@(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["
()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)
?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>
@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*(?:,@(?:(?:\r\n)?[
 \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,
;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t]
)*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\
".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*)*:(?:(?:\r\n)?[ \t])*)?
(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".
\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*)(?:\.(?:(?:
\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\[
"()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])
*))*@(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])
+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?:\
.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z
|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*\>(?:(
?:\r\n)?[ \t])*))*)?;\s*) 
```

我建议在后台线程上运行。

来源：[从这里](http://ex-parrot.com/~pdw/Mail-RFC822-Address.html)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-11-27T04:45:29.110

这是一个 RegEx 模式，它应该能够拾取那些逃避您之前努力的电子邮件。

```
 NSString *emailRegex = @"[A-Z0-9a-z]+([._%+-]{1}[A-Z0-9a-z]+)*@[A-Z0-9a-z]+([.-]{1}[A-Z0-9a-z]+)*(\\.[A-Za-z]{2,4}){0,1}";
   NSPredicate *emailTest = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", emailRegex];
   if (![emailTest evaluateWithObject:myEmail])
   {
    *error = ALERT_MSG_VALID_EMAIL_ID;
    isValid = FALSE;
   }
   else
   {
    isValid = TRUE;
    *error = @"";
   } 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-03-05T14:47:42.867

根据 Marc B 的评论，解决方案是我的正则表达式过于简单。

我必须使用这个：

```
NSString *regExPattern = @"(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\\])"; 
```

而不是这个：

```
NSString *regExPattern = @"[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?"; 
```

这个新的正则表达式匹配 abc,def@gmail.com

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-07-29T09:55:03.807

# 迅速

```
func validateEmail(_ emailStr: String) -> Bool {
    let regEx = "[A-Z0-9a-z._%+]+@[A-Za-z0-9.]+\\.[A-Za-z]{2,4}"
    let validationStatus = NSPredicate(format:"SELF MATCHES %@", regEx)
    if (validationStatus.evaluate(with: value) == false) {
        //Handle error case
        ...
        return false
    }
    return true
} 
```

# 目标c

```
- (BOOL)validateEmail:(NSString *)emailStr {
    NSString *emailRegex = @"[A-Z0-9a-z._%+]+@[A-Za-z0-9.]+\\.[A-Za-z]{2,4}";
    NSPredicate *emailTest = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", emailRegex];
    return [emailTest evaluateWithObject:emailStr];
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-10-20T19:50:51.120

我建议不要使用正则表达式，而是使用[Mailgun 的免费电子邮件验证 API](http://blog.mailgun.com/post/free-email-validation-api-for-web-forms/)。我为它编写了一个简单的 Objective-C 包装器，如果出现连接错误，它会回退到在本地使用正则表达式进行验证。

[https://github.com/benzguo/BZGMailgunEmailValidation](https://github.com/benzguo/BZGMailgunEmailValidation)

```
BZGMailgunEmailValidator *validator = 
    [BZGMailgunEmailValidator validatorWithPublicKey:YOUR_PUBLIC_KEY];

[validator validateEmailAddress:self.emailFieldCell.textField.text
                        success:^(BOOL isValid, NSString *didYouMean) {
                        // Validation succeeded
                      } failure:^(NSError *error) {
                        // Validation failed
                      }]; 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-11-21T16:45:57.323

.h 文件。

```
@interface JRTextHelper : NSObject

+ (BOOL)textIsValidEmailFormat:(NSString *)text;

+ (BOOL)textIsValidPasswordFormat:(NSString *)text;

@end 
```

还有 .m 文件。

```
#import "JRTextHelper.h"

@implementation JRTextHelper

+ (BOOL)textIsValidEmailFormat:(NSString *)text {

    BOOL stricterFilter = YES;
    NSString *stricterFilterString = @"[A-Z0-9a-z\\._%+-]+@([A-Za-z0-9-]+\\.)+[A-Za-z]{2,4}";
    NSString *laxString = @".+@([A-Za-z0-9]+\\.)+[A-Za-z]{2}[A-Za-z]*";
    NSString *emailRegex = stricterFilter ? stricterFilterString : laxString;
    NSPredicate *emailTest = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", emailRegex];
    return [emailTest evaluateWithObject:text];
}

+ (BOOL)textIsValidPasswordFormat:(NSString *)text {

    NSString *stricterFilterString = @"(?!^[0-9]*$)(?!^[a-zA-Z]*$)^([a-zA-Z0-9]{8,10})$";
    NSPredicate *passwordTest = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", stricterFilterString];

    if (text.length < 6) {
        return NO;
    }
    else {
        return [passwordTest evaluateWithObject:text];
    }
}

@end 
```

如何使用：

```
#import "JRTextHelper.h"

NSString *email = @"valid@email.com";
NSString *password = @"ValPass1";

BOOL validEmail = [JRTextHelper textIsValidEmailFormat:email];
BOOL validPassword = [JRTextHelper textIsValidPasswordFormat:password];

NSLog(@"valid email : %@",validEmail ? @"YES" : @"NO");
NSLog(@"valid password : %@",validPassword ? @"YES" : @"NO"); 
```

# java - 使用静态私有方法真的比实例私有方法更快/更好吗？

> ID：15226547
> 
> 赞同：2
> 
> 时间：2013-03-05T14:38:34.753
> 
> 标签：java, performance, coding-style, static-methods

我要问的是这样做是否有区别：

```
public Something importantBlMethod(SomethingElse arg) {
    if (convenienceCheckMethod(arg)) {
        // do important BL stuff
    }
}

private boolean convenienceCheckMethod(SomethingElse arg) {
    // validate something
} 
```

还有这个：

```
public Something importantBlMethod(SomethingElse arg) {
    if (convenienceCheckMethod(arg)) {
        // do important BL stuff
    }
}

private static boolean convenienceCheckMethod(SomethingElse arg) {
    // validate something
} 
```

我实际上使用选项 1，因为它对我来说似乎更自然。

那么第一种和第二种方式之间是否存在风格/约定/性能差异？

谢谢，

* * *

正如我测试过的评论中所建议的那样，在我的基准测试中，动态方法更快。

这是测试代码：

```
public class Tests {

    private final static int ITERATIONS = 100000;

    public static void main(String[] args) {
        final long start = new Date().getTime();

        final Service service = new Service();
        for (int i = 0; i < ITERATIONS; i++) {

            service.doImportantBlStuff(new SomeDto());
        }

        final long end = new Date().getTime();

        System.out.println("diff: " + (end - start) + " millis");
    }
} 
```

这是服务代码：

```
public class Service {

    public void doImportantBlStuff(SomeDto dto) {

        if (checkStuffStatic(dto)) {

        }

        // if (checkStuff(dto)) {

        // }
    }

    private boolean checkStuff(SomeDto dto) {
        System.out.println("dynamic");
        return true;
    }

    private static boolean checkStuffStatic(SomeDto dto) {
        System.out.println("static");
        return true;
    }
} 
```

对于 100000 次迭代，动态方法通过 577 毫秒，静态方法通过 615 毫秒。

然而，这对我来说是不确定的，因为我不知道编译器何时决定优化什么。

这就是我想要找出的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T14:41:40.487

性能方面：差异（如果有的话）可以忽略不计。

经验法则是，如果您的方法不与其类的任何成员交互，则将其声明为静态。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T14:41:32.940

如果您的方法需要实例数据或调用其他实例方法，则它*必须*是实例方法。

如果函数*只*依赖于它的参数，而不依赖于其他静态数据，那么它也可能是一个实例方法——您将避免在调用静态函数时需要重复类名。

恕我直言，没有特别需要制作该功能`static`，除非：

1.  它可以从其他类（即 not `private`）调用，并且
2.  它不引用实例变量，并且
3.  它引用其他静态类数据

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T14:42:31.440

如果函数的结果不依赖于参数以外的任何东西，它应该是静态的。如果它依赖于实例，则使其成为实例成员。

这与性能无关；这是关于语义的。除非您每秒调用此函数一百万次，否则您不会注意到性能差异，即使那样差异也不会很大。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-05T14:44:23.913

这一切都取决于上下文。通常静态方法/变量在类中声明，以便外部类可以使用它们。

如果您正在调用本地方法，那么您通常应该使用实例方法而不是进行静态调用。

仅供参考，您从实例方法调用静态方法的语法是错误的。您必须提供类名。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-05T14:45:33.023

根据我的说法，静态方法的**NO**绑定与非静态私有 ie 相同`early binding`。. 编译器实际上在创建字节码时将方法代码（静态或非静态私有）添加到您的代码中。

**更新：**刚刚通过这篇[文章](http://geekexplains.blogspot.in/2008/06/dynamic-binding-vs-static-binding-in.html)。它说实例方法绑定是`dynamic`如此，如果方法不是`non-static private`那么。您的*静态方法更快*。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-05T15:05:53.620

可能会，也可能不会。您的代码的不同执行之间可能会有所不同。

这是您无需深入研究 Hotsport 代码（或非 Hotspot JVM 的代码）即可*知道的唯一一件事：*

*   静态方法使用[invokestatic](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-6.html#jvms-6.5.invokestatic)调用，不需要对象引用。
*   实例私有方法是用[invokespecial](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-6.html#jvms-6.5.invokespecial)调用的，它确实需要一个对象引用。

这两个操作码都有一个用于解析要调用的实际方法的过程，并且这些过程相对相似（您可以阅读规范）。如果不计算实际实现的指令，就不可能说哪个更快。

将`invokespecial`一个额外的值压入堆栈。执行此操作的时间以几分之一纳秒计算。

Hotspot 可以执行的优化范围很广。在程序运行期间，它可能不必多次执行实际的方法解析。它可能会选择内联该方法（也可能不内联），但该成本将再次大致相等。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-05T15:38:27.720

我检查了，我希望它能做你想知道的，代码不会很漂亮：

```
public class main {

@SuppressWarnings("all")
public static void main(String[] args) {
    main ma = new main();
    int count = Integer.MAX_VALUE;
    long beg = (new Date()).getTime();
    for (int i = 0; i < count; i++) {
        ma.doNothing();
    }
    System.out.println("priv : " + new Long((new Date()).getTime() - beg).toString());

    beg = (new Date()).getTime();
    for (int i = 0; i < count; i++) {
        doNothingStatic();
    }
    System.out.println("privstat : " + new Long((new Date()).getTime() - beg).toString());

}

private void doNothing() {
    int i = 0;
}

private static void doNothingStatic() {
    int i = 0;
}
} 
```

结果：

私人：1774
私人统计：1736

私人：1906
私人统计：1783

私人：1963
私人统计：1751

私人：1782
私人统计：1929

私人：1876
私人统计：1867

它看起来不像依赖于静态 - 非静态私有方法。我确信差异来自机器当前的负担。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-06-11T11:20:43.157

我参加了编码比赛，我观察到，非静态方法比静态方法更快（但最小）。当然，这取决于您的使用情况和情况要求，但与非静态方法相比，静态方法的性能较差。按照惯例，您可以使用静态方法来简化代码，但创建类的实例并调用该方法会提供更好的性能。

# vim - 如何阻止 Vim 创建 *-e 文件

> ID：15226548
> 
> 赞同：4
> 
> 时间：2013-03-05T14:38:37.433
> 
> 标签：vim

最近我的 Vim 一直在我的文件夹中乱扔以`-e`. 例如，如果我正在编辑一个名为 的文件`test.php`，有时（但并非总是如此！）我最终会得到另一个名为`test.php-e`的文件。

我不知道是什么原因造成的，但这很烦人。据我所知，我最近没有改变任何东西。备份文件都在我的`~/.vim/backups`目录中，所以我不确定这些东西是从哪里来的。想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T14:39:33.393

```
set nobackup 
```

或将备份目录设置为 /tmp 并不时清除。

来自 VIM 文档 (:help nobackup)

```
'backup' 'bk'       boolean (default off)
            global
            {not in Vi}
    Make a backup before overwriting a file.  Leave it around after the
    file has been successfully written.  If you do not want to keep the
    backup file, but you do want a backup while the file is being
    written, reset this option and set the 'writebackup' option (this is
    the default).  If you do not want a backup file at all reset both
    options (use this if your file system is almost full).  See the
    |backup-table| for more explanations.
    When the 'backupskip' pattern matches, a backup is not made anyway.
    When 'patchmode' is set, the backup may be renamed to become the
    oldest version of a file.
    NOTE: This option is reset when 'compatible' is set. 
```

# html - 通用实体“trk”未定义且没有默认实体错误

> ID：15226568
> 
> 赞同：1
> 
> 时间：2013-03-05T14:39:44.777
> 
> 标签：html, xhtml, xhtml-1.0-strict

我正在尝试解决此验证问题：

> 一般实体“trk”未定义，没有默认实体和对无法为其生成系统标识符的实体“trk”的引用。

**这是我的代码：**

```
<a href="http://www.linkedin.com/profile/view?id=189019016&trk=tab_pro" 
   class="thumbnail">  
</a> 
```

谁能看到问题可能是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T14:51:53.480

[Zenith 的回答](https://stackoverflow.com/a/15226656/356541)指出了一般问题——`&`表示 HTML 中转义字符序列的开始，因此验证器试图将其解析`trk`为字符实体（事实并非如此）。`&`s 需要被编码为实体本身以防止这种混淆。

在严格的 XHTML 中，这些后面需要跟着 unicode 数字条目（而不是像,等这样`&#`的简写形式），所以. 当我难过时，我经常使用[这个参考表。](http://projects.kmi.open.ac.uk/ceryle/doc/docs/NOTE-charents.html)`amp``hellip``&``&#38;`

因此，XHTML strict 的正确代码应该是：

```
<a href="http://www.linkedin.com/profile/view?id=189019016&#38;trk=tab_pro" 
   class="thumbnail">  
</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T14:44:11.157

尝试将**trk**`&`之前的替换为**`&amp;`**

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T15:11:59.340

在经典 HTML 和 XHTML 中，`&trk=`不允许使用 like 构造，因为它被正式解释为实体引用，并且不存在这样的实体。这实际上只是一种形式，因为浏览器不会那样做（或者在本世纪没有表现过），但是错误消息在验证时很烦人。

由于旨在处理这种常见情况的相当特殊的规则，HTML5 允许构造。但是，目前 HTML5 验证器在这里有一个错误，他们将其报告为错误。有一个验证器.nu 软件的实验版本已修复此错误：http: [//qa-dev.w3.org :8888/](http://qa-dev.w3.org:8888/)

将来，您应该能够使用此类构造而不会出现验证错误，如果您使用`<!doctype html>`（当然，这可能会导致*其他*验证问题。**

# sql - 如何在 Oracle 中将动态行数据转换为 XML？

> ID：15226574
> 
> 赞同：0
> 
> 时间：2013-03-05T14:40:11.923
> 
> 标签：sql, oracle, oracle11g

我在一个看起来像这样的表中有一些数据。

```
ID     KEY       VAL
----   -----    -----
1      name     Bob
1      age      30
1      gender   male
2      name     Susan
2      age      50 
```

可以获得此查询的输出：

```
SELECT *
  FROM my_table
 WHERE id = 1; 
```

..以这样的 XML 格式：

```
<DATA>
  <NAME>Bob</NAME>
  <AGE>30></AGE>
  <GENDER>MALE</MALE>
</DATA> 
```

我不得不求助于 PL/SQL，因为我无法使用 SQL 动态构建标签名称？这是否可以使用 SQL 方法 Oracle 11g 或者我必须继续使用 PL/SQL 方式？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T14:47:07.780

你可以这样做：

```
select xmlelement("DATA",xmlagg( xmlelement(evalname(KEY), VAL)))
from my_table
where ID = 1 
```

[这是一个 sqlfiddle 演示](http://www.sqlfiddle.com/#!4/d00e9/4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T14:45:48.630

您应该能够使用纯 SQL 做到这一点：

```
select XMLELEMENT("DATA",
         XMLELEMENT("NAME", n.val), 
         XMLELEMENT("AGE", a.val), 
         XMLELEMENT("GENDER", g.val))
from my_table n
inner join my_table a on n.id = a.id
inner join my_table g on n.id = g.id
where n.key = "name" 
and   a.key = "age"
and   g.key = "gender"
and   n.id  = 1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T15:13:56.660

试试这个

```
 SELECT xmlelement("Data",xmlelement("Name",name),
xmlelement("Age",age),
xmlelement("Gender",gender)) "xml_format"
      FROM emp_tab  where rownum=1; 
```

任何澄清请让我知道！

# c++ - 在 C++ 中保存/存储/导出大型对象

> ID：15226578
> 
> 赞同：0
> 
> 时间：2013-03-05T14:40:24.793
> 
> 标签：c++, vector, save, export, store

**背景：**

我是一名新的 c++ 程序员，正在尝试构建一个程序，该程序返回一个字符串，说明给定十六进制颜色代码的颜色。整体功能是请求鼠标指针所在像素的十六进制代码，并返回一个描述颜色的字符串（如#8B0000 的“深红色”）。（我是色盲，这将是一个很大的帮助）

作为第一次尝试，我创建了一个 .txt 文件，其中包含换行符上所有可能的颜色代码。不用说，该文档有 16777216 行，大小为 134.2MB。我搜索了互联网，发现在 C++ 中读取 .txt 文件的唯一方法是逐行，从头到尾。这将导致对字符串“Black”的“getline()”调用 16777216 次。这种方法现在得到了我的“绝望”印记。

**主意：**

我想创建一个包含 16777216 个 (String colour) 实例的向量，并使用十六进制到整数的转换作为索引来定位正确的字符串。这个向量也会变得非常大并且非常不方便构建或使用。

**问题：**

我需要找到最好的方法（如果可能的话）来保存/保存一个大对象以及我的 c++ 类，这样我就可以导入该对象并立即使用它。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T16:23:00.690

A) 您的文件包含超过 16777216 行，这意味着它包含的单词数量超过了英语单词的数量，并且可能是俄语、希腊语、中文和日语的总和。

B）您需要将事物放入范围，然后对正确的范围进行二进制扫描。换句话说，将海军蓝的范围作为具有低值和高值的对象映射到范围中。

C）将所有范围放入一个大列表中并对列表进行排序。

D）然后对任何特定颜色进行二进制扫描，它将与正确的范围相交。

例如：

```
// Navy blue might be this range
Low  = RGB(0,0,170)
High = RGB(0,0,200)

// Light Red might be this range
Low  = RGB(240,0,0)
High = RGB(255,0,0) 
```

我的意思是，如果您可以命名范围，为什么还要命名每种颜色？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T14:48:20.167

OP发布：

> 我搜索了互联网，发现在 C++ 中读取 .txt 文件的唯一方法是逐行，从头到尾。

这是不正确的。我不确定您使用的是什么 C++ 文件读/写类，但如果您使用的类不支持随机访问，那么请找一个不同的类。

如果您重新设置并使用 fopen，您可以使用 fseek 转到文件中的特定位置。

如果您将文件中的所有记录格式化为相同的长度，那么您可以轻松地计算文件中的偏移量`recordnumber*recordlength`（假设第一条记录是数字 0）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T16:20:40.573

感谢大卫和亚历克斯的讨论：）

一种方式查找值来命名的简单解决方案

所以我建议首先根据每个颜色值的四个 MSB 量化颜色空间。

```
val = ((hexval & 0xf00000) >> 12) | ((hexval & 0x00f000) >> 8) | ((hexval & 0x0000f0) >> 4) 
```

还要创建一个`std::vector<std::string>`包含 4096 个条目的条目，您可以在其中读取颜色名称。

```
std::vector<std::string> names(4096);

//Read file and do for each line
names[val] = /*name for the value*/ 

//Lookup
const std::string& name = names[val]; 
```

对于双向查找，我仍然希望`boost::bimap`它可以配置为在从颜色值中查找名称时看起来像一个向量。并在找到与某个命名颜色匹配的颜色值时配置为哈希表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-16T17:35:22.253

如果你想“保留”一个类的对象，那么我建议你腌制它！这是一个我认为适用于 c++的[库](http://www.picklingtools.com/)

这些例程来自该库中的选择器.h，应该很有用

```
// C++
DumpValToFile (const Val& thing_to_serialize,
           const string& output_filename,
           Serialization_e how_to_dump_the_data);

LoadValFromFile (const string& input_filename,
             Val& result,
             Serialization_e how_data_was_dumped); 
```

我相信参数 Val& 是您传递需要腌制的对象的地方

这些工具所做的是将对象[序列化](http://en.wikipedia.org/wiki/Serialization#C_and_C.2B.2B)，以便可以轻松地将其存储在硬盘上。

我从来没有亲自使用过这个工具，但是我在 python 中使用过类似的东西，所以我建议先在 Python 中尝试酸洗东西。谷歌“python pickle”以获取更多信息。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-05T15:05:52.397

我认为您实际上只想“命名”*极*少数可能的 2^24 8 位 RGB 值，`std::map`您的朋友也是：

```
std::map<int, string> colors;

colors[0x000000] = "Black";
...
colors[0xFFFFFF] = "White"; 
```

您可以从这里开始使用 HTML 颜色名称：http: [//www.w3schools.com/html/html_colornames.asp](http://www.w3schools.com/html/html_colornames.asp)

您还需要编写一个“findNearest”函数（当然，除非您实际上有 1600 万个不同的颜色名称）。您`findNearest`将计算每个命名颜色和目标颜色之间在 RGB 空间中的距离。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-03-05T14:58:11.317

我会`std::map`在程序开始时将其全部读入 a 。然后使用该地图进行快速查找。如果读取文本文件需要很长时间，请考虑将其转换为某种二进制表示。为每次查找解析文本文件会很慢。

如果您想要双向查找，即从值到名称以及从名称到值。检查`boost::multi_index` [http://www.boost.org/doc/libs/1_53_0/libs/multi_index/doc/index.html](http://www.boost.org/doc/libs/1_53_0/libs/multi_index/doc/index.html) 或`boost::bimap` [http://www.boost.org/doc/libs/1_53_0/libs/bimap/doc/html /index.html](http://www.boost.org/doc/libs/1_53_0/libs/bimap/doc/html/index.html)

我还会考虑使用 boost::serialization 在运行之间存储和检索地图的数据。 [http://www.boost.org/doc/libs/1_53_0/libs/serialization/doc/index.html](http://www.boost.org/doc/libs/1_53_0/libs/serialization/doc/index.html)

# jquery - Jquery DatePicker 和必填字段验证器

> ID：15226579
> 
> 赞同：4
> 
> 时间：2013-03-05T14:40:25.057
> 
> 标签：jquery, asp.net, jquery-ui

我正在使用asp.net，我有一个gridview，在gridview 里面我有一个页脚模板。在页脚模板中。

```
 <FooterTemplate>
                        <asp:ImageButton ID="imgbtnAddxxxx" runat="server" CommandName="Insert" ImageUrl="/Style%20Library/Images/add.png" ToolTip="New Record" ValidationGroup="GridViewFooterRowGroup" />
                        </FooterTemplate>

<asp:TemplateField HeaderText="Needed-By">
                        <EditItemTemplate>
                          <asp:TextBox ID="txtNeededBy" runat="server" Text='<%#Eval("NeedBy") %>' BackColor="LightSkyBlue" ForeColor="Black" ReadOnly="true"/>
                          <asp:RequiredFieldValidator ID="reditNeededBy" runat="server" ControlToValidate="txtNeededBy" Text="*" Display="Dynamic" ValidationGroup="GridViewDataRowGroup" />
                        </EditItemTemplate>

                        <ItemTemplate>
                           <asp:Label ID="lblNeededBy" runat="server" Text='<%#Eval("NeedBy") %>'/>
                        </ItemTemplate>

                        <FooterTemplate>
                        <asp:TextBox ID="txtftrNeededBy" runat="server" onchange="abc();" />
                         <asp:RequiredFieldValidator ID="rfvNeededBy" runat="server" ControlToValidate="txtftrNeededBy" Text="*" Display="Dynamic" ValidationGroup="GridViewFooterRowGroup" />
                        </FooterTemplate>

                     </asp:TemplateField> 
```

我有一个如下所示的 jquery 代码来显示日历拾取。

```
<script type="text/javascript">
    $(function () {
        BindEvents();
    });

    $(function () {
        var prm = Sys.WebForms.PageRequestManager.getInstance();
        prm.add_endRequest(function () {
            BindEvents();
        });
    });

    function BindEvents() {

        var $ = jQuery.noConflict();

        $('input[id*="txtftrNeededBy"]').datepicker({
            dateFormat: 'dd-M-y', changeMonth: true, minDate: 0,
            onSelect: function () { },
            onClose: function (dateText) {
                var txt = $("#<%=hdnNeedByDate.ClientID%>");
                txt.val(dateText);
            }
        });

        $('input[id*="txtNeededBy"]').datepicker({
            dateFormat: 'dd-M-y', changeMonth: true, minDate: 0,
            onSelect: function () { },
            onClose: function (dateText) {
                var txt = $("#<%=hdnNeedByDate.ClientID%>");
                txt.val(dateText);
            }
        });

        $('input[id*="txtftrQty"]').autoNumeric({ aSep: '', vMax: '999999', vMin: '0', wEmpty: 'zero', mDec: null });
        $('input[id*="txtQty"]').autoNumeric({ aSep: '', vMax: '999999', vMin: '0', wEmpty: 'zero', mDec: null });
    } 
</script> 
```

当日历返回并且用户按下添加按钮时，验证组会检查用户是否选择了日期..如果用户在里面输入日期并单击添加没有任何反应但是如果我删除 requirefieldvalidator 它可以工作......

带有 jquery datepicker 的 requiredfield 验证器有什么问题吗？如何解决这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-26T17:53:43.313

我自己也遇到了这个问题。我发现了这个错误报告[（链接）](https://code.google.com/p/jquery-datepicker/issues/detail?id=56)

这里有两个解决方法。

为日期选择器的 onSelect 事件注册一个空处理程序

```
$(".myDatePickerClass").datepicker({onSelect: function() {}}) 
```

或者

将 EnableClientScript="false" 添加到您的验证器

```
<asp:RequiredFieldValidator runat="server" EnableClientScript="false"... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-05T00:29:25.257

这对我有用。我希望它也能帮助你。

```
 $(function () {

        $("#<%= txtSendDate.ClientID %>").datepicker({
            onSelect: function (dateText, inst) { }
        });

    }); 
```

# php - 当我尝试通过 $_POST 检索图像坐标时，为什么会出现错误？

> ID：15226580
> 
> 赞同：0
> 
> 时间：2013-03-05T14:40:33.987
> 
> 标签：php, imagemap

在尝试处理图像映射时，如果我尝试通过`$_POST`. 我不明白原因。

对于以下内容`form`：

```
<form method='post' action='action_script.php'>
    <input name='coordinates' type='image' src='./rabbits.jpg' />
</form> 
```

这是`action_script.php`脚本：

```
<?php
echo "Coordinates : {$_POST['coordinates_x']} and {$_POST['coordinates_y']} "; 
```

这个脚本抛出一个错误，说`coordinates_x`并且`coordinates_y`是未定义的。但是，如果我用它替换`$_POST`它`$_REQUEST`可以正常工作并告诉坐标。为什么我使用的时候会报错`$_POST`？

*以下脚本不会产生错误：*

```
<?php
echo "Coordinates: {$_REQUEST['coordinates_x']} and {$_REQUEST['coordinates_y']}"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T14:48:28.967

那是你的完整代码吗？您似乎没有向我们展示提交按钮等。

但重要的是您假设一切顺利并已发布，永远不要假设任何内容，使用任意运算符实际检查是否发布了任何内容：

```
$xCord = isset($_POST['coordinates_x']) ? $_POST['coordinates_x'] : false;
$yCord = isset($_POST['coordinates_x']) ? $_POST['coordinates_x'] : false; 
```

而且，就像指出的那样，你真的应该做类似的事情

```
$xCord = isset($_POST['coordinates']) ? $_POST['coordinates'] : false; 
```

如果它真的是你可以剥离的东西，那么这不应该破坏数据。

现在您实际上可以检查它是否已成功发布，事实证明它是错误的，那么您只是做错了。

现在回声是有意义的

```
echo "Coordinates: $xCord and $yCord"; 
```

但话又说回来，我觉得你的形式有点时髦。尝试这种新方法并给我们完整的代码。

# c# - Excel 互操作无法写入 (HRESULT: 0x800A03EC)

> ID：15226581
> 
> 赞同：0
> 
> 时间：2013-03-05T14:40:34.430
> 
> 标签：c#, excel, office-interop, excel-interop

尝试在 Excel 互操作中执行此命令时出现异常 0x800A03EC

```
ws.get_Range("A2").Value= "=?9ABC" 
```

似乎互操作不喜欢以“=？”开头的字符串。我试图通过将计算模式设置为手动来解决这个问题，但不幸的是这不是解决方案。谁能告诉我我该怎么做？

谢谢，锦

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T14:48:31.270

`=`Excel 将以公式开头的值解释。因此，将其存储为`'=?9ABC`，因为它`'`告诉 Excel 将字符串解释为文本而不是公式。

# javascript - 静态点的视差效应？

> ID：15226582
> 
> 赞同：0
> 
> 时间：2013-03-05T14:40:34.813
> 
> 标签：javascript, jquery

我有一个想法，我想为一个项目实施。

页面的一部分将利用类似于此处的视差效果：

[http://stephband.info/jparallax/](http://stephband.info/jparallax/)

有一些区别：

1.  视差区域将是全宽并使用摄影而不是矢量图像；
2.  我想放置固定的工具提示区域，用户可以覆盖并获得更多信息。

有谁知道这是否可能？

我一直在看各种教程，并了解视差如何工作的基础知识；我可以看到的主要绊脚石是让工具顶部的悬停区域在它们引用的特定层上也是静态的，并且还跟随鼠标以获得视差效果，以便它们保持在正确的区域中。

# sql-server - 是否可以从未附加到 sql server 的 mdf 文件中读取数据库名称

> ID：15226585
> 
> 赞同：0
> 
> 时间：2013-03-05T14:40:47.867
> 
> 标签：sql-server

我正在运行一个批处理文件来缩小大量分离的数据库日志文件。我首先使用“default_database_name”附加数据库，然后缩小数据库，然后再次将其分离并移至下一个数据库。

然而，这完成了我所有的日志文件的缩小，然后我的所有数据库最终都具有相同的逻辑数据库名称。我试图避免这种情况。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T15:49:43.897

您可以看到此信息，但您必须使用十六进制编辑器才能看到它，对于我测试过的数据库，我使用十六进制编辑器打开了 MDF（我使用的是 HxD）并且数据库名称在偏移量附近可见00000E20-00000E30:

![十六进制截图](../Images/a6c121009721b90e0cdcbd0ab4565dd2.png)

# mysql - 如何使用代理键执行更新查询

> ID：15226598
> 
> 赞同：1
> 
> 时间：2013-03-05T14:41:08.900
> 
> 标签：mysql, database, performance, surrogate-key

我对数据库概念非常陌生，目前正在学习如何设计数据库。我有一个包含以下列的表格...

这是在mysql中：

```
1\. Names - text - unique but might change in future
2\. Result - varchar - not unique
3\. issues_id - int - not unique
4\. comments - text - not unique
5\. level - varchar - not unique
6\. functionality - varchar - not unique 
```

我不能选择上述任何列作为主键，因为它们将来可能会改变。所以我创建了一个自动增量 id 作为 names_id。我还有一个 GUI（一个 JTable），它显示这个表和用户更新 Result、issues_id 和基于 Names.Names 的评论这里是一个大文本列。我无法在 GUI 中显示 names_id，因为它在 GUI 中没有任何意义。现在，当用户在 GUI 中为 column2、3、4 提供输入后更新数据库时，我使用以下查询更新数据库，我无法在 where 子句中使用 names_id，因为 Jtable 的 row_id 与 names_id 不匹配，因为并非所有行被加载到 JTable 上。

```
update <tablename> set Result=<value>,issues_id=<value>,comments=<value> 
where Names=<value>; 
```

我可以更新数据库，但我想知道是否可以在不使用 PK 的情况下更新数据库。这效率如何？代理键在这里有什么作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:54:30.187

`where`使用不引用主键的条件来更新数据库是完全可以接受的。

不过，您可能想了解索引和约束。如果多行具有相同的名称，您的查询最终可能会更新多行。如果要确保它们是唯一的，则可以在列上创建唯一约束。

主键始终在该列上创建索引。该索引使访问快速。如果 上没有索引`name`，则更新将需要扫描整个表以查看所有名称。您可以通过在字段上建立索引来加快速度。

# visual-studio-2010 - Visual Studio 不允许我将拖放项目拖放到其中？

> ID：15226600
> 
> 赞同：61
> 
> 时间：2013-03-05T14:41:10.630
> 
> 标签：visual-studio-2010, file, visual-studio-2012, drag-and-drop

使用 Visual Studio 2010 双击时出现问题，例如配置文件 (*.config)。Visual Studio 会打开，但会给我一条关于参数的错误消息。如果我简单地尝试拖放一个 Visual Studio 通常可以读入的文件，该图标会给我“不可能的图标”吗？

我现在已经安装了 Visual Studio 2012 并且有同样的问题？！

这使我的工作变得更加困难，将文件拖放到 Visual Studio 中应该很容易，但事实并非如此？现在我必须使用文件菜单手动查找文件？

请注意，我在安装 Visual Studio 2012 之前已经重新安装了计算机。

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2013-03-05T14:54:00.787

在 Windows Vista 和更新的 Windows 资源管理器上以中等完整性级别运行。如果您以管理员身份运行 Visual Studio（高完整性级别），则出于安全原因，操作系统将禁用从资源管理器拖放到 Visual Studio。

您可以以普通用户身份运行 Visual Studio，也可以为 Visual Studio 2012扩展安装[VSCommands 。](http://visualstudiogallery.msdn.microsoft.com/a83505c6-77b3-44a6-b53b-73d77cba84c8/)它有几个功能可以帮助解决这个问题，例如：

*   提升的 Windows 资源管理器 - 看起来像 Windows 资源管理器但以提升的权限运行的小工具，允许拖放
*   目录资源管理器 - Visual Studio 中的工具窗口，它再次看起来像 Windows 资源管理器并允许拖放
*   以中等完整性运行 Visual Studio - 允许从 Windows 资源管理器拖放，但您将无法附加到其他用户运行的进程（例如 IIS）

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2014-01-31T18:03:09.567

如果您以管理员身份运行 VS，请改为拖放，在资源管理器中复制（ctrl+c，上下文菜单“复制”）文件选择，然后在 VS 中的选定节点上粘贴（ctrl+v，上下文菜单）

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2014-09-05T20:46:06.990

这让我发疯了。在我的 Visual Studio 解决方案中，我有两个使用 IIS 作为 Web 服务器的 Web 应用程序，因此我必须始终以管理员模式启动我的 Visual Studio。以管理员身份启动后，我无法将文件从资源管理器拖放到 Visual Studio。

### 解决方案：

1.  以管理员身份打开命令提示符（Windows 8.1 的快捷方式是`⊞ Win`+ `X`+ `A`）
2.  键入“explorer”，这将打开具有管理员权限的 Windows 资源管理器。

![CMD 管理员](../Images/36d435ce3099261c7935f8cff1552b4b.png)

现在您应该能够将任何文件从资源管理器拖放到 Visual Studio

![拖放](../Images/8f8903aceba59d4c6aca21d7382e74ba.png)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-05-17T00:06:52.060

如果您*完全*禁用 UAC ，您可以再次从任何地方拖放。为此，您不能使用控制面板中的滑块，因为这只会将 UAC 级别降低到 1。更改此注册表，重新启动，然后您可以再次像上帝一样使用您的计算机。

```
[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Policies\System]
"EnableLUA"=dword:00000000 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2013-09-17T18:29:41.780

我认为这个问题的主要目标是如何以舒适的方式将许多文件夹和文件添加到您的项目中。将文件拖放到项目中是一种解决方案，在某些情况下会失败。

另一个非常简单的方法是：

*   将新文件夹和文件复制到项目中您实际需要的位置
*   在 VS 中打开项目资源管理器，然后单击“显示所有文件”按钮
*   现在不属于您的项目的所有文件夹和文件都显示为白色
*   选择白色文件夹或文件，右键单击并选择“绑定到项目”
*   完毕

如果您以管理员身份运行 VS，这也是可能的。

玩得开心！

顺便说一句：我发现了这个问题，因为我在拖放方面遇到了同样的问题。我了解安全问题，但这是一个令人讨厌的功能。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2017-11-12T15:14:30.593

我正在使用这种最简单的方法。在管理员模式下运行 Visual Studio 时。当您需要拖放时，只需按 CTRL+O 在 Visual Studio 中打开文件浏览器，然后将该文件浏览器用作 Elevated Explorer 进行拖放。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-01-07T09:45:10.307

我有一个类似的问题，但我的问题有点不同。我试图从压缩文件夹中拖放文件。一旦我解压缩文件夹拖放又开始工作。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-01-28T11:47:19.720

我也遇到了这个问题，因为我在管理模式下打开 VS，默认情况下文件资源管理器不在管理模式下。

最终创建了一个 PowerShell 和 bat 脚本，以便在每次计算机启动时以管理员模式启动资源管理器。

admin.bat 文件：

```
@ECHO OFF
PowerShell.exe -Command "& {Start-Process PowerShell.exe -ArgumentList '-ExecutionPolicy Bypass -File ""%~dpn0.ps1""' -Verb RunAs}" 
```

admin.ps1 文件：

```
taskkill /f /im explorer.exe
start-process explorer.exe 
```

这些文件必须在同一个文件夹中。不管他们叫什么。运行 .bat 文件以管理员模式重新启动资源管理器，或者只是在启动文件夹中创建 .bat 文件的快捷方式；）可以隐藏脚本和 ps1 文件。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-02-05T13:10:09.337

在 Windows 8.1 上，更改注册表项：`Computer\HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Policies\System\EnableLUA`并设置`value = 0`.

# php - 在 PHP 中使用 Soap 客户端从 Web 服务获取 xml 数据

> ID：15226604
> 
> 赞同：0
> 
> 时间：2013-03-05T14:41:32.110
> 
> 标签：php, web-services, soap-client

我有一个网络服务，[链接](http://empblr.dyndns.org/CentralHomeDelivery_Mob/Service.asmx)

我正在`GetAllCategory`使用以下代码从其中一种方法中获取 xml 数据，

```
 $client = new SoapClient("http://empblr.dyndns.org/CentralHomeDelivery_Mob/Service.asmx?wsdl");
         $result = $client->GetAllCategory();
         print_r( $client); 
```

输出 xml 中有 3 个子节点，`<id> <name> <description>` 当我打印 $client 时，将打印来自所有节点的数据。我想知道的是两件事：

1.如何将每个节点的数据存储到每个数组中。

2.在另一种方法`GetAlladdress`中，我需要传递一个值，即用户ID。我该如何实现？

这是当 var_dumb, object(stdClass)[16] public 'GetAlladdressResult' => object(stdClass)[17] public 'schema' => string ' string '64336176asdf12345632256asdf 2ANDOLANA CIRCLEMysore

谢谢....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T14:51:03.373

如果返回值是一个简单的字符串，您可以使用

```
$xml = simplexml_load_string($client); 
```

现在可以按如下方式访问子项的值：

```
$xml->id 
```

你可以在这里获得更多信息：[http ://www.php.net/manual/en/book.simplexml.php](http://www.php.net/manual/en/book.simplexml.php)

# fortran - 如何计算任意高精度的数字？

> ID：15226606
> 
> 赞同：1
> 
> 时间：2013-03-05T14:41:35.900
> 
> 标签：fortran, arbitrary-precision, rounding-error

我写了一个简单的fortran程序来计算高斯常数：

```
program main

implicit none

integer :: i, nit
double precision :: u0, v0, ut, vt

nit=60
u0=1.d0
v0=sqrt(2.d0)
print *,1.d0/u0,1.d0/v0

do i=1,nit
  ut=sqrt(u0*v0)
  vt=(u0+v0)/2.d0
  u0=ut
  v0=vt
  print *,1.d0/u0,1.d0/v0
enddo

end program main 
```

4 次迭代后的结果为 0.83462684167407308。无论如何使用算术几何平均方法获得更好的结果？人们如何计算诸如 pi、欧拉常数等数字的多位数字？每个无理数都有特定的算法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-07T19:19:29.053

如果您的目标是在您的程序中插入一个常量值，最简单的解决方案是在网络上或书籍中查找该值。一定要为数值添加类型说明，其他 Fortran 会将其视为默认单精度。可以将 pi 写为`pi_quad = 3.14159265358979323846264338327950288_real128`-- 显示在常量上使用类型说明符。

如果要进行高精度计算，可以在编译器中使用一些高精度类型。许多编译器现在具有四倍精度。如果他们有 ISO_FORTRAN_ENV 模块的 Fortran 2008 版本，您可以通过 type 请求这个`real128`。

任意精度（用户指定的位数，到非常高的位数）不在语言范围内，可在库中使用，例如 MPFUN90，[http ://crd-legacy.lbl.gov/~dhbailey/mpdist/](http://crd-legacy.lbl.gov/~dhbailey/mpdist/)

是的，不同的常数有不同的算法。这是一个很大的话题。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-03-07T18:39:20.397

pi的解决方案：

```
 pi = 4.0d0 * datan(1.0d0) 
```

# charts - 寻找特殊的 Highcharts 图表

> ID：15226607
> 
> 赞同：0
> 
> 时间：2013-03-05T14:41:35.980
> 
> 标签：charts, highcharts, data-visualization, highstock

我正在寻找一种方法来绘制图表，其中数据由每个日期一个块表示。因此，如果有该日期的数据，则会出现一个彩色块，否则该位置将留空。目标是随着时间的推移对事件进行可视化。其中每个彩色块表示特定事件的发生。

有没有办法使用 Highcharts 和 Highstocks 时间滑块创建这样的图表。

假设我有事件类型`a`，`b`并且`c`结果应该是这样的。

```
|a| |a|       |a|
 - - - - - - - - 
|b|b|b|b|b|b|b|b|
 - - - - - - - - 
|c|   |c|
 -     - 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T16:41:42.443

我认为您正在寻找带有自定义形状作为标记的散点图。

示例如何做到这一点：

```
var chart = new Highcharts.Chart({
    chart: {
        renderTo: 'container',
        type: 'scatter',
        width: 200,
        height: 200
    },

    xAxis: {
        tickInterval: 1
    },
    series: [{
        data: [[0,1], [1,1], [2,1], [3,1], [4,1], [5,1]]        
    },{
        data: [[0,2],[2,2]]        
    },{
        data: [[1,3],[3,3]]        
    }]
}); 
```

和[jsFiddle](http://jsfiddle.net/3bQne/54/)

# ios - 如何从 Interface Builder 中设计的 UITableView 获取 UITableViewCell 引用

> ID：15226615
> 
> 赞同：0
> 
> 时间：2013-03-05T14:41:50.753
> 
> 标签：ios, uitableview

我在 Interface Builder 中创建了一个静态 UITableView。每个单元格都有正确的细节，我用一个值初始化了它们。此外，我为每个单元格定义了不同的标识符以使它们彼此不同。我的问题是，当我尝试修改或编辑任何单元格的正确细节时，我无法做到，因为我无法获得有效单元格的引用。有谁知道该怎么做？我正在尝试通过这种方式进行操作，但是每次我检查单元格引用值时，它都是空的，所以我无法编辑正确的细节......

```
NSString *identifier = @"idOfEachCell";
UITableViewCell *cell = [table dequeueReusableCellWithIdentifier:identifier];
cell.detailTextLabel.text = @"Changed!"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:54:05.297

为 ViewController 中的每个单元格创建一个属性：

```
@property (nonatomic) IBOutlet UITableViewCell *staticCell1;
@property (nonatomic) IBOutlet UITableViewCell *staticCell2;
... 
```

然后在 IB 中，通过控制从单元拖动到您的 ViewController 将静态单元链接到属性。现在您可以通过该属性完全访问单元格。

# objective-c - 在 Mac OS X 应用程序中使用 WebView 查看 HTTPS 页面

> ID：15226618
> 
> 赞同：2
> 
> 时间：2013-03-05T14:42:03.793
> 
> 标签：objective-c, macos, oauth, https, webkit

我正在尝试使用 StackExchange API 的隐式身份验证，因此我需要将用户发送到`https://www.stackexchange.com/oauth?client_id=...&scope=...&redirect_uri=...`（使用实际值而不是“...”）。很简单，只需在 Interface Builder 中拖出一个 WebView 并`-webView:didFinishLoadForFrame:`从`WebFrameLoadDelegate`协议中实现以跟踪我们是否`redirect_uri`已经在。*这*完全符合我的要求。但是 WebView 内部没有。来自的错误页面`stackexchange.com/oauth`：

> # 应用程序登录失败
> 
> 登录应用程序时出错。
> 
> **错误详情：**
> 
> 错误：invalid_request
> 错误描述：OAuth 请求必须通过 HTTPS

但我以以下方式开始 URL `https://`：

```
- (void)awakeFromNib {
    NSString *oauthAddress = @"https://www.stackexchange.com/oauth?client_id=...&scope=...&redirect_uri=...";
    [loginWebView setMainFrameURL:oauthAddress];
} 
```

我找不到任何说明您必须执行其他操作才能在标准 WebView 上启用 HTTPS 的来源。

它是由 WebView 内部引起的：在`-webView:didFinishLoadForFrame:`我`NSLog()`的当前 URL 中：

```
- (void)webView:(WebView *)webView didFinishLoadForFrame:(WebFrame *)webFrame {
    NSString *currentURL = [[[[webFrame dataSource] request] URL] absoluteString];

    NSLog(@"-webView:didStartProvisionalLoadForFrame:");
    NSLog(@"Current URL: %@", currentURL);

    if ([currentURL hasPrefix:@"https://stackexchange.com/oauth/login_success"]) {
        NSLog(@"We did login!");
    }
} 
```

输出：

```
2013-03-05 15:31:55.493 MacOverflow[2164:a0f] -webView:didStartProvisionalLoadForFrame:
2013-03-05 15:31:55.495 MacOverflow[2164:a0f] Current URL: http://stackexchange.com/oauth?client_id=...scope=...&redirect_uri=... 
```

**什么？！**WebKit 从 URL 的协议部分删除了“s”！如何阻止 WebKit 这样做？我在 Apple 的 WebView 文档（使用 Cmd+f）中搜索了“https”（0 个匹配项）、“ssl”（0 个匹配项）甚至“安全”（又是 0 个匹配项）。我有点卡在这里，但它必须是可能的。提供如此复杂的浏览器控件将是荒谬的，但迫使开发人员编写一个副本来支持`https`（这在当今 IMO 很常见）！

**如何使用 WebKit 的 WebView 发出 HTTPS 请求？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T18:05:28.527

这与 WebKit 无关。删除万维网。像这样从您的网址中获取`https://stackexchange.com/oauth`，您应该没问题。至少这对我有用。

# php - 无法安装 Recess php 框架

> ID：15226625
> 
> 赞同：0
> 
> 时间：2013-03-05T14:42:29.147
> 
> 标签：php, recess

我想使用凹槽 php 框架，但我无法安装它。每当我尝试时，它都会给我[这个](http://dreamer.in/space/error.png)错误。

上一个问题的答案之一是从库的 git repo 重新下载。我在 3 个不同的服务器上尝试了几次。

谁能帮我指出错误到底是什么，或者我该如何解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T01:40:48.753

看起来你有一个路由错误。它在安装的什么时候抛出这个错误？

1.  尝试检查您是否启用了 php mod_rewrtie
2.  确保您对文档中指定的目录具有写入权限
3.  确保 www-data 拥有您正在安装的 web 目录

如果您需要更多帮助，请告诉我。我真的很擅长 Recess

# php - 用另一个替换链接

> ID：15226630
> 
> 赞同：2
> 
> 时间：2013-03-05T14:42:47.290
> 
> 标签：php, regex

我正在努力替换每个链接中的文本。

```
$reg_ex = "/(http|https)\:\/\/[a-zA-Z0-9\-\.]+\.[a-zA-Z]{2,3}(\/\S*)?/";

$text = '<br /><p>this is a content with a link we are supposed to <a href="http://www.google.com">click</a></p><p>another - this is a content with a link we are supposed to <a href="http://www.amazon.com">click</a></p><p>another - this is a content with a link we are supposed to <a href="http://www.wow.com">click</a></p>';

if(preg_match_all($reg_ex, $text, $urls))
{

    foreach($urls[0] as $url)
    {

        echo $replace = str_replace($url,'http://www.sometext'.$url,  $text);
    }

} 
```

从上面的代码中，我得到了 3 倍相同的文本，并且链接被一一更改：每次只替换一个链接 - 因为我使用 foreach，我知道。但我不知道如何一次全部更换。你的帮助会很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T14:48:49.307

您不要在 html 上使用正则表达式。改用[DOM](http://php.net/dom)。话虽这么说，你的错误在这里：

```
$replace = str_replace(...., $text);
^^^^^^^^---                  ^^^^^--- 
```

您永远不会更新 $text，因此您会在循环的每次迭代中不断地丢弃替换。你可能想要

```
$text = str_replace(...., $text); 
```

相反，因此更改“传播”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T14:56:27.007

如果您希望最终变量包含所有替换项，请将其更改为类似这样...您基本上不会将替换后的字符串传递回“主题”。我认为这是您所期望的，因为理解这个问题有点困难。

```
$reg_ex = "/(http|https)\:\/\/[a-zA-Z0-9\-\.]+\.[a-zA-Z]{2,3}(\/\S*)?/";

$text = '<br /><p>this is a content with a link we are supposed to <a href="http://www.google.com">click</a></p><p>another - this is a content with a link we are supposed to <a href="http://www.amazon.com">click</a></p><p>another - this is a content with a link we are supposed to <a href="http://www.wow.com">click</a></p>';

if(preg_match_all($reg_ex, $text, $urls))
{
    $replace = $text;
    foreach($urls[0] as $url) {

        $replace = str_replace($url,'http://www.sometext'.$url,  $replace);
    }

    echo $replace;
} 
```

# jquery - 在某个图像处停止 jquery 循环

> ID：15226631
> 
> 赞同：1
> 
> 时间：2013-03-05T14:42:50.800
> 
> 标签：jquery, jquery-cycle

我正在使用 jquery 在页面加载时循环浏览图像，如下例所示：

[http://buildinternet.com/live/cycle-images/](http://buildinternet.com/live/cycle-images/)

查询

```
$('.diapositivas').cycle({
                fx:     'none',
                speed:   100,
                timeout: 70,
                cleartypeNoBg:true
            }).cycle("pause");

        function runThrough(){
                $('.start-page-img .diapositivas').addClass('active').cycle('resume');
            }

        runThrough(); 
```

HTML

```
<div class="start-page-img">
    <a href="http://website.com" class="link"></a>
    <ul class="diapositivas">
        <li><img src="image.jpg"/></li>
        <!-- Any other slides -->
    </ul>
</div> 
```

有没有办法可以在循环到达最后一张图像或某个图像时停止循环？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T15:09:43.540

只需使用[`autostop`选项](http://jquery.malsup.com/cycle/options.html)

JAVASCRIPT：

```
$('.diapositivas').cycle({
    fx:     'none',
    speed:   100,
    timeout: 70,
    autostop: 1
}).cycle("resume"); 
```

演示：http: [//jsfiddle.net/dirtyd77/SLGdE/7/](http://jsfiddle.net/dirtyd77/SLGdE/7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T14:45:29.483

查看您的`cycle()`插件是否提供任何回调并使用适当的回调来检查您所在的位置以及是否应该调用`cycle("pause")`.

# android - FragmentActivity：在哪里注册接收者，打开数据库

> ID：15226632
> 
> 赞同：0
> 
> 时间：2013-03-05T14:43:03.387
> 
> 标签：android, database, android-fragments, broadcastreceiver, android-fragmentactivity

我有一个带有不同片段作为选项卡的 FragmentActivity。

一个 Tab 需要监听一个 BroadcastReceiver。我应该在 Fragment 还是在固有的 FragmentActivity 中注册/注销接收器。

另一个选项卡适用于数据库。同样的问题：在哪里打开/关闭数据库？

另外：合适的方法是什么？onResume() 用于注册和打开， onPause() 用于取消注册和关闭？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T14:59:54.390

在 Fragments 的 onAttach(Activity) 方法中注册您的 BroadcastReceivers，并在 onDetach() 中取消注册它们。对于数据库，使用 ContentProviders 和 LoaderManager 可能是明智的（如果您使用的是支持库，则为 SupportLoaderManager）。

# c# - 复选框值 true 或 false 替代 cshtml 中的字符串

> ID：15226633
> 
> 赞同：0
> 
> 时间：2013-03-05T14:43:04.303
> 
> 标签：c#, html, razor, checkbox

是否有另一种更“正确”的方法可以将复选框的值转换为布尔值。

我的cshtml代码：

```
@{
    Page.Title = "";
    Layout = "~/_Layout.cshtml";

    bool checked = false;

    if(isPost)
    {
        if(Request["chkbx"] == "on")
        {
            checked = true;
        }
    }
}

<div>
    <input type="checkbox" name="chkbx" />
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T14:57:25.977

在 ASP.NET MVC Razor 视图中，通常不应该与`Request`.

由（最好使用）`Controller`创建一个`ViewModel`对象，然后将创建的对象传递给.`Request``ModelBinding``View`

但是，如果您不愿意改变`ViewModel`路径：

您可以使用 Razor 的内置 HTML Helpers： `@Html.CheckBox("chkbx", checked)`

或者，如果您更喜欢手动编写 HTML 元素，这可能看起来更简洁： `<input type="checkbox" name="chkbx" @(checked ? "checked" : "") />`

# .net - 如何退出 VSTO 加载项

> ID：15226636
> 
> 赞同：3
> 
> 时间：2013-03-05T14:43:11.640
> 
> 标签：.net, vsto, outlook-addin

有没有比抛出异常更好的方法从加载项代码中关闭 Outlook 2010 的 VSTO 加载项？
我不喜欢抛出异常，因为 Outlook 可能认为我的加载项不稳定。

---编辑：---
关闭我的意思是停止执行加载项代码并隐藏其 UI 或停用。但我希望在重新启动 Outlook 后启用它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T02:45:23.687

当你在 VS2010 中创建你的 VSTO 项目时，下面的代码应该会自动生成在你的`ThisAddIn.cs`. 如果没有，您可能想自己添加它们。

```
/// <summary>
/// Required method for Designer support - do not modify
/// the contents of this method with the code editor.
/// </summary>
private void InternalStartup()
{
     this.Startup += new System.EventHandler(ThisAddIn_Startup);
     this.Shutdown += new System.EventHandler(ThisAddIn_Shutdown);
}

private void ThisAddIn_Shutdown(object sender, System.EventArgs e)
{
     //execute your code here, e.g. output some values to a text file 
} 
```

您可以将代码放在 ThisAddIn_Shutdown 事件中，并仅在加载项关闭时执行它。

编辑：这是 MSDN 所说的：

> 从 Outlook 2010 开始，默认情况下，Outlook 不会向加载项发出正在关闭的信号。具体来说，Outlook 在快速关机期间不再调用 IDTExtensibility2 接口的 OnBeginShutdown 和 OnDisconnection 方法。同样，使用 Microsoft Visual Studio Tools for Office 编写的 Outlook 加载项在 Outlook 关闭时不再调用 ThisAddin_Shutdown 方法。

更多细节在这里：http:
[//msdn.microsoft.com/en-us/library/office/ee720183.aspx#OL2010AdditionalShutdownChanges_AddinShutdownChangesinOL2010Beta](http://msdn.microsoft.com/en-us/library/office/ee720183.aspx#OL2010AdditionalShutdownChanges_AddinShutdownChangesinOL2010Beta)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-01T12:59:27.617

尝试这个：

```
public void UnloadAddInManually()
{
    //Try find our Add-In...
    foreach (COMAddIn comAddIn in this.Application.COMAddIns)
    {
        if (comAddIn.ProgId.Contains("< ADDIN_PROG_ID >"))
        {
            //Found Add-In: Unload it...
            comAddIn.Connect = false;
            break;
        }
    }
} 
```

这对我来说是在 EXCEL 中工作的。

注意：当您在办公室主机应用程序的“设置 > 加载项 > COM-加载项”下查看时，您可以找到您的 <ADDIN_PROG_ID >。

# c# - Unity对象解析windows服务的最佳实践

> ID：15226638
> 
> 赞同：1
> 
> 时间：2013-03-05T14:43:13.637
> 
> 标签：c#, windows-services, unity-container

我有一个 Windows 服务，它会一直循环直到它停止。每个循环后有 15 秒的线程间隔。我正在使用统一容器来解析对象，如下所示：

```
var processes = ProcessConfigurationSection.GetProcesses();
while (!_stopped)
{
    try
    {
        foreach (var process in processes)
        {
            var worker = new Worker(DiContainer.UnityContainer.Resolve<IProcessDao>());
            worker.RunProcess(process.Name, process.StoredProcedure, process.BatchSize);
        }
        Thread.Sleep(_interval);
    }
    catch (Exception ex)
    {
        Log.LogEvent(...);
    }
} 
```

我应该在while循环内创建一个worker的实例（并解析对象）还是应该在while循环之外以提高性能？此外，这两种方法都有内存泄漏的可能性吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T15:26:33.737

您通常应该定义一个“每个请求”的范围。对于 Web 应用程序，这通常是一个持续 Web 请求生命周期的范围。但是对于 Windows 服务应用程序，仍然存在请求，只有您必须决定您看到的请求是什么。每个`RunProcess`调用都可以是单个请求（因此是单个范围），或者处理整个批次`processes`可以视为单个请求。

您不应该在循环之外定义此范围，因为范围生活方式通常会实现诸如在整个请求中重用的工作单元实现之类的东西。例如实体框架`DbContext`是一个工作单元。您不希望`DbContext`在应用程序的整个生命周期内重复使用相同的内容，因为当操作失败时，您可能会破坏`DbContext`整个应用程序，从而破坏整个应用程序。

Unity 的作用域是使用子容器实现的。您应该使用以下内容包装您的请求：

```
using (var child =
    DiContainer.UnityContainer.CreateChildContainer())
{
    var worker = new Worker(child.Resolve<IProcessDao>());
    worker.RunProcess(process.Name, process.StoredProcedure,
        process.BatchSize);
} 
```

或者也许`using (var child`应该包装`foreach`. 这是你必须决定的事情。

# uitableview - 缩进 UITableView 标题标签不起作用

> ID：15226639
> 
> 赞同：0
> 
> 时间：2013-03-05T14:43:15.777
> 
> 标签：uitableview

我正在尝试创建一个标题标签并将其缩进，以便它出现在表格视图上方而不是与屏幕左侧齐平。我已经实现了以下代码，它改变了标题标签的外观，但不改变位置。

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section {

    UIView *headerView = [[UIView alloc] initWithFrame:CGRectMake(0,0,tableView.frame.size.width,30)];
    UILabel *headerLabel = [[UILabel alloc] initWithFrame:CGRectMake(10,0, headerView.frame.size.width, 30)];

    headerLabel.backgroundColor = [UIColor clearColor];
    headerLabel.textColor = [UIColor whiteColor];
    headerLabel.shadowColor = [UIColor grayColor];
    headerLabel.shadowOffset = CGSizeMake(0.0, 1.0);
    headerLabel.font = [UIFont boldSystemFontOfSize:18];
    headerLabel.text = @"Header Label";

    [headerView addSubview:headerLabel];
    return headerLabel;
} 
```

谁能看到我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T15:31:48.033

返回您的 headerView，而不是 headerLabel。这将解决你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T16:02:17.407

我建议您更改这行代码：

```
 UIView *headerView = [[UIView alloc] initWithFrame:CGRectMake(0,0,tableView.frame.size.width,30)];
 UILabel *headerLabel = [[UILabel alloc] initWithFrame:CGRectMake(10,0,     headerView.frame.size.width, 30)]; 
```

和：

```
 UIView *headerView = [[UIView alloc] initWithFrame:CGRectMake(0,0,100,30)];
 UILabel *headerLabel = [[UILabel alloc] initWithFrame:CGRectMake(10,0, 100, 30)]; 
```

然后增加或减少值 10 用于填充左侧，0 用于填充顶部...

希望帮助

# javascript - 只允许特定的设定值

> ID：15226640
> 
> 赞同：-3
> 
> 时间：2013-03-05T14:43:16.180
> 
> 标签：javascript

我有一个表格，我试图在提交时只允许某些值。
允许为 1-8、n 和空白。就这些。
我从 1-8 开始，但对于 n 和空白我不知道。

```
function check(form) {
    if (form.scores.value > 8 || form.scores.value <= 0) {
        self.alert(form.scores.value + " is an invalid value! Allowed values are 1 to 8, n and blank");
        form.scores.focus();
    }
} 
```

HTML

```
<input type="text" name="scores" id="scores" maxlength="1" size="2" value="<%= number %>" /> 
```

HTML：

```
<input type="button" onClick="check(this.form)" value="Edit" /> 
```

请帮忙

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:47:43.450

请参阅下面的重构和修复。

```
<script>

function check(form_field)
{

  var allowed = /^[1-8n\s]{1}$/;

  var field = document.getElementById(form_field).value;

  if (field.match(allowed)) {
    document.myform.onsubmit = function() {
     return true;
    }
  } else if (field.length == 0) {
    document.myform.onsubmit = function() {
     return true;
    }
  } else {
   alert(field + " is an invalid value! Allowed values are 1 to 8, n and blank");
  }

}

</script>

<form name="myform" onsubmit="return false">

<input type="text" name="scores" id="scores" maxlength="1" size="2" value="<%= number %>"/>
<input type="submit" onClick="check('scores')" value="Edit" />
</form> 
```

使用 javascripts 正则表达式来检查值。尽管重复一次的模式只是模式，但可能不需要“{1}”。

随意抓住正则表达式部分，因为我已经更改了 check() 函数的机制，因此它被传递到表单字段 ID 并从中识别值。

它确保仅在条件都满足时才提交表单。

编辑：
或者查看[列表框](http://plugins.jquery.com/listbox/)以获取一个不错的 jquery 插件来执行此操作（如@Ark 所述）

希望有帮助

# python - python打开网页并获取源代码

> ID：15226643
> 
> 赞同：0
> 
> 时间：2013-03-05T14:43:16.940
> 
> 标签：python, pyqt

我们开发了一个基于 Web 的应用程序，具有用户登录等功能，我们开发了一个 python 应用程序，它必须在此页面上获取一些数据。

有什么方法可以沟通 python 和系统默认浏览器？我们的主要目标是用系统浏览器打开一个网页，并从中获取 HTML 源代码？我们尝试使用python webbrowser，成功打开网页，但无法获取源代码，并尝试使用urllib2，在这种情况下，我认为我们必须使用系统默认浏览器的cookie等，我不想这样做，因为安全性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:49:41.460

[https://pypi.python.org/pypi/selenium](https://pypi.python.org/pypi/selenium)

你可以尝试使用 Selenium，他是为了测试而做的，但没有什么能阻止你将它用于其他目的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T14:52:56.117

如果您的网站可以在没有 Javascript 的情况下导航，那么您可以尝试[Mechanize](https://pypi.python.org/pypi/mechanize)或[zope.testbrowser](https://pypi.python.org/pypi/zope.testbrowser)。这些工具提供了比 更高级别的 API `urllib2`，让您可以执行诸如跟踪页面上的链接和填写 HTML 表单之类的操作。

例如，这有助于导航使用基于 cookie 的身份验证和 HTML 表单进行登录的站点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T15:23:14.410

看看这个`nltk`模块——他们有一些用于查看网页和获取文本的实用程序。还有`BeautifulSoup`, 更详细一点。我目前正在使用这两种方法来抓取网页以获取学习算法——它们是非常广泛使用的模块，所以这意味着你可以在这里找到很多提示 :)

# iphone - 使用 NSDateComponents 转换组件

> ID：15226645
> 
> 赞同：0
> 
> 时间：2013-03-05T14:43:21.533
> 
> 标签：iphone, ios, objective-c

我有一个`NSDateComponent`可能包含不确定的组件。有时是几天，有时是几个小时，甚至是多种成分的混合物。我想做的是将我的任何内容转换`doItAgainComp`为秒。有没有办法使用`NSDateComponent`类来做到这一点。

我只是在数学上将它们全部划分出来，但对于月份组件我将无法这样做。

我已经搜索过并且无法找到任何关于此的内容。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T14:47:25.837

您应该从组件创建一个 NSDate，然后从中获取时间间隔：

```
NSDate * myDate = [[NSCalendar currentCalendar] dateFromComponents:doItAgainComp];
NSTimeInterval time = [myDate timeIntervalSince1970]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T14:50:22.783

只是一个想法，但也许您可以使用该`timeIntervalSince1970`方法来确定自 1970 年 1 月 1 日以来的秒数。因此，如果您将年份设置为 1970 年，然后将其转换`NSDateComponent`为`NSDate`using `NSCalendar`，`dateFromComponents:`它应该可以工作。

# jquery - jQuery AJAX POST 不适用于 Phonegap Build

> ID：15226646
> 
> 赞同：13
> 
> 时间：2013-03-05T14:43:23.343
> 
> 标签：jquery, ajax, cordova, post, build

我在使用 Phonegap Build 的 Android 应用程序中执行 jQuery AJAX POST 时遇到问题。我已经添加了：

1.  Config.xml：设置访问来源 *
2.  所有 HTML 文件：设置 $.support.cors = true; $.mobile.allowCrossDomainPages = true;
3.  在远程服务器上：设置 Access-Control-Allow-Origin、Access-Control-Allow-Headers 的值

我一直在寻找答案。我浏览了几篇提供相互矛盾的信息的帖子，并且尝试了很多提到的解决方案，但都没有奏效。

这是我正在尝试做的事情：

```
$.ajax({
  type: "POST",
  url: "http://mydomain.com/mypage.aspx/myweb...",
  data: "{'sEnquiryText':'" + $("#textareaEnq")[0].value + "'}",
  contentType: "application/json; charset=utf-8",
  dataType: "json",
  success: function(data) { // Response function
    if (data.d == "Success")
      $("#lblInfoMsg").html("Enquiry sent successfully !");
    else
      $("#lblInfoMsg").html(data.d);
  }
}); 
```

当安装在不同的域 (myseconddomain.com/mywebapp) 以及本地 IIS (localhost/mywebapp) 上时，它可以作为 Web 应用程序正常工作。但它不适用于使用 Phonegap Build 制作的 Android 应用程序。

如果有人可以调查这个问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-15T13:59:25.970

您需要添加到“res/xml/config.xml”中，例如

```
<access origin="http://127.0.0.1*"/> <!-- allow local pages -->

<access origin="https://example.com" />

<access origin="https://example.com" subdomains="true" />

<access origin=".*"/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-11T18:35:26.293

几个小时后我得出的答案是，Android WebView 中不支持 XHReq POST，至少在我正在使用的 Android 4.03 设备上的 PhoneGap 的默认设置中；tcpdump 显示请求确实来自设备，对于正确的主机和路径，但作为 GET，没有发布数据。我检查了白名单（phonegap 默认当前为“*”，所以不是问题），确保这不是“POST 缓存”问题（通过在请求 url 中添加 ?t=），并确保我只发出异步请求. 结果相同；POST 以 GET 形式出现，所有发布数据都将丢失。

[我的解决方案是切换到使用 GET 来执行此功能，以避免需要通过诸如“ http://mydomain.com/endpoint?post-data=url-encoded-data-here&t=timestamp-here](http://mydomain.com/endpoint?post-data=url-encoded-data-here&t=timestamp-here)之类的 url 发送帖子数据”。只有当我也可以控制它的服务器端时，这是可能的，如果数据以这种方式内联，则更改端点以允许以前仅通过 GET 进行 POST 操作。

更新：我回到这个问题，因为我真的希望 POST 出于其他原因工作（参见帖子 #21192670）。

POST 失败的*原因*是因为我的域的 MX 配置，以及在引用它时选择（或缺少）子域；我在 POST url 中使用了根域，但 MX 记录指向 wwww.mydomain.com，然后指向正确的 IP 地址。POST 没有通过该重定向。

# html - CSS：背景图像/颜色和容器不会在移动设备上拉伸全宽

> ID：15226652
> 
> 赞同：3
> 
> 时间：2013-03-05T14:44:07.570
> 
> 标签：html, css, mobile

在手机上查看：[http://goo.gl/vkhb0](http://goo.gl/vkhb0)

在所有桌面浏览器和多种分辨率上，网站都按应有的方式显示。顶部滑块图像居中，宽度为 1500 像素。下面的容器包装器是 960px 宽并且也是居中的。某些部分具有从左到右重复全宽的背景图像或颜色。

在移动设备上 - 幻灯片下方的容器不会扩展整个宽度。同样，重复的背景图像在屏幕的三分之一处停止。

这是一个 Wordpress 网站，我已经在头文件中有视口元数据。

任何建议都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T14:52:44.190

You should [media queries](http://css-tricks.com/snippets/css/media-queries-for-standard-devices/) ie:

```
/* iPads (portrait and landscape) ----------- */
@media only screen and (min-width : 768px) and (max-width : 1024px) {
 /* Styles */
} 
```

# iphone - Sqlite 数据库从文档文件夹中删除

> ID：15226655
> 
> 赞同：0
> 
> 时间：2013-03-05T14:44:10.937
> 
> 标签：iphone, ios, objective-c

我们有一个用于 iphone 的 iOS 应用程序，它有奇怪的行为。我将应用程序的一些数据存储在文档文件夹中的 SQLite 数据库文件中。每隔一段时间我就会意识到，当应用程序崩溃时，磁盘上的文件会被删除。而且我无法弄清楚为什么应用程序会这样做......有什么想法吗？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T14:49:23.833

确保将应用程序的所有文档保存到文档中应用程序的私有文件夹中。我用这个：

`[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainask, YES) lastObject];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T12:04:44.437

找到解决方案...如果我将数据库保存在缓存目录而不是文档目录中，它可以工作...:)

# c# - 在 C# 中需要计时器在 10 秒后运行

> ID：15226661
> 
> 赞同：-5
> 
> 时间：2013-03-05T14:44:19.317
> 
> 标签：c#

我正在使用套接字编程，我可以在一些时间间隔（例如 10 秒）后检查用户的实时连接。但目前，我不知道。我会怎么做。

请帮我。我将非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T14:47:56.163

从 MSDN[计时器类（系统计时器）](http://msdn.microsoft.com/en-us/library/system.timers.timer%28v=vs.71%29.aspx)：

下面是来自 MSDN 页面的示例

```
[C#] 
public class Timer1
{
    public static void Main()
    {
        System.Timers.Timer aTimer = new System.Timers.Timer();
        aTimer.Elapsed+=new ElapsedEventHandler(OnTimedEvent);
        // Set the Interval to 10 seconds.
        aTimer.Interval=10000;
        aTimer.Enabled=true;

        Console.WriteLine("Press \'q\' to quit the sample.");
        while(Console.Read()!='q');
    }

    // Specify what you want to happen when the Elapsed event is raised.
    private static void OnTimedEvent(object source, ElapsedEventArgs e)
    {
        Console.WriteLine("Hello World!");
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T14:46:27.930

包括：`using System.Threading;`

我不知道你在做什么（有代码给我们看？），但这是一般逻辑：

```
while (/*connection is active*/)
{
 //check connection
 Thread.Sleep(10000); //10 seconds
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T14:54:12.217

It really depends on what your doing, and how you are checking for the connection.

You can use the Threading.sleep(); a timer, or depending on what your doing you might be able to use an event handler based off of connects / disconnects...

# mysql - #1064 - 第 3 行的 SQL 语法 '(14) NOT NULL, `ID_MEMBER` mediumint(8) unsigned NOT NULL default '0', `ip` '有错误

> ID：15226665
> 
> 赞同：1
> 
> 时间：2013-03-05T14:44:25.317
> 
> 标签：mysql, sql, create-table

我收到此错误：

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds 
to your MySQL server version for the right syntax to use near '(14) NOT NULL, 
`ID_MEMBER` mediumint(8) unsigned NOT NULL default '0', `ip` ' at line 3 
```

当我运行这个脚本时：

```
 CREATE TABLE IF NOT EXISTS `MVElog_online` (
  `session` varchar(32) NOT NULL default '0',
  `logTime` timestamp(14) NOT NULL,
  `ID_MEMBER` mediumint(8) unsigned NOT NULL default '0',
  `ip` int(10) unsigned NOT NULL default '0',
  `url` text NOT NULL,
  PRIMARY KEY  (`session`),
  KEY `logTime` (`logTime`),
  KEY `ID_MEMBER` (`ID_MEMBER`)
) ENGINE=MyISAM; 
```

错误是什么意思，我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T14:45:16.367

`timestamp`不应该有长度，（`timestamp`不是`timestamp(14)`）

```
CREATE TABLE IF NOT EXISTS `MVElog_online` (
  `session` varchar(32) NOT NULL default '0',
  `logTime` timestamp NOT NULL,                 -- HERE
  `ID_MEMBER` mediumint(8) unsigned NOT NULL default '0',
  `ip` int(10) unsigned NOT NULL default '0',
  `url` text NOT NULL,
  PRIMARY KEY  (`session`),
  KEY `logTime` (`logTime`),
  KEY `ID_MEMBER` (`ID_MEMBER`)
) ENGINE=MyISAM; 
```

# c# - 使用 StoryQ 修改或配置输出

> ID：15226666
> 
> 赞同：1
> 
> 时间：2013-03-05T14:44:26.820
> 
> 标签：c#, testing, storyq

[我在StoryQ 讨论板上](http://storyq.codeplex.com/discussions/435434)发布了这个问题，但是通过查看对其他问题的（缺乏）回应，那里的活动充其量似乎很少。我想我会让这里的每个人都试一试。

有没有办法修改或配置输出（输出窗口和文件）以包含自定义字符串？例如，我的一个故事要求抛出一个特定的异常。为此，我捕获异常并将其保存，然后在单独的方法中测试它是否为非 null 且属于所需类型。我希望能够将异常的类型附加到输出（很像参数被附加到方法调用）。

例如

```
.Then(ExceptionIsThrown<ArgumentNullException>) 
```

将导致以下输出

```
then exception is thrown (ArgumentNullException) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T16:29:00.290

感谢[Giorgio Minardi](https://stackoverflow.com/users/482111/giorgio-minardi)指导我研究**StoryQ.Formatting**命名空间。在那里我发现我可以使用一个简单的属性来覆盖方法格式。

API 提供了一个`OverrideMethodFormatAttribute`（从抽象类子类化`MethodFormatAttribute`），如果您想使用特定的字符串常量，它可以工作，但 C# 不喜欢该方法在属性中的类型参数。`T`由于in 属性，这不会编译：

```
[OverrideMethodFormat(string.Format("exception is thrown ({0})", typeof(T).Name))]
private void ExceptionIsThrown<T>() where T : Exception
{
    ...
} 
```

解决方案是创建另一个`MethodFormatAttribute`子类，专门搜索泛型类型的方法并输出它们。该子类如下：

```
public class GenericMethodFormatAttribute : MethodFormatAttribute
{
    private readonly string _textFormat;

    public GenericMethodFormatAttribute()
    {
        _textFormat = null;
    }

    public GenericMethodFormatAttribute(string textFormat)
    {
        _textFormat = textFormat;
    }

    public override string Format(MethodInfo method,
                                  IEnumerable<string> parameters)
    {
        var generics = method.GetGenericArguments();
        if (_textFormat == null)
        {
            var genericsList = string.Join<Type>(", ", generics);
            return string.Format("{0} ({1})",
                                 UnCamel(method.Name),
                                 genericsList);
        }
        return string.Format(_textFormat, generics);
    }
} 
```

用法几乎与提供的属性类似，只是您可以选择提供格式字符串而不是字符串常量。省略格式字符串 un-camel-cases 方法名称就像默认行为一样。

```
[GenericMethodFormatAttribute]
private void ExceptionIsThrown<T>() where T : Exception
{
    ...
} 
```

这使我可以在源代码中声明属性，而不必接触 StoryQ 代码。10 分给 StoryQ 的可扩展性！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T15:07:43.023

最好的办法是查看 StoryQ 的来源，尤其是**StoryQ.Formatting**命名空间。要获得特定的输出，您应该遵循框架中使用的 FluenInterface 模式并编写自己的方法，类似于`ThenExceptionIsThrown(Exception ex)`故事中的其他方法并将其链接起来。

# c - 每次 GCC 进行优化后获取汇编代码？

> ID：15226668
> 
> 赞同：12
> 
> 时间：2013-03-05T14:44:35.943
> 
> 标签：c, optimization, gcc, assembly, compiler-construction

来自Wikipedia 上的[优化编译器，](http://en.wikipedia.org/wiki/Optimizing_compiler)

> 编译器优化通常使用**一系列优化转换**来实现，这些算法采用程序并对其进行转换，以生成使用较少资源的语义等效输出程序。

并且 GCC 有[很多](http://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html)优化选项。

我想研究在使用不同标志（如, ,等`-S`）编译时 GCC 执行的每次优化后生成的程序集（给出的程序集） 。`-O1``-O2``-O3`

我怎样才能做到这一点？

编辑：我的输入将是 C 代码。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-05T15:25:43.337

**可以使用`-fdump-tree-all`switch将**中间表示保存到文件中。****

 **有更多细粒度的`-fdump`开关可供使用。

详见 gcc 手册。

为了能够阅读这些表示，[请查看 GCC 内部手册](http://gcc.gnu.org/onlinedocs/gccint/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T15:05:06.757

`gcc -S`(**大写 S** )

提供 asm 输出，但汇编器可以改变一些东西，所以我更喜欢只制作一个对象

`gcc -c -o myfile.o myfile.c`

然后拆卸

`objdump -D myfile.o`

了解这没有链接，因此**外部分支目标和其他外部地址**将具有占位符而不是实数。如果您想查看优化编译时没有优化 (-O0)，然后使用 -O1 然后 -O2 和 -O3 编译，看看是否有任何变化。您还可以使用其他优化标志。要查看差异，您需要使用和不使用标志进行编译并自己比较差异。

*diff 不起作用，您会看到原因（寄存器分配更改）。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T16:24:09.043

虽然可以获取一小段代码，`-S`并使用各种选项对其进行编译，但困难在于理解实际发生了什么变化。只需稍加改动即可使代码完全不同 - 一个变量进入寄存器意味着寄存器不再可用于某些东西，从而对函数中的所有剩余代码造成连锁反应。

我今天早些时候比较了两个几乎相同的函数的相同代码（关于 C++ 的一个问题），源代码有一个差异。在一个 for 循环中使用变量作为终止条件的一项更改导致了多行汇编代码更改。因为编译器决定以不同的方式排列寄存器，为一个主要变量使用不同的寄存器，然后其他所有内容都因此而改变。

我已经看到向函数添加小的更改将其从内联变为不内联的情况，这反过来又对调用该代码的程序中的所有代码进行了重大更改。

所以，是的，无论如何，用不同的优化编译非常简单的代码，并使用 -S 来检查编译器生成的代码。然后比较不同的变种，看看它有什么效果。但除非您习惯于阅读汇编代码，并了解您真正要寻找的内容，否则通常很难只见树木不见森林。

还值得考虑的是优化步骤通常协同工作——一个步骤允许另一个步骤完成它的工作（内联导致分支合并、寄存器使用等）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-07T08:34:24.933

gcc/clang 对中间表示 (IR) 执行优化，可以在每次优化通过后打印。

对于 gcc，它是 (-fdump-tree-all) ' [http://gcc.gnu.org/onlinedocs/gcc/Debugging-Options.html](http://gcc.gnu.org/onlinedocs/gcc/Debugging-Options.html) '，而它是 (-llvm -print-after-all)。

Clang/gcc 提供了更多选项来分析优化。从命令行打开/关闭优化很容易（[http://gcc.gnu.org/onlinedocs/gcc-3.4.4/gcc/Optimize-Options.html](http://gcc.gnu.org/onlinedocs/gcc-3.4.4/gcc/Optimize-Options.html)，[http://llvm.org/docs /Passes.html](http://llvm.org/docs/Passes.html) )

使用 clang-llvm 您还可以列出使用命令行选项执行的优化通道 (-mllvm -debug-pass=Structure)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-05T14:49:26.623

用 switch 编译`-S`得到汇编代码。这应该适用于任何级别的优化。例如，要获取在`O2`mode 中生成的汇编代码，请尝试：

```
 g++/gcc -S -O2 input.cpp 
```

`input.s`将生成一个对应的，其中包含生成的汇编代码。对您想要的任何优化级别重复此操作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-08-03T01:50:10.043

# 解决方案1：

> gcc -O1 -S test.c（大写O和大写S）

# 解决方案2：

这个[网站](http://gcc.godbolt.org/)也可以帮助你。您可以使用`-O0`, `-O1`, .. 任何合适的*编译器选项*来获得您想要的。

**该站点的示例：（**由两种解决方案测试）

```
 void maxArray(double* x, double* y) {
    for (int i = 0; i < 65536; i++) {
       if (y[i] > x[i]) x[i] = y[i];
    }
 } 
```

*   编译器选项 `-O0`：

结果：

```
maxArray(double*, double*):
pushq   %rbp
movq    %rsp, %rbp
movq    %rdi, -24(%rbp)
movq    %rsi, -32(%rbp)
movl    $0, -4(%rbp)
jmp .L2

.L5:

movl    -4(%rbp), %eax
cltq
leaq    0(,%rax,8), %rdx
movq    -32(%rbp), %rax
addq    %rdx, %rax
movsd   (%rax), %xmm0
movl    -4(%rbp), %eax
cltq
leaq    0(,%rax,8), %rdx
movq    -24(%rbp), %rax
addq    %rdx, %rax
movsd   (%rax), %xmm1
ucomisd %xmm1, %xmm0
jbe .L3
movl    -4(%rbp), %eax
cltq
leaq    0(,%rax,8), %rdx
movq    -24(%rbp), %rax
addq    %rax, %rdx
movl    -4(%rbp), %eax
cltq
leaq    0(,%rax,8), %rcx
movq    -32(%rbp), %rax
addq    %rcx, %rax
movq    (%rax), %rax
movq    %rax, (%rdx)

.L3:

addl    $1, -4(%rbp)

.L2:

cmpl    $65535, -4(%rbp)
jle .L5
popq    %rbp
ret 
```

*   编译器选项`-O1`：

结果：

```
maxArray(double*, double*):
movl    $0, %eax
.L5:
movsd   (%rsi,%rax), %xmm0
ucomisd (%rdi,%rax), %xmm0
jbe .L2
movsd   %xmm0, (%rdi,%rax)
.L2:
addq    $8, %rax
cmpq    $524288, %rax
jne .L5
rep; ret 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-05T15:22:09.843

如果您想研究编译器优化并且对编译器不了解，请查看 Clang/LLVM 项目。Clang 是一个可以输出 LLVM IR 的 C 编译器，LLVM 命令可以单独应用特定的优化通道。

输出 LLVM IR：

```
clang test.c -S -emit-llvm -o test.ll 
```

执行优化传递：

```
opt test.ll -<optimization_pass> -S -o test_opt.ll 
```

编译到汇编：

```
llc test.ll -o test.s 
```**

# java - 从Java中的字符串中提取IP和坐标

> ID：15226670
> 
> 赞同：0
> 
> 时间：2013-03-05T14:44:40.707
> 
> 标签：java, regex

嗨，我有一个 Java 程序，它运行并查找我的机器的经度和纬度坐标，它将其输出为如下所示的长字符串，

> htt://maps.google.com/maps?q=52.258301,+-7.111900+(192.168.159.1Country:Ireland,City:Waterford-by htt://www.javaquery.com)&iwloc=A&hl=en

我现在要做的是只从这个字符串中提取：IP地址和两个坐标，我已经成功获取了IP地址但似乎无法获得这两个坐标。最终结果希望是

> 192.168.159.1,52.258301,+-7.111900

到目前为止，我使用这些表达式来获取 IP 地址

```
(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?) 
```

哪个工作得很好，然后尝试使用它来获取坐标

```
[0-9]+(\\.[0-9][0-9]?)? 
```

但它只获得第一个坐标，然后再次

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:53:04.420

try with this regex:

```
"(?<=\\?q=)([^(]*)\\(([\\d.]*)" 
```

`group(1)` is `52.258301,+-7.111900+`

```
group(2) is the ip 
```

**EDIT** add codes for the regex matching/extraction

```
String regex = "(?<=\\?q=)([^(]*)\\(([\\d.]*)";
        String s = "htt://maps.google.com/maps?q=52.258301,+-7.111900+(192.168.159.1Country:Ireland,City:Waterford-by htt://www.javaquery.com)&iwloc=A&hl=en";
        Pattern p = Pattern.compile(regex);
        Matcher m = p.matcher(s);
        if (m.find()) {
            System.out.println(m.group(2));
            System.out.println(m.group(1));
        } 
```

outputs:

```
192.168.159.1
52.258301,+-7.111900+ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T14:59:54.163

无需正则表达式即可提取两个坐标的方法可以是：

```
String str="http://maps.google.com/maps?q=52.258301,+-7.111900+(192.168.159.1Country:Ireland,City:Waterford-by htt://www.javaquery.com)&iwloc=A&hl=en";

int index_x=str.indexOf("?q=")+"?q=".length();
int index_x_end=str.indexOf(",");
int index_y=index_x_end+",".length();
int index_y_end=str.indexOf("+(");

System.out.println(str.substring(index_x, index_x_end));    //prints 52.258301
System.out.println(str.substring(index_y, index_y_end));    //prints +-7.111900 
```

# oracle - 使用 TYPE 属性检索 VARRAY 元素类型

> ID：15226677
> 
> 赞同：4
> 
> 时间：2013-03-05T14:44:57.657
> 
> 标签：oracle, plsql

我想通过类型属性或任何解决方法来检索元素 varray 存储的类型。

例如我们的类型是这样定义的

```
CREATE TYPE "READINGS" AS VARRAY (200) OF NUMBER(21, 6); 
```

（读数是带有类型元素的可变数组`number(21,6)`）

`READINGS`是表中的一列`INTERVALS`。是一个中央表，我们有执行 sql 存储过程`INTERVALS`的批处理。`INTERVALS`在存储过程中，我们有硬编码的变量声明映射到`READING`VArray 类型元素类型，`NUMBER(21, 6)`例如存储过程具有变量声明，如

```
CONSUMPTION NUMBER(21, 6); 
```

每当更改 Varray 定义或删除并以不同的大小和精度重新创建 varray 时，ex 而不是`number(21,6)`更改为`number(25,9)`我们需要更改所有批处理存储过程中的变量声明。我正在寻找的只是进行 CONSUMPTION 变量声明，参考 VArray 的元素类型。我想要这样的东西

```
CONSUMPTION INTERVALS.READINGS.COLUMN_TYPE%TYPE; 
```

（我想要这样的东西，参考varray存储的元素类型）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T16:40:20.140

你为什么要首先创建一个带有`VARRAY`列的表？使用外键创建一个单独的表通常更有意义，`READINGS`该外键可让您将行与`INTERVALS`表相关联。然后，您可以轻松地声明 type 的列`READINGS.COLUMN_NAME%TYPE`。

集合在 PL/SQL 中非常有用。我从未见过他们改进数据建模的标准规范化方法的案例。我见过多种情况，其中将集合合并到您的数据模型中最终会使您的数据模型更难使用，并且您的代码更难编写和维护。

如果您不想修复数据模型，您可以

*   声明一个`SUBTYPE`或一个类型的打包变量，`NUMBER(21, 6)`用作变量声明的类型。如果更改`VARRAY`类型的声明，则必须更改此定义。
*   创建具有单个属性 (a `NUMBER(21,6)`) 的对象类型并`VARRAY`基于该对象类型定义。然后，您可以在代码中声明对象类型的实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T17:07:28.830

这不是必需的解决方案，但您可以获得类型定义的字符串，以便在动态 SQL 中进一步使用它

```
SELECT 
   regexp_substr(text, 'VARRAY.*?OF\s+(.+?)(;|\s)*$', 1, 1, 'i', 1) 
FROM user_source 
WHERE name = 'READINGS' 
```

# ios - 根据方向正确显示子视图控制器

> ID：15226679
> 
> 赞同：1
> 
> 时间：2013-03-05T14:45:06.287
> 
> 标签：ios, uiviewcontroller, uiinterfaceorientation

我正在尝试创建一个 facebook 组件（UIViewController 的子类）来共享图片。现在可以在这里找到它的状态演示：http: [//jeremy.gabriele.free.fr/SO/rotatesubvc/](http://jeremy.gabriele.free.fr/SO/rotatesubvc/)

集成在 ViewController 中，我想这样使用它：

```
_shareSheet = [[FBSharePictureViewController alloc] initWithImage:self.currentImage.image andDelegate:self]; // Create the instance
[_shareSheet showWithinViewController:self]; // Actually display the sheet with animation
[_shareSheet hide]; // When needed, hide with animation 
```

视图架构：

```
- [UIView] view
-- [UIView] overlay, a full-screen black view (when showWithinViewController: is called, slightly fade in to alpha 0.8)
-- [UIView] _sheetViewContainer, contains the sheet
---- [UIView] topView, contains the cancel and post buttons + a centered label
---- [UIView] bottomView, contains the picture we will share + an UITextView the user can enter text in.
-- spinner, an UIActivityIndicatorView 
```

showWithinViewController 函数：

```
- (void)showWithinViewController:(UIViewController *)parentViewController {

  [parentViewController addChildViewController:self]; // So the parent will foward actions like rotation,...

  // I want it to match the full size of my screen, so if we have a transparent
  // status bar the overlay will be visible under the status bar too
  CGRect frameBefore = self.view.frame;
  [parentViewController.view addSubview:self.view]; // view frame = {{0, 0}, {320, 460}}
  self.view.frame = frameBefore; // view frame = {{0, -20}, {320, 480}}

  self.view.hidden = NO;

  [UIView animateWithDuration:0.4 animations:^{
    // _sheetViewContainer.frame is originally centered horizontally and y is offscreen
    _sheetViewContainer.frame = [self getSheetViewFinalPos]; // I want the sheet to be centered between the UINavigationBar and the UIKeyboard
    self.overlay.alpha = 0.8f;
  } completion:^(BOOL finished) {
    self.cancelButton.enabled = YES;
    self.postButton.enabled = YES;
  }]; 
```

}

getSheetViewFinalPos 函数：

```
- (CGRect)getSheetViewFinalPos {
  CGFloat keyboardHeight = UIInterfaceOrientationIsPortrait([[UIApplication sharedApplication] statusBarOrientation]) ? 216 : 162;
  CGFloat navBarHeight = UIInterfaceOrientationIsPortrait([[UIApplication sharedApplication] statusBarOrientation]) ? 44 : 28;

  CGRect f = _sheetViewContainer.frame;
  f.origin.y = navBarHeight + 20 + (self.view.frame.size.height-20-navBarHeight-_sheetViewContainer.frame.size.height-keyboardHeight)/2;
  return f;
} 
```

**现在我的问题：（**如果您访问了上面的链接，您可以预览 :)）

我想为我的组件找到根据方向自动调整其框架大小的最佳方式。

*   我已经尝试过`UIAutoresizingMask`，但它的行为非常奇怪，我无法成功使它工作：/。
*   我尝试使用`viewWillLayoutSubviews`方法，但如果我的视图被隐藏（当我旋转并且视图未显示时），这将不起作用。
*   我尝试使用 didRotateFromInterfaceOrientation 但是当父 ViewController 最初处于横向模式并且我显示我的组件时，它以纵向模式显示。

你将如何做到这一点？

# php - 无法声明 phptemplate_settings() - 尝试配置模板时出现 Drupal 错误

> ID：15226690
> 
> 赞同：0
> 
> 时间：2013-03-05T14:45:35.883
> 
> 标签：php, drupal

有两个模板，whitejazz 和修改后的 whitejazz (forumwhitejazz) - 两者都已启用。

我正在尝试配置修改后的 whitejazz，但出现此错误 - 这是什么意思？

我应该发布其他任何内容来帮助推断这一点吗？我完全被难住了——我在谷歌上搜索这个问题并没有给我任何可靠的线索。

这是在 Drupal 6.25 中

```
Fatal error: Cannot redeclare phptemplate_settings() (previously declared in /home/domain/public_html/drupal-6.25/sites/all/themes/whitejazz/theme-settings.php:3) in /home/domain/public_html/drupal-6.25/sites/all/themes/forumwhitejazz/theme-settings.php on line 135 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T16:15:20.087

问题是函数 phptemplate_settings() 被定义了两次。这会导致致命的 php 错误。

我建议做的是：

1.  在forumwhitejazz模板的根目录下创建文件theme-setting.php
2.  如示例中那样定义功能并在那里放置代码设置。

例子：

```
function forumwhitejazz_settings($saved_settings) {
  $form = array();

  $form['forumwhitejazz_example'] = array(
    '#type'          => 'checkbox',
    '#title'         => t('Use this sample setting'),
    '#default_value' => $saved_settings['forumwhitejazz_example'],
    '#description'   => t("This option doesn't do anything; it's just an example."),
  );

  return $form;
} 
```

# javascript - 在下一个函数中使用变量（Google 表格查询）

> ID：15226692
> 
> 赞同：0
> 
> 时间：2013-03-05T14:45:43.777
> 
> 标签：javascript, google-apps-script, global-variables

我有一个定义变量的函数，我想在下一个函数中使用该值。每个函数都有自己的查询。我想我要么需要将查询组合成一个函数，我不知道该怎么做，要么使用第一个查询设置一个全局变量，以便可以在第二个函数中引用它。

我一直在阅读全局变量，他们说这不是一个好习惯。有人可以帮助我如何将变量从一个函数重用到下一个函数，或者将两个查询结合起来，否则我应该考虑另一种 JS 方法？

```
google.setOnLoadCallback(queryValue1);
function queryValue1 () {
var query2 = new google.visualization.Query('https://spreadsheets.google.com/spreadsheet/tq?range=A2:A17&key=0AhCv9Xu_eRnSdFNhSzNQUFd3b1ZfRHgtQURINFpzeGc&gid=9');
query2.send(function (response) {
    if (response.isError()) {
        alert('Error in query2: ' + response.getMessage() + ' ' + response.getDetailedMessage());
        return;
    }
    var data1 = response.getDataTable();

    // fetch the data from range cell (row, column) into the span "bx"
    for (var z = 0; z <= 15; z++) {
    document.getElementById('a' + (z + 22)).innerHTML = data1.getValue(z, 0);
}
});
}

google.setOnLoadCallback(queryValue3);
function queryValue3 () {
var query3 = new google.visualization.Query('https://spreadsheets.google.com/spreadsheet/tq?range=B2:B17&key=0AhCv9Xu_eRnSdFNhSzNQUFd3b1ZfRHgtQURINFpzeGc&gid=10');
query3.send(function (response) {
    if (response.isError()) {
        alert('Error in query3: ' + response.getMessage() + ' ' + response.getDetailedMessage());
        return;
    }
var data3 = response.getDataTable();
var m1 = data3.getValue(0, 0);
var red22 = "<span style='color:#ff0000' ";
var yellow22 = "<span style='color:#FF9900' ";
var green22 = "<span style='color:#009900' ";
if (m1 <= 70)
{
m1 = red22;
}
else if (71 === m1 && m1 <= 89)
{
m1 = yellow22;
}
else if (m1 >=90)
{
m1 = green22;
}
console.log ("m1= " + m1)
var m1 = (m1 + a22 + "</span>");
console.log ("m1= " + m1)
});
} 
```

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T15:00:58.893

实际上，您进行了两个本质上并行的异步网络调用（`Query.send()`调用）。不知道哪个会先返回（或者一个是否会失败），因此无论您使用全局变量还是其他东西，依赖另一个回调的数据都是不可靠的并且是个坏主意。

我认为您可能只想链接两个异步调用，因此请尝试以下形式：

```
google.setOnLoadCallback(queryValue1);
function queryValue1 () {
  var query2 = new google.visualization.Query('https://spreadsheets.google.com/spreadsheet/tq?range=A2:A17&key=0AhCv9Xu_eRnSdFNhSzNQUFd3b1ZfRHgtQURINFpzeGc&gid=9');
  query2.send(function (response) {
    if (response.isError()) {
        alert('Error in query2: ' + response.getMessage() + ' ' + response.getDetailedMessage());
        return;
    }
    // Get the data you want to pass to query3 here
    // var query3Data = ...
    queryValue3(query3Data);
  });
}

function queryValue3(passedData) {
  var query3 = new google.visualization.Query('https://spreadsheets.google.com/spreadsheet/tq?range=B2:B17&key=0AhCv9Xu_eRnSdFNhSzNQUFd3b1ZfRHgtQURINFpzeGc&gid=10');
  query3.send(function (response) {
    if (response.isError()) {
        alert('Error in query3: ' + response.getMessage() + ' ' + response.getDetailedMessage());
        return;
    }
    // Do something with passedData here
    // ...
  });
} 
```

所以在第一个查询返回之前不要开始第二个查询。

# objective-c - CoreData 和 UITableView：在单元格中显示值

> ID：15226697
> 
> 赞同：0
> 
> 时间：2013-03-05T14:45:54.177
> 
> 标签：objective-c, core-data, uitableview

我正在使用 Core Data 和 Web 服务，我想将我的数据添加到我的表中，但我不知道我应该如何称呼它们，请你帮助我，因为当我使用这种方式时它不起作用。

这是我在 HTTP 类中更新数据库的方法

```
- (void)updateLocalCardsDataBase:(NSArray*) cardsArray
{
    //check if current user has cards in local database
    NSManagedObjectContext* managedObjectContext = [(AppDelegate*) [[UIApplication sharedApplication] delegate] managedObjectContext];

    for(NSDictionary *cardDic in cardsArray)
    {
        Card *card = [NSEntityDescription insertNewObjectForEntityForName:@"Card" inManagedObjectContext:managedObjectContext];
        card.remote_id = [NSNumber numberWithInt:[[cardDic objectForKey:@"id"] intValue]];
        card.stampNumber = [NSNumber numberWithInt:[[cardDic objectForKey:@"stampNumber"] intValue]];
        card.createdAt = [NSDate dateWithTimeIntervalSince1970:[[cardDic objectForKey:@"createdAt"] intValue]];

        [managedObjectContext lock];
        NSError *error;
        if (![managedObjectContext save:&error])
        {
            NSLog(@"Whoops, couldn't save: %@", [error localizedDescription]);
            NSLog(@"Failed to save to data store: %@", [error localizedDescription]);
            NSArray* detailedErrors = [[error userInfo] objectForKey:NSDetailedErrorsKey];
            if(detailedErrors != nil && [detailedErrors count] > 0) {
            for(NSError* detailedError in detailedErrors) {
                NSLog(@"  DetailedError: %@", [detailedError userInfo]);
            }
        }
        else {
            NSLog(@"  %@", [error userInfo]);
        }
    }
    [managedObjectContext unlock];
} 
```

这是我的桌子：

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath*)indexPath
{
    // NSManagedObjectContext* managedObjectContext = [(AppDelegate*) [[UIApplication sharedApplication] delegate] managedObjectContext];
    static NSString *CellIdentifier = @"CardsCell";
    CardCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];    
    if (cell == nil){
        NSArray *objects = [[NSBundle mainBundle] loadNibNamed:@"CardCell" owner:nil options:nil];
    for (id currentObject in objects)
    {
        if([currentObject isKindOfClass:[UITableViewCell class]])
        {
            cell = (CardCell *) currentObject;
            break;
        }
    }

    NSDictionary *f = [_cards objectAtIndex:indexPath.row];

    cell.stampId.text = [f objectForKey:@"stampNumber"];
    NSLog(@"%@fdssfdfddavds",[f objectForKey:@"stampNumber"]);
    cell.createdAt.text = [f objectForKey:@"createdAt"];
    cell.CardId.text = [f objectForKey:@"id"];
    return cell;
} 
```

编辑：

**我的问题是如何在`UITableView`**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T15:48:54.710

在调用之前`[tableView reloadData]`，您需要先获取数据源。您将获得一组数据模型，而**不是**`NSDictionary`. 您可以将我的示例方法（或最适合您的变体）放在最适合您需求的地方，但是这个方法不会过滤或排序模型，它只会获取所有模型。另外，我将把方法放在存储表格视图的视图控制器中：

```
-(NSArray*)getMycards {
    NSManagedObjectContext *context = [(AppDelegate*) [[UIApplication sharedApplication] delegate] managedObjectContext];
    NSEntityDescription *entityDescription = [NSEntityDescription entityForName:@"Card" inManagedObjectContext:context]; 
    NSFetchRequest *request = [[[NSFetchRequest alloc] init] autorelease];
    NSError *error;

    [request setEntity:entityDescription];

    NSArray *cards = [context executeFetchRequest:request error:&error];

    // now check if there is an error and handle it appropriatelty
    // I usually return 'nil' but you don't have if you don't want
    if ( error != nil ) {
        // investigate error
    }
    return cards;
} 
```

我建议在放置表格的视图控制器中创建一个属性`@property NSArray *cards`，这样会更容易管理。我做了一个假设（因为我没有关于您的视图控制器的其他信息，所以在您的视图控制器的头文件（`@property UITableView *tableView;`）中声明了一个名为“tableView”的属性，根据需要调整命名。

使用上述方法，当您想在加载表数据之前填充数组时：

```
// you put this block of code anywhere in the view controller that also has your table view
// likely in 'viewDidLoad' or 'viewDidAppear'
// and/or anywhere else where it makes sense to reload the table
self.cards = [self getMyCards];
if ( self.cards.count > 0 )
    [self.tableview reloadData];
else {
   // maybe display an error
} 
```

现在，你`cellForRowAtIndexPath`应该看起来像

```
-(UITableViewCell*tableView:tableView cellForRowAtIndexPath {
    UITbaleViewCell *cell = ...;
    // creating the type of cell seems fine to me
    .
    .
    .
    // keep in mind I don't know the exact make up of your card model
    // I don't know what the data types are, so you will have to adjust as necessary
    Card *card = self.cards[indexPath.row];

    cell.stampId.text = [[NSString alloc] initWithFormat:@"%@",card.stamp];
    cell.createdAt.text = [[NSString alloc] initWithFormat:@"%@",card.createdAt];
    // you might want format the date property better, this might end being a lot more than what you want
    cell.CardId.text = [[NSString alloc] initWithFormat:@"%@",card.id];

    return cell;
} 
```

Core Data 非常强大，我强烈推荐[Core Data 概述](http://developer.apple.com/library/mac/#referencelibrary/GettingStarted/GettingStartedWithCoreData/index.html#//apple_ref/doc/uid/TP40005316)，然后是[Core Data 编程指南](http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/CoreData/cdProgrammingGuide.html)。

# sql - 如何从 sql 表的现有列中获取部分数据？

> ID：15226711
> 
> 赞同：-4
> 
> 时间：2013-03-05T14:46:40.403
> 
> 标签：sql, substring

表名`Test`

列名 -`url`

数据（10行）：

```
1 http://example.com/mollybsims/

2 http://example.com/jillianmharris/

3 ...

4 ...

5 ... 
```

我只想要新列中的字符串“mollybsims”、“jillianmharris”等。我在更新查询中使用子字符串函数。但它究竟是如何完成的是我真正的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T15:31:01.737

你可以使用类似的东西：

*选择REPLACE(REPLACE(url,' [http](http://example.com/) ://example.com/ ',''),'/','')*

希望这是您所需要的。

# opengl - OpenGL 随机白点

> ID：15226713
> 
> 赞同：0
> 
> 时间：2013-03-05T14:46:51.767
> 
> 标签：opengl, rendering, visual-glitch

我正在尝试在白色背景中渲染几何。问题是几何内部出现随机白点。当我调整窗口大小时，白点会切换位置......在几何图形内随机出现和消失（当我调整窗口大小时）。

我进行了广泛的测试，发现这些点只出现在两个三角形之间的边缘。似乎两个三角形都无法渲染该像素（好像该像素不包含在任何三角形中），因此渲染了白色背景。我应该注意，这些边界上只有几个像素是白色的（不是全部）。它不是某种纹理过滤问题，因为即使我用纯色渲染多边形（我直接在着色器中设置）也会出现问题。

确实，这似乎是某种命中测试问题，其中 OpenGL 实现无法检测到两个相邻三角形边界上的某些像素。

我在配备 NVIDIA GeForce GTX 675MX 的 27 英寸 iMac 上运行此示例。我将在配备英特尔集成显卡的 MacBook 上测试同样的应用程序。

有人可以对这个话题有所了解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T16:39:30.873

谢谢@Damon。我解决了不是顶点不完全相同的问题。真正的问题是（通过设计）一些顶点需要停留在两个三角形之间的交点处。这导致 OpenGL 出现问题。解决方案是稍微向下移动顶点（在三角形内）并相应地调整纹理坐标。

非常感谢！

# servicestack - AssertRequiredRoles 的用途？

> ID：15226716
> 
> 赞同：2
> 
> 时间：2013-03-05T14:46:54.850
> 
> 标签：servicestack

我正在实现我自己的`RequiredRole`名为 的属性`RequiredAnyRole`，由此我传入一个列表，但用户只需处于其中一个角色中。我已经实现了我自己的方法`HasAnyRole`，它只是基于`.Any()`而不是`.All()`.

然后我重写了`Execute`使用我的方法而不是`HasAllRoles`. 问题是我不确定方法：`AssertRequiredRoles`在做什么？好像没有叫？

我是否应该覆盖它以使用`.Any()`而`.All()`不是？这是原始代码：

[https://github.com/ServiceStack/ServiceStack/blob/82241fc96e187d12f9db2556aea37cf327813adc/src/ServiceStack.ServiceInterface/RequiredRoleAttribute.cs](https://github.com/ServiceStack/ServiceStack/blob/82241fc96e187d12f9db2556aea37cf327813adc/src/ServiceStack.ServiceInterface/RequiredRoleAttribute.cs)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T15:33:00.880

AssertRequiredRoles 是一种静态辅助方法，可以由其他插件（如[RequestLogsService](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.ServiceInterface/Admin/RequestLogsService.cs#L73) ）使用，以确保仅向具有所需角色的用户授予访问权限。用作普通属性过滤器时不会调用它。

一旦覆盖 Execute，您就可以完全控制要执行的内容，因此您只需要覆盖您需要的内容。

# regex - Bash 正则表达式以匹配点和字符

> ID：15226720
> 
> 赞同：3
> 
> 时间：2013-03-05T14:47:02.897
> 
> 标签：regex, bash, shell

我正在尝试使用**=~**运算符针对 curl 响应字符串执行正则表达式模式。

我目前使用的模式是：

```
name\":\"(\.[a-zA-Z]+)\" 
```

然而，目前此模式仅提取仅包含字符 az 和 AZ 的值。我需要这种模式来获取包含“。”的值。字符和“@”字符。我该怎么做？

另外，有什么办法可以提高这种模式的性能吗？对字符串执行需要很长时间。

干杯。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-05-19T15:16:39.640

我最近在我的脚本中遇到了这个问题，该脚本根据我的 git 状态设置我的 bash 提示符，发现这是因为我想在表达式中匹配的其他东西（即连字符）的位置。

例如，我想匹配输出的某个部分`git status`，例如它所说的部分`"Your branch is ahead of 'origin/mybranch' by 1 commit."`

这是我原来的模式：

```
"Your branch is (ahead of|behind) '([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)' by ([0-9]+) commit". 
```

有一天，我创建了一个包含 a 的分支，`.`发现我的 bash 提示没有向我显示正确的内容，并将表达式修改为以下内容：

```
"Your branch is (ahead of|behind) '([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-.]+)' by ([0-9]+) commit". 
```

我希望它可以正常工作，但根本没有匹配。

看了很多帖子，才知道是因为连字符（`-`）的位置；我必须把它放在第一个方括号之后，否则它会被解释为一个范围（在这种情况下，它试图解释 的范围`_-.`，这是无效的，或者只是以某种方式使整个表达式崩溃。

当我将表达式更改为以下内容时，它开始工作：

```
"Your branch is (ahead of|behind) '([a-zA-Z0-9_-]+)/([-a-zA-Z0-9_.]+)' by ([0-9]+) commit". 
```

所以基本上我的意思是说它可能是你表达中的其他东西（比如我的连字符），它干扰了点和＆符号的匹配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T15:17:18.317

工作示例脚本：

```
#!/bin/bash
regex='"name":"([a-zA-Z.@]+)"'
input='"name":"internal.action.retry.queue@temp"'

if [[ $input =~ $regex ]]
then
    echo "$input matches regex $regex"
    for (( i=0; i<${#BASH_REMATCH[@]}; i++))
    do
        echo -e "\tGroup[$i]: ${BASH_REMATCH[$i]}"
    done
else
    echo "$input does not match regex $regex"
fi 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T14:51:08.840

只需添加点（'.'）和符号（'@'）：

```
name\":\"(\.[a-zA-Z.@]+)\" 
```

如果您不需要 URL 开头的强制点，请使用以下命令：

```
\"name\":\"([a-zA-Z.@]+)\" 
```

# python - Python 类成员延迟初始化

> ID：15226721
> 
> 赞同：26
> 
> 时间：2013-03-05T14:47:03.230
> 
> 标签：python, lazy-evaluation, lazy-initialization

我想知道初始化类成员的python方式是什么，但只有在访问它时才可以访问。我尝试了下面的代码，它正在工作，但有什么比这更简单的吗？

```
class MyClass(object):

    _MY_DATA = None

    @staticmethod
    def _retrieve_my_data():
        my_data = ...  # costly database call
        return my_data

    @classmethod
    def get_my_data(cls):
        if cls._MY_DATA is None:
            cls._MY_DATA = MyClass._retrieve_my_data()
        return cls._MY_DATA 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-03-05T14:50:47.163

您可以[在元类](http://docs.python.org/3/reference/datamodel.html#customizing-class-creation)[`@property`](http://docs.python.org/3/library/functions.html#property)上使用 a ：

```
class MyMetaClass(type):
    @property
    def my_data(cls):
        if getattr(cls, '_MY_DATA', None) is None:
            my_data = ...  # costly database call
            cls._MY_DATA = my_data
        return cls._MY_DATA

class MyClass(metaclass=MyMetaClass):
    # ... 
```

这`my_data`在类上创建了一个属性，因此昂贵的数据库调用被推迟到您尝试访问`MyClass.my_data`. 数据库调用的结果通过存储在缓存中`MyClass._MY_DATA`，只对类进行*一次*调用。

对于 Python 2，在类定义主体中使用`class MyClass(object):`并添加一个[`__metaclass__ = MyMetaClass`属性来附加元类。](https://docs.python.org/2/reference/datamodel.html#metaclasses)

演示：

```
>>> class MyMetaClass(type):
...     @property
...     def my_data(cls):
...         if getattr(cls, '_MY_DATA', None) is None:
...             print("costly database call executing")
...             my_data = 'bar'
...             cls._MY_DATA = my_data
...         return cls._MY_DATA
... 
>>> class MyClass(metaclass=MyMetaClass):
...     pass
... 
>>> MyClass.my_data
costly database call executing
'bar'
>>> MyClass.my_data
'bar' 
```

`property`之所以有效，是因为在对象的父类型上查找了类似的数据描述符；对于`type`, 并且`type`可以通过使用元类进行扩展的类。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2018-10-01T18:46:16.993

此答案仅适用于典型的**实例属性/方法**，不适用于类属性/ `classmethod`，或`staticmethod`。

对于 Python 3.8+，如何使用[`cached_property`](https://docs.python.org/3/library/functools.html#functools.cached_property)装饰器？它记住了。

```
from functools import cached_property

class MyClass:

    @cached_property
    def my_lazy_attr(self):
        print("Initializing and caching attribute, once per class instance.")
        return 7**7**8 
```

对于 Python 3.2+，如何同时使用[`property`](https://docs.python.org/3/library/functions.html#property)和[`lru_cache`](https://docs.python.org/library/functools.html#functools.lru_cache)装饰器？后者记住了。

```
from functools import lru_cache

class MyClass:

    @property
    @lru_cache()
    def my_lazy_attr(self):
        print("Initializing and caching attribute, once per class instance.")
        return 7**7**8 
```

* * *

学分：Maxime R 的[回答。](https://stackoverflow.com/a/19979379/832230)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-05T15:01:29.543

另一种使代码更简洁的方法是编写一个执行所需逻辑的包装函数：

```
def memoize(f):
    def wrapped(*args, **kwargs):
        if hasattr(wrapped, '_cached_val'):
            return wrapped._cached_val
        result = f(*args, **kwargs)
        wrapped._cached_val = result
        return result
    return wrapped 
```

您可以按如下方式使用它：

```
@memoize
def expensive_function():
    print "Computing expensive function..."
    import time
    time.sleep(1)
    return 400

print expensive_function()
print expensive_function()
print expensive_function() 
```

哪个输出：

```
Computing expensive function...
400
400
400 
```

现在您的 classmethod 将如下所示，例如：

```
class MyClass(object):
        @classmethod
        @memoize
        def retrieve_data(cls):
            print "Computing data"
            import time
            time.sleep(1) #costly DB call
            my_data = 40
            return my_data

print MyClass.retrieve_data()
print MyClass.retrieve_data()
print MyClass.retrieve_data() 
```

输出：

```
Computing data
40
40
40 
```

请注意，这将为函数的任何一组参数只缓存一个值，因此如果您想根据输入值计算不同的值，您将不得不变得`memoize`更复杂一些。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-02T20:31:35.343

[`Dickens`](https://pypi.org/project/Dickens/)考虑可用于 Python 3.5+的 pip-installable包。它有一个`descriptors`提供相关**`cachedproperty`**和**`cachedclassproperty`**装饰器的包，其用法如下面的示例所示。它似乎按预期工作。

```
from descriptors import cachedproperty, classproperty, cachedclassproperty

class MyClass:
    FOO = 'A'

    def __init__(self):
        self.bar = 'B'

    @cachedproperty
    def my_cached_instance_attr(self):
        print('Initializing and caching attribute, once per class instance.')
        return self.bar * 2

    @cachedclassproperty
    def my_cached_class_attr(cls):
        print('Initializing and caching attribute, once per class.')
        return cls.FOO * 3

    @classproperty
    def my_class_property(cls):
        print('Calculating attribute without caching.')
        return cls.FOO + 'C' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-15T05:35:52.997

`Ring`提供`lru_cache`类似接口，但使用任何类型的描述符支持：[https ://ring-cache.readthedocs.io/en/latest/quickstart.html#method-classmethod-staticmethod](https://ring-cache.readthedocs.io/en/latest/quickstart.html#method-classmethod-staticmethod)

```
class Page(object):
    (...)

    @ring.lru()
    @classmethod
    def class_content(cls):
        return cls.base_content

    @ring.lru()
    @staticmethod
    def example_dot_com():
        return requests.get('http://example.com').content 
```

请参阅链接查看更多细节。

# javascript - 为什么指令不观察值的变化？

> ID：15226722
> 
> 赞同：0
> 
> 时间：2013-03-05T14:47:06.960
> 
> 标签：javascript, html, angularjs

我有一个如下所示的指令：

```
directive('parcelsCarousel',function () {
    return {
        restrict:'E',
        replace:true,
        transclude:true,
        templateUrl:'/partials/parcels-carousel.html',
        link:function (scope, element, attrs) {
            scope.$watch('favoriteParcelsList', function (favoriteParcelsList) {
                if (scope.favoriteParcelsList != undefined)
                    console.log(scope.favoriteParcelsList.length)
            });
        }
    }
}); 
```

我从控制器推送一个项目`favoriteParcelsList`，但 $watch 没有运行。我该怎么办？我确信我遗漏了一些小东西，因为我有几个其他具有类似结构的指令并且它们工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T14:58:03.363

看到更多代码（理想情况下是实时的，在一个 plunker 中）肯定是理想的，但我怀疑你想向 中添加元素`favoriteParcelsList`并让 AngularJS 接受这些更改。如果是这样，则需要注意默认情况下`$watch`跟踪对象的身份。如果要跟踪更复杂对象的内容，则需要使用 deep-watch。

您可以通过向方法提供第三个布尔参数来指示 AngularJS 深度监视更改`$watch`（注意最后为**true**）：

```
 scope.$watch('favoriteParcelsList', function (favoriteParcelsList) {
            if (scope.favoriteParcelsList != undefined)
                console.log(scope.favoriteParcelsList.length)
        }, true); 
```

# javascript - 文档中的 Google Analytics（分析）准备好不工作了吗？

> ID：15226726
> 
> 赞同：1
> 
> 时间：2013-03-05T14:47:11.827
> 
> 标签：javascript, jquery, html

关于这个**工作****原因**的快速问题：

 **```
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-XXXXX-Y']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script> 
```

这**不会**：**_**

 **```
<script type="text/javascript">
$(function(){
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-XXXXX-Y']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
});
</script> 
```

是什么阻止了分析在准备好文档的情况下运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T14:51:14.667

您需要将`_gaq`变量声明放到全局范围内

```
<script type="text/javascript">
var _gaq = _gaq || [];
$(function(){
  _gaq.push(['_setAccount', 'UA-XXXXX-Y']);
  _gaq.push(['_trackPageview']);
  ... 
```

或使`window._gaq`财产与谷歌分析一起使用

```
<script type="text/javascript">
$(function(){
  window.gaq = window._gaq || [];
  _gaq.push(['_setAccount', 'UA-XXXXX-Y']);
  _gaq.push(['_trackPageview']);
  ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T14:50:55.240

这可能与 Google 本身加载到 DOM 中的 JavaScript 代码有关。这可能设置为在文档加载（或其他一些就绪状态/加载事件）时运行。由于脚本是在 DOM 就绪时执行的 ( `jQuery.load`) GA 不会因为 ready 事件已经触发而执行。

如果这不是问题，那么它可能是一个范围界定问题。****

# android - Android 没有操作栏的 web 视图屏幕截图

> ID：15226735
> 
> 赞同：0
> 
> 时间：2013-03-05T14:47:30.097
> 
> 标签：android

我正在尝试在我的 web 视图中截取当前页面的屏幕截图，但是当我截取屏幕截图时，它也在操作栏中拍摄，这是我不想要的。我正在尝试获取网络视图。这可能吗 ？

私人无效goScreenShot（）{

```
 // Get device dimmensions
    Display display = getWindowManager().getDefaultDisplay();
    Point size = new Point();
    display.getSize(size);

// Get root view
    View view = mWebView.getRootView();
    // Create the bitmap to use to draw the screenshot
    final Bitmap bitmap = Bitmap.createBitmap(size.x, size.y, Bitmap.Config.ARGB_8888);
    final Canvas canvas = new Canvas(bitmap);

    // Get current theme to know which background to use
    final Activity activity = this;
    final Theme theme = activity.getTheme();
    final TypedArray ta = theme
        .obtainStyledAttributes(new int[] { android.R.attr.windowBackground });
    final int res = ta.getResourceId(0, 0);
    final Drawable background = activity.getResources().getDrawable(res);

    // Draw background
    background.draw(canvas);

    // Draw views
    view.draw(canvas);

    // Save the screenshot to the file system
    FileOutputStream fos = null;
    try {
        final File sddir = new File(SCREENSHOTS_LOCATIONS);
        if (!sddir.exists()) {
            sddir.mkdirs();
        }
        //fos = new FileOutputStream(SCREENSHOTS_LOCATIONS
          //      + System.currentTimeMillis() + ".jpg");

        fos = new FileOutputStream(SCREENSHOTS_LOCATIONS
                      + "Screenshot" + ".jpg");
        Log.d("screenshot location", SCREENSHOTS_LOCATIONS.toString());
        if (fos != null) {
            if (!bitmap.compress(Bitmap.CompressFormat.JPEG, 90, fos)) {
                Log.d("ScreenShot", "Compress/Write failed");
            }
            fos.flush();
            fos.close();

        }

    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    startActivity(new Intent(WebViewActivity.this, ScreenViewer.class));    
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T14:49:49.363

您可以为此使用绘图缓存属性。

像这样 ：

```
 View main = findViewById(R.id.view);
Bitmap screenshot;
main.setDrawingCacheEnabled(true);
screenshot = Bitmap.createBitmap(main.getDrawingCache());
main.setDrawingCacheEnabled(false); 
```

# jquery - 具有绝对定位和左边距的 JQuery-UI 可排序

> ID：15226739
> 
> 赞同：0
> 
> 时间：2013-03-05T14:47:41.150
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable

我正在尝试使用 jQuery-ui-sortable 来允许用户自定义排序手牌。我试图让它们排序的 HTML 具有绝对定位的 div 元素，具有左侧边距样式并且是重叠的。

我的问题是，当我使容器元素可排序时，我可以单击并拖动各个卡片，但是当我释放鼠标按钮时，卡片会弹回其原始位置。

由于用户的手由一个数组支持，因此我不需要排序即可将卡片实际放置在新位置，尽管这将是一个不错的选择，因此我不必重新绘制手。所需要的只是获取释放鼠标按钮时助手/占位符悬停的索引。我也尝试了多种方法来获得它，但我一直在控制台中获得初始索引 + 1。

这是我的代码的一个小提琴：http: [//jsfiddle.net/rcMwq/4/](http://jsfiddle.net/rcMwq/4/)

HTML：

```
<div class="bottomhand ui-sortable">
    <div class="mycard" style="margin-left: 0em">
        <div class="card">
            <div class="front">
                <div class="index">3
                    <br>♠&lt;/div>
                <div class="spotB1">♠&lt;/div>
                <div class="spotB3">♠&lt;/div>
                <div class="spotB5">♠&lt;/div>
                <div class="bottomindex">3
                    <br>♠&lt;/div>
            </div>
        </div>
    </div>
    <div class="mycard" style="margin-left: 1.5em">
        <div class="card">
            <div class="front red">
                <div class="index">4
                    <br>♦&lt;/div>
                <div class="spotA1">♦&lt;/div>
                <div class="spotA5">♦&lt;/div>
                <div class="spotC1">♦&lt;/div>
                <div class="spotC5">♦&lt;/div>
                <div class="bottomindex">4
                    <br>♦&lt;/div>
            </div>
        </div>
    </div>
    <div class="mycard" style="margin-left: 3em">
        <div class="card">
            <div class="front red">
                <div class="index">7
                    <br>♥&lt;/div>
                <div class="spotA1">♥&lt;/div>
                <div class="spotA3">♥&lt;/div>
                <div class="spotA5">♥&lt;/div>
                <div class="spotB2">♥&lt;/div>
                <div class="spotC1">♥&lt;/div>
                <div class="spotC3">♥&lt;/div>
                <div class="spotC5">♥&lt;/div>
                <div class="bottomindex">7
                    <br>♥&lt;/div>
            </div>
        </div>
    </div>
    <div class="mycard" style="margin-left: 4.5em">
        <div class="card">
            <div class="front">
                <div class="index">10
                    <br>♠&lt;/div>
                <div class="spotA1">♠&lt;/div>
                <div class="spotA2">♠&lt;/div>
                <div class="spotA4">♠&lt;/div>
                <div class="spotA5">♠&lt;/div>
                <div class="spotB2">♠&lt;/div>
                <div class="spotB4">♠&lt;/div>
                <div class="spotC1">♠&lt;/div>
                <div class="spotC2">♠&lt;/div>
                <div class="spotC4">♠&lt;/div>
                <div class="spotC5">♠&lt;/div>
                <div class="bottomindex">10
                    <br>♠&lt;/div>
            </div>
        </div>
    </div>
    <div class="mycard" style="margin-left: 6em">
        <div class="card">
            <div class="front red">
                <div class="index">3
                    <br>♥&lt;/div>
                <div class="spotB1">♥&lt;/div>
                <div class="spotB3">♥&lt;/div>
                <div class="spotB5">♥&lt;/div>
                <div class="bottomindex">3
                    <br>♥&lt;/div>
            </div>
        </div>
    </div>
    <div class="mycard" style="margin-left: 7.5em">
        <div class="card">
            <div class="front">
                <div class="index">A
                    <br>♣&lt;/div>
                <div class="ace">♣&lt;/div>
                <div class="bottomindex">A
                    <br>♣&lt;/div>
            </div>
        </div>
    </div>
    <div class="mycard" style="margin-left: 9em">
        <div class="card">
            <div class="front red">
                <div class="index">6
                    <br>♦&lt;/div>
                <div class="spotA1">♦&lt;/div>
                <div class="spotA3">♦&lt;/div>
                <div class="spotA5">♦&lt;/div>
                <div class="spotC1">♦&lt;/div>
                <div class="spotC3">♦&lt;/div>
                <div class="spotC5">♦&lt;/div>
                <div class="bottomindex">6
                    <br>♦&lt;/div>
            </div>
        </div>
    </div>
    <div class="mycard" style="margin-left: 10.5em">
        <div class="card">
            <div class="front">
                <div class="index">6
                    <br>♠&lt;/div>
                <div class="spotA1">♠&lt;/div>
                <div class="spotA3">♠&lt;/div>
                <div class="spotA5">♠&lt;/div>
                <div class="spotC1">♠&lt;/div>
                <div class="spotC3">♠&lt;/div>
                <div class="spotC5">♠&lt;/div>
                <div class="bottomindex">6
                    <br>♠&lt;/div>
            </div>
        </div>
    </div>
    <div class="mycard" style="margin-left: 12em">
        <div class="card">
            <div class="front red">
                <div class="index">5
                    <br>♥&lt;/div>
                <div class="spotA1">♥&lt;/div>
                <div class="spotA5">♥&lt;/div>
                <div class="spotB3">♥&lt;/div>
                <div class="spotC1">♥&lt;/div>
                <div class="spotC5">♥&lt;/div>
                <div class="bottomindex">5
                    <br>♥&lt;/div>
            </div>
        </div>
    </div>
    <div class="mycard" style="margin-left: 13.5em">
        <div class="card">
            <div class="front">
                <div class="index">5
                    <br>♣&lt;/div>
                <div class="spotA1">♣&lt;/div>
                <div class="spotA5">♣&lt;/div>
                <div class="spotB3">♣&lt;/div>
                <div class="spotC1">♣&lt;/div>
                <div class="spotC5">♣&lt;/div>
                <div class="bottomindex">5
                    <br>♣&lt;/div>
            </div>
        </div>
    </div>
    <div class="mycard" style="margin-left: 15em">
        <div class="card">
            <div class="front red">
                <div class="index">5
                    <br>♦&lt;/div>
                <div class="spotA1">♦&lt;/div>
                <div class="spotA5">♦&lt;/div>
                <div class="spotB3">♦&lt;/div>
                <div class="spotC1">♦&lt;/div>
                <div class="spotC5">♦&lt;/div>
                <div class="bottomindex">5
                    <br>♦&lt;/div>
            </div>
        </div>
    </div>
    <div class="mycard" style="margin-left: 16.5em">
        <div class="card">
            <div class="front">
                <div class="index">8
                    <br>♣&lt;/div>
                <div class="spotA1">♣&lt;/div>
                <div class="spotA3">♣&lt;/div>
                <div class="spotA5">♣&lt;/div>
                <div class="spotB2">♣&lt;/div>
                <div class="spotB4">♣&lt;/div>
                <div class="spotC1">♣&lt;/div>
                <div class="spotC3">♣&lt;/div>
                <div class="spotC5">♣&lt;/div>
                <div class="bottomindex">8
                    <br>♣&lt;/div>
            </div>
        </div>
    </div>
    <div class="mycard" style="margin-left: 18em">
        <div class="card">
            <div class="front red">
                <div class="index">8
                    <br>♦&lt;/div>
                <div class="spotA1">♦&lt;/div>
                <div class="spotA3">♦&lt;/div>
                <div class="spotA5">♦&lt;/div>
                <div class="spotB2">♦&lt;/div>
                <div class="spotB4">♦&lt;/div>
                <div class="spotC1">♦&lt;/div>
                <div class="spotC3">♦&lt;/div>
                <div class="spotC5">♦&lt;/div>
                <div class="bottomindex">8
                    <br>♦&lt;/div>
            </div>
        </div>
    </div>
</div> 
```

CSS：

```
.bottomhand {
    position: absolute;
    margin-left: -12.75em;
    left: 50%;
    width: 19.50em;
    height: 6.00em;
    bottom: 6.00em;
}
.card {
    background-image: url("../images/cardback.png");
    background-size: cover;
    border-color: #808080 #000000 #000000 #808080;
    border-width: 1px;
    border-style: solid;
    position: absolute;
    width: 3.75em;
    height: 5.00em;
    cursor: default;
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}
.front {
    background-color: #ffffff;
    color: #000000;
    position: absolute;
    width: 100%;
    height: 100%;
}
.red {
    color: #ff0000;
}
.index {
    font-size: 63%;
    font-weight: bold;
    text-align: center;
    position: absolute;
    left: 0.15em;
    top: 0.15em;
}
.bottomindex {
    font-size: 63%;
    font-weight: bold;
    text-align: center;
    position: absolute;
    right: 0.15em;
    bottom: 0.15em;
    -webkit-transform: rotate(-180deg);
    -moz-transform: rotate(-180deg);
    -ms-transform: rotate(-180deg);
    -o-transform: rotate(-180deg);
}
.ace {
    font-size: 300%;
    position: absolute;
    left: 0.325em;
    top: 0.250em;
}
.spotA1 {
    position: absolute;
    left: 0.60em;
    top: 0.5em;
}
.spotA2 {
    position: absolute;
    left: 0.60em;
    top: 1.5em;
}
.spotA3 {
    position: absolute;
    left: 0.60em;
    top: 2.0em;
}
.spotA4 {
    position: absolute;
    left: 0.60em;
    top: 2.5em;
}
.spotA5 {
    position: absolute;
    left: 0.60em;
    top: 3.5em;
}
.spotB1 {
    position: absolute;
    left: 1.55em;
    top: 0.5em;
}
.spotB2 {
    position: absolute;
    left: 1.55em;
    top: 1.0em;
}
.spotB3 {
    position: absolute;
    left: 1.55em;
    top: 2.0em;
}
.spotB4 {
    position: absolute;
    left: 1.55em;
    top: 3.0em;
}
.spotB5 {
    position: absolute;
    left: 1.55em;
    top: 3.5em;
}
.spotC1 {
    position: absolute;
    left: 2.50em;
    top: 0.5em;
}
.spotC2 {
    position: absolute;
    left: 2.50em;
    top: 1.5em;
}
.spotC3 {
    position: absolute;
    left: 2.50em;
    top: 2.0em;
}
.spotC4 {
    position: absolute;
    left: 2.50em;
    top: 2.5em;
}
.spotC5 {
    position: absolute;
    left: 2.50em;
    top: 3.5em;
} 
```

JS：

```
$('.bottomhand').sortable({
    items: "> .mycard",
    tolerance: "pointer",
    start: function (event, ui) {
        ui.item.startPos = ui.item.index();
    },
    deactivate: function (event, ui) {
        console.log("deactivate Start position: " + ui.item.startPos);
        console.log("placeholder: " + ui.placeholder.index());
    },
    change: function (event, ui) {
        console.log("change Start position: " + ui.item.startPos);
        console.log("change helper position: " + ui.helper.index());
        console.log("placeholder: " + ui.placeholder.index());
    },
    beforeStop: function (event, ui) {
        console.log("Before Start position: " + ui.item.startPos);
        console.log("Before helper position: " + ui.helper.index());
        console.log("placeholder: " + ui.placeholder.index());
    },
    stop: function (event, ui) {
        console.log("After Start position: " + ui.item.startPos);
        //console.log("After helper position: " + ui.helper.index());
        console.log("placeholder: " + ui.placeholder.index());
    }
});
$('.bottomhand').disableSelection(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T15:05:45.367

因为您使用 margin-left 定位卡片，所以它们在 dom 中的位置对它们在视觉上的位置没有任何影响。

如果您删除 margin-left 并使用类似的东西：

```
.mycard {
    position: relative;
    margin-left: -2.25em;
    width: 3.75em;
    height: 5.00em;
    float: left;
} 
```

然后改变它应该对你有用`.card`：`position:relative;`

[http://jsfiddle.net/petersendidit/rcMwq/12/](http://jsfiddle.net/petersendidit/rcMwq/12/)

# c# - 如何选择项目并从一个带有数据源的列表框移动到另一个列表框？

> ID：15226741
> 
> 赞同：0
> 
> 时间：2013-03-05T14:47:43.197
> 
> 标签：c#, listbox

```
listBox2.DataSource = listBox1.SelectedItems;
listBox2.DisplayMember = "Descripcion";
listBox2.ValueMember = "Id"; 
```

使用上述代码后，我无法一一选择。帮助！有人请发布代码以删除

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:52:38.103

First, you have to define a model for your Listbox :

```
public class MyModel
{
    public int Id { get; set; }
    public string Description { get; set; }
} 
```

After you can set items like this :

```
listBox2.Items.Add(new MyModel() { Id = 1, Description = "description" });
listBox2.DisplayMember = "Description";
listBox2.ValueMember = "Id"; 
```

And now, your listbox will show the description property. If you select an item, the SelectedValue in listbox2 will be the value of id property

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T15:10:24.457

使用 SqlDataAdapter 将数据从数据源转储到列表框中，并根据其中一个列表框使用 listbox.add() 方法中选择的数据，使用“for”循环使用索引将数据从一个列表框转储到另一个列表框。

```
for(int i=0; i<listBox1.SelectedItems.Count; i++)
{
    listBox2.Items.Add(listbox1.SelectedItems[i].toString());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T15:21:42.013

```
 if (listBox1.SelectedItem != null)
        {
            listBox2.Items.Add(listBox1.SelectedItem);
        }
        listBox2.DisplayMember = "Descripcion";
        listBox2.ValueMember = "Id"; 
```

这工作正常....

# php - 点击返回按钮时防止重新提交表单

> ID：15226744
> 
> 赞同：23
> 
> 时间：2013-03-05T14:47:47.740
> 
> 标签：php, forms, get, refresh, back

我在这里和其他地方搜索了很多帖子，但似乎找不到解决我问题的方法。我有一个显示数据库条目的页面：database.php。可以使用表单过滤这些条目。当我过滤它们并只显示我感兴趣的那些时，我可以单击一个条目（作为链接），将我带到该条目页面（通过 php GET）。当我在该条目页面（即“view.php?id=1”）并点击返回按钮（返回到 database.php）时，过滤器表单需要确认表单重新提交。有什么办法可以防止这种情况发生吗？

以下是一些（简化的）代码示例：

**数据库.php：**

```
<form>
    <select>
        <option>1</option>
        <option>2
        <option>
    </select>
    <input type="submit" name="apply_filter" />
</form>
<?php
if ( isset( $_POST[ "apply_filter" ] ) ) { // display filtered entries
    $filter = $_POST[ "filter" ];
    $q = "Select * from table where col = '" . $filter . "'";
    $r = mysql_query( $q );
} else { // display all entries
    $q = "Select * from table";
    $r = mysql_query( $q );
}
while ( $rec = mysql_fetch_assoc( $r ) ) {
    echo "<a href='view.php?id=" . $rec[ "id" ] . "'>" . $rec[ "name" ] . "</a><br />"; // this is where the link to the view.php page is...
}
?> 
```

现在如前所述，如果我单击该链接，它会将我带到“view.php?id=whatever”。在该页面上，我只是从 url 中获取 ID 以显示该单个条目：

**视图.php：**

```
<?php
$id = $_GET[ "id" ];
$q = "Select * from table where id = '" . $id . "'";
$r = mysql_query( $q );
while (  ) {
    // display entry
}

?> 
```

如果我现在点击后退按钮，database.php 上的表单（用于过滤数据库结果的表单）需要确认重新提交。这不仅很烦人，对我来说也无用。

我怎样才能解决这个问题？我希望我的问题的代码示例和解释是足够的。如果不让我知道，我会尝试指定。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2016-10-21T14:29:06.627

我知道这个问题很老，但是我自己也有这个问题，我发现有两行有效：

```
header("Cache-Control: no cache");
session_cache_limiter("private_no_expire"); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-05T15:05:09.473

我知道有两种方法可以做到这一点。简单的方法和困难的方法。

无论如何，当您处理基于状态的页面（使用`$_SESSION`）时，您应该这样做以保持您的页面“活动”并在您的控制之下，防止像这样缓存所有页面：

```
<?php
//Set no caching
header("Expires: Mon, 26 Jul 1997 05:00:00 GMT");
header("Last-Modified: " . gmdate("D, d M Y H:i:s") . " GMT"); 
header("Cache-Control: no-store, no-cache, must-revalidate"); 
header("Cache-Control: post-check=0, pre-check=0", false);
header("Pragma: no-cache");
?> 
```

困难的方法包括生成一个 id 并将其作为隐藏输入或`&_SESSION`cookie 存储在页面上的某个位置。然后你在服务器上存储相同的 id 作为`$_SESSION`. 如果它们不匹配，则一系列预编程的`if` `else`类型语句会导致重新提交页面时不会发生任何事情（当您单击返回时，它会尝试执行此操作）。

如果表单提交成功，简单的方法是简单地将用户重定向回表单提交页面，如下所示：

```
header('Location: http://www.mydomain.com/redirect.php'); 
```

我希望这有帮助！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-30T00:57:14.437

可能有帮助的一件事是让您的过滤器表单使用`GET`方法而不是`POST`.

浏览器通常会阻止`POST`自动重新提交输入，这是在使用输入时它们不会做的事情`GET`。此外，这将允许用户使用过滤器链接到您的页面。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-07-18T05:55:57.393

```
header("Cache-Control: no cache");

session_cache_limiter("private_no_expire"); 
```

注意：在使用你从表单提交的post数据之后，这两行应该在function的末尾使用。所以，当我们回到重定向页面时，它不会要求你重新提交页面。这将起作用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-01-29T00:26:23.537

我使用了[如何检测用户是否使用后退按钮进入页面？](https://stackoverflow.com/questions/829046/how-do-i-detect-if-a-user-has-got-to-a-page-using-the-back-button#answer-45857949)检测访问是否是由浏览器的后退按钮单击触发的，如果是这种情况，我使用 JavaScript 重新加载页面。当页面重新加载时，我的代码已经处理了相应的验证，以确保表单永远不会提交两次。在我的案例中，重要的部分是在单击浏览器的后退按钮后重新访问表单时强制页面重新加载。这是我想要应用此验证的 URL 中的代码：

```
<script type="text/javascript">
    if (window.performance && window.performance.navigation.type == window.performance.navigation.TYPE_BACK_FORWARD) {
        location.reload();
    }
</script> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-01-25T16:00:09.963

如果/当重新加载页面时，另一种解决方案也可以使用 $_SESSION 检查帖子的原创性。简而言之，检查一个唯一或随机的字符串。

在表单中，添加一个使用 rand() 或 microtime() 设置值的输入元素：

```
<input type="hidden" name="formToken" value="<?php echo microtime();?>"/> 
```

然后包装 PHP 函数以在 if 块中验证和解析表单数据：

```
if(!isset($_SESSION['formToken']) || $_POST['formToken'] !== $_SESSION['formToken'])){
       $_SESSION['formToken'] = $_POST['formToken'];
      /*continue form processing */
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-01-27T05:59:39.407

上面已经提到过，但我再说一遍，如果您在代码中使用了 session_start() ，那么您只需要在头文件中添加这一行，如：-

```
<?php
header("Cache-Control: no cache");
?> 
```

但是如果你还没有使用 session_start() 那么你可以在你的头文件中添加下面的行，比如：-

```
<?php
header("Cache-Control: no cache");
session_cache_limiter("private_no_expire");
?> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-08-17T09:58:31.543

对我有用的解决方案是

```
$(document).ready( function() {
//prevent form submit on refresh or resubmit with back button
if ( window.history.replaceState ) window.history.replaceState( null, null, window.location.href );
} 
```

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2017-11-12T11:48:08.360

您需要`POST`从浏览器历史记录中删除请求哪些数据

```
history.replaceState("", "", "/the/result/page") 
```

看到[这个](https://stackoverflow.com/a/3503206/4632019)答案

你也可以按照[`Post/Redirect/Get`](http://en.wikipedia.org/wiki/Post/Redirect/Get) 模式。

# angularjs - AngularJS - 用用户生成的内容增强动态 HTML 内容

> ID：15226745
> 
> 赞同：0
> 
> 时间：2013-03-05T14:47:48.900
> 
> 标签：angularjs

我是 AngularJS 的新手，希望有人能帮我解决这个问题！

我正在开发一种网络电子阅读器，它可以动态地提取 HTML 内容的页面。到目前为止，我正在使用 $http AJAX 调用并将其与“ng-bind-html-unsafe”绑定（HTML 是我们自己的，只是从同一服务器上的目录提供。我可以控制HTML，所以如果需要，我可以以不同的方式执行此操作）。因此，每次用户按下上一个/下一个时，控制器都会简单地获取 HTML 的上一个/下一个页面并在模型中进行切换——效果很好。

但接下来我需要通过用户添加来增强这个动态 HTML，例如评论和突出显示。它们需要出现在用户添加它们的位置，例如评论很可能位于特定段落的下方。

使用 JQuery，我想我会给每个 HTML 元素自己的 ID，并将用户生成的内容的每一位与特定的 ID 相关联。然后我可以自己操作 DOM，例如在其关联元素下添加每个评论。

AngularJS 的正确方法是什么，因为原则似乎是完全避免直接 DOM 操作？

我可以通过将 HTML 内容定义为模型中的单独元素，为每个段落、标题、图像等设置单独的 JavaScript 对象来了解它是如何完成的。但这基本上是在 JavaScript 中定义类似 DOM 的数据——感觉非常错误和混乱......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T16:52:45.073

Use an "ng-include" and dynamically bind a src attribute from the controller. Adding dynamic, user generated content is as adding the binding variables to your html. Following is angular code that implements previous/next buttons that dynamically loads html templates and populates them with the user added comments. At the bottom is a link to a fully functional jsfiddle.

```
angular.module('app',[]).controller('controller', function($scope){
    var change;

    change = function(){
        $scope.src = $scope.page + '.html';        
    };

    $scope.page = 1;
    $scope.items = [];

    change();

    $scope.submit = function(text){
        $scope.items.push(text);
    };
    $scope.next = function () {
        if($scope.page < 3){
            $scope.page++;
            change();
        }
    };

    $scope.previous = function () {
        if($scope.page > 1){
            $scope.page--;
            change();
        }
    };

}); 
```

[http://jsfiddle.net/jwanga/rnL7c/](http://jsfiddle.net/jwanga/rnL7c/)

# php - PHP 制作一个简单的计算器 - 代码不起作用

> ID：15226750
> 
> 赞同：0
> 
> 时间：2013-03-05T14:48:05.533
> 
> 标签：php, javascript

我正在尝试制作一个像这样的简单计算器：

输入1 选择输入2 = 输入3

*   input1,input2 是第一个和第二个值
*   选择有 4 个运算符：+ - * /
*   input3 显示结果

这是我的代码，它没有按预期工作，有人可以帮我吗？

```
<?php
ini_set('display_errors', 0);
session_start();

/*  Check if form is submit 
 *  if any input field is empty --> "NaN" result
 *  else check value of select field --> do the math --> result
 *  Then call JS function to change value of result field
 */ 

if(isset($_GET['act']) && $_GET['act']== 'do')  {

    $val1 = $_GET['val1'];
    $val2 = $_GET['val2'];
    $oper = $_GET['oper'];
if($val1 == NULL || $val2 == NULL)  
    $result= "NaN";
else    {
    switch($oper)   {
        case 1 : $result= $val1 + $val2; break;
        case 2 : $result= $va1l - $val2; break;
        case 3 : $result= $val1 * $val2; break;
        case 4 : $result= $val1 / $val2; break;
    }
}
echo "<script> showResult('".$result."') </script>";
}
?>

<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<style>
input,select { height:30px;width:50px}

</style>

</head>
<body>
<form method="GET" action="bai4_1.php?act=do">
    <table>
    <tr><td>Op1</td>
        <td>Oper</td>
        <td>Op2</td>
        <td>Result</td></tr>
    <tr><td><input id="val1" type="text" name="val1" value="<?php echo 
$_GET['val1'];?>"/></td>
        <td><select id="oper" name="oper">
            <option value=1>+</option>
            <option value=2>-</option>
            <option value=3>*</option>
            <option value=4>/</option>
            </select></td>
        <td><input id="val2" type="text" name="val2" value="<?php 
echo$_GET['val2'];?>"/> =</td>         
        <td><input id="result" type="text"></td></tr>
    </table>
</form>
</body>
</html>

<script>
$("input,select").change(function(){
setTimeout(function(){
    $("form").submit();
},1000);
});

function showResult(result) {
$("#result").val(result);
}   
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T15:08:05.133

首先知道你想为你的应用程序使用什么语言。

我看到你使用 PHP、HTML、JavaScript 和 jQuery。

但是，如果您重新考虑您的小型应用程序，您（可能）会注意到您可以在客户端执行所有操作。所以你可以扔掉你的PHP。

所以现在我们需要 HTML 来显示一个表单。

```
<form>
    <table>
        <tr>
            <td>Op1</td>
            <td>Oper</td>
            <td>Op2</td>
            <td>Result</td>
        </tr>
        <tr>
            <td>
                <input id="val1" type="text" name="val1" value="" />
            </td>
            <td>
                <select id="oper" name="oper">
                    <option value="+">+</option>
                    <option value="-">-</option>
                    <option value="*">*</option>
                    <option value="/">/</option>
                </select>
            </td>
            <td>
                <input id="val2" type="text" name="val2" value="" />
            </td>
            <td>
                <input id="result" type="text" />
            </td>
        </tr>
        <tr>
            <td></td>
            <td></td>
            <td></td>
            <td>
                <input type="submit" />
            </td>
        </tr>
    </table>
</form>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> 
```

在您的 HTML 中，我编辑了一些内容：

*   我添加了一个`input type="submit"`，我们不能假设用户能够在没有的情况下发送表单。
*   我还更改了您的选择框的值

现在表格已经准备好了。

稍微了解一下 jQuery，我们就可以轻松地捕捉到提交事件。

```
$('form').submit(onFormSubmit)

function onFormSubmit() {
    var val1 = $('#val1').val()
    var val2 = $('#val2').val()
    var operator = $('#oper').val()

    $('#result').val(eval(val1 + operator + val2))
    return false
} 
```

上面解释过，我在 from 上有一个事件监听器。

提交后，我得到 3 个值。

我使用 eval 将字符串用作代码，这样我就可以做到`eval(val1 + operator + val2)`

我希望这能帮到您。

在此处包含一个[jsFiddle 示例](http://jsfiddle.net/vSQsa/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T15:06:05.527

加载页面时，您可能会遇到 JavaScript 错误。目前，您页面的源代码输出可能如下所示：

```
<script> showResult('".$result."') </script>
<html>
...
</html>
<script>
...
function showResult(result) {
$("#result").val(result);
}   
</script> 
```

这里有两个问题：

**你不应该有任何东西，甚至`<script>`，在你的`<html>`标签之外。**

你可以把这些东西移到`<head>`标签中，让它看起来更好用。将东西放在`<html>`标签之外被认为是不好的做法。

**您在定义 JavaScript 函数之前调用它。**

第一行 JavaScript 尝试执行您的`ShowResult`函数。但是，这还没有定义（它在页面底部定义，JavaScript 还没有读取它），所以它不知道该怎么做。这会导致错误。如果您使用的是 Google Chrome 或 Firefox，则可以通过按 Control-Shift-J 查看此错误消息。

## 修复

首先，将所有 JavaScript 代码移动到`<head>`页面中。

其次，首先编写你的函数。这会将它们定义为页面加载，因此一旦您开始执行功能，一切都可用。

第三，当您使用 jQuery 时，将您的函数执行代码（即：）包装`showResult('".$result."')`在以下代码中：

```
$(document).ready(function() {
    // put your code here
}); 
```

这将指示您的代码在开始执行任何 JavaScript 之前等待整个页面加载。

结果应如下所示：

```
<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script>
//  define your functions up here
function showResult(result) {
    $("#result").val(result);
}  

//  define your Procedural code here. This stuff will execute once the page loads completely:
$(document).ready(function() {
    $("input,select").change(function(){
    setTimeout(function(){
        $("form").submit();
    },1000);
    });

    <?php if($result != "NaN") {
    //  Show this code only if $result is defined and valid:
echo "showResult('".$result."');";
?>
});
</script> 
```

# git - 共享存储在 Dropbox 上的 git 存储库

> ID：15226751
> 
> 赞同：1
> 
> 时间：2013-03-05T14:48:08.293
> 
> 标签：git, dropbox

按照此[答案](https://stackoverflow.com/a/1961515/671013)中建议的步骤，我设法在本地计算机上设置了一个存储库，将其推送到`dropbox`文件夹上的裸存储库并将其克隆到另一个本地位置。也就是说，`git clone ~/Dropbox/git/project.git .`在目录中调用`~/project-image`。这意味着它似乎工作正常 - 至少对我一个人来说。

但是，我无法使用`https`. 从`dropbox`我获得了`URL`of`~/Dropbox/git/project.git`然后尝试了类似的东西

```
git clone https://www.dropbox.com/sh/xxxxxxx/xxxxxxx . 
```

在另一个目录`~/project/image2~`中。这不起作用...我收到以下错误：

```
warning: remote HEAD refers to nonexistent ref, unable to checkout. 
```

在我提到的答案中，似乎可以从`dropbox`. 如何？似乎`URL`每个子目录的子目录都发生了变化，因此 git 无法克隆。这是原因吗？有没有办法克服这个问题？请注意，我不想将存储库放在我的公共部分，`dropbox`如果需要，我想共享一个链接。

* * *

**编辑 - 验证存储库`dropbox`：**根据我运行的@Idx 建议，在`~/Dropbox/git`以下内容中：`cat project.git/HEAD`返回`ref: refs/heads/master`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T15:30:41.727

为了使 git 能够从不支持 git 的智能 http 协议（Dropbox 就是这种情况）的 http 服务器克隆或获取，您需要在[`git update-server-info`](https://www.kernel.org/pub/software/scm/git/docs/git-update-server-info.html)更新 ref（分支或标签）的任何时候运行在以这种方式提供服务的存储库中。

根据您打算如何对该存储库进行更新，您可能能够设置一个或多个挂钩来自动为您执行此操作。

# python - 在 Polygon 内生成坐标

> ID：15226755
> 
> 赞同：3
> 
> 时间：2013-03-05T14:48:15.577
> 
> 标签：python, numpy

我想将多边形的值合并到一个精细的规则网格中。例如，我有以下坐标：

```
data = 2.353
data_lats = np.array([57.81000137,  58.15999985,  58.13000107,  57.77999878])
data_lons = np.array([148.67999268,  148.69999695,  148.47999573,  148.92999268]) 
```

我的常规网格如下所示：

```
delta = 0.25
grid_lons = np.arange(-180, 180, delta)
grid_lats = np.arange(90, -90, -delta)
llx, lly = np.meshgrid( grid_lons, grid_lats )
rows = lly.shape[0]
cols = llx.shape[1]
grid = np.zeros((rows,cols)) 
```

现在我可以很容易地找到对应于我的多边形中心的网格像素：

```
centerx, centery = np.mean(data_lons), np.mean(data_lats)
row = int(np.floor( centery/delta ) + (grid.shape[0]/2))
col = int(np.floor( centerx/delta ) + (grid.shape[1]/2))
grid[row,col] = data 
```

但是，可能有几个网格像素仍然与多边形相交。因此，我想在我的多边形（data_lons，data_lats）内生成一堆坐标，并像以前一样找到它们对应的网格像素。您是否建议随机或系统地生成坐标？我失败了，但我还在努力。

注意：一个数据集包含大约 80000 个多边形，因此它必须非常快（几秒钟）。这也是我选择这种方法的原因，因为它没有考虑重叠区域......（就像我之前的问题数据分箱：非常慢的[不规则多边形到规则网格）](https://stackoverflow.com/questions/13934959/data-binning-irregular-polygons-to-regular-mesh)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T22:34:21.060

您需要测试以下方法以查看它是否足够快。首先，您应该将所有 lats 和 lons 修改为，以使它们（可能是分数）索引到您的网格中：

```
idx_lats = (data_lats - lat_grid_start) / lat_grid step
idx_lons = (data_lons - lon_grid_start) / lon_grid step 
```

接下来，我们要将多边形分割成三角形。对于任何凸多边形，您可以将多边形的中心作为所有三角形的一个顶点，然后将多边形的顶点连续成对。但是如果你的多边形都是四边形，那么将它们分成两个三角形会更快，第一个使用顶点 0、1、2，第二个使用 0、2、3。

要知道某个点是否在三角形内，我将使用[此处](http://www.blackpawn.com/texts/pointinpoly/default.html)描述的重心坐标方法。第一个函数检查一堆点是否在三角形内：

```
def check_in_triangle(x, y, x_tri, y_tri) :
    A = np.vstack((x_tri[0], y_tri[0]))
    lhs = np.vstack((x_tri[1:], y_tri[1:])) - A
    rhs = np.vstack((x, y)) - A
    uv = np.linalg.solve(lhs, rhs)
    # Equivalent to (uv[0] >= 0) & (uv[1] >= 0) & (uv[0] + uv[1] <= 1)
    return np.logical_and(uv >= 0, axis=0) & (np.sum(uv, axis=0) <= 1) 
```

通过顶点给定一个三角形，您可以通过在三角形边界框中的格点上运行上述函数来获取其中的格点：

```
def lattice_points_in_triangle(x_tri, y_tri) :
    x_grid = np.arange(np.ceil(np.min(x_tri)), np.floor(np.max(x_tri)) + 1)
    y_grid = np.arange(np.ceil(np.min(y_tri)), np.floor(np.max(y_tri)) + 1)
    x, y = np.meshgrid(x_grid, y_grid)
    x, y = x.reshape(-1), y.reshape(-1)
    idx = check_in_triangle(x, y, x_tri, y_tri)
    return x[idx], y[idx] 
```

对于四边形，您只需调用最后一个函数两次：

```
def lattice_points_in_quadrilateral(x_quad, y_quad) :
    return map(np.concatenate,
               zip(lattice_points_in_triangle(x_quad[:3], y_quad[:3]),
                   lattice_points_in_triangle(x_quad[[0, 2, 3]],
                                              y_quad[[0, 2, 3]]))) 
```

如果您在示例数据上运行此代码，您将返回两个空数组：这是因为四边形点的顺序令人惊讶：索引 0 和 1 定义一个对角线，2 和 3 定义另一个。我上面的函数期望顶点围绕多边形排序。如果您真的以其他方式做事，则需要将第二次调用更改为`lattice_points_in_triangle`inside `lattice_points_in_quadrilateral`，以便使用的索引`[0, 1, 3]`而不是`[0, 2, 3]`.

而现在，有了这样的改变：

```
>>> idx_lats = (data_lats - (-180) ) / 0.25
>>> idx_lons = (data_lons - (-90) ) / 0.25
>>> lattice_points_in_quadrilateral(idx_lats, idx_lons)
[array([952]), array([955])] 
```

如果将网格的分辨率更改为 0.1：

```
>>> idx_lats = (data_lats - (-180) ) / 0.1
>>> idx_lons = (data_lons - (-90) ) / 0.1
>>> lattice_points_in_quadrilateral(idx_lats, idx_lons)
[array([2381, 2380, 2381, 2379, 2380, 2381, 2378, 2379, 2378]),
 array([2385, 2386, 2386, 2387, 2387, 2387, 2388, 2388, 2389])] 
```

在我的系统中，这种方法对于您的需求来说，在时间上会慢 10 倍左右：

```
In [8]: %timeit lattice_points_in_quadrilateral(idx_lats, idx_lons)
1000 loops, best of 3: 269 us per loop 
```

所以你正在看超过20秒。处理您的 80,000 个多边形。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T09:43:30.947

我通过简单地计算角像素之间的坐标来制定一个快速而肮脏的解决方案。看一看：

```
dlats = np.zeros((data_lats.shape[0],4))+np.nan
dlons = np.zeros((data_lons.shape[0],4))+np.nan
idx = [0,1,3,2,0] #rearrange the corner pixels

for cc in range(4):
    dlats[:,cc] = np.mean((data_lats[:,idx[cc]],data_lats[:,idx[cc+1]]), axis=0)
    dlons[:,cc] = np.mean((data_lons[:,idx[cc]],data_lons[:,idx[cc+1]]), axis=0)

data_lats = np.column_stack(( data_lats, dlats ))
data_lons = np.column_stack(( data_lons, dlons )) 
```

因此，红点代表原始角点 - 蓝色点代表它们之间的中间像素。

![在此处输入图像描述](../Images/f350e00d456fc20d89abd9b9b08845b6.png)

我可以再做一次并包括中心像素（geo[:,[4,9]]）

```
dlats = np.zeros((data.shape[0],8))
dlons = np.zeros((data.shape[0],8))

for cc in range(8):
    dlats[:,cc] = np.mean((data_lats[:,cc], geo[:,4]), axis=0)
    dlons[:,cc] = np.mean((data_lons[:,cc], geo[:,9]), axis=0)

data_lats = np.column_stack(( data_lats, dlats, geo[:,4] ))
data_lons = np.column_stack(( data_lons, dlons, geo[:,9] )) 
```

![在此处输入图像描述](../Images/e3130842f3ab6e64604a8cdcb639df4f.png)

这真的很好用，我可以将每个点直接分配给它对应的网格像素，如下所示：

```
row = np.floor( data_lats/delta ) + (llx.shape[0]/2)
col = np.floor( data_lons/delta ) + (llx.shape[1]/2) 
```

然而，最终的分箱现在需要约 7 秒！！！如何加快此代码的速度：

```
for ii in np.arange(len(data)):
    for cc in np.arange(data_lats.shape[1]):
        final_grid[row[ii,cc],col[ii,cc]] += data[ii]
        final_grid_counts[row[ii,cc],col[ii,cc]] += 1 
```

# c# - 带有脚本组件和服务引用的 SSIS

> ID：15226757
> 
> 赞同：4
> 
> 时间：2013-03-05T14:48:19.090
> 
> 标签：c#, sql-server, ssis

我正在尝试通过 SSIS 获取 BingAds 数据以存储在我们的会计系统中。我添加了对[https://api.sandbox.bingads.microsoft.com/Api/Advertiser/v8/CampaignManagement/CampaignManagementService.svc?wsdl](https://api.sandbox.bingads.microsoft.com/Api/Advertiser/v8/CampaignManagement/CampaignManagementService.svc?wsdl)的服务参考进行测试。

我直接从[http://msdn.microsoft.com/en-us/library/adcenter-campaign-management-csharp-samples-get-campaigns.aspx](http://msdn.microsoft.com/en-us/library/adcenter-campaign-management-csharp-samples-get-campaigns.aspx)复制了 GetCampaigns 代码，并稍作修改，因为这不是控制台应用程序。

当我运行我的脚本组件时，我收到以下消息：

```
Message
Could not find default endpoint element that references contract
'BingAds.CampaignManagementService.ICampaignManagementService' in the ServiceModel
client configuration section. This might be because no configuration file was
found for your application, or because no endpoint element matching this contract
could be found in the client element. 
```

我的 app.config 看起来应该包含所需的一切。我错过了什么吗？

我的 app.config 如下：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <system.serviceModel>
        <bindings>
            <basicHttpBinding>
                <binding name="BasicHttpBinding_ICampaignManagementService" closeTimeout="00:01:00"
                    openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                    allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
                    maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
                    messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
                    useDefaultWebProxy="true">
                    <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                    <security mode="Transport">
                        <transport clientCredentialType="None" proxyCredentialType="None"
                            realm="" />
                        <message clientCredentialType="UserName" algorithmSuite="Default" />
                    </security>
                </binding>
            </basicHttpBinding>
        </bindings>
        <client>
            <endpoint address="https://api.sandbox.bingads.microsoft.com/Api/Advertiser/V8/CampaignManagement/CampaignManagementService.svc"
                binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_ICampaignManagementService"
                contract="BingAds.CampaignManagementService.ICampaignManagementService"
                name="BasicHttpBinding_ICampaignManagementService" />
        </client>
    </system.serviceModel>
</configuration> 
```

我的脚本组件代码如下：

```
#region Namespaces
using System;
using System.Data;
using Microsoft.SqlServer.Dts.Pipeline.Wrapper;
using Microsoft.SqlServer.Dts.Runtime.Wrapper;

using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.ServiceModel;
using System.IO;
using System.Xml;
using System.Net;

// @TODO this should be something more sane; we'll get to that
using SC_356d75396bc04171b425bdd1a48dd7b6.BingAds.CampaignManagementService;
#endregion

namespace GetCampaignsByAccount
{

    [Microsoft.SqlServer.Dts.Pipeline.SSISScriptComponentEntryPointAttribute]
    public class ScriptMain : UserComponent
    {
        private static CampaignManagementServiceClient service = null;

        // private static StringBuilder output_messages = new StringBuilder();
        private static List<string> strings = new List<string>();

        // Specify your credentials.
        private static string m_password = "";
        private static string m_username = "";
        private static string m_token = "";

        // Specify the advertiser's account ID and customer ID.
        private static long m_accountId = null;
        private static long m_customerId = null;

        // Simple example that shows how to create a campaign.
        static void Main()
        {
            Campaign[] campaigns = null;

            try
            {
                CampaignManagementServiceClient service = new CampaignManagementServiceClient();

                campaigns = GetCampaigns(m_customerId, m_accountId);

                // Print information about the campaigns.
                if (campaigns.Length > 0) {
                    AddMessage("Account {0} contains the following campaigns", m_accountId);

                    foreach (Campaign campaign in campaigns) {
                        AddMessage("Campaign: {0}", campaign.Name);
                        AddMessage("ID: {0}", campaign.Id);
                        // AddMessage("Status: {0}", campaign.Status);
                        AddMessage("Time zone: {0}", campaign.TimeZone);
                        // AddMessage("Budget type: {0}", campaign.BudgetType);

                        if (BudgetLimitType.MonthlyBudgetSpendUntilDepleted == campaign.BudgetType)
                        {
                            Console.WriteLine("Monthly budget: {0:C}", campaign.MonthlyBudget);
                        }
                        else
                        {
                            Console.WriteLine("Daily budget: {0:C}", campaign.DailyBudget);
                        }

                        Console.WriteLine();
                    }
                }
                else
                {
                    AddMessage("Account {0} does not contain campaigns.", m_accountId);
                }
                service.Close();
            }
            catch (CommunicationException e)
            {
                AddMessage("{0}", "Communication Exception!");
                AddMessage("{0}", e.Message);
                AddMessage("{0}", e.StackTrace);

                if (null != e.InnerException)
                {
                    AddMessage("{0}", "Inner Exception!");
                    AddMessage("{0}", e.InnerException.Message);
                    AddMessage("{0}", e.InnerException.StackTrace);
                }

                if (service != null)
                {
                    service.Abort();
                }
            }
            catch (TimeoutException e)
            {
                AddMessage("{0}", "Timeout Exception!");
                AddMessage("{0}", e.Message);
                AddMessage("{0}", e.StackTrace);

                if (service != null)
                {
                    service.Abort();
                }
            }
            catch (Exception e)
            {
                // Ignore fault exceptions that we already caught.

                if (e.InnerException is FaultException)
                {
                    ;
                }
                else
                {
                    AddMessage("{0}", "Other Exception!");
                    AddMessage("{0}", e.Message);
                    AddMessage("{0}", e.StackTrace);
                }

                if (service != null)
                {
                    service.Abort();
                }
            }
        }

        private static void AddMessage(string format, string str)
        {
            string[] lines = str.Split(new string[] { Environment.NewLine }, StringSplitOptions.None);
            foreach (string value in lines)
            {
                string longVal = String.Format(format, value);
                strings.Add(longVal.Substring(0, Math.Min(longVal.Length, 8000)));
            }
        }

        private static void AddMessage(string format, long str)
        {
            strings.Add(String.Format(format, str));
        }

        private static void AddMessage(string format, long? str)
        {
            strings.Add(String.Format(format, str));
        }

        static Campaign[] GetCampaigns(long customerId, long accountId)
        {
            GetCampaignsByAccountIdRequest request = new GetCampaignsByAccountIdRequest();
            GetCampaignsByAccountIdResponse response = null;

            // Set the header information.
            request.CustomerId = customerId.ToString();
            request.CustomerAccountId = accountId.ToString();
            request.DeveloperToken = m_token;
            request.UserName = m_username;
            request.Password = m_password;

            // Set the request information.
            request.AccountId = accountId;

            try
            {
                response = service.GetCampaignsByAccountId(request);
            }
            catch (FaultException<AdApiFaultDetail> fault)
            {
                // Log this fault.
                strings.Add("GetCampaignsByAccountId failed with the following faults:\n");

                foreach (AdApiError error in fault.Detail.Errors)
                {
                    if (105 == error.Code)
                    { //  InvalidCredentials
                        Console.WriteLine("The specified credentials are not valid " +
                            "or the account is inactive.");
                    }
                    else
                    {
                        Console.WriteLine("Error code: {0} ({1})\nMessage: {2}\nDetail: {3}\n",
                            error.ErrorCode, error.Code, error.Message, error.Detail);
                    }
                }

                throw new Exception("", fault);
            }
            catch (FaultException<ApiFaultDetail> fault)
            {
                // Log this fault.
                Console.WriteLine("GetCampaignsByAccountId failed with the following faults:\n");

                foreach (OperationError error in fault.Detail.OperationErrors)
                {
                    switch (error.Code)
                    {
                        case 106: //  UserIsNotAuthorized
                            Console.WriteLine("The user is not authorized to call this operation.");
                            break;

                        case 1030: //  CampaignServiceAccountIdHasToBeSpecified
                            Console.WriteLine("The CustomerAccountId header element " +
                                "cannot be null or empty.");
                            break;

                        case 1102: //  CampaignServiceInvalidAccountId
                            Console.WriteLine("The account ID is not valid");
                            break;

                        default:
                            Console.WriteLine("Error code: {0} ({1})\nMessage: {2}\nDetail: {3}\n",
                                error.ErrorCode, error.Code, error.Message, error.Details);
                            break;
                    }
                }

                // This is not a batch operation, so there should be no batch errors.
                foreach (BatchError error in fault.Detail.BatchErrors)
                {
                    Console.WriteLine("Unable to add extension #{0}", error.Index);
                    Console.WriteLine("Error code: {0} ({1})\nMessage: {2}\nDetail: {3}\n",
                        error.ErrorCode, error.Code, error.Message, error.Details);
                }

                throw new Exception("", fault);
            }

            return response.Campaigns;
        }

        /// <summary>
        /// This method is called once, before rows begin to be processed in the data flow.
        ///
        /// You can remove this method if you don't need to do anything here.
        /// </summary>
        public override void PreExecute()
        {
            base.PreExecute();
        }

        /// <summary>
        /// This method is called after all the rows have passed through this component.
        ///
        /// You can delete this method if you don't need to do anything here.
        /// </summary>
        public override void PostExecute()
        {
            base.PostExecute();
        }

        public override void CreateNewOutputRows()
        {

            Main();

            foreach (string value in strings)
            {
                MessagesBuffer.AddRow();
                MessagesBuffer.Message = value;
            }

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T15:03:02.533

.NET 在加载配置数据时查找的配置文件是实际运行的可执行文件的配置文件。向您的 SSIS 脚本组件的项目添加一个`app.config`不会生成 SSIS 知道要查找的配置文件。根据您选择运行包的方式，它将寻找 BIDS、SQL Server 或`dtexec`.

在代码中构建端点并完全绕过配置文件会更好。如果您的大多数配置选项都是默认值，那么它甚至没有那么复杂，因为您只需要设置更改的属性。

这个堆栈溢出问题应该向您展示如何做到这一点：

[没有配置文件的 WCF 配置](https://stackoverflow.com/questions/54579/wcf-configuration-without-a-config-file)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-14T14:40:18.527

对于使用 SSDT 2015 的用户，使用调试器时 .config 文件的文件位置发生了变化；现在可以在以下路径下找到它们：C:\Program Files (x86)\Microsoft Visual Studio 14.0\Common7\IDE\Extensions\Microsoft\SSIS\140\Binn

# jquery-ui - Angular-UI 从 ui-date 中的日期减去一天

> ID：15226766
> 
> 赞同：4
> 
> 时间：2013-03-05T14:48:38.467
> 
> 标签：jquery-ui, angularjs, angular-ui

**我想使用 ui-date 在我的应用程序中设置/编辑日期的情况**。**我使用 angular、angular-ui、jquery-ui 等的最新稳定版本。**

 ****问题** 一旦使用日期选择器选择日期，我的模型中的日期将等于所选日期减去 1 天。它也会以这种方式发送到我的服务器并保存在我的数据库中。

**plunker** [http://plnkr.co/edit/Ft14Wa?p=preview](http://plnkr.co/edit/Ft14Wa?p=preview) 最初 datepicker 输入中的日期和我的模型中的日期是相同的。选择日期后，他们有所不同。

**问题** 在这里发生了什么（wr）on（g）？？？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-05T15:20:13.560

ui-date 期望您的模型是一个实际的日期对象。在你的情况下，它是一个字符串。如果您查看控制台，您会发现 angularUI 实际上会通知您。然后它建议您添加具有指定日期格式的附加 ui-date-format 标签，您的日期字符串将被解析为日期对象。

长话短说，您需要像这样调整输入：

```
<input ui-date="{dateFormat: 'yy-mm-dd'}" ui-date-format="yy-mm-dd" ng-model="customer.contract_end_date"></input> 
```

[工作笨拙](http://plnkr.co/edit/FQR3Fg)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-05-31T11:58:53.103

这解决了我的问题。angularjs 使用考虑小时时间的默认时区。将 ng-model 的时区选项设置为 UTC 清零时间......

```
ng-model-options="{timezone:'UTC'}" 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-04-26T11:16:02.397

问题是 Angular 在解析日期选择器上选择的日期时使用其默认时区。要解决此问题，您可以使用接受“时区”参数的 ng-model-options 指令。

```
<input type="text" ng-model-options="{timezone:'UTC'}" ... > 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-07T05:34:47.517

我将日期格式设置为 dd-mm-yyyy 作为我的要求。然后将日期类型设置为字符串。

```
<input type="text" class="form-control col-xs-9"
                        data-date-format="dd-MM-yyyy" data-autoclose="1"
                        ng-model="modelName"
                        date-type="string" bs-datepicker required> 
```**

# excel - 使用 Excel VBA 创建文件夹并从网络链接上传图像？

> ID：15226770
> 
> 赞同：1
> 
> 时间：2013-03-05T14:48:55.250
> 
> 标签：excel, vba

我正在寻找使用 excel 为大约 12000 个条目创建文件夹系统的方法，MkDir 函数似乎很简单，但我一直坚持如何让其余的工作。任何的意见都将会有帮助

我在想什么：

```
IndexID | Image
1       | sampleimage.com/images.jpg
2       | sampleimage.com/image.jpg
3       | sampleimage.com/moreimages.jpg
3       | sampleimage.com/evenmoreimages.jpg 
```

会变成这个文件结构：

```
%dir%\Images\1\images.jpg
%dir%\Images\2\image.jpg
%dir%\Images\3\moreimages.jpg
%dir%\Images\3\evenmoreimages.jpg 
```

或这个：

```
%dir%\Images\1\1.jpg
%dir%\Images\2\1.jpg
%dir%\Images\3\1.jpg
%dir%\Images\3\2.jpg 
```

如果这些文件尚未下载并保存到适当的文件夹，我想使用 VBA 下载这些文件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T15:49:23.290

这可能会帮助您：

[http://social.msdn.microsoft.com/Forums/en-US/isvvba/thread/beb6fa0e-fbc8-49df-9f2e-30f85d941fad/](http://social.msdn.microsoft.com/Forums/en-US/isvvba/thread/beb6fa0e-fbc8-49df-9f2e-30f85d941fad/)

他们展示了如何使用 API 从 Web 下载文件。用于设置目录结构并将其放在一起（此代码尚未运行...您必须添加 API 声明）：

```
Option Explicit

' api declarations go here
' ...

Const directory As String = "C:\Images"

Sub BacardiAndColaDoItDoIt()
    Dim sh As Excel.Worksheet
    Dim i As Long
    Dim iLastRow As Long
    Dim theFolderPath As String, theFilePath As String
    Dim fileName As String

    Set sh = ThisWorkbook.Worksheets("Sheet1")

    iLastRow = sh.Cells(sh.Rows.Count, 1).End(xlUp).Row

    ' create first directory
    On Error Resume Next
    MkDir directory
    On Error GoTo 0

    For i = 2 To iLastRow
        theFolderPath = directory & "\" & sh.Cells(i, 1).Value
        fileName = Mid(sh.Cells(i, 2).Value, InStrRev(sh.Cells(i, 2).Value, "/") + 1, Len(sh.Cells(i, 2).Value))
        theFilePath = theFolderPath & "\" & fileName

        ' create subdirectory
        On Error Resume Next
        MkDir theFolderPath
        On Error GoTo 0

        'DownloadFile(sh.Cells(i,2).value, theFilePath)
    Next i
End Sub 
```

# java - 在 Java 中重复一个字符串 - 类似于 Python 的单行简单性

> ID：15226771
> 
> 赞同：8
> 
> 时间：2013-03-05T14:49:07.537
> 
> 标签：java, string

我是来自python的java新手。我想知道如何在java中乘以一个字符串。在python中我会这样做：

```
str1 = "hello"
str2 = str1 * 10 
```

字符串 2 现在具有值：

```
#str2 == 'hellohellohellohellohellohellohellohellohellohello' 
```

我想知道在java中实现这一目标的最简单方法是什么。我必须使用 for 循环还是有内置方法？

**编辑 1**

感谢您的回复，我已经找到了一个优雅的解决方案来解决我的问题：

```
str2 = new String(new char[10]).replace("\0", "hello"); 
```

注意：这个答案最初是由 user102008 在这里发布的：[https ://stackoverflow.com/a/4903603](https://stackoverflow.com/a/4903603)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-05T14:52:00.143

虽然不是内置的，但 Guava 有一种使用[Strings](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Strings.html)的简短方法：

```
str2 = Strings.repeat("hello", 10); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T14:52:07.490

您可以使用字符串缓冲区。

```
String str1 = "hello";
StringBuffer buffer = new StringBuffer(str1);
for (int i = 0; i < 10; i++) {
    buffer.append(str1);
}
str2 = buffer.toString(); 
```

有关文档，请参阅[http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/StringBuffer.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/StringBuffer.html)。

如果您不打算使用任何线程，则可以使用`StringBuilder`与哪种工作方式相同`StringBuffer`但不是线程安全的工作方式。有关详细信息，请参阅[http://javahowto.blogspot.ca/2006/08/stringbuilder-vs-stringbuffer.html](http://javahowto.blogspot.ca/2006/08/stringbuilder-vs-stringbuffer.html)（感谢 TheCapn）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T14:52:28.387

for 循环可能是你最好的选择：

```
for (int i = 0; i < 10; i++)
  str2 += "hello"; 
```

如果您正在执行大量迭代（在 100+ 范围内），请考虑使用`StringBuilder`对象，因为每次修改字符串时，您都在分配新内存并释放旧字符串以进行垃圾回收。如果您多次这样做，这将是一个性能问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T14:51:15.893

我认为没有某种循环就没有办法做到这一点。

例如：

```
String result = "";
for (int i=0; i<10; i++){
    result += "hello";
} 
```

# ruby-on-rails - 如何在一页中按 created_time 显示我的微博和文章顺序？

> ID：15226777
> 
> 赞同：1
> 
> 时间：2013-03-05T14:49:25.683
> 
> 标签：ruby-on-rails

路线.rb

```
root :to => 'articles#index' 
```

微贴模型：

```
class Micropost < ActiveRecord::Base
  attr_accessible :content, :user_id
  belongs_to :user
  validates :user_id, presence: true
  validates :content, presence: true, length: { maximum: 100 }
end 
```

文章型号：

```
class Article < ActiveRecord::Base
  attr_accessible :content, :title

  validates :title, :presence => true,
                :length => { :minimum => 2 }  
  belongs_to :user
end 
```

以及articles_controller.rb 的索引define_method

```
def index
  @articles = Article.paginate(:page => params[:page], 
                       :per_page => 5,
                       :order => 'created_at DESC')

  respond_to do |format|
    format.html 
    format.json { render json: @articles }
  end
end 
```

虽然我不怎么写我的articles_controller#index 和索引视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T14:55:01.007

究竟是什么问题？

如果您希望所有文章都在一个页面上，请不要使用分页，而是：

```
Article.all 
```

如果您希望按 created_at 时间戳降序排列的所有文章：

```
Article.order("created_at DESC") 
```

或者您是否想要具有不同顺序的第二页？然后我会创建一个新的路由，它接受一个参数来告诉操作你想要哪种排序。然后在控制器内部：

```
if(params[:order_by_created_time])
  # ...
else
  # ... 
end

respond_to do |format|
  # ...
end 
```

* * *

**如果您的视图已经在工作**（并显示微博）：

```
def index
  @articles = Article.order("created_at DESC")

  respond_to do |format|
    format.html 
    format.json { render json: @articles }
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T14:56:38.493

鉴于您的代码有效，您应该能够简单地更改`updated_at`为`created_at`

```
def index
  @posts = Post.paginate(:page => params[:page], 
                       :per_page => 5,
                       :order => 'created_at DESC')

  respond_to do |format|
    format.html 
    format.json { render json: @posts }
  end
end 
```

# excel - 根据自定义 DPI，在 Excel 中打印到 PDF 会有所不同

> ID：15226779
> 
> 赞同：1
> 
> 时间：2013-03-05T14:49:27.217
> 
> 标签：excel, pdf, printing, dpi

今天早上我被叫来研究我不久前在 Excel 中构建的工具。该工具会生成一份报告，然后将其打印为 pdf。他们打电话给我的问题是，对于一位用户来说，PDF 中的行距是关闭的。我花了一段时间才弄清楚问题的原因。这是DPI。无法看到字体的用户将 Windows 的字体增加到 150%，并且由于某种原因导致 excel 以不同的方式导出为 pdf。

我知道问题出在哪里，但要求用户更改 DPI（强制用户注销）、重新登录、打开 excel 并运行我的宏，最后改回 DPI 不是一个合理的解决方案。我希望那里有一位大师能够帮助我找到解决方案。我不介意在程序运行时添加 VBA 代码来临时更改 DPI，但我不确定如何执行此操作或是否可能。

谢谢

为了更清楚地说明它的 Windows 7 和我所说的方面，如果您要更改分辨率，有一个链接询问您是否要“使文本和其他项目更大或更小”。滑块从默认的 100% 更改为 150%。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T15:38:02.417

我想不出克服这个问题的简单方法。您可以尝试创建一个 OLE 应用程序（例如在 C#、VB.NET 或 C++ 中），它在内部使用 Excel 来打开文件并将其导出为 PDF。然后，您可以在系统上创建一个新用户，并使用命令[runas](http://technet.microsoft.com/en-us/library/bb490994.aspx)从批处理文件中午餐此应用程序。[再次回到 Excel 中，您可以使用Shell](http://office.microsoft.com/en-ca/access-help/shell-function-HA001228906.aspx)命令午餐批处理文件。
工作流程将是：

1-使用VBA和Shell函数，以当前文件为参数从Excel调用批处理文件。
2- 批处理文件使用 runas 调用自定义应用程序 MyAppExportToPDF 并将当前 Excel 文件作为参数传递。
3- MyAppExportToPDF 使用 OLE 打开一个新的 Excel 实例，加载文件并将其导出为 PDF。

由于 MyAppExportToPDF 将在不同的用户中运行，因此新的 Excel 实例也应该在该用户下运行。该用户下的 DPI 设置应该是您需要的。

免责声明：这只是一个未经测试的想法。

# c# - Simple.Data 惰性引用空

> ID：15226780
> 
> 赞同：0
> 
> 时间：2013-03-05T14:49:27.877
> 
> 标签：c#, .net, dynamic, lazy-loading, simple.data

我正在查询一个有 3 条记录的表（工作）。该表有一个指向 JobTypes 和一个名为 Users 的表的外键。运行以下查询时，我得到了三条记录，但我只能延迟加载第一个返回的结果。

```
IEnumerable<dynamic> jobs = _db.Jobs.All()
            .Where(_db.Jobs.Completed == false)
            .Where(_db.Jobs.RunAfter <= DateTime.Now);

Console.Out.WriteLine("Jobs Found: {0}", jobs.ToList().Count);

foreach(var job in jobs.ToList())
{
    Console.Out.WriteLine("{0} from {1}", job.JobType.Name, job.User.Username); 
} 
```

输出是：

```
Jobs Found: 3
Some Job by admin 
```

错误消息是：无法对空引用执行运行时绑定

在发生错误时，使用 quickwatch job.JobType 和 job.User 都为 null，但 job.JobType_Id 和 job.User_Id 属性都有一个有效的 guid 作为值。

错误发生在 foreach 循环的第二次迭代中。当前所有作业都具有相同的用户 ID，但作业类型 ID 不同。我已经验证了每个表中的 id 都是正确的。关于延迟加载期间可能导致此错误的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T15:00:29.373

您是否尝试在配置文件中添加**MultipleActiveResultSets=true ？**

# asp.net-mvc-4 - MVC 4：传递用户组数据

> ID：15226783
> 
> 赞同：1
> 
> 时间：2013-03-05T14:49:32.553
> 
> 标签：asp.net-mvc-4, asp.net-membership

我正在用 ASP.NET 重写我的 PHP 网站并编写会员系统。

我知道我可以扩展 MembershipUser 以添加特定于成员的属性，但是如何传递布尔组信息，例如*Use Search*、*Edit Posts*等不是用户特定的？是否有我缺少的框架项目或者我应该创建一个超级对象来传递这个和其他设置？

本质上，我希望它是一种有效的方式来访问我的控制器中的用户组属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T20:03:53.210

除了扩展`MembershipProvider`，还可以扩展`RoleProvider`。RoleProvider 负责检查用户所属的组、注册新角色、将用户添加到角色等。要使用角色，您将使用包含许多静态方法的 Roles 类。

除此之外，每次点击控制器时，都可以查询`HttpContext.User`实现的属性`IPrincipal`。此属性具有`IsInRole`用于与 RoleProvider 通信以获取用户是否在特定组中的信息的方法。

此外，为了允许访问控制器或操作，您可以使用`Authorization`属性并列出有权访问控制器的特定角色。

角色可以存储在 cookie 中（以缓存它们），或者您可以`Application_AuthenticateRequest`在**global.asax**`GenericPrincipal`中实现并手动初始化。这个对象被传递给 HttpContext.User。此对象的构造函数接受使用 IsInRole 方法查询的角色数组。

```
protected void Application_AuthenticateRequest(Object sender, EventArgs e)
{
    // Check if user is authenticated
    if (HttpContext.User != null)
    {
        // Extract roles from a cookie if you used FormsAuthentication
        // or read them from a cookie or from some other cached location

        // Split roles into array of strings
        var roles = listOfRoles.ToArray(); // If it is stored in a List<string>.
        var identity = HttpContext.User.Identity;
        var principal = new GenericPrincipal(identity, roles);

        HttpContext.User = principal;
    }
} 
```

以上代码未经测试。我是从脑海中写出来的。它应该为您提供一个很好的图片，即如何缓存角色并以最有效的方式使用它们。

**更新**：如果您需要更高级的选项，其中每个角色都可以具有一个或多个功能，例如“使用搜索”、“可以做某事”、“可以做那件事”，我将实现以下安全逻辑：

*   用户
*   角色（用户属于角色）
*   AccessRight（角色可以拥有一项或多项访问权限）。

UsersRoles 表用于将用户添加到特定角色。RolesAccessRights 表是您为每个角色定义特定权限的地方。用户从不与功能性对话。（顺便说一句，此命名约定只是一个示例，您将遵循您的命名约定）。

在我的上一份工作中，这就是我们实现审计系统的方式（它是基于 Web 表单的）。但是，在 MVC 中，您可以覆盖`AuthorizationAttribute`以检查用户的角色并检查角色是否已定义访问权限。考虑到您有特定的安全要求，您必须在您看到需要和必要性的每个操作上使用此属性。

如果您打算实现此逻辑，请忘记 Membership、MembershipUser 和 Roles。老实说，我不再使用这些类了。我有我自己实现的自定义安全性，并且我在最后 4 个项目中使用了它，无需更新或修改。

**更新 2**：我们使用的安全解决方案基于自定义 MembershipProvider 和 RoleProvider。现在想一想，依赖它是一个错误，因为必须通过实体框架映射对 AccessLevel 表的访问。因此，我们必须想办法查询我们的安全表。

我对您的建议是完全忽略与成员资格和角色相关的类。第一个原因是，当您覆盖提供程序时，您将避免使用不必要的方法和属性来困扰自己。方法体中的方法太多了`throw new NotSupportedException()`。

# 建议的实施

您将需要以下表格：

1.  **用户**- （您至少需要三列 UserId、UserName、Password）。如果您想对密码进行哈希处理，您可能还必须存储盐。其他列，如 FirstName、LastName 等。我建议您将其存储在不同的表中并将其与 UserId 链接。至于 UserId 类型，是否使用`int`或由您决定`Guid`。
2.  **角色**- （您至少需要两列 RoleId、RoleName）。同样，与 UserId 一样，由您决定要使用哪种数据类型。
3.  **UsersRoles** - 存储 UserId 和 RoleId。您可能想要存储诸如**IsActive**角色是否是一个位值等属性。
4.  **AccessRights** - 这是您存储访问权限密钥的地方。在您的情况下，例如*UseSearch*、*EditPosts*、*DeletePosts*等。在这里您应该至少使用三列 AccessRightId、AccessRightKey 和 AccessRightDescription。如果您有很多访问权限密钥，此描述字段将变得非常有价值。
5.  **RolesAccessRights** - 您可以在此处定义已添加特定访问权限的角色。还具有**IsActive**位值以禁用对角色的特定访问权限。

在 MVC 中，您将覆盖**AuthorizationAttribute**。在此属性中，您将指定有权访问控制器和/或操作的访问权限列表。您打算如何执行此操作完全取决于您，但我会创建一个枚举，其中包含与 AccessRightsKeys 相同的值列表。这样您就可以使用强类型访问权限而不是基于字符串的列表。有关实现自定义授权属性的更多信息，请查看参考列表。

在此属性中，您将读取用户 ID 并检索角色。将您指定的 AccessRightsKeys 与角色（RolesAccessRights 表）进行比较，以查看角色是否具有访问权限以及规则是否处于活动状态。

至于基于解决方案的实现，我将实现与基于安全的存储库和工作单元解决方案通信的安全服务层。因为您使用的是 MySQL，所以我不知道您可以使用哪个 ORM，或者您是否必须依赖 ADO.NET 和 MySQL 的 OLEDB 提供程序。

我通常的方法是自上而下的方法。我从高层（如表示层）实现并向下到数据访问层。这样，最后我只有那些我真正使用的方法，并且没有冗余。

好吧，我希望这能给你一些关于如何做到这一点的图片。至于所需时间，您可以在大约 8-10 小时内完成。

参考：

1.  [实现角色提供者](http://msdn.microsoft.com/en-us/library/8fw7xh74%28v=vs.100%29.aspx)
2.  [角色类](http://msdn.microsoft.com/en-us/library/system.web.security.roles.aspx)
3.  [如何：创建自定义 AuthorizationAttribute](http://msdn.microsoft.com/en-us/library/ee707357%28v=vs.91%29.aspx)

# php - 显示进度 php 的脚本

> ID：15226786
> 
> 赞同：0
> 
> 时间：2013-03-05T14:49:34.480
> 
> 标签：php, mysql

我想知道如何使用 PHP 创建一个脚本，该脚本将在 x 时间后执行。

例如：玩家建造房屋需要 2 小时才能完成，当他点击“建造房屋”按钮时，会设置一个脚本来计算时间，并在 2 小时后为该特定玩家创建房屋，同时显示进度条在房子准备好之前还有很多时间。

老实说，我不知道如何做到这一点，所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T14:55:44.860

如果有一个数据库附加到您的游戏项目。我会使用几个数据库表。其中一个将包含用户详细信息（对于每个玩家），另一个将包含时间（build_time）：

```
id (int)    item (varchar)    time_to_complete (int)
  1           cottage                60
  2           house                  120
  3           mansion                240 
```

然后另一个具有构建队列的表（build_queue）

```
id(int)  user_id(int)  item_id(int)  start_time        is_complete (bool)
1             5             2        14:53 05/03/2013       0
2             6             1        12:02 05/03/2013       1
3             6             2        15:15 05/03/2013       0 
```

然后您的 PHP 可以检查游戏世界正在构建的项目（obv 仅检查未完成的项目，一旦完成，将 is_complete 字段设置为 true）。

所以对于一个玩家，你会做这样的事情：

```
SELECT build_queue.*, build_time.time_to_complete 
  INNER JOIN build_time ON item_id = build_time.id
  FROM build_queue WHERE 
     user_id = xx AND is_complete = 0; 
```

然后您可以检查开始时间和 time_to_complete 字段以查看每个玩家是否几乎完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T14:52:09.087

您需要**考虑**以下几点：

```
session_start();
if(!$_SESSION['buildStart']) $_SESSION['buildStart'] = time();
if($_SESSION['buildStart'] >= time() + 60*60*2 ) echo "it is done!"; 
```

# visual-c++ - 区分单击和双击 C++

> ID：15226791
> 
> 赞同：2
> 
> 时间：2013-03-05T14:49:43.193
> 
> 标签：visual-c++, mfc, mouse, double-click

我有一个应用程序，其中双击图像视图区域会更改图像视图的布局。同样，单击时，图像上将放置一个点。我的问题是，双击时这两个功能都可以工作。

当然我知道，当双击发生时，控件首先转到 LButtonDown。当双击发生时，我不希望点功能起作用。我已经为此工作了一个多星期。请帮忙。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-05T15:03:52.097

解决这个问题的最简单方法是构建一个[有限状态机](http://en.wikipedia.org/wiki/Finite-state_machine)来处理鼠标点击。基本上，这将是一个单例对象，它从您当前使用的鼠标单击事件中获取输入。它的输出将是`SingleClickDetected, DoubleClickDetected, ...`. 红色箭头表示您正在向应用程序的其余部分报告的事件。括号表示您要报告的事件。

![密克罗尼西亚联邦](../Images/67b745ce3cce6f6848c951914d375bb5.png)

当然，如果您必须直接处理事件而不是事件，则必须修改此`MouseDown`状态`MouseUp`机`MouseClick`。会稍微大一点，但是思路基本一样。

编辑：从评论看来，Windows 似乎没有清楚地报告单击与双击，您需要将它们分开。此场景的状态机： ![FSM2](../Images/1b515d3fe56220a3cbf26d7bf1be43fd.png)

这对于您要尝试做的事情可能有点过头了，特别是因为大多数（如果不是所有）基于 GUI 的程序在所有事物的历史上都从未使用*过*双击拖动。它确实展示了基本思想，并展示了如何扩展状态机来处理不同类型的按钮点击。此外，如果您愿意，您可以处理双击右键、同时涉及左右按钮的拖动，或者您可以想到并合并到 UI 中的任何其他场景。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-05T17:58:22.570

我编写了以下代码并且它有效。

```
UINT TimerId;
int clicks;

    VOID CALLBACK TimerProc(HWND hWnd, UINT nMsg, UINT nIDEvent, DWORD dwTime)
    {
        KillTimer(NULL, TimerId);
        if (clicks < 2 && !double_click){
            MessageBox(hWnd, L"Show Widget", L"Widget", MB_OK);
        }

        clicks = 0;
    }

  LRESULT CALLBACK WndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam)
    {

        int wmId, wmEvent;
        PAINTSTRUCT ps;
        HDC hdc;
        TCHAR szHello[MAX_LOADSTRING];
        LoadString(hInst, IDS_HELLO, szHello, MAX_LOADSTRING);
        UINT uID;
        UINT uMouseMsg;

        uID = (UINT)wParam;
        uMouseMsg = (UINT)lParam;

        if (uMouseMsg == WM_LBUTTONDBLCLK){
            double_click = true;
            MessageBox(hWnd, L"Double click", L"CAPT", MB_OK);
            return 0;
        }
        if (uMouseMsg == WM_LBUTTONDOWN){
            double_click = false;
            clicks++;

            //single click opens context menu
            if (clicks == 1){
                TimerId = SetTimer(NULL, 0, 500, &TimerProc);
            }
            return 0;
        }
    ,...
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T14:54:56.013

尝试存储最后一个 LButtonDown 的时间戳；如果最后一个时间戳和当前事件产生的时间戳之间的时间差太短，你可以取消你的操作（但仍然存储新的 LButtonDown 时间戳）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T14:57:54.880

您唯一能做的就是在每次收到点击事件时等待一小段时间，并在执行单击响应之前测试在此期间是否没有发生相当于双击事件的事件。这可能是新错误和无响应 UI 的来源。也许尝试更改用户交互以解决问题。

编辑：你在这个问题上工作了一个多星期的事实是糟糕的用户交互设计的症状。“双击”仍然意味着发生了两次单击，这意味着应用程序自然应该执行单击的操作。检查桌面上安装的应用程序的用户界面以验证这一点。您是否考虑过使用不同的用户媒介来触发 UI 响应？例如，您可以使用右键将点放在图像上。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-29T17:05:11.757

@ET 的回答很到位。要实现类似的功能，您确实需要一个与消息循环一起运行的计时器。

在我的应用程序中，我希望能够将鼠标向下/向上与双击区分开来，因为我希望双击不撤消拖动操作（想象一下带有左键拖动和双击以适应的选择框）。

以下代码使用`PreTranslateMessage`. 出于懒惰，我没有添加计时器。因此，如果您在按住左键后不立即移动鼠标，那么 UI 的行为会有点“有趣”。就我而言，这是一个小问题。

```
BOOL MyWindow::PreTranslateMessage(MSG *pMsg)
{
//From https://msdn.microsoft.com/en-us/library/windows/desktop/ms645606(v=vs.85).aspx
//Double-clicking the left mouse button actually generates a sequence of four messages: 
//WM_LBUTTONDOWN, WM_LBUTTONUP, WM_LBUTTONDBLCLK, and WM_LBUTTONUP

//So here's the problem. If an button up message arrives, we can't just
//take it, because it may be followed by a double click message. So we check
//for this.

//Ideally you need a timer - what happens if you don't get any messages
//after the button up or down? But here we get lazy and assume a message
//will come "soon enough".

static bool upMessageStored = false;
static bool dnMessageStored = false;
static MSG upMessage, dnMessage;
static bool processDnNow = false, processUpNow = false;

//This logic sequence absorbs all button up and down messages, storing them to be sent
//if something other than a double click message immediately follows.

if (!(pMsg->message == WM_LBUTTONDBLCLK ||
      pMsg->message == WM_LBUTTONDOWN ||
      pMsg->message == WM_LBUTTONUP) &&
    (upMessageStored || dnMessageStored))
{
    //If we receive any message other than double click and we've stored the messages,
    //then post them.
    Output::Message(L"Stored messages posted.\n");
    if (upMessageStored)
    {
        processUpNow = true;
        upMessageStored = false;
        this->PostMessage(upMessage.message, upMessage.wParam, upMessage.lParam);
    }
    if (dnMessageStored)
    {
        processDnNow = true;
        dnMessageStored = false;
        this->PostMessage(dnMessage.message, dnMessage.wParam, dnMessage.lParam);
    }
    return TitlelessWindow::PreTranslateMessage(pMsg);
}

if (pMsg->message == WM_LBUTTONDOWN && !processDnNow)
{
    Output::Message(L"WM_LBUTTONDOWN absorbed; message stored\n");
    dnMessage = *pMsg;
    dnMessageStored = true;
    return TRUE; //swallow this message.
}
else if (pMsg->message == WM_LBUTTONUP && !processUpNow)
{
    Output::Message(L"WM_LBUTTONUP absorbed; message stored\n");
    upMessage = *pMsg;
    upMessageStored = true;
    return TRUE; //swallow this message.
}
else if (pMsg->message == WM_LBUTTONDBLCLK)
{
    Output::Message(L"WM_LBUTTONDBLCLK; stored message discarded\n");
    upMessageStored = false;
    dnMessageStored = false;
    processUpNow = false;
    processDnNow = false;
}

//If we get here, we are processing messages normally. Be sure we clear the flags
//for up and down.
processDnNow = false;
processUpNow = false;
return ParentClass::PreTranslateMessage(pMsg);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-22T02:20:23.673

我真的很喜欢有限状态机的答案，但它有一个缺陷。没有可以超过的“单击时间”之类的东西。

如果您仔细观察鼠标的工作，您会发现：-

单击不是一个事件，而是= WM_LBUTTONDOWN，WM_LBUTTONUP，这与两者之间的时间无关，无论如何都会发生适当的动作

双击鼠标左键实际上会生成四个消息序列：WM_LBUTTONDOWN、WM_LBUTTONUP、WM_LBUTTONDBLCLK 和 WM_LBUTTONUP，因此您应该使用第 3 个标志来发挥自己的优势

顺便说一句，我也在做这样的事情。谢谢！

# google-app-engine - 使用自动生成的 Classendpoint 插入方法插入实体时抛出 Nullpointerexception

> ID：15226793
> 
> 赞同：7
> 
> 时间：2013-03-05T14:49:48.080
> 
> 标签：google-app-engine, google-cloud-endpoints

我对使用自动生成的端点类感到困惑。我想使用生成的端点将新对象插入数据存储区。但是，抛出异常。

```
fooEndpoint.insertFoo(foo); // throws null pointer exception 
```

我的实体类与此来源的给定示例类似： [https://developers.google.com/appengine/docs/java/datastore/jpa/overview。](https://developers.google.com/appengine/docs/java/datastore/jpa/overview.)

这是我的实体：

```
@Entity
public class Foo {
    @Id
    @GeneratedValue(strategy=GenerationType.IDENTITY)
    private Key ID; 
```

这是堆栈跟踪：

```
java.lang.NullPointerException
at org.datanucleus.api.jpa.JPAEntityManager.find(JPAEntityManager.java:318)
at org.datanucleus.api.jpa.JPAEntityManager.find(JPAEntityManager.java:256)
at com.FooEndpoint.containsFoo(FooEndpoint.java:150)
at com.FooEndpoint.insertFoo(FooEndpoint.java:96) 
```

另一方面，当我使用 EntityManager 持久方法时，我可以插入新对象。因为，这不会检查数据存储上是否存在。

我希望，classEndpoint 插入方法应该保存对象并将自动键分配给 ID 字段。

或者我需要初始化 ID 字段。

这是自动生成的端点类 insertFoo 方法。

```
 /**
 * This inserts a new entity into App Engine datastore. If the entity already
 * exists in the datastore, an exception is thrown.
 * It uses HTTP POST method.
 *
 * @param foo the entity to be inserted.
 * @return The inserted entity.
 */
public Foo insertFoo(Foo foo) {
    EntityManager mgr = getEntityManager();
    try {
        if (containsFoo(foo)) {
            throw new EntityExistsException("Object already exists");
        }
        mgr.persist(foo);
    } finally {
        mgr.close();
    }
    return foo;
} 
```

这是 containsFoo 方法

```
 private boolean containsFoo(Foo foo) {
    EntityManager mgr = getEntityManager();
    boolean contains = true;
    try {
        Foo item = mgr.find(Foo.class, foo.getID());  // exception occurs here
        if (item == null) {
            contains = false;
        }
    } finally {
        mgr.close();
    }
    return contains;
} 
```

foo.getID() 为空。因为，它是新对象。我期待着，应用引擎会为它创建一个密钥。或者我需要为它显式创建一个密钥？

Foo 类中的其他字段是简单类型，例如字符串和布尔值。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-10T01:00:36.803

我有完全相同的问题。我将介绍我解决它的方法。

原始自动生成的 Endpoints 类相关代码：

```
private boolean containsFoo(Foo foo) {
    EntityManager mgr = getEntityManager(); 
    boolean contains = true;
    try {
        Foo item = mgr.find(Foo.class, foo.getID());
        if (item == null) {
            contains = false;
        }
    } finally {
        mgr.close();
    }
    return contains;
} 
```

更改了相关代码以包括对作为参数传递的实体对象的空检查。

```
private boolean containsFoo(Foo foo) {
    EntityManager mgr = getEntityManager(); 
    boolean contains = true;
    try {
        // If no ID was set, the entity doesn't exist yet.
        if(foo.getID() == null)
            return false;
        Foo item = mgr.find(Foo.class, foo.getID());
        if (item == null) {
            contains = false;
        }
    } finally {
        mgr.close();
    }
    return contains;
} 
```

这样它就会按预期工作，尽管我相信会出现更有经验的答案和解释。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-25T07:34:07.850

在使用 Eclipse Plugin 自动生成云端点（通过选择“Google > Generate Cloud Endpoint Class”）后，我遇到了同样的问题。

根据您的建议，我补充说：

if(foo.getID() == null) // 将 foo 替换为你自己的对象名 return false;

问题解决了。

谷歌怎么还没有更新自动生成的代码，因为这一定是一个反复出现的问题？

感谢您的解决方案。

# asp.net - 所选索引上的组合框更改仅在按 enter 时触发

> ID：15226794
> 
> 赞同：2
> 
> 时间：2013-03-05T14:49:48.540
> 
> 标签：asp.net, vb.net, combobox, ajaxcontroltoolkit

您好，正如标题所述，我的 OnSelectedIndexChanged 事件仅在您选择项目然后按 时触发`Enter`。我的组合框和网格视图从数据源中获取它们的值。OnSelectedIndexChanged 网格视图过滤器，但组合框始终具有所有值。任何想法为什么会发生这种情况？

ASP

```
<asp:combobox ID="cbCustomer" runat="server" AutoCompleteMode="SuggestAppend" AutoPostBack="True" 
    DataSourceID="dataSourceCBCust" DataTextField="CUST_NAME" DataValueField="CUST_NAME" MaxLength="0" 
    style="display: inline;" OnSelectedIndexChanged="cbCustomer_SelectedIndexChanged">
</asp:combobox>
<asp:UpdatePanel ID="upCustomer" runat="server" ChildrenAsTriggers="true" UpdateMode="Conditional">
    <Triggers>
        <asp:AsyncPostBackTrigger ControlID="cbCustomer" EventName ="SelectedIndexChanged" />   
    </Triggers>
       <ContentTemplate>
            <asp:GridView ID="gvCustomer" runat="server" AllowPaging="True" DataSourceID="dataSourceGVCust" 
                 AutoGenerateColumns="True" Visible="true" ShowHeaderWhenEmpty="True">  
           </asp:GridView>  
       </ContentTemplate> 
</asp:UpdatePanel> 
```

VB

```
Protected Sub cbCustomer_SelectedIndexChanged(sender As Object, e As EventArgs) Handles cbCustomer.SelectedIndexChanged
     'do stuff
End Sub 
```

# python - 重定向到unix中的文件

> ID：15226802
> 
> 赞同：0
> 
> 时间：2013-03-05T14:50:05.620
> 
> 标签：python, unix

我需要从 unix 脚本生成一个 python 脚本。

我知道`echo "your text" > your_python_filename`可以，但我需要注意缩进和引号/特殊字符。下面是我的内容。

```
import getopt
for arg in sys.argv:
    print arg
    for arg in sys.argv:
        print arg
print "End" 
```

我希望将这些内容提供给 unix shell 脚本，比如 generate.sh，并且在运行 generate.sh 时，应该生成具有正确缩进和特殊字符和引号的我的 python output.py。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T15:04:34.517

```
#cat << EOF > output.py
>import getopt
>for arg in sys.argv:
>    print arg
>    for arg in sys.argv:
>        print arg
>print "End"
>EOF 
```

现在你可以这样做： cat output.py 并且你会看到你的代码缩进了。

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T15:06:36.813

您可以使用“HEREDOC”并将源代码直接提供给 Python 解释器。

```
python - arg1 anotherarg <<EOP
> import getopt,sys
> for arg in sys.argv:
>     print arg
>     for arg in sys.argv:
>         print arg
> print "End"
> EOP 
```

确保第一个参数是`-`从标准输入读取源代码。

# asp.net - asp.net 移动/桌面站点切换按钮，切换母版页，但样式“卡住”

> ID：15226803
> 
> 赞同：0
> 
> 时间：2013-03-05T14:50:10.317
> 
> 标签：asp.net, css, mobile, master-pages, switch-statement

# 概括

通过 asp.net 4.0 中的按钮事件翻转母版页时，我遇到了样式问题。新的 master 切换，但旧 master 的 css 仍然存在。我不明白这是怎么发生的，因为样式是在旧主人的头脑中定义的，我可以通过标记清楚地看到新主人正在显示的应该是一组完全不同的样式。此外，查看源代码会在头部显示所有新的 css 声明。我怎样才能让它“刷新”或“重新加载”？

# 一些细节

我正在实现我的 asp.net 网站的移动版本。如果检测到移动设备，我会设置一个 cookie 并将 preinit 中的母版页切换到移动设备友好的页面。这工作正常：

```
protected virtual void Page_PreInit(Object sender, EventArgs e)
{
    if (IsMobile)
        this.Page.MasterPageFile = "m-" + this.Page.MasterPageFile;
} 
```

我在底部有一个“完整站点”按钮，可让您在移动和桌面视图之间来回切换。单击它时，我更改了 cookie 中的值。然后当页面重定向到自身时，检查该值，并给出相应的母版页。这也“有效”，我可以告诉正确的母版页正在通过标记呈现。即使在显示桌面母版时，移动版本的样式也会保留。我做了重定向，认为它会阻止这种情况。

```
// desktop/mobile site toggle button click event
protected void viewMobileButton_Click(Object sender, EventArgs e)
{
    HttpCookie isMobileCookie = Cookies.snatchCookie("isMobile");

    if (bool.Parse(isMobileCookie.Value))
        Cookies.bakeCookie("isMobile", "false");
    else
        Cookies.bakeCookie("isMobile", "true");

    Response.Redirect(Request.RawUrl);
} 
```

这是我第一次做这样的事情，并且不确定我是否以正确的方式去做，或者如何从这里调试。提前感谢您的帮助。

# 编辑

好的，所以我发现它与 JQuery Mobile Scripts 有关。JQuery Mobile 有这种将页面绑定在一起的方式。我不完全理解它，我认为他们将它用于页面转换，并且它阻止了我的新 CSS 注册。当我关闭它时，我的母版页可以正常翻转并包含 css。我正在寻找一种在重定向之前关闭 JQuery Mobile 的方法。请注意确定如何。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T20:04:26.620

该问题最终与页面转换的 JQuery Mobile AJAX 有关。JQuery Mobile 不会在第一次之后的附加页面请求上加载文档的头部。

因此，当我将移动主机切换到桌面主机时，文档的头部不会加载以引入我的样式。有几种方法可以解决这个问题：

这种方式只是完全关闭 AJAX，并解决了问题，但你不能从中受益：

```
<form data-ajax="false"> 
```

这是一种有问题的方法，但请提醒您，在 JQuery Mobile 初始化后，它将无法通过事件工作，因此您也无法从中受益：

```
$.mobile.ajaxEnabled = false; 
```

如果您必须使用 onclick 事件和事件处理程序首先通过页面重定向，我支持的上述两种解决方案可能会起作用。

更好的解决方案是在链接中添加 rel="external" 以告诉 JQM 它是和传出链接。

```
<a href="myself.com?mobile=true" rel="external" > 
```

但是因为我无法运行一些我想要更改 cookie 的代码，所以我必须传递一个查询字符串参数，在 preinit 上检查它，然后设置我的页面也在 preinit 上查看的 cookie 并翻转掌握。

这是我下面的完整解决方案，以防有人在外面做完全相同的事情。请注意，因为我的网站使用别名，所以我必须阅读 Request.RawUrl 并自己解析它，因为 Request.QueryString 对象不包含我传递的值。

```
 // reusable function that parses a string in standard query string format(foo=bar&dave=awesome) into a Dictionary collection of key/value pairs
    // return the reference to the object, you have to assign it to a local un-instantiated name
    // will accept a full url, or just a query string
    protected Dictionary<string, string> parseQueryString(string url)
    {
        Dictionary<string, string> d = new Dictionary<string, string>();

        if (!string.IsNullOrEmpty(url))
        {
            // if the string is still a full url vs just the query string
            if (url.Contains("?"))
            {
                string[] urlArray = url.Split('?');
                url = urlArray[1]; // snip the non query string business away
            }

            string[] paramArray = url.Split('&');

            foreach (string param in paramArray)
            {
                if (param.Contains("="))
                {
                    int index = param.IndexOf('=');
                    d.Add(param.Substring(0, index), param.Substring(++index));
                }
            }
        }
        return d;
    } 
```

然后我只是使用我的字典对象来评估和重建我的 url 与相反的移动值，动态设置切换链接上的 href。一些代码显然被遗漏了，但是从角度来看， base._iPage.QueryStringParams 保存了我返回的字典对象，而 base._iPage.IsMobile 只是一个布尔属性，我也通过我使用的页面接口拥有我所有的页面，和用户控件等可以交谈。

```
 // get the left side fo the url, without querystrings
        StringBuilder url = new StringBuilder(Request.RawUrl.Split('?')[0]);

        // build link to self, preserving query strings, except flipping mobile value
        if (base._iPage.QueryStringParams.Count != 0)
        {
            if (base._iPage.QueryStringParams.ContainsKey("mobile"))
            {
                // set to opposite of current
                base._iPage.QueryStringParams["mobile"] = (!base._iPage.IsMobile).ToString();
            }

            int count = 0;
            url.Append('?');

            // loop through query string params, and add them back on
            foreach (KeyValuePair<string, string> item in base._iPage.QueryStringParams)
            {
                count++;
                url.Append(item.Key + "=" + item.Value + (count == base._iPage.QueryStringParams.Count ? "" : "&" )); 
            }
        }

        // assign rebuild url to href of toggle link
        viewMobileButton.HRef = url.ToString();
    } 
```

然后在我的 pageinit 上，这是我实际检查的地方，首先是查询字符串，然后是 cookie，如果它们都不存在，我运行我的移动检测方法，并设置一个 cookie，以及我的接口 bool 属性，以便轻松访问条件取决于它。

```
 QueryStringParams = base.parseQueryString(Request.RawUrl);

        if (QueryStringParams.ContainsKey("mobile") ? QueryStringParams["mobile"].ToLower().Equals("true") : false)
        {
            Cookies.bakeCookie("isMobile", "true"); // create a cookie
            IsMobile = true;
        }
        else if (QueryStringParams.ContainsKey("mobile") ? QueryStringParams["mobile"].ToLower().Equals("false") : false)
        {
            Cookies.bakeCookie("isMobile", "false"); // create a cookie
            IsMobile = false;
        }
        else
        {
            IsMobile = base.mobileDetection();
        }

        if (IsMobile)
            this.Page.MasterPageFile = "m-" + this.Page.MasterPageFile;
    } 
```

# haskell - 使用 FFI 将“C”延迟函数导入 Haskell

> ID：15226806
> 
> 赞同：5
> 
> 时间：2013-03-05T14:50:24.083
> 
> 标签：haskell, ffi

WiringPi 'C' 库中有一个函数`delay`，类型为

`void delay(unsigned int howLong);`

此函数将代码的执行延迟`howLong`几毫秒。我在 haskell 中编写了绑定代码，以便能够调用此函数。haskell代码如下，

```
foreign import ccall "wiringPi.h delay" c_delay :: CUInt -> IO ()
hdelay :: Int -> IO ()
hdelay howlong = c_delay (fromIntegral howlong) 
```

之后，我写了一个简单的haskell程序来调用这个函数。简单的haskell代码如下..

--导入相关库后我做了

```
main = wiringPiSetup
    >> delay 5000 
```

但是延迟不会发生，或者说 ghc 编译器生成的可执行文件会立即退出。

有人能告诉我这里可能出什么问题吗？朝正确的方向轻推会有所帮助。

欢呼和问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T15:24:53.923

请忽略块引用中的部分，并查看下面的更新 - 由于与之相关的评论，我保留了原始的非解决方案。

> 您应该将其标记为`import`，`unsafe`因为您希望主线程在函数执行时阻塞（请参阅@carl 下面的评论）。默认情况下，导入是[安全](http://www.haskell.org/haskellwiki/GHC/Using_the_FFI#Improving_efficiency)的，而不是`unsafe`. 因此，将函数签名更改为此应该使主线程阻塞：
> 
> ```
> foreign import ccall unsafe "wiring.h delay" c_delay :: CUInt -> IO () 
> ```
> 
> 此外，如果您计划编写多线程代码，[多线程 FFI](http://www.haskell.org/ghc/docs/latest/html/users_guide/ffi-ghc.html#ffi-threads)的 GHC 文档非常有用。[这](http://www.vex.net/~trebla/haskell/ghc-conc-ffi.xhtml)似乎也是一个不错的开端。

**更新**

该行为似乎是由于信号中断处理（如果我没记错的话，这是在 GHC 7.4+ 中添加以修复一些错误）。更多细节在这里： [http ://hackage.haskell.org/trac/ghc/wiki/Commentary/Rts/Signals](http://hackage.haskell.org/trac/ghc/wiki/Commentary/Rts/Signals)

请注意上面页面上的评论：`Signal handling differs between the threaded version of the runtime and the non-threaded version`。

**方法 1 -**在 FFI 代码中处理信号中断：下面是一个玩具代码，它处理睡眠中的中断。我使用 ghc 7.6.1 在 Linux 2.6.18 上对其进行了测试。

C代码：

```
/** ctest.c **/
#include <unistd.h>
#include <stdio.h>
#include <time.h>

unsigned delay(unsigned sec)
{
  struct timespec req={0};
  req.tv_sec = sec;
  req.tv_nsec = 0;

  while (nanosleep(&req, &req) == -1) {
    printf("Got interrupt, continuing\n");
    continue;
    }
  return 1;
} 
```

哈斯克尔代码：

```
{-# LANGUAGE ForeignFunctionInterface #-}
-- Filename Test.hs
module Main (main) where
import Foreign.C.Types

foreign import ccall safe "delay" delay :: CUInt -> IO CUInt

main =  do
    putStrLn "Sleeping"
    n <- delay 2000
    putStrLn $ "Got return code from sleep: " ++ show n 
```

现在，在使用 ghc 7.6.1 (command: `ghc Test.hs ctest.c`) 编译后，它会一直等到 sleep 完成，并在每次在 sleep 期间收到中断信号时打印一条消息：

```
./Test
Sleeping
Got interrupt, continuing
Got interrupt, continuing
Got interrupt, continuing
Got interrupt, continuing
....
....
Got return code from sleep: 1 
```

**方法 2 -**在调用 FFI 代码之前禁用 SIGVTALRM，然后重新启用：

我不确定禁用 SIGVTALRM 有什么影响。如果您无法更改 FFI 代码，这是在 FFI 调用期间禁用 SIGVTALRM 的替代方法。因此，FFI 代码在睡眠期间不会被中断（假设是 SIGVTALRM 导致了中断）。

```
{-# LANGUAGE ForeignFunctionInterface #-}
-- Test.hs
module Main (main) where
import Foreign.C.Types
import System.Posix.Signals

foreign import ccall safe "delay" delay :: CUInt -> IO CUInt

main =  do
    putStrLn "Sleeping"
    -- Block SIGVTALRM temporarily to avoid interrupts while sleeping
    blockSignals $ addSignal sigVTALRM emptySignalSet
    n <- delay 2
    putStrLn $ "Got return code from sleep: " ++ show n
    -- Unblock SIGVTALRM
    unblockSignals $ addSignal sigVTALRM emptySignalSet
    return () 
```

# knockout.js - KoGrid - 自动滚动到选中

> ID：15226810
> 
> 赞同：0
> 
> 时间：2013-03-05T14:50:34.733
> 
> 标签：knockout.js, kogrid

我想使用 KoGrid 显示“资产”列表，并在 Google 地图中显示相同的资产。当用户单击地图中的图钉时，列表中的相应资产应向下滚动以显示在顶部。奖励：如果它已经在视野中，请不要做任何事情。

我之前在不同的列表上做过这个，与排序和过滤的交互给我带来了一段时间的问题（我每次排序或过滤时都必须重新计算资产的索引）。

我可以用 koGrid 做到这一点吗？在切换到这个网格之前，我需要弄清楚这一点。任何示例或帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-05T04:36:34.630

我认为您将需要获取对网格的引用并调用 grids`$viewport.scrolltop`方法。注意：我没有对此进行测试，我只是根据我做过的类似的事情来编写它。

```
plugins: [{
    onGridInit: function (g) {
// maybe add a method to your view model
        viewModel.scrollTo = function (index, key) { // index of item in filter data, key is something i made up
            if (index > g.filteredData().length - 8) { // 8 is the default excess_rows value in kogrid
                g.$viewport.scrollTop(g.$viewport.scrollTop() + (g.config.rowHeight * index));
            }
            // if you want to select the row (set time out because ko grid dynamically creates the rows rendered in the grid)
            setTimeout(function () {
                var i = ko.utils.arrayFirst(g.renderedRows(), function (row) {
                    // some function that finds the entity
                    return row.entity.key === key;
                });

                if (i) {
                    g.selectionService.ChangeSelection(i) // this will select the row
                }
            }, 100);

        }// assume self is your view model
    }
}] 
```

# java - 弹簧 - JMS - 数据库

> ID：15226812
> 
> 赞同：0
> 
> 时间：2013-03-05T14:50:44.777
> 
> 标签：java, spring, transactions, jms

我的问题如下：我有一个服务，它查询数据库并检索一些记录。然后它使用该信息更新外部系统，最后更新回数据库。

使用 spring trascations 和 weblogic jta 事务管理器，我能够使用下面的示例代码不丢失任何消息，以防万一

1.  没有记录被检索。（这些对于外部系统是强制性的）
2.  外部系统错误
3.  更新数据库失败

因此，在所有上述情况下，JMS 侦听器都会将错误消息放回队列中。

我的问题是，有没有更好的方法，使用 Spring 及其所有优点来管理它？下面的示例代码明确抛出了一个 RuntimeException，我认为这不是一个好的设计......

请您发表意见。

编辑：提交侦听器 MDP 正在轮询队列，其配置如下所示。消息被消费后，它调用服务的 registerDocument()。（另一个 Spring bean）。该服务调用 2 次 DAO 和外部系统。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T15:11:08.357

查看 Spring 关于 JmsTemplate 和消息驱动 POJO 的[文档](http://static.springsource.org/spring/docs/3.0.x/reference/jms.html)，了解核心 Spring 框架中的模式。

[Spring Integration](http://www.springsource.org/spring-integration)对与面向消息的模式相关的更高级别的抽象进行建模。

# android - Android的标准FFT类/库？

> ID：15226814
> 
> 赞同：4
> 
> 时间：2013-03-05T14:50:47.340
> 
> 标签：android, signal-processing, fft, frequency, trigonometry

我计划通过音频“可视化”一些图形数据。简而言之：我从一些图像数据中得到了一堆频率和相关的幅度值。这个频率/幅度表 - 可以说是 256 对数据 - 必须转换为相关的正弦波形。

一种解决方案是为每个表条目生成具有不同频率的正弦波形。这意味着生成最多 256 次的正弦波形。但我猜这很慢。那么使用 FFT 转换应该是一个更好的解决方案吗？

所以我的问题是：是否有某种可用于 Android 的快速且易于使用的 FFT 标准？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T14:57:35.123

在我的 Android 项目中，我使用了在 Android 上完美运行的[JTranforms](https://sites.google.com/site/piotrwendykier/software/jtransforms)。

示例代码：

```
android.os.Process.setThreadPriority(android.os.Process.THREAD_PRIORITY_URGENT_AUDIO);

AudioRecord ar = // initialize AudioRecord here;
ar.startRecording();

// Here's the Fast Fourier Transform from JTransforms
DoubleFFT_1D fft = new DoubleFFT_1D(samples.length);

do {
  // Read audio to 'samples' array and convert it to double[]
  ar.read(samples, 0, samples.length);

  // Will store FFT in 'samplesD'
  fft.realForward(samplesD);

} while ( /* condition */ );

ar.stop();
ar.release(); 
```

* * *

更新：

可以在 github 上找到它[**`JTransforms`**](https://sites.google.com/site/piotrwendykier/software/jtransforms)，在*这里* [可以](https://mvnrepository.com/artifact/com.github.wendykierp/JTransforms/3.1)[作为](https://github.com/wendykierp/JTransforms)Maven*插件*使用。

要与最新的 Gradle 版本一起使用，请执行以下操作：

```
dependencies {
    ... 
    implementation 'com.github.wendykierp:JTransforms:3.1'
} 
```

# visual-studio - 未能添加对 WikiNetParser 的引用。请确保它在全局程序集缓存中

> ID：15226815
> 
> 赞同：0
> 
> 时间：2013-03-05T14:50:47.970
> 
> 标签：visual-studio, visual-studio-2012, nuget, nuget-package

我正在尝试通过使用“管理 Nuget 引用”在 Visual Studio 2012 中添加对项目的引用。该软件包是“Wiki .NET Parser”（版本 2.5.2.0）。

当我尝试添加它时，我得到以下信息：

```
Successfully installed 'WikiNetParser 2.5.2.0'.
Successfully uninstalled 'WikiNetParser 2.5.2.0'.
Install failed. Rolling back...
Failed to add reference to 'WikiNetParser'. Please make sure that it is in the Global Assembly Cache. 
```

我也尝试创建一个干净的空白控制台项目 - 但我仍然遇到同样的问题。有任何想法吗？

在 Google 上进行的搜索没有返回任何特定于此组件的内容

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T06:48:07.740

该软件包似乎具有格式错误的清单。我已将此问题报告给包的作者。

具体来说：Manifest 包含此节点：

```
 <frameworkAssemblies>
    <frameworkAssembly assemblyName="WikiNetParser" targetFramework=".NETFramework4.0" />
  </frameworkAssemblies> 
```

这告诉 NuGet 在 Core .Net 4.0 库中查找“WikiNetParser”，这当然不存在。可以简单地删除节点，并且包应该成功安装。如果你想尝试自己破解包打开，你可以尝试使用[NuGet 包资源管理器](http://npe.codeplex.com)。

# objective-c - 检查在新项目中使用核心数据

> ID：15226817
> 
> 赞同：0
> 
> 时间：2013-03-05T14:50:49.683
> 
> 标签：objective-c, xcode, core-data

当我创建我的 Xcode 项目时，我选中了“使用核心数据”复选框，因为我认为我会使用它。然而现在事实证明我从未使用过 Core Data 并且想禁用它。我的项目太大了，只需创建一个新项目并取消选中复选框即可。有谁知道我需要删除哪些方法和文件才能拥有没有 Core Data 的项目？我认为一些项目设置也需要更改。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T14:53:18.240

只需创建一个新的空项目并找出答案。必须的方法将在您的 App 委托中。您还必须从项目中删除数据模型 (.xcdatamodel) 文件

# vba - 复制到启动文件夹时，Word Ribbon VBA 停止工作

> ID：15226826
> 
> 赞同：3
> 
> 时间：2013-03-05T14:51:10.893
> 
> 标签：vba, ms-office, ribbon

我为我们公司开发了一个小功能区，从它的 dotm 文件启动时工作正常 - 但是当我尝试将它存储在 Startup 文件夹中时遇到问题。我已将其存储为 dotm 文件并将其复制到启动文件夹中。启动 word 时功能区完全可见，但每次单击菜单项都会导致运行时错误 5941 :(

XML：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<customUI xmlns="http://schemas.microsoft.com/office/2006/01/customui" onLoad="RibbonControl.Onload">
  <ribbon>
    <tabs>
      <tab id="Best" label="My Tools">
        <group id="FBCATI" visible="true" label="Fragebogen"> 
        <dropDown id="FBC1" label="CATI"
                getItemCount="RibbonControl.GetItemCount"
                  getItemLabel="RibbonControl.GetItemLabel"
            getSelectedItemIndex="RibbonControl.GetSelectedItemIndex"
                  onAction="RibbonControl.MyCatiMacro" 
        />
        <dropDown id="FBW1" label="WEB"
                getItemCount="RibbonControl.GetItemCount"
                  getItemLabel="RibbonControl.GetItemLabel"
            getSelectedItemIndex="RibbonControl.GetSelectedItemIndex"
                  onAction="RibbonControl.MyWebMacro" 
        />
      </group>
      </tab>
    </tabs>
  </ribbon>
</customUI> 
```

后面有一些代码。

```
Sub Onload(ribbon As IRibbonUI)
  'Creates a ribbon instance for use in this project
  Set myRibbon = ribbon
End Sub

'Callback for DropDown GetItemCount
Sub GetItemCount(ByVal control As IRibbonControl, ByRef count)
  'Tell the ribbon to show 4 items in the dropdown
  count = 6
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-24T07:36:24.153

将您的文件放在 %appdata%\Microsoft\Templates\ 下，然后创建另一个 .dotm 文件，该文件应位于 StartUp 文件夹下，并使用功能区附加您的文件。

# transactions - 如何在多个服务之间拆分的多个 ServiceStack 服务调用之间实现资源同步？

> ID：15226834
> 
> 赞同：1
> 
> 时间：2013-03-05T14:51:28.717
> 
> 标签：transactions, locking, servicestack

我想创建一组 ServiceStack 服务，托管在同一个主机应用程序中，它们都将使用一组共享的文件资源。为了防止冲突，我打算创建同步代码（又名锁定）来防止文件上的读/写冲突。

如果我只想在单个服务方法调用期间锁定文件，则解决方案很简单。例如，我可以创建一个同步的全局对象，通过 Session Key 跟踪锁。但是，我希望客户端应用程序能够在对不同 ServiceStack 服务中不同方法的 MULTIPLE 调用期间锁定文件资源。

完成此任务的最佳方法是什么（或者这是人们会告诉我我不应该这样做的那些问题之一）？

这是我到目前为止所考虑的：

1.  如果我可以在多个 ServiceStack 服务之间共享一个 ISession 对象，我就可以根据 Session 键跟踪文件锁。但是我无论如何都找不到这样做。这需要与使用 JsonServiceClient 对象的 C# 客户端一起工作，每个 ServiceStack 服务都会有一个这样的对象，并且它们每个都会在服务端生成一个单独的 ISession。

2.  如果我实现了身份验证，我可以通过身份验证的用户 ID 跟踪锁，但是两个不同的人可能使用相同的登录，在这种情况下他们不能共享资源锁。

3.  我可以将我所有的服务方法组合成一个服务，然后共享一个会话。这将意味着创建一个复杂的请求对象，该对象将是几个可能的请求的组合。这可能不像听起来那样可怕。请求对象可以是用自定义 SQL 语言编写的查询字符串，我的服务将解析并运行该查询。我不想这样做，因为它需要更多的编码工作（尽管如果有人知道用于自定义 SQL 语言的免费、强大的解析工具，我可能会考虑使用它）。

4.  创建一个分配事务 ID 的事务服务。如果客户端想要持有锁，它必须首先从 Transaction 服务获取一个事务 ID，并将此 ID 传递给每个后续服务调用（这将是每个请求类中的可选属性）。这实际上与在服务之间共享会话（或者更确切地说，会话密钥）没有太大区别，但我正在让客户端完成一些工作。费。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T17:51:20.000

我对您所说的服务有点迷茫，您可以在一个应用程序主机上拥有多个，并且使用会话机制将允许您在服务之间共享特定的客户端会话。服务堆栈中的会话使用`ICacheClient`您已注册的，因此，如果您有一个服务器场，您可以使用类似的东西`RedisCacheClient`在运行同一应用程序主机的多个服务器之间共享您的会话信息。如果要锁定文件，也可以将此信息存储在其中`ICacheClient`。所以你可以做类似的事情：

```
public class FileLock
{
    public string ClientId { get; set; }
    public string FileId { get; set; }
}

public class FileLockService : Service
{
    public object Post(FileLock req)
    {
        // this will only be added to the cache if it doesn't exist
        // but understand that the cache key needs to be unique
        // within the entire system, so qualify it with a urn...
        var wasAbleToLock = Cache.Add("file:lock:" + req.FileId, req.ClientId);

        return wasAbleToLock;
    }

    public object Get(FileLock req)
    {
        // return the client id for who ever has the lock
        return Cache.Get("file:lock:" + req.FileId);
    }
} 
```

# java - Java 将 csv 从服务器导出到可能不在同一操作系统上的客户端

> ID：15226835
> 
> 赞同：1
> 
> 时间：2013-03-05T14:51:29.363
> 
> 标签：java, windows, unix, csv

如果我有一个应用程序位于 *nix 盒子上，并且我生成了一个 csv，然后将其传递给瘦客户端用户，如果他们在 Windows 上并且想要一个正确的 csv，我必须采取哪些预防措施？

我的意思是这个流程：

UNIX：
1）使用 2）生成 csv`System.getProperty("line.separator")`
传递给瘦客户端

Windows/Unix:
1) 从浏览器下载文件
2a) 在 Excel (Windows)
中打开 2b) 在某些电子表格应用程序中打开

我不是在寻找说 use 的答案，我不`Library X`喜欢为仅用于一个项目的库增加技术风险。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T15:11:50.827

根据 [rfc4180 第 2 节][1]

> 不存在正式的规范，允许对 CSV 文件进行多种解释。本节记录了大多数实现似乎遵循的格式：
> 
> 1.  每条记录位于单独的行上，由换行符 (CRLF) 分隔。例如：
>     
>     
>     
>     aaa,bbb,ccc CRLF zzz,yyy,xxx CRLF
>     
>     
> 2.  文件中的最后一条记录可能有也可能没有结束换行符。例如：
>     
>     
>     
>     aaa,bbb,ccc CRLF zzz,yyy,xxx
>     
>     
> 3.  可能有一个可选的标题行作为文件的第一行出现，其格式与普通记录行相同。此标题将包含与文件中的字段对应的名称，并且应包含与文件其余部分中的记录相同数量的字段（标题行的存在或不存在应通过此选项的可选“header”参数指示MIME 类型）。例如：
>     
>     
>     
>     field_name,field_name,field_name CRLF aaa,bbb,ccc CRLF zzz,yyy,xxx CRLF

因此`System.getProperty("line.separator")`是不正确的，`\r\n`应改为使用。[1]：[https ://www.rfc-editor.org/rfc/rfc4180#section-2](https://www.rfc-editor.org/rfc/rfc4180#section-2)

# objective-c - 无法识别的选择器发送到实例

> ID：15226837
> 
> 赞同：0
> 
> 时间：2013-03-05T14:51:33.053
> 
> 标签：objective-c

其实问题出在 `@property (nonatomic, copy) NSMutableArray* arrayOfObjects;`

应该是： `@property (nonatomic, strong) NSMutableArray* arrayOfObjects;` 是吗？谢谢你们！

我不完全了解这个错误是如何工作的，但我会尝试了解:)

* * *

一个多小时以来，我一直在尝试解决一个问题……恐怕这很简单，但我还不明白。我猜这是内存管理的东西，因为这绝对是我的弱点。

发布一些类似于 [“无法识别的选择器发送到实例”](https://stackoverflow.com/questions/13047705/unrecognized-selector-sent-to-instance) 和其他一些但他们没有解决我的问题......

简而言之（粘贴很多原因不知道潜在的错误在哪里）：

```
@interface MyCustomObject : NSObject {
    NSString* name;
    int birthDate;
    double heightInMeters;
}

@property(strong, nonatomic) NSString * name;
@property(nonatomic) int birthDay;
@property(nonatomic) double heightInMeters;

-(id)initWithDate:(int)birthDate 
        AndName:(NSString *)nameString 
        AndHeight:(double)h;
@end 
```

//////////////////////////////

```
#import "MyCustomObject.h"

@implementation MyCustomObject

@synthesize name;
@synthesize birthDay;
@synthesize heightInMeters;

-(id)initWithDate:(int)bd AndName:(NSString *)nameString AndHeight:(double)h{

    if(self = [super init]){
        self.birthDay = bd;
        self.name = nameString;
        self.heightInMeters = h;
        return self;
    }
    return nil;
}
@end 
```

以及某种用于`MyCustomObject`s 的数据库：

数据收集.h：

```
@interface DataCollection : NSObject{

    NSMutableArray* arrayOfObjects;

}
@property (nonatomic, copy) NSMutableArray* arrayOfObjects;

    -(void)addElement:(id)el;
@end 
```

和实施：

```
 #import "DataCollection.h"

    @implementation DataCollection 
    @synthesize arrayOfObjects;

    -(id)init{
        if(self = [super init]){
            self.arrayOfObjects = [[NSMutableArray array] init];
            NSLog(@"Number of record before init: %d", [self.arrayOfObjects count]);
            [self addElement:[[MyCustomObject alloc] initWithDate:1988 AndName:@"Georg" AndHeight:1.88]];
            [self addElement:[[MyCustomObject alloc] initWithDate:1951 AndName:@"Sebastian" AndHeight:1.58]];
            NSLog(@"Number of record before init: %d", [self.arrayOfObjects count]);
            return self;
        }
        return nil;
    }

    -(void)addElement:(id)el{
        // UNRECOGNIZED SELECTOR ????
[self.arrayOfObjects addObject:el];
    }

    @end 
```

结果是：

> 2013-03-05 15:42:56.826 XMLTest[11787:207] 初始化前的记录数：0 当前语言：自动；目前objective-c 2013-03-05 15:43:51.446 XMLTest[11787:207]-[__NSArrayI addObject:]：无法识别的选择器发送到实例0x6816110

你看到我做错了吗？我猜这是内存管理的东西

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T14:58:42.317

如果你改变

```
@property (nonatomic, copy) NSMutableArray* arrayOfObjects; 
```

到

```
@property (nonatomic, strong) NSMutableArray* arrayOfObjects; 
```

那应该可以解决您的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T14:57:17.807

我实际上并没有阅读你的问题 - 它太长了，但我想我可能知道你的问题。仅查看帖子末尾的调试器输出，看起来您正在尝试发送`addObject:`到`NSArray`对象。如果要向数组中添加和删除对象，则需要使用`NSMutableArray`。

# android - 我的应用程序不会在模拟器上运行，但它会在我的手机上运行

> ID：15226840
> 
> 赞同：0
> 
> 时间：2013-03-05T14:51:35.903
> 
> 标签：android, android-emulator

我正在尝试在模拟器上测试我的应用程序，但它不起作用。但是，它在我的手机上运行良好。我有一个版本为 4.0.3 的三星 Galaxy S2。如何创建一个可以使用它的模拟器？

这些是错误，这里是 pastebin [http://pastebin.com/PR65kGxg](http://pastebin.com/PR65kGxg)：

```
03-05 15:03:16.777: W/Trace(856): Unexpected value from nativeGetEnabledTags: 0
03-05 15:03:16.967: W/Trace(856): Unexpected value from nativeGetEnabledTags: 0
03-05 15:03:16.967: W/Trace(856): Unexpected value from nativeGetEnabledTags: 0
03-05 15:03:17.387: W/GooglePlayServicesUtil(856): Google Play services out of date.  Requires 2012100 but found 1015
03-05 15:03:17.427: W/GooglePlayServicesUtil(856): Google Play services out of date.  Requires 2012100 but found 1015
03-05 15:03:17.467: W/GooglePlayServicesUtil(856): Google Play services out of date.  Requires 2012100 but found 1015
03-05 15:03:17.497: W/GooglePlayServicesUtil(856): Google Play services out of date.  Requires 2012100 but found 1015
03-05 15:03:17.527: W/GooglePlayServicesUtil(856): Google Play services out of date.  Requires 2012100 but found 1015
03-05 15:03:17.887: W/GooglePlayServicesUtil(856): Google Play services out of date.  Requires 2012100 but found 1015
03-05 15:03:17.887: D/AndroidRuntime(856): Shutting down VM
03-05 15:03:17.897: W/dalvikvm(856): threadid=1: thread exiting with uncaught exception (group=0x40a70930)
03-05 15:03:17.917: E/AndroidRuntime(856): FATAL EXCEPTION: main
03-05 15:03:17.917: E/AndroidRuntime(856): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.neatspots/com.example.neatspots.MainActivity}: java.lang.NullPointerException
03-05 15:03:17.917: E/AndroidRuntime(856):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
03-05 15:03:17.917: E/AndroidRuntime(856):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
03-05 15:03:17.917: E/AndroidRuntime(856):  at android.app.ActivityThread.access$600(ActivityThread.java:141)
03-05 15:03:17.917: E/AndroidRuntime(856):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
03-05 15:03:17.917: E/AndroidRuntime(856):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-05 15:03:17.917: E/AndroidRuntime(856):  at android.os.Looper.loop(Looper.java:137)
03-05 15:03:17.917: E/AndroidRuntime(856):  at android.app.ActivityThread.main(ActivityThread.java:5039)
03-05 15:03:17.917: E/AndroidRuntime(856):  at java.lang.reflect.Method.invokeNative(Native Method)
03-05 15:03:17.917: E/AndroidRuntime(856):  at java.lang.reflect.Method.invoke(Method.java:511)
03-05 15:03:17.917: E/AndroidRuntime(856):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-05 15:03:17.917: E/AndroidRuntime(856):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-05 15:03:17.917: E/AndroidRuntime(856):  at dalvik.system.NativeStart.main(Native Method)
03-05 15:03:17.917: E/AndroidRuntime(856): Caused by: java.lang.NullPointerException
03-05 15:03:17.917: E/AndroidRuntime(856):  at com.example.neatspots.MainActivity.setMapDefaults(MainActivity.java:89)
03-05 15:03:17.917: E/AndroidRuntime(856):  at com.example.neatspots.MainActivity.onCreate(MainActivity.java:73)
03-05 15:03:17.917: E/AndroidRuntime(856):  at android.app.Activity.performCreate(Activity.java:5104)
03-05 15:03:17.917: E/AndroidRuntime(856):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
03-05 15:03:17.917: E/AndroidRuntime(856):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
03-05 15:03:17.917: E/AndroidRuntime(856):  ... 11 more
03-05 15:03:18.187: D/dalvikvm(856): GC_CONCURRENT freed 244K, 13% free 2530K/2892K, paused 8ms+71ms, total 260ms
03-05 15:03:37.127: I/Process(856): Sending signal. PID: 856 SIG: 9 
```

这是第 89 行：

```
public void setMapDefaults()
{
    map.setMapType(GoogleMap.MAP_TYPE_NORMAL); //line 89
    map.setMyLocationEnabled(true);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T15:29:41.690

创建一个新的虚拟设备并在目标中选择 Google API 级别 17，它将工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T15:11:48.990

您的应用程序使用地图 API，因此请检查模拟器是否具有 Google APIs 4.0 目标，而不是简单的 Android 4.0

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T15:30:17.270

好的。我阅读了 SO Guidelines of duplicates，并认为这个问题与这个问题有足够的不同[，](https://stackoverflow.com/questions/13691943/this-app-wont-run-unless-you-update-google-play-services-via-bazaar)以便得到一个答案，其中指出“这可能与这个问题是同一个问题”类型的答案/评论。任何版主都可以随意整理。

基本上- Jonathan 的代码很好，尽管有 NPE。这可能是模拟器-Google V2 Play 服务兼容性问题。

# ruby-on-rails - 在heroku上成功部署后，仍然无法正常工作

> ID：15226851
> 
> 赞同：0
> 
> 时间：2013-03-05T14:52:02.990
> 
> 标签：ruby-on-rails, heroku

我正在将我的 ROR 应用程序部署到 heroku。

我的步骤：

1.  登录
2.  使用 gem 'pg' 和 postgres db
3.  混帐初始化混帐添加。
4.  git commit -m "init"
5.  heroku 创建 my_app
6.  git push heroku 大师

    *   计数对象：7，完成。使用多达 8 个线程的 Delta 压缩。
    *   压缩对象：100% (4/4)，完成。书写对象：100% (4/4)，
    *   422 字节，完成。总计 4（增量 3），重复使用 0（增量 0）
    *   -----> 检测到 Ruby/Rails 应用程序
    *   -----> 使用 Bundler 版本 1.3.0.pre.5 安装依赖项
    *   运行： bundle install --without development:test --path vendor/bundle --binstubs vendor/bundle/bin --deployment

        *   使用 rake (10.0.3)
        *   使用 i18n (0.6.4)
        *   使用 multi_json (1.6.1)
        *   使用 activesupport (3.2.8)
        *   使用构建器 (3.0.4)
        *   使用 activemodel (3.2.8)
        *   使用 erubis (2.7.0)
        *   使用旅程 (1.0.4)
        *   使用机架 (1.4.5)
        *   使用机架缓存 (1.2)
        *   使用机架测试（0.6.2）
        *   使用远足 (1.2.1)
        *   使用倾斜 (1.3.4)
        *   使用链轮 (2.1.3)
        *   使用动作包 (3.2.8)
        *   使用 mime 类型 (1.21)
        *   使用多语言 (0.3.3)
        *   使用树顶 (1.4.12)
        *   使用邮件 (2.4.4)
        *   使用 actionmailer (3.2.8)
        *   使用 arel (3.0.2)
        *   使用 tzinfo (0.3.36)
        *   使用活动记录 (3.2.8)
        *   使用活动资源 (3.2.8)
        *   使用 bcrypt-ruby (3.0.1)
        *   使用面包屑_on_rails (2.3.0)
        *   使用 orm_adapter (0.4.0)
        *   使用 ckeditor (4.0.2)
        *   使用咖啡脚本源 (1.6.1)
        *   使用 execjs (1.4.0)
        *   使用咖啡脚本（2.2.0）
        *   使用 rack-ssl (1.3.3)
        *   使用 json (1.7.7)
        *   使用 rdoc (3.12.2)
        *   使用雷神 (0.17.0)
        *   使用铁轨 (3.2.8)
        *   使用咖啡轨 (3.2.2)
        *   使用守护进程 (1.1.9)
        *   使用捆绑器 (1.3.0.pre.5)
        *   使用导轨 (3.2.8)
        *   使用数据网格（0.7.1）
        *   使用守望者 (1.2.1)
        *   使用设计 (2.2.3)
        *   使用蜻蜓 (0.9.14)
        *   使用事件机 (1.0.1)
        *   使用 galetahub-simple_captcha (0.1.3)
        *   使用 has_scope (0.5.1)
        *   使用 jquery-rails (2.2.1)
        *   使用 ledermann-rails-settings (1.2.1)
        *   使用 nokogiri (1.5.6)
        *   使用 pg (0.14.1)
        *   使用 rails-settings (1.0.0)
        *   使用验证码 (0.3.5)
        *   使用 rest-client (1.6.7)
        *   使用 rmagick (2.13.1)
        *   使用俄语 (0.6.0)
        *   使用 sass (3.2.6)
        *   使用 sass-rails (3.2.6)
        *   使用续集 (3.20.0)
        *   使用简单导航 (3.10.0)
        *   使用 sinatra (1.0)
        *   使用水龙头 (0.3.24)
        *   使用薄（1.5.0）
        *   使用 uglifier (1.3.0)
        *   使用 will_paginate (3.0.4)
        *   您的捆绑包已完成！它被安装到 ./vendor/bundle
        *   清理捆绑程序缓存。
            *   -----> 编写 config/database.yml 以从 DATABASE_URL 读取
            *   -----> 为 Rails 资产管道准备应用程序
        *   运行：耙资产：预编译
        *   资产预编译完成（206.35s）
            *   -----> Rails 插件注入
        *   注入 rails_log_stdout
        *   注入 rails3_serve_static_assets
            *   -----> 发现进程类型
        *   Procfile 声明类型 -> web, worker
        *   Ruby/Rails 的默认类型 -> 控制台、rake

            *   -----> 编译后的 slug 大小：31.2MB
            *   -----> 正在启动...完成，v7
        *   [http://fruttella.herokuapp.com](http://fruttella.herokuapp.com)部署到 Heroku

            *   heroku ps：规模网络= 1
            *   扩展 Web 进程...完成，现在正在运行 1

但是在命令**heroku ps**之后我有： `== web:`bundle exec rails server -p $PORT web.1: crashed 2013/03/05 16:33:27 (~ 3m ago)

而且我的 ror 应用程序没有在 heroku 上启动。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T14:55:19.883

你运行迁移了吗？

```
heroku run rake db:migrate 
```

# xml - 如果节点不存在，Ant XMLTASK 插入一个节点

> ID：15226852
> 
> 赞同：6
> 
> 时间：2013-03-05T14:52:03.710
> 
> 标签：xml, ant, xmltask

我的任务是将 XML 节点插入到现有的 XML 文件中，前提是该节点不存在。我很好地管理了插入，但是我找不到缺少的 if-not 功能

> ```
> <xmltask source="shared.xml" dest="shared.xml" outputter="simple:3">
>    <insert path="/sharedobjects[last()]">
>       <![CDATA[
>       <connection>   
>          <name>MY CONNECTION</name>
>       </connection>
>       ]]>
>    </insert>
> </xmltask> 
> ```

如果我多次运行它，我当然会在 xml 文件中有多个 MY CONNECTION。我想进行检查，以便仅在所需的连接不在文件中时才插入。

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-08T22:10:27.247

我相信这种方法也有效。

```
<xmltask source="shared.xml" dest="shared.xml" outputter="simple:3">

   <copy path="/sharedobjects/connection[name/text()='MY CONNECTION']/name/text()"
         property="XML_EXISTS_ALREADY" />

   <insert path="/sharedobjects[last()]" unless="XML_EXISTS_ALREADY">
      <![CDATA[
      <connection>   
         <name>MY CONNECTION</name>
      </connection>
      ]]>
   </insert>
</xmltask> 
```

注意：xmltask 的复制任务只允许您在属性中存储属性或文本节点。因此有必要`/name/text()`在 path 参数的末尾指定 for `<copy>`（即使我们真正关心的存在是整个`<connection>`节点，而不是其子节点的文本）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T15:09:37.297

我设法解决了我的问题。这或多或少是一种解决方法。解决方案是删除然后插入方法

```
<xmltask source="shared.xml" dest="shared.xml" outputter="simple:3">
   <remove path="/sharedobjects/connection[name/text()='MY CONNECTION']"/>
   <insert path="/sharedobjects[last()]">
      <![CDATA[
      <connection>   
         <name>MY CONNECTION</name>
      </connection>
      ]]>
   </insert>
</xmltask> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-21T12:58:21.483

使用 Ant 条件（不确定在提出问题时是否所有条件都存在）：

```
<if>
    <not>
        <resourcecontains 
            resource="shared.xml" 
            substring="&gt;MY CONNECTION&lt;name&gt;" />
    </not>
<then>
    <xmltask 
...
    </xmltask>
</then> 
```

# java - 如何在甘特图中显示每个任务的信息

> ID：15226853
> 
> 赞同：2
> 
> 时间：2013-03-05T14:52:03.897
> 
> 标签：java, jfreechart

我正在使用Jfreechart编写一个分析日志文件的项目，我有一个overvide generateToolTip的问题，我想要做的是当用户将鼠标移动到一个条的点时，“tip”将显示信息这个块（一个子任务），我需要显示每个子任务的描述。

我把我的例子放在这里，我只能显示最后一个子任务的描述。

如果可以的话，请给我一些帮助。谢谢

江

*公共类测试{*

 *```
class MyToolTipGenerator extends IntervalCategoryToolTipGenerator {

    DateFormat format;

    private MyToolTipGenerator(String value, DateFormat format) {
        super(value, format);
        this.format = format;
    }

    @Override
    public String generateToolTip(CategoryDataset cds, int row, int col) {

        final String s = super.generateToolTip(cds, row, col);
        TaskSeriesCollection tsc = (TaskSeriesCollection) cds;
        StringBuilder sb = new StringBuilder(s);
        String subTaskDes = null;

        // ArrayList<TaskSeries> ats=new ArrayList<>();
        // TaskSeries ts = new TaskSeries(s);

        int a = tsc.getSeriesCount();
        System.out.println(a + "________________");

        for (int i = 1; i < tsc.getSeriesCount(); i++) {
            TaskSeries ts = tsc.getSeries(i);
            Task task = ts.get(0);
            int count = task.getSubtaskCount();
            for (int j = 0; j < task.getSubtaskCount(); j++) {
                while (count-- != 0) {
                    subTaskDes = task.getSubtask(j).getDescription()
                            .toString();
                }
            }
            // for (int j = 0; j < tsc.getSubIntervalCount(row, col); j++) {
            // tsc.getSeries(0).getTasks().get(0).toString();
            // tsc.getSeries(key)
            // System.out.println(tsc.getSubIntervalCount(row, col));
            // tsc.getColumnKey(i).toString();
            // }
        }

        // System.out.println(ats.get(0).getDescription());

        for (int i = 0; i < tsc.getSubIntervalCount(row, col); i++) {
            sb.append(format.format(tsc.getStartValue(row, col, i)));
            sb.append("-");
            sb.append(format.format(tsc.getEndValue(row, col, i)));
            sb.append(",");
        }
        sb.deleteCharAt(sb.length() - 1);
        // return sb.toString();
        return subTaskDes;
    }
}

private JFreeChart createChart() {
    IntervalCategoryDataset xyDataset = createDataset();
    JFreeChart jFreeChart = ChartFactory.createGanttChart("Gantt", "time",
            "value", xyDataset, true, true, true);
    CategoryPlot plot = jFreeChart.getCategoryPlot();
    plot.getRenderer().setBaseToolTipGenerator(
            new MyToolTipGenerator("{0}, {1}: ", DateFormat
                    .getTimeInstance(DateFormat.SHORT)));
    return jFreeChart;
}

private IntervalCategoryDataset createDataset() {
    TaskSeriesCollection dataset = new TaskSeriesCollection();
    TaskSeries unavailable1 = new TaskSeries("Unavailable 1");
    TaskSeries unavailable2 = new TaskSeries("Unavailable 2");
    TaskSeries unavailable3 = new TaskSeries("Unavailable 3");
    Task t1 = new Task("Meeting Room 1", date(7), date(18));
    t1.addSubtask(new Task("Meeting 1", date(9), date(16)));
    unavailable1.add(t1);

    Task t2 = new Task("Meeting Room 2", date(8), date(18));
    t2.addSubtask(new Task("Meeting 4", date(10), date(11)));
    t2.addSubtask(new Task("Meeting 5", date(13), date(15)));
    t2.addSubtask(new Task("Meeting 6", date(16), date(18)));
    unavailable2.add(t2);

    Task t3 = new Task("Meeting Room 3", date(8), date(18));
    t2.addSubtask(new Task("Meeting 7", date(11), date(11)));
    t2.addSubtask(new Task("Meeting 8", date(13), date(15)));
    t2.addSubtask(new Task("Meeting 9", date(18), date(18)));
    unavailable3.add(t3);

    dataset.add(unavailable1);
    dataset.add(unavailable2);
    dataset.add(unavailable3);
    return dataset;
}

private Date date(int hour) {
    final Calendar calendar = Calendar.getInstance();
    calendar.set(2009, Calendar.DECEMBER, 1, hour, 0, 0);
    return calendar.getTime();
}

private void display() {
    JFrame f = new JFrame("Test");
    f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    f.add(new ChartPanel(createChart()));
    f.pack();
    f.setLocationRelativeTo(null);
    f.setVisible(true);
}

public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {
        @Override
        public void run() {
            new Test().display();
        }
    });
} 
```* 

*}`enter code here`*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T07:17:21.540

调用时，工厂设置 a ，如此[处](http://www.jfree.org/jfreechart/api/javadoc/src-html/org/jfree/chart/ChartFactory.html#line.1322)`IntervalCategoryToolTipGenerator`所示。您可以自定义生成器以查看其他值是否有用，如此[处](https://stackoverflow.com/a/8932920/230513)所示，或者您可以创建一个新的生成器。`MessageFormat``StandardCategoryToolTipGenerator`

`TaskSeriesCollection`附录：这是在生成器中访问甘特图数据集的示例。对于单个子任务，您可以跟踪索引，如下[所示](https://stackoverflow.com/a/8949913/230513)。

![图片](../Images/9774b03207e5153f887474a928120b5b.png)

```
import java.awt.EventQueue;
import java.text.DateFormat;
import java.util.Calendar;
import java.util.Date;
import javax.swing.JFrame;
import org.jfree.chart.ChartFactory;
import org.jfree.chart.ChartPanel;
import org.jfree.chart.JFreeChart;
import org.jfree.chart.labels.IntervalCategoryToolTipGenerator;
import org.jfree.chart.plot.CategoryPlot;
import org.jfree.data.category.CategoryDataset;
import org.jfree.data.category.IntervalCategoryDataset;
import org.jfree.data.gantt.Task;
import org.jfree.data.gantt.TaskSeries;
import org.jfree.data.gantt.TaskSeriesCollection;

/**
 * @see https://stackoverflow.com/a/15241250/230513
 */
public class Test {

    class MyToolTipGenerator extends IntervalCategoryToolTipGenerator {

        DateFormat format;

        private MyToolTipGenerator(String value, DateFormat format) {
            super(value, format);
            this.format = format;
        }

        @Override
        public String generateToolTip(CategoryDataset cds, int row, int col) {
            final String s = super.generateToolTip(cds, row, col);
            TaskSeriesCollection tsc = (TaskSeriesCollection) cds;
            StringBuilder sb = new StringBuilder(s);
            for (int i = 0; i < tsc.getSubIntervalCount(row, col); i++) {
                sb.append(format.format(tsc.getStartValue(row, col, i)));
                sb.append("-");
                sb.append(format.format(tsc.getEndValue(row, col, i)));
                sb.append(",");
            }
            sb.deleteCharAt(sb.length() - 1);
            return sb.toString();
        }
    }

    private JFreeChart createChart() {
        IntervalCategoryDataset xyDataset = createDataset();
        JFreeChart jFreeChart = ChartFactory.createGanttChart("Gantt",
            "time", "value", xyDataset, true, true, true);
        CategoryPlot plot = jFreeChart.getCategoryPlot();
        plot.getRenderer().setBaseToolTipGenerator(
            new MyToolTipGenerator(
            "{0}, {1}: ", DateFormat.getTimeInstance(DateFormat.SHORT)));
        return jFreeChart;
    }

    private IntervalCategoryDataset createDataset() {
        TaskSeriesCollection dataset = new TaskSeriesCollection();
        TaskSeries unavailable = new TaskSeries("Unavailable");
        Task t1 = new Task("Meeting Room 1", date(7), date(18));
        t1.addSubtask(new Task("Meeting 1", date(9), date(16)));
        unavailable.add(t1);

        Task t2 = new Task("Meeting Room 2", date(8), date(18));
        t2.addSubtask(new Task("Meeting 4", date(10), date(11)));
        t2.addSubtask(new Task("Meeting 5", date(13), date(15)));
        t2.addSubtask(new Task("Meeting 6", date(16), date(18)));
        unavailable.add(t2);
        dataset.add(unavailable);
        return dataset;
    }

    private Date date(int hour) {
        final Calendar calendar = Calendar.getInstance();
        calendar.set(2009, Calendar.DECEMBER, 1, hour, 0, 0);
        return calendar.getTime();
    }

    private void display() {
        JFrame f = new JFrame("Test");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.add(new ChartPanel(createChart()));
        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                new Test().display();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-08T06:00:34.763

这是我编写的用于提取子任务描述作为工具提示的代码。它提供了显示不同工具提示信息的每个子任务。

它可能不是最好的编码示例，但它可以工作。您可以相应地修改并使用它。

```
class MyCategoryToolTipGenerator implements CategoryToolTipGenerator
{
    HashMap<String, List<Task>> subTaskMap;

    public MyCategoryToolTipGenerator()
    {
        subTaskMap = new HashMap<String, List<Task>>();
    }

    @Override
    public String generateToolTip(CategoryDataset categoryDataset, int row, int col )
    {

        TaskSeriesCollection taskSeriesCollection = (TaskSeriesCollection) categoryDataset;

        if ( row >= taskSeriesCollection.getRowCount() )
        {
            return "";
        }
        TaskSeries taskSeries = taskSeriesCollection.getSeries( row );

        if ( col >= taskSeries.getItemCount() )
        {
            return "";
        }
        Task task = taskSeries.get( col );

        //Sub Task tooltip handling//
        if( task.getSubtaskCount() > 0 )
        {
            //Task Key for main task
            String taskKey = "r=" + row + "c=" + col;

            //System.out.println( "Sub Task Count = " + task.getSubtaskCount() + " r=" + row + " c=" + col  );
            List<Task> subTaskList = null;
            if( subTaskMap.containsKey( taskKey ) )
            {
                //If already added, pick the list of available sub tasks
                subTaskList = subTaskMap.get( taskKey );
            }
            else
            {
                //If not found, add all sub tasks to map
                int subTaskCount = task.getSubtaskCount();
                subTaskList = new ArrayList<Task>( subTaskCount );
                for( int i = 0; i < subTaskCount; i++ )
                {
                    //System.out.println("Adding sub task " + task.getSubtask( i ).getDescription());
                    subTaskList.add( task.getSubtask( i ) );
                }
                subTaskMap.put( taskKey, subTaskList );
            }

            if( subTaskList != null && subTaskList.size() > 0 )
            {
                //Take the top most sub task and remove it from list
                Task subTask = subTaskList.remove( 0 );
                //System.out.println("Remove sub task " + subTask.getDescription());

                //If no other sub tasks available remove key from list
                if( subTaskList.size() <= 0 )
                {
                    //System.out.println("Remove Key " + taskKey);
                    subTaskMap.remove( taskKey );
                }

                //Return the top most subtask description
                return subTask.getDescription();
            }
        }

        return task.getDescription();
    }
} 
```

# c# - 使用 RestSharp 序列化列表中的对象

> ID：15226860
> 
> 赞同：3
> 
> 时间：2013-03-05T14:52:17.743
> 
> 标签：c#, xml-serialization, poco, restsharp

我在使用 RestSharp 将我的 POCO 对象序列化为 XML 时遇到问题。我的 POCO 对象如下所示：

**人**

```
[SerializeAs(Name = "person")]
public class Person
{
    [SerializeAs(Name = "author-id")]
    public int? AuthorId { get; set; }

    [SerializeAs(Name = "background")]
    public string Background { get; set; }

    [SerializeAs(Name = "first-name")]
    public string FirstName { get; set; }

    [SerializeAs(Name = "last-name")]
    public string LastName { get; set; }

    [SerializeAs(Name = "id")]
    public int? Id { get; set; }

    [SerializeAs(Name = "company-name")]
    public string CompanyName { get; set; }

    [SerializeAs(Name = "title")]
    public string Title { get; set; }

    [SerializeAs(Name = "contact-data")]
    public ContactData ContactData { get; set; }

    [SerializeAs(Name = "tags")]
    public List<tag> Tags { get; set; }
} 
```

**联系人数据**

```
public class ContactData
{
    [SerializeAs(Name = "addresses")]
    public List<object> Addresses { get; set; }

    [SerializeAs(Name = "phone-numbers")]
    public List<object> PhoneNumbers { get; set; }

    [SerializeAs(Name = "email-adresses")]
    public List<object> EmailAddresses { get; set; }

    [SerializeAs(Name = "web-addresses")]
    public List<object> WebAddresses { get; set; }
} 
```

**电子邮件地址**

```
[SerializeAs(Name = "email-address")]
public class EmailAddress
{
    [SerializeAs(Name = "address")]
    public string Address { get; set; }

    [SerializeAs(Name = "id")]
    public int? Id { get; set; }

    [SerializeAs(Name = "location")]
    public string Location { get; set; }
} 
```

这在序列化时给了我以下 XML：

```
<person>
    <first-name>my firstname</first-name> 
    <contact-data>
        <email-adresses>
            <EmailAddress>
                <address>my@email.com</address> 
                <location>Work</location> 
             </EmailAddress>
        </email-adresses>
    </contact-data>
    <tags>
        <tag>
            <name>Nyhedsbrev</name> 
        </tag>
    </tags>
</person> 
```

您可能会注意到，电子邮件`SerializeAs`地址被忽略。我认为这可能是因为它在 a 中，`List`因为`Person`对象被正确序列化为`<person>`

我需要使用注释而不是类名本身对列表（或某个集合）中的 POCO 对象进行序列化。

有没有人找到解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T00:18:21.500

将此追溯到 RestSharp 中的错误。我分叉了 Git 存储库，修复了它并提交了一个[拉取请求](https://github.com/restsharp/RestSharp/pull/361)。

# visual-studio-2010 - 如何在 Visual Studio 2010 中扫描 VIN 条码

> ID：15226862
> 
> 赞同：0
> 
> 时间：2013-03-05T14:52:19.767
> 
> 标签：visual-studio-2010, barcode, scanning, vin

我一直在互联网上寻找附加组件或程序来添加到视觉工作室。

我的问题是有没有办法在 Visual Studio 2010 中安装 VIN 条码扫描仪。任何示例代码或教程都会有很大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T15:16:51.437

VIN 编号采用 Code39 条形码格式。所以你真的只需要能够扫描条形码的硬件。一个便宜的 USB 条码扫描器大约 20 美元。

然后在 VS 中，您只需创建一个带有文本框的简单表单。当文本框具有焦点时，扫描条形码将导致由该条形码（在您的情况下为 VIN）表示的文本出现在文本框中，就像您输入它一样。

此外，如果您想在 Code39 中另辟蹊径并生成条形码，MSDN 在[这里](http://code.msdn.microsoft.com/windowsdesktop/Code39-Barcode-Control-For-a5bb8841)有一个很好的 C# 示例。

# android - 使用自定义 ArrayAdapter 和 Filter 时没有结果

> ID：15226867
> 
> 赞同：0
> 
> 时间：2013-03-05T14:52:33.603
> 
> 标签：android, filtering, android-arrayadapter

我`ArrayAdapter`在这段代码中有一个自定义：

```
public class UtenteAdapter extends ArrayAdapter<Utente> implements Filterable {
private Context context;
private ArrayList<Utente> utenti;
private ArrayList<Utente> utentiFiltrati;
private FiltroPersonalizzato filtro;

public UtenteAdapter(Context context, ArrayList<Utente> utenti) {
    super(context, R.layout.riga_utente, utenti);
    this.context=context;
    this.utenti=utenti;
    utentiFiltrati = new ArrayList<Utente>();
}
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    //omitted..
    return riga;
}
@Override
public void notifyDataSetChanged(){
    super.notifyDataSetChanged();
}

@Override
public Filter getFilter() {
    if (filtro == null) {
        filtro = new FiltroPersonalizzato();
    }
    return filtro;
}
private class FiltroPersonalizzato extends Filter {

    @Override
    protected FilterResults performFiltering(CharSequence prefix) {
        FilterResults risultato = new FilterResults();
        ArrayList<Utente> i = new ArrayList<Utente>();
          if (prefix!= null && prefix.toString().length() > 0) {
              // use the initial values !!! 
              for (int index = 0; index < utenti.size(); index++) {
                  Utente si = utenti.get(index);
                  final int length = prefix.length();
                  // if you compare the Strings like you did it will never work as you compare the full item string(you'll have a match only when you write the EXACT word)
                  // keep in mind that you take in consideration capital letters!
                  if(si.getNome().toLowerCase().substring(0, length).compareTo(prefix.toString().toLowerCase()) == 0){
                    i.add(si);  
                  }
              }
              risultato.values = i;
              risultato.count = i.size();                   
          }
          else{
              // revert to the old values 
              synchronized (utentiFiltrati){
                  risultato.values = utenti;
                  risultato.count = utenti.size();
              }
          }
          return risultato;
    }
    @SuppressWarnings("unchecked")
    @Override
    protected void publishResults(CharSequence constraint,
            FilterResults results) {
        utentiFiltrati = (ArrayList<Utente>)results.values;
        notifyDataSetChanged();
    }
}
} 
```

我有一个`SearchView`，我想按名称过滤行，但过滤后没有结果。我确信我有结果（来自调试）但是如果我从我的过滤器中调用我`ListFragment`看不到我的结果：

```
 @Override
        public boolean onQueryTextSubmit(String query) {
            adapter.getFilter().filter(query); 
            return true;
        } 
```

我像这样更新我`ArrayAdapter`的`ListFragment`：

```
private void setListaUtenti(){

    if(getListAdapter()==null){
        // creo l'adapter
        adapter=new UtenteAdapter(
                getActivity(),
                utenti);
        setListAdapter(adapter);  

    } else{
        adapter.notifyDataSetChanged();         
    }                       
} 
```

为什么我看不到过滤操作的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T16:08:54.053

> 我有一个搜索视图，我想按名称过滤行，但我没有结果。

在您将结果分配给列表并调用的`publishResults()`回调中，您没有得到结果是正常的。这不会做任何事情，因为您的适配器基于列表，即您传递给超类构造函数的列表。进行以下更改：`Filter``utentiFiltrati``notifyDataSetChanged()``utenti`

```
public UtenteAdapter(Context context, ArrayList<Utente> utentiValues) {
    super(context, R.layout.riga_utente, utentiValues);
    this.context=context;
    this.utentiFiltrati = utentiValues;
    utenti = new ArrayList<Utente>(utentiValues);
}

// ...
FilterResults risultato = new FilterResults();
ArrayList<Utente> i;
if (prefix == null || prefix.toString().length() == 0) {
     // the contract of a Filter says that you must return all values if the
     // challenge string is null or 0 length
     i = new ArrayList<Utente>(utenti);
} else {
     i = new ArrayList<Utente>();
     // use the list that contains the full set of data
     for (int index = 0; index < utenti.size(); index++) {
           Utente si = utenti.get(index);
           final int length = prefix.length();
           if(si.getNome().toLowerCase().substring(0, length).compareTo(prefix.toString().toLowerCase()) == 0){
                i.add(si);  
           }
     }
  //...
@SuppressWarnings("unchecked")
@Override
protected void publishResults(CharSequence constraint,
        FilterResults results) {
    utentiFiltrati = (ArrayList<Utente>)results.values;
    notifyDataSetChanged();
} 
```

# grails - Having generic belongsTo in grails domain

> ID：15226871
> 
> 赞同：1
> 
> 时间：2013-03-05T14:52:38.883
> 
> 标签：grails, grails-orm, relationship, grails-domain-class

I have three classes in my grails project. What is the proper grails domain definition

```
Class A {

 List<Resource> xResources
 List<Resource> yResources

 hasMany = [ xResources: Resource, yResources: Resource]
}

Class B {
  List<Resource> zResources
  hasMany = [ zResources: Resource]
}

Class Resource {

  String title
   .....
     ..

 belongsTo = [A, B]

} 
```

The above definition fails because i have not mentioned the mappedBy in Class A. How that can be avoided. I want the Resource class to be generic. I don't want to restrict the Resource class only to the two classes, but i should allow it extend it to other. I also need to get the source reference from a Resource object. What should be proper GORM definition for this scenario.?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T03:06:28.247

请按照以下代码

```
Class A {
static hasMany = [ xResources: Resource, yResources: Resource]
}

Class B {

static hasMany = [ zResources: Resource]
}

Class Resource {

  String title
   .....
     ..

 static belongsTo = [a:A, b:B]

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T02:51:30.243

我在您的代码中看到 3 个主要问题：

1.  属性`xResources, yResources, zResources`是双重定义的。只需删除重复的`List<Resource> ...`定义。

2.  `hasMany`并且前面`belongsTo`应该有一个`static`关键词。

3.  我不确定`belongsTo`可以指向多个类。如果没有，只需将其删除。

# asp.net-mvc - 试驾 ASP.NET MVC

> ID：15226876
> 
> 赞同：0
> 
> 时间：2013-03-05T14:52:52.960
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-2

我开始从事一个使用 ASP.NET MVC 3 的新项目。我的一个朋友拥有 Johnathan McCracken 的《Test-Drive ASP.NET MVC》一书，但这本书涵盖了 ASP.NET MVC 版本 2。

任何人都知道我是否会因为版本差异而遇到很多麻烦？这本书是不是太老套了？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T14:55:43.703

ASP.NET MVC 建立在以前的 ASP.NET MVC 版本之上。如果你的书是 MVC 2，你应该仍然能够掌握模型-视图-控制器的概念。

有关差异列表（MVC 3 中引入的添加），请[参见](http://www.asp.net/mvc/mvc3#overview)：

> *   与 MvcScaffold 集成的可扩展脚手架
> *   支持 HTML 5 的项目模板
> *   Razor 视图引擎
> *   支持多视图引擎
> *   控制器改进
> *   JavaScript 和 Ajax
> *   模型验证改进
> *   依赖注入改进
> *   其他新功能

就个人而言，[Razor View Engine](http://www.asp.net/mvc/mvc3#BM_TheRazorViewEngine)对于我的项目非常有用......尤其是与`.aspx`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T04:26:15.760

您绝对可以使用 ASP.Net MVC 2 书来学习，因为大部分框架都是相同的。

但是，正如其他人所指出的，您会注意到的最大区别在于“视图引擎”。现在大多数示例都使用“Razor”引擎，而不是旧版本的 2 View Engine（我不知道它是否真的有名字），相比之下，它既麻烦又丑陋。

因此，您可以使用您的第 2 版书籍来学习，并从网络上学习 Razor 视图，但您也可以从任意数量的不同网站开始学习第 3 版，并免去第 2 版中所有尖括号的痛苦查看引擎。

# html - Embedding a Twitter web intent "tweet box" in a page

> ID：15226881
> 
> 赞同：3
> 
> 时间：2013-03-05T14:53:06.327
> 
> 标签：html, twitter, webintents

Having Googled myself dry I'm going to try here, although it may be impossible.

I simply want to embed a tweet box in one of my web pages, using the web intent API which provides the content in page: [https://twitter.com/intent/tweet](https://twitter.com/intent/tweet).

The trouble is, using this url within an iFrame results in it not working, presumably because this functionality has been disabled by the Twitterati. It does say the web intents API is *intended* to be a popup but is there a way around this or am I forced to go with a link that produces a popup window?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:58:35.890

这真的可能不是最好的方法，但我需要同样的东西并且必须快速完成。第一个调用端口是 twitter API，我期望它应该如何完成。但是时间限制意味着我已经这样做了：

HTML：

```
<textarea class="tweetmsg"></textarea>
<a href="https://twitter.com/share?text=original tweet text" class="twitter-share-button" target="_blank">Tweet</a> 
```

然后每次按下一个键时，使用 jQuery 填充推文按钮数据文本属性。

```
$('textarea.tweetmsg').keyup(function() {
    var tweetmsg = $('textarea.tweetmsg').val();
    $('.twitter-share-button').attr('href', 'https://twitter.com/share?text=' + tweetmsg);
}); 
```

就像我说的那样，这可能是一种非常低效的方法，因为每次按下键时它都会重新填充数据文本字段。如果有人可以改进上述解决方案，我会很感兴趣。

# opencv - OpenCV2.4.3 Program Can't start because libgcc_s_dw2-1.dll missing

> ID：15226887
> 
> 赞同：1
> 
> 时间：2013-03-05T14:53:30.963
> 
> 标签：opencv

Since last month I was working with OpenCV2.2(pre-built) using c functions only in code::blocks. But I need to shift to c++ API. But when I run the c++ code I am getting error like "undefined reference to c++ function". I just search in internet and found that I need to build from source. So I just moved to OpenCV2.4.3\. These are my setting what I do with OpenCV2.4.3 for configuring project in code::blocks.

1.  Extract OpenCV2.4.3 to E:\opencv
2.  Add the line "E:\opencv\build\x86\mingw\bin" to path.
3.  And in code::blocks set up the project like -> Compiler and debugger setting->search directories add "E:\opencv\build\include" -> In linker tab add "E:\opencv\build\x86\mingw\bin" -> In limker setting tab add "E:\opencv\build\x86\mingw\lib"

And I build my project successfully but while I am running my project I am getting the error like "Program Can't start because libgcc_s_dw2-1.dll missing from your computer". I am using code::blocks with MingGW compiler.

My questions are
1\. Why I can't run c++ code using OpenCV2.2 while c code is successfully build and ran. Is it the pre-built library problem. If so where can I download OpenCV pre-built library which support both c and c++ code. 2\. Why the MingGW compiler showing the error like "libgcc_s_dw2-1.dll missing "for OpenCV2.4.3 where as OpenCV2.2 successfully build and ran using the same MingGW compiler.

Any help will appreciated.

Thanks in advance..........

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T15:53:10.443

当我从 OpenCV 2.0 切换到 OpenCV 2.4.3 时，我遇到了同样的问题。所以我会提出以下建议。

1.  卸载 CodeBlocks 和 Opencv 2.4.3

2.  使用您之前遵循的相同步骤重新安装并集成它们。

让我们知道这是否有效。

# mysql - group_concat uses wrong delimiter

> ID：15226892
> 
> 赞同：0
> 
> 时间：2013-03-05T14:53:48.533
> 
> 标签：mysql, group-by, group-concat, concat-ws

this is a part of my query:

```
group_concat(distinct(concat_ws(' ', dts.first_name, dts.last_name)) separator ', ') as data_team_specialists 
```

I have following problem: if first_name and last_name exist everything works fine, persons are separated with ', ' and there is a space between first and last name.

**But:** if first_name is NULL the next person is separated with ' ' (space) from concat_ws and not with ', ' as it should

# jquery - jQuery Menu with delay

> ID：15226893
> 
> 赞同：0
> 
> 时间：2013-03-05T14:53:58.817
> 
> 标签：jquery, menu, delay

I am actualy working at the menu you could see in the screenshot

![enter image description here](../Images/3194987baa940bee09052d432f149e56.png)

After the thread you will see the code that i worked out to get the menu running, but now i got a little usability problem :/ When I am trying to hover from, for example, the menu link "FÜR BÜRGER" to the menu Link "Umwelt & Natur" I touch the Menu link "Für Besucher" for a chance of 100% and the flyout changes ...

So I thought about somekind of delay, but i just cant figure it how to get the delay working correctly...

Anyone got an idea about that?

```
/* initalisierung des Main Menü Designs */
$('#zone-menu div.menu-block-wrapper.menu-block-3').append('<div class="dropdown-background"></div>');
$('#zone-menu li.menu-depth-1 a').addClass('menu-depth-1');
$('#zone-menu li.menu-depth-2 a').removeClass('menu-depth-1');
$('#zone-menu li.menu-depth-2 a').addClass('menu-depth-2');

var i= 0;
$('.front #zone-menu li.menu-depth-1 a.menu-depth-1').each(function(){
        i++;
        $(this).addClass('main-link-'+i);
       var text = $(this).attr("title");
       var w = $(this).width() + 12;
       if(!text){ text = 'Description text noch nicht bekannt.'}
       $(this).after('<div class="discription-a-deth-1">'+text+'</div>');
      });
var max_heightA = 0;
$('#zone-menu li.menu-depth-1 a.menu-depth-1').each(function(e) {
  h = $(this).height();
  if(typeof(h) != "undefined") {
        if(h > max_heightA) {
                max_heightA = h+12;
        }
  }
});
if(max_heightA > 0) {
 $('#zone-menu li.menu-depth-1 a.menu-depth-1').height(max_heightA);
}
var q = 0;
$('#zone-menu li.menu-depth-1.expanded').each(function(){
q = 0;
var thisOne = $(this).children('ul');
var max = thisOne.children('li').length;
thisOne.children('li').each(function(max){
        q++;
        $(this).addClass('submenu-link-'+q);

      });
thisOne.prepend('<ul class="spalte-1"></ul><ul class="spalte-2"></ul><ul class="spalte-3"></ul>');
var thisULone =thisOne.children('ul.spalte-1');
var thisULtwo =thisOne.children('ul.spalte-2');
var thisULthree =thisOne.children('ul.spalte-3');
thisOne.children('.submenu-link-1').remove().appendTo(thisULone);
thisOne.children('.submenu-link-2').remove().appendTo(thisULone);
thisOne.children('.submenu-link-3').remove().appendTo(thisULone);
thisOne.children('.submenu-link-4').remove().appendTo(thisULone);
thisOne.children('.submenu-link-5').remove().appendTo(thisULtwo);
thisOne.children('.submenu-link-6').remove().appendTo(thisULtwo);
thisOne.children('.submenu-link-7').remove().appendTo(thisULtwo);
thisOne.children('.submenu-link-8').remove().appendTo(thisULtwo);
thisOne.children('.submenu-link-9').remove().appendTo(thisULthree);
thisOne.children('.submenu-link-10').remove().appendTo(thisULthree);
thisOne.children('.submenu-link-11').remove().appendTo(thisULthree);
thisOne.children('.submenu-link-12').remove().appendTo(thisULthree);
      });
/* 
// Dropdown fürs Main Menü */

    function showThis(){
    $(this).removeClass('entered');
    $('#zone-menu .menu-block-wrapper.menu-block-3 .menu-depth-1 ul.main-menu').css('display', 'none');
    var Child = $(this).children('ul#main-menu');
    if($('.dropdown-background').hasClass('open')){
    Child.css('display', 'block');
     }
     else{

     setTimeout(function(){ Child.css('display', 'block');}, 400);
     }
    $('.dropdown-background').addClass('open');
    $('.dropdown-background').slideDown("slow");    

    $(this).addClass('entered');
    $(this).bind('mouseleave', function(){$(this).removeClass('entered');$('#zone-menu .menu-block-wrapper.menu-block-3 .menu-depth-1 ul.main-menu').css('display', 'none');});
    $('#zone-menu .menu-block-wrapper.menu-block-3').bind('mouseleave', function(){
    $(this).removeClass('entered');

    $('.dropdown-background').removeClass('open');
    setTimeout(function(){ $('#zone-menu .menu-block-wrapper.menu-block-3 .menu-depth-1 ul.main-menu').css('display', 'none');}, 400);
    $('.dropdown-background').slideUp("slow");
});

    }

    function hideThis(){
    $(this).removeClass('entered');

    }
$('#zone-menu li.menu-depth-1').bind('mouseenter', function(){$(this).children('.discription-a-deth-1').addClass('hoverThis');});
$('#zone-menu li.menu-depth-1').bind('mouseleave', function(){$(this).children('.discription-a-deth-1').removeClass('hoverThis');});

  var config = {    
     over: showThis,/*   function = onMouseOver callback (REQUIRED)     */
     timeout:400,/*  number = milliseconds delay before onMouseOut     */
    out: hideThis, /*  function = onMouseOut callback (REQUIRED)     */
};
$('#zone-menu li.menu-depth-1.expanded').hoverIntent( config ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T22:53:32.490

也许看到：[http](http://bjk5.com/post/44698559168/breaking-down-amazons-mega-dropdown) : **//bjk5.com/post/44698559168/break-down-amazons-mega-dropdown** ***_* __ *_* __ *_* *_* __ *_* __ *_* _ __ *_* *____* -** ***[https://github.com/kamens /jQuery-menu-aim#readme](https://github.com/kamens/jQuery-menu-aim#readme)***

# python - Python 3.2 输入日期函数

> ID：15226898
> 
> 赞同：12
> 
> 时间：2013-03-05T14:54:05.327
> 
> 标签：python, datetime, input, python-3.x

我想写一个函数，它接受用户输入的日期，用搁置函数存储它，并在调用时打印三十天后的日期。

我试图从简单的事情开始，例如：

```
import datetime

def getdate():
    date1 = input(datetime.date)
    return date1

getdate()

print(date1) 
```

这显然是行不通的。

我已经使用了上述问题的答案，现在我的程序的那个部分可以工作了！谢谢！现在进入下一部分：

我正在尝试编写一个简单的程序，该程序按照您指示我获取日期的方式获取日期并增加 30 天。

```
import datetime
from datetime import timedelta

d = datetime.date(2013, 1, 1)
print(d)
year, month, day = map(int, d.split('-'))
d = datetime.date(year, month, day)
d = dplanted.strftime('%m/%d/%Y')
d = datetime.date(d)+timedelta(days=30)
print(d) 
```

这给了我一个错误：year,month,day = map(int, d.split('-')) AttributeError: 'datetime.date' object has no attribute 'split'

最终我想要的是 01/01/2013 + 30 天并打印 01/30/2013。

提前致谢！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-05T14:58:19.947

该`input()`方法*只能*从终端获取文本。因此，您必须想办法解析该文本并将其转换为日期。

你可以通过两种不同的方式来解决这个问题：

*   要求用户分别输入日期的 3 个部分，所以调用`input()`3 次，将结果转化为整数，并构建一个日期：

    ```
    year = int(input('Enter a year'))
    month = int(input('Enter a month'))
    day = int(input('Enter a day'))
    date1 = datetime.date(year, month, day) 
    ```

*   要求用户以*特定格式*输入日期，然后将该格式转换为年、月和日的三个数字：

    ```
    date_entry = input('Enter a date in YYYY-MM-DD format')
    year, month, day = map(int, date_entry.split('-'))
    date1 = datetime.date(year, month, day) 
    ```

这两种方法都是示例；例如，没有包含错误处理，您需要阅读 Python 异常处理以自己弄清楚。:-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-03-31T02:44:30.960

谢谢。我一直在试图弄清楚如何向 datetime.datetime(xxx) 添加信息，这很好地解释了它。如下

`datetime.datetime(year,month, day, hour, minute, second)` 参数都是整数。有用！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-01-02T09:34:10.193

使用 dateutils 模块

```
 from dateutil import parser

    date = parser.parse(input("Enter date: ")) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-08T17:44:48.587

你也可以使用

```
import datetime
time_str = input("enter time in this format yyyy-mm-dd")
time=datetime.datetime.strptime(time_str, "%Y-%m-%d") 
```

datetime.datetime.strptime() 以您给定的格式去除给定的字符串。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2021-05-21T17:29:18.830

检查库为

导入日期时间

并遵循语法

日期 = datetime.datetime(2013, 1, 1)

# python - Python re.sub() 怪异

> ID：15226899
> 
> 赞同：6
> 
> 时间：2013-03-05T14:54:08.413
> 
> 标签：python, regex

我对 Python 很陌生，事实上这是我的第一个脚本。

我正在为 Python 的正则表达式而苦苦挣扎。具体来说`re.sub()`

我有以下代码：

```
variableTest = "192"
test = re.sub(r'(\$\{\d{1,2}\:)example.com(\})', r'\1' + variableTest + r'\2', searchString, re.M ) 
```

有了这个，我试图匹配类似`host": "${9:example.com}"`inside`searchString`并替换`example.com`为服务器名称或 IP 地址。

如果`variableTest`包含 IP，则失败。我收到以下错误： `sre_constants.error: invalid group reference`

我用`variableTest`等于“127.0.0.1”、“1”、“192”、“192.168”对其进行了测试。“127.0.0.1”有效，而其他无效。如果我在其他人前面加上一封信，它也可以。

`variableTest`是一个字符串 - 验证`type(variableTest)`

我完全不知道为什么会这样。

`r'\1'`如果我在替换字符串中删除它也可以。`r'\1'`将`${\d}:`包含`\d`1 到 999 之间的数字。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-05T15:12:28.357

问题是输入 IP`variableTest`会导致替换字符串如下所示：

```
r'\18.8.8.8\2' 
```

如您所见，第一个组引用是第 18 组，而不是第 1 组。因此，`re`抱怨组引用无效。

在这种情况下，您想改用以下[`\g<n>`语法](http://docs.python.org/2/library/re.html#re.sub)：

```
r'\g<1>' + variableTest + r'\g<2>' 
```

产生例如`r'\g<1>8.8.8.8\g<2>'`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T15:09:40.967

re.sub（模式，repl，字符串，count=0，flags=0）

这是 re.sub() 的语法

你似乎调用标志 re.M 的方式应该像 flags=re.M，否则 python 会认为你的意思是 count=re.M

试一试，因为这是我唯一能决定的事情

还给我一个示例，说明您的 searchString 变量可能包含的内容

# asynchronous - IO and parallel async in Fsharp

> ID：15226900
> 
> 赞同：1
> 
> 时间：2013-03-05T14:54:10.390
> 
> 标签：asynchronous, f#, io

I have some computation intensive tasks, which are now only running on 1 core, so 1/8th of my machine capacity. At the end of each task, I write a log in a file.

What would be the most graceful way to handle this IO using parallel tasks ?

Having my write be itself async ?

Sending messages to an agent who'd process the write sequentially ?

```
[<Fact>]
let boom () = 
    let tasks = [1 .. 10]
                |> Seq.map (fun components ->  async {  //do compute intensive stuff
                                                        use writer = new StreamWriter("samefile")
                                                        writer.WriteLine "toto" }
           )
    tasks |> Async.Parallel  |> Async.RunSynchronously 
```

Edit

I ended up doing this, and replacing the `new Stream` in my async to be code by synchronous call to the agent.

```
[<Fact>]
let pasBoom () = 
    let tasks = [2 .. 2 .. 17]
                |> Seq.map (fun components ->  async {  //do compute intensive stuff
                                                        //use writer = new StreamWriter("samefile")
                                                        use writerhanlde = repoFileHandle.PostAndReply(fun replyChannel -> GetFile(@"samefile", replyChannel))  
                                                        printfn "%A" (writerhanlde.getWriter().ToString())
                                                        writerhanlde.getWriter().WriteLine "toto" }
           )
    tasks |> Async.Parallel  |> Async.RunSynchronously 
```

and the agent (there might be bugs please be careful, I just need something quick myself)

```
type IDisposableWriter = 
    inherit IDisposable
    abstract getWriter : unit -> StreamWriter

type StreamMessage = | GetFile of string * AsyncReplyChannel<IDisposableWriter>

let repoFileHandle =
    let writerCount = new Dictionary<string, int>()
    let writerRepo  = new Dictionary<string, StreamWriter> ()

    Agent.Start(fun inbox ->
        async { while true do
                    let! msg = inbox.Receive()
                    match msg with
                    | GetFile(filename, reply) -> 
                        if not (writerRepo.ContainsKey(filename)) then
                            writerRepo.[filename]  <- new StreamWriter(filename,true)
                            writerCount.[filename] <- 0
                        writerCount.[filename] <- writerCount.[filename] + 1

                        let obj = {new IDisposableWriter with 
                                    member this.getWriter () = writerRepo.[filename] 
                                    member IDisposable.Dispose() =  
                                        writerCount.[filename] <- writerCount.[filename] - 1                                                                        
                                        if writerCount.[filename] = 0 then
                                            writerRepo.[filename].Dispose()
                                            writerRepo.Remove(filename) |> ignore
                                }
                        reply.Reply(obj) }) 
```

and to avoid concurrent write

```
 type WriteToStreamMessage = | WriteToStream of string * string

  let fileWriterAgent =
        Agent.Start(fun inbox ->
            async { while true do
                        let! msg = inbox.Receive()
                        match msg with
                        | WriteToStream(filename, content) -> 
                            use writerhanlde = repoFileHandle.PostAndReply(fun replyChannel -> GetFile(filename, replyChannel))
                            writerhanlde.getWriter().WriteLine content
    }) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T15:49:25.567

您可以更改计算以返回要记录的消息而不是将其写入文件吗？然后你可以`PSeq`在 PowerPack 中使用，它是 TPL 上的一个瘦包装器：

```
open Microsoft.FSharp.Collections

let work n = sprintf "running task %d" n
let msgs = PSeq.init 10 work |> PSeq.toList
use writer = System.IO.StreamWriter(@"C:\out.log")
msgs |> List.iter writer.WriteLine 
```

# maven - 我需要在我的 POM.xml 中有一个 Parent 声明吗？

> ID：15226902
> 
> 赞同：6
> 
> 时间：2013-03-05T14:54:23.610
> 
> 标签：maven

我已将我的项目声明为 pom.xml 以定义父级，它会触发所有包含模块的反应器构建。一切都很好，并按预期工作。它以正确的顺序构建，所有测试都正确运行，并且我得到了预期的输出。

其中一个项目是共享库。我不想在`<parent>`这里添加声明，所以我没有。这一切仍然有效。

我的问题：我是否需要在我的任何子项目中添加父项目声明？在项目之间建立双向关系的利弊是什么？如果我不添加声明，当某些东西停止工作时，我会不会让它变得更难？

改写成一个问题：为什么要`<parent>`在模块 pom.xml 文件中进行配置？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-05T14:59:07.230

您的问题与项目继承与项目聚合之间的区别有关。引用定义了`<parent>`继承关系。`<modules>`父 pom.xml 中的部分定义聚合。它们是不同的。

如果`<parent>`模块 pom.xml 中没有配置，则不会继承父 pom.xml 配置。因此，假设您在该`<dependencyManagement>`部分的父 pom 中定义了依赖项的版本，没有父引用的模块 pom.xml 将不会继承该版本。或者如果你所有的子模块都需要使用一个公共库，你可以在父 pom.xml 中定义依赖。但是，没有父引用的模块 pom.xml 也不会继承该依赖项。

有关详细信息，请查看[项目继承与项目聚合](http://maven.apache.org/guides/introduction/introduction-to-the-pom.html#Project_Inheritance_vs_Project_Aggregation)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T15:12:11.117

这取决于您如何配置构建。如果您有正确配置的父 pom，`version and groupid`则可以在您的项目之间共享基本信息。

您可以定义应在项目中的所有模块中共享的项目范围的配置信息。例如：

```
<modelVersion>4.0.0</modelVersion>
<groupId>groupd.id</groupId>
<artifactId>artifact.id</artifactId>
<packaging>pom</packaging>
<version>version</version> 
```

有了这些，您就不会在模块项目中重复该信息。可以像这样引用相同的信息：

```
<parent>
    <groupId>group.id</groupId>
    <artifactId>artifact.id</artifactId>
    <version>version</version>
</parent> 
```

请记住，父 pom 可用于共享比上面指定的更多的信息。您可以进行依赖管理、插件管理，甚至定义可重用的配置文件。

# weka - Is there a way to calculate Equal Error Rate (EER) using Weka?

> ID：15226904
> 
> 赞同：1
> 
> 时间：2013-03-05T14:54:27.090
> 
> 标签：weka, evaluation

I'm trying to find a way to calculate EER value using Explorer in Weka but without sucess. I can just see the ROC curve (thereshold curve).

Anyone can show how to find EER value using Weka.

Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-05T22:56:08.667

我实现了一个 Weka 包来计算 EER。

链接是：[https ://sourceforge.net/projects/eer/?source=directory](https://sourceforge.net/projects/eer/?source=directory)

此致，

# sql - 如何摆脱 T-SQL 中的孤立默认约束？

> ID：15226905
> 
> 赞同：0
> 
> 时间：2013-03-05T14:54:27.573
> 
> 标签：sql, sql-server, tsql, constraints

我正在尝试创建一个脚本以便在 SQL Express 2008 R2 中创建一个表，如下所示：

```
IF (EXISTS (SELECT * FROM sys.tables WHERE name='Table' AND [type]='U')) BEGIN
    DROP TABLE Table
END
GO

CREATE TABLE Table (
    col DATETIMEOFFSET CONSTRAINT DF_Table_col DEFAULT GETUTCDATE()
)
GO 
```

我正在尝试遵循创建可以在我的项目的此发布周期中重新执行的脚本的做法。但问题是我忘记在删除表“Table”之前删除默认约束 DF_Table_col，我将其写为：

```
IF (EXISTS (SELECT * FROM sys.default_constraints WHERE name='DF_Table_col')) BEGIN
    ALTER TABLE Table DROP CONSTRAINT DF_Table_col
END
GO 
```

现在，如果我尝试重新运行脚本，则会收到以下错误：

```
Msg 2714, Level 16, State 5, Line 1
There is already an object named 'DF_Table_col' in the database.
Msg 1750, Level 16, State 0, Line 1
Could not create constraint. See previous errors. 
```

**如何摆脱孤立约束 DF_Table_col？**

我尝试将此孤儿绑定回同名的新表，如下所示：

```
exec sp_bindefault 'DF_Table_col', 'Table.col' 
```

但它给了我以下错误：

```
Msg 15050, Level 11, State 1, Procedure sp_bindefault, Line 108
Cannot bind default 'DF_Table_col'. The default must be created using the CREATE DEFAULT statement. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T15:02:12.033

至于 DF_Table_col 将被删除，如果“表”被删除并且它属于“表”，则可能存在“DF_Table_col”。在另一张桌子上。

如果您不关心可以使用的名称

```
CREATE TABLE Table (
    col DATETIMEOFFSET  DEFAULT GETUTCDATE()
)
GO 
```

# php - isset($_SESSION) 不在远程服务器上工作

> ID：15226906
> 
> 赞同：-1
> 
> 时间：2013-03-05T14:54:28.587
> 
> 标签：php

我有一个登录页面，用户在其中输入他的用户名和密码。如果成功，我将他重定向到我开始会话的 index.php：

```
session_start(); 
```

从 index.php 他可以导航到不同的页面（“p1.php”），在“p1.php”之上我有这个检查：

```
<?php
if(!isset($_SESSION)) 
{ 
    exit;
} 
?> 
```

这适用于我的本地服务器，但是当我在远程服务器上部署它时`!isset($_SESSION)`总是返回 true。

这里会发生什么？

编辑：我在我的托管服务提供商方面发现了一个在 php.ini 中添加它的请求：

```
session_save_path("your home directory path"/phpsessions); 
```

并在我的路径中创建一个 phpsessions 文件夹。

我做到了，但这没有帮助。

我也尝试这样做：

在 index.php 中：

```
session_start();
if(isset($_REQUEST['lecturer_id']))
{
    echo "lecturer_id set";
    $_SESSION['lecturer_id'] = $_REQUEST['lecturer_id']; // store session data
} 
```

在 p1.php 中： session_start(); if(!isset($_SESSION['lecturer_id'])) { 退出; }

并且页面总是退出，即未定义会话变量

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T14:56:49.553

服务器很可能会以静默方式创建一个 PHP 会话，而您的本地服务器未配置为执行此操作。

尝试检查特定的`$_SESSION`eg`$_SESSION['x']`而不仅仅是`$_SESSION`.

编辑：`isset($_SESSION)`您应该检查您专门设置的任何会话变量，而不是检查：`isset($_SESSION['SESSION_VARIABLE_YOU_SET'])`

`isset($_SESSION)`调用后返回 true `session_start()`，这就是为什么您需要检查`$_SESSION`您设置的特定变量的原因

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T17:21:02.953

您只需要确保您`session_start();`的 p1.php 页面和任何使用会话数据的页面都位于最顶部。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T15:01:02.197

可能远程服务器配置为会话自动启动。如果你可以配置这个 php 实例，你可以在 php.ini 文件（session_autostart 指令）中检查它。

更新：对不起，我没有正确理解你的问题。真的，如果会话自动启动设置为“开”会话总是存在的。您不能使用 isset($_SESSION) 来确定用户是否已登录。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-15T09:20:32.933

我遇到了同样的情况，我所做的是我取消了第一个变量，例如，`$_SESSION['loggedin']`），

我将首先使用以下方法取消设置：

```
session_start();
unset($_SESSION['loggedin']); 
```

然后我会注释掉`unset($_SESSION['loggedin'])`；

问题解决了。

# objective-c - 将字典添加到 nsdictionary 作为键的值

> ID：15226909
> 
> 赞同：0
> 
> 时间：2013-03-05T14:54:38.427
> 
> 标签：objective-c, nsdictionary

我必须准备一个字典进行序列化，然后将其发布到服务器。字典可能有几个其他字典作为 @"items" 键的值。但是有些括号会打断。服务器响应我一个错误html。

```
NSMutableArray *a = [[NSMutableArray alloc]init];

    for(int i = 0; i < [self.cartCopy count]; i++) {
        NSString *itemNumber = [NSString stringWithFormat:@"%d", i + 1];
        NSDictionary *tempDict = @{ itemNumber : @{
                                                     @"item_id" : [[self.cartCopy objectAtIndex:i]objectForKey:@"id"],
                                                     @"quantity" : [[self.cartCopy objectAtIndex:i]objectForKey:@"quantity"],
                                                     @"type" : [[self.cartCopy objectAtIndex:i]objectForKey:@"type"],
                                                     @"color_id" : @"0",
                                                 }
                                    };
        [a addObject:tempDict];
    }

    NSDictionary *dict = @{
                           @"date":oDate,
                           @"address":oAddress,
                           @"name":oName,
                           @"shipping_date":oShippingDate,
                           @"receiver_phone":oReceiverPhone,
                           @"customer_phone":oCustomerPhone,
                           @"total_price": oTotalPrice ,
                           @"additional_info": @"asd",
                           @"items": a
                           }; 
```

更新： [NSJSONSerialization dataWithJSONObject:dict options:kNilOptions error:nil] 之后我的 NSLog 字符串：

```
{"address":"asd",
"name":"asd",
"receiver_phone":"123",
"customer_phone":"123",
"total_price":"1",
"date":"2013-03-05 21:22:55",
"additional_info":"asd",
"items":[
    {"1":{
        "type":"2",
        "color_id":"0",
        "item_id":10,
        "quantity":"3"
        }
    },
    {"2":{
        "type":"1",
        "color_id":"0",
        "item_id":74,
        "quantity":"3"
        }
    }
    ],
"shipping_date":"2030-03-03 12:12:12"
} 
```

我认为原因是方括号。我怎样才能删除它们？

例如，它与字典完美配合：

```
NSDictionary *dict = @{
                       @"date":oDate,
                       @"address":oAddress,
                       @"name":oName,
                       @"shipping_date":oShippingDate,
                       @"receiver_phone":oReceiverPhone,
                       @"customer_phone":oCustomerPhone,
                       @"total_price": oTotalPrice ,
                       @"additional_info": @"asd",
                       @"items": @{
                               @"1":@{
                                    @"type":@"1",
                                    @"color_id":@"0",
                                    @"item_id":@"1",
                                    @"quantity":@"1"
                                    },
                               @"2":@{
                                    @"type":@"1",
                                    @"color_id":@"0",
                                    @"item_id":@"1",
                                    @"quantity":@"1"
                                    }
                               }
                    }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T15:07:55.227

看起来好像您想将[JSON](http://www.json.org)发送到服务器。您可以使用从字典创建 JSON 数据

```
NSError *error;
NSData *jsonData = [NSJSONSerialization dataWithJSONObject:dict options:0 error:&error]; 
```

如果您需要它作为字符串：

```
NSString *jsonString = [[NSString alloc] initWithData:jsonData encoding:NSUTF8StringEncoding]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T17:18:59.740

在您完美运行的示例中，项目对象是带有键 {1, 2} 的字典。

在您的输出 JSON 中，您的 items 对象是一个数组。

该数组包含 2 个对象，每个对象都是一个字典。

The first contains a single key {1}. The second contains a single key {2}.

You just need to remove the array and use a dictionary instead to store these dictionaries.

# paypal - Find paypal account information via API

> ID：15226910
> 
> 赞同：0
> 
> 时间：2013-03-05T14:54:39.097
> 
> 标签：paypal, paypal-sandbox

After reading the PayPal API for quite some time, I fail to see how to obtain account / account holder information. For the Account for which I have the API Username / Passwort and Signature. This leads me to the following questions:

a) is it possible to obtain those information. b) how would I accomplish this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T15:13:17.203

因此，澄清一下，您是否希望接收您拥有 API 凭据的帐户的帐户信息？您要检索什么信息，为什么？通常，您拥有凭据的帐户将是您自己的，您只需登录即可访问它。如果您想检索有关交易的信息，您可以使用 API 来执行此操作。但是，API 不会返回您在帐户中列出的信息，例如信用卡号、电子邮件地址等。

GetPalDetails API 返回您正在使用的 API 凭据的帐户的 PayPal ID 以及国家/地区代码。

# java - Automating complete testing of Java EE web application

> ID：15226912
> 
> 赞同：2
> 
> 时间：2013-03-05T14:54:48.307
> 
> 标签：java, jakarta-ee, web-applications, automation

I have a doubt. Say I have a web application which is big and relies on Java/Java EE (JSP/Servlets).

Every time before a drop we test each and every functionality on GUI so that everything is working properly. Previously it was easy but now as the number of modules has increased exponentially, manually testing each and every GUI with required functionality is no more a feasible option.

I am on lookout for tools in which I can write my entire test case say about 1000 and then just run it once before the drop and it will list down all the test cases that have failed.

The tool preferably must be free to download and use it.

I dont know whether using

> Arquilian

or

> JUnit

in this regard will help or not but automating testing before the drop is really needed.. Please guide.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T15:16:15.713

将 Junit 与模拟框架（即 Mockito）一起使用来测试单元（服务方法）

使用 Arquillian 在集成级别上进行测试（不同的服务、模块如何协同工作）

使用数据库测试工具（即[dbunit](http://www.dbunit.org/)）来测试你的数据库/持久层）

使用[Selenium](http://docs.seleniumhq.org/)测试你的前端

尽可能多地测试。

使用[Jenkins](http://jenkins-ci.org/)和[Sonar](http://www.sonarsource.org/)跟踪您的构建过程以及测试和代码的质量

您应该始终在不同级别上测试您的应用程序。解决方案不止一种。使用单元测试来测试应用程序的小部分并使重构尽可能容易。

使用集成测试检查您的模块是否仍按预期协同工作。

使用 GUI 测试来检查您的客户是否可以使用您的软件。

如果相关，请考虑性能测试（即[jmeter](http://jmeter.apache.org/)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T15:20:49.217

肯定是硒。
将它与 Maven 结合起来，因为您可能需要专门为测试目的打包您的项目。此外，maven 允许您在集成测试阶段启动容器并在最后自动关闭它。您还可以将其配置为在 jenkins / hudson 上的夜间构建，以便您很快收到任何回归的通知。

# actionscript-3 - 如何阻止 hittestobject 进入另一个框架？闪存 AS3

> ID：15226919
> 
> 赞同：-1
> 
> 时间：2013-03-05T14:55:00.250
> 
> 标签：actionscript-3, flash

我正在创建一个带有 hittestobject 的拖放游戏，但是当按下后退按钮时，拖放游戏的标签仍然显示在后帧上。我必须在按下返回按钮之前重置游戏吗？

代码：

```
right_mc.visible=false; 
wrong_mc.visible=false;

var orig1X:Number=frog_mc.x;  
var orig1Y:Number=frog_mc.y;
var orig2X:Number=queen_mc.x;
var orig2Y:Number=queen_mc.y;
var orig3X:Number=apple_mc.x;
var orig3Y:Number=apple_mc.y; 

frog_mc.addEventListener(MouseEvent.MOUSE_DOWN, dragTheObject);
frog_mc.addEventListener(MouseEvent.MOUSE_UP, frog_mcRelease);
queen_mc.addEventListener(MouseEvent.MOUSE_DOWN, dragTheObject);   
queen_mc.addEventListener(MouseEvent.MOUSE_UP, queen_mcRelease);   
apple_mc.addEventListener(MouseEvent.MOUSE_DOWN, dragTheObject);    
apple_mc.addEventListener(MouseEvent.MOUSE_UP, apple_mcRelease);    

done_btn.addEventListener(MouseEvent.CLICK, checkAnswers);    
reset_btn.addEventListener(MouseEvent.CLICK, reset);

frog_mc.buttonMode=true;    
queen_mc.buttonMode=true;    
apple_mc.buttonMode=true;

function dragTheObject(event:MouseEvent):void { 
    var item:MovieClip=MovieClip(event.target); 
    item.startDrag(); 
    var topPos:uint=this.numChildren-1; 
    this.setChildIndex(item, topPos);    
}  

function frog_mcRelease(event:MouseEvent):void { 
    var item:MovieClip=MovieClip(event.target); 
    item.stopDrag();       
    if (drop_frog.hitTestPoint(item.x,item.y)) { 
        item.x=drop_frog.x; 
        item.y=drop_frog.y; 
    } else { 
       item.x=orig1X; 
       item.y=orig1Y; 
    } 
};    

function queen_mcRelease(event:MouseEvent):void { 
    var item:MovieClip=MovieClip(event.target); 
    item.stopDrag();   
    if (drop_queen.hitTestPoint(item.x,item.y)) { 
        item.x=drop_queen.x; 
        item.y=drop_queen.y; 
    } else { 
        item.x=orig2X; 
        item.y=orig2Y; 
    } 
};    

function apple_mcRelease(event:MouseEvent):void { 
    var item:MovieClip=MovieClip(event.target); 
    item.stopDrag();   
    if (drop_apple.hitTestPoint(item.x,item.y)) { 
        item.x=drop_apple.x; 
        item.y=drop_apple.y; 
    } else { 
        item.x=orig3X; 
        item.y=orig3Y; 
    } 
};  

function checkAnswers(event:MouseEvent):void { 
    if (drop_frog.hitTestPoint(frog_mc.x,frog_mc.y) && 
            drop_queen.hitTestPoint(queen_mc.x,queen_mc.y) && 
            drop_apple.hitTestPoint(apple_mc.x,apple_mc.y)) {
        wrong_mc.visible = false;
        right_mc.visible = true;
    } else {
        wrong_mc.visible = true;
        right_mc.visible = false;
    }
}

function reset(event:MouseEvent):void { 
    frog_mc.x=orig1X; 
    frog_mc.y=orig1Y;     
    queen_mc.x=orig2X; 
    queen_mc.y=orig2Y;
    apple_mc.x=orig3X; 
    apple_mc.y=orig3Y; 

    right_mc.visible=false; 
    wrong_mc.visible=false; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T15:25:54.447

理想情况下，您需要在返回时删除所有 eventListener。如果您通过另一个的 addChild 命令添加了一些孩子，您必须删除聊天孩子。您是如何将“拖放游戏的标签”添加到屏幕上的？

# javascript - 如何将 byte[] 序列化为简单的 JSON 数组而不是 JSON.net 中的 base64？

> ID：15226921
> 
> 赞同：28
> 
> 时间：2013-03-05T14:55:03.997
> 
> 标签：javascript, serialization, bytearray, json.net

我使用 JSON.net 在 C# 和 JavaScript 之间序列化一些对象。JSON 数据通过 WebSocket 在 .NET 和浏览器应用程序之间传输。

在数据结构中有一些`byte[]`字段，我也希望这些字段`Array`在 JavaScript 中也是如此。

如何将 C# 序列化为`byte[]`简单的 JSON 数组，`[ 0 , 1 , 254, 255 ]`而不是 base64 字符串？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-03-05T15:58:47.967

JSON.NET 正在选择`BinaryConverter`读取和写入字节数组。您可以在[源代码](https://github.com/JamesNK/Newtonsoft.Json/blob/92d170a0783bc962f52faf02acfcecbe21d3b683/Src/Newtonsoft.Json/Converters/BinaryConverter.cs#L64)中看到它使用字节数组对类进行`WriteValue`操作，`JsonWriter`这导致它们被写入为 Base-64。

要修改它，您可以编写自己的转换器，以您期望的格式读取和写入数组：

```
public class ByteArrayConverter : JsonConverter
{
    public override void WriteJson(
        JsonWriter writer,
        object value,
        JsonSerializer serializer)
    {
        if (value == null)
        {
            writer.WriteNull();
            return;
        }

        byte[] data = (byte[])value;

        // Compose an array.
        writer.WriteStartArray();

        for (var i = 0; i < data.Length; i++)
        {
            writer.WriteValue(data[i]);
        }

        writer.WriteEndArray();
    }

    public override object ReadJson(
        JsonReader reader,
        Type objectType,
        object existingValue,
        JsonSerializer serializer)
    {
        if (reader.TokenType == JsonToken.StartArray)
        {
            var byteList = new List<byte>();

            while (reader.Read())
            {
                switch (reader.TokenType)
                {
                    case JsonToken.Integer:
                        byteList.Add(Convert.ToByte(reader.Value));
                        break;
                    case JsonToken.EndArray:
                        return byteList.ToArray();
                    case JsonToken.Comment:
                        // skip
                        break;
                    default:
                        throw new Exception(
                        string.Format(
                            "Unexpected token when reading bytes: {0}",
                            reader.TokenType));
                }
            }

            throw new Exception("Unexpected end when reading bytes.");
        }
        else
        {
            throw new Exception(
                string.Format(
                    "Unexpected token parsing binary. "
                    + "Expected StartArray, got {0}.",
                    reader.TokenType));
        }
    }

    public override bool CanConvert(Type objectType)
    {
        return objectType == typeof(byte[]);
    }
} 
```

您可以通过将 应用于`JsonConverterAttribute`成员来使用它：

```
[JsonConverter(typeof(ByteArrayConverter))]
public byte[] Data { get; set; } 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-03-05T15:01:22.303

我能想到的最简单的方法是将字节数组转换为整数数组，例如：

```
var intArray = byteArray.Select(b => (int)b).ToArray(); 
```

这不需要对 JSON 库进行任何特殊处理，也不需要任何自定义序列化或类似的东西。

**编辑**：这意味着必须自定义您的数据对象以处理不同的类型。也许：

```
public class CustomFoo : Foo
{
    // SomeBytesHere is a byte[] in the base class
    public new int[] SomeBytesHere { get;set; }
} 
```

所以也许这不是最简单的 - 取决于你必须序列化多少东西

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-09-11T06:55:01.823

参考[我的答案](https://stackoverflow.com/a/52270189/2430943)，JSON.net 可以在设置中自定义序列化，而不是属性中的属性。

您可以轻松地将其从 base64 更改为数字数组，只需编写一个方括号 csv 原始值。

# c# - 在 jquery 中启用可排序

> ID：15226924
> 
> 赞同：2
> 
> 时间：2013-03-05T14:55:07.213
> 
> 标签：c#, javascript, jquery, asp.net, blockui

我想在页面加载时禁用 jquery 可排序但不确定，请有人指导我正确的方向，

在 jquery 我可以这样做 `$(".myList").sortable('disable');`

**设想**

我有一个复选框，基于该复选框我正在启用和禁用可对列表进行排序的 jquery，现在我可以使用 `$(document).ready(function() {`并 `$(checkbox).change(function() {`禁用和启用拖动***，但我无法在后面的代码中的页面加载时检查它，因为复选框正在从数据库中获取其值页面加载。***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T04:43:32.080

```
$(document).ready(function() { 
        if ($('#chcekbox).is(':checked')) {
        $(".myList").sortable('enable');
    } else {
        $(".myList").sortable('disable');
    }  
}); 
```

# android - 在不使用 Scrollview 的情况下使 Linearlayout 可滚动

> ID：15226931
> 
> 赞同：2
> 
> 时间：2013-03-05T14:55:37.080
> 
> 标签：android, scrollview, android-linearlayout

我有一个 Linearlayout，我想在不使用 ScrollView 的情况下使其可滚动。是否可以。任何建议将不胜感激。这是详细信息：如果我使用 ScrollView 包装 LinearLayout，没关系，但是当我在 LinearLayout 中使用 ListView 时（因为这是我的客户要求），它说不要在 ScrollView 中使用 ListView。我必须使用 ListView 显示 50 个产品列表，并且我必须将此 ListView 放在 LinearLayout 中，同时整个布局将是可滚动的。是否可以。这是骨架：

```
<LinearLayout>
  <RelativeLayout>
    <LinearLayout> 
        <TextView>
    </LinearLayout>
    <LinearLayout>
        <TextView>
    </LinearLayout>
    <LinearLayout>
        <TextView>
    </LinearLayout>
    <LinearLayout>
        <TextView>
    </LinearLayout>
    <LinearLayout>
        <TextView>
    </LinearLayout>
    <LinearLayout>
        <TextView>
    </LinearLayout>
    <LinearLayout>
        <TextView>
    </LinearLayout>
    <LinearLayout>
        <TextView>
    </LinearLayout>
    <LinearLayout>
        <TextView>
    </LinearLayout>
    <LinearLayout>
        <TextView>
    </LinearLayout>
    <LinearLayout>
        <TextView>
    </LinearLayout>
    <LinearLayout>
        <TextView>
    </LinearLayout>
    <LinearLayout>
        <TextView>
    </LinearLayout>
    <LinearLayout>
        <TextView>
    </LinearLayout>
    <LinearLayout>
        <ListView>
    </LinearLayout> 
  </RelativeLayout>
</LinearLayout> 
```

重要提示：请参阅我要添加 50 个列表项的 ListView。那么我怎样才能使这个总的 LinearLayout 可滚动。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T09:53:16.877

实际上在做了一些研究之后，我想出了一个解决这个问题的方法：

**首先，我想用一种非常简单的方式来解释这个问题。**

1.  LinearLayout 将是可滚动的。为此，我们可以使用 ScrollView，但有时我们需要在 LinearLayout 中使用 ListView。
2.  我们知道在 ScrollView 内部我们不能使用像 ListView 这样的另一个滚动视图

**如何解决？**

ListView 本质上是可滚动的，因此我们可以在 ListView 中添加页眉和页脚。作为结论：

1.  创建布局 header.xml 和 footer.xml 和 list.xml
2.  从 main Activity 中的 list.xml 中找到 ListView 引用，并在 ListView 引用中动态添加页眉和页脚。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-05T15:23:18.917

如果您只在线性布局中使用列表视图，则不需要使用滚动视图。因为默认情况下，列表视图是可滚动的。但是如果您还有其他组件，那么您可以将它们分开在另一个滚动视图中。确保滚动视图仅使用一种直接子布局。下面是一个示例代码。

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:background="#ffffff"> 

    <ListView
        android:id="@android:id/list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:divider="#b5b5b5"
        android:dividerHeight="1dp"
        android:cacheColorHint="#00000000"/> 

</LinearLayout> 
```

# z3 - Z3中的分段错误

> ID：15226944
> 
> 赞同：1
> 
> 时间：2013-03-05T14:56:12.947
> 
> 标签：z3

我正在使用带有位向量算术的 Quantified BitVector 公式进行基准测试。基准测试在 Z3 4.3.0 中会在 Linux 64 位中产生分段错误。我认为问题的出现是由于对等式的传递使用。

```
...
(assert (= (bvadd (capacity this) (_ bv1 5)) (EAO.length (elements this))  ))
(assert (= (EAO.length (elements this)) (IKAO.length (heap this)) )) 
```

有问题的完整基准可以在这里找到： [示例](http://rise4fun.com/Z3/ASf2)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T17:12:12.630

感谢您报告崩溃。[我修复了错误](http://z3.codeplex.com/SourceControl/changeset/bdc675b1dfef)。该修复程序已在不稳定（正在进行中）分支中可用。[以下](http://z3.codeplex.com/wikipage?title=Building%20the%20unstable%20%28working-in-progress%29%20branch&referringTitle=Documentation)是有关如何构建不稳定分支的说明。该修复程序也将于明天在 Z3 夜间版本中提供。

可以在以下位置下载每晚构建：http: [//z3.codeplex.com/releases](http://z3.codeplex.com/releases)。我们必须点击“计划中的”链接。我[在这里](http://research.microsoft.com/en-us/um/people/leonardo/blog/2013/02/15/precompiled.html)写了一些说明。

# jquery - 在全日历上渲染事件

> ID：15226946
> 
> 赞同：1
> 
> 时间：2013-03-05T14:56:15.973
> 
> 标签：jquery, fullcalendar

我们正在将 jquery 插件 fullCalendar 用于工作中的项目。但是，我们希望在每天列的顶部显示具有某些属性的某些事件。问题是我不想更改 Fullcalendar.js 的源代码，如果我不需要的话，它甚至似乎正在使用缩小的 .js 来呈现事件。

我知道它存在一个触发自定义事件的触发器，`eventRender: function (event, element)`但我没有想法将事件呈现在顶部。对于这个例子，我们可以说事件有一个`important`属性。

所以我想这个伪代码会让我的例子更清楚：

```
eventRender: function (event, element) {
    if(event.important) {
        //render at top
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T10:56:17.847

我的任务要求发生了变化，现在每个事件都有一个特殊的优先级，它是一个整数。数字越高，它的重要性就越大。

老的：

```
// Old function, this won't sort based on importance first!
function segCmp(a, b) {
    return (b.msLength - a.msLength) * 100 + (a.event.start - b.event.start);
} 
```

新的：

```
function segCmp(a, b) {
    var priorityDiff = ((a.event.priority || 0) < (b.event.priority || 0)) ? 1 : ((b.event.priority || 0) < (a.event.priority || 0)) ? -1 : 0;
    if(priorityDiff != 0) return priorityDiff;
    return (b.msLength - a.msLength) * 100 + (a.event.start - b.event.start);
} 
```

对于想要使用它的您，您的事件 JSON 也看起来像这样：

```
{
allDay: false,
color: "#7BD148",
id: "1",
key: "1",
start: "2013-01-28 13:07:00",
title: "test event",
url: "http://google.se",
priority: 10
},
{
allDay: false,
color: "#7BD148",
id: "2",
key: "2",
start: "2013-01-28 12:07:00",
title: "test event 2",
url: "http://google.se",
priority: 5
}, 
```

正如您可能看到的，第二个事件安排得更早，但添加了代码后，它将按优先级对这两个事件进行排序。因此，第一个事件将首先发生，第二个事件紧随其后。

这就是我解决它的方法，优先级是一个整数，我试图按它排序，除非它们相同或不存在（空/未定义）。它按最高整数排序。

该函数在 fullCalendar.js 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-25T09:46:44.760

FullCalendar 从 v.2.4.0 开始添加了此功能。它被称为“ [eventOrder](https://fullcalendar.io/docs/event_rendering/eventOrder/) ”，是日历选项的设置。您可以将事件属性的名称作为参数传递，它会根据该属性按字母顺序对事件进行排序。

```
// start calendar
var $calendar = $("#calendar").fullCalendar({
    // Start of calendar settings
    header: {
        left: 'title',
        right: 'today,month,agendaDay,agendaWeek prev,next'
    },

    // setting to display sorted based on this property
    eventOrder: "priority",

    events: data
} 
```

例如，数据是：

```
data = [
    {
        title: "event1",
        start: "2017-01-25"
        priority: "a"
    },
    {
        title: "event2",
        start: "2017-01-26"
        priority: "b"
    },
    {
        title: "event3",
        start: "2017-01-27"
        priority: "c"
    }
] 
```

# winapi - 用于 Hiberfil.sys 位置的 Windows API

> ID：15226950
> 
> 赞同：2
> 
> 时间：2013-03-05T14:56:28.853
> 
> 标签：winapi, wmi

有人知道是否有 Windows API 可以返回 hiberfil.sys 的位置吗？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T14:30:38.083

Hiberfil.sys 是在您启用休眠并至少休眠一次计算机时创建的。它的位置可以像任何其他文件一样确定：通过指示操作系统搜索它。它通常位于系统驱动器的根目录中，通常是 C:。[在这里](http://social.technet.microsoft.com/Forums/en/winserverpowershell/thread/435826f4-9b3c-4783-afa3-b1c1bbc554dd)找到了这个工作的 powershell 脚本。查看完整脚本的链接，但这是核心：

```
gwmi cim_datafile -filter "path='\\'" | ? {$_.name -match 'hiberfil.sys'} or

gwmi -Query "Associators of {Win32_Directory.Name='C:\'} Where ResultClass=CIM_DataFile" | ? {$_.name -match 'hiberfil.sys'} 
```

卡尔也很有帮助。E. Peterson的API参考：http: [//vb.mvps.org/samples/apixref.asp](http://vb.mvps.org/samples/apixref.asp)

他还提供了一些示例代码供下载，并[压缩](http://vb.mvps.org/samples/FileInfo/)了。希望这可以帮助...

# java - Java servlet 表单操作问题

> ID：15226951
> 
> 赞同：-1
> 
> 时间：2013-03-05T14:56:29.570
> 
> 标签：java, servlets

我已将我的 java 项目附加到 java web 应用程序的源包中。我制作了一个名为“System”的 servlet，我想做的是为我的后端应用程序创建一个前端。

但是我遇到的问题是，在我的“processregister”表单中，我无法让它重新定向到提交操作上的第二个“processreadregister”操作。因此，当用户填写表格时，我可以获取信息，然后调用我的集合让我的后端进行注册，显然我可以看到它是否成功。

不习惯 servlet，所以我可能会完全错误并调用错误的操作。

代码示例：

```
package HPC;

/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
import hpcproject.HPCSystem;
import hpcproject.JobRequest;
import hpcproject.User;
import java.io.IOException;
import java.io.PrintWriter;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

/**
 *
 * @author Kieran
 */
@WebServlet(name = "System", urlPatterns = {"/System"})
public class System extends HttpServlet {

    HPCSystem System = new HPCSystem();

    public enum OPCode {
// specify enums to methods

        BOOKING, READBOOKING, NOTHING;

        public static System.OPCode resolve(String str) {
            try {
                return valueOf(str.toUpperCase());
            } catch (Exception e) {
                return NOTHING;
            }
        }
    }

    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {

        switch (System.OPCode.resolve(request.getParameter("action"))) {
            case REGISTER:
                processRegister(request, response);
                break;
            case READREGISTER:
                processReadRegister(request, response);
                break;

        }
    }

    protected void processRegister(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        PrintWriter out = response.getWriter();
        User testUser = new User();
        System.RegisterUserWithSystem(testUser);
        // point where it goes

        out.println("<html>");
        out.println("<head>");
        out.println("<title>Register Process</title>");
        out.println("</head>");
        out.println("<body>");
        out.println("<FORM NAME ='register' ACTION ='readregister' METHOD='POST>'");
        // SORT OUT ISSUE HERE!!!
        out.println("<input type='hidden' name='action' value='readregister'>");
        out.println("<br>");
        out.println("Login ID:");
        out.println("<INPUT TYPE='TEXT' name='user'>");
        out.println("<br>");
        out.println("Password:");
        out.println("<INPUT TYPE='PASSWORD' name='password'>");
        out.println("<br>");
        out.println("Department:");
        out.println("<INPUT TYPE='TEXT' name='department'>");
        out.println("<br>");
        out.println("Email:");
        out.println("<INPUT TYPE='TEXT' name='email'>");
        out.println("<br>");
        out.println("First name:");
        out.println("<INPUT TYPE='TEXT' name='fname'>");
        out.println("<br>");
        out.println("Last name:");
        out.println("<INPUT TYPE='TEXT' name='lname'>");
        out.println("<br>");
        out.println("<INPUT TYPE='SUBMIT' VALUE='Submit' onclick=setType('readregister') >");
        out.println("</FORM>");
        out.println("</body>");
        out.println("</html>");
    }

    protected void processReadRegister(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        PrintWriter out = response.getWriter();
        User testUser = new User();

            String id = request.getParameter("user");
            String password = request.getParameter("password");
            String department = request.getParameter("department");
            String email = request.getParameter("email");
            String myfirstname = request.getParameter("fname");
            String mylastname = request.getParameter("lname");

            testUser.setUserID(id);
            testUser.setUserPassword(password);
            testUser.setUseDepartment(department);
            testUser.setUserEmail(email);
            testUser.setUserFname(myfirstname);
            testUser.setUserLname(mylastname);

            if (System.RegisterUserWithSystem(testUser)) {
                out.println("User added successfully");
            } else {
                out.println("Failed to add user");
            }
             out.println("<html>");
        out.println("<head>");
        out.println("<title>Charts</title>");
        out.println("</head>");
        out.println("<body>");
        out.println("<p>View Charts</p>");
        out.println("</body>");
        out.println("</html>");

    }

    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        doGet(request, response);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T15:11:22.193

标签中的`action`属性“[指定提交表单时将表单数据发送到何处](http://www.w3schools.com/tags/att_form_action.asp)”。您正在使用并尝试对它做一个没有意义的事情，因为您没有相应的映射。尝试更改您的 servlet 映射到的属性。`<form>``ACTION ='readregister'``POST``readregister``action``/System`

你还有其他小错误：

```
 out.println("<FORM NAME ='register' ACTION ='readregister' METHOD='POST>'"); 
```

应该

```
 out.println("<FORM NAME ='register' ACTION ='readregister' METHOD='POST'>"); 
```

`'`注意 .之前的结束单引号`>`。

您应该真正研究一下用于 Java servlet 的 JSP 和不同的 html 呈现技术。将 html 直接写入 java 是非常糟糕的做法。

# highcharts - 导出带有变音符号 (ä) 的图表

> ID：15226954
> 
> 赞同：0
> 
> 时间：2013-03-05T14:56:35.067
> 
> 标签：highcharts, highstock

有没有办法导出轴标签中带有变音符号的图表？我的图表在 x 轴上有德国月份（Januar、Februar、März ...）。标签是通过 Highcharts.setOptions() 配置的。我使用 \u00e4 作为“März”中的 ä，它在网站上正确显示，但在导出的图像中它始终显示为 ?。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T10:28:33.830

是的，有可能，您需要在文件/页面中进行 UTF-8 编码。

# python - 在不使用循环的情况下向 Pandas DataFrame 添加一个新列，其中包含来自单独 DataFrame 的编码数据？

> ID：15226956
> 
> 赞同：2
> 
> 时间：2013-03-05T14:56:39.010
> 
> 标签：python, dataframe, pandas

我遇到的问题是我有一个大型数据框（约 300,000 行），每个主题的多行代表不同条件下的给定值。简化版如下所示：

```
In [12]: df1
Out[12]:
   SubID  Condition  Value
0      1          1  0.123
1      1          2  0.234
2      2          1  0.345
3      2          2  0.456
4      3          1  0.567
5      3          2  0.678
6      4          1  0.789 
```

我还有第二张表，其中只有 80 行奇数行，其中包含受试者所属的基因组。

我希望将该数据添加到第一个 DataFrame。编码表的简化版本如下所示：

```
In [17]: df2
Out[17]:
   Subject Number Genetic Group
0               1             A
1               2             C
2               3             A
3               4             B 
```

我想要结束的是：

```
In [19]: df1
Out[19]:
   SubID  Condition  Value Genetic Group
0      1          1  0.123             A
1      1          2  0.234             A
2      2          1  0.345             C
3      2          2  0.456             C
4      3          1  0.567             A
5      3          2  0.678             A
6      4          1  0.789             B 
```

我可以使用 for: 循环，但想知道是否有使用任何 Pandas DataFrame 合并或加入操作的方法可以避免这种情况？非常感谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T16:59:11.037

您可以按 SubID 进行索引，然后使用它`join`来获取您想要的内容：

```
df1.set_index("SubID", inplace=True)
df2.set_index("Subject Number", inplace=True)
df3 = df1.join(df2, how="left") 
```

或者，您可以`merge`在不使用索引的情况下完成：

```
df3 = df1.merge(df2, left_on="SubID", right_on="Subject Number", how="left") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T18:16:03.300

另一种方法是：

```
In [1]: import pandas as pd

In [2]: a = pd.DataFrame({"SubID":[1,1,2,2], "Condition":[1,2,1,2], "Value":[.123,.234,.345,.456]})

In [3]: a
Out[3]: 
   Condition  SubID  Value
0          1      1  0.123
1          2      1  0.234
2          1      2  0.345
3          2      2  0.456

In [4]: a = a.set_index(["SubID","Condition"]).unstack()

In [5]: b = pd.DataFrame({"Subject Number":[1,2], "Genetic Group":['A','C']})

In [6]: b
Out[6]: 
  Genetic Group  Subject Number
0             A               1
1             C               2

In [7]: b["Condition"] = "Genetic Group"

In [8]: b = b.rename(columns={"Genetic Group":"Value"})

In [9]: b = b.set_index(["Subject Number","Condition"]).unstack()

In [10]: b
Out[10]: 
                       Value
Condition      Genetic Group
Subject Number              
1                          A
2                          C

In [11]: r = a.merge(b, left_index=True, right_index=True)

In [12]: r
Out[12]: 
           Value                Value
Condition      1      2 Genetic Group
SubID                                
1          0.123  0.234             A
2          0.345  0.456             C

In [13]: r = r.unstack()

In [14]: r = r.swaplevel(0,2).sort_index()

In [15]: r
Out[15]: 
SubID  Condition           
1      1              Value    0.123
       2              Value    0.234
       Genetic Group  Value        A
2      1              Value    0.345
       2              Value    0.456
       Genetic Group  Value        C 
```

# iphone - 我可以在我的 iOS 应用程序中使用 3rd 方支付系统吗？

> ID：15226957
> 
> 赞同：1
> 
> 时间：2013-03-05T14:56:40.997
> 
> 标签：iphone, ios, in-app-purchase

我正在开发一个 iOS 应用程序，用户可以在其中就他们的主题向有影响力的人寻求建议。为了与这些人互动，您必须支付他们设定的价格。付款后，您就可以在私人聊天中与他们互动。

有一个名为 Healthtap 的应用程序，它的功能几乎相同，但与医生有关。

我想知道我们是否可以使用贝宝和条纹支付系统来代替苹果的。

有关更多信息，我正在使用 HTML5 构建它并使用 Phonegap 使其原生

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T15:00:38.120

付款时您“必须”使用苹果的系统会为应用程序添加更多内容，在我看来，这就是您正在尝试做的事情。

[来自 Apple 的应用内购买计划：](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/Introduction/Introduction.html)

> 如果您有兴趣从您的应用程序中为用户提供**额外的付费功能，您应该阅读此内容。**

当您不向应用程序添加新功能而是在现实世界中购买其他东西时，您可以使用其他付款方式。这就是亚马逊 Kindle 等应用停止通过其应用销售电子书的原因，因为他们不想与苹果分享利润。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-05T15:01:20.457

不，Apple 不允许在应用程序本身中显示任何第三方支付方式；这是 IAP 或什么都没有。

您可以做的是将第三方支付系统作为您网站的一部分，并让您的用户通过网站进行支付。然后，您将需要在应用程序中使用一些身份验证系统来验证用户的付款。

# javascript - 我对 vows.js 子主题的使用有什么问题？

> ID：15226959
> 
> 赞同：0
> 
> 时间：2013-03-05T14:56:43.487
> 
> 标签：javascript, node.js, bdd, vows

出于某种原因，我似乎无法让 vows.js 子主题在我的真实测试套件中工作，但它们在示例文件中工作正常......你能发现我的问题吗？

这有效：

```
vows.describe('An Education in Vows').addBatch({
    'when I write an asynchronous topic': {
        topic: function() {
            var that = this;
            setTimeout(function() {
                that.callback(true);
            }, 100);
        },
        'it passes': function (topic) {
            assert.equal(topic, true);
        },
        'and it has an asynchronous sub-topic': {
            topic: function() {
                var that = this;
                setTimeout(function() {
                    that.callback(true);
                }, 100);
            },
            'it also passes': function (topic) {
                assert.equal(topic, true);
            }
        }
    }
}).run(); 
```

当我通过以下方式运行时：

```
node tests/learning-vows.js 
```

我得到：

```
·
·
✓ OK » 2 honored (0.207s) 
```

这不起作用：

我有一个文件 ./tests/smoke.js

```
vows.describe('Registration & Authentication').addBatch({
    'when a user registers with a valid username and password': {
        topic: function () {
            client.register({
                username: validusername,
                password: validpassword
            }, this.callback);
        },
        'we return status 200 OK': function (data, response) {
            assert.equal(200, response.statusCode);
        },
        'simple sub-topic': {
            topic: true,
            'should work': function(topic) {
                assert.equal(true, topic);
            }
        },
    }
}).run() 
```

当我通过以下方式执行此操作时：

```
node tests/smoke.js 
```

我得到：

```
·
✗ Errored » 1 honored ∙ 1 errored 
```

请注意，在第二个示例中，没有我得到的子主题：

```
·
✓ OK » 1 honored (0.100s) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-11T22:58:16.507

Vows 使用节点的回调约定（参见： http: [//nodemanual.org/latest/nodejs_dev_guide/working_with_callbacks.html](http://nodemanual.org/latest/nodejs_dev_guide/working_with_callbacks.html)），它假定回调的第一个参数是一个错误对象。

因此，当您`data`作为第一个参数发送时，您发誓在`client.register`. 它可以防止誓言评估子主题。子主题被标记为错误但断言成功并且当前主题被标记为已兑现。

从输出中猜到这一点确实不是一件容易的事。此外，誓言行为不一致，请尝试在第一次测试中替换`true`为`0`然后`'0'`作为回调参数，您将看到另外两个结果。

这是一个工作示例：

```
var vows = require('vows'), assert = require('assert');

var client = {
  register: function(obj,callback){
    callback(null, obj, {statusCode:200});
  }
};
vows.describe('Registration & Authentication').addBatch({
    'when a user registers with a valid username and password': {
        topic: function () {
            client.register({
                username: 'validusername',
                password: 'validpassword'
            }, this.callback);
        },
        'we return status 200 OK': function (err, data, response) {
            assert.equal(response.statusCode, 200);
        },
        'simple sub-topic': {
            topic: true,
            'should work': function(topic) {
                assert.equal(true, topic);
            }
        }
    }
}).export(module) 
```

# java - 如何从 Java 中的文件更新 JTextfield

> ID：15226960
> 
> 赞同：0
> 
> 时间：2013-03-05T14:56:44.357
> 
> 标签：java, swing, user-interface, file-io, jtextfield

我有一个程序可以查看单个记事本文件，其中包含类似于以下信息：

```
Cardiff : 3245658
Bristol : 4726485
Manchester : 4728945 
```

这些地点和数字来自一个自动系统，数字每 20 秒左右变化一次。我需要创建一个循环（我猜），这样当数字发生变化时，我的程序将回顾记事本文件并更新 JTextField 中的数字

如果这不清楚，请提出问题。

PS我已经创建了程序，以便它查看文件，获取所需信息并将其放在正确的位置，使用Arraylist，

我需要帮助的是如何在文件发生更改时自动更新代码，我需要在不使用任何类型的 Jbuttons 的情况下执行此操作，它只需要自己完成即可。

我的整个代码

```
package window;

import java.awt.Color;
import java.awt.EventQueue;
import java.io.BufferedReader;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;
import java.util.ArrayList;
import java.util.concurrent.Executors;
import java.util.concurrent.ScheduledExecutorService;

import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JTextField;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class MapTest {

    private JFrame frame;
    private JTextField txtCardiff;
    private JTextField txtBristol;
    private JTextField txtSheffield;
    private JTextField txtDerby;
    private JTextField txtGlasgow;
    private JTextField txtFalkirk;
    private JTextField txtNewcastle;
    private JTextField txtLeeds;
    private JTextField txtPreston;
    private JTextField txtManchester;
    private JTextField txtWolverhampton;
    private JTextField txtBirmingham;
    private JTextField txtMiltonKeynes;
    private JTextField txtPeterborough;
    private JTextField txtColindale;
    private JTextField txtStepneyGreen;
    private JTextField txtSlough;
    private JTextField txtFaraday;
    private JTextField txtGuildford;
    private JTextField txtSouthbank;
    BufferedReader CSVFile = new BufferedReader(new FileReader(Filepath);
    ArrayList<String> csv = new ArrayList<String>();

    private final ScheduledExecutorService scheduler =
               Executors.newScheduledThreadPool(1);

    /** * Launch the application. */
    public static void main(String[] args) {
         try {
                UIManager.setLookAndFeel(
                            UIManager.getSystemLookAndFeelClassName());

            } catch (ClassNotFoundException e1) {
                e1.printStackTrace();

            } catch (InstantiationException e1) {
                e1.printStackTrace();

            } catch (IllegalAccessException e1) {
                e1.printStackTrace();

            } catch (UnsupportedLookAndFeelException e1) {
                e1.printStackTrace();
            }
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                try {
                    MapTest window = new MapTest();
                    window.frame.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });

    }

    /**
     * Create the application.
     * 
     * @throws IOException
     */
    public MapTest() throws IOException {
        try {
            initialize();
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        }
    }

    /**
     * Initialise the contents of the frame.
     * 
     * @param output
     * @throws IOException
     */

    private void initialize() throws IOException {

                csv.add(CSVFile.readLine());
                csv.add(CSVFile.readLine());
                csv.add(CSVFile.readLine());
                csv.add(CSVFile.readLine());
                csv.add(CSVFile.readLine());
                csv.add(CSVFile.readLine());
                csv.add(CSVFile.readLine());
                csv.add(CSVFile.readLine());
                csv.add(CSVFile.readLine());
                csv.add(CSVFile.readLine());
                csv.add(CSVFile.readLine());
                csv.add(CSVFile.readLine());
                csv.add(CSVFile.readLine());
                csv.add(CSVFile.readLine());
                csv.add(CSVFile.readLine());
                csv.add(CSVFile.readLine());
                csv.add(CSVFile.readLine());
                csv.add(CSVFile.readLine());
                csv.add(CSVFile.readLine());
                csv.add(CSVFile.readLine());

                System.out.println(csv.get(0));
                System.out.println(csv.get(1));
                System.out.println(csv.get(2));
                System.out.println(csv.get(3));
                System.out.println(csv.get(4));
                System.out.println(csv.get(5));
                System.out.println(csv.get(6));
                System.out.println(csv.get(7));
                System.out.println(csv.get(8));
                System.out.println(csv.get(9));
                System.out.println(csv.get(10));
                System.out.println(csv.get(11));
                System.out.println(csv.get(12));
                System.out.println(csv.get(13));
                System.out.println(csv.get(14));
                System.out.println(csv.get(15));
                System.out.println(csv.get(16));
                System.out.println(csv.get(17));
                System.out.println(csv.get(18));
                System.out.println(csv.get(19));
                // above system.out's are to check to see if it was reading the right line

        frame = new JFrame();
        frame.setBounds(0, 0, 1000, 1086);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.getContentPane().setLayout(null);
        frame.setBackground(Color.CYAN);

        txtCardiff = new JTextField();
        txtCardiff.setText(csv.get(0));
        txtCardiff.setBackground(Color.GREEN);
        txtCardiff.setBounds(305, 699, 102, 20);
        frame.getContentPane().add(txtCardiff);
        txtCardiff.setColumns(10);

        txtBristol = new JTextField();
        txtBristol.setText(csv.get(1));
        txtBristol.setBackground(Color.GREEN);
        txtBristol.setBounds(416, 780, 102, 20);
        frame.getContentPane().add(txtBristol);
        txtBristol.setColumns(10);

        txtSheffield = new JTextField();
        txtSheffield.setText(csv.get(2));
        txtSheffield.setBackground(Color.GREEN);
        txtSheffield.setBounds(517, 356, 110, 20);
        frame.getContentPane().add(txtSheffield);
        txtSheffield.setColumns(10);

        txtDerby = new JTextField();
        txtDerby.setText(csv.get(3));
        txtDerby.setBackground(Color.GREEN);
        txtDerby.setBounds(582, 451, 90, 20);
        frame.getContentPane().add(txtDerby);
        txtDerby.setColumns(10);

        txtGlasgow = new JTextField();// makes the textfield
        txtGlasgow.setText(csv.get(4)); 
        txtGlasgow.setBackground(Color.GREEN); 
        txtGlasgow.setBounds(250, 94, 102, 20);
        frame.getContentPane().add(txtGlasgow);
        txtGlasgow.setColumns(10);

        txtFalkirk = new JTextField();
        txtFalkirk.setText(csv.get(5));
        txtFalkirk.setColumns(10);
        txtFalkirk.setBackground(Color.GREEN);
        txtFalkirk.setBounds(331, 41, 102, 20);
        frame.getContentPane().add(txtFalkirk);

        txtNewcastle = new JTextField();
        txtNewcastle.setText(csv.get(6));
        txtNewcastle.setColumns(10);
        txtNewcastle.setBackground(Color.GREEN);
        txtNewcastle.setBounds(424, 141, 111, 20);
        frame.getContentPane().add(txtNewcastle);

        txtLeeds = new JTextField();
        txtLeeds.setText(csv.get(7));
        txtLeeds.setColumns(10);
        txtLeeds.setBackground(Color.GREEN);
        txtLeeds.setBounds(481, 244, 102, 20);
        frame.getContentPane().add(txtLeeds);

        txtPreston = new JTextField();
        txtPreston.setText(csv.get(8));
        txtPreston.setColumns(10);
        txtPreston.setBackground(Color.GREEN);
        txtPreston.setBounds(356, 221, 102, 20);
        frame.getContentPane().add(txtPreston);

        txtManchester = new JTextField();
        txtManchester.setText(csv.get(9));
        txtManchester.setColumns(10);
        txtManchester.setBackground(Color.GREEN);
        txtManchester.setBounds(394, 394, 124, 20);
        frame.getContentPane().add(txtManchester);

        txtWolverhampton = new JTextField();
        txtWolverhampton.setText(csv.get(10));
        txtWolverhampton.setColumns(10);
        txtWolverhampton.setBackground(Color.GREEN);
        txtWolverhampton.setBounds(360, 486, 153, 20);
        frame.getContentPane().add(txtWolverhampton);

        txtBirmingham = new JTextField();
        txtBirmingham.setText(csv.get(11));
        txtBirmingham.setColumns(10);
        txtBirmingham.setBackground(Color.GREEN);
        txtBirmingham.setBounds(424, 553, 128, 20);
        frame.getContentPane().add(txtBirmingham);

        txtMiltonKeynes = new JTextField();
        txtMiltonKeynes.setText(csv.get(12));
        txtMiltonKeynes.setColumns(10);
        txtMiltonKeynes.setBackground(Color.GREEN);
        txtMiltonKeynes.setBounds(474, 604, 135, 20);
        frame.getContentPane().add(txtMiltonKeynes);

        txtPeterborough = new JTextField();
        txtPeterborough.setText(csv.get(13));
        txtPeterborough.setColumns(10);
        txtPeterborough.setBackground(Color.GREEN);
        txtPeterborough.setBounds(655, 576, 135, 20);
        frame.getContentPane().add(txtPeterborough);

        txtColindale = new JTextField();
        txtColindale.setText(csv.get(14));
        txtColindale.setColumns(10);
        txtColindale.setBackground(Color.GREEN);
        txtColindale.setBounds(541, 699, 107, 20);
        frame.getContentPane().add(txtColindale);

        txtStepneyGreen = new JTextField();
        txtStepneyGreen.setText(csv.get(15));
        txtStepneyGreen.setColumns(10);
        txtStepneyGreen.setBackground(Color.GREEN);
        txtStepneyGreen.setBounds(667, 699, 137, 20);
        frame.getContentPane().add(txtStepneyGreen);

        txtSlough = new JTextField();
        txtSlough.setText(csv.get(16));
        txtSlough.setColumns(10);
        txtSlough.setBackground(Color.GREEN);
        txtSlough.setBounds(525, 756, 102, 20);
        frame.getContentPane().add(txtSlough);

        txtFaraday = new JTextField();
        txtFaraday.setText(csv.get(17));
        txtFaraday.setColumns(10);
        txtFaraday.setBackground(Color.GREEN);
        txtFaraday.setBounds(650, 756, 102, 20);
        frame.getContentPane().add(txtFaraday);

        txtGuildford = new JTextField();
        txtGuildford.setText(csv.get(18));
        txtGuildford.setColumns(10);
        txtGuildford.setBackground(Color.GREEN);
        txtGuildford.setBounds(525, 822, 102, 20);
        frame.getContentPane().add(txtGuildford);

        txtSouthbank = new JTextField();
        txtSouthbank.setText(csv.get(19));
        txtSouthbank.setColumns(10);
        txtSouthbank.setBackground(Color.GREEN);
        txtSouthbank.setBounds(655, 807, 115, 20);
        frame.getContentPane().add(txtSouthbank);

        JLabel lblNewLabel = new JLabel("New label");
        lblNewLabel.setForeground(Color.BLACK);
        lblNewLabel.setBackground(Color.BLACK);
        lblNewLabel
                .setIcon(new ImageIcon(
                        "FilePath
        lblNewLabel.setBounds(33, 11, 890, 1086);
        frame.getContentPane().add(lblNewLabel);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T20:03:16.317

这是一项简单的任务。我对 WatchService 一无所知，但这也可以使用`Timer`。创建一个`Timer`每 20 秒查找记事本的文件。您必须以编程方式检查数字是否已更改。

# java - java spring javax.inject.provider抛出类转换异常

> ID：15226963
> 
> 赞同：-1
> 
> 时间：2013-03-05T14:56:56.953
> 
> 标签：java, spring, jakarta-ee

我目前使用以下 javax 注入提供程序注释创建一个 spring bean：

```
@Autowired
Provider<Table> provider; 
```

在我调用的 init 方法之一中：

```
Table table = provider.get(); 
```

这会抛出：java.lang.ClassCastException: $Proxy127

该表配置为

```
@Component
@Scope(BeanDefinition.SCOPE_PROTOTYPE)
public class Table extends Furniture<
        Square,
        Round>  {

   ...............
   ...............

} 
```

父类是抽象的：

```
public abstract class Furniture<
    E extends Legs,
    M extends Corners>  {

    .............
    .............

} 
```

任何人都知道为什么我无法在初始化时创建实例？

我知道 spring 使用查找方法进行方法注入，但我真的不想使用 XML。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T15:10:53.090

提供者返回的 bean 似乎被代理了。尝试提取`Table`该类可以实现的接口，并使用 a`Provider<TableInterface>`代替。然后你可以得到一个像这样的实例：

```
TableInterface table = provider.get(); 
```

仍然会返回 a `Proxy`，但您不会`ClassCastException`在此分配中获得 the ，因为代理实现了`TableInterface`接口。

另一种可能性是使用 CGLIB 启用类代理，在这种情况下，您不需要提取接口。

# python - python迭代器中的最后一个元素

> ID：15226967
> 
> 赞同：0
> 
> 时间：2013-03-05T14:57:09.363
> 
> 标签：python

我想遍历文件的行，并为每个行打印一些输出。除最后一行外，所有打印的行都应`,\n`在末尾有一个。

我的第一种方法是使用查找`hasNext()`方法，该方法不存在。我知道`StopIteration`引发了一个异常，但我不确定如何以 Pythonic 方式使用它来实现我想要的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T14:59:22.177

单独打印第一行，然后打印以 . 开头的其他行`",\n"`。

```
firstline = next(thefile)
print get_some_output(firstline)
for line in thefile:
    print ",\n" + get_some_output(line) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T16:39:14.087

这是一个迭代器的包装类，它*确实*为您提供了一个`hasNext`属性：

```
class IteratorEx(object):
    def __init__(self, it):
        self.it = iter(it)
        self.sentinel = object()
        self.nextItem = next(self.it, self.sentinel)
        self.hasNext = self.nextItem is not self.sentinel

    def next(self):
        ret, self.nextItem = self.nextItem, next(self.it, self.sentinel)
        self.hasNext = self.nextItem is not self.sentinel
        return ret

    def __iter__(self):
        while self.hasNext:
            yield self.next() 
```

演示：

```
iterex = IteratorEx(xrange(10)) 
for i in iterex:
    print i, iterex.hasNext 
```

印刷：

```
0 True
1 True
2 True
3 True
4 True
5 True
6 True
7 True
8 True
9 False 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T15:25:32.733

您大概想先剥离现有的换行符。然后您可以遍历剥离的行，获取输出，并使用“，\n”将结果连接在一起，如下所示：

```
f = open('YOUR_FILE', 'r')
print ",\n".join([get_some_output(line.rstrip("\n")) for line in f]) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T16:36:08.380

与您的问题相关的答案出现在下面列出的几个帖子中。尽管其中一些问题的意图与当前问题有很大不同，但它们中的大多数都有如此丰富的答案，我还是在这里列出了它们。请注意，Pavel 的答案是对当前问题的更清洁的解决方案，而不是下面的答案，但一些较旧的答案更普遍适用。

• [Python：遍历列表中除最后一项以外的所有项目](https://stackoverflow.com/questions/914715)，
•[让 csv.reader 告诉它何时位于最后一行](https://stackoverflow.com/questions/970983)，
•[获取 python for 循环中的第一项和最后一项](https://stackoverflow.com/questions/989665)，
•[检测python'for'循环中的最后一个元素？](https://stackoverflow.com/questions/1630320)
• [Python 如何检查迭代器工具链中是否已到达最后一个元素](https://stackoverflow.com/questions/2058894)，
•[从python 迭代器获取最后一项的最简洁方法](https://stackoverflow.com/questions/2138873)，
•[如何在python 中以不同方式处理列表中的最后一个元素？](https://stackoverflow.com/questions/2429098),
• [Python：我如何知道我何时处于最后一个循环](https://stackoverflow.com/questions/3401350)，
•[忽略最后一个`\n`当将 readlines 与 python 一起使用时](https://stackoverflow.com/questions/4006441)，
• [For Loop 中的 Python Last Iteration](https://stackoverflow.com/questions/5231040)，
• [Python 3.x：测试生成器是否有剩余元素](https://stackoverflow.com/questions/8598473)

以上其中一项已列在当前问题的右侧边栏“相关”列表中，但其他未列出。“相关”侧边栏中的几个问题值得一看，并且可能已包含在上面的列表中。

# jquery - 如何结合每个然后

> ID：15226969
> 
> 赞同：2
> 
> 时间：2013-03-05T14:57:11.593
> 
> 标签：jquery, ajax, soap, locking

我正在尝试在内部发出肥皂请求，`.each()`但 jQuery 在第一个肥皂请求完成之前执行下一个对象（在列表中）。我怎样才能把它锁起来？

例如：

```
$(xmlHttpRequest.responseXML).find("Items").find("PowerPlant").each(function(index, item){      
    sendSOAPRequest(item);
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T15:25:30.360

我不是 100% 确定您使用的是什么库，但在某些`sendSOAPRequest`版本的某些调用中，您应该能够将`async`变量设置为 false，从而强制它们一次执行一个：

```
$(xmlHttpRequest.responseXML).find("Items").find("PowerPlant").each(function(index, item){      
    sendSOAPRequest(item, {async: false}); //Might be other syntax. Look at the doc for your library.
}); 
```

如果这不起作用，您可以按照 Brad M 的建议进行操作：

```
items = $(xmlHttpRequest.responseXML).find("Items").find("PowerPlant");           

function sendSoapReq(itemList){
    if(itemList.length > 0)
    {
        sendSOAPRequest(itemList.splice(0,1), function(){
            sendSoapReq(itemList);
        });
    }
}

sendSoapReq(items); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T14:58:55.350

您需要在soap 请求的完整回调函数中执行$.each 循环的下一次迭代。

# c# - 匿名类型出现在两个错误中

> ID：15226973
> 
> 赞同：10
> 
> 时间：2013-03-05T14:57:24.250
> 
> 标签：c#, asp.net, linq

我有一个填充`GridView`on的 linq 查询`Page_Load`。我`for`为字母表制作了一个字符循环。在填充 的 中`.Command`，我正在使用查询中的相同参数运行一个非常相似的查询，并得到以下错误。`LinkButton``LinkButton`

> '<>f__AnonymousType2' 类型存在于'ConcernContracts.dll' 和'System.Web.WebPages.Deployment.dll' 中

```
void lnkCharacter_Command(object sender, CommandEventArgs e)
{
    try
    {
        var lbtn = (LinkButton)lbl_Alphabet.FindControl("lnkCharacter" + e.CommandArgument);
        var id = lbtn.Text;

        using (var db = new dbDataContext())
        {
            var query = from n in db.tbl_Providers
                        where ((n.provider_Name.StartsWith(id)) && (n.provider_Deleted == false))
                        select new
                        {
                            n.ProviderId,
                            n.provider_Name
                        };

            grd_Provider.DataSource = null;
            grd_Provider.DataSource = query;
            grd_Provider.DataBind();
        }
    }
    catch (SystemException ex) { }
} 
```

LoadGrid() 是相同的，但它不使用`.StartsWith()`条件。你有任何想法如何解决这个错误？

该错误不会引发异常，但不会为任一查询填充网格。在以下行中发现了错误：`grd_Provider.DataSource = query;`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T10:54:04.507

更改网格数据源

```
grd_Provider.DataSource = query.ToList();
grd_Provider.DataBind(); 
```

或创建具有两个属性 Provider Id 和 Name 的列表，并像这样从输出中绑定该列表。

```
 List<Entities> abc=query.ToList();
 grd_Provider.DataSource =abc;
 grd_Provider.DataBind(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T22:30:58.887

这是一个建议：

您的两个类似查询可能与您在 LINQ 查询中选择的匿名类型重叠。在一个且只有一个查询中，将 select new 更改为如下所示：

```
select new
       {
         Id = n.ProviderId,
         Name = n.provider_Name
       }; 
```

如果您这样做，匿名类型不应再发生冲突，因为您不修改的类型将使用默认名称。

祝你好运，我希望这会有所帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T06:45:56.633

将其转换为`List`or `IEnumberable`，您不能将匿名对象作为**数据源**传递给 gridview。`query.ToList();`

您可以将返回类型转换为

```
IEnumerable<object> 
```

它可以保存任何匿名类型，并且很容易绑定为数据源

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-17T04:34:35.033

I had the same issue and I added another property to the anonymous type and that resolved it.

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-12-17T12:43:40.513

Linq does not support some functionality like .toDays(),.addDays(),.StartsWith() . So what you need to do is,First get the result without using .StartsWith() then try to apply some functionality to filter result StartsWith perticular id.

# android - Android 仅在消息到达时显示通知

> ID：15226977
> 
> 赞同：0
> 
> 时间：2013-03-05T14:57:35.280
> 
> 标签：android, notifications, google-cloud-messaging

在Android中，我实现了谷歌云通知，它会在任何消息到达时通知，但即使有消息它也会保留，安装应用程序后它会立即在通知栏中显示图标，有没有办法只在消息到达时显示通知和一旦用户点击它就隐藏它？？

这是我的代码：

```
 private static void generateNotification(Context context, String message) {
    int icon = R.drawable.ic_launcher;
    long when = System.currentTimeMillis();
    NotificationManager notificationManager = (NotificationManager)
            context.getSystemService(Context.NOTIFICATION_SERVICE);
    Notification notification = new Notification(icon, message, when);

    String title = context.getString(R.string.app_name);

    //Intent notificationIntent = new Intent(context, MainActivity.class);           //Open Activity
    // set intent so it does not start a new activity

    Intent notificationIntent = new Intent(Intent.ACTION_VIEW);

    notificationIntent.setData(Uri.parse("http://www.google.com"));                  //Open Link

    notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP |
            Intent.FLAG_ACTIVITY_SINGLE_TOP);
    PendingIntent intent =
            PendingIntent.getActivity(context, 0, notificationIntent, 0);
    notification.setLatestEventInfo(context, title, message, intent);
    notification.flags |= Notification.FLAG_AUTO_CANCEL;

    // Play default notification sound
    notification.defaults |= Notification.DEFAULT_SOUND;

    //notification.sound = Uri.parse("android.resource://" + context.getPackageName() + "your_sound_file_name.mp3");

    // Vibrate if vibrate is enabled
    notification.defaults |= Notification.DEFAULT_VIBRATE;
    notificationManager.notify(0, notification);      

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T15:18:27.237

如果没有看到您在哪里接收消息以及您想要在哪里生成和取消通知，那么很难辨别您需要做什么来实现这一点，但我会试一试。

如果您为[Android Connected App Engine 项目](https://developers.google.com/eclipse/docs/endpoints-androidconnected-gae)加载示例项目（通过 GCM），您会注意到 GCM 数据是在[GCMBaseIntentService](http://developer.android.com/reference/com/google/android/gcm/GCMBaseIntentService.html)中接收的。这个类有一个你可以重写的方法`onMessage()`，只要你收到 GCM 消息就会调用它。如果您在此方法中创建通知，那么您的应用程序只会在收到 GCM 消息时生成通知。

至于取消通知——你可以通过调用 NotificationManager 的`cancel()`方法来完成，传递你想要取消的通知的 ID。大概您有某种 Activity 向用户显示消息，这将是取消与特定消息相关的任何未完成通知的好地方。

# c++ - C++ lnk 错误 2019 由于接口导致的未解决的外部符号虚拟错误...（？）

> ID：15226986
> 
> 赞同：0
> 
> 时间：2013-03-05T14:58:13.957
> 
> 标签：c++, interface, virtual, lnk2019

我在制作一个好的界面并使用它时遇到问题......我的设置概述：

一个“接口” **GraphicsLibrary.H** ...

```
virtual void drawPoint(const Point& p, unsigned char r, unsigned char g, unsigned char b, double pointSize); 
```

使用“空”GraphicsLibrary.ccp！因为它是一个接口，所以“OpenGL”是一个图形库......所以我有一个**OpenGL.CPP**：

```
void GraphicsLibrary::drawPoint(const Point& p, unsigned char r, unsigned char g, unsigned char b, double pointSize)
{
    //some code
} 
```

它当然有一个“空”的OpenGL.h（因为他的头文件是GraphicsLibrary.h）

然后我有一个具有更具体功能的类，它使用 OpenGL，并使用这些基本绘图功能......（**OpenGLVis_Enviroment.cpp**）：

```
OpenGL ogl;
void drawObstacleUnderConstruction(Obstacle::Type type, const vector<Point>& points)
{
for( //etcetc )
        ogl.drawPoint(*it, 255, 255, 255, 3.0);
} 
```

但我也有一个使用一些 OpenGL 功能的主...所以**主**也有：

```
OpenGL openGL;
openGL.drawText(something); 
```

但现在我有很多这些错误（我对所有其他功能都一样）：

```
1>OpenGLVis_Environment.obj : error LNK2019: unresolved external symbol "public: virtual void __thiscall GraphicsLibrary::drawPoint(struct Point const &,unsigned char,unsigned char,unsigned char,double)" (?drawPoint@GraphicsLibrary@@UAEXABUPoint@@EEEN@Z) referenced in function "void __cdecl DrawingFunctions::drawObstacleUnderConstruction(enum Obstacle::Type,class std::vector<struct Point,class std::allocator<struct Point> > const &)" (?drawObstacleUnderConstruction@DrawingFunctions@@YAXW4Type@Obstacle@@ABV?$vector@UPoint@@V?$allocator@UPoint@@@std@@@std@@@Z) 
```

这是因为我使用“GraphicsLibrary::drawPoint ...”吗？我在网上搜索了很长时间，但是很难找到很多关于接口的例子......以及如何使用它们......在此先感谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T15:00:09.540

链接器抱怨`DrawingFunctions::drawObstacleUnderConstruction`并且您定义`void drawObstacleUnderConstruction`了 ，这是一个免费功能。

在定义函数时限定名称。

```
void DrawingFunctions::drawObstacleUnderConstruction(Obstacle::Type type, const vector<Point>& points)
{
    for( //etcetc )
        ogl.drawPoint(*it, 255, 255, 255, 3.0);
} 
```

# ios - 向导航栏添加更新元素，例如级别数和硬币总数？

> ID：15226987
> 
> 赞同：1
> 
> 时间：2013-03-05T14:58:14.470
> 
> 标签：ios, objective-c, uinavigationbar

我设法将导航栏更改为自定义拉伸图像并将后退按钮变成不同的颜色。我在导航栏中设置级别数和硬币总数时遇到问题。

我认为必须有任何更简单的方法，然后再搞乱 HUD 的进度等等——这就是我在研究中看到的所有内容。

我正在尝试实现与下面附加的类似的外观 - 元素明智而不是图形。

感谢您提前提供任何帮助。

![只是试图实现类似的水平和硬币总数](../Images/dc1f6a2a1767be6188dfe0daafe9ce52.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T15:31:20.727

两种解决方案：

1.  使用您自己的元素将整个导航栏变成自定义视图，然后根据需要更新它们。使用 的`titleView`属性执行此操作`UINavigationItem`。

2.  将`leftBarButtonItem`、`titleView`和`rightBarButtonItem`与您自己的自定义视图一起使用。

我更喜欢第二种方法，因为它更具可扩展性（视觉上）——即您的视图控制器将在横向模式、iPad 或奇怪大小的弹出框等中正确布局。左侧项目将与左侧对齐，右边和中间一个在中间。但是，它有点复杂，因为左右项需要是 type `UIBarButtonItem`。我们可以这样解决：

```
// Set up the red star thing in the middle with a number 6 on it
MyRedStarView* redStarView = [MyRedStarView redStarViewWithValue:6];
self.navigationItem.titleView = redStarView;

// Set up the 'word' button on the left
MyWordButton* wordButton = [MyWordButton defaultWordButton];
UIView* buttonHolderView = [[UIView alloc] initWithFrame:CGRectZero];
buttonHolderView.backgroundColor = [UIColor clearColor];
[buttonHolderView addSubview:wordButton];
buttonHolderView.frame = wordButton.frame;
self.navigationItem.leftBarButtonItem = [[UIBarButtonItem alloc] initWithCustomView:buttonHolderView];

// Set up the coin indicator on the right
MyCoinView* coinView = [MyCoinView coinViewWithValue:515];
self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithCustomView:coinView]; 
```

请注意我是如何将按钮（在 leftBarButtonItem 上）包装在持有人视图中的 - 只有当您想在按钮上进行某种视图转换时才需要这样做。例如，如果它在不同的上下文中发生变化，并且您希望通过从持有者视图中移除按钮并添加不同的按钮（带有视图转换）来为转换设置动画。在右栏按钮项上，我没有这样做，只是为了展示不同的方法。

当然，我使用了一些虚假的视图类型来演示——您实际上拥有对这些的自己的引用，以便您可以设置属性值并更新数字的显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T15:32:29.540

假设您已经有导航视图，请尝试以下代码

```
- (void)viewDidLoad
{
 // Custom Navigation Bar
    // -----------------------------------
    UIView *navigationCustomTitle = [[UIView alloc] initWithFrame:CGRectMake(0.0, 0.0, 200.0, 20.0)];
    navigationCustomTitle.backgroundColor = [UIColor clearColor];
    UIImageView *icon = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"icon.png"]];
    UILabel *titleCustomLabel = [[UILabel alloc] initWithFrame:CGRectMake(30.0, 0.0, 260.0, 20.0)];
    titleCustomLabel.text = @"A nice title";
    titleCustomLabel.textColor = [UIColor whiteColor];
    titleCustomLabel.backgroundColor = [UIColor clearColor];
    titleCustomLabel.font = [UIFont fontWithName:@"HelveticaNeue-CondensedBold" size:(16.0)];

    [navigationCustomTitle addSubview:titleCustomLabel];
    [navigationCustomTitle addSubview:icon];

    self.navigationItem.titleView = navigationCustomTitle;

} 
```

# xcode - 如何在 UILabel 中制作阴影

> ID：15226990
> 
> 赞同：-1
> 
> 时间：2013-03-05T14:58:28.513
> 
> 标签：xcode, uilabel

UILabel的影子"

我试过这段代码

label.shadowColor = [UIColor blackColor]; label.shadowOffset = CGSizeMake(1.0, 1.0);

但我无法得到阴影，我在互联网上搜索过，但没有一个很好的答案。 [http://tinyurl.com/au4exlo](http://tinyurl.com/au4exlo)，这是一个参考站点，每个单词下面都有一个阴影。

如果我错了，请更正我的代码。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T15:42:06.370

我认为这是两个单独的 UILabel 显示相同的值，但一个是倒置的。此外，底部的 UILabel 被半透明的 PNG 图像遮挡。

如果您不熟悉 Photoshop，这可能会让您了解我所说的半透明渐变是什么意思。[http://thepowerpointblog.com/media/blogs/all/10_Sept/Lance_8.jpg](http://thepowerpointblog.com/media/blogs/all/10_Sept/Lance_8.jpg)

# documentation - Doxygen：空详细说明

> ID：15226994
> 
> 赞同：4
> 
> 时间：2013-03-05T14:58:42.657
> 
> 标签：documentation, doxygen, rtf, documentation-generation

Context - C 代码上的 Doxygen 工具，用于生成 RTF 文档。

在模块/组的文档中，即使没有为某些特定模块/组提供详细描述，我们也会得到标题“详细描述”。

在生成的 RTF 文档中，这看起来很难看。是否有可能摆脱这个空的详细描述部分？

我试过`"ALWAYS_DETAILED_SEC = NO"`了，但它不工作。我不能这样做`"HIDE_UNDOC_MEMBERS = YES"`，因为组/模块包含已记录的成员（结构、函数 ...）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-22T21:02:12.457

即使实体（模块/组等）中没有文档，为什么也会生成“详细描述”的原因是因为 Doxyfile 标记**EXTRACT_ALL**设置为**YES**。

通过设置，

*   **EXTRACT_ALL** =**否**
*   **ALWAYS_DETAILED_SEC** =**否**

只有使用 Doxygen 特殊注释记录的实体才会被记录。只有那些具有@details -> 详细描述的实体才会在详细描述部分下列出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-30T16:48:46.437

这可能有点晚了，但是其他人可能会感兴趣（我曾经）。

您可以使用布局文件完全删除组详细描述，但如果您有简短描述，`More...`仍会创建一个链接（链接到任何内容）。我的解决方案是禁用组的简要说明，并将详细说明移到页面顶部（基本上是替换它）。

通过运行以下命令创建布局文件`dOxygen -l`。创建默认布局文件。我们感兴趣的部分是组，靠近底部：

```
<!-- Layout definition for a group page -->
  <group>
    <briefdescription visible="yes"/>
    <groupgraph visible="$GROUP_GRAPHS"/> 
```

现在设置`visible="yes"`为`visible="no"`在`briefdescription`现场。在文件底部附近，您会看到一个`<detaileddescription title=""/>`Move this to the top, above or below `briefdescription`。你现在应该有：

```
<!-- Layout definition for a group page -->
  <group>
    <briefdescription visible="no"/>
    <detaileddescription title="Description"/>
    <groupgraph visible="$GROUP_GRAPHS"/> 
```

请注意，我已通过填写标题字段将标题更改为“描述”。保存文件。现在在您的 Doxyfile 中，您需要指定一个自定义布局文件。添加以下行（或搜索并填写）： `LAYOUT_FILE=DoxygenLayout.xml`

假设您的路径是正确的等，您现在应该将带有简短描述的组页面替换为完整描述。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-28T17:44:19.667

不幸的是，如果该类已记录如下，则不会生成：

```
/// <summary>
/// This is..
/// </summary>
class ABC
{     
} 
```

删除“摘要”标签，即应该像

```
///
/// This is..
///
class ABC
{

} 
```

在以下链接中搜索详细说明（开头） [http://www.star.bnl.gov/public/comp/sofi/doxygen/docblocks.html](http://www.star.bnl.gov/public/comp/sofi/doxygen/docblocks.html)

# nsstring - 我们可以使用游戏中心在通过蓝牙连接的设备之间发送 NSString 值吗

> ID：15226997
> 
> 赞同：1
> 
> 时间：2013-03-05T14:59:00.243
> 
> 标签：nsstring, bluetooth, send

我们可以使用 Game Center 在通过蓝牙连接的设备之间发送 NSString 值吗？

这是我的代码的一部分：

```
typedef enum {
    messageType1 = 0;
    messageType2 = 1;
}
messageType;

typedef struct {
    MessageType messageType;
    NSString *myName;
} MyMessage; 
```

在我的课堂上，我有这种方法来发送消息：

```
 MyMessage myMessage;
 myMessage.messageType = messageType2;
 myMessage.myName = @"ABCDEFGH";
 NSData *data = [NSData dataWithBytes:&myMessage length:sizeof(MyMessage)];
 [self sendDataToAllPeers:data withDataMode:GKSendDataReliable error:error]; 
```

接收数据我有方法：

```
-(void) receiveData:(NSData *)data fromPeer:(NSString *)peer inSession: (GKSession *)session context:(void *)context{
    MyMessage myMessage = *((MyMessage *) [data bytes]);
    type = myMessage.messageType;
    name = myMessage.myName;
} 
```

**问题：**我怎样才能得到`myName`？（我能够得到`MessageType`）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T08:31:10.093

将 NSData 作为存档的 NSArray 发送：

```
NSArray *array = [[NSArray alloc] initWithObjects:myMessage.messageType, myMessage.myName, nil];
NSData *data = [NSKeyedArchiver archivedDataWithRootObject:array];
[self sendDataToAllPeers:data]; 
```

接收 NSData 并取消归档到 NSArray：

```
NSArray *array = [NSKeyedUnarchiver unarchiveObjectWithData: data];
type = [array objectAtIndex:0];
name = [array objectAtIndex:1]; 
```

# log4j2 - Log4j2 SMTP 附加程序

> ID：15226998
> 
> 赞同：1
> 
> 时间：2013-03-05T14:59:00.823
> 
> 标签：log4j2, smtpappender

我正在尝试使用 Log4j2 通过电子邮件记录错误。
为此，Log4j2 定义了 SMTPAppender，并提供了一个示例配置以在 XML 配置文件中使用，如下所示：

```
<appenders>
  <SMTP name="Mail" suppressExceptions="false" subject="Error Log" to="errors@logging.apache.org"
  from="test@logging.apache.org" smtpHost="localhost" smtpPort="25" bufferSize="50">
  </SMTP>
</appenders> 
```

所以一切都应该没问题。但是，当我启动应用程序并强制记录错误时，我收到此消息：

```
ERROR Error processing element SMTP: CLASS_NOT_FOUND 
```

好的，现在该怎么办？文档给出了提示，应该使用插件和包，两者的文档很少，也没有示例。

我得到了另一个提示：[运行 hibernate3:hbm2ddl 时的 ClassNotFoundException javax.mail.internet.AddressException](https://stackoverflow.com/questions/4569687/classnotfoundexception-javax-mail-internet-addressexception-when-running-hiberna)但这是 log4j2 而不是 log4j。

当然，非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T18:05:44.250

答案很简单。
阅读此[https://blogs.apache.org/logging/entry/apache_log4j_2_0_beta4](https://blogs.apache.org/logging/entry/apache_log4j_2_0_beta4)
后 ，我下载了 beta4（我有 beta3），现在我遇到了其他问题，但 appender 可以工作。