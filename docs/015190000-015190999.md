# StackOverflow 问答 15190000-15190999

# iphone - UITextView - 水平滚动？

> ID：15190000
> 
> 赞同：3
> 
> 时间：2013-03-03T19:43:24.757
> 
> 标签：iphone, ios, xcode, uitextview, horizontal-scrolling

如何创建**水平**滚动 UITextView？

当我以编程方式设置文本时，它会添加自动换行符，所以我只能垂直滚动......

```
 titleView.text = @"this is a very long text. this is a very long text. this is a very long text. this is a very long text. this is a very long text."; 
```

感谢您的回答。

编辑：到目前为止我试过这个：

```
 UIScrollview *yourScrollview = [[UIScrollView alloc] initWithFrame:CGRectMake(0 ,0 ,       self.view.frame.size.width, 50)];
CGFloat textLength = [titleView.text sizeWithFont:titleView.font constrainedToSize:CGSizeMake(9999, 50) lineBreakMode:NSLineBreakByWordWrapping].width;

yourScrollview.contentSize = CGSizeMake(textLength + 200, 500); //or some value you like, you may have to try this out a few times

titleView.frame = CGRectMake(titleView.frame.origin.x, titleView.frame.origin.y, textLength, titleView.frame.size.height);

[yourScrollview addSubview: titleView];

NSLog(@"%f", textLength); 
```

但我收到：“威胁 1：信号 SIGABRT”

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-03T19:59:36.423

我还没有做过这样的事情，但我会尝试以下步骤来完成这个：

1.  创建一个`UIScrollview *yourScrollview = [[UIScrollView alloc] initWithFrame:CGRectMake(0 ,0 , self.view.frame.size.width, 50)]; //`

2.  用于 `CGFloat textLength = [titleView.text sizeWithFont:titleView.font constrainedToSize:CGSizeMake(9999, 50) lineBreakMode:NSLineBreakByWordWrapping].width;` 获取文本的最终长度

3.  放`yourScrollView.contentSize = CGSizeMake(textLength + 20, 50); //or some value you like, you may have to try this out a few times`

4.  还设置`titleTextView.frame = CGRectMake(titleTextView.frame.origin.x, titleTextView.frame.origin.y, textLength, titleTextView.frame.size.height);`

5.  使 titleView 成为 yourScrollView 的子视图：`[yourScrollView addSubview: titleView];`

希望这能给你一个好的开始！

编辑：此代码将起作用：

请注意我使用 a`UILabel`而不是 a `UITextView`。

```
 UILabel *titleView          = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, 40)];
    titleView.text              = @"this is a very long text. this is a very long text. this is a very long text. this is a very long text. this is a very long text.";
    titleView.font              = [UIFont systemFontOfSize:18];
    titleView.backgroundColor   = [UIColor clearColor];
    titleView.numberOfLines     = 1;

    UIScrollView *myScrollView  = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, 50)];
    CGFloat textLength          = [titleView.text sizeWithFont:titleView.font constrainedToSize:CGSizeMake(9999, 50) lineBreakMode:NSLineBreakByWordWrapping].width;
    myScrollView.contentSize    = CGSizeMake(textLength + 20, 50); //or some value you like, you may have to try this out a few times

    titleView.frame             = CGRectMake(titleView.frame.origin.x, titleView.frame.origin.y, textLength, titleView.frame.size.height);

    [myScrollView addSubview: titleView];
    [self.view addSubview:myScrollView];
    [titleView release];
    [myScrollView release]; 
```

# javascript - swipe.js 未捕获的类型错误：对象# 没有“下一步”方法

> ID：15190002
> 
> 赞同：0
> 
> 时间：2013-03-03T19:43:30.177
> 
> 标签：javascript, jquery

当我尝试实现 swipe.js 时，我一直有这个错误

```
Uncaught TypeError: Object #<HTMLDivElement> has no method 'next' 
```

我正在通过 ajax 加载内容

jQuery：

```
 var container = $("#wrapper");

    url = this.href + " .span9";

    container.load(url, function(){
       var $galNav = $("<a href='#' onclick='slider.prev();return false;'>prev</a> <a href='#' onclick='slider.next();return false;'>next</a>");
       container.append($galNav);
       window.mySwipe = new Swipe(document.getElementById('slider'));
    }); 
```

我正在加载的 html：

```
<div id='slider'>
  <ul>
    <li style='display:block'>1</li>
    <li style='display:none'>2</li>
    <li style='display:none'>3</li>
    <li style='display:none'>4</li>
    <li style='display:none'>5</li>
  </ul>
</div> 
```

我关注[了 swipe.js](http://swipejs.com/)但我不明白为什么我有这个错误并且不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T19:51:21.243

`slider`是一个 DOM 元素，没有任何`next`功能。您可能需要参考滑动对象：

```
mySwipe.next(); 
```

# vba - 如何更正此 vba 代码？

> ID：15190010
> 
> 赞同：1
> 
> 时间：2013-03-03T19:44:20.723
> 
> 标签：vba, range

我还是 vba 的新手。

我正在尝试创建一个新函数，但是它不断给我一个我不期望的输出。

我的代码如下：

```
Function bonusplanA(a, b, c)

    Dim example As Range
    Set example = Range("a:c")

    Value = Application.WorksheetFunction.CountIf(example, ">=90")
    Value1 = Application.WorksheetFunction.CountIf(example, ">=80")

    If Value = 3 Then
      bonusplanA = "$20,000 bonus"
    Else
      If Value1 = 3 Then
      bonusplanA = "$10,000 bonus"
      Else
        bonusplanA = "NO BONUS"
      End If
    End If

End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T20:48:39.510

你需要像这样定义你的函数：

```
Function bonusplanA(a, b, c)

    If a >= 90 And b >= 90 And c >= 90 Then
        bonusplanA = "$20,000 bonus"
    Else
        If a >= 80 And b >= 80 And c >= 80 Then
            bonusplanA = "$10,000 bonus"
        Else
            bonusplanA = "NO BONUS"
        End If
    End If

End Function 
```

您的示例中的问题是，`Range("a:c")`它没有使您的`a,b,c`变量范围；相反，它选择由 A、B 和 C 列组成的范围。

您需要直接使用参数`a`，`b`而`c`不是通过`Range`函数。

否则，逻辑是合理的。:)

# javascript - 增强对象类

> ID：15190012
> 
> 赞同：0
> 
> 时间：2013-03-03T19:44:35.423
> 
> 标签：javascript, prototype

我在胡闹，想像这样在 Object 类中添加一个方法：

```
Object.prototype.is = function(operand) {
  return this === operand;
};

10.is(10); // returns false 
```

我对结果有点恼火，有人能提供一些见解吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-03T19:46:19.360

在 JavaScript 中，数字原语不是`Number`. 当编译器看到`10.is`它包装`10`在一个`Number`对象中时（因为只有对象可以具有属性）。该对象不等于参数`10`，因为`===`抑制了自动类型转换。

PS您需要类似的东西`(10).is(10)`才能使您的代码成为合法的语法。

# visual-studio-2010 - 从 PDB 文件中提取二进制名称

> ID：15190016
> 
> 赞同：0
> 
> 时间：2013-03-03T19:45:12.640
> 
> 标签：visual-studio-2010, debugging, windbg, pdb

我正在做一个项目，我需要从 pdb（程序数据库信息）文件中提取二进制名称信息。早些时候我认为我将能够做到这一点：

```
hr = CoCreateInstance(__uuidof(DiaSource),
                        NULL,
                        CLSCTX_INPROC_SERVER,
                        __uuidof(IDiaDataSource),
                        (void **) ppSource);
hr = (*ppSource)->openSession(ppSession);

  hr = (*ppSession)->get_globalScope(ppGlobal);

  BSTR name;
  (*ppGlobal)->get_name(&name); 
```

这是没有错误处理的片段，我刚刚意识到这只会产生有关 pdb 文件名而不是二进制名称的信息。谁能建议任何方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T21:51:20.147

我不一定希望二进制文件的名称出现在 PDB 中，所以我不确定你是否会走运。

# javascript - NodeJs - FTP 不工作：“未提供 npm-shrinkwrap.json”

> ID：15190020
> 
> 赞同：1
> 
> 时间：2013-03-03T19:45:34.310
> 
> 标签：javascript, node.js, ftp

[我在AppFog](http://www.appfog.com/)上有一个 Nodejs 应用程序，想用[这个](https://github.com/mscdex/node-ftp)连接到 ftp 服务器。
我确实`npm install ftp`使用“Ruby 命令提示符”安装了它

这是唯一的代码行：

`var FTPClient = require('ftp');`

尝试启动应用程序时，它会引发错误：

`Skipping npm-support: npm-shrinkwrap.json is not provided`

我应该使用哪种服务器或有什么问题？

仍然没有开始：

```
Starting Application 'test007': .
Error: Application [test007] failed to start, logs information below.
====> /logs/staging.log <====

# Logfile created on 2013-03-09 10:37:09 +0000 by logger.rb/25413
Installing dependencies. Node version 0.8.14
Installing ftp@0.2.9 from local path
Installing xregexp@2.0.0 from local path
Installing node@0.0.0 from local path
Installing nodejs@0.0.1 from local path 
```

但没有显示错误。

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T18:19:45.980

快速解决方法是键入`npm shrinkwrap`，这将提供一个 npm-shrinkwrap 文件。

收缩包装文件修复了您的依赖项的确切版本，以及它们的依赖项的确切版本，等等。没有它，每次使用都`npm install`可以安装不同版本的软件包——有时，只是不同的错误修复版本（1.4.2 vs 1.4.3），但有时差异更大。无法保证您的代码可以与不同的依赖版本一起使用（事实上，中断并不少见），因此收缩包装对于任何生产级代码都是一个好主意。

如果你想'unshrinkwrap'，只需删除`npm-shrinkwrap.json`. 您可以随时重新收缩包装。

# asp.net-mvc - 实体框架如何与 ASP.NET MVC 中的 lambda 配合使用

> ID：15190021
> 
> 赞同：0
> 
> 时间：2013-03-03T19:45:35.417
> 
> 标签：asp.net-mvc, entity-framework, lambda

我正在浏览来自 www.ASP.net 网站的 Mvc 音乐商店教程。

我无法理解 Entity Framework 如何创建表以及这些 lambda 表达式是如何工作的。我确实了解 EF 和 Lambda 的基础知识，并且我已经完成了本系列之前的教程。

我的问题与教程的第 4 部分有关：[第 4 部分：模型和数据访问模型](http://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-4) 中有三个类：艺术家、流派和专辑，如下所示。

```
public class Artist
{
    public int ArtistId { get; set; }
    public string Name { get; set; }
}
public partial class Genre
{
    public int      GenreId     { get; set; }
    public string   Name        { get; set; }
    public string   Description { get; set; }
    public List<Album> Albums   { get; set; }
}
public class Album
{
    public int      AlbumId     { get; set;}
    public int      GenreId     { get; set; }
    public int      ArtistId    { get; set; }
    public string   Title       { get; set; }
    public decimal  Price       { get; set; }
    public string   AlbumArtUrl { get; set; }
    public Genre    Genre       { get; set; }
    public Artist   Artist      { get; set; }
} 
```

但是，我只看到 EF 创建的每个表的以下列。

艺术家表：`ArtistId, Name`

流派表：`GenreId, Name, Description`

专辑表：`AlbumId, GenreId, ArtistId, Title, Price, AlbumArtUrl`

## 混乱一

Artist 表很好，但 Genre 表与类定义无关**`List<Album> Albums`**。在专辑表中`public Genre Genre`并且`public Artist Artist`丢失。

下面是在 SampleData.cs 文件中将默认数据添加到数据库的语句

```
new Album 
{ 
    Title = "A Copland Celebration, Vol. I", 
    Genre = genres.Single(g => g.Name == "Classical"), 
    Price = 8.99M, 
    Artist = artists
        .Single(a => a.Name == "Aaron Copland & London Symphony Orchestra"), 
    AlbumArtUrl = "/Content/Images/placeholder.gif" 
} 
```

**问题**

**现在数据库表中没有任何名称为 Genre 和 Artist 的字段？？GenreId 和 ArtistId 未插入，但数据库中的专辑表填充了这些值。？？？**

## 混淆二

在 StoreController 的 Browse 动作方法中，

```
// Retrieve Genre and its Associated Albums from database
var genreModel = storeDB.Genres.Include("Albums").Single(g => g.Name == genre); 
```

我不知道 include 在这里是如何工作的。Genres 模型类中有 List of Albums 字段，但在数据库中没有。我猜想 include() 可能会在那里保存专辑列表。

**问题**

**但我不明白为什么 Include 方法有“Albums”参数？有两个专辑列表，一个在 Genre 模型类中，另一个在派生自`DbContext`EF 的类中。此语句将如何仅返回具有匹配流派的专辑？**

任何帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T19:57:22.847

> Artist 表很好，但 Genre 表没有关于类定义中的 List Albums 的信息。在专辑表中，公共类型流派和公共艺术家艺术家缺失。
> 
> 现在数据库表中没有任何名称为 Genre 和 Artist 的字段？？GenreId 和 ArtistId 未插入，但数据库中的专辑表填充了这些值。

您不必直接访问外键属性（ArtistID 和 GenreID），因为它们是通过 EF 导航属性为您处理的。您所要做的就是设置艺术家和/或流派，而 EF 会为您处理其余的事情。

和属性是导航属性`Genre`。`Artist`它们实际上并未存储在数据库中，它是您访问相关流派实体和相关`Artist`实体的一种方式`Album`，或者访问与您的流派相关的所有专辑的一种方式。

例如，当您访问实体`Artist`上的属性时`Album`- EF 所做的是它将`Artist`在您的专辑中列出 ArtistID 的表中为您提供信息。

例如 - 你有一个 AlbumA - 它有一个 GenreA 和一个 ArtistA。它不是将所有信息存储在一个表中，而是将信息分解为单独的表，以便更好地存储和重用。现在您已经在代码中获取了 AlbumA - 但您想访问关联的 GenreA 的名称。你会使用：

```
AlbumA.Genre.Name 
```

这将转到您的专辑表 - 获取 GenreId，然后转到您的流派表，并返回带有该 ID 的流派，然后给您 name 属性。这省去了您必须为已有的专辑编写通过 id 获取流派的函数的麻烦，从而为您提供更易于阅读的代码。

> 但我不明白为什么 Include 方法有“Albums”参数？有两个专辑列表，一个在 Genre 模型类中，另一个在从 DbContext for EF 派生的类中。此语句将如何仅返回具有匹配流派的专辑？

[Include](http://msdn.microsoft.com/en-us/library/bb738708.aspx)函数的作用是急切地加载您的实体。有关这方面的好信息，请参阅[此博客文章。](http://blogs.msdn.com/b/adonet/archive/2011/01/31/using-dbcontext-in-ef-feature-ctp5-part-6-loading-related-entities.aspx)

当您加载流派对象时，它只加载流派表上的信息。当您想要访问关联的专辑时 - EF 必须进行**额外的**数据库调用。有时出于性能原因这确实很糟糕，因此 include 允许您进行连接，并在一次调用中检索所有关联的数据，而不是多次访问数据库。

关于什么是导航属性以及它们如何工作的一些额外资源：

1.  [什么是导航属性](http://msdn.microsoft.com/en-us/library/vstudio/bb738520%28v=vs.100%29.aspx)
2.  [导航属性入门](http://msdn.microsoft.com/en-us/data/jj713564.aspx)

# r - 警告消息行号 R

> ID：15190022
> 
> 赞同：9
> 
> 时间：2013-03-03T19:45:40.283
> 
> 标签：r

我有一个大的 for 循环，循环了数百次，最后它会产生这个警告：

```
Warning messages:
1: In min(j, na.rm = TRUE) :
  no non-missing arguments to min; returning Inf 
```

有什么办法可以问 R 警告消息是在哪一行生成的？

* * *

OP 在下面的评论：“我没有直接将 min 作为一行。它可能嵌套在其他函数中，否则我不会问这个问题，因为我知道这是一个来自 min 的问题。”

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-03T19:50:08.590

您可以尝试设置：

```
options(warn = 2) 
```

...将警告视为错误。然后，当您的代码在第一个警告处停止时，使用[`traceback()`](http://stat.ethz.ch/R-manual/R-devel/library/base/html/traceback.html)查看堆栈跟踪。

不过，这只会帮助您处理第一个警告。

要返回默认行为，请使用：

```
options(warn = 0) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T20:07:37.413

这是一个基本的`for`循环方法，并不真正`R`依赖

就在你`min`放线之前

```
 print(paste("j is", j, "\n"))  # or instead of j, use i, or whichever index you are using     
 min(j, na.rm = TRUE) 
```

那么您将对错误所在的位置有一个很好的了解。

* * *

至于更`R`相关的解决方案，如果 j 来自 data.frame、matrix、list 等，
您想找到哪个块（迭代部分）只有`NA`s。

为此，您可以使用类似的东西

```
 apply(myDF, 1, function(x) all(is.na(x))) 
```

# matlab - Matlab：如何在一个图形中显示多个图，并具有像滚动这样的导航？

> ID：15190023
> 
> 赞同：2
> 
> 时间：2013-03-03T19:45:40.247
> 
> 标签：matlab, matrix, plot, histogram

我有一个大矩阵，我比较每一列的依赖关系。（70 x 70 矩阵）我想显示所有相关图，以便能够直观地解释数据。但似乎 matlab 为我提供了一个包含许多单行的图形，我无法清楚地查看它们。有没有像滚动到一个图形这样的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T21:23:54.340

我相信向文件交换提交的[Scroll SubPlot](http://www.mathworks.com/matlabcentral/fileexchange/7730)是您正在寻找的。

# visual-studio-2012 - Installshield LE Visual Studio 2012 先决条件

> ID：15190024
> 
> 赞同：1
> 
> 时间：2013-03-03T19:45:42.170
> 
> 标签：visual-studio-2012, prerequisites, installshield-le

尝试在 Visual Studio 2012 中使用 InstallShield LE 项目构建部署包时，我们如何指定先决条件。我看到了项目助手的“要求”部分，但这似乎只为安装程序提供了继续安装的功能，或者不根据是否存在某些先决条件。作为安装的一部分，它似乎没有实际安装任何先决条件的功能。作为我的安装包的一部分，我希望安装 IIS 7.5 Express 和 SQL Server Compact 3.5 SP2。

使用 Visual Studio 2010 安装项目时，我们能够实际安装先决条件作为安装包的一部分。

在 InstallShield 的产品页面上，它说 LE 版本确实支持：

“安装先决条件 在执行安装之前检查并安装先决条件。”

我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T02:31:15.873

查看 (2) 指定应用程序数据 | 可再发行产品。您会发现大量的设置先决条件列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-06T16:34:22.833

[http://community.flexerasoftware.com/showthread.php?200816-Installing-IIS-as-a-Prerequisite-on-x64-OSs](http://community.flexerasoftware.com/showthread.php?200816-Installing-IIS-as-a-Prerequisite-on-x64-OSs)有一种方法用于设置安装 WAM 的新先决条件文件 (.PRQ)和 IIS。我将代码放在这里以供后代使用：

## PRQ 文件

```
<?xml version="1.0" encoding="UTF-8"?>
<SetupPrereq>
    <operatingsystemconditions>
        <operatingsystemcondition MajorVersion="6" MinorVersion="1" PlatformId="2" CSDVersion="" Bits="4" ProductType="1"></operatingsystemcondition>
        <operatingsystemcondition MajorVersion="6" MinorVersion="0" PlatformId="2" CSDVersion="" Bits="4" ProductType="2|3"></operatingsystemcondition>
        <operatingsystemcondition MajorVersion="6" MinorVersion="1" PlatformId="2" CSDVersion="" Bits="4" ProductType="2|3"></operatingsystemcondition>
    </operatingsystemconditions>
    <files>
        <file LocalFile=".\Microsoft IIS\InstallWASandIIS.bat" CheckSum="3205F5B453D8E5FA8795280455BC6B97" FileSize="0,1983"></file>
    </files>
    <execute file="InstallWASandIIS.bat" returncodetoreboot="-1"></execute>
    <properties Id="{9724DBFD-9103-404F-BD53-6B29358C85EF}" Description="This prerequisite installs Windows Process Activation Services (WAS) and Microsoft Internet Information Services (IIS) on Windows 7 x64, Windows Server 2008 x64 and Windows Server 2008 R2 x64 operating systems for MET/TEAM."></properties>
    <behavior Reboot="32"></behavior>
</SetupPrereq> 
```

## 英美烟草文件

> @echo 关闭 cls
> 
> @回声。@echo Windows Process Activation Services (WAS) 和 Microsoft Internet Information @echo Services (IIS) 必须安装在此计算机上，它才能托管
> @echo MET/TEAM 网站。如果这台计算机上已经安装了 WAS 和 IIS，
> @echo 这个过程只是确保安装了所有必要的组件。@回声。@回声。@echo 安装 Windows 进程激活服务 - 请等待启动 /w %WINDIR%\sysnative\pkgmgr /l:%TEMP%\InstallWAS.log /iu:IIS-WebServerRole;WAS-WindowsActivationService;WAS-ProcessModel;WAS-NetFxEnvironment;WAS -配置API；
> 
> if NOT ERRORLEVEL 0 (@echo.
> @echo 安装 Windows Process Activation Services 时发生错误 - ERRORLEVEL% @echo 请参阅日志文件 %TEMP%\InstallWAS.log
> @echo 了解更多信息。@echo.pause EXIT)
> 
> @回声。@echo 安装 Microsoft Internet 信息服务 - 请稍候... start /w %WINDIR%\sysnative\pkgmgr /l:%TEMP%\InstallIIS.log /iu:IIS-WebServerRole;IIS-WebServer;IIS-CommonHttpFeatures;IIS-静态内容；IIS-DefaultDocument；IIS-DirectoryBrowsing；IIS-HttpErrors；IIS-HttpRedirect；IIS-ApplicationDevelopment；IIS-ASPNET；IIS-NetFxExtensibility；IIS-ISAPIExtensions；IIS-ISAPIFilter；IIS-HealthAndDiagnostics；IIS-HttpLogging；IIS-RequestMonitor； IIS-HttpTracing;IIS-CustomLogging;IIS-Security;IIS-BasicAuthentication;IIS-WindowsAuthentication;IIS-URLAuthorization;IIS-RequestFiltering;IIS-Performance;IIS-HttpCompressionStatic;IIS-WebServerManagementTools;IIS-ManagementConsole;IIS-ManagementScriptingTools;WAS- WindowsActivationService；WAS-ProcessModel；WAS-NetFxEnvironment；WAS-ConfigurationAPI；如果不是 ERRORLEVEL 0 (@echo.
> @echo 安装 Microsoft Internet 信息服务时出错 - %ERRORLEVEL% @echo
> 有关详细信息，请参阅日志文件 %TEMP%\InstallIIS.log @echo。@回声。暂停退出）
> 
> @回声。
> @echo 安装成功！@回声。出口

谢谢你，ACordner，无论你现在在哪里 :-)

# c - C：将年/月...转换为字符串（字符数组）？

> ID：15190029
> 
> 赞同：0
> 
> 时间：2013-03-03T19:46:09.020
> 
> 标签：c

在 gcc 的 C 编程语言中（在 linux 和 windows xp 下），我有一个函数可以输出一些信息。

```
pdter( 1 ) gives 2013 (integer)
pdter( 2 ) gives 3 (for march) (integer)
pdter(3) gives 3 for day (integer)
pdter 4 for hours, 5 for min, and 6 for seconds 
```

我有一个 char 数组，它是：

```
char newfilename[PATH_MAX]; 
```

我想最终有一个 char 数组，它将是：

```
newfilename of content (array) (date and time) : "20130303204301-image.bmp" 
(format yyyymmddhhmmss-imagename.ext) 
```

经过多次搜索，我没有精力了。你能帮忙吗？

太好了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T05:19:20.767

尝试

```
char newfilename[PATH_MAX];
char *imagename = TBD;
#define MAXINTLENGTH (11 /* TBD -2147483648 */) 
// Insure our sprintf does not overrun
if (6*MAXINTLENGTH + 1 + strlen(imagename) + 1) > PATH_MAX]) {
  handle potential error;
}
int t[6];
int seconds;
// Try once or twice to get all time elements and insure the second has not changed whilst doing so
for (int attempt = 1; attempt < 2; attempt++) {
  seconds = pdter(6);
  for (int i=0; i<6; i++) t[i-1] = pdter(i+1);
  // If we read all time elements and the second did not change, break;
  if (seconds == t[5]) break;
  // Try again
}
sprintf(newfilename, "%04d%02d%02d%02d%02d%02d-%s", t[0], t[1], t[2], t[3], t[4], t[5], imagename);
// We are done 
```

# mysql - SQL 返回值 - 怎么做？

> ID：15190032
> 
> 赞同：0
> 
> 时间：2013-03-03T19:46:14.440
> 
> 标签：mysql, sql, return-value, black-box

我们都知道，在编程语言中，返回值是最基本的东西。但是对于数据库，我们只是不期望任何返回值。这是一个错误的概念，因为它将我们的数据库简化为一个黑匣子。有时知道哪些行受更新影响可能会很好。

那么我们如何构建在插入或更新后返回值的数据库呢？（不是在选择之后，因为它本身总是返回一个值）

你能给我一些例如 MySQL 的示例代码，比如一个包含更新行的主键的列表吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T19:57:27.417

您可能想阅读这个[相关的 SO 主题](https://stackoverflow.com/questions/15034136/select-updated-rows-in-mysql/15034351#15034351)（我已链接到[@Erwin Brandstetter](https://stackoverflow.com/users/939860/erwin-brandstetter)的答案），在此引用：

> 在*PostgreSQL*中，您可以使用该[`RETURNING`子句](http://www.postgresql.org/docs/current/interactive/sql-update.html)。
> *Oracle*也有一个[`RETURNING`子句](http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_10008.htm#i2126358)。
> *SQL-Server*有一个[`OUTPUT`子句](http://msdn.microsoft.com/en-us/library/ms177564.aspx)。
> 但是 MySQL 没有这样的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T19:56:32.843

一个好方法是在事务中更新之前选择值：[https](https://stackoverflow.com/a/10663439/2115135) ://stackoverflow.com/a/10663439/2115135 请记住，更新仍然可能失败，因此在使用返回值之前要考虑它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T19:57:38.137

根据使用的执行方法，您通常可以获得受在 my sql 数据库上执行的任何写入操作影响的行数。有多种方法，您可以显式地以批处理的形式执行语句

```
SELECT ROW_COUNT() 
```

最后或者您可以使用连接库提供的功能来获取最后一组中受影响的行数

例如：在 PHP 中，您可以使用

```
mysqli::$affected_rows 
```

获取受影响的行。

编辑：有没有什么特别的场景，你想要更多的例子吗？

更新：回答问题的第二部分。

好吧，你绝对不可能在我知道的同一条语句中获得受影响行的主键。您将需要执行其他用户给出的答案示例中提到的语句批处理。

~~开始交易；SELECT primary_key_columns FROM my_table WHERE status = 'O' FOR UPDATE; UPDATE my_table SET status = 'E' WHERE status = 'O'; 犯罪; 更多详细信息：[https://stackoverflow.com/questions/10663338/i-need-primary-keys-of-the-affected-rows-to-be-returned-after-updating-a-table-i][ 1]~~

编辑根据马库斯在下面的评论中给出的信息修改了答案。

> 要检索受更新语句影响的每一行的 ID：

```
SET @uids := null;
UPDATE footable
   SET foo = 'bar'
 WHERE fooid > 5
   AND ( SELECT @uids := CONCAT_WS(',', fooid, @uids) );
SELECT @uids; 
```

这将返回一个字符串，其中所有 ID 用冒号连接。资料来源：[如何获取 MySQL 中最后更新行的 ID？](https://stackoverflow.com/questions/1388025/how-to-get-id-of-the-last-updated-row-in-mysql#1751282)

@fenway 给出的答案中提到的另一个选项是支持数据库的输出子句。

请注意，即使在这种情况下，您也必须**在**按照上述相同步骤发送回数据之前填写值。

现在，我敢肯定，您想知道为什么数据库不自动返回主键值。好吧，这与以下事实有关

1）数据库并不坚持为每个表都拥有一个主键。它实际上是我们定义的唯一约束。

2) 并非所有场景都需要返回受影响的主键。在大多数常用用例中，更新后您最多需要受影响的行。

请记住，关系数据库编程需要与通常的问题集编程略有不同的思维方式。

至少这是我的两分钱。

问候

施瑞亚斯 N

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T20:27:27.933

实现此目的的一种方法是使用与更新语句具有相同过滤器的 select 语句。但是，请确保两个查询都在同一个事务中运行，以便数据在每次调用之间不会更改。

```
{

update Customers set CITY = 'CHICAGO'

where ContactFName = 'Dan'

//execute query

select CustomerID from Customers

where ContactName = 'Dan'

//execute reader
//while the reader returns a row, set that return value to an element in a list 

//commit transaction

}//Transaction 
```

# unix - unix 实用程序连接和输出字段

> ID：15190037
> 
> 赞同：0
> 
> 时间：2013-03-03T19:46:36.647
> 
> 标签：unix, join

我想输出排序后的 file1 中的所有字段，这些字段可以通过 file1 的 field1 和 file2 的 field2 连接。如果 file1 有三个字段，那么我可以执行以下操作：

```
 join -1 $field1 -2 $field2 -o 1.1,1.2,1.3 $file1 $file2 
```

但是，如果 file1 有数百或数千个字段，我该怎么办？我目前的解决方法之一是 Python，另一个是对两个排序文件执行 comm -12，其中包含来自 file1 和 file2 的连接字段值，然后将 file1 与由 comm -12 生成的文件连接。

这可能是 file1**输入**：

```
 1 A
 2 B
 3 C 
```

和 file2**输入**：

```
 3 D
 4 E
 5 F 
```

如何获得此**输出**（第 2 列中的共享值）：

```
 C 
```

不这样做：

```
 join -1 1 -2 1 -o 1.2 $file1 $file2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-03-07T02:21:16.027

我遇到了这个[答案](https://unix.stackexchange.com/a/265140/37356)，它使用了有用的语法。下面`n`是列数。

```
join -1 1 -2 1 -o"$(echo 1.{2..n})" $file1 $file2 
```

# ios - 不同范围内相同命名常量的链接器错误

> ID：15190038
> 
> 赞同：6
> 
> 时间：2013-03-03T19:46:36.823
> 
> 标签：ios, objective-c, xcode

我有一个名为“ID_KEY”的常量，它声明在 3 个单独的 .m 文件的顶部，这两个文件都不包括其他文件。

声明如下：

```
#import "PublicGamesResponse.h"

NSString *const ID_KEY = @"id";
...
@implementation PublicGamesResponse 
```

其他两个班级也是如此。但是，我收到一个链接器错误，抱怨同名的多个定义（如果我要注释掉其中两个定义，这就会消失）。

我的问题是为什么链接器会抱怨这个？ID_KEY 的每个定义都超出了所有其他定义的范围，所以我不明白为什么链接器会抱怨。

作为免责声明，我清理了项目并重新启动了 xCode，并在网站上寻找了类似的问题，但没有运气。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-03T19:48:22.167

当您在函数外部定义变量或常量时，它们被放置在*全局*范围内。链接器解析全局引用，当它多次找到同名时它会抱怨。

要为常量提供其编译单元的范围（即定义它们的文件） ，请`static`在其定义前添加：

```
static NSString *const ID_KEY = @"id"; 
```

这样，同一文件中的所有函数和方法都可以访问`ID_KEY`，但名称将保留在文件的范围内。本质上，`static`“隐藏”链接器的名称。

# javascript - event.preventdefault() 不适用于文本框的更改事件

> ID：15190044
> 
> 赞同：1
> 
> 时间：2013-03-03T19:47:20.003
> 
> 标签：javascript, jquery, html

正是在这里，我试图让我的文本框只接受数字。我能够检测到 keyCode 但 event.preventdefault() 不起作用。

**完整的 html + javascript**

```
<HTML>
    <HEAD>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
        <script type="text/javascript">
            $(document).ready(function () {
                $("#textbox1").keydown(function(event) {
                    try 
                    {
                        if (event.keyCode >= 48 && event.keyCode <= 57)
                        {
                            alert("valid number");
                        }   
                        else
                        {
                            event.preventDefault();
                            alert("It's NAN");
                        }
                    }
                    catch(ex) {
                        alert('An error occurred and I need to write some code to handle this!');
                    }
                    event.preventDefault();    
                });
            });
        </script>
    </HEAD>
    <BODY>
        <FORM>
            <input type="text" id="textbox1">
        </FORM>
    </BODY>
</HTML> 
```

这是[小提琴](http://jsfiddle.net/cRz8g/)。

我如何达到同样的效果？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T19:49:50.443

使用`keypress`事件来拦截更改。

**[示范](http://jsfiddle.net/DKFhe/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T20:04:05.170

正如@dystroy 所说，您应该将您的keydown 更改为keypress，并且您应该删除 `event.preventDefault();`接近尾声（第二个）以使代码正常工作。

[JSFiddle 更新](http://jsfiddle.net/cRz8g/3/)

# git - 提交对新存储库的更改

> ID：15190046
> 
> 赞同：0
> 
> 时间：2013-03-03T19:47:30.217
> 
> 标签：git, github, commit

我克隆了一个开源项目。现在，因为我想备份它并展示给一些人，我希望它把它推送到我的 github 帐户。问题是原始仓库现在已更改，在我最初提取它之后添加了很多提交，我真的不想要这些，因为我没有用我的修改测试它们。

我尝试将该存储库从 github 分叉到我的帐户，但由于那里存在许多更改，因此无法合并该存储库。（我使用 git status 命令查看文件）此外，我尝试创建一个新的空仓库并尝试将该代码的更改提交到该新仓库（我编辑了一些配置文件以指向该文件，（类似于 git remote )，但我仍然没有成功。

谁能为我提供一种方法，让我可以将我拥有的代码推送到我的 github 帐户，创建一个新的 repo（或将其插入新的 repo），而不会丢失更改或从原始 repo 中提取新的提交？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T19:50:33.660

如果你在 github 上 fork 项目并签出你的 fork，将更改推送到你的 repo 是安全的（它不会影响原始项目）。只要确保`origin`url 指向你的 fork（而不是原始的）。

您可以通过运行以下命令来建立 url：

```
git remote show origin 
```

不过我不会担心，因为如果您无权推送到原始项目，您将不会提交您的更改。

创建一个新项目（许可承受）是没有意义的，您可以在 git 工作流程（以及随后的 github）中做您想做的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T10:01:45.313

所以，我做了这些步骤确实解决了这个问题：

1.  我在网上创建了一个新的仓库
2.  运行`git init`命令
3.  运行`git add *`命令
4.  跑了`git remote add origin path/to/.git/online`
5.  已认证
6.  运行`git commit -m 'blabla'`以进行初始提交
7.  运行`git push origin master`以将其推送到存储库

这解决了我的问题！

# java - 使用 JFreeChart 和滑块更新图形

> ID：15190048
> 
> 赞同：5
> 
> 时间：2013-03-03T19:47:33.707
> 
> 标签：java, swing, events, jpanel, jfreechart

我有一个描述管道压力的数组的时间历史。因此，对于每个增量 t，我沿管道长度都有一组压力值。我想用 JFreeChart 绘制沿管道长度的压力，并选择使用滑块绘制哪个 delta t，以便每当用户移动滑块时，图形都会使用来自不同 delta t 的值进行更新。我还将瓷砖重置为管道最后部分的压力。发生的情况是标题是更新，这意味着数据正在正确更新，但曲线保持不变。我已经阅读了论坛上所有可能的主题，并尝试了我能想到的一切，但它不起作用！这是我的扩展 JPanel 的类的代码，其中方法 jSlider1StateChanged 听到滑块位置的变化，

```
public class MyMainPanel extends JPanel {

  private JFreeChart jc;
  private OutputPipe op;
  private DefaultXYDataset ds; 
  private javax.swing.JFrame jFrame1;
  private javax.swing.JSlider jSlider1;
  private pipevisualizer.MyChartPanel pnlChartPanel;                       

  private void jSlider1StateChanged(javax.swing.event.ChangeEvent evt) {                                      
        int ndt = ((JSlider) evt.
                getSource()).
                getValue();
        System.out.println("Slider1: " + ((JSlider) evt.
                getSource()).
                getValue());

        dataSetGen(ndt);
        int a = 0;
        jc.fireChartChanged();
  }                

  private void dataSetGen(int ndt) {
        ArrayList<OutputPipeDt> opDtArray = op.getOpLit();
        OutputPipeDt opDt = opDtArray.get(ndt);

        double[] H = opDt.getH();
        double[] l = new double[H.length];
        double[] p = new double[H.length];
        double dX = op.getPipeLength() / H.length;
        double slope = op.getPipeSlope();
        double el = op.getPipeUSElev();

        for (int i = 0; i < H.length; i++) {
              l[i] = dX * i;
              p[i] = el - dX * slope * i;
        }

        double[][] dataH = new double[2][H.length];
        dataH[0] = l;
        dataH[1] = H;

        double[][] dataP = new double[2][H.length];
        dataP[0] = l;
        dataP[1] = p;

        ds = new DefaultXYDataset();
        ds.addSeries("pipe head", dataH);
        ds.addSeries("pipe profile", dataP);

        jc.setTitle("H[end] = " + Double.toString(dataH[1][l.length - 1]));
        jc.fireChartChanged();
  }

  private JFreeChart createChart(OutputPipe op, int ndt) {

        ArrayList<OutputPipeDt> opDtArray = op.getOpLit();
        OutputPipeDt opDt = opDtArray.get(ndt);

        double[] H = opDt.getH();
        double[] l = new double[H.length];
        double[] p = new double[H.length];
        double dX = op.getPipeLength() / H.length;
        double slope = op.getPipeSlope();
        double el = op.getPipeUSElev();

        for (int i = 0; i < H.length; i++) {
              l[i] = dX * i;
              p[i] = el - dX * slope * i;
        }

        double[][] dataH = new double[2][H.length];
        dataH[0] = l;
        dataH[1] = H;

        double[][] dataP = new double[2][H.length];
        dataP[0] = l;
        dataP[1] = p;

        DefaultXYDataset ds = new DefaultXYDataset();
        ds.addSeries("pipe head", dataH);
        ds.addSeries("pipe profile", dataP);

        JFreeChart chart = ChartFactory.createXYLineChart(
                "t = " + Double.toString(op.getOpLit().get(ndt).getT()),
                // chart title
                "X",
                // x axis label
                "Y",
                // y axis label
                ds,
                // data
                PlotOrientation.VERTICAL,
                true,
                // include legend
                true,
                // tooltips
                false // urls
                );

        return chart;
  }
} 
```

我认为对数据集的任何更改都会使图形重绘本身。抱歉，如果代码可能太大而无法发布，但我不确切知道应该粘贴哪些部分以或多或少地清晰。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T17:31:54.507

如果没有完整的示例，您可以使用[此处](https://stackoverflow.com/a/6849654/230513)显示的方法；它用于`plot.setDataset()`在接收每个事件时替换数据集。

附录：这个显示温度随时间变化的示例可能会让您入门。

![ChartSliderTest](../Images/34fd1f0fe6781259ae9d2ec8b8e1790e.png)

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.util.ArrayList;
import java.util.List;
import java.util.Random;
import javax.swing.Box;
import javax.swing.BoxLayout;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JSlider;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;
import org.jfree.chart.ChartFactory;
import org.jfree.chart.ChartPanel;
import org.jfree.chart.JFreeChart;
import org.jfree.chart.plot.PlotOrientation;
import org.jfree.chart.plot.XYPlot;
import org.jfree.data.xy.XYDataset;
import org.jfree.data.xy.XYSeries;
import org.jfree.data.xy.XYSeriesCollection;

/**
 * @see https://stackoverflow.com/a/15207445/230513
 */
public class ChartSliderTest {

    private static final int N = 25;
    private static final double K = 273.15;
    private static final Random random = new Random();

    private static XYDataset getDataset(int n) {

        final XYSeries series = new XYSeries("Temp (K°)");
        double temperature;
        for (int length = 0; length < N; length++) {
            temperature = K + n * random.nextGaussian();
            series.add(length + 1, temperature);
        }
        return new XYSeriesCollection(series);
    }

    private static JFreeChart createChart(final XYDataset dataset) {
        JFreeChart chart = ChartFactory.createXYLineChart(
            "ChartSliderTest", "Length (m)", "Temp (K°)", dataset,
            PlotOrientation.VERTICAL, false, false, false);
        return chart;
    }

    private static void display() {
        JFrame f = new JFrame();
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        final List<XYDataset> list = new ArrayList<XYDataset>();
        for (int i = 0; i <= 10; i++) {
            list.add(getDataset(i));
        }
        JFreeChart chart = createChart(list.get(5));
        final XYPlot plot = (XYPlot) chart.getPlot();
        plot.getRangeAxis().setRangeAboutValue(K, K / 5);
        ChartPanel chartPanel = new ChartPanel(chart) {
            @Override
            public Dimension getPreferredSize() {
                return new Dimension(800, 400);
            }
        };
        f.add(chartPanel);
        final JSlider slider = new JSlider(0, 10);
        slider.addChangeListener(new ChangeListener() {
            @Override
            public void stateChanged(ChangeEvent e) {
                plot.setDataset(list.get(slider.getValue()));
            }
        });
        Box p = new Box(BoxLayout.X_AXIS);
        p.add(new JLabel("Time:"));
        p.add(slider);
        f.add(p, BorderLayout.SOUTH);
        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                display();
            }
        });
    }
} 
```

# python - 在 python 中嵌入 Bash 脚本而不使用子进程调用

> ID：15190055
> 
> 赞同：0
> 
> 时间：2013-03-03T19:48:16.900
> 
> 标签：python, bash

我已经能够使用[subprocess](http://docs.python.org/2/library/subprocess.html)将 bash 脚本嵌入到 python 中。我今天碰巧浏览了一段 python 代码，偶然发现了下面这行代码，它也将 bash 脚本嵌入到 python 中——使用类似于`docstring`.

```
#!/bin/bash -

''''echo -n
if [[ $0 == "file" ]]; then
  ..
fi
''' 
```

有人可以阐明这种方法。这种方法叫什么，也许还有相关的好处。我显然可以看到简单性，但我认为除此之外还有更多。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T20:01:42.973

这是一种使文件既是有效的 Python 脚本又是有效的 bash 脚本的巧妙方法。请注意，它不会导致子进程神奇地产生。相反，如果文件由 bash 评估，则 bash 脚本将运行，如果它由 Python 评估，则 bash 脚本将被忽略。

它很聪明，但总的来说可能不是一个好的软件工程实践。拥有单独的脚本通常更有意义。

举一个更具体的例子（比如这个文件叫做“ [polyglot](http://en.wikipedia.org/wiki/Polyglot_%28computing%29) ”）：

```
''''echo hello from bash
exit
'''

print('hello from python') 
```

正如您所注意到的，bash 将忽略初始引号，并打印“hello from bash”，然后在到达三引号之前退出。Python 会将 bash 脚本视为字符串，并忽略它，运行下面的 Python 脚本。

```
$ python polyglot
hello from python
$ bash polyglot
hello from bash 
```

但很自然，这通常（更清楚地）可以重构为两个脚本，每种语言一个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T19:52:38.340

1.  不，这不是嵌入到 python 中的，shebang 说它是一个 bash 脚本
2.  是两次，这`''''`只是`''`一个空字符串，它没有任何作用。
3.  是`'''`无效的，因为最后一个`'`没有关闭。

# php - 从动态下拉列表中选择后，将 AJAX 变量传递给 PHP 并显示 MySQL 结果

> ID：15190059
> 
> 赞同：0
> 
> 时间：2013-03-03T19:49:01.967
> 
> 标签：php, mysql, ajax

我在将从动态下拉列表中选择的变量传递给 PHP 文件时遇到问题。我希望 PHP 选择 db 表中与变量匹配的所有行。这是到目前为止的代码：

选择.php

* * *

```
<html>
<head>
     <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
   <script type="text/javascript">
    $(document).ready(function(){
        $("select#type").attr("disabled","disabled");
        $("select#category").change(function(){
        $("select#type").attr("disabled","disabled");
        $("select#type").html("<option>wait...</option>");            var id = $("select#category option:selected").attr('value');
        $.post("select_type.php", {id:id}, function(data){
            $("select#type").removeAttr("disabled");
            $("select#type").html(data);
        });
    });
    $("form#select_form").submit(function(){
        var cat = $("select#category option:selected").attr('value');
        var type = $("select#type option:selected").attr('value');

        if(cat>0 && type>0)
        {
            var result = $("select#type option:selected").html();
            $("#result").html('your choice: '+result);

            $.ajax({
            type: 'POST',
            url: 'display.php',
            data: {'result': myval},
            });

        }
        else
        {
            $("#result").html("you must choose two options!");
        }
        return false;
    });
});
</script>
</head>
<body>
    <?php include "select.class.php"; ?>
    <form id="select_form">
        Choose a category:<br />
        <select id="category">
            <?php echo $opt->ShowCategory(); ?>
        </select>
    <br /><br />
    Choose a type:<br />
    <select id="type">
         <option value="0">choose...</option>
    </select>
    <br /><br />
    <input type="submit" value="confirm" />
    </form>
    <div id="result"></div>
    <?php include "display.php"; ?>

    <div id="result2"></div>         
</body>
</html> 
```

选择.class.php

* * *

```
<?php
class SelectList
{
protected $conn;

    public function __construct()
    {
        $this->DbConnect();
    }

    protected function DbConnect()
    {
        include "db_config.php";
        $this->conn = mysql_connect($host,$user,$password) OR die("Unable to connect     to the database");
        mysql_select_db($db,$this->conn) OR die("can not select the database $db");
        return TRUE;
    }

    public function ShowCategory()
    {
        $sql = "SELECT * FROM profession";
        $res = mysql_query($sql,$this->conn);
        $category = '<option value="0">choose...</option>';
        while($row = mysql_fetch_array($res))
        {
            $category .= '<option value="' . $row['id_cat'] . '">' . $row['prof_name'] . '</option>';
        }
        return $category;
    }

    public function ShowType()
    {
        $sql = "SELECT * FROM specialties WHERE id_cat=$_POST[id]";
        $res = mysql_query($sql,$this->conn);
        $type = '<option value="0">choose...</option>';
        while($row = mysql_fetch_array($res))
        {
            $type .= '<option value="' . $row['id_type'] . '">' . $row['sp_name'] . '</option>';
        }
        return $type;
    }

}

$opt = new SelectList();
?> 
```

这是我希望将变量传递给的 display.php。该文件将从数据库中选择标准，然后在 select.php 中打印结果。

```
<?php

class DisplayResults
{
protected $conn;

    public function __construct()
    {
        $this->DbConnect();
    }

    protected function DbConnect()
    {
        include "db_config.php";
        $this->conn = mysql_connect($host,$user,$password) OR die("Unable to connect to the database");
        mysql_select_db($db,$this->conn) OR die("can not select the database $db");
        return TRUE;
    }

    public function ShowResults()

    {

        $myval = $_POST['result'];
        $sql = "SELECT * FROM specialities WHERE 'myval'=sp_name";
        $res = mysql_query($sql,$this->conn);
           echo "<table border='1'>";
           echo "<tr><th>id</th><th>Code</th></tr>";
        while($row = mysql_fetch_array($res))
        {

            while($row = mysql_fetch_array($result)){
            echo "<tr><td>";
            echo $row['sp_name'];
            echo "</td><td>";
            echo $row['sp_code'];
            echo "</td></tr>";
        }
            echo "</table>";
        //} 
        }
        return $category;
    }

}

$res = new DisplayResults();
?> 
```

我真的很感激任何帮助。如果我可以提供更多详细信息，请告诉我。

db图链接：http: [//imgur.com/YZ0SuVw](http://imgur.com/YZ0SuVw)

第一个下拉列表来自专业表，第二个来自专业表。我想做的是显示工作表中与下拉框中选择的专业匹配的所有行。这将需要将下拉列表中的变量（结果）的结果转换为作业表中的 spec_code。不确定如何执行此操作。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T20:04:31.680

我只想概述以下代码块的一些要点：

1.  你在哪里定义**myval**
2.  数据：：`{'result': myval}`结果不需要任何配额更改为数据：`{result: myval}`
3.  为什么需要从选定的选项中获取 HTML？最好发送选项值更改

`$("select#type option:selected").html();`

至

`$("select#type option:selected").val();`

```
if(cat>0 && type>0)
{
    var result = $("select#type option:selected").html();
    $("#result").html('your choice: '+result);

    $.ajax({
    type: 'POST',
    url: 'display.php',
    data: {'result': myval},
    });
} 
```

# python - 获取路径作为用户输入 Python 3

> ID：15190061
> 
> 赞同：1
> 
> 时间：2013-03-03T19:49:14.763
> 
> 标签：python

我希望用户能够输入路径作为我的程序
的参数程序应该适用于所有操作系统......
直到现在我使用 x=input("...") 并将这个 x 解析为我的路径
但在 Unix 中更复杂，如果我从 ~/a/c/b 运行我的程序并且我希望参数是目录'a'，我应该输入 ../../ 吗？
为了获得正确的路径，我应该在 Unix 中写什么...？
或者是否有另一个模块可以用来在上面的模板中获取用户路径？

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T20:14:25.367

您不应该使用相对路径，`../../`因为您可能永远不知道用户从哪里运行您的应用程序。如果您的程序在`~/a/c/b`其中并且您希望参数是 directory `a`，那么您应该只使用`~/a`作为参数。

至于编写相同的代码以在所有操作系统上运行，您应该使用 和 之类的`os.path.join`东西`os.path.normpath`。有关如何在 python 中处理路径的更多[信息](http://docs.python.org/2/library/os.path.html)。

# c# - Uploadify 在 FireFox ASP.NET 中不起作用

> ID：15190063
> 
> 赞同：1
> 
> 时间：2013-03-03T19:49:23.323
> 
> 标签：c#, asp.net, uploadify

我无法让 Uploadify 在 FireFox 中工作。它在 IE 和 Chrome 中运行。

我已经阅读了一些关于 flash cookie 错误的文章，并尝试对此进行修复，但没有成功。

我试图让它在 ASP.NET WebApplication 中工作。有没有人有类似的问题，然后可以给我一些建议吗？

默认.aspx

```
 $(document).ready(function () {
            $('#fuFiles').uploadify({
                'uploader': 'Scripts/uploadify.swf',
                'script': 'FileUploads.aspx',
                'cancelImg': 'Themes/Images/cancel.png',
                'auto': 'false',
                'multi': 'true',
                'wmode': 'transparent',
                'scriptData' :  {"ASPSESSID" : "<%=Session.SessionID %>"},
                'buttonText': 'Browse For Files',
                'width': '180',
                'height': '45'
            });
        }); 
```

文件上传.aspx.cs

```
protected void Page_Load(object sender, EventArgs e)
        {

                HttpPostedFile uploads = Request.Files["FileData"];

} 
```

全球.asax

```
protected void Application_BeginRequest(object sender, EventArgs e)
        {
            /* Fix for the Flash Player Cookie bug in Non-IE browsers.
          * Since Flash Player always sends the IE cookies even in FireFox
          * we have to bypass the cookies by sending the values as part of the POST or GET
          * and overwrite the cookies with the passed in values.
          * 
          * The theory is that at this point (BeginRequest) the cookies have not been read by
          * the Session and Authentication logic and if we update the cookies here we'll get our
          * Session and Authentication restored correctly
          */

            try
            {
                string session_param_name = "ASPSESSID";
                string session_cookie_name = "ASP.NET_SESSIONID";

                if (HttpContext.Current.Request.Form[session_param_name] != null)
                {
                    UpdateCookie(session_cookie_name, HttpContext.Current.Request.Form[session_param_name]);
                }
                else if (HttpContext.Current.Request.QueryString[session_param_name] != null)
                {
                    UpdateCookie(session_cookie_name, HttpContext.Current.Request.QueryString[session_param_name]);
                }
            }
            catch (Exception)
            {
                Response.StatusCode = 500;
                Response.Write("Error Initializing Session");
            }

            try
            {
                string auth_param_name = "AUTHID";
                string auth_cookie_name = FormsAuthentication.FormsCookieName;

                if (HttpContext.Current.Request.Form[auth_param_name] != null)
                {
                    UpdateCookie(auth_cookie_name, HttpContext.Current.Request.Form[auth_param_name]);
                }
                else if (HttpContext.Current.Request.QueryString[auth_param_name] != null)
                {
                    UpdateCookie(auth_cookie_name, HttpContext.Current.Request.QueryString[auth_param_name]);
                }

            }
            catch (Exception)
            {
                Response.StatusCode = 500;
                Response.Write("Error Initializing Forms Authentication");
            }
        }

        void UpdateCookie(string cookie_name, string cookie_value)
        {
            HttpCookie cookie = HttpContext.Current.Request.Cookies.Get(cookie_name);
            if (cookie == null)
            {
                cookie = new HttpCookie(cookie_name);
                HttpContext.Current.Request.Cookies.Add(cookie);
            }
            cookie.Value = cookie_value;
            HttpContext.Current.Request.Cookies.Set(cookie);
        }
    } 
```

网页配置

```
 <location path="FileUploads.aspx">
    <system.web>
      <authorization>
        <allow users="*"/>
      </authorization>
    </system.web>
  </location> 
```

# android - 将数据从 ListView 传递到另一个 Listview

> ID：15190071
> 
> 赞同：0
> 
> 时间：2013-03-03T19:50:08.363
> 
> 标签：android, listview

我有一个从 SqLite Db 获取数据的列表视图。我需要获取在列表视图中单击的数据并将其显示在列表视图的另一个活动中。

我曾尝试使用共享首选项，但我一次只能获取一个数据并将其作为文本视图显示在另一个活动中。

我不知道如何在列表视图中全部显示所选数据或从所选数据创建列表视图，需要帮助。

我的搜索活动

```
 listContent1.setAdapter(cursorAdapter);
  listContent1.setOnItemClickListener(listContentOnItemClickListener); 

             private ListView.OnItemClickListener listContentOnItemClickListener = new ListView.OnItemClickListener(){
  public void onItemClick(AdapterView<?> parent, View view, int position,
            long id) {

      Cursor cursor = (Cursor) parent.getItemAtPosition(position);

      String item_content1 = cursor.getString(cursor.getColumnIndex(SQLiteAdapter.KEY_FOODNAME));
      String item_content2 = cursor.getString(cursor.getColumnIndex(SQLiteAdapter.KEY_CALORIES));
      arlene = arlene + Integer.parseInt(item_content2);
      String item = String.valueOf(" Food Name: " + item_content1 ) + "\n" +
              " Calories: " +  item_content2;

       Toast.makeText(Search.this, item, Toast.LENGTH_LONG).show();      

       food.setText(item_content1);
       calories.setText(String.valueOf(arlene));

       Intent myIntent = new Intent(Search.this, Foodlog.class);
       Bundle bundle = new Bundle();
       bundle.putString("SQLITEDATA1", food.getText().toString()); 
       bundle.putString("SQLITEDATA2", calories.getText().toString()); 
       myIntent.putExtras(bundle);
       startActivity(myIntent); 
  } 
```

这是我的美食日志活动

```
 public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    setContentView(R.layout.foodlog);
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);

     foodnum = (TextView)findViewById(R.id.foodNum);
     remaining = (TextView)findViewById(R.id.remainingNum);
     totalnum = (TextView)findViewById(R.id.totalNum);  
     foodlog = (ListView)findViewById(R.id.list);

      Bundle bundle = getIntent().getExtras();  
       if( bundle != null){
       String food = bundle.getString("SQLITEDATA1");
       String calories = bundle.getString("SQLITEDATA2");

       String[] values = new String[] { food, calories }; //That you got from your intent bundle
       LVAdapter adapter = new LVAdapter(this, R.layout.foodlist, values);
       setListAdapter(adapter);

       } 
```

希望你能帮我

```
03-04 23:40:18.572: E/AndroidRuntime(451): FATAL EXCEPTION: main
03-04 23:40:18.572: E/AndroidRuntime(451): java.lang.RuntimeException: Unable to        start activity ComponentInfo{me.mojica.caloriewatch/me.mojica.caloriewatch.Foodlog}:  java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list'
03-04 23:40:18.572: E/AndroidRuntime(451):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
03-04 23:40:18.572: E/AndroidRuntime(451):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
03-04 23:40:18.572: E/AndroidRuntime(451):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
03-04 23:40:18.572: E/AndroidRuntime(451):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
03-04 23:40:18.572: E/AndroidRuntime(451):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-04 23:40:18.572: E/AndroidRuntime(451):  at android.os.Looper.loop(Looper.java:123)
03-04 23:40:18.572: E/AndroidRuntime(451):  at android.app.ActivityThread.main(ActivityThread.java:4627)
03-04 23:40:18.572: E/AndroidRuntime(451):  at java.lang.reflect.Method.invokeNative(Native Method)
03-04 23:40:18.572: E/AndroidRuntime(451):  at java.lang.reflect.Method.invoke(Method.java:521)
03-04 23:40:18.572: E/AndroidRuntime(451):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
03-04 23:40:18.572: E/AndroidRuntime(451):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
03-04 23:40:18.572: E/AndroidRuntime(451):  at dalvik.system.NativeStart.main(Native Method)
03-04 23:40:18.572: E/AndroidRuntime(451): Caused by: java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list'
03-04 23:40:18.572: E/AndroidRuntime(451):  at  android.app.ListActivity.onContentChanged(ListActivity.java:245)
03-04 23:40:18.572: E/AndroidRuntime(451):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:201)
03-04 23:40:18.572: E/AndroidRuntime(451):  at android.app.Activity.setContentView(Activity.java:1647)
03-04 23:40:18.572: E/AndroidRuntime(451):  at me.mojica.caloriewatch.Foodlog.onCreate(Foodlog.java:22)
03-04 23:40:18.572: E/AndroidRuntime(451):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
03-04 23:40:18.572: E/AndroidRuntime(451):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627) 
```

我根据答案对此进行了编辑。我仍然无法让它运行。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T20:09:31.353

当您单击 ListView 项目时，您使用 Intent 将带有数据的 Extra 包传递给您的下一个活动。

```
Intent myIntent = new Intent(currentActivity.this, secondActivity.class);
myIntent.putExtra("SQLITEDATA1", food.getText().toString()); 
myIntent.putExtra("SQLITEDATA2", calories.getText().toString()); 
startActivity(myIntent); 
```

使用这些数据，您应该通过制作自定义 ListView 适配器来填充 ListView。

```
public class SimpleArrayAdapter extends ArrayAdapter<String> {
  private final Context context;
  private final String[] values;

  public SimpleArrayAdapter(Context context, String[] values) {
    super(context, R.layout.rowlayout, values);
    this.context = context;
    this.values = values;
  }

  @Override
  public View getView(int position, View convertView, ViewGroup parent) {
    LayoutInflater inflater = (LayoutInflater) context
        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View rowView = inflater.inflate(R.layout.rowlayout, parent, false);
    TextView textView = (TextView) rowView.findViewById(R.id.label);        
    textView.setText(values[position]);     
    return rowView;
  }
} 
```

要在您的其他活动中填充 ListView：

```
public class MyListActivity extends ListActivity {
  public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    String food = myIntent.getStringExtra("SQLITEDATA1");
    String calories = myIntent.getStringExtra("SQLITEDATA2");
    String[] values = new String[] { food, calories }; //That you got from your intent bundle
    SimpleArrayAdapter adapter = new SimpleArrayAdapter(this, values);
    setListAdapter(adapter);
  }

} 
```

我建议[阅读整个教程](http://www.vogella.com/articles/AndroidListView/article.html)。

# java - 带有 xyz 键的容器

> ID：15190074
> 
> 赞同：2
> 
> 时间：2013-03-03T19:50:23.927
> 
> 标签：java, containers

我需要一个**快速**容器来在 Java 中存储对象，对象具有（静态）XYZ 坐标，并且所有对象都有不同的坐标。基本上是一个网格，但它可能不是以 0,0,0 为中心（并且网格中可能缺少部分）。

我尝试使用带有 Integer 的 Map 作为键并对坐标进行位移，以便为每个坐标创建一个唯一的数字。但是当数字高于 255（8 位）时，这并没有很好地工作。

数组也不能作为键，因为映射实际上并不查看数组的值，而是查看引用。我也可以使用字符串作为键，但是每次我想访问一个对象时，我都需要（重新）构建一个字符串。

现在我正在使用 ArrayList 并遍历所有键，但这真的很慢。那么存储对象的最快（和内存效率）方式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T19:53:13.220

创建一个自定义类，使用自定义 hashCode() 和 equals() 方法作为键。

```
public static class Vertex {
    public int x, y, z;
    public boolean equals(Object o){
        if(this == o) return true;
        if(!(o instanceof Vertex)) return false;
        Vertex v = (Vertex)o;
        return x == v.x && y == v.y && z == v.z;
    }

    public int hashCode(){
        //  Use whatever prime numbers you like
        return x ^ y * 137 ^ z * 11317;
    }
} 
```

只要确保您永远不会更改您用作键的实例的值。

这并不比使用简单整数差很多。它仍然是有效的恒定时间访问。

# php - table2CSV.js - 效果很好，但是在指定要导出哪个表时遇到问题

> ID：15190076
> 
> 赞同：1
> 
> 时间：2013-03-03T19:50:47.703
> 
> 标签：php, jquery, export-to-csv

当页面上有多个表时，我无法使用 table2CSV.js 导出。

第一个将正常工作，但任何其他按钮将导出一个空白文件。有任何想法吗？如果您需要更多信息，请告知。

我想补充一点，它始终是页面上第一个正常工作的表格......

请查看单个调用 (JS)：

```
function getCSVData(tableName){
    var csv_value=$(tableName).table2CSV({delivery:'value'});
    $("#csv_text").val(csv_value);
} 
```

以及调用 JS 的 HTML 表单按钮（页面上有几个）：

```
<form action="getCSV.php" method ="post" > 
    <input type="hidden" name="csv_text" id="csv_text">
    <input type="hidden" name="fileName" id="fileName" value="<?php echo($fileName); ?>">
    <input type="submit" value="Download Table 0" onclick="getCSVData('table#detail0')">
</form>

<form action="getCSV.php" method ="post" > 
    <input type="hidden" name="csv_text" id="csv_text">
    <input type="hidden" name="fileName" id="fileName" value="<?php echo($fileName); ?>">
    <input type="submit" value="Download Table 1" onclick="getCSVData('table#detail1')">
</form>

<form action="getCSV.php" method ="post" > 
    <input type="hidden" name="csv_text" id="csv_text">
    <input type="hidden" name="fileName" id="fileName" value="<?php echo($fileName); ?>">
    <input type="submit" value="Download Table 2" onclick="getCSVData('table#detail2')">
</form> 
```

这里还有一些表格打开标签供参考：

作为参考，这里是 getCSV.php 文件

```
<?php
    $file = $_REQUEST['fileName'];
    $filename = $file."_".date("Y-m-d_H-i",time());
    header("Content-type: application/vnd.ms-excel");
    header("Content-disposition: csv" . date("Y-m-d") . ".csv");
    header( "Content-disposition: filename=".$filename.".csv");

    $csv_output=stripcslashes($_REQUEST['csv_text']);
    print $csv_output;
    exit;   

?> 
```

作为参考，这里是 table2CSV.js 代码：

```
jQuery.fn.table2CSV = function(options) {
    var options = jQuery.extend({
        separator: ',',
        header: [],
        delivery: 'popup' // popup, value
    },
    options);

    var csvData = [];
    var headerArr = [];
    var el = this;

    //header
    var numCols = options.header.length;
    var tmpRow = []; // construct header avalible array

    if (numCols > 0) {
        for (var i = 0; i < numCols; i++) {
            tmpRow[tmpRow.length] = formatData(options.header[i]);
        }
    } else {
        $(el).filter(':visible').find('th').each(function() {
            if ($(this).css('display') != 'none') tmpRow[tmpRow.length] = formatData($(this).html());
        });
    }

    row2CSV(tmpRow);

    // actual data
    $(el).find('tr').each(function() {
        var tmpRow = [];
        $(this).filter(':visible').find('td').each(function() {
            if ($(this).css('display') != 'none') tmpRow[tmpRow.length] = formatData($(this).html());
        });
        row2CSV(tmpRow);
    });
    if (options.delivery == 'popup') {
        var mydata = csvData.join('\n');
        return popup(mydata);
    } else {
        var mydata = csvData.join('\n');
        return mydata;
    }

    function row2CSV(tmpRow) {
        var tmp = tmpRow.join('') // to remove any blank rows
        // alert(tmp);
        if (tmpRow.length > 0 && tmp != '') {
            var mystr = tmpRow.join(options.separator);
            csvData[csvData.length] = mystr;
        }
    }
    function formatData(input) {
        // replace " with “
        var regexp = new RegExp(/["]/g);
        var output = input.replace(regexp, "“");
        //HTML
        var regexp = new RegExp(/\<[^\<]+\>/g);
        var output = output.replace(regexp, "");
        if (output == "") return '';
        return '"' + output + '"';
    }
    function popup(data) {
        var generator = window.open('', 'csv', 'height=400,width=600');
        generator.document.write('<html><head><title>CSV</title>');
        generator.document.write('</head><body >');
        generator.document.write('<textArea cols=70 rows=15 wrap="off" >');
        generator.document.write(data);
        generator.document.write('</textArea>');
        generator.document.write('</body></html>');
        generator.document.close();
        return true;
    }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T00:36:13.420

它不适用于第二个和第三个表，因为您为表单中的所有 3 个输入（隐藏）提供了相同的 id。

```
<input type="hidden" name="csv_text" id="csv_text"> 
```

ID 应该是**唯一的**

如果您有多个具有相同 ID 的 HTMLElement，则在 Javascript 中检索它时，它将从头开始检索第一个找到的。所以它总是会从第一个表单中检索一个。

更改每种形式的输入：

```
<input type="hidden" name="csv_text" id="csv_text_1" />

<input type="hidden" name="csv_text" id="csv_text_2" />

<input type="hidden" name="csv_text" id="csv_text_3" /> 
```

然后，修改你的功能：

```
function getCSVData(tableName, num){
    var csv_value=$(tableName).table2CSV({delivery:'value'});
    $("#csv_text_" + num).val(csv_value);
} 
```

最后更新你的电话：

```
<input type="submit" value="Download Table 0" onclick="getCSVData('table#detail0', '0')">

<input type="submit" value="Download Table 0" onclick="getCSVData('table#detail1', '1')">

<input type="submit" value="Download Table 0" onclick="getCSVData('table#detail2', '2')"> 
```

个人观点：把表的所有内容都发过来好像有点没用，只是加了一个文件附件头，感谢PHP服务器。您正在使用网络发送数据，该数据将在没有任何修改的情况下重新发送给您（仅用于添加标头）。

如果我必须执行这样的过程，我只需向特定的 PHP 脚本发送一个简单的 GET 请求，该脚本将向我发送正确的标头，然后生成 CSV 内容，从数据库中检索数据。

# android - 无法从android中的arraylist中获取所有值

> ID：15190077
> 
> 赞同：0
> 
> 时间：2013-03-03T19:51:05.990
> 
> 标签：android, arraylist

我想从 arraylist 中一一获取值并将其设置为`TextView`，但我做不到。我的代码是：

```
try {
        // Getting Array of Contents
        jsonArrar = json.getJSONArray(TAG_CONTENTS);

        // looping through All Contents
        for(int i = 0; i < jsonArrar.length(); i++){
            JSONObject c = jsonArrar.getJSONObject(i);
            list = new ArrayList<String>();

            String id1=jsonArrar.getJSONObject(i).getString(TAG_ID);                

            list.add(id1);
        }

        Iterator<String> iterator = list.iterator();
        builder = new StringBuilder();
        while (iterator.hasNext()) {
            String string = iterator.next();                
            builder.append(string+"\n");

        }

        textView.setText(builder); 
```

通过上述方式，我只得到最后一个值，欢迎任何人讲述它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T19:54:04.973

您必须在循环之前声明列表，并且在`for`循环中只添加元素：

```
list = new ArrayList<String>();    
for(int i = 0; i < jsonArrar.length(); i++){
        JSONObject c = jsonArrar.getJSONObject(i);

        String id1=jsonArrar.getJSONObject(i).getString(TAG_ID);                

        list.add(id1);
} 
```

使用您的方法，对于其中的每个元素`jsonArrar`都声明了一个新列表，因此您最终会获得`jsonArrar.length()`只有最后一个可以访问的列表（对于其他您不再有参考的列表）。

# postgresql - 替换 PostgreSQL 中的 unicode 字符

> ID：15190078
> 
> 赞同：7
> 
> 时间：2013-03-03T19:51:06.740
> 
> 标签：postgresql, unicode, replace, sql-update

是否可以在 PostgreSQL 的 varchar 字段中将所有出现的给定字符（以 unicode 表示）替换为另一个字符（以 unicode 表示）？

我试过这样的事情：

```
UPDATE mytable 
SET myfield = regexp_replace(myfield, '\u0050', '\u0060', 'g') 
```

但似乎它确实在字段中写入了字符串'\u0060'，而不是与该代码对应的字符。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-03T19:58:26.487

根据[关于词法结构的 PostgreSQL 文档](http://www.postgresql.org/docs/current/interactive/sql-syntax-lexical.html#SQL-SYNTAX-STRINGS-UESCAPE)，您应该使用`U&`语法：

```
UPDATE mytable 
SET myfield = regexp_replace(myfield, U&'\0050', U&'\0060', 'g') 
```

您还可以使用 PostgreSQL 特定的转义字符串形式`E'\u0050'`。这将适用于旧版本而不是 unicode 转义形式，但 unicode 转义形式更适合新版本。这应该显示发生了什么：

```
regress=> SELECT '\u0050', E'\u0050', U&'\0050';
 ?column? | ?column? | ?column? 
----------+----------+----------
 \u0050   | P        | P
(1 row) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-03T20:22:02.920

它应该与“与该代码对应的字符”一起使用，除非客户端或食物链中的其他层破坏了您的代码！

此外，使用[**`translate()`**or`replace()`](http://www.postgresql.org/docs/current/interactive/functions-string.html#FUNCTIONS-STRING-OTHER)来完成这个简单的工作。比 快得多`regexp_replace()`。`translate()`一次也适用于多个简单的替换。
并避免使用子句进行**空更新。**`WHERE`更快，并且避免桌船和额外`VACUUM`费用。

```
UPDATE mytable
SET    myfield  = translate(myfield, 'P', '`')  -- actual characters
WHERE  myfield <> translate(myfield, 'P', '`'); 
```

如果您一直遇到问题，请使用[@mvp](https://stackoverflow.com/a/15190166/939860)提供的编码：

```
UPDATE mytable
SET   myfield =  translate(myfield, U&'\0050', U&'\0060')
WHERE myfield <> translate(myfield, U&'\0050', U&'\0060'); 
```

# css - 这种类型的标题/菜单的最佳方法？

> ID：15190081
> 
> 赞同：-4
> 
> 时间：2013-03-03T19:51:25.720
> 
> 标签：css, menu, menuitem

我想在 html/css 中制作我使用烟花创建的这个标题（见图）。这个问题是我不确定这个多级菜单的最佳方法是什么。正在考虑彼此相邻的几个 DIV（每个菜单类别主题 I、主题 II 等一个）以及每个子菜单项（传记、出版物等）的每个 DIV 文本/超链接，但这听起来不像“最干净”的方法。有什么建议么？谢谢

![在此处输入图像描述](../Images/55d75eb67ce64edeccfa74c5c90fb92f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T20:06:45.803

好吧，我已经给你写了一个超快速的 jsfiddle，它可以作为一个不错的起点。我基本上只是在标签内使用嵌套的 div `<header>`，只是为了提高代码的可读性。

[http://jsfiddle.net/bernie1227/L9h7c/](http://jsfiddle.net/bernie1227/L9h7c/1/)

# php - 为timeline.js的所需JSON输出构造多维数组

> ID：15190085
> 
> 赞同：1
> 
> 时间：2013-03-03T19:51:52.253
> 
> 标签：php, json, timeline.js

[timelineJS](http://www.timeline.verite.co)需要指定的 JSON 格式。到目前为止，使用此 php 代码，我能够生成如下输出：

```
$rs = mysql_query("SELECT filename, data AS added,  f.image as media, f.info_hash AS hash, c.name AS category FROM xbtit_files f LEFT JOIN xbtit_categories c ON f.category = c.id WHERE f.uploader =  '2' ORDER BY added DESC"); 

$json_arr = array();
while($row = mysql_fetch_array($rs)) { 
if (strlen(htmlspecialchars($row[filename])) > 30)
  $t_name  = substr(htmlspecialchars($row[filename]), 0, 30)."...";
else
  $t_name  = htmlspecialchars($row[filename]);

$row_arr['credit'] = $row['hash'];
$row_arr['caption'] = $row['category'];
$row_arr['media'] = $row['media'];
$row_arr['headline'] = $t_name;
$row_arr['startDate'] = $row[added];
array_push($json_arr,$row_arr);
} 
$json = '{"timeline":
    {
        "headline":"UPLOADER1",
        "type":"default",
        "text":"Show all uploads of this uploader",
        "asset": {
            "media":"http://localhost/torrent/torrentimg/49ac3aa95ec6d2ae56772a158b41d4aa62a7b78c.jpg",
            "credit":"Credit Name Goes Here",
            "caption":"Caption text goes here"
            },
        "date":
            '.json_encode($json_arr).'

    }}';
echo $json; 
```

这给出了这样的输出：

```
{
"timeline": {
    "headline": "UPLOADER1",
    "type": "default",
    "text": "Show all uploads of this uploader",
    "asset": {
        "media": "http://localhost/torrent/torrentimg/49ac3aa95ec6d2ae56772a158b41d4aa62a7b78c.jpg",
        "credit": "Credit Name Goes Here",
        "caption": "Caption text goes here"
    },
    "date": [
        {
            "headline": "Avatar",
            "startDate": "2012-06-26 12:03:13"
        },
        {
            "headline": "Rio BRRIP x264-1080p-2011",
            "startDate": "2012-06-26 11:59:19"
        },
        {
            "headline": "The Number 23 (2007)",
            "startDate": "2012-06-26 11:50:44"
        },
        {
            "headline": "Fate Stay night",
            "startDate": "2012-06-26 11:41:01"
        }
    ]
}
} 
```

我怎么能得到这样的东西：

```
{
"timeline":
{
    "headline":"UPLOADER 1",
    "type":"default",
    "text":"Name of the Uploader",
    "startDate":"2012,1,26",
    "date": [
        {
            "startDate":"2012,2,30",
            "headline":"Hanky Panky (Torrent Name)",
            "text":"<p>Some description of the torrent.</p>",
            "asset":
            {
                "media":"Poster.jpg",
                "credit":"",
                "caption":""
            }
        },
        {
            "startDate":"2012,2,18",
            "headline":"Torrent Name 2",
            "text":"This movie was released on... The actors are....",
            "asset":
            {
                "media":"Poster1.jpg",
                "credit":"",
                "caption":"Directed and Edited by Matt Mayer, Produced by Seth Keim, Written by Eliot Glazer. Featuring Eliot and Ilana Glazer, who are siblings, not married."
            }
        }
    ]
}
} 
```

请注意：对象资产中有 JSON 对象。这怎么可能实现？有人可以帮忙吗？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T20:04:04.953

json_encode() 可以毫无问题地将 PHP 多维数组转换为 json 字符串，因此创建具有所需结构的 PHP 数组并在其上调用 json_encode。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T12:49:39.283

我通过修改[user1660584](https://stackoverflow.com/users/1660584/user1660584)建议的数组找到了解决方案。谢谢。

多维数组将如下所示：

```
$c['timeline']['headline']= 'uploader1';
$c['timeline']['type'] = 'Default Type';
$c['timeline']['text'] = 'Some Text about the uploader';
$c['timeline']['asset']['media'] = 'torrentimg/49ac3aa95ec6d2ae56772a158b41d4aa62a7b78c.jpg';
$c['timeline']['asset']['caption'] = 'Assets consists of media files, caption and categories';
$c['timeline']['date'] = array(array(
    "startDate"=>'asfsf as fa',
    "headline"=>'kjahdas a',
    "text"=>'ahidahs kahs',
    "asset" => array(
                "media"=> 'image.png',
                "credit"=> 'Category',
                "caption"=> 'Some Text'
    )
),array(
    "startDate"=>'asfsf as fa',
    "headline"=>'kjahdas a',
    "text"=>'ahidahs kahs',
    "asset" => array(
                "media"=> 'image.png',
                "credit"=> 'Category',
                "caption"=> 'Some Text'
    )
));
echo json_encode($c); 
```

我只需要将它放在带有 sql relult 的循环中。

# random - 在java中显示从.txt文档中随机选择的行

> ID：15190088
> 
> 赞同：0
> 
> 时间：2013-03-03T19:52:09.353
> 
> 标签：random, java.util.scanner

我有一个 .txt 文档，其中包含一个单词列表，每行一个单词。有十行。我如何阅读这份文档，从中随机选择一行，然后显示该单词？

这是我到目前为止的代码：

```
 Scanner fileScan, wordScan;
    String word;
    Random rand = new Random();
    int pickedLine = rand.nextInt(6)+1;

    fileScan = new Scanner(new File("list.txt"));

    while (fileScan.hasNext()) {
        word = fileScan.nextLine();
        System.out.println()

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T19:55:15.390

我将每一行扫描成一个数组，然后得到一个介于 0 和数组长度之间的随机数 - 1。然后我会使用该数字从该数组中获取与该数字对应的行。不过，我不确定您要如何显示文本行。

注意：不完整的源代码。您必须声明上面的数组。

```
var currentLine = 0;
while (fileScan.hasNext()) 
{
    word = fileScan.nextLine();

    newArray[currentLine] = word;
    currentLine++;
} 
```

# c - 如何在 C 中读取 fortran 二进制文件？

> ID：15190092
> 
> 赞同：3
> 
> 时间：2013-03-03T19:52:40.420
> 
> 标签：c, fortran, binaryfiles

我有一个由 fortran 代码生成的二进制文件。该文件包含一个双精度数组。我需要在我的 C 程序中打开它，然后像使用通常的数组一样使用它。

我该怎么做？

二进制文件中如何表示双精度类型？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-03T20:23:59.937

几乎所有的 Fortran 编译器，对于未格式化（即二进制）的顺序文件，都会在每条记录的开头和结尾写入记录的长度。通常长度以 4 个字节写入，尽管一些编译器使用 8 个字节。记录是使用单个 Fortran 写入语句写入的所有内容。如果这个数组是用单个 Fortran 写语句和这种类型的文件写入的，那么你有四到八个字节要跳过，然后是数组，然后是四到八个额外的字节。您可能可以通过使用十六进制编辑器查看文件来解决这个问题。如果数组是用多个写语句分段写入的（例如，按列或行），则每条记录都将具有这种结构。

如果文件由 Fortran 以未格式化的形式写入，则 Fortran double 类型以该计算机的二进制表示形式写入。您应该能够在相同类型的计算机上以 C 语言阅读它。如果您正在更改架构而不仅仅是语言，则二进制表示可能会有所不同。

Fortran 有其他不包含记录长度信息的文件访问方法。例如，直接访问。流访问的新方法是为跨语言兼容性而设计的。

如果数组是多维的，您可能需要转置它，因为 Fortran 具有列优先数组，而 C 使用行优先。

相关问题：[Fortran unformatted file format](https://stackoverflow.com/questions/8751185/fortran-unformatted-file-format/8751662) and [reading fortran unformatted file with python](https://stackoverflow.com/questions/8131204/reading-fortran-unformatted-file-with-python/8131465)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T20:15:45.910

原则上你不能。

Fortran 二进制文件的格式*未指定*。这意味着，尽管您可以将程序状态保存在 Fortran 二进制文件中，并使用*相同的 Fortran 实现*重新打开它，但即使使用不同的 Fortran 实现，您也不能可靠地这样做。

现在，可以理智地保存状态的方法数量有限，因此您有可能也很可能能够计算出给定 Fortran 二进制文件的结构，并且足够详细，您可以在其中打开它C 程序并读取内容。然而，这些知识完全特定于所讨论的 Fortran 编译器。

所以最好的办法是创建一个包含 的 Fortran 数组，例如，`[0, 1, 2, 3, 4, 256, 65536, 65537, 1e10, 1e20, 1e30, 1e40]`将其写入二进制文件，然后用二进制编辑器查看它，看看里面有什么。

之后，恐怕你就一个人了……

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T12:53:40.783

在我自己看来，读取 fortran 二进制文件的更好方法实际上是**从 fortran**读取它们并将**数组传递给 C**。它可以为您节省很多痛苦。

1.  编写一个实际上可以读取这个二进制文件的子程序
2.  包装您的子例程以从 C 中调用它。

最难的部分是包装你的 fortran 子例程。C 和 fortran 之间的名称修改不是直接的。这取决于您使用的编译器（即平台）和 Fortran 版本。您可以[在此处](http://en.wikipedia.org/wiki/Name_mangling#C_name_decoration_in_Microsoft_Windows)和[此处](http://www.yolinux.com/TUTORIALS/LinuxTutorialMixingFortranAndC.html)查看简单示例。

第一选择是使用适当的编译选项“手动”完成。

**提示**：要了解修饰，您可以在 linux 中使用*nm*命令或 DLL 导出查看器之类的工具。

更好的选择是使用**Fortran 2003**，它引入了有助于处理此类操作的模块**[iso_c_binding 。](http://www.roguewave.com/DesktopModules/Bring2mind/DMX/Download.aspx?entryid=751&command=core_download&PortalId=0&TabId=607)**

# c++ - C中的左值所需错误

> ID：15190094
> 
> 赞同：2
> 
> 时间：2013-03-03T19:52:47.063
> 
> 标签：c++, c, variables, conditional-operator, lvalue

我的代码是：

```
#include<stdio.h>
int main() {
   int a=10, b;
   a >= 5 ? b=100 : b=200;
   printf("%d %d", a, b);
   return 0;
} 
```

这是条件运算符行中的“需要左值”。

你能解释一下为什么吗？

顺便说一句，同一个程序在 C++ 中完美运行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-03T19:54:44.977

编写该作业的惯用方式是：

```
b = (a >= 5) ? 100 : 200; 
```

如果您坚持按自己的方式进行，请添加括号：

```
(a >= 5) ? (b=100) : (b=200); 
```

有关为什么这在 C++ 中有效但在 C 中无效的详细信息，请参阅[C 和 C++ 之间的条件运算符差异](https://stackoverflow.com/questions/1082655/conditional-operator-differences-between-c-and-c)（感谢@Grijesh Chauhan！）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T21:54:56.647

括号在 C 中具有更高的优先级。由于优先级问题，U 会收到警告。试试这个。。

```
(a >= 5) ? (b = 100) : (b = 200); 
```

# linux - 如何 tar 一组文件？

> ID：15190095
> 
> 赞同：24
> 
> 时间：2013-03-03T19:52:55.997
> 
> 标签：linux, tar

我是这个`tar`命令的新手。我在一个目录中有很多文件： `1_1_1.txt`, `1_1_2.txt`, `2_1_1.txt`, `2_1_2.txt`..

我知道有一个命令：

```
tar cf file.tar *.txt 
```

这会将`tar`所有四个文件放入`file.tar`. 但我需要 tar`1_1_1.txt`并`1_1_2.txt`放入一个 tar 文件和`2_1_1.txt`另一个`2_1_2.txt`tar 文件。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-03-03T20:57:03.707

要简单地创建这些文件的 tarball，我会这样做：

```
tar cf ones.tar 1_*.txt
tar cf twos.tar 2_*.txt 
```

您很可能想要压缩 tarball，因此请使用以下`z`选项：

```
tar czf ones.tar.gz 1_*.txt
tar czf twos.tar.gz 2_*.txt 
```

使用 .查看 tarball 的内容`tar tf <tarball>`。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-01-19T16:28:36.527

您可以简单地使用以下命令

```
tar cf file1.tar 1_1_1.txt 1_1_2.txt

tar cf file2.tar 2_1_1.txt 2_1_2.txt 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-03T20:23:47.670

试试这个：

`find . -maxdepth 1 -name "*.txt" -exec tar -rf test.tar {} \;`

如果要包含所有文件，包括子文件夹，请删除“-maxdepth 1”

您可以使用“1_1*.txt”之类的模式

# c# - 将转换为 int 的两个字节变量相加

> ID：15190099
> 
> 赞同：1
> 
> 时间：2013-03-03T19:53:22.337
> 
> 标签：c#

我将变量显式转换为 in，然后使用加号运算符，但仍返回 44 我想知道为什么会发生这种情况，我将变量显式转换为 int。

```
byte b = 100;
b = (byte)(b +200); 
```

为什么使用这个我的结果是 255？

```
byte b = 100;
b = (byte)(b + 155); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T19:55:32.233

让我们分解一下：

```
byte b = 100;
int tmp = (int) b + (int) 200;
b = (byte) b; 
```

现在`tmp`将具有 300 的值......但这不能表示为`byte`. 当您将其转换为`byte`（在未经检查的上下文中）时，它将最终为 44。

C# 5 规范的相关位，第 6.2.1 节：

> 显式数字转换可能会丢失信息或可能导致抛出异常。显式数值转换处理如下：
> 
> *   对于从一个整数类型到另一个整数类型的转换，处理取决于发生转换的溢出检查上下文（第 7.6.12 节）：
>     *   在检查的上下文中，如果源操作数的值在目标类型的范围内，则转换成功，但如果源操作数的值超出目标类型的范围，则抛出 System.OverflowException。
>     *   在未经检查的上下文中，转换始终成功，并按如下方式进行。
>         *   如果源类型大于目标类型，则源值通过丢弃其“额外”最高有效位来截断。然后将结果视为目标类型的值。

最后一个子弹正是这里发生的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T19:55:22.507

因为“100 + 200”的结果是 300。300 不能放入一个字节（您将其转换为），所以较高的位被丢弃 - 留下 44。

你甚至期望会发生什么？

# java - ArrayList 每个 for 循环删除超过 1 个？

> ID：15190100
> 
> 赞同：0
> 
> 时间：2013-03-03T19:53:22.493
> 
> 标签：java

```
for(PatientProcedures s: PatientProceduresList)
        {

            if(Num == s.getAccountNumber())
            {
                PatientProceduresList.remove(s);
                break;
                //without break it stops cause of loop 

            }
        } 
```

有没有办法解决？它适用于休息，但我需要继续并继续对数组列表的其余部分做同样的事情。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T19:56:35.013

为此，您必须使用[`Iterator`](http://docs.oracle.com/javase/6/docs/api/java/util/Iterator.html).

```
Iterator<PatientProcedures> iterator = list.iterator();

while (iterator.hasNext())
{
    PatientProcedures s = iterator.next();

    if (wantToRemove)
    {
        iterator.remove();
    }
} 
```

这将避免执行每个循环`ConcurrentModificationException`时存在的那个。`for`

# spring-mvc - Spring MVC i18n 给出 JasperException : No message found under code

> ID：15190101
> 
> 赞同：0
> 
> 时间：2013-03-03T19:53:29.477
> 
> 标签：spring-mvc, internationalization, tomcat7

我正在使用**spring mvc 3.1 jars**构建一个项目，在配置 i18n 文件夹后，tomcat 向我抛出以下异常：

org.apache.jasper.JasperException：javax.servlet.ServletException：javax.servlet.jsp.JspTagException：在区域设置“en_US”的代码**“label.title”**下找不到消息。

我尝试将 i18n 文件夹添加到 eclipse(Juno) 中的类路径中，将 messages*.properties 文件放在**WEB-INF/i18n、WEB-INF/classes/i18n**、WEB-INF/classes、WEB-INF/lib、WEB- INF/ 但没用。

**弹簧上下文.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/mvc"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:beans="http://www.springframework.org/schema/beans"
    xmlns:p="http://www.springframework.org/schema/p" xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/mvc
http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd
http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
http://www.springframework.org/schema/context
http://www.springframework.org/schema/context/spring-context-3.1.xsd">
    <annotation-driven />
    <resources location="/, classpath:/META-INF/web-resources/"
        mapping="/resources/**" />
    <default-servlet-handler />
    <beans:bean
        class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <beans:property name="prefix" value="/WEB-INF/views/" />
        <beans:property name="suffix" value=".jsp" />
    </beans:bean>
    <context:component-scan base-package="com.hoe.spring.controller" />
    <interceptors>
        <beans:bean
            class="org.springframework.web.servlet.i18n.LocaleChangeInterceptor"
            p:paramName="lang" />

    </interceptors>
    <beans:bean
        class="org.springframework.context.support.ReloadableResourceBundleMessageSource"
        id="messageSource" p:basenames="WEB-INF/i18n/messages, WEB-INF/i18n/application"
        p:fallbackToSystemLocale="false"  p:fileEncodings="UTF-8"
    p:defaultEncoding="UTF-8" />
    <beans:bean class="org.springframework.web.servlet.i18n.CookieLocaleResolver"
        id="localeResolver" p:cookieName="locale" />
</beans:beans> 
```

**消息属性**

```
label.title=Contact_Manager
label.firstname=First_Name
label.lastname=Last_Name
label.email=Email
label.telephone=Telephone 
```

**页面.jsp**

```
<%@taglib uri="http://www.springframework.org/tags/form" prefix="form"%>
<%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@taglib uri="http://www.springframework.org/tags" prefix="spring"%>
<spring:message code=**"label.title"** var="cName"/>

label.addcontact=Add_Contact
label.menu=Menu 
```

我错过了什么？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-16T18:46:20.043

我已将文件放在 resources/i18n 文件夹下。

```
<bean id="messageSource" class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
    <property name="basename" value="classpath:i18n/messages" />
    <property name="defaultEncoding" value="UTF-8" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T07:18:18.170

尝试将文件放在`resources/i18n`eclipse 的文件夹下，然后使用`p:basenames="classpath:i18n/messages"`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T07:46:16.030

您可以尝试将 message.properties 文件名更改为 messages_en_US.properties

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T07:42:35.173

```
 <bean id="messageSource"     class="org.springframework.context.support.ResourceBundleMessageSource">
    <property name="basenames">
                        <list>
                                <value>locale.messages</value>
                                <value>locale.validation.messages</value>
                                <value>locale.email.messages</value>
                        </list>
     </property>
   </bean> 
```

并将属性文件放在 locale 文件夹下（与包结构相同） 如果是 maven/gradle 项目，则 locale 文件夹位于资源文件夹 locale.validation.message => locale/validation/messages_en_US.properties

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-13T18:39:25.860

我遇到了同样的问题，我意识到 messages_{}.properties 必须在类路径中。因此，您无需提及 basename 属性值“classpath:messages”。相反，只需提及“**消息**”。这是我的完整配置。

```
<bean id="messageSource"
        class="org.springframework.context.support.ResourceBundleMessageSource">
        <property name="basename" value="messages"/>
        <property name="useCodeAsDefaultMessage" value="true"/>
        <property name="defaultEncoding" value="UTF-8" />       
</bean>

<!--  allow localization through cookie and add interceptor to allow changes to locale -->

<bean id="localeResolver" class="org.springframework.web.servlet.i18n.CookieLocaleResolver" />

<mvc:interceptors>
    <bean id="localeChangeInterceptor"
          class="org.springframework.web.servlet.i18n.LocaleChangeInterceptor">
     <property name="paramName" value="lang"/>     
     </bean>          
</mvc:interceptors> 
```

# ruby - Ruby 中的渐进式数组组合

> ID：15190104
> 
> 赞同：1
> 
> 时间：2013-03-03T19:53:52.180
> 
> 标签：ruby, arrays, cartesian-product

我有多个数组，例如 4 个：

```
a = ["a", "b", "c" ]
b = [1, 2, 3, 4]
c = ["xx", "yy"]
d = ["abc"] 
```

我想以迭代的方式“逐步”做数组的乘积，像这样

```
a.product(b)
a.product(b, c)
a.product(b, c, d) 
```

我希望能够以一种可扩展的方式进行，其中数组数量会发生变化并获得数组产品`arr0.product(arr1, arr2, arr3.......arrn)`。有人可以帮助弄清楚如何在 Ruby 中做到这一点。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T20:14:49.683

```
a = ["a", "b", "c" ]
b = [1, 2, 3, 4]
c = ["xx", "yy"]
d = ["abc"]

ars = [b,c,d]
p ars.each_index.flat_map{|i| a.product(*ars[0..i])} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T20:39:17.997

你可以像这样抽象它：

```
def prog_product(arrs)
  x, *xs = arrs
  (1..xs.count).map(&xs.method(:take)).map do |args|
    x.product(*args)
  end
end 
```

这将返回一个渐进式产品数组，例如：

```
[a1.product(a2), ..., a1.product(a2, ..., an)] 
```

在您的情况下，`prog_products(a, b, c, d)`将返回`[a.product(b), a.product(b, c), a.product(b, c, d)]`. 如果出于某种原因您想将所有产品合并到一个大数组中，您可以调用`.flatten(1)`结果。

# jquery - Flexslider 字幕切换不会保持隐藏状态

> ID：15190105
> 
> 赞同：3
> 
> 时间：2013-03-03T19:53:52.923
> 
> 标签：jquery, plugins, flexslider, caption

我有一个关于为 Flexslider 幻灯片打开和关闭标题的问题。

标题从隐藏开始，我有一个“描述”按钮，可以单击该按钮来打开和关闭标题。

标题隐藏工作正常，但是，一旦打开标题，当再次单击“描述”并保留在后续幻灯片上时，它不会消失。它可以在当前幻灯片上关闭，但会在下一张幻灯片上重新出现。

我试图到处寻找解决方案，但我不知所措！

我的jQuery：

```
$(".slideinfo").hide();

$(".description").click(function(){
    $(".slideinfo").fadeToggle(1000);   
});

$(window).load(function() {
    $('.flexslider').flexslider({
    keyboard: true,
    animation: "fade",
    slideshow: true,
    slideshowSpeed: 3000,
    animationSpeed: 1000,
    touch: true,
    video: false,
    controlNav: false,
    directionNav: true,
    controlsContainer: ".pager",  
}); 
```

这是发生问题的示例：[链接](http://hellothisis.cc/streusel/stitched.html)

# asp.net - ASP.NET MVC4 异步控制器 - 为什么要使用？

> ID：15190112
> 
> 赞同：36
> 
> 时间：2013-03-03T19:54:17.073
> 
> 标签：asp.net, asynchronous, asp.net-mvc-4, task-parallel-library, async-await

我试图了解为什么以及何时应该使用`async`控制器操作。最终，当我在其中使用`await`时，它将等待操作完成以返回视图。

例如

```
public async Task<ActionResult> TryMe()
{
   await SomeActionAsync();
   return View();
} 
```

在这种情况下，如果我使用`async`或不使用`async`，*Action*将需要相同的时间来执行。

如果我不尝试并行运行至少 2 个慢速操作（彼此不依赖），我看不出有任何理由使用`async`控制器操作。

如果我错了，请纠正我。我想我在这里遗漏了一些东西。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-03-03T19:56:30.470

关键字的重点`await`是让您使用*异步操作*而无需编写丑陋的回调。

使用异步操作有助于避免浪费线程池线程。

# 解释

ASP.Net 在托管线程池的线程中运行所有代码。
如果一次运行的慢请求太多，线程池将满，新的请求需要等待线程释放。

然而，您的请求通常很慢不是因为它们在进行计算（受计算限制），而是因为它们在等待其他东西，例如硬盘、数据库服务器或外部 Web 服务（IO 或网络-边界）。

仅仅为了等待外部操作完成而浪费宝贵的线程池线程是没有意义的。

异步操作允许您启动操作，将线程返回到池中，然后在操作完成时在不同的线程池线程上“唤醒”。
在操作运行时，不消耗任何线程。

# android - OpenGL 混合模式和深度缓冲区

> ID：15190113
> 
> 赞同：3
> 
> 时间：2013-03-03T19:54:18.073
> 
> 标签：android, opengl-es

读取的圆圈更靠近观察者，纹理具有透明背景。

（两个对象都是大小相同的正方形，只是纹理和 x、z 坐标不同）。

我想：

![在此处输入图像描述](../Images/f8da43d952c617f394a30bd884a7d3d7.png)

但是我有：

![在此处输入图像描述](../Images/e7328fca6aabd71a2504a289734514df.png)

我知道我必须对混合模式和深度缓冲区做一些事情，但我不知道具体是什么。有人能帮我吗？

当前加载纹理的代码：

```
public void initTexture(GL10 gl, Bitmap bitmap) {
    gl.glEnable(GL10.GL_BLEND);
    gl.glBlendFunc(GL10.GL_SRC_ALPHA, GL10.GL_ONE_MINUS_SRC_ALPHA);

    int[] texture = new int[1];
    gl.glGenTextures(1, texture, 0);

    textureId = texture[0];
    gl.glBindTexture(GL10.GL_TEXTURE_2D, textureId);

    gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MIN_FILTER, GL10.GL_NEAREST);
    gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MAG_FILTER, GL10.GL_LINEAR);

    gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_WRAP_S, GL10.GL_REPEAT);
    gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_WRAP_T, GL10.GL_REPEAT);

    GLUtils.texImage2D(GLES10.GL_TEXTURE_2D, 0, bitmap, 0);
    bitmap.recycle();
} 
```

对于这些对象中的每一个，绘图的相关部分：

```
 gl.glBindTexture(GL10.GL_TEXTURE_2D, textureId);

    gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
    gl.glEnableClientState(GL10.GL_TEXTURE_COORD_ARRAY);

    gl.glFrontFace(GL10.GL_CW);

    gl.glVertexPointer(3, GL10.GL_FLOAT, 0, verticesBuffer);
    gl.glTexCoordPointer(2, GL10.GL_FLOAT, 0, textureBuffer);

    gl.glDrawElements(GLES20.GL_TRIANGLES, indices.length,  GLES10.GL_UNSIGNED_SHORT, indicesBuffer); 
```

谢谢！

注意：我使用的是 OpenGL ES 1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T15:19:02.307

你不想混合，因为那会混合颜色。你想要的是*alphatesting*。使用`glEnable(GL_ALPHA_TEST)`和`glAlphaFunc`适当地设置它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T19:59:58.807

我认为你必须改变你的混合功能：

尝试 ：

```
 gl.glBlendFunc(GL10.GL_SRC_ALPHA, GL10.GL_DST_ALPHA); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T15:09:00.260

您应该禁用写入深度缓冲区：

```
glDepthMask(false); 
```

然后先绘制蓝色四边形，然后在其上绘制红色四边形（更靠近相机）。绘制透明几何图形后，您可能希望再次启用写入深度缓冲区`glDepthMask(true)`。

否则蓝色四边形会被红色四边形剔除。

# c++ - 不能为我的数组大小使用变量，但变量被声明为 const int

> ID：15190117
> 
> 赞同：1
> 
> 时间：2013-03-03T19:54:46.430
> 
> 标签：c++, arrays, constants

所以我遇到了一个问题，无法创建一个可变大小的新数组（变量声明为`const int`）

这是代码

```
#include <iostream>
#include <string>

int newArraySize;

int main ()
{
   std::cin >> newArraySize;

   int const fin = newArraySize;

   int deduped[fin]; // Here is the error
} 
```

我得到的错误是

> 错误：表达式必须具有常量值

我尝试将其转换为常量但仍然没有运气（同样的错误）

```
int const fin = const_cast<int const&>(newArraySize);
int deduped[fin]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T20:04:59.527

C++ 有（令人困惑的）*两种*形式的`const`. 你`fin`是一种类型，但*另*一种类型是数组大小所必需的。另一种类型是新调用`constexpr`的，以前是“编译时常量”。你看，所有数组都必须是 C++ 编译器已知的固定大小。所以仅仅创建一个变量是不够的`const`，编译器还必须能够计算出这个*值*。因此，要么`newArraySize`必须是编译时常量表达式，要么更可能的是，您必须使用动态数组，最好由`std::vector`.

```
std::vector<int> deduped(newArraySize); 
```

如果您不能使用 a `vector`，还有其他（更糟糕的）选项：使用and`std::unique_ptr<int[]>`自己管理动态内存，或者制作一个具有编译时常数最大大小（1000）的本地数组，并分别跟踪有多少元素你实际上正在使用。`int* deduped=new[newArraySize]();``delete deduped;`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-03T19:57:37.247

`newArraySize`未声明为 const。这样做，它会工作。

# javascript - Javascript：拼接数组中元素的所有实例

> ID：15190125
> 
> 赞同：1
> 
> 时间：2013-03-03T19:55:33.657
> 
> 标签：javascript, splice

我正在尝试从数组中拼接一些已定义值的所有实例。

```
 filterfunc: function(anyArray){
      for(var i = 0; i <anyArray.length; i++){
        var v = anyArray[i];
          for(var j = 1; j <arguments.length; j++){
           if(v == arguments[j]){
              anyArray.splice(i,1);
            }
          }
        } 
          return anyArray;
      }, 
```

我传递了一个数组以及我不想要的参数。

我遇到的问题是拼接函数并没有拼接值的所有实例。

例如： `filterfunc([1,2,2,2,3,3,3,4,5,6],2,3);` 结果：[1,2,3,3,4,5,6]

我希望它返回 [1,4,5,6]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T20:21:04.357

我不擅长 JavaScript，但删除数组项会减小它们的大小，在这种情况下最好以倒序循环。

```
for(var i = anyArray.length-1; i>0; i--){
   var v = anyArray[i];
   for(var j = 1; j <arguments.length; j++){
      if(v == arguments[j]){
         anyArray.splice(i,1);
      }
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-11T07:16:22.963

我会改为发送第二个数组，例如：`filterfunc([1,2,2,2,3,3,3,4,5,6],[2,3])`并使用`Array.prototype.filter()`：

```
function filterfunc(a, b) {
  return a.filter(function(x) { return b.indexOf(x) == -1; });
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T19:59:32.760

拼接后添加 i-- 否则字符串会缩短，然后您将错过要考虑的值：

[http://jsfiddle.net/6HatJ/1/](http://jsfiddle.net/6HatJ/1/)

```
function filterfunc(anyArray){
  for(var i = 0; i <anyArray.length; i++){
    var v = anyArray[i];
      for(var j = 1; j <arguments.length; j++){
       if(v == arguments[j]){
          anyArray.splice(i,1);
           i--;
        }
      }
    } 
      return anyArray;
  }; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-06T19:45:59.960

一个while循环怎么样。

```
function removeInstanceOfElement(elem, arr)
{
    var index = 0;

    while(index < arr.length)
    {
        if(arr[index] == elem)
        {
            arr.splice(index, 1);
            index = 0;
        }
        else
        {
            ++index;
        }
    }

    return arr;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-03T20:00:02.740

[Underscore](http://underscorejs.org)包含许多有用的辅助函数，而[uniq](http://underscorejs.org/#uniq)可能正是您正在寻找的。

如果您只想要该功能而不是整个库，您只需查看[源代码](http://underscorejs.org/docs/underscore.html#section-47)即可。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-03T20:06:36.657

让我们使用 forEach，同时观察 splice 是一个就地函数。返回数组只是为我们提供了一个我们已经拥有的引用：

```
function remove(arr,elements) {
  elements.forEach(function(e) {
    for(var i=arr.length-1; i>=0; i--) {
      if(arr[i]==e) { arr.splice(i,1); }
    }
  });
}

// test
var a = [1,2,3,3,3,3,4,5,5,6,7,7],
    b  = [3,5,7];
remove(a,b);
a; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-03T20:03:36.807

anyArray.splice(...) 更改数组中元素的数量，从而更改现有元素的索引。每次删除元素时都应将索引减一

```
anyArray.splice(i--,1); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-11-11T12:34:55.880

您可以使用 reduce 通过拼接来遍历数组。这是一个使用带有 reduce 的拼接的简单示例

假设我们有一个数组 a 并且想要删除所有 'd' 的实例

```
a = ['a', 'b', 'd', 'c', 'd'];
a.reduce((prevValReturned, currVal, currIndex, array) =>{
  if (currVal == 'd') a.splice(currIndex, 1);
}, 0); 
```

在控制台中查看数组 a 你会看到它现在是

```
["a", "b", "c"] 
```

然而 splice 在每次调用时都是 n 阶，移动所有连续的元素。如果使用非常大的数据集可能会更好地循环并使用推送

```
a = ['a', 'b', 'd', 'c', 'd'];
b= []
a.reduce((prevValReturned, currVal, currIndex, array) =>{
  if (currVal != 'd') b.push(currVal);
}, 0) 
```

当然，这不会改变数组 a。在您看到的控制台中查看数组 b

```
["a", "b", "c"] 
```

# android - 如何跟踪 APK 安装

> ID：15190126
> 
> 赞同：3
> 
> 时间：2013-03-03T19:55:38.557
> 
> 标签：android, installation, apk, tracking

我正在尝试跟踪 APK 安装。当用户登陆下载页面（而不是商店）时，他来自特定来源。当用户点击下载时，APK 将被安装。安装后，我需要将安装映射到用户在安装之前来自的源。有什么好的方法可以做到这一点吗？

到目前为止我的计划：将下载页面上的用户 IP 和屏幕分辨率保存到数据库中。安装后，将IP和屏幕分辨率传递给服务器，并与数据库中的行进行映射。这是这样做的好方法吗？

希望你们能帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T20:28:10.017

您只需要为此编写一个可以接收`PACKAGE_ADDED`和`PACKAGE_INSTALL`Intent 的 BroadcastReceiver：

**安装BroadcastReceiver.Class**

```
public class InstallBroadcastReceiver extends BroadcastReceiver {

  @Override
  public void onReceive(Context context, Intent intent) {
  String action = intent.getAction();
  if(action.equals(Intent.ACTION_PACKAGE_ADDED)
    ||action.equals(Intent.ACTION_PACKAGE_INSTALL)){
    notifyServerForApplicationInstall(context, intent);

    }
   }

  private void notifyServerForApplicationInstall(Context context,Intent intent){

    //send the data to your server here
  }
} 
```

`AndroidManifest`在文件中注册接收器

```
 <receiver
        android:name=".InstallBroadcastReceiver"
        android:exported="false" 
        <intent-filter>
        <category android:name="android.intent.category.DEFAULT" />
            <action android:name="android.intent.action.PACKAGE_ADDED" />
            <action android:name="android.intent.action.PACKAGE_INSTALL" />
            <data android:scheme="package" />
        </intent-filter>
    </receiver> 
```

**不要忘记在 manifest 中提供此权限：**

```
<uses-permission android:name="android.permission.INSTALL_PACKAGES"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-11T13:52:04.157

我准备了一个 BroadcastReceiver 类：

```
public class newPackageReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        Log.d("DEBUG"," test for application install/uninstall");
    }

} 
```

在主要活动中，我首先注册一个新的接收器对象，然后实例化按钮以进行应用程序安装。

```
public void onCreate(Bundle savedInstanceState) {
...
IntentFilter filter = new IntentFilter();
        filter.addAction(Intent.ACTION_PACKAGE_ADDED);
        filter.addAction(Intent.ACTION_PACKAGE_CHANGED);
        filter.addAction(Intent.ACTION_PACKAGE_DATA_CLEARED);
        filter.addAction(Intent.ACTION_PACKAGE_INSTALL);
        filter.addAction(Intent.ACTION_PACKAGE_REMOVED);
        filter.addAction(Intent.ACTION_PACKAGE_REPLACED);
        filter.addAction(Intent.ACTION_PACKAGE_RESTARTED);

        receiver = new newPackageReceiver();
        registerReceiver(receiver, filter);
        ...

dlButton.setText(R.string.dl_button);
dlButton.setOnClickListener(new AppliDownloadOnClickListener(this ));   

@Override
public void onDestroy(){
     unregisterReceiver(receiver);
     super.onDestroy();
} 
```

# c# - 嵌入脚本解释器时 C# 限制命名空间

> ID：15190128
> 
> 赞同：2
> 
> 时间：2013-03-03T19:55:52.413
> 
> 标签：c#, python, perl, scripting

我正在研究实现一个系统，其中用户能够将脚本传递到我们的服务器并让它们执行。值得庆幸的是，有大量资源可用于将[Python 嵌入 C#](https://stackoverflow.com/search?q=C#%20embedding%20python "将 Python 嵌入 C#")。但是，我最担心的是用户传递的脚本会访问系统功能并导致不良甚至恶意结果。主要示例是：无限制地写入服务器上的文件。

我一直在寻找一种很好的方法来完全限制脚本对我们提供给客户的框架类的访问，但我发现的大多数点击基本上都是[“这是你在 C# 中嵌入脚本解释器的方式”](https://stackoverflow.com/questions/2056275/embedding-perl-interpreter "给你！")，但从未提及任何限制访问等安全问题。诚然，我可以对脚本进行初步检查并搜索任何[列入黑名单的代码](https://stackoverflow.com/questions/3559621/blacklisting-vs-whitelisting-in-forms-input-filtering-and-validation "输入验证")，但总是有机会错过一些东西。

对执行哪种语言没有要求，最好是可以提前编译的。服务器将运行 C# 来响应请求并将一些请求委托给用户创建的代码。我只是很难找到任何限制用户代码访问的任何语言的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T20:07:33.100

我强烈建议您使用[`Lua`](http://www.lua.org/about.html)，它正是为这类事情而设计的。每个函数，无论是用户编写的还是内置的，都是表中的一个条目，因此可以很容易地限制脚本的功能。`io`例如，删除表是防止恶意文件系统更改的一种简单方法。

# ruby - JRuby 和 GEMS_PATH

> ID：15190136
> 
> 赞同：0
> 
> 时间：2013-03-03T19:56:20.093
> 
> 标签：ruby, path, rubygems, jruby

我正在尝试使用基于 Ruby Sinatra 的脚本制作 JAR，因此我需要访问一些 gem。

我尝试像这样安装它们：

```
$ jruby -S gem install sinatra sqlite3 json              
ERROR:  While executing gem ... (Gem::FilePermissionError)
You don't have write permissions into the /usr/share/jruby/lib/ruby/gems/1.8 directory. 
```

他们是一种将它们放在我的主目录中的方法吗？我使用 Fedora 17 i686 和 JRuby 1.6.3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T17:56:39.893

您可以使用以下选项[将 gems 安装](http://docs.rubygems.org/read/chapter/10#page33)在特定目录中：`-i`

```
$ gem install -i /path/to/location sinatra sqlite3 json 
```

然后将`GEM_PATH`变量设置为`/path/to/location/gems`。

# django - django customuser匹配查询不存在

> ID：15190142
> 
> 赞同：-1
> 
> 时间：2013-03-03T19:56:50.630
> 
> 标签：django, django-models, django-forms, django-views

我认为它起源于这个视图，因为它正在被转移到主视图（见下文）：

```
@login_required
def HomePage(request):
    if request.user.get_profile().phone == "":
        return HttpResponseRedirect('/phone')
    else:
        add_list = add.objects.all()
        ctx = {'last_login':request.session.get('social_auth_login_backend')}
        return render_to_response("homepage.html", {'add_list': add_list, 'ctx':ctx}, context_instance=RequestContext(request)) 
```

和模型：

```
class customuser(models.Model):
    last_login = models.DateTimeField(blank=True, null=True)
    is_active = models.BooleanField()
    nickname = models.CharField(max_length=255)
    regdate = models.DateField(auto_now=True)
    phone = models.CharField(max_length=255)
    user = models.OneToOneField(User)
    city = models.ForeignKey(locations, null=True)

    def __str__(self):
        return "%s user " % self.user

    def create_user_profile(sender, instance, created, **kwargs):
        if created:
            profile, created = customuser.objects.get_or_create(user=instance)

    post_save.connect(create_user_profile, sender=User)

    class Admin:
        pass 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T22:24:15.473

我不确定这是否是您出现问题的原因，但是您传递给模板的上下文字典看起来不对。该视图可能应该被重写 -

```
def HomePage(request):
    if request.user.get_profile().phone == "":
        return HttpResponseRedirect('/phone')
    else:
        ctx = {'last_login':request.session.get('social_auth_login_backend'),
               'add_list': add.objects.all()}
        return render(request, "homepage.html", ctx) 
```

# .net - Crystal report v 13.0.2000.0 未加载静态图像 已加载到浏览器

> ID：15190143
> 
> 赞同：2
> 
> 时间：2013-03-03T19:56:59.663
> 
> 标签：.net, image, crystal-reports-2010

我有一个水晶报表，标题中有静态徽标。当我在设计时查看它时，它看起来很不错，但是当我运行应用程序时，在浏览器中一切正常，但是，图像没有显示在那里，当我从浏览器中导出报告时，它再次看起来很好。我正在使用水晶报表 13.0.2000.0、VS 2010、.net 4 我的 web.config 是：

```
<?xml version="1.0" encoding="utf-8"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=152368
  -->
<configuration>
  <configSections>
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
  </configSections>
  <connectionStrings>
    <add name="PMEntitiesContainer" connectionString="metadata=res://*/Context.PMEntities.csdl|res://*/Context.PMEntities.ssdl|res://*/Context.PMEntities.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=(LOCAL);initial catalog=ASLAMS;integrated security=True;multipleactiveresultsets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" />
    <add name="applicationservices" connectionString="data source=dell-pc;initial catalog=aslams;integrated security=true;multipleactiveresultsets=true;" providerName="system.data.sqlclient" />
    <!--<add name="PMEntitiesContainer" connectionString="Metadata=res://*/context.pmentities.csdl|res://*/context.pmentities.ssdl|res://*/context.pmentities.msl;provider=system.data.sqlclient;provider connection string=&quot;data source=qamar-pc\mssqlserver1;initial catalog=aslams;integrated security=true;multipleactiveresultsets=true;app=entityframework&quot;" providerName="system.data.entityclient" />-->
  </connectionStrings>
  <appSettings>
    <add key="webpages:Version" value="1.0.0.0" />
    <add key="ClientValidationEnabled" value="true" />
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />
    <add key="CrystalImageCleaner-AutoStart" value="true" />
    <add key="CrystalImageCleaner-Sleep" value="60000" />
    <add key="CrystalImageCleaner-Age" value="120000" />
    <add key="ChartImageHandler" value="storage=file;timeout=20;dir=c:\TempImageFiles\;" />
    <add key="AttachmentPath" value="~/Attachments" />
    <add key="MvcMailer.BaseURL" value="" />
  </appSettings>
  <system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <modules runAllManagedModulesForAllRequests="true" />
    <handlers>
      <remove name="ChartImageHandler" />
      <!--<add name="ReportViewerWebControlHandler" preCondition="integratedMode" verb="*" path="Reserved.ReportViewerWebControl.axd" type="Microsoft.Reporting.WebForms.HttpHandler, Microsoft.ReportViewer.WebForms, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />-->
      <add name="CrystalImageHandler.aspx" verb="GET" path="CrystalImageHandler.aspx" type="CrystalDecisions.Web.CrystalImageHandler, CrystalDecisions.Web, Version=13.0.2000.0, Culture=neutral, PublicKeyToken=692fbea5521e1304" preCondition="integratedMode" />
      <add name="ChartImageHandler" preCondition="integratedMode" verb="GET,HEAD,POST" path="ChartImg.axd" type="System.Web.UI.DataVisualization.Charting.ChartHttpHandler, System.Web.DataVisualization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
    </handlers>
  </system.webServer>
  <system.web>
    <httpHandlers>
      <!--<add path="Reserved.ReportViewerWebControl.axd" verb="*" type="Microsoft.Reporting.WebForms.HttpHandler, Microsoft.ReportViewer.WebForms, Version=13.0.2000.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" validate="false" />-->
      <add path="CrystalImageHandler.aspx" verb="GET" type="CrystalDecisions.Web.CrystalImageHandler, CrystalDecisions.Web, Version=13.0.2000.0, Culture=neutral, PublicKeyToken=692fbea5521e1304" />
      <add path="ChartImg.axd" verb="GET,HEAD,POST" type="System.Web.UI.DataVisualization.Charting.ChartHttpHandler, System.Web.DataVisualization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" validate="false" />
    </httpHandlers>
    <compilation debug="true" targetFramework="4.0">
      <assemblies>
        <add assembly="System.Web.Abstractions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.WebPages, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
        <add assembly="Microsoft.Build.Framework, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A" />
        <add assembly="System.Management, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A" />
        <add assembly="CrystalDecisions.Web, Version=13.0.2000.0, Culture=neutral, PublicKeyToken=692FBEA5521E1304" />
        <add assembly="CrystalDecisions.Shared, Version=13.0.2000.0, Culture=neutral, PublicKeyToken=692FBEA5521E1304" />
        <add assembly="log4net, Version=1.2.10.0, Culture=neutral, PublicKeyToken=692FBEA5521E1304" />
        <add assembly="CrystalDecisions.ReportSource, Version=13.0.2000.0, Culture=neutral, PublicKeyToken=692FBEA5521E1304" />
        <add assembly="CrystalDecisions.ReportAppServer.Controllers, Version=13.0.2000.0, Culture=neutral, PublicKeyToken=692FBEA5521E1304" />
        <add assembly="CrystalDecisions.ReportAppServer.DataDefModel, Version=13.0.2000.0, Culture=neutral, PublicKeyToken=692FBEA5521E1304" />
        <add assembly="CrystalDecisions.CrystalReports.Engine, Version=13.0.2000.0, Culture=neutral, PublicKeyToken=692FBEA5521E1304" />
        <add assembly="CrystalDecisions.ReportAppServer.ClientDoc, Version=13.0.2000.0, Culture=neutral, PublicKeyToken=692fbea5521e1304" />
        <add assembly="System.Web.DataVisualization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
      </assemblies>
      <buildProviders>
        <add extension=".rpt" type="CrystalDecisions.Web.Compilation.RptBuildProvider, CrystalDecisions.Web, Version=13.0.2000.0, Culture=neutral, PublicKeyToken=692fbea5521e1304"/>
      </buildProviders>
    </compilation>
    <authentication mode="Forms">
      <forms loginUrl="~/Account/LogOn" timeout="2880" />
    </authentication>
    <membership>
      <providers>
        <clear />
        <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="ApplicationServices" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="/" />
      </providers>
    </membership>
    <profile>
      <providers>
        <clear />
        <add name="AspNetSqlProfileProvider" type="System.Web.Profile.SqlProfileProvider" connectionStringName="ApplicationServices" applicationName="/" />
      </providers>
    </profile>
    <roleManager enabled="true">
      <providers>
        <clear />
        <add name="AspNetSqlRoleProvider" type="System.Web.Security.SqlRoleProvider" connectionStringName="ApplicationServices" applicationName="/" />
        <add name="AspNetWindowsTokenRoleProvider" type="System.Web.Security.WindowsTokenRoleProvider" applicationName="/" />
      </providers>
    </roleManager>
    <pages>
      <namespaces>
        <add namespace="System.Web.Helpers" />
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Routing" />
        <add namespace="System.Web.WebPages" />
        <add namespace="MvcSiteMapProvider.Web.Html" />
        <add namespace="MvcPaging" />
      </namespaces>
      <controls>
        <add tagPrefix="asp" namespace="System.Web.UI.DataVisualization.Charting" assembly="System.Web.DataVisualization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
      </controls>
    </pages>
    <siteMap defaultProvider="MvcSiteMapProvider" enabled="true">
      <providers>
        <clear />
        <add name="MvcSiteMapProvider" type="MvcSiteMapProvider.DefaultSiteMapProvider, MvcSiteMapProvider" siteMapFile="~/Mvc.Sitemap" securityTrimmingEnabled="true" cacheDuration="5" enableLocalization="true" scanAssembliesForSiteMapNodes="true" includeAssembliesForScan="" excludeAssembliesForScan="" attributesToIgnore="visibility" nodeKeyGenerator="MvcSiteMapProvider.DefaultNodeKeyGenerator, MvcSiteMapProvider" controllerTypeResolver="MvcSiteMapProvider.DefaultControllerTypeResolver, MvcSiteMapProvider" actionMethodParameterResolver="MvcSiteMapProvider.DefaultActionMethodParameterResolver, MvcSiteMapProvider" aclModule="MvcSiteMapProvider.DefaultAclModule, MvcSiteMapProvider" siteMapNodeUrlResolver="MvcSiteMapProvider.DefaultSiteMapNodeUrlResolver, MvcSiteMapProvider" siteMapNodeVisibilityProvider="MvcSiteMapProvider.DefaultSiteMapNodeVisibilityProvider, MvcSiteMapProvider" siteMapProviderEventHandler="MvcSiteMapProvider.DefaultSiteMapProviderEventHandler, MvcSiteMapProvider" />
      </providers>
    </siteMap>
  </system.web>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="3.0.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework" />
  </entityFramework>
  <system.net>
    <mailSettings>
      <!-- Method#1: Configure smtp server credentials -->
      <!-- Method#1: Configure smtp server credentials -->
      <!--Use 465 port for non ssl mails instead of 587-->
      <smtp from="some-email@gmail.com">
        <network enableSsl="true" host="smtp.gmail.com" port="587" userName="" password="" />
      </smtp>
      <!-- Method#2: Dump emails to a local directory -->

            <!--<smtp from="some-email@gmail.com" deliveryMethod="Network">
                <network host="localhost" port="25" />
            </smtp>-->

      <!-- Method#2: Dump emails to a local directory -->
      <!--
            <smtp from="some-email@gmail.com" deliveryMethod="SpecifiedPickupDirectory">
                <network host="localhost" />
                <specifiedPickupDirectory pickupDirectoryLocation="c:\temp\"/>
            </smtp>
            -->
    </mailSettings>
  </system.net>
</configuration> 
```

# javascript - 带有 Java 脚本的 ISO 持续时间

> ID：15190151
> 
> 赞同：4
> 
> 时间：2013-03-03T19:57:28.680
> 
> 标签：javascript, iso8601

我为这个问题道歉，因为我已经发布了一个类似的问题，但我想知道如何进行以下转换：

```
PT11H9M38.7876754S 
```

我想禁用秒，只显示小时和分钟 11:09

当我有时间显示从 1 到 9 的分钟时，我想在数字前面添加一个 0

Tnx 的建议...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T20:05:44.167

你可以试试这个：

```
var str = 'PT11H9M38.7876754S'
    match = str.match(/(\d*)H(\d*)M/),
    formatted = match[1] + ':' + (!match[2][1] ? 0 + match[2] : match[2]);

console.log(formatted);  // => 11:09 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T20:03:57.230

```
"PT11H9M38.78767545".replace(/PT(\d+)H(\d+)M.*/,function(m,a,b) {return a+":"+(b.length<2?"0":"")+b;}); 
```

单线：p

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T20:15:47.613

由于所有好的**RegExp**东西都在上面，所以第三种解决方案在解析方面有点贵，但你可能正在寻找不同的东西。

您可以使用该`split`函数来解析字符串并提取您需要的部分。

```
var pt="PT11H9M38.7876754S";

function showtime(s){
    var time = s.split('.');
    var hours = time[0].split('T')[1].split('H')[0];
    var minutes = time[0].split('H')[1].split('M')[0];
    return digitize(hours) + ":" + digitize(minutes) 
}

function digitize(i){
    return (i>9) ? i : "0" + i; 
}

alert(showtime(pt)); // 11:09 
```

# java - SoapUI 与 Java Web 服务客户端

> ID：15190155
> 
> 赞同：6
> 
> 时间：2013-03-03T19:57:47.100
> 
> 标签：java, web-services, soap, soapui, webservice-client

如果 SOAP Web 服务通过 SoapUI 运行良好（生成正确的 SOAP 响应），而使用不同的 API/框架在 Java 中构建 Web 服务客户端来调用该 Web 服务面临不同的问题，那么认为该 Web 服务稳定是否安全问题出在消费者方面吗？

我在这里问一个一般性的问题，我已经问了一个可能太长而无法阅读的详细问题。我对这个概念比我的实际实现更感兴趣，所以如果你可以在不参考我较长的帖子的情况下回答我的问题，请这样做。

**更新**：我已经意识到即使 WSDL 符合 WS-I 并且它通过 SoapUI 正常运行，这仍然不足以得出 Web 服务没有损坏的结论。正如@jtahlborn 所说，SoapUI 对损坏的 Web 服务非常宽容，它很容易欺骗您相信您的 Web 服务运行良好，这就是我的情况。

我在 ESB 中构建 SOAP 响应，我的问题是我使用了在 WSDL 中定义但不在模式中定义的命名空间。SoapUI 收到响应并将其显示给我（使用错误的命名空间）；[如果我打开响应验证选项，](https://stackoverflow.com/questions/317017/soapui-validate-response-against-xsd-schema-file)这个问题本可以避免。

还值得一提的是，在我为测试我的 Web 服务而创建的 Java Web 服务客户端中，响应无法加载到输出对象中（当我尝试访问输出对象时出现 NullPointerException 错误），这是由于命名空间问题，一旦我修复命名空间，它就开始正常工作。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-03T21:46:02.600

SoapUI 是一个很棒的产品。然而，使它成为一个伟大产品的原因之一是它*非常*容忍定义不明确的 Web 服务。在我们的产品中，我们处理了*大量*的 Web 服务，并且对我们产品中的一个问题的常见评论是“它在 SoapUI 中运行良好”。我们已经学会了 SoapUI 将容忍各种损坏的 web 服务的艰难方式。因此，总而言之，使用 SoapUI 并*不能*证明您的 Web 服务定义良好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T20:09:05.933

有[WS-I 测试工具](http://www.ws-i.org/deliverables/workinggroup.aspx?wg=testingtools)可以检查您的 Web 服务是否符合[Web 服务互操作性](http://en.wikipedia.org/wiki/Web_Services_Interoperability)配置文件。如果您的服务遵循 WS-I 基本配置文件，并且 SoapUI 可以调用它，那么问题肯定出在消费者方面。

编辑：好吧，或者介于两者之间......

SoapUI 可以检查您的 wsdl 是否符合 WS-I，请参阅[http://www.soapui.org/SOAP-and-WSDL/working-with-wsdls.html](http://www.soapui.org/SOAP-and-WSDL/working-with-wsdls.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T21:11:08.867

消费者（客户端）很可能是错误的......如果客户端是使用 wsdl2java 生成的，那么它很有可能会出现错误......如果您使用一些有效的特殊功能（符合 w3c）然后不要不要感到惊讶...生成的客户端有时会这样做...甚至一些用于生成 java 类的库或用于生成 Web 服务的库也充满了错误...

已知和经常使用的库不支持很多东西......（我不想给出名字——但 wsdl4java 并不完美）..

如果您使用安全性或其他东西......服务器和客户端都有更高的机会出现错误:)

也许如果您告诉我们问题是什么，我们可以帮助您...

# javascript - 悬停时淡出css背景图像

> ID：15190159
> 
> 赞同：0
> 
> 时间：2013-03-03T19:58:05.447
> 
> 标签：javascript, jquery

```
$(function(){
    $('#product .btn-purchase')
            .mouseover(function(){
                $(this).stop().animate($(this).addClass('.btn-purchase-hover'), {duration:500})
            })
            .mouseout(function(){
                $(this).stop().animate($(this).removeClass('.btn-purchase-hover'), {duration:500})
    });
}); 
```

..不知道为什么这不起作用，我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T20:07:59.590

animate 函数主要作用于数字 CSS 属性。

有关详细信息，您可以在这里查看：http: [//api.jquery.com/animate/](http://api.jquery.com/animate/)

编辑：我建议您改用 jQuery 中的 fadeIn / out 方法。例如，你可以在下面做这样的事情。（代码在我的脑海中，假设您在 .btn-purchase 之后拥有带有正确图像的 div ）

```
$(function(){
    $('#product .btn-purchase')
            .mouseover(function(){
                var $this = $(this);
                  $this.fadeOut(function(){ $this.next().fadeIn(); });
            })
            .mouseout(function(){
                  $this.fadeOut(function(){ $this.prev().fadeIn(); });
    });
}); 
```

我还想补充一点，如果您**不**支持 IE，那么使用 CSS 过渡可能会有所帮助。

看看这个答案[，用 jquery 为 addClass/removeClass 设置动画，](https://stackoverflow.com/questions/7302824/animating-addclass-removeclass-with-jquery)因为在我看来它绝对是一种更好/更有效的方法

施瑞亚斯 N

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T20:05:28.760

您需要使用 document.ready 以便您的代码在 DOM 完全加载后运行，如下所示：

```
$(document).ready(function() {
    $('#product .btn-purchase')
            .mouseover(function(){
                $(this).stop().animate($(this).addClass('.btn-purchase-hover'), {duration:500})
            })
            .mouseout(function(){
                $(this).stop().animate($(this).removeClass('.btn-purchase-hover'), {duration:500})
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T20:12:00.180

JQuery animate 用于动画 CSS 属性而不是类。正如[这个](https://stackoverflow.com/questions/7302824/animating-addclass-removeclass-with-jquery)答案所示，更好的方法可能是使用 CSS 过渡（如果您只支持 CSS3）。或者，如果你想为很多东西设置动画，你需要在`.animation()`方法中将它们作为 CSS 属性提供。

希望能解决你的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T20:51:07.233

我知道，这不完全是您问题的答案。但正如 Jan 之前评论的那样，您可能会考虑在 css 中实现这一点。

只是为了让您了解它的外观：

```
 #product .btn-purchase{
     background-color: blue;
     transition: all 1s ease-in;
     -webkit-transition: all 1s ease-in;
     -moz-transition: all 1s ease-in;
 }

 #product .btn-purchase:hover{
     background-color:  red;
 } 
```

# java - 近似 Pi

> ID：15190161
> 
> 赞同：-2
> 
> 时间：2013-03-03T19:58:14.170
> 
> 标签：java, eclipse, decimal, pi

以下是我编写的近似值 103993/33102 的代码。用户输入精度。这里k是用户输入的精度，asd是字符串形式的值

```
int tot = 4687;
int divisor = 33102;
StringBuffer fraction=new StringBuffer();
int tmp = tot;
    for(long i=1;i<=k;i++)
    {
        tmp = tmp*10;
        int res = tmp/divisor;
        fraction.append(res);
        tmp = tmp - res*divisor;
    }
    asd="3."+fraction.toString(); 
```

但是，当用户输入 10^6 的精度时，会花费大量时间。时间限制为 1 秒。帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T20:28:40.283

你的算法看起来不错。 `StringBuffer`是线程安全的，因此非常慢，因为它每次调用`append`. 使用`StringBuilder`，并以您知道自己需要的容量构建它，即`k`. 这可以防止数据的多个副本，因为内部的缓冲区`StringBuilder`被扩展以适应不断增长的字符串。

如果您阅读`StringBuffer`文档，这很清楚：

> 从 JDK 5 开始，该类已经补充了一个为单线程使用而设计的等效类 StringBuilder。通常应优先使用 StringBuilder 类，因为它支持所有相同的操作，但速度更快，因为它不执行同步。

由于您事先知道输出的确切大小，因此您还可以使用字节数组来保存数字。最终转换为长度为 10^6 的字符串和输出仍然很昂贵。当我运行下面的代码时，创建字节数组只需要 0.016 秒，转换为字符串需要 0.06 秒，打印需要超过 1 秒。为了取得进展，您必须对如何在 Java 中进行快速 i/o 进行一些研究。如果您切换到 C 或其他更接近硬件的语言，正常的 i/o 例程可能足够快。

```
public void run() {
    int k = 1000000;
    long start = System.currentTimeMillis();
    int tot = 4687;
    int divisor = 33102;
    byte [] buf = new byte[k];
    int tmp = tot;
    for (int i = 0; i < k; i++) {
        tmp = tmp * 10;
        int res = tmp / divisor;
        buf[i] = (byte)(res + '0');
        tmp = tmp - res * divisor;
    }
    System.out.println((System.currentTimeMillis() - start) * .001);
    String s = new String(buf);
    System.out.println((System.currentTimeMillis() - start) * .001);
    System.out.print("3."); System.out.println(s);
    System.out.println((System.currentTimeMillis() - start) * .001);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T20:41:09.040

预先分配一个很大的字符串中的值，只做一个K个元素的子串，不用每次都计算，瞬间就有结果。

# wordpress - 回显帖子的最高父（祖先）类别

> ID：15190163
> 
> 赞同：1
> 
> 时间：2013-03-03T19:58:17.813
> 
> 标签：wordpress

我的网站具有以下结构

*   水果
    *   苹果
    *   橘子

我有一个名为“Pits”的帖子，Pits 属于 Apples 和 Oranges 两个类别。

在我的主题中，我只想呼应最顶层的父类别“水果”。我尝试了无数代码，但它们似乎都只呼应第一类父级，而不是更高一级。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T23:52:27.017

使用[获取祖先](http://codex.wordpress.org/Function_Reference/get_ancestors)

```
<?php
$id = get_the_ID();
$post_category = get_the_category($id);
$ancestors = get_ancestors($post_category[0]->term_id, 'category');
$root = end($ancestors);
?> 
```

# java - 捕获所有 java.lang.Error 以进行日志记录，并允许它们在堆栈中向上工作

> ID：15190164
> 
> 赞同：1
> 
> 时间：2013-03-03T19:58:18.593
> 
> 标签：java, throwable

**简短版本：** 我如何捕获`java.lang.Error`特定代码部分中的所有抛出以记录它们，并允许它们传播调用堆栈，就好像我根本没有捕获它们一样？

长版...

在一段代码中，我想捕获所有内容`java.lang.Error`以便记录它们。但我也想让`Error`继续在调用堆栈中向上工作，这样行为就好像我根本没有抓住它一样。

此外，我想捕获并记录所有`java.lang.Exception`s，然后让它们也传播调用堆栈。

我试过这个...

```
 } catch (Throwable e) {
        e.printStackTrace();
        throw e;
    } 
```

...但问题是我必须修改调用堆栈中更高的每个方法才能 throw `Throwable`，其中一些方法不是我要修改的（我的方法被第三方框架中的方法调用）。

我会对某种包裹技术感到满意，我会把它放在`Throwable`别的东西里然后扔掉，但我更愿意让任何`java.lang.Error`s 以它们自然的方式向上传播，就好像我根本没有抓住它们一样。

建议？

**编辑：** 有人问“我为什么要这样做？”。我认为这是一个很好的问题，我将澄清：这是我公司使用的框架。它取决于 jar 中包含的其他框架，系统管理员可能忘记包含这些框架。在这种情况下，代码中的某些位置会出现 NoClassDefFoundError。但只有用户在浏览器中看到此错误，在服务器日志中找不到。我想记录它，以便系统管理员可以知道发生了此错误，因为他将有处理它的说明。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T20:04:19.743

你说：“我试过这个……”

```
 } catch (Throwable e) {
        e.printStackTrace();
        throw e;
    } 
```

您应该尝试：

```
 } catch (Error e) {
        e.printStackTrace();
        throw e;
    } 
```

错误不是检查异常。您不必在任何方法签名中声明它们。只要把它放在你最外层的方法中，它就会做你想做的事。

### 编辑：

如果你还想捕获并重新抛出异常，让我们考虑一下。你有三种 Throwable：Error、Exception 和 RuntimeException。不检查 Error 和 RuntimeException，但检查不是 RuntimeException 的 Exception。

所以，你可以对 RuntimeException 做同样的事情，就像我们对 Error 做的一样：

```
 } catch (RuntimeException e) {
        e.printStackTrace();
        throw e;
    } catch (Error e) {
        e.printStackTrace();
        throw e;
    } 
```

而不是 RuntimeException 的 Exception 呢？要理解的是，这些是检查异常，如果它们没有在代码调用的方法中声明，那么*它们将不会被抛出*。所以你不需要捕捉/重新抛出它们。如果某些调用的方法实际上抛出了这样的异常，那么您将不得不捕获/重新抛出它并将您的方法标记为抛出该异常，但*无论如何您都必须这样做，*因为它们来自外部方法正在调用的方法。

# android - android google apis 关闭谷歌地图

> ID：15190165
> 
> 赞同：0
> 
> 时间：2013-03-03T19:58:23.600
> 
> 标签：android, google-maps

我们正在构建一个应用程序，用户能够在地图上叠加大量地理空间数据。google api 对此提供了极好的支持；允许绘制矢量特征以及 tileoverlay 类。

缺点是他们的地图总是底图。这是不利的唯一方法是如果用户说“我不想要那个”或其他什么。我认为这不太可能，但有可能。我很好奇是否有办法关闭谷歌磁贴部分，或者告诉它隐藏它的谷歌磁贴，并告诉它停止尝试从谷歌获取磁贴？我想使用api，但不能显示谷歌地图，可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T07:59:39.463

您是否尝试将地图类型设置为 MAP_TYPE_NONE？

# jquery - 当用户点击跨度标签内的部分时，点击事件不会触发

> ID：15190169
> 
> 赞同：1
> 
> 时间：2013-03-03T19:58:34.220
> 
> 标签：jquery, show, html, onclicklistener

`Click`当用户单击标签内的部分时，打开此元素的事件不会触发`<span>`，并且添加单独的`click`函数`"#dropdown_box1 span"`并不能解决问题。

**更新 -**我创建了一个小提琴，当您尝试单击文本[http://jsfiddle.net/chayacooper/ezxSF/12/时演示该问题](http://jsfiddle.net/chayacooper/ezxSF/12/)

JS

```
$(document).ready(function () {
    $("#dropdown_box1").click(function () {
        $("#select1").show();
    });
    var timeoutID;
    $("#select1").mouseleave(function () {
            timeoutID = setTimeout(function () {
                $("#select1").hide();
        }, 800);
    });
        $("#select1").mouseenter(function () {
        clearTimeout(timeoutID);
    });
    $("#dropdown_container1 ul li a").click(function () {
        var text = $(this).find("input").val();
        var text_edited = text.replace(/_/g, " ");
        var currentHtml = $("#dropdown_box1 span").html();
        $("#dropdown_box1 span").html(currentHtml.replace(currentHtml, ''));
        $("#dropdown_box1 span").append(text_edited);
    });
    }); 
```

HTML

```
<div id="dropdown_box1"><span>Select</span></div>
<div class="dropdown_container" id="dropdown_container1">  
    <ul id="select1"> 
        <!-- Several List Item Elements --> 
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T20:13:32.233

我根据您提供的内容创建[了一个 JSFiddle ，它似乎有效：](http://jsfiddle.net/WRVRz/)

```
<div id="dropdown_box1"><span>Select</span></div>
<div class="dropdown_container" id="dropdown_container1">  
    <ul id="select1"> 
        <li>Item</li>
    </ul>
</div> 
```

您可以修改它以复制问题吗？

编辑：

更改点击处理程序：

```
$("#dropdown_box1").click(function () {
    $("#select1").show();
}); 
```

到：

```
$("#dropdown_box1").click(function (e) {
    e.stopPropagation();
    $("#select1").show();
}); 
```

现在你也可以改变这个：

```
$('html').click(function (e) {
    if (e.target.id == 'dropdown_box1') {
        $("#select1").show();
    } else {
        $("#select1").hide();
    }
}); 
```

对此：

```
$('html').click(function (e) {
     $("#select1").hide();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T20:43:21.843

问题是您的`click`事件正在调用`$("#select1").show();`，但是如果父级被隐藏，这将不会有任何影响。

相反，尝试`$("#dropdown_container1").show();`您可能还需要`$("#select1").show();`，这将取决于该元素是否也被隐藏。

**编辑：**

根据您的 jsFiddle，这对我有用：`$(".dropdown_container ul li ul").show();`

**编辑2：**

我的方法只有在`div`被点击时才有效，而不是`span`. 试试这个：

将下拉单击事件更改为如下所示：

```
$("#dropdown_box1").click(function () {
    $("#select1").show();
}); 
```

给出`span`一个 ID：`<span id="select_text">Select Text</span>`

将处理程序更改为`$('html').click`：

```
$('html').click(function (e) {
    if (e.target.id != 'dropdown_box1' && e.target.id != 'select_text') {
       $("#select1").hide();
    }
}); 
```

这将确保`span`单击 时不会立即隐藏菜单。您之前的处理程序隐藏了`select`if 目标不是，如果它引发了事件`dropdown_box1`，这实际上会`$("#select1").show();`从下拉单击处理程序中否定 。`span`

**编辑3：**

从@JohnS 的评论中建议在之前放置以下内容`$("#select1").show();`：

```
$("#select1>li>ul").hide(); 
```

这可以完成这项工作，但是单击子菜单时仍会应用突出显示。这会在短时间内消失，如果没有上述代码，子菜单也会暂时可见（我认为这是您在评论中描述的问题）。

有趣的是，这在 IE 9 中运行良好，但在 Chrome 中却不行。避免它的方法似乎是简单地让菜单为您处理鼠标点击 - 该`$('html').click`方法在技术上不是必需的。

这样做的问题是单击菜单项和隐藏的东西之间存在延迟。在此延迟期间调用`$("#select1").hide();`似乎是问题的原因。

要解决此问题，请保持`$("#dropdown_box1").click`编辑 2 中的原样，删除`$('html').click`处理程序，并将其更改`$("#select1").mouseleave`为：

```
$("#select1").mouseleave(function () {
    $("#select1").hide();
}); 
```

这样做应该可以避免菜单挂起的问题，尽管这样做的视觉效果是菜单会更慢地关闭。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T22:25:06.940

乔德斯的回答很好。我很好奇是否有办法做到这一点而不必更改`'#dropdown_container1'`元素的点击处理程序。

`<html>`您可以将元素的单击处理程序更改为：

```
$('html').click(function (e) {
    if ($(e.target).is('#dropdown_box1') || ($('#dropdown_box1').has(e.target).length > 0))     {
        $("#select1").show();
    } else {
        $("#select1").hide();
    }
}); 
```

你真的不需要`.show()`在这里做。这可以缩短为：

```
$('html').click(function (e) {
    if (!$(e.target).is('#dropdown_box1') && ($('#dropdown_box1').has(e.target).length == 0))     {
        $("#select1").hide();
    }
}); 
```

太糟糕了 jQuery 没有一种方法可以让它更具可读性，比如`isDescendantOf()`or `hasDecendant()`。

# java - 不推荐使用方法意味着什么，如何解决由此产生的错误？

> ID：15190170
> 
> 赞同：6
> 
> 时间：2013-03-03T19:58:59.903
> 
> 标签：java, android, android-wallpaper

为什么我会在包含 的行上收到弃用错误，`setWallpaper(bmp)`我该如何解决？

> 错误：不推荐使用 Context 类型的方法 setWallpaper(Bitmap)

```
switch(v.getId()){
 case R.id.bSetWallpaper:
try {
            getApplicationContext().setWallpaper(bmp);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        break; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-03T20:02:49.857

当某些东西被弃用时，这意味着开发人员已经创造了一种更好的方式来做这件事，并且你不应该再使用旧的或弃用的方式。不推荐使用的东西将来会被删除。

在您的情况下，如果您有图像路径，则设置壁纸的正确方法如下：

```
is = new FileInputStream(new File(imagePath));
bis = new BufferedInputStream(is);
Bitmap bitmap = BitmapFactory.decodeStream(bis);
Bitmap useThisBitmap = Bitmap.createScaledBitmap(
    bitmap, parent.getWidth(), parent.getHeight(), true);
bitmap.recycle();
if(imagePath!=null){
    System.out.println("Hi I am try to open Bit map");
    wallpaperManager = WallpaperManager.getInstance(this);
    wallpaperDrawable = wallpaperManager.getDrawable();
    wallpaperManager.setBitmap(useThisBitmap); 
```

如果您有图像 URI，请使用以下内容：

```
wallpaperManager = WallpaperManager.getInstance(this);
wallpaperDrawable = wallpaperManager.getDrawable();
mImageView.setImageURI(imagepath); 
```

从 Maidul 对[这个](https://stackoverflow.com/questions/2205092/android-how-to-set-the-wallpaper-image)问题的回答。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-03T20:02:33.927

“已弃用”意味着您正在使用的特定代码不再是实现该功能的推荐方法。您应该查看给定方法的文档，它很可能会提供指向推荐方法的链接。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-18T01:42:50.720

```
WallpaperManager myWallpaperManager=WallpaperManager.getInstance(getApplicationContext());

try {
    myWallpaperManager.setBitmap(bmp);
}
catch (IOException e) {
    Toast.makeText(YourActivity.this, 
                   "Ooops, couldn't set the wallpaper", 
                   Toast.LENGTH_LONG).show();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-03T20:04:42.237

您应该使用[WallpaperManager.setStream()](http://developer.android.com/reference/android/app/WallpaperManager.html#setStream%28java.io.InputStream%29)而不是 Context.setWallpaper()，因为它已被弃用，并且可能会在新的 API 版本中被删除。

# javascript - Mongoose / JavaScript - 保存错误 - 未定义的对象

> ID：15190171
> 
> 赞同：0
> 
> 时间：2013-03-03T19:59:00.803
> 
> 标签：javascript, mongoose

我正在尝试保存`match`between 2 `teams`，我正在通过`teams`下拉列表传递 2 。

当我使用INSIDE方法将其`util.log`输出到控制台时，它成功运行，这是输出：`homeTeam``Team.findByKey`

```
3 Mar 19:52:33 - { name: 'Liverpool',
  _id: 51312074bb176ba624000007,
  __v: 0,
  key: 1362174068837 } 
```

但是，一旦我尝试在此方法之外执行此操作，我就会得到以下输出，这意味着当我尝试将其保存为比赛时，主队显示为只是`undefined`而不是 id `hometeam`：

```
3 Mar 19:54:09 - [object Object] 
```

我的问题是，我最终希望在一次扑救中将主队和客队都救到同一场比赛中。保存匹配的代码在`Team.findByKey`方法中有效，如下所示：

```
 app.get('/save/matchTest', function(req, res) {
    var key = 1362174006191; // Man Utd 51312036bb176ba624000001
    Team.findByKey(key, function(err, team) {
      util.log(team);
      if(err) {
        util.log("Error occured");
      }
      if(!team) { 
        util.log("The team does not exist");
      }
      var match = new Match({
        hometeam: team._id
      });
      match.save(function(err) {
        if(err) {
          util.log('Error while saving Match: ' + util.inspect(err));
          res.send("An error occured whilst saving the match");
        } else {
          res.send("Saved the match");
        }
      });
    });
  }); 
```

但我想做的是能够用以下内容保存比赛

```
var match = new Match({
    hometeam: homeTeam._id,
    awayteam: awayTeam._id
}); 
```

有没有人有任何想法？

以下是相关代码：

JavaScript

```
submitMatch = function(){
    var homeId = $("#homeTeamList").val();
    var awayId = $("#awayTeamList").val();

    //alert("home: " + homeId + " away: " + awayId);

    // Frontend sends the data
    var matchForm = {
        homeKey : $('#homeTeamList').val(),
        awayKey : $('#awayTeamList').val()
    };

    // Basic validation
    $.post('/save/match', {'matchForm' : matchForm}, function(response) {
        console.log(response);
    });

}; 
```

/保存/匹配

```
 app.post('/save/match', function(req, res) {
    util.log('Serving request for url [GET] ' + req.route.path);
    // Output to console to test what is being passed to Save Match
    // Entire body passed to console
    //console.log('body: ', req.body);
    // Entire matchForm from body
    //console.log('matchForm: ', req.body.matchForm);
    // Home Key from matchForm
    //console.log('homeKey: ', req.body.matchForm.homeKey);
    // Away Key from matchForm
    //console.log('awayKey: ', req.body.matchForm.awayKey);

    // Get data from match Form
    var matchForm = req.body.matchForm;

    // Check if a match with 2 teams has been submitted
    if(matchForm.homeKey === '' || matchForm.homeKey === undefined ||
        matchForm.awayKey === '' || matchForm.awayKey === undefined){
      // Not a valid match
      util.log('Not valid match');
    } else {
      var homeId = matchForm.homeKey;
      var awayId = matchForm.awayKey;

      var homeTeam = Team.findByKey(homeId, function(err, homeTeam) {
        util.log(homeTeam);
        if(err) {
          util.log("Error occured");
        }
        if(!homeTeam) { 
          util.log("The home team does not exist");
        }
      });

      var match = new Match({
        hometeam: homeTeam._id
      });

      //util.log(match);

    }
  }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T14:18:29.987

在`/save/match`你使用构造函数`homeTeam`中的值`Match`之前，它是由回调设置的。您需要在`Match`内部创建主队和客队`findByKey`回调，如下所示：

```
Team.findByKey(homeId, function(err, homeTeam) {
  util.log(homeTeam);
  if(err) {
    return util.log("Error occured");
  }
  if(!homeTeam) { 
    return util.log("The home team does not exist");
  }

  Team.findByKey(awayId, function(err, awayTeam) {
    util.log(awayTeam);
    if(err) {
      return util.log("Error occured");
    }
    if(!awayTeam) { 
      return util.log("The away team does not exist");
    }

    var match = new Match({
      hometeam: homeTeam._id,
      awayteam: awayTeam._id
    });
  });
}); 
```

要在保持代码井井有条的同时并行查找主队和客队，您需要考虑使用[async](https://github.com/caolan/async)之类的流控制库。

# c++ - ELF 文件中的解析函数如何知道符号所在的库？

> ID：15190185
> 
> 赞同：0
> 
> 时间：2013-03-03T20:00:24.447
> 
> 标签：c++, debugging, elf

在符号表中只有符号名称的偏移量，但没有关于该符号属于哪个库的信息。

```
    类型定义结构{
        Elf32_Word st_name;
        Elf32_Addr st_value;
        Elf32_Word st_size;
        无符号字符 st_info；/* 绑定，类型：ELF_32_ST_... */
        无符号字符 st_other；
        Elf32_Half st_shndx; /* SHN_... */
    } Elf32_Sym;

```

在运行时调用解析函数时，会将符号表的偏移量和另一个 DWORD 传递给它。该 DWORD 是否与符号的库有关？如果不是，那么解析函数如何找到符号的库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T01:55:41.590

> 解析函数如何找到符号的库

通过线性搜索加载到进程中的库（由加载器维护）。

第一个定义给定函数“wins”的库。这允许例如`libtcmalloc.so`定义`malloc`,`calloc`等并覆盖这些符号（您可以使用`LD_PRELOAD`, 或链接`libtcmalloc`before `libc`，因此之前会`libtcmalloc`出现在加载器列表`libc`中）。

搜索在库的数量上是线性的，但`O(1)`在每个库内部，因为每个库都有其符号的哈希表（在`.hash`or`.gnu_hash`部分）。

# c# - 用户的 Azure 登录失败？System.Data.SqlClient.SqlException

> ID：15190187
> 
> 赞同：5
> 
> 时间：2013-03-03T20:00:50.243
> 
> 标签：c#, model-view-controller, azure

创建 Azure 数据库和 Azure 站点。使用 Azure 站点提供的连接字符串并填写密码。当我尝试通过应用程序访问数据库时，返回错误

> 用户 'stefan' 登录失败。System.Data.SqlClient.SqlException：用户“stefan”登录失败此会话已分配跟踪 ID“6ee9a27b-4be7-494b-aadd-7b05a8a3bddb”。当您需要帮助时，将此跟踪 ID 提供给客户支持。

如果您访问[http://clickpc.azurewebsites.net/](http://clickpc.azurewebsites.net/) 可以看到您自己的错误。

我可能认为在连接节点的 IP 的 sql IP 配置中拒绝访问

我允许从 Azure 连接到数据库，但似乎仍然拒绝访问

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T00:36:13.793

此错误表明您的用户名/密码不正确。如果这是由于防火墙问题，您将收到一条错误消息，说明如下：

> 防火墙检查失败。无法打开登录请求的服务器“XXXXXXXXX”。不允许 IP 地址为“XXXXXXXXX”的客户端访问服务器。要启用访问，请使用 SQL Azure 门户或在主数据库上运行 sp_set_firewall_rule 来为此 IP 地址或地址范围创建防火墙规则。此更改最多可能需要五分钟才能生效。

通常，SQL Azure 用户名是部分用户名和部分服务器名称，如下所示：stefan@xxxxxxx

请确保您指定了正确的 SQL Azure 用户名和密码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-18T17:41:10.147

不幸的是，在 SQL Azure 世界中管理登录很困难。例如，SQL Server Management Studio 不允许您通过 GUI 添加新的登录名和用户。必须使用 T-SQL 来完成。

首先，当您第一次使用 Azure 门户创建数据库时，您是否使用 Stefan 作为登录名？这很重要，因为 Stefan 成为了 dbo 数据库角色（管理员）。否则，您需要创建新用户并分配权限。

其次，在 Azure 门户中，找到您的数据库并单击管理。尝试使用 Stefan 通过该网页登录。如果这不起作用，那么您的用户名或密码错误。如果它确实有效，请打开 Management Studio 并使用 Stefan 连接到您的 SQL Azure 数据库。然后使用此 Microsoft 指南进行故障排除：[在 Windows Azure SQL 数据库中管理数据库和登录](http://msdn.microsoft.com/en-us/library/windowsazure/ee336235.aspx)

# parsing - 如何解决三元表达式（a？b：c）和“也许”表达式（a？）之间的LR（1）语法歧义？

> ID：15190188
> 
> 赞同：4
> 
> 时间：2013-03-03T20:01:22.410
> 
> 标签：parsing, lr, shift-reduce-conflict, glr

我创建了一个语法，其精简版本如下所示：

```
(0) exp1: ternary;
(1) exp1: exp2;
(2) ternary: exp2 "?" exp1 ":" exp1;
(3) exp2: exp2 "+" exp3;
(4) exp2: exp3;
(5) exp3: maybe;
(6) exp3: "1";
(7) maybe: exp3 "?"; 
```

我相信这种语言是明确的，应该是 LR 可解析的。（如果我错了，请告诉我！）

但是，当我尝试为此语法生成 LR(1) 解析器时，我会遇到移位/归约冲突，因为当解析器看到`exp3`前瞻`?`时，它不知道是移位还是归约：

```
Conflicts in state 3:
    Reduction using rule 4: exp2:  exp3 · | "?"
    Shift to state 6

Conflicts in state 9:
    Reduction using rule 3: exp2:  exp2 "+" exp3 · | "?"
    Shift to state 6

Conflicts in state 13:
    Reduction using rule 4: exp2:  exp3 · | "?"
    Shift to state 16

Conflicts in state 20:
    Reduction using rule 4: exp2:  exp3 · | "?"
    Shift to state 23

Conflicts in state 25:
    Reduction using rule 3: exp2:  exp2 "+" exp3 · | "?"
    Shift to state 23

Conflicts in state 28:
    Reduction using rule 3: exp2:  exp2 "+" exp3 · | "?"
    Shift to state 16 
```

### 有没有一种合理的方法可以使这种语言 LR(1) 可解析（没有冲突）？

还是 GLR（或者可能是 LR(2)？）对于这样的语言，我唯一现实的选择是什么？
（或者我认为语言一开始是明确的，我什至是错误的？）

* * *

作为参考，我生成的模棱两可的状态机如下（其中 ♦ 是 EOF）：

```
State 0:
    exp1:  · ternary | {♦} → shift 1
    ternary:  · exp2 "?" exp1 ":" exp1 | {♦} → shift 2
    exp2:  · exp2 "+" exp3 | {"?", "+"} → shift 2
    exp2:  · exp3 | {"?", "+"} → shift 3
    exp3:  · maybe | {"?", "+"} → shift 4
    exp3:  · "1" | {"?", "+"} → shift 5
    maybe:  · exp3 "?" | {"?", "+"} → shift 3

State 1:
    exp1:  ternary · | {♦} → reduce 0

State 2:
    ternary:  exp2 · "?" exp1 ":" exp1 | {♦} → shift 7
    exp2:  exp2 · "+" exp3 | {"?", "+"} → shift 8

State 3:
    exp2:  exp3 · | {"+"} → reduce 4
    exp2:  exp3 · | {"?"} → reduce 4 shift 6
    maybe:  exp3 · "?" | {"?", "+"} → reduce 4 shift 6

State 4:
    exp3:  maybe · | {"?", "+"} → reduce 5

State 5:
    exp3:  "1" · | {"?", "+"} → reduce 6

State 6:
    maybe:  exp3 "?" · | {"?", "+"} → reduce 7

State 7:
    exp1:  · ternary | {":"} → shift 10
    exp1:  · exp2 | {":"} → shift 11
    ternary:  · exp2 "?" exp1 ":" exp1 | {":"} → shift 11
    ternary:  exp2 "?" · exp1 ":" exp1 | {♦} → shift 12
    exp2:  · exp2 "+" exp3 | {"?", ":", "+"} → shift 11
    exp2:  · exp3 | {"?", ":", "+"} → shift 13
    exp3:  · maybe | {"?", ":", "+"} → shift 14
    exp3:  · "1" | {"?", ":", "+"} → shift 15
    maybe:  · exp3 "?" | {"?", ":", "+"} → shift 13

State 8:
    exp2:  exp2 "+" · exp3 | {"?", "+"} → shift 9
    exp3:  · maybe | {"?", "+"} → shift 4
    exp3:  · "1" | {"?", "+"} → shift 5
    maybe:  · exp3 "?" | {"?", "+"} → shift 9

State 9:
    exp2:  exp2 "+" exp3 · | {"+"} → reduce 3
    exp2:  exp2 "+" exp3 · | {"?"} → reduce 3 shift 6
    maybe:  exp3 · "?" | {"?", "+"} → reduce 3 shift 6

State 10:
    exp1:  ternary · | {":"} → reduce 0

State 11:
    exp1:  exp2 · | {":"} → reduce 1
    ternary:  exp2 · "?" exp1 ":" exp1 | {":"} → shift 26
    exp2:  exp2 · "+" exp3 | {"?", ":", "+"} → shift 27

State 12:
    ternary:  exp2 "?" exp1 · ":" exp1 | {♦} → shift 17

State 13:
    exp2:  exp3 · | {":", "+"} → reduce 4
    exp2:  exp3 · | {"?"} → reduce 4 shift 16
    maybe:  exp3 · "?" | {"?", ":", "+"} → reduce 4 shift 16

State 14:
    exp3:  maybe · | {"?", ":", "+"} → reduce 5

State 15:
    exp3:  "1" · | {"?", ":", "+"} → reduce 6

State 16:
    maybe:  exp3 "?" · | {"?", ":", "+"} → reduce 7

State 17:
    exp1:  · ternary | {♦} → shift 1
    exp1:  · exp2 | {♦} → shift 18
    ternary:  · exp2 "?" exp1 ":" exp1 | {♦} → shift 18
    ternary:  exp2 "?" exp1 ":" · exp1 | {♦} → shift 19
    exp2:  · exp2 "+" exp3 | {♦, "?", "+"} → shift 18
    exp2:  · exp3 | {♦, "?", "+"} → shift 20
    exp3:  · maybe | {♦, "?", "+"} → shift 21
    exp3:  · "1" | {♦, "?", "+"} → shift 22
    maybe:  · exp3 "?" | {♦, "?", "+"} → shift 20

State 18:
    exp1:  exp2 · | {♦} → reduce 1
    ternary:  exp2 · "?" exp1 ":" exp1 | {♦} → shift 7
    exp2:  exp2 · "+" exp3 | {♦, "?", "+"} → shift 24

State 19:
    ternary:  exp2 "?" exp1 ":" exp1 · | {♦} → reduce 2

State 20:
    exp2:  exp3 · | {♦, "+"} → reduce 4
    exp2:  exp3 · | {"?"} → reduce 4 shift 23
    maybe:  exp3 · "?" | {♦, "?", "+"} → reduce 4 shift 23

State 21:
    exp3:  maybe · | {♦, "?", "+"} → reduce 5

State 22:
    exp3:  "1" · | {♦, "?", "+"} → reduce 6

State 23:
    maybe:  exp3 "?" · | {♦, "?", "+"} → reduce 7

State 24:
    exp2:  exp2 "+" · exp3 | {♦, "?", "+"} → shift 25
    exp3:  · maybe | {♦, "?", "+"} → shift 21
    exp3:  · "1" | {♦, "?", "+"} → shift 22
    maybe:  · exp3 "?" | {♦, "?", "+"} → shift 25

State 25:
    exp2:  exp2 "+" exp3 · | {♦, "+"} → reduce 3
    exp2:  exp2 "+" exp3 · | {"?"} → reduce 3 shift 23
    maybe:  exp3 · "?" | {♦, "?", "+"} → reduce 3 shift 23

State 26:
    exp1:  · ternary | {":"} → shift 10
    exp1:  · exp2 | {":"} → shift 11
    ternary:  · exp2 "?" exp1 ":" exp1 | {":"} → shift 11
    ternary:  exp2 "?" · exp1 ":" exp1 | {":"} → shift 29
    exp2:  · exp2 "+" exp3 | {"?", ":", "+"} → shift 11
    exp2:  · exp3 | {"?", ":", "+"} → shift 13
    exp3:  · maybe | {"?", ":", "+"} → shift 14
    exp3:  · "1" | {"?", ":", "+"} → shift 15
    maybe:  · exp3 "?" | {"?", ":", "+"} → shift 13

State 27:
    exp2:  exp2 "+" · exp3 | {"?", ":", "+"} → shift 28
    exp3:  · maybe | {"?", ":", "+"} → shift 14
    exp3:  · "1" | {"?", ":", "+"} → shift 15
    maybe:  · exp3 "?" | {"?", ":", "+"} → shift 28

State 28:
    exp2:  exp2 "+" exp3 · | {":", "+"} → reduce 3
    exp2:  exp2 "+" exp3 · | {"?"} → reduce 3 shift 16
    maybe:  exp3 · "?" | {"?", ":", "+"} → reduce 3 shift 16

State 29:
    ternary:  exp2 "?" exp1 · ":" exp1 | {":"} → shift 30

State 30:
    exp1:  · ternary | {":"} → shift 10
    exp1:  · exp2 | {":"} → shift 11
    ternary:  · exp2 "?" exp1 ":" exp1 | {":"} → shift 11
    ternary:  exp2 "?" exp1 ":" · exp1 | {":"} → shift 31
    exp2:  · exp2 "+" exp3 | {"?", ":", "+"} → shift 11
    exp2:  · exp3 | {"?", ":", "+"} → shift 13
    exp3:  · maybe | {"?", ":", "+"} → shift 14
    exp3:  · "1" | {"?", ":", "+"} → shift 15
    maybe:  · exp3 "?" | {"?", ":", "+"} → shift 13

State 31:
    ternary:  exp2 "?" exp1 ":" exp1 · | {":"} → reduce 2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T20:27:58.337

我认为这可能是一个优先问题。当解析器查看以下内容时，您会发生冲突：

```
 a + b ? c : d 
```

在解析器已经看到`a + b ?`和正在查看的时候`c`，它无法决定是否需要

1.  Reduce `b?`，以便它解析表单的表达式，`a + (b?)`然后从那里继续，或者

2.  Reduce `a + b`，以便它解析表单的表达式`(a + b) ? c : d`

我认为这里的挑战是，在一种情况下，`?`优先级非常低（用作三元运算符时），而在另一种情况下，它具有非常高的优先级（用作一元运算符时）。但是，如果您确实以这种方式分配了优先级，我认为解析器可能能够消除这些情况的歧义。

希望这可以帮助！

# c# - 使用回调将多个任务排队

> ID：15190192
> 
> 赞同：0
> 
> 时间：2013-03-03T20:01:56.047
> 
> 标签：c#, multithreading, task-parallel-library, threadpool

假设我们有一些方法可以做一些大工作。

最初我们不知道有多少方法（可以是 1 也可以是 10 ）。

在代码中，这看起来像这样：

```
public interface IWorker
{
    void DoWork(DataContainer data);
} 
```

还有几个实现这个接口的类。然后我们有实例列表。

```
List<IWorker> workers = new List<IWorker>(); 
```

我想异步运行这些方法。另外，当所有这些都被执行时，我想要一些回调。

```
public void Callback()
{
    Console.WriteLine("everything done");
} 
```

有没有办法在不编写自定义包装器的情况下做到这一点？使用线程池、任务、并行？

据我所知，并行阻塞线程直到任务完成，所以这不是一个优先行为。

正如我所见，创建任务时应该有没有参数的方法，所以这也不好。

在 ThreadPool 中可以使用方法 QueueUserWorkItem，但使用这种方法我不会得到一个“完全完成”回调。

当然，我可以制作自己的包装器，该包装器将使用 ThreadPool 实现所需的功能，但目标是在不编写此类的情况下实现这一点。

有人可以帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T20:05:58.410

您正在寻找 TPL 和`Task`课程。

`Task`为每个操作创建一个，然后调用`Task.WhenAll`获取一个聚合任务

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T20:18:44.117

您正在寻找 Task.WhenAll。创建一堆任务来做你想做的事，然后等待所有任务并继续你的回调。我拆分了 DoWork 方法的异步版本 - 如果您总是要异步调用它，则不一定需要这样做。

```
public interface IWorker
{
    Task DoWorkAsync(string data);
    void DoWork(string data);
}

public class Worker : IWorker
{
    public Task DoWorkAsync(string data)
    {
        return Task.Run(() => DoWork(data));
    }

    public void DoWork(string data)
    {
        Console.WriteLine(data);
        Thread.Sleep(100);
    }
}

public class Runner
{
    public void Callback()
    {
        Console.WriteLine("Everything done");
    }

    public void Run()
    {
        var workers = new List<IWorker> {new Worker(), new Worker(), new Worker()};
        var tasks = workers.Select(t => t.DoWorkAsync("some data"));

        Task.WhenAll(tasks).ContinueWith(task => Callback());

        Console.WriteLine("Waiting");
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T20:14:48.363

[听起来像是CountdownEvent](http://msdn.microsoft.com/en-us/library/system.threading.countdownevent_methods.aspx)类的主要候选人：

```
List<IWorker> workers = new List<IWorker>();
using (CountdownEvent e = new CountdownEvent(workers.Count))
{
    foreach (IWorker worker in workers)
    {
        // Dynamically increment signal count.
        e.AddCount();
        // run work itself on another thread
        ThreadPool.QueueUserWorkItem(delegate(object state)
        {
            try
            {
                ((IWorker)state[0]).DoWork((DataContainer)state[1]);
            }
            finally
            {
                e.Signal();
            }
        },
        // pass required parameters for block of work
        new object[] { worker, dataForWorker });
    }

    // wait for all workers to finish
    e.Wait();
    // run callback code
} 
```

# php - 数据库的 CodeIgniter 问题

> ID：15190196
> 
> 赞同：0
> 
> 时间：2013-03-03T20:02:14.190
> 
> 标签：php, database, codeigniter

我正在关注 CodeIgniter 的初学者教程，但由于数据库连接错误，我无法正确加载视图。我一步一步地遵循了一切，并再次经历了几次，但无法修复它。有人可以帮助我，或者至少解释一下为什么会这样吗？

这是我目前设置的数据库配置：

```
$active_group = 'default';
$active_record = TRUE;

$db['default']['hostname'] = 'localhost';
$db['default']['username'] = 'root';
$db['default']['password'] = 'root';
$db['default']['database'] = 'helloworld';
$db['default']['dbdriver'] = 'mysql';
$db['default']['dbprefix'] = '';
$db['default']['pconnect'] = TRUE;
$db['default']['db_debug'] = TRUE;
$db['default']['cache_on'] = FALSE;
$db['default']['cachedir'] = '';
$db['default']['char_set'] = 'utf8';
$db['default']['dbcollat'] = 'utf8_general_ci';
$db['default']['swap_pre'] = '';
$db['default']['autoinit'] = TRUE;
$db['default']['stricton'] = FALSE; 
```

我还使用以下代码自动加载了数据库库：

```
$autoload['libraries'] = array('database'); 
```

我还想指出我正在使用`PHP version 5.3.13`. 我不确定 PHP 的版本是否会影响我的代码，所以我还是添加了它。

我得到的确切错误是：

```
A Database Error Occurred

Unable to connect to your database server using the provided settings.

Filename: C:\wamp\www\CI\system\database\DB_driver.php

Line Number: 124 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T09:58:42.273

```
$active_group = 'default';
$active_record = TRUE;

$db['default']['hostname'] = 'localhost';
$db['default']['username'] = 'root'; // default username if has not been set in phpmyadmin
$db['default']['password'] = ''; //leave it blank if has not been set in phpmyadmin
$db['default']['database'] = 'helloworld'; // this is your database name
$db['default']['dbdriver'] = 'mysql';
$db['default']['dbprefix'] = '';
$db['default']['pconnect'] = TRUE;
$db['default']['db_debug'] = TRUE;
$db['default']['cache_on'] = FALSE;
$db['default']['cachedir'] = '';
$db['default']['char_set'] = 'utf8';
$db['default']['dbcollat'] = 'utf8_general_ci';
$db['default']['swap_pre'] = '';
$db['default']['autoinit'] = TRUE;
$db['default']['stricton'] = FALSE; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-08T12:44:17.897

您可能已尝试将项目导入工作空间。而是尝试通过项目资源管理器遍历到项目文件夹

# performance - 这两个循环之间的运行时是否存在差异，是否存在异常？

> ID：15190201
> 
> 赞同：4
> 
> 时间：2013-03-03T20:02:43.880
> 
> 标签：performance, algorithm, loops, optimization, runtime

考虑以下两个循环，其中 N = 10^9 或大到足以注意到效率低下的东西。

```
Loop x = 1 to N
    total += A(x)
    total += B(x) 
```

或者

```
Loop x = 1 to N
    total += A(x)

Loop x=1 to N
    total += B(x) 
```

每个函数采用 x，执行一些任意算术计算（例如 x^2 和 3x^3 或其他东西，无关紧要），并返回一个值。

整体运行时间是否会有任何差异，如果有的话，什么时候不会出现这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T20:08:57.843

每个循环需要四个动作：

1.  准备（每个循环一次）
2.  检查停止条件（每次迭代一次）
3.  执行循环体（每次迭代一次）
4.  调整用于确定迭代是否应继续的值（每次迭代一次）

当您有一个循环时，您只需为第 1、2 和 4 项“支付”一次；当你有两个循环时，你为所有东西“支付”了两次。

假设调用这两个函数的顺序并不重要，那么在大多数常见情况下差异不会很明显。但是，在非常罕见的非常紧凑的循环情况下，单个循环将占用更少的 CPU 资源。实际上，[*循环展开*](http://en.wikipedia.org/wiki/Loop_unwinding)的一种常用技术依赖于通过多次重复主体来减少循环期间每次迭代检查和设置操作在整个 CPU 负载中的份额，并通过相应的因子减少迭代次数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T20:11:39.657

有几件事需要考虑。`x`一个是您在第二个版本中为循环本身（条件检查、递增等）执行了两倍的指令。如果你的功能真的很微不足道，那可能是一个很大的成本。

然而，在更现实的情况下，缓存性能、寄存器共享和类似的事情会产生更大的影响。例如，如果两个函数都需要使用大量寄存器，您可能会发现第二个版本的性能比第一个版本差，因为编译器需要将更多的寄存器溢出到内存中，因为它每个循环都执行一次。或者，如果`A`两者`B`都访问相同的内存，则第二个版本可能比第二个版本更快，因为所有`B`' 的访问都将是第二个版本中的缓存命中，但在第一个版本中未命中。

所有这些都是高度特定于程序和平台的。如果您要优化某些特定程序，则需要对其进行基准测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T20:06:15.773

主要区别在于第一个测试 X 与 N、N 次，而第二个测试 X 与 N、2N 次。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T20:07:03.220

循环本身有一点开销。

在每次迭代中，您至少需要执行 2 次操作，增加计数器，然后将其与最终值进行比较。

所以你正在做 2*10^9 更多的操作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-03T20:12:06.463

如果两个函数都使用了大量内存，例如他们创建了一些大数组，并在每次迭代中递归地修改它，那么由于内存缓存等原因，第一个循环可能会更慢。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-04T19:44:31.453

有很多潜在的因素需要考虑；

1）迭代次数——循环设置是否支配任务 2）循环比较惩罚与任务复杂性

```
for (i=0;i<2;i++) a[i]=b[i]; 
```

3) 功能的一般复杂性 - 有两个复杂功能，其中一个可能会用完寄存器

4）注册依赖或本质上是任务序列 - 两个独立的任务混合与其他循环的结果取决于第一个

5) 循环是否可以完全在预取队列上执行——不需要缓存访问——混合在第二个任务中可能会破坏吞吐量

6）有什么样的缓存命中模式

# algorithm - 具有两个给定点和成本函数的抛物线拟合

> ID：15190203
> 
> 赞同：0
> 
> 时间：2013-03-03T20:03:04.380
> 
> 标签：algorithm, math, curve-fitting

假设有一条抛物线`Y = aX^2 + bX + c`，它可能会旋转如下：

```
X = x.sin(phi) + y.cos(phi)
Y = x.cos(phi) - y.sin(phi)
phi = rotation angle 
```

我们希望将其安装在边框上（例如，眼睑的内边框，下图）。问题是我们如何在每次迭代中改变抛物线，使其最小化成本函数。我们知道抛物线可以有不同的旋转，并且它的原点在搜索区域中可能会有所不同。请注意，拟合抛物线应通过两个给定点（例如下图中的白色方块）。因此，在每次迭代中，我们可以通过两个给定点和原点（三个方程和三个变量）计算 和`a`。问题是我们如何在最小迭代中达到目标（不是测试所有可能性，即搜索区域中的所有角度和所有位置）。`b``c`

![在此处输入图像描述](../Images/6591c97af1a1104e7d312dd24cded016.png)

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T20:50:27.890

@woodchips：我认为这是一个编程问题，他要求解决方案。我绝对不同意你的看法。

一种可能的解决方案是首先沿着与两个给定点之间的线正交的垂直线进行搜索。您还可以在此间隔内改变角度。由于问题的性质（眼睑边界），您可以限制 -pi/4 和 pi/4 之间的角度变化。在这条垂直线上找到一个职位的最低成本后，您可以沿着水平线搜索并执行类似的任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T09:37:01.553

为什么不使用回归将抛物线拟合到目标形状中的多个点？然后，您可以使用您想要获得近似解决方案的任何算法。牛顿法收敛得非常快。这里的优化是在近似抛物线的系数上。

# ruby-on-rails - 用户控制器上关注者的未知操作 - Rails 教程

> ID：15190223
> 
> 赞同：1
> 
> 时间：2013-03-03T20:04:46.773
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, railstutorial.org

我正在尝试在我的应用程序中实现类似于 Twitter 的关注者系统。我正在实现 Michael Hartl 的 Rails 教程中解释的 Follower 系统：

[http://ruby.railstutorial.org/chapters/following-users](http://ruby.railstutorial.org/chapters/following-users)

完成示例后，我注意到一个问题：

转到 /users/(id)/following 或 /users/(id)/followers 会显示以下错误消息：

```
Unknown action

The action 'following' could not be found for UsersController 
```

或者

```
Unknown action

The action 'followers' could not be found for UsersController 
```

这些错误让我感到困惑的是，我确实在 UsersController 中定义了这些操作：

```
def following
    @title = "Following"
    @user = User.find(params[:id])
    @users = @user.followed_users.paginate(page: params[:page])
    render 'show_follow'
  end

  def followers
    @title = "Followers"
    @user = User.find(params[:id])
    @users = @user.followers.paginate(page: params[:page])
    render 'show_follow'
  end 
```

这是我的 routes.rb 文件，以防万一出现问题：

```
AppName::Application.routes.draw do

  #get "users/index"

  #get "users/show"

authenticated :user do
    root :to => 'home#index'
  end
  root :to => "home#index"
  devise_for :users
  resources :users do
    member do
      get :following, :followers
    end
  end
  resources :works
  resources :relationships, only: [:create, :destroy]
end 
```

附加信息：我正在使用设计来处理用户身份验证。

固定的：

问题是在用户控制器中放置以下和后续操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T20:09:49.457

在您的`config/routes.rb`中，成员操作必须是每行一个：

```
resources :users do
  member do
    get :following
    get :followers
  end
end 
```

另请参阅[http://guides.rubyonrails.org/routing.html#adding-more-restful-actions](http://guides.rubyonrails.org/routing.html#adding-more-restful-actions)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-11-12T19:09:53.773

```
resources :users do
  member do
 get  :following 
 get  :followers
    end

 end 
```

以上路线工作，并分别提供`following_user_path`和`followers_user_path`路线

# c - 如何打印超过 300 行？

> ID：15190224
> 
> 赞同：0
> 
> 时间：2013-03-03T20:04:58.600
> 
> 标签：c, arrays, for-loop, lines

快速提问，但我找不到任何解决方案。基本上，下面的程序假设将每个整数从 1 到 1000 平方。但是当我打印它时，它会切断。我只能打印 300 行，然后将其切断。对于此示例，如果 j<301 则为 4，而不是第一行为 1，如果 j<302 则为 9。如何打印 1000 行是我的主要问题。

```
#include <stdio.h>
#include <math.h>

int main(void)
{
    int j;
    double k,sarr[1000];

    for (j=0; j<301; j++)
    {
        k = pow(j,2);
        sarr[j] = k;
        printf("\n%lf",sarr[j]);    
    }

    return(0);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T20:09:34.297

你的代码没有问题。我怀疑您的终端仅将程序输出的最后 300 行保留在其行缓冲区中。

尝试将输出重定向到文件（或从程序中将数字写入文件）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T20:11:50.467

第一行应该是`1`( `= 2^0`) 以便您的输出被截断。

您可以将 for 循环更改为循环 i = 0, ..., 999 -`for (j=0; j<1001; j++)`并将输出重定向到文件，以便在使用终端时查看整个输出。

跑：

```
./program > filename 
```

为了将程序的输出重定向到一个名为 的文件`filename`，该文件将保存在您的当前目录中。该文件应包含所有打印的数字。

此外，不需要阵列本身。只需使用一个类型的变量`double`。

# java - Java 6 VM 调用 Java 4 VM

> ID：15190227
> 
> 赞同：4
> 
> 时间：2013-03-03T20:05:09.223
> 
> 标签：java, serialization, jvm, rmi, java-6

我继承了一个尚未升级的非常旧的应用程序，因为它依赖于依赖于 Java 4 的第三方库。

摆脱这个第三方库不会在不久的将来发生，因为系统的关键部分依赖于它。

我想更新应用程序的 Java 版本，并且正在考虑将依赖的 jar 移动到它自己的 VM 中，然后在 Java 6/7 VM 和 Java 4 VM 之间进行某种调用。

首先的想法是使用 RMI。显而易见的第一个问题是使用不同 Java 版本时 VM 之间的兼容性。第三方库生成字节流，因此返回的数据不会受到序列化的影响。如果兼容性是一个问题，传入的数据可以被操纵成可以传递的东西。

这是正确的方法吗？

有没有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T21:21:55.083

1.  你可以像菲利普在你的评论中所说的那样做一个包装器......你只需要在你的旧库中做一些小的调整
2.  您可以使用 RMI ......它是安全的！我对其进行了测试，这是一个很好的方法……您不必更改旧的混乱代码
3.  你也可以使用网络服务，但我更喜欢 RMI

如果您必须修改一些小东西并且您有太多问题需要更改`JVM`（因为有人修改了一些`jdk`库 [发生在我身上]），只需将其留给 java 4... :)

我遇到的问题是我需要一个库`jdk 1.5`来使用，`jdk 1.4`但我的解决方案是反编译该库`jdk 1.5`并将其编译回来`jdk 1.4`......因为旧的`jdk`在其中修改了一些东西......我在反编译代码上遇到的问题是我找不到一个非常好的反编译器知道`casting`......而且我有一些`stackoverflow`错误（但这些很容易修复）

希望我的回答对你有帮助

# python - raw_id_fields：如何显示名称而不是 id？

> ID：15190228
> 
> 赞同：37
> 
> 时间：2013-03-03T20:05:10.663
> 
> 标签：python, django, django-admin

自定义 Django 管理面板，我[`raw_id_fields`](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.raw_id_fields)用来从具有数千个元素的模型中选择一个 ForeignKey，因为默认的选择框下拉列表不方便有这么多元素。

它可以工作，但它显示了可以在这张图片上看到的 id： ![在此处输入图像描述](../Images/38ef9206de23e0e18d0ec7b42233bf3a.png)

有什么方法可以显示名称或其他字段而不是 id？或者，有没有比使用更好的方法来实现这一点`raw_id_fields`？

这是我的代码`models.py`：

```
class Structure(MPTTModel):
    name = models.CharField(max_length=200, unique=True, verbose_name = _('name'))
    parent = TreeForeignKey('self', null=True, blank=True, related_name='children', verbose_name = _('parent'))

    def __unicode__(self):
        return u"%s" % (self.name) 
```

在`admin.py`：

```
class StructureAdmin(tree_editor.TreeEditor):
    search_fields = ('name',)
    raw_id_fields = ('parent',) 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2019-01-24T07:20:32.327

从 Django 2.0 开始，您可以使用`autocomplete_fields`. 它将像 ajax select2 一样工作。

在`admin.py`

```
class StructureAdmin(tree_editor.TreeEditor):
    search_fields = ('name',)
    autocomplete_fields = ('parent',) 
```

参考：[https ://docs.djangoproject.com/en/2.1/ref/contrib/admin/#django.contrib.admin.ModelAdmin.autocomplete_fields](https://docs.djangoproject.com/en/2.1/ref/contrib/admin/#django.contrib.admin.ModelAdmin.autocomplete_fields)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-19T21:50:54.983

我也研究过这个，我认为这是不可能的。我认为你能做的最好的就是在原始 id 字段旁边显示该字段的 unicode：http: [//djangosnippets.org/snippets/2108/](http://djangosnippets.org/snippets/2108/)

或者，您可以显示 unicode 和指向值的相应管理员更改页面的链接：http: [//djangosnippets.org/snippets/2217/](http://djangosnippets.org/snippets/2217/)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-01-19T11:03:58.990

看来这个插件：[https ://github.com/lincolnloop/django-dynamic-raw-id](https://github.com/lincolnloop/django-dynamic-raw-id)

做你想做的事：

（从文档复制）：

用法

要开始在应用程序中使用 django-dynamic-raw-id，您只需在 ModelAdmin 类中实现 DynamicRawIDMixin 并将所需字段添加到 dynamic_raw_id_fields 列表中：

```
from dynamic_raw_id.admin import DynamicRawIDMixin

class UserProfileAdmin(DynamicRawIDMixin, admin.ModelAdmin):
    dynamic_raw_id_fields = ('user',) 
```

您也可以在管理过滤器中使用 dynamic_raw_id 小部件：

```
from dynamic_raw_id.admin import DynamicRawIDMixin
from dynamic_raw_id.filters import DynamicRawIDFilter

class UserProfileAdmin(DynamicRawIDMixin, admin.ModelAdmin):
    list_filter = (
        ('dynamic_raw_id_fk', DynamicRawIDFilter),
    ) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-03T20:30:25.443

用于表示对象使用`__unicode__`

```
class Person(models.Model):
    first_name = models.CharField(max_length=50)
    last_name = models.CharField(max_length=50)

    def __unicode__(self):
        return u'%s %s' % (self.first_name, self.last_name) 
```

在 Python 3 中使用

```
def __str__(self): 
```

# javascript - 自定义 div 可拖动功能 - 窗口边界？

> ID：15190230
> 
> 赞同：0
> 
> 时间：2013-03-03T20:05:19.557
> 
> 标签：javascript

我正在使用以下函数通过句柄拖动 div：

```
function enableDragging(ele) {
    var dragging = dragging || false,
        x, y, Ox, Oy,
        current;
    enableDragging.z = enableDragging.z || 1;
    var grabber = document.getElementById("wrapId");
    grabber.onmousedown = function (ev) {
        ev = ev || window.event;
        var target = ev.target || ev.srcElement;
        current = target.parentNode;
        dragging = true;
        x = ev.clientX;
        y = ev.clientY;
        Ox = current.offsetLeft;
        Oy = current.offsetTop;
        current.style.zIndex = ++enableDragging.z;

        document.onmousemove = function (ev) {
            ev = ev || window.event;
            pauseEvent(ev);
            if (dragging == true) {

                var Sx = ev.clientX - x + Ox,
                    Sy = ev.clientY - y + Oy;

                current.style.left = Math.max(Sx, Math.min(document.body.offsetWidth - Sx, 0)) + "px";
                current.style.top = Math.max(Sy, Math.min(document.body.offsetHeight - Sy, 0)) + "px";
                document.body.focus();
                document.onselectstart = function () {
                    return false;
                };
                ev.ondragstart = function () {
                    return false;
                };
                document.body.style.MozUserSelect = "none";
                document.body.style.cursor = "default";
                return false;
            }
        }
        document.ondragstart = function () {
            return false;
        }
        document.onmouseup = function (ev) {
            ev = ev || window.event;
            dragging && (dragging = false);
            if (ev.preventDefault) {
                ev.preventDefault();
            } else {
                e.cancelBubble = true;
                e.returnValue = false;
            }

            document.body.style.MozUserSelect = "text";
            document.body.style.cursor = "default";
            //toggleEnableSelectStart(true);
            return false;
        }
    };
} 
```

我正在尝试设置边界，以使 div 不能拖到实际浏览器窗口的边界之外。

上面的函数完成了 50%，它不会让用户将 div 拖动到左上角和左边界之外。但是它让用户将其拖到底部和右侧之外..

任何想法如何解决这一问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T20:14:05.147

取您计算的值与窗口的宽度/高度边界减去 div 的宽度/高度之间的最小值：

```
current.style.left = Math.min(Math.max(Sx, Math.min(document.body.offsetWidth - Sx, 0)), document.body.offsetWidth - current.offsetWidth) + "px";
current.style.top = Math.min(Math.max(Sy, Math.min(document.body.offsetHeight - Sy, 0)), document.body.offsetHeight - current.offsetHeight) + "px"; 
```

**编辑：**

这些方面的东西（请注意，这写得很快，与你的格式不同！）

[http://jsfiddle.net/WKLa7/1/](http://jsfiddle.net/WKLa7/1/)

# mysql - 如果没有匹配项，则使用默认值执行 LEFT JOIN

> ID：15190241
> 
> 赞同：3
> 
> 时间：2013-03-03T20:06:09.360
> 
> 标签：mysql

首先，我什至不确定是否`LEFT JOIN`是做我想做的最好的方式，所以会尽力解释。

我有 2 个表 - 一个包含站点列表，另一个包含角色列表。一个用户可能只有一个角色，但他们可能拥有与站点一样多的角色。

**表“网站”**

```
site_id  |  site_name  | site_domain
---------------------------------------
1        |  Site A     | sitea.com
2        |  Site B     | siteb.com 
```

**表“角色”**

```
site_id  |  user_id  | role_id
---------------------------------
1        |  1        | 1
1        |  2        | 1
2        |  2        | 2 
```

如我上面的示例，用户 1 在一个站点上只有一个角色，但用户 2 在两个不同的站点上具有两个角色。

我想要做的，可能只是一个星期天晚上，而不是直截了当的事情，就是列出一个站点列表，以及每个用户的角色 - 如果用户的该站点不存在角色，然后返回 NULL（或 0）。

输出应如何产生的两个示例：

**用户 1**

```
site_id | site_name | site_domain | role_id
----------------------------------------------
1       | Site A    | sitea.com   | 1
2       | Site B    | siteb.com   | NULL 
```

**用户 2**

```
site_id | site_name | site_domain | role_id
----------------------------------------------
1       | Site A    | sitea.com   | 1
2       | Site B    | siteb.com   | 2 
```

我现在的查询如下，但是，第二个站点没有出现，因为用户没有定义角色（即像上面一样，但对于用户 1，第二个站点 B 不会列出）。我知道我只是错过了一些东西，但今晚想不起来:o(

```
SELECT site_id, site_name, site_domain, role_id 
FROM `sites` 
LEFT JOIN `roles` 
ON sites.site_id=roles.site_id 
WHERE roles.user_id='1' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T20:24:43.073

您需要做的是从一个包含所有站点和用户的表开始。然后加入`roles`表中的信息：

```
select s.site_id, s.site_name, s.site_domain, u.user_id, r.role_id
from (select distinct user_id from roles) u cross join
     sites s left outer join
     roles r
     on s.site_id = r.site_id and
        u.user_id = r.user_id 
```

如果您有一个用户表，那么您可以用该表替换第一个子查询。

对于涉及单个用户的站点，您可以在子查询中放置一个常量：

```
select s.site_id, s.site_name, s.site_domain, u.user_id, r.role_id
from (select 1 as user_id) u cross join
     sites s left outer join
     roles r
     on s.site_id = r.site_id and
        u.user_id = r.user_id 
```

或`where`从句： `where u.user_id = 1`.

# html - kbd 元素在可访问性方面是否有帮助？

> ID：15190247
> 
> 赞同：2
> 
> 时间：2013-03-03T20:06:33.247
> 
> 标签：html, accessibility

我正在写一篇关于该`kbd`元素的博客文章，作为其中的一部分，我试图看看它在可访问性方面是否真的有帮助，例如，是否有任何屏幕阅读器识别该`kbd`元素或对它做任何事情？

我试过用谷歌搜索答案，但什么也没找到（可能是因为很少有人真正使用这个元素？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T20:53:43.723

除了默认渲染（使用浏览器的默认等宽）之外，似乎没有任何证据表明`kbd`在浏览器、辅助软件或其他方面对元素进行了任何特定处理。

很难想象任何软件*可以*用它做什么，因为它只是表明一些文本作为用户输入呈现——它只是代表它，实际上并不涉及任何用户交互。内容可以是任何东西。用户输入通常是命令或文件名或其他“计算机化”表达式，但也可以是自然语言或无意义的字符串（例如密码）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T13:22:19.153

`kbd`如果屏幕阅读器以不同的语气/声音/速度/等方式阅读标记的内容，那将是有意义的。（分别宣布）。

否则就不会（总是/完美地）清楚应该输入什么，不应该输入什么。

不清楚究竟要输入什么的示例：

```
<p><kbd>Say hi</kbd> to get an introduction.</p>
<!-- vs. -->
<p>Say <kbd>hi</kbd> to get an introduction.</p> 
```

根本不清楚应该输入任何内容的示例：

```
<p>
  <kbd>kill</kbd> to kill yourself, <kbd>kill <var>name</var></kbd> to kill the player named <var>name</var>
</p> 
```

是否必须输入/哪个标点符号以及是否必须按住键（ ）将不清楚的示例`+`：

```
<p>To enable god mode, press <kbd>a+v!c</kbd>.</p>
<!-- vs. -->
<p>To enable god mode, press <kbd>a+v!c.</kbd></p>
<!-- vs. -->
<p>To enable god mode, press <kbd>a</kbd>+<kbd>v!c</kbd>.</p> 
```

如果*任何*屏幕阅读器`kbd`默认启用支持是另一个问题，这可能无法确定，因为有*许多*屏幕阅读器仅适用于一种语言。在一个国家（更不用说所有不同的版本）。

但我猜大多数高级屏幕阅读器都可以配置为使用`kbd`. 我知道许多屏幕阅读器用户在邮件列表上分享片段/配置以改善他们的体验。如果有些人还添加了对`kbd`.

除了屏幕阅读器用户的可访问性之外`kbd`，当然也可以帮助其他用户。我经常查看源代码以找出在`kbd`没有任何特殊样式时应该输入的确切内容。

# multithreading - 如何优化每核数的线程数

> ID：15190249
> 
> 赞同：4
> 
> 时间：2013-03-03T20:06:38.783
> 
> 标签：multithreading, performance, language-agnostic

我试图更好地了解应该在 n 个内核上运行多少线程。我知道这是一个复杂的问题，其中的答案取决于许多因素，例如有多少共享状态，以及每个线程有多少睡眠和等待资源。

为简化起见，假设我们有 2 个内核和一个进程，可以将其工作划分为没有共享状态的线程。假设每个线程只是在计算后执行计算，没有睡眠，也没有等待资源。在这种情况下，理想的线程数是 2 吗？

让我们把事情复杂一点，说线程必须执行某种磁盘 I/O。这如何改变我们的答案？我认为在这种情况下我们可以拥有超过 2 个内核。

或者假设他们不做任何睡眠或等待资源，而是有一些他们都可以访问的内存需要同步。这如何改变我们的答案？我认为在这种情况下，我们实际上可能更喜欢 1 个线程而不是 2 个线程，具体取决于需要多少同步。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T20:19:03.973

这是一个在一般问题上很难回答的问题。这实际上取决于案件中的更多细节。要记住的是，进行上下文切换是有成本的——如果你只是在做计算，那么在一个内核上运行 2 个线程是很浪费的（因为你不会真正获得任何东西——只会在上下文切换中丢失）。另一方面，如果您正在等待资源并且同时可以继续进行其他计算，那么最好让线程等待这些资源，以免整个执行滞后。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T20:30:21.117

当谈到 IO 时，您不会考虑每个内核的线程数。您考虑每个物理设备的线程数。每个单独的设备都有不同的最佳 DOP（磁盘 = 1，SSD 至少 4，网络要高得多）。

对于 CPU 密集型工作，最佳数量是 1（每个核心）。

在混合的情况下或比这更复杂的情况下，无法给出一般性的答案。系统可以以令人惊讶的方式运行（例如在负载下崩溃！）。这里的方法是测试不同的 DOP 并使用最好的。通常，只有一个最优值，而 1 和无穷大的性能要差得多。所以你只需要找到一个非常容易的最大值。

# android - 为什么我的 ListView 不使用 SimpleAdapter 更新？

> ID：15190254
> 
> 赞同：0
> 
> 时间：2013-03-03T20:07:08.837
> 
> 标签：android, json, android-listview, simpleadapter

我正在从我想用来更新我的 ListView 的服务器中检索 JSON 数据。检索数据时一切正常，但在完成并尝试更新列表后，我只得到一个没有错误的空页面。`Log.d("ListLocations", "after")`也能够运行，所以我看不到 PostExecute 和 SimpleAdapter 的初始化有任何问题

我已经改编了本教程中的代码：[http ://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/#ff0000](http://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/#ff0000)

这是我的 ListActivity 类：

```
public class ListLocations extends ListActivity
{
    //Root url and controller
    private static String root = "someURL/";
    private static String locationsController = "locations";

    // Progress Dialog
    private ProgressDialog pDialog;

    //JSON node names for locations 
    private static final String TAG_ID = "id";
    private static final String TAG_NAME = "name";
    private static final String TAG_TERRAIN = "terrain";
    private static final String TAG_DIFFICULTY = "difficulty";
    private static final String TAG_RATINGS = "ratings";
    private static final String TAG_UID = "uid";
    private static final String TAG_LONG= "long";
    private static final String TAG_LAT= "lat";
    private static final String TAG_DISTANCE= "distance";
    private static final String TAG_COMID= "comid";

    //Will be used to contain the list of locations extracted from JSON
    ArrayList<HashMap<String, String>> list = new ArrayList<HashMap<String, String>>();

    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_list_locations);

        new GetLocations().execute(root + locationsController);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu)
    {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_list_locations, menu);
        return true;
    }
    class GetLocations extends AsyncTask<String, Void, Void>
    {
        //      private ProgressDialog pDialog;
        protected void onPreExecute()
        {
            super.onPreExecute();
            pDialog = new ProgressDialog(ListLocations.this);
            pDialog.setMessage("Loading locations. Please wait...");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(false);
            pDialog.show();
        }

        @Override
        public Void doInBackground(String... urls)
        {
            try
            {               
                JSONHandler jsonHandler = new JSONHandler();
                JSONObject json= jsonHandler.getJSONFromUrl(urls[0]);
                Log.d("ListLocations",json.toString());

                JSONArray locations = json.getJSONArray("locations");
                int length = locations.length();

                ArrayList<HashMap<String, String>> list = new ArrayList<HashMap<String, String>>();
                for(int i = 0; i < length; i++)
                {
                    JSONObject loc = locations.getJSONObject(i);

                    //Create HashMap    
                    HashMap<String, String> map = new HashMap<String, String>();

                    //Get and store values into map
                    map.put("id", loc.getString(TAG_ID));
                    map.put("name", loc.getString(TAG_NAME));
                    map.put("distance", loc.getString(TAG_DISTANCE));
                    map.put("difficulty", loc.getString(TAG_DIFFICULTY));
                    map.put("terrain", loc.getString(TAG_TERRAIN));
                    map.put("ratings", loc.getString(TAG_RATINGS));
                    map.put("long", loc.getString(TAG_LONG));
                    map.put("lat", loc.getString(TAG_LAT));
                    map.put("uid", loc.getString(TAG_UID));
                    map.put("comid", loc.getString(TAG_COMID));

                    //Add map to list
                    list.add(map);
                }
                System.out.println(list);

            }
            catch (Exception e)
            {
                 e.printStackTrace();            
            }
            Log.d("ListLocations", "Successfully finished HTTP Request");
            return(null);
        }

          /**
         * After completing background task Dismiss the progress dialog
         * **/
        protected void onPostExecute(Void result) { 
            super.onPostExecute(result);
            pDialog.dismiss();

            // updating UI from Background Thread
            runOnUiThread(new Runnable() {
                public void run() {
                    Log.d("ListLocations", "inside run");
                       ListAdapter adapter = new SimpleAdapter(
                               ListLocations.this, list,
                               R.layout.list_item, new String[] { TAG_ID,
                                       TAG_NAME},
                               new int[] { R.id.id, R.id.name });

                       Log.d("ListLocations", "after");
                       // updating listview
                       setListAdapter(adapter);

                }
            });

        }

    }
} 
```

这是`list_item.xml`：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <!-- location id (pid) - will be HIDDEN - used to pass to other activity -->
    <TextView
        android:id="@+id/id"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:visibility="gone" />

    <!-- Name Label -->
    <TextView
        android:id="@+id/name"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:paddingTop="6dip"
        android:paddingLeft="6dip"
        android:textSize="17dip"
        android:textStyle="bold" />

</LinearLayout> 
```

这是`activity_list_locations.xml`

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ListView
        android:id="@android:id/list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T20:12:39.087

您永远不会将数据放在与您一起使用的`list`字段中，因为方法中的变量是局部变量而不是字段。代替：`Activity``SimpleAdapter``list``doInBackground`

```
//...
ArrayList<HashMap<String, String>> list = new ArrayList<HashMap<String, String>>();
for(int i = 0; i < length; i++) {
//... 
```

写：

```
//...
list = new ArrayList<HashMap<String, String>>();
for(int i = 0; i < length; i++) {
//... 
```

所以你不要创建一个局部变量并将元素放在正确的列表中。

# c++ - 在 C++ 中存储带有标点符号的句子

> ID：15190258
> 
> 赞同：1
> 
> 时间：2013-03-03T20:07:33.480
> 
> 标签：c++, punctuation, sentence

这是我第一次来这里，我是 C++ 的初学者。我想知道在阅读文本文件时如何用标点符号分割句子。

IE

```
hey how are you? The Java is great. Awesome C++ is awesome! 
```

结果将在我的向量中出现（假设我已将 endl 用于显示向量的每个内容）：

*   嘿，你怎么样？
*   Java很棒。
*   很棒的 C++ 很棒！

到目前为止，这是我的代码：

```
vector<string> sentenceStorer(string documentOfSentences)
{
ifstream ifs(documentOfSentences.c_str());
string word;
vector<string> sentence;
while ( ifs >> word )
{

    char point = word[word.length()-1];
    if (point == '.' || point == '?' || point == '!')
    {

        sentence.push_back(word);
    }
}
 return sentence;

}

void displayVector (vector<string>& displayV)
{
    for(vector<string>::const_iterator i = displayV.begin(); i != displayV.end(); ++i )
    {
        cout << *i <<endl;
    }
}

int main()
{
    vector <string> readstop = sentenceStorer("input.txt");
    displayVector(readstop);
    return 0;
} 
```

这是我的结果：

*   你？
*   伟大的。
*   惊人的！

你能解释为什么我不能得到前一个词并修复它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T20:59:45.343

我会给你一个线索。在 while 语句中，or 子句中有三个条件。因此，如果其中任何一个得到满足，`while`则不要检查其他声明。所以它需要你的第一个并寻找 . （点）。然后在找到它之后，将它读入`word`，所以实际上它省略了问号。看来您需要找到其他方法来解决此问题。如果我是你，我会阅读整行并逐个字符地解析它。就我而言，没有内置的字符串函数可以按分隔符分割单词。

# python - Python CSV 读-> 写；删除和替换 PLUS：行尾是 JSON 格式

> ID：15190260
> 
> 赞同：1
> 
> 时间：2013-03-03T20:07:39.640
> 
> 标签：python, json, csv

我在让我的 Python 脚本做我想做的事情时遇到问题。它似乎没有修改我的文件。

我想要：

1.  读入具有以下格式的 *.csv 文件 PropertyName::PropertyValue,...,PropertyName::PropertyValue,{ExtPropertyName::ExtPropertyValue},...,{ExtPropertyName::ExtPropertyValue}
2.  我想删除 PropertyName:: 并只留下 PropertyValue 的一列
3.  我想添加标题行

我试图逐步用逗号替换 :: 值，但似乎无法让它工作：

```
fin = csv.reader(open('infile', 'rb'), delimiter=',')
fout = open('outfile', 'w')
for row in fin:
   fout.write(','.join(','.join(item.split()) for item in row) + '::')
fout.close() 
```

任何建议，无论是关于我的第一步问题，还是更大的图片分辨率，都会受到赞赏。谢谢。

更新/编辑由一个足够好来为我审查的人要求！

这是 *.csv 文件 (INPUT) 的第一行

```
InnerDiameterOrWidth::0.1,InnerHeight::0.1,Length2dCenterToCenter::44.6743867864386,Length3dCenterToCenter::44.6768028159989,Length2dToInsideEdge::44.2678260053526,Length3dToInsideEdge::44.2717800813466,Length2dToOutsideEdge::44.6743867864386,Length3dToOutsideEdge::44.6768028159989,MinimumCover::0,MaximumCover::0,StartConnection::ImmxGisUtilityNetworkCommon.Connection, 
```

在一个完美的世界里，我希望我的文本文件看起来像这样（输出）

```
InnerDiameterOrWidth, InnerHeight, Length2dCenterToCenter,,,,,,,,,,,
0.1,0.1,44.6743867864386 
```

所以一个标题行和列中的值

**更新的**JSON 信息

每行的末尾都有 JSON 格式的文本：

```
{StartPoint::7858.35924983374[%2C]1703.69341358077[%2C]-3.075},{EndPoint::7822.85045874375[%2C]1730.80294308742[%2C]-3.53962362760298} 
```

我需要用标题分成 XYZ 和 XYZ

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T20:54:29.327

也许是这样的（假设每一行都有相同的键，并且顺序相同）：

```
import csv

with open("diam.csv", "rb") as fin, open("diam_out.csv", "wb") as fout:
    reader = csv.reader(fin)
    writer = csv.writer(fout)
    for i, line in enumerate(reader):
        split = [item.split("::") for item in line if item.strip()]
        if not split: # blank line
            continue
        keys, vals = zip(*split)
        if i == 0:
            # first line: write header
            writer.writerow(keys)
        writer.writerow(vals) 
```

产生

```
localhost-2:coding $ cat diam_out.csv 
InnerDiameterOrWidth,InnerHeight,Length2dCenterToCenter,Length3dCenterToCenter,Length2dToInsideEdge,Length3dToInsideEdge,Length2dToOutsideEdge,Length3dToOutsideEdge,MinimumCover,MaximumCover,StartConnection
0.1,0.1,44.6743867864386,44.6768028159989,44.2678260053526,44.2717800813466,44.6743867864386,44.6768028159989,0,0,ImmxGisUtilityNetworkCommon.Connection 
```

我认为大部分代码应该是有意义的，除了`zip(*split)`诀窍：基本上转置了一个序列，即

```
>>> s = [['a','1'],['b','2']]
>>> zip(*s)
[('a', 'b'), ('1', '2')] 
```

这样元素现在按它们的索引分组在一起（第一个都在一起，第二个等等）

# c# - 在 C# 和 C++ 中使用嵌套类 - 为什么以及何时？

> ID：15190265
> 
> 赞同：2
> 
> 时间：2013-03-03T20:07:59.850
> 
> 标签：c#, c++

为了将我的编程技能和习惯带入 21 世纪（从 Pascal 和 Fortran 迁移到 C# 和 C++），我自主努力，一直在研究大量可用的源代码。据我所知，类是唯一的“独立”实体（很像它们的 Function 祖先）。

但是，我遇到过许多实例，其中一个或多个类嵌套在另一个类中。在这方面，我的“直觉”是，这样做仅仅是因为方法论极差——但是，我对现代 OOP 方法论还不够熟悉，无法真正做出这样的决定。

因此，以下重叠的问题：

将一个类嵌套在另一个类中是否有合理的理由？而且，如果是这样，与每个类别完全独立相反，这样做的理由是什么？

（注意：我看到的示例一直使用 C#，但似乎这方面同样适用于 C++。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T20:15:23.043

嗯，这可能需要一个非常有启发性的答案，因此很多人会不同意我的答案。我是那些认为没有真正需要嵌套类的人之一，我倾向于同意你的说法：

> > 在这方面，我的“直觉”是这样做仅仅是由于方法极差

人们觉得需要设计嵌套类的情况是功能与外部类中设计的行为紧密耦合的情况。例如，事件处理可以设计在内部类中，或者`Threading`行为可以找到内部类的方式。

我宁愿从“外部”类中重构特定行为，以便最终得到两个具有明确职责的较小类。

对我来说，设计内部类的主要缺点是它们倾向于使功能变得混乱，这很难（更）与原则一起用作[TDD](http://nl.wikipedia.org/wiki/Test-driven_development)（测试驱动开发）。

如果您不依赖测试驱动的主体，我认为它不会对您造成太大伤害。这（就像很多事情一样）是品味问题，而不是对与错的问题。我了解到，这个话题可能会导致冗长而令人筋疲力尽的讨论。非常类似于您是否应该使用`static`辅助类，这些辅助类往往不仅仅是“成为帮助者”，并且随着时间的推移越来越多的状态。

如果你遇到一个现实生活中的例子，讨论会变得更加具体。在那之前，它主要是人们的“直觉”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T20:55:07.513

C# 中嵌套类的常见用途包括供类内部使用的类，您不希望在模块的内部命名空间中公开这些类。例如，您可能需要抛出一个不向外界公开的异常。在这种情况下，您可能希望将其设为嵌套类，以便其他人无法使用它。

另一个例子是二叉树的`Node`类。它不仅是您不希望在课堂之外公开的东西，而且它可能需要访问私有成员以进行内部操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T20:45:54.377

您经常遇到嵌套类的一个领域（尽管可能没有注意到）是枚举器（即实现的类`IEnumerator<T>`）。

为了让一个集合支持多个同时枚举（例如在多个线程上，或者甚至只是`foreach`在同一个集合上的嵌套循环），枚举逻辑需要从集合中分离到另一个类中。

但是，枚举器通常需要了解集合的实现细节才能正常工作。如果您要使用完全独立的（非嵌套）类来执行此操作，则必须使这些内部结构比它们真正应该的更易于访问，从而破坏封装。（有人可能会争辩说它可以使用`internal`成员来完成，但我认为这仍然在某种程度上破坏了封装，即使它“只是”将实现细节暴露给同一程序集的成员）。

通过为枚举器使用私有嵌套类，这些问题在保持适当封装的同时消失了，因为嵌套类可以访问其包含类的内部。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T21:47:07.813

嵌套类有利有弊。专业人士以有意使用为中心，例如`IEnumerator<T>`提到的 Iridium 和嵌套类以促进[WPF/MVVM](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)中的[命令模式](http://www.codeproject.com/Articles/339390/Understanding-and-Implementing-Command-Pattern-in)。SQL 创建、读取、更新和删除 (CRUD) 操作很流行，用于将这些模式封装在代码中的类/命令中，用于业务线/数据驱动的应用程序。

与嵌套类相关的负面因素与调试相关 - 嵌套的类越多，复杂性就越高，越容易引入错误，调试它就越难。即使使用命令模式之类的东西，按照它的组织方式，也会因为太多的类/命令而使你的类膨胀。

# c# - MySql gridview 删除命令

> ID：15190267
> 
> 赞同：2
> 
> 时间：2013-03-03T20:08:10.423
> 
> 标签：c#, asp.net, mysql, .net, webforms

我有这个`GridView`：

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
        CellPadding="4" DataSourceID="SqlDataSource1" ForeColor="#333333" 
        GridLines="None">
        <AlternatingRowStyle BackColor="White" />
        <Columns>
            <asp:TemplateField ShowHeader="False">
                    <EditItemTemplate>
                        <asp:LinkButton ID="LinkButton1" runat="server" CausesValidation="True" 
                            CommandName="Update" Text="Update"></asp:LinkButton>
                        &nbsp;<asp:LinkButton ID="LinkButton2" runat="server" CausesValidation="False" 
                            CommandName="Cancel" Text="Cancel"></asp:LinkButton>
                    </EditItemTemplate>
                    <ItemTemplate>
                        <asp:LinkButton ID="LinkButton1" runat="server" CausesValidation="False" 
                            CommandName="Edit" Text="Edit"></asp:LinkButton>
                        &nbsp;<asp:LinkButton ID="LinkButton2" runat="server" CausesValidation="False" 
                            CommandName="Delete" 
                            onclientclick="javascript:return confirm('are you sure you want to delete.');" 
                            Text="Delete"></asp:LinkButton>
                    </ItemTemplate>
                </asp:TemplateField>
            <asp:BoundField DataField="id" HeaderText="id" SortExpression="id"/>
            <asp:BoundField DataField="email" HeaderText="email" SortExpression="email" />
            <asp:BoundField DataField="first" HeaderText="first" SortExpression="first" />
            <asp:BoundField DataField="last" HeaderText="last" SortExpression="last" />
            <asp:BoundField DataField="gender" HeaderText="gender" 
                SortExpression="gender" />
            <asp:BoundField DataField="birthday" HeaderText="birthday" 
                SortExpression="birthday" />
        </Columns>
        <FooterStyle BackColor="#990000" Font-Bold="True" ForeColor="White" />
        <HeaderStyle BackColor="#990000" Font-Bold="True" ForeColor="White" />
        <PagerStyle BackColor="#FFCC66" ForeColor="#333333" HorizontalAlign="Center" />
        <RowStyle BackColor="#FFFBD6" ForeColor="#333333" />
        <SelectedRowStyle BackColor="#FFCC66" Font-Bold="True" ForeColor="Navy" />
        <SortedAscendingCellStyle BackColor="#FDF5AC" />
        <SortedAscendingHeaderStyle BackColor="#4D0000" />
        <SortedDescendingCellStyle BackColor="#FCF6C0" />
        <SortedDescendingHeaderStyle BackColor="#820000" />
    </asp:GridView> 
```

这是`SqlDataSource`：

```
<asp:SqlDataSource ID="SqlDataSource1" runat="server" 
        ConnectionString="<%$ ConnectionStrings:clientConnectionString %>" 
        ProviderName="<%$ ConnectionStrings:clientConnectionString.ProviderName %>" 
        SelectCommand="SELECT * FROM Client;" 
        DeleteCommand="DELETE FROM Client WHERE id = @id AND email = @email;">

        <DeleteParameters>
            <asp:Parameter Name="id" Type="String" />
            <asp:Parameter Name="email" Type="String" />
        </DeleteParameters>

    </asp:SqlDataSource> 
```

当我尝试执行删除时，我收到此错误：

```
Parameter '@id' must be defined. 
Exception Details: MySql.Data.MySqlClient.MySqlException: Parameter '@id' must be defined. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T20:12:24.047

您可能希望将`DataKeyNames`属性添加到 GridView

您必须设置 DataKeyNames 属性才能使 GridView 控件的自动更新和删除功能起作用。这些关键字段的值被传递给数据源控件，以指定要更新或删除的行。看到这个[链接](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.datakeynames.aspx)

```
DataKeyNames="id,email" 
```

在您的 Gridview 的上下文中。

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
        CellPadding="4" DataSourceID="SqlDataSource1" ForeColor="#333333" 
        GridLines="None"  DataKeyNames="id,email"> 
```

# reflection - Windows 8 和 Ninject：反射方法不能在当前平台上使用

> ID：15190270
> 
> 赞同：3
> 
> 时间：2013-03-03T20:08:19.677
> 
> 标签：reflection, dependency-injection, windows-runtime, ninject

我有一个 Windows 8 应用程序解决方案，我正在使用 MVVM。所以我有 viewModelLocator 并且它的工作。

但是现在我也想让ninject做一些依赖注入（因为viewModelLocator实际上是一个定位器，但没有DI）

所以我去下载 .net framework 4.5 的 ninject DLL 并尝试从内核中获取一个类型的实例，如下所示：

```
DataSource = NinjectKernel.Get<IBudgetTrackerAppDataSource>(); 
```

其中 DataSource 是整个应用程序中使用的类。问题是执行该行时，出现以下错误：

```
The API 'System.Reflection.RuntimeMethodInfo.GetParentDefinition()' cannot be used on the current platform 
```

所以我认为 Ninject 和 Windows 8 正在打架，所以问题是：我怎样才能解决这个问题？（ninject 的另一个版本？另一个 DI 框架？...）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:52:32.107

要构建 WinRT 应用程序，您只能引用其他 WinRT 程序集，这就是引用 .NET 4.5 版本的 Ninject 无法正常工作的原因。似乎确实有一个 WinRT 版本的 Ninject，但尚未发布，源代码可在[GitHub](https://github.com/remogloor/ninject)上找到。

有许多支持 WinRT 的 IoC 框架。Caliburn.Micro 和 MVVM Light 都带有自己的容器以及[MetroIoC](http://metroioc.codeplex.com/)。

# mysql - 需要更具体的mysql查询

> ID：15190271
> 
> 赞同：1
> 
> 时间：2013-03-03T20:08:19.940
> 
> 标签：mysql

我试图从这个基本查询中排除结果：

```
SELECT PageID, PlanID
FROM table
WHERE PlanID = 1 
AND PageID in !=0 
```

这是一个映射表，用于将博客等对象连接到标签、标签到图像等。

我的问题是这个查询还有其他结果..

```
PlanID = 1 - PageID = 234 - OtherID = 0
PlanID = 1 - PageID = 234 - OtherID = 456 
```

实际上，这就是我想写的：

```
SELECT PageID, PlanID 
FROM table
WHERE PlanID = 1 
AND PageID !=0
AND OtherID = 0
AND OtherID = 0
AND OtherID = 0
AND OtherID = 0
AND OtherID = 0 
```

我不想一遍又一遍地写大量的“OtherID's = 0”，因为这是一个动态查询，“PageID”可以是“OtherID”中的任何一个。

有没有办法排除所有的'OtherID's而不必写出来，或者必须在我的代码中做某种类型的动态，用'OtherID's = 0切换！= 0 ID

就像是：

```
SELECT PageID, PlanID 
FROM table
WHERE PlanID = 1 
AND PageID !=0
AND AllOtherFields = 0 
```

我怎样才能请求一个不同的查询，只说 pageID !=0 和 planID =1 或者只是将我不寻找的所有字段归零..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T20:19:29.537

这是你想要的吗？

```
SELECT PageID, PlanID
FROM table
WHERE PlanID = 1 and
      PageID <> 0 and
      OtherId <> 0 
```

注意：您可以使用`!=`或`<>`。它们是等价的。

如果要检查所有其他字段是否为 0，可以执行以下操作：

```
SELECT PageID, PlanID
FROM table
WHERE PlanID = 1 and
      PageID <> 0 and
      0 not in (OtherId1, otherid2, otherid3, . . . ) 
```

# jquery - 我怎样才能得到一个段落的文本，然后我可以通过电子邮件发送它（vb.net）？

> ID：15190274
> 
> 赞同：0
> 
> 时间：2013-03-03T20:08:41.657
> 
> 标签：jquery, .net, vb.net

这都是 VB.NET：

我正在使用 jQuery 来汇总通过选中复选框选择的值。jQ 脚本将总和写入一个 id 为“total”的标签。

```
<p id="total"></p> 
```

如何获取 id 为“total”的段落的文本，然后我可以通过电子邮件发送它？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T20:12:04.897

将总和写入`asp:hiddenfield`

```
<asp:HiddenField ID="myField" runat="server" /> 
```

在代码隐藏中，您可以使用它的 ID 访问隐藏字段值

使用 jquery 将值写入隐藏字段：

```
$('#<%= myField.ClientID %>').val('myvalue'); 
```

# c++ - C++挂钩winsock

> ID：15190275
> 
> 赞同：5
> 
> 时间：2013-03-03T20:08:44.450
> 
> 标签：c++, hook, winsock

我正在尝试挂钩 winsock send 和 recv 以读取进程的所有流量。我在目标进程中将以下代码作为 dll 注入

```
#include "dll.h"
#include <windows.h>
#include <winsock2.h>
#include <iostream>
#include <fstream>

#pragma comment(lib, "ws2_32.lib")

using namespace std;

DllClass::DllClass()
{

}

DllClass::~DllClass ()
{

}

BYTE hook[6];
BYTE hook2[6];
BYTE jmp[6] = { 0xe9,0x00, 0x00, 0x00, 0x00 ,0xc3 };  
ofstream myfile;
ofstream myfile2;

DWORD HookFunction(LPCSTR lpModule, LPCSTR lpFuncName, LPVOID lpFunction, unsigned char *lpBackup)
{  
      DWORD dwAddr = (DWORD)GetProcAddress(GetModuleHandle(lpModule), lpFuncName);
      ReadProcessMemory(GetCurrentProcess(), (LPVOID)dwAddr, lpBackup, 6, 0);
      DWORD dwCalc = ((DWORD)lpFunction - dwAddr - 5);
      memcpy(&jmp[1], &dwCalc, 4);
      WriteProcessMemory(GetCurrentProcess(), (LPVOID)dwAddr, jmp, 6, 0);
      return dwAddr;
}    

BOOL UnHookFunction(LPCSTR lpModule, LPCSTR lpFuncName, unsigned char *lpBackup)
{
DWORD dwAddr = (DWORD)GetProcAddress(GetModuleHandle(lpModule), lpFuncName);
if (WriteProcessMemory(GetCurrentProcess(), (LPVOID)dwAddr, lpBackup, 6, 0))
        return TRUE;
return FALSE;  
}

int nSend(SOCKET s, const char *buf, int len,int flags){
UnHookFunction("ws2_32.dll", "send", hook);

int result = send(s,buf,len,flags);

  myfile.open ("C:\\tmp\\log.txt",ios::app | ios::binary);
  myfile << buf;
  myfile.close();

HookFunction("ws2_32.dll", "send", (LPVOID*) nSend, hook);
return result;
} 

int nRecv(SOCKET s, char* buf, int len, int flags)
{
    UnHookFunction("ws2_32.dll", "recv", hook2);
    DWORD tmp;

    len = recv(s, buf, len, flags);

    if (len > 0)
    {

        myfile2.open ("C:\\tmp\\log.txt",ios::app | ios::binary);
        myfile2 << buf;
        myfile2.close();
    }
   HookFunction("ws2_32.dll", "recv", (LPVOID*) nRecv, hook2);
    return len;
}
void fun(){ // <-- this is called after the DLL has been injected
HookFunction("ws2_32.dll", "send", (LPVOID*) nSend, hook);
HookFunction("ws2_32.dll", "recv", (LPVOID*) nRecv, hook2);
}

BOOL APIENTRY DllMain(HMODULE hModule, DWORD ul_reason_for_call, LPVOID lpReserved)
{
switch (ul_reason_for_call)
{
case DLL_PROCESS_ATTACH:

case DLL_THREAD_ATTACH:
case DLL_THREAD_DETACH:
case DLL_PROCESS_DETACH:
break;
}
return TRUE;
} 
```

这在某些情况下有效，在某些情况下无效。如果我将它注入filezilla ftp，它就像一个魅力，并将发送或接收的所有内容写入文件。

但是在几乎所有其他程序（Internet Explorer，firefox usw。）上，它只是将一些字节写入文件，然后进程崩溃......

有谁知道出了什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T16:33:29.367

好的。它现在可以工作，即使启用了 DataExecutionPrevention。如果将来有人遇到类似问题，这里是工作代码：

dllmain.cpp：

```
#include "dll.h"
#include <windows.h>
#include <winsock2.h>
#include <iostream>
#include <fstream>

#pragma comment(lib, "ws2_32.lib")

using namespace std;

DllClass::DllClass()
{

}

DllClass::~DllClass ()
{

}

BYTE hook[6];
BYTE hook2[6];
BYTE jmp[6] = { 0xe9,0x00, 0x00, 0x00, 0x00 ,0xc3 };  
ofstream myfile;
ofstream myfile2;
DWORD pPrevious;

DWORD HookFunction(LPCSTR lpModule, LPCSTR lpFuncName, LPVOID lpFunction, unsigned char *lpBackup)
{  
      DWORD dwAddr = (DWORD)GetProcAddress(GetModuleHandle(lpModule), lpFuncName);
      ReadProcessMemory(GetCurrentProcess(), (LPVOID)dwAddr, lpBackup, 6, 0);
      DWORD dwCalc = ((DWORD)lpFunction - dwAddr - 5);
      VirtualProtect((void*) dwAddr, 6, PAGE_EXECUTE_READWRITE, &pPrevious);
      memcpy(&jmp[1], &dwCalc, 4);
      WriteProcessMemory(GetCurrentProcess(), (LPVOID)dwAddr, jmp, 6, 0);
      VirtualProtect((void*) dwAddr, 6, pPrevious, &pPrevious);
      FlushInstructionCache(GetCurrentProcess(),0,0);
      return dwAddr;
}    

BOOL UnHookFunction(LPCSTR lpModule, LPCSTR lpFuncName, unsigned char *lpBackup)
{
DWORD dwAddr = (DWORD)GetProcAddress(GetModuleHandle(lpModule), lpFuncName);

if (WriteProcessMemory(GetCurrentProcess(), (LPVOID)dwAddr, lpBackup, 6, 0))
        return TRUE;
        FlushInstructionCache(GetCurrentProcess(),0,0);

return FALSE;  
}

int __stdcall nSend(SOCKET s, const char *buf, int len,int flags){
UnHookFunction("ws2_32.dll", "send", hook);

int result = send(s,buf,len,flags);

  myfile.open ("C:\\tmp\\log.txt",ios::app | ios::binary);
  myfile << buf;
  myfile.close();

HookFunction("ws2_32.dll", "send", (LPVOID*) nSend, hook);
return result;
} 

int __stdcall nRecv(SOCKET s, char* buf, int len, int flags)
{
    UnHookFunction("ws2_32.dll", "recv", hook2);
    DWORD tmp;

    len = recv(s, buf, len, flags);

    if (len > 0)
    {

        myfile2.open ("C:\\tmp\\log.txt",ios::app | ios::binary);
        myfile2 << buf;
        myfile2.close();
    }
   HookFunction("ws2_32.dll", "recv", (LPVOID*) nRecv, hook2);
    return len;
}
void fun(){
HookFunction("ws2_32.dll", "send", (LPVOID*) nSend, hook);
HookFunction("ws2_32.dll", "recv", (LPVOID*) nRecv, hook2);
}

BOOL APIENTRY DllMain(HMODULE hModule, DWORD ul_reason_for_call, LPVOID lpReserved)
{
switch (ul_reason_for_call)
{
case DLL_PROCESS_ATTACH:
HookFunction("ws2_32.dll", "send", (LPVOID*) nSend, hook);
HookFunction("ws2_32.dll", "recv", (LPVOID*) nRecv, hook2);
case DLL_THREAD_ATTACH:
case DLL_THREAD_DETACH:
case DLL_PROCESS_DETACH:
break;
}
return TRUE;
} 
```

dll.h

```
#ifndef _DLL_H_
#define _DLL_H_

#if BUILDING_DLL
# define DLLIMPORT __declspec (dllexport)
#else /* Not BUILDING_DLL */
# define DLLIMPORT __declspec (dllimport)
#endif /* Not BUILDING_DLL */

class DLLIMPORT DllClass
{
  public:
    DllClass();
    virtual ~DllClass(void);

  private:

};
extern "C" __declspec(dllexport) void fun();

#endif /* _DLL_H_ */ 
```

在 Win XP 32 位和 Win 7 x64 上测试和使用几乎所有程序和一些程序

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-03T20:44:27.057

确保在挂钩函数上使用正确的调用约定。默认调用约定通常是 __cdecl。但是“发送”和“接收”使用 __stdcall ( `#define WINAPI __stdcall`)

两者的主要区别在于：

当函数使用 __cdecl 时，调用者负责堆栈清理。但是，当函数使用 __stdcall 时，被调用函数负责堆栈清理。

```
int WINAPI nSend(SOCKET s, const char *buf, int len,int flags);
int WINAPI nRecv(SOCKET s, char* buf, int len, int flags) 
```

请参阅[此处](http://www.codeproject.com/Articles/1388/Calling-Conventions-Demystified)了解更多信息。

# azure - 无法使用 Java 安装适用于 Eclipse 的 Windows Azure 插件（由 Microsoft Open Technologies 提供）

> ID：15190279
> 
> 赞同：0
> 
> 时间：2013-03-03T20:09:01.837
> 
> 标签：azure, eclipse-plugin

我正在尝试从以下 URL安装*Windows Azure Plugin for Eclipse with Java（由 Microsoft Open Technologies 提供）***`http://dl.msopentech.com/eclipse`**：. 我使用 Ubuntu 12.10 和 Eclipse “Java EE IDE for Web Developers”，版本：Juno Service Release 2，内部版本号：20130225-0426。

我按照本教程中解释的步骤进行操作：**`http://msdn.microsoft.com/en-us/library/windowsazure/hh690946.aspx`**. 但我得到了这个错误：

```
Cannot complete the install because some dependencies are not satisfiable
  com.microsoftopentechnologies.windowsazure.tools.sdk.feature.feature.group [0.4.0.201302082023] cannot be installed in this environment because its filter is not applicable. 
```

有人可以帮忙吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T03:38:15.750

我对你们走了多远感到惊讶。我认为 Azure Eclipse 插件根本无法在 Linux 上运行。它依赖于 Windows Azure .NET SDK 和其中的 Windows Azure 模拟器。买一台 Windows 机器，或者双启动你的 ubuntu，兄弟！

尽管您可能无法安装 Windows Azure Eclipse 插件，但您仍然应该能够通过 Windows Azure SDK for Java 编写使用 Windows Azure 服务（例如存储、队列、表、服务总线、媒体服务）的 Java 程序。

[https://github.com/WindowsAzure/azure-sdk-for-java](https://github.com/WindowsAzure/azure-sdk-for-java)

由于它是开源的，您甚至可以拥有自己的 fork :)

# rabbitmq - RabbitMQ 在不可靠网络上的跨数据中心消息传递

> ID：15190287
> 
> 赞同：2
> 
> 时间：2013-03-03T20:10:08.877
> 
> 标签：rabbitmq, message-queue, messaging

服务器 A 和 B 位于 2 个不同的物理位置 - 每个位置都有一个 RabbitMQ 实例。连接这些地点的网络很糟糕，而且完全不可靠。应用程序的具体要求是放置在服务器 A 队列上的消息镜像到服务器 B 上，反之亦然。

不可靠的网络似乎在消息传递的可靠性方面造成了严重破坏——我目前正在使用铲子插件，但它似乎在奇怪的情况下会丢弃消息。我只能假设消息在正确传递到目标队列之前已从源队列中得到确认，但日志中没有任何内容表明这是正在发生的事情

有没有更好的方法可以在这样的不可靠网络上实现此队列镜像？我已经考虑完全删除队列，而是转向更同步的方法（可能是 http api），但我不希望在不了解是否有更好的方法来实现跨片状网络连接的镜像队列或如何我可以更准确地确定问题所在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T21:07:58.350

铲子的设计考虑到了失败。确保`ack_mode`将铲子配置设置为`on_confirm`. 这样，在完全确认已传送到目标代理之前，消息不会从源代理中消失。见[参考](http://www.rabbitmq.com/shovel.html "参考")

# makefile - GNU make 中变量声明的模式替换

> ID：15190291
> 
> 赞同：1
> 
> 时间：2013-03-03T20:10:57.580
> 
> 标签：makefile

在 GNU make 中，是否可以对变量声明使用模式替换？例如，这是一个有效的目标

```
obj/%.o: src/%.c
    gcc -c src/$*.c -o obj/$*.o

```

但这不起作用

`BUILD_% = gcc -c src/%.c -o obj/%.o`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T15:53:25.783

我在这里看到三个单独的问题。

第一：可以`%`在[食谱](http://www.gnu.org/software/make/manual/html_node/Rule-Syntax.html#Rule-Syntax)中使用和解释吗？例如：

```
gcc -c src/%.c -o obj/%.o 
```

答案是它不能：在规则解析期间，`%`在目标和先决条件中进行评估，而不是在配方中进行评估。相反，您必须使用`$*`，[这大致但不完全相同](http://www.gnu.org/software/make/manual/html_node/Automatic-Variables.html#index-g_t_0024_002a-956)。

第二（如果我正确理解您的问题）：变量可以用于定义食谱吗？例如：

```
BUILD = gcc -c src/$*.c -o obj/$*.o

obj/%.o: src/%.c
    $(BUILD) 
```

是的他们可以。

第三（如果这就是您要问的）：可以使用变量对规则进行参数化，以使`%`占位符取自作为参数的变量吗？

不，不是。您可以[使用预定义`$(foreach ...)`的 、`$(call ...)`和`$(eval ...)`函数的组合来指定使用从变量中获取的值参数化的规则](http://www.gnu.org/software/make/manual/html_node/Eval-Function.html)，但是这些变量的值不能像 的值那样由规则解析过程提供`%`。

# ios - AFNetworking PUT 请求偶尔无法完成

> ID：15190292
> 
> 赞同：1
> 
> 时间：2013-03-03T20:11:00.927
> 
> 标签：ios, objective-c, cocoa-touch, afnetworking

`AFHTTPClient`当我使用此方法将 JSON 对象放入我的子类时，

`- (void)putPath:parameters:success:failure:`

它在 95% 的时间内都有效。但是，每隔一段时间，手术就永远不会结束。即，既不调用成功块也不调用失败块。我已经验证了这种现象至少 5-10 分钟没有任何反应。

我应该检查其他一些意外情况吗？我认为在合理的 60 秒超时内，这个请求必须以某种方式最终完成。另外，我相信我已经看到了这种`AFJSONRequestOperations`不使用 custom的普通行为`AFHTTPClient`。

以前有人见过这样的事情吗？

# heroku - 如何为 Heroku Cedar 上的静态 Rack 站点启用 gzip 压缩？

> ID：15190295
> 
> 赞同：4
> 
> 时间：2013-03-03T20:11:15.570
> 
> 标签：heroku, gzip, rack, deflate, cedar

在[使用 Rack 在 Ruby 中创建静态站点一](https://devcenter.heroku.com/articles/static-sites-ruby)文之后，我在 Heroku 上获得了一个静态站点`config.ru`，如下所示：

```
use Rack::Static,
  :urls => ["/images", "/js", "/css"],
  :root => "public"

run lambda { |env|
  [
    200, 
    {
      'Content-Type'  => 'text/html', 
      'Cache-Control' => 'public, max-age=86400' 
    },
    File.open('public/index.html', File::RDONLY)
  ]
} 
```

当我对结果运行 YSlow 时，它报告没有文件被 gzip 压缩。我该怎么做才能压缩资产和`public/index.html`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-03T20:11:15.570

根据我[之前](https://github.com/awendt/recharge/blob/master/config.ru#L14)使用 Sprockets、Sinatra 和 的经验`Rack::Deflater`，我很确定我`use Rack::Deflater`离我想要的只是另一条线。

我将其更改`config.ru`为：

```
use Rack::Static,
  :urls => ["/images", "/js", "/css"],
  :root => "public"
use Rack::Deflater

run lambda # ...same as in the question 
```

并且我能够验证响应是否已压缩发送：

```
$ curl -H 'Accept-Encoding: gzip' http://localhost:9292 | file -
/dev/stdin: gzip compressed data 
```

`/css`但不适用于、`/js`或下的静态资产`/images`：

```
$ curl -H 'Accept-Encoding: gzip' http://localhost:9292/css/bootstrap.min.css | file -
/dev/stdin: ASCII English text, with very long lines 
```

就在那时我意识到这是一个标准的中间件堆栈——Rack::Static[拦截](https://github.com/rack/rack/blob/master/lib/rack/static.rb#L117)了对静态文件的调用，从而跳过了下面的堆栈！这就是为什么它适用`public/index.html`于资产但不适用于资产。

以下`config.ru`工作（注意`use Rack::Deflater`现在在前面`use Rack::Static`）：

```
use Rack::Deflater
use Rack::Static, 
  :urls => ["/images", "/js", "/css"],
  :root => "public"

run lambda { |env|
  [
    200, 
    {
      'Content-Type'  => 'text/html', 
      'Cache-Control' => 'public, max-age=86400' 
    },
    File.open('public/index.html', File::RDONLY)
  ]
} 
```

验证：

```
$ curl -H 'Accept-Encoding: gzip' http://localhost:9292/css/bootstrap.min.css | file -
/dev/stdin: gzip compressed data, from Unix 
```

# java - 以干净的方式有效地解析 JSON 字符串

> ID：15190304
> 
> 赞同：1
> 
> 时间：2013-03-03T20:12:07.360
> 
> 标签：java, json, string, parsing

在我下面的代码中，`colData`stores `JSON String`。colData 的示例示例-

```
{"lv":[{"v":{"price":70.0,"userId":419},"cn":3},
       {"v":{"price":149.99,"userId":419},"cn":3},
       {"v":{"price":54.95,"userId":419},"cn":3}],
 "lmd":20130206212543} 
```

现在我正在尝试将`id`value 与`userId`上面的 value 匹配`JSON String`。我`id`从不同的来源获得价值。这意味着如果`id`值`419`在上面的 JSON 字符串中，那么`userId`值也应该是`419`. 在 JSON 字符串中，可能有很多，`userId values`所以所有`userId`值都应该与`id`. 如果其中任何一个不匹配，则记录异常。

所以我正在尝试这样的事情-

```
final int id = generateRandomId(random);

for (String str : colData) {
    if (!isJSONValid(str, id)) {
        // log the exception here
        LOG.error("Invalid JSON String " +str+ "with id" +id);
    }
}

public boolean isJSONValid(final String str, final int id) {
    boolean valid = false;
    try {
        final JSONObject obj = new JSONObject(str);
        final JSONArray geodata = obj.getJSONArray("lv");
        final int n = geodata.length();

        for (int i = 0; i < n; ++i) {
            final JSONObject person = geodata.getJSONObject(i);
            JSONObject  menu = person.getJSONObject("v");
            if(menu.getInt("userId") == id) {
                valid = true;
            }
        }
    } catch (JSONException ex) {
        valid = false;
    }
    return valid;
} 
```

根据我的理解，看起来我可以使`isJSONValid`方法更清洁。在我上面的`isJSONValid`方法中，我重复了一些我不应该做的事情。如果我错过了什么，谁能帮助我如何让这个更干净。我将能够学到更多的东西。谢谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T20:28:39.907

`valid = true`当你发现一个无效`userId`并立即失败时，你可以初始化并将其设置为 false：

```
public boolean isJSONValid(final String str, final int id) {
    boolean valid = true;
    try {
        final JSONObject obj = new JSONObject(str);
        final JSONArray geodata = obj.getJSONArray("lv");
        final int n = geodata.length();

        for (int i = 0; i < n; ++i) {
            final JSONObject person = geodata.getJSONObject(i);
            JSONObject  menu = person.getJSONObject("v");
            if(menu.getInt("userId") != id) {
                valid = false;
                break;
            }
        }
    } catch (JSONException ex) {
        valid = false;
    }
    return valid;
} 
```

这样，只有当所有元素都有效时，您才遍历所有数组的元素，这是您实际必须这样做的唯一情况。

# c# - 在 WPF 桌面应用程序中漫无目的地拖放

> ID：15190305
> 
> 赞同：1
> 
> 时间：2013-03-03T20:12:08.397
> 
> 标签：c#, .net, wpf, xaml

我发现在我的应用程序中拖放任何控件（并且我计划允许任何控件）都非常困难，而没有 Drop 目标或其他任何东西。我只想能够将任何控件从这里拖到“那里的某个地方”。但这似乎不可能。这可能吗？只需几行代码就可以在 WinForms 中实现拖放，我们如何在 WPF 中获得同样的拖放支持？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T20:30:01.710

您在问题中描述的内容和澄清评论更多地是关于重新定位元素，而不是拖放。

这种类型的活动在 WPF 中相当容易，唯一需要考虑的是包含元素的布局面板。因为 WPF 试图围绕 Layout 提供更多结构（使用`Grids`、`StackPanels`等），所以您需要一个允许自由定位元素的面板。这就要求`Canvas`.

因此，如果您有一个`Canvas`with 元素（例如，用`Canvas.Left`and定位），您可以使用,和允许用户在画布上拖动/重新定位元素。`Canvas.Top``MouseDown``MouseMove``MouseUp`

# php - 如何根据项目在鼠标悬停时创建弹出窗口？

> ID：15190309
> 
> 赞同：-1
> 
> 时间：2013-03-03T20:12:44.747
> 
> 标签：php, jquery, ajax, codeigniter

我想根据项目创建一个弹出窗口。根据每个项目，要出现的文本是从数据库中获取的。具体来说，我有这个代码：

```
{foreach $images as $item}
        <div class="icoana" id="container">
                    <a href="{base_url()}assets/image/{$item->code}/{$item->name}" class="fancybox" rel="gallery" title="{$item->title}"><img  class="icoane" src="{base_url()}assets/image/{$item->code}/{$item->name}"></a>

                    <div class="detalii">
                        <table style="font-size: 25px">
                           <tr><td>Nume:</td><td>{$item->title}</td> </tr>
                           <tr><td>Lungime:</td><td>{$item->width}&nbsp cm</td> </tr> 
                           <tr><td>Latime:</td><td>{$item->height}&nbsp cm</td></tr>
                        </table>   
                    </div>

                    <div class="despre" id="popup"><img src="{base_url()}assets/image/go.jpg" style="weight: 20px; height:20px;" >Mai  multe...</div>

        </div>
{/foreach} 
```

当鼠标悬停时，`div class="despre"`我希望出现一个弹出窗口，其中包含存储在`{$item->description}`. 我想看起来像这样的弹出窗口：[http](http://creativeindividual.co.uk/2011/02/create-a-pop-up-div-in-jquery/.I) ://creativeindividual.co.uk/2011/02/create-a-pop-up-div-in-jquery/。我想要一个示例或来源的链接代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T20:23:01.543

从广义上讲，您需要做的是两个步骤

1) 打印出 php 代码中的 div 描述，紧挨着提到的 div 下方。

所以你的代码变成了。

```
{foreach $images as $item}
        <div class="icoana" id="container">
                    <a href="{base_url()}assets/image/{$item->code}/{$item->name}" class="fancybox" rel="gallery" title="{$item->title}"><img  class="icoane" src="{base_url()}assets/image/{$item->code}/{$item->name}"></a>

                    <div class="detalii">
                        <table style="font-size: 25px">
                           <tr><td>Nume:</td><td>{$item->title}</td> </tr>
                           <tr><td>Lungime:</td><td>{$item->width}&nbsp cm</td> </tr> 
                           <tr><td>Latime:</td><td>{$item->height}&nbsp cm</td></tr>
                        </table>   
                    </div>

                    <div class="despre" id="popup"><img src="{base_url()}assets/image/go.jpg" style="weight: 20px; height:20px;" >Mai  multe...</div>
                    <div class="desc" style="display:hidden">
                          {$item->description} 
                     </div>
        </div>
        {/foreach} 
```

2）之后使用您在上面提供的链接中的相同代码并修改显示部分

```
$(function() {

        $('.despre').hover(function(e) {
           //Code to show the popup
           // Modify to use any standard popup library
           // The code below , for now display the desc only.
           $(this).next().show();

        }, function() {
          $(this).next().hide();
        });

      }); 
```

现在这将显示和隐藏 div。您可以使用任何 ToolTip 库来实际显示弹出窗口

这里的例子：[http ://www.1stwebdesigner.com/css/stylish-jquery-tooltip-plugins-webdesign/](http://www.1stwebdesigner.com/css/stylish-jquery-tooltip-plugins-webdesign/)

问候

施瑞亚斯 N

# loops - Xtend 循环中断

> ID：15190311
> 
> 赞同：5
> 
> 时间：2013-03-03T20:12:49.717
> 
> 标签：loops, code-generation, break, xtend

在 Xtend 中，是否可以中断循环或进行检查以中断循环？

```
«FOR e:d.entitys»
    «FOR a:e.attributes»
        «IF a.eClass.name.contentEquals('Something')»
            «e.name» "This output should be output one for each Entity e"
        «ENDIF»
    «ENDFOR»
«ENDFOR» 
```

我的输出是：

```
Entity 1 "This output should be output one for each Entity e"
Entity 1 "This output should be output one for each Entity e"
Entity 1 "This output should be output one for each Entity e"
Entity 2 "This output should be output one for each Entity e"
Entity 4 "This output should be output one for each Entity e"
Entity 4 "This output should be output one for each Entity e" 
```

但我想要的是：

```
Entity 1 "This output should be output one for each Entity e"
Entity 2 "This output should be output one for each Entity e"
Entity 4 "This output should be output one for each Entity e" 
```

如何实现我想要的输出？我听说您可以调用其他方法或其他方法，但我不知道该怎么做，有人可以给我一些解决这个问题的代码吗？谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-04-28T15:47:39.663

您可以使用集合来存储您已经访问过的条目。例如，考虑以下程序：

```
def static void main(String... args) {
    val list = #['my', 'possibly', 'possibly', 'duplicated', 'duplicated', 'duplicated', 'entities']
    val visited = new LinkedHashSet
    println(
    '''«FOR a:list»
        «IF visited.add(a)»
            «a» "This output should be output one for each Entity e"
        «ENDIF»
    «ENDFOR»''')
} 
```

它输出：

```
my "This output should be output one for each Entity e"
possibly "This output should be output one for each Entity e"
duplicated "This output should be output one for each Entity e"
entities "This output should be output one for each Entity e" 
```

# javascript - WebGL：非方形 alpha 纹理的数据

> ID：15190313
> 
> 赞同：2
> 
> 时间：2013-03-03T20:13:01.430
> 
> 标签：javascript, webgl, textures

我对 webGL 有一个奇怪的问题。

我正在使用动态生成的纹理，其中只有 Alpha 通道很重要。这是代码：

```
var texture  = new Uint8Array(ar); // ar is my array
gl.bindTexture(gl.TEXTURE_2D, this.transparencyTexture);
gl.texImage2D(gl.TEXTURE_2D, 0, gl.ALPHA, array.length, array[0].length, 0, gl.ALPHA, gl.UNSIGNED_BYTE, texture);
gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);
gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);
gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE); 
```

我总是使用 POT 数组的“宽度”和“高度”，但只要“宽度”<>“高度”它就不起作用。所以它目前只适用于正方形。

可以做什么？

编辑：

[http://jsfiddle.net/SergeJcqmn/EAmjU/9/](http://jsfiddle.net/SergeJcqmn/EAmjU/9/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T16:59:10.950

在jsfiddle中，js的第76行不正确：

```
ar.push(array[x][(array.length - 1) - y] ?  128 : 0); 
```

我认为这应该是：

```
ar.push(array[x][(array[0].length - 1) - y] ?  128 : 0); 
```

# c# - 使用 NavigationCommands.BrowseBack 属性时出现 WPF 绑定问题

> ID：15190314
> 
> 赞同：1
> 
> 时间：2013-03-03T20:13:24.350
> 
> 标签：c#, wpf, data-binding, navigation, windows-phone-8

我想知道为什么这种行为会发生在我的页面中。我有一个页面（比如'x'），它有一组文本框，这些文本框在容器内定义，比如堆栈面板，并且数据使用 c# 中的 datacontext 与此堆栈面板绑定。现在，当我导航到另一个页面并再次返回该页面（页面'x'）（URI 导航）时，将发生数据绑定并且将填充字段购买对象的数据作为对象属性的 getter 方法将获得调用，但是通过按返回按钮（NavigationCommands.BrowseBack），页面中不会发生数据绑定。没有字段将采用日期，因为在这种情况下不会调用对象属性的 getters 方法！我不想在后端通过引用每个文本框并为它们分配值来做到这一点。

任何有相同问题或解决方案的人请分享。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T20:26:15.817

您可以尝试手动更新绑定。例如，您可以在这篇文章中编写以下代码作为“BenCr”答案的扩展。[有没有办法刷新 WPF 中的所有绑定？](https://stackoverflow.com/questions/5157068/is-there-a-way-to-refresh-all-bindings-in-wpf)

```
var temp = yourStackPanel.DataContext;
yourStackPanel.DataContext = null;
yourStackPanel.DataContext = temp; 
```

# r - 在 R 中生成具有预定义的 pdf 总和或 cdf 总和的 RNG 向量

> ID：15190317
> 
> 赞同：6
> 
> 时间：2013-03-03T20:13:27.210
> 
> 标签：r, random

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T20:56:33.247

**1.** In the case of a Gaussian distribution, sampling from `(X1,...,Xn)` under the condition that `X1+...+Xn=s` is just sampling from a [conditional Gaussian distribution](http://en.wikipedia.org/wiki/Multivariate_normal_distribution#Conditional_distributions).

The vector (X1,X2,...,Xn,X1+...+Xn) has a Gaussian distribution, with zero mean, and variance matrix

```
1 0 0 ... 0 1
0 1 0 ... 0 1
0 0 1 ... 0 1
...
0 0 0 ... 1 1
1 1 1 ... 1 n. 
```

We can therefore sample from it as follows.

```
s <- 1  # Desired sum
n <- 10
mu1 <- rep(0,n)
mu2 <- 0
V11 <- diag(n)
V12 <- as.matrix(rep(1,n))
V21 <- t(V12)
V22 <- as.matrix(n)
mu <- mu1 + V12 %*% solve(V22, s - mu2)
V  <- V11 - V12 %*% solve(V22,V21)
library(mvtnorm)
# Random vectors (in each row)
x <- rmvnorm( 100, mu, V )
# Check the sum and the distribution
apply(x, 1, sum)
hist(x[,1])
qqnorm(x[,1]) 
```

For an arbitrary distribution, this approach would require you to compute the conditional distribution, which may not be easy.

**2.** There is another easy special case: a uniform distribution.

To uniformly sample n (positive) numbers that sum up to 1, you can take n-1 numbers, uniformly in [0,1], and sort them: they define n intervals, whose lengths turn sum up to 1, and happen to be uniformly distributed.

Since those points form a Poisson process, you can also generate them with an exponential distribution.

```
x <- rexp(n)
x <- x / sum(x)  # Sums to 1, and each coordinate is uniform in [0,1] 
```

This idea is explained (with a lot of pictures) in the following article: [Portfolio Optimization for VaR, CVaR, Omega and Utility with General Return Distributions](http://papers.ssrn.com/sol3/papers.cfm?abstract_id=1856476), (W.T. Shaw, 2011), pages 6 to 8.

**3.** (EDIT) I had initially misread the question, which was asking about `sum(pnorm(x))`, not `sum(x)`. This turns out to be easier.

If `X` has a Gaussian distribution, then `pnorm(X)` has a uniform distribution: the problem is then to sample from a uniform distribution, with a prescribed sum.

```
n <- 10
s <- 1  # Desired sum
p <- rexp(n)
p <- p / sum(p) * s  # Uniform, sums to s
x <- qnorm(p)        # Gaussian, the p-values sum to s 
```

# jquery - jQuery Validate 插件远程规则不返回布尔值

> ID：15190321
> 
> 赞同：-1
> 
> 时间：2013-03-03T20:13:41.127
> 
> 标签：jquery, ajax, jquery-validate, jsonp

我必须在 jQuery 验证器中调用一个带有远程字段的 servlet 来检查是否已经存在插入的用户名。问题是我必须在 JSONP 中调用它，并且它既不会返回布尔值也不会返回字符串，而是返回带有可能替代方案的 Json。有什么帮助吗？

使用这种方法，它总是说用户已经存在！

```
 function parseUser(a){return a}

    $.validator.addMethod("checkUserUnique", function(value, element) {
    $.ajax({
        url:'myservletJSONP.do',
        data: {'username':function(){return $("#registration-form1 :input[name='username']").val()}},
        dataType: "jsonp",
        jsonp: false,
        jsonpCallback: 'parseUser',
        success: function(data){
            if(data[0].result=='exist'){
                return false;
            }else{
                return true;
            }
        },
        error: function(er){
            console.log("error: "+er);
        }
    })

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T20:57:43.737

是的，`remote`规则是寻找一个布尔值。

如果您无法做到这一点，那么替代方法是创建并使用自定义规则。在您的自定义方法中，您可以编写任何您想要的函数...运行您的`ajax`，测试您的结果，并简单`return true`地传递一个经过验证的字段。

[http://docs.jquery.com/Plugins/Validation/Validator/addMethod#namemethodmessage](http://docs.jquery.com/Plugins/Validation/Validator/addMethod#namemethodmessage)

```
jQuery.validator.addMethod("myRule", function(value, element) { 
    // your ajax
    // if ( your ajax result == "something" ) {
        // return false; // represents failed validation
    //} else {
        // return true; // represents passed validation
    //}
}, "failed - your custom message"); 
```

回调的参数是：

*   已验证元素的当前**值**
*   要验证的**元素**

```
$(document).ready(function() {
    $('#myform').validate({
        rules: {
            myfield: {
                myRule: true  // instead of remote
            }
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-14T10:29:25.570

这就是答案：

```
 $.validator.addMethod("remoteValidator", function(value, element, param) {
        var previous = this.previousValue(element);
        if (!this.settings.messages[element.name] ) {
            this.settings.messages[element.name] = {};
        }
        previous.originalMessage = this.settings.messages[element.name].remote;
        this.settings.messages[element.name].remote = previous.message;
        param = typeof param === "string" && {url:param} || param;
        if ( previous.old === value ) {
            return previous.valid;
        }
        previous.old = value;
        var validator = this;
        this.startRequest(element);
        var data = {};
        data[element.name] = value;
        $.ajax($.extend(true, {
            url: param.url,
            data: function(){return param.data || data}(),
            dataType: "jsonp",
            jsonp: false,
            jsonpCallback: param.callback,
            success: function( response ) {
                var valid = param.checkValidity(response) 
                if ( valid ) {
                    var submitted = validator.formSubmitted;
                    validator.prepareElement(element);
                    validator.formSubmitted = submitted;
                    validator.successList.push(element);
                    delete validator.invalid[element.name];
                    validator.showErrors();
                } else {
                    var errors = {};
                    var message = validator.settings.messages[element.name]["remoteValidator"];
                    errors[element.name] = message;
                    validator.invalid[element.name] = true;
                    validator.showErrors(errors);                       
                }
                previous.valid = valid;
                validator.stopRequest(element, valid);
            }
        }, param));
        return "pending";
}); 
```

您可以将其添加到您的规则中，这些行：

```
remoteValidator: {'url':'myServlet','checkValidity': function(resp){if(someStuff)return true; return false}                                         } 
```

# r - 如何在R中访问列表的一部分

> ID：15190329
> 
> 赞同：4
> 
> 时间：2013-03-03T20:14:27.590
> 
> 标签：r

我在 r 中有 optim 函数，它返回如下内容列表：

```
[[354]]
    r     k sigma 
389.4 354.0 354.0 
```

但是当我尝试访问说 list$sigma 时，它不存在返回 NULL。

我试过附加，我试过名字，我试过把它分配给一个矩阵，但这些东西都不起作用列表？？

非常感谢！！

str 给了我这个输出：

```
List of 354
 $ : Named num [1:3] -55.25 2.99 119.37
  ..- attr(*, "names")= chr [1:3] "r" "k" "sigma"
 $ : Named num [1:3] -53.91 4.21 119.71
  ..- attr(*, "names")= chr [1:3] "r" "k" "sigma"
 $ : Named num [1:3] -41.7 14.6 119.2 
```

所以我在一个列表中的一个列表中有一个双精度（？）我仍然对如何循环遍历列表并选择一个满足我的条件而无需从头开始编写函数感到困惑

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-03T20:20:16.863

**关键问题是您有一个列表列表**（或 data.frames 列表，实际上也是一个列表）。
要确认这一点，请查看`is(list[[354]])`.

解决方案只是添加一个额外的索引级别。下面您有多种选择来完成此操作。

* * *

您可以使用向量作为 的索引`[[`，例如，如果您想从第 354 个元素访问第三个元素，您可以使用

```
 myList[[ c(354, 3) ]] 
```

* * *

您也可以使用字符索引，但是，所有嵌套级别都必须具有命名索引。

```
names(myList) <- as.character(1:length(myList))
myList[[ c("5", "sigma") ]] 
```

* * *

*最后，请尽量避免使用 , 等名称`list`。`data`这`df`将导致代码崩溃和错误，这看起来无法解释和神秘，直到人们意识到他们试图对函数进行子集化*

* * *

## 编辑：

在上面的评论中回答您的问题：如果您想查看对象的结构（即对象的“构成”），请使用`str`

```
> str(myList)
List of 5
 $ :'data.frame': 1 obs. of  3 variables:
  ..$ a    : num 0.654
  ..$ b    : num -0.0823
  ..$ sigma: num -31
 $ :'data.frame': 1 obs. of  3 variables:
  ..$ a    : num -0.656
  ..$ b    : num -0.167
  ..$ sigma: num -49
 $ :'data.frame': 1 obs. of  3 variables:
  ..$ a    : num 0.154
  ..$ b    : num 0.522
  ..$ sigma: num -89
 $ :'data.frame': 1 obs. of  3 variables:
  ..$ a    : num 0.676
  ..$ b    : num 0.595
  ..$ sigma: num 145
 $ :'data.frame': 1 obs. of  3 variables:
  ..$ a    : num -0.75
  ..$ b    : num 0.772
  ..$ sigma: num 6 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T20:21:52.720

如果你想要 - 例如 - 所有的 sigma，你可以使用 sapply：

```
sapply(list, function(x)x["sigma"]) 
```

您可以使用它来找到最小值和最大值：

```
range(sapply(list, function(x)x["sigma"])) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T20:36:03.850

使用 ，`do.call`您可以这样做：

```
 do.call('[',mylist,354)['sigma'] 
```

# c - 将-1,0或1随机添加到C中的数字

> ID：15190332
> 
> 赞同：3
> 
> 时间：2013-03-03T20:14:54.167
> 
> 标签：c, random, numbers, range, generator

我试图找出一种可以使用 srand 和 rand 随机生成 -1,0 或 1 的方法。但是，每当我这样做时，我只能获得生成范围内的值，而不能获得 -1 或 1。

这是我尝试过的：

```
 int value;
   srand(time(NULL));
   value=2*rand()/(RAND_MAX)-1; 
```

但是，执行时，我总是生成 0。我希望能够偶尔生成 -1 和 1。问题是我必须使用 rand 和 srand，作为规范的一部分。任何帮助将不胜感激，并提前感谢:)。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-03T20:17:39.920

怎么样

```
value = (rand() % 3) - 1; 
```

该表达式`rand() % 3`生成一个介于`0`和`2`（含）之间的随机数，然后减一得到介于`-1`和`1`（含）之间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T21:08:41.517

首先，您需要 3 个不同的值，但您只要求 2 个。其次，在某些实现（显然是您正在使用的那个）中，RAND_MAX == INT_MAX 因此您的计算可能会溢出。您可以使用浮点数来解决这个问题

```
// srand(time(NULL)); Only do this once per invocation of your program
int value = (int)(3.0*rand()/RAND_MAX) - 1; 
```

或长长

```
int value = 3LL*rand()/RAND_MAX - 1; 
```

或通过将因子移动到除数中​​：

```
int value = rand()/(RAND_MAX/3) - 1; 
```

编辑：请注意，由于 RAND_MAX 不是 3 的倍数，因此这些会产生略微偏斜（或多或少，因为 RAND_MAX 或多或少）的结果。您可以通过以下方式避免这种情况：

```
int r;
do
{
    r = rand();
} while (r >= RAND_MAX/3 * 3);
int value = r / (RAND_MAX/3) - 1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T20:22:05.503

您的代码有一个错误，并且可能遭受整数溢出。

改变

```
value = 2 * rand() / RAND_MAX - 1; 
```

到

```
value = rand() / (RAND_MAX / 3 + 1) - 1; 
```

# file - Windows 8 StorageFile.GetFileFromPathAsync 使用 UNC 路径

> ID：15190333
> 
> 赞同：1
> 
> 时间：2013-03-03T20:14:59.420
> 
> 标签：file, windows-8, unc

有没有人设法使用 Windows 8 应用程序将文件从 unc 目录复制到本地目录？

[根据官方文档here](http://msdn.microsoft.com/en-us/library/windows/apps/hh967755.aspx)

可以连接到 UNC 路径

我正在使用 std FILE ACCESS 示例并将一行代码更改为如下所示 我添加了所有功能 添加 .txt 作为文件类型 UNC 路径对每个人都是读写的，并且位于同一台机器上。

但我不断收到拒绝访问错误。

任何人都可以为我提供一个工作示例吗？这让我很生气，并且真的质疑 LOB 应用程序的 win 8 dev 的全部意义。

TIA

```
private async void Initialize()
        {
            try
            {
                //sampleFile = await Windows.Storage.KnownFolders.DocumentsLibrary.GetFileAsync(filename);
                string myfile = @"\\ALL387\Temp\testfile.txt";
                sampleFile = await Windows.Storage.StorageFile.GetFileFromPathAsync(myfile);

            }
            catch (FileNotFoundException)
            {
                // sample file doesn't exist so scenario one must be run
            }

            catch (Exception e)
            {
                var fred = e.Message;

            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T20:58:30.500

我已经解决了这个问题，我发现最好的方法是创建一个文件夹对象枚举文件夹对象中的文件，一次将文件复制到本地文件夹，然后访问它们

文件好像打不开，但是可以复制。（这就是我最初想要实现的目标）

希望这可以帮助

```
private async void Initialize()
    {
        try
        {

            var myfldr = await Windows.Storage.StorageFolder.GetFolderFromPathAsync(@"\\ALL387\Temp");
            var myfiles = await myfldr.GetFilesAsync();

            foreach (StorageFile myfile in myfiles)
            {
                StorageFile fileCopy = await myfile.CopyAsync(KnownFolders.DocumentsLibrary, myfile.Name, NameCollisionOption.ReplaceExisting);
            }

            var dsd = await Windows.Storage.KnownFolders.PicturesLibrary.GetFilesAsync();

            foreach (var file in dsd)
            {
              StorageFile  sampleFile = await Windows.Storage.StorageFile.GetFileFromPathAsync(file.Path);
            }

        }
        catch (FileNotFoundException)
        {
            // sample file doesn't exist so scenario one must be run
        }

        catch (Exception e)
        {
            var fred = e.Message;

        }
    } 
```

# xamarin.ios - 无法将自定义 XIB 插座与 UICollectionViewCell 一起使用

> ID：15190334
> 
> 赞同：1
> 
> 时间：2013-03-03T20:15:22.857
> 
> 标签：xamarin.ios, custom-controls, xib, uicollectionviewcell

从我的 CustomClass 访问网点时：UICollectionViewCell，它们显示为未初始化并且无法设置正确的值。

我看到的每个示例都使用普通类（无 XIB）来设置 UI。

```
[Register("CustomCommentCell")]
public partial class CustomCommentCell : UICollectionViewCell
{
    public static readonly NSString Identifier = new NSString("CustomCommentCell");

    public CustomCommentCell () : base()
    {
    }

    public CustomCommentCell (IntPtr handle) : base (handle)
    {
    }

    public void updateData()
    {
        this.lblComment.Text = "Test";
    }
} 
```

另一方面，我已经注册了这个类： this.tableComments.RegisterClassForCell (typeof(CustomCommentCell),commentCellId);

并正确设置 GetCell。但是，当尝试将 outlet 设置为特定值时，它表示它为 null。(this.lblcomment = null) 虽然它应该是一个 UILabel 初始化。

有什么线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-08-11T09:54:14.380

使用 XIB 创建自定义 CollectionViewCell。请执行下列操作

1) 创建从 UIcollectionViewCell 继承的 C# 类

```
[Register("MyCustomCell")]
public class MyCustomCell : UICollectionViewCell
{

    public static readonly NSString Key = new NSString ("MyCustomCell");

    [Export ("initWithFrame:")]
    public MyCustomCell(CoreGraphics.CGRect frame) : base (frame)
    {

    }

    public override UIView ContentView {
        get {
            var arr=    NSBundle.MainBundle.LoadNib ("MyCustomCell", this, null);
            UIView view =arr.GetItem<UIView> (0);
            view.Frame = base.ContentView.Frame;
            base.ContentView.AddSubview (view);
            return base.ContentView;
        }
    }

} 
```

2）添加一个IphoneView XIB文件，其名称与步骤1中创建的Class名称相同

3) 在 XCODE 中打开 XIB 并进行以下更改

[![在此处输入图像描述](../Images/9616fdaf59e2c02be46ad2fc3e73c425.png)](https://i.stack.imgur.com/Tce5s.png)

3.1) 选择 FileOwner 设置与步骤 1 相同的类名称 [![在此处输入图像描述](../Images/07a692e608a32260f6aa7c7973bedc5b.png)](https://i.stack.imgur.com/O39Et.png) 3.2) 选择视图 设置类名称 UIView

4) 相应地设计您的 XIB

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T14:47:27.183

我无法完全理解您所看到的问题。什么是“自定义 XIB 插座”？为什么这个问题被标记为“自定义控件”？您可以展示一些示例代码或图片来帮助解释问题吗？

* * *

我用于 UICollectionViewCell 的方法与我用于 UITableViewCell 的方法相同 - 请参阅教程 - [http://slodge.blogspot.co.uk/2013/01/uitableviewcell-using-xib-editor.html](http://slodge.blogspot.co.uk/2013/01/uitableviewcell-using-xib-editor.html)

* * *

**更新：**根据您作为评论发布的代码（不确定它是否完整），我认为这对您完成该教程很有用。有几个步骤需要完成，包括注册自定义类名和使用`RegisterNibForCellReuse`- 其中一个可能会为您解决这个问题。

# smarty - 在 truncate smarty 中显示链接

> ID：15190336
> 
> 赞同：0
> 
> 时间：2013-03-03T20:15:29.593
> 
> 标签：smarty

在 smarty 中，我们可以使用它来缩短文本输出：

```
{$articleTitle}
{$articleTitle|truncate}
{$articleTitle|truncate:30}
{$articleTitle|truncate:30:""}
{$articleTitle|truncate:30:"---"}
{$articleTitle|truncate:30:"":true}
{$articleTitle|truncate:30:"...":true}
{$articleTitle|truncate:30:'..':true:true} 
```

结果将是这样的：

```
Two Sisters Reunite after Eighteen Years at Checkout Counter.
Two Sisters Reunite after Eighteen Years at Checkout Counter.
Two Sisters Reunite after...
Two Sisters Reunite after
Two Sisters Reunite after---
Two Sisters Reunite after Eigh
Two Sisters Reunite after E...
Two Sisters Re..ckout Counter. 
```

我要显示的是：“ `... <a href="{$url}">read more</a>`”当您将其应用于代码时，它将是这样的：

```
{$articleTitle|truncate:30:"... <a href="{$url}">read more</a>":true} 
```

但这不起作用。我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T21:59:48.250

首先尝试在您的消息中用单引号替换双引号：

```
{$articleTitle|truncate:30:"... <a href='{$url}'>read more</a>":true} 
```

如果没有帮助，请尝试为您的消息使用其他变量：

```
{assign var=readMoreText value="... <a href='{$url}'>read more</a>"}   
{$articleTitle|truncate:30:$readMoreText:true} 
```

# css - CSS 平台特定的 hack

> ID：15190340
> 
> 赞同：2
> 
> 时间：2013-03-03T20:15:56.987
> 
> 标签：css, cross-platform

我想知道是否有一种使用 CSS 定位平台的方法，即不同的操作系统——Windows 7、Windows 8、Linux 等......

我有一个样式表，带有一个 ul 列表和一个边框底部设置，当悬停在菜单元素上时会改变颜色。问题是，在所有浏览器（Chrome、FF IE 等）上，li 项目在 Windows 7 和 Windows8/Ubuntu 之间的显示不同，我尝试使用不同的 CSS 属性，例如行高、填充、边距等，但是无论我做什么，win7和win8/ubuntu之间的项目布局都不一样。我在各种 PC 上进行了测试，并在相同版本的浏览器之间进行了测试（最新的 Chrome、最新的 FF、IE9 ......）

那么我可以说带有 css hack 的 Windows 8 吗？还是只是 Ubuntu/Linux？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-06-14T09:58:04.587

根据您使用的浏览器的性质，有一种方法可以做到这一点，一些演绎推理和一些技巧......并非一切都可以做到，但有一些方法可以用于仅使用 CSS 进行操作系统定位。当然，脚本提供了更多选择。这反映了我为确保准确性而进行的大约 6 个月的研究和工作，如下文所述。

目前我不知道用 Chrome 来做这件事的方法，我也没有研究过 Opera，尤其是现在它使用了与 Chrome 相同的方法。Chrome 直到第 3 版才发布适用于 Mac 的版本。此外，对于 Mac，Google 已发表声明，在 Chrome 49 之后将不支持 OS X 10.6-10.8，因此 Chrome 50 及更高版本将指示 Mac OS X 10.9 (Mavericks) 或较新。

不过，Firefox、Internet Explorer 和 Safari 有更好的选择。

Firefox 4 和更新版本可以检测到正在使用 Windows 主题，因此即使是旧版本的 Firefox 至少也能检测到您是否在使用 Windows。我前一阵子创建了这个，今天再次测试了这个：

```
@media screen and (-moz-windows-theme) {
    .windows {
        color:red;
    }
} 
```

出于同样的原因，这个适用于除 Windows 之外的任何东西，同样适用于 Firefox 4 和更新版本：

```
@media not screen and (-moz-windows-theme) {
    _:-moz-ui-valid, .nonwindows {
        color:red;
    }
} 
```

[-moz-os-version 已添加到 firefox 25 媒体查询中，但根据来自https://developer.mozilla.org/en-US/docs/Web/Guide/CSS/Media_queries](https://developer.mozilla.org/en-US/docs/Web/Guide/CSS/Media_queries)的 mozilla 文档，只有几个选项

操作系统：windows-xp | windows-vista | windows-win7 | windows-win8 | windows-win10

因此，此设置仅适用于现代 Firefox 浏览器版本 >= 25。在发布此更新时，Firefox 为 35 版。

```
@media screen and (-moz-os-version:windows-xp) {
    .windows,.winxp {
        color:red;
    }
}

@media screen and (-moz-os-version:windows-vista) {
    .windows,.vista {
        color:red;
    }
}

@media screen and (-moz-os-version:windows-win7) {
    .windows,.win7 {
        color:red;
    }
}

@media screen and (-moz-os-version:windows-win8) {
    .windows,.win8 {
        color:red;
    }
}

@media screen and (-moz-os-version:windows-win10) {
    .windows,.win10 {
        color:red;
    }
} 
```

Microsoft 的 Edge 浏览器（以前称为 Spartan）目前仅在 Windows 10 中。要检测它：

```
/* Microsoft Edge Browser */

@supports (-ms-ime-align:auto) {
    .windows,.win10 {
        color:red;
    }
} 
```

注意：以前的 -ms-accelerator:true 方法在较新版本中发生了变化，因此可以用于针对特定版本的边缘，但不是全部。-ms-ime-align:auto 在 2017 年仍然适用于所有这些。

还有一些方法可以检测 Macintosh 计算机。

Firefox >= 24 为 OS X 10.7 Lion 和更新版本引入了一种新的滚动条覆盖方法，可以通过媒体查询检测到：

```
@media screen and (-moz-overlay-scrollbars) {
    .mac,.mac10_7up {
        color:red; 
    } 
} 
```

Firefox >= 25 还可以检测 Mac OS X，因为它们在 25 版中添加了对 OS X 字体平滑的支持：

```
@supports (-moz-osx-font-smoothing:auto) {
    .mac,.mac10_6up {
        color:red; 
    } 
} 
```

因为@media 查询和@supports 过滤器可以相互嵌套，所以现在可以进行以下操作——以使用 Firefox 24 和更高版本定位 JUST OS X 10.6 Snow Leopard：

```
@supports (-moz-osx-font-smoothing:auto) {
  @media not all and (-moz-overlay-scrollbars) {
    .mac,.mac10_6 {
        color:red;
    } 
  }
} 
```

Firefox 17 及更高版本仅支持 Mac OS X 10.6+（Snow Leopard 和更新版本），因此如果您有上述任何 OS X CSS 规则的结果，则说明您使用的不是 OS X 10.5 或更早版本。（[https://en.wikipedia.org/wiki/History_of_Firefox#Version_17_.28ESR.29](https://en.wikipedia.org/wiki/History_of_Firefox#Version_17_.28ESR.29)）

相反，再次在 Firefox 25+ 中，可以否定 OS X（10.6 和更高版本）——由于 10.5 和更早版本不支持此版本的 Firefox，这意味着这根本不是 Mac：

```
@supports (-moz-appearance:none) and (background-attachment:local)
  and (not (-moz-osx-font-smoothing:auto)) {
    .nonmac {
        color:red; 
    } 
} 
```

从 Firefox 49 开始，Firefox 不再支持 10.9 之前的 Mac OS X，因此如果您的版本为 48 或更低，则它必须是 OS X 版本 10.8 或更早，或者如果您的版本介于 17-48 之间，则它必须是 OS X 10.6-10.8出于同样的原因。

当我写这篇文章时，iOS（iPad 和 iPhone）没有 Firefox 版本，所以带有 OS X 字体平滑的 Firefox 确实只涵盖了 Mac 电脑，而不是 Apple 移动设备。与 iOS 版 Chrome 一样，iOS 版 Firefox 使用 Safari 引擎，因此在 iPad 和 iPhone 上使用 Safari hack。因此，它们都是可定位的——作为 Safari，但暗地里并不是他们所说的那样。

通过同时否定两者，我们有一种方法可以定位剩下的东西：Android/Linux，同样是 Firefox 25 和更新版本：

```
@supports (-moz-appearance:none) and (background-attachment:local)
  and (not (-moz-osx-font-smoothing:auto)) {
    @media not screen and (-moz-os-version) { 
        .lindroid {
           color:red; 
        }
    } 
} 
```

如果您使用 Internet Explorer 版本 6 或更新版本（Windows XP 和更新版本），那么无论如何您显然都在使用 Windows。这也可以通过不止一种方式来确定。

直到 Internet Explorer 9 之前，Windows 中都存在条件注释，因此可用于收集更多信息：

这只检测你有windows，但不一定是版本，因为Internet Explorer 6-9只存在于windows平台上。此时，Internet Explorer 11 是当前版本，因此不会检测 10 和 11，而是检测 9 及之前的版本：

```
<!--[if (gte IE 6)&(lte IE 9)]><style type="text/css">

    .windows {
        color:red;
    }

</style><![endif]--> 
```

Internet Explorer 6 仅存在于 Windows XP 中，或者今天不再使用的旧 Windows 版本中，所以这适用于那个：

```
<!--[if (IE 6)]><style type="text/css">

    .windows,.winxp {
        color:red;
    }

</style><![endif]--> 
```

Internet Explorer 7 存在于 Windows XP Vista 中，并且当您单击 Internet Explorer 8 或更高版本中的兼容模式选项时，通常也会被模拟。

如果您使用的是 Internet Explorer 10 或更新版本，则此选项有效，因此您使用的是 Windows 7 或 8。

```
@media screen and (-ms-high-contrast:active), (-ms-high-contrast:none) { 
    .windows {
        color:red;
    }
} 
```

我个人制作的其中一个作品检测到 Internet Explorer 11 或更高版本，可用于 Windows 7 和更高版本，最高 8.1。

```
_:-ms-fullscreen, :root .windows { 
    color:red; 
} 
```

如果您不想使用 Internet Explorer 条件注释，而是希望使用媒体查询，那么这些确实存在：

要检测 Internet Explorer 6-7（因此是 Windows XP 和 Windows 7 之前的旧版本），此方法有效：

```
@media screen\9 
{
    .windows {
        color:red;
    }
} 
```

这是我为 Internet Explorer 9 创建的，因为不存在。（所以赢得 7 或赢得远景）

```
@media screen and (min-width:0\0) and (min-resolution:.001dpcm) 
{
    .windows {
        color:red;
    }
} 
```

这会检测 Internet Explorer 8（因此 windows XP-windows 7）

```
@media \0screen
{
    .windows {
        color:red;
    }
} 
```

去年，我从其他各个部分制作了这个媒体查询，它处理 Safari 6.1 和更高版本。Safari 在本文发布时是第 7 版。将以这种方式检测 Mac 和移动设备，例如基本的 Android 浏览器：

```
@media screen and (-webkit-min-device-pixel-ratio:0) and (min-color-index:0)
{
    .mac_or_mobile {(;
        color:red;
    );} 
} 
```

这是检测大多数较新的 Mac 的更好方法，不包括 iPad（或 Android）等移动设备 - 同样适用于 Safari 6.1 和更新版本，因此它是 Mac ......：

```
@media screen and (-webkit-max-device-pixel-ratio:1) and (min-color-index:0)
{
    .mac_osx {(;
        color:red;
    );} 
} 
```

如果您想要手机，这适用于最近的高清手机：

```
@media screen and (-webkit-min-device-pixel-ratio:1.1) and (min-color-index:0)
{
    .retina {(;
        color:red;
    );} 
} 
```

我在这里有更多关于手机和平板电脑的信息：[https://jeffclayton.wordpress.com/2014/07/22/css-for-hi-def-mobile-retina-devices/](https://jeffclayton.wordpress.com/2014/07/22/css-for-hi-def-mobile-retina-devices/)在这里：[https://jeffclayton.wordpress.com/2014/07/28/css-hack-anything-but-ios/](https://jeffclayton.wordpress.com/2014/07/28/css-hack-anything-but-ios/)

Mac 确实有一段时间有 Internet Explorer，但在 5.5 版之后没有制作更新的版本。

Windows 也有一段时间有 Safari，但在版本 5 之后没有制作更新的版本。大多数 Windows 用户从不使用 Safari，因此当检测到 Safari 时，您通常可以排除 Windows。

如果您将上述所有样式包含在文档中，则下面的 div 将反映上述样式的结果：

```
Per Firefox and Internet Explorer/Edge:

<div class="windows"> If this is Windows this is red </div>

<div class="winxp"> If this is Windows XP or older this is red </div>

<div class="win10"> If this is Windows 10 this is red </div>

Per Firefox:

<div class="vista"> If this is Windows Vista this is red </div>
<div class="win7"> If this is Windows 7 this is red </div>
<div class="win8"> If this is Windows 8 this is red </div>

<div class="nonwindows"> If this is NOT Windows this is red </div>

<div class="nonmac"> If this is NOT Mac OS X this is red </div>

<div class="mac"> If this is Mac OS X this is red </div>

<div class="mac10_7up"> If this is Mac OS X 10.7 or newer this is red </div>
<div class="mac10_6up"> If this is Mac OS X 10.6 or newer this is red </div>
<div class="mac10_6"> If this is Mac OS X 10.6 only this is red </div>

<div class="lindroid"> If this is Linux or Android this is red </div>

Per Safari:

<div class="mac_osx"> If this is a Mac using Safari
(desktop or laptop computer) this is red (includes old mobile devices but not before iOS 6) </div>

<div class="mac_or_mobile"> If this is a Mac or a mobile device using Safari
(Android or iPad/iPhone) this is red </div>

<div class="retina"> If this is a hi-def mobile device using Safari
(Android or iPad/iPhone) this is red </div> 
```

关于检测的附加说明...

基于 Internet Explorer/Edge 的 Windows 版本（为便于参考）：

```
As stated above if you detect Internet Explorer 6, you are using XP (or older Win)
If you detect Internet Explorer 7-8, you are using Windows XP, Vista, or Windows 7
If you detect Internet Explorer 9 you are using Windows Vista or Windows 7
If you detect Internet Explorer 10 you are using Windows 7 or Windows 8.0
If you detect Internet Explorer 11 you are using Windows 7 or Windows 8.0/8.1 or Windows 10
If you detect Microsoft Edge you are using Windows 10 
```

Windows 10 是本文发布时的当前 Windows 版本。

出于历史兴趣，如果您真的愿意，您实际上可以在带有我发现的旧黑客的 Mac 上确定 Internet Explorer 5 或更低版本：

```
/*\*//*/ .mac_internet_explorer { color:red; } /**/ 
```

Mac 版本的 Internet Explorer 仅在旧的 PowerPC Mac 上可用，而不是 Intel 型号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T20:33:33.830

我不相信这仅在 CSS 中是可能的*，*但是一点 js 可以帮助您识别平台： [http ://rafael.adm.br/css_browser_selector/](http://rafael.adm.br/css_browser_selector/)

# c++ - 派生类（向量）：这是个坏主意吗？

> ID：15190342
> 
> 赞同：0
> 
> 时间：2013-03-03T20:16:19.510
> 
> 标签：c++

我即将为我正在编写的库“创建”我自己的矢量类。我不会真正从头开始创建矢量类，而只是`std::vector`用作父类并向派生的矢量类添加一些东西。

现在，也就是说，我需要一些建议。我的问题是：

1）调用我的派生类`vector`（当然是在另一个命名空间内）是一个坏主意吗？在这种情况下我会遇到什么样的冲突？

2）我想重载数学运算符，以便能够添加向量、将向量乘以常量等。这实际上是我决定在`std::vector`. 但是，我可以`std::vector`直接重载数学运算符并省去创建（又一个......）向量类的麻烦——但这是个坏主意吗？

3) 我非常想从 继承构造函数`std::vector`，但是在没有编译器错误的情况下完成这项工作时遇到了很多麻烦。有人可以为我提供一个具体的例子，向我展示如何做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T20:23:15.917

我会劝阻你不要这样做。如果您需要一个新容器，只需嵌入（或*私下*继承）`std::vector<>`而不是公开继承。

关于您的问题：

> 1）调用我的派生类向量（当然是在另一个命名空间内）是不是一个坏主意？在这种情况下我会遇到什么样的冲突？

只要您和您的任何客户都不会`std`通过指令同时导入名称空间和您的名称空间`using`，我看不出这有什么特别的问题。

> 2) 我想重载数学运算符，以便能够添加向量、将向量乘以常数等。这实际上是我决定在 std::vector 之上构建一个向量类的原因。但是，我可以直接重载 std::vector 的数学运算符，省去创建（又一个......）向量类的麻烦——但这是个坏主意吗？

是的，这是个坏主意。如果您为 创建了数学运算符的重载，则`std::vector`无法在`std::vector`所属的命名空间中创建它们。通过 ADL，`operator +`即使不合适，也可能在该名称空间中找到一个全局变量。如果是这种情况，你`operator +`甚至不会被查找，你会得到一个编译器错误。

> 3) 我非常想从 std::vector 继承构造函数，但是在没有编译器错误的情况下完成这项工作时遇到了很多麻烦。有人可以为我提供一个具体的例子，向我展示如何做到这一点？

在 C++11 中，您可以使用继承的构造函数。例如：

```
#include <vector>

template<typename T, typename Allocator = std::allocator<T>>
class myvector : public std::vector<T, Allocator>
{
    using typename std::vector<T, Allocator>::vector;
};

#include <iostream>

int main()
{
   std::vector<int> vi { 1, 2, 3, 4, 5};

   // Uses inherited constructor
   myvector<int> v(vi.begin(), vi.end());

   for (auto i : v) { std::cout << i << " "; };
} 
```

这是一个使用 GCC 4.8.0 (beta) 的[活生生的例子](http://liveworkspace.org/code/3spZbz%2419)，它支持继承的构造函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T00:29:44.743

首先，请注意，如果您愿意，您可以混淆您的继承。使用`private`继承，然后使用 with语句使所有功能`vector`可用。`using`它仍然是相当多的类型，因为`vector`它有很多，但它不像显式委派每个函数那样多，它可以防止通常对继承的反对，人们会不小心分割你的派生类和/或使用删除它没有虚拟析构函数时类型错误。并不是说任何人都应该删除`vector`。

1) 从命名空间使用相同的名称`std`本质上不是问题（毕竟这就是命名空间的用途），但有时可能会让读者感到困惑。他们可能只是假设你在某个地方做过`using std::vector;`。这是他们自己的错，但如果你能想出另一个合适的名字，那么惩罚你的读者的错误将没有任何好处。

2）您可以重载标准类的运算符，但不能在`std`命名空间中。这留下了一个问题，您*应该*在什么范围内重载它们。通常，您不想将内容放入头文件中的全局范围内，但您可以例如将它们放入名为的命名空间中`vector_arithmetic`，然后放入`using namespace vector_arithmetic;`您从中使用的每个范围内想使用它们。仅仅因为你可以这样做并不意味着它是明智的——读者希望知道哪些运算符可用于常见的类，例如`vector`，并且更改可用运算符的集合可能会吓到和打扰他们。

3）如果你没有C++11构造函数继承，你就不能继承构造函数。相反，您需要费力地编写自己的构造函数，这些构造函数采用正确的参数并在初始化列表中调用适当的基类构造函数。标准（或其他文档）将告诉您所需的所有构造函数签名。请特别注意模板化构造函数，并注意 C++03 和 C++11 中的构造函数不同。

最后，考虑只写一些自由函数：

```
template <typename T>
T sequence_add(const T &lhs, const T &rhs) {
    if (rhs.size() != lhs.size()) throw std::logic_error("size mismatch");
    T result(lhs.size());
    std::transform(lhs.begin(), lhs.end(), rhs.begin(), result.begin(),
        std::plus<typename T::value_type>()
    );
    return result;
}

std::vector<int> i,j;
std::vector<int> k = sequence_add(i,j); 
```

等等。如果运算符重载会引起混乱，那么它们通常不值得。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T20:20:09.880

1）在您的命名空间下编写您自己的向量。但是，尽量不要从 STL 派生。

2,3）忘记`std::vector`，写你自己的方法和运算符。

此外，您可以包装`std::vector`新类并编写接口来操作它。

# javascript - jquery - 使用 2 个按钮提交表单，其中一个按钮在新选项卡中打开

> ID：15190343
> 
> 赞同：0
> 
> 时间：2013-03-03T20:16:20.683
> 
> 标签：javascript, jquery, forms, form-submit

我有一个用于提交帖子的表单。我想放置一个按钮来保存帖子，另一个按钮可以在新标签中预览帖子。这是目前的代码，但它不起作用。

```
 <form id="postForm" method="POST">
      .....
      <button id=save>Save</button>
      <button id="preview">Preview</button>
    </form>

    $('#preview').click(function(){
                var form=$('#postForm');
                form.serialize();
                form.target="_blank";
                form.action="preview.php";
                form.submit();
            });
    $('#save').click(function(){
                var form=$('#postForm');
                form.serialize();
                form.action="save.php";
                form.submit();
            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T20:31:51.453

将其更改为以下内容：

```
$('#preview').click(function(){
            var form=$('#postForm');
            form.attr('target',"_blank");
            form.attr('action',"preview.php");
        });
$('#save').click(function(){
            var form=$('#postForm');
            form.attr('action',"save.php");
        }); 
```

你不需要打电话`form.submit()`。此外，表单将自行序列化。

# c# - mscharts 在 Red Cross 中设置 Xaxis 最大结果

> ID：15190347
> 
> 赞同：2
> 
> 时间：2013-03-03T20:16:53.017
> 
> 标签：c#, mschart

我在 MScharts 控件中有一个包含多个系列的设置。使用这种方法，我想在它们之间切换。第一次调用此方法，一切正常，系列显示正确。第二次，也是之后的每一次，方法调用都会在控件中绘制一个红十字。不抛出异常。

```
 private void EnableChart(Series series)
    {
        if (series != null)
        {
            chart1.Series.Clear();
            chart1.Series.Add(series);
            double maxval = series.Points.FindMaxByValue("X").XValue;
            chart1.DataSource = series;
            chart1.ChartAreas[0].AxisX.Title = series.Name;
            chart1.DataBind();
            chart1.ChartAreas[0].AxisX.Maximum = maxval; //if commented out = ok
        }
    } 
```

如果我注释掉最后一行，图表会显示，但带有旧系列的 X 轴值，所以我看不到任何数据。

**编辑：已解决。**

如果我使用

```
 chart1.ChartAreas[0].RecalculateAxesScale(); 
```

代替

```
 chart1.ChartAreas[0].AxisX.Maximum = maxval; 
```

一切正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-12T11:36:47.000

是`RecalculateAxesScale()`的，因为这条线可以解决您的问题：

```
chart1.DataBind(); 
```

将数据绑定到您的图表，如果您在绑定后添加一个点，则必须重新计算轴：

```
chart1.ChartAreas[0].RecalculateAxesScale(); 
```

所以一个更好的方法来解决这个问题：

```
 private void EnableChart(Series series)
    {
        if (series != null)
        {
            chart1.Series.Clear();
            chart1.Series.Add(series);
            double maxval = series.Points.FindMaxByValue("X").XValue;
            chart1.DataSource = series;
            chart1.ChartAreas[0].AxisX.Title = series.Name;

            //switch latest lines and you haven't to recalculate axes
            chart1.ChartAreas[0].AxisX.Maximum = maxval;
            chart1.DataBind();
        }
    } 
```

# android - 如何为看起来像“卡片”的 TextView 设置样式？

> ID：15190350
> 
> 赞同：1
> 
> 时间：2013-03-03T20:17:26.920
> 
> 标签：android, android-layout

我想创建一个 android 样式，允许我将 TextView、图片和其他元素放入“卡片”中，如下面的链接所示。我认为这种设计确实增加了深度并有助于将内容与背景分开，我想在我的应用程序中使用它。但是，我不知道如何创建它。如果您能提供帮助将不胜感激！:-)

[安卓卡片设计示例](http://i.imgur.com/rHL0DHJ.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T20:19:10.540

那些`TextView`只是有一个**自定义背景**。这可能是

1.  一个 9 补丁图像
2.  一个可绘制的 xml

我建议阅读[9-patch drawables](http://developer.android.com/tools/help/draw9patch.html)和[一般的 android drawables](http://developer.android.com/guide/topics/resources/drawable-resource.html)。

我之所以认为是 9 补丁，是因为这张“卡”有轻微的阴影。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T20:40:10.730

看看这个库是否对你有帮助

[http://www.androidviews.net/2012/12/cardsui/](http://www.androidviews.net/2012/12/cardsui/)

# c - 多进程和管道

> ID：15190352
> 
> 赞同：0
> 
> 时间：2013-03-03T20:17:39.407
> 
> 标签：c, fork, pipe

我正在制作一个四人连接游戏，我想拥有多个进程和管道，但我不知道从哪里开始。我知道你必须使用 fork 和 pipe，但是当我在游戏开始前进行 fork 时，每场比赛我都会得到相同的结果。我只是很困惑从这里去哪里。任何建议将不胜感激。下面是我的一些代码，我删除了检查胜利的部分，因为我没有必要看。

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <time.h>

int *moves;
//int **Board;
int w;

void display(int ** Board,int rows, int columns);
int** build_board(int N);
int makeMove(int** Board, int player);
int checkVictory(int** Board);
int checkHorr(int** Board);
void AI_move(int** Board,int player, int player2);
void play(int **Board);

int main(){

    srand((int) time(NULL));

    int width= 8;
    w=8-1;

    int** Board=build_board(width);
    int **Board2=build_board(width);

    //display(width, length);

    int i, check;

    if(fork()==0){
        play(Board);
    }else{
        puts("In Else");
        play(Board2);
    }

    return 0;
}

void play(int **Board){

    int i, check;

    for (i=0; i<((w+1)*(w+1)/2); i++) {

        AI_move(Board,1,2);

        // makeMove(Board, 1);
        // display(width, width);

        check=checkVictory(Board);

        if (check==1 || check==2) {
            puts("Winning Board");
            display(Board,w+1, w+1);
            break;
        }

        // AI_move(Board,2,1);
        makeMove(Board,2);

        check=checkVictory(Board);

        if (check==1 || check==2) {
            puts("Winning Board");
            display(Board, w+1, w+1);
            break;
        }

    }
}

int** build_board(int N){

    int i,j;

    int **Board = (int**) malloc(N*sizeof(int*));
    for (i = 0; i < N; i++)
        Board[i] = (int*) malloc(N*sizeof(int));
    for (i = 0; i < N; i++) {
        for (j = 0; j < N; j++) {
            Board[i][j] = 0;
        }
    }

    return Board;
}

void AI_move(int**Board,int player, int player2){

    int i,j;

    for (j=0; j<=w; j++) {
        for (i=w; i>=0; i--) {
            // printf("I: %d\n", i);
            if ( j < w && Board[j][i]==0 && Board[j+1][i]!=0) {
                Board[j][i]=player;
                if(checkVictory(Board)==1){
                    puts("Found Winning Move");
                    display(Board,w+1, w+1);
                    return;
                }
                else
                    Board[j][i]=0;
            }
        }
    }

    makeMove(Board,player);
}

int makeMove(int** Board,int player){

    int a;    
    start:a= rand()%(w+1);
    int i;
    for (i=w; i>=0; i--) {
        if ((Board[i][a])==0) {
            Board[i][a]=player;
            return 1;
        }
    }

    goto start;    
}

void display(int** Board,int rows, int columns){

    int i,j;

    for (i=0; i <= w;i++){
        for (j=0;j <=w;j++){
            if (Board[i][j]==1) {
                printf(" R ");
            }
            else if(Board[i][j]==2)
                printf(" B ");
                //printf(" %d ",Board[i][j]);
            else
                printf(" - ");
        }
        printf("\n");
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T20:38:08.977

你这里没有任何管道。如果您希望父进程将其移动写入子进程，而子进程将其移动写入父进程，则您确实需要两个管道，一个用于每个方向（尽管有些系统具有双向管道）。

您必须在分叉之前创建两个管道。分叉后，父级将关闭它将写入的管道的读取端，以及它将读取的管道的写入端。类似地，子进程会关闭管道的未使用端（但它会关闭与父进程不同的文件描述符）。

然后可以将两个播放器（进程）分别设置为从一个管道读取并写入另一个管道。只要他们知道谁先写，就不应该有任何问题。您确实需要注意零长度读取；那些表示EOF（其他进程不再存在）。

请记住，在 ; 之后，两个进程将不再共享相同的数据`fork()`。它们具有自己的私有变量是自治的。移动信息必须标识移动的来源/目的地，以便接收进程可以正确更新其棋盘。除非在极端情况下，否则您不会将整个电路板发送到电线上。

如果您决定必须通过线路发送电路板，那么您可能应该在字符数组中创建电路板的文本表示，然后在单个写入操作中将其发送到合作伙伴进程。

# drupal - 使用 EntityReference 在 Drupal 7 中预览引用节点的字段

> ID：15190354
> 
> 赞同：0
> 
> 时间：2013-03-03T20:17:45.347
> 
> 标签：drupal, drupal-7, entityreference

我面临以下不知道如何做的事情：

两种内容类型 (CT)：父母和孩子

Parent 有一个字段 ChildRef （字段类型：实体引用；小部件：选择列表）

孩子有字段名称（文本），地址（文本）等

当我创建一个新的父节点时，我可以选择其中一个子节点（那里没问题，选择列表很好地显示了子节点的标题）

我需要的是，在编辑父项时，我想预览（不在那里编辑）子项的字段，内联显示，在选择列表下方。

当然，一旦Parent节点被保存，在Parent节点内部显示Child节点的方式有很多种。但我需要的是父母编辑模式下的预览。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T05:22:26.393

尝试[实体参考视图小部件](http://drupal.org/project/entityreference_view_widget)

然后在子内容类型中，管理小部件的字段显示。

# php - 在一个选项卡中打开链接

> ID：15190356
> 
> 赞同：1
> 
> 时间：2013-03-03T20:17:51.293
> 
> 标签：php, javascript, html

单击页面中的链接时，我试图重用相同的选项卡。链接是从数据库中动态获取的。我已经尝试`window.open("$LinkURL", "MyTab");`假设`$LinkURL`是我要打开的链接的变量。但是，当单击链接时，每次都会在新选项卡中打开。

我注意到的是，如果新标签仍在加载，我可以重复使用我的标签。但是，一旦加载，我会打开一个新标签，然后有 2 个标签。第二件事是，如果我使用（[http://www.google.com/](http://www.google.com/)）作为打开的 URL 而不是`$LinkURL`变量，它会按预期工作，并且每次单击新链接时我都可以重用相同的选项卡。这是我正在使用的代码示例：

```
function newwin (urllink) {
    newwindow = window.open( urllink ,'newwin');
    //this is for closing the tab after some seconds, but i deactivate it for now 
    //window.setInterval(function(){window.newwindow.close()},10500); 
} 
```

```
<a href="javascript:newwin(\''.trim($CvITem_referal_link).'\');" id="LinkId_'.$J.'">
    <img src="game/castleville/image/'.$ItemInfo_cat_img.'" name="'.$ItemInfo_cat_type.'" />
</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T20:41:38.907

代替`window.open`，您可以使用`location.href`，这样：

```
function newwin (urllink) {
    location.href = urllink;
} 
```

* * *

或者，如果我不理解这个问题，并且您希望它们始终在一个新的相同窗口中打开，您可以这样做：

```
<a href="theLink" id="LinkId_" target="newTab">
    <img src="game/castleville/image/'.$ItemInfo_cat_img.'" name="'.$ItemInfo_cat_type.'" />
</a> 
```

# php - PHP 在父目录和子目录之间插入新目录

> ID：15190358
> 
> 赞同：-1
> 
> 时间：2013-03-03T20:17:57.800
> 
> 标签：php, directory, rename

我有一个父目录：

```
"path/to/dir" 
```

在这个父目录中，我有几个子目录：

```
"dir/subA"
"dir/subB"
"dir/subC" 
```

我想将所有这些子目录移动到中间目录“foo”中，以便最终结果应该是：

```
"path/to/dir/foo/subA" 
"path/to/dir/foo/subB"
"path/to/dir/foo/subC" 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T20:36:19.580

使用[tempnam](http://php.net/manual/en/function.tempnam.php)、[unlink](http://www.php.net/manual/en/function.unlink.php)、[stat](http://www.php.net/manual/en/function.stat.php) [mkdir](http://www.php.net/manual/en/function.mkdir.php)和[rename](http://www.php.net/manual/en/function.rename.php)函数。

您可以使用 opendir 和 readdir 遍历目录，然后制作 /foo，并一次移动每个目录。但是有一种更简单的方法也更快。

1.  使用 tempnam 为“path/to”中的临时文件获取唯一名称。
2.  使用 stat 获取“path/to/dir”的权限
3.  tempnam 创建一个具有唯一名称的文件。使用 unlink 删除该文件，然后使用 mkdir 和 stat() 的结果创建一个新目录，该目录具有 tempnam 返回的唯一临时名称
4.  使用重命名将“path/to/dir”移动到“path/to/tempdir/foo”
5.  使用重命名将“path/to/tempdir”更改为“path/to/dir”

# javascript - javascript在另一个之前和之后添加标签

> ID：15190359
> 
> 赞同：0
> 
> 时间：2013-03-03T20:18:03.153
> 
> 标签：javascript

我有这个代码：

```
<div id="pageNavigator" class="rbcContentBlock">
<ul>
<a href="/home/">Úvod</a>
<span><span> &gt; </span></span>
<a href="/fontanova-cerpadla/">Fontánová čerpadla</a>
<span><span> &gt; </span></span>
<span id="navCurrentPage">Pontec PondoVario 1000</span>
</ul>
</div> 
```

我想在标签“a”之前和之后放置“li”标签。我试着做点什么，这是我的 javascript 代码：

```
var div1 = document.getElementById("pageNavigator");
var elements = div1.getElementsByTagName("a");
var parentDiv = elements.parentNode;
var li = document.createElement("li");
parentDiv.insertBefore(li, elements); 
```

这段代码有什么问题？元素是“数组”的问题吗？感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T20:36:32.617

这应该将每个锚点包装在列表项标记中。

```
var div1 = document.getElementById("pageNavigator");
var ul = div1.children()[0];
var elements = div1.getElementsByTagName('a');

var(i = 0; i < elements.length; i++) {
    var element = elements[i];
    var li = document.createElement('li');
    ul.replaceChild(li, element);
    li.appendChild(element);
} 
```

# iphone - 斯坦福iphone开发教程失败。为什么我的代码崩溃了？

> ID：15190360
> 
> 赞同：0
> 
> 时间：2013-03-03T20:18:06.337
> 
> 标签：iphone, ios, objective-c, xcode

我尝试按照斯坦福 iphone 开发教程进行操作，但由于我的 iPhone 应用程序崩溃而陷入困境。帮助！

错误信息

> 2013-03-03 12:10:39.055 RPN 计算器[2166:11303] ***由于未捕获的异常“NSUnknownKeyException”而终止应用程序，原因：“[setValue:forUndefinedKey:]：此类不符合键的键值编码数字按下。

标题

```
import <UIKit/UIKit.h>
@interface CalculatorViewController : UIViewController
@property (weak, nonatomic) IBOutlet UILabel *display;
@end 
```

执行

```
#import "CalculatorViewController.h"
@interface CalculatorViewController ()
@end
@implementation CalculatorViewController

- (IBAction)digitPressed:(UIButton *)sender {
      NSString *digit = [sender currentTitle];
      NSLog(@"Digit pressed = %@", digit);
}
@end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T20:30:48.150

您可能创建了一个`IBOutlet` `digitPressed`而不是一个`IBAction`. 所以意识到这一点，从你的 .h 和 .m 文件中删除了代码。但是忘记从 .xib 中删除连接（当我开始时也发生在我身上）。如果是这种情况，您可以右键单击`IBAction`调用 的按钮并删除连接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T20:25:45.217

您的问题可能是您的操作方法 `digitPresses`未正确分配`UIButton`您`.xib`或情节提要中定义的方法，并且缺少代码中定义的链接，您可以在连接检查器中检查它并确保您将操作与`touch up inside`事件连接

# html - 使按钮“搜索”可点击 HTML/CSS

> ID：15190361
> 
> 赞同：1
> 
> 时间：2013-03-03T20:18:11.270
> 
> 标签：html, css, wordpress, button

我有一个 html/css 代码的小问题！我想将此[代码](http://codepen.io/CBeghin/pen/HeuiF)集成到我的 wordpress 主题中，从而替换我的搜索框。

```
<form method="get" id="wrap-search-nav" class="header" action="<?php echo esc_url( home_url( '/' ) ); ?>" role="search">
<input type="texti" name="s" value="<?php echo esc_attr( get_search_query() ); ?>" id="search" placeholder="<?php echo esc_attr_x( 'Whater we looking', 'placeholder', 'twentythirteen' ); ?>" />
<input type="submit" name="submit" id="search_submit" value=""/>
</form> 
```

当我点击放大镜的图像时，拳击会正常打开，但是当我写下我的研究并再次点击图像时，拳击会关闭。我希望当我第二次点击图片时，**我的研究开始了**。

```
#wrap-search-nav {
   margin: 50px 100px;
   display: inline-block;
   position: relative;
   height: 60px;
   float: right;
   padding: 0;
   position: relative;
}

input[type="texti"] {
   height: 60px;
   font-size: 55px;
   display: inline-block;
   font-family: "Lato";
   font-weight: 100;
   border: none;
   outline: none;
   color: #555;
   padding: 3px;
   padding-right: 60px;
   width: 0px;
   position: absolute;
   top: 0;
   right: 0;
   background: none;
   z-index: 3;
   transition: width .4s cubic-bezier(0.000, 0.795, 0.000, 1.000);
   cursor: pointer;
}

input[type="texti"]:focus:hover {
   border-bottom: 1px solid #BBB;
}

input[type="texti"]:focus {
   width: 700px;
   z-index: 1;
   border-bottom: 1px solid #BBB;
   cursor: text;
}

input[type="submit"] {
   height: 67px;
   width: 63px;
   display: inline-block;
   color:red;
   float: right;
   background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAADNQTFRFU1NT9fX1lJSUXl5e1dXVfn5+c3Nz6urqv7+/tLS0iYmJqampn5+fysrK39/faWlp////Vi4ZywAAABF0Uk5T/////////////////////wAlrZliAAABLklEQVR42rSWWRbDIAhFHeOUtN3/ags1zaA4cHrKZ8JFRHwoXkwTvwGP1Qo0bYObAPwiLmbNAHBWFBZlD9j0JxflDViIObNHG/Do8PRHTJk0TezAhv7qloK0JJEBh+F8+U/hopIELOWfiZUCDOZD1RADOQKA75oq4cvVkcT+OdHnqqpQCITWAjnWVgGQUWz12lJuGwGoaWgBKzRVBcCypgUkOAoWgBX/L0CmxN40u6xwcIJ1cOzWYDffp3axsQOyvdkXiH9FKRFwPRHYZUaXMgPLeiW7QhbDRciyLXJaKheCuLbiVoqx1DVRyH26yb0hsuoOFEPsoz+BVE0MRlZNjGZcRQyHYkmMp2hBTIzdkzCTc/pLqOnBrk7/yZdAOq/q5NPBH1f7x7fGP4C3AAMAQrhzX9zhcGsAAAAASUVORK5CYII=) center center no-repeat;
   text-indent: -10000px;
   border: none;
   position: absolute;
   top: 0;
   right: 0;
   z-index: 2;
   cursor: pointer;
   opacity: 0.4;
   cursor: pointer;
   transition: opacity .4s ease;
}

input[type="submit"]:hover {
   opacity: 0.8;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T00:44:17.660

放这个，所以在显示文本输入后会出现提交按钮。在这里工作。

```
input[type="submit"]:hover {
  opacity: 0.8;
  z-index: 4;
} 
```

# python - 在 Python 中使用套接字发送字典？

> ID：15190362
> 
> 赞同：9
> 
> 时间：2013-03-03T20:18:13.350
> 
> 标签：python, sockets, dictionary, translation

我的问题：好的，我做了一个小聊天程序，我基本上使用套接字来通过网络发送消息。

它工作得很好，但是当我决定更进一步时，我遇到了一个问题。

我决定对我通过网络发送的字符串添加一些加密，所以我继续编写了执行此操作的脚本。

问题在于，显然您不能像使用字符串那样通过套接字发送字典。

我先做了一些研究，发现了关于泡菜的这些东西。不幸的是，除了将字典导出到文件之外，我无法确切地知道如何使用它们来转换字符串，但是如果不更改程序，我就无法做到这一点。

谁能帮助解释我该怎么做？我环顾四周，但我似乎无法找出如何。

如果有人对此感兴趣，我已经上传了到目前为止我所拥有的内容。

```
print("\n\t\t Fill out the following fields:")
HOST = input("\nNet Send Server Public IP: ")
PORT = int(input("\nNet Send Server Port: "))
#------------------------------------------------
#Assessing Validity of Connection
#------------------------------------------------
try:
    s = socket(AF_INET,SOCK_STREAM)
    s.connect((HOST,PORT))
    print("Connected to server:",HOST,)
except IOError:
    print("\n\n\a\t\tUndefined Connection Error Encountered")
    input("Press Enter to exit, then restart the script")
    sys.exit()
#-------------------------------------------------
#Now Sending and recieving mesages
#-------------------------------------------------

i = True
while i is True:
    try:
        User_input = input("\n Enter your message: ")
    Lower_Case_Conversion = User_input.lower()
    #Tdirectory just stores the translated letters
    Tdirectory = []
    # x is zero so that it translates the first letter first, evidently
    x = 0
    COUNTLIMIT = len(Lower_Case_Conversion)
    while x < COUNTLIMIT:
        for letter in Lower_Case_Conversion[x]:
            if letter in TRvalues:
                Tdirectory += [TRvalues[Lower_Case_Conversion[x]]]
        x = x + 1

        message = input('Send: ')
        s.send(message.encode())
        print("\n\t\tAwaiting reply from: ",HOST,)
        reply = s.recv(1024)
        print(HOST,"\n : ",reply)
    except IOError:
        print("\n\t\aIOError Detected, connection most likely lost.")
        input("\n\nPress Enter to exit, then restart the script") 
```

哦，如果您想知道 TRvalues 是什么。它是包含用于加密简单消息的“翻译”的字典。

```
try:
    TRvalues = {}
    with open(r"C:\Users\Owatch\Documents\Python\FunStuff\nsed.txt", newline="") as f:
        reader = csv.reader(f, delimiter=" ")
        TRvalues = dict(reader) 
```

（翻译保存在它导入的 .txt 中）

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-03T20:37:09.517

你必须序列化你的数据。有很多方法可以做到这一点，但[json](http://docs.python.org/2/library/json.html)和[pickle](http://docs.python.org/2/library/pickle.html)将是他们在标准库中的可能方式。

对于 json ：

```
import json

data_string = json.dumps(data) #data serialized
data_loaded = json.loads(data) #data loaded 
```

对于泡菜（或其更快的兄弟[cPickle](http://docs.python.org/2/library/pickle.html#module-cPickle)）：

```
import cPickle as pickle

data_string = pickle.dumps(data, -1) 
#data serialized. -1, which is an optional argument, is there to pick best the pickling protocol
data_loaded = pickle.loads(data) #data loaded. 
```

还有，请不要写

```
i= True
while i is True:
 #do_something 
```

因为简单`while True:`就足够了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-03T20:19:40.040

您需要先序列化您的数据。有几种方法可以做到这一点，最常见的可能是 JSON、XML 和（python 特定的）pickles。或者您自己的自定义序列化。

基本思想是：序列化你的数据，发送它，接收它，再次反序列化它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-03T20:33:46.873

如果你想使用pickle，你可以使用`loads`and`dumps`函数。

```
import pickle
a_dict = { x:str(x) for x in range(5) }
serialized_dict = pickle.dumps(a_dict)
# Send it through the socket and on the receiving end:
a_dict = pickle.loads(the_received_string) 
```

您也可以以类似的方式使用 JSON。我喜欢 JSON，因为它是人类可读的并且不是特定于 python 的。

```
import json
a_dict = { x:str(x) for x in range(5) }
serialized_dict = json.dumps(a_dict)
# Send it through the socket and on the receiving end:
a_dict = json.loads(the_received_string) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-03T22:27:56.950

您可以使用 pickle 和 python 远程对象（或仅 pyro）通过网络（包括 Internet）发送完整的对象和数据。例如，如果您想发送对象（字典、列表、类、对象等），请使用 python 远程对象。

它对你想做的事情非常有用。

此链接中有更多信息[http://pythonhosted.org/Pyro4/](http://pythonhosted.org/Pyro4/) 并且此入门手册有助于了解您在网络 pc 上发送或执行的内容[http://pythonhosted.org/Pyro4/intro.html#simple-例子](http://pythonhosted.org/Pyro4/intro.html#simple-example)

我希望它会帮助你

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-05-01T06:06:19.447

使用 JSON 序列化您的数据是我喜欢的方式。我实际上为您创建了一个库：[jsonsocket library](https://github.com/mdebbar/jsonsocket)。它将自动为您进行序列化/反序列化。它还可以有效地处理大量数据。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-06-26T12:28:52.773

您还可以使用 zmqObjectExchanger ( [https://github.com/ZdenekM/zmq_object_exchanger](https://github.com/ZdenekM/zmq_object_exchanger) )。它包装了 pickle 和 zmq 以通过网络传输 python 对象。

# jquery - jQuery Validate 插件，添加了自定义方法和错误消息

> ID：15190364
> 
> 赞同：0
> 
> 时间：2013-03-03T20:18:34.630
> 
> 标签：jquery, jquery-validate

这是[JSFIDDLE](http://jsfiddle.net/exciter/sfKks/25/)的链接。

你好

我正在学习 JQuery 验证器插件及其 API。我快到了，但似乎找不到关于我喜欢实施的解决方案的可靠示例。我做了很多在线搜索，找到了一些零碎的东西，但没有什么能很好地解释这一点。

我有一个包含这些字段的简单表单：

*   名
*   姓
*   电子邮件
*   电话

目前，正在验证这些字段，没有任何自定义方法或错误消息。因此，如果提交的表单带有空字段，则会弹出“必填 *”。

我想做的是验证一个字段，而不仅仅是检查它是否为空白/空。例如：

名：

1.  字段不为空/空
2.  字段不包含字母数字字符

电话：

1.  字段不为空/空
2.  字段仅包含数字字符

我在实现自定义验证器方法方面非常陌生，我不知道如何显示正确的错误消息。因此，如果电话字段不是空白而是容器非数字字符，我想标记它并显示该字段仅接受数字字符的错误消息。

目前，我在验证器的消息对象中有错误消息“required *”，我不知道如何在粒度级别上实现错误消息。

对于如此冗长的解释，我深表歉意。如果有人能指出我正确的方向，我将不胜感激。谢谢

这是[JSFIDDLE](http://jsfiddle.net/exciter/sfKks/25/)的链接。

```
 <div class="wrapper">

        <form id="contactForm" action="" method="post" enctype="multipart/form-data">
            <div class="fieldGroup">
           <!--  FIRST NAME --->     
               <lable for="firstname">First Name: </label>
               <input type="text" id="firstname" name="firstname" size="25" maxlength="25" >
           </div>
            <!--  LAST NAME  -->   
            <div class="fieldGroup">
               <lable for="lastname">Last Name: </label>
               <input type="text" id="lastname" name="lastname" size="25" maxlength="25" >  
            </div>  
            <!--  EMAIL  -->    
            <div class="fieldGroup">
               <lable for="email">Email: </label>
               <input type="text" id="email" name="email" size="25" maxlength="40" >     
            </div>   
            <!--  PHONE  -->    
            <div class="fieldGroup">
               <lable for="lastname">Phone: </label>
               <input type="text" id="phone" name="phone" size="12" maxlength="12" >   
               xxx-xxx-xxxx
            </div>        

            <div class="fieldGroup">
               <input type="submit" id="SubmitBtn" value="Submit" >  
               <input type="reset" id="ResettBtn" value="Reset" >                
            </div>            

        </form>

    </div> 
```

JAVASCRIPT

```
 (function($,W,D)
    {
        var JQUERY4U = {};

        JQUERY4U.UTIL =
        {
            setupFormValidation: function()
            {
                //form validation rules
                $("#contactForm").validate({
                    rules: {
                        firstname: {
                            required: true,
                            chkData: true
                        },
                        lastname: {
                            required: true,
                            minlength: 2,
                            maxlength: 15               
                        },
                        address1:{
                            required: true,
                            minlength: 8,
                            maxlength: 30               
                        },
                        city:{
                            required: true,
                            minlength: 8,
                            maxlength: 25           
                        },                  
                        state:{
                            required: true          
                        },
                        zipcode:{
                            required: true,
                            minlength: 5,
                            maxlength: 10   
                        },
                        phone: {
                            required: true,
                            minlength: 10,
                            maxlength: 12                       
                        },
                        email:
                        {
                            required: true,
                            email: true
                        }                   
                    },
                    messages: {
                        firstname: "required *",
                        lastname: "required *",
                        address1: "required *",
                        city: "required *",
                        state: "required *",
                        zipcode: "required *",
                        phone: "required *",
                        email: "required *",
                    },
                    submitHandler: function(form) {
                        form.submit();
                    }
                });
            }

        }

        //when the dom has loaded setup form validation rules
        $(D).ready(function($) {

                $.validator.addMethod("chkData",
                function(value, element){
                    alert(value);
                },"SORRY");
            JQUERY4U.UTIL.setupFormValidation();
        });

    })(jQuery, window, document); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T21:06:53.393

Your code was slightly more complicated than it needed to be.

```
$(document).ready(function () {

    $("#contactForm").validate({
        rules: {
            firstname: {
                required: true,
                alphanumeric: true
            },
            lastname: {
                required: true,
                minlength: 2,
                maxlength: 15
            },
            address1: {
                required: true,
                minlength: 8,
                maxlength: 30
            },
            city: {
                required: true,
                minlength: 8,
                maxlength: 25
            },
            state: {
                required: true
            },
            zipcode: {
                required: true,
                minlength: 5,
                maxlength: 10
            },
            phone: {
                required: true,
                phoneUS: true
            },
            email: {
                required: true,
                email: true
            }
        },
        messages: {
            firstname: {
                required: "required *",
                alphanumeric: "custom alphanumeric message"
            },
            lastname: "required *",
            address1: "required *",
            city: "required *",
            state: "required *",
            zipcode: "required *",
            phone: "required *",
            email: "required *",
        }
    });

}); 
```

**DEMO: [http://jsfiddle.net/7uDXQ/](http://jsfiddle.net/7uDXQ/)**

**NOTES**:

**1)** `alphanumeric` and `phoneUS` rules requires inclusion of the [`additional-methods.js` file](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.0/additional-methods.js).

**2)**

> "Currently, I have on error message `required *` within the `messages` object of the validator and, I don't know how to implement error messages on granular level."

Custom messages are simply implemented as per a format similar to your `rules:`:

```
messages: {
    firstname: {
        required: "custom required *",
        alphanumeric: "custom alphanumeric message"
    },
} 
```

Otherwise, if you only do this...

```
messages: {
    firstname: "custom required *",
} 
```

Then **all** messages for **all** rules on the `firstname` field will share this same custom message.

**3)** You do not have to specify the `submitHandler` callback function unless you need to do something on a valid form, like `ajax`. Otherwise, by default, the form will simply do a normal `submit` on a valid form. Compare the code in my jsFiddle to the code I posted above.

**4)** There is no such rule as `chkData` so I removed it. If this is your custom rule, then apply your custom message as per my item #2 above.

# html - 单选按钮、复选框和文本区域

> ID：15190365
> 
> 赞同：0
> 
> 时间：2013-03-03T20:18:34.880
> 
> 标签：html

我必须有 3 个问题。一种带有单选按钮选项，一种带有复选框，一种带有文本区域。我遇到的问题是所有问题都必须与每个问题下方的选择保持一致。我使用表格将问题放在同一行，但我遇到的问题是我无法在每个适当的问题下获得选择（单选按钮、复选框和文本区域）。

这是我收到的：

```
 Your question here: choice 1 choice 2\. ques. here: c1, c2, c3, c4 
```

我需要这个：

```
Your question here:       
Choice 1                                        
Choice 2 
```

以该格式在该问题旁边的其他 2 个问题。

这是我在下面使用的 html 编码：

```
<table>
<tr>
    <td align="left">  Your question here:</td>     
    <td><input name="choice" type="radio" value="1" />Choice 1 </td>
    <br />
    <td><input name="choice" type="radio" value="2" checked="checked" />Choice 2</td>

    <td align="center"> Your question here:</td>
<br>
    <td><input name="choice" type="checkbox" value="choice1" />Choice 1</td>
<br>    
    <td><input name="choice" type="checkbox" value="choice2" />Choice 2</td>
<br>    
    <td><input name="choice" type="checkbox" value="choice3" />Choice 3</td>
<br>        
    <td><input name="choice" type="checkbox" value="choice4" checked="checked">Choice 4</td>

<td align="right"> Your question here:</td>
<td><br /><textarea name="other" rows="5" cols="35"></textarea></td> 

</tr>
</table> 
```

我尝试使用每个选项，但它直接在彼此下方显示问题和答案，这不是我需要的。这让我发疯，因为我知道这很简单。有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T20:50:40.033

我同意纳德的回答，但要回答您的问题，选择出现在问题旁边而不是在问题下方出现的原因是因为您将它们放置在同一行内的不同单元格中（使用）（这创建一个新列）。如果您要制作第二行并为所有选择设置一个单元格，它看起来更像您想要的。

```
<table>
<tr>
    <td align="left" style="width:200px;">  Your question here:</td>  
    <td align="center" style="width:200px;"> Your question here:</td>  
    <td align="right" style="width:200px;"> Your question here:</td>
</tr>
<tr>
    <td align="left">
       <input name="choice" type="radio" value="1" />Choice 1 <br />
       <input name="choice" type="radio" value="2" checked="checked" />Choice 2</td>

    <td align="center">
       <input name="choice" type="checkbox" value="choice1" />Choice 1 <br /> 
       <input name="choice" type="checkbox" value="choice2" />Choice 2 <br/> 
       <input name="choice" type="checkbox" value="choice3" />Choice 3 <br />
       <input name="choice" type="checkbox" value="choice4" checked="checked" />Choice     4
    </td>

   <td><br /><textarea name="other" rows="5" cols="30"></textarea></td> 
</tr>
</table> 
```

我添加了一些样式，使其看起来更加间隔。绘制表格的边界以查看事物的间距会很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T20:26:04.697

好吧，我绝对建议您使用 div 而不是表格（我个人不相信表格是合适的解决方案），话虽如此，有三个 div，全部向左浮动，每个宽度为 33%，然后发布问题以及其中的答案。例如

```
<div>
Question 1<br/>
Choice 1 
Choice 2 
Choice 3
</div>

<div>
Question 2<br/>
Choice 1 
Choice 2 
Choice 3
</div>

<div>
Question 3<br/>
Choice 1 
Choice 2 
Choice 3
</div>

<style>
div{
    width:33%;
    float:left;
}
</style> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T20:44:01.677

用你的桌子作为解决方案，我认为你需要这个......

```
<table>
<tr>
        <td >  Your question here:</td>
        <br />  
        <td > Your question here:</td>
        <br />  
        <td > Your question here:</td>
</tr>

<tr>
    <td>
        <input name="choice" type="radio" value="1" />Choice 1 
        <br />  
        <input name="choice" type="radio" value="2" checked="checked" />Choice 2
    </td>
    <td>
        <input name="choice" type="checkbox" value="choice1" />Choice 1
        <br />  
        <input name="choice" type="checkbox" value="choice2" />Choice 2
        <br />  
        <input name="choice" type="checkbox" value="choice3" />Choice 3
        <br />      
        <input name="choice" type="checkbox" value="choice4" checked="checked" />Choice 4
    </td>   
    <td>
        <textarea name="other" rows="5" cols="25"></textarea> 
    </td>
</tr>

</table> 
```

# php - 我有查询使用数组和 for 循环将值插入 MySQL 数据库

> ID：15190373
> 
> 赞同：0
> 
> 时间：2013-03-03T20:19:19.517
> 
> 标签：php, mysql, database

我有查询使用数组和for循环将值插入MySQL数据库。但是当我提交表单MySQL数据库时显示双重输入。第一条记录为空，第二条记录有值？为什么 MySQL 数据库显示 First Record Empty Entry。我不知道它背后的原因是什么？

**这里我的功能代码**

```
<?php 
if(isset($_REQUEST['order'])) 
{
$count=1;
$count++;   
$total=$_POST['total']; 
for ($i=1; $i<=$count; $i++){
$queryproduct=mysql_query("INSERT INTO shoppingcart VALUES    ('','','','$uid','$email','".$_POST['product'][$i]."','".$_POST['userfile_name'] [$i]."','".$_POST['price'][$i]."','".$_POST['qty'][$i]."','".$_POST['amt'][$i]."','$total')") or die("Order  Query Problem");    
}
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T21:23:44.797

我将首先忽略这段代码的安全问题，我们可以稍后再回到那部分。让我们首先处理我看到的正确方法的问题。

> 第一条记录为空，第二条记录有值？为什么 MySQL 数据库显示 First Record Empty Entry。我不知道它背后的原因是什么？

```
$count=1;
$count++; 
```

这里发生了什么？你设置一个`$count`等于`1`，然后你`2`在第二行也立即将它加一。你为什么这样做？为什么不首先将它设置为两个呢？

我敢打赌，您对第一条记录为空的问题从这些代码行开始。

```
$total = $_POST['total']; 
```

这仅在查询中使用一次，所以为什么将它分配给另一个变量你只是在浪费内存。

从您的代码的第一个示例中，我会说这将是您可以从中获得的最佳执行（同样，不是在谈论安全性）。

```
<?php 
if(isset($_REQUEST['order'])) 
{
    for ($i = 1, $count = 0; $i <= $count; ++$i)
    {
        $queryproduct = mysql_query
        (
            "INSERT INTO shoppingcart VALUES
            (
                '',
                '',
                '',
                '$uid',
                '$email',
                '{$_POST['product'][$i]}',
                '{$_POST['userfile_name'][$i]}',
                '{$_POST['price'][$i]}',
                '{$_POST['qty'][$i]}',
                '{$_POST['amt'][$i]}',
                '{$_POST['total']}'
            );"
        )
        or die("Order Query Problem");
    }
}
?> 
```

* * *

查看您的第二组代码，这可能是您可以用它做的最好的事情。

```
<?php
    if(isset($_REQUEST['order']))
    {
        for($i = 0, $p = count($_POST['product']); $i < $p; ++$i)
        {
            $queryproduct = mysql_query
            (
                "INSERT INTO shoppingcart VALUES
                (
                    '',
                    '',
                    '{$_POST['pid'][$i]}',
                    '$uid',
                    '$email',
                    '{$_POST['product'][$i]}',
                    '{$_POST['userfile_name'][$i]}',
                    '{$_POST['price'][$i]}',
                    '{$_POST['qty'][$i]}',
                    '{$_POST['amt'][$i]}',
                    '{$_POST['total']}'
                );"
            )
            or die("Order Query Problem");
        }
    }
?> 
```

* * *

最后，这个是关于安全性的。如果我们使用 PHP 代码库中的一些非弃用函数，我们可以使这些语句安全。

PDO 是这些接口中最常见的，您可以找到设置与 SQL 数据库的 PDO 连接[所需的所有文档。](http://php.net/manual/en/book.pdo.php)

```
<?php
    if(isset($_REQUEST['order']))
    {
        $stmt = $dbh->prepare("INSERT INTO shoppingcart VALUES ('', '', ?, ?, ?, ?, ?, ?, ?, ?, ?);");

        $stmt->bindParam(1, $pid);

        $stmt->bindParam(2, $uid);
        $stmt->bindParam(3, $email);

        $stmt->bindParam(4, $product);
        $stmt->bindParam(5, $name);
        $stmt->bindParam(6, $price);
        $stmt->bindParam(7, $qty);
        $stmt->bindParam(8, $amt);

        $stmt->bindParam(9, $total);

        for($i = 0, $p = count($_POST['product']); $i < $p; ++$i)
        {
            $pid = $_POST['pid'][$i]);

            $product = $_POST['product'][$i]);
            $name = $_POST['userfile_name'][$i]);
            $price = $_POST['price'][$i]);
            $qty = $_POST['qty'][$i]);
            $amt = $_POST['amt'][$i]);

            $total = $_POST['total'];
        }

        $stmt->execute();
    }
?> 
```

这些将为您正确转义查询语句。一个巨大的帮助，当我们都无法了解每个攻击向量并且专家已经提出了如何修复最常见攻击向量的代码时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T20:50:37.287

尝试从 0 开始循环，因为 $_POST["pid"] 变量从 0 开始编号，如第二个（工作）示例：

```
for($i=0; $i<$lenght; $i++){ ... 
```

但是，请避免使用 mysql_* 函数，正如 Matt Ball 在他的评论中所说的那样。

# c# - 在该网站已打开的选项卡中打开 html 页面

> ID：15190381
> 
> 赞同：1
> 
> 时间：2013-03-03T20:20:16.363
> 
> 标签：c#

我以前见过一些应用程序这样做。但是，如何在该网站已经打开的情况下在 chrome 的某个选项卡中打开一个 html 文件。因此，假设我们检查我们是否已`http://localhost:70/`打开`index.html`，但我们现在想`about.html`在该选项卡中打开。

我正在`C#`为任何不想查看标签的人使用。正如我通常会使用的那样

```
Process.Start(filePath); 
```

# android - Android：试图改变 TextView 的宽度

> ID：15190383
> 
> 赞同：-2
> 
> 时间：2013-03-03T20:20:28.233
> 
> 标签：android, xml, textview

我有一个 textView 我试图在运行时更改大小。

xml文件中的代码

```
 <TextView
                android:id="@+id/textScreenWidth"
                android:layout_width="100px"
                android:layout_height="wrap_content"
                android:text=""
                android:layout_gravity="center"
                android:textColor="#ff000000"
                android:textStyle="bold"
                android:textSize="12dp" 
```

OnCreat 上的代码以更改大小

```
TextView t=(TextView) findViewById(R.id.textScreenWidth); 
    t.setWidth(950); 
```

大小不变

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T20:24:26.210

有了这个：

```
LinearLayout.LayoutParams lParams = new LinearLayout.LayoutParams(width, height);
txtView.setLayoutParams(lParams); 
```

这假设您的父布局是`LinearLayout`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T20:33:05.120

你可以这样设置

```
 final LayoutParams lparams = new LayoutParams(950,30); // Width , height
    t.setLayoutParams(lparams); 
```

# cakephp - 分组包含的模型

> ID：15190385
> 
> 赞同：1
> 
> 时间：2013-03-03T20:20:49.077
> 
> 标签：cakephp, cakephp-2.2

```
PresentationView hasMany SlideView 
```

`SlideView`模型具有字段持续时间。

`SlideView.duration`Presentation_duration =属于演示文稿的幻灯片视图中所有字段的总和。

我想为每个演示文稿获取带有 presentation_duration 的演示文稿列表（分页）。到目前为止，我正在尝试这样：

```
$this->paginate['contain'] = array(
            'PresentationView' => array(
                'SlideView' => array(
                    'group' => 'SlideView.presentation_view_id',
                                    // 'conditions' => array('group' => 'SlideView.presentation_view_id'),
                )
            )
        ); 
```

注释行是我尝试过的一个选项。

这两种方法最终都会出现一些 SQL 错误：

```
SQLSTATE[42S22]: Column not found: 1054 Unknown column 'SlideView.group' in 'fieldlist'

SQLSTATE[42S22]: Column not found: 1054 Unknown column 'group' in 'where clause' 
```

似乎`contain`甚至无法识别`group`密钥-甚至可以使用这样的分组吗？如果是，我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T22:44:54.210

您不能将“组”传递给“包含”。要执行您希望执行的操作，您需要使用 JOIN - 请参阅[CakePHP Joining Tables](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#joining-tables)。

# gwt - 在 IntelliJ 中使用带有 gwt 的 phonegap

> ID：15190389
> 
> 赞同：0
> 
> 时间：2013-03-03T20:21:08.913
> 
> 标签：gwt, cordova, intellij-idea

我想使用 GWT 将我的所有项目迁移到一个源代码。wen 正在使用 GWT 并使用 RPC 到 GAE。

我正在寻找一个 phonegap-gwt-intelliJ 示例项目。我可以开始的东西。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:37:32.233

哟

[http://funfreelance.com/android-using-intellij-ide-with-phonegap/](http://funfreelance.com/android-using-intellij-ide-with-phonegap/)

请享用 ：）

好吧，我今天用 Eclipse/PhoneGap 完成了一个 Hello World 应用程序，当我使用 PhpStorm 进行编码时，我发现 Eclipse 实现简单的东西并不那么好和复杂......（没有那么快、复杂的添加方式简单的 javascript 自动补全，您必须添加 HTML 视图、PHP 视图等）....您正在使用女巫 IDE（对于阅读这篇文章的人）......

# unix - .ssh 目录未创建

> ID：15190391
> 
> 赞同：61
> 
> 时间：2013-03-03T20:21:16.137
> 
> 标签：unix, ssh, cygwin

要生成`.ssh`目录，我使用以下命令：

```
ssh-keygen 
```

取自本教程：[http ://ebiquity.umbc.edu/Tutorials/Hadoop/05%20-%20Setup%20SSHD.html](http://ebiquity.umbc.edu/Tutorials/Hadoop/05%20-%20Setup%20SSHD.html)

但是该`.ssh`目录没有创建，所以当我使用时`cd ~/.ssh`出现此错误：

```
"no such file or directory" 
```

是不是少了一个步骤？`.ssh`使用命令时是否应该创建目录`ssh-keygen`？

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2013-03-03T20:26:32.807

我假设你有足够的权限来创建这个目录。

要解决您的问题，您可以 ssh 到其他位置：

```
ssh user@some.host 
```

并接受新密钥 - 它将在下面创建目录`~/.ssh`，`known_hosts`或者简单地使用手动创建它

```
mkdir ~/.ssh
chmod 700 ~/.ssh 
```

请注意，这`chmod 700`是重要的一步！

之后， ssh-keygen 应该可以毫无怨言地工作。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-03T20:26:21.550

> 是不是少了一个步骤？

是的。您需要创建目录：

```
mkdir ${HOME}/.ssh 
```

此外，SSH 要求您设置权限，以便只有您（所有者）可以访问 ~/.ssh 中的任何内容：

```
% chmod 700 ~/.ssh 
```

> `.ssh`使用命令时是否应该生成目录`ssh-keygen`？

否。此命令会生成一个 SSH 密钥对，但如果它无法写入所需的目录，则会失败：

```
% ssh-keygen
Generating public/private rsa key pair.
Enter file in which to save the key (/Users/xxx/.ssh/id_rsa): /Users/tmp/does_not_exist
Enter passphrase (empty for no passphrase): 
Enter same passphrase again: 
open /Users/tmp/does_not_exist failed: No such file or directory.
Saving the key failed: /Users/tmp/does_not_exist. 
```

创建密钥后，您还应该限制只有您自己可以读取这些密钥文件：

```
% chmod -R go-wrx ~/.ssh/* 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-01-19T04:07:29.317

作为对其他答案的轻微改进，您可以使用's开关将`mkdir`and`chmod`作为单个操作。`mkdir``-m`

```
$ mkdir -m 700 ${HOME}/.ssh 
```

### 用法

从 Linux 系统

```
$ mkdir --help
Usage: mkdir [OPTION]... DIRECTORY...
Create the DIRECTORY(ies), if they do not already exist.

Mandatory arguments to long options are mandatory for short options too.
  -m, --mode=MODE   set file mode (as in chmod), not a=rwx - umask
...
... 
```

# c++ - 了解参考变量的工作原理

> ID：15190394
> 
> 赞同：-3
> 
> 时间：2013-03-03T20:21:32.043
> 
> 标签：c++, pointers, pass-by-reference, void

> 好的，我不知道如何使用引用变量从 void 类型中提取一个值以将其带回 main 。我已经多次阅读教科书中的该部分，但它提供的代码片段对我来说没有意义，而且数量也不多。有人可以解释一下，或者给出一个简单的代码示例吗？
> 
> 谢谢

这是我拥有的代码，应该发生的是我应该使用我的 main 调用的第一个函数从用户那里提取 5 个测试分数。main 调用的下一个函数应该调用第三个函数，该函数确定最低的测试分数并将其从中间函数的计算中删除。

我尝试运行代码（仅使用文本存根和没有计算的变量），但我的变量都显示为最大的数字，而不是他们应该显示的用户输入。

```
#include <iostream>
#include <cmath>
#include <string>

using namespace std;

int main()
{
double score1, score2, score3, score4, score5, average;

void getScore(double &);
void calcAverage(double &);
int findLowest();

getScore(score1);
getScore(score2);
getScore(score3);
getScore(score4);
getScore(score5);

calcAverage(average);

cout<<"Let's see what we have here.\n"            <<score1<<endl<<score2<<endl<<score3<<endl<<score4<<endl<<score5<<endl<<average;
system("pause");
return 0;
}

void getScore(double &)
{
double score;

cout<<"Please enter a test score.";
    cin>>score;
    while(score<0 || score>100)
    {
        cout<<"Please enter a valid score.";
        cin>>score;
    }
}

void calcAverage(double &)
{
int findLowest();
double lowest;

cout<<"Yes, I'm a stub.";
lowest = findLowest();
}

int findLowest()
{
cout<<"I'm a stub too!";
return 5;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T21:04:58.117

你的函数应该这样写：

```
void getScore(double &refScore) //!!
{
    //double score;

    cout<<"Please enter a test score.";

    cin>>refScore;
    while(refScore<0 || refScore>100)
    {
        cout<<"Please enter a valid score.";
        cin>>refScore;
    }
} 
```

我想你应该已经明白了..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T20:23:27.830

我认为解释 of 想法的最佳方法`references`是将参考视为**别名**。这不是 100% 真实的，但对于初学者来说，这是一个很好的寓言。

*无论您对引用做什么，也会对原始对象执行任何操作。*

**因此，您所做的就是为同一个变量定义一个替代名称。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T20:32:19.600

引用是现有对象的另一个名称（别名），因此只能引用现有对象（必须初始化）并且不能重新分配给其他对象。const 指针满足这些条件，并被编译器用来表示引用。希望很清楚。

# delphi - TFileDialogEvent.OnSelectionChange GetFolder

> ID：15190395
> 
> 赞同：1
> 
> 时间：2013-03-03T20:21:36.353
> 
> 标签：delphi, delphi-2010

**[编辑]**

```
function PathFromShellItem(AShellItem: IShellItem): string;
{Helper function to get path from ShellItem}
var
  hr: HRESULT;
  iPath: PWideChar;
begin
  hr := AShellItem.GetDisplayName(SIGDN_FILESYSPATH, iPath);
  if hr = 0 then
    Result := iPath
  else
    Result := '';
end; 
```

下面的代码尝试从 IShellItem 获取文件夹名和文件名。文件名 (iName) 获取正确，但文件夹名称 (iFolder) 始终为“”。为什么 pfd.GetFolder 不返回文件夹名称？我是否试图以错误的方式获取文件夹名称？

```
function TFileDialogEvent.OnSelectionChange(const pfd: IFileDialog): HResult; stdcall;
{Handle the OnSelectionChange event and fill labels with information}
var
  ShellItem: IShellItem;
  iFilename: string;
  iFolder: string;
  iName: PWideChar;
begin
  if pfd.GetFolder(ShellItem) = S_OK then
    iFolder := PathFromShellItem(ShellItem);
  OleCheck(pfd.GetFileName(iName));
  {Set the filepath}
  if DirectoryExists(iFolder) then
    iFilename := IncludeTrailingPathDelimiter(iFolder) + string(iName);
end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T21:25:26.047

您的代码`PathFromShellItem`不正确。你想要这样的东西，灵感来自文件对话框的 VCL 代码：

```
function GetItemName(const Item: IShellItem; var ItemName: string): HRESULT;
var
  pszItemName: PWideChar;
begin
  Result := Item.GetDisplayName(SIGDN_FILESYSPATH, pszItemName);
  if Failed(Result) then
    Result := Item.GetDisplayName(SIGDN_NORMALDISPLAY, pszItemName);
  if Succeeded(Result) then
  try
    ItemName := pszItemName;
  finally
    CoTaskMemFree(pszItemName);
  end;
end;

function FileDialogFilename(const pfd: IFileDialog): string;
var
  Item: IShellItem;
  FileName: string;
  pszFileName: PWideChar;
begin
  if Succeeded(pfd.GetFolder(Item)) and 
     Succeeded(GetItemName(Item, FileName)) and
     Succeeded(pfd.GetFileName(pszFileName)) then
  try
    Result := TPath.Combine(FileName, pszFileName);
  finally
    CoTaskMemFree(pszFileName);
  end;
end; 
```

`TCustomFileDialog.GetFileName`如果您不能实际使用`TFileOpenDialog`自己，则可以将其用作此代码的模板。想一想，为什么不能直接使用`TFileOpenDialog`.

# c# - WPF 网格格式问题。

> ID：15190397
> 
> 赞同：0
> 
> 时间：2013-03-03T20:21:42.563
> 
> 标签：c#, wpf, telerik, label, textblock

我想要`Grid`两列，其中一列中我`Label`在另一列中`TextBox`显示一个值。但不幸的是，我的标签和文本框一个接一个地显示。我做错了什么？显示信息的方式是否恰当而优雅？也许您可以建议任何其他更好的方法？谢谢！

```
<StackPanel Grid.Row="0" Grid.Column="2" VerticalAlignment="Stretch">                   
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <telerik:Label Grid.Column="0" Content="Name" Width="203" FontSize="16"/>
        <telerik:Label Grid.Column="0" Content="Title" Width="203" FontSize="16"/>
        <telerik:Label Grid.Column="0" Content="Phone" Width="203" FontSize="16"/>
        <telerik:Label Grid.Column="0" Content="Email" Width="203" FontSize="16"/>
        <telerik:Label Grid.Column="0" Content="Departament" Width="203" FontSize="16"/>

        <TextBlock Grid.Column="1" x:Name="txtFullName" TextWrapping="Wrap" Height="26"/>
        <TextBlock Grid.Column="1" x:Name ="txtTitle" TextWrapping="Wrap" Height="26"/>
        <TextBlock Grid.Column="1" x:Name ="txtPhone" TextWrapping="Wrap" Height="26"/>
        <TextBlock Grid.Column="1" x:Name ="txtEmail" TextWrapping="Wrap" Height="26"/>
        <TextBlock Grid.Column="1" x:Name ="txtDepartment" TextWrapping="Wrap" Height="26"/>

    </Grid>              
</StackPanel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T21:11:54.937

您需要将行添加到您的`Grid`. 目前，只有 1 行（因为您没有`RowDefinitions`），所以每列中的所有项目都将在单行中相互堆叠。

添加网格行的方式与添加列的方式大致相同，然后您也以同样的方式告诉控件它们属于哪一行。您可以添加如下行：

```
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*"/>  <!-- * is the default width, so not required -->
        <ColumnDefinition/>            <!-- will be the same as above due to default of * -->
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
        <RowDefinition Height="*"/> <!-- the * height is implied if not present -->
        <RowDefinition Height="Auto"/>  <!-- this will take up only as much space as necessary -->
    </Grid.RowDefinitions>

    <TextBox Grid.Column="0" Grid.Row="0" Text="Label 1"/>
    <TextBox Grid.Column="0" Grid.Row="1" Text="Label 2"/>
    <!-- etc... -->
</Grid> 
```

高度为 * 的行将拉伸以填充可用空间（在所有高度为 * 的行之间划分），高度为“自动”的行将缩小，以便仅占用显示其内容所需的空间。

# vb.net - 文件的行是否被索引？

> ID：15190399
> 
> 赞同：2
> 
> 时间：2013-03-03T20:21:49.037
> 
> 标签：vb.net

我正在执行以下操作：

```
aReader = New StreamReader(fileName)
Do Until aReader.EndOfStream
   Console.WriteLine(String.Format("line {0}", aReader.ReadLine))
Loop 
```

为了显示我在哪一行，我可以这样做：

```
aReader = New StreamReader(fileName)
Dim i As Integer = 0
Do Until aReader.EndOfStream
    Console.WriteLine(String.Format("line {0}:{1}", i.ToString, aReader.ReadLine))
    i = i + 1
Loop 
```

文件中的每一行都有索引吗？上面是必需的，还是我可以使用或`i`的内置属性？`file``streamReader`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T20:27:12.687

FileStream 中没有这样的属性，但是，如果您的文件不是很大，您可以使用

```
 Dim lines() As String = File.ReadAllLines(fileName) 
```

然后你在内存中有一个可以轻松索引的数组

```
 Dim aLine = lines(lines.Count - 1) 
```

# c# - WPF DataGrid.selectedIndex 没有完全关注

> ID：15190401
> 
> 赞同：0
> 
> 时间：2013-03-03T20:21:50.730
> 
> 标签：c#, wpf, xaml, focus, observablecollection

我想在我的数据网格中自动选择我的第一个项目（当我的表单加载时）

这是我的代码

```
myDataGridEvtCode.Focus();
myDataGridEvtCode.SelectedIndex = 0; 
```

我的问题是，如果我使用箭头（向下），行不会改变，我需要输入 3 次才能更改选定的行。我认为这是因为我的 SelectedItem 注意力不集中。

非常感谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-22T09:32:39.797

我从各种资源中收集了针对 DataGrid 行键盘的信息，最后我的解决方案如下所示：

```
public void SelectRow(DataGrid grid, int rowIndex)
    {
        grid.SelectedItem = null;

        object item = grid.Items[rowIndex];

        grid.SelectedItem = item;

        var row = grid.ItemContainerGenerator.ContainerFromIndex(rowIndex) as DataGridRow;
        if (row == null)
        {
            grid.ScrollIntoView(item);
            row = grid.ItemContainerGenerator.ContainerFromIndex(rowIndex) as DataGridRow;
        }

        if (row != null)
        {
            row.Focus();
            FocusManager.SetIsFocusScope(row, true);
            FocusManager.SetFocusedElement(row, row);
        }
    } 
```

此外，当我们尝试使用箭头键将焦点从所选项目行移动到下一行时，DataGrid 键盘行为存在一个小错误。它在第一次按键时将焦点从行容器移动到当前行（这很奇怪，因为焦点在某种程度上不在 SelectRow 方法中选择的选定行项上）。

我找到了一个解决方案，并根据我的目的对其进行了修改。

[这是](http://cytivrat.blogspot.ru/2011/05/selecting-first-item-in-wpf-listview.html)一个解释，如何修复这个错误。

基于它，这是我的实现：

```
private void ItemContainerGenerator_StatusChanged(object sender, EventArgs e)
    {
        if (grid.ItemContainerGenerator.Status == System.Windows.Controls.Primitives.GeneratorStatus.ContainersGenerated)
        {
            int index = grid.SelectedIndex;

            if (index >= 0)
            {
                var row = grid.ItemContainerGenerator.ContainerFromIndex(index) as DataGridRow;

                if (row != null)
                {
                    row.Focus();

                    var presenter = FindVisualChild<DataGridCellsPresenter>(row);
                    var cell = (DataGridCell)presenter.ItemContainerGenerator.ContainerFromIndex(0);
                    cell.Focus();

                    FocusManager.SetIsFocusScope(row, true);
                    FocusManager.SetFocusedElement(cell, cell);
                }

            }
        }
    }

public static TChildItem FindVisualChild<TChildItem>(DependencyObject obj) where TChildItem : DependencyObject
    {
        for (int i = 0; i < System.Windows.Media.VisualTreeHelper.GetChildrenCount(obj); i++)
        {
            DependencyObject child = System.Windows.Media.VisualTreeHelper.GetChild(obj, i);
            if (child is TChildItem)
                return (TChildItem)child;

            var childOfChild = FindVisualChild<TChildItem>(child);
            if (childOfChild != null)
                return childOfChild;
        }
        return null;
    } 
```

并订阅构造函数中的事件：

```
grid.ItemContainerGenerator.StatusChanged += ItemContainerGenerator_StatusChanged; 
```

我希望它能帮助某人解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T21:39:37.893

WPF中有多种类型的焦点，包括逻辑焦点和键盘焦点。在我看来，所选行正在接收逻辑焦点而不是键盘焦点。您可以使用以下设置键盘焦点：

```
Keyboard.Focus(elementToFocus); 
```

然而，根据我的经验，Focus 可能会变得非常复杂。它通常需要涉及`FocusManager`，尤其是在非平凡的场景中。

我建议[阅读 WPF Focus](http://msdn.microsoft.com/en-us/library/aa969768.aspx)并摆弄`Keyboard`and`FocusManager`对象，直到你让它以你​​想要的方式运行。

# linux - Linux 内核：从网络设备获取数据包

> ID：15190405
> 
> 赞同：2
> 
> 时间：2013-03-03T20:22:03.023
> 
> 标签：linux, kernel, driver, packets

我正在尝试编写一个简单的程序，该程序从接口获取数据包并在 Linux 内核级别打印出其目标和源 MAC 地址。这是我第一个使用 Linux 内核的项目，我已经阅读了很多关于 netdevice、loopback 和 skbuff 的源代码和书籍。现在，从我到目前为止所学到的 skbuff 看起来像放置数据包数据的位置，但我看不到网络设备驱动程序如何从接口获取数据包并将它们放入 skb 或如何获得与特定接口相关的 skb。

有人可以告诉我如何看待 skb 与 eth0 等网络设备的链接吗？是否需要某种发送和接收环来接它们？

一些示例代码会很棒！做不到这一点，如果有人可以指向某个源代码（不仅仅是文件名......行号和函数名会很棒）。

抱歉，如果这是一个模糊的问题，我已尽我所能进行研究。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T21:34:16.970

您可以尝试使用 netfilter 挂钩。

使用 注册您的回调`nf_register_hook()`，它将针对给定的地址族（例如`AF_INET`IPv4）和类型（例如`NF_IP_LOCAL_IN`传入数据包）调用。您的钩子还将获取 skb 和数据包通过其传入或传出的网络设备。

回调的原型如下所示：

```
unsigned int my_hook(unsigned int hook,
                     struct sk_buff *skb,
                     const struct net_device *in,
                     const struct net_device *out,
                     int (*okfn)(struct sk_buff *)); 
```

[在http://www.sikurezza.org/ml/12_99/msg00063.html](http://www.sikurezza.org/ml/12_99/msg00063.html)也有一个（过时的）示例，但您也可以深入研究内核源代码，有几个示例如何使用网络堆栈或 iptables 模块网络过滤器钩子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T08:18:08.390

以基于PCI的以太网芯片的名称代码为例：./drivers/net/pci-skeleton.c。也许这段代码是旧式的以太网驱动程序，但它对学习很有用。

数据包接收流程： netdrv_rx_interrupt() --> 分配/替换 sk_buff --> 调用 netif_rx() 将接收到的数据包/sk_buff 传递到上层堆栈；

数据包发送流程：netdrv_start_xmit();

设备初始化流程：可以从init_module()开始；

常用函数可以在./net/core/dev.c中找到，如netif_rx...；

# javascript - 内联 SVG 动画最佳实践

> ID：15190407
> 
> 赞同：1
> 
> 时间：2013-03-03T20:22:13.933
> 
> 标签：javascript, svg, d3.js, raphael, smil

为内联 SVG 设置动画的方法是什么？！我想在路径上做一些动画。就像在某些事件上旋转一样，多条路径上的 animateMotion 也由某些事件触发。

我将包含一个指向开发站点的链接：[http](http://www.myradon.net) ://www.myradon.net 。我正在尝试完成以下工作；

当电源插头（就在“投资组合”上方）连接到女性（现在在网站中连接）时，较粗的破折号将从页面的顶部一直移动到页面的底部（当前可视化）。我正在考虑这些虚线上的路径动画（因此速度取决于路径的长度，并且应该在前一个结束时开始）。虚线是 jQuery 在 Ajax 调用中插入的十几个 SVG。

有人对如何处理这个问题有一些好主意吗？SMIL、Raphael/D3.js（SVG 已经在 DOM 中）？编辑：顺便说一句，我不关心 IE8 和更少。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T10:19:51.280

Javascript 驱动的动画将为您提供对所有浏览器的支持，并且使用 d3.js 或 raphaël 等库很容易做到（这两个库都有很多在线示例）。

根据您需要多少交互性，您可以使用 SVG 动画 (SMIL) 并提供 js 后备，例如[FakeSMILe](http://leunen.me/fakesmile/index.html)（用于 IE）。如果图形主要由简单的动画组成并且没有太多的交互，那么这种方式可能更有意义，因为通过这种方式使用图形编辑器编辑图形会更容易。

# javascript - 如何在 AngularJS 中的多个模块之间共享一个指令

> ID：15190408
> 
> 赞同：29
> 
> 时间：2013-03-03T20:22:25.787
> 
> 标签：javascript, angularjs

据我所知，AngularJS 是当今最有趣的库之一。我正在慢慢了解 Angular 的力量，我非常喜欢它。我有一些疑问，我希望我能澄清它们。即使经过一些背景工作，我也无法理解它们是如何完成的

1.  例如，我的应用程序中有一个模块，我为它编写了指令，我想向我的应用程序添加更多模块，并且还想重用为另一个模块编写的现有指令。我怎样才能做到这一点。不仅适用于过滤器、配置等的模块。

2.  我可以在模块中定义子模块吗？

3.  如何动态地将控制器添加到元素，它不应该是静态的，即通过 html 标记`ng-controller`。

4.  如果我想在所有模块之间共享一个东西，我该怎么做。例如，我在我的应用程序的所有模块之外定义了一个变量，我只想在模块内部访问它们。这可能吗，我有这个疑问因为它完全适用于单个作用域、共享作用域和 rootScope 等。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-03-03T20:36:56.413

> 问：例如，我的应用程序中有一个模块，并且我为它编写了指令，我想向我的应用程序添加更多模块，并且还想重用为另一个模块编写的现有指令。我怎样才能做到这一点。不仅适用于过滤器、配置等的模块。

当你声明一个模块时，你指定它的依赖。因此，如果您有这样的指令：

```
angular.module( 'moduleA', [] )

.directive( 'myDirective', function () {
  // ...
}); 
```

您可以从另一个模块中要求该模块：

```
angular.module( 'moduleB', [ 'moduleA' ] ); 
```

数组参数 to`angular.module`是依赖项列表。

> 问：我可以在模块中定义子模块吗？

模块在技术上都是独立的，但伪造它是非常普遍的。所以我们可以`moduleA`像这样定义它的“子模块”：

```
angular.module( 'moduleA.one', [] );
angular.module( 'moduleA.two', [] );

angular.module( 'moduleA', [
  'moduleA.one',
  'moduleA.two'
]); 
```

开发人员/读者很清楚`moduleA.one`和`moduleA.two`是 的一部分`moduleA`，而且任何时候另一个模块依赖于`moduleA`，它的两个子模块也将被包括在内。

但从技术上讲，这些都是独立的，所以如果它想这样做`moduleB`也可能需要。`moduleA.two`

> 问：如何动态添加控制器到元素，它不应该是静态的，即通过 html 标记 ng-controller。

这可能不是一个好主意。“观点”是官方记录。你的用例是什么？

> 问：如果我想在所有模块之间共享一个东西，我该怎么做。例如，我在我的应用程序的所有模块之外定义了一个变量，我只想在模块内部访问它们。这可能吗，我有这个疑问是因为它完全适用于单个作用域、共享作用域和 rootScope 等。

我不确定我明白你在问什么。但是，当您在模块中定义某些内容时，您可以通过要求它从任何其他地方访问它，如上所述。但是在 AngularJS 应用程序中，应该有*“*所有模块之外”的任何东西——所有东西都应该在一个模块中，因为否则它就定义在全局范围内（例如`window`），这是一种不好的做法。

* * *

为了更好地了解如何构建模块以获得巨大的利益，请查看我的`ngBoilerplate`kickstarter： http: [//ngbp.github.io/ngbp/](http://ngbp.github.io/ngbp/)。模块结构专为代码重用而设计，并在实践中演示了其中的许多概念。

随意详细说明其中任何一个，我将修改回复。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-02-07T16:00:53.520

## 最简单的方法

最简单的方法是将所有可共享的指令和其他部分添加到**ng**模块。

```
angular
    .module("ng")
    .directive("myDirective", function() {
        ...
    })
    .filter("MyFilter", function() {
        ...
    }); 
```

这是最简单的方法（一种*set and forget*），因为您可以轻松地将指令脚本放到 HTML 中，然后在开发自然也需要它的新模块时忘记它。

## 这种技术还有什么好处

为什么向**ng**模块添加可共享的东西是明智的？因为您的应用程序中可能有简单的页面，这些页面没有定义特定的**ngApp**模块，而只是`ng-app`在 HTML/BODY 上设置并仅运行内联角度指令。

当您将指令添加到`ng`模块时，这些页面也可以使用您的指令。

```
<html>
    <body ng-app>
        <div my-directive>
        ...
        </div>
    </body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-25T18:05:18.763

您不能在应用程序的开头创建一个 div 以便其范围与您的需要一样大吗？

```
<div ng-controller="uberController as uber">

    ....

    other controllers and html code here

    ....
</div> 
```

uber div 内的任何东西都可以使用 uber 控制器。

# c++ - 如何使用 Yacc 将语言翻译成 C++？

> ID：15190409
> 
> 赞同：1
> 
> 时间：2013-03-03T20:22:31.797
> 
> 标签：c++, yacc, translate

这是一个更普遍的问题，因为我真的不知道如何开始。基本上，我必须使用 Yacc 来解释/翻译一种叫做 CALC 的虚构语言，它可以对变量执行算术运算，然后将它们打印出来。我已经完成了解释工作，但我项目的第二部分是编写一个 C++ 文件，其中包含原始文件中的所有指令，已翻译。

我的问题是，我该怎么做？我是在语法规则的代码中写入文件，还是在 main 中写入？我一直在尝试在语法规则代码中执行此操作，但我发现数据正在向后写入文件（也就是说，如果我声明了四个变量，程序会打印出原始文件中声明的最后一个先编程，以此类推）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T20:38:11.280

好吧，Yacc 确实进行了自下而上的解析。

您大致有两种选择：

1.  当输入导致减少并且附加代码被执行时，您可以像现在一样输出结果，但是您将需要一直重新排序。

2.  您可以在规则中构建[抽象语法树](http://en.wikipedia.org/wiki/Abstract_syntax_tree)，然后按顺序遍历它。这是通常的做法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T20:43:02.053

> 数据被向后写入文件

这个特殊的位听起来像是您选择了与您想要的不同的构造。Yacc 允许左递归和右递归，这让您（例如）按照您看到每个项目的顺序（左递归）或相反的顺序解析列表。这是您现在可能正在执行的正确递归的示例：

```
list : ITEM
     | ITEM list 
```

请注意，当此子语法在输入中看到一个 ITEM 时，它不知道仅基于此使用这两个产生式中的哪一个——它们都以一个 ITEM 开头。因此，解析器向前看一个令牌。如果下一个令牌不是 ITEM，则它知道使用第一个产生式。但是如果下一个令牌是一个项目，那么它必须处理第二个产生式。但是该产生式中包含非终结符`list`，这意味着解析器实际上根本没有减少，而是将第一个 ITEM 推入堆栈并寻找另一个`list`.

这样做的结果是，如果你给这个子语法一个 ITEM 标记的列表，它只会继续将它们推入堆栈，直到它最终看到一个没有被另一个 ITEM 跟随的 ITEM。到那时，最终的 ITEM 将被第一个产生式减少（从而变成 a `list`，并且所有其他 ITEM 将被第二个产生式一个一个减少。在左递归上。

```
list : ITEM         /* matches first ITEM in list */
     | list ITEM    /* matches all other ITEMs in list */ 
```

这一次，当解析器看到一个 ITEM 时，只有一个`list`产生式以一个 ITEM 开头，所以它会立即减少第一个产生式，把那个 ITEM 变成一个`list`. 现在，如果输入流中有另一个 ITEM，它将尝试匹配 a`list`后跟一个 ITEM，并且与第二个产生式完全匹配。

这些是解析简单列表的常用习语。请注意，如果您的列表是“零个或多个”而不是“一个或多个”，那么您只需使用一个空产生式而不是包含单个项目的一个产生式。使用左递归（您通常想要的），拥有一个与第一项匹配的单独产生式为您提供了一个方便的地方来放置一个操作，例如，初始化一个数组，该数组将保存（可能）跟随的所有 ITEM。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T20:43:49.720

我将分两个阶段执行此操作：使用 yacc 创建解析树，然后遍历树以输出需要输出的任何内容。

# vb.net - 列的总和

> ID：15190410
> 
> 赞同：0
> 
> 时间：2013-03-03T20:22:34.997
> 
> 标签：vb.net, linq, sum

我有访问数据库连接到名为 T2 的 vb.net 数据库，它有 3 个表我需要从表 3 中找到列名 Qtyin 的总和并将结果放在文本框中我尝试使用 LINQ，但有一些错误：

```
Dim query = Aggregate Qtyin In T2DataSet.Table3 Into Sum()
        TextBox1.Text = query.ToString 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T09:14:13.050

基于方法的查询而不是基于语法的查询怎么样？

```
Dim sum = T2DataSet.Table3.Sum(Function(i) i.Qtyin)
TextBox1.Text = sum 
```

# asp.net-mvc-3 - NHibernate + MVC3 编辑 ActionResult - 行已更新或删除 / StaleObjectException

> ID：15190413
> 
> 赞同：0
> 
> 时间：2013-03-03T20:22:47.140
> 
> 标签：asp.net-mvc-3, nhibernate

为什么我的 ASP.NET MVC3`Edit`操作被赋予一个新对象而不是要编辑的对象？
当我检查对象的属性时，给定的 ID 值是`unsaved-value`我在 NHibernate 映射文件中指定的。

为了解决这个问题，我可以从数据库中查询要更新的对象，并从传递给方法的对象中设置我想要的属性。但是，虽然这对于具有一两个属性的非常简单的对象来说是可以的，但当有很多属性并且似乎我正在与系统作斗争时，它很快就会成为一个问题（对我来说，这表明我没有这样做事情按照他们*应该做*的方式）。

我的映射：

```
<id name="Id" column="Id" type="Guid" 
    unsaved-value="00000000-0000-0000-0000-000000000000"> 
```

我的编辑方法：

```
[NHibernateActionFilter]
[HttpPost]
public ActionResult Edit(Status status, Guid id)
{
    try
    {
        if (ModelState.IsValid)
        {
            var originalStatus = Session.QueryOver<Status>()
                                        .Where(s => s.Id == id)
                                        .SingleOrDefault<Status>();
            if (originalStatus == null)
                throw new Exception(string.Format("No Status with Id: {0}.", id));

            originalStatus.StatusName = status.StatusName;
            Session.Update(originalStatus );

            return RedirectToAction("Index");
        }
    }
    catch (DataMisalignedException ex)
    {
        // TODO: Log4Net this
        ModelState.AddModelError("", "Unable to save changes. Please try again.");
    }
    return View(status);
} 
```

*这`NHibernateActionFilter`摘自 Ayende 关于[重构无摩擦和无气味代码](http://ayende.com/blog/4809/refactoring-toward-frictionless-odorless-code-what-about-transactions)的一系列帖子，并为控制器中的每个操作提供了一个 ISession。但是，我认为这不是问题的原因。

尝试编辑项目时出现我的问题，`StaleObjectException`抛出 a：

> 行被另一个事务更新或删除（或未保存的值映射不正确）：[TheWorkshop.Web.Models.Status#00000000-0000-0000-0000-000000000000]

新的 Guid 向我显示提到的状态是新的，而不是先前返回的对象，以便填充详细信息视图。因此，似乎一个新对象已被更新并传递到我的 Edit`ActionResult`中，但这没有帮助。

正如我在上面展示的那样，我可以围绕它进行编码，但这更像是一种技巧而不是解决方案。我希望能够像这样离开我的 Edit 方法：

```
[NHibernateActionFilter]
[HttpPost]
public ActionResult Edit(Status status)
{
    try
    {
        if (ModelState.IsValid)
        {
            Session.Update(status);

            return RedirectToAction("Index");
        }
    }
    catch (DataMisalignedException ex)
    {
        // TODO: Log4Net this
        ModelState.AddModelError("", "Unable to save changes. Please try again.");
    }
    return View(status);
} 
```

**编辑**
我已经查看[了如何处理更新实体的答案。NHibernate + ASP.NET MVC](https://stackoverflow.com/a/9833412/96505)但这几乎完成了我已经完成的工作，我不敢相信更新方法必须像我的尝试那样混乱。

我还查看[了这个错误在 nhibernate 中的含义](https://stackoverflow.com/q/4404377/96505)；它看起来与我的问题相同，但我无法得到任何适合我的答案，即问题仍然存在。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T07:41:17.250

提供给 action 方法的`Status`实例是由 MVC 的模型绑定器生成的——它是一个新对象，因为模型绑定器和 NHibernate 彼此一无所知。要使其具有正确的 ID，您需要提供 ID 作为表单的一部分（隐藏）。但请注意，用户不能通过发布比表单包含的字段更多的字段或更改隐藏字段的值来进行未经授权的更改。

有不同的模型是很常见的。MVC 在前端使用视图模型，它们有不同的用途，并且看起来不一定与您的域模型相同。action 方法负责对视图模型中的值进行操作，并对领域模型执行正确的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T20:49:15.100

我真的无法在 Oskers 答案中添加任何应该标记为正确的内容。只是几点。

在您的原始方法中，由于 Ayende 的属性创建了一个事务，您不需要更新语句，NHibernate 会看到该属性已更改并为您更新它。

如果您觉得第二种方法是可行的方法，您可以通过创建自定义模型绑定器来实现此目的，该绑定器将加载到 Nhibernate 对象中。

见： [ASP.NET MVC模型绑定外键关系](https://stackoverflow.com/questions/662651/asp-net-mvc-model-binding-foreign-key-relationship/2971105#2971105)

# sql - 选择在特定年份下订单的客户

> ID：15190414
> 
> 赞同：0
> 
> 时间：2013-03-03T20:22:50.003
> 
> 标签：sql, selection

我想做这个

> 显示所有在 1996 年下订单的客户的客户名称

我用这个

```
select
  Customers.ContactName 
from Customers
where 
  Customers.CustomerID = (
    select Orders.CustomerID 
    from Orders 
    where year(Orders.OrderDate)=1996
  ); 
```

但它给出了一个错误。

数据库是罗斯文

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T20:25:55.823

我想你的子查询返回多个结果试试这个（注意 IN）：

```
select
  Customers.ContactName 
from Customers
where 
  Customers.CustomerID IN (
    select Orders.CustomerID 
    from Orders 
    where year(Orders.OrderDate)=1996
  ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T20:26:00.057

像这样加入试试

```
SELECT
    c.ContactName
FROM Customers c
INNER JOIN Orders o
    ON o.CustomerID = c.CustomerId
WHERE YEAR(o.OrderDate) = 1996 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T20:26:22.003

尝试：

```
SELECT DISTINCT c.contactName -- DISTINCT because some customers might have multiple orders
FROM customers c
JOIN orders o
    ON o.customerId = c.customerId
    AND year(o.orderDate) = 1996 
```

为了将子查询与标量进行比较，您需要确保子查询只返回一个结果（例如，通过使用 SELECT TOP 1 ... 或 SELECT COUNT(*) ...）。或者，您可以使用 EXISTS 检查子查询是否包含行或使用 IN 检查是否包含。但是，JOIN 通常是此类查询的首选方法，因为在某些情况下，数据库似乎可以更好地优化它们。

# java - 对状态的评论不起作用

> ID：15190416
> 
> 赞同：-1
> 
> 时间：2013-03-03T20:23:05.977
> 
> 标签：java, jsf, jakarta-ee, jsf-2

当我第一次加载页面时，一切正常，我没有例外。状态更新会显示相应的评论，但是每当我尝试通过单击视图来评论状态时（p：commandLink 按钮）我得到以下异常

1)主页.xhtml

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:c="http://java.sun.com/jsp/jstl/core">

<h:head>

</h:head>

            <div style="width: 100%; background-color: #EEEEEE;">
                <h:panelGrid columns="1">
                    <h:form id="speakout">
                        <h:outputText value="Speak Out" />
                        <br />
                        <h:outputText value="Share whats in your mind.!"
                            style="color:#aaaaaa;font-size:x-small;" />
                        <p:inputTextarea name="content" id="sharetext" cols="60" rows="2"
                            onclick="this.value='';" value="#{statusBean.status.statusmsg}"
                            style="text-size:small;" />
                        <br />

        <p:commandButton type="submit" value="Speak Out"
                            action="#{statusBean.save}" ajax="false" styleClass="buttonstyle" />
                        <br />
                    </h:form>

            </div>

            <!--  -->
            <div class="items">
            <h:form>
                <ui:repeat var="p" value="#{statusBean.statusList}">

                        <ui:fragment rendered="#{p.statusmsg!=null}">
                            <div class="status">
                                <!--  for text status msg check-->
                                <h:commandLink action="#{friendBean.gotoFriendProfile(p.email)}"
                                    styleClass="link">
                                    <img src="../images/profilePicture/thumb/#{p.picture}"
                                        style="height: 39px; width: 39px;" />&nbsp; <h:outputText
                                        value="#{p.statusBy}:" />
                                </h:commandLink>
                                <h:outputText value="#{p.statusmsg}" styleClass="textstyle1" />
                                <h:outputText value="#{p.timeMillis}"
                                    style="font-size:xx-small;float:right;color:#bbbbbb;font-style: italic;">
                                    <f:converter converterId="timeConverter" />
                                </h:outputText>
                                <h:commandLink action="#{statusBean.deleteStatus(p.statusId)}"
                                    value="Delete"></h:commandLink>
                                <p:growl />
                                <br />

                                <ui:repeat var="q" value="#{statusBean.commentList(p.statusId)}" >
                                    <div class="barcomment">
                                        <br />
                                        <h:commandLink
                                            action="#{friendBean.gotoFriendProfile(q.email)}"
                                            styleClass="link">
                                            <img src="../images/profilePicture/thumb/#{q.picture}"
                                                style="height: 29px; width: 29px;" />&nbsp; <h:outputText
                                                value="#{q.commentBy}:" />
                                        </h:commandLink>
                                        <h:outputText value=" #{q.comment}" styleClass="textstyle1" />
                                        <h:outputText value="#{q.timeMillis}"
                                            style="font-size:xx-small;float:right;font-style: italic;">
                                            <f:converter converterId="timeConverter" />
                                        </h:outputText>
                                        <h:commandLink
                                            action="#{statusBean.deleteComment(q.commentId)}"
                                            value="Delete"></h:commandLink>
                                    </div>

                                </ui:repeat>
                                <br />
                                <div class="comment">
                                    <p:inputText value="#{statusBean.comment.comment}"
                                        styleClass="box" />
                                    <p:commandLink value="Views"
                                        action="#{statusBean.update(p.statusId)}" ajax="false"
                                        styleClass="link" />
                                </div>
                                <br />
                            </div>
                        </ui:fragment>

                </ui:repeat>
</h:form>
            </div>

</h:body>
</html> 
```

2) 状态豆

```
package com.bean;

public class StatusBean {
    Date d;
    Comment comment;
    Status status;
    private EntityManager em;
    private UploadedFile uploadedFile;

    public Comment getComment() {
        return comment;
    }

    public void setComment(Comment comment) {
        this.comment = comment;
    }

    public Status getStatus() {
        return status;
    }

    public void setStatus(Status status) {
        this.status = status;
    }

    public StatusBean() {
        d = new Date();
        comment = new Comment();
        status = new Status();
        EntityManagerFactory emf = Persistence
                .createEntityManagerFactory("FreeBird");
        em = emf.createEntityManager();
    }

        public String save() {
    FacesContext context = FacesContext.getCurrentInstance();
    HttpSession session = (HttpSession) context.getExternalContext()
            .getSession(false);
    User user = (User) session.getAttribute("userdet");
    status.setEmail(user.getEmail());
    status.setStatusBy(user.getFirstName());
    d = new Date();
    status.setTimeMillis(d.getTime());
    status.setPicture(user.getImage());
    System.out.println("status save called");
    em.getTransaction().begin();
    em.persist(status);
    em.getTransaction().commit();
    FacesContext context2 = FacesContext.getCurrentInstance();
    context2.getExternalContext().getSessionMap().remove("statusBean");
    return "success";
}

    public List<Status> getStatusList() {
        FacesContext context = FacesContext.getCurrentInstance();
        HttpSession session = (HttpSession) context.getExternalContext()
                .getSession(true);
        User user = (User) session.getAttribute("userdet");
        Query query = em.createQuery("SELECT s FROM Status s WHERE s.email='"
                + user.getEmail() + "' ORDER BY s.timeMillis desc",
                Status.class);
        List<Status> results = query.getResultList();
        Query query1 = em.createQuery("SELECT f FROM Friend f WHERE f.email='"
                + user.getEmail() + "'", Friend.class);
        List<Friend> results1 = query1.getResultList();
        Iterator<Friend> it = results1.listIterator();
        while (it.hasNext()) {
            String email = it.next().getFriendEmail();
            Query query2 = em.createQuery(
                    "SELECT s FROM Status s WHERE s.email='" + email
                            + "' ORDER BY s.timeMillis desc", Status.class);
            List<Status> results2 = query2.getResultList();
            results.addAll(results2);

        }
        Collections.sort(results);
        int index = 0;
        int end = index+5 > results.size() ? results.size() : index+5;
        List<Status> subList = results.subList(0, end);

        session.setAttribute("statusindex", end);
        return subList;

    }

    public String update(String statusId) {

        System.out.println("Update Called...");
        FacesContext context = FacesContext.getCurrentInstance();
        HttpSession session = (HttpSession) context.getExternalContext()
                .getSession(true);
        User user = (User) session.getAttribute("userdet");
        comment.setStatusId(Integer.parseInt(statusId));
        comment.setCommentBy(user.getFirstName());
        comment.setPicture(user.getImage());
        comment.setEmail(user.getEmail());
        d = new Date();
        comment.setTimeMillis(d.getTime());
        em.getTransaction().begin();
        em.persist(comment);
        em.getTransaction().commit();
        getComment().setComment("");
        FacesContext context2 = FacesContext.getCurrentInstance();
        context2.getExternalContext().getSessionMap().remove("statusBean");
        return "success";

    }

    public List<Comment> commentList(String statusId) {
        FacesContext context = FacesContext.getCurrentInstance();
        Query query = em.createQuery(
                "SELECT c FROM Comment c WHERE c.statusId=" + statusId,
                Comment.class);
        List<Comment> results = query.getResultList();
        return results;
    }

    public String deleteStatus(String statusId) {

        Status status = em.find(Status.class, Integer.parseInt(statusId));
        FacesContext context = FacesContext.getCurrentInstance();
        HttpSession session = (HttpSession) context.getExternalContext()
                .getSession(true);
        User user = (User) session.getAttribute("userdet");
        if (user.getEmail().equals(status.getEmail())) {
            em.getTransaction().begin();
            em.remove(status);
            em.getTransaction().commit();

        } else {
            context.addMessage(null, new FacesMessage(
                    "You don't have permission to delete"));
        }

        return "success";

    }

    public String deleteComment(String commentId) {

        Comment comment = em.find(Comment.class, Integer.parseInt(commentId));
        FacesContext context = FacesContext.getCurrentInstance();
        HttpSession session = (HttpSession) context.getExternalContext()
                .getSession(true);
        User user = (User) session.getAttribute("userdet");
        Status status = em.find(Status.class, comment.getStatusId());
        if (user.getEmail().equals(status.getEmail())
                || comment.getEmail().equals(user.getEmail()))

        {
            em.getTransaction().begin();
            em.remove(comment);
            em.getTransaction().commit();
        } else {
            context.addMessage(null, new FacesMessage(
                    "You don't have permission to delete"));
        }
        return "success";

    }

} 
```

3)异常

```
Mar 03, 2013 9:10:26 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet [Faces Servlet] in context with path [/FreeBird_v.6] threw exception [An exception occurred while creating a query in EntityManager: 
Exception Description: Syntax error parsing the query [SELECT c FROM Comment c WHERE c.statusId=], line 0, column -1: unexpected end of query.
Internal Exception: NoViableAltException(-1@[792:1: comparisonExpressionRightOperand returns [Object node] : (n= arithmeticExpression | n= nonArithmeticScalarExpression | n= anyOrAllExpression );])] with root cause
NoViableAltException(-1@[792:1: comparisonExpressionRightOperand returns [Object node] : (n= arithmeticExpression | n= nonArithmeticScalarExpression | n= anyOrAllExpression );])
    at org.eclipse.persistence.internal.libraries.antlr.runtime.DFA.noViableAlt(DFA.java:159)
    at org.eclipse.persistence.internal.libraries.antlr.runtime.DFA.predict(DFA.java:144)
    at org.eclipse.persistence.internal.jpa.parsing.jpql.antlr.JPQLParser.comparisonExpressionRightOperand(JPQLParser.java:4326)
    at org.eclipse.persistence.internal.jpa.parsing.jpql.antlr.JPQLParser.comparisonExpression(JPQLParser.java:4215)
    at org.eclipse.persistence.internal.jpa.parsing.jpql.antlr.JPQLParser.simpleConditionalExpressionRemainder(JPQLParser.java:3389)
    at org.eclipse.persistence.internal.jpa.parsing.jpql.antlr.JPQLParser.simpleConditionalExpression(JPQLParser.java:3326)
    at org.eclipse.persistence.internal.jpa.parsing.jpql.antlr.JPQLParser.conditionalPrimary(JPQLParser.java:3275)
    at org.eclipse.persistence.internal.jpa.parsing.jpql.antlr.JPQLParser.conditionalFactor(JPQLParser.java:3194)
    at org.eclipse.persistence.internal.jpa.parsing.jpql.antlr.JPQLParser.conditionalTerm(JPQLParser.java:3103)
    at org.eclipse.persistence.internal.jpa.parsing.jpql.antlr.JPQLParser.conditionalExpression(JPQLParser.java:3029)
    at org.eclipse.persistence.internal.jpa.parsing.jpql.antlr.JPQLParser.whereClause(JPQLParser.java:2986)
    at org.eclipse.persistence.internal.jpa.parsing.jpql.antlr.JPQLParser.selectStatement(JPQLParser.java:380)
    at org.eclipse.persistence.internal.jpa.parsing.jpql.antlr.JPQLParser.document(JPQLParser.java:281)
    at org.eclipse.persistence.internal.jpa.parsing.jpql.JPQLParser.parse(JPQLParser.java:134)
    at org.eclipse.persistence.internal.jpa.parsing.jpql.JPQLParser.buildParseTree(JPQLParser.java:95)
    at org.eclipse.persistence.internal.jpa.EJBQueryImpl.buildEJBQLDatabaseQuery(EJBQueryImpl.java:215)
    at org.eclipse.persistence.internal.jpa.EJBQueryImpl.buildEJBQLDatabaseQuery(EJBQueryImpl.java:190)
    at org.eclipse.persistence.internal.jpa.EJBQueryImpl.<init>(EJBQueryImpl.java:142)
    at org.eclipse.persistence.internal.jpa.EJBQueryImpl.<init>(EJBQueryImpl.java:126)
    at org.eclipse.persistence.internal.jpa.EntityManagerImpl.createQuery(EntityManagerImpl.java:1475)
    at org.eclipse.persistence.internal.jpa.EntityManagerImpl.createQuery(EntityManagerImpl.java:1497)
    at com.bean.StatusBean.commentList(StatusBean.java:227)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at javax.el.BeanELResolver.invoke(BeanELResolver.java:484)
    at javax.el.CompositeELResolver.invoke(CompositeELResolver.java:161)
    at org.apache.el.parser.AstValue.getValue(AstValue.java:159)
    at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:189)
    at com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:106)
    at com.sun.faces.facelets.component.UIRepeat.getValue(UIRepeat.java:268)
    at com.sun.faces.facelets.component.UIRepeat.getDataModel(UIRepeat.java:244)
    at com.sun.faces.facelets.component.UIRepeat.setIndex(UIRepeat.java:434)
    at com.sun.faces.facelets.component.UIRepeat.doVisitChildren(UIRepeat.java:642)
    at com.sun.faces.facelets.component.UIRepeat.visitTree(UIRepeat.java:600)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1487)
    at com.sun.faces.facelets.component.UIRepeat.visitTree(UIRepeat.java:606)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1487)
    at javax.faces.component.UIForm.visitTree(UIForm.java:331)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1487)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1487)
    at com.sun.faces.lifecycle.RestoreViewPhase.deliverPostRestoreStateEvent(RestoreViewPhase.java:258)
    at com.sun.faces.lifecycle.RestoreViewPhase.execute(RestoreViewPhase.java:245)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:97)
    at com.sun.faces.lifecycle.RestoreViewPhase.doPhase(RestoreViewPhase.java:107)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:114)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:308)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T20:26:58.877

`Exception Description: Syntax error parsing the query [SELECT c FROM Comment c WHERE c.statusId=], line 0, column -1: unexpected end of query.`

看起来，当您构建 SQL 语句时，您在末尾附加了一个空值。

似乎这段代码也是您的问题。

```
 public List<Comment> commentList(String statusId) {
    FacesContext context = FacesContext.getCurrentInstance();
    Query query = em.createQuery(
            "SELECT c FROM Comment c WHERE c.statusId=" + statusId,
            Comment.class);
    List<Comment> results = query.getResultList();
    return results;
} 
```

您可以通过检查以确保`statusId != null`.

# html - 如何在 XSL 中使用控制字符

> ID：15190417
> 
> 赞同：1
> 
> 时间：2013-03-03T20:23:15.097
> 
> 标签：html, xslt, button, escaping, ascii

我正在尝试使用 xsl 来获取以下 html

```
<input type="button" value="line1&#10;line2"> 
```

我尝试了以下

```
<input type="button">
    <xsl:attribute name="value">
        <xsl:value-of select="'line1&#10;line2'" />
    </xsl:attribute>
</input> 
```

但它不工作。

编辑：由于我的 IDE (LANSA) xsl 编辑器，它可能无法正常工作。我最终使用了以下 xsl

```
<input type="button">
<xsl:attribute name="value">  line1
line2</xsl:attribute>
</input> 
```

生成以下html

```
<input type="button" value="line1
line2"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T20:46:26.793

**我没有看到任何问题——以下两种转换：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/">
  <input type="button" value="line1&#10;line2"/>
 </xsl:template>
</xsl:stylesheet> 
```

**和**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/">
  <input type="button">
   <xsl:attribute name="value">line1&#10;line2</xsl:attribute>
  </input>
 </xsl:template>
</xsl:stylesheet> 
```

**当使用我正在使用的 11 种不同 XSLT 处理器中的任何一种应用于以下 XML 文档时：**

```
<t/> 
```

**生产**：

```
<input type="button" value="line1&#xA;line2"/> 
```

# jquery - jQuery拖放，如何将最终内容保存到图像？

> ID：15190423
> 
> 赞同：0
> 
> 时间：2013-03-03T20:23:47.023
> 
> 标签：jquery, image, drag-and-drop, export

我正在实现 jQuery 可拖动逻辑：

[http://jqueryui.com/demos/draggable/](http://jqueryui.com/demos/draggable/)

但是，我不确定如何保存最终的 div 并将其内容保存到图像中？我的第一个想法是将 X/Y 坐标与字体大小/系列一起发送到后端，并以这种方式（逐行）构建图像。

这是解决这个问题的正确方法还是我错过了什么？

谢谢，

# java - JavaMail 找不到符号，无法编译的源

> ID：15190425
> 
> 赞同：0
> 
> 时间：2013-03-03T20:23:52.723
> 
> 标签：java, smtp, jakarta-mail

我发现一个教程可以帮助我创建一个邮件发件人，在第一次尝试时工作正常，但是在我关闭 netbeans 并再次尝试之后，oups，有一个错误，我无法弄清楚，netbeans 通知：`connot find symbol , symbol attachFileString,`

这是我的电子邮件代码

```
import java.io.IOException;
import java.util.Date;
import java.util.Properties;
import javax.mail.Authenticator;
import javax.mail.Message;
import javax.mail.MessagingException;
import javax.mail.Multipart;
import javax.mail.PasswordAuthentication;
import javax.mail.Session;
import javax.mail.Transport;
import javax.mail.internet.AddressException;
import javax.mail.internet.InternetAddress;
import javax.mail.internet.MimeBodyPart;
import javax.mail.internet.MimeMessage;
import javax.mail.internet.MimeMultipart;

public class Emailer {

    public static void sendEmailWithAttachments(String host, String port,
            final String userName, final String password, String toAddress,
            String subject, String message, String[] attachFiles)
            throws AddressException, MessagingException {
        // sets SMTP server properties
        Properties properties = new Properties();
        properties.put("mail.smtp.host", host);
        properties.put("mail.smtp.port", port);
        properties.put("mail.smtp.auth", "true");
        properties.put("mail.smtp.starttls.enable", "true");
        properties.put("mail.user", userName);
        properties.put("mail.password", password);

        // creates a new session with an authenticator
        Authenticator auth = new Authenticator() {
            public PasswordAuthentication getPasswordAuthentication() {
                return new PasswordAuthentication(userName, password);
            }
        };
        Session session = Session.getInstance(properties, auth);

        // creates a new e-mail message
        Message msg = new MimeMessage(session);

        msg.setFrom(new InternetAddress(userName));
        InternetAddress[] toAddresses = { new InternetAddress(toAddress) };
        msg.setRecipients(Message.RecipientType.TO, toAddresses);
        msg.setSubject(subject);
        msg.setSentDate(new Date());

        // creates message part
        MimeBodyPart messageBodyPart = new MimeBodyPart();
        messageBodyPart.setContent(message, "text/html");

        // creates multi-part
        Multipart multipart = new MimeMultipart();
        multipart.addBodyPart(messageBodyPart);

        // adds attachments
        if (attachFiles != null && attachFiles.length > 0) {
            for (String filePath : attachFiles) {
                MimeBodyPart attachPart = new MimeBodyPart();

                try {
                    attachPart.attachFile(filePath);
                } catch (IOException ex) {
                    ex.printStackTrace();
                }

                multipart.addodyPart(attachPart);
            }
        }

        // sets the multi-part as e-mail's content
        msg.setContent(multipart);

        // sends the e-mail
        Transport.send(msg);

    }

} 
```

错误是

```
java.lang.RuntimeException: Uncompilable source code - exception java.io.IOException is never thrown in body of corresponding try statement
    at Emailer.sendEmailWithAttachments(Emailer.java:63) 
```

第 63 行（Emailer.java:63）是：

```
attachPart.attachFile(filePath); 
```

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T20:30:17.037

您指出的行上似乎没有任何编译问题。不过这里有一个错字：

```
multipart.addodyPart(attachPart); 
```

它应该读

```
multipart.addBodyPart(attachPart); 
```

此外，仅在 JavaMail 1.4 中添加了[MimeBodyPart.#attachFile 。](http://javamail.kenai.com/nonav/javadocs/javax/mail/internet/MimeBodyPart.html#attachFile%28java.io.File%29)如果您使用的是旧版本，请确保获取*此*版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T20:29:15.667

删除语句周围的 try catch 块并尝试再次编译它。正如异常所解释的，您调用的方法不会引发该异常，并且当您尝试捕获无法发生的非运行时异常时会发生编译错误。

编辑：或者它可能是错字。

# haskell - 在 Haskell 中专门为 monad 绑定特殊类型类

> ID：15190429
> 
> 赞同：5
> 
> 时间：2013-03-03T20:24:26.070
> 
> 标签：haskell

在倒数第二章[For a Few Monads More](http://learnyouahaskell.com/for-a-few-monads-more#making-monads)非常好的教程“Learn You a Haskell for a Great Good”中，作者定义了以下 monad：

```
import Data.Ratio  
newtype Prob a = Prob { getProb :: [(a,Rational)] } deriving Show
flatten :: Prob (Prob a) -> Prob a  
flatten (Prob xs) = Prob $ concat $ map multAll xs  
  where multAll (Prob innerxs,p) = map (\(x,r) -> (x,p*r)) innerxs
instance Monad Prob where  
  return x = Prob [(x,1%1)]  
  m >>= f = flatten (fmap f m)  
  fail _ = Prob [] 
```

我想知道是否可以在 Haskell 中专门化绑定运算符“>>=”，以防 monad 中的值属于像 Eq 这样的特殊类型类，因为我想将属于同一值的所有概率相加。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-03T20:50:37.810

这称为“受限单子”，您可以这样定义它：

```
{-# LANGUAGE ConstraintKinds, TypeFamilies, KindSignatures, FlexibleContexts, UndecidableInstances #-}
module Control.Restricted (RFunctor(..),
                           RApplicative(..),
                           RMonad(..),
                           RMonadPlus(..),) where
import Prelude hiding (Functor(..), Monad(..))
import Data.Foldable (Foldable(foldMap))
import GHC.Exts (Constraint)

class RFunctor f where
    type Restriction f a :: Constraint
    fmap :: (Restriction f a, Restriction f b) => (a -> b) -> f a -> f b

class (RFunctor f) => RApplicative f where
    pure :: (Restriction f a) => a -> f a
    (<*>) :: (Restriction f a, Restriction f b) => f (a -> b) -> f a -> f b

class (RApplicative m) => RMonad m where
    (>>=) :: (Restriction m a, Restriction m b) => m a -> (a -> m b) -> m b
    (>>) :: (Restriction m a, Restriction m b)  => m a -> m b ->  m b
    a >> b = a >>= \_ -> b
    join :: (Restriction m a, Restriction m (m a)) => m (m a) -> m a
    join a = a >>= id
    fail :: (Restriction m a) => String -> m a
    fail = error

return :: (RMonad m, Restriction m a) => a -> m a
return = pure

class (RMonad m) => RMonadPlus m where
    mplus :: (Restriction m a) => m a -> m a -> m a
    mzero :: (Restriction m a) => m a
    msum :: (Restriction m a, Foldable t) => t (m a) -> m a
    msum t = getRMonadPlusMonoid $ foldMap RMonadPlusMonoid t

data RMonadPlusMonoid m a = RMonadPlusMonoid { getRMonadPlusMonoid :: m a }

instance (RMonadPlus m, Restriction m a) => Monoid (RMonadPlusMonoid m a) where
    mappend (RMonadPlusMonoid x) (RMonadPlusMonoid y) = RMonadPlusMonoid $ mplus x y
    mempty = RMonadPlusMonoid mzero
    mconcat t = RMonadPlusMonoid . msum $ map getRMonadPlusMonoid t

guard :: (RMonadPlus m, Restriction m a) => Bool -> m ()
guard p = if p then return () else mzero 
```

要使用受限制的 monad，您需要像这样开始您的文件：

```
{-# LANGUAGE ConstraintKinds, TypeFamilies, RebindableSyntax #-}
module {- module line -} where
import Prelude hiding (Functor(..), Monad(..))
import Control.Restricted 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T14:52:01.740

感谢 Ptharien 的 Flame 的回答（请点赞！）我设法改编了“Learn You a Haskell for a Great Good”运行的示例 monad。因为我不得不在谷歌上搜索一些细节（作为一个 Haskell 新手），所以这就是我最后所做的（“Learn ...”中的示例 FlipThree 现在给出 [(True,9 % 40), (False,31 % 40 ）]）：

文件 Control/Restricted.hs（为了缩短它，我删除了 RApplicative、RMonadPlus 等）：

```
{-# LANGUAGE ConstraintKinds, TypeFamilies, KindSignatures, FlexibleContexts, UndecidableInstances #-}
module Control.Restricted (RFunctor(..),
                           RMonad(..)) where
import Prelude hiding (Functor(..), Monad(..))
import Data.Foldable (Foldable(foldMap))
import Data.Monoid
import GHC.Exts (Constraint)

class RFunctor f where
  type Restriction f a :: Constraint
  fmap :: (Restriction f a, Restriction f b) => (a -> b) -> f a -> f b

class (RFunctor m) => RMonad m where
  return :: (Restriction m a) => a -> m a
  (>>=) :: (Restriction m a, Restriction m b) => m a -> (a -> m b) -> m b
  (>>) :: (Restriction m a, Restriction m b)  => m a -> m b -> m b
  a >> b = a >>= \_ -> b
  join :: (Restriction m a, Restriction m (m a)) => m (m a) -> m a
  join a = a >>= id
  fail :: (Restriction m a) => String -> m a
  fail = error 
```

文件 Prob.hs：

```
{-# LANGUAGE ConstraintKinds, TypeFamilies, RebindableSyntax, FlexibleContexts #-}
import Data.Ratio
import Control.Restricted
import Prelude hiding (Functor(..), Monad(..))
import Control.Arrow (first, second)
import Data.List (all)

newtype Prob a = Prob { getProb :: [(a, Rational)] } deriving Show

instance RFunctor Prob where
  type Restriction Prob a = (Eq a)
  fmap f (Prob as) = Prob $ map (first f) as

flatten :: Prob (Prob a) -> Prob a
flatten (Prob xs) = Prob $ concat $ map multAll xs
  where multAll (Prob innerxs, p) = map (\(x, r) -> (x, p*r)) innerxs

compress :: Eq a => Prob a -> Prob a
compress (Prob as) = Prob $ foldr f [] as
  where f a [] = [a]
        f (a, p) ((b, q):bs) | a == b    = (a, p+q):bs
                             | otherwise = (b, q):f (a, p) bs

instance Eq a => Eq (Prob a) where
  (==) (Prob as) (Prob bs) = all (`elem` bs) as

instance RMonad Prob where
  return x = Prob [(x, 1%1)]
  m >>= f = compress $ flatten (fmap f m)
  fail _ = Prob [] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T16:57:57.743

[这里使用Ganesh Sittampalam](http://hsenag.livejournal.com/11803.html)的技术基于广义代数数据类型的另一种可能性：

```
{-# LANGUAGE GADTs #-}

import Control.Arrow (first, second)
import Data.Ratio
import Data.List (foldl')

-- monads over typeclass Eq
class EqMonad m where
  eqReturn :: Eq a => a -> m a
  eqBind :: (Eq a, Eq b) => m a -> (a -> m b) -> m b
  eqFail :: Eq a => String -> m a
  eqFail = error

data AsMonad m a where
  Embed :: (EqMonad m, Eq a) => m a -> AsMonad m a
  Return :: EqMonad m => a -> AsMonad m a
  Bind :: EqMonad m => AsMonad m a -> (a -> AsMonad m b) -> AsMonad m b

instance EqMonad m => Monad (AsMonad m) where
  return = Return
  (>>=) = Bind
  fail = error

unEmbed :: Eq a => AsMonad m a -> m a
unEmbed (Embed m) = m
unEmbed (Return v) = eqReturn v
unEmbed (Bind (Embed m) f) = m `eqBind` (unEmbed . f)
unEmbed (Bind (Return v) f) = unEmbed (f v)
unEmbed (Bind (Bind m f) g) = unEmbed (Bind m (\x -> Bind (f x) g))

-- the example monad from "Learn you a Haskell for a Great good"
newtype Prob a = Prob { getProb :: [(a, Rational)] }
  deriving Show

instance Functor Prob where
  fmap f (Prob as) = Prob $ map (first f) as

flatten :: Prob (Prob a) -> Prob a
flatten (Prob xs) = Prob $ concat $ map multAll xs
  where multAll (Prob innerxs, p) = map (\(x, r) -> (x, p*r)) innerxs

compress :: Eq a => Prob a -> Prob a
compress (Prob as) = Prob $ foldl' f [] as
  where f [] a = [a]
        f ((b, q):bs) (a, p) | a == b    = (a, p+q):bs
                             | otherwise = (b, q):f bs (a, p)

instance Eq a => Eq (Prob a) where
  (==) (Prob as) (Prob bs) = all (`elem` bs) as

instance EqMonad Prob where
  eqReturn x = Prob [(x, 1%1)]
  m `eqBind` f = compress $ flatten (fmap f m)
  eqFail _ = Prob []

newtype Probability a = Probability { getProbability :: AsMonad Prob a }

instance Monad Probability where
  return = Probability . Return
  a >>= f = Probability $ Bind (getProbability a) (getProbability . f)
  fail = error

instance (Show a, Eq a) => Show (Probability a) where
  show = show . getProb . unEmbed . getProbability

-- Example flipping four coins (now as 0/1)
prob :: Eq a => [(a, Rational)] -> Probability a
prob = Probability . Embed . Prob

coin :: Probability Int
coin = prob [(0, 1%2), (1, 1%2)]

loadedCoin :: Probability Int
loadedCoin = prob [(0, 1%10), (1, 9%10)]

flipFour :: Probability Int
flipFour = do
  a <- coin
  b <- coin
  c <- coin
  d <- loadedCoin
  return (a+b+c+d) 
```

# qt - QTextCursor 和 beginEditBlock

> ID：15190437
> 
> 赞同：2
> 
> 时间：2013-03-03T20:25:15.537
> 
> 标签：qt, qt5, qplaintextedit, qtextcursor

我在 QPlainTextEdit 中有一些文本，每行以 10 个空格开头：

```
 line1
          line2
          line3
          line4 
```

然后，我选择几行，并在一个循环中从所有选定的行中删除前两个空格：

```
cursor.beginEditBlock();
for (QTextBlock block = startBlock; block != endBlock; block = block.next()) {
    cursor.setPosition(block.position());
    cursor.setPosition(block.position() + 2, QTextCursor::KeepAnchor);
    cursor.removeSelectedText();
}
cursor.endEditBlock(); 
```

问题是上面的代码“损坏”了最后选择的行 - 好像它删除了某种行尾标记 - 当我想跳到最后一行的末尾时，光标移动到它下面的行，在第一个和第二个字符。即使选择在编辑后也没有正确显示 - 除了最后一行之外的所有行都将选择指示器扩展到右侧窗口边缘，最后一行的指示器仅与该行一样宽。

```
 line1    < 1\. selected lines, run the code
        line2    <
        line3    <        < 2\. here I jump to end of line
 |      line4

 ^ 3\. cursor appears here 
```

当我删除`beginEditBlock()`并且`endEditBlock()`一切正常。

请问，有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T07:07:26.197

在这种情况下`block != endBlock`，您的光标将永远不会到达最后一个块。你应该使用这个：

```
QTextBlock block = document->firstBlock();
while (block.isValid())
{
    // do your stuff
    block = block.next();
} 
```

# android - Android：试图让 TableLayout 中的按钮大小相同并伸展以填充屏幕宽度

> ID：15190449
> 
> 赞同：0
> 
> 时间：2013-03-03T20:26:23.840
> 
> 标签：android

我正在做一个音板。我有一个 2 x 8 的表格布局。我想要它，这样按钮的大小都相同，并且会伸展以填充屏幕宽度。我尝试设置宽度 t fill_parent，但它们每行只有一个按钮，而不是 2。现在我将大小设置为固定数字。

xml文件

安卓：方向=“水平”>

```
<Button
        android:id="@+id/butVol"
            android:layout_gravity="center"
           android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:text="Vol" />

    <Button
        android:id="@+id/butRingtone"
            android:layout_gravity="center"
           android:layout_width="wrap_content"

         android:layout_height="wrap_content"
         android:text="Make Into Ringtone" /> 
```

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
 android:background="#ff888888"
android:orientation="vertical" > 
```

```
 <TableRow
    android:id="@+id/tableRow1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:padding="1dip" >

  <Button
        android:id="@+id/but1"
         android:layout_width="150dp"
         android:text="begin" />

     <Button
        android:id="@+id/but2"
         android:layout_width="150dp"
         android:text="evening" /> 

</TableRow>

 <TableRow
    android:id="@+id/tableRow1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:padding="1dip" >

<Button
        android:id="@+id/but3"
         android:layout_width="150dp"
         android:text="freak" />

     <Button
        android:id="@+id/but4"
         android:layout_width="150dp"
         android:text="go" /> 

</TableRow>

 <TableRow
    android:id="@+id/tableRow1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:padding="1dip" >

</TableRow>

      <TableRow
    android:id="@+id/tableRow1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:padding="1dip" >

     <Button
        android:id="@+id/but5"
         android:layout_width="150dp"
         android:text="hello" />

     <Button
        android:id="@+id/but6"
         android:layout_width="150dp"
         android:text="hitme" /> 

</TableRow> 
 <TableRow
    android:id="@+id/tableRow1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:padding="1dip" >

   <Button
        android:id="@+id/but7"
         android:layout_width="150dp"
         android:text="I like that" />

     <Button
        android:id="@+id/but8"
         android:layout_width="150dp"
         android:text="laugh" /> 

</TableRow>

     <TableRow
    android:id="@+id/tableRow1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:padding="1dip" >

   <Button
        android:id="@+id/but9"
         android:layout_width="fill_parent"
         android:text="My Card" />

     <Button
        android:id="@+id/but10"
         android:layout_width="fill_parent"
         android:text="Nerves" /> 

</TableRow>
  <TableRow
    android:id="@+id/tableRow1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:padding="1dip" >

   <Button
        android:id="@+id/but11"
         android:layout_width="150dp"
         android:text="Plan" />

     <Button
        android:id="@+id/but12"
         android:layout_width="150dp"
         android:text="Poor choice" /> 

</TableRow>   

 <TableRow
    android:id="@+id/tableRow1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:padding="1dip" >

   <Button
        android:id="@+id/but13"
         android:layout_width="150dp"
         android:text="Rule" />

     <Button
        android:id="@+id/but14"
         android:layout_width="150dp"
         android:text="Serious" /> 

</TableRow>     

     <TableRow
    android:id="@+id/tableRow1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:padding="1dip" >

   <Button
        android:id="@+id/but15"
         android:layout_width="150dp"
         android:text="smile" />

     <Button
        android:id="@+id/but16"
         android:layout_width="150dp"
         android:text="word" /> 

</TableRow> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T15:01:56.520

使您的表格行如下...

```
<TableRow
      android:id="@+id/tableRow1"
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"
      android:padding="1dip" >
<Button
    android:id="@+id/but1"
    android:layout_width="150dp"
    android:text="begin" />

 <Button
     android:id="@+id/but2"
     android:layout_width="fill_parent"
     android:text="evening" /> 
```

# excel - 如何计算excel中的单元格？需要计算有多少说赢，有多少说输

> ID：15190450
> 
> 赞同：0
> 
> 时间：2013-03-03T20:26:24.040
> 
> 标签：excel, variables, count

如何计算excel中的单元格？需要计算有多少说赢，有多少说输。例如，C 列包含单词 WIN 或 LOSS。我想要一个计算并显示记录的单元格（例如 23-11） 我一直在尝试 IF 函数，但我无法让它通过并全部计算。我想我需要一个变量来跟踪输赢。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T20:52:04.670

你需要这个公式

```
=CONCATENATE(COUNTIF(A1:A9,"WIN")," - ",COUNTIF(A1:A9,"LOSS")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T20:30:49.747

如果你的意思是从一个公式，类似的东西`=COUNTIF(C:C,"WIN")+COUNTIF(C:C,"LOSS")`应该工作。如果不是，那么您可能有尾随空格或使值不完全是“WIN”或“LOSS”而是“WIN”等的东西。

# django - Django 从嵌套应用程序加载模板标签无法正常工作

> ID：15190452
> 
> 赞同：1
> 
> 时间：2013-03-03T20:26:41.287
> 
> 标签：django, django-templates, django-custom-tags

文件结构：

```
_project_
   __init__.py
   settings/ 
       __init__.py
       settings.py
   apps/
       __init__.py
       newapp/
           __init__.py
           models.py
           ....
           templatetags/
               __init__.py
               test_tag.py

...
__init__.py
manage.py 
```

test_tag.py 包含：

```
from django import template
from django.template.defaultfilters import stringfilter

register = template.Library()

@register.filter
@stringfilter
def lower(value):
    return value.lower() 
```

test.html 包含：

```
{% load test_tag from _project_.apps.newapp.templatetags %} 
```

Django 1.5 外壳（python manage.py 外壳）：

```
(InteractiveConsole)
>>> from _project_.apps.newapp.templatetags import test_tag
>>> test_tag.lower("QWERTY")
u'qwerty' 
```

Django 1.5 的设置：

```
INSTALLED_APPS = (
    ...
    '_project_.apps.newapp',
    ...
)

TEMPLATE_LOADERS = (
    'django.template.loaders.filesystem.Loader',
    'django.template.loaders.app_directories.Loader',
) 
```

但是 Django 1.5 会产生异常 TemplateSyntaxError：

```
'_project_.apps.newapp.templatetags' is not a valid tag library: Template library _project_.apps.newapp.templatetags not found, tried ... 
```

PS：服务器重启，*.pyc 文件被删除，但问题存在。当“newapp”位于 / *project* /newapp/ 时 - 一切正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T20:45:34.653

我认为你必须在你的 html 页面中修复加载模板标签

```
{% load test_tag %} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T20:46:45.710

您`{% load %}`以错误的方式使用语法。根据[文档](https://docs.djangoproject.com/en/1.5/ref/templates/builtins/#load)，从`{% load foo from bar %}`名为. 在您的情况下，这是库的名称，而不是标签或过滤器名称。`foo``bar``{% load test_tag from _project_.apps.newapp.templatetags %}``test_tag`

所以它应该更像：

```
{% load lower from test_tag  %} 
```

# android - Opengl ES。立方体上的纹理。旋转

> ID：15190456
> 
> 赞同：1
> 
> 时间：2013-03-03T20:27:14.467
> 
> 标签：android, opengl-es, rotation, textures, cube

我有 6 种不同纹理的立方体。我写了微笑动画。当我旋转我的立方体时，一切都很好，但是在我的动画之后，我的纹理改变了它们的位置。

例如。我在左边旋转我的立方体。我看到的是右侧，但前面有纹理（动画后）。

当立方体在动画期间我看到正确的纹理时，但在纹理从前面变为纹理之后。

这是我的立方体绘制方法的代码。

```
 public void draw(GL10 gl) {
      gl.glFrontFace(GL10.GL_CCW);

      gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
      gl.glEnableClientState(GL10.GL_TEXTURE_COORD_ARRAY);
      gl.glVertexPointer(3, GL10.GL_FLOAT, 0, vertexBuffer);
      gl.glTexCoordPointer(2, GL10.GL_FLOAT, 0, texBuffer);

      // front
      gl.glPushMatrix();
      gl.glTranslatef(0f, 0f, cubeHalfSize); 
      gl.glBindTexture(GL10.GL_TEXTURE_2D, textureIDs[front]);
      gl.glDrawArrays(GL10.GL_TRIANGLE_STRIP, 0, 4);
      gl.glPopMatrix();

      // left
      gl.glPushMatrix();
      gl.glRotatef(270.0f, 0f, 1f, 0f);
      gl.glTranslatef(0f, 0f, cubeHalfSize);
      gl.glBindTexture(GL10.GL_TEXTURE_2D, textureIDs[left]);
      gl.glDrawArrays(GL10.GL_TRIANGLE_STRIP, 4, 4);
      gl.glPopMatrix();

      // back
      gl.glPushMatrix();
      gl.glRotatef(180.0f, 0f, 1f, 0f);
      gl.glTranslatef(0f, 0f, cubeHalfSize);
      gl.glBindTexture(GL10.GL_TEXTURE_2D, textureIDs[back]);
      gl.glDrawArrays(GL10.GL_TRIANGLE_STRIP, 8, 4);
      gl.glPopMatrix();

      // right
      gl.glPushMatrix();
      gl.glRotatef(90.0f, 0f, 1f, 0f);
      gl.glTranslatef(0f, 0f, cubeHalfSize);
      gl.glBindTexture(GL10.GL_TEXTURE_2D, textureIDs[right]);
      gl.glDrawArrays(GL10.GL_TRIANGLE_STRIP, 12, 4);
      gl.glPopMatrix();

      // top
      gl.glPushMatrix();
      gl.glRotatef(270.0f, 1f, 0f, 0f);
      gl.glTranslatef(0f, 0f, cubeHalfSize);
      gl.glBindTexture(GL10.GL_TEXTURE_2D, textureIDs[top]);
      gl.glDrawArrays(GL10.GL_TRIANGLE_STRIP, 16, 4);
      gl.glPopMatrix();

      // bottom
      gl.glPushMatrix();
      gl.glRotatef(90.0f, 1f, 0f, 0f);
      gl.glTranslatef(0f, 0f, cubeHalfSize);
      gl.glBindTexture(GL10.GL_TEXTURE_2D, textureIDs[bottom]);
      gl.glDrawArrays(GL10.GL_TRIANGLE_STRIP, 20, 4);
      gl.glPopMatrix();

      gl.glDisableClientState(GL10.GL_VERTEX_ARRAY);
      gl.glDisableClientState(GL10.GL_TEXTURE_COORD_ARRAY);

   } 
```

这是我的更新方法

```
 public void updateRotation(GL10 gl) {

    if (currentProgress >= 1f) {
        return;
    }

    long dt = System.currentTimeMillis() - getAnimStart();
    currentProgress = dt / (float) animTime;

    Log.d("progress", "" + currentProgress);
    if (currentProgress > 1f) {
        currentProgress = 1;
    } 
    else if(currentProgress < 0){
        currentProgress = 0;
    }

    currentProgress = interpolator.getInterpolation(currentProgress);

    setCurrentRotX((initialRotX + (targetRotX - initialRotX) * currentProgress));
    gl.glRotatef(-(float)((getCurrentRotX() * 180)/Math.PI), 1.0f, 0.0f, 0.0f);

    setCurrentRotY(initialRotY + (targetRotY - initialRotY) * currentProgress);
    gl.glRotatef(-(float)((getCurrentRotY() * 180)/Math.PI), 0.0f, 1.0f, 0.0f);

} 
```

# virtualbox - 并行和虚拟有什么区别

> ID：15190457
> 
> 赞同：0
> 
> 时间：2013-03-03T20:27:20.163
> 
> 标签：virtualbox, parallels

正如标题所说，我的印象是使用类似 Virtualbox 或 VMware 的东西实际上是并行的，但我被告知它们是不同的。当我搜索以了解有关此的更多信息时，我迷失了解决方案。有人可以向我解释其中的区别吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T20:26:32.947

并行与并行或并发计算更相关。典型的资源涉及（同一台机器的）多个内核或涉及多个节点（每个节点由多个处理器和多个内核组成）的集群，甚至是运行数千个内核的大型系统。这通常与计算密集型应用程序有关，例如天气预报或大规模模拟。

使用 VirtualBox 或 Parallels 或 VMWare 的虚拟设置旨在促进并行安装。例如，您可以在 Mac 机器上安装 Linux 或在 Linux 机器上安装 Windows。如果使用虚拟化软件在 Linux 机器上完成 Windows 安装，则 Windows 被称为客户操作系统，而 linux 被称为主机。在大规模情况下，可以拥有一台相当强大的机器来托管数百个虚拟机。

最后，为了以一种好的方式合并事物，如果有一台 64 核的机器，比如 128GB RAM，虚拟化软件（例如 VMWare）将利用机器的并行特性来运行虚拟机。出于同样的原因，您可以使用多个 VM 安装来模拟集群 :)

这有意义吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T20:29:19.800

虚拟不是很“真实”的东西。它是模拟的，就像真实的东西一样工作。

并行意味着两件事并排运行。例如，短跑运动员在赛道上彼此平行。

# android - 尝试使用 TextureAtlas 读取包文件时出现异常

> ID：15190460
> 
> 赞同：1
> 
> 时间：2013-03-03T20:27:53.733
> 
> 标签：android, textures, libgdx

这不应该工作吗？

```
 TextureAtlas atlas = new TextureAtlas(Gdx.files.internal("data/texture.png"));
    AtlasRegion region = atlas.findRegion("ape_glad");
    Sprite ape= new Sprite(region); 
```

相反，我得到：***com.badlogic.gdx.utils.GdxRuntimeException: Error reading pack file: data/texture.png***在 Oo 上方的第一行

感谢您的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T20:37:44.897

首先，您需要创建一个纹理图集，使用[TexturePacker](http://code.google.com/p/libgdx/wiki/TexturePacker)是 libgdx 的推荐方式。它会生成纹理图像和另一个文件（包含 libgdx 所需的信息`TextureAtlas`）。

在您的代码中，您需要向构造函数提供 atlas 文件，请参阅[`TextureAtlas()`文档](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/graphics/g2d/TextureAtlas.html#TextureAtlas%28com.badlogic.gdx.files.FileHandle%29)，而不是图像本身：

```
TextureAtlas atlas = new TextureAtlas(Gdx.files.internal("data/texture.atlas")); 
```

（注意使用“atlas”文件而不是图像文件）

# c# - .NET 反射：带有某些字段的 MissingFieldException

> ID：15190463
> 
> 赞同：1
> 
> 时间：2013-03-03T20:28:03.697
> 
> 标签：c#, .net, reflection

我正在制作一个.NET 兼容的编译器，今天我遇到了一个非常奇怪的错误。我正在测试字段获取器，有时我会`MissingFieldException`使用一些内置类型的字段。

我困扰的领域是：

*   `MaxValue`所有数字的
*   `MinValue`所有数字的
*   `double.PositiveInfinity`
*   `double.NegativeInfinity`
*   `double.NaN`

代码编译良好：在编译期间，`FieldInfo`找到并发出相应`ldsfld`的。然而，在运行阶段，上述异常被抛出。这只发生**在某些领域**：`Type.EmptyTypes`按预期编译和工作！

我试图研究`csc`为这些字段发出的 IL 代码，但它做了一些优化，程序只是将实际值推送到堆栈而不是调用字段。虽然这显然是一种更有效的方法，但现在我想让我的编译器尽可能简单。

有没有人遇到过类似的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T20:37:13.417

> 我试图研究`csc`为这些字段发出的 IL 代码，但它做了一些优化，程序只是将实际值推送到堆栈而不是调用字段。

列表中的所有字段都是***常量***字段。因此，它们的值将被复制到由引用它们的代码生成的 IL 中。

# php - 如何发布选择列表中的所有选项？

> ID：15190464
> 
> 赞同：7
> 
> 时间：2013-03-03T20:28:06.833
> 
> 标签：php, javascript, select

我有一个选择多个列表，其中包含一些项目。它是 ACL 的 IP 地址列表。人们可以添加/删除 IP，然后保存列表。但是，除非您选择列表中的某个项目，否则`$_POST[selectName]`不包含任何值。我怎样才能做到这一点？我知道我可以用 javascript 做到这一点，但我宁愿坚持使用 PHP。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-03T20:33:39.270

编辑/更正：您需要 JS。无法通过 POST 发送所有（选择的和未选择的）选项。您必须在提交之前以编程方式选择所有选项。

带表格的文件（file1.php）：

```
<script type="text/javascript">
    function selectAll() 
    { 
        selectBox = document.getElementById("someId");

        for (var i = 0; i < selectBox.options.length; i++) 
        { 
             selectBox.options[i].selected = true; 
        } 
    }
</script>

<form method="post" action="file2.php">
    <select id="someId" name="selectName[]" multiple>
        <option value="123.123.123.123">123.123.123.123</option>
        <option value="234.234.234.234">234.234.234.234</option>
    </select>
    <input type="submit" name="submit" value=Submit onclick="selectAll();">
</form> 
```

接收 POST 的文件（file2.php）：

```
<?php
    foreach ($_POST['selectName'] as $item)
    {
    print "$item<br/>";
    }
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-10T20:08:43.533

为了解决这个问题，您还可以使用@Kamil 代码的 jQuery 版本，它比循环简单一点：

```
<script type="text/javascript">
jQuery('[name="form1"]').on("submit",selectAll);

function selectAll() 
{ 
    jQuery('[name="selectName[]"] option').prop('selected', true);
}

</script>
<form name="form1" method="post" action="file2.php">
<select id="someId" name="selectName[]" multiple>
    <option value="123.123.123.123">123.123.123.123</option>
    <option value="234.234.234.234">234.234.234.234</option>
</select>
<input type="submit" name="submit" value=Submit onclick="selectAll();">  
</form> 
```

# google-app-engine - 使用 Google Cloud Endpoints 发送 HTTP 204 响应

> ID：15190471
> 
> 赞同：4
> 
> 时间：2013-03-03T20:28:53.537
> 
> 标签：google-app-engine, google-cloud-endpoints

我正在使用 Google Cloud Endpoints 创建一个 API，如果没有可返回的内容，我想在其中返回“无内容”HTTP 204 响应。我尝试返回 null，这会在开发服务器上引发错误，并在生产环境中返回非空结果，状态码为 200。

是否可以发送真正的 204 空响应或其他类型或自定义响应？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T16:34:37.933

`204 No Content`要为生产 Python Cloud Endpoints API返回一个，您可以使用`VoidMessage`.

```
from google.appengine.ext import endpoints
from protorpc import messages
from protorpc import message_types
from protorpc import remote

class MyMessage(messages.Message):
  ...

@endpoints.api('someapi', 'v1', 'Description')
class MyApi(remote.Service):

  @endpoints.method(MyMessage, message_types.VoidMessage,
                    ...)
  def my_method(self, request):
    ...
    return message_types.VoidMessage() 
```

这目前在开发服务器上返回 200，感谢您找到此错误！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T12:46:26.043

这可能无济于事，但我知道操纵状态码的唯一方法是引发异常。提供了一组默认异常，它们映射到 400、401、403、404 和 500。文档说您可以将[endpoints.ServiceException 子类](https://developers.google.com/appengine/docs/python/endpoints/exceptions)化以生成其他状态代码，但是我无法让它工作。如果您将 http_status 设置为上面列出的任何一个以外的任何值，它总是会导致 400。

```
class TestException(endpoints.ServiceException):
    http_status = httplib.NO_CONTENT 
```

我在我的处理程序中运行一个测试，如下所示：

```
raise TestException('The status should be 204') 
```

我在使用 API 资源管理器测试它时看到了这个输出：

```
400 Bad Request

- Show headers -

{
 "error": {
  "errors": [
   {
    "domain": "global",
    "reason": "badRequest",
    "message": "The status should be 204"
   }
  ],
  "code": 400,
  "message": "The status should be 204"
 }
} 
```

# wpf - 更改控件内特定属性的 DataContext - WPF

> ID：15190472
> 
> 赞同：0
> 
> 时间：2013-03-03T20:28:53.810
> 
> 标签：wpf, mvvm, datacontext

我有用户控件，其中包含带有 WaterMark 的 TextBox

```
<AdornerDecorator>
                        <TextBox 
                            Height="20" 
                            Margin="10,0" 
                            Grid.Column="0" 
                            Text="{Binding MainCategoryTextBoxValue, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Name="MainCatTextBox">

                            <controls:WatermarkService.Watermark>
                                <TextBlock VerticalAlignment="Center" x:Name="MainCategoryTextBlock"> </TextBlock>
                            </controls:WatermarkService.Watermark>
                        </TextBox>
</AdornerDecorator> 
```

你可以在这里看到 WatermarkService 的实现 [https://stackoverflow.com/a/836463/1548347](https://stackoverflow.com/a/836463/1548347)

我想在里面取“MainCategoryTextBlock”文本块`<controls:WatermarkService.Watermark>`并将其 DataContext 设置为与我的 UserControl DataContext 相同，以便从我的 ViewModel 更改 RunTime 中的水印文本。

我尝试将“MainCategoryTextBlock”DataContext 与 RelativeSource 绑定到我的 UserControl DataContext 但我没有成功（可能是语法错误 - 我不确定）。

```
DataContext="{Binding DataContext, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}}" 
```

你有什么线索我该如何解决？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T20:44:39.583

您应该将窗口的数据上下文属性设置为视图模型，并将文本块的文本属性绑定到视图模型属性。

```
<TextBlock Text={Binding Path=PropertyOnViewModel} /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T01:26:43.407

如果您的 UserControl 有一个名称，那么您可以这样做：

```
DataContext={Binding ElementName="YourUserControlName", Path=DataContext} 
```

但我可以看到你在装饰器中使用你的文本框，所以你不能`FindAncestor`在这种情况下使用，因为你的文本框和你的 UserControl 不属于同一个可视化树。

# asp.net-mvc - 从外部库调用 Controller.Redirect 或 Controller.RedirectToAction

> ID：15190480
> 
> 赞同：2
> 
> 时间：2013-03-03T20:29:24.573
> 
> 标签：asp.net-mvc

环境：ASP.NET MVC 4、Visual Studio 2012

MVC 4 模板创建的 AccountController 包含一个 RedirectToLocal 例程，可防止 URL 欺骗攻击。我想将此例程移动到我自己的外部库（在它自己的库 dll 项目中）。经过一番调查，看起来最好的方法是扩展 Controller 类。我的（不成功的）尝试如下所示。

我的问题是 Controller.Redirect 和 Controller.RedirectToAction 都是受保护的内部函数，并且“由于它们的保护级别而无法访问”。

从外部库调用 Redirect 或 RedirectToAction 的常用方法是什么？

```
public static class ControllerExtensionMethods
{
    public static ActionResult RedirectToLocal(
                                  this Controller controller,
                                  string redirectUrl)
        {
            if (controller.Url.IsLocalUrl(redirectUrl)) {
                return controller.Redirect(redirectUrl);  // error
            } else {
                return controller.RedirectToAction("Index", "Home"); // error
            }
        }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T20:43:29.880

我想解决这个问题的一种方法是制造并返回一个新的 ActionResult 而不是尝试调用受保护的重定向例程。我希望得到比我更了解这些东西的人的确认。

```
public static class ControllerExtensionMethods
{
    public static ActionResult RedirectToLocal(
                                  this Controller controller,
                                  string redirectUrl)
        {
            if (controller.Url.IsLocalUrl(redirectUrl)) {
                return new RedirectResult(redirectUrl);
            } else {
                return new RedirectToRouteResult(
                   new RouteValueDictionary {
                       {"controller", controllerName},
                       {"action", actionName}
                   });
            }
        }
} 
```

# c# - 修正 DVD 封面的图像

> ID：15190481
> 
> 赞同：1
> 
> 时间：2013-03-03T20:29:49.447
> 
> 标签：c#, windows-runtime, edge-detection, writeablebitmap, writeablebitmapex

我正在尝试将 DVD 的封面图像作为照片中的矩形图像。现在，由于照片上的封面通常有点歪斜，我需要以编程方式对其进行纠正。我已经使用 Laplacian of Gauss 过滤器移除了大部分环境，但现在我需要找到封面的边界并以某种方式用封面图像填充整个框架。我想过使用霍夫变换，但这似乎是连接边缘的蛮力。我想在 Windows RT 设备（Surface）上运行它，所以 C# 的低级想法会很棒。有任何想法吗？

![DVD封面纠正](../Images/cf45ce339bde16a3cf0a99b7f6c7497d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T08:39:28.027

您应该查看 OpenCV 和[图像分割部分](http://docs.opencv.org/modules/imgproc/doc/feature_detection.html?highlight=segmentation)。之后，您可以对 2D 图像执行倾斜/[剪切变换](http://en.wikipedia.org/wiki/Shear_mapping)。

# php - 随机选择一个文件

> ID：15190485
> 
> 赞同：0
> 
> 时间：2013-03-03T20:30:06.927
> 
> 标签：php, image

我正在编写一个脚本以每天通过电子邮件向自己发送随机图像，我想要做的是设置一个变量`$image`以等于名为 /images 的目录中的“随机”图像。

图像只是哪个并不重要（即它不需要真正随机它可以在日期，图像大小，字母名称等上完成。）

图像是 .jpg、.jpeg、.png、.gif 的混合格式。

将随机图像分配给`$image`变量的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T20:32:23.170

```
 $images = array('image1.png', 'image2.png', 'image3.jpg');

 $selectedimage = rand(0,count($images));

 $image = $images[$selectedimage]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T20:39:29.157

像这样的东西可能会起作用..

```
$files = scandir('/images');
$images = array();
foreach ($files as $file) {
    $ext = pathinfo($file, PATHINFO_EXTENSION);
    switch($ext) {
    case 'jpg':
    case 'png':
    case 'gif':
        $images[] = $file;
        break;
    }
}

$image = $images[array_rand($images)]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T21:10:41.370

如果我这样做，我会更像一副纸牌，其中每张纸牌都会被使用一次，然后用完整的纸牌重新开始。简单地拉出一个随机图像将允许背靠背返回相同的图像。

从一副完整的牌开始，选择 52 张中的任何一张。将牌 52 与已抽出的牌交换，并将抽出的牌放回位置 52（牌组底部）。

接下来抽一张牌 1-51。将抽到的卡与卡 51 交换。

抽一张牌 1-50 并将抽出的牌与牌 50 交换。

重复直到只有 1 张卡，然后当卡 1 与卡 1 交换时，将选择计数重置为 52。

重新开始，选择卡片 1-52，然后将卡片与 #52 交换，然后是 1-51、1-50...

# c++ - 编译器生成动作的实现

> ID：15190486
> 
> 赞同：4
> 
> 时间：2013-03-03T20:30:07.997
> 
> 标签：c++, c++11, move-semantics

编译器如何实现隐式编译器生成的移动构造函数和移动赋值运算符？

编译器是否使用统一的复制和交换习语`operator=`（具有强大的异常安全保证），还是实现了成员明智的移动？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T20:32:45.043

这是一个成员移动，就像隐式定义的复制操作执行成员复制一样。见 12.8 [class.copy] 第 15 和 25 段。

对于不可复制类型或不可交换类型，复制和交换是不可能的，您不希望移动操作依赖于另一个特殊成员或`swap`可能不存在或可能无法按要求工作的成员。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T20:42:51.733

> 编译器是否使用带有统一 operator= 的复制和交换习惯用法（具有强大的异常安全保证），还是实现了成员明智的移动？

根据 C++11 标准的第 12.8/15 段：

> 非联合类 X 的隐式定义的复制/移动构造函数执行**其基类和成员的成员复制/移动**。[...]

此外，根据第 12.8/28 段：

> 非联合类 X 的隐式定义的复制/移动赋值运算符执行**其子对象的成员复制/移动赋值**。[...]

# c# - 表格不显示任何内容

> ID：15190492
> 
> 赞同：0
> 
> 时间：2013-03-03T20:30:33.887
> 
> 标签：c#, winforms, dialog

我是 Winforms 和 C# 的新手，所以这听起来像是一个愚蠢的问题。我有下面显示的类，用于创建要显示为模式对话框的表单。

```
class FrmDelivery : Form
{
    ListBox s;
    public FrmDelivery()
    {
        s = new ListBox();

        s.DataSource = new List<int>(){1,2,3,4};
        s.Update();
        s.Show();

    }

} 
```

但是，当我使用该`ShowDialog`方法显示此表单时，由于某些原因，它没有显示任何内容。我应该怎么做才能在这个表单中添加一个列表框？

***编辑：***

我使用代码来显示表单：

```
 FrmDelivery frm = new FrmDelivery();
        frm.ShowDialog(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T20:40:52.490

注意 - WPF 使用 Windows，而不是 Forms，所以我不清楚你为什么从 Form 而不是`Window`. 但我会回答，就好像您在谈论 WPF 窗口作为您的“表单”一样。

首先，需要一些东西来显示窗口。目前，提供的代码不显示窗口，它试图显示一个`ListBox`.

其次，您需要向窗口添加一个 LayoutPanel 并将您的添加`ListBox`为布局面板的子项。布局面板有多种风格，例如`Grids`并基于您想要的布局类型。`StackPanels``Canvases`

或者，您可以将 的 设置`Content`为`Window`您的`ListBox`. 这意味着唯一的东西`Window`就是你的`ListBox', so if you want multiple visual elements on your`Window`，你需要使用布局面板。

第二种方法看起来像

```
this.Content = s; 
```

对于第一种方法，我建议阅读 WPF 中的布局面板。 [这是一个教程](http://wpftutorial.net/LayoutProperties.html)，[这](http://msdn.microsoft.com/en-us/library/ms745058.aspx)是 MSDN 关于布局的主题。谷歌搜索将产生更多结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T20:50:27.613

您需要将列表框添加到控件集合中：

```
ListBox s;
public FrmDelivery()
{
  s = new ListBox();
  s.DataSource = new List<int>() { 1, 2, 3, 4 };

  this.Controls.Add(s);
} 
```

这将为您将控件放到您的表单上，尽管您可能想要设置许多其他属性（例如，让它看起来像您想要的那样） - 正如其他人所提到的，您可以看到设计师是如何做到这一点的通过将列表框放在表单上并检查生成的代码来隐藏代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T20:54:26.837

我建议您使用 Add|New Item|Windows Form 创建一个新表单。然后，您将获得一个设计图面，您可以在其中添加一个列表框，并生成将正确初始化您的表单和列表框的代码。特别是您的表单和列表框将获得它们当前没有的默认大小。

您的代码（例如 Form1.cs）将与此类似：

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();

        this.listBox1.DataSource = new List<int> { 1, 2, 3, 4 };
    }

    public int? SelectedValue
    {
        get
        {
            return (int?)this.listBox1.SelectedValue;
        }
    }
} 
```

另外，Form1.Designer.cs 中会有大量代码，类似于

```
....

    #region Windows Form Designer generated code

    /// <summary>
    /// Required method for Designer support - do not modify
    /// the contents of this method with the code editor.
    /// </summary>
    private void InitializeComponent()
    {
        this.listBox1 = new System.Windows.Forms.ListBox();
        this.SuspendLayout();
        // 
        // listBox1
        // 
        this.listBox1.FormattingEnabled = true;
        this.listBox1.Location = new System.Drawing.Point(30, 37);
        this.listBox1.Name = "listBox1";
        this.listBox1.Size = new System.Drawing.Size(120, 95);
        this.listBox1.TabIndex = 0;
        // 
        // Form1
        // 
        this.AutoScaleDimensions = new System.Drawing.SizeF(6F, 13F);
        this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
        this.ClientSize = new System.Drawing.Size(284, 261);
        this.Controls.Add(this.listBox1);
        this.Name = "Form1";
        this.Text = "Form1";
        this.ResumeLayout(false);

    }

    #endregion 
```

你可以像这样使用你的表格：

```
 private void button1_Click(object sender, System.EventArgs e)
    {
        using (var form = new Form1()) // you should dispose forms used as dialogs
        {
            if (DialogResult.OK == form.ShowDialog()) // optional (you could have OK/Cancel buttons etc
            {
                Debug.WriteLine(form.SelectedValue ?? -1);
            }
        }
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-03T20:59:09.180

您不仅应该将控件添加到集合中，还应该设置他的特征。至少尺寸和位置。

```
class FrmDelivery : Form
{
ListBox s;
public FrmDelivery()
{
    s = new ListBox();
    s.Location = new System.Drawing.Point(0, 0); //relative to the parent control (not an absolute value, so)
    s.Name = "listBox1";
    s.Size = new System.Drawing.Size(120, 95);

    s.DataSource = new List<int>(){1,2,3,4};
    this.Controls.Add(s); //it will add it to the form but you can add it to another control, like panel.

} 
```

}

希望它会有所帮助

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-17T20:44:32.060

请查看您是否已将默认构造中的 InitializeComponent() 注释掉。它通常会在 FormLoad 上初始化表单的所有控件。

# css - IE9 中的 CSS3 旋转

> ID：15190499
> 
> 赞同：0
> 
> 时间：2013-03-03T20:31:12.370
> 
> 标签：css, internet-explorer, rotation, css-transitions

我有一个应该在 IE9 中工作的[jsfiddle](http://jsfiddle.net/UB2XR/7/)，但它没有

CSS：

```
#MyDiv{
    width:150px;
    height:150px;       
    margin:100px 100px;
    background-color: red;
    transition:all 2s ease;
    -ms-transition:all 2s ease;}

.Rotate{
    transform: rotate(360deg);
    -webkit-transform: rotate(360deg);
    -moz-transform:rotate(360deg);
    -ms-transform: rotate(360deg);} 
```

的JavaScript：

```
$(document).ready(function () { AddRotate(); });

function AddRotate() {

    $('#MyDiv').addClass('Rotate');  

    setTimeout(function () {
        RemoveRotate();
    }, 2000);    
}

function RemoveRotate() {

    $('#MyDiv').removeClass('Rotate');

    setTimeout(function () {
       AddRotate();
    }, 2000);  
} 
```

和 HTML：`<div id="MyDiv">test</div>`

我不确定为什么它不起作用。这是关于创建带有过渡的 CSS 旋转；错误在哪里，您如何修复它以使其在 IE9 中工作？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T20:44:33.107

IE9 支持旋转，但不支持 CSS 过渡。

您需要使用 javascript 解决方案。

我的建议是使用[CSS Sandpaper](http://www.useragentman.com/blog/csssandpaper-a-css3-javascript-library/)库，因为这允许您使用标准 CSS 进行转换，即使在 IE 中也是如此，这反过来意味着您不必仅仅因为 IE 而为其他浏览器切换到 JS。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T20:33:37.607

IE9 不支持转场，仅从 IE10 开始支持。有关更多信息，请参阅[我可以使用](http://caniuse.com/#feat=css-transitions)。

# php - 使用 PHP 的分页代码中缺少 Ahref 链接

> ID：15190503
> 
> 赞同：0
> 
> 时间：2013-03-03T20:31:31.947
> 
> 标签：php, html, mysql, css, pagination

这是我的分页代码，在页面底部，显示页码，但 ahref 链接不起作用。谁能告诉我哪里出错了。我希望你不需要css文件。

另请注意，分页链接（ahref 链接）是第一次创建的，但是当我从一个页面移动到另一个页面时，链接会消失。（我没有包含连接字符串。）

```
 <html>
<head> 

<link href="pagin.css" rel="stylesheet" type="text/css" />
</head>

    <?php
/*
    Place code to connect to your DB here.
*/
include('config.php');  // include your code to connect to DB.

$tbl_name="data";       //your table name
// How many adjacent pages should be shown on each side?
$adjacents = 3;

/* 
   First get total number of rows in data table. 
   If you have a WHERE clause in your query, make sure you mirror it here.
*/
$query = "SELECT COUNT(*) as num FROM $tbl_name";
echo $query;
$total_pages = mysql_fetch_array(mysql_query($query));
$total_pages = $total_pages['num'];

/* Setup vars for query. */
$targetpage = "page3.php";  //your file name  (the name of this file)
$limit = 4;                                    
  //how many    items to show per page
$page = isset($_GET['page']);
if($page) 
    $start = ($page - 1) * $limit;          
 //first item to display on this page
else
    $start = 0;                             
    //if no page var is given, set start to 0

/* Get data. */
$sql = "SELECT * FROM $tbl_name LIMIT $start, $limit";

$result = mysql_query($sql) or die($sql. "<br>". mysql_error());

/* Setup page vars for display. */
if ($page == 0) $page = 1;                  //if no page var is given, default to 1.
$prev = $page - 1;                          //previous page is page - 1
$next = $page + 1;                          //next page is page + 1
$lastpage = ceil($total_pages/$limit);      //lastpage is = total pages / items per page, rounded up.
$lpm1 = $lastpage - 1;                      //last page minus 1

/* 
    Now we apply our rules and draw the pagination object. 
    We're actually saving the code to a variable in case we want to draw it more than once.
*/
$pagination = "";
if($lastpage > 1)
{   
    $pagination .= "<div class=\"pagination\">";
    //previous button
    if ($page > 1) 
        $pagination.= "<a href=\"$targetpage?page=$prev\">previous</a>";
    else
        $pagination.= "<span class=\"disabled\">previous</span>";   

    //pages 
    if ($lastpage < 7 + ($adjacents * 2))   //not enough pages to bother breaking it up
    {   
        for ($counter = 1; $counter <= $lastpage; $counter++)
        {
            if ($counter == $page)
                $pagination.= "<span class=\"current\">$counter</span>";
            else
                $pagination.= "<a href=\"$targetpage?page=$counter\">$counter</a>";                 
        }
    }
    elseif($lastpage > 5 + ($adjacents * 2))    //enough pages to hide some
    {
        //close to beginning; only hide later pages
        if($page < 1 + ($adjacents * 2))        
        {
            for ($counter = 1; $counter < 4 + ($adjacents * 2); $counter++)
            {
                if ($counter == $page)
                    $pagination.= "<span class=\"current\">$counter</span>";
                else
                    $pagination.= "<a href=\"$targetpage?page=$counter\">$counter</a>";                 
            }
            $pagination.= "...";
            $pagination.= "<a href=\"$targetpage?page=$lpm1\">$lpm1</a>";
            $pagination.= "<a href=\"$targetpage?page=$lastpage\">$lastpage</a>";       
        }
        //in middle; hide some front and some back
        elseif($lastpage - ($adjacents * 2) > $page && $page > ($adjacents * 2))
        {
            $pagination.= "<a href=\"$targetpage?page=1\">1</a>";
            $pagination.= "<a href=\"$targetpage?page=2\">2</a>";
            $pagination.= "...";
            for ($counter = $page - $adjacents; $counter <= $page + $adjacents; $counter++)
            {
                if ($counter == $page)
                    $pagination.= "<span class=\"current\">$counter</span>";
                else
                    $pagination.= "<a href=\"$targetpage?page=$counter\">$counter</a>";                 
            }
            $pagination.= "...";
            $pagination.= "<a href=\"$targetpage?page=$lpm1\">$lpm1</a>";
            $pagination.= "<a href=\"$targetpage?page=$lastpage\">$lastpage</a>";       
        }
        //close to end; only hide early pages
        else
        {
            $pagination.= "<a href=\"$targetpage?page=1\">1</a>";
            $pagination.= "<a href=\"$targetpage?page=2\">2</a>";
            $pagination.= "...";
            for ($counter = $lastpage - (2 + ($adjacents * 2)); $counter <= $lastpage; $counter++)
            {
                if ($counter == $page)
                    $pagination.= "<span class=\"current\">$counter</span>";
                else
                    $pagination.= "<a href=\"$targetpage?page=$counter\">$counter</a>";                 
            }
        }
    }

    //next button
    if ($page < $counter - 1) 
        $pagination.= "<a href=\"$targetpage?page=$next\">next</a>";
    else
        $pagination.= "<span class=\"disabled\">next</span>";
    $pagination.= "</div>\n";       
}
?>

<?php
    while($row = mysql_fetch_assoc($result))
    {

    // Your while loop here

    $title = $row['title'];
        $link = $row['link'];
        $region = $row['region'];
        $sector = $row['sector'];
        $theme = $row['theme']; 
        echo "<tr>";
        echo "<td>";
        echo "<div class='admonition'>";    
        echo "<div class='admonition-title'>";
        echo "<a href=$link><h3>$title<h3></a>";echo "</div>"; echo "</div>";
        echo "<h4>Sector: $sector&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Theme: $theme &nbsp; 
        &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br> Region: $region <hr> </td>";
        echo "</tr>";

    }
?>

<?php echo $pagination; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-26T03:08:58.307

这可能是一个问题：

```
$pagination.= "<a href=\"$targetpage?page=$prev\">previous</a>"; 
```

一种解决方案

```
$pagination.= '<a href="' . $targetpage?page=$prev . '">previous</a>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T23:01:40.047

照此办理：

```
echo "<h4>Sector: $sector&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Theme: $theme &nbsp; 
        &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br> Region: $region <hr> </td>";
        echo "</tr>"; 
```

您的标签似乎没有结束标签。

改用这个

```
echo "<h4>Sector: $sector&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Theme: $theme &nbsp; 
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br> Region: $region </h4><hr> </td>";
    echo "</tr>"; 
```

它会破坏您的代码。此行后回显的分页无法显示分页链接。它可能在多余的不间断空格中丢失了 nbsp; 为什么不使用 css float 来减少该行的标记？

[更新 3.0]

这样做，让我知道你发现了什么（注意整数转换）。出于某种原因，这仅在我将 $page 转换为整数时才有效。

### 我已经包含了额外的代码来适应您指定的 3 个查询字符串 (k, x, y) 如果您更改它们，您也需要在代码中更改它们。另请参阅链接中的其他代码。

```
<?php
    $total_rows = 20;
    $selected_row = mt_rand(0, $total_rows);
    /*
      Place code to connect to your DB here.
     */
//include('config.php');  // include your code to connect to DB.

    $tbl_name = "data";

// How many adjacent pages should be shown on each side?
    $adjacents = 3;

    /*
      First get total number of rows in data table.
      If you have a WHERE clause in your query, make sure you mirror it here.
     */
    $query = "SELECT COUNT(*) as num FROM $tbl_name";
//echo $query;
    $total_pages = mysql_fetch_array(mysql_query($query));
    $total_pages = $total_pages['num'];

    /* Setup vars for query. */
    $targetpage = "page3.php";  //your file name  (the name of this file)

     //UPDATE 2.0 
     //Create the lines below to get k=world&x=9&y=2 and include links. Please see changes in link below:
    /*
    $k = ((isset($_GET['k']))? "&k=".$_GET['k'] : "" );
    $x = ((isset($_GET['x']))? "&x=".$_GET['x']: "" );
    $y = ((isset($_GET['y']))? "&y=".$_GET['y'] : "" );
    $query_string = $k.$x.$y;
    */

    //UPDATE 3.0
    //MORE DYNAMIC should you decide to change the url parameters used.
    $q = $_SERVER['QUERY_STRING'];
    if($q != ""){
       $q_a = explode('&', $q);
       $q_b = array();
       $q_c = array();
       $link = "";
       foreach($q_a as $param){
           $q_b[] = explode('=', $param);
           foreach($q_b as $key => $value){
               $q_c[$value[0]] = $value[1];
           }
       }
        unset($q_c['page']);
    }
    foreach($q_c as $key => $value){
        $link .= "&";
        $link .= $key.'='.$value;    
    }

    $query_string = $link;

    $limit = 4;
    //how many    items to show per page
    $page = isset($_GET['page']);

    $page = $this->uri->segment(3);
    if ($page)
        $start = ($page - 1) * $limit;
    //first item to display on this page
    else
        $start = 0;
    //if no page var is given, set start to 0

    /* Get data. */
    $sql = "SELECT * FROM $tbl_name LIMIT $start, $limit";

    $result = mysql_query($sql) or die($sql . "<br>" . mysql_error());

    /* Setup page vars for display. */
    if ($page == 0)
        $page = 1;                  //if no page var is given, default to 1.
    $prev = $page - 1;                          //previous page is page - 1
    $next = $page + 1;                          //next page is page + 1
    $lastpage = ceil($total_pages / $limit);      //lastpage is = total pages / items per page, rounded up.
    $lpm1 = $lastpage - 1;                      //last page minus 1

    /*
      Now we apply our rules and draw the pagination object.
      We're actually saving the code to a variable in case we want to draw it more than once.
     */
    $pagination = "";
    if ($lastpage > 1) {
        $pagination .= "<div class=\"pagination\">";
        //previous button
        if ($page > 1)
            $pagination.= "<a href=\"$targetpage?page=$prev{$query_string}\">previous</a>";
        else
            $pagination.= "<span class=\"disabled\">previous</span>";

        //pages 
        if ($lastpage < 7 + ($adjacents * 2)) {   //not enough pages to bother breaking it up
            for ($counter = 1; $counter <= $lastpage; $counter++) {

                if ($counter == (int) $page) {
                    $pagination.= "<span class=\"current\">$counter</span>";
                } else {
                    $pagination.= "<a href=\"$targetpage?page=$counter{$query_string}\">$counter</a>";
                }
            }
        } elseif ($lastpage > 5 + ($adjacents * 2)) {    //enough pages to hide some
            //close to beginning; only hide later pages
            if ($page < 1 + ($adjacents * 2)) {
                for ($counter = 1; $counter < 4 + ($adjacents * 2); $counter++) {
                    if ($counter == (int) $page) {
                        $pagination.= "<span class=\"current\">$counter</span>";
                    } else {
                        $pagination.= "<a href=\"$targetpage?page=$counter{$query_string}\">$counter</a>";
                    }
                }
                $pagination.= "...";
                $pagination.= "<a href=\"$targetpage?page=$lpm1.$query_string\">$lpm1</a>";
                $pagination.= "<a href=\"$targetpage?page=$lastpage{$query_string}\">$lastpage</a>";
            }
            //in middle; hide some front and some back
            elseif ($lastpage - ($adjacents * 2) > $page && $page > ($adjacents * 2)) {
                $pagination.= "<a href=\"$targetpage?page=1{$query_string}\">1</a>";
                $pagination.= "<a href=\"$targetpage?page=2{$query_string}\">2</a>";
                $pagination.= "...";
                for ($counter = $page - $adjacents; $counter <= $page + $adjacents; $counter++) {
                    if ($counter == $page)
                        $pagination.= "<span class=\"current\">$counter</span>";
                    else
                        $pagination.= "<a href=\"$targetpage?page=$counter{$query_string}\">$counter</a>";
                }
                $pagination.= "...";
                $pagination.= "<a href=\"$targetpage?page=$lpm1{$query_string}\">$lpm1</a>";
                $pagination.= "<a href=\"$targetpage?page=$lastpage{$query_string}\">$lastpage</a>";
            }
            //close to end; only hide early pages
            else {
                $pagination.= "<a href=\"$targetpage?page=1{$query_string}\">1</a>";
                $pagination.= "<a href=\"$targetpage?page=2{$query_string}\">2</a>";
                $pagination.= "...";
                for ($counter = $lastpage - (2 + ($adjacents * 2)); $counter <= $lastpage; $counter++) {
                    if ($counter == $page)
                        $pagination.= "<span class=\"current\">$counter</span>";
                    else
                        $pagination.= "<a href=\"$targetpage?page=$counter{$query_string}\">$counter</a>";
                }
            }
        }

        //next button
        if ($page < $counter - 1)
            $pagination.= "<a href=\"$targetpage?page=$next{$query_string}\">next</a>";
        else
            $pagination.= "<span class=\"disabled\">next</span>";
        $pagination.= "</div>\n";
    }
    ?>

    <?php
    while ($row = mysql_fetch_assoc($result)) {

        // Your while loop here

        $title = $row['course_title'];
        $link = $row['course_description'];
        $region = $row['course_fee'];
        $sector = $row['diploma_fee'];
        $theme = $row['course_duration'];
        /*
          $title = $row['title'];
          $link = $row['link'];
          $region = $row['region'];
          $sector = $row['sector'];
          $theme = $row['theme'];
         */
        echo "<tr>";
        echo "<td>";
        echo "<div class='admonition'>";
        echo "<div class='admonition-title'>";
        echo "<a href=$link><h3>$title<h3></a>";
        echo "</div>";
        echo "</div>";
        echo "<h4>Sector: $sector&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Theme: $theme &nbsp; 
        &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br> Region: $region <hr> </td>";
        echo "</tr>";
    }
    ?>

<?php echo $pagination; ?> 
```

除此之外，从我的角度来看，一切似乎都很好。

# php - 从 Facebook google+ 等“隐藏”我的网站地址/URL

> ID：15190505
> 
> 赞同：-1
> 
> 时间：2013-03-03T20:31:38.887
> 
> 标签：php, cookies, social-networking

嗨，我如何从 Facebook goggle+ 等中“隐藏”我的网站地址/URL……跟踪 cookie。为了保护浏览我网站的人的隐私，100% 的人在一个或多个流行的社交网络。他们不希望这个网站被记录在 Facebook 中。（不，这不是色情：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T20:39:23.103

社交网络只会知道一个人是否访问了一个网站，如果：

*   该人安装了一个浏览器扩展程序，它会告诉他们（对此您无能为力）
*   此人点击*来自*社交网络的链接（在这种情况下，网络可以在浏览器到达您的网站之前发现，因此您无能为力）
*   您的网站从由社交网络控制的服务器加载资源（例如分享链接或 Google Ads）。不要将此类功能添加到您的网站。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T20:36:17.197

只是不要在您的网站上放置“喜欢”/“+1”按钮，Facebook 和 Google 都不会知道他们的用户访问了您的网站。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T21:03:02.003

当用户单击指向 facebook、google 等的链接时，您无法隐藏您的 url。一个非常好的方法，即 facebook & co。没有用户点击就无法获取您的网址是一个像[http://www.heise.de/extras/socialshareprivacy/](http://www.heise.de/extras/socialshareprivacy/)这样的两次点击插件（文档是德文的，但您可以复制代码 - 它很直观可用)...

我不确定，但也许您也可以尝试将所有外部链接重定向到其他网站 - 但我不能保证它会解决问题；）

# ruby-on-rails - 使用 :alert (或 :notice) 和 render 方法，来自 Ruby On Rails 指南，名为“Layouts and Rendering in Rails”，对我不起作用：

> ID：15190508
> 
> 赞同：38
> 
> 时间：2013-03-03T20:31:52.430
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

[在http://guides.rubyonrails.org/layouts_and_rendering.html](http://guides.rubyonrails.org/layouts_and_rendering.html)上名为 'Layouts and Rendering in Rails' 的 Ruby On Rails 指南中使用 :alert （或 :notice）和 render 方法对我不起作用

这是指南中提供的示例代码：

```
 def index
      @books = Book.all
    end

    def show
      @book = Book.find_by_id(params[:id])
      if @book.nil?
        @books = Book.all
        render "index", :alert => 'Your book was not found!'
      end
    end 
```

我有一个看起来像这样的 hello 控制器：

```
 class HelloController < ApplicationController
      def index
        @counter = 5
      end
      def bye
        @counter = 4
        render "index", :alert => 'Alert message!'
      end
    end 
```

我的 index.html.erb 视图如下所示：

```
 <ul>
    <% @counter.times do |i| %>
      <li><%= i %></li>
    <% end %>
    </ul> 
```

访问时`http://localhost:3000/hello/bye`，我看到索引视图，即按预期显示从 1 到 4 的数字列表，但没有“警报消息！” 警报显示。

我的布局使用它来显示警报消息：

```
 <% flash.each do |k, v| %>
      <div id="<%= k %>"><%= v %></div>
    <% end %> 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-03T21:00:42.210

我对 Rails 指南为什么提到在 中使用 flash 值感到困惑`render`，因为它们目前似乎只在`redirect_to`其中起作用。`flash.now[:alert] = 'Alert message!'`如果您在渲染方法调用之前放置一个，我认为您会发现您的方法有效。

编辑：这是[将修复的指南中的缺陷](https://github.com/rails/rails/commit/f9f6fc7a91fecc7a52c812d2900b9ae5d4636743)，您应该在调用渲染之前使用单独的方法调用来设置闪光灯。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-03-03T20:59:46.120

尝试

```
 def bye
    @counter  = 4
    flash.now[:error] = "Your book was not found"
    render :index
  end 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-09-01T22:06:02.040

通常你会做这样的事情：

```
if @user.save
  redirect_to users_path, :notice => "User saved"
else
  flash[:alert] = "You haz errors!"
  render :action => :new
end 
```

你想要做的是（我更喜欢这种语法）：

```
if @user.save
  redirect_to users_path, :notice => "User saved"
else
  render :action => :new, :alert => "You haz errors!"
end 
```

...但是，这对`ActionController::Flash#render`.

**但是**，您可以扩展`ActionController::Flash#render`以**完全按照**您的意愿行事：

`config/initializers/flash_renderer.rb`使用以下内容创建：

```
module ActionController
  module Flash

    def render(*args)
      options = args.last.is_a?(Hash) ? args.last : {}

      if alert = options.delete(:alert)
        flash[:alert] = alert
      end

      if notice = options.delete(:notice)
        flash[:notice] = notice
      end

      if other = options.delete(:flash)
        flash.update(other)
      end

      super(*args)
    end

  end
end 
```

参考：[http ://www.perfectline.co/blog/2011/11/adding-flash-message-capability-to-your-render-calls-in-rails-3/](http://www.perfectline.co/blog/2011/11/adding-flash-message-capability-to-your-render-calls-in-rails-3/)

# c++ - 斐波那契数列 C++ 显示一个/最大值

> ID：15190509
> 
> 赞同：0
> 
> 时间：2013-03-03T20:32:03.220
> 
> 标签：c++

从字面上看，我被问过这个问题“”斐波那契数列是 0, 1, 1, 2, 3, 5, 8, 13, ... ; 前两项是 0 和 1，之后的每一项都是前两项之和——即 Fib[n] = Fib[n – 1] + Fib[n – 2]。使用这些信息，编写一个 C++ 程序，计算斐波那契数列中的第 n 个数，其中用户在程序中交互输入 n。例如，如果 n = 6，则程序应显示值 8。”

感谢您对上一个问题的回答，我已将其放入我的完整代码中。我确实有一个循环，这意味着用户可以选择是否继续该程序。它早些时候工作，但现在什么也没有发生。任何人都可以对此有所了解吗？谢谢

```
{int N;

char ans = 'C';

while (toupper(ans) == 'C')
{
    cout<<"This program is designed to give the user any value of the Fibonacci Sequence that they desire, provided the number is a positive integer.";//Tell user what the program does

    cout<<"\n\nThe formula of the Fibonacci Sequence is;   Fib[N] = Fib[N – 1] + Fib[N – 2]\n\n"; //Declare the Formula for the User

    cout<<"Enter a value for N, then press Enter:"; //Declare Value that the User wants to see

    cin>>N;//Enter the Number

    if (N>1) {
            long u = 0, v = 1, t;

            for(int Variable=2; Variable<=N; Variable++)
            {
                t = u + v;
                u = v;
                v = t;
            } //Calculate the Answer

        cout<<"\n\nThe "<<N<<"th Number of the Fibonacci Sequence is: "<<t; //Show the Answer
    }

    if (N<0) {
        cout<<"\n\nThe value N must be a POSITIVE integer, i.e. N > 0"; //Confirm that N must be a positive integer. Loop.
    }
    if (N>100) {
        cout<<"\n\nThe value for N must be less than 100, i.e. N < 100\. N must be between 0 - 100.";//Confirm that N must be less than 100\. Loop.
    }
    if (N==0) {
        cout<<"\n\nFor your value of N, \nFib[0] = 0"; //Value will remain constant throughout, cannot be caculated through formula. Loop.
    }
    if (N==1) {
        cout<<"\n\nFor your value of N. \nFib[1]=1";//Value will remain constant throughout, cannot be caculated through formula. Loop.
    }

  cout << "\n\nIf you want to select a new value for N, then click C then press Enter. If you want to quit, click P then press Enter: ";
    cin >> ans;
}

return 0; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T20:42:24.603

你只需要在`cout`下面放两行。而且您不需要额外的 {}，但这并没有什么坏处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T20:43:56.180

这是你的主循环：

```
for(int i=2; i<=N; i++)
{
    t = u + v;
    u = v;
    v = t;

    cout<<t<<"is your answer";
} 
```

很明显，它会在循环中的每一次通过时打印出您的答案。

只需将打印移动到循环之外......在所有计算完成后，您只会看到它打印一次：

```
for(int i=2; i<=N; i++)
{
    t = u + v;
    u = v;
    v = t;
}
cout<<t<<"is your answer"; 
```

* * *

我在您的代码中看到的其他问题：

你声明一个函数：

```
unsigned long long Fib(int N); 
```

但它从来没有被定义或使用过。为什么这个声明在这里？（去掉它）

您有一组多余的大括号：

```
else {
        {
            unsigned long long u = 0, v = [....] 
```

您不需要立即使用大括号，然后再使用更多大括号。

# php - 将 mysqli 转换为 pdo bind_all

> ID：15190510
> 
> 赞同：3
> 
> 时间：2013-03-03T20:32:10.677
> 
> 标签：php, pdo, mysqli

这是我当前的代码

```
function getUserDetails($username=NULL, $id=NULL) {
    if($username!=NULL) {
        $column = "user_name";
        $data = $username;
    }
    elseif($id!=NULL) {
        $column = "id";
        $data = $id;
    }

    global $db;

    $query = $db->prepare("SELECT id, username, permissions, forename, surname, password, email, courseid, choiceid, lastlogin, active FROM users WHERE $column = :column");
    $query->bindParam(":column", $data);
    $query->execute();
    $query->bind_result ($id, $username, $permissions, $forename, $surname, $password, $email, $courseid, $choiceid, $lastlogin, $active);
    while ($query->fetch()){
        $row = array('id' => $id, 'userlevel' => $permissions, 'username' => $username, 'forename' => $forename, 'surname' => $surname, 'password' => $password, 'email' => $email, 'courseId' => $courseid, 'choiceId' => $choiceId, 'lastlogin' => $lastlogin, 'active'=> $active);
    }
    return ($row);
} 
```

我一直在尝试将其转换为 pdo，因为我发现 bind_result 不适用于 pdo - 谁能帮助我知道我应该做什么？

我已经读过我应该使用 fetch？但我真的很困惑。

[编辑]

我试过这个：

```
function getUserDetails($username=NULL,$id=NULL) {
    if($username!=NULL) {
        $column = "user_name";
        $data = $username;
    }
    elseif($id!=NULL) {
        $column = "id";
        $data = $id;
    }

    global $db;

    $query = $db->prepare("SELECT id, username, permissions, forename, surname, password, email, courseid, choiceid, lastlogin, active FROM users WHERE $column = :column");
    $query->bindParam(":column", $data);
    $query->execute();

    $results = array();
    while ($row = $query->fetch(PDO::FETCH_ASSOC)) { 
        $results[] = $row;
    }

    return ($results);
} 
```

这是朝着正确方向迈出的一步吗？

[编辑2]

将我的代码更新为：

```
function getUserDetails($username) {
    global $db;

    $query = $db->prepare("SELECT * FROM users WHERE username = :username");
    $query->bindParam(":username", $username);
    return $query->fetch(PDO::FETCH_ASSOC);
}

$username = 'uname';
$result = getUserDetails($username);
print_r($result); 
```

但是它什么也没打印。用户名肯定存在。

* * *

我尝试了一个带有一些虚拟数据的测试数据库

```
$data = '2';
$sth = $db->prepare("SELECT * FROM test WHERE id = :id");
$sth->bindParam(":id", $data);
$sth->execute();
$result = $sth->fetch(PDO::FETCH_ASSOC);
print_r($result); 
```

我试图弄清楚我如何访问打印数组中的内容：数组的输出为

```
Array ( [Id] => 2 [Name] => tom ) 
```

我（例如）怎么做

```
$name = $result['name'];    //line 67 
```

当我尝试该代码时，我得到

```
Notice: Undefined index: name in <directory>\test.php on line 67 
```

* * *

弄清楚了！

```
function getUserDetails($username) {
    global $db;

    $sth = $db->prepare("SELECT id, username, permissions, forename, surname, password, email, courseid, choiceid, lastlogin, active FROM users WHERE username = :username");
    $sth->bindParam(":username", $username);
    $sth->execute();
    $result = $sth->fetch(PDO::FETCH_ASSOC);

    return $result;
}

$username = 'un';
$userdetails = getUserDetails($username);
echo $userdetails['forename']; 
```

它给了我正确的答案！感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T05:14:25.000

是的！
这是朝着正确方向迈出的一大步。
如您所见， mysqli在绑定占位符**和**返回结果时**绝对不能用于准备好的语句。** 而 PDO 可以使用更少的代码解决您的问题。 您根本不需要与 PDO 进行无用的绑定 - 只需使用 fetchAll() 获取所有结果：

 **```
function getUserDetails($username=NULL,$id=NULL) {
    if ($username) {
        $column = "user_name";
        $data = $username;
    } elseif($id) {
        $column = "id";
        $data = $id;
    } else {
        return;
    }
    global $db;

    $query = $db->prepare("SELECT * FROM users WHERE $column = ?");
    $query->execute(array($data));
    return $query->fetchAll();
} 
```

可是等等。如果它是用户详细信息，为什么要返回一个数组？它只会向返回的数组添加无用的维度。对于这种情况，让它

```
 return $query->fetch(); 
```

而不是 fetchAll()。
但是你需要很多行 - 使用后一种方法。
关于其他方法和有用的连接选项，请参阅[标签 wiki](https://stackoverflow.com/tags/pdo/info)**

# jquery - jQuery高度返回错误的值

> ID：15190513
> 
> 赞同：0
> 
> 时间：2013-03-03T20:32:16.610
> 
> 标签：jquery, css, height, each

我想获取标题和段落的高度值。因此，当我更改它们的大小时，我可以设置偏移量以使它们彼此适合，因为它们被设置为绝对值。

我通常会以不同的方式执行此操作，但我必须使用绝对位置来执行此操作，因为这是响应式滑块的工作方式。

但是，当我使用 each() 时，它只能在第一张幻灯片（当前幻灯片）上正常工作，但不能在所有其他幻灯片上正常工作。即使幻灯片的大小没有改变，当它们移到一边时。

```
<div class="slide-content">
    <h2><span class="slide-title"><?php the_title() ?></span></h2>
    <p class="slide-text"><?php echo $text; ?></p>

    <a href="<?php echo get_permalink( $meta["page"] ) ?>" class="da-link">> Jetzt Informieren</a>
</div>

function test() {
    $(".slide-content").each(function() {
        var content = $(this);

        var title = content.find(".slide-title");
        var text = content.find(".slide-text");
        var link = content.find(".da-link");

        var titleheight = title.height();
        var textheight = text.height();

        text.css("top",titleheight+"px");
        link.css("top",titleheight+textheight+"px");

    });
} 
```

这是我的职责。

我得到的值是：

```
title: 122 text: 54 
title: 164 text: 144 
title: 164 text: 126 
```

第一对是对的。其他人都错了。所以它只适用于当前幻灯片。这将根据当前显示的幻灯片而有所不同。幻灯片没有设置为 display:none 当他们离开时，所有的变化都是左边的偏移量。

该函数是这样调用的：

```
$(window).resize(function () {
        test();
    }); 
```

当我用谷歌浏览器检查时，当舞台的幻灯片移动时，元素大小保持不变。

我在 each() 上遇到了很多麻烦。那么这可能是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:08:36.303

确保您首先应用了 CSS 重置。

然后在您的 CSS 中，尝试在“em”中为标题和段落提供行高。

# python - 结合两个 Python 代码

> ID：15190514
> 
> 赞同：0
> 
> 时间：2013-03-03T20:32:18.007
> 
> 标签：python

我是 python 的新手，但我已经能够编写一些有用的 python 代码（至少对我的工作有用）。我想结合我的两个代码，但我很难让它工作，我想我完全迷失了代码应该是什么样子。

第一个代码基本上获取一个文件，读取它，从中提取列，然后将列写入一个新文件。我用几个文件重复这个：

```
import sys
import re

filetowrite = sys.argv[1]
filetoread = sys.argv[2]

newfile = str(filetowrite) + ".txt"

openold = open(filetoread,"r")
opennew = open(newfile,"w")

rline = openold.readlines()

number = int(len(rline))
start = 0

for i in range (len(rline)) :
    if "2theta" in rline[i] :
        start = i

opennew.write ("q" + "\t" + "I" + "\n")
opennew.write ("1/A" + "\t" + "1/cm" + "\n")
opennew.write (str(filetowrite) + "\t" + str(filetowrite) + "\n")

for line in rline[start + 1 : number] :
    words = line.split()
    word1 = (words[1])
    word2 = (words[2])
    opennew.write (word1 + "\t" + word2 + "\n")

openold.close()
opennew.close() 
```

第二个代码采用先前创建的新文件并将它们组合在一起，使最终文件中的列彼此相邻。

```
import sys
from itertools import izip

filenames = sys.argv[2:]

filetowrite = sys.argv[1]

newfile = str(filetowrite) + ".txt"
opennew = open(newfile, "w")

files = map(open, filenames)

for lines in izip(*files):
    opennew.write(('\t'.join(i.strip() for i in lines))+"\n") 
```

非常感谢任何有关如何从这两个代码中制作单个代码的帮助。

一切顺利

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T20:39:48.740

将每个文件变成一个更大文件中的一个函数，然后根据需要调用这些函数。利用`__main__`来做到这一点。

```
import sys
import re
from itertools import izip

def func_for_file1():
    # All of the code from File 1 goes here.

def func_for_file2():
    # ALl of the code from File 2 goes here.

def main():
   # Decide what order you want to call these methods.
   func_for_file1()
   func_for_file2()

if __name__ == '__main__':
   main() 
```

# c# - 默认值和linq

> ID：15190522
> 
> 赞同：2
> 
> 时间：2013-03-03T20:32:50.643
> 
> 标签：c#, .net, linq

为什么这个简单的代码不起作用？

```
var abc = new[]{1,2,3,4}.Select(x => default(typeof(x))); 
```

我期望像零数组但得到编译器错误。那么我如何在 lambda 表达式中使用默认值呢？

在我的实际应用程序中，我有类型为 Type 的元类

```
public class FieldInfo
{
     public Type type
} 
```

我`IEnumerable<FieldInfo>`作为我的方法的参数，并希望为每种类型返回一个默认值数组（`object[]`）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T20:37:41.213

这就是问题：

```
typeof(x) 
```

您正在使用`typeof`运算符，就好像它是一个方法调用一样，获取一个值。它不是。它需要一个*编译时*类型名称或类型参数（或未绑定类型，例如`Dictionary<,>`, 或`void`）。

与`default`操作员一起尝试也是如此。

所以这就是*问题所在*- 但在不知道您要达到的目标的情况下，我们实际上无法就如何修复它提供建议。你可能只想要这样的东西：

```
public static IEnumerable<T> SelectDefault<T>(this IEnumerable<T> source)
{
    return source.Select(x => default(T));
} 
```

然后这个：

```
var abc = new[]{1,2,3,4}.SelectDefault().ToArray(); 
```

...会给你一个`int[]`所有值为零的。

编辑：现在我们有了更多信息，更容易提供你想要的东西，这基本上是一种从 a 获取默认值的方法`Type`，适当的装箱：

```
public static object GetDefaultValue(Type type)
{
    // Non-nullable value types should be boxed, basically
    if (type.IsValueType && Nullable.GetUnderlyingType(type) == null)
    {
        // Not the swiftest approach in the world, but it works...
        return Activator.CreateInstance(type);
    }

    // Everything else defaults to null
    return null;
} 
```

所以你会有类似的东西：

```
var defaults = fields.Select(field => GetDefaultValue(field.type)); 
```

`field`（根据问题， a在哪里`FieldInfo`- 我故意*不在*这里打电话`GetType()`。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-03T20:39:52.477

您无法通过这种方式在运行时获取默认值，`default()`并且`typeof()`是编译时功能。但是你可以试试[这个](https://stackoverflow.com/questions/2686678/in-net-at-runtime-how-to-get-the-default-value-of-a-type-from-a-type-object)建议。它用于`Activator.CreateInstance`在运行时获取值类型的默认值。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-03T20:46:33.400

你是这个意思吗？

```
var abc = new[]
{
    1, 2, 3, 4
}
.Select(x = > {
    var xType = x.GetType();
    if (xType.IsValueType)
    {
        return Activator.CreateInstance(xType);
    }
    else
    {
        return null;
    }
}) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-03T20:38:48.910

编译器需要一个编译时类型：

```
var abc = new[]{1,2,3,4}.Select(x => default(Int32)); 
```

将生成全 0。不过，我不知道你想用这个实现什么，因为所有这些都是返回一个具有默认值的空数组。

# jquery - fancybox 改变图像方向

> ID：15190531
> 
> 赞同：1
> 
> 时间：2013-03-03T20:33:41.287
> 
> 标签：jquery, fancybox

我有一张我在测试fancybox 功能时使用的图像。图像是纵向/垂直方向的。图像的尺寸为 375x500、450x600、600x800 和 3000x4000。除了 3000x4000 之外，它们都以纵向正确显示 - 它的尺寸减小以在屏幕上显示，但被翻转为横向。我该如何停止这种行为或者这是一个错误？我试过用 fancybox 1.3.4 和 2

这有效：

```
 <a href="_images/fancybox/seagulls20121230-07-600x800p.jpg" rel="gallery" title="CEB's pic 600x800"> <img src="_images/fancybox/seagulls20121230-07-600x800p-thmb.jpg" width="70" height="70" alt="Honda Pilot 600x800" /> </a> 
```

这不起作用 - 相同的图像，只是更大

```
<a href="_images/fancybox/seagulls20121230-07-4000x3000p.jpg" rel="gallery" title="CEB's pic 3000x4000"> <img src="_images/fancybox/seagulls20121230-07-4000x3000p-thmb.jpg" width="70" height="70" alt="Honda Pilot 3000x4000" /> </a> 
```

花式盒子代码

```
$(document).ready(function () {
    $('#gallery a').fancybox({
        overlayColor: '#060',
        overlayOpacity: .3,
        transitionIn: 'elastic',
        transitionOut: 'elastic',
        easingIn: 'easeInSine',
        easingOut: 'easeOutSine',
        titlePosition: 'outside',
        cyclic: true
    });
}); // end ready 
```

# jquery - 使用 jquery 添加下拉选项不起作用

> ID：15190534
> 
> 赞同：0
> 
> 时间：2013-03-03T20:33:52.373
> 
> 标签：jquery, html, forms

我显然在这里做错了什么，但我正在绞尽脑汁想弄清楚。

所以我有一个`<select></select>`这样定义：

```
<select name="entryspeaker" id="entryspeaker">
    <option value="">No associated speaker</option>
</select> 
```

然后在我的脚本中，我定义了一组“扬声器”对象。我运行并尝试将它们添加到列表中（如此处所示[）](https://stackoverflow.com/questions/317095/how-do-i-add-options-to-a-dropdownlist-using-jquery)，因此：

```
for ( speakerIdx in speakerlist ) {
    var speaker = speakerlist[speakerIdx];
    var newOption = $('<option></option>').val(speaker.__id__).html(speaker.name);
    $('#entryspeaker').append( newOption );
    console.log(speaker);
    console.log(newOption);
} 
```

在检查`speaker`日志中的值时，它肯定是在获取正确的对象，并且我还确认该`newOption`值包含一个有效的`<option>`对象，但它没有被正确地添加到列表中。

有人可以在这里指出我的愚蠢吗？

提前致谢！

* * *

**编辑**：看起来这是由于该站点使用了 Zurb Foundation 的自定义样式下拉列表。它似乎在加载时复制了原始列表，因此新项目没有被添加到复制的列表中。我正在调查，但这肯定是我的问题的原因。

* * *

**编辑 2***：感谢[这个页面](https://github.com/zurb/foundation/issues/413)，我找到了一个修复程序。似乎触发“更改”会迫使 Foundation 重建列表：

```
$('#entryspeaker').change(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T20:47:06.927

使用您的代码为我正确添加了它。[这](http://jsfiddle.net/rahulr/Gy8TN/)是 JS fiddle

我使用了下面的数组

```
var speakerlist=[{id:"1", name:"Rsquare"}, {id:"2", name:"Adi"}, {id:"3", name:"Anuj"}]; 
```

您是否面临任何具体问题？我使用了 chrome 和 IE9，它似乎工作正常。

# css - 仅浮动 CSS 菜单 - 如何在 section2 上修改

> ID：15190537
> 
> 赞同：0
> 
> 时间：2013-03-03T20:34:25.010
> 
> 标签：css

天哪，我在单页网站的屏幕顶部固定了浮动菜单。当我单击菜单项时，页面会慢慢向下滚动到使用 jquery 的相应部分。我在屏幕顶部有固定菜单的代码：

```
<style>
.fixed_elements{ position:fixed; top:100px; }
        #top-floating-bar{ background: none repeat scroll 0 0 #2D2D2D; height: 35px; position: fixed; top: 0; width: 100%; z-index: 100; }
        ul{ padding: 0; margin: 0; }
        .fixed-bar-buttons{ float: left;color: #fff; }
        .fixed-bar-buttons ul { height: 25px; padding-right: 10px; }
        .fixed-bar-buttons ul li{ display: block; float: left; font-family: sans-serif; font-size: 14px; font-weight: bold; height: 25px; padding-left: 10px; padding-right: 10px; padding-top: 10px; }
        .fixed-bar-buttons ul li:hover{ background-color: #605F5F; }
        #content-panel{ float: left;margin-top: 40px; }
</style>
</head>

<body>
 <div id="top-floating-bar">
        <div class="fixed-bar-buttons">
            <ul class="nav">
                <li><a href="#section2">REFERENCIE</a></li>
                <li><a href="#section3">KONTAKT</a></li>
            </ul>
        </div>
    </div>
<div id="section2"> Section2 content</div>
<div id="section3"> Section3 content</div>
... 
```

代码没问题，一切正常。我需要做的是仅在 section2 和 section3 上修改菜单并添加“UP”按钮。

当我加载页面时，我不需要“向上”按钮，因为它不可能向上并且在那里令人困惑，所以我只有向下滚动时才需要它。是否可以仅使用 CSS(1,2,3)？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T21:01:56.680

不可能，因为您必须获取文档的垂直偏移量才能知道用户是在页面顶部还是向下滚动。需要垂直偏移来决定是否显示向上按钮。

有一种使用 JS 的方法，但是如果您要求仅使用 CSS 的解决方案，我已经给您带来了坏消息：P

# linux - 如何在 Linux 上使用 cfsetispeed 和 tcsetattr 命令将波特率配置为 9600 的端口？

> ID：15190543
> 
> 赞同：0
> 
> 时间：2013-03-03T20:35:40.470
> 
> 标签：linux, baud-rate

我现在正在使用以下代码，我想知道它哪里错了。

```
struct termios options;
int fd = open("/dev/ttyUSB0", O_RDWR | O_NOCTTY | O_NDELAY);
fcntl(fd, F_SETFL, 0);
tcgetattr(fd, &options);
cfsetispeed(&options, B9600);
tcsetattr(fd, TCSANOW, &options); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T20:41:45.517

你可以试试下面的代码，看看它是否有帮助？

```
int open_port(void)
{
    int fd;

fd = open("/dev/ttyUSB0", O_RDWR | O_NOCTTY | O_NDELAY);
if (fd == -1)
{
    perror("open_port: Unable to open /dev/ttyS0 - ");
}
else
    fcntl(fd, F_SETFL, 0);

struct termios options;

tcgetattr(fd, &options);

cfsetispeed(&options, B9600);
cfsetospeed(&options, B9600);

tcsetattr(fd, TCSANOW, &options);

return (fd);
} 
```

# cocos2d-iphone - 移动 CCRendertexture

> ID：15190552
> 
> 赞同：0
> 
> 时间：2013-03-03T20:36:20.427
> 
> 标签：cocos2d-iphone

我是 cocos2d 的新手，我正在使用着色应用程序，我正在使用 CCRenderTexture 进行绘图：

```
target = [[CCRenderTexture alloc] initWithWidth:size.width height:size.height pixelFormat:kCCTexture2DPixelFormat_RGBA8888];
            [target setPosition:ccp(size.width/2, size.height/2)];
    [target clear:255 g:255 b:255 a:1];
    [self addChild:target]; 
```

但我需要将绘图区域（CCRenderTexture）的位置向上移动一点以显示隐藏在屏幕底部的子菜单，所以我使用 CCMove：

```
[CCMoveTo actionWithDuration:0.2 position:ccp(self.position.x, self.position.y+menuOffset)] 
```

渲染纹理按预期向上移动，但“可触摸区域”保持在同一个位置，所以当我触摸子菜单区域（渲染纹理框架外）时，我仍然在渲染纹理内绘制。

这是绘图的方法

```
-(void)ccTouchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{

        UITouch *touch = [touches anyObject];
        CGPoint start = [touch locationInView: [touch view]];
        start = [[CCDirector sharedDirector] convertToGL: start];
        CGPoint end = [touch previousLocationInView:[touch view]];
        end = [[CCDirector sharedDirector] convertToGL:end];

        // begin drawing to the render texture
        [target begin];
        // scale/rotation/offset
        float distance = ccpDistance(start, end);
        if (distance > 1)
        {
                int d = (int)distance;
                for (int i = 0; i < d; i++)
                {
                        float difx = end.x - start.x;
                        float dify = end.y - start.y;
                        float delta = (float)i / distance;
                        [brush setPosition:ccp(start.x + (difx * delta), start.y + (dify * delta))];
                        [brush setRotation:rand()%360];
                        [brush setScale:drawratio];
                        [brush setColor:brush.color];
                        [brush visit];
                }

        }
        [target end];

} 
```

那么，我怎样才能以适当的方式改变 CCRendertexture 的位置呢？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T03:05:09.323

您只需要将 GL 坐标转换为**目标**对象的节点空间

```
-(void)ccTouchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [touches anyObject];
    CGPoint start = [touch locationInView: [touch view]];
    start = [[CCDirector sharedDirector] convertToGL: start];
    start = [target convertToNodeSpace: start];

    CGPoint end = [touch previousLocationInView:[touch view]];
    end = [[CCDirector sharedDirector] convertToGL:end];
    end = [target convertToNodeSpace: end];

    // begin drawing to the render texture
    [target begin];
    // scale/rotation/offset
    float distance = ccpDistance(start, end);
    if (distance > 1)
    {
            int d = (int)distance;
            for (int i = 0; i < d; i++)
            {
                    float difx = end.x - start.x;
                    float dify = end.y - start.y;
                    float delta = (float)i / distance;
                    [brush setPosition:ccp(start.x + (difx * delta), start.y + (dify * delta))];
                    [brush setRotation:rand()%360];
                    [brush setScale:drawratio];
                    [brush setColor:brush.color];
                    [brush visit];
            }

    }
    [target end];

} 
```

# r - 使用 Emacs-ESS 编织 Beamer 幻灯片（错误停止）

> ID：15190566
> 
> 赞同：2
> 
> 时间：2013-03-03T20:37:39.283
> 
> 标签：r, emacs, latex, knitr, ess

我正在编织以下文件（注意`eRRoR()`功能）：

```
\documentclass{beamer}

<<setup, include=FALSE>>=
opts_knit$set(stop_on_error=2L, message=FALSE)
options(width=40)
@

\begin{document}
\begin{frame}[fragile]{Test}
<<test1>>=
eRRoR()
message("aaa")
print("test1")
@

<<test2>>=
print("test2")
@

\end{frame}
\end{document} 
```

我希望 knitr 停止出错。但尽管有`stop_on_error=2L`选项，R 输出如下：

```
> local({..od <- getwd(); setwd("c:/test/"); require(knitr); knit("c:/test/ktest.rnw"); setwd(..od) })

processing file: c:/test/ktest.rnw
  |>>>>>>>>>                                                        |  14%
  ordinary text without R code

  |>>>>>>>>>>>>>>>>>>>                                              |  29%
label: setup (with options) 
List of 1
 $ include: logi FALSE

  |>>>>>>>>>>>>>>>>>>>>>>>>>>>>                                     |  43%
  ordinary text without R code

  |>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>                            |  57%
label: test1
  |>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>                   |  71%
  ordinary text without R code

  |>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>         |  86%
label: test2
  |>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>| 100%
  ordinary text without R code

output file: c:\test\ktest.tex

> 
```

显然停止不会发生。此外，如果我使用 PdfLaTeX 输出 .tex 文件，我会得到以下 PDF 幻灯片：

```
Test

   eRRoR()
   ## Error:
   could not find function "eRRoR"
   message("aaa")
   ## aaa
   print("test1")
   ## [1] "test1"

   print("test2")
   ## [1] "test2" 
```

幻灯片证实了编织仍在继续，尽管有错误。

我也不清楚（对我来说）为什么 knitr 打印“没有 R 代码的普通文本”。这些块中有 R 代码。此外，通过输出，该选项`message=FALSE`似乎无效。

我究竟做错了什么？我正在使用 ESS 12.09-1 [rev. 5167 (2012-09-24)] 和 knitr_0.8 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T21:01:42.357

听起来您使用的是旧版本的`knitr`; 见[常见问题 1](https://github.com/yihui/knitr/blob/master/FAQ.md)。

# git - 使用 git merge --squash 清除未使用的 blob，然后使用 git gc？

> ID：15190574
> 
> 赞同：2
> 
> 时间：2013-03-03T20:38:23.247
> 
> 标签：git, git-filter-branch, git-gc

由于几年前签入了许多大 blob，我的存储库变得非常大。它们已在后续修订中被删除，不再需要，所以我现在应该能够清除对它们的任何引用。

我看过一些关于使用的参考，`git filter-branch`但使用这个命令似乎很危险而且很笨拙，所以我尝试了这个：

```
git checkout --orphan new-master
git rm -rf --cached *
git merge --squash master
git branch -D master
git gc --prune=now 
```

这难道不应该意味着在历史的任何时候创建并随后删除的任何内容都将被永久删除吗？

出于某种原因，它似乎不起作用 - 大小或多或少相同。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T21:07:51.080

抱歉，`filter-branch`这是唯一的方法。

如果您感到紧张，您应该尝试在存储库的单独克隆中对其进行测试。请记住，当您执行此操作时，git 会为您备份所有内容，因此您的克隆存储库将在本地*增加*大小，直到您推送更改的历史记录。

我会在此查看[GitHub 的有用页面](https://help.github.com/articles/remove-sensitive-data)。

另外，如果你原谅我的无耻插件，我最近一直在研究一个[Ruby gem](https://github.com/bsnape/git-health-check)，它提供了一些关于你的历史和工作副本中的大文件的基本指标。它仍在积极开发中，但它可以工作，希望你会发现它有用。

# 编辑：为什么你的方法不起作用

首先，git 是一个[分布式版本控制系统](http://en.wikipedia.org/wiki/Distributed_revision_control)，这意味着当您执行`clone`. 因此，您可以`git checkout <commit-sha>`对存储库历史记录中的任何提交执行 a，以准确获取存储库在过去某个时间点的样子。

创建一个新分支并不能将您从存储库的历史中解放出来；事实上，[分支只是提交的指针](http://git-scm.com/book/en/Git-Branching-What-a-Branch-Is)。所以为了简化，所有分支都有一个共同的祖先，这就是为什么你的`new-master`分支和你的旧分支完全一样`master`。大小的小幅减少可能是由于 git 从垃圾收集中获得了更好的优化。

当你跑的时候`git gc --prune=now`，你只是在移除`loose objects`ie 不在你的`packfile`. A`packfile`是 git 有效存储对象以提高效率并减小存储库大小的地方。[您可以在此处](http://alblue.bandlem.com/2011/09/git-tip-of-week-objects-and-packfiles.html)找到更多信息。

如果你是一个 git 新手，你需要接受很多东西，但我试图给出一个高层次的概述。我将探索*优秀的* [git 文档](http://git-scm.com/book)并准备好使用该`git filter-branch`命令以真正减少存储库的大小。

# bash - 如何过滤正在运行的程序的输出？

> ID：15190577
> 
> 赞同：1
> 
> 时间：2013-03-03T20:38:38.127
> 
> 标签：bash, pipe

我有这个 bash 命令：

```
find $DIR -type f -maxdepth 1 -name '*.mkv' | { 
    while read filename ; do 
        mkvmerge -o "${OUTDIR}/${filename}" "${filename}" "${filename%.mkv}.mka" "${filename%.mkv}.ass"  
    done 
} 
```

这给了我以下输出：

```
mkvmerge v5.8.0 ('No Sleep / Pillow') built on Mar  3 2013 21:06:19
'./file.mkv': Using the demultiplexer for the format 'Matroska'.
'./file.mka': Using the demultiplexer for the format 'Matroska'.
'./file.ass': Using the demultiplexer for the format 'SSA/ASS subtitles'.
'./file.mkv' track 0: Using the output module for the format 'AVC/h.264'.
'./file.mkv' track 1: Using the output module for the format 'FLAC'.
'./file.mka' track 0: Using the output module for the format 'AC3'.
'./file.ass' track 0: Using the output module for the format 'text subtitles'.
The file './out//./file.mkv' has been opened for writing.
Progress: 9% 
```

只有进度线刷新。我想在“进度”行之前摆脱那些行。首先我想我可以在最后添加这个：`| grep "Progress"`但它不起作用。是否有任何解决方案来格式化正在运行的程序的输出？我知道`bar`实用程序可以以几乎相同的方式生成漂亮的进度条：

![酒吧示例](../Images/b9390184e04e38df7ce303ae47a6f792.png)

我试过`2> log`了`1> log`- 没有任何效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-12T08:30:26.407

```
mkvmerge -o "$OUTDIR/$filename" "$filename" "${filename%.mkv}.mka" "${filename%.mkv}.ass"|(sed -n /^The/q;cat) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T09:40:21.840

mkvmerge 有一个安静模式，试试看：

> $ mkvmerge -q

# python - Python 在文件中搜索一百万个字符串并计算每个字符串的出现次数

> ID：15190580
> 
> 赞同：2
> 
> 时间：2013-03-03T20:39:10.040
> 
> 标签：python, performance, string-search

这更多的是要找到最快的方法来做到这一点。我有一个 file1，它在单独的行中包含大约一百万个字符串（长度 6-40）。我想在另一个包含大约 80,000 个字符串的文件 2 中搜索它们中的每一个并计算出现次数（如果在一个字符串中多次找到小字符串，则该字符串的出现次数仍然为 1）。如果有人有兴趣比较性能，有下载 file1 和 file2 的链接。dropbox.com/sh/oj62918p83h8kus/sY2WejWmhu?m

我现在正在做的是为文件 2 构建一个字典，使用字符串 ID 作为键和字符串作为值。（因为 file2 中的字符串有重复值，只有字符串 ID 是唯一的）我的代码是

```
for line in file1:
   substring=line[:-1].split("\t")
   for ID in dictionary.keys():
       bigstring=dictionary[ID]
       IDlist=[]
       if bigstring.find(substring)!=-1:
           IDlist.append(ID)
   output.write("%s\t%s\n" % (substring,str(len(IDlist)))) 
```

我的代码需要几个小时才能完成。任何人都可以建议一种更快的方法吗？file1 和 file2 都只有 50M 左右，我的电脑有 8G 内存，你可以使用尽可能多的内存来让它更快。任何可以在一小时内完成的方法都是可以接受的：）

在这里，在我尝试了下面这些评论的一些建议之后，请查看性能比较，首先是代码，然后是运行时。

Mark Amery 和其他人提出的一些改进

```
import sys
from Bio import SeqIO

#first I load strings in file2 to a dictionary called var_seq, 
var_seq={}
handle=SeqIO.parse(file2,'fasta')
for record in handle:
    var_seq[record.id]=str(record.seq)

print len(var_seq) #Here print out 76827, which is the right number. loading file2 to var_seq doesn't take long, about 1 second, you shall not focus here to improve performance

output=open(outputfilename,'w')
icount=0
input1=open(file1,'r')
for line in input1:
    icount+=1
    row=line[:-1].split("\t")
    ensp=row[0]   #ensp is just peptides iD
    peptide=row[1] #peptides is the substrings i want to search in file2
    num=0
    for ID,bigstring in var_seq.iteritems(): 
        if peptide in bigstring:
            num+=1

    newline="%s\t%s\t%s\n" % (ensp,peptide,str(num))
    output.write(newline)
    if icount%1000==0:
        break

input1.close()
handle.close()
output.close() 
```

完成需要1m4s。与我的旧版本相比，提高了 20 多岁

#######熵建议的NEXT METHOD

```
from collections import defaultdict
var_seq=defaultdict(int)
handle=SeqIO.parse(file2,'fasta')
for record in handle:
    var_seq[str(record.seq)]+=1

print len(var_seq) # here print out 59502, duplicates are removed, but occurances of duplicates are stored as value 
handle.close()

output=open(outputfilename,'w')
icount=0

with open(file1) as fd:
    for line in fd:
        icount+=1
        row=line[:-1].split("\t")
        ensp=row[0]
        peptide=row[1]
        num=0
        for varseq,num_occurrences in var_seq.items():
            if peptide in varseq:
                num+=num_occurrences

    newline="%s\t%s\t%s\n" % (ensp,peptide,str(num))
    output.write(newline)
    if icount%1000==0:
        break

output.close() 
```

这需要 1 分 10 秒，因为它避免搜索重复项，所以没有像预期的那样快，不明白为什么。

Mark Amery 建议的 Haystack 和 Needle 方法，结果是最快的，这种方法的问题是所有子串的计数结果都是 0，我还不明白。

这是我实现他的方法的代码。

```
class Node(object):
    def __init__(self):
        self.words = set()
        self.links = {}

base = Node()

def search_haystack_tree(needle):
    current_node = base
    for char in needle:
        try:
            current_node = current_node.links[char]
        except KeyError:
            return 0
    return len(current_node.words)

input1=open(file1,'r')
needles={}
for line in input1:
    row=line[:-1].split("\t")
    needles[row[1]]=row[0]

print len(needles)

handle=SeqIO.parse(file2,'fasta')
haystacks={}
for record in handle:
    haystacks[record.id]=str(record.seq)

print len(haystacks)

for haystack_id, haystack in haystacks.iteritems(): #should be the same as enumerate(list)
    for i in xrange(len(haystack)):
        current_node = base
        for char in haystack[i:]:
            current_node = current_node.links.setdefault(char, Node())
            current_node.words.add(haystack_id)

icount=0
output=open(outputfilename,'w')
for needle in needles:
    icount+=1
    count = search_haystack_tree(needle)
    newline="%s\t%s\t%s\n" % (needles[needle],needle,str(count))
    output.write(newline)
    if icount%1000==0:
        break

input1.close()
handle.close()
output.close() 
```

只需0m11s即可完成，比其他方法快得多。但是，我不知道将所有计数结果都设为0是我的错误，还是Mark的方法存在缺陷。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T21:08:16.573

Your code doesn't seem like it works(are you sure you didn't just quote it from memory instead of pasting the actual code?)

For example, this line:

```
substring=line[:-1].split("\t") 
```

will cause `substring` t be a list. But later you do:

```
if bigstring.find(substring)!=-1: 
```

That would cause an error if you call `str.find(list)`.

In any case, you are building lists uselessly in your innermost loop. This:

```
IDlist=[]
if bigstring.find(substring)!=-1:
     IDlist.append(ID)

 #later
 len(IDlist) 
```

That will uselessly allocate and free lists which would cause memory thrashing as well as uselessly bogging everything down.

This is code that should work and uses more efficient means to do the counting:

```
from collections import defaultdict

dictionary = defaultdict(int)
with open(file2) as fd:
    for line in fd:
        for s in line.split("\t"):
            dictionary[s.strip()] += 1

with open(file1) as fd:
    for line in fd:
        for substring in line.split('\t'):
            count = 0
            for bigstring,num_occurrences in dictionary.items():
                if substring in bigstring:
                    count += num_occurrences
            print substring, count 
```

PS: I am assuming that you have multiple words per line that are tab-split because you do `line.split("\t")` at some point. If that is wrong, it should be easy to revise the code.

PPS: If this ends up being too slow for your use(you'd have to try it, but my guess is this should run in ~10min given the number of strings you said you had). You'll have to use suffix trees as one of the comments suggested.

Edit: Amended the code so that it handles multiple occurrences of the same string in `file2` without negatively affecting performance

Edit 2: Trading maximum space for time.

Below is code that will consume quite a bit of memory and take a while to build the dictionary. However, once that's done, each search out of the million strings to search for should complete in the time it takes for a single hashtable lookup, that is `O(1)`.

Note, I have added some statements to log the time it takes for each step of the process. You should keep those so you know which part of the time is taken when searching. Since you are testing with 1000 strings only this matters a lot since if 90% of the cost is the build time, not the search time, then when you test with 1M strings you will still only be doing that once, so it won't matter

Also note that I have amended my code to parse file1 and file2 as you do, so you should be able to just plug this in and test it:

```
from Bio import SeqIO
from collections import defaultdict
from datetime import datetime

def all_substrings(s):
    result = set()
    for length in range(1,len(s)+1):
        for offset in range(len(s)-length+1):
            result.add(s[offset:offset+length])
    return result

print "Building dictionary...."
build_start = datetime.now()

dictionary = defaultdict(int)
handle = SeqIO.parse(file2, 'fasta')
for record in handle:
    for sub in all_substrings(str(record.seq).strip()):
        dictionary[sub] += 1
build_end = datetime.now()
print "Dictionary built in: %gs" % (build-end-build_start).total_seconds()

print "Searching...\n"
search_start = datetime.now()

with open(file1) as fd:
    for line in fd:
        substring = line.strip().split("\t")[1]
        count = dictionary[substring]
        print substring, count

search_end = datetime.now()
print "Search done in: %gs" % (search_end-search_start).total_seconds() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T22:07:55.447

我不是算法专家，但我认为这应该会给您带来健康的性能提升。您需要将 'haystacks' 设置为要查看的大词列表，并将 'needles' 设置为您要查找的子字符串的列表（可以包含重复项），我会让你最终实施。如果您可以发布您的针头列表和干草堆列表，那就太好了，这样我们就可以轻松地比较提议的解决方案的性能。

```
haystacks = <some list of words>
needles = <some list of words>

class Node(object):
    def __init__(self):
        self.words = set()
        self.links = {}

base = Node()

for haystack_id, haystack in enumerate(haystacks):
    for i in xrange(len(haystack)):
        current_node = base
        for char in haystack[i:]:
            current_node = current_node.links.setdefault(char, Node())
            current_node.words.add(haystack_id)

def search_haystack_tree(needle):
    current_node = base
    for char in needle:
        try:
            current_node = current_node.links[char]
        except KeyError:
            return 0
    return len(current_node.words)

for needle in needles:
    count = search_haystack_tree(needle)
    print "Count for %s: %i" % (needle, count) 
```

您可能可以通过查看代码来弄清楚发生了什么，但只是用文字来表达：我构建了一个巨大的大海捞针子字符串树，这样给定任何针，您可以逐个字符地导航树并结束在一个节点上，该节点附加了包含该子字符串的 haystacks 的所有 haystack id 的集合。然后对于每根针，我们只需遍历树并在最后计算集合的大小。

# ios - 滚动表视图“NSRangeException”时应用程序关闭

> ID：15190585
> 
> 赞同：0
> 
> 时间：2013-03-03T20:39:37.480
> 
> 标签：ios, xcode, arrays, uitableview, terminate

我的应用程序中的 twitter 提要功能运行良好，但我今天再次对其进行了测试，但每当我滚动到第 4 条推文时，应用程序就会关闭。我得到的错误是：

> 由于未捕获的异常“NSRangeException”而终止应用程序，原因：“-[__NSCFArray objectAtIndex:]: index (3) beyond bounds (3)”

这是我的代码

```
#import "ThirdViewController.h"
#import "ODRefreshControl.h"

@interface ThirdViewController ()

@end

@implementation ThirdViewController

-(void)bannerViewDidLoadAd:(ADBannerView *)banner {
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:1];
[banner setAlpha:1];
[UIView commitAnimations];
}

- (void)bannerView:(ADBannerView *)
banner didFailToReceiveAdWithError:(NSError *)error
{
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:1];
[banner setAlpha:0];
[UIView commitAnimations];
}

@synthesize tableView = _tableView;

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
 return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

- (BOOL)shouldAutorotate
{
return NO;
}

- (NSUInteger)supportedInterfaceOrientations
{
return UIInterfaceOrientationMaskPortrait;
}

-(void)TableView:(UITableView *)TableView didFailLoadWithError:(NSError *)error {
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error" message:@"Can't connect. Please check your internet Connection" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
[alert show];

}

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
    // Custom initialization
}
return self;
}

- (void)viewDidLoad
{
[super viewDidLoad];
ODRefreshControl *refreshControl = [[ODRefreshControl alloc] initInScrollView:self.tableView];
[refreshControl addTarget:self action:@selector(dropViewDidBeginRefreshing:) forControlEvents:UIControlEventValueChanged];
// Do any additional setup after loading the view.
[self fetchTweets];
self.tableView.dataSource = self;
self.tableView.delegate = self;
UIImageView *tempImageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"background.png"]];
[tempImageView setFrame:self.tableView.frame];

self.tableView.backgroundView = tempImageView;

}

- (void)fetchTweets
{
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    NSData* data = [NSData dataWithContentsOfURL:
                    [NSURL URLWithString: @"http://search.twitter.com/search.json?q=from:bikechannel"]];

    NSError* error;

    tweets = [NSJSONSerialization JSONObjectWithData:data
                                             options:kNilOptions
                                               error:&error];

    NSLog(@"Tweets %@", tweets);

    dispatch_async(dispatch_get_main_queue(), ^{
        [self.tableView reloadData];
    });
});
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
return tweets.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"TweetCell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}

NSArray *tweetsArray = [tweets valueForKey:@"results"];
NSDictionary *tweet = [tweetsArray objectAtIndex:indexPath.row];

NSString *text = [tweet objectForKey:@"text"];
//NSString *name = [[tweet objectForKey:@"user"] objectForKey:@"name"];

cell.textLabel.text = text;
//cell.detailTextLabel.text = [NSString stringWithFormat:@"by %@", name];

return cell;
}

-(void)tableView:(UITableView *)tableView didDeselectRowAtIndexPath:(NSIndexPath *)indexPath {

NSLog(@"Row %d selected", indexPath.row);
}

- (void)dropViewDidBeginRefreshing:(ODRefreshControl *)refreshControl
{
double delayInSeconds = 2.0;
dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, delayInSeconds * NSEC_PER_SEC);
dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
    [self fetchTweets];
    [refreshControl endRefreshing];
});
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath  *)indexPath
{
return 150;
}

- (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
}

@end 
```

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T21:13:50.770

您将作为 numberOfRows 返回 UITableView：`tweets count` 但是，在 cellForRowAtIndexPath 上，您将其用作数组：

```
NSArray *tweetsArray = [tweets valueForKey:@"results"]; 
```

因此，要么您需要将行数设置为 tweetsArray 大小，要么使用 CellForRowAtIndexPath 中的 tweets 数组

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T20:46:34.637

你的问题是你使用推文作为计数，

您的`tweets`大小为 3 但您的`tweetsArray`大小变为 4 的情况，因此您的 Array 超出范围，

与使用`tweetsArray`填充 the 的行一样，`tableview`因此您应该返回`tweetsArray`not的计数`tweets`

在你的`.h`

```
@property (strong,nonatomic)NSArray *tweetsArray; 
```

在你的`.m`

```
 - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
return [tweetArray count]; // this should be number of rows you have data in the array
    } 
```

`fetchtweets`其次，在您解析推文中的json数据后，将您的这行代码放入方法中

```
NSArray *tweetsArray = [tweets valueForKey:@"results"]; 
```

# java - 如何使用 arraylist 中的 id 访问数据库上的列以生成新的 jsp 表？

> ID：15190586
> 
> 赞同：0
> 
> 时间：2013-03-03T20:39:41.647
> 
> 标签：java, forms, jsp, servlets

我正在一个管理站点上工作，用户可以在其中查看从数据库中以 jsp 形式显示的员工列表。该项目使用 java 类和 servlet。表单中包含员工详细信息以及一个将值设置为employeeID（数据库中的主键）的复选框。

```
 <input type="checkbox" value="${employee.empID}" name="empArray"> 
```

假设我选择了 8 名员工，我可以将他们的值传回 servlet 并将它们存储在数组列表中并打印出来。我现在正在努力实现的是使用数组列表中的 empID 来访问它们在数据库中的匹配值，这样我就可以根据存储在数组列表中的 id 创建一个员工表。

换句话说，如果 String[] empArray 包含员工 ID 的“5,7,9,20 ...等”，我希望能够在新表中显示他们的详细信息，以便导出报告数据。任何人都可以建议我解决这个问题的最佳方法吗？

下面是servlet代码

```
 String[] employeeArray ;

                employeeArray  = request.getParameterValues("empArray"); 
                 if (employeeArray != null && employeeArray.length != 0)  

             {
                 System.out.println("You have selected: ");
                  String empID="";
                   for (int i = 0; i < employeeArray.length; i++) 
             {
                 empID+=employeeArray[i]+"\n";
             }
              System.out.println(empID);
              session.setAttribute("employeeArray",  empID);

             } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T01:53:39.347

您的代码（格式化）是：

```
String[] employeeArray ;
employeeArray  = request.getParameterValues("empArray"); 

if (employeeArray != null && employeeArray.length != 0){
    System.out.println("You have selected: ");
    String empID="";

    for (int i = 0; i < employeeArray.length; i++) {
        empID+=employeeArray[i]+"\n";
    }

    System.out.println(empID);
    session.setAttribute("employeeArray",  empID);

} 
```

您添加到会话的值不是数组，而是字符串

我在下面编辑了您的代码。我尝试使用更好的名称，并假设您有一个代表 Employee 的类和一个查找数据库数据的服务。

```
...
EmployeeService service; // initialised else where
...

List<Employee> employees = new ArrayList<Employee>();
String[] employeeIds ;
employeeIds  = request.getParameterValues("empArray"); 

if (employeeIds != null && employeeIds.length != 0){
    String empID="";

    Employee employee;

    for (int i = 0; i < employeeIds.length; i++) {
        employee = service.find(employeeIds[i]); // get from database
        if(employee != null){
            employees.add(employee);
        }
    }

    session.setAttribute("employees",  employees);

} 
```

# android - Eclipse Juno，永无止境的 Android 工具包更新

> ID：15190593
> 
> 赞同：1
> 
> 时间：2013-03-03T20:40:16.213
> 
> 标签：android, eclipse, adb

我有一段时间没有做任何Android开发了。在此期间，我将 Galaxy Nexus（第一个版本）更新为 Android 4.2.2。昨天我想开发我的游戏，我连接了我的手机。我写了一些代码，点击运行，设备出现在设备选择器中，但不是熟悉的“Samsung Galaxy Something”，而是一些看似随机的数字（它可能是某物的序列号）并且设备被标记为离线，并且它不可用于部署和调试。有趣的是，设备本身启用了 USB 调试，屏幕左上角的小怪物清晰可见，一切似乎都很好。

我试图关闭并再次打开 USB 调试，但没有成功。

我试图杀死并恢复 ADB 服务器。

我尝试更换 USB 数据线；我了解到有**A**和**B**电缆，在某些情况下使用正确的电缆可能很重要（我将三星电缆留在了另一个大陆）。

我尝试使用 Android 更新管理器更新 Android SDK；完成此操作后，连接时的设备会提示我接受 USB 调试请求，所以毕竟有些东西在某种程度上发生了变化。但是，设备名称仍然不会显示在设备管理器中，并且状态仍然是离线。然后，Eclipse 开始抱怨使用新的 SDK，Android 开发工具包应该更新到版本 21。

我运行了 Eclipse 更新管理器，几个小时后它仍然以 50% 的速度挂在“联系软件站点”上。

我试图在**eclipse.ini**的末尾添加**-Declipse.p2.mirrors=false**，但它似乎并没有更快。

 **我特别清楚[这个](https://stackoverflow.com/questions/11505441/eclipse-is-saying-update-android-developer-toolkit)和[这个](https://stackoverflow.com/questions/15073165/android-4-2-2-adb-offline-even-after-sdk-upgrade)，他们在那里所说的没有任何帮助。

**编辑**

一小时后仍为 50%。我也会在某个时候尝试其中的[一些](https://stackoverflow.com/questions/8804430/how-to-run-android-app-in-debug-mode-on-samsung-galaxy-y-s5360/8804473#8804473)。

**编辑**

酷，它终于开始下载更新，过了一会儿它崩溃了。

```
An error occurred while collecting items to be installed
session context was:(profile=epp.package.java, phase=org.eclipse.equinox.internal.p2.engine.phases.Collect, operand=, action=).
No repository found containing: osgi.bundle,com.android.ide.eclipse.adt,21.1.0.v201302060044-569685
No repository found containing: osgi.bundle,com.android.ide.eclipse.base,21.1.0.v201302060044-569685
No repository found containing: osgi.bundle,com.android.ide.eclipse.ddms,21.1.0.v201302060044-569685
No repository found containing: osgi.bundle,com.android.ide.eclipse.gldebugger,21.1.0.v201302060044-569685
No repository found containing: osgi.bundle,com.android.ide.eclipse.hierarchyviewer,21.1.0.v201302060044-569685
No repository found containing: osgi.bundle,com.android.ide.eclipse.traceview,21.1.0.v201302060044-569685
No repository found containing: osgi.bundle,overlay.com.android.ide.eclipse.adt.overlay,21.1.0.v201302060044-569685
No repository found containing: org.eclipse.update.feature,com.android.ide.eclipse.adt,21.1.0.v201302060044-569685
No repository found containing: osgi.bundle,com.android.ide.eclipse.adt.package,21.1.0.v201302060044-569685
No repository found containing: org.eclipse.update.feature,com.android.ide.eclipse.ddms,21.1.0.v201302060044-569685
No repository found containing: org.eclipse.update.feature,com.android.ide.eclipse.gldebugger,21.1.0.v201302060044-569685
No repository found containing: org.eclipse.update.feature,com.android.ide.eclipse.hierarchyviewer,21.1.0.v201302060044-569685
No repository found containing: org.eclipse.update.feature,com.android.ide.eclipse.traceview,21.1.0.v201302060044-569685 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T09:53:30.270

当我更新我的 sdk take kit 并尝试更新 ADT 时，我也遇到了同样的问题，为了下载 ADT 21.1，我猜你需要 Helios 3.62 或更高版本。

最好的方法是使用 zip 下载 Desire 更新，然后使用该 zip 文件进行更新。我只使用这种方法节省了我的一天。使用本地 zip 文件更新时删除 Internet 连接

这可能会有所帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T09:48:07.580

这似乎是代理问题。要处理它，请从安装的 android-sdk 的位置运行 SDK Manager.exe。当 SDK Manager 运行时，转到“工具”-->“选项”。以下两个步骤中的任何一个都可能有所帮助。

1.  如果您使用代理服务器，请插入代理设置详细信息或
2.  选中“强制 https://... 使用 http://... 获取源”选项

希望它有助于下载所有存储库文件。**

# javascript - 从 Google 图表中的数据点触发下拉菜单

> ID：15190595
> 
> 赞同：0
> 
> 时间：2013-03-03T20:40:20.897
> 
> 标签：javascript, jquery, google-visualization

我生成了一个谷歌散点图，如下所示：

```
<g>
<circle cx="393.66499999999996" cy="142.17399999999998" r="4.5" stroke="none" stroke-width="0" fill="#f2f2f2"></circle>
<circle cx="362.655" cy="80.21199999999999" r="4.5" stroke="none" stroke-width="0" fill="#f2f2f2"></circle>
<circle cx="211.29666666666665" cy="142.726" r="4.5" stroke="none" stroke-width="0" fill="#f2f2f2"></circle>
<circle cx="427.62833333333333" cy="65.03199999999998" r="4.5" stroke="none" stroke-width="0" fill="#f2f2f2"></circle>
<circle cx="423.93666666666667" cy="114.712" r="4.5" stroke="none" stroke-width="0" fill="#f2f2f2"></circle>
<circle cx="169.95" cy="114.80399999999999" r="4.5" stroke="none" stroke-width="0" fill="#f2f2f2"></circle>
<circle cx="418.03" cy="114.38999999999999" r="4.5" stroke="none" stroke-width="0" fill="#f2f2f2"></circle>
<circle cx="356.74833333333333" cy="67.05599999999998" r="4.5" stroke="none" stroke-width="0" fill="#f2f2f2"></circle>
</g> 
```

当单击其中一个圆圈并且它需要出现在圆圈在 SVG 中的确切点时，我需要触发下拉菜单或弹出框。

我知道我可以收听 Google 为其图表提供的选择处理程序（[https://developers.google.com/chart/interactive/docs/events#Event_Listeners](https://developers.google.com/chart/interactive/docs/events#Event_Listeners)），但我不知道如何绑定 JS单击特定圆圈，也不会在该点出现下拉菜单/弹出框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T08:27:13.740

好的，所以我通过将下拉框的绝对位置组合在一起，然后在谷歌图表中任何点的选择事件上触发它来实现这一点。

不是很好，但现在可以了。

# c#-4.0 - C# 代码无法从 Arduino 读取串行输入

> ID：15190597
> 
> 赞同：0
> 
> 时间：2013-03-03T20:40:40.460
> 
> 标签：c#-4.0, serial-port, arduino

嗨，我正在尝试从我的 Arduino 读取串行输入，但我没有运气。我相信我正确地打开和关闭了连接，但似乎没有取得太大的成功！

我确定 Arduino 正在输出数据，因为我可以在串行终端中看到它。

我的 C# 程序的代码如下，我想知道是否有人能发现我可能遗漏的任何错误。

这也是我应该收到“12.2,1111,332,233”的串行数据的一个例子

```
namespace FridgeProtectionDeviceMonitor
{
    public partial class Online_mode : Form
    {

        public Online_mode()
        {
            InitializeComponent();
        }

        private void Online_mode_Load(object sender, EventArgs e)
        {
            cmbPortSelection.DataSource = SerialPort.GetPortNames();
            cmbChartSelection.SelectedIndex = 0;
        }

        string x = "";
        SerialPort port;

        private void btnFindPorts_Click(object sender, EventArgs e)
        {
            var ports = SerialPort.GetPortNames();
            cmbPortSelection.DataSource = ports;
        }

        private void btnOpenPort_Click(object sender, EventArgs e)
        {
            if (cmbPortSelection.SelectedIndex > -1)
            {
                port = new SerialPort(cmbPortSelection.Text);
                try
                {
                    if (!port.IsOpen)
                    {
                        port.BaudRate = 9600;
                        port.Open();
                    }
                }
                catch (Exception)
                {
                    MessageBox.Show("Serial connection request denied: Port is in use!");
                }
            }
            else
            {
                MessageBox.Show("Serial connection request denied: No port selected!");
            }
        }

        private void btnClosePort_Click(object sender, EventArgs ex)
        {

            try
            {
                port.Close();

            }
            catch (Exception)
            {
                MessageBox.Show("Serial close connection request denied: ", ex.ToString());
            }
        }

        private void update(object sender, EventArgs e)
        {
            txtSaveLocation.Text = x;
        }

        private void port_DataReceived(object sender, System.IO.Ports.SerialDataReceivedEventArgs e)
        {
            x = port.ReadLine().ToString();
            MessageBox.Show(x);
            this.Invoke(new EventHandler(update));

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-10T23:19:15.827

我有一个连接到连接到 PIC 微控制器的 XBee 无线网桥的 USB 到串行转换器，我发现在单独的线程中运行串行端口读取功能会提高通信速度，这是一种长期存在的问题！

readline 阻塞代码，直到收到换行符，因此阻塞了你的主线程。在我将它移到另一个线程之前，我的 GUI 变得无响应等。顺便说一下，我正在使用 ReadByte()。

我不断地从后台工作者的串行缓冲区中读取字节并将它们存储在线程安全队列中。然后检查我的通信开始位的队列并从那里分析数据包。使用手动重置事件，我正在同步所有内容。

根据我的经验，port_datareceived 事件是对串行端口类的一个很好的补充，但不幸的是它对于快速通信相对无用。我以 12900 波特率运行。

如果您想要代码片段，我可以提供它们。

问候，皮特

PS 我正在使用带有多通道软件的 ATS5004D 4 通道差分示波器。多通道软件可以通过其内置的串行分析模块将电压信号分析成串行数据。这样你就可以看到串行通信线路上实际讨论的内容！！删除所有 BS 其他串行终端添加...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T03:40:36.507

我只是在做和你一样的事情，如果你想将它用于你的目的，你必须修改它，但这是我使用的代码。唯一的问题是，对我来说，我需要它快速阅读，因为它是用于速度计的，它有点滞后（有人知道为什么吗？）但无论如何，这是我的代码对我有用。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        public void Form1_Load(object sender, EventArgs e)
        {
            try
            {
                if (arduinoCom.IsOpen == false)
                {
                    arduinoCom.Open();
                }
            }

            catch
            {
                MessageBox.Show("Serial Error: Is your serial plugged in?");
            }

        }

        private void refresh_Tick(object sender, EventArgs e)
        {            
            string speedReading = arduinoCom.ReadLine();
            speed.Text = speedReading;
        }

        private void Form1_FormClosing(object sender, FormClosingEventArgs e)
        {
            arduinoCom.Close();
        }

    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-11T06:08:30.777

@michael b我首先查看实际通信正在做什么，即范围TX RX线以查看arduino板正在输出什么。我对 arduino 的经验很少，但它的前身 PICAXE 系统有一个调试功能，可以减慢一切堆的速度，这样的事情正在发生吗？

你想每秒更新几次speedo？SAE J1939 汽车串行通信标准规定，RPM 只需每 100ms 更新一次。人眼通常不能看到/反应快于 300 毫秒。9600 波特每毫秒大约为您提供一个 8 位字节。

就我个人而言，我不会使用计时器来获取更新，而是在与主线程不同的线程上做所有事情，并让它运行得尽可能快/慢。

该线程向您大致展示了我如何设置通信[System.IO.IOException: A device attach to the system is not working C# .NET 4.0](https://stackoverflow.com/questions/18729146/system-io-ioexception-a-device-attached-to-the-system-is-not-functioning-c-shar)

希望它有帮助，皮特

# html - 选择时列出的项目会改变颜色

> ID：15190599
> 
> 赞同：0
> 
> 时间：2013-03-03T20:40:54.850
> 
> 标签：html, css

这是小提琴：http: [//jsfiddle.net/SMftA/2/](http://jsfiddle.net/SMftA/2/)

如果选中它，我希望更改 mon 的背景颜色。如果它没有被选中，它应该是它最初创建的颜色。

我不确定为什么这不起作用。

我在想问题出在 mon 有一个班级和一个 id 吗？

```
 <li id="mon" class="selected">Mon</li> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T20:47:12.143

它不起作用，因为您为 id 输入了第一个背景颜色，`#mon`这在 css 规则中比类输入最强。在这里你可以看到它何时工作：

[http://jsfiddle.net/SMftA/3/](http://jsfiddle.net/SMftA/3/)

我还将编辑您的 jsFiddle 并展示如何使其正常工作。

## 编辑

我把你的身份证改成班级。现在你有更少的行，这应该是这样的：

[http://jsfiddle.net/SMftA/4/](http://jsfiddle.net/SMftA/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T20:49:36.310

您在这里有一个选择器特异性问题。ID 选择器优先于类选择器。要解决此问题，您可以向 UL 添加一个 ID，并为您选择的类创建更高的特异性，如下所示：

[http://jsfiddle.net/8MQSu/](http://jsfiddle.net/8MQSu/)

HTML：

```
<ul id="day-container">
    <li id="mon" class="selected">Mon</li>
    <li id="tue">Tue</li>
    <li id="wed">Wed</li>
    <li id="thu">Thu</li>
    <li id="fri">Fri</li>
    <li id="sat">Sat</li>
    <li id="sun">Sun</li>
</ul> 
```

CSS：

```
#chooseDays{
    font-size: 14px;
    margin-left: auto;
    margin-right: auto;
    width:250px;
}

#mon{
    background-color:#D1F7CE;
    clear: none;
    float:left;
    margin-right:5px;
    list-style-type: none;
}
#tue{
    background-color:#FCF4BB;
    clear: none;
    float:left;
    margin-right:5px;
    list-style-type: none;
}
#wed{
    background-color:#F7D0CE;
    clear: none;
    float:left;
    margin-right:5px;
    list-style-type: none;
}
#thu{
    background-color:#CED2F7;
    clear: none;
    float:left;
    margin-right:5px;
    list-style-type: none;
}
#fri{
    background-color:#CEF6F7;
    clear: none;
    float:left;
    margin-right:5px;
    list-style-type: none;
}
#sat{
    background-color:#CCCCCC;
    clear: none;
    float:left;
    margin-right:5px;
    list-style-type: none;
}
#sun{
    background-color:#FFE6F4;
    clear: none;
    float:left;
    margin-right:5px;
    list-style-type: none;
}

#day-container .selected
{
    background-color:#000;
} 
```

# javascript - 无法从不同的单选按钮组中获取值

> ID：15190601
> 
> 赞同：0
> 
> 时间：2013-03-03T20:41:03.843
> 
> 标签：javascript, jquery, html, radio

我想知道我错过了什么。我有这个无线电输入的形式：

```
<input type="radio" name="consulta" value="Ingreso">Ingreso
<input type="radio" name="consulta" value="Inversion">Inversi&oacute;n y Crecimiento<br<br>
<label style="font-weight:500;">Tipo:</label>
<input type="radio" name="tipo" value="Mensual">Mensual
<input type="radio" name="tipo" value="Diaria">Diaria 
```

并从每个组中检索选定的值，我在一个函数中有这个 javascript 代码：

```
var tipoConsulta = $('input[@name="consulta"]:checked').val();
var frecuenciaConsulta = $('input[@name="tipo"]:checked').val(); 
```

问题是“frecuenciaConsulta”变量的值与“tipoConsulta”变量的值相同，两个变量都从第一组中获取选定的值。我不知道我做错了什么，我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T20:48:09.300

删除`@`：

```
var tipoConsulta = $('input[name="consulta"]:checked').val();
var frecuenciaConsulta = $('input[name="tipo"]:checked').val(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T20:49:04.080

方括号已经是属性选择，不需要@符号，试试

```
var tipoConsulta = $('input[name="consulta"]:checked').val();
var frecuenciaConsulta = $('input[name="tipo"]:checked').val(); 
```

**编辑**

只是出于兴趣，包括属性的 @ 符号在内的语法在 jQuery 1.3 之前都是有效的

参考链接

[jQuery 属性选择器](http://api.jquery.com/category/selectors/attribute-selectors/)

# android - 是否可以在两个应用程序之间的内部存储中创建共享文件？

> ID：15190603
> 
> 赞同：0
> 
> 时间：2013-03-03T20:41:14.670
> 
> 标签：android, android-service

我想创建两个应用程序，第一个创建并写入文件。第二个从这个文件中读取并更新它的信息。我不知道这是否可能。如果可以进行更新，最好的方法是服务还是活动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T21:13:27.903

您可以使用[Content Provider](http://developer.android.com/guide/topics/providers/content-providers.html)为第三方应用程序提供对您的内部文件的访问权限。这是跨应用程序共享文件的推荐方法，正如@CommonsWare 在评论中指出的那样更安全。

如果您是编写这两个应用程序的人，并且它们使用相同的密钥进行签名，那么您还可以使用[共享用户 ID](http://developer.android.com/guide/topics/manifest/manifest-element.html#uid)来允许应用程序间直接访问数据文件。

# c++ - 通过模板传递函数时推断的返回类型

> ID：15190605
> 
> 赞同：5
> 
> 时间：2013-03-03T20:41:29.763
> 
> 标签：c++, templates, function-pointers, type-inference

我的问题是让编译器根据模板传递的函数的返回类型来推断函数的返回类型。

有什么方法可以称为

```
foo<bar>(7.3) 
```

代替

```
foo<double, int, bar>(7.3) 
```

在这个例子中：

```
#include <cstdio>
template <class T, class V, V (*func)(T)>
V foo(T t) { return func(t); }

int bar(double j)  { return (int)(j + 1); }

int main() {
  printf("%d\n", foo<double, int, bar>(7.3));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T20:49:43.063

如果您想保留`bar`作为*模板*参数，恐怕您只能接近：

```
#include <cstdio>

template<typename T>
struct traits { };

template<typename R, typename A>
struct traits<R(A)>
{
    typedef R ret_type;
    typedef A arg_type;
};

template <typename F, F* func>
typename traits<F>::ret_type foo(typename traits<F>::arg_type t)
{ return func(t); }

int bar(double j)  { return (int)(j + 1); }

int main()
{
    printf("%d\n", foo<decltype(bar), bar>(7.3));
} 
```

如果你想避免重复`bar`的名字，你也可以定义一个宏：

```
#define FXN_ARG(f) decltype(f), f

int main()
{
    printf("%d\n", foo<FXN_ARG(bar)>(7.3));
} 
```

或者，您可以 let`bar`成为一个*函数*参数，这可以让您的生活更轻松：

```
#include <cstdio>

template<typename T>
struct traits { };

template<typename R, typename A>
struct traits<R(A)>
{
    typedef R ret_type;
    typedef A arg_type;
};

template<typename R, typename A>
struct traits<R(*)(A)>
{
    typedef R ret_type;
    typedef A arg_type;
};

template <typename F>
typename traits<F>::ret_type foo(F f, typename traits<F>::arg_type t)
{ return f(t); }

int bar(double j)  { return (int)(j + 1); }

int main()
{
    printf("%d\n", foo(bar, 7.3));
} 
```

# computer-science - 可汗学院 CS 使用什么语言？

> ID：15190606
> 
> 赞同：5
> 
> 时间：2013-03-03T20:41:36.360
> 
> 标签：computer-science, khan-academy

我儿子正在玩[可汗学院的计算机科学](http://www.code.org/learn/khan-academy)并学习很多东西。

该应用程序在浏览器中的 JavaScript 上运行，但该语言并不完全符合 JavaScript 约定。例如 random(low, high) 而不是 JavaScript 的 Math.random()

有谁确切知道他们使用的是什么语言？

[除了站点链接上的内容](https://www.khanacademy.org/cs/docs)之外，是否还有更完整的文档，因为这看起来像是一个不完整的函数和方法列表。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-29T13:36:54.067

我相信他们只是将它包装起来并开发自己的功能，其下是 JavaScript。

就像声明的那样：

> 可汗学院计算机科学平台中的所有代码都是使用 JavaScript 和 Processing.js 编写的。

[https://www.khanacademy.org/cs/docs](https://www.khanacademy.org/cs/docs)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-01-23T19:00:59.537

这对原始问题的使用有点晚了，但祝任何可能觉得这很有用的人好运。:)

我是一名 CS 大学生，我经常和 KACS 一起玩。

最初的处理语言是 Java 的一个子集，但是有一个名为 processing.js 的 javascript 版本。Khan Academy CS 沙箱使用 processing.js 库，但沙箱本身使用普通的旧 javascript - 尽管代码在右侧的输出窗口中呈现之前要经过几个步骤。

换句话说，代码是从左侧的文档编辑器中以文本形式获取的，然后经过仔细考虑并注入到右侧的沙盒运行环境中。沙箱管理环境以组合原生 javascript 和 processing.js 函数的子集（它们本身以 javascript 的形式来自 processing.js 库）。

`random(a, b)`不是`Math.random()`，而是一个 processing.js 辅助函数，它本身用于`Math.random`在 a 和 b 之间给出结果。

还有更多内容（特别是[lint](http://www.javascriptlint.com/)，KACS 运行环境的一些次要技术细节和一些特定于 KACS 环境而不是 processing.js 的一部分的辅助函数），但是如果您想设置自己的沙箱要像 KA 沙箱一样工作，您可以[在此处](https://raw.githubusercontent.com/processing-js/processing-js/v1.4.8/processing.min.js)下载 processing.js 。我在名为 sandbox.html 的纯文本文件中使用以下代码制作了一个快速而肮脏的沙箱。

```
<html><head><script src="processing.min.js"></script></head><body><canvas id="output-canvas"></canvas><script>var sketch = function (processing){with(processing){size(400, 400);background(255);

// example
// fill(255, 0, 0);
// ellipse(0.5*width, 0.5*height, 100, 50);
// your code here

}};var p = new Processing(document.getElementById("output-canvas"), sketch);</script></body></html> 
```

然后将上述文件放在与 processing.min.js 相同的文件夹中，只需在其中输入您的代码`// your code here`，保存并打开文件。

处理函数的完整列表的文档在[这里](http://processingjs.org/reference/)。

享受！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-17T04:08:52.547

可汗学院使用 JavaScript，以及用于绘图的 Processing JS 库。Processing JS 是 Processing 语言的 JavaScript 端口：

> Processing 是一种由 Ben Fry 和 Casey Reas 开发的开放可视化语言，最初由 John Resig 移植到 Javascript。Processing.js 由 Processing.js 团队维护。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-28T21:46:42.267

> > 使用常规 Java Script、Processing Java Script 和一些编辑，可汗学院在那里创建了自己的 Java Script 版本，称为 KAPJS。
> 
> > >

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-23T19:40:58.667

可汗学院的 Javascript 程序使用 processing.js 库。processing.js 包含的函数的完整列表可以在这里找到：http: [//processingjs.org/reference/](http://processingjs.org/reference/)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2017-03-17T03:14:11.133

Khanacademy 使用 PJS（处理 Java 脚本），它是一个 JS 库。

# javascript - 在多个地方放置相同的 html

> ID：15190609
> 
> 赞同：0
> 
> 时间：2013-03-03T20:42:03.440
> 
> 标签：javascript, html, embed, swipe

我正在构建一个 web 应用程序，它在移动浏览器中将包含两个视图（A 和 B），用户可以在它们之间滑动。在较大的屏幕上，两个视图将并排放置。

我正在使用 iosSlider 创建滑动效果。

我想做的是使用一些输出A和B的命令，例如两个函数只输出一个很长的字符串，这样我就可以写类似的东西

```
if mobile:
    <slider-construction>
        <slide1> funk_A() </slide1>
        <slide2> funk_B() </slide2>
    </slider-construction>  
else:
    <div>funk_A()</div>
    <div>funk_B()</div> 
```

我做事是否明智？我意识到另一种方法是使用一些允许我禁用它的滑动脚本，以便幻灯片简单地并排放置（看起来 iosSlider 似乎没有该功能？）。我尝试简单地将 A 和 B 放在单独的 .html 文件中，并使用 embed-command 将它们放在幻灯片中，但这似乎禁用了滑动效果。使用 document.write() 或任何类似的东西（例如幻灯片的 innerHTML）也是相当不切实际的，因为这些函数当时只假设一行代码。

谢谢你 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T20:41:49.060

我找到了 3 种不同的解决方案：

## HTML 解决方案：

### “包含”命令

采用

```
<!--#include virtual="/directory/included.html" --> 
```

并将父文件的结尾更改为**.shtml**。

## iosSLider-解决方案：

### 幻灯片宽度

如果幻灯片的总宽度小于滑块的宽度，则它们将自动彼此相邻放置。这在 iosSlider 附带的基准测试的最后一个示例中得到了证明。

### 销毁方法

也可以简单地禁用滑块，使用调用

```
$(".iosSlider").iosSlider("destroy"); 
```

请注意，此处的“.iosSlider”与用于启动 iosSlider 的定义相同，也就是调用：

```
$('.iosSlider').iosSlider({
                (options)
            }); 
```

在这种情况下，幻灯片将被视为 div（尽管仍具有格式，例如宽度和高度，就像在滑块处于活动状态时应用的那样）。

# android - 从 android 调用 Soap 服务

> ID：15190615
> 
> 赞同：2
> 
> 时间：2013-03-03T20:42:52.157
> 
> 标签：android, ksoap2

我从未见过这种错误，当我发送请求时，我收到了这条消息：

> anyType{SendResultCode=不成功；错误=值不能为空。参数名称：地址；}

我没有任何地址参数。

这是来自java的代码

```
 String methodName = "SendMail";
                        String namespace = "http://www.xxxxxxxx.ge";
                        String soapAction = "http://www.xxxxxxxx.ge/SendMail";
                        String url = "http:///xx.xxx.xx.xxx/SmsService/SmsSendingService.asmx";

                        SoapObject soapObject = new SoapObject(namespace, methodName);
                        soapObject.addProperty("from","someaddress");
                        soapObject.addProperty("to","someaddress");
                        soapObject.addProperty("cc","someaddress");
                        soapObject.addProperty("bcc","someaddress");
                        soapObject.addProperty("subject","Message From App");
                        soapObject.addProperty("replyTo","someaddress");
                        soapObject.addProperty("messageBody","Some text here");
                        soapObject.addProperty("isFormatHtml",true);
                        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11); 
                        envelope.dotNet = true;
                        envelope.setOutputSoapObject(soapObject); 
                        HttpTransportSE conn = new HttpTransportSE(url);
                        conn.call(soapAction, envelope); //send request
                        SoapObject result=(SoapObject)envelope.getResponse(); 
```

**更新**

我发现了我的问题，这有点棘手，

> 字符串soapAction =“ [http://www.xxxxxxxx.ge/SendMail](http://www.xxxxxxxx.ge/SendMail) ”

这个 URL 最后需要 '/'，如下所示：

> 字符串soapAction =“ [http://www.xxxxxxxx.ge/SendMail/](http://www.xxxxxxxx.ge/SendMail/) ”

所以现在一切正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T08:45:32.157

您没有在 SoapObject 中添加 Address 参数

```
 soapObject.addProperty("address","#fdfdsf asdasd asdasds"); 
```

# c# - 将数据从 .txt 保存并加载到正确的 texbox

> ID：15190616
> 
> 赞同：-4
> 
> 时间：2013-03-03T20:43:10.350
> 
> 标签：c#, file, textbox, load, save

我想使用`.txt`文件而不是 XML，并且我想继续使用`WriteAllLineS`/`WriteAllText`和`ReadAllLines`/ `ReadAllText`。我有两个文本框 1 和 2，它们旁边是一个“保存”和“加载”按钮 - 每个文本框一个。

到目前为止，我的代码将数据从第一个盒子复制到第二个盒子。这是清单：

```
public partial class Form1 : Form
{
 string fileName = "Cache/textBoxdata.txt";

    public Form1()
    {
        InitializeComponent();
    }
private void load1_Click_1(object sender, EventArgs e)
    {  
      textBox1.Lines = File.ReadAllLines(fileName);
    }

 private void Save1_Click_1(object sender, EventArgs e)
    {
        File.WriteAllLines(fileName, textBox1.Lines);
     }

private void load2_Click(object sender, EventArgs e)
    {
        textBox2.Lines = File.ReadAllLines(fileName); 
    }

private void save2_Click(object sender, EventArgs e)
    {
        File.WriteAllLines(fileName, textBox2.Lines);
    }
} 
```

我希望能够在两个文本框中写入文本，单击“保存”按钮 - 这应该将输入的文本写入文件。然后，一旦我重新打开应用程序，单击“加载”按钮，我的数据应该从文件中加载并出现在文本框中。

目前我的第一个文本框有效。第二个文本框显示了我在第一个中写的 - 而不是第二个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T23:34:11.540

为什么有两个保存/加载按钮？您的问题是关于一次保存/加载两个文本框。所以每次操作只需要一个按钮。

要将文本框的行保存/加载到您可以使用的文件中/从文件中加载`WriteAllLines`，`ReadAllLines`就像您已经做的那样。由于您只想拥有一个文件，因此您需要知道第一个文本框的行在哪里结束，而第二个文本框的行从哪里开始。最简单的方法是将行数写入文件：

```
private void SaveTextboxes()
{
    List<string> linesToSave = new List<string>();

    linesToSave.Add(textBox1.Lines.Length.ToString());
    linesToSave.AddRange(textBox1.Lines);

    linesToSave.Add(textBox2.Lines.Length.ToString());
    linesToSave.AddRange(textBox2.Lines);

    File.WriteAllLines(filename, linesToSave);
}

private void LoadTextboxes()
{
    string[] loadedLines = File.ReadAllLines(filename);

    int index = 0;

    int n = int.Parse(loadedLines[index]);
    string[] lines = new string[n];
    Array.Copy(loadedLines, index + 1, lines, 0, n);
    textBox1.Lines = lines;

    index += n + 1;

    n = int.Parse(loadedLines[index]);
    lines = new string[n];
    Array.Copy(loadedLines, index + 1, lines, 0, n);
    textBox2.Lines = lines;
} 
```

如果您添加更多文本框，您可以重复此操作以获得所需数量的文本框。构建一个文本框数组并循环遍历它。

如果您真的想为每个文本框设置单独的保存/加载按钮，这可能会更令人困惑，因为您只想覆盖文本的一部分。基本上这意味着在保存时，您首先将整个文件读入两个单独的数组，然后将它们写回，相应的数组被新文本替换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T22:02:00.903

当然，加载后文本框中的文本是否相同-您使用的是相同的文件...

您可以将内容保存到两个不同的文件中，然后它应该可以工作

# javascript - Javascript 正则表达式缺失组

> ID：15190619
> 
> 赞同：1
> 
> 时间：2013-03-03T20:43:29.477
> 
> 标签：javascript, regex

我有这个正则表达式在 Java 环境中按预期工作，但我无法使其在 Javascript 上正常工作：

```
/^(?:select\s+)?(?:([\w\d]+)?\.?([\w\d]+))?(?:\s*\,\s*)?(?:([\w\d]+)?\.?([\w\d]+))?(?:\s*from\s+)([\w\d\.]+)\s*([\w\d]+)?$/g 
```

这个表达式应该匹配这些类型的输入行：

```
select a.id, a.name from public.blah a

select a, a.name from public.blah a

select id, name from blah

a.id, name from brah a

from blah a 
```

对于我期望的群体：

1：第一个投影别名 (a)（如果有）

2：第一个投影属性（id）（如果有）

3：第二个投影别名（a）如果有的话

4：第二个投影属性（名称）（如果有）

5：关系名称（public.blah）

6：关系别名（a）如果有的话

正则表达式在 Javascript 上匹配，但它无法获取组。我必须对此进行一些更改才能使其正常工作。

```
var optionsPattern = /^(?:select\s+)?(?:([\w\d]+)?\.?([\w\d]+))?(?:\s*\,\s*)?(?:([\w\d]+)?\.?([\w\d]+))?(?:\s*from\s+)([\w\d\.]+)\s*([\w\d]+)?$/g;

var text = 'select id, text from options.test';

var match = text.match(optionsPattern);

if(match) {
  alert(match[0]); // select id, text from options.test
  alert(match[1]); // undefined 
} 
```

你们有什么需要改变的线索吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T20:54:17.083

删除`g`标志。它将您的正则表达式从“匹配并返回子模式”更改为“搜索并返回所有匹配项”

# asp.net - Facebook登录按钮没有出现在Firefox中？

> ID：15190621
> 
> 赞同：0
> 
> 时间：2013-03-03T20:43:31.473
> 
> 标签：asp.net, facebook

问题是，如果您使用 google chrome 进入
[http://d4403897.u95.gohsphere.com/login.aspx，Facebook](http://d4403897.u95.gohsphere.com/login.aspx)
登录按钮将会出现，但如果您使用 firefox 进入，它将消失！？
显示此按钮的代码是

```
 <div id="fb-root"></div>
     <div class="fb-login-button" data-show-faces="false" data-width="200" data-max-rows="1"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-16T13:34:29.930

我也遇到了这个问题，firefox中没有显示按钮。

我的解决方案是我删除了所有历史记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T21:01:03.317

尝试一下`<div class="fb-login-button"/>`，看看它是否有效。然后添加每个参数并尝试一下。我刚刚在我的 Firefox 中测试了您的代码，并且没有问题。

# linux - 自安装 Zip 档案（解压后运行应用程序）

> ID：15190625
> 
> 赞同：0
> 
> 时间：2013-03-03T20:43:53.487
> 
> 标签：linux, archive, installation

我正在使用 unzipsfx.exe 和命令创建一个自解压存档：

```
cat unzipsfx.exe archive.zip > Installer.exe 
```

在 Installer.exe 提取内容后，我需要从 archive.zip 执行一个 exe。

需要从安装在 Linux 上的 PHP 执行此操作。

我可以使用 PHP 中的 exec 函数，但需要知道要执行什么。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-03T20:48:28.900

自解压档案是正确的可执行文件，如果你正在创建一个`.exe`文件，它是一个 Windows 可执行文件，你不能在 Linux 下执行它。

（如果有办法执行它[虚拟化、Wine 等]，那么您需要执行可执行文件本身。）

# ios - ipad 弹出文本框以输入

> ID：15190628
> 
> 赞同：0
> 
> 时间：2013-03-03T20:44:01.083
> 
> 标签：ios, ipad, styles, uitextfield, popover

我为 ipad 设计了一个弹出窗口（tableview 样式）。现在就像在 asp.net 中一样，我希望最后有一个选项，这样如果用户单击它，他就可以在其中输入值。可以吗？如果可以怎么办？我玩过 tableviewcellstyles 并得到了一个文本框，但适用于所有选项。如果有人做过，你能给我一些想法吗？谢谢。

编辑：我应该提到我正在使用 Monodevelop 开发这个应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T21:45:05.820

一种方法，假设您使用 Storyboard 创建视图和设置属性：

在您的 UITableView 对象属性中，将“内容”属性设置为“动态原型”。

然后从情节提要编辑器的 UI 对象列表中向您的表格添加一个额外的表格视图单元格（就像添加另一个标签或按钮或其他任何内容一样）。

现在，您的表格视图中应该有两个 TableViewCell 对象。如果没有，请添加另一个。

为两个表格视图单元格对象提供不同的标识符（即，将每个单元格对象的属性“标识符”设置为不同的字符串）。

设置第一个单元格以显示您的正常内容。

设置第二个单元格以显示您独特的“最后一行”布局。

在您的代码中，在 cellForRowAtIndexPath 中返回大多数行的“主”单元格，但最后一行的备用单元格：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    // rows are 0-indexed
    if (indexPath.row == myDataSource.count) {

        NSString *CellIdentifier = @"AlternateCell";

        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

        // populate contents...
    }
    else {

        NSString *CellIdentifier = @"NormalRow";

        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

        // populate contents...
    }
} 
```

为此，您必须告诉 TableView 比您的实际数据多一行：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return myDataSource.count +1;
} 
```

# python - NameError：名称“现在”未定义

> ID：15190632
> 
> 赞同：3
> 
> 时间：2013-03-03T20:44:08.510
> 
> 标签：python, nameerror

从这个源代码：

```
def numVowels(string):
    string = string.lower()
    count = 0
    for i in range(len(string)):
        if string[i] == "a" or string[i] == "e" or string[i] == "i" or \
            string[i] == "o" or string[i] == "u":
            count += 1
    return count

print ("Enter a statement: ")
strng = input()
print ("The number of vowels is: " + str(numVowels(strng)) + ".") 
```

运行时出现以下错误：

```
Enter a statement:
now

Traceback (most recent call last):
  File "C:\Users\stevengfowler\exercise.py", line 11, in <module>
    strng = input()
  File "<string>", line 1, in <module>
NameError: name 'now' is not defined

================================================== 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-03T20:45:28.320

使用[`raw_input()`](http://docs.python.org/2/library/functions.html#raw_input)而不是[`input()`](http://docs.python.org/2/library/functions.html#input).

在 Python 2 中，后者尝试[`eval()`](http://docs.python.org/2/library/functions.html#eval)输入，这就是导致异常的原因。

在 Python 3 中，没有`raw_input()`; `input()`会工作得很好（它没有`eval()`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T20:54:29.563

用于`raw_input()`python2 和`input()`python3。在python2中，`input()`和说的一样`eval(raw_input())`

如果您在命令行上运行它，请尝试`$python3 file.py`而不是`$python file.py` 另外在此`for i in range(len(strong)):`我相信`strong`应该说`string`

但是这段代码可以简化很多

```
def num_vowels(string):
    s = s.lower()
    count = 0
    for c in s: # for each character in the string (rather than indexing)
        if c in ('a', 'e', 'i', 'o', 'u'):
            # if the character is in the set of vowels (rather than a bunch
            # of 'or's)
            count += 1
    return count

strng = input("Enter a statement:")
print("The number of vowels is:", num_vowels(strng), ".") 
```

将 '+' 替换为 ',' 意味着您不必将函数的返回显式转换为字符串

如果您更喜欢使用 python2，请将底部更改为：

```
strng = raw_input("Enter a statement: ")
print "The number of vowels is:", num_vowels(strng), "." 
```

# asp.net - MVC3 + MongoDB 架构：将模型直接存储到数据库？

> ID：15190633
> 
> 赞同：0
> 
> 时间：2013-03-03T20:44:09.850
> 
> 标签：asp.net, asp.net-mvc-3, mongodb, model, viewmodel

我目前正在使用 mongodb 开发一个 mvc3 应用程序。我很不确定我将如何构建架构。例如，我的应用程序有一个页面用于管理注册用户的用户配置文件（如姓名、电子邮件、枚举组合框内公开的一些属性）。因此，我有一个包含所有要管理的属性的 ManageProfileModel.cs。将数据与 mongodb 一起使用的正确方法是什么？我应该将 ManageProfileModel 数据存储在 mongodb 中，还是必须添加一个包含域类（如 User.cs、Invoice.cs 等）的附加层，并将这些对象存储在 mongodb 中（这些对象正在创建的模型中使用）？

我问是因为管理用户配置文件的模型不一定类似于用户（域）对象。我的第一种方法是将我的（视图）模型直接存储在 mongodb 中。我不确定以后获取我的（一致的）数据是否那么容易。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T22:25:01.077

对于您的大部分数据，我会将模型直接存储在 Mongo 中。我相信您已经知道这一点，但 Mongo 专注于非规范化，因此它不同于希望您对数据进行规范化的传统关系数据库。

因此，对于配置文件，您可能有一个用户、一组发票、一组地址等。当您决定数据模型时，我会建议以下内容：

1.  考虑你的用户界面。如果您需要用户 + 个人资料 + 发票，请继续制作这样的文件。让你的生活轻松很多。
2.  不要害怕存储重复的信息。
3.  您会经常想知道是否应该嵌入文档（向用户添加地址）或链接到文档（将引用列表放入引用发票的数组中）。我听说的一条我认为很好的规则：如果数据不断变化，请建立链接/参考。如果它是不可变的或缓慢变化的，则嵌入它。
4.  如果您的文档会随着时间的推移而增长很多，请考虑将其拆分。如果文档变得太大，Mongo 必须将您的文档移动到内存中。

# c++ - 优化弱符号查找

> ID：15190634
> 
> 赞同：1
> 
> 时间：2013-03-03T20:44:19.213
> 
> 标签：c++, linux, gcc, llvm, binutils

如果您曾经尝试在任何 C++ 程序上使用*nm*实用程序，您可能已经注意到许多符号被标识为“V”或“W”。两者都是不同类型的*弱*符号。

现在，在可执行文件中包含大量弱符号是不好的，因为在运行时动态链接器会尝试将它们全部解析。我在想，通过在链接可执行文件时强制执行一个简单的约定，可以节省大量时间：

*   每当在可执行文件中创建弱符号时，如果此类符号具有默认值，则将其提升为常规符号。

这个 hack 对我来说似乎很安全，因为：

*   如果任何库定义了同名的弱符号，它将被提升的符号覆盖，这很好，因为对于弱符号，我们可以自由选择任何定义
*   如果没有库实际上定义了这样的符号......没有什么特别的事情发生
*   如果库定义了可执行文件中未定义的弱符号，则一切正常。

在我尝试与 binutils 开发人员讨论这个问题之前，我是否遗漏了一个巨大的错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T00:15:23.213

我没有看到任何可以阻止您所描述的工作的东西。

然而，我确实想知道这是否值得做。而且我很确定您的“binutils 开发人员”也会对此感到疑惑。

所以我建议你看几件事：在典型情况下，在可执行文件和动态库中定义相同符号的频率是多少？

由于很可能仍然存在大量未在可执行文件中定义的弱符号，因此您实际上节省了多少时间？

现有程序的一些改进示例或至少是“对于应用程序 X，平均花费大量时间查找弱符号，这就是潜在收益？”的答案。

这就是我作为 binutils 开发人员所要寻找的 [我不是其中之一，但如果我是的话]。

# c - 我如何使用 gdb 来了解数组中插槽的大小？

> ID：15190640
> 
> 赞同：0
> 
> 时间：2013-03-03T20:44:54.210
> 
> 标签：c, gdb

我正在查看一些 C 代码，其中包含程序中其他函数的名称数组。

```
myTypeDef myArrayName[3]={funcOne, funcTwo, funcThree}; 
```

如何使用 GDB 了解数组中每个插槽的字节数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T20:46:14.520

你不需要`gdb`找出来，编译器一直都知道。数组的每个“槽”都是`sizeof(myTypeDef)`字节。

# jquery - ajax请求后jQuery .submit（）不起作用

> ID：15190641
> 
> 赞同：0
> 
> 时间：2013-03-03T20:44:56.447
> 
> 标签：jquery, ajax, forms, request, submit

如果条件为真，我想提交表单。我尝试使用 firebug，但没有提交任何表单。我不知道为什么。

```
function test(){
   $.post('verify.php', { myID : '15' },
   function(data){
      if(data != 'OK') alert('WRONG !');
      else $('#my_form').submit();
   });
} 
```

条件已验证，但未提交表单“my_form”。firebug 控制台中没有错误。

**编辑：**

```
<form action='' method='post' id='my_form'>
   <input type='text' name='abc' />
   <input type='button' name='submit' value='Submit' onClick='test();' />
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T21:00:59.237

```
event.preventDefault() 
```

和

```
action="#" 
```

可能是你错过了什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T21:01:03.987

当对您的 verify.php 的 POST 请求不成功时（不是 200 HTTP 响应代码，以及类似 404 的内容），函数中的代码不会执行。如果 POST 到 verify.php 成功（200 代码），那么问题出在应用程序的另一部分：`$('#my_form').submit()` 如果表单存在并且可以，无论如何都应该工作。但是，你的表格不行！'action' 属性不应为空。尝试设置 action='#'。

# javascript - 更新前等待输入

> ID：15190643
> 
> 赞同：0
> 
> 时间：2013-03-03T20:44:57.697
> 
> 标签：javascript, jquery

我正在使用这个可以正常工作的卡验证器脚本：

```
$('#card-number').validateCreditCard(function (result) {
    if(!(result.card_type != null)) {
        $('.card-issuer li').removeClass('selected');
        $('#card-number').removeClass('valid invalid');
        return;
    }
    $('.card-issuer li').removeClass('selected');
    $('.card-issuer li.' + result.card_type.name).addClass('selected');

    //----------- Field to identify Card Type ------------//
    $("#hdnCardType").val(result.card_type.name);

    if(result.length_valid && result.luhn_valid) {
        return $('.card-number').removeClass('invalid').addClass('valid');
    } else {
        $('.card-issuer li').removeClass('selected');
        return $('.card-number').removeClass('valid').addClass('invalid');
    }
}); 
```

..但它甚至在用户输入 16 位数字之前添加了无效类，我可以让它等到用户输入至少 14 位数字吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T20:55:13.910

我假设您每次用户键入新字符时都会调用 validateCreditCard 函数？如果是这种情况，请在至少有 14 个字符之前不要检查它。

```
} else {
       if (document.getElementsByClassName('.card-number')[0].value.length >= 14) {
            $('.card-issuer li').removeClass('selected');
            return $('.card-number').removeClass('valid').addClass('invalid');
       }
} 
```

# android - 无法同时与 PopupWindow 和背景交互（GoogleMap）

> ID：15190644
> 
> 赞同：5
> 
> 时间：2013-03-03T20:44:59.023
> 
> 标签：android, android-widget, popupwindow, google-maps-android-api-2

我有一个 PopupWindow，当我单击地图标记时会显示。PopupWindow 允许用户更改标记的位置并选择它周围的半径。如果我将 focusable 设置为 true，我可以与 PopupWindow 交互，但不能与地图交互。而且，如果我将 focusable 设置为 false，奇怪的是，我可以在 PopupWindow 上与 SeekBar 交互，但按钮和 EditText 都没有响应，但我可以与地图交互。

**问题**：我怎样才能使用户可以同时与 PopupWindow 和地图进行交互？

```
 <LinearLayout android:layout_width="0dp" 
            android:layout_height="wrap_content" 
            android:layout_weight="1" 
            android:orientation="vertical">

            <TextView android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/event" 
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <EditText android:id="@+id/markerEventNameEditText"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:ems="10"
                android:hint="@string/your_event_name"
                android:inputType="text" />

            <LinearLayout android:layout_width="match_parent"
                android:layout_height="wrap_content">

                <TextView android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="@string/radius"
                    android:textAppearance="?android:attr/textAppearanceMedium" />

                <TextView android:id="@+id/radiusTextView"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:textAppearance="?android:attr/textAppearanceSmall" />
            </LinearLayout>

            <SeekBar android:id="@+id/radiusSeekBar"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginBottom="10dp" />

            <LinearLayout android:layout_width="match_parent"
                android:layout_height="wrap_content">

                <Button android:id="@+id/editEventButton"
                    android:layout_width="0px"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:text="@string/edit_event" />

                <Button android:id="@+id/cancelMarkerWindowButton"
                    android:layout_width="0px"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:text="@string/close" />
            </LinearLayout>
        </LinearLayout>

        <TableLayout android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical">

            <TableRow android:layout_width="wrap_content" 
                android:layout_height="wrap_content" 
                android:gravity="center">

                <ImageButton android:id="@+id/ImageButton03"
                    android:layout_width="50dp"
                    android:layout_height="50dp"
                    android:layout_gravity="center"
                    android:src="@drawable/arrow_1" />
            </TableRow>

            <TableRow android:layout_width="wrap_content"
                android:layout_height="wrap_content">

                <ImageButton android:id="@+id/ImageButton01"
                    android:layout_width="50dp"
                    android:layout_height="50dp"
                    android:src="@drawable/arrow_1"/>

                <ImageButton android:id="@+id/ImageButton02"
                    android:layout_width="50dp"
                    android:layout_height="50dp"
                    android:src="@drawable/arrow_1"/>
            </TableRow>

            <TableRow android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:gravity="center">

                <ImageButton android:id="@+id/imageButton1"
                    android:layout_width="50dp"
                    android:layout_height="50dp"
                    android:src="@drawable/arrow_1" />
            </TableRow>
        </TableLayout>
    </LinearLayout>
    <View android:layout_width="match_parent"
        android:layout_height="3dp"
        android:background="@color/WhiteSmoke" /> 
```

```
 //Constructor
    public MarkerPopupWindow(Marker edited_event_marker,Context context)
    {   
        LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View markerWindowView = inflater.inflate(R.layout.event_editor_popup_window, null, false);
        markerWindowView.findViewById(R.id.cancelMarkerWindowButton);

        int height =  ViewGroup.LayoutParams.WRAP_CONTENT;
        int width = ViewGroup.LayoutParams.MATCH_PARENT;
        PopupWindow markerWindow = new PopupWindow(markerWindowView,
                width,height,
                false); //Focusable, if false window cannot be touched.
        markerWindow.setWindowLayoutMode(width, height);
        //Called these methods (commented out) attempting to fix the problem without success.
        //markerWindow.setInputMethodMode(PopupWindow.INPUT_METHOD_NEEDED);
        //markerWindow.setSoftInputMode(PopupWindow.INPUT_METHOD_NEEDED);
        //markerWindow.setOutsideTouchable(true);
        markerWindow.showAtLocation(findViewById(R.id.location_tab_container), Gravity.TOP, 0, 0);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:29:59.070

您对弹出窗口的处理方式是地图或弹出窗口都可以具有焦点，如果您希望能够在弹出窗口打开的情况下移动地图，我认为您可能需要从地图 api 弹出窗口，就像这样当您单击标记时，谷歌地图会显示。

有关弹出窗口（在地图 api 中称为 InfoWindow）的更多信息，您可以转到[此处](https://developers.google.com/maps/documentation/android/marker#info_windows)

# ios - 将弧存储在变量中

> ID：15190645
> 
> 赞同：1
> 
> 时间：2013-03-03T20:45:02.267
> 
> 标签：ios, quartz-graphics

我有几个弧线（圆圈），我想将它们存储在一个变量中。一个矩形可以这样存储：

```
CGRect rect = CGRectMake(float x, float y, width, height); 
```

它们是否以类似的方式存储弧或路径所需的信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T20:52:15.497

使用 UIBezierPath。

从文档中：

> 路径可以定义简单的形状，例如矩形、椭圆形和圆弧，也可以定义包含直线段和曲线段混合的复杂多边形。

例如，您可以通过执行以下操作绘制一个椭圆：

```
- (void)drawRect:(CGRect)rect
{
    UIBezierPath* path = [UIBezierPath bezierPathWithOvalInRect:rect];

    [path stroke];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-01T21:13:38.640

在大多数情况下，快速/轻松的方式是创建一个`CGPath`表示弧的方法（另请参阅`CGMutablePath`）。然后，您可以将路径绘制到`CGContext`.

或者，您可以打包您将传递给的参数`CGContextAddArc`。例如：

```
@interface MONArc : NSObject

@interface (nonatomic, assign, readwrite) CGFloat x;
@interface (nonatomic, assign, readwrite) CGFloat y;
@interface (nonatomic, assign, readwrite) CGFloat radius;
@interface (nonatomic, assign, readwrite) CGFloat startAngle;
@interface (nonatomic, assign, readwrite) CGFloat endAngle;
@interface (nonatomic, assign, readwrite) int clockwise;

@end 
```

然后将其中的一些保存在一个中`NSArray`，并在渲染时按顺序应用它们。

# java - 在 Sun Application Server PE 8（大约 2005 年）上部署 {EAR, WAR} Web 应用程序？

> ID：15190648
> 
> 赞同：5
> 
> 时间：2013-03-03T20:45:38.623
> 
> 标签：java, deployment, ejb, war, ear

tl;dr：**如果这是 2005 年，您将如何部署 Web 应用程序？**

在过去的 4-5 周里，我一直在尝试使用 Sun Application Server PE 8、J2SE 1.4.2 和我教授 2005 年的论文作为参考文档来部署一个基本的 {EAR, WAR}。

鉴于我正在开发的软件的年龄，所有相关的参考文档都已从 Internet 上删除（看起来如此）。作为使用 EJB 3.0 开发的程序员（我使用的是 EJB 2.1），您将如何部署使用以下内容的应用程序：

*   J2SE 1.4.2
*   EJB 2.1
*   Sun 应用服务器 PE 8
*   Sun 部署工具
*   JSP + servlet
*   记事本（不允许使用 IDE）

我已经在 StackOverflow 上询问了至少 4 个其他问题，试图深入了解在 Sun Application Server PE 8 中部署类似“Hello World”Web 应用程序的问题，但无济于事。有没有人随意猜测我应该在这里做什么？

菜单选项（新）：

*   应用
*   应用程序客户端
*   连接器资源适配器
*   企业豆
*   网页组件
*   网络服务

菜单选项（添加到应用程序）：

*   应用程序客户端 JAR
*   企业 JavaBean JAR
*   网络应用战争
*   连接器资源适配器 RAR

**我的错误逻辑**

*   创建 EAR 应用程序
*   创建 EJB
*   将 Foo.class、FooBean.class、FooHome.class 添加到 EAR 应用程序
*   创建 "X" 将 FooServlet.class、FooClient.jsp (?) 添加到 "X"

但是，显然这是不正确的。**如果这是 2005 年，您将如何部署 Web 应用程序？**

遵守我的课程要求我是个傻瓜，但如果这是 2005 年......你将如何部署 Web 应用程序？我应该只使用Wayback Machine吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T10:13:27.377

[这是](http://futureboy.us/ape/J2EE1.4/docs/QuickStart.html#wp83916)[快速入门指南](http://futureboy.us/ape/J2EE1.4/docs/QuickStart.html)中打包和部署 hello world 应用程序的示例。

> ## 打包和部署应用程序
> 
> 本节提供有关在 Application Server 软件中打包和部署应用程序的信息。

# arrays - 从随机生成的数组中打印出单个值

> ID：15190650
> 
> 赞同：0
> 
> 时间：2013-03-03T20:45:41.823
> 
> 标签：arrays, output

对于这个任务，我们需要让一个人输入人数和年数。然后程序从一个数组中获取随机数，然后给出一堆不同的信息。到目前为止，我设法做的是：
import java.util.Scanner; 导入 java.util.Random；

公共类实习工资{

```
/**
 * @param args
 */
public static void main(String[] args) {
    // TODO Auto-generated method stub

    Scanner s = new Scanner (System.in);
    Random myRandom = new Random();

    int value = myRandom.nextInt(19000) + 1000;
    int years = 0;
    int people = 0;
    int total = 0;
    int average = 0;

    System.out.println("Enter number of people for which you have salary information");
    people = s.nextInt();
    System.out.println("Enter number of years for which you have salary information");
    years = s.nextInt();

    int [][] salaries = new int [people][years];

    for (int i=0; i<people; i++) {
        for (int j=0; j <years; j++)
            salaries[i][j] = myRandom.nextInt (19000)+1000;
        }

    for (int i = 0; i < people; i++) {
        total = 0;
           for(int j = 0; j < years; j++) {
               total += salaries[i][j];

        }

           System.out.println(total/years);
           System.out.println(total);

    }
} 
```

}
这给出了一个人每年的平均收入，然后是他们的总收入。它仍然没有格式化，但我稍后会这样做。我想不通的是如何输出一个人每年赚了多少，这些数字加在一起得到一个人的总收入。任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T21:05:09.540

在本节中，您需要打印出每个薪水。如果您考虑一下，您将每年的工资加到总数中。那么为什么不使用您需要的任何格式将其打印出来。

```
for(int j = 0; j < years; j++) {
           total += salaries[i][j];
           //add this line
           System.out.println(salaries[i][j]);
    } 
```

# c# - 如何从 SQL Server 数据库中删除表行？

> ID：15190651
> 
> 赞同：0
> 
> 时间：2013-03-03T20:45:47.970
> 
> 标签：c#, sql, .net, sql-delete

我在尝试删除行时遇到问题。

所有行都被选中并显示在`ListBox`控件上。
然后，当调用`btnObrisi_Click`事件（Obrisi = delete）时，从 中选择的项目`ListBox`将被删除。

该项目实际上已从控件中删除，但该值并未从数据库中删除。

这是我正在使用的代码：

```
private string conString = @"Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\Database1.mdf;Integrated Security=True;User Instance=True";
private SqlConnection con;
private SqlCommand com;
private DataTable dt;
private SqlDataAdapter da;

private DataTable SelectAll()
{
    con = new SqlConnection(conString);
    com = new SqlCommand();
    dt = new DataTable();
    da = new SqlDataAdapter();

    com.Connection = con;
    com.CommandType = CommandType.Text;
    com.CommandText = "SELECT * FROM predmeti";
    da.SelectCommand = com;
    da.Fill(dt);

    return dt;
}

private void Obrisi(int id)
{
    con = new SqlConnection(conString);
    com = new SqlCommand();
    com.Connection = con;
    com.CommandType = CommandType.Text;
    com.CommandText = "DELETE FROM predmeti WHERE predmetID = @predmetID";
    com.Parameters.AddWithValue("@predmetID", id);

    try
    {
        con.Open();
        com.ExecuteNonQuery();
         MessageBox.Show("Obrisano");
    }
    catch(Exception ex)
    {
         MessageBox.Show(ex.Message);
    }
    finally
    {
         con.Close();
    }
}

private void Citaj()
{
    listBox1.ValueMember = "predmetID";
    listBox1.DisplayMember = "ime_predmeta";
    listBox1.DataSource = SelectAll();
}

private void btnOsvezi_Click(object sender, EventArgs e)
{
    Citaj();
}

private void Form1_Load(object sender, EventArgs e)
{
    Citaj();
}

private void btnObrisi_Click(object sender, EventArgs e)
{
    int id = Convert.ToInt32(listBox1.SelectedValue);
    Obrisi(id);
    Citaj();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T21:01:54.040

当您的项目中有数据库文件然后构建项目时，可以将数据库文件从根项目文件夹复制到输出（bin\debug 或 bin\release）文件夹。
此行为由`Copy To Output Directory`数据库文件上的属性控制。

如果您将此属性设置为始终复制，则每次构建项目时，都会将数据库文件的新副本从根项目文件夹复制到输出目录，覆盖已经存在的目录并破坏您在之前所做的更改调试会话。

建议的解决方法是将此属性更改为`Copy Never`或`Copy if Newer`

[在此页面上查看 MSDN 上](http://msdn.microsoft.com/en-us/library/ms246989.aspx)的详细说明

连接字符串中的快捷方式`|DataDirectory|`（对于 winforms 项目）指向当前项目的 bin\debug 或 bin\release 相关子文件夹，您的程序所做的任何更改都适用于位于那里的数据库，但这些更改会在下一次被覆盖跑

# fold - coq 中归纳数据类型的广义折叠

> ID：15190654
> 
> 赞同：5
> 
> 时间：2013-03-03T20:45:57.097
> 
> 标签：fold, coq

我发现自己一遍又一遍地重复一个模式，我想把它抽象出来。我相当有信心 coq 具有足够的表现力来捕捉模式，但我在弄清楚如何做到这一点时遇到了一些麻烦。我正在定义一种编程语言，它具有表示句法术语的相互递归归纳数据类型：

```
Inductive Expr : Set :=
  | eLambda  (x:TermVar) (e:Expr)
  | eVar     (x:TermVar)
  | eAscribe (e:Expr)  (t:IFType)
  | ePlus    (e1:Expr) (e2:Expr)

  | ... many other forms ...

with DType : Set :=
  | tArrow (x:TermVar) (t:DType) (c:Constraint) (t':DType)
  | tInt

  | ... many other forms ...

with Constraint : Set :=
  | cEq (e1:Expr) (e2:Expr)
  | ... 
```

现在，我需要为这些类型定义许多函数。例如，我想要一个查找所有自由变量的函数，一个执行替换的函数，以及一个提取所有约束集的函数。这些函数都具有以下形式：

```
Fixpoint doExpr (e:Expr) := match e with
  (* one or two Interesting cases *)
  | ...

  (* lots and lots of boring cases,
  ** all of which just recurse on the subterms
  ** and then combine the results in the same way
  *)
  | ....

with doIFType (t:IFType) := match t with
  (* same structure as above *)

with doConstraint (c:Constraint) := match c with
  (* ditto *) 
```

例如，要查找自由变量，我需要在变量案例和绑定案例中做一些有趣的事情，但对于其他所有事情，我只是递归地找到子表达式的所有自由变量，然后将这些列表合并在一起。对于生成所有约束列表的函数也是如此。替换情况有点棘手，因为三个函数的结果类型不同，用于组合子表达式的构造函数也不同：

```
Variable x:TermVar, v:Expr.
Fixpoint substInExpr (e:Expr) : **Expr** := match e with
  (* interesting cases *)
  | eLambda y e' =>
      if x = y then eLambda y e' else eLambda y (substInExpr e')
  | eVar y =>
      if x = y then v else y

  (* boring cases *)
  | eAscribe e' t  => **eAscribe** (substInExpr e') (substInType t)
  | ePlus    e1 e2 => **ePlus**    (substInExpr e1) (substInExpr e2)
  | ...

with substInType       (t:Type)       : **Type** := match t with ...
with substInConstraint (c:Constraint) : **Constraint** := ...
. 
```

编写这些函数既乏味又容易出错，因为我必须为每个函数写出所有不感兴趣的情况，并且我需要确保对所有子项进行递归。我想写的是如下内容：

```
Fixpoint freeVars X:syntax := match X with
  | syntaxExpr eVar    x         => [x]
  | syntaxExpr eLambda x e       => remove x  (freeVars e)
  | syntaxType tArrow  x t1 c t2 => remove x  (freeVars t1)++(freeVars c)++(freeVars t2)
  | _          _       args      => fold (++) (map freeVars args)
end.

Variable x:TermVar, v:Expr.
Fixpoint subst X:syntax := match X with
  | syntaxExpr eVar y      => if y = x then v else eVar y
  | syntaxExpr eLambda y e => eLambda y (if y = x then e else (subst e))
  | syntaxType tArrow ...

  | _ cons args => cons (map subst args)
end. 
```

这个想法的关键是能够通常将构造函数应用于一定数量的参数，并拥有某种保留参数类型和数量的“映射”。

显然这个伪代码不起作用，因为 _ 的情况是不正确的。所以我的问题是，是否可以编写以这种方式组织的代码，还是我注定只能手动列出所有无聊的案例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T01:44:38.317

这是一种方法，但它并没有给出非常易读的代码：使用策略。

假设我有一种具有许多不同数量的构造函数的语言，并且我只想将特定目标应用于构造函数 aaa 给出的情况，并且我想遍历所有其他构造函数，以深入了解可能出现在下面的 aaa他们。我可以执行以下操作：

假设你想定义一个函数 A -> B（A 是语言的类型），你需要跟踪你所处的情况，所以你应该在 A 上定义一个幻像类型，减少到 B。

```
Definition phant (x : A) : Type := B. 
```

我想联合函数的类型是 B -> B -> B 并且你在 B 中有一个默认值，称为 empty_B

```
Ltac generic_process f acc :=
  match goal with
    |- context [phan (aaa _)] => (* assume aaa has arith 1 *)
       intros val_of_aaa_component; exact process_this_value val_of_aaa_component
  | |- _ =>
  (* This should be used when the next argument of the current
     constructor is in type A, you want to process recursively
     down this argument, using the function f, and keep this result
     in the accumulator. *)
     let v := fresh "val_in_A" in
     intros v; generic_process f (union acc (f v))
     (* This clause will fail if val_in_A is not in type A *)
  | |- _ => let v := fresh "val_not_in_A" in
    (* This should be used when the next argument of the current
       constructor is not in type A, you want to ignore it *)
       intros v; generic_process f acc
  | |- phant _ =>
    (* this rule should be used at the end, when all
       the arguments of the constructor have been used. *)
    exact acc
  end. 
```

现在，您通过证明来定义函数。假设该函数称为 process_aaa。

```
Definition process_aaa (x : A) : phant x.
fix process_aaa 1.
  (* This adds process_add : forall x:A, phant x. in the context. *)
intros x; case x; generic_process process_aaa empty_B.
Defined. 
```

请注意，generic_process 的定义仅按名称提及了一个构造函数 aaa，所有其他构造函数都以系统的方式处理。我们使用类型信息来检测我们想要在其中执行递归下降的那些子组件。如果您有多个相互归纳的类型，您可以向 generic_process 函数添加参数，以指示哪个函数将用于每种类型并具有更多子句，每个子句用于每种类型的每个参数。

这是对这个想法的测试，其中语言有 4 个构造函数，要处理的值是出现在构造函数中的值，`var`并且类型 nat 也用于另一个构造函数（`c2`）。我们使用自然数列表的类型作为类型`B`，`nil`当遇到变量时使用空列表和单例列表作为结果。该函数收集所有出现的`var`.

```
Require Import List.

Inductive expr : Type :=
  var : nat -> expr
| c1 : expr -> expr -> expr -> expr
| c2 : expr -> nat -> expr
| c3 : expr -> expr -> expr
| c4 : expr -> expr -> expr
.

Definition phant (x : expr) : Type := list nat.

Definition union := (@List.app nat).

Ltac generic_process f acc := 
  match goal with
  |- context[phant (var _)] => exact (fun y => y::nil)
  | |- _ => let v := fresh "val_in_expr" in
        intros v; generic_process f (union acc (f v))
  | |- _ => let v := fresh "val_not_in_expr" in
        intros v; generic_process f acc
  | |-  phant _ => exact acc
  end.

Definition collect_vars : forall x : expr, phant x.
fix collect_vars 1.
intros x; case x; generic_process collect_vars (@nil nat).
Defined.

Compute collect_vars (c1 (var 0) (c2 (var 4) 1)
         (c3 (var 2) (var 3))). 
```

`var`最后一个计算返回一个包含值 0 4 2 和 3 的列表，如预期的那样，但不是 1，这在构造函数中没有发生。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-04T03:05:42.927

这是另一种方式，虽然它不是每个人的一杯茶。

这个想法是将递归从类型和评估器中移出，改为参数化它，并将表达式值转换为折叠。这在某些方面提供了便利，但在其他方面提供了更多的努力——这实际上是一个你最终花费最多时间的问题。好的方面是评估器可以很容易编写，并且您不必处理相互递归的定义。然而，一些在其他方面更简单的事情可能会成为这种风格的脑筋急转弯。

```
Require Import Ssreflect.ssreflect.
Require Import Ssreflect.ssrbool.
Require Import Ssreflect.eqtype.
Require Import Ssreflect.seq.
Require Import Ssreflect.ssrnat.

Inductive ExprF (d : (Type -> Type) -> Type -> Type)
                (c : Type -> Type) (e : Type) : Type :=
  | eLambda  (x:nat) (e':e)
  | eVar     (x:nat)
  | eAscribe (e':e)  (t:d c e)
  | ePlus    (e1:e) (e2:e).

Inductive DTypeF (c : Type -> Type) (e : Type) : Type :=
  | tArrow (x:nat) (t:e) (c':c e) (t':e)
  | tInt.

Inductive ConstraintF (e : Type) : Type :=
  | cEq (e1:e) (e2:e).

Definition Mu (f : Type -> Type) := forall a, (f a -> a) -> a.

Definition Constraint := Mu ConstraintF.
Definition DType      := Mu (DTypeF ConstraintF).
Definition Expr       := Mu (ExprF DTypeF ConstraintF).

Definition substInExpr (x:nat) (v:Expr) (e':Expr) : Expr := fun a phi =>
  e' a (fun e => match e return a with
    (* interesting cases *)
    | eLambda y e' =>
        if (x == y) then e' else phi e
    | eVar y =>
        if (x == y) then v _ phi else phi e

    (* boring cases *)
    | _ => phi e
    end).

Definition varNum (x:ExprF DTypeF ConstraintF nat) : nat :=
  match x with
  | eLambda _ e => e
  | eVar y => y
  | _ => 0
  end.

Compute (substInExpr 2 (fun a psi => psi (eVar _ _ _ 3))
                     (fun _ phi =>
                        phi (eLambda _ _ _ 1 (phi (eVar _ _ _ 2)))))
        nat varNum.

Compute (substInExpr 1 (fun a psi => psi (eVar _ _ _ 3))
                     (fun _ phi =>
                        phi (eLambda _ _ _ 1 (phi (eVar _ _ _ 2)))))
        nat varNum. 
```

# java - 从 Unicode 字符串中删除重音的简单方法？

> ID：15190656
> 
> 赞同：85
> 
> 时间：2013-03-03T20:46:10.283
> 
> 标签：java, string, unicode, diacritics

我想改变这句话：

> Etça sera sa moitié。

到 ：

> Et ca sera sa moitie。

有没有一种简单的方法可以在 Java 中做到这一点，就像我在 Objective-C 中所做的那样？

```
NSString *str = @"Et ça sera sa moitié.";
NSData *data = [str dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];
NSString *newStr = [[NSString alloc] initWithData:data encoding:NSASCIIStringEncoding]; 
```

* * *

## 回答 #1

> 赞同：165
> 
> 时间：2013-03-03T20:58:52.087

最后，我通过使用`Normalizer`该类解决了它。

```
import java.text.Normalizer;

public static String stripAccents(String s) 
{
    s = Normalizer.normalize(s, Normalizer.Form.NFD);
    s = s.replaceAll("[\\p{InCombiningDiacriticalMarks}]", "");
    return s;
} 
```

* * *

## 回答 #2

> 赞同：111
> 
> 时间：2013-03-03T21:23:49.940

也许最简单和最安全的方法是使用`StringUtils`Apache [Commons Lang](http://commons.apache.org/proper/commons-lang)

```
StringUtils.stripAccents(String input) 
```

> 从字符串中删除变音符号（~= 重音符号）。案件不会改变。例如，“à”将被“a”替换。请注意，连字将保持原样。

字符串实用程序。[带重音（）](http://commons.apache.org/proper/commons-lang//apidocs/org/apache/commons/lang3/StringUtils.html#stripAccents%28java.lang.String%29%60)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-04-08T13:09:40.333

我想唯一的区别是我使用 a`+`而不是 a`[]`与解决方案相比。我认为两者都有效，但最好在这里也有它。

```
String normalized = Normalizer.normalize(input, Normalizer.Form.NFD);
String accentRemoved = normalized.replaceAll("\\p{InCombiningDiacriticalMarks}+", ""); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-03-20T13:03:48.997

对于科特林

```
fun stripAccents(s: String): String 
{
    var string = Normalizer.normalize(s, Normalizer.Form.NFD)
    string = Regex("\\p{InCombiningDiacriticalMarks}+").replace(string, "")
    return  string
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-03-03T20:59:59.100

假设您使用的是 Java 6 或更新版本，您可能想看看[`Normalizer`](http://docs.oracle.com/javase/7/docs/api/java/text/Normalizer.html)，它可以分解重音，然后使用正则表达式去除组合重音。

否则，您应该能够使用[`ICU4J`](http://icu-project.org/apiref/icu4j/com/ibm/icu/text/Normalizer.html).

* * *

## 回答 #6

> 赞同：-5
> 
> 时间：2014-12-25T07:54:48.947

谢谢你

```
public static final Pattern DIACRITICS_AND_FRIENDS = Pattern.compile(
                              "[\\p{InCombiningDiacriticalMarks}\\p{IsLm}\\p{IsSk}]+");

private static String stripDiacritics(String str) {
    str = Normalizer.normalize(str, Normalizer.Form.NFD);
    str = DIACRITICS_AND_FRIENDS.matcher(str).replaceAll("");
    return str;
} 
```

=> stripDiacritics("Et Ça sera sa moitié." );

# java - 将表面拟合到java中的3D数据点集合

> ID：15190657
> 
> 赞同：3
> 
> 时间：2013-03-03T20:46:11.503
> 
> 标签：java, 3d, regression, geometry-surface, best-fit-curve

嗨，我有一堆 XYZ 数据点。我想估计一个最适合这些点的表面，以便稍后我可以输入一个 XY 对并返回这个 XY 对位于表面上的 Z 值。

是否有现有的 Java 库可以为我估算表面？

如果没有，任何人都可以向我推荐一些可以描述计算方法的东西吗？

如果可能的话，我希望能够对这些点进行加权（有些点不太可靠，因此对成品表面的影响应该较小）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T21:22:00.083

这类问题最好用[线性最小二乘法](http://en.wikipedia.org/wiki/Ordinary_least_squares)解决。但是我不会尝试阅读维基百科文章，它似乎是为数学家写的。

这个想法是将问题变成线性优化问题。在您的情况下，我会尝试拟合 2D 多项式。这是一个形式为：

```
z(x, y) = A + Bx + Cy + Dx^2 + Exy + Ey^2 + Fx^3 + Gx^2y + Hxy^2 + Iy^3 + ... 
```

你明白了。对于给定的数据集，任务简化为找到最适合数据点的参数 A 到 I。这类问题很容易用线性最小二乘法解决。

[查看此代码以将椭圆拟合到 3D 数据点。](https://github.com/BokiSoft/EllipsoidFit/tree/master/EllipsoidFit/src/ellipsoidFit)通过一些努力，您可以对其进行调整以适应上述形式的多项式。

祝你好运！

# c++ - 使用prim算法的最小生成树，不知道哪里错了

> ID：15190660
> 
> 赞同：0
> 
> 时间：2013-03-03T20:46:26.197
> 
> 标签：c++, graph, weighted

**首先，我要声明我不要求任何代码或完整的解决方案。** 我将描述问题：

> 您将获得一栋建筑物中的房间数量以及它们之间的走廊数量。每个走廊连接 2 个房间，并被赋予重量。总是可以到达任何房间。你应该通过移除它们来减少所有走廊的总重量，打印出减少的重量。

**这些假设是否正确？：**

1.  建筑物是一个图形，房间是顶点，走廊是连接它们的边。因此这是一个无向连通图。

2.  您可以通过获取图的最小生成树的权重，然后将完整权重减去 MST 的权重来解决这个问题 - 结果是可以删除的走廊权重的总和。

我已经为 MST 实现了 Prim 算法，结果对于示例案例和我在 Internet 上找到的任何其他 MST 案例都是正确的。但是，评分服务器仍然给我“错误答案”，没有其他信息。我不知道怎么了。输入中不超过 100 个顶点和 5000 条边，因此范围应该不是问题。权重是整数 <=200。我正在为 MTS 使用邻接矩阵。示例输入：

```
5 7  
1 2 50  
2 3 40  
3 4 20  
4 5 10  
1 4 40  
3 5 30 
```

在这种情况下，程序打印 80。完整的重量是 190，最小重量是 110，所以我们可以删除 190 - 110 = 80

我的问题是：

1.  有没有什么明显的错误浮现在你的脑海中？需要注意的事项，为什么它适用于示例输入等。
2.  互联网上是否有任何中等规模**的 MST 测试用例可用于查找问题？**
3.  **有没有其他方法可以解决这个问题？**我很乐意用评分服务器尝试任何事情。

我对图表完全陌生，所以我可能会遗漏一些东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T21:39:13.530

> 1.  建筑物是一个图形，房间是顶点，走廊是连接它们的边。因此这是一个无向连通图。
> 2.  您可以通过获取图的最小生成树的权重，然后将完整权重减去 MST 的权重来解决这个问题 - 结果是可以删除的走廊权重的总和。

是的，这两个都是正确的（以建筑不是一个以房间为顶点、走廊为边的图形的挑剔取模*，*但可以这样看待）。如果你这样看，原始图的总权重与最小生成树的总权重之间的差异是在不使某些房间无法与其他房间接触的情况下最大可能地减少权重（即使图断开连接）。

所以我看到了两种可能性，

1.  您在 Prim 算法的实现中有一个细微的错误，该错误由评分服务器上的测试用例触发，而不是由您检查的测试用例触发。
2.  评分服务器有错误的答案。

如果没有任何进一步的信息，我会认为 1 更有可能。

> 有没有其他方法可以解决这个问题？我很乐意用评分服务器尝试任何事情。

由于您需要找到 MST 的重量，因此我不知道您如何在不找到 MST 的情况下做到这一点。因此，其他方法是找到 MST 的不同算法。我想到了[克鲁斯卡尔的算法。](http://en.wikipedia.org/wiki/Kruskal%27s_algorithm)

# java - 匈牙利算法 - 选择 0 的最后一步，使得每一行和每一列都只选择一个

> ID：15190667
> 
> 赞同：5
> 
> 时间：2013-03-03T20:46:47.417
> 
> 标签：java, algorithm, hungarian-algorithm

我正在尝试用 Java 实现匈牙利算法。我有一个 NxN 成本矩阵。我正在逐步遵循[本](http://www.wikihow.com/Use-the-Hungarian-Algorithm)指南并已达到第 9 步 -

> “通过选择一组零来选择匹配项，以便每一行或每一列都只选择一个。”

我已经有了带有 0 的矩阵。我试图弄清楚这一点，唯一对我有用的是蛮力方法。

我还想过选择我遇到的第一个 0，删除该列和行并重复；但是这种方法行不通。

有什么诀窍或方法吗？不是太复杂的东西？任何建议将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T23:10:20.120

匈牙利人的回答：:)

*   计算`0`每行和每列的元素数。（调用它`row[]`和`column[]`）
*   选择行和列的最小**正值。**例如，让它成为`column[3]`（如果在 a 中找到最小值`row`，同样适用，仅交换行和列）如果您有多个具有相同值的值，请选择任何一个。
*   `0`在该列中选择一个元素，标记它。如果您有多个，请选择具有正值的任何一个`row`。（假设是`row[1]`）
*   设置`column[3]`为 0（下次我们不应该选择）。也设置`row[1]`为 0。
*   迭代 中的所有元素`column[3]`，如果找到一个`0`元素，则将对应的值减`row[i]`1
*   如果您在行或列中都没有找到正值，那么您就完成了。

# assembly - 阶乘的汇编代码

> ID：15190670
> 
> 赞同：0
> 
> 时间：2013-03-03T20:47:08.637
> 
> 标签：assembly, factorial

我是汇编程序的新手，我需要一些帮助。

我的编译器只对这个命令做出反应

```
load i  
store i 
loadi i 
addi i  
subi i  
move S T    
loadin i j  
storein i j
all kind of jumps 
```

我需要编写程序在一个数据存储中查找数字存储的阶乘，假设在第一个单元格中

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T21:10:04.593

您需要弄清楚的第一件事是如何相乘，因为您没有操作码可以这样做。您可以执行以下操作：

```
loop   add mul1 to result
       subtract 1 from mul2
       if counter is greater zero jump to loop 
```

您尝试计算 mul1 * mul2 的位置，当循环退出时，您的答案将得到结果。

现在您需要弄清楚如何进行阶乘。使用我刚刚写的乘法会是这样的：

```
 load num
       set i = num
top    multipy num and  i
       subtract 1 from i
       if i is greater than 0 jump to top 
```

现在要把它翻译成你的汇编器的操作码，我不打算这样做。我不太了解它，即有多少寄存器，什么是操作码规范等，因为有许多不同种类的汇编代码。

帮助我开始使用 ASM 的主要因素是将任务分解为更小、更易于管理的任务。祝你好运！

# ruby - 在调用 `.===` 运算符之前，Ruby 在 `when` 子句语句上执行什么测试？

> ID：15190674
> 
> 赞同：0
> 
> 时间：2013-03-03T20:47:29.227
> 
> 标签：ruby

Ruby`===`在类型执行风格上使用运算符。`case/when`现在还知道 Ruby 根据`when`子句中存在的事物的类型，调用相应的`.===`方法。

说`when`语句包含`class`名称，那么规则是 -`it will use Module#===, which will return true if the right side is an instance of, or subclass of, the left side.`这种情况的一个例子是：

这里`instance of`发生测试

```
obj = 'hello'
#=> "hello"
case obj
when String
print 'It is a string'
when Fixnum
print 'It is a number'
else
print 'It is not a string'
end
#It is a string
#=> nil 
```

这里`subclass of`发生测试

```
num = 10
#=> 10
case num
when Numeric
puts "Right class"
else
puts "Wrong class"
end
#Right class
#=> nil 
```

现在`when`包含`String`文字，然后调用 String#===，它反过来检查左右手边文字是否相同（相同序列中的相同字符）。

```
a = "abc"
#=> "abc"
case a
when "def" then p "Hi"
when "abc" then p "found"
else "not found"
end
#"found"
#=> "found" 
```

所有的逻辑都太酷了。现在我的查询是`case/when`结构 -

*   ***ruby 如何知道在运行时是否`when`持有`class`、`String`文字或任何有效的东西？***

或者

*   ***`.===` 在调用当前持有的事物上的相应操作员之前，它会执行什么测试`when`。***

***编辑***

在了解`Case/when`工作原理之前，让我先弄清楚下面的内容`when`，当它轮到它时。

```
String.===("abc") #=> true 
```

因为“abc”是`String`类的一个实例。- 我对吗？

现在我尝试了以下方法来检查谁是谁的超类。

```
10.class #=> Fixnum
Fixnum.superclass #=> Integer
Integer.superclass #=> Numeric
Numeric.superclass #=> Object 
```

嗯。这意味着以下返回`true`，因为 Fixnum 也是`Numeric`. - 我对吗？

```
Numeric.===(10) #=> true 
```

但是为什么下面的输出与上面的相矛盾呢？

```
Numeric.===(Fixnum) #=> false 
```

***尝试更具体地了解我的查询，如下所示：***

当我们调用`Numeric.===(10)`and时`String.===("abc")`。我认为我们发送的是not而是`"abc"`and 。`10``"abc".class``10.class`

```
10.===(10) #=> true
Numeric.===(10) #=> true 
```

现在看看上面。两者都返回`true`。它们是否`true`以相同的逻辑输出？我认为`NO`。`10.===(10)`就像 `10 ==(10)`比较一样。但是作为类的`Numeric.===(10)`输出是 的子类。`true``10``Numeric`

```
"abc".===("abc") #=> true
String.===("abc") #=> true 
```

现在看看上面。两者都返回`true`。它们是否`true`以相同的逻辑输出？我认为`NO`。`"abc".===("abc")`就像简单的字符串文字比较`"abc" ==("abc")`比较。但`String.===("abc")`输出`true`为`"abc"`which 的一个实例`String`。

现在我的问题是 ruby​​ 如何检测左侧操作数类型并应用正确的比较规则？

我可能 100% 错了，在这种情况下，请纠正我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T21:33:30.707

我将尝试解释@Lee Jarvis 也解释的内容。

```
class Someclass
end

s = Someclass.new
p s.methods.sort
#[:!, :!=, :!~, :<=>, :==, :===, :=~, :__id__, :__send__, :class, :clone,(...) 
```

看第5种方法。我的 Someclass 实例有一个`===`无处不在的方法。

实际上，它有 56 种方法，我没有定义其中之一。它们继承自 Object；Ruby 中的每个类都继承自 Object。对于 Object 类（和我的 Someclass），#=== 实际上与调用 #== 相同，但是（正如文档所说）#=== 通常被后代覆盖以在 case 语句中提供有意义的语义。

所以 ruby​​ 没有做任何聪明的事，它只是向有问题的对象发送一条`===`消息（或者如果你愿意，也可以调用该`===`方法）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T01:59:44.650

> 现在我的问题是 ruby​​ 如何检测左侧操作数类型并应用正确的比较规则？

它没有。它只是调用`===`方法。而已。这就是面向对象的工作方式，它不是 Ruby 特有的，*每一种*OO 语言的工作方式都是一样的：你调用一个对象的方法，对象决定如何反应。（或者，在 Ruby、PHP、Java、C#、C++、Python 等基于*类*的语言中，对象的类决定。）

不同的对象可能会以不同的方式做出反应。类检查参数是否是它们自己的实例，正则表达式检查参数是否被它们匹配，范围检查参数是否被它们覆盖。

这只是基本的方法调度。

# javascript - JavaScript 原型扩展

> ID：15190676
> 
> 赞同：3
> 
> 时间：2013-03-03T20:47:46.050
> 
> 标签：javascript, variables, prototype, global, extending

我正在尝试扩展一个 Abstract 对象。

```
var Abstract = function() { code = 'Abstract'; };
Abstract.prototype.getCode = function() { return code; };
Abstract.prototype.getC = function() { return c; };

var ItemA = function() { code = 'ItemA'; c = 'a'; };
ItemA.prototype = Object.create(Abstract.prototype);
ItemA.prototype.constructor = ItemA;

var ItemB = function() { code = 'ItemB'; };
ItemB.prototype = Object.create(Abstract.prototype);
ItemB.prototype.constructor = ItemB;

var b = new ItemB();
console.log(b.getCode());
var a = new ItemA();
console.log(b.getCode());
console.log(b.getC()); 
```

结果：

```
ItemB
ItemA
a 
```

我在 ItemB 实例中获得 ItemA 的范围有什么特别的原因吗？我该如何解决？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-03T20:54:32.450

这是因为您使用的是全局变量。使用`this`关键字修复它：

```
var Abstract = function() { this.code = 'Abstract'; };
Abstract.prototype.getCode = function() { return this.code; };
Abstract.prototype.getC = function() { return this.c; };

var ItemA = function() { this.code = 'ItemA'; this.c = 'a'; };
ItemA.prototype = Object.create(Abstract.prototype);
ItemA.prototype.constructor = ItemA;

var ItemB = function() { this.code = 'ItemB'; };
ItemB.prototype = Object.create(Abstract.prototype);
ItemB.prototype.constructor = ItemB; 
```

虽然在这种情况下`ItemB.getC()`将返回未定义。

# javascript - JavaScript 和 DOM 逻辑看起来正确但运行不正确

> ID：15190677
> 
> 赞同：0
> 
> 时间：2013-03-03T20:47:52.447
> 
> 标签：javascript, dom, logic

我想要做的就是禁用按钮，如果`ftemp`. 如果有，我希望按钮启用并检查它是否为数字。然后我可以发送`ftemp`到下一页。我的 html ：

```
<!DOCTYPE html> 
<html>
    <head>
        <title></title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <script type="text/javascript">

            function content()
            {
                var ftemp = document.getElementById("ftemp");
                if (ftemp.value=="")
                {
                    var convert = document.getElementById("convert").disabled=true;
                    document.getElementById("error").innerHTML = "";
                }
                else
                {
                    isNumeric()
                }
            }
            function isNumeric()
            {
                var ftemp = document.getElementById("ftemp");
                if (isNaN(ftemp))
                {
                    var convert = document.getElementById("convert").disabled=true;
                    document.getElementById("error").innerHTML = "Enter only numbers";
                }
                else 
                {
                    var convert = document.getElementById("convert").disabled=false;
                    document.getElementById("error").innerHTML = "";
                }
            } 

        </script>
    </head>
    <body onload="content()">
        <form method="get" action="celsius">
            <p>
                <label>
                    Enter a temperature in Fahrenheit:
                </label>
            </p>
            <p>
                <input required id="ftemp" title="Enter only numbers!" size="3"
                    maxlength="3" onkeyup="content()"/>
                <button id="convert" name="convert">Convert to Celsius</button>
            </p>
            <p id="error" name="error">

            </p>
        </form>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T20:54:45.087

内部`isNumeric()`：

您正在检查： DOM 元素`isNaN(ftemp)`在哪里，`ftemp`所以它不能是数字。更改为`isNaN(parseInt(ftemp.value, 10))`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T20:56:36.857

你在这里有错误：

```
if (isNaN(ftemp)) 
```

将其更改为：

```
if (isNaN(ftemp.value)) 
```

是`ftemp`一个 DOM 对象。您需要在此处传递值。

### 小提琴：http: [//jsbin.com/ocibuc/2](http://jsbin.com/ocibuc/2)

# installation - 在 Ubuntu 上安装 condor 包的问题

> ID：15190679
> 
> 赞同：0
> 
> 时间：2013-03-03T20:47:59.927
> 
> 标签：installation, package, condor

我尝试在 Ubuntu 12.10 上安装 condor 包，但出现错误消息。

这些图片显示了我的问题：

![在此处输入图像描述](../Images/53fbce225512eca17b30710047cb056e.png)

![在此处输入图像描述](../Images/53332f85fb15024eacd7718bd0dc1a0c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-25T03:22:49.200

Ubuntu 附带的软件包已经很老了。使用 HTCondor debian repo 安装：[http ://research.cs.wisc.edu/htcondor/debian/](http://research.cs.wisc.edu/htcondor/debian/)

我在 12.04 上运行 wheezy 包就好了。

# git - 我可以在每个文件本质上是它自己的仓库的情况下使用 GIT

> ID：15190681
> 
> 赞同：4
> 
> 时间：2013-03-03T20:48:15.987
> 
> 标签：git

**注意：**尽管（从已经发生的讨论中）看起来 GIT 实际上并不适合这个用例，但我已经将这个问题开放给赏金以提示更明确的答案，希望来自在 GIT 方面有丰富的经验。原始问题如下。

我有一种情况，我有大量独立的文件。所谓独立，我的意思是每个文件不依赖于它周围文件的存在、不存在或特定状态。一个很好的类比是一个图像目录，我们的工作流程允许独立创建、编辑和删除每个图像，并且在图像上完成的工作与目录中的其他图像无关。

请注意，这种独立性不仅是偶然的，而且对我们的工作流程至关重要。

这些文件中的每一个都将受益于类似 GIT 的工作流程。如果能够跟踪每个文件的更改，让人们在独立的分支中处理每个文件，然后在完成后合并他们的更改，那就太好了（因此，为了我们的类比，想象这些是 SVG 图像，您可能让艺术家绘制图像和翻译文本内容），并从使用 GIT 的其他项目访问文件。

根据我的经验，当您拥有一组都处于特定状态的文件时，GIT 非常棒。例如，当您在达到“Production Release 1.2”状态后提交 GIT 存储库时，每个文件在该提交时共享“Production Release 1.2”状态。

但是我不确定如何应用 GIT 工作流程，或者当每个文件没有也不能共享它周围的文件的状态时是否可行。您可以将每个文件放在其自己的 GIT 存储库中，但这似乎不切实际。

所以，我的问题是：

1.  我对 GIT 仅适用于相关文件集合的印象是否正确？
2.  如果不是，那么在逐个文件的基础上使用 GIT 的克隆/分支/合并功能的过程是什么？

更新

作为对iberbeu的回应：并不是我将版本视为XY，而是我将GIT提交视为假设存储库中的所有文件具有相同的版本或提交点（但是您定义了一个版本）。在这种情况下，GIT 存储库中的文件并不完全独立。

这里的问题是，当您使用包含所有独立文件的单个 repo 时，将其克隆到您自己的本地 repo 并开始在分支上工作。此时假定所有文件都属于该分支，即使从我们拥有的工作流程的角度来看，您只在处理一个文件。但是，现在所有这些独立文件都“顺其自然”，承担与您实际要编辑的单个文件关联的修订历史记录。

因此，Joe 可能会创建一个名为“Joe Working on Image 1”的 repo 分支。他的分支有他想要处理的图像 1，以及他不感兴趣的 10,000 个其他图像。

Jane 可能会创建一个名为“Jane working on Image 987”的相同存储库的分支。她的分支有她想要处理的图像 987，以及她不感兴趣的其他 10,000 张图像。

这很好，只要 Joe 和 Jane 不想开始在他们的分支中编辑一些其他图像。但如果他们这样做了，我们就会失去将每个图像作为独立实体进行编辑的概念模型，并且与其他图像隔离编辑。

因此，如果乔在他应该只编辑图像 1 的分支中编辑了图像 2，并将这些更改合并回 repo，我们现在将图像 2 的显式修订历史记录与图像 1 一起编辑。但是图像 1 和 2 应该完全独立。不应该有图像 2 的概念，因为它是与图像 1 一起编辑的。

所以这是问题的症结所在。GIT 是否支持它控制的文件作为独立实体的概念，其修订版与任何其他文件都不相关？或者这只能通过每个文件的单独 git repos 来实现？

更新 2

看起来[子模块](https://git.wiki.kernel.org/index.php/GitSubmoduleTutorial)可能会替代拥有数千个 GIT 存储库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T21:59:35.093

我真的没有看到问题。我认为您将存储库视为对代码（在本例中为文件）进行版本控制的一种方式。虽然这是对的，但这个想法可能会导致您出错，因为这并不意味着您始终以 XY 形式提交版本

我的意思是，您可以将 repo 视为一个时间线，在该时间线中，您具有文件夹内容的不同状态。文件是否相互关联并不重要。

使用 git，您始终可以获取单个文件的旧版本，而无需返回到 repo 的完整状态。

因此，在您的情况下，一个包含多个独立文件的存储库与每个包含一个文件的多个存储库之间没有任何区别。实际上有很大的不同，第一种选择是负担得起的，第二种是不可能处理的。

实际上，一个正常的项目具有完全独立的文件，但它们都属于同一个 repo。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T02:41:33.843

我使用 CVS，其中每个文件都独立于存储库中的所有其他文件。

作为奖励，这使您可以对某些文件执行“cvs update”，而让其他文件不理会。

当我可能在本地工作区修改了文件，并且还从另一个工作区签入了更改时，这会派上用场。我经常只想同步存储库中已更改的文件，而不想处理可能需要合并的文件。

这导致了一个我称之为 cvs-update-safe 的脚本，它可以快速、轻松地更新任何可以安全更新的文件，同时将其他文件单独留待以后手动处理。

对于任何复杂的东西，我都不是 CVS 的忠实粉丝（我更喜欢 git），但它具有无处不在的优点，并且允许我选择只更新存储库的一部分。

```
#!/usr/bin/python

# $Id: cvs-update-safe,v 1.1 2007-11-02 19:47:02 falk Exp $

usage = """Like cvs update, but only updates files which will update cleanly.

Usage:  cvs-update-safe [files...]
"""

import sys
import os
import string
import commands

def main():
  cmd = 'cvs -n update ' + string.join(sys.argv[1:], ' ')
  output = commands.getoutput(cmd).split('\n')
  olist = []
  for line in output:
    line = line.split()
    if line[0] is 'U' and len(line) is 2:
      olist.append(line[1])
  if olist:
    cmd = 'cvs update ' + string.join(olist, ' ')
    os.system(cmd)
  else:
    print 'Nothing to update'

if __name__ == "__main__":
  sys.exit(main()) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-03T21:17:58.533

Git 对您为单个文件创建存储库没有任何问题。

如果您不想为每个文件创建一个存储库并且不需要同时查看其目录中的所有这些文件，则可以从一个空存储库开始并为每个文件创建一个分支。如果您不在这些独立分支之间进行任何合并，它们将保持独立。您仍然可以从特定文件的分支创建新分支并将更改合并回来。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-07T09:40:44.020

正如其他人所说，git 可用于许多单文件存储库，尽管它（正如您所指出的）更多地用于管理一组文件。

要管理数千个单文件存储库，[Gitslave 工具](http://gitslave.sourceforge.net/)可能会有所帮助。该工具允许创建一堆存储库，并统一管理它们。一旦你有了你的存储库，你当然可以独立地使用每个存储库，但是 Gitslave 可以很容易地对它们进行组操作，比如推/拉或提交。

恕我直言，这是一个更好的解决方案，因为有许多 git 子模块，因为子模块可能很难使用。

从主页：

> Gitslave 创建了一组相关的存储库——一个超级项目存储库和多个从属存储库——所有这些存储库都是同时开发的，并且所有 git 操作都应该在这些存储库上正常运行；所以当你分支时，项目中的每个仓库都会依次分支。同样，当您提交、推送、拉取、合并、标记、签出、状态、日志等时；每个 git 命令将依次在超级项目和所有从存储库上运行。

[...]

> Gitslave 不会接管您的存储库。您可以在 gits 克隆存储库内部和私有 git 克隆存储库外部继续使用旧版 git 命令。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T08:19:16.230

我想，你以错误的问题开始了这个讨论。

这段落：

> 这些文件中的每一个 [...] 并从使用 GIT 的其他项目访问这些文件。

（特别是：*从使用 GIT 的其他项目访问文件*）建议，您想要的只是从其他项目访问的存储库集合。

我认为，最好的解决方案是使用子模块。

为每个“文件”设置一个新的存储库。我将它们称为“一个文件存储库”。

在使用“one-file-repo”存储库的项目中定义子模块。

您的“单文件存储库”存储库包含单个文件这一事实并不重要。

“one-file-repo”中的工作是独立的，但不一定限于单个文件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-06T00:53:31.073

您可以使用单个 repo 并使用 git hooks 来强制执行粒度为 1。

客户端预提交钩子将确保提交对单个文件进行更改，并且可选的 prepare-commit-msg 钩子将自动在提交消息前加上文件名。

服务器端预接收挂钩可以强制执行上述操作。

您仍然会遇到最终拥有大量独立分支的信号噪声问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-06T21:32:57.073

使用单个存储库，您可以选择一次只提交一个文件，为每个文件提供不同的提交消息。但是当您克隆存储库时，您最终仍将下载整个存储库。Git 是一个[分布式版本控制](http://en.wikipedia.org/wiki/Distributed_revision_control)系统，这是它的副作用。

您可以为每个文件提供自己的 git 存储库，并使用子模块将它们导入其他 git 存储库。我可以看到管理起来有些痛苦，但是使用 dvcs 的优点是您始终在计算机上拥有存储库的历史记录。

要考虑的另一件事是您可能使用了错误的工具来完成这项工作。SVN 是一个集中的版本控制系统，它允许您检出单个文件（稀疏检出）而不是克隆整个存储库。您可以使用 git-svn 之类的工具来桥接到您现有的 Git 存储库。

无论哪种方式，这都不是一个有趣的过程。每个文件有一个单独的 git repo 可能是最简单的。

# json - Emacs 中的 JSON 请求，第 2 阶段：获取项目集合

> ID：15190684
> 
> 赞同：4
> 
> 时间：2013-03-03T20:48:26.107
> 
> 标签：json, request, elisp

我正在尝试使用 Stack Exchange API 获取站点列表（a 列表列表）[`request.el`](http://tkf.github.io/emacs-request/)。

我正在[为 Stack Exchange 制作 Emacs 主要模式](https://github.com/vermiculus/sx.el)，因此这对 Emacs 用户来说有一些不错的潜在回报。;) （而且由于我标记了 elisp，我假设这就是你们的大部分。）

要做到这一点，一个基本的必要条件是发出一个 JSON 请求，然后查看返回的站点列表。StackExchange API 提供[/sites](https://api.stackexchange.com/docs/sites)资源，对该资源的请求会返回一组[站点](https://api.stackexchange.com/docs/types/site)对象，如下所示：

```
{
  "items": [
    {
      "site_type": "main_site",
      "name": "Stack Overflow",
      "logo_url": "http://cdn.sstatic.net/stackoverflow/img/logo.png",
      "api_site_parameter": "stackoverflow",
      "site_url": "http://stackoverflow.com",
      "audience": "professional and enthusiast programmers",
      "icon_url": "http://cdn.sstatic.net/stackoverflow/img/apple-touch-icon.png",
      "aliases": [
        "http://www.stackoverflow.com"
      ],
      "site_state": "normal",
      "styling": {
        "link_color": "#0077CC",
        "tag_foreground_color": "#3E6D8E",
        "tag_background_color": "#E0EAF1"
      },
      "launch_date": 1221436800,
      "favicon_url": "http://cdn.sstatic.net/stackoverflow/img/favicon.ico",
      "related_sites": [
        {
          "name": "Stack Overflow Chat",
          "site_url": "http://chat.stackoverflow.com",
          "relation": "chat"
        }
      ],
      "markdown_extensions": [
        "Prettify"
      ],
      "high_resolution_icon_url": "http://cdn.sstatic.net/stackoverflow/img/apple-touch-icon@2.png"
    },
    {
      "site_type": "main_site",
      "name": "Server Fault",
      "logo_url": "http://cdn.sstatic.net/serverfault/img/logo.png",
      "api_site_parameter": "serverfault",
      "site_url": "http://serverfault.com",
      "audience": "professional system and network administrators",
      "icon_url": "http://cdn.sstatic.net/serverfault/img/apple-touch-icon.png",
      ...
    },
    {
      "site_type": "main_site",
      "name": "Super User",
      ...
    {
      "site_type": "main_site",
      "name": "Meta Stack Overflow",
      ...
    }
    ...
} 
```

我想尽量减少对 API 的调用次数，并将它们全部检索并一次性将它们放入数据结构中，以便我以后能够理解它。

我正在尝试调整我在这里找到的一个可爱的解决方案，[在 Emacs 中发出 JSON 请求](https://stackoverflow.com/questions/15118304)，以适应我需要做的事情。它使用来自 tkf 的[request.el](http://tkf.github.io/emacs-request/)库。

tkf 给我的示例能够获取站点上最活跃的问题并使用 获取其`title`和`tags`属性`json-read`，这实际上将对象变成了一个列表。此尝试基于该解决方案：

```
(request
 "https://api.stackexchange.com/2.1/sites"
 :parser 'buffer-string
 :success (function*
       (lambda (&key data &allow-other-keys)
         (let* ((items    (assoc-default 'items data))
            (names    (mapcar (lambda (item) (assoc-default 'name        item)) items))
            (launches (mapcar (lambda (item) (assoc-default 'launch-date item)) items)))
           (mapcar* (lambda (name launch)
              (message "name:`%s` launch:`%s`" name launch))
            names
            launches))))) 
```

...但似乎完全无效。其他示例运行良好，因此我的用法有问题。

request.el 可以从 MELPA 包存储库下载，据我所知，`curl`它需要正确运行（我有）。

我怀疑问题在于我对 的使用（或准备）`mapcar*`，其中以下确实按预期工作：

```
(mapcar* (lambda (a b) (insert a) (insert b)) '(1 2 3) '(4 5 6)) 
```

我知道这篇文章很长，但我试图提供尽可能多的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T23:38:25.010

你快到了。这个对我有用：

```
(request
 "https://api.stackexchange.com/2.1/sites"
 :parser 'json-read
 :success (function*
       (lambda (&key data &allow-other-keys)
         (let* ((items    (assoc-default 'items data))
            (names    (mapcar (lambda (item) (assoc-default 'name        item)) items))
            (launches (mapcar (lambda (item) (assoc-default 'launch_date item)) items)))
           (mapcar* (lambda (name launch)
              (message "name:`%s` launch:`%s`" name launch))
            names
            launches))))) 
```

两个变化： 1.使用`json-read`而不是`buffer-string`解析器参数。2\. 使用`launch_date`而不是`launch-date`作为alist 的键。

# excel - 直接在单元格中获取单词的翻译

> ID：15190686
> 
> 赞同：2
> 
> 时间：2013-03-03T20:48:29.933
> 
> 标签：excel, vba, excel-2007

我有一个列（例如）30 个法语单词，我想将它们翻译成英语。每个单词都在一个单元格中。我通常在 dict.cc 中查找它们并选择最好的，但复制/粘贴很烦人。

是否可以执行以下操作？：通过移动单元格（法语单词），应该会弹出一个小框，其中包含 dict.cc 中所有可用的翻译，我想选择一个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T23:31:30.323

您可以从他们的页面下载 dict.cc 数据库（FR->EN）（或任何其他语言）。然后，您必须将数据集成到您的文件中。

目前，FR->EN 文件保存为文本文件大约有 667,410KB。将其粘贴到 Excel 将为您提供 3 列工作表（1\. FR 列，2\. EN 列，3\. 特殊条件）。

通过数据验证或查找，您可以绑定单词。

[http://www.dict.cc/?s=about%3Awordlist](http://www.dict.cc/?s=about%3awordlist) 13\. Vokabeldatenbank

希望这对您有所帮助。

# sql - 使用 SQL 分组显示所有值

> ID：15190691
> 
> 赞同：1
> 
> 时间：2013-03-03T20:49:17.733
> 
> 标签：sql, group-by

这是架构：

```
customers (customerID: integer, fName: string, lName: string)
items (itemID: integer, description: string, price: float)
orders (orderID: integer, itemID: integer, aID: integer, customerID: integer, date: date)
addresses (aID: integer, housenum: integer, streetName: string, town:string, state: string, zip:integer) 
```

您如何列出将物品运送到与另一位客户相同的城镇的任何客户的城镇、名字和姓氏。

当我尝试使用`GROUP BY`town时，输出只能显示组中的第一个客户，而不是所有满足的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T20:57:13.877

想想你会如何回答这个问题。任何这样的城镇至少有两个客户向它下订单。您可以使用带有`having`子句的聚合查询来获取此列表：

```
 select town
           from orders o join
                addresses a
                on o.Aid = a.Aid
           group by town
           having count(distinct c.customerId) > 1 
```

现在唯一的问题是哪些客户向这些城镇下订单：

```
select distinct a.town, c.fname, c.lname
from customer c join
     orders o
     on c.customerID = o.customerID join
     Addresses a
     on o.Aid = a.Aid
where town in (select town
               from orders o join
                    addresses a
                    on o.Aid = a.Aid
               group by town
               having count(distinct c.customerId) > 1
              ) 
```

第`distinct`一个选择是因为每个这样的客户可能有多个记录。

尽管这回答了您的问题，但它并不能真正回答真正的业务需求。例如，大多数州都有一个名为“斯普林菲尔德”的地方。你真的需要考虑到状态。或者也许改用邮政编码。如果这是一个真正的商业问题，客户会说纽约市（假设“城镇”字段具有一致的值。

# php - 服务器可以访问代理但不能访问 cURL？

> ID：15190694
> 
> 赞同：0
> 
> 时间：2013-03-03T20:49:41.320
> 
> 标签：php, apache, curl

我已经用代理测试了我的本地服务器，我的朋友都可以在他们的浏览器中加载 url，但是当我尝试在单独的服务器上使用 cURL 时，连接失败。

这是 URL，它在我的浏览器和使用我朋友的互联网时都加载：

```
http://pc.stephen3.com:8080/gameq.php 
```

这是我在单独服务器上使用的代码，它成功检索了所有其他 URL（如 google 和 yahoo）

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "http://pc.stephen3.com:8080/gameq.php");
curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 5);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
$err = curl_error($ch);
$resp = curl_exec($ch);
echo $resp;
echo $err; 
```

但它在我的家庭服务器的 url 上没有返回任何内容，并且

```
curl_error($ch); 
```

（确实说过，现在什么也没说）“无法连接到主机”

有什么想法吗？url 在任何地方都有效，但在 cURL 中。该代码在任何地方都可以使用，但可以使用 URL。

**编辑：**在我看来，这可能是因为我的外部服务器上的出站流量位于端口 8080 而不是常规服务器的 80 端口上，必须测试我的主机是否允许 curl 在其他端口上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T21:12:16.840

也许您必须从​​ URL 中删除端口号并配置`CURLOPT_PORT`选项。

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "http://pc.stephen3.com/gameq.php"); // port removed
curl_setopt($ch, CURLOPT_PORT, 8080);  // that line added
curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 5);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
$err = curl_error($ch);
$resp = curl_exec($ch);
echo $resp;
echo $err; 
```

您还可以使用`curl_getinfo($ch)`函数获取更多调试信息。

```
$report=curl_getinfo($ch);
echo "curl_getinfo returned: <br>".$report; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T21:17:46.503

事实证明我的主机（iPower）将 cURL 限制为端口 80 :(

**编辑：**我发现支持撒谎，说只允许端口 80。事实上，它们允许端口 80 和 990 (SSL)，但您可以使用端口 990，而无需实际启用 SSL。完美运行。

# javascript - 使用 json 数据填充下拉列表

> ID：15190698
> 
> 赞同：2
> 
> 时间：2013-03-03T20:49:56.700
> 
> 标签：javascript, jquery, html, json

我正在尝试使用来自 JSON 页面的数据填充下拉框。

这是我正在使用的代码：

```
<script type="text/javascript" charset="utf-8">
    $(document).ready(function () {
        $.ajax({
            url: "json/wcf.svc/GetTax",
            dataType: 'json',
            data: data
        });

        $($.parseJSON(data.msg)).map(function () {
            return $('<option>').val(this.value).text(this.label);
        }).appendTo('#taxList');
    });
</script> 
```

这是 json 数据返回的内容：

```
{"d":"{\"16\":\"hello\",\"17\":\"world\"}"} 
```

我收到“数据未定义”的错误。我是否必须以某种方式告诉 JQ 如何读取 json 数据？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T20:59:26.480

首先，您传递给 ajax 调用的数据变量未定义（嗯，不在您提供的代码示例中），其次，ajax 调用异步发生，因此您需要对返回的数据做一些事情，即通过成功回调。例子：

```
$(document).ready(function () {
    var data = //define here
    $.ajax({
        url: "json/wcf.svc/GetTax",
        dataType: 'json',
        data: data, // pass it in here
        success: function(data)
        {
            $(data.msg).map(function () {
                return $('<option>').val(this.value).text(this.label);
            }).appendTo('#taxList');
        }
    });       
}); 
```

您也不需要解析从 ajax 调用返回的数据，因为 jQuery 会自动为您解析 JSON，（应该需要 $.parseJSON(data.msg)）

**编辑**

基于 JSON 的有趣格式，并假设它无法更改，这应该可以工作（虽然丑陋）

```
$(document).ready(function () {
        var data = //define here
        $.ajax({
            url: "json/wcf.svc/GetTax",
            dataType: 'json',
            data: data, // pass it in here
            success: function(data)
            {
                 data = data.d.replace(/{/g, '').replace(/}/g, '').split(',');
                 var obj = [];
                 for (var i = 0; i < data.length; i++) {
                     obj[i] = {
                      value: data[i].split(':')[0].replace(/"/g, '').replace('\\', ''),
                      label: data[i].split(':')[1].replace(/"/g, '')
                     };
                 }
                 var htmlToAppend = "";
                 for (var j = 0; j < obj.length; j++) {
                     htmlToAppend += '<option value="' +
                         obj[j].value +
                         '">' + obj[j].label +
                         '</option>';
                 }
                 $('#taxList').append(htmlToAppend);
            }
        });       
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T20:52:49.353

您需要使用该`success`选项返回数据。

```
<script type="text/javascript" charset="utf-8">
    $(document).ready(function () {
        $.ajax({
            url: "json/wcf.svc/GetTax",
            dataType: 'json',
            success: function(data){

           $(data.msg).map(function () {
            return $('<option>').val(this.value).text(this.label);
        }).appendTo('#taxList');

        }
        });

    });
</script> 
```

# java - Eclipse JUnit - 在 Eclipse 窗口中看到“initializationError”的可能原因

> ID：15190699
> 
> 赞同：59
> 
> 时间：2013-03-03T20:50:05.700
> 
> 标签：java, eclipse, junit

我知道这个问题很笼统，但我没有找到任何关于为什么会出现此错误的提示。在 Eclipse 窗口中看到*initalizationError*的可能原因是什么？我没有得到任何有用的信息，只是一个漫长而无用的故障跟踪（此处不包括）。

我正在使用 JUnit 4.11

我编写了以下代码 - 只是为了看看它是否有效：

```
package test;

import static org.junit.Assert.*;

import org.junit.AfterClass;
import org.junit.BeforeClass;
import org.junit.Test;

public class SimpleTest {

@BeforeClass
public static void setUpBeforeClass() throws Exception {
}

@AfterClass
public static void tearDownAfterClass() throws Exception {
}

@Test
public void test() {
    assertEquals(15, 15);
}

} 
```

**编辑：**对不起，在 Eclipse 窗口中，它实际上被称为“故障跟踪”：

```
java.lang.NoClassDefFoundError: org/hamcrest/SelfDescribing     at
java.lang.ClassLoader.defineClass1(Native Method)   at
java.lang.ClassLoader.defineClass(Unknown Source)   at
java.security.SecureClassLoader.defineClass(Unknown Source)     at
java.net.URLClassLoader.defineClass(Unknown Source)     at
java.net.URLClassLoader.access$100(Unknown Source)  at
java.net.URLClassLoader$1.run(Unknown Source)   at
java.net.URLClassLoader$1.run(Unknown Source)   at
java.security.AccessController.doPrivileged(Native Method)  at
java.net.URLClassLoader.findClass(Unknown Source)   at
java.lang.ClassLoader.loadClass(Unknown Source)     at
sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)  at
java.lang.ClassLoader.loadClass(Unknown Source)     at
org.junit.internal.builders.JUnit4Builder.runnerForClass(JUnit4Builder.java:10)
    at
org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:59)
    at 
org.junit.internal.builders.AllDefaultPossibilitiesBuilder.runnerForClass(AllDefaultPossibilitiesBuilder.java:26)
    at
org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:59)
    at
org.junit.internal.requests.ClassRequest.getRunner(ClassRequest.java:26)
    at
org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.<init>(JUnit4TestReference.java:33)
    at
org.eclipse.jdt.internal.junit4.runner.JUnit4TestClassReference.<init>(JUnit4TestClassReference.java:25)
    at
org.eclipse.jdt.internal.junit4.runner.JUnit4TestLoader.createTest(JUnit4TestLoader.java:48)
    at
org.eclipse.jdt.internal.junit4.runner.JUnit4TestLoader.loadTests(JUnit4TestLoader.java:38)
    at
org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:452)
    at
org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at
org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at
org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: java.lang.ClassNotFoundException:
org.hamcrest.SelfDescribing     at java.net.URLClassLoader$1.run(Unknown
Source)     at java.net.URLClassLoader$1.run(Unknown Source)    at
java.security.AccessController.doPrivileged(Native Method)  at
java.net.URLClassLoader.findClass(Unknown Source)   at
java.lang.ClassLoader.loadClass(Unknown Source)     at
sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)  at
java.lang.ClassLoader.loadClass(Unknown Source)     ... 25 more 
```

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-03-03T21:57:39.847

您可能遇到以下两个问题之一：

1) 您使用的是 JUnit 4.11，它不包括 hamcrest。将 hamcrest 1.3 库添加到您的类路径中。

2) 你的类路径上有 hamcrest 1.3，但你的类路径上有另一个版本的 junit 或 hamcrest。

作为背景，junit pre 4.11 包含了 hamcrest 1.1 的精简版。4.11 删除了这些类。

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2015-02-18T17:03:06.313

For me it was a silly mistake. I inadvertently set the test as **private** instead of **public**:

```
@Test
private void thisTestWasCausingProblems() {
...
} 
```

it should have been

```
@Test
public void thisTestIsOK() {
...
} 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2014-08-11T17:33:32.193

只需尝试“Project > Clean...” - 似乎是 Eclipse 中许多问题的解决方案！

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2014-11-04T04:43:25.017

`static`对我来说，这是JUnit 注释方法之一中缺少的关键字，例如：

```
@AfterClass
public static void cleanUp() {
    // ...
} 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2016-05-11T20:37:50.297

当该类使用 @Ignore 注释时，我收到此错误，我尝试通过右键单击它来运行特定测试。删除@Ignore 解决了这个问题。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-11-03T22:02:13.143

我已经尝试过完全相同的错误。我的问题是我创建的 SetUp 方法被声明为静态的。

如果使用 eclipse，可以通过单击错误上方然后检查故障跟踪窗口来获得很好的描述，就在下面……这就是我发现真正问题的方式！

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-12-07T11:37:05.890

还要确保您将所有`@Before`-, `@After`- 和任何 JUnit 注释的方法声明为`public`. 我已经声明了`private`导致问题的原因。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-11-24T16:10:52.973

如果您的班级中有私有规则，也会出现此问题：

```
@Rule
private TemporaryFolder folderRule; 
```

公开。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-08-07T06:45:34.930

对我来说，这是由于测试方法的“返回类型”。它应该是“无效的”

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-09-01T02:36:04.327

如果这有帮助，我使用的是 Junit5，但 @RunWith(SpringRunner.class) 指向 import org.springframework.test.context.junit4.SpringRunner，它搞乱了事情，因此给出了初始化错误。我解决了这个问题，它奏效了。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-08-16T03:24:05.637

对我来说，这与公共日志记录有关。由于我在使用

```
@RunWith(SpringJUnit4ClassRunner.class) 
```

这解决了我的问题

```
<dependency>
    <groupId>commons-logging</groupId>
    <artifactId>commons-logging</artifactId>
    <version>1.2</version>
</dependency> 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-03-26T03:26:26.190

我只是遇到了同样的问题和同样的信息。我能够通过将`hamcrest-all-1.3.jar`存档导入 Java 构建路径来修复它。我正在使用 JUnit 4.12 版本。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2015-09-28T10:31:59.317

我遇到了同样的问题：曾经是 excel 路径问题，而其他时候它缺少`@Test`注释。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2018-01-16T07:10:11.160

我的错误是我错过了测试方法上的 @Test 注释。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2019-07-04T20:35:40.823

就我而言，我的测试用例中有以下导入：

`import org.junit.jupiter.api.Test;`

正确的导入是：

`import org.junit.Test;`

不要只从 junit 导入任何旧的测试类型，确保选择正确的类型。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2016-07-26T07:39:48.023

我的问题是我的父类没有`@Test`方法。我在那里只使用了一些实用程序。当我宣布它`abstract`有效时。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2015-04-27T19:25:51.353

我遇到了同样的问题...我正在使用具有 JUnit 依赖范围的 Maven 构建工具作为“测试”，而我的 @Test 方法位于主模块中。

为了解决，我有： 1\. 在 pom.xml 中注释 JUnit 依赖的范围标签 2\. 重建包 3\. 确保 Test 类只有一个构造函数

问题可以分为两个方面： 1\. JUnit 依赖仅限于测试范围，@Test 方法在主范围 2\. 测试类有多个构造函数

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2016-02-18T14:16:21.333

对我来说，解决方案是其中一种方法必须是无效的，我把它当作布尔值。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2018-01-03T02:54:37.123

对我来说，我错误地在导致初始化错误的测试方法中添加了一个参数。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2017-09-12T10:16:27.213

就我而言，我在 pom.xml 中更改了项目名称，因此生成了新的目标目录，而 junit 正在旧目录中搜索类。您还需要在 Eclipse 中更改 JUnit 的目录

`Properties -> Java Build Path -> Source (Default output folder)`

并且还要检查，因为在同一窗口中列出的某些源文件夹可能具有以前的目录名称。你也需要改变它们。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2021-01-27T12:55:02.373

In my case, it was because I was not pointing to the correct package where I kept my feature (cucumber) file(s). This was a case of ***wrong path specification***. See code snippet below:

```
import org.junit.runner.RunWith;

import io.cucumber.junit.CucumberOptions;
import io.cucumber.junit.Cucumber;

@RunWith(Cucumber.class)
@CucumberOptions(

    features = "src/test/features",
    glue = "stepDefinitions"

        ) 
```

## Below is the screenshot of the JUnit error: [![Junit Runner Error](../Images/fc574561a6ad6236df0d44e288c76521.png)](https://i.stack.imgur.com/UjAHE.png)

Below is the Stack Trace in the console:

[![enter image description here](../Images/0c48c60df551979f472fa972edb49244.png)](https://i.stack.imgur.com/fAE56.png)

The final solution was I had to change the path to the correct package where my feature files were kept.

## See the corrected code snippet below:

```
package cucumberOptions;

import org.junit.runner.RunWith;

import io.cucumber.junit.CucumberOptions;
import io.cucumber.junit.Cucumber;

@RunWith(Cucumber.class)
@CucumberOptions(

    features = "src/test/java/features",
    glue = "stepDefinitions"

        )

public class TestRunner {

} 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2015-09-18T08:28:35.587

我有同样的问题，我的解决方案如下。

我只从网上安装了 junit.jar 文件，但是这个库与 hacrest-core.jar 相关当我下载 hacrest-core.jar 文件并将其添加到我的项目中时，一切正常。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2016-10-19T13:00:49.937

如果您使用的是 xtend 语言（或其他带有类型推断的 JVM 语言）并且没有显式定义返回类型，那么它可能会因为最后一个表达式而设置为非 void 类型，这将使​​ JUnit 失败。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2016-09-17T00:58:38.303

Junit 4.11 不适用于 Spring Test 框架。此外，此链接[InitializationError When Use Spring + Junit](http://lifelongprogrammer.blogspot.com/2016/09/initializationerror-when-use-spring.html)解释了如何在 eclipse 中调试 junit initalizationError。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2017-01-19T11:53:37.650

我得到了另一个失败跟踪，但对于使用他们最喜欢的搜索引擎的未来访问者：

对我来说，问题是 eclipse 不知何故决定在我的测试类中只执行一个方法（不过我不知道为什么）。特别是如果您没有更改设置中的任何内容，请检查您的运行配置。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2019-02-25T17:35:51.210

我天真地将 poi.apache.org 中的 junit-4.12.jar 添加到我在 Eclipse 中的构建路径中。我删除了它（项目、属性、Java 构建路径、库、junit-4.12.jar、删除），然后在我的测试类中允许 Eclipse 在按下 Ctrl-1 后“修复项目设置”。没有更多的问题！:-)

# ruby - 为什么 __FILE__ 大写而 __dir__ 小写？

> ID：15190700
> 
> 赞同：66
> 
> 时间：2013-03-03T20:50:06.170
> 
> 标签：ruby, syntax, language-implementation

在 Ruby 2.0.0-p0 中，`__dir__`引入了该变量以便于访问当前正在执行的文件的目录。

为什么大写是`__dir__`小写`__FILE__`？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-03-03T20:53:35.813

我认为这是因为`__FILE__`它是一个解析时间常数，而`__dir__`它是一个函数并返回`File.dirname(File.realpath(__FILE__))`

有关更多详细信息，请参阅[此讨论](https://web.archive.org/web/20100414044710/http://www.ruby-forum.com/topic/193674)

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2013-03-03T21:33:23.853

## TL; 博士

语言实现选择的相对优点超出了合理的堆栈溢出问题的范围。然而，这是一个很好的问题，因为它确定了语言中可能令人困惑的用例，并试图澄清两种语言元素之间的区别。

## 关键字、方法和看起来像方法的关键字

### `__FILE__`是关键字

在 Ruby 1.9 中，`__FILE__`是一个关键字。尽管它看起来像在 Object 类上定义的方法，但[Object#__FILE__](http://ruby-doc.org/docs/keywords/1.9/Object.html#method-i-__FILE__)的源代码说：

```
# File keywords.rb, line 68
def __FILE__
end 
```

对 2.0.0-p0 中的源代码进行快速扫描并没有找到关键字 .rb 文件，但可以假设在`__FILE__`语法上仍然是关键字。也许其他人可以将您指向当前定义的位置。

### `__dir__`是一种方法

[Kernel#__dir__](http://www.ruby-doc.org/core-2.0/Kernel.html#method-i-__dir__)实际上是一个方法。您可以通过 grepping 内核定义的方法来亲自查看：

```
Kernel.methods.grep /__dir__/
# => [:__dir__] 
```

## 错误和讨论

`__FILE__`既是关键字又是（某种）方法的事实[在错误](https://bugs.ruby-lang.org/issues/7975)和一些[与错误相关的评论](https://bugs.ruby-lang.org/issues/7975#note-3)中被调用。[Ruby-Core 论坛](https://web.archive.org/web/20100414044710/http://www.ruby-forum.com/topic/193674)中还讨论了命名约定的各种利弊。

虽然答案可能有点不尽人意，但这就是目前的情况。如果这是您强烈关注的语言设计问题，那么加入 Ruby 核心团队将是解决它的正确方法。

# mysql - 使用 mysql 别名从 2 个表中选择列

> ID：15190706
> 
> 赞同：8
> 
> 时间：2013-03-03T20:50:30.413
> 
> 标签：mysql, sql, select, alias

我有 2 个表：table_a 和 table_b。两者都包含一个名为“open”的列。

```
table_a
+-------+
| open  |
+-------+
| 36.99 |
| 36.85 |
| 36.40 |
| 36.33 |
| 36.33 |
+-------+

table_b 
+------+
| open |
+------+
| 4.27 |
| 4.46 |
| 4.38 |
| 4.22 |
| 4.18 |
+------+ 
```

我想编写一个返回以下内容的查询

```
+-------++------+
| open  || open |
+-------++------+
| 36.99 || 4.27 |
| 36.85 || 4.46 |
| 36.40 || 4.38 |
| 36.33 || 4.22 |
| 36.33 || 4.18 |
+-------++------+ 
```

我尝试以下查询：

```
select a.open, b.open from  table_a a, table_b b; 
```

这将为 table_a.open 的每个值返回一个 table_b.open 的每个值

```
+-------++------+
| open  || open |
+-------++------+
| 36.99 || 4.27 |
| 36.99 || 4.46 |
| 36.99 || 4.38 |
| 36.99 || 4.22 |
|   ... || 4.18 |
+   ... ++------+ 
```

我可以看到我在这里误解了别名的正确用法。有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-03T20:54:51.357

这不是您遇到的别名问题。您正在[`CROSS JOIN`](http://en.wikipedia.org/wiki/Join_%28SQL%29#Cross_join)创建笛卡尔结果集的表上执行。

这会使您的结果集成倍增加，因此 from`table_a`中的每一行都直接匹配到`table_b`.

如果你想把`JOIN`表格放在一起，那么你需要一些列来连接表格。

如果您有一列要`JOIN`打开，那么您的查询将是：

```
select a.open as a_open,
  b.open as b_open
from table_a a
inner join table_b b
  on a.yourCol = b.yourCol 
```

如果您没有可用于连接的列，则可以创建一个用户定义的变量来执行此操作，这将为每一行创建一个行号。

```
select 
   a.open a_open, 
   b.open b_open
from
(
  select open, a_row
  from
  (
    select open,
      @curRow := @curRow + 1 AS a_row
    from table_a
    cross join (SELECT @curRow := 0) c
  ) a
) a
inner join
(
  select open, b_row
  from 
  (
    select open,
      @curRow := @curRow + 1 AS b_row
    from table_b 
    cross join (SELECT @curRow := 0) c
  ) b
) b
  on a.a_row = b.b_row; 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!2/9b1b1/29)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T20:59:10.880

您需要一个可用于连接这两个表的列。

您可以尝试将伪列生成为行号，但我不确定这是您想要实现的目标。这应该看起来像这样（现在可以测试它，但想法很清楚）：

```
SELECT
    a.open, b.open
FROM
    (SELECT
        open, @curRow := @curRow + 1 AS row_number
     FROM
        table_a
     JOIN
        (SELECT @curRow := 0)
    ) a
JOIN
    (SELECT
        open, @curRow := @curRow + 1 AS row_number
     FROM
        table_b
     JOIN
        (SELECT @curRow := 0)
    ) b
ON
    a.row_number = b.row_number 
```

# sass - 960gs Sass 参数

> ID：15190711
> 
> 赞同：1
> 
> 时间：2013-03-03T20:51:26.370
> 
> 标签：sass, 960.gs

我目前正在使用 sass / compass 学习 960gs，但我对以下代码中的“$n”是什么以及如何使用参数感到困惑。

```
$ninesixty-gutter-width: 20px !default

$ninesixty-grid-width: 960px !default

$ninesixty-columns: 12 !default

$ninesixty-class-separator: "_" !default

=grid-container
  margin-left: auto
  margin-right: auto
  width: $ninesixty-grid-width

=grid-width($n, $cols: $ninesixty-columns, $gutter-width: $ninesixty-gutter-width)
  width: $ninesixty-grid-width / $cols * $n - $gutter-width 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T17:47:55.687

根据该插件的[文档](https://github.com/nextmat/compass-960-plugin)...

“是在原始 960 网格系统框架中或与原始 960 网格系统框架`N`一样跨越的网格列数。”`grid_N``push_N`

# android - 什么是 ksoap 命名空间？

> ID：15190712
> 
> 赞同：1
> 
> 时间：2013-03-03T20:51:26.947
> 
> 标签：android, web-services, ksoap

请稍微解释一下 ksoap android 对象。我在任何地方都找不到任何帮助。

1.  声明 ksoap 对象时，“命名空间”的含义和目的是什么？
2.  “SoapSerializationEnvelope”对象的目的是什么？
3.  “HttpTransportSE”对象的目的是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-21T12:07:50.730

KSOAP 是基于 kXML 的 SOAP API，其中 kXML 是基于 Java 的轻量级 XML 解析器，旨在运行在有限的嵌入式系统（例如个人移动设备）上

检查此链接以获取详细信息。 [SOAP和KSOAP之间的区别](https://stackoverflow.com/questions/7425808/difference-between-soap-and-ksoap)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-25T13:17:23.547

根据[这个](https://code.google.com/p/ksoap2-android/)网页： -

> ksoap2-android 项目为Android 平台提供了一个轻量级、高效的SOAP 客户端库。
> 
> 它是 kSOAP2 库的一个分支，主要在 Android 平台上进行测试，但也应该在使用 Java 库的其他平台上工作。它仍在使用 Java 1.3，因此在 JavaME、Blackberry 等上应该可以正常工作。

# c# - 寻找带有 CSS 选择器的 C# Html 解析器

> ID：15190713
> 
> 赞同：5
> 
> 时间：2013-03-03T20:51:29.210
> 
> 标签：c#, java, html

现在我正在使用`HtmlAgilityPack`.

但是 Xpath 很难选择。

在 Java 中我知道`Jsoup`。有没有相同的.net 库？

解析 Html 并使用 CSS 样式选择器来查找元素。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T20:57:35.067

使用 HtmlAgilityPack尝试[Fizzler](http://code.google.com/p/fizzler/)。

菲兹勒是：

> 一个 .NET 库，用于基于 CSS 选择器从节点树中选择项目。默认实现基于 HTMLAgilityPack 并从 HTML 文档中进行选择。

来自项目网站的示例：

```
// Load the document using HTMLAgilityPack as normal
var html = new HtmlDocument();
html.LoadHtml(@"
  <html>
      <head></head>
      <body>
        <div>
          <p class='content'>Fizzler</p>
          <p>CSS Selector Engine</p></div>
      </body>
  </html>");

// Fizzler for HtmlAgilityPack is implemented as the 
// QuerySelectorAll extension method on HtmlNode

var document = htmlDocument.DocumentNode;

// yields: [<p class="content">Fizzler</p>]
document.QuerySelectorAll(".content"); 

// yields: [<p class="content">Fizzler</p>,<p>CSS Selector Engine</p>]
document.QuerySelectorAll("p");

// yields empty sequence
document.QuerySelectorAll("body>p");

// yields [<p class="content">Fizzler</p>,<p>CSS Selector Engine</p>]
document.QuerySelectorAll("body p");

// yields [<p class="content">Fizzler</p>]
document.QuerySelectorAll("p:first-child"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T21:00:12.213

你可以试试这个库，它对我来说很有希望。我自己没有尝试过，所以如果您尝试使用该库，也许您想与我们分享您的经验。

库：CsQuery 网站：[https](https://github.com/jamietre/CsQuery) ://github.com/jamietre/CsQuery 示例：

```
// get all elements that are first children within 'body' (e.g. excluding 'head')
var childSpans = dom["body"].Find(":first-child"); 
```

# vb.net - 表单提交 MVC3 上的属性丢失值

> ID：15190718
> 
> 赞同：0
> 
> 时间：2013-03-03T20:52:15.650
> 
> 标签：vb.net, asp.net-mvc-3

这是一个 mvc3，Razor 视图引擎，vb.net 项目。我被困在一个地方，这或多或少是一个问题，直到现在才不得不做这样的事情。

基本上，问题的关键在于我有一个视图，其中可以包含 1 到多个复选框，具体取决于表中列出的项目数量。复选框也将使用该表提供的名称。当模型被传回时，用户选中的任何复选框都将保存在控制器中。

除非提交，否则一切正常。单击提交按钮时，我失去了模型的 Bodies 属性。

```
@ModelType xxxxxx.CourseModel

@Code
ViewData("Title") = "Edit Courses"
End Code

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")"  type="text/javascript"></script>

 @Using Html.BeginForm(Nothing, Nothing, FormMethod.Post, New With {.enctype = "multipart/form-data"})
 @Html.ValidationSummary(True)

    @<fieldset>
    <legend>Edit Courses</legend>
    @Html.HiddenFor(Function(model) model.cId)
    <table style="float: left">
    <tr>

     <th>Certification Bodies</th>
     </tr>
     <tr>
     @For _i As Integer = 0 To Model.Bodies.Count - 1
            Dim i = _i
            @<td>@Html.CheckBoxFor(Function(model) model.Bodies.ElementAt(i).certSelected)@Html.DisplayFor(Function(f) f.Bodies.ElementAt(i).certName)@Html.HiddenFor(Function(model) model.Bodies.ElementAt(i).certBodyId)</td>
        Next

    </tr>
    <tr><th><input type="submit" value="Save" /></th></tr>
    </table> 
```

目前模型如下：

```
 Public Class CourseModel
       Private _cId As Integer
       Public Property cId() As Integer
       Get
        Return _cId
       End Get
       Set(ByVal value As Integer)
        _cId = value
       End Set
       End Property
       Private m_Bodies As New List(Of CertBodyVM)
    Public Property Bodies() As List(Of CertBodyVM)
    Get
        Return m_Bodies
    End Get
    Set(value As List(Of CertBodyVM))
        m_Bodies = value
    End Set
    End Property
    End Class 
```

这是 CertBodyVM

```
Public Class CertBodyVM
Private _certName As String
Public Property certName() As String
    Get
        Return _certName
    End Get
    Set(ByVal value As String)
        _certName = value
    End Set
End Property
Private _certSelected As Boolean
Public Property certSelected() As Boolean
    Get
        Return _certSelected
    End Get
    Set(ByVal value As Boolean)
        _certSelected = value
    End Set
End Property
Private m_certBodyId As Integer
Public Property certBodyId() As Integer
    Get
        Return m_certBodyId
    End Get
    Set(ByVal value As Integer)
        m_certBodyId = value
    End Set
End Property
End Class 
```

最后是加载此视图的控制器功能..

```
 Function EditCourse(ByVal id As Integer) As ViewResult

        Dim courses As New CourseModel
        Dim newCourse As cours = db.courses.Single(Function(c) c.course_id = id)

        courses.cId = newCourse.course_id

        courses.cRef = newCourse.course_ref

        Dim cBodies As List(Of certbody) = db.certbodies.Where(Function(F) F.confNum = _AnnualNumber AndAlso F.Display = 1).ToList
        For Each _cb In cBodies
            Dim cb = _cb
            Dim x As New CertBodyVM
            x.certBodyId = cb.idCertBodies
            x.certName = cb.CertBodyName
            Try
                Dim csetBodies As coursecertifybody = db.coursecertifybodies.Where(Function(f) f.cert_Body_id = cb.idCertBodies AndAlso f.course_ref = newCourse.course_ref AndAlso f.course_id = newCourse.course_id).FirstOrDefault
                If Not IsNothing(csetBodies) Then
                    x.certSelected = True
                Else
                    x.certSelected = False
                End If
            Catch ex As Exception
                x.certSelected = False
            End Try
            courses.Bodies.Add(x)
        Next

        Return View(courses)
    End Function 
```

为了符合 SO 标准，我在下面包含了后控制器功能，因为我可以在 _eCourse var 上放置一个手表并看到身体是空的，所以除了下面的内容之外不需要任何东西。

```
 <AcceptVerbs(HttpVerbs.Post)>
    Function EditCourse(ByVal _eCourse As CourseModel) As ActionResult
     'Do something with _eCourse
    Return RedirectToAction("Blah")
    End Function 
```

任何想法为什么我在提交模型时丢失了 Bodies 属性？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T22:34:18.550

集合的模型绑定不适用于`.elementAt(i)`. 相反，尝试使用这个：

```
@Html.CheckBoxFor(Function(model) model.Bodies[i].certSelected)
@Html.DisplayFor(Function(f) f.Bodies[i].certName)
@Html.HiddenFor(Function(model) model.Bodies[i].certBodyId) 
```

# php - glob() 返回一个空数组

> ID：15190720
> 
> 赞同：3
> 
> 时间：2013-03-03T20:52:36.637
> 
> 标签：php, glob

我试图设置一个包含目录中所有图像文件的数组，我将 index.php 设置在与图像相同的目录中。我使用的代码是

```
$images = glob("*.jpg, *jpeg, *.png, *.gif");

var_dump($images); 
```

返回 -`array(0) { }`在浏览器中..知道我做错了什么吗？

抱歉，如果这是一个如此明显的问题，我对 php 仍然很陌生

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T20:57:05.393

您应该使用`GLOB_BRACE`PHP 文档：

> glob() 函数根据 libc glob() 函数使用的规则搜索所有匹配模式的路径名，这类似于普通 shell 使用的规则。
> 
> [GLOB_BRACE](http://php.net/manual/en/function.glob.php) - 扩展 {a,b,c} 以匹配“a”、“b”或“c”

例子：

```
$directory = __DIR__;
$images = glob("$directory/*.{jpg,jpeg,png,gif}", GLOB_BRACE);
var_dump($images); 
```

# php - 带有 php 的新 MongoId 对象

> ID：15190722
> 
> 赞同：0
> 
> 时间：2013-03-03T20:53:04.337
> 
> 标签：php, arrays, mongodb

我正在尝试通过 PHP 使用个性化 ID 在 MongoDB 上创建新对象，如下所示：

```
 $user = Array(
        '_id'  => "$id",
        'name' => $name,
    ); 
```

这样做的问题是，当我查询 ID 时，我需要使用以下内容：

```
$query = Array( '_id' => "$id" ); 
```

而不是更合适的

```
$query = Array( '_id' => new MongoId("$id") ); 
```

强迫我改变所有的查询。我认为我通过修复插入来做到这一点，通过放置 '_id' => new MongoId("$id") 但是，如果我使用它，它只会创建默认的 mongodb id，而不是我的个性化 ID。

我怎样才能解决这个问题？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T21:07:05.640

我对您在这里要求的确切内容感到有些困惑，但是，我相信我可能会理解。

如果您使用`_id`的默认值`ObjectId`与 MongoDB 用于行的主键的默认值不同，那么您不应使用`ObjectId`或实际上`MongoId`创建该对象。

您应该只在使用提供`MongoId`的默认值时使用`_id`，如果您使用自己的`ObjectId`( `MongoId`) 将无法按预期运行。

所以这里的答案是停止使用`MongoId`.

# sql - SQL从某个数字识别自动增量

> ID：15190726
> 
> 赞同：0
> 
> 时间：2013-03-03T20:53:39.517
> 
> 标签：sql, sql-server

我试图自动增加我的主键，每次增加 0.1。从 0.1 开始。这可能吗？

```
CREATE TABLE NewTable
 (
ID    BigInt    IDENTITY    NOT NULL, 
CONSTRAINT PK_ID PRIMARY KEY (ID),
  ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T20:58:06.780

不，BigInt 是一个 8 字节的**`integer`**值。注意：假设为 Microsoft SQL Server。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T21:05:13.560

No, even if you changed the data type of the field, the identity increment 'must be a non-zero integral number containing 18 digits or less' (Presuming this is sql server)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T21:06:14.447

In SQL Server, the Identity column cannot contain decimal values in its seed or increment.

Why would you need to do this -- for presentation purposes? If so, don't. If needed, one option is to create a trigger. You could also consider using a Computed column instead -- make it 1/10 the value of the Id (your Identity field seeded and incremented at 1 -- Identity(1,1)).

Again, not sure why you'd need to do this though.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T21:45:45.710

一些解决方案将是一个视图：

```
CREATE VIEW v_NewTable AS
SELECT ID/10
FROM NewTable 
```

# python - 如何使用 Python 和 Pandas 在三角套利中寻找最佳机会

> ID：15190728
> 
> 赞同：0
> 
> 时间：2013-03-03T20:53:48.120
> 
> 标签：python, numpy, pandas

我有一个像这样的 Pandas DataFrame（这是一个三角套利问题）

```
>>> df_diff_rel
          a         b         c         d
a -0.833333 -1.666667 -2.500000  0.833333
b  0.000000 -0.840336 -1.680672  1.680672
c -1.652893 -2.479339 -3.305785  0.000000
d -2.459016 -3.278689 -4.098361 -0.819672 
```

我需要知道正值的行名和列名（从最大值到最小值排序）

在我的例子中，我想得到

```
1.680672 b d
0.833333 a d
0        b a
0        c d 
```

我做了这个

```
lst_arbitrage_opportunities = list(df_diff_rel[df_diff_rel>0])
lst_arbitrage_opportunities.sort(reverse=True) 
```

但现在我不知道如何获取给定值的行名和列名。

这是获取我的示例的完整代码：

```
import pandas as pd
import numpy as np

class Ticker:
  def __init__(self, ask=None, bid=None):
    self.ask = ask
    self.bid = bid

  def spread(self):
    return(self.ask-self.bid)

  def __repr__(self):
    str = """ask: {ask}
bid: {bid}""".format(ask=self.ask, bid=self.bid)

    if self.ask!=None and self.bid!=None:
      str = str + """
spread: {spread}""".format(spread=self.spread())

    return(str)

markets = ['a', 'b', 'c', 'd']

markets_tickers = dict()
markets_tickers['a'] = Ticker(1.20, 1.19)
markets_tickers['b'] = Ticker(1.19, 1.18)
markets_tickers['c'] = Ticker(1.21, 1.17)
markets_tickers['d'] = Ticker(1.22, 1.21)

df_ask = pd.DataFrame(index=markets, columns=markets)
df_bid = pd.DataFrame(index=markets, columns=markets)

size = 1.0

for mk in markets:
  print("="*5+mk+"="*5)
  print(markets_tickers[mk])
  df_ask.ix[mk]=markets_tickers[mk].ask
  df_bid[mk]=markets_tickers[mk].bid

df_diff_abs = (df_bid - df_ask)*size
df_diff_rel = (df_bid - df_ask)/df_ask*100.0

df_arbitrage_opportunities = df_diff_rel>0

lst_arbitrage_opportunities = list(df_diff_rel[df_diff_rel>0])
lst_arbitrage_opportunities.sort(reverse=True)

print("Ask")
print(df_ask)
print("Bid")
print(df_bid)
print("Diff abs")
print(df_diff_abs)
print("Diff rel")
print(df_diff_rel)
print("Arbitrage opportunities")
print(df_arbitrage_opportunities)
print("List of opportunities (from the best to the worst)")
print(lst_arbitrage_opportunities) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T22:20:14.967

这是一个简单的单行解决方案：

要获取所需形状的数据，可以使用 unstack 方法：

```
In [2]: df.unstack()
Out[2]:
a  a   -0.833333
   b    0.000000
   c   -1.652893
   d   -2.459016
b  a   -1.666667
   b   -0.840336
   c   -2.479339
... 
```

然后，您可以像这样过滤此列表以查找值 >= 0 ：

```
In [3]: df.unstack()[df.unstack() >= 0]
Out[3]:
a  b    0.000000
d  a    0.833333
   b    1.680672
   c    0.000000 
```

最后，您可以访问上述对象的索引以返回标签列表：

```
In [1]: df.unstack()[df.unstack() >= 0].index.tolist()
Out[1]: [('a', 'b'), ('d', 'a'), ('d', 'b'), ('d', 'c')] 
```

**更新：**

要按降序排序，请使用`Series.order`方法而不是`sort`：

```
In [1]: tmp = df.unstack()[df.unstack() >= 0]

In [2]: tmp = tmp.order(ascending=False)

In [3]: tmp
Out[3]:
d  b    1.680672
   a    0.833333
   c    0.000000
a  b    0.000000

In [4]: tmp.index.tolist()
Out[4]: [('d', 'b'), ('d', 'a'), ('d', 'c'), ('a', 'b')] 
```

# google-drive-api - Google Drive API 修订 list() 和 get() 方法未填充 lastModifyingUser 对象

> ID：15190729
> 
> 赞同：6
> 
> 时间：2013-03-03T20:53:52.443
> 
> 标签：google-drive-api

针对 Google Drive Revisions API使用`list`or`get`方法，我得到非常小的结果对象，没有`lastModifyingUser`数据。我可以轻松地在 API 文档中的 API Explorer 中为这两种方法重现这一点。

所有修订响应都返回相同的空白数据，如下所示：

```
"lastModifyingUserName": "",
"lastModifyingUser": {
  "kind": "drive#user",
  "isAuthenticatedUser": false
 } 
```

这些请求已针对 Google Apps for business 帐户获得完全授权，并且所有修改均由已登录的 Google Apps 用户进行。我在获取任何其他文档元数据时没有问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-24T18:24:31.557

为 Google Docs（电子表格、演示文稿等）文件复制了相同的结果。

目前，您可以使用`Files.get()`which 将返回`lastModifyingUser`整个文件的最新更改，尽管您无法查看`lastModifyingUser`每个修订。

我会为你报告这件事。对造成的不便表示歉意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-24T16:36:13.053

您可以从修订中获取有关用户的信息，但不能从集合中获取

```
var requestRevision = driveService.Revisions.Get(fileId, revision.Id);
requestRevision.Fields = "lastModifyingUser";
var lastModifyingUser= requestRevision.Execute();
Console.WriteLine($"Revision found for datetime: {revision.ModifiedTime}, revisionid: {revision.Id}, user: {lastModifyingUser.LastModifyingUser?.EmailAddress}"); 
```

# ios - ShareKit 断言：“ShareKit 已被重构为用作 Xcode 子项目。”

> ID：15190730
> 
> 赞同：3
> 
> 时间：2013-03-03T20:54:00.537
> 
> 标签：ios, objective-c, assert, git-submodules, sharekit

我无法让[ShareKit 2.0](https://github.com/ShareKit/ShareKit)在我的应用程序中运行。我已经按照最新的安装说明，为 ShareKit 创建了一个子模块，并尝试了清理和重建、删除和替换子模块等等。但是当我尝试创建一个时，`SHKActionSheet`我得到了这个断言：

> 2013-03-03 15:48:39.998 Symmetry Lab[4170:907] *** NSString *SHKLocalizedStringFormat(NSString *)()、/Users/lukebradford/Apps/Symmetry Lab/Submodules/ShareKit/Classes/ShareKit 中的断言失败/Core/SHK.m:811 2013-03-03 15:48:40.004 Symmetry Lab[4170:907] *** 由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“ShareKit 已被重构为用作 Xcode子项目。请按照更新的安装 wiki 并将其重新添加到项目中。请不要忘记之后清理项目并清理构建文件夹。如果您使用 CocoaPods 覆盖 - (NSNumber *)isUsingCocoaPods; 配置器子类中的方法并返回 [NSNumber numberWithBool:YES]'

我已经将 ShareKit 用于其他应用程序，而新旧安装方法都没有问题。有没有人遇到过类似的事情或怀疑是什么原因造成的？

我不会对 ShareKit 做任何疯狂的事情，只需设置我的自定义配置器，然后启动带有图像的操作表。感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T21:33:47.847

您使用的是哪个版本的 sharekit？[您是否使用来自https://github.com/ShareKit/](https://github.com/ShareKit/)的最新版本（他们称之为“2.0”）？我最近在一个项目中使用了它，并且遇到了各种各样的痛苦，直到我意识到网络上出现最多的版本（[http://getsharekit.com](http://getsharekit.com)）对当前的 iOS 来说是一个很大的伤害。

# php - 重写url（download.php/video.mp4到download.php）

> ID：15190735
> 
> 赞同：-1
> 
> 时间：2013-03-03T20:54:06.140
> 
> 标签：php, url-rewriting

如何重写 URL，以便当我的 JW 播放器通过链接 ( **[http://www.example.com/download.php](http://www.example.com/download.php) */video.mp4*** ) 访问文件时，它实际上访问的是**[http://www.example.com/download.php](http://www.example.com/download.php)**？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T21:07:33.363

这是您需要在网络服务器级别配置的内容。

如果您在 Apache 网络服务器上，请查看 mod_rewrite。[http://httpd.apache.org/docs/current/mod/mod_rewrite.html](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T21:16:24.073

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule download\.php/(.*) /download.php?file=$1 [L,QSA] 
```

# android - Android Force GPU Rendering 如何启用和禁用？

> ID：15190736
> 
> 赞同：11
> 
> 时间：2013-03-03T20:54:08.273
> 
> 标签：android, canvas, gpu, hardware-acceleration

我正在构建一个需要在画布上进行大量绘图的应用程序。我注意到该应用程序在高分辨率设备（例如nexus 7）中有点滞后。我看到开发人员选项中有一个 Force GPU 选项。启用 Force GPU 后，我的应用程序运行绝对流畅。

我读过这个 Force GPU 选项称为硬件加速，它仅适用于 Android 3.0 及更高版本。

我的应用程序面向 Android 2.3 及更高版本。

是否可以在任何 Android 3.0 或更高版本的设备上以编程方式启用硬件加速（或强制 GPU——无论其名称如何）？

就像是：

```
if(Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB){

    Turn On Hardware Accelerate HERE but How can i do this?
    any code snippet would be welcome/helpful/thanks

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-03T20:59:20.803

我假设您已经将 android:hardwareAccelerated 添加到您的清单文件中？

```
<application android:hardwareAccelerated="true" ...> 
```

这就是[根据硬件加速指南在您的应用程序中启用硬件加速的](http://developer.android.com/guide/topics/graphics/hardware-accel.html)原因，并且应该完全按照强制 GPU 在系统级别执行的操作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-22T09:17:37.473

将 minSdkVersion 设置为 10，将 targetSdkVersion 设置为最大值

像下面

```
 <uses-sdk
        android:minSdkVersion="10"
        android:targetSdkVersion="17" /> 
```

然后

```
<application android:hardwareAccelerated="true" ...> 
```

现在可以工作

对于特殊性

```
if(android.os.Build.VERSION.SDK_INT >= android.os.Build.VERSION_CODES.HONEYCOMB){
     view.setLayerType(View.LAYER_TYPE_HARDWARE, null);
} 
```

或者

```
if(android.os.Build.VERSION.SDK_INT >= android.os.Build.VERSION_CODES.HONEYCOMB){
     view.setLayerType(View.LAYER_TYPE_SOFTWARE, null);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-04T19:04:30.233

如果您想使用较低的 api 级别构建您的应用程序，您可以通过反射访问该方法：

```
 try {
        Method setLayerType = view.getClass().getMethod(
                "setLayerType", new Class[] { int.class, Paint.class });
        if (setLayerType != null)
            setLayerType.invoke(view, new Object[] { LAYER_TYPE_X, null });
    } catch (NoSuchMethodException e) {
    } catch (IllegalArgumentException e) {
    } catch (IllegalAccessException e) {
    } catch (InvocationTargetException e) {
    } 
```

其中 LAYER_TYPE_X 是所需层类型的常量整数值：

```
LAYER_TYPE_NONE = 0
LAYER_TYPE_SOFTWARE = 1
LAYER_TYPE_HARDWARE = 2 
```

# php - php循环从第二个表中获取值

> ID：15190751
> 
> 赞同：0
> 
> 时间：2013-03-03T20:54:52.607
> 
> 标签：php, mysqli

`tableA`我有两个表：`tableB`我想打印`tableB`. 我的表结构如下：

```
Table A 
-id--------Name-----
 1          A
 2          B
 3          C
 4          D
--------------------

Table B

tableB_id-----------tableA_id-------------value-------
1                      1                    68
2                      1                    94
3                      1                    97
4                      1                    88
5                      1                    93
6                      1                    69
7                      1                    95
8                      2                    68
9                      2                    94
10                     3                    68
11                     4                    68
12                     4                    95
------------------------------------------------------ 
```

最终输出需要如下所示，值以逗号分隔

```
id------Name----------value-----------------------------------------
 1        A        68,94,97,88,93,69,95
 2        B        68,94
 3        C        68
 4        D        68,95 
```

* * *

我尝试了以下代码：

这里对于 id 中的每个 id`tableA`将有多个`print_r($arr1)`命令表示为`FIRST`. 在代码中，它正在打印重复的值，但命令 reperesent as`SECOND`正在获取正确的值。

我的问题是如何避免`FIRST`代码部分中的重复值

```
<?php
$rs = mysqli_query($dbc,"SELECT * FROM `tableA`  limit $offset,$rows");
$items = array();   
$a=0;
while($row1 = mysqli_fetch_object($rs))
{ 
  $qry1 = mysqli_query($dbc,"SELECT tableB.value FROM tableA ,tableB WHERE tableA.`tableA_id`=tableB.`tableA_id` AND tableA.`tableA_id`='".$row->id."'");    
  $i=0;   
  while($row2 = mysqli_fetch_assoc($qry1))  
  {
    if($row2['id']=$row1->id)
    {
      $arr1 = $row2['value'];
    }
    print_r($arr1); // SECOND
    $i++;
  }   
  print_r($arr1); // FIRST
  array_push($items, $row1);
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T20:58:33.010

我不确定我是否正确理解了这个问题 - 但我认为您可能正在寻找的是[GROUP_CONCAT](http://mahmudahsan.wordpress.com/2008/08/27/mysql-the-group_concat-function/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T21:45:30.750

我认为 GeoffK 与 GROUP_CONCAT 走在正确的轨道上。尝试这样的事情：

```
SELECT tableA.id AS id,
       tableA.name AS name,
       GROUP_CONCAT( tableB.value ) AS value
FROM tableA
  JOIN tableB
    ON tableA.id = tableB.tableA_id
GROUP BY tableA.id 
```

# image - 如何让从 facebook-graph-api 上传的图片以与 Web 浏览器相同的方式直接显示？

> ID：15190753
> 
> 赞同：-1
> 
> 时间：2013-03-03T20:54:59.530
> 
> 标签：image, facebook-graph-api, upload

您可以从下图中看到差异。目标是在不下载的情况下显示图片..

![在此处输入图像描述](../Images/f2edd429d89d47bd4509f6f714f0ccd9.png)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T21:19:07.683

在您的示例中，其中一个被视为文档，另一个是图片。文件或您的上传可能有问题。使用图片，将自动显示预览。有了文件，他们不会。

# android - 白色矩形代替 TextureRegion（使用 libgdx）

> ID：15190754
> 
> 赞同：0
> 
> 时间：2013-03-03T20:55:06.253
> 
> 标签：android, textures, libgdx

标题中的主题

加载纹理，制作

```
private static Map<String, Texture> textureAlreadyLoad = new HashMap<String, Texture>(); 
```

加载源

```
String location = tagMap.get("location");
Texture texture;

if(textureAlreadyLoad.containsKey(location)) {
    texture = textureAlreadyLoad.get(location);
} else {
    texture = new Texture(Gdx.files.internal(location));
    textureAlreadyLoad.put(location, texture);
}

graphic = new StaticGraphic(state, new TextureRegion(texture)); 
```

支持班

```
public class GraphicStorage {
    private Map<Pair<String, State>, ActorGraphic> ActorsGraphic;

    public GraphicStorage() {
        ActorsGraphic = ResourceProvider.getMapGraphic();
    }

    public ActorGraphic getGraphic(String className, State state) {
        return ActorsGraphic.get(new Pair<String, State>(className, state));
    }
} 
```

然后我只是用 spriteBatch 绘制它——只有 64x64 白色矩形（图像大小） 这是我使用一个图像的一点。

在地图中存储纹理好不好？

# c++ - “智能”元素的钩子

> ID：15190758
> 
> 赞同：0
> 
> 时间：2013-03-03T20:55:27.703
> 
> 标签：c++, boost, c++11

在 C++11 中是否有任何简单/优雅的方式，通过 STL 或 boost，使元素类型“智能”，以便它的实例始终知道它属于哪个容器并具有一种“自动”的成员函数-removal”，它还负责更新它所属的容器？

真实情况是，在给定请求完成后，我调用了一个回调 C 函数（来自 C 库）。此函数接受指向已处理元素的原始指针。现在我想要的是从它所属的列表中删除这个元素并将其移动到另一个列表中。

我知道我可以将指向容器的指针存储在元素本身中，当调用回调时，我可以遍历该容器，直到找到元素，然后将其删除并调用`newlist.push_back(object)`. 鉴于一个元素必须存在于一个容器中（并且只有一个），我想知道是否有更优雅的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T21:17:33.560

Boost 的[侵入式容器](http://www.boost.org/doc/html/intrusive/presenting_containers.html)实现了该功能。

然而，这需要特定的容器以及专门设计用于与容器一起使用的对象。

# python - Python，倒计时不睡觉的计时器

> ID：15190760
> 
> 赞同：2
> 
> 时间：2013-03-03T20:56:09.170
> 
> 标签：python, multithreading, countdown

我是 python 新手，我正在尝试在单击按钮时制作倒数计时器。但我希望这个倒计时计时器开始倒计时并将当前倒计时值放在文本区域中。我还需要应用程序的其余部分在此倒计时运行时不休眠。到目前为止，它将在控制台中输出倒计时，但会冻结应用程序的其余部分。有人可以指出我正确的方向吗？

```
from Tkinter import *
import time
import threading
import thread

class App:

    def __init__(self, master):

        frame = Frame(master)
        frame.pack()

        self.getvalue = Button(frame, text="Get the Text Area", command=self.thevalue)
        self.getvalue.pack(side=LEFT)

        self.text_area = Entry()
        self.text_area.pack(side=RIGHT)

    def thevalue(self):
        print "In the value"
        try:
            t = threading.Thread(target=self.print_time("I am in print_time"))
            t.daemon = True
            t.start()
        except:
            print "Error: unable to start thread"

    def print_time(self,bleh):
        print bleh
        print "The text area value is %s" % self.text_area.get()
        boom=5
        while boom >0:
            time.sleep(1)
            self.text_area.delete(0, END)
            self.text_area.insert(0, boom)
            print(boom)
            boom -=1

root = Tk()

app = App(root)

root.mainloop() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T21:05:06.557

```
threading.Thread(target=self.print_time("I am in print_time")) 
```

这不会做你想做的事。这里发生的`self.print_time`是调用该函数，然后将其返回值传递给`threading.Thread`.

您需要像这样创建线程：

```
t = threading.Thread(target=self.print_time, args=("I am in print_time",)) 
```

# amazon-web-services - 带有 Route 53 的 Amazon CloudFront

> ID：15190764
> 
> 赞同：0
> 
> 时间：2013-03-03T20:56:38.387
> 
> 标签：amazon-web-services, amazon, routes, amazon-cloudfront

我使用路由 53 作为我的 dns 服务器然后我的路由 53 记录中有一条 A 记录称为 `image.mysite.com. A 111.222.333.444`

然后我想使用 CloudFront 作为我的 cdn 来缓存图像然后我添加了新的 Distributions 并删除了 A 记录添加 cname：

```
image.mysite.com.    CNAME    d23456.cloudfront.net 
```

但是当我访问我的网站 image.mysite.com 时，它会显示

```
Sorry, invalid request 
```

当我尝试直接访问 d23456.cloudfront.net 时，它显示：

```
ERROR

Failed to contact the origin. 
```

如何成功将 CloudFront 用作 image.mysite.com CDN 并将路由 53 用作 dns 服务器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T21:04:26.237

From your comment it seems that you point CloudFront to the origin server `images.mysite.com` which actually points back to CloudFront so CloudFront doesn't know how to access your site.

Create another DNS record (e.g. `origin.mysite.com. IN A 111.222.333.444`) and point CloudFront to it. After that CloudFront would respond to requests to `images.mysite.com` with data from `origin.mysite.com`.

# ruby-on-rails - 使用导轨计算对外部链接的点击次数

> ID：15190766
> 
> 赞同：2
> 
> 时间：2013-03-03T20:56:49.433
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有`Entry`带有`url`字段的模型，其中包含指向外部站点的链接。在视图中我列出了这些链接，现在我想在有人点击它时开始计数，并将此信息保存在数据库中。最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T21:18:33.023

您可以轻松地使用谷歌分析来跟踪出站链接： http: [//support.google.com/analytics/bin/answer.py ?hl=en&answer=1136920](http://support.google.com/analytics/bin/answer.py?hl=en&answer=1136920)

如果这不是一个选项，您将需要在链接中添加一些 javascript 向服务器发出 ajax 请求以增加计数，然后再将用户转移到新的 url。类似于此 jquery 代码的内容：

```
$('a').click(function(){
  var stored_ulr = $(this).attr('href');

  $.ajax({
   url: #your server url to increment count,
   data: #data you need to send,
   success: function() { window.location = stored_url; },
  });

 return false;
}); 
```

上面的代码只是一个大概的大纲。您必须填写空白并使其满足您的需求。

# android - Cipher.getInstance() 因 java.security.NoSuchAlgorithmException 失败：找不到任何支持 AES/ECB/ZeroBytePadding 的提供程序

> ID：15190770
> 
> 赞同：0
> 
> 时间：2013-03-03T20:57:14.753
> 
> 标签：android, web-applications, encryption-symmetric, aescryptoserviceprovider

我有一个使用带有 ECB 和 ZeroBytePadding 的 AES 加密数据的 Android 应用程序。在那种环境下一切正常：加密数据在 Android 中被解密没有问题，如下所示：

```
public static String encrypt(byte[] raw, byte[] clear) throws Exception {
    SecretKeySpec skeySpec = new SecretKeySpec(raw, "AES");
    Cipher cipher = Cipher.getInstance("AES/ECB/ZeroBytePadding");
    cipher.init(Cipher.ENCRYPT_MODE, skeySpec);

    byte[] encrypted = cipher.doFinal(clear);
    return android.util.Base64.encodeToString(encrypted, android.util.Base64.NO_WRAP);
}

public static byte[] decrypt(byte[] raw, byte[] encrypted) throws Exception {
    SecretKeySpec skeySpec = new SecretKeySpec(raw, "AES");
    Cipher cipher = Cipher.getInstance("AES/ECB/ZeroBytePadding");
    cipher.init(Cipher.DECRYPT_MODE, skeySpec);

    byte[] decrypted = cipher.doFinal(encrypted);
    return decrypted;
} 
```

但是，我最近决定在 Web 应用程序中解密数据，当我尝试使用相同的 decrypt() 方法时，Cipher.getInstance("AES/ECB/ZeroBytePadding") 抛出异常：

```
java.security.NoSuchAlgorithmException: Cannot find any provider supporting     
AES/ECB/ZeroBytePadding 
```

我假设某些 Android 库正在提供 javax.crypto.Cipher 中缺少的合适密码提供程序。有没有其他人遇到过这个问题或知道我能做些什么？将密码填充更改为 PKCS5PADDING 不是一个选项，因为许多消息已经使用早期选项加密。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:45:34.587

实际上真的没有这样的算法。在此处查看官方 java 文档[http://docs.oracle.com/javase/7/docs/api/javax/crypto/Cipher.html](http://docs.oracle.com/javase/7/docs/api/javax/crypto/Cipher.html)

# php - 在 Laravel 4 上使用非 laravel 包

> ID：15190772
> 
> 赞同：44
> 
> 时间：2013-03-03T20:57:26.797
> 
> 标签：php, laravel, package, laravel-4

是否可以在框架中包含不是专门为 L4 设计的包？如果是这样，它是如何完成的？我知道我需要将包添加到我`composer.json`的文件夹中，但是我可以在数组`vendor`中以某种方式注册它吗？`providers`还有其他必要的步骤吗？

我想使用最初为 Yii 设计的[Google checkout 包](https://packagist.org/packages/tvr/googlecheckout)

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2013-03-05T13:36:22.257

**在 Laravel 4 中使用第三方作曲家包**

当开发人员创建 composer 包时，他们应该使用 PSR-0 或 PSR-4 标准映射自动加载。如果不是这种情况，在你的 Laravel 应用程序中加载包可能会出现问题。PSR-0 标准是：

```
{
    "autoload": {
        "psr-0": { "Acme": "src/" }
    }
} 
```

以及 PSR-4 标准：

```
{
    "autoload": {
         "psr-4": { "Acme\\": "src/" }
    }
} 
```

基本上，以上是告诉作曲家在哪里寻找名称空间文件的标准。如果您不使用自己的命名空间，则无需配置任何其他内容。

***场景 1***

**Laravel 中的 PSR-0 标准以下包（带有自动加载类映射）**

这是一个简单的，例如我将使用 facebook php sdk，可以找到：

[https://packagist.org/packages/facebook/php-sdk](https://packagist.org/packages/facebook/php-sdk)

**第1步：**

将包包含在您的 composer.json 文件中。

```
"require": {
    "laravel/framework": "4.0.*",
    "facebook/php-sdk": "dev-master"
} 
```

**第2步：**

```
run: composer update 
```

**第 3 步：**

因为 facebook 包使用了一个开箱即用的类映射，所以您可以立即开始使用该包。（下面的代码示例直接来自普通视图。请在生产应用程序的视图中保留您的逻辑。）

```
$facebook = new Facebook(array(
    'appId'  => 'secret',
    'secret' => 'secret'
));
var_dump($facebook); // It works! 
```

***情景 2***

对于这个例子，我将使用来自 instagram php api 的包装器。这里需要进行一些调整才能加载包。试一试吧！包可以在这里找到：

[https://packagist.org/packages/fishmarket/instaphp](https://packagist.org/packages/fishmarket/instaphp)

**第1步：**

添加到作曲家 .json

```
"require": {
    "laravel/framework": "4.0.*",
    "fishmarket/instaphp": "dev-master"
} 
```

然后就可以正常更新了（composer update）

接下来尝试像使用 facebook 包一样使用该包。同样，这只是视图中的代码。

```
$instagramconfig = array(
    'client_id' => 'secret',
    'client_secret'=> 'secret',
    'access_token' => 'secret'
);

$api = Instaphp::Instance(null, $instagramconfig);                
var_dump($api); // Epic fail! 
```

如果您尝试上面的示例，您将收到此错误：

```
FatalErrorException: Error: Class 'Instaphp' not found in ... 
```

所以我们需要解决这个问题。为此，我们可以检查 instagram composer.json，它的自动加载与 facebook php sdk 不同。

```
"autoload": {
         "psr-0": { "Instaphp": "." }
    } 
```

与 facebook composer.json 相比：

```
"autoload": {
        "classmap": ["src"]
    } 
```

（Composer 处理不同类型的自动加载，从文件和类映射到 PSR。看看你的`vendor/composer/`文件夹，看看它是如何完成的。）

现在我们必须手动加载类。很简单，只需添加这个（控制器、模型或视图的顶部）：

```
use Instaphp\Instaphp; 
```

作曲家转储自动加载，它的工作原理！

**第二步（可选）**

另一种方法是（如果您不想使用“使用”语句，您可以简单地告诉作曲家直接从您的代码中查找文件。只需像这样更改实例：

```
// reference the name-spaced class straight in the code
$api = Instaphp\Instaphp::Instance(null, $instagramconfig); 
var_dump($api); // It works 
```

但是，我建议使用该`use`语句让其他开发人员（以及您未来的自己）清楚地了解程序中使用了哪些（外部）类/包。

***场景 3***

这里我们使用 Laravel 内置的 IOC 容器来注册服务提供者。请注意，某些软件包可能不适合此方法。我将使用与场景 2 中相同的 Instagram 包。

**又快又脏**

如果您不关心设计模式和服务提供者，您可以像这样绑定一个类：

```
App::bind('Instaphp', function($app)
{
    return new Instaphp\Instaphp;
}); 
```

你像这样解决它。

```
App::make('Instaphp'); 
```

**快速而肮脏的结局**

如果您正在处理一个更大的项目，并且您使用接口，您可能应该进一步抽象绑定。

**第1步：**

在您的应用程序文件夹中创建一个文件夹，例如“提供者”文件夹。

```
app/providers 
```

确保 Laravel 自动加载该文件夹，您可以将一些附加信息传递给 composer.json，如下所示：

```
"autoload": {

    "classmap": [
        "app/commands",
        "app/controllers",
        "app/models",
        "app/database/migrations",
        "app/database/seeds",
        "app/tests/TestCase.php",
        "app/providers" // this was added
    ]

}, 
```

现在在名为 Instagram.php 的新文件夹中创建一个文件并将其放入：

```
 <?php

    use Illuminate\Support\ServiceProvider;

    class InstagramServiceProvider extends ServiceProvider {

    public function register()
    {
        $this->app->bind('Instaphp', function()
        {
            return new Instaphp\Instaphp;
        });

    }

} 
```

现在再次运行 composer dump-autoload，就可以使用这个包了。请注意，instagram 包有一个`final private function __construct()`，这意味着您不能在原始类之外使用该包而不将构造方法更改为公共。我并不是说这是一个好习惯，我建议使用场景 2，就 instagram 包而言。

无论如何，在此之后你可以使用这样的包：

```
$instagramInstance = App::make('Instaphp');

$instagramconfig = array(
    'client_id' => 'secret',
    'client_secret'=> 'secret',
    'access_token' => 'secret'
 );

$instagram = new $instagramInstance();
$userfeed = $instagram->Users->feed($instagramconfig);

var_dump($userfeed); // It works! 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T21:07:01.093

将此添加`"tvr/googlecheckout": "dev-master"`到您的`composer.json`.

运行`composer install`，然后就可以使用 IoC 容器了。一些代码示例可以在 Laravel 4 的官方文档中找到：http: [//four.laravel.com/docs/ioc#basic-usage](http://four.laravel.com/docs/ioc#basic-usage)

# android - 如何使用语音识别器获取音频幅度？

> ID：15190778
> 
> 赞同：2
> 
> 时间：2013-03-03T20:58:02.897
> 
> 标签：android, speech-recognition, android-audiorecord, google-now

我正在尝试在语音识别时进行自定义对话，而不是使用官方对话。我得到了那个部分，但是当我决定在识别时显示声音的幅度，以使其更花哨，就像 Google Now 搜索栏所做的那样（它围绕麦克风的圆圈会随着声音变大而变大）：

[![谷歌现在](../Images/a0531151fea1fb720bfc7879c0cff594.png)](https://i.stack.imgur.com/queTC.png)

然后我开始编写如何获取声音幅度的代码，最后我用 AudioRecord 类得到了它。

当我尝试混合两者（SpeechRecognizer 和 AudioRecord）时，问题就出现了，因为他们似乎无法共享麦克风，或者类似的东西......

在 logcat 我有这个错误：

```
03-03 21:16:07.461: E/ListenerAdapter(23359): onError
03-03 21:16:07.461: E/ListenerAdapter(23359): com.google.android.speech.embedded.Greco3RecognitionEngine$EmbeddedRecognizerUnavailableException: Embedded recognizer unavailable
03-03 21:16:07.461: E/ListenerAdapter(23359):   at com.google.android.speech.embedded.Greco3RecognitionEngine.startRecognition(Greco3RecognitionEngine.java:108)
03-03 21:16:07.461: E/ListenerAdapter(23359):   at java.lang.reflect.Method.invokeNative(Native Method)
03-03 21:16:07.461: E/ListenerAdapter(23359):   at java.lang.reflect.Method.invoke(Method.java:511)
03-03 21:16:07.461: E/ListenerAdapter(23359):   at com.google.android.searchcommon.utils.ThreadChanger$1$1.run(ThreadChanger.java:77)
03-03 21:16:07.461: E/ListenerAdapter(23359):   at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:390)
03-03 21:16:07.461: E/ListenerAdapter(23359):   at java.util.concurrent.FutureTask.run(FutureTask.java:234)
03-03 21:16:07.461: E/ListenerAdapter(23359):   at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:153)
03-03 21:16:07.461: E/ListenerAdapter(23359):   at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:267)
03-03 21:16:07.461: E/ListenerAdapter(23359):   at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
03-03 21:16:07.461: E/ListenerAdapter(23359):   at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
03-03 21:16:07.461: E/ListenerAdapter(23359):   at com.google.android.searchcommon.utils.ConcurrentUtils$2$1.run(ConcurrentUtils.java:112) 
```

还有一些时候我有这个：

```
03-03 21:47:13.344: E/ListenerAdapter(23359): onError
03-03 21:47:13.344: E/ListenerAdapter(23359): com.google.android.speech.exception.AudioRecognizeException: Audio error
03-03 21:47:13.344: E/ListenerAdapter(23359):   at com.google.android.speech.embedded.Greco3Recognizer.read(Greco3Recognizer.java:107)
03-03 21:47:13.344: E/ListenerAdapter(23359):   at dalvik.system.NativeStart.run(Native Method)
03-03 21:47:13.344: E/ListenerAdapter(23359): Caused by: java.io.IOException: couldn't start recording, state is:1
03-03 21:47:13.344: E/ListenerAdapter(23359):   at com.google.android.speech.audio.MicrophoneInputStream.ensureStartedLocked(MicrophoneInputStream.java:119)
03-03 21:47:13.344: E/ListenerAdapter(23359):   at com.google.android.speech.audio.MicrophoneInputStream.read(MicrophoneInputStream.java:159)
03-03 21:47:13.344: E/ListenerAdapter(23359):   at com.google.common.io.ByteStreams.read(ByteStreams.java:806)
03-03 21:47:13.344: E/ListenerAdapter(23359):   at com.google.android.speech.audio.Tee.readFromDelegate(Tee.java:374)
03-03 21:47:13.344: E/ListenerAdapter(23359):   at com.google.android.speech.audio.Tee.readLeader(Tee.java:267)
03-03 21:47:13.344: E/ListenerAdapter(23359):   at com.google.android.speech.audio.Tee$TeeLeaderInputStream.read(Tee.java:464)
03-03 21:47:13.344: E/ListenerAdapter(23359):   at java.io.InputStream.read(InputStream.java:163)
03-03 21:47:13.344: E/ListenerAdapter(23359):   at com.google.android.speech.audio.AudioSource$CaptureThread.run(AudioSource.java:193) 
```

这就是我启动两者的方式：

```
//previously in constructor
speechrec = SpeechRecognizer.createSpeechRecognizer(getActivity());
speechrec.setRecognitionListener(this);
//

public void launchListening()
{       
    if (speechrec.isRecognitionAvailable(getActivity()))
    {
        Intent intent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
        intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL,RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);
        speechrec.startListening(intent);       
    }

    bufferSize = AudioRecord.getMinBufferSize(sampleRate, AudioFormat.CHANNEL_CONFIGURATION_MONO, AudioFormat.ENCODING_PCM_16BIT);// * bufferSizeFactor;
    audio = new AudioRecord(MediaRecorder.AudioSource.MIC, sampleRate, AudioFormat.CHANNEL_CONFIGURATION_MONO, AudioFormat.ENCODING_PCM_16BIT, bufferSize);
    audio.startRecording();

    captureThread = new Thread(new Runnable()
    {
        public void run()
        {
            //calculate amplitude here
        }
    });
    captureThread.start();
} 
```

关于如何为语音识别创建自定义对话框的任何想法，我可以像谷歌那样根据噪声显示幅度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T09:06:48.763

这样做的方法是注册一个监听器`SpeechRecognizer`并可视化[onRmsChanged](http://developer.android.com/reference/android/speech/RecognitionListener.html#onRmsChanged%28float%29)的​​输出。但请注意：

> 不保证会调用此方法。

所以你使用的语音识别器需要支持这种方式。请注意，返回值`SpeechRecognizer.createSpeechRecognizer(getActivity())`取决于用户设备的配置。

（您不能`AudioRecord`在`SpeechRecognizer`录制时开始，反之亦然。）

# javascript - 更改弹出窗口中使用的按钮类的数据内容

> ID：15190782
> 
> 赞同：2
> 
> 时间：2013-03-03T20:58:12.193
> 
> 标签：javascript, button

我有一个用于 twitter popover 的按钮类，我的代码如下：

```
<button class="btn btn-success" id="chaticon" data-original-title="Users Online" data-content="&lt;a href='#'&gt; OMGTEST &lt;/a&gt;"> 
```

我想要做的是修改`data-content`通过javascript，

我天真地试图做：

```
document.getElementById("chaticon").data-content = "new content"; 
```

它没有用，关于我如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T21:02:01.083

使用 HTMLElement 的内置访问器。

```
getAttribute(attributeName)
setAttribute(attributeName,newValue); 
```

像这样：

```
var yourElement = document.getElementById("chaticon");
var dataVal = yourElement.getAttribute("data-content");
var newData = "new data";
yourElement.setAttribute("data-content",newData); 
```

这是一个简单的演示：http: [//jsfiddle.net/hpfk3/](http://jsfiddle.net/hpfk3/)

## 编辑

您可能应该在问题中包含 jquery 和 popover，而不仅仅是询问按钮元素。由于这些可用，您可以像这样更改内容：

```
//store chat icon jQuery object
var chatIcon = $("#chaticon");

//change data attribute on element
//change jquery data object content
//call setcontent method
chatIcon.attr("data-content","new data").data('popover').setContent();

//target the popover element and restore its placement definition
chatIcon.data('popover').$tip.addClass(chatIcon.data('popover').options.placement); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T21:00:29.197

尝试设置属性

```
document.getElementById("chaticon").setAttribute('data-content','new content'); 
```

# ember.js - Ember ArrayController 内容在初始化后未定义

> ID：15190791
> 
> 赞同：1
> 
> 时间：2013-03-03T20:59:08.740
> 
> 标签：ember.js

我有一个 ArrayController 如下：

```
DashboardController = Ember.ArrayController.extend
  content: []

  xFormatter: (x) ->
    d3.time.format("%m-%d") x

  init: ->
    console.log("dashboardController init")
    @_super()

    y = undefined
    currentDate = undefined
    i = 1

    while i < 30
      currentDate = new Date("12/" + i + "/2011")
      @content.pushObject
        x: currentDate
        y: (Math.random() * 100) / 10

      i++ 
```

当应用程序初始化时，控制器被创建（如控制台所示）并且内容在 期间被推送到数组中`init`，但是`content`当我尝试从其他地方（例如视图）访问它时未定义。我试过了`content: null`，然后`@set("content", [])`在开始时做，`init`但得到了相同的结果。

`content`Ember 指南说在我的路由方法中设置一个 ArrayController 的属性`setupController`来告诉它要表示什么模型，但是由于这个“模型”实际上是一个函数的结果，我不知道该怎么做。我认为由于`init`为每个创建的实例运行，每个实例都会在`content`不使用`setupController`.

我认为我从中提取的示例是使用不适合 1.0.0-rc1 的旧方法。我应该如何重组它才能工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T18:02:46.593

A simple fix ( as of EmberJS 1.0.0rc-3 ) is to define the model in the route to the controller content in cases where it already exists. Like So (pardon the coffee script):

```
App.MyRoute = Em.Route.extend
  model: ->
    @get('controller.content') || App.My.find(query) 
```

There was a change in master though, that prevents this from working, so you might need to do

```
App.MyRoute = Em.Route.extend
  model: ->
    controller = @controllerFor('my')
    controller.get('content') || App.My.find(query) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T22:03:53.470

好的，看来诀窍是将生成值的代码移动到`model`路由的钩子中，然后使用`setupController`钩子设置控制器的`content`. 我唯一不喜欢的是，每次转换到路由时都会生成数据（因为每次都会调用`model`and钩子）。`setupController`我想让它计算一次并缓存。我想这样做的方法是创建一个对象，它要么第一次创建新数据，要么返回缓存的数据，然后在`model`挂钩中调用这个对象。

# windows-7 - 用户 mycomputer\myloginName 没有所需的权限

> ID：15190799
> 
> 赞同：4
> 
> 时间：2013-03-03T20:59:42.297
> 
> 标签：windows-7, ssrs-2008

我正在尝试访问 SSRS 的报告管理器 url。但是，我不断收到以下错误 -

用户 mycomputer\myloginName 没有所需的权限。验证是否已授予足够的权限并且已解决 Windows 用户帐户控制 (UAC) 限制。

我尝试按照此处所述以管理员身份运行我的浏览器 -[用户''没有所需的权限，Windows 8 上的 SSRS 2008](https://stackoverflow.com/questions/14433068/user-does-not-have-required-permissions-ssrs-2008-on-windows-8) 没有成功。我也没有看到很多人提到的右上角的“站点设置”。此外，我不能再经历重新安装 SQL Server 的痛苦。我不想禁用 UAC。

由于这个问题，我无能为力。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T21:29:20.817

此解决方案适用于 Internet Explorer。我不知道如何为 firefox 或 chrome 做到这一点。

链接 1 - [http://social.msdn.microsoft.com/Forums/en-US/sqlexpress/thread/9b5a8763-84ce-46d0-b011-067ad39223d1/](http://social.msdn.microsoft.com/Forums/en-US/sqlexpress/thread/9b5a8763-84ce-46d0-b011-067ad39223d1/)

请参阅 Chirag Shah 的解决方案。仅执行第 13 步。我无法执行第 14 步，因为我没有找到主页对话框。

在步骤中，Chirag 谈到了一些 URL。我真的不明白任何这些 URL 的含义。因此，我使用了“Reporting Services 配置管理器”中“报表管理器 URL”下的 URL。它是

```
http://localhost:8080/MyReportServer. 
```

8080 是一个端口号。

完成此操作后，请转到下面的链接并按照所有步骤操作 - [http://www.soheib.com/technical-knowledge/sql-server-2012-reporting-services-uac-user-access-control/](http://www.soheib.com/technical-knowledge/sql-server-2012-reporting-services-uac-user-access-control/)

在第 7 步中，我看到了很多复选框。我选择了所有这些。终于，我可以安息了。希望它也适合你。

此外，在创建上述链接中描述的帐户时，您可能会看到“BUILTIN\Administrators”帐户。忽略它 - 这就是我所做的。

```
 **END  OF POST** 
```

* * *

从 Chirag Shah 的帖子中采取的步骤 -

1.  为本地管理配置报表服务器。要在本地访问报表服务器和报表管理器，请执行以下步骤：
2.  启动 Windows Internet Explorer。
3.  在工具菜单上，单击 Internet 选项。
4.  单击安全性。
5.  单击受信任的站点。
6.  单击站点。
7.  在将此网站添加到区域下，键入 http://ServerName。如果您没有将 HTTPS 用于默认站点，请单击以清除此区域中的所有站点都需要服务器认证 (https:) 复选框。
8.  单击添加。
9.  重复步骤 7f 和步骤 7g 以添加 http localhost URL，然后单击关闭。
10.  注意 此步骤使您能够启动 Internet Explorer 并为报表服务器应用程序和报表管理器应用程序打开服务器的本地主机或网络计算机名称。
11.  创建明确授予您访问权限和完整权限的角色分配。为此，请按照下列步骤操作：
12.  连同以管理员身份运行选项一起启动 Internet Explorer。为此，请单击开始，单击所有程序，右键单击 Internet Explorer，然后单击以管理员身份运行。
13.  打开报告管理器。默认情况下，报表管理器 URL 是 http://ServerName/reports。如果将 SQL Server Express 与 Advanced Services SP2 一起使用，则报表管理器 URL 为 http://ServerName/reports$sqlexpress。如果您使用 Reporting Services 的命名实例，则报表管理器 URL 为 http://ServerName/reports$InstanceName

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-18T16:10:52.577

在我的报表服务器 URL 上准确记录 3 次后，我收到了空白页。我已关闭 Internet Explorer 增强的安全性。在不同的操作系统上，它位于不同的位置。找到位置并将其关闭。我希望这能帮到您。

# django - 应用程序生成的事件进入用户的 Google 日历的推荐方式

> ID：15190804
> 
> 赞同：2
> 
> 时间：2013-03-03T21:00:02.680
> 
> 标签：django, google-calendar-api

我运行一个 Django Web 应用程序，它为各种事件安排了大约 50 个用户。用户登录该站点以查看他们的日程安排。当然，每个用户还希望他们的事件在他们的个人谷歌日历上实时更新。
出于隐私原因，应用程序不能访问用户自己的日历非常重要。

我的问题是：Web 应用程序完成此任务的标准（推荐）工作流程是什么？
根据我目前的阅读，这就是我的想法：

1.  为该应用创建一个专用的 Google 帐户。
2.  在该帐户中，为每个用户创建一个 Google 日历。
3.  与每个用户共享日历的链接，以便他们可以订阅它。
4.  该应用程序通过 API 更新日历。

这是一个好方法还是有更好的方法？

非常感谢任何帮助。

# java - 从 Oracle DB 服务器调用 Java Web Service Client 类

> ID：15190806
> 
> 赞同：0
> 
> 时间：2013-03-03T21:00:16.420
> 
> 标签：java, oracle, static

我正在使用 java web 服务客户端类，为了从 Oracle 数据库调用这个类，我应该将类中的可访问方法设为静态吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T21:13:52.900

是的。

```
CREATE OR REPLACE AND RESOLVE JAVA SOURCE NAMED "Your_Class_Source" as 
public class Your_Class {
   public static void Your_Java_Func() {

   }
};

CREATE OR REPLACE PROCEDURE Your_PLSQL_Procedure
AS LANGUAGE JAVA NAME 'Your_Class.Your_Java_Func()'; 
```

# c++ - 多边形C++的凸性？

> ID：15190810
> 
> 赞同：0
> 
> 时间：2013-03-03T21:00:29.593
> 
> 标签：c++, algorithm, polygon, computational-geometry, convex

我如何通过知道多边形的点及其在 C++ 中的坐标来测试*多边形*是否是*凸的？*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T21:12:14.160

对于多边形的每一侧，计算线方程 ( `Ax+By+C=0`) 并检查（将`x`和`y`放入方程并得到它的符号），所有点都来自它的一侧。

**编辑**：如果旅行凸多边形，您将始终在每个点上旋转到一个方向（左或右）。使用叉积，您可以简单地推断出下一回合您将旋转到哪一侧（负或正）。如果三个连续点的所有叉积都等号，那么你的多边形是凸的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T21:03:54.000

> 礼品包装算法是一种用于计算给定点集的凸包的算法。

[来自维基](http://en.wikipedia.org/wiki/Gift_wrapping_algorithm)的伪代码：

```
jarvis(S)
   pointOnHull = leftmost point in S
   i = 0
   repeat
      P[i] = pointOnHull
      endpoint = S[0]  // initial endpoint for a candidate edge on the hull
      for j from 1 to |S|-1
         if (endpoint == pointOnHull) or
            (S[j] is on left of line from P[i] to endpoint)
            endpoint = S[j]   // found greater left turn, update endpoint
      i = i+1
      pointOnHull = endpoint
   until endpoint == P[0] // wrapped around to first hull point 
```

如果您的点与上述算法的检测点匹配，则多边形是凸的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T21:29:49.327

使用任何常用算法找到凸包。一个多边形是凸的当且仅当它的所有顶点都属于它的凸包。

这是 O(n log n)，但不依赖于点在多边形边缘周围以正确顺序给出的假设。如果假设为真，那么来自仇恨引擎的答案是最优的（即线性时间。）

# css - 问题放置三个div；第三个 div 以某种方式影响整个页面

> ID：15190815
> 
> 赞同：0
> 
> 时间：2013-03-03T21:00:46.867
> 
> 标签：css, html

我连续三个 div 最终将包含三个“小部件”（日历、YouTube 播放列表和音频播客）。当我对前两个 DIV 应用 30% 的宽度时，一切正常，但是当我对第三个 DIV 应用任何宽度时，它会导致整个页面向左移动（绝对位置左：0）。此外，添加到 .widgets 中包含的 DIV 的任何填充似乎都会影响页面。为什么这些 DIV，尤其是第三个 DIV 会造成这么大的麻烦？以及我应该如何实现我在纸上的设计（在 SkyDrive 链接中）？

[JSFiddle 用于结果...](http://bit.ly/Wpye1k) [用于屏幕截图和线框的 SkyDrive 文件夹](http://sdrv.ms/13yCE82)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T21:18:47.947

我已根据要求更改了您的一些代码，并查看了更新的[Fiddle](http://jsfiddle.net/xMNrW/5/)。

更新的 CSS 代码

```
.events {
    background: red;
    float:left;
    width:33%;

}
.youtube {
    background: green;
    float:left;
    width:31%;
    margin-left:10px;
    margin-right:10px;

}
.audio {
    background: white;
    float:left;
        width:33%;
} 
```

# objective-c - 向导航栏添加信息按钮

> ID：15190834
> 
> 赞同：0
> 
> 时间：2013-03-03T21:02:00.770
> 
> 标签：objective-c, ios6, uiviewcontroller, uinavigationitem

目前我的项目由 5 个标签栏控制器组成，每个控制器都有自己的导航控制器，设置主要在应用程序委托中完成，所有这些都是通过代码完成的，而不是 nib 文件。我为每个标签栏/导航控制器都有一个类。

我在这个问题上的目标是在`UIBarButtonItem`我的一个 tabbarcontrollers 中的导航栏上编写 a 代码。

```
self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithTitle:@"Info" style:UIBarButtonItemStyleBordered target:self action:@selector(pushToInfoController)]; 
```

我基本上使用那段代码在我的 HomeView（标签栏 1）中显示按钮。

现在，当用户按下按钮时，我想推送到一个新的视图控制器，我可以在其中显示有关应用程序使用的信息以及有关如何使用它的其他说明，这并不重要，重要的是获取按钮去做它需要做的事情。

我计划创建一个函数`-(void) pushToInfoController`作为选择器函数，但我真的不知道该怎么做。

# android - 一个按钮在android的线性布局中覆盖另一个按钮

> ID：15190837
> 
> 赞同：0
> 
> 时间：2013-03-03T21:02:31.847
> 
> 标签：android, android-layout

我在代码中添加元素时遇到问题。我想在水平线性布局中添加两个按钮。我的代码有效，但第二个按钮部分覆盖了第一个按钮。

**问题：**我怎样才能使第二个按钮不覆盖第一个按钮？

这是代码：

```
public class MainActivity extends Activity {
Button buttonFirst, buttonSecond;
LinearLayout lau;
LayoutParams params;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        buttonFirst = new Button(getApplicationContext());
        buttonSecond = new Button(getApplicationContext());
        lau = (LinearLayout) findViewById(R.id.layoutmadafaka);
        params = new LayoutParams(LayoutParams.WRAP_CONTENT,
                LayoutParams.WRAP_CONTENT);
        LinearLayout.LayoutParams lp = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT, LinearLayout.LayoutParams.WRAP_CONTENT);
        lp.setMargins(-30, 0, 0, 0);
        buttonSecond.setLayoutParams(lp);
        buttonSecond.setBackgroundColor(Color.BLACK);
        lau.addView(buttonFirst,params);   
        lau.addView(buttonSecond); 
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

和xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="@string/hello_world" />

    <LinearLayout
        android:id="@+id/layoutmadafaka"
        android:layout_width="match_parent" 
        android:layout_height="match_parent"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"

        android:orientation="horizontal" >
    </LinearLayout>

</RelativeLayout> 
```

这必须以编程方式完成。当我使用 bringToFront() 方法时，按钮会改变位置，但我不想这样做。我想要左侧的第一个按钮和第一个按钮旁边的第二个按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T21:09:56.707

我认为这是因为您设置的负边距：

```
lp.setMargins(-30, 0, 0, 0); 
```

删除它或将它们设置为 0（它的等价物，因为 0 是默认值）：

```
lp.setMargins(0, 0, 0, 0); 
```

这些负边距将 button2 向左移动，因此它位于另一个按钮的后面。

您无法在**LinearLayout**中管理重叠（这就是为什么在 line 中执行 bringToFront 操作更改顺序而不是重叠顺序的原因）。您需要使用**RelativeLayout**，将按钮 2 设置在 button1 的右侧，让边距为 -30 并在它应该工作的第二个按钮上调用**bringToFront** ;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T21:10:00.103

您可以在 xml 中为您的 @id/layoutmadafaka 设置属性 android:weightSum=1.0。并且在添加按钮时，为每个 layout_weight=0.5，layout_width=0 设置。

此处示例：[Android 中的线性布局和权重](https://stackoverflow.com/questions/2698817/linear-layout-and-weight-in-android)

# python - 删除与 Unix/bash 中的列条件匹配的行

> ID：15190838
> 
> 赞同：2
> 
> 时间：2013-03-03T21:02:32.047
> 
> 标签：python, unix, subprocess, pipe

`N`如果th 字段中包含字符串，那么在 bash 中执行快速单行以从制表符分隔的文件中过滤掉所有行的最佳方法是`s`什么？例子：

```
$ cat myfile 
A  B_crop  C
A  X_mock  D

$ cat myfile | filter -V -c 2 -s "crop"
A  X_mock  D 
```

made up 命令`filter`接受一个列号（从 1 开始）`-c`、一个字符串`-s`，并且只保留给定列中包含该字符串的行。如果它被传递`-V`然后 like `grep`，它会排除没有字符串的行是该列号中的子字符串。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T21:10:20.167

由于您想要基于列的排除，我会使用`awk`：

```
awk '$2 == "crop" { print $0 }' myfile 
```

表示使用第`$2`2 列进行比较。要实现该`-V`功能，请使用`!=`而不是`==`.

您还可以使用正则表达式检查来检查子字符串：

```
awk '$2 ~ /crop/ { print $0 }' myfile 
```

正则表达式匹配也可以用`!~`.

# html - 为什么外部网站没有显示在 iframe 中？

> ID：15190839
> 
> 赞同：0
> 
> 时间：2013-03-03T21:02:32.627
> 
> 标签：html, iframe

自从我上次使用 iframe 以来已经有一段时间了，现在我需要在 iframe 中加载一些外部站点，但什么也没发生。这是 iframe 标签，奇怪的是在这个 iframe 中没有显示任何内容。有什么我想念的吗？

```
 for ($j = 1; $j < 10; $j++) {
               $urls[] = 'http://www.facebook.com/profile.php?id='.$friends["data"][$j]["id"];

        }

        echo '<div class="container"><div class="row-fluid">';
        foreach($urls as $url){
            echo '<iframe id="face" name="face" src="'. $url .'" style="width: 100%; height: 200px;"></iframe><br>';
        }
        echo '</div></div>';
    } 
```

每个 $url 都是朋友的 facebook 个人资料，它们的加载非常好，但我的 iframe 中没有显示任何内容。有任何想法吗？我也尝试使用 google.com ......同样的事情，没有显示任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T21:04:35.283

Likely because Facebook has explicitly disallowed iframing their pages using the [`X-FRAME-OPTIONS`](https://developer.mozilla.org/en-US/docs/HTTP/X-Frame-Options) header. This is primarily a security measure, supported by newer browsers.

Look in your browser's console for a message like this:

> Refused to display '[https://www.google.com/](https://www.google.com/)' in a frame because it set 'X-Frame-Options' to 'SAMEORIGIN'.

# three.js - 无法将点光源添加到场景

> ID：15190845
> 
> 赞同：1
> 
> 时间：2013-03-03T21:03:13.970
> 
> 标签：three.js

我正在尝试将一些点光源添加到场景中，但场景停止渲染并在控制台中记录以下错误：

```
ERROR: 0:113: '' : array size must be a positive integer
ERROR: 0:113: '' : array size must be a positive integer
ERROR: 0:114: '' : array size must be a positive integer
ERROR: 0:114: '' : array size must be a positive integer
ERROR: 0:115: '' : array size must be a positive integer
ERROR: 0:115: '' : array size must be a positive integer
ERROR: 0:116: '' : array size must be a positive integer
ERROR: 0:116: '' : array size must be a positive integer
ERROR: 0:117: '' : array size must be a positive integer
ERROR: 0:117: '' : array size must be a positive integer 
```

堆栈跟踪如下：

```
getShader (type="fragment", string="precision highp float;\n..., fogFactor );\n#endif\n}")three.js line 24659
buildProgram (shaderID="phong", fragmentShader="uniform vec3 diffuse;\nu..., fogFactor );\n#endif\n}", vertexShader="#define PHONG\nvarying v...rldPosition;\n}\n#endif\n}", uniforms=Object { diffuse={...}, opacity={...}, map={...}, more...}, attributes=undefined, defines=undefined, parameters=Object { map=true, envMap=false, lightMap=false, more...})three.js line 24502
initMaterial(material=Object { id=0, side=0, opacity=1, more...}, lights=[Object { id=3,  properties={...},  parent={...},  more...}, Object { id=4,  properties={...},  parent={...},  more...}, Object { id=5,  properties={...},  parent={...},  more...}, 2 more...], fog=null, object=Object { id=8, properties={...}, parent={...}, more...})three.js line 23039
setProgram(camera=Object { id=1, properties={...}, parent={...}, more...}, lights=[Object { id=3,  properties={...},  parent={...},  more...}, Object { id=4,  properties={...},  parent={...},  more...}, Object { id=5,  properties={...},  parent={...},  more...}, 2 more...], fog=null, material=Object { id=0, side=0, opacity=1, more...}, object=Object { id=8, properties={...}, parent={...}, more...})three.js line 23109
renderBuffer(camera=Object { id=1, properties={...}, parent={...}, more...}, lights=[Object { id=3,  properties={...},  parent={...},  more...}, Object { id=4,  properties={...},  parent={...},  more...}, Object { id=5,  properties={...},  parent={...},  more...}, 2 more...], fog=null, material=Object { id=0, side=0, opacity=1, more...}, geometryGroup=Object { faces3=[0], faces4=[1], materialIndex=0, more...}, object=Object { id=8, properties={...}, parent={...}, more...})three.js line 21576
renderObjects (renderList=[Object { buffer={...},  object={...},  opaque={...},  more...}], reverse=true, materialType="opaque", camera=Object { id=1, properties={...}, parent={...}, more...}, lights=[Object { id=3,  properties={...},  parent={...},  more...}, Object { id=4,  properties={...},  parent={...},  more...}, Object { id=5,  properties={...},  parent={...},  more...}, 2 more...], fog=null, useBlending=false, overrideMaterial=null)three.js line 22248
render(scene=Object { id=2, properties={...}, children=[7], more...}, camera=Object { id=1, properties={...}, parent={...}, more...}, renderTarget=undefined, forceClear=undefined)three.js line 22122
animate() line 154
marinbezhanov.com:8080() 
```

我的代码如下所示：

```
if (!Detector.webgl) Detector.addGetWebGLMessage();

var SCREEN_WIDTH = window.innerWidth;
var SCREEN_HEIGHT = window.innerHeight;

var container, camera, scene, renderer, light1, light2, light3, light4;

var clock = new THREE.Clock();

// INIT

container = document.createElement('div');
document.body.appendChild(container);

// CAMERA

camera = new THREE.PerspectiveCamera(80, SCREEN_WIDTH / SCREEN_HEIGHT, 1, 4096);
camera.position.set(0, 512, 1024);

// SCENE

scene = new THREE.Scene();
scene.add(camera);

// LIGHTS

scene.add( new THREE.AmbientLight( 0x000000 ) );

light1 = new THREE.PointLight( 0xff0040, 2, 50 );
scene.add( light1 );

light2 = new THREE.PointLight( 0x0040ff, 2, 50 );
scene.add( light2 );

light3 = new THREE.PointLight( 0x80ff80, 2, 50 );
scene.add( light3 );

light4 = new THREE.PointLight( 0xffaa00, 2, 50 );
scene.add( light4 );

//  GROUND

var gt = THREE.ImageUtils.loadTexture("textures/texture.jpg");
var gg = new THREE.PlaneGeometry(4096, 4096);
var gm = new THREE.MeshPhongMaterial({color:0x777777, map:gt});

var ground = new THREE.Mesh(gg, gm);
ground.rotation.x = -Math.PI / 2;
ground.material.map.repeat.set(16, 16);
ground.material.map.wrapS = ground.material.map.wrapT = THREE.RepeatWrapping;
ground.receiveShadow = true;

scene.add(ground);

// RENDERER

renderer = new THREE.WebGLRenderer( { antialias: true } );
renderer.setSize( SCREEN_WIDTH, SCREEN_HEIGHT );

container.appendChild( renderer.domElement );

renderer.gammaInput = true;
renderer.gammaOutput = true;
renderer.shadowMapEnabled = true;

renderer.shadowMapCascade = true;
renderer.shadowMapType = THREE.PCFSoftShadowMap;

// STATS

var stats = new Stats();
container.appendChild(stats.domElement);

// CONTROLS

cameraControls = new THREE.TrackballControls( camera, renderer.domElement );
cameraControls.target.set( 0, 50, 0 );          

// ANIMATE

function animate()
{
    requestAnimationFrame(animate);
    var delta = clock.getDelta();
    cameraControls.update(delta);
    renderer.render(scene, camera);
    stats.update();
}

animate(); 
```

当我改用定向灯或聚光灯时 - 场景渲染得很好，我没有收到任何错误。任何想法为什么会发生这种情况？

我正在使用**r56**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T01:07:50.650

`PointLights`不要在 r.56 中投射阴影。

这是你的问题线：

```
ground.receiveShadow = true; 
```

此外，请确保您的灯在您的地平面“上方”，并且您的相机正朝着正确的方向看东西。

camera.lookAt(scene.position);

三.js r.56

# node.js - Implementing general purpose long polling

> ID：15190851
> 
> 赞同：4
> 
> 时间：2013-03-03T21:04:19.087
> 
> 标签：node.js, long-polling

I've been trying to implement a simple long polling service for use in my own projects and maybe release it as a SAAS if I succeed. These are the two approaches I've tried so far, both using Node.js (polling PostgreSQL in the back).

## 1\. Periodically check all the clients in the same interval

Every new connection is pushed onto a queue of connections, which is being walked through in an interval.

```
var queue = [];

function acceptConnection(req, res) {
  res.setTimeout(5000);
  queue.push({ req: req, res: res });
}

function checkAll() {
  queue.forEach(function(client) {
    // respond if there is something new for the client
  });
}

// this could be replaced with a timeout after all the clients are served
setInterval(checkAll, 500); 
```

## 2\. Check each client at a separate interval

Every client gets his own `ticker` which checks for new data

```
function acceptConnection(req, res) {
  // something which periodically checks data for the client
  // and responds if there is anything new
  new Ticker(req, res);
} 
```

While this keeps the minimum latency for each client lower, it also introduces overhead by setting a lot of timeouts.

## Conclusion

Both of these approaches solve the problem quite easily, but I don't feel that this will scale up easily to something like 10 million open connections, especially since I'm polling the database on every check for every client.

I thought about doing this without the database and just immediately broadcast new messages to all open connections, but that will fail if a client's connection dies for a few seconds while the broadcast is happening, because it is not persistent. Which means I basically need to be able to look up messages in history when the client polls for the first time.

I guess one step up here would be to have a data source where I can subscribe to new data coming in (CouchDB change notifications?), but maybe I'm missing something in the big picture here?

**What is the usual approach for doing highly scalable long polling?** I'm not specifically bound to Node.js, I'd actually prefer any other suggestion with a reasoning why.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T09:45:04.030

不确定这是否能回答您的问题，但我喜欢[PushPin](https://github.com/fanout/pushpin)的方法（+[概念解释](http://blog.fanout.io/2013/04/09/an-http-reverse-proxy-for-realtime/)）。

我喜欢这个想法（使用反向代理并与返回代码通信 + 延迟的 REST 返回请求），但我确实对实现有所保留。我可能低估了这个问题，但在我看来，所使用的技术有点矫枉过正。不确定我是否会使用它，我更喜欢更轻量级的解决方案，但我发现这个概念非常棒。

很想听听你最终使用了什么。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-03T22:01:35.187

既然你提到了可扩展性，我必须得到一点理论，因为唯一实际的措施是负载测试。因此，我能提供的只是建议。

一般来说，一次一次的事情不利于可扩展性。尤其是每次连接一次或一次请求一次，因为这会使您的应用程序的一部分与流量成正比。Node.js 使用其单线程异步 I/O 模型移除了每个连接的线程依赖项。当然，您不能完全消除每个连接的某些内容，例如请求和响应对象以及套接字。

我建议避免为每个 HTTP 连接打开数据库连接的任何东西。这就是连接池的用途。

至于在上面的两个选项之间进行选择，我个人会选择第二个选择，因为它可以使每个连接保持隔离。第一个选项使用连接循环，这意味着每个连接的实际执行时间。考虑到 I/O 是异步的，这可能没什么大不了的，但是如果在每个连接的迭代和每个连接的对象的存在之间进行选择，我宁愿只拥有一个对象。然后，当突然有 10,000 个连接时，我就不用担心了。

C10K 问题似乎是一个很好的参考，尽管老实说这真的是个人判断。

[http://www.kegel.com/c10k.html](http://www.kegel.com/c10k.html)

[http://en.wikipedia.org/wiki/C10k_problem](http://en.wikipedia.org/wiki/C10k_problem)

# php - 简单 html-dom 嵌套

> ID：15190853
> 
> 赞同：0
> 
> 时间：2013-03-03T21:04:33.330
> 
> 标签：php, find, simple-html-dom

我正在尝试使用简单的 HTML DOM 来捕捉这个分页的最后一部分。这部分：

```
<a class="paginationNumberStyle page_arrows" data-url="**/Building-Materials/h_d1/N-5yc1vZ25ecodZaqns/h_d2/Navigation?catalogId=10053&amp;Nu=P_PARENT_ID&amp;langId=-1&amp;Nao=96&amp;storeId=10051**"> 

    <div class="page-nav">  

                <span>1</span>

                 <a class="paginationNumberStyle" data-url="/Building-Materials/h_d1/N-5yc1vZ25ecodZaqns/h_d2/Navigation?catalogId=10053&amp;Nu=P_PARENT_ID&amp;langId=-1&amp;Nao=96&amp;storeId=10051"> 
                    2
                 </a>

                 <a class="paginationNumberStyle" data-url="/Building-Materials/h_d1/N-5yc1vZ25ecodZaqns/h_d2/Navigation?catalogId=10053&amp;Nu=P_PARENT_ID&amp;langId=-1&amp;Nao=192&amp;storeId=10051"> 
                    3
                 </a>

                 <a class="paginationNumberStyle" data-url="/Building-Materials/h_d1/N-5yc1vZ25ecodZaqns/h_d2/Navigation?catalogId=10053&amp;Nu=P_PARENT_ID&amp;langId=-1&amp;Nao=288&amp;storeId=10051"> 
                    4
                 </a>

                 <a class="paginationNumberStyle" data-url="/Building-Materials/h_d1/N-5yc1vZ25ecodZaqns/h_d2/Navigation?catalogId=10053&amp;Nu=P_PARENT_ID&amp;langId=-1&amp;Nao=384&amp;storeId=10051"> 
                    5
                 </a>

        <a class="paginationNumberStyle page_arrows" data-url="/Building-Materials/h_d1/N-5yc1vZ25ecodZaqns/h_d2/Navigation?catalogId=10053&amp;Nu=P_PARENT_ID&amp;langId=-1&amp;Nao=96&amp;storeId=10051"> 
                    <img alt="" src="/static/images/layout/triangle-green-right.gif"></a>

</div> 
```

这是我的代码：

```
if ($nextPage = $dom->find('a[class=paginationNumberStyle.page_arrows]', 0)) {

   echo $nextPage->href; 
```

我也试过：

```
if ($nextPage = $dom->find('a[class=paginationNumberStyle.page_arrows]', 0)) { 
```

我远不是简单 HTML DOM 方面的专家，我希望有人知道一个快速的答案。我想知道是不是因为数据网址？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T21:09:27.223

试试这样

```
if ($nextPage = $dom->find("a[class='paginationNumberStyle page_arrows]", 0)) echo $nextPage->getAttribute('data-url'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T00:47:25.100

为简单起见，您可以：

```
$dom->find("a.page_arrows", 0) 
```

# c++ - Implementing sieve of eratosthenes and then getting highest prime factor

> ID：15190855
> 
> 赞同：-3
> 
> 时间：2013-03-03T21:04:45.530
> 
> 标签：c++, math, primes, sieve-of-eratosthenes, sieve

I am stuck on trying to get the sieve to work. When I debug it, it tells me that stuff like 9 and 15 still evaluate to true when they go through the sieve. What causes this? Also, am I using the vector properly to get the highest prime factor?

```
#include <iostream>
#include <vector>
#include <math.h>

int main()
{
    long long n = 13195;
        long long sqrtn = sqrt(n);

        bool* boolarray = new bool[n];

        for(long long i = 0; i<=boolarray[sqrtn]; i++) {
                boolarray[i] = true;
        }

        long long x = 0;

        for(long long i=2; i<=sqrtn; i++) {
                if(boolarray[i]) {
                        for(long long j=pow(i, 2)+x*i; j<=n; j=pow(i, 2)+(++x*i))

                                        boolarray[j] = false;
                }
        }

        std::vector<long> primefactors;

        for(long long i = 0; i<=sqrtn; i++)
        {
                if(boolarray[i] && n % boolarray[i] == 0)
                        primefactors.push_back(i);
        }

        int answer = primefactors.back();

        printf("Answer: %i\n", answer);

        _sleep(10000);

        delete[] boolarray;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T21:06:46.570

The following is wrong:

```
 for(long long j=pow(i, 2)+x*i; j<=n; j=pow(i, 2)+(++x*i)) 
```

Both the initial value and the update expression for `j` are incorrect. I leave it as an exercise to figure out what exactly is wrong, and how to fix it.

# text - 如何在 hsqldb 数据库中存储文本和二进制文件？

> ID：15190856
> 
> 赞同：0
> 
> 时间：2013-03-03T21:04:47.137
> 
> 标签：text, binary, hsqldb

我想提供两个 API 函数来将文件存储在数据库中 - 一个接受 a `byte[]`（或 an `InputStream`），另一个接受`String`. 我想知道如何实现这样的 API。

我看到以下选项：

1.  定义两个字段 - 一个用于二进制文件的 BLOB 和另一个用于文本文件的 CLOB。然后我可以将`PreparedStatement.setBytes`（或`PreparedStatement.setBinaryStream`）用于 BLOB 和`PreparedStatement.setString`CLOB。我不喜欢有两个领域。
2.  用于`String.getBytes()`将给定转换`String`为`byte[]`，从而回到二进制大小写。我不喜欢将 a 转换`String`为`byte[]`.

我想知道是否有不需要两个字段并避免额外字节缓冲区的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T21:25:19.157

Java String 和 Clob 是 Unicode 并存储为两字节字符。因此，如果要将这些值存储在 byte[] 或 Blob 中，则需要进行一些转换。

因此，最好的方法是使用两个单独的字段，一个用于 BLOB，另一个用于 CLOB 值。

# vb6 - Splitter control for VB6

> ID：15190857
> 
> 赞同：0
> 
> 时间：2013-03-03T21:04:54.287
> 
> 标签：vb6

This question has been asked [before](https://stackoverflow.com/questions/1334435/splitter-controls-for-vb-6-0), and I've actually [answered it](https://stackoverflow.com/questions/1334435/splitter-controls-for-vb-6-0/1338063#1338063).

But I need a somewhat more sophisticated splitter control. I need to have a grippie like this

![this](../Images/097c01f62aedad910016ba2c7f970b2d.png). In addition, I need a grippie mode where the contents are collapsed.

![collapsed.](../Images/e5d52d437c8fbf7289402cba8760b587.png)

Either a commercial or a freebie control will suffice.

# ruby - 如何防止使用 gem v. 2.0 自动安装 gems 文档

> ID：15190859
> 
> 赞同：5
> 
> 时间：2013-03-03T21:05:03.073
> 
> 标签：ruby, rubygems, ruby-2.0

以前设置我的系统以禁止使用`--no-ri`和安装 gem 文档`--no-rdoc`。

Ruby 2.0.0 和 gem 2.0.0 似乎已经删除了`--no-ri`标志（和功能？）。

即使指定时`--no-rdoc`，我仍然得到`installing documentation`：

```
~/dev/ruby> gem install bundler --no-rdoc
Fetching: bundler-1.3.1.gem (100%)
Successfully installed bundler-1.3.1
Done installing documentation for bundler (0 sec). 
```

如何查看是否安装了文档？如果已安装，如何抑制所有 gem 安装？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-03T22:47:40.853

正如`gem help install`所述：

```
用法： gem install GEMNAME [GEMNAME ...] [options] -- --build-flags [options]
...
  安装/更新选项：
    ...
        --[no-]document [TYPES] 为已安装的 gem 生成文档
                                     列出您希望的文档类型
                                     产生。例如：rdoc,ri
    -N, --no-document 禁用文档生成

```

简而言之：

*   `--no-rdoc`就是现在`--no-document rdoc`

*   `--no-ri`现在是`--no-document ri`。

*   `--no-document`您可以使用或来阻止两者安装`-N`。

（不幸的是，在撰写[本文时，Rubygems.org](http://guides.rubygems.org/command-reference/#gem_install)上的文档目前已经过时，所以暂时忽略它。）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-03T22:00:32.100

该选项已更改为`--no-document`（请参阅[http://rubygems.rubyforge.org/rubygems-update/History_txt.html](http://rubygems.rubyforge.org/rubygems-update/History_txt.html)）

# java - 需要数组帮助 - 编码错误

> ID：15190864
> 
> 赞同：-3
> 
> 时间：2013-03-03T21:05:17.560
> 
> 标签：java, arrays

我需要实现一个方法，该方法采用一个名为申请人的数组，以及来自一个名为 Person 的单独类的两个实例，并打印出年龄在 22 到 30 岁之间的申请人的姓名。Person 类具有返回申请人姓名和年龄的方法 getName() 和 getAge()。换句话说，Person 类声明如下：

```
public class Person{
public String getName(String name) {
return name; 
 }
public int getAge(int age){
return age;
 }
} 
```

这是我的主要方法：

```
public class Applicants
{
public static void main(String args[]){
String [] name = new String[8];
name[0] = "Student A";
name[1] = "Student B";
name[2] = "Student C";
name[3] = "Student D";
name[4] = "Student E";
name[5] = "Student F";
name[6] = "Student G";
name[7] = "Student H";

int [] age = new int[8];
age[0] = 21;
age[1] = 28;
age[2] = 16;
age[3] = 23;
age[4] = 22;
age[5] = 28;
age[6] = 22;
age[7] = 21;

}

public static void printSelection(Person applicants[]) {
    for (int i = 0; i < applicants.length; i++)
    if (22 <= applicants[i].getAge() && applicants[i].getAge() <= 30)
    System.out.println(applicants[i].getName()); 
 }

} 
```

我知道我还没有准备一个称为申请者的数组（还）。我不确定我如何基本上可以将这两个称为姓名和年龄的数组制作成一个称为申请人的数组？还是我只是将数组名称转换为申请人？这是一堂课，所以请原谅我的错误。我只需要了解专业人士如何做这种事情，这样我就可以从中学习并继续前进。

最终输出需要打印出申请人姓名和年龄在 22 到 30 岁之间。getName 和 getAge 必须从单独的类中调用，如下所示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T21:10:52.887

首先，不需要两个数组。您可以简单地创建 Person 类型的对象实例。

```
public class Person{
    public String getName(String name) {
        // Why would the user pass a value they want returned right back to them?
        return name; 
    }
    public int getAge(int age){
        // Same here as well. This needs to be addressed!
        return age;
    }
 } 
```

首先，此代码将不起作用。类中没有字段名称和字段年龄。这是你要解决的第一个问题。您还需要为这个类创建一个构造函数，它将名称和年龄作为参数，并将它们绑定到您定义的字段。IE：

```
public Person(int age, String name)
{
     this.age = age;
     this.name = name;
} 
```

下一步是将值添加到人员对象，然后将该人员对象添加到集合（如数组或数组列表）。在您的主要方法中，您可能有类似..

```
Person[] applicants = new Person[8]; 
```

现在您应该使用相关数据将 Person 对象的新实例添加到此集合中。

将此数组传递给您的函数，您将打印出选定的值。

# php - preg_split 在免费服务器上禁用？

> ID：15190865
> 
> 赞同：0
> 
> 时间：2013-03-03T21:05:18.953
> 
> 标签：php, regex, preg-split, easyphp

我正在开发一个使用[preg_split](http://php.net/manual/en/function.preg-split.php)函数的 PHP 脚本。在我的计算机中，使用 EasyPhp 一切正常，但是当我将文件在线放在可用空间上时，函数 preg_split 似乎不起作用（我在屏幕上没有错误消息，但字符串没有被拆分）。有没有可能这个功能被禁用了？PHP的版本是`PHP 5.2.17 - Optimized for AlterVista`这样的功能应该可以工作......有没有其他选择？

该脚本用于转换 *.pdf 文件（保存为 *.txt 文件），其中包含每个页面中具有相同结构的值列表。下面是一个例子。

> **第 1 页：**这是今天的收获。日期：01/12/2012 苹果 12 香蕉 14 猕猴桃 2
> 
> **第 2 页：**这是今天的收获。日期：02/12/2012 苹果 19 香蕉 36 猕猴桃 0
> 
> **第 3 页：**这是今天的收获。日期：03/12/2012 苹果 1 香蕉 1 猕猴桃 73

原始文档包含近 50 种不同的水果，并且结构更复杂，这只是一个简单的成就示例以及我使用 Regex 的原因。我使用以下代码创建一个名为 $document_pg 的数组，其中每个元素都是原始文档的一页。

```
$document_pg = preg_split("(This is the today harvest.)", $document); 
```

然后我使用一些`preg_match`函数来提取写在水果名称左侧的数字。这些值将保存在数据库中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T21:16:32.747

尽管如果不与相关的托管服务提供商核实就很难说 - 很可能该提供商也关闭了警告的显示。当此功能被禁用时，它会生成一个您可能没有看到的警告级别通知。

要回答您的问题 - 完全有可能通过 php ini 文件禁用这样的功能。见这里[disable_functions](http://php.net/manual/en/ini.core.php#ini.disable-functions)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T21:17:41.723

可能是您服务器上的 PHP 已经[编译`--without-pcre-regex`](http://www.php.net/manual/en/pcre.installation.php)（PCRE 自 5.3.0 起才强制使用），因此您唯一的选择可能是使用已弃用的`ereg`正则表达式函数。下面的工作吗？

```
$document_pg = split('(This is the today harvest\.)', $document); 
```

# macos - 使用 AppleScript 从剪贴板复制纯文本

> ID：15190868
> 
> 赞同：9
> 
> 时间：2013-03-03T21:05:29.370
> 
> 标签：macos, applescript

**情况**

*   打开一个 Word 文档。
*   将文档内部的一些格式化文本复制到剪贴板。
*   将其粘贴到[CKEditor的实例中](http://ckeditor.com)

[CKEditor](http://ckeditor.com)收到了带有大量无用 html 元素和样式的 M$ 风格的 HTML。即使使用 CKEditor 的功能删除格式也不会呈现纯文本。

**所需的解决方案**

任何人都可以提供一个 AppleScript，它会删除 styled-/HTML-string 并将**纯文本部分粘贴回剪贴板**。

一个加号将是一个简短的提示，如何**将 AppleScript 绑定到 function key**。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-03T21:29:02.863

您没有显示当前如何复制和粘贴。不过，应该可以使用这样的东西：

```
tell application "Word"
    set theData to (the clipboard as text)
    set the clipboard to theData
end tell 
```

这将获取剪贴板数据的纯文本版本，然后将剪贴板内容（包含 HTML）替换为纯文本。

要将脚本绑定到功能键，我建议使用 Automator 创建运行脚本的服务，然后使用系统偏好设置的键盘窗格来分配键。事实上，我怀疑整个任务作为一个接收文本作为输入的服务而不是试图从剪贴板显式获取它会更好。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-02-13T13:51:30.977

老问题，但我发现现有答案并没有将文本完全转换为纯文本。他们似乎将字体设置为 Helvetica 并将大小设置为 12。

但是，您可以通过管道[pbpaste](https://ss64.com/osx/pbpaste.html)和[pbcopy](https://ss64.com/osx/pbcopy.html)真正删除格式。

在终端：

```
$ pbpaste | pbcopy 
```

作为 AppleScript：

```
do shell script "pbpaste | pbcopy" 
```

就是这样。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-04T00:26:26.743

将剪贴板设置为在标准添加中定义。您无需将其包含在告诉应用程序“Word”中...

```
set the clipboard to (the clipboard as text) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-06-19T04:50:22.820

`echo -n`不起作用，因为 AppleScript 的`do shell script`命令使用 sh，而不是 bash，并且 sh 的 echo 是不接受选项的内置命令。明确指定 /bin/echo 它将起作用：

```
do shell script "/bin/echo -n " & quoted form of my_string & " | pbcopy" 
```

这会将 my_string 的纯文本副本放在剪贴板上。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-23T20:14:11.863

这对我有用：

`do shell script "echo " & total_paying & " | tr -d \"\n\" | pbcopy"`

**注意：**当您单击编译时，`\n`将转换为*文字换行符*。这可以。它仍然有效。我尝试使用`echo -n`，但它正在`-n`输出中打印。

# css - IE9 浏览器是否有 CSS“转换”？

> ID：15190869
> 
> 赞同：3
> 
> 时间：2013-03-03T21:05:30.350
> 
> 标签：css, internet-explorer, firefox, transform

一个关于 jsfiddle 的例子 [http://jsfiddle.net/chrisloughnane/T9N3h/](http://jsfiddle.net/chrisloughnane/T9N3h/)

这个例子在 Opera、chrome 和 firefox 中运行良好，但我找不到 IE 的转换。

同样在 Firefox 上，当有很多变换时，所有动画都会停止。

[http://toys.chrisloughnane.net/](http://toys.chrisloughnane.net/)

有没有更好的方法来解决这个问题？蒂亚。

HTML

```
<div class="display"></div> 
```

CSS

```
.display {
    background-image: url("http://toys.chrisloughnane.net/images/darkhand-small-50.png");
    height: 25px;
    width: 25px;
    -webkit-transition:all 400ms;   
    -moz-transition:all 400ms;
    -o-transition:all 400ms;
    transition:all 400ms; 
    position: absolute;
    top: 200px;
    left: 200px;
} 
```

JavaScript

```
$(document).ready(function() {

    function getRandom(min, max) {
        return min + Math.floor(Math.random() * (max - min + 1));
    }

    function go() {

        var iCSS = ("rotate(" + getRandom(0, 359) + "deg)");

        $(".display").css({
            '-moz-transform': iCSS,
            '-o-transform': iCSS,
            '-webkit-transform': iCSS
        });

        setTimeout(go, 600);
    }

    go();

}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T21:07:33.393

是的，IE9 支持 CSS 转换。您只需添加`-ms-`前缀。

有关更多信息，请参阅[CanIUse 网站](http://caniuse.com/#feat=transforms2d)。

但是，它不支持过渡，我在问题的 CSS 代码中看到了过渡。如果您需要在 IE9（或更早版本）中支持 CSS 过渡，您可以使用[CSS Sandpaper](http://www.useragentman.com/blog/csssandpaper-a-css3-javascript-library/) polyfill 库。

# c - C编程管道只有一半工作

> ID：15190871
> 
> 赞同：1
> 
> 时间：2013-03-03T21:05:40.510
> 
> 标签：c, linux, fork, pipe

我正在为大学作业制作一个迷你外壳。我们必须读入命令，从路径 var 中找到要执行的二进制文件，然后执行命令，无论有无管道。除了管道，我的一切都正常工作（我认为）。通过网络搜索，我已经能够构建一个测试程序，该程序使用两个硬编码命令并将一个管道连接到另一个，并获得预期的结果。现在，当我将该代码复制并粘贴到我的实际程序中时，第一个命令输出正常（实际上输出命令就像没有管道一样），而第二个我认为实际上没有做任何事情（第一个命令的输出不是通过管道传递到第二个）。

这是整个代码：

```
#include <stdio.h>
#include <unistd.h>
#include <string.h>
#include <stdlib.h>

#define BUFFSIZE 1024
#define MAXWORDS 17
#define MAXCHAR  64

static char *path;
extern char **environ;

//split cmd "string" on pipe (|) symbol
void split(char **pipe, char **left, char **right, int n)
{
    int i, x;

    for(i = 0; i < n; i++)
    {
        if (strchr(&pipe[i][0], '|') != 0)
        {
            for(x = 0; x < i; x++)
                strcpy(left[x], pipe[x]);
            left[x++] = 0;

            break;
        }
    }

    i++;
    for(x = 0; i < n; x++)
        strcpy(right[x], pipe[i++]);
    right[x++] = 0;
}

//Find directory where cmd can be executed from (PATH or direct access)
char *finddir(char *s)
{
    char *pp;
    char *pf;
    int   ok;
    strcpy(path, getenv("PATH"));
    pp = strtok(path, ":");
    while (pp != NULL)
    {
        pf = (char *)malloc(strlen(pp) + strlen(s) + 2);
        if (pf == NULL)
        {
            fprintf(stderr, "Out of memory in finddir\n");
            return NULL;
        }

        strcpy(pf,pp);
        strcat(pf,"/");
        strcat(pf,s);
        ok = !access(pf, X_OK);
        free(pf);
        if (ok)
            return pp;

        pp = strtok(NULL, ":");
    }
    return NULL;
}

int cmdcheck(char *cmd, char *p)
{
    char *dir;

    if (strchr(p, '/') != NULL)
        sprintf(cmd, "%s\0", p);
    else
    {
        dir = finddir(p);
        if (dir == NULL)
            return 1;
        else 
            sprintf(cmd, "%s/%s\0", dir, p);
    }

    return 0;
} 

void runpipe(int pfd[], char *cmd1, char *p1[], char *cmd2, char *p2[])
{
    int pid;
    int status;

    switch (pid = fork())
    {
        case 0:     //Child
            dup(pfd[0]);
            close(pfd[1]);          //the child does not need this end of the pipe 
            execve(cmd2, p2, environ);
            perror(cmd2);

        default:    //Parent
            dup(pfd[1]);
            close(pfd[0]);          //the parent does not need this end of the pipe 
            execve(cmd1, p1, environ);
            perror(cmd1);

        case -1:    //ERROR
            perror("fork-RP");
            exit(1);
    }
}   

int main(void)
    {
        int status;         //read status when reading cmd in
        char ch;            //character currently reading
        int n, i, x;            //(n) count of chars read; (i) cmd args iter; (x) cmd arg iter in cmd array
        char buffer[BUFFSIZE];      //read buffer
        char *token;            //token var when splitting buffer
        int pid0, pid1, pid2;       //return ID from fork call
        int which;          //return value from wait (child pID that just ended)
        char msg[100];          //messages to print out
        char *cmd1, *cmd2;      //cmds when piping
        char *params[MAXWORDS];     //cmd parameters to send to execve
        int fd[2];          //pipe file descriptors
        char *pparam1[MAXWORDS];    //cmd "string" on left side of pipe
        char *pparam2[MAXWORDS];    //cmd on right side of pipe

        for(;;)
        {
            for (i = 0; i < MAXWORDS; i++)
                params[i] = malloc(MAXCHAR);

            n = 0;
            write(1, "# ", 2);

            for(;;)
            {
                status = read(0, &ch, 1);
                if (status == 0)
                    return 0;   //End of file
                if (status == -1)
                    return 1;   //Error

                if(n == BUFFSIZE)
                {
                    write(1, "Line too long\n", 14);
                    return 1;
                }

                buffer[n++] = ch;

                if(ch == '\n')
                    break;
            }

            buffer[n] = '\0';

            x = 0;
            token = strtok(buffer, " \t\n\0");
            while(token != NULL)
            {
                strcpy(params[x++], token);
                token = strtok(NULL, " \t\n\0");
            }
            params[x] = 0;

            path = getenv("PATH");
            if (path == NULL)
            {
                fprintf(stderr, "PATH environment variable not found.\n");
                return 1;
            }

            n = strlen(path);
            path = (char *)malloc(n+1);
            if (path == NULL)
            {
                fprintf(stderr, "Unable to allocate space for copy of PATH.\n");
                return 1;
            }

            cmd1    = malloc(MAXCHAR);
            cmd2    = malloc(MAXCHAR);
            for (i = 0; i < MAXWORDS; i++)
                pparam1[i] = malloc(MAXCHAR);
            for (i = 0; i < MAXWORDS; i++)
                pparam2[i] = malloc(MAXCHAR);

            split(params, pparam1, pparam2, x);

            //Check first cmd
            if(cmdcheck(cmd1, pparam1[0]))
            {
                sprintf(msg, "cmd '%s' is not executable\n", pparam1[0]);
                write(1, msg, strlen(msg));
                break;
            }

            //Check second cmd
            if(cmdcheck(cmd2, pparam2[0]))
            {
                sprintf(msg, "cmd '%s' is not executable\n", pparam2[0]);
                write(1, msg, strlen(msg));
                break;
            }

            pipe(fd);

            switch (pid0 = fork())
            {
                case 0:     //Child
                    switch (pid1 = fork())
                    {
                        case 0:     //Child
                            runpipe(fd, cmd1, pparam1, cmd2, pparam2);
                            exit(0);

                        default:
                            exit(0);
                            //break;

                        case -1:    //ERROR
                            perror("fork-2");
                            exit(1);
                    }

                default:    //Parent
                    which = wait(&status);
                    if (which == -1)
                    {
                        write(1, "wait failed\n", 12);
                        exit(1);
                    }

                    if (status & 0xff)
                        sprintf(msg, "process %d terminated abnormally for reason %d\n", which, status & 0xff);
                    else
                        sprintf(msg, "process %d terminated normally with status %d\n", which, (status >> 8) & 0xff);

                    write(1, msg, strlen(msg));
                    break;

                case -1:    //ERROR
                    perror("fork-1");
                    exit(1);
            }

            free(cmd1);
            free(cmd2);
            for (i = 0; i < MAXWORDS; i++)
                free(pparam1[i]);
            for (i = 0; i < MAXWORDS; i++)
                free(pparam2[i]);

            free(path);
            for (i = 0; i < MAXWORDS; i++)
                free(params[i]);
        }

        return 0;   
    } 
```

打字*回声一| 提示符处的wc -l*将仅输出*一个*带有相应等待打印语句的语句。自从我使用 C 以来已经有几年了，所以我走在正确的轨道上吗？

谢谢。

编辑：这是现在的运行管道功能。但唯一打印的是等待语句。

```
void runpipe(int pfd[], char *cmd1, char *p1[], char *cmd2, char *p2[])
{
    const int READ = 0;
    const int WRITE = 1;
    int pid;
    int status;

    switch (pid = fork())
    {
        case 0:     //Child
            close(pfd[WRITE]);
            dup2(pfd[READ], STDIN_FILENO);
            close(pfd[READ]);
            execve(cmd2, p2, environ);
            perror(cmd2);

        default:    //Parent
            close(pfd[READ]);
            dup2(pfd[WRITE], STDOUT_FILENO);
            close(pfd[WRITE]);
            execve(cmd1, p1, environ);
            perror(cmd1);

        case -1:    //ERROR
            perror("fork-RP");
            exit(1);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T18:39:32.050

那里发生了一些导致意外行为的事情。

首先是你分叉太多了。如果你将你的`runpipe()`函数调用展开到 switch 语句中`main()`，你会看到你达到了曾孙级别：

```
switch (pid0 = fork())
{
    case 0:     // Child
        switch (pid1 = fork())
        {
            case 0:     // GRAND-Child
                   // function call to runpipe()
                   switch (pid = fork())
                    {
                        case 0:     // GREAT-GRAND-Child
                            close(pfd[WRITE]);
                            dup2(pfd[READ], STDIN_FILENO);
                            close(pfd[READ]);
                            execve(cmd2, p2, environ);
                            perror(cmd2);

                        default:    // GRAND-Child
                            close(pfd[READ]);
                            dup2(pfd[WRITE], STDOUT_FILENO);
                            close(pfd[WRITE]);
                            execve(cmd1, p1, environ);
                            perror(cmd1); 
```

这是没有必要的。分叉一次，`main()`然后调用你的`runpipe()`函数。

与此问题相关的是您创建管道的位置。当您分叉时，新创建的子进程会继承父进程的所有打开文件（以及许多其他内容）。这包括默认描述符 0、1 和 2（stdin、stdout 和 stderr），以及任何其他打开的文件，包括您创建的名为`fd`. 这意味着父母、孩子、孙子和曾孙都继承了管道两端的副本。您正确地关闭了`runpipe()`函数内未使用的末端（孙子和曾孙的副本），但您的`main()`函数中的父级和子级也有副本！

由于使用管道的唯一一对进程是在 中创建的`runpipe()`，因此您可以将声明`fd`和调用移动`pipe(2)`到该函数中。

这两个修改将解决您的问题。

一个与你的 shell 流程完全无关的问题是你`main()`最终`wait(2)`在函数的“父”进程上执行它`runpipe()`。由于该父级是 running `cmd1`，因此您的 shell 将在完成后立即返回其提示`cmd1`，而不是在管道中的最后一个命令（`cmd2`在本例中）完成时返回。`echo | sleep 10`您可以通过在 shell 和真实 shell 中运行类似的东西来查看行为差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T21:10:54.020

该`dup`函数复制一个文件描述符，并*返回*新的副本。但是，这将不起作用，因为`stdin`子项仍然存在，并且新的文件描述符*不会*代替标准输入。

您必须先关闭标准输入文件描述符，然后再执行`dup`. 或者[`dup2`](http://linux.die.net/man/2/dup2)在复制之前使用 which 将首先自动关闭目标文件描述符：

```
dup2(pfd[0], STDIN_FILENO); 
```

# scala - 在 Scala 中对多维数组进行非currying/tupling？

> ID：15190872
> 
> 赞同：1
> 
> 时间：2013-03-03T21:05:44.877
> 
> 标签：scala, scala-collections, scala-2.10

假设我有一个例如二维数组，并且我将一些索引存储在元组中：

```
val testArray = Array.ofDim[Double](3, 4)
val ixs = (1,2) 
```

我想直接使用这些元组，例如`testArray(ixs)`. 但是，`Function.tupled(testedArray _)`返回“_ 必须遵循方法；不能遵循 Array[Array[Double]]”。

这是因为`Array`它实际上不是 的子类型`Function3`吗？**如果是这样，如何绕过这个限制？我应该使用隐式来扩展`ArrayOps`或类似的东西吗？**目前，我将数据存储在 a`Map`作为解决方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T21:21:19.490

数组数组不给予特殊处理；它们只是（某物）的数组。因此，没有通过元组访问它们的特殊方法。但正如您所建议的，您可以创建这样的方式。

你可以

```
implicit class ArrayOps2D[@specialized T](xss: Array[Array[T]]) {
  def apply(ij: (Int, Int)) = xss(ij._1)(ij._2)
  def apply(i: Int, j: Int) = xss(i)(j)
  def update(ij: (Int, Int), t: T) { xss(ij._1)(ij._2) = t }
  def update(i: Int, j: Int, t: T) { xss(i)(j) = t }
} 
```

你可能会想到做

```
implicit class ArrayOps2D[T](val xss: Array[Array[T]]) extends AnyVal {
  def apply(ij: (Int, Int)) = xss(ij._1)(ij._2)
  def apply(i: Int, j: Int) = xss(i)(j)
  def update(ij: (Int, Int), t: T) { xss(ij._1)(ij._2) = t }
  def update(i: Int, j: Int, t: T) { xss(i)(j) = t }
} 
```

但这在我看来效果不佳。由于实施限制，您不能专门化 AnyVal。此外，如果您经常使用原语，前者可能会更好，因为它避免了对原语进行装箱（希望 JVM 可以处理避免对象创建），而如果您大部分时间都使用非原语，则后者效率更高（例如字符串），因为您没有（正式）创建对象。但是您的示例使用原语。

在任何情况下，如果您这样做，您将获得带有元组和成对参数的无缝双索引寻址（正如我所写的那样）。但是，您*不能*完全无缝地使用更新方法！它们大部分都可以工作，但它们*不会*自动提升数字类型。所以如果你有双打并且你写`a(1,2) = 3`它会失败，因为它没有找到`update(Int, Int, Int)`方法，并且不认为使用`update(Int, Int, Double)`. 但是您可以通过转换（或者在这种情况下编写`3d`）来解决这个问题。

# php - 带有 API 查询的 SQL 注入和其他安全问题

> ID：15190873
> 
> 赞同：0
> 
> 时间：2013-03-03T21:05:51.347
> 
> 标签：php, security, sql-injection

如果这听起来有点荒谬，请多多包涵，但我只是在过去一两周内才学会了 PHP 和 jQuery 的基础知识。这对于任何有一点经验的人来说都是显而易见的，所以我很感激你能分享的任何信息。

我正在更新我的网站以包含一个自定义搜索功能，该功能通过 cURL 调用查询 SQL 数据库。简而言之：

1.  我从 HTML 表单（包括文本框）获取用户输入，然后将值发布到我域下服务器上的 php 文件（searchfunction.php）。

2.  searchfunction.php 然后处理表单数据，将其添加到包含私有 API 密钥（格式为 http://apidomain/[api key]/request.php?querystring）的 URL 查询字符串中，并将其发送到通过 curl_init 的第 3 方服务器。

3.  然后，第 3 方服务器根据 URL 的查询字符串返回一个序列化的 php 数组。然后，php 文件处理数组并回显与原始用户表单出现在同一页面上的一些 HTML（通过一些我几乎不理解的 jQuery 魔术）。

以下是我的问题：

Q1) 因为我将 cURL 字符串发送到 API，*然后*处理所有 SQL 内容，我是否有 SQL 注入的风险？如果是这样，消除这种风险的理论是什么？

Q2) 如何隐藏私有 API 密钥？浏览器的 URL 栏永远不会包含它，但是有没有一种简单的方法（可能是通过 .htaccess 文件）来防止窥探处理表单数据并返回 HTML 的 php 文件的内容？

Q3) 是否还有其他我应该注意的明显安全漏洞？有*一些*方法可以通过 API 写入数据库（尽管不是没有 API 密钥和适当的查询字符串语法），那么如何防止恶意用户操纵 cURL 调用呢？

提前感谢您的帮助。现在我已经进入了让我的网站与其他服务器通信的令人眼花缭乱的世界，我发现自己完全不知所措，尤其是在安全方面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T21:51:36.233

PHP 是服务器端，所以除非您回显密钥或导致警告/错误（这可能会抱怨您的 url 包含 api 密钥），否则没有问题。而且你也不知道 api 对 SQL 数据的处理（除非它是开源的），所以这并不重要。如果它们是安全的，它们就是安全的。如果您不确定，您应该询问他们的安全性（让他们知道这很重要）。

# xml - 每个循环的 xslt 不起作用

> ID：15190874
> 
> 赞同：0
> 
> 时间：2013-03-03T21:06:01.957
> 
> 标签：xml, web-services, xslt, amadeus

我需要使用 XSLT 显示来自 web 服务的 XML，但我试图在 XML 文件中循环，它只显示第一行。请告诉我在每个 xslt 循环中我做错了什么。

我的 xml 表很长，出于示例目的，我只提供一行数据。

```
<?xml-stylesheet type="text/xsl" href="XSLTFile.xsl"?>
 <soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <soapenv:Body>
       <ns1:OTA_AirLowFareSearchRS Version="2.001" xmlns="http://www.opentravel.org/OTA/2003/05" xmlns:ns1="http://www.opentravel.org/OTA/2003/05">
           <ns1:Success />
           <ns1:PricedItineraries>
             <ns1:PricedItinerary CompositeFlightNumber="AI" CountCompositeFlightNumber="1" FareType="Non-Refundable" InboundSegmentReference="1" MatrixFare="true" Mode="" OriginDestinationRPH="BLRHYDAI517AI20130321" OutboundSegmentReference="1" Priority="1" RecommendationRPH="1" Refundable="true" ReturnOnly="false" SequenceNumber="1.0" SupplierCode="1AWS">
               <ns1:AirItinerary SupplierSystem="Amadeus">
                 <ns1:OriginDestinationOptions>
                   <ns1:OriginDestinationOption Duration="01:05:00" FlightID="BLRHYDAI517AI2013-03-21" MajorityCarrier="AI" ReturnOnly="false" SupplierCode="1AWS" SupplierSystem="Amadeus" UniqueIdentifier="1.0">
                     <ns1:FlightSegment ArrivalDateTime="2013-03-21T09:20:00" CabinCode="Y" DeliveryMethod="Courier" DepartureDateTime="2013-03-21T08:15:00" Duration="01:05:00" FlightNumber="517" LTD="1AWS" LineNumber="Y" NumberInParty="BLRHYD" RPH="1" ResBookDesigCode="E" TicketType="Physical" ValidConnectionInd="1AWS">
                       <ns1:DepartureAirport AirPortName="Bengaluru" CityName="Bangalore" LocationCode="BLR" />
                       <ns1:ArrivalAirport AirPortName="Shamshabad Rajiv Gandhi" CityName="Hyderabad" LocationCode="HYD" />
                       <ns1:OperatingAirline Code="AI" />
                       <ns1:BookingClassAvail FareType="RP" ResBookDesigCode="E" ResBookDesigQuantity="5" Status="5" WebFareName="EAP30" />
                       <ns1:Equipment AirEquipType="319" />
                       <ns1:MarketingAirline Code="AI" MatrixCode="AI" Name="Air India" YTAirlineCode="AI" />
                       <ns1:ValidatingCarrier Code="AI" />
                     </ns1:FlightSegment>
                     <ns1:FormData>
                       <ns1:FBC Destination="HYD" FlightNumber="517" LineNumber="Y" Origin="BLR" SeatToSell="5" WebFareName="EAP30" />
                       <ns1:FareDifference>
                         <ns1:TotalFare ADT="1" BaseFare="670-ADT 670" CHD="0" Cabin="Economy" HostName="railserver" INF="0" Rbd="RP - E -" Tax="TTL-2355">3032</ns1:TotalFare>
                       </ns1:FareDifference>
                       <ns1:TicketingInfo DeliveryMethod="Courier" TicketTimeLimit="2013-03-03 18:43:00" TicketType="Physical" />
                       <ns1:AgentMarkup>
                         <ns1:Airlines>
                           <ns1:Airline>
                             <ns1:Code>6E</ns1:Code>
                             <ns1:GDS>0</ns1:GDS>
                             <ns1:WholeSalerFees>0.0000</ns1:WholeSalerFees>
                             <ns1:WholeSalerFeesType>F</ns1:WholeSalerFeesType>
                             <ns1:CommissionType>C</ns1:CommissionType>
                             <ns1:ApplyOn>BF</ns1:ApplyOn>
                             <ns1:Amount>0.0000</ns1:Amount>
                             <ns1:Type>P</ns1:Type>
                             <ns1:DiscountPLB>0.0000</ns1:DiscountPLB>
                             <ns1:DiscountPLBType>F</ns1:DiscountPLBType>
                             <ns1:DiscountPLBOn />
                             <ns1:Surcharge>2700.0000</ns1:Surcharge>
                           </ns1:Airline>
                           <ns1:Airline>
                             <ns1:Code>9H</ns1:Code>
                             <ns1:GDS>0</ns1:GDS>
                             <ns1:WholeSalerFees>0.0000</ns1:WholeSalerFees>
                             <ns1:WholeSalerFeesType>F</ns1:WholeSalerFeesType>
                             <ns1:CommissionType>M</ns1:CommissionType>
                             <ns1:ApplyOn>BF</ns1:ApplyOn>
                             <ns1:Amount>6.0000</ns1:Amount>
                             <ns1:Type>P</ns1:Type>
                             <ns1:DiscountPLB>0.0000</ns1:DiscountPLB>
                             <ns1:DiscountPLBType>F</ns1:DiscountPLBType>
                             <ns1:DiscountPLBOn />
                             <ns1:Surcharge>0.0000</ns1:Surcharge>
                           </ns1:Airline>
                           <ns1:Airline>
                             <ns1:Code>9W</ns1:Code>
                             <ns1:GDS>1</ns1:GDS>
                             <ns1:WholeSalerFees>0.0000</ns1:WholeSalerFees>
                             <ns1:WholeSalerFeesType>F</ns1:WholeSalerFeesType>
                             <ns1:CommissionType>C</ns1:CommissionType>
                             <ns1:ApplyOn>BF</ns1:ApplyOn>
                             <ns1:Amount>0.0000</ns1:Amount>
                             <ns1:Type>P</ns1:Type>
                             <ns1:DiscountPLB>0.0000</ns1:DiscountPLB>
                             <ns1:DiscountPLBType>F</ns1:DiscountPLBType>
                             <ns1:DiscountPLBOn />
                             <ns1:Surcharge>1100.0000</ns1:Surcharge>
                           </ns1:Airline>
                           <ns1:Airline>
                             <ns1:Code>AI</ns1:Code>
                             <ns1:GDS>1</ns1:GDS>
                             <ns1:WholeSalerFees>0.0000</ns1:WholeSalerFees>
                             <ns1:WholeSalerFeesType>F</ns1:WholeSalerFeesType>
                             <ns1:CommissionType>C</ns1:CommissionType>
                             <ns1:ApplyOn>BF</ns1:ApplyOn>
                             <ns1:Amount>0.0000</ns1:Amount>
                             <ns1:Type>P</ns1:Type>
                             <ns1:DiscountPLB>0.0000</ns1:DiscountPLB>
                             <ns1:DiscountPLBType>F</ns1:DiscountPLBType>
                             <ns1:DiscountPLBOn />
                             <ns1:Surcharge>1100.0000</ns1:Surcharge>
                           </ns1:Airline>
                           <ns1:Airline>
                             <ns1:Code>DN</ns1:Code>
                             <ns1:GDS>0</ns1:GDS>
                             <ns1:WholeSalerFees>0.0000</ns1:WholeSalerFees>
                             <ns1:WholeSalerFeesType>F</ns1:WholeSalerFeesType>
                             <ns1:CommissionType>M</ns1:CommissionType>
                             <ns1:ApplyOn>BF</ns1:ApplyOn>
                             <ns1:Amount>6.0000</ns1:Amount>
                             <ns1:Type>P</ns1:Type>
                             <ns1:DiscountPLB>0.0000</ns1:DiscountPLB>
                             <ns1:DiscountPLBType>F</ns1:DiscountPLBType>
                             <ns1:DiscountPLBOn />
                             <ns1:Surcharge>3250.0000</ns1:Surcharge>
                           </ns1:Airline>
                           <ns1:Airline>
                             <ns1:Code>G8</ns1:Code>
                             <ns1:GDS>0</ns1:GDS>
                             <ns1:WholeSalerFees>0.0000</ns1:WholeSalerFees>
                             <ns1:WholeSalerFeesType>F</ns1:WholeSalerFeesType>
                             <ns1:CommissionType>C</ns1:CommissionType>
                             <ns1:ApplyOn>BF</ns1:ApplyOn>
                             <ns1:Amount>0.0000</ns1:Amount>
                             <ns1:Type>P</ns1:Type>
                             <ns1:DiscountPLB>0.0000</ns1:DiscountPLB>
                             <ns1:DiscountPLBType>F</ns1:DiscountPLBType>
                             <ns1:DiscountPLBOn />
                             <ns1:Surcharge>2700.0000</ns1:Surcharge>
                           </ns1:Airline>
                           <ns1:Airline>
                             <ns1:Code>I7</ns1:Code>
                             <ns1:GDS>0</ns1:GDS>
                             <ns1:WholeSalerFees>0.0000</ns1:WholeSalerFees>
                             <ns1:WholeSalerFeesType>F</ns1:WholeSalerFeesType>
                             <ns1:CommissionType>M</ns1:CommissionType>
                             <ns1:ApplyOn>BF</ns1:ApplyOn>
                             <ns1:Amount>6.0000</ns1:Amount>
                             <ns1:Type>P</ns1:Type>
                             <ns1:DiscountPLB>0.0000</ns1:DiscountPLB>
                             <ns1:DiscountPLBType>F</ns1:DiscountPLBType>
                             <ns1:DiscountPLBOn />
                             <ns1:Surcharge>0.0000</ns1:Surcharge>
                           </ns1:Airline>
                           <ns1:Airline>
                             <ns1:Code>IC</ns1:Code>
                             <ns1:GDS>1</ns1:GDS>
                             <ns1:WholeSalerFees>0.0000</ns1:WholeSalerFees>
                             <ns1:WholeSalerFeesType>F</ns1:WholeSalerFeesType>
                             <ns1:CommissionType>C</ns1:CommissionType>
                             <ns1:ApplyOn>BF</ns1:ApplyOn>
                             <ns1:Amount>0.0000</ns1:Amount>
                             <ns1:Type>P</ns1:Type>
                             <ns1:DiscountPLB>0.0000</ns1:DiscountPLB>
                             <ns1:DiscountPLBType>F</ns1:DiscountPLBType>
                             <ns1:DiscountPLBOn />
                             <ns1:Surcharge>1100.0000</ns1:Surcharge>
                           </ns1:Airline>
                           <ns1:Airline>
                             <ns1:Code>IT</ns1:Code>
                             <ns1:GDS>1</ns1:GDS>
                             <ns1:WholeSalerFees>0.0000</ns1:WholeSalerFees>
                             <ns1:WholeSalerFeesType>F</ns1:WholeSalerFeesType>
                             <ns1:CommissionType>C</ns1:CommissionType>
                             <ns1:ApplyOn>BF</ns1:ApplyOn>
                             <ns1:Amount>0.0000</ns1:Amount>
                             <ns1:Type>P</ns1:Type>
                             <ns1:DiscountPLB>0.0000</ns1:DiscountPLB>
                             <ns1:DiscountPLBType>F</ns1:DiscountPLBType>
                             <ns1:DiscountPLBOn />
                             <ns1:Surcharge>1100.0000</ns1:Surcharge>
                           </ns1:Airline>
                           <ns1:Airline>
                             <ns1:Code>S2</ns1:Code>
                             <ns1:GDS>1</ns1:GDS>
                             <ns1:WholeSalerFees>0.0000</ns1:WholeSalerFees>
                             <ns1:WholeSalerFeesType>F</ns1:WholeSalerFeesType>
                             <ns1:CommissionType>C</ns1:CommissionType>
                             <ns1:ApplyOn>BF</ns1:ApplyOn>
                             <ns1:Amount>0.0000</ns1:Amount>
                             <ns1:Type>P</ns1:Type>
                             <ns1:DiscountPLB>0.0000</ns1:DiscountPLB>
                             <ns1:DiscountPLBType>F</ns1:DiscountPLBType>
                             <ns1:DiscountPLBOn />
                             <ns1:Surcharge>1100.0000</ns1:Surcharge>
                           </ns1:Airline>
                           <ns1:Airline>
                             <ns1:Code>SG</ns1:Code>
                             <ns1:GDS>0</ns1:GDS>
                             <ns1:WholeSalerFees>0.0000</ns1:WholeSalerFees>
                             <ns1:WholeSalerFeesType>F</ns1:WholeSalerFeesType>
                             <ns1:CommissionType>C</ns1:CommissionType>
                             <ns1:ApplyOn>BF</ns1:ApplyOn>
                             <ns1:Amount>0.0000</ns1:Amount>
                             <ns1:Type>P</ns1:Type>
                             <ns1:DiscountPLB>0.0000</ns1:DiscountPLB>
                             <ns1:DiscountPLBType>F</ns1:DiscountPLBType>
                             <ns1:DiscountPLBOn />
                             <ns1:Surcharge>2000.0000</ns1:Surcharge>
                           </ns1:Airline>
                           <ns1:Others>
                             <ns1:Code />
                             <ns1:GDS>1</ns1:GDS>
                             <ns1:WholeSalerFees>0</ns1:WholeSalerFees>
                             <ns1:CommissionType>C</ns1:CommissionType>
                             <ns1:ApplyOn>B</ns1:ApplyOn>
                             <ns1:Amount>0.0000</ns1:Amount>
                           </ns1:Others>
                         </ns1:Airlines>
                       </ns1:AgentMarkup>
                     </ns1:FormData>
                     <ns1:FormData />
                   </ns1:OriginDestinationOption>
                 </ns1:OriginDestinationOptions>
               </ns1:AirItinerary>
               <ns1:AirItineraryPricingInfo UniqueIdentifier="1.0">
                 <ns1:ItinTotalFare NegotiatedFare="No">
                   <ns1:BaseFare Amount="670" CurrencyCode="INR" />
                   <ns1:Taxes>
                     <ns1:Tax Amount="2355" CurrencyCode="INR" TaxCode="TTL" />
                   </ns1:Taxes>
                   <ns1:TotalFare Amount="3032" CurrencyCode="INR" />
                   <ns1:Fees>
                     <ns1:Fee Amount="0" />
                     <ns1:Fee Amount="0" FeeCode="YatraLCCSurcharge" />
                   </ns1:Fees>
                   <ns1:ServiceTax Amount="7" Currency="INR" Description="Service Tax" ServiceTaxCode="ST" ServiceTaxRate="0.01" />
                   <ns1:Markups>
                     <ns1:Markup Amount="0" CurrencyCode="INR" Description="0.0 wholesalerfees for client 1152" MarkupCode="DisplayMarkup" MarkupType="W" Type="C" />
                     <ns1:Markup Amount="0" CurrencyCode="INR" Description="0.0% on base fare for client - 1152" MarkupCode="DisplayMarkup" MarkupType="M" Type="C" />
                     <ns1:Markup Amount="0" CurrencyCode="INR" Description="0.0% on fuel surcharge 0 -for client - 1152" MarkupCode="DisplayMarkup" MarkupType="M" Type="C" />
                     <ns1:Markup Amount="0" CurrencyCode="INR" Description="0.0 on base fare for client - 1152" MarkupCode="DisplayMarkup" MarkupType="M" Type="P" />
                   </ns1:Markups>
                 </ns1:ItinTotalFare>
                 <ns1:PTC_FareBreakdowns>
                   <ns1:PTC_FareBreakdown>
                     <ns1:PassengerTypeQuantity Code="ADT" Quantity="1.0" />
                     <ns1:FareBasisCodes>
                       <ns1:FareBasisCode FareType="" SegmentRPH="">EAP30</ns1:FareBasisCode>
                     </ns1:FareBasisCodes>
                     <ns1:PassengerFare>
                       <ns1:BaseFare Amount="670" CurrencyCode="INR" />
                       <ns1:Taxes>
                         <ns1:Tax Amount="2355" CurrencyCode="INR" TaxCode="TTL" />
                       </ns1:Taxes>
                       <ns1:TotalFare Amount="3032" CurrencyCode="INR" />
                       <ns1:ServiceTax Amount="7" Currency="INR" Description="Service Tax" ServiceTaxCode="ST" ServiceTaxRate="0.01" />
                       <ns1:Markups>
                         <ns1:Markup Amount="0.0000" CurrencyCode="INR" Description="0.0 wholesalerfees for client 1152" MarkupCode="DisplayMarkup" MarkupType="W" Type="C" />
                         <ns1:Markup Amount="0" CurrencyCode="INR" Description="0.0 % on base fare for client - 1152" MarkupCode="DisplayMarkup" MarkupType="M" Type="C" />
                         <ns1:Markup Amount="0" Description="0.0% on fule surcharge 0.0for client1152" MarkupCode="DisplayMarkup" MarkupType="M" Type="C" />
                         <ns1:Markup Amount="0" CurrencyCode="INR" Description="0.0 on base fare for client1152" MarkupCode="DisplayMarkup" MarkupType="M" Type="P" />
                       </ns1:Markups>
                     </ns1:PassengerFare>
                   </ns1:PTC_FareBreakdown>
                 </ns1:PTC_FareBreakdowns>
                 <ns1:FareInfos>
                   <ns1:FareInfo>
                     <ns1:FareReference>EAP30</ns1:FareReference>
                     <ns1:FilingAirline Code="ZZ" />
                     <ns1:DepartureAirport LocationCode="BLR" />
                     <ns1:ArrivalAirport LocationCode="HYD" />
                   </ns1:FareInfo>
                 </ns1:FareInfos>
               </ns1:AirItineraryPricingInfo>
               <ns1:TicketingInfo DeliveryMethod="Courier" TicketTimeLimit="2013-03-03 18:43:00" TicketType="Physical" />
               <ns1:Notes>PENALTY APPLIES</ns1:Notes>
               <ns1:Notes>LAST TKT DTE21OCT12 - SEE ADV PURCHASE</ns1:Notes>
             </ns1:PricedItinerary>
                     .
                     .
                     .
                     .
                     .
                     .
               </ns1:PricedItineraries >
         </ns1:OTA_AirLowFareSearchRS >
                           </soapenv:Body >
</soapenv:Envelope > 
```

和我的 xslt 样式表如下：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:xs="http://www.opentravel.org/OTA/2003/05"
                xmlns:ns1="http://www.opentravel.org/OTA/2003/05"
                xmlns:soapenv="http://www.opentravel.org/OTA/2003/05"
    xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl"
>

  <xsl:output method="xml" indent="yes"/>

  <xsl:template match="ns1:OTA_AirLowFareSearchRS">
    <table cellpadding="10px">
      <tr>
        <th>
          Airline
        </th>
        <th>
          Departure
        </th>
        <th>

          Arrival
        </th>
        <th>
          Duration
        </th>
        <th>

          Fare Type
        </th>
        <th>
          Per Adult Fare
        </th>

      </tr> 

      <xsl:for-each  select ="ns1:PricedItineraries">

        <tr>
          <td>
            <xsl:value-of  select="./ns1:PricedItinerary/ns1:AirItinerary/ns1:OriginDestinationOptions/ns1:OriginDestinationOption/ns1:FlightSegment/ns1:MarketingAirline/@Name"  />

          </td>
          <td>
            <xsl:value-of  select="substring-after(./ns1:PricedItinerary/ns1:AirItinerary/ns1:OriginDestinationOptions/ns1:OriginDestinationOption/ns1:FlightSegment/@DepartureDateTime,'')" />  
          </td>
          <td>
            <xsl:value-of  select="substring-after(./ns1:PricedItinerary/ns1:AirItinerary/ns1:OriginDestinationOptions/ns1:OriginDestinationOption/ns1:FlightSegment/@ArrivalDateTime,'')" />
          </td>
          <td>
            <xsl:value-of  select=" ./ns1:PricedItinerary/ns1:AirItinerary/ns1:OriginDestinationOptions/ns1:OriginDestinationOption/ns1:FlightSegment/@Duration" />
          </td>
          <td>
             <xsl:choose>
              <xsl:when test="./@Refundable='true'">
                <xsl:text>Refundable</xsl:text>
              </xsl:when>
              <xsl:otherwise>
                <xsl:text>Non-Refundable</xsl:text>
              </xsl:otherwise>
            </xsl:choose>

          </td>
          <td>

            <xsl:value-of  select=" ./ns1:PricedItinerary/ns1:AirItineraryPricingInfo/ns1:PTC_FareBreakdowns/ns1:PTC_FareBreakdown/ns1:PassengerFare/ns1:TotalFare/@Amount" />

          </td>

        </tr>
      <tr>
        <td>
   <xsl:value-of  select="./ns1:PricedItinerary/ns1:AirItinerary/ns1:OriginDestinationOptions/ns1:OriginDestinationOption/ns1:FlightSegment/ns1:MarketingAirline/@YTAirlineCode"  />

        -  <xsl:value-of  select="./ns1:PricedItinerary/ns1:AirItinerary/ns1:OriginDestinationOptions/ns1:OriginDestinationOption/ns1:FormData/ns1:FBC/@FlightNumber"  />

        </td>

        <td>
          <xsl:value-of  select="./ns1:PricedItinerary/ns1:AirItinerary/ns1:OriginDestinationOptions/ns1:OriginDestinationOption/ns1:FlightSegment/ns1:DepartureAirport/@CityName"  />
        </td>
        <td>
          <xsl:value-of  select="./ns1:PricedItinerary/ns1:AirItinerary/ns1:OriginDestinationOptions/ns1:OriginDestinationOption/ns1:FlightSegment/ns1:ArrivalAirport/@CityName"  />
        </td>
        <td></td>
        <td></td> 
      </tr>

      </xsl:for-each>
    </table>
  </xsl:template>
  <xsl:template match="ns1:MarketingAirline">
    </xsl:template >

  <xsl:template match="/">
    <html>
      <body>
        <xsl:apply-templates/>
      </body>
    </html>
  </xsl:template> 

</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T21:57:56.050

**这段代码**：

```
 <xsl:for-each  select ="ns1:PricedItineraries">
       <!-- Processing intentionally skipped -->
     <xsl:for-each/> 
```

**选择所有要处理的节点**。

提供的元素中只有*一个* `ns1:PricedItineraries`元素——这就是“循环”只执行一次的原因。

**解决方案**：

**使用**：

```
 <xsl:for-each  select ="ns1:PricedItineraries/ns1:PricedItinerary"> 
```

**`./ns1:PricedItinerary/`并在此指令中从任何 XPath 表达式中删除前导**。

# asp.net - 带有 MySQL 的 ASP.NET MVC 4 Web API 不断抛出 DataReader Open 异常

> ID：15190877
> 
> 赞同：0
> 
> 时间：2013-03-03T21:06:17.590
> 
> 标签：asp.net, mysql, asp.net-mvc-4, asp.net-web-api

我正在使用 MySQL 和他的 .NET 连接器（[http://dev.mysql.com/doc/refman/5.5/en/connector-net.html](http://dev.mysql.com/doc/refman/5.5/en/connector-net.html)）构建一个带有 ASP.NET MVC 4 Web API 的 Web 服务；

但是在我的测试中，当我从我的 HTML5 客户端向我的 Web 服务发出 3 个同时请求时，它有时只返回 2 个或 1 个请求的正确数据，其他请求向我抛出 505 错误，表示已经存在关联的 DataReader 对象通过连接，更具体地说：

```
There is already an open DataReader associated with this Connection which must be closed first.
   at MySql.Data.MySqlClient.ExceptionInterceptor.Throw(Exception exception)
   at MySql.Data.MySqlClient.MySqlCommand.Throw(Exception ex)
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteReader(CommandBehavior behavior)
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteDbDataReader(CommandBehavior behavior)   
   at System.Data.Common.DbCommand.System.Data.IDbCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.Common.DbDataAdapter.FillInternal(DataSet dataset, DataTable[] datatables, Int32 startRecord, Int32 maxRecords, String srcTable, IDbCommand command, CommandBehavior behavior)
   at System.Data.Common.DbDataAdapter.Fill(DataTable[] dataTables, Int32 startRecord, Int32 maxRecords, IDbCommand command, CommandBehavior behavior)
   at System.Data.Common.DbDataAdapter.Fill(DataTable dataTable)
   at App.Backservice.Models.Persistence.DataTable..ctor(MySqlDataAdapter adp) 
```

除了 DataReader 投诉的错误外，我目前只使用 DataTables，但我希望驱动程序使用 DataReader 加载 DataTable ...

我找不到为什么它一直向我抛出这个错误。我与数据库的连接不是持久的，我希望如此，我期待每个请求一个连接。

以前有人遇到过这种情况吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T23:48:00.513

`DataReader`正如您所提到的，似乎基础对象正在使用 a 。在这种情况下，您必须对数据库连接具有同步访问权限。`DataReader`s 打开一个连接，并保持它忙碌*直到*d .`DataReader``Close`

.NET Framework 充分利用了[连接池](http://en.wikipedia.org/wiki/Connection_pool)，因此到同一个数据库的多个连接实际上会尝试成为一个真正建立的连接（如果可能的话）。由于同时发生多个 Web 请求，这种连接池是好的，但是，`DataReader`s 正在“打破”这一优势。

为了帮助解决这个问题，`Object`请在应用程序的某处创建一个静态（并实例化）。继续使用以下代码封装访问 MySQL 的代码：

```
lock (_StaticLockingObject)
{
    // Data access code here
} 
```

# javascript - Plot Location vs. Time

> ID：15190878
> 
> 赞同：0
> 
> 时间：2013-03-03T21:06:21.453
> 
> 标签：javascript, ruby-on-rails, html, charts, maps

I'm working on a simulation where workers will be tracked as they walk around a store. I'd like to create a map showing a line where the person has been (kind of like the old snake game).

For starters, I'll just have a square room and watch the workers walk around that. I thought about trying to use a line graph with something like [Highcharts.js](http://www.highcharts.com/#home), but it feels like I'm really bending the linechart to fit my needs.

Is there a mapping framework out there?

I'm game for either javascript, Ruby on Rails, or HTML5 solutions.

# iphone - "Show" anchor point?

> ID：15190879
> 
> 赞同：0
> 
> 时间：2013-03-03T21:06:24.750
> 
> 标签：iphone, objective-c, xcode, animation, ios6

I'm using a custom image (which is 360 x 276 so not proportional) and I'm rotating it with an animation. The anchor point is not just (0,.5) or (1,0), it's something like (.23423, .912314). Is there any way to show, where the anchor point currently is? Or setting it in InterfaceBuilder? Currently I'm just trying to reach the correct CGPoint by testing different values, but I didn't get the perfect one.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:18:41.000

不幸的是，你不能简单地在 IB 中设置它。在您的情况下，我会使用一些图像处理应用程序来找出您需要图像旋转的坐标，然后进行数学运算：

`84,3228 / 360 = 0.24423`

不一定很出色，但我会说是可行的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T12:06:36.613

这可能会有所帮助。

```
CGPoint anchorPosition = CGPointMake(
                    imageView.frame.origin.x + imageView.frame.size.width*anchorPoint.x,
                    imageView.frame.origin.y + imageView.frame.size.height*anchorPoint.y); 
```

可以参考[http://disanji.net/iOS_Doc/#documentation/Cocoa/Conceptual/CoreAnimation_guide/Articles/Layers.html](http://disanji.net/iOS_Doc/#documentation/Cocoa/Conceptual/CoreAnimation_guide/Articles/Layers.html)

# node.js - NodeJS + ExpressJS wait 2 minutes before sending .js files

> ID：15190884
> 
> 赞同：2
> 
> 时间：2013-03-03T21:06:45.833
> 
> 标签：node.js, express

I'm having problems loading .js files with my NodeJS project. In this project I'm currently running NodeJS 0.6.15 and Express 2.5.6.

The problem is that when I make a request for a .js file, it takes exactly 2 minutes.

Any idea?!

It's quite strange because it has been working for a long time, and now without changing anything it gets this error. After 2 minutes it returns the files perfectly.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T03:50:31.833

最有可能的是，您没有调用`response.end()`，因此连接在大约 2 分钟后超时（典型的 HTTP/1.1），被刷新并关闭，然后您将内容返回到浏览器中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-26T01:24:46.123

我在 Ajax 请求而不是 .js 文件上遇到了类似的问题。事实证明，这是由浏览器本身引起的。错误地，我在我的 Windows8 x64 系统中安装了 32 位 Chrome/Firefox。

**问题详情**

问题是任何`Content-Type` `application/json`响应很小或几乎为空的 Ajax 请求都会挂起 2 分钟，即使在 Developer Tool 中您可以看到响应已返回。2 分钟后，浏览器在请求的计时结果中将该请求标记为已完成 2 分钟的内容下载。

但是，对于响应量很大的请求，这并没有发生。确实很奇怪。

**环境**

*   Nodejs v4.2.4 或 Nodejs v0.12.9
*   Expressjs 4.13.3

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-06T12:14:22.673

```
app.use(session({
    secret: config.secrets.session,
    saveUninitialized: false,
    resave: false,
    store: new mongoStore({
    mongooseConnection: mongoose.connection,
      db: 'freport'
    })
 })); 
```

set saveUninitialized: false 解决问题，但还不知道为什么

# javascript - struggling with creating asterisks in Javascript

> ID：15190887
> 
> 赞同：0
> 
> 时间：2013-03-03T21:06:53.993
> 
> 标签：javascript, function

I've been struggling with this for some time now. What I wanted to create is to output a triangle of asterisks based on user's input. Let say user entered size 5, it would look something like this:

```
*
**
***
****
***** 
```

My HTML looks like:

```
<p>
Size: <input type="text" id="size">
<input type="button" value="Draw" onclick="draw()">
</p>

<pre id="output">
</pre> 
```

In my Javascript, I have:

```
function draw()
{
  var size = customJS.get ( "size" ); //I have a custom library where it get the Id from HTML
  var theTriangle = makeTriangle( size.value ); //sending in the size
  customJS.set ("output", theTriangle); //will set theTriangle to display to "output" in HTML
}

function makeTriangle( theSize )
{
    var allLines = "";    // an empty string to hold the entire triangle
    for ( var i = 0; i <= size; i++) // this loop size times
    {
        var oneLine = createLine ( i <= size ); // amount of asterisks for this line
        allLines += oneLine;
    }
    return allLines;
}

function createLine ( length )
{
    var aLine = "";     // an empty string to hold the contents of this one line
    for ( var j = 0; j <= i; j++ ) //this loop length times
    {
        aLine += '*';  
    }
    return aLine + "<br>";
} 
```

anyone have any tip on how I go about this? thank you so much!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T21:08:52.113

HTML 中的换行符通常显示为空格，但您希望它们显示为换行符。该`pre`标签使换行符实际上显示为新行，因此将输出包装在`pre`标签中：

```
customJS.set ("output", "<pre>" + theTriangle + "</pre>"); 
```

另外，你打电话`createLine`是这样的：

```
var oneLine = createLine ( i <= size ); 
```

`i <= size`产生一个布尔值 (`true`或`false`) 而不是一个数字。您可能只是想通过它`i`：

```
var oneLine = createLine ( i ); 
```

此外，您的设置`size`如下：

```
var size = customJS.get = ( "size" ); 
```

您可能想要删除第二个等于，因为它按原样将变量`size`设置为 string `"size"`。

最后，你有几个变量是错误的： in `makeTriangle`，你是循环`size`次数，但`size`未定义；你可能的意思是`theSize`。在`createLine`中，您正在循环`i`时间，但`i`未定义；你可能的意思是`length`。

有了这一切，[它的工作原理](http://jsfiddle.net/u6mjm/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T21:10:42.840

您的代码中有几个错误。例如，在函数 makeTriangle() 中使用 theSize 代替 size 作为参数，在 for 循环条件中的 createLine() 函数中使用 i 代替 length。

另一个是：

利用

```
return aLine + "<br/>"; 
```

代替

```
return aLine + "\n"; 
```

您的代码的工作解决方案可以在这个[jsFiddle](http://jsfiddle.net/uwe_guenther/wavDH/)中找到：http : [//jsfiddle.net/uwe_guenther/wavDH/](http://jsfiddle.net/uwe_guenther/wavDH/)

下面是小提琴的副本：

*索引.html*

```
<!DOCTYPE html>
<html>
<head>
    <title></title>
</head>
<body>
    <p>Size:
         <input type="text" id="sizeTextField">
         <input id='drawButton' type="button" value="Draw">
         <div id='output'></div>
    </p>

    <script src='main.js'></script>
</body>
</html> 
```

*main.js*

```
(function (document) {
    var drawButton = document.getElementById('drawButton'),
        sizeTextField = document.getElementById('sizeTextField'),
        output = document.getElementById('output');

    function makeTriangle(size) {
        var allLines = '';
        for (var i = 0; i <= size; i++) {
            var oneLine = createLine(i); // amount of asterisks for this line
            allLines += oneLine;
        }
        return allLines;
    }

    function createLine(length) {
        var aLine = '';
        for (var j = 0; j <= length; j++) {
            aLine += '*';
        }
        return aLine + "<br/>";
    }

    drawButton.onclick = function () {
        output.innerHTML = makeTriangle(sizeTextField.value);
    };
})(document); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-23T17:21:54.647

您可以利用一些 JavaScript 技巧使代码更简洁：

```
<div style="text-align: center">
    <label>Size:
        <input type="text" id="size" value="5">
    </label> <pre id='output'></pre>

</div>
<script>
    var size = document.getElementById('size'),
        output = document.getElementById('output');

    function update() {
        var width = +size.value, // Coerce to integer.
            upsideDown = width < 0, // Check if negative.
            width = Math.abs(width), // Ensure positive.
            treeArray = Array(width).join('0').split('0') // Create an array of 0s "width" long.
                .map(function(zero, level) { // Visit each one, giving us the chance to change it.
                    return Array(2 + level).join('*'); // Create a string of *s.
                });
        upsideDown && treeArray.reverse(); // If width was negative, stand the tree on its head.
        output.innerHTML = treeArray.join('\n'); // Join it all together, and output it!
    }

    size.onkeyup = update;
    update();
    size.focus();
</script> 
```

[http://jsfiddle.net/mhtKY/4/](http://jsfiddle.net/mhtKY/4/)

# javascript - javascript draw particles

> ID：15190899
> 
> 赞同：2
> 
> 时间：2013-03-03T21:07:41.270
> 
> 标签：javascript, animation, static, particles

How can I draw around `50000` particles in a browser and then just stop, I know how to create unending animations of particles, but how can I create one that once its done drawing the particles it just stops.

Edit

So essintially I want to time the drawing of the particles, however when i attack a timer, it doesnt get the change because the animation doesnt stop.

```
var scene = new Scene(),
  particles = [],
  len = 40000,
  height = document.body.offsetHeight,
  width = document.body.offsetWidth;

function Particle() {
  this.x = 0;
  this.y = 0;
  this.size = 0;
  this.depth = 0;
  this.vy = 0;
}
Particle.prototype = {
  constructor: Particle,
  update: function (width, height) {
    if (this.y > height) {
      this.y = 1 - this.size;
    }
    this.y += this.vy;
  }
};
for (var i = 0; i < len; i++) {
  var particle = new Particle();
  particle.x = Math.random() * width;
  particle.y = Math.random() * height;
  particle.depth = Math.random() * 10 | 0;
  particle.size = (particle.depth + 1) / 8;
  particle.vy = (particle.depth * .25) + 1 / Math.random();
  particles.push(particle);
}

function falling_particles(scene) {
  for (var i = 0, l = particles.length; i < l; i++) {
    var particle = particles[i];
    for (var w = 0; w < particle.size; w++) {
      for (var h = 0; h < particle.size; h++) {
        var pData = (~~(particle.x + w) + (~~(particle.y + h) * scene.width)) * 4;
        scene.idata.data[pData] = 255;
        scene.idata.data[pData + 1] = 255;
        scene.idata.data[pData + 2] = 255;
        scene.idata.data[pData + 3] = 255;
      }
    }
    particle.update(scene.width, scene.height);
  }
  return scene.idata;
}
scene.setup(document.getElementById('canvas'), falling_particles, width, height, !0);
scene.animate();
window.onresize = function () {
  height = scene.height = scene.canvas.height = document.body.offsetHeight;
  width = scene.width = scene.canvas.width = document.body.offsetWidth;
}; 
```

link here: [http://jsfiddle.net/MdSP4/](http://jsfiddle.net/MdSP4/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T21:32:04.280

我不确定，你到底想做什么，但如果你添加

```
setTimeout(function(){
    scene.paused = true;
},1000); 
```

然后所有的绘图将在一秒钟后停止。

# ios - 如何像 iPad 时钟一样做一个非常流畅的秒针指针动画（没有滴答动作）

> ID：15190900
> 
> 赞同：3
> 
> 时间：2013-03-03T21:07:45.653
> 
> 标签：ios, objective-c, core-animation, calayer, clock

我正在开发一个 iPad 应用程序，我试图在其中显示秒针显示秒针运动，就像这样每秒更新一次。

```
- (void) updateClock:(NSTimer *)theTimer{
    dateComponents = [[NSCalendar currentCalendar] components:(NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit) fromDate:[NSDate date]];
    seconds = [dateComponents second];
    minutes = [dateComponents minute];
    hours = [dateComponents hour];
    secAngle = Degrees2Radians(seconds/60.0*360);
    minAngle = Degrees2Radians(minutes/60.0*360);
    hourAngle = Degrees2Radians(hours/24.0*360) + minAngle/24.0;
    secHand.transform = CATransform3DMakeRotation (secAngle+M_PI, 0, 0, 1);
    hourHand.transform = CATransform3DMakeRotation (hourAngle+M_PI, 0, 0, 1);
    minHand.transform = CATransform3DMakeRotation (minAngle+M_PI, 0, 0, 1);
}

- (void)start{
    timer = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(updateClock:) userInfo:nil repeats:YES];
} 
```

然而，它现在的工作方式，它表明它每秒都在滴答作响。但我真正想要的是为图层设置动画，使其看起来在 1 分钟内从 0 到 360 的完整旋转中连续运动，但是，我只能让它开始从 0 到 360 做一个完整的旋转，所以我用了以下秒针：

```
-(void)startSmooth{
    started = YES;
    CABasicAnimation *fullRotation;
    fullRotation = [CABasicAnimation animationWithKeyPath:@"transform.rotation"];
    fullRotation.fromValue = [NSNumber numberWithFloat:0];
    fullRotation.toValue = [NSNumber numberWithFloat:((360*M_PI)/180)];
    fullRotation.duration = 60.0f;
    fullRotation.repeatCount = HUGE_VALF;
    [secHand addAnimation:fullRotation forKey:@"360"];
} 
```

然而，这样做的问题是它总是以 0 度角开始旋转，因此无论时间是什么，指针看起来似乎总是从 30 秒开始运动。

我想做的是让它从秒针应该在的实际点开始。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T23:07:05.600

实际上有两个问题：动画的最佳方式和如何获得毫秒

### `NSTimer`基于动画的替代方案

您可能需要考虑使用[`CADisplayLink`](http://developer.apple.com/library/ios/#documentation/QuartzCore/Reference/CADisplayLink_ClassRef/Reference/Reference.html)而不是`NSTimer`或核心动画。

首先，您可以创建一个`CADisplayLink`属性：

```
@property (nonatomic, strong) CADisplayLink *displayLink; 
```

二、可以设置显示链接并启动：

```
- (void)startDisplayLink
{
    self.displayLink = [CADisplayLink displayLinkWithTarget:self selector:@selector(handleDisplayLink:)];
    [self.displayLink addToRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
} 
```

第三，你可以把你的时钟手绘逻辑放在这里：

```
- (void)handleDisplayLink:(CADisplayLink *)displayLink
{
    // update your clock hands here
} 
```

最后，如果需要停止显示链接，可以调用：

```
- (void)stopDisplayLink
{
    [self.displayLink invalidate];
    self.displayLink = nil;
} 
```

### 如何获得毫秒

虽然我最初认为您专注于动画问题，但我意识到您问题的根源是`NSDateComponents`可悲的是没有毫秒。有很多方法可以获得毫秒，但我可能只使用日期格式化程序：

```
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
formatter.dateFormat = @"hh:mm:ss.SSS";
NSString *string = [formatter stringFromDate:[NSDate date]];
NSArray *timeComponents = [string componentsSeparatedByString:@":"];

// if time was 09:48:17.197, then

NSInteger hour = [timeComponents[0] integerValue];    // 9
NSInteger min = [timeComponents[1] integerValue];     // 48
CGFloat floatSec = [timeComponents[2] floatValue];    // 17.197 
```

如果你想让时针和分针像秒针一样扫动，那么你也可以计算它们的分数值：

```
CGFloat floatMin = min + (floatSec / 60.0);           // 48.287
CGFloat floatHour = hour + (floatMin / 60.0);         // 9.805 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T22:12:07.020

谢谢大家，我使用开发人员文档通过使用 fromValue 和 byValue 而不是 fromValue 和 toValue 找到了我自己问题的答案

只需要改变：

```
-(void)startSmooth{
    CABasicAnimation *fullRotationSec;
    fullRotationSec = [CABasicAnimation animationWithKeyPath:@"transform.rotation"];
    fullRotationSec.fromValue = [NSNumber numberWithFloat:secAngle+M_PI];
    fullRotationSec.byValue = [NSNumber numberWithFloat:((360*M_PI)/180)];
    fullRotationSec.duration = 60.0f;
    fullRotationSec.repeatCount = HUGE_VALF;
    [secHandView addAnimation:fullRotation forKey:@"360"];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T21:25:04.197

我最近回答了这个关于基于计时器[绘制钟面的问题。](https://stackoverflow.com/questions/14838371/how-to-rotote-the-hands-of-clock-for-the-24-hour-clock/14839464#14839464)此动画可以以任何频率（任何“平滑度”级别）运行，具体取决于用于调用它的计时器的间隔。

请参阅底部的调用代码：只需将计时器间隔更改为较小的值，例如 0.1 秒。

# eclipse - Hadoop location in Eclipse (Error: null)

> ID：15190903
> 
> 赞同：2
> 
> 时间：2013-03-03T21:08:13.440
> 
> 标签：eclipse, hadoop

I've downloaded hadoop from Yahoo tutorial, started linux VM with hadoop and in eclipse created new DFS location (entered IP of my VM, Map/Reduce master port 9001, DFS port 9000. But in the node I got the error "Error:null."

![enter image description here](../Images/6cde5e47dc81a73131a2ee8aa1a92f66.png)

What I'm doing wrong?

I'm using Eclipse Europe 3.3.1 and Hadoop 0.18.0.

Thanks for helping.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-21T12:40:08.207

您应该检查您能够配置的其他属性。我也遇到了这个问题，但实际问题是 hadoop.job.ugi 属性无法设置。要解决这个问题，请转到“ **\workspace\.metadata\.plugins\org.apache.hadoop.eclipse\locations** ”。在这里打开 XML 文件，只需添加属性“ **hadoop.job.ugi** ”，其值为“ **hadoop-user,ABC** ”，然后重新启动 Eclipse。它对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-27T10:57:55.923

将eclipse安装在hadoop所在的VM中时，我已经正确配置了eclipse。但是由于**新版本的 eclipse 和 eclipse hadoop 插件不兼容，**我拒绝使用它，因为在我看来，使用这个插件没有任何好处。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-03T14:55:51.923

我遇到了同样的问题，我认为这个问题是因为 HDFS 中没有文件夹或文件，我通过以下步骤解决了：

*   hadoop dfs -mkdir /文件夹名称

*   hadoop fs -ls /

# java - 为什么 .equals(null) 不起作用而 == null 起作用？

> ID：15190905
> 
> 赞同：-5
> 
> 时间：2013-03-03T21:08:20.247
> 
> 标签：java, null, nullpointerexception, return, equals

我正在实现二叉树，我遇到了这样的代码

```
if(head.equals(null)) return; 
```

它给了我空指针错误，而如果我以另一种方式做

```
if(head == null) return; 
```

它工作得很好。请告诉我为什么会这样？如果有人已经问过了，我真的很抱歉。我搜索但未找到任何与此描述匹配的问题。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-03T21:09:28.633

因为`equals`是一个方法，所以它需要一个对象被调用。如果`head`是`null`，则没有对象。

# c# - 如何使用线程实时更新 UI

> ID：15190909
> 
> 赞同：-2
> 
> 时间：2013-03-03T21:08:36.800
> 
> 标签：c#, multithreading, logging

我正在开发一个应用程序，它将主动从文件中读取并分析该文件中的信息并将其实时显示到 UI。

我读过的所有内容都告诉我应该使用某种线程来做到这一点。我探索了后台工作人员，还尝试在运行时创建一个单独的线程并使用该线程来更新所有 UI 元素。

当我不能（或不应该）进行跨线程调用时，问题就出现了，因为原始 UI 元素是在不同的线程上创建的。

有没有办法在将要更新它们的线程上创建这些 UI 元素？做这个的最好方式是什么？

编辑：有一个回复这篇文章（现在已经消失了）解释我应该如何做到这一点。使用描述的方法更新我的代码后，这是我使用的更新代码。在我添加文件系统观察程序之前，一切都很好。一旦我添加，我就会收到关于不进行跨线程调用的相同错误。

Session是我创建的一个通过日志文件解析的类

```
private Session s1 = new Session("");
private FileSystemWatcher fsw;
private OpenFileDialog ofd1 = new OpenFileDialog();

private BackgroundWorker bgw;

private bool logActive = false;

public frmMain()
{
    InitializeComponent();
    bgw = new BackgroundWorker();
    bgw.WorkerReportsProgress = true;
    bgw.ProgressChanged += HandleProgressChanged;
    bgw.DoWork += HandleDoWork;

    fsw = new FileSystemWatcher(@"H:\Logs", "*.txt");
    fsw.SynchronizingObject = this;
    fsw.IncludeSubdirectories = false;
    fsw.EnableRaisingEvents = true;
    fsw.NotifyFilter = NotifyFilters.Size;
    fsw.Changed += new FileSystemEventHandler(fsw_OnChanged);
}

private void frmMain_Load(object sender, EventArgs e)
{
    ofd1.Filter = "log files (*.txt)|*.txt|All files (*.*)|*.*";
    ofd1.FilterIndex = 2;
    ofd1.RestoreDirectory = true;
}

private void fsw_OnChanged(object source, System.IO.FileSystemEventArgs e)
{
    bgw.RunWorkerAsync();
}

// this runs on the UI thread
// here's where you update the UI based on the information from the event args
private void HandleProgressChanged(object sender, ProgressChangedEventArgs e)
{
    for (int i = s1.previousLineNumber; i < s1.GetMessageCount(); i++)
    {
        ListViewItem lvi = new ListViewItem((s1.GetMessage(i).date).ToString());
        lvi.SubItems.Add(s1.GetMessage(i).type.ToString());
        lvi.SubItems.Add(s1.GetMessage(i).data);
        listView1.Items.Add(lvi);
    }
}

// this runs on a background thread; you cannot modify UI controls here
private void HandleDoWork(object sender, DoWorkEventArgs e)
{
    s1.ParseLiveFile();
    bgw.ReportProgress(100);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T21:12:51.133

为了更新 UI，您应该使用 Invoke 或 BeginInvoke。

```
void LengthyProcessInThread()
{
   ...
   foreach(var item in file)
   {
       Invoke(delegate() {
          .. Update UI here.
       });
   }
} 
```

Invoke 是控件上的一种方法，例如。包含 UI 的表单。

我祝你好运。

# android - Android在textview中调整九个补丁图像的大小

> ID：15190916
> 
> 赞同：0
> 
> 时间：2013-03-03T21:09:02.040
> 
> 标签：android, screen, nine-patch

我有一个应该围绕文本的 Ninepatch 图像（语音气泡）。当我设置 textview 的背景时，气泡显示为它应该没有指定宽度或高度（它应该调整到文本的内容）。我的问题是，当从磁盘读取完全相同的图像时，图像会调整大小。

我在 stackoverflow 上阅读了很多不同的答案，但没有找到任何真正适合我的解决方案。

xml 文件：

```
<TextView
        android:id="@+id/someText"
        android:layout_marginBottom="20dp"
        android:layout_marginTop="10dp"
        android:layout_marginLeft="5dp"
        android:layout_marginRight="5dp"
        android:textColor="@android:color/background_dark"
        android:singleLine="true"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="This is a a line. "
        /> 
```

我已经尝试调整图像（如here所建议）如下：

```
private Drawable adjustImage(Drawable image){
    if(image == null)
        return null;

    Bitmap bitmapOrg = ((BitmapDrawable) image).getBitmap();
    int width = bitmapOrg.getWidth();
    int height = bitmapOrg.getHeight();

    Matrix matrix = new Matrix();
    Bitmap resizedBitmap = Bitmap.createBitmap(bitmapOrg, 0, 0,
            width, height, matrix, true);
    return new BitmapDrawable(resizedBitmap);
} 
```

还尝试了另一个建议的解决方案：

```
TypedValue typedValue = new TypedValue();
//density none divides by the density, density default keeps the original size
typedValue.density = TypedValue.DENSITY_DEFAULT;
Drawable d = Drawable.createFromResourceStream(null, typedValue, fis, "test");' 
```

但是这两种解决方案都不适合我。有人知道我在这里缺少什么吗？

谢谢。

# iphone - iPhone中的Jquery Mobile闪烁/白屏

> ID：15190917
> 
> 赞同：5
> 
> 时间：2013-03-03T21:09:10.657
> 
> 标签：iphone, jquery-mobile

经过详细搜索和谷歌搜索，我终于决定提出我的问题。

在我的 JQM 网络应用程序中，总共有 4 个页面。其中 2 个是通过 Ajax 动态填充的。我用过

```
$.extend($.mobile, {
        defaultPageTransition: 'none'
    }); 
```

我的动态填充功能是

```
$.get_detail= function(){
  $.ajax({
    url: "mypage.cfm",
    data: data,
    timeout:5000,
    cache:false,
    type:'GET',
    dataType:"html",
    success: function(data3) {
       //$('#filldiv').empty();
       $("#filldiv").html(data3);
    $.mobile.changePage('#detailpage');
    },
    error: function(statusCode, errorThrown)
    {
    if (statusCode.status == 0) 
        alert("you are offline");
        else
        alert("Please try again.");
    }
        });
    } 
```

当我改变页面闪烁白屏就像发生闪烁但是当没有数据填充div时没有闪烁。我注意到，如果屏幕尺寸没有变化，那么一切都很好，如果通过填充动态内容闪烁来改变屏幕尺寸

请帮我解决这个问题。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-20T06:57:14.060

这是我用来禁用默认转换的方法：

```
$(document).on( "mobileinit", function() {
   $.mobile.defaultPageTransition = 'none'; 
}); 
```

最新版本 1.4 也应该有助于更好的过渡。

# django - 当 django 表单在某些时候失败时重新上传文件

> ID：15190923
> 
> 赞同：0
> 
> 时间：2013-03-03T21:09:50.117
> 
> 标签：django, django-forms

我目前正在使用 django 并使用表单来呈现不同字段的表单。面临的问题是我在表单中有文件字段，有时在提交表单并且其他字段返回错误时，文件字段“值”消失，这意味着必须再次重新选择文件..

即使表单返回错误，有没有办法维护文件？我可以查看的任何示例或可以帮助我的任何示例？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T06:47:42.580

见[https://github.com/un1t/django-file-resubmit](https://github.com/un1t/django-file-resubmit)

> 在 Django 项目中，您有带有 FileField、ImageField 的表单。一切都很好，但是当引发 ValidationError 时，您必须再次重新选择所有文件和图像。这有点烦人。django-file-resubmit 解决了这个问题。它适用于 FileField、ImageField 和 sorl.thumbnail.ImageField。

# asp.net-mvc - 如何在 ASP.NET MVC 4 中将 HTML5 表单操作链接到控制器 ActionResult 方法

> ID：15190929
> 
> 赞同：39
> 
> 时间：2013-03-03T21:10:14.177
> 
> 标签：asp.net-mvc, html, asp.net-mvc-4, razor

我有一个基本表单，我想通过调用`ActionResult`视图关联`Controller`类中的方法来处理表单内的按钮。这是表单的以下 HTML5 代码：

```
<h2>Welcome</h2>

<div>

    <h3>Login</h3>

    <form method="post" action= <!-- what goes here --> >
        Username: <input type="text" name="username" /> <br />
        Password: <input type="text" name="password" /> <br />
        <input type="submit" value="Login">
        <input type="submit" value="Create Account"/>
    </form>

</div>

<!-- more code ... --> 
```

对应的`Controller`代码如下：

```
[HttpPost]
public ActionResult MyAction(string input, FormCollection collection)
{
    switch (input)
    {
        case "Login":
            // do some stuff...
            break;
        case "Create Account"
            // do some other stuff...
            break;
    }

    return View();
} 
```

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2013-03-03T21:16:05.837

您使用 HTML Helper 并拥有

```
 @using(Html.BeginForm())
    {
        Username: <input type="text" name="username" /> <br />
        Password: <input type="text" name="password" /> <br />
        <input type="submit" value="Login">
        <input type="submit" value="Create Account"/>
    } 
```

或使用 Url 助手

```
<form method="post" action="@Url.Action("MyAction", "MyController")" > 
```

`Html.BeginForm`有几个 (13) 覆盖，您可以在其中指定更多信息，例如，上传文件时的正常使用是使用：

```
@using(Html.BeginForm("myaction", "mycontroller", FormMethod.Post, new {enctype = "multipart/form-data"}))
{
    < ... >
} 
```

* * *

如果您不指定任何参数，`Html.BeginForm()`则将创建一个**指向您当前控制器和当前操作**`POST`的表单。举个例子，假设你有一个控制器调用和一个动作调用**`Posts``Delete`**

 **```
public ActionResult Delete(int id)
{
   var model = db.GetPostById(id);
   return View(model);
}

[HttpPost]
public ActionResult Delete(int id)
{
    var model = db.GetPostById(id);
    if(model != null) 
        db.DeletePost(id);

    return RedirectToView("Index");
} 
```

您的 html 页面将类似于：

```
<h2>Are you sure you want to delete?</h2>
<p>The Post named <strong>@Model.Title</strong> will be deleted.</p>

@using(Html.BeginForm())
{
    <input type="submit" class="btn btn-danger" value="Delete Post"/>
    <text>or</text>
    @Url.ActionLink("go to list", "Index")
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-13T15:34:49.757

在这里，我基本上是在链接中包装了一个按钮。优点是您可以以相同的形式发布到不同的操作方法。

```
<a href="Controller/ActionMethod">
    <input type="button" value="Click Me" />
</a> 
```

添加参数：

```
<a href="Controller/ActionMethod?userName=ted">
    <input type="button" value="Click Me" />
</a> 
```

从非枚举模型中添加参数：

```
<a href="Controller/ActionMethod?userName=@Model.UserName">
    <input type="button" value="Click Me" />
</a> 
```

您也可以对枚举模型执行相同的操作。您只需要先引用一个实体。快乐编码！**

# python - Python/BeautifulSoup 解析 HTML 分数

> ID：15190930
> 
> 赞同：1
> 
> 时间：2013-03-03T21:10:15.657
> 
> 标签：python, parsing, unicode, beautifulsoup

**问题**

1.  为什么在最后两种情况下的输出都是 unicode，但在一种情况下它显示分数，而在另一种情况下它显示代表分数的其他代码？

2.  我从分数到小数（-1.75）的最干净的方法是什么？

**背景**

我正在使用 并`BeautifulSoup`阅读`Python`一些输出分数。下面是我用来测试这个问题的 python 代码，以及结果输出。在下面的代码中我有`HTML.``HTML`

```
print type(c[0])
print c[0]
print type(c[0].get_text())
print c[0].get_text()
print type(re.split(" ", c[0].get_text())[0])
print re.split(" ", c[0].get_text()) 
```

这输出：

```
<class 'bs4.element.Tag'>
<b>-1¾ -101</b>
<type 'unicode'>
-1¾ -101
<type 'unicode'>
[u'-1\xbe\xa0-101'] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T22:11:13.253

让我们首先解决您问题的简单部分：

打印列表时，`repr`内容的 用于表示列表中的项目。所以自从

```
re.split(" ", c[0].get_text()) 
```

是一个列表， print 语句打印列表中元素的[repr 。](http://docs.python.org/2/library/repr.html#module-repr)`unicode`

```
In [63]: x = u'-1\xbe\xa0-101'

In [64]: print(x)
-1¾ -101

In [65]: repr(x)
Out[65]: "u'-1\\xbe\\xa0-101'" 
```

* * *

现在是有趣的部分：一些 unicode 代码点有名称。例如，

```
In [60]: import unicodedata as ud

In [61]: ud.name(u'\xbe')
Out[61]: 'VULGAR FRACTION THREE QUARTERS' 
```

事实上，我们可以在所有 unicode 字符中搜索名称与模式匹配的字符`'FRACTION (\w+) (\w+)'`：

```
import unicodedata as ud
import re

numerator = {
    'ONE':1,
    'TWO':2,
    'THREE':3,
    'FOUR':4,
    'FIVE':5,
    'SIX':6,
    'SEVEN':7,
    'EIGHT':8,
    'NINE':9,
    'ZERO':0,
    }

denominator = {
    'QUARTER':4,
    'HALF':2,
    'SEVENTH':7,
    'NINTH':9,
    'THIRD':3,
    'FIFTH':5,
    'SIXTH':6,
    'EIGHTH':8,
    'SIXTEENTH':16
    }

fraction = {}
for num in range(0x110000):
    s = unichr(num)
    try:
        name = ud.name(s)
    except ValueError:
        continue
    match = re.search('FRACTION ({n}) ({d})'.format(
        n = '|'.join(numerator.keys()),
        d = '|'.join(denominator.keys()),
        ) , name)
    if match:
        fraction[num] = unicode(
           float(numerator[match.group(1)])/denominator[match.group(2)]).lstrip('0')
print(fraction) 
```

因此，我们现在有一个`dict`命名`fraction`，它将 unicode 代码点映射到`unicode`分数的十进制表示。

```
{8585: u'.0', 43056: u'.25', 43057: u'.5', 43058: u'.75', 43059: u'.0625', 43060: u'.125', 43061: u'.1875', 188: u'.25', 189: u'.5', 190: u'.75', 8528: u'.142857142857', 8529: u'.111111111111', 8531: u'.333333333333', 8532: u'.666666666667', 8533: u'.2', 8534: u'.4', 8535: u'.6', 8536: u'.8', 8537: u'.166666666667', 8538: u'.833333333333', 8539: u'.125', 8540: u'.375', 8541: u'.625', 8542: u'.875', 69245: u'.333333333333', 3443: u'.25', 3444: u'.5', 3445: u'.75', 69243: u'.5', 69244: u'.25', 11517: u'.5', 69246: u'.666666666667'} 
```

现在你可以`u'-1\xbe\xa0-101'`这样翻译：

```
text = u'-1\xbe\xa0-101'
print(text.translate(fraction)) 
```

产量

```
-1.75 -101 
```

* * *

所以简短的回答是：

```
fraction = {8585: u'.0', 43056: u'.25', 43057: u'.5', 43058: u'.75', 43059: u'.0625', 43060: u'.125', 43061: u'.1875', 188: u'.25', 189: u'.5', 190: u'.75', 8528: u'.142857142857', 8529: u'.111111111111', 8531: u'.333333333333', 8532: u'.666666666667', 8533: u'.2', 8534: u'.4', 8535: u'.6', 8536: u'.8', 8537: u'.166666666667', 8538: u'.833333333333', 8539: u'.125', 8540: u'.375', 8541: u'.625', 8542: u'.875', 69245: u'.333333333333', 3443: u'.25', 3444: u'.5', 3445: u'.75', 69243: u'.5', 69244: u'.25', 11517: u'.5', 69246: u'.666666666667'}
text = c[0].get_text()
text = text.translate(fraction)
parts = map(float, text.split())
print(parts) 
```

产量

```
[-1.75, -101.0] 
```

请注意，将来可能会为更多的分数分配 unicode 代码点。`'FRACTION ({n}) ({d})'`也有可能 unicode 代码点的名称与我用来生成`fraction`dict的模式不匹配。所以我的解决方案有些脆弱，将来可能需要更新。

# android - 如何使用 WebView 在 HTML 中使用本地字体

> ID：15190933
> 
> 赞同：-1
> 
> 时间：2013-03-03T21:10:25.373
> 
> 标签：android, html

我的字体在资产文件夹中。我正在使用 WebView 来显示一些 HTML。我想在其中使用带有“face”属性的标签，我需要的是使用本地字体。我知道这可以通过 CSS 样式和寻址字体文件来完成，如下所示：

```
file:///android_asset/fonts/fontname.otf 
```

但是使用 html 标签，它似乎不起作用：

```
<font face="file:///android_asset/fonts/fontname.otf">A Simple Text</font> 
```

可能我们只是可以使用一些预定义的字体！没有 CSS 怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T06:48:22.803

似乎我们不能在 html 字体标签中使用自定义字体！

# ios - 我应该使用哪个压缩库在 Objective-C 中正确组装有效的 XLSX 文件？

> ID：15190939
> 
> 赞同：6
> 
> 时间：2013-03-03T21:10:51.133
> 
> 标签：ios, objective-c, xml, zip, xlsx

我正在尝试使用 Objective-C 以编程方式修改 XLSX 文件。

到目前为止，我只修改其中一张纸上的数据。我正在采取的步骤如下：

*   将 XLSX 文件复制到 Documents 文件夹
*   在保持目录结构的情况下解压 XLSX 容器
*   解析相应的工作表 XML 文件（在我的例子中是 sheet2.xml）
*   添加一些行
*   重写 XML 结构并保存
*   将更新的 XML 文件放回 XLSX 容器中

但是，新的 XLSX 文件会损坏。我使用[GDataXML](https://code.google.com/p/gdata-objectivec-client)进行 XML 解析/写入，使用[Objective-Zip](https://github.com/flyingdolphinstudio/Objective-Zip)进行压缩/解压缩。

我知道我创建的 XML 文件是正确的，因为当我手动解压缩并重新压缩损坏的 XLSX 文件时，它打开时没有任何错误。我在 OS X（使用 Unarchiver）和 Windows（使用 7-Zip）上都做过这个。

问题要么在于 Objective-Zip 库，要么在于我使用它的方式。下面是我如何实现压缩方法：

```
ZipFile *zipFile = [[ZipFile alloc] initWithFileName:XLSXDocumentsFilePath mode:ZipFileModeAppend];
ZipWriteStream *stream= [zipFile writeFileInZipWithName:XLSX_WORKSHEET_XML_SUBPATH compressionLevel:ZipCompressionLevelNone];
[stream writeData:data];
[stream finishedWriting];
[zipFile close]; 
```

我还尝试了其他可用的*compressionLevel参数，但没有成功：*

```
ZipCompressionLevelDefault
ZipCompressionLevelBest
ZipCompressionLevelFastest 
```

我的问题是：

*   我应该使用哪个压缩库以编程方式创建有效的 XLSX 文件？
*   如果 Objective-Zip 合适，我的代码有什么问题？

从另一个问题的[答案](https://stackoverflow.com/a/6167493/1576979)中，我发现：“OOXML 格式规定包中允许的唯一压缩方法是 DEFLATE”。

是否可以强制 Objective-Zip 使用 DEFLATE？或者是否有使用 DEFLATE 的开源 iOS 压缩库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T22:09:42.867

[我在做一些研究并与 Objective-Zip 的开发者flydolphinstudio](https://github.com/flyingdolphinstudio/)进行了一对一的通信后找到了答案。

首先，Objective-Zip 使用 DEFLATE 作为默认压缩方法。我还与开发人员确认了这一点，他告诉我使用`ZipCompressionLevelDefault`,`ZipCompressionLevelFastest`或`ZipCompressionLevelBest`作为参数`compressionLevel:`将保证 DEFLATE 压缩。

所以，问题出在`mode:`论点上，就`ZipFileModeAppend`我而言。MiniZip 似乎没有删除 zip 文件中文件的方法，这就是为什么我没有覆盖现有文件，而是添加一个新文件的原因。为了更清楚，看看我的`xl/worksheets`文件夹在使用 Objective-Zip 压缩后的样子： ![工作表文件夹](../Images/6128f76114cd38973f3fb6339dda5338.png)

因此，创建有效 XLSX 容器的唯一方法是从头开始创建 zip 文件，方法是添加所有文件并保持目录/文件结构完整。

我希望这段经历能帮助一些人。

# encryption - 使用密码加密私钥

> ID：15190942
> 
> 赞同：0
> 
> 时间：2013-03-03T21:10:55.173
> 
> 标签：encryption, openssl, rsa, private-key, passphrase

我正在开发一个需要在服务器上存储 RSA 私钥的系统。

我打算使用 OpenSSL 生成私钥并对其应用密码，以便在服务器上对私钥进行加密。

谁能告诉我 OpenSSL 使用什么过程来加密私钥？换句话说，它如何使用密码生成私钥的加密版本？

我相信 TripleDES 在这里以某种方式用于对称加密私钥。密码中是否添加了盐，或者可以以某种方式添加盐以使其更安全？

您可以提供的任何建议将不胜感激。

# javascript - 在 JavaScript 中嵌套剃刀 C#

> ID：15190943
> 
> 赞同：1
> 
> 时间：2013-03-03T21:10:56.637
> 
> 标签：javascript, razor, asp.net-webpages

我在 JavaScript 中嵌套 razor C#，我在一个按钮内调用这个函数，但是当我按下按钮时没有任何反应。我究竟做错了什么？

```
<script>
    @functions{
        public void Validation()
        {
            StudentTable sTable = new StudentTable();
            var username = Request["username"];
            var password = Request["password"];
            var error = "";
        if(sTable.Login(username, password) != null)
        {
            Response.Redirect("Success.html");
        } 
        else
        {
            error = "Username/password entered is incorrect";
        }
</script>
}
}
<p>@error</p>
<button class="btn btn-default btn-primary" id="signin" type="submit" value="Signin" onclick="@functions" formmethod="post">Sign in</button> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T21:33:09.270

您正在混合和匹配 javascript（在客户端上运行）和 C#（在服务器上运行）。您必须发出 ajax 请求来执行此验证或在回发时执行此操作。

# mercurial - 在保留文件的同时在 hg 中切换分支

> ID：15190945
> 
> 赞同：0
> 
> 时间：2013-03-03T21:11:08.983
> 
> 标签：mercurial, branch

在开发我的软件时，我创建了一组测试用例，这些测试用例可以通过`make tests`. 为了使事情井井有条，我将它们放在子目录中`tests`。为了保持我的提交井井有条并且不使我的开发分支混乱，我创建了一个额外的分支来`tests`提交测试单元。

我的问题是：当我将单元提交到测试分支并切换回开发时，所述测试被删除

```
D:\Project>hg branch test
D:\Project>edit...
D:\Project>hg add
D:\Project>hg commit
D:\Project>hg up dev
2 files updated, 0 files merged, 3 files removed, 0 files unresolved 
```

我怎样才能保存这些文件？（我尝试了[Mercurial 的解决方案：将工作目录切换到分支而不丢失更改？](https://stackoverflow.com/questions/7729122)但它仍然会删除文件）

**编辑**见下面我自己的答案

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T00:50:26.100

这些测试文件在您的开发分支中不存在，因此当您签出开发分支时，它们不会在工作目录中。像 Mercurial 和 git 这样的 DVCS 不允许您在一个修订版/分支上签出一个目录，而在另一个修订版/分支上签出另一个目录。

您链接的答案是将更改的文件及其文件带到另一个分支，它们不是您要的。

所以你想做的方式（单独的分支）是行不通的，但是还有很多其他/更好的选择

一种选择是让您的测试成为由 mq（[Mercurial Queues](https://www.mercurial-scm.org/wiki/MqExtension)）存储库管理的补丁，该存储库本身可以进行版本控制。然后，当您在您的开发分支中并想要运行您要做的测试时：

```
hg qpush # tests show up
... run tests, edit tests ..
hg qrefresh  # save the changes you made to the test
hg qpop  # tests vanish again 
```

MQ 功能强大，但有时有点难以理解。

另一种选择是使您的测试成为父存储库，而您的实际代码成为该父存储库的子存储库。您的磁盘布局如下所示：

```
parent/
   tests/
   existingrepo/   # <-- the repo you already have w/o tests 
```

然后人们可以克隆，你可以推送现有的 repo 没有测试，但外部 repo 将包含一个指向它的指针，并且两者将同步进行版本控制。同样，有点棘手，但有一些不错的结果。

第三个选项，我的偏好是克服“保持我的提交井井有条，而不是让我的开发分支混乱”的心态。测试与主要代码一样重要，它们应该使用代码进行版本控制，它们不会使任何东西变得混乱，它们提供了有价值的工具来帮助理解代码在做什么。在方便时，您可以随时使用`hg log --exclude tests/`查看排除它们的历史记录。

要冒险，只需执行以下操作：

```
hg update development
hg merge tests 
```

你可以走了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T03:53:18.360

> 当我将单元提交到测试分支并切换回开发时，所述测试被删除

这是预期和正确的结果：分支存储不同的开发线，你的`add`东西**只**在测试分支中，在合并之前，这个数据将只存在于创建时的分支中

为了“保持我的提交井井有条，而不是让我的开发分支混乱......”，但在开发分支中进行测试，您至少可以使用两种方法：

*   定期合并`tests`分支到`development`（测试中的所有更改都将出现在开发中），但仅将日志用于开发分支中的更改集，可能**没有来自测试**的合并集。它很简单 revset，您甚至可以将带有 revset 的日志命令写入别名，并在需要时使用别名命令
*   正如 Ry4an 所提到的，您可以使用 subrepo|guestrepo 技术执行存储库分离而不是分支分离 - 如果测试存储在主存储库的子目录中，则将 /tests 转换为嵌套存储库 -> 子存储库并有两个独立但链接的存储库（未来阅读：[Mercurial](https://www.mercurial-scm.org/wiki/Subrepository) wiki 中的子存储库和[Mercurial](http://mercurial.aragost.com/kick-start/en/subrepositories/) Kick Start 练习中的子存储库）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T11:42:18.010

为了实现我想要的，我最终为 repo 创建了一个子目录：

```
project/
  main.cpp
  makefile
  .repo/
    .hg/ 
```

并创建了一个新`make`目标：

```
REPO := .repo

init: $(REPO) $(REPO)/.hg

$(REPO):
    mkdir -p $(REPO)

$(REPO)/.hg:
    hg init $(REPO)

commit : | $(REPO) $(REPO)/.hg
ifdef BRANCH
    hg -R $(REPO) update -C $(BRANCH)
endif
    find . -regex "^\./[^.].*" -exec cp --parents {} ./$(REPO) \;
# the regex prevents "hidden" dot-folder from copying
# one could use --link to save time and drive usage/space
# but i am concerned about hg auto merging and overriding (per hardlink)
# my actual changes
    hg -R $(REPO) commit $(EXTRA) 
```

所以我可以发布`make commit BRANCH=tests`提交到任意分支而不会丢失与分支无关的所有更改。`hg add`as`wipe .repo`的实现`copy file there` `hg -R .repo add $(filename)`留给读者作为练习器

# javascript - 将全局对象保存到全局数组，更改对象中的值并再次保存

> ID：15190946
> 
> 赞同：1
> 
> 时间：2013-03-03T21:11:32.597
> 
> 标签：javascript

通过使用键和值将时间和键数据写入全局对象并将此对象推送到全局数组，尝试捕获 keyup 和 keydown 之间以及 keyup 和下一次击键之间的 keydown 时间。全局变量的原因是我不知道如何在绑定到 keydown、keypress 和 keyup 事件的函数之间传递参数。每个事件驱动函数都有我想作为键值对保存在一个对象中的数据，例如键码和键入的字符。每个对象代表一个键击，但也包含或用于计算前一个键击的一些信息。

到最后，全局数组的每个元素中的数据似乎要么未定义，要么是最后输入的数据。

我的问题是为什么？

我通过消除全局对象（键值）并将其替换为随每次击键而变化的全局变量来解决该问题。然后我能够在函数（函数范围）中创建一个对象，并使用每个新字符将该对象推送到全局数组中。它似乎工作。本能地感觉它应该是相反的方式。我只是想了解它为什么会这样工作。我已经读完了 Zakas 的书的三分之一，还有很多东西要学。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T21:17:05.077

您将变量视为容纳对象的盒子。当你这样做时，比如说`a = b`，然后将其中的任何`b`内容复制到`a`. 这不是 JavaScript 的工作方式。

相反，JavaScript 通过在某处拥有一个对象来工作，并且变量*指向*该对象。然后，当你这样做时`a = b`，现在指向与;`a`相同的对象 `b`当一个属性`b`被修改时，相同的属性也`a`被修改，因为它们指向的对象是相同的。

如果你想`a = b`复制，你必须明确地这样做。例如，如果你有属性`foo`和`bar`，你可以这样做：

```
a = {
    foo: b.foo,
    bar: b.bar
}; 
```

但是，这只会向下复制一个级别，因此如果`b.foo`也是一个对象，那么`a.foo`将引用与 相同的对象`b.foo`，并且再次修改 的任何属性`a.foo`将使相同的更改出现在 上`b.foo`，依此类推。

# java - Random.nextInt() 产生的数字序列何时重复

> ID：15190948
> 
> 赞同：2
> 
> 时间：2013-03-03T21:11:37.903
> 
> 标签：java, random

有谁知道Java是否`Random.nextInt()`会在某个时间后重演？

具体来说，是否有这样一个数字`n`使得以下两个列表相等？

```
List<Integer> a = new LinkedList<>();
List<Integer> b = new LinkedList<>();

for (int i = 0; i < n; ++i)
   a.add(randObject.nextInt());

for (int i = n; i <= n * 2 ; ++i)
   b.add(randObject.nextInt()); 
```

是否保证每个随机对象都有一个句点？（注：不同种子的对象不必具有相同的周期）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T21:15:12.960

> 有谁知道 Java 的 Random.nextInt() 是否会在一段时间后重复出现？

是的，它会的。由于生成器具有有限数量的状态，因此生成的序列具有有限周期。

> 具体来说，使以下两个列表相等的数 n 是多少？

这没有指定，取决于 Java 实现。

> 是否保证每个 Random 对象总是有这样的 n ，不管它的种子是什么？

期限是有限的。但是，不一定每个种子都相同。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-03T21:15:07.943

如果你*真的真的很*幸运，是的。否则没有。

但是从*javadoc*

> nextInt 的一般约定是伪随机生成并返回一个 int 值。所有 2^32 个可能的 int 值都是以（大约）相等的概率产生的。

# android - 是否可以在可扩展列表适配器中使用分离列表适配器？

> ID：15190949
> 
> 赞同：0
> 
> 时间：2013-03-03T21:11:40.527
> 
> 标签：android, expandablelistadapter

我想要一个像[这样](http://jsharkey.org/blog/2008/08/18/separating-lists-with-headers-in-android-09/)由 Jeff Sharkey INSIDE Expandablelistadapter 编写的独立列表适配器。这可能吗？适配器内的适配器？我已经有了我的可扩展列表适配器（使用 BaseExpandableListAdapter），但我不知道在哪里放置 Jeff Sharkey 的代码以使其工作..有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T01:41:02.933

您不能这样做，因为您不能将可滚动视图（Jeff 的自定义视图本质上是一个 ListView）放入另一个可滚动视图（ExpandableListView）。原因是父母会消耗所有的触摸事件，他们永远不会到达孩子。ExpandableListView 会滚动，但分离列表适配器永远不会知道发生了滚动。

看看[这个问题](https://stackoverflow.com/questions/6210895/listview-inside-scrollview-is-not-scrolling-on-android)的答案，它有一些更详细的解释。

# android - Android 应用内计费。有没有能力将钱转回给用户？

> ID：15190952
> 
> 赞同：0
> 
> 时间：2013-03-03T21:11:55.423
> 
> 标签：android, in-app-purchase, payment

我想制作用户可以出售和收回资金的内部虚拟硬币。有没有能力实现这样的事情？

是否可以使用 PayPal 进行制作？

# xcode - 函数名称未出现在 xcode 4.3.3 面包屑下拉菜单中

> ID：15190961
> 
> 赞同：-1
> 
> 时间：2013-03-03T21:12:55.063
> 
> 标签：xcode, xcode4.3

我在许多 .m 文件中有几十个函数，这些函数适当地显示在 xcode 面包屑栏上的下拉菜单中。但是，昨晚，我在代码中添加了一个新函数，但它绝对不会出现在下拉列表中。出现之前的功能。出现后的功能。Pragma 标记出现之前和之后。我已经多次重新启动 Xcode。在 .h 中定义函数后，Xcode 会自动填充 .m 中的函数名。函数中的代码工作正常。它只是不会出现在面包屑下拉菜单中。

我现在通过在函数开始之前添加一个编译指示标记来解决它。但是，有没有人对为什么它没有显示在下拉列表中以及可以做些什么有任何建议？

Spr.h

```
-(void) wCheck:(NSMutableArray *)CO lat:(double)target_lat long:(double)target_long; 
```

弹簧

```
 #pragma mark wCheck <-- this works
 -(void) wCheck:(NSMutableArray *)CO lat:(double)target_lat long:(double)target_long
 {
      //the code in here works fine.
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T21:56:13.653

尝试强制重新索引您的项目。打开 Organizer -> Projects，选择你的项目，删除它的派生数据，重启 Xcode，等待它完成索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T07:01:56.100

重新索引没有帮助。我只是坚持在函数名称之前添加#pragma 标记的解决方法。

# sql-server - 使用 T-SQL 查找合规性百分比

> ID：15190963
> 
> 赞同：2
> 
> 时间：2013-03-03T21:13:11.567
> 
> 标签：sql-server, sql-server-2008, tsql, reporting-services, reportingservices-2005

我不是 T-SQL 方面的专家，所以在这里我试图找到医务人员主管对流感疫苗、结核病测试和呼吸器测试的依从性百分比。每个员工都有一个与其员工信息相关联的主管姓名。下面的代码工作正常，它为我提供了上述测试的 %。问题是我想通过主管获取 ID、姓名和部门以及 % 合规性。

预期的输出是这样的：

```
Supervisor        ID      NAME     Dept      %Flu     %TB    %FIT
Elaine Jong                                   98%    100%     52%
                001       MARY   SURGERY    
                002       SUSAN  SURGERY
James Ande                                   100%     98%     78%
                267       JIM    INPATIENT
                789       SAM    INPATIENT

Current OUTPUT
                 %Flu     %TB    %FIT
Elaine Jong      98%    100%     52%
James Ande      100%     98%     78% 
```

和查询：

```
SELECT E.FLDSUPRNAME AS Supervisor,

1.0*SUM(
     CASE WHEN I.FLDDATE IS NULL 
          THEN 0 ELSE 1 
     END)/SUM(1)    AS Percent_Flu_Compliant,

1.0*SUM(
    CASE WHEN F.FLDDATE IS NULL OR (F.FLDDATE+365) < GETDATE() 
         THEN 0 ELSE 1  
     END) / SUM(1)  
AS Percent_Fit_Compliant,

1.0*SUM(
    CASE WHEN PPDx.FLDDATEDUE IS NULL 
              AND TBSSx.FLDDATEDUE IS NULL
              AND CDUEx.FLDDATEDUE IS NULL 
        THEN 1 ELSE 0 
    END) /SUM(1)   AS Percent_TB_Compliant

FROM   EMPLOYEE E

LEFT OUTER JOIN DEPT D
ON D.FLDCODE= E.FLDDEPT

LEFT OUTER JOIN IMMUNE I ON I.FLDEMPLOYEE = E.FLDREC_NUM AND I.FLDTYPE IN ('109', '111')  
AND I.FLDDATE = ( SELECT MAX(FLDDATE) FROM IMMUNE I2 WHERE E.FLDREC_NUM = I2.FLDEMPLOYEE 
AND I2.FLDTYPE IN ('109','111') ) AND I.FLDDATE >= @Flu_Date AND I.FLDDATE <= GETDATE()

LEFT OUTER JOIN FITTEST F ON E.FLDREC_NUM = F.FLDEMPLOYEE
AND F.FLDDATE = (SELECT MAX(FLDDATE) FROM FITTEST F2 WHERE E.FLDREC_NUM = F2.FLDEMPLOYEE) 

LEFT OUTER JOIN  REQEXAM PPDx
ON PPDx.FLDEMPLOYEE = E.FLDREC_NUM
AND PPDx.FLDPHYSICAL = '110' AND
PPDx.FLDDATEDUE <= getdate()

LEFT OUTER JOIN  REQEXAM PPDL
ON PPDL.FLDEMPLOYEE = E.FLDREC_NUM
AND PPDL.FLDPHYSICAL = '110' 

LEFT OUTER JOIN  REQEXAM TBSSx
ON TBSSx.FLDEMPLOYEE = E.FLDREC_NUM
AND TBSSx.FLDPHYSICAL = 'TBSS' AND
TBSSx.FLDDATEDUE <= getdate()

LEFT OUTER JOIN  REQEXAM TBSSL
ON TBSSL.FLDEMPLOYEE = E.FLDREC_NUM
AND TBSSL.FLDPHYSICAL = 'TBSS'

LEFT OUTER JOIN  REQEXAM CDUEx
ON CDUEx.FLDEMPLOYEE = E.FLDREC_NUM
AND CDUEx.FLDPHYSICAL = '109' AND
CDUEx.FLDDATEDUE <= getdate()

LEFT OUTER JOIN EMP S
ON S.FLDREC_NUM = E.FLDREC_NUM

WHERE  E.FLDCOMP = @company
   AND E.FLDSTATUS = 'A'
   AND E.FLDSUPRNAME <> ' '
   AND E.FLDID <> ' ' 

GROUP BY E.FLDSUPRNAME

ORDER BY    E.FLDSUPRNAME 
```

* * *

如果我在 select 和 group by 上添加 ID、NAME 和 Dept，SUM(1) 将变为 1 或 0，所以我得到所有主管的 100% 或 0%。

对此的任何帮助都非常感谢。谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T00:45:17.990

使用 UNION，将空白列添加到您的第一个查询并通过以下方式删除订单：

```
SELECT (CASE WHEN ID IS NULL THEN Supervisor ELSE '' END) ,ID, name,dept,Percent_Flu_Compliant,Percent_TB_Compliant,Percent_Fit_Compliant FROM
(
SELECT E.FLDSUPRNAME AS Supervisor, NULL as ID, NULL as    name, NULL as dept
(...)
GROUP BY hiddensupervisor, Supervisor, ID, name, dept
UNION ALL
SELECT E.FLDSUPRNAME  Supervisor, E.id, E.name, E.dept,    NULL as Percent_Flu_Compliant, NULL as Percent_TB_Compliant, NULL asPercent_Fit_Compliant
FROM Employee
) as q
ORDER BY supervisor, (CASE WHEN ID IS NULL THEN 1 ELSE 0 END),ID 
```

~~我们添加了隐藏的主管列，以便能够将员工置于其主管之下，但将该字段留空（我们也无法在外部查询中添加它和用例，不知道哪个更快）。~~显然我们必须尝试案例

# php - 通过键值将一个数组拆分为两个相同的数组

> ID：15190973
> 
> 赞同：1
> 
> 时间：2013-03-03T21:14:03.223
> 
> 标签：php, arrays

我有一个看起来像这样的数组：

```
MyArray (
    [0] => Array (
                            [board_id] => 1047999
                            [added_date] => 2013-02-28 11:14:02
                            [type] => 4
                           )
    [1] => Array (
                           [board_id] => 1047999
                           [added_date] => 2013-02-28 11:14:02
                           [type] => 1
                          )
    [2] => Array (
                          [board_id] => 1047999
                          [added_date] => 2013-02-28 11:14:02
                          [type] => 4
                          )
    [3] => Array (
                          [board_id] => 1047999
                          [added_date] => 2013-02-28 11:14:02
                          [type] => 1
                          )
) 
```

如何拆分此数组`type`并保持完全相同的数组结构？即我将有两个子数组的 MyArrayT4 和两个子数组的 MyArrayT1？

蒂亚！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T21:16:32.953

像这样使用 array_filter 编辑使用 array_values 重置

```
$filtering = function($type) use($your_array) {
    $filtered = array_filter($your_array, function($r) use($type) {
        return $r['type'] == $type;
    });

    return array_values($filtered);
};

$array_1 = $filtering->__invoke('4');
$array_2 = $filtering->__invoke('1'); 
```

# asp.net - 不会显示下拉

> ID：15190975
> 
> 赞同：0
> 
> 时间：2013-03-03T21:14:25.577
> 
> 标签：asp.net, drop-down-menu

```
 <form>
<asp:Repeater id="rptComments" runat="server">
    <HeaderTemplate>
        <table class="detailstable FadeOutOnEdit">
            <tr>   
                <th style="width:200px;">Answers</th> 
            </tr>
    </HeaderTemplate>
    <ItemTemplate>
        <tr>
            <th style="width:200px;"><asp:DropDownList ID="dropDownForChecklistAnswers" runat="server" /></th>
        </tr>
    </ItemTemplate>
    <FooterTemplate>
        </table>
        <asp:Button id="button" text="Submit" OnClick="Page_Load" runat="server" />
    </FooterTemplate>
</asp:Repeater>
</form> 
```

代码背后：

```
 List<Checklist_Record_Choice> CLRC =
            (from choice in db.Checklist_Record_Choices
             select choice).ToList();

        dropDownForChecklistAnswers.DataSource = CLRC;

        DropDownList1.DataTextField = Text;//Text being the name of column2 in the table (which contains yes, no, n/a)

        dropDownForChecklistAnswers.DataBind(); 
```

错误：dropDownForChecklistAnswers 在当前上下文中不存在？？？请指教

* * *

编辑; 谢谢您的回复。我有

```
public void OnReptDataBound(object sender, RepeaterItemEventArgs e)
{
    ClarkeDBDataContext db1 = new ClarkeDBDataContext();
    List<string> CLRC =
    (from choice in db1.Checklist_Record_Choices
     select choice.Text).ToList();

    DropDownList ddl = (DropDownList)e.Item.FindControl("dropDownForChecklistAnswers");
    ddl.DataSource = CLRC;
} 
```

但是 DropDownList ddl 又回来了，因为对象引用未设置为对象的实例......为什么它是空的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T21:27:16.387

您需要使用[FindControl](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeater.findcontrol.aspx)访问作为中继器模板一部分的控件。

订阅`OnItemDataBound`Repeater的（设置属性`OnItemDataBound="OnReptDataBound"`）

然后在你后面的代码中执行以下操作

```
void OnReptDataBound(object sender, RepeaterItemEventArgs e)
{
   if(e.Item.ItemType == ListItemType.Item) 
   {
     DropDownList ddl = (DropDownList )e.Item.FindControl("dropDownForChecklistAnswers");
     ddl.DataSource = .... 
```

# c++ - c++: 字符串流

> ID：15190979
> 
> 赞同：2
> 
> 时间：2013-03-03T21:14:41.017
> 
> 标签：c++, parsing, cin, istream

我正在使用 c++ 创建一个简单的命令解析器，并且我正在尝试使用 istream >> 检查我输入的是数字还是字符。

输入：

```
a = 10
b = a 
```

解析器.cpp：

```
string inputLine, varLeft, equal, varRight;
double varValue
// please see update below
while(getline(cin, inputLine)){
    istringstream stringSplitter(inputLine);
    stringSplitter >> varLeft >> equal;

    if(!(stringSplitter >> varValue)){
        stringSplitter >> varRight;
    }
} 
```

目标是，稍后在代码中，如果 varRight 为空，我假设输入行是`double`文字，否则，它是表示变量的字符串。我知道可能存在与以数字开头的混合输入相关的逻辑错误，但我假设现在所有输入的格式都正确。为什么`a`第二行输入中的 被丢弃？你建议什么修复？

**更新**

问题不在于 while 循环语句，而在于 while 代码块末尾的 if 语句。

在实际代码中，循环实际上并不是一个while循环；我正在使用一个包含字符串命令的向量对象，并使用 for 循环遍历它们，该循环使用迭代器遍历向量。但是，为了取悦评论者，我在上面修复了它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T21:18:13.867

如果输入函数失败，则在您清除失败状态之前，流将不再允许提取。`varValue`在检查输入失败后，您需要这样做[`std::basic_ios::clear`](http://en.cppreference.com/w/cpp/io/basic_ios/clear)：

```
if(!(stringSplitter >> varValue)){
  stringSplitter.clear();
  stringSplitter >> varRight;
} 
```

我不知道您目前`/* not end of input */`的情况如何（希望您没有检查`eof()`！），但建议您这样做：

```
while (getline(cin, inputLine)) {
  // ...
} 
```

这会在进入循环之前检查线路输入是否成功。

# android - Android 应用内计费 - 在加拿大可用吗？

> ID：15190980
> 
> 赞同：0
> 
> 时间：2013-03-03T21:14:44.473
> 
> 标签：android, android-pay

每次我尝试在 Play 商店中启用它时，什么都没有发生，页面只是重新加载。我曾尝试添加商家帐户，但只有英国和美国可供选择。我很确定我读到加拿大可以有应用内计费，那么我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T21:17:57.767

您的 Google 帐户可能已与英国/美国国家/地区相关联。

如果您想要一个加拿大帐户，您需要创建一个新帐户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-25T20:53:45.993

对于问题的原因，我同意@Hartok。至于它在加拿大有售，当然是！

# ruby - 如何编写一个 ruby 模块以允许类定义中的方法

> ID：15190981
> 
> 赞同：-1
> 
> 时间：2013-03-03T21:14:48.037
> 
> 标签：ruby

很难弄清楚这一点。假设我想编写一个模块，并且当包含它时，它将允许类通过调用带有符号的方法来定义方法

```
class Anything
  include Foo

  initializers :hello, :goodbye
end

module Foo

  # What goes in here? Its not 
  # def self.initializers(*symbols)

end 
```

相同的语法思想`attr_accessible`。尝试在 Rails 源代码中找到它，但是，好吧..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T21:43:22.587

```
module Foo

  def self.included(base)
    base.extend ClassMethods
  end

  module ClassMethods
    def initializers *names
      names.each do |name|
        define_method name do
          'ok'
        end
      end
    end
  end

  def self.included(base)
    base.extend ClassMethods
  end
end

class Anything
  include Foo

  initializers :hello, :goodbye
end

puts Anything.new.hello #=> ok 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T21:47:54.987

例如：

```
module Foo

  def self.included(base) 
    block = Proc.new  do |*symbols|
      puts symbols.inspect
    end
    base.class.send(:define_method, :initializers, block)  
  end

end

class Anything
  include Foo

  initializers :one, :two , :three

end 
```

# javascript - 从一个javascript函数调用另一个返回false的javascript函数；？

> ID：15190987
> 
> 赞同：1
> 
> 时间：2013-03-03T21:15:27.157
> 
> 标签：javascript, asp.net, function, return

我有这个简单的 javascript 函数，它调用其他 2 个函数：

```
<script type="text/javascript" language="javascript">

    function mainfunction() {
        function1()
        function2()
    }

    function function1() {
        if (//some test) {
            alert('test function1');
            return false;
        }
    }

   function function2() {
        if (//some test) {
            alert('test function2');
            return false;
        }
    }

</script> 
```

我`mainfunction()`这样称呼：

```
<form id="form1" runat="server" onSubmit="return mainfunction()"> 
```

或像这样：

```
<asp:Button ID="btntest" runat="server" Text="test button" OnClientClick="return mainfunction()" /> 
```

`btntest`是一个按钮，它只调用一些重定向到另一个页面的类。

## 问题

*   如果我直接调用这两个函数中的任何一个，`function1()`否则`function2()`按钮将不会被执行，这就是我想要的。但是...：
    当我打电话时`mainfunction()`，每个功能中的警报都有效，但`return false;`似乎不起作用，因为不幸的是按钮被执行了。

这是为什么？我怎样才能调用这两个函数并让它们`return false;`工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T21:18:26.117

你`mainfunction`没有返回任何东西。试试这个：

```
function mainfunction() {
    return function1() && function2();
} 
```

如评论中所述，要让您`mainfunction`正常工作，您必须更改其他功能以始终返回`true`or `false`：

```
function function1() {
    if (//some test) {
        alert('test function1');
        return false;
    }
    return true;
} 
```

**编辑** 一个有趣的技巧，让两个函数都被执行，并且`true`只有在两个函数都执行时才返回`true`：

```
function mainfunction() {
    return (function1() + function2()) === 2;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T21:17:22.747

`mainfunction`不返回任何东西，您没有使用来自任何一个`function1`或的返回值`function2`

为了防止表单提交，您需要处理程序本身返回 false，例如：

```
function mainfunction() {
    function1();
    function2();

    return false; // prevent form submission
} 
```

返回未定义（您现在在问题示例中所做的事情）是不够的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T21:31:02.143

试试这个：

```
<asp:Button ID="btntest" runat="server" Text="test button" OnClientClick="mainfunction(); return false;" /> 
```

这也将起作用：

```
<asp:Button ID="btntest" runat="server" Text="test button" OnClientClick="return mainfunction();" /> 
```

但您需要更改 mainfunction：

```
function mainfunction() {
    function1();
    function2();
    return false;
} 
```

# ruby-on-rails - 使用 SimpleForm 为每个选择选项添加一个类

> ID：15190988
> 
> 赞同：4
> 
> 时间：2013-03-03T21:15:31.837
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms, select, simple-form

我想`select`使用 SimpleForm 从数组（而不是模型集合）构建输入，并且每个`option`s 都有不同的类。

我希望这会起作用：

```
f.input :method, collection: [
    ["option text", "option_value_1", { class: "class_name_1" }],
    ["option text 2", "option_value_2", { class: "class_name_2" }]
] 
```

问题是它会产生：

```
<select>
    <option value="option text" class="class_name_1">option text</option>
    <option value="option text 2" class="class_name_2">option text 2</option>
</select> 
```

我怎样才能用简单的形式做我想要的（值应该是“选项值”）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-03T21:31:26.597

这似乎是使用集合时的限制，请参阅 SimpleForm 的作者在[此处](https://github.com/plataformatec/simple_form/issues/385)的解释。他推荐了一种解决方法：

```
f.input :method, :as => :select do
  f.select :method, [['option text', 'option_value_1', {"class" => "class_name_1"}], ['option text 2', 'option_value_2', {"class" => "class_name_2"}]]
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-08T13:18:42.100

您还可以将数组数组作为参数传递

```
= f.input :status, collection: [['option text', 'option_value_1', {"class" => "class_name_1"}], ['option text 2', 'option_value_2', {"class" => "class_name_2"}]] 
```

# c# - 同一张表的多对多关系

> ID：15190996
> 
> 赞同：1
> 
> 时间：2013-03-03T21:16:27.843
> 
> 标签：c#, xamarin.android, coolstorage

我正在尝试在同一个表中添加类别之间的关系。我有一个

> 类别（ID 整数主键自动增量，名称文本）

表和

> CATEGORIES_CATEGORIES (ID INTEGER PRIMARY KEY AUTOINCREMENT, CATEGORIES_ID INTEGER NOT NULL, SUBCATEGORIES_ID INTEGER NOT NULL)

桌子。

我正在尝试将它们与 Vici Coolstorage ORM 映射在一起。我已经上课了

**类别类**

```
[MapTo("CATEGORIES")]
    public abstract class Category : CSObject<Category>
    {
        public abstract int Id { get; }
        public abstract string Name { get; set; }

        [ManyToMany("CATEGORIES_CATEGORIES", Pure = true)]
        public abstract CSList<CategoryCategory> Subcategories { get; set; }
    } 
```

**CategoryCategory 类**

```
[MapTo("CATEGORIES_CATEGORIES")]
    public abstract class CategoryCategory : CSObject<CategoryCategory>
    {
        public abstract int Id { get; }

        [ManyToOne(LocalKey = "CATEGORIES_ID", ForeignKey = "ID")]
        public abstract Category Cat { get; set; }
        [ManyToOne(LocalKey = "SUBCATEGORIES_ID", ForeignKey = "ID")]
        public abstract Category SubCat { get; set; }
    } 
```

但我不能让它工作。任何人都可以帮助我让这种关系发挥作用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T21:48:09.313

您的映射表不应该是多对多关系的目标。

尝试这样的事情：

```
[ManyToMany("CATEGORIES_CATEGORIES", 
            LocalKey="ID", ForeignKey="ID",  
            LocalLinkKey="CATEGORIES_ID", ForeignLinkKey="SUBCATEGORIES_ID")]
public abstract CSList<Category> Subcategories { get; } 
```

# c# - C#中的URL正则表达式

> ID：15190999
> 
> 赞同：1
> 
> 时间：2013-03-03T21:16:35.497
> 
> 标签：c#, regex, url-validation

我正在尝试找到一个可以验证尽可能多的 url 的正则表达式。我在 MVC3 的输入字段中使用它：

```
[RegularExpression(@"expression...")] 
```

我找到[了这个正则表达式 - “diegoperini”](http://mathiasbynens.be/demo/url-regex)，我很喜欢它，但我不知道如何将它从 php 转换为 .net 版本：

```
_^(?:(?:https?|ftp)://)(?:\S+(?::\S*)?@)?(?:(?!10(?:\.\d{1,3}){3})
(?!127(?:\.\d{1,3}){3})(?!169\.254(?:\.\d{1,3}){2})(?!192\.168(?:\.\d{1,3}){2})
(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])
(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))
|(?:(?:[a-z\x{00a1}-\x{ffff}0-9]+-?)*[a-z\x{00a1}-\x{ffff}0-9]+)(?:\.
(?:[a-z\x{00a1}-\x{ffff}0-9]+-?)*[a-z\x{00a1}-\x{ffff}0-9]+)*
(?:\.(?:[a-z\x{00a1}-\x{ffff}]{2,})))(?::\d{2,5})?(?:/[^\s]*)?$_iuS 
```

它在网络上看起来如何？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-03T22:20:40.193

您必须删除 PHP 分隔符并使用 \u0000 更改 \x{0000} 模式。
所以正则表达式应该是这样的。

```
String sourcestring = "source string to match with pattern";
Regex re = new Regex(@"^(?:(?:https?|ftp)://)(?:\S+(?::\S*)?@)?(?:(?!10(?:\.\d{1,3}){3})(?!127(?:\.\d{1,3}){3})(?!169\.254(?:\.\d{1,3}){2})(?!192\.168(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:/[^\s]*)?$",RegexOptions.IgnoreCase | RegexOptions.Multiline);
Match m = re.Match(sourcestring);
for (int gIdx = 0; gIdx < m.Groups.Count; gIdx++)
{
   Console.WriteLine("[{0}] = {1}", re.GetGroupNames()[gIdx], m.Groups[gIdx].Value);
} 
```

如果你愿意，你可以[在这里](http://www.myregextester.com/?r=680b6bee "这边")看到一个活生生的例子。

简短说明：此模式将匹配完整的 URL（包括用户名、密码、端口、路径、查询、片段），但它只对域部分进行详细验证；其他部分几乎没有得到验证。（感谢@nhahtdh 提供线索）