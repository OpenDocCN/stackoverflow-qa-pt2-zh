# StackOverflow 问答 12817000-12817999

# java - 使用基于 Java Key Store 中的别名的单个证书

> ID：12817002
> 
> 赞同：5
> 
> 时间：2012-10-10T10:16:49.747
> 
> 标签：java, ssl, certificate, ssl-certificate, jks

我有一个密钥库，其中添加了多个密钥和证书我想使用基于密钥库别名的证书并将其用于 SSL 我尝试设置以下系统属性但没有任何帮助

```
System.setProperty("javax.net.ssl.keyAlias", "abcd");
System.setProperty("javax.net.ssl.keyStoreAlias", "abcd"); 
```

它总是使用密钥库中的第一个证书，而不是匹配密钥别名

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T10:28:59.720

如果您查看JSSE 参考指南（或整个指南）的[自定义部分](http://docs.oracle.com/javase/7/docs/technotes/guides/security/jsse/JSSERefGuide.html#Customization)`javax.net.ssl.keyAlias`，则没有or`javax.net.ssl.keyStoreAlias`属性。

由应用程序决定使用它的别名来选择它想要的证书，但它必须自己显式加载它。一些框架使用它们自己的属性或配置选项。

# jquery - 单击另一个链接后如何撤消 CSS 更改

> ID：12817004
> 
> 赞同：0
> 
> 时间：2012-10-10T10:16:56.833
> 
> 标签：jquery, css

我的导航中有 4 个链接，我想在单击链接后更改 CSS。但是，单击另一个链接后，该链接不会变回原始 CSS。我怎样才能做到这一点？

例如，我单击“关于我们”，“关于我们”的 CSS 更改，然后单击“产品”，“产品”的 CSS 更改。如何让“关于我们”返回原始 CSS？

HTML：

```
<div id="nav">
<ul>
    <li><a href="#page1">&nbsp;Home&nbsp;</a></li>
    <li><a href="#page2">&nbsp;About Us&nbsp;</a></li>
    <li><a href="#page3">&nbsp;Products&nbsp;</a></li>
    <li><a href="#page4">&nbsp;Contact Us&nbsp;</a></li>
</ul> 
```

jQuery：

```
$(function() {
    $("#nav li a").click(function () {
      $(this).css({'color': 'black', 'border-bottom': '3px dotted black', 'background-color': 'yellow'});
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T10:19:11.803

不要使用 jQuery 应用 CSS，而是在样式表中添加另一个类：

```
nav li a.active {
    color:black;
    border-bottom:3px dotted black;
    background-color:yellow;
} 
```

然后用 jQuery 切换它：

```
$(function() {
    var navLinks = $("#nav li a");
    navLinks.click(function () {
        navLinks.removeClass('active');
        $(this).addClass('active');
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T10:22:57.373

像这样的东西。

[http://jsfiddle.net/bPeAm/](http://jsfiddle.net/bPeAm/)

# sql - 同时从 SQL 获取内容和计数

> ID：12817010
> 
> 赞同：2
> 
> 时间：2012-10-10T10:17:17.443
> 
> 标签：sql, sql-server, sql-server-2008, count

我有两张桌子，`albums`而且`pictures`...

`pictures``albums`与via有关系`fk_albumID`。

现在我想尝试的是从中选择所有`albums`，同时计算有多少与`albums`...有关的图片

我试过： `SELECT *, (SELECT COUNT(*) FROM pictures WHERE pictures.fk_albumID = albums.albumID) AS albumCount FROM pictures, albums`

但是如果根本没有图片，这首先不会返回任何结果......然后它会根据计数重复结果。因此，如果相册有 3 张图片，那么当我将相册绑定到中继器时，我将在列表中获得 3 次相册。

我试过： `SELECT COUNT(albums.albumID) AS albumCount, albums.albumName, albums.albumID FROM albums INNER JOIN pictures ON pictures.fk_albumID = albums.albumID GROUP BY albums.albumID, albums.albuName`

但这仅显示有图片的相册...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T10:36:01.757

不过你很亲近。您只需要从 INNER JOIN 到 OUTER JOIN

```
SELECT COUNT(billeder.album_id) AS AlbumSize, 
       albums.album_name, 
       albums.album_id 
  FROM albums 
 LEFT OUTER JOIN billeder 
              ON billeder.album_home = albums.album_id 
 GROUP BY albums.album_id, albums.album_name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T10:21:50.000

您可以使用子查询：

```
SELECT p.PicCount AS AlbumSize, 
  albums.album_name, 
  albums.album_id 
FROM albums a
INNER JOIN billeder b
  ON b.album_home = a.album_id 
LEFT JOIN 
(
  SELECT count(*) PicCount, fk_albumid
  FROM pictures
  GROUY BY fk_albumid
) p
  on a.album_id = p.fk_albumid 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T10:26:32.630

```
SELECT t1.album_title, isnull(sum(flag),0) AS PicCount
FROM albums AS t1
LEFT JOIN
(
SELECT *, 1 AS Flag
FROM pictures) AS t2
ON t1.fk_albumID = t2.fk_albumID
GROUP BY t1.album_title 
```

链接到[SQL 小提琴](http://sqlfiddle.com/#!3/010c9/9)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T10:19:34.550

```
SELECT (SELECT COUNT(1)
        FROM billeder
        WHERE billeder.album_home = albums.album_id) albumCount,
       albums.album_name,
       albums.album_id
FROM albums 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T10:32:20.040

```
select 
    AL.album_name, 
    AL.albumID, 
    (select count(*) from 
            ALBUMS AL1, 
            PICTURES PIC1 
     where  AL1.albumID = PIC1.albumID) as CNT_ALBUMID
from 
    ALBUMS AL 
```

试试

# xcode - 多开发者项目的 Xcode + Git 最佳实践

> ID：12817011
> 
> 赞同：19
> 
> 时间：2012-10-10T10:17:25.383
> 
> 标签：xcode, git, version-control, github, bitbucket

我可以为我自己的项目创建一个 repo 并使用 GitHub / BitBucket。在与其他开发人员合作或尝试在 GitHub 上创建项目时，我遇到了问题。

我知道其他答案，例如[开源项目上 git 存储库的最佳实践，](https://stackoverflow.com/questions/1382363/best-practices-for-git-repositories-on-open-source-projects)但是我想知道如何解决 OSX / Xcode 特定的问题。

1.  **.DS_Store**文件可能很痛苦。您可以使用**.gitignore**来阻止，但如果它们已经被包含，或者其他开发人员通过笨拙的 git 命令将它们添加回来，会发生什么？

2.  **.xcodeproj**将更改其他人的目录名称和开发人员配置文件。进行合并或避免冲突的最佳方法是什么？

3.  如果我从 github 项目中分叉或拉取，我该如何清理这些问题并最大限度地减少维护者的合并冲突？

如果人们有一个为 Xcode 创建的示例**.gitignore**，或者他们用来初始化他们的 repos 的脚本，那就太好了！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-16T20:52:57.287

1.  放入。`.DS_Store`_ `.gitignore`然后，如果您还没有，请添加`.gitignore`到 repo。（你不应该忽略`.gitignore`。）现在所有的开发者都会忽略`.DS_Store`文件。如果在您放入之前错误地将任何内容添加到 repo`.DS_Store`中`.gitignore`，您现在可以删除它们（在提交中）并且它们应该保留在外面。

2.  是`xcodeproj`一个目录。此目录中唯一必须在存储库中的文件就是该`project.pbxproj`文件。我通常通过将这些行放在我的`.gitignore`：

    ```
    *.xcuserstate
    project.xcworkspace/
    xcuserdata/ 
    ```

    您应该避免在构建设置中放置绝对路径。使用相对路径。

    您的调试和发布版本应该`iPhone Developer`用作代码签名身份，以便 Xcode 自动选择本地开发人员的配置文件。当您想要创建 IPA（用于分发）时，Xcode 将提供使用不同的身份对其重新签名，此时您可以根据需要选择您的分发配置文件。

3.  如果您尝试使用 github 中出现这些错误的项目，您可以尝试让维护者修复它们，或者您可以确保您不会`.DS_Store`在相同的提交中触及文件和代码签名身份你想向上游发送。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-09-18T14:30:54.270

关于 .xcodeproj 和合并冲突的第二个问题。

使用一个`.gitattributes`文件来指定所有`.pbxproj`文件的合并冲突应该使用该`merge=union`策略来处理，这应该意味着 Git 知道合并来自冲突双方的更改，首先获取上游的更改。

[这篇文章更深入地解释了它](http://robots.thoughtbot.com/post/33796217972/xcode-and-git-bridging-the-gap)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-16T20:33:39.463

我会一一尝试：

I.`git filter-branch`仅当您需要从历史记录中完全删除文件时才需要使用。如果这些文件不包含任何信用卡信息，那么我认为以下内容就足够了：

```
git rm --cached .DS_Store
git commit -m "{Your message}" 
```

然后将此文件添加到`.gitignore`并提交。

这将提交从存储库中删除文件，但会将文件保留在工作目录中。如果你推送它然后其他人会拉这个提交，他们可能会删除他们的文件，所以你必须传达这一点。通过提交`.gitignore`，您将阻止其他开发人员再次添加此文件。如果您不是维护者，那么我认为您不应该做任何事情，而是将此问题解决给维护者。

二、我坚信任何性质的隐藏文件大多数时候都不应该因为这个原因被放入存储库中。因此，我认为您应该对**.xcodeproj**和**.DS_Store**做同样的事情，并将其放入`.gitignore`并提交。`.gitignore`是上述规则的例外。

三、如果这些文件被正确忽略，那么它们将来不会有任何问题。如果他们已经在 repo 中并且有人想要进行此类清理，则应该由维护人员完成并在团队内部进行沟通。

希望有帮助！

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-10T12:08:30.383

git filter-branch 可能会帮助您从存储库中删除不需要的文件（.DS_Store 文件） - 参见例如[https://help.github.com/articles/remove-sensitive-data](https://help.github.com/articles/remove-sensitive-data)

如果笨拙的 git 提交添加了文件，您应该能够将更正的变更集重播到干净的存储库中。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-15T03:44:55.063

从某种意义上说，如果 .DS_Store 已经添加，则 .gitignore 不会有太大帮助，但我认为这对您和其他人来说仍然是一个很好的资源。

当我开始一个项目时，我通常会查看这个[列表](https://github.com/github/gitignore)，看看是否有一个好的 .gitignore 已经存在。更具体地说，[这个](https://github.com/github/gitignore/blob/master/Objective-C.gitignore)是 Objective-C .gitignore。

希望这些资源有一些用处。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-21T19:54:03.667

作为 Mac 用户，您应该下载支持[Git Flow的](http://nvie.com/posts/a-successful-git-branching-model/)[SourceTree](https://itunes.apple.com/us/app/sourcetree-git-hg/id411678673?mt=12)等工具。Git Flow 将帮助您围绕协作者如何将代码提交到 repo 建立一些最佳实践，并至少降低合并冲突的频率和更易于管理。对于各种项目类型的一组 gitignore 文件，您可以访问[GitHub](https://github.com/github/gitignore)并下载一个准备就绪的文件。对于 Xcode，他们将其列为[Objective-C.gitignore](https://github.com/github/gitignore/blob/master/Objective-C.gitignore)。这是一个很好的起点，它甚至涵盖了[Cocoapods](http://cocoapods.org)。如果您使用外部库，您的项目应该使用 CocoaPods，以便您可以隔离该代码并将其保留在您的存储库之外并避免使用 git 子模块。

现在，当您发现一个文件已像 .DS_Store 一样进入您的存储库时，只需将其删除，然后继续。确保将其添加到已签入项目的 .gitignore 文件中。

至于 xcodeproj ......由于上述 gitignore 将其过滤掉，因此在用户特定的文件中不应该有太多的自定义。如果要共享方案，请确保您选中管理方案下的共享，并且您将签入该子目录中的文件。您应该使用自动选择证书，因此唯一真正的选择是开发人员或分发。您还应该利用[Xcode](https://developer.apple.com/library/mac/documentation/DeveloperTools/Reference/XcodeBuildSettingRef/1-Build_Setting_Reference/build_setting_ref.html)中提供的变量来避免硬编码完整路径。当试图想到一个 Plists 示例时，在这种情况下，您可能已经编写了`/Users/me/MyProject/Resources/MyProject.plist`，但应该使用`$(SRCROOT)/resources/MyProject.plist`.

# nhibernate - NHibernate 会话（和无状态会话）和长时间运行的应用程序

> ID：12817014
> 
> 赞同：4
> 
> 时间：2012-10-10T10:17:36.517
> 
> 标签：nhibernate, .net-4.0, windows-services, structuremap, istatelesssession

在旨在运行作业的 Windows Web 服务的上下文中，我们尝试重用我们为 Web 应用程序开发的 NHibernate DAL。

对于会话管理，我们有两种选择，每种都有其优点和缺点：

**有状态的会话**

*   因为它会跟踪所有内容（L1/会话缓存），所以会增长很多
*   需要小心关闭，会话处理似乎不足以清除 L1 缓存（我使用内存分析器注意到的）

**无状态会话**

*   目前无法重用映射。所有用“lazy=true”声明的包最终都会出现以下异常（即使会话尚未关闭）：

> Initializing [...] failed to lazyly initialize a collection of role: [...], no session or session was closed

显然，我们**不能**使用lazy="false" 更新映射（它们与网络应用程序共享），这将是性能的巨大缺陷

*   无法与 L2 缓存交互：当将部署共享 L2 缓存时，服务将无法使 L2 缓存数据无效，以便 Web 应用程序拥有最新的数据

到目前为止，NHibernate 已经被证明是好的，我们已经成功地在 web 上下文中使用了有状态会话和 NHibernate LINQ，以及用于依赖注入的结构图。

我的问题是：

*   在长时间运行的线程中使用 NHibernate 有什么好的解决方案吗？
*   我更喜欢使用有状态会话，但如何避免内存泄漏？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T07:07:45.190

问题解决了！实际上有几个问题。

第一个是关于实例的范围和多线程：

*   为每个线程创建一个新会话。
*   线程完成其工作后，立即清理附加到该线程的所有实例。使用 StructureMap，在线程中，使用`new HybridLifecycle().FindCache().DisposeAndClear();`. 它将导致附加到线程的会话关闭并释放。
*   当生命周期是线程范围时，StructureMap 使用一个`ThreadStatic`变量来保持对对象缓存的引用。所以诀窍是在线程中调用 StructureMap 的 ObjectFactory。最初，在我们的应用程序中，一个主线程负责创建新线程，并调用 ObjectFactory。这是我们犯的主要错误，一旦他们的工作完成，确实无法清理线程。

会话类型：

*   无需使用 StateLessSession，只要实例化的 StateFul 会话被仔细处理。在我们的例子中，StatelessSession 有太多的缺点（缓存管理是主要的）

重要提示：注意只实例化 NHibernate NHibernate Session Factory 一次！

当 NHibernate 实例被仔细管理时，没有内存泄漏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T20:22:52.433

在长时间运行的过程中保持有状态会话打开绝不是一个好主意。

我的建议是重新设计您的流程，将数据库相关代码与非数据库相关代码分开，这样任何与数据库相关的操作都可以保留在一个短跨度会话中。

# javascript - 在ajax中显示文件的二进制代码

> ID：12817015
> 
> 赞同：0
> 
> 时间：2012-10-10T10:17:46.243
> 
> 标签：javascript, ajax, file, binary

我想显示音乐文件的二进制代码。但不知何故，下面的代码似乎不起作用。有什么建议么？？

```
function binary() {
    var xmlhttp;
    if (window.XMLHttpRequest) {  // code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp = new XMLHttpRequest();
    }
    else {  // code for IE6, IE5
        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.open("GET","1.wav",true);
    xmlhttp.overrideMimeType("text/plain; charset=x-user-defined");
    xmlhttp.onreadystatechange = function(buffer) {
        var binaryCode = "";
        if (xmlhttp.readyState==4 && xmlhttp.status==200) {
            var binStr = this.responseText;
            for (var i=0; i<binStr.length; i++) {
                var byte = binStr.charCodeAt(i) & 0xff;  // get byte at i
                binaryCode += byte;
            }   
        }
        document.getElementById("result").innerHTML = binaryCode; // should display binary code
    };
    xmlhttp.send();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T10:38:49.090

并非所有字节值都可以在字符串中表达，并且不会出现或导致字符串缩短。

XMLHttpResponse.ResponseText/ResponseXML 会将 http 响应内容作为字符串返回。例如，任何 0 字节值都将终止字符串。

让服务器返回字节的 Base64 表示并在客户端解码为字节值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T11:03:55.250

您的代码似乎在我的 chrome 浏览器上运行良好。您正在尝试的问题到底是什么？

您可能希望通过执行以下操作以十六进制形式显示二进制文件：

```
binaryCode += '0x' + byte.toString(16) + ' ' 
```

编辑：这个 jsfiddle 在我的 chrome 上工作：http: [//jsfiddle.net/e6Kfk/](http://jsfiddle.net/e6Kfk/)

但是，我不认为这种方法是跨浏览器的，特别是如果你想处理 ie （虽然还没有测试过）

# c# - 将页码添加到 Pdf 文档

> ID：12817017
> 
> 赞同：2
> 
> 时间：2012-10-10T10:17:53.973
> 
> 标签：c#, asp.net, abcpdf

如果 pdf 的内容不能全部放在一个页面上，我如何将 pdf 的内容扩展到下一页。目前我正在将 Pdf 创建为 A4。

另外，我如何指定页数，例如右下角的第 1 页，共 12 页。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T21:48:42.483

要将文本添加到 PDF 文档并让它在文本不适合时创建新页面，您可以使用以下代码。

```
theID = theDoc.AddHtml(theText)
While theDoc.Chainable(theID)
  theDoc.Page = theDoc.AddPage()
  theDoc.FrameRect
  theID = theDoc.AddHtml("", theID)
Wend 
```

要将您的页码和页数添加到每个页面，请使用它。

```
theDoc.Rect = "100 50 500 150" 'position of page number
For i = 1 To theDoc.PageCount
  theDoc.PageNumber = i
  theDoc.AddText i & "/" & theDoc.PageCount
Next 
```

**编辑：C#版本**

```
Doc doc = new Doc();
doc.Page = doc.AddPage();
int id = doc.AddImageUrl("http://www.google.com/", true, 700, true);
while (true)
{
    if (!doc.Chainable(id))
        break;
    doc.Page = doc.AddPage();
    id = doc.AddImageToChain(id);
 }

 doc.Font = doc.AddFont("Arial");
 doc.FontSize = 9;
 for (int i = 1; i <= doc.PageCount; i++)
 {
     doc.PageNumber = i;
     doc.Rect.String = "470 55 570 65";
     doc.HPos = 1;
     doc.AddText("Page " + i.ToString() + " of " + doc.PageCount.ToString());
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T12:11:46.037

您需要做的是首先确保您有一个会自动扩展为所需大小的文档，下面的 c# 示例将获取一个 URL 并构建一个最多 50 页的文档，如果需要可以扩展。（下面的示例在文档中为页眉和页脚添加空间）

```
 private static Doc CreateNewDoument(string currentURL)
        {
            var theDoc = new Doc();

            theDoc.MediaBox.String = "A4";

            theDoc.HtmlOptions.PageCacheEnabled = false;
            theDoc.HtmlOptions.ImageQuality = 101;
            theDoc.Rect.Width = 719;
            theDoc.Rect.Height = 590;
            theDoc.Rect.Position(2, 70);
            theDoc.HtmlOptions.Engine = EngineType.Gecko;

            // Add url to document.););
            try
            {
                //Make sure we dont have a cached page.. 
                string pdfUrl = currentURL+ "&discache=" + DateTime.Now.Ticks.ToString();

                int theID = theDoc.AddImageUrl(pdfUrl);
                //Add up to 50 pages
                for (int i = 1; i <= 50; i++)
                {
                    if (!theDoc.Chainable(theID))
                        break;
                    theDoc.Page = theDoc.AddPage();
                    theID = theDoc.AddImageToChain(theID);
                }
                theDoc.PageNumber = 1;
            }
            catch (Exception ex)
            {
                //HttpContext.Current.Response.Redirect(pdCurrentURL);

                throw new ApplicationException("Error generating pdf..." + "Exception: " + ex + "<br/>URL for render: " + pdfUrl+ "<br/>Base URL: " + currentURL);
            }

            return theDoc;
        } 
```

然后为每个页面添加页脚，只需使用以下方法。下面的方法在里面添加了一个带有文本的蓝色框。

```
 private static Doc AddFooter(Doc theDoc)
    {
        int theCount = theDoc.PageCount;
        int i = 0;
        for (i = 1; i <= theCount; i++)
        {
            theDoc.Rect.String = "20 15 590 50";
            theDoc.Rect.Position(13, 30);
            System.Drawing.Color c = System.Drawing.ColorTranslator.FromHtml("#468DCB");
            theDoc.Color.Color = c;
            theDoc.PageNumber = i;
            theDoc.FillRect();

        }
        i = 0;
        for (i = 1; i <= theCount; i++)
        {
            theDoc.Rect.String = "20 15 260 50";
            theDoc.Rect.Position(190, 20);
            System.Drawing.Color cText = System.Drawing.ColorTranslator.FromHtml("#ffffff");
            theDoc.Color.Color = cText;
            string theFont = "Century Gothic";
            theDoc.Font = theDoc.AddFont(theFont);
            theDoc.FontSize = 17;
            theDoc.PageNumber = i;
            theDoc.AddText("Page " + i +" of " +theCount); //Setting page number  
            //theDoc.FrameRect();
        }
        return theDoc;
    } 
```

然后就打电话给整个地段..就像

```
 private static bool BuildPDF(string pdfPath)
    {
        bool pdfBuilt = false;

        try
        {
            var theDoc = new Doc();

            string pdGeneral = "http://ww.myurl.com";
            theDoc = CreateNewDoument(pdGeneral);

            theDoc = AddFooter(theDoc);

            theDoc.Save(pdfPath);
            theDoc.ClearCachedDecompressedStreams();
            theDoc.Clear();
            theDoc.Dispose();

            pdfBuilt = true;
        }
        catch (Exception)
        {
            //PDF normaly in use dont worry..
        }

        return pdfBuilt;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T10:24:19.597

abc pdf 用于将 HTML 页面转换为 pdf，将您的内容设置为两个 html 页面，它将生成两个 PDF 页面。有关更多详细信息，您可以在左侧查看[“](http://www.websupergoo.com/helppdf8/) 内容”，单击“**示例**”，然后选择“**分页 HTML 示例**”。

# java - XML 节点上的 getNodeName() 操作返回 #text

> ID：12817018
> 
> 赞同：10
> 
> 时间：2012-10-10T10:17:55.987
> 
> 标签：java, xml, dom, xml-parsing

```
<person>
<firstname>
<lastname>
<salary>
</person> 
```

这是我正在解析的 XML。当我尝试打印人的子元素的节点名称时，我得到

文本

名

文本

姓

文本

薪水

如何消除生成的#text？

更新 - 这是我的代码

```
try {

    NodeList nl = null;
    int l, i = 0;
    File fXmlFile = new File("file.xml");
    DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
    DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
    dbFactory.setValidating(false);
    dbFactory.setIgnoringElementContentWhitespace(true);
    dbFactory.setNamespaceAware(true);
    dbFactory.setIgnoringComments(true);

    dbFactory.setCoalescing(true);

    InputStream in;
    in = new FileInputStream(fXmlFile);
    Document doc = dBuilder.parse(in);
    doc.getDocumentElement().normalize();
    Node n = doc.getDocumentElement();

    System.out.println(dbFactory.isIgnoringElementContentWhitespace());
    System.out.println(n);

    if (n != null && n.hasChildNodes()) {
        nl = n.getChildNodes();

        for (i = 0; i < nl.getLength(); i++) {
            System.out.println(nl.item(i).getNodeName());
        }
    }
} catch (Exception e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T10:57:05.610

`setIgnoringElementContentWhitespace`仅当您使用 时才有效`setValidating(true)`，并且仅当您正在解析的 XML 文件引用 DTD 时，解析器可以使用该 DTD 来确定哪些纯空格文本节点实际上是可忽略的。如果您的文档没有 DTD，它会在安全方面犯错，并假定不能忽略任何文本节点，因此您必须编写自己的代码以在遍历子节点时忽略它们。

# jquery - 单击页面上除图层以外的任何位置时隐藏图层

> ID：12817019
> 
> 赞同：0
> 
> 时间：2012-10-10T10:17:56.320
> 
> 标签：jquery, html

```
$('body').click(function() {
//hide layer code here
}); 
```

这将隐藏图层。

但是当我在图层内部/上单击时，我不希望图层被隐藏。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T10:41:31.713

我认为更优雅的方式是这样的：

```
$('body').click(function(event) {
// hide layer code here
});
$('#layer').click(function(event) {
event.stopPropagation();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T10:32:50.583

你可以尝试这样的事情。

```
$(document).ready(function () { 
            $('body').click(function(e) {
                if(e.target.id !== 'layer') {
                    alert('Put code to hide layer here');
                }

            });
        });
    </script>

<body>
<p id='layer'>This is layer</p>
<p id='other'>This is other part </p>
</body> 
```

[演示](http://jsfiddle.net/jashwant/G9FGP/)

此外，您可以创建叠加层（标准方式）

HTML

```
<body>
<div id='overlay'></div>
<p id='layer'>This is layer</p>
</body> 
```

JS

```
$('#overlay').click(function(e) {
    alert('code to hide your layer'); 
    // Notice that this function won run when you click on layer but will run whenever you on any other part of body.
});​ 
```

[演示](http://jsfiddle.net/jashwant/Sjje9/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T10:24:26.267

```
$('body').click(function(ev){
    if(ev.target.className == 'yourLayerClass') {
        // Your code here
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T10:47:16.940

获取要分层的 id。例如：#层

并将此代码放入您的脚本文件：

```
$('#layer').on('click', function (event) {
event.stopPropagation();
}); 
```

# vim - 记事本++有vim插件吗？

> ID：12817027
> 
> 赞同：73
> 
> 时间：2012-10-10T10:18:17.563
> 
> 标签：vim, plugins, notepad++, text-editor

有很多问题和答案`vim`，`notepad++`但并不清楚，什么是让`notepad++`行为像 a的最佳方法`vim`（如果可能的话）。

**更新**
似乎比这个问题需要一些关于我的动机的额外信息。我假设自己是一个 vim 初学者。一时更换编辑器对我来说是相当困难的。我认为我当前编辑器的 vim 插件可以让我更轻松地在新环境中感到更舒适。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-11-24T08:24:28.173

您可以尝试 ViSimulator for Notepad++，它可能会在一定程度上满足您的要求。它是notepad++的插件，可以在notepad++中编辑为vi/vim。ViSimulator 模拟/模拟最常用的 vi/vim 命令，为 notepad++ 提供更强大的编辑能力。

作为该站点的描述，它支持的一些命令：

```
0: move the cursor to colum 1 (hard beg-of-line)
$: move the cursor to end-of-line
^: move the cursor to the first non-blank character (soft beg-of-line)
-: move the cursor to the first non-blank character (soft beg-of-line) of the previous [count] line 
+, <RETURN>: move the cursor the first non-blank character (soft beg-of-line) of the next [count] line
hjkl: move the cursor left, down, up and right [count] colum/line
and more... 
```

可以通过 [https://web.archive.org/web/20150515145616/http://www.visimulator.com/download.html](https://web.archive.org/web/20150515145616/http://www.visimulator.com/download.html)访问 ViSimulator 。原始页面不再可用。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2012-10-10T12:03:01.830

使 Vim 成为现在这个样子的大部分原因在于它是一个*模态*编辑器。如果没有办法将 NP++ 转变为模态编辑器，那么您将不会走得太远。快速浏览[NP++ 插件页面](http://sourceforge.net/apps/mediawiki/notepad-plus/index.php?title=Plugin_Central)显示没有 Vi[m] 插件，所以我会回答“否”。

不管怎样，学习 Vim 的最好方法就是使用它。我建议你继续使用 NP++ 进行严肃的工作，并强迫自己使用 Vim 进行其他所有工作。一次，如果有的话，你会准备好，放弃 NP++ 并全职使用 Vim。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-08-07T20:08:35.330

notepad++ 有 ViSimulator 插件。您可以通过以下两种方式安装插件。

1.  通过 Notepad++ 插件管理器。转到记事本菜单插件 -> 插件管理器 -> 显示插件管理器。在弹出对话框中，选择“available”选项卡，然后在插件列表中选择“visimulator”。然后点击安装按钮完成。

2.  手动安装。[从 ViSimulator下载](https://web.archive.org/web/20150515145616/http://www.visimulator.com/download.html)页面下载插件，作为 dll 文件。转到 Notepad++ 安装目录 -> 插件文件夹，然后将 dll 文件复制并粘贴到那里。重新启动 Notepad++，一切就绪。您会注意到在主菜单“插件”下还有一个菜单选项 ViSimulator

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-29T21:54:36.480

有 ViSimulator 插件！

```
 Version 0.3.0.659 ( ANSI / Unicode ) 
```

视觉模拟器

```
ViSimulator for notepad++ is a plug-in for notepad++, which make it possible to edit as vi/vim in notepad++. ViSimulator simulate/emulate most frequently-used vi/vim commands 
```

为notepad++提供更强大的编辑能力。

simon2013 来源：来自下载页面

链接：[https ://web.archive.org/web/20150515145616/http://www.visimulator.com/public/p/visimulator.dll](https://web.archive.org/web/20150515145616/http://www.visimulator.com/public/p/visimulator.dll)

来自 [NP++ 插件页面](http://sourceforge.net/apps/mediawiki/notepad-plus/index.php?title=Plugin_Central)。

```
/ is a synonym of standard npp search/replace dialog.
: seems not working. 
```

*对不起，我的英语不好。*

# jackrabbit - 使用 jackrabbit 存储库时获取 org.apache.jackrabbit.core.state.ItemStateException

> ID：12817028
> 
> 赞同：-1
> 
> 时间：2012-10-10T10:18:19.940
> 
> 标签：jackrabbit, jcr

```
 class="org.apache.jackrabbit.core.persistence.bundle.PostgreSQLPersistenceManager">

        <param name="driver" value="org.postgresql.Driver" />
        <param name="url" value="jdbc:postgresql://192.168.1.200:5433/NEWDMS" />
        <param name="user" value="postgres" />
        <param name="password" value="eminence" />
         <param name="schema" value="postgresql" />
         <param name="schemaObjectPrefix" value="${wsp.name}_" />
          <param name="externalBLOBs" value="false" />

    </PersistenceManager> 
```

我在访问 jackrabbit 存储库时创建了一个临时存储库并在 repository.xml 文件中进行了更改，但出现以下异常：org.apache.jackrabbit.core.state.ItemStateException: failed to read bundle: deadbeef-face-babe-cafe-babecafebabe java.lang.IllegalArgumentException：无效的命名空间索引：3158064

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T13:39:28.793

“无法读取包：deadbeef-face-babe...”消息是存储库不一致的症状。从这些知识库文章开始：[修复“jcr:system”节点](http://dev.day.com/content/kb/home/Crx/Troubleshooting/FixTheJcrSystemNode.html)、[一致性检查](http://dev.day.com/docs/en/cq/current/deploying/upgrading/consistency-check.html)和[Tar 数据文件轮换](http://dev.day.com/content/kb/home/Crx/Troubleshooting/TarDataRotation.html)。第三个链接突出显示了可能感兴趣的持久性管理器的这个配置参数（尽管我看到您没有使用默认的 TPM 持久性管理器，因此它可能不相关）：

```
<param name="maxFileSize" value="512" /> 
```

# c++ - 如何在 BHO 中操作 DOM

> ID：12817032
> 
> 赞同：2
> 
> 时间：2012-10-10T10:18:36.367
> 
> 标签：c++, dom, bho

我试图在我的 BHO 中操纵网站的 DOM。我用 C++ 编写，但我不知道该怎么做。这是我尝试过的不同方法。第二个并没有真正操纵 DOM，但我认为值得一试......

```
//get parent node
IHTMLDOMNode* parent;
ielem->QueryInterface(IID_IHTMLDOMNode, (void**)&parent);

//get child node
IHTMLElement* child_element;
doc2->createElement(L"a", &child_element);
IHTMLDOMNode* child_node;
child_element->QueryInterface(IID_IHTMLDOMNode, (void**)&child_element);

//Create Value
VARIANT value;
value.vt = VT_BSTR;
value.bstrVal = L"TEST";

//set value
child_node->put_nodeValue(value);

//append child
parent->appendChild(child_node, &child_node); 
```

我尝试的另一种方法是：

```
//initialize
IHTMLElement* element;
BSTR* innerhtml;
ielem->QueryInterface(IID_IHTMLElement, (void**)&element);

//overwrite the content
element->put_innerHTML(L"<a href=\"http://www.google.de\">testytest</a>");
element->get_innerHTML(innerhtml);

//check for success
MessageBox(0, *innerhtml, L"Titel", 0);
delete innerhtml; 
```

# objective-c - UIAlertViewDelegate 在单独的类崩溃应用程序

> ID：12817033
> 
> 赞同：3
> 
> 时间：2012-10-10T10:18:37.157
> 
> 标签：objective-c, ios, delegates, uialertview, nsobject

我`UIAlertView`在课堂上的委派方面遇到了困难`ViewController`。一切都很好，直到用户单击`OK`按钮 - 然后应用程序崩溃

```
Thread 1: EXC_BAD_ACCESS (code=2, address 0x8) 
```

**视图控制器.h：**

```
#import <UIKit/UIKit.h>
#import "DataModel.h"

@interface ViewController : UIViewController
@end 
```

**视图控制器.m：**

```
#import "ViewController.h"

@interface ViewController ()
@end

@implementation ViewController
- (void)viewDidLoad
{
    DataModel *dataModel = [[DataModel alloc] init];
    [dataModel ShowMeAlert];

    [super viewDidLoad];
}
@end 
```

**数据模型.h**

```
#import <Foundation/Foundation.h>

@interface DataModel : NSObject <UIAlertViewDelegate>
- (void)ShowMeAlert;
@end 
```

**数据模型.m**

```
#import "DataModel.h"

@implementation DataModel
- (void)ShowMeAlert;
{
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Info" message:@"View did load!" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [alert show];
}

#pragma mark - UIAlertView protocol

- (void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex
{
    NSLog(@"Index: %d", buttonIndex);
}

@end 
```

*   如果显示警报的代码及其委托方法在`ViewController`- 完美运行。
*   当我删除`UIAlertDelegation`方法时`...didDismissWithButtonIndex...`- 无需授权即可工作。
*   当我设置`UIAlertView delegate`为`nil`- 无需授权即可工作。

有什么线索有什么问题吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-10T10:23:57.060

在这种方法中：

```
- (void)viewDidLoad
{
  DataModel *dataModel = [[DataModel alloc] init];
  [dataModel ShowMeAlert];

  [super viewDidLoad];
} 
```

您正在分配一个 DataModel 局部变量，该变量将在作用域结束时由 ARC 释放。因此，当执行解雇时，您的代表不再存在。解决此问题的方法是将您存储`DataModel`在`strong`视图控制器的属性中。这样它就不会被释放。你会做的：

```
- (void)viewDidLoad
{
  self.dataModel = [[DataModel alloc] init];
  [self.dataModel ShowMeAlert];

  [super viewDidLoad];
} 
```

# c# - 如何从包含其他隐藏跨度的跨度中获取内部文本？

> ID：12817035
> 
> 赞同：0
> 
> 时间：2012-10-10T10:18:38.670
> 
> 标签：c#, html, html-agility-pack

我有一些测试 html 页面

```
<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>Page for test</title>
</head>
<body>
    <div class="r_tr">
        <span class="r_rs">Inner text<span class="otherSpan" style="display: none">text</span></span>
    </div>
</body>
</html> 
```

我想获得“内部文字”。我正在使用 HtmlAgilityPack。我写这个方法

```
public string GetInnerTextFromSpan(HtmlDocument doc)
{
    const string rowXPath = "//*[@class=\"r_tr\"]";
    const string spanXPath = "//*[@class=\"r_rs\"]";
    string text = null;
    HtmlNodeCollection rows = doc.DocumentNode.SelectNodes(rowXPath);
    foreach(HtmlNode row in rows)
    {
        text = row.SelectSingleNode(spanXPath).InnerText;
        Console.WriteLine("textL {0}", text);
    }
    return text;

} 
```

但此方法返回“内部文本”。我写了一些单元测试来解释我的问题

```
[Test]
public void TestGetInnerTextFromSpan()
{
    var client = new PromtTranslatorClient();
    var doc = new HtmlDocument();
    doc.Load(@"testPage.html");
    var text = client.GetInnerTextFromSpan(doc);
    StringAssert.AreEqualIgnoringCase("Inner text", text);
} 
```

和结果

```
Expected string length 10 but was 14\. Strings differ at index 10.
  Expected: "Inner text", ignoring case
  But was:  "Inner texttext"
  ---------------------^ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T10:42:35.563

我不知道 XPath，但这里是使用 LINQ 的解决方案：

```
String inner = (from x in doc.DocumentNode.Descendants()
                where x.Name == "span"
                && x.Attributes["class"].Value == "r_rs"
                select 
                      (from y in x.ChildNodes
                       where y.Name == "#text"
                       select y.InnerText).FirstOrDefault()
                ).FirstOrDefault(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T10:24:42.087

首先，你`spanXPath`的不正确。`//`at the start 的意思是“从根开始”，所以`row.SelectSingleNode(spanXPath)`总是会`r_rs`在文档中给出第一个带有类的元素，而不是在行中。删除`//`以解决此问题。

然后，`text()`是文本节点的 XPath。您可以使用

```
var span = row.SelectSingleNode(spanXPath);
var textNode = span.SelectSingleNode("text()");
text = textNode.InnerText;
Console.WriteLine("textL {0}", text); 
```

在您的`foreach`循环中获取所选跨度中的第一个文本节点。

# asp.net - 500 内部服务器错误 IIS7 编码 URL

> ID：12817036
> 
> 赞同：7
> 
> 时间：2012-10-10T10:18:42.303
> 
> 标签：asp.net, iis, iis-7

我正在使用 N2Cms 并正在研究我遇到的一些问题。它在左侧有一个导航面板，在您展开树时通过 ajax 加载。

获取节点子节点的代码调用带有一些参数的 ashx 文件。一个参数用于路径，其中包含斜线。出于这个原因，它已被编码。

```
.../cms/Content/Navigation/LoadTree.ashx?target=preview&selected=%252fhome%252fhelp-and-advice%252f 
```

我在我的开发服务器（运行 iis 7.5）上对此没有任何问题，但是当部署到我们的测试服务器（iis7）时，导航无法正常工作。

对此进行调查表明，上面的 url 给出了 500 错误。

如果我将网址解码为

```
.../cms/Content/Navigation/LoadTree.ashx?target=preview&selected=/home/help-and-advice/ 
```

它没有问题。

不幸的是，我无法将生成它的代码更改为 n2cms 源代码的一部分，我假设它已被编码是有充分理由的。

有谁知道我可以在我的 web.config 中做些什么来允许编码参数或我可以在 iis 服务器上更改的东西？

**编辑：** 所以这个链接似乎表明它是为了安全而故意这样做的。 [http://msdn.microsoft.com/en-us/library/ee656542.aspx](http://msdn.microsoft.com/en-us/library/ee656542.aspx)

建议的解决方案是升级到 .net 4.0 并将以下内容添加到 web.config

```
<configuration>
 <uri>
   <schemeSettings>
    <add name="http" genericUriParserOptions="DontUnescapePathDotsAndSlashes"/>
   </schemeSettings>
 </uri>
</configuration> 
```

不幸的是，这似乎没有效果。

任何想法为什么这不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T21:48:08.220

看来您的网址经过 2 html 编码。您的 IIS7 服务器上是否有一些 url 重写模块处于活动状态？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T20:25:16.973

这可能是 URLScan 实用程序。URL 扫描根据其配置文件中的规则阻止 URL。它还有自己的日志文件，因此您可以通过查看 URLScan 日志来确定。

谷歌搜索 URLSCan 默认位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T14:42:59.697

好的，我得到了这个。

当试图在 IIS 日志中查找错误并失败时，然后查看许多有关失败的跟踪请求的帖子，但在 iis 中仍然没有收到任何错误，我认为该请求只是没有到达 IIS。

回顾服务器错误，那里也有一个线索。
500内部服务器错误。该请求被 HTTP 过滤器拒绝。

是防火墙！！我们已经禁用了 HTTP 过滤器，现在它可以工作了 :)

我现在需要调查这个 HTTP 过滤器应该保护我们免受什么侵害，现在我们已经关闭它是否安全。

# sql - 适用于 GYM 培训师的 T-SQL 解决方案时间表和课程预订

> ID：12817037
> 
> 赞同：0
> 
> 时间：2012-10-10T10:18:43.950
> 
> 标签：sql, sql-server, tsql, pivot

我有四个表 **tblEmployees**

```
员工 ID 姓名    
1 扎希兹
2尼贡
3 吉面
4 灰
5 丹妮

```

**tbl 成员**

```
成员没有名字
1 萨利姆
2贾米尔
3 贾子
4 船
5 乔恩
6 妈妈

```

**RefSessions**

```
SessionID 开始时间 结束时间
1 0701 0730
2 0731 0800
3 0801 0830
4 0831 0900
5 0901 0930
6 0931 1000
7 1001 1030
8 1031 1100
9 1101 1130
10 1131 1200
11 1201 1230
12 1231 1300
13 1301 1330
14 1331 1400
15 1401 1430
16 1431 1500
17 1501 1530
18 1531 1600
19 1601 1630
20 1631 1700
21 1701 1730
22 1731 1800
23 1801 1830
24 1831 1900
25 1901 1930
26 1931 2000
27 2001 2030
28 2031 2100

```

**tblBookSession**

```
BookingID SessionID EmployeeID MemberNo SessionDate
1 15 2 3 2012-09-30
2 16 2 3 2012-09-30
3 1 3 4 2012-10-03
4 2 3 4 2012-10-03
5 3 3 4 2012-10-03
6 4 3 4 2012-10-03

```

[我正在寻找一个 t-sql 查询，导致针对特定日期的所述表格](http://i.stack.imgur.com/jHOZP.png)

它实际上是在健身房预订培训师的时间段并以日期报告的形式显示

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T11:06:30.740

您将需要执行[`PIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx). 使用 PIVOT 有两种方法可以做到这一点，一种是您对要转换的列进行编码的静态 Pivot，另一种是在执行时确定列的动态 Pivot。

静态枢轴，您将需要对值进行硬编码：

```
select name,
   IsNull([701-730], '') [701-730],
   IsNull([731-800], '') [731-800],
   IsNull([801-830], '') [801-830],
   IsNull([831-900], '') [831-900]
from
(
  select e.name,
    cast(e.starttime as varchar(10))+'-'
      +cast(e.endtime as varchar(10)) Session,
    m.FirstName
  from
  (
    select *
    from tblEmployees e
    cross apply RefSessions
  ) e
  left join tblBookSession b
    on e.EmployeeID = b.EmployeeID
    and e.sessionid = b.sessionid
  left join tblMembers m
    on b.MemberNo = m.MemberNo
) x
pivot
(
  max(FirstName)
  for session in ([701-730], [731-800], [801-830], [831-900]) -- additional sessions here
)p 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/00b75/22)

如果您有许多值要转换为列或未知数量的值，那么您将需要使用动态 sql 版本`PIVOT`：

```
DECLARE @cols AS NVARCHAR(MAX),
    @colsPivot AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT ',' 
                      + QUOTENAME(cast(starttime as varchar(10))
                                  +'-'+cast(endtime as varchar(10))) 
                    from RefSessions
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

select @colsPivot = STUFF((SELECT ', IsNull(' 
                      + QUOTENAME(cast(starttime as varchar(10))
                          +'-'+cast(endtime as varchar(10))) +', '''') as [' +
                           cast(starttime as varchar(10))
                                  +'-'+cast(endtime as varchar(10)) + ']'
                    from RefSessions
                    group by SessionID, starttime, endtime
                    order by SessionID 
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT name, ' + @colsPivot + ' from 
             (
                  select e.name,
                    cast(starttime as varchar(10))+''-''
                      +cast(endtime as varchar(10)) Session,
                    m.FirstName
                  from
                  (
                    select *
                    from tblEmployees e
                    cross apply RefSessions
                  ) e
                  left join tblBookSession b
                    on e.EmployeeID = b.EmployeeID
                    and e.sessionid = b.sessionid
                  left join tblMembers m
                    on b.MemberNo = m.MemberNo
            ) x
            pivot 
            (
                max(FirstName)
                for Session in (' + @cols + ')
            ) p '

execute(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/85e05/38)

# python - 检查文件是否比其他文件更新？

> ID：12817041
> 
> 赞同：17
> 
> 时间：2012-10-10T10:18:56.830
> 
> 标签：python, python-2.7

> **可能重复：**
> [python：哪个文件较新以及多长时间](https://stackoverflow.com/questions/8297003/python-which-file-is-newer-by-how-much-time)

在 python 中——我如何检查——如果文件比其他文件更新？

**编辑**：

有创建时间和修改时间。

该问题应明确说明所需的属性。

# 修改

*   `os.stat(FILE).st_mtime`

*   `os.path.getmtime(FILE)`

# 创建

`os.path.getctime(FILE)`并且`os.stat(FILE).st_ctime`不会在类 Unix 操作系统上提供创建时间。[Link](https://stackoverflow.com/questions/946967/get-file-creation-time-with-python-on-mac) by [root](https://stackoverflow.com/users/1199589/root)提供了如何在类 Unix 机器上找出创建时间的解决方案。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-10T10:28:43.680

您也可以使用`os.path.getctime`. `True`如果`file1`在之前创建，则此示例将返回`file2`，`False`否则将返回。

```
import os.path
os.path.getctime('file1') < os.path.getctime('file2') 
```

编辑：请注意，[您的问题没有跨平台解决方案](http://docs.python.org/library/os.path.html#os.path.getctime)——Unix 中的 ctime() 表示上次更改时间，而不是创建时间。[使用 os.stat(file).st_ctime 时也是如此。](http://docs.python.org/library/os.html?highlight=os.stat#os.stat)

[这](https://stackoverflow.com/questions/946967/get-file-creation-time-with-python-on-mac)似乎可以在 unix 机器上运行。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-10T10:22:12.007

```
import os
f1 = os.path.getmtime('file1')
f2 = os.path.getmtime('file2')

if f1 > f2: 
```

检查修改时间可能是一种解决方案

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-10T10:29:52.300

`os.stat`在任何文件上使用，都会为您提供一组关于您的文件的 10 种不同统计信息。其中一个统计信息是`creation time`-> `st_ctime`.. 您可以使用它来计算两个文件的创建时间之间的差异。

```
>>> import os
>>> os.stat("D:\demo.pl")
nt.stat_result(st_mode=33206, st_ino=0L, st_dev=0, st_nlink=0, st_uid=0, 
st_gid=0, st_size=135L, st_atime=1348227875L, st_mtime=1348228036L, 
st_ctime=1348227875L)

>>> os.stat("D:\demo.pl").st_ctime
1348227875.8448658 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T10:23:12.600

```
import os

def comp(path1, path2):    
    return os.stat(path1).st_ctime > os.stat(path2).st_ctime 
```

# java - 算法的优化

> ID：12817042
> 
> 赞同：0
> 
> 时间：2012-10-10T10:19:00.010
> 
> 标签：java, algorithm, data-structures

我有读取文本文件并创建`boolean`类型的输入数组 [] 的代码。它的大小约为 100,000-300,000 件。现在我面临的问题是创建所有具有连续真值的大小为 N, 3>=N>=9 的子集。

例如，对于 N=3，如果所有 3 个真值都在连续索引中，则 [true][true][true] 是所需的子集。

虽然我创建了一个算法，但它非常慢。我需要一个更好的解决方案，它既快速又高效。

请提出一些想法。

```
 public static void createConsecutivePassingDays()
    {       
        for (String siteName  : sitesToBeTestedList.keySet())
        {
            System.out.println("\n*****************Processing for Site--->"+siteName+" ***********************");

            LinkedHashMap<String,ArrayList<String>> cellsWithPassedTripletsDates=new LinkedHashMap<String, ArrayList<String>>();

            for (String cellName : sitesToBeTestedList.get(siteName))
            {

                System.out.println("\n*****************Processing for Cell--->"+cellName+" ***********************");

                boolean failed=false;

                ArrayList<String> passedDatesTriplets=new ArrayList<String>();
                int consecutiveDays=0;
                String tripletDate="";
                String prevDate_day="";
                String today_Date="";

                for (String date : cellDateKpiMetOrNotMap.get(cellName).keySet())
                {
                    System.out.println("\nprocessing for Date-->"+date);
                    if(!(prevDate_day.trim().equals("")))
                        today_Date=getNextDay(prevDate_day.substring(0, prevDate_day.lastIndexOf('_')));

                    if(Connection.props.getProperty("INCLUDE_WEEKENDS").equalsIgnoreCase("FALSE"))
                    {
                        if(date.endsWith("SAT") || date.endsWith("SUN") || (!(date.substring(0, date.lastIndexOf('_')).equalsIgnoreCase(today_Date))))
                        {
                            if(consecutiveDays >= Reader.days)
                            {
                                passedDatesTriplets.add(tripletDate);
                            }

                            tripletDate="";
                            consecutiveDays=0;
                            prevDate_day=date;
                            continue;
                        }
                    }

                    if(cellDateKpiMetOrNotMap.get(cellName).get(date).equalsIgnoreCase("TRUE"))
                    {

                        if(tripletDate.equals(""))
                            tripletDate=date;
                        else
                            tripletDate+="#"+date;

                        consecutiveDays++;

                    }
                    else
                    {
                        failed=true;
                        if(consecutiveDays >= Reader.days)//kd
                        {
                            System.out.println("Triplet to be added-->"+tripletDate);
                            passedDatesTriplets.add(tripletDate);
                        }
                        tripletDate="";
                        consecutiveDays=0;
                    }

                    prevDate_day=date;
                }

                if(!failed)
                    passedDatesTriplets.add(tripletDate);
                else
                {
                    if(tripletDate.trim().split("#").length >= Reader.days)
                    {
                        passedDatesTriplets.add(tripletDate);
                    }
                }

                cellsWithPassedTripletsDates.put(cellName, passedDatesTriplets);

            }

            siteItsCellsWithPassedDates.put(siteName, cellsWithPassedTripletsDates);

        }

        System.out.println("\n************************************************SITES***************************************");
        for (String site : siteItsCellsWithPassedDates.keySet())
        {
            System.out.println("\n********************Site="+site+" ***********************");
            for (String cellName : siteItsCellsWithPassedDates.get(site).keySet())
            {
                System.out.println("\nCellName="+cellName);
                System.out.println(siteItsCellsWithPassedDates.get(site).get(cellName));
            }
            System.out.println("***********************************************************");
        }
        System.out.println("********************************************************************************************");
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T10:58:35.233

首先，我会远离内存效率更高的`array[boolean]`a `BitSet`，因为我希望它在您的情况下也会更快。因为它将更好地利用缓存。请参阅[boolean[] 与 BitSet：哪个更有效？](https://stackoverflow.com/questions/605226/boolean-vs-bitset-which-is-more-efficient)

对于算法：

遍历数据结构。当你遇到第一个`true`时，记住它的位置 ( `start`) 直到你到达 a `false`。这是位置`end` 那时你有一个连续的`true`值区间的开始和结束，这基本上是你的结果。你得到你的子集从`start`to开始`end - n`。

重复直到你的数据结构结束

您甚至可以通过启动 n 个进程来实现并行化，每个进程处理数组的不同部分，从段开始`false`后的第一个值开始，一直持续到段结束，直到第一个`false`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T11:13:04.200

最简单的算法是检查从索引 x 开始的 N 个值。如果至少有一个false，那么你可以直接去索引x+N。否则你可以检查索引 x+1；如果没有有效的序列，那么您将检查 size/N 个单元格。

在伪代码中：

```
int max = array.length - N;
int index = 0;
boolean valid = true;
while (index < max) {
   valid = true;
   for (check = index; check<index+N; check++){
      valid = valid && array[check];
   }
   if (valid) {
      // you got a continous sequence of true of size N
      ;
      index++;
   } else {
      index = index + N;
   }      
} 
```

此外，使用 BitSet 而不是数组，您可以使用[nextClearByte](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/BitSet.html#nextClearBit%28int%29)来获取下一个 false 的索引。与前一个假减去 N 的差值表示 N 为真的序列数（前一个假初始值为 -1）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T10:33:03.957

我建议您创建一个字符串生成器，并为添加到布尔数组的每个“真”值附加 1，为每个添加的“假”附加 0。因此，您的字符串生成器将具有 1 和 0 的序列。然后只需使用 indexOf("111") 来获取三个连续“真”值的起始索引，它将是字符串构建器和布尔数组中的起始索引。

# c++ - 我应该更喜欢在类方法中使用静态类变量还是静态变量？

> ID：12817048
> 
> 赞同：0
> 
> 时间：2012-10-10T10:19:13.537
> 
> 标签：c++, static, static-members

问题是，什么是最好的或更好的做法。假设我有一个函数，它属于某个类，这个函数需要使用一些静态变量。有两种可能的方法 - 将此变量声明为类的成员：

```
class SomeClass
{
public:
    ....
    void someMethod();
private:
    static int m_someVar;
};

SomeClass::someMethod()
{
    // Do some things here
    ....
    ++m_someVar;
} 
```

或者在函数内部声明它。

```
class SomeClass
{
public:
    ....
    void someMethod();
};

SomeClass::someMethod()
{
    static int var = 0;
    ++m_someVar;
    // Do some things here
    ....
} 
```

我可以看到第二种变体的一些优势。它提供了更好的封装并更好地隔离了实现的细节。所以在其他类中使用这个函数可能会更容易。如果这个变量只能由单个函数修改，那么它可以防止其他方法导致一些错误的数据损坏。

虽然很明显，当您需要在多个方法（类函数）之间共享静态变量时，第一个变体是唯一使用的变体，但问题与静态变量应仅用于单个函数的情况有关。在这种情况下，第一个变体有什么优势吗？我只能考虑一些与多线程相关的东西......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T10:25:04.883

这很简单 -`static`如果逻辑上属于类（有点像），则使用成员，如果逻辑上属于函数（ ），则`instanceCounter`使用本地成员。`static``numberOfTimesThisMethodWasCalled`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T10:25:47.297

选择`static`与否完全取决于上下文。如果一个特定的变量需要在一个类的所有实例中是通用的，你就让它`static`.

但是，如果一个变量只需要在函数中可见并且需要在函数的每次调用中都是通用的，那么只需将其设为局部`static`变量即可。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T10:26:15.807

函数中静态数据成员和静态变量的区别在于，第一次在启动时初始化，第二次在函数第一次被调用时（惰性初始化）。

当在多线程应用程序中使用函数时，延迟初始化可能会产生问题，如果设计不需要它，我更喜欢使用静态成员。

# jquery - html - 单击时无法聚焦输入

> ID：12817053
> 
> 赞同：1
> 
> 时间：2012-10-10T10:19:20.423
> 
> 标签：jquery, html, css, jquery-plugins

嗨，stackoverflow 的伟大人物，

我的输入框有问题，我无法单击它，这意味着我无法在其中输入任何内容。

[FMSSB.COM](http://fmssb.com/interactive/xavian/altwww-v2)

输入框在第 8 张幻灯片中。使用鼠标导航到第 8 张幻灯片。

我使用了 2 个 jquery 插件，如下所示。iDangero.us 移动触摸滑块 Malibu 自定义滚动条

我还将 z-index 设置为 1000，这应该将它放在其余部分之上，但它仍然不起作用。

但是，当您反复按 Tab 键时，您可以到达输入框并在其中输入值。

我希望我能传达我的信息。

谢谢。

PS 请注意它在大屏幕上看起来很奇怪，因为我没有适合更大窗口屏幕的样式。到目前为止，它适用于 1280 像素宽度的屏幕。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T05:39:12.713

### 这是因为 Swiper

这`Swiper 1.3 - Mobile Touch Slider`将使一切都保持不变/不可点击。因此，您需要将属性设置`simulateTouch`为`false`. 这将允许 Swiper 忽略鼠标事件。

在你的所有`.swipe()`函数中，给出这个参数。

```
simulateTouch: false 
```

当您启动 Swiper 时，请使用以下内容：

```
var mySwiper = new Swiper('.swiper-container', { 
    speed:750, 
    mode:'vertical',
    simulateTouch: false
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T10:37:03.060

我只是想确定一些事情，你提到你设置了`z-index: 1000;`但你设置了`position: absolute;`?? 该`z-index`属性仅适用于`position`设置为的属性`absolute`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-28T10:24:44.913

我在这样的新版本滑块上解决了这个问题。我花了很长时间才达到这个

```
 $('.swiper-slide select').on('mousedown touchstart MSPointerDown', function(e){
           e.stopPropagation();
   }); 
           $('.swiper-slide input').on('mousedown touchstart MSPointerDown', function(e){
           e.stopPropagation();
   }); 
           $('.swiper-slide textarea').on('mousedown touchstart MSPointerDown', function(e){
           e.stopPropagation();
   }); 
```

# c# - 如何用c#（文本文件）制作单独的行

> ID：12817055
> 
> 赞同：-1
> 
> 时间：2012-10-10T10:19:27.513
> 
> 标签：c#, split, streamreader, readline

我制作这个应用程序是为了好玩，但我有一个问题

我希望在单独的行中读取此字符串/文件。

这是文件（不是整个文件）：

```
1ChampSelectPack.Ahri.mp31ChampSelectPack.Akali.mp31ChampSelectPack.Alistar.mp31ChampSelectPack.Amumu.mp31ChampSelectPack.Anivia.mp31ChampSelectPack.Annie.mp31ChampSelectPack.Ashe.mp31ChampSelectPack.Blitzcrank.mp31ChampSelectPack.Brand.mp31ChampSelectPack.Caitlyn.mp3 
```

这就是我到目前为止得到的：

```
 List<SoundPath> paths = new List<SoundPath>();
            StreamReader reader = File.OpenText("C:/Users/Esat/Documents/Visual Studio 2010/Projects/WikiLoL/WikiLoL/lolSoundBoard/1ChampSelectPack/files.txt");

            while (!reader.EndOfStream)
            {

                SoundPath path = new SoundPath();
                path.Path = reader.ReadLine();
                paths.Add(path);
            }

            reader.Close();

            return paths; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T11:11:35.327

不确定这是否是您想要的：

```
"YourString".Split(new string[] {"mp3"}, StringSplitOptions.None) 
```

之后您必须在每一行附加“mp3”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T10:23:27.390

您可以使用拆分 .mp3 并在结果数组的每个元素中添加 .mp3 来做到这一点。

```
string text = File.ReadAllText("C:/Users/Esat/Documents/Visual Studio 2010/Projects/WikiLoL/WikiLoL/lolSoundBoard/1ChampSelectPack/files.txt");
string[] lines = text.Split(new string[] { ".mp3" }, StringSplitOptions.RemoveEmptyEntries);
for (int i = 0; i < lines.Length; i++)
    lines[i] = lines[i] + ".mp3"; 
```

# ios - itms-services://?action=download-manifest 在 IIS 中不起作用

> ID：12817057
> 
> 赞同：3
> 
> 时间：2012-10-10T10:19:31.187
> 
> 标签：ios, xcode, iis

我已经创建了一个 ios 应用程序，并让选定的设备在 idevices 浏览器 safari 上下载和安装。所以创建一个这样的链接：

```
 <a href="itms-services://?action=download-manifest&url=http://myserver.com/Info.plist"> 
```

当我单击它时，会弹出一条消息“无法连接到 myserver.com”。

然后我发现 IIS 缺少 MimeType，所以我添加回它。

```
 .ipa application/octet-stream
 .plist text/xml 
```

但是最后当我点击它时根本没有反应，为什么？我怀疑 info.plist 设置是错误的或什么的。

这是我的 info.plist 设置：

```
 <?xml version="1.0" encoding="UTF-8"?>
  <!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
  <plist version="1.0">
   <dict>
<key>AppStoreFileSize</key>
<integer>4329818</integer>
<key>ApplicationProperties</key>
<dict>
    <key>ApplicationPath</key>
    <string>http://myserver.com/Apps.ipa</string>
    <key>CFBundleIdentifier</key>
    <string>com.app.app</string>
    <key>IconPaths</key>
    <array>
        <string>http://myserver.com/icon.png</string>
        <string>http://myserver.com/icon.png</string>
        <string>http://myserver.com/icon@2x.png</string>
        <string>http://myserver.com/icon-72.png</string>
    </array>
    <key>SigningIdentity</key>
    <string>CSR Certificate</string>
</dict>
<key>ArchiveVersion</key>
<integer>2</integer>
<key>CreationDate</key>
<date>2012-10-10T09:02:39Z</date>
<key>Name</key>
<string>AppName</string>
<key>SchemeName</key>
<string>AppName</string> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-16T19:38:33.347

您的代码需要看起来像这样

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
        <key>items</key>
        <array>
                <dict>
                        <key>assets</key>
                        <array>
                                <dict>
                                        <key>kind</key>
                                        <string>software-package</string>
                                        <key>url</key>
                                        <string>http://www.example.com/test.ipa</string>
                                </dict>
                        </array>
                        <key>metadata</key>
                        <dict>
                                <key>bundle-identifier</key>
                                <string>com.name.name</string>
                                <key>bundle-version</key>
                                <string>1.0</string>
                                <key>kind</key>
                                <string>software</string>
                                <key>title</key>
                                <string>Name</string>
                        </dict>
                </dict>
        </array>
</dict>
</plist> 
```

记得改：

```
Bundle Identifier= <string>com.company.name</string>
Installer Name= <string>Name</string>
Ipa Download= <string>http://www.example.com/test.ipa</string> 
```

* * *

更改为`<string>http://www.example.com/test.ipa</string>`您安装 ipa 的位置。创建您的 Install.plist 或 Start.plist，然后进入移动 safari 并输入：`itms-services://?action=download-manifest&url=http://www.example.com/whatever.plist` 它应该先下载它，下载时可能会出现一些错误。请记住，ipa 需要有效的 UDID= 唯一设备标识。

希望这有帮助。

最好的问候塞拉斯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-13T09:21:58.090

您必须对 .plist 文件中的所有 url 使用 Https

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-01T22:11:58.450

从 iOS8 开始，不再接受未加密的 plist 下载。

因此，您需要一个有效的 ssl 证书并将方案更改为 https。例如，您可以使用 amazon s3 进行测试。

# gcc - CMake链接共享库-找不到lOgreMain

> ID：12817060
> 
> 赞同：4
> 
> 时间：2012-10-10T10:19:43.043
> 
> 标签：gcc, linker, cmake, shared-libraries, ogre

我已经构建了自己的 Ogre3D [http://ogre3d.org](http://ogre3d.org)二进制文件，现在我想将我在 Qt 中的项目链接到它们（我使用 CMake 作为我的构建工具）。这是我的`CMakeLists.txt`文件：

```
project(ogre_face_test)
cmake_minimum_required(VERSION 2.8)
aux_source_directory(. SRC_LIST)
add_executable(${PROJECT_NAME} ${SRC_LIST})

include_directories( "/home/XXX/programming/SDKs/OGRE_1.8.1_BUILD/include" "." )

link_directories("/home/XXX/programming/SDKs/OGRE_1.8.1_BUILD/lib")
target_link_libraries( ogre_face_test "OgreMain" ) 
```

在`.../BUILD/lib`目录中，我有 : 等`libOgreMain.so`文件`libOgreMain.so.1.8.1`。

我在 Qt Creator 中链接时收到此错误：

```
/usr/bin/cmake -H/home/XXX/programming/c++/ogre_face_sample/ogre_face_test -B/home/XXX/programming/c++/ogre_face_sample/ogre_face_test-build --check-build-system CMakeFiles/Makefile.cmake 0
/usr/bin/cmake -E cmake_progress_start /home/XXX/programming/c++/ogre_face_sample/ogre_face_test-build/CMakeFiles /home/XXX/programming/c++/ogre_face_sample/ogre_face_test-build/CMakeFiles/progress.marks
make -f CMakeFiles/Makefile2 all
make[1]: Entering directory `/home/XXX/programming/c++/ogre_face_sample/ogre_face_test-build'
make -f CMakeFiles/ogre_face_test.dir/build.make CMakeFiles/ogre_face_test.dir/depend
make[2]: Entering directory `/home/XXX/programming/c++/ogre_face_sample/ogre_face_test-build'
cd /home/XXX/programming/c++/ogre_face_sample/ogre_face_test-build && /usr/bin/cmake -E cmake_depends "Unix Makefiles" /home/XXX/programming/c++/ogre_face_sample/ogre_face_test /home/XXX/programming/c++/ogre_face_sample/ogre_face_test /home/XXX/programming/c++/ogre_face_sample/ogre_face_test-build /home/XXX/programming/c++/ogre_face_sample/ogre_face_test-build /home/XXX/programming/c++/ogre_face_sample/ogre_face_test-build/CMakeFiles/ogre_face_test.dir/DependInfo.cmake --color=
make[2]: Leaving directory `/home/XXX/programming/c++/ogre_face_sample/ogre_face_test-build'
make -f CMakeFiles/ogre_face_test.dir/build.make CMakeFiles/ogre_face_test.dir/build
make[2]: Entering directory `/home/XXX/programming/c++/ogre_face_sample/ogre_face_test-build'
Linking CXX executable ogre_face_test
/usr/bin/cmake -E cmake_link_script CMakeFiles/ogre_face_test.dir/link.txt --verbose=1
/usr/bin/c++       CMakeFiles/ogre_face_test.dir/main.cpp.o CMakeFiles/ogre_face_test.dir/FacialAnimation.cpp.o  -o ogre_face_test -rdynamic -lOgreMain 
/usr/bin/ld: cannot find -lOgreMain
collect2: error: ld returned 1 exit status
make[2]: *** [ogre_face_test] Error 1
make[2]: Leaving directory `/home/XXX/programming/c++/ogre_face_sample/ogre_face_test-build'
make[1]: *** [CMakeFiles/ogre_face_test.dir/all] Error 2
make[1]: Leaving directory `/home/XXX/programming/c++/ogre_face_sample/ogre_face_test-build'
make: *** [all] Error 2 
```

**编辑**

另一方面，如果我使用`qmake`而不是`CMake`这个文件：

```
TARGET = qt_test_1
TEMPLATE = app

SOURCES += main.cpp\
        FacialAnimation.cpp

HEADERS  += FacialAnimation.h

INCLUDEPATH += /usr/include\
            /home/monkey/programming/SDKs/OGRE_1.8.1_BUILD/include
DEPENDPATH += /usr/include
LIBS += -L/home/monkey/programming/SDKs/OGRE_1.8.1_BUILD/lib -lOgreMain 
```

它链接得很好。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T12:25:40.650

CMake 文档说：

> *   link_directories：指定链接器将在其中查找库的目录。
>     
>     
>     
>     ```
>     link_directories(directory1 directory2 ...) 
>     ```
>     
>     
>     
>     指定链接器应在其中搜索库的路径。**该命令仅适用于调用后创建的目标。**由于历史原因，赋予此命令的相对路径不变地传递给链接器（与许多相对于当前源目录解释它们的 CMake 命令不同）。

（强调我的）所以你必须在调用`add_executable`.

# c# - Regex Scipt 需要删除字符串中的字符模式

> ID：12817066
> 
> 赞同：-3
> 
> 时间：2012-10-10T10:19:56.703
> 
> 标签：c#, regex

我有马名，我希望通过从名称末尾删除字母 NZ 来更改这些名称。

例如，需要将 HARRY NZ 更改为 HARRY。

这个 NZ 并不总是出现在名称的末尾。

我是一个完全的新手，所以我需要确切的正则表达式条目或 C# 条目，以便我可以复制和粘贴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T10:25:22.950

如果它总是只是`_NZ`，你真的不需要正则表达式来从名称中删除它，你可以这样做

```
name = name.Replace ( " NZ", String.Empty ); 
```

该[`String.Replace()`](http://msdn.microsoft.com/en-us/library/fk49wtc1.aspx)函数将简单地替换`_NZ`为长度为 0 的字符串，从而有效地`_NZ`从名称中删除。这假定`_NZ`总是可以替换为任何名称，无论其在名称中的位置如何。

如果有一些关于何时`NZ`可以删除的规则，那么您将需要一个正则表达式，但您需要指定这些规则。

（下划线代表上面的空格。）

# java - Google Datastore 的类似“更新”行为

> ID：12817068
> 
> 赞同：2
> 
> 时间：2012-10-10T10:20:07.263
> 
> 标签：java, google-app-engine, google-cloud-datastore

有没有一种方法可以查询 Google Datastore，其行为方式与带有条件的 SQL“更新”查询相同。或者我应该分两部分执行此任务 - 检索符合指定条件的存储实体，更改适当的属性并发出批量请求以保存更改的实体？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T17:35:50.180

您无法在 Google App Engine 中进行此类查询。您需要首先获取要更新的实体，然后修改它们并将它们存储回数据存储区。

# java - 关于选择选择框

> ID：12817069
> 
> 赞同：1
> 
> 时间：2012-10-10T10:20:10.757
> 
> 标签：java, javascript, jquery

我提出了一个问题（我的回答），其中一位积极参与者给出了一个绝妙的答案，这里是那个链接：[SelectBox](http://jsfiddle.net/sushanth009/2mnem/3/)。

我试过了，这里是链接：[我的问题](https://stackoverflow.com/questions/12814312/select-and-unselect-all-checkboxes/12814465#comment17332587_12814465)

如果答案会更好

*   默认情况下，Apple 和 Cat（将一直被选中）的默认值将显示在文本框中。
*   选择任何复选框（除了：start & stopall，无论是单、双或三），相应的复选框值必须显示在文本框中，如 Apple、BallElephant 或 CatDogElephant。
*   将一次选择 startall 或 stopall。

任何投入将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T10:30:51.943

有一个看起来像你想要的[Chosen jquery 插件。](http://harvesthq.github.com/chosen/)

否则，您可以将输入字段设为只读，并在单击复选框时使用 js 函数更新其值。

# bash - 在 base_aliases 函数上获得意外的文件结尾

> ID：12817072
> 
> 赞同：0
> 
> 时间：2012-10-10T10:20:15.820
> 
> 标签：bash, function

试图弄清楚为什么我的 ~/.bash_aliases 中的这个函数会导致错误。

```
function kill-xbmc () { xbmcpid=`ps aux | grep "[x]bmc" | awk "{printf "%s ",$2}"`; kill -9 ${xbmcpid} } 
```

它不断产生相同的文件结尾错误。我似乎看不到我缺少一对 {} 或 "" 标记或任何过于明显的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T10:24:53.520

尝试这个：

```
function kill-xbmc () { xbmcpid=`ps aux | grep "[x]bmc" | awk '{printf "%s ",$2}'`; kill -9 ${xbmcpid}; } 
```

函数中的最后一条语句没有结束，`;`因此关闭`}`作为最后一条语句的一部分。脚本的其余行被假定为函数的一部分，因此当没有找到匹配的右大括号时出现“意外的文件结尾”错误。

我还更改了您的`awk`论点的引号。您对嵌套引号使用相同的引号字符，因此该字符串被过早终止。

```
awk "{printf "%s ",$2}"
    ---------  | ------
        |      |     |
       s1      |    s2   
               |
         %s outside string 
```

请注意，我使用单引号作为外部单引号以确保它`$2`不会被 shell 扩展。

# lucene - 在休眠搜索中加入查询

> ID：12817079
> 
> 赞同：0
> 
> 时间：2012-10-10T10:20:35.253
> 
> 标签：lucene, hibernate-search

我想写一个像这样的lucene查询

```
" from activity where metaentityByEntity.id in(select metaentityByEntity.id from userentity where user.id=1)" 
```

我的域类是：

```
public class Activity implements java.io.Serializable {

    private Long id;
    private Date timeStamp;
    private User user;
    @IndexedEmbedded
    private Metaentity metaentityByEntity;
}

public class Userentitydetail implements java.io.Serializable {

    private Long id;
    private Date timeStamp;
    private Metaentity metaentityByEntity;
    @IndexedEmbedded
    private User user;
    private Metaentity metaentityByProjectId;
    private byte unfollow;
    private Byte isAssociated;
} 
```

但是如何编写从多个索引中搜索的 lucene 查询呢？基本上我在做休眠搜索。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T22:57:35.520

Lucene 不是关系数据库，所以简短的回答是您不应该尝试进行连接；您的特定用例恰好是可以实现的，因为您的查询可以大大简化。

只需在链接后面的字段上创建一个查询：

```
QueryBuilder queryBuilder = fullTextSession.getSearchFactory()
    .buildQueryBuilder()
    .forEntity( Activity.class )
    .get();

Query query = queryBuilder.keyword()
    .onField( "metaentityByEntity.user.id" )
    .ignoreAnalyzer()
    .matching( 1 )
    .createQuery(); 
```

您必须调整一些细节，因为您省略了一些映射细节；例如，它可能需要

```
.matching( "1" ) 
```

反而。

# java - 需要帮助来理解代码

> ID：12817082
> 
> 赞同：-3
> 
> 时间：2012-10-10T10:20:50.590
> 
> 标签：java, unix, shell-exec

```
ProcessBuilder pb = new ProcessBuilder("myshellScript.sh", "myArg1", "myArg2");
     Map<String, String> env = pb.environment();
     env.put("VAR1", "myValue");
     env.remove("OTHERVAR");
     env.put("VAR2", env.get("VAR1") + "suffix");
     pb.directory(new File("myDir"));
     Process p = pb.start(); 
```

帮助我理解变量。像 (VAR1,myvalue),othervar,mydir

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T10:21:59.480

```
pb.environment() 
```

包含当前会话的环境变量。要运行此过程，您需要添加和删除变量。当 process.start() 被调用时，它将能够使用它们

引用[文档](http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html)

> 环境，它是从变量到值的系统相关映射。初始值是当前进程环境的副本（参见 System.getenv()）。

一般来说，yoru 代码在修改的环境下运行带有 MyArg1 和 MyArg2 参数的 myshellScript.sh。

# javascript - 为 img 和 input 元素添加自定义 id 属性

> ID：12817090
> 
> 赞同：2
> 
> 时间：2012-10-10T10:21:13.177
> 
> 标签：javascript, ckeditor

我正在尝试为 ckeditor 3.6.4 中的每个 img & input 元素添加自定义 id 属性。到目前为止，我已经添加了 dataProcessor.htmlFilter 来处理这样的 id 属性

```
 CKEDITOR.on( 'instanceReady', function(event) {     
            var editor = CKEDITOR.instances.editor;

            editor.dataProcessor.htmlFilter.addRules(
            {
                elements: {
                    $: function (element) {
                        if ( (element.name == 'img' || element.name == 'input') && CKEDITOR.instances.editor.mode == 'wysiwyg' ) {
                            if (!element.attributes.id){
                                var g = createID();
                                alert('new id: ' + g);
                                element.attributes.id = g;
                            }
                        }

                    }
                }
            });
        }); 
```

当我在可视化编辑器中添加一个新的文本字段时，我确实得到了一个新的 id。但是如果我设置为源模式，模式仍然是“所见即所得”而不是“源”，它会给出一个新的 ID。

如何防止双重行动？

* * *

做了一些测试。添加了这个

```
CKEDITOR.instances.editor.on('mode', function() {
            // Code to execute when the user switches editing modes
                alert('Changed to: ' + CKEDITOR.instances.editor.mode);
            }); 
```

在 htmlFilter 规则之后以某种方式触发。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T01:11:39.220

您可以尝试在规则中添加对编辑器模式的检查。

```
if ( (element.name == 'img' || element.name == 'input') && editor.mode == "wysiwyg" ) {
    if (!element.attributes.id){
        var g = createID();
        alert('new id: ' + g);
        element.attributes.id = g;
    }
} 
```

我不确定“编辑器”是否是要使用的正确对象名称，您可能想要使用 `CKEDITOR.currentInstance.mode`
还有一种`getMode()`方法。

* * *

以下是提到的项目的一些 api 参考：
[`mode`property](http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.editor.html#mode)
[`currentInstance`属性](http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.html#.currentInstance)
[`getMode()`方法](http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.editor.html#getMode)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T12:48:07.600

与计划 B 一起去

自定义所需的小部件并在插件中添加 id 属性。简单快捷。

# android - Android 布局自身重叠

> ID：12817092
> 
> 赞同：1
> 
> 时间：2012-10-10T10:21:20.843
> 
> 标签：android, android-layout

我在我的应用程序中使用片段。下面是我的应用程序的屏幕截图。活动启动时一切看起来都很好。但是，当我更改屏幕方向时，布局会在滚动时重叠。有什么想法有什么问题吗？

**编辑（解决方案）：**
我发现出了什么问题。在方向更改时添加了一个新片段。我之前使用的是`fragmentTransaction.add(...)`，我用`replace`方法替换了它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-06-18T20:42:37.700

为了未来的游客的理解...

您很可能将片段添加到活动的 onCreate() 中。

当您的设备旋转时，您的活动将被销毁并重新创建，但它也会重新创建任何添加的片段。

考虑到这两点...

1.  onCreate 被调用，你添加一个片段到你的活动中。你有一个片段。
2.  你旋转屏幕。
3.  活动被销毁并重新创建。您的片段被销毁并重新创建。你还有一个片段。
4.  您的活动调用 onCreate() 作为其重新创建的一部分，这会向您的活动添加一个片段。你现在有两个片段。

如果您的一个或两个片段具有透明背景，则两者可能会同时显示，就像这里的情况一样。

使用替换而不是添加（您已经完成），或者更好的是，如果`savedInstanceState`为空，则仅在 onCreate() 中添加片段。如果它为空，则意味着它是第一个 onCreate() 调用。

# objective-c - 如何对 NSMutableDictionary 进行排序

> ID：12817093
> 
> 赞同：0
> 
> 时间：2012-10-10T10:21:30.610
> 
> 标签：objective-c, ios, nsmutabledictionary

我正在使用`NSMutableDictionary`保存数据并将其加载到一个`UITableview`，这就是字典的样子：

```
 041517ba8e0542b14e96469d87bba694b42db15a =     (
    "{\n    size             = {360, 480}\n    CGImage.size     = {480, 360}\n    imageOrientation = UIImageOrientationRight\n}",
    041517ba8e0542b14e96469d87bba694b42db15a,
    "2012-10-10 10:17:13 +0000"
);
3582a7ee9ce2e232704c3e51f27bdc9274e965c6 =     (
    "{\n    size             = {360, 480}\n    CGImage.size     = {480, 360}\n    imageOrientation = UIImageOrientationRight\n}",
    3582a7ee9ce2e232704c3e51f27bdc9274e965c6,
    "2012-10-10 10:12:57 +0000",
    "Plastic Cup"
);
3ce8b24a9da8916f2d669f625c9eb28e77b710ec =     (
    "{\n    size             = {360, 480}\n    CGImage.size     = {480, 360}\n    imageOrientation = UIImageOrientationRight\n}",
    3ce8b24a9da8916f2d669f625c9eb28e77b710ec,
    "2012-10-10 10:12:48 +0000",
    Headphones
);
9a2fd3bbd741e52cfc31d2a341ab79241c3048db =     (
    "{\n    size             = {360, 480}\n    CGImage.size     = {480, 360}\n    imageOrientation = UIImageOrientationRight\n}",
    9a2fd3bbd741e52cfc31d2a341ab79241c3048db,
    "2012-10-10 10:11:58 +0000",
    "Men's Wrist Watch"
);
b7b8646cb8548e6c8cc1c83b90b9d8d3b265ed5b =     (
    "{\n    size             = {360, 480}\n    CGImage.size     = {480, 360}\n    imageOrientation = UIImageOrientationRight\n}",
    b7b8646cb8548e6c8cc1c83b90b9d8d3b265ed5b,
    "2012-10-10 10:14:46 +0000",
    Dog
);
c30fe8901a4e14da415981ade707330bda85c2bf =     (
    "{\n    size             = {360, 480}\n    CGImage.size     = {480, 360}\n    imageOrientation = UIImageOrientationRight\n}",
    c30fe8901a4e14da415981ade707330bda85c2bf,
    "2012-10-10 10:14:32 +0000",
    "Dog Olive"
);
d47987a197cc9b383921ef021d5469cd69e02dec =     (
    "{\n    size             = {360, 480}\n    CGImage.size     = {480, 360}\n    imageOrientation = UIImageOrientationRight\n}",
    d47987a197cc9b383921ef021d5469cd69e02dec,
    "2012-10-10 10:12:24 +0000",
    Blurry
);
d8363eb358ce8a6266d9dae37b19628d8be8e604 =     (
    "{\n    size             = {360, 480}\n    CGImage.size     = {480, 360}\n    imageOrientation = UIImageOrientationRight\n}",
    d8363eb358ce8a6266d9dae37b19628d8be8e604,
    "2012-10-10 10:13:08 +0000",
    "Analog Wristwatch"
);
e849e2f6d45a787fff42486cd8cb4d45499b2ef4 =     (
    "{\n    size             = {360, 480}\n    CGImage.size     = {480, 360}\n    imageOrientation = UIImageOrientationRight\n}",
    e849e2f6d45a787fff42486cd8cb4d45499b2ef4,
    "2012-10-10 10:15:14 +0000",
    "Red Sports Car"
);
f0c5598cd2a5314d64bd25dffbef2c98be78ac0f =     (
    "{\n    size             = {360, 480}\n    CGImage.size     = {480, 360}\n    imageOrientation = UIImageOrientationRight\n}",
    f0c5598cd2a5314d64bd25dffbef2c98be78ac0f,
    "2012-10-10 10:12:40 +0000",
    "Laptop Computer Keyboard"
); 
```

它包含一张照片，但不是按顺序（添加到字典中）我想要的是`UITableView`按添加这些照片的顺序绘制。

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T10:26:12.380

字典是未排序的集合。

您应该真正考虑将字典或仅将键放入数组中。

然后您可以使用数组进行排序并使用键来引用字典。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T10:25:19.720

每次将照片添加到字典时，使用`NSMutableArray`for 键并为其添加一个键。`NSMutableArray`阵列将保持秩序

# jquery - 滚动上的固定 div 位置并非在所有条件下都有效

> ID：12817095
> 
> 赞同：0
> 
> 时间：2012-10-10T10:21:34.167
> 
> 标签：jquery, css, position

大家好，我正在制作一个 div，它将在滚动时具有固定位置看这里

[现场演示](http://jsfiddle.net/sebtL/1/)

和代码是

```
var div = $('.PropertyContainer');
    var start = $(div).offset().top;

    $.event.add(window, "scroll", function () {
        var p = $(window).scrollTop();
        var height = $(div).height();
        $(div).css('position', ((p) > start) ? 'fixed' : 'static');
        $(div).css('top', ((p) > start) ? '0px' : '');
        $(div).css('min-height', ((p) > start) ? '336px' : '70%');
        $('.FormWrapper').css('margin-left', ((p) > start) ? '181px' : '');
    }); 
```

请帮帮我，我正在研究这两天，但没有做任何事情

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T11:53:48.203

问题是由*PropertyContainer*的高度引起的。这是页面上最大的元素，因此定义了垂直滚动条。

但是当您开始滚动时，您将他的位置更改为“固定”。此时，*PropertyContainer*的高度不再计入页面的总高度，页面垂直收缩，导致滚动条很快消失。

然后你陷入无限循环：

滚动条消失 > scrollamount=0 > 位置再次变为静态 > 页面变高 > 滚动条重新出现 > ...

**可能的解决方案：**

当您使*Formwrapper*更高以便*PropertyContainer*不再定义页面高度时，您的脚本就可以工作。

[http://jsfiddle.net/willemvb/CdpeK/](http://jsfiddle.net/willemvb/CdpeK/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T10:32:54.403

您是否尝试过[使用来固定您的元素](http://www.w3.org/Style/Examples/007/menus)？这应该比 JavaScript 工作得更好更快，尽管如果你的目标是移动设备，这个选项是没有问题的（它们还不支持固定定位，至少旧版本的 Android 和 iPhone 不支持）。

# sql - 通过 SSIS 在 SQL 中插入 XML 文件

> ID：12817099
> 
> 赞同：0
> 
> 时间：2012-10-10T10:21:51.047
> 
> 标签：sql, sql-server, sql-server-2008, ssis

我有这个程序

```
ALTER proc [dbo].[adenti] 
(
   @entra nvarchar(max)
)
as 
DECLARE @sql varchar(4000); 
SET @sql = 'INSERT INTO provaxml (arquivo) SELECT CAST(BulkColumn AS XML) FROM OPENROWSET(BULK ''' + @entra + ''', SINGLE_BLOB) as arquivo'; 
EXEC( @sql ); 
```

上面的代码有效。

是否可以使用*集成服务*将路径中的所有 XML 文件插入到 SQL 表中？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-10T18:04:47.067

您可以采用两种不同的方法。

第一个是作为 user569711 概述并使用 ForEach Enumerator 并调用您现有的存储过程。这样做的好处是您的行为应该与您当前所经历的完全一样，并且您的测试只需要专注于确保 SSIS 包选择正确的文件。

第二种是使用 SSIS 的开箱即用功能来处理导入 BLOB 类型。

# 控制流

您将需要根据您的方法定义 1 到 2 个变量。两者都是字符串数据类型。我创建了`SourceFolder`和`CurrentFileName`. 前者定义了文件的来源并在任一方法中使用。后者在 ForEach 循环容器中用于捕获“当前”文件。

![控制流](../Images/9640a56dfa9ddb7651ab1ad689db040c.png)

# 数据流

要使数据流正常工作，您需要将完全限定的文件名列表添加到管道中。最简单的方法是使用脚本转换，作为源并将其添加到所有满足您条件的文件（*.xml）中。

![数据流](../Images/2aa2a91b7b7d66eb69cb572e3d76a28c.png)

## Foreach 循环容器

像这样配置

收藏

![在此处输入图像描述](../Images/d78c99fd4d0ac421b0a32878fd7e0413.png)

变量映射

![在此处输入图像描述](../Images/d30183a6ac0e0ffdba5dd6cf45848f5c.png)

## 执行 SQL 任务

如此配置

![在此处输入图像描述](../Images/9f5ae53b1122c6b51fcdd574be0d9f1f.png)

![在此处输入图像描述](../Images/8fa83ec53b032acbdb9ba294f31e16cb.png)

## 脚本源

此任务会将可用文件添加到数据流中。次要注意，这将遍历与我们配置 Foreach 的方式不同的子文件夹。这是对第三个参数（或省略）的简单更改，使其仅位于顶层。

识别您的变量，使其在脚本任务中可用

![在此处输入图像描述](../Images/00fd642decfde9a21ef572abd513d543.png)

添加适当的输出列。您的长度可能因您的环境而异。

![在此处输入图像描述](../Images/bfdee490fcb8cd5504bf5e035f842484.png)

脚本在这里

```
using System;
using System.Data;
using System.IO;
using Microsoft.SqlServer.Dts.Pipeline.Wrapper;
using Microsoft.SqlServer.Dts.Runtime.Wrapper;

[Microsoft.SqlServer.Dts.Pipeline.SSISScriptComponentEntryPointAttribute]
public class ScriptMain : UserComponent
{

    public override void CreateNewOutputRows()
    {
        string fileMask = string.Empty;
        string sourceFolder = string.Empty;

        fileMask = @"*.xml";
        sourceFolder = this.Variables.SourceFolder;

        foreach (string fileName in Directory.GetFiles(sourceFolder, fileMask, SearchOption.AllDirectories))
        {
            Output0Buffer.AddRow();
            Output0Buffer.FileName = fileName;
            Output0Buffer.SourceName = "Dataflow";
        }
    }
} 
```

## 导入列转换

像这样配置

![在此处输入图像描述](../Images/29a11a33185b0d0a2dabe6beca244807.png)

在此处记下 ID

![在此处输入图像描述](../Images/b524790cf6e81f9b807089737b372b65.png)

将该 ID 绑定到具有名称的列

![在此处输入图像描述](../Images/6746cc3f571d7334d8f490d612c3b2db.png)

## OLE DB 目标

配置。不支持快速加载选项。

![在此处输入图像描述](../Images/7191908fe15514b73ee2cab0f113f9c5.png)

![在此处输入图像描述](../Images/8874c73843b471dcf1e9848c94f09bc5.png)

# 参考

关于使用[导入列转换的好帖子](http://www.bimonkey.com/2009/09/the-import-column-transformation/)

# java - 基于 RCP 功能的应用程序部署：无法获取应用程序服务

> ID：12817100
> 
> 赞同：1
> 
> 时间：2012-10-10T10:21:52.917
> 
> 标签：java, eclipse, deployment, eclipse-plugin, eclipse-rcp

我正在尝试构建基于功能的 RCP 产品，它在 eclipse 中配置时运行完美，但部署失败。打开 eclipse.exe 时，它​​给了我这个错误（在错误日志中）

```
!SESSION 2012-10-10 12:17:59.689 -----------------------------------------------
eclipse.buildId=unknown
java.version=1.7.0_07
java.vendor=Oracle Corporation
BootLoader constants: OS=win32, ARCH=x86_64, WS=win32, NL=en_US
Command-line arguments:  -os win32 -ws win32 -arch x86_64

!ENTRY org.eclipse.osgi 4 0 2012-10-10 12:18:02.303
!MESSAGE Application error
!STACK 1
java.lang.IllegalStateException: Unable to acquire application service. Ensure that the org.eclipse.core.runtime bundle is resolved and started (see config.ini).
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:74)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:622)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:577)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1410)
    at org.eclipse.equinox.launcher.Main.main(Main.java:1386) 
```

有什么建议么？我在构建过程中做错了什么？

# iphone - ios 国际化字体分配

> ID：12817110
> 
> 赞同：0
> 
> 时间：2012-10-10T10:22:31.477
> 
> 标签：iphone, objective-c, ios, fonts, internationalization

我正在开发一个国际化应用程序，问题是：

如果使用英文环境，那么我可以设置像“Helvetica”这样的字体

如果使用中文环境，那么我可以设置中文字体。

有没有办法自动切换字体取决于哪种语言环境？

例如：

我准备了两个字体：en_font和cn_font，判断iOS语言env，如果语言是英文就用en_font，否则用cn_font

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T11:33:36.897

查看：

```
[UITextInputMode currentInputMode]。主要语言

```

# java - java.sql.SQLException：安装 2 年后出现的用户“xx@xx.xx”（使用密码：YES）的访问被拒绝

> ID：12817111
> 
> 赞同：1
> 
> 时间：2012-10-10T10:22:37.423
> 
> 标签：java, mysql, debian, sqlexception, database-permissions

我开始得到

```
java.sql.SQLException: Access denied for user 'xx@xx.xx' (using password: YES) 
```

从 servlet 尝试将新数据添加到数据库时。无论错误如何，数据仍会写入数据库。该数据库已经存在 2 年以上，并且没有对数据库、用户等进行任何更新。我想知道是否有人以前遇到过这个问题。

我试图不惜一切代价避免重新安装mysql。

mysql 日志文件 /var/log/mysql.log 似乎为空。tomcat5.5 日志只有几行信息。

我正在使用 MySQL 5.0.51a-24+lenny1 (Debian) 运行 Tomcat 5.5

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-30T21:41:20.233

我也遇到过同样的情况，可以通过`trim()`对用户名和密码字符串变量进行处理来解决。

```
conn = DriverManager.getConnection(db_url, user.trim(), pass.trim()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T10:55:36.187

只需尝试像这样建立连接：

```
public static Connection getConnection() throws SQLException {
        String driver = "com.mysql.jdbc.Driver";
        String url    = "jdbc:mysql://localhost:3306/dbName"; // Change it to your database name
        String username = "root";
        String password = "yourPassword"; // Change it to your Password
        System.setProperty(driver,"");

        return DriverManager.getConnection(url,username,password);

    } 
```

# jquery - jQuery自动完成renderItem：删除需要将自定义html包装在锚标记中

> ID：12817112
> 
> 赞同：1
> 
> 时间：2012-10-10T10:22:40.620
> 
> 标签：jquery, autocomplete

我正在使用 jQuery 自动完成的 _renderItem 功能来覆盖结果的默认显示。

有没有办法不需要将自定义 html 包装在锚标记中？我问的原因是我的实际自定义 html 在其中包含锚点，并且将整个自定义 html 包装在锚点本身中使它看起来很糟糕。

这一定是可能的？！

当我不将其包装在锚标记中时，FireBug 将返回错误：

```
TypeError: d.item is undefined 
```

[https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js](https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js) 第5行

这是我的自动完成功能...您会看到“附加”功能上没有标签

```
jQuery("#omni-search-input").autocomplete({

                                source: "/json-search/",
                                minLength: 3
                            })
                            .data("autocomplete")._renderItem = function(ul,item)
                            {

                                return jQuery("<li></li>").data("item.autocomplete",item).append("<div class=''>custom html with anchors in and tables and things<div>").appendTo(ul);
                            } 
```

# php - PostgreSQL 和 PHP：在多个模式中存储大文件：BLOB 或 BYTEA

> ID：12817118
> 
> 赞同：2
> 
> 时间：2012-10-10T10:23:09.043
> 
> 标签：php, postgresql, pdo

我需要在 Postgres 数据库中存储大文件（从几 MB 到 1GB）。数据库有多个模式。看起来 Postgres 有 2 个选项来存储大对象：LOB 和 BYTEA。然而，我们似乎遇到了每个选项的问题。

1.  高球。这几乎是理想的，最多可以存储 2GB 并允许流式传输，这样我们在读取 LOB 时就不会达到 PHP 后端的内存限制。但是，所有 blob 都存储在 pg_catalog 中，并且不是架构的一部分。当您尝试使用带有选项 -n 和 -b 的 pg_dump 来仅转储一个带有其 blob 的模式时，这会导致一个大问题。它会正确转储模式数据，然后它包括数据库中的所有 blob，而不仅仅是属于特定模式的 blob。有没有办法使用 pg_dump 或其他一些实用程序来转储单个模式及其 blob？

2.  白茶。这些是按模式正确存储的，因此 pg_dump –n 可以正常工作，但是我似乎找不到流式传输数据的方法。这意味着如果数据大于内存限制，则无法从 PHP 访问数据。

有没有其他方法可以在 Postgres 中存储大数据，允许流式传输并正确使用每个数据库的多个模式？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T10:53:44.553

虽然使用 bytea 不支持流式/文件式 API，但您可以使用它仅获取部分内容，因此它支持“分块”。

您需要将 bytea 列的存储模式设置为“外部”以禁用压缩，然后您可以`substring`在 bytea 列上使用它来仅获取其中的一部分。至少根据文档，这将 DTRT 并仅有效地访问数据库端值的必要部分： [http ://www.postgresql.org/docs/current/static/storage-toast.html](http://www.postgresql.org/docs/current/static/storage-toast.html)

所以创建一个有点像这样的模式：

```
create table media.entity(entity_id serial primary key, content bytea not null);
alter table media.entity alter column content set storage external; 
```

然后从内容中获取 8Kb：

```
select substring(content, 1, 8192) from media.entity where entity_id = 1;
select substring(content, 8193, 8192) from media.entity where entity_id = 1; 
```

不幸的是，TOAST 数据的获取似乎没有计入`explain (buffers on)`计数，因此很难验证数据库是否按照文档所述进行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T13:48:46.717

实际存储大对象的**pg_catalog.pg_largeobject系统表本质上是按***pageno*排序的每个对象 bytea 块的列表，它是从 0 到 N 的顺序块编号。

```
表“pg_catalog.pg_largeobject”
 专栏 | 类型 | 修饰符
--------+----------+------------
 类人 | 类 | 不为空
 页面 | 整数 | 不为空
 数据 | 字节茶 |
索引：
    “pg_largeobject_loid_pn_index”唯一，btree（loid，pageno）

```

这些块的最大大小为 2048 字节（可以更改，但要以服务器重新编译为代价），这对于数百兆字节的 blob 来说非常小。

因此，在您的情况下，一种选择是在您自己的模式中复制类似的结构，可能具有更大的块，并通过遍历`pageno`. 无论如何，通常具有较小的列内容会更好。例如，就`pg_dump`客户端内存要求而言，在单行中很好地处理大字节茶内容并不明显。

# android - Android：在嵌套在垂直线性布局中的水平线性布局中的文本视图之间放置垂直分隔线/分隔线？

> ID：12817123
> 
> 赞同：3
> 
> 时间：2012-10-10T10:23:31.343
> 
> 标签：android, android-layout, android-linearlayout, android-view, textview

对于 android 内容视图，我有一个带有一些文本视图的垂直线性布局，这些文本视图有一些线来划分和分隔垂直元素，这工作正常，xml 在下面。

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >
        <TextView
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:text="@string/A" />                 
        <TextView
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:text="@string/B" />
        <TextView
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:text="@string/C" />    
    </LinearLayout>    
    <View 
         android:background="#ffffff" 
         android:layout_width = "fill_parent"
         android:layout_height="1dip"/>    
    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/D" />
    <View  
         android:background="#ffffff" 
         android:layout_width = "fill_parent"
         android:layout_height="1dip" />
    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/E" />
    </LinearLayout> 
```

现在我想用字符串 A/B/C 在嵌套文本视图中水平放置的文本视图之间添加一条垂直分隔线。当我尝试通过添加硬编码宽度视图来做到这一点时，这条线跨越了父线性布局的整个高度。

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >
        <TextView
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:text="@string/A" />         
        <!--the vertical line separator-->
        <View  
     android:background="#ffffff" 
     android:layout_width = "1dip"
     android:layout_height="fill_parent" />         
        <TextView
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:text="@string/B" />
        <TextView
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:text="@string/C" />    
    </LinearLayout>    
    <View 
         android:background="#ffffff" 
         android:layout_width = "fill_parent"
         android:layout_height="1dip"/>    
    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/D" />
    <View  
         android:background="#ffffff" 
         android:layout_width = "fill_parent"
         android:layout_height="1dip" />
    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/E" />
    </LinearLayout> 
```

对于这个垂直分隔符视图，我尝试`android:layout_height="wrap_content"/>`改用，但显示的结果相同。

有没有办法在此处设置垂直分隔符，通过引入垂直线来分隔文本视图来保留高度？还是我必须选择不同的布局？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T15:29:53.040

另一种选择可能是包括`android:layout_margin`（或单独的`layout_marginTop`and `layout_marginBottom`）以在绘制的垂直线的顶部和底部与相应的水平边缘之间创建一个空间`LinearLayout.`

除此之外，我可能会尝试 a`RelativeLayout,`并调整您的垂直线视图以将其顶部和底部与相邻的一个对齐`TextViews.`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T10:32:14.983

您必须为**LinearLayout**或**Vertical Seperator提供固定高度**

# asp.net - 在 VB.Net 中寻找完美的逻辑

> ID：12817134
> 
> 赞同：-8
> 
> 时间：2012-10-10T10:24:12.700
> 
> 标签：asp.net, vb.net

我有这样的情况，如果数字小于1000，20出现1001-2000，40出现2001-3000，60出现在另一个文本框中

我正在寻找一个合适的公式。

```
If number <= 1000 Then
    Return 20
ElseIf number <= 2000 Then
    Return 40
ElseIf number <= 3000 Then
    Return 60
ElseIf number <= 4000 Then
    Return 80
ElseIf number <= 5000 Then
    Return 100
ElseIf number <= 6000 Then
    Return 120
ElseIf number <= 7000 Then
    Return 140
ElseIf number <= 8000 Then
    Return 160
ElseIf number <= 9000 Then
    Return 180
ElseIf number <= 10000 Then
    Return 200
ElseIf number <= 11000 Then
    Return 220
ElseIf number <= 12000 Then
    Return 240
ElseIf number <= 13000 Then
    Return 260
ElseIf number <= 14000 Then
    Return 280
ElseIf number <= 15000 Then
    Return 300
End If 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T10:54:57.050

这是你的答案：

**VB.Net：**

```
If (number Mod 1000 = 0)
    result = 20 * (number / 1000)
Else
    result = 20 * (number / 1000 + 1) 
```

**C＃：**

```
if (number % 1000 == 0)
    result = 20 * (number / 1000);
else
    result = 20 * (number / 1000 + 1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T10:27:24.807

我不能让它比以下更短：

```
Return ((number \ 1000) + 1) * 20 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T10:37:12.470

首先，您需要将数字四舍五入到最接近的千位，以便我们得到一致的结果。

```
(Math.Ceiling(number/1000)*1000) 
```

然后*假设*你的意思是每次增加 20（我看到评论提到不正确的值），你可以除以 50。

所以：

```
Return (Math.Ceiling(number/1000)*1000) / 50 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T10:53:43.820

您可以使用自定义`Range`类和 a`Dicitonary`来存储范围+值：

```
Function GetValue(number As Int32) As Int32
    Dim rangeValues = New Dictionary(Of Range(Of Int32), Int32)
    rangeValues.Add(New Range(Of Int32)(1000), 20)
    rangeValues.Add(New Range(Of Int32)(1001, 2000), 40)
    rangeValues.Add(New Range(Of Int32)(2001, 3000), 60)
    rangeValues.Add(New Range(Of Int32)(3001, 4000), 80)
    rangeValues.Add(New Range(Of Int32)(4001, 5000), 40)
    rangeValues.Add(New Range(Of Int32)(5001, 6000), 40)
    rangeValues.Add(New Range(Of Int32)(6001, 7000), 60)
    rangeValues.Add(New Range(Of Int32)(7001, 8000), 80)
    rangeValues.Add(New Range(Of Int32)(8001, 9000), 100)
    rangeValues.Add(New Range(Of Int32)(9001, 10000), 120)
    rangeValues.Add(New Range(Of Int32)(10001, 11000), 140)
    rangeValues.Add(New Range(Of Int32)(11001, 12000), 160)
    rangeValues.Add(New Range(Of Int32)(12001, 13000), 180)
    rangeValues.Add(New Range(Of Int32)(13001, 14000), 200)
    rangeValues.Add(New Range(Of Int32)(14001, 15000), 220)

    Dim firstMatchingRange = rangeValues.Keys.
        FirstOrDefault(Function(r) r.Minimum <= number AndAlso r.Maximum >= number)
    If firstMatchingRange IsNot Nothing Then
        Return rangeValues(firstMatchingRange)
    Else
        Throw New ArgumentException("invalid number", "number")
    End If
End Function 
```

这是`Range`课程

```
Public Class Range(Of T As IComparable(Of T))
    Public Sub New()
    End Sub
    Public Sub New(minimum As T, maximum As T)
        minimum = minimum
        maximum = maximum
    End Sub
    Public Sub New(maximum As T)
        maximum = maximum
    End Sub

    ''' <summary>
    ''' Minimum value of the range
    ''' </summary>
    Public Property Minimum() As T
        Get
            Return m_Minimum
        End Get
        Set(value As T)
            m_Minimum = value
        End Set
    End Property
    Private m_Minimum As T

    ''' <summary>
    ''' Maximum value of the range
    ''' </summary>
    Public Property Maximum() As T
        Get
            Return m_Maximum
        End Get
        Set(value As T)
            m_Maximum = value
        End Set
    End Property
    Private m_Maximum As T

    ''' <summary>
    ''' Presents the Range in readable format
    ''' </summary>
    ''' <returns>String representation of the Range</returns>
    Public Overrides Function ToString() As String
        Return [String].Format("[{0} - {1}]", Minimum, Maximum)
    End Function

    ''' <summary>
    ''' Determines if the range is valid
    ''' </summary>
    ''' <returns>True if range is valid, else false</returns>
    Public Function IsValid() As [Boolean]
        Return Minimum.CompareTo(Maximum) <= 0
    End Function

    ''' <summary>
    ''' Determines if the provided value is inside the range
    ''' </summary>
    ''' <param name="value">The value to test</param>
    ''' <returns>True if the value is inside Range, else false</returns>
    Public Function ContainsValue(value As T) As [Boolean]
        Return (Minimum.CompareTo(value) <= 0) AndAlso (value.CompareTo(Maximum) <= 0)
    End Function

    ''' <summary>
    ''' Determines if this Range is inside the bounds of another range
    ''' </summary>
    ''' <param name="Range">The parent range to test on</param>
    ''' <returns>True if range is inclusive, else false</returns>
    Public Function IsInsideRange(Range As Range(Of T)) As [Boolean]
        Return Me.IsValid() AndAlso Range.IsValid() AndAlso Range.ContainsValue(Me.Minimum) AndAlso Range.ContainsValue(Me.Maximum)
    End Function

    ''' <summary>
    ''' Determines if another range is inside the bounds of this range
    ''' </summary>
    ''' <param name="Range">The child range to test</param>
    ''' <returns>True if range is inside, else false</returns>
    Public Function ContainsRange(Range As Range(Of T)) As [Boolean]
        Return Me.IsValid() AndAlso Range.IsValid() AndAlso Me.ContainsValue(Range.Minimum) AndAlso Me.ContainsValue(Range.Maximum)
    End Function
End Class 
```

# image - 如何从图像中提取图层（jpg，png等）

> ID：12817137
> 
> 赞同：7
> 
> 时间：2012-10-10T10:24:15.343
> 
> 标签：image, image-processing, artificial-intelligence, computer-vision, layer

给定一个图像，例如 CakePHP 徽标，如何将这个图像转换回带有图层的 PSD。作为人类，我可以很容易地弄清楚如何将其转换回具有图层的 PSD。我可以看出背景是带有星形边缘的圆形。所以圆形星形部分在后面，蛋糕图像在上面，CakePHP 字样在这两个图像之上。

我可以使用 Photoshop/Gimp 工具将这些图像分成三个图像并填充中间的区域。然后我有三层。

![在此处输入图像描述](../Images/417acdb14af82b65e3085a6d4d6ee72e.png)

作为人类，很容易计算出大多数徽标和图像的分层，并且许多图像具有多个层次，CakePHP 徽标只是一个示例。现实世界中的图像也有层次感，在草的背景上可能会有树的层次。我需要一种从图像转换回分层表示的通用方法，理想情况下是一种软件解决方案。

在没有程序解决方案的情况下，是否有任何论文或研究解决了这个问题或与这个问题相关？我最感兴趣的是将人类构建的图像（例如徽标或网站标题）转换回分层表示。

* * *

我想指出这样做的一些好处，如果您可以自动将此图像转换为分层表示，那么修改图像会更容易。例如，也许你想让蛋糕变小，如果计算机已经在红色背景上分层了蛋糕，你可以缩放蛋糕层。这允许在还没有图层信息的网站上对图像进行图层调整。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T12:29:41.760

当您从图层表示转换为图像时，您会丢失信息。例如，您不知道蛋糕后面背景层的像素值。此外，您不确定图像的哪个部分属于哪个图层。

然而，在某些情况下，至少部分地恢复或估计此信息是可能的。例如，您可以尝试使用[分割](http://en.wikipedia.org/wiki/Segmentation_%28image_processing%29)算法将图像分成“层”。在您的示例中，基于颜色的简单分割可能会起作用。

至于在背景中恢复丢失的像素值，有一种所谓的[修复](http://en.wikipedia.org/wiki/Inpainting)技术，它试图根据图像的包围来估计图像中的丢失区域。

最后，要恢复图像中文本的位置和内容，您可以依靠[光学字符识别](http://en.wikipedia.org/wiki/Optical_character_recognition)(OCR) 方法。

请记住，没有比看起来更复杂的简单算法来解决您的问题。但是，使用上述信息，您可以尝试至少部分自动化您的问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-12T14:58:25.530

如前所述，这是一项不平凡的任务。最终，它可以最简单地表述为：给定由像素*N*组成的图像（或场景，如果是真实照片） ，如何将它们分配给*M*层？

对于分割，这完全是关于您可以使用的*先验*知识，即像素和像素组的哪些属性会给出关于它们所属层的“提示”（我建议使用这个词！）。

甚至考虑仅使用图像中的颜色的最简单情况。我可以生成这 5 个“层”（对于色调值 0、24、90、117 和 118）：

![1](../Images/790d8644e7cf0617b53c76fa923e56b4.png) ![2](../Images/84ba2686fb237817db6dbf8ec32e5f1a.png) ![3](../Images/9c0303ab4e48442e256a459bff3c132f.png) ![4](../Images/3e5a2cc3b1993fccd31f1b7cd49cd3fd.png) ![5](../Images/bbcdfaeff2c04fede253b2f510e2ecb0.png)

使用此代码（在 python/opencv 中）

```
import cv 

# get orginal image
orig = cv.LoadImage('cakephp.png')

# show original 
cv.ShowImage("orig", orig)

# convert to hsv and get just hue
hsv = cv.CreateImage(cv.GetSize(orig), 8, 3) 
hue = cv.CreateImage(cv.GetSize(orig), 8, 1) 
sat = cv.CreateImage(cv.GetSize(orig), 8, 1) 
val = cv.CreateImage(cv.GetSize(orig), 8, 1) 
cv.CvtColor(orig, hsv, cv.CV_RGB2HSV)
cv.Split(hsv,hue,sat,val,None)
#cv.ShowImage("hue", hue)

# loop to find how many different hues are present...
query = cv.CreateImage(cv.GetSize(orig), 8, 1) 
result = cv.CreateImage(cv.GetSize(orig), 8, 1) 
for i in range(0,255):
  cv.Set(query,i)
  cv.Cmp(query,hue,result,cv.CV_CMP_EQ)
  # if a number of pixels are equal - show where they are 
  if (cv.CountNonZero(result)>1000): # <-what is signficant?
    cv.ShowImage(str(i),result)
    cv.SaveImage(str(i)+".png",result)
    cv.WaitKey(-1) 
```

但是，即使在这里，我们也必须根据属于蒙版的像素数来描述什么是“重要的”（在某种程度上我们可能会错过一些颜色）。我们可以开始对相似的颜色进行聚类——但是在什么密度下聚类变得重要？如果它不仅仅是纯色，而是有质感，我们该如何描述呢？或者，推断一层是另一层的一部分，或者在它前面呢？或者，最终，某些层似乎是我们人类所说的“字母”，因此可能都应该是相关的……

计算机视觉中的许多分割研究通常试图解决这个问题并在一个可以有效编码和应用这些先验知识的框架内改进它......

# shell - 运行shell时获取以逗号分隔的数据？

> ID：12817143
> 
> 赞同：-1
> 
> 时间：2012-10-10T10:24:25.853
> 
> 标签：shell, centos

我想在运行 shell 脚本时获取以逗号分隔的数据。查看示例输出；

```
 value1,value2,value3 
```

有什么想法吗？我使用的是centos 5.5。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T11:19:10.973

```
IFS=',' read v1 v2 v3 
```

IFS 是 bash 内置的分隔符变量。

# matlab - 按字母数字顺序加载 MATLAB .mat 文件

> ID：12817146
> 
> 赞同：1
> 
> 时间：2012-10-10T10:24:32.813
> 
> 标签：matlab, sorting, analysis

我目前正在尝试加载许多包含相同变量的 MATLAB 文件，以便制作所有值的矩阵。

这些文件都以数字开头（即 40_analysed.mat），该数字之前是使用正则表达式从不同的原始数据文件中提取的，这意味着我有一个由所有单独的数字（id）组成的向量。

当我尝试使用下面的代码加载值并在单个矩阵中显示所有个人的数据时，文件不是按字母数字加载（即根据 id），而是随机加载。

```
file = dir('*_analysed.mat');
for i=1:length(id);
    load(file(i).name,'means');
    overallThresholds{i} = means;
end
overallMeans = cell2mat(overallThresholds) 
```

我该怎么做才能使结果矩阵的顺序正确？抱歉，如果这个问题没有多大意义，这个问题有点难以表达！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T11:51:30.740

当一个人使用`dir`命令时，并不保证结果将按字母顺序排列。事实上，[手册](http://www.mathworks.com/help/matlab/ref/dir.html)明确指出：

> dir 列出 MATLAB 当前文件夹中的文件和文件夹。结果按操作系统返回的顺序显示。

即使您确实按字母顺序得到了它，也没有什么能保证您下次会得到它。因此，您必须`dir`使用`sort`命令对结果进行排序。

```
 [~,order] = sort( {file.name} );
  file = file(order); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T11:52:20.667

如果您的文件名没有固定精度的数字（正如@FakeDIY 指出的那样，这意味着它们已经被排序），您可以执行以下操作：

```
file = dir('*_analysed.mat');
overalThresholds = cell(1, length(id));
IDs = zeros(1, length(id));
for i = 1:length(id)
    fileName = file(i).name;
    IDs(i)   = str2double( strrep( fileName, '_analysed.mat', '' ) );
    data     = load(fileName, 'means');
    overallThresholds{i} = data.means;
end
[~, reordering] = sort(IDs);
overallThresholds = overallThresholds(reordering); 
```

换句话说，将文件 ID 存储在一个单独的数组中，然后使用[SORT](http://www.mathworks.com/help/matlab/ref/sort.html)的第二个输出重新排列overallThresholds 以按照ID 的排序顺序。

（我还预先分配了数组，并使用了[LOAD](http://www.mathworks.com/help/matlab/ref/load.html)的函数形式，但您实际上并不需要这样做）。

# c++ - 我怎样才能让 libcurl 在它发送一些关于帖子的信息之前进行回调？

> ID：12817148
> 
> 赞同：0
> 
> 时间：2012-10-10T10:24:37.503
> 
> 标签：c++, c, curl, libcurl, curlpp

我正在使用 post call 将信息上传到服务器（使用 curlpp，但 libcurl 也可以直接使用）。

不时调用 CURLOPT_PROGRESSFUNCTION 回调，报告到目前为止发送了多少数据。当我上传文件时，我看到调用之间的差异非常小。

我想在发送每部分数据之前得到一个回调，其中包含现在要传输多少数据的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T13:02:08.413

libcurl 中没有这样的回调。CURLOPT_DEBUGFUNCTION 基本上会告诉你这些信息，但是*在*它被发送之后......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T11:43:42.707

您可以通过传递`CURLOPT_READFUNCTION`给来使用要设置的回调`curl_easy_setopt()`。

这假定此回调函数要读取的数据量将是要发送的下一个块的大小。

有关详细信息，请参阅此处：[http ://curl.haxx.se/libcurl/c/curl_easy_setopt.html#CURLOPTREADFUNCTION](http://curl.haxx.se/libcurl/c/curl_easy_setopt.html#CURLOPTREADFUNCTION)

# android - 如何在sqlite3中获取带有查询数据的列名？

> ID：12817151
> 
> 赞同：31
> 
> 时间：2012-10-10T10:24:47.130
> 
> 标签：android, sqlite, console-application

我使用 sqlite3 控制台在我的应用程序在 Android 中执行时对其进行调试。有没有办法在 sql 查询的结果中也显示列名（不仅是数据）和数据？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-10-10T10:26:44.633

是的，登录到**sql** *prompt 模式*后，一次执行以下命令：

```
.header on
.mode column 
```

# php - PHP/MySQLi 如果在执行复杂过程期间发生崩溃怎么办？

> ID：12817155
> 
> 赞同：0
> 
> 时间：2012-10-10T10:24:58.717
> 
> 标签：php, triggers, mysqli, rollback

我正在开发一个基于 php/MySQLi 的站点。我有一个问题，如果页面由于某种原因在执行复杂过程的过程中崩溃会发生什么。

例子：

```
if (get_message_call)
{
    add something to table 1
    add something to table 2
    add something to table 3   ( based on some values inserted into table2 ) 
    add something to table 4
    etc...
} 
```

我已经使用 PHPmyAdmin (InnoDB) 构建了数据库。我没有分配任何关系，因为主键/外键没有像理论上那样工作（也许我写错了）。

我主要担心的是，如果语句由于某种原因被中止（页面崩溃、连接松动等），可以说执行“向 table3 添加内容”。我猜第一条和第二条语句会被执行，其余的不会？

确保不会发生这种情况的最佳方法是什么，因为它可能会弄乱其他表的键等。我可能对解释有点模糊，但我希望有人能理解我的观点。

我读过“存储过程和触发器中的回滚和提交”，但我不确定我是否理解正确..

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T10:28:39.010

如果它是 InnoDB，那么您应该使用事务来进行这种插入。有关更多信息，请参阅：

*   [http://dev.mysql.com/doc/refman/5.0/en/ansi-diff-transactions.html](http://dev.mysql.com/doc/refman/5.0/en/ansi-diff-transactions.html)
*   [http://php.net/manual/en/book.mysqli.php](http://php.net/manual/en/book.mysqli.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T10:43:46.797

这是您应该使用数据库事务的情况。当您必须更新多个表并且更新依赖于以前的更新时，将代码放入数据库上的存储过程中是最安全的。存储过程可以启动一个事务，只有正确完成才会将数据提交到数据库中（也就是说，如果你写一个表，写第二个表，但第三次写失败，第一次和第二次写是也回滚）。

这是一个示例 - 存储过程接受 3 个输入参数，返回 2 个输出值并更新 3 个表。如果有任何错误，事务将回滚。（注意这只是一个例子，可能有轻微的语法错误）

```
CREATE DEFINER=`root`@`localhost` PROCEDURE `doSomething`(
  IN input1 INT,
  IN input2 VARCHAR(255),
  IN input3 VARCHAR(100),
  OUT output1 INT,
  OUT output2 INT
)
BEGIN
DECLARE EXIT HANDLER FOR SQLEXCEPTION BEGIN ROLLBACK; END;
DECLARE EXIT HANDLER FOR SQLWARNING BEGIN ROLLBACK; END;
DECLARE EXIT HANDLER FOR NOT FOUND BEGIN ROLLBACK; END;

START TRANSACTION;

INSERT INTO table1 (column1, column2, column3) VALUES (input1, input2, NOW());
SET @new_row_id = LAST_INSERT_ID();

INSERT INTO table2 (column1, colum2) VALUES (@new_row_id, input3);
SET @other_new_row_id = LAST_INSERT_ID();

UPDATE table3 SET mycolumn = @other_new_row_id WHERE id = @new_row_id;

COMMIT;

SET output1 = @new_row_id;
SET output2 = @other_new_row_id;

END 
```

# php - Liferay 中的 HTML 表单

> ID：12817156
> 
> 赞同：0
> 
> 时间：2012-10-10T10:25:01.447
> 
> 标签：php, forms, liferay

我在 Liferay 中制作了一个简单的 HTML 表单。提交表单后，其内容应发送至我的电子邮件地址，并显示“谢谢”一行。我已经用 php 完成了动作部分。但提交后，我得到的只是“谢谢”部分，表格没有提交到我的电子邮件地址。

知道为什么这不起作用吗？我一点也不擅长 PHP。只有基础。

有没有其他方法可以做到这一点？例如用javascript？虽然这可能不是一个好的选择。

我正在使用 Liferay 6.1 和 Tomcat 7。

HTML 表单：

```
<form name="form" method="post" action="form.php">
<table>
</tr>
<tr>
 <td>
  <label for="first_name">First Name</label>
 </td>
 <td>
  <input  type="text" name="first_name" maxlength="50" size="30">
 </td>
</tr>

<tr>
 <td>
  <label for="last_name">Last Name</label>
 </td>
 <td>
  <input  type="text" name="last_name" maxlength="50" size="30">
 </td>
</tr>
</table>
</form> 
```

PHP：

```
<?php
if(isset($_POST['email'])) {

    // Email where form is sent:
    $email_to = "myemail@mydomain.com";

Thank you!

<?php
}
die();
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T09:59:57.077

终于用JSP得到了答案，我从学生时代就没有用过。这是代码，以防有人想尝试。

```
<%@ page import="sun.net.smtp.SmtpClient, java.io.*, javax.servlet.http.HttpServletResponse, javax.servlet.jsp.PageContext,java.util.*" %>
<%
 String from= request.getParameter("from");
 String to= request.getParameter("to");

 try{
     SmtpClient client = new SmtpClient("smtp.mysitedomain.com");
     client.from(from);
     client.to(to);
     PrintStream message = client.startMessage();
     message.println("From: " + from);
     message.println("To: " + to);
     message.println();
     Enumeration paramNames = request.getParameterNames();
     while(paramNames.hasMoreElements()) {
       String paramName = (String) paramNames.nextElement();
       String paramValue = request.getParameter(paramName);
       message.println(paramName + ":" + paramValue);
      }
     client.closeServer();
  }
  catch (IOException e){    
     System.out.println("ERROR IN DELIVERING THE FORM:"+e);
  }
 response.sendRedirect("thanks.htm");
%> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T10:53:06.193

Liferay 能够使用 PHP Portlets，但是您必须进行一些配置，也许这​​个链接可以帮助您的情况：[http ://www.liferay.com/community/wiki/-/wiki/Main/PHP+Portlets](http://www.liferay.com/community/wiki/-/wiki/Main/PHP+Portlets)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-16T19:50:32.577

对于 $_POST 参数，我在 6.2 版中遇到了 php portlet 的问题。解决方案是以这种方式将 portlet 前缀放在参数中

`<input name="_SamplePHP_WAR_samplephpportlet_foo" type="text" />`

这将使 $_POST['foo'] 有一个参数

# ruby - 在 git hook 中使用 rake db:migrate - 未定义的类/模块编码

> ID：12817158
> 
> 赞同：3
> 
> 时间：2012-10-10T10:25:06.797
> 
> 标签：ruby, rake, rvm, database-migration, githooks

我正在使用[https://github.com/thuss/standalone-migrations](https://github.com/thuss/standalone-migrations)在 cakephp 环境中执行数据库迁移。我最终试图在使用 post-checkout git hook 签出不同版本的代码后自动执行数据库迁移。

在 cli 上正常运行可以正常运行`bundle exec rake db:migrate`，`rake db:migrate`与其他任何命令一样。如果我把命令放进去，`.git/hooks/post-checkout`它会吐出一个错误，抱怨`undefined class/module Encoding`

git hook 命令是`bundle exec rake db:migrate --trace`.

平台：Mac OS X Lion 10.7.5

这是整个错误：

```
耙中止！
未定义的类/模块编码
/Users/andy/.rvm/gems/ruby-1.9.3-p194/gems/json-1.7.5/lib/json/ext/parser.bundle
/Users/andy/.rvm/gems/ruby-1.9.3-p194/gems/json-1.7.5/lib/json/ext.rb:13
/Users/andy/.rvm/gems/ruby-1.9.3-p194/gems/json-1.7.5/lib/json.rb:58:in `require'
/Users/andy/.rvm/gems/ruby-1.9.3-p194/gems/json-1.7.5/lib/json.rb:58
/Users/andy/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/core_ext/object/to_json.rb:3:in `require'
/Users/andy/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/core_ext/object/to_json.rb:3
/Users/andy/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/core_ext/object.rb:10:in `require'
/Users/andy/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/core_ext/object.rb:10
/Users/andy/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/core_ext.rb:2:in `require'
/Users/andy/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/core_ext.rb:2
/Users/andy/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/core_ext.rb:1:in `each'
/Users/andy/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/core_ext.rb:1
/Users/andy/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/all.rb:3:in `require'
/Users/andy/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/all.rb:3
/Users/andy/.rvm/gems/ruby-1.9.3-p194/gems/standalone_migrations-2.0.1/lib/standalone_migrations/configurator.rb:1:in `require'
/Users/andy/.rvm/gems/ruby-1.9.3-p194/gems/standalone_migrations-2.0.1/lib/standalone_migrations/configurator.rb:1
/Users/andy/.rvm/gems/ruby-1.9.3-p194/gems/standalone_migrations-2.0.1/lib/standalone_migrations.rb:8:in `require'
/Users/andy/.rvm/gems/ruby-1.9.3-p194/gems/standalone_migrations-2.0.1/lib/standalone_migrations.rb:8
/Users/andy/.rvm/gems/ruby-1.9.3-p194/gems/standalone_migrations-2.0.1/lib/tasks/standalone_migrations.rb:9:in `require'
/Users/andy/.rvm/gems/ruby-1.9.3-p194/gems/standalone_migrations-2.0.1/lib/tasks/standalone_migrations.rb:9
/Users/andy/source/idio/cake/Rakefile:6:in `require'
/Users/andy/source/idio/cake/Rakefile:6
/Users/andy/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/rake_module.rb:25:in `load'
/Users/andy/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/rake_module.rb:25:in `load_rakefile'
/Users/andy/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:501:in `raw_load_rakefile'
/Users/andy/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:82:in `load_rakefile'
/Users/andy/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/Users/andy/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:81:in `load_rakefile'
/Users/andy/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:65:in `run'
/Users/andy/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/Users/andy/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
/usr/bin/rake:31

```

我对红宝石不太感冒。我尝试了各种技巧，删除了所有的 gem，重新安装了等等。总是一样的。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T09:47:56.487

原来这是 git 在钩子中将 /usr/bin 重新附加到 $PATH 的问题。这会导致调用 ruby​​ 的操作系统版本（位于 /usr/bin 中）而不是我的 rvm 版本。操作系统版本是 1.8.7，没有正确的 gem 等。我使用的是 1.9.3。

要修复，您需要在挂钩中获取 rvm 设置脚本。就像是：

```
#!/usr/bin/env bash
[[ -s "$HOME/.rvm/scripts/rvm" ]] && source "$HOME/.rvm/scripts/rvm"

# ...rest of the post commit commands 
```

# tcp-ip - 什么是网络编程

> ID：12817160
> 
> 赞同：0
> 
> 时间：2012-10-10T10:25:12.850
> 
> 标签：tcp-ip

我已经在eclipse下使用java完成了一个程序，我已经将我的代码转换为.jar文件并继续将.jar文件转换为.exe文件，我什至创建了一个与我的.exe文件相关的安装程序。每次我使用该程序对数据进行编码时，所有数据都记录在我的 .exe 文件所在的文件夹中（到我的本地硬盘驱动器），程序运行良好。问题是，我的程序的概念不仅是在我的计算机（我们局域网中的一个工作站）上使用它，而且还将它部署到我们的局域网中，我可以在其中对来自我们的一台计算机的数据进行编码站（客户端）并将这些数据保存到我们服务器的硬盘上，而不是像我当前的程序那样保存到计算机站（客户端）硬盘上。我' 研究了如何从工作站实现数据编码并将数据保存到服务器硬盘的概念，目前我想出了TCP/IP编程和网络编程。我的问题是，我在正确的道路上吗？如果我继续使用 java 的这一部分，我会实现我的目标还是有任何其他方式来实现我的概念。我并不是真的要求任何人教我如何实现这个目标，我只是在问我是否走在正确的道路上（学习 TCP/IP 和网络编程）或者我是否应该学习 java 的其他部分来实现这个概念. 请考虑我的提问方式，我觉得自己很初级，老实说，我对 TCP/IP 编程以及 TCP/IP 是否是实现我的概念的正确研究主题知之甚少。希望有人能给我关于这个问题的提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T02:45:51.677

您当然可以通过编写客户端和服务器来使用网络编程来实现您的解决方案，但根据您的需要，它可能不是最简单的解决方案。

例如，如果您一次只从一个工作站使用该程序，您可以输出到保存在共享网络驱动器上的文件，例如 windows 共享文件夹或使用 nfs。如果您可以从您的服务器设置一个可供您使用的所有工作站访问的共享驱动器或文件夹，您可以简单地更改您的程序以读取数据文件并将其写入网络共享目录。

如果这对您不起作用，请继续学习套接字编程。

我建议查看官方文档以开始：

[http://docs.oracle.com/javase/tutorial/networking/sockets/](http://docs.oracle.com/javase/tutorial/networking/sockets/)

# php - 用 DateInterval 增加 10.5 秒

> ID：12817172
> 
> 赞同：1
> 
> 时间：2012-10-10T10:26:02.287
> 
> 标签：php

```
$Datetime = $Datetime->add(new DateInterval('PT'.$secondsToAdd.'S'));
$Datetime = $Datetime->format('Y-m-d H:i:s'); 
```

如果 $secondsToAdd 是一个整数，一切正常，但如果它等于 0.5 或 10.5，则会引发错误。有人能帮我吗？如何增加 10.5 秒？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T10:33:03.093

环顾互联网，似乎本机`DateInterval`目前无法处理几分之一秒。一些[错误](https://bugs.php.net/bug.php?id=52519)[已](https://bugs.php.net/bug.php?id=53831)被接受，但尚未采取行动。

~~我发现[这个](http://joshp.me/dateinterval-milliseconds/)类的扩展`DateInterval`声称能够处理它（未经测试但看起来很有希望）。~~

上面链接的解决方案有正确的想法，但它没有完成这项工作。为了完成这项工作，需要重载 的所有方法`DateInterval`以考虑类的附加功能，并且还需要以`DateTime`类似的方式进行扩展。我将保留链接，因为它并非完全没用，但并不能完全解决问题。

当我玩弄它并想出一些可行的东西时，我会尝试添加一些更有用的信息。

# socket.io - 如何通过 socket.io 发出文件

> ID：12817173
> 
> 赞同：1
> 
> 时间：2012-10-10T10:26:07.037
> 
> 标签：socket.io

我如何通过 socket.io 发送文件路径，即

通常我们使用

```
socket.emit("sendpath","hi" );
socket.on("sendpath",function()
{
console.log("hi")
} 
```

发出文件路径，即我的 C 驱动器中的 pdf 文件怎么会发生

路径是：-“C:\xampp\248.pdf”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T19:32:21.437

我不完全确定我理解你的问题，但我假设你想要一个文件的内容，给定文件的路径，作为 Socket.IO 事件提供。

```
// var fs = require("fs");
socket.on("sendpath",filepath){
    fs.readFile(filepath,function(error, filedata){
        if(error) throw error;
        else socket.emit("sendfile", filedata.toString() );
    });
}); 
```

参考：[http ://nodejs.org/api/fs.html#fs_fs_readfile_filename_encoding_callback](http://nodejs.org/api/fs.html#fs_fs_readfile_filename_encoding_callback)

# git - NetBeans 7.2 git 推送错误

> ID：12817179
> 
> 赞同：2
> 
> 时间：2012-10-10T10:26:33.863
> 
> 标签：git, ssh, netbeans-7

我已经在我的 ubuntu 服务器上建立了一个新的 git 存储库。我做了一些初始提交，并通过 ssh 从我的 mac 成功克隆了存储库。尝试推送我在 mac 上所做的更改时，出现以下错误：

```
error occurred during unpacking on the remote end: unpack-objects abnormal exit 
```

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T12:55:51.240

我们遇到了同样的问题 - 使用 Netbeans 的 Windows PC 推送到带有主 repo 的 RHEL 服务器。

到目前为止，我发现的唯一解决方案是运行`git fsck`，`git prune`然后`git repack remote/origin/master`是最终的`git fsck`. 第一个`git fsck`将显示您有一个或多个悬空提交，随后的命令会清理存储库，然后您就可以从 Netbeans 推送。我试图检查这些，但它们似乎不存在，所以它们来自哪里是个谜。如果我从另一个 Linux 机器从命令行推送，则不会出现此问题。这一切都是通过 SSH 完成的。

当只有一个用户推送到 repo 时很好，但是一旦其他人这样做，那么第一个用户（在拉取非快进之后）会得到这个错误。我怀疑 Netbeans 在推送中做了一些奇怪的事情，但我不知道是什么。

**编辑：**

根据对此答案的评论，这基本上与 WRITE 权限有关，但我已经通过执行以下操作解决了它（假设“开发人员”是我们想要允许推送的组并且 example.com.git 是回购）

```
[tim@dev git]# chgrp -R developers example.com.git
[tim@dev git]# chmod -R g+swX example.com.git 
```

有关更多信息，请参阅[Serverfault 上的此答案](https://serverfault.com/questions/26954/how-do-i-share-a-git-repository-with-multiple-users-on-a-machine)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-26T15:57:46.310

我通过在 git 服务器上重新启动 ssh 守护进程解决了这个问题

```
# service sshd restart 
```

# php - PHP：根据时区偏移设置时区

> ID：12817187
> 
> 赞同：1
> 
> 时间：2012-10-10T10:27:09.323
> 
> 标签：php

我正在用php编写一个程序。

通常我们`set_default_timzone()` 用来设置时区。

我的数据库中有许多用户的详细信息，基于此我正在尝试为用户选择时区，例如

如果用户在注册时选择了 GMT + 5.30，我想`('Asia/Kolkata')`为他的个人资料页面设置默认时区

所以我正在寻找一种方法，以便我可以根据用户提供的时区为用户设置时区。

我在这里添加更多文字

我的数据库中有类似`GMT + 5.30`的数据，基于此我想设置时区

```
if (timezone == "GMT + 5.30 "){
   set_default_timezone('Asia/Kolkata');
} 
```

上面的代码只是逻辑

另一个

```
$offset = -5;
$timezone = getTimeZone($offset); //return America/New_York 
```

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-10-10T10:32:18.210

请参考[这个](http://php.net/manual/en/datetime.settimezone.php)。它可以帮助你

我建议使用服务器时区或 UTC，而不是为每个用户存储不同的数据。这样，您的数据库将完全一致，您可以执行一些操作，例如比较，而不必为每个条目获取 *user_timezone* 列并执行转换（这不是完全免费的）

# django - 如何在queryset django中显示外键

> ID：12817188
> 
> 赞同：2
> 
> 时间：2012-10-10T10:27:08.503
> 
> 标签：django, foreign-keys

我有 1 个问题。这些是我的 django 模型。（这只是示例）

```
 class Users(models.Model):
    username = models.Charfield()

 class CommunityBoard(models.Model):
    user = models.ForeignKey(User)
    title = models.CharField(max_length=30)
    contents = models.TextField() 
```

我使用 post 将数据（nsdictionary 格式）发送到服务器

```
 { pk = 1 } 
```

在views.py中

```
 def detailCommuBoard(request):
     returnValues = {}
     returnValues.update(csrf(request))
     pk = request.POST['pk'];
     detailContents = CommunityBoard.objects.filter(pk=pk)
     returnValues = serializers.serialize('json', detailContents)

     return HttpResponse(returnValues) 
```

然后，我得到了iphone的序列化数据。（json格式）

```
 {
    fields =         {

        contents = "\Uc5ed\Uc2dc \Ud30c\Uc774\Uc36c";
        title = "\Ud30c\Uc774\Uc36c \Ud504\Ub85c\Uadf8\Ub798\Ubc0d";           
        user = 1;

    };        
    pk = 11;
} 
```

我想在制作查询集时显示用户模型的用户名，而不是用户模型的 pk。

请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T10:34:29.583

我认为您需要更改查询集以包含该信息。

```
detailContents = CommunityBoard.objects.filter(pk=pk).values_list('contents', 'title', 'user__username')
returnValues = serializers.serialize('json', detailContents) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T10:36:32.763

您可以[在序列化过程中使用自然键](https://docs.djangoproject.com/en/dev/topics/serialization/#serialization-of-natural-keys)。

所以你可以试试这个：

```
returnValues = serializers.serialize('json', detailContents, 
                                    use_natual_keys=True) 
```

# php - solr 数据无法在 solrcommit 之前发送

> ID：12817192
> 
> 赞同：1
> 
> 时间：2012-10-10T10:27:25.860
> 
> 标签：php, codeigniter, solr

我的问题是我无法将数组发送到 solr 机器以进行更新。我使用 codeigniter 作为框架，这是我的代码：

```
 $solrData = array();

            $solrData['id']                 = $this->data['profil_data']['id'];
            $solrData['site']               = $this->data['profil_data']['site'];
            $solrData['url_Domain']         = $this->data['profil_data']['url_Domain'];
            $solrData['url_Page']           = $this->data['profil_data']['url_Page'];
            $solrData['url_Profil']         = $this->data['profil_data']['url_Profil'];
            $solrData['scr_Kobi_Rank']      = $this->data['profil_data']['scr_Kobi_Rank'];
            $solrData['scr_A']              = $this->data['profil_data']['scr_A'];
            $solrData['scr_B']              = $this->data['profil_data']['scr_B'];
            $solrData['scr_C']              = $this->data['profil_data']['scr_C'];
            $solrData['scr_D']              = $this->data['profil_data']['scr_D'];
            $solrData['loc_City']           = $this->input->post('plakano');
            $solrData['loc_Lat_Lon']        = $this->input->post('loc_Lat_Lon');
            $solrData['com_Category']       = explode(',', $this->input->post('category'));         

            $urunData   = $this->input->post('urun_list');

            foreach($urunData as $row)
            {
                $ontoData = $this->m_onto->getOntoDataByOntoDataId($row);
                $solrData['com_Products'][] = $ontoData['baslik'];
            }

            $hizmetData = $this->input->post('hizmet_list');

            foreach($hizmetData as $row)
            {
                $ontoData = $this->m_onto->getOntoDataByOntoDataId($row);
                $solrData['com_Services'][] = $ontoData['baslik'];
            }

            $solrData['com_Type']           = $this->input->post('sirketturu');
            $solrData['com_Description']    = $this->input->post('description');
            $solrData['com_Title_Selected'] = $this->input->post('title');
            $solrData['com_Title_Long']     = $this->data['profil_data']['com_Title_Long'];
            $solrData['crm_Tel']            = $this->input->post('tel');
            $solrData['crm_Fax']            = $this->input->post('fax');
            $solrData['crm_Email']          = $this->input->post('email');

            $this->solr->updateSolrProfilData($solrData); 
```

和solr过程：

```
public function updateSolrProfilData($arrData)
{
    if(count($arrData) == 0)
        return FALSE;

    $solrClientOptions          = $this->solrClientOptionsYazProfil;    
    $solrClientOptionsCommit    = $this->solrClientOptionsYazProfilCommit;

    $solrClient = new SolrClient($solrClientOptions);       
    $solrDoc    = new SolrInputDocument();

    foreach($arrData as $firmaField => $firmaValue)
    {
        if(! is_array($firmaValue))
        {
            $solrDoc->addField($firmaField, $firmaValue);
        }
        else
        {
            foreach($firmaValue as $firmaField2 => $firmaValue2)
            {
                if($firmaValue2 != '')
                {
                    $solrDoc->addField($firmaField, $firmaValue2);
                }
            }
        }
    }

    try {
        $this->_solrCommit($solrClientOptionsCommit);
    } catch (Exception $e) {
        echo $e->getMessage(); 
    }           
} 
```

Solr 提交功能：

```
private function _solrCommit($solrArr)
{
    $urlCommit  = 'http://' . $solrArr['hostname'] . ":" . $solrArr['port'] . '/' . $solrArr['path'] . "/update?stream.body=%3Ccommit/%3E&wt=json";

    $output     = file_get_contents($urlCommit);
    $outputArr  = json_decode($output, TRUE);

    if ($outputArr['responseHeader']['status'] ===  0)
        return TRUE;
    else
        return FALSE;
} 
```

这就是选项：

```
private $solrClientOptionsYazProfilCommit = array(
                                'hostname' => SOLR_HOST_YAZ,
                                'login'    => '',
                                'password' => '',
                                'port'     => SOLR_PORT,
                                'path'     => 'solr/collection1'
); 
```

尽管 try-catch 没有返回错误，但数据无法更新。此外，代码成功发送 solr commit。我检查了网址，但格式正确。这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T12:07:23.870

您的问题是您从未向 Solr 发出命令以将您构建的文档添加到索引中。您只是发出成功执行的提交命令。

由于您使用的是 PHP，我建议您使用[PHP SolrClient](http://www.php.net/manual/en/book.solr.php)。这将使您不必自己手动编写所有函数（添加、删除、提交等）。在这种情况下，您需要调用[addDocument](http://www.php.net/manual/en/solrclient.adddocument.php)函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T02:50:34.917

不要使用 PHP/Pecl solr 库。如果您可以通过 URL 访问 solr，那么您应该只使用 PHP 和 CURL：

```
static function doCurl($url, $username = null, $password = null) {
    if (!function_exists('curl_init')) {
        // throw error
    }

    $ch = curl_init();
    $opts = array(
        CURLOPT_URL => $url,
        CURLOPT_RETURNTRANSFER => 1,
        CURLOPT_POST => 1,
        CURLOPT_TIMEOUT => 120,
        CURLOPT_FAILONERROR => 1,
        CURLOPT_HTTPAUTH => CURLAUTH_ANY
    );

    if ($password != null && $username != null) {
        $opts[CURLOPT_USERPWD] = "$username:$password";
    }

    curl_setopt_array($ch, $opts);
    $response = curl_exec($ch);
    curl_close($ch);
    return $response;
} 
```

用法是：
doCurl("http://hostNameHere:8983/solr/select/?q=solr&start=0&rows=10&indent=on", "user", "pass");

# android - FFMPEG 1.0 安卓 NDK R8B

> ID：12817198
> 
> 赞同：4
> 
> 时间：2012-10-10T10:27:46.583
> 
> 标签：android, ffmpeg

我曾尝试使用 android ndk r8b 编译最新版本的 ffmpeg，但我总是有错误，我不知道如何解决它们。我正在阅读本教程[http://www.roman10.net/how-to-build-ffmpeg-for-android/](http://www.roman10.net/how-to-build-ffmpeg-for-android/)但该脚本不适用于我的环境，我使用的是：-Ubuntu 12.04 LTS。-英特尔酷睿 i7。-Android ndk r8b -最新版本 ffmeg (1.0)

基本上我想将电影从一种格式编码为另一种格式。

这就是我正在使用的脚本：

```
NDK=../android-ndk-r8b
PLATFORM=$NDK/platforms/android-8/arch-arm/
PREBUILT=$NDK/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86
function build_r8b
{
bash configure \
--disable-shared \
--enable-static \
--enable-gpl \
--enable-version3 \
--enable-nonfree \
--disable-doc \
--disable-ffmpeg \
--disable-ffplay \
--disable-ffprobe \
--disable-ffserver \
--disable-avdevice \
--disable-avfilter \
--disable-postproc \
--enable-small \
--cross-prefix=$PREBUILT/bin/arm-linux-androideabi- \
--enable-cross-compile \
--target-os=linux \
--extra-cflags="-I$PLATFORM/usr/include" \
--extra-ldflags="-L$PLATFORM/usr/lib -nostdlib" \
--arch=arm \
--disable-symver \
--disable-debug \
--disable-stripping \
$ADDITIONAL_CONFIGURE_FLAG
sed -i 's/HAVE_LRINT 0/HAVE_LRINT 1/g' config.h
sed -i 's/HAVE_LRINTF 0/HAVE_LRINTF 1/g' config.h
sed -i 's/HAVE_ROUND 0/HAVE_ROUND 1/g' config.h
sed -i 's/HAVE_ROUNDF 0/HAVE_ROUNDF 1/g' config.h
sed -i 's/HAVE_TRUNC 0/HAVE_TRUNC 1/g' config.h
sed -i 's/HAVE_TRUNCF 0/HAVE_TRUNCF 1/g' config.h
make clean
make  -j4 install
$PREBUILT/bin/arm-linux-androideabi-ar d libavcodec/libavcodec.a inverse.o
$PREBUILT/bin/arm-linux-androideabi-ld -rpath-link=$PLATFORM/usr/lib   -L$PLATFORM/usr/lib  -soname libffmpeg.so -shared -nostdlib  -z,noexecstack -Bsymbolic --whole-archive --no-undefined -o $PREFIX/libffmpeg.so libavcodec/libavcodec.a libavformat/libavformat.a libavutil/libavutil.a libswscale/libswscale.a -lc -lm -lz -ldl -llog  --warn-once  --dynamic-linker=/system/bin/linker $PREBUILT/lib/gcc/arm-linux-androideabi/4.4.3/libgcc.a
}
#arm v7vfpv3
CPU=armv7-a
OPTIMIZE_CFLAGS="-mfloat-abi=softfp -mfpu=vfpv3-d16 -marm -march=$CPU "
PREFIX=./android/$CPU
ADDITIONAL_CONFIGURE_FLAG=
#build_one
build_r8b 
```

这就是最终结果

```
jllarraz@ubuntu:~/Descargas/ffmpeg$ bash build_android.sh
/android-ndk-r8b/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86/bin/arm-linux-androideabi-gcc is unable to create an executable file.
C compiler test failed.

If you think configure made a mistake, make sure you are using the latest
version from Git.  If the latest version fails, report the problem to the
ffmpeg-user@ffmpeg.org mailing list or IRC #ffmpeg on irc.freenode.net.
Include the log file "config.log" produced by configure as this will help
solving the problem.
make: execvp: ./version.sh: Permiso denegado
make: execvp: ./version.sh: Permiso denegado
HOSTCC  doc/print_options.o
CC  cmdutils.o
CC  libavdevice/alldevices.o
CC  libavdevice/avdevice.o
In file included from doc/print_options.c:104:0:
./libavcodec/options_table.h: En la función ‘show_codec_opts’:
./libavcodec/options_table.h:85:1: aviso: ‘sub_id’ es obsoleto (declarado en  ./libavcodec/avcodec.h:1505) [-Wdeprecated-declarations]
./libavcodec/options_table.h:149:1: aviso: ‘luma_elim_threshold’ es obsoleto (declarado en ./libavcodec/avcodec.h:1740) [-Wdeprecated-declarations]
./libavcodec/options_table.h:150:1: aviso: ‘chroma_elim_threshold’ es obsoleto (declarado en ./libavcodec/avcodec.h:1747) [-Wdeprecated-declarations]
./libavcodec/options_table.h:284:1: aviso: ‘color_table_id’ es obsoleto (declarado en ./libavcodec/avcodec.h:1986) [-Wdeprecated-declarations]
./libavcodec/options_table.h:307:1: aviso: ‘inter_threshold’ es obsoleto (declarado en ./libavcodec/avcodec.h:2049) [-Wdeprecated-declarations]
./libavcodec/options_table.h:312:1: aviso: ‘quantizer_noise_shaping’ es obsoleto (declarado en ./libavcodec/avcodec.h:2056) [-Wdeprecated-declarations]
cmdutils.c:52:21: error fatal: version.h: No existe el archivo o el directorio
compilación terminada.
make: *** [cmdutils.o] Error 1
make: *** Se espera a que terminen otras tareas....
build_android.sh: línea 59: ../android-ndk-r8b/toolchains/arm-linux-androideabi- 4.4.3/prebuilt/linux-x86/bin/arm-linux-androideabi-ar: Permiso denegado
build_android.sh: línea 60: ../android-ndk-r8b/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86/bin/arm-linux-androideabi-ld: Permiso denegado 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T10:41:55.797

经过几个小时的工作，我找到了一种编译方法：

**1）**`"chmod 777 ./* -R"`在我的情况下，在包含 android-ndk 和 ffmpeg 的文件夹中授予权限（确保使用 './ *' 而不是 '/* '！）
**2）** 在我的环境中安装我需要的东西。
**3）** 这是我的新`.sh`文件

```
function build_r8b_test
{
bash configure --target-os=linux \
--prefix=$PREFIX \
--enable-cross-compile \
--extra-libs="-lgcc" \
--arch=arm \
--cc=$PREBUILT/bin/arm-linux-androideabi-gcc \
--cross-prefix=$PREBUILT/bin/arm-linux-androideabi- \
--nm=$PREBUILT/bin/arm-linux-androideabi-nm \
--sysroot=$PLATFORM \
--extra-cflags=" -O3 -fpic -DANDROID -DHAVE_SYS_UIO_H=1 -Dipv6mr_interface=ipv6mr_ifindex -fasm -Wno-psabi -fno-short-enums -fno-strict-aliasing -finline-limit=300 $OPTIMIZE_CFLAGS " \
--disable-shared \
--enable-static \
--extra-ldflags="-Wl,-rpath-link=$PLATFORM/usr/lib -L$PLATFORM/usr/lib -nostdlib -lc -lm -ldl -llog" \
--disable-everything \
--enable-demuxer=mov \
--enable-demuxer=h264 \
--disable-ffplay \
--enable-protocol=file \
--enable-avformat \
--enable-avcodec \
--enable-decoder=rawvideo \
--enable-decoder=mjpeg \
--enable-decoder=h263 \
--enable-decoder=mpeg4 \
--enable-decoder=h264 \
--enable-parser=h264 \
--enable-encoder=mpeg4 \
--enable-encoder=mpeg \
--disable-network \
--enable-zlib \
--disable-avfilter \
--disable-avdevice \
$ADDITIONAL_CONFIGURE_FLAG
sed -i 's/HAVE_LRINT 0/HAVE_LRINT 1/g' config.h
sed -i 's/HAVE_LRINTF 0/HAVE_LRINTF 1/g' config.h
sed -i 's/HAVE_ROUND 0/HAVE_ROUND 1/g' config.h
sed -i 's/HAVE_ROUNDF 0/HAVE_ROUNDF 1/g' config.h
sed -i 's/HAVE_TRUNC 0/HAVE_TRUNC 1/g' config.h
sed -i 's/HAVE_TRUNCF 0/HAVE_TRUNCF 1/g' config.h
make clean
make  -j4 install
$PREBUILT/bin/arm-linux-androideabi-ar d libavcodec/libavcodec.a inverse.o
$PREBUILT/bin/arm-linux-androideabi-ld -rpath-link=$PLATFORM/usr/lib -L$PLATFORM/usr/lib  -soname libffmpeg.so -shared -nostdlib  -z,noexecstack -Bsymbolic --whole-archive --no-undefined -o $PREFIX/libffmpeg.so libavcodec/libavcodec.a libavformat/libavformat.a libavutil/libavutil.a libswscale/libswscale.a -lc -lm -lz -ldl -llog  --warn-once  --dynamic-linker=/system/bin/linker $PREBUILT/lib/gcc/arm-linux-androideabi/4.4.3/libgcc.a
}

#arm v7vfpv3
CPU=armv7-a
OPTIMIZE_CFLAGS="-mfloat-abi=softfp -mfpu=vfpv3-d16 -marm -march=$CPU "
PREFIX=./android/$CPU
ADDITIONAL_CONFIGURE_FLAG=
build_r8b_test 
```

# windows-8 - Windows 8 外壳扩展

> ID：12817199
> 
> 赞同：1
> 
> 时间：2012-10-10T10:27:47.000
> 
> 标签：windows-8, explorer, windows-shell

我正在尝试在 Windows 8 - ARM、32 和 x64 上实现 C++ Windows Shell 上下文菜单处理程序。 [http://code.msdn.microsoft.com/windowsdesktop/CppShellExtContextMenuHandl-410a709a](http://code.msdn.microsoft.com/windowsdesktop/CppShellExtContextMenuHandl-410a709a)

有了一些差异，我设法让该项目在 XP 和 W7 (32,64) 上运行。

问题是，在 W8 中注册 dll 没有任何错误。但它不起作用。不知道为什么，但我没有找到任何有用的信息来描述操作系统之间的差异。

这个项目也是如此： [https ://cfx.svn.codeplex.com/svn/Visual%20Studio%202008/ATLShellExtIconOverlayHandler/ReadMe.txt](https://cfx.svn.codeplex.com/svn/Visual%20Studio%202008/ATLShellExtIconOverlayHandler/ReadMe.txt)

没有错误，但它只是不起作用。

任何帮助将不胜感激。

# .net - 在自定义授权 MVC4 Web Api 中访问 post 或 get 参数

> ID：12817202
> 
> 赞同：59
> 
> 时间：2012-10-10T10:27:55.337
> 
> 标签：.net, asp.net-mvc-4, authorization, asp.net-web-api

是否可以通过 HttpActionContext 对象访问帖子或获取参数？

我有一组传感器将数据记录到提供 REST api 的 Web 服务器。我想引入某种身份验证/授权，让传感器在数据中包含其硬件 ID，然后在数据库中查找该 ID 是否存在。由于 API 提供了许多 Web api 操作方法，因此我最好使用自定义授权属性

```
public class ApiAuthorizationFilter : AuthorizeAttribute
{
    protected override bool IsAuthorized(HttpActionContext actionContext)
    {
        return false;
    }
} 
```

如何从 actionContext 访问发布/获取数据？

编辑：POST 示例

```
POST /Api/api/ActionMethod/ HTTP/1.1\r\n
Content-Type: application/json\r\n
Host: localhost\r\n
Accept: */*\r\n
Content-Length:52\r\n
\r\n
{"Id": '121a222bc', "Time": '2012-02-02 12:00:00'}\r\n 
```

祝你今天过得愉快！

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-10-10T21:10:39.167

由于其性质，AuthoriseAttribute 看起来像是在模型绑定器和参数绑定运行之前在管道中调用它。当您访问 Request.Content 并从中读取时，您也会遇到问题...这只能[完成一次](http://blogs.msdn.com/b/jmstall/archive/2012/04/16/how-webapi-does-parameter-binding.aspx)，如果您要在 auth 属性中尝试它，您可能会破坏 mediaTypeFormater...

> 在 WebAPI 中，请求主体（一个 HttpContent）可能是一个只读的、无限的、非缓冲的、不可回退的流。

**更新** 有不同的方法来指定执行上下文... [http://msdn.microsoft.com/en-us/library/system.web.http.filters.filterscope(v=vs.108).aspx](http://msdn.microsoft.com/en-us/library/system.web.http.filters.filterscope(v=vs.108).aspx)。AuthoriseAttribute 是“全局”的，因此访问操作信息的时间过早。

鉴于您想要访问模型和参数，您可以稍微改变您的方法并使用 OnActionExecuting 过滤器（“Action”过滤器范围），并根据您的验证抛出 401 或 403。

此过滤器稍后在执行过程中调用，因此您可以完全访问绑定的数据。

下面非常简单的例子：

```
public class ApiAuthorizationFilter : ActionFilterAttribute
{
    public override void OnActionExecuting(HttpActionContext actionContext)
    {
        Foo model = (Foo)actionContext.ActionArguments["model"];
        string param1 = (string)actionContext.ActionArguments["param1"];
        int param2 = (int)actionContext.ActionArguments["param2"];

        if (model.Id != "1")
            throw new HttpResponseException(System.Net.HttpStatusCode.Forbidden);

        base.OnActionExecuting(actionContext);
    }
} 
```

示例控制器：

```
public class Foo
{
    public string Id { get; set; }
    public DateTime Time { get; set; }
}

public class FoosController : ApiController
{
    // PUT api/foos/5
    [ApiAuthorizationFilter]
    public Foo Put(int id, Foo model, [FromUri]string param1 = null, int? param2 = null)
    {
        return model;
    }
} 
```

其他答案在说什么......他们是对的，如果您可以访问 URL 上所需的所有内容，则可以通过请求获取内容；但是，我认为模型和请求内容应该单独保留：

```
var queryStringCollection = HttpUtility.ParseQueryString(actionContext.Request.RequestUri.Query);

    //example for param1
    string param1 = queryStringCollection["param1"];
    //example for param2
    int param2 = int.Parse(queryStringCollection["param2"]);
    //Example of getting the ID from the URL
    var id = actionContext.Request.RequestUri.Segments.LastOrDefault(); 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-06-05T13:35:25.130

在调用类似以下内容时，我访问了上下文路由数据以从自定义 AuthorizeAttribute 中获取参数`/api/client/123/users`：

```
public class CustomAuthorizeAttribute : AuthorizeAttribute
  {
     protected override bool IsAuthorized(System.Web.Http.Controllers.HttpActionContext actionContext)
     {
        var clientId = Convert.ToInt32(actionContext.ControllerContext.RouteData.Values["clientid"]);

        // Check if user can access the client account.

     }
  } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-12T04:29:18.590

您可以使用以下代码从自定义授权属性访问查询字符串值：

```
public class ApiAuthorizationFilter : AuthorizeAttribute
{
    protected override void OnAuthorization(AuthorizationContext filterContext)
    {
        var querystring = filterContext.RequestContext.HttpContext.Request.QueryString;
        // Do what you need
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-04T17:17:16.823

虽然这个问题已经回答了。但如果其他人需要它，您可以从 ActionFilterAttribute 获取查询字符串，如下所示：

```
public class ApiAuthorizationActionFilter : ActionFilterAttribute
{
    public override void OnActionExecuting(HttpActionContext actionContext)
    {
        var queryParameters = actionContext.Request.GetQueryNameValuePairs().ToDictionary(x => x.Key, x => x.Value);

        var some_value = queryParameters.ContainsKey("some_key")
                    ? queryParameters["some_key"] : string.Empty;

        // Log Action Filter call
        base.OnActionExecuting(actionContext);
    }
} 
```

但通常我构建 API 授权的方式是使用标头和自定义验证逻辑，方法是针对用户/客户端等向数据库添加密钥（唯一字符串）。

```
public class ApiAuthorizationActionFilter : ActionFilterAttribute
{
    public override void OnActionExecuting(HttpActionContext actionContext)
    {
        var headers = actionContext.Request.Headers.ToDictionary(x => x.Key, x => x.Value);

        string api_key = headers.ContainsKey("api_key") ? headers["api_key"].FirstOrDefault() : null;

        bool canAccessApi = IsValidKey(api_key);

        if (!canAccessApi)
            actionContext.Response = actionContext.Request.CreateErrorResponse(HttpStatusCode.Unauthorized, "You do not have access to this API. Please use a valid key.");

        // Log Action Filter call
        base.OnActionExecuting(actionContext);
    }

    private bool IsValidKey(string api_key)
    {
        //Build Access Control Logic here using database keys...
        return true;
    }
} 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-10-10T10:34:07.827

您应该能够从`actionContext.Request` That is the way to get the request data 中获取此信息。

发布的数据在`actionContext.Request.Content` 或者如果它是一个 GET 请求，您可以从中获取查询字符串`actionContext.Request.RequestUri`

# iphone - iPhone：iOS 6 上的图像显示模糊？

> ID：12817209
> 
> 赞同：0
> 
> 时间：2012-10-10T10:28:21.663
> 
> 标签：iphone, ios6

我有一个名为 abc.png 大小为 320 x 156 的图像在 iPhone 4 上运行良好，还有一个名为 abc@2x.png 大小为 640 x 312 的图像也可以正常工作。但是什么时候请告诉我如何使用iPhone 6设备的图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T11:11:50.100

首先，目前还没有像 iPhone6 这样的东西，它要么是 iOS6 要么是 iPhone 5。但我猜你说的是屏幕分辨率为 640X1136 的 iPhone 5。没有为 iPhone 5 选择图像的内置方法。

如果您在 resources 中有 abc.png 和 abc@2x.png ，并且您使用如下代码：

```
UIImage * image = [UIImage imageNamed:@"abc.png"]; 
```

它将选择 abc.png 用于非视网膜显示和 abc@2x.png 用于视网膜显示（包括 iPhone 4S 和 iPhone 5）。

如果要为 iPhone 5 加载单独的图像，则需要检查屏幕高度：

```
if(screenHeight == 480)
{
 //iphone 3,3G,4
}
else if(screenHeight == 960)
{
//iphone 4S 
}
else if(screenHeight == 1136)
{
//iphone 5
} 
```

这样，您可以为不同的 iphone 加载不同的图像。如果它回答了您的问题，请升级并检查答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T11:18:04.163

The answer to your question, I'm afraid to say, is something called `AutoLayout`. That's the solution Apple came up with to deal with the different form factor for iOS 6 views. Only `@2x` images are available, but with `AutoLayout`, you can tell it exactly how to behave.

Here's a nice tutorial on how to use `AutoLayout`, I tried it and it works well:

[http://www.raywenderlich.com/20881/beginning-auto-layout-part-1-of-2](http://www.raywenderlich.com/20881/beginning-auto-layout-part-1-of-2)

[http://www.raywenderlich.com/20897/beginning-auto-layout-part-2-of-2](http://www.raywenderlich.com/20897/beginning-auto-layout-part-2-of-2)

# cakephp - 在 CakePHP 模型回调函数中接收模型数据

> ID：12817213
> 
> 赞同：1
> 
> 时间：2012-10-10T10:28:41.083
> 
> 标签：cakephp, callback, cakephp-2.1, datamodel

我尝试在 CakePHP 2.1 中的模型回调函数中使用现有模型数据，但无法使其正常工作。我所做的是尝试在 beforeValidate() 回调中获取用户角色并检查它是否为空。如果是，我会设置它。通常我会这样做，并且对于第一次创建记录来说它工作得很好。

```
if (empty($this->data[$this->alias]['role']))
    $this->data[$this->alias]['role'] = 'user'; 
```

问题是，每次更新现有记录（用户）时，都会再次设置角色。

**问题：**那么，如何检查该字段`role`是否已设置在记录数据中，而不是发布数据（似乎`$this->data[$this->alias]`只包含 POST 数据）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T15:53:16.137

正如我所见，这个问题有三种解决方案。

1.  在数据库列中设置默认值（最简单，最好？）
2.  每次都为您的输入添加角色。
3.  查找用户并在缺少角色时添加角色

前两个选项似乎很明显，所以我只说明最后一个。

```
public function beforeValidate() {
  if (!empty($this->id) {
    $this->data[$this->alias][$this->primaryKey] = $this->id;
  }
  if (!empty($this->data[$this->alias][$this->primaryKey])) {
    // user exists, check their data
    $id = $this->data[$this->alias][$this->primaryKey];
    $user = $this->find('first', array(
      'conditions' => array($this->primaryKey => $id)
    ));
    $this->data[$this->alias]['role'] = $user[$this->alias]['role'];
  }
  if (empty($this->data[$this->alias]['role'])) {
    // new user but missing a role
    $this->data[$this->alias]['role'] = 'user';
  }
  return true;
} 
```

此回调将检查是否传递了 ID，如果是，它将查找用户并填充该`role`字段。然后，它会检查一个空角色并在必要时用默认值填充它。显然他拥有的代码越多，出现错误的可能性就越大，所以我建议使用默认列值的第一个选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T10:33:57.177

尝试：

```
if (empty($this->data[$this->alias]['role']) && empty($this->role)) {
   $this->data[$this->alias]['role'] = 'user';
} 
```

# windows - 当ISP不断转移IP并且没有LAN时如何分配静态IP？

> ID：12817214
> 
> 赞同：0
> 
> 时间：2012-10-10T10:28:42.403
> 
> 标签：windows, networking, ip

每次我连接到互联网时，我的 ISP 都会不断提供新的 ip。我没有指定 LAN，目前也不需要。有什么方法可以让我每次连接到互联网时都有一个系统的静态 ip，即每次都使用相同的公共 ip？

编辑：看我有一家小公司，那里有系统，但到目前为止还没有局域网。现在我希望某些文件（保存在我的互联网服务器上）只能在我的办公室打开。但是我的办公室 ISP 每次都会提供新的 ip，这就是为什么我需要一个解决方案，通过它我可以为这些系统分配静态 ip，并且可以限制该文档只能在这些办公系统上打开。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T10:36:26.883

如果您真的需要为您的计算机提供一个固定 IP，您可以随时向您的 ISP 索要一个，尽管这可能是一项非常昂贵的服务。

另一种选择是通过[动态 DNS 服务](http://en.wikipedia.org/wiki/Dynamic_DNS)“模拟”这种行为，例如 www.no-ip.com 或[http://dyn.com/dns/](http://dyn.com/dns/)。它将域与您的计算机相关联（例如 iamtheguy.no-ip.com）。这通常需要在您的计算机上安装一些软件，这样每次您的“真实”公共 IP 发生变化时，都会通知外部动态 DNS 服务器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T10:32:07.160

无法将您的 IP“设置”为静态 IP。但是你可以使用像[DynDNS](http://dyndns.org)这样的服务。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T10:32:00.040

你应该看看像这样的东西[DYNDns](http://dyn.com/dns/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T10:51:20.000

看看[localtunnel](http://progrium.com/localtunnel/)。

看起来不错。另外，我不久前在阅读[这个](http://www.splitbrain.org/blog/2012-08/15-tunnel_a_local_webserver_to_the_internet)有趣的东西时发现了它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-10T10:52:37.780

向您的 ISP 索要静态 IP - 我每月支付 5 英镑 (GBP)。

唯一的另一种方法，如果这不是一个选项，当请求来自不是当前的 IP 时，让您的网络服务要求用户名/密码 - 然后更新您的应用程序以自动允许来自已批准 IP 的请求。

如果您的 IP 更改，那么您将需要用户名/密码才能再次访问。

但是，有了这个，我也会使用一个强 cookie，这样下一个被分配你旧 IP 的人就不能免费访问它 - 即你需要正确的 cookie 和 IP 地址才能在没有用户名/密码的情况下访问.

# css - 在 div 中对齐中心菜单

> ID：12817216
> 
> 赞同：0
> 
> 时间：2012-10-10T10:28:46.123
> 
> 标签：css

> **可能重复：**
> [我们可以在不使用 inline-block 的情况下水平居中那些宽度可变的 div “IE7 及以上”吗？](https://stackoverflow.com/questions/12579907/can-we-center-those-divs-ie7-and-up-with-variable-width-horizontally-without-u)

我正在尝试创建一个菜单，其背景图像跨越屏幕的整个宽度，菜单内容在中间限制为 980px，然后菜单内容在其中心对齐。

像这样：[http ://d.pr/i/eYcV](http://d.pr/i/eYcV)

但我不想将区域限制在 980px 以上，因为将来菜单项可能会增加。

我在 HTML 中有以下结构：

```
<div class="menu">
  <nav class="primary_menu">
      <ul id="menu-primary">
           <li><a href="http://localhost:8888/maldonfire/">Home</a></li>
           <li><a href="http://localhost:8888/maldonfire/blog/">Blog</a></li>
      </ul>
  </nav>        
</div> 
```

使用以下 CSS：

```
/* Menu */
.menu{
background: url("images/menu_bg_home.jpg") repeat-x;
height: 70px;
}
.primary_menu{
display: block;
margin: 0px auto;
width: 980px;
height: 70px;
}
.primary_menu ul{
text-align: center;
list-style-type: none;
}
.primary_menu ul li{
float: left;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T10:31:55.513

有很多方法可以实现您的要求...最简单的方法是`inline-blocks`像这样使用

```
.primary_menu ul{
    text-align: center;
}
.primary_menu ul li{
    /*float: left;*/
    display:inline-block;
    margin: 0 20px;
    *display : inline; /* for IE7 and below */
    zoom:1;
} 
```

在这里检查我的答案：[我们可以在不使用内联块的情况下水平居中那些宽度可变的 div“IE7 及以上”吗？](https://stackoverflow.com/questions/12579907/can-we-center-those-divs-ie7-and-up-with-variable-width-horizontally-without-u/12580104#12580104)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T10:38:32.520

将 .primary_menu li 从 float: left 更改为 display: inline-block 应该使菜单项居中对齐

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T10:38:05.133

试试这个[演示](http://jsbin.com/axebeh/1) 或这个[演示2](http://jsbin.com/axebeh/2)

```
.menu{
background:#ccc;
  padding:10px;
}
.primary_menu{
  background:#999;
display: block;
margin: 0px auto;
width: 980px;
height: 70px;

}
.primary_menu ul{
text-align: center;
list-style-type: none;
 margin:0px;
  overflow:auto;

}
.primary_menu ul li{
float: left;
line-height:4;
padding:5px;  
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T10:45:18.360

工作 jsFiddle - 看看：

[http://jsfiddle.net/dane/FyThW/21/](http://jsfiddle.net/dane/FyThW/21/)

```
/* Menu */
.menu{
background-color: gray;
height: 70px;
}
.primary_menu{
display: block;
margin: 0px auto;
width: 980px;
height: 70px;
background-color: lightgray;
}
.primary_menu ul{
list-style-type: none;
text-align: center;
}
.primary_menu ul li{
    display: inline-block;
}​ 
```

# android - 在其背景中使用 opengl 和 GestureImageView 绘制透明三角形

> ID：12817221
> 
> 赞同：1
> 
> 时间：2012-10-10T10:29:13.900
> 
> 标签：android, imageview

我需要制作一个三角形的框架。GestureImageView 将成为该三角形框架的背景。三角形只有实心边框。这样用户就可以放大和缩小三角形内的图像。任何帮助？

我制作了 GestureImageView。唯一需要的是三角形透明框架。请帮忙 ？

以下是代码

```
public class TriangleActivity extends Activity implements android.opengl.GLSurfaceView.Renderer
{
    private static final String TAG = TriangleActivity.class.getSimpleName();

    private static final int Coordinates_In_A_Vertex = 2;
    private static final int Vertices_In_A_Triangle = 3;
    private static final int Bits_In_A_Byte = 8;
    private static final int Bits_In_A_Float = Float.SIZE;
    private static final int Bytes_In_A_Float = Bits_In_A_Float / Bits_In_A_Byte;

    private GLSurfaceView glSurfaceView;
    private FloatBuffer vertices;
    private int width;
    private int height;

    /*
     * Called when the activity is first created.
     */
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.triangle);
        glSurfaceView=(GLSurfaceView)findViewById(R.id.surfaceview);
        //glSurfaceView.setEGLConfigChooser(8,8,8,8,16,0);

        glSurfaceView.setRenderer(this);
//      glSurfaceView.getHolder().setFormat(PixelFormat.TRANSPARENT);
//      glSurfaceView.setZOrderOnTop(true);

    }

    /*
     * Called when the activity is resumed.
     * The activity is resumed whenever it is being presented to user (from the background).
     */
    @Override
    public void onResume()
    {
        super.onResume();
        glSurfaceView.onResume();
    }

    /*
     * Called when the activity is paused.
     * The activity is paused whenever it is placed into the background. Various things can cause this (pressing the home button, receiving a phone call, turning off the display, etc.).
     */
    @Override
    public void onPause()
    {
        glSurfaceView.onPause();
        super.onPause();
    }

    @Override
    public void onDrawFrame(GL10 gl)
    {
        gl.glClear(GL10.GL_COLOR_BUFFER_BIT);
        gl.glColor4f(0.64313725490196f, 0.77647058823529f, 0.22352941176471f, 1);
        gl.glVertexPointer(2, GL10.GL_FLOAT, 0, vertices);
        gl.glDrawArrays(GL10.GL_TRIANGLES, 0, 3);
    }

    @Override
    public void onSurfaceChanged(GL10 gl, int width, int height)
    {
        Log.d(TAG, "Surface changed! width = " + String.valueOf(width) + ", height = " + String.valueOf(height));
    }

    @Override
    public void onSurfaceCreated(GL10 gl, EGLConfig config)
    {
        Log.d(TAG, "Surface Created!");

        width = glSurfaceView.getWidth();
        height = glSurfaceView.getHeight();

        gl.glViewport(0, 0, width, height);
        gl.glMatrixMode(GL10.GL_PROJECTION);
        gl.glLoadIdentity();
        gl.glOrthof(0, 1, 0, 1, 1, -1);
        //New Changes
//      gl.glDisable(GL10.GL_DITHER);
//      gl.glHint(GL10.GL_PERSPECTIVE_CORRECTION_HINT,
//              GL10.GL_FASTEST);

         //gl.glClearColor(1, 1, 1, 1);
//       gl.glEnable(GL10.GL_CULL_FACE);
//       gl.glShadeModel(GL10.GL_SMOOTH);
//       gl.glEnable(GL10.GL_DEPTH_TEST);
         //End

        ByteBuffer byteBuffer = ByteBuffer.allocateDirect(Coordinates_In_A_Vertex * Vertices_In_A_Triangle * Bytes_In_A_Float);
        byteBuffer.order(ByteOrder.nativeOrder());

        vertices = byteBuffer.asFloatBuffer();

        vertices.put(new float[]
                { 
                    0.0f, 0.0f,
                    0.5f, 1.0f,
                    1.0f, 0.0f
                }
        );

        vertices.flip();

        gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
    }
} 
```

# android - 活动 B 完成后如何在活动 A 中启动功能？

> ID：12817224
> 
> 赞同：1
> 
> 时间：2012-10-10T10:29:28.557
> 
> 标签：android, android-activity

我的应用有 2 个活动。主要活动是 A。我在 A 中调用 start B。（在 B 中，当用户按下后退按钮 B 的进程将被此代码杀死）

```
int pid = android.os.Process.myPid();
android.os.Process.killProcess(pid); 
```

我的问题是，当 B 完成时，如何在 A 中启动一个函数？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T10:32:04.987

通过活动 A 开始你的活动 B

```
Intent intent = new Intent(ActivityA.this,ActivityB.Class);
startActivityForResult(intent,0); 
```

完成你的活动 B

```
Intent intent = new Intent();
setResult(RESULT_OK,intent );       
finish(); 
```

现在在 ActivityA

```
@Override
  protected void onActivityResult(int requestCode, int resultCode, Intent data)
  {
    super.onActivityResult(requestCode, resultCode, data);
    //Do your work here in ActivityA

  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T10:32:13.750

而不是`int pid = android.os.Process.myPid(); android.os.Process.killProcess(pid);`只使用`finish();`. 这将帮助您回到之前的活动。根据您的代码，该应用程序被完全杀死。

# jquery - 通过 html5 视频中的 JQuery 更改源在 IE9 中不起作用

> ID：12817231
> 
> 赞同：0
> 
> 时间：2012-10-10T10:29:45.477
> 
> 标签：jquery, html, html5-video

**问题：**通过 jQuery 更改 HTML5 视频的源元素会在 IE9 中引发错误

这是我更改视频源的 jQuery 函数：

```
var hdswipe = function(){
                var currVid, currExt, currVidName, currQuality, i, tempExt;
                if($hdVideo.attr('paused')==false)
                    playerstage=1;
                currVid = $hdVideo[0].currentSrc;
                currExt = currVid.substr(currVid.lastIndexOf('.') + 1);

                for(i=0; i<videoAttr.quality.length; i++) //Get current video quality
                    if(currVid == videoAttr.src[i])
                        currQuality=videoAttr.quality[i];

                for(i=0; i<videoAttr.quality.length; i++) //Swipe the Video
                {
                    tempExt = videoAttr.src[i].substr(videoAttr.src[i].lastIndexOf('.') + 1);
                    if((currExt==tempExt)&&(currQuality!= videoAttr.quality[i]))
                    {
                        $hdVideo.attr('src', videoAttr.src[i]);
                        createSeek();
                        createBuffer();
                        playerstage=0;
                        gPlay();
                        break;
                    }
                }
                if(currQuality == "sd")
                    $("a.hd-hd-swipe-button").addClass("hd-hd-swipe-button-hd");
                else
                    $("a.hd-hd-swipe-button").removeClass("hd-hd-swipe-button-hd");
               return false;
            } 
```

执行此行时，IE9 中会显示错误消息：

```
$hdVideo.attr('src', videoAttr.src[i]); 
```

错误信息是：

> 未定义函数：$hdVideo.attr('buffered').end(0);

但是缓冲功能工作正常，因为我播放视频直到“hdswipe”函数被调用。

请解决我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T10:36:07.867

我想您应该尝试使用以下语法：

```
$hdVideo[0].buffered.end(0); 
```

# freeswitch - 如何在 freeswitch 上拨打本地软件电话？

> ID：12817232
> 
> 赞同：2
> 
> 时间：2012-10-10T10:29:45.600
> 
> 标签：freeswitch

我在 freeswitch 上设置了一个本地软电话，分机号为 1000。它可以连接，我可以播放俄罗斯方块主题等。我想使用 freeswitch 命令呼叫这个软电话。任何人都可以帮忙吗？

我知道这与 sofia 和发起命令有关，但我无法让它们工作

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-04-30T08:20:35.843

您可以使用：

```
originate user/1000 &echo() 
```

这会将您的手机连接到 freeswitch 到内部回声功能

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T08:50:52.123

你确定你的软电话已经注册了吗？CLI 中的此命令应列出所有注册用户：

```
sofia status profile internal reg 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T10:37:09.880

Originate 命令连接两个端点，所以你应该有一些其他的 SIP 目的地或分机来连接。

在这里您可以使用音乐或回声端点，例如：[http ://www.iptel.org/service](http://www.iptel.org/service)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-14T09:37:03.763

**在尝试运行 freeswitch 服务器时**

**错误：无法锁定 pid 文件 /usr/local/freeswitch/run/freeswitch.pid**

这可以通过以下语法在 linux(fedora/centos) 中解决

1）打开终端

2）按 su （移动管理员根）

3）输入密码

应用以下命令

4)**网络统计 -npl**

然后它显示所有正在运行的端口

查找为 freeswitch 运行的端口 例如：tcp 0 0 127.0.0.1:8021 0.0.0.0:* LISTEN 708/freeswitch

5) **fuser -k 708/tcp** 使用响应中给出的数字 ex:710

6）杀死-9 710

它在我的系统中工作我希望有助于再次运行你的 freeswitch 服务器谢谢

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-13T02:23:18.350

只需使用：

发起 sofia/profile/USER@yourserver.com。但如果您正在开发基于 Web 的应用程序，请启用 mod_xml_rpc 并使用 REST 发送命令

# java - Valgrind 与共享库 jni

> ID：12817236
> 
> 赞同：3
> 
> 时间：2012-10-10T10:30:13.500
> 
> 标签：java, android, linux, java-native-interface, valgrind

我有一个共享库，Java 平台将通过 JNI 调用它。是否可以使用 Valgrnid 检查 solib 中的内存泄漏？

我试过了

```
valgrind java -cp bin:libs/junit/junit.jar org.junit.runner.JUnitCore com.test.app

==7902== Memcheck, a memory error detector
==7902== Copyright (C) 2002-2012, and GNU GPL'd, by Julian Seward et al.
==7902== Using Valgrind-3.8.0 and LibVEX; rerun with -h for copyright info
==7902== Command: java -cp bin:libs/junit/junit.jar org.junit.runner.JUnitCore com.test.FnTestNPVRRemoteBooking
==7902==
JUnit version 4.11-SNAPSHOT-20120805-1225
.
.
.
.
.
end 
```

Valgrind 运行但不打印任何结果，可能是因为它不打算为 java 应用程序运行，但有什么解决方法？

一般来说，是否有一种解决方案可以仅在 solibs 上检查内存泄漏？

是否可以将 Valgrind 连接到 PID（Linux 平台）？（我知道 GDB 可以上钩）如果是的话，它会帮助我的场景，因为 App PID 将是一个 Java 应用程序。

PS - 我的应用程序不打算在 android 上运行，但可能是 android 开发人员知道解决方案，所以添加 android 标签。

# iphone - 将 Facebook 与 iOS 集成

> ID：12817238
> 
> 赞同：15
> 
> 时间：2012-10-10T10:30:14.407
> 
> 标签：iphone, ios, facebook, facebook-graph-api, facebook-ios-sdk

当我尝试将 facebook 集成到我的应用程序时，我得到了所有这些错误以及大约 18 个错误。

```
Undefined symbols for architecture i386:
"_ACAccountTypeIdentifierFacebook", referenced from:
  +[FBSession renewSystemAuthorization] in FacebookSDK(FBSession.o)
"_ACFacebookAppIdKey", referenced from:
  -[FBSession authorizeUsingSystemAccountStore:accountType:permissions:defaultAudience:isReauthorize:] in FacebookSDK(FBSession.o)
"_ACFacebookAudienceEveryone", referenced from:
  -[FBSession authorizeUsingSystemAccountStore:accountType:permissions:defaultAudience:isReauthorize:] in FacebookSDK(FBSession.o)
"_ACFacebookAudienceFriends", referenced from:
  -[FBSession authorizeUsingSystemAccountStore:accountType:permissions:defaultAudience:isReauthorize:] in FacebookSDK(FBSession.o)
"_ACFacebookAudienceKey", referenced from:
  -[FBSession authorizeUsingSystemAccountStore:accountType:permissions:defaultAudience:isReauthorize:] in FacebookSDK(FBSession.o)
"_ACFacebookAudienceOnlyMe", referenced from:
  -[FBSession authorizeUsingSystemAccountStore:accountType:permissions:defaultAudience:isReauthorize:] in FacebookSDK(FBSession.o)
"_ACFacebookPermissionsKey", referenced from: 
```

我正在使用关于如何将 facebook 添加到我的页面的最新 facebook 说明，但我正在使用 iOS 4.3 及更高版本。所以它需要迎合4.3。我已将 Accounts.framework 设置为可选。有谁知道这些错误是什么意思？我还尝试添加任何其他未链接的实现文件。

每次我访问 FBSession 或 FBConnect 等时都会生成错误。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-10-12T18:29:00.823

作为记录：我们希望您使用 XCode 4.5 来使用 Facebook SDK 3.1 进行开发，如此处[所述](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/3.1/)

Account.framework、Social.framework 和 AdSupport.framework 都是必需的（如此处所述[）](https://developers.facebook.com/docs/tutorial/iossdk/upgrading-from-3.0-to-3.1/)，但如果您也想为较旧的 iOS 版本构建，请使用“可选”标志。

祝你好运。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-10T12:05:00.697

使用 Account.framework，您还必须添加 Social.framework 和 AdSupport.framework。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-31T19:00:43.573

If you drag and drop Adsuport, Accounts or Social libraries from another project and you select "Copy items into destination group's folder" AdSuport and Social directories will be created into yours app source folder and you will get this linker error, remove directories and add libraries from project's Buld Phases -> Link Binary, you may also need to add libsqlite3.dylib

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T11:51:45.910

我认为需要 Accounts.framework。但它仅在 iOS 5 和更高版本中实现，更多信息请参见[开发人员参考](http://developer.apple.com/library/ios/#documentation/Accounts/Reference/ACAccountTypeClassRef/Reference/Reference.html#//apple_ref/doc/uid/TP40011022)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T13:03:45.283

通过升级到 xcode 4.5.1 然后添加社交和广告支持框架以及 -lsqlitee3 左右来解决这个问题。我之前确实添加了 lsqlite3，但它在顶部表示了多个值，所以我只是去掉了不必要的基本 sdk 注释并且它起作用了。

# java - JTextPane 和悬挂缩进故障

> ID：12817239
> 
> 赞同：3
> 
> 时间：2012-10-10T10:30:17.503
> 
> 标签：java, swing, jtextpane

我正面临 JTextPane 和悬挂缩进的恼人小错误。

这是一个简单的例子：

```
public class Scrap {

public static void main(String[] args) {
    JFrame frame = new JFrame();
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setSize(200, 200);
    frame.setLayout(new BorderLayout());

    JTextPane textPane = new JTextPane();

    JScrollPane scroll = new JScrollPane(textPane);

    frame.add(scroll);

    StyledDocument doc = (StyledDocument) textPane.getDocument();

    try {

        String str = "Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait nulla facilisi. Nam liber tempor cum ";

        doc.insertString(doc.getLength(), str, null);

        // Hanging indent
        MutableAttributeSet mas = new SimpleAttributeSet();
        StyleConstants.setLeftIndent(mas, 20);
        StyleConstants.setFirstLineIndent(mas, -20);
        doc.setParagraphAttributes(0, str.length(), mas, false);

    } catch (BadLocationException e) {
        e.printStackTrace();
    }

    frame.setVisible(true);
    frame.setLocationRelativeTo(null);
}
} 
```

在我的计算机上，使用 Java 7，由于某种原因，第一行比其他行更粗......有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T12:54:12.637

我回到了这个，我把它修好了！至少足以满足我的需求。正如我所怀疑的那样，问题在于 JTextPane 两次绘制了第一行。

Oracle 方便地忽略了我的错误报告，我猜他们只是不再关心 Swing。

这是修复（包括我从某处找到的 Java 7 的长自动换行修复）：

```
import javax.swing.*;
import javax.swing.text.Element;
import javax.swing.text.ParagraphView;
import javax.swing.text.View;
import javax.swing.text.ViewFactory;
import javax.swing.text.html.HTMLEditorKit;
import javax.swing.text.html.InlineView;
import java.awt.*;

/**
 * A fixed HTML Editor Kit, which fixes two things:
 * - Word wrapping of long words (bugged in Java 7)
 * - A hanging indent bug
 */
public class FixedHtmlEditorKit extends HTMLEditorKit {

@Override
public ViewFactory getViewFactory() {
    return new HTMLEditorKit.HTMLFactory() {
        public View create(Element e) {
            View v = super.create(e);

            if (v instanceof InlineView) {
                return new InlineView(e) {
                    public int getBreakWeight(int axis, float pos, float len) {
                        return GoodBreakWeight;
                    }

                    public View breakView(int axis, int p0, float pos, float len) {
                        if (axis == View.X_AXIS) {
                            checkPainter();
                            int p1 = getGlyphPainter().getBoundedPosition(this, p0, pos, len);
                            if (p0 == getStartOffset() && p1 == getEndOffset()) {
                                return this;
                            }
                            return createFragment(p0, p1);
                        }
                        return this;
                    }
                };
            }
            else if (v instanceof ParagraphView) {
                return new ParagraphView(e) {
                    protected SizeRequirements calculateMinorAxisRequirements(int axis, SizeRequirements r) {
                        if (r == null) {
                            r = new SizeRequirements();
                        }
                        float pref = layoutPool.getPreferredSpan(axis);
                        float min = layoutPool.getMinimumSpan(axis);
                        // Don't include insets, Box.getXXXSpan will include them.
                        r.minimum = (int) min;
                        r.preferred = Math.max(r.minimum, (int) pref);
                        r.maximum = Integer.MAX_VALUE;
                        r.alignment = 0.5f;
                        return r;
                    }

                    private boolean allowedToPaintFirstView = true;

                    private float tabBase;

                    /*
                     * We need to override this since tabBase is private in ParagraphView.
                     */
                    @Override
                    protected float getTabBase() {
                        return tabBase;
                    }

                    @Override
                    protected void paintChild(Graphics g, Rectangle alloc, int index) {
                        // Don't paint the first index twice!
                        if (index == 0 && !allowedToPaintFirstView) {
                            return;
                        }
                        super.paintChild(g, alloc, index);
                    }

                    public void paint(Graphics g, Shape a) {
                        Rectangle alloc = (a instanceof Rectangle) ? (Rectangle)a : a.getBounds();

                        tabBase = alloc.x + getLeftInset();

                        // line with the negative firstLineIndent value needs
                        // special handling
                        if (firstLineIndent < 0) {
                            Shape sh = getChildAllocation(0, a);
                            if ((sh != null) &&  sh.intersects(alloc)) {
                                int x = alloc.x + getLeftInset() + firstLineIndent;
                                int y = alloc.y + getTopInset();

                                Rectangle clip = g.getClipBounds();
                                Rectangle tempRect = new Rectangle();
                                tempRect.x = x + getOffset(X_AXIS, 0);
                                tempRect.y = y + getOffset(Y_AXIS, 0);
                                tempRect.width = getSpan(X_AXIS, 0) - firstLineIndent;
                                tempRect.height = getSpan(Y_AXIS, 0);
                                if (tempRect.intersects(clip)) {
                                    tempRect.x = tempRect.x - firstLineIndent;
                                    allowedToPaintFirstView = true;
                                    paintChild(g, tempRect, 0);
                                    allowedToPaintFirstView = false;
                                }
                            }
                        }

                        super.paint(g, a);
                    }
                };
            }
            return v;
        }
    };
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T11:23:33.367

如果我没记错的话，您可能正在使用 MetalLookAndFeel，它在默认情况下对许多控件使用粗体字体。

试试这个，在你的主要方法中关闭金属对粗体字体的使用；

```
 javax.swing.SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            //Turn off metal's use of bold fonts
        UIManager.put("swing.boldMetal", Boolean.FALSE);
            createAndShowGUI();
        }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-25T20:55:07.110

差不多五年后，这段代码派上了用场。但是，我们确实遇到了一个问题，即在设置制表位时初始绘制显示错误的制表符行为。这可能是特定于 Java 8 的，或者它可能只是在正确的时间发生重绘的应用程序中很容易隐藏。

我们通过反射将 tabBase 强制注入父级解决了这个问题，因为扩展类的任何进一步尝试变得复杂。

这是已接受答案的修改部分

```
@Override
public void paint(Graphics g, Shape a) {
    final Rectangle alloc = (a instanceof Rectangle) ? (Rectangle)a : a.getBounds();

    tabBase = alloc.x + getLeftInset();

    // Set the tabBase into the parent ParagraphView - not all its use getTabBase() but the parent
    // handles some of the painting, so it needs to have this value set properly
    try {
        final Field parentTabBase = ParagraphView.class.getDeclaredField("tabBase");
        parentTabBase.setAccessible(true);
        parentTabBase.set(this, tabBase);
        parentTabBase.setAccessible(false);
    } catch (NoSuchFieldException | IllegalAccessException e) {
        throw new RuntimeException("Error encountered setting tabBase", e);
    }

    // line with the negative firstLineIndent value needs
    // special handling
    if (firstLineIndent < 0) { 
```

# php - Zend 奇怪的行为：当第一个请求仍在运行时无法处理第二个请求

> ID：12817240
> 
> 赞同：3
> 
> 时间：2012-10-10T10:30:20.567
> 
> 标签：php, zend-framework, pdo

我正在使用 Zend Framework 构建聊天功能。
在javascript中，我使用ajax来请求这样`http://mydomain.com/chat/pull`的函数pullAction

```
public function pullAction() {

        while ( true ) {
            try {
                $chat = Eezy_Chat::getNewMessage();
                if($chat){
                    $chat->printMessage();
                    break;
                }
                sleep ( 1 ); // sleep 1 secound between each loop
            } catch ( Zend_Db_Adapter_Exception $ex ) {
                if ($ex->getCode () == 2006) { // reconnect db if timeout
                    $dbAdapter = Zend_Db_Table::getDefaultAdapter ();
                    $dbAdapter->closeConnection ();
                    $dbAdapter->getConnection ();
                }
            }
    }
} 
```

此操作将一直运行，直到其他用户发送一些消息。
但是，当这个请求正在运行时，我无法访问我网站上的任何其他页面。他们都等待`http://mydomain.com/chat/pull`完成它的执行。

我在谷歌上寻找解决方案，但仍然没有找到。
感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T10:56:34.393

这听起来像会话锁定。

当您使用存储在文件系统上的会话时，PHP 将在每个请求上锁定会话文件，并且仅在该请求通过时才释放它。当文件被锁定时，任何其他想要访问该文件的请求都将挂起并等待。

由于您的聊天脚本将永远循环，检查新消息，会话文件也将被永远锁定，从而阻止同一用户访问需要会话访问的站点的不同部分。

一种解决方案是将完成请求所需的所有会话数据加载到内存中，然后`Zend_Session::writeClose`尽快使用以释放锁。

# pdo - 在 Drupal 7 中的用户注册表单中添加 10 位数字的字段

> ID：12817246
> 
> 赞同：0
> 
> 时间：2012-10-10T10:30:38.527
> 
> 标签：pdo, drupal-7, long-integer, user-registration, form-fields

我的用户注册表单有一个 10 位数长的联系号码（手机号码）字段。我使用了一个普通的整数字段，这给了我“超出范围”错误

> PDOException：SQLSTATE [22003]：数值超出范围：1264 第 1 行的“field_mobile_number_value”列的值超出范围：INSERT INTO {field_revision_field_mobile_number}（entity_type、entity_id、revision_id、bundle、delta、language、field_mobile_number_value）值（： db_insert_placeholder_0，：db_insert_placeholder_1，：db_insert_placeholder_2，：db_insert_placeholder_3，：db_insert_placeholder_4，：db_insert_placeholder_5，：db_insert_placeholder_6）；数组 ( [:db_insert_placeholder_0] => 用户 [:db_insert_placeholder_1] => 26 [:db_insert_placeholder_2] => 26 [:db_insert_placeholder_3] => 用户 [:db_insert_placeholder_4] => 0 [:db_insert_placeholder_5] => und [:db_insert_placeholder_6] => 9841232323 ）在 field_sql_storage_field_storage_write() （C 的第 449 行：

Drupal 核心中似乎没有长整数字段。我该如何解决这个问题？

我什至尝试直接在数据库中将字段类型更改为“BIG INT”。但错误仍然存​​在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T12:03:14.553

您可以尝试 cck_phone 模块，否则将其作为文本字段并对其应用验证。

[http://drupal.org/project/cck_phone](http://drupal.org/project/cck_phone)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T05:30:14.677

您可以尝试[http://drupal.org/project/bigint](http://drupal.org/project/bigint)，让您拥有真正的 BigInt (19) 值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-08T10:46:43.443

> PDOException：SQLSTATE [22003]：数值超出范围：1264 第 1 行的“field_contact_numbers_value”列的值超出范围：INSERT INTO {field_data_field_contact_numbers}（entity_type、entity_id、revision_id、bundle、delta、language、field_contact_numbers_value）值（： db_insert_placeholder_0，：db_insert_placeholder_1，：db_insert_placeholder_2，：db_insert_placeholder_3，：db_insert_placeholder_4，：db_insert_placeholder_5，：db_insert_placeholder_6），（：db_insert_placeholder_7，：db_insert_placeholder_8，：db_insert_placeholder_9，：db_insert_placeholder_10，：db_insert_placeholder_11，：db_insert_placeholder_12，：db_insert_placeholder_13）; 数组 ( [:db_insert_placeholder_0] => 节点 [:db_insert_placeholder_1] => 103894 [:db_insert_placeholder_2] => 111454 [:db_insert_placeholder_3] => 学院 [:

我有同样的问题。然后我使用文本字段并进行验证。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-03-04T12:01:05.130

根据[https://www.drupal.org/node/1003692#comment-6097068](https://www.drupal.org/node/1003692#comment-6097068) ，只有当整数类型**小于 < -2.147.483.648 OR GREATER THAN> 2.147.483.647**时，您才能存储 。

# c# - Autofac - 找不到类型“X”的构造函数

> ID：12817247
> 
> 赞同：1
> 
> 时间：2012-10-10T10:30:43.363
> 
> 标签：c#, reflection, autofac

尝试将一个依赖项注入我当前正在注册的依赖项时遇到问题。我有一个应用程序，它在启动时启动引导加载程序以从设置文件中读取，然后使用来自该设置文件中特定值的反射创建一个对象。我会试着让代码在这里说话。

**设置文件**

设置文件是一个普通的旧 XML 文件，它序列化/反序列化为一个调用的对象，该对象`BootstrapSettings`遵循以下合同：

```
public interface IBootstrapSettings
{
    string Get(string key);
    void Set(string key, string value);
} 
```

在此设置文件中，我有一个特定的密钥，用于标识`IEncryptor`我打算用于此应用程序的内容，此时我可以选择`PlainTextEncryptor`or `TDESEncryptor`，后者从设置文件中读取密码，因此在其构造函数中我传递了一个实例of`IBootstrapSettings`从设置文件中读取此密码。目前我正在向`IBootstrapSettings`每个加密器注入一个实例——即使`PlainTextEncryptor`不使用它。我这样做是因为我必须使用反射创建这个实例，并且不知道如何区分不带参数的构造函数和创建`IEncryptor`类型时的构造函数（但这是另一个问题我想）。

**IEncryptor 构造函数**

以下是`IEncryptor`我目前拥有的每个构造函数。

```
public sealed class PlainTextEncryptor : IEncryptor
{
    private readonly IBootstrapSettings _bootstrapSettings;

    public PlainTextEncryptor(IBootstrapSettings bootstrapSettings)
    {
        _bootstrapSettings = bootstrapSettings;
    }
}

public sealed class TDESEncryptor : IEncryptor
{
    private readonly IBootstrapSettings _bootstrapSettings;

    public TDESEncryptor(IBootstrapSettings bootstrapSettings)
    {
        _bootstrapSettings = bootstrapSettings;
    }
} 
```

**注射**

关于我如何设置我的依赖项。我有一个 Autofac 模块，它在创建其他任何东西之前创建引导依赖项 - 它看起来像这样：

```
public sealed class BootstrapSettingsModule : Autofac.Module
{
    private readonly string _filePath;

    public BootstrapSettingsModule(string filePath)
    {
        _filePath = filePath;
    }

    protected override void Load(ContainerBuilder builder)
    {
        base.Load(builder);

        builder.Register(c => new BootstrapSettings(_bootstrapSettingsPath))
            .As<IBootstrapSettings>()
            .SingleInstance();

        builder.Register(c => (IEncryptor)Activator.CreateInstance(Type.GetType(c.Resolve<IBootstrapSettings>().Get("encryptionprovider")), args: new { bootstrapSettings = c.Resolve<IBootstrapSettings>() }))
            .As<IEncryptor>()
            .SingleInstance();
    }
} 
```

现在这执行得很好，当我尝试`.Resolve`一个实例时出现问题，`IEncryptor`我得到错误**Constructor on type 'whatever encryptor type' not found**。我认为这是因为 Autofac 无法解析我的问题`IBootstrapSettings`，并且因为我没有默认的无参数构造函数，`IEncryptor`所以它很适合。

我对在这里做什么有点不知所措，我是否通过将 指定`IBootstrapSettings`为单个实例做错了……还是我只是不正确理解 Autofac 的绑定？一如既往地感谢任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T10:38:02.123

我不明白你为什么不只是使用 Autofac 的设施。

```
protected override void Load(ContainerBuilder builder)
{
    base.Load(builder);

    var settings = new BootstrapSettings(_bootstrapSettingsPath);
    builder.RegisterInstance(settings)
        .As<IBootstrapSettings>()
        .SingleInstance();

    var encryptorType = Type.GetType(settings.Get("encryptionprovider"));
    builder.RegisterType(encryptorType)
        .As<IEncryptor>()
        .SingleInstance();
} 
```

这将为您带来额外的优势，即您不需要`IBootstrapSettings`在每个加密器中都有一个带有参数的构造函数。您只需要那些真正使用该参数的人。

# installation - InstallJammer 项目更新或卸载

> ID：12817248
> 
> 赞同：3
> 
> 时间：2012-10-10T10:30:46.873
> 
> 标签：installation, auto-update

我的 installJammer 项目有问题。目前正在为 java 应用程序创建设置。我需要创建一个在用户选择升级到新版本时调用的操作。更清楚地说，如果存在以前的版本，则会出现一个带有两个单选按钮（更新和升级）的窗口。

当用户点击升级时，现有版本将与现有版本一起升级。我怎样才能做到这一点？

期待任何人的帮助，因为我需要尽快解决。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T14:51:43.737

亲爱的朋友，

在 installjammer 中，升级安装程序是一种跳过常规安装程序的一些过程并将其信息添加到先前安装的应用程序的卸载的安装程序。您可以使用升级应用程序 ID 升级您的项目，可以使用**<%UpgradeApplicationID%>**虚拟文本访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T06:09:46.503

通过设置 <%UpgradeApplicationID%> 您可以使用当前更新您激动人心的项目。为了获得合适的效果，您应该在 installjammer 中设置升级应用程序。之后，设置操作是 - 检查以前的安装，获取以前的安装信息。然后您应该设置一个虚拟文本操作以进行完美升级。在虚拟测试操作中，检查高级属性，将自动更新标记为“是”，然后将虚拟文本填充为<%UpgradeApplicationID%>。之后根据您的要求提供消息框、退出等。跳你会得到这个。如果还有更多困惑，请通过下载以下链接参考 installjammer 用户指南 - www.installjammer.com/docs/InstallJammerUserGuide.pdf

# android - android中不同的纵向布局

> ID：12817249
> 
> 赞同：1
> 
> 时间：2012-10-10T10:30:48.323
> 
> 标签：android, android-layout, android-ui, android-screen-support

最初，我仅在纵向模式下为手机开发了我的应用程序。但现在，我也想将其转移到平板电脑上，但仅限纵向模式。我的问题是，我们可以为不同的屏幕尺寸定义不同的纵向模式布局吗？它适用于平板电脑，但 UI 被拉伸。如果是，如何..？如果有人可以举个例子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T10:39:32.473

是的，您可以为不同尺寸的设备定义相同的布局。

假设您已经拥有布局文件夹，您可以创建另一个名为“layout-xlarge”的文件夹。

在这里，创建一个与布局文件夹中**同名的 xml 布局。**现在，当您运行该应用程序时，只有 10 英寸平板电脑（指定为具有超大屏幕的设备）将使用“layout-xlarge”文件夹。

所有其他较小的设备将使用“布局”文件夹。

您的文件夹结构将如下所示：

```
res/layout/my_layout.xml             // layout for normal screen size ("default")
res/layout-xlarge/my_layout.xml      // layout for extra large screen size 
```

您可以对小屏幕和大屏幕等执行相同操作。

这是一个相当简短的描述，当您有机会时，您最好阅读一下：

[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T10:42:34.860

我认为您必须在资源文件夹中创建 3 个布局，并且每个布局都具有相同名称的 xml 文件

那是

1.  布局（包含 a.xml、b.xml、c.xml）

2.  布局大（也包含 a.xml、b.xml、c.xml）

3.  小布局（也包含 a.xml、b.xml、c.xml）

在 QVGA、HVGA 等不同大小的模拟器上检查您的应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T10:46:20.680

是的，您可以为不同的屏幕尺寸开发纵向模式的不同布局

```
res/layout/my_layout.xml             // layout for normal screen size ("default")
res/layout-small/my_layout.xml       // layout for small screen size
res/layout-large/my_layout.xml       // layout for large screen size
res/layout-xlarge/my_layout.xml      // layout for extra large screen size
res/layout-xlarge-land/my_layout.xml // layout for extra large screen size for land scale 
```

默认情况下 res/layout/my_layout.xml 这意味着您将为纵向模式创建 my_layout。

只需处理文件夹层次结构。

[更多细节](http://developer.android.com/guide/practices/screens_support.html)

# java - Hadoop 序列文件大小

> ID：12817252
> 
> 赞同：1
> 
> 时间：2012-10-10T10:31:08.690
> 
> 标签：java, hadoop, size, mahout, sequencefile

我正在创建存储在 SequenceFile 中的 Hadoop Vector 的键值对的 HashMap。为了提高效率，我想知道键值对的向量有多长，以便我可以用适当的大小初始化 HashMap。

我使用了 Mahout `seqdumper`，它在每个转储向量的末尾附加了一个计数。我查看了它的代码，但它使用了一个简单的迭代计数器（对于每一行`counter++`），因此不是我想要的。

看起来也[`SequenceFile.MetaData`](http://hadoop.apache.org/docs/r0.20.2/api/org/apache/hadoop/io/SequenceFile.Metadata.html)很有希望，所以我研究了一下。但是调试器显示它不包含任何条目。

有没有其他方法可以快速获得类似于`.size()`SequenceFile 中的 Hadoop Vector 的方法？

**编辑：**这是我正在变成地图的 seqdumper 的输出。具体来说，每个键值对都是一个 IntWritable / NamedVector 对。我希望创建从键号到 URI 字符串的映射。共有 46599 个键值对，`seqdumper`在文件末尾附加。

```
Input Path: luceneVectors
Key class: class org.apache.hadoop.io.IntWritable Value Class: class org.apache.mahout.math.VectorWritable
Key: 0: Value: http://data.artsholland.com/production/73adae07-78c6-4180-93a4-34802090b5f1:{22118:0.18376858424635545,20381:0.40144184831236357,53753:0.2605347739121081,51569:0.2578896608715637,21930:0.2277873354603338,63035:0.27765920678967304,36979:0.2709104089668357,68351:0.15788776111071648,19436:0.2988119565549418,17991:0.12435264873296237,10356:0.3276902508762499,3410:0.27239123806574506,62942:0.18961849195965186,32527:0.24827631823639457,69909:0.11723303910369048,19832:0.2138117449778048}
Key: 1: Value: http://data.artsholland.com/production/c9fcc92b-18bb-4bfb-af52-380707f8d0d7:{41167:0.07191351238480857,61391:0.07496730342220936,[...]
[...],19156:0.0687215948604245}
Count: 46599 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T19:54:46.753

不确定，我的回答是否有用，但是如果您需要知道 seq 文件中有多少个键，您可以使用 MapFile 而不是 SequenceFile。知道 indexInterval 您可以通过读取密钥文件来估计密钥的数量。如果将 indexInterval 设置得比较大，则可以保持较小的索引文件，并且仍然可以估计键的数量。作为额外的奖励，您可以获得密钥的采样，这可以帮助您进一步优化。

有关不同版本的 SequenceFiles 的更多详细信息，请参见[http://www.cloudera.com/blog/2011/01/hadoop-io-sequence-map-set-array-bloommap-files/](http://www.cloudera.com/blog/2011/01/hadoop-io-sequence-map-set-array-bloommap-files/)

# php - ImageCopyMerge 似乎没有合并

> ID：12817254
> 
> 赞同：0
> 
> 时间：2012-10-10T10:31:15.893
> 
> 标签：php, html, image

ImageCopyMerge 似乎只处理底部图像？

作为试验，我正在尝试叠加和偏移白色和蓝色图像

```
$dest = '../images/pictures/white.gif';
$src = '../images/pictures/blue.gif';
imagecopymerge($dest, $src, 12, 65, 0, 0, 175, 260, 50);
imagegif($dest);
imagedestroy($dest);
imagedestroy($src); 
```

然后稍后在 HTML 中显示输出

```
<img src="<?php echo($dest); ?>" /> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T10:37:25.227

这样做，您正在破坏图像并在此之后使用，因为它没有出现。

```
<?php
$dest = '../images/pictures/white.gif';
$src = '../images/pictures/blue.gif';
imagecopymerge($dest, $src, 12, 65, 0, 0, 175, 260, 50);
imagegif($dest);
?>
<img src="<?php echo $dest; ?>" />   // your html code
<?php
imagedestroy($dest);
imagedestroy($src); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T10:39:22.870

要处理您的图像，首先需要使用这些`imagecreatefrom*`函数将图像加载到 RAM 中。

```
$dest = imagecreatefromgif(''../images/pictures/white.gif');
$src = imagecreatefromgif('../images/pictures/blue.gif'); 
```

以下也不起作用。

```
<img src="<?php echo($dest); ?>" /> 
```

您要么需要链接到调用该[`imagegif()`](http://php.net/imagegif)函数的 php 脚本

```
<img src="your/script.php" /> 
```

或者您需要将图像数据转换为[数据 URL](http://en.wikipedia.org/wiki/Data_URI_scheme)（但如果图像很大，我不建议这样做）。

```
ob_start();
imagegif($dest);
$imagedata = ob_get_contents();
ob_end_clean();
echo '<img src="data:image/png;base64,"' . base64($imagedata) . '" />'; 
```

# c++ - Qt(5)：使用 QtMultimedia 在 2 个不同的表面上渲染相同的视频

> ID：12817258
> 
> 赞同：4
> 
> 时间：2012-10-10T10:31:18.040
> 
> 标签：c++, qt, qt5

我正在 Qt(5) 中开发一个应用程序，基本上我正在尝试使用 QtMultimedia5 将相同的视频源渲染到我的窗口中的 2 个位置。我在 QML 中做，但如果有 C++ 中的解决方案，我会很乐意实现它。

在窗口中显示视频没有问题。当我尝试使用相同的 QMediaSource 但将其渲染到 2 个窗口/控件时，问题就开始了。

我看到正在发生的是调用 QMediaService::requestControl ，它返回一个 QVideoRendererControl 对象。然后调用 QVideoRendererControl::setSurface 来设置它渲染视频的表面。因此，据我所知，QMediaService 有一个表面，它可以在任何给定时间呈现视频。

如何渲染到 2 个或更多表面？还有其他课程更适合我的需要吗？

干杯

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-13T13:39:00.460

嗯，这很简单，但不是我预期的方式。你一定会喜欢 QtQuick2。

所以我的 QML 代码中有一个 MediaPlayer 源和一个 VideoOutput 项：

```
MediaPlayer {
    id: mp1
    source: "slide-1.wmv"
}
VideoOutput {
    id: tbltSlides
    anchors.fill: parent
    visible: true
    source: mp1
} 
```

我所要做的就是添加一个 ShaderEffectSource 并将 tbltSlides 设置为其源。很简单：

```
ShaderEffectSource {
    id: slides
    x: 600
    width:250
    height: 250
    sourceItem: tbltSlides
    visible: true
} 
```

编辑：显然，为了获得最佳质量，您希望 tbltSlides 项目大于 ShaderEffectSource，以便着色器缩小原始图像的大小。

# android - Android 有没有办法知道哪些应用程序在通知区域显示通知？

> ID：12817259
> 
> 赞同：1
> 
> 时间：2012-10-10T10:31:32.387
> 
> 标签：android, notifications

我想知道是否有办法知道哪些应用程序正在通知区域中显示通知，或者哪些是显示的通知。

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T10:35:45.153

我相信您安装的所有请求访问通知窗格的权限的应用程序都能够创建通知，我猜大多数应用程序都具有该权限。

如果您想知道这一点的原因是因为您有一些应用程序向您发送垃圾邮件通知，至少在 Jellybean 中您可以按住通知，如果您单击它，则会出现一个下拉选项，显示“应用程序信息”将带您到该应用程序的应用程序信息窗格并允许您将其卸载。

# java - 使用 JButton 将文本插入到选定的 JTextfield

> ID：12817263
> 
> 赞同：0
> 
> 时间：2012-10-10T10:31:46.557
> 
> 标签：java, swing, jbutton, jtextfield

我有多个文本字段和按钮

![文本字段](../Images/45a455d777e18a73832fd91abf3dd4d1.png) ![纽扣](../Images/e8cdc6bc1a79d9a039adc451dd42648c.png)

选择文本字段时，应在按下按钮时向其中添加文本。

这就是我尝试的方式

```
import javax.swing.text.JTextComponent;
    private void num9ActionPerformed(java.awt.event.ActionEvent evt) {                                            
            JTextComponent component = getFocuedComponent();
            component.setText( component.getText() + "9" );

    } 
```

但这对我不起作用。

PS。尝试制作矩阵计算器。

**编辑：**供参考......这是我如何实现它......在SJuan76的回答之后......谢谢！

```
private JTextComponent selectedTextField;

// TextFields onFocus event
    private void a33FocusGained(java.awt.event.FocusEvent evt) {
        selectedTextField = (JTextComponent) evt.getSource();
    }
// action for button
        private void num9ActionPerformed(java.awt.event.ActionEvent evt) {                                            
                selectedTextField.setText( selectedTextField.getText() + "9" );

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T10:34:53.873

您需要将选定的 JTextComponent 作为类成员。如果您将所选组件保存在局部变量中（我认为您正在这样做），它不会记住所选组件。一个粗略的例子：

```
public class YourClass  implements ActionListener
{
   private JTextComponent selectedTextField ; 
    ....
   void OnComponentSelected()
   {
     //init selectedTextField
   }
   void actionPerformed() 
   {
      //   selectedTextField.setText(...);
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T10:37:07.640

你没有具体说明问题，所以我会猜测一下。如果您想要更好的答案，请提出更好的问题。

当您单击按钮时，输入文本的焦点已经丢失（转移到该按钮）。

将侦听器添加到更新共享变量的文本字段，指向最后选择的输出文本。当您处理 actionevent 时，更新该组件。

当然，当共享变量不再有意义时，会出现重置共享变量的问题。

更新：我认为`getFocusedComponent()`是 API 的一部分，但我找不到任何参考，如果你想要一个好的答案，你应该发布更多代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T10:57:15.127

您可以记住上次选择`JTextComponent`的内容并在按下某个按钮后更改其文本。所以你不依赖于专注的组件。您可以通过监听鼠标事件来记住它。

# android - 从我的 android 应用程序打开一个应用程序

> ID：12817264
> 
> 赞同：1
> 
> 时间：2012-10-10T10:31:53.510
> 
> 标签：android, android-intent

从我的应用程序中，我正在尝试使用以下代码打开另一个应用程序：

```
package com.copag.lanceappli;

import android.app.Activity;
import android.content.ActivityNotFoundException;
import android.content.ComponentName;
import android.content.Intent;

public class LanceAppli extends Activity {

    public void LanceAppli() {

           try
            {
                Intent intent = new Intent(Intent.ACTION_MAIN);
                intent.addCategory("android.intent.category.LAUNCHER");
                intent.setComponent(new ComponentName("test.test.test","test.test.test.MainActivity"));
                startActivity(intent);
            }
            catch( ActivityNotFoundException e)
            {
                e.printStackTrace();
            }
            catch( Exception e)
            {
                e.printStackTrace();
            }

    }
   public  void main (String [] args) 
   {
       LanceAppli();
   }    
} 
```

发生的事情是应用程序崩溃......没有错误消息。

这是我得到的：

[http://pastie.org/5030644](http://pastie.org/5030644)

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T10:44:30.870

如果您指定组件，这意味着您使用显式意图。您不应该在这种情况下指定类别。尝试简单：

```
public  void LanceAppli()
{  
   Intent intent = new Intent(Intent.ACTION_MAIN);
   intent.setComponent(new ComponentName("test.test.test","test.test.test.MainActivity"));
   startActivity(intent);
} 
```

如果您需要运行 Launcher Intent，那么最好使用以下代码：

```
Intent launchIntent = getPackageManager().getLaunchIntentForPackage("com.package.address");
startActivity(launchIntent); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T21:57:18.733

您发布的代码有很多问题：

您的类`LanceAppli`扩展`Activity`并且您正在尝试在构造函数中执行代码。不要这样做。活动由 Android 操作系统实例化和控制。你不能自己实例化它们。

此外，您永远不应该为活动提供构造函数。无论如何，当调用构造函数时，活动尚未正确初始化（即：`Context`尚未设置。这意味着您不能做任何需要 a 的事情`Context`。在您的情况下，您正在调用`startActivity()`（需要 a `Context`）在构造函数中。

另外，您尝试启动的应用程序的名称是什么？此应用程序是主屏幕替代品还是常规 Android 应用程序？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T10:35:39.937

尝试这样的事情并发布一个堆栈跟踪，如果你得到一个。

```
try
{
    Intent intent = new Intent(Intent.ACTION_MAIN);
    intent.addCategory("android.intent.category.LAUNCHER");
    intent.setComponent(new ComponentName("test.test.test","test.test.test.MainActivity"));
    startActivity(intent);
}
catch( ActivityNotFoundException e)
{
       e.printStackTrace();
}
catch( Exception e)
{
       e.printStackTrace();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T08:43:09.517

问题是我试图`intent`像大卫所说的那样直接在构造函数上使用。所以我把它改成了：

```
package com.copag.lanceappli;

import android.app.Activity;
import android.content.ActivityNotFoundException;
import android.content.ComponentName;
import android.content.Intent;
import android.os.Bundle;

public class LanceAppli extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        try {
            Intent intent = new Intent(Intent.ACTION_MAIN);
            intent.addCategory("android.intent.category.LAUNCHER");
            intent.setComponent(new ComponentName("test.test.test","test.test.test.MainActivity"));
            startActivity(intent);
        } catch( ActivityNotFoundException e) {
            e.printStackTrace();
        } catch( Exception e) {
            e.printStackTrace();
        }
    }
} 
```

因此，我将代码`onCreate`按原样放入，并且可以正常工作！

# json - 使用 Razor 使用 Umbraco 模板输出 JSON

> ID：12817266
> 
> 赞同：4
> 
> 时间：2012-10-10T10:31:58.467
> 
> 标签：json, razor, umbraco

我遇到了需要复制一些 JSON 以便可以对网站的某个区域进行内容管理的情况。我有一个需要复制的**json文件。**该网站的分类很复杂，不幸的是我无法改变这一点。

我已经在 Umbraco 中设置了模板，并且我想要的数据显示在页面上，但我不知道如何将其转换为 JSON 格式的输出。

剃刀看起来像这样：

```
 @{
    dynamic memberships = Library.NodeById(1081);
    var packageGroups =  memberships.Descendants("Price");
    foreach(var package in packageGroups) {
        var top = package.AncestorOrSelf("Type");
        var Description = (@top.HasValue("Blurb")) ? @top.Blurb : @top.Description;
        var Locations = "";

        foreach(var item in package.UserLocation.ToString().Split(',')) {
            Locations += @Model.NodeById((@item)).Name;
            Locations += ",";
        }

        <ul>
            <li>Maintitle: @top.Parent().Title</li>
            <li>Title: @top.Title</li>
            <li>SubTitle: @SubTitle</li>
            <li>Description: @Description</li>
            <li>Link: @top.Url</li>
            <li>Location: @Locations</li>
            <li>Render: true</li>
        </ul>
    }
} 
```

我需要输出这个来复制 JSON 文件，如下所示：

```
 {
       "items":[
          {
             "MainTitle":"Package Top Level Title",
             "Title":"Package Title",
             "SubTitle":"Additional Details",
             "Description":"We wil provide you with some great products and services.",
             "Link":"/path/to/package/",
             "Location":[
                "Saturn"
             ],
             "Render":true
          },
       ]
} 
```

指针表示赞赏。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-10T17:04:37.090

您可以将属性加载到匿名对象中，然后对其进行序列化。像这样的东西应该可以工作（未经测试）：

```
@{
    var items = new List<dynamic>();
    dynamic memberships = Library.NodeById(1081);
    var packageGroups =  memberships.Descendants("Price");
    foreach(var package in packageGroups)
    {
        var top = package.AncestorOrSelf("Type");
        var Description = (top.HasValue("Blurb")) ? top.Blurb : top.Description;
        var Locations = new List<string>();

        foreach(var item in package.UserLocation.ToString().Split(','))
        {
            Locations.Add(Model.NodeById(item).Name);
        }

        items.Add(new
        {
            Maintitle = top.Parent().Title,
            Title = top.Title,
            SubTitle = SubTitle,
            Description = Description,
            Link = top.Url,
            Location = Locations,
            Render = true
        });
    }

    var o = new {
        items = items
    };

    string json = Json.Encode(o);
    Response.ContentType = "application/json";
}
@Html.Raw(json) 
```

匿名对象的替代方法是使用字典。但我认为匿名对象在这种情况下会很好地工作。

# android - 多语言支持

> ID：12817270
> 
> 赞同：0
> 
> 时间：2012-10-10T10:32:11.237
> 
> 标签：android, cordova, internationalization, i18n-gem

支持多种语言的安卓移动应用

什么是最好的方法

为印地语、法语等使用不同的值文件夹

或者

Web 项目中的语言翻译器

或者

任何其他...方式

请建议我最好的方法。

提前致谢.....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T11:49:34.143

对于 Native Android 项目，您可以创建一个从常量扩展的公共接口，例如 TitlesConstants.java：

```
 public interface TitlesConstants extends Constants{

     @DefaultStringValue("Login") String login();
     @DefaultStringValue("Logout") String logout();
  } 
```

然后创建属性文件，例如 TitlesConstants_eu.properties(Basque Language)：

```
 login=Sartu
  logout=Irten 
```

最后一件事是调用您的 Java 代码中的接口并根据您用于查看数据的语言环境获取翻译。

这样一来，一切都是自己做的。

# objective-c - 可以以编程方式编辑 Info.plist 吗？

> ID：12817272
> 
> 赞同：15
> 
> 时间：2012-10-10T10:32:13.647
> 
> 标签：objective-c, xcode, plist

我在 Info.plist 中设置了我的 Facebook-AppId。但我希望编辑它，因为它是动态的。我该如何以编程方式进行？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-10T11:25:02.440

可能在 info.plist 中写入不是一个好主意，并且它不起作用，因为您正在尝试将字典写入 App 包中的 .plist 文件，该文件是只读的。因此，即使您以其他方式完成它，它也不会起作用，并且也会有更多的拒绝机会。

顺便说一句，为什么只有 Info.Plist？我的意思是为什么你不能以其他方式拥有它，例如 nsuserdefaults 或 sql

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-10T10:35:16.153

您无法编辑应用程序的 Info.plist。您没有对该文件的写入权限（假设您想在 App Store 上发布它）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T10:41:58.873

编写 plist 文件的唯一方法是将其从捆绑包复制到应用程序的文档文件夹中。

之后就可以写了。这是一个很好的教程，但还有更多。只是谷歌。 [http://ipgames.wordpress.com/tutorials/writeread-data-to-plist-file/](http://ipgames.wordpress.com/tutorials/writeread-data-to-plist-file/)

# qml - 在 QNX Momentics IDE 中添加 Qt

> ID：12817274
> 
> 赞同：0
> 
> 时间：2012-10-10T10:32:15.143
> 
> 标签：qml, blackberry-10

我有黑莓java环境的经验。但我需要了解基于QNX的IDE来开发黑莓10。我成功安装了所有设置。并运行一些小例子。我需要用 Blackberry10 开发cover-flow。我的一些朋友告诉我，它可以用 Qt 完成。但是我在导入 Qt 时出错。问题是什么 。以及如何使用 QNX Momentics 开发覆盖流

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T12:43:14.797

Have a look at [this](http://qt-project.org/wiki/QNX). It describes how to set up and build Qt for BlackBerry. I am not however sure if that will work with QNX Momentics. Have a look at [this](http://supportforums.blackberry.com/t5/Native-Development/Integrating-Qt-with-QNX-Momentics-IDE/td-p/1557137) as well. I am not sure if you will be able to get full Qt QML support on Momentics IDE. You could maybe try using QtCreator.

# delphi - Delphi 和 Internet Explorer，创建“全局”IE

> ID：12817277
> 
> 赞同：1
> 
> 时间：2012-10-10T10:32:20.390
> 
> 标签：delphi, internet-explorer, ole

我有一些用于打开 IE 的继承代码，这是简短版本：

```
procedure OpenIE(URL: OleVariant; FieldValues: string = '');
var ie : IWebBrowser2;
begin
  ie := CreateOleObject('InternetExplorer.Application') as IWebBrowser2;
  ie.Navigate2(URL, Flags, TargetFrameName, PostData, Headers);
  ShowWindow(ie.HWND, SW_SHOWMAXIMIZED);
  ie.Visible := true;
  ...
end; 
```

由于 CreateOleObject 需要很长时间才能执行，我希望为第一次运行准备一个“准备好的”IE。

例如在 Main FormCreate 中调用 CreateOleObject，然后在第一次调用 OpenIE 时使用已经创建的“IE”对象。

对于 OpenIE 的第 2 次、第 3 次...调用 - 只是通常的调用 ie := CreateOleObject

当我尝试对其进行编码时，我得到了一些线程和编组错误，我是这个领域的新手。什么是正确的方法（一些小代码示例会很棒）？

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T10:45:17.457

也许您正在另一个线程中创建浏览器实例，然后您从该线程发出后续调用。以下琐碎的代码完全按预期工作：

```
type
  TMainForm = class(TForm)
    ShowBrowser: TButton;
    procedure FormCreate(Sender: TObject);
    procedure ShowBrowserClick(Sender: TObject);
  private
    FBrowser: Variant;
  end;

procedure TMainForm.FormCreate(Sender: TObject);
begin
  FBrowser := CreateOleObject('InternetExplorer.Application');
end;

procedure TMainForm.ShowBrowserClick(Sender: TObject);
begin
  FBrowser.Navigate('http://stackoverflow.com');
  ShowWindow(FBrowser.HWND, SW_SHOWMAXIMIZED);
  FBrowser.Visible := True;
end; 
```

我没有使用`IWebBrowser2`，因为我手边没有导入单元。但这不会改变任何事情——你的问题不会与早/晚绑定有关。

显然`FormCreate`是在 GUI 线程中运行的。并且`ShowBrowserClick`是一个按钮`OnClick`事件处理程序。所以它在主 GUI 线程中运行。

如果您`OpenIE`从 GUI 线程以外的线程调用您的函数，这将解释您的错误。如果您在创建浏览器的线程之外的线程上访问浏览器，您将收到一条`EOleSysError`with 消息*The application called an interface that was marshalled for a different thread*。

最后，提问时的忠告。如果您收到错误消息，请确保在您的问题中包含该确切的错误消息。这样做使我们更有可能提供好的答案。

# objective-c - Newsstand App订阅（应用内购买）的困惑

> ID：12817278
> 
> 赞同：0
> 
> 时间：2012-10-10T10:32:21.763
> 
> 标签：objective-c, ios, storekit

我是报亭应用程序的新手。我已经阅读了许多相同的参考资料。但我有一些疑问。这是我的困惑：

1) 假设用户在 10 月安装了一个报亭应用程序。但同样的应用程序在从 1 月到 9 月的几个月也有问题。那么当用户安装应用程序时，是否需要提醒他发布者之前的问题？或者只是当月的问题？或者当用户安装应用程序时，是否需要列出发布者可用的所有问题并且所有问题都被锁定？还是只有在他订阅任何特定时期时才会列出这些问题？

2) 关于应用内购买，应在应用中的何处提供购买部分，例如在单独的页面中或与列出的问题一起。例如：-当用户安装应用程序时，它包含许多列出的问题，如果未购买问题，是否需要在 tableview 列表的每个单元格中提供购买图标？否则是否需要在另一个视图中显示购买图标？例如：- 1 个月订阅或 1 年订阅

3) 如何处理问题的恢复？例如：- 用户可以在 AUG 和 SEP 月份订阅 1 个月的订阅，并且该应用程序已从设备中删除。那他又装了，这种情况怎么办？客户端设备如何识别用户在上个月是否已经购买了几期？Store Kit 是否提供任何帮助或是否需要处理 Web 服务器或苹果服务器中的所有购买信息？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T12:43:20.157

1) & 2) are up to you & your personal design choices.

3) Subscriptions use the standard IAP restore StoreKit functions, found in [Apple's documentation](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/MakingaPurchase/MakingaPurchase.html#//apple_ref/doc/uid/TP40008267-CH3-SW2).

# xaml - 为什么 InitializeComponent 方法会抛出错误？

> ID：12817290
> 
> 赞同：0
> 
> 时间：2012-10-10T10:32:36.510
> 
> 标签：xaml, windows-8, microsoft-metro, windows-runtime

我在 VS2012 中创建了一个新的 SplitPage，并加载了这个页面：

```
this.Frame.Navigate(typeof(SplitPage), "AllGroups"); 
```

抛出错误：

```
this.InitializeComponent(); 
```

Visual Studio 向我展示了这个异常：

```
An exception of type 'Windows.UI.Xaml.Markup.XamlParseException' occurred
in IC2.exe but was not handled in user code
WinRT information: Cannot find a Resource with the Name/Key SubtitleTextStyle
[Line: 88 Position: 104] 
```

如果我发现错误，我发现了消息：

```
Unspecified error 
```

我怎样才能避免这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T10:05:00.707

我认为问题出在 xaml 中，您在被称为“SubtitleTextStyle”的资源中没有样式。您可能需要检查或删除您的 xaml 中的该行。

# c - zip 中的 CRC-32 字段

> ID：12817291
> 
> 赞同：12
> 
> 时间：2012-10-10T10:32:38.090
> 
> 标签：c, zip

我正在使用 C 设计一个 zip-unzip 实用程序。有一个 crc-32 代码字段。是压缩数据还是未压缩数据？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-10T23:36:06.443

它是未压缩数据的 CRC-32。换句话说，它将是压缩前文件原始内容的 CRC-32。[Zlib](http://zlib.net/)有一个[minizip](https://github.com/madler/zlib/blob/master/contrib/minizip/)贡献，它是一个用 C 编写的小型 zip/unzip 实现。在[zip.c](https://github.com/madler/zlib/blob/master/contrib/minizip/zip.c)中，您可以在函数`zipWriteInFileInZip`中看到它正在生成传入缓冲区的 crc，该缓冲区应包含文件的原始内容。

# javascript - 更改选项卡时 Javascript 在 iPad 上暂停：有没有办法知道什么时候回来？

> ID：12817295
> 
> 赞同：2
> 
> 时间：2012-10-10T10:32:50.130
> 
> 标签：javascript, ipad, safari, dom-events

I've the same problem depicted in [iOS 5 pauses JavaScript when tab is not active](https://stackoverflow.com/questions/7977170/ios-5-pauses-javascript-when-tab-is-not-active) thread.

我的问题是，当我回到暂停的标签时，是否会被注意到。

`onfocus`并且`onblur`事件不适用于要暂停的选项卡。

编码：

```
<html xmlns="http://www.w3.org/1999/xhtml"> 
<head>
<script src="http://code.jquery.com/jquery-1.7.1.min.js" ></script>
<script type="text/javascript">
window.onblur = function () {
    console.log("blur");
    $("#whatevent").append("blur<br/>");
}
window.onfocus = function () {
    console.log("focus");
    $("#whatevent").append("focus<br/>");
 }
 window.onunload = function () {
       console.log("unload");
       $("#whatevent").append("unload<br/>");
 }
 window.onload = function () {
      console.log("load");
      $("#whatevent").append("load<br/>");
  }

</script>
</head>

<body>
    <div id="whatevent"></div>
</body>
</html> 
```

没有但`onload`（但仅在我第一次加载页面时）事件在我切换选项卡时在 iPad 上有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T23:30:57.833

两年前有人用[这个查询](https://stackoverflow.com/questions/4656387/how-to-detect-in-ios-webapp-when-switching-back-to-safari-from-background?rq=1)提出了这个问题。不幸的是，只有几个答案，其中一个似乎是实现此效果的唯一方法。在 Apple 可以在移动 safari 中实现完整的 Page Visibility API 之前，我只能使用我创建的这个自定义对象，它将使用 API 并在它不可用时回退到心跳代码。但是，据我所知，没有很好的方法来检查即将发生的选项卡切换。

[这是该对象的基本小提琴](http://jsfiddle.net/2XPMP/1/)，展示了其唯一真正的方法。它本质上只是接受一个焦点事件的处理函数，只要浏览器返回源选项卡就会触发该事件。回退充其量是hacky，并且不仅会在重新进入页面时触发，而且会在脚本停止的时间超过计时器阈值时触发；这可能是在键盘可见、滚动时或正在运行的脚本阻止 requestAnimationFrame 触发时。由于滚动是最常见的行为，我添加了一个处理程序来重置上次保存的时间，以便避免触发焦点事件。

这是包含上述“hacky”方法的脚本的主要部分：

```
 _that.onFocus = function(handler, params) {
        var hiddenProp = getHiddenProp();

        console.log("Hidden prop: " + hiddenProp);

        if (hiddenProp) {
            var evtName = hiddenProp.replace(/[H|h]idden/, "") + "visibilitychange";
            document.addEventListener(evtName, function(e) {
                if (isHidden()) {
                    handler(e, params);
                }
            }, false);
        }else {
            var handlerObj = {"handler": handler};
            if (params !== undefined) {handlerObj.params = params}
            _handlers.push(handlerObj);
            startLoop();
        }

    }; 
```

其余的可以在小提琴中阅读。为了查看回退，您必须使用平板电脑（如果没有平板电脑，您为什么需要此功能？）。

请注意，.onFocus 方法可能接受其第二个参数的参数数组，然后它将传递给您的事件处理程序。这意味着您的事件处理程序的第一个参数将始终具有一个事件对象（如果 API 不受支持，则为 null），并且您的参数数组作为其第二个参数。

也不是说这段代码已经测试了几个小时，所以它可能容易出现故障。我将不胜感激任何建设性的批评，以使其值得生产，直到 Mobile Safari 开始发挥作用。

# c# - 更改属性值会导致所有属性发生更改

> ID：12817298
> 
> 赞同：0
> 
> 时间：2012-10-10T10:32:55.587
> 
> 标签：c#, reflection

我试图更改与我正在循环的数据表的列名匹配的属性值（使用反射）。

**这是我更改属性的代码：**

```
Type type = myTypeBuilder.CreateType();
foreach (DataRow row in table.Rows)
{
 object testobject = Activator.CreateInstance(retval, true);
 foreach (DataColumn col in table.Columns)
 {
   PropertyInfo property = testobject .GetType().GetProperty(col.ColumnName);
   property.SetValue(testobject , row[col], BindingFlags.CreateInstance, null, null, null);
 }
} 
```

结果，我在循环遍历表的 DataColumns 时获得了正确的属性，但是在 SetValue 之后，我的“testobject”的所有属性值都设置为只有所选属性应该具有的值。

**这是我生成类型的方式：**

```
foreach (DataColumn col in table.Columns)
        {
            string propertyname=col.ColumnName;
            // The last argument of DefineProperty is null, because the 
            // property has no parameters. (If you don't specify null, you must 
            // specify an array of Type objects. For a parameterless property, 
            // use an array with no elements: new Type[] {})

            PropertyBuilder custNamePropBldr = myTypeBuilder.DefineProperty(propertyname, System.Reflection.PropertyAttributes.None, typeof(string), null);
            // The property set and property get methods require a special 
            // set of attributes.
            MethodAttributes getSetAttr = MethodAttributes.Public | MethodAttributes.SpecialName | MethodAttributes.HideBySig;

            // Define the "get" accessor method for CustomerName.
            MethodBuilder custNameGetPropMthdBldr = myTypeBuilder.DefineMethod("get_"+propertyname, getSetAttr, typeof(string), Type.EmptyTypes);

            ILGenerator custNameGetIL = custNameGetPropMthdBldr.GetILGenerator();
            custNameGetIL.Emit(OpCodes.Ldarg_0);
            custNameGetIL.Emit(OpCodes.Ldfld, customerNameBldr);
            custNameGetIL.Emit(OpCodes.Ret);

            // Define the "set" accessor method for CustomerName.
            MethodBuilder custNameSetPropMthdBldr = myTypeBuilder.DefineMethod("set_"+propertyname, getSetAttr, null, new Type[] { typeof(string) });

            ILGenerator custNameSetIL = custNameSetPropMthdBldr.GetILGenerator();
            custNameSetIL.Emit(OpCodes.Ldarg_0);
            custNameSetIL.Emit(OpCodes.Ldarg_1);
            custNameSetIL.Emit(OpCodes.Stfld, customerNameBldr);
            custNameSetIL.Emit(OpCodes.Ret);

            // Last, we must map the two methods created above to our PropertyBuilder to  
            // their corresponding behaviors, "get" and "set" respectively. 
            custNamePropBldr.SetGetMethod(custNameGetPropMthdBldr);
            custNamePropBldr.SetSetMethod(custNameSetPropMthdBldr);
        } 
```

你知道可能是什么原因吗？

谢谢

何塞。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T10:40:54.877

似乎您的 customerNameBldr 在 foreach 循环中从未更改（当您生成类型时）。

这样，所有属性设置器和获取器都引用相同的字段，因此所有设置器将更改同一字段的值，所有属性获取器将获取同一字段的值。

```
custNameGetIL.Emit(OpCodes.Ldfld, customerNameBldr); 
```

# c++ - 迭代器到自身的 std::map

> ID：12817300
> 
> 赞同：10
> 
> 时间：2012-10-10T10:32:59.097
> 
> 标签：c++, dictionary, stl, iterator, std

我的目标是将一种类型的元素映射到相同类型的其他元素。假设它们是`size_t`为了简单。

```
std::map<size_t, size_t> myMapping; 
```

这样做可以，但如果我想关注一堆这样的链接（它们都是同一张地图），每一步都是一个`log(n)`查找。

```
size_t k = /*whatever*/;
myMapping[myMapping[myMapping[k]]];   //3 * log(n) 
```

我想利用 map 迭代器保持有效并且有一个 map 将 size_t 映射到 iterators 自身的事实。

```
typedef /*myMapTemplate*/::iterator map_iter;
std::map<size_t, map_iter> myMapping;

size_t k = /*whatever*/
map_iter entryPoint = myMapping.find(k);
entryPoint->second->second->first;   //log(n) + 2 constant time operations 
```

我将如何写这种类型？我知道复制会将迭代器保留在旧地图上，并计划自己解决这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T14:20:48.727

我了解您想要地图的问题：`key->map<key,>::iterator`

所以，这里是一个以映射迭代器为值的结构：

```
template <
    template <class K, class V, class C, class A> class mapImpl, 
   class K, 
   class V, 
   class C=std::less<K>, 
   class A=std::allocator<std::pair<const K, V> >
>
class value_with_iterator {
public:
   typedef typename mapImpl<const K,value_with_iterator,C,A>::iterator value_type;
   value_type value;
}; 
```

使用上述结构定义的映射：

```
typedef std::map<size_t, value_with_iterator <std::map, size_t, size_t> > map_size_t_to_itself; 
```

一些插入方法 - 将密钥与自身链接：

```
map_size_t_to_itself::iterator insert(map_size_t_to_itself& mapRef, size_t value)
{
   map_size_t_to_itself::value_type v(value, map_size_t_to_itself::mapped_type());
   std::pair<map_size_t_to_itself::iterator, bool> res = mapRef.insert(v);
   if (res.second) 
     res.first->second.value = res.first;
   return res.first;
} 
```

和简单的测试：

```
int main() {
   map_size_t_to_itself mapObj;
   map_size_t_to_itself::iterator i1 = insert(mapObj, 1);
   map_size_t_to_itself::iterator i2 = insert(mapObj, 1);
   map_size_t_to_itself::iterator i3 = insert(mapObj, 2);

   std::cout << i1->first << ": " << i1->second.value->first << std::endl;
   std::cout << i2->first << ": " << i2->second.value->first << std::endl;
   std::cout << i3->first << ": " << i3->second.value->first << std::endl;
} 
```

输出：

```
1: 1
1: 1
2: 2 
```

完整链接：http: [//ideone.com/gnEhw](http://ideone.com/gnEhw)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T10:41:53.277

如果我正确理解了您的问题，我想我会将我的元素保存在一个向量中，并在第一个向量中使用索引向量来实现您想要的间接类型。如果您还需要有序访问，您始终可以将映射放入第一个向量的元素。

# ruby - 轮胎 :include_in_all => false 但字段仍包含在 _all 中

> ID：12817303
> 
> 赞同：2
> 
> 时间：2012-10-10T10:33:16.777
> 
> 标签：ruby, elasticsearch, tire

我正在使用轮胎来实现对 rails 应用程序的搜索。该应用程序由实现 ActiveModel 的 CouchDB 和 couchrest_model gem 支持。

从自述文件中可以看出有一个选项 :include_in_all 它没有解释它的行为，但我认为查询 _all 时不会包含索引

给定以下映射

```
mapping do
  indexes :id,                :index    => 'not_analyzed', :include_in_all => false
  indexes :title,             :analyzer => 'snowball', :boost => 100
  indexes :question_content,  :analyzer => 'snowball'
  indexes :skill_id,          :index    => 'not_analyzed', :include_in_all => false
  indexes :topic_id,          :index    => 'not_analyzed', :include_in_all => false
  indexes :archived,          :type     => 'boolean', :include_in_all => false
  indexes :created_at,        :type     => 'date', :index => 'not_analyzed', :include_in_all => false
  indexes :published_at,      :type     => 'date', :index => 'not_analyzed', :include_in_all => false
end 
```

我希望 ES 仅在查询中不指定 default_field 时搜索`title`索引`question_content`。

我错过了理解还是这是一个错误？

//编辑

删除索引并重新创建它可以识别我设置的 include_in_all 选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T10:57:01.087

删除索引并重新创建它可以识别我设置的 include_in_all 选项。

# eclipse-rcp - comboViewer.getSelection() 在 Eclipse rcp 中返回 null

> ID：12817305
> 
> 赞同：0
> 
> 时间：2012-10-10T10:33:21.987
> 
> 标签：eclipse-rcp

我在一个盒子里创建了一个`ComboViewer`名字。查看器由 中定义的各种类别填充。`comboViewer``TitleAreaDialog``TreeViewer`

但在以下行会引发 NullPointerException：

```
ISelection categorySelection = comboViewer.getSelection(); 
```

为什么会这样？解决方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T12:49:31.340

您可以使用此“模式”解决此问题，即在设置对话框时：

```
 final ISelection selection = new ISelection[1];

  Dialog diag = new Dialog(shell) {
    // createDialogArea()
    // remember your comboViewer as field

    @Override
    protected void okPressed() {
      selection[0] = comboViewer.getSelection();
      super.okPressed();
    }
  }; 
```

（在您的案例中使用 TitleAreaDialog 而不是 Dialog。）

即覆盖对话框的okPressed 方法。如果用户进行了选择，然后按 OK，则 selection[0] 将包含该选择。

# javascript - 无法将 JSON 对象作为请求参数发送，因为 JSON.stringify 给出了循环引用错误

> ID：12817310
> 
> 赞同：2
> 
> 时间：2012-10-10T10:33:39.287
> 
> 标签：javascript, jquery, ajax, json

我有一棵树，要显示在屏幕上，它基本上是一个 JSON 对象。我想将此 JSON 对象作为`request`参数发送到 Java 类。

以下是 JSON 对象的示例：

```
// Root node
var rootNode = { Content: "Root", Nodes:[] };
// First Level
rootNode.Nodes[0] = { Content: "Employee Code", navigationType: "0"};
rootNode.Nodes[1] = { Content: "Problem Area", navigationType: "1" };
// Second Level
rootNode.Nodes[1].Nodes = [{ Content : "ACC-HO", Collapsed: true},
                           { Content : "ACC-SALES" },
                           { Content : "BUSI. HEAD", ToolTip: "Click ME!" },
                           { Content : "CEO"}
                          ]; 
```

现在，从 JSON 对象创建此树的插件将`Parent`节点的引用存储在每个节点中。因此，这导致`circular reference`一个节点存储其子节点的引用，每个子节点存储其父节点的引用

因此，我[无法使用 JSON.stringify(rootNode)](http://msdn.microsoft.com/en-us/subscriptions/cc836474%28v=vs.85%29.aspx)

我想`rootNode`使用 Ajax 将对象作为请求参数发送。我做了以下事情：

```
$.ajax({
    type : "POST",
    url : "treeDemo_!saveTree",
            data: {treeObject: JSON.stringify(rootNode) },
            success : function(resp) {      
        alert('success');
    }
}); 
```

但正如我所提到的， JSON.stringify 在我的情况下不起作用。那么任何人都可以提出另一种方法来发送 JSON 对象作为我可以在 Java 代码中接收并进一步处理的请求参数吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T10:36:50.907

如果您无法清理插件，一个解决方案是克隆 rootNode 对象，并且在此过程中不要复制“父”属性：

```
function goclone(source) {
    if (Object.prototype.toString.call(source) === '[object Array]') {
        var clone = [];
        for (var i=0; i<source.length; i++) {
            clone[i] = goclone(source[i]);
        }
        return clone;
    } else if (typeof(source)=="object") {
        var clone = {};
        for (var prop in source) {
            if (source.hasOwnProperty(prop) && prop!='Parent') {
                clone[prop] = goclone(source[prop]);
            }
        }
        return clone;
    } else {
        return source;
    }
}

var serializableRootNode = goclone(rootNode); 
```

`serializableRootNode`不包含“父”属性。

如果父引用不完全称为“父”，则调整代码。

# android - 从应用程序启动启动服务，而不是活动

> ID：12817311
> 
> 赞同：7
> 
> 时间：2012-10-10T10:33:39.973
> 
> 标签：android, android-service

我想在启动`Service`应用程序而不是 Activity 时启动；然后说 Service will launch `an Activity`。我需要这样做，因为我的应用程序需要始终运行，而当我说始终运行时，我的意思是始终运行。我设法避免操作系统杀死我的应用程序的唯一方法是启动一个作为粘性的服务，如果 Android 杀死我的 Activity 或我的服务，我将立即重新启动它们。

我发现了这个[问题](https://stackoverflow.com/questions/4467600/how-to-launch-a-android-service-when-the-app-launches)，但最佳答案似乎相当笨拙，有人有更好的主意吗？

PS：我知道这看起来不是一个非常友好的应用程序，但这是一个非常具体的研究场景，它不适合普通用户，即手机仅用于此目的；但即使内存专用于我的应用程序，Android 也会时不时地杀死它……我可能对 Android 所谓的严格内存管理方案的任何怀疑现在都消失了。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-10T10:38:06.617

一般来说**，Activity 不必显示任何 UI - 它通常会显示，但它不是强制性**的。因此，您可以简单地将应用程序的起点设置为您的“隐形”活动。而隐形意味着要么主题为

```
android:theme="@android:style/Theme.NoDisplay" 
```

或者只是你的代码不会做任何事情`setContentView()`，一旦它在你的工作完成`onCreate()`，你开始另一个活动并终止这个活动`finish()`- 并且不会从该活动中弹出 UI - 这样你就可以轻松地从活动子类中的工作中受益（对于某些任务可能更简单）并且仍然不需要任何 UI：

```
public void onCreate(Bundle bundle) {
   super.onCreate(bundle);

   // [... do your job here...]

   // we're done, so let's jump to another acitivity
   // this can be skipped if you do not want to jump anywhere

   Intenet intent = new Intent(....)
   ...

   try {
      startActivity( intent );

      // finish him
      finish();

   } catch ( Exception e ) {
      e.printStackTrace();
   }

} 
```

# sql - 两个表之间的 SQL 查询“更新”

> ID：12817315
> 
> 赞同：1
> 
> 时间：2012-10-10T10:33:55.303
> 
> 标签：sql, ssms

我有一个包含两个表的数据库：

-`October2012_ID`其中包含两列：

```
a) OldId
b) NewId 
```

-`BNP`其中还包含两列：

```
a)BankId
b)OrbId 
```

`BNP`如果这些值在`OldId`位于表中的列中可用，我需要通过替换包含在两列中的值来更新表`October2012_ID`。如果是这种情况，我需要`BNP`通过 的值更新列`NewId`。

所以：

```
Update BNP
SET BNP.**BankId**=October2012_Id.NewId
where BNP.**BankId**=October2012_Id.OldId and October2012_Id.**BankId** is not null 
```

并且：

```
Update BNP
SET BNP.**OrbId**=October2012_Id.NewId
where BNP.**OrbId**=October2012_Id.OldId and October2012_Id.**OrbId** is not null 
```

我是 SQL 的菜鸟，你能帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T10:36:10.030

```
UPDATE BNP
   SET BNP.OrbId=October2012_Id.NewId
  FROM October2012_Id
  JOIN BNP.OrbId=October2012_Id.OldId  --The default JOIN is INNER. Just shorthand for INNER JOIN
 WHERE October2012_Id.OrbId IS NOT NULL 
```

您只需要指定您希望使用`FROM`子句的值的表并指定`JOIN`要更新的表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T10:42:58.297

您可以尝试`or`在您的条件之间添加：

```
Update BNP
SET BNP.BankId=October2012_Id.NewId
from October2012_Id
where 
  (BNP.BankId=October2012_Id.OldId and October2012_Id.BankId is not null)
  or
  (BNP.OrbId=October2012_Id.OldId and October2012_Id.OrbId is not null) 
```

# android - 如何在android中获取连接网络的名称？

> ID：12817317
> 
> 赞同：0
> 
> 时间：2012-10-10T10:34:01.107
> 
> 标签：android, networking, wifi

我希望应用程序仅在特定的 WiFi 网络中工作。

如何通过获取 WiFi 网络名称并与应用程序中存储的名称进行比较来做到这一点？

如果是，如何获取连接网络的名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T10:38:59.297

你可以使用这个：

```
android.net.wifi.WifiInfo.getSSID 
```

请参考：

[如何使用android API从android中获取wifi网络的名称？](https://stackoverflow.com/questions/3531940/how-to-get-name-of-wifi-network-out-of-android-using-android-api)

[如何使用 BroadcastReceiver 在 Android 中获取当前连接的 WiFi 网络的名称](https://stackoverflow.com/questions/7687808/how-to-get-the-name-of-currently-connected-wifi-network-in-android-with-broadcas)

# zend-framework - 在 Zend 中如何禁用模块的缓存？

> ID：12817318
> 
> 赞同：0
> 
> 时间：2012-10-10T10:34:02.630
> 
> 标签：zend-framework

我正在开发一个具有多个启用缓存的模块的应用程序。缓存初始化在应用程序主引导程序中完成，如下所示。

```
$this->bootstrap('cachemanager');
$manager = $this->getPluginResource('cachemanager')->getCacheManager();
$cacheObj   = $manager->getCache('database');
Zend_Registry::set('cacheObj', $cacheObj); 
```

有人可以告诉我，如何禁用特定模块的缓存？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T19:39:00.583

要禁用缓存对象获取或保存到缓存，您可以将选项设置`caching`为`false`.

使用您的对象，您可以执行以下操作：

```
$cacheObj = Zend_Registry::get('cacheObj');
if ($cacheObj instanceof Zend_Cache_Core) {
    $cacheObj->setOption('caching', false);
} 
```

要使其自动化，您可以编写一个控制器插件来为您执行此操作。这是一个例子：

```
<?php
class Application_Plugin_DisableCache extends Zend_Controller_Plugin_Abstract
{
    public function dispatchLoopStartup(Zend_Controller_Request_Abstract $request)
    {
        $module = $request->getModuleName();

        // change 'dont_cache_me' to the module you want to disable caching in
        if ('dont_cache_me' == $module) {
            $cacheObj = Zend_Registry::get('cacheObj');
            if ($cacheObj instanceof Zend_Cache_Core) {
                $cacheObj->setOption('caching', false);
            }
        }
    }
} 
```

# version-control - Tortoise Hg 未检测到在 SCM Manager (Mercurial) 中创建的用户

> ID：12817319
> 
> 赞同：3
> 
> 时间：2012-10-10T10:34:04.317
> 
> 标签：version-control, mercurial, authorization, tortoisehg, scmmanager

我是 mercurial 和 SCM Manager 的新手。我安装了用于管理 Mercurial 存储库 (OS - Windows 7) 的 SCM manger 1.20。我在客户端使用 tortoise Hg。我能够创建用户、存储库、组，并且可以在 SCM 管理器中授予对存储库的权限。但是客户端的 Tortoise Hg 没有检测到在 SCM Manager 中创建的用户。我的目标是授予在 SCM 管理器中创建的用户使用 Tortoise Hg 进行克隆和提交的权限。任何人都知道解决方案，请帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T13:11:09.950

你应该检查你的 TortoiseHg 配置和 SCM-Manager 的存储库。在 SCM-Manager 方面：

*   打开“RepoNew”的权限选项卡，确保用户“arjun”具有“写入”或“所有者”权限。
*   在您的情况下，复制“hg clone”附近的 URL

    ```
    http://arjun@localhost:8087/hg/RepoNew 
    ```

在 TortoiseHg 方面：

*   启动 TortoiseHg 工作台
*   单击文件 ==> 设置
*   选择左侧的“提交”。
*   输入您的用户名。SCM-Manager 喜欢格式“YourName < your@email.xy>”作为用户名（注意：这是一个全局设置。您可以稍后更改每个存储库的设置）。
*   单击确定，然后从菜单中选择 File ==> Clone Repository...。
*   将 URL 粘贴到您从 SCM-Manager 获得的源字段中
*   选择目标目录
*   单击克隆按钮。
*   系统将提示您输入密码。

如果这成功了，这个存储库应该已经配置为推送。尝试添加一个文件，提交并最终将其推送到服务器。

# extjs4 - Sencha 网格：隐藏列和组合框

> ID：12817328
> 
> 赞同：0
> 
> 时间：2012-10-10T10:34:32.410
> 
> 标签：extjs4, extjs

首先是一小部分代码：

```
{                text: 'TipoVisitaID',
            hidden: true,
            dataIndex: 'TipoVisitaID',
            itemId: 'TipoVisitaID'
        }, {
            text: 'TIPO VISITA',
            flex: 1,
            sortable: true,
            align: 'right',
            dataIndex: 'TipoVisita',
            editor: {
                xtype: 'combo',
                allowBlank: true,
                store: allTiposVisita,
                valueField: 'Id',
                name: 'TiposVisitaCombo',
                itemId: 'TiposVisitaCombo',
                tpl: Ext.create('Ext.XTemplate',
                                    '<tpl for=".">',
                                        '<div class="x-boundlist-item">{Designacao}</div>',
                                    '</tpl>'),
                displayTpl: Ext.create('Ext.XTemplate', '<tpl for=".">', '{Designacao}', '</tpl>')
            }
        }, 
```

我想要实现的是这个。

编辑行时，我希望组合的选定值成为隐藏字段中的值。

这甚至可能吗？

我试过这样做：（在组合上）

```
value: Ext.ComponentQuery.query("#TipoVisitaID")[0] == null ? '' : Ext.ComponentQuery.query("#TipoVisitaID")[0].value 
```

但它不起作用......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T11:10:55.670

添加事件侦听器以编辑网格上的事件并从那里更新隐藏字段中的数据。此事件将在编辑完成后触发。

```
grid.on('edit', function (editor, e){ 
     e.record.set('TipoVisitaID', e.value);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T11:37:23.537

你在寻找这样的东西吗？

```
var theHidden = Ext.getCmp('TipoVisitaID');
var theCombo = Ext.getCmp('TiposVisitaCombo'); =
theCombo.on('change', function(combo, newValue, oldValue, e){
  theHidden.setValue(newValue);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T12:02:39.477

我已经解决了这个问题。

```
{
            text: 'TIPO VISITA',
            flex: 1,
            sortable: true,
            align: 'right',
            dataIndex: 'TipoVisitaID',
            renderer: function (loader, response, active) {
                return active.raw.TipoVisita;
            },
            editor: {
                xtype: 'combo',
                allowBlank: true,
                store: allTiposVisita,
                valueField: 'Id',
                name: 'TiposVisitaCombo',
                itemId: 'TiposVisitaCombo',
                tpl: Ext.create('Ext.XTemplate',
                                    '<tpl for=".">',
                                        '<div class="x-boundlist-item">{Designacao}</div>',
                                    '</tpl>'),
                displayTpl: Ext.create('Ext.XTemplate', '<tpl for=".">', '{Designacao}', '</tpl>')
            }
        }, 
```

首先，我将 dataIndex 更改为 ID。但是现在用户会看到 ID 而不是数据，这就是我使用渲染器的原因，以便用户看到数据而不是 ID。

然后，我将侦听器“beforeedit”添加到我执行此操作的网格中：

```
Ext.ComponentQuery.query("#TiposVisitaCombo")[0].setValue(e.record.raw.TipoVisitaID); 
```

因此使用 ID 设置组合的值（使其成为预选的组合）。

# javascript - 为什么收到ajax响应时选框延迟

> ID：12817332
> 
> 赞同：0
> 
> 时间：2012-10-10T10:35:09.337
> 
> 标签：javascript, html, jquery

我有一个选框，它在我的 Web 应用程序中滚动动态数据，它停止了一点再次开始滚动，就像有人停止它并再次拖动一种行为，当其他 ajax 响应接收和更新 html 页面中的数据时。这是选框标签的问题吗？

```
<marquee scrollamount="1" scrolldelay="10">
    <span id="HPQ" class="syPrice">22.20</span>
    <span id="APQ" class="ayPrice">12.20</span>
    <span id="BPQ" class="byPrice">18.10</span>
    <span id="CPQ" class="cyPrice">65.20</span>
    <span id="DPQ" class="dyPrice">87.56</span>
    <span id="EPQ" class="eyPrice">15.24</span>
    <span id="FPQ" class="fyPrice">34.45</span>
    <span id="GPQ" class="gyPrice">16.20</span>
</marquee> 
```

我的 ajax 调用响应也不断更新此页面。

```
function dataUpdate(){
          $.ajax({
                  type : "GET",
                   url : '../myJsonData.xhtml',
                  dataType : "json",
                  async : true,
                  cache : false,

                  success: function(data) {
                     $.each(data, function(i, item) {
                      /* updates data here */
                     });
                  setTimeout('dataUpdate()',1000);
                  },
                  error : function() {
              }
             });
          } 
```

我以类似于上面的 ajax 调用的方式更新选取框数据

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T10:38:51.497

不，这不是 marquee 标签的具体问题。

浏览器在用户界面中一次只做一件事。只要脚本正在运行，页面中就没有任何更新。

如果您有任何其他移动元素，例如动画 GIF，您会看到它们也会在脚本运行时暂停一段时间。

# iphone - 使用 NSPredicate 过滤 NSArray

> ID：12817340
> 
> 赞同：2
> 
> 时间：2012-10-10T10:35:40.540
> 
> 标签：iphone, objective-c, ios, nsarray, nspredicate

我想根据或以某个字符串开头的`User`对象数组（ `User`has`fullname`和`user_id`更多属性..）过滤。 我知道如何根据一种条件进行过滤： `firstName``lastName`

```
NSPredicate* predicate = [NSPredicate predicateWithFormat:@"firstName BEGINSWITH[cd] %@", word];
NSArray* resArr = [myArray filteredArrayUsingPredicate:predicate]; 
```

这将为我提供所有名字以“word”开头的用户。
但是，如果我想要所有名字或姓氏都以“word”开头的用户怎么办？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T10:41:06.973

您可以使用该类`NSCompoundPredicate`来创建复合谓词。

```
NSPredicate *firstNamePred = [NSPredicate predicateWithFormat:@"firstName BEGINSWITH[cd] %@", word];
NSPredicate *lastNamePred = [NSPredicate predicateWithFormat:@"lastName BEGINSWITH[cd] %@", word];

NSArray *predicates = @[firstNamePred, lastNamePred];

NSPredicate *compoundPredicate = [NSCompoundPredicate orPredicateWithSubpredicates:predicates];

NSArray* resArr = [myArray filteredArrayUsingPredicate:compoundPredicate]; 
```

这是我喜欢做的一种方式。

或者你可以做...

```
NSPredicate* predicate = [NSPredicate predicateWithFormat:@"firstName BEGINSWITH[cd] %@ OR lastName BEGINSWITH[cd] %@", word, word];
NSArray* resArr = [myArray filteredArrayUsingPredicate:predicate]; 
```

要么会工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T10:43:29.423

像这样使用：

```
NSPredicate* predicate = [NSPredicate predicateWithFormat:@"firstName BEGINSWITH %@ OR lastName BEGINSWITH %@", word, word];
NSArray* resArr = [myArray filteredArrayUsingPredicate:predicate]; 
```

# php - Symfony2 findAll来自实体

> ID：12817343
> 
> 赞同：1
> 
> 时间：2012-10-10T10:35:46.880
> 
> 标签：php, symfony, doctrine-orm

查询

```
$apartats = $em->getRepository('MyCompanyFrontendBundle:User')->findAll(); 
```

返回我一个所有值都具有相同值的数组。

返回数组的对象数不错，但所有值都等于表的第一行。

例子：

```
id:1, name:"Peter"  
id:2, name="Sofia"  
id:3, name="David" 
```

返回我：

```
id:1, name:"Peter"  
id:1, name:"Peter"  
id:1, name:"Peter" 
```

为什么是这样？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-12T12:27:31.987

检查用户实体的注释

如果它看起来像这样

```
/**
     * @var boolean $id
     *
     * @ORM\Column(name="id", type="boolean", nullable=false)
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="IDENTITY")
     */ 
```

将其更改为

```
/**
         * @var integer $id
         *
         * @ORM\Column(name="id", type="integer", nullable=false)
         * @ORM\Id
         * @ORM\GeneratedValue(strategy="IDENTITY")
         */ 
```

并检查 user.orm.yml 文件。

# javascript - jQuery 拖动事件似乎没有 deltaX 属性

> ID：12817345
> 
> 赞同：1
> 
> 时间：2012-10-10T10:35:51.237
> 
> 标签：javascript, jquery, jquery-events, drag

我正在尝试使用 jQuery 和[这个用于拖动事件的库](http://threedubmedia.com/code/event/drag "这个用于拖动事件的插件")创建自己的滑块插件。但是，在事件的回调中，deltaX 属性似乎没有发生，这真的很奇怪，因为它存在于文档中。我正在使用该库的 2.2 版。我正在使用这样的库：

```
$('#myelement').bind('drag',function(e){
    console.log(e);
}); 
```

有没有人对拖动事件有任何经验并且可以帮助我？我也尝试过使用库的“拖动”方法，结果完全相同。回调中不存在 deltaX 属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T10:43:17.300

根据文档，道具被添加为第二个参数，所以尝试：

```
$('#myelement').bind('drag',function(e, obj){
    console.log(obj.deltaX);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T10:49:32.557

在绑定函数回调@params 中是“拖动”

```
bind(type, callback); 

callback(event, delta, deltaX, deltaY); 
```

所以;

```
$('#myelement').bind('drag',function(e, delta, deltaX, deltaY){
    console.log(e, delta, deltaX, deltaY);
}); 
```

# sparql - Sparql 减法实例

> ID：12817346
> 
> 赞同：0
> 
> 时间：2012-10-10T10:35:51.813
> 
> 标签：sparql, ontology

我有一本选集，我创建了一个评估界面，或者有一个提交按钮。此按钮允许您计算旧值和值 20 之间的差异。我尝试使用 sparql 选择一个实例，我会评估一个实例减去值 20 的旧值。

```
valider.addActionListener(new ActionListener()
    {
        public void actionPerformed(ActionEvent e)
        {
            Model m=ModelFactory.createMemModelMaker().createModel(null);
            FileManager.get().readModel( m, owlFile );
            String myOntologyName = "ProjetHela";
            String uri="file:///C:/Project/Krs1.owl";
            // Définition de prefixe pour simplifier l'utilisation de SPARQL
            String reuses = "maj: <"+RDF.getURI()+">" ;
            // String myOntologyPrefix = "PREFIX "+myOntologyName+": <"+myOntologyNS+">" ;
            String myOntologyPrefix = "PREFIX "+myOntologyName+": <"+uri+">" ;
            // if (liste.getSelectedItem().toString().equals("GMP: Puissance=60352 Watt,limite supérieure= 73500 Watt")) {
            String queryString= 
                "PREFIX maj: <http://www.owl-ontologies.com/reuses.owl#>"
                + "SELECT ?hasnameevaluated"
                + " WHERE "
                + "{"
                + "?Besoin maj:hasnameevaluated ?hasnameevaluated "
                +"FILTER (?hasnameevaluated - 20)  "
                + " } ";
            Query query = QueryFactory.create(queryString) ;

            QueryExecution qexec = QueryExecutionFactory.create(query, m) ;
            try  {
                ResultSet rs = qexec.execSelect() ;

                // Affichage des resultats
                for ( ; rs.hasNext() ; ){
                //System.out.print("");
                QuerySolution rb = rs.nextSolution() ;
                String y = rb.getLiteral("hasnameevaluated").getString();
                System.out.println( " " + y);
                }}  finally {
                    qexec.close() ;

                    }
                }   
            }

    ); 
```

但它不起作用请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T17:24:34.817

> 过滤器（？已评估 - 20）

是一个测试，而不是一个值的分配。

你的意思是使用：

> BIND (?hasnameevaluated - 20 AS ?newvalue)

或者

> SELECT ?hasnameevaluated (?hasnameevaluated - 20 AS ?newvalue) WHERE

# iphone - 从 iPhone 的 nsstring 中删除“\n”和“\”...？

> ID：12817347
> 
> 赞同：1
> 
> 时间：2012-10-10T10:35:53.887
> 
> 标签：iphone, json, nsdictionary, html-escape-characters

我有一个 iPhone 应用程序，它从 web 服务返回一个字符串，其中包含“\n”和“\”等转义字符。现在我想在 nsdictionary 中添加这个字符串。为此我在下面做

```
 NSMutableArray *keyArray = [[NSMutableArray alloc] initWithCapacity:1];
NSMutableArray *valueArray = [[NSMutableArray alloc] initWithCapacity:1];

[valueArray addObject:strVerifiedReceipt];
[keyArray addObject:@"PAYMENT_RECEIPT"];

NSDictionary *jsonDictionary = [NSDictionary dictionaryWithObjects:valueArray forKeys:keyArray];
NSString* jsonString = [jsonDictionary JSONRepresentation]; 
```

这里 jsonString 向我返回带有转义字符的 strVerifiedReceipt 来自 web 服务，如下所示

> ```
> "PAYMENT_RECEIPT": "{\n\"receipt\":{\"original_purchase_date_pst\":\"2012-10-10 03:29:12 America/Los_Angeles\", \"unique_identifier\":\"977ce60f38d875d12d0f1d7fe583d1d5e61f99e8\", \"original_transaction_id\":\"1000000056917869\", \"bvrs\":\"2.0\", \"transaction_id\":\"1000000056917869\", \"quantity\":\"1\", \"product_id\":\"com.cornerstonehealthtechnologies.meanexus.Nexus010\", \"item_id\":\"544678366\", \"purchase_date_ms\":\"1349864952265\", \"purchase_date\":\"2012-10-10 10:29:12 Etc/GMT\", \"original_purchase_date\":\"2012-10-10 10:29:12 Etc/GMT\", \"purchase_date_pst\":\"2012-10-10 03:29:12 America/Los_Angeles\", \"bid\":\"com.cornerstonehealthtechnologies.meanexus\", \"original_purchase_date_ms\":\"1349864952265\"}, \"status\":0}", 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T10:40:52.230

使用**stringByReplacingOccurrencesOfString:withString:**

```
jsonString = [[[jsonString stringByReplacingOccurrencesOfString:@"\n"
                                                        withString:@""] stringByReplacingOccurrencesOfString:@"\" withString:@""] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-14T09:50:51.033

`stringByReplacingOccurrencesOfString:withString:`肯定会起作用，但是要删除反斜杠，请确保输入 2，因为仅输入 1 会避开引号。

```
jsonString = [jsonString stringByReplacingOccurrencesOfString:@"\n" withString:@""];
jsonString = [jsonString stringByReplacingOccurrencesOfString:@"\\" withString:@""]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-07T13:28:11.143

我有一个想法`\`从你的 jsonString中删除反斜杠

```
jsonString = [NSString stringWithFormat:@"%s",[jsonString UTF8String]] 
```

它对我有用，它给了我一个有效的 JSON 字符串。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-10T14:07:01.253

```
jsonString = [jsonString stringByReplacingOccurrencesOfString:@"\n" withString:@""];

jsonString = [jsonString stringByReplacingOccurrencesOfString:@"\" withString:@""]; 
```

# android - Gui 在函数执行完成之前更新

> ID：12817350
> 
> 赞同：0
> 
> 时间：2012-10-10T10:36:04.273
> 
> 标签：android, model-view-controller, class

我有两个活动，其中我使用相同的代码来添加、更新和删除`AlertDialog`。现在我想在类文件中编写该代码，然后从我的活动中访问该函数。我还希望`UI`仅在函数完成执行后更新。

我试过调用类文件的函数，比如

```
Contact_update c=new Contact_update(context);
c.delete();
myactivityfunction_gui_update(); 
```

但问题是，在函数完成之前，执行 `myactivityfunction_gui_update();`被调用，所以我无法在我的活动中获得更新的结果。谁能告诉我正确的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T10:04:07.367

您可以使用异步任务。将所有添加更新功能保留在这样的类中，

```
public Class A{

   A(Variables){
  }
  int method A(){
   return int data
   } 
 .
 .
 .
 int method Z(){
return int data
}

} 
```

// 在你的活动中

创建 asynctask 函数为

```
 new AsyncTask<Void, Void, Void>() {

            @Override
            protected void onPostExecute(Void result) {
                super.onPostExecute(result);
// dismiss progress bar and call your GUi update function call here
            }

            @Override
            protected void onPreExecute() {

//Show progress bar             
super.onPreExecute();
            }

            @Override
            protected Void doInBackground(Void... params) {

// Your time consuming function call
int c=new A.method()

                return null;
            }

        }.execute(); 
```

# html - 在主干中插入静态菜单

> ID：12817366
> 
> 赞同：1
> 
> 时间：2012-10-10T10:37:05.070
> 
> 标签：html, backbone.js, menu

我必须插入一个用 html 硬编码的简单菜单，但我不知道应该在哪里插入它。我应该直接在路由器中添加html代码吗？如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T10:53:41.693

不，您不应该为此使用路由器，您应该在 Backbone.View 对象中执行此操作，该对象应该创建 HTML 并添加它。

***没有模板的更简单的方法***

```
 var view = Backbone.View.extend({
   .
   .   other backbone stuff
   .

   ,menu: '<div> menu </div>'

   ,render: function(){
      var compiledHTML= $(this.menu);
      $('selector').append(compiledHTML);
   }

 }); 
```

***使用模板的更简单方法***

使用插入页面 HTML 中的 HTML 菜单作为使用

. . 你的 html 代码。

```
 .
 . end of your html code
 .

<script type="text/template" id="marker_small_info_template">
   <div> xxx </div>
</script>

</body> 
```

然后在 Backbone 中使用 Jquery 包装它并将其添加到您的页面中所需的位置。

```
 var view = Backbone.View.extend({

    ,render: function(){
      var compiledHTML= _.template( $("#marker_small_info_template").html());
      $('selector').append(compiledHTML);
      return this;
   }

 }); 
```

***复杂而奇特的方式（require.js + 模板）***

是将 HTML 代码作为模板（例如 Underscore.template）放在单独的文件中，然后使用 Require.JS 在 Backbone.View 中“编译”它来为我获取它，并使用 JQuery 来包装和添加它。

```
define([  
  'text!templates/menuFrenteItem.html'
],
function (templateMenuItem) {

   return Backbone.View.extend({
  .
  .
  .
  ,smallInfo: function(variables){ return _.template(templateMenuItem, variables)}

  ,render: function(){
     var compiledHTML = $(this.smallInfo(dataToCompileTemplate));
     $('selector').append(compiledHTML);
     return this;
  } 
```

}

我认为这是学习在 Javascript 中使用模板并将此工具添加到您的腰带的好机会。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T10:52:15.733

您应该使用 Backbone 视图，并让路由器渲染它：

[http://jsfiddle.net/rd13/g3U7j/11/](http://jsfiddle.net/rd13/g3U7j/11/)

```
var MyView = Backbone.View.extend({
    el: '.container',
    template: "<menu><li>Item</li></menu>",
    render: function() {
        this.el.innerHTML = this.template;
        return this;
    }
});

var r = Backbone.Router.extend({
    routes: {
        '': 'default'
    },
    default: function() {
        new MyView().render();
    }                
});

var router = new r();
Backbone.history.start();​ 
```

# multithreading - CAsyncSocket 和线程/进程安全

> ID：12817369
> 
> 赞同：0
> 
> 时间：2012-10-10T10:37:14.777
> 
> 标签：multithreading, sockets, mfc, casyncsocket

我有一些使用[CAsyncSocket](http://msdn.microsoft.com/en-us/library/3d46645f%28v=vs.80%29.aspx)派生类的遗留代码。此类覆盖`OnReceive`并且它还具有围绕 SendTo 的包装器。代码在一个 dll 中，多个应用程序将在同一台 PC 上使用，所有端口都是硬编码的。

我猜我需要以命名互斥锁（MFC 中的 CMutex）类位的形式提供同步，我不确定。

我应该在 OnReceive 中锁定一个命名的互斥锁，在 CMyAsyncSocket 的 Send 方法中锁定一个不同的命名互斥锁吗？

我需要同步还是 MFC CAsyncSocket 会为我做同步？担心在多个进程上访问套接字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T10:59:08.417

底层套接字将提供连接隔离，因此您无需担心保护每个进程的连接。假设您在每个进程中只有一个线程使用套接字，您只需要处理 AsyncSocket 可能发生的阻塞问题，即当套接字未准备好处理请求时？

# android - 在屏幕关机时触发通话？

> ID：12817373
> 
> 赞同：0
> 
> 时间：2012-10-10T10:37:25.070
> 
> 标签：android, android-intent

我是安卓新手。请告诉我当手机进入空闲模式时触发功能调用的可能方法（屏幕打开到屏幕关闭）？计时器需要检查吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T10:47:04.663

我认为[这篇文章](http://thinkandroid.wordpress.com/2010/01/24/handling-screen-off-and-screen-on-intents/)包含你需要的一切。

希望这可以帮助。

# android - 在部分屏幕上播放视频

> ID：12817375
> 
> 赞同：6
> 
> 时间：2012-10-10T10:37:34.340
> 
> 标签：android, android-videoview

我完全被我认为是最简单的事情所困扰。我正在尝试在相对布局的框架内播放视频。

请注意，该应用程序旨在以横向模式在非常特定的设备（Archos 101 互联网选项卡）上运行，并且视频以非常特定的 480x360 大小进行预编码，这就是为什么布局具有一些固定大小的原因。

这是布局

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<!-- Background -->
<ImageView
    android:layout_width="980dp"
    android:layout_height="568dp"
    android:src="@drawable/bg_video" />

<TextView
    android:id="@+id/video_headtext"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginTop="73dp"
    android:layout_marginLeft="255dp"
    android:textColor="#FFFFFF"
    android:textSize="16dp" />

<TextView
    android:id="@+id/video_title"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textColor="#FFFFFF"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="112dp" />

<VideoView 
    android:id="@+id/video_videocontainer"
    android:layout_width="480dp"
    android:layout_height="360dp"
    android:layout_below="@id/video_title"
    android:layout_marginTop="10dp"
    android:layout_centerHorizontal="true" />

</RelativeLayout> 
```

我使用此代码加载视频

```
player = (VideoPlayer) findViewById(R.id.video_videocontainer);
player.setVideoURI(videoUri); 
```

代码有效，但是当 videoView 正确地在框架内时，视频本身在屏幕顶部的某个位置播放，并且只有一部分显示在 VideoView 中。

[此处](http://i.imgur.com/KxFvA.jpg)发生的示例（这只是用于调试的临时视频）。同一时刻的视频截图在[这里](http://i.imgur.com/U3ezT.png)。

如您所见，VideoView 仅显示部分视频，其余部分用黑色填充。

我很确定我错过了一些非常简单的东西，但我根本不知道是什么。

提前致谢。

编辑：我尝试编写一个 VideoPlayer 类来扩展 VideoView 并像这样覆盖 onMeasure

```
@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec)
{
    setMeasuredDimension(480, 360);
} 

public void changeVideoSize()
{
    getHolder().setFixedSize(480, 360); 

    requestLayout();
    invalidate();
} 
```

但这一点帮助都没有。

编辑 2：尝试使用 SurfaceView 和 MediaPlayer，结果相同。我有种感觉，我还没有理解在Android上播放视频的原理。在这里卡住了。

编辑 3：我试过三星 Galaxy HD，视频在框架内正确显示。我想知道这是平板电脑的问题，还是 2.2 的问题？

编辑 4：在 2.2 下运行的 AVD 无法正确渲染视频。运行 4.1 的 AVD 可以。我想这缩小了一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T13:59:27.527

我对一个视频有类似的问题，该视频对于要处理的特定设备（2.1）来说太高了，它在 android 4.0 上运行良好。

除此之外，我使用的是 SurfaceView，诀窍是将侦听器添加到 MediaPlayer 的事件（特别是 setOnVideoSizeChangedListener）和链接到媒体播放器事件的表面的回调。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T18:34:19.443

将 VideoView 属性 setZOrderOnTop 设置为 true 并查看它是否有效。例如，如果我有一个名为 qvideo 的视频视图

```
qvideo.setZOrderOnTop(true); 
```

# c# - .NET 中本机互操作性的代码组织

> ID：12817376
> 
> 赞同：3
> 
> 时间：2012-10-10T10:37:40.357
> 
> 标签：c#, .net, pinvoke, language-interoperability

我目前正在将一些本机代码移植到 C#，它由各种结构、委托、枚举和外部方法调用组成。

结构中的某些字段期望应用某些常量。列出结构中的常量而不是单独的位置似乎是合乎逻辑的，因为这应该使所有内容都井井有条，但是我不确定在编组/与本机调用的互操作性期间这会对结构产生什么影响。

比如说我的结构是这样定义的：

```
[StructLayout(LayoutKind.Sequential)]
public struct NATIVE_STRUCTURE
{
     public int Value;
} 
```

此实例中的值可能需要以下常量之一

```
VALUE1 = 0x0001;
VALUE2 = 0x0002; 
```

那么像这样编写这些结构对我来说是否安全：

```
[StructLayout(LayoutKind.Sequential)]
public struct NATIVE_STRUCTURE
{
     public int Value;

     public const int VALUE1 = 0x0001;
     public const int VALUE2 = 0x0002;
} 
```

任何人都可以阐明这可能如何影响运行时的代码（如果有的话）。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T10:50:39.780

最好使用枚举。像这样的东西：

```
[StructLayout(LayoutKind.Sequential)]
public struct NATIVE_STRUCTURE
{
    public NativeFoo FooValue;
}

public enum NativeFoo
{
   VALUE1 = 0x0001,
   VALUE2 = 0x0002,
} 
```

# objective-c - IPad 应用程序中使用的标签页控件类型

> ID：12817379
> 
> 赞同：0
> 
> 时间：2012-10-10T10:37:52.527
> 
> 标签：objective-c, ios, xcode, ipad, user-interface

下面链接的照片中使用了什么样的控件，我用红色箭头指向它们，它的大纲+应用程序，在 Xcode 中找不到任何等效的控件。

最诚挚的问候 [https://dl.dropbox.com/u/49071490/onenote_note_app_outline_plus_for_ipad_1.jpg](https://dl.dropbox.com/u/49071490/onenote_note_app_outline_plus_for_ipad_1.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T11:15:55.393

左下方较长的箭头很可能指向 UITableViewCell，它代表 UITableView 中的一个单元格，用作菜单。不过，它是定制的。Xcode 中没有开箱即用的控件。

关于另一个箭头，iOS 不像浏览器那样提供标签栏控件。它们是根据您在 Xcode 中看到的内容从头开始定制的。实现这一目标的可能性有很多。

# c# - 如何使用覆盖 WndProc 消息来检测 USB 附加/分离

> ID：12817380
> 
> 赞同：0
> 
> 时间：2012-10-10T10:37:56.360
> 
> 标签：c#, usb, serial-port, overriding, wndproc

我正在使用这个（[链接](http://www.codeproject.com/Articles/60579/A-USB-Library-to-Detect-USB-Devices)）库来检测 USB 设备的附加和分离事件。在检测到连接了正确的设备（使用特定的 VID/PID 组合识别）后，我打开了一个串行端口连接，类似地，当设备分离时，我关闭了串行端口连接。

我的附加事件效果很好，最后我得到了一个可以使用的串行端口，但我在分离事件中遇到了问题。分离事件正确触发，但是当代码执行到达`closeCOM(serialPort1)`点时，它会跳转到`wndProc`覆盖循环并阻止执行 `closeCOM()`以及随后发生的任何事情。

该库需要`WndProc`消息来检测事件，我的代码是这样实现的：

```
//Catch Windows messages and pass them to the USBClass class
protected override void WndProc(ref Message m)
{
    USBPort.ProcessWindowsMessage(ref m);

    base.WndProc(ref m);
} 
```

然后我有一个执行以下代码的分离事件：

```
 if (!USBClass.GetUSBDevice(VID, PID, ref USBDeviceProperties, false) && USBDeviceConnected)
            {
                //Device is removed
                USBDeviceConnected = false;

                //Close COM port just in case we forgot to disconnect
                closeCOM(serialPort1);

                //update status strip
                strip_device_status.Text = "Disconnected";
            } 
```

这是`closeCOM`功能：

```
 //This function handles COM port closing.
private void closeCOM(SerialPort port)
{
    // If a serial port is open, disconnect it 
    if (port.IsOpen)
    {
        // close the serial port 
        port.Close();
    }
        //update com port status flag
        COMConnected = false;

        //update status strip
        strip_COM_status.Text = "Disconnected";
 } 
```

尤其是`closeCOM()`导致这种“冲突”的原因是，如果我注释掉该行，一切正常，除了我留下一个开放的串行端口，以后可能会导致错误。我做错了什么导致代码跳转到`WndProc`覆盖而不是正常执行？我希望能够在分离事件中关闭端口。

# eclipse - XHTML 中的标记库描述符

> ID：12817381
> 
> 赞同：1
> 
> 时间：2012-10-10T10:37:57.347
> 
> 标签：eclipse, jsf, autocomplete, facelets

嗨，我正在创建一个 JSF 项目，但自动完成功能在 Eclipse 中不起作用。例如

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="/WEB-INF/jsf_core.tld"
    xmlns:h="http://java.sun.com/jsf/html">

<h:head>
    <title>JSF 2.0 Hello World</title>
    <h:outputStylesheet library="css" name="default.css" />
</h:head>
<h:body>
    <h3>JSF 2.0 Hello World Example - hello.xhtml</h3>
    <h:form>
        <h:inputText value="#{helloBean.name}"></h:inputText>
        <h:commandButton value="Click" action="welcome"></h:commandButton>
    </h:form>
       </h:body>
</html> 
```

tlds 是通过 mens of link 导入的。当我按下 ctrl+space 后 f: 它没有显示可用的命令。所以我尝试将实际文件放在 WEB-INF 文件夹中，并将其导入文件中。仍然无法正常工作。

```
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="/WEB-INF/jsf_core.tld"
    xmlns:h="/WEB-INF/jsf_core.tld"> 
```

任何人都可以帮助如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:48:41.890

首先，您**绝对不**应该从 JAR 中提取松散的 TLD 文件并将它们转储到您的 webapp 中。这是便携性问题的秘诀。删除它们并撤消与此相关的所有其他内容。您应该只拥有这些 XML 命名空间：

```
xmlns:f="http://java.sun.com/jsf/core"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:ui="http://java.sun.com/jsf/facelets" 
```

至于自动完成在Eclipse中不起作用的具体问题；该行为取决于所使用的 Eclipse 版本和项目配置。您至少需要 Eclipse Indigo SR1 才能获得适当的内置 JSF 2.0 Facelets 自动完成支持。此外，该项目需要创建为启用 JSF 2.0 Facet 的*动态 Web 项目*。

替代方案是集成[Glassfish Eclipse 插件](http://glassfishplugins.java.net/)或[JBoss Tools Eclipse 插件](http://www.jboss.org/tools)。特别是 JBoss Tools 插件提供了许多其他功能，例如 EL 表达式自动完成和 Ctrl+单击导航。

# php - php 我如何确保页面重新加载并且回显更新为新值

> ID：12817386
> 
> 赞同：0
> 
> 时间：2012-10-10T10:38:07.253
> 
> 标签：php, phpmyadmin

我网站的用户可以订阅他们的一些动物参加比赛。我的代码运行良好，但存在一个大问题。当用户按下订阅时，页面会重新加载，但由于 isset 在按钮本身的回声之后，因此需要在按钮文本更改为“已订阅”之前刷新页面。如您所见，更改顺序会产生问题。谁能帮帮我？我自己没有选择。（我翻译了变量等）

```
<form action="" method="post" name="frmSubscribe">
<?php
$Counter = 0;
$sql = "Select * from Animals where username='".$_SESSION['User']."' ";
$result = mysql_query($sql);
while($row=mysql_fetch_array($result)){

    echo $row['Animalname'];
    $Duiven[] = $row['AnimalID'];
    $Username[] = $row['username'];

    ?>
    <input type='submit' <?php echo "name= ".$Buttons[$Counter].""; ?> value='<?php 
    $sqlSubscribed = "SELECT * FROM Competitionresults WHERE AnimalID='".$Animals[$Counter]."'";
    $resultSubscribed = mysql_query($sqlSubscribed);
    if(mysql_num_rows($resultSubscribed) == 0){ echo "Subscribe";}
    else {echo "deregister";}
    ?>'><br/><?php
    $Teller++;
    }

if (isset($_POST['btnSubscribe1'])){

$sqlCheck = "SELECT * FROM Competitionresults WHERE AnimalID='".$Animals[0]."'";
    $resultCheck = mysql_query($sqlCheck);
    if (mysql_num_rows($resultCheck) == 0){

    $sql1 = "INSERT INTO Competitionresuls (AnimalID, username) VALUES ('".$Animals[0]."','".$Username[0]."')";
    $result1 = mysql_query($sql1);
    $row=mysql_fetch_array($result1);
    ?><?php
    }
    } 
```

......等下一个动物。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T10:44:30.593

我认为你必须使用输出缓冲。将 ob_start() 放在页面的开头，现在输出任何占位符而不是真正的输入代码：

```
[SUMBIT] 
```

代替：

```
<input type='submit' .... 
```

在页面末尾，您将获得缓冲内容：

```
$content = ob_get_clean() 
```

并用正确的代码替换提交按钮：

```
$content = str_replace('[SUBMIT]', 'Your actual submit button code here...', $content); 
```

现在输出内容：

```
echo $content; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T10:45:45.020

快速修复可以是javascript

```
echo '<span id="someid" >Subscribe</span>'; 
```

和改变的时候

```
echo "<script>document.getElementById('someid').innerHTML = 'Subscribed';</script>"; 
```

以后我强烈建议您使用[PHP MVC 框架](https://www.google.com/search?q=php%20mvc%20framework&aq=0&oq=php%20mvc%20framework&sugexp=chrome,mod=0&sourceid=chrome&ie=UTF-8)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T10:50:15.187

您可以在页面上方使用您的邮政编码，然后加载您的页面....请使用如下代码：

```
 <?php
    if (isset($_POST['btnSubscribe1'])){

    $sqlCheck = "SELECT * FROM Competitionresults WHERE AnimalID='".$Animals[0]."'";
        $resultCheck = mysql_query($sqlCheck);
        if (mysql_num_rows($resultCheck) == 0){

            $sql1 = "INSERT INTO Competitionresuls (AnimalID, username) VALUES ('".$Animals[0]."','".$Username[0]."')";
           mysql_query($sql1);
           header('Location: samefilename.php');
           die;
         }

        }
    ?>
    <form action="" method="post" name="frmSubscribe">
    <?php
    $Counter = 0;
    $sql = "Select * from Animals where username='".$_SESSION['User']."' ";
    $result = mysql_query($sql);
    while($row=mysql_fetch_array($result)){

        echo $row['Animalname'];
        $Duiven[] = $row['AnimalID'];
        $Username[] = $row['username'];

        ?>
        <input type='submit' <?php echo "name= ".$Buttons[$Counter].""; ?> value='<?php 
        $sqlSubscribed = "SELECT * FROM Competitionresults WHERE AnimalID='".$Animals[$Counter]."'";
        $resultSubscribed = mysql_query($sqlSubscribed);
        if(mysql_num_rows($resultSubscribed) == 0){ echo "Subscribe";}
        else {echo "deregister";}
        ?>'><br/><?php
        $Teller++;
        }

        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T10:52:42.587

最简单的解决方案将`isset`向上移动到顶部。只是为了让您知道操作应该始终是您处理的第一件事，然后您将在视图上工作

```
<form action="" method="post" name="frmSubscribe">
<?php

if (isset($_POST['btnSubscribe1'])){

$sqlCheck = "SELECT * FROM Competitionresults WHERE AnimalID='".key($_GET)."'";
$resultCheck = mysql_query($sqlCheck);
if (mysql_num_rows($resultCheck) == 0){

$sql1 = "INSERT INTO Competitionresuls (AnimalID, username) VALUES ('".key($_GET)."','".$_SESSION['User']."')";
$result1 = mysql_query($sql1);
$row=mysql_fetch_array($result1);

}
}

$Counter = 0;
$sql = "Select * from Animals where username='".$_SESSION['User']."' ";
$result = mysql_query($sql);
while($row=mysql_fetch_array($result)){

echo $row['Animalname'];
$Duiven[] = $row['AnimalID'];
$Username[] = $row['username'];

?>
<input type='submit' <?php echo "name= ".$Buttons[$Counter].""; ?> value='<?php 
$sqlSubscribed = "SELECT * FROM Competitionresults WHERE AnimalID='".$Animals[$Counter]."'";
$resultSubscribed = mysql_query($sqlSubscribed);
if(mysql_num_rows($resultSubscribed) == 0){ echo "Subscribe";}
else {echo "deregister";}
?>'><br/><?php
$Teller++;
} 
```

# php - 如何使用 codeigniter 在控制器中编写 routes.php 文件？

> ID：12817388
> 
> 赞同：0
> 
> 时间：2012-10-10T10:38:29.963
> 
> 标签：php, file, codeigniter

我使用 codeigniter 尝试在 routes.php 中添加文本，我想做的是在 config/routes.php 中添加文本，我已将 route.php 文件更新为 777 权限，但它不起作用。

这是我的代码

```
$file_path = "var/www/html/staging/oscar/anthola/application/config/routes.php";
$file_exists = read_file($file_path);
$slug ="123";
if ( ! write_file($file_path, $slug))
{
     echo 'Unable to write the file';
    echo write_file('./config/routes.php', $slug);
}
else
{
     echo 'File written!';
      echo write_file('./config/routes.php', $slug);
} 
```

知道如何解决我的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T12:18:16.450

我同意 Robin 的评论，但如果这是您想要走的路线，那么我建议您在 routes.php 文件的底部添加以下行：

```
include_once APPPATH . "cache/routes.php"; 
```

这样，您不会覆盖`default_controller`and`404_override`路由，但仍然可以向您的 Codeigniter 应用程序添加其他路由。

在您的控制器中，您只需添加以下几行

```
$this->load->helper('file');
$output = '$route["route"] = "controller/action";';
write_file(APPPATH . "cache/routes.php", $output); 
```

希望有帮助。

# php - 拖放文件（无需实时上传）/通过表单发送 e.dataTransfer.files

> ID：12817391
> 
> 赞同：1
> 
> 时间：2012-10-10T10:38:33.293
> 
> 标签：php, jquery, drag-and-drop

我正在开发一个新的拖放文件插件，但是，与所有那些插件不同，我不希望它在“丢弃”时上传它。

这个想法是： 1.用户拖放文件。

2.（一些魔法）

3.用户提交表单并且只有那些文件上传到服务器

我尝试将文件名作为 追加到表单中`input type=hidden`，但是我无法在服务器端（php）对它做任何事情；

我可以将文件的详细信息附加到一个`input type=file`字段中，以便浏览器“认为”该文件已通过常规选择`file input field`

我的js：

```
$('#drop-zone').bind('drop', function(e) {

    // This variable represents the files that have been dragged
    // into the drop area
    var files = e.dataTransfer.files;

    $('#uploaded-list').show();
    // For each file
    $.each(files, function(index, file) {

        /* What can I do in here?*/

    });

}); 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T00:52:36.493

也许你已经解决了这个问题，但我今天想通了。

这与 IE9 不兼容（但同样，拖放文件也不兼容），但您可以存储 dataTransfer.files 数据，当您准备好提交时，从表单创建一个 FormData 并附加文件。

```
var formData = new FormData(html_element_of_form); //not a jq obj!
for (var i = 0; i < files.length; i++) {
  formData.append('file', files[i]);
}

// now post a new XHR request
var xhr = new XMLHttpRequest();
xhr.open('POST', '/upload');
xhr.onload = function () {
  if (xhr.status === 200) {
    console.log('all done: ' + xhr.status);
  } else {
    console.log('blarrghhhhh...');
  }
};

xhr.send(formData); 
```

# android - R.class 及其进口的问题？

> ID：12817398
> 
> 赞同：-3
> 
> 时间：2012-10-10T10:38:56.477
> 
> 标签：android, eclipse

在 Eclipse 中开发 Android 应用程序时，经常会遇到与 R 文件相关的错误，例如

```
R cannot be resolved to a variable 
```

或者

```
id cannot be resolved or is not a field 
```

我发布这个问题+答案是为了对 android 初学者可能遇到的常见错误提供一个完整和一般的看法。如果有人认为他们可以提供更好的概述，或者想添加、编辑或评论，请随时这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T10:38:56.477

基本上有 4 种不同的事情可能是错误的。

*   您的一个资源 xml 文件中存在错误。这应该在问题或 LintWarnings 中指出。
*   一个特定但非常常见的错误是您的资源文件中的一个包含不正确的字符，即大写字母。
*   您正在导入 R.android，它是 android 自己的标识符的集合，而不是您自己资源的标识符。

如果其中任何一个是您的问题的原因。不要导入 R 文件。它与项目的根目录位于同一个包中。

*   但是，问题的另一个原因可能是，您在项目的不同包中拥有源代码。在这种情况下，您需要导入 mypackage.R 或 mypackage.*。就像您从不同的包中导入任何其他类一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T10:46:09.620

在您的项目中删除此导入

```
import android.R; 
```

# jenkins - 用于 ext-email 插件 jenkins 的 Jelly 脚本

> ID：12817402
> 
> 赞同：0
> 
> 时间：2012-10-10T10:39:03.630
> 
> 标签：jenkins, jenkins-plugins, jelly

我想知道是否有人可以告诉我如何做一个果冻脚本来做到这一点：

我有这样的环境变量 ${ENV, var="Brand1"} 这个变量将返回真或假。我有 4 个不同的品牌变量 1-4

我需要的是一个 Html 果冻脚本打印出这个：

*你好，

部署即将开始：

品牌：此处应显示不同品牌*

我将如何用果冻写这个？

我现在已经这样做了，但是那行不通

```
<j:jelly xmlns:j="jelly:core" xmlns:st="jelly:stapler" xmlns:d="jelly:define">

<jelly:if test="${${ENV, var="Brand1"}.isTrue()}">
Yes  </jelly:if>
<jelly:if test="${!${ENV, var="Brand1"}.isTrue()}">
No
</jelly:if>

</j:jelly> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T11:10:15.837

尝试这个：

```
<j:set var="buildenv" value="${build.getEnvironment(listener)}"/>
<j:set var="Brand1" value="${buildenv.get('Brand1')}"/> 
```

在那之后：

```
<jelly:if test="${Brand1.isTrue()}"> Yes  </jelly:if> 
```

# sql-server - 将 localhosted drupal 7 与远程 SQL Server 2000 数据库或 Oracle 10g 连接

> ID：12817404
> 
> 赞同：3
> 
> 时间：2012-10-10T10:39:09.307
> 
> 标签：sql-server, drupal, drupal-7, oracle10g

我已经在我的本地系统中安装了 XAMPP。我有一个安装了 SQL Server 的远程系统。如何使用 XAMPP 服务器从在本地系统中运行的 Drupal 连接到此服务器？我的操作系统是 Windows XP。可能吗？

是否可以连接远程oracle10g 数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T08:01:37.630

我假设您已经启动并运行了由 MySQL/MariaDB 数据库支持的 Drupal，现在您想通过您的自定义模块连接到远程 Oracle 数据库。如果我的假设是正确的，那么请查看 db_set_active() 以了解如何在数据库之间切换。

如果您希望 Drupal 由 Oracle 数据库支持，而不是 MySQL/MariaDB，那么我会说您应该看看 Drupal 的[Oracle 驱动程序项目](http://drupal.org/project/oracle)。我自己没有尝试过，但这可能是最好的起点。

# tcp - private_pub/faye 和 nginx tcp -- 502 Bad Gateway

> ID：12817409
> 
> 赞同：3
> 
> 时间：2012-10-10T10:39:28.410
> 
> 标签：tcp, nginx, faye

所以我为 nginx 设置了 tcp 模块，并尝试将它与 private_pub (faye) 一起用于 websockets。截至目前，我从 faye 和 502 Bad Gateway 错误中加载速度非常慢。每个人都指向这样配置它：

我的 nginx.conf 中有这个：

```
tcp {
  timeout 1d;
  websocket_read_timeout 1d;
  websocket_send_timeout 1d;

  upstream websockets {
    server 199.36.105.34:9292;
    check interval=300 rise=2 fall=5 timeout=1000;
  }

  server {
      listen 9200;
      server_name 2u.fm;

      timeout 43200000;
      websocket_connect_timeout 43200000;
      proxy_connect_timeout 43200000;

      so_keepalive on;
      tcp_nodelay on;

      websocket_pass websockets;
  } 
```

我已经尝试了网络上的所有变体。我希望能够从我的域“2u.fm/faye”中访问它，但我可以让它工作的唯一方法是在我的 http 块内做一个代理：

```
location /faye {                                                     
  proxy_set_header  X-Real-IP  $remote_addr;                         
  proxy_set_header  X-Forwarded-For $proxy_add_x_forwarded_for;      
  proxy_set_header Host $http_host;                                  
  proxy_redirect off;

  proxy_pass http://127.0.0.1:9200;                                  
  break;                                                             
} 
```

添加它使其在 2u.fm/faye 上工作，但现在我回到第一方，仍然得到超慢响应和 502 Bad Gateway。我认为这是有道理的，因为它仍然通过http而不是直接路由到tcp。我试过直接打 199.36.105.34:9200 但我没有得到回应。

# c++ - 在 C++ 中将 int 转换为 16 位浮点数（半精度浮点数）

> ID：12817410
> 
> 赞同：7
> 
> 时间：2012-10-10T10:39:29.313
> 
> 标签：c++, c, floating-point

如何将 a 转换`integer`为 a `half precision float`（要存储到数组中`unsigned char[2]`）。输入 int 的范围为 1-65535。精度真的不是问题。

我正在做类似的事情来转换`16bit int`为`unsigned char[2]`，但我知道没有`half precision float`C++ 数据类型。下面的例子：

```
int16_t position16int = (int16_t)data;
memcpy(&dataArray, &position16int, 2); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T12:15:15.417

这是一件非常简单的事情，您需要的所有信息都在[Wikipedia](http://en.wikipedia.org/wiki/Half-precision_floating-point_format)中。

示例实现：

```
#include <stdio.h>

unsigned int2hfloat(int x)
{
  unsigned sign = x < 0;
  unsigned absx = ((unsigned)x ^ -sign) + sign; // safe abs(x)
  unsigned tmp = absx, manbits = 0;
  int exp = 0, truncated = 0;

  // calculate the number of bits needed for the mantissa
  while (tmp)
  {
    tmp >>= 1;
    manbits++;
  }

  // half-precision floats have 11 bits in the mantissa.
  // truncate the excess or insert the lacking 0s until there are 11.
  if (manbits)
  {
    exp = 10; // exp bias because 1.0 is at bit position 10
    while (manbits > 11)
    {
      truncated |= absx & 1;
      absx >>= 1;
      manbits--;
      exp++;
    }
    while (manbits < 11)
    {
      absx <<= 1;
      manbits++;
      exp--;
    }
  }

  if (exp + truncated > 15)
  {
    // absx was too big, force it to +/- infinity
    exp = 31; // special infinity value
    absx = 0;
  }
  else if (manbits)
  {
    // normal case, absx > 0
    exp += 15; // bias the exponent
  }

  return (sign << 15) | ((unsigned)exp << 10) | (absx & ((1u<<10)-1));
}

int main(void)
{
  printf(" 0: 0x%04X\n", int2hfloat(0));
  printf("-1: 0x%04X\n", int2hfloat(-1));
  printf("+1: 0x%04X\n", int2hfloat(+1));
  printf("-2: 0x%04X\n", int2hfloat(-2));
  printf("+2: 0x%04X\n", int2hfloat(+2));
  printf("-3: 0x%04X\n", int2hfloat(-3));
  printf("+3: 0x%04X\n", int2hfloat(+3));
  printf("-2047: 0x%04X\n", int2hfloat(-2047));
  printf("+2047: 0x%04X\n", int2hfloat(+2047));
  printf("-2048: 0x%04X\n", int2hfloat(-2048));
  printf("+2048: 0x%04X\n", int2hfloat(+2048));
  printf("-2049: 0x%04X\n", int2hfloat(-2049)); // first inexact integer
  printf("+2049: 0x%04X\n", int2hfloat(+2049));
  printf("-2050: 0x%04X\n", int2hfloat(-2050));
  printf("+2050: 0x%04X\n", int2hfloat(+2050));
  printf("-32752: 0x%04X\n", int2hfloat(-32752));
  printf("+32752: 0x%04X\n", int2hfloat(+32752));
  printf("-32768: 0x%04X\n", int2hfloat(-32768));
  printf("+32768: 0x%04X\n", int2hfloat(+32768));
  printf("-65504: 0x%04X\n", int2hfloat(-65504)); // legal maximum
  printf("+65504: 0x%04X\n", int2hfloat(+65504));
  printf("-65505: 0x%04X\n", int2hfloat(-65505)); // infinity from here on
  printf("+65505: 0x%04X\n", int2hfloat(+65505));
  printf("-65535: 0x%04X\n", int2hfloat(-65535));
  printf("+65535: 0x%04X\n", int2hfloat(+65535));
  return 0;
} 
```

输出（[ideone](http://ideone.com/2LXt8)）：

```
 0: 0x0000
-1: 0xBC00
+1: 0x3C00
-2: 0xC000
+2: 0x4000
-3: 0xC200
+3: 0x4200
-2047: 0xE7FF
+2047: 0x67FF
-2048: 0xE800
+2048: 0x6800
-2049: 0xE800
+2049: 0x6800
-2050: 0xE801
+2050: 0x6801
-32752: 0xF7FF
+32752: 0x77FF
-32768: 0xF800
+32768: 0x7800
-65504: 0xFBFF
+65504: 0x7BFF
-65505: 0xFC00
+65505: 0x7C00
-65535: 0xFC00
+65535: 0x7C00 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T11:04:28.573

我问了如何将 32 位浮点数转换为 16 位浮点数的问题。

[浮点 32 到浮点 16](https://stackoverflow.com/questions/3026441/float32-to-float16)

因此，您可以很容易地将 int 转换为浮点数，然后使用上面的问题创建一个 16 位浮点数。我建议这可能比从 int 直接转到 16 位浮点数要容易得多。通过转换为 32 位浮点数，您实际上已经完成了大部分工作，然后您只需要移动几位即可。

编辑：查看 Alexey 的出色答案，我认为使用硬件 int 进行浮点转换然后对其进行位移很可能比他的方法快一点。可能值得对这两种方法进行分析并进行比较。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T11:35:55.937

在@kbok 问题评论之后，我使用了[这个答案](https://gamedev.stackexchange.com/a/17410/9333)的第一部分来获取半浮点数，然后获取数组：

```
uint16_t position16float = float_to_half_branch(data);
memcpy(&dataArray, &position16float, 2); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-02T22:34:50.300

如果您的目标是支持的硬件，您可以使用内在函数：

[https://software.intel.com/en-us/articles/performance-benefits-of-half-precision-floats](https://software.intel.com/en-us/articles/performance-benefits-of-half-precision-floats) [https://software.intel.com/sites/products/documentation/doclib/iss/2013/compiler /cpp-lin/GUID-7679FF37-257B-4F90-8668-5B3AA62587AD.htm](https://software.intel.com/sites/products/documentation/doclib/iss/2013/compiler/cpp-lin/GUID-7679FF37-257B-4F90-8668-5B3AA62587AD.htm)

# java - Android 项目 (Eclipse) 的插件

> ID：12817414
> 
> 赞同：0
> 
> 时间：2012-10-10T10:39:49.157
> 
> 标签：java, android, eclipse, plugins, toolkit

我是这个领域的新手（插件开发），我想为我的应用程序创建某种插件：

我已经开发了一个 android 应用程序，现在我需要为学生制作一个工具包，以便将来在这个应用程序上工作。这个想法是：

1) 为该应用程序制作手册，以便学生可以阅读有关类和结构的信息，而不是在单独的 .doc 文件中，而是在 Eclipse IDE 中，可能带有一些代码链接。

2) 监督应用程序的功能（以便学生检查应用程序的所有功能（性能-UI 设计、与外部服务器/API 的连接等）是否正常工作，以防他们改变某些东西） . 所有这些数据都应该在单独的框架中（看起来像一个工具包）。（我在这里找到了与此相关的信息[http://www.ibm.com/developerworks/opensource/tutorials/os-eclipse-jfeature/section5.html](http://www.ibm.com/developerworks/opensource/tutorials/os-eclipse-jfeature/section5.html)，但我不确定它是否适合我的想法）

我将很高兴获得一些与我的任务相关的教程链接以及您对工具包功能集的建议（以及如何制作它的链接）。

非常感谢您！希望能得到你的帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T10:44:05.647

手册的内容是 Javadoc，您可以在 Eclipse 和 java 以及 android 中使用它。

这里有一些链接，首先： [http ://en.wikipedia.org/wiki/Javadoc](http://en.wikipedia.org/wiki/Javadoc)

然后我可以快速解释为什么 javadoc 对你有用，首先它允许使用（在我看来）你能想象的最简单的方式创建一个真正的手册（java API 是用 javadoc 创建的）。您必须使用一个特殊的注释标签，即：

```
/**
*
**/ 
```

当您将它放在任何声明（方法、类、接口、字段等）之前时，它将包含在 javadoc 中。您可以添加标准的东西，例如，您可以指定方法的描述、它需要`@return`什么`@params`以及许多其他东西，非常小心和精确，您可以将 javadoc 相互链接，并创建非常复杂和精确的文档。

在 eclipse 中 javadoc 很有用，因为 eclipse 本身默认允许用户与 javadoc 交互。例如，如果您想知道一个方法的作用，只需将鼠标悬停在该方法的名称上，就会出现一个黄色的小对话框。如果您还使用 ctrl-space，您也可以在其中获得一些提示。例如，按 ctrl-space 会显示所有可用的公共方法，每个方法的 javadoc 都有黄色的描述对话框。如果您正在实例化一个新对象，您可以看到确定了多少（以及它们具有哪些参数）构造函数等等，我认为它非常有用和重要。

* * *

对于第二件事，如果我了解您想要的东西，可能像 JUnit（用于测试的单元）之类的东西对您来说可以。

[http://www.junit.org](http://www.junit.org)

JUnit 是一个用于测试代码的单元，可以与 eclipse 完全集成。简而言之，对于代码的每一部分，您应该编写一个或多个测试来检查其行为是否正确。一旦您编写了一些测试，您可以使用用户友好的界面自动运行它们，告诉您有多少测试失败，有多少通过以及存在什么样的错误。

为什么测试我的代码中的每一个小（愚蠢的？）东西都很有用？

想象一下，您有一个工作代码（您的代码）。想象一下，你有人在做这件事（你的学生）。

用户如何确定他/她所做的任何更改都可以使用现有代码？

他/她应该运行程序并一一检查每个功能以发现错误。

你明白这是不可能的。所以 JUnit 只需单击一下（如果您还想在后台）就可以为您完成。

因此学生可以添加代码并运行测试以查看预先存在的代码是否仍在工作。

如果一切正常，学生也可以编写自己的测试来自动测试。事实上，JUnit 允许您测试代码的每一部分而不依赖于其他部分，通过这种方式，您还可以在不连接到网络的情况下测试 Internet 连接，只是“模拟”连接。

我让这部分没有解释，因为它是一个漫长而复杂的部分。我给你这个“输入”是为了刺激你阅读有关测试和 XP 编程的知识。

啊，欢迎来到stackoverflow！如果你喜欢这个答案并且认为这个答案对你的问题是正确的，你可以用左边的小检查来检查它。

# c# - 在 C# 中使用反射在运行时加载类型

> ID：12817415
> 
> 赞同：1
> 
> 时间：2012-10-10T10:39:53.557
> 
> 标签：c#, reflection

我想在运行时使用反射加载一个类型。以下是步骤：

1.  使用加载程序集`Assembly.LoadFile(assemblyPath);`
2.  使用`GetType`方法获取类型
3.  用于`Activator.CreateInstance`创建类型的实例。

下面是我的代码：

```
Assembly assembly = Assembly.LoadFile(assemblyName);
Type type = assembly.GetType("RomanConerter.Converter");
object obj = Activator.CreateInstance(type); 
```

我面临的问题是最后一行。我的转换器有一个方法名称`Add`。但我无法使用 obj 访问此方法。

注意：我试图在其他项目中加载的程序集，并且我已经对路径进行了编码。

谁能帮帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T10:43:22.633

*动态*的：

```
dynamic obj = Activator.CreateInstance(type); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T10:43:39.500

你有两个选择：`dynamic`或者大量的反思。

试试这个：

```
Assembly assembly = Assembly.LoadFile(assemblyName);
Type type = assembly.GetType("RomanConerter.Converter");
dynamic obj = Activator.CreateInstance(type);

obj.Add("stuff"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T10:46:40.233

如果您更喜欢使用反射，可以按如下方式使用它：

```
Type objType = obj.GetType();
objType.InvokeMember("Add", BindingFlags.Instance | BindingFlags.Public | BindingFlags.InvokeMethod,
    null, obj, new object[] { /*comma-separated arguments here*/ }); 
```

你可以在这里读到它：[`Type.InvokeMember`](http://msdn.microsoft.com/en-us/library/66btctbe.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T10:46:41.810

这一切都取决于`RomanConverter.Converter`您在调用应用程序中是否可以使用该类型（即包含您发布的代码）。如果是这样，那么您只需投射。

如果没有 - 那么你可以用反射（如其他人所说）或使用后期绑定方法`dynamic`，但恕我直言，你最好使用公共基础或接口：

```
/* common interface used in both your code and the external DLL */
public interface ICanAdd {
  object Add(object source);
} 
```

（我猜这里的签名）

然后把你的这个插件类型改成：

```
namespace RomanConverter {
  public class Converter : ICanAdd {
    object Add(object source){
      //TODO: implement
    }
  }
} 
```

现在，当您从`Activator.CreateInstance`您那里获取对象时，只需将其转换为`ICanAdd`：

```
ICanAdd obj = (ICanAdd)Activator.CreateInstance(type); 
```

现在您可以调用该方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T10:42:31.387

您必须明确地转换为您正在创建的类型：

```
RomanConerter.Converter obj = (RomanConerter.Converter)Activator.CreateInstance(type); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-10T10:47:23.117

似乎这可以通过几种方式完成。

1.  在您的自定义类型中实现一个接口，并在编译时使该接口可用。
2.  使用`dynamic`关键字，因为这将为相关对象提供后期绑定。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-10T10:48:12.590

如果您不想使用动态（或正在使用 C# 的早期版本），您可以使用一些反射 - 这对于简单的方法调用来说并不太复杂：

```
obj.GetType().GetMethod("MethodName", System.Reflection.BindingFlags.Public |  System.Reflection.BindingFlags.Instance).Invoke(obj, null); 
```

# c# - NancyFX 在尝试向 Request.Session["Foo"] 添加非字符串对象时崩溃

> ID：12817416
> 
> 赞同：0
> 
> 时间：2012-10-10T10:39:57.393
> 
> 标签：c#, asp.net, .net, session, nancy

使用 NancyFX 和 ASP.Net，我试图在路由之间共享一个模型对象，如下所示：

```
Post["/"] = parameters =>
{
    var myModel = new ExampleModel
                    {
                        Prop = (string) Request.Form["someField"],
                    };
    try
    {
        Request.Session["myModel"] = myModel;
    }
    catch (Exception e)
    {
        return e.Message;
    }
    return Response.AsRedirect("/something/");
}; 
```

尽管被包裹在一个`try-catch`子句中，但它还是会崩溃。
存储字符串而不是`ExampleModel`工作。

这与`HttpSession`vs`Session`问题（ASP 兼容性等）有关吗？如何在路由之间共享非字符串对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T10:59:40.967

有什么例外？您的 myModel 是否标记为 Serializable ？

# css - HTML CSS DIVs 排列

> ID：12817417
> 
> 赞同：1
> 
> 时间：2012-10-10T10:40:14.363
> 
> 标签：css, html

![模拟网站设计](../Images/013cb55320a5d906d9c3c398677fb200.png)

大家好。我需要帮助来安排我网站的 div。我的网站有 3 个主要的 DIV。1\. DIV1 - 我的页眉（固定高度） 2\. DIV2 - 动态内容区域，因此高度变化 3\. DIV3 - 我的页脚（固定高度）

所有 DIV 都有 100% 的宽度。

DIV1 标头相对于浏览器顶部必须有 0px。我希望 3 个 DIV 必须彼此重叠，如图所示。如果用户的分辨率高于我的 3 个 DIV，则 DIV 之后最底部的内容只是空白。但是，我似乎无法使该布局正常工作。DIV3 页脚一直给我带来麻烦。

我有以下 CSS 代码：

```
div1 {
  position: fixed;
  top: 0px;
}
div2 {
  position: relative;
  top: 0px;
}
div3 {
  position: fixed;
  top: 0px;
} 
```

如果我使用`position: fixed`DIV3，而我的 DIV2 的内容较短，整个网站会看起来很奇怪。如果我尝试更改为 position: relative for DIV3，DIV3 将重叠并出现在 DIV1 的前面。

有没有更好的建议？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T10:57:06.313

我希望这可能对您
使用页脚有所帮助，就`bottom: 0px;`好像您想将其固定在底部一样

这里的演示：[小提琴](http://jsfiddle.net/FCwjc/37/)

```
body{
background:green;
}

div.one {
position: fixed;
top: 0px;
width: 100%;
height: 50px;
background: #4f4f4f;
}
div.two {
height: 100%;
width: 100%;
margin-top: 50px;
}
 div.three {
position: fixed;
bottom: 0px;
width: 100%;
height: 50px;
background: red;
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T10:45:57.083

检查这个：[CSS 布局生成器。](http://csslayoutgenerator.com/)

**编辑：**
检查[这个小提琴](http://jsfiddle.net/GN5X2/8/)

尝试使用：

```
.head{
  position:fixed;
  top:0px;
}
.footer{
  position:fixed; 
  bottom:0px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T10:47:19.727

你有什么理由使用定位来布局 div 吗？

Div 将自然堆叠在一起，无需任何定位。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T11:04:38.757

在风格上，我为 div1,div2,div3 = 100px 设置了相同的高度：

```
<style>
body
{
    margin: 0 auto;
}
#div1 {
    height: 100px;
    width:100%;
    top: 0px;
    background-color:#F00;
}
#div2 {
    height: 100px;
    width:100%;
    top: 0px;
    background-color:#00F;
}
#div3 {
    height: 100px;
    width:100%;
    top: 0px;
    background-color:#FF0;
}
</style> 
```

并在 html 标签中：

```
<body>
    <div id="div1">Header</div>
    <div id="div2">Cotent</div>
    <div id="div3">Footer</div>
</body> 
```

我希望这将符合您的要求，

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T10:49:37.090

我认为你想要固定的页眉和页脚定位。

[http://www.cssplay.co.uk/layouts/basics2.html](http://www.cssplay.co.uk/layouts/basics2.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-10T10:51:49.513

HTML

```
<div class="div1">header</div>
<div class="div2">Content area</div>
<div class="div3">Footer</div> 
```

CSS

```
.div1 {
height:100px; background:red; width:100%
}
.div2 {
position: relative;
top: 0px; background:green; width:100%; height:100px;
}
.div3 {
 background:blue; width:100%; height:100px;
}​ 
```

​演示[http://jsfiddle.net/K3Unz/2/](http://jsfiddle.net/K3Unz/2/)

# entity-framework - 将 DBContext 转换为 ObjectContext 时，没有任何实体可用

> ID：12817420
> 
> 赞同：0
> 
> 时间：2012-10-10T10:40:19.237
> 
> 标签：entity-framework, ef-code-first, dbcontext, objectcontext

我已将现有项目更改为首先使用 EF5 和代码。它使用依赖于旧 ObjectContext 的存储库类。为了保持存储库实现相同，我在 DBContext 上创建了一个属性，该属性将返回一个 ObjectContext：

```
public ObjectContext ObjectContext()
{
    return (this as IObjectContextAdapter).ObjectContext;
} 
```

问题是在此之后实体在 ObjectContext 上不可用，因此以下代码失败：

```
string GetSetName<T>() {
    var entitySetProperty =
    _context.GetType().GetProperties()
       .Single(p => p.PropertyType.IsGenericType && typeof(IQueryable<>)
       .MakeGenericType(typeof(T)).IsAssignableFrom(p.PropertyType));

    return entitySetProperty.Name;
} 
```

原始 DBContext 在转换为 ObjectContext 之前具有所有可用的实体，但由于 ObjectContext 类没有我的实体的属性，我该如何访问它们？

# c# - 在 MVC 3 应用程序中生成特定于路由的视图

> ID：12817433
> 
> 赞同：0
> 
> 时间：2012-10-10T10:41:12.790
> 
> 标签：c#, asp.net-mvc-3, asp.net-mvc-routing

由于我是 MVC 3 开发的新手，因此我需要一些关于我目前正在处理的开发任务的最佳方法的建议。

我目前正在开发一个支付各种项目的支付表格应用程序，最终这将包括合理数量的项目，其中大多数至少有三种支付方式（全额支付、押金和余款 - 有些还包括折扣和一些只能全额支付）。

我需要决定一种最佳方法来实现基于路由的策略，该策略将允许用户为他们想要支付的程序输入特定的 URL，基本上所有程序都需要输入相同的信息，唯一的区别是成本每个程序的日期和程序运行的日期。

我正在尝试决定是否最好为每个程序有多个视图，然后为每个单独的程序输入路线（我目前有 30 多个程序，其中包括完整的、存款和剩余的以及一些折扣 - 这很可能增加）或者是否可以使用路由在单个视图中为每个程序生成特定信息，这样我就不必为 30 多个视图和控制器复制基本相同的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T20:48:46.990

如果我了解您要做什么，那应该很简单。

```
routes.MapRoute(
    name: "Programmes",
    url: "{controller}/{action}/{programme}/{payment}",
    defaults: new
    {
        controller = "Programme",
        action = "Index",
        programme = "SomeDefault",
        payment = "full"
    }
); 
```

这应该允许您在您的操作方法中需要的所有变化`ProgrammeController`：

```
public ActionResult Index(string programme, string payment)
{
    // ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T09:44:23.550

感谢您的回复，前几天我把路由放在了一个 foreach 循环中，它会即时生成 URL，我使用的路由是这样的：

```
foreach (var programme in programmes)
            {
                routes.MapRoute("ProgrammeArea" + " " + programme.Code,
                                programme.Url + "/{action}/{id}",
                                new { controller = "PaymentDetails", action = "Index", id = programme.Id }
                    );
            } 
```

program.Code 确保每次运行循环时路由名称都是唯一的，我从数据库中获取特定的 URL

# delphi - Delphi - 编写一个程序，读取一系列数字并将它们相加，直到用户输入 0

> ID：12817435
> 
> 赞同：0
> 
> 时间：2012-10-10T10:41:20.993
> 
> 标签：delphi, delphi-7, delphi-xe2, delphi-2010, delphi-2009

**这是我到目前为止的位置，当我在编辑框中输入一个数字并按下它崩溃的按钮时，我是 Delphi 的新手，请帮忙！谢谢，马特**

```
var
  Form3: TForm3;
  Count: integer;
  RunningTotal: Real;
implementation

{$R *.dfm}

procedure TForm3.btnEnterClick(Sender: TObject);
begin
 repeat

   RunningTotal:= RunningTotal + STRTOINT (edtNum.Text);
 until STRTOINT(edtNum.Text)=0;
  lblAns.Caption:= FLOATTOSTR (RunningTotal);

end;

procedure TForm3.edtNumChange(Sender: TObject);
begin

end;

procedure TForm3.FormCreate(Sender: TObject);
begin
Count:=0;
RunningTotal:=0;
end;

end. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T10:59:18.807

当用户提供他的第一个值时，您将永远循环。您需要在事件处理程序中做的就是获取单个值并对其进行处理。

```
procedure TForm3.btnEnterClick(Sender: TObject);
begin
  if STRTOINT(edtNum.Text)=0 then
    lblAns.Caption:= FLOATTOSTR (RunningTotal)
  else
    RunningTotal:= RunningTotal + STRTOINT (edtNum.Text);
end; 
```

这样，用户可以提交更多数字，直到他为您提供`0`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T11:14:48.670

如果您将键入字符而不是数字，则会导致异常。您可以处理异常，也可以阻止用户输入这样的字符

```
var
  Form1: TForm1;
  myvalue : Real = 0;
implementation

{$R *.dfm}

procedure TForm1.btn1Click(Sender: TObject);
var
  number : Real;
begin
  number := StrToFloat(Edit1.Text);
  if number = 0 then ShowMessageFmt('The result is %f',[myvalue])
  else
  myvalue := myvalue + number;
  Edit1.Text := '';
end;

procedure TForm1.Edit1KeyPress(Sender: TObject; var Key: Char);
begin
  if not (Key in ['0'..'9','.']) then Key := #0;
end; 
```

# iphone - 设置 UITextField 的值

> ID：12817437
> 
> 赞同：0
> 
> 时间：2012-10-10T10:41:26.443
> 
> 标签：iphone, objective-c, uitextfield

我有一个 UITextField 会显示一些像“rocky”这样的值。如果我从文本字段中删除此文本，那么我希望字段文本立即更改回原始文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T12:11:52.100

你需要一点改变，看看我的回答：

```
- (BOOL)textField:(UITextField *)theTextField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
NSString *newString = [textField.text stringByReplacingCharactersInRange:range withString:string];
if([newString isEqualToString:@""]){
    textField.text=@"rocky";
    return NO;
}

return YES; 
```

}

您可以注意到差异。只需为您的空字符串案例返回 NO。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T10:55:39.390

最初添加**NSString *strName**作为类 object.in viewDidLoad 添加这个

```
 strName = @"Rocky"; 
```

现在

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
   if([[string stringByReplacingOccurrencesOfString:@" "
                                                    withString:@""] isEqualToString:@""]){
     textField.text=strName;
    }
    else
    {
      strName = text; //change name here for keeping record
    }
    return YES; 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T10:52:45.507

```
 - (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    NSString *newString = [textField.text stringByReplacingCharactersInRange:range withString:string];
    if(newString.length==0) {
        txtProjectName.text=@"rocky";
        textField.userInteractionEnabled=NO;
        return NO;
    }
    return YES;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T12:09:49.563

```
 - (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    if(textField.length==0) {
        txtProjectName.text=@"rocky";
        return NO;
    }
    return YES;
} 
```

尝试这个。

# flash - AS3 加载外部 swf 库单个文件

> ID：12817438
> 
> 赞同：0
> 
> 时间：2012-10-10T10:41:28.887
> 
> 标签：flash, external

我面临长时间加载问题，否则会保留许多 swf（文件）问题。

我有外部 swf 库中存在的装饰项目，当我需要其中的任何一个装饰项目时，我必须首先加载整个文件（这需要很长时间，因为其中有很多项目）。有没有办法让我只能从图书馆索取某些物品（电影剪辑）。

在其他情况下，我将不得不为每个装饰项目制作“n”个文件。

谢谢，纳吉姆。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T07:28:46.103

我认为您应该将您的 assets.swf 与许多 swf 分开，例如： assetsForStage1.swf assetsForStage2.swf assetsForStage3.swf 其中 assetsForStage1.swf 包含您的应用程序通常在 stage1 或应用程序的某些状态下需要的资产。

# php - 将链接定位到在 DIV 中加载

> ID：12817439
> 
> 赞同：0
> 
> 时间：2012-10-10T10:41:29.903
> 
> 标签：php, javascript, jquery, html, ajax

我创建了一个菜单，它只是一系列 DIV，并且正在使用以下代码

```
$(".menu_item").click(function(){
    window.location = $(this).attr("data-href");
return false;
}); 
```

使每个项目的整个 DIV 都可点击。我有一个“容器”DIV 设置，内容最初是通过 php-include 加载的，但希望在单击不同的菜单项时加载不同的内容。

我知道我可以使用 JQuery.load 将外部文件加载到特定的 DIV 中，但看起来这意味着为每个链接编写单独的 jquery 实例？如果可能的话，我也宁愿坚持使用 php 包含。我可以使用 jquery.load 通过 php include 加载吗？

任何有关如何实现这一目标的帮助将不胜感激。

这是其余的代码：

```
/* Menu Item */
<div class="menu_item" data-href="link1.html">
     Link 1
</div>

/* Container to load link into */         
<div id="myContentDiv"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T11:12:59.247

您可以使用 jQuery AJAX 速记方法`load()`发出 ajax 请求，并在完成时使用响应填充元素

```
$(".menu_item").click(function(e){
   var url= $(this).data('href')
    $('#myContentDiv').load( url);
     return false;/* edit to prevent browser following link*/
  }); 
```

API 参考： [http ://api.jquery.com/load/](http://api.jquery.com/load/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T10:48:50.293

```
 $(".menu_item").click(function(e){
    e.preventDefault();
    $.ajax({
      url: $(this).attr("data-href"),
      context: $('#div-to-replace-content')
    }).done(function(data){
      $(this).append(data);
    });
  }); 
```

# javascript - 调整 iframe 中所有子元素的大小

> ID：12817441
> 
> 赞同：0
> 
> 时间：2012-10-10T10:41:36.287
> 
> 标签：javascript, jquery, css

> **可能重复：**
> [使用 jQuery UI 调整 iFrame 的大小](https://stackoverflow.com/questions/1234144/resizing-iframe-with-jquery-ui)

我需要嵌入一个 iframe。我希望 iframe 中的所有元素在设置 iframe 大小的同时动态调整大小。有没有办法在 Jquery 中做到这一点？其他建议？

# jquery - 为什么输入有效时表单不会消失？（jquery验证插件）

> ID：12817445
> 
> 赞同：2
> 
> 时间：2012-10-10T10:42:04.423
> 
> 标签：jquery, css, jquery-validate

我在表单上显示错误，但即使表单有效（我的表单带有背景和边框） - 它也不会消失。

这是屏幕截图：

![](../Images/a132d362c048ae1370541450b6aa9f19.png)

这是我的js：

```
 $(".login").validate({
    rules: {

        "user[email]":{
            email: true,
            required: true
        },
         'user[password]': {
            required: true,
            minlength: 6,
            remote: {
            url: "http://127.0.0.1:3000/checkpass",
            //url: "http://91.228.126.168:3000/checkpass",
            type: "get",
            data: {
              email: function() { return $("#user_email").val(); }
            }
          }
        }
    },
    messages: {
    "user[password]": {
    remote: "You entered wrong credentials"}
    },
     errorContainer: "#messageBox1",
     errorLabelContainer: "#messageBox1 ul",
     wrapper: "li"

}) 
```

CSS：

```
 #messageBox1{
display: none;
 }

   #messageBox1{
width: 280px;
padding: 20px 0 20px 20px;
border-radius: 5px;
background: rgb(252, 248, 227) ;
border: solid 1px rgb(192, 152, 83);
margin-bottom: 10px;
 } 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T08:39:07.130

我不确定您使用的是什么验证插件，但它似乎可以控制您的标记（如果我错了，请纠正我）。

如果您愿意使用另一个验证插件（独立于标记结构），请尝试使用[jQuery Validator](https://github.com/Livesys/jQuery-Validator)

有关操作方法，请参阅演示和文档。自述文件包含参数信息。

[免责声明：我开发了这个插件供内部使用，但我们今天才将它开源]

以下是我将如何使用此插件处理您的情况：

```
if($("#yourForm INPUT").Validate()){
   $("#messageBos1").hide();
} else {
   $("#messageBos1").show();
} 
```

当然，您应该根据自己的需要进行修改，再次查看文档和演示。

# sql-server - 表达式中的比较运算符

> ID：12817446
> 
> 赞同：0
> 
> 时间：2012-10-10T10:42:07.237
> 
> 标签：sql-server, tsql

以下查询在 T-SQL 中不起作用：

```
SELECT Balance < Credit
FROM Accounts 
```

出现以下错误：

```
There was an error parsing the query. [ Token line number = 2,Token line offset = 23,Token in error = < ] 
```

`Balance`,`Credit`并且`Accounts`都是有效的表/字段名称。

为什么这不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T22:16:43.290

因为 T-SQL（在 SQL Server 和 SQL Server CE 中）没有原生`BOOLEAN`数据类型，并且逻辑表达式只能在某些地方使用，比如`WHERE`和`JOIN`子句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T22:19:10.223

你试过了吗？

```
SELECT Balance from Accounts
where Balance < Credit 
```

# python - 带有 socketio 服务器的 Python Web 服务器

> ID：12817448
> 
> 赞同：0
> 
> 时间：2012-10-10T10:42:10.617
> 
> 标签：python, socket.io

我正在寻找一个具有[socket.io](https://github.com/LearnBoost/socket.io-spec)服务器的 Web 服务器。我想要一个像cherrypy 这样的小型服务器，它带有一个套接字服务器，这样我就不必修改现有 Web 服务器中的很多东西来使套接字服务器工作.

有这样的网络服务器吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T10:46:28.307

所以您正在寻找 Websocket 支持？带有[https://bitbucket.org/Jeffrey/gevent-socketio的](https://bitbucket.org/Jeffrey/gevent-socketio)[Gevent](http://gevent.org/)对我的目的有效。

# c# - WebClient 异步卡住

> ID：12817450
> 
> 赞同：-1
> 
> 时间：2012-10-10T10:42:17.397
> 
> 标签：c#, asynchronous, webclient

我有这个代码：

```
autoResetEvent = new AutoResetEvent(false);
clien = new WebClient();
clien.Encoding = Encoding.UTF8;
clien.DownloadDataCompleted += new DownloadDataCompletedEventHandler(clien_DownloadDataCompleted);
clien.DownloadDataAsync(new Uri("http://www.classoneequipment.com/"));
autoResetEvent.WaitOne();

void clien_DownloadDataCompleted(object sender, DownloadDataCompletedEventArgs e)
 {
        Encoding enc = Encoding.UTF8;
        myString = enc.GetString(e.Result);
        autoResetEvent.Set();
 } 
```

当我在按钮单击事件中运行此代码时 - 它工作正常。但是当我从大类运行代码时，它会卡住并且没有到达函数：clien_DownloadDataCompleted。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T12:01:45.127

你处理这一切都是错误的。如果你想下载 3000 或更多的页面，你必须更有效率，而不是等待每次下载的事件。

实施（只是一个草稿，你必须完成它）

```
public class Downloader
{
    ConcurrentQueue<Uri> _queue = new ConcurrentQueue<Uri>();
    int _maxWorkers = 10;
    long _currentWorkers = 0;
    ManualResetEvent _completed;

    public void Enqueue(Uri uri)
    {
        _queue.Enqueue(uri);
        if (Interlocked.Read(_currentWorkers)  < _maxWorkers)
        {
            // not very thread safe, but we just want to limit the workers
            // within a reasonable limit. 1 or 2 more doesn't really matter.
            Interlocked.Increment(_currentWorkers);

            // yes, i'm a bit old fashioned.
            TriggerJob();
        }
    }

    private void TriggerJob()
    {
        Uri uri;
        if (!_queue.TryDequeue(out uri))
        {
            Interlocked.Decrement(_currentWorkers);
            return;
        }

        var client = new WebClient();
        client.Encoding = Encoding.UTF8;
        client.DownloadDataCompleted += DownloadDataCompleted;
        client.DownloadDataAsync(uri);
    }

    private void DownloadDataCallback(object sender, DownloadDataCompletedEventArgs e)
    {
        try
        {
            // If the request was not canceled and did not throw 
            // an exception, display the resource. 
            if (!e.Cancelled && e.Error == null)
            {
                var args = new DownloadedEventArgs { uri = e.Uri, data = (byte[])e.result};
                DownloadCompleted(this, args)
            }
            else
            {
                var args = new DownloadFailedEventArgs { uri = e.Uri, error = e.Error };
                DownloadFailed(this, args);
            }
        }
        catch (Exception err)
        {
            var args = new DownloadFailedEventArgs { uri = e.Uri, error = err };
            DownloadFailed(this, args);
        }

        TriggerJob();
    }

    public event EventHandler<DownloadedEventArgs> DownloadCompleted = delegate{};
    public event EventHandler<DownloadFailedEventArgs> DownloadFailed = delegate{};

}

public class DownloadedEventArgs
{
    public Uri uri;
    public byte[] data;
}

public class DownloadFailedEventArgs
{
    public Uri uri;
    public Exception error;
} 
```

用法：

```
var downloader = new Downloader();
downloader.Completed += (o,e) { Console.WriteLine("Whoohoho, completed: " + e.Uri); };

for (x = 1; x < 100000; x++)
{
    downloader.Enqueue(new Uri("http://somewhere.com));
} 
```

# javascript - 条件 IE 语句 - 如果是现代浏览器

> ID：12817451
> 
> 赞同：1
> 
> 时间：2012-10-10T10:42:18.923
> 
> 标签：javascript, internet-explorer, cross-browser

我的 JavaScript 只需要针对现代浏览器（IE9、FF、Chrome 等）并且不包括 IE8 和更早版本。我一直在试验，但我不确定它是否有效（没有适当的 IE 测试工具）。

我正在考虑为比 IE8 更新的脚本添加一个脚本，然后再为所有非 IE 添加一个脚本：

```
<!--[if gt IE 8)]><script src="sites/all/themes/customtheme/js/custom.js" type="text/javascript" charset="utf-8"></script><![endif]-->

<!--[if !IE]><!--><script src="sites/all/themes/customtheme/js/custom.js" type="text/javascript" charset="utf-8"></script><!--<![endif]--> 
```

任何人都有将脚本添加到现代浏览器并排除 IE8 和更早版本的任何经验或代码片段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T10:49:58.423

您只需要一个标签：

```
<![if gt IE 8]>
<script src="sites/all/themes/customtheme/js/custom.js" type="text/javascript" charset="utf-8"></script>
<![endif]> 
```

IE 将使用条件并且只包含 IE9 及更高版本的脚本，而其他浏览器将忽略条件标记，并且由于它们不形成注释标记，因此它们将包含脚本。

请参阅[下层显示的条件注释](http://msdn.microsoft.com/en-us/library/ms537512%28v=vs.85%29.aspx#dlrevealed)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T10:50:13.393

虽然不能直接回答您的问题，

您应该做的是功能检测浏览器的功能。

Modernizr 可以在很多方面提供帮助：

[http://modernizr.com/](http://modernizr.com/)

我这样说是因为基本上除了旧的 IE 之外的所有浏览器都放入了所谓的“现代浏览器”的桶中，你什么时候真的会在 FF2、Opera 或我的电视上运行脚本？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T06:12:28.747

最好的方法是像你所做的那样使用条件 Css ......关于如何调用和定位每个 IE 版本有很多变化。

这个css技巧也可能有帮助

[http://css-tricks.com/how-to-create-an-ie-only-stylesheet/](http://css-tricks.com/how-to-create-an-ie-only-stylesheet/)

希望能帮助到你。

# asp.net - Windows 7 中 Safari 5.x 的 Windows 身份验证问题

> ID：12817452
> 
> 赞同：5
> 
> 时间：2012-10-10T10:42:21.497
> 
> 标签：asp.net, windows-7, safari, iis-7.5, windows-authentication

我们在 Windows 7 中遇到了 Safari 5.x 的问题，正如这个问题“回发[在 Windows 7 中的 Safari 中不起作用](https://stackoverflow.com/questions/11807086/postback-is-not-working-in-safari-in-windows-7)”中所解释的那样，我们认为这是一个 ViewState 问题，因为许多人之前都遇到过这个问题。但是在查看了太多资源之后，Safari 5.x 似乎在 Windows 中的 Windows 身份验证方面存在一些问题，如这些链接中所述

[Asp.Net Windows 身份验证中 Safari 5.1 的](https://discussions.apple.com/thread/3338539?start=0&tstart=0)
[问题 在 Safari5.1 中使用 Windows 身份验证的问题](http://forums.asp.net/t/1722776.aspx/1)
[Safari 5.1 和 Windows 身份验证因模式对话框而中断](http://forums.asp.net/t/1708433.aspx/1)

Safari 5.x 确实存在 Windows 身份验证问题吗？如果是这样，如何解决？任何的想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-13T17:56:24.370

如果启用了协商提供程序，Safari 在 IIS 下使用 Windows 身份验证时会出现问题。

**如何解决？** 在 IIS 中，转到您网站的身份验证设置。右键单击 Windows 身份验证，选择提供程序并删除协商，留下 NTLM，这会使一切正常。

**[参考]**

*   [AJAX POST 请求仅在 Safari 5 中有效一次](https://stackoverflow.com/questions/7613196/Ajax-post-request-only-works-once-in-safari-5)
*   [Wikipedia 中的Negotiate Mechanism](http://en.wikipedia.org/wiki/SPNEGO)文章显示它没有在 Safari 中实现

# sql - 我应该在这种情况下使用 APPLY

> ID：12817453
> 
> 赞同：1
> 
> 时间：2012-10-10T10:42:22.660
> 
> 标签：sql, sql-server, sql-server-2008-r2

包含的代码是我们情况的简化版本；生产表相当于`#MyExample`有 20 个字段，所有这些字段都需要计算中位数，因此脚本的第二部分变得很长 - 不是一个巨大的困难，但有更紧凑的解决方案吗？

我没有使用`APPLY`或 custom`FUNCTION`的经验，但在这种情况下，我们应该`FUNCTION`为中位数创建一个然后使用`APPLY`我猜不是因为 apply 应用于每一行吗？

```
/*
DROP TABLE #MyExample
DROP TABLE #mediantable
*/

CREATE TABLE #MyExample
        (
        customer char(5),
        amountPeriodA numeric(36,8),
        amountPeriodB numeric(36,8),
        amountPeriodC numeric(36,8)
        )
INSERT INTO #MyExample
        values
        ('a',10,20,30),
        ('b',5,10,15),
        ('c',500,100,150),
        ('d',5,1,1),
        ('e',5,1,15),
        ('f',5,10,150),
        ('g',5,100,1500)

SELECT 
        [Period] = 'amountPeriodA',             
        [Median] = AVG(x.amountPeriodA)         
INTO    #mediantable
FROM (
        SELECT 
                r.customer,
                r.amountPeriodA,
                [RowASC] = ROW_NUMBER() OVER(ORDER BY r.amountPeriodA ASC, customer ASC),
                [RowDESC] = ROW_NUMBER() OVER(ORDER BY r.amountPeriodA DESC, customer DESC)
        FROM #MyExample r 
    ) x
WHERE RowASC IN (RowDESC, ROWDESC-1, ROWDESC+1)

union
SELECT 
        [Period] = 'amountPeriodB',             
        [Median] = AVG(x.amountPeriodB)         
FROM (
        SELECT 
                r.customer,
                r.amountPeriodB,
                [RowASC] = ROW_NUMBER() OVER(ORDER BY r.amountPeriodB ASC, customer ASC),
                [RowDESC] = ROW_NUMBER() OVER(ORDER BY r.amountPeriodB DESC, customer DESC)
        FROM #MyExample r 
    ) x
WHERE RowASC IN (RowDESC, ROWDESC-1, ROWDESC+1)

union
SELECT 
        [Period] = 'amountPeriodC',             
        [Median] = AVG(x.amountPeriodC)         
FROM (
        SELECT 
                r.customer,
                r.amountPeriodC,
                [RowASC] = ROW_NUMBER() OVER(ORDER BY r.amountPeriodC ASC, customer ASC),
                [RowDESC] = ROW_NUMBER() OVER(ORDER BY r.amountPeriodC DESC, customer DESC)
        FROM #MyExample r 
    ) x
WHERE RowASC IN (RowDESC, ROWDESC-1, ROWDESC+1)

SELECT * 
FROM #mediantable 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T12:44:07.527

Building on my previous reply I arrived on this which is a lot easier (and shorter) to expand for the number of columns and even runs a bit faster (probably a lot faster in case of 20+ columns!). However, it returns the results horizontally instead of vertically. This can be 'solved' again using UNPIVOT. I've done the operation in 2 parts using an intermediate #result table; but you could easily do it in a single statement using a subquery or CTE.

```
DECLARE @rowcount int
DECLARE @first int
DECLARE @last int
DECLARE @divider numeric(36,8)

SELECT @rowcount = COUNT(*) FROM #MyExample

SELECT @first = (CASE WHEN @rowcount % 2 = 1 THEN (@rowcount + 1) / 2 ELSE (@rowcount / 2)     END),
       @last  = (CASE WHEN @rowcount % 2 = 1 THEN (@rowcount + 1) / 2 ELSE (@rowcount / 2) + 1 END),
       @divider = (CASE WHEN @rowcount % 2 = 1 THEN 1 ELSE 2 END)

 SELECT amountPeriodA = SUM(amountPeriodA) / @divider,
        amountPeriodB = SUM(amountPeriodB) / @divider,
        amountPeriodC = SUM(amountPeriodC) / @divider    
   INTO #result
   FROM
 (
 SELECT amountPeriodA = ((CASE WHEN ROW_NUMBER() OVER(ORDER BY amountPeriodA ASC, customer ASC) IN (@first, @last) THEN amountPeriodA ELSE 0.00 END)),
        amountPeriodB = ((CASE WHEN ROW_NUMBER() OVER(ORDER BY amountPeriodB ASC, customer ASC) IN (@first, @last) THEN amountPeriodB ELSE 0.00 END)),
        amountPeriodC = ((CASE WHEN ROW_NUMBER() OVER(ORDER BY amountPeriodC ASC, customer ASC) IN (@first, @last) THEN amountPeriodC ELSE 0.00 END)) 
   FROM #MyExample
  )t 
```

and then

```
 SELECT [Period], [Amount] 
    FROM #result as x
    UNPIVOT ( [Amount] FOR Period IN (amountPeriodA, amountPeriodB, amountPeriodC)) As unpvt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T12:20:37.887

我在想：

```
DECLARE @rowcount int
DECLARE @first int
DECLARE @last int

SELECT @rowcount = COUNT(*) FROM #MyExample

SELECT @first = (CASE WHEN @rowcount % 2 = 1 THEN (@rowcount + 1) / 2 ELSE (@rowcount / 2)     END),
       @last  = (CASE WHEN @rowcount % 2 = 1 THEN (@rowcount + 1) / 2 ELSE (@rowcount / 2) + 1 END)

SELECT [Period],  
       [Median] = AVG(Amount)
  FROM (SELECT [Period] = 'amountPeriodA',
               Amount   = amountPeriodA, 
               rownbr   = ROW_NUMBER() OVER(ORDER BY amountPeriodA ASC, customer ASC)
          FROM #MyExample

         UNION ALL

        SELECT [Period] = 'amountPeriodB',
               Amount   = amountPeriodB, 
               rownbr   = ROW_NUMBER() OVER(ORDER BY amountPeriodB ASC, customer ASC)
          FROM #MyExample

        UNION ALL

        SELECT [Period] = 'amountPeriodC',
               Amount   = amountPeriodC, 
               rownbr   = ROW_NUMBER() OVER(ORDER BY amountPeriodC ASC, customer ASC)
          FROM #MyExample

          ) r
 WHERE rownbr IN (@first, @last)
 GROUP BY [Period] 
```

这似乎工作得很好，打字少了一点，结果也快了一点……但它仍然“大”。

PS：使用 UNION ALL 而不是 UNION 否则服务器将尝试将最终结果变成“不同的”记录，在这种情况下不需要。（无论如何，时期使它独一无二！）

# jquery - 提高 jquery 移动响应能力，将 onclick 转换为 vclick

> ID：12817455
> 
> 赞同：1
> 
> 时间：2012-10-10T10:42:30.717
> 
> 标签：jquery, jquery-mobile

我正在使用 jquery mobile 和 cordova(phonegap) 编写一个 android 应用程序。我一直遇到一些响应问题，并希望将代码中的每个 onclick 转换为 vclick。

问题是，我的 html 是从 ajax 调用动态注入到页面中的，例如在更改到新页面时。我读了json返回。

例如：

```
var str="<a onclick='blah blah' href='#'>whatever</a>&nbsp;<a onclick='blah blah' href='#'>whatever2</a>"
$('#container').html(str).trigger('create'); 
```

我想要一种方法来循环遍历具有 onclick='blah blah' 的每个元素的 #container 的内容并创建一个 $('element').live("vclick", function (evt) {}); 然后删除 onclick 属性。

这可以做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T11:02:42.720

也许通过使用[`pageChange`](http://jquerymobile.com/demos/1.2.0/docs/api/events.html)事件？

```
$(document).bind("pagechange", function( event, ui ){
    $('a').each(function(index, element) {
        if (element.onclick) {
            $(element).on('vclick', element.onlick).removeAttr('onclick');
        }
    });​
}); 
```

# magento - 通过信用商店状态支付的订单设置为“待处理”

> ID：12817459
> 
> 赞同：1
> 
> 时间：2012-10-10T10:42:35.690
> 
> 标签：magento, status

在 Magento Enterprise Edition 1.10 中（我不知道这在以后的版本中是否如此），当下订单并完全由**信用商店**支付时，她的状态设置为“待处理”。
我需要找出在 Magento 的代码中这是在哪里完成的。我刚刚花了2个小时寻找它没有结果，所以我在这里问你们。
谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T11:00:56.840

好的，我想我需要更多的咖啡：这是在系统 > 配置 >（销售）付款方式 > 零小计结帐中配置的状态

# linux - Linux - 与时俱进

> ID：12817467
> 
> 赞同：0
> 
> 时间：2012-10-10T10:43:00.557
> 
> 标签：linux, command-line-interface

因此，要跟踪日志并实时观看，可以使用

```
tail -f <filename> 
```

但是，如果您想关注其他内容怎么办？我想跟随这里并不是很准确，更像是重复刷新同一组数据..这可能吗？

我正在考虑这样的事情：如果您想查看文件何时从一个文件夹移动到另一个文件夹，例如作为通过 cron 运行的函数的一部分，您可以使用

```
ls -lR 
```

反复，但我在想的是相当于：

```
ls -lR | tail -f 
```

或者

```
date | tail -f 
```

浪费时间看时钟滴答作响。

有没有这样的东西，或者这只是控制台的限制。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T10:47:24.187

你的意思是[监视](http://linux.die.net/man/1/watch)命令？

```
watch -n 1 'date' 
```

这样你就可以看到每一秒的时间变化。默认值为 2 秒。

# c# - 带有 c# 控制台应用程序的系统托盘图标不会显示菜单

> ID：12817468
> 
> 赞同：9
> 
> 时间：2012-10-10T10:43:03.007
> 
> 标签：c#, .net, system-tray

我有一个小的 C# (.NET 4.0) 控制台应用程序，我希望用户能够通过在右键单击系统托盘图标时显示菜单来进行交互。我可以毫无问题地将图标添加到托盘，但我无法让菜单出现。我正在使用以下代码：

```
NotifyIcon trayIcon = new NotifyIcon();
trayIcon.Text = "TestApp";
trayIcon.Icon = new Icon(SystemIcons.Application, 40, 40);

ContextMenu trayMenu = new ContextMenu();

trayMenu.MenuItems.Add("Blah", item1_Click);
trayMenu.MenuItems.Add("Blah2", item1_Click);
trayMenu.MenuItems.Add("Blah3", item1_Click);

trayIcon.ContextMenu = trayMenu;
trayIcon.Visible = true; 
```

...将图标放在托盘中。但是，右键单击该图标不会执行任何操作。我尝试了 的各种排列`MenuItems.Add`，但没有任何东西会使菜单出现。我确定我错过了一些简单的东西 - 有什么想法吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-10T10:47:20.530

创建图标后尝试添加：

```
Application.Run() 
```

注意这个方法不会返回，所以调用后不能做任何事情。这意味着您必须在单独的线程中完成所有其他工作。

发生的情况是操作系统向您的应用程序发送一条消息，告诉它托盘图标已被右键单击，但托盘图标代码从未看到它（因为这些消息由 处理`Application.Run`），因此无法通过打开菜单来响应。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-28T13:23:04.467

关于`Application.Run()`，这是将所有其他代码放在另一个线程中的替代方法，即在主线程以外的线程上创建`NotifyIcon`, `menu`,等。`events`

这应该包括`Application.Run()`，因为这允许标准应用程序消息循环在***当前***线程上工作。然后由于事件是在同一个线程上创建的，`Application.Exit()`可以用来关闭通知消息，但仍然允许主线程继续。这是控制台应用程序的一个小示例...

```
class Program 
{
    public static ContextMenu menu;
    public static MenuItem mnuExit;
    public static NotifyIcon notificationIcon;

    static void Main(string[] args)
    {
        Thread notifyThread = new Thread(
            delegate()
            {
                menu = new ContextMenu();
                mnuExit = new MenuItem("Exit");
                menu.MenuItems.Add(0, mnuExit);

                notificationIcon = new NotifyIcon()
                {
                    Icon = Properties.Resources.Services,
                    ContextMenu = menu,
                    Text = "Main"
                };
                mnuExit.Click += new EventHandler(mnuExit_Click);

                notificationIcon.Visible = true;
                Application.Run();
            }
        );

        notifyThread.Start();

        Console.ReadLine();          
    }

    static void mnuExit_Click(object sender, EventArgs e)
    {
        notificationIcon.Dispose();
        Application.Exit();
    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-05T20:14:06.700

这是解决方案：您必须使用`Application.Run()`，因为控制台模式下的 gui 事件不起作用。但是您可以使用此解决方案：

```
var task = System.Threading.Tasks.Task.Factory.StartNew(() => ShowTrayIcon());

void ShowTrayIcon()
{
    some code with tray icon ...
} 
```

这将开始您在新线程中设置尝试图标...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T11:17:42.757

您是否为托盘图标鼠标单击添加了事件处理程序？

```
trayIcon .MouseDown += new MouseEventHandler(trayIcon_MouseDown); 
```

创建上下文菜单并在 trayIcon_MouseDown 函数中执行以下操作

```
private void trayIcon_MouseDown (object sender,MouseEventArgs e)
{
  //add you menu items to context menu
  contextMenu.Items.Add(item);
  contextMenu.IsOpen = true;  
} 
```

试试这个。认为这会对您有所帮助。

# java - 将范围更改为运行时后，依赖性消失

> ID：12817472
> 
> 赞同：0
> 
> 时间：2012-10-10T10:43:22.647
> 
> 标签：java, maven, dependencies

我需要在运行时范围内使用一些 jar 依赖项，但是在 pom.xml 中更改它之后，这个依赖项从依赖项列表中消失了。在编译和运行期间使用此依赖项中的类，因此我需要此依赖项处于运行时范围。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T10:47:23.867

如果您在编译中使用依赖项中的类，则需要“编译”范围。运行时依赖项不在编译类路径中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T10:50:49.623

如果您在编译时需要依赖项中的类，那么您应该使用`compile`默认范围。

为了运行您的应用程序，您需要将所有依赖的 jars 放在类路径中。您可以通过各种方式使用 Maven 来实现这一点，但正确的范围仍然是`compile`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T10:51:00.357

您可能想了解[Maven Dependency scopes](http://maven.apache.org/pom.html#Dependencies)。默认范围是`compile`，除非绝对必须，否则您不应更改它。

> *   **compile** - 这是默认范围，如果没有指定，则使用。编译依赖项在所有类路径中都可用。
>     
>     
> *   **运行时**- 此范围表示编译不需要依赖项，但需要执行。它在运行时和测试类路径中，但不在编译类路径中。

* * *

在项目中运行某些类的最简单方法是使用[`exec-maven-plugin`](http://mojo.codehaus.org/exec-maven-plugin/index.html).

```
<build>
    <plugins>
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>exec-maven-plugin</artifactId>
            <version>1.2.1</version>
            <executions>
                <execution>
                    <goals>
                        <goal>java</goal>
                    </goals>
                </execution>
            </executions>
            <configuration>
                <mainClass>com.example.Main</mainClass>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

现在您可以像这样运行项目：

```
mvn package exec:java 
```

这很容易，您不必考虑类路径设置。

# objective-c - 如何在ios的NSCache中存储数据？

> ID：12817476
> 
> 赞同：7
> 
> 时间：2012-10-10T10:43:31.043
> 
> 标签：objective-c, nscache

我对 NSCache 很陌生。

我有一个 API 调用会产生多个对象。如何将这些对象存储在 NSCache 中，这样我就不需要再次调用 API。

NSCache 中可以存储多少数据。将数据存储在 NSCache 中是否有特定限制。

请帮我。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-10T10:49:26.857

查看[文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSCache_Class/Reference/Reference.html)和[示例代码](https://developer.apple.com/library/mac/#samplecode/Cache/Introduction/Intro.html#//apple_ref/doc/uid/DTS40012288)。

> NSCache 对象是一个类似于集合的容器或缓存，用于存储键值对，类似于 NSDictionary 类。

[这](http://www.cocoabuilder.com/archive/cocoa/302987-how-to-use-the-nscache.html)是 Nick Zitzmann 的很好的解释。

> NSCache 与 NSMutableDictionary 类似，区别在于：
> 1\. 保证线程安全。
> 2.访问速度慢很多。
> 3.它可能会不时抛出物体。您可以设置成本和限制，但不能保证一定会遵守。
> 4\. 它不是免费连接到 CoreFoundation 中的任何东西。
> 5\. 无法查询缓存中的对象数量。
> 6\. 不能枚举缓存。
> 
> **我只能推荐使用 NSCache 来存储你不会关心的对象，如果它们被任意破坏。如果对象不能被销毁，或者访问速度是个问题，那么使用 NSMutableDictionary 代替。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T10:55:05.877

来自与您相关的文档

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSCache_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSCache_Class/Reference/Reference.html)

NSCache 有很多自动删除策略，确保它不会使用过多的系统内存。如果其他应用程序需要内存，系统会自动执行这些策略。调用时，这些策略会从缓存中删除一些项目，从而最大限度地减少其内存占用。

# regex - 查找仅包含某些字符的字符串

> ID：12817479
> 
> 赞同：1
> 
> 时间：2012-10-10T10:43:43.130
> 
> 标签：regex

我创建了一个正则表达式来查找类似的字符串

> [general_conf]

看起来像：

```
\[(.*)] 
```

它有效，但是我只需要匹配字母和_

试过：`\[(a-z_)]`但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T10:55:47.920

您想创建一个[字符类](http://www.regular-expressions.info/charclass.html)，这是通过将所需字符放入一组方括号中来完成的。所以它应该看起来像这样：

```
\[([a-z_]*)] 
```

也许您[对正则表达式的快速介绍](http://blog.xisb.de/?p=4)感兴趣。

正则表达式信息的另一个好来源是[regular-expressions.info](http://www.regular-expressions.info/tutorial.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T10:54:41.740

试试这个：

```
/\[[a-z_]+\]/ 
```

希望这可以帮助。

# python - 如何通过 tcp 使用行流修改 syslog-ng 的日志？

> ID：12817484
> 
> 赞同：0
> 
> 时间：2012-10-10T10:43:57.020
> 
> 标签：python, linux, logging, stream, syslog-ng

我有一台机器可以修改 syslog-ng 的日志；编辑配置文件以将日志写入本地文件`/data/logs/access.log`

```
destination d_nginx_video { file("/data/logs/access.log" create_dirs(yes) template("$PROGRAM $MESSAGE\n"));}; 
```

然后我想将日志文件发送到一个`redis`队列，我可以让我的日志使用一些处理

但我需要先读取日志文件，然后将日志放入 redis

所以我使用`tail -F /data/logs/access.log|python process put to redis queue`，这是一个不好的方法

我想运行一个 tcp 服务器来接收日志文件以及如何配置 syslog-ng

我的 tcp 服务器脚本是[tcp 服务器脚本](https://gist.github.com/3864731)

这`5144`是我通过脚本监听的 syslog-ng 端口

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T11:48:42.880

除了“文件”之外，您是否考虑过使用“程序”指令并将日志直接传送到您的脚本而不是涉及网络？

```
destination d_nginx_video { program("/path/to/python/script arg arg arg"
                                    template("$PROGRAM $MESSAGE\n"));
                            file("/data/logs/access.log" create_dirs(yes)
                                 template("$PROGRAM $MESSAGE\n")); }; 
```

我不是 syslog-ng 专家，但这似乎与您当前的方法非常相似，只是它使脚本保持运行并不断处理来自 syslog 守护进程中的日志。[syslog-ng 文档](http://www.balabit.com/sites/default/files/documents/syslog-ng-v3.0-guide-admin-en.html/index.html-single.html#reference_destination_program)包含更多信息。

# javascript - 为什么我的主干模型不能从服务器获取

> ID：12817485
> 
> 赞同：0
> 
> 时间：2012-10-10T10:43:59.293
> 
> 标签：javascript, backbone.js

'/donut' 的请求处理程序

```
class DonutHandler(webapp2.RequestHandler):
    def get(self):
        self.response.write("{id: 42, name: 'bob', age: 12}") 
```

Javascript：

```
var Donut = Backbone.Model.extend({
    url: '/donut',
    urlRoot: '/donut'
});

donut = new Donut()

donut.fetch({success: function() {
                      console.log('ok');
             },
             error: function(collection, response) {
                      console.log('error on -> ' + response.responseText);
             }
 });

error on -> {id: 42, name: 'bob', age: 12} 
```

相反，我希望将“ok”记录到控制台，并且我的甜甜圈现在将具有属性年龄、id 和名称。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T10:49:12.837

发生这种情况是因为您的响应不是有效的 JSON 字符串。

尝试将此作为响应发送：

```
"{\"id\": \"42\", \"name\": \"bob\", \"age\": \"12\"}" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T10:50:42.787

您的 JSON 无效，请参阅[http://json.org/](http://json.org/)，键名必须是字符串，值必须遵守某些规则。

> 字符串是零个或多个 Unicode 字符的序列，用双引号括起来，使用反斜杠转义

和

> 值可以是双引号中的字符串、数字、true 或 false 或 null，也可以是对象或数组。这些结构可以嵌套。

尝试发送`{"id": 42, "name": "bob", "age": 12}`

# graph - Z 表示法：二维数组的表示

> ID：12817488
> 
> 赞同：3
> 
> 时间：2012-10-10T10:44:09.407
> 
> 标签：graph, multidimensional-array, formal-methods, z-notation

我是 Z 表示法的完整初学者。我需要在 Z 中表示一个图类型。我的想法是使用关联矩阵，以便我可以轻松地在节点和边之间自由遍历。

唯一的问题是，我不知道如何在 Z 中指定关联矩阵。我认为我需要一个 2D 数组，但是通过可用于 Z 表示法的参考资料，数组通常使用 seq 表示。还有另一种方法来指定多维数组吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-07T19:09:34.590

我认为节点之间的关系将是关联矩阵的更好表示。假设我们有一个类型节点：

```
 [node] 
```

然后可以将图建模为节点之间的关系：

```
graph : node \rel node 
```

这将是一个有向图，因为图中可能有一条边 n1->n2，但没有 n2->n1。如果您需要一个无向图，您可以添加进一步的限制：

```
graph\inv = graph 
```

（graph的倒数与graph相同，即如果n1->n2 in graph，那么n2->n1也一定在graph中。）

如果您真的想将关联矩阵建模为多维数组，您可以定义一个从数组中的位置映射到整数的函数，例如：

```
matrix: (node \cross node) \fun {0,1} 
```

两种表示之间的关系可以表示为：

```
\forall n1,n2:node @ (n1,n2)\in graph \iff graph( (n1,n2) ) = 1 
```

# java - 使用 jtable 生成表运行时和鼠标单击事件

> ID：12817490
> 
> 赞同：1
> 
> 时间：2012-10-10T10:44:15.190
> 
> 标签：java, swing, event-handling, jtable, mouseevent

你好开发人员我在 jframe 中使用两个按钮和一个表，当我单击一个按钮时，应该生成具有不同行数的新表，并且在单击表的行时，当我单击时它应该再次显示行数和列数另一个按钮它应该创建具有新行数的新表，并且再次单击它时应该显示行号和列号

我正在使用以下代码。第一次创建表时，它会生成正确的结果，但是当再次创建表时，单击任何行会给出行号和列号 -1 。和数组索引越界异常我的代码有什么问题请帮助

```
JTable table;
JScrollPane jsp;
Button b1 = new JButton("1");
Button b2 = new JButton("2");
add(b1);
add(b2);
b1.addActionListener (this);
b1.addActionListener (this);

public void actionPerformed(ActionEvent ae) {
    int i = 0;
    if (ae.getActionCommand().equals("1")) {
        i = 1;
    }
    if (ae.getActionCommand().equals("2")) {
        i = 2;
    }
    String title[] = {""};
    Object obj[][] = new Object[i][1];
    table = new JTable(obj, title);
    jsp = new JScrollPane(table);
    add(jsp);
    table.addMouseMotionListener(this);
}

public void mouseClicked(MouseEvent me) {
    // first time it returns the true result but on new table creation 
    //i and j are returned -1 .
    int i = table.getSelectedRow();
    int j = table.getSelectedColumn();
    System.out.println("i is" + i);
    System.out.println("j is" + j);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T13:59:47.823

此示例还有一些其他问题，但要解决您的直接问题，您需要获取源代码`MouseEvent`并对其进行操作：

```
public void mouseClicked(MouseEvent me) {
    // first time it returns the true result but on new table creation 
    //i and j are returned -1 .
    JTable table = (JTable)me.getSource();
    int i = table.getSelectedRow();
    int j = table.getSelectedColumn();
    System.out.println("i is" + i);
    System.out.println("j is" + j);
} 
```

问题在于您`ActionListener`正在重新分配`table`给一个新表（没有选择任何行）。因此，如果您单击第一个表，它仍然会在第二个表（没有选择任何行）上执行它的操作。

# java - Android自定义列表视图行不会让我添加

> ID：12817491
> 
> 赞同：0
> 
> 时间：2012-10-10T10:44:17.437
> 
> 标签：java, android, listview

我有一个列表视图，只需使用 simple_list_view1 就可以正常工作。但现在我需要在左侧添加一个图标。所以我在 res/layout/ 中创建了一个 iconrow.xml。当我尝试将其设置为布局时，它会出错并且不会让我使用`android.R.layout.iconrow,`. 显然我在这里做错了什么！这是一个正在构建的数组，它将填充数据。

我的xml是：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="horizontal">

    <ImageView
        android:id="@+id/icon"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@android:drawable/ic_delete" />

    <TextView
        android:id="@+id/text"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Medium Text"
        android:textAppearance="?android:attr/textAppearanceMedium" />

</LinearLayout> 
```

我的代码是：

光标 c = db.rawQuery(SQLStatement, null);
如果（c.getCount（）！= 0）{

```
Log.e("LocationListView", "Found Items");   

c.moveToFirst(); 
```

ArrayList mItemName = new ArrayList(); 最终 ArrayList mItemID = new ArrayList();

```
c.moveToFirst();
while(!c.isAfterLast()) {
     mItemName.add(c.getString(c.getColumnIndex("Name")));
     mItemID.add(c.getString(c.getColumnIndex(ColType)));
     c.moveToNext();
}
rowCount = mItemName.size();

listView = (ListView) findViewById(R.id.lvLocation);
final ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
      android.R.layout.iconrow, android.R.id.text1, mItemName);

int[] colors = {0, 0xFFFF0000, 0}; 
listView.setDivider(new GradientDrawable(Orientation.RIGHT_LEFT, colors));
listView.setDividerHeight(1);
listView.setAdapter(adapter); 

listView.setClickable(true); 
```

错误在 android.R.layout.iconrow

任何帮助将不胜感激。

汤姆

编辑：这是我现在的代码 - tv.setText(mItemName.get(arg0).toString()); 上的错误

```
 c.moveToFirst();

      final ArrayList<String> mItemID = new ArrayList<String>();

        c.moveToFirst();
        while(!c.isAfterLast()) {
             mItemName.add(c.getString(c.getColumnIndex("Name")));
             mItemID.add(c.getString(c.getColumnIndex(ColType)));
             c.moveToNext();
        }
        rowCount = mItemName.size();

        listView = (ListView) findViewById(R.id.lvLocation);

//        final ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
//                R.layout.iconrow, R.id.text, mItemName);
        tv.setText(mItemName.get(arg0).toString()); 

        int[] colors = {0, 0xFFFF0000, 0}; 
        listView.setDivider(new GradientDrawable(Orientation.RIGHT_LEFT, colors));
        listView.setDividerHeight(1);
        listView.setAdapter(new CustomAdapter());

        listView.setClickable(true);
        listView.setOnItemClickListener(new AdapterView.OnItemClickListener() {

          @Override
          public void onItemClick(AdapterView<?> arg0, View arg1, int position, long arg3) {

            Object o = listView.getItemAtPosition(position);
            String StationObjectID = mItemID.get(position);

            Intent SwapPage = new Intent(arg1.getContext(), LocationListView.class);
            SwapPage.putExtra("ID", StationObjectID);
            SwapPage.putExtra("Type", Type);

            startActivityForResult(SwapPage, 0);

          }
        });

        } else {

            Log.e("LocationListView", "Not Found Items");   
            Context context = getApplicationContext();
            CharSequence text = "No data returned";
            int duration = Toast.LENGTH_LONG;
            Toast toast = Toast.makeText(context, text, duration);
            toast.show();       

        }

        db.close();

    }

        public void goBack(View view) {

            if(Global.returnPage.equals("MainPage")) {  

            Intent addItem = new Intent(view.getContext(), MainPage.class);
            startActivityForResult(addItem, 0);

            } else {
                Intent addItem = new Intent(view.getContext(), LocationListView.class);
                addItem.putExtra("Type", Global.stepListType);
                Log.e("PushThrough", Global.stepListType);
                addItem.putExtra("ID", Global.stepListID);
                Log.e("PushThrough", Global.stepListID);
                startActivityForResult(addItem, 0);
            }
        }

        public void addItem(View view){
            Intent addItem = new Intent(view.getContext(), AddItem.class);
            addItem.putExtra("Count", rowCount);

            if(Adding.equals("Building")){

                addItem.putExtra("Type", "0");

            } else if(Adding.equals("Room")){

                addItem.putExtra("Type", "1001");
                addItem.putExtra("PrevID", dataID);

            } else if (Adding.equals("Area")){

                addItem.putExtra("Type", "532");
                addItem.putExtra("PrevID", dataID);
            }

                startActivityForResult(addItem, 0);
        }

        public void onResume()
        {
            super.onResume();

           Log.e("Tom", "resumed");
        }

        class CustomAdapter extends BaseAdapter
        {

        @Override
        public int getCount() {
            // TODO Auto-generated method stub
            return mItemName.size();
        }

        @Override
        public Object getItem(int arg0) {
            // TODO Auto-generated method stub
            return null;
        }

        @Override
        public long getItemId(int arg0) {
            // TODO Auto-generated method stub
            return 0;
        }

        @Override
        public View getView(int arg0, View arg1, ViewGroup arg2) {
            // TODO Auto-generated method stub

            LayoutInflater inf=getLayoutInflater();
            View v=inf.inflate(R.layout.iconrow, arg2,true);

            ImageView iv=(ImageView)v.findViewById(R.id.icon);
            TextView tv=(TextView)v.findViewById(R.id.text);

            return v;
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T10:53:58.610

创建自定义适配器为

```
class CustomAdapter extends BaseAdapter
    {

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return mItemName.size;
    }

    @Override
    public Object getItem(int arg0) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public long getItemId(int arg0) {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public View getView(int arg0, View arg1, ViewGroup arg2) {
        // TODO Auto-generated method stub

        LayoutInflater inf=getLayoutInflater();
        View v=inf.inflate(R.layout.iconrow, arg2,true);

        ImageView iv=(ImageView)v.findViewById(R.id.icon);
        TextView tv=(TextView)v.findViewById(R.id.text);

        return v;
    }

} 
```

然后将其设置为您的列表

```
listview.setAdapter(new CustomAdapter()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-17T17:24:05.997

另一种实现如下：

```
public class CustomArrayAdapter extends ArrayAdapter<Applications>{
    private MainActivity context;
    private int layoutResourceId;
    private int textresourceId;
   ArrayList<Applications> objects=null;

    public CustomArrayAdapter(MainActivity context, int resource,ArrayList<Applications> objects) {
        super(context, resource);
        this.context = context;
        this.layoutResourceId = resource;
        this.objects = objects;
        Log.d("CustomArrayAdapter","Was here!!");
    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return objects.size();
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        LayoutInflater inf=getLayoutInflater();
        View convertView=inf.inflate(R.layout.iconrow, arg2,true);

        ImageView iv=(ImageView)v.findViewById(R.id.icon);
        TextView tv=(TextView)v.findViewById(R.id.text);

        return convertView;
    }
} 
```

# c# - 正则表达式子字符串与模式匹配

> ID：12817497
> 
> 赞同：0
> 
> 时间：2012-10-10T10:44:41.980
> 
> 标签：c#, regex, string

我有一个正则表达式模式

```
 string _pattern = @"\d{4}-\d{2}\/\d{2}\/\d{4}"; 
```

如何检查字符串值是否完全属于此模式或属于此模式。

例如，如果我发送

```
 string someString= "0007-08/02/2012";
        Match m = Regex.Match(someString, _pattern);
        //i get a full match 
```

但如果我发送

```
 string someString="0007-"
        //how do i check if this string value matches that pattern and is a substring. 
```

除了使用正则表达式之外，还有其他方法吗？

谢谢，csk

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T10:51:04.127

如果要匹配模式的任何子字符串，则必须添加“？” 在所有选项中，如下所示：

```
string _pattern = @"(\d{4})?(-)?(\d{2})?(\/)?(\d{2})?(\/)?(\d{4})?"; 
```

此模式将匹配您原始模式的任何子字符串。

```
i.e.: 
0007-08/02/2012
0007-
08/02/2012
08/
/02/2012 
```

所有这些都符合模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T10:52:30.507

```
string _pattern = @"\d{4}-(\d{2}\/\d{2}\/\d{4})?" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T11:00:41.917

我的建议是`someString`使用已知与模式匹配的字符串进行后缀并对其进行测试：

```
string good = "0007-08/02/2012";
bool isMatch = Regex.Match(someString + good.Substring(someString.Length), _pattern) 
```

# javascript - 如何在 Android WebView 中使用 JavaScript evaluate()？

> ID：12817499
> 
> 赞同：0
> 
> 时间：2012-10-10T10:44:50.687
> 
> 标签：javascript, android, webview, evaluate

我想创建一个能够计算像 3+(2-1)*2 或 (28.4/2-1.5)+(4-2) 这样的字符串的计算器。我在网上搜索，发现可以使用启用了 JavaScript 的 WebView，它可以评估（）字符串。

如何在 WebView 中使用 JavaScript？

例如，我如何将 input.getText().toString() 传递给 JavaScript 并取回一个值？

如何在我的 Java 代码中访问 JavaScript 的评估（）？

[我在这里](http://ganeshtiwaridotcomdotnp.blogspot.de/2011/09/android-javascriptinterface-tutorial.html)找到了一个教程。我必须将 HTML 文件加载到我的 WebView 中，不是吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-17T14:38:09.950

你走对了。对于在 webview 中使用 javascript，在将 url 加载到 webview 之后，（您可以在 onPageFinish 函数中捕捉到页面加载）在 onPageFinish 函数中，您可以像这样调用 js：

但首先您必须使用以下代码块授予 webview 权限：

```
 settings.setJavaScriptEnabled(true);
   settings.setJavaScriptCanOpenWindowsAutomatically(true);

   webview.loadUrl("javascript:setPageHeight("+contentHeight+");"); // you can pass param with call js function at loaded page.
   webview.loadUrl("javascript:alert('test');"); // or you can call like this 
```

要使用 js 从 webview 获取结果参数，您必须有一个像这样的子类：

```
 class JavaScriptInterface {
      public void showToast(String msg) {
           Toast.makeText(mContext, "Received Msg :" + msg,Toast.LENGTH_SHORT).show();
      }
   } 
```

然后你在定义 webview 行把这个给你的 webview

```
 webview.addJavascriptInterface(new JavaScriptInterface(), "MyAndroid"); 
```

最后，您在 js 中的 html 中调用 java 函数，如下所示：

```
<html>
  <head>
    <script type="text/javascript">
      function sayHello(msg){
        //calls Android's JavaScriptInterface Function
        MyAndroid.showToast(msg);
      }
    </script>
 </head>
 <body >
   <div onclick="sayHello('hello')"> Click Me !!  </div>
 </body>
</html> 
```

# vim - 在 vim 中重新映射 :Wq 到 :wq

> ID：12817501
> 
> 赞同：11
> 
> 时间：2012-10-10T10:44:55.257
> 
> 标签：vim, customization

很多时候，当我想在 vim 中保存文件并立即退出时，我不小心输入了 :Wq 而不是 :wq。

Vim 自然地给了我这个错误：

```
E492: Not an editor command: Wq 
```

我想知道，是否可以将 :Wq 重新映射为 :wq？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-10T19:35:48.860

您可以创建一个简单的 vim 命令，它基本上是`wq`. 将以下内容放入您的`~/.vimrc`文件中：

```
command! Wq wq 
```

如需更多帮助，请参阅：

```
:h :command 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-10T20:29:08.050

您也可以使用`ZZ`which is the same as`:wq<CR>`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-10T10:59:44.583

尽管缩略语暗示了这一点 ( `:cnoreabbrev Wk wk`)，但它们的主要缺点是它们也适用于其他地方，例如`Wk`在搜索模式中使用时。

使用[cmdalias 插件](http://www.vim.org/scripts/script.php?script_id=746)，您可以定义别名：

```
:Alias Wk wk 
```

^(PS：没有`:wk`命令，你的意思是`:wn[ext]`？简单来说`:w`，看看[这个问题](https://stackoverflow.com/questions/10590165/is-there-a-way-in-vim-to-make-w-to-do-the-same-thing-as-w))

# java - 在java中访问私有方法？

> ID：12817502
> 
> 赞同：-7
> 
> 时间：2012-10-10T10:44:58.590
> 
> 标签：java, methods, private, overriding

如何实现这样的功能来访问私有成员？

Java 仅在编译期间检查访问权限。你惊喜吗？得知这个事实，我感到非常惊讶。

所以你可以创建第三方类的骨架（即使是空的实现）。有趣的方法应该被保护而不是私有。现在编写您的子类并针对您的存根进行编译。然后只打包您的子类并尝试使用“真实”类运行它。它应该工作。当我不得不访问私有方法或字段时，我已经尝试过了，它对我来说效果很好。

参考。[https://stackoverflow.com/a/4440051/1312423](https://stackoverflow.com/a/4440051/1312423)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T10:48:50.413

> Java 仅在编译期间检查访问权限。你惊喜吗？

是的，因为它也在运行时检查访问修饰符。

* * *

我从

```
public class AnotherClass {
    protected static void printMe() {
        System.out.println("Hello World");
    }
}

public class Main {
    public static void main(String... args) {
        AnotherClass.printMe();
    }
} 
```

它编译并运行。

如果我在不重新编译的情况下将其更改`printMe()`为确实可以编译，但是当我运行时我得到了。`private``Main``Main`

```
Exception in thread "main" java.lang.IllegalAccessError: tried to access method AnotherClass.printMe()V from class Main
    at Main.main(Main.java:22) 
```

# c# - c# mvc4 Ext.Net.MVC.StoreResult 不返回有效结果

> ID：12817504
> 
> 赞同：2
> 
> 时间：2012-10-10T10:45:01.140
> 
> 标签：c#, .net, asp.net-mvc-4, ext.net, gridpanel

我在 MVC4 + EXT.NET 库项目中创建 StoreResult 控制器，以响应 GridPanel() 中的 JsonReader()。我的控制器返回字符串 Ext.Net.MVC.StoreResult 而不是 json 数据。我在 VS2012、IIS8、MVC4 中创建项目。

谢谢你帮助我。

```
// IN VIEW

@(Html.X().GridPanel()
.ID("GridPanel1")
.Title("Array Grid")
.Width(600)
.Height(350)
.Store(s => s.Add(Html.X().Store()
    .PageSize(100)
    .Buffered(true)
    .AutoLoad(false)
    .Proxy(proxy=>proxy.Add(Html.X().AjaxProxy()
        .Url("/Data/GetData")
        .Reader(reader=>reader.Add(Html.X().JsonReader()
            .Root("data")))
     ))
    .Model(model => model.Add(Html.X().Model()
    .Fields(field =>
    {
        field.Add(Html.X().ModelField().Name("UserId"));
        field.Add(Html.X().ModelField().Name("UserName"));

    })
    ))

))
.VerticalScroller(scroller => scroller.Add(Html.X().GridPagingScroller()))
    .ColumnModel(columnModel =>
    {
        columnModel.Columns.Add(Html.X().Column()
            .Text("UserId")
            .DataIndex("UserID")
            .Flex(1)
            .Width(70));
        columnModel.Columns.Add(Html.X().Column()
            .Text("UserName")
            .DataIndex("UserName")
            .Flex(1));
        columnModel.Columns.Add(Html.X().Column()
            .Text("UserPassword")
            .DataIndex("UserPassword")
            .Flex(1));        
    })
.View(view => view.Add(Html.X().GridView().TrackOver(false)))
.Listeners(listeners =>
{
    listeners.AfterRender.Handler = "this.store.guaranteeRange(0,99);";
    listeners.AfterRender.Delay = 100;
})
)

///////// IN CONTROLLER

    public class DataController : System.Web.Mvc.Controller
    {
        //
        // GET: /Data/GetData/
        public Ext.Net.MVC.StoreResult GetData(int page = 1, int start = 0, int limit = 100)
        {

            StoreResult responce = new StoreResult();

            List<UserList> UserList = new List<UserList>();

            for (int i = start + 1; i <= start + limit; i++)
            {
                UserList user = new UserList()
                    {
                        UserId = i,
                        UserName = "UserName " + i
                    };
                UserList.Add(user);
            }

            responce.Data = UserList;
            responce.Total = 50000;
            return responce;

        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T13:37:47.437

尝试改变这一点

```
<assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
  <dependentAssembly>
    <assemblyIdentity name="System.Web.Helpers" publicKeyToken="31bf3856ad364e35" />
    <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
    <assemblyIdentity name="Newtonsoft.Json" publicKeyToken="30ad4fe6b2a6aeed" />
    <bindingRedirect oldVersion="1.0.0.0-4.0.0.0" newVersion="4.5.7" />
    <assemblyIdentity name="Ext.Net.Utilities" publicKeyToken="2c34ac34702a3c23" />
    <bindingRedirect oldVersion="0.0.0.0-2.0.0" newVersion="2.0.1" />
  </dependentAssembly>
  <dependentAssembly>
    <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
    <bindingRedirect oldVersion="0.0.0.0-4.0.0.0" newVersion="4.0.0.0" />
  </dependentAssembly>
  <dependentAssembly>
    <assemblyIdentity name="System.Web.WebPages" publicKeyToken="31bf3856ad364e35" />
    <bindingRedirect oldVersion="0.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
  </dependentAssembly>
</assemblyBinding> 
```

对此

```
<assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
  <dependentAssembly>
    <assemblyIdentity name="System.Web.Helpers" publicKeyToken="31bf3856ad364e35" />
    <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
  </dependentAssembly>
  <dependentAssembly>
    <assemblyIdentity name="Newtonsoft.Json" publicKeyToken="30ad4fe6b2a6aeed" />
    <bindingRedirect oldVersion="1.0.0.0-4.0.0.0" newVersion="4.5.7" />
  </dependentAssembly>
  <dependentAssembly>
    <assemblyIdentity name="Ext.Net.Utilities" publicKeyToken="2c34ac34702a3c23" />
    <bindingRedirect oldVersion="0.0.0.0-2.0.0" newVersion="2.0.1" />
  </dependentAssembly>
  <dependentAssembly>
    <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
    <bindingRedirect oldVersion="0.0.0.0-4.0.0.0" newVersion="4.0.0.0" />
  </dependentAssembly>
  <dependentAssembly>
    <assemblyIdentity name="System.Web.WebPages" publicKeyToken="31bf3856ad364e35" />
    <bindingRedirect oldVersion="0.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
  </dependentAssembly>
</assemblyBinding> 
```

在您的 web.config 文件中。

# c# - 当 GridView 中的 CommandField 为“Select”时，如何在会话中存储 SelectedRow.Cell[0] 值

> ID：12817510
> 
> 赞同：0
> 
> 时间：2012-10-10T10:45:30.087
> 
> 标签：c#, asp.net, session-state

`SelectedRow.Cell[0]`当 GridView 中的 CommandField 为“选择”时，如何在会话中存储值。? 我将在我的代码中进行哪些更改，以便在我的网格上执行选择命令时（通过单击我的网格的选择链接），它`NatureOfWorkID`将该行的存储在会话变量中。下面是我的代码。请指导我在下面的代码中需要进行哪些更改，以便当有人单击 Select 时，该行的 natureofworkID 将存储在 Session 中，我将根据我的要求从 session 变量绑定另一个网格。

```
 <asp:GridView ID="GVNatureOFWork" runat="server" AllowPaging="true" ShowFooter="true" PageSize="10" AutoGenerateColumns="false"
    DataKeyNames="NatureOfWorkID"
     OnPageIndexChanging="GVNatureOFWork_PageIndexChanging" 
     onrowcancelingedit="GVNatureOFWork_RowCancelingEdit" 
     onrowcommand="GVNatureOFWork_RowCommand" onrowdeleting="GVNatureOFWork_RowDeleting" 
     onrowediting="GVNatureOFWork_RowEditing" onrowupdating="GVNatureOFWork_RowUpdating" 
     OnSelectedIndexChanged="GVNatureOFWork_SelectedIndexChanged" OnRowDataBound="GVNatureOFWork_RowDataBound"
     HeaderStyle-BackColor="BlueViolet" 
     HeaderStyle-ForeColor="White" BackColor="White">
        <Columns>
            <asp:TemplateField HeaderText="NatureOfWorkID">
                <ItemTemplate>
                    <asp:Label ID="lblNautureOfWorkID" runat="server" Text='<%#Eval("NatureOfWorkID") %>' />
                </ItemTemplate>
            </asp:TemplateField>

            <asp:TemplateField HeaderText="Nature of Work Name">
                <ItemTemplate>
                    <asp:Label ID="lblNatureOfWorkName" runat="server" Text='<%#Eval("NatureOfWorkName") %>' />
                </ItemTemplate>
                <EditItemTemplate>
                    <asp:TextBox ID="txtNatureOfWorkName" runat="server" Text='<%#Eval("NatureOfWorkName") %>' />
                </EditItemTemplate>
                <FooterTemplate>
                    <asp:TextBox ID="txtAddNatureOfWorkName" runat="server"  />
                </FooterTemplate>
            </asp:TemplateField>

            <asp:TemplateField HeaderText="Enable/Disable">
                <ItemTemplate>
                    <asp:Label ID="lblNOWStatus" runat="server" Text='<%# (int)Eval("IsNOWEnabled") == 1 ? "Enabled" : "Disabled" %>' />
                </ItemTemplate>
                <EditItemTemplate>
                    <asp:RadioButtonList ID="radiolistStatus" runat="server">
                    <asp:ListItem Text="Enable" Value="1"></asp:ListItem>
                    <asp:ListItem Text="Disable" Value="0"></asp:ListItem>
                    </asp:RadioButtonList>
                </EditItemTemplate>
                <FooterTemplate>
                <asp:RadioButtonList ID="radiolistStatusAdd" runat="server">
                    <asp:ListItem Text="Enable" Value="1"></asp:ListItem>
                    <asp:ListItem Text="Disable" Value="0"></asp:ListItem>
                    </asp:RadioButtonList>
                </FooterTemplate>
                </asp:TemplateField>

            <asp:TemplateField  ShowHeader="False" > 
                <EditItemTemplate> 
                  <asp:LinkButton ID="LinkButton1" runat="server" CausesValidation="True" CommandName="Update" Text="Update"></asp:LinkButton> 
                  <asp:LinkButton ID="LinkButton2" runat="server" CausesValidation="False" CommandName="Cancel" Text="Cancel"></asp:LinkButton> 
                </EditItemTemplate> 
                <FooterTemplate> 
                  <asp:LinkButton ID="LinkButton2" runat="server" CausesValidation="False" CommandName="AddNew" Text="Add New"></asp:LinkButton> 
                </FooterTemplate> 
                <ItemTemplate> 
                  <asp:LinkButton ID="LinkButton1" runat="server" CausesValidation="False" CommandName="Edit" Text="Edit"></asp:LinkButton> 
                </ItemTemplate> 
            </asp:TemplateField> 
            <asp:CommandField HeaderText="Delete" ShowDeleteButton="True"  ShowHeader="True" /> 
            <asp:CommandField ShowSelectButton="True" ItemStyle-CssClass="HiddenColumn" HeaderStyle-CssClass="HiddenColumn"/> 
      </Columns>
  </asp:GridView><br /><br /><br /><br />

<asp:GridView ID="GVRegionProject" runat="server" AllowPaging="true" ShowFooter="true" PageSize="10" AutoGenerateColumns="false"
     OnPageIndexChanging="GVRegionProject_PageIndexChanging" 
     onrowcancelingedit="GVRegionProject_RowCancelingEdit" 
     onrowcommand="GVRegionProject_RowCommand" onrowdeleting="GVRegionProject_RowDeleting" 
     onrowediting="GVRegionProject_RowEditing" onrowupdating="GVRegionProject_RowUpdating" 
     OnSelectedIndexChanged="GVRegionProject_SelectedIndexChanged"
     HeaderStyle-BackColor="BlueViolet" 
     HeaderStyle-ForeColor="White" BackColor="White">
     <Columns>
     <asp:TemplateField HeaderText="Region/Project ID">
                <ItemTemplate>
                    <asp:Label ID="lblRegionProjectID" runat="server" Text='<%#Eval("RegionProjectID") %>' />
                </ItemTemplate>
            </asp:TemplateField>

            <asp:TemplateField HeaderText="Region/Project Name">
                <ItemTemplate>
                    <asp:Label ID="lblRegionProjectName" runat="server" Text='<%#Eval("RegionProjectName") %>' />
                </ItemTemplate>
                <EditItemTemplate>
                    <asp:TextBox ID="txtRegionProjectName" runat="server" Text='<%#Eval("RegionProjectName") %>' />
                </EditItemTemplate>
                <FooterTemplate>
                    <asp:TextBox ID="txtAddRegionProjectName" runat="server"  />
                </FooterTemplate>
            </asp:TemplateField>

            <asp:TemplateField HeaderText="Enable/Disable">
                <ItemTemplate>
                    <asp:Label ID="lblRPStatus" runat="server" Text='<%# (int)Eval("IsRegionProjectEnabled") == 1 ? "Enabled" : "Disabled" %>' />
                </ItemTemplate>
                <EditItemTemplate>
                    <asp:RadioButtonList ID="radiolistStatus" runat="server">
                    <asp:ListItem Text="Enable" Value="1"></asp:ListItem>
                    <asp:ListItem Text="Disable" Value="0"></asp:ListItem>
                    </asp:RadioButtonList>
                </EditItemTemplate>
                <FooterTemplate>
                <asp:RadioButtonList ID="radiolistStatusAdd" runat="server">
                    <asp:ListItem Text="Enable" Value="1"></asp:ListItem>
                    <asp:ListItem Text="Disable" Value="0"></asp:ListItem>
                    </asp:RadioButtonList>
                </FooterTemplate>
                </asp:TemplateField>

            <asp:TemplateField  ShowHeader="False" > 
                <EditItemTemplate> 
                  <asp:LinkButton ID="LinkButton1" runat="server" CausesValidation="True" CommandName="Update" Text="Update"></asp:LinkButton> 
                  <asp:LinkButton ID="LinkButton2" runat="server" CausesValidation="False" CommandName="Cancel" Text="Cancel"></asp:LinkButton> 
                </EditItemTemplate> 
                <FooterTemplate> 
                  <asp:LinkButton ID="LinkButton2" runat="server" CausesValidation="False" CommandName="AddNew" Text="Add New"></asp:LinkButton> 
                </FooterTemplate> 
                <ItemTemplate> 
                  <asp:LinkButton ID="LinkButton1" runat="server" CausesValidation="False" CommandName="Edit" Text="Edit"></asp:LinkButton> 
                </ItemTemplate> 
            </asp:TemplateField> 
            <asp:CommandField HeaderText="Delete" ShowDeleteButton="True"  ShowHeader="True" /> 
            <asp:CommandField HeaderText="County" ShowHeader="false" ShowSelectButton="True"/>

 </Columns>
 </asp:GridView> 
```

后面的代码是：-

```
 private void BindGrid()
    {
        dataTable = new DataTable();
        cmd.Connection = conn;
        cmd.CommandText = "SELECT * FROM natureOfWork";
        ad = new SqlDataAdapter(cmd);
        ad.Fill(dataTable);
        GVNatureOFWork.DataSource = dataTable;
        GVNatureOFWork.DataBind();
    }

    protected void GVNatureOFWork_PageIndexChanging(object sender, GridViewPageEventArgs e)
    {
        GVNatureOFWork.PageIndex = e.NewPageIndex;
        BindGrid();
    }

    protected void GVNatureOFWork_RowCancelingEdit(object sender, GridViewCancelEditEventArgs e)
    {
        GVNatureOFWork.EditIndex = -1;
        BindGrid();

    }

    protected void GVNatureOFWork_RowCommand(object sender, GridViewCommandEventArgs e)
    {
        if (e.CommandName.Equals("AddNew"))
        {

            TextBox txtAddNatureOfWorkName = (TextBox)GVNatureOFWork.FooterRow.FindControl("txtAddNatureOfWorkName");
            RadioButtonList radiolistStatusAdd = (RadioButtonList)GVNatureOFWork.FooterRow.FindControl("radiolistStatusAdd");
            if ((txtAddNatureOfWorkName.Text != "")&&(radiolistStatusAdd.SelectedValue != string.Empty))
             {
                cmd.Connection = conn;
                cmd.CommandText = "INSERT INTO NatureOFWork(NatureOFWorkname, isNOWEnabled ) Values('" + txtAddNatureOfWorkName.Text + "', '" + radiolistStatusAdd.SelectedValue.ToString() + "')";
                conn.Open();
                cmd.ExecuteNonQuery();
            }
            BindGrid();
            conn.Close();
        }

        if (e.CommandName.Equals("Select"))
        {

        }
    }

    protected void GVNatureOFWork_RowDeleting(object sender, GridViewDeleteEventArgs e)
    {
        Label lblNautureOfWorkID = (Label)GVNatureOFWork.Rows[e.RowIndex].FindControl("lblNautureOfWorkID");
        cmd.Connection = conn;
        cmd.CommandText = "DELETE FROM NatureOFWork WHERE NatureOfWorkID='" + lblNautureOfWorkID.Text.ToString() + "'";
        conn.Open();
        cmd.ExecuteNonQuery();
        conn.Close();
        BindGrid();
    }

    protected void GVNatureOFWork_RowEditing(object sender, GridViewEditEventArgs e)
    {
        GVNatureOFWork.EditIndex = e.NewEditIndex;            
        BindGrid();

    }

    protected void GVNatureOFWork_RowUpdating(object sender, GridViewUpdateEventArgs e)
    {

        Label lblNautureOfWorkID = (Label)GVNatureOFWork.Rows[e.RowIndex].FindControl("lblNautureOfWorkID");
        TextBox txtNatureOfWorkName = (TextBox)GVNatureOFWork.Rows[e.RowIndex].FindControl("txtNatureOfWorkName");
        RadioButtonList radiolistStatus = (RadioButtonList)GVNatureOFWork.Rows[e.RowIndex].FindControl("radiolistStatus");
        string isenabled = radiolistStatus.SelectedValue.ToString();
        cmd.Connection = conn;
        cmd.CommandText = "UPDATE NatureOfWork SET NatureOfWorkname ='" + txtNatureOfWorkName.Text + "',IsNowEnabled=" + isenabled.ToString() + "  WHERE NatureOFWorkID=" + lblNautureOfWorkID.Text.ToString();
        conn.Open();
        cmd.ExecuteNonQuery();
        GVNatureOFWork.EditIndex = -1;
        BindGrid();
        conn.Close();
    }

    protected void GVNatureOFWork_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            Label lblNautureOfWorkID = (Label)e.Row.FindControl("lblNautureOfWorkID");
            Label lblNatureOfWorkName = (Label)e.Row.FindControl("lblNatureOfWorkName");
            TextBox txtNatureOfWorkName = (TextBox)e.Row.FindControl("txtNatureOfWorkName");
            TextBox txtAddNatureOfWorkName = (TextBox)e.Row.FindControl("txtAddNatureOfWorkName");
            RadioButtonList radiolistStatusAdd = (RadioButtonList)e.Row.FindControl("radiolistStatusAdd");
            RadioButtonList radiolistStatus = (RadioButtonList)e.Row.FindControl("radiolistStatus");
            Label lblNOWStatus = (Label)e.Row.FindControl("lblNOWStatus");

        }
        if (e.Row.RowType == DataControlRowType.Footer)
        {
        }
    }

    protected void GVNatureOFWork_SelectedIndexChanged(object sender, EventArgs e)
    {
        string natureOfWorkID=GVNatureOFWork.SelectedRow.Cells[0].Text;
        BindRegionProjectInfoGrid();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T07:13:11.990

您的代码已编辑：

```
(e.CommandName.Equals("Select")) 
{ 
 Label lblNautureOfWorkID =    (Label)GVNatureOFWork.SelectedRow.FindControl("lblNautureOfWorkID"); 
if(lblNautureOfWorkID != null)
{
   string natureofworkID =     lblNautureOfWorkID.Text.ToString(); 
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T06:06:26.120

```
 protected void GVNatureOFWork_SelectedIndexChanged(object sender, EventArgs e)
    {
        int index = GVNatureOFWork.SelectedIndex;
        string natureofwrkid = GVNatureOFWork.DataKeys[index].Value.ToString();
        Session["NOWID"] = natureofwrkid;
        lblDisplayNOWID.Text = natureofwrkid;
        BindRegionProjectInfoGrid();

    } 
```

通过添加这些行，现在我可以获得网格中所选行的 Cell[0] 值。感谢每一位指导我获得解决方案的人。

# python - 为什么我的视图总是给出 404 错误？

> ID：12817511
> 
> 赞同：0
> 
> 时间：2012-10-10T10:45:31.327
> 
> 标签：python, django, forms, django-views

我在 Ubuntu 12.04 上使用 Django 1.4 和 Python 2.7。

我之前写过很多观点，但我有点困惑为什么我在这个上得到一个 404 错误。

网址.py：

```
url(r'^addNewClient/', 'gateway_interface.views.add_new_client'), 
```

视图.py

```
def add_new_client(request):
    """
    ..  function:: add_new_client()

        Provide a form for entering new client information

        :param request: Django Request object
    """
    ## Create a logging object
    path = os.path.join(os.path.dirname(__file__), 'logs/')
    filename = '{0}addNewClient.log'.format(path)
    logfile = open(filename, 'a')
    now = datetime.datetime.now()
    logfile.write('\n --------------------- {0}\n'.format(now))

    try:
        form = addClientInfo()
    except:
        output = "Handle Error: Cannot create a valid form"
        logfile.write('{0}\n'.format(output))
        logfile.write('{0}\n\n'.format(traceback.format_exc()))
        logfile.close()
        return HttpResponse(output)

    try:
        data = {}
        data.update(csrf(request))
        data.update({ 'form' : form })
    except:
        output = "Handle Error: Cannot generate CSRF token"
        logfile.write('{0}\n'.format(output))
        logfile.write('{0}\n\n'.format(traceback.format_exc()))
        logfile.close()
        return HttpResponse(output)

    return render_to_response("addNewClientInfo.html", data) 
```

表格.py

```
class addClientInfo(forms.Form):
    """
    ..  class:: addClientInfo

        Create a form to enter new client info
    """
    my_gateway_choices = tuple(gateway_proper_names.items())

    # Create the post fields
    tkz_client_name = forms.CharField(max_length = 50, required = True)
    tkz_gateway = forms.ChoiceField(widget = forms.Select(), choices = my_gateway_choices, required = True)
    tkz_gateway_api_id = forms.CharField(max_length = 50, required = True)
    tkz_gateway_trans_key = forms.CharField(max_length = 50, required = True)
    tkz_ys_api_id = forms.CharField(max_length = 50, required = True)
    tkz_ys_trans_key = forms.CharField(max_length = 50, required = True) 
```

有什么想法吗？

编辑1：

我应该提到我没有在错误日志中收到任何信息。.html 文件与我的所有其他模板一起存在......在同一个地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T11:01:24.390

通常 url 模式必须非常精确。尝试对视图使用以下 url 模式：

```
url(r'^addNewClient/$', 'gateway_interface.views.add_new_client'), 
```

该模式确保只有`addnewClinet/`使用`$`. 否则 url 模式只匹配字符串的开头，而不是整个字符串，所以类似的东西`addNewClient/foo`也会匹配。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-10T11:00:41.370

当我将`DEBUG=True`异常放在抛出的位置时，我能够确定我没有导入我正在尝试使用的表单：`addClientInfo()`.

我很新。困难在于我收到的错误似乎并没有指出这是一个问题。希望其他人可以看到误导性错误可能会导致潜在的问题，而这些问题并不立即显而易见。

最好的，所有！

# ios - 在 Phonegap (Cordova) 中使用凹凸

> ID：12817512
> 
> 赞同：1
> 
> 时间：2012-10-10T10:45:38.797
> 
> 标签：ios, cordova, bump

有没有办法将 Bump SDK 集成到 iOS/Android 的 PhoneGap (Cordova) 中？如果有人对从哪里开始有任何建议，我将不胜感激。我在想我可能已经下载了凹凸 SDK 并创建了一个插件以某种方式与 JS 脚本接口？以前有人做过类似的吗？

干杯，马特。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T13:54:57.920

是的，您需要编写一个插件来集成 Bump。

[http://docs.phonegap.com/en/2.1.0/guide_plugin-development_index.md.html#Plugin%20Development%20Guide](http://docs.phonegap.com/en/2.1.0/guide_plugin-development_index.md.html#Plugin%20Development%20Guide)

# asp.net - 了解代码示例

> ID：12817522
> 
> 赞同：0
> 
> 时间：2012-10-10T10:46:20.390
> 
> 标签：asp.net

我在女巫中找到了一个示例，我不明白 asp.net webforms 中的某些内容。该示例是使用详细信息视图控件制作的。代码如下：

```
<InsertItemTemplate>
    <asp:DropDownList ID=”DropDownList1” runat=”server” 
     DataSourceID=”GenresDataSource“ DataTextField=”Name” DataValueField=”Id” 
     SelectedValue=’&lt;%# Bind(“GenreId”) %>’&gt;
</asp:DropDownList>
</InsertItemTemplate> 
```

在下拉列表中，我了解：

*   DataTextField - 表示下拉菜单中显示的项目的名称
*   DataValueField = 表示选中Item的值
*   SelectedValue - 我认为它代表用户选择的项目，但如果我错了，我不确定是否正确

如果我在顶部所说的是真的，那么在 GenreId 是数据库中的列的情况下，该语句会生成什么：

```
<%# Bind(“GenreId”) %>’ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T11:14:09.293

这会将下拉列表的选定值设置为“GenreId”。所以下拉列表的默认值将是 ID。

# c# - 流阅读器 c# 起飞前导 0

> ID：12817523
> 
> 赞同：1
> 
> 时间：2012-10-10T10:46:21.850
> 
> 标签：c#, asp.net, xml, sql-server-2008, streamreader

我正在使用流阅读器 (ASP.NET C# 4.0) 来读取 XML 文件。但是，当我导入数据以存储在我的 MS SQL 2008 R2 数据库中时，它会从我正在使用的亚马逊商品 ID 中删除前导 0。

例如，amazonitemid 在 XML 文件中存储为 - 00567416803507。但是，当它通过流读取器移动到数据库时，它删除了 2 个 0 的 - 567416803507。如果只有 1 个前导 0，也会发生这种情况。

我四处寻找任何解决方案，但似乎找不到任何有用的东西。有没有人知道解决这个问题的任何方法，甚至为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T10:51:52.357

将 ID 视为字符串，而不是数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T10:53:17.127

您为什么不进入代码以查看它真正被截断的位置。

如果它的应用程序端正确传递了值，我会查看它的数据库端；存储的过程/查询和表列类型。

# php - 使用 PHP Curl 提取结果

> ID：12817527
> 
> 赞同：0
> 
> 时间：2012-10-10T10:46:33.103
> 
> 标签：php, curl

我正在使用 PHP curl 从 URL 获取 Oauth 令牌：

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_HEADER, true);
curl_setopt($ch, CURLOPT_HTTPHEADER, array(
      'Authorization: ' . oauth_headers($consumer_key, $consumer_secret, $token, $token_secret, $verifier)));curl_setopt($ch, CURLOPT_RETURNTRANSFER, true); 
```

[https://www.yammer.com/oauth/request_token](https://www.yammer.com/oauth/request_token)

然后，我通过以下方式得到了回应：

输出

```
-------
HTTP/1.1 200 OK
Server: nginx
Date: Wed, 10 Oct 2012 10:32:47 GMT
.........
.........

oauth_token=6y33AOcKOJVRVRggumfa9Q&oauth_token_secret=usjLakBRQh3Cq4rTWT1aJe9NVo7XKiATYIWvvVovI&oauth_callback_confirmed=true 
```

我如何从结果中提取`oauth_token_secret`和提取`oauth_token`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T10:50:35.743

你应该使用`parse_str()`.

更改`CURLOPT_HEADER`为`false`然后：

```
$result = curl_exec($ch);
$string = parse_str($result);
echo $oauth_token_secret;
echo '<br />--------<br />';
echo $oauth_token; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T10:56:55.273

如果这是您得到的答案，您可能希望在双换行符之后使用 oauth-... 刺痛 ("\n")

那么你可以这样做：

```
parse_str(substr($s, strpos($s, "\n\n"));
echo $oauth_token_secret;
echo $oauth_token; 
```

你也可以试试这个来看看解析了什么：

```
parse_str(substr($s, strpos($s, "\n\n"), $test);
var_dump($test); 
```

# android - Android - 动态创建视图无法解释的上边距

> ID：12817531
> 
> 赞同：1
> 
> 时间：2012-10-10T10:46:42.353
> 
> 标签：android

这个想法是在你最喜欢的俄罗斯方块形状的漂亮的 200x200 小方块中为程序创建 TextViews。然后这些观点转向与他们自己相关的课程。

我面临的问题是： ![](../Images/871fc8128d597fffec296f5e4a646fd4.png)

前两个视图与从无到有的顶部有这个阶梯差异。需要将它们并排对齐。我在调试时检查了它们的边距，它是相同的，以及它们所在的布局，以及下面的代码。

相关代码如下：

```
for (int i = 0; i < 2; i++) {
            TableRow tr = new TableRow(this);
            tr.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT,
                    LayoutParams.WRAP_CONTENT));
            // within each tablerow, we then create the tablecolumns
            // assuming we want two columns only. Change 2 otherwise.
            for (int j = 0; j < 2; j++) {
                try {
                    TextView nyan = new TextView(this);
                    nyan.setText(pail.get(count).getProgramName());
                    nyan.setClickable(true);
                    nyan.setLayoutParams(new LayoutParams(200, 200));
                    nyan.setGravity(Gravity.CENTER);
                    //nyan.setPadding(10, 50, 10, 50);
                    nyan.setBackgroundColor(R.drawable.programlistback);
                    nyan.setSingleLine(false);
                    nyan.setOnClickListener(new View.OnClickListener() {

                        public void onClick(View v) {
                            Intent i = new Intent(v.getContext(),
                                    CourseList.class);
                            i.putExtra("selectedProgram", pail.get(count)
                                    .getProgramID());
                            startActivity(i);
                        }
                    });

                    tr.addView(nyan);
                    // when done with textview creation, update tick for nyan
                    count++;
                } catch (IndexOutOfBoundsException e) {
                    Log.i("expect", "tableOrigin - hit " + count + "th index");
                }
            }
            tabLayout.addView(tr, new LayoutParams(LayoutParams.WRAP_CONTENT,
                    LayoutParams.WRAP_CONTENT));
        } 
```

# c# - 将变量值后面的代码传递给 jQuery 函数

> ID：12817546
> 
> 赞同：5
> 
> 时间：2012-10-10T10:47:24.750
> 
> 标签：c#, javascript, jquery, asp.net

我不是 jQuery 专家，我正在尝试将一些变量值从 C# 传递给我在 keyup 和 onclick 事件上调用的函数。到目前为止，我有这样的事情：

```
$('mydiv').bind('keyup click', function(event) {} 
```

但我需要的是：

```
$('mydiv').bind('keyup click', function(event, UserId, ControlId) {} 
```

，其中 UserId 和 ControlId 是我从查询字符串后面的代码中获取的一些 id。我也在使用 jQuery 1.6.4。

我该怎么做，最好不使用隐藏的输入字段？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T10:54:25.020

使用`on`代替`bind`

> 从 jQuery 1.7 开始，.on() 方法是将事件处理程序附加到文档的首选方法。

使用 razor 将值从服务器传递到客户端（如果您使用的是 asp.net mvc）：

```
$('mydiv').on('keyup click', function(event, @UserId, @ControlId) {} 
```

或者如果它的网络表单：

```
$('mydiv')
    .on('keyup click', function(event, <%= UserId %>, <%= ControllId %>) {} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T10:54:05.537

我会使用数据属性：

```
$('mydiv').data({ userId: <%= UserId %>, ControllId: <%= ControllId %> }) 
```

然后您可以在点击事件中访问这些数据：

```
$('mydiv').on('click', function(event) {
  var userId = $(this).data('userId');
  var ControlId = $(this).data('ControlId');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-22T08:13:45.290

在后面的代码中将变量声明为公共

```
public string userId="abc"; 
```

在客户端访问它

```
var uid='<%=userId %>';
$('mydiv').bind('keyup click', function(event, uid, ControlId) {} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-23T14:05:56.817

js 文件无法直接访问 C# 对象，因此您需要执行以下操作。即使您想在视图文件中编写完整的 jQuery 代码，您仍然可以采用相同的方法。

因此，您可以在传递给 View 的某些模型中传递变量，一旦在模型中拥有这些变量，您就可以执行以下操作：

```
 <script type="text/javascript">
    var myList= @Html.Raw(Json.Encode(@Model.UsersList));      
</script> 
```

所以现在你有了一个 json 对象，任何单独的 js 文件也可以在变量“myList”的帮助下在同一个视图文件中访问它。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-10T11:13:02.243

Javascript 范围不像其他语言中的范围，所以如果你写

```
var UserId = 5; 
var ControlId = 5;

$('mydiv').bind('keyup click', function(event) 
{
  alert( UserId );  
}); 
```

它会起作用的

查看[http://jsfiddle.net/FgYTL/1/](http://jsfiddle.net/FgYTL/1/)

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-10-10T11:19:57.327

我的 mydiv 是类、id 还是 jQuery 变量？看起来你需要做

```
$('div.mydiv') or $('div#mydiv') 
```

# .net - 如何在 DevExpression TreeListColumn 上绑定 ViewModel？

> ID：12817548
> 
> 赞同：0
> 
> 时间：2012-10-10T10:47:31.833
> 
> 标签：.net, wpf, xaml, mvvm, devexpress

我想将 MyCustomers 绑定到 TreeListControl **TreeListColumn FieldName="Id" Binding="How to bind CustomerId"**我该怎么做？

```
<dxg:TreeListControl Name="MyControl" ItemsSource="{Binding Path=MyCustomers}" 
     Height="296" Width="750" Grid.Row="1" Grid.Column="0" HorizontalAlignment="Left">
    <dxg:TreeListControl.Columns>
        <dxg:TreeListColumn FieldName="Id"   Binding="How to Bind CustomerID ?????"    />
        <dxg:TreeListColumn FieldName="CustomerGroup" Binding="How to Bind CustomerGroup ?????" />
    </dxg:TreeListControl.Columns>
    <dxg:TreeListControl.View>
        <dxg:TreeListView AutoWidth="True" KeyFieldName="Id" ParentFieldName="ParentId" NavigationStyle="Row" />
    </dxg:TreeListControl.View>
</dxg:TreeListControl> 
```

视图模型：

```
public class CustomerViewModel : BaseViewModel
{
    public IList<Model.App.Customer> MyCustomers
    {
        get;
        private set;
    }

    public CustomerViewModel()
    {
        CustomerDetail = new CustomerDetail();
        this.MyCustomers = CustomerRespiratory.SelectMyCustomers();
    }
} 
```

模型：

```
public class Customer 
{
  public int CustomerID { get; set;}
  public int CustomerGroup { get; set;}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:22:00.873

您应该只将 CustomerID 指定为 Key Field，将 CustomerGroup 指定为 Parent Field。在[“绑定到自引用数据结构”一](http://help.devexpress.com/#WPF/CustomDocument9571)文中非常清楚地描述了这一点：

```
<dxg:TreeListControl ItemsSource="{Binding Path=MyCustomers}">
    <dxg:TreeListControl.Columns>
        <dxg:TreeListColumn FieldName="CustomerId"/>
        <dxg:TreeListColumn FieldName="CustomerGroup"/>
    </dxg:TreeListControl.Columns>
    <dxg:TreeListControl.View>
        <dxg:TreeListView KeyFieldName="CustomerId" ParentFieldName="CustomerGroup" 
                AutoWidth="True" NavigationStyle="Row" />
    </dxg:TreeListControl.View>
</dxg:TreeListControl> 
```

您可以在[“TreeListView 数据绑定”](http://help.devexpress.com/#WPF/CustomDocument9701)文章中阅读更多内容。

另请参阅：
[DXTreeList 入门 - 第 1 课 - 绑定到数据](http://help.devexpress.com/#WPF/CustomDocument9933)

# c++ - C++：如何运行系统命令 N 次（异步）并返回 N 次执行？

> ID：12817549
> 
> 赞同：1
> 
> 时间：2012-10-10T10:47:31.677
> 
> 标签：c++, c, multithreading

我是 C++ 新手，还没有在 C++ 中使用任何线程。我在使用 Visual Studio 2010 的 Windows 7 上。

我要做的是编写一个主方法，该方法触发给定系统命令的 N 次执行，并且对于每次执行，它都能够获取完成该特定执行所花费的时间。通过获取该命令的返回码来知道命令是成功还是失败，并且作为奖励，虽然最初不是必需的，但返回输出会很好。

现在我知道如何完成大部分操作，但考虑到我需要同时产生 N 次执行，并且每次执行都可能长时间运行，我猜每次执行都需要一个线程，这就是我我不知道该怎么做。

对于 C++ 线程的新手，请您选择一个您想推荐的线程实现和库，并给我一个示例主要方法来说明如何执行上述操作？我随后也会阅读 C++ 线程（如果您对资源有任何指示，请告诉我）。非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T11:23:16.847

这是一个使用C++11中的新[线程功能](http://en.cppreference.com/w/cpp/thread)的小程序：

```
#include <iostream>
#include <thread>
#include <future>
#include <chrono>
#include <vector>

std::chrono::nanoseconds run_program_and_calculate_time()
{
    // TODO: Do your real stuff here
    return std::chrono::nanoseconds(5);
}

int main()
{
    constexpr int N = 5;

    std::vector<std::future<std::chrono::nanoseconds>> results(N);

    // Start the threads
    for (int i = 0; i < N; i++)
    {
        results[i] = std::async(std::launch::async,
                [](){ return run_program_and_calculate_time(); });
    }

    // Wait for all threads to be done results
    for (int i = 0; i < N; i++)
        results[i].wait();

    // Print results
    for (int i = 0; i < N; i++)
    {
        std::cout << "Result from " << i << ": "
                      << results[i].get().count() << " nanoseconds\n";
    }
} 
```

# asp.net - VS 2012 RTM Intellisense 坏了

> ID：12817550
> 
> 赞同：1
> 
> 时间：2012-10-10T10:47:49.250
> 
> 标签：asp.net, visual-studio, visual-studio-2012, intellisense

这似乎是在逐个项目的基础上发生的。目前我正在开发一个 ASP.NET 4.5 Web 应用程序项目。Intellisense 一天很好，但第二天就不行了。我正在使用自定义项目模板，但这应该没有什么区别。我尝试编辑文本编辑器设置，以便检查自动列表成员和参数信息。我尝试重置您的 Visual Studio 设置（工具 --> 导入和导出设置 --> 重置所有设置），我还尝试了此处接受的答案中的解决方案：

[智能感知不工作](https://stackoverflow.com/questions/8518526/intellisense-not-working)

有没有人有任何见解或建议？等待任何答案，我已经提交了一个连接错误报告：[https ://connect.microsoft.com/VisualStudio/feedback/details/766891/intellisense-broken-in-vs-2012-rtm](https://connect.microsoft.com/VisualStudio/feedback/details/766891/intellisense-broken-in-vs-2012-rtm)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T15:01:25.160

您可以使用 Ctrl + Shift + R 刷新 Intellisense 缓存（在标准快捷键上）

我在 VS2010 上遇到了同样的问题，并修复了[如何在 Visual Studio 2010 中打开 IntelliSense 中描述的另一种方法？](https://stackoverflow.com/questions/8902232/how-to-turn-intellisense-on-in-visual-studio-2010)

从链接：

1.  删除该文件夹中的文件：`%AppData%\Roaming\Microsoft\VisualStudio\10.0\ReflectedSchemas`（VS2012的10.0文件夹可能是不同的编号）

2.  如果没有其他方法，您可以在 Visual Studio 命令提示符（在您的“开始”菜单中）中键入它，然后按 Enter：`devenv /resetuserdata`

最后一个选项[记录在 MSDN 上](http://msdn.microsoft.com/en-us/library/bb245788%28v=vs.80%29.aspx#vs05idetips_topic6)，并附有以下免责声明：

> 免责声明：如果您使用此开关，您将丢失所有环境设置和自定义。正是由于这个原因，这个开关没有得到官方的支持，微软也没有向公众宣传这个开关（如果你在命令提示符下输入 devenv.exe /? 你不会看到这个开关）。如果您遇到环境问题，您应该只将此开关用作最后的手段，并确保在使用此开关之前通过导出它们来备份您的环境设置。

# php - PHP Unicode 文件名

> ID：12817551
> 
> 赞同：3
> 
> 时间：2012-10-10T10:47:56.537
> 
> 标签：php, .htaccess, unicode, filenames

PHP 无法处理带有 Unicode 字符的文件：当我在浏览器上访问**testSite/главная.php**时，它会抛出此错误。

> 警告：未知：无法打开流：第 0 行的未知中没有此类文件或目录
> 
> 致命错误：未知：在第 0 行的未知中需要打开失败

但是**testSite/главная.html**很好。

无论如何我可以解决这个问题，还是我必须使用更好地处理 Unicode 的不同编程语言？

[具有 unicode 名称的文件夹中的 Apache htdocs](https://stackoverflow.com/questions/2856270/apache-htdocs-in-folder-with-unicode-name)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T11:01:01.237

打开一个带有unicode文件名的php文件**不是**一件`php`事情，而是取决于底层操作系统。只要操作系统支持 unicode 文件名，它就可以工作。

在我的 debian 挤压上，这根本不是问题，Windows 7（运行 netbeans 的地方）创建一个名为的文件`главная.php`没有问题：

```
include 'главная.php'; 
```

![在此处输入图像描述](../Images/1553326b9b78c37dc86f8f0ff5b4dda3.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T11:11:04.923

在我看来，您的网络服务器对 URI 使用 win-1252 编码。尝试在您的 apache/nginx/whatever 配置中设置 utf-8。如果 unicode 名称仅在 require()/include() 上下文中使用，您还可以使用 iconv()/mb_convert_encoding() 转换编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T11:34:23.520

也许它有效：

```
mb_internal_encoding('UTF-8');
ini_set('default_charset', 'UTF-8'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-28T23:01:57.820

这不可能。

这是解释原因的线程

[PHP 文件名（或其完整路径中的目录）可以包含 UTF-8 字符吗？](https://stackoverflow.com/questions/708017/can-a-php-file-name-or-a-dir-in-its-full-path-have-utf-8-characters/16941794#16941794)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-22T12:02:23.233

在 PHP5 中使用“wfio://”

[https://github.com/kenjiuno/php-wfio](https://github.com/kenjiuno/php-wfio)

对于文件夹访问使用修复：

.ht 访问：

`php_value auto_prepend_file C:/fix.php`

修复.php：

```
$file = $_SERVER['SCRIPT_FILENAME'];
if (!is_readable($file)) {
    $file="wfio://".$file;
                include $file;
                exit;
        } 
```

# c++ - 变量初始化无法使用逗号运算符编译

> ID：12817553
> 
> 赞同：1
> 
> 时间：2012-10-10T10:48:05.287
> 
> 标签：c++, variable-initialization

为什么以下代码中指示的行（在 main() 中）无法编译？

```
#include <iostream>
#include <string>
#include <map>

template< typename _T > struct Inventory : public std::map< _T, int >
{
    bool getat(int i, _T &t, int &n)
    {
        if ((i < 0) || (i >= (int)this->size())) return false;
        int c=0;
        typename std::map< _T, int >::iterator it = this->begin();

        while ((c < i) && (it != this->end())) { c++; it++; }
        t = (*it).first;
        n = (*it).second;
        return true;
    }
    Inventory &operator=(_T t) { (*this)[t]++; return *this; }
    Inventory &operator,(_T t) { return operator=(t); }
};

int main()
{
    int i=0, quantity;
    std::string item;

    //***Fails to compile:***
    //Inventory< std::string > inv = "a","b","c","a","c","d","e";  

    Inventory< std::string > inv;
    inv = "a","b","c","a","c","d","e";    //but this is fine
    inv = "e","f";

    while (i < (int)inv.size())
    {
        if (inv.getat(i, item, quantity)) 
                std::cout << i << ": " << item << " -> " << quantity << "\n";
        i++;
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T10:49:35.583

这称为复制初始化。简而言之，它使用转换构造函数，然后使用复制构造函数来构造`inv`，而不是`operator =`您期望的那样。

```
Inventory< std::string > inv = "a","b","c","a","c","d","e"; 
```

是无效的语法。类似的东西`Inventory< std::string > inv = "a"`会首先尝试创建一个临时`Inventory`from`"a","b","c","a","c","d","e"`然后使用该临时作为复制构造函数的参数来构造`inv`. `operator =`在这种情况下永远不会调用。

您的第二个版本有效，因为

```
Inventory< std::string > inv; 
```

调用默认构造函数，并且

```
inv = "a","b","c","a","c","d","e"; 
```

调用`operator =`已经初始化的对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T11:28:09.107

你的问题是，在一种情况下，逗号是标点符号（并且运算符重载不适用），而在另一种情况下，它是一个运算符。不起作用的定义基本上相当于：

```
Inventory<std::string> inv = "a";
Inventory<std::string> "b";
Inventory<std::string> "c";
//  ... 
```

正因为如此，重载`operator,`总是不好的设计；当逗号是运算符时，当它不是时，太微妙了。

做这样的事情的通常方法是创建一个相关的类来收集参数，并将其传递给构造函数：

```
Inventory<std::string> inv = Collector().add("a").add("b")...; 
```

您还可以重载运算符并使用它，而不是 function `add`。但是我看不到可能的运算符 ( `<<`，受`ostream`?) 启发，或者您可以重载构造函数和`operator()`of `Collector`，然后编写：

```
Inventory<std::string> inv = Collector("a")("b")...; 
```

然后，您将使用相同的语法进行赋值。（您真的不想要适用于分配的东西，而不是适用于复制构造的东西。）

# c# - 选择始终将程序集生成为本机映像

> ID：12817557
> 
> 赞同：2
> 
> 时间：2012-10-10T10:48:24.377
> 
> 标签：c#, visual-studio-2010, visual-studio

我的项目中几乎没有组件（C# 和托管 C++ 程序集和应用程序）。我想在构建项目后始终将程序集生成为本机映像。是否有任何项目设置可以在没有 NGen 帮助的情况下自动执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T12:14:25.200

这将毫无用处，因为 NGen 结果仅在您的机器上可用。如果这是要部署到其他机器的产品，您应该在安装后阶段在安装程序中调用 NGen，

[http://msdn.microsoft.com/library/6t9t5wcf(v=vs.80).aspx](http://msdn.microsoft.com/library/6t9t5wcf(v=vs.80).aspx)

# .net - vb.net 显示没有时间的日期字段

> ID：12817558
> 
> 赞同：1
> 
> 时间：2012-10-10T10:48:26.473
> 
> 标签：.net, vb.net

我是 vb.net 的新手，所以如果我问一个明显的问题，请提前道歉。

我在页面加载中声明了以下代码，它在标签中显示今天的日期，但它显示的是日期和时间。

它最初说 DateTime 但我将它更改为 Date 希望这会起作用，但它也继续显示时间。

我现在使用左运算符将其缩减为 10 个字符，但是我想知道如果 id 只想要日期而不是时间而不需要修剪结果，我应该怎么做。

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

    Dim dtNow As Date = Date.Now
    time_stamp_entryLabel1.Text = Left(dtNow.ToString, 10)
End Sub 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T10:51:48.640

**代码**

```
Dim d As DateTime = Now
d.ToLongDateString
d.ToShortDateString
d.ToString("d")
d.ToString("yyyy-MM-dd") 
```

**结果**

```
Wednesday, December 10, 2008
12/10/2008
12/10/2008
2008-12-10 
```

**[进一步参考](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-02T16:01:12.963

这是在 aspx 中的操作方法

```
<asp:Label ID="DateLabel" runat="server" Text='<%# String.Format(Date.ParseExact("09/09/1955", "d", New System.Globalization.CultureInfo("en-US"))) %>' /> 
```

# php - 如何使 Doctrine 查找像 Doctrine_table->find, ->findby* 使用查询/结果缓存（doctrine 1.2）

> ID：12817559
> 
> 赞同：0
> 
> 时间：2012-10-10T10:48:28.757
> 
> 标签：php, doctrine, doctrine-1.2

我第一次通过应用以下代码在学说 1.24 中设置了结果缓存：

```
$servers = array(
  'host'       => 'localhost',
  'port'       => 11211,
  'persistent' => true
);
$cacheDriver = new Doctrine_Cache_Memcache(
  array(
    'servers' => $servers,
    'compression' => false
  )
);
$manager->setAttribute(Doctrine::ATTR_RESULT_CACHE,$cacheDriver);
$manager->setAttribute(Doctrine::ATTR_RESULT_CACHE_LIFESPAN, 3600 ); 
```

这非常适合缓存 DQL 查询，例如：

```
enter code here$q = Doctrine_Query::create()
    ->from('Software s')
    ->leftJoin('s.Files f')
    ->useResultCache();
$q->execute(); 
```

但是，我感兴趣的是如何缓存表查找，例如：

```
xyzTable::getInstance()->findOneBySufff($stuff); 
```

这些在我的应用程序代码中更为频繁。我如何实现这一目标？此外，如果有人有关于在学说 1.2 中使用 memcache 的指南，我会更高兴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T18:58:16.763

您必须实施

```
xyzTable::getInstance()->findOneBySufff($stuff); 
```

您自己的 xyzTable 类中的函数。

```
class xyzTable extends Doctrine_Table 
{
     public function findOneByStuff($stuff) {
         return $this->createQuery('x')
              ->select('x.*')
              ->where('x.stuff = ?', $stuff)
              ->useResultCache()
              ->fetchOne();

     }
} 
```

确保在“doctrine-cli”脚本中启用表创建

```
 ....
 $doctrine_config['generate_models_options'] = 
    array('generateTableClasses' => true);

 $cli = new Doctrine_Cli($doctrine_config);
 .... 
```

# sql - 为什么 oracle 说缺少右括号

> ID：12817561
> 
> 赞同：2
> 
> 时间：2012-10-10T10:48:39.920
> 
> 标签：sql, oracle

在以下查询中，我试图将十进制标记更改为`comma`

```
SELECT to_number('12.5678', '99D9999', NLS_NUMERIC_CHARACTERS =', ')  FROM dual; 
```

当我在 sqlDeveloper 中执行此查询时，oracle 说缺少右括号。请注意，我有语言环境（DE，Gemany）。

可能是什么原因？

感谢您的任何建议

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T10:51:21.940

在 SQL 中——与 PL/SQL 不同——第三个参数是一个字符串：

```
SELECT to_number('12.5678', '99D9999', 'NLS_NUMERIC_CHARACTERS ='', ''')
FROM dual; 
```

另请参阅：
[http ://docs.oracle.com/cd/B19306_01/server.102/b14200/functions191.htm](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions191.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T10:55:56.523

`NLS_NUMERIC_CHARACTERS =', '`应该作为 varchar 传递

```
select TO_NUMBER('$94 567,00', 'L999G999D00', 'NLS_NUMERIC_CHARACTERS ='', ''') FROM dual; 
```

[http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions211.htm#SQLRF06140](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions211.htm#SQLRF06140)

# android - 默认返回按钮 新创建的按钮上需要操作以及对携带 Bundle 的怀疑

> ID：12817566
> 
> 赞同：0
> 
> 时间：2012-10-10T10:49:01.190
> 
> 标签：android, android-intent

在我的应用程序中，我有 3 个活动 A、B、C 我可以从 A-->B-->C 进行这样的操作，我想将数据从 A 传输到 B，将 A 的数据和 B 的数据传输到 C 并将数据保存到来自活动 C 的数据库。

我的问题是

--> 我在 B 中创建了一个后退按钮，单击它将转到活动 A。我正在使用

> 意图 goReceive1 = new Intent(Receive2.this,Receive1.class); 开始活动（goReceive1）；

但它正在清除以前在 A 中的活动中输入的数据。我希望这些数据在返回时存在。我怎样才能做到这一点？...

--> 我还有一个疑问是我正在使用 Bundle 将数据从 A 传送到 B，但我没有使用 B 中的这些数据，我需要 C 中来自 A 和 B 的那些数据，以便我可以将整个数据保存到 DB来自 C.

请任何人帮我解决这个问题......在此先感谢......

* * *

我可以从 B-->A 使用 myActivity.onBackPressed(); 和以前的数据我可以在那里看到......

但是在从B返回之前---> A我在B中输入了一些数据。我再次从A-> B中返回然后B中的数据被清除了我不想丢失我输入的任何数据，直到我按下保存按钮来自活动 C。

有什么方法可以实现吗？...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T10:52:31.230

调用意图回到你以前的活动是完全错误的。你不应该这样做。

相反，在您在 Activity B 中创建的后退按钮中，只需调用此方法，

```
onBackPressed(); 
```

这是在您的设备中按下专用后退按钮时执行的默认方法。

而且，如果您需要通过意图传递数据，则无法绕过活动。您必须将其传递给下一个活动，然后再传递给下一个活动。您不能直接从 A 传递到 C。

但也许您可以使用 Application 类并从 Activity A 中保存数据并在 Activity C 中检索它。

**编辑**

扩展一个 Application 类并将所有数据保存在那里，然后在 C 中使用它。您必须学习如何使用 Application 类。这里的主要思想是存储在 Application 类中的数据在应用程序的运行时中是持久的。它不会被清除。或者您甚至可以选择共享偏好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T12:21:59.633

好的，这是您问题的解决方案。

您不想丢失任何数据并在所有活动中共享所有数据。因此，最好的方法是扩展`Application`类并将所有数据保存在**应用程序**中，您可以在应用程序的任何活动和服务中访问应用程序中的数据。因此，您可以将其用作活动之间进行交流的媒介。

要了解有关应用程序实例的更多信息，请查看此链接

[http://developer.android.com/reference/android/app/Application.html](http://developer.android.com/reference/android/app/Application.html)

这是一个很好的例子[http://www.helloandroid.com/tutorials/maintaining-global-application-state](http://www.helloandroid.com/tutorials/maintaining-global-application-state)

# ruby-on-rails - 将查询字符串附加到所有 Rails 路线

> ID：12817572
> 
> 赞同：1
> 
> 时间：2012-10-10T10:49:24.897
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routing

我遇到了一个 safari 6 问题，它会阻止第三方 iframe cookie，除非用户访问了 iframe 之外的域。唯一的修复似乎是这个：[Safari 3rd party cookie iframe trick no longer working?](https://stackoverflow.com/questions/9930671/safari-3rd-party-cookie-iframe-trick-no-longer-working)

但这涉及一些丑陋的解决方法（弹出打开一个新的浏览器窗口并再次关闭）。我想采用的首选解决方案是加密会话 ID，并将其作为查询参数附加到所有路由。然后，我可以使用 before 过滤器通过解密 id 并从会话存储中加载它来检索会话。

所以我不知道是否有一种方法可以将查询参数附加到所有路由而无需直接编辑每个链接？即通过在我的路由文件中添加一些东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T12:11:37.543

覆盖默认的 url 选项。

您可以在以下位置为您的整个应用程序这样做`application_controller`：

```
def default_url_options(options = {})
  options.merge({ :session_id => request.session_options[:id] })
end 
```

# clearcase - 为什么不能从 RTC 的流中创建新基线？

> ID：12817575
> 
> 赞同：1
> 
> 时间：2012-10-10T10:49:28.333
> 
> 标签：clearcase, rtc

如果我右键单击存储库工作区中的组件，我可以选择在此组件上创建新基线。

但是，如果我右键单击流中的组件，则创建新基线的选项不可用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T11:02:51.113

必须始终针对 repo 工作区创建基线，因为它必须*交付*给流，并被在各自的 repo 工作区中处理同一流的其他协作者接受。

这与快照不同，您可以在流上创建快照，它允许用户和 RTC 中的构建管理器对交付的代码进行“快照”。

所以快照和基线的区别在于：

*   基线必须在流上交付（即不直接创建）
*   快照用于标记已交付的内容（例如，用它初始化一个新流）：没有用户会在其 repo 工作区中接受快照。

[该线程](https://jazz.net/forum/questions/65489/baseline-snapshot-and-build-process)具有指导意义：

> 如果您要将更改流向开发人员，或将更改流向构建，那么您应该通过将这些更改交付给流来实现，而不是通过创建快照来实现。
> 然后，开发人员（或构建）将只接受来自该流的更改。

（这就是基线的来源：对于每个组件，它们允许流动一组冻结的更改）

> 快照的目的是记录历史中的一个点，以便您可以“跳转到它”（例如，重现旧配置），而不是作为流动更改的机制。

这与 ClearCase UCM 不同，因为“流”既用于公共协作空间（如“集成”流），也用于用户工作区（如“开发流”）。
基线既是为了记录历史点，也是为了流动变化（通过交付/重新设置基准）。
RTC 引入了 2 个独立的环境：

*   一个全球性的团队协作给定的开发工作：流（及其快照）
*   一个用户，每个用户管理他/她的更改：存储库工作区一个（每个组件都有其基线）

# android - 传递自定义对象或只是 id

> ID：12817577
> 
> 赞同：1
> 
> 时间：2012-10-10T10:49:34.663
> 
> 标签：android, database, performance, memory

我有一个 sqllite 数据库，我在其中存储一些带有图片的数据。

在我的 MainActivity 中，我将此数据加载到 List<CustomObject> 并使用带有 ListView 的 ArrayAdapter 来显示此信息。在单击项目时，我将项目 ID 传递给 DetailActivity，然后我再次从 sqllite 数据库请求项目数据以显示它。

我很担心，因为我不知道 android 上最好的方法是什么。

我应该在 MainActivity 中使用更少的信息（只有 id、标题和图片）并将 ID 传递给 DetailActivity 还是应该通过我的 DetailActivity 传递完整的 CustomObject（这样我就不必再次访问数据库）

我想要内存使用和性能的正确组合。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T13:05:47.857

至于显示数据，我可以建议使用[SimpleCursorAdapter](http://developer.android.com/reference/android/widget/SimpleCursorAdapter.html)吗？就数据效率而言，如果您已经为您的 listView 创建了自定义对象，您也可以传递它，您不仅应该在单击项目的延迟可能会导致数据不一致的情况下，在这种情况下您应该进行另一个查询以确保用户总是看到最新的数据。此外，如果您一心追求效率，您不应该再次下载数据，而只在必要时更新/删除数据，这样可以确保您的用户不必等待太长时间才能执行另一项任务，并使您的程序更有效率

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T12:58:50.613

我认为你正在使用一个全局列表假设你有 2 个活动 listactivity 显示你的列表视图和 detailactivity 显示细节现在你创建另一个名为 mBaseActivity 的活动这里是你的全局列表。

现在 listactivity 和 detailactivity 都由 mBSeActivity 继承。

在列表活动中，您可以填写全局列表并使用位置单击项目，您可以在此处详细活动，您再次使用此全局列表并获取其数据并显示它。

# c++ - 保留一个潜在的文件句柄

> ID：12817582
> 
> 赞同：0
> 
> 时间：2012-10-10T10:49:54.250
> 
> 标签：c++, windows, file-io, ofstream

我正在用 C++ 编写一个时间关键型应用程序，我将数据写入日志，该日志在 Web 浏览器中不断显示和更新（我无法更改这一点，请不要推荐使用其他解决方案）。

目前，我每 100 毫秒执行一次这样的操作来转储数据（每次转储都必须重写**整个文件）：**

```
ofstream log_file(log_path);
//Do some error handling
log_file << "Quite some data" << endl;
log_file.close(); 
```

问题是程序每隔几次调用就需要大约 20 毫秒来打开日志，这似乎会在某些系统上导致大量硬盘使用（我怀疑硬盘在每次重新打开过程中都会再次寻找文件）。

有没有办法让文件句柄一直保持打开状态，以便系统希望保留一些指向文件的指针，以最大限度地减少延迟和硬盘使用？如果需要，我也很乐意切换到不同的 Write-API。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T10:57:55.913

您可以将日志文件保存在内存文件系统中，例如`/dev/shm`. 这将避免访问磁盘，除非日志文件太大而无法放在那里。

# modx-revolution - MODX - getresource TV - 以电子邮件形式提交

> ID：12817583
> 
> 赞同：0
> 
> 时间：2012-10-10T10:49:57.190
> 
> 标签：modx-revolution, formit

想知道 MODx 或自定义片段中是否存在可以让我执行以下操作的内容：

我正在使用 getresources 来提取我的资源列表，包括附加到每个资源的一些电视。

我希望能够为每个资源添加一个按钮，按下该按钮后，一封电子邮件将发送到登录用户的电子邮件地址，其中包含一些资源电视。

任何想法提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T13:43:08.797

你有几个选择，

*   在 rtfm.modx.com 中查找 modMail，您可以使用它制作电子邮件

或者，可能更容易；

*   使用表单电子邮件钩子和一组隐藏的表单字段来提交/发送表单数据到电子邮件。

参考文档 [或 Bob 的指南] 以获取用户的信息 [电子邮件]

# jquery - Firefox 扩展内容脚本拒绝加载

> ID：12817586
> 
> 赞同：0
> 
> 时间：2012-10-10T10:50:11.817
> 
> 标签：jquery, firefox-addon, firefox-addon-sdk

我成功地将我的greasemonkey 用户脚本转换为chrome 扩展，没有任何问题。但是最近两天我在尝试将其转换为 Firefox 扩展时也遇到了问题！我从这里尝试了几个示例，并使用 Request/page-mod/ajax 尝试了 firefox builder 网站，但没有任何效果。我现在正在尝试这个：

## 主.js：

```
var data = require("self").data;
var tabs = require("tabs");
var Request = require("request").Request;
var pm = require("page-mod").PageMod({
    include: "http://www.example.com/player/*",
    contentScriptFile: [data.url("jquery.js"), data.url("player.js")],
    var replacediv = jQuery("div#box").eq(0).find('td').eq(3); // this is the div where i need to place the info from the "fetchedwebsite.com"
    onAttach: function(worker) {
        Request({
            url: "http://www.fetchedwebsite.com/players/item/4556834",
            onComplete: function (response) {
                worker.port.emit('got-request', response.text);
            }
        }).get();
    }
}); 
```

## 播放器.js：

```
self.port.on('got-request', function(data) {
  var columns = $('div.columns',data); // Here i want to keep only the div i want from the "fetchedwebsite.com"
  columns.appendTo(replacediv); // And afaik this is to replace the divs
}); 
```

有什么误解请见谅！我是所有这些 jquery/javascript/firefox-addon 的新手：P 有人可以帮助我或指出正确的方向吗？对不起我的英语不好，提前非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T10:59:14.830

以下行不属于`main.js`：

```
var replacediv = jQuery("div#box").eq(0).find('td').eq(3); 
```

这应该会导致语法错误，因为您已将其放在对象文字的中间 - 如果您打开错误控制台 (Ctrl-Shift-J)，您应该会看到该语法错误。如果您删除该行（或将其移至内容脚本的开头？）您的代码应该可以正常工作。

# visual-c++ - 包括 或者 上升编译错误

> ID：12817591
> 
> 赞同：1
> 
> 时间：2012-10-10T10:50:27.423
> 
> 标签：visual-c++

拥有构建良好的简单控制台应用程序：

```
#include "stdafx.h"
int _tmain(int argc, _TCHAR* argv[])
{
    return 0;
} 
```

`#include <cstring>`如果我添加行（或（和）`#include <string>`），它也会构建得很好

```
#include <cstring>
#include "stdafx.h"

int _tmain(int argc, _TCHAR* argv[])
{
    return 0;
} 
```

如果我`gc.c`只添加一个包含行的文件，`#include <cstring>`（或（和）`#include <string>`），编译器会产生很多错误：

```
Error   2   error C2061: syntax error : identifier 'using'  C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\cstring  18  1   cstringerr
Error   43  error C2061: syntax error : identifier 'strxfrm'    C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\cstring  26  1   cstringerr
Error   41  error C2061: syntax error : identifier 'strtok' C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\cstring  26  1   cstringerr
Error   39  error C2061: syntax error : identifier 'strstr' C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\cstring  25  1   cstringerr
Error   37  error C2061: syntax error : identifier 'strspn' C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\cstring  25  1   cstringerr
Error   35  error C2061: syntax error : identifier 'strrchr'    C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\cstring  25  1   cstringerr
Error   33  error C2061: syntax error : identifier 'strpbrk'    C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\cstring  24  1   cstringerr
Error   31  error C2061: syntax error : identifier 'strncpy'    C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\cstring  24  1   cstringerr
Error   29  error C2061: syntax error : identifier 'strncmp'    C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\cstring  24  1   cstringerr
Error   27  error C2061: syntax error : identifier 'strncat'    C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\cstring  23  1   cstringerr
Error   25  error C2061: syntax error : identifier 'strlen' C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\cstring  23  1   cstringerr
Error   23  error C2061: syntax error : identifier 'strerror'   C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\cstring  23  1   cstringerr
Error   21  error C2061: syntax error : identifier 'strcspn'    C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\cstring  22  1   cstringerr
Error   19  error C2061: syntax error : identifier 'strcpy' C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\cstring  22  1   cstringerr
Error   17  error C2061: syntax error : identifier 'strcoll'    C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\cstring  22  1   cstringerr
Error   15  error C2061: syntax error : identifier 'strcmp' C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\cstring  21  1   cstringerr
Error   13  error C2061: syntax error : identifier 'strchr' C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\cstring  21  1   cstringerr
Error   11  error C2061: syntax error : identifier 'strcat' C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\cstring  21  1   cstringerr
Error   9   error C2061: syntax error : identifier 'memset' C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\cstring  20  1   cstringerr
Error   7   error C2061: syntax error : identifier 'memmove'    C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\cstring  20  1   cstringerr
Error   5   error C2061: syntax error : identifier 'memcpy' C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\cstring  20  1   cstringerr
Error   3   error C2061: syntax error : identifier 'memcmp' C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\cstring  18  1   cstringerr
Error   4   error C2059: syntax error : ';' C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\cstring  18  1   cstringerr
Error   6   error C2059: syntax error : ';' C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\cstring  20  1   cstringerr
Error   8   error C2059: syntax error : ';' C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\cstring  20  1   cstringerr
Error   10  error C2059: syntax error : ';' C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\cstring  20  1   cstringerr
Error   12  error C2059: syntax error : ';' C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\cstring  21  1   cstringerr
Error   14  error C2059: syntax error : ';' C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\cstring  21  1   cstringerr
Error   16  error C2059: syntax error : ';' C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\cstring  21  1   cstringerr
Error   18  error C2059: syntax error : ';' C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\cstring  22  1   cstringerr
Error   20  error C2059: syntax error : ';' C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\cstring  22  1   cstringerr
Error   22  error C2059: syntax error : ';' C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\cstring  22  1   cstringerr
Error   24  error C2059: syntax error : ';' C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\cstring  23  1   cstringerr
Error   26  error C2059: syntax error : ';' C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\cstring  23  1   cstringerr
Error   28  error C2059: syntax error : ';' C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\cstring  23  1   cstringerr
Error   30  error C2059: syntax error : ';' C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\cstring  24  1   cstringerr
Error   32  error C2059: syntax error : ';' C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\cstring  24  1   cstringerr
Error   34  error C2059: syntax error : ';' C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\cstring  24  1   cstringerr
Error   36  error C2059: syntax error : ';' C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\cstring  25  1   cstringerr
Error   38  error C2059: syntax error : ';' C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\cstring  25  1   cstringerr
Error   40  error C2059: syntax error : ';' C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\cstring  25  1   cstringerr
Error   42  error C2059: syntax error : ';' C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\cstring  26  1   cstringerr
Error   44  error C2059: syntax error : ';' C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\cstring  26  1   cstringerr
Error   1   error C2054: expected '(' to follow 'using' C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\cstring  18  1   cstringerr 
```

看起来编译器不理解包含中存在的任何内容。

包含`<cstring>`或`<string>`附加 cpp 文件有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T11:03:16.903

前往物业

> 属性 > C/C++ > 高级 > 编译为并选中编译为 C++ 代码(/TP)

并且总是习惯于包含这样的文件

```
#include "stdafx.h"    //Always include it first then other files.
#include <cstring> 
```

# php - Restler 3 - 参数的默认值阻止了传递参数的能力

> ID：12817594
> 
> 赞同：2
> 
> 时间：2012-10-10T10:50:38.753
> 
> 标签：php, restler

我有一个非常简单的类，它源自 Restler 网站上给出的示例“Say”类​​。如下：

```
 <?php
class Say {
  function hello($to='world') {
    return "Hello $to!";
  }
  function hi($to) {
    return  "Hi $to!";
  }

  function nothing($to='the ground') {
    return "Looks at {$to} quietly but without saying a word.";
  }
} 
```

因为“hi”函数没有 $to 变量的默认值，所以它在很大程度上可以正常工作：

```
http://localhost/api/say/hi/Jack 
```

返回

> 嗨杰克！

伟大的。问题是当你有一个像“hello”或“nothing”函数这样的默认值时，你似乎不能再传入参数了：

```
http://localhost/api/say/hello          -- WORKS, returns "Hello world!"
http://localhost/api/say/hello/Jack     -- FAILS, returns a JSON error of 404 
```

任何帮助将不胜感激。

在旁注中，我还注意到，如果您不使用带有“hi”的参数（这需要将 $ 设置为某个值），它也会返回 404 错误。我不确定这是否是预期的行为，但这种错误似乎是错误的错误消息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T01:54:27.990

Restler 2 的工作方式与您预期的完全一样，对于上述 hello 方法，它会生成以下路由

```
GET say/hello      ⇠ Say::hello()
GET say/hello/{to} ⇠ Say::hello() 
```

但是 Restler 3 只走一条路线

```
GET say/hello   ⇠ Say::hello() 
```

发生这种情况是因为智能路由，我们没有将可选参数映射到 url，因此可选参数可以作为查询字符串传递

在 hi 方法的情况下，Restler 2 将其路由为

```
GET say/hi      ⇠ Say::hi()
GET say/hi/{to} ⇠ Say::hi() 
```

作为 Restler 3

```
GET say/hi/{to} ⇠ Say::hi() 
```

因此`say/hi`由于缺少所需的参数而失败

这样做的原因是为了避免歧义。此处在[路由示例中进行了说明](http://restler3.phpfogapp.com/examples/_006_routing/readme.html)

如果您希望 Restler 3 中所有 API 的 Restler 2 行为，请将以下内容添加到 index.php

```
Defaults::$smartAutoRouting = false; 
```

如果您只想在方法级别或类级别关闭智能自动路由，请添加以下 php doc 注释

```
@smart-auto-routing false 
```

# tfs - 仅查询在 Team Foundation 服务器中分配给我的工作项

> ID：12817597
> 
> 赞同：5
> 
> 时间：2012-10-10T10:50:45.940
> 
> 标签：tfs, workitem

我们在 TFS 2010 的 3 个项目集合中有项目。

目前，当用户运行工作项查询时，该用户可以查看他们有权访问的项目中的所有工作项。如何限制这一点，以便用户只能查看`[Assigned To]`为其设置字段的工作项？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T13:18:07.053

您可以通过在团队资源管理器中单击鼠标右键来创建新查询。“我的工作项目”是一个流行的查询，可能已经为您创建了。尝试编辑一些现有查询以了解如何构建它们。这是我在 VS 2012 中的外观 - 如果您使用的是 2010，UI 会有所不同，但语法不会：

![在此处输入图像描述](../Images/e3083205341a59c83e0fb84770b91d58.png)

# oracle - 更改表修改列与乘值查询

> ID：12817599
> 
> 赞同：1
> 
> 时间：2012-10-10T10:50:48.843
> 
> 标签：oracle, alter

我的应用程序与一个表有 100 万条记录的 Oracle 数据库进行交互。问题是：

在该表中，我们有一列用于数字整数类型。我们想要存储浮点值（2 位）。我们可以通过乘以 100（来自应用程序）并将它们存储在该列中或修改列数据类型来做到这一点。问题是：

什么需要更少的时间？alter table modify 列或查询（update table set column = 100*val）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T12:00:26.810

Oracle 中的 A`NUMBER`没有内在的“格式”，即它的内部表示不依赖于它的精度或规模。例如，如果将`NUMBER`123456 声明为 a`NUMBER(9,2)`或，则其内部表示方式相同`INTEGER`：

```
SQL> SELECT dump(CAST(123456 AS INTEGER)) int,
  2         dump(CAST(123456 AS NUMBER(9,2))) num
  3    FROM dual;

INT                       NUM
------------------------- --------------------
Typ=2 Len=4: 195,13,35,57 Typ=2 Len=4: 195,13,35,57 
```

`INTEGER(7)`an和 a之间的列中唯一的区别`NUMBER(9,2)`是`INTEGER(7)`具有更强的检查约束。两列将以完全相同的方式在内部表示数据。

这就是为什么您可以毫无问题地**提高**`ALTER TABLE`非空列的列的精度，并且只会修改元数据（字典表），因此应该是即时的，几乎不需要重做。

```
SQL> create table test (id number(7));

Table created.

SQL> insert into test values (123456);

1 row created.

SQL> alter table test modify (id number(9,2));

Table altered.

SQL> select * from test;

        ID
----------
    123456 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T11:12:58.010

您将无法修改现有列的数据类型：

ORA-01439: 要修改的列必须为空才能更改数据类型

因此，如果你想要浮点列，你需要创建一个，用你的整数列的数据更新它，然后删除整数列。DDL 很快，但是更新 1M 行需要时间。您可能希望将其限制为 50000 行并在每次更新后提交，这样会更快：

UPDATE MyTable SET NewFloatField = OldINtegerField WHERE NewFloatField IS NULL AND rownum < 50000

您可以采用另一种方式在应用程序中更改 SQL，并在插入数据时乘以 100，在检索数据时除以 100。但是，我会修改数据库以使数据来自一个来源，而无需在插入或读取数据的所有地方进行解释。

# c# - HTTP/1.1 304 Not Modified - 导致服务器套接字和客户端套接字关闭

> ID：12817601
> 
> 赞同：0
> 
> 时间：2012-10-10T10:50:50.577
> 
> 标签：c#, http, sockets, tcp

我有一个自定义 TCP 服务器在端口 5888（虚拟端口）上侦听。代理服务器侦听传入连接。当代理接收到某些页面的 HTTP 请求时，它应该将其中继到主服务器的 80 端口。对于其他页面请求，代理需要将数据发送到主服务器的 8081 端口。

客户端从代理请求 .js 文件。代理在端口 80 上向主服务器发送相同的请求。主服务器将此消息与 Connection: Close 一起发回。

```
HTTP/1.1 304 Not Modified
Date: Wed, 10 Oct 2012 10:45:49 GMT
Server: Apache/2.2.3 (Red Hat)
Connection: close
ETag: "748047-11f4f-4b8dc565b9100" 
```

导致服务器和客户端套接字断开连接（Detected Server Socket disconnect via read）

如何处理这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T12:52:38.900

套接字正在关闭，因为那是响应的结束。服务器无需发送任何其他内容。

你如何处理它取决于你想要什么结果。响应表明远端客户端包含一个“if-modified-since”标头字段，因此您应该能够简单地*将此*响应直接传递回该客户端并完成处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T05:38:18.297

这里“处理”没有问题。服务器说要关闭连接，然后自己关闭了它。因此，在您将该响应发送回客户端后关闭它，并关闭与客户端的连接。这不是你作为代理服务器的工作来摆弄这个，而不是你可以。

# android - 活动一直进入onCreate

> ID：12817605
> 
> 赞同：0
> 
> 时间：2012-10-10T10:51:15.797
> 
> 标签：android

我正在为一个问题而疯狂......

关键是，我有一个名为 LogIn 的活动。这是它在清单上的声明方式：

```
<activity
        android:name=".LogIn"
        android:windowSoftInputMode="stateHidden"
        android:configChanges="keyboardHidden|orientation"
        android:label="@string/app_name" >
    </activity> 
```

我在写之后读到，*`android:configChanges="keyboardHidden|orientation`*当您更改方向时，应用程序没有再次进入 onCreate 。

问题是我的应用程序一直在输入 onCreate 。我正在使用 Eclipse 进行调试，当我打开应用程序时，进入（这是正常的），然后，如果我等到手机关机，在 onCreate 上再次进入！！，然后，我打开它并再次进入！ !. 我认为当应用程序“落后”另一个应用程序时，它正在进入 onPause，然后，当它从后台返回时，Activity 将进入 onResume()，但没有......在我的应用程序上它正在运行再次 onCreate()....

我不知道该怎么做才能让我的应用程序正常工作......

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T10:52:51.513

如果您的应用程序目标`API level 13`您应该添加`screenSize`

```
android:configChanges="keyboardHidden|orientation|screenSize" 
```

# css - Oracle Apex 布局 - 突出的子元素

> ID：12817614
> 
> 赞同：1
> 
> 时间：2012-10-10T10:52:00.140
> 
> 标签：css, oracle, oracle-apex

这是我必须创建的报告页面。不幸的是，表格有很多列，并且从页面的主要区域伸出。我正在使用标准 Apex 主题（ no6 - Centered Blue）。有人可以建议如何修改 css 以使布局更具响应性，并且后面的白色区域会延伸到这些区域的背景？

如何在 Apex 中查找“白色圆形元素”的类/ID 名称？

随着截止日期的临近，任何在这个主题上给出答案的人都会更安全:)

![报告分崩离析](../Images/008e2b8d70272b25cd8b985af5e66ced.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T12:12:00.043

您可以使用 firebug 或 chrome 开发者工具来检查页面上每个元素的 CSS。

在 chrome 上按下`Ctrl+Shift+I`以获取开发人员栏

在 firefox 上，您必须安装 firebug 扩展，然后检查元素。

此外，后面的白色背景必须将宽度设置为固定数字，因此它不适应变化。您可以使宽度变大或删除该属性。

您可以在这里看到一个工作示例，它将向您展示背景 div 的 2 个不同宽度和前景 div 溢出之间的区别：http: [//jsfiddle.net/shubhanshumishra/CCEmS/](http://jsfiddle.net/shubhanshumishra/CCEmS/)

# java - 根据另一个类中可用的参数对列表进行排序

> ID：12817616
> 
> 赞同：1
> 
> 时间：2012-10-10T10:52:04.407
> 
> 标签：java, comparator

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T11:11:42.373

你可以使用一些闻起来像高阶函数的东西。也就是说，创建一个静态函数，该函数采用从 Long 到 int（这是优先级）或数据的排序映射并返回一个新的比较器。

Foo 类有一个`getComparator`采用 Orange 的静态方法。Orange 是一个类，它有一个方法，该方法`getPriority`接受一个 ID 并返回相应的优先级。该`getComparator`方法构造一个新`Comparator`对象。新`Comparator`对象的`compare`方法采用两个 ID。它查找两个 ID 的相应优先级并进行比较。

```
public interface Orange {
    // Looks up id and returns the corresponding Priority.
    public int getPriority(Long id);
}

public class Foo {
    public static Comparator<Long> getComparator(final Orange orange) {
        return new Comparator<Long>() {
            public int compare(Long id1, Long id2) {
                // Get priority through orange, or
                // Make orange juice from our orange.
                // You may want to compare them in a different way.
                return orange.getPriority(id1) - orange.getPriority(id2);
        };
    }
} 
```

我的 java 有点生锈，所以代码可能有缺陷。不过，总体思路应该可行。

用法：

```
// This is defined somewhere. It could be a local variable or an instance
// field or whatever. There's no exception (except is has to be in scope).
Collection c = ...;
...
Orange orange = new Orange() {
    public int getPriority(Long id) {
        // Insert code that searches c.mySet for an instance of data
        // with the desired ID and return its Priority
    }
};
Collections.sort(c.myList, Foo.getComparator(orange)); 
```

我没有举例说明橙色的外观。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T11:03:26.480

我假设你有一个`List<Data>`存储在某个地方。在比较器中，你需要`getDataById`从你的数据类中调用一个方法，并通过优先级排序。

检查下面的代码..我已将单个类用于多种目的..

理想情况下，您希望将其**分解为更多类**..但这只是一个**演示**，如何实现您想要的..

```
class Container {
    // List of Data  instances created..
    // This list has to be static, as it is for a class, 
    // and not `instance specific`
    public static List<Data> dataList = new ArrayList<Data>();

    // List of Ids, that you want to sort.
    private List<Long> idList = new ArrayList<Long>();

    // Populate both the list..

    // Have a method that will iterate through static list to 
    // find Data instance for a particular id

    public static Data getDataById(long id) {
        // Find Data with id from the list

        // Return Data
    }

    public void sortList() {
        Collections.sort(idList, new MyComparator());
    }
}

public MyComparator implements Comparator<Long> {

    public int compare(Long int1, Long int2) {
        Data data1 = Container.getDataById(int1);
        Data data2 = Container.getDataById(int2);

        return data1.getPriority() - data2.getPriority();
    }
} 
```

# python - Django Sort By ForeignKey Boolean Field

> ID：12817618
> 
> 赞同：1
> 
> 时间：2012-10-10T10:52:05.743
> 
> 标签：python, sql, django, django-queryset

I have a problem that I would like to solve using Django's ORM. I have the following classes:

```
class Company:
    name = models.CharField(max_length=200)

class Event:
    title = models.CharField(max_length=200)
    company = models.ForeignKey(Company)

class Registration:
    attended = models.BooleanField(default=False)
    event = models.ForeignKey(Event) 
```

These are simple examples, but basically a Company can have several Events. When a user registers to attend an Event, a Registration is created for that user (I know that field isn't there, that's not the issue). If the user actually shows up to the Event, then that user's Registration object will have "attended=True".

I'm currently generating reports, and what I need is essentially a way to have a Company see *all* of their Events, and sort by the number of attendees (Registrations with "attended=True").

I have a SQL statement that may give you an idea of what I need (except that instead of just "e.title", obviously a QuerySet would give me back the whole object):

```
SELECT e.title FROM example_event e LEFT JOIN (SELECT event_id,
COUNT(*) attendees FROM example_registration WHERE attended=1 GROUP BY
event_id) r ON (e.id=r.event_id) ORDER BY r.attendees DESC; 
```

That gives me a properly sorted result set of Event titles. But I'd really like to do this within the ORM and return a QuerySet. Is there any way to do this? I would basically need something like:

```
events.annotate(attendees=Count('registration__attended=True'))
                .order_by('attendees') 
```

... I know that statement is invalid, but it hopefully gets the point across of what I'm trying to accomplish. Also, I need to always return **all** of the Events for a Company, because it's a report. They will want to see how all of their Events are performing, even if they have 0 attendees (so something like `events.filter(registration__attended=True)` won't give me what I need, because it returns only a subset of a Company's Events).

Thanks in advance, I'd really appreciate someone's help here!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T12:41:01.053

我不确定您是否要排除使用该`extra`方法，但您可以执行以下操作：

```
events = Event.objects.extra(
    select={'attendees': 'SELECT COUNT(*) from event_registration' + \
        ' where attended=1 and event_id=event_event.id'}
).order_by('attendees') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T11:00:32.723

这应该有效：

```
events.filter(registration__attended=True)\
      .annotate(attendees=Count('registration'))\
      .order_by('attendees') 
```

**注意**，那`filter()`和`annotate()`方法是不可交换的。所以查询之间有区别：

```
>>> events.annotate(attendees=Count('registration')).filter(registration__attended=True)

>>> events.filter(registration__attended=True).annotate(attendees=Count('registration')) 
```

[在文档](https://docs.djangoproject.com/en/1.4/topics/db/aggregation/#order-of-annotate-and-filter-clauses)中阅读更多内容。

# javascript - 如何创建多重变化功能

> ID：12817628
> 
> 赞同：-1
> 
> 时间：2012-10-10T10:52:29.857
> 
> 标签：javascript, jquery, jquery-selectors

我有一个 html 选择和一个添加按钮。如果有人单击添加按钮，则 html 选择创建相同的类，名称。我的问题是如果我更改第一个 html 选择然后更改功能正常工作但如果我更改创建的 html 选择然后更改功能不起作用。请有人能指出我在这里可能做错了什么吗？非常感谢。这是我的代码：

```
 <html>
    <head>
    <title>the title</title>
     <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
   <script type="text/javascript" language="javascript">
$(document).ready(function(){
$(document).on('change','.name',function(){
        calculateSum();
    });

    $(document).on('click','.del',function(){
        calculateSum();
    });
});

          function calculateSum() {
          $.post(
             "data.php",
             $(".name").serialize(),
                 function(data) {
                $('#stage1').html(data);
             }
          );
      }

   </script>
<script type="text/javascript" language='javascript'>
/*
This script is identical to the above JavaScript function.
*/
var ct = 1;

function new_link()
{
    ct++;
    var div1 = document.createElement('div');
    div1.id = ct;

    // link to delete extended form elements
    var delLink = '<div class="del" style="text-align:right;margin-top:-20px"><a href="javascript:delIt('+ ct +')">Delete</a></div>';

    div1.innerHTML = document.getElementById('newlinktpl').innerHTML + delLink;

    document.getElementById('newlink').appendChild(div1);

}
// function to delete the newly added set of elements
function delIt(eleId)
{
    d = document;

    var ele = d.getElementById(eleId);

    var parentEle = d.getElementById('newlink');

    parentEle.removeChild(ele);

}
</script>
</head>
<body>
   <div id="stage1" style="background-color:blue; color: white">
          STAGE - 1
   </div>

<form id="testform">
<div id="newlink">
 <table>
 <tr>
 <td><p>Fruit:</p></td>
 <td>
     <select class="name" name="name[]">
         <option>Apple</option>
         <option>Mango</option>
         <option>Orange</option>
         <option>Banana</option>
     </select>
 </td>
</tr>
</table>
</div>
    <input type="button" value="Add" onclick="javascript:new_link()"/>
</form>
    <div id="newlinktpl" style="display:none">
        <table>
        <tr>
 <td><p>Fruit:</p></td>
 <td>
     <select class="name" name="name[]">
         <option>Apple</option>
         <option>Mango</option>
         <option>Orange</option>
         <option>Banana</option>
     </select>
 </td>
</tr>
        </table>
    </div>
</body>
</html> 
```

php代码：

```
<?php
$fruit=$_REQUEST["name"];
$n = count($fruit);

for($i=0;$i<$n; $i++)
{
    echo $fruit[$i]."<br/>";
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T11:00:06.550

jQuery FAQ 文档很好地描述了您的情况。

[http://docs.jquery.com/Frequently_Asked_Questions#Why_doesn.27t_an_event_work_on_a_new_element_I.27ve_created.3F](http://docs.jquery.com/Frequently_Asked_Questions#Why_doesn.27t_an_event_work_on_a_new_element_I.27ve_created.3F)

您需要使用事件委托来将事件绑定到代码运行时不存在的未来元素。

使用`on()`方法并将事件绑定到将始终存在的元素或文档本身。

```
$(document).on('change','.name', function(){

/* your code here*/
}) 
```

API 参考： [http ://api.jquery.com/on/](http://api.jquery.com/on/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T11:03:02.133

有几种方法可以解决这个问题，但由于您使用的是 jQuery，因此最简单的方法是使用`.on('change','selector',[function]);`而不是直接绑定`change`侦听器。当然，最好的方法是`.delegate`, 或 -in *“纯”* JS：

```
document.body.addEventListener('change',function(e)
{
    e = e || window.event;
    var target = e.target || e.srcElement;
    if (target.tagName.toLowerCase() === 'select' && target.className.match(/\bname\b/))
    {
        theActualHandler.apply(target,[e]);//calls the actual handler, this will point to the changed element, and the event object is passed as an argument.
    }
},false); 
```

委派事件意味着您正在侦听 DOM 中某处发生的事件。当它发生时，您可以检查该事件是否指向满足某些条件的元素：在这种情况下，它是一个`select`元素，它有一个名为 的类`name`。从那里开始，这只是调用实际处理程序的简单问题。使用`.apply`允许您将上下文设置为已更改的元素*并将*事件对象传递给同一函数。那么，该函数的行为将与您直接绑定处理程序时完全相同。
不过，就目前而言，jQuery`.delegate`做的事情几乎一样，而且会更熟悉，所以我建议你使用它:)

链接：

*   [jQuery的委托方法](http://api.jquery.com/delegate/)
*   [jQuery 的 on 方法](http://api.jquery.com/on/)
*   [事件委托的概念介绍](http://www.sitepoint.com/javascript-event-delegation-is-easier-than-you-think/)

# java - 转换地图 进入json

> ID：12817630
> 
> 赞同：8
> 
> 时间：2012-10-10T10:52:30.887
> 
> 标签：java, json

我`Map<String,String>`在java中有这样的：

```
{card_switch=Master, issuing_bank=ICCI, card_Type=DebitCard} 
```

我正在使用[简单的 json 解析器](http://code.google.com/p/json-simple/)将此映射解析为 json 对象。

我试过了 ：

```
Object json = JSONValue.parse(entry.getKey()); 
```

但我收到一条错误消息：

```
Object json = JSONValue.parse(entry.getKey());
                      ^
method JSONValue.parse(String) is not applicable
  (actual argument Map<String,String> cannot be converted to String by method invocation conversion)
method JSONValue.parse(Reader) is not applicable
  (actual argument Map<String,String> cannot be converted to Reader by method invocation conversion) 
```

可以转换`Map<String,String>`成json吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-10T12:50:30.490

您也可以使用 Gson 库尝试这样的操作：

```
package com.stackoverflow.works;

import java.lang.reflect.Type;
import java.util.HashMap;
import java.util.Map;

import com.google.gson.Gson;
import com.google.gson.reflect.TypeToken;

/*
 * @Author: sarath_sivan
 */

public class MapToJsonConverter {

    /*
     * @Description: Method to convert Map to JSON String
     * @param: map Map<String, String> 
     * @return: json String
     */
    public static String convert(Map<String, String> map) {
        Gson gson = new Gson();
        String json = gson.toJson(map);
        return json;
    }

    /*
     * @Description: Method to convert JSON String to Map
     * @param: json String 
     * @return: map Map<String, String> 
     */
    public static Map<String, String> revert(String json) {
        Gson gson = new Gson();
        Type type = new TypeToken<Map<String, String>>(){}.getType();
        Map<String, String> map = gson.fromJson(json, type);
        return map;
    }

    /*
     * @Description: Method to print elements in the Map
     * @param: map Map<String, String> 
     * @return: void 
     */
    public static void printMap(Map<String, String> map) {
        for (String key : map.keySet()) {
            System.out.println("map.get(\"" + key + "\") = " + map.get(key));
        }
    }

    /*
     * @Description: Method to print the JSON String
     * @param: json String 
     * @return: void 
     */
    public static void printJson(String json) {
        System.out.println("json = " + json);
    }

    /*
     * @Description: Main method to test the JSON-MAP convert/revert logic
     */
    public static void main(String[] args) {
        Map<String, String> paymentCards = new HashMap<String, String>();
        paymentCards.put("card_switch", "Master");
        paymentCards.put("issuing_bank", "ICCI");
        paymentCards.put("card_Type", "DebitCard");

        String json = convert(paymentCards); //converting Map to JSON String
        System.out.println("Map to JSON String");
        System.out.println("******************");
        printJson(json); 

        System.out.println();

        paymentCards = revert(json); //converting JSON String to Map
        System.out.println("JSON String to Map");
        System.out.println("******************");
        printMap(paymentCards);
    }

} 
```

**输出如下所示：**

![输出](../Images/36eb9ec62bdb28efc9a58bd0ca2b55d6.png)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-10T10:57:27.793

看看这个页面上的示例 1.4 [http://code.google.com/p/json-simple/wiki/EncodingExamples#Example_1-4_-_Encode_a_JSON_object_-_Using_Map_and_streaming](http://code.google.com/p/json-simple/wiki/EncodingExamples#Example_1-4_-_Encode_a_JSON_object_-_Using_Map_and_streaming)：

```
 Map obj=new LinkedHashMap();
   obj.put("name","foo");
   obj.put("num",new Integer(100));
   obj.put("balance",new Double(1000.21));
   obj.put("is_vip",new Boolean(true));
   obj.put("nickname",null);
   StringWriter out = new StringWriter();
   JSONValue.writeJSONString(obj, out);
   String jsonText = out.toString();
   System.out.print(jsonText); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-02-11T20:56:46.463

尝试这个。但是你需要 gson 库吗：

```
Map<String, Object> map = new HashMap<>();
String value = new Gson().toJson(map); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-10-10T10:58:42.800

这应该是可能的，但我认为你把它弄错了：解析将解析 json-text 内容，并为你提供一个 Java 等效的（“解码”）

查看主页上的示例： [http ://code.google.com/p/json-simple/wiki/EncodingExamples#Example_1-3_-_Encode_a_JSON_object_-_Using_Map](http://code.google.com/p/json-simple/wiki/EncodingExamples#Example_1-3_-_Encode_a_JSON_object_-_Using_Map)

# soap - 如何从 Symfony 2.0 中读取 Soap WSSE 标头

> ID：12817631
> 
> 赞同：0
> 
> 时间：2012-10-10T10:52:33.217
> 
> 标签：soap, symfony, ws-security, soapheader

我正在尝试在 Web 服务 API 上实现 WSSE 身份验证。我在 symfony 官方网站上遵循[了这个教程。](http://symfony.com/doc/2.0/cookbook/security/custom_authentication_provider.html)我使用 SoapUI 发送带有安全标头的请求：

```
POST http://dev.sellerphp.com/app_dev.php/wsapi/soap/ordersfollowup HTTP/1.0
Accept-Encoding: gzip,deflate
Content-Type: text/xml;charset=UTF-8
SOAPAction: "http://dev.sellerphp.com/app_dev.php/wsapi/soap/ordersfollowup"
Content-Length: 1520
Host: dev.sellerphp.com
Connection: Keep-Alive
User-Agent: Apache-HttpClient/4.1.1 (java 1.5)

<soapenv:Envelope xmlns:ord="https://dev.sellerphp.com/app_dev.php/wsapi/soap/ordersfollowup?wsdl" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsap="http://wsapi.sellerphp.com/">
   <soapenv:Header>
       <wsse:Security soap:mustUnderstand="1" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
           <wsu:Timestamp wsu:Id="TS-14">
               <wsu:Created>2012-10-10T09:36:10Z</wsu:Created>
               <wsu:Expires>2012-10-10T09:52:50Z</wsu:Expires>
           </wsu:Timestamp>
           <wsse:UsernameToken wsu:Id="UsernameToken-13">
               <wsse:Username>myUsername</wsse:Username>
               <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordDigest">hb5AJ7CT2tMSQymSsxwvc8J/xoI=</wsse:Password> 
               <wsse:Nonce EncodingType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary">PEo//Z/yGF5/HCW6rkCuwQ==</wsse:Nonce>
               <wsu:Created>2012-10-10T09:36:10.485Z</wsu:Created>
           </wsse:UsernameToken>
        </wsse:Security>
   </soapenv:Header>
   <soapenv:Body>
      <wsap:setTracking>
         <input>
            <!--1 to 10 repetitions:-->
            <OrderItemTracking>
               <order-item-id>?</order-item-id>
               <tracking-number>?</tracking-number>
            </OrderItemTracking>
         </input>
      </wsap:setTracking>
   </soapenv:Body>
</soapenv:Envelope> 
```

在服务器端，WsseListener 类不读取 SOAP 标头...该示例仅涉及在请求级别定义标头，但它们仅嵌入在 SOAP 信封中：

```
 public function handle(GetResponseEvent $event)
   {
      $request = $event->getRequest();

      $wsseRegex = '/UsernameToken Username="([^"]+)", PasswordDigest="([^"]+)", Nonce="([^"]+)", Created="([^"]+)"/';
      if (!$request->headers->has('x-wsse') || 1 !== preg_match($wsseRegex, $request->headers->get('x-wsse'), $matches))
      {
         return;
      }

      // ########### It never reached this line, never found any headers...

      var_dump($matches);exit;

      $token = new WsseUserToken();
      $token->setUser($matches[1]);

      $token->digest = $matches[2];
      $token->nonce = $matches[3];
      $token->created = $matches[4];

      try
      {
         $authToken = $this->authenticationManager->authenticate($token);

         $this->securityContext->setToken($authToken);
      }
      catch (AuthenticationException $failed)
      {
         // ... you might log something here
         // To deny the authentication clear the token. This will redirect to the login page.
         // $this->securityContext->setToken(null);
         // return;
         // Deny authentication with a '403 Forbidden' HTTP response
         $response = new Response();
         $response->setStatusCode(403);
         $event->setResponse($response);
      }
   } 
```

我不知道如何从侦听器中读取soap:Header 标头。你能帮助我吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T13:44:00.920

我最终承认，Symfony 提供的示例暗示 WSSE 标头是由 HTTP 层带来的，而不是由 SOAP 信封带来的。所以我做了一个解决方法来阅读 SOAP 标头：

WsseListener 处理方法：

```
 public function handle(GetResponseEvent $event)
   {
      $request = $event->getRequest();

      $decodedHeaders = WsseHeadersDecoder::getHeaders($request);

      if (!$decodedHeaders || !is_array($decodedHeaders))
      {
         return;
      }

      $token = new WsseUserToken();
      $token->setUser($decodedHeaders['username']);

      $token->digest = $decodedHeaders['passwordDigest'];
      $token->nonce = $decodedHeaders['nonce'];
      $token->created = $decodedHeaders['created'];

      // ...
   } 
```

WsseHeadersDecoder::getHeaders 方法：

```
 static public function getHeaders(Request $request)
   {
      //HTTP headers (as described here : http://symfony.com/doc/2.0/cookbook/security/custom_authentication_provider.html#the-listener
      if ($request->headers->has('x-wsse'))
      {
         $wsseRegex = '/UsernameToken Username="([^"]+)", PasswordDigest="([^"]+)", Nonce="([^"]+)", Created="([^"]+)"/';
         if (1 !== preg_match($wsseRegex, $request->headers->get('x-wsse'), $matches))
         {
            return false;
         }
         else
         {
            $username = $matches[1];
            $passwordDigest = $matches[2];
            $nonce = $matches[3];
            $created = $matches[4];
         }
      }
      //Classic SOAP headers
      else
      {
         //PéCé: Clear XML namespace prefixes to handle with SimpleXML
         $decodedRequest = preg_replace("/(<\/?)([-\w]+):([^>]*>)/", "$1$3", $request->getContent());
         $xmlRequest = simplexml_load_string($decodedRequest);

         if (
            !isset($xmlRequest->Header->Security->UsernameToken->Username)
            || !isset($xmlRequest->Header->Security->UsernameToken->Password)
            || !isset($xmlRequest->Header->Security->UsernameToken->Nonce)
            || !isset($xmlRequest->Header->Security->UsernameToken->Created)
         )
         {
            return false;
         }
         else
         {
            $username = (string) $xmlRequest->Header->Security->UsernameToken->Username;
            $passwordDigest = (string) $xmlRequest->Header->Security->UsernameToken->Password;
            $nonce = (string) $xmlRequest->Header->Security->UsernameToken->Nonce;
            $created = (string) $xmlRequest->Header->Security->UsernameToken->Created;
         }
      }

      return array (
              'username' => $username, 'passwordDigest' => $passwordDigest, 'nonce' => $nonce, 'created' => $created
      );
   } 
```

# asp.net - 使用 TextWriter.Synchronized 写入日志文件线程安全

> ID：12817634
> 
> 赞同：1
> 
> 时间：2012-10-10T10:52:43.113
> 
> 标签：asp.net

阅读文档时，我认为这段代码会以线程安全的方式将日志写入文件。

```
using (TextWriter syncTextWriter = TextWriter.Synchronized(new StreamWriter(Server.MapPath(String.Format("~/App_Data/PaypalIPN/IPNlog_{0:yyyyMM}.txt", DateTime.Now)), true)))
{
  syncTextWriter.WriteLine(line);
  syncTextWriter.Close();
} 
```

我没有高流量的网站，但时不时有两个人同时进行paypal支付，这就是IPN支付日志。尽管介绍了`TextWriter.Synchronized`我仍然得到奇怪的例外：

```
System.IO.IOException: The process cannot access the file ... 
...because it is being used by another process. 
```

我哪里出错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T11:03:47.260

你每次都在创造一个新的作家。*为传递的实例*`Synchronized`创建线程安全包装器，因此您的调用不安全。

# applescript - 如何通过applescript访问ppt文件中的笔记文本？

> ID：12817639
> 
> 赞同：1
> 
> 时间：2012-10-10T10:53:08.053
> 
> 标签：applescript, powerpoint

我想在 os x 的 PPT 文件中获取笔记的文本。我觉得这应该工作：

```
get content of notes page of slide N of active presentation 
```

但它总是返回一个“缺失值”。有什么想法吗？

顺便说一句，我的目标是能够创建一组幻灯片的新版本，其中笔记不包含文本 STUDENT=HIDE... 我喜欢向学生提供幻灯片，但并不总是希望他们看到所有内容提前（例如课堂练习的正确结果）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T19:47:04.447

注释在形状中（`place holder`class --> `text frame`--> `text range`--> **content**）。

以下是如何在每张幻灯片中获取注释值的示例：

```
tell application "Microsoft PowerPoint"
    repeat with tSlide in (get slides of active presentation)
        set tNote to ""
        repeat with t_shape in (get shapes of notes page of tSlide)
            tell t_shape to if has text frame then tell its text frame to if has text then
                set tNote to content of its text range -- get the note of this slide
                exit repeat
            end if
        end repeat
        if tNote does not contain "STUDENT=HIDE" then
            --- *** do something with tSlide *** ---
            --
            --
        end if
    end repeat
end tell 
```

# regex - 在 perl 中使用 regExp 提取字符串的一部分

> ID：12817645
> 
> 赞同：0
> 
> 时间：2012-10-10T10:53:25.817
> 
> 标签：regex, perl

小问题正在重新调整字符串的一部分。我的字符串是

> 这里的一些文本值：100 .1.3.6 bla bla。

我想将刺痛的第一部分保存到 .1.3.......

所以最后我只有

> 此处的一些文本值：100

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T10:58:16.253

```
$str="some text here value: 100 .1.3.6 bla bla.";$str=~m{^([^.]*)} and print $1' 
```

这从字符串的开头匹配，直到出现点字符。如果存在匹配，则捕获并打印匹配的部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T10:58:23.510

这可能是您正在寻找的（假设每行只有一个`:`）。

```
perl -pe 's/(.*: [^ ]+).*/$1/' file.txt 
```

结果：

```
some text here value: 100 
```

# encoding - Windows media Foundation 和 Expression Encoder 之间有什么关系？

> ID：12817646
> 
> 赞同：0
> 
> 时间：2012-10-10T10:53:28.970
> 
> 标签：encoding, wmf

Expression Encoder 和 windows Media Foundation 有什么关系？表达式编码器是独立于 WMF 还是依赖于它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T10:29:08.777

Expression Encoder 使用 DirectShow 作为其媒体骨干，即 MF 的前身。

在 Expression Encoder 4 发布时，XP 仍然是 EE 用户的重要平台，并且 XP 不支持 MF。

简而言之，您可以将 Expression Encoder 和 WMF 视为完全独立的媒体技术。

**作者：Eric Juteau 微软员工，版主** 粘贴自**msdn**论坛

# java - java中的sockets和stdin之间的轮询

> ID：12817658
> 
> 赞同：0
> 
> 时间：2012-10-10T10:53:51.740
> 
> 标签：java, p2p, nio

我必须编写一个必须充当客户端和服务器的 p2p 程序。该程序必须监听传入的连接（充当服务器）并等待用户输入（充当客户端）。我不确定采取什么方法来做到这一点。

我尝试使用 NIO 列出所有可选择的频道。我仍然无法弄清楚如何使标准输入成为非阻塞的！

我的程序在控制台中运行。因此，不允许 AWT。

请帮忙！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T08:05:36.320

您至少需要两个线程：一个处理标准输入，一个或多个处理套接字，这取决于您使用的是非阻塞 NIO 还是阻塞 I/O。

# c# - 获取导入行的索引（datatable.ImportRows()）

> ID：12817660
> 
> 赞同：0
> 
> 时间：2012-10-10T10:53:55.250
> 
> 标签：c#, datatable, datarow

有没有办法使用 datatable.ImportRows 返回导入行的索引？

我想将一个数据行复制到同一个数据表中，所以目的是复制一行（我将在获取索引时对其进行修改）。

```
System.Data.DataTable test;
test.importRows(datarow); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T10:56:05.317

新行将添加到数据表的末尾。所以索引将是`test.Rows.Count-1`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T10:57:59.120

取自[这篇 msdn 文章](http://msdn.microsoft.com/en-us/library/system.data.datatable.importrow.aspx)：

> 您可以使用 DataTable.Rows.Find 和 DataTable.Rows.IndexOf 来获取新行的索引。

例如：

```
int rowIndex = test.Rows.IndexOf(datarow); 
```

* * *

如果正在添加新行（正如您通过复制行所建议的那样），那么它将被添加到当前集合的末尾，因此您可以计算行数并减去一个：

```
int rowIndex = test.Rows.Count - 1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T10:55:30.443

```
System.Data.DataTable test;
test.importRows(datarow);    
test.Rows.IndexOf(datarow); 
```

# mysql - 如何在 MySQL 中查询与简单子字符串匹配的所有结果？

> ID：12817664
> 
> 赞同：0
> 
> 时间：2012-10-10T10:54:00.667
> 
> 标签：mysql, substring

这应该很简单，但我必须遗漏一些明显的东西。

桌子：

```
id    name
===============
1     Allison
2     BethAnn
3     Carly
4     MaryAnn 
```

测试查询：

```
SELECT id,SUBSTRING(name,5) FROM my_table; 
```

结果：

```
1    son
2    Ann
3    y
4    Ann 
```

伟大的。现在只需获取字符 5+ = 'Ann' 的 id：

```
SELECT id FROM my_table WHERE SUBSTRING(name,5) = 'Ann'; 
```

预期结果：

```
2
4 
```

相反，我什么也得不到。我错过了什么？

等待面签。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T11:05:02.837

您的查询是正确的，并为我产生了正确的结果。似乎还有其他原因导致问题。这是屏幕截图...

![在此处输入图像描述](../Images/4ce8c2f972e0e472b258f244c4891fd6.png)

希望能帮助到你...

# tree - 多级树表过滤 ADF 11 2

> ID：12817665
> 
> 赞同：2
> 
> 时间：2012-10-10T10:54:05.147
> 
> 标签：tree, filtering, oracle-adf

我在 adf web fusion 应用程序中有多级树表，我想根据表中的列过滤这棵树，我的树看起来像：

```
<af:treeTable value="#{bindings.AccountsView1.treeModel}" var="node"
              selectionListener="#{bindings.AccountsView1.treeModel.makeCurrent}"
              rowSelection="single" id="tt1" partialTriggers="::cb1">
  <f:facet name="nodeStamp">
    <af:column id="c1" headerText="Id">
      <af:outputText value="#{node.Id}" id="ot1"/>
    </af:column>
  </f:facet>
  <f:facet name="pathStamp">
    <af:outputText value="#{node}" id="ot2"/>
  </f:facet>
  <af:column id="c2" headerText="Name">
    <af:outputText value="#{node.Name}" id="ot3"/>
  </af:column>
  <af:column id="c3" headerText="Kind">
    <af:outputText value="#{node.Kind}" id="ot4"/>
  </af:column>
</af:treeTable> 
```

我的树有六个层次。我想使用种类 NO 过滤所有级别。

# php - PHP将变量传递给函数的返回

> ID：12817667
> 
> 赞同：0
> 
> 时间：2012-10-10T10:54:06.117
> 
> 标签：php, class, arguments

是否有可能做这样的事情：

```
Class::function('some_text') = 'aaaaa'; 
```

并在 Class::function() 中获取这个 'aaaaa' 字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T10:57:20.913

是的，通过这样做：

```
MyClass::func('some_text', 'aaaaa'); 
```

例如

```
class MyClass {
    public static function func($text, $aaa) {
        ...
    }
} 
```

或者（比以前的恕我直言更糟糕）：

```
global $foo;
$foo = 'bar';

class Baz {
    public static function bong() {
        global $foo;
        ...
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T10:58:50.600

该语法在 PHP 中不可用。

在 Perl 中，这种类型的函数称为`LVALUE function`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T11:00:02.723

就您的情况而言，您似乎正在寻找这样的解决方案？

```
Session::Set(array("key" => "value"));

class Session {
    public static function Set($kvp) {
        foreach ($kvp as $key => $value) {
            echo $key . " is " . $value . "<br />";
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T10:57:55.363

您可以返回一个引用并更改它的值。

```
class MyClass {

  private static $variable;

  public static function &func($random_param) {
    return self::$variable;
  }
} 
```

像这样称呼它

```
$reference = &MyClass::func('asd');
$reference = "15";

echo MyClass::func('asdasd'); // "15" 
```

# ios - icloud 复制得到一个错误 Domain=NSCocoaErrorDomain Code=512

> ID：12817668
> 
> 赞同：4
> 
> 时间：2012-10-10T10:54:06.473
> 
> 标签：ios, icloud

当我将文件从本地应用程序复制到 iCloud 时，文件被复制但我收到此错误：错误域 = NSCocoaErrorDomain 代码 = 512“操作无法完成。（可可错误 512。）”

这是代码

```
NSString *source = [tagsPath stringByAppendingPathComponent:current_Group_Name];
source = [source stringByAppendingPathComponent:fileName];

NSURL *sourceURL = [NSURL fileURLWithPath:source];

dispatch_queue_t q_default;
q_default = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
dispatch_async(q_default, ^(void) {

    fileManager = [NSFileManager defaultManager];

    NSURL *ubiq = [fileManager URLForUbiquityContainerIdentifier:nil];
    if (ubiq) {
        NSURL *groupURL = [tagsURL URLByAppendingPathComponent:current_Group_Name];
        NSError *error= nil;
        NSURL *destinationURL = [groupURL URLByAppendingPathComponent:fileName];

        [fileManager setUbiquitous:YES
                     itemAtURL:sourceURL
                     destinationURL:destinationURL
                     error:&error];
                if (error != nil)
                { NSLog( @"Error > %@",error);
                 [self displayError:NSLocalizedString(@"XMP file not saved in iCloud.", @"") withReason:[NSString stringWithFormat:@"%@%d",NSLocalizedString(@"Error code : ", @""),[error code]]];}

    dispatch_queue_t q_main = dispatch_get_main_queue();
    dispatch_async(q_main, ^(void) {
    });
}); 
```

有什么建议么 ？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T14:22:34.093

这只发生在我的IOS6设备上，奇怪的是它实际上似乎是保存，当我加载我的保存数据时，唯一的问题是如果我删除应用程序然后重新下载它，它似乎会擦除icloud数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-10T06:56:46.993

我也在使用相同的代码

```
setUbiquitous:YES
                 itemAtURL:sourceURL
                 destinationURL:destinationURL
                 error:&error]; 
```

用于将文件移动到 iCloud，当时我也遇到了同样的错误，但我终于通过像这样的代码中的一个小改动解决了这个问题

```
[[[NSFileManager alloc]init]setUbiquitous:YES itemAtURL:ubiquitousPackage destinationURL:localurl2 error:&error]; 
```

# windows - 在 DOS 命令中获取“打开脚本文件 C:\Documents 时出错”

> ID：12817669
> 
> 赞同：0
> 
> 时间：2012-10-10T10:54:14.567
> 
> 标签：windows, vba

```
Sub Button1_Click()
Dim a
ipaddress = ActiveSheet.Cells(3, 2).Value
UserName = ActiveSheet.Cells(4, 2).Value
Password = ActiveSheet.Cells(5, 2).Value
Path = ActiveSheet.Cells(6, 2).Value
a = ActiveSheet.Cells(7, 2).Value 'Reports needs to be downloaded
aSplit = Split(a, ",")
Const ForWriting = 2
Dim objOutStream, objjFSO, objShell
Set objFSO = CreateObject("Scripting.FileSystemObject")
Set objOutStream = objFSO.OpenTextFile("C:\Documents and Settings\FTPCommand.txt",      ForWriting, True)
With objOutStream
.WriteLine UserName
.WriteLine Password
.WriteLine "binary"
.WriteLine Path
For i = 0 To UBound(aSplit)
    aSplit(i) = Trim(aSplit(i))
    .WriteLine "get ES." & aSplit(i)
Next
.WriteLine "quit"
.Close
End With
Set objShell = CreateObject("WScript.Shell")
objShell.Run "%comspec% /k FTP -n -i -s:" & "C:\Documents and Settings\FTPCommand.txt" & " " & ipaddress, 1, True
End Sub 
```

**运行宏代码后的文本文件：**

```
Username
Password
binary
Path
get ES.1312
get ES.3243
get ES.4534
quit 
```

文本文件中的命令不执行。我不知道如何解决它。

请帮助...提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T11:00:57.840

路径有空格，所以必须用引号将其与命令行的其他部分区分开来：

```
objShell.Run "%comspec% /k FTP -n -i -s:" & """C:\Documents and Settings\FTPCommand.txt""" & " " & ipaddress, 1, True 
```

# c++ - 在抛出 'std::bad_alloc' 的实例后调用终止

> ID：12817670
> 
> 赞同：2
> 
> 时间：2012-10-10T10:54:15.770
> 
> 标签：c++, c++11

这是我的设置（归结为）。我有一个“布局功能”：

```
 struct LayoutFunc {
    LayoutFunc( int limit , int value ) { lim.push_back(limit); val.push_back(value); }
    //LayoutFunc(LayoutFunc&& func) : lim(func.lim),val(func.val) {}
    LayoutFunc(const LayoutFunc& func) : lim(func.lim),val(func.val) {} // error: std::bad_alloc
    LayoutFunc(const std::vector<int>& lim_, 
               const std::vector<int>& val_ ) : lim(lim_),val(val_) {}
    LayoutFunc curry( int limit , int value ) const {
      std::vector<int> rlim(lim);
      std::vector<int> rval(val);
      rlim.push_back(limit);
      rval.push_back(value);
      LayoutFunc ret(rlim,rval);
      return ret;
    };
    std::vector<int> lim;
    std::vector<int> val;
  }; 
```

然后我有一个使用的类`LayoutFunc`：

```
template<class T> class A
{
public:
  A( const LayoutFunc& lf_ ) : lf(lf_), member( lf.curry(1,0) ) {}
  A(const A& a): lf(lf), member(a.function) {}  // corresponds to line 183 in real code
private:
  LayoutFunc lf;
  T member;
}; 
```

数据成员的顺序是正确的。还有更多类型`class A`，它们使用稍微不同的数字来“咖喱”布局功能。我不在这里打印它们以节省空间（它们具有相同的结构，只有不同的数字）。最后我使用类似的东西：

```
A< B< C<int> > > a( LayoutFunc(1,0) ); 
```

这将根据模板类型顺序构建“咖喱”布局功能。

现在，这个简单（归结）的示例可能有效。但是，在运行时的真实应用程序中，我`terminate called after throwing an instance of 'std::bad_alloc'`在`LayoutFunc`.

我认为设置中存在一个与临时引用有关的缺陷，并且该临时在消费者（在这种情况下为 的复制构造函数`LayoutFunc`）使用它之前被销毁。这将解释`lim(func.lim),val(func.val)`失败。但我看不出缺陷在哪里，特别是因为`curry`返回一个 true `lvalue`。我也尝试使用移动构造函数并在 c++11 模式下编译。相同的行为。

这里是回溯：

```
#0  0x00007ffff6437445 in __GI_raise (sig=<optimised out>) at ../nptl/sysdeps/unix/sysv/linux/raise.c:64
#1  0x00007ffff643abab in __GI_abort () at abort.c:91
#2  0x00007ffff6caa69d in __gnu_cxx::__verbose_terminate_handler() () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6
#3  0x00007ffff6ca8846 in ?? () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6
#4  0x00007ffff6ca8873 in std::terminate() () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6
#5  0x00007ffff6ca896e in __cxa_throw () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6
#6  0x00007ffff6c556a2 in std::__throw_bad_alloc() () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6
#7  0x00000000004089f6 in allocate (__n=18446744073709551592, this=0x7fffffffdaf8) at /usr/include/c++/4.6/ext/new_allocator.h:90
#8  _M_allocate (__n=18446744073709551592, this=0x7fffffffdaf8) at /usr/include/c++/4.6/bits/stl_vector.h:150
#9  _Vector_base (__a=..., __n=18446744073709551592, this=0x7fffffffdaf8) at /usr/include/c++/4.6/bits/stl_vector.h:123
#10 vector (__x=..., this=0x7fffffffdaf8) at /usr/include/c++/4.6/bits/stl_vector.h:279
#11 LayoutFunc (func=..., this=0x7fffffffdae0) at layoutfunc.h:17
#12 A (a=..., this=0x7fffffffdad0) at A.h:183 
```

Ah:183 是 的复制构造函数`A`：

```
 A(const A& a): lf(lf), member(a.function) {} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T11:15:50.610

```
A(const A& a): lf(lf), member(a.function) {} 
```

应该

```
A(const A& a): lf(a.lf), member(a.function) {} 
```

BЈовић 评论为我指明了找到这个错误的方向。如果您发布答案，+1 BЈовић。还 +1 让 sehe 了解 BT

# hibernate - @OneToOne 映射不适用于 @Inheritance

> ID：12817672
> 
> 赞同：1
> 
> 时间：2012-10-10T10:54:20.373
> 
> 标签：hibernate, jpa, jboss, persistence

我在映射@OneToOne 和在 jboss 下部署时遇到问题。

我有类的层次结构：

```
@Entity
@Table(name = "SEED")
@Inheritance
@DiscriminatorColumn(name = "ENTITY_TYPE")
@ForceDiscriminator
public class Parent implements Serializable
{
   @Id
   @SequenceGenerator(name = "SEED_SEQ", sequenceName = "SEED_SEQ")
   @GeneratedValue(generator = "SEED_SEQ")
   @Column(name = "AA_ID")
   protected Long aaId;

   @Column(name = "SECRET_SEED")
   protected String seed;

   @Column(name = "ENTITY_ID") 
   protected String entityId; 

   //getters and setters
}

@Entity
@DiscriminatorValue(value = "c1")
public class Child1 extends Parent
{
}

@Entity
@DiscriminatorValue(value = "c2")
public class Child2 extends Parent
{
} 
```

我试图以这种方式映射子类：

```
@Entity
@Table(name = "CLINIC")
public class Clinic implements Serializable
{
   @Id
   @GeneratedValue(generator = "SEQ_CLINIC_RECID")
   @SequenceGenerator(name = "SEQ_CLINIC_RECID", sequenceName = "SEQ_CLINIC_RECID")
   @Column(name = "ID")
   private Long id;

   @Column(name = "CODE")
   private String code;

   @OneToOne(fetch = FetchType.LAZY)
   @JoinColumn(name = "CODE", referencedColumnName = "ENTITY_ID", insertable = false, updatable = false)
   private Child1 child1;

   //getters and setters
} 
```

当我在 jboss-4.2.3.GA 上部署它时，出现以下异常：

```
org.hibernate.AnnotationException: referencedColumnNames(ENTITY_ID) of setup.entities.Clinic.child1 referencing setup.entities.Child1 not mapped to a single property
at org.hibernate.cfg.BinderHelper.createSyntheticPropertyReference(BinderHelper.java:16
5)
        at org.hibernate.cfg.FkSecondPass.doSecondPass(FkSecondPass.java:63)
        at org.hibernate.cfg.AnnotationConfiguration.processFkSecondPassInOrder(AnnotationConfiguration.java:428)
        at org.hibernate.cfg.AnnotationConfiguration.secondPassCompile(AnnotationConfiguration.
java:286)
        at org.hibernate.cfg.Configuration.buildMappings(Configuration.java:1115)
        at org.hibernate.ejb.Ejb3Configuration.buildMappings(Ejb3Configuration.java:1233)
        at org.hibernate.ejb.EventListenerConfigurator.configure(EventListenerConfigurator.java
:154)
        at org.hibernate.ejb.Ejb3Configuration.configure(Ejb3Configuration.java:869)
        at org.hibernate.ejb.Ejb3Configuration.configure(Ejb3Configuration.java:407)
        at org.hibernate.ejb.HibernatePersistence.createContainerEntityManagerFactory(HibernatePersistence.java:126) 
```

我使用休眠 3.2.6.ga，休​​眠实体管理器 3.3.1.ga。

为什么我会收到此错误？我的映射是否正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T12:38:21.740

当父实体中的 id 列是“AA_ID”时，您的 referencedColumnName 指的是“ENTITY_ID”。我认为将其更改为“AA_ID”可以解决您的问题。从 Hibernate 给出的异常来看，它似乎在引用 AA_ID 的连接列中默认，然后也使用您定义的那个。然后异常说它**没有**映射到单个属性。

```
@OneToOne(fetch = FetchType.LAZY)
@JoinColumn(name = "CODE", referencedColumnName = "AA_ID", insertable = false,     updatable = false)
private Child1 child1; 
```

# android - 在 startActivityForResult 返回后隐藏调用活动？

> ID：12817674
> 
> 赞同：0
> 
> 时间：2012-10-10T10:54:26.710
> 
> 标签：android, android-activity

我有一个关于`startActivityForResult`方法的问题：

我有 3 个活动：A、B 和 C。A 开始`startActivityForResult`启动 B，然后 B 会将结果返回给 A。如果 resultCode 正常，A 将启动 C。如下图所示：

![在此处输入图像描述](../Images/0ec5e2aaefcb93c7d22c39029c04152b.png)

根据我在运行 Android 2.3.x 的设备上的测试，它总是在 C 启动之前的短时间内显示活动 A。但是对于运行 4.x 的设备，活动 A 不会出现。

那么，有没有办法在 B 返回结果后隐藏 A 显示呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T11:44:07.113

以您的相机示例为例，我将这样做：

`A`开始。

`A`打开. `B`_`startActivity`

如果成功拍摄了照片（您签入`B`），请将其发送到`C`，如果没有，

`finish()`并返回`A`。

因此，您需要做的就是将验证步骤移至`B`. 我认为菜单没有理由验证这一点。

# entity-framework-4 - 部署和代码优先

> ID：12817676
> 
> 赞同：1
> 
> 时间：2012-10-10T10:54:35.163
> 
> 标签：entity-framework-4, ef-code-first

我首先为我当前的项目使用实体框架代码，并且对部署有点紧张。我如何确保实时环境中的数据库中的数据不会被第一个部署之后的部署覆盖。此外，如何管理表更改？换句话说，当列被添加、删除、重命名和其他类似的变化时会发生什么？

谢谢，

萨钦

# android - 安卓签名？

> ID：12817679
> 
> 赞同：0
> 
> 时间：2012-10-10T10:54:42.130
> 
> 标签：android

在我的 android 应用程序中，用户在我的应用程序的表单中进行签名。签名必须是编辑、清除、保存。我确实保存并清除。但编辑不起作用我使用了下面的代码

```
mContent = (LinearLayout) findViewById(R.id.linearLayout);
mSignature = new signature(this, null);
mSignature.setBackgroundColor(Color.WHITE);
mContent.addView(mSignature, LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT);
mClear = (Button)findViewById(R.id.clear);
mGetSign = (Button)findViewById(R.id.getsign);
mGetSign.setEnabled(false);
mCancel = (Button)findViewById(R.id.cancel);
mView = mContent;

mClear.setOnClickListener(new OnClickListener() 
    {        
        public void onClick(View v) 
        {
            Log.v("log_tag", "Panel Cleared");

            mSignature.clear();
            mGetSign.setEnabled(false);
        }
    });

    mGetSign.setOnClickListener(new OnClickListener() 
    {        
        public void onClick(View v) 
        {
            Log.v("log_tag", "Panel Saved");

                mView.setDrawingCacheEnabled(true);
                mSignature.save(mView);
                Bundle b = new Bundle();
                b.putString("status", "done");
                b.putParcelable("data", mBitmap);
                Intent intent = new Intent();
                intent.putExtras(b);
                setResult(RESULT_OK,intent);   
                finish();
            }

    });

    mCancel.setOnClickListener(new OnClickListener() 
    {        
        public void onClick(View v) 
        {
            Log.v("log_tag", "Panel Canceled");
            Bundle b = new Bundle();
            b.putString("status", "cancel");
            Intent intent = new Intent();
            intent.putExtras(b);
            setResult(RESULT_OK,intent);  
            finish();
        }
    });

}

@Override
protected void onDestroy() {
    Log.w("GetSignature", "onDestory");
    super.onDestroy();
}

public class signature extends View 
    {
        private static final float STROKE_WIDTH = 5f;
        private static final float HALF_STROKE_WIDTH = STROKE_WIDTH / 2;
        private Paint paint = new Paint();
        private Path path = new Path();

        private float lastTouchX;
        private float lastTouchY;
        private final RectF dirtyRect = new RectF();

        public signature(Context context, AttributeSet attrs) 
        {
            super(context, attrs);
            paint.setAntiAlias(true);
            paint.setColor(Color.BLACK);
            paint.setStyle(Paint.Style.STROKE);
            paint.setStrokeJoin(Paint.Join.ROUND);
            paint.setStrokeWidth(STROKE_WIDTH);
        }

        public void save(View v) 
        {
            Log.v("log_tag", "Width: " + v.getWidth());
            Log.v("log_tag", "Height: " + v.getHeight());

            if(mBitmap == null)
            {
                mBitmap =  Bitmap.createBitmap (mContent.getWidth(), mContent.getHeight(), Bitmap.Config.RGB_565);;

            }

            Canvas canvas = new Canvas(mBitmap);

            try
            {
                FileOutputStream mFileOutStream = new FileOutputStream(mypath);

                v.draw(canvas); 
                mBitmap.compress(Bitmap.CompressFormat.PNG, 90, mFileOutStream); 

                mFileOutStream.flush();
                mFileOutStream.close();

               // String url = Images.Media.insertImage(getContentResolver(), mBitmap, "title", null);
               // Log.v("log_tag","url: " + url);
                //In case you want to delete the file
                //boolean deleted = mypath.delete();
                //Log.v("log_tag","deleted: " + mypath.toString() + deleted);
                //If you want to convert the image to string use base64 converter

            }
            catch(Exception e) 
            { 
                Log.v("log_tag", e.toString()); 
            } 
        }

        public void clear() 
        {
            path.reset();
          invalidate();
        }

        @Override
        protected void onDraw(Canvas canvas) 
        {
            canvas.drawPath(path, paint);
        }

        @Override
        public boolean onTouchEvent(MotionEvent event) 
        {
            float eventX = event.getX();
            float eventY = event.getY();
            mGetSign.setEnabled(true);

            switch (event.getAction()) 
            {
            case MotionEvent.ACTION_DOWN:
                path.moveTo(eventX, eventY);
                lastTouchX = eventX;
                lastTouchY = eventY;
                return true;

            case MotionEvent.ACTION_MOVE:

            case MotionEvent.ACTION_UP:

                resetDirtyRect(eventX, eventY);
                int historySize = event.getHistorySize();
                for (int i = 0; i < historySize; i++) 
                {
                    float historicalX = event.getHistoricalX(i);
                    float historicalY = event.getHistoricalY(i);
                    expandDirtyRect(historicalX, historicalY);
                    path.lineTo(historicalX, historicalY);
                }
                path.lineTo(eventX, eventY);
                break;

            default:
                debug("Ignored touch event: " + event.toString());
                return false;
            }

            invalidate((int) (dirtyRect.left - HALF_STROKE_WIDTH),
                    (int) (dirtyRect.top - HALF_STROKE_WIDTH),
                    (int) (dirtyRect.right + HALF_STROKE_WIDTH),
                    (int) (dirtyRect.bottom + HALF_STROKE_WIDTH));

            lastTouchX = eventX;
            lastTouchY = eventY;

            return true;
        }

        private void debug(String string){
        }

        private void expandDirtyRect(float historicalX, float historicalY) 
        {
            if (historicalX < dirtyRect.left) 
            {
                dirtyRect.left = historicalX;
            } 
            else if (historicalX > dirtyRect.right) 
            {
                dirtyRect.right = historicalX;
            }

            if (historicalY < dirtyRect.top) 
            {
                dirtyRect.top = historicalY;
            } 
            else if (historicalY > dirtyRect.bottom) 
            {
                dirtyRect.bottom = historicalY;
            }
        }

        private void resetDirtyRect(float eventX, float eventY) 
        {
            dirtyRect.left = Math.min(lastTouchX, eventX);
            dirtyRect.right = Math.max(lastTouchX, eventX);
            dirtyRect.top = Math.min(lastTouchY, eventY);
            dirtyRect.bottom = Math.max(lastTouchY, eventY);
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T10:22:21.430

可能这个自定义视图会有所帮助。在您的 XML 中，只需使用`me.other.SignatureView`

```
package me.other;

import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Path;
import android.os.SystemClock;
import android.util.AttributeSet;
import android.view.MotionEvent;
import android.view.View;

/**
 * A simple view to capture a path traced onto the screen. Initially intended to be used to captures signatures.
 * 
 * @author Andrew Crichton
 * @version 0.1
 */
public class SignatureView extends View {
    @SuppressWarnings("unused")
    private Path mPath;
    private Paint mPaint; 
    private Paint bgPaint = new Paint(Color.TRANSPARENT);

    private Bitmap mBitmap;
    private Canvas mCanvas;

    private float curX, curY;

    private static final int TOUCH_TOLERANCE = 4;
    private static final int STROKE_WIDTH = 4;

    public SignatureView(Context context) {
        super(context);
        init();
    }
    public SignatureView(Context context, AttributeSet attrs) {
        super(context, attrs);
        init();
    }
    public SignatureView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        init();
    }
    private void init() {
        setFocusable(true);
        mPath = new Path();
        mPaint = new Paint(Paint.ANTI_ALIAS_FLAG);
        mPaint.setColor(Color.WHITE);
        mPaint.setStyle(Paint.Style.STROKE);
        mPaint.setStrokeWidth(STROKE_WIDTH);
    }
    public void setSigColor(int color) {
        mPaint.setColor(color);
    }
    public void setSigColor(int a, int red, int green, int blue) {
        mPaint.setARGB(a, red, green, blue);
    }
    public boolean clearSignature() {
        if (mBitmap != null)
            createFakeMotionEvents();
        if (mCanvas != null) {
            mCanvas.drawColor(Color.BLACK);
            mCanvas.drawPaint(bgPaint);
            mPath.reset();
            invalidate();
        }
        else {
            return false;
        }
        return true;
    }
    public Bitmap getImage() {
        return this.mBitmap;
    }
    public void setImage(Bitmap bitmap) {
        this.mBitmap = bitmap;
        this.invalidate();
    }
    @Override
    protected void onSizeChanged(int width, int height, int oldWidth, int oldHeight) {
        int bitmapWidth = mBitmap != null ? mBitmap.getWidth() : 0;
        int bitmapHeight = mBitmap != null ? mBitmap.getWidth() : 0;
        if (bitmapWidth >= width && bitmapHeight >= height) 
            return;
        if (bitmapWidth < width) 
            bitmapWidth = width;
        if (bitmapHeight < height) 
            bitmapHeight = height;
        Bitmap newBitmap = Bitmap.createBitmap(bitmapWidth, bitmapHeight, Bitmap.Config.ARGB_8888);
        Canvas newCanvas = new Canvas();
        newCanvas.setBitmap(newBitmap);
        if (mBitmap != null) 
            newCanvas.drawBitmap(mBitmap, 0, 0, null);
        mBitmap = newBitmap;
        mCanvas = newCanvas;
    }
    private void createFakeMotionEvents() {
        MotionEvent downEvent = MotionEvent.obtain(SystemClock.uptimeMillis(),SystemClock.uptimeMillis()+100, MotionEvent.ACTION_DOWN, 1f, 1f ,0);
        MotionEvent upEvent = MotionEvent.obtain(SystemClock.uptimeMillis(),SystemClock.uptimeMillis()+100, MotionEvent.ACTION_UP, 1f, 1f ,0);
        onTouchEvent(downEvent);
        onTouchEvent(upEvent);
    }
    @Override
    protected void onDraw(Canvas canvas) {
        canvas.drawColor(Color.BLACK);
        canvas.drawBitmap(mBitmap, 0, 0, mPaint); 
        canvas.drawPath(mPath, mPaint);
    }
    @Override
    public boolean onTouchEvent(MotionEvent event) {
        float x = event.getX();
        float y = event.getY();

        switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
            touchDown(x, y);
            break;
        case MotionEvent.ACTION_MOVE:
            touchMove(x, y);
            break;
        case MotionEvent.ACTION_UP:
            touchUp();
            break;
        }
        invalidate();
        return true;
    }
    /**----------------------------------------------------------
     * Private methods
     **---------------------------------------------------------*/

    private void touchDown(float x, float y) {
        mPath.reset();
        mPath.moveTo(x, y);
        curX = x;
        curY = y;
    }

    private void touchMove(float x, float y) {
        float dx = Math.abs(x - curX);
        float dy = Math.abs(y - curY);
        if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) {
            mPath.quadTo(curX, curY, (x + curX)/2, (y + curY)/2);
            curX = x;
            curY = y;
        }
    }

    private void touchUp() {
        mPath.lineTo(curX, curY);
        if (mCanvas == null) {
            mCanvas = new Canvas();
            mCanvas.setBitmap(mBitmap);
        }
        mCanvas.drawPath(mPath, mPaint);
        mPath.reset();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-03T18:19:06.350

我使用了这个库：com.github.gcacace:signature-pad:1.2.1 有了这个我能够清除并保存签名。如果它也支持编辑，则未尝试过。

# mysql - Rails 对两个关联模型的复杂搜索条件

> ID：12817681
> 
> 赞同：1
> 
> 时间：2012-10-10T10:54:43.330
> 
> 标签：mysql, ruby, ruby-on-rails-3, associations, range

好的。所以我有一个 Vehicle 模型和 Schedule 模型。车辆`has_many :schedules`（时间表`belongs_to :vehicle`）。时间表具有以下结构：

```
id | (date)from_date | (date)to_date | (bool)available | (int)vehicle_id 
```

用户指定天数范围：`from_date`并且`to_date`我需要退回所有**可用天数的车辆**

示例（为简单起见，只有一辆车）：

```
[
  (id: 1, from_date: "10/10/2012", to_date: "13/10/2012, available: true, vehicle_id: 1),
  (id: 2, from_date: "14/10/2012", to_date: "15/10/2012", available: true, vehicle_id: 1),
  (id: 3, from_date: "16/10/2012", to_date: "20/10/2012", available: false, vehicle_id: 1)
] 
```

- 测试查询：

1) `from_date: "12/10/2012", to_date: "15/10/2012"`, => 结果：车辆

2) `from_date: "11/10/2012", to_date: "17/10/2012"`, => result: [] （因为 16.10 和 17.10*不可*用）

3) `from_date: "01/11/2012", to_date: "30/11/2012"`, => 结果：车辆（如果日期范围内没有一天在日程表列表中 - 车辆仍然返回（认为可用）。所以唯一的例外 - 如果范围内的任何一天恰好不是**可用**的 - 车辆应该被拒绝）

如何实现？对不起，如果它太复杂了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T12:14:46.227

这是使用范围的一种简单方法：

```
# schedule.rb

scope :unavailable, where(available: false)

def self.between(from_date, to_date)
  where "from_date <= ? AND to_date >= ?", to_date, from_date
end

# vehicle.rb

def self.available_between(from_date, to_date)
  id_not_in Schedule.unavailable.between(from_date, to_date).map(&:vehicle_id)   
end

def self.id_not_in(ids)
  return all if ids.empty?
  where "id NOT IN (?)", ids
end 
```

然后你可以打电话`Vehicle.available_between "2012-10-12", "2012-10-15"`

这取决于两个观察结果：

*   可用的时间表无关紧要。只需找到标记为不可用的时间表，然后找到与这些时间表无关的*所有车辆。*

*   您可以通过检查以下是否为真来测试两个日期范围 A 和 B 是否重叠

    *   A的开始日期在B的结束日期*之前*
    *   A 的结束日期在 B 的开始日期*之后*

注意我在范围内使用了 Ruby 1.9 语法`unavailable`，如果您使用的是 1.8，则需要更改`available: false`为`:available => false`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T11:41:14.937

```
# for each vehicle find all the rows where vehicle is available for given dates
available_schedules = Schedule.where("vehicle_id = ? and from_date <= ? and to_date >= ? and available = ?",vehicle_id,from_date,to_date,true)

# start by assuming that schedule hasn't been found
schedule_found = false

# for each date in you range check all the available schedules if there is one matching your date. 
# If you find a single schedule set schedule_found flag to true and break from loop else loop through all the available schedules.
# Now if schedule_found is true then make it false (to be used by next date) else return [] as per your requirement.  
(from_date..to_date).each do |dt|
    available_schedules.each do |schedule|
            if schedule.from_date <= dt and schedule.to_date >= dt
                    schedule_found = true
                    break
            end
    end

    if schedule_found
            schedule_found = false
    else
            return []
    end
end

# If your code manages to reach here then it means all the dates in range have an available schedule, so just return Vehicle object
return Vehicle.find(vehicle_id) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T12:07:29.490

尝试找到一个不满足超出可用性范围的条件的时间表组..如果你找不到一个..那是你的赢家

警告：未经测试

```
``v = Vehicle.join(:schedules).where('vehicles.id not in (select vehicle_id from schedules where schedules.from_date > :date and schedules.to_date < :date)', :date => date)``
```

# insert - 如何将单个文本框中的多个值插入数据库中的不同行？

> ID：12817685
> 
> 赞同：1
> 
> 时间：2012-10-10T10:55:00.250
> 
> 标签：insert, bulkinsert

我在单个文本框中有两个值，例如 1,2 ... 现在我想将这两个值插入到 oracle DB 中的不同行中，即在同一列中但在不同行中。我该怎么做呢？

# jquery - 在网站上使用嵌入式播放器流式传输 m3u

> ID：12817687
> 
> 赞同：2
> 
> 时间：2012-10-10T10:55:10.557
> 
> 标签：jquery, html, m3u

由于 HTML5 或 Jquery，我想知道现在在网站上使用嵌入式播放器流式传输 m3u 的最佳方式是什么。我想避免闪光。

我也很感激在我的网站上添加这个播放器的教程：

目前我有一个[http://78.xxx.xxx.xx:8000/listen.m3u](http://78.xxx.xxx.xx:8000/listen.m3u)和一个 html 页面。

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-11T04:35:30.050

## 试试这个：

JQuery Playlist Plugin - 音频和视频标签的播放列表支持。

HTML5 音频和视频标签不处理 m3u 等媒体播放列表。该插件旨在提供一种播放列表解析机制，该机制将为音频/视频标签提供它们可以处理的单个媒体文件。还提供了通过播放列表中包含的文件的有限导航。

[https://github.com/aitorciki/jquery-playlist](https://github.com/aitorciki/jquery-playlist)

# scala - Scala：将抽象类作为对象，在普通类中声明时可以更改

> ID：12817688
> 
> 赞同：0
> 
> 时间：2012-10-10T10:55:12.847
> 
> 标签：scala, inheritance, abstract-class

例如我有这个代码：

```
abstract class A {
  def functionA() {
    val a : A = null; // take null just for temporary, because I cannot think what should to put here
    a.functionB
  }

  def functionB() {
      print("hello")
  }
}

class C extends A{
}

object Main extends App {
  val c : C = new C()
  c.functionB // print hello
  c.functionA // ERROR
} 
```

在`functionA`，我想声明一个对象以防万一：如果当前类是 C，a 将具有 C 类型。如果当前类是 D，a 将具有 D 类型。因为我不能这样做：

```
val a : A = new A // because A is abstract 
```

在 Java 中，我可以轻松地做到这一点，但在 Scala 中我不能这样做。请帮帮我。

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T12:48:20.767

> 我想声明一个对象以防万一：如果当前类是 C，a 将具有 C 类型。如果当前类是 D，a 将具有 D 类型

如果我理解正确，您说的是简单的继承多态性。您可以在您的案例中分配对value 的`this`引用，或者直接使用它：`a`

```
abstract class A {
  def functionA {
    this.functionB
  }

  def functionB {
    print("hello")
  }
}

class C extends A{
}

object Main extends App {
  val c : C = new C()
  c.functionB
  c.functionA
} 
```

在这种情况下，将没有`NullPointerException`.

但是，如果您真的想在基类中创建真实类型的*新*对象，则应该以其他方式使用继承多态性（我认为这比@brunoconde 建议的要简单一些，但想法非常相似；我不认为这里真的需要泛型）：

```
abstract class A {
  def functionA {
    val a : A = create()
    a.functionB
  }

  def functionB {
    print("hello")
  }

  def create(): A
}

class C extends A {
  override def create() = new C
} 
```

如果必须，这就是我在 Java 中所做的。但是，您必须`create()`在每个子类中覆盖方法。我怀疑是否有可能在不诉诸反思的情况下不覆盖而做到这一点。

# ssas - 性能点：改变分解树某一项的宽度

> ID：12817689
> 
> 赞同：1
> 
> 时间：2012-10-10T10:55:21.210
> 
> 标签：ssas, performancepoint

我需要扩展分解树 silverlight 控件上的项目的宽度。

SSAS 多维数据集中的名称需要显示在分解树上，而无需在将鼠标悬停在项目上方时查看详细信息。

有没有办法将项目的宽度设置为固定值或窗口的百分比？

如果不能，您可以使用现有库并扩展其代码通过 Visual Studio 项目更改控件吗？

更新：尝试了以下

1.  解压分解树.xap
2.  在 .Net Reflector 上打开 DecompositionTree Core
3.  使用 Reflexil 将 Node.xaml 宽度选项更改为 100 而不是 120
4.  重新打包为 .xap 并上传。分解树停止工作
5.  在同一个 xap 上重复 1-4 以将值更改回 120，一切正常。分解树又开始工作了！！！

# c# - 在 Outlook 2010 中枚举“sendas”权限

> ID：12817692
> 
> 赞同：1
> 
> 时间：2012-10-10T10:55:31.990
> 
> 标签：c#, outlook

我正在开发 Outlook 2010 插件，需要向用户提供他们拥有 sendas 权限的帐户列表。OOTB，当您创建新邮件时，您可以更改“发件人”地址，并且您会获得一个漂亮整洁的列表，其中列出了您有权发送的所有帐户。我基本上需要能够使用 c# 获取该列表，并且无法找到它可能在哪里。

有任何想法吗？

# c# - 添加之前检查对象是否已存在于列表中

> ID：12817694
> 
> 赞同：2
> 
> 时间：2012-10-10T10:55:33.860
> 
> 标签：c#, list

我正在开发具有 . `net 2.0`作为框架。我有一个类的列表，我想在将它添加到列表之前检查对象是否已经存在。我知道我可以使用`.Any`linq 来做到这一点，但它在我的情况下不起作用。我不能使用`.contains`，因为该对象将不一样，因为它有很多属性，所以我留下了一个独特的属性来检查它是否已经添加，但它不起作用代码：

```
bool alreadyExists = exceptionsList.Exists(item =>
       item.UserDetail == ObjException.UserDetail    
    && item.ExceptionType != ObjException.ExceptionType) ; 
```

我的课

```
public class AddException
    {
        public string  UserDetail{ get; set; }
        public string  Reason { get; set; }
        public Enumerations.ExceptionType ExceptionType { get; set; }

    }
    public class Enumerations
    {
        public enum ExceptionType
        {
            Members = 1,
            Senders =2
        }
    } 
```

初始情况

```
AddException objException = new AddException
                {
                    Reason = "test",
                    UserDetail = "Ankur",
                    ExceptionType = 1
                }; 
```

此对象已添加到列表中。

第二次

```
AddException objException = new AddException
                {
                    Reason = "test 1234",
                    UserDetail = "Ankur",
                    ExceptionType = 1
                }; 
```

这不应该被添加到列表中，但是`.Exist`检查失败并且它被添加到列表中。

有什么建议么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T10:58:48.127

[`Exists`](http://msdn.microsoft.com/en-us/library/bfed8bca%28v=vs.80%29.aspx)已经返回`bool`而不是对象，因此最后的空检查不起作用。

```
bool alreadyExists = exceptionsList.Exists(item =>
        item.UserDetail == ObjException.UserDetail
     && item.ExceptionType == ObjException.ExceptionType
); 
```

重要的是，你必须改变

```
item.ExceptionType != ObjException.ExceptionType 
```

到

```
item.ExceptionType == ObjException.ExceptionType 
```

`UserDetail`因为您想知道是否有与 和相等的项目`ExceptionType`。

另请注意，您不应`Enums`使用它们的 int 值进行初始化。所以改变

```
AddException objException = new AddException
{
    Reason = "test 1234",
    UserDetail = "Ankur",
    ExceptionType = 1
}; 
```

到

```
AddException objException = new AddException
{
    Reason = "test 1234",
    UserDetail = "Ankur",
    ExceptionType = Enumerations.ExceptionType.Members
}; 
```

（顺便说一句，那甚至不应该编译）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T10:58:10.430

您可以使用 .Contains 方法，但您需要为您的对象实现 Equal 方法。

检查此链接：

[http://msdn.microsoft.com/en-us/library/bhkz42b3.aspx](http://msdn.microsoft.com/en-us/library/bhkz42b3.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T11:00:28.983

试试这个

```
bool alreadyExists = exceptionsList.Exists(item => item.UserDetail == ObjException.UserDetail && item.ExceptionType != ObjException.ExceptionType); 
```

存在返回 bool

# mysql - 带有 Mac OS X 和 mysql2 的 Rails - LoadError: dlsym symbol not found

> ID：12817696
> 
> 赞同：0
> 
> 时间：2012-10-10T10:55:37.380
> 
> 标签：mysql, ruby, macos

我从官方网站安装了 mysql 5.1.61。它已被编译和安装，但现在当我尝试运行简单`rake db:migrate`时，它显示这样的错误

```
Connecting to {:password=>nil, :encoding=>"utf8", :database=>"mnemosyne_spec", :host=>"localhost", :username=>"root", :adapter=>"mysql2"}
rake aborted!
LoadError: dlsym(0x7faaf9048bf0, Init_mysql2): symbol not found - /Users/serg/.rvm/gems/ruby-1.8.7-p370@mnemosyne/gems/mysql2-0.3.11/lib/mysql2/mysql2.bundle

Tasks: TOP => db:migrate 
```

完整跟踪：

```
** Invoke db:migrate (first_time)
** Execute db:migrate
Connecting to {:password=>nil, :encoding=>"utf8", :database=>"mnemosyne_spec", :host=>"localhost", :username=>"root", :adapter=>"mysql2"}
rake aborted!
LoadError: dlsym(0x7fafa1d30510, Init_mysql2): symbol not found - /Users/serg/.rvm/gems/ruby-1.8.7-p370@mnemosyne/gems/mysql2-0.3.11/lib/mysql2/mysql2.bundle
/Users/serg/.rvm/gems/ruby-1.8.7-p370@mnemosyne/gems/mysql2-0.3.11/lib/mysql2/mysql2.bundle
/Users/serg/.rvm/gems/ruby-1.8.7-p370@mnemosyne/gems/mysql2-0.3.11/lib/mysql2.rb:9
/Users/serg/.rvm/gems/ruby-1.8.7-p370@mnemosyne/gems/sequel-3.39.0/lib/sequel/adapters/mysql2.rb:1:in `require'
/Users/serg/.rvm/gems/ruby-1.8.7-p370@mnemosyne/gems/sequel-3.39.0/lib/sequel/adapters/mysql2.rb:1
/Users/serg/.rvm/gems/ruby-1.8.7-p370@mnemosyne/gems/sequel-3.39.0/lib/sequel/core.rb:379:in `k_require'
/Users/serg/.rvm/gems/ruby-1.8.7-p370@mnemosyne/gems/sequel-3.39.0/lib/sequel/core.rb:379:in `tsk_require'
/Users/serg/.rvm/gems/ruby-1.8.7-p370@mnemosyne/gems/sequel-3.39.0/lib/sequel/core.rb:100:in `check_requiring_thread'
/Users/serg/.rvm/gems/ruby-1.8.7-p370@mnemosyne/gems/sequel-3.39.0/lib/sequel/core.rb:97:in `synchronize'
/Users/serg/.rvm/gems/ruby-1.8.7-p370@mnemosyne/gems/sequel-3.39.0/lib/sequel/core.rb:97:in `check_requiring_thread'
/Users/serg/.rvm/gems/ruby-1.8.7-p370@mnemosyne/gems/sequel-3.39.0/lib/sequel/core.rb:379:in `tsk_require'
/Users/serg/.rvm/gems/ruby-1.8.7-p370@mnemosyne/gems/sequel-3.39.0/lib/sequel/database/connecting.rb:25:in `adapter_class'
/Users/serg/.rvm/gems/ruby-1.8.7-p370@mnemosyne/gems/sequel-3.39.0/lib/sequel/database/connecting.rb:67:in `connect'
/Users/serg/.rvm/gems/ruby-1.8.7-p370@mnemosyne/gems/sequel-3.39.0/lib/sequel/core.rb:147:in `connect'
/Users/serg/rails_projects_terminal/brandspotter/mnemosyne/lib/mnemosyne.rb:52:in `db_connect!'
/Users/serg/rails_projects_terminal/brandspotter/mnemosyne/lib/mnemosyne.rb:32:in `configure'
/Users/serg/rails_projects_terminal/brandspotter/mnemosyne/lib/mnemosyne.rb:25:in `initialize!'
/Users/serg/rails_projects_terminal/brandspotter/mnemosyne/lib/mnemosyne/database_tasks.rb:21:in `initialize'
/Users/serg/rails_projects_terminal/brandspotter/mnemosyne/lib/mnemosyne/database_tasks.rb:83:in `initialize'
/Users/serg/rails_projects_terminal/brandspotter/mnemosyne/Rakefile:63:in `new'
/Users/serg/rails_projects_terminal/brandspotter/mnemosyne/Rakefile:63
/Users/serg/.rvm/gems/ruby-1.8.7-p370@global/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
/Users/serg/.rvm/gems/ruby-1.8.7-p370@global/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `execute'
/Users/serg/.rvm/gems/ruby-1.8.7-p370@global/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
/Users/serg/.rvm/gems/ruby-1.8.7-p370@global/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
/Users/serg/.rvm/gems/ruby-1.8.7-p370@global/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `invoke_with_call_chain'
/Users/serg/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/monitor.rb:242:in `synchronize'
/Users/serg/.rvm/gems/ruby-1.8.7-p370@global/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/Users/serg/.rvm/gems/ruby-1.8.7-p370@global/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
/Users/serg/.rvm/gems/ruby-1.8.7-p370@global/gems/rake-0.9.2.2/lib/rake/application.rb:116:in `invoke_task'
/Users/serg/.rvm/gems/ruby-1.8.7-p370@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `top_level'
/Users/serg/.rvm/gems/ruby-1.8.7-p370@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each'
/Users/serg/.rvm/gems/ruby-1.8.7-p370@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `top_level'
/Users/serg/.rvm/gems/ruby-1.8.7-p370@global/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/Users/serg/.rvm/gems/ruby-1.8.7-p370@global/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level'
/Users/serg/.rvm/gems/ruby-1.8.7-p370@global/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `run'
/Users/serg/.rvm/gems/ruby-1.8.7-p370@global/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/Users/serg/.rvm/gems/ruby-1.8.7-p370@global/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
/Users/serg/.rvm/gems/ruby-1.8.7-p370@global/gems/rake-0.9.2.2/bin/rake:33
/Users/serg/.rvm/gems/ruby-1.8.7-p370@global/bin/rake:19:in `load'
/Users/serg/.rvm/gems/ruby-1.8.7-p370@global/bin/rake:19
/Users/serg/.rvm/gems/ruby-1.8.7-p370@mnemosyne/bin/ruby_noexec_wrapper:14
Tasks: TOP => db:migrate 
```

我试图重新安装 ruby​​ 和 gems 并没有改变。我能做些什么来解决这个问题？

我的资料：

```
Mac OS X 10.8.2 Mountain Lion
Xcode 4.5.1
osx-gcc-installer
Mysql  Ver 14.14 Distrib 5.1.61, for apple-darwin10.3.0 (i386) using readline 5.1
RVM 1.16.10 
```

PS我从自制软件安装mysql没有这样的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T12:21:14.950

我创立了解决方案！

问题出在 MySQL 安装中。它是 x86，对于 Mac OS X 10.7 + 是不正确的。

1）所以，首先我们应该删除旧版本的 MySQL：

```
$ sudo rm /usr/local/mysql
$ sudo rm -rf /usr/local/mysql*
$ sudo rm -rf /Library/StartupItems/MySQLCOM
$ sudo rm -rf /Library/PreferencePanes/My*
$ sudo rm -rf /Library/Receipts/mysql*
$ sudo rm -rf /Library/Receipts/MySQL*
$ sudo rm -rf /var/db/receipts/com.mysql.* 
```

1.1）在那次运行之后

```
$ nano /etc/hostconfig 
```

并删除线

```
MYSQLCOM=-YES- 
```

2）为了确保一切正常，您至少可以删除 mysql gem：

```
$ gem uninstall mysql2 
```

或者您可以通过 rvm 删除 gemset 中的所有 gem：

```
$ rvm gemset empty your-gemset-name 
```

3）然后安装**x64 MySQL版本**。

4）并通过捆绑器安装所有缺少的宝石：

```
$ bundle 
```

# java - Hibernate SessionFactory getCurrentSession 在没有活动事务的情况下无效

> ID：12817698
> 
> 赞同：1
> 
> 时间：2012-10-10T10:55:41.680
> 
> 标签：java, hibernate

我在 Hibernate 中面临一个问题。这是代码。

```
 Configuration cfg = new Configuration().configure();
    SessionFactory factory = cfg.buildSessionFactory();
    Session session = factory.openSession();

    Transaction trans = session.beginTransaction();
    trans.begin();
    Session session2 = factory.getCurrentSession();
    System.out.println(session2.isConnected());

    trans.commit(); 
```

在我的 cfg 文件中

```
 <session-factory>
    <property name="hibernate.connection.driver_class">com.microsoft.sqlserver.jdbc.SQLServerDriver</property>
    <property name="hibernate.connection.url">jdbc:sqlserver://localhost:1433</property>
    <property name="hibernate.connection.username">username</property>
    <property name="connection.password">password</property>
    <property name="connection.pool_size">5</property>
    <property name="hibernate.dialect">org.hibernate.dialect.SQLServerDialect</property>
    <property name="hibernate.current_session_context_class">thread</property>
    <property name="show_sql">true</property>
    <property name="hbm2ddl.auto">false</property>
    <mapping resource="Test.hbm.xml"/>
</session-factory> 
```

当我使用上面的代码运行应用程序时，它给了我一个异常说“org.hibernate.HibernateException：isConnected is not valid without active transaction”

我不知道它在内部执行什么行为。请有任何想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T11:05:03.360

如果您查看[SessionFactory.html#getCurrentSession的 Java 文档](http://www.dil.univ-mrs.fr/~massat/docs/hibernate-3.1/api/org/hibernate/SessionFactory.html#getCurrentSession%28%29)

> 获取当前会话。确切的“当前”含义的定义由配置为使用的 CurrentSessionContext impl 控制。

所以你`session`和`session2`是两个不同的会话。所以你必须开始交易`session2`才能访问`isConnected()`。

但是，如果您曾经 `getCurrentSession()`检索第一个会话，那么第二次`getCurrentSession()`将返回相同的实例。

```
Session session = factory.getCurrentSession();//Use getCurrentSession rather than openSession
Transaction trans = session.beginTransaction();
trans.begin();

Session session2 = factory.getCurrentSession();//Same session will be returned.

System.out.println(session2.isConnected());
trans.commit(); 
```

# arrays - 如何将一系列列值存储在二维数组中

> ID：12817700
> 
> 赞同：2
> 
> 时间：2012-10-10T10:55:47.357
> 
> 标签：arrays, excel

我使用下面的代码来完成 aove 任务：

```
Dim Arr(2,150)

Arr(0)=objsheet.Range("B16:B225").Value 
```

但我收到错误消息：“下标超出范围错误”。首先，这是在不使用任何循环的情况下复制单元格 ito 数组的方法，还是有其他方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T11:06:51.563

不，不是。

你需要：

```
Dim arr as Variant

arr = yourSheet.Range("B16:B225").value 
```

# jquery - 如何在 jQuery 中选择：#menu ul li:hover > ul？

> ID：12817705
> 
> 赞同：0
> 
> 时间：2012-10-10T10:56:05.783
> 
> 标签：jquery, hover, parent-child

如何在 jQuery 中选择等价的`#menu ul li:hover > ul`？

`li`当悬停仅在目标上时，我想更改框的颜色

有关更多详细信息，请参阅：http: [//jsfiddle.net/wGbwX/18/](http://jsfiddle.net/wGbwX/18/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T11:02:44.527

由于您`TARGET`在`a`标签中，您可以使用以下内容：

```
$('#menu > ul > li > a') 
```

这`>`是选择每个父母的直接孩子。然后最后将悬停事件绑定在`a`标签上而不是`li`.

在选择器中使用所有这些的原因`>`是选择器不会选择`a`TARGET 内的标签`li`。

**编辑：**

由于`HOME`链接不应触发悬停事件，您可以使用以下方法之一：
^(两者都将选择相同的项目，但逻辑不同。)

```
$('#menu>ul>li:gt(0) > a') 
```

[jsfiddle](http://jsfiddle.net/wGbwX/27/)。
这将使用[:gt](http://api.jquery.com/gt-selector/)选择器。

```
$('#menu>ul>li:not(:first) > a') 
```

[jsfiddle](http://jsfiddle.net/wGbwX/25/)。
虽然这是[:first](http://api.jquery.com/first-selector/)和[:not](http://api.jquery.com/not-selector/)的组合。jsfiddle。

**编辑2：**
好的，抱歉，现在我了解了问题的要求。

[Joel 的解决方案](https://stackoverflow.com/a/12817801/535122)有效，但如果您想在选择器中完成所有操作，您可以执行以下操作：

```
$('#menu > ul > li:has(ul) > a') 
```

[jsfiddle](http://jsfiddle.net/wGbwX/31/)。
这将使用[:has](http://api.jquery.com/has-selector/)选择器。我更喜欢这个解决方案，因为如果我需要稍后返回这段代码，或者其他人想查看代码，选择器的目标可以通过阅读它来轻松理解。

> 我正在选择一个包含等的`anchor`内部 a`list item``unordered list`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T11:02:21.820

您可以悬停嵌套 uls 的父级：

```
$('#menu ul > li >ul').parent().hover 
```

已编辑以反映 pebbl 对使用选择嵌套 li 的建议

更新了 JS 小提琴：http: [//jsfiddle.net/wGbwX/23/](http://jsfiddle.net/wGbwX/23/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T11:02:26.337

我认为这有效：

但仅适用于 jquery 1.4 及更高版本

$("#menu ul li ul li").hover(function(){});

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T11:01:35.250

试试这个：

```
$('#menu ul:first > li > a') 
```

更新[了小提琴](http://jsfiddle.net/wGbwX/24/)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T11:11:20.310

试试这个[演示](http://jsbin.com/ejazaz/7/edit)

```
$('#menu ul li a').hover(

    function(e) {
      change = $(this).parent().find(".sub-nav").length;
      if(change)
      {
        $('.toto').css({'background-color':'#cccccc'});
      }

    },
    function() { $('.toto').css({'background-color':'#f8f8f8'}); }
 ); 
```

# php - Internet Explorer 在加载 PHP 网页时返回错误：404？

> ID：12817707
> 
> 赞同：0
> 
> 时间：2012-10-10T10:56:21.623
> 
> 标签：php, html, internet-explorer, http-status-code-404

我的网站有一个 PHP 格式的登录页面，它在 PHP 代码下方包含用于显示网页的 HTML 代码，这在 Chrome 或 Firefox 中运行良好，但在 IE 中出现错误：

> 找不到网页

怎么了？在此之前，IE 显示格式错误的网页。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T11:14:52.243

页面是不是很小，内容不多？

当您在 Internet Explorer 中查看源代码时，您是否看到实际的页面内容？

该页面很可能返回 404 Not Found 标头。在这种情况下，如果页面内容很小，Internet Explorer 将显示它自己的错误消息，而不是页面内容。火狐等浏览器即使有错误信息也会显示页面内容。如果页面内容很大（我不记得所需的实际字节数），IE 也会如此。

我建议您使用 Firefox 的 Live HTTP Headers 插件，或其他一些方法来调查您的脚本返回的实际 HTTP Headers。

# jquery - 如何防止效果在jquery中重复出现？

> ID：12817713
> 
> 赞同：0
> 
> 时间：2012-10-10T10:56:52.087
> 
> 标签：jquery, hover

我在 jquery 中使用悬停功能有一个效果，问题是当鼠标离开元素时效果会重复。

当鼠标使元素水平而不是重复效果时，如何防止发生相同的效果？

效果是一个闪亮的图像，当鼠标悬停在另一个图像上时，这里是我的代码：

```
jQuery(document).ready(function() {    
 /* When a thumbnail is hovered over do shine */
$('.large_thumb').hover(function()
{
    $(this).find(".large_thumb_shine").stop().css("background-position","-99px 0");

    $(this).find(".large_thumb_shine").stop().animate({ backgroundPosition: '99px 0'},700); 

}); 
```

HTML：

```
<div class="large_thumb">
<img src="images/thumbnails/sample2.jpg" class="large_thumb_image" alt="thumb" />
<div class="large_thumb_shine"></div>
</div> 
```

CSS：

```
.large_thumb{
width:74px; height:74px;
border:solid black 2px;
}
img.large_thumb_image{
position:absolute;
}
.large_thumb_shine    {
width:74px; height:74px;
background:url(images/interface/shine.png) no-repeat;
position:absolute;
background-position:-99px 0;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T11:04:17.303

我认为您可以将第二个回调传递给`jQuery`'`hover`方法。

```
$('.element').hover(function(){
    // this will get executed when you hover the element

}, function() {
    // this will get executed when you leave the element
    // So, you can stop any effect here.

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T11:16:42.057

还要看看[.stop()](http://api.jquery.com/stop/)

要禁用某些元素的持续动画，您可以使用 .stop() 立即取消它。当多个动画在队列中时，它有时会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-27T04:49:20.123

迟到的回复，但根据[官方文档](http://api.jquery.com/hover/)进一步解释，`.hover()`绑定`.mouseenter()`和`.mouseleave()`处理程序。

因此，如果您希望仅在鼠标“进入”元素时出现效果，只需使用`.mouseenter()`代替`.hover()`.

# jquery - JS 树 - select_node 不工作

> ID：12817715
> 
> 赞同：7
> 
> 时间：2012-10-10T10:56:55.017
> 
> 标签：jquery, ajax, jstree

我对 JSTree 和 Ajax 有一个奇怪的问题。

我通过 Ajax/PHP 请求生成我的树，该请求使用...生成 HTML（带有 UL、LI、A 标签）

```
$.ajax({
    url: 'ajaxTreeView.php?method=edit&partid='+partId,
    cache: false,
    success: function(tree)
    {
        $('#treeViewer').html(tree);
    }}); 
```

并使用...激活代码上的 JStree

```
options = 
{
    "core": { animation: 120 },
    "themes": { theme: 'corral', dots: true },
    "types": 
    { 
        "types": 
        { 
            "parent": { "icon": { "image": "images/custom/Legend/node_select.png" } },
            "child": { "icon": { "image": "images/custom/Legend/node_select_child.png" } },
            "current": { "icon": { "image": "images/custom/Legend/node.png" } }
        }
    },
    "plugins": [ "html_data", "types", "themes", "ui", "contextmenu", "cookies" ],
    "ui": { "select_limit" : 1 },
    "cookies": { "save_selected" : false }
};

$("#tree").jstree(options); 
```

我似乎无法轻松选择节点。我尝试了initial_select，但这似乎不起作用，也不理想，因为我经常想以编程方式选择节点。

我尝试使用...

```
$('#tree').jstree("select_node", '#ref565', true); 
```

如果我通过超链接调用该函数，则此方法有效，但如果我在初始化 JStree 后调用它，则此方法无效。

我从添加警报中看到（所有这些都发生在 Ajax Success 例程中）......

```
$('#treeViewer').html(tree);
$("#tree").jstree(options);
alert('test');
$('#tree').jstree("select_node", '#ref565', true); 
```

...在警报开始之前树尚未呈现。

我添加了一个 setTimeOut ...

```
$('#treeViewer').html(tree);
$("#tree").jstree(options);
setTimeout(function() {selectNode(565);},1250);
$('#tree').jstree("select_node", '#ref565', true); 
```

...这行得通。

我显然是愚蠢的。我使用了错误的语法吗？为什么我必须设置延迟才能选择节点？

请帮忙。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-10T18:25:59.887

如果要在树加载后最初选择某些节点，则应该使用[ui](http://www.jstree.com/documentation/ui)插件的[`initially_select`](http://www.jstree.com/documentation/ui)选项。你说你试过了，但我没有看到你发布的示例代码中使用了它。您确定您提供了正确的 ID 吗？

要以编程方式选择节点，您需要先等待要选择的节点出现在 DOM 中。而不是使用超时回调，我猜绑定到`loaded.jstree`事件更正确，应该在树完成加载并且所有树元素都在 DOM 之后调用，并在那里进行编程选择。

显示用法的示例代码：

```
$(function () {

    $("#tree")
        .jstree({ 
            // List of active plugins
            "plugins" : [ 
                "ui"
            ],

            // UI & core - the nodes to initially select and open will be overwritten by the cookie plugin
            // the UI plugin - it handles selecting/deselecting/hovering nodes
            "ui" : {
                // this makes the node with ID node_4 selected onload
                "initially_select" : [ "#ref565" ]
            },
            // the core plugin - not many options here
            "core" : { 
                // just open those two nodes up
                // as this is an AJAX enabled tree, both will be downloaded from the server
                "initially_open" : [ "#ref565" ] 
            }
        })
        .bind("loaded.jstree", function (e, data) {
                  $('#tree').jstree("select_node", '#ref565', true); 
        }) 
}); 
```

# matrix - 修改矩阵的元素

> ID：12817717
> 
> 赞同：2
> 
> 时间：2012-10-10T10:56:59.447
> 
> 标签：matrix, wolfram-mathematica

我正在尝试这个但似乎不起作用：

```
A  = {{1,2},{3,4}}
A[[1]][[2]] = 5; 
```

我怎么能那样做？

目前我正在做

```
list = {3,5};
A[[2]] = list; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T12:07:17.350

你的代码是正确的，除了一个小错误:)

你写了：

```
A = {{1, 2}, {3, 4}}   A[[1]][[2]] = 5; 
                     ^
                     ^
                     |
               This space means
                multiplication! 
```

正确的代码是

```
A = {{1, 2}, {3, 4}} ;  A[[1]][[2]] = 5; 
```

通常写成：

```
 a = {{1, 2}, {3, 4}} ;  
    a[[1, 2]] = 5; 
```

请记住以小写字母开头标识符，因为大写字母是为系统名称保留的

# bundler - Nokogiri 已安装但在使用 nanoc 时未找到

> ID：12817724
> 
> 赞同：1
> 
> 时间：2012-10-10T10:57:15.953
> 
> 标签：bundler, nokogiri, rbenv, nanoc

我在使用 bundler 和 rbenv 的项目时遇到问题：

我在我的项目根目录中并输入

```
bundle install 
```

根据我的 Gemfile 安装所有捆绑包：

```
source 'http://rubygems.org'

gem 'rake', '~> 0.9.2'
gem 'nanoc', '~> 3.2.4'
gem 'sass', '~> 3.1.15'
gem 'coderay', '~> 1.0.5'
gem 'nokogiri', '~> 1.4.4'
gem 'yajl-ruby', '~> 0.8.2'
gem 'pygmentize', '~> 0.0.3'
gem 'coderay', '~> 1.0.5'
gem 'fssm', '~>0.2.9'
gem 'coderay_bash', '~>1.0.2'
gem 'kramdown', '~> 0.13.2'
gem 'htmlentities', '~> 4.3.1' 
```

这也声称要安装 nokogiri。但每当我跑步

```
nanoc compile 
```

我收到一条错误消息：

```
LoadError: cannot load such file -- nokogiri
Try installing the 'nokogiri' gem (`gem install nokogiri`) and then re-running the command. 
```

我已经尝试卸载 gem`gem uninstall nokogiri`并再次运行整个程序，但到目前为止没有任何效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T05:31:54.210

这很奇怪。据我所知，您的设置看起来是正确的。我没有立即看到解决方案，但也许删除 Gemfile.lock 并重新运行“捆绑安装”可能会解决问题。

**更新：**您是否安装了多个 nanoc 版本？可能是您正在使用的 nanoc 版本（因为它在 $PATH 中是第一个）不是`gem`from rbenv 安装的版本。是否切换到系统 ruby​​，卸载 nanoc gem，然后切换回 rbenv ruby​​ 修复 nanoc？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-18T10:16:31.030

我在编译 developer.github nonoc 页面时遇到了类似的问题。我的问题是我更改了*Gemfile*中的 ruby​​ 版本。然后我做的时候没有找到yajl `nanoc compile`。我的问题解决方案是删除*Gemfile*中依赖项之后指定的所有版本，然后执行以下操作：

```
bundle update 
```

有了新版本的 yajl、nokogiri 等，我可以毫无问题地运行`nanoc compile`。

# git - Git 权限错误似乎无缘无故开始发生

> ID：12817725
> 
> 赞同：2
> 
> 时间：2012-10-10T10:57:19.047
> 
> 标签：git

> **可能重复：**
> [Git Push 错误：将对象添加到存储库数据库的权限不足](https://stackoverflow.com/questions/6448242/git-push-error-insufficient-permission-for-adding-an-object-to-repository-datab)

我一直在对文件进行一些更新，提交到远程仓库，然后将更改从仓库拉到我用作登台站点的工作副本。我做了几个提交并在今天早上毫无问题地把它们拉了出来，但我只是得到了以下错误：`error: insufficient permission for adding an object to repository database .git/objects`- 我正在提交的文件（以及我正在拉动更改的目录）的权限看起来是正确的，所以我'不确定这个问题可能来自哪里 - 有什么建议吗？

# javascript - javascript/ajax登录系统

> ID：12817731
> 
> 赞同：2
> 
> 时间：2012-10-10T10:57:33.067
> 
> 标签：javascript, ajax, json

我想为我的登录系统使用脚本/ajax。到目前为止，我已经能够取回包含所有错误的数组，如果登录成功，请设置 $_SESSION['id']：

```
<script type="text/javascript">
$(document).ready(function() {
$("input[type=button]").click(function () {  
var username = $('input[id=username]').val(); // get the username 
var password = $('input[id=password]').val(); // and the password
    if (username != '' || password !='') { // if not empty 

     $.ajax({
            type: "POST",
            url: "loginUser.php",
            data : "username="+username+"&password="+password,
            dataType: "json",
            success: function (data) {
            var success = data['success'];
            if(success == 'false'){
            var error = data['message'];
            alert(error); // the array with all the errors
             }else{
       $('#mask , .login-popup').fadeOut(300 , function() {
       $('#mask').remove();  
    });// end fadeOut function()
setTimeout("location.href = 'home.php';",1500);
    }
  }
  });//end success function

  } else {
alert('Enter some text ! '); // just in case somebody to click witout writing anything :)
    }
    });//end click function
});//end ready function
  </script> 
```

loginUser.php 基本上检查所有功能，然后像这样发回数据：

```
if (empty($_POST)===false){
$email = sanitize($_POST['username']);
$password = sanitize($_POST['password']);

if (empty($email) === true || empty ($password) === true){ 

    $errors[] = 'You need to enter a username and password';
} else if (mail_exists($email) === false){
    $errors[] = 'we can\'t find that username. have you registered?';
}else if (user_active($email) === false){
    $errors[] = 'you haven\'t activated your account!';
}else {
$login = login($email, $password);
if ($login === false){
    $errors[] = 'username/password combination is incorrect!';
}else {
//set user session 
$_SESSION['id'] = $login;

//redirect user to home
    echo json_encode(array("success"=>'true'
                ));
}

   }
echo json_encode(array("success"=>'false',
            "message"=>$errors,             
            ));
                          } 
```

正如我所说，如果密码和用户名不正确，我会收到所有警报，如果密码和用户名正确，我会设置 $_SESSION 但弹出窗口仍然显示并且我没有重定向（但由于 SESSION 我可以访问放）。测试成功是 == true 还是 == false 是否正确？？？

* *** *编辑：已修复，问题出在 php 文件中。看我的回答......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T16:07:32.633

固定的！问题出在 php 文件中的 if else 逻辑中：

JS：

```
<script type="text/javascript">
 $(document).ready(function() {
      $("input[type=button]").click(function () {
      var username = $('input[id=username]').val(); // get the content of what user typed ( in textarea ) 
      var password = $('input[id=password]').val(); // get the content of what user typed ( in textarea ) 
                            $.ajax({
                            type: "POST",
                            url: "loginUser.php",
                            data : "username="+username+"&password="+password,
                            dataType: "json",
                            success: function (data) {
                            var success = data['success'];
                            if(success == false){
        var error = data['message'];
                            alert(error); // just in case somebody to click on share witout writing anything :

                                }

                                if(success == true) {
   $('#mask , .login-popup').fadeOut(300 , function() {
   $('#mask').remove();  
                                });// end fadeOut function()
    setTimeout("location.href = 'home.php';",1000);                                 
                                                }
                                                    }

                        });//end ajax             
                 });//end click function
         });//end ready function 
```

登录用户.php：

```
 <?php
    if (empty($_POST)===false){
$email = sanitize($_POST['username']);
$password = sanitize($_POST['password']);

if (empty($email) === true || empty ($password) === true){ 
            $result = false;
            $errors = 'You need to enter a username and password';
            echo json_encode(array("success"=>$result,
                                   "message"=>$errors,             
                                   ));
} else if (mail_exists($email) === false){
            $result = false;
            $errors= 'we can\'t find that username. have you registered?';
            echo json_encode(array("success"=>$result,
                                   "message"=>$errors,             
                             ));
}else if (user_active($email) === false){
            $result = false;
            $errors = 'you haven\'t activated your account!';
            echo json_encode(array("success"=>$result,
                            "message"=>$errors,             
                             ));
}else {
$login = login($email, $password);
if ($login === false){
            $result = false;
            $errors = 'username/password combination is incorrect!';
            echo json_encode(array("success"=>$result,
                            "message"=>$errors,             
                             ));
} else {
//set user session 
$_SESSION['user_id'] = $login;
$result = true;
    echo json_encode(array("success"=>$result
                               ));

}
}
}
?> 
```

# android-layout - 关于android布局的问题

> ID：12817733
> 
> 赞同：0
> 
> 时间：2012-10-10T10:57:49.087
> 
> 标签：android-layout

我想知道我们是否可以将 zml 页面分成 2 个部分，以便我们可以将其用于 2 个活动，即上半部分用于一个活动，下半部分用于另一个目的。这在android中是否可行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T13:49:21.983

好吧，您可以这样做，但采用一种不同的方式： 1\. 为上半部分创建一个 xml - one.xml 2\. 为下半部分创建另一个 xml - two.xml 3\. 使用 one.xml 和 two.xml一起创建一个 xml - three.xml，并使用标签在其中包含 one.xml 和 two.xml。通过这种方式，您可以重用您的一些代码。

这里有一个小提示：

```
<RelativeLayout>
       <include
         layout="@layout/one" />
       <include
         layout="@layout/two" />
</RelativeLayout> 
```

# installshield - 如果自定义操作失败则回滚安装 [在 InstallFinalise 之后] -Basic Msi -Installshield 2012

> ID：12817740
> 
> 赞同：0
> 
> 时间：2012-10-10T10:58:00.493
> 
> 标签：installshield, installshield-2012, basic-msi

我正在使用**installshield 2012 spring 专业版创建一个****基本的 msi 安装**程序，这里我有一个自定义对话框来从用户那里收集一些数据，基于这些数据我调用一个自定义 dll 操作来在安装文件夹中创建一个数据库。

 **我有一个计划的 dll 自定义操作*在 InstallFinalise 之后*运行，我想检查 dll 的返回值，如果该值指示失败，我需要中止并回滚安装过程。

我设法捕捉到错误并中止安装，但问题在于回滚.. 现在安装中止但文件已经创建。如何让安装回滚？有可能..有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T12:51:35.123

InstallFinalize 后无法回滚。InstallInitialize 和 InstallFinalize 标记 Windows 安装程序事务的边界。

我建议阅读和理解：

[Windows Installer 中自定义操作的安装阶段和脚本内执行选项](http://www.installsite.org/pages/en/isnews/200108/index.htm)**

# android - Providing user login support on web for my application

> ID：12817751
> 
> 赞同：0
> 
> 时间：2012-10-10T10:58:48.933
> 
> 标签：android, parse-platform

I have a background in android development with almost no knowledge of server side implementations. I want to create an application wherein I can store user's data on the cloud (for example: user's call log or periodic gps location). I have had a look at parse.com features and it comes pretty close to what I need. Its especially attractive because of its ease of use and good documentation.

However, I need to provide the user access to this data from a web service as well (suppose the user doesn't have access to his/her phone). For this I need to create a user login support on my parse application page. Is it even possible to do that?

Also, I want to run some analysis on this data and present the user with this analysis through this online account.

Are there any other backend frameworks which can help me achieve this quickly?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T11:57:42.880

The JavaScript SDK is officially supported by Parse, so you could not go wrong choosing that. However, if you'd like a server-side framework, check out the [3rd party libraries for the REST API](https://parse.com/docs/api_libraries). Depending on your language preference, you should find something suitable to your needs there.

EDIT: You can also use the JavaScript SDK on the server with Node.js: [http://blog.parse.com/2012/10/11/the-javascript-sdk-in-node-js/](http://blog.parse.com/2012/10/11/the-javascript-sdk-in-node-js/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T20:17:37.490

You can use Parse for this. Parse provides both a [REST API](https://parse.com/docs/rest) and a [JavaScript SDK](https://parse.com/docs/js_guide) which you can use to create a companion web site for your mobile app.

# intellij-idea - Intellij，防止在构建时弹出消息

> ID：12817753
> 
> 赞同：10
> 
> 时间：2012-10-10T10:58:59.260
> 
> 标签：intellij-idea

所以，我有自动构建插件。但是，如果有错误，每次保存时，都会弹出错误消息框，这很烦人。是的，我知道有错误。让我自己照顾他们。在这之间我可能会节省。所以，放过我吧。

我保存以更新编辑器中的错误。但是，我不需要消息视图。我可以自己输入`ALT`+ `0`。

有没有办法禁用消息弹出窗口或者我必须自己开枪？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-11T08:22:39.480

我知道这是旧的，但希望这仍然可以帮助某人：

当前的 IDEA 版本有

设置 => 外观和行为 => 通知

您可以微调哪些事件会导致哪种类型的通知或完全禁用气球通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-28T10:16:44.297

HYI 不确定是否与此相关，但在 AppCode 中，此构建消息工具窗口会在项目构建时自动打开。

我不知道有一个选项`Settings => Appearance & Behavior => Notifications`可以关闭它。

有没有办法避免工具窗口的这种自动打开？

[![在此处输入图像描述](../Images/46ffd870989401a62673717ba600c1e4.png)](https://i.stack.imgur.com/nG3WE.jpg)

# c# - 将 jQuery 包含到 C# 中

> ID：12817756
> 
> 赞同：0
> 
> 时间：2012-10-10T10:59:08.213
> 
> 标签：c#, jquery, web-parts

如何在 С# 上将 jQuery 库 (.js) 包含到 webpart 中？我需要编写使用 jQuery 的脚本，并将其用于单击操作。

ps：Webpart 不可视

ps：是真的吗？=)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T11:06:12.923

基本上，你需要包括一行

```
Page.ClientScript.RegisterClientScriptInclude(
    "JQueryInclude",
    "/path/to/your/jquery.js"); 
```

在您的 webpart 代码中的某处，它将在每次页面加载时被调用，例如在`OnLoad`方法中：

```
protected override void OnLoad(EventArgs e)
{
    Page.ClientScript.RegisterClientScriptInclude(
        "JQueryInclude",
        "/path/to/your/jquery.js");
    base.OnLoad(e);
} 
```

这将导致像

```
<script src="/path/to/your/jquery.js" type="text/javascript"></script> 
```

出现在您的页面源中，然后您可以在您的 Web 部件中使用 JQuery。

# c#-4.0 - 下拉列表中的数据排序

> ID：12817758
> 
> 赞同：0
> 
> 时间：2012-10-10T10:59:14.907
> 
> 标签：c#-4.0, sorting, drop-down-menu

我想对绑定到下拉列表的数据进行排序。

我从数据库中获取学生的姓名，但我认为我不能直接使用 orderby。

因为我从数据库中获取的数据是 Guid 类型的学生 ID。

然后我从 id 中找到全名。

这是代码

```
public DataTable GetAllStudentNameFromMentor(Guid MentorId)
        {
            DataTable AllStudents = new DataTable();
            AllStudents.Columns.Add("StudentID", typeof(Guid));
            AllStudents.Columns.Add("studentName", typeof(string));
             var allm = from sm in Db.StudentMentor
                       where sm.MentorID.Equals(MentorId)
                       select sm;

            foreach (var v in allm)
            {
                string studentname = BussinesCollection.BussinesPerson.GetFullName(v.StudentID.Value);
                AllStudents.Rows.Add(v.StudentID,studentname);
            }
            return AllStudents;
        } 
```

我在下拉列表中绑定表格。

```
ddlstudent.DataSource = m.bussinesCollection.BussinesMentor.GetAllStudentNameFromMentor(MentorID);
        ddlstudent.DataBind(); 
```

但我希望名称应按字母顺序排列。

有没有人愿意帮助我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T11:04:19.630

试试这个

```
public DetaView GetAllStudentNameFromMentor(Guid MentorId)
{
  DataTable AllStudents = new DataTable();
  AllStudents.Columns.Add("StudentID", typeof(Guid));
  AllStudents.Columns.Add("studentName", typeof(string));
  var allm = from sm in Db.StudentMentor
             where sm.MentorID.Equals(MentorId)
             select sm; 
  foreach (var v in allm)
  {
      string studentname = BussinesCollection.BussinesPerson.GetFullName(v.StudentID.Value);
      AllStudents.Rows.Add(v.StudentID,studentname);
  }
AllStudents.DefaultView.Sort = "studentName ASC";
return AllStudents.DefaultView;
} 
```

有关此的更多信息，请[点击此处](http://msdn.microsoft.com/en-us/library/system.data.dataview.sort.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T11:09:13.177

我们可以使用 dataview 对数据表进行排序，如下所示：

1.  先把datatable转成dataview再排序

> DataView dataView = new DataView(AllStudents);
> 
> ```
> dataView.Sort = "studentName ASC"; 
> ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T11:16:05.647

由于您使用的是 id 和值对，因此您可以使用可以轻松订购的 Dictionary。还要确保在将字典绑定到 ddl 之前更改标记或代码后面的`ddl.DataValueField="Key"`and 。`ddl.DataTextField="Value"`

```
public Dictionary<Guid, string> GetAllStudentNameFromMentor(Guid MentorId)
{
    Dictionary<Guid,string> myDic = new Dictionary<Guid,string>();

    var allm = from sm in Db.StudentMentor
                   where sm.MentorID.Equals(MentorId)
                   select sm;

    foreach (var v in allm)
    {
           myDic.Add(v.StudentID,
              BussinesCollection.BussinesPerson.GetFullName(v.StudentID.Value));
    }

    return myDic.OrderBy(x => x.Value).ToDictionary(x => x.Key, x => x.Value);
} 
```

# ios - iPhone 5 ios 6 中的 UIimagepickercontroller 崩溃

> ID：12817765
> 
> 赞同：1
> 
> 时间：2012-10-10T10:59:41.257
> 
> 标签：ios, crash, uiimagepickercontroller, iphone-5

> “崩溃的应用程序将被拒绝：我们发现您的应用程序在运行 iOS 6 的 iPhone 5 和 iPad 上崩溃了”

这适用于模拟器 IOS 6。

```
self.imgPicker = [[UIImagePickerController alloc] init];
self.imgPicker.navigationBar.barStyle = UIBarStyleBlackTranslucent;
self.imgPicker.allowsImageEditing = YES;
self.imgPicker.delegate = self;
[self.imgPicker setSourceType:UIImagePickerControllerSourceTypePhotoLibrary];
[self presentModalViewController:self.imgPicker animated:YES]; 
```

Iphone 5 不销售，我无法在真实设备上进行测试。请帮帮我...

# c++ - std::vector 在 iOffset 位置更新 N 个值

> ID：12817766
> 
> 赞同：0
> 
> 时间：2012-10-10T10:59:43.757
> 
> 标签：c++, stdvector

我有`std::vector<int> around`，我需要更新（/覆盖）从位置**X开始的****N 个**值。

 **想象一个包含整个房间顶点的顶点列表。

随机移动椅子，只需要更新属于椅子的顶点，因此需要更新整个房间顶点列表中的一组椅子顶点。

伪代码：

```
void CVertexBuffer::Update(int iOffset, const std::vector<tVertex>& vVerticesList)
{

  // Update VAO
     ...

  //
  // Update m_vVertices (holding current vertices list) 
  // with vVerticesList (holding updated vertices data )
  // starting at position iOffset
  // The size of m_vVertices never changes
  // 
  // The Dumb way ( just for pseudocoding )

  for(int a = iOffset; a < vVerticesList.size(); a++)
  {
     m_vVertices[a] = vVerticesList[a-iOffset];
  }
} 
```

有什么我可以在里面使用的`std::vector`吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T11:03:16.173

您可以直接使用`std::copy`：

```
 std::copy(vVerticesList.begin(), vVerticesList.end(), 
                                         m_vVertices.begin() + iOffset); 
```**

# javascript - 根据返回的 JSON 对象的数量，返回不同的 JSON 格式

> ID：12817770
> 
> 赞同：0
> 
> 时间：2012-10-10T10:59:57.837
> 
> 标签：javascript, json

我注意到产品 API 中似乎有什么错误。问题如下：- 1\. 如果返回的 JSON 包含多个进程（在我的情况下为两个进程），则 JSON 结果将如下所示：-

```
{"total":2,"data":[{"id":"leaveApp#2#leaveApplicationProcess","packageName":"Leave App","name":"Leave Application Process","packageId":"leaveApp","label":"Leave Application Process ver 2","version":"2"},{"id":"leaveApp#2#process1","packageName":"Leave App","name":"Leave Application Process2","packageId":"leaveApp","label":"Leave Application Process2 ver 2","version":"2"}]} 
```

并且我能够使用以下 javaScript 显示这两个进程：-

```
$(document).ready(function () {

    $.ajax({
        type: "GET",
        url: "http://localhost:8080/jw/web/json/workflow/process/list?j_username=kermit&hash=9449B5ABCFA9AFDA36B801351ED3DF66&loginAs=admin&packageId=leaveApp",

        dataType: "JSONP",

        success: function (result) {
            $.each(result.data, function (key, val) {
                var str = val.name + ' | Version ' + val.version;
                                $('<li/>', { text: str })
                .appendTo($('#products'));

            });        }
    }); }); 
```

虽然如果 packageid 只包含一个进程，那么上面的 Java 脚本将返回`"undefined"`JSON，因为我认为因为没有数据属性并且返回的 JSON 格式如下：-

```
{"total":1,"data":{"id":"crm#1#process1","packageName":"CRM","name":"Proposal Approval Process","packageId":"crm","label":"Proposal Approval Process ver 1","version":"1"}}. 
```

那么，任何人都可以帮助我如何让我的 javascruipt 工作，而不管进程数量如何，或者这是 API 本身的问题？

此致

**更新**

```
I modify my JavaScript to be as follow:-
$.ajax({
        type: "GET",
       // url: "http://localhost:8080/jw/web/json/workflow/process/list?j_username=kermit&hash=9449B5ABCFA9AFDA36B801351ED3DF66&loginAs=admin&packageId=" + 'name',
        url: fullurl,
        dataType: "JSONP",
        // contentType: "application/json; charset=utf-8",
        success: function (result) {
            var arr = ( (typeof(result.data) == 'object')        && 
                        (result.data.constructor.name == 'Array') )
                 ? result.data
                 : [result.data];
            $.each(arr, function (key, val) {

                // Format the text to display.
                //   var str = val.packageName + ' | ' + val.packageId;
                var str = val.name + ' | Version ' + val.version;
                // Add a list item for the product.
                $('<li/>', { text: str })
                .appendTo($('#products'));

            });
        }
    }); 
```

但是目前如果有多个 JSON 对象，它将返回“未定义”，而如果只有一个 JSOn 对象，那么它将正常工作......所以我原来的问题现在是 Vice Versa 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T11:05:46.443

这是因为 JSON 数据的格式不一致。要修复它，`data`无论是否有多个进程（数组的元素），您始终可以将返回作为数组。

或者，试试这个：

```
var arr = ( (typeof(result.data) == 'object')        && 
            (result.data.constructor.name == 'Array') )
     ? result.data
     : [result.data];
$.each(arr, function (key, val) {
   // ... rest goes here
}); 
```

**编辑：**修正了`object`.

# java - 对 fileHandler 进行编码以输出 unicode 字符

> ID：12817772
> 
> 赞同：0
> 
> 时间：2012-10-10T10:59:59.327
> 
> 标签：java, encoding, utf-8, character-encoding, filehandler

我`FileHandler`在我的应用程序中使用 Java 来编写日志文件。我需要以 Unicode 字符输出。所以我`fileHandler.setEncoding("UTF-8");`在我的应用程序中设置了编码。但输出中的 Unicode 字符仍显示为`?????`.

我怎么能解决这个问题？

# php - 通过php中的向上/向下箭头进行页面排序

> ID：12817775
> 
> 赞同：3
> 
> 时间：2012-10-10T11:00:13.320
> 
> 标签：php, mysql

任何人都可以帮我订购在 php 中完成的页面自定义 CMS 页面管理器吗？

我有一个页面（文章）管理的数据库表。id - parentId - content- title - order - 等等

我在 html 表中选择并将其显示为树顺序（同样是父级然后是子级）.. 我在其中放置了编辑/删除选项以及一列来对页面进行排序，我想要带有向上/向下箭头的排序列.. 当单击它应该交换数据库表的相应 Order 字段（它包含一些数字）。问题是这里它包含父母和它的孩子，所以箭头应该以正确的顺序放置......即不要交换孩子和父母。只有具有相同父 ID 的列（如果有）应该被交换..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T12:50:18.283

由于您没有提供代码或数据库结构，我将尝试解释一个基本的订购系统，我希望您了解如何解决您的问题。

想象一下，这些是您的 mysql 表中的数据：

```
id - parent - title - order
1  - 0      - abc   - 1
2  - 0      - xyz   - 2
3  - 1      - 123   - 1
4  - 1      - 456   - 3
5  - 1      - 789   - 2 
```

如果您进行这样的查询：

```
SELECT ...  ORDER BY order, id ASC 
```

你会有这样的树：

```
- root (id:0)
    |
    |___ abc (id:1)
    |     |___ 123 (id:3)
    |     |___ 789 (id:5)
    |     |___ 456 (id:4)
    |
    |___ xyz (id:2) 
```

如果你点击 entry `789`(id:5)，给它一个比 entry 更高的顺序`123`，你的 SQL 查询应该是这样的：

```
UPDATE table SET order = order + 1 WHERE order = order - 1 AND parent = 1 
```

下一个查询：

```
UPDATE table SET order = order - 1 WHERE id = 5 
```

你的树应该是这样的：

```
- root (id:0)
    |
    |___ abc (id:1)
    |     |___ 789 (id:5)
    |     |___ 123 (id:3)
    |     |___ 456 (id:4)
    |
    |___ xyz (id:2) 
```

如果您需要更灵活的方式，也可以使用类似的方法：

（这里我假设您有 100 行从 1 到 100 排序，并且您想将 id:33 移动到 id:51 之后的位置）

```
UPDATE table SET order = order + 1 WHERE order >= 51
UPDATE table SET order = 51 WHERE id = 33
UPDATE table SET order = order - 1 WHERE order BETWEEN 33 AND 50 
```

# javascript - 从返回的 YouTube 视频图像中删除额外的黑色背景？

> ID：12817777
> 
> 赞同：1
> 
> 时间：2012-10-10T11:00:19.310
> 
> 标签：javascript, youtube

[我从http://img.youtube.com/vi/9KPCO5ENlmw/0.jpg](http://img.youtube.com/vi/9KPCO5ENlmw/0.jpg)之类的 YouTube 图像中拉回图像，我在图像中看到的是图像的顶部和底部有很多黑色，有没有有什么方法可以去掉这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T11:06:47.480

如果你想通过颜色，wideimage 库（基于 GD）已经实现了这个。该方法称为autoCrop，存在在线演示。

[http://wideimage.sourceforge.net/wp-content/current/demo/index.php?demo=autoCrop&output=preset%20for%20demo&colors=255&dither=1&match_palette=1](http://wideimage.sourceforge.net/wp-content/current/demo/index.php?demo=autoCrop&output=preset%20for%20demo&colors=255&dither=1&match_palette=1)

否则，如果您知道图像的大小，则可以创建一个隐藏溢出的 div 并计算真实图像。

问题是youtube自动裁剪图像并插入黑色，我认为youtube内部没有一种方法可以检索没有黑条的图像

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-24T10:39:37.997

YouTube 提供的图像没有 4:3 比例的黑条。要获得没有黑条的 16:9 视频缩略图，请尝试以下方法之一：

```
http://img.youtube.com/vi/<insert-youtube-video-id-here>/mqdefault.jpg
http://img.youtube.com/vi/<insert-youtube-video-id-here>/maxresdefault.jpg 
```

第一个`mqdefault`是 320x180 像素的图像。

第二张`maxresdefault`是 1500x900 像素的图像，因此需要调整大小才能用作缩略图。这是一个很好的图像，但它并不总是可用。如果视频质量低（我想不到 720p，不确定），则此“maxresdefault”将不可用。所以永远不要依赖它。

# xaml - TabItem 的模板

> ID：12817794
> 
> 赞同：0
> 
> 时间：2012-10-10T11:01:31.740
> 
> 标签：xaml, background, tabitem

我有一个 TabItem，我想为它定义一个模板，而不创建不同的 xaml 文件，因为我只想在选择选项卡时更改颜色渐变。我尝试将它放在 Windows.Resources 部分但它不管用..

```
 <Style TargetType="{x:Type TabItem}">
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type TabItem}">
                           <Grid>
                                <Border Name="Border" Margin="10,0" BorderThickness="1,1,1,1" CornerRadius="6,6,0,0" >
                                    <ContentPresenter x:Name="ContentSite"  Height="58" Width="170" HorizontalAlignment="Center" VerticalAlignment="Center" ContentSource="Header"/>
                                </Border>
                            </Grid>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsSelected" Value="True">
                                <Setter  Property="Background">
                                    <Setter.Value>
                                        <LinearGradientBrush  EndPoint="0.5,1" StartPoint="0.5,0">
                                            <GradientStop Color="#FF51A1CB" Offset="0" />
                                            <GradientStop Color="#FF306886" Offset="1" />
                                        </LinearGradientBrush>
                                    </Setter.Value>
                                </Setter>
                                </Trigger>
                                <Trigger Property="IsSelected" Value="False">
                                <Setter Property="Background">
                                    <Setter.Value>
                                        <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                                            <GradientStop Color="#FFC3BCAE" Offset="0" />
                                            <GradientStop Color="#FFFDCE9D" Offset="0.046" />
                                            <GradientStop Color="#FFFFA35B" Offset="0.452" />
                                            <GradientStop Color="#FFFF8A2C" Offset="0.461" />
                                            <GradientStop Color="#FFFF9F30" Offset="0.724" />
                                            <GradientStop Color="#FFFFC472" Offset="1" />
                                        </LinearGradientBrush>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style> 
```

有人有想法吗？我将 TabControl 的定义分享给，

```
<TabControl  HorizontalAlignment="Left" Margin="0,30,0,0" Name="tabControl1" VerticalAlignment="Top" Width="998" Grid.RowSpan="2" Height="695" >
        <TabItem Height="58" Width="170" Name="tabItem1" BorderBrush="#FF27546C" BorderThickness="2" Foreground="White" FontSize="13" Margin="0" Padding="12,2" UseLayoutRounding="False">
            <TabItem.Header>
                 <TextBlock Foreground="White" FontSize="13" TextAlignment="Center" Margin="10,0,0,0" VerticalAlignment="Center">PROFILO<LineBreak />DISCESA</TextBlock>      
            </TabItem.Header>.... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T16:42:17.943

问题出在您的控制模板上。您可以像这样使用资源。

```
<Style TargetType="{x:Type TabItem}">
        <Style.Triggers>
                        <Trigger Property="IsSelected" Value="True">
                            <Setter  Property="Background">
                                <Setter.Value>
                                    <LinearGradientBrush  EndPoint="0.5,1" StartPoint="0.5,0">
                                        <GradientStop Color="#FF51A1CB" Offset="0" />
                                        <GradientStop Color="#FF306886" Offset="1" />
                                    </LinearGradientBrush>
                                </Setter.Value>
                            </Setter>
                        </Trigger>
                        <Trigger Property="IsSelected" Value="False">
                            <Setter Property="Background">
                                <Setter.Value>
                                    <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                                        <GradientStop Color="#FFC3BCAE" Offset="0" />
                                        <GradientStop Color="#FFFDCE9D" Offset="0.046" />
                                        <GradientStop Color="#FFFFA35B" Offset="0.452" />
                                        <GradientStop Color="#FFFF8A2C" Offset="0.461" />
                                        <GradientStop Color="#FFFF9F30" Offset="0.724" />
                                        <GradientStop Color="#FFFFC472" Offset="1" />
                                    </LinearGradientBrush>
                                </Setter.Value>
                            </Setter>
                        </Trigger>
        </Style.Triggers>
    </Style> 
```

我不知道你为什么要编辑 ControlTemplate。

仅供参考，您的 xaml 对我来说看起来很复杂。应该很简单。

干杯..

# nlp - 如何弥合维基百科数据库转储和 GATE 之间的差距？

> ID：12817798
> 
> 赞同：1
> 
> 时间：2012-10-10T11:01:41.197
> 
> 标签：nlp, wikipedia, gate

总体任务是在维基百科页面上进行 NLP。

首先是从 GATE 以一种好的方式访问下载的 Wikipedia 数据库转储（40GB XML 文件）？实际上，我只需要医疗类别。

有一些图书馆吗？

任何提示表示赞赏！

体重

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T07:59:21.247

就我搜索而言，似乎我必须： 1\. 在本地安装 Mediawiki 2\. 使用 mwdump 将 xml 转储导入 Mediawiki 数据库（MySQL） 3\. 使用 JDBC 连接器访问 MySQL 数据库

不知道我是不是绕道

# asp.net - 在内存中共享大数据表？

> ID：12817799
> 
> 赞同：0
> 
> 时间：2012-10-10T11:02:02.877
> 
> 标签：asp.net, memory-management, shared-libraries, static-methods

我的网站经常使用一些表格。例如，最大的一个是保存大量静态数据的位置表。因此，每当用户访问我的网站时，他们都会在这些位置进行搜索。它拥有大约 150 万行。我已经使用内存分析器调整了这个表的大小，它的内存将近 500mb。最终我还有一些静态表，我需要非常快速地访问它们，它们是静态的。最后，我的内存转储达到 1.5 GB 内存使用量。这对我来说不是问题，因为我有一个强大的服务器，有很多可用的内存。但是当我提出这个问题时，高级开发人员和架构师告诉我应该审查我的项目，因为一个进程不应该占用那么多内存。但我需要快速访问，我不想每次都查询我的数据库。我需要在 1 秒内回复。这就是为什么记忆看起来像我的方式。有没有更好的建议？

我正在使用 asp.net 和 ms SQL 2008。目前是 Framework 4.0，但很快就会是 4.5。我的网络服务器上的 IIS 7.5。

感谢您的帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T11:12:40.740

这个过程绝对不应该拥有这个内存本身。http 服务器可能希望进程并行运行数（千）次，这样您就会遇到麻烦。现在这*并不是*说数据不应该在内存中。所有 Google 数据大部分时间都在内存中。你只需要小心你如何加载它们。

1.  如果数据库服务器有任何好处（应该是这样），那么如果它们被频繁访问或者您设置了适当的缓存策略，它实际上会将数据保存在内存中。这应该会给您带来不错的性能，而无需做太多工作或任何奇怪的技巧。
2.  您可以使用[memcached](http://memcached.org/)（这是 Google 的方式）。
3.  您可以将数据保存在具有自定义格式的文件中，以便在您的特定用例中快速访问，并通过内存映射访问它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T11:25:38.140

不建议在生产环境中保留大量静态数据。正如我在您的场景中看到的那样，您的数据集可以标准化并管理最小数量的初始数据集。

另一种方法是使用像构建器这样的设计模式来构建数据集，仅按需构建数据集。

通过采用这种方法，您可以避免在内存中保留不必要的数据集。并在需要时加载所需的内容。构建器的基本思想可在 [1] 上找到。

[1].http://www.oodesign.com/builder-pattern.html

# .htaccess - 检查 Windows 服务器上的 HTTP_REFERER

> ID：12817802
> 
> 赞同：2
> 
> 时间：2012-10-10T11:02:22.407
> 
> 标签：.htaccess, iis, http-referer

我目前正在从 Linux (Apache) 服务器迁移到 Windows (IIS)。在 Linux 上，我使用 .htaccess 文件来检查 HTTP_REFERER 值，以确保我们的文件仅从我们的站点加载，而不是从其他站点链接到：

```
RewriteEngine on
RewriteCond %{HTTP_REFERER} !^http(s)?://(www\.)?foo.com [NC]
RewriteRule \.(dcr)$ - [NC,F,L] 
```

如何在 Windows 机器上完成此操作？（Windows Server 2008 R2、IIS 7）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T21:03:12.097

查看以下位置的第 6 点：

[http://blogs.iis.net/ruslany/archive/2009/04/08/10-url-rewriting-tips-and-tricks.aspx](http://blogs.iis.net/ruslany/archive/2009/04/08/10-url-rewriting-tips-and-tricks.aspx)

简而言之，您需要安装[IIS URL Rewrite](http://www.iis.net/downloads/microsoft/url-rewrite)插件并创建一个类似于以下内容的规则：

```
<rule name="Prevent image hotlinking">
  <match url=".*\.(gif|jpg|png)$"/>
  <conditions>
    <add input="{HTTP_REFERER}" pattern="^$" negate="true" />
    <add input="{HTTP_REFERER}" pattern="^http://foo\.com/.*$" negate="true" />
  </conditions>
  <action type="Rewrite" url="/images/say_no_to_hotlinking.jpg" />
</rule> 
```

当然，您的规则可能看起来略有不同。使用 URL 重写，您还可以采用当前的 .htaccess 规则并将其作为新规则直接导入。它将为您处理翻译，但根据您的目标，您可能需要对生成的结果规则进行一些小的更改。

希望有帮助。

# linux - PaX ASLR 与 Linux 默认 ASLR（64 位）

> ID：12817803
> 
> 赞同：2
> 
> 时间：2012-10-10T11:02:24.110
> 
> 标签：linux, 64-bit, compatibility, aslr, pax

PaX 针对 64 位 x86 机器的 ASLR 实现比 Linux 默认的 64 位 ASLR 实现强得多。我的问题很简单，为什么 PaX 的实现不是默认的？

我假设这与兼容性问题有关，它破坏了某些程序的功能？或者以某种方式破坏其他东西？

哪些程序（示例，如果有人知道的话）会破坏，如果有的话，更有趣的是为什么会破坏它们？

另一种可能性是更高的性能损失，但在查看源代码后，我无法弄清楚为什么它应该更慢。请随时纠正我。我假设它与前者有关，兼容性。

# javascript - 忽略一段 javascript 的设备

> ID：12817806
> 
> 赞同：0
> 
> 时间：2012-10-10T11:02:27.227
> 
> 标签：javascript, html, css

我希望设备忽略我菜单上的特定功能。菜单是垂直的，具有手风琴性质，在导航页面时子菜单保持打开状态。

在设备上查看时，菜单位于页面顶部且较小。我需要它做的是当单击该项目时，菜单会再次关闭，因此菜单不会覆盖内容。这是保持它打开的脚本，我想我正在寻找一个 if (device) ignore this line ...

```
<script type="text/javascript">

$(function () {
 $("ul.menu-main > li").hover(function () {
    //Don't do this again if the same menu is hovered.
    if (!$(this).hasClass('selected')) {
        //Ensure any open sub-menu is closed.
        $("li.selected").children("ul").stop(true, true).slideUp(1000);
        $("li.selected").removeClass('selected');
        //Open sub-menu
        $(this).addClass('selected');
        $(this).children("ul").slideDown(1000);

    }
 });
        //Keep sub-menu open when navigating pages.
    if($('.active.parent > ul').length > 0) {
        $('.active.parent > ul').show();
    }
 });
 </script> 
```

如果正在使用设备，我需要它忽略这一点。

```
if($('.active.parent > ul').length > 0) {
        $('.active.parent > ul').show(); 
```

希望这是有道理的？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T11:43:46.890

听起来很像您正在构建一个响应式网站。您可以使用[matchMedia()](https://github.com/paulirish/matchMedia.js/)和 if-else 语句为不同的媒体查询执行不同的函数。

这是他们的 github 存储库中的一个示例：

```
if (matchMedia('only screen and (max-width: 480px)').matches) {
  // smartphone/iphone... maybe run some small-screen related dom scripting?
} 
```

一个不错的替代方案是[minwidth.js](https://github.com/edenspiekermann/minwidth-relocate)，它可以让您定义不同宽度的回调

```
minwidth(600, function() {
  doSomethingLikeLoadFacebook();
}); 
```

或者普通的jQuery ...

```
$(document).ready(function() {
  $(window).resize(function() {
    if ($('.active.parent > ul').length > 0) {
      if ($(window).width() > 960) {
        $('.active.parent > ul').show();
      } else {
        $('.active.parent > ul').hide();
      }
    }
  });
  $(window).trigger('resize');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T11:40:31.423

您可以检查设备的宽度，然后显示取决于该设备的菜单

```
if ($(window).width() > 960) {  // if device is wider than 960px
  if($('.active.parent > ul').length > 0) { // show menu
          $('.active.parent > ul').show();
  }
} 
```

# wpf - 使用 Dispatcher.Invoke() 并仍然得到“调用线程无法访问此对象，因为不同的线程拥有它”异常

> ID：12817808
> 
> 赞同：0
> 
> 时间：2012-10-10T11:02:30.933
> 
> 标签：wpf, multithreading

我有这段代码：

```
 plane.Dispatcher.Invoke((Action)delegate
        {
            plane.Geometry = mesh;
        }, System.Windows.Threading.DispatcherPriority.Render); 
```

我把它放在我的窗口类中的事件处理程序方法中。这个处理程序的调用者是一个处理 TCP 数据的线程。plane 是在 XAML 中初始化的 GeometryModel3D 对象。这应该从非 UI 线程顺利运行，对吧？但我仍然得到这个烦人的异常，这不是 UI 线程。此外，尝试了 - this.Dispatcher.Invoke - 通过“this.Dispatcher”，我的意思是 Window.Dispatcher。

有什么想法行不通吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T11:48:39.217

解决方案是在调用块内声明网格对象。

# java - 如何将 myproject.war 文件和 myproject-ds.xml 文件迁移到 JBoss AS 7

> ID：12817810
> 
> 赞同：1
> 
> 时间：2012-10-10T11:02:36.043
> 
> 标签：java, migration, jboss7.x, seam, jboss-4.2.x

到目前为止，我在 jboss-4.2.2.GA，windows7 中运行了我已经部署的 war 文件，`myproject.war`然后`myproject- ds.xml`在 server/default/deploye 中运行它工作正常。

现在我想迁移 jboss-as-7.1.1.Final,windows7，因为我将在独立/部署中部署 myproject.war.dodeploye 和 myproject-ds.xml 文件，但它显示异常

```
 13:55:29,304 ERROR 

[org.jboss.as.server.deployment.scanner]
 (DeploymentScanner-t hreads - 1) {"JBAS014653: Composite operation
 failed and was rolled back. Steps that failed:" => {"Operation step-2"
 => {"JBAS014671: Failed services" => {"jbos s.deployment.unit.\"myproject-ds.xml\".PARSE" =>
 "org.jboss.msc.service.StartEx ception in service
 jboss.deployment.unit.\"myproject-ds.xml\".PARSE: Failed to process
 phase PARSE of deployment \"myproject-ds.xml\""}}}} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T12:44:34.013

JBoss AS 7 使用完全不同的方式来部署和配置事物。[在这里](https://docs.jboss.org/author/display/AS71/Documentation?_sscc=t)查看更多信息。

基本上，所有配置现在都通过一个文件进行：**standalone.xml**，它位于 /standalone/configuration 下，您将 war/EAR 文件放在 /standalone/deployments 下。

此外，如果您有对外部 jar 的引用，则需要将其添加为[模块](https://docs.jboss.org/author/display/AS71/Class+Loading+in+AS7)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T15:56:36.690

您需要在standalone.xml 中创建数据源并创建一个全局模块

独立的.xml

```
<subsystem xmlns="urn:jboss:domain:datasources:1.1">
        <datasources>
        <datasource jndi-name="java:/jdbc/myCRMDatasource" pool-name="myCRMDatasource" enabled="true">
                <connection-url>jdbc:hsqldb:hsql://localhost/xdb</connection-url>
                <driver>hsqldb</driver>
                <transaction-isolation>TRANSACTION_READ_COMMITTED</transaction-isolation>
                <pool>
                    <prefill>true</prefill>
                </pool>
                <security>
                    <user-name>SA</user-name>
                </security>
            </datasource>
            <driver name="hsqldb" module="org.hsqldb">
                    <xa-datasource-class>org.hsqldb.jdbcDriver</xa-datasource-class>
                </driver>
       </datasources>
  </subsystem> 
```

并在 JBOSS_HOME/modules/org/hsqldb/main/module.xml 中创建

```
<module xmlns="urn:jboss:module:1.1" name="org.hsqldb">
  <resources>
    <resource-root path="hsqldb.jar"/>
  </resources>

   <dependencies>
     <module name="javax.persistence.api"/>
     <module name="javax.transaction.api"/>
         <module name="javax.validation.api"/>
     <module name="org.hibernate"/>
  </dependencies>
</module> 
```

并将 jar 放入 JBOSS_HOME/modules/org/hsqldb/main/

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T09:24:41.587

很高兴它有帮助。

要添加 Oracle JDBC 驱动程序，您需要在 JBoss 中添加 Module。

你需要什么：

1.JBOSS_HOME/modules/oracle/jdbc/main/module.xml，带

```
<module xmlns="urn:jboss:module:1.0" name="oracle.jdbc">
  <resources>
    <resource-root path="ojdbc6.jar"/>
  </resources>
  <dependencies>
    <module name="javax.api"/>
  </dependencies>
</module> 
```

2\. JBOSS_HOME/modules/oracle/jdbc/main/ojdbc6.jar

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T08:32:26.370

我推荐使用 Maven JBoss AS 插件 - [`maven-jboss-as-plugin`](https://docs.jboss.org/jbossas/7/plugins/maven/latest/). 您还可以使用 Web 控制台 - 它位于端口 9990 `http://localhost:9990`。

首先，您需要有一个用户来访问 Management API。这是使用`AS/bin/add-user.sh`

用于[`mvn jboss-as:add-resource`](https://docs.jboss.org/jbossas/7/plugins/maven/latest/add-resource-mojo.html)添加数据源。请参阅[此示例](http://docs.jboss.org/jbossas/7/plugins/maven/final/examples/add-resource-example.html)。

用于[`mvn clean install jboss-as:deploy`](https://docs.jboss.org/jbossas/7/plugins/maven/latest/deploy-mojo.html)部署您的应用程序。

# javascript - Javascript 更好的实践事件监听器或函数

> ID：12817818
> 
> 赞同：0
> 
> 时间：2012-10-10T11:02:56.633
> 
> 标签：javascript, jquery, javascript-events

我在两种首选的操作方法之间进退两难：

1.  使用 jquery 加载正文时附加事件侦听器：

    ```
    $(function(){ .... 
    ```

    这将捕获表单事件。

2.  在 HTML 代码中添加 onblur / onkeyup 并创建 JS 函数定义。

什么是更好的做法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T11:07:23.413

这取决于您的特定要求，但总的来说，我会说事件侦听器是更好的做法，因为这会将您的 HTML 与您的 javascript 逻辑分开。

因此，如果您添加一个新的 HTML 元素，这将自动使用您的事件侦听器，而不必每次都显式设置事件调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T11:11:05.373

第一种方法是我要走的路。

这允许您在 HTML 或 HTML 生成中分离需要知道 JavaScript 函数名称。

话虽如此，您应该尽可能松散地保持与 HTML 操作的绑定操作。您实际上是在反转需要知道要绑定的 HTML 元素的某些属性的依赖关系。

您可能想要定义您的操作方法并将事件分别绑定到它们。

# java - 如何从第一个 Activity 在第二个 Activity 中设置图像？

> ID：12817823
> 
> 赞同：0
> 
> 时间：2012-10-10T11:03:04.683
> 
> 标签：java, android, android-intent

如何在第一个活动的第二个活动中设置图像？请我有一个严重的问题。帮我解决这个问题。

编辑（这已从评论中复制）：

Intent put Extra的第一个活动代码：

```
in.putExtra("image", marraylist_image.get(arg2).toString()); 
```

在 imageview 中设置图像的第二个活动代码

```
image = mbundle.getString("image"); 
Bitmap bmp = BitmapFactory.decodeFile(image); 
System.out.println("Image Value:--" + bmp); 
img.setImageBitmap(bmp); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T11:07:37.290

**活动1：**

```
bytes[] imgs = ... // your image
Intent intent = new Intent(this, YourActivity.class);
intent.putExtra("img", imgs);
startActivity(intent); 
```

**活动2：**

```
bytes[] receiver = getIntent().getExtra("img"); 
```

另请参阅[此](https://stackoverflow.com/a/11519855/1405983)答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T11:16:24.580

Using bundle you can pass your image to seconfd activity like this :

```
 intent = new Intent(this, Second.class);
                bundle = new Bundle();
                bundle.putString("imageurl", "your image string");
                intent.putExtras(bundle);
                startActivity(intent); 
```

and in second activity:

```
 bundle = new Bundle();
                   bundle = getIntent().getExtras();
                   imageurl_of_event = bundle.getString("imageurl"); 
```

and for displaying image:

```
HttpURLConnection conn;
                try {
                    URL feedImage = new URL(imageurl_of_event);
                    conn = (HttpURLConnection) feedImage.openConnection();
                    InputStream is = conn.getInputStream();
                    Bitmap img = BitmapFactory.decodeStream(is);
                    event_imageview.setImageBitmap(img);
}catch..... 
```

thats it

# node.js - DotCloud 的 Nginx + NodeJS + MongoDB

> ID：12817824
> 
> 赞同：0
> 
> 时间：2012-10-10T11:03:07.547
> 
> 标签：node.js, mongodb, dotcloud

我想了解您在 DotCloud 上有关此设置的经验，以及有关每个设置的其他经验。我的问题是，

1.  它是如何扩展的？
2.  Nginx 在此设置中的作用是什么，仅用于请求调度还是还支持负载平衡？
3.  MongoDB 消耗多少内存？MongoDB中有内存管理优化吗？
4.  NodeJS 消耗多少内存？

我知道这一切都取决于什么样的应用程序，但我只是假设 NodeJS 是一种高吞吐量的解决方案，因此实际所需的内存应该比普通的 Web 服务器少（？）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T01:18:15.360

所以就像@Ken Cochrane 所说的 Node 服务中没有 nginx 并且不需要它。而且您可能不想要它，如果您确实想要使用 nginx 而不是通过 Node 提供静态内容，则可以为此添加静态服务。

负载平衡由我们的网关完成，这些网关将您的流量重定向到不同的实例或您的扩展服务。这是如果您已经扩展了您的服务。

只要您的应用程序设计为可扩展，Node.js 就可以完美扩展。例如，如果您仔细确保您的会话在缓存或数据库中共享，那么扩展它并不神奇。如果丢失一个实例不是问题，因为节点服务的内存中没有保存任何内容，并且如果您处理数据库重新连接，那么您可能会很好地扩展。

无法说 mongoDB 使用了多少，这完全取决于您的应用程序。我们有巨大的 mongoDB，从做爬虫的人到使用这么多内存的简单的人。不过，这取决于我们应用程序的成功。这真的很难留下。但是您可能在一段时间内不会达到 1G。

关于节点。您不想在内存中存储任何内容，因为它不会在您的实例之间共享。因此，除非您正在做一些非常特别的事情，否则您的 Node 实例不应该使用太多内存。256MB 对于普通应用程序来说应该没问题，甚至更少。

# android - 是否有任何可用的 Android 编码标准文档？

> ID：12817825
> 
> 赞同：1
> 
> 时间：2012-10-10T11:03:08.080
> 
> 标签：android

> **可能重复：**
> [Android 的编码风格标准](https://stackoverflow.com/questions/7544769/coding-style-standards-for-android)

我是 Android 开发的新手，想知道是否有任何可用的 Android 编码标准文档。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T11:05:40.293

这里有很多关于编码标准的信息。

[http://source.android.com/source/code-style.html](http://source.android.com/source/code-style.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T11:05:22.463

您可以找到代码样式的信息：http: [//source.android.com/source/code-style.html](http://source.android.com/source/code-style.html)

其余的：http: [//developer.android.com](http://developer.android.com)

# objective-c - 我更改 UIBUtton 背景图像的方式有什么问题？

> ID：12817827
> 
> 赞同：2
> 
> 时间：2012-10-10T11:03:15.173
> 
> 标签：objective-c, ios, uibutton, png

让我们看一下这张图片：

![在此处输入图像描述](../Images/bb67d86cc10eb55561e03b80e9ff312f.png)

左箭头显示在 Interface Builder 中按钮背景已更改，但在模拟器（和 iPhone）上仍为白色。

右箭头显示我已更改背景图像。

那么背景图像怎么没有改变呢？

无论如何，该界面构建器的背景参数是什么？我问的原因是当您以编程方式设置背景图像时，您需要指定状态。

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIButton_Class/UIButton/UIButton.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIButton_Class/UIButton/UIButton.html)

提示：图像太大，但您可以在 firefox 中使用 ctrl + 放大 :D

注意：我补充说：

```
 UIImage * imgFilterBar = [UIImage imageNamed:@"filter-bar.png"];
    [self.ChangeFilter setBackgroundImage:imgFilterBar forState:UIControlStateNormal|UIControlStateHighlighted]; 
```

在 viewDidLoad

它仍然不起作用。

我收到了这个警告：2012-10-10 18:29:59.929 BadgerNew[29833:c07] 无法加载从带有标识符的包中的笔尖引用的“filter-bar.png”图像

这是什么意思？我在做 [UIImage imageNamed:@"filter-bar.png"]; 正确吗？该文件在我的项目中。

![在此处输入图像描述](../Images/4bcf2531f0d426f2ac0fe729cd6e507c.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T11:16:58.363

如果要在 Button 上使用背景图像，请使用背景图像选项上方的图像选项。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T11:17:56.750

您是否尝试设置 UIButton 图像而不是 UIButton 背景图像？

```
[self.ChangeFilter setImage:imgFilterBarforState:UIControlStateNormal|UIControlStateHighlighted]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T11:30:19.917

您可以为按钮添加标题以查看名称。检查不同的标题颜色和大小，因此您可能看不到标题。如果这不可能，请在按钮中添加 uilabel

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T12:44:43.947

Kendall 在[无法加载从设备上运行的包中的 nib 引用的图像](https://stackoverflow.com/questions/4853808/could-not-load-the-image-referenced-from-a-nib-in-the-bundle-running-on-device)中的回答给我带来了启发。

问题是我使用参考文件夹（蓝色文件夹）。如果我这样做，我需要提及文件夹名称，这是一团糟。

所以我只是将整个内容复制到资源中。问题解决了。

# facebook-opengraph - Open Graph Action：使用暂存站点进行操作批准提交

> ID：12817830
> 
> 赞同：2
> 
> 时间：2012-10-10T11:03:17.993
> 
> 标签：facebook-opengraph

我有一个 Facebook 应用程序，我在其中开发了 2 个开放图形社交操作。我的开发环境有 3 个站点 - Dev、Staging、Production。我目前正在为 3 个站点使用 3 个不同的 FB 应用程序。开放图动作相关工作尚未部署到生产中。他们正在上演。

我的登台站点是我制作的子域。

我的问题是，我可以简单地将我的生产 FB 应用程序的 URL 指向我的暂存站点 - [http://stg.mysite.com](http://stg.mysite.com)，然后在批准过程完成后将 URL 切换到我的生产站点 - [http://mysite.com](http://mysite.com) ?

批准操作后更改 Facebook 应用的 URL（即使在同一域中）是否会使批准无效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T19:32:57.710

是的，您可以在应用程序使用暂存站点时批准您的操作。因为一旦您的应用程序批准了该操作，更改应用程序 url 不会导致任何问题。我已经为我的应用程序完成了它。

# asp.net-mvc - 如何在普通的 asp.net 网站中嵌入 MVC3 网站

> ID：12817832
> 
> 赞同：2
> 
> 时间：2012-10-10T11:03:19.357
> 
> 标签：asp.net-mvc, asp.net-3.5

我们有一个由第 3 方开发的现有 MVC3 应用程序。我们还有一个在框架 3.5 上开发的现有 asp.net 应用程序。我需要在 ASP.NET 页面上显示 MVC3 应用程序页面。

可能吗？如果是的话，两者之间是否有交流的可能？假设我单击 ASP.NET 网页中的按钮，应该将参数传递给 MVC3 应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T11:31:08.170

我在我目前工作的公司做过这件事。我们在 MVC3 中有一个购物车，在 asp 中有一些功能的普通网站。我们刚刚将 MVC 添加为 IIS 中的子应用程序。

两个应用程序共享相同的登录 cookie。您可以将参数作为 post 或 get 请求传递，将它们存储在 cookie 或会话中。

我们只是在站点之间链接，它工作得很好。每个人都认为这是同一个应用程序

# javascript - trigger('reloadGrid') 在 IE 8 上不起作用

> ID：12817835
> 
> 赞同：0
> 
> 时间：2012-10-10T11:03:31.930
> 
> 标签：javascript, jquery, jqgrid

在 IE 8`trigger('reloadGrid')`上，当调用 jqGrid 对象时，网格看起来像是被加载并且它也被清空了。

我的代码：

```
$('#myList').setGridParam({page:1});
$('#myList').setGridParam(url: 'http://..');
$('#myList').trigger('reloadGrid'); 
```

在 Chrome 中，请求被发送到服务器并且数据被适当地刷新。

**编辑：**请求被发送到服务器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T11:07:19.403

IE 使用客户端缓存。所以请确保对代码禁用缓存。

```
[OutputCache(Duration = 0, VaryByParam = "None")]        
public ActionResult GetArea(int locationId) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T06:50:44.293

重新检查请求后，请求确实到达了服务器，但其 URL 参数是 Unicode 字符（U+05D0-א-Hebrew Letter Alef）。

与 Chrome 浏览器相反，IE 不会自动对 URL 进行编码。

# audio-recording - 从其他应用程序录制声音

> ID：12817836
> 
> 赞同：2
> 
> 时间：2012-10-10T11:03:31.183
> 
> 标签：audio-recording, gstreamer

有没有办法使用 GStreamer 录制来自其他应用程序的声音？我已经知道如何从音频源录制，但我找不到从 autoaudiosink 录制的方法（即录制应用程序产生的每一个声音）。

编辑：

即使没有任何方法可以记录特定的应用程序，我也会接受有效的答案，而是直接从声卡。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T12:44:37.993

如果应用程序通过 pulseaudio 播放，您可以使用 pulsesrc device=XX 进行录制，其中 XXX 是作为设备的监听源。使用“pacmd list”并查找来源：以计算名称。

# php - 警告：mysql_result()：无法跳转到 MySQL 结果索引的第 0 行

> ID：12817837
> 
> 赞同：0
> 
> 时间：2012-10-10T11:03:34.130
> 
> 标签：php, mysql, row

> **可能重复：**
> [MySQL - 无法跳转到 MySQL 结果索引的第 0 行](https://stackoverflow.com/questions/8342054/mysql-unable-to-jump-to-row-0-on-mysql-result-index)

我收到 mysql_result(): Unable to jump to row 0 错误。不知道下面的函数有什么问题

```
function update_counter($post_id){
    global $wpdb;       
    $query = "SELECT view_count FROM ".$wpdb->prefix."advert_views WHERE postid = $post_id";
    if(@$query_run = mysql_query($query)){
        $count = mysql_result($query_run, 0, 'view_count' );
        $count_inc = $count + 1;
        $query_update = "UPDATE ".$wpdb->prefix."advert_views SET view_count = $count_inc WHERE postid = $post_id";
        if(@$query_update_run = mysql_query($query_update)){
            echo 'OK';
        }
    }
} 
```

* * *

好的，我用下面的代码修改了函数，错误消失了。只是参考其他问题。但我无法正确理解逻辑。任何人都可以帮助我理解实际 > 0 的逻辑吗？

```
function update_counter($post_id){
    global $wpdb;
    $query = "SELECT view_count FROM ".$wpdb->prefix."advert_views WHERE postid = $post_id";
    $query_run = mysql_query($query);
    if(mysql_num_rows($query_run) > 0) {
        $count = mysql_result($query_run, 0, 'view_count' );
        $count_inc = $count + 1;
        $query_update = "UPDATE ".$wpdb->prefix."advert_views SET view_count = $count_inc WHERE postid = $post_id";
        if(@$query_update_run = mysql_query($query_update)){
            echo 'OK';
        }
    }
} 
```

# jquery - Mobiscroll 呆滞的解决方法？

> ID：12817839
> 
> 赞同：1
> 
> 时间：2012-10-10T11:03:44.787
> 
> 标签：jquery, cordova, mobiscroll

我正在使用 JQuery/PhoneGap 在我的手机上测试[Mobiscroll](http://mobiscroll.com/)，并且响应我的交互真的很迟钝。

有没有其他人经历过这个？有没有办法解决它？

```
Versions:
Phone: Xperia X10 (Android 2.3)
Mobiscroll: 2.0.3
JQuery (mobile): 1.2.0
Jquery: 1.8.2
PhoneGap: 2.1.0 
```

# php - Header() 没有重定向 PHP

> ID：12817846
> 
> 赞同：2
> 
> 时间：2012-10-10T11:04:19.010
> 
> 标签：php, redirect, http-headers

我正在使用以下 PHP 代码来检查会话。但如果会话未登录，则页面不会重定向，只显示黑页。

我的如果条件是对的！它正在点击标题功能..这是我的代码：

```
if(
    !isset($_SESSION['SESS_MEMBER_ID']) 
    || (trim($_SESSION['SESS_MEMBER_ID']) == '') 
    AND !isset($fb_login)
) {
    header("location:login.php?msg=Please+Login+Again.");
} 
```

欢迎提出建议！

```
HTTP/1.1 200 OK
Date: Wed, 10 Oct 2012 10:57:14 GMT
Server: Apache/2.2.15 (CentOS)
X-Powered-By: PHP/5.3.3
Connection: close
Transfer-Encoding: chunked
Content-Type: text/html; charset=UTF-8 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-10T11:56:58.873

如果您在`header("Location: ");`输出内容后使用，请确保您已将`ob_start();`较早的内容放入脚本中。缓冲您的脚本，因此在您调用或到达文件末尾`ob_start();`之前不会输出任何内容。在内容已经输出到浏览器之后`ob_end();`调用可能会导致问题。`header("Location: ");`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-10T11:24:25.137

把**ob_start();** 在 PHP 文件的开头，它会有所帮助，

```
<?php
    ob_start();
    /*
    Your code
    */
 ?> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-10T11:06:22.940

确保放一个出口；或者死; 在命令之后：并使“位置”以大写开头

```
if (!isset($_SESSION['SESS_MEMBER_ID']) || (trim($_SESSION['SESS_MEMBER_ID']) == '') AND !isset($fb_login)) {           
    header("Location:login.php?msg=Please+Login+Again.");
    exit;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-10T11:05:50.777

做`L`资本。

```
 header("Location: login.php?msg=Please+Login+Again.");
 exit(); // just a precaution 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-10T11:06:00.637

尝试正确格式化标题：

```
header("Location: login.php?msg=Please+Login+Again."); 
```

当然，请确保您在调用之前没有发送任何输出（有意或错误地）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-10T11:06:13.407

```
header("Location: login.php?msg=Please+Login+Again.");
exit(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-10T11:06:20.467

**1)**确保在 header() 函数之前不发送任何内容

**2）**将“位置”设置为“位置：”

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-10T11:26:57.337

添加到其他人所说的内容中，您确定满足条件以击中 header()

您可以使用 empty() 清理代码并进行一些测试：

```
//Debug
unset($_SESSION['SESS_MEMBER_ID']);
unset($fb_login);

if(empty($_SESSION['SESS_MEMBER_ID']) && !isset($fb_login)) {
    exit(header("Location: login.php?msg=Please+Login+Again."));
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-10-10T11:27:34.863

尝试更改`AND`for`&&`

```
if(!isset($_SESSION['SESS_MEMBER_ID']) || (trim($_SESSION['SESS_MEMBER_ID']) == '') && !isset($fb_login)
    ) {
        header("location:login.php?msg=Please+Login+Again.");
    } 
```

# windows-7 - 在cmd中，如何获取名称中带有插入符号的文件夹的路径

> ID：12817852
> 
> 赞同：2
> 
> 时间：2012-10-10T11:04:42.223
> 
> 标签：windows-7, batch-file, path, cmd, caret

在 Windows 7 的 cmd 中，我知道*%~dp0*给出了批处理文件的文件夹路径，如 [How to get folder path from file path with CMD](https://stackoverflow.com/questions/659647/how-to-get-folder-path-from-file-path-with-cmd/659672)

但是，如果路径中至少有一个插入符号 (^)，则它不起作用。例如，C:\one^two^^three^^^four^^^^carets\ 中的批处理包含

```
echo %~dp0 
```

给

```
C:\onetwo^three^four^^carets\ 
```

我怎样才能摆脱插入符号？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T12:27:13.047

您得到了正确的值，但是当您 ECHO 值时，它必须经过另一层解析。未加引号`^`是批量转义字符，用于将具有含义的特殊字符（如`&`和）转换为简单的文字字符。`|`未引用的插入符号后面的任何字符都将被转义并消耗插入符号。

如果您只是 ECHO 字符串文字，您将得到完全相同的结果：

```
echo C:\one^two^^three^^^four^^^^carets\ 
```

产量

```
C:\onetwo^three^four^^carets\ 
```

您可以通过引用字符串来保护插入符号，但随后您会在 ECHO 结果中获得引号：

```
echo "%~dp0" 
```

您可以轻松地将原始值传输到环境变量而无需使用插入符号，并通过使用 SET 查看结果来证明它：

```
@echo off
setlocal
set "myPath=%~dp0"
set myPath 
```

如果您只想回显不带引号的值，则可以使用延迟扩展。这是因为在解析特殊字符后发生延迟扩展：

```
@echo off
setlocal enableDelayedExpansion
set "myPath=%~dp0"
echo !myPath! 
```

您也可以通过将值传输到 FOR 变量来获得相同的结果。FOR 变量的扩展也发生在特殊字符解析之后：

```
@echo off
for %%A in ("%~dp0") do echo %%~A 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T11:32:08.703

您是否尝试过延迟变量扩展？

```
echo !dp0 
```

不知道能不能兼容quote-stripping~

# r - 输出数据时的 File.choose()？

> ID：12817853
> 
> 赞同：4
> 
> 时间：2012-10-10T11:04:43.003
> 
> 标签：r

我想使用相同的脚本来处理存储在不同位置的许多文本文件中的数据，然后将输出保存到另一个唯一位置，而不必每次都修改我的脚本。我有输入数据使用：

`data <- read.table(file.choose(),header=T)`

并想用类似的界面来保存最终表格以选择位置并输入文件的名称。

我试过了：

`write.csv(data.table,file.choose())`

但这仅在我在运行脚本之前在我想要的位置创建一个具有我想要的名称的空 .csv 文件时才有效。

还有另一种（更好的）方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T17:32:00.267

有几种可能：

```
library(gWidgets)
fileName <- gfile(type = "save") 

library(tcltk)
fileName <- tclvalue(tkgetSaveFile()) 

library(svDialogs)
fileName <- dlgSave()$res 
```

`dlgSave`在需要创建新文件时要求确认，使用附加参数（[一些基本示例](http://www.sciviews.org/_rgui/tcltk/FileOpenSave.html)）`tkgetSaveFile`似乎有点复杂，并提供了多种选项。`gfile`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-14T21:36:21.473

万一它被忽视了，file.choose() 还有一个内置参数，允许用户提供新的文件名：

```
fileName <- file.choose(new=TRUE) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-14T23:12:21.223

如果你对你的输入文件做同样的事情，我会使用类似的东西：

```
# input files from working directory
all.files <- list.files()

i <- 1
while (i <= length(all.files)){

data <- read.table(all.files[i],header=T)

# your script here

# output files
out.file <- paste(gsub(".csv","", all.files[i]),"_FINAL.csv",sep="")

write.csv(data,file=out.file)

i <- i+1
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-16T04:49:20.650

file.choose(new=TRUE) 对我有用。

Linux（流行！_OS 20.04），RStudio 1.3.1073

# iphone - 如何将 4" 启动图像添加到当前的 iOS 5 应用程序？

> ID：12817857
> 
> 赞同：-1
> 
> 时间：2012-10-10T11:05:04.263
> 
> 标签：iphone, ios

我已经安装了 Xcode 4.5.1，并且我有一个为 iOS 5 开发的应用程序。我想升级项目，因为我可以发布应用程序升级，包括 4 英寸视网膜显示器的新启动图像。

问题是，当我在 iPhone 6 模拟器上运行时，应用程序会像苹果所说的那样在上方和下方显示黑条。但是，当我此时插入新 4" (640x1136) 的启动图像时，我在 iPhone 6 模拟器上运行时正确显示了新的启动图像，但来自 App 的背景图像显示不好，因为该应用程序似乎以全屏运行而不是继续根据需要显示上方和下方的黑条。

因此，如果我不为 4" 插入新的启动图像，我将无法发布我的应用程序的任何新更新，但是，如果我为 4" 插入新的启动图像，则应用程序显示错误的所有视图控制器，因为背景图像和布局是设计表格 3'5" 显示器...这是正确的吗？

如何解决这种情况，如果屏幕尺寸为 4"，我必须在代码中控制如果不是，则从这个新分辨率放置一张图像，当前图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T11:31:26.070

您的应用程序的背景图像都需要更新以支持 4" 大小。此外，简单地创建后缀为 *-568h@2x.png 的应用程序版本不会自动使用它们（就像 *@2x.png 一样在 *.png). 你将不得不修改你的代码来确定屏幕的大小，如果它是 568 的高度，那么你将背景图像视图中的图像替换为 -568h 版本。你可以搜索这里有很多答案。我使用的是相当简单的：

```
- (void)viewDidLoad {
    [超级视图DidLoad];
    // 对于 iPhone 5
    // 假设 self.bgView 是背景视图
    CGFloat screenHeight = [UIScreen mainScreen].bounds.size.height;
    if ([UIScreen mainScreen].scale == 2.f && screenHeight == 568.0f) {
        self.bgView.image = [UIImage imageNamed:@"SomeImage-568h@2x"];
    }
...
}

```

# flash - 如何在 Microsoft PixelSense（以前的 Surface）Table 上运行多点触控 Flash (AS3) 应用程序？

> ID：12817858
> 
> 赞同：1
> 
> 时间：2012-10-10T11:05:04.973
> 
> 标签：flash, multi-touch, surface

我知道已经有一个问题询问是否可能。但是这个问题并没有说明这是怎么可能的。我需要使用 flash 在 Microsoft Surface 桌面上制作多点触控应用程序。我在谷歌上找不到它，因为我无权发表评论。所以我不能在这个主题中问它：[是否可以在 Microsoft PixelSense（以前的 Surface）表上运行多点触控 Flash (AS3) 应用程序？](https://stackoverflow.com/questions/11931463/is-it-possible-to-run-multitouch-flash-as3-apps-on-microsoft-pixelsense-forme)

# java - 在 Ant 任务中运行“headless Eclipse”

> ID：12817860
> 
> 赞同：2
> 
> 时间：2012-10-10T11:05:07.717
> 
> 标签：java, eclipse, ant, command-line, codepro

**请注意**- 对于任何认为我应该在这里“删除背景故事”或这个问题“与 CodePro 无关”的人，我想提一下 CodePro 关于如何完成他们的 Ant 任务的文档很少 -并从命令行正确运行。CodePro 几乎 100% 由 UI 驱动，他们的文档重点关注这一点。如果可以完全回答这个问题，我相信它将成为像我这样只想从命令行运行 CodePro 任务的其他开发人员的少数（如果不是唯一）完整文档之一，作为他们的一部分建造。

我试图让[CodePro AnalyTix 的 Ant 任务](https://developers.google.com/java-dev-tools/codepro/doc/features/ant/enhancements)从命令行工作。

阅读文档并下载一些示例后，它不希望您以在 Ant 中运行外部定义任务的正常方式运行任务，通常如下所示：

1.  在第 3 方 Ant jar`xmlns`的根元素内定义一个属性`<project>`
2.  `<taskdef>`用声明定义 1+ 个任务
3.  `<target>`从元素内部调用那些定义的任务

使用 CodePro，Ant 任务依赖于许多核心 Eclipse jar/类。如果您下载他们的任何[示例](https://developers.google.com/java-dev-tools/codepro/doc/features/ant/headless)，您将看到编写的 Windows BATCH 文件，这些文件演示了他们希望您如何运行他们的 Ant 任务，并且它们都采用以下形式：

```
set JAVAEXE="\Programs\jdk1.5.0_05\jre\bin\java.exe"
set ECLIPSEHOME="\Programs\eclipse_330"
set WORKSPACE="\Programs\eclipse_330_headless\headless_arbitrary_src_multi_audit\workspace"
for /f "delims= tokens=1" %%c in ('dir /B /S /OD %ECLIPSEHOME%\plugins\org.eclipse.equinox.launcher_*.jar') do set EQUINOXJAR=%%c

:run
@echo on
%JAVAEXE% -jar %EQUINOXJAR% -clean -noupdate -application org.eclipse.ant.core.antRunner -data %WORKSPACE% -verbose -file headless.xml %* >headless_out.txt 2>&1 
```

这`headless.xml`是具有 CodePro Ant 目标和任务的 Ant 文件。

我整个上午都在尝试为我的 Ant lib 目录提供以“正常”方式运行这些 CodePro 任务所需的必要依赖项，但发现自己开始将整个 Eclipse`plugins/`目录复制到`ANT_HOME/lib`! 我已经恢复了这些更改，现在准备接受这种（相当丑陋的）从命令行运行 Ant 的方式。

借鉴上面的示例，这是我的新设置：

*   `build.xml`是我的“核心”Ant 构建文件，并且是我将有一个名为的目标的地方`run-codepro-analysis`
*   `codepro-analysis.xml`是定义我的所有 CodePro 任务的地方（在包装器目标内部）；这相当于`headless.xml`上面的 BATCH 文件
*   我想`buildfile.xml#run-codepro-analysis`调用`<java>`和运行与上面 BATCH 文件中提供的完全相同的参数，但**有以下例外**：
    *   巧合的是，我的机器上已经设置了三个环境变量：（`JAVA_HOME`指向我的 JDK）`ECLIPSE_HOME`和`WORKSPACE_HOME`；我显然想用这些来代替`JAVAEXE`,`ECLIPSEHOME`和`WORKSPACE`
    *   我希望将输出重定向到与我运行时相同的控制台/终端`ant -buildfile build.xml run-codepro-analysis`；*不是* `headless_out.txt`或其他一些文件

看到这是一个非常复杂的命令（有许多选项、参数，甚至选项的嵌套参数），我不太确定如何`<java>`在目标内构造元素`run-codepro-analysis`，但这是我目前所拥有的：

```
<target name="run-codepro-analysis">
    <java fork="true" failonerror="true"
        jar="${env.ECLIPSE_HOME}/plugins/org.eclipse.equinox.launcher_*.jar">
        <arg line="-clean -noupdate -application org.eclipse.ant.core.antRunner -data ${env.WORKSPACE_HOME} -verbose -file codepro-analysis.xml"/>
</target> 
```

当我运行它时，构建失败：

> [java] 无法访问 jarfile /home/myuser/sandbox/workbench/eclipse/indigo-3.7/eclipse/plugins/org.eclipse.equinox.launcher_*.jar

我不确定这是否是因为通配符失败并且它实际上正在寻找`org.eclipse.equinox.launcher_*.jar`，或者我的`<java>`任务中的其他内容配置不正确。提前感谢任何可以帮助我完成这项工作的人。就像我说的那样，网络上没有其他全面的文档（无论如何我都可以找到）解释如何使它作为构建的一部分工作，特别是对于无法运行 BATCH 文件的 Linux 开发人员。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T20:34:37.363

差不多好了。

`jar`参数不能有通配符，但这可以很容易地修复，使用`classname`and`classpath`代替（可以`fileset`与通配符一起使用）。

我还建议使用单参数形式将命令行参数传递给 java 任务。以后的惊喜少了

```
<target name="run-codepro-analysis">
  <java fork="true" failonerror="true"
    classname="org.eclipse.equinox.launcher.Main"
  >
    <arg value="-clean"/>
    <arg value="-noupdate"/>
    <arg value="-application"/>
    <arg value="org.eclipse.ant.core.antRunner"/>
    <arg value="-data"/>
    <arg file="${env.WORKSPACE_HOME}"/>
    <arg value="-verbose"/>
    <arg value="-file"/>
    <arg file="codepro-analysis.xml"/>

    <classpath>
      <fileset dir="${env.ECLIPSE_HOME}/plugins">
        <include name="org.eclipse.equinox.launcher_*.jar"/>
      </fileset>
    </classpath>
  </java>
</target> 
```

# pdf - 使用 XSL FO 在纸上打印时是否可以隐藏 PDF 中的超链接

> ID：12817869
> 
> 赞同：1
> 
> 时间：2012-10-10T11:05:33.393
> 
> 标签：pdf, pdf-generation, xsl-fo, apache-fop

我正在创建一个 PDF，并且有几个超链接包含“单击此处打开”之类的文本。这些文字在纸上打印时毫无意义。当 PDF 打印在纸上时，是否可以隐藏这些链接？我正在使用 apache fop 0.20.x（我不确定版本，但它很旧）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T10:42:34.057

您可以将超链接创建为 PDF 链接注释。所有注释都有一个“打印”属性。您可以将其设置为 false。这是一个使用我们的产品做一些更复杂的事情的[例子](http://www.gnostice.com/nl_article.asp?id=220&t=Creating_Alternative_PDF_Content_For_Screen_and_Print)，但是您也可以在 XSL-FO 中做同样的事情。

# iphone - 如何使用 NSOutputStream 通过套接字发送 NSString

> ID：12817877
> 
> 赞同：9
> 
> 时间：2012-10-10T11:06:01.887
> 
> 标签：iphone, ios, sockets

我必须使用套接字编程为 iOS 创建一个聊天应用程序，我的 IP 地址是`192.168.0.57:9300`. 我使用了`Raywenderlich`套接字编程示例，接收数据正常但发送不工作，没有任何错误或崩溃。我的代码如下。

打开流的代码

```
- (void) initNetworkCommunication {

    CFReadStreamRef readStream;
    CFWriteStreamRef writeStream;
    CFStreamCreatePairWithSocketToHost(NULL, (CFStringRef)@"192.168.0.57", 9300, &readStream, &writeStream);

    inputStream = (NSInputStream *)readStream;
    outputStream = (NSOutputStream *)writeStream;
    [inputStream setDelegate:self];
    [outputStream setDelegate:self];
    [inputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
    [outputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
    [inputStream open];
    [outputStream open];    
} 
```

发送数据的代码

```
- (IBAction)sendMessage:(id)sender
{
        NSString *response  = @"lets start chat";
        NSData *data = [[NSData alloc] initWithData:[response dataUsingEncoding:NSASCIIStringEncoding]];
        [outputStream write:[data bytes] maxLength:[data length]]; 
} 
```

代表们

```
- (void)stream:(NSStream *)theStream handleEvent:(NSStreamEvent)streamEvent {

    NSLog(@"stream event %i", streamEvent);

    switch (streamEvent) {

        case NSStreamEventOpenCompleted:
            NSLog(@"Stream opened");
            break;
        case NSStreamEventHasBytesAvailable:

            if (theStream == inputStream) {

                uint8_t buffer[1024];
                int len;

                while ([inputStream hasBytesAvailable]) {
                    len = [inputStream read:buffer maxLength:sizeof(buffer)];
                    if (len > 0) {

                        NSString *output = [[NSString alloc] initWithBytes:buffer length:len encoding:NSASCIIStringEncoding];

                        if (nil != output) {

                            NSLog(@"\nreciving data------%@,buffer);

                            [self messageReceived:output];

                        }
                    }
                }
            }
            break;

        case NSStreamEventErrorOccurred:

            NSLog(@"Can not connect to the host!");
            break;

        case NSStreamEventEndEncountered:

            [theStream close];
            [theStream removeFromRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
            [theStream release];
            theStream = nil;

            break;
        default:
            NSLog(@"Unknown event");
    }

}
Message sending
    - (void) messageReceived:(NSString *)message {

        [self.messages addObject:message];
        [self.tView reloadData];
        NSIndexPath *topIndexPath = [NSIndexPath indexPathForRow:messages.count-1 
                                                       inSection:0];
        [self.tView scrollToRowAtIndexPath:topIndexPath 
                          atScrollPosition:UITableViewScrollPositionMiddle 
                                  animated:YES];

    } 
```

请给我建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-27T15:05:21.733

您应该在回复末尾添加“\n”，如下所示：

```
- (IBAction)sendMessage:(id)sender
{
        NSString *response  = @"lets start chat\n";
        ////your code
} 
```

这对我有用，但我的问题是我无法使用该功能接收数据`(void)stream:(NSStream *)theStream handleEvent:(NSStreamEvent)streamEvent`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-07T16:41:58.157

我发现写一个单独的线程为我解决了这个问题。
这是有道理的，因为人们不应该真正在主线程上进行网络操作。
这是我的代码：

```
dispatch_async(dispatch_get_global_queue(QOS_CLASS_BACKGROUND, 0), ^(void) {
    NSData *data = [[NSData alloc] initWithData:[response dataUsingEncoding:NSASCIIStringEncoding]];
    NSInteger len = [outputStream write:[data bytes] maxLength:[data length]];
    NSLog(@"Len = %ld", len);
}); 
```

还有一点需要注意的是，NSStreamEventOpenCompleted 事件被调用了两次。当每个输入和输出流打开时一次。因此，需要注意不要在事件发生之前写入输出流。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-17T05:10:28.883

我有类似的问题。通过在字符串中附加换行符和换行符来解决它。

```
- (IBAction)sendMessage:(id)sender {

        NSString *response  = @"lets start chat\r\n\r\n";
        NSData *data = [[NSData alloc] initWithData:[response dataUsingEncoding:NSASCIIStringEncoding]];
        [outputStream write:[data bytes] maxLength:[data length]]; 
} 
```

# iphone - 如何对预先录制的视频应用过滤器？

> ID：12817879
> 
> 赞同：0
> 
> 时间：2012-10-10T11:06:11.143
> 
> 标签：iphone, ios, video, filter

我想对本地存储的视频文件应用一些过滤器（如棕褐色调、黑白等），并将过滤后的视频保存在应用程序的文档目录中。

我不想为实时视频添加过滤器。我已经搜索过了，但我看到的所有问题都是关于将过滤器应用于实时视频，而不是预先录制的。

有人可以建议我从哪里开始吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T15:54:30.947

一种方法是使用我的开源[GPUImage](https://github.com/BradLarson/GPUImage)框架。它可以加载本地存储的电影，使用可应用于实时视频的相同过滤器对其进行过滤，并将结果保存到磁盘。

请参阅框架附带的 SimpleVideoFileFilter 示例应用程序，以获取此操作的示例。

# haskell - Haskell - 输入“->”解析错误

> ID：12817884
> 
> 赞同：0
> 
> 时间：2012-10-10T11:06:24.537
> 
> 标签：haskell, parse-error

我创建了这个程序来返回一个没有零值的矩阵的位置列表。

**此代码：**

```
type Pos = (Int,Int)
type Matrix = [[Int]]

v0 [Pos]->Matrix->[Pos]
v0 [] m =[]
v0 [p:ps] m = if ((takeH m p) == 0) then v0 ps m
                                    else p:v0 ps m

takeH:: Matrix->Pos->Int
takeH m (i,j)= (m!!(i-1))!!(j-1) 
```

**产生此错误：**

```
Parse error on input '->'
Failed,modules loades: nome. 
```

**为什么 ？**

我希望我已经清楚了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T11:10:50.067

你需要`::`一个函数的类型。

```
-- vv here
v0 :: [Pos] -> Matrix -> [Pos]
v0 [] _ = []
-- v    v also parenthesis, not square brackets
v0 (p:ps) m = if ((takeH m p) == 0) then v0 ps
                                    else p:v0 ps 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T06:49:19.130

此外，您的 takeH 函数需要将 Matrix 和 Pos 作为参数，但您似乎只传递了一个 Pos ...？我假设你想要类似的东西`takeH x (i, j) = (x!!(i-1))!!(j-1)`。

一般来说，我强烈警告不要使用部分函数，​​例如!!。如果您的 Matrix 不包含足够的值并且超出范围怎么办？您的程序将终止并抛出错误。也考虑到这一点

# php - 从 google 获取搜索到的关键字词

> ID：12817886
> 
> 赞同：1
> 
> 时间：2012-10-10T11:06:28.390
> 
> 标签：php, search

我只是想知道当用户从谷歌来到我们的网站时，是否有可能得到用户在谷歌搜索的关键字。

我只需要知道技术而不是代码，我可以编码，但不知道这在技术上是否可行。

谢谢！-D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T11:10:22.540

您需要读取浏览器发送的 HTTP_REFERER 标头，使用`$_SERVER['HTTP_REFERER']`. 这包含浏览器来自的网站 (URL)。在此网址中，您还可以在某处找到搜索词（如果访问者来自谷歌）。

此值可能为空，因为您可以在浏览器中关闭此功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T11:11:31.323

最简单的方法是获取引荐来源网址，然后对其进行解析以获取用于查找您的网站的查询字符串。此[链接](http://betterwp.net/wordpress-tips/get-search-keywords-from-referrer/)提供了一些有关如何轻松实现此目的的提示。

如果做不到这一点，谷歌分析会告诉你哪些搜索词将人们引导到你的网站，但这只是真正有用的后记——你不能真正用它来表示“你通过*关键字*找到了这个网站”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T10:32:35.033

您只会从搜索时未登录 Google 服务（gmail、docs 等）的用户的查询中获得“q”参数。

为所有查询（据我所知）获取“q”（关键字参数）的唯一方法是在您的网站上实施 https（ssl 证书）。但是，您的网站必须将所有流量从旧的 http 索引页面（在 google 中）重定向到新的 https 页面，以便自动工作。

请注意，这样做可能会剥夺自己的收入，因为安全网站（截至目前）无法实施 Google Adsense。（可以，但这并不简单，用户可以看到，他们必须启用提示以显示不安全的内容）。

顺便提一句。我知道，这很痛苦。谷歌在我们的道路上设置了越来越多的障碍，如果这没有停止，人们最终会开始寻找更好的服务（富人的商业机会）。

# asp.net - ASP.net Uploadify Querystring 文本框值

> ID：12817889
> 
> 赞同：0
> 
> 时间：2012-10-10T11:06:30.617
> 
> 标签：asp.net, uploadify, multifile-uploader

在参考这篇文章[ASP.net Uploadify Querystring checkbox value](https://stackoverflow.com/questions/9354598/asp-net-uploadify-querystring-checkbox-value)时，我只是尝试将文本框控件的值传递给 FileUploads.aspx.cs 但我无法获取该值，既不使用 POST 方法也不使用 GET。

```
<p>
  <asp:TextBox ID="tbTrainingName" runat="server" CssClass="TextBox"></asp:TextBox>
</p>
<div id="fuFiles"></div>  

$(document).ready(function () {
   $('#fuFiles').uploadify({
   // Some options
  'method'   : 'GET',
  'uploader': '_scripts/uploadify.swf',
  'script': 'FileUploads.aspx?trainingName=' + ('[id$=tbTrainingName]').val()  '',
  'cancelImg': '_scripts/cancel.png',
  'auto': 'true',
  'multi': 'true',
  'buttonText': 'Upload Files...',
  'queueSizeLimit': 3,
  'simUploadLimit': 2
  });
  });

   In FileUploads.aspx.cs

   HttpPostedFile uploads = Request.Files["FileData"];
   string file = System.IO.Path.GetFileName(uploads.FileName); 
```

我在 Request.QueryString 中看不到任何东西。你能帮我看看我哪里错了吗！！另外，如果您有除uploadify 之外的任何好的建议，请建议，我使用的是asp.net 4.0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T08:56:17.860

这一切都在你的时间...

在您的示例代码中，您在**创建uploadify 时**（即在页面加载时）`script`从下拉值（例如使用`('[id$=tbTrainingName]').val()`）设置属性。

 **您需要在选择文件*后*、文件开始上传*之前设置该值。*

我们最终关闭了该`auto`属性并使用单独的上传按钮来触发上传。单击该上传按钮时，我们会更改表单数据，但在我们告诉uploadify 开始之前。在服务器上，我们从表单数据中提取用户选择。

**注意：我们使用的是最新的uploadify***

# forms - Symfony 找不到表单类型 - 我错过了什么？

> ID：12817890
> 
> 赞同：0
> 
> 时间：2012-10-10T11:06:34.210
> 
> 标签：forms, symfony, controller

这是我得到的错误：

```
Fatal error: Class 'bnd\myBundle\Controller\pageApproachUpdateType' not found in C:\wamp\www\Symfony\src\bnd\myBundle\Controller\NTController.php on line 208 
```

好像 Symfony 正在寻找错误的目录......

然而，在同一个 NTController.php 中，我已经有一些代码可以调用一个可以正常工作的表单。我只是复制/重命名/粘贴了这些行以匹配正确的类型和处理程序。

这是 Controller/NTController.php 的摘录：

```
public function pageApproachUpdateAction($pageId)
    {
    $em=$this->getDoctrine()->getEntityManager();
    $page = $em->getRepository('bndmyBundle:Page')->find($pageId);
    $formNT = $this->createForm(new pageApproachUpdateType, $page);
    $formHandler = new pageApproachUpdateHandler($formNT, $this->get('request'), $this->getDoctrine()->getEntityManager());
    ----
    } 
```

以及表单类型 Form/pageApproachUpdateType.php 的摘录：

```
namespace bnd\myBundle\Form;
use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilder;

class pageApproachUpdateType extends AbstractType
{
---
} 
```

我试图清除缓存；我只是不明白我错过了什么......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T11:16:33.247

您需要在 NTController.php 文件的顶部添加 pageApproachUpdateType 的 use 语句：

```
use bnd\myBundle\Form\pageApproachUpdateType; 
```

# database - Meteor 和另一种数据库

> ID：12817891
> 
> 赞同：1
> 
> 时间：2012-10-10T11:06:39.630
> 
> 标签：database, meteor

> 您可以通过提供服务器端数据库驱动程序和/或实现替代 API 的客户端缓存来替代 MongoDB 的另一个数据库。mongo-livedata 是这样一个项目的一个很好的起点。

我对 Meteor 感兴趣，但对 Mongo DB 没有。我很好奇如何连接我的客户使用的数据库，通常是 Oracle、MySQL 或 Postgres。

我不知道“mongo-livedata”是什么，谷歌显示上面的参考是meteor.com上的唯一参考——你能解释一下吗？只能访问 Mongo 将是一种耻辱。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T09:31:26.767

Meteors *mongo-livedata*使用由流星/节点运行时本身处理的“内置”mongoDB 库、数据库、集合和设置。

`Collections`在使用API时，Meteor 目前不直接支持其他数据库。但是应该可以编写一个自己的*连接器*来实​​现`Collections`.

Meteor 目前处于早期状态 - 所以请注意 API 和最佳协议可能仍会发生根本性变化！

# javascript - 捕获 submit() 方法

> ID：12817895
> 
> 赞同：2
> 
> 时间：2012-10-10T11:06:50.817
> 
> 标签：javascript, submit, capture

我有一个像这样的表格：

```
<form method="POST" action="page.html" onsubmit="alert('foo'); // validate();" name="foobar">
...
</form> 
```

和一个像这样的链接：

```
<div onclick="document.foobar.submit();">click me</div> 
```

如何捕获 submit() 方法并调用我的验证函数？

[JsBin 示例](http://jsbin.com/ulixuy/1/edit)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T11:28:09.723

使用 id 唯一标识您的表单

```
document.getElementById('formid').onsubmit = function() {
    // You have captured the submit method now do what you need
}; 
```

[演示](http://jsbin.com/ulixuy/53/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T11:12:04.630

您可以从 html 本身调用方法。修改[jsbin](http://jsbin.com/ulixuy/57/edit)。`submitHandler`您可以调用并传递表单参考，而不是单击提交表单 。

```
<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title>JS Bin</title>
  <script type="text/javascript">
    function validate(){

    }

    function submitHandler(form){
      validate();
      alert('foo');

}
    window.onload = function(){
        document.foobar.submit = submitHandler;
    }
</script>

</head>
<body>
    <form method="POST" action="page.html" onsubmit="submitHandler(this);" name="foobar">
      <input type="text" />
    </form>

    <div onclick="document.foobar.submit()">click me</div>
</body>    
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T11:09:15.140

您可以使用 jQuery`.submit()`处理程序。

```
$('form').submit(function(evt) {
  evt.preventDefault();
  alert('Handler for .submit() called.');
  // Validate function returns false or true
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T11:10:42.063

尝试这个：

```
<script type="text/javascript">
function addEventsToHTML(){
    var form = document.getElementById('foobar');
    form.onsubmit = submitHandler;
    function submitHandler(){
        validate();
    }
}
window.onload = addEventsToHTML;
</script> 
```

# android - Android：在 ListView 中对整数值进行排序

> ID：12817898
> 
> 赞同：3
> 
> 时间：2012-10-10T11:06:52.383
> 
> 标签：android, listview, sorting, collections, android-arrayadapter

我正在制作一个高分列表视图。ListView 有 2 个元素，播放器的名称和分数。分数是一个整数值。我正在使用 Collections.sort，但是，在启动活动时，列表未排序。我已经为列表加载了虚拟值。这些在 strings.xml 中声明为字符串数组。这是我的 onCreate 的片段：

```
 @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    backgroundMusic = MediaPlayer.create(HighScores.this, R.raw.highscore);
    backgroundMusic.setLooping(true);
    backgroundMusic.start();

    String databasePath = getAbsolutePath("highscore.dbs");

    // open the database
    try {
        db = StorageFactory.getInstance().createStorage();
        db.open(databasePath, 40 * 1024);
        Toast.makeText(this, "HERE", Toast.LENGTH_SHORT).show();
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    // check if a root object is present in this file
    Index<FetchDetails> root = (Index<FetchDetails>) db.getRoot();
    if (root == null) {
        // Root is not yet defined: storage is not initialized
        root = (Index) db.createIndex(String.class, false);
        String[] nameList = getResources().getStringArray(
                R.array.name_array);
        String[] scoreList = getResources().getStringArray(
                R.array.score_array);
        for (int i = 0; i < scoreList.length; i++) {
            FetchDetails populate = new FetchDetails();
            populate.setName(nameList[i]);
            populate.setScore(scoreList[i]);
            root.put(populate.getScore(), populate);
            db.setRoot(root);
        }

    }

    String filter = "";
    ArrayList<FetchDetails> items = root.getPrefixList(filter);
    results = new ArrayList<FetchDetails>();
    ScoreComparator compare = new ScoreComparator();
    for (int i = 0; i < items.size(); i++) {
        FetchDetails arraylist = new FetchDetails();
        arraylist.setName(items.get(i).getName());
        arraylist.setScore(items.get(i).getScore());
        results.add(arraylist);
        Collections.sort(results, compare);
    }

    adapter = new CustomAdapter(results);
    setListAdapter(adapter);
    updateList();

} 
```

我的更新列表：

```
 private void updateList() {
    // TODO Auto-generated method stub
    Intent updateIntent = getIntent();
    if ((updateIntent.getStringExtra(HighScores.NAME) != null)
            &&   (updateIntent.getStringExtra(MegamanStrikes.PLAYER_SCORE) != null)) {
        FetchDetails updateList = new FetchDetails();
        ScoreComparator compare = new ScoreComparator();
        updateList.setName(updateIntent.getStringExtra(HighScores.NAME));
        updateList.setScore(updateIntent
                .getStringExtra(MegamanStrikes.PLAYER_SCORE));

        Toast.makeText(this, updateIntent.getStringExtra(MegamanStrikes.PLAYER_SCORE), Toast.LENGTH_SHORT).show();
        Toast.makeText(this, updateIntent.getStringExtra(HighScores.NAME), Toast.LENGTH_SHORT).show();

        results.add(updateList);
        adapter.notifyDataSetChanged();
        Collections.sort(results, compare);

        Index<FetchDetails> rootEdit = (Index<FetchDetails>) db.getRoot();
        rootEdit.put(updateList.getScore(), updateList);
        db.setRoot(rootEdit);
    }

} 
```

我的获取详细信息类

```
package com.cs119.megamanstrikes;

import org.garret.perst.Persistent;

public class FetchDetails extends Persistent implements Comparable<FetchDetails> {

    private String name;
    private String score;

public String getName() {
    return name;
}

public void setName(String name) {
    this.name = name;
}

public String getScore() {
    return score;
}

public void setScore(String score) {
    this.score = score;
}

@Override
public int compareTo(FetchDetails another) {
    // TODO Auto-generated method stub
    return score.compareTo(another.score);
} 
```

}

我的自定义适配器

```
 private class CustomAdapter extends BaseAdapter {

    Index<FetchDetails> root = (Index<FetchDetails>) db.getRoot();
    String filter = "";
    ArrayList<FetchDetails> items = root.getPrefixList(filter);

    public CustomAdapter(ArrayList<FetchDetails> highscore) {
        items = highscore;
    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return items.size();
    }

    @Override
    public Object getItem(int index) {
        // TODO Auto-generated method stub
        return items.get(index);
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        LayoutInflater inflater = getLayoutInflater();
        View view;

        if (convertView == null) {
            view = inflater.inflate(R.layout.row, null);
        } else {
            view = convertView;
        }

        // extract the views to be populated
        TextView Name = (TextView) view.findViewById(R.id.name);
        TextView Score = (TextView) view.findViewById(R.id.score);

        FetchDetails score = items.get(position);

        Name.setText(score.getName());
        Score.setText(score.getScore());

        // return the view
        return view;
    }
} 
```

我的 Comparator 类用作排序的第二个参数（我什至不确定这是否需要！）

```
 package com.cs119.megamanstrikes;

import java.util.Comparator;

class ScoreComparator implements Comparator<FetchDetails> {

@Override
public int compare(FetchDetails objA, FetchDetails objB) {
    // TODO Auto-generated method stub
    return objA.getScore().compareTo(objB.getScore());
}
} 
```

然而输出仍然是这样的：

![在此处输入图像描述](../Images/e5acd59d49cf7d01487390a4c0f4483f.png)

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T11:59:41.070

每次添加不必要的值时，您都会对列表进行排序，并将分数排序为字符串，这不是您想要的。您可能想要转换为整数。的典型实现`compareTo()`是取一个值-另一个值，在您的情况下类似于：

```
return Integer.parseInt(objB.getScore()) - Integer.parseInt(objA.getScore()); 
```

而且您确实对升序进行了排序，这也可能不是您想要的。（我在上面的代码中通过切换`objA`和`objB`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T11:56:11.777

输出不正确吗？你没有按相反的顺序排序......

你可以使用类似的东西

```
Collections.reverseOrder(); 
```

或更改覆盖的比较方法...

# ssl - Azure 虚拟机中的多个启用 SSL 的站点

> ID：12817899
> 
> 赞同：5
> 
> 时间：2012-10-10T11:06:53.533
> 
> 标签：ssl, azure, sni, azure-virtual-machine

为了使我们的应用程序在 Azure 中运行，我们即将完成大量更改，我们希望使用虚拟机，而不是部署机器的典型角色方式。

到最后我开始列出我需要做的事情的清单，我似乎找不到任何在同一虚拟机上使用多个 SSL 记录的文件。我在 SNI 上看到过一些帖子，但在阅读了 SNI 后，它不支持 Windows XP。在研究了我们的用户群之后，我们 1/3 的用户从 Windows XP 机器上访问，这使得 SNI 毫无用处。

如果 VM 不能支持多个 SSL 证书，我是否遗漏了一些东西，因为这似乎是架构上的巨大疏忽？

有没有人在 Azure 中有任何工作在一个 VIP 地址上支持多个 SSL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:29:03.117

我同意罗伯特。

我是一名 Microsoft 技术布道者，最近帮助我的一个合作伙伴实施了云服务的 SNI 自动化解决方案（详细说明和示例“即插即用”源代码，位于[http://www.vic.ms/microsoft/ windows-azure/multiples-ssl-certificates-on-windows-azure-cloud-services/](http://www.vic.ms/microsoft/windows-azure/multiples-ssl-certificates-on-windows-azure-cloud-services/)）。

尽管许多统计数据表明在 Windows XP 上运行的 Internet Explorer 是相关的，但实际上它可能不适合您的受众。

例如，如果您因为经营一个电子商务网站而想使用 SSL，我很肯定您的受众（拥有信用卡并愿意在网上购物时使用它的人）可能不再使用 Windows XP。至少，我在巴西的几十个电子商务合作伙伴就是这种情况……

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T11:32:13.503

AFAIK 您有以下选择：

1.  通过一个 IP 使用 SNI
2.  设置您的域以使用非标准 SSL 端口
3.  每个 SSL 域使用一个 IP 地址。

唯一的机会是如果您的域都是一个域的子域。那么通配符证书将是最佳选择。

顺便说一句：SNI 在 WinXP 上仅在 IE 中不受支持。其他浏览器如 Firefox、Chrome、Opera 确实支持 XP 上的 SNI。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-30T18:14:40.033

现在，您可以在 Azure VM 上拥有多个允许多个 SSL 的公共虚拟 IP，费用约为 3 美元/月。请参阅[定价](https://azure.microsoft.com/en-us/pricing/details/ip-addresses/)和[操作方法](http://clemmblog.azurewebsites.net/hosting-multiple-ssl-sites-in-azure-vms/)。

# objective-c - 找出我的方法执行需要多长时间

> ID：12817901
> 
> 赞同：0
> 
> 时间：2012-10-10T11:07:06.317
> 
> 标签：objective-c, profiling

如何找出我的哪些方法在我的 iPad 应用程序中执行时间最长？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T11:30:14.067

为了更好地进行 CPU 分析，您应该在 XCode Instruments 中使用 Time profiler。

参考[http://cocoaforbreakfast.wordpress.com/2011/03/01/time-profiler-when-a-small-change-can-bring-huge-gains/](http://cocoaforbreakfast.wordpress.com/2011/03/01/time-profiler-when-a-small-change-can-bring-huge-gains/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T11:18:21.743

Put an `NSLog`at the beginning of the method and one at the end

the console shows the exact time for the `NSLog` so thats how you can determine which takes log time

Example:

```
-(void)buttonsTag{
  NSLog(@"Beginning of buttonsTag Method");
  btn1.tag  =1;
  btn2.tag  =2;
  btn3.tag  =3;
  btn4.tag  =4;
  btn5.tag  =5;
  btn6.tag  =6; 
  btn7.tag  =7;
  btn8.tag  =8;
  btn9.tag  =9;
  btn10.tag =10;

  NSLog(@"End of buttonsTag Method");

}

 //The console output:
 //2012-10-10 14:22:29.308 APP[3691:c07] Beginning of buttonsTag Method
 //2012-10-10 14:22:29.309 APP[3691:c07] End of buttonsTag Method
 //The deference is 14:22:29.309 - 14:22:29.308 = 00:00:00.001 
```

# java - pdftk戳时未处理的Java异常

> ID：12817902
> 
> 赞同：0
> 
> 时间：2012-10-10T11:07:08.640
> 
> 标签：java, pdftk

我正在尝试使用 pdftk 在 pdf 上盖章。我跑：

```
pdftk original.pdf stamp seal.pdf output sealed.pdf 
```

但它只是用一个特定的pdf得到这个：

```
Unhandled Java Exception:
gnu.xml.dom.ls.DomLSException: unbound element prefix: "xmp"
   at gnu.xml.dom.ls.DomLSParser.doParse(libgcj.so.10)
   at gnu.xml.dom.ls.DomLSParser.parse(libgcj.so.10)
   at gnu.xml.dom.DomDocumentBuilder.parse(libgcj.so.10)
   at com.lowagie.text.xml.xmp.XmpReader.<init>(itext-2.1.7.jar.so)
   at com.lowagie.text.pdf.PdfStamperImp.close(itext-2.1.7.jar.so)
Caused by: org.xml.sax.SAXParseException: unbound element prefix: "xmp"
   at gnu.xml.stream.SAXParser.parse(libgcj.so.10)
   at gnu.xml.dom.ls.DomLSParser.doParse(libgcj.so.10)
   ...4 more
Caused by: javax.xml.stream.XMLStreamException: unbound element prefix: "xmp"
   at gnu.xml.stream.XMLParser.error(libgcj.so.10)
   at gnu.xml.stream.XMLParser.readStartElement(libgcj.so.10)
   at gnu.xml.stream.XMLParser.next(libgcj.so.10)
   at gnu.xml.stream.SAXParser.parse(libgcj.so.10)
   ...5 more 
```

我尝试使用其他 pdf 并且它们可以工作。我在其他开发服务器上尝试过，它在那里工作。在两台服务器中，我都有相同版本的 pdftk 和 java。

谁能帮我？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-20T16:25:13.953

这是 PDF 文件中的错误，pdftk 无法修复它。在 Ubuntu 中，您可以打开 PDF 并将其打印成 PDF，它必须修复错误。然后您可以使用 PDFedit 更改布局。

# c# - 无法通过 FileOpenDialog 在 WPF 中加载脚本文件

> ID：12817909
> 
> 赞同：0
> 
> 时间：2012-10-10T11:07:31.443
> 
> 标签：c#, .net, wpf, binding, fileopendialog

我正在开发一个 WPF 应用程序，我刚刚遇到了加载脚本文件（.xml）操作，我应该从系统加载它，从组合框中获取文件并调用加载方法。

xml:

```
<ComboBox Name="ScriptCombo" SelectedIndex="0" >
         <ComboBoxItem Content="Select Aardvark Script" />
         <ComboBoxItem Content="{Binding ScriptPath}" />
</ComboBox>

<Button Content="..." Command="{Binding Path=ScriptPathCommand}" Name="ScriptFileDialog" /> 
```

视图模型：

```
private string _ScriptPath;
public string ScriptPath
{
    get { return _ScriptPath; }
    set
    {
        _ScriptPath = value;
        NotifyPropertyChanged("ScriptPath");
    }
}

// Method gets called when ... Button is clicked
private void ExecuteScriptFileDialog()
{
    var dialog = new OpenFileDialog { InitialDirectory = _defaultPath };
    dialog.DefaultExt = ".xml";
    dialog.Filter = "XML Files (*.xml)|*.xml";
    dialog.ShowDialog();
    ScriptPath = dialog.FileName; //Stores the FileName in ScriptPath
} 
```

这将打开一个文件对话框，让我选择一个 .xml 文件。在这里，当对话框打开时，它不会显示 CurrentWorkingDirectory。怎么可能达到？？？因此，当我单击打开并在 ScriptPath statemnt 附近放置一个断点时选择后，它会在我的组合框中显示文件的路径。

我还想获取这个文件并将其存储在 FILE 类型中，从而调用 LoadFile 方法。我在 C++ 中这样做如下：

```
File file = m_selectScript->getCurrentFile(); //m_selectScript is combobox name
if(file.exists())
{
LoadAardvarkScript(file);
}

void LoadAardvarkScript(File file)
{
} 
```

在 WPf 我确实喜欢：

```
ScriptPath = dialog.FileName;
if (File.Exists(ScriptPath))
{
   LoadAardvarkScript(ScriptPath);
}
}

public void LoadAardvarkScript(string ScriptPath)
{
   MessageBox.Show("Start Reading File");
} 
```

我在 C++ 代码中将 FILE 作为参数传递，在这里我传递一个字符串。读取 xml 文件时会产生任何问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T12:00:48.683

我不完全理解您的问题是什么，但是 OpenFileDialog 最初显示的目录是由它的`InitialDirectory`属性设置的，因此是您放入`defaultPath`变量的内容。例如，这可能是[System.Environment.CurrentDirectory](http://msdn.microsoft.com/en-us/library/system.environment.currentdirectory.aspx)属性的值。

对于您问题的第二部分，.Net 中有一个[File](http://msdn.microsoft.com/en-us/library/system.io.file.aspx)类。

# c# - 使用通用约束实现接口

> ID：12817911
> 
> 赞同：14
> 
> 时间：2012-10-10T11:07:37.463
> 
> 标签：c#, generics

有点惊讶为什么这不起作用

这是编译器的限制还是不支持它有意义？

```
public class Class1<T> : IInterface
    where T : Test2
{
    public T Test { get; private set; }
}

public class Test2
{
}

internal interface IInterface
{
    Test2 Test { get; }
} 
```

我得到的错误是

```
'ClassLibrary1.Class1<T>' does not implement interface member 'ClassLibrary1.IInterface.Test'. 
'ClassLibrary1.Class1<T>.Test' cannot implement 'ClassLibrary1.IInterface.Test' because it does not have the matching return type of 'ClassLibrary1.Test2'. 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-10T11:15:10.597

为了更正，显式实现接口：

```
public class Class1<T> : IInterface
where T : Test2
{
    public T Test { get; private set; }

    Test2 IInterface.Test
    {
        get { ... }
    }
} 
```

然后你可以避免编译错误。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-10T11:09:32.367

由于`T`可以是派生自 的任何类型`Test2`，`Class1`因此不完全实现`IInterface`。

更一般地说，不可能通过返回协变类型来实现接口：

```
interface IFoo
{
    object Bar { get; }
}

class Broken : IFoo
{
    string Bar { get; } // you cannot expect to implement IFoo this way!
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T11:14:26.490

将您的界面更改为此，它将编译：

```
public class Class1<T> : IInterface<T>
    where T : Test2
{
    public T Test { get; private set; }
}

public class Test2
{
}

internal interface IInterface<T>
    where T : Test2
{
    T Test { get; }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T11:15:06.880

您是否可以使您的界面通用，例如

```
public class Class1<T> : IInterface<T>
    where T : Test2
{ 
    public T Test { get; private set; } 
} 

public class Test2 
{ 
} 

internal interface IInterface<T>
{ 
    T Test { get; } 
} 
```

或者您是否试图避免在接口上使用泛型（这也有充分的理由！）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-10T11:22:26.413

接口说属性 Test 是 Test2 类型。在您的实现中 Class1 属性 Test 是继承 Test2 但不完全是它的某个类。要做你想做的事，你需要写这样的东西：

```
public class Class1<T> : IInterface
    where T : Test2
{
    private T _test;
    public Test2 Test { get{return _test} }
}

public class Test2
{ 
}

internal interface IInterface 
{
    Test2 Test { get; }
} 
```

# objective-c - 自动在 nsobject 中创建数组

> ID：12817914
> 
> 赞同：0
> 
> 时间：2012-10-10T11:07:47.367
> 
> 标签：objective-c, ios, xcode

当我创建自定义类的实例时，我试图自动初始化一个数组：

**Sections.h**

```
#import <Foundation/Foundation.h>

@interface Sections : NSObject {
    NSMutableArray* allSections;
}
@property(nonatomic, strong) NSMutableArray* allSections;
@end 
```

**截面.m**

```
-(void)setAllSections:(NSMutableArray *)allSections {
    //--This method sets the array of all the sections available on the app.
    NSMutableArray *array = [[NSMutableArray alloc] init];
    Section* sectionA = [Section alloc];
    sectionA.htmlForExplanation = @"hello";
    sectionA.description = @"section a description";
    sectionA.name = @"section A";
    sectionA.SectionId = 1;

    [array addObject:sectionA];
    Section* sectionB = [Section alloc];
    sectionB.htmlForExplanation = @"hello";
    sectionB.description = @"section B description";
    sectionB.name = @"section B";
    sectionB.SectionId = 2;

    [array addObject:sectionB];
    [allSections setArray:array.mutableCopy];
} 
```

所以现在当我创建这个实例时，我想要一个预先填充的 allSections 数组

```
- (void)viewDidLoad
{
    //GET DATA FOR SECTIONS POPULATE WEB VIEWS
    Sections *sections = [[Sections alloc] init];
    //ections setAllSections:<#(NSMutableArray *)#>]
    Section* sectionA = [sections.allSections objectAtIndex:0];
    Section* sectionB = [sections.allSections objectAtIndex:1];
    [webViewA loadHTMLString:sectionA.name baseURL:nil];
    [webViewB loadHTMLString:sectionB.name baseURL:nil];
    [super viewDidLoad];

} 
```

但是这些对象似乎是空的？这是在objective-c中自动创建数组的正确方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T11:15:37.267

不，您使用的是设置而不是吸气剂。此外，如果您将数组填充到`init`.

**Sections.h**

```
#import <Foundation/Foundation.h>

@interface Sections : NSObject {
    NSMutableArray* allSections;
}

@property(nonatomic, strong) NSMutableArray* allSections;

@end 
```

**截面.m**

```
#import "Sections.h"

@implementation

@synthesize allSections

- (id) init {
   self = [super init];

   if (self) {
      allSections= [[NSMutableArray alloc] init];

      Section* sectionA = [Section alloc];
      sectionA.htmlForExplanation = @"hello";
      sectionA.description = @"section a description";
      sectionA.name = @"section A";
      sectionA.SectionId = 1;
      [allSections addObject:sectionA];

      Section* sectionB = [Section alloc];
      sectionB.htmlForExplanation = @"hello";
      sectionB.description = @"section B description";
      sectionB.name = @"section B";
      sectionB.SectionId = 2;
      [allSections addObject:sectionB];
   }

   return self;
}

@end 
```

如您所见，section 的实现不包含 allSections 的任何 setter 或 getter。`@synthesize`这些是使用指令为您创建的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T11:16:37.063

Do it in your class's init method : (And you do not need to override the setter)

```
-(id)init {
    if (self = [super init]) {
       [self initSections];
    }

    return self;
}

-(void)initSections {
    //--This method sets the array of all the sections available on the app.
    self.allSections = [[NSMutableArray alloc] init];
    Section* sectionA = [Section alloc];
    sectionA.htmlForExplanation = @"hello";
    sectionA.description = @"section a description";
    sectionA.name = @"section A";
    sectionA.SectionId = 1;

    [self.allSections addObject:sectionA];
    Section* sectionB = [Section alloc];
    sectionB.htmlForExplanation = @"hello";
    sectionB.description = @"section B description";
    sectionB.name = @"section B";
    sectionB.SectionId = 2;

    [self.allSections addObject:sectionB];
} 
```

# android - GCM 应用程序在运行/调试时未安装到模拟器

> ID：12817915
> 
> 赞同：1
> 
> 时间：2012-10-10T11:07:54.660
> 
> 标签：android, trace

所以，我基本上是按照这个教程一步一步来的 [http://developer.android.com/guide/google/gcm/demo.html](http://developer.android.com/guide/google/gcm/demo.html) 我让服务器给了我“没有注册设备！” 我所要做的就是启动应用程序，这就是我的问题开始的地方。日志猫注册：

```
"Trace - error opening trace file: no such file or directory (2)
AndroidRunTime - Shutting Down VM
dalvikvm - threadid=1: thread exiting with uncaught exception (group=0x40a13300)
AndroidRunTime - FATAL EXCEPTION: main" 
```

显现：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.google.android.gcm.demo.app"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" android:targetSdkVersion="16"/>
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />
    <uses-permission android:name="android.permission.WAKE_LOCK" />
    <permission
        android:name="com.google.android.gcm.demo.app.permission.C2D_MESSAGE"
        android:protectionLevel="signature" />
    <uses-permission
        android:name="com.google.android.gcm.demo.app.permission.C2D_MESSAGE" />
    <uses-permission
        android:name="com.google.android.c2dm.permission.RECEIVE" />

    <!-- Main activity. -->
    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".DemoActivity"
            android:label="@string/app_name"
            android:screenOrientation="portrait" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <receiver
            android:name="com.google.android.gcm.GCMBroadcastReceiver"
            android:permission="com.google.android.c2dm.permission.SEND" >
            <intent-filter>
                <!-- Receives the actual messages. -->
                <action android:name="com.google.android.c2dm.intent.RECEIVE" />
                <!-- Receives the registration id. -->
                <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
                <category android:name="com.google.android.gcm.demo.app" />
            </intent-filter>
        </receiver>

        <service android:name=".GCMIntentService" />
    </application>

</manifest> 
```

顺便说一句，我导入了项目以确保问题不是来自我糟糕的编程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T11:27:37.727

确保它是 Google API 模拟器。还可以在模拟器中使用 gmail 帐户登录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T11:21:15.783

要在模拟器上运行 GCM，您需要在模拟器上创建 google 帐户。你创造了吗？模拟器显示仅在成功执行时显示 Logcat 中的消息

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-10T11:28:27.483

如果您已遵循 GCM 演示应用程序中的所有指南，则可以使用以下方法捕获未捕获的异常：

```
import android.content.Context;
import android.os.Process;

public class ExceptionHandler implements UncaughtExceptionHandler{

    public ExceptionHandler() {
    }

    @Override
    public void uncaughtException(Thread thread, Throwable ex) {

            // capture the exception information 

        Process.killProcess(Process.myPid());
        System.exit(0);
    }

  } 
```

在您的主要活动中：

```
@Override
public void onCreate(Bundle bundle) {

    Thread.setDefaultUncaughtExceptionHandler(new ExceptionHandler());
} 
```

# sql - 删除重复记录保持原样

> ID：12817919
> 
> 赞同：2
> 
> 时间：2012-10-10T11:08:06.050
> 
> 标签：sql, sql-server, sql-server-2005

> **可能重复：**
> [如何使用 SQL 删除重复行？](https://stackoverflow.com/questions/1173963/how-to-delete-duplicate-rows-with-sql)

我有一个没有主键的表和一个包含重复条目的列。我想删除所有重复项，在表中保留一个条目。请帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T23:11:06.017

由于您使用的是 SQL Server 2005+，因此您可以使用 CTE 执行此操作：

```
;WITH cte AS 
(
  SELECT ROW_NUMBER() OVER (PARTITION BY Col1, Col2, Col3  ORDER BY (SELECT 0)) RN
  FROM  yourtable
)
DELETE FROM cte
WHERE RN > 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T11:25:29.777

将 Row_Number 函数与 Partition By 所有字段一起使用，并仅保留 RN = 1 的行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T11:11:52.533

创建存储过程和过程内部：

1.  您必须从给定的表结构动态创建临时表
2.  然后将所有不同的行从表插入到临时表
3.  最后截断表
4.  并从临时表中插入行并删除临时表

如果您有问题，那么我必须为您编写 sp。

# java - 如何修复生成的代码中的错误

> ID：12817921
> 
> 赞同：1
> 
> 时间：2012-10-10T11:08:34.037
> 
> 标签：java, android

你好！最近开始学习Android开发，在从书上做项目的时候，在运行项目代码时遇到了问题。我不得不做一个照片库。一切顺利，但是当我尝试运行它时，Eclipse 自动生成的 R.java 类中出现错误。在生成类 R 之后，我发现在类的末尾缺少一个大括号。我试图编辑代码，但 Eclipse 不允许。我创建了另一个项目，并从书中获得了源代码，并且在 R 类中出现了同样的错误（最后一个大括号没有生成）。我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T11:27:55.057

试试这些......

**-**删除`R.java`文件，然后**清理**项目。

**-**看，您的文件中是否有任何错误，`.xml`用于定义您的`layouts`.

**-**不要对 进行任何手动更改`R.java file`，它是一个自动生成的文件，其中包含`constants`根据其**xml 资源类型**分组的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T11:41:28.730

试试这个：

1.-将项目导入eclipse（文件->导入->常规->现有项目到工作区）

2.- 在 Eclipse 中，手动创建 gen 文件夹并将其添加为源文件夹（右键单击项目：构建路径 -> 配置构建路径 -> 添加文件夹）

3.- 清理项目，你想得到 R.java 生成良好

# drupal - 向自定义节点模块添加注释

> ID：12817922
> 
> 赞同：10
> 
> 时间：2012-10-10T11:08:36.573
> 
> 标签：drupal, drupal-7

在我的自定义模块中，我想添加评论功能。我已经尝试了几件事，但到目前为止还没有锻炼过。

```
// render comments form
$output .= theme('my_module_front_page'); 
$comment = new stdClass;
$comment->nid = $node_good_practice->nid;
$output .= render(drupal_get_form('comment_form', $comment));
return $output; 
```

上面的代码将评论表单放到我的节点页面中。

但是当我填写评论表并提交时，它会将我重定向到这个页面：`comment/reply/node id`然后我必须重新填写我的评论并且评论没有保存。

我想提交并留在同一页面而不是重定向。并且评论提交后必须保存。

现在，评论表单出现在我的节点页面（自定义模块模板）上。我输入评论并单击“保存”。我被发送到`/comment/reply/<node_id>`，但所有评论字段都是空的。评论也没有保存。

我想要发生的是：

*   在节点页面上有一个评论表单
*   输入评论
*   点击“保存”
*   Drupal 保存评论，并将我重定向回我正在查看的节点/页面。

## 我尝试过的事情

*   添加重定向

    ```
    $form['#redirect'] = "/success-stories/".$node_good_practice->good_practice_name."/".$node_good_practice->nid; 
    ```

    它没有改变任何东西。

*   改变行动

    ```
    $form['#action'] = "/success-stories/".$node_good_practice->good_practice_name."/".$node_good_practice->nid; 
    ```

    它把我重定向到`node/node_id/#comment-17`

*   采用`drupal_build_form()`

    ```
    $info->nid = $node_good_practice->nid;
    $comment['build_info']['args'][0] = $info;
    $comment['redirect'] = "http://www.google.nl";
    $output .= render(drupal_build_form('comment_form', $comment)); 
    ```

    表单正在显示，但没有重定向；它被发送到`comment/reply/node_id`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T13:17:56.667

由于您使用的是自定义模块，因此您可以针对特定情况使用[form_alter挂钩更改 comment_form。](http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_form_alter/7)您可以将表单设置为仅使用您的模块提交功能。然后在您的自定义提交函数中，将评论提交到评论模块进行保存（调用[comment_form_submit](http://api.drupal.org/api/drupal/modules!comment!comment.module/function/comment_form_submit/7)函数），然后自己重​​定向回节点。

类似这样的东西：

```
<?php
    function mymodule_form_alter(&$form,&$form_state,$form_id){
        if ($form_id == 'comment_form' && isset($form['#node']) && ($form['#node']->type == 'mynodetype')){
            $form['#submit'] = array('mymodule_comment_form_submit');
        }
    }

    function mymodule_comment_form_submit($form,&$form_state){
        module_load_include('module','comment');
        comment_form_submit($form,$form_state);
        $url = drupal_get_path_alias('node/'.$form['#node']->nid);
        header('Location: '.$url, TRUE);
        drupal_exit($url);
    } 
```

在您的模板文件中，仍然按照您的方式构建评论表单：

```
$info->nid = $node_good_practice->nid;
$comment['build_info']['args'][0] = $info;
$output .= render(drupal_build_form('comment_form', $comment)); 
```

这个解决方案可能看起来有点老套，但它确实有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T08:08:35.043

我想这就是答案？

```
$comment->nid = $row->nid;
$form = drupal_get_form('comment_form', $comment);
$form['#redirect'] = 'CHANGE_VIEWSPAGE_HERE?page=' . (int)$_GET['page'];
print render($form); 
```

不能自己尝试抱歉。我在[https://drupal.stackexchange.com/questions/21692/d7-comment-form-doesnt-submit找到它](https://drupal.stackexchange.com/questions/21692/d7-comment-form-doesnt-submit)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T12:20:06.227

由于某种原因，问题是由提交评论引起`drupal_build_form`的。`drupal_get_form`如果 $_POST 填充了 drupal_build_form 并且 drupal_get_form 函数重定向到`/node/node_id/#comment-17`或到`/comment/reply/<node_id>` 所以我在加载表单之前取消设置 SESSION 并且问题得到解决。

因此，Mike 的解决方案仅在您取消设置 SESSION 时才有效。但他非常乐于助人。

所以现在我有：

```
if(isset($_POST['form_id'])) {
  $comment = new stdClass();
  $comment->nid = $good_practice_id; // Node Id the comment will attached to
  $comment->name = $user->name;
  $comment->status = 1;
  $comment->language = "und";
  $comment->subject = $_POST['subject']; 
  $comment->comment_body[$comment->language][0]['value'] = $_POST['comment_body'][$node_good_practice->language][0]['value'];
  $comment->comment_body[$comment->language][0]['format'] = 'filtered_html'; 
  comment_submit($comment);
  comment_save($comment);
  unset($_POST);
} 

$comment = new stdClass;
$comment->nid = $node_good_practice->nid;
$form = drupal_get_form('comment_form', $node_good_practice);
$form['#action'] = url('success-stories/'.$node_good_practice->good_practice_name.'/'. $comment->nid);

$output .= theme('good_practices_front_detail_page', array('oGoodPractice' => $oGoodPractice, 'aGoodPractices' => $aGoodPractices, 'aComments' => $aComments, 'oSectors' => $oSectors, 'oCountries' => $oCountries, 'links' => $aLinks));
$output .= render($form);
$output .= theme('pager', array('tags'=>array()));

return $output; 
```

# sql - 使用带有子查询的 IN 子句的问题

> ID：12817923
> 
> 赞同：0
> 
> 时间：2012-10-10T11:08:36.363
> 
> 标签：sql, sql-server-2008

我有以下查询

```
SELECT COUNT(*) 
FROM Table1 
WHERE Column1 IN
(SELECT  Column1 FROM Table2) 
```

实际上，Table2 中没有名为 Column1 的列。所以如果我们只执行子查询

```
 SELECT  Column1 FROM Table2 
```

它会抛出错误 - 列名“Column1”无效。

但是，如果我执行完整的查询，我不会收到任何错误。它正在返回表 1 中的总行数。

所以我想知道这个查询在这种情况下没有给出任何错误的原因以及 IN 子句在这种情况下的工作方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T12:38:08.663

在子查询中，您可以访问外部查询中的列。这就是这里发生的事情：

```
SELECT COUNT(*) 
FROM Table1 
WHERE Column1 IN
(SELECT  Column1 FROM Table2) 
```

也可以写成：

```
SELECT COUNT(*) 
FROM Table1 
WHERE Column1 IN
(SELECT Table1.Column1 FROM Table2) 
```

如果 中至少有一行`Table2`，则子查询将始终返回`Column1`from 的值`Table1`，并且`IN()`会成功。

这是我通常推荐使用别名的原因之一：

```
SELECT COUNT(*) 
FROM Table1 t1
WHERE t1.Column1 IN
(SELECT t2.Column1 FROM Table2 t2) 
```

如果没有`Column1`in将产生错误`Table2`- 或者，如果您*在*子查询中引用`t1`，则更明显的是它是故意的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T11:14:25.083

返回的计数是`Table1`not的结果`Table2`。如果您查看执行计划，您会发现它使用 a`LEFT SEMI JOIN`进行查询，因此如果它无法加入列，我假设将执行以下查询：

```
SELECT COUNT(*) 
FROM Table1 
```

这就是查询仍然有效并返回相同输出的原因。

# php - 使用 Ajax 和 PHP 选择输入，如何在页面加载时调用 ajax？

> ID：12817925
> 
> 赞同：1
> 
> 时间：2012-10-10T11:08:48.103
> 
> 标签：php, ajax, selected

[我已经使用此代码W3Schools - PHP & AJAX Database](http://www.w3schools.com/php/php_ajax_database.asp)掌握了 AJAX 和 PHP 的基础知识。是否可以将 selected="selected" 添加到选项之一，然后在页面加载时对 PHP 文件进行 ajax 调用，而不是 onchange？但显然我仍然希望在选择时加载其他选项。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T11:12:31.157

当然，你可以使用 body 的`onLoad`事件来触发你想要的任何东西。`onChange`在 上的事件旁边完全有效`<select>`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T11:12:20.527

有可能您只需将 SELECTED 放入您想要的选择中。例如：

```
<option value="1" selected>Peter Griffin</option> 
```

`onChange`我的东西将在加载所有页面后开始监听chages 。

问候

# apache-camel - Apache Camel File 组件可以使用 Java WatchService 吗？

> ID：12817926
> 
> 赞同：3
> 
> 时间：2012-10-10T11:08:50.757
> 
> 标签：apache-camel, java-7

是否可以将 Apache Camel File 组件配置为使用 Java 7`WatchService`而不是定期扫描输入目录？

如果不是，是否可以“轻松”地使用 Camel 实现相同的目标（即在没有任何变化时避免文件系统扫描）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T20:07:58.477

*更新以删除错误信息*

您可以编写这样的组件，也许通过扩展 File 组件。

或者更简单，使用“WatchService”构建一些非常简单的东西，当有文件要提取时，它会向 File 组件触发触发消息。然后你只需要担心文件逻辑，这在 Camel 上工作得很好。

就像是：

```
from("mywatchcomponent:/var/files/")
 .to("direct:pickUp")

from("direct:pickUp")
 .pollEnrich("file:/var/files/")
 .bean(whatever).. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T13:12:16.280

Camel[目前](http://camel.apache.org/what-are-the-dependencies.html)是为在 Java 6 上运行而构建的。但您可能会编写[自己的实现或在](http://camel.apache.org/creating-a-new-camel-component.html)[Apache-Camel 问题跟踪器](https://issues.apache.org/jira/browse/CAMEL)上询问这个新功能。

# netty - 防止 Netty 4.0.0.Alpha 中的内存不足错误

> ID：12817930
> 
> 赞同：3
> 
> 时间：2012-10-10T11:09:17.047
> 
> 标签：netty

我正在开发一个服务器应用程序，通过使用 Netty 将数据流式传输到客户端。基本上，有一个主服务器向我的应用程序提供数据，应用程序会将数据分发给注册用户。由于我的应用程序需要长期维护，而 Netty 3.5.8 和 Netty 4.0.0 在 API 方面有很大不同，所以我决定使用 Netty 4.0.0

但是，我遇到了一个问题，即当主服务器提供太多无法足够快地分发给客户端的数据时。堆内存使用量增加并导致内存不足，因此我尝试在写入数据之前检查客户端的缓冲区以防止此问题。我在网站（http://static.netty.io/4.0/xref/io/netty/example/discard/package-summary.html）中使用了丢弃示例，但它不起作用，因为有时堆内存已满在调用侦听器之前。我在 Netty 3.5.8 中查看此示例，发现该示例在写入数据之前检查实际缓冲区。它与 4.0.0 中的示例不同因此，我们是否有办法在将缓冲区写入 netty 4.0.0 之前检查缓冲区？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T22:17:37.460

I had similar problem. The way I handled this is:

1.  When the server writes the data, the call which writes 64k'th byte is called synchronously. So the call gets blocked until the data is consumed by the other end.
2.  The other end does not consume the data until the data it has already consumed is processed and discarded.

Follow the same pattern throughout. It may slow things down a bit but will prevent out of memory error. Slowness should not be of concern since if it's of concern you already have a use case in your application architecture (outside of netty) which needs addressing.

# azure - 天蓝色降级

> ID：12817933
> 
> 赞同：2
> 
> 时间：2012-10-10T11:09:27.397
> 
> 标签：azure, azure-cloud-services

是否可以将 Azure 云服务实例从“小型”降级为“超小型”VM？

到目前为止我尝试了什么： - 将 Visual Studio 中的 VM 更改为“超小” - 构建了一个新包 - 将其上传到门户 - 更新了部署。我检查了“如果角色大小或角色数量发生变化，则允许更新”。

更新失败，并显示以下消息：“更新生产环境失败。新上传的包中为角色...指定的角色大小与当前部署的服务中此角色的角色大小不同。指定的内存大小在当前部署的包是1792。升级包中指定的内存大小是768。”

有任何想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T11:37:09.710

**如果角色大小或角色数量发生变化，选中允许更新**复选框应该可以正常工作（[如此处](https://www.windowsazure.com/en-us/manage/services/cloud-services/how-to-manage-a-cloud-service/)所述）。另一种方法是使用 VIP 交换：

1.  在暂存中删除部署
2.  将您的新包上传到暂存
3.  执行 VIP 交换（暂存中带有 Extra Small 实例的新包现已投入生产）。

请注意，为了使用 VIP 交换，两个包的端点应该完全相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T13:12:31.550

在升级云服务并选中“如果角色大小或角色数量发生变化时允许更新”。应该可以工作，但可能存在一些问题（谁知道）。此外，有时环境切换也可能会出错（发生在我身上一次！）。
您可以做一件事，只需替换 web/worker 角色而不是升级它。
或者您可以删除您的角色并重新上传具有超小尺寸的角色。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-02T15:04:45.903

虽然从 SmallVm 升级到 Medium Vm 没有问题，但是用中型 Vm 构建一个包并更新部署，

但是在降级时，您需要删除部署，然后上传具有所需 vm 大小的新部署。

您可以根据自己的选择为生产和分期设置不同的 Vm 大小。

# sql - 按特定 where 条件（复杂）对查询结果进行排序

> ID：12817935
> 
> 赞同：1
> 
> 时间：2012-10-10T11:09:38.213
> 
> 标签：sql, sql-server, tsql

想法是按短语获取搜索结果（搜索几列），排序优先级必须取决于匹配的列（包括完全匹配的情况）。

我的示例运行良好，但我仍然认为有更好的方法：

```
WITH    products
  AS ( SELECT
        -- .. some columns
        --------- For Sorting -------------
        [sortOrder] = CASE 
            WHEN [partNumber] = @searchPhrase                                                                       
             OR [manPartNumber]= @searchPhrase
            THEN 1                                                                
            WHEN  FormatSiteNameForSearch( [siteName] ) 
                  LIKE '%' + @searchPhrase + '%'
            THEN 2                                                                        
            WHEN [partNumber] LIKE '%' + @searchPhrase + '%'
                 OR [manPartNumber] LIKE '%' + @searchPhrase + '%'
            THEN 3
            ELSE 100
            END
        --------- End For Sorting -------------
        FROM [dbo].[PRODUCTS_Products]           
        WHERE                                                                                                                            
            [partNumber] LIKE '%' + @searchPhrase + '%'
            OR [manPartNumber] LIKE '%'+ @searchPhrase + '%'
            OR FormatSiteNameForSearch([siteName]) LIKE '%'+@searchPhrase+'%'                                                              
            OR [name] LIKE '%'+ @searchPhrase+ '%'                                                                                                                      
    )
    SELECT TOP(10) *
    FROM    products
    ORDER BY sortOrder 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T11:22:22.370

```
SELECT TOP (10) * 
FROM   [dbo].[PRODUCTS_PRODUCTS] 
WHERE  [PARTNUMBER] LIKE '%' + @searchPhrase + '%' 
        OR [MANPARTNUMBER] LIKE '%' + @searchPhrase + '%' 
        OR Formatsitenameforsearch([SITENAME]) LIKE '%' + @searchPhrase + '%' 
ORDER  BY CASE 
            WHEN [PARTNUMBER] = @searchPhrase 
                  OR [MANPARTNUMBER] = @searchPhrase THEN 1 
            WHEN Formatsitenameforsearch([SITENAME]) LIKE 
                 '%' + @searchPhrase + '%' THEN 2 
            WHEN [PARTNUMBER] LIKE '%' + @searchPhrase + '%' 
                  OR [MANPARTNUMBER] LIKE '%' + @searchPhrase + '%' THEN 3 
            ELSE 100 
          END 
```

# mysql - Mysql查询中的除法

> ID：12817937
> 
> 赞同：5
> 
> 时间：2012-10-10T11:09:50.450
> 
> 标签：mysql, division

我有 2 个不同的查询将返回值：1502.00 和 6

```
SELECT replace(CURRENT_VALUE,'$','') curVal
FROM form_attributes_values
WHERE TEST_ID=2
AND ATTRIBUTE_ID = (
    SELECT ATTRIBUTE_ID
    FROM form_attributes
    WHERE FORM_ID=6
    AND FORM_FIELD_NAME='REGRINDABLECUTTERCOST'
) 
```

和

```
SELECT replace(CURRENT_VALUE,'$','') curVal
FROM form_attributes_values
WHERE TEST_ID=2
AND ATTRIBUTE_ID = (
    SELECT ATTRIBUTE_ID
    FROM form_attributes
    WHERE FORM_ID=6
    AND FORM_FIELD_NAME='REGRINDSPOSSIBLE'
) 
```

我正在尝试执行除法 query1/query2 (1502.00/6) 应该返回值`250.333333`

但我得到的价值是`0.16666666666666`

以下是尝试过的类型： 类型 1：

```
select (a.curVal / b.curVal) as final_count
from (
    SELECT replace(CURRENT_VALUE,'$','') curVal
    FROM form_attributes_values
    WHERE TEST_ID=2 AND ATTRIBUTE_ID = (
        SELECT ATTRIBUTE_ID
        FROM form_attributes
        WHERE FORM_ID=6
        AND FORM_FIELD_NAME='REGRINDABLECUTTERCOST'
    )
) a,
(
    SELECT replace(CURRENT_VALUE,'$','') curVal
    FROM form_attributes_values
    WHERE TEST_ID=2
    AND ATTRIBUTE_ID = (
        SELECT ATTRIBUTE_ID
        FROM form_attributes
        WHERE FORM_ID=6
        AND FORM_FIELD_NAME='REGRINDSPOSSIBLE'
    )
) b; 
```

类型 2：

```
SELECT replace(CURRENT_VALUE,'$','') / (
    SELECT replace(CURRENT_VALUE,'$','') curVal
    FROM form_attributes_values
    WHERE TEST_ID=2
    AND ATTRIBUTE_ID = (
        SELECT ATTRIBUTE_ID
        FROM form_attributes
        WHERE FORM_ID=6
        AND FORM_FIELD_NAME='REGRINDSPOSSIBLE'
    )
) curVal
FROM form_attributes_values
WHERE TEST_ID=2
AND ATTRIBUTE_ID = (
    SELECT ATTRIBUTE_ID
    FROM form_attributes
    WHERE FORM_ID=6
    AND FORM_FIELD_NAME='REGRINDABLECUTTERCOST'
) 
```

两种类型都返回`0.166666666666667`我错过了什么......？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T11:37:46.407

好的，所以我刚刚在 PHPmyAdmin 的 SQL 控制台中尝试了这个并得到了答案 250.3333

```
SELECT cast(1502.00 AS unsigned) / cast(6 AS unsigned); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T11:33:09.187

看起来你只有第一个查询有问题，因为**1** / **6** = **0.166666666666667**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T11:49:34.207

两种查询类型都可以正常工作，问题出在值中，存储在数据库中的值是字符串类型，并且值是逗号分隔的 (1,502.00) 而不是 (1502.00)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T11:20:33.427

```
select sum(a.curVal) / sum(b.curVal) as final_count from 
(SELECT replace(CURRENT_VALUE,'$','') curVal FROM form_attributes_values WHERE TEST_ID=2     AND ATTRIBUTE_ID = (SELECT ATTRIBUTE_ID FROM form_attributes WHERE FORM_ID=6     AND FORM_FIELD_NAME='REGRINDABLECUTTERCOST')) a,
(SELECT replace(CURRENT_VALUE,'$','') curVal FROM form_attributes_values WHERE TEST_ID=2 AND ATTRIBUTE_ID = (SELECT ATTRIBUTE_ID FROM form_attributes WHERE FORM_ID=6 AND FORM_FIELD_NAME='REGRINDSPOSSIBLE')) b; 
```

它未经测试，但使用 SUM 应该会有更好的运气。

希望这可以帮助

# c# - 在工作流中使用相同的事务

> ID：12817939
> 
> 赞同：0
> 
> 时间：2012-10-10T11:10:21.633
> 
> 标签：c#, asp.net, linq-to-sql, transactions, workflow

如果我的问题看起来很愚蠢，请原谅我，但我对 Workflow 完全陌生。我想做的是：我在 Workflow Foundation 项目中有一些数据库命中，在 ASP.NET 应用程序中有一些命中。我想要实现的是在同一个事务中在 Workflow Foundation 和 ASP.NET 中执行数据库操作。告诉我可能吗？我正在使用 linq2sql。

这是我的代码：

```
 using(var context = new MyDBContext())
 {
     context.Transaction = context.Connection.BeginTransaction();

     //Here I am calling my Workflow function

     using (WorkflowRuntime workflowRuntime = new WorkflowRuntime())
    {
        AutoResetEvent waitHandle = new AutoResetEvent(false);
        workflowRuntime.WorkflowCompleted += delegate(object sender, WorkflowCompletedEventArgs e)
        {
            waitHandle.Set();
            if ((string)e.OutputParameters["OutputMessage"] != "")
                msg = "Workflow error : " + (string)e.OutputParameters["OutputMessage"];
        };
        workflowRuntime.WorkflowTerminated += delegate(object sender, WorkflowTerminatedEventArgs e)
        {
            Console.WriteLine("ERROR: " + e.Exception.Message);
            waitHandle.Set();
        };

        WorkflowInstance instance = workflowRuntime.CreateWorkflow(typeof(MyWorkflow),           parameters);
        instance.Start();            
        waitHandle.WaitOne();
     }

     //DB Operation in ASP.NET 
     context.DbOperation();
     context.SubmitChanges();
     context.Transaction.Commit();
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T12:20:23.470

我不这么认为。 `instance.Start()`立即返回。实际的工作流活动将在不同的线程中运行（并且可能在不同的进程或不同的机器中）。您必须在工作流程中管理事务。

# scala - scala 表达式的具体化在 v2.9 中有效吗？

> ID：12817944
> 
> 赞同：1
> 
> 时间：2012-10-10T11:10:44.637
> 
> 标签：scala, expression, reification

我在玩 scala 提升，我偶然发现 Scala 似乎对 lambda 表达式有某种隐式支持。

```
import scala.reflect.Code
import scala.reflect.Function
import scala.reflect.Select

object Test {
  trait Foo {
    def aMethod : String
  }

  val ast : Code[_] = (f:Foo) => f.aMethod 

  //now you can pattern match the AST 
  val Function(_, Select(_, symbol))= ast.tree
  val nameOfAMethod = symbol.name
  println(nameOfAMethod) //prints "aMethod"
} 
```

ast 将在右侧具有 lambda 的 AST。

它似乎不适用于文字，所以：

```
val ast : Code[_] = 42 
```

不起作用。

但这确实：

```
val ast : Code[_] = () => 42 
```

我似乎无法找到它的文档。似乎没有任何隐式转换处于活动状态。这是如何运作的？

# java - 生成具有 n 个 1 的随机 BitSet

> ID：12817946
> 
> 赞同：0
> 
> 时间：2012-10-10T11:10:51.557
> 
> 标签：java, random, bitset

> **可能的重复：**
> [从 Java 位集中的 n 中随机挑选 k 位](https://stackoverflow.com/questions/10394739/randomly-pick-k-bits-out-of-n-from-a-java-bitset)

有没有一种简单的方法可以随机生成大小为 n*n（例如 64）和恰好 n（eq 8）个 1 的随机位集？

我想到的是，我可能会生成一个随机位集并检查 bitSet.cardinality() 是否为 8，如果不是，请重试，但这似乎是一个性能不佳的解决方案。

有人有更好的主意吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T14:38:05.317

使用[水库采样](http://en.wikipedia.org/wiki/Reservoir_sampling)，这可以在 O(N) 时间内完成：

```
public static BitSet randomBitSet(int size, int cardinality, Random rnd) {
    if (0 > cardinality || cardinality > size) throw new IllegalArgumentException();
    BitSet result = new BitSet(size);
    int[] chosen = new int[cardinality];
    int i;
    for (i = 0; i < cardinality; ++ i) {
        chosen[i] = i;
        result.set(i);
    }
    for (; i < size; ++ i) {
        int j = rnd.nextInt(i+1);
        if (j < cardinality) {
            result.clear(chosen[j]);
            result.set(i);
            chosen[j] = i;
        }
    }
    return result;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T11:13:07.433

获取 0 到 63 之间的 8 个不同的随机数。将这些位设置为 1。

您的方法不能确保正好 8 个 1，只是每个 64 位的 8 个 1 的平均值（如果重复足够多的次数）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T11:31:52.077

创建要选择的数字列表，例如从 0 到 63。

随机播放列表。

将第一位设置`n`为 1，例如前 8 位。

这将具有 O(n^2) 时间复杂度。

* * *

另一种方法是创建一个 BitSet 并继续设置随机清除位，直到总共设置 8 个。您不需要测试基数。

```
int n = ...
Random rand = new Random();
BitSet bs = new BitSet(n * n);
for(int i = 0; i < n; i++) {
   int j = rand.nextInt(n * n);
   if (bs.get(j)) 
       i--;
   else
       bs.set(j);
} 
```

这通常比 O(n) 稍差

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T11:31:57.207

1.  设置一个字符数组： {1 1 1 1 1 1 1 1 0 0 ... 0 0 0} 具有正确数量的 1 和 0。

2.  使用 Fisher-Yates 算法对字符数组进行随机洗牌。

3.  将混洗后的数组转换为 BitSet。每当出现“1”字符时，将相应位设置为 0b1。所有其他位都可以设置为 0b0。

ETA：再想一想，您可能可以直接创建和洗牌 BitSet。底层算法还是一样的。

# node.js - 无法更改此属性

> ID：12817950
> 
> 赞同：0
> 
> 时间：2012-10-10T11:11:06.090
> 
> 标签：node.js, sequelize.js

我试图创建一个自定义保存方法，以免将用户密码存储为纯文本。但似乎我所做的任何改变 this.values 的值都没有任何效果。这是我的续集模型：

```
module.exports= function (sequelize, DataTypes){
return sequelize.define("Users",{
    username: DataTypes.STRING,
    password: DataTypes.STRING,
    first_name: DataTypes.STRING,
    last_name: DataTypes.STRING,
    email: DataTypes.STRING,
    is_admin: DataTypes.BOOLEAN,
    active: DataTypes.BOOLEAN
},{  instanceMethods: {
    user_save: function(){
        if(this.isNewRecord){
            var salt = 'blahblahblah';
            var key128Bits = CyrptoJS.PBKDF2(this.values.password, salt, { keySize: 128/32 });
            delete this.values.password;
            this.values.password = key128Bits.toString()
            console.log('new record ' + key128Bits.toString())
        }
        console.log(this.values)
        this.save();
        return
    }}
  }
);}; 
```

第一条日志语句确认 if isNewRecord 中的代码正在运行，并生成一个哈希，第二条日志语句和输出表明 this 的属性与其原始值保持不变。有谁知道这是为什么或我该如何解决这个问题？

我可以在发布请求后立即执行此操作，但如果可能的话，我宁愿这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T04:19:36.637

[http://sequelizejs.com/#instances-update-save](http://sequelizejs.com/#instances-update-save)

设置`this.password`而不是`this.values.password`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T05:57:06.010

问题是它`this.values`实际上只是一个 getter，它返回所有属性及其各自的值。添加一个 setter 可能是个好主意。但是接下来有一个问题，setter 是否应该更新数据库。所以基本上`this.values`应该只用于像`console.log`. 此外，它在内部用于`instance.toJSON()`.

由于 XMen 已经正确回答，您必须使用`this.password`而不是`this.values.password`:)

# ruby-on-rails - Ruby on Rails：搜索后，列表未显示所有数据

> ID：12817954
> 
> 赞同：0
> 
> 时间：2012-10-10T11:11:20.103
> 
> 标签：ruby-on-rails, ruby, postgresql, model, controller

我遇到了一个问题，在我的 Rails 应用程序中，我在搜索中得到重复的结果，该应用程序允许用户在数据库中搜索项目。

这是项目模型中的搜索功能：

```
def self.search(search_industry, search_role, search_techs_ids)

    _projects = Project.scoped 

    if search_industry.present?
      _projects = _projects.where ['industry LIKE ?', like(search_industry)]
    end
    if search_role.present?
      _projects = _projects.where ['role LIKE ?', like(search_role)]
    end
    if search_techs_ids.present?
    _projects = _projects.includes(:technols).where("technols.id" => search_techs_ids)
    end
    _projects
    end 
```

这是我的搜索页面的一部分

```
<div class="tech">
<%= fields_for(@project_technol) do |ab| %>
 Technologies : 
 <%     tech_ids = params[:technols][:id].reject(&:blank?) unless params[:technols].nil? %>

<%if params[:technols].nil?%>

<%= collection_select(:technols, :id, @all_technols, :id, :tech, {}, {:multiple => true} ) %>

<% else %>

<%= collection_select(:technols, :id, @all_technols, :id, :tech, {}, {:multiple => true, :selected => tech_ids } ) %>
<% end %>

</div> 
```

这是我的搜索操作：

```
def search

    tech_ids = params[:technols][:id].reject(&:blank?) unless params[:technols].nil?

    @search =  params[:industry], params[:role], tech_ids

    @project_search = Project.search(*@search).order(sort_column + ' ' + sort_direction).paginated_for_index(per_page, page)

    @search_performed = !@search.reject! { |c| c.blank? }.empty? 

  @project = Project.new(params[:project])

    @all_technols = Technol.all

    @project_technol = @project.projecttechnols.build

respond_to do |format|
      format.html # search.html.erb
      format.json { render :json => @project }
    end

end 
```

该问题现在已排序，但在修复该问题时，我注意到当我搜索一项技术时，表格中会显示正确的项目，但在技术列中，它旨在显示属于该项目的所有技术，但它只显示我搜索的那个：

```
<% @project_search.each do |t| %>
  <tr>
    <td><ul>
      <% t.technols.each do |technol| %>
        <li><%= technol.tech %><!/li>
      <% end %>
    </ul></td> 
```

有任何想法吗？在我的模型中，我曾经有这段代码可以正确显示表格，但显示重复的结果。

```
if search_techs_ids.present?
        _projects = _projects.joins(:technols).where("technols.id" => search_techs_ids)
        end 
```

任何帮助都将不胜感激。提前致谢

**解决方案**见下面的答案

@shioyama 和 @tommasop 都帮助解决了这个问题。

解决方案是更改列所在的搜索视图

```
<td><ul>
  <% t.technols(force_reload=true).each do |technol| %>
    <li><%= technol.tech %></li>

  <% end %>

</ul></td> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T13:25:53.793

试试这个语法：

```
_projects.each { |p| p.technols(force_reload=true) }
_projects 
```

[参考这里](http://guides.rubyonrails.org/association_basics.html#4.1.1.1)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T11:51:46.630

我以不同的形式遇到了同样的问题：[将嵌套模型关联属性与包含匹配](https://stackoverflow.com/questions/9205039/matching-nested-model-association-attribute-with-includes)

另请参阅[globalize3 github 问题页面上的讨论，](https://github.com/svenfuchs/globalize3/issues/100)在通过动态查找器搜索后尝试销毁记录时出现问题（在数据库中留下不匹配的关联）。

问题是您将连接限​​制为具有给定技术关联的项目（带有`id`s in 的项目`search_tech_ids`），因此这些是 rails 返回的唯一行。Rails 无法知道那里还有其他人。

基本上据我所知，最简单的解决方案就是在完成搜索后重新加载项目。在方法的最后一行上方添加一行`search`，如下所示：

```
_projects.each { |p| p.technols.reload }
_projects 
```

这将告诉 Rails 重新加载与每个项目相关的技术，包括在搜索中不匹配的技术。我相信这应该适用于你的情况。

**更新**：

经过多次尝试（参见评论）和@tommasop 的建议，解决方案是强制重新加载视图中的技术：

```
t.technols(force_reload=true).each 
```

仍然不清楚为什么上面的重新加载方法不起作用。如果有人有任何见解，请告诉我，我很想听听。

# php - 计算子查询中的唯一值

> ID：12817956
> 
> 赞同：0
> 
> 时间：2012-10-10T11:11:32.390
> 
> 标签：php, mysql, count, subquery

我正在尝试使用以下方法计算子查询返回的唯一值：

```
(SELECT COUNT(DISTINCT pm.id) FROM parts_manufacturers AS pm,
 parts_trading AS pt, enquiries 
 WHERE pm.id = pt.manufacturer AND pt.enquiryRef = enquiries.id 
 AND enquiries.entityRef = eo.id) AS manufacturers 
```

但我得到了错误：

```
General error: 2014 Cannot execute queries while other unbuffered queries are active 
```

这是我以前从未见过的。

我也不能使用 group by 来消除重复项，因为它会使子查询返回超过 1 行。

我哪里出错了，如何只计算子查询中的唯一值？

* * *

当我尝试在 phpmyadmin 中运行它时，出现内存不足错误：

```
#5 - Out of memory (Needed 268435428 bytes) 
```

* * *

这是完整的查询：

```
SELECT SQL_CALC_FOUND_ROWS eo.id, name, eia.county, $valueColumn $averageColumn
                        (SELECT CONCAT_WS(' ', entity_contacts.name, entity_contacts.lastName) FROM entity_contacts WHERE entityRef = eo.id AND isPrimary = 1 LIMIT 1) AS contact,
                        (SELECT ect.tel FROM entity_contacts AS ec, entity_contacts_telephones AS ect WHERE ect.contactRef = ec.id AND entityRef = eo.id AND ec.isPrimary = 1 LIMIT 1) AS tel,
                         countries.country AS countryName, CONCAT('images/flags/',LOWER(countryCode),'.gif') AS country, (SELECT COUNT(*) FROM enquiries WHERE entityRef = eo.id) AS enquired,
                         (SELECT COUNT(*) FROM enquiries, jobs WHERE enquiries.id = jobs.enquiryRef AND entityRef = eo.id AND jobs.stateRef != 5) AS jobCount,
                         ept.term AS paymentTerms, ei.type,
                         (SELECT COUNT(DISTINCT pm.id) as colname
                         FROM parts_manufacturers AS pm 
                        left outer join  parts_trading AS pt on pm.id = pt.manufacturer 
                        left outer join  enquiries on  pt.enquiryRef = enquiries.id
                         WHERE enquiries.entityRef = eo.id) AS manufacturers
                         FROM entity_details AS eo
                         LEFT JOIN entity_invoice_addresses AS eia ON eo.id = eia.entityRef AND eia.isPrimary = 1
                         LEFT JOIN countries ON eia.countryRef = countries.id
                         LEFT JOIN entity_industry_types AS ei ON ei.id = eo.industryTypeRef
                         LEFT JOIN entity_payment_terms AS ept ON eo.paymentTermsRef = ept.id,
                         users
                         WHERE eo.typeRef = 3
                         AND eo.deleted = 0
                         AND eo.ownerRef = users.id
                         LIMIT ?, ? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T11:20:02.493

我不知道从哪里来 eo.id ..

所以，请澄清并回复：

```
 (SELECT COUNT(DISTINCT pm.id) as colname
         FROM parts_manufacturers AS pm 
        left outer join  parts_trading AS pt on pm.id = pt.manufacturer 
        left outer join  enquiries  on  pt.enquiryRef = enquiries.id
         WHERE enquiries.entityRef = eo.id) AS manufacturers 
```

* * *

请尝试一下：我将用户更改为加入表：--->

```
SELECT SQL_CALC_FOUND_ROWS eo.id, name, eia.county, $valueColumn $averageColumn
                        (SELECT CONCAT_WS(' ', entity_contacts.name, entity_contacts.lastName) FROM entity_contacts WHERE entityRef = eo.id AND isPrimary = 1 LIMIT 1) AS contact,
                        (SELECT ect.tel FROM entity_contacts AS ec, entity_contacts_telephones AS ect WHERE ect.contactRef = ec.id AND entityRef = eo.id AND ec.isPrimary = 1 LIMIT 1) AS tel,
                         countries.country AS countryName, CONCAT('images/flags/',LOWER(countryCode),'.gif') AS country, (SELECT COUNT(*) FROM enquiries WHERE entityRef = eo.id) AS enquired,
                         (SELECT COUNT(*) FROM enquiries, jobs WHERE enquiries.id = jobs.enquiryRef AND entityRef = eo.id AND jobs.stateRef != 5) AS jobCount,
                         ept.term AS paymentTerms, ei.type,
                         (SELECT COUNT(DISTINCT pm.id) as colname
                         FROM parts_manufacturers AS pm 
                        left outer join  parts_trading AS pt on pm.id = pt.manufacturer 
                        left outer join  enquiries on  pt.enquiryRef = enquiries.id
                         WHERE enquiries.entityRef = eo.id) AS manufacturers
                         FROM entity_details AS eo
                         LEFT outer JOIN entity_invoice_addresses AS eia ON eo.id = eia.entityRef AND eia.isPrimary = 1
                         LEFT outer JOIN countries ON eia.countryRef = countries.id
                         LEFT outer JOIN entity_industry_types AS ei ON ei.id = eo.industryTypeRef
                         LEFT outer JOIN entity_payment_terms AS ept ON eo.paymentTermsRef = ept.id,
                         LEFT outer JOIN users ON eo.ownerRef = users.id                          
                         WHERE eo.typeRef = 3
                         AND eo.deleted = 0                       
                         LIMIT ?, ? 
```

# hibernate - 使用 Postgres 8.4 查询执行超时

> ID：12817960
> 
> 赞同：0
> 
> 时间：2012-10-10T11:11:42.690
> 
> 标签：hibernate, postgresql-8.4

我要实现，查询超时。应用程序框架由**Spring MVC 和 hibernate**组成。

如果我**在会话工厂中指定超时**。它给出错误超时**未在 Postgresql 驱动程序中实现**。

我正在使用 postgres **8.4**

代码是：

```
@Override
@Transactional(timeout=20)
public List<MasterBooking> searchMasterBookings(---){//some more code} 
```

错误堆栈跟踪是：

```
SQL state [0A000]; error code [0];Method org.postgresql.jdbc4.Jdbc4PreparedStatement.setQueryTimeout(int) is not yet implemented.; nested exception is org.postgresql.util.PSQLException: Method org.postgresql.jdbc4.Jdbc4PreparedStatement.setQueryTimeout(int) is not yet implemented. 
```

我该如何实现呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T13:04:10.693

postgres 驱动没有实现这个方法，详情参见[http://archives.postgresql.org/pgsql-bugs/2008-04/msg00161.php](http://archives.postgresql.org/pgsql-bugs/2008-04/msg00161.php)。对解决方案的请求在 TODO 列表中。

使用像[C3P0](http://sourceforge.net/projects/c3p0/)这样的连接池可以帮助您以更好的方式实现受控超时行为。

# ios - [__NSArrayM objectAtIndex:]：索引 2 超出范围 [0 .. 0] 和填充 UITableView 的正确方法

> ID：12817961
> 
> 赞同：1
> 
> 时间：2012-10-10T11:11:49.353
> 
> 标签：ios, iphone, ipad

我有两个部分，AM 和 NZ。

我注意到，如果我在每个部分中有相同数量的城市，就不会有问题。但是，如果我没有相同数量的城市，程序将会崩溃。

错误是

> -[__NSArrayM objectAtIndex:]：索引 2 超出范围 [0 .. 0]'

这是我生成错误时的代码：

```
- (void)viewDidLoad
{
        [super viewDidLoad];

        self.title = @"Region";

        self.tableView = [[UITableView alloc] initWithFrame:CGRectZero style:UITableViewStyleGrouped];

        AM  = [[NSMutableArray alloc] init];
        NZ  = [[NSMutableArray alloc] init];

        [AM    addObject: @"Bologna"];
        [AM    addObject: @"Florence"];
        [AM    addObject: @"Milan"];
        [NZ    addObject: @"Naples"];
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return 2;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    switch (section) {
        case 0:
            return [AM count];
            break;

        case 1:
            return [NZ count];
            break;

        default:
            return section;
            break;
    }
}

    - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {
        static NSString *CellIdentifier = @"Cell";
        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
        if (cell == nil) {
            cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        }

        // Configure the cell...

        NSInteger section = [indexPath section];

        switch (section) {
            case 0:
                [cell.textLabel setText: [AM objectAtIndex: [indexPath row]]];
                break;

            case 1:
                [cell.textLabel setText: [NZ objectAtIndex: [indexPath row]]];
                break;

            default:
                break;
        }    
        return cell;
    }

    - (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
    {
        switch (section) {
            case 0:
                return @"A-M";
                break;

            case 1:
                return @"N-Z";
                break;

            default:
                break;
        }
        return nil;
    }

    - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
    {
        NSString * AMPath    = self.luzonRegion      [indexPath.row];
        NSString * NZPath    = self.visayasRegion    [indexPath.row];

        switch (indexPath.section) {
            case 0:
                cityController.title = luzonRegionPath;
                NSLog(@"Selected city: %@", AMPath);
                break;

            case 1:
                cityController.title = visayasRegionPath;
                NSLog(@"Selected city: %@", NZPath);
                break;

            default:
                break;
        }

        [[self navigationController] pushViewController:cityController animated:YES];
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T11:33:15.753

如果您`UITableView`直接在 XIB 中添加，有两种方法可以使用数组中的数据填充它。当您需要时，您应该将其直接绑定在程序中或`delegate`程序中`datasource`。`IB`

万一你不确定什么时候会显示数据，你可以给出它`delegate`，`datasource`一旦你在你的`NSArray`. 当你把它`datasource`交给它时，`self`它会调用它的`datasource`方法，那些可能是，

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section; 

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath; 
```

两者都是`datasource`填充数据的必需方法`UITableView`。

您的问题的唯一区别是您自己创建表格。所以`self.tableView = [[UITableView alloc] initWithFrame:CGRectZero style:UITableViewStyleGrouped];`在行执行之后它会调用它的`datasource`方法。在您的情况下，您只需在创建和添加对象后更改创建它的位置。你也应该指定它的`delegate`& `datasource`。

所以你的解决方案应该是，

```
- (void)viewDidLoad
{
    //After creating AM & NZ arrays with objects

    self.tableView = [[UITableView alloc] initWithFrame:CGRectZero style:UITableViewStyleGrouped];
    [self.tableView setDelegate:self];
    [self.tableView setDatasource:self];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T11:44:27.607

你试试这样

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.title = @"Region";

    tableView = [[[UITableView alloc] initWithFrame:CGRectMake(0,0,320,480) style:UITableViewStyleGrouped] autorelease];
    tableView.delegate=self;
    tableView.dataSource=self;
    [self.view addSubview:tableView];
    AM  = [[NSMutableArray alloc] init];
    NZ  = [[NSMutableArray alloc] init];

    [AM    addObject: @"Bologna"];
    [AM    addObject: @"Florence"];
    [AM    addObject: @"Milan"];
    [NZ    addObject: @"Naples"];
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return 2;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    switch (section) {
        case 0:
            return [AM count];
            break;

        case 1:
            return [NZ count];
            break;

        default:
            return section;
            break;
    }
}

- (UITableViewCell *)tableView:(UITableView *)tableView1 cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    // Configure the cell...

    NSInteger section = [indexPath section];

    switch (section) {
        case 0:
            [cell.textLabel setText: [AM objectAtIndex: [indexPath row]]];
            break;

        case 1:
            [cell.textLabel setText: [NZ objectAtIndex: [indexPath row]]];
            break;

        default:
            break;
    }    
    return cell;
}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    switch (section) {
        case 0:
            return @"A-M";
            break;

        case 1:
            return @"N-Z";
            break;

        default:
            break;
    }
    return nil;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
  //  NSString * AMPath    = self.luzonRegion      [indexPath.row];
  //  NSString * NZPath    = self.visayasRegion    [indexPath.row];

    switch (indexPath.section) {
        case 0:
            //cityController.title = luzonRegionPath;
            NSLog(@"Selected city: %@", [AM objectAtIndex: [indexPath row]]);
            break;

        case 1:
            //cityController.title = visayasRegionPath;
            NSLog(@"Selected city: %@",[NZ objectAtIndex: [indexPath row]]);
            break;

        default:
            break;
    }

   // [[self navigationController] pushViewController:cityController animated:YES];
} 
```

它工作正常......

# linq - Linq 查询外连接计数

> ID：12817966
> 
> 赞同：0
> 
> 时间：2012-10-10T11:11:52.100
> 
> 标签：linq, linq-to-sql, group-by, grouping, inner-join

我有两张桌子 `PatientEncounterDemo`和`PatientMaster`

`PatientEncounterDemo`：

```
PateientID(F.K int),
DoctorId( F.K int),
ProcedureName

PatientMaster:

PatientId(P.K identity)
PatientFirstName(varchar(50)),
PatientLastName(varchar(50)),
PatientDOB 
```

我需要提取 PatientName(patientFirstName_+patientLastName)、patientDOB 和分配给特定患者的程序计数（患者可以分配许多程序）

我为该结果编写了 SQL 查询：

```
//This puts the join inside count-

select distinct  PatientFirstName+ ' ' + PatientLastName as PatientName,PatientDOB,COUNT(ProcedureName) as [Proc Count] from
(
select distinct  p.PatientFirstName,p.PatientLastName,p.PatientDOB,e.ProcedureName
from PatientMaster p,PatientEncounterDemo e 
where p.PatientId=e.PatientId and e.DoctorId=1
)as mytable group by PatientFirstName,PatientLastName,PatientDOB 
```

但是，我正在努力通过 linq 查询来做到这一点。请提出一些建议..!!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T11:29:47.713

这将是从 SQL 到 LINQ 的（几乎）一对一映射：

```
var myTable = (
    from encounter in db.PatientEncounterDemos
    where encounter.Doctor.Id == 1
    let patient = encounter.Patient
    select    new 
    {
        patient.FirstName, 
        patient.LastName,         
        patient.DOB,
        encounter.ProcedureName
    })
    .Distinct();

var results =
    from item in myTable
    group item by new { item.FirstName, item.LastName, item.DOB } into g
    select new 
    { 
        PatientName = g.Key.FirstName + " " + g.Key.LastName, 
        g.Key.DOB, 
        ProcCount = g.Count() 
    }; 
```

但这会更容易理解：

```
var myTable = (
    from encounter in db.PatientEncounterDemos
    where encounter.Doctor.Id == 1
    select new { encounter.Patient, encounter.ProcedureName })
    .Distinct();

var results =
    from item in myTable
    group item by item into g
    select new 
    { 
        PatientName =
            g.Key.Patient.FirstName + " " + g.Key.Patient.LastName, 
        g.Key.DOB, 
        ProcCount = g.Count() 
    }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T11:28:16.483

希望这应该实现你所追求的：

```
var patientProcedureCounts =
    from master in PatientMasters
    select new
    {
        master.PatientId,
        PatientName = master.PatientFirstName + " " +
            master.PatientLastName,
        master.PatientDOB,
        ProcedureCount = (from demo in PatientEncounterDemos 
            where demo.PatientId == master.PatientId &&
                demo.DoctorId == 1 
            select 1).Count()
    }; 
```

这将全选`PatientMasters`，然后`PatientEncounterDemos`为`PatientId`and全选`DoctorId`。最后，它将使用该患者的主详细信息和演示的计数来构造一个新的匿名类型，可以像这样枚举：

```
foreach(var procedureInfo in patientProcedureCounts)
{
    Console.WriteLine("Patient {0} born on {1} had {2} procedures", 
        procedureInfo.PatientName, procedureInfo.PatientDOB, procedureInfo.ProcedureCount);
} 
```

以下是 LINQPad 生成的 SQL，看起来与您所追求的非常接近：

```
-- Region Parameters
DECLARE @p0 NVarChar(1000) SET @p0 = ' '
DECLARE @p1 Int SET @p1 = 1
-- EndRegion
SELECT [t0].[PatientId], ([t0].[PatientFirstName] + @p0) + [t0].[PatientLastName] AS [PatientName], [t0].[PatientDOB], (
    SELECT COUNT(*)
    FROM [PatientEncounterDemo] AS [t1]
    WHERE ([t1].[PatientId] = [t0].[PatientId]) AND ([t1].[DoctorId] = @p1)
    ) AS [ProcedureCount]
FROM [PatientMaster] AS [t0] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T11:21:56.797

我已经重写了你的 SQL（希望应该可以）。这应该更容易从中生成 LINQ。

```
SELECT 
    p.PatientFirstName + ' ' + p.PatientLastName as PatientName
    p.PatientDOB,
    COUNT(e.ProcudureName) AS [Proc Count]
FROM 
    PatientMaster p
    INNER JOIN PatientEncounterDemo e ON p.PatientId = e.PatientId
WHERE
    e.DoctorId=1
GROUP BY
    p.PatientFirstName,
    p.PatientLastName,
    p.PatientDOB 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T14:30:55.370

最后，在您所有答案的支持下，我通过这个查询得到了确切的结果。

首先，我与数据库上的 where 条件一起执行内部连接。

然后我按照多个列对结果进行分组，并对该组执行计数。

我的 Linq 查询：

```
 var myTable = (
          from master in MyDataContext.PatientMasters
          join encounter in MyDataContext.PatientEncounterDemos
          on master.PatientId equals encounter.PatientId
          where encounter.DoctorId == doctorID
          select new { master.PatientFirstName, master.PatientLastName, master.PatientDOB, encounter.ProcedureName })
          .Distinct();

      var results =
          from item in myTable
          group item by new { item.PatientFirstName, item.PatientLastName, item.PatientDOB } into grp
          select new
          {
              PatientName =
                  grp.Key.PatientFirstName + " " + grp.Key.PatientLastName,
              grp.Key.PatientDOB,
              ProcCount = grp.Count()
          }; 
```

现在我应用 Foreach 循环将结果添加到列表中..!! 谢谢大家...！！！！

# iphone - 错误：找不到 OFFlickrAPIRequestDelegate 的协议声明

> ID：12817973
> 
> 赞同：-1
> 
> 时间：2012-10-10T11:12:37.963
> 
> 标签：iphone, sharekit

我正在开发一个应用程序，在该应用程序中实现 ShareKit 以进行共享。它在 Xcode 4.2 上运行良好。在我将 Xcode 更新到 4.5.1 后，它给了我错误：

> 找不到 OFFlickrAPIRequestDelegate 的协议声明

![在此处输入图像描述](../Images/e4f88686e07a60912080ba67286dca73.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T10:08:46.807

我有同样的问题，我的解决方案是升级 ShareKit 模块。

这与 AvailabilityMacros.h 和 iOs6 中的问题有关

这篇文章为我指明了正确的方向：[https ://groups.google.com/forum/?fromgroups=#!topic/objectiveflickr/wWwA8jiNNlc](https://groups.google.com/forum/?fromgroups=#!topic/objectiveflickr/wWwA8jiNNlc)

# rhino-mocks - 犀牛模拟题

> ID：12817981
> 
> 赞同：-1
> 
> 时间：2012-10-10T11:12:58.500
> 
> 标签：rhino-mocks

简单的 Rhino 模拟题。

*   replay 和 replayAll 有什么区别？

*   SetupResult.On(Of T).Call 与 Expect.Call(Of T) 有什么区别？

*   BackToRecord 是做什么用的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T18:43:18.820

在这种情况下阅读手册（RTM）：[Rhino Mocks 文档](http://ayende.com/wiki/Rhino+Mocks+Documentation.ashx)。它涵盖了上述所有问题。

# cakephp - 如何在 CakePHP 中更改登录信息

> ID：12817988
> 
> 赞同：1
> 
> 时间：2012-10-10T11:13:17.950
> 
> 标签：cakephp, authentication, cakephp-1.3

我使用的是 CakePHP 1.3，我想更改此消息：

> 您无权访问该位置。

到（例如）：

> 哦对不起

消息从此代码出现：

> echo $this->Session->flash('auth');

我将 app_controller 更改为

```
class AppController extends Controller {

var $components = array('Auth', 'Session', 'Acl');

function beforeFilter() {
    $this->Auth->authorize = 'actions';
    $this->Auth->autoRedirect = false;
    if ($this->params['controller'] == 'pages') {
        $this->Auth->allow('*');
    }
    $this->Auth->allow('pages');
    $this->Auth->loginError = "This message shows up when the wrong credentials are used";    
    $this->Auth->authError = "This error shows up with the user tries to access a part of the website that is protected.";

} 
```

}

但我面临同样的信息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T11:17:44.973

这边走：

```
$this->Auth->loginError = "This message shows up when the wrong credentials are used";  
$this->Auth->authError = "This error shows up with the user tries to access a part of the website that is protected."; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-11T13:47:50.573

你可以自定义这个`beforeFilter`喜欢

```
function beforeFilter() {
  // ...
  $this->Auth->authError = __('You must be logged in to view this page.');
  $this->Auth->loginError = __('Invalid Username or Password entered, please try again.');
} 
```

或者

还有另一种方法可以使 Auth 组件更加个性化。

去：

```
/cake/libs/controller/components/auth.php 
```

并找到`function __setDefaults()`.

您可以在此处为整个应用程序自定义错误消息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-11T14:02:57.027

发生这种情况时，您可能也已将 AuthComponent 明确包含在您的 UsersController 中。确保`authError`在 UsersController 的 beforeFilter 方法中也设置了 ，或者确保它是 beforeFilter 调用`parent::beforeFilter()`以包含消息。

# django - 如何显示 django-cookie 的过期时间？

> ID：12817992
> 
> 赞同：0
> 
> 时间：2012-10-10T11:13:40.963
> 
> 标签：django, cookies

在我的`getCookie`函数中，我想显示给定 cookie 的名称和过期时间，但我能够归档的只是它的名称，作为一个字符串。

cookie 已设置，并按预期过期，我只想以简单的方式显示它的剩余时间。

```
def setCookie(request):
    cook = HttpResponseRedirect('/getCookie/')
    cook.set_cookie('theCookie', value='Dough', max_age=15)

    return cook

def getCookie(request):
    s=""
    if request.COOKIES.has_key('theCookie'):
        s += request.COOKIES['theCookie']
        #s += request.COOKIES['theCookie'].expires..? HERE?

    else:
        s="Sorry, your cookie has expired"
    return HttpResponse(s) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T16:09:02.100

`request.COOKIES`仅包含已解析 cookie 的键/值映射。但是`request.META['HTTP_COOKIE']`包含可以由 Python `cookie.SimpleCookie`类解析以获取`max-age` [http://docs.python.org/library/cookie.html的原始 cookie 字符串](http://docs.python.org/library/cookie.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-04-16T09:28:06.417

cookie 的过期时间可以这样计算：

```
import Cookie
val = request.META['HTTP_COOKIE']
c = Cookie.SimpleCookie()
c.load(val)
c['cookie-name'].keys()
... 
comment,domain,secure,expires,max-age,version,path,httponly

expires = c['cookie-name']['expires'] 
```

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2012-10-10T15:55:49.013

简短的回答：它不能完成。

* * *

## 回答 #4

> 赞同：-6
> 
> 时间：2012-10-10T11:19:23.883

尝试get_expiry_age：

```
request.COOKIES['theCookie'].get_expiry_age() 
```

# iphone - 从字符串中获取子字符串

> ID：12817993
> 
> 赞同：0
> 
> 时间：2012-10-10T11:13:44.103
> 
> 标签：iphone, objective-c, xcode, nsstring

```
1 US Dollar = 3.673 United Arab Emirates Dirham 
```

如何`3.673`从此字符串中仅获取值？

我尝试了以下代码，但没有奏效。

```
NSString *a = [[xmlParser array]objectAtIndex:2];
NSRange startRange = [a rangeOfString:@"="];
NSLog(@"%u",startRange.location+1);
NSRange endRange = [a rangeOfString:@" "];
NSLog(@"%u",endRange.location);
NSString *subString = [a substringWithRange:NSMakeRange(startRange.location + 1, endRange.location)];
NSLog(@"%@",subString); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T11:18:31.010

用这个：

```
 NSArray *aArray = [a componentsSeparatedByString:@" "]; //your string here
 NSString *dollarValue = [aArray objectAtIndex:4]; //get dollar value from array
 NSLog(@"%@",dollarValue); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T11:18:41.810

我会做类似...

```
NSArray *words = [string componentsSeparatedByString:@" "];

for (NSString *word in words) {
    //check for equals sign and then take the next one.
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T11:26:31.923

```
str = [NSString stringWithFormat:@"1 US Dollar = 3.673 United Arab Emirates Dirham"];  
components = [str componentsSeparatedByCharactersInSet:[NSCharacterSet whitespaceCharacterSet]];
str = [components objectAtIndex:4];
NSLog(@"Str:%@", str); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T11:22:33.787

```
 NSString *param = nil;
    NSRange start = [a rangeOfString:@"="];
    if (start.location != NSNotFound)
    {
        param = [a substringFromIndex:start.location + start.length];
        NSRange end = [param rangeOfString:@"United"];
        if (end.location != NSNotFound)
        {
            param = [param substringToIndex:end.location];
        }
    }
    NSLog(@"param: %@",param); 
```

# ios - iOS 6 中方向定义的任何更改

> ID：12817996
> 
> 赞同：0
> 
> 时间：2012-10-10T11:14:00.060
> 
> 标签：ios, ios6, screen-orientation, uiinterfaceorientation

我有这个：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
} 
```

在我的应用程序视图控制器中，在 iOS 5 中它按预期工作，但是当我更新到 iOS 6 时，方向定义似乎不起作用，它在定向时也显示横向。任何其他设置的方法定义是否有任何变化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T11:47:38.620

在`AppDelegate`：

```
- (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window  // iOS 6
{

return UIInterfaceOrientationMaskAll;

} 
```

在您的视图控制器中：

```
- (BOOL)shouldAutorotate {
return YES;
}

- (NSUInteger)supportedInterfaceOrientations {
return UIInterfaceOrientationMaskPortrait;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T13:38:45.377

我同意约瑟夫的回答，并会补充一件事。

我有一个旧的 iOS 应用程序，我已经迁移到 iOS6。在我的 AppDelegate 中，我最初添加了这样的主视图控制器：

```
 [self.window addSubview:videoController.view]; 
```

有了这条线，Jossef 提到的新的 autoRotation 选择器仍然不起作用。您必须更新 AppDelegate 行以像这样设置您的 rootViewController：

```
 self.window.rootViewController = videoController; 
```

# wordpress - 通过 postID 过滤 query_post

> ID：12817999
> 
> 赞同：0
> 
> 时间：2012-10-10T11:14:21.000
> 
> 标签：wordpress, wordpress-theming

我正在使用以下句子来查询一些帖子：

```
query_posts('post_type=page&posts_per_page=2&meta_key=category_news&meta_value=ht_news&lang=en'); 
```

问题是我需要能够防止这样的查询在其结果中获得某个 postID，那么我该如何添加这样的代码？

在正常的 SQL 查询中，它可能是`WHERE postID NOT IN (12, 120, 150)`

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T11:25:53.517

不，但是 WP_Query 具有`post__not_in`您可以使用的参数。

[来自Codex](http://codex.wordpress.org/Class_Reference/WP_Query)的 WP_Query 参数：

```
p (int) - use post id.
name (string) - use post slug.
page_id (int) - use page id.
pagename (string) - use page slug.
post_parent (int) - use page id. Return just the child Pages.
post__in (array) - use post ids. Specify posts to retrieve.
post__not_in (array) - use post ids. Specify post NOT to retrieve. 
```

您可以查看[WordPress Answers](https://wordpress.stackexchange.com/q/1753/17305)的这个问题，以获取有关您需要哪种类型的查询的更多信息。[Rarst answer](https://wordpress.stackexchange.com/a/1755/17305)可能是我见过的关于在 Wordpress 中查询帖子的三种方法的最佳解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T12:19:02.177

用于*排除*`exclude`您在查询中指定的 PostID。

 *```
query_posts('
     post_type=page
     &posts_per_page=2 
     &meta_key=category_news
     &meta_value=ht_news
     &lang=en
     &exclude=1,2,3,4,5'
 ); 
```*