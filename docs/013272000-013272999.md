# StackOverflow 问答 13272000-13272999

# ruby-on-rails - RnR：长时间运行的查询，Heroku 超时：webhooks？阿贾克斯？

> ID：13272004
> 
> 赞同：3
> 
> 时间：2012-11-07T14:43:39.393
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3, webhooks

所以问题来了，我们有一个用户想要显示的数据。查询，我们优化和索引的速度与我认为的一样快。我们可能会减少一两秒钟，但由于数据量很大，我们无能为力。

无论如何，因此查询在仅限于一两天的数据时运行得很好，但是用户正在运行它一两个星期的数据。所以查询两三周的数据大约需要 40 秒，Heroku 超时为 30 秒，这是行不通的。所以我们需要一个解决方案。

所以在这里和谷歌搜索，我看到 webhooks 或 Ajax 可以作为解决方案的评论。但是，我一直无法找到一个真实的具体例子。我还看到一条评论，有人说我们可以发送某种“重置时钟”的回复。但再次听起来很有趣，但找不到一个例子。

我们有点不知所措，用户不满意，所以我们需要一个快速简单的解决方案。在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:21:06.693

我遇到了类似的问题。我在我的 Sinatra 应用程序中有一个本质上是“批量下载”页面，我的客户端应用程序调用它来将数据导入浏览器中的本地 webSQL 数据库。

下载页面（我们称之为“GET /download”）查询 CouchDB 数据库以获取给定视图中的所有文档，而这部分过程（很像您的查询）需要很长时间。

通过使用 Sinatra 的流 API，我能够解决这个问题。如上所述，您可以通过在 30 秒时间结束之前在响应中发送至少一个 by 来“重置”Heroku 中的时钟。这会将时钟重置 55 秒（并且您发送的每个额外字节都会再次重置时钟），因此当您仍在发送数据时，连接可以无限期地保持打开状态。

在 Sinatra 中，我可以替换它：

```
get '/download' do
  body = db.view 'data/all'
end 
```

..用这样的东西：

```
get '/download' do
  # stream is a Sinatra helper that effectively does 'chunked transfer encoding'
  stream do |out|
    # Long query starts here
    db.view 'data/all' do |row|
      # As each row comes back from the db, stream it to the front-end
      out << row
    end
  end
end 
```

这对我来说效果很好，因为“第一个字节的时间”（即 db 查询返回第一行所用的时间远低于 30 秒的限制。

唯一的缺点是之前我将所有结果从数据库中返回到我的 Sinatra 应用程序中，然后计算整个结果的 MD5 和以用作 etag 标头。我的客户端应用程序可以使用它来执行条件 HTTP 获取（即，如果它尝试再次下载并且没有修改任何数据，我可以发送 302 Not Modified）；另外，它可以与它自己收到的数据的校验和进行比较（以确保它在传输过程中没有被损坏/修改）。

一旦您开始在响应中流式传输数据，您将无法计算要作为 HTTP 标头发送的内容的 MD5 总和（因为您还没有所有数据；并且您无法在之后发送标头）已经开始发送正文内容）。

我正在考虑将其更改为某种分页、多 AJAX 调用的解决方案；正如 Zenph 上面建议的那样。或者使用某种工作进程（例如 Resque、DelayedJob）将查询卸载到；但是我不确定当数据准备好获取时如何通知客户端。

希望这可以帮助。

# wcf - Windows 8 Azure 模拟器将端口 80 重新映射到 81

> ID：13272013
> 
> 赞同：2
> 
> 时间：2012-11-07T14:44:25.217
> 
> 标签：wcf, azure, tcp, windows-8, port

我在 Windows 7 上开发了一个带有 WCF REST 和 TCP（角色间）端点的项目。我刚刚升级到 Windows 8，现在我遇到了严重的问题。

首先，当我将项目部署到 azure 时，会收到以下警告：

```
Windows Azure Tools: Warning: Remapping private port 80 to 81 in role 'OfisimCRM.WebClient' to avoid conflict during emulation.

Windows Azure Tools: Warning: Remapping private port 443 to 446 in role 'OfisimCRM.WebClient' to avoid conflict during emulation. 
```

**Skype 已禁用，这不是问题。**

这不是那么重要，但重要的是我从我的交互通信请求中得到了更严重的错误，尽管我完全禁用了防火墙。这里是：

```
Could not connect to net.tcp://127.255.0.0:22000/NotifyService. The connection attempt lasted for a time span of 00:00:01.1820716\. TCP error code 10061: No connection could be made because the target machine actively refused it 127.255.0.0:22000\.  - 
Server stack trace: 
   at System.ServiceModel.Channels.SocketConnectionInitiator.Connect(Uri uri, TimeSpan timeout)
   at System.ServiceModel.Channels.BufferedConnectionInitiator.Connect(Uri uri, TimeSpan timeout)
   at System.ServiceModel.Channels.ConnectionPoolHelper.EstablishConnection(TimeSpan timeout)
   at System.ServiceModel.Channels.ClientFramingDuplexSessionChannel.OnOpen(TimeSpan timeout)
   at System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannel.OnOpen(TimeSpan timeout)
   at System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannel.CallOpenOnce.System.ServiceModel.Channels.ServiceChannel.ICallOnce.Call(ServiceChannel channel, TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannel.CallOnceManager.CallOnce(TimeSpan timeout, CallOnceManager cascade)
   at System.ServiceModel.Channels.ServiceChannel.EnsureOpened(TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs)
   at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)
   at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message) 
```

TCP客户端代码：

```
public static LicenseItem CheckLicense(int userID)
{
    // This instance does not exist in memory cache. Check if other servers in the same web role know anything about this instance.
    var webRoles = RoleEnvironment.Roles["OfisimCRM.WebClient"];
    var myID = RoleEnvironment.CurrentRoleInstance.Id;
    LicenseItem remoteValue = null;
    foreach (var targetInstance in webRoles.Instances)
    {
        // I am currently going through a loop of instances. Check if the current enumaration shows my address.
        if (targetInstance.Id == myID)
        {
            // Skip.
        }
        else
        {
            // This is a neighbour instance. Check to see if it knows about the instance I'm looking for.
            NetTcpBinding binding = new NetTcpBinding(SecurityMode.None);

            EndpointAddress targetAddress = new EndpointAddress(
                String.Format("net.tcp://{0}/NotifyService", targetInstance.InstanceEndpoints["NotificationServiceEndPoint"].IPEndpoint)
                );

            ChannelFactory<INotifyService> channelFactory = new ChannelFactory<INotifyService>(binding, targetAddress);
            INotifyService targetClient = channelFactory.CreateChannel();

            try
            {
                remoteValue = targetClient.CheckLicense(userID);
                if (channelFactory.State != System.ServiceModel.CommunicationState.Faulted)
                {
                    channelFactory.Close();
                }
            }
            catch (TimeoutException timeoutException)
            {
                Trace.TraceError("Unable to check license on web role instance '{0}'. The service operation timed out. {1}", myID, timeoutException.Message);
                ((ICommunicationObject)targetClient).Abort();
            }
            catch (CommunicationException communicationException)
            {
                Trace.TraceError("Unable to check instance on web role instance '{0}'. There was a communication problem. {1} - {2}", myID, communicationException.Message, communicationException.StackTrace);
                ((ICommunicationObject)targetClient).Abort();
            }
        }
    }
    return remoteValue;
} 
```

**编辑 1：重要更新：**

![IIS 状态](../Images/cf226b219e6a41471e5b261da417be22.png)

我认为问题在于第二个实例。我做了一个调试，我看到连接只被这个停止的实例拒绝。我认为这解释了一切，但我不知道为什么会这样。

**编辑 2：临时解决方案：**

我注意到这不是关于 Windows 8 的问题，因为我将 Azure SDK June 2012 SP1 升级到了 2012 年秋季。我从 TFS 下载了我的项目的未升级版本，而不是我看到它正在工作。总之，它是 Azure SDK，但我不知道为什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T19:34:56.287

重新映射端口号根本不是问题的征兆。这是正常行为，而且一直如此。在执行/配置您的 Windows 8 Dev Box 时，您是否安装了“Windows 功能”WCF 激活：

![WCF 行动](../Images/ac73aab112b758159f9d2cd62f782395.png)

测试您的服务是否实际启动并运行的另一种方法是：

*   通过启动 Compute Emulator 并期待本地部署，确保您拥有端点
*   在提供的 IP 和端口号上 telnet 以查看是否可以实际建立连接

验证端点 UI：

![端点用户界面](../Images/96dbe0d0a2563a64f709f74592fb46ec.png)

好吧，这将向您显示输入端点。从我看到的情况来看，您正在使用内部端点。只是为了试用，尝试将它们更改为 Input 以查看行为是否会有一些变化。

但首先检查您是否已安装 WCF 激活。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T22:40:44.950

当我忘记在我的开发盒上取消绑定 IIS（完整 IIS）中的默认网站时，我总是会遇到这个问题。你记得这样做吗？默认情况下，您的本地 IIS 会将 http 绑定到“默认网站”上的端口 80。如果您将该绑定（使用 inetmgr）编辑到另一个端口，则模拟器可以抓取 80。

# spring - JUnit：弹簧配置

> ID：13272016
> 
> 赞同：2
> 
> 时间：2012-11-07T14:44:28.983
> 
> 标签：spring, junit, applicationcontext

我尝试给控制器写一个测试

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations="/WEB-INF/spring/root-context.xml")
public class ContactServiceTest {

    private MockHttpServletRequest request;
    private MockHttpServletResponse response;
    private ContactController controller;
    private AnnotationMethodHandlerAdapter adapter;

    @Autowired
    private ApplicationContext applicationContext;

    @Before
    public void setUp() {
        request    = new MockHttpServletRequest();
        response   = new MockHttpServletResponse();
        response.setOutputStreamAccessAllowed(true);
        controller = new ContactController();
        adapter = new AnnotationMethodHandlerAdapter();
    }

    @Test
    public void getTest() throws Exception {
        request.setRequestURI("/index");
        request.setMethod("GET");
        adapter.handle(request, response, controller);
        System.out.println(response.getContentAsString());
    }
} 
```

根上下文.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" 
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
        xmlns:aop="http://www.springframework.org/schema/aop"
         xmlns:context="http://www.springframework.org/schema/context" 
         xmlns:jee="http://www.springframework.org/schema/jee" 
         xmlns:lang="http://www.springframework.org/schema/lang" 
         xmlns:p="http://www.springframework.org/schema/p" 
         xmlns:tx="http://www.springframework.org/schema/tx" 
         xmlns:util="http://www.springframework.org/schema/util" 
         xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee.xsd http://www.springframework.org/schema/lang http://www.springframework.org/schema/lang/spring-lang.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd">

<context:annotation-config/>

        <context:component-scan base-package="/src/main/java/com.doilidova.spr.dao"/>
        <context:component-scan base-package="/src/main/java/com.doilidova.spr.service"/>
        <!-- Файл с настройками ресурсов для работы с данными (Data Access Resources) -->
    <import resource="data.xml"/>
    <!-- Файл с настройками безопасности -->
    <import resource="security.xml"/>
</beans> 
```

好吧，根据我创建的以下目录结构的建议，我对这个[主题有同样的问题：](https://stackoverflow.com/questions/6275130/junit-how-to-access-spring-configuration-as-spring-has-intended)

```
<proj>
   src
      test
         WEB-INF
             spring
                appServlet
                     controllers.xml
                     servlet-context.xml
                  root-context.xml
                  data.xml
                  security.xml 
```

现在我有这样的例外：

```
INFO : org.springframework.beans.factory.support.DefaultListableBeanFactory - Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@a614a4: defining beans [org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.annotation.internalPersistenceAnnotationProcessor,org.springframework.aop.config.internalAutoProxyCreator,org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0,org.springframework.transaction.interceptor.TransactionInterceptor#0,org.springframework.transaction.config.internalTransactionAdvisor,transactionManager,messageSource,propertyConfigurer,dataSource,sessionFactory]; root of factory hierarchy
ERROR: org.springframework.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener@cd564c] to prepare test instance [com.doilidova.spr.ContactServiceTest@dcc20c]
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transactionManager' defined in class path resource [WEB-INF/spring/data.xml]: Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in class path resource [WEB-INF/spring/data.xml]: Invocation of init method failed; nested exception is org.hibernate.HibernateException: Unable to instantiate default tuplizer [org.hibernate.tuple.entity.PojoEntityTuplizer]
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:328)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:106)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1325)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1086)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:580)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:96)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:44)
    at org.springframework.test.context.TestContext.buildApplicationContext(TestContext.java:198)
    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:233)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:126)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:85)
    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:231)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:95)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.invokeTestMethod(SpringJUnit4ClassRunner.java:139)
    at org.junit.internal.runners.JUnit4ClassRunner.runMethods(JUnit4ClassRunner.java:61)
    at org.junit.internal.runners.JUnit4ClassRunner$1.run(JUnit4ClassRunner.java:54)
    at org.junit.internal.runners.ClassRoadie.runUnprotected(ClassRoadie.java:34)
    at org.junit.internal.runners.ClassRoadie.runProtected(ClassRoadie.java:44)
    at org.junit.internal.runners.JUnit4ClassRunner.run(JUnit4ClassRunner.java:52)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in class path resource [WEB-INF/spring/data.xml]: Invocation of init method failed; nested exception is org.hibernate.HibernateException: Unable to instantiate default tuplizer [org.hibernate.tuple.entity.PojoEntityTuplizer]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1420)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:322)
    ... 32 more
Caused by: org.hibernate.HibernateException: Unable to instantiate default tuplizer [org.hibernate.tuple.entity.PojoEntityTuplizer]
    at org.hibernate.tuple.entity.EntityTuplizerFactory.constructTuplizer(EntityTuplizerFactory.java:110)
    at org.hibernate.tuple.entity.EntityTuplizerFactory.constructDefaultTuplizer(EntityTuplizerFactory.java:135)
    at org.hibernate.tuple.entity.EntityEntityModeToTuplizerMapping.<init>(EntityEntityModeToTuplizerMapping.java:80)
    at org.hibernate.tuple.entity.EntityMetamodel.<init>(EntityMetamodel.java:323)
    at org.hibernate.persister.entity.AbstractEntityPersister.<init>(AbstractEntityPersister.java:456)
    at org.hibernate.persister.entity.SingleTableEntityPersister.<init>(SingleTableEntityPersister.java:131)
    at org.hibernate.persister.PersisterFactory.createClassPersister(PersisterFactory.java:84)
    at org.hibernate.impl.SessionFactoryImpl.<init>(SessionFactoryImpl.java:267)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1341)
    at org.hibernate.cfg.AnnotationConfiguration.buildSessionFactory(AnnotationConfiguration.java:859)
    at org.springframework.orm.hibernate3.LocalSessionFactoryBean.newSessionFactory(LocalSessionFactoryBean.java:860)
    at org.springframework.orm.hibernate3.LocalSessionFactoryBean.buildSessionFactory(LocalSessionFactoryBean.java:779)
    at org.springframework.orm.hibernate3.AbstractSessionFactoryBean.afterPropertiesSet(AbstractSessionFactoryBean.java:211)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1477)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1417)
    ... 39 more
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at org.hibernate.tuple.entity.EntityTuplizerFactory.constructTuplizer(EntityTuplizerFactory.java:107)
    ... 53 more
Caused by: java.lang.NoClassDefFoundError: javassist/util/proxy/MethodFilter
    at org.hibernate.bytecode.javassist.BytecodeProviderImpl.getProxyFactoryFactory(BytecodeProviderImpl.java:49)
    at org.hibernate.tuple.entity.PojoEntityTuplizer.buildProxyFactoryInternal(PojoEntityTuplizer.java:208)
    at org.hibernate.tuple.entity.PojoEntityTuplizer.buildProxyFactory(PojoEntityTuplizer.java:186)
    at org.hibernate.tuple.entity.AbstractEntityTuplizer.<init>(AbstractEntityTuplizer.java:151)
    at org.hibernate.tuple.entity.PojoEntityTuplizer.<init>(PojoEntityTuplizer.java:78)
    ... 58 more
Caused by: java.lang.ClassNotFoundException: javassist.util.proxy.MethodFilter
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    ... 63 more
java.lang.NoSuchMethodError: org.junit.runner.notification.RunNotifier.testAborted(Lorg/junit/runner/Description;Ljava/lang/Throwable;)V
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.invokeTestMethod(SpringJUnit4ClassRunner.java:146)
    at org.junit.internal.runners.JUnit4ClassRunner.runMethods(JUnit4ClassRunner.java:61)
    at org.junit.internal.runners.JUnit4ClassRunner$1.run(JUnit4ClassRunner.java:54)
    at org.junit.internal.runners.ClassRoadie.runUnprotected(ClassRoadie.java:34)
    at org.junit.internal.runners.ClassRoadie.runProtected(ClassRoadie.java:44)
    at org.junit.internal.runners.JUnit4ClassRunner.run(JUnit4ClassRunner.java:52)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

那么问题出在哪里？

*这是 data.xml ：*

```
 <beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:aop="http://www.springframework.org/schema/aop" xmlns:context="http://www.springframework.org/schema/context" xmlns:jee="http://www.springframework.org/schema/jee" xmlns:lang="http://www.springframework.org/schema/lang" xmlns:p="http://www.springframework.org/schema/p" xmlns:tx="http://www.springframework.org/schema/tx" xmlns:util="http://www.springframework.org/schema/util" xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee.xsd http://www.springframework.org/schema/lang http://www.springframework.org/schema/lang/spring-lang.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd">

<tx:annotation-driven transaction-manager="transactionManager"/>

<bean id="transactionManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager">
<property name="sessionFactory" ref="sessionFactory"/>
</bean>

<bean id="messageSource" class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
<property name="basename" value="classpath:messages"/>
<property name="defaultEncoding" value="UTF-8"/>
</bean>

<bean id="propertyConfigurer" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer" p:location="/WEB-INF/jdbc.properties"/>

<bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource" p:driverClassName="${jdbc.driverClassName}" p:url="${jdbc.databaseurl}" p:username="${jdbc.username}" p:password="${jdbc.password}"/>

<bean id="sessionFactory" class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
<property name="dataSource" ref="dataSource"/>
<property name="configLocation">
<value>
classpath:hibernate.cfg.xml
</value>
</property>
<property name="configurationClass">
<value>
org.hibernate.cfg.AnnotationConfiguration
</value>
</property>
<property name="hibernateProperties">
<props>
<prop key="hibernate.show_sql">
true
</prop>
<prop key="hibernate.dialect">
${jdbc.dialect}
</prop>
<prop key="hibernate.connection.charSet">
UTF-8
</prop>
</props>
</property>
</bean>
</beans> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T14:54:40.850

```
Caused by: java.lang.ClassNotFoundException: javassist.util.proxy.MethodFilter
at java.net.URLClassLoader$1.run(Unknown Source)
at java.net.URLClassLoader$1.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source) 
```

您当前的错误在异常堆栈中；您的依赖项中似乎缺少 javassist，至少在测试依赖项中是这样。它可能被声明为仅运行时依赖项（尽管这些通常也用于测试阶段，但我不知道您当前使用的是哪个构建系统。）

编辑：我看到底部还有另一个（可能不相关的）错误；您使用的是哪个版本的 Spring？检查Spring 论坛上的[此线程](http://forum.springsource.org/showthread.php?60230-spring-test-breaks-in-Junit-4-5)以及 Spring 2.5/Junit > 4.4 可能的不兼容性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T14:49:20.693

错误信息很清楚：

> 在类路径资源 [WEB-INF/spring/data.xml] 中定义名称为“transactionManager”的 bean 创建错误：并且在设置 bean 属性“sessionFactory”时无法解析对 bean“sessionFactory”的引用；嵌套异常是 org.springframework.beans.factory.BeanCreationException：创建类路径资源 [WEB-INF/spring/data.xml] 中定义的名称为“sessionFactory”的 bean 时出错：

您的 sessionFactory 设置不正确，请向我们展示`data.xml`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T16:10:30.500

请检查您是否配置了事务管理器。下面将举一个小例子。看看您的 data.xml 也会很有趣。

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:p="http://www.springframework.org/schema/p" xmlns:context="http://www.springframework.org/schema/context"
        xmlns:tx="http://www.springframework.org/schema/tx"
        xsi:schemaLocation="
            http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
            http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
            http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd">

    <import resource="dataSource.xml"/>
    <import resource="hibernateProperties.xml"/>

    <bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean"
        p:dataSource-ref="dataSource" 
        p:hibernateProperties-ref="hibernateProperties">

        <property name="annotatedClasses">
            <list>
                ....
            </list>
        </property>
    </bean>

    <bean id="transactionManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory" />
    </bean>

    <tx:annotation-driven/>

</beans> 
```

# c# - 单击按钮不起作用，但双击可以工作

> ID：13272019
> 
> 赞同：1
> 
> 时间：2012-11-07T14:44:41.773
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-2

这是我的html代码

```
<form runat="server">
    Hello, i'm login page
    Enter Name   <asp:TextBox ID="txtName" runat="server"></asp:TextBox>
    <input type="submit" value="PressMe" onclick="location.href='<%: Url.Action("EnterLogin", "LoginForm") %>'" />
</form> 
```

这是我的控制器代码

```
public class LoginFormController : Controller
{
    public ActionResult ShowLogin()
    {
        return View();
    }

    public ActionResult EnterLogin()
    {
        ViewData["Name"] = Convert.ToString(Request.Form["txtName"]);
        return View("EnterLogin");
    }
} 
```

单击**PressMe**按钮时，预期的输出是显示 Enter Login View 但它没有。如果我双击该按钮，则它可以正常工作。单击不起作用的任何原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T02:30:50.247

问题是`submit`按钮提交页面。考虑使用

```
<button type="button" onclick="location.href='<%: Url.Action("EnterLogin", "LoginForm") %>'">PressMe</button> 
```

代替

```
<input type="submit" value="PressMe" onclick="location.href='<%: Url.Action("EnterLogin", "LoginForm") %>'" /> 
```

# javascript - 淘汰赛和coffeescript - uncouched 类型错误

> ID：13272021
> 
> 赞同：2
> 
> 时间：2012-11-07T14:44:55.487
> 
> 标签：javascript, knockout.js, coffeescript

我想用淘汰赛和咖啡脚本维护简单的应用程序。我想添加 Json 对象数组，例如：

```
[
    {
        Name = "",
        Subscribe = "",
        ScrollOfDish = [0]
    },
    {
        Name = "",
        Subscribe = "",
        ScrollOfDish = [0]
    }
] 
```

这是我的代码：

```
class Complex
        constructor: ()->
            @ComplexItems = ko.observableArray()
            @getAllComplex()
        self = this

        getAllComplex:()->
            $.ajax
                type: "POST"
                url: "/Complex/GetAllComplex"
                data: {}
                dataType:"json"
                contentType:"json"
                success:(res)->
                        self.ComplexItems res // here is the problem

    $(document).ready ()->
        window.model = new Complex()
        ko.applyBindings(model) 
```

但是我遇到了 uncouched 类型错误 ComplexItems is not a function 的问题。当然，我尝试反向`self.ComplexItems`并且`model.ComplexItems`- 它不起作用 - 但我想了解为什么我的示例不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T00:20:06.723

你`self = this`在错误的地方..现在它让'self'指向构造函数（而不是类的任何实例..）。应该：

```
class Complex
    constructor: ()->
        @ComplexItems = ko.observableArray()
        @getAllComplex()        

    getAllComplex:()->
        self = this    
        $.ajax
            type: "POST"
            url: "/Complex/GetAllComplex"
            data: {}
            dataType:"json"
            contentType:"json"
            success:(res)->
                    self.ComplexItems res

$(document).ready ()->
    window.model = new Complex()
    ko.applyBindings(model) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T01:15:04.800

首先，您需要修复您的 JSON 以使用`:`而不是`=`. 您可以像这样删除逗号甚至花括号：

```
[
  Name: ''
  Subscribe: ''
  ScrollOfDish: [0]
,
  Name: ''
  Subscribe: ''
  ScrollOfDish: [0]
] 
```

这是视图模型代码的工作版本：

```
$ ->

  class Complex
    constructor: ->
      @complexItems = ko.observableArray()
      @getAllComplex()

    getAllComplex: ->
      $.ajax
        type: 'POST'
        url: '/Complex/GetAllComplex'
        data: {}
        dataType: 'json'
        contentType: 'json'
        success: (res) =>
          @complexItems res

  window.model = new Complex()
  ko.applyBindings model 
```

您可以简单地使用粗箭头`=>`绑定`complexItems`到右侧`this`。我做了一些风格上的改变：

1.  使用`->`代替`() ->`
2.  使用`@`代替`this`
3.  变量名使用驼峰式大小写 ( `complexItems`)
4.  对非插值字符串使用单引号
5.  使用`$ ->`代替`$(document).ready ->`

我建议阅读[这个](https://github.com/polarmobile/coffeescript-style-guide)风格指南。

# sql - 在 postgres 中声明时间戳

> ID：13272022
> 
> 赞同：0
> 
> 时间：2012-11-07T14:45:08.530
> 
> 标签：sql, database, postgresql, datetime, stored-procedures

我必须将时间戳值插入表中。我通过编写存储过程来插入值。
这是我的存储过程的代码。

```
CREATE OR REPLACE FUNCTION dataInsert_Schedule() RETURNS boolean As
$$
DECLARE
    i integer;
    j integer;
    dur integer;
    tup Channel%rowtype;
BEGIN
    FOR tup IN SELECT * FROM Channel
    LOOP
        for i in 0..6 LOOP --days
            for j in 0..23 LOOP  --hours
                dur = round((random() * 2) + 1);
                IF i + dur > 24 then
                    dur = 24 - i;
                END IF;
                INSERT INTO Schedule VALUES(tup.Channel_ID, round((random() * 999) + 1),( current_date + (integer to_char(i,'9')) )+ (interval to_char(j,'99') || ' hour'), (interval  dur ||' hour'));
                i = i + dur - 1;
            END LOOP;
        END LOOP;
    END LOOP;
    return true;
END
$$ LANGUAGE plpgsql; 
```

当我编写查询时`Select * From dataInsert_Schedule();`，出现以下错误：

```
ERROR:  syntax error at or near "to_char"
LINE 1: ...d((random() * 999) + 1),( current_date + (integer to_char( $...
                                                             ^
QUERY:  INSERT INTO Schedule VALUES( $1 , round((random() * 999) + 1),( current_date + (integer to_char( $2 ,'9')) )+ (interval to_char( $3 ,'99') || ' hour'), (interval  $4  ||' hour'))
CONTEXT:  SQL statement in PL/PgSQL function "datainsert_schedule" near line 15

********** Error **********

ERROR: syntax error at or near "to_char"
SQL state: 42601
Context: SQL statement in PL/PgSQL function "datainsert_schedule" near line 15 
```

我第一次尝试这个

> `INSERT INTO Schedule VALUES(tup.Channel_ID, round((random() * 999) + 1),( current_date + (integer ''||i) )+ (interval (j ||' hour')), (interval dur ||' hour'));`

插入方式，但我遇到了同样的错误。

**为什么我收到此错误？**

该`schedule`表定义如下：

```
CREATE TABLE Schedule(
Channel_ID Integer  REFERENCES Channel(Channel_ID),
Program_ID Integer  REFERENCES Program(Program_ID),
Start_Time Timestamp NOT NULL,
Duration Interval NOT NULL,
CONSTRAINT Schedule_Key PRIMARY KEY(Channel_ID, Program_ID)
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T14:51:19.520

它对我有用：

```
select (to_char(1,'99') || ' hour')::interval; 
```

你不需要`to_char`：

```
select (1 || ' hour')::interval;
 interval 
----------
 01:00:00 
```

所以就是这样：

```
INSERT INTO Schedule
VALUES (
tup.Channel_ID,
round((random() * 999) + 1),
(current_date + i::integer) + (j || ' hour')::interval,
(dur ||' hour')::interval
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T18:39:22.000

可以在字符串常量之前指定类型名称以将其转换为该类型，但它仅适用于常量。所以`integer '123'`很好但`integer to_char(something)`或`interval column_name`不允许，这就是您的查询失败的原因。

这在手册的 SQL 语法章节中进行了解释，特别是本段：[其他类型的常量](http://www.postgresql.org/docs/current/static/sql-syntax-lexical.html#SQL-SYNTAX-CONSTANTS-GENERIC)。
摘抄：

> 可以使用以下任何一种表示法输入任意类型的常量：
> 
> type 'string'
> 'string'::type
> CAST ('string' AS type )

及以下：

> ::、CAST() 和函数调用语法也可用于指定任意表达式的运行时类型转换

与问题相关的一点是`type 'string'`符号不包含在可以接受任意表达式的语法中，与`::`and相反`cast()`。

# python - 图像在 Pygame 中旋转，同时保持平滑的边缘

> ID：13272023
> 
> 赞同：4
> 
> 时间：2012-11-07T14:45:11.783
> 
> 标签：python, image, pygame, smooth

我想旋转图像并保持边缘平滑。

这是它的样子

![原始图像](../Images/c85ef2d97d73e90e18ab7d9f7acf9b3d.png)

并且旋转后

![旋转图像](../Images/daa20d4fe05e4ba3b6e4b81e8e443615.png)

我正在使用的代码看起来像

```
def rot_center(self, image, angle):
   """rotate an image while keeping its center and size"""
   orig_rect = image.get_rect()
   rot_image = pygame.transform.rotate(image, angle)
   rot_rect = orig_rect.copy()
   rot_rect.center = rot_image.get_rect().center
   rot_image = rot_image.subsurface(rot_rect).copy()
   return rot_image 
```

有什么我做错了吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T21:23:40.847

尝试使用[pygame.transform.rotozoom](http://www.pygame.org/docs/ref/transform.html#pygame.transform.rotozoom)的比例`1.`它说它已过滤，我认为这意味着 AA。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-02T22:52:46.410

rotozoom 的问题是图像的边缘接触矩形而不是所有外部部分，这意味着如果你有一艘船，例如，凹陷的边缘看起来很好，只有更宽的部分会有锯齿问题。我设法通过去photoshop解决这个问题，并将我的PNG文件缩放2个像素（取决于你的图像，也许你需要尝试不同的缩放因子），这样我仍然有相同的图像尺寸，但真实的图像（彩色像素）在旋转时不会触及图像的矩形。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-25T13:49:11.307

不过，Rotozoom 似乎并没有平滑表面的边缘。也就是说，图像的内部看起来不错，但边缘仍然没有抗锯齿。

# ruby-on-rails - Ruby Postgresl 组声明

> ID：13272024
> 
> 赞同：0
> 
> 时间：2012-11-07T14:45:17.400
> 
> 标签：ruby-on-rails, postgresql, group-by

我有以下 postgresql 语句，它在 Navicat for Postgresql 中工作正常，

```
SELECT date_trunc('day', updated_at), count(*) as total_count 
FROM "persons"
WHERE ("persons"."updated_at" BETWEEN '2012-10-17 00:00:00.000000' AND '2012-11-07   12:25:04.082224') 
GROUP BY date_trunc('day',updated_at)
ORDER BY count(updated_at) DESC 
```

我得到了预期的结果

```
2012-10-31 00:00:00,5
2012-11-06 00:00:00,2
2012-11-05 00:00:00,1 
```

我需要将其转换为 ruby​​ 用于 RoR 项目

我写了这个声明如下

```
persons = where(updated_at: start.beginning_of_day..Time.zone.now)
persons = persons.group("date(updated_at)")
persons = persons.select("updated_at, count(*) as total_count")
persons = persons.order("count(updated_at)") 
```

但是我收到以下错误

```
PG::Error: ERROR:  column "persons.updated_at" must appear in the GROUP BY clause or be used in an aggregate function
LINE 1: SELECT updated_at, count(*) as total_count FROM "persons"  WH...
           ^
: SELECT updated_at, count(*) as total_count FROM "persons"  WHERE ("persons"."updated_at"     BETWEEN '2012-10-17 00:00:00.000000' AND '2012-11-07 14:38:54.674684') GROUP BY     date(persons.updated_at) ORDER BY count(updated_at) 
```

关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T16:56:13.927

您正在选择`updated_at`，但您正在分组`date(updated_at)`。您要么需要分组`updated_at`（这可能没有任何意义），要么更改您的选择，以便您选择`date(updated_at)`.

换句话说，以 Jon Day 的第二个例子为例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T15:04:30.773

也许你可以试试

```
persons = where(updated_at: start.beginning_of_day..Time.zone.now)
persons = persons.group("date(updated_at), updated_at")
persons = persons.select("updated_at, count(*) as total_count")
persons = persons.order("count(updated_at)") 
```

或者

```
persons = where(updated_at: start.beginning_of_day..Time.zone.now)
persons = persons.group("date(updated_at)")
persons = persons.select("date(updated_at), count(*) as total_count")
persons = persons.order("count(updated_at)") 
```

或者

```
persons = persons.find(:all, 
                       :select => "updated_at, count(*) as total_count",
                       :group => "updated_at",
                       :order => "count(updated_at)") 
```

# mysql - 选择数据库行值是否与一组字符串匹配的有效方法

> ID：13272029
> 
> 赞同：0
> 
> 时间：2012-11-07T14:45:40.977
> 
> 标签：mysql, sql, database

选择数据库行值是否与一组字符串匹配的有效方法

```
 SELECT id FROM tablename where 
    LeadStatus like "%Contact Attempt 1%" or 
    LeadStatus like "%Contact Attempt 2%" or 
    LeadStatus like "%Contact Attempt 3%" or 
    LeadStatus like "%Contact Attempt 4%" or 
    LeadStatus like "%Contact Attempt 5%" or 
    LeadStatus like "%Contact Attempt 6%" or 
    LeadStatus like "%Contact Attempt 7%" or 
    LeadStatus like "%Call Back/Follow-up%" or 
    LeadStatus like "%Working%" or 
    LeadStatus like "%Credit Pulled%" or 
    LeadStatus like "%Selected other Lender%" or 
    LeadStatus like "%Pre-Approved%" or 
    LeadStatus like "%Application Taken/Sent%" or 
    LeadStatus like "%Application Received%" or 
    LeadStatus like "%Submitted%" or 
    LeadStatus like "%Funded%" or 
    LeadStatus like "%Future Opportunity%" or 
    LeadStatus like "%Manager Review%" 
```

我觉得很清楚我想要什么？

**注意：**我无法更改该`LeadStatus`值，因为它是从不受我控制的 API 中获取的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T14:51:48.107

使用[IN](http://www.w3schools.com/sql/sql_in.asp)运算符怎么样？

这是[SQLFiddle.com](http://sqlfiddle.com/#!2/375f5/4)上的一个示例。

您可以动态构建 CSV 字符串列表，只需将其插入括号之间即可。但是，使用 IN 运算符的唯一缺点是您不能应用通配符搜索（使用“%”）。

# drupal - Drupal 7.12 翻译自定义字段

> ID：13272030
> 
> 赞同：1
> 
> 时间：2012-11-07T14:45:42.710
> 
> 标签：drupal, drupal-7, drupal-modules, cck

你如何翻译 Drupal 7.12 中的自定义字段？我遇到过实体翻译模块，虽然它也支持 7.15+ 核心，

有任何想法吗？非常感激

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-13T07:06:24.960

我也有同样的问题...最终得到了解决方案... PFB 步骤来解决它

1.  启用 i18n 的 i18_field “字段翻译”子模块
2.  转到 admin/config/regional/translate/i18n_string
3.  检查“字段”（正确检查所有）并单击“刷新字符串”。
4.  转到管理/配置/区域/翻译/翻译
5.  搜索所需的字符串并将其翻译成其他语言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T06:26:26.170

如果您升级您的 Drupal 核心，您将能够使用该模块。7.x 分支中的当前稳定版本是 7.22。您应该将您的核心和其他贡献的模块升级到最新的稳定版本。

# maven - 使用 maven 下载 Archiva Jars 时构建失败

> ID：13272033
> 
> 赞同：0
> 
> 时间：2012-11-07T14:46:10.947
> 
> 标签：maven, jenkins, maven-3, archiva

我想用 maven 3 下载[Archiva Rest API jar](http://archiva.apache.org/docs/1.4-M2/adminguide/webservices/rest.html)，这样我就可以制作一些 Rest API，但我总是遇到构建失败。这是我的 POM：

```
<dependency>
  <groupId>org.apache.archiva</groupId>
  <artifactId>archiva</artifactId>
  <version>1.4-M3</version>
</dependency>
<dependency>
  <groupId>org.apache.archiva</groupId>
  <artifactId>archiva-rest-api</artifactId>
  <version>1.4-M3</version>
</dependency> 
```

我总是有这个错误：

```
[INFO] Scanning for projects...
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] Building Remote Deployment 1.0
[INFO] ------------------------------------------------------------------------
Downloading: http://repo.maven.apache.org/maven2/org/kohsuke/access-modifier-checker/maven-metadata.xml
Downloaded: http://repo.maven.apache.org/maven2/org/kohsuke/access-modifier-checker/maven-metadata.xml (335 B at 1.6 KB/
sec)
Downloading: http://repo.maven.apache.org/maven2/org/kohsuke/stapler/stapler/maven-metadata.xml
Downloaded: http://repo.maven.apache.org/maven2/org/kohsuke/stapler/stapler/maven-metadata.xml (333 B at 5.1 KB/sec)
Downloading: http://repo.maven.apache.org/maven2/org/apache/archiva/archiva/1.4-M3/archiva-1.4-M3.jar
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 5.820s
[INFO] Finished at: Wed Nov 07 15:38:03 CET 2012
[INFO] Final Memory: 25M/310M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal on project remote-deployment-new: Could not resolve dependencies for project com.ebiznext
.plugins:remote-deployment-new:hpi:1.0: Could not find artifact org.apache.archiva:archiva:jar:1.4-M3 in central (http:/
/repo.maven.apache.org/maven2) -> [Help 1]
.... 
```

我该如何解决？

[编辑] 事实上，我正在开发一个 Jenkins 插件，我希望这个插件可以在 Archiva 中下载一些 jars。为此，我会做一些休息服务。这就是我需要这些依赖项的原因。要在档案实例上进行 Rest 调用，我们必须添加 archiva-rest-api 依赖项等等。问题是它不会下载它们（archiva-rest-api、jackson、apache cxf）。这是我的 POM：

```
 <dependencies>
   <dependency>
  <groupId>org.codehaus.jackson</groupId>
  <artifactId>jackson-jaxrs</artifactId>
  <version>1.9.9</version>
</dependency>
<dependency>
  <groupId>org.codehaus.jackson</groupId>
  <artifactId>jackson-xc</artifactId>
  <version>1.9.9</version>
</dependency>
<dependency>
  <groupId>org.codehaus.jackson</groupId>
  <artifactId>jackson-core-asl</artifactId>
  <version>1.9.9</version>
</dependency>
<dependency>
  <groupId>org.apache.cxf</groupId>
  <artifactId>cxf-bundle-jaxrs</artifactId>
  <version>2.6.3</version>
  <exclusions>
    <exclusion>
      <groupId>org.eclipse.jetty</groupId>
      <artifactId>jetty-server</artifactId>
    </exclusion>
    <exclusion>
      <groupId>commons-logging</groupId>
      <artifactId>commons-logging</artifactId>
    </exclusion>
    <exclusion>
      <groupId>org.codehaus.jettison</groupId>
      <artifactId>jettison</artifactId>
    </exclusion>
  </exclusions>
</dependency>
<!-- <dependency>
  <groupId>org.apache.archiva</groupId>
  <artifactId>archiva-rest-api</artifactId>
  <version>1.4-M4</version>
</dependency> -->
   </dependencies>
    <!-- get every artifact through repo.jenkins-ci.org, which proxies all the artifacts that we need -->

<repositories>
    <repository>
      <id>repo.jenkins-ci.org</id>
      <url>http://repo.jenkins-ci.org/public/</url>
    </repository>
  </repositories>

  <pluginRepositories>
    <pluginRepository>
      <id>repo.jenkins-ci.org</id>
      <url>http://repo.jenkins-ci.org/public/</url>
    </pluginRepository>
  </pluginRepositories> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T09:59:57.117

也许看看这里一些依赖项是详细的[http://archiva.apache.org/docs/1.4-M3/adminguide/webservices/rest.html](http://archiva.apache.org/docs/1.4-M3/adminguide/webservices/rest.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T16:04:25.280

您的错误包括第一个依赖项 -`org.apache.archiva:archiva`不包含 JAR 工件并且 Maven 在找不到它时会抱怨（请参阅 Maven 中心中的[目录列表](http://search.maven.org/#browse|1597924731)）。

尝试删除此依赖项并重试。

# inheritance - 如何在 Dart 中调用超级构造函数？

> ID：13272035
> 
> 赞同：124
> 
> 时间：2012-11-07T14:46:26.860
> 
> 标签：inheritance, constructor, dart, superclass, extends

如何在 Dart 中调用超级构造函数？是否可以调用命名的超级构造函数？

* * *

## 回答 #1

> 赞同：180
> 
> 时间：2012-11-07T14:46:26.860

是的，它的语法接近[C#](https://stackoverflow.com/questions/12051/calling-base-constructor-in-c-sharp)，这是一个同时具有默认构造函数和命名构造函数的示例：

```
class Foo {
  Foo(int a, int b) {
    //Code of constructor
  }

  Foo.named(int c, int d) {
    //Code of named constructor
  }
}

class Bar extends Foo {
  Bar(int a, int b) : super(a, b);
}

class Baz extends Foo {
  Baz(int c, int d) : super.named(c, d);  
} 
```

如果要在子类中初始化实例变量，则`super()`调用必须位于初始化列表的最后。

```
class CBar extends Foo {
  int c;

  CBar(int a, int b, int cParam) :
    c = cParam,
    super(a, b);
} 
```

[您可以在/r/dartlang](https://www.reddit.com/r/dartlang/comments/5r02tm/supercall_must_be_last_in_initializer_list/)上阅读有关此`super()`调用指南背后的动机。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2019-05-23T07:42:31.163

这是我与您共享的文件，请按原样运行。您将学习如何调用超级构造函数，以及如何调用超级参数化构造函数。

```
/ Objectives
// 1\. Inheritance with Default Constructor and Parameterised Constructor
// 2\. Inheritance with Named Constructor

void main() {

    var dog1 = Dog("Labrador", "Black");

    print("");

    var dog2 = Dog("Pug", "Brown");

    print("");

    var dog3 = Dog.myNamedConstructor("German Shepherd", "Black-Brown");
}

class Animal {

    String color;

    Animal(String color) {
        this.color = color;
        print("Animal class constructor");
    }

    Animal.myAnimalNamedConstrctor(String color) {
        print("Animal class named constructor");
    }
}

class Dog extends Animal {

    String breed;

    Dog(String breed, String color) : super(color) {
        this.breed = breed;
        print("Dog class constructor");
    }

    Dog.myNamedConstructor(String breed, String color) : super.myAnimalNamedConstrctor(color) {
        this.breed = breed;
        print("Dog class Named Constructor");
    }
} 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2020-12-26T20:07:02.873

具有可选参数的构造函数的情况

```
class Foo {
  String a;
  int b;
  Foo({this.a, this.b});
}

class Bar extends Foo {
  Bar({a,b}) : super(a:a, b:b);
} 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2014-12-07T13:35:55.093

### 我可以调用超类的私有构造函数吗？

是的，但前提是您创建的超类和子类在同一个库中。（因为私有标识符在它们定义的整个库中都是可见的）。私有标识符是以下划线开头的标识符。

```
class Foo {    
  Foo._private(int a, int b) {
    //Code of private named constructor
  }
}

class Bar extends Foo {
  Bar(int a, int b) : super._private(a,b);
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-04-09T09:51:34.697

由于 dart 支持将类实现为接口（[隐式接口），因此如果您](https://www.dartlang.org/guides/language/language-tour#implicit-interfaces)**实现**了父构造函数，则不能调用它，您应该使用**extends**。如果您使用**工具**，请将其更改为**扩展**并使用 Eduardo Copat 的解决方案。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-02-08T17:44:42.970

```
class AppException implements Exception {
  final _message;
  final _prefix;

  //constructor with optional & not named paramters
  //if not the parameter is not sent, it'll be null
  AppException([this._message, this._prefix]);

  String toString() {
    return "$_prefix$_message";
  }
}

class FetchDataException extends AppException {
  //redirecting constructor with a colon to call parent two optional parameters
  FetchDataException([String msg]) : super(msg, "Error During Communication: ");
}

class BadRequestException extends AppException {
  BadRequestException([msg]) : super(msg, "Invalid Request: ");
}

class UnauthorisedException extends AppException {
  UnauthorisedException([msg]) : super(msg, "Unauthorised: ");
}

class InvalidInputException extends AppException {
  InvalidInputException([String msg]) : super(msg, "Invalid Input: ");
} 
```

# javascript - 调用基本构造函数 - Javascript

> ID：13272038
> 
> 赞同：11
> 
> 时间：2012-11-07T14:46:31.470
> 
> 标签：javascript, inheritance, prototype

有两种方法可以在子级中调用父级构造函数。

```
var A = function A() {
  this.x = 123;
};

var B = function B() {

  // 1\. call directly
  A.call(this);

  // 2\. call from prototype
  A.prototype.constructor.call(this);
};

B.prototype = Object.create(A.prototype);
B.prototype.constructor = B; 
```

有没有一种情况会比另一种更安全/更好，或者它们总是相同的？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-07T14:50:07.900

出于以下原因，直接使用基本构造函数总是更好：

1.  它更快。解释器不需要访问`prototype.constructor`.
2.  它更安全。考虑下面的程序。

`A`继承自`C`，但我忘记设置`A.prototype.constructor`回`A`. 所以它现在指向`C`。`B`如果我们使用第二种方法，这会导致构造函数出现问题：

```
var C = function C() {
    // some code
};

var A = function A() {
  this.x = 123;
};

A.prototype = Object.create(C.prototype);
// I forgot to uncomment the next line:
// A.prototype.constructor = A;

var B = function B() {

  // 1\. call directly
  A.call(this);

  // 2\. call from prototype
  A.prototype.constructor.call(this); // A.prototype.constructor is C, not A
};

B.prototype = Object.create(A.prototype);
B.prototype.constructor = B; 
```

# javascript - Javascript 或 JQuery 滚动

> ID：13272039
> 
> 赞同：-1
> 
> 时间：2012-11-07T14:46:31.210
> 
> 标签：javascript, jquery

我有一个表体

```
<tbody id='displaylaps' class='scroll' style='width: 100%'></tbody> 
```

当达到一定的垂直长度时，它会填充数据并滚动。

我想有一个过度滚动的效果，就像 iOS Safari 页面结束并反弹后的效果一样。还需要与 iOS 触控兼容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T01:07:12.087

您想在 iOS 或桌面网络浏览器中完成此操作吗？

对于 iOS，只需将其添加到您的 CSS 中：

```
#displaylaps {
  overflow: scroll;
  -webkit-overflow-scrolling: touch;
} 
```

或者，您可以将[iScroll](http://cubiq.org/iscroll)库用于桌面 webkit 浏览器

# search - 使用 dataimporthandler solr 导入 csv

> ID：13272042
> 
> 赞同：2
> 
> 时间：2012-11-07T14:46:44.580
> 
> 标签：search, csv, solr, dataimporthandler, dih

我正在尝试将 solr 与 DIH 一起使用来索引 csv 文件。我已经使用 solr wiki 上提到的补丁 SOLR-2549 修补了我的 DIH 库（请参阅[http://wiki.apache.org/solr/DataImportHandler#Configuration_in_data-config.xml-1](http://wiki.apache.org/solr/DataImportHandler#Configuration_in_data-config.xml-1)），以便在不使用 Transformers 的情况下导入 csv 文件连同 LineEntityProcessor。

不幸的是，我无法进行导入工作，并且出现以下错误堆栈：

```
INFO: [csv] webapp=/solr path=/dataimport params={command=full-import&optimize=false&clean=true&commit=true&verbose=true} status=0 QTime=33 {deleteByQuery=*:*} 0 33
7 nov. 2012 14:16:03 org.apache.solr.common.SolrException log
GRAVE: Full Import failed:java.lang.RuntimeException: java.lang.RuntimeException: org.apache.solr.handler.dataimport.DataImportHandlerException: java.lang.NullPointerException
        at org.apache.solr.handler.dataimport.DocBuilder.execute(DocBuilder.java:273)
        at org.apache.solr.handler.dataimport.DataImporter.doFullImport(DataImporter.java:382)
        at org.apache.solr.handler.dataimport.DataImporter.runCmd(DataImporter.java:448)
        at org.apache.solr.handler.dataimport.DataImporter$1.run(DataImporter.java:429)
Caused by: java.lang.RuntimeException: org.apache.solr.handler.dataimport.DataImportHandlerException: java.lang.NullPointerException
        at org.apache.solr.handler.dataimport.DocBuilder.buildDocument(DocBuilder.java:413)
        at org.apache.solr.handler.dataimport.DocBuilder.doFullDump(DocBuilder.java:326)
        at org.apache.solr.handler.dataimport.DocBuilder.execute(DocBuilder.java:234)
        ... 3 more
Caused by: org.apache.solr.handler.dataimport.DataImportHandlerException: java.lang.NullPointerException
        at org.apache.solr.handler.dataimport.DocBuilder.buildDocument(DocBuilder.java:542)
        at org.apache.solr.handler.dataimport.DocBuilder.buildDocument(DocBuilder.java:411)
        ... 5 more
Caused by: java.lang.NullPointerException
        at org.apache.solr.handler.dataimport.LineEntityProcessor.initDelimitedOrFixedWidth(LineEntityProcessor.java:142)
        at org.apache.solr.handler.dataimport.LineEntityProcessor.init(LineEntityProcessor.java:115)
        at org.apache.solr.handler.dataimport.EntityProcessorWrapper.init(EntityProcessorWrapper.java:74)
        at org.apache.solr.handler.dataimport.DocBuilder.buildDocument(DocBuilder.java:430)
        at org.apache.solr.handler.dataimport.DocBuilder.buildDocument(DocBuilder.java:498)
        ... 6 more 
```

我认为这与我的数据配置有关。这是我的 data-config.xml 文件：

```
<dataConfig>
    <dataSource name="dfs" type="FileDataSource"/>
    <document>
        <entity name="sourcefile"
                processor="FileListEntityProcessor"
                fileName="rocinter.csv"
                rootEntity="false"
                baseDir="/user/xxx/work/solr/example/example-DIH/solr/csv/inputfolder"
        >

            <entity name="entryline"
                    processor="LineEntityProcessor"
                    url="${sourcefile.fileAbsolutePath}"
                    rootEntity="true"
                    dataSource="fds"
                    separator=","
            >
            </entity>
        </entity>
    </document>
</dataConfig> 
```

任何人都可以帮助我理解这个问题或使用修补的 LineEntityProcessor 版本提供一个清晰的配置文件来导入 csv 文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T11:11:58.190

我终于从用户邮件列表中得到了答案。实际上，这是补丁中的一个错误。

更新版本的补丁附加到 jira 问题。

见：[SOLR-2549](https://issues.apache.org/jira/browse/SOLR-2549)

# javascript - 通过 jQuery 提取 HTML 值

> ID：13272044
> 
> 赞同：0
> 
> 时间：2012-11-07T14:46:49.513
> 
> 标签：javascript, jquery

我有这些数据属性

```
<li data-audio="" data-pic="images/one.png" data-word="one" data-hint="What?"></li> 
```

我用这个功能把它们拉过去

```
$(wordsData).each(function () {
    var elm = $(this);
    listOfWords.push({
        "name": elm.data("word"),
        "pic": elm.data("pic"),
        "hint": elm.data("hint"),
        "audio": elm.data("audio")
    });
}); 
```

我的问题是，当我拉出图片时，我想在同一个 div 中显示提示。但是由于某种原因，当我在控制台中检查时它显示 value=""，而它应该显示“什么？”

```
<div class="hint-img-wrapper">
<img src="" value="" id="hintPic" class="pic-hint" alt="Hint" /> 
```

我这样显示

```
 $("#hintPic").attr('src', listOfWords[rndWord].pic).attr('value', listOfWords[rndWord].hint);
        $(hintPic).show(); 
```

有人可以告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T14:51:10.293

你真正想要设置的`.attr('value', listOfWords[rndWord].hint);`不是`.attr('title', listOfWords[rndWord].hint);`

如果将鼠标悬停在图像上，通常会显示 title 属性。如果没有指定标题，它将使用 alt 属性。

# mysql - mysql嵌套选择语句

> ID：13272045
> 
> 赞同：2
> 
> 时间：2012-11-07T14:46:54.720
> 
> 标签：mysql, sql

我是关系表的新手。随着我了解的更多，我看到了 sql 语句的许多优点。但是我坚持了一些观点。

我寻找是否可以从 5 个表中获得所需数据集的单个表。其中一个名为“eta”的表用于连接其他 4 个表。

目的：一个电话号码或邮箱可以被多个用户使用，用户也可以有多个电话号码或邮箱。我想列出电话号码或电子邮件地址以及使用它们的用户名。

示例数据：请查看[http://sqlfiddle.com/#!2/60acce](http://sqlfiddle.com/#!2/60acce) 了解表结构和示例数据集

手机壳的最终预期最终结果如下：

```
 phone            name    extra
  45336467      ABC Co.   
  45336467      Gery      114
  45336467      Todd      117
  45336467      Adam      119 
```

谢谢

编辑：表关系的解释。

表 'eta' 有 4 个具有表关系的字段。“自己”列显示公司、个人等值“f”表示公司，“k”表示其他人将用于不同的表格

v1_id 用于自己字段的引用表的 id ..

“res”列是指电子邮件和电话表。电话的值't'和电子邮件的'e'。v2_id 用于 res 字段的引用表的 id

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T14:58:17.903

通过您的架构归档后，我相信以下查询应该适合您：

```
SELECT
    phone.tel AS phone,
    CASE WHEN person.name IS NULL THEN company.titles ELSE person.name END AS name,
    eta.extra AS extra
FROM
    eta
    LEFT JOIN person
        ON eta.v1_id = person.id
        AND eta.own = 'k'
    LEFT JOIN company
        ON eta.v1_id = company.id
        AND eta.own = 'f'
    JOIN phone
        ON phone.id = eta.v2_id
WHERE
    eta.res = 't' 
```

这假设`eta.res = 't'`如果关系是“电话”表。此外，`eta.own = 'k'`对于人，`eta.own = 'f'`对于公司。

它使用两个左连接从`person`/`company`表中拉取数据，以便在单个查询中完成拉取操作。如果该`person.name`列为空，则表示当前记录来自`company`表并将选择该值（对于名称列）。

同样可以选择电子邮件地址（假设`eta.res = 'e'`与电子邮件表相关）：

```
SELECT
    email.email AS email,
    CASE WHEN person.name IS NULL THEN company.titles ELSE person.name END AS name
FROM
    eta
    LEFT JOIN person
        ON eta.v1_id = person.id
        AND eta.own = 'k'
    LEFT JOIN company
        ON eta.v1_id = company.id
        AND eta.own = 'f'
    JOIN email
        ON email.id = eta.v2_id
WHERE
    eta.res = 'e' 
```

# c - 从 glOrtho 切换到 gluPerspective

> ID：13272046
> 
> 赞同：3
> 
> 时间：2012-11-07T14:46:54.970
> 
> 标签：c, opengl, glut, projection, orthographic

我在 (0,0) 处有一辆汽车，并设置了一些障碍，但现在我主要关心的是从 glPerspective 切换到 glOrtho，反之亦然。当我从透视切换到正交时，我得到的只是黑屏。

```
void myinit(){
    glClearColor(0.0,0.0,0.0,0.0);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    gluPerspective(60,ww/wh,1,100);
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();
    gluLookAt(-5,5,3,backcarx,topcarx,0,0,0,1);
}

void menu(int id){
    /*menu selects if you want to view it in ortho or perspective*/
    if(id == 1){
        glClear(GL_DEPTH_BUFFER_BIT);
        glViewport(0,0,ww,wh);
        glMatrixMode(GL_PROJECTION);
        glLoadIdentity();
        glOrtho(-2,100,-2,100,-1,1);
        glMatrixMode(GL_MODELVIEW);
        glutPostRedisplay();
    }
    if(id == 2){
        glMatrixMode(GL_PROJECTION);
        glLoadIdentity();
        gluPerspective(60,ww/wh,1,100);
        glMatrixMode(GL_MODELVIEW);
        glLoadIdentity();
        viewx = backcarx - 10;
        viewy = backcary - 10;
        gluLookAt(viewx,viewy,viewz,backcarx,topcarx,0,0,0,1);
    }
} 
```

我已经尝试使用清除深度缓冲区，但仍然无法正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T16:20:02.500

你的心理障碍就在这里：

> ```
> void myinit(){
>     glClearColor(0.0,0.0,0.0,0.0);
>     glMatrixMode(GL_PROJECTION);
>     glLoadIdentity();
>     gluPerspective(60,ww/wh,1,100);
>     glMatrixMode(GL_MODELVIEW);
>     glLoadIdentity();
>     gluLookAt(-5,5,3,backcarx,topcarx,0,0,0,1);
> } 
> ```

OpenGL*未初始化！*是的，有些操作只是偶尔进行，比如加载纹理。但总的来说，OpenGL 是一个基于状态的绘图系统。这意味着，您在使用它之前就设置了所有与绘图相关的东西。“myinit”函数中的代码实际上属于显示函数。一旦你有了它，进行切换就变得很简单：设置一个枚举变量并在绘制之前根据变量的值设置正确的投影。

作为一般规则：OpenGL 绘图操作——以及设置转换状态属于该操作集——只属于绘图代码。因此，您的“菜单”功能根本没有意义。它是一个事件处理程序。事件处理程序处理输入，它们不生成输出。在事件处理程序中，您更改变量的值，然后标记要执行的输出。

* * *

### 由于评论而更新：

```
typedef enum ProjectionType_t { Ortho, Perspective } ProjectionType;

ProjectionType projection;

void onMenu(int entry)
{
    swtich(entry) {
    case ...:
        projection = Ortho; break;
    case ...:
        projection = Perspective; break;
    }

    glutPostRedisplay();
}

void display(void)
{
    glClear(...);

    glViewport(...);

    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    switch(projection) {
    case Ortho:
        glOrtho(...); break;

    case Perspective:
        gluPerspective(...); break;
    }    

    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();

    ...

} 
```

# verilog - 这个 Verilog 初始化语法的重要性顺序是什么？

> ID：13272049
> 
> 赞同：3
> 
> 时间：2012-11-07T14:47:00.863
> 
> 标签：verilog, system-verilog

这是一个简单的 SystemVerilog 问题，我很难找到答案。

在这种位数组初始化语法中，b[0] 部分是分配给 a 的最高有效位还是最低有效位？

```
bit a[7:0];
bit b[7:0] = 8'hff;
bit c[7:0] = 8'h00;

a = {b[0], c[6:0]}; 
```

那么 a[0] == 1 还是 a[7] == 1？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T18:19:10.620

您发现很难找到答案的原因是因为结果取决于您声明事物的方式。

你已经宣布`a`为`[7:0]`. 因此，其中的位`a`排列如下：

```
a7 a6 a5 a4 a3 a2 a1 a0 
```

然后分配`{b[0], c[6:0}`给`a`：

```
a7 a6 a5 a4 a3 a2 a1 a0 = b0 c6 c5 c4 c3 c2 c1 c0
 1  0  0  0  0  0  0  0 =  1  0  0  0  0  0  0  0 
```

`A[7] == 1`

如果您声明`a`是`[0:7]`结果将是：

```
a0 a1 a2 a3 a4 a5 a6 a7 = b0 c6 c5 c4 c3 c2 c1 c0
 1  0  0  0  0  0  0  0 =  1  0  0  0  0  0  0  0 
```

`A[0] == 1`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T16:27:50.300

`b[0]`分配给最高有效位，`a[7]`; 即`a[7] == 1`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-08T13:27:59.937

但是，我不确定这是错字还是您打算使用未打包的声明。`bit a[7:0]`是一个`unpacked array`，不代表连续存储，不能直接赋值packed或者integral值。

以下是从`SystemVerilog for Design`, P.114, 5.3.1 Unpacked arrays中采用的

> 解包数组独立存储每个元素，但在一个通用数组名称下分组。

P.122, 5.3.5 为数组赋值

> SystemVerilog 扩展了 Verilog，增加了两种为解压数组赋值的方法：
> - 可以为整个数组分配一个值列表
> - 可以为数组的一个切片分配一个值列表。
> 
> 值列表在 '{ } 大括号之间指定，与初始化解压缩数组相同。

对于打包数组，`bit [7:0] a`我们确实得到了 Paul 的正确答案。

# objective-c - 沿线路径拖动uiview

> ID：13272051
> 
> 赞同：0
> 
> 时间：2012-11-07T14:47:06.337
> 
> 标签：objective-c, ios

在我的应用程序中，我有一个`UIview`由多个`uiview`子视图组成的。**我想在一条直线上**水平拖动一个 UIView ，我使用`SetCenter`了属性，但它不起作用。我的代码：

```
 CGPoint translatedPoint = [gestureRecognizer translationInView:[myview superview]];

    if([gestureRecognizer state] == UIGestureRecognizerStateBegan) {
        _firstX = [myview center].x;
        _firstY = [myview center].y;
    }

    translatedPoint = CGPointMake(_firstX+translatedPoint.x, _firstY+translatedPoint.y); 

    [myview setCenter:translatedPoint]; 
```

在这里，当我开始拖动`myview`它时，它会随着我的鼠标指针位置移动。但我只想拖动水平路径（即直线）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T14:49:48.317

所以只需更新 x 坐标而不是 y。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T15:25:58.183

```
CGPoint translatedPoint = [gestureRecognizer translationInView:[myview superview]];

    if([gestureRecognizer state] == UIGestureRecognizerStateBegan) {
        _firstX = [myview center].x;
    }

    translatedPoint = CGPointMake(_firstX+translatedPoint.x, _firstY); 

    [myview setCenter:translatedPoint]; 
```

# c# - c#的FormatNumber

> ID：13272056
> 
> 赞同：0
> 
> 时间：2012-11-07T14:47:27.090
> 
> 标签：c#, .net, vb.net

我正在努力为 vb 函数 FormatNumber 在 c# 中使用正确的语法...我会说“iPremium”是一个对象，因为它从 tableadapter 返回数据。

'ipremium' 持有的值是 943.4000 并且想法是在 '.' 之后只有两位小数，我希望使用正确的语法可以实现这一点，但不幸的是不是 ac# 专家，可能需要一段时间才能弄清楚这个出来。

这是vb代码：

```
 iPremium = FormatNumber(iPremium, 2, TriState.True) 
```

关于这是如何实现的任何想法？

感谢您的任何想法和建议，如果措辞不正确，请原谅无知

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T14:50:50.457

```
var formattedNumber = iPremium.ToString("0.00"); 
```

或者，如果您希望对数字进行四舍五入，而不仅仅是截断精度：

```
var formattedNumber = Math.Round(iPremium, 2).ToString("0.00").Dump(); 
```

以下是您可以与 ToString 一起使用的各种格式的列表：http: [//msdn.microsoft.com/en-us/library/dwhawy9k.aspx](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T14:53:36.777

```
var roundedNumber = Math.Round(iPremium, 2);
var formattedNumber = String.Format("{0:#.##}", roundedNumber); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T15:01:14.043

我假设`TableAdapter`返回 a`Datatable`也可以使用强类型：

```
// first row as example (add using.System.Linq)
double value = table.AsEnumerable().First().Field<double>("iPremium"); 
```

现在您可以使用`String.Format`或仅`ToString`使用自定义格式：

```
string result = value.ToString("0.00"); 
```

# c# - 我如何/应该使用 RSA 加密可变大小数据 (RSACryptoServiceProvider)

> ID：13272063
> 
> 赞同：2
> 
> 时间：2012-11-07T14:47:40.757
> 
> 标签：c#, encryption, rsa, public-key-encryption

在我的研究中，我发现了关于这个主题的混合信息，因此我正在寻找专业知识来解释加密可变数量数据的最佳方法。

**要求：**

[编辑：添加附加要求 #3 以回应评论]

1.  我想将 RSA 用于公钥/私钥加密方案，这样我就可以将公钥分发给应该加密数据但不知道如何解密数据的应用程序

2.  我需要支持从 16 个字符（信用卡号）到千字节（序列化对象）及以上的数据长度。我加密的大部分数据都很小（信用卡、地址等）。

3.  这是为了加密静态数据。

**我知道的选项：**

1.  **RSA-ONLY：**用于使用`RSACryptoServiceProvider`公钥加密所有数据。遍历小于键大小减去填充的块中的数据。

2.  **HYBRID：**用于`AesCryptoServiceProvider`加密数据、调用 `.GenerateKey()`和`.GenerateIV()`生成随机密钥和IV。然后使用 RSACryptoServiceProvider 加密上述密钥和 IV 并将其添加到数据中。

在我看来，混合方法让我两全其美。强分组密码 (AES) 和分布式公钥 (RSA)。

这些方法的优缺点是什么？标准是什么？令人惊讶的是，我没有找到关于该主题的太多意见或信息，并希望您提供任何参考资料。

**奖励：** 出于各种原因，包括公司许可限制，我正在推出自己的方法，但我很好奇 C# 是否有一个好的标准开源方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T16:36:42.707

在大多数情况下，RSA 用于加密对称密钥（您实际上并不需要加密 IV，但是嘿......）

如果您使用 RSA 加密数据（而不是密钥），您可能会遇到在对称块密码的上下文中已知的 ECB（电子密码本模式）问题：对于给定的密钥，始终映射明文到相同的密文......仅此一项并不能帮助破解加密，但它可能会泄露信息，因为攻击者可以识别哪些数据包包含相同的明文

我会选择混合方法，因为它适用于任意大小的数据，并且除非您选择 ECB 作为操作模式（CBC - Cypher Block Chaining mode - 应该这样做），否则不会容易出现这种信息泄漏

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-01T03:26:19.363

如果你只想使用 RSA 存储少量数据，小于密钥中的位数，你可以用随机数填充输入数据。[https://en.wikipedia.org/wiki/RSA_(cryptosystem)#Padding](https://en.wikipedia.org/wiki/RSA_(cryptosystem)#Padding)列出了几种填充方案

# mysql - mysql标签系统

> ID：13272065
> 
> 赞同：2
> 
> 时间：2012-11-07T14:47:48.230
> 
> 标签：mysql, wordpress, tags

我需要一些有关 mysql 查询的帮助

我正在使用带有我自己设计的一些表格的 wordpresses 标记系统

这个想法是拉回与原始帖子有共同标签的项目列表，我会尽力解释

假设您有一个带有 5 个标签 tagA tagB tagC 等的帖子

我想在 mysql 上运行一个查询，该查询将拉回一个按其他项目共有多少标签排序的列表

我想它会根据与原始帖子相关联的标签计数创建一个新列。

所以如果一篇文章有​​相同的 5 个标签，我会在新列中看到 post_id 和 5

```
| post_id | in_common |
-----------------------
|   35    |     5     |
-----------------------
|   109   |     5     |
-----------------------
|   100   |     4     | 
```

等等。

但我什至不知道从哪里开始这个查询

标签在 wordpress 中，并根据我可以使用的一个标签获取所有帖子

```
SELECT * 
FROM wp_posts 
inner JOIN wp_term_relationships ON wp_posts.ID = wp_term_relationships.object_ID 
inner JOIN wp_terms ON wp_terms.term_id = wp_term_relationships.term_taxonomy_id 
WHERE wp_terms.name =  'tax' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T15:02:42.603

正如你提到的 wordpress 我猜你正在使用 PHP。因此，我建议使用 PHP 构建`term_taxonomy_id`当前帖子的 s 的逗号分隔（并正确转义）列表，然后使用这样的简单查询来获取所有具有共同标签的帖子的列表：

```
SELECT wp_posts.ID, COUNT(*)
FROM wp_posts
JOIN wp_term_relationships ON wp_posts.ID = wp_term_relationships.object_ID 
WHERE term_taxonomy_id IN ('.$the_list.')
GROUP BY wp_posts.ID 
```

# mongodb - 减少 Mongo 用于存储推文的数据库大小

> ID：13272066
> 
> 赞同：0
> 
> 时间：2012-11-07T14:47:55.547
> 
> 标签：mongodb

我需要为一个项目存储数百万条推文。目前我有 950 万条推文（从推特的样本流中每秒插入约 40 条推文）。MongoDB 的“tweets”集合的数据库大小为 22GB。

由于我计划再获得数百万，我想知道是否有任何我忽略的配置选项，因为我刚刚安装了 mongo 并“按原样”运行服务器。

提前致谢。

# actionscript-3 - AIR 应用程序自行更新？

> ID：13272067
> 
> 赞同：0
> 
> 时间：2012-11-07T14:48:10.117
> 
> 标签：actionscript-3, apache-flex, air, flex4.5, flex4.6

如何使 AIR 应用程序使用更新的版本自行更新？

（Android 和 iOS 上的 AIR）（Flex 4.6）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T21:38:55.670

有大量的教程可以让空气自动更新。这些都专注于桌面应用程序。

您要求为 Android 和 iOS 提供自动更新功能。Android 和 iOS 有自己的更新机制。如果您在应用商店推出新版本，应用商店或 Play 商店应处理更新。无法让 adobe air 在这些移动操作系统上自行更新，因为这可能会产生安全问题。

# ruby-on-rails-3 - IE/Safari 不能正确保存/读取 cookie CSRF？

> ID：13272069
> 
> 赞同：0
> 
> 时间：2012-11-07T14:48:13.930
> 
> 标签：ruby-on-rails-3, cookies, heroku

我有一个基于 Michael Hartl 的 Ruby on Rails 教程（第二版）的用户模型，它在实践中从 linux 机器本地托管，但当我部署到 Heroku 时，IE 和 Safari 出现问题。（Chrome 和 firefox 很好用。）我使用 cookie 来设置我在网站上不断调用的 current_user 值。

这是我的 session_helper.rb

```
module SessionsHelper

  def sign_in(user)
    cookies.permanent[:remember_token] = user.remember_token
    self.current_user = user
  end

  def signed_in?
    !current_user.nil?
  end

  def current_user=(user)
    @current_user = user
  end

  def current_user
    @current_user ||= User.find_by_remember_token(cookies[:remember_token])
  end

  def current_user?(user)
    user == current_user
  end

  def signed_in_user
    unless signed_in?
      store_location
      redirect_to signin_url, notice: "Please sign in." 
    end
  end

  def sign_out
    self.current_user = nil
    cookies.delete(:remember_token)
  end

  def redirect_back_or(default)
    redirect_to(session[:return_to] || default)
    session.delete(:return_to)
  end

  def store_location
    session[:return_to] = request.url
  end
end 
```

我的会话控制器如下：class SessionsController < ApplicationController

```
 def new
  end

  def create
    user = User.find_by_email(params[:session][:email].downcase)
    if user && user.authenticate(params[:session][:password])
      sign_in user
      redirect_back_or user
    else
      flash.now[:error] = 'Invalid email/password combination'
      render 'new'
    end
  end

  def destroy
    sign_out
    redirect_to root_url
  end

end 
```

同样，当我创建用户/登录时，它只会在 IE8> 和 Safari 中丢失我的 cookie。这是我得到的日志。

```
2012-11-06T19:28:08+00:00 app[web.1]: Started POST "/sessions" for XXX.XXX.XXX.XXX at  2012-11-06 19:28:08 +0000
2012-11-06T19:28:08+00:00 app[web.1]: Processing by SessionsController#create as HTML
2012-11-06T19:28:08+00:00 app[web.1]: Parameters: {"utf8"=>"â", "authenticity_token"=>"Eh3xta4VHlHgBVEKiLn3CRKgWb5xFbAx91eNJlYFySs=", "session"=>{"email"=>"A@User.com", "password"=>"[FILTERED]"}, "commit"=>"Sign in"}
2012-11-06T19:28:08+00:00 app[web.1]: WARNING: Can't verify CSRF token authenticity
2012-11-06T19:28:08+00:00 app[web.1]: Redirected to https://some-app_1234.herokuapp.com/users/1
2012-11-06T19:28:08+00:00 app[web.1]: Completed 302 Found in 391ms (ActiveRecord: 16.1ms)
2012-11-06T19:28:08+00:00 heroku[router]: POST some-app-1234.herokuapp.com/sessions dyno=web.1 queue=0 wait=0ms service=508ms status=302 bytes=114
2012-11-06T19:28:09+00:00 app[web.1]:
2012-11-06T19:28:09+00:00 app[web.1]:
2012-11-06T19:28:09+00:00 app[web.1]: Started GET "/users/1" for XXX.XXX.XXX.XXX at     2012-11-06 19:28:09 +0000
2012-11-06T19:28:09+00:00 app[web.1]: Processing by UsersController#show as HTML
2012-11-06T19:28:09+00:00 app[web.1]: Parameters: {"id"=>"1"}
2012-11-06T19:28:09+00:00 app[web.1]: Rendered shared/_stats.html.erb (205.2ms)
2012-11-06T19:28:09+00:00 app[web.1]: Rendered microposts/_micropost.html.erb (15.0ms)
2012-11-06T19:28:09+00:00 app[web.1]: Rendered users/show.html.erb within layouts/application (247.6ms)
2012-11-06T19:28:09+00:00 app[web.1]: Rendered layouts/_shim.html.erb (0.0ms)
2012-11-06T19:28:09+00:00 app[web.1]: Rendered layouts/_header.html.erb (1.2ms)
2012-11-06T19:28:09+00:00 app[web.1]: Rendered layouts/_footer.html.erb (0.3ms)
2012-11-06T19:28:09+00:00 app[web.1]: Completed 200 OK in 256ms (Views: 52.5ms | ActiveRecord: 202.4ms)
2012-11-06T19:28:09+00:00 heroku[router]: GET some-app-1234.herokuapp.com/users/1 dyno=web.1 queue=0 wait=0ms service=544ms status=200 bytes=2394 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T15:59:15.813

问题是我使用 iframe 进行 dns 转发！这使得 cookie 成为第三方 cookie。如果我转发到实际的heroku 地址，它可以解决问题。希望我的愚蠢对其他人有所帮助。

# jquery - jQuery在特定行中选择复选框

> ID：13272071
> 
> 赞同：1
> 
> 时间：2012-11-07T14:48:21.963
> 
> 标签：jquery, jquery-selectors

我有一个表，我需要在其中从特定行获取输入类型复选框元素。我试着像这样选择它（假设我对第一行感兴趣）

```
$('tr :nth-child(1):checkbox') 
```

但是我从表中获得了所有输入，而不仅仅是从我需要的行中获得。有什么想法我做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T14:51:54.733

你的选择器是错误的。试试这个：

```
$('tr:nth-child(1) :checkbox') 
```

伪类`nth-child`必须适用于选择器`tr`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T14:49:16.793

查看 .eq() 的使用。

[jQuery .eq()](http://api.jquery.com/eq/)

```
$('tr').eq(0) //selects first tr 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T14:59:14.797

简单的：

```
$('tr').eq(0).find(':checkbox').doSomething(); 
```

例如（从零开始）。

您的代码是错误的，因为后面有空格`tr`，这意味着下一个选择器位于表行下方的子树中。伪选择器必须紧跟在它们应用的元素之后，`$('input:checkbox')`例如，没有空格。

# java - 使用 MigLayout 自动换行

> ID：13272083
> 
> 赞同：5
> 
> 时间：2012-11-07T14:49:20.963
> 
> 标签：java, swing, jpanel, layout-manager, miglayout

我希望使用 MigLayout 在 JPanel 到达屏幕的“边缘”时包装它。目前我有一个 JScrollPane（我只想启用它）。JScrollPane 包含任意数量的水平排列的 JPanel - 当添加面板时，jpanel 会离开我希望它添加到下一行的边缘。这可能吗？

这是代码：

```
public void setupPanels(){
    JScrollPane scrollPane = new JScrollPane();
    JPanel mainPanel = new JPanel(new MigLayout("insets 2"));

    for (Object object : objects){
        JPanel subPanel = new JPanel(new MigLayout("insets 0")); 
        mainPanel.add(subPanel, "alignx left, gapx 2px 5px, gapy 2px 2px, top");
    }

    scrollPane.setViewportView(mainPanel);
} 
```

此外，要添加一个额外的因素，每次它到达边缘时，我都需要添加一个新的/不同的面板（时间轴） - 那么有没有办法找出它何时会换行？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-06T07:37:56.773

MigLayout 没有这样的功能。它基于网格，虽然您可以使用该`nogrid`选项在单元格跨度中水平或垂直流动组件，但不能使它们流入下一行或下一列。

JDK中`java.awt.FlowLayout`包含的 会自动包装包含的组件：

```
JPanel mainPanel = new JPanel(new FlowLayout());
mainPanel.add(subPanel1);
mainPanel.add(subPanel2);
mainPanel.add(subPanel3);
... 
```

首选高度已关闭，但有一些方法可以解决此问题，请参阅[WrapLayout](https://gist.github.com/jirkapenzes/4560255)。

至于第二个要求：

> 此外，要添加一个额外的因素，每次它到达边缘时，我都需要添加一个新的/不同的面板（时间轴） - 那么有没有办法找出它何时会换行？

布局管理器应该布局已经添加到容器中的组件，而不是根据布局结果添加新组件。在布局管理器按需显示的每个子面板之后为时间线添加不可见的占位符组件可能会起作用。

您肯定需要一个自定义布局管理器来执行此操作。要开始，我建议采用`FlowLayout`. 在`layoutContainer`实现中，有一个循环遍历所有组件。换行后，检查下一个组件是否为时间线占位符组件，使其可见并再次换行。

# ios - IOS子视图并不总是出现

> ID：13272085
> 
> 赞同：0
> 
> 时间：2012-11-07T14:49:25.550
> 
> 标签：ios, xcode, subview, appdelegate

我有一个应用程序，有很多视图和子视图。

在我的应用程序委托中，我每次收到通知时都会打开一个子视图。我做了很多测试： - 通知总是收到很好的。- 子视图总是很好地创建，它永远不会为零。

但是在一两次通知之后，子视图不会再次显示，即使它们存在并且在内存中创建得很好。

我认为我的内存做错了，我可能误解了视图层次结构。

这是创建和添加子视图的代码：

AppDelegate.h

```
@property (retain, nonatomic) ViewControllerNewOrder *sub; 
```

AppDelegate.m

```
sub = [[ViewControllerDriverNewOrder alloc] init];
sub = [mainStoryboard instantiateViewControllerWithIdentifier:@"ViewControllerNewOrder"];
sub.view.frame = self.initialViewController.view.bounds;
[self.initialViewController.view addSubview:sub.view]; 
```

感谢您的时间和帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T11:05:56.897

以下行挽救了我的生命：

```
[self.window.rootViewController.view.subviews makeObjectsPerformSelector:@selector(removeFromSuperview)]; 
```

然后我将方法 removeFromSuperView 添加到我需要清除的所有视图中。当然，您需要像我一样考虑将这条线放在哪里。

谢谢 ;）

# jquery - jQuery打开以固定大小为中心的新窗口

> ID：13272086
> 
> 赞同：9
> 
> 时间：2012-11-07T14:49:27.920
> 
> 标签：jquery, html, popup, new-window

> **可能重复：**
> [在屏幕上居中弹出窗口？](https://stackoverflow.com/questions/4068373/center-a-popup-window-on-screen)

我有 4 个不同的链接，所有这些都需要打开一个新窗口，该窗口将针对 4 个不同的 html 文件。

单击链接时，它需要在新窗口中打开有问题的 html 文件，两者：

*   居中
*   固定尺寸 900 x 600

我在下面找到了这个，但它似乎不适合窗口居中

[http://jquerybyexample.blogspot.com/2012/05/open-link-in-new-tab-or-new-popup.html](http://jquerybyexample.blogspot.com/2012/05/open-link-in-new-tab-or-new-popup.html)

干杯

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-07T14:53:18.560

为了使新窗口居中，给它一个 left 和 top 值一半的屏幕大小 - 一半的窗口大小：

```
var left  = ($(window).width()/2)-(900/2),
    top   = ($(window).height()/2)-(600/2),
    popup = window.open ("", "popup", "width=900, height=600, top="+top+", left="+left); 
```

[**小提琴**](http://jsfiddle.net/6xzv7ob2/embedded/result/)

# database - 如何判断规范是使用面向数据库的方法还是面向类设计的方法建模的

> ID：13272093
> 
> 赞同：0
> 
> 时间：2012-11-07T14:49:57.003
> 
> 标签：database, oop, database-design, class-design

给定一个问题规范，如何判断它是数据库设计问题还是类设计（面向对象设计）问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T14:58:45.227

我想到的是，在 OOP 中，类（对象）包含方法，而数据库只是关系和值的集合。所以：

如果您可以说问题在于规范中的“事物”如何相互关联，那么您就有了数据库设计问题。

如果它是关于规范中的“事物”可以做什么，那么您将更多地沿着面向对象编程进行建模。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T14:53:10.507

如果您使用数据库并创建域对象，则两者兼而有之。数据库设计和类设计是两件不同的事情，如果您使用数据库和类，两者都是必要的。这不像你选择一个或另一个。

这就是 ORM 发挥作用的地方。当您的数据层从数据库中检索信息时，一种典型的方法是将关系数据转换为您的域对象并将其传递给业务逻辑层，以便您的应用程序的其余部分可以处理域对象而不是关系模型.

然后你的 ORM 在持久化数据时会做相反的事情：它需要一个域实体并将其转换回可以保存到数据库中的关系结构。

注意：我在这里假设一个关系数据库。如果不是，请将关系替换为您正在使用的任何类型的持久层。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T15:22:33.383

我相信唯一应该作为面向数据库的问题来解决的规范是那些专注于结构化数据类型的操作的规范。如果您的规范都是关于“存储客户记录”、“删除订单记录”、“将价格值从 12 更改为 33 以进行记录匹配规范”，那么您就有了一个数据库项目。

自从我工作的 Cobol 团队雇佣了一名系统~~无政府主义者~~分析师以来，我还没有见过这种问题规范。从那以后，我从事的几乎每个项目的要求都不是关于如何存储数据，而是关于数据的含义。

如果您收到“用户可以创建客户。客户可以下订单。订单包含产品。订单可以具有交付方式、付款方式和状态。状态遵循业务流程”的要求，那么您就有了 OO 问题。您可能需要一种存储机制——数据库将是一个很好的选择——但是您的业务逻辑不能通过创建结构化数据类型和关系来专门实现。

# c++ - Boost::Spirit 推送到单个向量

> ID：13272094
> 
> 赞同：2
> 
> 时间：2012-11-07T14:49:59.293
> 
> 标签：c++, boost-spirit

> **可能重复：**
> [当 qi 返回属性时，我无法让 Boost Spirit Lex 和 Qi 一起工作](https://stackoverflow.com/questions/7770791/i-cant-get-boost-spirit-lex-and-qi-to-work-together-when-qi-returns-an-attribut)

我有一个非常简单的问题，我似乎无法弄清楚。我不会费心发布完整的代码，因为我很确定你不需要看到它就知道问题所在。

假设我想解析一个看起来像这样的文件：

```
"dp",1,1
"dp",2,2 
```

您希望每条数据线都是一个结构并将它们放入一个向量中。

```
namespace node {
    struct dp { int a; int b; };
    std::vector<dp> data;
} 
```

我将它们添加到 Fusion。

```
BOOST_FUSION_ADAPT_STRUCT(obj::dp,(int,a)(int,b))
BOOST_FUSION_ADAPT_STRUCT(node::data,(std::vector<node::dp>,data)) 
```

我的解析语法如下所示：

```
_dp %= lit("\"dp\",") >> int >> ',' >> int;
_d %= *_dp; 
```

我的规则是：

```
// in node namespace 
qi::rule<Iterator,data(),Skipper> _d;
qi::rule<Iterator,dp(),Skipper> _dp; 
```

问题是……

```
_d %= *_dp; 
```

不编译，但如果我在它前面放任何东西，它就会编译。

```
_d %= 'a' >> *_dp; 
```

粗略地说，这不会解析，因为输入数据没有“a”，但你明白了。

你会如何处理这样的事情？

# php - 将 $data 变量从模型发送到视图

> ID：13272096
> 
> 赞同：0
> 
> 时间：2012-11-07T14:50:06.200
> 
> 标签：php, codeigniter, codeigniter-2

好的，所以我在控制器中有这段代码。然而，这都是数据库驱动的，应该真的在模型中——我明白了。但是，正如您在 IF 语句中看到的那样，我需要将 $data 传递给我的视图。根据结果​​。我尝试将这段代码粘贴到我的模型中的一个方法中（通过控制器调用模型方法），但是视图没有调用 $data[update_prompt] 字符串......

我如何将此代码转换为模型 - 将 $data 值发送回我的控制器以嵌入到我的视图中？

```
 // show appropriate upgrade message if user has free account

    $id = $this->session->userdata('user_id'); 

    $this->db->select('subscription'); // select the subscription column
    $this->db->where('id', $id); //find id in table that matches session id
    $query = $this->db->get("subscriptions"); // connect to this database
    $subscribe = $query->result_array(); //returns the result of the above

    if($subscribe[0]['subscription'] == 'freebie') // if subscription column equals 'freebie' in the $subscribe array, do this:
    {
        $data['update_prompt'] = $this -> load -> view('shared/upgrade_subscription', '', TRUE); // adds view within view, $update_prompt
    }
    else 
    {
        $data['update_prompt'] = '';
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T14:59:12.250

您将在模型中添加一个函数，如下所示：

```
public function myModelFunction($id) {

    //we return row as we are looking up by primary key and are guaranteed only one row
    return $this->db->select('subscription')
                    ->where('id', $id)
                    ->get('subscriptions')
                    ->row();
} 
```

然后，在您的控制器中：

```
public function myControllerFunction() {

    $subscribe = $this->my_model->myModelFunction($this->session->userdata('id'));
    if($subscribe->subscription == 'freebie') // if subscription column equals 'freebie' in the $subscribe array, do this:
    {
        $data['update_prompt'] = $this -> load -> view('shared/upgrade_subscription', '', TRUE); // adds view within view, $update_prompt
    }
    else 
    {
        $data['update_prompt'] = '';
    }
} 
```

# html - 在 Objective C ( XCode ) 中通过 HTML 标签解析

> ID：13272105
> 
> 赞同：2
> 
> 时间：2012-11-07T14:50:45.723
> 
> 标签：html, xcode, string, parsing, tags

我正在尝试从以下 html 代码中获取字符串

```
<tr class="details">
    <td>
        07/11/2012 09:30
    </td>
    <td>
        something
    </td>
    <td>
        1.0
    </td>
    <td>
        something 2

    </tr></td> 
```

我想得到像“07/11/2012 09:30 something 1.0 something 2”这样的字符串。我已经将我的 html 代码解析并存储在一个名为“html”的 NSString 中。考虑从这段代码中获取一个字符串，然后用 NSXMLParser 解析它以将其显示为没有这个标签的单个字符串，但这似乎很麻烦。应该是一种更简单的方法。无论如何，这是我正在使用的代码：

```
NSRange r = [html rangeOfString:@"<tr class="details">"];
    if (r.location != NSNotFound) {
        NSRange r1 = [html rangeOfString:@"</tr>"];
        if (r1.location != NSNotFound) {
            if (r1.location > r.location) {

                NSString *infoString = [html substringWithRange:NSMakeRange(NSMaxRange(r), r1.location - NSMaxRange(r))];
                NSLog(@"info %@", infoString);
              }
          }
      } 
```

我无法摆脱开始标签中的分号。

有什么想法可以执行此任务吗？

# redirect - 如何使用 在struts-config.xml 中？

> ID：13272107
> 
> 赞同：3
> 
> 时间：2012-11-07T14:50:49.337
> 
> 标签：redirect, struts, forward-declaration, forward, struts-1

我想使用具有不同名称的“multitablesid”参数传递字符串。因为我使用我们的 jar 文件使用导出到 excel。这里使用的是struts1.2.9。在我的场景中，我想在 struts-config.xml 中使用`<forward path="">`.

这是我的代码，

```
<forward name="WeeklyDeliveryInstancesExcelReport" path="/MultiTableExportServlet?multitablesId=WeeklyDeliveryInstances-Count&amp;name=WeeklyDeliveryInstances-Count&amp;type=excel" ></forward> 
```

我想通过 multitablesid='differntname'。但我需要每一个请求都来自 JSP 页面并最终转发到不同的名称。循环工作 13 次。我能做些什么？

# sql-server-2008 - 我可以在 SQL Server 2008 上的游标中使用 IDENTITY_INSERT 吗？

> ID：13272108
> 
> 赞同：0
> 
> 时间：2012-11-07T14:50:53.317
> 
> 标签：sql-server-2008, cursor, identity-column

我有以下代码：

```
 declare c cursor for
            select
                id_user_V3
                ,device_type
                ,4
                ,notfication_mode
                ,t1.device_token
                ,registration_date
                ,rank
                ,1
            from audiv2.dbo.mya_webservice_device_token t1
                join migr.asoc_V2_glb_user t2 on t1.user_id = t2.id_user_V2

        open c
        fetch next from c into @id_user_v3,@type,@application_id,@notiffication,@device_tooken,@creation_date,@rang,@status
        while @@FETCH_STATUS=0
            begin

                set @device_id = (ISNULL((SELECT MAX(id_device) FROM usr_device)+1,1))

                SET IDENTITY_INSERT usr_device ON

                insert into usr_device values
                (
                    @device_id
                    ,@id_user_v3
                    ,@type
                    ,@application_id
                    ,@notiffication
                    ,@device_tooken
                    ,@creation_date
                    ,@rang
                    ,@status
                )
                SET IDENTITY_INSERT usr_device OFF

                fetch next from c into @id_user_v3,@type,@application_id,@notiffication,@device_tooken,@creation_date,@rang,@status
            end

        close c
        deallocate c 
```

我得到的错误是：

> 只有在使用列列表并且 IDENTITY_INSERT 为 ON 时，才能为表 'usr_device' 中的标识列指定显式值。

我该如何解决这个问题？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T17:15:26.940

您需要在 INSERT 子句中明确提及所有列名

插入 usr_device (col1, col2,...) 值

# c# - 从通用 DLL 使用应用程序的 *.resx

> ID：13272109
> 
> 赞同：1
> 
> 时间：2012-11-07T14:51:06.953
> 
> 标签：c#, resources

我正在创建一个通用 DLL，它从模型创建文档，可用于 winForms 或 webForms。它由我用某些参数实例化的主类组成​​。我希望我的 DLL 能够在资源文件中查找而不受 1 项技术的限制。

可以这么说，我知道如何`*.resx`在 WebForm 中访问我的资源文件 ()：

```
HttpContext.GetGlobalResourceObject("Global", "myLabel") 
```

我有一些限制：

1.  我不想将 HttpContext 传输到 DLL，因为它会将其绑定到应用程序
2.  我不想将资源文件从 to 重命名`*.resx`，`*.resource`因为它们在应用程序中使用
3.  我不想将所有标签传递给 DLL，因为那样我的模型将无法根据需要进行修改
4.  我想在我的文档模型中放置一个像这样的标记`<%resource(Global,myLabel)%>`

我一直在考虑使用资源对象传递类，`ResourceManager`但它永远不会获取我的`*.resx`文件。

有谁知道如何实现最终目标？要么将资源对象传递给类，要么从类内部获取资源对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:48:51.050

好的，我找到了如何做到这一点。在我的 DLL 中，我重载了允许给它一个`ResourceManager`对象的构造函数。所以这就是我所拥有的：

*   对于模型文件：

    ```
     \paragraph
      [
        Style = "Normal"
      ]
      {
        <%resource(lblMontant)%> : <%montant%>
      } 
    ```

*   对于 DLL 使用`ResourceManager`：

    ```
    public Reporter(String inputModel, String outputPdf, Dictionary<String, IParameter> parameters, ResourceManager resman)
    {
        // Assigne parameters to globals
        _sourceFile = inputModel;
        _destinationFile = outputPdf;
        _parameters = parameters;
        _rm = resman;

        Worker();
    }

    private String parseResource(String val)
    {
        MatchCollection _matches = _resourceMatcher.Matches(val);
        foreach (Match _match in _matches)
        {
            String _item = _match.Groups["item"].Value;
            val = val.Replace(_match.Groups[0].Value, String.Format("{0}", _rm.GetObject(_item)));                
        }

        return val;
    } 
    ```

*   对于调用者，我们使用`Resources.global`它被认为是一个类：

    ```
    ResourceManager _rm = new ResourceManager(typeof(Resources.global));

    Reporter _cl = new Reporter(modelFilePath, outputFilePath, _params, _rm); 
    ```

如果这对其他人有用并且有些人需要更多详细信息，请不要犹豫；）

# java - 直到 WebLogic 重新启动后才生成日志文件

> ID：13272115
> 
> 赞同：5
> 
> 时间：2012-11-07T14:51:25.660
> 
> 标签：java, log4j, weblogic, ear

我正在开发部署在 WebLogic 10.3 上的应用程序。它被打包为 EAR 并包含一个模块。该应用程序本身运行良好，但我面临与日志记录相关的问题。

我正在使用 Log4j。该库包含在 EAR 文件中，并且 log4j.xml 放在 JAR 模块下。所以配置位置如下：

`A.ear/B.jar/log4j.xml`

Log4j 配置如下：

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd">
<log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/">

<appender name="CA" class="org.apache.log4j.ConsoleAppender">
    <layout class="org.apache.log4j.PatternLayout">
        <param name="ConversionPattern" value="%d{dd-MMM-yyyy-HH:mm:ss} %p %C{1} - %m%n" />
    </layout>
</appender>

<appender name="DRFA" class="org.apache.log4j.DailyRollingFileAppender">
    <param name="file"
        value="servers/AdminServer/logs/EJB.log" />
    <param name="Append" value="true" />
    <param name="DatePattern" value="'-'yyyy-MM-dd" />
    <layout class="org.apache.log4j.PatternLayout">
        <param name="ConversionPattern" value="%d{dd-MMM-yyyy-HH:mm:ss} %p %C{1} - %m%n" />
    </layout>
</appender>

<logger name="com.companyname.ejb" additivity="false">
    <level value="DEBUG" />
    <appender-ref ref="DRFA" />
    <appender-ref ref="CA" />
</logger>

<logger name="com.companyname.results" additivity="false">
    <level value="DEBUG" />
    <appender-ref ref="DRFA" />
    <appender-ref ref="CA" />
</logger>

<logger name="com.companyname.marketdata" additivity="false">
    <level value="DEBUG" />
    <appender-ref ref="DRFA" />
    <appender-ref ref="CA" />
</logger>

<root>
    <level value="DEBUG" />
    <appender-ref ref="CA" />
</root> 
```

当我构建和部署 EAR（使用 Maven 和定制的 WebLogic 插件）并调用应用程序时，没有出现日志文件。但是如果我重新启动 WebLogic 一切都很好。

WebLogic 在 Windows 7 下以单节点域模式运行。

我想知道是否有某种方法可以在不重启 weblogic 的情况下显示日志（因为它可能会导致生产环境出现问题）？

**更新：**另外我想知道这种行为的原因是什么（即为什么在应用程序部署后没有立即创建日志文件）？这是 Weblogic、log4j 还是它们的耦合问题？我试图在 Oracle 文档中找到答案，但现在没有运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T17:09:09.740

一些注意事项：

*   在 prod 环境中，您可能希望将日志配置放在应用程序包之外，这样您就可以更改日志级别而无需重新部署。
*   您应该计划生产能够处理重新启动。我们通常有冷热服务器，因此可以在部署时平衡负载并重新启动服务器。

关于这个问题，如果你愿意，你可以指定一个在应用程序启动时运行的 servlet 并配置你的 log4j。就像是：

web.xml

```
<servlet>
  <servlet-name>SomeServlet</servlet-name>
  <servlet-class>YourServlet</servlet-class>
  <load-on-startup>0</load-on-startup>
</servlet> 
```

小服务程序

```
import javax.servlet.ServletConfig;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;

import org.apache.log4j.xml.DOMConfigurator;

public class YourServlet extends HttpServlet
{
    @Override
    public void init(final ServletConfig config)
      throws ServletException
    {
        final java.net.URL url = Thread.currentThread().getContextClassLoader()
                .getResource("Log4j.xml");
        DOMConfigurator.configure(url);
    }
} 
```

[网上](http://www.javatastic.com/2007/08/22/initialize-log4j-in-a-web-application/)还有一个关于使用 servlet 上下文侦听器的示例。

* * *

编辑。至于为什么会发生这种情况，默认情况下，weblogic 日志记录机制在启动时使用以下设置启动：

```
set JAVA_OPTIONS=%JAVA_OPTIONS% -Dlog4j.configuration=file:<path>/log4j.properties
set JAVA_OPTIONS=%JAVA_OPTIONS% -Dorg.apache.commons.logging.Log=org.apache.commons.logging.impl.Log4JLogger   
set JAVA_OPTIONS=%JAVA_OPTIONS% -Dweblogic.log.Log4jLoggingEnabled=true 
```

因此，如果您只是重新部署您的应用程序而不重新启动服务器，则不会使用这些设置 -> 不会启动日志记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T11:16:34.270

我没有找到任何快速配置解决方案，因此需要更改代码。

我已按照[此处](https://stackoverflow.com/a/2045531/1806341)的建议添加了 Weblogic Application Lifecycle 侦听器。它的 postStart() 方法通过 DOMConfigurator 显式初始化 log4j，现在日志在应用程序部署后立即出现。

如何初始化配置的方式很少。其中一个在[eis 的帖子](https://stackoverflow.com/a/13274643/1806341)中提到，另一个[在这里](https://stackoverflow.com/a/12757743/1806341)。但我选择监听器是为了将单个模块保留在 EAR 中，并避免集群环境中的单例 EJB 出现问题（即我不确定 Weblogic 是否会在每个节点上创建单例，或者每个集群只创建一个实例）。

另外为了防止本地和开发环境的环境变化，我在那里使用内部 log4j.xml（即放置在 ear 文件中）。

对于 stage 和 prod - 指定外部配置文件（在 Maven 配置文件中）。

外部文件由 log4j 监控，因此更改将自动应用，无需重新部署或重新启动。

# android - 更新 SQLite 数据库中项目的 ID

> ID：13272116
> 
> 赞同：1
> 
> 时间：2012-11-07T14:51:32.013
> 
> 标签：android, sqlite, auto-increment

我仍然无法解决数据库更新的问题。

我的应用程序在两个活动中定义了两个列表。列表 A 有职位和列表 B 项目。两个列表中的数据都保存到数据库并从数据库上传。从代码中可以看出，我在删除时没有任何问题。

当我删除列表 A 中的一个位置时，列表 B 中属于该位置的一组项目也将被删除。

更新有一个问题：删除后的项目集应该自动递增，但它仅适用于已删除项目之后的第一行，其他项目保持不变。

这是我的代码：

```
public void deleteItemsFromProduct(long nomer) {

    cursor = DataSource.queryAllinItems();

    if (cursor != null) {

        String [] pat = new String[] { String.valueOf(nomer) }; 
        db.delete(DBHelper.TABLE_ITEMS, DBHelper.COLUMN_NOMER + "=?", pat);

    for (int i=0; i<cursor.getCount(); i++){            
    ContentValues cv = new ContentValues();
    cv.put(DBHelper.COLUMN_NOMER, nomer);

    pat = new String[] { String.valueOf(nomer+1) };

    int updCount = db.update(DBHelper.TABLE_ITEMS, cv, DBHelper.COLUMN_NOMER + "=?", pat);

    Log.d(LOG_TAG, "updated rows count = " + updCount); 
    }           

    if (cursor.moveToFirst()) {

        Log.d(LOG_TAG, "--- Left in the table for items and prices: ---");

        idColIndex = cursor.getColumnIndex(DBHelper.COLUMN_ITEM_ID);
        nameColIndex = cursor.getColumnIndex(DBHelper.COLUMN_ITEM);
        priceColIndex = cursor.getColumnIndex(DBHelper.COLUMN_PRICE);
        nomerColIndex = cursor.getColumnIndex(DBHelper.COLUMN_NOMER);

        do {
            Log.d(LOG_TAG, "item id = " 
            + cursor.getInt(idColIndex)
            + ", item name = "
            + cursor.getString(nameColIndex)
            + ", item price = "
            + cursor.getInt(priceColIndex)
            + ", product nomer = "
            + cursor.getInt(nomerColIndex));

        } while (cursor.moveToNext());
    } else {
        Log.d(LOG_TAG, "Cursor is null");

        cursor.close();

        }
    } 
```

在这里记录

```
11-07 14:37:49.862: D/(1813): item id = 89, item name = б, item price = 0, product nomer = 0
11-07 14:37:49.862: D/(1813): item id = 90, item name = т, item price = 1, product nomer = 1
11-07 14:37:49.922: D/(1813): item id = 91, item name = м, item price = 2, product nomer = 2
11-07 14:37:58.442: D/(1813): MainActivity: onResume()
11-07 14:38:05.382: D/(1813): --- Delete from table for products: ---
11-07 14:38:05.465: D/(1813): deleted row id = 72, name = х, image = /mnt/sdcard/download/sliced-bread-icon.png
11-07 14:38:05.712: D/(1813): updated rows count = 1
11-07 14:38:05.752: D/(1813): updated rows count = 0
11-07 14:38:05.752: D/(1813): --- Left in the table for items and prices: ---
11-07 14:38:05.804: D/(1813): item id = 90, item name = т, item price = 1, product nomer = 1
11-07 14:38:05.822: D/(1813): item id = 91, item name = м, item price = 2, product nomer = 2
11-07 14:38:10.416: D/(1813): MainActivity: onPause()
11-07 14:38:10.622: D/(1813): ChildActivity: onCreate()
11-07 14:38:10.723: D/(1813): item id = 90, item name = т, item price = 1, product nomer = 0 
```

当我删除 id 为 72 的产品时，它在列表 B 中的列表 A（名义 0）中的第一个 id 为 89 的项目也被删除。id=90 的项目获得 nomer=0，因为它的父项在列表 A 中占据首位。但是 id=91 的项目保持 nomer=2，但它应该是 nomer=1。因此，自动增量仅适用于删除后的下一个项目，所有其他项目保持不变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T16:06:12.677

在这段代码中：

```
db.update(..., DBHelper.COLUMN_NOMER + "=?", pat); 
```

参数是字符串，但列中的值是数字，因此它们永远不会相等。
（强制所有参数为字符串是 Android SQLite API 的设计错误。）

要确保参数具有正确的类型，请使用以下内容：

```
db.update(..., DBHelper.COLUMN_NOMER + "= CAST(? AS INTEGER)", pat); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T09:31:34.013

我认为解决方案介于 sqlite lingvo 的良好知识和编程逻辑之间。这里是：

```
`           for (int i = 0; i <= cursor.getCount(); i++) {

                ContentValues cv = new ContentValues();

                cv.put(DBHelper.COLUMN_NOMER, nomer + i);

                int updCount = db.update(DBHelper.TABLE_ITEMS, cv,
                        DBHelper.COLUMN_NOMER + "=?",
                        new String[] { String.valueOf((nomer + i) + 1) });

                Log.d(LOG_TAG, "updated rows count = " + updCount);
            }
` 
```

因此，我们将所有具有 ((nomer + i) + 1) 的项目的值更改为 (nomer + i)。

# ruby-on-rails-3 - 推特引导下拉问题

> ID：13272118
> 
> 赞同：2
> 
> 时间：2012-11-07T14:51:35.193
> 
> 标签：ruby-on-rails-3, html, css, twitter-bootstrap

嗨，我正在为我的网站使用 twitter 引导程序。我已将下拉菜单放在模态窗口中的 collpsable 中。我的问题是我放入可折叠内部的下拉菜单，它切断了菜单。这是那个图像![在此处输入图像描述](../Images/3e4342a91168610ea2faff3405eff061.png)

它应该显示如下： ![在此处输入图像描述](../Images/0ae7d207313cf890359f92f91d4c25af.png)

我尝试通过更改 z-index 属性但无法显示它。任何人都可以知道是什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T16:20:34.943

我相信它使用的 css 是位置设置为绝对的 .dropdown-menu 类。如果您将位置更改为相对位置，它将为您提供所需的行为。

因此，您可以在自己的 .css 文件中隔离此更改，这样您就不会触及主 bootstrap.css 文件，因此更容易更新而不会破坏您的样式。

所以也许在 custom.css 中有一些东西：

```
.dropdown-menu {
position: relative;
} 
```

# image - 刮擦图像问题

> ID：13272119
> 
> 赞同：0
> 
> 时间：2012-11-07T14:51:35.900
> 
> 标签：image, scrapy

我正在尝试构建一个蜘蛛来捕捉图像。我已经让蜘蛛工作了，它只是......不起作用并且不会出错。

蜘蛛：

```
from urlparse import urljoin
from scrapy.selector import XmlXPathSelector
from scrapy.spider import BaseSpider
from nasa.items import NasaItem

class NasaImagesSpider(BaseSpider):
    name = "nasa.gov"
    start_urls = ('http://www.nasa.gov/multimedia/imagegallery/iotdxml.xml',)

    def parse(self, response):
      xxs = XmlXPathSelector(response)
      item = NasaItem()

      baseLink = xxs.select('//link/text()').extract()[0]
      imageLink = xxs.select('//tn/text()').extract()

      imgList = []
      for img in imageLink:
        imgList.append(urljoin(baseLink, img))

      item['image_urls'] = imgList
      return item 
```

它贯穿整个页面，并正确捕获 url。我将它传递到管道中，但是.. 没有图片。

设置文件：

```
BOT_NAME = 'nasa.gov'
BOT_VERSION = '1.0'

ITEM_PIPELINES = ['scrapy.contrib.pipeline.images.ImagesPipeline']
IMAGE_STORE = '/home/usr1/Scrapy/spiders/nasa/images'

LOG_LEVEL = "DEBUG"
SPIDER_MODULES = ['nasa.spiders']
NEWSPIDER_MODULE = 'nasa.spiders'

USER_AGENT = '%s/%s' % (BOT_NAME, BOT_VERSION) 
```

和项目文件：

```
from scrapy.item import Item, Field

class NasaItem(Item):
    image_urls = Field()
    images = Field() 
```

和输出日志：

```
2012-11-12 07:47:28-0500 [scrapy] INFO: Scrapy 0.14.4 started (bot: nasa)
2012-11-12 07:47:29-0500 [scrapy] DEBUG: Enabled extensions: LogStats, TelnetConsole, CloseSpider, WebService, CoreStats, MemoryUsage, SpiderState
2012-11-12 07:47:29-0500 [scrapy] DEBUG: Enabled downloader middlewares: HttpAuthMiddleware, DownloadTimeoutMiddleware, UserAgentMiddleware, RetryMiddleware, DefaultHeadersMiddleware, RedirectMiddleware, CookiesMiddleware, HttpCompressionMiddleware, ChunkedTransferMiddleware, DownloaderStats
2012-11-12 07:47:29-0500 [scrapy] DEBUG: Enabled spider middlewares: HttpErrorMiddleware, OffsiteMiddleware, RefererMiddleware, UrlLengthMiddleware, DepthMiddleware
2012-11-12 07:47:29-0500 [scrapy] DEBUG: Enabled item pipelines: 
2012-11-12 07:47:29-0500 [nasa.gov] INFO: Spider opened
2012-11-12 07:47:29-0500 [nasa.gov] INFO: Crawled 0 pages (at 0 pages/min), scraped 0 items (at 0 items/min)
2012-11-12 07:47:29-0500 [scrapy] DEBUG: Telnet console listening on 0.0.0.0:6023
2012-11-12 07:47:29-0500 [scrapy] DEBUG: Web service listening on 0.0.0.0:6080
2012-11-12 07:47:29-0500 [nasa.gov] DEBUG: Crawled (200) <GET http://www.nasa.gov/multimedia/imagegallery/iotdxml.xml> (referer: None)
2012-11-12 07:47:29-0500 [nasa.gov] DEBUG: Scraped from <200 http://www.nasa.gov/multimedia/imagegallery/iotdxml.xml>
#removed output of every jpg link
2012-11-12 07:47:29-0500 [nasa.gov] INFO: Closing spider (finished)
2012-11-12 07:47:29-0500 [nasa.gov] INFO: Dumping spider stats:
{'downloader/request_bytes': 227,
 'downloader/request_count': 1,
 'downloader/request_method_count/GET': 1,
 'downloader/response_bytes': 2526,
 'downloader/response_count': 1,
 'downloader/response_status_count/200': 1,
 'finish_reason': 'finished',
 'finish_time': datetime.datetime(2012, 11, 12, 12, 47, 29, 802477),
 'item_scraped_count': 1,
 'scheduler/memory_enqueued': 1,
 'start_time': datetime.datetime(2012, 11, 12, 12, 47, 29, 682005)}
2012-11-12 07:47:29-0500 [nasa.gov] INFO: Spider closed (finished)
2012-11-12 07:47:29-0500 [scrapy] INFO: Dumping global stats:
{'memusage/max': 104132608, 'memusage/startup': 104132608} 
```

我被困住了。关于我做错了什么的任何建议？

[已编辑] 添加了输出日志，更改了设置机器人名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T18:06:34.870

```
#pipeline file
from scrapy.contrib.pipeline.images import ImagesPipeline
from scrapy.exceptions import DropItem
from scrapy.http import Request

class PaulsmithPipeline(ImagesPipeline):
   def process_item(self, item, spider):
       return item

def get_media_requests(self,item,info):
    for image_url in item['image_urls']:
         yield Request(image_url)

def item_completed(self,results,item,info):
    image_paths=[x['path'] for ok,x in results if ok]
    if not image_paths:
       raise DropItem("Item contains no images")
    item["image_paths"]=image_paths
    return item 
```

# c++ - 我应该如何命名我的 RGB 通道，使用 cv::Mat_

> ID：13272120
> 
> 赞同：3
> 
> 时间：2012-11-07T14:51:37.000
> 
> 标签：c++, opencv

我想通过以下方式访问我的矩阵元素：

```
frame[i][j].Red 
```

，即第 (i,j) 个像素的红色通道。

我努力了：

```
typedef struct{unsigned char Blue,Green,Red;}Pixel;  
typedef cv::Mat_<Pixel> Image; 
```

然而，当尝试 imread()、imwrite() 或任何具有如此定义的类型时，g++ 会向我打招呼：

```
OpenCV Error: Assertion failed (func != 0) in convertTo, file /home/users/mvitkov/projects/opencv-legacy/OpenCV-2.3.1/modules/core/src/convert.cpp, line 937
terminate called after throwing an instance of 'cv::Exception'
    what():  /home/users/mvitkov/projects/opencv-legacy/OpenCV-2.3.1/modules/core/src/convert.cpp:937: error: (-215) func != 0 in function convertTo 
```

* * *

更新：所以没有回答我可能问得很糟糕的问题。太糟糕了。问题的本质是如何使用合理的名称（红色、绿色、bkue）而不是 c-era 数组索引符号来处理各个通道`[2]`。呸！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T05:41:09.213

以下是您访问每个频道的方式：

```
blue = frame.at<cv::Vec3b>(i,j)[0]; 
green = frame.at<cv::Vec3b>(i,j)[1]; 
red = frame.at<cv::Vec3b>(i,j)[2]; 
```

上面的代码假设您有一个 3 通道图像，其中每个值都是一个*8 位无符号字符 ( `CV_8UC3`)*。这种类型用于许多常见的图像格式。但是，如果您有不同类型的 3 通道图像，请执行以下操作：

*   如果图像类型是 3 通道浮点 ( `CV_32FC3`)，则替换`cv::Vec3b`为`cv::Vec3f`
*   如果图像类型是 3 通道双精度 ( `CV_64FC3`)，则替换`cv::Vec3b`为`cv::Vec3d`
*   如果图像类型是 3-channel int ( `CV_32SC3`)，则替换`cv::Vec3b`为`cv::Vec3i`
*   如果图像类型是 3-channel short int ( `CV_16SC3`) 或 16-bit uchar ( `CV_16UC3`)，则替换`cv::Vec3b`为`cv::Vec3s`

不确定您使用的是什么图像格式？尝试调用`getImgType(frame)`（参见下面的代码）。

```
string getImgType(cv::Mat frame)
{
    int imgTypeInt = frame.type();
    int numImgTypes = 28; // 7 base types, with 4 channel options each (C1, ..., C4)
    int enum_ints[] = {CV_8UC1,  CV_8UC2,  CV_8UC3,  CV_8UC4, CV_8SC1,  CV_8SC2,  CV_8SC3,  CV_8SC4, CV_16UC1, CV_16UC2, CV_16UC3, CV_16UC4, CV_16SC1, CV_16SC2, CV_16SC3, CV_16SC4, CV_32SC1, CV_32SC2, CV_32SC3, CV_32SC4, CV_32FC1, CV_32FC2, CV_32FC3, CV_32FC4, CV_64FC1, CV_64FC2, CV_64FC3, CV_64FC4};
    string enum_strings[] = {"CV_8U",  "CV_8UC1",  "CV_8UC2",  "CV_8UC3",  "CV_8UC4", "CV_8SC1",  "CV_8SC2",  "CV_8SC3",  "CV_8SC4", "CV_16UC1",  "CV_16UC2",  "CV_16UC3",  "CV_16UC4", "CV_16SC1", "CV_16SC2", "CV_16SC3", "CV_16SC4", "CV_32SC1", "CV_32SC2", "CV_32SC3", "CV_32SC4", "CV_32FC1", "CV_32FC2", "CV_32FC3", "CV_32FC4", "CV_64FC1", "CV_64FC2", "CV_64FC3", "CV_64FC4"};
    for(int i=0; i<numImgTypes; i++)
    {
        if(imgTypeInt == enum_ints[i]) return enum_strings[i];
    }
    return "unknown image type";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-25T08:22:38.367

> 如果图像类型为 3-channel short int (CV_16SC3) 或 16-bit uchar (CV_16UC3)，则将 cv::Vec3b 替换为 cv::Vec3s

这根本不正确。我用 <Vec3s> 处理了一个 3 通道 16 位无符号图像，并得到一个负值 G:29096 B:-21671 R:23413 返回。

如果是 CV_16UC3，则使用 <Vec3w> 寻址 Mat。使用这个我得到了 G:29096 B:43865 R:23413

CV_16SC3 中的“s”代表有符号而不是短。

# javascript - 如何避免因返回按钮而浪费 Google Map 使用配额？

> ID：13272121
> 
> 赞同：1
> 
> 时间：2012-11-07T14:51:40.410
> 
> 标签：javascript, google-maps-api-3

我有一个页面，它使用 Google Map API 来显示一系列标记以及结果列表。单击单个结果时将显示详细信息页面。之后，用户可以单击返回按钮返回结果页面以查看另一个结果。每次，谷歌地图都会重新初始化，计入使用配额。除了让浏览器打开一个新标签之外，有没有办法避免浪费这些宝贵的配额？

# excel - Excel：通过添加此垂直方向有多少行

> ID：13272127
> 
> 赞同：0
> 
> 时间：2012-11-07T14:51:53.113
> 
> 标签：excel, count

是否可以知道在垂直方向上添加了多少行？

在示例中，我们添加了 13 行。 ![在此处输入图像描述](../Images/bda267c67995702108bd655e315d0faa.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T15:11:42.383

您可以使用`SUBTOTAL(2,B1:B13)`or`ROWS(B1:B13)`或者甚至`COUNTIF(B1:B13,">0")`.

但作为一个建议 - 在询问非常基本的公式之前，多玩一点你发现的东西，excel-help或google会更快地为你提供。

# php - 格式路由 symfony2 格式

> ID：13272129
> 
> 赞同：0
> 
> 时间：2012-11-07T14:51:58.023
> 
> 标签：php, symfony

我有这个路由：

```
nueva_ventau:
   pattern:  /ventau/{id}
   defaults: { _controller: miomioBundle:Usuario:ventau, _format: pdf}
   options:
        expose: true 
```

重定向响应如何使用格式？

```
if ($pieces[0] == 0)//html
    return new RedirectResponse($this->generateUrl('homepage')); ??????????????
else
return $this->forward('miomioBundle:Venta:hello', array('id' => $venta->getId())); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T15:30:31.937

从[docs](http://symfony.com/doc/2.0/book/routing.html)，在控制器中：

```
return $this->redirect(
    $this->generateUrl('nueva_ventau', array('id' => $venta->getId())
); 
```

# bash - 为什么我们同时使用 echo 和 bc？

> ID：13272131
> 
> 赞同：1
> 
> 时间：2012-11-07T14:52:02.940
> 
> 标签：bash, shell

在 Shell 脚本（Linux/Ubuntu、Bash）中，为什么我们同时使用 echo 和 bc 命令？我是 Shell 脚本的新手，对管道有基本的了解。我知道 bc 是一种单独的语言。以下语句实际上是如何工作的（只是一个例子）？
`echo 5+6 | bc`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T14:55:11.080

第一个命令 ( `echo`) 将表达式“5+6”写入其标准输出。然后将其通过管道传输到`bc`的标准输入，从那里读取并进行评估。

之所以使用它，是因为`bc`它不将表达式作为直接输入，它总是从文件和/或标准输入中读取。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T14:57:28.467

您可以将该程序组合用于另一组强大的操作，例如您可以像这样从十六进制转换为二进制

```
echo "ibase=16; obase=2; A15" | bc 
```

它将打印：`101000010101`

至于回显和使用`|`运算符的过程，它只是将`echo`命令的输出作为`bc`程序的输入，您可以使用例如：`bc <<< "5 + 2"`

`bc`不从命令行参数读取操作，而是从输入文件或交互式会话中读取操作

这种有用组合的另一个例子是计算非常大的数量，例如：

```
echo "2^1024" | bc 
```

**关于的注释`<<<`：**它将单行上的字符串作为输入文件传递给命令，如果程序从文件中读取其输入，`<<<`您可以将字符串转换为“文件”，然后将此“文件”传递给该程序。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-08T00:23:38.403

echo 这里不需要，可以用这里的文档代替：

```
bc <<%
5+6
% 
```

或使用现代贝壳：

```
bc <<< 5+6 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T18:02:16.097

在**bc**命令之前，我们可以看到非常简单的 PIPE：

```
| 
```

**管道**名称非常准确！就像一根普通的管道一样，这条管道将水从源头传输到目标。在计算机科学中，水被称为*数据*或*信息*。

就像每根好烟斗一样，它的两端都很特别。通过这些末端，我们可以将管道连接到其他管道、水龙头、接头等。

该管道的一个末端连接到具有匹配末端的*bc 。**Bc*是一个很大的软件，所以它对于不同的管道有很多不同的连接点。也为了这个简单**|** 管道。

另一方面，**5+6**不是任何软件。它是纯数据/水。你可以想象如果你在没有固定连接的情况下将纯净水注入管道的一端会发生什么！水压不足...

我们需要一些与该管道有良好连接的软件。**Echo**是一个非常简单的应用程序，几乎什么都不做，就像体面的 echo 应该做的那样......但它具有与那个简单管道匹配的基本和功能性结尾。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-14T13:49:20.303

一些文本格式

```
 echo -n "pi=" ; bc -l <<< "scale=10; 4*a(1)" 
```

π=3.1415926532

# asp.net-mvc - Azure 上使用 ASP.NET MVC Facebook 模板的 Facebook 应用程序（API 错误代码：191）

> ID：13272133
> 
> 赞同：1
> 
> 时间：2012-11-07T14:52:14.860
> 
> 标签：asp.net-mvc, facebook, templates, azure

我尝试使用 ASP.NET MVC Facebook 模板作为[示例](http://blogs.msdn.com/b/webdev/archive/2012/10/31/deploying-your-first-facebook-app-on-azure-using-asp-net-mvc-facebook-template.aspx)在 Azure 上部署我的第一个 Facebook 应用程序。我没有做任何额外的事情，只是示例中的内容。

但每次我得到一个错误：

> API 错误代码：191。
> API 错误描述：指定的 URL 不属于应用程序

我检查了所有名称和 AppId 和 AppSecret。一切都是正确的。我不明白出了什么问题。

也许是因为“*此模板仍处于预览状态。API 可能会在最终发布之前发生重大变化*”？

还是举例有问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T03:44:24.180

此错误的常见原因是您在 Facebook 上的应用具有命名空间但您未在配置中设置“Facebook:AppNamespace”。有关更多信息，请参阅更新的教程：[http](http://www.asp.net/vnext/overview/aspnet-mvc/facebook-application-template-tutorial) ://www.asp.net/vnext/overview/aspnet-mvc/facebook-application-template-tutorial 。

# flash - actionscript 3，gotoandstop 下一个 3 中的随机帧

> ID：13272134
> 
> 赞同：1
> 
> 时间：2012-11-07T14:52:33.857
> 
> 标签：flash, actionscript, random, frame

所以在我的闪光中，我有部分你可以选择哪种方式，你选择的那条道路应该有随机化，我正在尝试构建它，以便当用户选择一条道路时，他会被扔进其中一条3 个随机标记的帧，我什至考虑将一些随机化部分添加到一条最不可能发生的道路上。

```
 stop();

road1a.addEventListener(MouseEvent.CLICK, firstroadA);

function firstroadA(e:MouseEvent):void{
    if(this.currentFrame == 9){
        var randomNumber:Number = Math.floor(Math.random()*3)
        if (randomNumer == 0){
            gotoAndStop(10);
        }
        if (randomNumber == 1){
            gotoAndStop(11);
        }
        if (randomNumber == 2){
            gotoAndStop(12);
        }
    }
    else{
        nextFrame();
    }

} 
```

在这个测试中，我试图让用户的选择发生在第 9 帧，当他选择点击 firstroadA 时，他会转到一些随机帧，10、11 或 12 ......所以，我希望我已经很清楚了；**简而言之，我的问题是，如何随机化 gotoAndStop 帧，以及如何添加一些很少有机会选择 gotoAndStop 的稀有帧......谢谢！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T16:49:17.037

您可以根据需要使用加权随机数。查看此代码，它可以按照您的意愿执行：

```
stop();

gotoAndStop(9);

road1a.addEventListener(MouseEvent.CLICK, firstroadA);

function firstroadA(e:MouseEvent):void
{
    if(this.currentFrame == 9)
    {
        // These are the weight chance for each "road"
        // I used 30%, 50%, and 10% arbitrarily
        var choiceWeights:Array = [30, 50, 10];

        // frame choices
        var roadFrames = [10, 11, 12];

        // get a weighted random
        var r:int = makeChoiceWithWeight(choiceWeights);

        //go to the selected frame
        gotoAndStop(roadFrames[r]);
    }
    else
    {
        nextFrame();
    }
}

function makeChoiceWithWeight(choiceWeights:Array):int
{
    var sumOfWeights:int = 0;
    var numWeights:int = choiceWeights.length;

    // add all weights
    for(var i:Number = 0; i < numWeights; i++) sumOfWeights += choiceWeights[i];

    // pick a random number greater than zero and less than the total of weights
    var rnd:Number = Math.floor(Math.random()*sumOfWeights);

    //keep reducing the random number until less than a choices weight
    for(var ii:Number = 0; ii < numWeights; ii++)
    {
        if(rnd < choiceWeights[ii]) return ii;

        rnd -= choiceWeights[ii];
    }

    // should never reach this point
    return 0;
} 
```

要更深入地了解加权随机数，请查看此 SO 答案： [Weighted random numbers](https://stackoverflow.com/questions/1761626/weighted-random-numbers)

# language-agnostic - 检查至少十分之二的布尔值是真的

> ID：13272139
> 
> 赞同：3
> 
> 时间：2012-11-07T14:52:48.780
> 
> 标签：language-agnostic, logic, boolean-logic, boolean-operations

在三个布尔值中至少有两个为真的情况下，这是找出最简单的方法：

```
BOOL a, b, c;
-(BOOL)checkAtLeastTwo
{
  return a && (b || c) || (b && c); 
} 
```

如果有十个布尔值并且其中至少两个需要为真，那么最佳解决方案是什么？提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T14:58:55.613

您的原始实现是次优的 - 您可以对真实值求和：

```
return (int)a + (int)b + (int)c >= 2; 
```

显然，您可以将其扩展到 10 个变量：

```
return (int)a + (int)b + (int)c + (int)d + (int)e +
       (int)f + (int)g + (int)h + (int)i + (int)j >= 2; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T15:00:08.233

在 C 中，您只需检查变量的总和

```
return a + b + .... + n >= 2; 
```

如果从布尔到整数的隐式转换不在您的语言中，您可以简单地将变量转换为整数并检查转换值的总和。

# c# - 如何在 WPF C# 中的数据绑定 DataGrid 中将字符串格式化为货币？

> ID：13272144
> 
> 赞同：0
> 
> 时间：2012-11-07T14:53:11.593
> 
> 标签：c#, wpf, xaml, datagrid, string-formatting

我有一些数据显示在 DataGrid 中。数据来自 SQL，其中“money”类型可以为空。当我显示此数据时，当我以双列格式将数据格式化为货币时，一切正常。IE：

内部无效填充网格（）{

```
 bD = new DataTable();
        DataTable dt = EmployerQuery();  //queries the SQL DB

        bD.Columns.Add(new DataColumn("ID", typeof(int)));
        bD.Columns.Add(new DataColumn("EmployerName", typeof(string)));
        bD.Columns.Add(new DataColumn("FlatMinAmount", typeof(double)));
        bD.Columns.Add(new DataColumn("DistrictRate", typeof(double)));
        bD.Columns.Add(new DataColumn("VendorRate", typeof(double)));
        bD.Columns.Add(new DataColumn("Description", typeof(string)));
        bD.Columns.Add(new DataColumn("EmployeeCount", typeof(int)));

        foreach (DataRow sqlRow in dt.Rows)
        {
            var row = bD.NewRow();
            row["ID"] = sqlRow["ClientID"];
            row["EmployerName"] = sqlRow["OfficialName"];
            row["FlatMinAmount"] = sqlRow["FlatMinAmount"];
            row["DistrictRate"] = sqlRow["DistrictRate"];
            row["VendorRate"] = sqlRow["VendorRate"];
            row["Description"] = sqlRow["Description"];
            row["EmployeeCount"] = sqlRow["EmployeeCount"];

            bD.Rows.Add(row);

        } 
```

但是，然后我将数据保存为 .csv 文件。当我读回该文件时，不允许将“FlatMinAmount”的值为 null 的值插入到 double 类型的列中，因此我无法将数据列格式化为 double 类型，因为许多为 null。

```
<dg:DataGrid Name="newGrid" ItemsSource="{Binding ElementName=readGrid, Path=readGrid}" AutoGenerateColumns="False"
                 Margin="5" Height="175" Width="Auto" ColumnWidth="Auto">
        <dg:DataGrid.Columns>
            <dg:DataGridTextColumn Binding="{Binding ID}" Header="Employer ID" Width="Auto" IsReadOnly="True"/>
            <dg:DataGridTextColumn Binding="{Binding EmployerName}" Header="Employer Name" Width="Auto" IsReadOnly="True"/>
            <dg:DataGridTextColumn Binding="{Binding FlatMinAmount, StringFormat=C}" Header="FlatMinAmount" Width="Auto" IsReadOnly="True"/>
            <dg:DataGridTextColumn Binding="{Binding DistrictRate, StringFormat=C}" Header="District Rate" Width="Auto" IsReadOnly="True"/>
            <dg:DataGridTextColumn Binding="{Binding VendorRate, StringFormat=C}" Header="Vendor Rate" Width="Auto" IsReadOnly="True"/>
            <dg:DataGridTextColumn Binding="{Binding Description}" Header="Description" Width="Auto" IsReadOnly="True"/>
            <dg:DataGridTextColumn Binding="{Binding EmployeeCount}" Header="EmployeeCount" Width="*" IsReadOnly="True"/>
        </dg:DataGrid.Columns>
    </dg:DataGrid>

DataTable r = new DataTable();

        try
        {
            //string csv = string.Empty;

            //r.Columns.Add("ID", typeof(int));
            //r.Columns.Add("EmployerName", typeof(string));
            //r.Columns.Add("FlatMinAmount",typeof(double));
            //r.Columns.Add("DistrictRate", typeof(double));
            //r.Columns.Add("VendorRate", typeof(double));
            //r.Columns.Add("Description", typeof(string));
            //r.Columns.Add("EmployeeCount", typeof(int));

            r.Columns.Add("ID");
            r.Columns.Add("EmployerName");
            r.Columns.Add("FlatMinAmount");
            r.Columns.Add("DistrictRate");
            r.Columns.Add("VendorRate");
            r.Columns.Add("Description");
            r.Columns.Add("EmployeeCount");

            // Read sample data from CSV file
            using (CsvFileReader reader = new CsvFileReader(filename))
            {
                CsvRow row = new CsvRow();
                while (reader.ReadRow(row))
                {
                    //foreach (string s in row)
                    {
                        r.Rows.Add(row[0], row[1], row[2], row[3], row[4], row[5], row[6]);

                    }

                }
            } 
```

（readGrid 然后在代码隐藏中设置为 r）

如果它们是字符串，那么我不能在绑定中使用 StringFormat=C 来显示 $ 等。此外，我似乎无法设置 DataGridTextColumn 的样式。那么，如何将我从 .csv 读取的值显示为 $xx.xx？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T14:55:59.553

使用`Double.Parse()`- [http://msdn.microsoft.com/en-us/library/system.double.parse.aspx](http://msdn.microsoft.com/en-us/library/system.double.parse.aspx)在您读入时格式化值。这将允许您使用双精度，然后您可以应用适当的格式用于输出。

更新：从文件读取值时您似乎遇到的问题是`null`，从数据库中读取时它是`DBNull`. 默认情况下`DataTable`允许`DBNull`值。如果您想模仿此内容进行阅读，请尝试以下操作

```
 DataTable r = new DataTable();
    try
    {
        r.Columns.Add("ID");
        r.Columns.Add("EmployerName");
        r.Columns.Add("FlatMinAmount");
        r.Columns.Add("DistrictRate");
        r.Columns.Add("VendorRate");
        r.Columns.Add("Description");
        r.Columns.Add("EmployeeCount");

        // Read sample data from CSV file
        using (CsvFileReader reader = new CsvFileReader(filename))
        {
            CsvRow row = new CsvRow();
            while (reader.ReadRow(row))
            {
                //foreach (string s in row)
                {
                    double d;
                    double? val2 = null;
                    double? val3 = null;
                    double? val4 = null;
                    if (Double.TryParse(row[2], out d)) val2 = d;
                    if (Double.TryParse(row[3], out d)) val3 = d;
                    if (Double.TryParse(row[4], out d)) val4 = d;

                    r.Rows.Add(row[0], row[1], val2, val3, val4, row[5], row[6]);
                }

            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T15:03:07.867

使用`TargetNullValue`属性：

```
<dg:DataGridTextColumn Binding=""{Binding FlatMinAmount,TargetNullValue='Not Specified',StringFormat=C}" Header="FlatMinAmount" Width="Auto" IsReadOnly="True"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T16:40:30.787

如果你知道这个数字是空的，你不能把列的值设置为 DBNull 吗？

```
row["FlatMinAmount"] = DBNull.Value; 
```

这是我运行的一个小控制台应用程序来展示它的工作原理：

```
课堂节目
    {
        静态无效主要（字符串[] args）{
            数据表 tbl = 新数据表（）；
            DataColumn col = new DataColumn("Blah", typeof(double));
            tbl.Columns.Add(col);

            数据行行 = tbl.NewRow();
            行[“废话”] = DBNull.Value;

            Console.WriteLine("结果：" + row["Blah"].ToString());
            Console.ReadKey();

        }
    }

```

# sql - DISTINCT 在多个列上，顺序很重要吗？

> ID：13272148
> 
> 赞同：3
> 
> 时间：2012-11-07T14:53:23.933
> 
> 标签：sql, postgresql

列的顺序怎么可能在不同的情况下很重要。我得到不同数量的行

`SELECT DISTINCT ON (the_geom,plz) the_geom`

和

```
SELECT DISTINCT ON (plz,the_geom) the_geom 
```

有什么想法我想错了吗？我正在使用 postgreSQL 9.1.5。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T14:59:33.737

你搞混了`DISTINCT`，`DISTINCT ON`看[手册](http://www.postgresql.org/docs/9.1/static/sql-select.html#SQL-DISTINCT)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T14:59:46.357

该[文档建议](http://www.postgresql.org/docs/9.0/static/sql-select.html#SQL-DISTINCT)需要`DISTINCT ON`从`order by`相同的列开始。所以这会起作用：

```
SELECT  DISTINCT ON (the_geom,plz) 
        the_geom
,       plz
FROM    YourTable
ORDER BY 
        the_geom
,       plz 
```

省略正确的`order by`可能会产生意想不到的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T15:48:32.867

我想你可能想要一些更简单的东西。这会给你想要的吗？：

```
SELECT DISTINCT the_geom FROM YourTable; 
```

# c# - 将特殊字符编码为字节数组

> ID：13272149
> 
> 赞同：0
> 
> 时间：2012-11-07T14:53:25.577
> 
> 标签：c#, .net, encoding, character-encoding, special-characters

几天前我问了一个关于德语特殊字符的问题。我现在可以对 ö、ä 或 ü 等字符进行编码和解码。但是..还有一些字符，我也需要对它们进行编码/解码。

例如，失败的字符： ² ³ € µ Ü Ö Ä ~ ´ §

这是代码：

```
 private static byte[] MyGetBytesArray(string data)
    {
        Encoding enc = new UTF8Encoding(true, true);
        return enc.GetBytes(data);
    }

    private static string MyGetString(byte[] data)
    {
        Encoding enc = new UTF8Encoding(true, true);
        return enc.GetString(data);
    } 
```

我正在寻找一种对所有字符进行编码/解码的解决方案。我正在编写一个加密/解密算法，我不知道什么用户会粘贴到程序中。我需要完全一样的回报。

再次感谢您的帮助。。

编辑：好的，UnicodeEncoding 有效（我认为）。现在这是我的加密/解密算法：/我仍然不确定发生了什么（我认为它是零。在 Unicode 编码期间，每个字符后面都是零），但是编码特殊字符工作。至少该测试是成功的：

```
string text = File.ReadAllText(opd.FileName, Encoding.Default);
byte[] byt = getBytesArray(text);
string text2 = getString(byt);

if (text2 == text)
{
    MessageBox.Show("OK");
}
else
{
    MessageBox.Show("FAIL");
} 
```

顺便提一句。Encoding.Default 正确吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T15:03:41.160

请尝试使用 UnicodeEncoding。

```
var encoding = new UnicodeEncoding();
return Write(encoding.GetBytes(s)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T15:02:18.753

不幸的是，这些字符是 Unicode，因此您将无法使用 UTF8Encoding 类。

尝试改用 UnicodeEncoding 类。

# java - JODA Period 没有返回正确的值？

> ID：13272158
> 
> 赞同：1
> 
> 时间：2012-11-07T14:54:09.280
> 
> 标签：java, jodatime

来自 JODA API 的返回是否有意义？

```
DateTime sd = new DateTime(1973,1,1,0,0,0);
DateTime ed = new DateTime(1973,1,31,23,59,59);
Period p = new Period(sd,ed);

StringBuilder buf = new StringBuilder();
buf.append(p.getYears()).append(" years ")
        .append(p.getMonths()).append(" months ")
        .append(p.getDays()).append(" days");
System.out.println(buf.toString()); 
```

返回 0 年 0 个月 2 天？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T15:04:29.107

尝试使用`PeriodFormatter`：

```
System.out.println(PeriodFormat.getDefault().print(p)); 
```

输出：

```
4 weeks, 2 days, 23 hours, 59 minutes and 59 seconds 
```

# mysql - Mysql计数，返回所有字段，如果没有计数返回0

> ID：13272160
> 
> 赞同：2
> 
> 时间：2012-11-07T14:54:12.477
> 
> 标签：mysql, count, null, return, zero

我一直在寻找很多有同样问题的人，但解决方案似乎更加不同？！

我有 3 张桌子：

```
+-------------------------------------------+
| ITEM: itemid(pk), status(fk), owner(fk)   |
|                                           |
| STATUS: statusid(pk), statusname          |
|                                           |
| OWNER: ownerid(pk), ownername             |
+-------------------------------------------+ 
```

我有 2 个状态：*1: Available*，*2: Broken*。

在这种情况下，只有一个所有者拥有一件破损的物品。我正在使用此代码。首先它是不同的，但似乎 LEFT JOIN 和 GROUP/ORDER BY 应该可以解决问题。对我来说很不幸。

```
SELECT ownername, SUM(price) AS  'totalbrokenpriceeach', COUNT( itemid ) AS  'totalbrokenitemseach'
                                FROM item
                                LEFT JOIN owner ON item.owner = owner.ownerid
                                LEFT JOIN status on item.status = status.statusid
                                WHERE statusid='2'
                                GROUP BY ownerid 
```

这将返回：

```
ownername   totalbrokenpriceeach    totalbrokenitemseach
Owner #1            60                          1
Owner #5            180                         4 
```

我想返回：

```
ownername   totalbrokenpriceeach    totalbrokenitemseach
Owner #1            60                          1
Owner #2            0                           0
Owner #3            0                           0
Owner #4            0                           0
Owner #5            180                         4 
```

该怎么办？任何人有任何解决方案？

编辑：

```
 OWNER                          
+-----------------------+
| ownerid ownername     |
|     1:    Henk        |
|     2:    Jan         |
|     3:    Piet        |
|     4:    Klaas       |
+-----------------------+

         STATUS
+-----------------------+
| statusid statusbeschr |
|     1:    Available   |
|     2:    Broken      |
+-----------------------+

         ITEM
+--------------------------------------+
| itemid    price     owner     status |
|     1:    90          1          1   |
|     2:    40          2          1   |
|     3:    20          2          1   |
|     4:    120         3          2   |
+--------------------------------------+

I need returned:

+-------------------------------------------------------+
| ownername    SumOfBrokenItems   AmountOfBrokenItems   |
|     Henk:       0                       0             |
|     Jan:        0                       0             |
|     Piet:       120                     1             |
|     Klaas:      0                       0             |
+-------------------------------------------------------+ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T15:00:05.263

 ~~~~```
SELECT  a.ownername, 
        SUM(price) AS  totalbrokenpriceeach, 
        COUNT(b.itemid) AS  totalbrokenitemseach
FROM    owner a
        LEFT JOIN   item b
            ON a.ownerID = b.owner
        LEFT JOIN   status c
            ON b.status = c.statusID AND 
               c.StatusID = 2
GROUP BY    ownername 
```~~  ~~**更新 1**

```
SELECT  a.ownername, 
        SUM(CASE WHEN c.statusbeschr = 'Broken' THEN b.price ELSE 0 END) AS  totalbrokenpriceeach, 
        SUM(CASE WHEN c.statusbeschr = 'Broken' THEN 1 ELSE 0 END) AS  totalbrokenitemseach
FROM    owner a
        LEFT JOIN   item b
            ON a.ownerID = b.owner
        LEFT JOIN   status c
            ON b.status = c.statusID        
GROUP BY a.ownerid
ORDER BY a.ownerid 
```

*   [**SQLFiddle 演示**](http://sqlfiddle.com/#!2/77a59/4)~~~~

# hibernate - Hibernate 级联更新到未更改的集合对象

> ID：13272161
> 
> 赞同：0
> 
> 时间：2012-11-07T14:54:13.090
> 
> 标签：hibernate, jpa, cascade, hibernate-cascade

使用 Hibernate 3.3、JPA 1.x 和 Hsqldb 1.8

我在对包含其他对象集合的对象进行级联更新时遇到问题。这是一个人为的（稍微）示例来说明（省略了获取器/设置器）。对不起，它有很多代码，我找不到另一种方式来表达这个问题，而且这里的一切都相当简单。

```
@Entity
public class Salesman
{
  @Id
  @GeneratedValue
  @Column(name="salesman_id")
  private long id;

  @OneToMany(mappedBy=salesman, targetEntity=ContactSet.class, fetch=FetchType.EAGER, cascade=CascadeType.All)
  private Set<ContactSet> contacts;
}

@Entity
public class Company
{
  @Id
  @GeneratedValue
  @Column(name="company_id")
  private long id;

  @Column(name="company_name")
  private String name;
}

@Entity
public class ContactSet
{
  @Id
  @GeneratedValue
  @Column(name="contact_set_id")
  private long id;

  @ManyToOne(fetch=FetchType.EAGER)
  @JoinColumn(name="salesman_id",referencedColumnName="salesman_id", updatable=false, nullable=false)
  private Salesman salesman

  @ManyToOne
  @JoinColumn(name="company_id", referencedColumnName="company_id", updatable=false, nullable=false)
  private Company company;

  @OneToMany(mappedBy="contactSet", targetEntity=Contact.class, fetch=FetchType.EAGER, cascade=CascadeType.ALL)
  private Set<Contact> contacts;
}

@Entity
public class Contact
{
  @Id
  @GeneratedValue
  @Column(name="contact_id")
  private long id;

  @ManyToOne(fetch=FetchType.EAGER)
  @JoinColumn(name="contact_set_id",referencedColumnName="contact_set_id", updatable=true, nullable=false)
  private ContactSet contactSet;

  @Column(name="contact_name", updatable=false, nullable=false)
  private String name;
} 
```

所以一个推销员对每个公司都有一套联系人，可能有很多个为一个公司服务的推销员，每个人都有不同的联系人。我可以为推销员添加一个新公司（和相关联系人），一切都很好。

将新公司（和联系人）添加到已经拥有以下公司的推销员时会出现问题：

```
session.beginTransaction();
session.lock(salesman, LockMode.NONE)
ContactSet newSet = new ContactSet();
/*...Add contacts to ContactSet...*/
salesman.addContactSet(newSet);
session.saveOrUpdate(salesman);
session.commit(); 
```

当使用 hibernate.show_sql=true 运行它时，我可以看到这具有为每个联系人运行插入并为新的 ContactSet 插入的预期效果。我还看到了销售员本身的更新，以及有关销售员拥有的所有其他 ContactSet 和 Contact 的更新。由于每个业务员有数千个联系人，因此此交易需要很长时间。

我的问题是，如何避免我知道没有更改的 ContactSets 和 Contacts 的所有更新？我已经尝试添加 @Version 标签，更改 CascadeType（在我的应用程序中除了 ALL 之外的任何东西都失败了）并加载了更具体的代码修补，但没有成功！

在此先感谢您的任何指点，

**编辑：发现添加 session.lock(salesman, LockMode.NONE) 到事务意味着其他对象没有得到更新，但代码仍然很慢。我怀疑是因为它仍在向会话中添加数千个对象以锁定它们。更新了示例代码以反映这一点。LockMode.NONE 只是将分离的对象与会话重新关联。

菲尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T15:14:56.450

我无法找到一个好的解决方案，所以我最终将 ContactSet 以及 Salesman 存储在 Company 中，并从 Salesman->ContactSet 中删除所有级联。现在我只需要保存一个新的 Company，所有新的 ContactSets 都会保存。仍然存在必须更新所有推销员的 ContactSets 的情况，这只能通过保存推销员的所有公司来解决（据我所知）。

如果有人找到更好的解决方案，请添加！

# c# - C# 中的 Web 浏览器，而不使用我自己的 Web 浏览器类

> ID：13272162
> 
> 赞同：-3
> 
> 时间：2012-11-07T14:54:12.327
> 
> 标签：c#, web-applications, bitmap, browser, xelement

我不知道我在做什么问题是我得到了任务而没有任何进一步的解释我所要做的就是制作一个主窗体的程序，它将加载一个 html 文件但不使用 Web 浏览器类和 Html将包含文本和图像，我得到的唯一提示是我将使用“Xelement 从 Dom 树中读取文件并将其渲染为将显示在表单中的位图文件”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T14:58:03.393

我对你的问题感到困惑。你在找这个吗？

[Internet Explorer 对象](http://msdn.microsoft.com/en-us/library/aa752084%28v=vs.85%29.aspx)

它是您可以在代码中操作的浏览器。

附录：

或者也许这是你需要的？

1.  创建 HttpWebRequest 对象
2.  创建 HttpWebResponse 对象
3.  获取 HTML 源代码

[这是一个指南。](http://www.devasp.net/net/articles/display/994.html)

Html Source 将具有 DOM 对象：

1.  使用 Xelement 导航
2.  在 DOM 中发现元素时打印元素。

# php - Zend_Form 值在同一页面中使用多个表单时丢失

> ID：13272163
> 
> 赞同：2
> 
> 时间：2012-11-07T14:54:17.007
> 
> 标签：php, zend-framework, zend-form

我在我的一个项目中使用 Zend Framework 1.12。我需要在一页中使用多个表单，并在“渲染”功能的帮助下成功地放置了它们。

```
 $this->oneAction();
    $this->render('one');

    $this->anotherAction();
    $this->render('another'); 
```

两种形式有两种不同的操作，在我的 indexAction() 中，我像上面一样调用它们。两个动作有自己的脚本，这段代码非常适合在一个页面中放置 2 个表单。

问题是；2个不同的表单，有自己的提交按钮（不同的名称），当提交第二个表单时，页面重新加载（自然），但是第一个表单的字段中的值丢失了..我写了一个函数来加载一些默认值（对于第一种形式的某些字段，取自 db），然后它获取值，但给出错误（值是必需的并且不能为空），即使它们由我的函数填充。我必须创建一个包含许多表单的复杂页面，并且无法解决这个问题。我想为这个问题找到一个解决方案，或者只是对 Zend Form 对这些多个表单提交的行为知之甚少。

（关于这些问题有很多页面，但大多数只是考虑在同一页面中放置多个表单，仅此而已..）

提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T16:47:53.827

您需要利用 Zend 的子表单。表单和子表单在 ZF 中实际上是相同的，主要区别在于表单装饰器的使用。将所有表单视为可以组合成单个表单的子表单会更强大。以下代码提供了一个示例：

```
class My_Master_Form extends ZendX_JQuery_Form
{   

    /**
     * combine sub forms into composite
     */
    public function  __construct($options = null)    
    {       
        parent::__construct($options);        

        // Add a sub form...
        $subform = new My_Foo_Form();       
        $subform->setElementsBelongTo('mySubForm');
        $subform->removeDecorator('Form');
        $subform->setOrder(-2);
        $this->addSubform($subform, 'mySubForm');

        ... 
```

然后，您将呈现单个主表单。处理验证很简单。执行验证时，现有代码应遍历每个子表单。如果需要，您可以覆盖并在初始验证后查看每个子表单中的故障，如果验证逻辑跨越子表单，则根据需要进行汇总。

# wcf - “列名无效。[节点名（如果有）=ut0,列名=__sysTrackingContext]”

> ID：13272164
> 
> 赞同：0
> 
> 时间：2012-11-07T14:54:18.347
> 
> 标签：wcf, sql-server-2008-r2, sql-server-ce, microsoft-sync-framework

我在我的项目中使用了 Visual Studio 2010、SQL Server 2008 R2、Sync Framework 和 SQLCE & WCF。

我尝试同步在客户端数据库（*.sdf）文件中手动配置的表。所以出现了这个错误“列名无效。[节点名（如果有）=ut0，列名=__sysTrackingContext]”

如果我第一次直接从服务器同步这个表，那么它第二次工作正常，它将数据同步到服务器但是如果我想手动配置到客户端数据库，那么我得到了这个错误....

# windows-phone - 用 C# 编写 Windows Phone 运行时组件？

> ID：13272165
> 
> 赞同：2
> 
> 时间：2012-11-07T14:54:22.937
> 
> 标签：windows-phone, windows-phone-8, winprt

是否可以用 C# 编写 Windows Phone 8 运行时组件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T16:00:44.827

根据这些文章应该是可能的，但遗憾的是，目前只有 C++ 中的项目模板可用于 Windows（Phone）运行时组件：
[创建 Windows 运行时组件](http://msdn.microsoft.com/en-us/library/windows/apps/hh441572.aspx) （Windows 8）
[使用 Windows 运行时组件共享](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj714080%28v=vs.105%29.aspx)（Windows Phone 8）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T15:21:32.713

目前看来是不可能的。

# asp.net-mvc-3 - 为什么使用带有单向对象的 Json 序列化程序会出现循环引用错误？

> ID：13272170
> 
> 赞同：0
> 
> 时间：2012-11-07T14:54:42.210
> 
> 标签：asp.net-mvc-3, json.net

我有以下模型：

```
public class Address
{
   public int Id {get; set;}
   public string Street1 {get; set;}
   ...
   public int CountryId {get; set;}
   public Country Country {get; set;}
}

public class Country
{
    public int Id {get; set;}
    public string Name {get; set;}
    public string ISOCode {get; set;}
    public string Continent {get; set;}
    public string ISOCode {get; set;}
    public string Languages {get; set;}
}

public class Church
{
    public int Id {get; set;}
    public string Name {get; set;}
    public int CountryId {get; set;}
    public Country Country {get; set;}
    public int AddressId {get; set;}
    public virtual Address Address {get; set;}
    public string Phone {get; set;}
} 
```

序列化程序是否认为我与 Country 存在某种双向关系，因为 Church 和 Address 都有 Country 对象？如果不是，那么为什么在尝试序列化教堂对象时会得到循环引用？

**编辑：** 让我更困惑的是，当我查询时，我什至不包括国家（在教堂）：

```
var results = _context.Churches.Include(c => c.Address).Include(c => c.Address.Country).AsQueryable(); 
```

实体框架上下文已配置为未启用 LasyLoading。在我看来， Church.Country 应该为空，甚至不应该成为这里的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T08:43:03.747

我认为问题在于您正在序列化 EF 实体，这些实体实际上是引用 DataContext 的代理。在调试器中检查它们。

您将不得不使用`JsonObject(MemberSerialization.OptIn)`属性并用属性标记您的`JsonProperty`属性。[文档](http://james.newtonking.com/projects/json/help/index.html?topic=html/SerializationAttributes.htm)中的更多信息。

# google-app-engine - 如果我从不从异步数据存储操作中调用 get on the future 怎么办？

> ID：13272173
> 
> 赞同：0
> 
> 时间：2012-11-07T14:54:46.863
> 
> 标签：google-app-engine

如果我调用如下所示的异步数据存储操作，但随后结束请求而不调用 get，会发生什么？

我的操作还会执行吗？我会在操作完成执行之前发送响应吗？

```
AsyncDatastoreService datastore = DatastoreServiceFactory.getAsyncDatastoreService();
Entity entity = new Employee("Employee", "Alfred");
// ... populate entity properties

// Make a sync call via the async interface
datastore.put(key)
//Return response 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T05:22:07.453

rpc 将立即发送；当您的应用程序准备好向客户端发送响应时，它将阻塞，直到 rpc 完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T16:41:49.600

我偶然在 python 中完成了此操作，结果没有将任何内容写入数据存储区。

您的操作可能仍会执行，但似乎只有在响应处理程序决定执行时仍处于活动状态时才会发生这种情况。如果没有，似乎什么都没有发生。

是的，响应将在操作完成执行之前发送 - 这是未来的主要特征，它是非阻塞的。

# c# - ClickOnce 部署的应用程序有闪烁的光标但没有焦点

> ID：13272174
> 
> 赞同：3
> 
> 时间：2012-11-07T14:54:55.727
> 
> 标签：c#, winforms, clickonce

我们有一个通过 ClickOnce 部署的应用程序，它有一个奇怪的问题。当您启动应用程序并显示我们的登录对话框时，用户名字段将有一个闪烁的光标，就好像控件具有焦点一样，但是一旦您开始输入，什么也没有发生。您必须实际单击对话框窗口以使其获得焦点。

如果您再次单击离开，尽管“用户名”字段将不再有闪烁的光标，所以它几乎就像控件具有焦点但不是真的？

有没有人遇到过这个问题？我们需要我们的应用程序在启动时具有焦点...

值得一提的是，我们实际上使用的是一个 UI 框架 (XF.UI.Smart)，它具有 ShellPresenter/ShellView 的想法。显示登录对话框时，shell 被隐藏。主窗口的这种隐藏可能是问题吗？

# events - 如何在 Firebug 中捕获 DOM 事件？

> ID：13272175
> 
> 赞同：1
> 
> 时间：2012-11-07T14:55:00.560
> 
> 标签：events, firebug

有没有办法查看页面上触发的所有 DOM 事件——比如 onClick 和 onBlur？我没有在 Firebug 中找到任何方法来查看这些内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T22:17:53.300

您可以右键单击选项卡中的元素`HTML`并选择`Log events`选项。如果你这样做，`<body>`你基本上会看到页面上的所有事件。这将是大量事件，但您可以将其关闭，并使用`find`Firebug 中的 bar 过滤您感兴趣的事件。

Firebug 开发人员的博客文章： http: [//www.softwareishard.com/blog/firebug/firebug-tip-log-dom-events/](http://www.softwareishard.com/blog/firebug/firebug-tip-log-dom-events/)

# arrays - 如何通过邮件发送数组值

> ID：13272184
> 
> 赞同：1
> 
> 时间：2012-11-07T14:55:22.747
> 
> 标签：arrays, bash, email

在 linux 脚本中，

有没有办法使用邮件功能一次发送数组值？

```
function my_mail_function(){

# send array values
mail array_values_here "mymail@domain.tld" ;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T15:13:53.883

只需一点点 bash 代码，您就可以单步执行数组。

```
#!/bin/bash

# Here's a simple array...
a=(one two three)

# The brackets encapsulate multiple commands to feed to the stdin of sendmail
(
  echo "To: Mister Target <target@example.com>"
  echo "From: Julio Fong <jf@example.net>"
  echo "Subject: Important message!"
  echo ""
  count=1
  for item in ${a[@]}; do
    printf "Value %d is %s\n" "$count" "$item"
    ((count++))
  done
  echo ""
) | /usr/sbin/sendmail -oi -fjf@example.net target@example.com 
```

请注意，`sendmail`直接使用比依赖`mail`or`Mail`命令的可用性和配置更安全。你的`sendmail`二进制文件可能和我的不在同一个地方；如果`/usr/sbin/`对您不起作用，请检查`/usr/libexec/`。这取决于您正在运行的 Linux 发行版。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T19:51:24.383

正确的使用方法`mail`是：

```
mail -s "subject here" recipient1 recipient2 ... 
```

该命令从标准输入读取电子邮件正文，因此您可以按照自己喜欢的方式对其进行格式化，并从管道或 here-doc 或文件中读取它或...

```
function my_mail_function(){
    printf "%s\n" "${array_var[@]}" | mail -s "array values" mymail@domain.tld
} 
```

# jquery - 使用 JQUERY/JSON 自动填充选择下拉框

> ID：13272187
> 
> 赞同：0
> 
> 时间：2012-11-07T14:55:35.397
> 
> 标签：jquery, ajax, json

好的，我花了很多时间查看示例，但找不到对我的情况有足够帮助的示例。我有一个 JSON 文件，对此示例进行了简化：

```
{
 "Company":[
    {
        "Position": "Manager",
        "Name": {
                            "11": "joe",
                            "12": "bill",
                            "166": "John"
                            }
    },
{

        "Position": "Tech",
        "Name": {
                            "11": "Bob",
                            "12": "Cindy",
                            "166": "Karl"
                            }
    },
{

        "Position": "Sales",
        "Name": {
                            "11": "Sam",
                            "12": "Ron",
                            "166": "Sara"
                            }
    }
]} 
```

我正在尝试创建 2 个选择框。当用户选择第一个位置框时，它将使用属性（名称）自动填充第二个框。所以这是我到目前为止所拥有的：

```
<select id="job"></select>
<select id="name"></select> 
```

和代码：

```
$select = $('#job');
$select2 = $('#name');

$.ajax({
    url: 'factors.json',
    dataType: 'JSON',
    success: function(data) {

        $select.html('');
        $.each(data.Company, function(key, val) {
            $select.append('<option id="' + key + '">' + val.Position + '</option>');

            $("#job").change(function() {
                $.each(val.Name, function(key2, val2) {
                    $select2.append('<option id="' + key2 + '">' + val2 + '</option>');
                })
            })
        })
    },
});​ 
```

此代码将使用每个位置的所有名称自动填充第二个框。我似乎无法弄清楚如何用每个唯一对象的名称填充它。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T15:26:51.737

这应该可以解决问题。

```
$.each(data.Company, function(key, val) {
    $select.append('<option id="' + key + '">' + val.Position + '</option>');
});

$("#job").change(function(e) {
    $select2.empty();
    $index = $(this).children(':selected').attr('id');
        for (var k in data.Company[$index].Name) {
            $select2.append('<option id="' + k + '">' + data.Company[$index].Name[k] + '</option>');
        }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T16:02:24.867

尝试这样的事情。你真的应该为你的选择拥有一个价值属性。我在选项中添加了一个 data-id attr，以便我可以使用它来存储位置的索引。

```
$.each(data.Company, function(i, v) {
    // create option with value as index - makes it easier to access on change
    var options = $('<option/>', {value: v.Position, text: v.Position}).attr('data-id',i);    
    // append the options to job selectbox
    $('#job').append(options);
});

// bind change event
$('#job').change(function() {
    // cache this
    var $el = $(this);
    // get data-id attr from selected option
    var id = $('option:selected',this).data('id');
    // empty select
    $('#name').empty();
    // get name values for selected option
    $.each(data.Company[id].Name, function(i, v) {
        // create option elements
        var options = $('<option/>', {value: v, text: v});
        // append the options to name selectbox
        $('#name').append(options);
    });    
}).change();// trigger change() on page load to fill name selectbox​ 
```

[http://jsfiddle.net/wirey00/xYX8z/](http://jsfiddle.net/wirey00/xYX8z/)

# windows-phone - Windows Phone 8 中的 C++ WebView 控件？

> ID：13272188
> 
> 赞同：0
> 
> 时间：2012-11-07T14:55:36.753
> 
> 标签：windows-phone, windows-phone-8, winprt

是否有适用于用 C++ 编写的 Windows Phone 8 应用程序的 Web 浏览器或 Web 视图控件？我找到了一个 WebBrowser 控件，但它似乎只在用 C# 编写的 Windows Phone 7 中可用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T17:51:24.350

无法在 C++ 中直接使用 WebBrowser 控件。您必须创建一个[混合的 C++ 和 XAML](http://blogs.microsoft.co.il/blogs/alex_golesh/archive/2012/11/05/what-s-new-in-windows-phone-8-5-out-of-8-quick-tip-creating-hybrid-applications.aspx?utm_source=feedburner&utm_medium=feed&utm_campaign=Feed%3a%20Devcorner%20%28DevCorner%29&utm_content=Google%20Reader)项目并覆盖在您的 DirectX 之上。

请注意，使用混合 XAML 和 D3D 应用程序对使用纯 C++ D3D 应用程序的性能影响很小。即使您从未显示任何 XAML，仅初始化完整的 CLR 并为其加载 XAML 仍然非常繁重。[在此处](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj714079%28v=vs.105%29.aspx)和[此处](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj714079%28v=vs.105%29.aspx)的 MSDN 上阅读有关它的更多信息。

可能适用于您的另一件事是[WebBrowserTask](http://msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.phone.tasks.webbrowsertask%28v=vs.105%29.aspx) [已被移植到 WinRT](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj207022%28v=vs.105%29.aspx)，因此可以从 C++ 访问它。除了 Launcher.LaunchUriAsync() 方法外，它还允许您离开您的应用程序并将 IE10 打开到特定页面。

# ravendb - RavenDB 订阅存储是 NServiceBus 的中心故障点吗？

> ID：13272190
> 
> 赞同：2
> 
> 时间：2012-11-07T14:55:45.710
> 
> 标签：ravendb, nservicebus

我正在评估在我们的产品中使用 NServiceBus 作为 SOA 机制。我正在研究使用发布/订阅模式，我的理解是订阅服务将存储所有订阅。

这是否意味着如果我的 RavenDB 服务器出现故障，那么我的发布者将无法发送给订阅者？或者有没有办法让发布者缓存它拥有的订阅者，如果 RavenDB 出现故障，它会交付给它的已知订阅者？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T18:59:18.797

一般模式是端点有一个主节点作为工作节点和分发节点，然后主节点使用同一台服务器上的 Raven 安装来存储其订阅和 saga 存储。

因此，对于一个端点来说，这是一个故障点，但分布式系统中的其他端点将在自己的服务器上使用 Raven 安装。因此，系统保持分布式，整个系统没有单点故障。RavenDB 支持这一点，因为它很容易安装在任何服务器上。

与 SQL Server 相比，SQL Server 经常集中化、扩展至最大，甚至集群化以提供高可用性。（阅读：昂贵！）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T17:25:44.860

您可以将 RavenDB 服务器作为复制节点运行，以避免出现单点故障。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T14:12:31.237

您还可以在 Windows 故障转移集群中运行 RavenDB，其中节点使用共享 SAN 存储 RavenDB 数据文件。如果活动节点死亡，另一个接管。由于数据存储在 SAN 上，除了在新节点上启动 RavenDB windows 服务所需的时间外，您甚至不应该注意到它。查看 [http://ravendb.net/docs/server/administration/fmc_configuration](http://ravendb.net/docs/server/administration/fmc_configuration)

这也是与 Distributors 一起运行时为 High Availability 推荐的设置。[http://docs.particular.net/nservicebus/scalability-and-ha/distributor/](http://docs.particular.net/nservicebus/scalability-and-ha/distributor/)

# javascript - FB.Auth.parseSignedRequest 可用多长时间？

> ID：13272192
> 
> 赞同：-1
> 
> 时间：2012-11-07T14:55:52.990
> 
> 标签：javascript, facebook, facebook-javascript-sdk

在调试器中使用`FB.Auth.parseSignedRequest`会导致警告消息。

```
The method FB.Auth.parseSignedRequest is not officially supported by Facebook and access to it will soon be removed. 
```

这种方法将在多长时间内可用`http://connect.facebook.net/en_US/all/debug.js`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T08:00:17.847

你不应该依赖它明天就在那里，因为它可能刚刚被删除。它肯定会在下周二消失 :)

# c# - UPDATE 的上下文消息不起作用

> ID：13272194
> 
> 赞同：0
> 
> 时间：2012-11-07T14:56:02.807
> 
> 标签：c#, visual-studio-2010, dynamics-crm-2011

我正在开发 CRM Dynamics 插件。自定义实体上有一个名为“电子邮件”的字段。我想确保两个实体记录的电子邮件地址应该是唯一的。为此，我编写了以下代码：

```
public class Class1 : IPlugin
{
    public void Execute(IServiceProvider serviceProvider)
    {
        // Obtain the execution context from the service provider.
        Microsoft.Xrm.Sdk.IPluginExecutionContext context = (Microsoft.Xrm.Sdk.IPluginExecutionContext)
            serviceProvider.GetService(typeof(Microsoft.Xrm.Sdk.IPluginExecutionContext));

        // Get a reference to the organization service.
        IOrganizationServiceFactory factory =
        (IOrganizationServiceFactory)serviceProvider.GetService(typeof(IOrganizationServiceFactory));
        IOrganizationService service = factory.CreateOrganizationService(context.UserId);

        // The InputParameters collection contains all the data passed in the message request.
        if (context.InputParameters.Contains("Target") &&
            context.InputParameters["Target"] is Entity)
        {
            Entity entity = (Entity)context.InputParameters["Target"];

            //</snippetAccountNumberPlugin2>

            // Verify that the target entity represents an account.
            // If not, this plug-in was not registered correctly.
            if (context.MessageName.ToUpper() == "CREATE")
            {
                if (entity.LogicalName == "new_assignment1entity")
                {
                    try
                    {
                        QueryExpression query = new QueryExpression("new_assignment1entity");
                        query.ColumnSet.AddColumns("new_email");
                        EntityCollection result1 = service.RetrieveMultiple(query);
                        foreach (var a in result1.Entities)
                        {
                            int size = result1.Entities.Count;
                            if (a.Attributes["new_email"].ToString().Equals(entity["new_email"]))
                                throw new InvalidPluginExecutionException("Duplicate Email found!");
                        }
                    }
                    catch (FaultException<Microsoft.Xrm.Sdk.OrganizationServiceFault>)
                    {
                        //You can handle an exception here or pass it back to the calling method.
                        throw new InvalidPluginExecutionException("Some problem occurred while Querying Records!");
                    }
                }
            }
            else if (context.MessageName.ToUpper() == "UPDATE")
            {
                if (entity.LogicalName == "new_assignment1entity")
                {
                    try
                    {
                        QueryExpression query = new QueryExpression("new_assignment1entity");
                        query.ColumnSet.AddColumns("new_email");
                        EntityCollection result1 = service.RetrieveMultiple(query);
                        foreach (var a in result1.Entities)
                        {
                            int size = result1.Entities.Count;
                            if (a.Attributes["new_email"].ToString().Equals(entity["new_email"]))
                                throw new InvalidPluginExecutionException("Duplicate Email found!");
                        }
                    }
                    catch (FaultException<Microsoft.Xrm.Sdk.OrganizationServiceFault>)
                    {
                        //You can handle an exception here or pass it back to the calling method.
                        throw new InvalidPluginExecutionException("Some problem occurred while Querying Records!");
                    }
                }
            }
        }
    }
} 
```

当用户创建具有重复电子邮件地址的新实体记录时，此代码有效并显示对话框打印错误消息。但是，当用户编辑现有记录（更新和现有记录）并使电子邮件地址重复时，此代码不起作用并保存了重复电子邮件地址的更新记录。
我猜测带有 UPDATE else 部分的上下文消息不起作用。
请帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T17:15:31.980

尝试调试它并不值得，因为不幸的是，您正在以一种非常低效的方式进行此操作。（尽管最可能的原因是您查询的方式受 CRM 的“功能”影响，这意味着您没有查询您认为的所有记录）。

简而言之，您的代码说：

*   获取`new_assignment1entity`实体的所有（*）个实例
*   查看每条记录，直到找到一个电子邮件地址与更新中刚刚提供的值匹配（区分大小写）的记录
*   遇到第一个完全匹配时抛出异常（否则继续事务）

主要注意事项：

1.  QueryExpression 将仅返回 CRM 中最多的前 5000 条记录
2.  您应该过滤查询以仅返回属性与提供的值匹配的`new_assignment1entity`记录`new_email`
3.  `String.Equals(string)`区分大小写，因此要真正检查重复项，您应该转换每个值的大小写
4.  你的`size`变量没有用
5.  如果新的/更新的记录没有`new_email`. 您应该在尝试访问它之前检查该属性是否存在

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T07:33:53.263

我解决了这个问题。为什么只运行创建执行流程而不运行更新的问题是我只为创建消息步骤注册了插件。为了克服这个问题，我在同一个插件中添加了一个新步骤，并使用更新消息注册它，如下面的截图所示：

![在此处输入图像描述](../Images/00a3956653c952701dfeee5fd53c4188.png)

它就像魅力一样。

除此之外，@GregOwens 提到了非常有用的几点。这些应该作为 CRM 开发的最佳实践。

# asp.net-mvc - Azure - 对失败的部署进行故障排除

> ID：13272196
> 
> 赞同：3
> 
> 时间：2012-11-07T14:56:08.407
> 
> 标签：asp.net-mvc, azure

有什么机制可以用来解决部署失败的问题吗？Azure 给我的输出非常不令人满意。

```
"Role has encountered an error and has stopped. Unhandled Exception DirectoryNotFoundException." 
```

我正在尝试通过 msbuild 和 powershell 自动部署，我遇到的问题很奇怪，因为当我从 Visual Studio 发布构建相同的 .sln 时，部署工作完美。

两种情况下的服务配置和定义完全相同，所以我开始很难理解实际问题。我检查了一些[最常见的问题](http://blog.toddysm.com/2010/01/windows-azure-deployment-stuck-in-initializing-busy-stopping-why.html)，我似乎没有遇到任何问题。

此外....它是一个网站....据我所知，我的任何代码都不可能在初始化时创建未处理的异常......是吗？

任何关于如何进行更好诊断的建议或信息将不胜感激。我在发布过程中显然*做错*了，但如果没有足够的诊断信息，很难找到问题所在。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T14:59:35.090

启用远程桌面，登录机器并查看事件日志。

[http://msdn.microsoft.com/en-gb/library/windowsazure/gg443832.aspx](http://msdn.microsoft.com/en-gb/library/windowsazure/gg443832.aspx)

你还可以设置[Azure 诊断](http://msdn.microsoft.com/en-us/library/windowsazure/gg433048.aspx)，将事件日志条目发送到 Azure 存储，这样你就不必远程桌面了。

# opencv - 我怎样才能找到检测到的圆圈的顺序？

> ID：13272198
> 
> 赞同：0
> 
> 时间：2012-11-07T14:56:27.967
> 
> 标签：opencv

我有几个圆圈的图像，每个圆圈大小不同。我必须找到每个圆圈的半径进行计算，所以我使用霍夫圆圈，我能够找到检测到的圆圈的半径。因为我有很多不同的圆圈尺寸如何找到哪个半径属于哪个圆？
例如，我有 3 个圆 c1、c2、c3 和霍夫检测返回我 3 半径 r1、r2、r3 现在我怎样才能得到哪个属于哪个圆。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T15:04:09.933

OpenCV中的霍夫圆

例如：

```
vector<Vec3f> circles;

HoughCircles( src_gray, circles, CV_HOUGH_GRADIENT, 1, src_gray.rows/8, 200, 100, 0, 0 ); 
```

circles 对象的中心点存储在其中。

```
x = circles[i][0];
y =circles[i][1];
radius = circles[i][2]; 
```

EG：这将绘制圆圈

```
for( size_t i = 0; i < circles.size(); i++ )
{
   Point center(cvRound(circles[i][0]), cvRound(circles[i][1]));
   int radius = cvRound(circles[i][2]);
   // circle center
   circle( src, center, 3, Scalar(0,255,0), -1, 8, 0 );
   // circle outline
   circle( src, center, radius, Scalar(0,0,255), 3, 8, 0 );
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T15:10:31.977

您可以通过使用函数 cvHoughCircles() 获取检测到的圆的参数。

# jquery-ui-dialog - jquery ui对话框节点消息不居中

> ID：13272200
> 
> 赞同：-1
> 
> 时间：2012-11-07T14:56:30.807
> 
> 标签：jquery-ui-dialog

如您所见，我对此很陌生。我有一个简单的代码，但由于某种原因，对话框永远不会进入屏幕中心，并且在 Safari 上不起作用。这是完整的代码。它仅在按下任何键时才开始消息。任何人都可以帮助我吗？

```
 <!doctype html>
     <html lang="en">
       <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

     <script  src="B:/wamp/www/jquery/js/jquery-1.8.2.js"></script>

       <link rel="stylesheet" href="B:/wamp/www/jquery/development-bundle/themes/base/jquery.ui.all.css">

       <script src="B:/wamp/www/jquery/development-bundle/external/jquery.bgiframe-2.1.2.js"></script>

     <script src="B:/wamp/www/jquery/development-bundle/ui/jquery.ui.core.js"></script>
     <script src="B:/wamp/www/jquery/development-bundle/ui/jquery.ui.widget.js"></script>
     <script src="B:/wamp/www/jquery/development-bundle/ui/jquery.ui.mouse.js"></script>
      <script src="B:B:/wamp/www/jquery/development-bundle/ui/jquery.ui.draggable.js"></script>
      <script src="B:B:/wamp/www/jquery/development-bundle/ui/jquery.ui.position.js"></script>
      <script src="B:/wamp/www/jquery/development-bundle/ui/jquery.ui.resizable.js"></script>
      <script src="B:/wamp/www/jquery/development-bundle/ui/jquery.ui.dialog.js"></script>
      <link rel="stylesheet" href="B:/wamp/www/jquery/development-bundle/demos/demos.css">

       <script >

          $(document).ready(function()
         {
         $("#text1").keyup(function()
    {
    $(function() {
    $( "#dialog-message" ).dialog({
        modal: true,
        buttons: {
            Ok: function() {
                $( this ).dialog( "close" );
            }
        }
    });
        });

        });
     });

     </script>
      <body>
         <div id="dialog-message"></div>

          <input type="text" id="text1"/>

      </body>
      </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T15:07:23.903

你有 jquery.ui.position.js，所以......

```
$( "#dialog-message" ).dialog({
    modal: true,
    position: 'center',
    buttons: {
        Ok: function() {
            $( this ).dialog( "close" );
        }
    }
}); 
```

...应该管用

# php - 用php在列中显示mysql结果并按列排序

> ID：13272201
> 
> 赞同：0
> 
> 时间：2012-11-07T14:56:32.660
> 
> 标签：php, html, mysql

我有以下代码来显示每个类别的一些品牌。

```
<?
$con = mysql_connect("localhost","baba","passsss");//database connection
mysql_select_db("gr_brands_igi") or die(mysql_error());
mysql_set_charset('utf8',$con);     
$query = "SELECT * FROM brands ORDER BY category_anchor ASC, brand_anchor ASC";

$result = mysql_query($query);

$lasteventname = "";

echo "<table border='0' width='100%' cellspacing='0' cellpadding='0'>";
$cell_ctr = 0;
while($row=mysql_fetch_array($result))
{
    if($row[0] != $lasteventname){
        $title = $row[0];
        $lasteventname = $row[0];
        echo "<tr><td colspan=5><h2>$title</h2></td></tr>";
    }
    if(($cell_ctr % 5) == 4) // 2 is the number of columns
    {
        echo"</tr>";
        echo "<tr>";
        $cell_ctr = 0;
    }
  echo "<td align='justify' cellspacing='2' cellpadding='2'>";
  echo "<h3><a href='http://www.example.com/search/search.asp?txtsearch=$row[2]&catg=$row[3]&intitleanddesc=1&isnavbarsearch=1&gallery=1'>" . $row[2] . "</a></h3>";
  echo "</td>";
  $cell_ctr++;
}

if($cell_ctr == 1)
{
  echo "</tr>";
}
else if($cell_ctr == 2)
{
  echo "</tr>";
}
echo"</table>";
?> 
```

现在它显示这个

珠宝

*   1 2
*   3 4
*   5 6
*   7 8

但我想像这样按列排序：

珠宝

*   1 5
*   2 6
*   3 7
*   4 8

数据库中的字段是：

```
category_anchor
keyword
brand_anchor
category_id 
```

我只有一个 while 循环，使用 $lasteventname 我只打印一次类别

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T16:25:36.157

它需要是一张桌子吗？出于我的想法，我将使用列表项

```
<?php
    $result = mysql_query($query);
    $rows = mysql_num_rows($result);
    $i = 0;

    echo '<ul>';

    while($row=mysql_fetch_array($result))
    {
      if (($i % 4) == 0 && $i > 0) {
        echo '</ul><ul>';
      }
      echo '<li><h3>your code</h3></li>';
      $i++;
    }

    echo '</ul>';

    ?> 
```

结果将是这样的，然后您可以根据需要将其设置为表格

```
<div class="banner">
<ul>
  <li>1</li>
  <li>2</li>
  <li>3</li>
  <li>4</li>
</ul>
<ul>
  <li>5</li>
  <li>6</li>
  <li>7</li>
  <li>8</li>
</ul>
</div> 
```

# php - 浏览器关闭时未清除 PHP 会话 Cookie

> ID：13272206
> 
> 赞同：1
> 
> 时间：2012-11-07T14:57:05.377
> 
> 标签：php

以下发生在 Chrome 上，但在 IE 上完美运行。

一个.php

```
<?php
session_start();
$_SESSION['name1'] = 'value1'; 
```

b.php

```
<?php
session_start();
echo $_SESSION['name1']; 
```

运行后`a.php`，我关闭浏览器，打开一个新的Chrome窗口运行`b.php`。我很惊讶它显示出来`value1`。

问题是为什么当我关闭浏览器时会话仍然存在？如何解决？我希望在浏览器关闭时终止会话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T15:02:21.177

由于它在 IE 中工作，我猜 Chrome 中的问题是因为这个功能/设计选择：

[http://code.google.com/p/chromium/issues/detail?id=128513](http://code.google.com/p/chromium/issues/detail?id=128513)

特别是评论#2 是相关的。您是否在 Chrome 设置中激活了“从上次中断的地方继续”？

# jquery - 基于 URL 的 jQuery (HTML?) 显示

> ID：13272207
> 
> 赞同：0
> 
> 时间：2012-11-07T14:57:08.023
> 
> 标签：jquery, html

> **可能重复：**
> [使用 jQuery 获取 URL 的 #anchor ？](https://stackoverflow.com/questions/4483044/get-anchor-for-url-using-jquery)

我在许多站点中看到给定的 URL 类似于`http://mysite.com/index.php#something`. 网站显示的内容与此不同`#something`。如果它在那里，我们得到别的东西，如果它不存在，那么我们得到默认页面。

我不知道如何做到这一点，我正在寻求知识。这只能通过 HTML 完成吗？还是我需要 javascript/jquery？

谢谢。

**编辑 ：**

现在我已经理解了`#something`aka hash 的概念，如果它被 css ( ) 隐藏，我怎样才能让它显示一些东西`display: none;`，如果 hash 是例如`#contact`，那么我希望我的 index.php 显示隐藏的联系页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T15:00:53.720

`#something`将链接到页面中的命名锚标记，例如

```
<a name="something">...</a> 
```

这通常会使浏览器滚动到锚标记并在页面的该部分显示内容。

如果您想根据指定的文本（例如`#something`）有条件地更改浏览器中的内容，那么您将需要使用 Javascript。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T15:00:03.663

它被称为 url 哈希

您可以通过执行以下命令在 javascript 中获取它：

```
window.location.hash 
```

你甚至可以设置它：

```
window.location.hash = "test" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T15:02:08.743

首先，你说的**#something**被称为**哈希**

这个哈希可以通过 javascript 访问，所以你可以像变量一样用它做不同的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T14:59:59.057

当您在该 URL 上时，#something 将使页面滚动到具有该 id(#something) 的元素。它与 javascript 或 jQuery 无关。

# jquery - 点击时的Jquery事件跨度不起作用

> ID：13272210
> 
> 赞同：1
> 
> 时间：2012-11-07T14:57:14.503
> 
> 标签：jquery, html

当我们单击包含文本的 Span 时，任何人都可以帮助我在 onClick 事件中没有结果值，似乎它不会触发动作..

```
$("#divResult").bind("click",function(e){ 
      var $clicked = $(e.target);
      var $did = $clicked.find('.did').html();
      var $dname = $clicked.find('.dname').html();
      var decoded1 = $("<div/>").html($did).text();
      var decoded2 = $("<div/>").html($dname).text();
      $('#driverID').val(decoded1);
      $('#driverName').val(decoded2);
}); 
```

我已经写了：

[http://jsfiddle.net/mWWur/](http://jsfiddle.net/mWWur/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T15:01:27.870

你`e.target`的不是 div，而是`span`-s 之一。你必须修改你的脚本

```
if ( e.target.nodeName.toLowerCase() == "span" ) {
    var $clicked = $( e.target.parentNode );
} else {
    var $clicked = $( e.target );
} 
```

[**演示**](http://jsfiddle.net/mWWur/2/)

# asp.net - 在后面的代码中插入命令

> ID：13272212
> 
> 赞同：0
> 
> 时间：2012-11-07T14:57:23.707
> 
> 标签：asp.net, ado.net

我在后面的代码中遇到了以下代码，想知道这是否是一种以编程方式插入记录的好习惯：

```
protected void ButtonMain_Click(object sender, EventArgs e)
{

    string sConn = ConfigurationManager.ConnectionStrings["SQL1"].ConnectionString;
    SqlDataSource dbQ = new SqlDataSource();
    dbQ.ConnectionString = sConn;
    dbQ.InsertCommand = "INSERT INTO data1_DropDownLists (ParamID, ddlValue) VALUES ('" + ddlAllParams.SelectedValue + "','" +
        txtddl.Text + "')";
    dbQ.Insert();
    DropDownGrid.DataBind();
    dbQ = null;

} 
```

我之前看到的是这样的：

```
 string query = "INSERT INTO data1_DropDownLists vALUES ...";
     cmd = new SqlCommand(query, conn);
     conn.Open();
     cmd.ExecuteNonQuery(); 
```

所以不确定使用 InsertCommand 使用上述方法有什么好处

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T15:06:54.123

[`SqlDataSource`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.sqldatasource%28v=vs.80%29.aspx)是 System.Web 命名空间中的一个控件。它可以用作 Web 数据绑定控件（如`Repeater`或`GridView`.

它是一个控件，应该在 aspx 标记上以声明方式使用，而不是在代码隐藏中。它就像 GUI 和 DAL 之间的接口。通常你应该避免这种硬链接。相反，您应该将 GUI（ASPX）、BLL（代码隐藏或类库等）和 DAL（ADO.NET 或实体框架等）分开。

我建议使用最直接的方式，使用 ADO.NET `SqlCommand`：

```
// use using-statement to ensure that the connection gets closed even in case of an error
using (var con = new SqlConnection(connectionString))
{
    using (var cmd = new SqlCommand("INSERT INTO dbo.Table(Column)VALUES(@Column)", con))
    {
        // use parameters to avoid SQL-Injection
        cmd.Parameters.AddWithValue("@Column", value);
        con.Open();
        cmd.ExecuteNonQuery();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T15:09:53.460

[SqlDataSource 类](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.sqldatasource.aspx)有四个命令属性，每个 sql 操作一个：`SelectCommand`, `InsertCommand`, `UpdateCommand`, `DeleteCommand`.

创建实例后，可以设置每个命令属性。

该类还公开了一个双参数构造函数`SqlDataSource(String, String)`，其中第二个参数指定 SELECT 命令文本。

# c# - ArgumentNullException 未处理

> ID：13272217
> 
> 赞同：-2
> 
> 时间：2012-11-07T14:57:40.153
> 
> 标签：c#, html-agility-pack

我是 C# 的新手。我有一个这样定义的隐式类型变量：

```
 var item = doc.DocumentNode.SelectNodes("//body[@id='person']")
                                  .Select(p => p.InnerText); 
```

这个 var 有时会返回`null`. 这就是视觉工作室要求我处理`ArgumentNullException`. 但如果我这样做，我`var`的其他人仍然不知道我的`try`-`catch`我不能再使用它了。

有人建议我使用空对象设计模式，但我不知道应该如何为`var`. 有谁知道我应该如何处理这种情况，因为我厌倦了每次都处理 null 情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T15:14:18.747

我假设，看起来，当没有找到结果时问题又`SelectNodes`回来了。`null`这是我经常遇到的一种模式：一系列操作，其中一些可以返回`null`值，其中 any 的`null`产生应该导致整个序列产生`null`.

一种解决方案是使用函数式程序员所称的`Maybe`monad`Bind`方法：

```
public static U IfNotNull<T, U>(this T self, Func<T, U> func)
    where U : class
{
    return (self != null) ? func(self) : null;
} 
```

这将“传播”空值而不是抛出异常。然后，

```
doc.DocumentNode
    .SelectNodes("//body[@id='person']")
    .IfNotNull(nodes => nodes.Select(p => p.InnerText)); 
```

如果`SelectNodes`返回`IEnumerable<XmlNode>`，您可以使用`Enumerable.Empty<>`：

```
(doc.DocumentNode.SelectNodes("//body[@id='person']") ?? Enumerable.Empty<XmlNode>())
    .Select(p => p.InnerText); 
```

或者，为了更好的可读性，编写一个扩展方法以避免担心运算符语法：

```
public static T Coalesce<T>(this T self, T other)
    where T : class
{
    return self ?? other;
} 
```

和：

```
doc.DocumentNode.SelectNodes("//body[@id='person']")
    .Coalesce(Enumerable.Empty<XmlNode>())
    .Select(p => p.InnerText); 
```

这些都是推迟空检查的各种方法，直到您准备好处理结果，而不必捕获`NullPointerException`s（或`ArgumentException`s 在扩展方法的情况下）。请注意，如果您在最后抛出一个简单的运算符，则任何产生`null`值的方法都可能产生默认值`??`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T15:03:09.527

```
IEnymerable<HtmlNode> v = null;    
var item = doc.DocumentNode.SelectNodes("//body[@id='person']");
if (item != null)
{
    v = item.Select(p => p.InnerText);
} 
```

# perl - Mojolicious lite 如何将未找到和服务器错误页面重定向到用户定义的错误页面

> ID：13272220
> 
> 赞同：6
> 
> 时间：2012-11-07T14:57:50.407
> 
> 标签：perl, mojolicious, mojolicious-lite

如何将未找到的用户定义错误页面和服务器错误页面重定向到用户定义页面 Mojolicious lite

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-08T02:26:52.277

您可以为您的自定义页面添加一个模板，命名为`exception.html.ep`或`not_found.html.ep`在您的 liteapp 末尾。

例如：

```
use Mojolicious::Lite;
get '/' => sub {
    my $self = shift;
    $self->render(text => "Hello.");
};
app->start;

__DATA__
@@ not_found.html.ep
<!DOCTYPE html>
<html>
  <head><title>Page not found</title></head>
  <body>Page not found <%= $status %></body>
</html> 
```

如需参考，请参阅[Mojolicious 渲染指南](http://mojolicio.us/perldoc/Mojolicious/Guides/Rendering#Rendering_exception_and_not_found_pages)。

> 渲染器将​​始终尝试查找 exception.$mode.$format.* 或 not_found.$mode.$format.*，然后再回退到内置的默认模板。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-10-16T13:07:05.677

我想在我的 404 页面中运行一些代码，所以从这里借用 [https://groups.google.com/forum/#!topic/mojolicious/0wzBRnetiHo](https://groups.google.com/forum/#!topic/mojolicious/0wzBRnetiHo)

我制作了一条可以捕获所有内容并将其放置在所有其他路线之后的路线，因此与路线不匹配的网址会落入此范围：

```
any '/(*)' => sub {
    my $self = shift;
    $self->res->code(404);
    $self->res->message('Not Found');

    # 404       
    $self->stash( { 
        # ... my stuff in the stash ... 
    } );

    $self->render('mytemplate', status => 404);
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-22T21:54:10.483

我有一个 API 想要像其他任何错误一样发送回 404 错误——相同的 JSON 格式等等。

`startup`我在（完整的应用程序，而不是精简版）的末尾有这个片段。由于这是最后定义的路由，它只拾取尚未处理的任何内容。而且，由于它处理了所有这些，Mojo 永远没有机会通过查找模板来使用它自己的 404 处理：

```
 $self->routes->any('/*')->to(
    controller => 'Base',
    action     => 'not_found'
  ); 
```

# c - 强制编译器不链接到某些目标文件

> ID：13272223
> 
> 赞同：2
> 
> 时间：2012-11-07T14:58:08.713
> 
> 标签：c, embedded, arm, realview

我目前正在研究强制 rvct 编译器不链接特定翻译单元并假装它已链接它的可能性。

我们的产品在空间限制下运行非常紧张，并且在将一些单元测试与其集成时遇到了麻烦，同时又要控制空间。

基本上，我们在运行时可以利用的内存足以存储我们的单元测试，但是我们没有足够的 ROM 空间来保存它们。

我们有办法在分散文件中准确控制代码的哪一段内存进入我们的设备，因此我们正在考虑定义单元测试代码将位于哪个区域并以某种方式*强制*编译器不链接在编译期间的特定代码中。

类似于以下内容：

```
Result UnitTestEntryPoint (UnitTest suite) {
   if (hasTestInMemory) {
      switch (suite) {
          case EncrpytionTest:
              return EncrptyUnitTest();
          // more tests.
      }
   }
}

// Actual Tests, can we not link this code, but just pretend we link to them?
Result EncrpyUnitTest (void) {
    // Do stuff...
} 
```

`hasTestInMemory`然后在运行时，我们将单元测试二进制文件上传到我们在分散文件中定义的指定内存区域，并将`true`.

这可能吗？

或者，如果没有，有人可以指出我寻找解决方案的正确方向，该解决方案以某种方式满足我们的空间限制并能够在运行时加载单元测试。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T17:54:58.660

您应该能够使用分散文件将所有单元测试功能放入单独的加载区域。当您链接图像时，您将获得一个 AXF，但是当您将其转换为二进制文件以加载到内存中时，您应该获得两个文件，每个区域一个。

您还可以在单​​元测试映像中有一些标记，您的 ROM 映像可以检查这些标记以验证二进制文件是否已加载。此检查将替换代码中的 hadTestInMemory 检查。同样，您应该能够使用分散文件在第二个二进制文件的开头放置一些特定的 RO 数据。

随着您的进步，我可能会帮助您提供更多细节。

# doctrine - 在带有 DQL 的 WHERE 子句中使用 DATE() 函数

> ID：13272224
> 
> 赞同：14
> 
> 时间：2012-11-07T14:58:11.353
> 
> 标签：doctrine, doctrine-orm, dql

执行此 DQL 查询时出现一个奇怪的错误：

```
SELECT u FROM User u LEFT JOIN u.schedule s WHERE DATE(s.timestamp) = DATE(NOW()) 
```

Doctrine 抛出异常并显示以下消息：

```
Expected known function, got 'DATE' 
```

这个问题看起来与[这个 bug](http://www.doctrine-project.org/jira/browse/DDC-1236)相似，但它解决了 GROUP BY 子句中的 DATE() 函数，并且该 bug 已在 Doctrine 2.2 中关闭。此刻，我得到了学说 2.4-DEV 的异常。

该查询旨在选择今天安排的所有用户。有什么方法可以创建这个 DQL？我在 phpMyAdmin 中测试了 SQL 版本，查询没有引发错误。可能有什么问题？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-07T01:06:12.043

[您可以使用自定义函数](http://docs.doctrine-project.org/en/2.0.x/cookbook/dql-user-defined-functions.html)来实现您想要的：

```
use Doctrine\ORM\Query\AST\Functions\FunctionNode;
use Doctrine\ORM\Query\Lexer;
use Doctrine\ORM\Query\SqlWalker;
use Doctrine\ORM\Query\Parser;

class DateFunction extends FunctionNode
{
    private $arg;

    public function getSql(SqlWalker $sqlWalker)
    {
        return sprintf('DATE(%s)', $this->arg->dispatch($sqlWalker));
    }

    public function parse(Parser $parser)
    {
        $parser->match(Lexer::T_IDENTIFIER);
        $parser->match(Lexer::T_OPEN_PARENTHESIS);

        $this->arg = $parser->ArithmeticPrimary();

        $parser->match(Lexer::T_CLOSE_PARENTHESIS);
    }
} 
```

然后在你的代码中注册这个函数：

```
$em->getConfiguration()->addCustomDatetimeFunction('DATE', 'DateFunction'); 
```

您的 DQL 查询将起作用！

# sql - Oracle SQL Developer 逐步复制数据库

> ID：13272225
> 
> 赞同：5
> 
> 时间：2012-11-07T14:58:14.557
> 
> 标签：sql, database, oracle, oracle-sqldeveloper, database-administration

我在将 Oracle 数据库复制到同一台服务器但使用另一个名称时遇到了很大的麻烦，以用作开发数据库。

我习惯了 SQL Server，我是 Oracle (11g) 的新手。

我想使用 SQL Developer 的“数据库副本”，但一直出错。首先是缺少表空间。然后，当我在新的空数据库中手动创建它们时，错误是关于缺少用户的。我想手动创建用户，但我首先需要创建缺少的角色。完成所有操作后，它因缺少索引而失败...

**如何使用“数据库副本”复制我需要的所有内容？**

任何意见是极大的赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T15:46:27.843

SQL Developer 副本只会在模式之间复制对象。你只想复制一个模式吗？还是一个全新的数据库，*包括所有模式*？

从你的问题来看，我假设是后者。如果是这样，RMAN“数据库复制”可能会对您有所帮助。

请参阅Tim Hall 的优秀网站上的[http://www.oracle-base.com/articles/11g/duplicate-database-using-rman-11gr2.php 。](http://www.oracle-base.com/articles/11g/duplicate-database-using-rman-11gr2.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T15:33:36.487

> 对您来说最好的方法是创建一个新用户：
> 
> 启动 MSDOS Shell 使用系统管理员帐户 sqlplus / as sysdba 连接到您的数据库
> 
> 然后编写这些序列：
> 
> CREATE USER user2 IDENTIFIED BY user2password;
> 
> 使用管理员选项将所有权限授予 user2；
> 
> 向用户 2 授予连接；
> 
> 将 DBA 授予 user2；
> 
> 退出 oracle 提示符
> 
> 再次在 MSDOS Shell 中，像这样导出当前的 user1：
> 
> exp 用户 1/密码
> 
> 或 exp user1/password@connectString
> 
> 如果您在 tnsnames.ora 中指定了连接字符串，则默认回答所有问题，为您的导出文件命名，并指定您只想导出用户 user1
> 
> 然后继续在你的新用户 2 中导入转储，如下所示：
> 
> imp user2/password2 fromuser=user1 touser=user2
> 
> 默认回答所有问题，为您的导出文件命名（如果您不更改 CmdShell 的默认文件夹，则不必指定完整文件夹）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-30T11:39:38.423

来自 Oracle 文档的一个有趣的链接：

[http://docs.oracle.com/cd/E11882_01/backup.112/e10642/rcmdupdb.htm#BRADV010](http://docs.oracle.com/cd/E11882_01/backup.112/e10642/rcmdupdb.htm#BRADV010)

# javascript - 悬停时删除 div

> ID：13272229
> 
> 赞同：0
> 
> 时间：2012-11-07T14:58:21.310
> 
> 标签：javascript, jquery, html, css

我有这个 HTML 结构：

```
 <div class="shadow"></div>
<div id="slide_img">
  <ul class="clearfix">
   <li><img src="themes/company/img/01.png"></li>
   <li><img src="themes/company/img/02.png"></li> 
   <li><img src="themes/company/img/03.png"></li> 
   <li><img src="themes/company/img/04.png"></li> 
   <li><img src="themes/company/img/05.png"></li> 
   <li><img src="themes/company/img/01.png"></li>  
 </ul>
</div> 
```

我的 img 上的阴影 div 并获得不透明效果。但是当悬停在 img 上时，删除这个阴影 div。

阴影 CSS：

```
.shadow {
  background: none no-repeat scroll center center #000000;
  height: 250px;
  left: 0;
  margin: 0;
  opacity: 0.7;
  padding: 0;
  position: absolute;
  width: 1838px;
  z-index:2;
} 
```

我怎样才能通过 jQuery 做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T15:00:16.217

把你的`.shadow`div*放在里面* `#slide_img`，你可以用纯 CSS 来做：

```
#slide_img:hover .shadow{
    display: none;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T14:59:51.400

```
$("#slide_img img").on('mouseenter mouseleave', function() {
    $('.shadow').toggle(e.type=='mouseenter');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T15:15:09.640

如果你想暂时隐藏这个使用

```
$(document).ready(function(){
    $('#slide_img img').hover(
        function(){
            // When hover the #slide_img img hide the div.shadow
            $('div.shadow').hide();
        },function(){
            // When out of hover the #slide_img img show the div.shadow
            $('div.shadow').show();
        }
    );
}); 
```

ex.on [jsFiddle Here](http://jsfiddle.net/PrD3w/)

否则你想完全删除这个使用

```
$('#slide_img img').hover(function(){$('div.shadow').remove();}); 
```

# mysql - mysql - 基于多个 id 对来自多个表的列求和

> ID：13272230
> 
> 赞同：3
> 
> 时间：2012-11-07T14:58:22.753
> 
> 标签：mysql, sql, database, sum

我有一个带有几个相同表的 mySQL 数据库。我需要加入所有表并在至少 2 个表中每次`id1`和相等时总结视图和点击，或者如果不是则简单地显示该行。`id2`

请看下表结构：

```
Table1:
id..id2...views...hits
1...102...55......12
2...103...12......22

Table2:
id..id2...views...hits
1...123...512......13
2...103...123......43

Table3:
id..id2...views...hits
1...102...232......43
2...103...100......70 
```

最终结果应如下表：

```
id...id2...views...hits
1....102...287....65   <-- This one is the result of adding 1st row of table1 and 2nd row of table 2
1....123...512....13   <-- This is the 1st row of table2 as there's no other id2 = 123
2....103...235....135 <-- This is the sum of 2nd row in table1 + 2nd row in table2 + 2nd row in table3 
```

我希望这是有道理的，有人可以提供帮助。

谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T15:00:09.740

将所有三个表的行与一个并集放在一起，然后像往常一样分组和求和：

```
SELECT id, id2, SUM(views), SUM(hits)
FROM
(
    SELECT id, id2, views, hits
    FROM Table1
    UNION ALL
    SELECT id, id2, views, hits
    FROM Table2
    UNION ALL
    SELECT id, id2, views, hits
    FROM Table3
) x
GROUP BY id, id2 
```

# php - 如何安全地防止上传的文件在任何服务器上通过 PHP 运行？

> ID：13272231
> 
> 赞同：8
> 
> 时间：2012-11-07T14:58:25.117
> 
> 标签：php, windows, apache

我注意到即使扩展名不是，也可以通过 PHP 运行文件`.php`，例如即使扩展名不是，文件`test.xyz.php.whatever.zyx`仍然可以使用 PHP 运行`.php`！它恰好包含`.php.`在文件名中，这足以让我的 Apache 运行 PHP 脚本。

我尝试（按照某人的建议）将其放入该`.htaccess`文件夹的文件中：

```
php_flag engine off 
```

但它在我的机器上不起作用。

我现在知道的唯一解决方案是：

*   重命名为不通过 PHP 运行的已知文件扩展名，例如`.txt`.
*   从文件名中删除所有点，从而使其无扩展名。

但我仍然不确定这些解决方案如何在我的 Windows 服务器（使用 Apache）之外的其他服务器上工作。

是否有任何其他解决方案不需要以任何方式重命名文件名？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T15:02:10.330

To be completely secure, you'll need to do a couple of things:

**Set your upload directory above your "public" folder, making it inaccessible from a browser.** This setting is in php.ini (php config file). You'll need to restart Apache for this to take effect. On most Redhat / Fedora / CentOS web servers, this can be:

```
upload_tmp_dir = "/var/tmp/" 
```

OR, on my local Windows 7 WAMP install, it is set to:

```
upload_tmp_dir = "c:/wamp/tmp" 
```

**Disable scripts from running on that directory (c:/wamp/tmp), in .htaccess:**

```
RemoveHandler .php .phtml .php3
RemoveType .php .phtml .php3
php_flag engine off 
```

**In your PHP script, get the uploaded file, filter it based on mimetype (not filetype extension), change the filename, and put it into a secured publicly accessible folder.** In more detail:

*   create a whitelist of filetypes, ex: only images (jpeg, png, gif, bmp). This can be done using **mime_content_type()** [http://php.net/manual/en/function.mime-content-type.php](http://php.net/manual/en/function.mime-content-type.php) or the newer **finfo_file()** [http://us3.php.net/manual/en/function.finfo-file.php](http://us3.php.net/manual/en/function.finfo-file.php)
*   choose a new filename, often it's best to use a random MD5 hash based on the original filename + salt + timestamp.
*   move it to a public folder, ex: "c:/wamp/www/project_name/public/uploads"

**Preferably use an MVC framework, such as Zend Framework, which includes filetype filtering.**

If you do all of that, you should be secure. Obviously you'll never be 100% safe, since there are countless obscure exploits targeting PHP, MySQL, the command line, etc, particularly on older systems. On larger company webservers (what I work on), they disable everything, and selectively enable only what is required for the project. With a system such as WAMP, they enable everything, to ease local development.

Good practice for working on a professional project is to get a cloud server account with Rackspace or Amazon, and learn how to configure php.ini, and httpd.conf settings, as well as PHP security best practices. In general, do not trust the users input, expect it to be corrupt / malicious / malformed, and in the end you'll be secure.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-05T12:49:48.917

对于用户上传，我建议您在这种情况下在根路径上方的层中上传文件夹，只有您有权上传文件夹（直接寻址）并且攻击者无权访问此文件夹中的任何文件因此您禁用攻击者运行恶意文件的操作

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-05T20:56:32.327

首先，您需要了解这里发生了什么：

```
test.xyz.php.whatever.zyx 
```

网络服务器上的这样一个文件本身不会做任何事情。只有添加的配置会告诉 Apache 在该文件上执行 PHP。

因此，如果您删除该添加的配置，Apache 将不会`.php`在其中找到 - 无论是在最后还是*堆叠*文件扩展的一部分。

检查您`php`在服务器配置中设置的处理程序。为上传目录删除它。这将不会解决您上传文件可能遇到的任何其他配置问题，但是 PHP 文件不再由 PHP 执行 - 如果我理解正确，这就是您想要的。

如果您在找出问题所在时遇到问题，您需要将 PHP 配置发布到您的`httpd.conf`文件中，并为您的系统发布相关的 Apache HTTPD 配置文件。

有人告诉你的指令`.htaccess`：

```
php_flag engine off 
```

仅当您将 PHP 作为 apache SAPI 模块运行时才有效。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T17:56:12.433

就个人而言，这是我在任何情况下都不再将文件上传到 Web 服务器的主要原因。相反，我使用 S3 / Amazon SDK 将上传的临时文件直接移动到具有私有权限的 S3 上的存储桶（我使用 S3，任何其他 CDN 也可以正常工作）。如果该文件需要由 Web 客户端查看或查看，我使用与 SDK 集成的各种“getter”功能来获取文件并显示它。

每当您允许将任何类型的文件上传到 Web 服务器时，就会有很多不可控的变量开始发挥作用，管理权限、过滤甚至空间都可能很困难。使用 S3（或任何其他 CDN），这一切都非常易于管理，并且默认情况下所有文件都有效地与服务器隔离。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-01T12:30:31.860

在 Apache 上，您可以禁用包含不受信任文件的目录的所有动态处理程序。

```
SetHandler default-handler 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-02T21:54:36.413

而不是`php_flag engine off`您可以使用单个目录的 .htaccess 文件删除 PHP 文件的处理程序。

在您禁用 PHP 的目录中，您的 .htaccess 应包括：

```
RemoveHandler .php .phtml .php3 .php4 .php5
RemoveType .php .phtml .php3 .php4 .php5 
```

但是，您可能会摆脱以下情况，具体取决于`AddHandler`您在默认 Apache 配置中配置的类型，在 Windows 上应该在`C:\Program Files\Apache<version>\conf\httpd.conf`

```
RemoveHandler .php 
RemoveType .php 
```

您还需要确保在您的主 apache 配置文件中，包含 .htaccess 文件的目录包含在`Directory`已设置的语句中`AllowOverride FileInfo`。您可能希望考虑`AllowOverride All`是否将 .htaccess 文件用于其他目的 - 请参阅[AllowOverride 的 Apache 文档以](http://httpd.apache.org/docs/2.2/mod/core.html#allowoverride)了解差异的解释。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-08T15:46:05.070

以下`.htaccess`代码可以工作并拒绝访问包含“ `php`”的文件：

```
<FilesMatch "php">
    Deny from all
</FilesMatch> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-07T15:01:56.353

一个简单的正则表达式就可以完成这项工作

```
<?php
$a = strtolower($_FILES["file"]["name"]);
$replace = array(".php", ".phtml", ".php3", ".php4", ".php5");
$_FILES["file"]["name"] = str_replace($replace, "", $a);
?> 
```

这在任何服务器上都可以正常工作

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-01-02T22:10:21.980

这不是一个很好的答案，但希望在某些特殊情况下有用......

`.htaccess`你可以在这样的文件中使用 mod_rewrite ：

```
RewriteRule ^(.+).xyz.php.whatever.zyx$ index.php?openfile=$1 [NC,L] 
```

在你的`index.php`文件里面：

```
$file = secure_this_string($_GET['openfile']);
include($file.'.xyz.php.whatever.zyx');  # or some other files 
```

出于安全原因，请记住查看此答案[StackOverFlow](https://stackoverflow.com/questions/8396242/how-do-i-include-a-text-file-in-php-as-php-without-printing-to-the-page)

并在`test.xyz.php.whatever.zyx`文件中：

```
<?php echo 'hello'; 
```

现在如果客户端请求 /test.xyz.php.whatever.zyx 文件，输出应该是 'hello'

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-01-08T02:57:30.073

我可以很容易地在我们的服务器上重现您的问题。有一种方法可以解决这个问题，您需要编辑 /etc/mime.types 并注释掉行

```
#application/x-httpd-php                                phtml pht php
#application/x-httpd-php-source                 phps
#application/x-httpd-php3                       php3
#application/x-httpd-php3-preprocessed          php3p
#application/x-httpd-php4                       php4
#application/x-httpd-php5                       php5 
```

这些行会导致处理任何名称为 .php 的内容。注释掉 mime.types 中的条目后，/etc/apache2/mods-enabled/php5.conf 中的 mod_php 配置具有此条目，它仅正确处理**以**.php 结尾的文件

```
<FilesMatch "\.ph(p3?|tml)$">
    SetHandler application/x-httpd-php
</FilesMatch> 
```

**真正可怕**的是这是一个默认配置（在我们的例子中是 Ubuntu 10.04）。

* * *

**编辑**

在 Windows 上，mime.types 文件应该在 apache_home/conf/mime.types

# javascript - Childbrowser 在主页按钮上保存网址

> ID：13272240
> 
> 赞同：0
> 
> 时间：2012-11-07T14:58:55.750
> 
> 标签：javascript, xcode, cordova, phonegap-plugins

我使用最新的 xcode、childbrowser 和 cordova 版本。

当我按下手机上的主页按钮时，有没有办法从 childbrowser 保存上次访问的页面？

我需要保存它，因为当我恢复到我的应用程序时，我需要先检查用户是否仍然经过身份验证或再次进行自动登录。感谢您的建议或解决方案！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T15:25:06.980

[ChildBrowser](https://github.com/phonegap/phonegap-plugins/blob/master/iPhone/ChildBrowser/ChildBrowser.js)支持回调`locationChange`. 您可以使用它来保存每次 URL 更改。按下主页按钮时，应用程序不会收到任何回调。

# php - JS、PHP 动态内容和谷歌爬虫

> ID：13272250
> 
> 赞同：0
> 
> 时间：2012-11-07T14:59:24.143
> 
> 标签：php, javascript, google-analytics, domdocument

我创建了一系列大约 25 个静态站点，它们共享相同的信息，并且不得不在这里和那里更改无意义的副本，所以我编写了这个 javascript，以便所有站点都从一个位置提取内容。（简化为一个例子）

```
var dataLoc = "<?=$resourceLocation?>";
$("#listOne").load(dataLoc+"resources.html #listTypes"); 
```

当页面加载时，它会找到 div id listOne 然后将其替换为文件 resources.html 中的 div 的内容，并且只有那里标记为 listTypes 的 div 的内容。

我的问题：谷歌根本没有抓取这个动态内容，我被告知谷歌会抓取动态导入的信息，所以我很想知道**我目前正在做什么需要改进？**

我假设 js 只是被谷歌蜘蛛跳过了，所以我使用 PHP 来访问之前使用的相同 HTML 文件，它工作得很好，但它没有按照我的需要工作。这将返回文本，但我还需要标记、`<li>, <p><img>`标签等。也许我可以调整这个？（我不是开发人员，所以我只是尝试了我在 PHP 在线帮助中读到的几十个东西，这和我得到的一样接近）

```
function parseContents($divID)
    {

    $page = file_get_contents('content/resources.html');
    $doc = new DOMDocument();

    @$doc->loadHTML($page);
    $divs = $doc->getElementsByTagName('div');

    foreach($divs as $div) 
        {
        if ($div->getAttribute('id') === $divID) 
            {
            echo $div->nodeValue;
            }
        }

    }

parseContents('listOfStuff'); 
```

感谢您帮助更好地理解这一点，如果我需要更好地解释它，请告诉我:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T15:10:20.500

请参阅Google 发布的[使 AJAX 应用程序可抓取](https://developers.google.com/webmasters/ajax-crawling/)。

# php - 为什么搜索 mysql 数据库没有结果？第一次使用 LIKE

> ID：13272252
> 
> 赞同：1
> 
> 时间：2012-11-07T14:59:32.023
> 
> 标签：php, mysql

在这里编辑别人的代码，所以我不能更改数据库中调用的字段`title`或更改为 MySQLi 等：/

该代码可以毫无问题地连接到数据库，但始终得出零结果。

```
$strSQL = "SELECT * FROM newproducts WHERE 'title' LIKE ('%$q%')";
$sql = mysql_query($strSQL) or die(mysql_error());
$num_rows = mysql_num_rows($sql);

if ( $q == '' ) {
    echo '<p class="black-text">Please provide a search term.</p>';
}

else if ( $num_rows <= 0 ) {
    echo '<p class="black-text">Your search for <b>'.$q.'</b> returned <b>0</b> results.</p>';
}

else { 

    echo '<p class="black-text">Your search for <b>'.$q.'</b> returned <b>'.$num_rows.'</b> result(s).<br/><br/>';  
    while($row = mysql_fetch_assoc($sql)) {
        echo '- '.$row['title'].' <a href="'.$row['link'].'.html" class="search-link">[Read more]</a><br/>';
    }
    echo '</p>';
} 
```

会不会是个案问题？我试过搜索较低和较高的字符串，但结果仍然为零。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T15:01:26.643

在 MySQL 中，单引号表示字符串：

```
SELECT * FROM newproducts WHERE 'title' LIKE ('%$q%') 
```

应该

```
SELECT * FROM newproducts WHERE title LIKE ('%$q%') 
```

此外，您正在`if ($q == '')`执行查询之后进行测试 - 您可能希望在此之前执行此操作 - 但这不会导致您的问题。

最后，通过使用潜在不安全的用户输入，您面临 SQL 注入的风险 - 但我不会深入研究，因为它与您的问题没有直接关系。如今，大多数 PHP 开发人员都在使用准备好的语句来使他们的查询更安全（并且因为运行查询的旧样式将被弃用）。

# css - 使用浏览器默认值覆盖 reset.css

> ID：13272262
> 
> 赞同：3
> 
> 时间：2012-11-07T14:59:57.260
> 
> 标签：css, css-reset

我知道这听起来可能是一个奇怪的问题，但我实际上需要使用浏览器默认值覆盖 CSS 重置文件（因此与正常情况相反）。

所以当我的 reset.css 状态

```
li{
   padding: 0;
} 
```

我想用浏览器默认值覆盖它。
环境

```
li{
   padding: auto !important;
} 
```

虽然不起作用。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T15:03:29.913

默认样式表因浏览器和版本而异。您可以使用相应的 CSS 文件应用浏览器的默认样式表：

*   [Mozilla 的默认 CSS](http://hg.mozilla.org/mozilla-central/file/tip/layout/style/html.css)
*   [WebKit 的默认 CSS](http://trac.webkit.org/browser/trunk/Source/WebCore/css/html.css)
*   [Opera 的默认 CSS](http://www.iecss.com/opera-10.51.css)
*   [IE9 的默认 CSS](http://www.iecss.com/ie-9.css)

更简单的解决方案可能是只删除重置样式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-17T14:04:04.913

您可以查找各个属性并根据需要进行设置。这在 CSS 中很常见，但您也可以使用“初始”值来隐式地做同样的事情，而且省力。

例如，

```
h1 {
    color: initial; 
} 
```

# node.js - 如何停止 AngularJS 教程网络服务器

> ID：13272264
> 
> 赞同：4
> 
> 时间：2012-11-07T14:59:58.090
> 
> 标签：node.js, terminal, terminal-services

按照 docs.angularjs.org 上的 AngularJS 教程，我启动了简单的网络服务器，我启动了网络服务器`web-server.js`只是为了测试它，并第一次尝试使用 Node。
我用它来查看一些文件和目录，然后我想停止它。并意识到我不知道怎么做。

请帮忙，只是关闭终端窗口（是的，我有一个 Mac OS X 10.6.8）并手动停止所有进程感觉不对，我认为应该有另一种方法。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-07T15:16:43.283

> 而`Control`+`C`用于终止带有信号的进程`SIGINT`，并且可以被程序拦截，因此它可以在退出之前清理自己，或者根本不退出。

来源：[https ://superuser.com/questions/262942/whats-different-between-ctrlz-and-ctrlc-in-unix-command-line](https://superuser.com/questions/262942/whats-different-between-ctrlz-and-ctrlc-in-unix-command-line)

# c# - 以编程方式执行 Ctrl-H

> ID：13272267
> 
> 赞同：0
> 
> 时间：2012-11-07T15:00:01.080
> 
> 标签：c#

> **可能重复：**
> [C#模拟按键](https://stackoverflow.com/questions/7307868/c-sharp-simulate-key-press)

当用户单击一个按钮时，我需要一种在 C# 中“键入” `Ctrl`+代码的方法。`H`我正在开发一个自定义功能区的 Word 插件。当用户单击我的“替换”按钮时，我希望显示替换对话框。我不知道如何进入该对话框，但`Ctrl`+`H`将其显示出来。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T15:02:17.537

看看[这里](https://stackoverflow.com/questions/1100285/how-to-detect-the-currently-pressed-key)处理不同的组合键。你在使用 VSTO 吗？

编辑：只需重新阅读并了解您正在查看键入这些键！我会相应调整！

编辑：[这里](https://stackoverflow.com/questions/7307868/c-sharp-simulate-key-press)的问题包括模拟按键。

# css - GWT FlexTable 滚动到特定行

> ID：13272268
> 
> 赞同：3
> 
> 时间：2012-11-07T15:00:02.177
> 
> 标签：css, gwt, scroll, flextable

有什么方法可以将 flextable 滚动到特定的选定行？

我想要实现的是我有两个窗格，`LeftView`并且`RightView`. 基于选择 上的项目，`RightView` `FlexTable`应滚动到 中的选定项目`LeftView`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T14:07:21.537

我猜您的 FlexTable 位于 ScrollPanel 内。

FlexTable 的每个单元格都有其他一些小部件。

所以你需要的是使用

ScrollPanel [void ensureVisible(UIObject item)](http://google-web-toolkit.googlecode.com/svn/javadoc/2.5/com/google/gwt/user/client/ui/ScrollPanel.html#ensureVisible%28com.google.gwt.user.client.ui.UIObject%29)

# java - Is it possible to programmatically configure JAXB?

> ID：13272288
> 
> 赞同：19
> 
> 时间：2012-11-07T15:01:12.903
> 
> 标签：java, jaxb

Say I have two JavaBeans `Person` and `Address`.

If I create a list of Person objects, I'd like to marshal to something like this:

```
<persons>
  <person>...</person>
</persons> 
```

It's possible to use the technique described here: [Using JAXB to unmarshal/marshal a List<String>](https://stackoverflow.com/questions/1603404/using-jaxb-to-unmarshal-marshal-a-liststring)

By annotating JaxbList with `@XmlRootElement(name = "persons")` and `@XmlElement(name = "person")`, then it's possible to marshal to the XML above.

But, it'd be nice to be able to reuse the same `JaxbList<T>` class to also marshal a list of `Address` objects. And in reality, I will have many other types of beans. I can go with something like:

```
<list>
   <item xsi:type="person" xmlns:xsi="http://www.w2.org/2001/XmlSchema-instance"></item>
</list> 
```

But, ideally, it'd be nice to have it replace "list" with the plural version of class name and "item" with the class name.

So, is it possible to programmatically configure the JaxbContext or something during runtime and essentially set the value of the `name` inside `@XmlRootElement` and `@XmlElement`?

Or any other way to get this working without having to write a separate implementation of `JaxbList` for every bean type? Maybe XmlJavaTypeAdapter can achieve this sort of thing?

**Update** @Blaise Doughan's solution accepted below works great. For my use case, I needed to go straight from Java object to XML, here's what worked (note this is not my full implementation, it's sort of just pseudo code for demonstration):

```
 //JAXBContext is thread safe and so create it in constructor or 
    //setter or wherever:
    ... 
    JAXBContext jc = JAXBContext.newInstance(Wrapper.class, clazz);
    ... 

    public String marshal(List<T> things, Class clazz) {

      //configure JAXB and marshaller     
      Marshaller m = jc.createMarshaller();
      m.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);

      //Create wrapper based on generic list of objects
      Wrapper<T> wrapper = new Wrapper<T>(things);
      JAXBElement<Wrapper> wrapperJAXBElement = new JAXBElement<Wrapper>(new QName(clazz.getSimpleName().toLowerCase()+"s"), Wrapper.class, wrapper);

      StringWriter result = new StringWriter();
      //marshal!
      m.marshal(wrapperJAXBElement, result);

      return result.toString();

    } 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-07T15:40:03.603

You could create a generic `Wrapper` object like the following:

**Wrapper**

You could create a generic wrapper class with a `List` property annotated with `@XmlAnyElement(lax=true)`. The type of the object used to populate this list will be based on its root element (see: [http://blog.bdoughan.com/2010/08/using-xmlanyelement-to-build-generic.html](http://blog.bdoughan.com/2010/08/using-xmlanyelement-to-build-generic.html)).

```
package forum13272288;

import java.util.*;
import javax.xml.bind.annotation.XmlAnyElement;

public class Wrapper<T> {

    private List<T> items = new ArrayList<T>();

    @XmlAnyElement(lax=true)
    public List<T> getItems() {
        return items;
    }

} 
```

**Address**

You will need to annotate the possible contents of the list with `@XmlRootElement`.

```
package forum13272288;

import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement
public class Address {

} 
```

**Person**

```
package forum13272288;

import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement
public class Person {

} 
```

**Demo**

The demo code below demonstrates how to use the `Wrapper` class. Since the root element can be different you will need to specify that you want to unmarshal to the wrapper class. Alternatively you could leverage the `@XmlElementDecl` annotation to associate multiple root elements with the wrapper class (see: [http://blog.bdoughan.com/2012/07/jaxb-and-root-elements.html](http://blog.bdoughan.com/2012/07/jaxb-and-root-elements.html)).

```
package forum13272288;

import javax.xml.bind.*;
import javax.xml.transform.stream.StreamSource;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Wrapper.class, Person.class, Address.class);
        Unmarshaller unmarshaller = jc.createUnmarshaller();
        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);

        StreamSource personsXML = new StreamSource("src/forum13272288/persons.xml");
        JAXBElement<Wrapper> wrapper1 = unmarshaller.unmarshal(personsXML, Wrapper.class);
        marshaller.marshal(wrapper1, System.out);

        StreamSource addressesXML = new StreamSource("src/forum13272288/addresses.xml");
        JAXBElement<Wrapper> wrapper2 = unmarshaller.unmarshal(addressesXML, Wrapper.class);
        marshaller.marshal(wrapper2, System.out);
    }

} 
```

**Output**

Below is the output from running the demo code. The files `persons.xml` and `addresses.xml` look just like there corresponding output.

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<persons>
    <person/>
    <person/>
</persons>
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<addresses>
    <address/>
    <address/>
</addresses> 
```

**For More Information**

*   [http://blog.bdoughan.com/2012/11/creating-generic-list-wrapper-in-jaxb.html](http://blog.bdoughan.com/2012/11/creating-generic-list-wrapper-in-jaxb.html)

# c# - Telerik RadGrid 使用多列

> ID：13272290
> 
> 赞同：2
> 
> 时间：2012-11-07T15:01:23.527
> 
> 标签：c#, asp.net, data-binding, telerik, radgrid

当我将数据源绑定到 RadGrid 时，使用多列的 RadGrid 出现问题。首先让我展示一些我正在尝试做的截图。

这是 Teleriks website under demos 的一个例子，多列（摘要列）是我想要实现的 ![来自 Telerik/demo 的 RadGrid 示例](../Images/6a24202de8b1570e1c2755a1eea09846.png)

这是我尝试将控件绑定到 DataSource 时遇到的异常

![RagGridException](../Images/44c4d5d9cf9d0c106e85128bc8aafcd6.png)

这是我在 ASP 页面中设置的 RadGrid。

![网格ASP](../Images/4f2f06d4f0c5ada920b2bbc8ad13e710.png)

首先，我不想在我的 asp 页面中绑定数据源。其次，我希望“产品”和“其他”列组仅用作摘要列，而不是绑定到数据源，因为这些列组仅用作其他列的标题。

是否有一种解决方法不允许 ColumnGroups 在普通列绑定时不绑定到 DataSource？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T05:12:25.187

首先，您的每一列都指定了一个不存在的 ColumnGroupName。您的两个组称为 OtherDetails 和 ProductDetails 而不是 Product 和 Other。更改它们以解决异常。

其次，GridColumGroups 只是组，因为它们没有绑定到数据源中的任何数据；它们只是为了美观。

# gridview - Sub Level 如何在不从 DevExpress Grid Control 的父主视图中继承它的情况下显示其波段

> ID：13272293
> 
> 赞同：0
> 
> 时间：2012-11-07T15:01:28.817
> 
> 标签：gridview, devexpress, gridcontrol

我正在使用 DevExpress 10.2 For WinForms 和 .Net Framework 4.0 我有一个包含带网格的表单，这个网格里面有主视图和级别，所以它听起来像另一个带状网格内的​​带状网格。如下所示： ![设计时的主视图](../Images/2b69e48c23115a26b3c4c68a0f35d1b7.png) 1 级子网格的主要问题还包含带，如下图所示： ![设计时的子级视图](../Images/2d9c872137317201cb3a6898555e909d.png)

但在运行时它检索父视图的波段而不是它的波段，如下所示： ![在此处输入图像描述](../Images/a0f3cdbe7cf52dda836a26e712a96239.png)

** 请注意，给 gridControl 的数据源是一个数据集，其中有两个数据表，使用**DataRelation**类相互连接

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T14:27:42.447

它通过添加以下代码解决

```
this.dgGeneralLedger.LevelTree.Nodes[0].RelationName = "Transaction";
                    this.dgGeneralLedger.ShowOnlyPredefinedDetails = true;
                    this.dgGeneralLedger.DataSource = result.DatSet.Tables["LedgerAccounts"]; 
```

# java - 开始一个新项目，如何在 java 中使用 hibernate 和 mysql 正确设置 UTC 时间

> ID：13272297
> 
> 赞同：0
> 
> 时间：2012-11-07T15:01:37.363
> 
> 标签：java, mysql, hibernate

所以我正在使用 java、hibernate 和 mysql (spring mvc) 开始一个新项目。

在数据库级别，我应该使用什么列类型？

在 java 级别，我相信我应该使用 Joda 时间。

我的用户表将存储他们的时间偏移量，然后我将使用数据库中的 UTC 值在 UI 级别对其进行转换/格式化。

使用hibernate，我真的需要那个joda time hibernate插件还是添加joda time就足够了？

有人能告诉我我需要什么方法，或者一篇用源代码讨论事情的文章吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T15:05:33.177

我认为您可以将数据库中的列定义为[TIMESTAMP](http://dev.mysql.com/doc/refman/5.1/en/datetime.html)`TimeStamp`并使用对象在 Hibernate 中映射。

在 Java 端使用`SimpleDateFormat`获取日期时间字符串，`UTC`如下所示：

```
 DateFormat formatter = new SimpleDateFormat("MM/DD/yyyy hh:mm a");
    formatter.setTimeZone(TimeZone.getTimeZone("UTC"));
    Date date = new Date(timeStamp.getTime());  
    String dateString = formatter.format(date);
    System.out.println(dateString); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T15:42:42.690

在数据库级别，您可以使用日期时间或时间戳（在 MySQL 中）作为列类型。在 Java 中，您应该使用 java.sql.Timestamp。

乔达时间是可能的，但不是绝对必要的。

您可以将数据库时间值存储为 UTC 或本地时间。我强烈建议您使用 UTC。在 jdbc 连接字符串（即在 hibernate.cfg.xml 中）中，您可以定义日期是 UTC 还是本地时间，如果需要，JDBC 会进行时区转换（UTC 或本地时间以外的其他时区不能在 JDBC 级别定义，如果使用会很麻烦）。

这样做后，您不需要特殊的时区转换方法，除了 Java 类 Calendar、Timezone 和 DateFormat 之外。

# struts - Struts 1 瓦片配置

> ID：13272298
> 
> 赞同：1
> 
> 时间：2012-11-07T15:01:39.263
> 
> 标签：struts, tiles

我正在学习struts 1。好的，它正在工作。

还有一些我不明白的瓷砖配置。

在网上几乎每个教程上，他们都说我只需`org.apache.struts.tiles.TilesPlugin`在 struts-config.xml 中添加插件。

但它不起作用......我还必须添加`org.apache.struts.tiles.TilesRequestProcessor`控制器。

为什么？我的项目有问题吗？我正在使用 1.3.10 struts 依赖项。

# c++ - 从另一个进程设置 HWND 的 lpfnWndProc

> ID：13272307
> 
> 赞同：3
> 
> 时间：2012-11-07T15:02:04.180
> 
> 标签：c++, winapi, hwnd

我有一个生成子进程的 win32 主应用程序。

目前我使用 CreateWindowEx 在主应用程序中创建一个 HWND，然后生成一个子进程。然后子进程使用 FindWindow 查找 HWND。我想在子进程中处理此 HWND 的 Window 消息（例如 WM_SIZE、WM_SETFOCUS 等），因此我尝试在子进程中设置 GWLP_WNDPROC 属性，但出现访问被拒绝错误，这是合理的。

我考虑直接在子进程中创建一个 HWND，但是当单击窗口时，主应用程序失去焦点，这对我的用例来说是不可接受的。

有没有人建议如何在让子进程处理消息的同时将注意力集中在主应用程序上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T16:17:03.267

在您的子进程中，您可以使用 WS_NOACTIVATE 调用 ShowWindow。调用 CreateProcess 函数时，您可以指定 STARTUPINFO，如下所示：

```
si.dwFlags = STARTF_USESHOWWINDOW;
si.wShowWindow = SW_SHOWNOACTIVATE; 
```

您甚至可以将子应用程序中的焦点显式返回给主窗口。

我想你想要有与铬类似的设计。如果您仔细查看他们的设计文档：

[http://www.chromium.org/developers/design-documents/inter-process-communication](http://www.chromium.org/developers/design-documents/inter-process-communication)

您会看到它们确实在进程之间实现了 IPC，但它们在主进程中没有单一的消息处理功能。

作为最后一个提示 - 与问题无关，在 windows 下阅读作业 - 这种机制允许对子进程进行更密切的控制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T15:40:58.197

`SetWindowsHookEx`与其中一个窗口消息挂钩一起使用（例如`WH_CALLWNDPROC)`，拦截发送到其他窗口的消息，然后按相关窗口的 HWND 进行过滤。

# android - Android 4.0.4 BLE API，BroadCom - 摩托罗拉

> ID：13272310
> 
> 赞同：5
> 
> 时间：2012-11-07T15:02:13.593
> 
> 标签：android, motorola, bluetooth-lowenergy, broadcom

我正在从事医疗保健项目 atm。我们正在做一个测试设置，我们使用带有 android 4.0.4 的 Motorola Razr Max 作为网关。手机的 BLE 将与 IT 的 BLE 芯片进行通信。选择摩托罗拉 Razr maxx 的原因是因为它在 [链接](http://processors.wiki.ti.com/index.php/Category%3aBluetoothLE?DCMP=blestack&HQS=ble-wiki#Smart_Phone_-_Applications_and_examples)上列出！哪些手机支持BLE。

但是，但摩托罗拉的 BLE API 从 android 4.0 升级 dosnt 工作。

我还在手机上尝试过 BroadComs BLE API - 但手机 BLE 芯片不支持它 - 所以我在这里没有得到票价。

所以我的问题在这里。你会建议我从这里做什么？

你知道我在 android 4.0.4 中使用 Broadcoms API 的任何 android 手机吗 - IT 说 HTC 1 X - 有一个工作的 BLE API - 有没有尝试过？

如果摩托罗拉要修复错误，有人吗？（丹麦的摩托罗拉开发人员支持团队——对自己的软件/硬件一无所知。）

**- - - 更新 - - - -**

我试图让摩托罗拉工作 - 现在它不会失败 BLE 支持 = 太好了 :)

我正在使用 Motorola_ICS_R2 API。但是当我运行配置文件示例时 - 它不会编译 - 因为 _ **BluetoothDevice.ACTION_GATT**和**BluetoothDevice.EXTRA_GATT**在我运行配置文件示例之前我缺少什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-13T18:00:58.513

[在这里](http://www.motorola.com/sites/motodev/us-en/motodev_lp.html)，您将找到在 ICS（冰淇淋三明治）上使用 Motorola Razr 所需的库和示例。寻找“**摩托罗拉手机 SDK 插件**”和“**摩托罗拉 ICS R2** ”。

该插件附带两个示例，您必须自己研究它们，那里没有实际的 API 文档，但是您可以[在此处](http://www.tekritisoftware.com/how-to-implement-ble-in-android)找到 API 工作原理的正确解释。

我可以向您保证，API 示例在*TI 的 CC2540DVK* Keyfob 和*Motorola Razr (XT910)*上工作得相对较好。您所要做的就是注意使用有效的 UUID！

**...更新...**

使用**Android SDK (v20)**和**Motorola ICS R2**示例在**Eclipse (Indigo)中重新开始：**

 ****1.  在 Package Explorer（右键单击）==> Import ==> Existing Android Code Into Workspace
2.  根目录：...\Motorola_ICS_R2\samples\Motorola_BLE_profile_sample（复制到工作区）
3.  在项目（右键单击）==> 属性 ==> Java 构建路径/库 ==> 删除所有 jar 甚至 Android 库
4.  在 Java 构建路径/库 ==> 添加外部罐子：...\Motorola_ICS_R2\libs\BluetoothGatt.jar & BluetoothGattService.jar
5.  在项目上（右键单击）==> Android 工具 ==>**修复项目属性**
6.  现在选择您的传感器设备的现有主要服务，即**0x180A**（设备信息）：

    `public static final ParcelUuid HRM = ParcelUuid .fromString("0000180A-0000-1000-8000-00805f9b34fb");`

7.  构建并运行

这取决于您的传感器设备您对样本的了解程度，但您至少应该获得连接并获得一些特征。请参阅 LogCat 输出。

问候，
彼得万潘森

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T19:22:08.543

我有与这个非常相似的问题。

我使用 Android 摩托罗拉 XT910 Android 4.0.4 运行。

配置（在我的标准 Eclipse 和清晰的系统上 - 两者都相同）

（
_
_
_
_
_
_使用 BLE112 开发板进行测试，UUID 设置为：

```
<service uuid="180d">
   <uri>org.bluetooth.service.health_thermometer</uri>
   <include id="manufacturer" />
   <description>Health Thermometer Service</description>
   <!-- temp: 2a1c  HRM:2a37 -->
   <characteristic uuid="2a37" id="xgatt_temperature_celsius"> 
```

只需采样即可查看任何内容）

我收到了这个问题

1）`device.getName()`返回`null`，我必须评论它（其余例如绑定是可以的）
2）设备只能与 HRM UUID 连接（我在示例代码中更改了 2 个位置）
3）总是`return`（在`BluetoothGatt.CONNECT_COMPLETE`）`FAILURE`

当我尝试时，`Motorola_BLE_profile_sample`我收到了与 MIR 类似的错误 `BluetoothDevice.ACTION_GATT`，`BluetoothDevice.EXTRA_GATT`并且`getGattServices`不可见（在 ICS_R2 [Android 4.0.3]->android.jar->android.bluetooth->BluetoothDevice 树中）？

**我做错了什么？**

- - - - - 更新

真烦人！**不要阅读摩托罗拉常见问题解答** 如上所述！删除所有 jar（包括 ICS2 中的这个）并修复项目 THANX ！****

# ios - UICollectionView 动画数据更改

> ID：13272315
> 
> 赞同：84
> 
> 时间：2012-11-07T15:02:21.327
> 
> 标签：ios, uicollectionview

在我的项目中，我使用 UICollectionView 来显示图标网格。

用户可以通过单击分段控件来更改排序，该分段控件调用具有不同 NSSortDescriptor 的核心数据的提取。

**数据量总是相同的，只是在不同的部分/行中结束：**

```
- (IBAction)sortSegmentedControlChanged:(id)sender {

   _fetchedResultsController = nil;
   _fetchedResultsController = [self newFetchResultsControllerForSort];

   NSError *error;
   if (![self.fetchedResultsController performFetch:&error]) {
       NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
   }

   [self.collectionView reloadData];
} 
```

问题是 reloadData 不会为更改设置动画， UICollectionView 只是弹出新数据。

我应该跟踪单元格在更改之前和之后的哪个 indexPath，并使用 [self.collectionView moveItemAtIndexPath: toIndexPath:] 来执行更改的动画还是有更好的方法？

我对子类化 collectionViews 没有太多了解，所以任何帮助都会很棒......

谢谢，比尔。

* * *

## 回答 #1

> 赞同：146
> 
> 时间：2013-03-01T19:51:53.923

包裹似乎不会导致单节集合视图动画`-reloadData`。`-performBatchUpdates:`

```
[self.collectionView performBatchUpdates:^{
    [self.collectionView reloadData];
} completion:nil]; 
```

但是，此代码有效：

```
[self.collectionView performBatchUpdates:^{
    [self.collectionView reloadSections:[NSIndexSet indexSetWithIndex:0]];
} completion:nil]; 
```

* * *

## 回答 #2

> 赞同：74
> 
> 时间：2012-11-28T17:44:19.830

reloadData 没有动画，当放入 UIView 动画块时也不会可靠地这样做。它想在 UICollecitonView performBatchUpdates 块中，所以尝试更像：

```
[self.collectionView performBatchUpdates:^{
    [self.collectionView reloadSections:[NSIndexSet indexSetWithIndex:0]];
} completion:^(BOOL finished) {
    // do something on completion 
}]; 
```

* * *

## 回答 #3

> 赞同：68
> 
> 时间：2013-05-10T16:50:23.693

这就是我为重新加载所有部分所做的动画：

```
[self.collectionView reloadSections:[NSIndexSet indexSetWithIndexesInRange:NSMakeRange(0, self.collectionView.numberOfSections)]]; 
```

**斯威夫特 3**

```
let range = Range(uncheckedBounds: (0, collectionView.numberOfSections))
let indexSet = IndexSet(integersIn: range)
collectionView.reloadSections(indexSet) 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2018-02-27T21:51:19.363

对于 Swift 用户，如果您的 collectionview 只有一个部分：

```
self.collectionView.performBatchUpdates({
                    let indexSet = IndexSet(integersIn: 0...0)
                    self.collectionView.reloadSections(indexSet)
                }, completion: nil) 
```

如[https://stackoverflow.com/a/42001389/4455570所示](https://stackoverflow.com/a/42001389/4455570)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-09-30T10:25:58.637

在 iOS 9 模拟器上重新加载块内的整个集合视图`performBatchUpdates:completion:`会为我制作一个有问题的动画。如果您有特定的`UICollectionViewCell`要删除的内容，或者如果您有它的索引路径，则可以调用`deleteItemsAtIndexPaths:`该块。通过使用`deleteItemsAtIndexPaths:`，它可以制作出流畅而漂亮的动画。

```
UICollectionViewCell* cellToDelete = /* ... */;
NSIndexPath* indexPathToDelete = /* ... */;

[self.collectionView performBatchUpdates:^{
    [self.collectionView deleteItemsAtIndexPaths:@[[self.collectionView indexPathForCell:cell]]];
    // or...
    [self.collectionView deleteItemsAtIndexPaths:@[indexPath]];
} completion:nil]; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-19T18:20:46.643

帮助文本说：

> 调用此方法以重新加载集合视图中的所有项目。这会导致集合视图丢弃任何当前可见的项目并重新显示它们。为了提高效率，集合视图只显示那些可见的单元格和补充视图。如果集合数据由于重新加载而缩小，集合视图会相应地调整其滚动偏移量。您不应在插入或删除项目的动画块中间调用此方法。插入和删除会自动导致表的数据得到适当的更新。

我认为关键部分是“导致集合视图丢弃任何当前可见的项目”。它将如何为它丢弃的物品的运动设置动画？

# matlab - 在matlab中的加权图中找到K-最远的邻居

> ID：13272316
> 
> 赞同：0
> 
> 时间：2012-11-07T15:02:22.813
> 
> 标签：matlab, graph, neighbours

我想在给定的无向加权图中找到 K 最远的邻居（该图以稀疏权重矩阵的形式给出，但我可以使用建议的表示形式）。只是为了确保问题得到明确定义：我想找到彼此之间距离最大的 k 个节点。接近最优集合的解决方案也可以 - 我只需要它来找到网格中的一些最远点:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T10:32:29.003

假设您只是在寻找一个体面的解决方案，我会推荐一个简单的解决方案，类似于旅行商问题的“最远插入”起始位置：

*   给空集加 1 点，最好在角落或边缘加 1 点（当然你可以全部尝试）
*   将最远的点添加到集合中（增加与集合中当前点的最大距离）
*   不断重复上一步，直到集合中有k个点

它不会是最佳的，但可能不是很糟糕。

如果您想对此进行改进，您可以使用启发式方法来改进结果，例如：

*   考虑点 1 到 j 的集合，j
*   尝试所有可能的点来代替这 j 个点
*   记录最好的解决方案
*   考虑省略了点 2 到 j+1 的集合

等等

此外，如果 k 不是太大，比如小于 5，并且总点数不是太大，比如小于 100，那么计算所有可能的组合可能会更容易。这是假设可以有效地完成范数计算。

编辑：

一旦您知道要实现此功能，常规的继续方法就是找到类似的内容并对其进行一些编辑以满足您的需要。如果您在此页面上向下滚动，您应该会找到最远插入的示例。编辑它以遵循您对“远”的测量应该是可以管理的。

[http://snipplr.com/view/4064/shortest-path-heuristics-nearest-neighborhood-2-opt-farthest-and-arbitrary-insertion-for-travelling-salesman-problem/](http://snipplr.com/view/4064/shortest-path-heuristics-nearest-neighborhood-2-opt-farthest-and-arbitrary-insertion-for-travelling-salesman-problem/)

# matlab - 如何将点/向量绘制为点？

> ID：13272317
> 
> 赞同：0
> 
> 时间：2012-11-07T15:02:24.267
> 
> 标签：matlab, plot

```
p = [3,3]
plot(p, 'x') 
```

这奇怪地产生了这个：![在此处输入图像描述](../Images/3e3aeab530f718d8e6e943c621adc10b.png)

我希望它是情节上 x=3/y=3 的一个点。如何？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T15:11:43.540

@mathematician1975 是对的，但我觉得这需要更多解释：

就像[官方文档](http://www.mathworks.com/help/matlab/ref/plot.html)所说：

> `plot(Y)`当为实数时，绘制 的列`Y`与每个值的索引。`Y`

所以事实上，将`plot(p, 'x')`每个值绘制在`p`它的索引中并不奇怪，*即*点 (1, 3) 和 (2, 3)。

这在某些情况下实际上很方便（当您希望 x-coordiantes 成为运行索引时），但在您的情况下却不是。要正确绘制点`p`，请使用语法`plot(X, Y)`，即：

```
plot(p(2), p(1), 'x') 
```

（这里我假设 y 坐标是 中的第一个`p`，但如果是 x 坐标，您可以交换输入参数的位置）。

在一般情况下，如果`p`是具有两列的矩阵（例如，第一列包含所有 y 坐标，第二列包含所有 x 坐标），您可以像这样绘制所有点：

```
plot(p(:, 2), p(:, 1), 'x') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T15:04:48.537

您需要每个坐标的向量。例如：

```
x = [3,4]
y = [5,6]
plot(x,y,'x') 
```

将绘制点 (3,5) 和 (4,6)

# sql - MS Access 2010 中的列数？

> ID：13272320
> 
> 赞同：-2
> 
> 时间：2012-11-07T15:02:33.477
> 
> 标签：sql, ms-access, ms-access-2010

我有 52 个是/否列参加每周 .. 我想查询以了解其中包含“是”或“否”的列数...有人可以帮我解决这个问题吗？如果您知道任何用于 Access 查询的推荐站点或社区，请告诉我。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T15:06:32.253

我认为这是一个糟糕的设计。它打破了第一范式。

我可以设想一个用户表、一个会议表和一个多对多 JOIN 表，将用户与他们参加的会议联系起来。

查询所有会议会告诉您可以参加的日期。

使用 user_meeting JOIN 表加入用户表可以告诉您给定用户参加了哪些会议。

现在您有两组：所有可能的会议和给定用户参加的日期。如果你做了一个设定的差异，你会看到用户没有参加的潜在日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T16:31:34.957

这是如何使用列表的粗略草图。毫无疑问，还有其他更好的方法，但这只是一个开始。

三周的差距：

```
SELECT b.UserID, b.WeekNo, (SELECT Top 1 WeekNo 
    FROM (SELECT * FROM table2 WHERE Attended=True) a 
    WHERE a.WeekNo > b.WeekNo) AS [next]
FROM (SELECT * FROM table2 WHERE Attended=True)  AS b
WHERE (((b.UserID)=1) AND (((SELECT Top 1 WeekNo 
    FROM (SELECT * FROM table2 WHERE Attended=True) a 
    WHERE a.WeekNo > b.WeekNo))>[b].[WeekNo]+3))
ORDER BY b.WeekNo; 
```

出席人数：

```
SELECT Table2.UserID, Sum(Abs([Attended])) AS Attend
FROM Table2
GROUP BY Table2.UserID; 
```

桌子：

```
UserID  WeekNo  Attended
1       1       True
1       2       True
1       3       True
1       4       True
1       5       False
1       6       False
1       7       True
1       8       True
1       9       False
1       10      False
1       11      False
1       12      True
1       13      True
1       14      True 
```

# .net - 如何完全避免本地化的 .NET 异常消息

> ID：13272323
> 
> 赞同：43
> 
> 时间：2012-11-07T15:02:46.230
> 
> 标签：.net

当我的 .NET 应用程序中发生错误时，我会收到一条（在我的情况下）瑞典语的异常消息。这对于大多数用途来说是无用的，因为。

*   该消息通常只是原始（英文）异常消息 [1] 的翻译不佳的版本

*   异常消息主要用于诊断问题，这通常包括在谷歌上搜索错误消息。这意味着猜测或使用网络服务来查找原始英文消息。

[1] 我不是在开玩笑。示例：绑定失败上下文中的“调用程序集”被完全混淆。它被翻译为“称为装配”，因为英语如何使用相同的词来表示正在*调用*的那个和它*正在调用*的那个。就好像有人用字典逐字翻译一样。

所以我想要的是：我希望能够在非英语 Windows 安装上始终获得英语异常消息（我*不想*更改应用程序的线程文化）。

有一个类似的问题（[英语中的异常消息？](https://stackoverflow.com/questions/209133/c-sharp-exception-messages-in-english)），但这是在日志记录的概念中。在那个层面上，我可以改变线程文化。

但我希望更改是全局性的，并且还包括“不是我的代码”异常。

有什么方法可以配置或“破解”（例如通过替换资源文件）？我是唯一一个认为翻译异常消息是 .NET 中可怕的设计缺陷的人吗？

如果这是部分咆哮和部分问题，我很抱歉。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T01:00:45.517

删除任何 .NET 语言包。据此（“.NET Framework 4.5[语言](http://www.microsoft.com/en-us/download/details.aspx?id=30667)包包含翻译的错误消息和其他非英语语言的 UI 文本。如果您不安装语言包，此文本将以英语显示”），应该足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-01T09:22:51.743

在 Windows 10 上，您可以执行此操作，但您需要更改显示语言。

[![语言设置](../Images/e757d1661566387e6e507b1565b40482.png)](https://i.stack.imgur.com/yVPpEl.png)

然后你需要重新设置你的日期时间设置

[![日期设置](../Images/cfeefa347dc07bb54e79b3b7abd5a292.png)](https://i.stack.imgur.com/JTFQGl.png)

您将拥有英语系统，但对于大多数程序员来说这并不重要。

# mysql - MySQL Trigger on UPDATE 未将小时数据发送到统计表

> ID：13272330
> 
> 赞同：1
> 
> 时间：2012-11-07T15:03:14.987
> 
> 标签：mysql, eventtrigger

我有一个 MySQL 触发器，可以根据正在运行的 UPDATE 查询将小时数更新到统计表中。

触发器是：

```
DELIMITER //

CREATE TRIGGER update_stats AFTER UPDATE ON user_hours 

FOR EACH ROW

BEGIN

  IF NEW.hours_committed = 'completed' THEN

    INSERT INTO hours_statistics (user_id, opportunity_id, completed_hours) VALUES

      (OLD.user_id, OLD.opportunity_id, -OLD.completed_hours),

      (NEW.user_id, NEW.opportunity_id, +NEW.completed_hours)

    ON DUPLICATE KEY UPDATE

      completed_hours = completed_hours + VALUES(completed_hours);

  END IF;

END// 
```

工作查询：

```
UPDATE user_hours JOIN user_calendar USING (user_calendar_id, opportunity_id)
SET    user_hours.completed_hours = agreed_hours,
       user_hours.hours_committed = 'completed'
WHERE  user_hours.hours_committed = 'accepted' 
   AND user_hours.completed_hours IS NULL
   AND user_calendar.date_start = CURRENT_DATE(); 
```

我有另一个类似于上面的查询，它更新同一个表，但有一点不同，检查的 completed_hours 不为空。查询如下：

```
UPDATE user_hours JOIN user_calendar USING (user_calendar_id, opportunity_id)
SET    user_hours.hours_committed = 'completed'
WHERE  user_hours.hours_committed = 'accepted' 
   AND user_hours.completed_hours IS NOT NULL
   AND user_calendar.date_start = '2012-08-23' 
```

以上触发了更新触发器，但是在统计表中，对于最后一次更新查询，已完成的小时数显示为 0。

有更好的触发器知识的人可以帮助我吗？

谢谢，

标记

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T11:56:09.180

Solution was:

```
DELIMITER //

CREATE TRIGGER update_stats AFTER UPDATE ON user_hours 

FOR EACH ROW

BEGIN

IF  NEW.hours_committed =  'completed'  THEN
IF OLD.completed_hours IS NULL THEN
BEGIN
INSERT INTO hours_statistics (user_id,opportunity_id,completed_hours)
VALUES
(OLD.user_id, OLD.opportunity_id, -OLD.completed_hours),
(NEW.user_id, NEW.opportunity_id, +NEW.completed_hours)
ON DUPLICATE KEY UPDATE
completed_hours = completed_hours + VALUES(completed_hours);
END;
ELSE
INSERT INTO hours_statistics (user_id,opportunity_id,completed_hours)
VALUES
(NEW.user_id, NEW.opportunity_id, +NEW.completed_hours)
ON DUPLICATE KEY UPDATE
completed_hours = completed_hours + VALUES(completed_hours);
END IF;
END  IF;

END// 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T17:47:40.720

在 INSERT 中，您正在执行两个行操作 - 一个减法和一个加法。

当您有重复项时，ON DUPLICATE KEY 将运行两次 - 一次用于减法，一次用于加法。

在您的第二个查询中，completed_hours 的值没有变化，因此 OLD 和 NEW 将是相同的。您将添加该值，然后减去该值，得到 0。

也许 ：）

如果不是，那么您在某处遇到了 NULL 问题。

编辑：我不确定我是否清楚。这是一个更明确的尝试：

您进行第二次更新：

```
UPDATE user_hours JOIN user_calendar USING (user_calendar_id, opportunity_id)
SET    user_hours.hours_committed = 'completed' ... 
```

假设这找到一个要更新的 user_hours 行，如下所示：

```
user_id = 1
opportunity_id = 2
hours_committed = 'accepted' 
completed_hours = 10 
```

然后它触发触发器，它想要运行两个 INSERTS：

```
INSERT INTO hours_statistics (user_id, opportunity_id, completed_hours) VALUES (1,2,-10)

INSERT INTO hours_statistics (user_id, opportunity_id, completed_hours) VALUES (1,2,+10) 
```

如果违反了 UNIQUE KEY，它将运行 ON DUPLICATE KEY 部分，两次，有效地执行：

```
UPDATE hour_statistics set completed_hours = completed_hours + -10 WHERE...

UPDATE hour_statistics set completed_hours = completed_hours + 10 WHERE... 
```

我试图提出的观点是最后两个应该相互抵消。如果原始 hour_statistics.completed_hours 为 0，则触发器触发后将为 0。

这次有意义吗？

# asp.net - ASP.NET Url 重写子域 Wordpress II7 Web.Config

> ID：13272334
> 
> 赞同：1
> 
> 时间：2012-11-07T15:03:36.707
> 
> 标签：asp.net, wordpress, iis-7, url-rewriting, web-config

我有一台在 IIS7 服务器上托管各种 asp.net 站点的服务器。其中一些网站在名为 blog 的文件夹中拥有 wordpress 博客（显然是用 PHP 编写的）。由于安全问题，我们需要将那些 wordpress 博客移动到 linux 服务器上。

因此，我们现在有[http://blog.domainname.com/](http://blog.domainname.com/)而不是[http://www.domainname.com/blog](http://www.domainname.com/blog)，它有博客 url。

唯一的问题是，由于 SEO 原因，我们需要博客与主站点（用 ASP.NET 编写）位于同一域中。

我的问题是，有没有办法重写 url，这样如果有人输入 wordpress 链接，类似于：

[http://www.domainname.com/blog/index.php/archives/category/mycategory](http://www.domainname.com/blog/index.php/archives/category/mycategory)

我可以使用 web config URL rewrite 来让上面输入的 URL 实际上指向

[http://blog.domainname.com/index.php/archives/category/banking](http://blog.domainname.com/index.php/archives/category/banking)

我无法进行任何类型的重定向。它必须是重写，我自己尝试过纠正，但一直无法。子域是我无法通过的重写的一部分。

有没有人尝试过这样做？如果没有，我有没有更好的方法来解决这个问题。

请记住，由于安全原因，博客和 asp.net 站点不能在同一台服务器上，但它们必须保持相同的域名。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T16:03:05.190

您不能只进行重写，因为您要重写的 URL 位于另一个域/网站上。重写仅适用于同一网站。

[您必须使用ARR 模块](http://www.iis.net/learn/extensions/planning-for-arr/using-the-application-request-routing-module)将 IIS 设置为反向代理服务器。结合 URL 重写模块，您将能够无形地转发对`http://www.domainname.com/blog/*`to 的所有请求`http://blog.domainname.com/*`。

另请注意，您必须设置出站重写才能将由 Wordpress 生成的 URL 改回（从`http://blog.domainname.com/*`返回到`http://www.domainname.com/blog/*`）。

请参阅本教程的示例：[使用 URL 重写 v2 和应用程序请求路由的反向代理](http://www.iis.net/learn/extensions/url-rewrite-module/reverse-proxy-with-url-rewrite-v2-and-application-request-routing)。

# node.js - 是否有任何 node.js 的模板引擎非常像 JSP？

> ID：13272335
> 
> 赞同：4
> 
> 时间：2012-11-07T15:03:39.920
> 
> 标签：node.js, jsp, express, tiles, template-engine

我需要一个真正的jsp-mode模板引擎，不像jade和ejs：

1.  只需在网页文件夹中放置一个新的页面文件，在浏览器中输入它的uri，它就会显示
2.  删除这个页面文件，它就会消失
3.  并支持`<%include %>`像jsp（支持查询参数）

如果有更多的财富，它会支持像apache tile这样的tile。在 apache tile 中，我可以编写一个模板页面，例如

```
main.jsp:
<%@ taglib uri="http://tiles.apache.org/tags-tiles" prefix="tiles" %>
<tiles:insertTemplate template="/layout/simple.jsp">
  <tiles:putAttribute name="header"  value="/common/header.jsp" />
  <tiles:putAttribute name="left" value="/common/leftmenu.jsp" />
  <tiles:putAttribute name="body" value="<%= request.getParameter("body")%>" />
  <tiles:putAttribute name="footer"   value="/common/footer.jsp" />
</tiles:insertTemplate> 
```

现在输入`main.jsp?body=content1.jsp`，您将看到 content.jsp 出现在 main.jsp 中，穿着 layout/simple.jsp。

我可以在运行时完成以上所有操作，无需重新启动网络服务器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T20:08:03.000

ejs 可能是最接近的东西。 [https://github.com/visionmedia/ejs](https://github.com/visionmedia/ejs)

./views/account

```
<% if (user) { %>
    <h2><%= user.name %></h2>
<% } %> 
```

./routes/account.js：

```
 res.render('account', { user: user }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T08:58:35.923

我几乎没有实现这一点。让我们在 express 的 ejs 示例中添加一些内容。[https://github.com/visionmedia/express](https://github.com/visionmedia/express)

修改index.js，先导入vm和fs

```
var express = require('express'),
    fs = require('fs'), 
    vm = require('vm'); 
```

然后，路由所有 *.shtml （任何扩展名）

```
app.get('*.shtml', function(req, res){
  var url = req._parsedUrl.pathname;
  url = url.substring(1, url.length - 6);
  //console.log(req);
  var jsPath = 'controllers/' + url + '.js';
  //console.log('jsPath ' + jsPath);
  if(fs.existsSync(jsPath)){
      var code = fs.readFileSync(jsPath);
      var context = vm.createContext({req : req, res : res, url : url, console : console});
      vm.runInContext(code, context, jsPath);
  } else {
      res.render(url, req.query);
  }  
}); 
```

现在，测试。

节点 index.js，现在我们在运行时。

在视图中放置一个名为 test.html 的新文件

```
test.html:

<% include header.html %>

<h1>Test</h1>

<% include footer.html %> 
```

type `test.shtml?title=Test Page`，所以这个页面转向显示。并在 header.html 中绑定查询参数*标题。*

好吧，但是我们可以在页面中做更少的事情，因为渲染是由 res.render() 控制的。如果我们想在渲染之前做一些事情，或者直接输出一些东西而不是 html 内容，让我们看看。

创建一个名为 controllers 的文件夹，然后创建一个名为 test.js 的文件。

```
test.js
console.log('do something....');
res.render(url, req.query); 
```

再次输入`test.shtml?title=Test Page`，您将在控制台上看到 test.js 输出 'do someting....'，然后它会在浏览器中呈现同名页面。

所有控制器的js和html文件都是动态的~~~

因此主题模式还不是很接近 Apache Tiles。:(

# windows-phone-7 - 如何以动画方式将项目添加到 Silverlight 工具包 WrapPanel

> ID：13272337
> 
> 赞同：1
> 
> 时间：2012-11-07T15:03:40.637
> 
> 标签：windows-phone-7, silverlight-toolkit, wrappanel

我正在为 WP7 应用程序构建 eyecandy。

我有一个 WrapPanel，我正在代码中添加项目。我希望这些项目不只是弹出，而是一个一个地滑入 WrapPanel。我将如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T21:31:01.243

[我推荐的一种非常简单的方法是FluidMoveBehavior](http://msdn.microsoft.com/en-us/library/ff979339%28v=expression.40%29.aspx) ，您可以使用它来使事情变得更加简单，非常值得研究您的需求，因为它可以很好地完成您正在寻找的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T15:23:27.753

您应该创建一个为元素设置动画的 [故事板，并在添加项目时播放该故事板。](http://msdn.microsoft.com/en-us/library/cc189019%28v=vs.95%29.aspx)

Blend 是创建故事板的好工具。这是一个关于[如何使用 Blend 创建故事板](http://www.c-sharpcorner.com/uploadfile/mamta_m/creating-and-using-storyboards-in-blendsilverlight-part-i/)的教程。

# android - 如何在不调用 Dismiss 的情况下取消 ProgressDialog？

> ID：13272339
> 
> 赞同：3
> 
> 时间：2012-11-07T15:03:42.603
> 
> 标签：android, progressdialog, toast, dismiss

当我按下取消按钮时，会出现取消的吐司和解雇的吐司。我该如何解决这个问题？谢谢。

编辑：按下取消按钮时我需要一个 Toast，当 ProgressDialog 正确完成时（当我关闭它时）我需要另一个不同的 Toast。但是现在，当 ProgressDialog 正确完成时，我有正确的 Toast，但是当我按下取消按钮时，结果都是 Toast。（这是一个 ProgressDialog，其条形增加 5 以完成）。对不起我的英语：S

```
myPd_bar.setOnCancelListener(new OnCancelListener(){

                public void onCancel(DialogInterface dialog) {
                    // TODO Auto-generated method stub
                    Toast.makeText(MainActivity.this,"Cancelled.",
                            Toast.LENGTH_LONG).show();

                }});

            myPd_bar.setOnDismissListener(new OnDismissListener() {

                public void onDismiss(DialogInterface arg0) {
                    // TODO Auto-generated method stub
                    Toast.makeText(getApplicationContext(), "Done.",
                            Toast.LENGTH_SHORT).show();
                }
            });
            myPd_bar.setButton("Cancel", new DialogInterface.OnClickListener() 
            {
                public void onClick(DialogInterface dialog, int which) 
                { 
                    myPd_bar.cancel();
                }
            });

            myPd_bar.show(); 
```

**EDIT2：最终解决方案：**

```
private int sw = 0;

myPd_bar.setOnDismissListener(new OnDismissListener() {

                    public void onDismiss(DialogInterface arg0) {

                        if (sw==0){
                        Toast.makeText(getApplicationContext(), "Envio Realizado Correctamente.",
                                Toast.LENGTH_SHORT).show();
                        }
                        myPd_bar.dismiss();
                            sw=0;
                        }
                });

                //Botón Cancelar.
                myPd_bar.setButton("Cancelar", new DialogInterface.OnClickListener() 
                {
                    public void onClick(DialogInterface dialog, int which) 
                    { 
                        sw = 1;
                        //Mostramos el mensaje al cancelar.
                        Toast.makeText(MainActivity.this,"Envío Cancelado.", Toast.LENGTH_LONG).show();
                        myPd_bar.cancel();
                    }
                });

                myPd_bar.show(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T15:21:41.730

[文档：](http://developer.android.com/reference/android/app/Dialog.html)

> 公共无效取消（）
> 
> 取消对话框。这与调用dismiss() 基本相同，但它也会调用您的DialogInterface.OnCancelListener（如果已注册）。

如果您不想同时显示，只需使用`dismiss()`. 当您取消时，它首先关闭，然后取消对话框。这会导致两个侦听器都被触发。真的没有办法解决它，除非你想重写`cancel()`它自己并实现你自己的方法。不过，我看不出这样做的充分理由。

另外，我支持 Egor 的评论。如果您*确实*需要“练习”，请准确解释您要做什么。

**编辑：**根据您在下面的评论，我建议您根本不要使用听众。如果您在解除/取消时需要做的只是显示敬酒，只需直接创建敬酒。

```
myPd_bar.setButton("Cancel", new DialogInterface.OnClickListener() 
{
    public void onClick(DialogInterface dialog, int which) 
    { 
        Toast.makeText(MainActivity.this,"Cancelled.", Toast.LENGTH_LONG).show();
        myPd_bar.cancel();
    }
});

void dismissDialog(Context myContext)
{
    Toast.makeText(myContext, "Done.", Toast.LENGTH_SHORT).show();
    myPd_bar.dismiss();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T15:21:32.640

打电话之前

```
myPd_bar.show(); 
```

做这个，

```
myPd_bar.setCancelable(true); 
```

更多信息： http: [//developer.android.com/reference/android/app/Dialog.html#setCancelable](http://developer.android.com/reference/android/app/Dialog.html#setCancelable(boolean) (boolean )

# ios - 如果要使用主故事板文件，应用程序委托必须实现 window 属性

> ID：13272346
> 
> 赞同：14
> 
> 时间：2012-11-07T15:04:09.323
> 
> 标签：ios, uiviewcontroller, uinavigationcontroller, uiwindow, appdelegate

我以编程方式实现一个列表视图控制器。当我尝试运行该项目时，出现错误：

```
2012-11-07 22:46:34.719 myTableViewControl[12021:c07] The app delegate must implement the         window property if it wants to use a main storyboard file.
2012-11-07 22:46:34.722 myTableViewControl[12021:c07] -[AppDelegate setWindow:]:     unrecognized selector sent to instance 0x7674e70
2012-11-07 22:46:34.723 myTableViewControl[12021:c07] *** Terminating app due to uncaught     exception 'NSInvalidArgumentException', reason: '-[AppDelegate setWindow:]: unrecognized     selector sent to instance 0x7674e70'
*** First throw call stack:
(0x1c8e012 0x10cbe7e 0x1d194bd 0x10df7ea 0x1c7dcf9 0x1c7d94e 0x1d60 0x107b7 0x10da7     0x11fab 0x23315 0x2424b 0x15cf8 0x1be9df9 0x1be9ad0 0x1c03bf5 0x1c03962 0x1c34bb6 0x1c33f44     0x1c33e1b 0x117da 0x1365c 0x1bd2 0x1b05)
libc++abi.dylib: terminate called throwing an exception
(lldb) 
```

当我运行代码时，它挂在 main.m 上并显示

> “线程 1：信号 SIGABRT”

```
@autoreleasepool {return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class])); 
```

我的代码如下： AppDelegate.h

```
//
//  AppDelegate.h
//  myTableViewControl
//
//  Created by Max on 12-11-5.
//  Copyright (c) 2012年 Max. All rights reserved.
//

#import <UIKit/UIKit.h>

@interface AppDelegate : UIResponder <UIApplicationDelegate>

@property (strong, nonatomic) UINavigationController *navigationController;

@end 
```

AppDelegate.m

```
//
//  AppDelegate.m
//  myTableViewControl
//
//  Created by Max on 12-11-5.
//  Copyright (c) 2012年 Max. All rights reserved.
//

    #import "AppDelegate.h"
    #import "firstViewController.h"

@implementation AppDelegate
@synthesize navigationController;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:    (NSDictionary *)launchOptions
{
    // create the base window
    UIWindow *window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    window.backgroundColor = [UIColor greenColor];
    self.window = window;

    [window release];

    // this is the home page from the user's perspective

    FirstViewController *fvc = [[FirstViewController alloc] init];

    UINavigationController *nc = [[UINavigationController alloc]initWithRootViewController:fvc];
    self.navigationController = nc;

    [fvc release];
    [nc release];

    // show them
    [self.window addSubview: nc.view];
    [self.window makeKeyAndVisible];

    return YES;
}

@end 
```

FirstViewController 是列表视图控制器。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-07T15:07:58.100

您正在将窗口创建为局部变量，然后尝试使用`self.window`. 使其成为财产。

# php - SQL 仅选择行一次

> ID：13272347
> 
> 赞同：0
> 
> 时间：2012-11-07T15:04:11.133
> 
> 标签：php, mysql

我有这样的表`pro`：

```
id    category   details
1         f        weqweq
2         m        dqweq
3         f        xcxzc
4         m        eqweqw
5         f        asweq
6         c        xzsda 
```

现在，如果我尝试类似：

```
SELECT DISTINCT category FROM pro 
```

我只得到`m`和`c`

如果我尝试：

```
 SELECT category FROM pro GROUP BY category 
```

我只得到`f`和`c`

我如何查询`m,f,c`只获取一次？！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T15:05:12.193

使用[GROUP BY](http://dev.mysql.com/doc/refman/5.0/en/group-by-modifiers.html)：

```
SELECT * FROM pro GROUP BY `category` 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T15:05:50.690

```
select category from pro group by category 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-07T15:11:32.963

这是您的 PHP 实现中的一个问题。

您的查询将获得您的所有类别。

```
SELECT DISTINCT category FROM pro 
```

看看这里：

[http://sqlfiddle.com/#!2/b81e0/2](http://sqlfiddle.com/#!2/b81e0/2)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-07T15:11:58.440

试试这个，

```
SELECT  a.*
FROM    pro a
        INNER JOIN
        (
            SELECT  category, MIN(details) minDetail
            FROM    pro
            GROUP BY    category
        ) b ON a.category = b.category AND
                a.details = b.minDetail 
```

*   [**SQLFiddle 演示**](http://sqlfiddle.com/#!2/b81e0/3)

*后续问题：`details`列的输出是什么？*

# winforms - 在不关闭应用程序的情况下关闭表单并打开另一个表单

> ID：13272348
> 
> 赞同：0
> 
> 时间：2012-11-07T15:04:13.953
> 
> 标签：winforms, visual-c++, c++-cli

我希望我的代码在不关闭应用程序的情况下关闭当前表单并打开另一个表单（在 Visual C++ 2010 Express 中）。这是我尝试使用的代码：

```
Form2^ form2=gcnew Form2();
form2->Show();
this->Close(); 
```

当所有表单都关闭后，应用程序应该关闭，所以`this->Hide()`不会工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T16:13:12.510

打开项目中的主 .cpp 源代码文件，该文件包含 main() 函数。您将在该函数中看到与此类似的语句：

```
Application::Run(gcnew Form1); 
```

Run() 方法的这种重载将导致程序在应用程序的主窗体关闭时终止。如果您想保持它运行，那么您需要以不同的方式执行此操作。就像使用普通的 Run() 重载并在所有窗口关闭时调用 Application::Exit() 一样。您可以通过订阅 FormClosed 事件来做到这一点，如下所示：

```
void ExitWhenLastWindowClosed(Object^ sender, FormClosedEventArgs^ e) {
    if (Application::OpenForms->Count == 0) Application::Exit();
    else Application::OpenForms[0]->FormClosed += gcnew FormClosedEventHandler(ExitWhenLastWindowClosed);
}

[STAThreadAttribute]
int main(array<System::String ^> ^args)
{
    Application::EnableVisualStyles();
    Application::SetCompatibleTextRenderingDefault(false); 
    Form1^ first = gcnew Form1();
    first->FormClosed += gcnew FormClosedEventHandler(ExitWhenLastWindowClosed);
    first->Show();
    Application::Run();
    return 0;
} 
```

# vim - vim 中当前缓冲区的自定义语法高亮显示

> ID：13272352
> 
> 赞同：3
> 
> 时间：2012-11-07T15:04:30.833
> 
> 标签：vim, vim-syntax-highlighting

有时我想在当前缓冲区上应用一些自定义的额外语法突出显示。

如何使用内置 vim 语法/突出显示系统来完成（我不想使用突出显示插件）

例如，我想突出显示当前缓冲区中的所有断言语句。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T15:36:43.240

如果突出显示仅适用于某些文件类型（例如 Java），并且您一直想要它，我会扩展原始语法，并将`:syn match ...`定义放在`~/.vim/after/syntax/java.vim`.

对于自发突出显示，请使用`:match`(或`:2match`)，如*dwalter*所示。

如果您要编写更精细的映射，可能带有切换开/关逻辑，请使用`matchadd()`/ `matchdelete()`。

最后，如果您需要突出显示任意单词/字符串，例如使用文本标记标记文档，我建议您使用[Mark](http://www.vim.org/scripts/script.php?script_id=2666)等插件（我已经接管维护）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-07T15:23:40.510

如果需要，您可以使用`match`和`highlight`。

例子：

```
 :hi MyAsserts term=bold ctermbg=Cyan
    :match MyAsserts /assert(.*)/ 
```

`assert()`用青色背景 突出你的陈述。`:match`没有任何参数将重置它。

有关两者的更多信息，或通过`highlight`或`match`查看文档 `:help hi``:help match`

要重复使用突出显示，您可以将这些命令保存在一个文件中，并在`:source file.vim`需要时随时加载它。另一种方法是在`.vimrc`.

```
 hi MyAsserts ctermbg=Cyan
     command -bar -nargs=0 HiAsserts match MyAsserts /assert(.*)/
     "highlight any given regex
     command -bar -nargs=1 HiIt match MyAsserts /<args>/ 
```

并调用它`:HiAsserts`以突出显示您的`assert()`语句或突出显示缓冲区中的`:HiIt foo`每一个。`foo`

# jquery - 如何通过jQuery在id中使用“：”获取输入

> ID：13272353
> 
> 赞同：1
> 
> 时间：2012-11-07T15:04:31.790
> 
> 标签：jquery, getelementbyid

我是 jQuery 的新手，但我尝试学习它。假设我输入了 id="userForm:id"; 在 javascript 中，我可以通过以下方式简单地获取 id：

```
var id = document.getElementById("userForm:id"); 
```

在 jQuery 中，我尝试：

```
var id = $('#userForm:id'); 
```

但后来我得到错误：

```
Uncaught Error: Syntax error, unrecognized expression: unsupported
pseudo: id 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T15:06:43.993

jQuery 已经想到了这个问题，你只需要逃避它，详细的[jQuery 文档](http://api.jquery.com/category/selectors/)和更详细的[jQuery 常见问题解答](http://docs.jquery.com/Frequently_Asked_Questions#How_do_I_select_an_element_by_an_ID_that_has_characters_used_in_CSS_notation.3F)：

```
var id = $('#userForm\\:id'); 
```

句点和其他[有效 ID 字符](http://www.whatwg.org/specs/web-apps/current-work/multipage/elements.html#the-id-attribute)但具有特殊 CSS 含义的字符也是如此。

作为一般的风格问题，我个人不鼓励您在 HTML id 属性中使用特殊字符（即除字母数字、下划线和斜杠之外的任何字符），但肯定没有技术原因不能这样做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T15:07:00.360

尝试

```
var id = $('#userForm\\:id'); 
```

[**演示**](http://jsfiddle.net/xPufr/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-07T15:07:33.027

根据[http://api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)

"你必须用两个反斜杠转义字符：\\"

`var id = $('#userForm\\:id');`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-07T15:12:41.960

你也可以使用：

```
$("form[id$='userForm:id']") 
```

如果您的项目是表格外...否则您应该更改方括号前面的表格。
这段代码将查看页面中表单的每个 id 并检查它是否以 userForm:id 结尾，
请参见：[http ://api.jquery.com/attribute-ends-with-selector/](http://api.jquery.com/attribute-ends-with-selector/)

我还没有测试下一段代码，但我想它应该可以工作：

```
$("form[id='userForm:id']") 
```

这应该只选择 id 为 userForm:id 的表单

# facebook - 如果提供的 ID 是非朋友，则从 Graph API 获取名称？

> ID：13272354
> 
> 赞同：2
> 
> 时间：2012-11-07T15:04:35.033
> 
> 标签：facebook, facebook-graph-api

我正在构建一个回合制游戏，并希望允许玩家与数据库中不是他们朋友的其他用户进行游戏。目前我只存储 FB id，我从中提供朋友和非朋友的混合列表以供选择。我有一个调用来从 FB API 检索图片和名称，但只为非朋友返回图片 url。还有其他方法可以从 FB API 获取名称还是我需要将名称存储在我的数据库中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T15:23:33.490

正如[Graph API User Section](https://developers.facebook.com/docs/reference/api/user/)中的概述，您可以调用 Graph API 并获取您需要的信息（用户名）。

这是该页面的摘录，与您的要求相关：

> 您可以使用 fields 查询参数选择要返回的字段：
> 
> [https://graph.facebook.com/me?fields=id,name](https://graph.facebook.com/me?fields=id,name)

像这样修改上面的 API 调用： `https://graph.facebook.com/THE_USER_ID?fields=name, picture`

同样重要的是上面链接页面上列出的*字段*表。要获取用户名，`No access_token required`

现在，你还没有标记你正在使用的平台，所以我不能给你实际的代码。我在 Android 上工作，不熟悉其他平台。但 Graph API 调用将基本保持不变。

获得用户名和头像后，如果您愿意，可以将其存储在数据库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T15:20:21.887

通过调用以下命令，您应该能够在没有 access_token 的情况下获取包含任何用户的名称、用户名、id 和照片的 JSON 对象：

```
http://graph.facebook.com/USERNAME_OR_ID 
```

# html - 由嵌套列表移动

> ID：13272357
> 
> 赞同：0
> 
> 时间：2012-11-07T15:04:47.463
> 
> 标签：html, css, html-lists

我有一个可以正常工作的 ul，但是当我在上面的 li 添加嵌套的 ul 时，会移动。有谁知道为什么？如何解决？

我在这里有一个例子：http: [//jsfiddle.net/y5DtE/](http://jsfiddle.net/y5DtE/)

HTML：

```
<ul>
  <li> first 
        <ul>
             <li> 1.2 </li>
        </ul>
  </li>
  <li> second </li>
  <li> third eally, really long </li>
</ul>​ 
```

CSS：

```
body {
    margin:0px;
}

ul {
    margin:40px auto;
    list-style-type:none;
    padding:0;
    text-align: center;
}

ul li {
    padding: 0 15px; 
    margin-right: 5px;
    background-color: #f2f2f2;
    display: inline-block;
    height: 30px;
    line-height: 30px;
    font-family: verdana;
    font-size:10px;
    color: #666
}

ul li:last-child { margin-right: 0px; }

ul li ul {
    margin:5px 0;
}​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T15:15:53.343

要使子列表位于父元素下，请应用以下内容：

```
ul li {
    display: block;
    float: left;
} 
```

为了防止子项目浮动，添加以下规则：

```
ul li ul li{
    float: none;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T15:30:30.320

```
li {
    position: relative;
}

ul ul {
    position: absolute;
    left: 0;
} 
```

# c# - 如何从 xml c# 读取和打印特定属性

> ID：13272359
> 
> 赞同：0
> 
> 时间：2012-11-07T15:04:48.613
> 
> 标签：c#, xml, unity3d

假设我有 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<Test Description="Test XML" VersionFormat="123" ProtectedContentText="(Test test)">
    <Testapp>
        <TestappA>
            <A Id="0" Caption="Test 0" />
            <A Id="1" Caption="Test 1" />
            <A Id="2" Caption="Test 2" />
            <A Id="3" Caption="Test 3">
                <AA>
                    <B Id="4" Caption="Test 4" />
                </AA>
            </A>
        </TestappA>
        <AA>
            <Reason Id="5" Caption="Test 5" />
            <Reason Id="6" Caption="Test 6" />
            <Reason Id="7" Caption="Test 7" />
        </AA>
    </Testapp>
</Test> 
```

我需要在不使用 LINQ 的情况下从此 xml 中读取属性 Caption 的值，因为此代码的目的是在 Unity3D 中执行此操作，在花了一整夜使之成为现实之后，我编写了一个不起作用的代码。请帮忙！

代码截断：

```
// XML settings
XmlReaderSettings settings = new XmlReaderSettings();
settings.IgnoreWhitespace = true;
settings.IgnoreComments = true;                        

// Loop through the XML to get all text from the right attributes
using (XmlReader reader = XmlReader.Create(sourceFilepathTb.Text, settings))
{
    while (reader.Read())
    {
        if (reader.NodeType == XmlNodeType.Element)
        {
            if (reader.HasAttributes)
            {
                if (reader.GetAttribute("Caption") != null)
                {                                
                    MessageBox.Show(reader.GetAttribute("Caption"));
                }                            
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T15:20:37.160

以下是我处理 xml 的方式：首先我用我的 xml 加载 XmlDocument

```
XmlDocument x = new XmlDocument();
x.Load("Filename goes here"); 
```

然后要获取属性，我们有几个选择。如果你只想要所有的字幕而不关心其他任何事情，你可以这样做：

```
XmlNodeList xnl = x.GetElementsByTagName("A");
foreach(XmlNode n in xnl)
   MessageBox.Show(n.Attribute["Caption"].Value); 
```

并为您拥有的每个元素标签重复此操作。

不过，在我提供更好的建议之前，我需要更多地了解您的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T15:31:30.623

您可以使用`XPath`获取列表

```
XmlDocument doc = new XmlDocument();
doc.LoadXml(xmlstring); // Or use doc.Load(filename) to load from file
XmlNodeList attributes = doc.DocumentElement.SelectNodes("//@Caption");
foreach (XmlAttribute attrib in attributes)
{
    Messageox.Show(attrib.Value);
} 
```

我们使用@ 表示法来选择当前文档中具有`Caption`属性的所有节点。有关 xpath 的更多信息 - [http://www.w3schools.com/xpath/xpath_syntax.asp](http://www.w3schools.com/xpath/xpath_syntax.asp)

# php - 文件存在检查 php 的 auto_prepend_file

> ID：13272360
> 
> 赞同：3
> 
> 时间：2012-11-07T15:05:03.670
> 
> 标签：php, apache2, vhosts

我目前的情况是，我`vhost.conf`有一个条目可以自动包含一个文件以开始分析：

```
php_value auto_prepend_file /home/xhprof/include/xhprof.php 
```

这个东西在 SVN 中，可能会被系统上没有安装 xhprof 的人检查出来。结果是，`xhprof.php`没有找到，PHP 抛出一个错误。

有谁知道，如果有可能检查，如果这个文件在那里，包括之前？

提前谢谢:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T15:09:06.513

像这样做：

文件X.php：

`if(is_file("/home/xhprof/include/xhprof.php")){ include '/home/xhprof/include/xhprof.php'; }`

vhost.conf：

`php_value auto_prepend_file path/to/fileX.php`

有一个函数叫做：[is_file()](http://php.net/manual/en/function.is-file.php)

# java - 在 Java 中的 JTable 中显示二维数组

> ID：13272361
> 
> 赞同：0
> 
> 时间：2012-11-07T15:05:11.580
> 
> 标签：java, swing, jtable, multidimensional-array

我有 2 个类，WordSearch.java 是保存所有主要代码的地方，而 WordSearchSwing.java 是我希望创建 JTable 以显示二维数组“字母”的地方。运行以下代码时，JTable 不显示任何内容（只有 12 个空白单元格）。我不知道为什么它不起作用，任何帮助将不胜感激。

词搜索类：

```
import java.util.ArrayList;

public class WordSearch {

    public static String[][] letters = new String[12][12];
    static ArrayList<String> words = new ArrayList<String>();

    public static void main(String[] args) {

        //populating the arrayList with Strings, some which are in the wordsearch and some which aren't
        words.add("ghost");     words.add("knife");     words.add("patch");     words.add("ghoul");     words.add("apple");
        words.add("boo");       words.add("spider");    words.add("pumpkin");   words.add("house");     words.add("trick");
        words.add("cat");       words.add("candy");     words.add("orange");    words.add("rat");       words.add("crow");
        words.add("blood");     words.add("bats");      words.add("neck");      words.add("mask");      words.add("witch");
        words.add("party");     words.add("broom");     words.add("fangs");     words.add("mummy"); 

        //A 2D array is used to make the wordsearch
        //Here each coordinate is assigned a letter
        letters[0][0] = "o";    letters[1][0] = "e";    letters[2][0] = "o";    letters[3][0] = "e";    letters[4][0] = "b";    letters[5][0] = "o";
        letters[0][1] = "h";    letters[1][1] = "n";    letters[2][1] = "i";    letters[3][1] = "l";    letters[4][1] = "t";    letters[5][1] = "r";
        letters[0][2] = "b";    letters[1][2] = "c";    letters[2][2] = "o";    letters[3][2] = "d";    letters[4][2] = "y";    letters[5][2] = "a";
        letters[0][3] = "d";    letters[1][3] = "o";    letters[2][3] = "t";    letters[3][3] = "m";    letters[4][3] = "d";    letters[5][3] = "n";
        letters[0][4] = "d";    letters[1][4] = "h";    letters[2][4] = "m";    letters[3][4] = "a";    letters[4][4] = "c";    letters[5][4] = "g";
        letters[0][5] = "p";    letters[1][5] = "u";    letters[2][5] = "o";    letters[3][5] = "a";    letters[4][5] = "p";    letters[5][5] = "e";
        letters[0][6] = "m";    letters[1][6] = "u";    letters[2][6] = "n";    letters[3][6] = "u";    letters[4][6] = "t";    letters[5][6] = "r";
        letters[0][7] = "m";    letters[1][7] = "d";    letters[2][7] = "m";    letters[3][7] = "k";    letters[4][7] = "s";    letters[5][7] = "e";
        letters[0][8] = "y";    letters[1][8] = "d";    letters[2][8] = "c";    letters[3][8] = "p";    letters[4][8] = "h";    letters[5][8] = "e";
        letters[0][9] = "w";    letters[1][9] = "e";    letters[2][9] = "i";    letters[3][9] = "e";    letters[4][9] = "k";    letters[5][9] = "r";
        letters[0][10] = "n";   letters[1][10] = "y";   letters[2][10] = "n";   letters[3][10] = "e";   letters[4][10] = "o";   letters[5][10] = "i";
        letters[0][11] = "c";   letters[1][11] = "t";   letters[2][11] = "f";   letters[3][11] = "h";   letters[4][11] = "o";   letters[5][11] = "w";

        letters[6][0] = "b";    letters[7][0] = "o";    letters[8][0] = "o";    letters[9][0] = "l";    letters[10][0] = "c";   letters[11][0] = "h";
        letters[6][1] = "o";    letters[7][1] = "b";    letters[8][1] = "h";    letters[9][1] = "t";    letters[10][1] = "a";   letters[11][1] = "s";
        letters[6][2] = "g";    letters[7][2] = "h";    letters[8][2] = "o";    letters[9][2] = "s";    letters[10][2] = "t";   letters[11][2] = "g";
        letters[6][3] = "r";    letters[7][3] = "b";    letters[8][3] = "a";    letters[9][3] = "t";    letters[10][3] = "s";   letters[11][3] = "n";
        letters[6][4] = "e";    letters[7][4] = "o";    letters[8][4] = "f";    letters[9][4] = "u";    letters[10][4] = "t";   letters[11][4] = "a";
        letters[6][5] = "d";    letters[7][5] = "e";    letters[8][5] = "f";    letters[9][5] = "t";    letters[10][5] = "m";   letters[11][5] = "f";
        letters[6][6] = "i";    letters[7][6] = "c";    letters[8][6] = "k";    letters[9][6] = "o";    letters[10][6] = "p";   letters[11][6] = "m";
        letters[6][7] = "p";    letters[7][7] = "h";    letters[8][7] = "o";    letters[9][7] = "e";    letters[10][7] = "a";   letters[11][7] = "a";
        letters[6][8] = "s";    letters[7][8] = "r";    letters[8][8] = "c";    letters[9][8] = "l";    letters[10][8] = "r";   letters[11][8] = "s";
        letters[6][9] = "b";    letters[7][9] = "r";    letters[8][9] = "d";    letters[9][9] = "p";    letters[10][9] = "t";   letters[11][9] = "k";
        letters[6][10] = "o";   letters[7][10] = "o";   letters[8][10] = "e";   letters[9][10] = "p";   letters[10][10] = "y";  letters[11][10] = "e";
        letters[6][11] = "n";   letters[7][11] = "l";   letters[8][11] = "u";   letters[9][11] = "a";   letters[10][11] = "a";  letters[11][11] = "s";

        //searchAcross();
        //searchDown();
    }

    //A method used to search across the grid for words
    public static void searchAcross(){
        for (int i =0; i < 12; i++) {
            for (int j = 0; j < 12; j++) {
                for (int k = 0; k < words.size(); k++){
                    if (words.get(k).contains(letters[i][j]) && (words.get(k).contains(letters[i][j+1])) && (words.get(k).contains(letters[i][j+2]))){
                        System.out.println(words.get(k));
                        }
                    }
                }
            }
        }

    // A method used to search down the grid for words
    public static void searchDown(){
        for (int j =0; j < 12; j++) {
            for (int i = 0; i < 12; i++) {
                for (int k = 0; k < words.size(); k++){
                    if (words.get(k).contains(letters[j][i]) && (words.get(k).contains(letters[j][i+1])) && (words.get(k).contains(letters[j][i+2]))){
                        System.out.println(words.get(k));
                        }
                    }
                }
            }
    }
} 
```

WordSearchSwing 类：

```
import javax.swing.*;
public class WordSearchSwing {

    private JPanel contentPane;
    private JTable table;

    /**
     * Launch the application.
     */
    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                try {
                    WordSearchSwing frame = new WordSearchSwing();
                    frame.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }

    /**
     * Create the frame.
     */
    public WordSearchSwing() {
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setBounds(100, 100, 450, 300);
        contentPane = new JPanel();
        contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
        contentPane.setLayout(new BorderLayout(0, 0));
        setContentPane(contentPane);

        Object[] title = {"Happy Halloween"};
        table = new JTable(WordSearch.letters, title);
        contentPane.add(table, BorderLayout.CENTER);
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T15:50:57.590

要扩展@Hakan的答案：

当你运行你的代码时，它会从运行一个（也是唯一一个）`main`方法开始。因此，如果您看到 GUI，它会运行`main`. `WordSearchSwing`这意味着 的`main`方法`WordSearch`没有运行。

解决此问题的最简单（但绝对不是最佳）方法是`WordSearch.main(new String[]{});`在创建 JTable 之前添加。

`WordSearch`在这种情况下，您尝试使用的是[Singleton 模式](http://en.wikipedia.org/wiki/Singleton_pattern)。这将是比上述更好的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T15:22:23.973

`WordSearch.letters``WordSearch.main(...)`在方法中初始化并且`WordSearch.main()`永远不会调用方法。

注意：*此代码中有许多改进机会，但我只回答了这个问题。*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-07T15:50:53.847

让它运行的快速通道是

1) WordSearch 的变化来自

```
public static void main(String[] args) { 
```

静态初始化：

```
static  {
    //populating the arrayList with Strings, some which are in the wordsearch and some which aren't
    words.add("ghost");     words.add("knife");     words.add("patch");     words.add("ghoul");     words.add("apple"); 
```

接下来在 WordSearchSwing 中，您需要将代码更改为

```
 Object[] title = {"First","2nd","r3d","4th","5th","6th"};
    table = new JTable(WordSearch.letters, title);
    JScrollPane scrollPane = new JScrollPane(table);
    contentPane.add(scrollPane, BorderLayout.CENTER); 
```

查看前 6 列，根据需要添加更多，并显示标题。

然后你会得到这样的东西：

![运行代码](../Images/3808c43c1e3eb1d46829f60feefcd574.png)

# vb.net - 如何在 VB.Net 中加入名称列表

> ID：13272366
> 
> 赞同：1
> 
> 时间：2012-11-07T15:05:20.663
> 
> 标签：vb.net

这必须是一个简单的问题，但我无法弄清楚如何创建一个用逗号分隔的名称列表，而最后没有尾随逗号。

所以这是我的代码...

```
 For Each u In users
        userList.Append(u.FirstName)
        userList.Append(" ")
        userList.Append(u.LastName)
        userList.Append(", ")
    Next 
```

这会创建一个列表，但它总是看起来像这样：

**詹姆斯·史密斯、克里斯·威廉姆斯、佐伊·巴布科克、**

如何生成最后没有额外逗号的列表？

谢谢

感谢所有帮助，这是工作代码：

```
 Dim fullNames = (users.Select(Function(u) u.FirstName + " " + u.LastName))
    Dim userList As String = String.Join(", ", fullNames) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T15:08:37.217

您可以使用[**LINQ**](http://msdn.microsoft.com/en-us/library/vstudio/bb763068.aspx)将每个用户投射到全名集合中，然后使用[**`String.Join()`**](http://msdn.microsoft.com/en-us/library/57a79xd0.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-1)您选择的分隔符将它们连接起来。

```
List(Of String) fullNames = From u _
                            In users _
                            Select (u.FirstName + " " + u.LastName)
String userList = String.Join(", ", fullNames) 
```

您也可以像这样表达 LINQ 查询。它与上述相同：

```
List(Of String) fullNames = _
                users.Select(Function(u) u.FirstName + " " + u.LastName)
String userList = String.Join(", ", fullNames) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T15:08:32.007

```
For i as integer = 0 to users.Count - 1
    userList.Append(String.Format("{0} {1}", users(i).FirstName, users(i).LastName))
    If (i + 1) < users.Count - 1
        userList.Append(", ")
    End If
Next 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T05:25:29.113

LINQ 并且`Join`是可用时的最佳答案，否则您应该使用`StringBuilder`它，然后最简单的方法是让您的代码保持原样，最后一行：

```
If userList.Length > 0 Then userList.Length -= ", ".Length
Return userList.ToString 
```

# javascript - jQuery 选择器性能：按 ID 与带有 ID 模式的标签

> ID：13272368
> 
> 赞同：0
> 
> 时间：2012-11-07T15:05:26.577
> 
> 标签：javascript, jquery, jquery-selectors

我对使用 jQuery 很陌生，因此我相处得很好，可以得到预期的结果，但这里有一个关于性能的问题，我不确定答案：

假设预期的选择实际上是 a ，以下哪个选择器的性能最高`<textarea>`？

*   `$("textarea[id='someID']");`

*   `$("#someID");`

提前谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T15:06:28.610

`$("#someID");`会快得多

因为它基本上使用了标准的javascript`document.getElementById`函数

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-07T15:07:10.030

选择方式`id`始终是最快的方法，因为它使用 javascripts 自己的`getElementById`实现。

[**JSPerf 演示**](http://jsperf.com/id-selector-vs-attribute-selector)

在我的机器上（Win8，FF16.0.2），属性选择器**慢了 93%！！**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T15:09:51.140

第二个选择器会更快，因为它直接映射到`document.getElementById`

你可以在[这里查看结果](http://jsperf.com/juqery-id-vs-id-pattern)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T15:23:17.597

为了获得最快的结果，您必须将 js getElementById 包装在 jquery 对象中：

```
$(document.getElementById('myid')); 
```

请参阅[http://jsperf.com/id-selector-vs-attribute-selector/3](http://jsperf.com/id-selector-vs-attribute-selector/3)

# asp.net - 如何设置 Farpoint Spread 控件宽度自动

> ID：13272375
> 
> 赞同：2
> 
> 时间：2012-11-07T15:05:56.560
> 
> 标签：asp.net, client-side, farpoint-spread, farpoint

我遇到了 Farpoint Spread 控件的问题，该控件已经通过后面的代码设置了网格的高度，并且直接在标记中设置了宽度。我的问题是，有没有办法将宽度设置为自动，因为如果我以 1440x900 的屏幕分辨率打开网格，这个网格会变小，但如果我降低屏幕分辨率，网格会很好地显示。

我看到可以使用 Javascript 确定屏幕分辨率，然后我可以为每个分辨率设置预定义的样式。任何人都可以帮我解决这个问题或有其他建议可以提供给我吗？

```
<tr>
    <td style="padding-left: 10px; padding-top: 15px;" valign="top">
        <farpoint:FpSpread ID="FpSpreadUnitPrice" runat="server" BorderColor="transparent" BorderStyle="None"
            Width="98%">
            <Sheets>
                <farpoint:SheetView DataSourceID="" SheetName="Sheet1">
                    <SelectionBorder BorderStyle="NotSet" BorderStyleBottom="NotSet" BorderStyleLeft="NotSet"
                        BorderStyleRight="NotSet" BorderStyleTop="NotSet" />
                    <RowHeader Width="40" />
                </farpoint:SheetView>                </Sheets>

        </farpoint:FpSpread>
    </td>
</tr>

// Set grid height
int height = 0;
for (int i = 0; i < sh.Rows.Count; i++) {
    int borderSize = 1;
    for (int j=0; j<sh.ColumnCount; j++)
        if (sh.Cells[i, j].Border.BorderSizeTop > borderSize)
            borderSize = sh.Cells[i, j].Border.BorderSizeTop;
    height += sh.Rows.Height + borderSize;
}
this.FpSpreadUnitPrice.Height = height + 10; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T18:02:32.527

该`<farpoint:FpSpread>`标签可以像任何`<div>`标签一样使用。所以宽度可以用css自动设置。

soo .. 如果您包含`style="width:100%;height:100%"`在标签中，它会根据容器的大小进行调整。

您还需要从`<farpoint:FpSpread>`标签中删除宽度和高度属性

# java - 如何使用 SessionDestroyedEvent？

> ID：13272378
> 
> 赞同：7
> 
> 时间：2012-11-07T15:06:16.793
> 
> 标签：java, spring-security

我在尝试让我的 SessionDestroyedEvent 工作时遇到问题。我希望它在会话超时时打印出来。我正在清除我的历史记录以强制它超时。

这是我的代码：

```
@Service
public class MyTimeoutFilter implements
        ApplicationListener<ApplicationEvent>
{
    public MyTimeoutFilter()
    {
        super();
        System.out.println("Application context listener is created!");
    }

    public void onApplicationEvent(ApplicationEvent event)
    {
        if (event instanceof SessionDestroyedEvent)
        {
            SessionDestroyedEvent sdEvent = (SessionDestroyedEvent) event;

            List<SecurityContext> lstSecurityContext = sdEvent
                    .getSecurityContexts();

            for (SecurityContext securityContext : lstSecurityContext)
            {
                System.out.println("Security Context: "
                    securityContext.getAuthentication().getName());
            }
        }

        System.out.println("This is a test.");
    }
} 
```

我得到的只是“创建了应用程序上下文侦听器。”，然后是“这是一个测试”。我从来没有运行 if 语句中的代码。

这是我的 web.xml：

```
<!-- The definition of the Root Spring Container shared by all Servlets 
    and Filters -->
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/spring/root-context.xml,
        /WEB-INF/spring/appServlet/security-context.xml</param-value>
</context-param>

<!-- Creates the Spring Container shared by all Servlets and Filters -->
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>
<listener>
    <listener-class>org.springframework.security.web.session.HttpSessionEventPublisher</listener-class>
</listener>
<!-- Processes application requests -->
<servlet>
    <servlet-name>appServlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring/appServlet/servlet-context.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>appServlet</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping>
<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>
<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>
<session-config>
    <session-timeout>1</session-timeout>
</session-config> 
```

我没有名为“application-context.xml”的文件。然而，我确实有一个“servlet-context.xml”和一个“security-context.xml”。这是两者：

Servlet-context.xml

```
<beans:beans xmlns="http://www.springframework.org/schema/mvc"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:beans="http://www.springframework.org/schema/beans"
xmlns:context="http://www.springframework.org/schema/context" xmlns:p="http://www.springframework.org/schema/p"
xmlns:tx="http://www.springframework.org/schema/tx" xmlns:mvc="http://www.springframework.org/schema/mvc"
xmlns:security="http://www.springframework.org/schema/security"
xsi:schemaLocation="http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
    http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd
    http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
    http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd">

<annotation-driven />

<resources mapping="/static/**" location="/static/" />

<beans:bean
    class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <beans:property name="prefix" value="/WEB-INF/views/" />
    <beans:property name="suffix" value=".jsp" />
</beans:bean>

<context:component-scan base-package="com.blahblahblah.bagbox" />
<context:property-placeholder location="classpath*:jdbc.properties" />
<mvc:annotation-driven />
<tx:annotation-driven />
<beans:bean class="org.springframework.web.servlet.view.BeanNameViewResolver">
    <beans:property name="order">
        <beans:value>1</beans:value>
    </beans:property>
</beans:bean>

<tx:annotation-driven transaction-manager="transactionManager" />

<beans:bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource"
    destroy-method="close" p:driverClass="${app.jdbc.driverClassName}"
    p:jdbcUrl="${app.jdbc.url}" p:user="${app.jdbc.username}" p:password="${app.jdbc.password}"
    p:acquireIncrement="5" p:idleConnectionTestPeriod="60" p:maxPoolSize="100"
    p:maxStatements="50" p:minPoolSize="10" />

<beans:bean id="transactionManager"
    class="org.springframework.jdbc.datasource.DataSourceTransactionManager"
    p:dataSource-ref="dataSource" />

</beans:beans> 
```

这是我的 Security-context.xml

```
<beans:beans xmlns="http://www.springframework.org/schema/mvc"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:beans="http://www.springframework.org/schema/beans"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:security="http://www.springframework.org/schema/security"
xsi:schemaLocation="http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
    http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd">

<security:http auto-config="false" use-expressions="true"
    entry-point-ref="loginUrlAuthenticationEntryPoint">
    <security:intercept-url pattern="/login*"
        access="isAnonymous()" />
    <security:intercept-url pattern="/logout*"
        access="isAnonymous()" />
    <security:intercept-url pattern="/static/**"
        access="permitAll" />
    <security:intercept-url pattern="/**"
        access="isFullyAuthenticated()" />
    <security:intercept-url pattern="/"
        access="isFullyAuthenticated()" />
    <security:anonymous />
    <security:custom-filter ref="loginFilter"
        position="FORM_LOGIN_FILTER" />
    <security:custom-filter position="LOGOUT_FILTER"
        ref="logoutFilter" />
</security:http>

<beans:bean id="loginUrlAuthenticationEntryPoint"
    class="org.springframework.security.web.authentication.LoginUrlAuthenticationEntryPoint">
    <beans:property name="loginFormUrl" value="/login.html" />
</beans:bean>

<beans:bean id="loginFilter"
    class="com.blahblahblah.bagbox.security.filter.MyLoginFilter">
    <beans:property name="authenticationManager" ref="authenticationManager" />
    <beans:property name="authenticationFailureHandler"
        ref="failureHandler" />
    <beans:property name="authenticationSuccessHandler"
        ref="successHandler" />
</beans:bean>

<beans:bean id="successHandler"
    class="org.springframework.security.web.authentication.SavedRequestAwareAuthenticationSuccessHandler">
    <beans:property name="defaultTargetUrl" value="/" />
</beans:bean>
<beans:bean id="failureHandler"
    class="org.springframework.security.web.authentication.SimpleUrlAuthenticationFailureHandler">
    <beans:property name="defaultFailureUrl" value="/loginFailed.html" />
</beans:bean>

<beans:bean id="logoutFilter"
    class="org.springframework.security.web.authentication.logout.LogoutFilter">
    <beans:constructor-arg index="0" value="/login.html" />
    <beans:constructor-arg index="1">
        <beans:list>
            <beans:bean id="securityContextLogoutHandler"
                class="org.springframework.security.web.authentication.logout.SecurityContextLogoutHandler" />
            <beans:bean id="logoutHandler"
                class="com.blahblahblah.bagbox.security.filter.MyLogoutHandler" />
        </beans:list>
    </beans:constructor-arg>
    <beans:property name="filterProcessesUrl" value="/logout.html" />
</beans:bean>

<security:global-method-security
    secured-annotations="enabled" />

<security:authentication-manager alias="authenticationManager">
    <security:authentication-provider
        ref="ldapAuthProvider" />
</security:authentication-manager>

<beans:bean id="ldapAuthProvider"
    class="org.springframework.security.ldap.authentication.LdapAuthenticationProvider">
    <beans:constructor-arg>
        <beans:ref local="bindAuthenticator" />
    </beans:constructor-arg>
    <beans:constructor-arg>
        <beans:ref local="authoritiesPopulator" />
    </beans:constructor-arg>
    <beans:property name="userDetailsContextMapper" ref="userDetailsContextMapper" />
</beans:bean>

<beans:bean id="bindAuthenticator"
    class="org.springframework.security.ldap.authentication.BindAuthenticator">
    <beans:constructor-arg ref="initialDirContextFactory" />
    <beans:property name="userSearch" ref="userSearch" />
</beans:bean>

<beans:bean id="authoritiesPopulator"
    class="org.springframework.security.ldap.userdetails.DefaultLdapAuthoritiesPopulator">
    <beans:constructor-arg ref="initialDirContextFactory" />
    <beans:constructor-arg value="" />
    <beans:property name="groupRoleAttribute" value="cn" />
    <beans:property name="searchSubtree" value="true" />
    <beans:property name="rolePrefix" value="ROLE_" />
    <beans:property name="convertToUpperCase" value="true" />
</beans:bean>

<beans:bean id="userDetailsContextMapper"
    class="org.springframework.security.ldap.userdetails.InetOrgPersonContextMapper" />

<beans:bean id="userSearch"
    class="org.springframework.security.ldap.search.FilterBasedLdapUserSearch">
    <beans:constructor-arg index="0" value="" />
    <beans:constructor-arg index="1"
        value="(sAMAccountName={0})" />
    <beans:constructor-arg index="2"
        ref="initialDirContextFactory" />
    <beans:property name="searchSubtree" value="true" />
</beans:bean>

<beans:bean id="initialDirContextFactory"
    class="org.springframework.security.ldap.DefaultSpringSecurityContextSource">
    <beans:constructor-arg
        value="ldap://ccpdc.countrycurtains.local:389/dc=countrycurtains,dc=local" />
    <beans:property name="userDn"
        value="CN=LDAP BIND,CN=Users,DC=countrycurtains,DC=local" />
    <beans:property name="password" value="ld4pb1nd" />
    <beans:property name="baseEnvironmentProperties">
        <beans:map>
            <beans:entry key="java.naming.referral">
                <beans:value>follow</beans:value>
            </beans:entry>
        </beans:map>
    </beans:property>
</beans:bean>

<beans:bean id="loggerListener"
    class="org.springframework.security.authentication.event.LoggerListener" />

</beans:beans> 
```

有很多 SessionDestroyedEvent 经验和/或获得会话超时以使用 Spring Security 的人可以帮助我。我在 Google 上查找的所有代码都指向不再有效的方法（例如 getSecurityContext()，当它已更改为 getSecurityContexts() 时）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T15:43:45.727

不要忘记`HttpSessionEventPublisher`声明`web.xml`：

```
<listener>
    <listener-class>
        org.springframework.security.web.session.HttpSessionEventPublisher
    </listener-class>
</listener> 
```

另外，我不太明白清除历史记录应该如何强制会话超时。如果你想测试会话超时功能，你需要配置一些小的会话超时`web.xml`（例如，1 分钟），登录并等待它超时。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T17:40:45.250

此[链接](https://stackoverflow.com/questions/12810153/spring-session-handling-httpsessiondestroyedevent-not-received)可能会解决您的问题。

HttpSessionEventPublisher 和您的服务类都必须在“Spring Root WebApplicationContex”下。

# java - 警告“未经检查的调用”和“未经检查的转换”

> ID：13272381
> 
> 赞同：0
> 
> 时间：2012-11-07T15:06:28.177
> 
> 标签：java, generics, warnings

**当我编译我的代码时，我收到 4 个警告 - 但如何让它们消失？** （我不是指@SuppressWarnings）

PS：显然这一定是以前问过的 - 但要么我找不到它，要么我无法应用它。

* * *

***输出***

```
warning: [unchecked] unchecked call to BaseWorker(C) as a member of the raw type BaseWorker
[warn] return new BaseWorker(this);

warning: [unchecked] unchecked conversion
[warn] found   : com.crashnote.BaseWorker
[warn] required: com.crashnote.BaseWorker<C>
[warn] return new BaseWorker(this);

warning: [unchecked] unchecked call to SubWorker(C) as a member of the raw type SubWorker
[warn] return new SubWorker(this);

warning: [unchecked] unchecked conversion
[warn] found   : com.crashnote.SubWorker
[warn] required: com.crashnote.SubWorker<C>
[warn] return new SubWorker(this); 
```

* * *

***源代码***

**BaseConfig** : 实例化*BaseWorker*

```
public class BaseConfig<C extends BaseConfig> {

    public BaseConfig(final Object c) {
    }

    public BaseWorker<C> getWorker() {
        return new BaseWorker(this);
    }
} 
```

**BaseWorker**

```
public class BaseWorker<C extends BaseConfig> {

    public BaseWorker(final C config) {
    }
} 
```

**SubConfig** : 实例化*SubWorker*

```
class SubConfig<C extends SubConfig> extends BaseConfig<C> {

    public SubConfig(final Object c) {
        super(c);
    }

    @Override
    public SubWorker<C> getWorker() {
        return new SubWorker(this);
    }
} 
```

**SubWorker**：继承自 SubWorker

```
public class SubWorker<C extends BaseConfig> extends BaseWorker<C> {

      public SubWorker(final C config) {
          super(config);
      }  
} 
```

* * *

***编辑***

我尝试了提供的解决方案，但由于某种原因它现在失败了。

**一种）**

```
return new BaseWorker<BaseConfig>(this); 
```

结果是

```
incompatible types
[error] found   : BaseWorker<BaseConfig>
[error] required: BaseWorker<C>
[error] return new BaseWorker<BaseConfig>(this); 
```

**二）**

```
return new BaseWorker<C>(this); 
```

结果是

```
cannot find symbol
[error] symbol  : constructor BaseWorker(BaseConfig<C>)
[error] location: class BaseWorker<C>
[error] return new BaseWorker<C>(this); 
```

嗯，也许我做错了什么。顺便说一句，这是 Java 6，以防万一。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T15:08:33.217

而不是返回平原

```
return new BaseWorker(this); 
```

使其通用，因为您的`BaseWorker`类被定义为通用的。

```
return new BaseWorker<C>(this); 
```

同样的规则也适用`SubWorker`。

```
return new SubWorker<C>(this); 
```

**更新：**

根据异常消息，您的构造函数也缺少泛型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T15:09:24.433

尝试

```
 return new BaseWorker<C>(this); 
```

和

```
 return new SubWorker<C>(this); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T16:36:28.340

好吧，在将答案应用于我的代码后，我发现它们实际上是错误的。这似乎有效。

**BaseConfig**现在有一个 print() 方法（只是为了稍后检查我们是否有正确的类型）并向*BaseWorker*的实例化添加一个泛型。

```
public class BaseConfig<C extends BaseConfig> {

    public BaseConfig(final Object c) {
    }

    public BaseWorker<C> getWorker() {
        return new BaseWorker<C>(this);
    }

    public void print() {
        //
    }
} 
```

现在这就是有趣的地方，**BaseWorker**有一个带有泛型的构造函数。这似乎完全多余 - 但这是我发现有效的唯一方法。当你只写它时`<C>`，它似乎是一个新的“本地”泛型，除了类之一，并且引发了编译器错误（`cannot find symbol: method print()`）。

```
public class BaseWorker<C extends BaseConfig> {

    public <C extends BaseConfig> BaseWorker(final C config) {
        config.print();
    }
} 
```

**SubConfig**和**SubWorker 相应**更改。

PS：如果这完全是胡说八道，请告诉我:)

# objective-c - ios5加密的CCCrypt不能用ios6解密

> ID：13272383
> 
> 赞同：6
> 
> 时间：2012-11-07T15:06:31.467
> 
> 标签：objective-c, ios, ios5, encryption, ios6

我的 cocos2d 游戏使用 CCCrypt() 加密保存数据。我使用mac地址作为加密密钥。IOS5加密的保存文件不能用IOS6相同的mac地址解密。这意味着更新游戏的用户将丢失所有数据！

有什么办法可以解密旧文件？

这是代码：

```
@implementation NSData (AESAdditions)
- (NSData*)AES256EncryptWithKey:(NSString*)key {
    // 'key' should be 32 bytes for AES256, will be null-padded otherwise
    char keyPtr[kCCKeySizeAES256 + 1]; // room for terminator (unused)
    bzero(keyPtr, sizeof(keyPtr)); // fill with zeroes (for padding)

    // fetch key data
    [key getCString:keyPtr maxLength:sizeof(keyPtr) encoding:NSUTF8StringEncoding];

    NSUInteger dataLength = [self length];

    //See the doc: For block ciphers, the output size will always be less than or
    //equal to the input size plus the size of one block.
    //That's why we need to add the size of one block here
    size_t bufferSize           = dataLength + kCCBlockSizeAES128;
    void* buffer                = malloc(bufferSize);

    size_t numBytesEncrypted    = 0;
    CCCryptorStatus cryptStatus = CCCrypt(kCCEncrypt, kCCAlgorithmAES128, kCCOptionPKCS7Padding,
                                          keyPtr, kCCKeySizeAES256,
                                          NULL /* initialization vector (optional) */,
                                          [self bytes], dataLength, /* input */
                                          buffer, bufferSize, /* output */
                                          &numBytesEncrypted);

    if (cryptStatus == kCCSuccess)
    {
        //the returned NSData takes ownership of the buffer and will free it on deallocation
        return [NSData dataWithBytesNoCopy:buffer length:numBytesEncrypted];
    }

    free(buffer); //free the buffer;
    return nil;
}
- (NSData *)AES256DecryptWithKey:(NSString *)key {
    // 'key' should be 32 bytes for AES256, will be null-padded otherwise
    char keyPtr[kCCKeySizeAES256+1]; // room for terminator (unused)
    bzero(keyPtr, sizeof(keyPtr)); // fill with zeroes (for padding)

    // fetch key data
    [key getCString:keyPtr maxLength:sizeof(keyPtr) encoding:NSUTF8StringEncoding];

    NSUInteger dataLength = [self length];

    //See the doc: For block ciphers, the output size will always be less than or
    //equal to the input size plus the size of one block.
    //That's why we need to add the size of one block here
    size_t bufferSize = dataLength + kCCBlockSizeAES128;
    void *buffer = malloc(bufferSize);

    size_t numBytesDecrypted = 0;
    CCCryptorStatus cryptStatus = CCCrypt(kCCDecrypt, kCCAlgorithmAES128, kCCOptionPKCS7Padding,
                                          keyPtr, kCCKeySizeAES256,
                                          NULL /* initialization vector (optional) */,
                                          [self bytes], dataLength, /* input */
                                          buffer, bufferSize, /* output */
                                          &numBytesDecrypted);

    if (cryptStatus == kCCSuccess) {
        //the returned NSData takes ownership of the buffer and will free it on deallocation
        return [NSData dataWithBytesNoCopy:buffer length:numBytesDecrypted];
    }

    free(buffer); //free the buffer;
    return nil;
}
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T19:02:16.100

您需要提供有关如何实施加密的详细信息，特别是您使用的选项。

根据我的经验，iOS 6 上解密失败的最常见原因是他们更改/修复的 CTR 错误。在 iOS 5 中，有一个选项`kCCModeOptionCTR_LE`是谎言。它实际上是用`kCCModeOptionCTR_BE`. 在 iOS 6 中，他们修复了这个问题，如果你尝试使用`kCCModeOptionCTR_LE`你会得到一个“未实现”的错误。但是 CCCrypt() 一般不使用 CTR 模式，所以我不知道这是否适用。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-11-09T12:14:03.930

好的，我找到了解决方案。

这里的关键点：

我向 NSData 添加了两种方法，以使用基于代码的 IOS5 库进行加密和解密。

```
@implementation NSData (AESAdditions)
-(NSData*)AES256EncryptWithKey:(NSString*)key;
-(NSData *)AES256DecryptWithKey:(NSString *)key 
```

现在在 IOS6 库中，NSData 可能会更改，因此两种方法的工作方式不同，它无法解密在 IOS5 中加密的文件。

在基于代码的 IOS6 中，我在课堂上编写了方法。像这样：

```
- (NSData*)AES256EncryptWithKey:(NSString*)key data:(NSData *)data;
- (NSData *)AES256DecryptWithKey:(NSString *)key data:(NSData *)data; 
```

该代码与 IOS5 中的代码相同。

# apache-flex - ColumnChart：如何摆脱柱子后面的阴影？

> ID：13272390
> 
> 赞同：1
> 
> 时间：2012-11-07T15:06:53.400
> 
> 标签：apache-flex, flex4, flex4.6, flex-charting, flex-charts

[我对ColumnChart](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf69084-7c59.html)有几个问题请（下面的截图和代码）：

![在此处输入图像描述](../Images/e2a208effcbf50b9a878a596ce40760c.png)

1.  如何摆脱每列后面绘制的阴影？我试过添加`<mx:filters />`，但没有帮助
2.  如何摆脱列之间的填充，使它们在侧面相互接触（如楼梯）已**解决**
3.  如何摆脱警告`Data binding will not be able to detect assignments to "horizontalAxis"`？我尝试移动该代码块以摆脱`axis`参数，但找不到正确的位置。**解决了**

    ```
     <mx:ColumnChart id="_chart"
                type="overlaid"
                dataProvider="{_ac}" >

    <mx:filters /> <!-- doesn't remove shadows -->

    <mx:horizontalAxis>
        <mx:CategoryAxis categoryField="yw"/>
    </mx:horizontalAxis>    

    <mx:horizontalAxisRenderers> <!-- warning -->
        <mx:AxisRenderer axis="{_chart.horizontalAxis}" canDropLabels="true" />
    </mx:horizontalAxisRenderers>       

    <mx:series>
        <mx:ColumnSeries 
            xField="yw" 
            yField="max" 
            displayName="Лидер недели"
            />
        <mx:ColumnSeries 
            xField="yw" 
            yField="pos" 
            displayName="Выигрыш"
            />
        <mx:ColumnSeries 
            xField="yw" 
            yField="neg" 
            displayName="Проигрыш"
            />      
    </mx:series>
        </mx:ColumnChart>

        <mx:Legend dataProvider="{_chart}" 
           direction="horizontal" 
           width="100%" /> 
    ```

**更新**：

Sunil 帮助解决了问题 #3，谢谢！

问题 #2 解决了`columnWidthRatio="1"`

所以现在我只需要知道，如何摆脱阴影 - 根据问题标题:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T19:00:13.787

对于您的第一个问题，简单添加`seriesFilters="{[]}"`到`mx:ColumnChart`属性。

# git - 为什么我修剪后的 git repo 仍然这么大，或者，为什么 git push --tags 有这么多的推动力？

> ID：13272391
> 
> 赞同：1
> 
> 时间：2012-11-07T15:06:55.850
> 
> 标签：git

我跑了：

```
git filter-branch --prune-empty --subdirectory-filter cannery/assemblies master 
```

将一个大回购的克隆变成一个小得多的回购。

但是当我用结果推送 --tags 时，它似乎相当大：

```
Counting objects: 36747, done.
Delta compression using up to 8 threads.
Compressing objects: 100% (13463/13463), done.
Writing objects: 100% (36713/36713), 65.47 MiB | 1.55 MiB/s, done.
Total 36713 (delta 14866), reused 36676 (delta 14854) 
```

这真的是罐头厂/装配厂中的一小部分东西。

我是否以某种方式保留了大量我不想要的东西？我怎么知道？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T22:22:38.443

您的提交是孤立的。但是，它们需要一些时间才能被垃圾收集并减少 repo 的大小。

如果你想强制它运行：

```
git gc --prune=now --aggressive 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T03:32:09.490

github 上一位乐于助人的人提供了诊断。

这开始是一个相当大的 svn repo。它通过svn2git。到目前为止，svn 'tags' 引用了整个 repo 的适当子集。

然后我愚蠢地在 git 中运行了 maven-release-plugin 来获取我后来开始拆分成自己的 repo 的一小部分。这创建了一个引用整个 repo 的标签。

所以，当我过滤时，那个参考让整个射击比赛保持活力。

修复是删除这个标签，然后重新gc。

# digital-signature - 在 JavaCard Applet 中生成 HMAC_SHA256 签名

> ID：13272392
> 
> 赞同：0
> 
> 时间：2012-11-07T15:06:58.657
> 
> 标签：digital-signature, smartcard, javacard, symmetric-key

我正在尝试使用我自己的派生密钥*S*（也是字节数组）对包含*inBuffer字节数组的消息进行签名。*javacard (jc) 小程序模块的函数片段如下所示。我正在使用 javacard2.2.2 库来开发 jc 小程序。我正在使用 android 应用程序发送进程请求。我收到返回码“ *6A81* ”，表示“不支持功能”。现在，我不知道如何继续，因为我不明白它提到了不支持 HMAC_SHA256 或者我在函数中犯了一些错误。请帮忙。

 **```
 Signature m_sessionMAC = null;
    HMACKey keyType = null;
    Sign = new byte[64];

    bytesRead = apdu.setIncomingAndReceive();

    // Create HMAC Key Used in Mac
    m_sessionMAC = Signature.getInstance(Signature.ALG_HMAC_SHA_256, false);

    // Create HMAC Key Used in Mac
    keyType = (HMACKey) KeyBuilder.buildKey(KeyBuilder.TYPE_HMAC, KeyBuilder.LENGTH_HMAC_SHA_256_BLOCK_64, false); 
    keyType.setKey(S,(short) 0, (short) S.length);
    m_sessionMAC.init(keyType, Signature.MODE_SIGN);

    //Generate Signature on inBuffer (received data to sign)
    echoOffset = m_sessionMAC.sign(inBuffer, ISO7816.OFFSET_CDATA, ISO7816.OFFSET_LC, Sign , (short)0); 
    Util.arrayCopyNonAtomic(Sign, ( short ) 0, inBuffer, ( short ) 0, echoOffset); 
    apdu.setOutgoingAndSend( ( short ) 0, (short) echoOffset ); 
```

请在这方面帮助我，或者提供任何用于实现 HMAC_SHA256 或 HMAC_SHA1 对称加密的指针。在 javacard 小程序中。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T08:45:05.833

大多数加密算法对于 JavaCard 是可选的。因此，您的卡可能不支持 Signature.ALG_HMAC_SHA_256。但是 HMAC 算法不是很复杂，因此您应该检查您的卡是否支持 MessageDigest.ALG_SHA_256。

如果支持，您可以遵循[RFC2104](http://www.ietf.org/rfc/rfc2104.txt)并自己实现 HMAC：

```
K = HMAC key of length 32
ipad = the byte 0x36 repeated 32 times
opad = the byte 0x5C repeated 32 times.

To compute HMAC over the data `text' we perform

H(K XOR opad, H(K XOR ipad, text)) 
```

[您可以通过将结果与RFC 4231](https://www.rfc-editor.org/rfc/rfc4231)中记录的测试向量进行比较来测试您的实现

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T09:07:26.313

除了 Robert 的回答，我想强调一下，当您调用 getInstance() 方法时，您必须检查 CryptoException。正如罗伯特已经提到的算法可能是可选的，因此最好先检查一下：

```
try {
    Signature.getInstance(Signature.ALG_HMAC_SHA_256, false);
} catch (CryptoException e) {
    if (e.getReason() == CryptoException.NO_SUCH_ALGORITHM) {
        // Do something to treat algorithm absebce
    }
} 
```**

# python - gevent 和 socksipy

> ID：13272397
> 
> 赞同：1
> 
> 时间：2012-11-07T15:07:16.630
> 
> 标签：python, asyncsocket, gevent, greenlets

我想知道是否有人尝试使用 [gevent][1] 和 [socksipy][2] 进行并发下载。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T19:37:45.133

我使用 gevent 从 yfrog、instagram、twitpic 等下载了大约 12k 张图片。图片的累积大小约为 1.5Gb，在我的家庭 wifi 上下载它们需要大约 20 分钟。

为此，我实现了一个`image_download`函数，其唯一目的是从给定 URL 下载图片，然后`image_download`使用`gevent.Pool`.

```
from gevent import monkey
monkey.patch_socket()  # See http://www.gevent.org/gevent.monkey.html
import gevent

NB_WORKERS = 50

def image_download(url):
    # retrieve image

def parallel_image_download(urls):  # urls is of type list
    """ Activate NB_WORKERS Greenlets to asynchronously download the images. """
    pool = gevent.Pool(NB_WORKERS)
    return pool.map(image_download, urls) 
```

注意：经过几次尝试，我确定了 50 个并行工作人员。通过 50，总运行时间没有增加。

# kineticjs - KineticJS - 使笔划不可见/删除笔划

> ID：13272398
> 
> 赞同：1
> 
> 时间：2012-11-07T15:07:17.800
> 
> 标签：kineticjs

我设置了一些带有边框的文本，如下所示：

```
var line1 = new Kinetic.Text({
     x: 190,
     y: 40,
     text: "Line 1",            
     stroke: "black",
     strokeWidth: 1,
     padding: 5
} 
```

但我想设置一个删除边框的事件。我该怎么做呢？setStroke("none") 似乎不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T19:08:36.877

将 stroke 设置为*null*而不是“none”，适用于此，如下所示：

[http://jsfiddle.net/FCuk5/6/](http://jsfiddle.net/FCuk5/6/)

```
line1.setStroke(null); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T20:57:03.220

有两种方法可以做到这一点。

```
line1.setStroke(''); // or setStroke('rgba(0,0,0,0)');

line1.setStrokeWidth(0); 
```

无论哪种方式，您都必须在之后重新绘制图层。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T15:01:48.777

发现当线条位于其他形状的顶部时，我必须使用它来阻止黑线出现笔划的宽度：

```
line1.setStroke('rgba(0,0,0,0)'); 
```

# bash - 用于在安装期间自动确认选项的 Bash 命令

> ID：13272399
> 
> 赞同：0
> 
> 时间：2012-11-07T15:07:20.623
> 
> 标签：bash, installation

每当您安装软件包时，它通常会提示您确认是/否，有没有办法自动执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T15:09:09.853

你可以试试

```
yes | install-package.sh 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T15:15:41.363

在基于 debian 的发行版上，您可以运行：

```
apt-get -y install <package_to_install> 
```

进一步自动化它（在安装包的情况下询问一些问题 - 例如 mysql-server 要求提供 db root 密码）运行：

```
DEBIAN_FRONTEND=noninteractive apt-get -y install <package_to_install> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T15:13:06.670

试试 -f 开关。这可能取决于您拥有的软件包管理器，因此您应该查看软件包管理器的手册页以进行确认。

# javascript - ASP.net Rejuicer 动态组合js

> ID：13272401
> 
> 赞同：0
> 
> 时间：2012-11-07T15:07:24.333
> 
> 标签：javascript, asp.net, asp.net-mvc

我正在考虑使用 Rejuicer [http://rejuice.me/](http://rejuice.me/)将我的 ASP.net MVC 站点的所有 JS 文件合并到一个 JS 文件中。这工作正常，但它不允许我添加或删除 JS 文件而不必重置/回收应用程序，因为所有配置都是在 Application_Start() 事件处理程序中设置的。

有没有人对我如何解决这个问题有任何想法。或者如果 Rejuicer 有更好的替代品？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T15:23:40.633

在 Application_Start 中加载配置是一种权衡。其他选项是挂接到 FileSystemWatcher 并等待文件夹更改。鉴于 Web 应用程序的性质，这并不理想。一些替代使用 web.config 也强制重置。

有像[Workbench](http://visualstudiogallery.msdn.microsoft.com/2b96d16a-c986-4501-8f97-8008f9db141a)这样的工具可以在开发过程中完成它的工作（在 VS.NET 中）。这消除了对应用程序启动周期的依赖，并且在应用程序启动时文件就在那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T10:19:15.823

在 _layout.cshtml 文件中，我有与此类似的代码。可以在此处定义站点的 js 文件列表，而无需重置或重新编译站点。

```
@{

    //combine all JS files into one file using Rejuicer. 
    List<string> JsFiles = new List<string>();

    //define list of JS files here
    JsFiles.Add("~/Scripts/One.js");
    JsFiles.Add("~/Scripts/Two.js");      

    if (System.Web.HttpContext.Current.Application["JsFileListing"] != null)
    {

        var JsFileRejuiced = (List<string>)System.Web.HttpContext.Current.Application["JsFileListing"];

        //check if we have any new/removed/renamed files
        if (JsFiles.Except(JsFileRejuiced).Count()> 0 || JsFileRejuiced.Except(JsFiles).Count() > 0)          
        {
            //force application reset
            HttpRuntime.UnloadAppDomain();                
        }
    }

    if (System.Web.HttpContext.Current.Application["JsFileListing"] == null)
    {

        var Combiner = Rejuicer.OnRequest.ForJs("~/Combined.js").Combine;

        foreach (var file in JsFiles)
        {
            Combiner.File(file);
        }
        Combiner.Configure();

        System.Web.HttpContext.Current.Application["JsFileListing"] = JsFiles;
    }
}
@Rejuicer.Rejuiced.JsFor("~/Combined.js") 
```

# wordpress - WooCommerce：在结账时添加元数据（针对产品）

> ID：13272402
> 
> 赞同：6
> 
> 时间：2012-11-07T15:07:25.833
> 
> 标签：wordpress, woocommerce

我有一个关于 WooCommerce 的问题。

在结帐的最后一步，我想为产品添加一些元信息。基本上，在结账过程结束时，用户可以选择将产品提供给朋友。他将输入诸如朋友的电子邮件、姓名等字段。

当我单击“产品”块中的订单详细信息时，我希望能够在管理面板中检索此信息。

......我必须知道如何做到这一点。我找到了一些关于如何向订单添加自定义字段的信息，但是如何将信息添加到订单中的产品而不是订单本身？

谢谢你。我现在有点模糊。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-11T12:15:17.517

Mike Jolley 发布了您可以在主题的functions.php 中插入的完整代码。我最近使用了它，它就像一个魅力。

[https://gist.github.com/mikejolley/1604009](https://gist.github.com/mikejolley/1604009)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T20:33:33.763

我认为 Woothemes [Product Add-ons 插件](http://www.woothemes.com/products/product-add-ons/)可能正是您正在寻找的。您可以使用它将几乎任何类型的自定义字段添加到您的单个产品中。它将在购物车页面上显示它们并将它们保存在您的管理员中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T09:40:25.070

Woocommerce 允许一些钩子和过滤器在结帐页面上添加字段，但是是的，它需要强大的 php 知识。但是这里有可用的插件：[Checkout option manager plugin](http://www.najeebmedia.com/n-media-woocommerce-personalized-checkout-options-manager/)

# javascript - 将带逗号的字符串转换为数组

> ID：13272406
> 
> 赞同：416
> 
> 时间：2012-11-07T15:07:36.970
> 
> 标签：javascript, arrays, string, deserialization

如何将字符串转换为 JavaScript 数组？

看代码：

```
var string = "0,1";
var array = [string];
alert(array[0]); 
```

在这种情况下，`alert`会弹出一个`0,1`. 当它是一个数组时，它会弹出一个`0`，当`alert(array[1]);`它被调用时，它应该弹出`1`.

有没有机会将这样的字符串转换为 JavaScript 数组？

* * *

## 回答 #1

> 赞同：741
> 
> 时间：2012-11-07T15:08:50.853

对于像这样的简单数组成员，您可以使用`JSON.parse`.

```
var array = JSON.parse("[" + string + "]"); 
```

* * *

这为您提供了一个数字数组。

```
[0, 1] 
```

如果你使用`.split()`，你最终会得到一个字符串数组。

```
["0", "1"] 
```

* * *

请注意，这`JSON.parse`会将您限制为支持的数据类型。如果您需要类似`undefined`或函数的值，则需要使用`eval()`, 或 JavaScript 解析器。

* * *

如果你想使用`.split()`，但你也想要一个数字数组，你可以使用`Array.prototype.map`，虽然你需要为 IE8 和更低版本填充它，或者只写一个传统的循环。

```
var array = string.split(",").map(Number); 
```

* * *

## 回答 #2

> 赞同：137
> 
> 时间：2012-11-07T15:08:50.767

[在角色上拆分](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split)它`,`；

```
var string = "0,1";
var array = string.split(",");
alert(array[0]); 
```

* * *

## 回答 #3

> 赞同：95
> 
> 时间：2016-06-28T03:27:52.867

**这在ES6**中很容易实现；

您可以使用[Array.from('string')](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/from)将字符串转换为数组；

```
Array.from("01") 
```

将控制台.log

```
['0', '1'] 
```

这正是您正在寻找的。

* * *

## 回答 #4

> 赞同：69
> 
> 时间：2015-09-05T19:27:55.890

如果字符串已经是列表格式，您可以使用 JSON.parse：

```
var a = "['a', 'b', 'c']";
a = a.replace(/'/g, '"');
a = JSON.parse(a); 
```

* * *

## 回答 #5

> 赞同：27
> 
> 时间：2015-09-18T16:40:31.167

## 转换所有类型的字符串

```
var array = (new Function("return [" + str+ "];")());

var string = "0,1";

var objectstring = '{Name:"Tshirt", CatGroupName:"Clothes", Gender:"male-female"}, {Name:"Dress", CatGroupName:"Clothes", Gender:"female"}, {Name:"Belt", CatGroupName:"Leather", Gender:"child"}';

var stringArray = (new Function("return [" + string+ "];")());

var objectStringArray = (new Function("return [" + objectstring+ "];")()); 
```

JSFiddle [https://jsfiddle.net/7ne9L4Lj/1/](https://jsfiddle.net/7ne9L4Lj/1/)

## 结果在控制台

[![在此处输入图像描述](../Images/5ad2a442d28c60852e44a250ce1d0a5a.png)](https://i.stack.imgur.com/ZusSc.png)

## 一些实践不支持对象字符串

```
- JSON.parse("[" + string + "]"); // throw error

 - string.split(",") 
// unexpected result 
   ["{Name:"Tshirt"", " CatGroupName:"Clothes"", " Gender:"male-female"}", "      {Name:"Dress"", " CatGroupName:"Clothes"", " Gender:"female"}", " {Name:"Belt"",    " CatGroupName:"Leather"", " Gender:"child"}"] 
```

* * *

## 回答 #6

> 赞同：22
> 
> 时间：2013-07-10T03:51:32.300

对于像这样的简单数组成员，您可以使用 JSON.parse。

```
var listValues = "[{\"ComplianceTaskID\":75305,\"RequirementTypeID\":4,\"MissedRequirement\":\"Initial Photo Upload NRP\",\"TimeOverdueInMinutes\":null}]";

var array = JSON.parse("[" + listValues + "]"); 
```

这为您提供了一个数字数组。

现在你的变量值就像 array.length=1

价值输出

```
array[0].ComplianceTaskID
array[0].RequirementTypeID
array[0].MissedRequirement
array[0].TimeOverdueInMinutes 
```

* * *

## 回答 #7

> 赞同：18
> 
> 时间：2012-11-07T15:09:00.160

您可以使用`split`

参考： [http ://www.w3schools.com/jsref/jsref_split.asp](http://www.w3schools.com/jsref/jsref_split.asp)

`"0,1".split(',')`

* * *

## 回答 #8

> 赞同：18
> 
> 时间：2017-02-17T05:28:32.233

使用 ES6 的另一个选项是使用**Spread**语法。

`var convertedArray = [..."01234"];`

```
var stringToConvert = "012";
var convertedArray  = [...stringToConvert];
console.log(convertedArray);
```

* * *

## 回答 #9

> 赞同：11
> 
> 时间：2014-09-24T22:07:30.047

使用带有匿名函数的内置 map 函数，如下所示：

```
string.split(',').map(function(n) {return Number(n);}); 
```

[编辑] 这里是你将如何使用它

```
var string = "0,1";
var array = string.split(',').map(function(n) {
    return Number(n);
});
alert( array[0] ); 
```

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2019-08-26T09:33:09.060

[如何在 JavaScript 中将逗号分隔的字符串转换为数组？](https://www.tutsmake.com/javascript-convert-string-to-array-javascript/)

```
var string = 'hello, world, test, test2, rummy, words';
var arr = string.split(', '); // split string on comma space
console.log( arr );

//Output
["hello", "world", "test", "test2", "rummy", "words"] 
```

有关使用以下方式在 javascript 中将字符串转换为数组的更多示例：

1.  Split() – 无分隔符：

2.  Split() - 空字符串分隔符：

3.  Split() – 开头/结尾的分隔符：

4.  正则表达式分隔符：

5.  捕获括号：

6.  带限制参数的 Split()

    查看此链接 ==> [https://www.tutsmake.com/javascript-convert-string-to-array-javascript/](https://www.tutsmake.com/javascript-convert-string-to-array-javascript/)

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2017-07-27T03:51:41.723

我删除字符 '[',']' 并使用 ',' 进行拆分

```
let array = stringObject.replace('[','').replace(']','').split(",").map(String); 
```

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2018-05-16T07:13:59.167

更多“自己尝试”示例如下。

定义和用法 split() 方法用于将字符串拆分为子字符串数组，并返回新数组。

提示：如果使用空字符串 ("") 作为分隔符，则字符串将在每个字符之间进行分割。

注意： split() 方法不会更改原始字符串。

```
var res = str.split(","); 
```

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2019-12-03T18:34:16.777

您可以使用 javascript [Spread Syntax](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax)将字符串转换为数组。在下面的解决方案中，我删除了逗号，然后将字符串转换为数组。

```
var string = "0,1"
var array = [...string.replace(',', '')]
console.log(array[0]) 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2020-08-25T19:07:22.480

# 正则表达式

作为更强大的替代方案`split`，您可以使用[`match`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/match)

```
"0,1".match(/\d+/g) 
```

```
let a = "0,1".match(/\d+/g)

console.log(a);
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2017-08-25T09:03:15.510

```
var i = "[{a:1,b:2}]",
    j = i.replace(/([a-zA-Z0-9]+?):/g, '"$1":').replace(/'/g,'"'),
    k = JSON.parse(j);

console.log(k)
```

**//** => 声明正则表达式

**[a-zA-Z0-9]** => 匹配所有 az, AZ, 0-9

**():** => 对所有匹配的元素进行分组

**$1** => 替换字符串是指正则表达式中的第一个匹配组。

**g** => 全局标志

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2017-10-16T10:54:49.530

Split(",") 可以将带逗号的字符串转换成字符串数组，这是我的代码片段。

```
 var input ='Hybrid App, Phone-Gap, Apache Cordova, HTML5, JavaScript, BootStrap, JQuery, CSS3, Android Wear API'
    var output = input.split(",");
    console.log(output); 
```

> [“混合应用”、“Phone-Gap”、“Apache Cordova”、“HTML5”、“JavaScript”、“BootStrap”、“JQuery”、“CSS3”、“Android Wear API”]

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2019-05-29T09:28:12.670

使用示例`Array.filter`：

```
var str = 'a,b,hi,ma,n,yu';

var strArr = Array.prototype.filter.call(str, eachChar => eachChar !== ','); 
```

* * *

## 回答 #18

> 赞同：-1
> 
> 时间：2017-02-01T10:28:02.460

你为什么不替换`,`逗号和`split('')`这样的字符串，这将导致`['0', '1']`，此外，你可以将结果包装成`parseInt()`将元素转换为整数类型。

```
it('convert string to array', function () {
  expect('0,1'.replace(',', '').split('')).toEqual(['0','1'])
}); 
```

# django - 使用 Django 在现场和 cms 中使用不同的语言

> ID：13272408
> 
> 赞同：1
> 
> 时间：2012-11-07T15:07:43.417
> 
> 标签：django, django-cms

我有一个用 Django 构建的德国网站。但是，我希望 CMS 后端是英文的，而网站的配置应该保持德文的前端。这在 Django 中可能吗？使用：Django 1.3 Django-CMS 2.3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T16:43:20.443

对的，这是可能的。

这是一个中间件的代码，将完成此操作（取自[http://source.mihelac.org/2009/11/12/django-set-language-for-admin/](http://source.mihelac.org/2009/11/12/django-set-language-for-admin/)）：

```
from django.conf import settings
from django.utils import translation

class AdminLocaleURLMiddleware:

    def process_request(self, request):
        if request.path.startswith('/admin'):
            request.LANG = getattr(settings, 'ADMIN_LANGUAGE_CODE', settings.LANGUAGE_CODE)
            translation.activate(request.LANG)
            request.LANGUAGE_CODE = request.LANG 
```

# symfony - Symfony 2 自定义用户提供程序和身份验证

> ID：13272409
> 
> 赞同：1
> 
> 时间：2012-11-07T15:07:44.693
> 
> 标签：symfony

我正在开展一个项目，其中网站的一部分是安全的。进行身份验证的用户的凭据存储在 QuickBase（具有自定义 API 的在线数据库）中，密码使用自定义哈希进行加密。

有人可以对我需要构建和实现哪些类以支持从 Web 服务验证这些用户并使用我自己的密码哈希机制进行高级别的介绍吗？

这是我的security.yml：

```
security:
    firewalls:
        secured_area:
            pattern:    ^/account
            provider: quickbase_users
            form_login:
                login_path: /login
                check_path: /login_check

    access_control:
        - { path: ^/admin, roles: ROLE_ADMIN }

    providers:
        quickbase_users:
            id: quickbase_user_provider

    encoders:
        Symfony\Component\Security\Core\User\User: plaintext 
```

这是我的路线：

```
login:
    pattern:   /login
    defaults:  { _controller: JMLWebsiteBundle:Security:login }
login_check:
    pattern:   /login_check 
```

在 /login 提交用户/通行证后，我目前收到此错误：

```
Unable to find the controller for path "/login_check". Maybe you forgot to add the matching route in your routing configuration? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T15:19:46.773

1.  创建实现`Symfony\Component\Security\Core\User\UserInterface`.
2.  创建自定义编码器服务：

    1.  创建一个实现的服务`Symfony\Component\Security\Core\Encoder\PasswordEncoderInterface`
    2.  将该服务注册为您的用户类的编码器`security.yml`：

        ```
        security:
            encoders:
                MyCustomBundle\Entity\User:  # Class/interface from point #1
                    id: my.encoder.service   # Service id from point #2.1 
        ```

3.  创建自定义用户提供程序：

    1.  创建一个实现的服务`Symfony\Component\Security\Core\User\UserProviderInterface`
    2.  将该服务注册为用户提供者`security.yml`：

        ```
        security:
            [...]

            providers:
                my_custom_user_provider:
                    id: my.user_provider.service # Service id from point #3.1 
        ```

查看[FOSUserBundle](https://github.com/FriendsOfSymfony/FOSUserBundle)以查看自定义用户提供程序的实现示例。

# coffeescript - 在不同的脚本中引用变量和函数

> ID：13272410
> 
> 赞同：0
> 
> 时间：2012-11-07T15:07:49.403
> 
> 标签：coffeescript, kendo-ui

我认为这个问题已经被问过了，但我已经通过谷歌和这里进行了搜索，但仍然对它的工作原理有些困惑。

我有两个脚本，CS1.coffee 和 CS2.coffee，CS1 是与主页一起加载的，上面有一个按钮。当按下按钮时，会出现一个窗口并运行 CS2。但是，我想从 CS2 中的方法引用 CS1 中存在的变量。

换句话说，

1.  主页加载，调用 CS1（具有按钮逻辑）
2.  按钮被按下
3.  出现一个调用 CS2 的新 KendoWindow（此窗口显示取自 CS1 中的变量的数据）

示例代码：

```
CS1.coffee
root = export ? this
root.number = 42
$("#winButton").click=->
    //new kendoWindow appears, with content being a separate html containing CS2 scripts
root.testFunc =->
    alert 'I was called'

CS2.coffee
root = export ? this
answer = root.number
$("#testButton").click =->
    root.testFunc 
```

# c++ - 我怎样才能让这个链接列表正常工作？

> ID：13272411
> 
> 赞同：-1
> 
> 时间：2012-11-07T15:07:48.250
> 
> 标签：c++, linked-list

我对链接列表**很**陌生，我似乎无法弄清楚为什么这不起作用。

程序不会崩溃，编译器没有显示错误但`doActions()`永远不会运行。

这是函数的代码，它在主循环中调用。

```
void Action()
{
    clsParent* pCurrent;
    pCurrent = pHead;
    while(pCurrent != NULL)
    {
        clsPlayer* pPlayer;
        pPlayer = dynamic_cast<clsPlayer*>(pCurrent);
        if(pPlayer != NULL)
        {
            pPlayer->doActions();
        }
        pCurrent = pCurrent->pNext;
    }
} 
```

这应该要求`doActions()`列表中的每个玩家（尽管只有一个）。

`doAction()`在我尝试在代码中实现链表之前工作得非常好，所以我知道不是这样。对于那些对它的作用感到好奇的人，它会检查玩家是否在跳跃并相应地移动玩家。

**编辑：我注意到我可以放入其他功能，它会工作**

这有效：

```
void clsPlayer::jump()
{
    if(onGround)
    {
        jumping = true;
        yPos -= gravitySpeed;
        animationState = 3;
    }
} 
```

虽然这不是

```
void clsPlayer::doActions()
{
    if(!onGround)
    {
        yPos += gravitySpeed;
    }

    if(jumping)
    {
        jumpTimeCounter++;
        yPos -= 20;
        if(jumpTimeCounter > 10)
        {
            jumping = false;
            jumpTimeCounter = 0;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T15:12:26.457

pCurrent 如果是 clsParent 类型或其子类。键入 clsPlayer 的 dynamic_cast 将始终失败并返回 null。也许有一个成员数据，你应该使用类似的东西（甚至可能不需要演员）：

```
clsPlayer* pPlayer;
pPlayer = dynamic_cast<clsPlayer*>(pCurrent->data); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T16:03:14.707

根据您发布的代码，我将为您提供以下建议的解决方案：

```
template<T>
class ListNode
{
public:
    T* m_pNext;
};

class Base : public ListNode<Base>
{
public:
    Base();
    virtual ~Base();
    virtual void doActions() = 0;
};

class Derived1 : public Base
{
public:
    Derived1();
    virtual ~Derived1();
    virtual void doActions();
};

class Derived2 : public Base
{
public:
    Derived2();
    virtual ~Derived2();
    virtual void doActions();
};

void action()
{
    Base* pCurrent = pHead;
    while (pCurrent != NULL)
    {
        pCurrent->doActions();
        pCurrent = pCurrent->m_pNext;
    }
} 
```

注意事项：

1.  ListNode 是一个模板类，您的基类（在您的示例中为 clsParent）继承自它。
2.  基类将 doActions 声明为纯虚函数，因此派生类可以定义自己的特定实现。
3.  作为 1 和 2 的结果，请注意遍历列表并调用 doActions 方法的循环被简化，因为我们现在避免了强制转换。

# algorithm - 传递 int = 0 时查找整数中的位数

> ID：13272413
> 
> 赞同：-1
> 
> 时间：2012-11-07T15:07:53.640
> 
> 标签：algorithm, math, numbers, digits, logarithm

顺便说一句，使用 Java。但通常人们似乎会做这种事情。

```
int numDigits = (int)(log10(num)+1); //can explicitly floor, or casting to int will do that 
```

但是 log10(0) = -INF，这意味着我的长度被设置为最大的负整数值。

我想我可以提出条件

```
if (numDigits is negative)
    numDigits = 1 //not 0 because I'm counting 0 as 1 digit. 
```

这用于实现自然数构造函数，以便人们了解我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T15:12:46.530

您列出的代码意味着 -10 的 numDigits 值为 1，我认为这是不正确的。

如何将数字转换为字符串并获取字符串长度？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T15:18:29.950

如果您有特定的优化问题，请使用日志解决方案：

```
int length = (number ==0) ? 1 : (int)Math.log10(number) + 1; 
```

否则，我建议您使用 String.valueOf 解决方案，因为对于未来的开发人员/维护人员来说，它更具可读性和更容易理解：

```
int length = String.valueOf(number).length(); 
```

# curl - 使用 libcurl/curl 时的弹性搜索 json 范围查询问题

> ID：13272414
> 
> 赞同：1
> 
> 时间：2012-11-07T15:07:53.890
> 
> 标签：curl, libcurl, elasticsearch

我正在使用 libcurl 从弹性搜索中检索我的索引结果。我对以下代码有疑问。意思是，它不返回任何结果。[http://pastebin.com/NgdTBTAb](http://pastebin.com/NgdTBTAb)

我尝试了它的卷曲变化（如下），但没有成功。

```
curl -XGET http://localhost:9202/_all/_search?pretty=true -d '{
    "size": 1000000,
    "query" : {
        "range" : {
            "snapshotTime" : {
                "from" : "2012-10-31T13:00:00",
                "to" : "2012-10-31T14:00:00"
            }
        }
    }
}' 
```

范围查询中没有“to”的相同代码似乎工作正常。它的 curl 版本的请求检索所有结果。[http://pastebin.com/DYi10upZ](http://pastebin.com/DYi10upZ)

我查询的方式有问题吗？

预期的结果集（部分）在这里。[http://pastebin.com/xNLwZmqK](http://pastebin.com/xNLwZmqK)

谢谢。

# node.js - 如何使用 Mocha 和 Zombie.js 测试 express app headless

> ID：13272416
> 
> 赞同：2
> 
> 时间：2012-11-07T15:07:54.740
> 
> 标签：node.js, express, mocha.js, zombie.js

我正在尝试在我的新 node.js (express) 应用程序上运行一些 Mocha/Zombie.js 测试。

现在我想这样做而不必重新启动节点应用程序。

现在，我有一个工作测试，如下所示：

```
var assert=require('assert')
    , Browser = require("zombie")
    ;

var browser = new Browser();
browser.site = "http://domain.com";
browser.silent = false;

describe('Home page', function(){
    describe ('Page title', function(){
        it('should open a home page', function(done){
            browser.visit('/').
            then(function(done){
                assert.equal(browser.text("title"), "My page title");
                done();
            }).fail(function(err){
                done(err);
            });
        });
    });
}); 
```

因此，当测试失败时，我会更改页面标题，*重新加载应用程序*，然后重新运行测试以使其通过。

我知道我可以做类似的事情：

```
var server = require('../server');
var browser = new Browser(); 
```

我只是不知道怎么做，而且我无法从 Mocha 和 Zombie 示例页面中看到。

如何告诉 browser.visit 访问*服务器*而不是真正部署的网页？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T17:45:50.490

正如我在此处的聊天中所建议的那样，我正在使用[Node-supervisor](https://github.com/isaacs/node-supervisor) - 节点应用程序的主管，我对它说要监视的内容并在应用程序更改时自动重新启动应用程序。

# c# - 在运行时覆盖/替换 app.config 中的 ConfigurationElements

> ID：13272418
> 
> 赞同：0
> 
> 时间：2012-11-07T15:08:01.230
> 
> 标签：c#, app-config, configurationelement

我有两个 ConfigurationElement 对象（其中一个在正在运行的应用程序的 app.config 中），我需要用另一个替换它。我还有第一个元素所属的 ConfigurationElementCollection。看起来 Add 和 Remove 方法在内部受到保护。难道我不能在运行时更新 ConfigurationElementCollection 对象吗？如果是这样，有哪些替代方案？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T16:10:52.863

ConfigurationElementCollection 是一个抽象类，因此具体的集合类可能会公开添加和删除的方法。

[但是，当使用ConfigurationManager.GetSection](http://msdn.microsoft.com/en-us/library/system.configuration.configurationmanager.getsection.aspx)方法检索时，配置是只读的，因此即使可以访问这些方法，它们也不起作用：

*GetSection 方法访问它无法更改的运行时配置信息。要更改配置，请对通过以下打开方法之一获取的配置文件使用 GetSection 方法：*

您需要完成什么，以及谁在使用该配置？您可能能够在更高级别更改其行为，而不是交换配置信息。

# vb.net - 如何获取 Windows 回收站中文件的“删除日期”

> ID：13272420
> 
> 赞同：0
> 
> 时间：2012-11-07T15:08:06.150
> 
> 标签：vb.net

多亏了 Ravindra Bagale，我现在可以访问回收站（尽管为什么它不是 Microsoft 知道的“特殊文件夹”！），但我可以访问该项目到达回收站的日期。它显示在详细信息视图中，但我无法访问它...

我已经尝试了回收站中的项目和回收站中的实际文件的通常位置（创建日期、修改日期等）......

有没有其他人做到这一点？

# macos - 使用 mach_inject 查找注入，更改注入消息

> ID：13272424
> 
> 赞同：1
> 
> 时间：2012-11-07T15:08:17.843
> 
> 标签：macos, finder

我编写了一个查找器注入包，并使用开发人员 ID 证书签署了二进制文件。注入工作正常，但我在注入代码时看到一条许可消息，因为“开发者工具访问权限正在尝试采用....... 有人知道如何更改此消息吗？！[我不允许在此处添加图像，否则我会添加该许可消息的图像]。

此外，每次登录 OSX 时也可以看到此权限，我们可以更改行为，以便我们不会在每次登录 OSX 机器时显示此消息吗？这就是 dropbox 的实现方式，我不知道如何实现，因为没有关于此的技术文档。非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T12:15:25.913

看看这个[链接](http://www.mailinglistarchive.com/html/xcode-users@lists.apple.com/2009-09/msg00291.html)。将您的用户名添加到`_developer`组。

```
sudo dscl . append /Groups/_developer GroupMembership <username> 
```

# testing - Grinder 3 - 将汇总结果记录到文件中

> ID：13272426
> 
> 赞同：0
> 
> 时间：2012-11-07T15:08:24.667
> 
> 标签：testing, load-testing, grinder

研磨机 3 在 GUI 控制台中显示汇总结果。有没有办法在日志文件中获取这些结果。

我希望能够自动启动控制台，然后在 excel 中加载它的图表。

我并不是说我想要每个代理的日志文件中的统计信息，而是我想要在控制台中显示聚合统计信息。

菜单中的“保存结果”不起作用，因为它只存储给定时刻的结果。我想要的图表是动态的

我希望稍后能够通过 csv 在 excel 中重新创建此图： ![磨床统计](../Images/3bf451a9657c9ebf3e54dc3becbbfda7.png)

# c# - 删除 AppData 中的数据库时崩溃：访问被拒绝

> ID：13272429
> 
> 赞同：2
> 
> 时间：2012-11-07T15:08:36.493
> 
> 标签：c#, database, path, privileges, appdata

我有此代码用于为数据库创建路径：

```
static string folder = Application.UserAppDataPath; 
static string fisier = "prog.db"; 
string file = folder + "\\" + fisier; 
```

而这个删除数据库的代码：

```
if (System.IO.File.Exists(file))
   System.IO.File.Delete(file); 
```

而这个用于编写数据库的代码：

```
if (!System.IO.File.Exists(file)) 
            {
                System.IO.File.WriteAllText(file, "");
            } 
```

代码运行良好，但问题在于权限。对某些人来说，是删除数据库的问题，应用程序会因为无法删除数据库而崩溃。不仅对某些人有效，在我的情况下，工作完美，但如果你没有特权，我想解决问题以不崩溃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T15:42:47.723

错误处理：try-catch 是你的朋友。

# coding-style - 我应该将某些内容返回到全局变量中还是应该设置它？什么是干净的代码方式？

> ID：13272438
> 
> 赞同：0
> 
> 时间：2012-11-07T15:08:58.563
> 
> 标签：coding-style

我想知道是否最好使用以下结构：

```
private var x = new MyType();
x = GetResults(); 
```

或者

```
public var x = new MyType();
GetResults();//this accesses the global x and populates it 
```

基本上我应该隐藏我从主线程填充的内容吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T15:16:22.017

这很明显：第一个。似乎如此明显以至于没有人有能力回答？第二个解决方案只是没有显示发生了什么。

# java - 基于带有 Spring WebMVC REST 控制器的接受标头的不同响应实体主体

> ID：13272443
> 
> 赞同：1
> 
> 时间：2012-11-07T15:09:07.283
> 
> 标签：java, spring, rest, spring-mvc, xml-serialization

我有一个带有这样的方法签名的控制器

```
@RequestMapping(value = "/{project:[A-Z0-9_+\\.\\(\\)=\\-]+}", method = RequestMethod.GET)
public ResponseEntity<Object> lookupProject(@PathVariable String project,
        @RequestParam(value = "fields", required = false) String fields,
        @RequestParam(value = "asList", required = false, defaultValue = "false") boolean asList); 
```

我要返回 JSON a`Collection<Object>`或`Map<String, Object>`. 这不适用于 XML。我宁愿返回一个`Project`对象。

是否有一种干净的方法来确定将生成哪种内容类型？解决方法是另一种仅生成 XML 并返回`Project`对象的方法。我宁愿避免重复代码。

我在 Spring 3.1.3-RELEASE 上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T18:25:05.667

根据 Spring 文档，您的生产参数将根据 Accept 返回内容，即

```
@RequestMapping(value="/someUrl/", produces="application/*")
public Project someControllerMethod(...) 
```

如果该方法采用 application/xml，该方法将生成 XML，如果是 application/json，则该方法将生成 json 等。

您只需要为适当的对象类型设置编组器。

此处的文档：

[http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/bind/annotation/RequestMapping.html#produces](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/bind/annotation/RequestMapping.html#produces) ()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T05:30:37.680

要生成的内容类型将取决于客户端可接受的类型。已经提到了一个解决方案，使用产生属性。另一个解决方案是使用 ContentNegotiatingViewResolver，它可以根据接受标头或其他机制解析视图。

请参阅文档[http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/servlet/view/ContentNegotiatingViewResolver.html](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/servlet/view/ContentNegotiatingViewResolver.html)

示例：[http ://www.mkyong.com/spring-mvc/spring-3-mvc-contentnegotiatingviewresolver-example/](http://www.mkyong.com/spring-mvc/spring-3-mvc-contentnegotiatingviewresolver-example/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T21:55:06.230

尽管如此，我认为 Dardo 的解决方案是最好的，您可以使用 XMLHttpMessageConverter 检查对象类型，如果它是 Project 对象，则可以进行不同的转换。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-21T13:40:11.043

在 Spring Framework 4.1 中，您可以使用 ResponseBodyAdvice 在写出之前修改从 @ResponseBody 或 ResponseEntity 方法返回的值。

请参阅[http://docs.spring.io/spring-framework/docs/4.1.0.RC2/javadoc-api/org/springframework/web/servlet/mvc/method/annotation/ResponseBodyAdvice.html](http://docs.spring.io/spring-framework/docs/4.1.0.RC2/javadoc-api/org/springframework/web/servlet/mvc/method/annotation/ResponseBodyAdvice.html)。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-11-08T10:46:13.110

我最终分成了两种方法。

公共方法已重命名为`lookupAsType`. 委托/返回

```
String[] fieldsArray = StringUtils.split(fields, ',');
return lookup(project, fieldsArray, asList, mediaType); 
```

新方法`lookup`与之前的代码相同，但不包含媒体类型的 if 子句。

```
if (mediaType.equals(MediaType.APPLICATION_JSON)) {
    body = projectValues;
} else if (mediaType.equals(MediaType.APPLICATION_XML)) {
    body = new Project(projectValues);
} else {
    throw new NotImplementedException("Project lookup is not implemented for media type '" + mediaType + "'");
} 
```

不好的是 MediaType 不是枚举而是丑陋的类。

# knockout.js - 带油门的淘汰赛验证

> ID：13272446
> 
> 赞同：4
> 
> 时间：2012-11-07T15:09:14.220
> 
> 标签：knockout.js, knockout-validation

我刚刚注意到使用油门扩展器会导致淘汰赛验证停止工作。有没有办法解决这个问题？

```
var viewModel = {
    label1: ko.observable('label1').extend({required: true}),
    label2: ko.observable('label2').extend({required: true, throttle: 1}),
};

ko.applyBindings(viewModel); 
```

jsFiddle：http: [//jsfiddle.net/rWqkC/](http://jsfiddle.net/rWqkC/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T16:08:12.077

在这种情况下，扩展器的顺序确实很重要，因为`throttle`扩展器返回一个新`ko.dependentObservable`的，这就是为什么如果你有第`required`一个，那么它将应用于错误的 observable。

更改顺序，它应该可以工作：

```
ko.observable('label2').extend({throttle: 500, required: true }), 
```

但是因为没有真正定义按属性声明顺序执行的扩展程序，所以在这种情况下使用两个扩展会更安全：

```
ko.observable('label2').extend({throttle: 500}).extend({required: true }) 
```

[演示小提琴。](http://jsfiddle.net/Bj6Y6/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-31T18:17:03.593

对于找到此答案的任何人：

如果您使用的是 3.1.0 之后的 Knockout 版本，请考虑使用[rateLimit 扩展器](https://knockoutjs.com/documentation/rateLimit-observable.html)。（rateLimit 代替油门）

# ios - 来自 Tumblr 的回调删除了我的超级视图

> ID：13272447
> 
> 赞同：0
> 
> 时间：2012-11-07T15:09:22.253
> 
> 标签：ios, view, callback, tumblr

这是我的问题。我在我的应用程序中设置了一个回调 URL，但是当它被调用时，它会删除我的超级视图。

更准确地说，我在 info.plist 中将 MyAppName 设置为 URL Scheme。（我已经使用了 facebook API 并且效果很好）。然后，我将视图称为仅部分视图，这意味着它不会覆盖整个屏幕。只是其中的一部分。之后，我单击 Tumblr 按钮，该按钮调用 webview 使我能够连接到我的会话。但是当我回到我的应用程序时，部分视图已从超级视图中删除。

所以我想知道我是否必须在我的回调 URL 中设置一些特殊的东西，因为现在，它只是： MyAppName://Share （知道“共享”只是为了放置一些东西。无论哪种方式，我都会被重定向到默认 URL，即 Tumblr 主页）

感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T16:18:31.563

抱歉，我刚刚发现它为什么不起作用：由于我使用的是 GTMOAuth，因此您推送包含 webview 的 ViewController，并假设您使用 NavigationController 推送它，所以我只是将 GTMOAuth 的 ViewController 推送到 NavigationController 并且它正在弹出图书馆的代码。

# directx - 在 DirectX 中绘制多个 2d 形状

> ID：13272448
> 
> 赞同：1
> 
> 时间：2012-11-07T15:09:23.680
> 
> 标签：directx, directx-11

我完成了关于在 directx 中渲染 2d 三角形的教程。现在，我想利用我在渲染单个三角形的知识来渲染多个三角形，或者就此而言在屏幕上渲染多个对象。

我应该创建一个顶点缓冲区和输入布局的列表/堆栈/向量，然后绘制每个对象吗？或者有更好的方法吗？

我的过程是：

*   设置directx，包括顶点和像素着色器
*   为必须在屏幕上绘制的每个形状创建顶点缓冲区并将它们存储在数组中。
*   将它们绘制到每一帧的渲染目标（每一帧）
*   呈现渲染目标（每帧）

请在回答时假设您对 DirectX 和图形编程有非常基本的了解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T01:42:00.303

您不需要为每个形状创建顶点缓冲区，您可以只创建一个来存储所有三角形的所有顶点，然后创建一个索引缓冲区来存储所有形状的所有索引，最后用索引缓冲区绘制它们。我对 DX11 不熟悉，所以，我只是列出了 D3D 9 的链接供您参考，我认为这个概念是相同的，只是有一些 API 更改。

[索引缓冲区（Direct3D 9）](http://msdn.microsoft.com/en-us/library/windows/desktop/bb174595%28v=vs.85%29.aspx)

[从顶点和索引缓冲区渲染](http://msdn.microsoft.com/en-us/library/windows/desktop/bb147325%28v=vs.85%29.aspx)

如果三角形的形状相同，只是位置或颜色不同，可以考虑使用几何实例化，这是渲染相同几何的多个副本的有效方法。

[几何实例化](http://en.wikipedia.org/wiki/Geometry_instancing)

[有效地绘制多个几何实例（D3D9）](http://msdn.microsoft.com/en-us/library/bb173349%28VS.85%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-16T11:47:49.837

您只需要一个顶点缓冲区来执行此操作，然后对它们进行批处理，

所以这就是你可以做的，你可以制作一个包含三角形信息的数组/向量，比如说（伪代码）

```
struct TriangleInfo{
  ..... texture;
  vect2 pos;
  vect2 dimension;
  float rot;

} 
```

然后在你绘制方法

```
for(int i=0; i < vector.size(); i++){

    TriangleInfo tInfo = vector[i];
    matrix worldMatrix = Transpose(matrix(tInfo.dimension) * matrix(tInfo.rot) * matrix(tInfo.pos));

    shaderParameters.worldMatrix = worldMatrix; //info to the constabuffer

    ..
    ..
    dctx->PSSetShaderResources(0, 1, &tInfo.texture);
    dctx->Draw(0,4);
} 
```

然后在你的顶点着色器中：

```
cbuffer cbParameters : register( b0 ) { 
    float4x4 worldMatrix; 
};

VOut main(float4 position : POSITION, float4 texCoord : TEXCOORD)
{
    ....
    output.position = mul(position,worldMatrix);
    ...

} 
```

记住所有都是伪代码，但这应该给你的想法，但是如果你打算制作很多三角形，比如说1000个三角形，可能这不是最好的选择，你应该使用 DrawIndexed 并修改每个三角形的顶点位置，或者您可以使用更简单的 DrawInstanced ，以便能够在一次 Draw 调用中发送所有信息，因为调用 Draw * triangleCount 对大量而言非常繁重

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T15:26:21.927

我对 DirectX 了解不多，但在 GPU 上渲染的一般规则是为每个网格使用单独的顶点和索引缓冲区。

尽管没有什么限制您使用具有许多索引缓冲区的单个顶点缓冲区，但实际上您可能会获得一些性能提升，尤其是对于小型网格......

# python - 有效地将 Numpy/Scipy 稀疏和密集矩阵相乘

> ID：13272453
> 
> 赞同：18
> 
> 时间：2012-11-07T15:09:44.153
> 
> 标签：python, performance, numpy, scipy, sparse-matrix

我正在努力实现以下等式：

```
X =(Y.T * Y + Y.T * C * Y) ^ -1 
```

Y 是 (nxf) 矩阵，C 是 (nxn) 对角矩阵；n 约为 300k，f 将在 100 到 200 之间变化。作为优化过程的一部分，这个方程将被使用近 1 亿次，因此必须非常快速地处理它。

Y 是随机初始化的，C 是一个非常稀疏的矩阵，对角线上的 300k 中只有少数数字会与 0 不同。由于 Numpy 的对角函数会创建密集矩阵，因此我将 C 创建为稀疏 csr 矩阵。但是当试图解方程的第一部分时：

```
r = dot(C, Y) 
```

计算机由于内存限制而崩溃。然后我决定尝试将 Y 转换为 csr_matrix 并进行相同的操作：

```
r = dot(C, Ysparse) 
```

这种方法花费了**1.38 ms**。但是这个解决方案有点“棘手”，因为我使用稀疏矩阵来存储密集矩阵，我想知道这到底有多有效。

所以我的问题是，是否有某种方法可以将稀疏 C 和密集 Y 相乘，而不必将 Y 变为稀疏并提高性能？如果 C 可以以某种方式表示为对角密集而不消耗大量内存，那么这可能会导致非常高效的性能，但我不知道这是否可能。

我感谢您的帮助！

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-05-25T22:26:38.127

计算 r = dot(C,Y) 时点积遇到内存问题的原因是因为 numpy 的 dot 函数没有原生支持处理稀疏矩阵。正在发生的事情是 numpy 将稀疏矩阵 C 视为 python 对象，而不是 numpy 数组。如果您进行小规模检查，您可以直接看到问题：

```
>>> from numpy import dot, array
>>> from scipy import sparse
>>> Y = array([[1,2],[3,4]])
>>> C = sparse.csr_matrix(array([[1,0], [0,2]]))
>>> dot(C,Y)
array([[  (0, 0)    1
  (1, 1)    2,   (0, 0) 2
  (1, 1)    4],
  [  (0, 0) 3
  (1, 1)    6,   (0, 0) 4
  (1, 1)    8]], dtype=object) 
```

显然以上不是您感兴趣的结果。相反，您想要做的是使用 scipy 的 sparse.csr_matrix.dot 函数进行计算：

```
r = sparse.csr_matrix.dot(C, Y) 
```

或更紧凑

```
r = C.dot(Y) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-07T16:48:43.837

尝试：

```
import numpy as np
from scipy import sparse

f = 100
n = 300000

Y = np.random.rand(n, f)
Cdiag = np.random.rand(n) # diagonal of C
Cdiag[np.random.rand(n) < 0.99] = 0

# Compute Y.T * C * Y, skipping zero elements
mask = np.flatnonzero(Cdiag)
Cskip = Cdiag[mask]

def ytcy_fast(Y):
    Yskip = Y[mask,:]
    CY = Cskip[:,None] * Yskip  # broadcasting
    return Yskip.T.dot(CY)

%timeit ytcy_fast(Y)

# For comparison: all-sparse matrices
C_sparse = sparse.spdiags([Cdiag], [0], n, n)
Y_sparse = sparse.csr_matrix(Y)
%timeit Y_sparse.T.dot(C_sparse * Y_sparse) 
```

我的时间：

```
In [59]: %timeit ytcy_fast(Y)
100 loops, best of 3: 16.1 ms per loop

In [18]: %timeit Y_sparse.T.dot(C_sparse * Y_sparse)
1 loops, best of 3: 282 ms per loop 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-07T15:46:38.380

首先，您真的确定需要在您的问题中执行完整的矩阵求逆吗？大多数时候，只需要计算 x = A^-1 y，这是一个更容易解决的问题。

如果确实如此，我会考虑计算逆矩阵的近似值而不是完整的矩阵求逆。因为矩阵求逆*真的很*昂贵。例如，请参见[Lanczos 算法](http://en.wikipedia.org/wiki/Lanczos_algorithm)，以获取逆矩阵的有效逼近。作为奖励，可以稀疏地存储近似值。另外，它只需要矩阵向量运算，因此您甚至不必存储整个矩阵来求逆。

作为替代方案，使用 pyoperators，您还可以使用 to .todense 方法使用有效的矩阵向量运算来计算矩阵以求逆。对角矩阵有一个特殊的稀疏容器。

对于 Lanczos 算法的实现，您可以查看[pyoperators](https://github.com/pchanial/pyoperators)（免责声明：我是该软件的合著者之一）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-19T04:20:19.013

我不知道问这个问题时是否有可能；但现在，广播是你的朋友。n*n 对角矩阵只需是要在矩阵乘积中使用的对角元素数组：

```
>>> n, f = 5, 3
>>> Y = np.random.randint(0, 10, (n, f))
>>> C = np.random.randint(0, 10, (n,))
>>> Y.shape
(5, 3)
>>> C.shape
(5,)
>>> np.all(Y.T @ np.diag(C) @ Y == Y.T*C @ Y)
True 
```

请注意，这`Y.T*C @ Y`是非关联的：

```
>>> Y.T*(C @ Y)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ValueError: operands could not be broadcast together with shapes (3,5) (3,) 
```

但`Y.T @ (C[:, np.newaxis]*Y)`会产生预期的结果：

```
>>> np.all(Y.T*C @ Y == Y.T@(C[:, np.newaxis]*Y))
True 
```

# c#-4.0 - 如何使用 linq 查询作为 TreeView 或 GridView 的数据源

> ID：13272455
> 
> 赞同：0
> 
> 时间：2012-11-07T15:09:51.573
> 
> 标签：c#-4.0, treeview, linq-to-xml, xmldatasource

我试图找到一种方法来使用我的 linq 查询的结果作为 C# 中 TreeView 和 GridView 的数据源，而不必先将文件保存在服务器中。尝试了各种选项，但都要求先将文档另存为文件。有人可以帮我吗？代码如下：

```
XDocument products = new XDocument(
        new XDeclaration("1.0", "utf-8", ""),
          new XElement("products",
                new XElement("product", new XAttribute("id", "p1"), 
                        new XElement("name", "Alpha"),
                        new XElement("Address", "200 WATERLOO DRIVE"),
                        new XElement("price",
                            new XElement("currency", "Rs.")),
                        new XElement("stock", "19"),
                        new XElement("country", "USA",
                            new XElement("state", "California"))),
                new XElement("product", new XAttribute("id", "p2"),
                        new XElement("name", "Beta"),
                        new XElement("Address", "500 MOUNTBATTEN AVENUE"),
                        new XElement("price",
                            new XElement("currency", "Rs.")),
                        new XElement("stock", "25"),
                        new XElement("country", "USA",
                            new XElement("state", "Florida")))));
//create a linq query
var newxml = from f1 in products.Elements("product")
                      where (string)f1.Element("country").Element("state") != "Florida" 
                      select f1;

//Create an xml document in memory using the linq query
XDocument xdoc = new XDocument(
       new XDeclaration("1.0", "utf-8", ""),
         new XElement("products"));
xdoc.Element("products").Add(newxml);

//create a datasource for TreeView or GridView using the xml document in memory.
XmlDataSource xmlds = new XmlDataSource();
xmlds.DataFile=xdoc;
TreeView1.DataSource = xmlds;
TreeView1.DataBind();
GridView1.DataSource = xmlds;
GridView1.DataBind(); 
```

从 xdoc 创建数据源的部分代码不起作用。可以通过保存文件然后为数据源调用文件来使其工作，但我想从内存中执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:10:49.063

您可以将 linq 查询结果直接用作数据源。

gridview1.datasource = newxml; gridview1.databind();

我遇到的缺点是，例如要进行排序，您将需要实现自己的排序方法。

# database - 使用 oracle db 选择日期+时间+时区

> ID：13272463
> 
> 赞同：4
> 
> 时间：2012-11-07T15:10:19.263
> 
> 标签：database, oracle, date

我想获得以下格式的日期：

> 2009-01-15T09:13:51.0Z

我使用以下语句：

```
SELECT to_char(sysdate, 'YYYY-mm-DD HH24:MI:SS.') 
```

但这会返回：

> 2012-11-07 16:12:00。

如何`T`在中间和`0Z`末尾添加广告？

这是可能的还是我必须使用连接？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T15:14:46.910

把它放在双引号中。

```
to_char(sysdate, 'YYYY-mm-DD"T"HH24:MI:SS."0Z"') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T17:37:10.453

to_char((sysdate,''YYYY-mm-DD HH24:MI:SS TZD') 返回用户计算机上的缩写时区。如果是另一个时区，您将需要从您自己的时区中添加/减去小时数以获取正确的时间当前时区。有一个带有时区数据的 oracle 格式。而不是将列设为日期，您可以将其设为以下 sql 类型之一

```
Type TIMESTAMP adds miliseconds but no timezone.
Type TIMESTAMP WITH TIMEZONE same as timestamp but with timezone it was saved with.
Type TIMESTAMP WITH LOCAL TIMEZONE same as timestamp but all is saved in local timezone. 
```

# ios - Facebook 评论集成 iOS

> ID：13272467
> 
> 赞同：0
> 
> 时间：2012-11-07T15:10:37.573
> 
> 标签：ios, facebook, comments

有没有人已经成功地将 Facebook 评论集成到 iOS 中？

我正在为博客制作应用程序，我*只是*想整合 facebook 评论

我尝试了 UIWebView 方式，但它在 iOS 6 中没有显示任何内容。我尝试了很多方法让它工作，但是当我看到它没有出现在 twitter 应用程序的 web 视图中时，我停止了。

我还尝试集成 SDK，虽然无法发布评论（来自 api 的错误），但我至少尝试检索附加到 URL 的所有评论，但由于无法在 FQL 中加入表格，我将不得不，对于每条评论，检索有关发布评论的用户的信息......愚蠢！

我是唯一一个被 Facebook 诅咒的人吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T06:54:21.573

我也无法做到这一点，所以我们至少有两个人被诅咒了。如果 facebook 允许您使用 facebook 评论框对 facebook 帖子发表评论，那就太好了。我认为使用 facebook API 文档并不是很有帮助。

# vb.net - 在软件设计工厂模式中使用抽象泛型类

> ID：13272471
> 
> 赞同：5
> 
> 时间：2012-11-07T15:10:56.490
> 
> 标签：vb.net, generics, abstract-class, factory-pattern

我有一点设计问题。我创建了一个费率计算器，如下所示：

```
Public Interface ICalculator
 Property PaymentTerm As Double
 Function Calculate() As CommissionValues
 ReadOnly Property CalculationRule As CalculationRuleEnum
End Interface

Public Interface IFlexibleRateCalculator
 Inherits ICalculator
  Property TransferRate As Decimal
End Interface

Public Interface IFixedRateCalculator
 Inherits ICalculator
  Property ContractRate As Decimal
End Interface

Public Interface IRateSettingBase
  Property RateType As RateTypeEnum
  ReadOnly Property Calculator As ICalculator
End Interface

Public MustInherit Class RateSetting
 Implements IRateSettingBase
  Public MustOverride ReadOnly Property Calculator() As ICalculator Implements IRateSettingBase.Calculator 
```

我可以做这样的事情：

```
dim ratevalues as RateValues = RateSetting().Calculator.Calculate() 
```

很简单。问题是每种类型的计算器都有自己的一组属性，需要设置这些属性才能使其Calculate() 方法正常工作。所以我最终不得不执行如下

```
FlexibleRateCalculator
Implements IFlexibleRateCalculator
    Private mRequestedRate As Decimal
    Public Function Calculate() As RateValues Implements ICalculator.Calculate

FixedRateCalculator
 Implements IFixedRateCalculator
    Private mTransferRate As Decimal
    Public Function Calculate() As RateValues Implements ICalculator.Calculate 
```

使用泛型和抽象类创建工厂模式以动态生成特定类型的计算器的最佳方法是什么？

我需要一个非常通用的解决方案，因为将使用计算逻辑所需的自己的参数添加和修改许多计算速率。我希望能够快速做到这一点，并可能通过 db 控制这些速率计算。欢迎使用 C# 或 VB.Net 的 FYI 答案:) 提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T07:17:18.590

只保留`ICalculator`接口并将更具体的接口转换为类。我想不出一个很好的理由为什么你会创建一个类来存储一个变量，所以我将`RateSetting`完全摆脱它。

```
Public Interface ICalculator
    Property Rate As Double
    Property PaymentTerm As Double
    Function Calculate() As CommissionValues
    ReadOnly Property CalculationRule As CalculationRuleEnum
End Interface

Public Class FlexibleRateCalculator : Implements ICalculator

    Public Sub New(rate As Double)
        Me.Rate = rate
    End Sub

    '
    ' ICalculator implementation goes here
    '

End Class

Public Class FixedRateCalculator : Implements ICalculator

    Public Sub New(rate As Double)
        Me.Rate = rate
    End Sub

    '
    ' ICalculator implementation goes here
    '

End Class

Public Enum RateType
    Flexible = 1
    Fixed = 2
End Enum

Public Class CalculatorFactory

    Public Shared Function GetCalculator(rate As Double, type As RateType) As ICalculator
        Select Case type
            Case RateType.Flexible
                Return New FlexibleRateCalculator(rate)
            Case RateType.Fixed
                Return New FixedRateCalculator(rate)
            Case Else
                Throw New ArgumentException
        End Select
    End Function

End Class 
```

您通过将速率和速率类型传递给`GetCalculator`方法来创建对象实例。我不知道您的意思是什么`CalculationRule`，但是如果它对最终用户很重要，那么您应该将其添加为附加参数。

您可以轻松添加更多实现 ICalculator 的计算器类型，只要您不要忘记更新工厂方法中的 select 语句。

编辑：当然，您还可以在返回对象实例之前设置其他属性。然而，这种模式的重点是确保最终用户不需要知道如何`Calculate()`实现。如果您想为每个计算器制作更具体的工厂方法，那有点违背了目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T12:18:42.533

你熟悉任何 IoC 容器吗？您应该能够使用他们提供的工厂类型服务来根据给定类型（枚举、字符串等）生成具有适当参数/属性的适当类型

如果没有，您可能会创建一个工厂类，该类具有基于参数生成适当类型的方法。此方法可以接受 ParamArray 或其他包含正确设置计算器所需属性的对象，然后通过 ICalculator 接口返回它。

# orchardcms - Orchard CMS 列表的最佳选择

> ID：13272473
> 
> 赞同：0
> 
> 时间：2012-11-07T15:10:58.937
> 
> 标签：orchardcms

我是果园的新手，正在尝试找到创建房屋列表（名称、地址、图片、价格和其他一些）的最佳方法。这些房屋将分为两个部分/类别（购买和出租）。这两个选项将出现在菜单上。然后在点击购买时，您会获得所有带有该选项的房屋标记，并且同样可以出租。然后，我还希望这些显示为图像和简要说明，然后单击“更多”将您带到一个页面，该页面包含上面提到的更多详细信息。然后也喜欢在侧边栏或类似的地方有特色房屋和最新房屋购买/出租小部件。

似乎有很多方法可以做到这一点，即内容类型、投影、分类法、列表等。但是在这种情况下，最好的方法是什么。我不想走一条路然后发现我做不到我宁愿现在在这里得到一些帮助并做对。

我阅读和观看的内容以提供帮助：

[http://www.youtube.com/watch?v=uDqY14mDG_Y&feature=youtu.be](http://www.youtube.com/watch?v=uDqY14mDG_Y&feature=youtu.be)

[http://docs.orchardproject.net/Documentation/Creating-lists](http://docs.orchardproject.net/Documentation/Creating-lists)

所有帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T15:19:10.153

您可以创建一个名为 House 的内容类型，其中包含您描述为字段的所有属性。然后创建投影（过滤为仅显示房屋）以显示您的购买和出租列表。

# php - 在php中将图像值发送到第二种形式

> ID：13272474
> 
> 赞同：1
> 
> 时间：2012-11-07T15:11:02.017
> 
> 标签：php

我有以下情况 -

用户单击图像以搜索特定品牌的车辆。然后该图像的值必须进入隐藏框，我会将返回的值发布到另一个表单。我似乎无法获得返回的值...

我的代码...

```
<form action="searchbrand.php" method="POST" name="frmbrand">
 <!--First row of logos...-->   
 <table class="whitelogo">
  <tr>
    <td align="center">
        <p style="height:5px"></p>
        <input type="image" name="brand" id="brand" value="Alfa Romeo" src="images/carlogos/alfa.jpg" height="55px" width="55px" title="View our Alfa Romeo Selection" alt="Alfa Romeo" onClick="javascript:document.submitForm.submit();" />
    </td>
    <td align="center">
        <p style="height:5px"></p>
        <input type="image" name="brand" id="brand" value="Aston Martin" src="images/carlogos/aston.jpg" height="55px" width="55px" title="View our Aston Martin Selection" alt="Aston Martin" onClick="javascript:document.submitForm.submit();" />
    </td>
    <td align="center">
        <p style="height:5px"></p>
        <input type="image" name="brand" id="brand" value="Audi" src="images/carlogos/audi.gif" height="55px" width="55px" title="View our Audi Selection" alt="Audi" onClick="javascript:document.submitForm.submit();" />
    </td>
    <td align="center">
        <p style="height:5px"></p>
        <input type="image" name="brand" id="brand" value="Bentley" src="images/carlogos/bentley.jpg" height="55px" width="55px" title="View our Bentley Selection" alt="Bentley" onClick="javascript:document.submitForm.submit();" />
    </td>
    <td align="center">
        <p style="height:5px"></p>
        <input type="image" name="brand" id="brand" value="BMW" src="images/carlogos/bmw.gif" height="55px" width="55px" title="View our BMW Selection" alt="BMW" onClick="javascript:document.submitForm.submit();" />
    </td>
    <td align="center">
        <p style="height:5px"></p>
        <input type="image" name="brand" id="brand" value="Cadillac" src="images/carlogos/cadillac.jpg" height="55px" width="55px" title="View our Cadillac Selection" alt="Cadillac" onClick="javascript:document.submitForm.submit();" />
    </td>
 </tr>
</table> 
```

正如您将在此处注意到的那样，我已将图像命名为“品牌”，每个图像都有单独的值。

```
 <input type="hidden" name="hidbrand" value="<?=$_POST['brand'];?>"/>
 </form> 
```

我试图从用户点击的任何图像中捕捉这里的价值......

在我的 searchbrand.php 页面中，它将根据返回的值做一些事情，以下...

```
 <?php
 include 'init.php';
 $vehicle_brand = $_POST['hidbrand'];
 echo $vehicle_brand, '</br>';
 ?> 
```

什么都没有返回，没有错误，没有价值，像我一样都是空白的 :) 任何人都知道我要去哪里混乱？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T15:59:07.670

从 hidbrand 中删除`<?=$_POST['brand']?>`并将所有图像输入类型中的 onClick 替换为：

```
javascript:document.forms['frmbrand'].hidbrand.value = this.value; 
```

这将简单地用用户单击的图像的值填充隐藏元素，然后自动提交表单。

您目前在 onClick 中使用的当前javascript（提交表单）没有实际意义并且不需要，因为图像输入类型在单击时会自动提交表单。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T15:23:25.720

请为图像提供不同的 id。在一个页面中，表单元素的名称可以相同。但每个表单元素的 id 应该是唯一的。如果您为超过 1 个元素提供相同的名称，那么它将返回数组作为 post 值。您可以使用 jquery 来获取值，例如

```
 $('input[name="brand"]').onclick(function(){alert($(this).attr('alt'));} 
```

这将提醒用户单击的图像的 alt 属性。

只需使用[var_dump()](http://in1.php.net/var_dump) 查看 $_POST 中的内容：

```
var_dump($_POST); 
```

您会看到，当您的表单使用`input type="image">`

这将返回类似的数组

`array 'brand_x' => string '0' (length=1) 'brand_y' => string '0' (length=1)`'

这样您就可以`$_POST[brand_x]`用来获取第二种形式的值

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T15:17:51.280

当您单击图像输入时，它会提交表单，因此它可能在设置 hidinput 的值之前提交。

查看 $_POST - IIRC 中包含的内容，您将收到与在图像上单击的 x 和 y 位置相对应的值。您可以使用它来判断单击了哪个图像，而无需执行任何 Javascript 来执行此操作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-07T15:24:05.753

当我正确理解你时，这应该是一个例子：

```
<!doctype html>
<html><head></head>
<body>
    <form action="searchbrand.php" method="POST"
        name="frmbrand" onsubmit="return false;">
        <input type="image" name="brand" id="brand" value="Alfa Romeo" 
            src="images/carlogos/alfa.jpg" height="55px" width="55px" 
            title="View our Alfa Romeo Selection" alt="Alfa Romeo" 
            onClick="document.submitForm.hidbrand.value=this.value; document.submitForm.submit();" />
    </form>
    <form action="http://www.stackoverflow.com/" method="POST" name="submitForm">
        <input type="text" name="hidbrand" value="" />
    </form>
</body>
</html> 
```

首先取消包含图像的表单上的提交：

```
... onsubmit="return false;" ... 
```

然后在提交之前将值复制到*submitForm*中的隐藏字段（在我的示例中，出于调试目的，我没有隐藏*hidbrand字段）：*

```
... onClick="document.submitForm.hidbrand.value=this.value; document.submitForm.submit();" ... 
```

第一个表单实际上不必是表单，因为它不应该提交。您可以使用带有*onclick*处理程序的纯图像。

# objective-c - 何时以及谁调用了 +initialize？

> ID：13272475
> 
> 赞同：0
> 
> 时间：2012-11-07T15:11:02.797
> 
> 标签：objective-c, initialization

我的程序有一个类，那个类有一个`+initialize`方法。我想知道谁调用了该方法？调试工具很不清楚：

![在此处输入图像描述](../Images/66118482853d2ed31dd77da07eea08b9.png)

`+initialize`要调用什么触发器？应用程序启动的开始？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T15:15:34.250

运行`initialize`时恰好在类或从它继承的任何类从程序中发送其第一条消息之前向程序中的每个类发送一次。

`+ (void)initialize`请参阅有关on的文档`NSObject`。

一篇关于在第一次使用类时执行一次的状态问题的[权威博客文章](http://www.friday.com/bbum/2009/09/06/iniailize-can-be-executed-multiple-times-load-not-so-much/)，即在类被发送第一条消息之前作为文档状态。`initialize``initialize`

# r - 如何将函数分配给应由粘贴函数命名的变量？

> ID：13272479
> 
> 赞同：2
> 
> 时间：2012-11-07T15:11:17.850
> 
> 标签：r, eval

> **可能重复：**
> [如何在 R 中动态命名变量？](https://stackoverflow.com/questions/2679193/how-to-name-variables-on-the-fly-in-r)

我有 10 个类型为 list 的对象，名为：`list1`, `list2`, ..., `list10`。我想使用我的函数的输出`FUN`通过这样的循环*替换*这些列表变量的第一个索引：`for`

```
for (i in 1:10){
  eval(parse(test=(paste("list",i,sep=""))))[[1]] <- FUN()
} 
```

但这不起作用。我也`lapply`这样用过，又错了：

```
 lapply(eval(parse(text=(paste("list",i,sep=""))))[[1]], FUN) 
```

任何意见将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T18:37:50.993

这是常见问题解答 7.21。该常见问题解答中最重要的部分是最后一部分，它说不要那样做，而是将所有内容放入列表并在列表上进行操作。

您可以使用以下代码将对象放入列表中：

```
mylists <- lapply( 1:10, function(i) get( paste0('list',i) ) ) 
```

然后您可以使用以下代码进行替换：

```
mylists <- lapply( mylists, function(x) { x[[1]] <- FUN()
  x} ) 
```

现在，如果您想保存所有列表或删除所有列表，您只需使用一个需要处理的对象，而不是再次遍历名称。如果您想对每个列表执行其他操作，那么您只需通过一个简单的步骤在整个列表中使用 lapply 或 sapply 即可，而无需担心循环。如果需要，您可以命名列表的元素以匹配原始名称并以这种方式访问​​它们。将所有感兴趣的内容保存在一个列表中也会使您的代码更安全，更不可能意外覆盖或删除另一个对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T15:17:58.460

你可能想要类似的东西

```
for (i in 1:10) {
  nam <- paste0("list", i)  ## built the name of the object
  tmp <- get(nam)           ## fetch the list by name, store in tmp
  tmp[[1]] <- FUN()         ## alter 1st component of tmp using FUN()
  assign(nam, value = tmp)  ## assign tmp back to the current list
} 
```

作为循环。

# c++ - C 和 C++ 中的 ENUM 类型和用法

> ID：13272480
> 
> 赞同：3
> 
> 时间：2012-11-07T15:11:19.407
> 
> 标签：c++, c, enums

如果我这样写：

```
typedef enum {
  foo_1,
  foo_2
}foo ; 
```

我发现我可以使用

`int footype = foo::foo_1`在 C++ 中

我可以直接使用

`int footype = foo_1`在 c 中，

那么有没有一种方法可以编写在 c++ 和 c 中都可以使用的相同代码？代码在一个只有一种结构的头文件中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T15:16:55.130

```
int footype = foo_1; 
```

这将在 C 和 C++ 中编译。

```
int footype = foo::foo_1; 
```

此语法仅对 C++11 的强类型枚举是必需的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-07T15:16:10.287

这个

```
int footype = foo::foo_1 
```

仅在 C++11 中是合法的。在 C++03 中，枚举不是作用域，这是非法的，就像在 C 中一样。在 C++11 中，有两种类型的枚举——普通的类 C 枚举和作用域枚举，声明为

```
 enum class 
```

对于后者，枚举员资格（`::`）是强制性的。对于前者 - 可选。

所以，简单地使用

```
int footype foo = foo_1; 
```

适用于所有 C、C++03 和 C++11

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T15:18:02.147

如果您可以删除 typedef 它应该“正常工作”

```
enum {
    foo_1,
    foo_2
};

int
main(void)
{
    int foo = foo_1;

    return 0;
} 
```

用 gcc 和 g++ 为我编译

```
g++ --std=c++03 enum.cc -o enum_cpp
gcc --std=c99 enum.c -o enum_c 
```

# vb.net - Silverlight VB.Net 单行多重赋值

> ID：13272481
> 
> 赞同：0
> 
> 时间：2012-11-07T15:11:21.917
> 
> 标签：vb.net, silverlight, variable-assignment

我是 Silverlight 的新手，以前在 VB.Net 中编写过代码。现在我试图在单个语句中分配 RepeatButtons 的 Interval 值，但它设置为零。

```
rbtUp.Interval = rbtLeft.Interval = rbtCenter.Interval = rbtRight.Interval
= rbtDown.Interval = interval 
```

这在 c# 中可以正常工作，但在 vb.net 中不行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T15:31:55.030

您将 VB.Net 与 C# 混淆了。

你不能在 VB.Net 中做你想做的事情。您需要编写多个语句：

```
rbtUp.Interval = interval
rbtLeft.Interval = interval
rbtCenter.Interval = interval
rbtRight.Interval = interval
rbtDown.Interval = interval 
```

在您的情况下发生的情况是，只有第一个等号是赋值运算符，后面的等号是比较运算符。在等效的 C# 中，它会是这样的：

```
rbtUp.Interval = rbtLeft.Interval == rbtCenter.Interval == rbtRight.Interval == rbtDown.Interval == interval; 
```

这显然不是你想做的。

看起来您还没有打开 Option Strict（因为比较运算符返回一个布尔值并且 Interval 可能是一个整数，所以在将布尔值分配给整数时，您的代码应该显示带有 Option Strict On 的编译器错误）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T15:28:58.977

尝试这个

```
Sub Main
    Dim outer As Integer = -1
    Dim inner1 As Integer
    Dim inner2 As Integer
    Dim inner3 As Integer
    Dim inner4 As Integer

    inner1 = inner2 = inner3 = inner4 = outer
    Console.WriteLine("{0},{1},{2},{3},{4}", inner1, inner2, inner3, inner4, outer)

End Sub 
```

结果是

```
0,0,0,0,-1 
```

所以它在 VB.NET 中不像在 C# 中那样工作

我很想知道 VB.NET 和 C# 中 IL 代码的不同之处。
查看 IL 代码很明显是 VB.NET 缺乏支持的原因

**VB.NET IL 代码**

```
IL_0001:  ldc.i4.m1   
IL_0002:  stloc.s     04 
IL_0004:  ldloc.1     
IL_0005:  ldloc.2     
IL_0006:  ceq         
IL_0008:  ldc.i4.0    
IL_0009:  cgt.un      
IL_000B:  neg         
IL_000C:  ldloc.3     
IL_000D:  ceq         
IL_000F:  ldc.i4.0    
IL_0010:  cgt.un      
IL_0012:  neg         
IL_0013:  ldloc.s     04 
IL_0015:  ceq         
IL_0017:  ldc.i4.0    
IL_0018:  cgt.un      
IL_001A:  neg 
```

**等效示例的 C# IL 代码**

```
IL_0001:  ldc.i4.m1   
IL_0002:  stloc.0     
IL_0003:  ldloc.0     
IL_0004:  dup         
IL_0005:  stloc.s     04 
IL_0007:  dup         
IL_0008:  stloc.3     
IL_0009:  dup         
IL_000A:  stloc.2     
IL_000B:  stloc.1 
```

VB 版本继续比较值，因此问题是 = 运算符在 VB.NET 中具有双重含义。在这种情况下，用于比较而不是分配。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-10-12T18:24:33.177

我认为这个功能在**C#中*****非常***酷，所以我编写了一个**VB**扩展方法 ( ) 来做同样的事情。语义很容易理解；您只需调用任何值即可将其分配给多个其他变量，即****`Assign``Assign`****

 ****```
Call True.Assign(b1, b2, b3)
Call 4.1.Assign(d1, d2, d3) 
```

ETC...

这是代码：

```
Imports System.Runtime.CompilerServices

Namespace Utility
    Public Module MultiAssignExtensionMethod
        ' Multiply assign the same value to 1 (required) or more variables
        <Extension()> _
        Public Function Assign(Of T)(this As T, ByRef first As T, Optional ByRef second As T = Nothing, Optional ByRef third As T = Nothing,
                                    Optional ByRef forth As T = Nothing, Optional ByRef fifth As T = Nothing, Optional ByRef sixth As T = Nothing,
                                    Optional ByRef seventh As T = Nothing, Optional ByRef eighth As T = Nothing, Optional ByRef nineth As T = Nothing,
                                    Optional ByRef tenth As T = Nothing) As T
                            ' I would LIKE to do this as a ParamArray, but it doesn't allow references for basic types....grrr
            first = this
            second = this
            third = this
            forth = this
            fifth = this
            sixth = this
            seventh = this
            eighth = this
            nineth = this
            tenth = this

            Return this     ' For use as assignment and evaluation as Function parameter
        End Function
    End Module
End Namespace 
```****

# javascript - 触发点击时访问链接

> ID：13272482
> 
> 赞同：0
> 
> 时间：2012-11-07T15:11:24.477
> 
> 标签：javascript, jquery

我有一些链接有事件绑定到他们和一些链接没有。

这些链接的点击事件是由选择框中的更改触发的。

[看到这个小提琴](http://jsfiddle.net/qjEWQ/)

如果没有绑定该链接的事件，jquery 是否可以访问该链接？

**我不想在选择框 vlaue 属性中引用 url，我想在锚标记中引用 url。**

类似（伪代码） -

```
 if (link.hasEventHandler('click')){
    trigger click
 } else {
    window.location = link.attr('href')
 } 
```

编辑 - 有一个插件可以完成我需要在这里做的事情 - [https://github.com/sebastien-p/jquery.hasEventListener](https://github.com/sebastien-p/jquery.hasEventListener)

文件大小是一个问题，所以我想避免使用它。

我正在使用最新的 jquery，所以不能使用 .data('events')

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T15:33:25.063

您可以从 Twitter Bootstrap ( [http://twitter.github.com/bootstrap/components.html#buttonDropdowns](http://twitter.github.com/bootstrap/components.html#buttonDropdowns) ) 实现下拉按钮。Bootstrap 还允许您自定义下载。当您仅选择下拉菜单时，它大约为 40kb。它甚至不需要 jQuery，因为它都是 CSS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T15:34:41.467

查看您的代码，您必须选择具有 href 属性的链接，该属性与组合框中的选定值相同。就像是：

```
$('#nav').on('change', function(event) {
      var targetHref = $(this).find("option:selected").val();
      $('a[href="'+targetHref+'"]').each(function() {
           $(this).trigger('click');
      });
}); 
```

假设您的链接有一个点击事件。如果没有，只需为您的链接提供相同的类并为该类编写一个单击事件以将窗口位置设置为对象的 href 属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T15:51:23.423

据我所知，您不能在 JS 中“假点击”。click事件触发器只是触发onClick JS事件，并不完全模拟点击浏览器中的链接。但是，您需要做的就是获取 href 并使用 JS 重定向到该页面。我用几行来更新你的小提琴。

[http://jsfiddle.net/9j8QS/1/](http://jsfiddle.net/9j8QS/1/)

```
$('a:not(.event-bound)').click(function(event) {
    window.location.href = $(this).attr('href');
}); 
```

选择器选择所有没有 class 的锚标签`event_bound`。

# git - 如何在 git 中保留 DIRECTORY 文件模式或权限？

> ID：13272484
> 
> 赞同：3
> 
> 时间：2012-11-07T15:11:34.493
> 
> 标签：git, directory, file-permissions, directory-permissions

我们有一个远程 git 存储库，有时我们创建权限为 777 的目录，但是当其他人从远程存储库中提取并结帐时，目录权限不是 777。如何在 git 中保留目录权限？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T15:42:07.873

`git`不跟踪文件的权限（对于可执行/不可执行只有一个标志），并且根本不跟踪目录。如果您确实需要传播权限，您可以向您的存储库添加一个简短的脚本来设置适当的权限，或者研究`git`通过捕获文件元数据并在远程端重新实现它基本上为您执行此操作的附加工具。

# windows-7 - COM3 reg 键已删除，COM+ 组件服务无法正常工作 - 如何恢复？

> ID：13272491
> 
> 赞同：-1
> 
> 时间：2012-11-07T15:11:50.530
> 
> 标签：windows-7, registry, components, com+, component-services

我正在考虑将我们的一个内部应用程序从 XP 迁移到 Win7。在执行此操作时，我从以下位置删除了 COM3 注册表项：HKEY_LOACL_MACHINE/SOFTWARE/MICROSOFT/COM3。（我没有备份它。吸取的教训）

由于这样做，我现在收到以下错误：

![在此处输入图像描述](../Images/1bff94aa00299f674d3166a06b9a6721.png)

有没有办法重新安装 COM+ 组件服务？这会修复我删除的 reg 密钥吗？如果这不起作用，我还能采取哪些其他措施？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T15:26:06.610

您可以使用`regsvr32`DLL 重新注册 DLL 中的组件。不知道在您的情况下正确的论点是什么，这样做有一些轻微的缺点，但这似乎是您从灾难中恢复所需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T16:04:34.827

无法恢复 com+ 服务。我不得不重新映像机器。来源：MS 远程支持、本地 IT 支持、网络。

# extjs - ExtJS：键盘焦点特定的上下文菜单项

> ID：13272492
> 
> 赞同：2
> 
> 时间：2012-11-07T15:11:54.073
> 
> 标签：extjs, extjs4, extjs4.1

目前，我在敲击键盘快捷键后打开一个[上下文菜单。](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.menu.Menu)

如何关注（并选择/突出显示）上下文菜单的特定[菜单项？](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.menu.Item)这样就可以通过点击返回键来执行项目的处理程序。我正在运行 ExtJS 4.1。

这就是我目前正在做的：

```
myMenu.showBy(divElement); // divElement is a DOM object
myMenu.items.items[2].focus(); // focus on 3rd menu item
myMenu.doConstrain(); // move floating component into a constrain region 
```

尽管如此，焦点仍保持在菜单元素本身上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T13:51:01.400

查看[源代码](http://docs.sencha.com/ext-js/4-1/source/Menu2.html#Ext-menu-Menu)表明这是使用以下`setActiveItem()`方法完成的：

```
var the_menu = Ext.create('Ext.menu.Menu', {
  items: [
    {
      itemId: 'foo',
      text: 'Foo'
    },
    {
      itemId: 'bar',
      text: 'Bar'
    }
  ]
}).showBy(document.getElementById('some_div'));

the_menu.setActiveItem(the_menu.down('#bar')); 
```

请注意，此方法是*private*`canActivateItem(item)`，但是`deactivateActiveItem(andBlurFocusedItem)`是*public*，所以它可能只是一个疏忽。

# android - 设置重复日期和时间的通知

> ID：13272498
> 
> 赞同：-1
> 
> 时间：2012-11-07T15:12:19.533
> 
> 标签：android, notificationmanager

我正在尝试创建一个在特定日期和时间触发的通知。

```
public void notify(View v){
  Calendar calendar = Calendar.getInstance();
  calendar.set(Calendar.DAY_OF_WEEK, 2);
  calendar.set(Calendar.HOUR_OF_DAY, 8);
  calendar.set(Calendar.MINUTE, 0);
  calendar.set(Calendar.SECOND, 0);
    mNotificationManager = (NotificationManager)getSystemService(NOTIFICATION_SERVICE);
      final Notification notifyDetails = new Notification(R.drawable.android_logo,"New Alert, Click Me!",calendar);
    Context context = getApplicationContext();
      CharSequence contentTitle = "Notification Details...";
      CharSequence contentText = "Browse Android Official Site by clicking me";
      Intent notifyIntent = new Intent(android.content.Intent.ACTION_VIEW,Uri.parse("http://www.android.com"));
      PendingIntent intent =    PendingIntent.getActivity(AllClasses.this, 0,   notifyIntent, android.content.Intent.FLAG_ACTIVITY_NEW_TASK);

    notifyDetails.setLatestEventInfo(context, contentTitle, contentText, intent);
    mNotificationManager.notify(SIMPLE_NOTFICATION_ID, notifyDetails);

} 
```

我的代码中的错误是试图将 Calendar 实例传递给 Notification 构造函数。我很高兴使用状态栏通知而不是警报。有没有办法将此日历对象提供给通知？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T15:33:41.390

改变：

```
final Notification notifyDetails = new Notification(R.drawable.android_logo,
"New Alert, Click Me!",calendar); 
```

这样;

```
final Notification notifyDetails = new Notification(R.drawable.android_logo,
"New Alert, Click Me!",calendar.getTimeInMillis()); 
```

如果您想定期执行此操作，则应使用将 Intent 发送到 ServiceIntent 的警报，并在此启动通知。

# android - 简单的 C++ 异步 http 客户端

> ID：13272499
> 
> 赞同：1
> 
> 时间：2012-11-07T15:12:19.953
> 
> 标签：android, c++, ios, http, asynchronous

我需要一个在Android和iOS等移动平台上运行的C++ HTTP客户端，不知道有没有这个目的，可以指点我吗？

如果有一个是异步的，那就更有帮助了。

在 android 我有一个[https://github.com/loopj/android-async-http](https://github.com/loopj/android-async-http)非常好，在 IOS 我有[https://github.com/AFNetworking/AFNetworking](https://github.com/AFNetworking/AFNetworking)这也很好，但他们是在 Java 和 Obj-c 中，我需要一个在 C++ 中同时使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T15:22:39.377

人们一直在 Android 上使用 cURL（客户端）和 libcurl（客户端库）。上面有很多活动。有关在 NDK 下构建它的项目，请参阅[此答案](https://stackoverflow.com/a/6484459/1794538)。使用[此搜索](https://stackoverflow.com/questions/tagged/curl+android)查找标记为“android”和“curl”的问题。在 iOS 上使用 libcurl 也有类似的努力。

# ios - 在 CALayer 中添加 UIImage

> ID：13272512
> 
> 赞同：52
> 
> 时间：2012-11-07T15:12:53.307
> 
> 标签：ios, uiimageview, uiimage, calayer, subview

我必须添加一个 UIImageView 作为 MapView 的子视图。为此，我在 MapView 上方创建了一个图层。在这一层中，我想放置我的图像，但我得到一个白色矩形，没有别的。我的图像不可见。

这是代码：

```
- (void)viewDidLoad
{
    //......

    CALayer *layer = [CALayer layer];
    layer.backgroundColor = [[UIColor whiteColor] CGColor];

    if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone)
    {
        layer.bounds = CGRectMake(self.mapView.bounds.origin.x,
                                  self.mapView.bounds.origin.y, 80, 300);
    }
    else
    {
        layer.bounds = CGRectMake(self.mapView.frame.origin.x,
                                  self.mapView.frame.origin.y, 150, 700);
    }

    layer.contents = (id)[UIImage imageNamed:@"myImage.png"];
    //the name is correct but  in the output the image is not visible

    [[self.mapView layer] addSublayer:layer];
    [layer setNeedsDisplay];
} 
```

* * *

## 回答 #1

> 赞同：162
> 
> 时间：2016-01-05T03:23:15.183

为了未来的观众，这是一个普遍的答案。它基于问题标题而不是原始问题的详细信息。

# 如何将 UIImage 添加到 CALayer

`layer`您可以简单地使用其`contents`属性将图像添加到视图中：

```
myView.layer.contents = UIImage(named: "star")?.cgImage 
```

*   请注意，`UIImage`需要将其转换为`CGImage`.

如果您想在自己的图层中添加图像，可以这样做：

```
let myLayer = CALayer()
let myImage = UIImage(named: "star")?.cgImage
myLayer.frame = myView.bounds
myLayer.contents = myImage
myView.layer.addSublayer(myLayer) 
```

# 修改外观

上面的代码产生这样的视图。浅蓝色的是`UIView`，深蓝色的星星是`UIImage`。

[![在此处输入图像描述](../Images/aa774f5f3eaf6793650f5bf8a92f6fa0.png)](https://i.stack.imgur.com/j1NW1.png)

但是，如您所见，它看起来像素化了。这是因为`UIImage`小于 ，`UIView`因此它被缩放以填充视图，这是默认设置，您无需指定其他任何内容。

下面的示例显示了图层`contentsGravity`属性的变化。代码如下所示：

```
myView.layer.contents = UIImage(named: "star")?.cgImage
myView.layer.contentsGravity = kCAGravityTop
myView.layer.isGeometryFlipped = true 
```

在 iOS 中，如果您正在使用顶部或底部重力做任何事情，您可能希望将该[`isGeometryFlipped`属性](https://developer.apple.com/library/ios/documentation/GraphicsImaging/Reference/CALayer_class/#//apple_ref/occ/instp/CALayer/geometryFlipped)设置为`true`，否则它将与您的预期相反。（只有重力垂直翻转，而不是内容渲染。如果您在翻转内容时遇到问题，请参阅[此答案](https://stackoverflow.com/a/34407999/3681880)。）

`UIView`每个设置都有两个示例`contentsGravity`，一个视图大于另一个视图`UIImage`。这样您就可以看到缩放和重力的效果。

**`kCAGravityResize`**

这是默认设置。

[![在此处输入图像描述](../Images/b02d8699911a2a4f9361e2b9b354688b.png)](https://i.stack.imgur.com/rfejR.png)

**`kCAGravityResizeAspect`**

[![在此处输入图像描述](../Images/2900e2b9c7d51152f9663fd6bd2d8818.png)](https://i.stack.imgur.com/w5zBS.png)

**`kCAGravityResizeAspectFill`**

[![在此处输入图像描述](../Images/746ed704eb5bb1ed5d1ed8fc3437b991.png)](https://i.stack.imgur.com/7406s.png)

**`kCAGravityCenter`**

[![在此处输入图像描述](../Images/d96b0158c54cec20b99681395130b108.png)](https://i.stack.imgur.com/1imPL.png)

**`kCAGravityTop`**

[![在此处输入图像描述](../Images/c81fdafa174a780014cdf5caa22a1a0f.png)](https://i.stack.imgur.com/Ge3i4.png)

**`kCAGravityBottom`**

[![在此处输入图像描述](../Images/8bf8f7979a3588db1c0e02e217d577cd.png)](https://i.stack.imgur.com/H00Hn.png)

**`kCAGravityLeft`**

[![在此处输入图像描述](../Images/d883417101f7c62bd77eecac1dd8b8b0.png)](https://i.stack.imgur.com/kjgww.png)

**`kCAGravityRight`**

[![在此处输入图像描述](../Images/91a72f785981b8fd30d1618550ecd91f.png)](https://i.stack.imgur.com/uUtkW.png)

**`kCAGravityTopLeft`**

[![在此处输入图像描述](../Images/ad8d649fe20b996d24a23fe8c8f7f0ac.png)](https://i.stack.imgur.com/VdJUV.png)

**`kCAGravityTopRight`**

[![在此处输入图像描述](../Images/2e35d04ff484327799d983ad8d0600d4.png)](https://i.stack.imgur.com/U7jLd.png)

**`kCAGravityBottomLeft`**

[![在此处输入图像描述](../Images/699e4d221d89182852bd5cd3975a2efb.png)](https://i.stack.imgur.com/FDktZ.png)

**`kCAGravityBottomRight`**

[![在此处输入图像描述](../Images/9379c980a5ee3ab275b39ed4ab57fc93.png)](https://i.stack.imgur.com/dEf1W.png)

# 有关的

*   [视图的内容模式属性](https://stackoverflow.com/a/32151862/3681880)
*   [画一个`UIImage`_`drawRect``CGContextDrawImage`](https://stackoverflow.com/a/34407999/3681880)
*   [CALayer 教程：入门](http://www.raywenderlich.com/90488/calayer-in-ios-with-swift-10-examples)

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2012-11-07T15:39:35.167

它一定要是

```
layer.contents = (id)[UIImage imageNamed:@"myImage.png"].CGImage; 
```

您只能将 CGImage 放入图层，而不能直接放入 UIImage。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-11-08T11:27:27.203

我删除了

```
 [layer setNeedsDisplay]; 
```

我不知道为什么，但它有效！

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-03-26T15:18:41.070

您需要正确设置 CALayer 的框架，因为默认为 CGRectZero。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-07-03T16:33:59.843

# 2020，完整的简单示例

在此示例中，图像只是整体视图的大小：

```
class ImageyView: UIView {

    private lazy var im: CALayer = {
        let l = CALayer()
        l.contents = UIImage(named: "some_background")?.cgImage
        l.contentsGravity = .resizeAspect
        layer.addSublayer(l)
        return l
    }()

    override func layoutSubviews() {
        super.layoutSubviews()
        im.frame = bounds
    }
} 
```

在此示例中，它是一个按钮，您在左上角添加了小图标：

```
class BroadcastButton: UIButton {

    private lazy var im: CALayer = {
        let l = CALayer()
        l.contents = UIImage(named: "your_icon")?.cgImage
        l.contentsGravity = .resizeAspect
        layer.addSublayer(l)
        return l
    }()

    override func layoutSubviews() {
        super.layoutSubviews()
        im.frame = CGRect(origin: CGPoint(x: 2, y: 2),
             size: CGSize(width: 14, height: 14))
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-10-30T07:30:42.903

*myView.layer.contents = UIImage(named: "star")?.cgImage*

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-11-17T18:58:20.437

[这应该是一个评论，但我浪费了几个小时，所以我把它作为一个独立的答案。]

我在做：

```
myView.layer.contents = UIImage(named: "star") 
```

你能找出问题所在吗？因为`contents`是类型`Any`，所以编译得很好。但正确的代码是：

```
myView.layer.contents = UIImage(named: "star").cgImage 
```

# php - PHP链接仅传递部分mysql结果

> ID：13272513
> 
> 赞同：-1
> 
> 时间：2012-11-07T15:12:59.610
> 
> 标签：php

好的，我有一个由几个变量组成的 php 链接

```
<a href=\year.php? manufacturer='.$manufacturer.'&fuel_type='.$fuel_type.'&model_type='.$model_type.'>'.$model_type.'</a> 
```

整个代码真的很长，因为它有很多分页，所以我只包括基本查询和循环部分。

```
$query1 = "SELECT Distinct model_type from $tableName where manufacturer='$manufacturer' AND fuel='$fuel_type' LIMIT $start, $limit";
$result = mysql_query($query1); 
```

然后是我得到并显示结果的底部。

```
 $count = 0;
 $max = 2;
 while($row = mysql_fetch_array($result))
    {
$model_type = $row['model_type'];               
$count++;
echo '<td class="manu"><div align="center">'.'<a href=\year.php?    manufacturer='.$manufacturer.'&fuel_type='.$fuel_type.'&model_type='.$model_type.'>'.$model_type.'</a>'.'</div></td>';

 if($count >= $max){
  //reset counter
   $count = 0;
  //end and restart
  echo '</tr><tr>';
  }

  } 
```

现在这工作正常，除非我从数据库中获取模式类型变量，它显示为 1 系列，但是当它在此链接中传递时，它只获取 1 并且不获取系列。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T15:22:55.603

尝试像这样传递它：

```
'.urlencode($model_type).' 
```

**尝试在下一页访问它** `urldecode($_REQUEST['$model_type'])`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-07T15:22:27.050

我不舒尔，但您可能缺少编码问题。

试试这个：

```
<a href="\year.php? manufacturer='.urlencode($manufacturer).'&fuel_type='.urlencode($fuel_type).'&model_type='.urlencode($model_type).'">'.$model_type.'</a> 
```

它的 url_encoding 值，所以你的 url 不会被 ',"，空格等破坏。

附加提示：用 " 或 ' 将您的 URL 括起来，这样您最后就不会遇到问题。

# java - gson - 序列化 java pojo -> json 时包含类名

> ID：13272516
> 
> 赞同：5
> 
> 时间：2012-11-07T15:13:13.953
> 
> 标签：java, json, gson

使用[GSON](http://sites.google.com/site/gson/Home)如何将我的列表的类名附加到输出的 json 字符串中？我查看了[api](http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/index.html)并错过了任何参考来做到这一点。我在我的真实代码中使用[GsonBuilder](http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/GsonBuilder.html)，但也没有看到任何选项。

```
public class Person {
  String name;

  public Person(String name){
    this.name = name;
  }

  public static void main(String [] args){
    Person one = new Person("Alice");
    Person two = new Person("Bob");

    List<Person> people = new ArrayList<Person>();
    people.add(one);
    people.add(two); 

    String json = new Gson(people);
  }
} 
```

这给出了以下输出：

> json = [{“名称”：“爱丽丝”}，{“名称”：“鲍勃”}]

**如何实现以下输出？**或类似的东西。

> json = {"person":[{"name":"Alice"},{"name":"Bob"}]}

或者

> json = [{"person":{"name":"Alice"}},{"person":{"name":"Bob"}}]

希望这是我刚刚错过的微不足道的事情。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T18:39:28.613

我不知道答案是否仍然让您感兴趣，但您可以执行以下操作：

```
public static void main(String [] args){
    Person one = new Person("Alice");
    Person two = new Person("Bob");

    List<Person> people = new ArrayList<Person>();
    people.add(one);
    people.add(two); 

    Gson gson = new Gson();
    JsonElement je = gson.toJsonTree(people);
    JsonObject jo = new JsonObject();
    jo.add("person", je);
    System.out.println(jo.toString()); //prints {"person":[{"name": "Alice"},{"name": "Bob"}]}
} 
```

# debugging - 在 SharpDevelop 4.2 中调试 ironpython 代码

> ID：13272519
> 
> 赞同：1
> 
> 时间：2012-11-07T15:13:29.730
> 
> 标签：debugging, ironpython, sharpdevelop

我在 SharpDevelop 4.2 中练习 IronPython 编码，但我在调试时遇到了问题。在 Locals 窗口中，我找不到我的变量。在这样一个简单的脚本中......

```
a=5
b=3
c=8
print c
raw_input('') 
```

在 Locals 窗口的哪里可以找到 a、b 和 c 的值？因为 Locals 窗口充满了信息，我可以让它只显示我的变量和对象吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T11:30:29.547

您的变量位于模块字典中的“监视”窗口中。

```
$originalModule -> Non-Public members -> _dict_ 
```

在此字典中，变量名称在字典**Keys**中，变量值在字典**Values**中。

目前 SharpDevelop 不能很好地显示此信息，要解决此问题将涉及更改 SharpDevelop 的源代码。

我建议您尝试[Python Tools for Visual Studio](http://pytools.codeplex.com/)以获得更好的调试体验。Visual Studio 的 Python 工具将在顶层的 Watch 窗口中显示您的变量。Visual Studio 的 Python 工具是免费的，可以与[免费的 Visual Studio Integrated Shell](http://pytools.codeplex.com/wikipage?title=Installation%20-%20details)一起使用。

# permissions - 在 Ubuntu Server 12.04 中启用 root 登录

> ID：13272520
> 
> 赞同：0
> 
> 时间：2012-11-07T15:13:32.227
> 
> 标签：permissions, ssh, ubuntu-12.04

如何启用对 Ubuntu Server 12.04 的 root 登录？

也就是说，能够以root身份ssh。我现在只能以普通用户身份登录。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T15:15:57.357

编辑 /etc/ssh/sshd_config 并添加以下行：

PermitRootLogin 是

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T15:17:41.967

确保您已设置 root 密码 (sudo su passwd) 根据 ssh 的安装方式，您通常需要编辑 /etc/ssh/sshd_config 并将“PermitRootLogin no”更改为“PermitRootLogin yes”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T15:22:48.887

您真的不应该允许以 root 身份直接 SSH 登录。这是一个相当大的安全风险。请参阅[http://www.cyberciti.biz/tips/openssh-deny-or-restrict-access-to-users-and-groups.html](http://www.cyberciti.biz/tips/openssh-deny-or-restrict-access-to-users-and-groups.html)

为什么不以具有 sudo 权限的用户身份登录，然后执行 'sudo bash' 或 'sudo sh' 这个网站解释更多：[https ://askubuntu.com/questions/57040/what-is-the-difference-between- su-sudo-bash 和-sudo-sh](https://askubuntu.com/questions/57040/what-is-the-difference-between-su-sudo-bash-and-sudo-sh)

如果您确实必须以 root 身份启用 ssh，则第一个链接应该为您提供配置 OpenSSH 所需的信息，假设这是您正在使用的服务器。您还必须设置 root 密码，该站点应该会有所帮助：[https ://help.ubuntu.com/community/RootSudo#Enabling%20the%20root%20account](https://help.ubuntu.com/community/RootSudo#Enabling%20the%20root%20account)

# java - 使用 Firefox 的 PDF 文件的内容类型不正确

> ID：13272523
> 
> 赞同：-3
> 
> 时间：2012-11-07T15:13:48.143
> 
> 标签：java, spring, spring-mvc, firefox, mime-types

我正在使用 Spring 3.2.0.M2，并且正在尝试上传 pdf 文件。

JSP 文件：

```
<form method="POST" action="upload" enctype="multipart/form-data>
  <input type="file" name="file" />
</form> 
```

控制器 ：

```
@RequestMapping(value = "/upload", method = RequestMethod.POST)
public String handleUpload(@RequestParam MultipartFile file) {
    System.out.println(file.getContentType());
    //prints "application/text-plain:formatted"
} 
```

我正在使用标准多部分解析器：

```
<servlet>
  <servlet-name>servlet</servlet-name>
  <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
  <load-on-startup>1</load-on-startup>
  <multipart-config />
</servlet> 
```

和 ：

```
<bean id="multipartResolver"
    class="org.springframework.web.multipart.support.StandardServletMultipartResolver">
</bean> 
```

我也尝试过使用 Apache 的 CommonsMultipartResolver，但问题是一样的。

我得到的是“application/text-plain:formatted”而不是“application/pdf”。我测试了几个 pdf 文件（来自不同的来源）。当我尝试上传另一种文件类型（例如 Word 文档）时，它按预期工作（对于 Word 文档，我得到“application/msword”）。

我打算将内容类型（和文件名）存储到数据库中，以便以后检索和下载文件。像这样调用 setContentType 时，内容类型不正确会导致异常：

```
public void downloadResource(@RequestParam("resId") Long resourceId, HttpServletResponse response) {
    // get resource with its id.
    response.setContentType(resource.getContentType());
    //throws org.apache.tomcat.util.http.parser.TokenMgrError
} 
```

异常消息是：

> 第 1 行第 23 列的词法错误。遇到：“：”（58），在：“”之后

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T18:31:56.257

.svg 文件也有同样的问题。

**通过修改**[配置文件夹](http://kb.mozillazine.org/Profile_folder)中的 Mozilla Firefox **[mimeTypes.rdf](http://kb.mozillazine.org/MimeTypes.rdf)**文件解决了这个问题。（感谢上面的 Piotrs 链接）

对于其他有类似问题的人。这是由于我的 PHP 脚本中错误地设置了 Content-Type 造成的。当第一次测试脚本时（它通过 php 间接传递了一个 svg 文件），我在 header() 中设置了另一个 Content-Type。

```
header("Content-Type: image/svg+xml"); //should have been
header("Content-Type: application/vnd.android.package-archive"); //was actually set 
```

这现在推翻了 firefox mimeTypes.rdf 文件中的内容类型设置：

```
 <RDF:Description RDF:about="urn:mimetype:application/vnd.android.package-archive"
                   NC:value="application/vnd.android.package-archive"
                   NC:editable="true"
                   NC:fileExtensions="svg"
                   NC:description="Scalable Vector Graphics">
    <NC:handlerProp RDF:resource="urn:mimetype:handler:application/vnd.android.package-archive"/>
  </RDF:Description> 
```

可能是因为 FF 认为它看到了一个“新”文件/文件类型 - 并将其添加到其配置中。

要解决这个问题，您当然只需要删除 mimeTypes.rdf 中错误的 XML 部分并重新启动 FF。

# ios - Facebook iOS SDK 3.1 教程中的 SIGABRT 错误

> ID：13272524
> 
> 赞同：0
> 
> 时间：2012-11-07T15:13:50.980
> 
> 标签：ios, cordova, phonegap-plugins, facebook-ios-sdk

我正在尝试使用phonegap facebook connect plugin facebook SDK 3.1，但它不起作用！

```
libsystem_kernel.dylib`__pthread_kill:
0x973dca60:  movl   $524616, %eax
0x973dca65:  calll  0x973de4c2                ; _sysenter_trap
0x973dca6a:  jae    0x973dca7a                ; __pthread_kill + 26
0x973dca6c:  calll  0x973dca71                ; __pthread_kill + 17
0x973dca71:  popl   %edx
0x973dca72:  movl   26027(%edx), %edx
0x973dca78:  jmpl   *%edx
0x973dca7a:  ret    
0x973dca7b:  nop 
```

应用程序日志：

```
2012-11-07 16:59:19.649 facebookTEST[13324:c07] Multi-tasking -> Device: YES, App: YES
2012-11-07 16:59:19.791 facebookTEST[13324:c07] [LOG] Cordova Facebook Connect plugin initialized successfully.
2012-11-07 16:59:19.797 facebookTEST[13324:c07] [LOG] Got the user's session: 
2012-11-07 16:59:19.999 facebookTEST[13324:c07] -[__NSCFArray length]: unrecognized selector sent to instance 0xa42c670
2012-11-07 16:59:19.999 facebookTEST[13324:c07] Failure before/during install ping: -[__NSCFArray length]: unrecognized selector sent to instance 0xa42c670
2012-11-07 16:59:34.707 facebookTEST[13324:c07] -[__NSCFArray length]: unrecognized selector sent to instance 0xa142500
2012-11-07 16:59:34.707 facebookTEST[13324:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFArray length]: unrecognized selector sent to instance 0xa142500'
*** First throw call stack:
(0x1e5012 0x2805e7e 0x2704bd 0x1d4bbc 0x1d494e 0x160090 0x1d5a1d 0x907b3 0x73cbd 0x73a51 0x83a9f 0x844a5 0x2cad53f 0x2cbf014 0x2caf7d5 0x18baf5 0x18af44 0x18ae1b 0x36367e3 0x3636668 0x42065c 0x2626 0x2555)
libc++abi.dylib: terminate called throwing an exception
(lldb) 
```

没有任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T20:27:06.770

![您当前的设置](../Images/15e6c64af55a17e3a89cc15227919e36.png)

您错误地添加了 Facebook 设置。正确的方法如下图：

![在此处输入图像描述](../Images/01b71c923e9460659e09195113136d22.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T11:30:23.383

它的工作，谢谢！顺便一提

方案代码是；

```
<key>FacebookAppID</key>
<string>[YOUR_FACEBOOK_APP_ID]</string>
<key>CFBundleURLTypes</key>
<array>
    <dict>
        <key>CFBundleURLSchemes</key>
        <array>
            <string>fb[YOUR_FACEBOOK_APP_ID]</string>
        </array>
    </dict>
</array> 
```

# binary-search-tree - 使用 BST 实现堆栈

> ID：13272527
> 
> 赞同：5
> 
> 时间：2012-11-07T15:14:02.897
> 
> 标签：binary-search-tree

我想使用 BST 实现堆栈（推送和弹出操作）。

在 BST 中的后序遍历期间，根被放置在堆栈的顶部，同时迭代地遍历。那么，这是否意味着我必须从根或其他地方插入和删除元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T09:15:16.257

```
 int num=1;
  struct node
 {
     int flag;
     int val;
     node *left,*right,*parent;
  };

 node* tree::InorderTraversalusingInBuiltstack()
 {
      stack<node *> p;
      node *current=root;

     while(!p.empty()|| current!=NULL)
     {
          while(current!=NULL)
          {
               p.push(current);
               current=current->left;
          }
          current=p.top();
          if(current->flag==num)
          {
              return current;
           }
           p.pop();
           current=current->right;
      }
  }

  void tree::StackUsingBST()
  {
      node *q;

      while(root!=NULL)
       {
              num--;

              q=InorderTraversalusingInBuiltqueue();

              node *a=q->parent;
              if(a!=NULL)
              {
                  if(a->left==q)
                       a->left=NULL;
                  else
                       a->right=NULL;

                  q->parent=NULL;
                  delete q;

                  disp();
                  cout<<endl;
               }

               else
               {

                  delete q;
                  root=NULL;
                }

      } 
   } 
```

在这里，我的方法是通过使用标志变量作为全局变量来稍微修改我的数据结构；

假设首先我插入 8 然后其对应的标志值为 1 然后插入 12 其标志值 = 2 然后插入 3 其标志值 = 3

现在为了将 BST 用作堆栈，我必须删除最后插入的元素，并根据我的算法具有最高标志值。

另请注意，插入的最后一个元素不会有任何子元素，因此删除它非常容易。

为了找到节点可用的最高标志值，我使用堆栈进行了一个 inordertraversal，它比它的递归遍历更好。

在找到与最高标志值对应的节点后，我删除了该节点。重复此过程，直到 root=NULL。

# python - Bottle.py HTTP 身份验证？

> ID：13272528
> 
> 赞同：14
> 
> 时间：2012-11-07T15:14:05.273
> 
> 标签：python, http, authentication, bottle, digest

如何让我的 bottle.py 应用程序（在 Paste 或 Cherrypy 中运行）进行 HTTP（基本或摘要）身份验证？- 我需要保护它，但找不到任何 HOWTO。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2014-05-11T12:23:44.140

瓶子有一个内置的`auth_basic`装饰器，可以在视图上使用：

```
from bottle import auth_basic, request, route

def check(user, pw):
    # Check user/pw here and return True/False

@route('/')
@auth_basic(check)
def home():
    return { 'data': request.auth } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T15:26:07.997

GitHub 上有一些库，例如[https://github.com/FedericoCeratto/bottle-cork](https://github.com/FedericoCeratto/bottle-cork)，应该会有所帮助。它可能比相关帖子中建议的 repoze 库更容易集成。

# ruby-on-rails - 在 RSpec 中运行规范时如何获得分配的值？

> ID：13272530
> 
> 赞同：1
> 
> 时间：2012-11-07T15:14:09.200
> 
> 标签：ruby-on-rails, rspec, factory-bot, rspec-rails

我正在使用`FriendlyId`gem，它会在保存记录时生成一个 slug。它工作得很好。

我可以像这样路由到蛞蝓：`places/house-of-dead`，完美。但是我在测试时遇到了问题。

我`FactoryGirl`用来存根我要创建的参数，但我不知道如何让生成的 slug 断言如果我的路由重定向到它，我的测试在下面和 ( `???? should be the generated slug`).:

```
 context '#create' do
      it 'should redirect to place after created' do
        place = FactoryGirl.attributes_for(:place)

        post :create, { place: FactoryGirl.attributes_for(:place) }

        response.should redirect_to places_path(slug: ????)
      end
    end 
```

我的控制器很简单：

```
def create
    @place = Place.new(params[:place])

    # setting up who owns this place
    @place.user = current_user

    if @place.save
      flash[:success] = "Place created."

      redirect_to @place
    else
      render :new
    end
end 
```

如您所见，我使用`redirect_to @place`它会将我重定向到`place/:slug'，但是在测试该重定向时，我该怎么做呢？

另外，我的测试方式是否正确/良好？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T15:26:25.610

你几乎回答自己：

```
response.should redirect_to places_path(assigns(:place)) 
```

或者如果您需要使用 slug：

```
response.should redirect_to places_path(slug: assigns(:place).slug) 
```

有关更多信息，请参阅[https://github.com/rspec/rspec-rails#assigns](https://github.com/rspec/rspec-rails#assigns)`assigns()`。

而这条线

```
place = FactoryGirl.attributes_for(:place) 
```

是多余的，因为您从不`place`在其余的测试中使用该变量。

# jslint - 实用且广泛认可的 jshint 设置

> ID：13272532
> 
> 赞同：18
> 
> 时间：2012-11-07T15:14:18.683
> 
> 标签：jslint, jshint

我们刚刚开始使用 JSHint / JSLint 并且正在寻找一些“最佳实践”类型设置，这些设置被广泛认为是严格和实用主义之间的良好折衷。我在互联网上看了看，并没有真正找到任何东西。

我意识到这完全取决于个人意见，但我原以为现在已经形成了某种共识。例如，有人知道 jquery、google、yahoo 等代码的用途吗？

谢谢。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-21T09:59:57.543

这绝对是个人风格的问题，但是您可以从开源项目中看到许多示例：

*   [jQuery](https://github.com/jquery/jquery/blob/master/.jshintrc)或[jQuery UI](https://github.com/jquery/jquery-ui/blob/master/.jshintrc)
*   [Mozilla 浏览器 ID](https://github.com/mozilla/browserid/blob/dev/.jshintrc)
*   [雪人](https://github.com/yui/yeti/blob/master/package.json)（来自雅虎 yui）

所以如果你务实地将它们结合起来，你会得到类似的东西：

```
{
    "curly": true,
    "eqeqeq": true,
    "eqnull": true,
    "expr": true,
    "latedef": true,
    "onevar": true,
    "noarg": true,
    "node": true,
    "trailing": true,
    "undef": true,
    "unused": true
} 
```

# eclipse - 更新后无法启动 Eclipse Juno

> ID：13272535
> 
> 赞同：1
> 
> 时间：2012-11-07T15:14:21.227
> 
> 标签：eclipse, eclipse-juno

我已经在 Eclipse 中对我已安装的功能进行了更新。现在 Eclipse 不会启动。我已经删除了 .lock 文件。我没有 .snap 文件。我已经重新安装并解压缩了 eclipse 以替换我当前的 eclipse 目录。这是我使用 -clean 运行 eclipse 后的 .log 文件：

> !会话 2012-11-07 10:11:05.302 -------------------------------------------------- --------- eclipse.buildId=M20120914-1800 java.version=1.7.0_02 java.vendor=Oracle Corporation BootLoader 常量：OS=win32, ARCH=x86_64, WS=win32, NL=en_US 框架参数： -product org.eclipse.epp.package.mobile.product 命令行参数：-os win32 -ws win32 -arch x86_64 -product org.eclipse.epp.package.mobile.product -clean
> 
> !ENTRY org.eclipse.equinox.event 2 0 2012-11-07 10:11:11.117 !MESSAGE [SCR] 找到名称重复的组件！详细信息： Component1 : Component [ name = org.eclipse.equinox.event activate = activate deactivate = deactivate modified = configuration-policy = optional factory = null autoenable = true immediate = false implementation = org.eclipse.equinox.internal.event.EventComponent state = Unsatisfied properties = serviceFactory = false serviceInterface = [org.osgi.service.event.EventAdmin] 引用 = null 位于 bundle = org.eclipse.equinox.event_1.2.100.v20110502 [329] ] Component2: Component [ name = org .eclipse.equinox。
> 
> !ENTRY org.eclipse.equinox.p2.transport.ecf 2 0 2012-11-07 10:11:11.151 !MESSAGE [SCR] 找到名称重复的组件！详细信息：组件1：组件[名称=org.eclipse.equinox.p2.transport.ecf激活=激活停用=停用修改=配置策略=可选工厂=空自动启用=真立即=假实施=org.eclipse.equinox.internal .p2.transport.ecf.ECFTransportComponent state = Unsatisfied properties = {p2.agent.servicename=org.eclipse.equinox.internal.p2.repository.Transport} serviceFactory = false serviceInterface = [org.eclipse.equinox.p2.core. spi.IAgentServiceFactory] ​​引用 = null 位于 bundle = org.eclipse.equinox.p2.transport.ecf_1.0.0.v20111128-0624 [367] ] Component2: Component [ name = org.eclipse.equinox.p2。
> 
> !ENTRY org.eclipse.e4.ui.workbench 4 0 2012-11-07 10:11:26.746 !MESSAGE 无法从捆绑包“268”创建类“org.eclipse.e4.core.commands.CommandServiceAddon”！堆栈 0 org.eclipse.e4.core.di.InjectionException：java.lang.ClassCastException：无法在 org.eclipse.e4.core.internal 将 org.eclipse.core.commands.CommandManager 转换为 org.eclipse.core.commands.CommandManager。 di.MethodRequestor.execute(MethodRequestor.java:63) 在 org.eclipse.e4.core.internal.di.InjectorImpl.processAnnotated(InjectorImpl.java:859) 在 org.eclipse.e4.core.internal.di.InjectorImpl。在 org.eclipse.e4.core.internal.di.InjectorImpl.make(InjectorImpl. java:253) 在 org.eclipse.e4.core.contexts。org.eclipse.e4.ui.internal.workbench.ReflectionContributionFactory.createFromBundle(ReflectionContributionFactory.java:105) org.eclipse.e4.ui.internal.workbench.ReflectionContributionFactory.doCreate( ReflectionContributionFactory.java:71) 在 org.eclipse.e4.ui.internal.workbench.ReflectionContributionFactory.create(ReflectionContributionFactory.java:49) 在 org.eclipse.e4.ui.internal.workbench.swt.E4Application.createE4Workbench(E4Application. java:254) at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:557) at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332) at org.eclipse。 ui.internal.Workbench.createAndRunWorkbench(Workbench.java:543) 在 org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149）在 org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:124) 在 org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196) 在 org.eclipse .core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110) 在 org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79) 在 org.eclipse.core.runtime .adaptor.EclipseStarter.run(EclipseStarter.java:353) 在 org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect .NativeMethodAccessorImpl.invoke(Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) at java.lang.reflect.Method.invoke(Unknown Source) at org.eclipse。equinox.launcher.Main.invokeFramework(Main.java:629) 在 org.eclipse.equinox.launcher.Main.basicRun(Main.java:584) 在 org.eclipse.equinox.launcher.Main.run(Main.java: 1438) 在 org.eclipse.equinox.launcher.Main.main(Main.java:1414) 引起：java.lang.ClassCastException：无法将 org.eclipse.core.commands.CommandManager 转换为 org.eclipse.core.commands。 CommandManager at java.lang.Class.cast(Unknown Source) at org.eclipse.e4.core.internal.contexts.EclipseContext.get(EclipseContext.java:566) at org.eclipse.e4.core.commands.CommandServiceAddon.init (CommandServiceAddon.java:30) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) 在 java.lang.reflect。方法。在 org.eclipse.e4.core.internal.di.MethodRequestor.execute(MethodRequestor.java:56) 调用（未知来源）... 27 更多

有没有人看到这个错误并且知道如何解决它？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T15:41:23.803

我最终通过将 Eclipse 下载并解压缩到另一个目录中，然后将我的旧插件 + 捆绑包文件夹复制到其中来解决它。

# python - 加速 Numpy/Python 中的最小搜索

> ID：13272536
> 
> 赞同：1
> 
> 时间：2012-11-07T15:14:22.767
> 
> 标签：python, numpy, scipy

我有两个浮动数组，想找到在一定范围内匹配的数据点。这是我到目前为止得到的：

```
import numpy as np

for vx in range(len(arr1)):
    match = (np.abs(arr2-arr1[vx])).argmin()
    if abs(arr1[vx]-arr2[match])<0.375:
        point = arr2[match] 
```

问题是 arr1 包含 150000 个元素，而 arr2 包含大约 110000 个元素。这需要大量的时间。你有什么建议可以加快速度吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T15:46:35.927

除了没有被矢量化之外，您当前的搜索是 (n * m)，其中 n 是 arr2 的大小，m 是 arr1 的大小。在这些类型的搜索中，它有助于对 arr1 或 arr2 进行排序，以便您可以使用二进制搜索。排序最终是最慢的一步，但如果 m 很大，它仍然更快，因为 n*log(n) 排序比 (n*m) 快。

以下是使用排序数组以矢量化方式进行搜索的方法：

```
def find_closest(A, target):
    #A must be sorted
    idx = A.searchsorted(target)
    idx = np.clip(idx, 1, len(A)-1)
    left = A[idx-1]
    right = A[idx]
    idx -= target - left < right - target
    return A[idx]

arr2.sort()
closest = find_closest(arr2, arr1)
closest = np.where(abs(closest - arr1) < .375, closest, np.nan) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T15:32:30.793

使用 numpy 的整个想法是避免使用循环进行计算。

指定条件以提取满足条件的新数组可以通过数组计算轻松实现。这是一个从数组`a`中提取值的示例，该示例满足该元素与数组中相应元素的绝对差异小于 0.75 的标准`b`：-

```
a = array([1, 0, 0.5, 1.2])

b = array([1.2, 1.1, 1.3, 1.4])

c = a[abs(a-b)<0.75] 
```

这给了我们

```
array([ 1\. ,  1.2]) 
```

# matlab - 如何在 MATLAB 中对随机数进行分组

> ID：13272537
> 
> 赞同：1
> 
> 时间：2012-11-07T15:14:25.233
> 
> 标签：matlab, grouping, histogram

如果我运行代码`rand(4,4)`，那么这将给我一个 4x4 矩阵，其中随机数介于 0 和 1 之间。然后我如何让 Matlab 将这些数据分组为`0 - 0.09, 0.1 - 0.19, 0.2, 0.29,`等组，然后我可以在直方图中绘制？

我所做的是创建了一个 M 文件，它会给我一个随机生成的数字。然后我想运行该文件 100 次并获得 100 个不同的随机数，然后像这样对它们进行分组，所以如果我了解基础知识，那么我可以将它应用到我的案例中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-07T19:00:57.740

该功能`histc`可以帮助您。

```
>> v = rand( 1, 100 ); % generate 100 RV at once (matlab is all about vectorization)
>> edges = 0:.1:1; % edges of histogram bins
>> counts = histc( v, edges );
>> bar( counts ); 
```

# performance - 破解 JVM 以避免不必要的边界检查和强制转换

> ID：13272543
> 
> 赞同：12
> 
> 时间：2012-11-07T15:14:41.790
> 
> 标签：performance, jvm

有一些语言支持足够强大的类型系统，它们可以在编译时证明代码不会寻址超出其边界的数组。我的问题是，如果我们要将这样的语言编译到 JVM，是否有某种方法可以利用它来提高性能并删除每次数组访问时发生的数组边界检查？

1) 我知道最近的 JDK 支持一些数组绑定检查消除，但由于我在编译时知道某些调用是安全的，所以我可以更安全地删除。

2) 有些人可能认为这不会对性能产生太大影响，但它肯定会，尤其是在阵列/计算密集型应用程序中，例如科学计算。

关于铸造的同样问题。我知道某些东西是某种类型，但 Java 不是，因为它的类型系统有限。有没有办法告诉JVM“相信我”并跳过任何检查？

我意识到可能没有办法做到这一点，因为 JVM 通常是分布式的，用这个功能修改 JVM 是否合理？这是已经完成的事情吗？

这是将更强大的类型语言编译到 JVM 的挫折之一，它仍然受到 Java 限制的阻碍。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T19:37:06.180

[原则上，如果没有携带证明代码](http://en.wikipedia.org/wiki/Proof-carrying_code)(PCC) 基础设施，这不能以安全的方式完成。PCC 将允许您将您的安全推理嵌入`class`文件中。在类加载时检查您的嵌入式证明。如果证明中存在缺陷，则不会加载该类。

如果 JVM 允许您在不需要正式证明的情况下放弃运行时检查，那么，正如 SecurityMatt 所说，它将破坏 Java 作为安全平台的原始理念。

JVM 使用一种特殊形式的 PCC 对方法中的局部变量进行类型检查。类加载机制使用所有局部变量类型信息来检查其正确性，但在此之后被丢弃。但这是 JVM 中使用的 PCC 概念的唯一实例。据我所知，JVM 没有通用的 PCC 基础设施。

我曾经听说有一个支持 Java 小子集的 JavaCard 平台。不过，我不确定这是否有助于解决您的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T17:33:50.063

Java 的关键特性之一是它不需要“信任”开发人员来进行边界检查。这消除了可能导致攻击者能够在您的应用程序中执行任意代码的“缓冲区溢出”安全漏洞。

通过允许开发人员关闭边界检查的能力，Java 将失去其关键特性之一——无论 Java 开发人员有多么错误，他/她的代码中都不会出现任何可利用的缓冲区溢出。

如果您想使用一种信任程序员来管理他们自己的边界检查的语言，我建议您使用 C++。这使您能够分配没有自动边界检查的数组（new int[]）和分配具有内置边界检查的数组（std::vector）。

此外，我强烈建议在将应用程序中的速度损失归咎于边界检查之前，执行一些*基准*测试以确定代码中是否存在可能导致瓶颈的其他地方。

您可能会发现，对于编译器目标，MSIL 等字节码语言比 Java 字节码更适合您的需求。MSIL 是强类型的，并且不会受到您在 Java 中发现的许多低效率的影响。

# c# - 比较转换为对象的值类型

> ID：13272552
> 
> 赞同：2
> 
> 时间：2012-11-07T15:15:19.540
> 
> 标签：c#, casting, boolean, equality, value-type

我有一个返回对象的方法，该对象可以是多种不同数据类型之一，包括字符串、数字和布尔值；在某些时候我需要比较从这个方法返回的两个值的相等性。我使用`==`而不是`Equals()`因为我需要不同的数字类型来比较 - 即。`3 == 3.0`- 这适用于字符串和数字，但由于某种原因，当我比较布尔值时它会下降。

解决这个问题的最佳方法是什么？我宁愿不必检测类型并强制转换为 bool，但如果没有其他解决方案我会这样做

我的代码看起来像：

```
private object GetValue() {
    // does some stuff, returns either a boolean, string or number value
}

var value1 = GetValue();
var value2 = GetValue();
if (value1 == value2) {
    // do something
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T15:35:34.177

```
public bool Compare(object value1, object value2)
{
    if (value1.GetType() == value2.GetType())
    {
        return value1.Equals(value2);
    }
    else
    {
        //your logic for handling different numbers
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T15:37:39.650

如何让你的函数返回字符串，然后将结果解析为 bool 或 int 或任何你想要的然后比较？

编辑：

```
private string GetValue() {}

string val = getValue();
string val2 = getValue();

bool a1;
bool b1;
int a2;
int b2;
double;
double;

bool r1 = bool.TryParse(val, out a1);
bool r2 = bool.TryParse(val2, out b1);
bool r3 = int.TryParse(val, out a2);
bool r4 = int.TryParse(val2, out b2);
bool r5 = double.TryParse(val, out a3);
bool r6 = double.TryParse(val2, out b3);

if ((a1 == b1 && r1 && r2)) || (a2 == b2 && r3 && r4)) || (a3 == b3 && r5 && r6))
return true; 
```

# sql - 优化包含多个内连接和聚合函数的 SQL 子查询

> ID：13272553
> 
> 赞同：1
> 
> 时间：2012-11-07T15:15:28.593
> 
> 标签：sql, sql-server, optimization, group-by, aggregate-functions

我有一个选择语句，它实际上是一个以编程方式构建的更大选择语句中的子查询。问题是如果我选择包含这个子查询，它就会成为一个瓶颈，整个查询会变得非常缓慢。

数据示例如下：

```
Payment
.Receipt_no|.Person |.Payment_date|.Type|.Reversed| 
          2|John    |01/02/2001   |PA   |         |
          1|John    |01/02/2001   |GX   |         |
          3|David   |15/04/2003   |PA   |         |
          6|Mike    |26/07/2002   |PA   |R        |
          5|John    |01/01/2001   |PA   |         |
          4|Mike    |13/05/2000   |GX   |         |
          8|Mike    |27/11/2004   |PA   |         |
          7|David   |05/12/2003   |PA   |R        |
          9|David   |15/04/2003   |PA   |         | 
```

子查询如下：

```
select Payment.Person, 
Payment.amount 
from Payment
inner join (Select min([min_Receipt].Person) 'Person',
   min([min_Receipt].Receipt_no) 'Receipt_no' 
   from Payment [min_Receipt] 
   inner join (select min(Person) 'Person', 
      min(Payment_date) 'Payment_date' 
      from Payment
      where Payment.reversed != 'R' and Payment.Type != 'GX' 
      group by Payment.Person) [min_date] 
   on [min_date].Person= [min_Receipt].Person and [min_date].Payment_date = [min_Receipt].Payment_date 
   where [min_Receipt].reversed != 'R' and [min_Receipt].Type != 'GX' 
   group by [min_Receipt].Person) [1stPayment] 
on [1stPayment].Receipt_no = Payment.Receipt_no 
```

这将通过 .Payment_date（升序）、.Receipt_no（升序）检索每个人的第一笔付款，其中 .type 不是“GX”，.Reversed 不是“R”。如下：

```
Payment
.Receipt_No|.Person|.Payment_date
          5|John   |01/01/2001
          3|David  |15/04/2003
          8|Mike   |27/11/2004 
```

## 在艾哈迈德的帖子之后 -

从以下结果

```
(3|David  |15/04/2003) 
and (9|David  |15/04/2003) 
```

我只想要具有最低receipt_no 的记录。所以

```
(3|David  |15/04/2003) 
```

所以我添加了按人分组的聚合函数'min（Payment.receipt_no）'。

查询 1。

```
select min(Payment.Person) 'Person',
    min(Payment.receipt_no) 'receipt_no'
from
   Payment a
where
  a.type<>'GX' and (a.reversed not in ('R') or a.reversed is null)
and a.payment_date = 
  (select min(payment_date) from Payment i 
  where i.Person=a.Person and i.type <> 'GX' 
  and (i.reversed not in ('R') or i.reversed is null))
group by a.Person 
```

我在更大的查询中将此添加为子查询，但它仍然运行得很慢。因此，我尝试重写查询，同时尝试避免使用聚合函数并提出以下建议。

查询 2。

```
SELECT
    receipt_no,
    person,
    payment_date,
    amount
FROM
    payment a
WHERE 
    receipt_no IN 
    (SELECT 
       top 1 i.receipt_no 
    FROM 
        payment i 
    WHERE 
        (i.reversed NOT IN ('R') OR i.reversed IS NULL) 
        AND i.type<>'GX' 
        AND i.person = a.person 
    ORDER BY i.payment_date DESC, i.receipt_no ASC) 
```

我不一定认为它更有效。事实上，如果我在更大的数据集上并排运行两个查询，则查询 1\. 在几毫秒内完成，而查询 2\. 需要几秒钟。

但是，如果我随后将它们作为子查询添加到更大的查询中，则更大的查询使用查询 1 在几小时内完成。使用查询 2 在 40 秒内完成。

我只能将此归因于在一个而不是另一个中使用聚合函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T19:01:05.950

您如何区分付款

```
 (3|David  |15/04/2003) 
and (9|David  |15/04/2003) 
```

这些都是由同一人完成的。除非时间不同，否则此查询应该可以正常工作：

```
select 
    receipt_no,
    person,
    payment_date
from
    payment a
where
    type<>'GX' and (reversed not in ('R') or reversed is null)

  and payment_date = 
     (select min(payment_date) from payment i 
      where i.person=a.person and i.type <> 'GX' 
      and (i.reversed not in ('R') or i.reversed is null))
order by person,payment_date desc 
```

我已经在 SQLFiddle 上设置并测试了这个查询，但我不确定性能，因为我没有你拥有的数据量。所以检查并让我知道

===

# [上述问题的 SQL Fiddle 演示](http://sqlfiddle.com/#!3/7b813/14)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T09:10:55.367

## 根据 CodeReview 的评论 -

[我还按照建议使用Rank()](http://msdn.microsoft.com/en-us/library/ms176102.aspx)命令重写了查询。

查询 3。

```
left join 
    (select 
        a.Person, 
        a.amount,
        (rank () over (Partition by a.Person order by a.payment_date desc, a.receipt_no desc)) 'Ranked' 
    from 
        Payment a
    Where 
        (a.reversed not in ('R') or a.reversed is null) 
        and a.type != 'GX'
    ) [lastPayment]  
on 
    [lastPayment].Person = [Person].Person 
    and [lastPayment].ranked = 1 
```

这种方法还可以加快较大的查询，现在较大的查询需要大约 28 秒

但是[Rank()](http://msdn.microsoft.com/en-us/library/ms176102.aspx)仅支持从 SQL 2005 开始。

# php - kohana kostache 部分逻辑

> ID：13272560
> 
> 赞同：-1
> 
> 时间：2012-11-07T15:15:56.993
> 
> 标签：php, kohana, partial, kohana-3.2, kostache

使用 kostache 开始了一个项目。

我在我的类 View_Layout 中使用扩展 kostache_layout 制作了一些部分，如横幅、导航和页脚。部分在每一页上都可以正常工作。

一个问题。导航始终显示相同的链接。我的目标是显示适合登录用户的链接。如何将逻辑放在导航的部分？我知道我可以在 View_Layout 类中编写函数但 View_Layout 必须知道用户角色？

希望有人能帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T18:07:01.643

### 选项 1：发展你的观点

最好的选择是扩展视图的功能。实际上，在 MVC 启发的模式中，视图应该是处理 UI 逻辑的实例，并且可以从哪些（通常不止一个）模板中选择来创建响应。如果该响应甚至需要是 HTML .. 也许一个简单的 HTP 标头就足够了。

Kohana 中的默认工具集面向非常简单的用例，但可以对其进行扩展。

我的建议是开始使用完全实现的视图。

### 选项 2：使用 HMVC

或者，您可以在 Kohana 中使用 HMVC 功能。这意味着，你有一个或几个“主控制器”，然后创建子请求。这些请求的响应被传入/绑定到模板，所述控制器监督。

在您的特定情况下，菜单将由单独的子控制器管理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T15:22:09.957

在 mustache 中，部分继承自周围模板的变量堆栈。您需要在视图类中执行此逻辑。如果不同的页面需要不同的链接，请在您的特定视图类中执行此操作。

# c++ - fstream getline() 未处理的异常

> ID：13272562
> 
> 赞同：1
> 
> 时间：2012-11-07T15:15:57.040
> 
> 标签：c++, visual-c++, getline

我正在尝试读取文件，所以正在这样做：-

```
void Load(const char * Name){
    fs.open(Name, std::ifstream::in);
        char temp[256];

    if(fs.is_open()){

        while (!fs.eof())
        {
            fs.getline(temp , 256);
            Lines.push_back(new std::string(temp));
        }
}
} 
```

但它在`getline`->上中断

```
Unhandled exception at 0x7730B4D9 (ntdll.dll) in GameCore.exe: 0xC0000005: Access violation writing location 0x00000014. 
```

检查的地方

```
else
            /*
             * Not part of _iob[]. Therefore, *pf is a _FILEX and the
             * lock field of the struct is an initialized critical
             * section.
             */
            EnterCriticalSection( &(((_FILEX *)pf)->lock) ); 
```

在`_file.c`文件中，这里有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T09:38:20.207

当您遇到此类问题时，您可能需要仔细检查您的项目配置。例如，在 MSVC 中检查您的项目属性 > 配置属性 > C/C++ > 代码生成 > 运行时库。确保它对所有依赖项保持一致，并根据当前构建将其设置为调试/发布变体。

# c# - 使用 pcapdotnet 将数据包分成 2 个数据包

> ID：13272565
> 
> 赞同：0
> 
> 时间：2012-11-07T15:16:03.810
> 
> 标签：c#, pcap.net

如何使用 pcapdotnet 将一个数据包分成两个数据包？这是我尝试过的，但我不知道它是否正确：

```
 public IEnumerable<Packet> splitPacket(Packet packet)
    {
        EthernetLayer ethernet = (EthernetLayer)packet.Ethernet.ExtractLayer();
        IpV4Layer ipV4Layer = (IpV4Layer)packet.Ethernet.IpV4.ExtractLayer();
        DateTime packetTimestamp = packet.Timestamp;
        ILayer payload = packet.Ethernet.IpV4.Payload.ExtractLayer();
        IpV4Fragmentation.Equals(packet, packet);

        yield return PacketBuilder.Build(packetTimestamp, ethernet, ipV4Layer, payload);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T12:09:17.397

我从未使用过 Pcap.Net，所以我不确定这是否可行，但总体思路是将数据（“有效负载层”）分成几个块，然后发送。为了确保片段可以重新组装，您还需要添加一些关于每个片段的位置（*偏移）的信息。*

在 Pcap.Net 中，`IpV4Fragmentation`该类包含两个定义此属性的属性：

*   `IpV4Fragmentation.Options`：
    *   对于除最后一个以外的所有片段，它应该设置为`IpV4FragmentationOptions.MoreFragments`,
    *   对于最后一个片段，它应该设置为`IpV4FragmentationOptions.None`
*   `IpV4Fragmentation.Offset`：
    *   包含片段的偏移量（必须能被 8 整除）。对于第一个片段，此偏移量为零。

考虑到这一点，我会写这样的东西：

**（免责声明：这是用记事本写的，我不知道它是否可以编译，更不用说按原样工作了）：**

```
public IEnumerable<Packet> Split(Packet packet, int numberOfFragments)
{
    // get original layers
    var ethernet = (EthernetLayer)packet.Ethernet.ExtractLayer();
    var ipV4 = (IpV4Layer)packet.Ethernet.IpV4.ExtractLayer();
    var time = packet.Timestamp;

    // extract the data
    var payload = (PayloadLayer)packet.Ethernet.IpV4.Payload.ExtractLayer();
    var totalLength = payload.Length;

    // split data into smaller segments
    var partialLength = totalLength / numberOfFragments;

    // make sure it's divisible with 8
    // (see http://en.wikipedia.org/wiki/IPv4#Fragmentation_and_reassembly)
    partialLength = (partialLength / 8) * 8;

    // send one by one
    var offset = 0;
    while (offset < totalLength)
    {
        // get length for this fragment
        var fragmentLength = partialLength;
        var options = IpV4FragmentationOptions.MoreFragments;            

        // is this the last fragment? trim length if needed
        if (offset + fragmentLength >= totalLength) 
        {
            options = IpV4FragmentationOptions.None;
            fragmentLength = totalLength - offset;
        }

        // copy the actual data into a new buffer
        var newBuffer = payload.ReadBytes(offset, fragmentLength);
        var newPayload = new PayloadLayer() { Data = newBuffer };

        // change IP layer fragmentation options
        ipV4.Fragmentation = new IpV4Fragmentation(options, offset);

        // return it
        yield return PacketBuilder.Build(time, ethernet, ipV4, newPayload);

        // next offset
        offset += fragmentLength;
    }
} 
```

**[更新@brickner 的建议]**

# list - Stata：仅列出少数有条件的记录

> ID：13272572
> 
> 赞同：1
> 
> 时间：2012-11-07T15:16:35.193
> 
> 标签：list, stata

我只想列出一些有条件的记录。问题：如果我使用 1/4 或 _n <= 4 并且前 4 条记录不满足条件，则不会列出任何记录。这是一个例子：

```
clear
input x
1
2
3
4
5
6
end
list if x > 4  & _n <= 3
list in 1/3 if x > 4 
```

有谁知道如何在一行中解决这个问题？感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T21:03:10.083

将以下代码放入 Stata 可以看到的目录中名为 slist.ado 的文件中（如 ~/ado/personal）。您可以使用 -adopath- 命令找到此类目录。

```
program define slist 
version 12.1
syntax [varlist] [if], top(int)

#delimit;
tempvar tag;
gen `tag'=1 `if';
sort `tag';
list `varlist' `if' in 1/`top';

end; 
```

语法是`slist x if x>4, top(4)`. 如果您不指定 x，它将为您提供数据集中的所有变量。

# cuda - Ubuntu 11.10/12.04 上的 CUDA“无兼容设备”错误

> ID：13272574
> 
> 赞同：4
> 
> 时间：2012-11-07T15:16:42.113
> 
> 标签：cuda, ubuntu-12.04, gpu

一段时间以来，我一直在尝试在笔记本电脑上设置 Ubuntu 环境以进行 CUDA 编程。我目前正在双启动 Windows 8 和 Ubuntu 12.04，并希望在 Ubuntu 上安装 CUDA 5。

笔记本电脑配备 GeForce GT 640M 显卡（完整规格见下文）。这是一张擎天柱卡。

最初我是双启动 Ubuntu 11.10 并尝试过 11.10 和 12.04 的教程。

我尝试了许多各种形状和大小的教程，包括[本教程](http://www.r-tutor.com/gpu-computing/cuda-installation/cuda5.0-ubuntu)。安装过程显示设备驱动安装和Toolkit安装，Samples失败，但是当我在NSight中测试一个简单的Vector Add CUDA程序时，抛出“No compatible CUDA Device”错误。

Ubuntu 详细信息仍然显示“未知”的图形

建议？

笔记本电脑规格：Acer V3-771G Intel Core i7 2670QM nVidia GeForce GT 640M 2GB - Optimus 16GB DDR3-1600 RAM 120GB SSD + 500GB HDD + 32GB Cache SSD

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T15:49:31.507

由于它是 Optimus 设备，因此需要一些额外的步骤才能使用 nvidia GPU。虽然没有必要，但我建议您使用 bumblebee 包装程序，因为它是最简单的解决方案。

安装 bumblebee 包装器后，您可以使用`optirun programname`激活的 nvidia 卡运行程序或启动 shell：`optirun bash --login`

一个额外的好处是，bumblebee 守护程序将在 GPU 不运行时禁用它，并为您节省一些电池。

如果您不关心电池寿命并且只想始终启用 CUDA 而无需包装命令，您可以加载 nvidia 内核模块，然后手动创建必要的设备节点：

```
mknod /dev/nvidia0 c 195 0
mknod /dev/nvidiactl c 195 255 
```

（这种高级方法可以让您在不启动 Xorg 的情况下从控制台运行 cuda 程序，例如当 SSH 连接到没有运行 X 服务器的机器时。）

有关更详细的讨论，另请参阅[https://askubuntu.com/questions/131506/how-can-i-get-nvidia-cuda-or-opencl-working-on-a-laptop-with-nvidia-discrete-car](https://askubuntu.com/questions/131506/how-can-i-get-nvidia-cuda-or-opencl-working-on-a-laptop-with-nvidia-discrete-car) .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T15:41:48.897

尝试命令**sudo apt-get install mesa-utils。**

看看显卡是否被识别然后尝试安装cuda

如果第一个命令无法识别，请尝试：

```
sudo add-apt-repository ppa:ubuntu-x-swat/x-updates
sudo apt-get update
sudo apt-get install nvidia-current 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T20:01:36.253

首先安装以下库和工具：

```
sudo apt-get install freeglut3-dev build-essential libx11-dev libxmu-dev libxi-dev libgl1-mesa-glx libglu1-mesa libglu1-mesa-dev 
```

接下来我们将一些模块（驱动程序）列入黑名单，在终端输入：

```
sudo gedit /etc/modprobe.d/blacklist.conf 
```

将以下内容添加到文件末尾（每行一个，如下所示）：

```
blacklist amd76x_edac
blacklist vga16fb
blacklist nouveau
blacklist rivafb
blacklist nvidiafb
blacklist rivatv 
```

保存文件并关闭编辑器。现在我们想在终端中摆脱任何 nvidia risiduals：

```
sudo apt-get remove --purge nvidia* 
```

接下来，您需要重新启动机器 ( `sudo reboot`)。

0）在登录界面按Ctrl+Alt+F1（你不必登录，反正我们以后要重启），然后登录。

1)`sudo service lightdm stop`

2)`cd Downloads`

3）`chmod +x devdriver*.run`（您的驱动程序文件名）

4)`sudo ./devdriver*.run`

您可能必须运行一次驱动程序安装程序，重新启动（它将删除新驱动程序）并再次重复这些步骤。按照安装程序的说明进行操作，当它询问您时就可以了；是的，您确实需要 32 位库，并且确实希望它更改 xorg.conf 文件。

安装程序完成后，重新启动 ( `sudo reboot`)。你完成了 ：]

为了安装 SDK 和 Toolkit，对下载的文件使用步骤 3 和 4。( `.run`)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-26T20:55:50.963

理论上，CUDA 5.5 包含的驱动程序应该原生支持 Optimus（以及非 Optimus 笔记本电脑的单 GPU 调试）。我还没有尝试过，因为我正在等待一台计算 3.5 Optimus 笔记本电脑，以便它支持内核递归和 HyperQ。从理论上讲，HP Envy 15t-j000 具有 GT 740m 的 GK208 版本，但我真的更希望拥有像即将推出的带有 GT 735m 的 Acer S3-392 这样的超极本外形。GTC 的 NVIDIA 人员向我保证 Optimus 应该使用 CUDA 5.5 RC。我发现本月发布的“Linux CUDA 入门指南”提供了一些正确安装 Optimus 驱动程序的标志：

[http://www.google.com/url?q=http://developer.download.nvidia.com/compute/cuda/5_5/rc/docs/CUDA_Getting_Started_Linux.pdf](http://www.google.com/url?q=http://developer.download.nvidia.com/compute/cuda/5_5/rc/docs/CUDA_Getting_Started_Linux.pdf)

此外，有关笔记本电脑中 GK208 芯片和 Compute 3.5 的更多信息：

[https://devtalk.nvidia.com/default/topic/546357/sounds-like-gk208-laptops-cards-will-support-most-sm_35-features/](https://devtalk.nvidia.com/default/topic/546357/sounds-like-gk208-laptops-cards-will-support-most-sm_35-features/)

有人在 linux 下使用 CUDA 5.5 和 Optimus 笔记本电脑吗？

# android - 显示 ActionBar 选项卡的两个片段

> ID：13272575
> 
> 赞同：3
> 
> 时间：2012-11-07T15:16:42.750
> 
> 标签：android, tabs, android-actionbar, fragment

我使用 Eclipse 项目向导创建了一个带有 ActionBar 和选项卡的项目。该向导为每个选项卡创建一个虚拟片段，其中包含仅显示选项卡编号的虚拟文本。该应用程序可以正常工作。

代码如下所示：

```
 @Override
    public void onTabSelected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction) {
        // When the given tab is selected, show the tab contents in the container

        Fragment fragment = new DummySectionFragment();
        Bundle args = new Bundle();
        args.putInt(DummySectionFragment.ARG_SECTION_NUMBER, tab.getPosition() + 1);
        fragment.setArguments(args);
        getFragmentManager().beginTransaction()
                .replace(R.id.container, fragment)
                .commit();
    }

   /** 
     * A dummy fragment representing a section of the app, but that simply displays dummy text.
     */
    public static class DummySectionFragment extends Fragment {
        public DummySectionFragment() {
        }

        public static final String ARG_SECTION_NUMBER = "section_number";

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
            TextView textView = new TextView(getActivity());
            textView.setGravity(Gravity.CENTER);
            Bundle args = getArguments();
            textView.setText(Integer.toString(args.getInt(ARG_SECTION_NUMBER)));
            return textView;
        }
    } 
```

出于我的应用程序的目的，我想在设备处于纵向模式时显示一个片段，而在设备处于横向模式时显示两个片段。我知道莎士比亚样本，但在这个样本中，它是一个包含一个或两个片段的活动。

莎士比亚示例使用两种不同的布局。对于纵向模式（在“layout\fragment_layout_support.xml”中）：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent" android:layout_height="match_parent">
    <fragment class=".FragmentLayoutSupport$TitlesFragment"
            android:id="@+id/titles"
            android:layout_width="match_parent" android:layout_height="match_parent" />
</FrameLayout> 
```

对于横向模式（在“layout-land\fragment_layout_support.xml”中）：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:layout_width="match_parent" android:layout_height="match_parent">

    <fragment class=".FragmentLayoutSupport$TitlesFragment"
            android:id="@+id/titles" android:layout_weight="1"
            android:layout_width="0px" android:layout_height="match_parent" />

    <FrameLayout android:id="@+id/details" android:layout_weight="1"
            android:layout_width="0px" android:layout_height="match_parent" />

</LinearLayout> 
```

莎士比亚示例加载布局如下：

```
public class FragmentLayoutSupport extends FragmentActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        //setTheme(SampleList.THEME); //Used for theme switching in samples
        super.onCreate(savedInstanceState);

        setContentView(R.layout.fragment_layout_support);
    }
... 
```

在我无法在 FragmentActivity 中加载布局的应用程序中，我该如何做同样的事情？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-14T08:52:20.763

也许你被卡住了，因为你不知道[ActionBarActivity](http://developer.android.com/reference/android/support/v7/app/ActionBarActivity.html)继承了[FragmentActivity](http://developer.android.com/reference/android/support/v4/app/FragmentActivity.html)？

所以简单地替换

```
extends FragmentActivity 
```

和

```
extends ActionBarActivity 
```

和正确的导入（请参阅[ActionBar API 指南](http://developer.android.com/guide/topics/ui/actionbar.html)）。然后，您将能够实现与莎士比亚示例中相同的行为，同时保留您的 ActionBar/Tabs。只需在您以前工作的活动中扩展 FragmentLayoutSupport 而不是 ActionBarActivity 。

# compare - 比较两个单字节元素的函数

> ID：13272578
> 
> 赞同：0
> 
> 时间：2012-11-07T15:16:51.640
> 
> 标签：compare, byte

我正在录制声音并将它们保存到 byte[] 缓冲区中。现在我想比较这两个列表中的每一个元素，以了解它们的不同之处。谁能告诉我这是最好的方法吗？我在这里阅读了 Array.equal(array1,array2)，但我只想比较每次迭代中的两个元素，并且我也想要不同字节的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T15:24:07.700

如果您将字节存储在 byte[] 数组中，为什么不进行经典的 a[i] == b[i] 比较？或者您打算对这两个字节执行的任何操作。

如果性能是一个问题（比如对于非常大的字节数组，我可以预见到声音流），有很多并行方法可以加速这个过程。

# ruby-on-rails - Facebook - 当用户未登录时发布到页面墙（通过 FbGraph）

> ID：13272580
> 
> 赞同：0
> 
> 时间：2012-11-07T15:16:57.100
> 
> 标签：ruby-on-rails, facebook, cron, fb-graph

我使用`FbGraph`gem 和这部分代码：

```
page = FbGraph::Page.new(ID_OF_MY_PAGE)
feed = page.feed!(
  :access_token => access_token,
  :subject => 'testing',
  :message => 'Hey, I\'m testing you!'
) 
```

仅当我（作为页面的所有者）登录时它才有效。我需要使用 CRON 运行此任务。如果我不需要登录，有什么方法可以设置用于发布状态的令牌？

# verilog - 在 SystemVerilog 中的结构内使用联合分配模式

> ID：13272589
> 
> 赞同：1
> 
> 时间：2012-11-07T15:17:20.427
> 
> 标签：verilog, verification, system-verilog, hdl

这是一个用于说明的示例。在 SystemVerilog 中，它具有数组分配模式和结构分配模式语法。不管这里的 union 构造是打包还是解包，不管它是否可合成，它是赋值模式的有效用法吗？如果是， union 应该是什么值`x`？

```
typedef struct {
  int a;
  byte b;
  union packed {
      int c;
      bit [31:0] d;
  } x;
} S;

module top (s);
  output S s;
  assign s = '{int:2, default:1};
endmodule 
```

如果不是，是否意味着我必须为解压结构逐个字段指定初始值？

```
initial begin
  s.a = 2;
  s.b = 1;
  s.x.c = 2;
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T01:05:40.443

我稍微修改了您的代码以打印分配的值。

```
typedef struct {
  int a;        
  byte b;       
  union packed {
      int c;
      bit [31:0] d;
  } x; 
} S;

module top (s);
  output S s;
  assign s = '{int:2, default:1};

  initial begin
    #10
        $display ("s.a = %d, s.b = %h, s.x.c = %d, s.x.d = %h", s.a, s.b, s.x.c, s.x.d);
  end 
endmodule 
```

以下是 ncsim 的结果：

```
s.a =           2, s.b = 01, s.x.c =           1, s.x.d = 00000001 
```

并来自 vcs：

```
s.a =           2, s.b = 01, s.x.c =           1, s.x.d = 00000001 
```

希望这能回答你的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-20T23:49:04.807

我试过这个修改过的例子：

```
typedef bit [31:0] Word;
typedef struct {
  int a;
  byte b;
  union packed {
      int c;
      Word d;
  } x;
  union packed {
      Word d;
      int c;
  } y;
} S;

module top (s);
  output S s;
  assign s = '{ int:2, Word:3, default:1 };

  initial begin
    #10
        $display ("s.a = %d, s.b = %h, s.x.c = %d, s.x.d = %h s.y.d = %h s.y.c = %d",
                  s.a, s.b, s.x.c, s.x.d, s.y.d, s.y.c);
  end 
endmodule 
```

Modelsim 给出以下输出：

```
s.a =           2, s.b = 01, s.x.c =           3, s.x.d = 00000003 s.y.d = 00000002 s.y.c =           2 
```

而 VCS 给出了这个输出：

```
s.a =           2, s.b = 01, s.x.c =           3, s.x.d = 00000003 s.y.d = 00000003 s.y.c =           3 
```

这表明模拟器以他们想要的方式处理此类代码，并且没有预期的标准行为。

以下语法使用起来会更安全：

```
assign s = '{ int:2, default:1, x:3, y:4 }; 
```

有了这个，Modelsim 和 VCS 都给出了：

```
s.a =           2, s.b = 01, s.x.c =           3, s.x.d = 00000003 s.y.d = 00000004 s.y.c =           4 
```

# java - 在不使用准备好的语句的情况下防止 JDBC 中的 SQL 注入

> ID：13272590
> 
> 赞同：6
> 
> 时间：2012-11-07T15:17:22.820
> 
> 标签：java, jdbc, prepared-statement, sql-injection

我知道使用准备好的语句是防止 SQL 注入（以及由于未经检查的输入中的未转义字符导致的语法错误）的最佳方法。

我目前的情况是我正在编写一些 Java 代码来将数据从一个第三方应用程序移动到另一个。目标应用程序使用 Sybase 的专有版本，因此虽然我确实有[JTDS](http://jtds.sourceforge.net/) JDBC 驱动程序`PreparedStatement`失败，因为该驱动程序使用临时存储过程，这种特殊风格的数据库不支持这些过程。所以我只需要`Statement`使用并且我无法控制用户输入，因为它来自另一个应用程序。

有一个[类似](https://stackoverflow.com/questions/1677465/how-do-i-sanitize-sql-without-using-prepared-statements)的问题，但重点是解决您有一个无法通过准备好的语句处理的表等参数的问题。我的情况不同，希望更简单，因为我有简单的 SQL 语句。我想知道是否有复制以下内容而不使用的最佳实践`PreparedStatement`：

```
PreparedStatement statement = connection.prepareStatement("UPDATE mytable SET value=? WHERE id=?");
statement.setInt(1, getID());
statement.setString(2,userInput);
statement.executeUpdate(); 
```

所以我想问题是如何可靠地清理用户输入？我可以尝试自己从头开始，但这似乎是个坏主意，因为我可能至少会错过一个边缘情况，所以我希望那里有一个图书馆可以为我做到这一点，但是到目前为止我还没有找到一个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T16:35:24.160

ESAPI 库具有[转义 SQL 输入的](https://www.owasp.org/index.php/SQL_Injection_Prevention_Cheat_Sheet#Defense_Option_3%3a_Escaping_All_User_Supplied_Input)过程，以及在必要时开发您自己的数据库特定编码器的过程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-05T15:02:21.380

查看[JTDS 常见问题解答](http://jtds.sourceforge.net/faq.html#urlFormat)- 我非常有信心，通过组合属性`prepareSQL`，`maxStatements`您可以去那里（或者“可能已经去了”，因为您可能在几年前完成了该任务 :-)）

# php - 无法在 PHP 中获取 SQL 语句的结果

> ID：13272591
> 
> 赞同：0
> 
> 时间：2012-11-07T15:17:24.597
> 
> 标签：php, sql, pdo

我正在使用**PHP**中的搜索功能，所以我确实希望能够研究所有数据库表中的任何关键字，但我无法获取 SQL 语句的结果：

```
SELECT * FROM All_Tables 
```

这是我的代码：

```
$getTables = $this->db->query("show tables");
$tmpString = '';

while ($table_data = $getTables->fetch(PDO::FETCH_NUM))
{
    $tmpString.=$table_data[0].',';
}

$ALL_DATABASE_TABLES = substr($tmpString,0,strlen($tmpString)-1); //Remove the last ,

echo " $ALL_DATABASE_TABLES "; //  Works, it shows all database tables

$query = "SELECT * FROM $ALL_DATABASE_TABLES" ; 

$stmt = $this->db->query($query) or die(print_r($this->db->errorInfo())) ;

echo "Cool1"; // Works
echo "$ALL_DATABASE_TABLES "; //Works

// This Loop doesn't work-----------------------
while ($row = $stmt->fetch(PDO::FETCH_NUM)) 
{
    echo "Cool2"; // Doesn't work

    echo "$row[0]" ; // Doesn't work
}
//----------------------------------------------

$stmt->closeCursor(); 
```

你对此有什么想法吗？感谢你们

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T15:21:45.270

您的代码执行以下操作：

1.  选择数据库中表的完整列表。
2.  将 #1 中的完整列表组合成一个逗号分隔的列表。
3.  在查询中使用来自 #2 的逗号分隔列表`SELECT *`，从而尝试在单个结果中从数据库中的每个表中选择每条记录。

我很惊讶您实际上没有收到错误或超时/警告。原因是因为使用逗号分隔的列表将尝试`join`在每个表之间进行。从手册：

> 在没有连接条件的情况下，INNER JOIN 和 ,（逗号）在语义上是等效的：两者都在指定的表之间产生笛卡尔积（即，第一个表中的每一行都连接到第二个表中的每一行）。

当您的表列表增长到甚至三个或四个表并且每个表中有 5 或 6 列以及很长的行列表时，您的查询将*永远*运行。现在，一个普通的数据库有 10 多个表（至少）——所以 MySQL 要么抛出错误，要么只是超时（根据我的经验）——这就是为什么我觉得你没有收到一个表很奇怪。

除了从数据库中的每个表中选择每条记录之外，您的目标到底是什么？

如果您真的只想列出每个表中的每条记录，则可`SELECT *`以为每个表执行单独的操作：

```
$getTables = $this->db->query("show tables");
$tables = array();

while ($table_data = $getTables->fetch(PDO::FETCH_NUM)) {
    $tables[] = $table_data[0];
}

foreach ($tables as $table) {
    $stmt = $this->db->query('SELECT * FROM ' . $table) or die(print_r($this->db->errorInfo()));
    while ($row = $stmt->fetch(PDO::FETCH_NUM)) {
        echo $row[0] . '<br />';
    }
    $stmt->closeCursor();
} 
```

# jquery - 打开一个特定的手风琴

> ID：13272592
> 
> 赞同：1
> 
> 时间：2012-11-07T15:17:26.790
> 
> 标签：jquery, jquery-ui-accordion

我想知道如何打开一个特定的手风琴（实际上是一个切换）。

这是我的jQuery

```
 $(document).ready(function()
    {
        //Add Inactive Class To All Accordion Headers
        $('.accordion-header').toggleClass('inactive-header');

        //Open The First Accordion Section When Page Loads
        $('.accordion-header').first().toggleClass('active-header').toggleClass('inactive-header');
        $('.accordion-content').first().slideDown().toggleClass('open-content');

        // The Accordion Effect
        $('.accordion-header').click(function () {
            if($(this).is('.inactive-header')) {
                $('.active-header').toggleClass('active-header').toggleClass('inactive-header').next().slideToggle().toggleClass('open-content');
                $(this).toggleClass('active-header').toggleClass('inactive-header');
                $(this).next().slideToggle().toggleClass('open-content');
            }

            else {
                $(this).toggleClass('active-header').toggleClass('inactive-header');
                $(this).next().slideToggle().toggleClass('open-content');
            }
        });

        return false;
    });​ 
```

现在发生的是在页面加载时第一个项目打开。我如何将其设置为第二个项目打开的位置？

我在这里有一个小提琴：http: [//jsfiddle.net/bbyrdhouse/LjDBa/](http://jsfiddle.net/bbyrdhouse/LjDBa/)

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T15:20:00.943

要自动打开第二个手风琴，请将第一行更改为：

```
$('.accordion-header').eq(1).toggleClass('active-header').toggleClass('inactive-header');
$('.accordion-content').eq(1).slideDown().toggleClass('open-content'); 
```

[`eq(1)`](http://api.jquery.com/eq/)将定位匹配元素中的第二项（索引从零开始）。如果要打开最后一个手风琴，请使用[`last()`](http://api.jquery.com/last/)而不是[`eq(1)`](http://api.jquery.com/eq/).

查看更新的小提琴：http: [//jsfiddle.net/adrianonantua/LjDBa/1/](http://jsfiddle.net/adrianonantua/LjDBa/1/)

# java - 添加文件时SVN提交错误

> ID：13272594
> 
> 赞同：4
> 
> 时间：2012-11-07T15:17:28.863
> 
> 标签：java, eclipse, svn, tortoisesvn, subclipse

几天前，我在尝试将文件添加到已签入 SVN 的项目时开始收到错误消息。签出和更新仍然可以正常工作，但如果我尝试添加一个文件，我会收到一个没有意义的错误。

我使用的是 Eclipse 4.2 和最新版本的 Subclipse，但使用 TortoiseSVN 1.7.10 时也遇到同样的错误。

我得到的错误是：

```
 svn: E175002: Commit failed (details follow):
    svn: E175002: Commit failed (details follow):
svn: E175002: Processing PROPFIND request response failed: Open quote is expected for attribute "{1}" associated with an  element type  "language". (/svn/myproject/trunk/database/sql/2.11/test.xml) 
svn: E175002: Processing PROPFIND request response failed: Open quote is expected for attribute "{1}" associated with an  element type  "language". (/svn/myproject/!svn/wrk/2bc65adb-3a01-0010-a3f6-67fdfc8c148b/trunk/database/sql/2.11/test.xml) 
    svn: E175002: Commit failed (details follow):
svn: E175002: Processing PROPFIND request response failed: Open quote is expected for attribute "{1}" associated with an  element type  "language". (/svn/myproject/trunk/database/sql/2.11/test.xml) 
svn: E175002: Processing PROPFIND request response failed: Open quote is expected for attribute "{1}" associated with an  element type  "language". (/svn/myproject/!svn/wrk/2bc65adb-3a01-0010-a3f6-67fdfc8c148b/trunk/database/sql/2.11/test.xml) 
```

我尝试过的事情：

*   使用 Eclipse 和 Tortoise 进行清理和刷新
*   断开项目与存储库的连接并重新连接
*   卸载并重新安装 Tortoise
*   卸载并重新安装 Subclipse
*   将存储库签出到另一个项目并尝试在“新”项目中添加一个文件，但在“新”项目中仍然出现相同的错误。

**更新：**当我 VPN 进入我办公室的专用网络并使用 SVN 存储库的内部 IP 地址时，它工作得很好。这似乎指向我正在使用的新互联网提供商（宪章）；或我最近切换到的 AVG。我确实尝试了 AVG 中的“禁用 AVG”选项，但仍然出现相同的错误。

有谁知道这个错误是什么以及如何解决它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T14:58:36.883

我无法直接回答您的问题，但这里有一些其他信息会有所帮助：

*   刷新/清理仅修复非常具体的问题。清理主要是在更新/提交等过程中发生意外崩溃时运行。清理将删除工作副本上的锁定并完成所有排队的事务。刷新主要是 GUI 工具强制他们运行 svn status 并刷新他们的图标的问题。

*   卸载/重新安装几乎总是毫无意义的。这不像您有损坏的文件。

*   有时尝试重新结帐很有用，尤其是在这样做不痛苦的情况下。

您的错误发生在客户端和服务器之间的 HTTP 对话期间。PROPFIND 是 SVN 客户端向服务器发出的低级 HTTP 请求之一。我会寻找可能妨碍 HTTP 对话并破坏数据的代理服务器、防火墙、防病毒软件（尤其是后者）。这就是这里的声音。某些东西正在破坏对 PROPFIND 请求的响应。这可能是 SVN 服务器的问题，但我认为这不太可能。我认为它必须是位于客户端和服务器之间的干扰对话的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-02-20T08:25:49.850

尝试将我的项目添加到 SVN 时，我遇到了同样的问题：

```
svn: E175002: Processing PROPFIND request response failed: Open quote is expected for attribute "lang" associated with an  element type  "html". (/svn/trunk/Tools/Java/Epsd2Jira) 
```

根本原因是通过公司内部 Web 网关代理 Eclipse 流量。由于 SVN 在公司 Intranet 内，因此将 Eclipse 网络设置更改为使用直接连接解决了这个问题，我能够提交。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T03:23:10.260

I had same problem. I tried to install SVN client on all 3 of my computers (vista, xp, windows 7), all has same problem. It did not have problem when I add commit from my own server (the SVN server is in the server). It did not have problem my friend try from his own computer. I tried to reboot router, disable anti virus, non worked. I tried to reinstall so many time both SVN server and my SVN client, still same problem.

Finally, I changed from http to https, and it works fine.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T15:36:42.663

我在使用 Aptana 时遇到了同样的问题。大多数情况下，这会通过清理、刷新、然后再次清理来修复自身

# c++ - 我需要在 Boost 线程函数中调用 unlock() 吗？

> ID：13272595
> 
> 赞同：2
> 
> 时间：2012-11-07T15:17:29.580
> 
> 标签：c++, multithreading, boost

我在使用 C++ Boost 线程的地方有以下代码行：

```
void threadFunc()
{
boost::mutex::scoped_lock lock(m_Mutex);
//some code here...
condition.notify_one();
} 
```

那么我应该在最后一行之前调用 unlock() 函数吗，如下所示？如果我不调用 unlock() 有什么区别？

```
void threadFunc()
{
boost::mutex::scoped_lock lock(m_Mutex);
//some code here...
lock.unlock();
condition.notify_one();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T15:18:50.423

不——`scoped_lock`类的重点是锁与范围相关——即，当`scoped_lock`对象超出范围时，锁会自动释放。这确保（例如）如果任何中间代码抛出异常，锁仍将被释放。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T15:18:40.663

不，锁是作用域的，所以它会在超出作用域时“自动”解锁。见 RAII。

[http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)

# silverlight - Silverlight 和 CRM - 如何将数据网格复选框列绑定到两态实体

> ID：13272596
> 
> 赞同：0
> 
> 时间：2012-11-07T15:17:30.127
> 
> 标签：silverlight, xaml, dynamics-crm

我有一个与 SDK 中提供的非常相似的 Datagrid：

![在此处输入图像描述](../Images/fc2c8ee32b7596f8be6c1292054960fc.png)

如您所见，有 2 个复选框列，我想做的是将两个状态字段绑定到这些复选框（它们是只读的，因此检查是否为真）。谁能解释如何做到这一点？

或者建议一种更好的方法来实现我想要实现的目标？

谢谢，

杰克

编辑; 做不到这一点，如果可能的话，只在复选框列中显示值（真/假）就足够了吗？使用 DataGrid 和 Multibinding 似乎存在问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T19:06:14.450

也许[多重绑定](http://www.codeproject.com/Articles/286171/MultiBinding-in-Silverlight-5)可以帮助解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T09:55:58.463

我明白了，它真的很简单，您只需将 datagridcheckbox 列的 IsThreeState 属性设置为 true，如下所示：

```
<sdk:DataGridCheckBoxColumn  x:Name="MyCheckBoxColumn" IsThreeState="True"  Header="Is On-Target?" Width="200" Binding="{Binding Path=my_IsOnTarget}" IsReadOnly="True" /> 
```

这样做的原因是因为 CRM 中的“2-state”实体实际上具有三种状态（一个可为空的布尔值），它们是 true、false 和 null。

# grails - Grails 2.1.1：重定向到 /index.gsp 不使用定义的过滤器

> ID：13272599
> 
> 赞同：2
> 
> 时间：2012-11-07T15:17:39.507
> 
> 标签：grails, redirect, filter

我有一个运行良好的 Grails 2.1.1 应用程序，至少在我尝试为所有人定义一个过滤器`Controller`以重定向到变量中未设置的`index.gsp`if之前...`user``session`

无论我尝试什么，我都无法在启动服务器时重定向到“/index”，也无法渲染“/index” - 如果我删除过滤器并从我`AuthenticationController`的错误参数中重定向到“/index”，所有工作都像魅力...

所以，这是我到目前为止所拥有的：

```
class AuthenticationFilters {
  all(controller:'*', action'*') {
    before = {
      def user = (User) session.getValue("user")
      if(user == null || !user.loginState) {
        redirect(controller: 'authentication', action: 'index')
        return false
      }
    }
  }
}

class AuthenticationController {
  def authenticationService

  def index = {
    render(view: '/index')
  }

  def login(LoginCommand cmd) {
    if(cmd.hasErrors()) {
      redirect(action: index)
      return
    }
  }
  ....
} 
```

现在，如果我注释掉`all`过滤器定义，一切正常。我得到了启动时显示的页面（index.gsp），如果`LoginCommand`有错误，我将被重定向到该`index.gsp`页面而没有任何问题。如果我现在在`all`过滤器定义中评论，我会得到一个`404`.

我试过： [Grails：重定向到不在任何控制器中的 index.gsp](https://stackoverflow.com/questions/11144775/grails-redirect-to-index-gsp-that-is-not-in-any-controller) [升级到 Grails 2.0：/index.gsp 未找到](https://stackoverflow.com/questions/8089592/upgrade-to-grails-2-0-index-gsp-not-found) [Grails：在 weblogic 中部署时的主要问题（及其解决方案）是什么？](https://stackoverflow.com/questions/6193390/grails-what-are-the-main-issues-and-his-solutions-when-deploying-in-weblogic)

但我没有运气...

我正在开发 Intellij IDEA 11.1.4 Premium（评估版）

* * *

**编辑：**我试图从我的类中的属性中获取`User`对象，被一个块包围，现在面临的问题是该属性显然不可用？为什么？`session``AuthenticationFilters``try/catch``session`

```
try {
        def user = (User) session.getValue("user")
        if((user == null || !user.loginState)) {
            ...
        }
    } catch(Exception e) {
        println("... couldn't get user from session! ${e.getMessage()}")
    } 
```

控制台输出：

```
... couldn't get user from session! No such property: session for class: grailstest001.AuthenticationFilters 
```

对此有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T08:20:29.687

因此，只是为了在此处添加我的经验以解决已解决的问题并供其他用户进一步使用：

要检查用户是否是第一次进入该页面，您可以通过检查该`controllerName`字段轻松地做到这一点。如果用户没有被任何控制器引用到该站点，则它应该是`null`或（空字符串）。`""`

此外，我没有在我的应用程序中使用任何数据库进行身份验证，因为所有这些问题都由 API 提供支持。因此，我创建了一个`UserService.groovy`充当 a 的类，`SessionScopedBean`并将所有与用户相关的信息存储在该类中。

因此，您的过滤器定义可能如下所示：

```
class MyFilters {
  def filters = {
    before = {
      if(!controllerName || controllerName.equals("")) {
        redirect(controller:'home',action:'index')
      }
      if(!applicationContext.userService?.getUser() || !applicationContext.userService?.getUser.isLoggedIn) {
        redirect(controller:'auth',action:'login')
      }
    }
  }
} 
```

否则，如果您不想重定向从您的`Filters.groovy`课程中“新”进入您的页面的用户，您可以使用该`UrlMappings.groovy`课程来执行此操作。只需将您的`/`（根）索引映射到您想要的页面：

```
class UrlMappings {
  static mappings = {
    "/"(controller:'mycontroller',action:'myaction') // change it to your liking
    "/$controller/$action?/$id?" {
      constraints {
        // apply constraints here
      }
    }
    "500"(view:'/error')
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T17:09:25.637

我认为您的过滤器语法可能不正确 - 试试

```
Class AuthenticationFilters {
  def filters = { // <--- added this
    all(controller:'*', action'*') {
      before = {
        def user = (User) session.getValue("user")
        if(user == null || !user.loginState) {
          redirect(controller: 'authentication', action: 'index')
          return false
        }
      }
    }
  } // <-- added
} 
```

# c - 在C中的字符串中输出变量内容

> ID：13272602
> 
> 赞同：-4
> 
> 时间：2012-11-07T15:17:46.557
> 
> 标签：c, string, variables, output

在 C++ 中，我执行以下操作：

```
cout<<"a["<<i+1<<",<<"j+1<<"]= "; cin>>a[i][j]; 
```

（显示：“a[1][1]=”并获取 a[0][0] 的输入；基本上 i+1 对查看者来说只是一个技巧，因为我想使用从 0 开始的数组而不是 1这不是重点）。

如何在 C 中使用 printf 和 scanf 完成此操作？显然C不喜欢

```
printf("a["<<i+1<<","<<j+1<<"]= "); scanf("%d", a[i][j]); 
```

基本上，相当于

```
<<i+1<< 
```

用 C 语言？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T15:19:55.273

您不能`<<`在 C 中的字符串上使用运算符。C 没有（很多）运算符重载，`<<`仅表示“二进制左移”。

```
printf("a[%d][%d]=", i + 1, j + 1);
fflush(stdout);
scanf("%d", &a[i][j]); 
```

因为`fflush()`is`printf()`不以换行符结尾，所以直接在它之后输入不是很安全。刷新（*输出*流）在这里可以提供帮助，并确保我们正在打印的提示确实使它在输入读取开始之前完成屏幕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T15:19:53.573

您可以使用格式说明符代替数字和其他字符串字符相同

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T15:24:09.823

要直接回答您的问题，C 中没有精确的`<<`运算符等效项。您似乎误解了[printf 函数](http://www.cplusplus.com/reference/clibrary/cstdio/printf/)。它应该像这样使用：

```
printf("a[%d][%d]=", i + 1, j + 1);
scanf("%d", &a[i][j]); 
```

请注意[scanf](http://www.cplusplus.com/reference/clibrary/cstdio/scanf/)`&`所需的指针运算符。

# backbone.js - 如何使用视图实现 Backbone 样板

> ID：13272603
> 
> 赞同：2
> 
> 时间：2012-11-07T15:17:46.610
> 
> 标签：backbone.js, backbone-views, backbone-routing, backbone-boilerplate

我正在努力学习骨干，但说实话，我感到有点不知所措。我所看到的每一个地方都以稍微不同的方式完成，每个都有更多的框架和插件需要学习。所以我决定相信 Addy Osmani 并且正在阅读他的 Backbone Fundamentals 书。我遵循了他的建议并使用了 Backbone-Boilerplate。但是无论出于何种原因，我都无法成功安装 Grunt BBB，因此无法下载工作示例。

我想做的是遵循这个路由器部分并使用视图。[http://addyosmani.github.com/backbone-fundamentals/#router.js](http://addyosmani.github.com/backbone-fundamentals/#router.js)。

问题是我认为这些说明是不完整的。首先，collection.fetch() 变量在错误的范围内，我真的不明白我需要在哪里放置视图以及如何放置。我很确定，如果我能看到一个可行的例子，我就能理解它，但正如我所说，我在任何地方看到的都是不同的实现。

有谁知道如何将骨干样板与路由器和视图一起使用？任何地方都有工作示例吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-07T17:21:23.810

让我提个建议。几个月前，我在你现在所处的位置：努力学习骨干，并在我这样做的同时尝试遵循最佳实践。像你一样，我遇到了 Addy Osmani 的书，和你一样，我尝试用骨干样板来陈述。

经过多次磕磕绊绊，我最终得出结论，当我刚刚学习主干时，我不需要主干样板。现在，只有在创建了一个完整的、非平凡的 CRUD 应用程序之后，我才开始了解如何整合骨干样板。我认为在尝试合并另一个框架或插件之前，您可能需要询问主干样板回答的问题（如何将我的应用程序分解为模块？等）。*Backbone.Marionette 也是如此：很棒的库，但在使用它之前*你真的需要有一些东西可以应用它。

一开始，我建议您为所有主干代码只使用一个文件。

真正帮助我的一件事是玩弄和扩展人们使用主干创建的各种 jsfiddle 演示。一个简单的谷歌搜索会出现很多。我发现这是一种很好的学习方式，因为我能够操纵工作代码并立即获得关于什么有效和什么被允许的反馈。

尽管主干是一个客户端库，但忽略 html 并将内容写入控制台通常更简单、更快。

最后，如果您愿意为此付费，我强烈推荐 Liam McLennan 在复数视觉上的一组主干[.js](http://pluralsight.com)培训视频。

# r - 最小成本流

> ID：13272612
> 
> 赞同：2
> 
> 时间：2012-11-07T15:18:11.877
> 
> 标签：r, igraph, flow

是否有在 R 中实现最小成本流算法的包？

该`igraph`包似乎只有最大流量（通过`graph.maxflow()`函数），这里或[rseek.org](http://www.rseek.org/)上没有其他东西看起来有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T16:11:36.997

也许您可以返回所有流然后按值排序？

包 [`sna`](http://cran.r-project.org/web/packages/sna/sna.pdf)具有`flowbet()`流之间的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-22T12:40:39.737

我也在为此苦苦挣扎，并在此处发布了一个带有可重现的最小成本流问题的[问题](https://stackoverflow.com/questions/43616480/minimum-cost-network-flow-in-r-potentially-using-igraph)。虽然我没有从社区收到明确的答复，但我确实发布了我最终实施的方法。它涉及带有 a和 a 的`data.frame`属性，然后我用它来生成适当的约束以进行优化。看看吧，希望对你有帮助！`edges``$cost``$capacity``lpSolve`

# css - 边框半径不适用于 IE？

> ID：13272615
> 
> 赞同：1
> 
> 时间：2012-11-07T15:18:22.903
> 
> 标签：css

CSS

```
border-bottom: 1px solid silver;
background-color: #000;
background: rgb(51,51,51); /* Old browsers */
background: -moz-linear-gradient(top, rgba(51,51,51,1) 0%, rgba(153,153,153,1) 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(51,51,51,1)), color-stop(100%,rgba(153,153,153,1))); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top, rgba(51,51,51,1) 0%,rgba(153,153,153,1) 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top, rgba(51,51,51,1) 0%,rgba(153,153,153,1) 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top, rgba(51,51,51,1) 0%,rgba(153,153,153,1) 100%); /* IE10+ */
background: linear-gradient(to bottom, rgba(51,51,51,1) 0%,rgba(153,153,153,1) 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#333333', endColorstr='#999999',GradientType=0 ); /* IE6-9 */
-webkit-border-radius: 3px;
-moz-border-radius: 3px;
border-radius: 3px; 
```

Chrome 和 FireFox 输出：

![在此处输入图像描述](../Images/34c89f10ad27ac34f7808b5ecafaa3eb.png)

IE 输出：

![在此处输入图像描述](../Images/1f7032ed9424600587382c2259ff406d.png)

这有什么问题？我找不到任何想法。我该如何解决。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T15:25:46.140

问题是`filter`：

```
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#333333', endColorstr='#999999',GradientType=0 ); /* IE6-9 */ 
```

使用 a`filter`来提供背景渐变会变得`border-radius`无效。所以它要么是圆角，要么是 IE9 上的花哨背景。对不起。:)

... 只是在开玩笑。你可以使用另一个盒子阴影！

```
box-shadow: inset 0 -1em 1em -0.5em rgba(0, 0, 0, 0.8); 
```

调整它，直到你得到看起来像渐变的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T15:20:57.377

`border-radius`仅支持 IE9+

有关未来浏览器兼容性信息，请参阅[caniuse.com ：](http://caniuse.com)

[http://caniuse.com/#search=border-radius](http://caniuse.com/#search=border-radius)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T15:21:40.767

```
.round {
  /* Safari 3-4, iOS 1-3.2, Android 1.6- */
  -webkit-border-radius: 12px; 

  /* Firefox 1-3.6 */
  -moz-border-radius:    12px; 

  /* Opera 10.5, IE 9, Safari 5, Chrome, Firefox 4, iOS 4, Android 2.1+ */
  border-radius: 12px; 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T12:20:51.720

[IE 7 和 8 不支持边框半径。通过使用PIE.HTC - Progressive Internet Explorer HTML 组件](http://css3pie.com/)，您仍然可以在 IE 7 和 8 中同时拥有边框半径和线性渐变。它还支持渐变。所以不要使用过滤器。

# asp.net-mvc - ASP MVC 路由配置 - 找不到资源错误

> ID：13272625
> 
> 赞同：1
> 
> 时间：2012-11-07T15:18:59.767
> 
> 标签：asp.net-mvc, asp.net-mvc-routing

我是asp mvc的新手，目前，我的演示项目结构如下：

```
Areas -- Comment -- Controller -- HomeController
                               -- ManageController
Controller -- HomeController
          |-- CommentController
                 |____ PostMsg
                 |____ DeleteMsg
Views -- Home
     |     |--- Index.cshtml
     |-- Comment
           |--- PostMsg.cshtml
           |--- DeleteMsg.cshtml 
```

当我浏览网址时：

```
http://localhost/Comment/Manage/ --> return view successfully
http://localhost/Comment/PostMsg --> error "The resource cannot be found." 
```

任何人都知道为什么 asp mvc 不能解析我的控制器:-(

这是我的 global.asax.cs 路由配置：

```
 routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

            routes.MapRoute(
                name: "Default",
                url: "{controller}/{action}/{id}",
                defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional },
                namespaces: new[] { "Demo.Web.Controllers" }
            ); 
```

这是我的区域注册路线配置：

```
 public override void RegisterArea(AreaRegistrationContext context)
        {
            context.MapRoute(
                "Comment_default",
                "Comment/{controller}/{action}/{id}",
                new { controller = "Home", action = "Index", id = UrlParameter.Optional },
                new[] { "Demo.Web.Areas.Comment.Controllers" }
            );
        } 
```

问题：评论/PostMsg url 在评论区被解析为控制器

目标：Comment/PostMsg url 被解析为 CommentController 的 Action

任何帮助，将不胜感激 ：-）

**问题已**解决，编辑区域注册路由配置（解决方法）：

```
 public override void RegisterArea(AreaRegistrationContext context)
        {
            context.MapRoute(
                "Comment_default",
                "Comment/PostMsg",
                new { controller = "Comment", action = "PostMsg", id = UrlParameter.Optional },
                new[] { "Demo.Web.Controllers" }
            );

            context.MapRoute(
                "Comment_default",
                "Comment/{controller}/{action}/{id}",
                new { controller = "Home", action = "Index", id = UrlParameter.Optional },
                new[] { "Demo.Web.Areas.Comment.Controllers" }
            );
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T15:26:52.193

你在 Demo.Web.Areas.Comment.Controllers 的****PostMsgController 中有 action Index** ******吗？据我了解，你没有

**更新 1**

从您的代码中我认为 /Comment/PostMsg - 可能是您在 Demo.Web.Areas.Comment.Controllers 中的控制器 PostMsgController 的操作索引

**更新 2**

比你应该做的

```
context.MapRoute(
    "Comment_default",
    "Comment/PostMsg",
    new { controller = "Comment", action = "PostMsg", id = UrlParameter.Optional },
    new[] { "Demo.Web.Controllers" }
); 
```

# ios - 移动项目文件夹后 MainStoryboard 消失了

> ID：13272630
> 
> 赞同：1
> 
> 时间：2012-11-07T15:19:30.237
> 
> 标签：ios, storyboard, xcode4.5, recovery

我只是尝试通过 alt+拖动到另一个文件夹来复制 X 代码项目（也许具有讽刺意味的是，出于备份目的）。

相反，我不小心拖了它，X-code 抱怨了这个（我知道，我应该在尝试复制文件夹之前关闭 X-Code）所以我立即把它移回来。

X-code 坚持要么重新保存要么关闭，所以我选择了关闭。

当我重新打开它时，我的 MainStoryboard 不见了（资源管理器中的红色字体）。

有谁知道能不能找回来？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T08:57:20.060

对任何人都没有太大帮助，但再次打开和关闭 Mac 会恢复文件，这真是一个惊喜。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T15:27:19.460

*   文件在项目目录中吗？如果是这样，您可以尝试从 XCode 中删除它们并将它们重新添加到项目中。

*   这可能是与本地化有关的问题。您应该尝试删除任何其他语言。

*   您是否使用任何源管理工具（svn、git、快照或 Time Machine）？如果是这样，您可以查看它以检索文件的最新版本。

# xml - XML - 退格代码

> ID：13272632
> 
> 赞同：0
> 
> 时间：2012-11-07T15:19:36.380
> 
> 标签：xml, backspace

如何在我的代码中添加退格代码以删除 o `Hello`？

例如，`Hello`将成为`Hell`.

我曾尝试使用`&#8;`，但它在 XML 中是非法的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T18:27:01.140

退格作为控制字符存在于电传打字机等设备的时代，以及不可能物理删除字符的纸带。据我所知，目前很少有应用程序能够识别和解释字符流中退格的语义。这就是 XML 不支持它的原因。如果要删除一个字符，只需删除该字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T15:26:09.757

如果你可以在字符串或其他可切片类型中获取它，那么总会有[切片](https://stackoverflow.com/questions/663171/is-there-a-way-to-substring-a-string-in-python)；在这种情况下，您会执行以下操作：

```
x = 'hello'
'hello'
x[:-1]
'hell'
x[:4]
'hell' 
```

# html - 标题 1 仅限于一个标签，我可以只使用标题 2 来代替吗？

> ID：13272636
> 
> 赞同：0
> 
> 时间：2012-11-07T15:19:54.527
> 
> 标签：html

我正在制作一个关于编码的网站，我希望我的页面标题看起来像一个打开功能，然后在最后关闭该功能......

```
<h1>function myCodingPage(){</h1>

... page content ...

<h1>}; // myCodingPage ends</h1> 
```

但是，我知道规范说不！我必须只有一个`H1`。这让我想到，我可以设置第二个样式以匹配第一个定义的样式，但是如果我不想指定任何一个样式怎么办？也许我可以`H2`改用......

`H2`所以这是我对论坛的问题......使用和向上是否有任何积极/消极影响，而不是`H1`在可访问性方面（例如屏幕阅读器是否期望h1），搜索引擎优化，标准合规性，非标准惯例（`h2`标题是否会被任何高级浏览器书签系统等识别为页面标题）或我尚未考虑的任何内容？

## 编辑：自评论以来更新

评论中提出的两个有效点...

规范中似乎`H1`允许使用两个标签（尽管我怀疑有一个我目前无法识别的充分理由）。

另外，第二个用途`H1`是装饰元素，它本身不是标题，所以根本不应该是标题元素。

鉴于此，我想知道

1.  使用多个`h1`标签有什么问题吗？
2.  我应该如何标记标题的大部分装饰性后半部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-15T23:43:38.027

也许我应该不理会这个线程。但我想其他人可能也需要知道这一点。

HTML 是为了*意义*，而不是表示。h1 标签是*主*标题。你真的不能有两个“主要”标题来争夺注意力，就像你不能真正拥有两个“最好的”朋友一样。

正确的用法是使用 h2，因为它是*次要*标题。如有必要，可以轻松更改 CSS 以使 h1 和 h2 的属性相同。

所有 HTML 元素都有其用途。干净、正确的编码涉及使用它们所针对的范围内的**元素**。这就是我们不使用表格进行站点布局的原因，以及我们使用`<strong>`and`<em>`而不是`<b>`and的原因`<i>`。

使用 HTML 来表达目的和意义，使用 CSS 来展示和设计样式。

# c# - 如何使用 C# 将数据列值分配给特定单词

> ID：13272641
> 
> 赞同：0
> 
> 时间：2012-11-07T15:20:07.363
> 
> 标签：c#, asp.net

我的表中有一个字段，我想在其中设置一个字符串，如“COMPLETE”。最初该字段为空，我想将其设置为某种文本，例如“COMPLETE”这是我目前所拥有的……</p>

```
 string ID = GV_Action.Rows[0].Cells[1].Text;

    SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["MyConnectionString"].ConnectionString);

    SqlCommand cmd = new SqlCommand("sp_Update", con);
    cmd.CommandType = CommandType.StoredProcedure;

    cmd.Parameters.Add("@ID", SqlDbType.VarChar).Value = ID;

    cmd.Connection = con;
    con.Open();
    cmd.ExecuteNonQuery();
    con.Close(); 
```

在下面的 Strored 过程中，我使用默认 ID，但想传递参数 ID 而不是使用固定值，我该怎么做？这是我创建 proc CREATE PROC sp_Update 的方式

作为

EXEC msdb.dbo.sp_start_job N'UpdateField';

去

执行 sp_Update

这是我在程序启动时调用的工作 update MyTable

设置状态 = '完成' 其中 Post_ID = 303

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T15:24:00.387

您可以通过以下方式直接从数据库中填充它

```
SELECT Count(*), 'COMPLETE' AS MyColumn FROM MyTable 
```

# c++ - 寻找最大值。任何给定数字的幂值小于另一个给定数字

> ID：13272646
> 
> 赞同：-2
> 
> 时间：2012-11-07T15:20:33.980
> 
> 标签：c++, algorithm

对于给定的值 'a' 和 'y' ，如何找到最大 x 值使得 x = a^b < y 对于 b∈N 和 a>0。例如，给定 y=14 且 a = 2，则 x 必须为 8。换句话说，对于 [8.15] 中的所有 y 值，x 必须为 8。类似地，对于 [9,26 中的所有 y 值] , x 必须是 9。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T15:22:42.633

您可以将 log 与 base a 一起使用。中不存在这样的函数`<cmath>`，但如果你还记得那个公式

```
log (base a, c) = log (base e, c) / log (base e, a) 
```

您可以使用 cmath 的 log（自然对数）函数来完成。

```
int exponent = log(y)/log(a); //truncates to the floor, just what we need.
int answer = a to the power of exponent 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T15:23:47.060

相当明显的算法任务......取底的整数部分 - y 的对数并将 a 提高到该次方：

```
#include <cmath>

int exponent = (int)(log(y) / log(a)); // base-a logarithm of y, truncated to a whole number
int x = (int)pow(a, exponent); // a raised to that power 
```

# facebook - FB.getLoginStatus 不起作用

> ID：13272650
> 
> 赞同：0
> 
> 时间：2012-11-07T15:20:52.090
> 
> 标签：facebook, facebook-javascript-sdk

我正在尝试一个简单的代码来验证用户在访问我的网站时是否登录到 facebook。

显示警报 1 和 2，仅此而已。

为什么不显示警报 3 4 5？我尝试了很多例子，但没有任何效果:( :(

```
<!DOCTYPE html>
<html>
<head>
  <script src="http://connect.facebook.net/en_US/all.js"></script>
  <script>
    window.onload = function(){
      alert("1");

      FB.init({ apiKey: '203642573046113', status: true });

      alert("2");

      FB.getLoginStatus(function(response) {
        alert("3");
        if (response.status === 'connected') {
          alert("4");
        } else if (response.status === 'not_authorized') {
          alert("5");
        } else {
          alert("6");
        }
      });
    };
  </script>

</head>
<body>
    HELLO WORLD
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T15:38:07.137

> 实际上，我没有应用程序。

FB.getLoginStatus 获取用户*关于你的应用*的状态——没有应用，尝试调用这个方法是没有意义的。

> 只想知道用户是否登录到 facebook。

你不能那样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-07T23:26:05.797

问题是这个[https://developers.facebook.com/bugs/1657864107810379/](https://developers.facebook.com/bugs/1657864107810379/)

我尝试在该页面上发布以下内容，但它给出了错误。

关于上述问题-这适用于您的问题，因为我认为您已`FB.Logout()`在某个时候发布。这会设置一个 cookie，它通过设计阻止此“getLoginStatus”再次工作。

* * *

还是个问题。

它是否按设计工作 - 我相信它是。然而，仅仅因为有时按设计工作并不意味着它不是一个糟糕的主意。

几个 Stackoverflow 问题引用了这个错误和这个问题 [FB.getLoginStatus not working](https://stackoverflow.com/questions/13272650/fb-getloginstatus-not-working)

从根本上说这是问题所在：（[https://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus](https://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus)）

> 用户要么未登录 Facebook，要么明确退出您的应用程序，因此它不会尝试连接到 Facebook，因此，我们不知道他们是否已经验证了您的应用程序。（未知）

因此，如果您注销，它会设置 cookie fblo_629812369426907（这是我的应用程序 ID）

然后，这是设计使然，它不再检查登录状态。

需要有 FB.Logout(true) 才能不设置愚蠢的 FBLO cookie。

我希望我网站上的用户退出，但仍然知道他们已登录 Facebook，以使“使用 Facebook 登录”选项更加突出。

因此，似乎任何建议删除此 cookie 的 Stackoverflow 答案实际上都是正确的，可以避免这种“设计使然”的行为。

# jmeter - JMeter 将随机数附加到表单字段

> ID：13272653
> 
> 赞同：21
> 
> 时间：2012-11-07T15:21:10.630
> 
> 标签：jmeter

我正在对我的内部网站上的注册表单进行负载测试，它有一个必须是唯一的字段（电子邮件地址）。我正在使用 JMeter（遵循[本教程](http://jmeter.apache.org/usermanual/jmeter_proxy_step_by_step.pdf)）。我在测试计划的线程组中的记录控制器下有一个 HTTP 请求。

如何配置此 HTTP 请求以将随机数添加到我的电子邮件地址字段（见屏幕截图）？我公司的内部测试电子邮件服务器将接受其域中的任何内容（例如 testing347387438@my-internal-test-email-server.com）。如何配置 JMeter 以将随机数添加到应该使其唯一的电子邮件地址？ ![在此处输入图像描述](../Images/d6c390e9d3bd91352d4464b659cc99c6.png)

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-11-07T15:34:14.963

您可以使用[随机函数](http://jmeter.apache.org/usermanual/functions.html#__Random)。

因此，您的电子邮件地址将如下所示：

```
testing${__Random(1,10000000)}@my-internal-test-email-server.com 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-07-02T13:01:20.263

您也可以使用**${__UUID}@test-email.com** - 它确保您的电子邮件是唯一的。总是。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-02-28T07:20:23.100

我知道这已经得到解答，但以下可能对某人有用。

我们也可以使用“配置元素 -> 随机变量”。此变量可以在整个 jmeter 范围内重复使用，并用于针对响应的断言测试。

流程如下：

[![在此处输入图像描述](../Images/ec92081616dde1b3a7309c9bcdaacdba.png)](https://i.stack.imgur.com/cLwUJ.png)

[![在此处输入图像描述](../Images/6c7338511514819fd72dc46be89f0d0d.png)](https://i.stack.imgur.com/Fit7R.png)

[![在此处输入图像描述](../Images/7787a4f187d972f3c67c6cd06f036729.png)](https://i.stack.imgur.com/RnbP1.png)

# ios - Facebook API：未知字段：名称？

> ID：13272654
> 
> 赞同：1
> 
> 时间：2012-11-07T15:21:20.700
> 
> 标签：ios, facebook-graph-api

我的请求：

```
<FBRequestConnection: 0x93a8ba0, 1 request(s):(
<FBRequest: 0x9395c90, session: 0xa8aeb80, graphPath: https://graph.facebook.com/me, HTTPMethod: GET, parameters:
{
   "access_token" = BAAG4P63ZBHK0BAObimWrMZCGOzn3s6qOtqynyzkJmIN0fKiKGlCkmlqlKMcpbvrrhN9QJsIxrTc7PZCFoceuCwAC2ygCph27WV72iwxkbi2svKCDemDo8BBqOwc6bp6DQH7U9tjp4gZBofb4brYg;
   fields = name;
   format = json;
   "migration_bundle" = "fbsdk:20120913";
   sdk = ios;
})> 
```

我的回复：

```
result (null)
error Error Domain=com.facebook.sdk Code=5 "The operation couldn’t be completed. (com.facebook.sdk error 5.)" UserInfo=0x93b1ad0 {com.facebook.sdk:ParsedJSONResponseKey={
    body =     {
        error =         {
            code = 100;
            message = "(#100) Unknown fields: name.";
            type = OAuthException;
        };
    };
    code = 400;
}, com.facebook.sdk:HTTPStatusCode=400} 
```

背后的原因是什么？如果我发送没有**字段 = 名称；**然后我取回一些默认用户数据。

* * *

调用：

```
FBRequest *graphRequest = [[FBRequest alloc] initWithSession:[FBSession activeSession]
                                                   graphPath:request.graphPath
                                                  parameters:request.parameters
                                                  HTTPMethod:request.httpMethod];

FBRequestConnection *connection = [[FBRequestConnection alloc] init];
[connection addRequest:graphRequest
     completionHandler:^(FBRequestConnection *connection, id result, NSError *error)
 {
     [self requestCompleted:connection result:result error:error];
 }];
[connection start]; 
```

请求对象：

```
-(NSString*)graphPath
{ return @"https://graph.facebook.com/me"; }

-(NSDictionary*)parameters
{
    return [NSDictionary dictionaryWithObjectsAndKeys:
            @"name", @"fields",
            nil];
}

-(NSString*)HTTPMethod
{
    return @"GET";
} 
```

* * *

也尝试过使用固定参数，但没有效果：

```
graphRequest = [[FBRequest alloc] initWithSession:[FBSession activeSession]
                                        graphPath:@"https://graph.facebook.com/me"
                                       parameters:[NSDictionary dictionaryWithObjectsAndKeys:@"name", @"fields", nil]
                                       HTTPMethod:@"GET"]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T10:35:38.823

图形路径必须是相对的。现在我只使用**@“me”**而不是@“https://graph.facebook.com/me”，并且像魅力一样工作。

# java - Java 注解不适用于外部 Jar 文件

> ID：13272666
> 
> 赞同：1
> 
> 时间：2012-11-07T15:21:56.660
> 
> 标签：java, file, jar, annotations, external

所以，我目前正在为我的命令行“操作系统”开发一个插件系统（插件是位于插件文件夹中的 jar 文件）。工作正常，但 API 没有。

我正在使用注释来获取插件主类和事件类。但是，它似乎没有找到我的注释。

这是我用来加载我的插件的：

```
public static void loadPlugin(File file)
{
    try
    {
        URL urlList[] =
        { new File("plugins/" + file.getName()).toURI().toURL() };
        URLClassLoader classLoader = new URLClassLoader(urlList);
        Class<?> pluginclass, eventclass = pluginclass = null;
        String name, version = name = null;
        Priority priority = Priority.NORMAL;

        String[] classes = Utils.getJarClasses(file, "plugin").toArray(new String[]
        {});

        for (String s : classes)
        {
            System.out.println(s);
            Class<?> c = classLoader.loadClass(s);
            Plugin p = c.getAnnotation(Plugin.class);
            EventHandler e = c.getAnnotation(EventHandler.class);

            if (p != null)
            {
                System.out.println("not null!");
                pluginclass = c;
                name = p.name();
                version = p.version();
                priority = p.priority();
            }

            if (e != null)
            {
                eventclass = c;
            }
        }

        switch (priority)
        {
        case NORMAL:
            plugins.add(new Class<?>[]
            { pluginclass, eventclass });
        case DEVELOPER_API:
            apis.add(new Class<?>[]
            { pluginclass, eventclass });
        }
        print("Loaded Plugin: " + name + " V" + version + " with priority " + priority.toString() + ".");
    } catch (Exception e)
    {
        e.printStackTrace();
    }
} 
```

它正在打印出它当前循环的类，但是**p**和**e**始终为空，无论如何。**显然，版本**和**名称**也始终为空。

我的注释类有`@Retention(RetentionPolicy.RUNTIME)`，这就是我在这里问的主要原因。

我测试了一个类似的系统，只是没有使用 jar 文件（而是包内的类）并且工作正常。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2020-11-09T19:03:18.813

可以解释所描述行为的一个原因是您正在*混合*类加载器：只有当注释类和带注释的类型都由同一个类加载器加载时，注释才会可见。这与使用反射 API 作为实际执行注释查找过程所采用的机制有关。

在您的代码中，您使用自定义类加载器 ,`classLoader`从外部 jar 文件加载类，但是`Plugin`和类都由运行您的方法`EventHandler`的类加载器加载。`loadPlugin`

为了解决这个问题，我认为您可以提供运行该`loadPlugin`方法的类加载器作为自定义类加载器的父类加载器，例如：

```
URLClassLoader classLoader = new URLClassLoader(urlList, YourClass.class.getClassLoader()); 
```

以前在 stackoverflow 中也曾报道过类似的行为。例如，参见[this question](https://stackoverflow.com/questions/23437443/is-the-defining-classloader-of-a-class-level-annotation-always-a-parent-of-the-i)和[this other one](https://stackoverflow.com/questions/20451498/cant-get-annotations-from-classes-loaded-by-custom-classloader-in-tomcat)的公认答案。

# android - 单击启动器图标播放声音

> ID：13272668
> 
> 赞同：0
> 
> 时间：2012-11-07T15:21:59.533
> 
> 标签：android, app-launcher

我有一个要求，在单击我的应用程序的启动器图标时，它应该读出应用程序名称。

我知道这很有趣，但这可能吗？任何方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T15:46:20.607

在您的活动的 onCreate/onResume 方法中尝试此操作：[MediaPlayer](http://developer.android.com/reference/android/media/MediaPlayer.html)

只需启动播放器

`mp = new MediaPlayer(); mp.reset();
mp.setDataSource(fileNamePath);
mp.prepare(); mp.start();`

# wpf - WPF 以毫米为单位指定控件的长度

> ID：13272669
> 
> 赞同：2
> 
> 时间：2012-11-07T15:22:05.600
> 
> 标签：wpf, controls, measure

这些天我正在研究一个复杂的 WPF 应用程序。到目前为止，这是一次很好的体验。但我被困在一个点上。它是一个设计器应用程序，用户可以在画布上拖动自定义控件并设置其属性。目前用户可以用cm、in、px和pt来指定控件的长度。我需要给他们以毫米为单位指定控件长度的选项。

我知道 WPF 中的 LengthConverter 类，但它没有让我们能够使用毫米作为单位。这是为什么？为什么微软不提供以毫米为单位指定控件长度的可能性？

这样做的解决方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-04T08:44:52.743

想知道这个问题是否因为显而易见的答案而没有得到回答......

如果您可以使用**cm**作为尺寸，则没有问题。

要求以毫米为单位的所需尺寸，除以十，你就在那里。

> 为什么微软不提供以毫米为单位指定控件长度的可能性？

也许是因为他们觉得没有必要添加对所有 10 的倍数的支持？你不妨问他们为什么不用微米、毫米、分米、米、分米、百米、公里……因为从厘米换算太容易了。

也就是说，尽管有一个简单的转换因子 72，但它们确实使用英寸*和pt。但这并不那么明显。*

# c# - NuGet 发布的 github 托管项目的目录结构

> ID：13272672
> 
> 赞同：12
> 
> 时间：2012-11-07T15:22:14.023
> 
> 标签：c#, github, open-source, nuget

对于一个 github 托管的开源 C# 项目，也可以通过 NuGet 获得，应该如何组织源代码？具体来说：

*   .nu​​spec 文件应该在 github 存储库中吗？
*   .nu​​spec 文件是否应该与 .csproj 文件位于同一文件夹中？
*   NuGet 包树（/lib、/content 的东西）怎么样，既然生成了，它应该在 git 中吗？

我的想法是 NuGet 部分与 github 托管是分开的，因为项目源代码可用但 .nuspec 不可用，因为 NuGet 中的发布本身不是开源操作。没有人希望每个 fork 都构建和发布一个*新*的NuGet 包，因此开源 Foo 包最终在图库中显示为“Rick's Foo”与“John's Foo”与“Alice's Foo”等。

但另一方面，我确实希望 github 源代码库充当项目的一站式存储库，如果我打开我的另一台笔记本电脑并从那里登记，我应该能够构建/打包/推送而无需重新创建从头开始整个 NuGet 基础架构（即只输入我的 API 密钥，仅此而已）。

这两个要求是相互矛盾的，我错过了什么明显的东西吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-07T15:37:56.973

我会做以下事情：

*   提交`.nuspec`文件旁边的`.csproj`文件
*   添加一个[将包文件夹向上移动的](https://stackoverflow.com/questions/4092759/is-it-possible-to-change-the-location-of-packages-for-nuget)`nuget.config`文件。
*   在解决方案中启用[包还原](http://docs.nuget.org/docs/workflows/using-nuget-without-committing-packages)并且**不**提交 NuGet 包存储库的内容
*   创建一个 msbuild 文件（或您喜欢的任何构建工具），其中包含：
    *   构建源代码并创建 nuget 包的“构建”目标
    *   一个“发布”目标，它将 NuGet 包推送到 nuget.org 并将您的 API 密钥作为参数。

我个人在文件中维护nuget包的版本号，`.nuspec`并在我“发布”时手动更新它。通过这种方式，我可以标记我推送到 NuGet 提要的确切版本。

通过此设置，Visual Studio 中的构建不会生成 NuGet 包，但存储库中提供了所有工具来执行此操作。

文件夹结构如下所示：

```
 .\Docs\ ==> not in source repo
   .\Packages\ ==> not under source control
   .\Src\ ==> git repo here
   .\Src\MySolution.sln
   .\Src\.gitignore
   .\Src\MuRules.ruleset
   .\Src\build.proj ==> msbuild file to build everything.
   .\Src\MyProject\MyProject.csproj
   .\Src\MyProject\MyProject.nuspec
   .\Src\MyProject\nuget.config
   .\Build\ ==> not under source control
   .\Build\Debug\
   .\Build\Release\
   .\Build\Publish\ 
```

~~请注意包还原功能中的此错误，它将忽略您配置的包位置。[http://nuget.codeplex.com/workitem/1990](http://nuget.codeplex.com/workitem/1990)~~ ==> 这在 Nuget 2.7 中已修复

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-02T14:42:37.170

在nuget v2.8上，我只需要修改`.gitignore`并添加：

```
packages/ 
```

这将从提交中排除 nuget`packages`文件夹。当您构建新的签出源代码时，将下载并恢复这些包。确保已启用包还原设置，但我认为它已在 v2.8 上默认启用。

# .htaccess - mod_rewrite 为域选择一个文件夹

> ID：13272679
> 
> 赞同：7
> 
> 时间：2012-11-07T15:22:42.007
> 
> 标签：.htaccess, zend-framework, mod-rewrite, directory

**情况**

我正在使用 Zend 框架，因此尝试按地址调用文件夹以失败告终，我们收到错误：“指定的控制器无效”。我需要将其他论坛连接到单独文件夹中的应用程序。我将 .htaccess 文件更改如下：

```
RewriteRule ^forum(.*)$ forum$1 [L] 
```

有一段时间很好，直到我意识到该页面存在于两个域中的两个版本中（php 识别域 [.pl/.co.uk] 并选择语言）。所以我决定将论坛分成两个单独的模块（例如，波兰版论坛的文件夹将是：forum_pl，而对于英国，它将是：forum_uk - 两个不同的论坛）

**有什么问题？**

它需要重写 .htaccess 文件才能像这样工作：

**如果：** www.domena.pl/forum

**然后：**从文件夹 /forum_pl 打开脚本

**如果：** www.domain.co.uk/forum

**然后：**从文件夹 /forum_uk 打开脚本。

最糟糕的是，当我尝试修复 .htaccess 文件添加 RewriteCond 时，第一个重定向不再正常工作，即使返回到原始（如上所示）版本也是如此。

如果我没有找到之前给出的答案，请帮助我并抱歉。

**编辑：**

**第一个工作解决方案**

```
RewriteRule ^forum_pl(.*)$ forum_pl$1 [L]
RewriteRule ^forum_uk(.*)$ forum_uk$1 [L]
RewriteCond %{HTTP_HOST} ^www.domena.pl(.*) [NC]
RewriteRule ^forum(.*)$ forum_pl$1 [L]
RewriteCond %{HTTP_HOST} ^www.domain.co.uk(.*) [NC]
RewriteRule ^forum(.*)$ forum_uk$1 [L] 
```

看起来它想要工作，但是需要解决的问题是（TODO）：

1.  当您输入： www.domain.pl/forum 时，它会将您带到 www.domain.pl/forum_pl/ 但如果您输入： www.domain.pl/forum/ 它会将您带到 www.domain.pl/forum/ （阅读来自forum_pl）。如何使其在第一种情况下与第二种情况相同。

**编辑：**

**我的最后一个解决方案：**

```
#FORUM
#PL
RewriteCond %{REQUEST_URI} ^/forum$ [NC]
RewriteRule ^(.*)$ forum/ [R=301,L]

RewriteRule ^forum_pl(.*)$ forum_pl$1 [L]

RewriteCond %{REQUEST_URI} ^/forum_pl(.*)$ [NC]
RewriteRule ^(.*)$ http://www.domena.pl/forum/ [R=301,L] #Dosen't work properly (?)

RewriteCond %{HTTP_HOST} ^www.domena.pl(.*) [NC]
RewriteCond %{REQUEST_URI} ^/forum(/?)$ [NC]
RewriteRule ^forum[^/](.*)$ forum_pl/$1 #Dosen't work properly, but without it crash!
RewriteRule ^forum(.*)$ forum_pl$1 [L]
#UK
RewriteCond %{REQUEST_URI} ^/forum_uk(.*)$ [NC]
RewriteRule ^(.*)$ http://www.domain.co.uk/forum/ [R=301,L] #Dosen't work properly (?)

RewriteCond %{HTTP_HOST} ^www.domain.co.uk(.*) [NC]
RewriteCond %{REQUEST_URI} ^/forum(/?)$ [NC]
RewriteRule ^forum[^/](.*)$ forum_uk/$1 #Dosen't work properly, but without it crash!
RewriteRule ^forum(.*)$ forum_uk$1 [L] 
```

**最终的工作版本：**

```
RewriteRule ^forum_pl(.*)$ forum_pl$1 [L]
RewriteRule ^forum_uk(.*)$ forum_uk$1 [L]

RewriteRule ^forum_pl(.*)$ http://www.domena.pl/forum$1 [R=301,L] # Not working!
RewriteRule ^forum_uk(.*)$ http://www.domain.co.uk/forum$1 [R=301,L] # Not working!

# Normalize URL first:
RewriteRule ^forum$ forum/ [R=301,L]

# redirect to polish version of web under forum_pl if on .pl TLD and
#  request is made to /forum/ (already normalized)
RewriteCond %{HTTP_HOST} =www.domena.pl [NC]
RewriteRule ^forum(.*)$ forum_pl$1 [L]

# redirect to english version of web under forum_en in on .uk TLD and
#  request is made to /forum/
RewriteCond %{HTTP_HOST} =www.domain.co.uk [NC]
RewriteRule ^forum(.*)$ forum_uk$1 [L] 
```

很遗憾，您可以手动从浏览器的 forum_uk 和 forum_pl 文件夹中调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T08:34:07.983

不确定我是否通过一些演变正确地解决了你的长问题:-)让我们试试这个：

```
# Normalize URL first:
RewriteRule ^forum$ forum/ [R=301,L]

# redirect to polish version of web under forum_pl if on .pl TLD and
#  request is made to /forum/ (already normalized)
RewriteCond %{HTTP_HOST} =www.domena.pl [NC]
RewriteRule ^forum/(.*)$ http://www.domena.pl/forum_pl/$1 [R=301,L]

# redirect to english version of web under forum_en in on .uk TLD and
#  request is made to /forum/
RewriteCond %{HTTP_HOST} =www.domain.co.uk [NC]
RewriteRule ^forum/(.*)$ http://www.domain.co.uk/forum_uk/$1 [R=301,L] 
```

如果您需要重写以采取不同的行动，请告诉我

# .htaccess - 以特定单词开头时不应用规则

> ID：13272682
> 
> 赞同：0
> 
> 时间：2012-11-07T15:22:44.833
> 
> 标签：.htaccess, mod-rewrite

第一条规则：

```
RewriteRule ^([a-z]+)/([^-]+)-([^&]+)$ lala.php?type=$1&id=$2&title=$3 [L] 
```

第二条规则：

```
RewriteRule ^testpage/([^-]+)-([^&]+)$ lala.php?type=$1&id=$2 [L] 
```

第一条规则覆盖第二条规则。是否有可能这样说：当 ([az]+) 不是“testpage”时应用第一条规则？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T16:23:09.337

只需切换顺序，以便在更通用的规则之前处理更严格的“testpage”规则`([a-z]+)`：

```
RewriteRule ^testpage/([^-]+)-([^&]+)$ lala.php?type=$1&id=$2 [L]
RewriteRule ^([a-z]+)/([^-]+)-([^&]+)$ lala.php?type=$1&id=$2&title=$3 [L] 
```

# c - /usr/include linux 中的新 .h 文件

> ID：13272683
> 
> 赞同：-2
> 
> 时间：2012-11-07T15:22:45.893
> 
> 标签：c, linux, gcc

我在 linux 中开发了小型 c 应用程序。对于这个应用程序，我将 .h 文件放在 linux 标准路径 (/usr/include) 中。我再次编译相同的程序

**输出：FATA ERROR : xyz.h(my own header file) not found**

我是否需要更新 gcc 中的任何变量或解决此问题的方法

谢谢你

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T15:25:28.917

将头文件和你的文件放在同一目录下，编译时`.c`使用`-I.`

```
gcc -I. main.c -o myprog 
```

您不应该将头文件放在`/usr/include`系统头文件中。

*注意*：您实际上并不需要，`-I.`因为默认情况下会搜索当前目录，但是添加它并没有什么坏处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T15:50:19.107

由 include 指令指定的文件意味着位于编译器的搜索路径之一，在许多情况下使用 -I 选项指定（至少对于 gcc，其他编译器是否相同？）。搜索路径按照命令行中的定义顺序进行验证。

有两种包含指令：

*   双引号 ( `#include "xyz.h"`)
*   尖括号的 ( `#include <xyz.h>`)

IIRC，前者的默认和第一个搜索路径是工作目录。对于后者，它依赖于编译器，但通常是`/usr/include/`.

根据您使用的包含指令，您应该为您的文件选择正确的位置。或者更好的是，将您的文件放在一个好的位置（比如与包含文件相同的位置），并在您的 gcc 命令中添加一个搜索路径。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-07T15:30:52.623

您应该将头`.h`文件与系统和存储库构建的头文件分开，这样您就不会破坏任何东西。

我建议在您的主目录中创建一个名为 include 的文件夹并将其添加到您的路径中，这样您就不必再担心它并且不需要`-I/`标志

# visual-studio-2012 - 无法创建 MonoDroid 包

> ID：13272686
> 
> 赞同：0
> 
> 时间：2012-11-07T15:22:51.477
> 
> 标签：visual-studio-2012, xamarin.android, apk

我一直在 Visual Studio 2012 中使用 MonoDroid 创建一个 Android 应用程序，一切正常。我可以将应用程序发布到我的手机上，一切正常（调试和发布版本）。但是，当我尝试让 MonoDroid 创建一个**.apk**文件时，我收到以下错误：

`System.Exception: The "ResolveAssemblies" task's outputs could not be retrieved from the "ResolvedAssemblies" parameter. Parameter "includeEscaped" cannot have zero length.`

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T08:46:16.597

好吧，事实证明 Xamarin 自己认为我应该手动完成。猜猜这不是一个高优先级。

# android - Android：第一次未显示进度对话框（使用 Thread 或 AsyncTask 进行 longDuration 操作）

> ID：13272689
> 
> 赞同：1
> 
> 时间：2012-11-07T15:23:00.907
> 
> 标签：android, multithreading, android-asynctask, progressdialog

我的应用程序在 AsyncTask 中的进度对话框有问题：我`AsyncTask`正在从 Internet 中获取一些数据`doInBackGround()`，我正在开始进度对话框，在`onPreExecute()`中完成对话框 `onPostExecute()`。

单击按钮时，我执行此 asyncTask。第一次单击此按钮（发生长时间操作）时，未显示进度对话框。但下次进度对话框会正常显示。

第一次运行`AsyncTask`时没有显示进度对话框可能是什么问题？

这是 onClick 方法：

```
public void onClickFind(View view){
 new Task_Search().execute();
} 
```

这是任务`Task_Search`：

```
private class Task_Search extends AsyncTask<Void, Void, Void> {

 @SuppressWarnings("deprecation")
 protected void onPreExecute() {
  showDialog(DIALOG_TASKING);
 }

 protected Void doInBackground(Void... unused) {
  //some geting of web content here
 }

 @SuppressWarnings("deprecation")
 protected void onPostExecute(Void unused) {
  dismissDialog(DIALOG_TASKING);
 }
} 
```

进度对话框定义在`MainActivity`：

```
@SuppressWarnings("deprecation")
@Override
protected Dialog onCreateDialog(int id) {
 switch (id) {
 case DIALOG_TASKING:
  mSearchDialog = new ProgressDialog(this);
  mSearchDialog.setMessage("Searching for field number..");
  mSearchDialog.setCancelable(true);
  return mSearchDialog;
  }
 return super.onCreateDialog(id);
} 
```

在使用之前，`AsyncTask`我使用单独的线程来下载数据：在`onClick`，我先启动`progressDialog`然后线程，当线程完成时也`progressDialog`停止，行为是相同的：第一次单击按钮对话框没有显示，下一次显示。

有谁能帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T16:04:36.363

好的，我在 MainActivity 中创建了我自己的方法：

```
public void showProgressDialog() {
 if (mProgressDialog == null) {
  mProgressDialog = new ProgressDialog(this);
  mProgressDialog.setMessage("Searching for field number..");
  mProgressDialog.show();
  return;
 }else{
  mProgressDialog.setMessage("Searching for field number..");
  mProgressDialog.show();
  return;
 } 
```

}

还：

```
public void closeProgressDialog() {
 if (mProgressDialog != null) {
  mProgressDialog.dismiss();
 }
 return;
} 
```

我改变了 AsyncTask 如下：

```
private class Task_Search extends AsyncTask<Void, Void, Void> {
 protected void onPreExecute() {
  // showDialog(DIALOG_TASKING);
  showProgressDialog();
 }

 protected Void doInBackground(Void... unused) {
 //Some long duration stuff here
 }

 protected void onPostExecute(Void unused) {
  //dismissDialog(DIALOG_TASKING);
  closeProgressDialog();
 }
} 
```

`mProgressDialog`是 MainActivity 的私有成员

```
private ProgressDialog mProgressDialog; 
```

情况是一样的：点击按钮：第一次 ProgressDialog 卡住了，下次它工作完美

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T15:29:23.103

我看不到您在对话框中调用 show()。

代替

```
@SuppressWarnings("deprecation")
protected void onPreExecute() {
    showDialog(DIALOG_TASKING);
} 
```

和

```
@SuppressWarnings("deprecation")
protected void onPreExecute() {
    showDialog(DIALOG_TASKING).show();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T15:30:32.623

不要调用 showDialog insode onPreExecute()。AsyncTask 提供 publishProgress() 方法，可以从 doInBackground() 调用该方法以在 UI 线程上发布更新。

# c# - 使用 Process.Start 启动文件有效，但添加条件无效

> ID：13272693
> 
> 赞同：0
> 
> 时间：2012-11-07T15:23:21.663
> 
> 标签：c#, process.start

所以我正在尝试使用 C# 中的 cscript 启动打印机脚本，然后 cscript 启动一个可视化的基本文件。有点像菊花链（出于某些原因，我想保持这个菊花链完好无损）。

这是代码：

```
Process.Start("c:/windows/system32/cscript.exe c:/windows/System32/Printing_Admin_Scripts/en-US/prnport.vbs"); 
```

现在，当我只启动 cscript 时，没有问题。

但是，当我将 prnport.vbs 的条件添加到 cscript 启动时，我在 Visual Studio 中收到此错误：

```
"The system cannot find the file specified" 
```

但我可以确认文件路径是正确的 -`prnport.vbs`确实存在于`/en-US`.

那么我在这里做错了什么？使用 Process.Start 时能否不传递参数（在这种情况下，文件路径作为参数传递给 cscript.exe）？

C# 新手，对执行此操作的正确方法感到困惑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T15:26:24.300

您必须单独指定要运行的文件的参数。尝试[`Process.Start(string, string)`重载](http://msdn.microsoft.com/en-us/library/h6ak8zt5.aspx)：

```
Process.Start("c:/windows/system32/cscript.exe", 
    "c:/windows/System32/Printing_Admin_Scripts/en-US/prnport.vbs"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T15:26:32.250

这是一个参数，你需要使用另一个重载`Process.Start`

查看该[方法的文档](http://msdn.microsoft.com/de-de/library/system.diagnostics.process.start%28v=vs.80%29.aspx)。

`Process.Start (String, String)`会做，其他人是可能的，并提供更多的灵活性，如果你也需要的话。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T15:26:43.480

`Process.Start`期望文件名作为第一个参数。参数在单独的参数中给出。

# android - Android 更改应用名称和徽标

> ID：13272694
> 
> 赞同：3
> 
> 时间：2012-11-07T15:23:23.167
> 
> 标签：android, android-layout

我是android编程的新手。我已经开始使用eclipse构建一个应用程序。在布局文件中，应用程序图标和应用程序名称默认出现。我该如何改变它。默认情况下存在相对布局。无论我添加什么 - 图像视图文本视图都会添加到主标题栏下方。我该如何改变？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-07T15:26:56.060

应用名称和图标的链接放置在标签`AndroidManifest.xml`内部。`application`字符串资源，如`@string/app_name`，放在目录中的`strings.xml`文件内`res/values`。可绘制资源，如`@drawable/ic_launcher`，位于`res/drawable`目录集中。祝你好运！

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-08T16:54:00.600

试试这个

对于徽标 `android:icon="@drawable/icon"`

对于应用程序名称 `android:label="@string/app_name"`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T15:39:33.783

*正如Egor*已经指出的那样，您必须在`strings.xml`. `strings.xml`通常，默认情况下，密钥名称为`app_name`. 将此更改为您希望将应用程序名称更改为的任何名称。

对于您的应用程序图标，我建议使用此网站创建适当的资源：[http](http://android-ui-utils.googlecode.com/hg/asset-studio/dist/icons-launcher.html) ://android-ui-utils.googlecode.com/hg/asset-studio/dist/icons-launcher.html 。这样就省去了创建不同大小资源的麻烦。它可以让您随时随地参与其中。下载新图标集后，只需将旧图标集替换为新图标集即可。不过要注意名字。同样，通常，应用程序图标的名称为`ic_launcher`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T16:36:38.407

只需在应用程序标记中更改 Androidmanifest 文件，其中包括属性，如更改徽标使用`android:icon="@drawable/icon"`属性并根据您的要求更改可绘制图像，更改应用程序名称使用 `android:label="@string/app_name"`属性并在 app_name 标签中的 string.xml 文件中写入适当的名称.

# java - 从复杂对象创建 Jasper 报告

> ID：13272697
> 
> 赞同：-2
> 
> 时间：2012-11-07T15:23:27.593
> 
> 标签：java, jasper-reports

我必须从一个具有以下字段的复杂对象创建一个 Jasper 报告，

```
1\. 4-5 string fields
2\. List<outer object> where outer object consists of some string fields and a list of  
  inner objects. Here inner object also has some integer fields. 
```

现在，在所需的碧玉报告中，我必须为每个外部对象的内部对象列表的每个成员显示水平条形图（3 个条形图）。假设我有一个包含 3 个外部对象的列表，其中每个外部对象都有一个包含 3 个内部对象的列表。我必须创建 3 X 3 条形图并将它们显示在表格结构中。

外部对象1.getName()

列 1 列 2

innerObject1.getName() 条形图

innerObject2.getName() 条形图

innerObject3.getName() 条形图

outerObject2.getName()

innerObject1.getName() 条形图

等等....

我知道有几种方法可以做到这一点，

1.  创建一个自定义的 JRDataSource 类
2.  创建多个子报表并将它们集成以获取主报表

我正在使用 iReport 来创建 jrxml 文件。

有人可以帮我从这样一个复杂的对象创建表格结构吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T12:30:05.513

你可以这样写

在该领域采取一个领域

像这样改名字

假设您有一个类`Order.java`，它有一个帐户参考帐户有一个客户对象客户有一个客户名称。

**所以步骤是：**

```
account.customer.firstname 
```

在 jasper 报告的字段中定义。

# c# - 没有对话框的 IHTMLDocument2 打印

> ID：13272704
> 
> 赞同：3
> 
> 时间：2012-11-07T15:23:41.353
> 
> 标签：c#, printing, ihtmldocument2

我一直在做一个自动打印`HTML`发票的项目。这特别具有挑战性，因为我需要保持`CSS`格式。

根据建议，我发现自己用`IHTMLDocument2`它来进行打印。我应该能够：

```
mshtml.IHTMLDocument2 doc = new mshtml.HTMLDocument() as mshtml.IHTMLDocument2;
doc.write(htmlContent); //htmlContent is a string of HTML
doc.execCommand("PRINT", false, null); 
```

第二个参数指定是否生成`Printer Options`盒子，但它没有帮助。我已经读过 using`PRINT`总是会出现一个对话框 - 但是我无法找到替代方案。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T06:37:44.357

根据[MSDN](http://msdn.microsoft.com/en-us/library/hh801232%28v=vs.85%29.aspx#print)：

> 打印
> 
> 打开打印对话框，以便用户可以打印当前页面。

所以我认为没有办法解决这种行为。尝试为您的应用程序使用其他类或在打印期间打开打印对话框。
您应该注意，您必须在方法中提供`true`作为第二参数（`showUI [in, optional]`）`execCommand`。

# asp.net - 无扩展的 URL，但将扩展保留在管理区域中

> ID：13272707
> 
> 赞同：1
> 
> 时间：2012-11-07T15:23:49.953
> 
> 标签：asp.net, iis-7, aspdotnetstorefront

我正在使用 ASPDOTNETSTOREFRONT，我们需要删除站点的扩展名，但将扩展名保留在 /admin 文件夹中，以便后端正常工作。以下是我到目前为止所拥有的。

```
<rules>
    <rule name="Extensionless" stopProcessing="true">
        <match url="(.*)" />
            <conditions>
                <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
                <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
                <add input="{URL}" negate="true" pattern="\.axd$" />
                <add input="{URL}" negate="true" pattern="\.aspx$" />
                <add input="{URL}" negate="true" pattern="\.ashx$" />
            </conditions>
                <action type="Rewrite" url="{R:1}.aspx" />
    </rule>
    <rule name="RemoveExtension" enabled="true" stopProcessing="true">
            <match url="(.*)\.(aspx)$" />
                <action type="Redirect" url="{R:1}" />
    </rule>
</rules> 
```

# nginx - nginx 的地理 IP 模块

> ID：13272708
> 
> 赞同：0
> 
> 时间：2012-11-07T15:23:59.110
> 
> 标签：nginx, geoip

在我的 nginx 服务器上，我将使用多个地理 ip 数据库（一个用于国家+城市，另一个用于 isp 或组织）。我找不到用于 nginx 和/或 pecl 的模块来运行多个这些数据库。

数据库提供者不会发布一个包含所有数据在一个文件中的单个数据库），所以看起来我迷路了。

[http://wiki.processmaker.com/index.php/Nginx_and_PHP-FPM_Installation](http://wiki.processmaker.com/index.php/Nginx_and_PHP-FPM_Installation)似乎只适用于一个数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T17:04:16.563

可以使用标准的内置 GeoIP nginx 模块： http: [//nginx.org/en/docs/http/ngx_http_geoip_module.html](http://nginx.org/en/docs/http/ngx_http_geoip_module.html)

```
geoip_country  CountryCity.dat;
geoip_city     CountryCity.dat;
geoip_org      Organization.dat; 
```

# oracle - Oracle 表审计的添加日期和修改日期

> ID：13272711
> 
> 赞同：2
> 
> 时间：2012-11-07T15:24:00.810
> 
> 标签：oracle, ddl

根据要求，我需要为每个表支持两个强制列：ADDED_DATE、MODIFIED_DATE。
这些旨在用于 DBA/审计目的。

当我从应用程序中插入/更新记录时，是否可以使这些东西完全自动化，由数据库本身隐式支持？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T15:29:56.197

在表上创建一个触发器（在更新每一行之前）。

```
SQL> create table foo (hi varchar2(10), added_date date, modified_date date);

Table created.

SQL> create trigger foo_auifer
  2  before update or insert on foo
  3  for each row
  4  declare
  5  begin
  6    if (inserting) then
  7      :new.added_date := sysdate;
  8    elsif (updating) then
  9      :new.modified_date := sysdate;
 10    end if;
 11  end;
 12  /

Trigger created.

SQL> insert into foo (hi) values ('TEST');

1 row created.

SQL> insert into foo (hi) values ('TEST2');

1 row created.

SQL> update foo set hi = 'MODDED' where rownum  = 1;

1 row updated.

SQL> alter session set nls_date_format='dd-mon-yyyy hh24:mi:ss';

Session altered.

SQL> select * from foo;

HI         ADDED_DATE           MODIFIED_DATE
---------- -------------------- --------------------
MODDED     07-nov-2012 15:28:28 07-nov-2012 15:28:39
TEST2      07-nov-2012 15:28:30

SQL> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-10T16:33:28.043

```
create table "db_user"."my_table" (
    ...
    "added_date" date default sysdate,
    "modified_date" date default sysdate
)
/
create or replace
trigger "db_user"."trg_my_table_audit" 
before update on my_table for each row 
begin 
    :new.modified_date := sysdate;
end; 
```

# python - Python：字符串连接与None返回None？

> ID：13272712
> 
> 赞同：2
> 
> 时间：2012-11-07T15:24:04.133
> 
> 标签：python, string, conditional, concatenation

我正在尝试根据环境变量的返回值进行条件赋值。

```
self._TBLFilePath = iTBLFilePath or os.environ.get("CDO_TBLPATH") + os.environ.get("CDO_INSTANCE_TYPE") + ".tbl" or os.environ.ge    t("CDO_ROOT") + "/cdo/tbl/" + os.environ.get("CDO_INSTANCE_TYPE") + ".tbl" 
```

问题是当 CDO_TBLPATH 未定义时，我得到一个没有连接错误的字符串。我想知道是否有办法强制 None + 字符串也返回 None ，或者有没有其他方法可以克服这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T15:24:58.873

[`mapping.get()`](http://docs.python.org/2/library/stdtypes.html#dict.get)支持“默认”参数：

```
os.environ.get("CDO_TBLPATH", '') 
```

默认为 return `None`，但通过指定一个空字符串，即使`CDO_TBLPATH`未定义，您的连接也将起作用。

`None`如果`.get()`返回 None，你不能让连接神奇地返回；您可以使用`None`在`__add__`方法中返回的自定义类，但我不确定这是否非常易读。

如果在未定义环境变量的情况下需要跳过任何选项（不是连接），则最好拆分测试：

```
table_options = (
    (lambda: iTBLFilePath, lambda: iTBLFilePath)
    (lambda: os.environ.get("CDO_TBLPATH") and os.environ.get("CDO_INSTANCE_TYPE"),
        lambda: os.environ["CDO_TBLPATH"] + os.environ["CDO_INSTANCE_TYPE"] + '.tbl'),
    (lambda: os.environ.get("CDO_ROOT") and os.environ.get("CDO_INSTANCE_TYPE"),
        lambda: os.environ["CDO_ROOT"] + "/cdo/tbl/" + os.environ["CDO_INSTANCE_TYPE"] + ".tbl"),
    (lambda: True, lambda: None),
)

self. _TBLFilePath = next(opt() for tst, opt in table_options if tst()) 
```

这定义了一系列测试，并使用与第一个成功的测试关联的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T15:28:50.683

为此，我有时会`coalesce()`从 SQL 中借用该函数。在 Python 中，它是这样工作的：

```
coalesce = lambda *a: next((i for i in a if i is not None), None) 
```

或者更好

```
def coalesce(*a):
    """Return the first non-`None` argument, or `None` if there is none."""
    return next((i for i in a if i is not None), None) 
```

它返回第一个非`None`参数，或者`None`如果没有参数。

如果没有默认参数`.get()`，你可以这样做

```
coalesce(get('...'), '') 
```

# linux - 两个文本文件的内连接

> ID：13272717
> 
> 赞同：10
> 
> 时间：2012-11-07T15:24:09.777
> 
> 标签：linux, bash, join

希望对两个不同的文本文件执行内部连接。基本上我正在寻找与 GNU 连接程序等效的内部连接。这样的事情存在吗？如果没有，一个`awk`or`sed`解决方案将是最有帮助的，但我的第一选择是 Linux 命令。

这是我想要做的一个例子

文件 1：

```
0|Alien Registration Card LUA|Checklist Update
1|Alien Registration Card LUA|Document App Plan
2|Alien Registration Card LUA|SA Application Nbr
3|Alien Registration Card LUA|tmp_preapp-DOB
0|App - CSCE Certificate LUA|Admit Type
1|App - CSCE Certificate LUA|Alias 1
2|App - CSCE Certificate LUA|Alias 2
3|App - CSCE Certificate LUA|Alias 3
4|App - CSCE Certificate LUA|Alias 4 
```

文件 2：

```
Alien Registration Card LUA 
```

结果：

```
0|Alien Registration Card LUA|Checklist Update
1|Alien Registration Card LUA|Document App Plan
2|Alien Registration Card LUA|SA Application Nbr
3|Alien Registration Card LUA|tmp_preapp-DOB 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-07T16:01:48.523

这是一个 awk 选项，因此您可以避免 bash 依赖（为了可移植性）：

```
$ awk -F'|' 'NR==FNR{check[$0];next} $2 in check' file2 file1 
```

**这是如何运作的？**

*   `-F'|'`-- 设置字段分隔符
*   `'NR==FNR{check[$0];next}`-- 如果总记录数与文件记录数匹配（即我们正在读取提供的第一个文件），那么我们填充一个数组并继续。
*   `$2 in check`-- 如果在我们创建的数组中提到了第二个字段，则打印该行（如果未提供任何操作，这是默认操作）。
*   `file2 file1` - 文件。由于`NR==FNR`构造，顺序很重要。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-07T15:34:59.100

file2 最后不应该包含`LUA`吗？

如果是，您仍然可以使用`join`：

```
join -t'|' -12 <(sort -t'|' -k2 file1) file2 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-11-07T21:42:47.843

看起来你只需要

```
grep -F -f file2 file1 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-07T15:36:14.303

您可以修改此脚本：

```
cat file2 | while read line; do
    grep $line file1 # or whatever you want to do with the $line variable
done 
```

while 循环逐行读取 file2 并将该行提供给 grep 命令，该命令在 file1 中对该行进行 grep。有一些额外的输出可能会被 grep 选项删除。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-07T15:35:02.603

您可以使用粘贴命令来组合文件：

```
paste [option] source files [>destination file] 
```

对于您的示例，它将是

```
paste file1.txt file2.txt >result.txt 
```

# vb.net - LinQ - 左连接两个数据表

> ID：13272721
> 
> 赞同：0
> 
> 时间：2012-11-07T15:24:19.590
> 
> 标签：vb.net, linq, datatable

我想知道是否有人可以帮助我。我是 LINQ 的新手，但仍在尝试了解它是如何组合在一起的。

我在 SQL 中有一个简单的左连接查询，返回表 1 中不存在于表 2 中的所有事务。两个表的结构相同。

```
SELECT Table1.*
FROM Table1 LEFT JOIN Table2 ON Table1.DealReference = Table2.DealReference
WHERE (((Table2.DealReference) Is Null)); 
```

有人可以指导我，如何在 LinQ 中实现相同的目标。

我正在使用以下数据表：

```
 Dim currentDataTable = _DataTable1.AsEnumerable
    Dim previousDataTable = _DataTable2.AsEnumerable 
```

我希望将结果输出回数据表。

谢谢

BM

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T15:39:27.027

1)`Linq-To-DataTable`是的子集，`Linq-To-Objects`并假设数据已经在内存中。因此，如果您想要一个可扩展的解决方案，您可能想看看`Linq-To-Sql`哪些直接查询数据库。

2）您的联接不是简单的左联接，而是左外联接。例如，您可以使用以下查询来实现：

```
Dim rows = From r1 In _DataTable1
           Group Join r2 In _DataTable2
           On r1.Field(Of String)("DealReference") Equals r2.Field(Of String)("DealReference")
           Into DataGroup = Group
           From row In DataGroup.DefaultIfEmpty
           Where row Is Nothing
           Select r1
Dim tblresult = rows.CopyToDataTable() 
```

# php - 创建具有固定长度的可转位非重复组合

> ID：13272723
> 
> 赞同：2
> 
> 时间：2012-11-07T15:24:26.223
> 
> 标签：php, algorithm, combinations

基于这个问题

[字符串的有序固定长度组合](https://stackoverflow.com/questions/12035147/ordered-fixed-length-combinations-of-a-string)

我创建了一个 PHP 算法，可以创建固定长度的字符组合（基本上是对 Java-answer 的重写）

```
private function getCombination($length, $input) {
    $result = array();

    if ($length == 0) {
        return $result;
    }

    $first = substr($input, 0, $length);
    $result[] = $first;

    if (strlen($input) == $length) {
        return $result;
    }

    $tails = $this->getCombination($length - 1, substr($input, 1));

    foreach ($tails as $tail) {
        $tmp = substr($input, 0, 1) . $tail;

        if (!in_array($tmp, $result)) {
            $result[] = $tmp;
        }
    }

    return array_merge($result, $this->getCombination($length, substr($input, 1)));
} 
```

对于另一个问题，[创建较大集合的固定长度非重复排列](https://stackoverflow.com/questions/13175257)，我得到了一个（出色的）算法，它可以使排列可索引，通过提供一个“键”有效地使它们可寻址，当给定时，它总是会产生完全相同的排列相同的字符集和相同的长度。

好吧，现在我基本上需要相同的组合，但与我的其他问题中的排列相反。

上面的算法可以用同样的方式修改吗？意思是创建一个类似的函数

```
public function getCombinationByIndex($length, $index); 
```

这将返回使用算法创建的千种可能组合中的一种，**而****无需事先创建它们**？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T17:20:28.040

我在 C# 中编写了一个类来处理处理二项式系数的常用函数，这是您的问题似乎属于的问题类型 - 假设您使用组合而不是排列。它执行以下任务：

1.  将任何 N 选择 K 的所有 K 索引以良好的格式输出到文件。K-indexes 可以替换为更具描述性的字符串或字母。

2.  将 K 索引转换为已排序二项式系数表中条目的正确索引。这种技术比依赖迭代的旧已发布技术快得多。它通过使用帕斯卡三角形固有的数学属性来做到这一点。

3.  将已排序二项式系数表中的索引转换为相应的 K 索引。我相信它也比旧的迭代解决方案更快。

4.  使用[Mark Dominus](http://blog.plover.com/math/choose.html)方法计算二项式系数，它不太可能溢出并且适用于更大的数字。

5.  该类是用 .NET C# 编写的，并提供了一种通过使用通用列表来管理与问题相关的对象（如果有）的方法。此类的构造函数采用一个名为 InitTable 的 bool 值，当它为 true 时，将创建一个通用列表来保存要管理的对象。如果此值为 false，则不会创建表。无需创建表即可使用上述 4 种方法。提供了访问器方法来访问表。

6.  有一个关联的测试类，它显示了如何使用该类及其方法。它已经用 2 个案例进行了广泛的测试，并且没有已知的错误。

要了解此类并下载代码，请参阅[制表二项式系数](http://tablizingthebinomialcoeff.wordpress.com/)。

将此类移植到 php 应该非常简单。您可能不必移植类的通用部分来实现您的目标。考虑到您正在使用的组合数量，您可能需要使用比 4 字节整数更大的字长。

# javascript - 第一次加载页面时，Opera 两次发出 ajax 请求

> ID：13272724
> 
> 赞同：2
> 
> 时间：2012-11-07T15:24:31.730
> 
> 标签：javascript, ajax, jquery, opera

我在歌剧中遇到了一个小问题。我无法在其他浏览器中复制它。

我有一个正在加载的页面。加载页面后，我使用 JavaScript 发出 ajax 请求以 json 格式加载一些信息（我使用的是 jQuery）。
问题是歌剧两次发出ajax请求。在歌剧蜻蜓中，它向我显示它只发出了 1 个请求，但我的 http 服务器说不同。

请求的页面是这样`http://localhost/session&_=1352301441410`的：最后一个数字是随机的。

我还添加了以下响应标头：

```
Expires: Mon, 26 Jul 1997 05:00:00 GMT
Last-Modified: Wed, 07 Nov 2012 15:17:22 GMT
Cache-Control: no-store, no-cache, must-revalidate
Cache-Control: post-check=0, pre-check=0
Pragma: no-cache 
```

我认为问题与缓存有关，因为这只发生在第一次加载页面或清除缓存时。
我正在使用最新的歌剧：Opera 12.10

在其他浏览器上一切正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T18:46:43.723

前段时间我在 Chrome 上发现了类似的问题。它两次调用相同的函数（但它在调试器的时间轴中只显示一次。为了解决它，我使用了一个变量，该变量在调用函数时立即设置为 1，并在完成时设置为 0。当然，如果变量为 1，则不会调用该函数。调用该函数的代码片段如下：

```
if (security_var == 0)
{
  security_var = 1;
  function_whatever();
}
else
{
  alert('Function called while variable is 1');
} 
```

而函数将是这样的：

```
function function_whatever()
{
  //the code bla bla bla
  //.....

  security_var = 0;
} 
```

请记住，如果您的函数有其他退出方式，您也应该将其放在`security_var = 0;`那里 :) 这不是避免问题的最佳方法（例如，如果您的函数因任何原因结束，您可能会发现自己无法启动再次，因为变量设置为 1)，但它可以用于测试目的；警报可让您验证它。

# excel - VBA Excel 组合框

> ID：13272726
> 
> 赞同：3
> 
> 时间：2012-11-07T15:24:36.813
> 
> 标签：excel, vba

我有一个无法开始工作的 Excel VBA 用户窗体。第一个组合框需要链接到相关工作表（年份）。然后，第二个组合框或列表框在所选工作表的第一列（月份）中提取数据，然后输入数据并显示在相关行的相关工作表上。我的编码是基本的，我的引用是错误的，你能帮忙吗？

这有效，它把它放在右边的工作表中，但不在右边的行中（组合框 2）：

```
Private Sub CommandButton1_Click()
With ThisWorkbook.Worksheets(cboTest.Value)
.Range("D2").Value = nightElec
.Range("F2").Value = dayHeat
.Range("G2").Value = nightHeat
.Range("I2").Value = dayWater
.Range("J2").Value = nightWater
dayElec = Empty
End With

End Sub 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T15:30:38.863

如何将其用作用户表单的代码：

```
Private Sub UserForm_Initialize()
  Dim wks As Worksheet

  'loop through all worksheets
  For Each wks In ThisWorkbook.Worksheets
    'add their names as items to your combo-box
    cboTest.AddItem wks.Name
  Next wks

End Sub 
```

然而，这只是众多方法中的一种。在这里，我假设您没有以任何其他形式保存工作表名称 - 例如数组 - 并且需要更新此信息。

此外，这只是用户表单初始化的例程 - 不是更新。

```
Private Sub UserForm_Initialize()
  InitCbo
End Sub

Private Sub InitCbo()
  Dim wks As Worksheet

  With cboTest
   'delete all current items of cboTest
   .Clear
   'loop through all worksheets
   For Each wks In ThisWorkbook.Worksheets
     'add their names as items to your combo-box
     .AddItem wks.Name
   Next wks
   'select first item
   .ListIndex = 0 
  End With
End Sub 
```

现在您可以使用`InitCbo`来更新组合框。就像单击按钮或添加新工作表时一样。

您可能也对该`List`属性感兴趣，因为您也可以使用它设置 Items - 就像在这个 excel-help 示例中一样：

```
Dim MyArray(6,3)

Private Sub UserForm_Initialize()
    Dim i As Single
     'The 1-st list box contains 3 data columns
    ListBox1.ColumnCount = 3        
    'The 2nd box contains 6 data columns
     ListBox2.ColumnCount = 6        

    'Load integer values into first column of MyArray
    For i = 0 To 5
        MyArray(i, 0) = i
    Next i

    'Load columns 2 and three of MyArray
    MyArray(0, 1) = "Zero"
    MyArray(1, 1) = "One"
    MyArray(2, 1) = "Two"
    MyArray(3, 1) = "Three"
    MyArray(4, 1) = "Four"
    MyArray(5, 1) = "Five"

    MyArray(0, 2) = "Zero"
    MyArray(1, 2) = "Un ou Une"
    MyArray(2, 2) = "Deux"
    MyArray(3, 2) = "Trois"
    MyArray(4, 2) = "Quatre"
    MyArray(5, 2) = "Cinq"

    'Load data into ListBox1 and ListBox2
    ListBox1.List() = MyArray
    ListBox2.Column() = MyArray

End Sub 
```

我知道，这是 ListBox 的一个示例 - 但据我所知，它也适用于 ComboBox 或至少类似。

*编辑：*

您粘贴的代码将始终使用活动工作簿和活动工作表，因此这`Range("C2").Value = dayElec`不会更改列表/组合框的已选择工作表的值。

您需要将其修改为：

```
Private Sub CommandButton1_Click()

  With ThisWorkbook.Worksheets(cboTest.value)
    .Range("D2").Value = nightElec
    .Range("F2").Value = dayHeat
    .Range("G2").Value = nightHeat
    .Range("I2").Value = dayWater
    .Range("J2").Value = nightWater
    dayElec = Empty
  End With

End Sub 
```

# java - java使用枚举类型的差异方法

> ID：13272727
> 
> 赞同：1
> 
> 时间：2012-11-07T15:24:38.000
> 
> 标签：java, enums

我希望编写一个可以返回 2 张卡片价值差异的方法。我很困惑，因为我正在学习枚举并且不确定实现它的最有效方法。

```
public class Card implements Comparable<Card> {
public enum Rank {TWO, THREE, FOUR, FIVE, SIX,SEVEN, EIGHT, NINE, TEN, 
                    JACK, QUEEN, KING, ACE}
public enum Suit {CLUBS, DIAMONDS, HEARTS, SPADES}

public static int difference(Card c){

} 
```

任何帮助或指导将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T15:29:26.307

```
public enum Rank {ACE(1), TWO(2); /* obviously add the other values*/
    private int value  ;
    Rank(int value){
        this.value = value;
    };
    public int getValue(){
       return this.value;
    }

    public int calcDifference(Rank rank){
        return getValue() - rank.getValue();
    }

}; 
```

然后可以这样调用：

```
Rank rankAce =  Rank.ACE;
System.out.println(rankAce.calcDifference(Rank.TWO)); 
```

您可以删除 int 值并仅使用序数，但这种方式为您提供了一些灵活性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T15:31:47.947

定义一张牌的价值最简单的方法是在花色上加上 13 倍的花色，或者在花色上加上 4 倍的花色：

```
public int faceValue(Card c) {
    return 13*c.getSuit().ordinal()+c.getRank().ordinal();
} 
```

或者

```
public int faceValue(Card c) {
    return 4*c.getRank().ordinal()+c.getSuit().ordinal();
} 
```

两种方式都会产生从`0`到 的数字`51`，包括 。

有了`faceValue`in hand，你可以定义差分函数如下：

```
public static int faceValueDifference(Card left, Card right){
    return left.faceValue()-right.faceValue();
} 
```

# bash - Bash 脚本从数组中获取项目

> ID：13272728
> 
> 赞同：1
> 
> 时间：2012-11-07T15:24:38.873
> 
> 标签：bash

我正在尝试在 bash 中逐行读取文件。

每行的格式如下`text|number`。

我想生成格式如下`text,text,text`等的文件，因此新文件将仅包含先前文件中的文本，以逗号分隔。

这是我尝试过但无法正常工作的方法：

```
FILENAME=$1

OLD_IFS=$IFSddd
IFS=$'\n'
i=0
for line in $(cat "$FILENAME"); do
    array=(`echo $line | sed -e 's/|/,/g'`)
    echo ${array[0]}
    i=i+1;
done
IFS=$OLD_IFS 
```

但这会打印文本和数字，但格式不同`text number`

这是示例输入：

```
dsadadq-2321dsad-dasdas|4212
dsadadq-2321dsad-d22as|4322 
```

这是示例输出：

```
dsadadq-2321dsad-dasdas,dsadadq-2321dsad-d22as 
```

我做错什么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T15:28:11.317

不需要数组和`sed`：

```
while IFS='' read line ; do
    echo -n "${line%|*}",
done < "$FILENAME" 
```

你只需要删除最后一个逗号:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T15:49:11.023

不是纯 bash，但您可以在 awk 中执行此操作：

```
awk -F'|' 'NR>1{printf(",")} {printf("%s",$1)}' 
```

或者，在纯 bash 中，无需去掉最后的逗号：

```
#/bin/bash

# You can get your input from somewhere else if you like. Even stdin to the script.
input=$'dsadadq-2321dsad-dasdas|4212\ndsadadq-2321dsad-d22as|4322\n'

# Output should be reset to empty, for safety.
output=""

# Step through our input.  (I don't know your column names.)
while IFS='|' read left right; do
  # Only add a field if it exists.  Salt to taste.
  if [[ -n "$left" ]]; then
    # Append data to output string
    output="${output:+$output,}$left"
  fi
done <<< "$input"

echo "$output" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T16:02:48.443

使用`sed`：

```
$ sed ':a;N;$!ba;s/|[0-9]*\n*/,/g;s/,$//' file
dsadadq-2321dsad-dasdas,dsadadq-2321dsad-d22as 
```

或者，这里有一点`sed`可读性`tr`：

```
$ sed 's/|.*$/,/g' file | tr -d '\n' | sed 's/,$//'
dsadadq-2321dsad-dasdas,dsadadq-2321dsad-d22as 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T16:41:48.697

Choroba 有最好的答案（恕我直言），除了它不处理空行并且它添加了一个尾随逗号。此外，`IFS`没有必要捣乱。这是他解决这些问题的答案的修改：

```
while read line ; do
    if [ -n "$line" ]; then
        if [ -n "$afterfirst" ]; then echo -n ,; fi
        afterfirst=1
        echo -n "${line%|*}"
    fi
done < "$FILENAME" 
```

第一个`if`只是过滤掉空行。第二个`if`东西`$afterfirst`只是为了防止多余的逗号。除了第一个条目之外，它在每个条目之前都回显一个逗号。 `${line%|\*}`是一种 bash 参数表示法，如果它与某个表达式匹配，则删除参数的结尾。 `line`是参数，`%`是指示应删除尾随模式的符号，是要删除`|*`的模式。

# javascript - JavaScript：两个字符国家代码的正则表达式

> ID：13272729
> 
> 赞同：0
> 
> 时间：2012-11-07T15:24:56.703
> 
> 标签：javascript, regex

我想对这 3 个两个字符的国家代码进行正则表达式：JavaScript 中的 de,fr,es。

```
/^(de|fr|es)/i 
```

它是否正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T15:27:41.393

如果它是字符串包含的所有内容，那么您还应该检查字符串是否在那里结束，

```
/^(?:de|fr|es)$/i 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T15:27:33.203

是的，这是正确的。但它也适用于“fr”和“french”。这是一个测试正则表达式的神奇网络：

[http://gskinner.com/RegExr/](http://gskinner.com/RegExr/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T15:31:10.197

您可以通过查找单词边界来确保它与法语不匹配。

```
/\b(de|fr|es)\b/i 
```

这将匹配`fr`任何这些示例`fr,de`or`fr de`或`fr-de`，但不匹配`france`or`freedom`

可能更具体到您正在寻找的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T15:32:49.813

根据字符串的确切外观，您有多种选择：

```
/^(?:de|fr|es)$/ // string contains only county code

/\b(?:de|fr|en)\b/ // looking for word boundaries 
                   // so it matches "en" but not "english" 
```

很可能您不需要捕获组，这就是为什么使用`(?:)`使其不捕获的原因。

# actionscript-3 - AS3 - 用户界面元素的显示坐标

> ID：13272735
> 
> 赞同：0
> 
> 时间：2012-11-07T15:25:10.853
> 
> 标签：actionscript-3

我正在寻找一种方法来确定影片剪辑元素的显示/屏幕坐标。

```
 point = uie.localToGlobal(new Point(uie.x,uie.y));
        posX = point.x + (uie.width  / 2);
        posY = point.y + (uie.height / 2); 
```

上面的代码只检索舞台内的坐标。但是 - 我需要显示/屏幕坐标而不是舞台坐标。

也许有一种方法可以检索闪存容器的显示/屏幕位置（左上角）或将鼠标移动到舞台内的某个位置，检索鼠标的屏幕/显示和舞台位置并确定屏幕位置之间的偏移量和舞台位置。这可能在（！）AS3中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T16:35:55.743

这在 Flash 播放器中是不可能的。您可以尝试使用 javascript 获取 flash 容器的坐标，这将为您提供相对于浏览器窗口的坐标。Javascript 可以获取浏览器相对于桌面的屏幕位置。您需要浏览器的[window.screenLeft](http://www.w3schools.com/jsref/prop_win_screenleft.asp) api。有了这个，您可以获取页面上 flash 元素的位置并将其添加到浏览器窗口。这将为您提供具有较小误差范围的正确位置。

您也可以使用 Adob​​e Air 来实现这一点。使用[NativeWindow](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/NativeWindow.html) api。

```
stage.nativeWindow.x = 0
stage.nativeWindow.y = 0 
```

例如，此代码段将在左上角设置窗口。

# python - Python代码，自我未定义

> ID：13272739
> 
> 赞同：4
> 
> 时间：2012-11-07T15:25:19.670
> 
> 标签：python

```
class makeCode:
    def __init__(self,code):
            self.codeSegment = code.upper()
            if checkSegment(self.codeSegment):
                    quit()
            self.info=checkXNA(self.codeSegment)
    def echo(self,start=0,stop=len(self.codeSegment),search=None): #--> self not defined
            pass 
```

不工作...

*   它说变量**self**在实际定义时没有定义；
*   `checkSegment`如果输入不是由核苷酸字母组成的字符串，或者包含不能在一起的核苷酸，则该函数返回 1；
*   如果发生这种情况，它会退出，没关系，它工作得很好；
*   然后它分配信息（如果它是 RNA 或 DNA）与`checkXNA`返回带有信息“dnaSegment”或“rnaSegment”的字符串的函数进行检查；完美运行。

但是`echo`，为打印更具体的信息而设计的功能告诉我 self 没有定义，但为什么呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T15:28:04.937

`self`未在函数定义时定义，您不能使用它来创建默认参数。

函数定义中的表达式在创建函数*时*进行评估，而不是在调用它时，请参阅[“Least Astonishment”和 Mutable Default Argument](https://stackoverflow.com/questions/1132941/least-astonishment-in-python-the-mutable-default-argument)。

请改用以下技术：

```
def echo(self, start=0, stop=None, search=None):
    if stop is None:
        stop = len(self.codeSegment) 
```

如果您需要支持`None`作为可能的值`stop`（例如，如果明确指定，则为`None`有效值`stop`），您需要选择一个不同的唯一哨兵来使用：

```
_sentinel = object()

class makeCode:
    def echo(self, start=0, stop=_sentinel, search=None):
        if stop is _sentinel:
            stop = len(self.codeSegment) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-07T15:29:33.430

评估函数或方法定义时，即解析类时，评估默认参数值。

编写依赖于对象状态的默认参数值的方法是`None`用作哨兵：

```
def echo(self,start=0,stop=None,search=None):
    if stop is None:
        stop = len(self.codeSegment)
    pass 
```

# winforms - VSTUDIO2012 如何制作“borderstyle = none”表格 MOVEABLE

> ID：13272744
> 
> 赞同：-1
> 
> 时间：2012-11-07T15:25:39.510
> 
> 标签：winforms, visual-studio, forms, visual-studio-2012

我正在学习 vstudio 2012，我正在尝试使用“borderstyle = none”制作可移动的表单，但我做不到。

我在 Google 中找到的所有信息都讨论了有关此问题的 vb4 5 和 6，版本对我来说太早了，我无法使用它们（我不知道如何使用）。

我的声明非常简单，我只需要通过单击应用程序（表单上的任何位置）使窗口可移动：

```
Public Class Form1

    Private Sub Timer1_Tick(sender As Object, e As EventArgs) Handles Timer1.Tick
        Label2.Text = "X: " & MousePosition.X
        Label3.Text = "Y: " & MousePosition.Y

    End Sub

    Sub Form1_KeyPress(ByVal sender As Object, _
      ByVal e As KeyPressEventArgs) Handles Me.KeyPress
        If e.KeyChar >= ChrW(3) Then
            Clipboard.SetDataObject(Label2.Text & " " & Label3.Text)
        End If
    End Sub

End Class 
```

请问有什么帮助吗？谢谢你阅读

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T16:51:11.133

我已经解决了，谢谢。

```
Private ArrastrarForm As Boolean
Private PosicionMouseHeader As Point
Private tmpPoint As Point

Private Sub Form1_MouseDown(sender As System.Object, e As System.Windows.Forms.MouseEventArgs) Handles MyBase.MouseDown
    If e.Button = Windows.Forms.MouseButtons.Left Then
        ArrastrarForm = True
        PosicionMouseHeader = e.Location
    End If
End Sub

Private Sub Form1_MouseMove(sender As System.Object, e As System.Windows.Forms.MouseEventArgs) Handles MyBase.MouseMove
    If ArrastrarForm Then
        tmpPoint = Me.Location + e.Location - PosicionMouseHeader
        Me.Location = tmpPoint
    End If
End Sub

Private Sub Form1_MouseUp(sender As System.Object, e As System.Windows.Forms.MouseEventArgs) Handles MyBase.MouseUp
    If e.Button = Windows.Forms.MouseButtons.Left Then
        ArrastrarForm = False
    End If
End Sub 
```

再见！

# javascript - 如何打开给定的 URL？

> ID：13272748
> 
> 赞同：3
> 
> 时间：2012-11-07T15:25:46.780
> 
> 标签：javascript, google-apps-script, web-applications

我正在将 Google Apps Script 与 Google Drive 一起使用，而且我是这方面的初学者。现在，我想在同一个窗口中打开一个给定的 Url。在标准 JavaScript 中，会有 'open' 方法：

```
var windowObjectReference = window.open(strUrl, strWindowName[, strWindowFeatures]); 
```

可能，HtmlService 将是 Google Apps Script 的最佳解决方案。以下代码应在同一窗口中打开 Google 站点：

```
function doGet() {
     return HtmlService.createHtmlOutput(
     "<form action='http://www.google.com' method='get' id='foo'></form>" + 
     "<script>document.getElementById('foo').submit();</script>");
} 
```

我打开 Google Drive 并创建了一个新脚本。我在 Google Docs Script 的编辑器中输入了以上内容。但是当我从那里运行这个函数时，什么都不会发生。为什么这样？你能纠正我吗？在新窗口中打开 Google 的代码是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T14:12:43.310

根据 2012 年 10 月 26 日的[发行](https://developers.google.com/apps-script/release_notes)说明 - 您不能再在**没有用户交互**的情况下自动打开新窗口。

打开一个新窗口以显示这样的 HTML 的最简单方法 -

```
<a href='http://www.google.com' target='_blank'>Open in new window</a> 
```

# selenium - Selenium：无法单击菜单项

> ID：13272752
> 
> 赞同：0
> 
> 时间：2012-11-07T15:26:04.610
> 
> 标签：selenium, webdriver

在测试我的 web 应用程序并出现以下错误时，我无法单击如图所示的菜单项 (Create Defect...)

```
**org.openqa.selenium.ElementNotVisibleException: Cannot click on element** 
```

![我想点击](../Images/6640184b69d916cd32f562175145fc15.png)

下面的代码点击图片（手图）如图

```
driver.findElement(By.xpath("//div[@id='divToolbar']/div/table/tbody/tr/td[2]")).click(); 
```

然后菜单打开。现在我想点击菜单项。我为此使用下面的代码

```
 driver.findElement(By.xpath("html/body/div[10]/div/div/div/div/div/ul/li[1]")).click(); 
```

但我得到了上述异常

这就是我在 html 中的内容：

```
<div class="mmenu" style="display: block; left: 49px; top: 37px;">
<div class="mmenu-content">
<div class="mmenu-border" style="width: 231px;">
<div class="mmenu-inset" style="width: 231px;">
<div class="mmenu-group first-child last-child">
<div class="mmenu-column first-child last-child">
<h3>
<ul>
<li id="liemx360120335239.81635" class="link" menuuid="emx360120335239.81635">
<span class="icon">
<span>Create Defect...</span>
</li>
<li id="liemx172704021676.66638" class="link" menuuid="emx172704021676.66638">
</ul>
</div>
</div>
</div>
</div>
</div>
</div> 
```

你能建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T16:14:01.077

你试过**driver.findElement(By.xpath("//span[contains(text(),'Create Defect...']")).click();**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T20:07:19.553

我认为你的问题是第二个菜单是不可见的，`ElementNotVisibleException`如果他在不可见的定位器上操作，WebDriver 会抛出。我认为您必须保持第一个菜单打开，因为当您尝试单击它时第二个菜单可见。我使用[Actions](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/interactions/Actions.html)类。尝试执行以下操作：

```
new Actions(getWebDriver()).moveToElement(driver.findElement(By.xpath(...))).perform(); 
```

然后尝试单击第二个定位器。如果您仍然有问题，请尝试在同一操作中链接这两个命令。

# wcf - WCF customBinding over HTTPS

> ID：13272756
> 
> 赞同：0
> 
> 时间：2012-11-07T15:26:12.473
> 
> 标签：wcf, web-services, custom-binding

我有一种情况，我需要使用 X509 证书签署一个肥皂请求以供 Java Web 服务使用。通过 WCF 的魔力，我们能够正确形成信封，并且所有看起来都比标准 http 更好。但是，一旦我们转移到 HTTPS（客户端要求），我们开始收到错误“无法为具有权限的 SSL/TLS 安全通道建立信任关系”.. 我们尝试调整一些设置并将目标域更改为其他已知的HTTPS 站点，我们仍然收到相同的错误。以下是我们的客户端配置，提前非常感谢！

```
<?xml version="1.0"?>
<configuration>
  <system.serviceModel>
    <bindings>
      <customBinding>
        <binding
          name="myCustomBinding"
          closeTimeout="00:01:00"
          openTimeout="00:01:00"
          receiveTimeout="00:10:00"
          sendTimeout="00:01:00">
          <textMessageEncoding
                  messageVersion="Soap11" />
          <security
            allowInsecureTransport="true"
            authenticationMode="MutualCertificate"
            requireDerivedKeys="false"
            keyEntropyMode="ClientEntropy"
            includeTimestamp="false"
            securityHeaderLayout="Lax"
            messageProtectionOrder="SignBeforeEncrypt"
            messageSecurityVersion="WSSecurity10WSTrust13WSSecureConversation13WSSecurityPolicy12BasicSecurityProfile10">
            <secureConversationBootstrap />
          </security>
          <httpsTransport />
        </binding>
      </customBinding>
    </bindings>
    <behaviors>
      <endpointBehaviors>
        <behavior name="wsHttpCertificateBehavior">
          <clientCredentials>
            <clientCertificate
              findValue="MyCertName"
              storeLocation="LocalMachine"
              x509FindType="FindByIssuerName"/>
            <serviceCertificate>
              <authentication
                revocationMode="NoCheck"
                trustedStoreLocation="LocalMachine" />
            </serviceCertificate>
          </clientCredentials>
        </behavior>
      </endpointBehaviors>
    </behaviors>
    <client>
      <endpoint
        address="https://www.SomeUrl.com"
        binding="customBinding"
        bindingConfiguration="myCustomBinding"
        behaviorConfiguration="wsHttpCertificateBehavior"
        contract="ServiceReference1.ServiceTest"
        name="untk48_dfSoap">
        <identity>
          <certificateReference findValue="MyCertName" storeLocation="LocalMachine" x509FindType="FindByIssuerName"/>
        </identity>
      </endpoint>
    </client>
  </system.serviceModel>
  <startup>
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/>
  </startup>
</configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-28T07:12:12.687

您的证书友好名称是否与 https 的域名匹配？

我过去必须做才能让 HTTPS WCF 正确验证

例如

友好名称 box1.mycompany.au.net

请求域[https://box1.mycompany.au.net](https://box1.mycompany.au.net)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-10-01T09:01:07.730

在客户端上安装证书，您将不会遇到此问题。安装时，请确保将其安装到中间证书颁发机构和受信任的根证书颁发机构。

为我工作。

# javascript - 如何在运行时向页面添加 javascript 代码？

> ID：13272757
> 
> 赞同：0
> 
> 时间：2012-11-07T15:26:12.787
> 
> 标签：javascript, asp.net, html, recaptcha

我有以下脚本和 noscript javascript 代码：

```
<script type="text/javascript" src="https://www.google.com/recaptcha/api/challenge?k=6LfWqtgSAAAAAP1KwYFYGt0wDeJFtxznmqyRH_Q5">   </script>
    <noscript>
        <iframe src="https://www.google.com/recaptcha/api/noscript?k=6LfWqtgSAAAAAP1KwYFYGt0wDeJFtxznmqyRH_Q5"
            height="300" width="500" frameborder="0"></iframe>
        <br>
        <textarea name="recaptcha_challenge_field" rows="3" cols="40">      </textarea>
        <input type="hidden" name="recaptcha_response_field" value="manual_challenge">
    </noscript> 
```

仅当从服务器设置 javascript 变量时，才应将上述代码添加到页面正文中。

```
var shouldShow = true;

        $document.ready(function() {

            if (shouldShow) {

                // add
            } else {

                // don't add
            }
        }); 
```

怎么可能在运行时添加这些脚本？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T15:30:56.840

您可以使用[**Page.RegisterStartupScript**](http://msdn.microsoft.com/en-us/library/system.web.ui.page.registerstartupscript.aspx)

```
if (shouldShow) {

        Page.RegisterStartupScript...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T15:34:08.907

你可以这样做：

```
 var shouldShow = true;
 $document.ready(function() {
        if (shouldShow) {
           var newScript = document.createElement('script');
           newScript.type = 'text/javascript';
           newScript.src = 'https://www.google.com/recaptcha/api/challenge?k=6LfWqtgSAAAAAP1KwYFYGt0wDeJFtxznmqyRH_Q5';
           document.body.appendChild(newScript);
        } else { ... } 
```

你可以随意忽略 noscript。因为它仅在没有启用 JS 时显示，但在这种情况下无论如何都不会添加它。

但是，为什么不简单地将其放入 some`asp:panel`中，然后根据是否显示它来将其可见性设置为 true/false？如果某些 asp.net 元素具有`elem.Visibility = false`它不会发送到浏览器，则与其所有内容相同。

# ruby-on-rails - 从 ActiveAdmin (RoR) 中的 collection_action 调用一个类

> ID：13272759
> 
> 赞同：2
> 
> 时间：2012-11-07T15:26:18.947
> 
> 标签：ruby-on-rails

我是 ruby​​ on rails 的新手。我正在尝试从`collection_action`ActiveAdmin 中调用一个类。这是代码（app/admin/models）：

```
collection_action :status_race, :method => :post do
    #Do some import work..
    redirect_to :class => :import_route
end 
```

这是我要调用的类的代码（app/lib/route）：

```
class ImportRoute
def  initialize
    @seperator = " "
    @time_format = "%d-%m-%y"
end
def run(filename)
    puts "Running route import file"

    raise "File" + filename + "doesn't not exist" unless File.exist(filename)

    ri = RouteImporter.find(:name => self.class.name)

    if(ri.nil?)
        puts "Error, file doesn't exists"
    end
    CSV.foreach(filename, {:col_sep => @seperator}) do |row|
        if row.lenght >5
            ri.country_name = row[0] + " " + row[1]
            ri.type = row[2]
            ri.company = row [3]
        else
            ri.country_name = row[0]
            ri.type = row[1]
            ri.company = row[2]
            ri.date = row[4].gsub(";", " ")
        end
    end
end 
```

结尾

我曾经`redirect_to`打电话给班级，但没有工作，而且我不知道该怎么做。任何的想法？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T18:35:42.247

此代码取自[http://activeadmin.info/docs/8-custom-actions.html#collection_actions](http://activeadmin.info/docs/8-custom-actions.html#collection_actions)

```
ActiveAdmin.register Post do
  collection_action :import_csv, :method => :post do
    # Do some CSV importing work here...
    redirect_to {:action => :index}, :notice => "CSV imported successfully!"
  end
end 
```

> 此收集操作将在“/admin/posts/import_csv”处生成一个指向 Admin::PostsController#import_csv 控制器操作的路由。

所以这意味着你必须在 app/controllers/admin/posts_controller.rb 中添加一个方法 import_csv。在此方法中，您可以实例化您的模型：

```
def import_csv
  import_route = ImportRoute.new
  # do stuff on this object
end 
```

您可以轻松地将其调整为您的代码

# php - 如果我知道它只有一行，我是否必须遍历 mysqli-resultset？

> ID：13272760
> 
> 赞同：0
> 
> 时间：2012-11-07T15:26:18.933
> 
> 标签：php

我有一个 mysqli-resultset，它只包含 1 行。我现在得到这样的价值：

```
$result = mysqli_query($link,$query)->fetch_array(MYSQLI_NUM);
$result = $result[0]; 
```

没有更直接的方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T15:30:02.807

在 PHP 5.4 中：

```
$result = mysqli_query($link,$query)->fetch_array(MYSQLI_NUM)[0]; 
```

但它缺少错误处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T15:34:50.263

如果您只想要一行，为什么不使用 fetch_row 而不是使用 fetch_array 呢？

```
$result = mysqli_query($link,$query)->fetch_row() 
```

# ruby-on-rails - 创建工厂测试失败

> ID：13272763
> 
> 赞同：1
> 
> 时间：2012-11-07T15:26:24.357
> 
> 标签：ruby-on-rails, factory-bot

我在使用 factorygirl 进行测试时遇到问题：

首先是一些代码：

customerr_spec.rb：

```
require 'spec_helper'

describe "customers" do
  describe "signup" do
    #FactoryGirl.find_definitions
    user = FactoryGirl.create(:signup_customer)
    it "has right data" do
      visit signup_path
      fill_in :id, :with => 2110001
      fill_in :name, :with => "AVK POLSKA Sp. zo.o."
      fill_in :email, :with => "my.email@provider.be"
      fill_in :email_confirmation, :with => "my.email@provider.be"
      click_button "Create account"
      page.should have_content("Fireprotection")
    end
end 
```

工厂.rb

```
FactoryGirl.define do
  factory :signup_customer, class: Customer do
    id = 2110001
    name = "AVK POLSKA Sp. zo.o."
    email = ""
    address_1 = "ul. Jakubowska 1"
    address_2 = "Pniewy 62-045"
    zipcode = 62
    city = "Pniewy"
    currency = "PLN"
    country_id = "PL"
    contact_person_id = "AZU"
    reset_token = nil
    reset_token_init = nil
  end
end 
```

这是我在运行该测试时遇到的错误：

```
Running tests with args ["--drb", "-f", "progress", "-r", "c:/Ruby193/lib/ruby/gems/1.9.1/gems/guard-rspec-2.1.1/lib/guard/rspec/formatter.rb",
 "-f", "Guard::RSpec::Formatter", "--out", "/dev/null", "--failure-exit-code", "2", "spec"]...
  <-- take tuple(1); slave.run...
09:17:40 - ERROR - Guard::RSpec failed to achieve its <start>, exception was: 
```

> [#73C9383A03A6] DRb::DRbUnknownError: ActiveRecord:: [#73C9383A03A6] c:/Ruby193/lib/ruby/1.9.1/drb/drb.rb:1095:in `method_missing' [#73C9383A03A6] c:/Ruby193/lib/ruby/gems/1.9.1/gems/guard-rspec-2.1.1/lib/guard/rspec/runner.rb:124:in`run_via_drb'

我必须在某处提出要求吗？我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T07:49:50.947

首先我必须提到这一点：

我在我的 Windows 电脑上使用 Guard 和 Rspec 和 Spork。-> 我添加了 Spork，以便在 guard 和 rspec 运行后进行更快的测试。

我为解决问题所做的工作（感谢 freenode #RubyOnRails 频道。：

```
user = FactoryGirl.create(:signup_customer)
#This is wrong! Has to be:
let(:user) {FactoryGirl.create(:signup_customer)} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T13:29:02.360

你有没有启动spork？您的代码中应该有一些 Spork.prefork 块，以便它知道它可以在整个时间内保留在内存中的内容以及每次运行时可以重新加载的内容。我在这里看不到您定义了 spork 块的 rspec 文件。

# sql - 以与 IN caluse 中给出的值相同的顺序检索值

> ID：13272764
> 
> 赞同：2
> 
> 时间：2012-11-07T15:26:25.123
> 
> 标签：sql, database, ms-access

我有一个类似（MS ACCESS）的查询。. 在给定的`number values in the IN caluse is a variant`示例中，我只给出了 4.somethimes 它的 30 多个数字。

```
SELECT        ID
FROM          TableName
WHERE        (ID IN (16, 18, 15, 20 ))

Result : 15 ,16,18,20 
```

有什么方法可以检索caluse`same order`中给出的值中的值。 结果应该是这样的 `IN`
`Result : 16,18,15,20`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T15:28:16.637

你可以这样做：

```
SELECT DISTINCT t1.ID
FROM          TableName t1
INNER JOIN
(
    SELECT 1 sortorder, 16 ID
    UNION ALL
    SELECT 2, 18
    UNION ALL
    SELECT 3, 15
    UNION ALL
    SELECT 4, 20
) t2 ON t1.ID = t2.ID
ORDER BY t2.sortorder 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T15:46:38.813

无法告诉 db 引擎检查`IN()`列表中值的顺序并将相同的顺序应用于`ORDER BY`.

您可以使用`Switch()`表达式应用相同的排序，但是您必须保持`Switch()`和`In()`同步。

```
SELECT id
FROM YourTable
WHERE id In (16,18,15,20)
ORDER BY 
    Switch(
        id=16,1,
        id=18,2,
        id=15,3,
        id=20,4
    ); 
```

# quartz.net - 管理 Quartz.Net 的配置

> ID：13272770
> 
> 赞同：4
> 
> 时间：2012-11-07T15:26:44.643
> 
> 标签：quartz.net, quartz.net-2.0

Quartz.Net 使用 XML 文件来配置要运​​行的作业以及运行这些作业的计划。据我了解，XML 配置的唯一其他选择是在编译时配置作业和计划。

我们有大量计划任务（250 个任务，每个任务部署到 3 到 5 个环境中），并且正在寻求迁移这些任务以使用 Quartz.Net。

[1] 在 Quarts.Net 中管理作业和调度配置信息是否有任何最佳实践？

[2] 是否有任何工具可用于创建配置文件？

作业的示例配置是：

```
<job>
  <name>addDirectoryScanListener</name>
  <group>directoryScanJobExample</group>
  <description>Sample job for Quartz Server</description>
  <job-type>Examples.DirectoryScanListenerExample, Examples</job-type>
</job>

<trigger>
  <simple>
    <name>addDirectoryScanListenerSimpleTrigger</name>
    <group>directoryScanJobExampleSimpleTriggerGroup</group>
    <description>Simple trigger to simply fire sample job</description>
    <job-name>addDirectoryScanListener</job-name>
    <job-group>directoryScanJobExample</job-group>
    <misfire-instruction>SmartPolicy</misfire-instruction>
    <repeat-count>0</repeat-count>
    <repeat-interval>10000</repeat-interval>
  </simple>
</trigger> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-08T06:09:01.423

有几种内置的方式来配置 Quartz.NET，这里有一个小的比较。

*   基于代码的配置
    *   您使用调度程序 API 创建/更新/删除作业和触发器
    *   通过硬编码配置的计划和作业自然需要重新编译，使用带有调度程序 API 和持久作业存储的 UI 等是另一回事
*   XML 配置
    *   您可以安排作业*并*观察 XML 文件的更改
    *   请参阅[配置文件更改时 Quartz.net 可以重新配置作业吗？](https://stackoverflow.com/questions/4864971/can-quartz-net-reconfigure-jobs-when-config-file-changes)例如监视文件更改
    *   当您拥有与 XML 文件关联的 XSD 文件时，据我所知，除了 Visual Studio 的智能感知之外，没有可用的工具

再说一次，你有工作商店的选择。无论您配置调度程序/作业/触发器的方式如何，您都可以使用任何作业存储。

*   RAMJobStore
    *   最快（但通常不是一个因素）和最简单的设置作业存储，但无法从服务器重启等导致的错过触发器火灾中恢复
*   AdoJobStore
    *   在重启之间存储触发器、作业及其状态，并允许您运行 Quartz.NET 集群以进行故障转移和扩展

还有一些基于 Web 的管理 UI 可用，有关详细信息，请参阅[Quartz.NET 的任何开源管理 UI](https://stackoverflow.com/questions/6533070/any-open-source-admin-ui-for-quartz-net)。

Quartz.NET[教程](http://www.quartz-scheduler.net/tutorial/index.html)也是一个很好的起点。

# php - 使用正则表达式将电话号码分配给他们的标签

> ID：13272775
> 
> 赞同：0
> 
> 时间：2012-11-07T15:26:56.880
> 
> 标签：php, regex

我有以下文字：

```
Main: (555) 551-0341 Pharmacy: (555) 551-4304 
```

我想把它分成两个变量：

```
 $main = (555) 551-0341
 $pharm = (555) 551-4304 
```

我对正则表达式的熟悉程度不足以绕过这些词。任何帮助都是极好的！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T16:09:46.707

你可以很容易地做到这一点。

```
$string = 'Main: (555) 551-0341 Pharmacy: (555) 551-4304';
preg_match_all('/(?P<name>[a-zA-Z]+): (?P<phone>[\(\)\s0-9-]{10,})/i', $string, $m);
$data  = array_combine($m['name'], $m['phone']); 
```

现在`$data['main']`包含`(555) 551-0341`等等`$data['pharmacy']`。**建议将这些值保存在数组**中。

如果您真的想将这些变量放在全局命名空间中，请使用[提取](http://php.net/extract)功能。

```
extract($data); 
```

[示范](http://eval.in/2431)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T15:45:43.517

从字符串中提取变量名没有多大意义——如果字符串改变，名字也会改变。因此，您需要使正则表达式非常适合这种特定情况，以免引入意外变量。

此外，您打算提取的变量在进行提取之前需要初始化。

一些示例代码（[Demo](http://eval.in/2420)）：

```
$string = 'Main: (555) 551-0341 Pharmacy: (555) 551-4304';

$main = $pharmacy = null;

foreach(
    preg_match_all(
        '/(Main|Pharmacy): (\(555\) 551-\d{4})/i', $string, $m, PREG_SET_ORDER
    )
    ? $m
    : []
    as $p
) {
    $p[1]  = strtolower($p[1]);
    $$p[1] = $p[2];
}

var_dump($main, $pharmacy); 
```

示例输出：

```
string(14) "(555) 551-0341"
string(14) "(555) 551-4304" 
```

# sql - 用什么代替多态关联？

> ID：13272776
> 
> 赞同：8
> 
> 时间：2012-11-07T15:26:58.023
> 
> 标签：sql, ruby-on-rails, postgresql, database-design, activerecord

因此，出于多种原因，多态关联被认为是糟糕的数据库设计，例如，多态 id 列上不能有外键，因此参照完整性消失了。

*而且，除非*子类型仅在行为上有所不同，否则STI 也被认为是不好的。

所以我的问题是**Rails / ActiveRecord**在以下情况下什么是较小的邪恶：

我需要允许我的用户创建多种类型实体的手工排序集合。

使用多态关联，架构看起来像这样：

```
-- collections
id, name, ...

-- exhibits
id, collection_id, exhibitable_type, exhibitable_id, position

-- photographs
id, ...

-- films
id, ...

-- paintings
id, ...

-- songs
id, ...

-- sculptures
id, ... 
```

我可以使用 STI 并有这样的东西：

```
-- collections
id, name, ...

-- exhibits
id, collection_id, artwork_id, position

-- artworks
id, type, <photograph columns>, <film columns>, <painting columns>, etc. 
```

但是，因为我的作品在数据上有所不同（而不仅仅是行为），所以现在我的作品表中都有 NULL。我还为我的对象引入了以前不存在的继承层次结构，我通常对此保持警惕，特别是当它的唯一目的是为数据库设计服务时。

STI 确实看起来至少查询和编码会更简单。

那么哪个是较小的邪恶？

然后，另一个选项是多表继承：

```
-- collections
id, name, ...

-- exhibits
id, collection_id, artwork_id, position

-- artworks
id

-- photographs
artwork_id, <photograph columns>

-- films
artwork_id, <film columns> 
```

这将摆脱 STI 的 NULL 问题，并降低表大小。我们仍然有我认为不是绝对必要的对象层次结构。但在我看来最大的问题是：Rails 不支持它。CITIER [gem](https://github.com/peterhamilton/citier/)看起来非常漂亮，它最近有提交，但它没有被广泛使用，所以我对在我的应用程序的基础中使用它持谨慎态度。我想我也可以考虑使用 Sequel 或其他支持 CTI 的 ORM。

说实话我认为我最喜欢多表继承解决方案

如果我不需要位置列，我只需使用单独的连接表，如`collections_photographs`, `collections_paintings`,`collections_films`等，但我确实需要手动排序。

因此，似乎选项是：

*   PA：失去参照完整性（在实践中是否总是使用 ActiveRecord 进行数据库访问？）
*   STI：有很多空值的大表
*   CTI/MTI：依赖一个没有被广泛使用的 gem

哪个是较小的邪恶，还有其他选择吗？我正在使用 Postgres。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T13:41:10.700

另一种选择是完全规范化您的数据库结构并使用视图将数据转换为更适合查询的形式。我不确定这对不同的 ORM 的效果如何，所以你的里程可能会有所不同。一般来说，我发现最好将数据模型建立在数据的真正结构上，因为这往往有助于维护。正确建模数据后，您可以创建视图和存储过程以方便地访问和操作数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T18:21:06.743

如果在 Postgres 中使用[分区表](http://www.postgresql.org/docs/current/static/ddl-partitioning.html)，则可以同时实现多态性和外键，因为表示不同分区的表可以分别表示不同的子类型，并且每个表都可以具有不同的约束集。

# android - 选择样式的选项始终默认为最后一个样式选项

> ID：13272777
> 
> 赞同：0
> 
> 时间：2012-11-07T15:27:00.040
> 
> 标签：android

我正在尝试创建一个允许用户选择背景颜色的选项。但是，当用户选择一个选项时，它默认为绿色。如果我卸载该应用程序，则背景颜色默认为绿色。如果我删除选项绿色，它默认为上面的颜色（蓝色）。我不知道我哪里出错了。任何建议将不胜感激。

```
public class UserMenu extends Activity implements OnClickListener {
Button preview;
Spinner spinnerColor;
SharedPreferences preferences;
public static String theme = "Blue";
    @Override
    public void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);

         preferences = getSharedPreferences("StylePref", 0);
         theme = preferences.getString("THEME", "Red");
        if(theme.equals("Red"));
        {
            setTheme(R.style.Theme_Red);
        }
        if(theme.equals("Blue"));
        {
            setTheme(R.style.Theme_Blue);
        }
        if(theme.equals("Green"));
        {
            setTheme(R.style.Theme_Green);
        }

        setContentView(R.layout.activity_user_menu);
        System.out.println(theme);
        spinnerColor = (Spinner) findViewById(R.id.spinnerColorMenu);
        preview = (Button)findViewById(R.id.previewButton);
           preview.setOnClickListener(this);

    }

    public void onClick(View v)

    {
        SharedPreferences.Editor preferencesEditor = preferences.edit();
        String bgColor = spinnerColor.getSelectedItem().toString();
        preferencesEditor.putString("THEME", bgColor);
        preferencesEditor.commit();

        if(bgColor.equals("Red"))
         {
            //Intent intent = getIntent();
            //intent.putExtra("Theme", "Red");
          finish();
          //startActivity(intent);
         }
         else if(bgColor.equals("Blue"))
         {
             Intent intent = getIntent();
            //intent.putExtra("Theme", "Blue");
           finish();
           startActivity(intent);
         }

         else if(bgColor.equals("Green"))
         {
             Intent intent = getIntent();
            //intent.putExtra("Theme", "Green");
           finish();
           startActivity(intent);
         }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T15:32:51.120

```
if(theme.equals("Green")); 
```

删除 if 块末尾的分号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T15:33:08.717

你有一些分号不合适。

```
 if(theme.equals("Red")); <--- Remove this ;
        {
            setTheme(R.style.Theme_Red);
        }
        if(theme.equals("Blue")); <--- Remove this ;
        {
            setTheme(R.style.Theme_Blue);
        }
        if(theme.equals("Green")); <--- Remove this ;
        {
            setTheme(R.style.Theme_Green);
        } 
```

# ruby-on-rails-3 - :remote => true/data-remote 在通过 ajax 加载的表单上

> ID：13272778
> 
> 赞同：4
> 
> 时间：2012-11-07T15:27:01.380
> 
> 标签：ruby-on-rails-3, jquery, unobtrusive-javascript

在我的 Rails 应用程序中，我有一个使用 jQuery 加载方法通过 Ajax 加载的表单。

```
function load_sales_form(product_id) {
    $("#sales_form").load("<%= url_for(:action => :show_sales_form) %>"/ + product_id);
} 
```

加载的表单有一个带有**:remote => true**选项的 form_for 标记，它确实将**data-remote="true"**属性添加到表单中。

但是，当用户单击提交标记按钮时，不会使用 Ajax 提交表单。如果表单以标准的非 ajax 方式加载，它工作正常，但是在文档准备好后通过 ajax 加载表单，不使用 ajax 提交，它作为标准表单提交。

从我目前的研究来看，这是因为 rails.js 文件（其中包含允许通过 ajax 提交数据远程表单的内容）没有将其功能应用于通过 ajax 加载的 html 内容。

是否可以强制 rails.js 文件将其功能应用于通过 Ajax 加载的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-05T17:12:23.423

这里的情况相同。我找到了解决方案。不是动态加载，而是`submit`事件的错误触发是我的原因。

我有一个带有和属性集的**引导模式。**这会导致 a 中的内容通过 AJAX 从.`data-target``href``.modal-body``href`

模式预先配备了保存按钮（在加载的表单之外），它像这样调用提交。

```
$modal.find("form.loaded_form").get(0).submit(); // INCORRECT 
```

前者只执行原始提交，但是：

```
$modal.find("form.loaded_form").trigger('submit'); // CORRECT 
```

成功了。

# dicom - 使用 dcmtk 制作 dicomdir 文件：使用“绝对”路径？

> ID：13272779
> 
> 赞同：1
> 
> 时间：2012-11-07T15:27:03.563
> 
> 标签：dicom

我想使用 dcmmkdir 创建一个 dicmdir 文件，其中文件路径与 dicomdir 路径不同。

例子：

> 存储在 Dicomdir 中的文件应存储在*`C:\Dicompath`*
> *`H:\tmp`*

```
dcmmkdir -v +r -Pmi +D H:\tmp\ +id C:\Dicompath\ 
```

有人知道我必须做什么才能获得视力吗？

谢谢

GGK

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T16:21:55.260

根据相关[dcmgpdir](http://support.dcmtk.org/docs/dcmgpdir.html)应用程序的文档，您需要使用选项指定*文件名*`+D`。为了获得最可靠的结果，我还认为您需要使用 option 指定（虚拟）文件名模式`+p`：

```
dcmmkdir -v +r -Pmi +D H:\tmp\DICOMDIR +id C:\Dicompath\ +p *.* 
```

# apache-flex - FLEX Stage 3D 中的像素大小

> ID：13272782
> 
> 赞同：5
> 
> 时间：2012-11-07T15:27:22.863
> 
> 标签：apache-flex, pixel, stage3d

我正在尝试使用 FLEX Stage 3D（使用 minko 引擎）做一些像素艺术。我想要 4 个“真实像素”的视口上的像素大小。

我想我不是很清楚，所以让我们举个例子。这就是我现在拥有的： ![在此处输入图像描述](../Images/d27b07720f6337bf30fd88681b6f7304.png)

这就是我想要的（所以它看起来像像素艺术）。 ![在此处输入图像描述](../Images/8c05be0568653d164528420e72906ecb.png) 关键是我完全不知道我应该怎么做。我尝试过重新调整视口的大小，但没有成功。

任何想法都会受到欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:22:01.850

如果你想实时做到这一点，你应该为此编写自己的着色器。我记得 minko 为此提供了很好的解决方案.. 一种着色器语言，所以你可以用 as3 编写它们，所以没有 AGAL。另一个想法是将视口抗锯齿设置为0。如果可以通过将抗锯齿设置为-5来完成，那么您的问题可以非常容易地解决:)

# ios - restkit 映射和验证响应

> ID：13272785
> 
> 赞同：1
> 
> 时间：2012-11-07T15:27:28.660
> 
> 标签：ios, restkit

这是我第一次使用 restkit，我对自动映射很感兴趣（以后可能还会对与 CoreData 的集成）。

目前，我设法执行 GET 请求并将响应映射到使用以下代码的简单对象：

```
RKObjectMapping *myMapping = [[self class] objectMappingForClass:[MyClass class]];
[myMapping mapKeyPath:@"Name" toAttribute:@"name"];
[myMapping mapKeyPath:@"Value" toAttribute:@"value"]; 

....

+ (RKObjectMapping*)objectMappingForClass: (Class)class
{
RKObjectMapping *mapping = [RKObjectMapping mappingForClass:class];
mapping.rootKeyPath = @"Data";

mapping.performKeyValueValidation = NO;
//  mapping.ignoreUnknownKeyPaths = YES;
mapping.setNilForMissingRelationships = YES;
mapping.setDefaultValueForMissingAttributes = YES;

return mapping;
} 
```

我以这种方式从服务器检索数据：

```
RKObjectMapping *defaultPropertiesMapping = [self.objectManager.mappingProvider objectMappingForClass:[MyClass class]];

RKObjectLoader *request = [self.objectManager loaderWithResourcePath:GetDefaultPropertiesURL];
request.objectMapping = defaultPropertiesMapping;

RKResponse *response = [request sendSynchronously]; 
```

问题是对于响应，服务器不使用 HTTP 状态，而是 JSON 有效负载中的一个属性（有效负载类似于： `{ "Status" : "OK", "Data" : { //real payload } }`

如何检查该状态属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T15:36:20.510

如果将对象加载器委托设置为发送请求的类，则可以实现以下方法：

```
- (void)objectLoader:(RKObjectLoader *)loader willMapData:(inout __autoreleasing id *)mappableData; {
  if([*mappableData valueForKey:@"Status"] isEqualToString:@"OK"){
    // Do something
  }
} 
```

然后，您可以检查状态的值并相应地处理响应。在对象映射到 Core Data 之前调用此方法。此外，请确保您的类采用 RKObjectLoaderDelegate 协议，否则这将不起作用。

如果您想从响应中删除数据，请使用以下方法：

```
[*mappableData removeObjectForKey:@"Data"]; 
```

从 *mappableData 中删除的任何键都不会进入对象映射器。

# php - 我的脚本是否容易受到 sql 注入的影响？

> ID：13272786
> 
> 赞同：-1
> 
> 时间：2012-11-07T15:27:30.210
> 
> 标签：php, sql-injection, sql-insert

首先感谢您阅读我的问题。

这几天，我看到我的网站上有很多“恶意”的 url 查询在运行，所以我担心我的 php 脚本是否容易受到 sql 注入的攻击。

我的 url 结构是：[http](http://mywebsite.com/post.php?id=7573) ://mywebsite.com/post.php?id= 7573 要从帖子中获取我需要的所有信息，我使用来自 URL 的帖子 ID。

要“清除”此 ID，我使用以下方法：

```
$id = mysql_real_escape_string ($id);
$safeID = intval(preg_replace("/[^0-9]/", "", $id));
$sql = "SELECT * FROM web_content WHERE state = '1' AND ID = '$safeID'";
$res = mysql_query($sql) or die (mysql_error());
$row = mysql_fetch_assoc($res);
......... 
```

请我需要知道发送到数据库的 safeID 是否真的“安全”。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T15:29:22.730

它可以像使用一样简单`intval($id)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T15:28:52.773

它是，但`preg_replace`不需要这样做，因为`mysql_real_escape_string`已经转义了所有“坏”字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T15:33:04.403

它是安全的。mysql_real_escape_string 和 preg_replace 甚至都不需要，因为 intval 只返回一个整数。

请注意，尽管 intval 在失败时返回 0。所以接收 $id 的 'bla' 与接收 '0' 是一样的。如果这对您的逻辑没有问题，请不要担心。

# asp.net-mvc-3 - 如何在 Knockout 中传回可见绑定的值？

> ID：13272789
> 
> 赞同：0
> 
> 时间：2012-11-07T15:27:42.300
> 
> 标签：asp.net-mvc-3, knockout.js

我正在尝试对淘汰赛视图模型进行一些重构。从模型对象中分离一些视图逻辑开始。

我想知道在使用可见绑定时是否有办法将值传回？

我目前的情况是我处于 Foreach 循环中。我想将 Knockout 正在迭代的对象传回给我在可见绑定上调用的方法：

```
data-bind="visible: SomeMethod" 
```

至

```
data-bind="visible: SomeMethod(object)" 
```

该方法显然是一个 ko.computed 函数，我试图将值传回给它，但没有成功。它总是未定义的。

```
var SomeMethod = ko.computed(function() {
.....
} 
```

如果这是可能的，有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T15:44:43.637

Knockout 在计算的 observable 中执行绑定以跟踪依赖关系。我不确定您的确切目标，但您可以在您的情况下使用正常功能。

```
var SomeMethod = function(item) {
     //do something with the item and return a value

}; 
```

根据您要传递的内容，您可能希望`$data`在绑定中使用，例如：

```
data-bind="visible: SomeMethod($data)" 
```

另一个更常用的选择是在每个返回适当值的项目上实际放置一个计算值。如果您传递给函数的值在项目本身上表示，那么您应该能够创建一个计算来干净地表示它的值。

# jquery - 多个旋转器的jQuery Cycle运行序列

> ID：13272792
> 
> 赞同：0
> 
> 时间：2012-11-07T15:27:52.220
> 
> 标签：jquery, setinterval, cycle

我试图在一个页面上有 3 个旋转器，它们按顺序运行但没有同步转换。

我编写了下面的代码，认为我可以设置一个间隔函数以每秒运行一次，记录它被访问的次数，并将结果模数为 10 以获得我的行动点。

然而，这并没有按预期工作。#rotate2 按预期开始，然后是#rotate3，但随后又回到#rotate2。事情变得非常糟糕，幻灯片一起消失了，等等。

我还尝试将模数提高到 30，并将动作点设置为 9、18 和 27。当我这样做时，#rotate2 在控制台回到 9 之前实际运行第二次。就好像超时选项没有得到尊重. 有什么建议么？

JS 小提琴链接：http: [//jsfiddle.net/6yGET/2/](http://jsfiddle.net/6yGET/2/)

```
jQuery(function ($) {
    $(document).ready(function(){

        $('#rotate1, #rotate2, #rotate3').cycle({
            timeout: 0,
            speed: 'fast'
        });

        var count = 0;

        setInterval(
            function(){
                count++;

                console.log(count % 10);

                switch(count % 10){
                    case 3: // rotator 2 change
                            $('#rotate2').cycle('next');
                            break;
                    case 6: // rotator 3 change
                            $('#rotate3').cycle('next');
                            break;
                    case 9: // rotator 1 change
                            $('#rotate1').cycle('next');
                            break;
                }
            },
            1000 // interval every second
        );

    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T16:59:56.227

与其说它忽略了您的超时，但似乎调用“下一个”正在开始循环以获取下一个。它的行为非常奇怪。我怀疑它可能只是不是为像这样手动分页而设计的。

我找到了一种方法来做你想做的事。这是使用“延迟”属性并分别初始化每个周期，并在其第一页上具有适当的延迟。

```
 $('#rotate2').cycle({
        timeout: 10000,
        speed: 'fast',
        delay: 3000-10000
    });
    $('#rotate3').cycle({
        timeout: 10000,
        speed: 'fast',
        delay: 6000-10000
    });
    $('#rotate1').cycle({
        timeout: 10000,
        speed: 'fast',
        delay: 9000-10000
    }); 
```

这个小提琴演示：http: [//jsfiddle.net/6yGET/4/](http://jsfiddle.net/6yGET/4/)

每个延迟的 -10000 的原因是因为否则第一次转换似乎发生在延迟+超时秒之后。

# expressionengine - 在控制面板中为“您的站点名称”配置覆盖

> ID：13272793
> 
> 赞同：5
> 
> 时间：2012-11-07T15:27:59.487
> 
> 标签：expressionengine

在控制面板中，“您的站点名称”的“管理”>“常规配置”中有一个设置。

此处输入的值显示在控制面板的右上角。

是否有配置覆盖来设置此值，以节省必须通过控制面板键入它？

谢谢，

斯蒂芬

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T16:23:59.687

```
$config['site_label'] = 'My Site Name'; 
```

以我的经验，虽然这种覆盖确实存在，但它在控制面板中不受尊重。基本上，配置文件中的任何内容都会被控制面板中的内容覆盖。不是它应该的方式，但是......

有关解决方法和详细说明，请参阅[此错误报告](http://expressionengine.com/bug_tracker/bug/15461/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T21:02:21.403

有一个错误阻止了它的工作。

但是，如果您真的需要该功能，还有一个附加组件可以修复它：http: [//devot-ee.com/add-ons/override_site_name](http://devot-ee.com/add-ons/override_site_name)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T15:37:19.190

尝试`$config['site_label'] = 'My Site Name';`

# android - Android sdk 和 ADT 20 Windows 64 上的 java.lang.NoClassDefFoundError

> ID：13272796
> 
> 赞同：1
> 
> 时间：2012-11-07T15:28:07.153
> 
> 标签：android, jar, adt

大家早上好。我在android中遇到了一个常见的问题，从库中导入jar。我正在尝试使用库来使用内部 api。我将 jar 复制到我的 android 项目的 libs 文件夹中， `Properties -> Java Build Path -> Libraries`然后添加了 jar。此外，我检查了选项卡中 jar 名称中的框`Order and Export`。我只有

`java.lang.NoClassDefFoundError exception`.

我几乎阅读了所有指向相同答案的帖子。将 jar 放在 libs 文件夹中并执行上面列出的步骤。没有任何效果。我在 Win 7 x64 上的 Indigo 版本上运行 ADT v 20。我对 java 或 java 架构不是很熟练，但这让我发疯。有人对此有不同的方法吗？我错过了什么？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T15:31:36.297

您只需将 jar 文件拖到 libs 文件夹中，而不是手动添加它。尝试删除jar文件

> 属性 -> Java 构建路径 -> 库

清理并重建项目。

说明：从 ADT 16 开始，加载库的过程已经自动化，并且不向后兼容旧方法。您实际上是在尝试使用添加库的两种方法，即两次添加库并破坏它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T12:13:55.073

转到“Properties->Java Build Path”内的“Order and Export”选项卡并选中未选中的框。它在这里工作......

# python - 使用 Python 获取 IP 托管服务提供商

> ID：13272803
> 
> 赞同：3
> 
> 时间：2012-11-07T15:28:25.800
> 
> 标签：python, ip, hosting

我有一个简单的 Python 脚本，可以获取域的 IP 并使用 Maxmind 查找国家/地区。我希望该脚本还可以获取托管该 IP/站点的网络托管公司。这可能吗，如果可以，怎么办？我已经搜索了这个网站和其他地方，但运气不佳。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T15:30:19.193

```
>>> import socket
>>> socket.gethostbyaddr("69.59.196.211") 
```

> （'stackoverflow.com'，['211.196.59.69.in-addr.arpa']，['69.59.196.211']）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-13T17:07:57.323

如果您想获取 IP（而不是 DNS 名称）后面的组织名称（AS 编号/名称）：

```
>>> import pygeoip
>>> ai = pygeoip.GeoIP('GeoIPASNum.dat', pygeoip.MEMORY_CACHE)
>>> ip = '1.1.1.1'
>>> asn = ai.org_by_addr(ip)
>>> print asn
AS15169 Google Inc. 
```

-- ab1

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-03T01:24:34.430

如果您对调用第 3 方服务的延迟没意见，您可以使用[http://ipinfo.io](http://ipinfo.io) API（我的服务），它会返回地理位置和公司信息，例如：

```
$ curl ipinfo.io
{
  "ip": "67.188.232.131",
  "hostname": "c-67-188-232-131.hsd1.ca.comcast.net",
  "city": "Mountain View",
  "region": "California",
  "country": "US",
  "loc": "37.4192,-122.0574",
  "org": "AS7922 Comcast Cable Communications, Inc.",
  "postal": "94043"
} 
```

这是一个使用优秀`requests`库的简单 python 示例：

```
>>> import requests
>>> r = requests.get('http://ipinfo.io/67.188.232.131/json')
>>> r.json['org']
u'AS7922 Comcast Cable Communications, Inc.'
>>> r.json['city']
u'Mountain View' 
```

有关更多详细信息，请查看[http://ipinfo.io/developers](http://ipinfo.io/developers)

# c# - 如何将整个对象传递给转发器中的函数？

> ID：13272805
> 
> 赞同：0
> 
> 时间：2012-11-07T15:28:28.297
> 
> 标签：c#, asp.net, repeater

在我的代码隐藏中，我有：

```
List<Products> products = 
rptr.Datasource = products;

protected string GetVariants(Product product)
{
  //
} 
```

在我的中继器中，我有：

```
<itemTemplate>

<li>  <%# Eval("Name") %>
<li>  <%# GetVariants(?????????????) %>

</itemTemplate> 
```

如何将产品对象传递给 GetVariants 方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T15:30:36.440

`(Product)Container.DataItem`应该做的伎俩

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T15:39:08.603

与其从你的标记页面回调一个方法，不如创建一个新的类来绑定你的中继器？这可以避免所有问题。

```
public class RepeaterItem
{
    public string Name;
    public string Variants;
} 
```

然后将Repeater与新的数据源绑定：

```
List<Products> products = //Get Products
List<RepeaterItem> repeaterItems = new List<RepeaterItem>();

foreach(var product in products)
{
    repeaterItems.Add(
        new RepeaterItem 
            { 
                Name = product.Name,
                Variants = GetVariants(product)
            });
}

rptr.DataSource = repeaterItems; 
```

# java - 我正在使用 bean 验证。在我的实体的 PerPersist 方法中，如果验证失败，如何停止持久化？

> ID：13272813
> 
> 赞同：0
> 
> 时间：2012-11-07T15:28:55.943
> 
> 标签：java, hibernate, jpa, bean-validation

这是我的 DAO 和实体。谢谢。

```
import javax.persistence.EntityManager;
import javax.persistence.EntityManagerFactory;
import javax.persistence.Persistence;

import com.westfieldgrp.beanvalidation.persistence.Car;
import com.westfieldgrp.beanvalidation.persistence.Driver;
import com.westfieldgrp.beanvalidation.persistence.Person;
import com.westfieldgrp.common.data.dao.DAOInterface;

public class CarDAO  {

    private EntityManager entityManager;

    public void save(Person convertedPerson, Driver convertedDriver, Car convertedCar) {
        EntityManager em = getEntityManager();
        //convertedPerson.setName(convertedPerson.getName()); // To test JPA validation
        Person savedPerson =  em.merge(convertedPerson);
        convertedDriver.setPersonId(savedPerson.getPersonId());
        Driver savedDriver = em.merge(convertedDriver);
        convertedCar.setDriverId(savedDriver.getPersonId());
        if("test".equals(convertedCar.getManufacturer())){
            convertedCar.setManufacturer(null);// To test JPA validation
        }
        em.persist(convertedCar);
        em.flush();
    }

    public EntityManager getEntityManager() {
            EntityManagerFactory emf = Persistence.createEntityManagerFactory("src_persistence");
            entityManager = emf.createEntityManager();
        return entityManager;
    }

    public void setEntityManager(EntityManager entityManager) {
        this.entityManager = entityManager;
    }
} 
```

实体：

```
import java.io.Serializable;
import java.util.Set;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.PrePersist;
import javax.persistence.Table;
import javax.validation.ConstraintViolation;
import javax.validation.Validation;
import javax.validation.Validator;
import javax.validation.ValidatorFactory;
import javax.validation.constraints.AssertTrue;
import javax.validation.constraints.Min;
import javax.validation.constraints.NotNull;
import javax.validation.constraints.Size;

/**
 * The persistent class for the CAR database table.
 * 
 */
@Entity
@Table(name="CAR")
public class Car implements Serializable {
    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue(strategy=GenerationType.AUTO)
    @Column(name="CAR_ID")
    private int carId;

    @Column(name="INSPECTION_PASSED")
    @AssertTrue(message = "The car has to pass the vehicle inspection first")//, groups = CarChecks.class)
    private boolean inspectionPassed;

    @Column(name="LICENSE_PLATE_NUMBER")
    @NotNull(message = "A license plate is required.")
    @Size(min = 2, max = 14, message="The license plate field must be 2-14 characters.")
    private String licensePlateNumber;

    @Column(name="MANUFACTURER")
    @NotNull(message = "A manufacturer is required.")
    private String manufacturer;

    @Column(name="REGISTERED")
    private boolean registered;

    @Column(name="SEAT_COUNT")
    @Min(value =2, message="The car must contain more than 1 seat.")
    private int seatCount;

    @Column(name="DRIVER_ID")
    private int driverId;

    @PrePersist
    public void testPrePersist(){
        System.out.println("@@@@PrePersist was called. " + manufacturer);
        ValidatorFactory factory = Validation.buildDefaultValidatorFactory();
        Validator validator = factory.getValidator();
        Set<ConstraintViolation<Car>> violations = validator.validate(this);
        for (ConstraintViolation<Car> violation : violations) {
               System.out.format("%s: %s%n",violation.getPropertyPath(), violation.getMessage());
        }
    }

    public Car() {
    }

    public int getCarId() {
        return this.carId;
    }

    public void setCarId(int carId) {
        this.carId = carId;
    }

    public boolean getInspectionPassed() {
        return this.inspectionPassed;
    }

    public void setInspectionPassed(boolean inspectionPassed) {
        this.inspectionPassed = inspectionPassed;
    }

    public String getLicensePlateNumber() {
        return this.licensePlateNumber;
    }

    public void setLicensePlateNumber(String licensePlateNumber) {
        this.licensePlateNumber = licensePlateNumber;
    }

    public String getManufacturer() {
        return this.manufacturer;
    }

    public void setManufacturer(String manufacturer) {
        this.manufacturer = manufacturer;
    }

    public boolean getRegistered() {
        return this.registered;
    }

    public void setRegistered(boolean registered) {
        this.registered = registered;
    }

    public int getSeatCount() {
        return this.seatCount;
    }

    public void setSeatCount(int seatCount) {
        this.seatCount = seatCount;
    }

    public void setDriverId(int diverId) {
        this.driverId = diverId;
    }

    public int getDriverId() {
        return driverId;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T16:46:37.520

如果您在 pre persist 上使用基于生命周期的验证，则 persist 将自动失败并抛出*ConstraintViolationException*。如果验证失败，无需采取进一步行动来取消持久化。您只想以适当的方式处理异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T15:51:42.720

您可以抛出包含所有错误或其他运行时异常的 javax.validation.ConstraintViolationException。

```
ConstraintViolationException(String message,<ConstraintViolation<?>> constraintViolations) 
```

查看 Hibernate 中的 BeanValidationEventListener，因为它的作用相同。 [https://github.com/hibernate/hibernate-orm/blob/master/hibernate-core/src/main/java/org/hibernate/cfg/beanvalidation/BeanValidationEventListener.java](https://github.com/hibernate/hibernate-orm/blob/master/hibernate-core/src/main/java/org/hibernate/cfg/beanvalidation/BeanValidationEventListener.java)

# oracle - Oracle Apex 计算报告中列的平均值

> ID：13272816
> 
> 赞同：0
> 
> 时间：2012-11-07T15:28:59.750
> 
> 标签：oracle, report, oracle-apex

我有经典报告，它是每日数据的汇总。报告预定义日期的当前列表作为列表。创建列的总计很容易，但是可以创建列的 AVG 吗？如果不是这个问题的最有效和最优雅的解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T18:01:45.710

一种选择是使用 ROLLUP 之类的方法计算报表的 SQL 中的平均值。

另一种选择是使用分析函数计算平均值（例如 AVG(column1) OVER (GROUP BY grouping_column) 作为 column_avg，隐藏此列但然后在页脚格式部分中引用它（“当显示断行时，显示此文本在打破列之前”）。

您还可以执行 UNION 查询，并在第二个 SQL 语句中计算与您正在平均的列相同的列位置的平均值。然后确保您有一列确定它来自的 SELECT。将此列用作报告模板中的条件（列模板 1 条件和列模板 2 条件）

# node.js - 在 Mongoose 中将两个 OR 查询与 AND 组合

> ID：13272824
> 
> 赞同：111
> 
> 时间：2012-11-07T15:29:29.037
> 
> 标签：node.js, mongodb, mongoose

我想在 Monoose 中将两个 OR 查询与 AND 结合起来，就像在这个 SQL 语句中一样：

```
SELECT * FROM ... WHERE (a = 1 OR b = 1) AND (c=1 OR d=1) 
```

我在仅从主应用程序获取模型对象的 NodeJS 模块中进行了尝试：

```
/********** Main application ***********/
var query = MyModel.find({});
myModule1.addCondition(query);
myModule2.addCondition(query);
query.exec(...)

/************ myModule1 ***************/
exports.addCondition = function(query) {
  query.or({a: 1}, {b: 1});
}

/************ myModule2 ***************/
exports.addCondition = function(query) {
  query.or({c: 1}, {d: 1});
} 
```

但这不起作用，所有 OR 条件将像以下 SQL 语句一样连接在一起：

```
SELECT * FROM ... WHERE a = 1 OR b = 1 OR c=1 OR d=1 
```

如何在 Mongoose 中将 and 的两个条件与 AND`myModule1`结合起来？`myModule2`

* * *

## 回答 #1

> 赞同：245
> 
> 时间：2012-11-07T15:56:52.743

直接创建查询对象可能是最简单的：

```
 Test.find({
      $and: [
          { $or: [{a: 1}, {b: 1}] },
          { $or: [{c: 1}, {d: 1}] }
      ]
  }, function (err, results) {
      ...
  } 
```

但是您也可以使用[`Query#and`](http://mongoosejs.com/docs/api.html#query_Query-and)最近 3.x Mongoose 版本中提供的帮助程序：

```
 Test.find()
      .and([
          { $or: [{a: 1}, {b: 1}] },
          { $or: [{c: 1}, {d: 1}] }
      ])
      .exec(function (err, results) {
          ...
      }); 
```

# visual-studio-2010 - Visual Studio 2010 - 使自定义构建脚本始终运行

> ID：13272827
> 
> 赞同：1
> 
> 时间：2012-11-07T15:29:48.660
> 
> 标签：visual-studio-2010, batch-file

我有一个每次构建时都想运行的 .bat 文件，它会生成构建版本。

我在“自定义构建步骤”中添加了它，例如：

```
call version.bat > $(SolutionDir)/version.h 
```

和“输出”：

```
$(SolutionDir)/version.h 
```

它在 BuildCompile 之前执行此操作。

但它只运行一次......我想它会以某种方式检查 version.h 是否发生了变化或什么 - 但我希望这个脚本每次都运行！我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T20:25:57.137

使用预构建事件而不是自定义构建步骤

# c++ - 如何结合使用 std::bind 和 std::shared_ptr

> ID：13272831
> 
> 赞同：12
> 
> 时间：2012-11-07T15:30:02.610
> 
> 标签：c++, c++11, std, shared-ptr, stdbind

我需要经常做这样的事情：

```
AsyncOperation * pAsyncOperation = new AsyncOperation();
auto bindOperation = std::bind(&AsyncOperation::operator(), std::ref(*pAsyncOperation));
std::thread thread(bindOperation );
thread.join(); 
```

`AsyncOperation`作为任何自定义类实现（`operator()` *也称为函数对象）*。

是否可以指示`std::bind`使用 a`std::shared_ptr`而不是 a `std::ref`？这将防止内存泄漏，而我不需要保持对 的引用`pAsyncOperation`，并且会在线程结束时自动删除`AsyncOperation`，即这个异步任务的结束。

编辑：我并不总是可以访问 std::thread，线程库可以是 boost::thread 甚至任何其他平台相关线程。因此，无法访问 std::async。

我的主要问题是在 std::bind 中有所有权的概念。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-07T15:51:24.923

这有效：

```
struct AsyncOperation {
    void operator()()
    {
        std::cout << "AsyncOperation" << '\n';
    }
};

int main() {
  std::shared_ptr<AsyncOperation>  pAsyncOperation = std::make_shared<AsyncOperation>();
  auto bindOperation = std::bind(&AsyncOperation::operator(), pAsyncOperation);
  std::thread thread(bindOperation );
  thread.join();
} 
```

见： http: [//liveworkspace.org/code/4bc81bb6c31ba7b2bdeb79ea0e02bb89](http://liveworkspace.org/code/4bc81bb6c31ba7b2bdeb79ea0e02bb89)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-07T15:44:44.607

需要`AsyncOperation`动态分配吗？如果没有，我会这样做：

```
auto f = std::async([]{ AsyncOperation()(); });
f.wait(); 
```

除此以外：

```
std::unique_ptr<AsyncOperation> op(new AsyncOperation);
auto f = std::async([&]{ (*op)(); });
f.wait(); 
```

您当然可以使用`std::thread`，但它会提供更多问题（即其他线程中的异常处理）。`std::bind`也有它自己的问题，你可能会更好地结束一个 lambda。

如果您确实需要将所有权传递给其他线程，您也可以这样做：

```
std::unique_ptr<AsyncOperation> op(new AsyncOperation);
auto f = std::async([&](std::unique_ptr<AsyncOperation> op){ (*op)(); }, std::move(op));
f.wait(); 
```

因为 lambdas 还不支持移动类型捕获。

我希望这会有所帮助。

# ruby - Ruby 中的链表

> ID：13272833
> 
> 赞同：2
> 
> 时间：2012-11-07T15:30:13.903
> 
> 标签：ruby, activerecord, linked-list

我有`Parent`和`Child`模型。Parent `has_many :children`，应该以正确的顺序保存在数据库中。我决定将其保存为带有 field 的链表`next_id`。我知道，有`acts_as_list`宝石，但它节省了`position`场地。不是更多的sql-heavy解决方案吗？

不过，您有什么想法我该如何构建它吗？我想保存[SRP](http://en.wikipedia.org/wiki/Single_responsibility_principle)，所以所有使用 list 的操作都应该在`Child`模型中。`Parent`应该已经订购了`children`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T15:52:41.027

将列表中的所有元素与单个父项相关的优点是您可以一次获取并订购它们：

```
SELECT * FROM list_items WHERE parent_id=? ORDER BY position 
```

你不能用链表结构来做到这一点。相反，您必须一次最多获取两个前一个和下一个条目，并且必须以递归方式对列表中的所有其他记录重复此过程。检索 1000 多个项目的列表是不切实际的。

# jquery - 如何在流畅的 Twitter Bootstrap 布局中为固定位置侧边栏创建自定义滚动条？

> ID：13272837
> 
> 赞同：1
> 
> 时间：2012-11-07T15:30:28.043
> 
> 标签：jquery, css, twitter-bootstrap

我有一个文章页面，它使用基于 Twitter Bootstrap 的流畅布局。

当顶部导航栏位于浏览器窗口的顶部时（因此它会粘住），顶部导航栏会使用以下技术固定：

[http://www.bennadel.com/blog/1810-Creating-A-Sometimes-Fixed-Position-Element-With-jQuery.htm](http://www.bennadel.com/blog/1810-Creating-A-Sometimes-Fixed-Position-Element-With-jQuery.htm)

使用上述技术并使用此线程中的答案，侧边栏也同时变得固定：

[修复了流体推特引导程序 2.0 中的侧边栏导航](https://stackoverflow.com/questions/9350818/fixed-sidebar-navigation-in-fluid-twitter-bootstrap-2-0)

一旦导航栏位于浏览器窗口的顶部，滚动条就会按预期显示在侧边栏的右侧，但是我想创建一个类似于这些示例的自定义滚动条：

[http://readwrite.com/2012/11/07/how-technology-will-fare-in-president-obamas-second-term](http://readwrite.com/2012/11/07/how-technology-will-fare-in-president-obamas-second-term)

[http://thenextweb.com/apple/2012/11/03/apple-hides-samsung-apology-on-its-uk-site-so-it-cant-be-seen-without-scrolling/](http://thenextweb.com/apple/2012/11/03/apple-hides-samsung-apology-on-its-uk-site-so-it-cant-be-seen-without-scrolling/)

我尝试过使用类似的技术

[http://manos.malihu.gr/jquery-custom-content-scroller/](http://manos.malihu.gr/jquery-custom-content-scroller/)

但没有成功。也因为顶部导航栏是固定的，而且他的高度，固定侧栏的滚动条由于属性`50px`的原因延伸到了底部的视野之外。`"top:50px;"`

这是我创建的演示：

[http://jsfiddle.net/iagdotme/uvp8t/](http://jsfiddle.net/iagdotme/uvp8t/)

如何创建 The Next Web 或其他示例中使用的自定义滚动条效果并解决高度问题？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T22:52:12.123

看看我在这篇文章（[视差侧边栏滚动](https://stackoverflow.com/questions/13078800/parallax-sidebar-scrolling/15168139#15168139)）上的回答，它重现了您在 readwrite.com 上看到的侧边栏滚动行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T02:58:02.527

TNW 使用了一个名为[Tiny Scrollbar](http://baijs.nl/tinyscrollbar)的插件，而 ReadWrite 使用了[jScrollPane](http://jscrollpane.kelvinluck.com)。您是否尝试过其中任何一个？请考虑使用其中之一在 jsFiddle 上进行一些处理，然后如果高度问题仍然存在，请重新发布。

一旦你让 jScrollPane 工作，这里有一些 CSS 可以让你开始使用自定义滚动条：

```
.scroll-pane
{
    width: 100%;
    height: 200px;
    overflow: auto;
}

.jspVerticalBar, .jspTrack {
    background:none;
}

.jspDrag {
   background:#ccc;
   border-radius:10px;
} 
```

在以下小提琴中使用：http: [//jsfiddle.net/technotarek/m7eKD/](http://jsfiddle.net/technotarek/m7eKD/)

# javascript - 在 mongodb 模式中使用 ensureIndex 使用 mongoose

> ID：13272839
> 
> 赞同：11
> 
> 时间：2012-11-07T15:30:30.697
> 
> 标签：javascript, mongodb, indexing, mongoose

我想调用`ensureIndex`，`authorName`命令是什么，我应该把它放在这段代码的什么地方？

```
var mongoose = require('mongoose');

// defines the database schema for this object
var schema = mongoose.Schema({
    projectName : String,
    authorName : String,
    comment : [{
        id : String,                                    
        authorName : String,
        authorEmailAddress : { type : String, index : true }    
    }]
});

// Sets the schema for model
var ProjectModel = mongoose.model('Project', schema);

// Create a project
exports.create = function (projectJSON) {
    var project = new ProjectModel({
        projectName : projectJSON.projectName,
        authorName : projectJSON.authorName,    

        comment : [{
            id : projectJSON.comments.id,                                           
            authorName : projectJSON.comments.authorName,                           
            authorEmailAddress : projectJSON.authorEmailAddress
        });

        project.save(function(err) {
            if (err) {
                console.log(err);
            } else{
                console.log("success");
            }
        });
    });
} 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-07T15:38:39.407

您不`ensureIndex`直接调用，您指示该字段应在您的架构中建立索引，如下所示：

```
var schema = mongoose.Schema({
  projectName : String,
  authorName : { type: String, index: true }
}); 
```

根据该定义，`ensureIndex`当您通过调用注册模型时，Mongoose 会为您`mongoose.model`调用。

要查看`ensureIndex`Mongoose 正在进行的调用，请通过将以下内容添加到您的代码中来启用调试输出：

```
mongoose.set('debug', true); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-11-14T13:14:58.127

您可以使用以下语句：

```
mongoose.connection.collections['my_collection'].ensureIndex({ "key": 1 }, { "unique": true }, callback); 
```

例如，您想做一些集成测试，因此您需要快速删除您的集合。在这种情况下，即使选项`autoIndex`设置为，猫鼬也不会在运行时再次设置索引`true`。在这种情况下，这个答案可能很有用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-05-13T03:12:37.390

您可以调用 Schema#index 方法来创建索引

```
let urlSchema = new Schema({
    url: String,
    status: Number
  }
);
urlSchema.index({ url: 1 }, { unique: true, background: true, dropDups: true }); 
```

您可以收听创建索引事件。

```
let UrlModel = mongoose.model('url', urlSchema);
UrlModel.on('index', function(error) {
  if (error && error.message) {
    console.log(`Url collection create index error:${error.message}`);
  }
}); 
```

注意：创建索引的过程是异步的，所以创建唯一索引时，不能插入重复数据。否则创建索引将失败；

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-24T19:52:13.720

首先在 authorName 字段上定义索引，如果由于某些要求而手动调用 ensureIndex 则必须将**autoIndex 设置为 false**。这就是您的架构的样子：

```
var schema = mongoose.Schema({
    projectName : String,
    authorName : {type : String, index : true}
    comment : [{
        id : String,                                    
        authorName : String,
        authorEmailAddress : { type : String, index : true }    
    }]
}, {
     // Turn-off auto indexing, we manually need to trigger indexing 
     autoIndex : false 
}); 
```

根据要求，您可以在使用此模式创建的模型上调用 ensureIndexes 方法，即 **ProjectModel.ensureIndexes();**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-13T15:25:32.840

很简单，在你的 MongoDB 连接中添加

```
mongoose.connect(
  process.env.ENVIRON === "production"
    ? process.env.MONGODB_REMOTE
    : process.env.MONGODB_LOCAL,
  {
    useNewUrlParser: true,
    useUnifiedTopology: true,
    autoCreate: true,
    autoIndex: true, // This enables indexing for you

  },
  () =>
    console.log(
      `Connected to ${
        process.env.ENVIRON === "production"
          ? "Production DB"
          : "Development DB"
      }`
    )
); 
```

# security - 为什么 CA 证书可以有很长的到期时间，但他们签署的证书却不行？

> ID：13272843
> 
> 赞同：1
> 
> 时间：2012-11-07T15:30:32.327
> 
> 标签：security, certificate, x509

[我早些时候查看了https://www.google.co.uk/](https://www.google.co.uk/)后面的证书，并注意到，通常情况下，证书将在一年后到期，到 2013 年。

我查看了链条，发现根证书（GeoTrust 证书）的有效期为 20 年，直到 2018 年才到期。

这似乎很奇怪，因为在我看来，签署证书的完整性似乎比他们签署的证书更重要。为什么根权限可以长期存在，但他们签署的证书往往有很短的到期时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T15:43:11.377

根签名证书的私钥通常比服务器证书的私钥得到更好的保护。通常，单独的服务器证书会以未加密的方式存储在相关的 Web 服务器上，因此服务器可以在重新启动后恢复，而无需人工干预。但是签名密钥将被更安全地保存，通常是密码保护，而不是在面向互联网的服务器上，因为如果签名密钥被泄露，它颁发的所有证书都变得毫无价值。

对私钥保护较差的证书使用较短的到期时间基本上是一种损害限制机制，以防私钥被泄露。

# java - 为应用程序创建一个 jar 文件以运行

> ID：13272844
> 
> 赞同：0
> 
> 时间：2012-11-07T15:30:33.567
> 
> 标签：java, jar

我有两个项目，一个生成消息并通过套接字连接将它们发送到服务器，另一个项目位于服务器端，使用消息并将它们发送到队列。无论如何，而不是先启动发件人项目然后启动我的服务器端项目，将第一个项目导出到 jar 文件，然后以某种方式调用 jar 文件并让它开始发送？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T16:32:53.760

如果你想通过代码调用你的 jar 文件，就是这样 -

```
Process p = Runtime.getRuntime().exec("cmd /c java -jar another.jar"); 
```

# web-applications - 无法在 Ubuntu 上将应用程序上传到 Tomcat7

> ID：13272847
> 
> 赞同：0
> 
> 时间：2012-11-07T15:30:46.057
> 
> 标签：web-applications, ubuntu, upload, tomcat7, file-permissions

我正在尝试连接到使用 FileZilla 设置的 Ubuntu 服务器。我的测试服务器具有 Tomcat7 的 aptitude 版本，因为有人建议我坚持使用 Ubuntu 软件包以确保安全。Tomcat 为用户和所有者锁定，`tomcat7:tomcat7`防止写入 webapp 目录。将自己添加到 tomcat7 组可以解决这个问题吗？因为当我使用我的管理员帐户通过 Filezilla 登录时，我无法将 webapps 上传到此目录。这样做的正确方法是什么？`sudo useradd - a -G tomcat7 myname`即使我是这台机器上的唯一用户和管理员，我也无法使用 group 将自己添加到 tomcat 7 组中。使用的正确命令是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T15:34:06.497

我在 ubuntu 12.10 上使用的方法是使用符号链接（使用 apt-get 安装了 tomcat7）。

```
cd /var/lib/tomcat7/webapps/
sudo ln -s /home/myuser/myapps/mywebapp-0.1.0-SNAPSHOT.war ./mywebapp.war 
```

它可以工作，并且很容易使用脚本进行部署。之后，我在我的开发工作站上使用 scp 脚本更新 sym 链接的战争文件，然后 tomcat 选择更改的战争文件并重新部署它。如果您想要原子更新，只需添加一个新的符号链接中间，并在上传过程后更新符号链接。

# regex - vi VIM 如何将行附加到自身？

> ID：13272855
> 
> 赞同：4
> 
> 时间：2012-11-07T15:31:04.430
> 
> 标签：regex, vim, replace, append, match

我想将行的全部内容（不包括结束换行符）附加到行本身。我在这里看到了这个解决方案`:%s/$/\*/g`： [如何在 Vim 的每一行末尾添加一个字符串？](https://stackoverflow.com/questions/594448/how-can-i-add-to-the-end-of-each-line-in-vim)

但它将字符 * 附加到行中。我尝试了两者`:%s/$/*/g`，`:%s/$/\*/g`但结果相同。

我正在使用 VIM - Vi 改进版 7.3.46

PS：看来，作为新用户，我不允许在此处发表此问题作为评论。谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-07T23:31:12.217

再一次，命令模式被大大低估了：

```
:t.|-j 
```

完毕

**更新**我在另一条评论中看到您想对某个范围执行此操作。这也很容易。见下文

这基本上是 Ex 等价于`yyPJx` **except**

1.  它不会破坏任何寄存器
2.  不会移动“0-”9 寄存器
3.  不会影响当前搜索和/或搜索历史（如`:%s`基于答案）
4.  可以通过执行立即重复`@:`- 没有宏，没有映射:)
5.  将导致原子撤消（而该`yyPJx`方法将导致 3 个单独的撤消步骤）

解释：

*   `:t`是同义词`:copy`
*   `:j`简称`:join`
*   `:-j`是 的缩写`:-1join`，意思是：将上一行与它的后继连接起来

注意：如果您想保留前导空格（例如`yyPgJx`代替`yyPgJx`），请使用：

```
:t.|-j! 
```

**使用视觉选择类型**更新重复****

 **```
:'<,'>g/^/t.|-j 
```

对视觉选择中的每一行重复它。（当然`:'<,'>`是在可视模式下自动插入）。这种方法的另一个好处是您可以轻松地指定要复制哪些行的过滤器：

```
:g/foo/t.|-j 
```

将“复制”当前缓冲区中包含“foo”的所有行（请参阅windo、bufdo、argdo 以将其扩展到大量缓冲区而不会出汗）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-07T15:37:01.897

您可以使用此替换：

```
:s/^.*$/&& 
```

*   `^.*$`表示“无论 ( `.*`) 位于行的开头 ( `^`) 和结尾 ( `$`) 之间”。
*   `&`表示匹配的文本，所以我们用它自己替换整行，然后再替换它自己。

***编辑***

Ingo 的评论很到位：`:s/.*/&&`用更少的打字做同样的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T15:34:32.433

转到要附加到自身的行。然后输入： `0y$$p`

解释：
0 - 到行
首 y$ - 将光标处的所有内容拉到行尾
$ - 到行尾
p - “放置” yank 缓冲区

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-07T15:35:04.873

你为什么不试试：`yyPJx`。

这会将当前行的副本附加到其自身。

你甚至可以：

`noremap ,l yyPJx`

如果你`.vimrc`想映射一个击键来完成这个。**

# java - 从计算中收到错误的结果

> ID：13272859
> 
> 赞同：1
> 
> 时间：2012-11-07T15:31:17.030
> 
> 标签：java, android, eclipse

> 最大心率是最大运动时获得的最高心率。最大心率的差异取决于年龄和性别。有一些简单的方法可以测量您预测的最大心率，例如公式 220 - 您的年龄 = 男性的预测最大心率。例如，一个 40 岁的男性预测的最大心率是 180 次/分钟。

该程序需要使用以下公式计算男性的最大心率：220-他们的年龄=最大心率和：212-他们的年龄=女性的最大心率。用户必须能够输入他们的年龄、选择他们的性别以及选择他们的静息心率。然后程序必须使用这个公式来确定您的目标心率：

目标心率=[（最大心率-静息心率）×80%]

程序必须能够显示用户的最大心率、静息心率和目标心率。

但由于某种原因，当我运行我的程序时，我收到它似乎没有完全接受输入，并在单击男性按钮时给了我一个错误的答案，它给了我男性 179.0 和女性 169.0 的答案。

我看了一遍又一遍，似乎无法弄清楚这个逻辑错误。这是我的代码。

```
public class MainHMR extends Activity implements View.OnClickListener {

Button chkCmd;
CheckBox Male, Femail;
EditText age, RestHeart;
TextView MaxHeart, TargetHeart;

int m = 220;
int f = 212;
int AgeResult =0, RestResultFinal =0, TargetHeartFinal =0;
double MaleResult, FemailResult;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main_hmr);
    Initilise();
    format();
    Male.setOnClickListener(this);
    Femail.setOnClickListener(this);
    chkCmd.setOnClickListener(this);

}

private void Initilise() {
    // TODO Auto-generated method stub
    /* Button */chkCmd = (Button) findViewById(R.id.bResults);
    /* checkBox */Male = (CheckBox) findViewById(R.id.cbM);
    /* checkBox */Femail = (CheckBox) findViewById(R.id.cbF);
    /* EditText */age = (EditText) findViewById(R.id.etAge);
    /* EditText */RestHeart = (EditText) findViewById(R.id.etRestHeart);
    /* TextView */TargetHeart = (TextView) findViewById(R.id.etTargetHeard);
}

private void format() {
    // TODO Auto-generated method stub

    String change = age.getText().toString();
    AgeResult = 0; // set it to 0 as the default
    try {
        AgeResult = Integer.parseInt(change);
        System.out.println(AgeResult);
    }
    catch (NumberFormatException e){}

    String changeTwo = RestHeart.getText().toString();
    RestResultFinal = 0; // set it to 0 as the default
    try {
        RestResultFinal = Integer.parseInt(changeTwo);
        System.out.println(RestResultFinal);
    }
    catch (NumberFormatException e){}
}

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub

    switch(v.getId()){
    case R.id.bResults:
    if (Male.isChecked()) {
        int result = m - AgeResult;
        MaleResult = ((result - RestResultFinal) * 0.8);
        String finalResult = Double.toString(MaleResult);
        TargetHeart.setText(finalResult);
    } else if (Femail.isChecked()) {
        int result = f - AgeResult;
        FemailResult = (int) ((result - RestResultFinal) * 0.8);
        String finalResult = Double.toString(FemailResult);
        TargetHeart.setText(finalResult);
        break;
    }

}
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T15:35:07.003

好吧，如果你得到男性的 176 和女性的 169，我可以理解......但不是 179。你确定吗？

我*怀疑* `Integer.parseInt`你失败了 - 但你不能说，因为这个：

```
catch (NumberFormatException e){} 
```

*永远不要*只捕获异常并完全忽略它。*至少*在那里登录。

你对两个输入都做同样的事情。如果任一解析操作失败，您为什么要继续（并提供虚假数据）？当然你应该在那个时候停下来，并告诉用户他们应该修正他们的输入。

接下来是您执行算术的方式。你用*整数*算术做这一切，但是然后使用`Double.toString`- 为什么？那只会给你一个以`.0`. 如果您想*实际*获得非整数结果，则需要以浮点数执行算术。例如

```
// I've changed the names of some variables to comply with conventions
double maximumRate = MALE_MAXIMUM_RATE_LIMIT - parsedAge;
double targetRate = (maximumRate - parsedRestingRate) * 0.8; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-27T20:40:52.333

简单尝试使用 JOptionPane

```
公共类心率{

    私有字符串 fname；
    私有字符串 lname；
    私人 int 月，月 1；
    私人 int 日，第 1 天；
    私人 int 年，年 1；

    公共心率（int mn，int dy，int yr）
    {
        月=mn;
        一天=一天；
        年=年；
    }

    public void setFname（字符串优先）
    {
        fname=第一；
    }

    公共无效 setLname（字符串最后）
    {
        lname=最后一个；
    }

    公共无效 setMonth(int mn)
    {
        月1=mn；
    }

    公共无效 setDay(int dy)
    {
        第1天=天；
    }

    公共无效 setYear(int yr)
    {
        第 1 年 = 年；
    }

    公共字符串 getFname()
    {
        返回 fname；
    }

    公共字符串 getLname()
    {
        返回 lname;
    }

    公共 int getMonth()
    {
        返回月份1；
    }

    公共 int getDay()
    {
        返回第 1 天；
    }

    公共 int getYear()
    {
        回归年份；
    }
    公共 int getYear1()
    {
        返回年份1；
    }

    公共 int personAge()
    {

        年龄;
        年龄=getYear()-getYear1();

        返回年龄；
    }

    公共 int 最大心率（）
    {
        最大整数；
        最大值=220-personAge();

        返回最大值；
    }

    公共字符串目标HR（）{

        整数小时最大值；
        int hrMin;

        hrMax=(最大心率()*85)/100;
        hrMin=(最大心率()*50)/100;
        String message=String.format("目标心率范围：%d~%d", hrMin,hrMax);
        返回消息；

    }

}

//主要的

导入 java.util.Calendar；

导入 javax.swing.JOptionPane；
公共类 HeartRateTest {

    公共静态无效主要（字符串 [] 参数）
    {

        现在日历 = Calendar.getInstance();   
        int cyear = now.get(Calendar.YEAR);  
        int cmonth=now.get(Calendar.MONTH);
        int cdate=now.get(Calendar.DATE);

        HeartRates myHeart=new HeartRates(cmonth,cdate,cyear);

        String fname=JOptionPane.showInputDialog("输入你的名字");
        String lname=JOptionPane.showInputDialog("输入您的姓氏");

        String mn=JOptionPane.showInputDialog("输入您的出生月份(输入数值)");
        String dy=JOptionPane.showInputDialog("输入你的生日");
        String yr=JOptionPane.showInputDialog("请输入您的出生年份");

        int 月=整数.parseInt(mn);
        int day=Integer.parseInt(dy);
        int year=Integer.parseInt(yr);

        我的心.setFname(fname);
        myHeart.setLname(lname);
        myHeart.setMonth(月);
        我的心.setDay(天);
        myHeart.setYear(年);

        int age=myHeart.personAge();
        int maxHR=myHeart.maximumHeartRate();
        字符串消息=myHeart.targetHR();

        String msg=String.format("姓名: %s %s\n年龄: %d\n最大心率: %d\n%s",fname,lname,age,maxHR,message);

        JOptionPane.showMessageDialog(null,msg);

    }   

```

# objective-c - 水平 UIScrollView 内部有垂直 UIScrollViews - 滚动外部水平视图时如何防止滚动内部滚动视图？

> ID：13272860
> 
> 赞同：6
> 
> 时间：2012-11-07T15:31:18.713
> 
> 标签：objective-c, ios, uiscrollview, hittest

找不到解决方案。

我正在构建一个具有大滚动视图的应用程序，它具有分页（水平）。在这个滚动视图内部，有一个 UIView 的网格，每个内部都有一个 UIScrollview，带有垂直滚动视图。

现在，重点是，当我分页我的“大”滚动视图时，有时触摸会卡在网格 UIView 内的一个小滚动视图中。

我不知道如何避免它 - 尝试使用 hitTest 技巧但仍然找不到答案。

希望我清楚...

谢谢你的帮助。

编辑：

这是更大的滚动视图：

```
@implementation UIGridScrollView
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    self.pagingEnabled;
    return self;
}
@end 
```

现在，在这个 UIGridScroll 视图中，我将这个视图添加为子视图：

```
@implementation UINoteView
{
IBOutlet UIScrollView *_innerScrollView; // this scrollview frame is in the size of the all UINoteView
}

- (void)awakeFromNib
{
    _innerScrollView.contentSize = CGSizeMake(_innerScrollView.frame.size.width, _innerScrollView.frame.size.height+50.0f);
}
@end 
```

分页效果很好，内部滚动视图效果很好，但是当我分页较大的笔记视图时，我的手指“卡住”在 _innerScrollView 中。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T05:47:24.153

@stanislaw，我刚刚在 iPhone 设备上尝试了您建议的解决方案。

我看到了你的问题。

您的代码确实可以防止偶尔滚动垂直视图，但我认为这不是同时进行手势识别的工作 - 注释您为内部视图提供的整个代码并使用外部滚动视图的代码并进行以下修改：

```
@interface OuterHorizontalScrollView : UIScrollView ...
@property (weak) InnerVerticalScrollView *currentActiveView; // Current inner vertical scroll view displayed.
@end

@implementation OuterHorizontalScrollView
- (BOOL)gestureRecognizerShouldBegin:(UIGestureRecognizer *)gestureRecognizer {
    if (self.currentActiveView.dragging == NO) {
        self.currentActiveView.scrollEnabled = NO; // The presence of this line does the job
    }
    return YES;
}

- (void)scrollViewDidEndDragging:(PlacesScrollView *)scrollView willDecelerate:(BOOL)decelerate {
    self.currentActiveView.scrollEnabled = YES; // This is very likely should be done for all subviews, not only a current.
}    
@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T23:10:04.213

以下是我的做法：

在垂直滚动视图中使用**shouldRecognizeSimultaneouslyWithGestureRecognizer**（感谢@omz！）和自定义滑动手势识别器（参见类似的问题

[水平滚动 UIScrollView 与垂直平移手势](https://stackoverflow.com/questions/12694584/horizontal-scrolling-uiscrollview-with-vertical-pan-gesture)），我有以下设置：

```
@interface UIScrollView (GestureRecognition) <UIGestureRecognizerDelegate>
@end

@interface OuterHorizontalScrollView : UIScrollView ...
@property (weak) InnerVerticalScrollView *currentView; // Current inner vertical scroll view displayed.
@end

@implementation OuterHorizontalScrollView
- (BOOL)gestureRecognizerShouldBegin:(UIGestureRecognizer *)gestureRecognizer {
    if (self.currentActiveView.placeVerticalScrollView.dragging == NO) {
        self.currentActiveView.placeVerticalScrollView.scrollEnabled = NO;
        return YES;
    } else {
        return NO;
    }
}    
@end

@interface InnerVerticalScrollView : UIScrollView...
@property UISwipeGestureRecognizer *swipeGestureRecognizer;
@end

@implementation InnerVerticalScrollView
- (id)initWithFrame:(CGRect)frame {
    if (self = [super initWithFrame:frame]) {
        ...
        self.swipeGestureRecognizer = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(handleSwipeGesture:)];
        self.swipeGestureRecognizer.direction = UISwipeGestureRecognizerDirectionDown | UISwipeGestureRecognizerDirectionUp;
        [self addGestureRecognizer:self.swipeGestureRecognizer];
    }

    return self;
}

- (BOOL)gestureRecognizerShouldBegin:(UIGestureRecognizer *)gestureRecognizer {
    if (gestureRecognizer == self.panGestureRecognizer && self.scrollEnabled == YES) {
        return YES;
    } else if (gestureRecognizer == self.swipeGestureRecognizer) {
        return YES;
    } else {
        self.scrollEnabled = NO;
    }

    return NO;
}

- (void)handleSwipeGesture:(UIGestureRecognizer *)sender {
    self.scrollEnabled = YES;
}

- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer {    
    return YES;
} 
```

这段代码有点 hacky：只有当他们的自定义 Swipe 手势被识别（仅顶部或底部方向）时，它才允许滚动垂直滚动视图，所有其他手势都传递给外部滚动视图，而外部滚动视图又允许任何手势，只有在没有人的情况下的内部滚动视图正在被拖动。

注意：滑动手势也适用于缓慢或微小的滑动并不明显，但确实如此（另请参阅上面引用的问题的评论）。

我觉得它可以更容易完成，也许我稍后会重构它。

不管怎样，现在外滚动条完美地工作了——它水平滚动，没有任何偶尔的垂直平底滚动视图。

**后期更新：**正如我之前预期的那样，我的解决方案确实包含不必要的代码位：请参阅@burik 的答案，虽然部分基于我的解决方案，但它会将这些位排除在外。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T12:22:54.803

一旦我遇到这种情况，我就有以下工作要做。

从 UIScrollView 子类化你的两个视图&你会很好的。在您的情况下，我可以看到您的 UINoteView 不是 UIScrollView 的子类，将其从 ScrollView 子类化并从此类中删除 innerScrollView。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-25T13:58:45.677

我认为使用速度来确定滚动方向是一种更好的方法：

```
- (BOOL)gestureRecognizerShouldBegin:(UIPanGestureRecognizer *)gestureRecognizer {
    CGPoint velocity = [gestureRecognizer velocityInView:gestureRecognizer.view];
    return fabs(velocity.y) > 3 * fabs(velocity.x);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T02:50:02.970

我对你的设置有点困惑，但你可能想看看[`-[UIScrollView setDelaysContentTouches:]`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIScrollView_Class/Reference/UIScrollView.html#//apple_ref/occ/instp/UIScrollView/delaysContentTouches). 在处理嵌套滚动视图时，您可以使用它来添加一些优先级。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-17T17:32:51.260

您可以继承`UIScrollView`并实现`gestureRecognizer:shouldRecognizeSimultaneouslyWithGestureRecognizer:`，允许滚动视图的内置`panGestureRecognizer`与另一个滚动视图的手势识别器同时识别。

例子：

```
//This is needed because the public UIScrollView headers
//don't declare the UIGestureRecognizerDelegate protocol:
@interface UIScrollView (GestureRecognition) <UIGestureRecognizerDelegate>
@end

@interface MyScrollView : UIScrollView

@end

@implementation MyScrollView

- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer
{
    if (gestureRecognizer == self.panGestureRecognizer) {
        return YES;
    } else if ([UIScrollView instancesRespondToSelector:@selector(gestureRecognizer:shouldRecognizeSimultaneouslyWithGestureRecognizer:)]) {
        //Note: UIScrollView currently doesn't implement this method, but this may change...
        return [super gestureRecognizer:gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:otherGestureRecognizer];
    }
    return NO; //the default
}

@end 
```

将这个子类用于水平或所有垂直滚动视图就足够了。

在您尝试以这种方式使用它之后，您实际上可能会发现您更喜欢默认行为。允许两个视图同时滚动几乎总是会导致在左右滑动时意外垂直滚动，这可能会令人恼火（大多数人不会做完美的水平滑动手势）。

# python - 在 python 中拆分字符串（如 rubik 的立方体符号）的最有效方法？

> ID：13272861
> 
> 赞同：1
> 
> 时间：2012-11-07T15:31:17.997
> 
> 标签：python, string, split, rubiks-cube

如果像`"RL2R'F2LD'"`给定的字符串，将其拆分为字符串的最有效方法是`"R" "L2" "R'" "F2" "L" "D'"`什么？我尝试了几种方法，例如首先将它们拆分为单独的字符，然后尝试将它们添加到列表中，但没有任何效果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T15:37:21.180

```
def rubikstring(s):
    import string
    cumu = ''
    for c in s:
        if c in string.ascii_letters:
            if cumu: yield cumu
            cumu = ''
        cumu += c
    if cumu: yield cumu 
```

可以做你的工作。和

```
>>> for i in rubikstring("RL2R'F2LD'"): i
...
'R'
'L2'
"R'"
'F2'
'L'
"D'" 
```

你得到你想要的结果，

```
>>> list(rubikstring("RL2R'F2LD'"))
['R', 'L2', "R'", 'F2', 'L', "D'"] 
```

也是。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-07T15:37:28.503

您可以使用正则表达式：

```
import re
cubedirs = re.compile(r"[RLFBUDrlfbudxyz][2']?")
cubedirs.findall("RL2R'F2LD'") 
```

这输出`['R', 'L2', "R'", 'F2', 'L', "D'"]`.

正则表达式其实很简单。字符组的`[..]`意思是：匹配给定集合中的*一个*`R`字符（例如 an ，或 an `L`，或 an`F`等）。

然后我们寻找第二个字符组，*可选地*匹配 1 个字符，即 a`2`或`'`。第二个字符后面的问号使它成为可选的；我们指定如果`'`或`2`字符不存在也可以。

该`.findall()`方法只返回所有已找到的匹配项，因此您将获得输入字符串中与模式匹配的所有字符组的列表。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-07T15:38:59.430

您可以使用正则表达式：

```
[FBUDLRfbudlrxyz][2']? 
```

[这是一个现场演示。](http://codepad.org/Ze3nP9Dw)

```
import re

s = "RL2R'F2LD'"

for m in re.finditer("[FBUDLRfbudlrxyz][2']?", s):
    print m.group(0) 
```

（很抱歉没有在评论中解释如何做到这一点，我真的不知道 Python。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-07T15:38:53.680

正如所评论的，正则表达式将是一个好方法：

```
>>> import re
>>> re.findall('[A-Z]{1}[0-9]{0,1}', "RL2R'F2LD'")
['R', 'L2', 'R', 'F2', 'L', 'D'] 
```

# php - 如何将库存水平更新日期添加到前端

> ID：13272862
> 
> 赞同：1
> 
> 时间：2012-11-07T15:31:26.337
> 
> 标签：php, magento, magento-1.6

我目前有以下代码显示正在查看的产品数量：

```
<?php 
echo intval(Mage::getModel('cataloginventory/stock_item')->loadByProduct($_product)->getQty()); 
?> 
```

这一切都很好，但我想做的是获取此股票数量的最后更新日期，这可能吗？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-08T06:24:38.677

您好，我创建查询可能会对您有所帮助

**$sqlcategory = "SELECT updated_at FROM sales_flat_order_item WHERE product_id='51' order by updated_at DESC limit 1"; $datacategory = Mage::getSingleton('core/resource')->getConnection('core_read')->fetchAll($sqlcategory); 回声 $datacategory[0]['updated_at'];**

# c# - 如何在 c# asp.net 中操作 URL 路径？

> ID：13272865
> 
> 赞同：0
> 
> 时间：2012-11-07T15:31:34.887
> 
> 标签：c#, asp.net

我有以下路径：

> -http://localhost/portal/reportview.aspx

但我需要检索前 3 个部分：

> -http://localhost/portal/

我试过`HttpContext.Current.Request.Url.GetLeftPart();`没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T15:35:02.387

您可以使用子字符串。

```
string str = "http://localhost/portal/reportview.aspx";

string left = str.Substring(0, str.LastIndexOf("/")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T15:36:02.743

尝试这个;

```
string s = "http://localhost/portal/reportview.aspx";
string y = string.Format("{0}//{2}/{3}/",s.Split('/')); 
```

# jquery - 滚动时将阴影应用于固定顶部横幅

> ID：13272872
> 
> 赞同：0
> 
> 时间：2012-11-07T15:31:48.983
> 
> 标签：jquery, css, scroll

我找到了许多解决方案来显示阴影或在内容具有`top < 0px;`. 但是，我想知道是否有一种方法可以在滚动时慢慢淡入阴影，`opacity:0.5`例如，阴影在滚动后可能只有 10px？

谷歌在 Google+ 页面中使用它，您正在滚动内容，然后顶部下方的阴影在滚动时慢慢淡入，但如果您再次向上滚动，也会再次淡出。谁能告诉我这是如何用 jquery 和 css3 制作的？

我看过[这个，](http://jsfiddle.net/82rQt/1/)但唯一错误的是我希望阴影在滚动时越来越淡。我不希望它突然出现。

也许可以分步进行..这不起作用，但它可能会给你一个想法..

```
var done = $(document).scrolltop() - 20x;
// now we can use this number as 100% scrolled

$(document).scroll(function() {
    // here we can animate the shadow opacity after 20%, 40%, 60%, 80% and 100%
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T16:11:24.210

**[演示](http://jsfiddle.net/Gz4R9/3/)**——像这样的东西？

此示例使用 CSS3 过渡来淡入/淡出元素`box-shadow`。`fixed`

*更新：*

**[演示](http://jsfiddle.net/Gz4R9/4/)**- 不透明度反映滚动位置的替代解决方案，其中`box-shadow`距页面顶部 100 像素（或更大）为 100% 不透明度（零透明度），距顶部 10 像素为 10%（或 0.1）不透明度（90% 透明度）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T15:39:51.723

可以通过一个运行示例以更具体的方式提出您的问题吗？但模式应该是这样的：

1.  为您的 div 提供 css shadow 属性/或使用也适用于旧版浏览器的图像。
2.  将滚动事件上的 2 个绑定到 Document 一个用于向上，一个用于向下。
3.  编写一个改变 .css 属性的函数...

# c# - 如何创建具有多种复杂类型的动态 DropDownList？ASP.NET MVC 3

> ID：13272873
> 
> 赞同：0
> 
> 时间：2012-11-07T15:31:49.510
> 
> 标签：c#, asp.net-mvc-3, dynamic, razor, viewmodel

伙计们。我有这些 ViewModel：

```
public class CandidateViewModel
{
    public string Name { get; set; }
    public IList<CourseViewModel> Courses { get; set; }
    //...
}

public class OptionViewModel
{
    public int Number { get; set; }
    public string Description { get; set; }
    //...
}

public class CourseViewModel
{
    public string Name { get; set; }
    public string SelectedCourse { get; set; }
    public IList<OptionViewModel> Options { get; set; }

    public CourseViewModel(int options)
    {
        Options.Add(new OptionViewModel(-1, string.Empty));
        for (int count = 1; count <= options; ++count)
            Options.Add(new OptionViewModel(
                count, string.Format("Option {0}", count)));

        Options.Add(new OptionViewModel(0, "Don't want it"));
    }
} 
```

好吧，我想创建一个DropDownLists的数量等于Course的数量进入CandidateViewModel。每个下拉列表都应作为 CourseViewModel 实例的 OptionViewModel 列表的选项。我需要这样的最终结果：

```
<select name="Course1">
    <option value="-1"></option>
    <option value="1">Option 1</option>
    <option value="2">Option 2</option>
    <option value="3">Option 3</option>
    <option value="0">Don't want it</option>
</select>

<select name="Course2">
    <option value="-1"></option>
    <option value="1">Option 1</option>
    <option value="2">Option 2</option>
    <option value="3">Option 3</option>
    <option value="0">Don't want it</option>
</select> 
```

但是，我的 .cshtml 页面将 CandidateViewModel 作为模型，我无法通过“Html.DropDownListFor”trhu Razor 创建。你能帮我吗？

十分感谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T16:11:35.333

您可以使用使用所需类型的[局部视图。](http://www.mikesdotnetting.com/Article/105/ASP.NET-MVC-Partial-Views-and-Strongly-Typed-Custom-ViewModels)

此外，您可能无法绑定此模型。请看这篇文章[MVC Model Binding to List of Complex Objects](http://seesharpdeveloper.blogspot.com.br/2012/05/mvc-model-binding-to-list-of-complex.html)

# visual-studio-2010 - 没有Mindscape的VS2010中的SCSS语法高亮？

> ID：13272875
> 
> 赞同：5
> 
> 时间：2012-11-07T15:31:58.173
> 
> 标签：visual-studio-2010, syntax-highlighting, sass

我希望在 VisualStudio 2010 项目中对我的 CSS 文件使用 Sass（SCSS 语法），并且需要对其进行语法高亮显示。我发现的所有东西都在不断地将我引向 Mindscape 扩展，但升级的唠叨让人分心，并且是它的游戏杀手。

有没有办法在不使用 Mindscape 扩展的情况下在 Visual Studio 2010 中获得 SCSS 语法突出显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-21T20:34:10.300

试试这个：SassyStudio——“为 Visual Studio 中的 sass 文件提供一些支持”

[http://visualstudiogallery.msdn.microsoft.com/85fa99a6-e4c6-4a1c-9f00-e6a8129b6f4d?SRC=VSIDE](http://visualstudiogallery.msdn.microsoft.com/85fa99a6-e4c6-4a1c-9f00-e6a8129b6f4d?SRC=VSIDE)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T14:02:09.710

我知道这个问题有点老了，但是你检查[过 Visual Studio 的 web Essentials 插件](http://visualstudiogallery.msdn.microsoft.com/6ed4c78f-a23e-49ad-b5fd-369af0c2107f)吗？这对scss有很大的支持。

# html - iframe 高度和宽度居中

> ID：13272876
> 
> 赞同：0
> 
> 时间：2012-11-07T15:31:59.923
> 
> 标签：html, iframe

我试图在水平居中的 div 中有一个 iframe。它在 Firefox 中运行良好，但在 IE8 中运行良好。这是我的完整代码：

```
<!-- <!DOCTYPE HTML> -->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head></head>
<STYLE type="text/css">
body {
background-color: silver; } 

#container {
align: right; 
margin: 0;
width: 600px;height: 100%;
margin: 10px auto;
background-color: white; 
}

#top {
height: 300px;
background-color: yellow; }

#midpart { 
width:100%;
height:100%;
background-image:none;
background-color: blue; }

</style>
<body>
<div id="container">
<div id="top">
<iframe src="aa.htm" id="midpart" scrolling="yes" frameborder="1"></iframe>
</div>

</div>
</body></html> 
```

在 IE8 中，上面的代码生成了一个不水平居中的 div。否则没关系。iFrame div 占据了大约 100% 的屏幕。请注意，我使用的是长 doctype 版本

如果我使用第一个 doctype 行（短的）IE8 将 div 居中，但 div/iframe 高度是错误的。

还有其他解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T15:34:30.133

将以下样式添加到您的身体...

```
text-align:center; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T15:34:43.640

你的意思是在#container 中有'margin: 10px auto' 和'align:right' 吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T15:35:24.833

```
position:relative;
margin:0 auto; 
```

应该为顶部的 id 生成一个水平居中的 div。您可以使用 width 和 height 属性直接在 iframe 上设置宽度和高度。

# c# - CSharpCodeProvider 和动态程序集的解析

> ID：13272877
> 
> 赞同：1
> 
> 时间：2012-11-07T15:32:06.050
> 
> 标签：c#, .net, dynamic, assemblies, code-generation

我有一个应用程序，我在其中使用 CSharpCodeProvider 允许通过 C# 代码进行集成脚本。脚本可以引用动态发出的程序集（这些是通过 IL Emit 创建的）；为了允许这个引用，我将动态生成的程序集保存到磁盘上的一个文件中，然后将此位置添加到 CompilerParameters.ReferencedAssemblies 集合中。

这适用于脚本的第一次编译和执行。我有实例化从脚本生成的类的代码，该类有一个带参数的构造函数，其中一些是来自动态发出的程序集的类型。它看起来像这样：

```
 var hostType = _compilerResults.CompiledAssembly.GetType("ExMod.Engine.ScriptHost");

        var parameters = new List<object>();
        parameters.Add(simulation);

        var extraParameters =
            simulation.Environment.Controllers.
            Select(c => c.GetPrecompiledContext()).
            Where(c => c != null);
        parameters.AddRange(extraParameters);

        _scriptHost = (ScriptHostBase)Activator.CreateInstance(hostType, parameters.ToArray()); 
```

extraParameters 表达式是添加对外部动态生成类型的引用的地方。

当我再次尝试编译和运行脚本时，就会出现问题。仅当我还重新发出了新版本的 IL Emit 程序集时才会发生这种情况。异常发生在 Activator.CreateInstance 调用上，并且是：

`MissingMethodException: Constructor on type 'ExMod.Engine.ScriptHost' not found.`

观察：

1.  我已经通过调试器确认存在具有正确参数的构造函数。
2.  我还确认（使用调试器中的 Make Object ID）导致问题的原因是构造函数中的“Controller”参数（来自动态发出的程序集的引用类型）指的是原始动态程序集，而不是最最近发出的动态程序集，这就是类型不匹配且构造函数无法解析的原因。
3.  当我运行 CSharpCodeProvider 编译器然后尝试运行脚本时，它从不调用我的 AppDomain AssemblyResolve 事件，这是我有特殊逻辑始终解析为“最新”动态程序集的地方。

我的理论是，CSharpCodeProvider 以某种方式解决了“最早的”动态程序集，而不是“最新的”。发生这种情况是因为它们都具有相同的名称和位置。问题：如何让 CSharpCodeProvider 解析为最新版本的动态程序集？

我考虑过更改每个动态发出的程序集的位置，但我不希望为每个脚本迭代在磁盘上创建一堆副本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T17:02:42.133

我发现我可以通过让 Emit 代码为每个构建创建一个新的构建号来解决这个问题。我只是在生成 AssemblyName 的代码中使用它：

```
 var name = new AssemblyName();
        name.Name = "AB-PLC";
        name.Version = new Version(0, 0, Interlocked.Increment(ref _buildNumber), 0); 
```

上面的 _buildNumber 是一个简单的静态 int 字段。

这允许 CSharpCodeProvider 解析正确的程序集，因为现在不同构建的 FullName 不再匹配。我仍然只有一个导出到磁盘的程序集副本（被每个 IL 发射构建覆盖。）

我仍然很想知道是否可以允许 CSharpCodeProvider 在不更改其 FullName 的情况下解析正确的程序集，但这个解决方案目前足以满足我的目的。

# jquery - jquery 单击除打开 div 之外的所有内容

> ID：13272879
> 
> 赞同：0
> 
> 时间：2012-11-07T15:32:35.823
> 
> 标签：jquery, jquery-selectors

我将如何编写一个 jquery 操作，以便当单击网页上的任何内容时，除了某个 div 之外，查询执行一个功能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T15:55:27.787

这是我的方式：

```
$(document).on("click", function(){
    alert('foo');
});
$('#yourdiv').on("click", function(event){
    event.stopPropagation();
}) 
```

[http://jsfiddle.net/v3N2T/5/](http://jsfiddle.net/v3N2T/5/)

这个想法是您将点击事件放在整个页面上，然后在您不想执行该操作的元素上捕获点击，并阻止它将点击事件传播到文档点击事件。

It might interact badly if you have any other click event stuff going on but you may have that problem anyway...

P.S. Credit to Adrian for his original answer that allowed me to develop this solution much more quickly by just modifying his. :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T15:33:49.917

从 jQuery 1.7 开始，[`on()`](http://api.jquery.com/on/)鼓励使用：

```
$(document).on("click", ":not(#yourdiv)", function(){
    //do your thing

    //important: return false to avoid repeating the call for each DOM element in
    //the hierarchy
    return false;
}) 
```

请参阅更新的小提琴：http: [//jsfiddle.net/adrianonantua/v3N2T/8/](http://jsfiddle.net/adrianonantua/v3N2T/8/)

现在，有一个警告：在小提琴示例中，似乎正在单击不需要的 div。但是，实际上，click 事件是由其父级触发的。

# c# - 混合 asp.net 4 和 MVC 应用程序

> ID：13272886
> 
> 赞同：2
> 
> 时间：2012-11-07T15:32:58.020
> 
> 标签：c#, asp.net, asp.net-mvc-3

我正在将一个 asp.net 4 项目迁移到 MVC 3 - 并计划在迁移所有内容后迁移到 MVC4。我关注了这篇文章：

[http://www.hanselman.com/blog/IntegratingASPNETMVC3IntoExistingUpgradedASPNET4WebFormsApplications.aspx](http://www.hanselman.com/blog/IntegratingASPNETMVC3IntoExistingUpgradedASPNET4WebFormsApplications.aspx)

创建了一个区域，添加了 Controllers 和 Views 文件夹，创建了一个控制器

```
public class HomeController : Controller
{
  public ActionResult Index()
  {
    return View();
  }
} 
```

运行应用程序并检查标准的 Aspx 页面，然后工作正常，然后转到控制器的路径并得到“错误：值不能为空。参数名称：incomingMarkupParser”错误。所以，我然后删除了 return View(); 并将其替换为 return Content("Hello world"); 这完全没有问题。

所以我心想，该区域是否有问题......创建了一个 Controllers and Views 文件夹并再次尝试 - 同样的问题。

System.Web.Razor 是 2.0.0.0 版 System.Web.WebPages 是 1.0.0.0 版（也试过 2 版）

网络配置

```
 <assemblies>
    <add assembly="System.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A" />
    <add assembly="System.Web.Extensions.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <add assembly="System.Windows.Forms, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
    <add assembly="System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
    <add assembly="System.Web.Abstractions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
    <add assembly="System.Web.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <add assembly="System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
    <add assembly="System.Data.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
    <add assembly="System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
    <add assembly="System.Web.WebPages, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
  </assemblies>

  <namespaces>
    <add namespace="System.Web.Helpers" />
    <add namespace="System.Web.Mvc" />
    <add namespace="System.Web.Mvc.Ajax" />
    <add namespace="System.Web.Mvc.Html" />
    <add namespace="System.Web.Routing" />
    <add namespace="System.Web.WebPages"/>
  </namespaces> 
```

我知道问题与 Razor 有关，但我找不到什么。有没有其他人经历过这种情况，如果有，他们是如何克服的？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T15:49:10.380

您在 web.config 中的所有 Razor 引用在哪里？（我怀疑这是真正的问题）请参阅[此页面以获取示例](http://forums.asp.net/t/1663125.aspx/1)

你也可以试试[这个链接和那里的代码](http://weblogs.asp.net/imranbaloch/archive/2011/03/14/monitoring-asp-net-mvc-application.aspx)来查看所有异常（包括那些被吞没的）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T15:05:30.490

你确定你的views文件夹中有一个web.config吗？我相信这就是你的剃须刀配置的地方。或者至少我就是这样得到我的。尝试查看 Views > web.config 以获得新的 MVC 项目，这就是我的来源。

我希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-03T09:51:30.607

您需要添加或修复

```
<runtime>
  <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
    <dependentAssembly>
      <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
      <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="3.0.0.0" />
    </dependentAssembly>
  </assemblyBinding>
</runtime> 
```

到您的 web.config。这告诉运行时对版本 1、2 和 3 使用 System.Web.Mvc 程序集。另外，不要混合使用 Razor 引擎，2.0 是 ASP.NET MVC 4。对于 ASP.NET MVC 3，你需要 1.0。我认为那可能是你的问题。

# c++ - 写入临时文件

> ID：13272889
> 
> 赞同：2
> 
> 时间：2012-11-07T15:33:12.187
> 
> 标签：c++, file, text, stream

我在 C++ 中有以下程序：

```
#include "stdafx.h"
#include <fstream>
#include <iostream>
#include <sstream>
#include <string>
#include <string.h>
#include <Windows.h>

using namespace std;

string integer_conversion(int num) //Method to convert an integer to a string
{
    ostringstream stream;
    stream << num;
    return stream.str();
}

void main()
{
    string path = "C:/Log_Files/";
    string file_name = "Temp_File_";
    string extension = ".txt";
    string full_path;
    string converted_integer;
    LPCWSTR converted_path;

    printf("----Creating Temporary Files----\n\n");
    printf("In this program, we are going to create five temporary files and store some text in them\n\n");

    for(int i = 1; i < 6; i++)
    {
        converted_integer = integer_conversion(i); //Converting the index to a string
        full_path = path + file_name + converted_integer + extension; //Concatenating the contents of four variables to create a temporary filename

        wstring temporary_string = wstring(full_path.begin(), full_path.end()); //Converting the contents of the variable 'full_path' from string to wstring
        converted_path = temporary_string.c_str(); //Converting the contents of the variable 'temporary_string' from wstring to LPCWSTR

        cout << "Creating file named: " << (file_name + converted_integer + extension) << "\n";
        CreateFile(converted_path, GENERIC_WRITE, 0, NULL, CREATE_ALWAYS, FILE_ATTRIBUTE_TEMPORARY, NULL); //Creating a temporary file
        printf("File created successfully!\n\n");

        ofstream out(converted_path);

        if(!out)
        {
            printf("The file cannot be opened!\n\n");
        }
        else
        {
            out << "This is a temporary text file!"; //Writing to the file using file streams
            out.close();
        }
    }
    printf("Press enter to exit the program");
    getchar();
} 
```

临时文件被创建。但是，这个程序有两个主要问题：

1）一旦应用程序终止，临时文件不会被丢弃。2）文件流没有打开文件，也没有写入任何文本。

请问这些问题怎么解决？谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T16:00:03.330

当您提供`FILE_ATTRIBUTE_TEMPORARY`给 Windows 时，基本上是建议性的——它告诉系统您*打算*将其用作临时文件并尽快将其删除，因此应尽可能避免将数据写入磁盘。它并*没有*告诉 Windows 实际删除文件（根本）。也许你想要`FILE_FLAG_DELETE_ON_CLOSE`？

写入文件的问题看起来很简单：您已将`0`第三个参数指定为`CreateFile`. 这基本上意味着没有文件共享，因此只要该文件的句柄是打开的，就没有其他东西可以打开该文件。由于您从未明确关闭使用 创建的句柄`CreateFile`，因此该程序的其他部分没有真正的可能写入文件。

我的建议是选择*一种*类型的 I/O 来使用，并坚持下去。现在，您拥有 Windows-native `CreateFile`、 C-style`printf`和 C++ style的组合`ofstream`。坦率地说，这是一团糟。

# c++ - 模拟具有 const char 类型的 out 参数的函数**

> ID：13272892
> 
> 赞同：0
> 
> 时间：2012-11-07T15:33:34.167
> 
> 标签：c++, c++98

我需要模拟 ac api“类”，它基本上是一个包含一组函数指针的结构。这是我的方法。您认为它是否有效，或者您能提出更好的方法吗？

```
typedef struct MockCApi: public CApi
{
    MockCApi()
    {
        // Hook in function
        getName = nameFunc;
    }

    static void reset()
    {
        handle.clear(); 
        name.clear();
        returnValue.clear();
    }

    static ReturnType nameFunc(HandleType _handle, const char** _name)
    {
        handle.push_back(_handle);

        poppedNames.push_back(name.front());
        *_name = poppedNames.back().c_str();

        ReturnType _returnValue = returnValue.front();
        returnValue.pop_front();
        return _returnValue;
    }

    static std::deque<HandleType> handle;
    static std::deque<std::string> name;
    static std::deque<ReturnType> returnValue;
private:
    static std::deque<std::string> poppedNames;
}; 
```

**更新**

我想到的另一种方法是使用`std::vector`'s 和`std::vector::iterator`'s 而不是`std::queue`'s。每次我“使用”向量中的值时，迭代器都会递增。

# c# - 移动列表中的多个项目

> ID：13272894
> 
> 赞同：1
> 
> 时间：2012-11-07T15:33:35.833
> 
> 标签：c#

我有一个实现的列表类`IEnumerable<T>`。
Type T 是一个复杂的类，以字符串成员作为唯一标识符。但是仅将*int*作为元素类型进行解释就足够了。

我想将多个项目向左移动一步。
示例：
原始列表：***0*** *, 1, 2, **3** , **4** , 5*
现在所有粗体项目 (0,3,4) 应向左移动（尽可能）。
结果列表：***0*** *, 1, **3** , **4** , 2, 5*

有没有好的算法来做到这一点？也许只是使用 LINQ。

编辑：`List<T>`欢迎回答列表。我的班级有类似的方法。（感谢 TylerOhlsen 的提示。）
Edit2：一个选定的项目不应通过另一个选定的项目。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T16:09:16.430

这看起来很有效：

```
public static IEnumerable<T> MoveSelectedLeft<T>(
    this IEnumerable<T> source,
    IEnumerable<int> indicesToMove /* must be in order! */)
{
    using (var itm = indicesToMove.GetEnumerator())
    {
        bool hasNextToMove = itm.MoveNext();
        int nextToMove = hasNextToMove ? itm.Current : -1;

        bool canMoveYet = false;
        T held = default(T);
        int currentIndex = 0;

        foreach (T t in source)
        {
            if (hasNextToMove && nextToMove == currentIndex)
            {
                hasNextToMove = itm.MoveNext();
                nextToMove = hasNextToMove ? itm.Current : -1;
                yield return t;
            }
            else
            {
                if (!canMoveYet)
                {
                    canMoveYet = true;
                }
                else
                {
                    yield return held;
                }
                held = t;
            }

            currentIndex++;
        }

        if (canMoveYet)
            yield return held;
    }
} 
```

称为

```
foreach (int i in new[] { 0,1,2,3,4,5 }.MoveSelectedLeft(new[] { 0,3,4 }))
{
    Console.WriteLine(i);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T16:16:05.127

我没有想出使用 Linq 的好方法，但这里有一个简单的循环算法。如果你能想出一个排序功能，那就更好了。或者您可以查看 Linq [Zip](http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&l=EN-US&k=k%28%22SYSTEM.LINQ.ENUMERABLE.ZIP%60%603%22%29;k%28TargetFrameworkMoniker-%22.NETFRAMEWORK,VERSION=V4.0%22%29;k%28DevLang-CSHARP%29&rd=true)方法。

```
IList<int> myList = new List<int>(new[] {0, 1, 2, 3, 4, 5});
IList<int> moveLeftList = new List<int>(new[] {0, 1, 3, 4});

//Go through the original list in order and remove
// all items from the move left list until you reach
// the first item that is not going to be moved left.
//Items removed are already as far left as they can be
// so they do not need to be moved left and can therefore
// be safely removed from the list to be moved.
foreach (int item in myList)
{
    int index = moveLeftList.IndexOf(item);

    if (index >= 0)
        moveLeftList.RemoveAt(index);
    else
        break;
}

foreach (int item in moveLeftList)
{
    int index = myList.IndexOf(item);

    //Dont move left if it is the first item in the list or it is not in the list
    if (index <= 0)
        continue;

    //Swap with this item with the one to its left
    myList.RemoveAt(index);
    myList.Insert(index-1, item);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T15:39:10.823

这是一个算法的描述。将元素直接存储到元素组的左侧（在本例中为 a `2`）在 `temp 变量中。

从最左边的元素开始，将元素向左 1 1 移动。

将`temp`变量放在组现在所在位置的右侧。

如果您使用的是链表，它会更好。您只需`2`从它所在的位置删除它，并将其插入到组的右侧。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-07T15:42:37.073

您应该为此使用“排序”功能并提供自定义比较器。

看看[这个例子](http://msdn.microsoft.com/en-us/library/w56d4y5z.aspx)。

# java - 如果序列化字段不使用 GSON 是否应该忽略参数化类型？

> ID：13272895
> 
> 赞同：0
> 
> 时间：2012-11-07T15:33:38.020
> 
> 标签：java, json, gson

如果我有：

```
class X<T> {
   String a;
   T b;
} 
```

那么我希望 GSON 抱怨参数化是正确的，因为它不能序列化字段 b。但是，如果我将其更改为：

```
class X<T> {
   String a;
   transient T b;
} 
```

GSON 现在不应该关心，因为它不应该序列化使用类型参数的字段。

有人看到这有什么问题吗？我猜这只是 GSON 开发人员的疏忽，我愿意修改代码以解决，但我想在尝试这样做之前知道是否是这种情况。

# java - 从另一个类获取日志以将此文本设置为 TextView

> ID：13272897
> 
> 赞同：1
> 
> 时间：2012-11-07T15:33:39.283
> 
> 标签：java, android, logging, system.out

我正在使用一个 MainActivity 和另一个包含一个类的 .java。

我希望能够在我的 MainActivity 内的 textView 中从排除的类中设置 Logs 或 System.out。

例如，我的类中这个方法的 System.out：

```
private class Util {

private static KNXNetworkLinkIP connect(InetSocketAddress isaLocalEP, InetSocketAddress isaRemoteEP)
  {
    KNXNetworkLinkIP netLinkIp = null;

    int serviceMode = KNXNetworkLinkIP.TUNNEL; // tunnel to IP router
    boolean useNAT = true; // NAT not used for PC true or false , but needed for emulator = true
    KNXMediumSettings tpSettings = new TPSettings(true); // TP1 medium

    try
    {
      // Output the local end point address

      if (m_debugOutput == true)
      {

        System.out.println("..Tunneling, NAT ignored, TP1 medium");

        // Should be the PC's VPN address

        System.out.print("..Local  EP:");
        System.out.println(isaLocalEP.getHostName() + ":" + isaLocalEP.getPort());

        System.out.print("..Remote EP:");
        System.out.println(isaRemoteEP.getHostName() + ":" + isaRemoteEP.getPort());

        System.out.print("..useNAT:");
        System.out.println(useNAT);

        System.out.println();
      }

      netLinkIp = new KNXNetworkLinkIP(serviceMode, isaLocalEP, isaRemoteEP, useNAT, tpSettings);
    }
    catch (KNXLinkClosedException e)
    {
      System.out.println("connect:KNXLinkClosedException = " + e.getMessage());
    }
    catch (KNXFormatException e)
    {
      System.out.println("connect:KNXFormatException = " + e.getMessage());
    }
    catch (KNXException e)
    {
      System.out.println("connect:KNXException = " + e.getMessage());
    }
    catch (Exception e)
    {
      System.out.println("connect:Exception = " + e.getMessage());
    }
    return netLinkIp;

  } // connect(isaLocalEP, isaRemoteEP)

} 
```

我知道这是一个简单的问题，但我被卡住了，不知道如何实现它.....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T15:45:06.773

您可以使用`Log.x()`方法记录，然后读取系统日志，grep 只获取您的并显示，或者编写自己的记录器，将您的日志放入 ie 数据库，然后您的其他代码可以获取并显示它。

# c++ - 在不同的表视图之间拖放

> ID：13272899
> 
> 赞同：1
> 
> 时间：2012-11-07T15:33:41.640
> 
> 标签：c++, qt, drag-and-drop, qtableview

我有两个不同的 Qtable 视图（我正在使用 QT），我不知道如何在它们之间实现拖放功能。它似乎仅在处理单个模型视图（在同一个表中拖放）时才有效。有人可以给我一个简单的例子吗？

# php - 如何使用 PHP curl 命令行发送标头？

> ID：13272900
> 
> 赞同：3
> 
> 时间：2012-11-07T15:33:42.723
> 
> 标签：php, curl, header

我正在使用 curl 将 XML 发布到 Web 服务。代码如下：

```
exec("/usr/bin/curl -s -m 120 -d  \"$xml\" $URL -L", $return_message_array, $return_number); 
```

我想将此自定义标头添加到其中：

```
$headers = array(            
        "Content-type: application/soap+xml; charset=utf-8",
        "SOAPAction: http://loantree.com/webservices/InsertLead",
    ); 
```

我努力了：

```
exec("/usr/bin/curl -s -m 120 -H $headers -d  \"$xml\" $URL -L", $return_message_array, $return_number); 
```

但这只会返回我要发布的页面。有谁知道我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T15:42:18.963

标头[`curl`](http://curl.haxx.se/docs/manpage.html)是使用选项设置的`-H`，可以多次使用：

```
curl -H "Header-1: Value" -H "Header-2: Value" http://example.com 
```

**注意：**如果安装，PHP 有一个[curl 库](http://www.php.net/manual/en/book.curl.php)。所以你不必使用`exec()`.

# javascript - 使用 append/insertAfter 类型函数移动 innerHTML，没有 jQuery

> ID：13272903
> 
> 赞同：1
> 
> 时间：2012-11-07T15:34:00.680
> 
> 标签：javascript, append, innerhtml

有人问过类似的问题。我正在寻找针对特定场景的最佳解决方案。

我想将所有 innerHTML 移动到另一个元素。我有：

```
<div class='mydiv'>
    Any HTML could be here. <span></span><div></div> etc..
</div> 
```

并希望在此 div 中附加/前置/插入/插入任何内容：

```
<div class='myotherdiv'>
    Any HTML could be here as well. <span></span><div></div> etc..
</div> 
```

是`innerHTML +=`唯一可行的解​​决方案吗？或者有什么方法可以将整个节点列表从第一个 div 移动并将其附加到第二个 div？我可以单独抓取每个节点，循环并将它们附加到第二个 div -出于性能原因，我不想这样做**。**我在这里寻找一些巫术魔法，旧的浏览器不需要应用，也没有库，拜托。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T15:41:41.843

可能最有效的方法是使用 a `DocumentFragment`：

```
// The following assumes the existence of variables div1 and div2
// pointing to the source and destination divs respectively

var frag = document.createDocumentFragment();
var child;
while ( (child = div1.firstChild) ) {
    frag.appendChild(child);
}

div2.appendChild(frag); 
```

如果你真的想避免`while`循环，那么你可以使用[`extractContents()`](https://developer.mozilla.org/en-US/docs/DOM/range.extractContents)DOM Range 的方法（注意：IE < 9 不支持）。从理论上讲，它可能比以前的方法更有效，因为它减少了脚本进行的 DOM 调用的数量，但我还没有对其进行基准测试。

```
var range = document.createRange();
range.selectNodeContents(div1);
var frag = range.extractContents();
div2.appendChild(frag); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T15:46:37.550

```
var div = document.getElementsByClassName("mydiv"); // this yeilds an array so your going to have to do some sort of looping with it. Unless you assign your div's a id

//since you don't want to loop assuming you assign them id's
//Also avoids looping through the content nodes of your first div

var div_1 = document.getElementById("first_div"); //div to take stuff from
var div_2 = document.getElementById("second_div"); //div your adding to.

var content = div_1.innerHTML; //or innerText if you just want text

//now you have some options
div_2.innerHTML += content; // just add the old content to new div
div_2.appendChild(div_1) // if you want to just put the whole other div into the new div

//if you know whats in your other div, say like a span or a p tag you can use these
div_2.insertBefore("span or p or whatever", content)
div_2.insertAfter(div_2.firstChild, content) //this would insert after the first element inside your second_div 
```

# heroku - Heroku：Ruby 2.0.0 下的“找不到捆绑命令”

> ID：13272904
> 
> 赞同：5
> 
> 时间：2012-11-07T15:34:03.487
> 
> 标签：heroku, ruby-on-rails-3.2, ruby-2.0

我有一个 Rails 3.2.3 应用程序，我正在尝试使用 Ruby 2.0.0preview1 推送到 Heroku（请参阅：[http ://blog.heroku.com/archives/2012/11/5/ruby-2-preview-on -heroku/](http://blog.heroku.com/archives/2012/11/5/ruby-2-preview-on-heroku/)）。

这是一个在 Ruby 1.9 下运行正常的应用程序，在 Ruby 2.0.0 下应该没有问题。

我遇到的错误是：

```
2012-11-07T15:19:32+00:00 heroku[web.1]: State changed from crashed to starting
2012-11-07T15:19:37+00:00 heroku[web.1]: Starting process with command `bundle exec unicorn -p 3225 -c ./config/unicorn.rb`
2012-11-07T15:19:38+00:00 app[web.1]: bash: bundle: command not found
2012-11-07T15:19:39+00:00 heroku[web.1]: Process exited with status 127
2012-11-07T15:19:39+00:00 heroku[web.1]: State changed from starting to crashed 
```

我通过 bash 登录 Heroku 并安装了 Bundler（gem install bundler），但这并没有帮助。我也尝试更改 GEM_PATH 环境变量，但这似乎也没有任何作用。

我正在绞尽脑汁思考如何解决这个问题。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T21:35:57.630

我有同样的事情：通过使用 Ruby 2.0.0 创建一个新的 Heroku 应用程序并查看我的应用程序与新应用程序的“heroku config”的输出来解决它。然后我注意到 GEM_PATH 和 PATH 都不同，所以我做了：

```
$ heroku config:set GEM_PATH=vendor/bundle/ruby/2.0.0
$ heroku config:set PATH=bin:vendor/bundle/ruby/2.0.0/bin:/usr/local/bin:/usr/bin:/bin 
```

很快，错误就消失了！

（从：[heroku：bash：bundle：command not found](https://stackoverflow.com/questions/13019906/heroku-bash-bundle-command-not-found)得到这个想法）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-13T18:05:54.037

我刚刚为同事解决了这个问题。确保您的 buildpack 是正确的。即：如果您使用 ruby​​，请确保它是 heroku/ruby。我们将它从 node.js 更改为 ruby​​ 构建包。

# code-coverage - 仅覆盖 opencover 中的测试类

> ID：13272914
> 
> 赞同：5
> 
> 时间：2012-11-07T15:34:50.077
> 
> 标签：code-coverage, opencover

我在使用 opencover 从我的课程中获得覆盖时遇到问题。

我有一个带有主要类的 Viewer.dll 和一个带有查看器测试的 Viewer_Test.dll。

执行命令后，所有测试都按预期运行。

```
OpenCover.Console.exe -register:user -target:"$(nunitpath)/nunit-console-x86.exe" -targetargs:"/noshadow Viewer_Tests.dll /domain:single" -filter:+[*]* -output:coverage.xml

ReportGenerator.exe coverage.xml "coveragereport" html 
```

如果我查看生成的报告，我只会发现列出的测试类，而不是主要类。

这是 opencover 命令的控制台输出。

```
Committing...
Visited Classes 5 of 5 (100)
Visited Methods 41 of 41 (100)
Visited Points 482 of 557 (86.5350089766607)
Visited Branches 6 of 12 (50)

==== Alternative Results (includes all methods including those without corresponding source) ====
Alternative Visited Classes 5 of 5 (100)
Alternative Visited Methods 44 of 44 (100) 
```

我怎样才能让 opencover 也覆盖 Viewer.dll？

# drupal - 修改 drupal 块文本

> ID：13272917
> 
> 赞同：0
> 
> 时间：2012-11-07T15:34:59.017
> 
> 标签：drupal, drupal-blocks

我有一个新的 drupal 站点可以工作。我看到这样的事情：

```
print render($page['content_top']); 
```

我想在 drupal 管理中更改“content_top”的内容，但我对 drupal 完全陌生，找不到它在哪里。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T17:17:27.857

您没有提供太多信息（当前存在什么类型的内容，您想要的内容，或者您​​正在运行的 Drupal 版本），但我会继续假设您想在该部分放置一个新块，并且您正在使用 Drupal 7。

如果是这种情况，您应该从管理菜单中选择“结构”，然后单击“块”。

# php - 如何在 joomla 2.5 中使用 php 创建文章

> ID：13272918
> 
> 赞同：-1
> 
> 时间：2012-11-07T15:34:59.583
> 
> 标签：php, mysql, joomla, joomla2.5

> **可能的重复：**
> [创建一个 Jooma！文章以编程方式](https://stackoverflow.com/questions/12643725/create-a-jooma-article-programatically)

我需要知道，如何使用 php 代码在 Joomla 2.5 中创建新文章。

***编辑***

**我发现了这个： [创建一个 Joomla！文章](https://stackoverflow.com/questions/12643725/create-a-jooma-article-programatically?lq=1)以编程方式 它也适用于 joomla 2.5**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T17:06:03.707

嗨，您只需要创建一篇新文章，并且在您编写的文本区域中，您有一个底部“html”来插入您的代码，您可以在其中放置`<?php ?>`您的 php 代码。

但我建议您为此使用模块或组件。

# tree - SmartGWT：带有连接线的自定义树形网格

> ID：13272921
> 
> 赞同：0
> 
> 时间：2012-11-07T15:35:02.113
> 
> 标签：tree, smartgwt, treenode, treegrid

我编写了 a `CustomTreegrid`，一些自定义叶子的高度是标准`Treenode`/leaf 的三倍。（我是这样做的：[自定义treenode smartgwt](https://stackoverflow.com/q/13140842/1774526)）

但是当我想用 显示节点之间的连接线时`setShowConnectors(true);`，连接线只有标准的标准高度`TreeNode`。

每当自定义叶子出现在树中时，都会有巨大的间隙，连接线只有叶子的标准高度。

我一直在寻找一种方法来修复它，我查看`skin_styles.css`了功能`setConnectorImage(String connectorImage)`，`getConnectorImage`。我认为问题在于，图像“connector_ancestor.gif”只有一片叶子那么高，并且不会被多次绘制。

如何修复连接线中的间隙？

**编辑：**这是一张图片来说明我的意思：（因为我还不能在这里上传图片，它是一个指向 imgur.com 的链接）[http://imgur.com/iKGeR](https://imgur.com/iKGeR)

**2.Edit**在api中搜索解决方案我在描述中遇到了这句话`setConnectorImage(String connectorImage)`： **连接器图标被渲染到每一行的标题字段中，**并显示同一父节点的兄弟节点之间的虚线层次结构线
——所以它接缝我有玩弄标题字段的高度，或者至少在这个方向上进一步搜索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T11:16:40.337

搜索了一段时间后，我才知道连接器只不过是名为**connector.gif**的图像组合。在这个名称下组合了很多文件，例如**connector_ancestor.gif**、**connector_closed_end.gif**、**connector_closed_single.gif**等。

现在我知道这不是一个好主意，但是您可以根据您的要求调整这些文件的大小，我认为它应该可以解决您的问题。

但同样，即使我觉得这个解决方案也不是完美的。所以让我们期待一些更好的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T16:30:14.683

你试过玩 `setShowFullConnectors(Boolean showFullConnectors)`吗？我不知道它是否适用于多行记录，但值得测试......

# android - CPU 饥饿的 android 模拟器：android ARM EABI 图像与 x86 图像

> ID：13272924
> 
> 赞同：8
> 
> 时间：2012-11-07T15:35:19.537
> 
> 标签：android, android-emulator

我是新的 android 开发人员，我目前正在使用 API-15 android 映像 ARM EABI v7 我正在寻找 android sdk 管理器，有另一个用于 android API 级别 15 的 Intel x86 映像

我的机器是 Intel Core i5 - 8GB RAM + Radeon 2GB 独立显卡

但是我的模拟器占用了很多 cpu .. 当我运行模拟器时，cpu 风扇会产生大量热量并不断运行，其中一个内核的 cpu 级别非常高。

使用 x86 Image for android 会提高性能吗？我可以让它使用专用图形 gpu 来提高效率吗？

谢谢，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T15:44:30.407

简短的回答是肯定的。当我在 2011 年初的 macbook pro 上使用 x86 模拟器时，它运行我的应用程序的速度比真实设备（如 Nexus 7）快。创建 AVD 时，可以选择使用 GPU，或者您可以使用命令参数让它使用GPU。

这是我的 ave 定义的屏幕截图...请注意硬件部分中的 GPU 仿真设置：

![在此处输入图像描述](../Images/2a06a073d5e47f7d37ed3a062f809383.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-07T22:29:02.870

它会快得多。不过，请记住还要设置 HAXM 以获得最终性能。有关说明，请参阅[http://developer.android.com/tools/devices/emulator.html](http://developer.android.com/tools/devices/emulator.html)！

# jquery - 将远程 html 加载到容器中但阻止运行

> ID：13272931
> 
> 赞同：0
> 
> 时间：2012-11-07T15:35:51.073
> 
> 标签：jquery, json

我想使用服务器端脚本将 html 从远程站点拉到 div 容器中，这样我就可以使用 jquery 从页面上的某些元素中提取值。例如元标签/页面标题等。

有没有办法阻止 HTML 实际运行，同时仍然能够使用 jQuery 选择器？

我可以将远程内容解析为可转义的 json 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T15:40:49.997

您可以将 HTML 直接加载到 jQuery 对象中，而无需将其添加到您的页面中：

```
var jQueryObjectOfRemoteHtml = $('<div>Literally add the HTML like this</div>'); 
```

我`div`在里面放了一个标签——但是你可以把所有的东西都放在那里，然后对它运行 jQuery 操作，永远不要将它添加到你的 HTML 页面中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T15:41:57.200

是的：

```
$.get('yoururl/test.html', function(data) {
    var html = $(data);
    //html is now a queryable jQuery object

    //find a div by id:
    console.log(html.find("#somediv"));

    //iterate all meta tags:
    html.find("meta").each(function(){
        //do your thing here
    });
}); 
```

# ruby - 如何设置 pry 的外部编码

> ID：13272933
> 
> 赞同：2
> 
> 时间：2012-11-07T15:35:55.767
> 
> 标签：ruby, irb, pry

IRB 具有用于设置外部编码的 -E 标志，但它在 pry 中不起作用：

> /usr/local/lib/ruby/gems/1.9.1/gems/pry-0.9.10/lib/pry/repl_file_loader.rb:16:in `initialize'：没有这样的文件：/Volumes/fb1 store/fb1 10.5用户/用户/rashid/Ruby_Dev/MDBlib/src/MDB/-Eutf-8 (RuntimeError)

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-15T10:58:55.560

放`~/.pryrc`

```
$stdout.set_encoding 'US-ASCII' 
```

指定您的默认外部编码

**并**`~/.pryrc`添加 pry 命令以`set_encoding`动态更改 external_encoding。

```
Pry::Commands.create_command "set_encoding" do
  description "Set $stdout.external_encoding to ARGS[0] || 'US-ASCII'"

  def process
    output.set_encoding args[0] || 'UTF-8'
  end
end 
```

用它作为

`[1] pry(main)> set_encoding UTF-8`

或将其设置回 US-ASCII

`[1] pry(main)> set_encoding`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T16:04:47.740

这有点像黑客，但我认为这对你有用：

```
$ pry -e "#encoding: utf-8" 
```

# php - 在同一页面上有 wordpress 搜索结果

> ID：13272934
> 
> 赞同：0
> 
> 时间：2012-11-07T15:35:57.123
> 
> 标签：php, wordpress, search

我正在尝试在我当前所在的页面中显示自定义帖子搜索的结果。我正在回发到同一页面，这是我的表单：

```
<form role="search" method="get" id="searchform-conferences" action="<?php the_permalink();?>">
    <input type="text" name="search"  value="Enter keywords ..." onfocus="if(this.value==this.defaultValue)this.value='';" onblur="if(this.value=='')this.value=this.defaultValue;"/><br />
    <input type="hidden" name="post_type" value="posttypeconference" />
    <input type="submit" id="searchsubmit" value="Search" />
</form> 
```

然而，每当我提交搜索时，它会出现 404，即使页面 url 是相同的，除了搜索查询，即`mydomain.com/page_where_my_search_form_is.php?search=searchterm`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T15:45:26.240

你的 HTML 应该是这样的

```
<form role="search" method="get" id="searchform-conferences" action="">
    <input type="text" name="search"  value="Enter keywords ..." onfocus="if(this.value==this.defaultValue)this.value='';" onblur="if(this.value=='')this.value=this.defaultValue;"/><br />
    <input type="hidden" name="post_type" value="posttypeconference" />
    <input type="submit" id="searchsubmit" value="Search" />
</form> 
```

你的 PHP 可能是这样的

```
<?php
$args = array( 'post_type' => $_POST['post_type'], 'posts_per_page' => 10, 'post_title' => 'LIKE %'.$_POST['search'].'%' );
$loop = new WP_Query( $args );
while ( $loop->have_posts() ) : $loop->the_post();
    the_title();
    echo '<div class="entry-content">';
    the_content();
    echo '</div>';
endwhile;
?> 
```

您在哪里注册自定义帖子，请确保它类似于：

```
add_action('init', 'usb_init');
function usb_init()
{
    $labels = array(
    'name' => _x('USB', 'post type general name'),
    'singular_name' => _x('USB', 'post type singular name'),
    'add_new' => _x('Add New', 'usb'),
    'add_new_item' => __('Add New USB'),
    'edit_item' => __('Edit USB'),
    'new_item' => __('New USB'),
    'view_item' => __('View USB'),
    'search_items' => __('Search USBs'),
    'not_found' =>  __('No usb found'),
    'not_found_in_trash' => __('No usb found in Trash'),
    'parent_item_colon' => ''
);
  $args = array(
    'labels' => $labels,
    'public' => true,
    'publicly_queryable' => true,
    'show_ui' => true,
    'query_var' => true,
    'rewrite' => array( 'slug' => 'product','with_front' => FALSE),
    'capability_type' => 'post',
    'hierarchical' => false,
    'menu_position' => '5',
    'supports' => array('title','excerpt','editor','thumbnail','page-attributes'),
    'taxonomies' => false
);
register_post_type('usb',$args);
} 
```

**'public' => true，'publicly_queryable' => true，'query_var' => true，**

如果这仍然不起作用，您可以尝试添加：`flush_rewrite_rules();`在您注册自定义帖子后

# java - JavaScript 对象的 Java 请求属性

> ID：13272936
> 
> 赞同：0
> 
> 时间：2012-11-07T15:36:06.993
> 
> 标签：java, javascript, jsp, request

我有一个 jQuery 库，希望您将 JavaScript 对象作为选项传递给它。例如，这有效：

```
//Hardcoded JavaScript object
var myData = { "A" : "1", "B" : "2", "C" : "3" };

//Call to jQuery with object as an option
$("#mySelectorId").myJqueryFunction({values: myData}); 
```

我需要`myData`对象不要像那样硬连线。

我可以在我的 Java 代码中轻松获取“A 到 1，B 到 2，C 到 3”结构，将其放入`Map`（或其他对象）中，然后通过`request.setAttribute("myData", myMap);`. 我只是不确定如何将`Map`（等）转换为所需的 JavaScript 对象。这是我尝试过的。

```
//Java
Map<String, String> myMap = new TreeMap<String, String>();
map.put("A", "1");
map.put("B", "2");
map.put("C", "3");
request.setAttribute("myMap", myMap);

//JSP
<c:set var="myData" value="{" />
<c:forEach var="mapEntry" items="${myMap}" varStatus="counter">
    <c:set var="myData" value="${myData}'${mapEntry.key}' : '${mapEntry.value}'" />
    <c:if test="${counter.count < fn:length(myMap)}">
        <c:set var="myData" value="${myData}, " />
    </c:if>
</c:forEach>
<c:set var="myData" value="${myData}}" />

<script>
    var myData = '${myData}';
    $("#mySelectorId").myJqueryFunction({values: myData});
</script> 
```

这一直有效，直到`myJqueryFunction`它尝试做这样的事情：

```
var i = values[code]; 
```

本质上，它试图引用对象上的特定变量（例如，试图获取“B”的值，即 2）。请注意，这`code`是一个保存 A/B/C 值的函数参数。

我曾尝试过包含或不包含引号之类的`${mapEntry.key}`东西，但似乎没有任何效果。

有谁知道如何让这个工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T15:39:22.217

要在 JavaScript 中添加更多属性（包括按变量），可以使用此语法

```
var myData = {}; // Initial object
myData["A"] = "1";
myData["B"] = "2";
myData["C"] = "3"; 
```

然后`myData`是`{ "A" : "1", "B" : "2", "C" : "3" }`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T15:40:21.947

自从我完成 JSP 以来已经有一段时间了，但是您在`myData`JSP 调用的每次迭代中都覆盖了您的 var `forEach`，而不是连接到它。其次，您对“myJqueryFunction”的调用在语法上不正确，而不是`values: myData`您可能想要使用`{values: myData}`.

第三，您可能不想通过 JSP 手动组装 javascript 对象，应该有不错的库可以为您完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T20:06:42.737

一种解决方案是使用 AJAX/JSON。

在一个**NEW**控制器中（让它映射到`/MyControllerUrl`），使用 a`List`并用具有我们对象的字母和数量的对象填充它（让我们调用这个新对象`MyClass`）。

```
List<MyClass> myList = new ArrayList<MyClass>();
myList.add(new MyClass("A", "1"));
myList.add(new MyClass("B", "2"));
myList.add(new MyClass("C", "3"));
request.setAttribute("myList", myList); 
```

以上就是新控制器中的全部内容。而返回的JSP只有以下内容。

```
<c:out value="[" />

<c:forEach var="listItem" items="${myList}" varStatus="counter">
    {"letter": "${listItem.letter}", "number": "${listItem.number}"}<c:if test="${counter.count < fn:length(myList)}">,</c:if>
</c:forEach>

<c:out value="]" /> 
```

最后，在原来的 JSP 中，有以下内容。

```
<script>
    var myJsList= { };
    $.ajax({
        url: '${pageContext.request.contextPath}/MyControllerUrl',
        dataType: 'json',
        async: false,
        success: function(objectInfo) {
            $.each(objectInfo, function(key, object) {
                myJsList[object.code] = object.label;
            });
        }
    });
</script> 
```

请注意，我使用`.ajax`了代替，`.getJSON`以便我可以设置`async: false`该变量以便立即可供参考。

我不喜欢这个选项，因为它需要 2 次调用而不是 1 次。所以我会等着看是否有其他建议。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T22:21:44.293

如果您将 myData 作为字符串获取，并且您无法删除周围的引号`'${myData}'`（这似乎很奇怪，您不能，顺便说一句），那么试试这个：

将 JSP 的第一行更改为：

```
<c:set var="myData" value="var objMyData = {" /> 
```

并将您的脚本更改为：

```
<script>
    var myData = '${myData}';
    eval(myData);
    $("#mySelectorId").myJqueryFunction({values: objMyData});
</script> 
```

# entity-framework-migrations - 使用 Add-Migration 时包管理器控制台崩溃

> ID：13272942
> 
> 赞同：13
> 
> 时间：2012-11-07T15:36:15.143
> 
> 标签：entity-framework-migrations

我正在使用包管理器控制台将迁移添加到我的数据库中，由于某种原因它只是冻结并且什么都不做。停止它并继续使用它的唯一方法是使用任务管理器关闭 Visual Studio。这是一个已知的问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-18T17:35:08.117

我不确定这是否是一个已知问题，但我遇到了同样的问题，并找到了解决方案。

我不得不跑：

```
Enable-Migrations -ContextTypeName MyContext -ProjectName MyProject.Framework -StartUpProjectName MyProject.Web 
```

我在哪里指定：

*   `-ContextTypeName`作为我的上下文的名称
*   `-ProjectName`作为保存我的上下文文件的项目
*   `-StartUpProjectName`作为拥有 Web 应用程序的项目。

您可以参考此资源以获取更多信息：[http ://coding.abel.nu/2012/03/ef-migrations-command-reference/](http://coding.abel.nu/2012/03/ef-migrations-command-reference/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-17T14:56:56.630

根据[Sean Keating 的回答](https://stackoverflow.com/a/13442679/771496)，如果它解决了您的“启用迁移”问题，您必须知道它可能还不够。

**添加迁移**

要创建一个新的迁移脚本，您可以像平常一样进行操作：

```
Add-Migration MyModifications 
```

**更新数据库**

但是，要更新数据库，您必须指定上下文的项目：

```
Update-Database -ProjectName MyProject.Framework 
```

我在哪里指定：

*   `-ProjectName`作为保存我的上下文文件的项目

# entity-framework - 在没有可用的 ID 属性时加入 Linq-To-Entities

> ID：13272945
> 
> 赞同：0
> 
> 时间：2012-11-07T15:36:26.227
> 
> 标签：entity-framework, join, linq-to-entities, entity-framework-4.1

给定一个`Order`具有许多`OrderItem`s 的实体，而每个实体都有一个 s，`Discount`我们试图检索所有具有至少一个折扣的订单，该折扣比`50%`连接订单和订单商品要多。

有很多关于在 Linq-To-Entities 中加入两个实体的文章，但它们的共同点是它们都依赖于作为导航属性公开的外键：

```
db.Orders.Join(
    db.OrderItems.Where(i => i.Discount > 50),
    o => o.Id,
    i => i.OrderId) 
```

但是，我们`OrderItem`没有`OrderId`财产。`Order`具有标识关系的属性`OrderItems`，外键由 EF4.1 CodeFirst 管理。

**问题：**有没有办法通过指示`o => o.OrderItems`识别关系并让 EF 找出用于连接的 FK 来执行连接？

* * *

在后台：我们尝试在**DevArt dotConnect**`.Any`上使用，`OrderItems`但存在一个重大问题：

 **```
db.Orders.Where(o => o.OrderItems.Any(i => i.Discount > 50)) 
```**

# coldfusion - CFReport 产生空白页

> ID：13272949
> 
> 赞同：2
> 
> 时间：2012-11-07T15:36:29.997
> 
> 标签：coldfusion, coldfusion-9, cfreport

我正在将网站从环境 A 移动到环境 B。我目前的挂断是预先存在的 ColdFusion 报告没有运行。该页面加载一个空白的 html 文档，而不是像报告应该生成的 PDF 文件。即如果我查看页面源它是空白的。没有错误，没有评论......什么都没有，只是空白。

我不太了解使用 .cfr 文件，或者服务器端是否需要任何东西才能使它们工作。新环境超出了我的控制范围，因此如果我没有提供足够的信息，我将不得不向他们询问详细信息。我在任何文档中发现的唯一内容是：

> 在运行时，您使用启用了 ColdFusion Reporting 的 ColdFusion 服务器来显示 CFR 文件。

我可以在 ColdFusion Admin 中找到的唯一报告设置是 cfreport 的最大线程数。我是否遗漏了可以启用或禁用报告的内容？

从一种环境转移到另一种环境时，报告没有被修改。.cfr 文件被直接访问，并在 CFRB 中配置为允许访问。

* * *

```
                                      更新
```

* * *

我尝试在新环境中的不同服务器上运行报告，结果相同。当然，系统管理员不知道其他任何人尝试使用 .cfr 文件，因此他们也不确定。我什至尝试在报告中切换“允许直接.cfr 浏览器调用”选项，但它没有改变任何东西。现在，如果我使用 cfreport 标记来调用它们，报告将运行，因此我将创建一个页面来使用 cfreport 运行少数报告。由于这不是原始问题的解决方案，因此我不会使用此解决方法回答我自己的问题。

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-09T12:27:35.953

此后，我将另一个网站从 32 位 ACF9 移动到 64 位 ACF11 Windows Server 2003 到 2012。我遇到了类似的问题，尽管它的呈现方式有所不同。我得到一个 IIS 404.0 错误，而不是一个空白的白页。在使用 IIS 处理程序、确认 ACF wsconfig 设置、使用 cfusion/bin/connectors 工具删除/重建 IIS 连接器并与不知道 .cfr 文件是什么的相当无用的 Adob​​e 支持人员交谈之后，我发现只需使用`cfreport`调用报告即可解决我迄今为止遇到的几乎所有问题。对于其他遇到此问题的人，我将遵循 Adob​​e 的示例，而忘记 CF 的这个“功能”。以 HTML 格式构建输出并使用`cfpdf`, `cfdocument`, 或`cfspreadsheet`作为您的输出。

```
<!--- instead of --->
<cflocation url = "xyz.cfr">
<!--- use --->
<cfreport report = "xyz.cfr" format = "pdf"></cfreport> 
```

# actionscript-3 - 如何在 ActionScript3 中检查超类中的子类类型

> ID：13272950
> 
> 赞同：1
> 
> 时间：2012-11-07T15:36:29.200
> 
> 标签：actionscript-3

我想在超类中获得子类类型。我试过

```
if(this is SubClass1) 
```

在超级班但失败了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T16:15:08.327

您的代码有效：

```
package{
    import flash.display.Sprite;

    public class TestSuperClass extends Sprite{
        public function TestSuperClass(){
            super();
            trace((new SuperClass).isSubclass); // Output : false
            trace((new Extended).isSubclass); // Output : true
        }
    }
}

internal class SuperClass
{
    public function get isSubclass() : Boolean{
        return this is Extended;
    }
}

internal class Extended extends SuperClass {} 
```

您可以动态地执行此操作（这很丑陋，对性能不友好，但可以完成工作）：

```
package{
    import flash.display.Sprite;

    public class TestSuperClass extends Sprite{
        public function TestSuperClass(){
            super();

            trace((new SuperClass).isSubclass); // Output : false
            trace((new SuperClass).superClass); // Output : Object
            trace((new Extended).isSubclass); // Output : true
            trace((new Extended).superClass); // Output : SuperClass
        }
    }
}
import flash.utils.describeType;

internal class SuperClass
{
    public function get isSubclass() : Boolean{
        return describeType(this).@base.toString() != "Object";
    }

    public function get superClass() : String
    {
        return describeType(this).@base.toString().split("::").pop();
    }
}

internal class Extended extends SuperClass {} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T16:30:57.843

超类不知道他的子类，也不应该知道。一个子类扩展了他的超类，所以应该知道他的超类。

你想要达到的目标是不可能的。应该有其他（更好的）方法来解决您的问题/架构。

# ios - Bonjour 是否适合硬件通信？

> ID：13272952
> 
> 赞同：0
> 
> 时间：2012-11-07T15:36:31.883
> 
> 标签：ios, ios5, networking, bonjour

迄今为止，我的网络经验几乎为零。我在大学里做过一些理论，但实践经验很少。在过去的几周里，我一直在阅读 IOS 网络 API 和更基本的主题，例如 tcp /udp /dns 等。

我正在慢慢开始吸收这些信息，但在我进一步冒险之前，我想知道我是否在寻找适合我的目的的正确区域。

我有一个可以连接到本地网络的硬件设备。我确信其他人已经编写了代码来通过他们的 ipad 上的 wifi（osc 命令）来控制这个设备。

**现在我的问题：**

*bonjour 适合这种类型的连接还是只适合发布/订阅应用程序？*

知道我是否在 bonjour 上浪费时间会很有帮助。此外，任何关于 IOS 和网络硬件之间的 tcp 连接的具体阅读材料都会有很大帮助*（由于我缺乏知识，我的谷歌搜索标准缺乏）*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T16:06:27.420

首先让我们了解一下 Bonjour 的基本含义：Bonjour 是 Apple 提出的基于 IP 的零配置网络。Bonjour 来自 ZEROCONF 工作组的工作，该工作组是 Internet 工程任务组 (IETF) 的一部分。ZEROCONF 工作组对 IP 零配置网络的要求和提议的解决方案主要涵盖三个领域：

*   寻址（将 IP 地址分配给主机）
*   命名（使用名称来指代主机而不是 IP 地址）
*   服务发现（自动在网络上查找服务）

所以基本上 Bonjour 使您的应用程序可以轻松地发布、发现和解析网络服务。您对 Bonjour 无能为力。休息，与其他设备的通信，您需要使用套接字（TCP 连接）来处理。

所以简单来说，硬件不存在合适与不合适的问题。

*注意：Bonjour 仅发现同一网络或同一 LAN 上的设备。*

# java - 如何呈现对象数组，如另一个对象的数组

> ID：13272954
> 
> 赞同：0
> 
> 时间：2012-11-07T15:36:37.657
> 
> 标签：java

我有

```
class ForeighObject {...}
void someMethod(Object[]) {...} 
```

和

```
ForeighObject[] fobjects = SomeStorage.getObjects(); 
```

我只能用 fobjects 操作，所以我既不能改变也不`ForeighObject`改变`someMethod`. 如何覆盖`ForeighObject.toString`（例如）将其传递给`someMethod`不复制元素？我可以创建一些可以“呈现”`ForeighObject`以仅覆盖一种方法的适配器类吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T15:51:05.937

我不太确定你的意思，但我猜这`someMethod`会调用`toString`它给定的对象数组的元素。

如果是这种情况，那么您可以使用包含预期方法`fobjects`的包装子类来包装每个元素。`ForeighObject``toString`

例如

```
//Subclass which wraps a ForeighObject instance..
class ForeighObjectWrapper extends ForeighObject {
    ForeighObject wrapped;
    ForeighObjectWrapper(ForeighObject toWrap){
       super(/* get values from toWrap */);
        this.wrapped = toWrap;
    }
    //Add the custom behaviour..
    public String toString(){
         return "Some custom behaviour: " + wrapped.toString();
    }
}

ForeighObject[] fobjects = SomeStorage.getObjects();  //as before..
ForeighObject[] fobjectsWrapped = new ForeighObject[fobjects.length];
for(ForeighObject ob : fObjects){
    fobjectsWrapped.add(new ForeighObjectWrapper(ob));
}

//then call someMethod on fobjectsWrapped instead of fobjects..
someMethod(fobjectsWrapped); //will invoke custom behaviour.. 
```

请注意，如果 someMethod 还依赖于包装实例的其他方法/属性的行为，那么您需要覆盖这些方法，以便它们按预期工作。

# c++ - 是 numeric_limits ::is_modulo 逻辑矛盾？

> ID：13272959
> 
> 赞同：26
> 
> 时间：2012-11-07T15:36:58.260
> 
> 标签：c++, c++11, language-lawyer

在[另一个问题](https://stackoverflow.com/questions/13150449/)中，出现了话题`std::numeric_limits<int>::is_modulo`。但是我想得越多，规范或 GCC 或两者似乎都有问题。

让我从一些代码开始：

```
#include <limits>
#include <iostream>

bool test(int x)
{
    return x+1 > x;
}

int main(int argc, char *argv[])
{
    int big = std::numeric_limits<int>::max();

    std::cout << std::numeric_limits<int>::is_modulo << " ";
    std::cout << big+1 << " ";
    std::cout << test(big) << "\n";
} 
```

当我使用`g++ -O3 -std=c++11`(x86_64 GCC 4.7.2) 编译它时，它会产生以下输出：

```
1 -2147483648 1 
```

即，`is_modulo`为真，一加`INT_MAX`为负，一`INT_MAX`加大于`INT_MAX`。

如果您是那种有实际机会回答这个问题的人，那么您已经知道这里发生了什么。C++ 规范说整数溢出是未定义的行为；允许编译器假设您不这样做；因此论点`x+1`不能是`INT_MAX`；因此编译器可以（并且将）编译该`test`函数以`true`无条件返回。到目前为止，一切都很好。

但是，[C++11 规范](https://stackoverflow.com/questions/7238958/)也说（18.3.2.4 第 60-61 段）：

> **`static constexpr is_modulo;`**
> 
> 如果类型为模，则为真。222 如果对于任何涉及`+`、`-`或`*`对该类型的值的结果超出范围的操作`[min(),max()]`，返回的值与真值相差 的整数倍，则该类型为模`max() - min() + 1`。
> 
> 在大多数机器上，这`false`适用于浮点类型、`true`无符号整数和`true`有符号整数。

请注意，第 5 节第 (4) 节仍然写道，“如果在计算表达式期间，结果未在数学上定义或不在其类型的可表示值范围内，则行为未定义。” 没有提到`is_modulo == true`创建异常。

所以在我看来，标准在逻辑上是矛盾的，因为整数溢出不能同时定义和未定义。或者至少，GCC 是不符合标准的，因为`is_modulo`即使`true`有符号算术肯定不会环绕它。

标准的越野车吗？GCC 不合格吗？我错过了什么吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-07T17:32:33.793

如果`is_modulo`对于通常算术转换未更改的`true`有符号类型（例如`int`），则对于除被零除以外的任何算术运算，在模映射到范围内的单个值的（数学）整数中都有一个正确的结果类型，因此实现被限制为好像实际结果是对类型范围取模的真实结果。因此，如果一个实现想要将溢出算术保留为未定义，它必须设置`is_modulo`为`false`.

这在 gcc 邮件列表中被讨论*得令人作呕*，然后在[PR 22200](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=22200)下进行了讨论，最终得出的结论是 的值`is_modulo`应该是`false`有符号类型的；今年 4 月对 libstdc++ 进行[了更改。](http://gcc.gnu.org/viewcvs?view=revision&revision=186944)

请注意，在 C++03 中，语言明显不同：

> ### ~~18.2.1.2 numeric_limits 成员 [lib.numeric.limits.members]~~
> 
> 56 - [...] 如果可以将两个正数相加并且结果可以环绕到第三个较小的数字，则该类型是模数。

鉴于未定义的行为*一切*皆有可能，有争议的是 libstdc++ 的先前行为（具有`is_modulo`as `true`）是正确的并且与 g++ 的行为一致；在阅读之前关于链接 PR 的讨论时，应牢记这一点。

# nginx - 无法更改 php.ini 中的 upload_max_filesize 或 post_max_size

> ID：13272964
> 
> 赞同：8
> 
> 时间：2012-11-07T15:37:10.370
> 
> 标签：nginx, amazon-ec2, php, ec2-ami

请记住，我不是系统管理员，我只是一名开发人员。我找不到任何与我有*确切*问题的人，只是相似，而且他们的“修复”似乎都不起作用。

我目前正在运行一个正在运行的 Amazon EC2 实例。

```
CentOS 6.2
Nginx 1.2.2
PHP 5.3.16 with APC
Percona 5.5.24 // not currently using this as I am using an RDS 
```

我已将我的 php.ini (/etc/php.ini) 设置设置为以下

```
upload_max_filesize=10M
post_max_filesize=20M 
```

使用通过 ssh 重新加载配置后`php -i`，这些设置似乎已加载。展示`upload_max_filesize=10M`等

使用`phpinfo()`or`ini_get`时，两个选项都返回为`4M`

`phpinfo()`表示我正在编辑的文件是已加载的文件 ( `/etc/php.ini`)。

我还跑来`php -i | grep "\.ini"`检查加载了哪些文件，并且没有不必要的加载配置。我什至单独浏览了每个加载的文件，以检查它们里面没有设置。

此外，有人建议我尝试使用`.user.ini`配置文件。这也没有改变值。

`ini_set()`也不起作用。

我有点不知所措。

编辑：不确定这会有所帮助，但我正在使用这个 AMI [http://megumi-cloud.com/](http://megumi-cloud.com/)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-06-09T09:52:47.527

文件名：

```
nginx/sites-available/default 
```

添加：

```
location ~ \.php$ {
      fastcgi_param PHP_VALUE "upload_max_filesize = 50M \n post_max_size=51M";
} 
```

运行：从命令行：`sudo service nginx restart`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-08T10:13:51.173

尝试执行如下命令：

```
php --ini 
```

它将向您显示 php 加载了哪些 ini 文件。

示例输出：

```
[admin@staging ~]$ php --ini
Configuration File (php.ini) Path: /usr/local/etc
Loaded Configuration File:         /usr/local/etc/php.ini
Scan for additional .ini files in: /usr/local/etc/php
Additional .ini files parsed:      /usr/local/etc/php/extensions.ini 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-08T10:09:27.203

我与制作 AMI 的人取得了联系，发现有其他配置文件覆盖了`php.ini`

有 2 个文件保存设置

```
/etc/php-fpm.d/www.conf // This is the file which holds upload_max_filesize and post_max_size, among others
/etc/php-fpm.conf 
```

显然，不同配置的位置可能会有所不同，但希望这将有助于让人们了解还需要寻找什么。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-07T16:38:50.370

如果您在 php.ini 文件中明确设置了这些值，并且在您运行 PHP 脚本时它们不一样，那么某些东西已经覆盖了它们。您知道您的 php.ini 设置是正确的，因为 PHP 信息的 CLI 版本显示了新设置。

> 我也运行了 php -i | grep ".ini" 检查加载了哪些文件，并且没有不必要的加载配置。我什至单独浏览了每个加载的文件，以检查它们里面没有设置。

这很好，但它告诉您从 PHP CLI 加载了哪些 .ini 文件——而不是您的应用程序。

您需要检查输出的*Additional .ini files parsed*部分，`phpinfo()`以准确查看从 Web 服务器加载的文件。其中一个文件正在覆盖您的设置。

最后，如果这些文件都不是罪魁祸首，您应该`ini_set()`在您的项目中进行全局查找，以确保某些流氓脚本没有为您设置这些值（试图提供*帮助*）。

继续挖掘，你会在这两个地方之一找到罪魁祸首。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-04-17T07:19:48.450

我遇到了 PHP 应用程序抱怨上传文件大小的同样问题。使用命令 lilne version of php (php --ini) 我确定 php.ini 文件为：/etc/php5/cli/php.ini

使用 php -info 我验证了设置。但应用程序仍然给了我同样的错误。我发现 PHP 对 CLI 和 Apache 有不同的 ini 文件。检查你的 /etc/php5 文件夹，里面有 apache2 和 cli 文件夹，里面有单独的 ini 文件。只需编辑 /etc/php5/cli/php.ini 即可更改 apache 设置。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-18T07:12:44.957

重新启动您的网络服务器。这就是你需要做的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-08-30T21:01:38.633

类似于这里已经注意到的内容：在 Ubuntu 16.04 上，我所做`systemctl reload php7.0-fpm`的更改是`upload_max_filesize`为了生效。我不必重新加载/重新启动 nginx。

（php7.0 是我机器上安装的当前 PHP 版本。）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-03-03T17:05:38.580

> 请记住，我不是系统管理员，我只是一名开发人员。我找不到任何与我有确切问题的人，只是相似，而且他们的“修复”似乎都不起作用。

我在同一条船上，遇到同样的问题，结果证明它们是相关的！

我已经包含要增加的行`upload_max_filesize`，`post_max_size`但这些被忽略并`phpinfo()`返回默认值。我已经重新启动了 Apache，并且还检查了`.ini`正在加载的附加文件，没有任何乐趣。

解决方案是我添加了行以在文件开头附近增加这些参数，并且稍后它们会在同一个文件中被覆盖！

因此，如果您遇到此问题，请确保您没有犯同样的愚蠢错误，并`Ctrl-F`找到声明的原始实例，然后对其进行编辑而不是添加您自己的 ;)

# javascript - 即使预加载了图像数组，性能也很差

> ID：13272967
> 
> 赞同：3
> 
> 时间：2012-11-07T15:37:17.443
> 
> 标签：javascript, jquery, html

我正在制作一个小部件，它显示一个随鼠标位置旋转的 3D 立方体。我使用 if/else 实现了效果，它将浏览器窗口视为 24 个单独的水平部分，并根据鼠标触摸的部分显示适当的旋转阶段。在本地运行良好，但在线查看时性能完全下降。我认为预加载图像会有所不同，但这似乎对性能没有帮助。我的猜测是，即使图像已经预加载，仍然会从服务器调用这些图像。每个图像大小约为 2kb。有任何想法吗？

完整代码如下：

```
<!DOCTYPE html>
<head>
<title> Move your mouse, rotate the cube</title>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script language="JavaScript">    
      function rackEmUp()   {
      var i = 0;

      imageObj = new Image();

      images = new Array();
      images[0]="img/1.png"
      images[1]="img/2.png"
      images[2]="img/3.png"
      images[3]="img/4.png"
      images[4]="img/5.png"
      images[5]="img/6.png"
      images[6]="img/7.png"
      images[7]="img/8.png"
      images[8]="img/9.png"
      images[9]="img/10.png"
      images[10]="img/11.png"
      images[11]="img/12.png"
      images[12]="img/13.png"
      images[13]="img/14.png"
      images[14]="img/15.png"
      images[15]="img/16.png"
      images[16]="img/17.png"
      images[17]="img/18.png"
      images[18]="img/19.png"
      images[19]="img/20.png"
      images[20]="img/21.png"
      images[21]="img/22.png"
      images[22]="img/23.png"
      images[23]="img/24.png"

      for(i=0; i<=23; i++) {
           imageObj.src=images[i];
      }    
                                  }     
    rackEmUp();  </script>
</head>
<body>

 <img class="boxStage" src="img/1.png">

 <script type="text/javascript">

 $(document).mousemove(function(event){
     var mloc = {
         x: event.pageX
     };

     if( 
         (mloc.x >= 0 && mloc.x <= $(document).width()*0.04)
     ){
         $(".boxStage").attr("src", images[0]);

     } else if

     ( 
         (mloc.x >= 0 && mloc.x <= $(document).width()*0.08)
     ){
         $(".boxStage").attr("src", images[1]);

     } else if

     ( 
         (mloc.x >= 0 && mloc.x <= $(document).width()*0.12)
     ){
         $(".boxStage").attr("src", images[2]);

     } else if

     ( 
         (mloc.x >= 0 && mloc.x <= $(document).width()*0.16)
     ){
         $(".boxStage").attr("src", images[3]);

     } else if

     ( 
         (mloc.x >= 0 && mloc.x <= $(document).width()*0.20)
     ){
         $(".boxStage").attr("src", images[4]);

     } else if

     ( 
         (mloc.x >= 0 && mloc.x <= $(document).width()*0.24)
     ){
         $(".boxStage").attr("src", images[5]);

     } else if

     ( 
         (mloc.x >= 0 && mloc.x <= $(document).width()*0.28)
     ){
         $(".boxStage").attr("src", images[6]);

     } else if

     ( 
         (mloc.x >= 0 && mloc.x <= $(document).width()*0.32)
     ){
         $(".boxStage").attr("src", images[7]);

     } else if

     ( 
         (mloc.x >= 0 && mloc.x <= $(document).width()*0.36)
     ){
         $(".boxStage").attr("src", images[8]);

     } else if

     ( 
         (mloc.x >= 0 && mloc.x <= $(document).width()*0.40)
     ){
         $(".boxStage").attr("src", images[9]);

     } else if

     ( 
         (mloc.x >= 0 && mloc.x <= $(document).width()*0.44)
     ){
         $(".boxStage").attr("src", images[10]);

     } else if

     ( 
         (mloc.x >= 0 && mloc.x <= $(document).width()*0.48)
     ){
         $(".boxStage").attr("src", images[11]);

     } else if

     ( 
         (mloc.x >= 0 && mloc.x <= $(document).width()*0.52)
     ){
         $(".boxStage").attr("src", images[12]);

     } else if

     ( 
         (mloc.x >= 0 && mloc.x <= $(document).width()*0.56)
     ){
         $(".boxStage").attr("src", images[13]);

     } else if

     ( 
         (mloc.x >= 0 && mloc.x <= $(document).width()*0.60)
     ){
         $(".boxStage").attr("src", images[14]);

     } else if

     ( 
         (mloc.x >= 0 && mloc.x <= $(document).width()*0.64)
     ){
         $(".boxStage").attr("src", images[15]);

     } else if

     ( 
         (mloc.x >= 0 && mloc.x <= $(document).width()*0.68)
     ){
         $(".boxStage").attr("src", images[16]);

     } else if

     ( 
         (mloc.x >= 0 && mloc.x <= $(document).width()*0.72)
     ){
         $(".boxStage").attr("src", images[17]);

     } else if

     ( 
         (mloc.x >= 0 && mloc.x <= $(document).width()*0.76)
     ){
         $(".boxStage").attr("src", images[18]);

     } else if

     ( 
         (mloc.x >= 0 && mloc.x <= $(document).width()*0.80)
     ){
         $(".boxStage").attr("src", images[19]);

     } else if

     ( 
         (mloc.x >= 0 && mloc.x <= $(document).width()*0.84)
     ){
         $(".boxStage").attr("src", images[20]);

     } else if

     ( 
         (mloc.x >= 0 && mloc.x <= $(document).width()*0.88)
     ){
         $(".boxStage").attr("src", images[21]);

     } else if

     ( 
         (mloc.x >= 0 && mloc.x <= $(document).width()*0.92)
     ){
         $(".boxStage").attr("src", images[22]);

     } else if

     ( 
         (mloc.x >= 0 && mloc.x <= $(document).width()*0.96)
     ){
         $(".boxStage").attr("src", images[23]);

     } else

     {
         $(".boxStage").attr("src", images[0]);
     };
        }); </script> </body> </html> 
```

编辑：感谢大家的帮助-我最终制作了一张大横幅图像并根据鼠标的位置更改了 CSS background-position 属性。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T15:51:29.657

创建一个大图像 Sprite 并更改 CSS 背景位置，而不是单独加载每个图像。这应该会提高性能，因为您将使用一个图像处理一个 HTTP 请求，而不是 24 个图像和请求

你会发现这很有用：[http](http://spritely.net/) ://spritely.net/特别是如果你想做更复杂的动画。

这里是精灵动画的例子：http: [//cloud.github.com/downloads/Dhirajkumar/DG_Slider/animated-backgound-image-sprite.htm](http://cloud.github.com/downloads/Dhirajkumar/DG_Slider/animated-backgound-image-sprite.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T16:26:28.770

我会这样做，

两全其美（感谢 Shmiddty 关于计算图像索引的建议）：

```
var images = [],
    $stage = $('.stage'),
    oldIndex;

function preload() {
    for (i = 0; i < preload.arguments.length; i++) {
        images[i] = new Image();
        images[i].src = preload.arguments[i];
    }
}

preload(
   "http://draves.org/pix/kdn/gen/acanthametra/big%20two%20spike%20star%20copy.small.jpg",
   "http://draves.org/pix/kdn/gen/ascidiae/orange%20ten%20branch%20copy.small.jpg", 
   "http://draves.org/pix/kdn/gen/ascidiae/six%20star%20copy.small.jpg");

$(document).mousemove(function(event) {
    var mloc       = { x: event.pageX },
        imageIndex = Math.floor(mloc.x / $(document).width() * images.length);

    if (oldIndex !== 'undefined' && oldIndex !== imageIndex) {

        oldIndex = imageIndex;
        $stage.css('background-image', 'url(' + images[imageIndex].src + ')');
    }
});​ 
```

**JSFiddle**
[http://jsfiddle.net/rzY5L/2/](http://jsfiddle.net/rzY5L/2/)

更多这些预加载器可以在这里找到（尽管在某些部分已经过时）： http:
[//perishablepress.com/3-ways-preload-images-css-javascript-ajax/](http://perishablepress.com/3-ways-preload-images-css-javascript-ajax/)

**更新**
闪烁的图像似乎与 .png 处理有关（至少在 Chrome 上它似乎在更改图像时闪烁）。一种解决方案是创建这些图像的 base64 版本。转换器可以在这里找到：http:
[//www.greywyvern.com/code/php/binary2base64](http://www.greywyvern.com/code/php/binary2base64)

**Base64 小提琴（无闪烁）**
[http://jsfiddle.net/rzY5L/3/](http://jsfiddle.net/rzY5L/3/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T16:03:30.040

来自[w3Schools](http://www.w3schools.com/jsref/dom_obj_image.asp)：*“对于 HTML 文档中的每个标签，都会创建一个 Image 对象。”*

我了解您一直在使用[此链接](http://www.techrepublic.com/article/preloading-and-the-javascript-image-object/5214317)。但在我看来，你只有一个图像对象。`new Image()`尝试为您尝试预加载的每个图像创建一个，即

```
var image1 = new Image(); 
image1.src= 'img/1.png'; 

var image2 = new Image(); 
image2.src = 'img/2.png' 

... 
```

这是另一个[有用的链接](http://www.proglogic.com/learn/javascript/lesson10.php)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-07T16:08:02.157

我使用的工作代码示例：

```
// preload images
var images = new Array()
function preload() {
    for (i = 0; i < preload.arguments.length; i++) {
        images[i] = new Image()
        images[i].src = location.origin + "/PaymentManager" + preload.arguments[i]
    }
}
preload("/res/cards/visa.png","/res/cards/mastercard.png","/res/cards/amex.png","/images/loader.png"); 
```

似乎您需要为每个图像创建一个新的 Image 对象。

# html - 修复简单 div 中 body 标记上方的标题

> ID：13272970
> 
> 赞同：0
> 
> 时间：2012-11-07T15:37:22.773
> 
> 标签：html

我有一个简单的 div 标签：我需要将 thead 固定在 tbody 上方。我需要将它们放在同一个 div、同一个表中。使用下面的代码，我的标题在正文上方。我怎样才能将 tbody 向下推几个槽口，所以当我滚动时，标题是固定的，只有身体移动

```
<div STYLE=" height: 120px; width: 100px; font-size: 12px; overflow: auto;">
  <table bgcolor="green">
    <thead style="position:fixed;">
        <tr><td bgcolor="#fafafa">hello</td></tr>
    </thead>
    <tbody >
   <tr><td bgcolor="#dadada">www.hioxindia.com</td></tr>
   <tr><td >maths.hscripts.com</td></tr>
   <tr><td bgcolor="#dadada">www.hscripts.com</td></tr>
   <tr><td>free php scripts</td></tr>
   <tr><td bgcolor="#dadada">www.hiox4u.com</td></tr>
   </tbody>
</table>
</div> 
```

必须在 IE 上工作 对于上述 div... 我需要在表格顶部添加带有固定标题的滚动条。中间不应包含额外的 div 或表格。我需要 thead 和 tbody 在同一个表中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T21:48:34.207

以您的代码为基础，这是我在 Chrome 和 IE10 中测试过的一个 jsfiddle，它至少在那里工作。

JSFiddle：http: [//jsfiddle.net/YbQzF/](http://jsfiddle.net/YbQzF/)

代码：

```
<div STYLE=" height: 120px; width: 100px; font-size: 12px; overflow: auto;">
  <table bgcolor="green">
    <thead style="position: fixed">
        <tr><td bgcolor="#fafafa">hello</td></tr>
    </thead>
    <tbody style="overflow:scroll; max-height:100px; position:absolute; top:20px;">
   <tr><td bgcolor="#dadada">www.hioxindia.com</td></tr>
   <tr><td >maths.hscripts.com</td></tr>
   <tr><td bgcolor="#dadada">www.hscripts.com</td></tr>
   <tr><td>free php scripts</td></tr>
   <tr><td bgcolor="#dadada">www.hiox4u.com</td></tr>
   <tr><td>free php scripts</td></tr>
   <tr><td bgcolor="#dadada">www.hiox4u.com</td></tr>
   <tr><td>free php scripts</td></tr>
   <tr><td bgcolor="#dadada">www.hiox4u.com</td></tr>
...
   </tbody>
</table>
</div>​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T20:36:14.150

```
table { margin-top:-3em; }
thead { margin-top:-2em; } 
```

在我的计算机上的 FF 和 Chrome 中工作。这是可怕和骇人听闻的，我不同意这个消息，但它有效。

# ruby - 如何从 Ruby 中调用 Windows DLL？

> ID：13272971
> 
> 赞同：4
> 
> 时间：2012-11-07T15:37:26.333
> 
> 标签：ruby, windows, dll

在 Ruby 中使用自定义 DLL 的最简单方法是什么？

在 Python 中，我将使用*ctypes*，正如本[示例](https://stackoverflow.com/a/3173926/740316)中所描述的那样。但是现在我应该如何在 Ruby 中做到这一点，最好使用原生功能而不是第三方库？Ruby 有什么方法可以像 Python 一样简单地操作 DLL 吗？

谢谢哦/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T13:58:29.117

试试 Ruby 的[`FFI`模块](http://www.rubyinside.com/ruby-ffi-library-calling-external-libraries-now-easier-1293.html)。

两个帮助您入门的示例：

1.  [从返回指向字符串的指针的 DLL 调用 C 函数](https://stackoverflow.com/a/14182535/181638)

2.  [从 Ruby 中调用 Win32 函数](https://stackoverflow.com/a/14182709/181638)

较旧的`DL`模块似乎使用[较少](http://wmeissner.blogspot.co.uk/2008/11/more-on-ruby-ffi.html)且不[那么容易](https://stackoverflow.com/a/269645/181638)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T16:55:04.437

看看[`dl`标准库中的模块](http://ruby-doc.org/stdlib-1.9.3/libdoc/dl/rdoc/DL.html)。它没有出色的文档记录，但是那里的示例应该为您指明正确的方向。

Ruby 曾经有一个`Win32API`可在 Windows 中使用的模块，但[现在已弃用](https://github.com/ruby/ruby/blob/v1_9_3_286/ext/dl/win32/lib/Win32API.rb#L3)，因此您应该直接使用`dl`。

# android - 删除谷歌地图中的所有 MapOverlays (Android 2.2)

> ID：13272973
> 
> 赞同：-1
> 
> 时间：2012-11-07T15:37:31.757
> 
> 标签：android, google-maps

我想删除之前创建的所有 MapOverlays。不幸的是，我的代码不起作用。谢谢。

```
mapOverlays = mapView.getOverlays();
mapOverlays.clear();

mapView.invalidate(); 
```

编辑：现在我用 mapView.postInvalidate(); 纠正了它 出现同样的问题。这是我的整个代码：

```
public class GMapsSubActivity extends MapActivity {

Button b1;
TextView t1, t2;
MapView mapView;
Drawable marker;
GMapsItemizedOverlay itemizedoverlay, markerOverlay;
List<Overlay> mapOverlays;
MapController mc;
int i;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_gmaps_sub);

    mapView = (MapView) findViewById(R.id.mapview);
    mapView.setBuiltInZoomControls(true);

    GeoPoint htl = new GeoPoint(47821995, 13046345);

    mc = mapView.getController();
    mc.setCenter(htl);
    mc.setZoom(17);

    marker = this.getResources().getDrawable(R.drawable.marker);
    markerOverlay = new GMapsItemizedOverlay(marker, this);

    this.b1 = (Button) findViewById(R.id.gmapssub_button1);
    this.t1 = (TextView) findViewById(R.id.gmapssub_textView1);
    this.t2 = (TextView) findViewById(R.id.gmapssub_textView2);

    // onClickListener zuweisen
    this.b1.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            toggleSatellite();
        }
    });

    i = 8;

    // LocationManager
    LocationManager lm = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
    LocationListener ll = new LocationListener() {

        public void onStatusChanged(String provider, int status, Bundle extras) {
            // TODO Auto-generated method stub

        }

        public void onProviderEnabled(String provider) {
            // TODO Auto-generated method stub

        }

        public void onProviderDisabled(String provider) {
            // TODO Auto-generated method stub

        }

        public void onLocationChanged(Location location) {
            // TODO Auto-generated method stub
            if (location != null) {
                double pLat = location.getLatitude();
                double pLong = location.getLongitude();

                t1.setText(Double.toString(pLat));
                t2.setText(Double.toString(pLong));

                if(i == 8) {
                    i = 0;
                    mapOverlays = mapView.getOverlays();
                    mapOverlays.clear();

                    GeoPoint myPos = new GeoPoint((int) (pLat * 1E6), (int) (pLong * 1E6));
                    OverlayItem overlayitem = new OverlayItem(myPos, "Your current Location", "You are here!");
                    markerOverlay.addOverlay(overlayitem);
                    mapOverlays.add(markerOverlay);

                    mapView.postInvalidate();

                    mc.animateTo(myPos);
                } else {
                    i++;
                }
            }
        }
    };

    lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, ll);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_gmaps_sub, menu);
    return true;
}

@Override
protected boolean isRouteDisplayed() {
    return false;
}

private void toggleSatellite() {
    if (mapView.isSatellite() == true) {
        mapView.setSatellite(false);
    } else {
        mapView.setSatellite(true);
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T15:44:04.260

尝试`mapView.postInvalidate()`代替`mapView.invalidate()`. 请参阅[文档](https://developers.google.com/maps/documentation/android/reference/)> MapView > getOverlays()。

# javascript - 将数组的元素与同一数组的所有先前输入的元素进行比较

> ID：13272980
> 
> 赞同：0
> 
> 时间：2012-11-07T15:38:01.493
> 
> 标签：javascript, arrays, for-loop

当用户仍在输入此数组的值时

```
for( var i=0;i<names.length;i++)
{  
   ID[i]=prompt("Enter The Id number of "+names[i],"ID number");
   for(var w=0;w<ID.length;w++)
{ 
   if(ID[i]==ID[i-1])
   {
       window.alert("You Have Already Entered That Id Number!");
       break;
   }
}

} 
```

我知道这仅将 ID[1] 与 ID[0] 进行比较。

我不希望它比较 ID[0]，因为它是输入的第一个元素

那么如何修改它以便将 ID[i] 与之前输入的所有 ID 进行比较？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T15:56:45.990

这将允许您重新输入重复值。

```
for( var i=0;i<names.length;i++)
{
   ID[i]=prompt("Enter The Id number of "+names[i],"ID number");
   if(ID.slice(0,i).indexOf(ID[i])>-1)
   {
      window.alert("You Have Already Entered That Id Number!");
      i--;
   }
} 
```

编辑 - 显然 Internet Explorer <= 8 没有实现`Array.indexOf()`，所以如果这是一个问题，你需要自己添加它。

# php - 不能声明自引用常量

> ID：13272981
> 
> 赞同：0
> 
> 时间：2012-11-07T15:38:02.690
> 
> 标签：php, apache, abort

在向我的 apache 服务器发送请求并获得 Aborted 响应期间出现错误。有什么问题？

重新启动 apache 代码后运行良好，但有时会停止进程并放弃 Aborted，然后我必须重新启动 apache。

> [2012 年 11 月 6 日星期二 08:19:46] [错误] [客户端 37.63.173.114] PHP 致命错误：无法在 /home/sweb/project/library/Zend/File/Transfer 中声明自引用常量 '(null)' /Adapter/Abstract.php 在第 339 行，参考：http: [//sweb.net/uploader/](http://sweb.net/uploader/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T01:49:57.180

我怀疑这是一个操作码缓存问题，并且是一个错误。我们看到了这一点，并且已经禁用了 APC。我仍在监视，但自禁用后无法重现该错误。

# regex - 用户名和密码的正则表达式

> ID：13272987
> 
> 赞同：0
> 
> 时间：2012-11-07T15:38:20.530
> 
> 标签：regex

任何人都可以提供用户名和密码的正则表达式吗？

> 用户名：不应以最少 6 个字符的数字开头。
> 密码：至少包含 6 个字符的字母数字。

但是，字符数没有上限。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T15:44:42.230

```
for username: \D.{5,}**
for password: .{6,}** 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T15:45:53.650

```
Username : /\D.{5,}/u
Password : /[a-z0-9]{6,}/i 
```

对于用户名，首先获取不是数字的任何内容，而不是至少 5 个长度的任何字符。对于多字节字符，例如**é**，我建议使用*u*修饰符。对于密码，请使用字母数字和其中至少 6 个，并注意*i*修饰符以不区分大小写（以这种方式使正则表达式更短）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T17:06:27.153

根据您的要求：

**用户名：**

```
^[a-zA-Z][a-zA-Z0-9]{6,}$ 
```

分解：

```
 ^ = Regex starts with
   [a-zA-z] = Only lower and uppercase letter to start
[a-zA-Z0-9] = Alphanumeric
       {6,} = Min of 6 chars and no max (denoted by comma/no-number to follow)
          $ = End of string 
```

因此，此正则表达式接受至少包含 6 个字符的用户名，以字母开头且仅包含字母和数字。

**密码：**

```
^[a-zA-Z0-9]{6,}$ 
```

分解：

```
 ^ = Regex starts with
[a-zA-Z0-9] = Alphanumeric
       {6,} = Min of 6 chars and no max (denoted by comma/no-number to follow)
          $ = End of string 
```

这接受字母数字且长度至少为 6 个字符的密码。

如果您愿意，您可以在其中任何一个中包含其他字符，例如。添加破折号，下划线，然后是附加字符的情况：

```
^[a-zA-Z0-9-_]{6,}$
           ^^ 
```

有更高级的方法可以使用字符类包含非单词字符，但这应该是你开始所需要的全部。

# java - 正则表达式与短语中的子词不匹配

> ID：13272988
> 
> 赞同：1
> 
> 时间：2012-11-07T15:38:19.710
> 
> 标签：java, regex

我的程序显示匹配结果，但我想将结果排序为最佳匹配、次佳匹配等等。

我的文本文件包含以下行：

> `red or yellow` `red'` 黄色'

所以如果我搜索`red or yellow`：：我得到以下结果 `'red or yellow` `red` `yellow`。所以我想要做的是将找到的结果排序如下：

1.  “红黄”100%匹配
2.  “红色” 40% 匹配
3.  “黄色” 40% 匹配

任何帮助表示赞赏。我的代码如下：

```
public static void main(String[] args) {
  // TODO code application logic here
  String strLine;
  try{
    // Open the file that is the first 
    // command line parameter   
    FileInputStream fstream = new FileInputStream("C:\\textfile.txt"");
    // Get the object of DataInputStream
    DataInputStream in = new DataInputStream(fstream);
    BufferedReader br = new BufferedReader(new InputStreamReader(in));

    Scanner input  = new Scanner (System.in);         
    System.out.print("Enter Your Search:  ");   // String key="red or yellow";
    String key = input.nextLine();

    while ((strLine = br.readLine()) != null) {     
      Pattern p = Pattern.compile(key); // regex pattern to search for
      Matcher m = p.matcher(strLine);  // src of text to search
      boolean b = false;
      while(b = m.find()) {                       
        System.out.println( " " + m.group()); // returns index and match
        // Print the content on the console
      }
    }
    //Close the input stream
    in.close();              
  }catch (Exception e){//Catch exception if any
    System.err.println("Error: " + e.getMessage());
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T15:41:47.540

您有混合模式和搜索空间。行 ( `strLine`) 是您的搜索空间并且`key`是模式。使固定：

```
Pattern p = Pattern.compile(key);
Matcher m = p.matcher(strLine); 
```

# facebook - 如何让我的用户将他们所有的专辑从粉丝页面 facebook 嵌入到我的网站

> ID：13272990
> 
> 赞同：0
> 
> 时间：2012-11-07T15:38:24.050
> 
> 标签：facebook, web, embed, photo, facebook-page

我希望粉丝专页的所有者可以在我的网站上填写表格。（他们的信息将存储在 MySQL 数据库中）。然后当导航到他们的图片页面时，他们的相册就会显示出来。我不希望他们逐张添加专辑，但我希望这样当他们发布新专辑时就不必添加它们。

我已经翻阅了graph api、developpers fb等书籍，但我找不到任何关于如何做到这一点的信息。

感谢 Zach LI 到目前为止：

```
$urlfanpage = "http://graph.facebook.com/FANPAGE/albums?fields=id,name&limit=0";
$objfanpage = json_decode(file_get_contents($urlfanpage));

foreach($objfanpage->data as $itemfanpage) {                                                                    
$ifanpage = array();
foreach($itemfanpage as $keyalbum => $valalbum){
$ifanpage[$keyalbum] = $valalbum;
                }
$idalbum = $ifanpage['id'];
print_r($ifanpage['name']);  ?> <br><br>

<script type='text/javascript'>     

$.getJSON('http://graph.facebook.com/<?php print_r($idalbum); ?>/photos')     
.then(function(response) {

// 0-8, 0 returns the largest available images, 8 the smallest
var imageIndex = 4;

var images = _(response.data)
    .chain()
    .pluck('images')
    .pluck(imageIndex)
    .value();

console.log(images);

_(images).each(function(image) {
    $('#image-container').append(
        $('<img>').attr('src', image.source)
    );
});

});

</script>   

<div id="image-container"></div>  <br><br><br><br><br><br><br><br> 

 <?php 
$ifanpage++;
} 
```

这将发布来自 FanPage 的所有图片。我想要的是制作相册，然后点击提示带有该相册图片的灯箱。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T15:48:32.637

你浏览了developers.facebook.com和graph api的东西是对的。那就是你的答案最终所在的地方。

目前尚不清楚您到底要做什么，但是根据专辑的存储位置，情况会有所不同。如果您正在谈论从 facebook“粉丝页面”或其他公共“非个人资料”页面添加专辑，那么您不必担心身份验证，并且可以使用从 api 调用返回的 json 来完成所有操作，例如`http://graph.facebook.com/{pageID}/albums`.

也许您可以从我的 jQuery 插件[FBalbum](https://github.com/zachlysobey/FBalbum)中获得一些灵感，尽管您可能应该拥有大部分代码服务器端......

如果你想在页面上加载个人相册，你将不得不担心各种身份验证的东西，并且可能必须有代码在身份验证后实际抓取这些照片，然后制作一个复制到您的主机。（我不是 100% 确定我在这些方面是正确的）

# iphone - 在 iphone 上垂直剪切背景

> ID：13272995
> 
> 赞同：0
> 
> 时间：2012-11-07T15:38:39.697
> 
> 标签：iphone, wordpress, background

我无法理解为什么我的网页背景在 iphone 上被剪切了。亲自查看[http://www.zananda.fr](http://www.zananda.fr)。这是一个带有自制模板的wordpress页面。我在这里搜索以找到答案，但我认为这个问题还没有被问到。非常感谢您的帮助。艾曼纽

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T15:52:05.953

这不仅仅是 iPhone 的问题。尝试将页面的最小宽度设置为 1600 像素（这是背景图像的宽度）：

```
body {
    min-width: 1600px;
} 
```