# StackOverflow 问答 14506000-14506999

# c# - 填充列表 从多个数组

> ID：14506000
> 
> 赞同：1
> 
> 时间：2013-01-24T16:24:02.017
> 
> 标签：c#, arrays, list, populate

所以，基本上我需要用数组而不是手动填充这个当前列表：

```
 public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
            List<People> people = new List<People>()
            {
                new People{Name="John",Age=21,Email="john@abc.com"}
                new People{Name="Tom",Age=30,Email="tom@abc.com"}
            };
        }
    } 
```

到目前为止，我有这样的人：

```
 class People
    {
        public string Name { get; set; }
        public int Age { get; set; }
        public string Email { get; set; }
    } 
```

我想改用数组，从 People 类到 MainWindow 类。就像是：

```
 class People
    {
        public string[] Name =
        {
            "John",
            "Tom",
        };
        public int[] Age =
        {
            "21",
            "30",
        }
        ...
    } 
```

我似乎无法弄清楚如何使用这些数组来填充这个列表。提前感谢您的宝贵时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T16:30:59.347

```
int c = people.Name.Count;

Enumerable.Range(0,c).Select(i => new People(){Name = people.Name[i], Age = people.Age[i], ...}); 
```

您需要确保所有数组都具有相同的大小。

如果您将“数据”设置为静态会更好。

我们可以做`int c = Math.Min(people.Name.Count, people.Age.Count, ...);`一个更好的“对称”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T16:27:41.720

其中一个`Select`重载有`index`作为参数

```
var names = new[]{ "John", "Tom" };
var ages  = new[]{ 21, 30, };
var mails = new[]{ "mail1", "mail2", };

names.Select((name, index) => 
       new People{
       Name = name, 
       Age = ages[index], 
       Email = mails[index]})
     .Dump(); 
```

印刷：

```
Name Age Email 
John 21  mail1 
Tom  30  mail2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T16:37:36.230

有很多方法可以做到这一点，如果这是预填充集合

```
public static class PeopleListFactory
{
   public static IEnumerable<People> Content(int someindicator)
   {
      List<People> result = new List<People>();
      switch (someIndicator)
      {      
        case 0: // fill it in here with and from whatever you like.
        break;
      }
      return result;
   }
} 
```

然后在你的主要形式中

列出人员=新列表（PeopleListFactory.Content（0））；

# iphone - 如何从 iPhone 应用程序打开 Yahoo Messenger 链接

> ID：14506006
> 
> 赞同：0
> 
> 时间：2013-01-24T16:24:26.023
> 
> 标签：iphone

如何从 iphone 应用程序打开以下 Yahoo Messenger 链接

ymsgr:sendim?testlink

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T08:17:14.307

需要在设备上安装 Yahoo Messenger 应用程序，如果是，则以下工作

```
 [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"ymsgr:sendim?username@yahoo.com"]]; 
```

# qt - QByteArray 的 Qt 运行长度编码 (RLE)

> ID：14506011
> 
> 赞同：1
> 
> 时间：2013-01-24T16:24:35.490
> 
> 标签：qt, zlib, qtembedded, run-length-encoding, qbytearray

我想对大量冗余图像数据的 Qt QByteArray 进行运行长度编码。现在我正在使用 QByteArrays qCompress 和 qUncompress 函数，它们使用 zlib 和默认压缩参数。

谷歌搜索后，我没有发现任何第三方库或 Qt 组件似乎可以开箱即用地执行 RLE。谁能给我指点 Qt 的 RLE 编码？

谢谢 -

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T19:58:15.017

我在 Qt 或第三方中找不到 RLE。对于 QByteArrays，qCompress 和 qUncompress 可以正常压缩，但不能使用来自其他来源的 zlib 标准压缩，因为这些 Qt 函数会在描述 QByteArray 的数据前附加 4 个字节。Quazip ( [http://quazip.sourceforge.net/](http://quazip.sourceforge.net/) ) 看起来很有希望，但对我的需求来说太过分了。我刚刚编写了自己的 RLE。

# php - php执行顺序

> ID：14506016
> 
> 赞同：0
> 
> 时间：2013-01-24T16:24:51.960
> 
> 标签：php, mysql

我只是从 php 和 mysql 开始，我一直在做 VB，这非常简单，现在我与 php 的每一点都在挣扎。我制作了一小段代码，它以 root 身份连接到 mysql 服务器，并使用在文本字段中输入的名称创建了一个数据库，但是每当我加载页面时，我什至在有机会输入数据库名称并点击之前看到一条错误消息按钮。该代码完成了这项工作，但给出了令人困惑的错误消息。

> 注意：未定义的索引：第 53 行 C:\xampp\htdocs\dbcreation.php 中的 dbname 创建数据库时出错：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在 '' 行附近使用的正确语法

```
<?php
$databasename = $_POST['dbname'];
$con = mysql_connect("localhost","root","");
if (!$con)
{
die('Could not connect: ' . mysql_error());
}
if (mysql_query("CREATE DATABASE $databasename",$con))
{
echo "Database created";
}
else
{
echo "Error creating database: " . mysql_error();
}
mysql_close($con);
?> 
```

我需要更改什么以便在我按下按钮之前不会执行代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T16:26:01.760

检查变量是否存在。

```
if(!empty($_POST['dbname'])){
    // execute code
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T16:27:17.463

即使表单尚未提交，您的查询仍在运行。您首先需要检查表单是否已提交。例如：

```
if(!empty($_POST['dbname']))
{
    // Handle stuff here.
} 
```

不过，我想为您说明几点：

*   避免使用`mysql_*`函数，它们现在已被弃用，您应该至少使用[`mysqli`](http://php.net/manual/en/book.mysqli.php)它们。
*   您可能想阅读有关 SQL 注入的信息，因为您的代码很容易受到同样的攻击。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T16:27:47.030

您可以使用 isset() 函数检查变量是否已设置

```
<?php
if(isset($_POST['dbname']))
{
    $databasename = $_POST['dbname'];
    $con = mysql_connect("localhost","root","");
    if (!$con)
    {
        die('Could not connect: ' . mysql_error());
    }
    if (mysql_query("CREATE DATABASE $databasename",$con))
    {
        echo "Database created";
    }
    else
    {
        echo "Error creating database: " . mysql_error();
    }
    mysql_close($con);
}
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T16:32:52.257

调试 MySQL 错误时，您可以在出现错误后查看查询：

```
...
}
if (mysql_query("CREATE DATABASE $databasename",$con)) {
... 
```

变成

```
...
}
$query = "CREATE DATABASE $databasename";
$succes = mysql_query($query, $con) or die("Query: '".$query."' failed: ".mysql_error());
if ($succes) {
... 
```

一些建议：使用[mysqli](http://php.net/manual/en/mysqli.query.php)而不是 mysql。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T16:44:15.747

试试这个：

```
$host="";//Host name
$username="";//MYSQL username
$password="";//MYSQL password
$db_name="";//Database name

//connect to server and select database
try{
$conn = new PDO('mysql:host='.$host.';dbname='.$db_name.'',$username, $password);
$conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);}
catch(PDOException $e){
echo 'ERROR: ' . $e->getMessage();}

//post vars
$dbname=$_POST['dbname']
if(empty($dbname))
{
die("you did not enter a database name")
}

$sql="CREATE DATABASE". $databasename."";
$result=$conn->query($sql);
if($result !=false){
echo "Data inserted!";
}
else{
die("Error inserting data");
} 
```

将来，尝试使用 PDO 连接到您的 SQL 数据库，PDO 连接的一个很好的例子就是我在这里留下的那个。

# hibernate - 如何更改 Grails 域中列的编码

> ID：14506017
> 
> 赞同：5
> 
> 时间：2013-01-24T16:24:55.617
> 
> 标签：hibernate, grails, grails-orm

对于我的一个域字段，我想更改编码和排序规则。现在每次我重新启动应用程序时`dbCreate=create`，我都必须手动更改 MySQL DB 中的编码。

```
Encoding: UTF-Unicode
Collation: utf8_bin 
```

有没有办法从域本身做到这一点？像从静态映射？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T11:21:50.017

您必须在连接 URL 中定义默认 DB 编码，例如：

```
dataSource.url = "jdbc:mysql://localhost:3306/mydb?useUnicode=yes&characterEncoding=UTF-8" 
```

# jquery - 将对象传递给 ajax 搜索

> ID：14506024
> 
> 赞同：0
> 
> 时间：2013-01-24T16:25:07.390
> 
> 标签：jquery, ajax

是否可以将搜索词传递到 ajax 搜索中，而不是对查询进行硬编码？我一直在搞乱对象文字或某种形式的关联数组，但都没有奏效。下面是我要使用“搜索对象”作为传递给查询的对象：

```
acTest = $.ajax(**searchObject**{
        url: "http://dev.virtualearth.net/REST/v1/Locations",
        dataType: "jsonp",
        data: {
             key: UserConfig.bingMapsKey,
             q:**SearchObject**
            },
            jsonp: "jsonp",
            success: function (data) {
                var result = data.resourceSets[0];
                if (result) {
                        if (result.estimatedTotal > 0) {
                                response ($.map(result.resources, function (item) {
                                        return {
                                            data: item,
                                            label: item.name + '(' item.address.countryRegion + ')',
                                            value: item.name
                                        }
                                }));
                        }
                }
            }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T16:27:48.733

当然，只需传入一个变量

```
var searchQuery = $('#queryTextBoxId').val();

acTest = $.ajax({
        url: "http://dev.virtualearth.net/REST/v1/Locations",
        dataType: "jsonp",
        data: {
             key: UserConfig.bingMapsKey,
             q: searchQuery
            },
            jsonp: "jsonp",
            success: function (data) {
                var result = data.resourceSets[0];
                if (result) {
                        if (result.estimatedTotal > 0) {
                                response ($.map(result.resources, function (item) {
                                        return {
                                            data: item,
                                            label: item.name + '(' item.address.countryRegion + ')',
                                            value: item.name
                                        }
                                }));
                        }
                }
            }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T16:29:14.627

如果您的 searchObject 是一个实际对象，您应该能够传入`JSON.stringify(searchObject)`

# sockets - 套接字上的服务器响应被截断为 2K

> ID：14506025
> 
> 赞同：2
> 
> 时间：2013-01-24T16:25:08.730
> 
> 标签：sockets, python-2.7, client

我编写了以下函数，用于我用于测试的一组套接字实用程序中。（如果这很重要，请使用 Python 2.7.3。）我将库拉入其中的主要原因`select`是我可以实现超时，而不是永远等待响应。我发现的问题是响应在 2048 个字符处被截断，尽管使用 64K 作为`.recv()`套接字上方法的最大大小。在我参与之前，这种截断并没有发生`select`。当我将最大尺寸设置得更高时，它很高兴地通过了 64K 甚至更多。

我浏览了一些在线资源，`select`并找到了有关接收数据大小的明显上限的任何信息。即没有它存在的信息，更不用说如何修改它了。谁能指出我克服这个 2K 限制的方法？

```
    导入套接字，选择
    最大尺寸 = 65535
    超时 = 10

    def 瞬态连接（主机、端口、发送数据）：
        错误，响应=假，''
        尝试：
            sendSocket = socket.socket()
            sendSocket.connect（（主机，端口））
            sendSocket.send(sendData)
            gotData = select.select([sendSocket],[],[],TIMEOUT)
            如果（得到数据 [0]）：
                响应 = sendSocket.recv(MAXSIZE)
            别的：
                错误=真
                response = '*** TIMEOUT ***\n主机没有响应。'
            sendSocket.close()
        除了异常，errText：
            错误，响应 = True，'*** SOCKET 错误 ***\n'+str(errText)
        返回（错误，响应）

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T17:15:24.373

TCP 套接字为您提供双向*字节流*，但在较低级别，它是通过基于数据包的协议 (IP) 实现的。这意味着您可以在每次读取时接收任意流块（尽管字节都是按顺序排列的），具体取决于 TCP/IP 堆栈如何决定拆分流以进行传输。

这里的关键点是**您必须`recv()`循环执行，**直到获得完整的“应用程序消息”。引用[Socket Programming HOWTO](http://docs.python.org/2/howto/sockets.html)：

> 现在我们来到套接字的主要绊脚石 -`send`并`recv`在网络缓冲区上进行操作。它们不一定处理您交给它们的所有字节（或期望它们），因为它们的主要重点是处理网络缓冲区。通常，当相关的网络缓冲区已被填充（发送）或清空（接收）时，它们会返回。然后他们告诉你他们处理了多少字节。您有责任再次致电他们，直到您的信息得到完全处理*。*

您在这里看到的是，`select`一旦有*一些*数据可用，就会提前通知您。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T01:44:07.830

校正、测试和工作的功能：

```
    最大尺寸 = 65535
    超时 = 10
    def 瞬态连接（主机、端口、发送数据）：
        错误，响应=假，''
        尝试：
            sendSocket = socket.socket()
            sendSocket.connect（（主机，端口））
            sendSocket.send(sendData)
            gotData = select.select([sendSocket],[],[],TIMEOUT)
            如果（得到数据 [0]）：
                响应 = sendSocket.recv(MAXSIZE)
                而真：
                    #一旦数据开始到达，使用更短的超时
                    gotData2 = select.select([sendSocket],[],[],0.5)
                    如果（得到数据2 [0]）：
                        更多数据 = sendSocket.recv(MAXSIZE)
                        响应 += 更多数据
                    其他：休息
            别的：
                错误=真
                response = '*** TIMEOUT ***\n主机没有响应。'
            sendSocket.close()
        除了异常，errText：
            错误，响应 = True，'*** SOCKET 错误 ***\n'+str(errText)
        返回（错误，响应）

```

# c# - c# ThreadPool /WaitCallback - 在这种情况下如何委托？

> ID：14506033
> 
> 赞同：0
> 
> 时间：2013-01-24T16:25:58.300
> 
> 标签：c#, multithreading

我有一个程序在工作时用不同的图标显示它的进度。该过程通过按下 btnApply 按钮开始。

```
ManualResetEvent[] wait; 

    private void btnApply_Click(object sender, EventArgs e)
    { 
        wait = new ManualResetEvent[1]; 
        wait[0] = new ManualResetEvent(false); 
        ThreadPool.QueueUserWorkItem(new WaitCallback(doApply), 0); 
        WaitHandle.WaitAny(wait); 
        btnApply.Text = "Done!"; 
    }

    private void doApply(object dummy) 
    { 
        for (int i = 0; i < 14; i++) 
        { 
            setPic(i, bmTODO); 
        } 
        // do something 
        for (int i = 0; i < 14; i++) 
        { 
            setPic(i, bmWORK); 
            // do something 
            setPic(i, bmOK); 
        } 
    } 

    public void setPic(int i, Image img) 
    { 
        switch (i) 
        { 
            case 0: pictureBox1.Image = img; break; 
            case 1: pictureBox2.Image = img; break; 
            case 2: pictureBox3.Image = img; break; 
            case 3: pictureBox4.Image = img; break; 
            case 4: pictureBox5.Image = img; break; 
            case 5: pictureBox6.Image = img; break; 
            case 6: pictureBox7.Image = img; break; 
            case 7: pictureBox8.Image = img; break; 
            case 8: pictureBox9.Image = img; break; 
            case 9: pictureBox10.Image = img; break; 
            case 10: pictureBox11.Image = img; break; 
            case 11: pictureBox12.Image = img; break; 
            case 12: pictureBox13.Image = img; break; 
            case 13: pictureBox14.Image = img; break; 
            default: break; 
        } 
    } 
```

使用 Win7 和 2 处理器，这可以“按应有的方式”工作。
但在 XP 上，我必须切换任务 - 但我怎样才能在这个特殊的代码中做到这一点？我不想在 doApply 中指定每个图片框。

我也尝试过委托：

```
public delegate void setPicDelegate(int i, Image img); 
```

但是没有令人满意的结果：程序挂起或图标最近一起显示在最后。

我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T16:30:25.257

问题是您正在使用以下内容阻塞 UI 线程：`WaitHandle.WaitAny(wait);`. 您需要允许该`btnApply_Click`方法在长时间运行的任务完成之前结束，以允许 UI 线程处理新操作。

在 UI 上下文中对长时间运行的任务进行建模的一种简单方法是使用`BackgroundWorker`，因为它会为您抽象出许多问题。

在事件处理程序中执行所有长时间运行的工作`DoWork`，并在使用事件完成工作时更新您的 UI `RunWorkerCompleted`。该事件处理程序将在 UI 线程中运行。该类还支持将结果传递给 UI、处理 UI 中的进度更改信息等。

# sql-server-2008 - Select 语句的 SQL 错误处理

> ID：14506035
> 
> 赞同：2
> 
> 时间：2013-01-24T16:26:06.023
> 
> 标签：sql-server-2008

我有一个使用 UNION ALL 组合在一起的多重选择语句。例如：

```
Select col1,col2,...,coln from A
UNION ALL
Select Col1,Col2,...,coln from B 
```

第二个表中的一列具有错误的值，执行查询时出现错误。

```
Msg 241, Level 16, State 1, Line 1
Conversion failed when converting date and/or time from character string. 
```

我很难确定是哪一列/行导致了问题，它有很多列，并且错误没有具体说明什么。有人可以给我一个例子，我可以追踪错误。先感谢您！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T20:33:28.310

您可以尝试比较这两个 SELECT 的元数据的脚本。为了获取元数据信息，我使用[了 sp_describe_cursor_columns](http://msdn.microsoft.com/en-us/library/ms182755%28v=sql.100%29.aspx)系统过程（使用起来不太好 - true；在 SQL Server 2008 中可用），因为[sp_describe_first_result_set](http://msdn.microsoft.com/en-us/library/ff878602.aspx)从 SQL Server 2012 开始可用。

```
SET NOCOUNT ON;

DECLARE @Metadata TABLE (
    select_num tinyint NOT NULL,
        check (select_num IN (1,2)),
    ordinal_position int not null,
        primary key (select_num, ordinal_position),
    column_name sysname,
    column_size int,
    data_type_sql smallint,
    column_precision tinyint,
    column_scale tinyint
)

DECLARE 
    @column_name sysname,
    @ordinal_position int,
    @column_characteristics_flags int,
    @column_size int,
    @data_type_sql smallint,
    @column_precision tinyint,
    @column_scale tinyint,
    @order_position int,
    @order_direction varchar(1),
    @hidden_column smallint,
    @columnid int,
    @objectid int,
    @dbid int,
    @dbname sysname

DECLARE @ReturnSelect CURSOR

-- Metadata for the first query
DECLARE CursorSelect1 CURSOR LOCAL STATIC READ_ONLY FORWARD_ONLY 
FOR 
SELECT  TOP(0) ...
FROM    A ... 

OPEN    CursorSelect1

EXEC sp_describe_cursor_columns @cursor_return=@ReturnSelect OUTPUT, @cursor_source='local', @cursor_identity=N'CursorSelect1'

WHILE (1=1)
BEGIN
    FETCH NEXT FROM @ReturnSelect INTO 
        @column_name,
        @ordinal_position,
        @column_characteristics_flags,
        @column_size,
        @data_type_sql,
        @column_precision,
        @column_scale,
        @order_position,
        @order_direction,
        @hidden_column,
        @columnid,
        @objectid,
        @dbid,
        @dbname
    IF @@FETCH_STATUS=0
    BEGIN
        INSERT  @Metadata (select_num, ordinal_position, column_name, data_type_sql, column_size, column_precision, column_scale)
        VALUES  (1, @ordinal_position, @column_name, @data_type_sql, @column_size, @column_precision, @column_scale); -- First SELECT
    END
    ELSE
    BEGIN
        BREAK
    END
END

CLOSE   CursorSelect1
DEALLOCATE CursorSelect1
CLOSE   @ReturnSelect
DEALLOCATE @ReturnSelect
-- End of Metadata for the first query

-- Metadata for the second query
DECLARE CursorSelect2 CURSOR LOCAL STATIC READ_ONLY FORWARD_ONLY 
FOR 
SELECT  TOP(0) ...
FROM    B ...

OPEN    CursorSelect2

EXEC sp_describe_cursor_columns @cursor_return=@ReturnSelect OUTPUT, @cursor_source='local', @cursor_identity=N'CursorSelect2'

WHILE (1=1)
BEGIN
    FETCH NEXT FROM @ReturnSelect INTO 
        @column_name,
        @ordinal_position,
        @column_characteristics_flags,
        @column_size,
        @data_type_sql,
        @column_precision,
        @column_scale,
        @order_position,
        @order_direction,
        @hidden_column,
        @columnid,
        @objectid,
        @dbid,
        @dbname
    IF @@FETCH_STATUS=0
    BEGIN
        INSERT  @Metadata (select_num, ordinal_position, column_name, data_type_sql, column_size, column_precision, column_scale)
        VALUES  (2, @ordinal_position, @column_name, @data_type_sql, @column_size, @column_precision, @column_scale); -- Second SELECT
    END
    ELSE
    BEGIN
        BREAK
    END
END

CLOSE   CursorSelect2
DEALLOCATE CursorSelect2
-- End of Metadata for the second query

CLOSE   @ReturnSelect
DEALLOCATE @ReturnSelect

SELECT  s1.*, s2.*
FROM (
    SELECT m.*, t.name AS user_type_name 
    FROM @Metadata m JOIN sys.types t ON m.data_type_sql=t.user_type_id 
    WHERE select_num=1
) s1 -- metadata for the first SELECT
INNER JOIN (
    SELECT m.*, t.name AS user_type_name 
    FROM @Metadata m JOIN sys.types t ON m.data_type_sql=t.user_type_id 
    WHERE select_num=2
) s2 -- metadata for the second SELECT
ON      s1.ordinal_position=s2.ordinal_position
WHERE   s1.data_type_sql<>s2.data_type_sql -- It compares the data type for every column from these two SELECT queries 

/*
-- or 
SELECT  s1.*, s2.*
FROM    (SELECT m.*, t.name AS user_type_name FROM @Metadata m JOIN sys.types t ON m.data_type_sql=t.user_type_id WHERE select_num=1) s1 -- metadata for the first SELECT
FULL OUTER JOIN (SELECT m.*, t.name AS user_type_name FROM @Metadata m JOIN sys.types t ON m.data_type_sql=t.user_type_id WHERE select_num=2) s2 -- metadata for the second SELECT
ON      s1.ordinal_position=s2.ordinal_position
WHERE   s1.ordinal_position=s2.ordinal_position
AND     s1.data_type_sql<>s2.data_type_sql -- It compares the data type for every column from these two SELECT queries 
OR      s1.ordinal_position IS NOT NULL AND s2.ordinal_position IS NULL
OR      s1.ordinal_position IS NULL AND s2.ordinal_position IS NOT NULL
*/ 
```

# c++ - PCL：如何绘制方向线

> ID：14506036
> 
> 赞同：0
> 
> 时间：2013-01-24T16:26:06.060
> 
> 标签：c++, computer-vision, visualization, point-cloud-library

我已经建立了一个点云和一个对象，并估计了姿势，并希望从指向姿势方向（俯仰、偏航、滚动）的中心点 (xyz) 向可视化添加一条方向线。

但是，我在网上找不到任何这样的例子，而且我对 pcl 库很陌生。

我已经看过绘图法线示例但是，这是不同的。

任何帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T10:57:51.313

[PCLVisualizer](http://docs.pointclouds.org/trunk/classpcl_1_1visualization_1_1_p_c_l_visualizer.html)具有使用两个点作为输入的`addLine`方法。您可以通过[模块 common](http://docs.pointclouds.org/trunk/group__common.html)`addArrow`获得第一点。对于第二个点，您可以在您想要的方向上计算一个点（例如，取决于给定的姿势）。`compute3DCentroid`

# r - 切面时的ggplot geom_errorbar宽度（和scale =“free”）

> ID：14506056
> 
> 赞同：13
> 
> 时间：2013-01-24T16:27:15.613
> 
> 标签：r, plot, ggplot2

我正在尝试使用 ggplot 和 geom_errorbar 创建一个多面图。但是，每个不同的方面可能有很大不同的 x 范围，因此误差条的宽度看起来并不“好”。这是一个MWE：

```
library(ggplot2)
test <- data.frame( group=rep(c(1,2,3),each=10), ymin=rnorm(30), ymax=rnorm(30))
test$x <- rnorm(30) * (1+(test$group==1)*20)
ggplot( test, aes(x=x, ymin=ymin, ymax=ymax) ) +
  geom_errorbar(width=5) + facet_wrap( ~ group, scale="free_x" )
ggplot( test, aes(x=x, ymin=ymin, ymax=ymax) ) +
  geom_errorbar(width=.2) + facet_wrap( ~ group, scale="free_x" ) 
```

在第一个图中，第 1 组的误差线看起来不错，但第 2 组和第 3 组的误差线太宽了。在第二个图中，误差条对于第 1 组来说太小了。有没有简单的方法来解决这个问题？我想我可能只需要使用 width=0，但我想避免这种情况。

![第一个情节](../Images/a6c45e6e3b115e7d592322bde68c6ba4.png)

![第二个情节](../Images/2f6ff52f8c124a1e107d7a2b8f653cc6.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-24T16:47:11.240

此问题的解决方法是向您的数据框中添加`wd`包含每个级别的错误栏宽度的新列。

```
test <- data.frame( group=rep(c(1,2,3),each=10), ymin=rnorm(30), ymax=rnorm(30))
test$x <- rnorm(30) * (1+(test$group==1)*20)
test$wd<-rep(c(10,0.5,0.5),each=10) 
```

然后使用这个新列来设置`width=`。`geom_errorbar()`它应该在`aes()`调用内部设置。

```
ggplot( test, aes(x=x, ymin=ymin, ymax=ymax) ) +
  geom_errorbar(aes(width=wd)) + facet_wrap( ~ group, scale="free_x" ) 
```

![在此处输入图像描述](../Images/859ba2c0faf3f1d34285e0083d5bbf4c.png)

# ios - 使用 ios SDK 3.1 发布到墙上的简单方法

> ID：14506057
> 
> 赞同：5
> 
> 时间：2013-01-24T16:27:16.163
> 
> 标签：ios, facebook

我刚刚使用 SDK iOS 3.1 启动了一个新应用程序，我注意到现在读写权限是分开的。

我正在寻找一种简单的方法来发布到用户墙，但我对授权机制有点困惑

如果我可以在 openActiveSessionWithReadPermissions 的 CompletionHandler 中获得写权限，我会收到以下错误

```
*** Terminating app due to uncaught exception 'com.facebook.sdk:InvalidOperationException', reason: 'FBSession: It is not valid to reauthorize while a previous reauthorize call has not yet completed.' 
```

completionHandler 听起来动作已经完成，所以我不明白这段代码有什么问题。

有什么建议么 ？

```
-(void)askWritePerms
{
NSArray *permissions = [NSArray arrayWithObjects:@"publish_actions", nil];

[[FBSession activeSession] reauthorizeWithPublishPermissions:permissions
                           defaultAudience:FBSessionDefaultAudienceFriends
                         completionHandler:^(FBSession *session, NSError *error) {

  }];

}

 - (IBAction)publishFB:(id)sender
 {

        NSArray *permissions = [NSArray arrayWithObjects:@"email", nil];

       [FBSession openActiveSessionWithReadPermissions:permissions
                                   allowLoginUI:YES
                              completionHandler:^(FBSession *session, FBSessionState status, NSError *error) {
                            [self askWritePerms];

                     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-31T10:44:13.123

```
For publishing in wall in facebook use the following code
[[FBSession activeSession] reauthorizeWithPublishPermissions:@[ @"publish_stream",@"publish_actions" ] defaultAudience:FBSessionDefaultAudienceEveryone completionHandler:^(FBSession *authSession, NSError *authError) {

            // If auth was successful, create a status update FBRequest
            if (!authError) {
 NSMutableDictionary* photosParams = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                                     imageurl,@"source",
                                                     urlstring,@"link",@"Appname",@"name",@"Your app description",@"description",
                                                     nil];

                [FBRequestConnection startWithGraphPath:@"me/feed" parameters:photosParams HTTPMethod:@"POST" completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
                if (error)
                {
                    [self showAlert:@"Connection Error...Try Again"];
}
       }];
            }
            }]; 
```

# c++ - qmake：将 uic 生成的头文件添加到安装目标

> ID：14506060
> 
> 赞同：0
> 
> 时间：2013-01-24T16:27:30.240
> 
> 标签：c++, qmake

我正在为 Linux 开发一个小部件库。它包含一些`.ui`文件。`.pro`文件如下所示：

```
TEMPLATE = lib
SOURCES += ...
HEADERS += ...
FORMS += ...
TARGET = foo
headers.files = $$HEADERS
unix {
    target.path = /usr/lib
    headers.path = /usr/include/foo/
}
INSTALLS += target headers 
```

当我在系统上安装库时， /usr/include/foo/ 中不存在 ui_*.h 文件，这会导致编译错误。如何删除对这些文件的需求或将它们包含在安装目标中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T17:06:01.887

“最佳”解决方案（恕我直言）不是从 UI 类继承，而是使用组合。如果您使用[单一继承方法](http://doc-snapshot.qt-project.org/4.8/designer-using-a-ui-file.html#the-single-inheritance-approach)，则可以通过 UI 类的前向声明来解决问题，从而无需使其标头公开可见。

# php - 循环内生成的结构中某些标签的标记错误

> ID：14506062
> 
> 赞同：1
> 
> 时间：2013-01-24T16:27:41.090
> 
> 标签：php, xml, markup

我在使用 PHP 的 while 循环中生成的 XML 结构中遇到了问题，最好说是一个错误。

这是我用来访问我的数据库并使用检索到的信息生成 XML 的 PHP 代码（另外，我之前将内容类型定义为 text/xml）：

```
<?php include("basededatos.php"); $query = mysql_query("SELECT tipo,nombre,direccion,telefono,dias_habiles,sabados,domingos,coordenadas FROM iglesias"); while($row = mysql_fetch_array($query)) : ?>
<iglesia cords="<?php echo $row["coordenadas"]; ?>" tipo="<?php echo utf8_encode($row["tipo"]); ?>">
    <nombre><?php echo utf8_encode($row["nombre"]); ?></nombre>
    <direccion><?php if($row["direccion"]==""){echo "Dirección no especificada";} else {echo utf8_encode($row["direccion"]);} ?></direccion>
    <telefono><?php if($row["telefono"]==""){echo "Teléfono no especificado";} else {echo utf8_encode($row["telefono"]);} ?></telefono>
    <horarios>
        <dias_habiles><?php if($row["dias_habiles"]==""){echo "Sin información";} else {echo utf8_encode($row["dias_habiles"]);} ?></dias_habiles>
        <sabados><?php if($row["sabados"]==""){echo "Sin información";} else {echo utf8_encode($row["sabados"]);} ?></sabados>
        <domingos><?php if($row["domingos"]==""){echo "Sin información";} else {echo utf8_encode($row["domingos"]);} ?></domingos>
    </horarios>
</iglesia> 
```

好，现在，多亏了我获得了一个大的 XML，超过 2500 行，这要归功于我的数据库中有 255 行，但有时我只有一个标签有一个奇怪的错误，比如最后一个：

```
<iglesia cords="-34.59915445189461, -58.39169159531593" tipo="Parroquia">
<nombre>Parroquia Nuestra Señora del Carmen</nombre>
<direccion>Rodriguez Peña 840</direccion>
<telefono>011 4816 3511</telefono>
<horarios>
    <dias_habiles>8:00, 11:30, 19:30</dias_habiles>
    <sabados>8:00, 17:30, 19:00</sabados>
    <domingos>8:30, 11:00, 12:15, 17:30, 19:00, 20:15</domingos>
</horarios>
</iglesia>
<iglesia cords="-34.595964052770476, -58.40230107307434" tipo="Parroquia">
<nombre>Parroquia Nuestra Señora del Carmelo</nombre>
<direccion>Marcelo T. de Alvear 2465</direccion>
<telefono>011 4821 5954</telefono>
<horarios>
    //Look here, the next line
    dias_habiles>8:00, 11:00, 19:00, 20:00</dias_habiles>
    <sabados>8:00, 11:00, 19:00, 20:00</sabados>
    <domingos>8:00, 10:00, 11:00, 12:00, 19:00, 20:00, 21:00</domingos>
</horarios>
</iglesia> 
```

如您所见，在 dias_habiles 标记中缺少 <，但在此之前的 dias_habiles 是正确的，并且在该错误之后，所有 dias_habiles 都被很好地标记了。

此外，这个标签并不总是有问题，它只是一个例子，它可以在 XML 中与任何随机标签一起发生，只有一次并且没有传播。为什么？如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T00:13:55.657

出于调试目的...替换数据库中的所有数据，例如

```
<?php echo utf8_encode($row["nombre"]); ?> 
```

带有控制文本，例如：

```
<?php echo "Control text"; ?> 
```

看看问题是否消失 - 如果是这样，那么您可以确定问题与来自数据库的“数据”格式有关。您可能需要对从数据库中获取的文本应用字符串格式化函数。一些消毒子程序等。

如果问题没有消失 - 那么它显然是其余的问题。无论哪种方式，您的头痛都会减半。

# javascript - OverloadAttribute 是做什么用的？

> ID：14506067
> 
> 赞同：1
> 
> 时间：2013-01-24T16:27:58.507
> 
> 标签：javascript, .net, windows-runtime, overloading, windows-store-apps

因此，在设计 API 时，我发现 Javascript 和重载以及所有有趣的东西存在一些问题。我认为可能有帮助的一件事是`OverloadAttribute`. 不过，这个问题的原因是我找不到任何关于它的作用的文档。[MSDN](http://msdn.microsoft.com/en-us/library/windows/apps/windows.foundation.metadata.overloadattribute.aspx)提供了非常有用的信息

> 将方法标识为支持重载的语言中的重载。

显然，我需要比这更多的信息。那么，这究竟是用来做什么的呢？构造函数的`string method`参数是干什么用的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T16:56:28.787

如文档所示，`OverloadAttribute`用于不支持重载的语言。例如，考虑使用 IDL 和 C++（不是 C++/CX）在 ABI 层编写 Windows 运行时代码。在 IDL 中，不能重载接口函数：接口的每个函数必须有不同的名称。

让我们看一个例子。这是`IUriRuntimeClassFactory`来自 Windows.Foundation.idl 文件的定义，您可以在 Windows 8 SDK 中找到该文件：

```
interface IUriRuntimeClassFactory : IInspectable
{
    [overload("CreateUri")] HRESULT CreateUri([in] HSTRING uri, [out] [retval] Windows.Foundation.Uri** instance);
    [overload("CreateUri")] HRESULT CreateWithRelativeUri([in] HSTRING baseUri, [in] HSTRING relativeUri, [out] [retval] Windows.Foundation.Uri** instance);
} 
```

这两个接口函数在 IDL 中以不同的名称声明。这两个函数都使用 IDL`overload`属性进行了注释。该属性告诉 IDL 编译器这两个成员函数在*逻辑上*都是`CreateUri`.

当 midlrt IDL 编译器从这个 IDL 生成一个 WinMD 文件时，它将交换重载名称和接口函数名称，以便在元数据中，这两个接口函数都将具有 name `CreateUri`，并且两个函数都将具有`OverloadAttribute`应用于它们的原始名称（`CreateUri`第一个和`CreateWithRelativeUri`第二个）。您可以通过使用 ildasm 查看参考 Windows.winmd 中的元数据来观察这一点。

当您从 WinMD 生成 IDL 时，会发生反向转换：使用 an 注释的接口函数`OverloadAttribute`使用该属性提供的名称命名。这允许 IDL 和 WinMD 之间的无损往返。

# c# - 设置 DataSource 时 DataGridView 不显示

> ID：14506075
> 
> 赞同：0
> 
> 时间：2013-01-24T16:28:22.897
> 
> 标签：c#, datagridview

我使用 LINQ 从 DB 加载浮点数组。即使我成功加载了数组，我也无法制作 DataGridView 来显示该数组。

这是我的代码

```
float[] balances = client.LoadBalance(id); 
// LoadBalance() give me an array of floats of customer who has the specified id
dataBalance.DataSource = balances; 
```

我尝试了以下，但他们没有帮助

```
dataBalance.Refresh();
dataBalance.Parent.Refresh(); 
```

和

```
dataBalance.DataSource = null;
dataBalance.DataSource = balances; 
```

之后我添加了一个断点`float[] balances = client.LoadBalance(id);`，我确信它可以`LoadBalance(id)`工作。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T16:42:18.960

你需要 dataBalance.DataBind(); 在 dataBalance.DataSource = 余额之后；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T18:46:32.607

解决方案，只需为您创建一个类`balances`

比方说，`BalanceClass`

```
public class BalanceClass
{
    public float balances { get; set; }
} 
```

然后

```
float[] balances = client.LoadBalance(id);
List<BalanceClass> bal = new List<BalanceClass>();
foreach (var item in balances)
   bal.Add(new BalanceClass() { balances = item});
ataGridView2.DataSource = bal.ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T20:11:12.940

你可以做这样的事情。

```
 dataGridView1.DataSource = 
            (LoadBalance(id) ?? new float[0])
                .Select(x => new { Number = x })
                .ToList(); 
```

# ios - Interface Builder：在 ios 5 中，window 对象隐藏了视图控制器

> ID：14506079
> 
> 赞同：0
> 
> 时间：2013-01-24T16:28:35.977
> 
> 标签：ios, xcode, ios5, ios6, interface-builder

这个问题不是什么大问题，但我仍然很好奇它为什么会发生，我在 Apple 的开发人员领域找不到太多。

基本上，我有一个简单的应用程序，它的 MainWindow 包含一个 UITabBarController。Interface Builder 中的 NIB 最初是自动生成的，带有一个“窗口”对象。

如果我在 iOS6 上尝试此设置，它在任何设备上都可以正常工作。

如果我在 iOS5 上尝试此操作，窗口对象是不透明的并隐藏所有内容（即启动时出现白屏）。

显然，如果我将背景设置为透明，它会显示背后的内容。我尝试将窗口放在对象列表中，但这没有帮助。

任何想法？

# javascript - 使用 Ajax jQuery 表单插件时未设置“X-Requested-With: XMLHttpRequest”响应标头

ID：14506080

赞同：0

时间：2013-01-24T16:28:52.790

标签：javascript, jquery, ajax

# jsf - PrimeFaces 数据表 - 可以交叉验证吗？

> ID：14506081
> 
> 赞同：0
> 
> 时间：2013-01-24T16:28:53.280
> 
> 标签：jsf, primefaces

我有一个带有输入字段的数据表。在提交表单时，我必须一起验证所有输入。验证没有问题，但是将 ui-state-error 放在无效字段上会带来麻烦。我尝试使用 UIViewRoot#findComponent(id) 确定组件，但此方法始终返回 NULL。我从萤火虫那里得到了“id”，所以我不明白出了什么问题？？？

我希望任何人都可以帮助我！

我的数据表：

```
 <prime:dataTable id="dtSpielberichtErfassen2"
                          value="#{bsvttController.spielDetailListe}" var="dtSpiErf2"
                          selection="#{bsvttController.selectedSpielDetail}" selectionMode="single"
                          rowKey="#{dtSpiErf2.id}">

                          <prime:column style="width:55px">
                             <h:outputText value="#{dtSpiErf2.spielPaarung}" />
                          </prime:column>

                          <prime:column style="width:180px"
                             headerText="#{bsvttController.mannschaftHeim}">
                             <h:panelGrid id="pgSpiErf1"
                                columns="1" cellpadding="0" cellspacing="0"
                                styleClass="#{dtSpiErf2.saetzeGewonnen == 3 ? 'fett' : null}">
                                <h:outputText value="#{dtSpiErf2.posHeim1}" />
                                <h:outputText value="#{dtSpiErf2.posHeim2}" />
                             </h:panelGrid>
                          </prime:column>

                          <prime:column style="width:180px"
                             headerText="#{bsvttController.mannschaftGast}">
                             <h:panelGrid id="pgSpiErf2"
                                columns="1" cellpadding="0" cellspacing="0"
                                styleClass="#{dtSpiErf2.saetzeVerloren == 3 ? 'fett' : null}">
                                <h:outputText value="#{dtSpiErf2.posGast1}" />
                                <h:outputText value="#{dtSpiErf2.posGast2}" />
                             </h:panelGrid>
                          </prime:column>

                          <prime:column style="width:50px"
                             headerText="1\. Satz">
                             <h:panelGrid columns="3" cellpadding="0" cellspacing="0">
                                <pe:inputNumber id="inG1" value="#{dtSpiErf2.satz1Gewonnen}"
                                   maxlength="2" decimalPlaces="0"
                                   style="width:20px; text-align:right">
                                </pe:inputNumber>
                                <h:outputText value=":" />
                                <pe:inputNumber id="inV1" value="#{dtSpiErf2.satz1Verloren}"
                                   maxlength="2" decimalPlaces="0"
                                   style="width:20px; text-align:left">
                                </pe:inputNumber>
                             </h:panelGrid>
                          </prime:column>

                          <prime:column style="width:50px"
                             headerText="2\. Satz">
                             <h:panelGrid columns="3" cellpadding="0" cellspacing="0">
                                <pe:inputNumber id="inG2" value="#{dtSpiErf2.satz2Gewonnen}"
                                   maxlength="2" decimalPlaces="0"
                                   style="width:20px; text-align:right">
                                </pe:inputNumber>
                                <h:outputText value=":" />
                                <pe:inputNumber id="inV2" value="#{dtSpiErf2.satz2Verloren}"
                                   maxlength="2" decimalPlaces="0"
                                   style="width:20px; text-align:left">
                                </pe:inputNumber>
                             </h:panelGrid>
                          </prime:column>

                          <prime:column style="width:50px"
                             headerText="3\. Satz">
                             <h:panelGrid columns="3" cellpadding="0" cellspacing="0">
                                <pe:inputNumber id="inG3" value="#{dtSpiErf2.satz3Gewonnen}"
                                   maxlength="2" decimalPlaces="0"
                                   style="width:20px; text-align:right">
                                </pe:inputNumber>
                                <h:outputText value=":" />
                                <pe:inputNumber id="inV3" value="#{dtSpiErf2.satz3Verloren}"
                                   maxlength="2" decimalPlaces="0"
                                   style="width:20px; text-align:left">
                                </pe:inputNumber>
                             </h:panelGrid>
                          </prime:column>

                          <prime:column style="width:50px"
                             headerText="4\. Satz">
                             <h:panelGrid columns="3" cellpadding="0" cellspacing="0">
                                <pe:inputNumber id="inG4" value="#{dtSpiErf2.satz4Gewonnen}"
                                   maxlength="2" decimalPlaces="0"
                                   disabled="#{bsvttController.disable2(dtSpiErf2, 4)}"
                                   style="width:20px; text-align:right">
                                </pe:inputNumber>
                                <h:outputText value=":" />
                                <pe:inputNumber id="inV4" value="#{dtSpiErf2.satz4Verloren}"
                                   maxlength="2" decimalPlaces="0"
                                   disabled="#{bsvttController.disable2(dtSpiErf2, 4)}"
                                   style="width:20px; text-align:left">
                                </pe:inputNumber>
                             </h:panelGrid>
                          </prime:column>

                          <prime:column style="width:50px"
                             headerText="5\. Satz">
                             <h:panelGrid columns="3" cellpadding="0" cellspacing="0">
                                <pe:inputNumber id="inG5" value="#{dtSpiErf2.satz5Gewonnen}"
                                   maxlength="2" decimalPlaces="0"
                                   disabled="#{bsvttController.disable2(dtSpiErf2, 5)}"
                                   style="width:20px; text-align:right">
                                </pe:inputNumber>
                                <h:outputText value=":" />
                                <pe:inputNumber id="inV5" value="#{dtSpiErf2.satz5Verloren}"
                                   maxlength="2" decimalPlaces="0"
                                   disabled="#{bsvttController.disable2(dtSpiErf2, 5)}"
                                   style="width:20px; text-align:left">
                                </pe:inputNumber>
                             </h:panelGrid>
                          </prime:column>

                       </prime:dataTable> 
```

我的验证方法的代码片段：

```
 // %1% - index of datatable row
        // %2% - identifying part of componet id
        String id = ":formBsvtt:caseUpdateSpielberichtErfassen:dtSpielberichtErfassen2:%1%:in%2%_input";
        int saetzeGesamtGewonnen = 0;
        int saetzeGesamtVerloren = 0;
        int spieleGesamtGewonnen = 0;
        int spieleGesamtVerloren = 0;
        FacesContext fc;
        FacesMessage fm;
        UIComponent uic;
        UIInput uii;
        //
        // Prüfung 1: Sätze korrekt? -> 11:n oder n:11 oder n+2:n(ab n=10)
        for (int i = 0; i < spielDetailListe.size(); i++)
        {
           SpielDetail sd = spielDetailListe.get(i);
           if (!istSatzende(sd.getSatz1Gewonnen(), sd.getSatz1Verloren()))
           {
              fc = FacesContext.getCurrentInstance();
              fm = new FacesMessage(FacesMessage.SEVERITY_ERROR,
                    "Je Satz sind mindestens 11 Punkte und eine Diffenrenz von 2 Punkten notwendig.", "");
              fc.addMessage("", fm);
              id = id.replace("%1%", String.valueOf(i)).replace("%2%", "G1");
              uic = fc.getViewRoot().findComponent(id);
              if (uic != null)
              {
                 uii = (UIInput) uic;
                 uii.setValid(false);
              }
              return false;
           }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T17:11:55.153

如果您实现一个独立的验证器并在数据表中的输入组件上声明该验证器，您的工作将会更加清晰和顺畅。您正在尝试做的事情是不可维护的，并且不必要地将视图绑定到模型。我会建议你

1.  将您的验证逻辑抽象为适当的`Validator`. 下面只是一个虚拟的 impl。

    ```
     @FacesValidator("myValidator")
      public class MyValidator implements Validator{

       public void validate(FacesContext context, UIComponent component,
        Object value) throws ValidatorException {
            for (int i = 0; i < spielDetailListe.size(); i++)
    {
       SpielDetail sd = spielDetailListe.get(i);
       if (!istSatzende(sd.getSatz1Gewonnen(), sd.getSatz1Verloren()))
       {
          fc = FacesContext.getCurrentInstance();
          fm = new FacesMessage(FacesMessage.SEVERITY_ERROR,
                "Je Satz sind mindestens 11 Punkte und eine Diffenrenz von 2 Punkten notwendig.", "");
          fc.addMessage("", fm);
          id = id.replace("%1%", String.valueOf(i)).replace("%2%", "G1");
          uic = component.getClientId();
          if (uic != null)
          {
             uii = (UIInput) uic;
             uii.setValid(false);
          }

    } 
    ```

    } }

2.  在组件上定义验证器

    ```
    <pe:inputNumber id="inV1" validator="#{myValidator}" value="#{dtSpiErf2.satz1Verloren}"
                               maxlength="2" decimalPlaces="0"
                               style="width:20px; text-align:left"> 
    ```

3.  将 a 附加`<prime:message/>`到组件并让 JSF 完成它的工作。造型和定位由你决定

    ```
    <prime:message for="inV1"/> 
    ```

# android - 为什么 SOlite 更换不起作用？

> ID：14506084
> 
> 赞同：0
> 
> 时间：2013-01-24T16:28:58.843
> 
> 标签：android, sqlite

如果我发表相同的评论（例如：“www.google.lv”），它会再次创建此评论。我想这个评论不能重复，而是最新创建的。我是 include `insertWithOnConflict`，但它不起作用。有我的代码：

```
 public class SQLiteAdapter {

public static final String MYDATABASE_NAME = "MY_DATABASE";
public static final String MYDATABASE_TABLE = "MY_TABLE";
public static final int MYDATABASE_VERSION = 1;
public static final String KEY_ID = "_id";
public static final String KEY_CONTENT = "Content";

//create table MY_DATABASE (ID integer primary key, Content text not null);
private static final String SCRIPT_CREATE_DATABASE =
"create table " + MYDATABASE_TABLE + " ("
+ KEY_ID + " integer primary key autoincrement, "
+ KEY_CONTENT + " text not null);";

private SQLiteHelper sqLiteHelper;
private SQLiteDatabase sqLiteDatabase;

private Context context;

public SQLiteAdapter(Context c){
context = c;
}

public SQLiteAdapter openToRead() throws android.database.SQLException {
sqLiteHelper = new SQLiteHelper(context, MYDATABASE_NAME, null, MYDATABASE_VERSION);
sqLiteDatabase = sqLiteHelper.getReadableDatabase();
return this;
}

public SQLiteAdapter openToWrite() throws android.database.SQLException {
sqLiteHelper = new SQLiteHelper(context, MYDATABASE_NAME, null, MYDATABASE_VERSION);
sqLiteDatabase = sqLiteHelper.getWritableDatabase();
return this;
}

public void close(){
sqLiteHelper.close();
}

public long insert(String content){

ContentValues contentValues = new ContentValues();
contentValues.put(KEY_CONTENT, content);
return sqLiteDatabase.insertWithOnConflict(MYDATABASE_TABLE, null, contentValues, SQLiteDatabase.CONFLICT_REPLACE);
}

public int deleteAll(){
return sqLiteDatabase.delete(MYDATABASE_TABLE, null, null);
}

public List<Comment> getAllComments() {
    List<Comment> comments = new ArrayList<Comment>();
    String[] columns = new String[]{KEY_ID, KEY_CONTENT};
    Cursor cursor = sqLiteDatabase.query(MYDATABASE_TABLE,
            columns, null, null, null, null, null);

    cursor.moveToFirst();
    while (!cursor.isAfterLast()) {
      Comment comment = cursorToComment(cursor);
      comments.add(comment);
      cursor.moveToNext();
    }
    // Make sure to close the cursor
    cursor.close();
    return comments;

  }
private Comment cursorToComment(Cursor cursor) {
    Comment comment = new Comment();
    comment.setId(cursor.getLong(0));
    comment.setComment(cursor.getString(1));
    return comment;
  }
public List queueAll(){
String[] columns = new String[]{KEY_ID, KEY_CONTENT};
Cursor cursor = sqLiteDatabase.query(MYDATABASE_TABLE, columns,
  null, null, null, null, null);
cursor.moveToFirst();
  cursor.moveToNext();

return null;
}

public class SQLiteHelper extends SQLiteOpenHelper {

public SQLiteHelper(Context context, String name,
  CursorFactory factory, int version) {
 super(context, name, factory, version);
}

@Override
public void onCreate(SQLiteDatabase db) {
 // TODO Auto-generated method stub
 db.execSQL(SCRIPT_CREATE_DATABASE);
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
 // TODO Auto-generated method stub

}

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T17:06:02.773

实际上，您滥用**了 insertWithOnConflict**。在您的方法**插入中**，您没有提供带有 ContentValues 的 id 列，因此**insertWithOnConflict**只是添加了另一条具有新 id 和现有内容的记录。**如果您提供表中已经存在的 id（您的主键）， insertWithOnConflict**会有所帮助。在您的情况下，您应该首先找到现有评论的 id，然后对其进行更新或插入新评论。

# visual-studio-2010 - 在 Visual Studio 2010 中，我如何知道哪些字符串对用户可见，哪些字符串不可见？

> ID：14506091
> 
> 赞同：0
> 
> 时间：2013-01-24T16:29:13.987
> 
> 标签：visual-studio-2010, backend, frontend

我在一个大型应用程序中有很多硬编码的字符串，我需要知道哪些字符串是前端（在 GUI 中可见），哪些是后端（即排序参数），以便我可以相应地编辑它们。

有什么简单的方法可以区分吗？目前，我必须在以安全的方式做所有事情但浪费大量时间或节省时间但冒着应用程序无法按照我想要的方式运行的风险之间做出决定。

编辑：该应用程序主要是基于表单的。我所说的字符串是指代码中实际上是字符串的任何内容。有些显然是针对用户的，例如错误消息，但有些不是那么明显，例如“客户”。我不知道“客户”是在某处的对话框中弹出的东西，还是完全是内部的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T16:49:17.040

不，没有简单的方法。

我的建议：您可以先编写一些脚本来检测 dialogs/ux/console 使用的字符串并修复这些问题。然后，您应该排除跟踪/日志记录等内容。如果您发现更多模式，请使用这些模式最终得到一个较小的项目子集，您将不得不手动删除这些项目。

这种混乱很难清理，尤其是对于较大的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T17:44:50.387

令人难以置信的是，我想我刚刚想通了，而且解决方案非常简单。

当您将鼠标悬停在字符串上时，对话框应为 GUI 中的某些内容显示“可本地化字符串”，为内部内容显示“class String System.String”。至少，我是这么解释的。我希望在发布问题之前我已经注意到这一点......

编辑：这并不总是正确的。

# php - mysql忽略where语句

> ID：14506094
> 
> 赞同：1
> 
> 时间：2013-01-24T16:29:22.443
> 
> 标签：php, mysql, debian, magento-1.7

我使用此查询来获取昨天的所有销售额。将其导出到某个地方。
由于有很多*已取消，待付款，处理等*，我想只导出已完成的。

但不知何故，mysql只是忽略了拳头限制。我一直得到所有的销售。我写什么并不重要。它只需要是昨天使用的状态。

```
$sql = '

SELECT
        sales_flat_order_grid.entity_id,
        sales_flat_order_grid.increment_id AS increment_id,
        sales_flat_order_grid.quote_id AS quote_id,
        sales_flat_order_grid.store_name AS store_name,
        sales_flat_order_grid.created_at AS created_at,
        sales_flat_order_grid.billing_name AS billing_name,
        sales_flat_order_grid.payment_method AS payment_method,
        sales_flat_order_grid.grand_total AS grand_total,
        sales_order_status.label AS status,
        sales_flat_order_item.sku AS sku,
        sales_flat_order_item.name AS name,
        sales_flat_order_item.price_incl_tax AS price_incl_tax,
        sales_flat_order_item.product_options AS product_options,
        sales_flat_order_payment.additional_information AS additional_information

FROM
        sales_flat_order_grid,
        sales_order_status,
        sales_flat_order_item,
        sales_flat_order_payment

WHERE
        sales_flat_order_grid.status = "Complete"
        AND sales_flat_order_grid.entity_id = sales_flat_order_item.order_id
        AND sales_flat_order_grid.entity_id = sales_flat_order_payment.entity_id
        AND sales_flat_order_grid.created_at >= "' . $date . ' 00:00:00"
        AND sales_flat_order_grid.created_at <= "' . $date . ' 23:59:59"

ORDER BY
        sales_flat_order_grid.entity_id DESC

'; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T16:41:05.593

当您编写这样的查询时，您正在为灾难做好准备：

```
FROM
    sales_flat_order_grid,
    sales_order_status,
    sales_flat_order_item,
    sales_flat_order_payment

WHERE
    sales_flat_order_grid.status = "Complete"
    AND sales_flat_order_grid.entity_id = sales_flat_order_item.order_id
    AND sales_flat_order_grid.entity_id = sales_flat_order_payment.entity_id
    AND sales_flat_order_grid.created_at >= "' . $date . ' 00:00:00"
    AND sales_flat_order_grid.created_at <= "' . $date . ' 23:59:59" 
```

为什么？因为很容易错过一个`JOIN`条件。

相反，请使用以下语法：

```
FROM
    sales_flat_order_grid
    INNER JOIN sales_order_status ON ....
    INNER JOIN sales_flat_order_item ON sales_flat_order_grid.entity_id = sales_flat_order_item.order_id
    INNER JOIN sales_flat_order_payment ON sales_flat_order_grid.entity_id = sales_flat_order_payment.entity_id

WHERE
    sales_flat_order_grid.status = "Complete"
    AND sales_flat_order_grid.created_at >= "' . $date . ' 00:00:00"
    AND sales_flat_order_grid.created_at <= "' . $date . ' 23:59:59" 
```

看到`....`那里了吗？它缺少连接条件，因此它选择了**笛卡尔积**。添加缺少的连接条件，您的结果应该更符合您的期望。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T16:36:14.037

FROM 子句中有一个名为“sales_order_status”的表，但我看不到它是如何与其他表连接的。所以我认为这就是问题所在。您在 JOIN 子句中缺少与 sales_order_status 表相关的部分。

所以你目前得到的是**sales_order_status**表和你通过加入**sales_flat_order_grid**、**sales_flat_order_item**和**sales_flat_order_payment**得到的结果表之间的**交叉连接**。因此，您可以在查询结果中看到所有订单状态。

 ******* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T16:38:16.513

我认为您 where 的问题是您希望列值同时具有两个不同的值，也许您希望该列具有这些值中的任何一个

这可能有效

```
WHERE
        sales_flat_order_grid.status = "Complete"
        AND (sales_flat_order_grid.entity_id = sales_flat_order_item.order_id
             OR sales_flat_order_grid.entity_id = sales_flat_order_payment.entity_id)
        AND sales_flat_order_grid.created_at >= "' . $date . ' 00:00:00"
        AND sales_flat_order_grid.created_at <= "' . $date . ' 23:59:59" 
```******

# macos - MacOS：应用程序包中插件的 libvlc 路径

> ID：14506097
> 
> 赞同：3
> 
> 时间：2013-01-24T16:29:40.487
> 
> 标签：macos, packaging, vlc, libvlc

我的 MacOS 应用程序使用 libVLC 插件在应用程序窗口中播放视频文件。libVLC 是动态链接的，但是当我尝试使用“libvlc_new”获取新的 vlc 实例时，会打印以下错误（并且用于保存指向 vlc 实例的指针的变量为 NULL）：

> 主要 libvlc 错误：未找到插件！检查您的 VLC 安装。

我想将 vlc 插件直接包含在 MySampleApp.app 包中。我试图将它们放在应用程序包中的不同位置，但 libVLC 没有找到它们。

我必须在哪里存储 vlc 插件/我如何告诉 libVLC 在哪里寻找插件？

问候，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T16:35:17.863

根据本[教程](http://wiki.videolan.org/LibVLC_Tutorial_086c)，在 videolan wiki 上，您提供参数（如`argc`/ `argv`）`libvlc_new()`来定义其行为。其中之一是`--plugin-path`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-12T10:43:49.113

在 libVLC 中声明：

> 对于 libvlc_new() 参数，绝对不保证或承诺向前、向后和跨平台兼容性。我们建议您不要使用它们，除非在调试时使用。

因此，最好为这个问题再提供一个答案。

插件路径可以通过设置 VLC_PLUGIN_PATH 环境变量来设置：

```
setenv ("VLC_PLUGIN_PATH", path, 1); 
```

我还没有找到通过 API 做到这一点的任何方法。

# java - 为 Primefaces 多选数据表实现动态 ContextMenu

> ID：14506098
> 
> 赞同：7
> 
> 时间：2013-01-24T16:29:42.327
> 
> 标签：java, primefaces, datatable, contextmenu, multi-select

我有一个带有上下文菜单的分页 PrimeFaces 数据表，我希望实现多选，其中上下文菜单中的菜单项将取决于所选项目的数量，因为某些操作仅在仅选择一项时可用，而其他将在选择一个或多个时有效。

我的第一个想法是使用在控制器 bean 中设置的单个菜单项的“渲染”选项。这种工作，因为确实显示了正确的菜单项。问题是使用菜单项的渲染功能会导致数据表上的选择丢失，从而违背了练习的目的。

```
 <p:dataTable id="orders" dynamic="true" var="item" rowKey="#{item.id}" value="#{ordersController.orders}"
                 emptyMessage="#{uistrings['datatable.nodata']}" paginator="true" paginatorPosition="both"
                 paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink}  {PageLinks}  {NextPageLink} {LastPageLink}"
                 paginatorAlwaysVisible="false" rows="10" selectionMode="multiple" selection="#{ordersController.selectedOrders}" widgetVar="orderList">

        <p:ajax event="sort" listener="#{ordersController.onSort}" update="orders"/>
        <p:ajax event="rowSelect" update="contextMenu"/>
        <p:ajax event="rowUnselect" update="contextMenu"/> 

        <p:column id="balance_date" sortBy="#{item.balanceDate}">
            <f:facet name="header">
                <h:outputText value="#{uistrings['orders.column.label.balancedate']}"/>
            </f:facet>
            <h:outputText value="#{item.balanceDate}">
                <f:converter converterId="isoDateTimeConverter"/>
                <f:attribute name="#{webUiConstBean.ISO_CONVERTER_ATTRIBUTE_TYPE}" value="#{webUiConstBean.ISO_DATE_CLASS}" />
                <f:attribute name="#{webUiConstBean.ISO_CONVERTER_ATTRIBUTE_PATTERN}" value="#{webUiConstBean.ISO_DATE_FORMAT}" />
            </h:outputText>
        </p:column>
        <p:column id="recipient_name" sortBy="#{item.recipient.displayName}">
            <f:facet name="header">
                <h:outputText value="#{uistrings['orders.column.label.recipient.displayName']}"/>
            </f:facet>
            <h:outputText value="#{item.recipient.displayName}"/>
        </p:column>

    [snip]

    </p:dataTable>

    <p:contextMenu id="contextMenu" for="orders">
        <p:menuitem value="#{uistrings['orders.menu.details']}" update="details, orders"
                    oncomplete="detailDialog.show()" icon="ui-icon-search" rendered="#{ordersController.renderDisplayDetails}" />

        <p:menuitem value="#{uistrings['orders.button.label.delete']}" icon="ui-icon-trash"
                    update="orders" ajax="true" onclick="confirmDelete.show()"
                    rendered="#{ordersController.renderDeleteDocuments}"/>
    </p:contextMenu> 
```

在这个论坛和其他论坛中寻找解决方案，找到一些提示，并自己想出一些替代方案后，我做了其他一些尝试，包括：

1) 使用两个完整的上下文菜单：一个用于选择一个项目，另一个用于选择多个项目，并使用上下文菜单本身的渲染选项，而不是它们的项目。

在这种情况下，rowSelect 和 rowUnselect 事件同时更新

```
 <p:ajax event="rowSelect" update="contextMenu1Selected contextMenuManySelected"/>
    <p:ajax event="rowUnselect" update="contextMenu1Selected contextMenuManySelected"/> 
```

上下文菜单看起来像这样

```
 <p:contextMenu id="contextMenu1Selected" for="orders" rendered="#{ordersController.render1Selected}">
        <p:menuitem value="#{uistrings['orders.menu.details']}" update="details, orders"
                    oncomplete="detailDialog.show()" icon="ui-icon-search"/>

        <p:menuitem value="#{uistrings['orders.button.label.delete']}" icon="ui-icon-trash"
                    update="orders" ajax="true" onclick="confirmDelete.show()"/>
    </p:contextMenu>

    <p:contextMenu id="contextMenuManySelected" for="orders" rendered="#{ordersController.renderManySelected}">
        <p:menuitem value="#{uistrings['orders.button.label.delete']}" icon="ui-icon-trash"
                    update="orders" ajax="true" onclick="confirmDelete.show()"/>
    </p:contextMenu> 
```

但这根本不起作用。没有显示任何菜单。

2) 将两个上下文菜单放在 outputPanel 中，并更新面板。这与我第一次尝试的结果相同。即菜单项正确呈现但丢失选择

```
 <p:outputPanel id="contextMenuPanel" autoUpdate="true">
            <p:contextMenu id="contextMenu1Selected" for="orders" rendered="#{ordersController.renderDisplayDocument}">
                [menu items]
            </p:contextMenu>

            <p:contextMenu id="contextMenuManySelected" for="orders" rendered="#{ordersController.renderDeleteDocuments}">
        [menu items]
            </p:contextMenu>
        </p:outputPanel> 
```

3) 使用控制器提供的 menuModel 定义 contextMenu 模型，它本身有两个模型可用于两种情况，并根据所选项目的数量提供正确的模型。也在输出面板中

```
 <p:outputPanel id="contextMenuPanel" autoUpdate="true">
            <p:contextMenu id="contextMenu" for="orders" model="#{ordersController.menuModel}"/>
        </p:outputPanel>> 
```

这也没有奏效。MenuItems 正确呈现，但多选丢失和以前一样。

我已经用尽了我知道的选项。

有没有人成功地为带有多选的数据表实现了动态上下文菜单？

或者有没有人有任何进一步的想法可能有效？

干杯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-09-30T12:11:22.753

也许为时已晚，但这是我的解决方案......

带有 javascript 的上下文菜单：

```
<p:contextMenu id="searchResultTableContextMenuId" for="searchResultTableId" beforeShow="return true;"
    widgetVar="searchResultTableContextMenuVar">
    <p:menuitem value="#{msgs['label.resultlistAction.edit']}"
        disabled="#{curSelectedDocsCount ne 1}" icon="fa fa-pencil"
        oncomplete="PF('editPropertyDialogVar').show();" update=":editPropertyFormId" />
    <p:menuitem value="#{msgs['label.resultlistAction.delete']}"
        disabled="#{curSelectedDocsCount le 0}" icon="fa fa-trash"
        actionListener="#{deleteDocumentBL.initFromResultList()}"
        oncomplete="PF('deleteDocumentsDialogVar').show();" update=":deleteDocumentsFormId" />
    <p:menuitem value="#{msgs['label.resultlistAction.download']}"
        disabled="#{curSelectedDocsCount ne 1}" icon="fa fa-download" ajax="false"
        action="#{contentBL.downloadMainContent(curSearch.getViewId(), curSearch.selectedSearchResults.get(0))}" />
    <p:menuitem value="#{msgs['label.resultlistAction.clearSelectionId']}" disabled="#{curSelectedDocsCount lt 1}" icon="fa fa-times-circle-o"
        action="#{curSearch.clearSelectedSearchResults()}" update="@(.resultlistActionGrid) @(.searchResultTable)"
        oncomplete="PF('hitlistTableVar').unselectAllRows();" />
</p:contextMenu>

<!-- javascript to fix problem that the context menu hides if it is updated in ajax event contextMenu -->
<script type="text/javascript">
    var currentEvent;
    $(document).ready(function () {
        PrimeFaces.widget.ContextMenu.prototype.show = function (e) {
            // hide other contextmenus if any
            $(document.body).children('.ui-contextmenu:visible').hide();

            if (e) {
                currentEvent = e;
            }

            var win = $(window),
                    left = e.pageX,
                    top = e.pageY,
                    width = this.jq.outerWidth(),
                    height = this.jq.outerHeight();

            //collision detection for window boundaries
            if ((left + width) > (win.width()) + win.scrollLeft()) {
                left = left - width;
            }
            if ((top + height ) > (win.height() + win.scrollTop())) {
                top = top - height;
            }

            if (this.cfg.beforeShow) {
                this.cfg.beforeShow.call(this);
            }

            this.jq.css({
                'left': left,
                'top': top,
                'z-index': ++PrimeFaces.zindex
            }).show();

            e.preventDefault();
        };
    });
</script> 
```

dataTable 需要处理一些用于显示和更新上下文菜单的 ajax 事件：

```
<p:dataTable id="searchResultTableId" ...>
    <p:ajax event="rowSelect" update=":searchInstancesFormId:listResultTabViewId:searchResultTableContextMenuId" />
    <p:ajax event="rowUnselect" update=":searchInstancesFormId:listResultTabViewId:searchResultTableContextMenuId" />
    <p:ajax event="toggleSelect" update=":searchInstancesFormId:listResultTabViewId:searchResultTableContextMenuId" />
    <p:ajax event="rowSelectCheckbox" update=":searchInstancesFormId:listResultTabViewId:searchResultTableContextMenuId" />
    <p:ajax event="rowUnselectCheckbox" update=":searchInstancesFormId:listResultTabViewId:searchResultTableContextMenuId" />
    <p:ajax event="contextMenu" update=":searchInstancesFormId:listResultTabViewId:searchResultTableContextMenuId" oncomplete="PF('searchResultTableContextMenuVar').show(currentEvent);" />
</p:dataTable> 
```

# sql - 跨表计数时如何减少对 DB 的调用次数

> ID：14506099
> 
> 赞同：1
> 
> 时间：2013-01-24T16:29:43.227
> 
> 标签：sql, performance

我有一个类别表，其中列出了大约 35 个可能的类别。然后，我还有一个 Item 表，其中一个外键与类别表中的类别相关联。在我的索引页面上，我只想显示每个类别中有多少项目。在构建更有效的查询和减少对数据库的调用次数方面，我只是不确定最好的方法是什么。

任何想法都会很棒

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T16:33:06.687

您正在寻找一个简单的聚合查询：

```
select c.categoryName, count(i.itemId) as NumItems
from category c left outer join
     items i
     on c.categoryID = i.categoryID
group by c.categoryName
order by NumItems desc 
```

获取所有类别，`left outer join`即使它们没有任何项目。

# c# - AndroidManifest.xml 已经定义了可调试（在 http://schemas.android.com/apk/res/android）；使用清单中的现有值

> ID：14506100
> 
> 赞同：0
> 
> 时间：2013-01-24T16:29:46.047
> 
> 标签：c#, android, visual-studio-2012, xamarin.android, android-manifest

我正在尝试构建一个 hello world 应用程序，每当我尝试构建它时，我都会收到错误消息

AndroidManifest.xml 已经定义了可调试的（在[http://schemas.android.com/apk/res/android](http://schemas.android.com/apk/res/android)中）；使用清单中的现有值。

在过去的 3 个小时里，我一直试图找出问题所在，但无济于事。

我正在使用带有单声道的 VS2012 for android。

有人至少可以告诉我是什么导致了这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T09:52:11.643

这对我有用：将其设置为发布并重建，然后将其设置回调试并重建。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T00:04:45.030

这实际上不是一个错误，只是一个警告。您的应用程序将运行良好，而无需对此进行任何更改。当/如果您最终发布应用程序时，您需要更加注意它，但现在您可以放心地忽略它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-10T23:18:54.677

VS2012 应该能让你看到实际的清单，删除 debuggable 属性应该可以解决这个问题。我不使用 VS2012，但对于命令行，您将 ant 目标名称（在本例中为“调试”）传递给构建过程，因此在 AndroidManifest.xml 中使用 android:debuggable="true" 是多余的。

# javascript - 使用 jQuery 或 javascript 重新格式化 Json 响应

> ID：14506103
> 
> 赞同：0
> 
> 时间：2013-01-24T16:29:49.957
> 
> 标签：javascript, jquery, json

我有一个无法控制其馈送的 json 对象。提要发送一个对象，其中包含一组未定义的对象。我需要在资产中定义每个对象，并将其所有属性（路径、名称、标题等）与资产中的每个对象一起定义，如下面的第二个结果。如果有一个实用的想法或一个 jquery 插件可以提供帮助。有人可以帮我得到这个结果吗？

编辑：出于隐私原因，我不得不删除 json 对象。感谢那些回复的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T17:00:12.590

您可以遍历 JSON 数组并将元素重新排列到输出数组中

```
var json = { "assets": [ ... ] };
var out = [];
for (var i in json.assets) {
    var v = json.assets[i];
    v.id = +i + 1;
    v.title_id = +i + 1;
    out.push({ 'asset': v });
} 
```

[JSFiddle](http://jsfiddle.net/8TnRx/4/)用于测试。

# gwt - GWT 日期框验证

> ID：14506104
> 
> 赞同：5
> 
> 时间：2013-01-24T16:29:55.003
> 
> 标签：gwt

使用 DateBox 小部件进行完整日期值验证的最佳方法是什么？

以下只是防止像“ **1.1.** ”这样的不完整输入，但允许例如：“ **333.333.333** ”

```
final DateTimeFormat format = DateTimeFormat.getFormat("dd.MM.yyyy");
dateBox.setFormat(new DefaultFormat(format)); 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T16:33:32.647

像这样的东西：

```
try {
    Date date = DateTimeFormat.getFormat(PredefinedFormat.DATE_SHORT).parseStrict(value);
    // Do something with date
} catch (IllegalArgumentException e) {
    // Show error message
} 
```

`1/1/2013`显然，您可以使用不同的格式，或者如果您允许用户自由输入日期以及`Jan 1, 2013`,`January 1, 2013`等，您可以尝试逐个解析所有格式。

# apache-ode - Apache ODE 在内存进程执行中的稳定性如何？

> ID：14506106
> 
> 赞同：2
> 
> 时间：2013-01-24T16:29:59.950
> 
> 标签：apache-ode

我们在 Servicemix 3.3.2 中使用 apache ode 1.3.3 来实现我们的工作流程。当负载增加时（即每单位时间的流调用数），ode 冻结，停止处理新请求并挂起。Usullay，我们通过在清理“数据”文件夹后重新启动 Servicemix 来解决这个问题。

最初，我认为这是一个线程问题（缺少供 ode 使用的线程）。在增加 ode-jbi.properties 中的“线程池大小”后，这个问题得到了扩展。但是，在重负载下，ode 继续挂起。

进一步的调查以及额外的日志显示，在重负载下，ode 无法获得足够的数据库连接 (NoManagedConnectionException) 来保持其状态。我们的 ode 持久性配置是 INTERNAL（请参阅 ode-jbi.db.mode=INTERNAL ），其中连接池由容器/运行时本身维护。将其迁移到外部 jndi 数据源配置（我们可以在其中配置连接池参数）的努力尚未取得成果（由于我无法理解每个阶段不断出现的无数错误:(:)）

所以我尝试了另一个可用选项，即我的进程的“内存中执行”。这在“测试设置”中运行良好，并且在模拟负载下不再抛出“NoManageConnectionException”。

但我对将其转移到 PROD 有一些担忧。内存中执行与“持久”执行有何不同？这将消耗多少内存？这是否会通过导致“OutOfMemoryOutages”影响我的 PROD 设置的可靠性。

我们有大约 10 个已部署的 bpel 进程。和负载（请求数）......嗯，它通常是最小的，但有时会飙升（这就是我需要我的进程运行得非常快但不会导致任何 OutOfMemory PROD 中断的地方......希望：D :) :P )

需要您对此的想法、建议和意见。

在此先感谢，阿伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-16T16:22:26.663

答案有点晚了，但仍然相关，并希望在未来对某人有所帮助。

关于外部数据库配置，[此链接](http://sathwikbp.blogspot.de/2013/09/apache-ode-on-tomcat-7-with-bitronix.html)描述了如何将 Bitronix TM 与 Tomcat 结合使用。是的，它特定于 Tomcat，但在其他应用程序服务器中，您将有其他方法来指定托管数据源。只需确保在`web.xml`and`ode-axis2.properties`文件中相应地设置了 Apache ODE 中的引用。这应该使您能够使用外部数据库。

我发现在高负载下在内存中执行进程可能会导致`ConcurrentModificationException`. [这个 JIRA](https://issues.apache.org/jira/browse/ODE-493)提到了这个问题，并且有一个固定的版本设置为 1.4。

~~所以我猜答案，无论内存中的执行是否稳定，是否，因为目前存在一个在高负载下表现出来的错误。~~

外部数据库耦合也是可能的，如果 CME 也使用外部数据库抛出，我将在明天进行测试。

**编辑：**

没有看到`ConcurrentModificationException`连接到外部数据库（容器管理）的时间，但确实偶然发现了[这个 JIRA](https://issues.apache.org/jira/browse/ODE-400)的症状，这是可修补的，尽管问题中没有提供反馈，我目前无法构建源代码。

**编辑：**

内存中执行的 BPEL 流程仅限于同步（具有一个接收操作），如此处所解释[的](http://comments.gmane.org/gmane.comp.apache.ode.user/4443)，这实际上是 ODE 开发人员对同一问题的回答...... :)

因此，BPEL 流程的内存中执行是稳定的，只要它们是同步的。

# android - Android缩放动态变化的图层

> ID：14506109
> 
> 赞同：4
> 
> 时间：2013-01-24T16:30:04.347
> 
> 标签：android, image, dynamic, layer, zooming

我有一张地图的基本图像，我希望能够在这张地图上添加标记。标记由屏幕底部的一组按钮控制，并且需要能够在用户选择时显示和隐藏。我需要能够放大地图，并且标记需要保持在正确的位置。显示多个图层不是问题，而是缩放。

有谁知道我可以缩放多个图层同时仍保留在任何时间点隐藏和显示标记的能力的方法？

# jquery - Ruby 关于 $("#form > form").replaceWith("<%= escape_javascript(render(:partial => "form"))%>")

> ID：14506111
> 
> 赞同：-2
> 
> 时间：2013-01-24T16:30:05.940
> 
> 标签：jquery, css, ruby-on-rails, ruby

**任何专家都可以解释为什么在edit.js中使用$("#form > form")，而不是$("#form")？

以下是一些相关代码：**

内部控制器（app/controllers/entries_controller.rb）

```
def edit
    @entry = Entry.find(params[:id])
    respond_to do |format|
      format.html 
      format.js
    end
  end 
```

在 app/views/entries/edit.js.erb 模板中将值设置到表单中，代码如下：

```
$("#form > form").replaceWith("<%= escape_javascript(render(:partial => "form"))%>") 
```

索引页（app/views/entries/index.html.erb）

```
<h2>Entry form</h2>
<div id="form">
  <%= render :partial => "form" %>
</div> 
```

表单部分（app/views/entries/_form.html.erb）

```
<%= form_for(@entry, :remote => true) do |f| %>
    <div class="field">
    <%= f.label :name %><br />
    <%= f.text_field :name %>
  </div>
  <div class="field">
    <%= f.label :address %><br />
    <%= f.text_area :address, :rows => 3 %>
  </div>
  <div class="field">
    <%= f.label :phone %><br />
    <%= f.text_field :phone %>
  </div>
  <div class="field">
    <%= f.label :email %><br />
    <%= f.text_field :email %>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T16:35:05.110

选择器`#form`选择带有`id`of的元素`form`- 在这种情况下，是一个`<div>`元素。

选择器`#form > form`选择作为元素的直接子元素的表单元素`id`-`form`在这种情况下，`<form>`直接位于元素内部的`<div id="form">`元素。

您想要替换表单本身，而不是`<div>`包含它的表单，因此您想要选择`<div id="form">`元素内部的表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T16:35:35.867

`$("#form")`将与`<div>`第`id=form`2 行匹配`index.html.erb`

`$("#form > form")`匹配`<form>`this 中的标签`<div id=form>`。当您从内部渲染您的局部时`<div>`，`<form>`实际上是您搜索它的地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T16:34:14.033

这不需要专家。`$("#form > form")`表示`form`带有 的 DOM 的子标签`id=form`。

您生成的表单`<%= form_for(@entry, :remote => true) do |f| %>`是`<div id="form">`

# parameters - 基于另一个字段值的默认参数 - Crystal Reports

> ID：14506114
> 
> 赞同：0
> 
> 时间：2013-01-24T16:30:12.413
> 
> 标签：parameters, crystal-reports

有没有办法根据另一个字段值在 Crystal 报表中设置默认参数值。

例子：

我有orderrel.plant 和warehousecode.plant。我有一个用于warehousecode.plant 的参数，但希望该参数的默认值基于orderrel.plant 的值。基本上， orderrel.plant 是销售订单应该从那里发货的工厂，但我希望能够选择检查其他工厂的库存，以防可以从那里发货。默认参数将帮助用户知道它应该从哪个工厂发货，而无需查看销售订单。

提前谢谢了。

- 更新

这是查询：

```
 SELECT     orderhed.ordernum, orderdtl.orderline, orderrel.orderrelnum, orderhed.custnum, orderhed.requestdate AS hedrequestdate, orderhed.orderdate AS hedorderdate, 
                  orderdtl.partnum, orderdtl.requestdate AS dtlrequestdate, orderrel.reqdate AS relreqdate, orderrel.needbydate AS relneedbydate, orderrel.ourreqqty, 
                  orderrel.plant AS releaseplant, partwhse.plant, partwhse.warehousecode, partwhse.allocqty, partwhse.onhandqty, part.partdescription
    FROM         part RIGHT OUTER JOIN
                  orderdtl ON part.company = orderdtl.company AND part.partnum = orderdtl.partnum RIGHT OUTER JOIN
                  orderhed ON orderdtl.company = orderhed.company AND orderdtl.ordernum = orderhed.ordernum LEFT OUTER JOIN
                  orderrel ON orderdtl.company = orderrel.company AND orderdtl.ordernum = orderrel.ordernum AND orderdtl.orderline = orderrel.orderline LEFT OUTER JOIN
                  partwhse ON orderdtl.company = partwhse.company AND orderdtl.partnum = partwhse.partnum
    WHERE     (orderhed.ordernum = @p_ordernum) AND (orderhed.company = 'lot')
    ORDER BY orderhed.ordernum, orderdtl.orderline, orderrel.orderrelnum 
```

更详细地解释一下... 每个销售订单下达都有一个工厂，订单将从 (orderrel.plant) 完成。我正在制作一份报告，将查看指定的销售订单，并提供我们某些工厂仓库中的现有/分配数量。我希望用户能够运行报告，而不是仅仅查看订单发布工厂的现有价值，而是能够查看其他工厂的库存，看看我们是否/在哪里可以完成订单. partwhse.plant（以前不正确地称为warehouse.plant）是我需要使用的植物字段来定义我想要查看的现有库存值的植物。这是我有参数的字段。我希望它默认为 orderrel.plant 的值，这样就不必查找订单，

我希望这能澄清一点。

# rally - 集会休息 api java 工具包 sslpeerunverifiedexception：对等体未通过身份验证

> ID：14506119
> 
> 赞同：1
> 
> 时间：2013-01-24T16:30:22.193
> 
> 标签：rally

我正在尝试使用这个工具包来测试 Rally 的 webservice api。我们有一个 Rally 的内部设置。我的代码如下所示：

```
 RallyRestApi restApi = new RallyRestApi (new URI("https://rally"), "userName", "password");
    restApi.setApplicationName("Test");
    restApi.setWsapiVersion(wsapiVersion);

    String workspaceRef = new String("/workspace/11457676");
    String projectRef = new String("/project/11457760");

    String storyFormattedID = "US576";

    QueryRequest storyRequest = new QueryRequest("HierarchicalRequirement");
    storyRequest.setFetch(new Fetch("FormattedID","Name","Owner"));
    storyRequest.setQueryFilter(new QueryFilter("FormattedID", "=", storyFormattedID));
    storyRequest.setWorkspace(workspaceRef);
    storyRequest.setProject(projectRef);
    QueryResponse storyQueryResponse = restApi.query(storyRequest);
    .... 
```

“....”之前的激光线生成异常：javax.net.ssl.SSLPeerUnverifiedException: peer not authenticated。当我在浏览器上手动访问这样的网络服务时工作正常，除了我注意到证书错误：“https://rally/slm/webservice/1.29/defect/10509982”

这个事情谁有经验？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T17:27:57.497

这绝对是我们在针对具有自签名证书的服务器内部测试工具包时发现的一个问题。看看这个相关的问题：

[带有 httpClient 的 SSLPeerUnverifiedException](https://stackoverflow.com/questions/9101763/sslpeerunverifiedexception-with-httpclient)

特别是这个答案：

[https://stackoverflow.com/a/9114024/728184](https://stackoverflow.com/a/9114024/728184)

您现在可以通过扩展 RallyRestApi 并配置必要的 SSL 安全覆盖来实现这一点：

```
import org.apache.http.conn.scheme.Scheme;
import org.apache.http.conn.ssl.SSLSocketFactory;
import org.apache.http.conn.ssl.TrustStrategy;

import java.net.URI;
import java.security.cert.CertificateException;
import java.security.cert.X509Certificate;

public class OnPremRestApi extends RallyRestApi {

    public OnPremRestApi(URI server, String userName, String password) {
        super(server, userName, password);

        try {
            SSLSocketFactory sf = new SSLSocketFactory(new TrustStrategy() {
                public boolean isTrusted(X509Certificate[] certificate, String authType)
                    throws CertificateException {
                    //trust all certs
                    return true;
                }
            }, SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);
            httpClient.getConnectionManager().getSchemeRegistry()
                .register(new Scheme("https", 443, sf));
        } catch (Exception e) {
            //hmm...
        }
    }
} 
```

然后只需在您的代码中使用 OnPremRestApi 的实例而不是 RallyRestApi。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-31T17:42:00.533

从[jar](https://github.com/RallyTools/RallyRestToolkitForJava/wiki/User-Guide#setup)的 2.1 版本开始，工具包允许访问`HTTPClient`它下面的内容，我们可以告诉`HTTPClient`忽略无效的证书链并容忍自签名证书以解决`SSLPeerUnverifiedException: peer not authenticated`异常

当我们实例化 RallyRestApi 时：

```
String host = "https://rally1.rallydev.com";
String apiKey = "_abc123";
RallyRestApi restApi = new RallyRestApi(new URI(host),apiKey);
restApi.setProxy(new URI("http://myproxy.mycompany.com"), "MyProxyUsername", "MyProxyPassword"); 
```

`HttpClient` 我们可以访问 `getClient()`

这是一个完整的代码示例：

```
import com.rallydev.rest.RallyRestApi;
import com.rallydev.rest.client.HttpClient;
import com.rallydev.rest.request.GetRequest;
import com.rallydev.rest.response.GetResponse;
import java.io.IOException;
import java.net.URI;
import java.net.URISyntaxException;
import java.security.cert.CertificateException;
import java.security.cert.X509Certificate;

import org.apache.http.conn.ssl.SSLSocketFactory;
import org.apache.http.conn.ssl.TrustStrategy;
import org.apache.http.conn.scheme.Scheme;

public class ConnnectionTestWithHTTPClient {

    public static void main(String[] args) throws URISyntaxException, IOException {

        String host = "https://rally1.rallydev.com";
        String apiKey = "_abc123";
        String applicationName = "Connnection Test With HTTPClient";
        RallyRestApi restApi = new RallyRestApi(new URI(host),apiKey);
        restApi.setApplicationName(applicationName); 
        //restApi.setProxy(new URI("http://myproxy.mycompany.com"), "MyProxyUsername", "MyProxyPassword");  //SET PROXY SETTINS HERE
        HttpClient client = restApi.getClient();
        try {
            SSLSocketFactory sf = new SSLSocketFactory(new TrustStrategy() {
                public boolean isTrusted(X509Certificate[] certificate, String authType)
                    throws CertificateException {
                    //trust all certs
                    return true;
                }
            }, SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);
            client.getConnectionManager().getSchemeRegistry().register(new Scheme("https", 443, sf));

            String workspaceRef = "/workspace/12345"; //USE VALID WORKSPACE OID 
            GetRequest getRequest = new GetRequest(workspaceRef);
            GetResponse getResponse = restApi.get(getRequest);
            System.out.println(getResponse.getObject());
        } catch (Exception e) {
            System.out.println(e);
        } finally {
            restApi.close();
        }   
    } 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-17T14:18:12.290

如果它过去可以正常工作，那么您的环境中可能发生了一些变化，特别是与代理有关。

[这里](https://docs.rallydev.com/javarestapi/index.html)记录了 setProxy 方法。如果这确实与代理相关，我希望这会有所帮助。

> 设置代理
> 
> public void setProxy（URI 代理，字符串用户名，字符串密码）
> 
> ```
> [Set the authenticated proxy server to use. By default no proxy is configured.][2]
> 
> Parameters:
>     proxy - The proxy server, e.g. new URI("http://my.proxy.com:8000")
>     userName - The username to be used for authentication.
>     password - The password to be used for authentication. 
> ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-17T05:58:52.203

我已经长时间使用 RallyRestAPi 实例进行连接，突然它抛出 SSLPeerUnverified 异常，如果我使用你给出的类，错误不会发生。到目前为止，RallyRestAPI 是如何工作的？我用的是 1.0.6 也试过 1.0.7

# java - Unicode 翻译 (Java)

> ID：14506122
> 
> 赞同：0
> 
> 时间：2013-01-24T16:30:26.107
> 
> 标签：java, unicode

我目前正在阅读“Beginning Android Games”一书，但在理解以下代码时遇到了问题：

```
int srcX = 0;
int srcWidth = 0;
if (ch == '.') {
  srcX = 200; //Jump to position 200 px in the bitmap
  srcWidth = 10; //A dot is only 10 px
} else {
  srcX = (ch - '0') * 20;
  srcWidth = 20;
} 
```

我有一个数字从 0 到 9 的位图，用于显示高分和演奏时的分数。该变量`srcX`用于查找相应数字在位图中的位置（以像素为单位）。

Ch 是一个字符变量，用于保存字符串中的当前字符（可以是数字、空格或点）。

我的问题是我不明白为什么我们必须使用 (ch - '0') 才能获得“真实”数字而不是 unicode 数字。例如，`if ch = "1", (ch - '0')`结果为 1。如果我不使用“-'0'”，我会得到 unicode，即 49。

当然，为了从 unicode 转换为“实数”，必须发生一些事情。但是为什么结果 (ch - '0') 是 1 而不是 49。

我希望你们能理解我的问题并能帮助我。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T16:36:35.183

字符 '0' 具有 unicode（与值 0..127 的 ASCII 相同）值`48`。
'0', '1', '2', '3', '4', '5', '6', '7', '8', '9'
具有 char 值
48, 49, .., 57

如果您想将其中一个字符转换为一个值（'0' -> 0），您可以这样做

```
c-48; 
```

或者

```
c-'0' 
```

两者都一样。

# mysql - Joomla 导致“连接过多”数据库错误”

> ID：14506124
> 
> 赞同：1
> 
> 时间：2013-01-24T16:30:30.523
> 
> 标签：mysql, joomla2.5

我从 mysql 收到“太多连接”错误，我认为这是由反复出现的 ajax 调用引起的，这些调用正在访问 joomla 后端页面。

我想知道，Joomla 是否会为每个页面加载建立一个新的 mysql 连接，还是会将连接存储在 PHP 会话中？

我怎样才能找到这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T21:00:33.283

问题是 joomla 正在将会话写入 mysql 数据库。禁用该选项解决了“连接过多”错误。

只是为了澄清我在 Joomla 管理员中采取的步骤：

`Site > Global Configuration > System > Session Settings`

将会话设置设置为`None`（或数据库以外的其他内容）

# android - 从 MainActivity 中删除代码

> ID：14506128
> 
> 赞同：1
> 
> 时间：2013-01-24T16:30:42.867
> 
> 标签：android

我还是 Android 开发的新手，我仍然不知道编写代码的好方法。目前我把所有东西都扔进我的`MainActivity`. 但我认为这不是写它的好方法。我一直在搜索谷歌，但我真的不知道要搜索什么。有没有人有任何提示？

我打算尝试获取一些我拥有的代码并将其放入视图中，但是当我这样做时会出现错误。

例如，当我将它放在视图中时，我得到`cannot find symbol LOCATION_SERVICE`

```
public class MainView extends View{
    public double[] getLoc(){
        // Get the location manager
        LocationManager locationManager = (LocationManager)getSystemService(LOCATION_SERVICE);
    }
} 
```

这基本上是一个获取用户纬度和经度的函数的片段。它在我假设的视图中不起作用。该代码在我的 MainActivity 中确实有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T16:32:46.693

采用

```
LocationManager locationManager =
                     (LocationManager)getSystemService(Context.LOCATION_SERVICE); 
```

代替

```
LocationManager locationManager = 
                     (LocationManager)getSystemService(LOCATION_SERVICE); 
```

用于访问`LOCATION_SERVICE`

并且您还需要使用当前上下文来调用 getSystemService 方法来获取服务：

```
public class MainView extends View{
Context context;

public MainView(Context context){
this.context=context;
}

   public double[] getLoc(){
        // Get the location manager
        LocationManager locationManager = 
           (LocationManager)context.getSystemService(Context.LOCATION_SERVICE);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T16:35:21.740

您可以将 Context 传递给您的其他类和 View 类，以执行您在 Main Actvitity 中所做的事情。像这样：

```
public void doStuff(Context context){
    LocationManager locationManager =(LocationManager)context.getSystemService(Context.LOCATION_SERVICE);
} 
```

在您的活动中，您可以：

```
doStuff(getBaseContext()); 
```

使用这种方法

# c# - 如何在 Nhibernate 的 c# 中将 sqlserver 2008 的二进制数据类型值分配给 long 变量？

> ID：14506131
> 
> 赞同：-1
> 
> 时间：2013-01-24T16:30:50.217
> 
> 标签：c#, winforms, nhibernate

在我从事的一个项目中，我发现二进制值存储在数据库的 binary(50) 数据类型列中。例如，1、2、4、8、16 等使用它们的十六进制等效值存储在数据库的二进制（50）数据列中。

我可以将 NHibernate 中的这些值检索为长数据类型吗？

请注意，Nhibernate 需要将 sql server 的 binary(50) 作为 byte[]。

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T20:22:15.477

实现 IUserType 并在该列的映射中将您的类指定为“类型”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T06:43:29.180

使用 AbstractType 和 IParameterizedType 创建自定义类型，它们位于 NHibernate.Type 命名空间中。

# sql - SQL优化请求、分组依据、结果合并

> ID：14506133
> 
> 赞同：-1
> 
> 时间：2013-01-24T16:30:57.340
> 
> 标签：sql, optimization, plsql, group-by

我想优化这个 SQL 请求。我有一个大型数据库并尝试执行它，它花了 7 个小时。而且我无法使用 SQL DEVELOPPER 将结果导出到 excel 中。

请帮我优化它并有更好的响应时间。这也给我带来了所有的事件，我想通过 che.ncp 和 che.typ 使用“group by”表达式来合并它们，但它不起作用，因为我在选择中有很多字段。

非常感谢您的宝贵帮助

```
select distinct 
   (select sum(che1.mon) 
    from awbeprod_fr.CHE_BKFRACOMC che1 
    where che.ncp = che1.ncp and
             che.typ = che1.typ and che.typ='T'),

   (select count(che1.typ) 
    from awbeprod_fr.CHE_BKFRACOMC che1 
    where che.ncp = che1.ncp 
    and che.typ=che1.typ and che.typ='T'),

   (select sum(che1.mon) 
    from awbeprod_fr.CHE_BKFRACOMC che1 
    where che.ncp = che1.ncp 
    and che.typ=che1.typ and che.typ='C'),

   (select count(che1.typ) 
    from awbeprod_fr.CHE_BKFRACOMC che1 
    where che.ncp = che1.ncp 
    and che.typ=che1.typ and che.typ='C'),

   che.ncp, che.mon, che.typ, che.dco, che.dag, 
   che.pie, m.cpro, m.age,  m.ribdec,  m.dev,
   p.lib, cli.cli, cli.lib, cli.pre, cli.nom, 
   adcli.adr1, adcli.adr2, adcli.adr3, adcli.cpos, adcli.ville
from 
   awbeprod_fr.CHE_BKFRACOMC che, awbeprod_fr.bkcom m, 
   awbeprod_fr.bkprod p, awbeprod_fr.bkcli cli, 
   awbeprod_fr.bkadcli adcli
where che.ncp = m.ncp 
and che.cli = m.cli and m.cli = cli.cli
and cli.cli = adcli.cli and m.cpro = p.cpro
order by che.ncp 
```

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T16:43:58.847

部分问题是您正在执行 4 个相关子查询以获得最终结果。我将首先使用子查询来获取`sum()`与`count()`此类似的内容。这将获得结果`C`，`T`然后您将其加入`awbeprod_fr.CHE_BKFRACOMC`：

```
select 
  che1.sum_T,
  che1.count_T,
  che1.sum_C,
  che1.count_C,
  che.ncp, 
  che.mon, 
  che.typ, 
  che.dco, 
  che.dag, 
  che.pie,
  m.cpro,m.age, 
  m.ribdec, 
  m.dev,
  p.lib, 
  cli.cli, 
  cli.lib, 
  cli.pre, 
  cli.nom, 
  adcli.adr1, 
  adcli.adr2, 
  adcli.adr3, 
  adcli.cpos, 
  adcli.ville
from awbeprod_fr.CHE_BKFRACOMC che
inner join awbeprod_fr.bkcom m 
  on che.ncp = m.ncp 
  and che.cli = m.cli
inner join awbeprod_fr.bkcli cli
  on m.cli = cli.cli
inner join awbeprod_fr.bkadcli adcli
  on cli.cli = adcli.cli
inner join awbeprod_fr.bkprod p   
  on m.cpro = p.cpro
left join
(
  select typ, ncp,
    sum(case when typ='T' then mon else 0 end) sum_T,
    count(case when typ='T' then 1 else null end) count_T,
    sum(case when typ='C' then mon else 0 end) sum_C,
    count(case when typ='C' then 1 else null end) count_C
  from awbeprod_fr.CHE_BKFRACOMC
  group by typ, ncp
) che1
   on che.ncp = che1.ncp
   and che.typ=che1.typ
order by che.ncp 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T16:46:31.527

为清楚起见，尝试将 fis 更改为显式`JOIN`s。然后摆脱子查询，它们不是必需的：

```
SELECT  SUM(CASE WHEN che.typ = 'T' THEN che1.mon END) SumT,
        SUM(CASE WHEN che.typ = 'T' THEN 1 END) CountT,
        SUM(CASE WHEN che.typ = 'C' THEN che1.mon END) SumC,
        SUM(CASE WHEN che.typ = 'C' THEN 1 END) CountC,
        che.ncp, che.mon, che.typ, che.dco, che.dag, 
        che.pie, m.cpro, m.age,  m.ribdec,  m.dev,
        p.lib, cli.cli, cli.lib, cli.pre, cli.nom, 
        adcli.adr1, adcli.adr2, adcli.adr3, adcli.cpos, adcli.ville
FROM awbeprod_fr.CHE_BKFRACOMC che
INNER JOIN awbeprod_fr.bkcom m
    ON che.ncp = m.ncp AND che.cli = m.cli
INNER JOIN awbeprod_fr.bkprod p
    ON m.cpro = p.cpro
INNER JOIN awbeprod_fr.bkcli cli
    ON m.cli = cli.cli
INNER JOIN awbeprod_fr.bkadcli adcli
    ON cli.cli = adcli.cli
GROUP BY che.ncp, che.mon, che.typ, che.dco, che.dag, 
         che.pie, m.cpro, m.age,  m.ribdec,  m.dev,
         p.lib, cli.cli, cli.lib, cli.pre, cli.nom, 
         adcli.adr1, adcli.adr2, adcli.adr3, adcli.cpos, adcli.ville
ORDER BY che.ncp 
```

# php - MongoDB升级和PHP不一致的整数存储

> ID：14506135
> 
> 赞同：0
> 
> 时间：2013-01-24T16:31:02.477
> 
> 标签：php, mongodb, pecl

自从升级到 MongoDB 2.2 和 Mongo 的 1.3 版 PECL 包（不确定哪个更改是相关的），我注意到通过 PHP 对转换为整数的字段的插入现在作为 NumberLong 插入到我们的集合中（ {"userid" : NumberLong (792)})。以前，它们是作为整数插入的（ {"userid" : 792} ）。而且，虽然新记录现在使用 NumberLong，但我们的集合现在是混合的，相似的字段具有不同的类型。

这是否可能会导致问题，尤其是在索引和查找方面？是否首选一种格式（我假设 NumberLong 是首选）？假设这是一个好主意，是否有一种直接的方法可以将我们的集合更新为新格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T19:01:42.837

出于查询的目的，您应该对不同类型的数字字段没有任何问题。整数、长整数和双精度数在比较之前都会进行转换。同样，如果您在某个数字字段上有一个唯一索引`x`，您会在尝试插入两个具有值`1`和`1.0`for 的文档时收到错误消息`x`。[BSON 类型的比较顺序](http://docs.mongodb.org/manual/faq/developers/#what-is-the-compare-order-for-bson-types)文档中提到了这一点。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-24T16:35:38.273

我已经重写了这个答案，因为我昨晚写得很快，从那以后就没有真正看过它。

这是因为 ini 设置`native_long`已设置为 on

> 在这种情况下使用的 MongoDB 数据类型是 BSON LONG，而不是在关闭此设置时使用的 BSON INT。

[http://php.net/manual/en/mongo.configuration.php#ini.mongo.native-long](http://php.net/manual/en/mongo.configuration.php#ini.mongo.native-long)

这背后的基本原理是允许 64 位系统存储 64 位 INT。

根据文档页面的建议：

> 此默认行为将在 2.0.0 中更改为 TRUE，因此请确保将此变量设置为您想要的值（可能为 TRUE），以便升级时驱动程序的行为不会突然改变。

因此，升级所有文档并确保它们与驱动程序的这一未来功能兼容可能是一个好主意。

所以回答：

> 假设这是一个好主意，是否有一种直接的方法可以将我们的集合更新为新格式？

不，真的没有。您需要浏览所有文档并使用正确的数据类型重新保存它们。

至于你的一些担忧：

> 这是否可能会导致问题，尤其是在索引和查找方面？是否首选一种格式（我假设 NumberLong 是首选）？

它是一个不同的对象，因此会导致通过这些数字进行查找时出现问题。

但是，如果您设置您的 PHP 应用程序来处理该位，驱动程序会自动为您将 INT 转换为它们在数据库中的相应表示。所以一旦设置它并没有真正创建任何额外的工作，因为在 PHP 端你只会看到普通的`int`对象类型。

至于索引，它不应该有那么大的影响。只有值存储在索引中，并且此处两者之间的值相同。

如果您目前在使用此功能时遇到问题，您可以随时通过注释掉其中实际打开此功能的行来从您的 PHP.ini 中将其关闭。

# c# - Bitmap.Clone() 的奇怪行为

> ID：14506136
> 
> 赞同：2
> 
> 时间：2013-01-24T16:31:03.223
> 
> 标签：c#, bitmap, clone, bitmapdata

```
 var source = new Bitmap(2000,2000);

        var sw = Stopwatch.StartNew();
        for (int i = 0; i < 10000; i++)
        {
            //var copy = new Bitmap(source);
            var copy = source.Clone() as Bitmap;

        }
        sw.Stop();
        Console.WriteLine(sw.ElapsedMilliseconds); 
```

代码在我的系统中运行时间不到 10 毫秒，并且 Ram 使用情况保持不变。有了这个计时器和 Ram 使用结果，就不能有 Bitmapdata 的副本。

但是当我这样做时。

```
 var copy2 = source.Clone() as Bitmap;

        for (int x = 0; x < copy2.Width; x++)
        {
            for (int y = 0; y < copy2.Height; y++)
            {
                copy2.SetPixel(x, y, Color.Red);
            }
        }

        // copy2 is Red
        // source is NOT!! 
```

这怎么可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T16:58:55.993

您`source` **被**复制了 10,000 次。调用`Clone()`无法优化掉，因为编译器不知道方法调用可能有什么副作用。

当然，您的克隆不会被保留，因此垃圾收集器可能会选择很快删除它们（可能在循环仍在运行时）。

您也可以保留克隆。尝试这个：

```
var source = new Bitmap(2000, 2000);
var li = new List<Bitmap>();
var sw = Stopwatch.StartNew();
for (int i = 0; i < 10000; i++)
{
    li.Add((Bitmap)source.Clone());
}
sw.Stop();
Console.WriteLine(sw.ElapsedMilliseconds);

Console.WriteLine(li.Count);
li[4321].SetPixel(1234, 123, Color.Blue);
Console.WriteLine(li[1234].GetPixel(1234, 123)); // checks if a pixel of another clone also changed to blue 
```

* * *

**编辑：**从某种意义上说，克隆似乎是“懒惰的”。上面的代码运行速度非常快，并且不占用太多内存。即使`source`是一个非常复杂的位图，似乎也会发生同样的事情，所以这不仅仅是当`source`位图可以被“压缩”很多时发生的事情。

如果在构建上述列表之后`li`，运行以下代码：

```
var randomNumberGenerator = new Random();

for (int x = 0; x < 10000; ++x)
{
    for (int i = 0; i < 2000; ++i)
        for (int j = 0; j < 2000; ++j)
            li[x].SetPixel(i, j, System.Drawing.Color.FromArgb(randomNumberGenerator.Next()));
    Console.WriteLine(x);
} 
```

您会看到应用程序的内存消耗缓慢而稳定地上升。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T16:37:17.380

您的第一个代码片段运行得如此之快的原因很可能是因为优化器看到它`copy`从未使用过并且只是将其删除。如果您将内部循环更改为：

```
var copy = source.Clone() as Bitmap;
var copy2 = copy; 
```

...它可能会诱使编译器实际生成 IL 代码以克隆位图，并且您会看到经过的时间增加。

# python - django-storages，如何覆盖回django的本地文件存储

> ID：14506138
> 
> 赞同：1
> 
> 时间：2013-01-24T16:31:06.203
> 
> 标签：python, django, django-storage

我已经使用 django-storages 设置了 django 并将默认文件存储设置为 s3boto

DEFAULT_FILE_STORAGE = 'storages.backends.s3boto.S3BotoStorage'

但是我想将一种类型的模型文件字段本地存储在“/ media”中，什么是恢复到 django 原始默认文件存储的最佳方法，我尝试实现 FileSystemStorage 但我收到一个 SuspiciousOperation 错误

我需要编写自己的自定义存储类吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T18:54:09.633

`FileField`接受一个存储参数。

[https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.FileField.storage](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.FileField.storage)

```
from django.core.files.storage import FileSystemStorage

fs = FileSystemStorage(location='/media/photos')

class Car(models.Model):
    ...
    photo = models.FileField(storage=fs) 
```

# iphone - UICollectionView 的奇怪动画行为（插入和删除项目）

> ID：14506139
> 
> 赞同：8
> 
> 时间：2013-01-24T16:31:07.173
> 
> 标签：iphone, ios, uitableview, ios6, uicollectionview

从 UICollectionView 插入或删除项目时，动画期间似乎出现了一个额外的单元格，并且这个额外的单元格向错误的方向移动。我用 UITableView 尝试过完全一样的，没有问题。

问题的**视频在这里**：[https](https://dl.dropbox.com/u/11523469/CollectionViewBug.mov) ://dl.dropbox.com/u/11523469/CollectionViewBug.mov ，左侧是集合视图，右侧是表格视图。每个单元格中的数字是创建单元格时该单元格的 indexPath.item 值。

该问题首先在 0:08 到 0:12（插入）之间的视频中出现，然后在 0:16 到 0:20（删除）再次出现。

该**项目可在此处获得**：[https ://dl.dropbox.com/u/11523469/CollectionViewBug.zip](https://dl.dropbox.com/u/11523469/CollectionViewBug.zip)

即，当插入一个单元格时，正在插入单元格的下方的所有单元格都会向下移动，以便为新单元格腾出空间。但是这个额外的单元格出现并与其他单元格重叠并向上移动。

同样，当删除一个单元格时，被删除单元格下方的所有单元格都会向上移动，以填补该单元格原来所在的位置。但是这个额外的单元格出现并与其他单元格重叠并向下移动。

要在集合视图上执行的第一个操作（插入或删除）不会导致此问题。但是在所有后续操作中，问题都存在。

UICollectionView 有没有其他人遇到过同样的问题？有没有人有解决方案或解决方法？

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-27T06:34:44.280

我想出了一个解决方法，它似乎可以解决问题，但对所提供的示例非常具体。我的猜测是，当单元格被重用时，它们的起点错误，这会导致奇怪的动画。

我将 Storyboard 更改为使用 UICollectionViewFlowLayout 的子类：

```
// MyFlowLayout - subclass of UICollectionViewFlowLayout

#import "MyFlowLayout.h"

@interface MyFlowLayout ()

@property (strong) NSMutableArray *deleteIndexPaths;
@property (strong) NSMutableArray *insertIndexPaths;
@property (assign) float rowOffset;

@end

@implementation MyFlowLayout

-(id)initWithCoder:(NSCoder *)aDecoder
{
    if (self = [super initWithCoder:aDecoder])
    {
        // minimumInteritemSpacing may be adjusted upwards but this example ignores that
        self.rowOffset = self.itemSize.height + self.minimumInteritemSpacing;
    }

    return self;
}

// As per Mark Pospesel corrections to CircleLayout

- (void)prepareForCollectionViewUpdates:(NSArray *)updateItems
{
    // Keep track of insert and delete index paths
    [super prepareForCollectionViewUpdates:updateItems];

    self.deleteIndexPaths = [NSMutableArray array];
    self.insertIndexPaths = [NSMutableArray array];

    for (UICollectionViewUpdateItem *update in updateItems)
    {
        if (update.updateAction == UICollectionUpdateActionDelete)
        {
            [self.deleteIndexPaths addObject:update.indexPathBeforeUpdate];
        }
        else if (update.updateAction == UICollectionUpdateActionInsert)
        {
            [self.insertIndexPaths addObject:update.indexPathAfterUpdate];
        }
    }
}

- (void)finalizeCollectionViewUpdates
{
    [super finalizeCollectionViewUpdates];
    // release the insert and delete index paths
    self.deleteIndexPaths = nil;
    self.insertIndexPaths = nil;
}

// The next two methods have misleading names as they get called for all visible cells on     both insert and delete

- (UICollectionViewLayoutAttributes *)initialLayoutAttributesForAppearingItemAtIndexPath:(NSIndexPath *)itemIndexPath
{
    // Must call super
    UICollectionViewLayoutAttributes *attributes = [super initialLayoutAttributesForAppearingItemAtIndexPath:itemIndexPath];
    if (!attributes)
        attributes = [self layoutAttributesForItemAtIndexPath:itemIndexPath];

    if ([self.insertIndexPaths containsObject:itemIndexPath]) {
        // Initial position for an inserted cell is it's final position - fades in
        CGRect frame = attributes.frame;
        frame.origin.y = itemIndexPath.row * self.rowOffset;
        attributes.frame = frame;
        attributes.zIndex = -1; // stop the inserted cell bleeding through too early in the animation
    }
    if ([self.deleteIndexPaths count]) {
        NSIndexPath *deletedPath = self.deleteIndexPaths[0];  // Might be more than one but this example ignores that
        if (itemIndexPath.row > deletedPath.row) {
            // Anything after the deleted cell needs to slide up from the position below it's final position
            // Anything before the deleted cell doesn't need adjusting
            CGRect frame = attributes.frame;
            frame.origin.y = ((itemIndexPath.row + 1) * self.rowOffset);
            attributes.frame = frame;
        }
    }

    return attributes;
}

- (UICollectionViewLayoutAttributes *)finalLayoutAttributesForDisappearingItemAtIndexPath:(NSIndexPath *)itemIndexPath
{
    UICollectionViewLayoutAttributes *attributes = [super finalLayoutAttributesForDisappearingItemAtIndexPath:itemIndexPath];
    if (!attributes)
        attributes = [self layoutAttributesForItemAtIndexPath:itemIndexPath];

    // I would have expected the final positions to already be correct but my guess is that re-used cells
    // are not considered until after the animation block settings have been generated
    CGRect frame = attributes.frame;
    frame.origin.y = itemIndexPath.row * self.rowOffset;
    attributes.frame = frame;

    if ([self.deleteIndexPaths containsObject:itemIndexPath]) {
        // Fade out the deleted cell
        attributes.alpha = 0.0;
    }

    return attributes;
}

@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T16:09:26.177

如果有人来这里寻找 MonoTouch 的答案，这就是我通过翻译[Gareth 的答案](https://stackoverflow.com/a/14545067/458193)得到的。

一个基类，定义`EnableAnimationFix`了两个虚拟方法：`ApplyAnimationFixToAppearingItem`和`ApplyAnimationFixToDisappearingItem`.

```
public class CollectionViewFlowLayout : UICollectionViewFlowLayout
{   
    protected List<int> _insertedItems = new List<int> ();
    protected List<int> _deletedItems = new List<int> ();

    protected virtual bool EnableAnimationFix {
        get { return false; }
    }

    protected virtual void ApplyAnimationFixToAppearingItem (int index, UICollectionViewLayoutAttributes attrs)
    {
        throw new NotImplementedException ();
    }

    protected virtual void ApplyAnimationFixToDisappearingItem (int index, UICollectionViewLayoutAttributes attrs)
    {
        throw new NotImplementedException ();
    }

    public override UICollectionViewLayoutAttributes InitialLayoutAttributesForAppearingItem (NSIndexPath path)
    {
        var attrs = base.InitialLayoutAttributesForAppearingItem (path);
        if (!EnableAnimationFix) {
            return attrs;
        }

        attrs = attrs ?? LayoutAttributesForItem (path);
        if (attrs != null)
            ApplyAnimationFixToAppearingItem (path.Row, attrs);

        return attrs;
    }

    public override UICollectionViewLayoutAttributes FinalLayoutAttributesForDisappearingItem (NSIndexPath path)
    {
        var attrs = base.FinalLayoutAttributesForDisappearingItem (path);
        if (!EnableAnimationFix) {
            return attrs;
        }

        if (attrs == null && _deletedItems.Contains (path.Row)) {
            // Calling LayoutAttributesForItem will cause an exception so we return now.
            // I think this happens when last and only item is deleted, and there are no other cells in cell pool.
            return null;
        }

        attrs = attrs ?? LayoutAttributesForItem (path);
        if (attrs != null)
            ApplyAnimationFixToDisappearingItem (path.Row, attrs);

        return attrs;
    }

    public override void PrepareForCollectionViewUpdates (UICollectionViewUpdateItem [] updateItems)
    {
        base.PrepareForCollectionViewUpdates (updateItems);

        if (!EnableAnimationFix)
            return;

        _insertedItems.Clear ();
        _deletedItems.Clear ();

        foreach (var update in updateItems) {
            if (update.UpdateAction == UICollectionUpdateAction.Insert) {
                _insertedItems.Add (update.IndexPathAfterUpdate.Row);
            } else if (update.UpdateAction == UICollectionUpdateAction.Delete) {
                _deletedItems.Add (update.IndexPathBeforeUpdate.Row);
            }
        }
    }

    public override void FinalizeCollectionViewUpdates ()
    {
        base.FinalizeCollectionViewUpdates ();

        if (!EnableAnimationFix)
            return;

        _insertedItems.Clear ();
        _deletedItems.Clear ();
    }
} 
```

还有我实际的集合视图布局代码：

```
public class DraftsLayout : CollectionViewFlowLayout
{

    // ... 

    protected override bool EnableAnimationFix {
        get { return true; }
    }

    protected override void ApplyAnimationFixToAppearingItem (int index, UICollectionViewLayoutAttributes attrs)
    {
        if (_insertedItems.Contains (index)) {
            SetXByIndex (attrs, index);
            attrs.ZIndex = -1;
        }

        int deletedToTheLeft = _deletedItems.Count (i => i < index);
        if (deletedToTheLeft > 0) {
            SetXByIndex (attrs, index + deletedToTheLeft);
        }
    }

    protected override void ApplyAnimationFixToDisappearingItem (int index, UICollectionViewLayoutAttributes attrs)
    {
        SetXByIndex (attrs, index);

        if (_deletedItems.Contains (index)) {
            attrs.Alpha = 0;
        }
    }

    const int SnapStep = 150;
    static void SetXByIndex (UICollectionViewLayoutAttributes attrs, int index)
    {
        var frame = attrs.Frame;
        frame.X = index * SnapStep;
        attrs.Frame = frame;
    }
} 
```

请注意，此代码应该可以很好地处理一批中的多个删除。
向加雷斯致敬。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T22:53:51.683

我一直在使用 reloadData 或 reloadItemsAtIndexPaths 遇到各种奇怪的动画行为。当我不使用这些方法时，动画行为似乎像宣传的那样工作。

# vb.net - .NET 使用 XmlSerializer 向元素动态添加属性

> ID：14506142
> 
> 赞同：1
> 
> 时间：2013-01-24T16:31:12.580
> 
> 标签：vb.net, xml-serialization, vb.net-2010

我正在使用序列化创建 XML，当我需要为元素动态创建属性时遇到问题。我正在添加其中包含价格数据的日期元素。我的 XML 类结构如下所示：

```
 <XmlRoot(ElementName:="root")>
    Public Class DateXML
        <XmlElement(ElementName:="date")> _
        Public Property Dates As List(Of DatePrice)
    End Class

    Public Class DatePrice
        <XmlAttribute("value")> _
        Public Property DateValue As String
        <XmlElement("price")> _
        Public Property Price As String
    End Class 
```

然后 XML 将如下所示：

```
<root>
    <date value="2013-01-01">
        <price>100.00</price>
    </date>
    <date value="2013-01-02">
        <price>100.00</price>
    </date>
    <date value="2013-01-03">
        <price>100.00</price>
    </date>
    <date value="2013-01-04">
        <price>100.00</price>
    </date>
    <date value="2013-01-08">
        <price>100.00</price>
    </date>
    <date value="2013-01-12">
        <price>100.00</price>
    </date>
</root> 
```

我的问题是对 XML 的要求。如果我有多个价格相同的日期值，我应该使用`value1="2013-01-01" value2="2013-01-02"`etc 将它们放在一个节点中。此外，如果日期彼此跟随，我应该使用`from="" to=""`属性，并且允许混合这些属性。目标是使用属性创建尽可能少的日期节点。所以上面的例子应该是这样的：

```
<root>
    <date from="2013-01-01" to="2013-01-04">
        <price>100.00</price>
    </date>
    <date value1="2013-01-08" value2="2013-01-12">
        <price>100.00</price>
    </date>
</root> 
```

我应该如何创建我的 DatePrice 类来完成这个要求？我正在从数据库中获取每个日期的数据。我可以将 from 和 to 属性作为属性添加到类中，但是是否可以为 value1、value2 ...动态添加属性？

编辑：

在发现如何序列化字典之后，我现在更接近了。这是我尝试过的：

```
<XmlRoot(ElementName:="root")>
Public Class XmlObject
    <XmlElement(ElementName:="element")> _
    Public Property element As String 
    Public Property elementAttributes As ValueAttributes
End Class

Public Class ValueAttributes
    Public Property values As SerializableDictionary(Of String, String)
End Class 
```

实现 IXmlSerializable 的字典类：

```
Public Class SerializableDictionary(Of AttributeName, AttributeValue)
    Inherits Dictionary(Of String, String)
    Implements IXmlSerializable

    Public Function GetSchema() As System.Xml.Schema.XmlSchema Implements System.Xml.Serialization.IXmlSerializable.GetSchema
        Return Nothing
    End Function

    Public Sub ReadXml(reader As System.Xml.XmlReader) Implements System.Xml.Serialization.IXmlSerializable.ReadXml 
        If reader.HasAttributes Then
            While reader.MoveToNextAttribute()

                Dim key As String = reader.Name
                Dim value As String = reader.Value
                Me.Add(key, value)
            End While

            reader.MoveToElement()
        End If
    End Sub

    Public Sub WriteXml(writer As System.Xml.XmlWriter) Implements System.Xml.Serialization.IXmlSerializable.WriteXml     
        For Each kvp As KeyValuePair(Of String, String) In Me
            writer.WriteAttributeString(kvp.Key, kvp.Value)
        Next
    End Sub

End Class 
```

使用这些，我将得到一个如下所示的 XML：

```
<root>
  <element>the element value</element>
  <elementAttributes>
    <values value1="1" value2="2" value3="3" />
  </elementAttributes>
</root> 
```

现在我只需要以某种方式弄清楚如何将属性移动到`element`而不是写入`elementAttributes`结构。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T08:31:19.763

将回答我自己的问题，因为我有一个我认为我现在可以接受的解决方案，或者至少尝试一下它是否足够。因此，为了创建节点并向它们动态添加属性，我创建了一个如下所示的类：

```
Public Class DateElement
    Implements IXmlSerializable

    Public Property DateValueAttributes As Dictionary(Of String, String)
    Public Property Price As String

    Public Function GetSchema() As System.Xml.Schema.XmlSchema Implements System.Xml.Serialization.IXmlSerializable.GetSchema
        Return Nothing
    End Function

    Public Sub ReadXml(reader As System.Xml.XmlReader) Implements System.Xml.Serialization.IXmlSerializable.ReadXml
        If reader.HasAttributes Then
            DateValueAttributes = New Dictionary(Of String, String)
            While reader.MoveToNextAttribute()
                DateValueAttributes.Add(reader.Name, reader.Value)
            End While

            reader.MoveToElement()
        End If

        Dim wasEmpty As Boolean = reader.IsEmptyElement
        reader.Read()

        If wasEmpty Then
            Return
        End If

        While reader.NodeType <> System.Xml.XmlNodeType.EndElement
            reader.ReadStartElement("price")
            Price = reader.ReadString()
            reader.ReadEndElement()
        End While

        reader.ReadEndElement()

    End Sub

    Public Sub WriteXml(writer As System.Xml.XmlWriter) Implements System.Xml.Serialization.IXmlSerializable.WriteXml
        For Each kvp As KeyValuePair(Of String, String) In Me.DateValueAttributes
            writer.WriteAttributeString(kvp.Key, kvp.Value)
        Next

        If Price IsNot Nothing Then
            writer.WriteStartElement("price")
            writer.WriteString(Price)
            writer.WriteEndElement()
        End If

    End Sub
End Class 
```

我可以在我的 xml 对象中使用这个类，例如：

```
<XmlRoot(ElementName:="root")>
Public Class XmlObject
    <XmlElement("date")>
    Public Property [element] As DateElement
End Class 
```

然后在代码中创建对象，例如：

```
Dim xml As New XmlObject()
        xml.element = New DateElement()
        xml.element.DateValueAttributes = New Dictionary(Of String, String)
        xml.element.DateValueAttributes.Add("value1", "2013-01-01")
        xml.element.DateValueAttributes.Add("value2", "2013-01-02")
        xml.element.DateValueAttributes.Add("value3", "2013-01-03")
        xml.element.Price = "100.00" 
```

将给出如下所示的结果 XML：

```
<root>
  <date value1="2013-01-01" value2="2013-01-02" value3="2013-01-03">
    <price>100.00</price>
  </date>
</root> 
```

我想我现在已经足够近了，所以我可以处理这个问题。如果有人有任何想法，我将非常乐意听到他们的声音。

# antlr4 - 调试ANTLR4语法

> ID：14506143
> 
> 赞同：4
> 
> 时间：2013-01-24T16:31:15.783
> 
> 标签：antlr4

我是 ANTLR 的 n00b 并且通过尝试让 ASN.1 解析器在 ANTLR4 中运行而变得更大。我目前正处于将输入文件传递给 grun 并看到诸如“第 1:12029 行在输入时没有可行的替代方案......”之类的错误的阶段

我试图将这与我的规则的一些问题联系起来，但通过字符数定位有问题的输入是一个挑战。ANTLR 解析器将输入视为单行是正常的，还是因为规则问题（我在 OSX 系统上）而无法识别 EOL？如果将输入视为一长行是正常的，有人可以推荐一种用于在文件中定位给定字符位置的工具吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T17:34:42.443

您的代码是否仅使用`\r`行尾？ANTLR 4 仅在使用字符时增加行数并重置 char 位置`\n`。如果您需要处理普通的`\r`行尾，则需要覆盖`LexerATNSimulator.consume`以执行此检查。

检查完整的行尾集比单独检查要昂贵得多*，*因此由于行尾很少见，默认实现使用最大性能。`\n``\r``\n`

# syntax - 未知的 GW-BASIC 函数/语法：Q(var) = var

> ID：14506144
> 
> 赞同：12
> 
> 时间：2013-01-24T16:31:19.550
> 
> 标签：syntax, basic, gw-basic

我正在将一个过时的 GW-BASIC 程序翻译成 JavaScript，我遇到了一段令我难过的语法。注意（再次）：完全不是我的代码，变量名都是疯狂的，这就是我首先移植它的原因。

```
1380 Z = 1
1390 RATIO = FCO2 /(1-FCO2-10^REFFO2)
1400 AA =(1 - 2*RATIO*(100 / MIXRATIO - 1))/(1 + 2*(100 / MIXRATIO - 1))
1410 PART = LOG(1 - AA)- LOG(100 / MIXRATIO - 1)
1420 FOR I = 1 TO - 1 STEP -2
1430 H = I
1440 W = T + H 
1450 GG = 62.110326# - .02144446#*W + 4.720326E-07*(W^ 2)+(- 4.5574288#)*(10^(- 12))*(W^ 3)- 7.343018200000001#*(10^(- 15))*(W^ 4) 
1460 KK = EXP(- GG /(R*(W + 273.18)))
1470 Q(Z)= KK 
1480 Z = Z + 1
1490 NEXT I
1500 NEWFO21 = LOG(10)*.5*(LOG(Q(1))+ PART):NEWFO22 = LOG(10)*.5*(LOG(Q(2))+ PART)
1510 DELEMFDELT =(FN EMF (TREF + 1,NEWFO21) - FN EMF (TREF - 1, NEWFO22))/2
1520 RETURN 
```

问号是 line `1470: Q(Z) = KK`。`Q`在程序的前面被定义`Q$`为是/否输入变量，所以我在其中放入一个浮点数是没有意义的。之前的程序中没有`Q()`定义函数，我也找不到对`Q()`GW-BASIC 中函数的引用。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-24T16:33:18.323

Q 和 Q$ 是独立的变量。任何带有 $ 的东西都是字符串变量。Q(Z) 是一个数字数组。

1 和 2 个字符的名称很常见，因为在早期版本的 Basic 中，变量名称被限制为最多 2 个字符。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-26T01:58:13.440

正如 XPDA 所提到的，任何以 $ 为后缀的变量名都是一个字符串。几年前我写了一些 GW-BASIC，谢天谢地，我还有很多与编译器一起打包的旧文档。我已经上传了我存档的 CHM 的副本，您可能会在其中找到一些有用的信息。 [http://www.mediafire.com/?3h9z133ok8wx1l9](http://www.mediafire.com/?3h9z133ok8wx1l9)

# node.js - 参考与猫鼬中的字符串

> ID：14506146
> 
> 赞同：4
> 
> 时间：2013-01-24T16:31:29.770
> 
> 标签：node.js, mongodb, mongoose

我有两个模型

```
 var Passenger = mongoose.model('passengers', new Schema({
        username: {
            type: String,
            ref: 'users'
        },
        company: String,
        baggage: String,
        note: String,
        owner: String
    }));

    var User = mongoose.model('users', new Schema({
        username: String,
        first: String,
        last: String,
        email: String,
        password: String
    })); 
```

我真的很想获得一个完整的用户，而不是一个有用户名的乘客。我认为 ref 和 populate 将是做到这一点的方法。

```
Trip.find({
        request: true
    }).populate('flights.users').exec(function (err, trips) {

}); 
```

顶级文档是 Trip，Flights 是 Trips 下的一个数组，Passengers 是 Fl​​ight 下的一个数组。

这不可能吗。我是否必须为我的用户提供所有 ID？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-06-01T22:25:33.557

```
type: mongoose.Schema.Types.ObjectId 
```

# c++ - LLVM 上的内联 ASM 中的“无效符号重新定义”

> ID：14506151
> 
> 赞同：3
> 
> 时间：2013-01-24T16:32:09.590
> 
> 标签：c++, assembly, llvm, clang, gnu-assembler

我在 Xcode (4.5.2) 中有一个使用 Debug 配置构建良好的项目。但是，既然我已经切换到构建 Release 配置，我遇到了一个问题：我的一个内联汇编函数得到了 error `Invalid symbol redefinition`。谷歌搜索该错误消息会发现一些人遇到了该编译器错误，但没有关于其含义的信息。这是函数，带有注释的错误行：

```
inline int MulDivAdd(int nNumber,
                int nNumerator,
                int nDenominator,
                int nToAdd)
{
    int nRet;

    __asm__ __volatile__ (
        "mov    %4,     %%ecx   \n"
        "mov    %1,     %%eax   \n"
        "mull   %2              \n"
        "cmp    $0,     %%ecx   \n"
        "jl     __sub           \n"
        "addl   %%ecx,  %%eax   \n"
        "adc    $0,     %%edx   \n"
        "jmp    __div           \n"
    "__sub:                     \n"    // "Invalid symbol redefinition"
        "neg    %%ecx           \n"
        "subl   %%ecx,  %%eax   \n"
        "sbb    $0,     %%edx   \n"
    "__div:                     \n"    // "Invalid symbol redefinition"
        "divl   %3              \n"
        "mov    %%eax,  %0      \n"

        :   "=m"    (nRet)
        :   "m"     (nNumber),
            "m"     (nNumerator),
            "m"     (nDenominator),
            "m"     (nToAdd)
        :   "eax", "ecx", "edx"

    );

    return nRet;
} 
```

我尝试替换`__sub`为，`__sbt`因为我认为`__sub`这可能是一个受保护的名称，但事实并非如此。我不明白为什么这只发生在 Release 中 - 可能是由于优化吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-24T16:38:49.337

使用***本地标签***，例如`1:`and `2:`, and `jxx 1f`or `jxx 1b`。跳跃的方向（`f`向前或`b`向后）是必需的。所以你的代码应该是这样的：

```
__asm__ __volatile__ (
    "mov    %4,     %%ecx   \n"
    "mov    %1,     %%eax   \n"
    "mull   %2              \n"
    "cmp    $0,     %%ecx   \n"
    "jl     1f              \n"
    "addl   %%ecx,  %%eax   \n"
    "adc    $0,     %%edx   \n"
    "jmp    2f              \n"
"1:                         \n"   
    "neg    %%ecx           \n"
    "subl   %%ecx,  %%eax   \n"
    "sbb    $0,     %%edx   \n"
"2:                         \n"   
    "divl   %3              \n"
    "mov    %%eax,  %0      \n"
) 
```

纯粹由数字组成的符号是“函数的局部”。由于“内联”意味着代码在物理上是重复的，因此您获得多个符号定义的原因是您的符号确实以“全局”方式定义了多次。

当然，如果你有一个调试版本，它通常意味着“没有内联”，所以内联函数不是内联的，符号只声明一次，它“工作”。

[我对这个与编译器自己会做什么的效率有点怀疑——我认为至少考虑对某些输入使用寄存器会使其更有效]。

# java - 使用 javac 和 java 编译的问题

> ID：14506153
> 
> 赞同：2
> 
> 时间：2013-01-24T16:32:17.703
> 
> 标签：java, environment-variables, javac

这个问题有点尴尬，解决方法很可能在你网站的某个地方，但我一直没能找到，所以这里说：我刚刚将 Java 安装到我的 C:\ 驱动器，而机器可以找到java它找不到javac，也就是说：

```
C:\>java -version
java version "1.7.0_11"
Java(TM) SE Runtime Environment (build 1.7.0_11-b21)
Java HotSpot(TM) 64-Bit Server VM (build 23.6-b04, mixed mode)

C:\>javac -version
Error: Could not find or load main class com.sun.tools.javac.Main 
```

即使我坐在 bin 目录中，我也会得到上述响应。我难住了。

我已经尝试更新 PATH 和 JAVA_HOME 环境变量，但我有点卡住了。任何人都可以帮忙吗？注意：我很高兴去您网站上的适当位置，但我无法找到它，如果您只是指向我，我会认为自己得到了帮助，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T16:45:01.697

您需要指定环境变量，即路径。如果您使用的是 Windows 7，则右键单击我的计算机 -> 更改设置 -> 高级 -> 环境变量 -> 将路径更改为 java ( `C:\Program Files\Java\jdk1.7.0_03\bin`) 的 bin 文件夹，无需查看路径变量中的 prev 路径。只要给“;” 最后，粘贴 JDK 的 bin 文件夹的链接，然后键入“;”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T16:36:35.867

问题可能是因为你可能已经安装了 JRE，所以你可以使用 java 命令

`javac`命令用于编译java程序，因此它用于开发

对于开发，您需要安装 JDK

看看这个：

[JDK和JRE有什么区别？](https://stackoverflow.com/questions/1906445/what-is-the-difference-between-jdk-and-jre)

# python - 将东方阿拉伯数字转换为西方阿拉伯数字

> ID：14506155
> 
> 赞同：4
> 
> 时间：2013-01-24T16:32:21.913
> 
> 标签：python

实现这一目标的最佳方法是什么？

[http://en.wikipedia.org/wiki/Eastern_Arabic_numerals](http://en.wikipedia.org/wiki/Eastern_Arabic_numerals)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-24T16:59:00.780

`unicode.translate`与序数映射一起使用：

```
S.translate(table) -> unicode

Return a copy of the string S, where all characters have been mapped
through the given translation table, which must be a mapping of
Unicode ordinals to Unicode ordinals, Unicode strings or None.
Unmapped characters are left untouched. Characters mapped to None
are deleted. 
```

例子：

```
table = {1776: 48,  # 0 
         1777: 49,  # 1
         1778: 50,  # 2
         1779: 51,  # 3
         1780: 52,  # 4
         1781: 53,  # 5
         1782: 54,  # 6
         1783: 55,  # 7
         1784: 56,  # 8
         1785: 57}  # 9

u'some ۰۱۲ of ۳۴۵ it ۶۷ is ۸۹ normal text'.translate(table) 
```

*输出：*

```
u'some 012 of 345 it 67 is 89 normal text' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T16:45:45.180

像这样：

```
eastern_to_western = {"٠":"0","١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9"}
int(''.join([eastern_to_western[c] for c in '٧٧٧٣']))

7773 
```

# xcode - 如何使用 Cordova 和 ios 模拟器调试 js 代码？

> ID：14506160
> 
> 赞同：31
> 
> 时间：2013-01-24T16:32:35.017
> 
> 标签：xcode, ios-simulator

我正在使用 xcode 4.5.2 和 PhoneGap (Cordova) 开发一个 iphone 应用程序。

查看`Log Navigator`in xcode 并没有显示任何 js `console.log`。

我必须做什么才能看到这些日志输出？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-03-22T00:10:04.630

这可能有点晚，但很简单。

所以在 Safari 中，Go `preferences`-> `advanced`-> `Show Develop menu in menu bar`。完成后，在 xcode 中构建并运行，然后在 safari go `Develop`-> `iPhone Simulator`->中运行`Your App Name`。

它工作得很好，但我找不到让它持续存在的方法，所以你似乎需要在每次运行后重复这个，这很痛苦。如果我找到一种方法，我会在这里发布。

额外的：

正如 Harry 在下面的评论中指出的那样，您可以`location.reload`在 safari 控制台中运行以重新加载 Cordova 应用程序并查看应用程序启动时的所有日志消息

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-10T23:13:13.440

我找到了一些帮助来打开 ios 模拟器的控制台

[http://blog.persistent.info/2014/06/adding-keyboard-shortcuts-for.html](http://blog.persistent.info/2014/06/adding-keyboard-shortcuts-for.html)

# c# - 找不到 CreateQuery() 方法

> ID：14506161
> 
> 赞同：16
> 
> 时间：2013-01-24T16:32:39.290
> 
> 标签：c#, asp.net, entity-framework, visual-studio-2012, createquery

我是实体框架的新手。

我找不到以下方法[CreateQuery()](http://msdn.microsoft.com/en-us/library/bb339670.aspx)

* * *

![在此处输入图像描述](../Images/68a66ae51a4ecd238f5852618586e83d.png)

为什么我找不到这个方法？！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-03T12:35:19.083

由于 ESQL 被认为是一种高级用例，因此没有来自`DbContext`. 您可以访问`ObjectContext`支持您`DbContext`做您想做的事：

```
((IObjectContextAdapter)context).ObjectContext.CreateQuery<Person>("esql..") 
```

相关：[http ://thedatafarm.com/blog/data-access/accessing-objectcontext-features-from-ef-4-1-dbcontext/](http://thedatafarm.com/blog/data-access/accessing-objectcontext-features-from-ef-4-1-dbcontext/)

正如那里所建议的，您还可以`ObjectContext`向上下文类添加一个方法（或属性）：

```
public class BloggingContext : DbContext
{
    public DbSet<Blog> Blogs { get; set; }
    public DbSet<Post> Posts { get; set; }

    public ObjectContext ObjectContext()
    {
        return (this as IObjectContextAdapter).ObjectContext;
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-02T14:27:40.457

首先，这不是 EF 中查询的原生解决方案。请尽可能多地学习 LINQ，然后，如果您知道您确实需要替代方法，请回退到 CreateQuery()

但是，您可以通过以下方式获得所需的结果`System.Data.Entity.Core.Objects.IObjectContextAdapter`：

`(context as IObjectContextAdapter).ObjectContext.CreateQuery`

此外，您可以使用以下命令运行 sql 命令：

`context.Database.SqlQuery<>()`和`context.Database.ExecuteSqlCommand()`

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-19T21:27:31.737

我正在使用 ef core，我想从 sqlserver 获取服务器时间，但在我的情况下，这些方法都不起作用。IObjectContextAdapter 无法识别，它要求我下载 ef 6。

我发现下面的语句来获取服务器时间：

```
private DateTime GetServerTime()
{
    using (var db = new DbContext())
    {
        DbConnection connection = db.Database.GetDbConnection();
        connection.Open();
        DbCommand cmd = connection.CreateCommand();
        cmd.CommandText = "SELECT GETDATE()";
        return (DateTime)cmd.ExecuteScalar();
    }
} 
```

您可以使用此方法创建任何 sql 语句并从 db 获取数据。希望它可以帮助某人。

# string - 如何从 BeanIO 中的文本文件中将字符串变量设置为零？

> ID：14506163
> 
> 赞同：1
> 
> 时间：2013-01-24T16:32:45.143
> 
> 标签：string, member, zero, required, bean-io

我的文本文件的状态为 00。我想使用 BeanIO 将 00 传递给 Person 对象的 setState 方法。但是得到像无效状态这样的异常：未设置必填字段。它接受空格但不接受零。

我的映射文件是：

```
<beanio>
    <stream name="acesFile" format="fixedlength" strict="true">
        <record name="personObj" class="com.hbe.conversion.businessObjects.Person"  occurs="0+">
            <field name="state" position="0" length="2" required="true" padding="0"      />
        </record>
    </stream>
</beanio> 
```

Person 类中的方法：

```
public void setState(String state) {
    this.state = state;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T03:14:20.270

尝试在字段定义上设置 keepPadding="true"。

# c++ - c++ pthread限制线程数

> ID：14506165
> 
> 赞同：1
> 
> 时间：2013-01-24T16:32:47.593
> 
> 标签：c++, numbers, pthreads, limits

我尝试使用 pthread 更快地完成一些任务。我有数千个文件（在 args 中）要处理，我想多次创建少量线程。
这是我的代码：

```
void callThread(){
    int nbt = 0;
    pthread_t *vp = (pthread_t*)malloc(sizeof(pthread_t)*NBTHREAD);
    for(int i=0;i<args.size();i+=NBTHREAD){
        for(int j=0;j<NBTHREAD;j++){
              if(i+j<args.size()){
                   pthread_create(&vp[j],NULL,calcul,&args[i+j]);   
                   nbt++;
              }
        }
        for(int k=0;k<nbt;k++){
              if(pthread_join(vp[k], NULL)){
                   cout<<"ERROR pthread_join()"<<endl;
              } 
        }
   }
} 
```

它返回错误，我不知道这是否是解决我的问题的好方法。所有资源都在 args（结构向量）中并且是独立的。
感谢帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T16:46:05.770

您最好创建一个线程池，其线程数与 CPU 的内核数一样多。然后将任务提供给这个池并让它完成它的工作。您应该在[这里查看这篇博客文章](http://progsch.net/wordpress/?p=81)，了解如何创建此类线程池的一个很好的示例。

那篇文章中没有提到的几个技巧：

*   用于`std::thread::hardware_concurrency()`获取核心数。
*   找出一种方法来存储任务、提示：`std::packaged_task`或类似包裹在类中的内容，这样您就可以跟踪诸如任务何时完成或实现之类的事情`task.join()`。
*   [此外，可以在 github 上找到他的实现代码以及一些额外的东西](https://github.com/progschj/ThreadPool)，例如`std::future`支持。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T17:08:38.693

您可以使用信号量来限制并行线程的数量，这是一个伪代码：

```
Semaphore S = MAX_THREADS_AT_A_TIME  //  Initial semaphore value
declare handle_array[NUM_ITERS];

for(i=0 to NUM_ITERS)
{
wait-while(S<=0);
Acquire-Semaphore;  //  S--

handle_array[i] = Run-Thread(MyThread);

}

for(i=0 to NUM_ITERS)
{
Join_thread(handle_array[i])
Close_handle(handle_array[i])
}

MyThread()
{
mutex.lock

critical-section

mutex.unlock

release-semaphore // S++
} 
```

# rest - Oracle Service Bus 中的 RESTful 帖子

> ID：14506168
> 
> 赞同：1
> 
> 时间：2013-01-24T16:32:59.700
> 
> 标签：rest, oracle11g, restful-url, osb, oracle-service-bus

有谁知道如何创建一个代理服务来处理这种事情？

我正在寻找的是一个路径参数和一个格式类似于此的帖子正文：

发布 www.myurl.com/{123}

帖子正文：myId=1&myOtherId=2

我目前正在传递一个 XML 文档，并且正在对传输中的 http:relative-URI 元素进行插入。这似乎有效。

我目前还在为我的帖子正文名称/值对在 http:query-parameters 上进行插入。

我将这些插入到出站变量上。当我调试时，两者都出现了，我正在联系 REST 服务。我收到 400 -- 错误请求错误。当帖子正文配置不正确时，会发生这种情况。

任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T15:02:34.893

如果您只是发布 XML，则在创建代理服务时，选择服务类型作为任何 XML。

# javascript - 字体调整大小和缓存

> ID：14506171
> 
> 赞同：0
> 
> 时间：2013-01-24T16:33:01.413
> 
> 标签：javascript, html

我使用[jfontsize'](http://www.jfontsize.com)来增加/减小我网站上字体的大小。有谁知道如何记住页面之间的设置以及用户何时返回网站？我一直在尝试创建一个 cookie，但我运气不佳！

这是我目前拥有的：

```
<script type="text/javascript" language="javascript">
    function createCookie("textsizestyle", textsize, 365) {
        if (days) {
            var date = new Date();
            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
            var expires = "; expires=" + date.toGMTString();
        }
        else var expires = "";
        document.cookie = name + "=" + value + expires;
    }

    function readCookie(name) {
        var nameEQ = name + "=";
        var ca = document.cookie.split(';');

        for (var i = 0; i < ca.length; i++) {
            var c = ca[i];
            while (c.charAt(0) == ' ') 
                c = c.substring(1, c.length);

            if (c.indexOf(nameEQ) == 0) 
                return c.substring(nameEQ.length, c.length);
        }

        return null;
    }
</script> 
```

有人介意给我一些指示吗？

谢谢！

# c# - WPF DataGrid 左上角选择所有标题按钮不聚焦网格

> ID：14506174
> 
> 赞同：3
> 
> 时间：2013-01-24T16:33:07.507
> 
> 标签：c#, .net, wpf, datagrid

我的控件使用 WPF DataGrid。如果单击左上角的空标题，它将选择所有行。这是 DataGrid 的标准部分，不是我添加的任何内容。

但是，我的用户遇到了麻烦，因为这个“按钮”没有聚焦 DataGrid。我怎样才能解决这个问题？

[System.Windows.Controls.DataGrid](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid(v=vs.95).aspx)

编辑：这是我正在谈论的 DataGrid 按钮的 Excel 模拟。这不是一个真正的按钮，而是某种标题：

![在此处输入图像描述](../Images/82d97f1733292b409a607b933ce12941.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T21:14:17.850

如果您查看[Snoop](http://snoopwpf.codeplex.com/)，您会注意到此按钮。

![在此处输入图像描述](../Images/cc222ce8d0c1225a5478454de2637e9c.png)

因此，您可以将事件处理程序写入`Click`此按钮的事件，并且在此处理程序中您可以聚焦网格。

```
private void myGrid_Loaded(object sender, RoutedEventArgs e)
{
    DataGrid dg = sender as DataGrid;
    Border border = VisualTreeHelper.GetChild(dg, 0) as Border;
    ScrollViewer scrollViewer = VisualTreeHelper.GetChild(border, 0) as ScrollViewer;
    Grid grid = VisualTreeHelper.GetChild(scrollViewer, 0) as Grid;
    Button button = VisualTreeHelper.GetChild(grid, 0) as Button;

    if (button != null && button.Command != null && button.Command == DataGrid.SelectAllCommand)
    {
        button.Click += new RoutedEventHandler(button_Click);
    }         
}

void button_Click(object sender, RoutedEventArgs e)
{     
    myGrid.Focus();           
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-07T13:39:12.087

我使用了一种不依赖于控件的可视化树的替代方法：

在 XAML 中：

```
<DataGrid.CommandBindings>
<CommandBinding Command="SelectAll" Executed="MyGrid_SelectAll"/></DataGrid.CommandBindings> 
```

在代码中：

```
private void MyGrid_SelectAll(object sender, ExecutedRoutedEventArgs e)
    {
        var myGrid = (DataGrid)sender;
        myGrid.Focus();
        if (myGrid.SelectedCells.Count == myGrid.Columns.Count * myGrid.Items.Count)
        {
            myGrid.SelectedCells.Clear();
        }
        else
        {
            myGrid.SelectAll();
        }

        e.Handled = true;
    } 
```

如果选择了所有单元格，这也使我能够实现取消全选。

# javascript - 从 iFrame 内触发返回顶部函数

> ID：14506176
> 
> 赞同：0
> 
> 时间：2013-01-24T16:33:08.903
> 
> 标签：javascript, jquery, html

我一直在寻找解决方案，但无法弄清楚。尝试了很多我见过的方法，但没有一个有效。

这是我想做的：

我有一个带有导航菜单的主页，所有内容都加载到 iFrame 上。我不知道何时向下滚动 iFrame 内容以启用或禁用返回顶部按钮，并在单击按钮时将 iFrame 内容发送回顶部。

```
<script type="text/javascript">
    $(function() {
    $(window).scroll(function() {
        if($(this).scrollTop() != 0) {
            $('#toTop').fadeIn();   
        } else {
            $('#toTop').fadeOut();
        }
    });

    $('#toTop').click(function() {
        $('body,html').animate({scrollTop:0},800);
    }); 
    });
</script> 
```

我找到了这段代码，但它可以在您所在的当前页面上运行。我对 document.parent、parent、trigger() 进行了很多尝试，但没有任何效果。我可以将此代码粘贴到将在 iFrame 上加载的所有页面上，但我想要将返回顶部按钮放在内容顶部的静态按钮菜单上，以便从任何部分都可以看到它你的文字。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T16:44:17.190

```
$(window).scroll(function() {
  if($(window).scrollTop() + $(window).height() == $(document).height()) {
   button = document.getElementById('topButton'); 
   button.style.display = "block";
 }
});

function toTop(){
document.getElementById('iframeContainer').scrollTop = 0;
} 
```

并隐藏按钮。一旦到达底部，它应该将样式更改为阻止并使其可见。使用新可见的按钮调用 toTop() 函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T16:40:33.110

您是否尝试过将此脚本插入 iframe 头部？顺便说一句，它的 parent.document 不是 document.parent。

# php - 如何使用 PHPECC 生成密钥对和加密

> ID：14506178
> 
> 赞同：2
> 
> 时间：2013-01-24T16:33:17.963
> 
> 标签：php, encryption, cryptography, elliptic-curve

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T17:07:13.707

您发布的代码示例适用于[Diffie-Hellman](http://en.wikipedia.org/wiki/Diffie_Hellman)，这是一种用于派生对称加密密钥的密钥协商协议。这不会让您生成公钥/私钥。

您发布的软件包还提供[ECDSA](http://en.wikipedia.org/wiki/ECDSA)，这是一种签名算法。它不能真正用于加密。

对于非对称加密，您非常想使用 RSA。如果你想使用椭圆曲线密码学的东西，你可以尝试找到 ElGamal-EC 算法的实现，但我真的不知道 PHP 的实现。

# python - 处理 IPython 集群中的各种资源需求

> ID：14506182
> 
> 赞同：2
> 
> 时间：2013-01-24T16:33:28.480
> 
> 标签：python, parallel-processing, cluster-computing, ipython

我正在使用基于 PBS 的集群并在一组节点上并行运行 IPython，每个节点有 24 或 32 个内核，内存范围从 24G 到 72G；这种异质性是由于我们的集群有它的历史。此外，我有一些作业要发送到 IPython 集群，这些作业具有不同的资源要求（内核和内存）。我正在寻找一种将作业提交到 ipython 集群的方法，该集群了解它们的资源需求和可用引擎的资源需求。我想有一种方法可以使用 IPython 功能优雅地处理这种情况，但我还没有找到。关于如何进行的任何建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-27T00:00:24.760

除了您指出您已经获得的图形依赖关系之外，IPython 任务还可以具有功能依赖关系。这些可以是任意函数，例如任务本身。功能依赖在实际任务之前运行，如果它返回 False 或引发特殊`parallel.UnmetDependency`异常，则该任务将不会在该引擎上运行，并将在其他地方重试。

所以要使用它，你需要一个函数来检查你需要的任何指标。例如，假设我们只想在您的节点上以最少的内存运行一个任务。这是一个检查系统总内存（以字节为单位）的函数：

```
def minimum_mem(limit):
    import sys
    if sys.platform == 'darwin': # or BSD in general?
        from subprocess import check_output
        mem = int(check_output(['sysctl', '-n', 'hw.memsize']))
    else: # linux
        with open("/proc/meminfo") as f:
            for line in f:
                if line.startswith("MemTotal"):
                    mem = 1024 * int(line.split()[1])
                    break
    return mem >= limit

kB = 1024.
MB = 1024 * kB
GB = 1024 * MB 
```

所以`minimum_mem(4 * GB)`如果您的系统上至少有 4GB 内存，则返回 True。如果您想检查*可用*内存而不是总内存，您可以使用 /proc/meminfo 中的 MemFree 和 Inactive 值来确定尚未使用的内存。

`@parallel.depend`现在，您可以通过应用装饰器仅将任务提交给具有足够 RAM 的引擎：

```
@parallel.depend(minimum_mem, 8 * GB)
def big_mem_task(n):
    import os, socket
    return "big", socket.gethostname(), os.getpid(), n

amr = view.map(big_mem_task, range(10)) 
```

同样，您可以根据 CPU 数量应用限制（`multiprocessing.cpu_count`这是一个有用的功能）。

这是[一个笔记本](http://nbviewer.ipython.org/4645385)，它使用这些来限制一些愚蠢任务的分配。

通常，该模型是为每个*核心*（而不是每个节点）运行一个 IPython 引擎，但如果您有特定的多核任务，那么您可能希望使用较小的数量（例如 N/2 或 N/4）。如果您的任务非常大，那么您实际上可能希望将其限制为每个节点一个引擎。如果您在每个节点上运行更多引擎，那么在同时运行高资源任务时需要小心。正如我所写的那样，这些检查不考虑同一节点上的其他任务，因此如果一个节点为 16 GB RAM，并且您有两个任务，每个任务需要 10 个，您将需要更加小心如何跟踪可用资源。

# c# - 输出类型为类库的项目无法直接启动

> ID：14506185
> 
> 赞同：20
> 
> 时间：2013-01-24T16:33:34.017
> 
> 标签：c#

请有人可以解释为什么我会收到此错误以及如何解决它（或我做错了什么！）。我采取的步骤是

1.  [从http://www.codeproject.com/Articles/16859/AForge-NET-open-source-framework](http://www.codeproject.com/Articles/16859/AForge-NET-open-source-framework)下载源代码
2.  在VS2010中打开显示找不到引用 ![在此处输入图像描述](../Images/7fa2f71b0db9dbaae1608cac7fe23ae3.png)

3.  重新添加所有 3 个引用，`PlayingCardRecognition\bin\Release`因此没有进一步的警告 ![在此处输入图像描述](../Images/126ed8273cb2d8563bac2125de3357e8.png)

4.  当我尝试构建或运行时，我收到以下消息 ![在此处输入图像描述](../Images/71a427ea05549e4d8ad71f25ce2df780.png)

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2013-11-02T12:51:54.240

要解决此问题，请执行以下步骤：

1.  在 Visual Studio 的解决方案资源管理器中右键单击项目名称
2.  `Set as StartUp Project`从菜单中选择
3.  重新运行您的项目它应该可以工作！

如果它不起作用，请确保您已设置起始页。如果您的项目是 C# Windows 应用程序或 C# 控制台应用程序，请尝试以下操作：

1.  在 Visual Studio 的解决方案资源管理器中右键单击项目名称
2.  选择`Properties`
3.  选择应用程序选项卡
4.  在`Output Type`投递箱
5.  为您的项目选择正确的应用类型
6.  重新运行您的项目，如果它不起作用，请告诉我。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-24T16:34:57.383

在该解决方案中设置为启动项目的项目类型是 ClassLibrary 类型。因此，输出是 dll 而不是可执行文件，因此您无法启动它。

如果这是一个错误，那么您可以这样做：

如果这是解决方案中唯一的 csproj，则对此的快速而肮脏的修复是在文本编辑器中打开 .csproj 文件并将节点的值更改为`<ProjectGuid>`与 WinForms C# 项目对应的 Guid。（您可以通过 google 搜索或通过创建新项目并打开 Visual Studio 生成的 .csproj 文件来了解该类型的 GUID 是什么）。（*享受 - 没有多少人知道这个鬼鬼祟祟的把戏*）

但是：该项目可能是一个正确的类库，然后您应该在另一个项目中引用它并以这种方式使用它。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-01-24T16:47:52.947

`.Exe`'s 和`.dll`'s 都是程序集。主要区别在于可执行文件定义了一个`Main`可由运行时调用的入口点。错误

“无法直接启动类库”

是因为说`.dll`的没有`Main`。要解决此问题，请将项目类型更改为 Windows 应用程序/控制台应用程序并定义一个入口点。或者，添加一个类型为 Windows 应用程序/控制台应用程序的新项目并引用`.dll`.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-24T16:45:30.070

该项目是一个类库。没有可执行项目就无法运行或调试（F5 不起作用！！！）。您只能构建项目 (Ctrl+Shift+B)。

如果要调试代码，请将控制台应用程序项目（将其设置为启动项目）添加到解决方案并添加对库的引用。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-24T16:35:51.360

您下载的项目是一个类库。哪个无法启动。

添加一个可以启动的新项目（控制台应用程序、win 表单、任何您想要的）并添加对类库项目的引用以便能够“使用它”。

并将这个新项目设置为“启动项目”

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-24T16:35:20.640

您下载的项目是类库，而不是可执行程序集。这意味着您需要将该库导入到您自己的项目中，而不是尝试直接运行它。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-24T16:35:47.720

您的项目类型是一个可能会怀疑的类库，添加一个`ConsoleApplication`or`WindowsApplication`并将其用作您的启动对象。引用此项目，然后访问代码。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-02-04T11:34:00.573

如果您将 WPF 应用程序转换为类库以获取项目 .dll 文件。之后将同一项目转换为 WPF 应用程序，您会收到以下错误。

错误：“.exe 不包含适合入口点的静态 main 方法”。

故障排除步骤： 1.将 App.xaml 文件包含在相应的项目中。2.右键单击 App.xaml 文件将构建操作更改为应用程序定义 3.现在构建您的项目

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-09-11T07:30:00.243

转到解决方案属性-> 在构建右侧，您会看到启动项目类型。在这里您需要选择控制台应用程序/Windows 应用程序。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-02-02T06:56:48.300

如果您遇到此问题（在 Visual Studio 2017 RC 中遇到），并且从第 3 步开始的“4 在输出类型下拉框...”中没有得到 Mak 帖子列出的任何内容，那是因为当您想创建一个跨平台应用程序时，您创建了一个类库应用程序，所以这里是解决方案：

1 开始一个新项目

2 选择 V​​isual C# 和跨平台应用程序。

3 选择跨平台应用（Xamarin 和原生应用）

4 选择空白表格。

从那时起，右键单击，选择作为启动项目并按照 Mak 的说明进行构建，它应该可以工作。

如果你有能力从头开始，它可以像我一样做到这一点。

这也可以解决主要问题，但必须适应您当前版本的 Visual Studio（例如 Visual Studio 2015 的“Xamarin.forms 便携版”）。

再见！

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-05-20T14:12:08.013

将您的 api 项目设置为启动项目：右键单击 api 项目，然后选择设置为启动项目。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-12-27T20:48:04.817

VS -> 调试 -> 附加统一调试器 -> 双击项目

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2015-03-24T12:25:52.020

只需右键单击项目解决方案就会弹出一个窗口。展开公共属性。选择启动项目

在右侧选择带有单一启动项目的单选按钮在那里选择您的项目并应用。

就是这样。现在保存并构建您的项目。运行项目以查看输出。

_萨拉@F1

* * *

## 回答 #14

> 赞同：-3
> 
> 时间：2016-12-22T13:50:47.940

要解决此问题，请执行以下步骤：

在 Visual Studio 的解决方案资源管理器中右键单击项目名称 从菜单中选择 Set as StartUp Project 重新运行您的项目 它应该可以工作！

# c# - Web.config 设置

> ID：14506187
> 
> 赞同：1
> 
> 时间：2013-01-24T16:33:41.223
> 
> 标签：c#, asp.net, visual-studio-2008, web-config

我有一个 Web 应用程序，它的默认设置`web.config`包含所有需要的设置，所以现在我需要创建一个文件夹，在该文件夹中，我正在使用与父应用程序相同的成员资格表来实现登录页面。我试图允许某些角色访问该文件夹，我尝试在该文件夹中添加一个带有以下标记的 web.config：

```
<?xml version="1.0"?>
<configuration>
    <system.web>
        <authorization>
            <allow roles="customers"/>
            <deny users="?" />
        </authorization>
    </system.web>
</configuration> 
```

我遇到的问题是，当我添加它并尝试登录时，它会将我发送到带有 a 的父登录页面，`ReturnUrl`这是因为父在 web 配置中有这一行：

```
<authentication mode="Forms">
    <forms loginUrl="~/login.aspx"  timeout="20160" />
</authentication> 
```

所以我决定将它添加到文件夹中的 web.config 中，但使用正确的 url：

```
<?xml version="1.0"?>
<configuration>
    <system.web>
        <authentication mode="Forms">
            <forms loginUrl="~/pages/customerlogin.aspx"  timeout="20160" />
        </authentication>
        <authorization>
            <allow roles="customers"/>
            <deny users="?" />
        </authorization>
    </system.web>
</configuration> 
```

但现在它告诉我这个错误：

**异常详细信息：System.Web.HttpException：无法加载类型“Intelligencia.UrlRewriter.RewriterHttpModule”。**

我想我的问题是，我应该向那个孩子添加什么才能`web.config`让它工作？它不是从父母那里继承它需要的所有其他东西吗？这是我第一次在子文件夹中处理此类 web.config 设置问题。

**注意（更新）：该文件夹已转换为应用程序**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T18:38:19.210

当你说：

```
<deny users="?"/> 
```

您是说您不允许未识别的用户在登录前执行页面。

只有在登录后，您才能评估用户角色。因此，您应该只有一个登录页面，并根据用户的角色将他们重定向到不同的子站点。

如果该文件夹现在是一个应用程序，它需要整个配置文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T18:50:54.357

如果您不想从父 web.config 继承，那么在您的子 web.config 中，您可以将以下行添加为您不想继承的配置部分的第一个子元素。

# 示例子配置

```
<system.web>
      <clear />
      <!-- add child config settings here -- >
 </system.web> 
```

# c# - MVC - 使用 AJAX 调用导致服务器端页面验证在按钮单击时触发

> ID：14506190
> 
> 赞同：3
> 
> 时间：2013-01-24T16:33:53.463
> 
> 标签：c#, javascript, ajax, asp.net-mvc-3

在我正在开发的应用程序上，我有一个要求，即在单击某个按钮后，验证会在某些相关文本框上触发；如果它们没有通过，则不会发生任何事情，否则会发生从 AJAX 调用触发的操作。这个 AJAX 调用返回一些关于操作成功的消息。

我的部分观点看起来有点像这样：

```
<div>
  <div id='cell-phone'>
    @Model.ValidationMessageFor(x=>x.Model.CellNumber)
    @Model.TextBoxFor(x=>x.Model.CellNumber)
  </div>
  <div id='pager'>
    <!-- Ditto, only x.Model.Pager; yes, some people use pagers still. -->
  </div>
  <div id='page-address'>
    <!-- ... x.Model.PageAddress ... -->
  </div>
  <div id='pager-test'>
    <a href='#' id='test-pager' class='button'>Test</a>
    <span id='test-result'></span>
  </div>
</div>

<script>
var $cellNum = $('#cell-phone input'),
    $pagerNum = $('#pager input'),
    $pageAddress = $('#page-address input'),
    $testPager = $('#pager-test'),
    $testResult = $('#test-result');

$(document).ready(function () {
  $testPager.click(function () {
    pagerTest();
  });
});

function pagerTest() {
  var args = { address: $pageAddress.val() };
  $.getJSON('@Url.Action("SendTestPage")', args, function(result) {
    $testResult.html(result.Message);
  });
}
</script> 
```

...在服务器级别下降...

```
public JsonResult SendTestPage(string address)
{
   // SNIP: Other unnecessary details.
   var result = new EmailSendResult
                {
                  success = SendEmailMethod(address)
                };
   result.message = result.success
                    ? "Message sent!"
                    : "Couldn't send message...";

   return result;       
}

....

public class EmailSendResult
{
  public bool success;
  public string message;
} 
```

问题：虽然我能够取回消息/成功值，但我还需要触发 View Model 的验证。我看不到如何使用 AJAX 调用来做到这一点。我的怀疑是 A) 我在工作中使用了错误的工具，或者 B) 我在一项工作中使用了正确的工具，但我需要别的东西。我缺少什么能够导致验证触发？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T21:17:15.633

当您单击“test-pager”链接时，将调用该操作，但不会触发表单验证，因为您的链接不是提交。如果您想验证工作，您必须在表单上有一个提交按钮。当用户单击它时，验证将触发。因此，将 test-pager 更改为如下所示：

```
<input type="submit" id="test-pager" class="button" /> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-24T21:33:44.057

或者（如果我正确理解问题）您可以绑定地址文本框更改事件并在其中调用 testPage 函数。

# php - Laravel - 未处理的异常错误

> ID：14506196
> 
> 赞同：0
> 
> 时间：2013-01-24T16:34:05.263
> 
> 标签：php, laravel

我有两个表 - 成员和主题。这两个表通过一对多的关系相互关联，如下所示：

```
class Topic extends Eloquent 
{
     public function member()
     {
           return $this->belongs_to('Member');
     }
 }

class Member extends Eloquent 
{
     public function topics() 
     {
         return $this->has_many('Topic');
     }
} 
```

`Unhandled Exception error - Trying to get property of non-object`当我尝试这样的事情时，我得到了一个：

```
$members = Topic::find(1)->member->get()->email; 
```

我哪里错了？DB中的数据一致性似乎没有问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T18:24:15.097

你有外键字段的标准命名吗？成员表中的字段名称应为 topic_id。如果不是，您需要将 member() 定义为

```
return $this->belongs_to("Member","fkfieldname"); 
```

（另外，如果你使用 Laravel4，你会想要使用 belongsTo() 而不是 belongs_to()。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-28T21:21:48.580

您的主题模型中的函数成员返回一个数组。

访问外交关系的正确方法是

$members = Topic::find(1)->member[0]->email

# gem - 为 gem install/server 完全替换 rdoc

> ID：14506198
> 
> 赞同：2
> 
> 时间：2013-01-24T16:34:09.260
> 
> 标签：gem, rdoc, yard

即使在安装 gem 时，有没有办法完全替换 rdoc？

就像现在一样，`gem server`只能访问 rdoc 生成的文档。在某些情况下，例如 FFI-gem，文档是用 yard 编写的，试图通过 rdoc 生成的文档来阅读是一件`gem server`很痛苦的事情。

那么有没有可能用 yard 替换 rdoc

# java - 如何在 Eclipse 中将 Maven 项目转换为使用 Ant 构建的动态 Web 项目？

> ID：14506199
> 
> 赞同：1
> 
> 时间：2013-01-24T16:34:14.050
> 
> 标签：java, eclipse, maven

我有一个在 Eclipse 中使用 Maven 的 java 项目，并希望完全删除项目的 Maven 方面，并将其设置为完全独立的动态 Web 项目，它根本不依赖 Maven，但使用取而代之的是蚂蚁。

我认为这将涉及：

*   找出所需的库
*   创建一个蚂蚁“build.xml”文件
*   我不确定的更多步骤;-)

最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T16:38:56.643

您可以将其切换为使用 ant。Maven 带有 ant 插件。运行 mvn ant:ant 它将为您生成 build.xml。这会让你依赖蚂蚁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T17:09:00.950

可能最简单的做法是在 Eclipse中安装[m2e](http://www.eclipse.org/m2e/download/)和[m2e-wtp 。](http://www.eclipse.org/m2e-wtp/download/)

然后确保将您的 Maven 项目打包为 .war。请参阅此处以在 Maven 中构建 Web 应用程序：

[http://www.mkyong.com/maven/how-to-create-a-web-application-project-with-maven/](http://www.mkyong.com/maven/how-to-create-a-web-application-project-with-maven/)

Eclipse 将其视为具有所有配置和部署功能的动态 Web 应用程序。

# javascript - 在jQuery中重用下拉功能

> ID：14506205
> 
> 赞同：0
> 
> 时间：2013-01-24T16:34:37.340
> 
> 标签：javascript, jquery, function

`select`我有一个无序列表，它需要与标签相同的功能。这很好用，但我想在每个页面上多次重复使用下拉列表，这里事情开始变得混乱，因为选择器适用于所有列表，因此重复每个行为和`.clone()`. 我想我需要使用该`.closest()`方法来防止重复，但是在哪里以及如何应用呢？

谢谢

[工作演示](http://jsfiddle.net/6mukW/)

[重复问题演示](http://jsfiddle.net/6mukW/2/)

jQuery代码：

```
$(".cloned").text($(".selected").text());
$(".options").hide();

$(".cloned").click(function(){
    $(".options").toggle();
    e.preventDefault();                 
});

$('.select .options li').click(function(){

    $(this).next.siblings().removeClass('selected');
    $(this).next.addClass('selected');
    $(".cloned").text($(".selected").text());   
    $(".options").hide();   
}); 
```

html代码：

```
<div class="select">
    <span class="cloned"></span>

    <ul class="options">
        <li class="selected">Kensington</li>
        <li>Lingfield</li>
        <li>Wolverhampton</li>
        <li>Cheltenham</li>
    </ul>
</div>

<div class="select">
    <span class="cloned"></span>

    <ul class="options">
        <li class="selected">Kensington</li>
        <li>Lingfield</li>
        <li>Wolverhampton</li>
        <li>Cheltenham</li>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T16:51:48.880

```
$(".cloned").click(function () {
  $(this).next(".options").toggle();
}); 
```

[http://jsfiddle.net/6mukW/10](http://jsfiddle.net/6mukW/10)

您对 jQuery 的其他部分（选择/取消选择）也有一些问题，但我不确定您要做什么。

# sql - SQL：将一列中的数据移动到不同的列

> ID：14506206
> 
> 赞同：0
> 
> 时间：2013-01-24T16:34:37.530
> 
> 标签：sql, case

SQL Noob here...我有一个产生此输出的 SQL 查询。问题是一列包含不同类型的数据。我需要将它们分成不同的列。

```
NODENAME MIB                STATUS
Node1    CPUTemperature     +27.20 C
Node2    CPUTemperature     +27.00 C
Node3    CPUTemperature     +26.50 C
node4    CPUTemperature     +27.00 C
node5    CPUTemperature     +27.80 C
node1    NiosVersion        6.5.2
node2    NiosVersion        6.5.2
node3    NiosVersion        6.5.2
node4    NiosVersion        6.5.2
node5    NiosVersion        6.5.2
node6    NiosVersion        6.5.2
node1    HardwareType       IB-1050-A
node2    HardwareType       IB-550-A
node3    HardwareType       IB-550-A
node4    HardwareType       IB-550-A
node5    HardwareType       IB-1050-A
node6    HardwareType       IB-1410 
```

我想将表格修改为：

```
Node Name   Temp    NiosVersion HardwareType
Node1       +27.20  6.5.2       IB-1050-A
Node2       +27     6.5.2       IB-550-A
Node3       +26.50  6.5.2       IN-550-A
.
.
. 
```

更改为这种格式的最佳方法是什么？我会从初始查询中创建一个视图并创建一个新的 SELECT FROM WHERE 语句吗？

我不确定如何获取“HardwareType”之类的字段并将其设为名为 Hardware Type 的列，并将相应的 STATUS 值放置到不同的列中。似乎需要某种条件，例如 CASE。

有什么想法可以为我指明正确的方向吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T16:39:11.137

您可以`CASE`在此处使用并执行聚合（如`MIN`or `MAX`）：

```
SELECT  NODENAME,
        MIN(CASE WHEN MIB = 'CPUTemperature' THEN Status END) AS Temp,
        MIN(CASE WHEN MIB = 'NiosVersion' THEN Status END) AS NiosVersion,
        MIN(CASE WHEN MIB = 'HardwareType' THEN Status END) AS HardwareType
FROM (...Your Query Here...) Data
GROUP BY NODENAME 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T16:42:51.627

这是我要做的：

```
SELECT a.nodename, 
       b.status AS 'Temp', 
       c.status AS 'NiosVersion', 
       d.status AS 'HardwareType' 
FROM   (SELECT DISTINCT nodename 
        FROM   nodes) a 
       LEFT JOIN (SELECT nodename, 
                         status 
                  FROM   nodes 
                  WHERE  mib = 'CPUTemperature') b 
              ON b.nodename = a.nodename 
       LEFT JOIN (SELECT nodename, 
                         status 
                  FROM   nodes 
                  WHERE  mib = 'NiosVersion') c 
              ON c.nodename = a.nodename 
       LEFT JOIN (SELECT nodename, 
                         status 
                  FROM   nodes 
                  WHERE  mib = 'HardwareType') d 
              ON d.nodename = a.nodename 
```

**结果**

```
| 节点名 | 温度 | 新版本 | 硬件类型 |
-------------------------------------------------- --
| 节点1 | +27.20 摄氏度 | 6.5.2 | IB-1050-A |
| 节点2 | +27.00 摄氏度 | 6.5.2 | IB-550-A |
| 节点3 | +26.50 摄氏度 | 6.5.2 | IB-550-A |
| 节点4 | +27.00 摄氏度 | 6.5.2 | IB-550-A |
| 节点5 | +27.80 摄氏度 | 6.5.2 | IB-1050-A |
| 节点6 | (空) | 6.5.2 | IB-1410 |
```

## [查看演示](http://sqlfiddle.com/#!2/006d0/4)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T16:51:25.403

根据您使用的 RDBMS，这将通过一个`PIVOT`函数来完成。SQL Server 2005+ 和 Oracle 11g+ 都有这个功能。

查询将是：

```
select *
from
(
  select nodename, MIB, status
  from yourtable
) src
pivot
(
  max(status)
  for mib in (CPUTemperature, NiosVersion, HardwareType)
) piv 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/d9648/1)

# ember.js - Ember {{#each}} 助手不渲染

> ID：14506220
> 
> 赞同：0
> 
> 时间：2013-01-24T16:35:05.183
> 
> 标签：ember.js, each, helper

我对 Web 开发相当陌生，我正在尝试浏览 ember doc 示例。在我尝试使用 {{#each}} 助手之前，一切正常。我看不出我做错了什么，我使用的是正确版本的车把吗？

这是我的html里面：

```
<div>First element</div>
<div id="second-placeholder"></div>
<div>Third element</div>

<script type="text/x-handlebars" data-template-name="second-item-template">
    {{#each App.egosController}}
        <h3>{{name}}</h3>
        <p>{{id}} - {{type}}</p>
    {{/each}}
</script> 
```

这是我的控制器：

```
App.egosController = Ember.ArrayController.create({
    content: [],
    init: function(){
        alert('Controller Initialised!');
    }
});

App.egosController.set('content', [ego, alterEgo]);

Ember.View.create({
    templateName: 'second-item-template'
}).appendTo('#second-placeholder'); 
```

jsfiddle在这里：http: [//jsfiddle.net/VqgMk/64/](http://jsfiddle.net/VqgMk/64/)

谢谢，

任

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T17:08:05.677

变量`ego`未定义。只需替换`ego`它就`myEgo`可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T17:09:07.627

正如 louiscoquio 指出的那样，我的 ego 变量没有初始化。我想我下次会使用控制台。

# django - 如何更改 django-registration 中的默认管理员设置？

> ID：14506222
> 
> 赞同：0
> 
> 时间：2013-01-24T16:35:06.223
> 
> 标签：django

如何更改 django-registration [https://github.com/nathanborror/django-registration/blob/master/registration/admin.py](https://github.com/nathanborror/django-registration/blob/master/registration/admin.py)中的默认管理员设置？我需要添加到`list_display`first_name、last_name 和 email

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T20:19:57.393

您可以创建自己的从 ModelAdmin 派生的管理类（如果您只需要修改几件事，甚至可以创建 RegistrationAdmin），然后调用 admin.site.unregister ，然后使用您自己的类重新注册它。

# clojure - 有什么方法可以引用先前定义的结构映射条目（内联）？

> ID：14506223
> 
> 赞同：2
> 
> 时间：2013-01-24T16:35:15.950
> 
> 标签：clojure

标题不是很好，但很难找到一个好的单行：）

问题如下。鉴于声明：

```
(def mystruct (create-struct :a :b :c)) 
```

是否可以通过以下方式构建实例（显然是类似的）：

```
(struct-map mystruct :a 1 :b 2 :c (inc (:b this))) 
```

我设法通过以下比扎罗方式得到了这样的东西：

```
(def mystructinst (struct-map mystruct :a 1 :b 2 :c (inc (:b mystructinst)))) 
```

但老实说，我不知道为什么会这样。我认为 mystructinst 仅在评估包含的表单*后才绑定。*这是执行此任务的一种干净方式吗？有没有更好的？

感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T04:33:57.320

怎么样：

```
(let [b 2] (struct-map mystruct :a 1 :b b :c (inc b))) 
```

您是正确的，该符号仅在使用时对包含的表单进行评估*后才*`def`绑定，这就是您的最后一个示例引发 NullPointerException 的原因。您可能在没有意识到的情况下在其他地方预定义了 mystructinst。您可以将要引用的变量移到外部`struct-map`并将其放在 a 中`let`。然后，它可以在任何地方访问。

另外，请注意，这`let` *确实*允许您在后续绑定中引用以前的绑定：

```
user=> (let [a 1 b (inc a)] b)
2 
```

# ruby-on-rails - Rails '3.2.10' .js.erb 模板没有路由匹配

> ID：14506233
> 
> 赞同：0
> 
> 时间：2013-01-24T16:35:34.173
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在我的公共控制器中，我有：

```
 def index
    @super =  "test"
     respond_to do |format|
      format.html
      format.js
    end
  end 
```

我`index.js.erb`在views/public 文件夹中为索引操作创建了一个。

但是当我访问`http://localhost:3000/.js`

我明白了`No route matches [GET] "/.js"`

这以前在旧版本的导轨上工作过......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T18:26:02.723

[这个非常准确的问题](https://stackoverflow.com/questions/7686587/no-format-in-rails-3-1-when-trying-to-route-site-root)是一年前在这里提出的。提问者[得出结论](https://stackoverflow.com/a/7693665/693597)，我引用

> 好的，所以，我认为这可能是 Rails 团队故意阻止像“/.atom”这样的 URL 的事情（因为真的，这看起来像应该发生的事情吗？），所以我现在使用格式 URL（例如，“/latest.atom”）的第二条路线（获取“最新”，:action => :index）。

从这个问题来看，似乎是在 3.0 和 3.1 之间发生了一些事情。

作为一个临时解决方案，我仍然需要深入，从中删除`root`并`routes.rb`添加 this `get "/(.:format)" instead, to: "public#index"`。这应该有效。

# 编辑

是的，它可能与此[提交](https://github.com/rails/rails/commit/89c5b9aee7d7db95cec9e5a934c3761872ab107e)有关。

API 明确[表示](http://api.rubyonrails.org/classes/ActionDispatch/Routing/Mapper/Base.html#method-i-root)用于`root`添加`match`到`/`路由列表。`root`以斜线结尾，所以...连接点。提交说没有以 . 结尾的路由格式`/`。

我确实删除了添加 ( `|| path.end_with?('/')`)`actionpack/lib/action_dispatch/routing/mapper.rb`并且`root`现在可以具有格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-26T18:06:48.797

为确保您不会中断对 root_path 帮助程序的所有调用，请替换路由：

```
root :to => 'public#index' 
```

和：

```
get '/(.:format)' => 'public#index', :as => :root 
```

# php - 警告：preg_match() [function.preg-match]：编译失败：偏移量 54 处的字符类范围乱序

> ID：14506242
> 
> 赞同：-1
> 
> 时间：2013-01-24T16:35:57.667
> 
> 标签：php, preg-match

知道如何解决此错误吗？编码如下。

```
if ( preg_match( "#^" . $r['match'] . "$#is", $matches[2] ) ) 
```

我的代码的另一行也出现了同样的错误。编码如下。

```
if ( preg_match( "#^" . $r['match'] . "$#is", $url ) ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T16:46:36.237

我的猜测是 $r[match] 包含未在 php 使用的字符集中定义的字符。Php 并没有大量使用 Unicode，所以如果它被设置为纯 ASCII，它会抱怨字符串中的任何变音。

# jquery - jQuery 自动完成字段

> ID：14506243
> 
> 赞同：3
> 
> 时间：2013-01-24T16:35:58.737
> 
> 标签：jquery, html, forms, autocomplete, jquery-autocomplete

我正在使用`jQuery`的`autocomplete`功能。用户输入`college`姓名，自动完成功能会显示他/她输入的类似大学的列表。它工作正常。唯一的问题是，除了下拉自动完成菜单中显示的那些之外，我想禁止用户进入任何其他大学。我的意思是，我想让用户从可用列表中**选择**，他/她不能在该字段中输入任何其他文本。他将输入一些文本，自动完成将显示结果，然后从该列表中进行选择。目前，用户可以输入搜索字符串，从结果中进行选择，然后修改字段。我不想要那个。

我怎样才能做到这一点？目前，相关`html`的是：

```
<div class="ui-widget txt-fld">
   <label class="labelname">College:</label>
   <input id="college" class="textinput" name="college" />
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T20:17:03.903

我知道一个通​​用的选择，它一次又一次地帮助了我。看这个：

[http://ivaynberg.github.com/select2/](http://ivaynberg.github.com/select2/)

也许它可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T16:40:27.807

您想要一个可搜索的选择列表（或可搜索的下拉菜单）。如果您不允许修改，它真的不能再被视为自动完成。

以下插件将为您工作。

[http://jsearchdropdown.sourceforge.net/](http://jsearchdropdown.sourceforge.net/)

# javascript - 构建元素时触发的jQuery更改事件

> ID：14506248
> 
> 赞同：0
> 
> 时间：2013-01-24T16:36:13.423
> 
> 标签：javascript, jquery, forms

我正在使用 jQuery 构建一些动态选择列表。当它们发生变化时，我希望事件触发一个函数来刷新数据。

```
var selector    =   $('<select id="myid" />');
selector.append($('<option value>Option Placeholder</value>'));
// attach onChange event to select list 
selector.bind('change', doUpdate(this)); 
```

我的问题是`change`每次构建选择列表时都会触发该事件。我不确定触发器是如何发生的——我希望它只会`change`在它发生变化时触发事件！

[http://jsfiddle.net/TPuwc/](http://jsfiddle.net/TPuwc/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T16:38:37.137

当你这样做时：

```
selector.bind('change', doUpdate(this)); 
```

您期望发生的是绑定事件处理程序以执行函数，并作为参数`doUpdate`传递。`this`

这不是正在发生的事情。相反，它所做的是`doUpdate(this)`立即调用，然后尝试将该函数调用返回的值设置为事件的事件处理程序`change`。

你可以简单地做：

```
selector.bind('change', doUpdate); 
```

jQuery 将为您处理 的值`this`（它将是触发事件的元素），因此您无需将其作为参数传递给函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T16:38:47.637

您必须了解函数调用和函数引用之间的区别。每个回调都应该作为函数引用（或匿名函数）而不是函数调用提供。

`()`不同之处在于函数名后面的括号。

```
selector.bind('change', doUpdate); 
```

编辑：一定要更新`doUpdate`功能。它将自动访问使用`this`关键字触发更改的元素，因此您无需将其作为参数传递。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T16:39:16.557

您的事件收集方法是错误的。对于事件附件，您应该传递函数。而在这里你正在执行函数并传递返回值。

```
var selector    =   $('<select id="myid" />');
selector.append($('<option value>Option Placeholder</value>'));
// attach onChange event to select list 
selector.bind('change', function(){ doUpdate(this) }); 
```

# iphone - 将WGS84转换成经纬度

> ID：14506252
> 
> 赞同：0
> 
> 时间：2013-01-24T16:36:32.143
> 
> 标签：iphone, location, android-mapview, cllocation

我需要将 wgs84 值转换为纬度和经度值。我需要将值转换为纬度和经度并在地图视图上放置一个图钉。例如在 plist 我有值 SDO_X1= 39616.4535 和 SDO_Y1=37472.9078，我如何将这些值转换为度数、弧度或纬度和经度，请帮助我。所有地点均适用于新加坡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T02:54:45.040

关于“值 SDO_X1=39616.4535 和 SDO_Y1=37472.9078”。

知道这些是基于“WGS-84”的信息不足以回答这个问题。它们不是“WGS84 值”，因为十进制形式的“WGS84 值”将是十进制度数，例如 X 中的 -180 到 +180，Y 中的 -90 到 +90。

从值的大小来看，它们可能是以米为单位的测量值，相对于某个参考点。

谷歌搜索，我看到新加坡的官方投影被称为“SVY21”。

警告：除非这些数据来自 2004 年之前的土地调查，在这种情况下，您需要请当地土地测量师或适当的政府官员帮助您转换这些数据。或为这些旧调查提供表格或公式的任何参考来源。

假设这些是 SVY21 值，然后查看[东向北到纬度经度的答案](https://stackoverflow.com/questions/7872539/easting-northing-to-latitude-longitude)

# c - 取消引用指向不完整类型的指针 - 列表

> ID：14506256
> 
> 赞同：0
> 
> 时间：2013-01-24T16:36:43.070
> 
> 标签：c, list, pointers

我正在编写一个小型 C 程序，它（仅）加载带有文件名的链表。我将遍历这个列表并解析每个文件名的内容。

编译时收到以下错误：

```
main.c: In function 'main':
main.c:25: error: dereferencing pointer to incomplete type
main.c:26: error: dereferencing pointer to incomplete type
make: *** [main.o] Error 1 
```

主.c：

```
#include <stdio.h>
#include <stdlib.h>

#include "list.h"

int main(int argc, char *argv[])
{
    FNODEPTR node = NULL;

    node = create_filename_list();

    add_filename_node(&node, "file1.txt");
    add_filename_node(&node, "file2.txt");

    //Start Logger
    //Watchdog
    //Warehouse 

    //print_filename_list((struct sFilename *)node);

    while(node!=NULL)
    {
        printf("%s\n",node->chaFilename); //Line 25
        node=node->next; //Line 26
    }

    destroy_filename_list(node);

    exit(0); //0 SUCCESS - 1 FAIL
} 
```

列表.c：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#include "list.h"

struct sFilename
{
    char chaFilename[25];
    struct sFilename *next;
};

FNODEPTR create_filename_list()
{
    FNODEPTR node = NULL;

    node = (FNODEPTR) malloc(sizeof (struct sFilename)); // Alocando um nó do tipo sFilename

    return node;
}

void add_filename_node(FNODEPTR *fnFilename, char *chaFilename)
{
    FNODEPTR head = *fnFilename; // head recebe o conteúdo de anAction. head aponta para o mesmo endereço que fnFilename
    FNODEPTR newNode;

    newNode = (FNODEPTR) malloc(sizeof (struct sFilename)); // Alocando um nó do tipo sFilename

    strcpy(newNode->chaFilename, chaFilename); // Copiando o conteúdo de chaFilename para newNode->chaFilename.

    newNode->next = head; // next do novo nó aponta para o início da lista (fnFilename)

    head = newNode; //head é igual a newNode. head recebe o endereço de memória de newNode. head está na mesma posição que newNode
    *fnFilename = head; //o conteúdo de anAction é igual a posição de head
}

void print_filename_list(struct sFilename *fnFilename)
{
   if (fnFilename == NULL)
          printf("Nao ha arquivos ftp a serem carregados\n");
   else {
          printf("Os arquivos que serao carregados no T020 sao:\n");
          while (fnFilename != NULL) {
                 printf("\t- %s\n", fnFilename->chaFilename);//fnFilename->chaFilename);
                 fnFilename = (*fnFilename).next;//fnFilename->next;
          }
   }
}

void destroy_filename_list(FNODEPTR fnFilename)
{
    if(fnFilename != NULL)
    {
        free(fnFilename);
    }
} 
```

列表.h：

```
#ifndef LIST_H
#define LIST_H

typedef struct sFilename FNODE;
typedef FNODE *FNODEPTR;

FNODEPTR create_filename_list();
void add_filename_node(FNODEPTR *fnFilename, char *chaFilename);
void remove_filename_node(FNODEPTR *fnFilename);
void print_filename_list(struct sFilename *);
void destroy_filename_list(FNODEPTR fnFilename);

#endif 
```

该列表将作为对其他函数（模块）的引用传递，这些函数（模块）将解析内容并将其加载到数据库中。虽然我不能使用 node->chaFilename 打开我需要加载到数据库中的文件。

我遇到了一个新问题，当我调用传递 *node 作为参考编译器的解析器函数时抱怨与上面相同。例子：

解析器.c：

```
//Built-in libs
#include <stdio.h>
#include <stdlib.h>

//Homemade libs
#include "parser.h"
#include "list.h"

int start_parse(FNODEPTR *node)
{
    if(node!=NULL)
    {
        printf("Node is not null\n");
        while(node!=NULL)
        {
            printf("\tNode address %x\n", (unsigned int)node);
            node=node->next;
        };
    }

    return 1;
} 
```

解析器.h：

```
#include "list.h"

#ifndef PARSER_H
#define PARSER_H
int start_parse(FNODEPTR *node);
#endif 
```

海合会输出：

```
gcc -Wall   -c -o parser.o parser.c
parser.c: In function 'start_parse':
parser.c:16: warning: cast from pointer to integer of different size
parser.c:17: error: request for member 'next' in something not a structure or union
make: *** [parser.o] Error 1 
```

有任何想法吗？

在此先感谢，对于任何英语错误，我们深表歉意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T16:39:50.833

```
struct sFilename
{
    char chaFilename[25];
    struct sFilename *next;
}; 
```

这应该在 list.h 文件中定义，在语句之前：

```
typedef struct sFilename FNODE;
typedef FNODE *FNODEPTR; 
```

编辑：：

`int start_parse(FNODEPTR *node)`应该是`int start_parse(FNODEPTR node)`

# java - Jackcess 在其中获取排序表或最大索引

> ID：14506257
> 
> 赞同：1
> 
> 时间：2013-01-24T16:36:43.503
> 
> 标签：java, ms-access, insert, indexing, jackcess

我想在这样创建的 jackcess 表中插入一行；

`Table t = Database.open(new File(dbUrl)).getTable(tname);`

通常，如果我使用 SQL，这将是对它进行排序的正确时间。即便如此，我查看了文档并没有发现任何内容。

无论如何，在获得表格后，我尝试通过使用在其中插入一行；

```
 int id = t.getRowCount() + 1;

        try {
            t.addRow(id, "MyName", "MyLastName");
        } catch (IOException ex) {
            ex.printStackTrace();
        } 
```

但是，由于索引未排序，我得到以下异常；

```
java.io.IOException: New row [250, MyName, MyLastName, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null] violates uniqueness constraint for index 
Data number: 5
Page number: 99
Is Backing Primary Key: true
Is Unique: true
Ignore Nulls: false
Columns: [ColumnDescriptor  Name: (CLIENTES) ID_CLIENTE
Type: 0x4 (LONG)
Number: 0
Length: 4
Variable length: false flags: 1]
Initialized: true
EntryCount: 249
    Cache: 
    LeafDataPage[99] 0, 0, (0), [RowId = 93:0, Bytes = 7F 80 00 00  00 , RowId = 6844:0, Bytes = 7F 80 00 01  5C]

at com.healthmarketscience.jackcess.IndexData.addEntry(IndexData.java:571)
at com.healthmarketscience.jackcess.IndexData.addRow(IndexData.java:537)
... 
```

现在，我认为它可能由于缺少其他列而失败，但后来我尝试使用 `t.getRowCount() + 100;` 并能够插入。所以我的问题显然是我不知道如何获取索引或排序表。

显然，计算行数是一个糟糕的解决方案。反正我只是试了一下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-19T12:24:16.087

要按排序顺序检索行，您可以遍历由索引支持的游标。以下代码使用[此处](https://stackoverflow.com/a/19304549/2144390)答案中描述的技术，按主键顺序遍历表并检索最大键值。然后它添加具有下一个最大键值的新行。

```
import java.io.File;
import java.io.IOException;
import com.healthmarketscience.jackcess.*;

public class jackcessTest {

    public static void main(String[] args) {
        try {
            Table table = DatabaseBuilder.open(new File("C:\\Users\\Public\\Database1.accdb")).getTable("JackcessTest");
            int LargestKey = 0;
            // the following loop is modified from 
            //     https://stackoverflow.com/a/19304549/2144390
            //     for Jackcess 2.0
            for(Row row : CursorBuilder.createCursor(table.getPrimaryKeyIndex())) {
                LargestKey = (int)row.get("ID");
            }
            try {
                table.addRow(LargestKey + 1, "MyName", "MyLastName");
            } catch (IOException e) {
                e.printStackTrace();
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
        System.out.println("Done.");        
    }
} 
```

# java - Linux Mint 上 Titanium Studio 中的 JAVA_HOME 错误

> ID：14506259
> 
> 赞同：0
> 
> 时间：2013-01-24T16:36:46.070
> 
> 标签：java, titanium, java-home

我会尽量保持简洁，因为我需要快速弄清楚这一点。当我在 Linux Mint 13 64 位系统上设置 Titanium Studio 2.1.1.201207271312 时，我在安装喜欢的 Java Titanium 版本时遇到了各种问题。最后，我*想*我使用了[这里](https://github.com/rraptorr/sun-java6)的说明来让它工作。

现在几个月后，当我尝试为 Google Play 编译一个应用程序时，我得到了这个可怕的错误：

`[ERROR] Program launch failed. Unable to locate Java VM. Please set JAVA_HOMenvironment variable. [ERROR] Unabled to prepare JavaScript for packaging. Error code 4.`

检查我系统上的java替代品我得到这个：

```
'update-alternatives --query java
Link: java
Status: auto
Best: /usr/lib/jvm/java-6-sun/jre/bin/java
Value: /usr/lib/jvm/java-6-sun/jre/bin/java

Alternative: /usr/lib/jvm/java-6-sun/jre/bin/java
Priority: 63
Slaves:
java.1.gz /usr/lib/jvm/java-6-sun/jre/man/man1/java.1.gz

Alternative: /usr/lib/jvm/java-7-oracle/bin/java
Priority: 1
Slaves:
java.1.gz /usr/lib/jvm/java-7-oracle/man/man1/java.1.gz 
```

我的 .profile 中有以下设置

```
export JAVA_HOME=/usr/lib/jvm/java-6-sun/jre/bin/java

export PATH=$PATH:/usr/lib/jvm/java-6-sun/jre/bin/java 
```

但我仍然得到钛的错误。我尝试了许多不同的 .profile 文件变体，但没有运气。

我真的需要尽快解决这个问题。有没有人有任何想法？

**编辑：解决**

我似乎已经找到了正确的路径，这是我的 .profile 现在的内容：

```
JAVA_HOME=/usr/lib/jvm/java-6-sun/jre
export JAVA_HOME

PATH=$PATH:/usr/lib/jvm/java-6-sun
export PATH 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T02:15:13.587

我似乎已经找到了正确的路径，这是我的 .profile 现在的内容：

```
JAVA_HOME=/usr/lib/jvm/java-6-sun/jre
export JAVA_HOME

PATH=$PATH:/usr/lib/jvm/java-6-sun
export PATH 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T16:43:19.067

.profile 通常由 sh 处理，而 .bash_profile 由 bash 处理（而不是 .profile 如果存在）。尝试遵循 sh 兼容格式（之前在处理 .profile 文件时曾让我感到困扰）：

```
JAVA_HOME=/usr/lib/jvm/java-6-sun
export JAVA_HOME
PATH=$PATH:/usr/lib/jvm/java-6-sun/bin:/usr/lib/jvm/java-6-sun/jre/bin
export PATH 
```

我更正了我通常使用的内容，我只是在呼应您的价值观，但我应该更加小心。我通常有 JDK，而 JAVA_HOME 应该是它的基础，然后我为 JDK 和 JRE 添加了 bin。如果您进行编译，那么您可能需要 JDK 而不仅仅是 JRE。

# datatables - 使用 colreorderwithresize.js 时，Jquery 数据表中的 Colresize 是否有回调函数？

> ID：14506263
> 
> 赞同：2
> 
> 时间：2013-01-24T16:37:01.473
> 
> 标签：datatables

我正在使用 colreorderwithresize.js 插件。一切正常，但大多数情况下，当标题调整大小时，表格并没有与标题对齐。我试图弄清楚是否有与调整大小相关的回调函数，以便在调整大小发生时我可以调用 oTable.fnAdjustColumnSizing() 。

我尝试使用 fndrawcallback 调整列宽，但这会在过滤数据时产生性能问题（因为每次表中的数据更改时都会调用它）。

```
"fnDrawCallback": function(oSettings) {

setTimeout( function () {
oTable.fnAdjustColumnSizing();
}, 3000 );}, 
```

谢谢，
巴拉尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T21:01:00.693

Kike 表（CSS 类）覆盖了数据表（类），因此我无法在这些表上使用任何数据表函数，因此我想出了如下解决方案，

```
function resizeDataTable(dataTableid){
 $("#" + dataTableid).removeClass('kiketable-colsizable'); // Remove kike class
    var oTable = $("#" + dataTableid).dataTable(); 
    $(oTable).css({ width: $(oTable).parent().width() }); // Perform datatable functions
    oTable.fnAdjustColumnSizing(); 
  $("#" + dataTableid).addClass('kiketable-colsizable'); // Add kike class
} 
```

这完美无缺。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T23:14:23.380

Pasting Allans' comments below for others who are in search of this feature......

Looking at the plug-in's code - it doesn't look like it, although I'm sure one could easily be added in the drag method.

I think you'll need to debounce (throttle) the call to fnAdjustColumngSizing one way or another though.

[http://www.datatables.net/forums/discussion/13764/is-there-a-callback-function-for-colresize#Item_2](http://www.datatables.net/forums/discussion/13764/is-there-a-callback-function-for-colresize#Item_2)

# unix - Unix - 使用 tar 和 gz 查找命令在命令行中运行良好，但在脚本上不起作用

> ID：14506266
> 
> 赞同：2
> 
> 时间：2013-01-24T16:37:15.793
> 
> 标签：unix

当我在命令行上使用此命令并为参数 $dir、$year、$month 提供硬编码值时，它运行良好并创建了 gzip 文件。我检查了 gz 文件的内容，我看到了想要的结果。

```
find $dir -name '*_$year-$month-*' -type f -print | \
xargs tar -zvcf $dir/log.$year-$month.tar.gz 
```

但是当我将它嵌入到 shell 脚本中并运行时，它不会运行并给我这个错误。

`tar: Cowardly refusing to create an empty archive`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T16:41:17.367

首先，您的单行中充满了引用问题：

*   `$dir`如果目录名称包含空格，则会中断。你`"$dir"`需要

*   单引号防止变量扩展 -`'*_$year-$month-*'`应该是`"*_$year-$month-*"`.

    在您的 shell 脚本代码中，`find`不会匹配任何文件（您没有任何带有 string 的文件名`_$year-$month-`，是吗？），因此`tar`不会提供任何要包含在存档中的文件。

在旁注中，`xargs`在这种特殊情况下使用是危险的 - 如果您有太多文件，`xargs`将多次调用`tar`，并且除了最后一次运行之外的所有存档文件都将从存档中删除，因为它被覆盖。

此外，此命令还将中断带有空格的文件路径 - 默认情况下`xargs`使用空格作为参数分隔符。根据您使用的版本`find`和`xargs`二进制文件，可能有一个`-print0`查找选项和一个匹配`-0`选项`xargs`来处理此问题：

```
find ... -print0 | xargs -0 ... 
```

最后，`xargs`如果没有提供参数，某些版本有一个选项可以避免调用指定的命令 - 对于 GNU `xargs`，这是一个`-r`选项：

```
find ... -print0 | xargs -0 -r ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T16:42:48.350

如果可以的话，尝试将shellscript 中的,`echo`​​ 的值放到控制台上。这些值在 shellscript 中可能不同。`$dir``$year``$month`

`find`其次，shellscript`tar`使用的是哪个？尝试使用完整路径进行诊断或修改 的值`$PATH`以匹配从命令行运行命令时获得的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T16:41:52.733

变量替换不会发生在单引号内。

使用双引号：`find "$dir" -name "*_$year-$month-*" ...`

（如果需要，您可以在同一参数中使用不同类型的引号（不在此处）`'*_'"$year"`：）

# c++ - C++ 未解决的令牌问题

> ID：14506271
> 
> 赞同：0
> 
> 时间：2013-01-24T16:37:35.693
> 
> 标签：c++, token

我正在为一个班级做一个程序，老师给了我们一个我们必须实现的 Cpp 文件。除 Main 外，所有内容都是由他编写的，但我遇到了一个奇怪的错误。任何帮助都会很棒。这是我的代码。

```
// **************************************************************************
//
// Counter.cpp
//
// Defines and tests class CounterType, which is used to count things.
// CounterType contains both a default constructor and a constructor that
// sets the count to a specified value, plus methods to increment, decrement,
// return, and output the count.  The count is always nonnegative.
//
// **************************************************************************
#include <iostream>
#include <fstream>
#include <cstdlib>
using namespace std;

class CounterType
{
public:
    CounterType();
    //Initializes the count to 0.

    CounterType(int initCount);
    //Precondition: initCount holds the initial value for the count.
    //Postcondition:
    //  If initCount > 0,initializes the count to initCount.
    //  If initCount <= 0,initializes the count to 0.

    void increment();
    //Postcondition:
    //  The count is one more than it was.

    void decrement();
    //Postcondition:
    //  If the count was positive, it is now one less than it was.
    //  If the count was 0, it is still 0

    int getCount();
    void output(ostream& outStream);
    //Precondition: outStream is ready to write to
    //Postcondition: count has been written to outStream

private:
    int count;

};

 void increment();
 void decrement();
 int getCount();
 void output(ostream& outStream);

 int main()
{
    CounterType Test;

    increment();
    decrement();
    getCount();

}

CounterType::CounterType()
{
    count = 0;
}

CounterType::CounterType(int initCount)
{
    if (initCount >= 0)
        count = initCount;
    else
        count = 0;
}

void CounterType::increment()
{
    count++;
}

void CounterType::decrement()
{
    if (count > 0)
        count--;
}

int CounterType::getCount()
{
    return count;
}

void CounterType::output(ostream& outStream)
{
    outStream << count;
} 
```

这是错误。

> 错误 1 ​​错误 LNK2028：在函数“int __cdecl main(void)”(?main@@$$HYAHXZ)J:\ MCM 10.05\MCM 10.05\MCM10.obj MCM 10.05

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T16:39:22.550

您正在声明全局函数`increment()`, `decrement()`, 并且`getCount()`您从未定义过。您会收到链接错误，因为您在其中调用它们`main()`并且链接器找不到它们的定义。

您可能打算调用`Counter`对象的成员函数，如下所示：

```
int main()
{
    CounterType Test;

    Test.increment();
    Test.decrement();
    Test.getCount();
} 
```

如果是这种情况，您应该删除全局函数的声明：

```
// THESE DECLARATIONS BEFORE main() SHOULD NOT BE THERE! JUST REMOVE THEM
// void increment();
// void decrement();
// int getCount();
// void output(ostream& outStream); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T16:39:56.673

您声明了一个名为的全局函数`decrement()`，但没有定义它。

存在`CounterType::decrement()`，但这是一个不同的功能。

`increment()`和也是如此`getCount()`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T17:35:02.357

你犯了两个错误：

1）通过查看您的代码，您还声明了以下函数

```
 void increment();
 void decrement();
 int getCount();
 void output(ostream& outStream); 
```

您已经在课堂上提供了他们的声明，所以现在无需再次声明。

2）在 main 你以这种方式调用函数，

```
increment();
decrement();
getCount(); 
```

这可能是你不想做的，因为以这种方式调用会调用全局函数。调用类函数的正确方法是通过类对象

```
Test.increment();
Test.decrement();
Test.getCount(); 
```

只需更正这 2 个更改，您的程序就可以开始使用了。:)

# javascript - 在 ember 中访问控制器或视图的实例

> ID：14506275
> 
> 赞同：10
> 
> 时间：2013-01-24T16:38:05.653
> 
> 标签：javascript, ember.js, handlebars.js, ember-router

我的理解是，当我跑步时

```
App.CheeseController = Ember.Controller.extend({ type:"brie"}); 
```

创建了一个类 `CheeseController` ，当我激活 Cheese 路由时，会创建该类的一个实例，这是我在与车把模板中的控制器交谈时实际接触到的。

是否可以从 javascript 控制台（或从我的程序中）直接访问该实例化对象？更一般地说，Ember 自动生成的对象在哪里？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-24T17:26:12.197

> 创建了一个 CheeseController 类，当我激活 Cheese 路由时，会创建该类的一个实例，这是我在与车把模板中的控制器交谈时实际接触到的。

是的，这正是发生的事情。Ember 创建 App.CheeseController 的单例实例，并在渲染车把模板时将其作为上下文提供。

> 是否可以从 javascript 控制台中直接访问该实例化对象

是的。从 javascript 控制台执行此操作的最佳方法是使用`{{debugger}}`模板中的把手助手。这将在您的模板上下文中打开 JS 调试控制台。

```
<script type="text/x-handlebars" data-template-name="cheese">
  {{debugger}}
</script> 
```

打开调试器后，您可以将实例化的控制器单例访问为`this`，因此`this.toString()`应该返回类似`<App.CheeseController:ember225>`.

> （或从我的程序中）？

取决于你的程序的哪一部分

*   从路线：使用`this.controllerFor('cheese')`
*   从模型：不。请不要从模型访问控制器。
*   从另一个控制器：如果您在另一个控制器中声明一个依赖项，则可以通过该属性从另一个控制器访问`needs: ['cheese']`单例。请参阅[自动合成控制器“需要”依赖项](https://github.com/emberjs/ember.js/pull/1731)`App.CheeseController``controllers.cheese`
*   从模板：使用`needs`数组声明模板控制器的依赖关系，然后在模板中，奶酪控制器位于：`{{controllers.cheese}}`

It is also possible to access the cheeseController instance via the ember container, but please don't. The container is not meant to be a public API. Recent updates to Ember have made accessing it somewhat awkward. This is because using global constants to access instances breaks encapsulation, and while that is fine for the console it should be avoided in your application code. For more detail, see [App.container was not meant to be a public API](https://github.com/emberjs/ember.js/commit/5becdc4467573f80a5c5dbb51d97c6b9239714a8)

More generally, where do the objects that Ember automatically makes live? Internally ember caches controller singletons in the container. Of course it is not a part of the public API, but if you are curious about how things work internally check out [container_test.js](https://github.com/emberjs/ember.js/blob/master/packages/container/tests/container_test.js) and [What is the purpose of the Ember.Container](https://stackoverflow.com/questions/14085749/what-is-the-purpose-of-the-ember-container)

# wpf - 将 TwoWay 绑定到 SelectedItem：初始化时的“错误方式”同步

> ID：14506280
> 
> 赞同：0
> 
> 时间：2013-01-24T16:38:14.577
> 
> 标签：wpf, binding, collectionviewsource

我正在尝试将 my 的属性绑定`DataContext`到`SelectedItem`ComboBox 上，如下所示：

```
<ComboBox x:Name="ElementSelector" 
          ItemsSource="{Binding Source={StaticResource Elements}}"
          DisplayMemberPath="ElementName"
          SelectedItem="{Binding ValueElement, Mode=TwoWay}"> 
```

*Elements*资源在哪里`CollectionViewSource`（不知道这是否重要）。

初始化所有内容后， 的属性`ValueElement`设置`DataContext`为`CollectionViewSource`. `SelectedItem`我想要的是以相反的方式对其进行初始化：如果不包含匹配项，我想将 ComboBox 设置为属性的值或 null 。

如何才能做到这一点？

**编辑 - 附加信息：**

ComboBox 是 DataTemplate 的一部分：

```
<DataTemplate x:Key="ReferenceTemplate" 
              DataType="viewModels:ElementMetaReferenceViewModel">
   <StackPanel Orientation="Horizontal">
      <StackPanel.Resources>
         <ResourceDictionary>
            <views:ElementsForReferenceViewSource x:Key="Elements" 
                                                  Source="{Binding  DataContext.CurrentProject.Elements, ElementName=Root}" 
                                                  ReferenceToFilterFor="{Binding}"/>
         </ResourceDictionary>
      </StackPanel.Resources>

      <TextBlock Text="{Binding PropertyName}"/>
      <ComboBox x:Name="ElementSelector" 
                ItemsSource="{Binding Source={StaticResource Elements}}"
                DisplayMemberPath="ElementName" 
                SelectedItem=""{Binding ValueElement, Mode=TwoWay}" />

   </StackPanel>
</DataTemplate> 
```

`ElementsForReferenceViewSource`简单地派生`CollectionViewSource`并实现了用于过滤的附加 DependencyProperty 。

中的`DataContext`项目`CollectionViewSource`如下所示：

```
public class ElementMetaReferenceViewModel : ViewModelBase<ElementMetaReference, ElementMetaReferenceContext>
{
   ...
    private ElementMetaViewModel _valueElement;

    public ElementMetaViewModel ValueElement
    {
        get { return _valueElement; }
        set
        {
            if (value == null) return;
            _valueElement = value;
            Model.TargetElement = value.Model;
        }
    }

    ...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T11:39:09.497

**对于遇到相同问题的人**

上面的代码按预期工作。解决方案是让幕后的东西正确。确保 ViewModel 的实例（即您要绑定到的属性的值）肯定包含在 CollectionViewSource 中。

就我而言，问题是错误地反序列化对象树，因此对象被实例化了两次。然后为每个对象初始化一个不同的 ViewModel，然后显然该属性的值不包含在列表中。

**评论**

要检查这是否是您的问题，您可以尝试以下操作：

覆盖 ComboBox 中显示的 ViewModel 的 ToString() 方法，如下所示：

```
public override string ToString()
{
   return "VM"+ Model.GetHashCode().ToString();
} 
```

然后，您可以轻松地将源集合中的项目与您的属性值进行比较。不是最专业的方式，但它为我完成了工作。

# html - Modernizr - 加载 polyfills/使用自定义检测的正确方法

> ID：14506282
> 
> 赞同：7
> 
> 时间：2013-01-24T16:38:17.120
> 
> 标签：html, modernizr, polyfills

我想在网页上使用一些新的 HTML5 表单属性和输入类型。有些浏览器已经支持它们，有些则不支持，也永远不会。这就是我想使用 Modernizr 的原因——这就是我的麻烦开始了。

据我了解，Modernizr 本身并不是一个 polyfill，而是一个可以测试浏览器是否能够处理一些新的 HTML5 / CSS3 内容的脚本。如有必要，可以加载“模拟”这些功能的 polyfill，以便在不支持/较旧的浏览器中使用它们。我猜这是正确的吗？

关于测试/加载：*使用 Modernizr 加载 polyfill 的正确或最佳方法是什么？*
在文档中我发现了这个：

```
Modernizr.load({
  test: Modernizr.geolocation,
  yep : 'geo.js',
  nope: 'geo-polyfill.js'
}); 
```

但有些页面也这样做：

```
if (Modernizr.touch){
   // bind to touchstart, touchmove, etc and watch `event.streamId`
} else {
   // bind to normal click, mousemove, etc
} 
```

*另外，我如何真正了解这些功能检测是如何被调用的？`Modernizr.geolocation`每个特征检测肯定存在类似的东西？*

在 Modernizr GitHub 存储库中，也有许多用户贡献的功能检测。*如何将这些实现到我的 Modernizr 版本中？还是最好只使用他们的构建器？*

在 Safari 中，HTML5 表单验证有效，但没有用于显示错误消息的 UI。基本上，该功能只实现了一半。这就是为什么 Modernizr 在 Safari 中给出误报的原因，就像这里已经提到的那样：[https ://github.com/Modernizr/Modernizr/issues/266](https://github.com/Modernizr/Modernizr/issues/266) *显然有人用这样的自定义测试解决了这个问题，但我仍然不明白如何使用它。*[1](https://github.com/Modernizr/Modernizr/issues/266)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-27T20:02:15.077

您看到的两种技术都是有效的。

对于`yep`/`nope`版本，这是加载要从单独文件中包含的 polyfill 的理想方式。这不一定是 Javascript —— 它也可以是 CSS 文件。

在标准 JS`if()`块的情况下，如果您在同一个 JS 文件中有一个块功能相关的代码，您想根据该功能是否可用来切换该功能，这将更加有用。

所以这两种变体都有自己的位置。

但是，您可能还会看到`if()`block 选项用于包含单独的 JS 文件，因为`yep`/`nope`语法在某些早期版本的 Modernizr 中不可用。Yepnope 实际上是一个完全独立的库，它已被合并到 Modernizr 中，以使加载 polyfill 文件的语法更具可读性。

关于如何知道 Modernizr 可以检测到哪些功能的问题，答案当然在 Modernizr 文档中。

查看文档 ( [http://modernizr.com/docs/](http://modernizr.com/docs/) ) 中标题为“Modernizr 检测到的功能”的部分。这有一个检测到的所有功能的列表，以及 Modernizr 给它的名称。

重新检测您提到的损坏功能-您链接的票证在近一年前被标记为已关闭，从票证上的注释看起来好像改进测试的代码已添加到主要的 Modernizr 代码中。确保您运行的是最新版本，并仔细检查这是否适合您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-08T15:16:47.917

从 Modernizr v3 开始，通过 Modernizr.load() 使用 Yepnope 已被[弃用](https://modernizr.com/news/modernizr-3-new-release-site)。一个不错的选择是使用 jQuery：

```
if (Modernizr.geolocation){
  console.log('match');
} else {
  // load polyfill
  $.getScript('path/to/script.js')
  .done(function() {
    console.log('script loaded');
  })
  .fail(function() {
    console.log('script failed to load');
  });
} 
```

# triggers - 在 Unity 中，您如何知道 OnTriggerEnter 是否发生在脚本 A 中，然后因此在脚本 B 中增加一个值？

> ID：14506286
> 
> 赞同：0
> 
> 时间：2013-01-24T16:38:24.383
> 
> 标签：triggers, unity3d

我正在制作一个多人游戏，并且我有一个附加到玩家的得分脚本，所以当那个玩家进入一个带有对撞机的球体时，它会在他的脚本中增加一个值。

对不起，如果这没有任何意义。

这是球体代码

```
function OnTriggerEnter(other : Collider){
Debug.Log("Trigger Entered");
renderer.enabled = false;
collider.isTrigger = false;
collider.enabled = false;
//yield WaitForSeconds ( Random.Range(1.0, 10.0));
yield WaitForSeconds (3);
renderer.enabled = true;
collider.isTrigger = true;
collider.enabled = true;
} 
```

这是播放器代码

```
var score:int = 0;
var opScore:int = 0;
var sphereSettingsInstance:sphereSettings;

if(sphereSettingsInstance.OnTriggerEnter()){
score++;

}

function OnGUI () {
if(networkView.isMine){
   GUI.Label (Rect (10, 10, 100, 20), "Your score is: " + score);
   GUI.Label (Rect (100, 100, 200, 20), "Opponents score is: " + opScore);
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T03:29:09.063

您应该看到[正在另一个脚本中更改变量](http://answers.unity3d.com/questions/200262/changing-variables-in-another-script.html)，因此您需要执行此操作

```
function OnTriggerEnter(other : Collider){
Debug.Log("Trigger Entered");
renderer.enabled = false;
collider.isTrigger = false;
collider.enabled = false;
//yield WaitForSeconds ( Random.Range(1.0, 10.0));
yield WaitForSeconds (3);
renderer.enabled = true;
collider.isTrigger = true;
collider.enabled = true;
var : GameObject player = GameObject.Find("player");
var : script scriptB = player.GetComponent("scriptB");
scriptB.variable++;
} 
```

但是你的计数器需要是一个变量

# spring - 有条件地在 Jersey 中应用 @Provider 注释或 @Provider 注释的替代方法

> ID：14506287
> 
> 赞同：1
> 
> 时间：2013-01-24T16:38:25.937
> 
> 标签：spring, rest, annotations, jersey, provider

我们有一个 Jersey-Spring 项目。我们想有条件地使用@Provider 注解。即我们只想将它用于某些环境。我所说的环境是指开发、登台、现场质量保证等。

我们在项目中使用 spring bean 配置文件使用了特定于环境的配置。无论如何，我们是否可以确保仅在环境是特定环境时才应用 @Provider ？（请注意，在 java 代码中，我们知道环境是什么。）

如果上述方法是不可能的，那么无论如何我们可以避免使用@provider 注释并使用某种可以完成这项工作的代码，以便我们可以根据环境有选择地应用它。

```
@Provider
@Profile("docs")
@Produces(MediaType.APPLICATION_JSON)
public class JacksonJsonProvider extends JacksonJaxbJsonProvider { 
```

基本上我们使用 @Provider 来应用 JacksonJsonProvider 但我们只想在某些环境中应用这个提供者。

请让我们知道最佳解决方案。感谢您。-ND。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T17:41:38.530

最好的解决方案是将它放在一个单独的包中，并且只将该包包含在您所需的配置文件中。

查看 PackagesResourceConfig，特别是 PROPERTY_PACKAGES。

# magento - Magento 视图未显示适当的价格

> ID：14506288
> 
> 赞同：1
> 
> 时间：2013-01-24T16:38:36.497
> 
> 标签：magento, views

此文件 (frontend/base/default/template/catalog/product/list.phtml) 已编辑，现在没有显示正确的价格， [http: //www.personalproducts4u.co.uk/hotel-toiletries/au-lait](http://www.personalproducts4u.co.uk/hotel-toiletries/au-lait)

我在上面的文件中更改了第三个表标签（只有第三个表标签），价格显示都一样（折扣价）有什么想法吗？

这是我更改的代码：（将其粘贴在列表文件的第三个表标记上）

```
 <table border="1" cellpadding="0" cellspacing="0">
                    <tr>
                        <th class="buy_heading">Buy</th>
                        <td class="buy_pay_content">1</td>
                     <?php 
                            /*foreach($tierPrices as $key=>$value) 
                            {
                                echo "<td class='buy_pay_content'>".number_format($tierPrices[$key]['price_qty'],0)."</td>";
                            } */
                        ?>
                        <?php
                     if(count($tierPrices)):
                     foreach($tierPrices as $key=>$value) 
                          {
                              echo "<td class='buy_pay_content'>";
                              echo number_format($tierPrices[$key]['price_qty'],0);
                              if($key == $count-1) 
                              {
                                    echo "+";
                              }
                              echo "</td>";
                          } 
                     else:
                    echo '<td class="buy_pay_content">5</td>
                     <td class="buy_pay_content">10+</td>';
                     endif; 

                      ?>
                        <td class="buy_pay_content">Quantity</td>
                    </tr>
                    <tr>
                        <th class="pay_heading">Pay</th>
                        <td class="buy_pay_content"><?php echo $this->getPriceHtml($_product) ?><?php //echo Mage::helper('core')->currency($_product->getPrice()) ; ?>

                        <?php //echo Mage::helper('core')->currency($_product->getPrice()) ; ?> <?php //echo $this->getPriceHtml($_product, true)

                         ?>
                        </td>
                       <?php 
                       $specialprices = Mage::getModel('catalog/product')->load($_product->getId())->getSpecialPrice(); 
                       if($specialprices)
                       {
                           $specialprice =$specialprices; 
                       }
                       else
                       {
                           $specialprice = 0;
                       }
                         if(count($tierPrices)):
                            foreach($tierPrices as $key=>$value) 
                            {
                                if($specialprice < $tierPrices[$key]['price'] && $specialprice != '0'):
                                //echo 'special less'.$specialprice;
                                ?>
                                <td class='buy_pay_content'><div class="price-box"> 
                                      <p class="old-price"><span id="old-price-182" class="price"> <?php echo Mage::helper('core')->currency($tierPrices[$key]['price']) ?> </span>  </p>
                                      <p class="special-price"> <span id="product-price-182" class="price"><?php echo Mage::helper('core')->currency($specialprice) ?></span></p>
                                   </div></td>
                                <?php
                                else:
                                ?>
                                <td class='buy_pay_content'><?php echo Mage::helper('core')->currency($tierPrices[$key]['price']) ?></td>
                                <?php
                                endif;
                                ?>

                            <?php } 
                            else:
                                echo "<td class='buy_pay_content'>".$this->getPriceHtml($_product, true)."</td>";
                                    echo "<td class='buy_pay_content'>".$this->getPriceHtml($_product, true)."</td>";
                            endif;
                        ?>

                        <td class="buy_pay_content"><input type="text" class="input-text qty" title="Qty" value="" maxlength="12" id="qty" name="qty"></td>
                    </tr>
                    </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:39:01.710

好吧，问题似乎是 getSpecialPrice() 返回特价字段中的内容。我可能弄错了，但我不相信您可以在 Magento 中提供特殊的分层价格。您仍然可以添加静态特价，但正如您已经体验过的那样，它将为每次迭代显示相同的价格。

您可能需要某种自定义扩展或模板逻辑来正确显示此类销售。

我不确定您目前如何管理您的分级定价，但如果它是每个分级的固定百分比，您可以将分级价格设置为计算的销售价格，并通过除以每个分级折扣百分比来计算和显示原始分级价格并显示数字。

# c# - 如何编写C#调用vb6代码？

> ID：14506290
> 
> 赞同：1
> 
> 时间：2013-01-24T16:38:39.570
> 
> 标签：c#, vb6

我在 VB6 中有一个 activeX DLL，我被要求用它运行一些测试。由于我不再有 VB6 环境，我认为最好尝试制作一个简单的 C# 程序来调用注册的 COM Dll。为此，我将 DLL 复制到 c:\windows\system32，使用 regsrv32 注册 DLL，重新启动计算机并将此 DLL 添加到 COM，因此我将其添加到我的项目中并从我的项目中引用它。我从中创建了一个对象并尝试从中调用一个函数，但除了 DllUnusedClass 和 DllUnused 之外没有其他可用的函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T16:49:18.767

您说您已在项目中添加了对 COM dll 的引用，现在我将右键单击该引用并选择“在对象浏览器中查看”。这将向您显示引用的 dll 中可用的类型。

可能是您没有创建适当类型的对象，因此在对象浏览器中查看它应该可以帮助您确定要创建的对象类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T22:11:47.193

确保您在 VB6 项目中拥有的任何要从 .Net 应用程序访问的类都将`Instancing`属性设置为，`6 - GlobalMultiUse`以便它在范围内。

我已经使用`Instancing`设置为默认值的属性测试了您的场景，`5 - MultiUse`并遇到了您描述的相同问题。

# java - Groovy 类没有被收集，但没有内存泄漏的迹象

> ID：14506291
> 
> 赞同：6
> 
> 时间：2013-01-24T16:38:42.557
> 
> 标签：java, memory-leaks, groovy

我有一个 Java 类，它使用自定义类加载器动态重新加载 groovy 类，我看到一些奇怪的行为，一些类没有被收集，但随着时间的推移它不会泄漏内存（例如 perm gen 不会继续无限增长）。

在我的 java 代码中，我正在加载这样的类（为简单起见，删除了样板文件）：

```
Class clazz = groovyClassLoader.loadClass(className, true, false, true);
instance = clazz.newInstance(); 
```

然后我通过清除类加载器缓存、元注册表等动态地重新加载 groovy 类：

```
for (Class c : groovyClassLoader.getLoadedClasses()){
     GroovySystem.getMetaClassRegistry().removeMetaClass(c);
}
groovyClassLoader.clearCache(); 
```

现在，如果我只是循环这段代码，不断加载然后重新加载我的 groovy 类，我会看到奇怪的行为（我的测试代码实际上只是在循环重新加载过程 - 它对创建的任何对象等都没有做任何事情，所以上面代码中的实例只是本地的，所以应该对 GC 有好处）。

如果我运行它，将 maxpermsize 设置为 128m 然后我得到泄漏行为并且它 OOM permgen 错误：

![128m permgen 的内存配置文件](../Images/7e34b69736ddad4b94bd6f9302d5069e.png)

但是，如果我再次运行它并将 maxpermsize 增加到 256m，那么一切都很好，它可以永远运行（这个图像是 1 小时，但我已经运行了整晚，做了数千次重新加载）：

![在此处输入图像描述](../Images/058eaad1d9d804ed66828c9467679ff9.png)

有没有人遇到过类似的行为？或有什么想法？同样奇怪的是，在第一个示例中，内存使用量是逐步增加而不是稳定增加。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-28T15:39:31.210

您看到的锯齿模式对于一直分配和释放的内存是典型的。您添加了清除缓存的代码，但这并不意味着将自动收集该类。JVM 甚至在尝试对更长生命周期的对象进行正常的垃圾收集之前就倾向于增加内存。删除类的操作更少，通常仅在完整的 gc 运行期间完成。这可能会导致令人讨厌的情况，即 permgen 已满并抛出 OOME，即使已经收集了类。确切的行为似乎因版本而异。

反正。仅仅因为该类不再被引用，并不意味着它被立即收集。相反，permgen 可能会增长到最大值，然后卸载类。

除了您的 loadClass 调用可能导致创建新类和元类注册表以某种方式引用该类之外，还有更多具有可能引用的类。例如，Groovy 中的调用站点缓存也涉及到类的软引用。如果反射调用的次数足够多（Groovy 可能必须这样做），可能会生成帮助类来加速反射。后一个是由 JDK 完成的，而不是 Groovy。

我必须做的一个更正：元类不是真正的类，不能使用 permgen。但他们引用了采用 permgen 的类。因此，如果元类被硬引用，则该类将保留。IBM JDK 中有一个有趣的“特性”，它确实认为如果一个类被硬引用，则它是不可加载的，即使执行该引用的对象本身是 SoftReference 的一部分。

为了更完整地解释上述行为，我需要 JVM 的输出来进行类加载和卸载。我假设应用程序理论上可以在 128MB 中运行。如果您查看 16:17:30 之前和之前的低点的 128MB 图表，您可能会注意到之前的一个没有另一个低。这意味着直接在该时间代码之前的点确实卸载了比之前更多的类。JVM 可以自由决定何时删除一个类，并且并不总是删除理论上可以卸载的所有类。您必须在尽可能卸载的类和性能之间进行权衡。

# maven - 如何使用父打包pom部署maven项目

> ID：14506302
> 
> 赞同：1
> 
> 时间：2013-01-24T16:39:05.840
> 
> 标签：maven, jboss7.x

我正在尝试使用两个模块部署一个 Maven Web 应用程序，并且我尝试使用 mvn 包来引发战争。相反，我得到了父应用程序的 pom.xml 和子模块的两个 jars。这……那太好了。我该如何部署它？我期待一场战争。另外，尝试部署到 jboss。

编辑：web.xml 中有什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T05:34:08.853

1.  [这](https://stackoverflow.com/questions/9845178/building-multi-module-project-from-maven-into-one-war-file)是从 Maven 构建多模块项目到一个 war 文件的一个很好的参考。

2.  可以通过[jboss-maven 插件](http://mojo.codehaus.org/jboss-maven-plugin/examples/deploy-undeploy-examples.html)部署 war 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T16:45:14.913

确保您的子模块声明`<packaging>war</packaging>`. 如果您未定义包装类型，maven 将选择 jar 作为默认值。

如果您的 parent-pom 定义了您的`modules`，它应该是一个 POM 作为包装（猜测 parent-pom 在 99.9% 的情况下是 POM 作为包装类型）。因此，对于 parent-pom，您只会得到一个 pom.xml。

对于部署，您需要指定一个`<distributionManagent>`.

```
<distributionManagement>
  <repository>
    <id>corp1</id>
    <name>Corporate Repository</name>
    <url>scp://repo/maven2</url>
  </repository>
</distributionManagement> 
```

对于用户名和密码，我更喜欢`<server>`在 ~/.m2/settings.xml 中声明 a，因此您的密码不会对所有人公开。

我建议查看[Sonatype](http://www.sonatype.com/books/mvnref-book/reference/)的 maven-book 。

如果这没有帮助，请编辑您的帖子并插入您的 POM。

# asp.net - 错误：视觉工作室中的 40

> ID：14506304
> 
> 赞同：0
> 
> 时间：2013-01-24T16:39:12.737
> 
> 标签：asp.net, visual-studio-2010, sql-server-2008-r2

在此之后我在 Visual Studio 2010 中创建了数据库我安装了 SQL Management Studio 2008 R2 现在我打开 Visual Studio 并打开数据库，但它给出了以下错误。

> 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：命名管道提供者，错误：40 - 无法打开与 SQL Server 的连接）

# authorization - DotNetOpenAuth 不适用于 oauth2

> ID：14506309
> 
> 赞同：1
> 
> 时间：2013-01-24T16:39:25.083
> 
> 标签：authorization, oauth-2.0, dotnetopenauth

我通过 Nuget 下载了最新的包，并使用包管理器进行安装。

问题： 1) 首先，我没有在参考文献中看到 DotNetOpenAuth.OAuth2。我不得不像个野孩子一样在谷歌周围搜索才能通过另一个 nuget install 2) 这样做之后，无法识别 IAuthorizationServerHost 接口。

我刚刚开始使用 DotNetOpenAuth2，但坦率地说，缺乏正确的步骤和文档是一种关闭。不是每个使用它的人之前都构建过授权服务器。非常感谢任何帮助我启动和运行的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T17:01:08.300

如果您仍想使用 NuGet，可以尝试 DotNetOpenAuth.Ultimate [http://nuget.org/packages/DotNetOpenAuth.Ultimate](http://nuget.org/packages/DotNetOpenAuth.Ultimate)

`A single assembly that adds OpenID 1.1/2.0, OAuth 1.0(a)/2.0, & InfoCard authentication and authorization functionality for client and server applications.`

```
PM> Install-Package DotNetOpenAuth.Ultimate 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T16:42:33.157

原来手动下载它，然后手动添加 dll 解决了我的问题。

# c++ - C++ - 导出 C++ 库公共部分的正确方法

> ID：14506310
> 
> 赞同：1
> 
> 时间：2013-01-24T16:39:29.123
> 
> 标签：c++, static-libraries, header-files

我的 ./mylib/src 目录中有以下文件。我希望对用户隐藏此位置的任何内容。

**message.h 文件（在 ./mylib/src 中）**

```
// Include guard
namespace MyLib
{
    class Message
    {
    public:
        Message();
        virtual ~Message() = 0;

        virtual bool ToString(std::string& rstrOutput);
        bool IsEmpty() const;

    protected:
        void DoStuff();

    private:
        Message(const Message&); // Disable
        Message& operator=(const Message&); // Disable

    private:
        int m_nData;
    };
} 
```

**request.h 文件（在 ./mylib/src 中）**

```
// Include guard
#include "message.h"

namespace MyLib
{
    class Request : public Message
    {
    public:
        Request();
        ~Request();

        bool ToString(std::string& rstrOutput);

    private:
        bool Build();

    private:
        bool m_b;
    };
} 
```

**response.h 文件（在 ./mylib/src 中）**

```
// Include guard
#include "message.h"

namespace MyLib
{
    class Response : public Message
    {
    public:
        Response();
        ~Response();

        std::string GetSomething() const;
    };
} 
```

当我分发我的库时，我想让用户#include 仅一个头文件（例如 ./mylib/include/mylib/mylib.h）并使用请求和响应。所以我创建了一个像这样的大头文件：

**mylib.h 文件（在 ./mylib/include/mylib 中）**

```
// Include guard
#include <string>

namespace MyLib
{
    class Message
    {
    public:
        Message();
        virtual ~Message() = 0;

        virtual bool ToString(std::string& rstrOutput);
        bool IsEmpty() const;
    };

    class Request : public Message
    {
    public:
        Request();
        ~Request();

        bool ToString(std::string& rstrOutput);
    };

    class Response : public Message
    {
    public:
        Response();
        ~Response();

        std::string GetSomething() const;
    };
}

#endif 
```

但问题是每次我对库的公共部分进行更改或添加新类时，我都必须更新 mylib.h 文件，这很不方便。实现相同目标的更好方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T16:46:49.343

我会从“/src”中删除三个单独的标头，并在我的实现文件（位于“/src”中）中使用“/include”中的一个公共标头。在编译期间，您只需正确设置包含路径即可使其正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T19:50:04.700

您可以将其设为 lib 或 dll，并且用户只会调用公共 API，如果您想为用户提供标头，则可以要求用户包括 /exportFolder 中的所有内容。或如先前评论中所述。或者就像你所做的那样，那个大标题就足够了。除非某些相关类发生更改，否则您不会修改它。这是正常的。

# excel - Excel：将选择移动到特定列中的下一个空白行，并按日期和类型枚举选择

> ID：14506312
> 
> 赞同：0
> 
> 时间：2013-01-24T16:39:38.820
> 
> 标签：excel, vba

VBA 新手，所以要温柔。

我有 7 列，A:H。第一列是唯一的数字标识符（从 0 开始，每次我通过此宏粘贴新选择时都应该增加）。第二列是日期，提示后手动输入。

我希望能够突出显示一系列单元格，激活宏，然后宏移动突出显示的数据并将其粘贴到 C 和 I 列之间的下一个可用空间块中。开始时，宏会提示一个对话框，询问用户日期。我希望在选择中的每个单元格沿 B 列（在下一个空单元格中）的每个点输入此日期。

以下是列现在的格式：http: [//i.imgur.com/7ytAnr9.png](http://i.imgur.com/7ytAnr9.png)

然后，对于选择中的每个单元格，我希望它与数字 ID 相关联。因此脚本将查看 A 列中的最后一个数字，将其添加到该数字上，然后将其粘贴到当前选择的每个单元格中。

这是我的代码，但由于我是新手，所以它完全被破坏了。

对于对话框：

```
Sub SuperMacro()

    Dim c As Object
    Dim dateManager As String
    dateManager = InputBox(Prompt:="Enter the Date for Selection", _
          Title:="Date Manager", Default:="1/24/2013")

    If strName = "Your Name here" Or _
        strName = vbNullString Then
        Exit Sub
    End If

    For Each c In Selection
        Range("A1").End(xlDown).Offset(1, 0).Select  'Paste the date for each cell in selection
        ActiveSheet.Paste
    Next c

     'Attempt to move all date from selected area to next available chunk of space between C1 and H1\.  
     Selection.Copy
     Range("C1:H1").End(xlDown).Offset(1, 0).Select
     ActiveSheet.Paste

End Sub 
```

编辑：想出了解决 ID 枚举问题和列移动的解决方案：

```
Sub CopyTest()

    Dim a As Range, b As Range
    Dim value As Integer

    Selection.Copy
    Set a = Selection
    Range("B1:H1").End(xlDown).Offset(1, 0).Select
    ActiveSheet.Paste

    value = (Range("A1").End(xlDown)) + 1
    For Each b In a.Rows
        Range("A1").End(xlDown).Offset(1, 0).Select
        ActiveCell.value = value
    Next

End Sub 
```

让我知道是否有更有效的方法来做到这一点。

自己为他人找到了解决方案：

子超宏()

```
Dim a As Range, b As Range
Dim currentID As Integer

Set a = Selection
Selection.Cut Range("C1:I1").End(xlDown).Offset(1, 0) 'Pastes to appropriate column

currentID = Range("A1").End(xlDown).Value

For Each b In a.Rows
    Range("A1").End(xlDown).Offset(1, 0) = currentID + 1
    Range("B1").End(xlDown).Offset(1, 0) = InputBox("Enter Date", "Date Helper")
Next b 
```

结束子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T17:32:34.667

这是我找到的答案：

```
Dim a As Range, b As Range
Dim currentID As Integer

Set a = Selection
Selection.Cut Range("C1:I1").End(xlDown).Offset(1, 0) 'Pastes to appropriate column

currentID = Range("A1").End(xlDown).Value

For Each b In a.Rows
    Range("A1").End(xlDown).Offset(1, 0) = currentID + 1
    Range("B1").End(xlDown).Offset(1, 0) = InputBox("Enter Date", "Date Helper")
Next b

End Sub 
```

# jquery - 来自 LinkBut ton 的 JQuery 弹出窗口

> ID：14506313
> 
> 赞同：0
> 
> 时间：2013-01-24T16:39:39.263
> 
> 标签：jquery, asp.net, html, vb.net

我有以下使用 JQuery 框架和 ASP.NET (VB) 的代码。

基本上下面的代码片段在asp页面上，并且在您单击超链接/按钮然后弹出窗口出现之前是隐藏的，下面是隐藏的弹出代码，我知道它有效：

```
<!--HIDDEN POPUP 1 BEGIN-->
<div class="ui-popup-screen ui-overlay-a ui-screen-hidden" id="popupDialog1-screen">    </div>
<div class="ui-popup-container pop ui-popup-hidden" id="popupDialog1-popup"><div data-role="popup" id="popupDialog1" data-overlay-theme="a" data-theme="c" style="max-width:400px;" class="ui-corner-all ui-popup ui-body-c ui-overlay-shadow" aria-disabled="false" data-disabled="false" data-shadow="true" data-corners="true" data-transition="none" data-position-to="origin" data-dismissible="true">
        <div data-role="header" data-theme="a" class="ui-corner-top ui-header ui-bar-a" role="banner">
            <h1 class="ui-title" role="heading" aria-level="1">Export Data</h1>
        </div>
        <div data-role="content" data-theme="d" class="ui-corner-bottom ui-content ui-body-d" role="main">
            <h3 class="ui-title">Export Data</h3>
            <asp:HiddenField ID="hidDataName" runat="server" />
            <p>Choose one of the formats below to export the data to.</p>
                <div data-role="controlgroup" data-type="horizontal">
                    <asp:LinkButton ID="btnExcel" runat="server" data-role="button"><asp:Image ID="imgExcel" runat="server" ImageUrl="~/images/Excel.ico" Width="50px" Height="50px" />Excel</asp:LinkButton>
                    <asp:LinkButton ID="btnPDF" runat="server" data-role="button"><asp:Image ID="imgPDF" runat="server" ImageUrl="~/images/PDF.ico" Width="50px" Height="50px" />PDF</asp:LinkButton>
                    <asp:LinkButton ID="btnWord" runat="server" data-role="button"><asp:Image ID="imgWord" runat="server" ImageUrl="~/images/Word.ico" Width="50px" Height="50px" />Word</asp:LinkButton>
                    <asp:LinkButton ID="btnCSV" runat="server" data-role="button"><asp:Image ID="imgCSV" runat="server" ImageUrl="~/images/CSV.ico" Width="50px" Height="50px" />CSV</asp:LinkButton>
                </div>      
        </div>
</div></div>
<!--HIDDEN POPUP 1 END--> 
```

现在我有下面的链接，它可以毫无问题地打开弹出窗口：

```
<a href="#popupDialog1"  data-rel="popup" data-position-to="window" data-role="button" data-inline="false" data-transition="pop" data-corners="true" data-shadow="true" data-iconshadow="true" data-wrapperels="span" aria-haspopup="true" data-theme="j" aria-owns="#popupDialog1" class="ui-btn ui-shadow ui-btn-corner-all ui-btn-hover-j ui-btn-up-j">
<span class="ui-btn-inner"><span class="ui-btn-text">Approve All</span></span></a> 
```

但是我希望能够在单击上述按钮时运行一些代码，我尝试使用 LinkBut​​ton 但是我无法显示弹出窗口。我想运行一些代码的原因是我需要知道页面上的哪个按钮请求了弹出窗口。

我希望这有点道理。

任何帮助表示赞赏。

谢谢，史蒂夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T17:28:09.033

我认为您可以通过以下两种方式之一来解决它。

1.  使用 jQuery 处理点击事件。
2.  在控件上使用 OnClientClick 事件。
3.  在链接按钮上使用 data-rel 属性。

选项1：

设置 ClientIDMode="Static"，在我看来最简单，或者在 javascript 中使用 control.ClientID（如下所示）。这确保 jQuery 代码将在您想要的控件上执行。编写 jQuery 代码并运行您的代码。

```
<script>
    $(document).ready(function() {

         $("#btnExcel").click(function() {
             $("#popupDialog1-screen").popup();
         }

    });
</script> 
```

或者

```
<script>
    $(document).ready(function() {

         $("#<%= btnExcel.ClientID %>").click(function() {
             $("#popupDialog1-screen").popup();
         }

    });
</script> 
```

选项 2：

```
 <asp:LinkButton ID="btnExcel" runat="server" OnClientClick="ExcelClick();" 
data-role="button"><asp:Image ID="imgExcel" runat="server" 
ImageUrl="~/images/Excel.ico" Width="50px" Height="50px" />
Excel</asp:LinkButton> 
```

...

```
<script>
     function ExcelClick() {
         $("#popupDialog1-screen").popup();
     }
</script> 
```

选项 3：

```
<asp:LinkButton ID="btnExcel" runat="server" data-rel="popup">
    <asp:Image ID="imgExcel" runat="server" ImageUrl="~/images/Excel.ico" 
       Width="50px" Height="50px" />Excel
</asp:LinkButton> 
```

笔记：

在您在上面放置的代码中，代码在插件运行时自动初始化（jQuery Mobile）。由于您想从链接按钮调用它，您需要将 data-rel 属性添加到链接按钮，或者您需要像我在上面在选项 1 和 2 中所做的那样手动调用对话框。请参阅 jQuery Mobile[文档](http://jquerymobile.com/test/docs/pages/popup/)以获取更详细的解释。

从文档中：

> 调用弹出插件 这个插件将在任何包含属性 data-role="popup" 的 div 的页面上自动初始化。但是，如果需要，您可以直接在任何选择器上调用弹出插件，就像任何 jQuery 插件一样，并以编程方式使用弹出选项、方法和事件 API：
> 
> $("#myPopupDiv").popup();

您需要测试代码以确保我得到了正确的 div id，因为我没有机会。

希望这可以帮助。

韦德

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T19:29:47.953

大家感谢您的帮助，我在 Wade73 的帮助下解决了问题。

我已将下面的代码添加到 asp.net 链接按钮的单击事件中。

```
Page.ClientScript.RegisterStartupScript(Me.GetType(), "MyScript", "$(function () {$('#popupDialog1').popup('open');});", True) 
```

这会导致在我的事件触发后显示弹出窗口。

再次感谢。

# javascript - 如何使用 Java Script 从属性文件中读取值？

> ID：14506315
> 
> 赞同：0
> 
> 时间：2013-01-24T16:39:43.110
> 
> 标签：javascript, velocity

我在通过网络应用程序使用的速度脚本中添加了文本字段和按钮。当 web 应用程序启动时，将读取 start.properties 文件。有一个属性： debug_on 可以取两个值 0 或 1。

所以我想根据 debug_on 值显示文本字段和按钮。如果我没记错的话，它可以通过 javascript 在速度脚本中完成（我不是 JavaScript 专家），但我需要获取属性值才能进一步移动。

我怎样才能实现它？

*更新*

最后嵌入主要 GWT (Java) 代码的 Velocity 脚本示例：

```
<!--doctype head declaration-->

   <head>
      <meta http-equiv="content-type" content="text/html; charset=UTF-8">
      <title>Web App</title>
      <style>
        <!-- styles -->
      </style>
      <link rel="stylesheet" href="/css/webapp.css" type="text/css"/>
      <meta name='gwt:module' content='$uri'>
    </head>
    <body>
        <script language="javascript" src="/$uri/com.myproject.gwt.main.nocache.js"></script>
        <!-- TextField and button are located here -->
        <table style="width: 300px; height: 100px;" class="gwt-DialogBox" cellpadding="0" cellspacing="5">
            <!-- some other part of a page tha will be persistent through all GWT pages -->
         </table>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T16:53:30.030

Velocity 在服务器上运行，JavaScript 在客户端上运行，并且无法访问服务器的任何文件。

您*可以*使用 Velocity 在 JavaScript 块中设置值并让 JS 函数使用这些值。

```
<script type='text/javascript'>
var startValue = '$debug.value';
</script> 
```

# php - 为什么 Simple HTML DOM Parser 不能通过某些站点？

> ID：14506317
> 
> 赞同：0
> 
> 时间：2013-01-24T16:39:42.847
> 
> 标签：php, html, parsing, dom

**编辑：当我添加 error_reporting(-1); 我收到此错误消息：**

```
Notice: Trying to get property of non-object in /data/22/2/145/126/2960289/user/3282682/htdocs/add.php on line 106

Notice: Undefined offset: 0 in /data/22/2/145/126/2960289/user/3282682/htdocs/add.php on line 108 
```

我正在尝试使用 Simple HTML DOM Parser (http://simplehtmldom.sourceforge.net/) 来搜索站点。它在 localhost 上运行良好，但是当我将它上传到我的主机（网络解决方案）时，一些 url 不再给出任何结果。它发生在我从 file_get_html 切换到 str_get_html 时。我不得不这样做，因为主人。你知道有什么问题吗？对于脚本的外观，我很抱歉，但我是个新手......也许你有一些关于如何压缩它的提示？脚本如下所示：

```
<?php
session_start(); 
include("connect.php");

if (isset($_POST['done'])) {

    function getimg($url) {         
        $headers[] = 'Accept: image/gif, image/x-bitmap, image/jpeg, image/pjpeg';              
        $headers[] = 'Connection: Keep-Alive';         
        $headers[] = 'Content-type: application/x-www-form-urlencoded;charset=UTF-8';         
        $user_agent = 'Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)';         
        $process = curl_init($url);         
        curl_setopt($process, CURLOPT_HTTPHEADER, $headers);         
        curl_setopt($process, CURLOPT_HEADER, 0);         
        curl_setopt($process, CURLOPT_USERAGENT, $user_agent);         
        curl_setopt($process, CURLOPT_TIMEOUT, 30);         
        curl_setopt($process, CURLOPT_RETURNTRANSFER, 1);         
        curl_setopt($process, CURLOPT_FOLLOWLOCATION, 1);         
        $return = curl_exec($process);         
        curl_close($process);         
        return $return;     
    } 

    $imgurl = $_POST['finalimg'];
    $random = substr(number_format(time() * rand(),0,'',''),0,30);
    $imagename= basename($random.".jpg");
    if(file_exists('./upload/'.$imagename)){continue;} 
    $image = getimg($imgurl); 
    file_put_contents('upload/'.$imagename,$image);

    $finalurl = $_POST['finalurl'];
    $description = $_POST['description'];
    $titlen = $_POST['title'];
    $pricen = $_POST['price'];

    $sql = "INSERT INTO samples(description, name, productUrl, imageUrl, price)
        VALUES('$description', '$titlen', '$finalurl', '$imagename', '$pricen')";
    mysql_query($sql);

        // Skickar vidare
        header("Location: collection.php?id={$_SESSION['sess_id']}");
        exit;

}

include("head.php");
?>

<div class="content add-content">

    <div class="header">
        <h1>Add your picture</span></h1>
    </div>

    <?php

    if (isset($_POST['submit'])) {

    require('DOM/simple_html_dom.php');
    require('DOM/example/url_to_absolute.php');

    $url = $_POST['url'];

    $curl = curl_init(); 
    curl_setopt($curl, CURLOPT_URL, $url);  
    curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);  
    curl_setopt($curl, CURLOPT_CONNECTTIMEOUT, 10);  
    $str = curl_exec($curl);  
    curl_close($curl);  

    $html = str_get_html($str);

    foreach($html->find('img') as $element) {

        $linktoimg = url_to_absolute($url, $element->src);

        $ch = curl_init();
        curl_setopt ($ch, CURLOPT_URL, $linktoimg);
        curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);

        $contents = curl_exec($ch);
        curl_close($ch);

        $new_image = ImageCreateFromString($contents);
        imagejpeg($new_image, "temp.jpg",100);

    $size = getimagesize("temp.jpg");

        // width and height

        $width = $size[0];
        $height = $size[1];

        echo $linktoimg . " Height: " . $height . " Width: " . $width . "<br />";

        if ($height >= 200) {

        $title1 = $html->find(".product_title");
        $title11 = $title1[0]->plaintext;
        $title2 = $html->find(".product-title");
        $title22 = $title2[0]->plaintext;
        $title3 = $html->find(".product_name");
        $title33 = $title3[0]->plaintext;
        $title4 = $html->find(".product_name");
        $title44 = $title4[0]->plaintext;
        $title5 = $html->find("h1");
        $title55 = $title5[0]->plaintext;

        if ($title55 != "") {
            $title = $title55;
        }

        if ($title44 != "") {
            $title = $title44;
        }

        if ($title33 != "") {
            $title = $title33;
        }

        if ($title22 != "") {
            $title = $title22;
        }

        if ($title11 != "") {
            $title = $title11;
        }

        $desc1 = $html->find("p .product_description");
        $desc11 = $desc1[0]->plaintext;
        $desc2 = $html->find("p .product-description");
        $desc22 = $desc2[0]->plaintext;
        $desc3 = $html->find("p .description");
        $desc33 = $desc3[0]->plaintext;
        $desc4 = $html->find(".product-description");
        $desc44 = $desc4[0]->plaintext;
        $desc5 = $html->find(".product_description");
        $desc55 = $desc5[0]->plaintext;
        $desc6 = $html->find(".description");
        $desc66 = $desc6[0]->plaintext;

        if ($desc66 != "") {
            $desc = $desc66;
        }

        if ($desc55 != "") {
            $desc = $desc55;
        }

        if ($desc44 != "") {
            $desc = $desc44;
        }

        if ($desc33 != "") {
            $desc = $desc33;
        }

        if ($desc22 != "") {
            $desc = $desc22;
        }

        if ($desc11 != "") {
            $desc = $desc11;
        }

        $price1 = $html->find(".product_price");
        $price11 = $price1[0]->plaintext;
        $price2 = $html->find(".product-price");
        $price22 = $price2[0]->plaintext;
        $price3 = $html->find(".price");
        $price33 = $price3[0]->plaintext;
        $price4 = $html->find("#product_price");
        $price44 = $price4[0]->plaintext;
        $price5 = $html->find("#product-price");
        $price55 = $price5[0]->plaintext;
        $price6 = $html->find("#price");
        $price66 = $price6[0]->plaintext;
        $price7 = $html->find(".product_price_details");
        $price77 = $price7[0]->plaintext;
        $price8 = $html->find(".price-red");
        $price88 = $price8[0]->plaintext;

        if ($price88 != "") {
            $price = $price88;
        }

        if ($price77 != "") {
            $price = $price77;
        }

        if ($price66 != "") {
            $price = $price66;
        }

        if ($price55 != "") {
            $price = $price55;
        }

        if ($price44 != "") {
            $price = $price44;
        }

        if ($price33 != "") {
            $price = $price33;
        }

        if ($price22 != "") {
            $price = $price22;
        }

        if ($price11 != "") {
            $price = $price11;
        }

            ?>

            <form action="add.php" method="post">
                <div class="add-wrapper">
                    <div style="font-weight: bold; font-size: 18px; margin-bottom: 20px; margin-top: -40px;">Is this a good picture?</div>
                    <div class="add-window">
                        <img src="timthumb.php?src=<?php echo $linktoimg; ?>&zc=3&h=432&w=500" style="border: 1px solid #000;" />
                    </div>

                </div>
                <input type="hidden" name="finalurl" value="<?php echo $_POST['url']; ?>">
                <input type="hidden" name="finalimg" value="<?php echo $linktoimg; ?>">
                <input type="hidden" name="title" value="<?php echo $title; ?>">
                <input type="hidden" name="description" value="<?php echo $desc; ?>">
                <input type="hidden" name="price" value="<?php echo $price; ?>">
                <input type="submit" value="" class="submit" name="done" style="margin-top: 40px;">
            </form>

            <?php
            echo $title . "<br /><br />";
            echo $desc . "<br /><br />";
            echo $price;
        break;

        }

    }

    } else {

    ?>

    <form action="add.php" method="post">

    <div class="add-url">
        <input type="text" name="url" class="biginput" placeholder="Paste the link...">
        <input type="submit" class="bigsubmit" value="" name="submit">
    </div>

    </form>

    <?php

    }

    ?>

</div>

<?php
include("feet.php");
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T20:17:06.353

**不要接受这个作为答案，因为它不是**。

你可以缩短

```
$price1 = $html->find(".product_price");
$price11 = $price1[0]->plaintext;
$price2 = $html->find();
$price22 = $price2[0]->plaintext;
$price3 = $html->find();
$price33 = $price3[0]->plaintext;
$price4 = $html->find();
$price44 = $price4[0]->plaintext;
$price5 = $html->find();
$price55 = $price5[0]->plaintext;
$price6 = $html->find();
$price66 = $price6[0]->plaintext;
$price7 = $html->find();
$price77 = $price7[0]->plaintext;
$price8 = $html->find();
$price88 = $price8[0]->plaintext;

if ($price88 != "") {
    $price = $price88;
}

if ($price77 != "") {
    $price = $price77;
}

if ($price66 != "") {
    $price = $price66;
}

if ($price55 != "") {
    $price = $price55;
}

if ($price44 != "") {
    $price = $price44;
}

if ($price33 != "") {
    $price = $price33;
}

if ($price22 != "") {
    $price = $price22;
}

if ($price11 != "") {
    $price = $price11;
} 
```

到以下：

```
$selectors = array(
    ".product_price",
    ".product-price",
    ".price",
    "#product_price",
    "#product-price",
    "#price",
    ".product_price_details",
    ".price-red"
);

foreach ($selectors as $selector) {
    $selectorPrice = $html->find($selector, 0)->plaintext;
    if (!empty($selectorPrice)) {
        $price = $selectorPrice;
        break;
    }
} 
```

编码时要记住的一件好事是，如果您的代码在几行看起来相同，那么它很可能能够缩短它（并节省性能/提高理解）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T20:08:38.287

一些托管服务提供商有一个安全选项卡，您可以在其中为传出连接设置允许的 IP。这主要是出于安全原因，这与某些用户无法升级或检查 Joomla 升级的原因相同，Joomla 尝试连接到外部站点检查更新但被服务器阻止。

这是 Hepsia 控制面板上允许的 IP 传出连接选项卡的示例：

![从 Hepsia 传出的允许 IP 示例](../Images/f472b695217f7a962aa22e07ef3bf967.png)

如果你有这样的东西，你需要手动添加受信任的 url，添加它们后，服务器应该让你访问它们

# jquery - 将 JSON 发送到 fullcalendar 中的事件，我做错了什么

> ID：14506318
> 
> 赞同：0
> 
> 时间：2013-01-24T16:39:44.077
> 
> 标签：jquery, json, symfony

嗨，我想将带有事件的数据发送到我的模板，我正在使用 jquery fullcalendar 我有控制器

```
$result = $query->getArrayResult();
$serializer = $this->get('jms_serializer');
$json = $serializer->serialize($result, 'json');
return $this->render('SurgeryPatientBundle:VisitsCalendar:visitscalendar.html.twig',array('events'=>$json ,'content_type' => 'application/json')); 
```

在我的模板中，我有

```
<meta  content="{{content_type}}" http-equiv="Content-Type" >   </meta>
events: {{events}} 
```

当我执行这个控制器时，JSON 值看起来像这样（我做了距离，你会看到差异）

> [{"id":1,"date":"2013-01-02T00:00:00+0100&

和错误 Uncaught SyntaxError:Unexpected token{ 。当我将模板更改为

```
events: {{events|raw}} 
```

我得到正确的数据

```
[{"id":1,"date":"2013-01-02T00:00:00+01 
```

但是我在 fullcalendar.min.js 中遇到了那种错误

```
Uncaugt TypeError: Cannot call method 'replate of undefinde" 
```

如果我将开始日期设置为 2013-01-24T15:25:00+0100 那么它可以工作

我做错了什么？对不起我的英语不好

编辑：它可能不起作用，因为 eventObject 中没有标题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T16:46:29.050

这就是它对我有用的方式。

树枝内部：

```
 {% set events %}
            {% render 'MyBundle:MyController:getEventsForCalendar' %}
        {% endset %}

        events = {{ events|raw }};

        var selector = '#calendar';
        $(selector).fullCalendar({
            ...
            events: events
        }); 
```

我的`getEventsForCalendarAction()`：

```
public function getEventsForCalendarAction()
{
    $events = EventQuery::create()
        ->find();

    $items = array();
    /** @var $event Event */
    foreach ($events as $event) {
        $item['title'] = $event->getTitle();
        $item['startY'] = $event->getStartAt('Y');
        $item['startM'] = $event->getStartAt('m') - 1;
        $item['startD'] = $event->getStartAt('d');
        $item['endY'] = $event->getEndAt('Y');
        $item['endM'] = $event->getEndAt('m') - 1;
        $item['endD'] = $event->getEndAt('d');
        $item['url'] = $this->get('router')->generate('event_page', array('id' => $event->getId()));

        $items[] = $item;
    }

    return $this->render('MyBundle:MyController:myTemplate.html.twig', array(
        'items' => $items
    ));
} 
```

我的`myTemplate.html.twig`：

```
[
{% for item in items %}
    {
        title: '{{ item.title }}',
        start: new Date({{ item.startY }}, {{ item.startM }}, {{ item.startD }}),
        end: new Date({{ item.endY }}, {{ item.endM }}, {{ item.endD }}),
        url: '{{ item.url }}'
    }{% if loop.last %}{% else %},{% endif %}
{% endfor %}
] 
```

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-23T16:02:42.243

而不是`events: {{events|raw}}`，尝试`events: {{events|safe}}`。这对我有用。

# jquery - 如何选择具有多个类的跨度并放置在锚点内？

> ID：14506319
> 
> 赞同：0
> 
> 时间：2013-01-24T16:39:47.633
> 
> 标签：jquery, anchor, html

我处于需要根据应用于它的类将单击事件绑定到跨度（放置在具有多个类的 achor 内）的情况。

**例如：**

更新：添加了html，例如下面

```
<div class="c0 c">
    <a class="c1 c2">
    <span class="c3 c4"></span>Anchor_Text
    </a>
</div> 
```

现在我正在绑定一个点击事件，如下所示：

```
$('span.c3.c4').click(function (e) { alert("clicked!"); }); 
```

上面的 jQuery 代码不起作用。但是，如果我使用锚上的类来绑定点击事件，它就可以工作。请看下面：

```
$(.c1').click(function (e) { alert("clicked!"); });

$(.c2').click(function (e) { alert("clicked!"); }); 
```

任何帮助将不胜感激！

更新：现在请在 Q 中找到更新的 html 示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T16:41:52.177

应该像这样选择多个类：

```
$('span.c3.c4').parents('a').click(function (e) { alert("clicked!"); }); 
```

在此处查看工作演示 > [http://jsfiddle.net/JeG3A/](http://jsfiddle.net/JeG3A/)

# c# - 在抛出点记录异常并捕获调用堆栈

> ID：14506323
> 
> 赞同：1
> 
> 时间：2013-01-24T16:39:59.387
> 
> 标签：c#, exception, log4net

假设我有一些这样的应用程序代码：

```
public void DoSomething()
{
    if (SomethingBad)
        throw new SomethingBadException("You did something bad");

    // Keep going...
} 
```

我正在使用 log4net，理想情况下我想记录该异常，但需要注意以下几点：

*   我现在想记录异常，而不是依赖调用者来记录它
*   我想使用此类拥有的 Logger 记录异常，以便记录器名称正确
*   我不希望SomethingBadException 了解日志记录，因为有时我想记录这种特定的异常类型，而有时我不想。我还想对内置异常类型使用相同的模式，例如 NotSupportedException
*   我想要一个可重用的模式，其中异常/日志语句不太复杂，因为我将有很多这样的。如果这涉及创建一个可以完成大部分工作的实用程序类，那很好。
*   我想记录*包括*调用堆栈在内的异常，这意味着它必须在抛出后记录。在构造异常之后但在它被抛出之前记录它，在日志输出中给我一个空的调用堆栈。

我已经能够编写一些实用程序代码来完成大多数项目符号，但是最后一个涉及捕获调用堆栈的代码让我望而却步。

有没有办法完成所有这些？我愿意编写自定义 log4net 扩展。如果有帮助，我还使用 Ninject 的 log4net 扩展来构建记录器。

我在吠叫错误的树吗？有没有另一种方法可以让我到达我想去的地方？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T16:51:40.870

在寻找一种简单的方法来消除评论中提到的额外框架问题时，我遇到了 Environment.StackTrace。这可能更适合你想要的。

原始答案如下。

不知道 log4net，但我希望像下面这样的东西会做你想要的。

```
void ThrowLoggedException<T>() where T : Exception
{
    try
    {
        throw new T("You did something bad");
    }
    catch (Exception ex)
    {
        // Log event here.
        throw;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T16:42:37.243

使用 NLog - [http://nlog-project.org/](http://nlog-project.org/)

在更高级的 Log4j 样式输出布局中，它提供了很多关于要记录哪些数据的选项。

我将它与 Log2Console 结合使用来实时查看正在记录的内容。

# vba - 如何刷新幻灯片放映中的活动幻灯片？

> ID：14506324
> 
> 赞同：2
> 
> 时间：2013-01-24T16:39:59.070
> 
> 标签：vba, powerpoint

根据[我的最后一个问题](https://stackoverflow.com/questions/14503054/change-the-image-of-an-image-shape)，我得到了更改形状图像的正确代码。
不幸的是，这不会更新活动的演示文稿。如果我关闭演示文稿并重新启动它，图像会更改，但更改应该是直接可见的。

这是我更改图像的代码：

```
ActivePresentation.SlideShowWindow.View.Slide.Shapes("SolutionA_Image").Fill.UserPicture ("D:\User\SolutionWrong.jpg") 
```

我找到了一种更新演示文稿的方法，但这会让演示文稿闪烁。

```
ActivePresentation.SlideShowWindow.Height = ActivePresentation.SlideShowWindow.Height - 1
ActivePresentation.SlideShowWindow.Height = ActivePresentation.SlideShowWindow.Height + 1 
```

**编辑我尝试按照**[此处](http://answers.microsoft.com/en-us/office/forum/office_2003-customize/clicking-twice-on-command-button/21792aa0-4bd0-44d2-ae19-5365fe41baeb)
的建议刷新幻灯片，但这对我不起作用。

```
Dim lSlideIndex As Long
lSlideIndex = SlideShowWindows(1).View.CurrentShowPosition
SlideShowWindows(1).View.GotoSlide lSlideIndex 
```

**编辑 2**
我上传了我的文件：[下载](http://privat.kapistatistik.de/ChangeImage.zip)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T19:16:29.307

最后，我在[这篇博](http://www.pptalchemy.co.uk/PowerPoint_Screen%20_Refresh.html)文中找到了答案。它似乎是 PowerPoint 2007 中的一个错误。

此代码有助于修复错误：

```
Dim osld As Slide
'get current slide
Set osld = ActivePresentation.SlideShowWindow.View.Slide
'the next line adds the empty textbox and refreshs the slide
osld.Shapes.AddTextbox msoTextOrientationHorizontal, 1, 1, 1, 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-07T16:16:22.770

我也在我的 Power Point 中发现了这个错误，我将这一行添加到代码中并修复了这个错误

Application.SlideShowWindows(1).View.GotoSlide Me.SlideIndex

# c++-cli - 将 String^ 传递给 sql 命令

> ID：14506325
> 
> 赞同：0
> 
> 时间：2013-01-24T16:39:59.817
> 
> 标签：c++-cli

我正在处理 c++/cli 窗口表单我想从 textBox 获取字符串并将它们作为 sql 命令的一部分（我使用 mysql.h ），但我不能将此字符串与普通字符串组合。

我尝试将 String^ 作为 sql 命令，但它不能将 String^ 传递给查询函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T16:42:17.867

string^ 是 .net 字符串类型，必须转换为本机字符串。看看这个[问题](https://stackoverflow.com/questions/946813/c-cli-converting-from-systemstring-to-stdstring)的答案。

# c# - 从 iis 获取时间

> ID：14506331
> 
> 赞同：-4
> 
> 时间：2013-01-24T16:40:15.733
> 
> 标签：c#

我想使用 c# 使用 IIS 日志捕获用户的上次登录时间。

我有这样的条目：

```
 2013-01-24 00:01:00 ::1 GET /WebUI/Editors/CME/Views/TridionDashboard/TridionDashboard.aspx - 81 TRIDION\user123 ::1 Mozilla/5.0+(Windows+NT+6.1;+WOW64)+AppleWebKit/537.1+(KHTML,+like+Gecko)+Chrome/21.0.1180.89+Safari/537.1 200 0 0 48 
```

谁能告诉我在特定日期时间之后获取用户ID列表及其时间戳的查询..

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T19:23:58.197

有很多日志文件分析工具可以为您获取这些信息。您希望使用哪种语言？

请注意，该页面会被调用很多次，当有人从特定链接到页面或组件等登录到 Tridion 时，并不总是会调用该页面。

如果这就是您所需要的（虽然不支持），您可以考虑向该页面添加一个脚本，该脚本实际上将您需要的信息记录到数据库或其他东西中。最好还是考虑为它创建一个 GUI 扩展。

如果您确实必须使用日志文件，请查看以下有关使用 LINQ 查询日志文件的文章：http: [//www.developerfusion.com/article/84468/linq-to-log-files/](http://www.developerfusion.com/article/84468/linq-to-log-files/)

# javascript - 将 MySQL 限制参数转换为数字

> ID：14506334
> 
> 赞同：0
> 
> 时间：2013-01-24T16:40:26.713
> 
> 标签：javascript, mysql, rest

我对 MySql 数据库的 Rest 调用有问题。

我使用 JS 对象并通过使用 java 后端的 rest get 调用发送它。

```
 requestParams: {
        pageStart: 0,
        results: 10
    } 
```

我已经为此请求配置了查询

```
"get-users" : "SELECT * FROM ${_dbSchema}.${_table} LIMIT ${pageStart}, ${results}" 
```

但是 queryParams 在后端转换为字符串，在响应时我收到此错误

`{"error":500,"reason":"Internal Server Error","message":"DB reported failure executing query SELECT * FROM shema.user LIMIT ?, ? with params: {results=10, pageStart=0} error code: 1064 sqlstate: 42000 message: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ''0', '10'' at line 1"}`

我可以在 sql-query 中解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T18:49:02.570

从您的错误消息中：

> {"error":500,"reason":"Internal Server Error","message":"DB 报告执行查询失败 SELECT * FROM shema.user LIMIT ?, ? with params: {results=10, pageStart=0} 错误代码：1064 sqlstate：42000 消息：您的 SQL 语法有错误；请查看与您的 MySQL 服务器版本相对应的手册，以了解在第 1 行“0”、“10”附近使用的正确语法”}

似乎子句中的数值`LIMIT`被设置为字符串而不是数字，因为它们用单引号括起来，例如`''0', '10''`，从错误通知的摘录中，每个数字 (`0`和`10`) 是如何用单引号`'0'`和括起来的`'10'`。

# php - 拒绝用户mysql注入

> ID：14506336
> 
> 赞同：0
> 
> 时间：2013-01-24T16:40:27.607
> 
> 标签：php

> **可能重复：**
> [如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

如果用户输入直接插入到 SQL 查询中，则应用程序容易受到 SQL 注入的攻击，如下例所示：

```
$unsafe_variable = $_POST['user_input'];

mysql_query("INSERT INTO table (column) VALUES ('" . $unsafe_variable . "')"); 
```

那是因为用户可以输入类似的内容`value'); DROP TABLE table;--`，进行查询：

```
INSERT INTO table (column) VALUES('value'); DROP TABLE table;--') 
```

应该怎么做才能防止这种情况发生？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T16:42:39.110

利用`mysql_real_escape_string($_POST['data']);`

或者我建议改用`PDO`库

# javascript - 包括咖啡脚本生成的javascript？

> ID：14506337
> 
> 赞同：2
> 
> 时间：2013-01-24T16:40:29.277
> 
> 标签：javascript, coffeescript

我在 test.js 中有以下 Coffeescript

```
yo () -> console.log("yo") 
```

当通过 coffee -o public/javascripts/ -cw public/coffeescripts/ 编译时，我得到 public/javascripts/test.js：

```
// Generated by CoffeeScript 1.4.0
(function() {
  var yo;

  yo = function() {
    return console.log('yo');
  };

}).call(this); 
```

我正在尝试以通常的方式将其包含在 HTML 文件中：

```
<script src="/javascripts/test.js" type="text/javascript"></script>
<script type='text/javascript'>
  //<![CDATA[
  $(function() {
    alert('before yo');
    yo();
    alert('after yo');
  });
  //]]>
</script> 
```

但是我不断收到“未捕获的参考错误：未定义哟”。实际使用 Coffeescript 生成的 javascript 的过程是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T16:45:03.930

在您的 CoffeeScript 文件中，`yo`是一个局部变量。它不是全局变量。如果您想从另一个 JavaScript 文件或 HTML 文件中的 JavaScript 使用该变量，则需要创建`yo`一个全局变量。

您可以像这样在 CoffeeScript 文件中执行此操作：

```
yo = -> ...

# either
@yo = yo
# or
window.yo = yo 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T17:07:12.123

从您的 Coffeescript 生成的 Javascript 需要进行调整才能导出`yo`到调用上下文之外。

```
// Generated by CoffeeScript 1.4.0
(function(context) { // changed this line (note: context == 'this' which is being passed in at last line)
  var yo;

  yo = function() {
     return console.log('yo');
  };

  context.yo = yo; //export yo to the context.

}).call(this); 
```

通常，`this`您是否会看到人们传入`window`和/或`document`在网页上下文中使用代码时（而不是服务器端 Node.js 调用上下文）。

我更新了 Javascript，但您可以轻松使用“模块导出”习语，您可以在此处阅读更多信息 - [CoffeeScript 模块的模式](https://stackoverflow.com/questions/5211638/pattern-for-coffeescript-modules)

# java - 使用 Java 打印强制打印 HTML 的侵入性最小的方法？

> ID：14506339
> 
> 赞同：1
> 
> 时间：2013-01-24T16:40:33.873
> 
> 标签：java, html, printing, security

我正在为我的公司开发一个内部 Java Web 应用程序，我可以完全访问将使用该应用程序的每台机器，并且可以根据需要进行配置。部分要求是通过在 Web 应用程序中按下按钮将动态生成的 HTML 文件强制打印到配置为默认打印的打印机（无打印提示）。我正在努力满足的另一个可选要求是，这主要是独立于浏览器和操作系统的。

我有什么选择来实现这一目标？我知道由于安全限制，无法自动默认强制打印。我研究并使用了一些不同的选项，包括更改各种浏览器中的安全设置、运行带有打印服务器的签名小程序和本地机器设置（如 Windows 机器中的注册表更新）。

长话短说，我知道必须在机器上进行某种设置更新才能实现我的目标，但我正在尝试找到侵入性最小的解决方案，无需用户提示，也需要最少的设置更新.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T16:53:12.543

不知道你的目标是什么，但是：

*   对于 IE，[这个 vbscript](https://stackoverflow.com/questions/9213660/html-javascript-one-click-print-no-dialogs?rq=1)应该可以解决问题。
*   在 Firefox 上，应该将 about:config 中的设置`print.always_print_silent`和`print.show_print_progress`设置为 true 和 false。
*   对于 Chrome，我认为这可以通过使用`--kiosk --kiosk-printing`启动参数来实现。不过，它确实使整个应用程序在 Kiosk 模式下工作。
*   我不知道 Safari 解决方案。

如果您可以使用 PDF，那里有一个称为静默打印的选项（来源：[本手册](http://partners.adobe.com/public/developer/en/acrobat/sdk/AcroJSGuide.pdf)），可以让您在各种浏览器中进行静默打印。

此外，“如果它只是一个内部应用程序，那么您可以避免从浏览器打印，并直接从服务器将打印输出发送到离用户最近的打印机”，正如在[这个类似线程](https://stackoverflow.com/questions/21908/silent-printing-in-a-web-application)中评论的那样。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-02-16T15:53:16.593

一种（不是很优雅的）解决方案是通过单击按钮来调用 Web 服务。然后，该网络服务将在某些服务器机器上启动一个浏览器（例如，使用 Selenium）。浏览器将完全按照您的方式打开页面，然后输入“ctrl+p”和“enter”。您可以确保默认打印机是您需要的打印机，并且没有进一步的对话。我曾经为 PDFCreator（也是打印机）实现过这样的解决方案。在那里，您可以对其进行配置，使其不再询问任何问题。

# ormlite-servicestack - 具有 DB 默认值且没有指定值的 ormlite 列不会出现在 INSERT 语句中

> ID：14506342
> 
> 赞同：0
> 
> 时间：2013-01-24T16:40:50.027
> 
> 标签：ormlite-servicestack

是否有一个设置我可以用来让 ormlite 在执行插入时忽略具有 DB 定义的默认值的列并且我没有为该列提供值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T17:39:23.567

InsertOnly 完成这项工作

提供一个 API，在您不想插入每个字段的极少数情况下使用 Expression Visitor

db.InsertOnly(new Person { FirstName = "Amy" }, ev => ev.Insert(p => new { p.FirstName })); 插入“人”（“名字”）值（“艾米”）

# c# - ASP.NET 添加了额外的结束标记

> ID：14506352
> 
> 赞同：3
> 
> 时间：2013-01-24T16:41:28.240
> 
> 标签：c#, asp.net, html

> **可能重复：**
> [ASP.net 有效呈现元标记](https://stackoverflow.com/questions/5224995/asp-net-render-meta-tag-validly)

这是在我的 .aspx 文件中：

```
<meta name="viewport" runat="server" content="width=380,height=575" id="viewPort" /> 
```

这是在浏览器中呈现的 HTML 文件上显示的内容：

```
<meta id="viewPort" name="viewport" content="width=380,height=575"></meta> 
```

实际出现的内容不符合 HTML5。

知道为什么会发生变化吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T16:45:26.967

这种行为显然是 ASP.NET 设计的：

**解决方法 1：** 将以下代码添加到 page_load 事件中：

```
HtmlMeta keywords = new HtmlMeta();
keywords.Name = "keywords";
keywords.Content = "one two trhee;
Header.Controls.Add(keywords); 
```

请参阅：[ASP.net 有效呈现元标记](https://stackoverflow.com/questions/5224995/asp-net-render-meta-tag-validly)

**解决方法 2：**

```
protected internal override void Render(HtmlTextWriter writer)
{
    if (base.EnableLegacyRendering)
    {
        base.Render(writer);
    }
    else
    {
        writer.WriteBeginTag(this.TagName);
        this.RenderAttributes(writer);
        writer.Write(" />");
    }
} 
```

请参阅：[Asp.net 在 html 4.01 中错误地关闭了元标记](https://stackoverflow.com/questions/4298949/asp-net-closes-meta-tag-incorrectly-in-html-4-01)

# c# - 如何使用 Webapi 使用 Odata.Delta 修补可枚举

> ID：14506353
> 
> 赞同：0
> 
> 时间：2013-01-24T16:41:28.910
> 
> 标签：c#, asp.net-web-api, odata

我正在尝试使用 System.Web.Http.OData.Delta 在 ASP.NET Web API 服务中实现 PATCH 方法，但它似乎无法将更改应用于 IEnumerable 类型的属性。

这是我的代码：

```
public class Person
{
        [Required]
        public string Name { get; set; }

        public IList<Document> AdditionalDocuments { get; set; }

        public HomeAddress HomeAddress { get; set; }
}

public class HomeAddress
{
    public string StreetName { get; set; }
}

public class Document
{
    public string Value { get; set; }
} 
```

补丁是这样实现的：

```
[AcceptVerbs("PATCH")]
public void Patch(string id, Delta<Person> delta)
{
    var person = personRepository.GetById(id)
    delta.Patch(person);
} 
```

我的问题是，当我修补信息时，HomeAddress 和 AdditionalDocuments 被忽略了。我在这里找到了另一篇文章（[How do I patch enumerables with System.Web.Http.OData.Delta?](https://stackoverflow.com/questions/14294136/how-do-i-patch-enumerables-with-system-web-http-odata-delta)），但我无法实现该解决方案，因为我不知道如何内化 Delta 代码。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T19:19:55.577

Delta 旨在仅与 OData 格式化程序一起使用。有一个[错误](http://aspnetwebstack.codeplex.com/workitem/777)打开以使其与 json.net 格式化程序一起使用。

# resharper - 在添加方法时停止 Resharper 替换变量

> ID：14506366
> 
> 赞同：2
> 
> 时间：2013-01-24T16:42:17.150
> 
> 标签：resharper, code-completion

我有一行看起来像这样的代码......

```
Dim magicId as Int32 = data.Value("MagicId") 
```

哪里`data.Value("MagicId")`返回一个对象...

现在我想添加`Convert.ToInt32`它看起来像这样......

```
Dim magicId as Int32 = Convert.ToInt32(data.Value("MagicId")) 
```

但是当我在`data.Value("MagicId")`Resharper 替换数据之前开始输入时，给了我类似的东西。

```
Dim magicId as Int32 = Convert.Value("MagicId") '<--- WRONG 
```

改变这种行为的设置是什么？

# c# - 内容控件中的用户控件

> ID：14506374
> 
> 赞同：7
> 
> 时间：2013-01-24T16:42:33.310
> 
> 标签：c#, wpf

是否可以在 ContentControl 中插入一些 UserControl？

但我需要动态决定我需要插入哪个 UserControl（比如使用 DataTemplateSelector）。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-24T16:49:10.913

有可能的。你需要有一个`ContentControl`让我们说这样的：

```
<ContentControl Name="ContentMain"  Width="Auto" Opacity="1" Background="Transparent" ></ContentControl> 
```

然后你需要有你的不同`UserControl`，比如这两个：

```
<UserControl x:Class="MyNamespace.UserControl1"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" >
<Grid Margin="5,5,5,10" >
    <Label Name="labelContentOne" VerticalAlignment="Top" FontStretch="Expanded" />

</Grid> 
```

```
<UserControl x:Class="MyNamespace.UserControl2"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" >
<Grid Margin="5,5,5,10" >
    <Label Name="labelContentTwo" VerticalAlignment="Top" FontStretch="Expanded" />

</Grid> 
```

如果您想以动态方式更改它们，您只需以`ContentMain`编程方式更改 ContentControl 的内容：

```
// Initialize the content
UserControl1 u1 = new UserControl1();
ContentMain.Content = u1;

// Let's say it changes on a button click (for example)
private void ButtonChangeContent_Click(object sender, RoutedEventArgs e)
{
    UserControl2 u2 = new UserControl2();
    ContentMain.Content = u2;
} 
```

或多或少是这样的想法......;）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-24T16:58:28.727

是的，您可以将任何对象放入 中`ContentControl.Content`，但是根据决定您想要什么 UserControl 的内容，有多种方法可以完成此操作。

我个人最喜欢的是根据某些条件`DataTrigger`确定`ContentControl.ContentTemplate`

这是一个`ContentControl.Content`基于 ComboBox 的选定值的示例：

```
<DataTemplate DataType="{x:Type DefaultTemplate}">
    <TextBlock Text="Nothing Selected" />
</DataTemplate>
<DataTemplate DataType="{x:Type TemplateA}">
    <localControls:UserControlA />
</DataTemplate>
<DataTemplate DataType="{x:Type TemplateB}">
    <localControls:UserControlB />
</DataTemplate>

<Style TargetType="{x:Type ContentControl}" x:Key="MyContentControlStyle">
    <Setter Property="ContentTemplate" Value="{StaticResource DefaultTemplate}" />
    <Style.Triggers>
        <DataTrigger Binding="{Binding ElementName=MyComboBox, Path=SelectedValue}" Value="A">
            <Setter Property="ContentTemplate" Value="{StaticResource TemplateA}" />
        </DataTrigger>
        <DataTrigger Binding="{Binding ElementName=MyComboBox, Path=SelectedValue}" Value="B">
            <Setter Property="ContentTemplate" Value="{StaticResource TemplateB}" />
        </DataTrigger>
    </Style.Triggers>
</Style> 
```

# javascript - 日期选择器隐藏时隐藏标签

> ID：14506380
> 
> 赞同：0
> 
> 时间：2013-01-24T16:42:48.537
> 
> 标签：javascript, html, grails, datepicker, filtering

我在一个应用程序上有一个过滤器选项，它允许您选择一天“从”和“到”来帮助过滤掉我数据库中的事件。由于这不是我拥有的唯一过滤器，因此有一个下拉菜单可以选择您想要的过滤器。当您在日期选择器下拉菜单中时。选择日期的选项出现在两个文本字段框中。首次实施项目时，日期选择器字段没有标签。我分别在“From”和“To”框中添加了标签。

标签 for="startDate">发件人：标签

适当地使用“<label”“/label>”标签

这是我添加的简单代码。将自身附加到日期选择器元素“startDate”

现在，由于此选项根据用户是否要使用此过滤器而被隐藏/显示。该选项来来去去，但现在标签留在页面上。我认为在代码中处理日期选择器，并且我将标签附加到该元素。标签将与它一起显示/隐藏。

有什么明显的我遗漏或者只是不理解的东西吗？我是 javascript 和 html 的新手。

任何意见或帮助将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-24T21:27:11.483

如果使用 Mootools DatePicker，请尝试添加到 onSelect 函数：使用选择器获取特定标签，然后使用 .hide()。

# asp.net-mvc - 获取 UserId mvc 4 应用程序

> ID：14506384
> 
> 赞同：-1
> 
> 时间：2013-01-24T16:43:11.610
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我正在使用带有使用表单身份验证的帐户控制器的默认 ASP.NET MVC 4 项目。如何获取当前用户的用户 ID？我想在我的视图中显示它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T16:47:21.383

您可以使用以下代码：

```
MembershipUser user = Membership.GetUser(User.Identity.Name); 
```

谢谢，史蒂夫

# ios - 使用 SharedSingleton 给 NSInteger 赋值

> ID：14506389
> 
> 赞同：0
> 
> 时间：2013-01-24T16:43:24.950
> 
> 标签：ios, xcode

在我的 viewcontrollerA.h 我有：

```
@property (nonatomic, assign) NSInteger showCommentOrCreate;
+ (PhotoViewController *) sharedManager; 
```

在 viewcontrollerA.m 我使用：

```
PhotoViewController* sharedSingleton = [PhotoViewController sharedManager];
...(long)sharedSingleton.showCommentOrCreate...

+ (PhotoViewController *)sharedManager
{
static PhotoViewController *shaderManager = nil;
static dispatch_once_t onceToken;
dispatch_once(&onceToken, ^{
    shaderManager = [[PhotoViewController alloc] init];
});
return shaderManager;
} 
```

...找到整数的值。

在 viewcontrollerB 中，我导入 ViewcontrollerA.h，在 ViewcontorllerB.m 中，我将一个值赋予 showCommentOrCreate。

唯一的问题是它接缝我必须将值分配给整数两次才能更改。例如：

不起作用：

```
-(IBAction)addAnImageForCommenting:(id)sender{
PhotoViewController* sharedSingleton = [PhotoViewController sharedManager];
sharedSingleton.showCommentOrCreate = 2;

PhotoViewController* sharedSingleton2 = [PhotoViewController sharedManager];
sharedSingleton2.showCommentOrCreate = 2;

} 
```

不起作用：

```
-(IBAction)addAnImageForCommenting:(id)sender{

PhotoViewController* sharedSingleton2 = [PhotoViewController sharedManager];
sharedSingleton2.showCommentOrCreate = 2;

} 
```

作品：

```
- (void)rightSwipeHandle:(UISwipeGestureRecognizer*)gestureRecognizer {
for (UIImageView *imageView in imageArray)
{

    if (([imageView isKindOfClass:[UIImageView class]] && imageView.tag == ((UITapGestureRecognizer *)gestureRecognizer).view.tag))
    {

        // for(UIGestureRecognizer *gesture in [imageView gestureRecognizers]){
        //   if([gesture isKindOfClass:[UITapGestureRecognizer class]]){

        if (imageView.frame.size.height == 60){

            [UIView beginAnimations:nil context:NULL];
            [UIView setAnimationDuration:0.27];
            imageView.contentMode = UIViewContentModeScaleAspectFit;
            imageView.frame = CGRectMake( 20, imageView.frame.origin.y, 710, 200);
            [UIView commitAnimations];

            [imageView setImage:[UIImage imageNamed: @"Massages retina iPad.png"]];

            z = 200;

            for (MKMapView* map in mapViewArray) {
                if (imageView.tag == map.tag +1) {

                    [imageView addSubview:map];

                }
            }

        }else {

            /*[UIView beginAnimations:nil context:NULL];
            [UIView setAnimationDuration:0.27];
            imageView.contentMode = UIViewContentModeScaleAspectFit;
            imageView.frame = CGRectMake( 20, imageView.frame.origin.y, 710, 60);
            [UIView commitAnimations];

            [imageView setImage:[UIImage imageNamed: @"message small.png"]];*/

            z = 60;

            for (MKMapView* map in mapViewArray) {
                if (imageView.tag == map.tag +1) {

                    //[map removeFromSuperview];

                }
            }
        }

    } else if([imageView isKindOfClass:[UIImageView class]] && imageView.tag > ((UITapGestureRecognizer *)gestureRecognizer).view.tag){

        if (z == 200){

            [UIView beginAnimations:nil context:NULL];
            [UIView setAnimationDuration:0.27];
            imageView.frame = CGRectMake( 20, imageView.frame.origin.y +150, 710, imageView.frame.size.height);
            [UIView commitAnimations];

        }else {
            /*[UIView beginAnimations:nil context:NULL];
            [UIView setAnimationDuration:0.27];
            imageView.frame = CGRectMake( 20, imageView.frame.origin.y -150, 710, imageView.frame.size.height);
            [UIView commitAnimations];*/

        }
    }}

for (UIImageView *imageView in imageArray)
{

    if (([imageView isKindOfClass:[UIImageView class]] && imageView.tag == ((UISwipeGestureRecognizer *)gestureRecognizer).view.tag))
    {

[UIView transitionWithView:imageView duration:0.5
                   options:UIViewAnimationOptionTransitionFlipFromRight animations:^{
                       //imageView.image = secondImage;
                   } completion:^(BOOL f){

                       UIStoryboard *sb = [UIStoryboard storyboardWithName:@"PhotoViewControllerStoryboard" bundle:nil];
                       UIViewController *vc = [sb instantiateInitialViewController];
                       vc.modalTransitionStyle = UIViewAnimationOptionCurveEaseIn;
                       vc.modalPresentationStyle = UIModalPresentationFormSheet;
                       [self presentModalViewController:vc animated:YES];
                       vc.view.superview.frame = CGRectMake(15, 43, 735, 982);

                       PhotoViewController* sharedSingleton = [PhotoViewController sharedManager];
                       sharedSingleton.tagNumber = imageView.tag;
                       //NSLog(@"The tagNumber is: %ld", (long)sharedSingleton.tagNumber);
                       //sharedSingleton.showCommentOrCreate = 1;

                   }];

        PhotoViewController* sharedSingleton = [PhotoViewController sharedManager];
        sharedSingleton.tagNumber = imageView.tag;
        sharedSingleton.showCommentOrCreate = [NSNumber numberWithInt:1];
}}} 
```

如您所见，我将整数的值设置了两次，它有效，否则无效。如果没有，如果我以时间间隔调用代码两次，则设置正确的值。有任何想法吗？？

编辑：更新了我声称可以工作的代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T16:51:02.443

我认为问题来自于使用 int 作为原始变量，而不是 NSInteger，后者是一个完整的整数类。

为了解决这个问题，我的想法是分配 NSInteger 并使用它，但由于 NSInteger 不能那样工作，我建议使用 NSNumber ，因为它的行为完全像一个对象

```
 sharedSingleton.showCommentOrCreate = [NSNumber numberWithInt:1]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T20:18:04.573

我太傻了。我很抱歉。我什至没有意识到在分配 UIviewcontrollerA 后我正在设置 ViewcontrollerB 中的值，并且在 UIviewcontrollerA 中对该值的调用确实在视图中加载。这修复了它：

```
-(IBAction)addAnImageForCommenting:(id)sender{

PhotoViewController* sharedSingleton = [PhotoViewController sharedManager];
sharedSingleton.showCommentOrCreate = [NSNumber numberWithInt:2];

UIStoryboard *sb = [UIStoryboard storyboardWithName:@"PhotoViewControllerStoryboard" bundle:nil];
UIViewController *vc = [sb instantiateInitialViewController];
vc.modalTransitionStyle = UIViewAnimationOptionCurveEaseIn;
vc.modalPresentationStyle = UIModalPresentationFormSheet;
[self presentModalViewController:vc animated:YES];
vc.view.superview.frame = CGRectMake(15, 43, 735, 982);

} 
```

代替...

```
-(IBAction)addAnImageForCommenting:(id)sender{

UIStoryboard *sb = [UIStoryboard storyboardWithName:@"PhotoViewControllerStoryboard" bundle:nil];
UIViewController *vc = [sb instantiateInitialViewController];
vc.modalTransitionStyle = UIViewAnimationOptionCurveEaseIn;
vc.modalPresentationStyle = UIModalPresentationFormSheet;
[self presentModalViewController:vc animated:YES];
vc.view.superview.frame = CGRectMake(15, 43, 735, 982);

PhotoViewController* sharedSingleton = [PhotoViewController sharedManager];
sharedSingleton.showCommentOrCreate = [NSNumber numberWithInt:2];

} 
```

...再次对不起

# sql - 在 Teradata 中查找一周的开始和结束日期（SQL）

> ID：14506391
> 
> 赞同：1
> 
> 时间：2013-01-24T16:43:29.773
> 
> 标签：sql, teradata

我正在进行数据转换，我需要获取给定一周的开始和结束日期。

我的来源将日期存储在单个`int`列`'year_wk'`中。

此列的示例是

201201 - 表示 2012 年的第一周 201005 - 表示 2010 年的第五周

我想以标准`mm/dd/yyyy`格式获取给定一周的开始和结束日期。

所以 201201 会给我类似 2012 年 1 月 1 日和 2012 年 1 月 7 日的信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T17:51:28.100

它不会很漂亮，也可能不是非常有效，但您可以利用视图`SYS_CALENDAR.CALENDAR`。我特意在示例中使用，这样您就可以使用作为所有 Teradata 安装的默认数据库`SELECT *`的视图查看所有可用的属性：`SYS_CALENDAR.CALENDAR`

```
SELECT *
  FROM Sys_Calendar."CALENDAR"
 WHERE Year_of_Calendar = CAST(SUBSTRING('201201' FROM 1 FOR 4) AS INTEGER)
   AND Week_of_Year = CAST(SUBSTRING('201201' FROM 5 FOR 2) AS INTEGER)
UNION
SELECT *
  FROM  Sys_Calendar."CALENDAR"
 WHERE Year_of_Calendar = CAST(SUBSTRING('201005' FROM 1 FOR 4) AS INTEGER)
   AND Week_of_Year = CAST(SUBSTRING('201005' FROM 5 FOR 2) AS INTEGER); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T18:19:25.177

我不熟悉 Teradata，但这是 Oracle ISO 周查询，其中包含 2013 年全年的开始和结束日期。这应该适用于任何 SQL。对于非 iso 周，将周格式更改为 WW - 忘记在查询中将 mydate 重命名为 start_date：

```
SELECT mydate                               -- 1/1/2013 --
     , TRUNC(mydate, 'iw')                  wk_starts  
     , TRUNC(mydate, 'iw') + 7 - 1/86400    wk_ends
     , TO_NUMBER (TO_CHAR (mydate, 'IW'))   ISO_wk#_iw  
     , TRUNC(mydate, 'w')                   week_start_date
     , TRUNC(mydate, 'w') + 7 - 1/86400 AS  week_end_date
 FROM
 (
  SELECT TRUNC(SYSDATE, 'YEAR')-1 + LEVEL AS mydate  -- 11/1/2013 --
    FROM dual
  CONNECT BY LEVEL <= 
  (-- First day of next year - first day of curr year --
   SELECT TRUNC(ADD_MONTHS (SYSDATE, 12), 'Y')-TRUNC(SYSDATE, 'Y') "Num of Days"   
     FROM dual
  )
)
/

SQL>

START_DATE  WK_STARTS   WK_ENDS                ISO_WK#
------------------------------------------------------------------
1/1/2013    12/31/2012  1/6/2013 11:59:59 PM    1
1/2/2013    12/31/2012  1/6/2013 11:59:59 PM    1
...
...
1/7/2013    1/7/2013    1/13/2013 11:59:59 PM   2
1/8/2013    1/7/2013    1/13/2013 11:59:59 PM   2
...
...
1/14/2013   1/14/2013   1/20/2013 11:59:59 PM   3
1/15/2013   1/14/2013   1/20/2013 11:59:59 PM   3 
```

周数日历：[http ://www.epochconverter.com/date-and-time/weeknumbers-by-year.php](http://www.epochconverter.com/date-and-time/weeknumbers-by-year.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T17:17:18.103

下面是一些 SQL 代码，它将构建一个给定年份的开始和结束日期表。

如果您为所有相关年份构建此表，其余部分应通过 JOIN 语句完成

```
-- Create weekrange table
Create table Weekrange
(YearNo INT,
 WeekNo INT,
 StartDay DATETIME,
 EndDay DATETIME)
-- Populate first row
insert into WeekRange
select 2013,1, DateAdd(d,-DATEPART(dw,'1/1/2013'),'1/1/2013')+1 as FirstDay,null    -- Compute first day
update Weekrange set EndDay = DATEADD(D,6,StartDay)                                 -- Determine last day

-- Add next 52 rows
declare @id INT
set @id=2
while @id <=53
begin
    insert into Weekrange (YearNo,WeekNo) values (2013,@id)
    set @id=@id+1
    update Weekrange 
    set StartDay = DATEADD(D,1,xx.EndDay),
        EndDay = DATEADD(D,7,xx.EndDay)
    from 
    (select * from WeekRange ) xx
    where xx.weekno=weekrange.WeekNo-1
end 

select * from Weekrange 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-31T08:34:03.143

试图改进我的 SQL，这将是一个简单的灵魂：

```
 SELECT CALENDAR_DATE,DAY_OF_WEEK
 FROM SYS_CALENDAR.CALENDAR TERADATA
 WHERE SUBSTR(CAST((CAST(CALENDAR_DATE AS DATE FORMAT 'MMDDYYYY')) AS VARCHAR(8) ),5,4) = '2010'
AND WEEK_OF_YEAR='05' 
AND DAY_OF_WEEK IN (1,7)
ORDER BY CALENDAR_DATE 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-12T20:27:17.640

```
SELECT TD_WEEK_END (date) - 6 
```

这`TD_WEEK_END (date)`是周末的结束。只需从日期中减去 6 即可获得一周的开始。

注意：此答案集将始终返回星期日，因为星期日是一周的第一天。

# php - 从 CodeIgniter 多个子目录中删除“index.php”

> ID：14506394
> 
> 赞同：2
> 
> 时间：2013-01-24T16:43:42.907
> 
> 标签：php, .htaccess, codeigniter

我知道这已经被问过很多次了，但是以前的解决方案/答案不起作用。

我看过这些：

*   [从 URL 中删除 index.php - Codeigniter 2](https://stackoverflow.com/questions/5155333/remove-index-php-from-url-codeigniter-2)
*   [mod_rewrite 从 Codeigniter 的子目录中删除 index.php](https://stackoverflow.com/questions/10540524/mod-rewrite-to-remove-index-php-from-codeigniter-in-subdirectory)
*   [使用 htaccess 删除子目录中的 codeigniter index.php](https://stackoverflow.com/questions/6765883/using-htaccess-to-remove-codeigniter-index-php-in-a-subdirectory)

我过去曾成功使用过这些解决方案，但这次安装给我带来了问题。我认为这可能不仅仅是一个`.htaccess`问题。

**描述**

我的文件夹设置如下：`/home/~username~/public_html/~company~/index.php`. 我`$config['index_page']`的设置为`""`并且我的服务器启用了 mod_rewrite。我在用`CI version, 2.1.3`

该`.htaccess`文件与文件夹位于同一文件`application`夹中。

**问题**

`index.php`如果应用程序中断，我似乎无法从我的 URL 中删除。我尝试了很多很多`.htaccess`设置，包括 CI 网站上提供的设置。

我很茫然。如果它不是我的`.htaccess`文件，它会是什么？如果是我的`.htaccess`文件，我做错了什么？我最近的尝试是：

```
RewriteEngine On
RewriteBase /
RewriteCond $1 !^(index\.php) [NC]    
RewriteRule ^(.*)$ /home/username/company/index.php/$1 [L] //absolute path
and
""
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ company/index.php/$1 [L] 
```

完整`apache`错误：

```
[Thu Jan 24 18:22:13 2013] [error] [client ip ] 
File does not exist: /home/username/public_html/company/home 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T18:08:06.647

将变量设置为空，如下所示。

`$config['index_page'] = '';`

尝试用这些参数`('AUTO', 'PATH_INFO', 'QUERY_STRING', 'REQUEST_URI', and 'ORIG_PATH_INFO')`一一替换以下变量

`$config['uri_protocol'] = 'AUTO';`

# android - SmartWatch startVibrator 处于 DIM 状态

> ID：14506395
> 
> 赞同：2
> 
> 时间：2013-01-24T16:43:43.413
> 
> 标签：android, sony, sony-smartwatch

我`startVibrator(0200, 0000, 1);`在一个`ControlExtension`. 它在`SmartWatch`不暗淡时工作，一旦`SmartWatch`暗淡，它就不会振动。这是正常的吗？我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T22:23:52.887

您可以保持屏幕状态打开，它会振动。这取决于您想通过振动实现什么，它是通知振动还是仅将其用于某种其他形式的游戏/用户交互。不过，这是通常的行为。

# javascript - 使用 jQuery remove() 添加项目。重新添加相同的项目时，将保留类更改

> ID：14506397
> 
> 赞同：1
> 
> 时间：2013-01-24T16:43:50.207
> 
> 标签：javascript, jquery, dom, removeclass, removeall

我的 HTML 中有一些元素完全由 jQuery 生成，然后在不再需要时将其删除。

这些方面的东西：

```
var div = $('<div/>').attr('id', 'addedItem');
$('body').append(div); 
```

例如，当关闭时我们这样做：

```
$('#addedItem').remove(); 
```

但是......在它的使用过程中，我们可能会改变它的类，`addedItem`因为它添加了另一个特性，例如，添加`tinyMCE`到一个`textArea`

```
$('#textAreaId').tinymce({ vars }); 
```

将富文本编辑器添加到文本区域（假设加载了所有正确的脚本），我在末尾添加了一个新行`tinymce()`：

```
$(applyTo).addClass('editorLoaded'); 
```

阻止代码尝试将编辑器添加到同一元素两次。

这一切都很可爱......但是......

如果我关闭此窗口并因此调用该行`$('#addedItem').remove();`，然后稍后（无需重新加载页面）我想重新添加到页面并再次显示，添加到元素的类仍然存在。

所以，简而言之。一个带有 ID 的元素被 jQuery`addedItem`添加到`body`jQuery 中，对其进行了处理，并获得了一个添加到它的类属性。使用 jQuery 完成后，将完全删除该元素。稍后，我们再次`addedItem`向`body`using jQuery 添加一个带有 ID 的新元素，它是一个新元素，但它保留了它在删除之前添加的 class 属性！

根据 jQuery DOCS`remove()`行为应该是：

> 除了元素本身，所有与元素关联的绑定事件和 jQuery 数据都将被删除。

我的意思是它应该删除使用 jQuery 以及数据等添加到元素中的任何类......也许我读错了，误解了，或者别的什么！

谁能帮我在浏览器内存/缓存/任何东西中删除这些元素和对它们的所有引用，以便我可以管理这个问题。

如果有帮助的话，jQuery 版本是 1.7.1

========== 编辑 > 添加更多代码 ================

以上概述了我的问题，然后是实际代码

```
// create a modal window with a top right X closer from any element
$.fn.makeModal = function (vars) {
    var theId = $(this).attr('id');
    var exists = false;
    try {
        if ($('#' + theId + '_wrap').length > 0) { // firstly check the element has already been "made modal"
            exists = true;
        };
    } catch (err) {
        exists = false;
    };

    if (!exists) { // if this is the first time
        var win = this;
        var h;
        var w;
        var persist;
        var alert;
        if (vars) {
            h = vars.height;
            w = vars.width;
            persist = vars.persist;
            alert = vars.alert;
        };
        if (typeof h == "string") {
            h = (h.replace('px', '') * 1); // clean out px if dimensions posted in px
        };
        if (typeof w == "string") {
            w = (w.replace('px', '') * 1); // clean out px if dimensions posted in px
        };
        var hRatio = 0.70;
        var wRatio = 0.5;
        var minW = 480;
        if (!h) { h = $(window).height() * hRatio }; // default case if no height passed
        if (!w) {
            w = $(window).width() * wRatio;
            minW = 480;
            if (w < minW) { w = minW };
        }; // default case if no width passed

// **** END BASIC VARIABLES

        var wrapper = $('<div/>').attr('id', theId + '_wrap').addClass('modalContainer').css({ 'top': ($(window).height() - h) / 2, 'left': ($(window).width() - w) / 2, 'width': w, 'height': h }); // create a wrapper for the main content
        var close = $('<span/>').addClass('closeModal').html('X').css({ 'z-index': getMaxZIndex() + 5 });

// creat  close button
        if (alert) {
            $(close).addClass('alert');
            $(wrapper).addClass('alert');
        } else {
            $(close).addClass('cross');
        };
        if (persist) {
            $(wrapper).addClass('persist');
        }; // persist variable allows you to determine whether to delete or simply hide element on close
        $(win).addClass('modalContent').css({ 'display': 'block', 'width': w - 20, 'height': h - 20 }).appendTo(wrapper);

        $('body').append(wrapper).opaqueBg();

        $(wrapper).prepend(close).fadeIn('fast').css({ 'z-index': getMaxZIndex() + 3 });
        $(close).modalCloser();

        $(document).on('keyup', function (e) {
            if (e.keyCode == 27) {
                closeModal(wrapper);
                $(document).unbind('keyup');
            };
        });
    } else {
        $('body').opaqueBg();
        $('#' + theId + '_wrap').fadeIn('fast') // .children().css({ 'display': 'block' });
    };
    // END OF MODAL WINDOWS
}; 
```

上面的 jQuery 函数使用任何动态创建的元素或其他方式创建一个模态窗口。

关闭等相关功能：

```
//  top right X closer actions
$.fn.modalCloser = function (callBack) {
    $(this).bind('click', function () {
        $(this).closest('div.modalContainer').fadeOut(function () {
            closeModal(this, callBack);
        });
    });
};
// close modal element by item
function closeModal(ele, callBack) {
    if (!ele) {
        ele = '.modalContainer'
    };
    if ($(ele).hasClass('noClose')) {
        alert("Please wait... we're working on something.");
    } else {
    $(ele).fadeOut(function () {
        var nextZ = getMaxZIndex('.modalContainer');
        if (nextZ > 0) {
            $('#screenBlank').css({ 'z-index': nextZ });
        } else {
            $('#screenBlank').fadeOut(function () { $(this).remove(); });
        };
        if (!$(this).hasClass('persist')) {
            $(this).remove();
        };
        if (callBack) {
            callBack();
        };
    });
    };
};
// end modal window controls

// **************************************************************************************************************************************************************** 

// create opaque background for modal window to sit on
$.fn.opaqueBg = function () {
    $('#screenBlank').remove();
    var z = getMaxZIndex() + 2;
    var sb = $('<div/>').attr('id', 'screenBlank').addClass('noPrint centreLoader').css({ 'display': 'none', 'position': 'absolute', 'text-align': 'center', 'z-index': z, 'background-color': 'rgba(10, 0, 0, 0.7)', 'width': '100%', 'height': $(document).height(), 'top': '0px', 'left': '0px' });
    $('body').prepend(sb);
    $(sb).fadeIn().bind('click', function () {
        closeModal('.modalContainer');
    });
};

// find the maximum z-Index of elements on the page, used to ensure tooltips are always shown above anything else
// note, this will only work if major containing elements have explicitly set z-index
function getMaxZIndex(ele) {
    if (!ele) {
        ele = "div";
    };
    var zIndexMax = 0;
    $(ele).each(function () {
        if ($(this).css('display') != "none") {
            var z = parseInt($(this).css('z-index'));
            if (z > zIndexMax) { zIndexMax = z };
        };
    });
    return zIndexMax;
};
// end finding maximum z-index 
```

因此，以上所有内容都是我项目中用于各种目的的通用功能集。

提示这篇文章的特定目的是在`tinymce`应用的模式窗口中创建一个文本区域，它的工作原理如下：

```
 $('#notePad .plus').on('click', function () {
        var h = $('<h2/>').html('Add Note');
        var txt = $('<textarea/>').attr('id', 'noteEditorContent').attr('name', 'newNote').css({ 'width': '100%', 'height': '400px' });
        var wrpper = $('<div/>').css({ 'width': '750', 'height': '380', 'margin': 'auto' }).append(txt);
        var button = $('<span/>').addClass('greenButton').html('Save').css({ 'float': 'right', 'margin': '40px 20px 0px 20px', 'width': '80px' }).bind('click', function () {
            saveStaffNote($('#noteEditorContent').val(), true);
        });
        var div = $('<div>').attr('id', 'notePadEditor').append(h).append(wrpper).append(button);
        $(txt).richEditor('simple', function () {
            $(div).makeModal({ 'width': '800', 'height': '530', 'persist': true });
            // CALLING THE makeModal() function above
        });
    }); 
```

`tinymce`最后，这个函数的应用是：

```
// === loading Rich Text Editors //
$.fn.richEditor = function (theTheme, callBack) {
    var applyTo = this;
    var tinyMceVars = {
        // Location of TinyMCE script
        script_url: '/Admin/Plugins/richEditor/tiny_mce.js',
        // General options
        theme: theTheme,
        plugins: "autolink,lists,pagebreak,style,layer,table,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,searchreplace,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,advlist",
        // Theme options
        theme_advanced_buttons1: "bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,formatselect,fontselect,fontsizeselect,|,bullist,numlist,|,undo,redo,|,code,preview,fullscreen,|,cleanup,help",
        theme_advanced_buttons2: "cut,copy,paste,pastetext,|,insertdate,inserttime,|,link,unlink,anchor,image,|,forecolor,backcolor,|,search,replace",
        theme_advanced_buttons3: "tablecontrols,|,hr,removeformat,visualaid,|,charmap,emotions,iespell",
        theme_advanced_toolbar_location: "top",
        theme_advanced_toolbar_align: "left",
        theme_advanced_statusbar_location: "bottom",
        theme_advanced_resizing: true,
        relative_urls: false,
        remove_script_host: false,
        document_base_url: window.location.protocol + "//" + window.location.hostname,
        external_link_list_url: window.location.protocol + "//" + window.location.hostname + "/Admin/Scripts/Lists/link_list.js",
        external_image_list_url: window.location.protocol + "//" + window.location.hostname + "/Admin/Scripts/Lists/image_list.js"
    };

    if ($(applyTo).hasClass('editorLoaded') == false) {
        try { // try to apply the editor, if fails it's because the scripts are not loaded, so load them!
            $(applyTo).tinymce(tinyMceVars);
        } catch (err) {
            $.getScript("/Admin/Plugins/richEditor/jquery.tinymce.js", function () {
                $(applyTo).tinymce(tinyMceVars);
            });
        } finally { // finally apply richEdit class to avoid re-writing and perform a callback if required
            $(applyTo).removeClass('richEdit').addClass('editorLoaded');
            if (callBack) {
                callBack();
            };
        };
    };
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T16:57:16.617

我相信您的问题是您正在将该类添加到一个 jQuery 对象，该对象也被名为`div`. 尝试在函数中将该变量松鼠（javascript具有函数范围）。

试试这个：

```
var addItem = function(){
    var div = $('<div/>').attr('id', 'addedItem');
    $('body').append(div);
};

addItem();
$('#addedItem').addClass('weeeeeee');
$('#addedItem').remove();
addItem(); 
```

# java - Java 高阶多态函数

> ID：14506402
> 
> 赞同：7
> 
> 时间：2013-01-24T16:44:13.817
> 
> 标签：java, polymorphism, higher-order-functions

我非常熟悉 Scheme 和 Haskell 等函数式语言。我正在尝试解决 Java 中的一个问题并在苦苦挣扎，可能是因为我仍然处于功能性思维模式。

我想写：

```
public void doQueryAndStoreData(String query, <? extends Collection> storeIn) {
    /* make a jdbc query, get ResultSet */
    ResultSet rset = ...;
    ProcessResultSet proc = new ProcessResultSet();
    proc.process(rset, storeIn);
    /* clean up */
} 
```

使用如下界面：

```
private interface IProcessResultSet<C> {
    public void process(ResultSet rset, C storeIn);
} 
```

和一个实现接口的类，如：

```
private class ProcessResultSet implements IProcessResultSet<? extends Collection> {
    public void process(ResultSet rset, Map storeIn) {
        /* do something */
    }

    public void process(ResultSet rset, List storeIn) {
        /* do something else */
    }
} 
```

这样第一个方法可以`process`根据给出的类型调用适当的方法`storeIn`。

在 Haskell 我可以写

```
class Storeable c a where
    store :: a -> c a -> c a

doQueryAndStoreData :: Storeable c a => ResultSet a -> c a -> c a
doQueryAndStoreData (ResultSet rs) coll = foldr store coll rs 
```

并为`Storeable`我想要存储的任何集合类型提供实例`ResultSet`。

这是Java中的正确方法吗？因为我觉得我在为实现这一目标而与语言作斗争。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T16:54:47.483

不幸的是，你不能这样做。*编译器必须在编译时*知道此调用绑定到哪个方法。如果要**根据对象的运行时类型**来决定调用哪个方法，则必须手动检查：

你能做的最多：

```
private class ProcessResultSet implements IProcessResultSet<? extends Collection> {

    @Override
    public void process(ResultSet rset, Collection storeIn) {
        if (storeIn instanceof Set) {
            return processSet(rset, (Set) storeIn);
        } else if (storeIn instanceof List) {
            return processList(rset, (List) storeIn);
        } else {
            throw new IllegalArgumentException("Unimplemented storage type");
        }
    }

    public void processSet(ResultSet rset, Set storeIn) {
        /* do something */
    }

    public void processList(ResultSet rset, List storeIn) {
        /* do something else */
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T17:00:34.550

不，Java 不这样做。

您需要执行以下操作：

```
public <T> void doQueryAndStoreData(
    String query,
    T storeIn,
    ResultSetProcessor<T> processor
) { 
```

或者更有可能：

```
public void doQueryAndStoreData(
    String query,
    ResultSetHandler handler // may contain processor and storeIn
) { 
```

我希望我不需要提到 SQL 注入漏洞是一件坏事。（在 Java`Map`中也不是 a `Collection`（它在 C# 中，但 C#`Collection`不是很有用）。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T16:55:52.647

```
private class ProcessResultSet implements IProcessResultSet<? extends Collection> {

    public void process(ResultSet rset, Object storeIn) 
    {
        if ( storeIn instanceof Map)
            processMap(rset,(Map) storeIn);
        else if (storeIn instanceof List)
            processList(rset,(List) storeIn);   
        else
            System.out.println("Unsupported input type.");
    }

    public void processMap(ResultSet rset, Map storeIn) {
        /* do something */
    }

    public void processList(ResultSet rset, List storeIn) {
        /* do something else */
    }
} 
```

# c# - WPF 单实例最佳实践

> ID：14506406
> 
> 赞同：46
> 
> 时间：2013-01-24T16:44:29.283
> 
> 标签：c#, wpf, singleton, mutex

这是我迄今为止实现的用于创建单实例 WPF 应用程序的代码：

```
#region Using Directives
using System;
using System.Globalization;
using System.Reflection;
using System.Threading;
using System.Windows;
using System.Windows.Interop;
#endregion

namespace MyWPF
{
    public partial class MainApplication : Application, IDisposable
    {
        #region Members
        private Int32 m_Message;
        private Mutex m_Mutex;
        #endregion

        #region Methods: Functions
        private IntPtr HandleMessages(IntPtr handle, Int32 message, IntPtr wParameter, IntPtr lParameter, ref Boolean handled)
        {
            if (message == m_Message)
            {
                if (MainWindow.WindowState == WindowState.Minimized)
                    MainWindow.WindowState = WindowState.Normal;

                Boolean topmost = MainWindow.Topmost;

                MainWindow.Topmost = true;
                MainWindow.Topmost = topmost;
            }

            return IntPtr.Zero;
        }

        private void Dispose(Boolean disposing)
        {
            if (disposing && (m_Mutex != null))
            {
                m_Mutex.ReleaseMutex();
                m_Mutex.Close();
                m_Mutex = null;
            }
        }

        public void Dispose()
        {
            Dispose(true);
            GC.SuppressFinalize(this);
        }
        #endregion

        #region Methods: Overrides
        protected override void OnStartup(StartupEventArgs e)
        {
            Assembly assembly = Assembly.GetExecutingAssembly();
            Boolean mutexCreated;
            String mutexName = String.Format(CultureInfo.InvariantCulture, "Local\\{{{0}}}{{{1}}}", assembly.GetType().GUID, assembly.GetName().Name);

            m_Mutex = new Mutex(true, mutexName, out mutexCreated);
            m_Message = NativeMethods.RegisterWindowMessage(mutexName);

            if (!mutexCreated)
            {
                m_Mutex = null;

                NativeMethods.PostMessage(NativeMethods.HWND_BROADCAST, m_Message, IntPtr.Zero, IntPtr.Zero);

                Current.Shutdown();

                return;
            }

            base.OnStartup(e);

            MainWindow window = new MainWindow();
            MainWindow = window;
            window.Show(); 

            HwndSource.FromHwnd((new WindowInteropHelper(window)).Handle).AddHook(new HwndSourceHook(HandleMessages));
        }

        protected override void OnExit(ExitEventArgs e)
        {
            Dispose();
            base.OnExit(e);
        }
        #endregion
    }
} 
```

一切都很完美......但我对此有一些疑问，我希望收到您关于如何改进我的方法的建议。

1）代码分析要求我实现`IDisposable`接口，因为我使用`IDisposable`的是成员（`Mutex`）。我的`Dispose()`实施是否足够好？我应该避免它，因为它永远不会被调用吗？

2）最好使用`m_Mutex = new Mutex(true, mutexName, out mutexCreated);`并检查结果或使用`m_Mutex = new Mutex(false, mutexName);`然后检查`m_Mutex.WaitOne(TimeSpan.Zero, false);`？在多线程的情况下，我的意思是......

3）`RegisterWindowMessage`API调用应该返回`UInt32`......但`HwndSourceHook`只接受`Int32`作为消息值......我应该担心意外行为（比如大于的结果`Int32.MaxValue`）吗？

4) 在`OnStartup`覆盖...`base.OnStartup(e);`即使另一个实例已经在运行并且我要关闭应用程序，我是否应该执行？

5）有没有更好的方法将现有实例置于不需要设置`Topmost`值的顶部？也许`Activate()`？

6）你能看出我的方法有什么缺陷吗？关于多线程、不良异常处理之类的东西？例如......如果我的应用程序在`OnStartup`和之间崩溃会发生什么`OnExit`？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-02-05T07:48:54.797

有几种选择，

*   互斥体
*   流程管理器
*   命名信号量
*   使用侦听器套接字

**互斥体**

```
Mutex myMutex ;

private void Application_Startup(object sender, StartupEventArgs e)
{
    bool aIsNewInstance = false;
    myMutex = new Mutex(true, "MyWPFApplication", out aIsNewInstance);  
    if (!aIsNewInstance)
    {
        MessageBox.Show("Already an instance is running...");
        App.Current.Shutdown();  
    }
} 
```

**流程管理器**

```
private void Application_Startup(object sender, StartupEventArgs e)
{
    Process proc = Process.GetCurrentProcess();
    int count = Process.GetProcesses().Where(p=> 
        p.ProcessName == proc.ProcessName).Count();

    if (count > 1)
    {
        MessageBox.Show("Already an instance is running...");
        App.Current.Shutdown(); 
    }
} 
```

**使用侦听器套接字**

向另一个应用程序发出信号的一种方法是打开到它的 Tcp 连接。创建一个套接字，绑定到一个端口，并在后台线程上侦听连接。如果成功，则正常运行。如果没有，则连接到该端口，这会向另一个实例发出第二次应用程序启动尝试的信号。然后，如果合适，原始实例可以将其主窗口置于最前面。

“安全”软件/防火墙可能是个问题。

[单实例应用程序 C#.Net 以及 Win32](http://sanity-free.org/143/csharp_dotnet_single_instance_application.html)

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2014-05-19T05:17:39.187

我想要更好的用户体验——如果另一个实例已经在运行，让我们激活它而不是显示关于第二个实例的错误。这是我的实现。

我使用命名 Mutex 来确保只有一个实例正在运行，并命名为 EventWaitHandle 将通知从一个实例传递到另一个实例。

应用程序.xaml.cs：

```
/// <summary>Interaction logic for App.xaml</summary>
public partial class App
{
    #region Constants and Fields

    /// <summary>The event mutex name.</summary>
    private const string UniqueEventName = "{GUID}";

    /// <summary>The unique mutex name.</summary>
    private const string UniqueMutexName = "{GUID}";

    /// <summary>The event wait handle.</summary>
    private EventWaitHandle eventWaitHandle;

    /// <summary>The mutex.</summary>
    private Mutex mutex;

    #endregion

    #region Methods

    /// <summary>The app on startup.</summary>
    /// <param name="sender">The sender.</param>
    /// <param name="e">The e.</param>
    private void AppOnStartup(object sender, StartupEventArgs e)
    {
        bool isOwned;
        this.mutex = new Mutex(true, UniqueMutexName, out isOwned);
        this.eventWaitHandle = new EventWaitHandle(false, EventResetMode.AutoReset, UniqueEventName);

        // So, R# would not give a warning that this variable is not used.
        GC.KeepAlive(this.mutex);

        if (isOwned)
        {
            // Spawn a thread which will be waiting for our event
            var thread = new Thread(
                () =>
                {
                    while (this.eventWaitHandle.WaitOne())
                    {
                        Current.Dispatcher.BeginInvoke(
                            (Action)(() => ((MainWindow)Current.MainWindow).BringToForeground()));
                    }
                });

            // It is important mark it as background otherwise it will prevent app from exiting.
            thread.IsBackground = true;

            thread.Start();
            return;
        }

        // Notify other instance so it could bring itself to foreground.
        this.eventWaitHandle.Set();

        // Terminate this instance.
        this.Shutdown();
    }

    #endregion
} 
```

MainWindow.cs 中的 BringToForeground：

```
 /// <summary>Brings main window to foreground.</summary>
    public void BringToForeground()
    {
        if (this.WindowState == WindowState.Minimized || this.Visibility == Visibility.Hidden)
        {
            this.Show();
            this.WindowState = WindowState.Normal;
        }

        // According to some sources these steps gurantee that an app will be brought to foreground.
        this.Activate();
        this.Topmost = true;
        this.Topmost = false;
        this.Focus();
    } 
```

并添加 Startup="AppOnStartup" （感谢 vhanla！）：

```
<Application x:Class="MyClass.App"  
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"   
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Startup="AppOnStartup">
    <Application.Resources>
    </Application.Resources>
</Application> 
```

为我工作:)

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2015-12-11T19:37:56.060

对于 WPF，只需使用：

```
public partial class App : Application
{
    private static Mutex _mutex = null;

    protected override void OnStartup(StartupEventArgs e)
    {
        const string appName = "MyAppName";
        bool createdNew;

        _mutex = new Mutex(true, appName, out createdNew);

        if (!createdNew)
        {
            //app is already running! Exiting the application  
            Application.Current.Shutdown();
        }

        base.OnStartup(e);
    }          
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-02-05T08:12:55.860

1）对我来说，它看起来像是一个标准的 Dispose 实现。这不是真的必要（见第 6 点），但它不会造成任何伤害。（清理关闭它有点像在烧毁之前清理房子，恕我直言，但对此事的看法不同..）

无论如何，为什么不使用“Dispose”作为清理方法的名称，即使它没有被直接调用？您可以将其称为“清理”，但请记住，您还为人类编写代码，并且 Dispose 看起来很熟悉，并且 .NET 上的任何人都了解它的用途。所以，选择“处置”。

2）我一直认为`m_Mutex = new Mutex(false, mutexName);`我认为这更像是一种惯例而不是技术优势。

3) 来自 MSDN：

> 如果消息注册成功，则返回值为 0xC000 到 0xFFFF 范围内的消息标识符。

所以我不会担心。通常，对于此类函数，UInt 不是用于“它不适合 Int，让我们使用 UInt 以便我们有更多的东西”，而是为了澄清合同“函数永远不会返回负值”。

4）如果您要关机，我会避免调用它，原因与＃1相同

5）有几种方法可以做到这一点。Win32 中最简单的方法就是让第二个实例调用 SetForegroundWindow（请看这里：http: [//blogs.msdn.com/b/oldnewthing/archive/2009/02/20/9435239.aspx](http://blogs.msdn.com/b/oldnewthing/archive/2009/02/20/9435239.aspx)）；但是，我不知道是否有等效的 WPF 功能，或者您是否需要 PInvoke 它。

6)

> 例如...如果我的应用程序在 OnStartup 和 OnExit 之间崩溃会发生什么？

没关系：当一个进程终止时，该进程拥有的所有句柄都被释放；互斥体也被释放。

简而言之，我的建议：

*   我会使用基于命名同步对象的方法：它在 Windows 平台上更为成熟。（考虑多用户系统时要小心，例如终端服务器！将同步对象命名为用户名/SID 和应用程序名称的组合）
*   使用 Windows API 来引发前一个实例（请参阅我在第 5 点的链接）或 WPF 等效项。
*   您可能不必担心崩溃（内核会为您减少内核对象的引用计数器；无论如何做一些测试），但是如果我可以建议改进：如果您的第一个应用程序实例没有崩溃而是挂起怎么办？（发生在 Firefox 上。我相信它也发生在你身上！没有窗口，ff 进程，你不能打开一个新的）。在这种情况下，结合另一种或两种技术来 a) 测试应用程序/窗口是否响应可能会更好；b) 找到挂起的实例并终止它

例如，您可以使用您的技术（尝试向窗口发送/发布消息 - 如果不回复则卡住），加上 MSK 技术，来查找并终止旧进程。然后正常启动。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2018-10-09T11:57:35.147

防止第二次发生（并发出信号），

*   使用 EventWaitHandle （因为我们正在谈论一个事件），
*   使用任务，
*   不需要互斥代码，
*   没有 TCP，
*   没有 Pinvokes，
*   没有 GarbageCollection 的东西，
*   线程保存
*   简单的

可以这样完成（这适用于 WPF 应用程序（参见 App() 的参考），但也适用于 WinForms）：

```
public partial class App : Application
{
    public App()
    {
        // initiate it. Call it first.
        preventSecond();
    }

    private const string UniqueEventName = "{GENERATE-YOUR-OWN-GUID}";

    private void preventSecond()
    {
        try
        {
            EventWaitHandle.OpenExisting(UniqueEventName); // check if it exists
            this.Shutdown();
        }
        catch (WaitHandleCannotBeOpenedException)
        {
            new EventWaitHandle(false, EventResetMode.AutoReset, UniqueEventName); // register
        }
    }
} 
```

* * *

第二个版本：上面加上信号另一个实例显示窗口（更改 WinForms 的 MainWindow 部分）：

```
public partial class App : Application
{
    public App()
    {
        // initiate it. Call it first.
        //preventSecond();
        SingleInstanceWatcher();
    }

    private const string UniqueEventName = "{GENERATE-YOUR-OWN-GUID}";
    private EventWaitHandle eventWaitHandle;

    /// <summary>prevent a second instance and signal it to bring its mainwindow to foreground</summary>
    /// <seealso cref="https://stackoverflow.com/a/23730146/1644202"/>
    private void SingleInstanceWatcher()
    {
        // check if it is already open.
        try
        {
            // try to open it - if another instance is running, it will exist , if not it will throw
            this.eventWaitHandle = EventWaitHandle.OpenExisting(UniqueEventName);

            // Notify other instance so it could bring itself to foreground.
            this.eventWaitHandle.Set();

            // Terminate this instance.
            this.Shutdown();
        }
        catch (WaitHandleCannotBeOpenedException)
        {
            // listen to a new event (this app instance will be the new "master")
            this.eventWaitHandle = new EventWaitHandle(false, EventResetMode.AutoReset, UniqueEventName);
        }

        // if this instance gets the signal to show the main window
        new Task(() =>
        {
            while (this.eventWaitHandle.WaitOne())
            {
                Current.Dispatcher.BeginInvoke((Action)(() =>
                {
                    // could be set or removed anytime
                    if (!Current.MainWindow.Equals(null))
                    {
                        var mw = Current.MainWindow;

                        if (mw.WindowState == WindowState.Minimized || mw.Visibility != Visibility.Visible)
                        {
                            mw.Show();
                            mw.WindowState = WindowState.Normal;
                        }

                        // According to some sources these steps are required to be sure it went to foreground.
                        mw.Activate();
                        mw.Topmost = true;
                        mw.Topmost = false;
                        mw.Focus();
                    }
                }));
            }
        })
        .Start();
    }
} 
```

这段代码作为一个drop in class，将@ [Selfcontained-C-Sharp-WPF-compatible-utility-classes](https://github.com/BananaAcid/Selfcontained-C-Sharp-WPF-compatible-utility-classes) **/** [Utils.SingleInstance.cs](https://github.com/BananaAcid/Selfcontained-C-Sharp-WPF-compatible-utility-classes/blob/master/Utils.SingleInstance.cs)

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-02-02T19:24:36.713

最直接的处理方法是使用命名信号量。尝试这样的事情......

```
public partial class App : Application
{
    Semaphore sema;
    bool shouldRelease = false;

    protected override void OnStartup(StartupEventArgs e)
    {

        bool result = Semaphore.TryOpenExisting("SingleInstanceWPFApp", out sema);

        if (result) // we have another instance running
        {
            App.Current.Shutdown();
        }
        else
        {
            try
            {
                sema = new Semaphore(1, 1, "SingleInstanceWPFApp");
            }
            catch
            {
                App.Current.Shutdown(); //
            }
        }

        if (!sema.WaitOne(0))
        {
            App.Current.Shutdown();
        }
        else
        {
            shouldRelease = true;
        }

        base.OnStartup(e);
    }

    protected override void OnExit(ExitEventArgs e)
    {
        if (sema != null && shouldRelease)
        {
            sema.Release();
        }
    }

} 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2013-01-30T11:24:51.773

我为此使用了一个简单的 TCP 套接字（在 Java 中，10 年前）。

1.  启动时连接到预定义的端口，如果连接被接受，则另一个实例正在运行，如果没有，则启动 TCP 侦听器
2.  有人连接到您后，弹出窗口并断开连接

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2019-11-17T10:01:50.697

我的 .Net Core 3 Wpf 单实例应用程序解决方案：

```
[STAThread]
public static void Main()
{
    StartSingleInstanceApplication<CntApplication>();
}

public static void StartSingleInstanceApplication<T>()
    where T : RichApplication
{
    DebuggerOutput.GetInstance();

    Assembly assembly = typeof(T).Assembly;
    string mutexName = $"SingleInstanceApplication/{assembly.GetName().Name}/{assembly.GetType().GUID}";

    Mutex mutex = new Mutex(true, mutexName, out bool mutexCreated);

    if (!mutexCreated)
    {
        mutex = null;

        var client = new NamedPipeClientStream(mutexName);
        client.Connect();

        using (StreamWriter writer = new StreamWriter(client))
            writer.Write(string.Join("\t", Environment.GetCommandLineArgs()));

        return;
    }
    else
    {
        T application = Activator.CreateInstance<T>();

        application.Exit += (object sender, ExitEventArgs e) =>
        {
            mutex.ReleaseMutex();
            mutex.Close();
            mutex = null;
        };

        Task.Factory.StartNew(() =>
        {
            while (mutex != null)
            {
                using (var server = new NamedPipeServerStream(mutexName))
                {
                    server.WaitForConnection();

                    using (StreamReader reader = new StreamReader(server))
                    {
                        string[] args = reader.ReadToEnd().Split("\t", StringSplitOptions.RemoveEmptyEntries).ToArray();
                        UIDispatcher.GetInstance().Invoke(() => application.ExecuteCommandLineArgs(args));
                    }
                }
            }
        }, TaskCreationOptions.LongRunning);

        typeof(T).GetMethod("InitializeComponent").Invoke(application, new object[] { });
        application.Run();
    }
} 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-11-28T09:10:13.627

这是一个简单的解决方案，在本例中为 MainWindow.xaml，打开您的启动文件（查看应用程序的启动位置）。打开 MainWindow.xaml.cs 文件。转到构造函数并在 intializecomponent() 之后添加以下代码：

```
Process Currentproc = Process.GetCurrentProcess();

Process[] procByName=Process.GetProcessesByName("notepad");  //Write the name of your exe file in inverted commas
if(procByName.Length>1)
{
  MessageBox.Show("Application is already running");
  App.Current.Shutdown();
 } 
```

不要忘记添加 System.Diagnostics

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-04-22T22:18:49.030

这是将旧实例也带到前台的示例：

```
public partial class App : Application
{
    [DllImport("user32", CharSet = CharSet.Unicode)]
    static extern IntPtr FindWindow(string cls, string win);
    [DllImport("user32")]
    static extern IntPtr SetForegroundWindow(IntPtr hWnd);
    [DllImport("user32")]
    static extern bool IsIconic(IntPtr hWnd);
    [DllImport("user32")]
    static extern bool OpenIcon(IntPtr hWnd);

    private static Mutex _mutex = null;

    protected override void OnStartup(StartupEventArgs e)
    {
        const string appName = "LinkManager";
        bool createdNew;

        _mutex = new Mutex(true, appName, out createdNew);

        if (!createdNew)
        {
            ActivateOtherWindow();
            //app is already running! Exiting the application  
            Application.Current.Shutdown();
        }

        base.OnStartup(e);
    }

    private static void ActivateOtherWindow()
    {
        var other = FindWindow(null, "!YOUR MAIN WINDOW TITLE HERE!");
        if (other != IntPtr.Zero)
        {
            SetForegroundWindow(other);
            if (IsIconic(other))
                OpenIcon(other);
        }
    }
} 
```

但只有在您的主窗口标题不更改运行时期间它才会起作用。

**编辑：**

您也可以使用`Startup`event in`App.xaml`而不是覆盖`OnStartup`.

```
// App.xaml.cs
private void Application_Startup(object sender, StartupEventArgs e)
{
    const string appName = "LinkManager";
    bool createdNew;

    _mutex = new Mutex(true, appName, out createdNew);

    if (!createdNew)
    {
        ActivateOtherWindow();
        //app is already running! Exiting the application  
        Application.Current.Shutdown();
    }
}

// App.xaml
<Application x:Class="MyApp.App"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:local="clr-namespace:MyApp"
         StartupUri="MainWindow.xaml" Startup="Application_Startup"> //<- startup event 
```

记住在这种情况下不要打电话`base.OnStartup(e)`！

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-12-04T05:05:15.283

只是把我的帽子扔进这里的戒指。我所做的是创建`ApplicationBase`常规`Application`类的子类，我将其保存在我在所有 WPF 应用程序中使用的公共库中。然后我更改基类（从 XAML 及其代码隐藏中）以使用我的基类。最后，我使用 an`EntryPoint.Main`作为我的应用程序的启动对象，然后我检查单个实例的状态，如果我不是第一个，则简单地返回。

注意：我还展示了如何支持一个标志，如果你想启动另一个实例，可以覆盖它。但是，请小心使用此类选项。只在真正有意义的地方使用它。

这是代码：

### ApplicationBase（应用程序子类）

```
public abstract class ApplicationBase : Application {

    public static string? SingleInstanceId { get; private set; }

    public static bool InitializeAsFirstInstance(string singleInstanceId){

        if(SingleInstanceId != null)
            throw new AlreadyInitializedException(singleInstanceId);

        SingleInstanceId = singleInstanceId;

        var waitHandleName = $"SingleInstanceWaitHandle:{singleInstanceId}";

        if(EventWaitHandle.TryOpenExisting(waitHandleName, out var waitHandle)){

            // An existing WaitHandle was successfuly opened which means we aren't the first so signal the other
            waitHandle.Set();

            // Then indicate we aren't the first instance by returning false
            return false;
        }

        // Welp, there was no existing WaitHandle with this name, so we're the first!
        // Now we have to set up the EventWaitHandle in a task to listen for other attempts to launch

        void taskBody(){

            var singleInstanceWaitHandle = new EventWaitHandle(false, EventResetMode.AutoReset, waitHandleName);

            while (singleInstanceWaitHandle.WaitOne()) {

                if(Current is ApplicationBase applicationBase)
                    Current.Dispatcher.BeginInvoke(applicationBase.OtherInstanceLaunched);
            }
        }

        new Task(taskBody, TaskCreationOptions.LongRunning).Start();

        return true;
    }

    public static bool IsSingleInstance
        => SingleInstanceId != null;

    protected virtual void OtherInstanceLaunched()
        => Current.MainWindow?.BringToFront();
} 
```

通过标记`OtherInstanceLaunched`为虚拟，我可以通过简单地覆盖它来在每个应用程序的基础上对其进行自定义，或者只是让默认实现来做它的事情，这里是`Window`我添加的扩展方法。（基本上它确保它是可见的、恢复的，然后聚焦它。）

### 入口点.Main

```
public static class EntryPoint {

    public static class CommandLineArgs{
        public const string AllowMulti = "/AllowMulti";
        public const string NoSplash   = "/NoSplash";
    }

    [STAThread]
    public static int Main(string[] args) {

        var showSplashScreen = true;
        var allowMulti       = false;

        foreach (var arg in args) {

            if (arg.Equals(CommandLineArgs.AllowMulti, StringComparison.CurrentCultureIgnoreCase))
                allowMulti = true;

            if (arg.Equals(CommandLineArgs.NoSplash, StringComparison.CurrentCultureIgnoreCase))
                showSplashScreen = false;
        }

        // Try and initialize myself as the first instance. If I'm not and 'allowMulti' is false, exit with a return code of 1
        if (!ApplicationBase.InitializeAsFirstInstance(ApplicationInfo.ProductName) && !allowMulti)
            return 1;

        if (showSplashScreen) {
            var splashScreen = new SplashScreen("resources/images/splashscreen.png");
            splashScreen.Show(true, false);
        }

        _ = new App();

        return 0;
    }
} 
```

这种方法的优点是它甚至在应用程序本身被实例化之前以及在启动屏幕显示之前就移交执行。换句话说，它会在尽可能早的地方进行救助。

注意：如果您甚至不需要多重支持，那么您可以删除该参数检查和测试。这只是为了说明目的而添加的

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-11-15T19:10:25.847

尽管 GetProcessesByName().Length 方法有效，但 Mutex 是计算机范围内需要的 C# 锁。由于 WPF 不像 WinForms 那样在 assemblyInfo 中自动生成 GUID，因此应用程序本身必须自行生成唯一标识符。另请注意，互斥锁必须在整个应用程序生命周期内保持可见；否则，它会在处置时自动释放。调用 Mutex.WaitOne() 方法锁定，调用 Mutex.ReleaseMutex() 解锁。参考：Mutex，Joe Albahari 在 C# 中的线程... [www.albahari.com/threading/](http://www.albahari.com/threading/)

```
private Mutex mutex = new Mutex(false, <Author> + <AppName>);
private void Application_Startup(object sender, StartupEventArgs e)
{
    if (!mutex.WaitOne()) { App.Current.Shutdown(<ExitCode>); }
    else                  { new MainWindow(e.Args); }
} 
```

# java - ResultSet 仅与 TYPE_SCROLL_INSENSITIVE、CONCUR_READ_ONLY 不正确

> ID：14506407
> 
> 赞同：1
> 
> 时间：2013-01-24T16:44:29.580
> 
> 标签：java

我一直在处理一段简单的代码：

```
import java.sql.*;

class ODBC  
{
MyConnection myCon;
Connection jdbcConnection;
ResultSet rs;
String sql;
PreparedStatement stmt;

public ODBC() throws Exception {
    init();
}

public void init() throws Exception{
    myCon = new MyConnection();     
    jdbcConnection = myCon.getConnection();
}

public void runQuery() throws SQLException {
    sql = "SELECT DISTINCT HELPDESK_CASE.INCIDENT_NUMBER, "
            + "HPD_AUDIT.AUDIT_DATE, HPD_AUDIT.AUDIT_FIELD, "
            + "HELPDESK_CASE.DETAILED_DESCRIPTION, "
            + "HPD_AUDIT.AFTER_VALUE, "
            + "HELPDESK_CASE.DESCRIPTION "
            + "FROM HELPDESK_CASE INNER JOIN "
            + "HPD_AUDIT ON HELPDESK_CASE.INCIDENT_NUMBER "
            + "= HPD_AUDIT.INCIDENT_NUMBER "
            + "WHERE (((HELPDESK_CASE.INCIDENT_NUMBER)='INC001001837949') "
            + "AND ((HPD_AUDIT.AUDIT_FIELD)='Assigned Group')) "
            + "ORDER BY HELPDESK_CASE.INCIDENT_NUMBER, "
            + "HPD_AUDIT.AUDIT_DATE"; 
    stmt = jdbcConnection.prepareStatement(sql,ResultSet.TYPE_SCROLL_INSENSITIVE, ResultSet.CONCUR_UPDATABLE );
    rs = stmt.executeQuery();
    while(rs.next()){
        System.out.println("Something is here");
    }
}

public static void main (String args[]) throws Exception 
{
    ODBC odbc;
    odbc = new ODBC();
    odbc.runQuery();
}

class MyConnection {
    public Connection getConnection() throws Exception 
    {
        String URL = "jdbc:odbc:corpp05";
        Connection c = DriverManager.getConnection(URL, "remro", "*****"); 
        return c;
    }
}
} 
```

我无法弄清楚以下行为。

1.  我使用相同的 JDBC 驱动程序在 MySQL 和 Access 中运行此查询，它们什么都不返回（因为它们应该返回 NOTHING，因为正在查询的事件编号不存在）。
2.  我需要在这个程序的其他区域（在这个示例片段之外）能够调用*resultSet.previous() resultSet.beforeFirst()*等，因此需要能够向前和向后滚动。
3.  当我使用preparedStatement如下：

    *stmt = jdbcConnection.prepareStatement(sql);*

while 循环永远不会按预期行为执行，但是当我使用preparedStatement 时，如下所示：

```
stmt = jdbcConnection.prepareStatement(sql,ResultSet.TYPE_SCROLL_INSENSITIVE, ResultSet.CONCUR_UPDATABLE ); 
```

（这是我需要的，因为我需要 TYPE_SCROLL_INSENSITIVE）while 循环被执行并且“Something is here”被打印出来。

我在这里想念什么？我觉得这是相对明显的，我需要退后一步，让其他人关注这一点，我相信。感谢帮助。

厘米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T20:59:26.640

从 oracle 站点下载`thin`最适合您使用的 oracle 版本的驱动程序。`jar`在 eclipse 外部 jar 文件存档中添加该文件。完成所有设置后：您可以按如下方式进行连接：

```
DriverManager.registerDriver(new oracle.jdbc.driver.OracleDriver());                         
con=DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:XE","user","****"); 
```

由于`jdbc.getTransactionIsolation()`在您的情况下返回 2，因此消除了脏读的可能性。

我希望更换驱动程序可以解决您的问题。

**编辑**[**在此处**](http://docs.oracle.com/cd/E21454_01/html/821-2576/dbadapt_jdbcodbc_c.html)
阅读有关网站上假定的驱动程序的信息。在描述有关驱动程序的某些行之后，它说明了以下缺点：[](http://docs.oracle.com/cd/E21454_01/html/821-2576/dbadapt_jdbcodbc_c.html)**`JDBC-ODBC``Oracle``JDBC-ODBC`**

 **> **缺点**：不适用于大规模应用。性能会受到影响，因为从 JDBC 到 ODBC 的转换工作会产生一些开销。**不支持 Java 的所有功能。用户受限于底层 ODBC 驱动程序的功能。**

因此，它提供了足够的理由相信，当应用程序仅基于`JDBC-ODBC`驱动程序通过`java.sql`包提供的敏感 API 实现数据库事务或其他重要数据库功能时，可能会遇到一些关键问题。**

# javascript - 如何对 JS 库进行沙箱处理？

> ID：14506410
> 
> 赞同：1
> 
> 时间：2013-01-24T16:44:44.353
> 
> 标签：javascript

我正在使用一个 javascript 库，但由于我在这个大网站上的其他库，它似乎失败了。有没有办法可以以某种方式沙箱？也许把它放在一个 iframe 中，然后在我的 javascript 类中分配一个 var 作为

```
var myvar = iframe.theJSlib; 
```

我只是写一个想法。我不知道如何沙箱，也不知道是否可以完成。如何对 javascript 库进行沙箱处理并在我的主页中访问它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T16:49:15.450

这就是我们练习将 vars 排除在全局范围之外的原因。尝试将 lib 中的所有内容包含在其自己的函数中，如下所示：

```
(function(){
  // the library code
}()); 
```

请记住，这只会修复显式声明的变量，`var foo = 'bar';`但不会修复隐式声明的变量，如`foo = 'bar'`，它仍然会分配给全局对象，很可能`window`。

您还可以尝试更改所有代码以使用单个命名空间，如下所示：

```
var myApp = {};

myApp.foo = { /* maybe my validator code */ };
myApp.bar = { /* maybe my utilities code */ }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T18:05:16.993

把它放在一个匿名函数中：

```
(function(){
    // >Your code goes here<
})(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T16:49:22.403

将它放入 iframe 肯定会阻止它正常工作。您所能做的就是将有问题的代码包装在一个函数中，以便一切都在该函数的范围内运行。

请参阅：[Javascript 命名空间](https://stackoverflow.com/questions/7684452/javascript-namespacing)

并且：[JavaScript 命名空间](https://stackoverflow.com/questions/3410984/javascript-namespace)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T16:49:42.600

您不能一次只沙箱一个库。您必须通过在它们自己的命名空间中以兼容模式运行它们来将它们全部沙箱化：

```
(function(myLib){
    // do stuff with this lib here
})(theLongLibname) 
```

# c# - 阶乘 for 循环语句

> ID：14506411
> 
> 赞同：0
> 
> 时间：2013-01-24T16:44:46.360
> 
> 标签：c#, factorial

我无法让这个 for 循环执行它应该执行的阶乘。它似乎只循环一次。

```
 static void Main(string[] args)
    {
    int a;
    int total=1;
    Console.WriteLine("Please enter any number");
    a = Convert.ToInt32 (Console.ReadLine());
    total = a;
        for (int intcount = a; intcount<= 1; intcount--)
          {
            total *= intcount;    
        }
        Console.WriteLine("Factorial of number '{0}' is '{1}'", a, total);
        Console.ReadKey(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T16:45:35.787

```
intcount<= 1 
```

一旦您开始循环，这是错误的，因此循环立即退出。

您可能希望在该数字大于 1 时进行**循环**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T16:47:11.463

您应该像这样将初始化从`total = a`to`total = 1`和`intcount<= 1`to更改为`intcount > 1`：

```
var a = 5;
var total = 1;
for (int intcount = a; intcount > 1; intcount--)
{
     total *= intcount;    
}
Console.WriteLine (total);//prints 120 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T16:49:37.993

```
total = 0;
for (int intcount = 1; intcount<= a; intcount++)
{
   total *= intcount;    
} 
```

或者

```
total = a;
for (int intcount = a; intcount>= 1; intcount--)
  {
    total *= intcount;    
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T16:52:59.003

当值*大于*1 时循环：

```
for (int intcount = a; intcount > 1; intcount--) {
  total *= intcount;
} 
```

或者，循环到该值：

```
for (int intcount = 2; intcount <= a; intcount++) {
  total *= intcount;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-16T04:00:06.617

完整的解决方案在这里！测试和工作。递归实现和基本实现

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace ConsoleApplication50
{
    class Program
    {
        static void Main(string[] args)
        {

        NumberManipulator manipulator = new NumberManipulator();
        Console.WriteLine("Please Enter Factorial Number:");
        int a= Convert.ToInt32(Console.ReadLine());

        Console.WriteLine("---Basic Calling--");
        Console.WriteLine("Factorial of {0} is: {1}" ,a, manipulator.factorial(a));

        Console.WriteLine("--Recursively Calling--");
        Console.WriteLine("Factorial of {0} is: {1}", a, manipulator.recursively(a));

        Console.ReadLine();
    }
}

class NumberManipulator
{
    public int factorial(int num)
    {
        int result=1;
        int b = 1;
        do
        {
            result = result * b;
            Console.WriteLine(result);
            b++;
        } while (num >= b);
        return result;
    }

    public int recursively(int num)
    {
        if (num <= 1)
        {
            return 1;
        }
        else
        {
            return recursively(num - 1) * num;
        }
    }
  }
} 
```

# c# - .Net 服务因新线程启动方法上的 FileNotFound 异常而失败

> ID：14506413
> 
> 赞同：4
> 
> 时间：2013-01-24T16:44:53.250
> 
> 标签：c#, .net, multithreading, windows-services

我有一个我编写的服务，它执行核心业务逻辑和功能。该服务被设计为一个项目中的服务包装器以及 Windows 库项目中的所有功能。我也有包含 Windows 库项目的控制台应用程序。

在我们的预生产环境中，这工作得很好。服务开始，一切都在其愉快的小路上进行。

在我们的生产环境中，服务无法启动。

```
Application: URTWorkerService.exe
Framework Version: v4.0.30319
Description: The process was terminated due to an unhandled exception.
Exception Info: System.IO.FileNotFoundException
Stack:
   at URTWorker.Worker.Run()
   at System.Threading.ThreadHelper.ThreadStart_Context(System.Object)
   at System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object, Boolean)
   at System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object)
   at System.Threading.ThreadHelper.ThreadStart() 
```

我认为这很奇怪，并像这样添加了一个 Debug.WriteLine() 调用：

```
/// <summary>
/// Entry point method into the Worker class
/// </summary>
public void Run()
{
    Debug.WriteLine("Did we make it this far?");
    var exitEventArgs = ExitEventArgs.Clear;
    try
    {
        BroadcastEcho("Worker::Run::Enter", TraceLevel.Verbose);
        WorkerStartedOn = DateTime.Now;
        State = AsyncState.Running;

        BroadcastEcho("Worker::Run::Pre initialize", TraceLevel.Verbose);
        Initialize();
        BroadcastEcho("Worker::Run::Post initialize", TraceLevel.Verbose);

        ExecuteWorkerLoop();
    }
    catch (Exception ex)
    {
        exitEventArgs.Reason = ExitReason.Exception;
        var vars = new Dictionary<string, string>();

        StandardMessage message;

        // TODO Comment about this
        if (ex is FormatException && ex.Message.Contains("FieldNames.cs"))
        {
            BroadcastEcho("The field definition has changed. Generating new code file.", ex);
            var path = CreateConstantsCodeFile();
            BroadcastEcho("The file has been saved to " + path, TraceLevel.Error);
            vars.Add("FieldsNamesPath", path);
            message = StandardMessage.NewFieldsNameFile;
        }
        else
        {
            BroadcastEcho("An unhandled exception was thrown", ex);
            vars.Add("ExtraInfo", "<b>This is a crashing exception.</b>");
            message = StandardMessage.UnhandledError;
        }
        Notifier.SendErrorMail(message, vars, ex);

    }

    var lastCount = -1;
    while (Notifier.MailInTransit.Count > 0)
    {
        if (lastCount != Notifier.MailInTransit.Count)
        {
            var suffix = (
                lastCount != 1
                    ? "s"
                    : string.Empty);

            lastCount = Notifier.MailInTransit.Count;
            BroadcastEcho(string.Format("Waiting for {0} mail item{1} to finish sending", lastCount, suffix), TraceLevel.Info);
        }

        Thread.Sleep(0);
    }

    State = AsyncState.Stopped;
    BroadcastEcho("Worker::Run::Exit", TraceLevel.Verbose);
    Exit(exitEventArgs);
} 
```

这是 DbgView 捕获...

```
[11864] Program::Main 
[11864] Verbose::WorkerService::Enter  
[11864] Verbose::WorkerService::Exit  
[11864] Info::Starting Worker Service  
[11864] Verbose::OnStart::Enter  
[11864] Verbose::OnStart::Worker Service received Start command  
[11864] Verbose::OnStart::Current directory = C:\Windows\system32  
[11864] Verbose::OnStart::try::Created workerThread  
[11864] Verbose::OnStart::try::workerThread started  
[11864] Verbose::OnStart::try::Done waiting  
[11864] Verbose::OnStart::Exit 
```

您可以看到所有`BroadcastEcho()`消息，如 TraceLevel 值所述，但`Debug.WriteLine()`从未出现。

然后我认为这可能是程序集绑定的问题。这是融合日志的结果：

```
*** Assembly Binder Log Entry  (1/24/2013 @ 7:47:52 AM) ***

The operation was successful.
Bind result: hr = 0x0\. The operation completed successfully.

Assembly manager loaded from:  C:\Windows\Microsoft.NET\Framework\v4.0.30319\clr.dll
Running under executable  C:\RTWorker\URTWorkerService.exe
--- A detailed error log follows. 

=== Pre-bind state information ===
LOG: User = REDMOND\msrrtsa
LOG: DisplayName = URTWorker, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
 (Fully-specified)
LOG: Appbase = file:///C:/RTWorker/
LOG: Initial PrivatePath = NULL
LOG: Dynamic Base = NULL
LOG: Cache Base = NULL
LOG: AppName = URTWorkerService.exe
Calling assembly : URTWorkerService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null.
===
LOG: This bind starts in default load context.
LOG: Using application configuration file: C:\RTWorker\URTWorkerService.exe.Config
LOG: Using host configuration file: 
LOG: Using machine configuration file from C:\Windows\Microsoft.NET\Framework\v4.0.30319\config\machine.config.
LOG: Policy not being applied to reference at this time (private, custom, partial, or location-based assembly bind).
LOG: Attempting download of new URL file:///C:/RTWorker/URTWorker.DLL.
LOG: Assembly download was successful. Attempting setup of file: C:\RTWorker\URTWorker.dll
LOG: Entering run-from-source setup phase.
LOG: Assembly Name is: URTWorker, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
LOG: Binding succeeds. Returns assembly from C:\RTWorker\URTWorker.dll.
LOG: Assembly is loaded in default load context. 
```

两台机器都是 Windows Server 2008 R2 SP1。预生产是虚拟机，生产是物理机。

关于它可能是什么的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T17:15:01.707

我发现了问题。

首先，我应该查看所有 Fusion 日志，而不仅仅是适用于`URTWorker.dll`.

```
*** Assembly Binder Log Entry  (1/24/2013 @ 8:53:57 AM) ***

The operation failed.
Bind result: hr = 0x80070002\. The system cannot find the file specified.

Assembly manager loaded from:  C:\Windows\Microsoft.NET\Framework\v4.0.30319\clr.dll
Running under executable  C:\RTWorker\URTWorkerService.exe
--- A detailed error log follows. 

=== Pre-bind state information ===
LOG: User = REDMOND\msrrtsa
LOG: DisplayName = Microsoft.TeamFoundation.WorkItemTracking.Client, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
 (Fully-specified)
LOG: Appbase = file:///C:/RTWorker/
LOG: Initial PrivatePath = NULL
LOG: Dynamic Base = NULL
LOG: Cache Base = NULL
LOG: AppName = URTWorkerService.exe
Calling assembly : URTWorker, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null.
===
LOG: This bind starts in default load context.
LOG: Using application configuration file: C:\RTWorker\URTWorkerService.exe.Config
LOG: Using host configuration file: 
LOG: Using machine configuration file from C:\Windows\Microsoft.NET\Framework\v4.0.30319\config\machine.config.
LOG: Post-policy reference: Microsoft.TeamFoundation.WorkItemTracking.Client, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
LOG: GAC Lookup was unsuccessful.
LOG: Attempting download of new URL file:///C:/RTWorker/Microsoft.TeamFoundation.WorkItemTracking.Client.DLL.
LOG: Attempting download of new URL file:///C:/RTWorker/Microsoft.TeamFoundation.WorkItemTracking.Client/Microsoft.TeamFoundation.WorkItemTracking.Client.DLL.
LOG: Attempting download of new URL file:///C:/RTWorker/Microsoft.TeamFoundation.WorkItemTracking.Client.EXE.
LOG: Attempting download of new URL file:///C:/RTWorker/Microsoft.TeamFoundation.WorkItemTracking.Client/Microsoft.TeamFoundation.WorkItemTracking.Client.EXE.
LOG: All probing URLs attempted and failed. 
```

失败的绑定表明它找不到 Team Foundation 客户端库，因为它们没有安装，并且将引用设置`CopyLocal = true`为没有得到所有内容。

这给了我一个更好的前进方向。

现在，如果 .Net 有更好的异常方法（“FileNoteFound：无法加载程序集 XXX。”）那就太好了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T16:51:25.430

在黑暗中拍摄，明确强制 Flush() 或设置 Debug.AutoFlush = true？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-30T10:41:44.317

检查您在 web.config 中给出的文件路径并在 appropr 中更正

# wordpress - wordpress页面加载后如何触发ajax请求

> ID：14506414
> 
> 赞同：0
> 
> 时间：2013-01-24T16:44:56.497
> 
> 标签：wordpress, plugins

我正在写一个 wordpress 插件。为了减少页面加载时间，我决定使用 AJAX。所以我的意思是当页面加载时，必须触发 ajax，并且必须通过请求加载内容。我的问题是我不是在写主题，所以我怎么能用插件来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T16:51:39.580

您可以使用[wp_enqueue_script](http://codex.wordpress.org/Function_Reference/wp_enqueue_script)将您的 js 加载到页面中并从该 js 文件执行 ajax 请求。在这里，我们使用[wp_head](http://codex.wordpress.org/Plugin_API/Action_Reference/wp_head)挂钩将其放入`<head>`主题部分。

```
add_action('wp_head', load_my_scripts);
function load_my_scripts() {
    wp_enqueue_script(
        'my-js-file',
        plugins_url('/js/my-js-file.js', __FILE__),
        array('jquery')
    );
} 
```

此外，如果您正在开发自定义主题，请确保`<?php wp_head(); ?>`在关闭您`</head>`的 header.php 中的标签之前

PS：我假设您正在为您的 ajax 请求使用 jQuery，因此我将该库作为先决条件包含在代码中，因此 Wordpress 将在您的 js 文件之前包含该库。

# ios - 一些请求超时，没有明确的原因

> ID：14506415
> 
> 赞同：4
> 
> 时间：2013-01-24T16:44:57.637
> 
> 标签：ios, rest, afnetworking, nsurlrequest, connection-timeout

我遇到了一个我无法理解的错误，现在它只发生在特定设备上。它发生在带有 iOS 6 的 iPhone 5 上，但不幸的是，我无法访问另一个来检查它是否与它是 iPhone 5 的事实有关。

问题是尽管连接速度很快，但对我们的服务器 API 发出的某些特定网络请求超时，并且似乎没有服务器端问题，因为服务器正常响应来自其他设备的相同请求。

我`AFNetworking`用来发出我的http请求。

我已经子类化`AFHTTPClient`了，对于那个特定的请求，我像这样使用它

```
[[MyClient sharedInstance] putPath:@"myPath"
                        parameters:[NSDictionary dictionaryWithObject:@"y" forKey:@"set"]
                           success:^(AFHTTPRequestOperation *operation, id responseObject){
                                     // do something with response
                           }
                           failure:^(AFHTTPRequestOperation *operation, NSError *error){
                                     // tell user there an error occurred
                           }]; 
```

如果有人指出发生这种情况的一些可能原因或要分析的事情以了解正在发生的事情，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T20:11:53.157

该问题与 AFNetworking 和特定设备之间的交互有关的可能性几乎为零——很可能是其中之一。

## 测试 AFNetworking

AFNetworking 确实提供了对连接变化的内置检测。`AFHTTPClient`使用'`-setReachabilityStatusChangeBlock:`方法设置块。这将在 Internet 连接丢失时通知您，并允许您根据需要调整应用程序的行为。

这个[Stack Overflow 问题](https://stackoverflow.com/a/11612051/1445366)提供了示例代码和设置说明。

以下是`status`变量的值，供您参考：

```
AFNetworkReachabilityStatusUnknown          = -1,
AFNetworkReachabilityStatusNotReachable     = 0,
AFNetworkReachabilityStatusReachableViaWWAN = 1,
AFNetworkReachabilityStatusReachableViaWiFi = 2, 
```

## 测试设备

您可以尝试将问题与您的设备隔离开来：

• 下载[Fing](https://itunes.apple.com/us/app/fing-network-scanner/id430921107)并比较不同设备上的网络性能

• 在[testmyiphone.com上进行数据速度测试](http://testmyiphone.com/)

• 检查设备的[家长控制](http://support.apple.com/kb/ht4213)，看看是否有任何与您的应用行为发生冲突的地方

• 在 iTunes 中恢复设备，无需从备份恢复

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T02:13:16.563

My suggestion is to check your iphone wifi network. This happen to me in the past when i am connected to my company's corporate network and i tried to connect to my server and there is a request timeout. This may be due to some proxy issues.

Firstly is your server intranet? If it is not, try using 3G to connect to the server instead.

If it is intranet try to find an alternative company network or use VPN if your company has one

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T16:52:34.383

我建议您首先使用[Charles等工具监控您发送的实际 HTTP 请求/响应](http://www.charlesproxy.com/)

您可以使用 Charles 作为您实际设备的代理，请查看[此处](http://www.charlesproxy.com/documentation/faqs/using-charles-from-an-iphone/)的说明。

希望这可以帮助。

# visual-c++ - 数组和 8x8 矩阵，升序排序，计算重复数字

> ID：14506420
> 
> 赞同：1
> 
> 时间：2013-01-24T16:45:07.617
> 
> 标签：visual-c++

我已经展示了 8x8 矩阵，但我不知道如何对它们进行升序排序。并计算重复的数字，它会相应地打印数字。

经验：

值 \t 计数

52 \t 1

55 \t 3

58 \t 2

等等...

下面的程序是我坚持的地方。(-.-)

```
#include <stdio.h>
void main ()
{
    int v[8][8], row, column, show, show1;

    printf ("Please enter the value for:\n");
    for(row=0; row<8; row=row+1)
    {
        printf ("\nRow %d\n", row+1);
        for(column=0; column<8; column=column+1)
        {
            printf ("Column %d\n", column+1);
            printf ("Please enter Value(v): ");
            scanf ("%d", &v[row][column]);
        }
    }
    printf ("\n");

    for (show=0; show<8; show=show+1)
    {
        printf ("|");
        for (show1=0; show1<8; show1=show1+1)
        {
            printf ("%d\t", v[show][show1]);
        }
        printf ("|");
        printf ("\n\n");
    }

    printf ("\n\nValue\tCount\n");
    for(int j=0; j<8; j++)
        for(int i=0; i<8; i++)
            v[j][i] = i*j;

    int *B = v[0];
    for(int i=0; i<64; i++)
        printf ("%d\n", B[i]);
} 
```

# algorithm - 具有最小时间复杂度的搜索算法

> ID：14506423
> 
> 赞同：0
> 
> 时间：2013-01-24T16:45:12.343
> 
> 标签：algorithm, search

是否有时间复杂度为 O(1) 的搜索算法？

搜索算法 = 从 n 个元素中找到一个元素 x。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T17:05:05.140

尽管如果存在确定性为 O(1) 的搜索算法我会感到惊讶，但好消息是，您可以通过使用布隆过滤器的 O(1) 添加和查找操作获得任意接近 100% 准确度的查找。(http://en.wikipedia.org/wiki/Bloom_filter)

同样，对于具有有限大小的集合（http://en.wikipedia.org/wiki/Perfect_hash_function）存在多种技术，尽管如果这些集合大小非常大，在实践中会出现问题

但是，就一般情况而言，据我所知，答案是不。当然不是在任何实际应用中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T16:49:13.910

是的，创建一个巨大的数组，这样每个可能的值都有一个槽。存储值和查找值的时间复杂度为 O(1)。

### 编辑：

如果还计算初始化时间，那么绝对不可能做出 O(1) 搜索算法。在没有预处理的情况下搜索数组永远不会比 O(n) 更好，并且没有办法在 O(1) 中预处理 n 项。

# python - Python 中的字符串格式化：我可以对所有类型使用 %s 吗？

> ID：14506430
> 
> 赞同：7
> 
> 时间：2013-01-24T16:45:34.967
> 
> 标签：python, string, floating-point, integer, string-formatting

在 Python 中进行**字符串格式化**时，我注意到`%s`将数字转换为字符串。

```
>>> a = 1
>>> b = 1.1
>>> c = 'hello'
>>> print 'Integer: %s; Float: %s; String: %s' % (a, b, c)
Integer: 1; Float: 1.1; String: hello 
```

我不知道其他变量类型，但是这样使用安全`%s`吗？

它肯定比每次都指定类型要快。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-24T16:46:14.523

使用`%s`自动调用`str`变量。由于一切都已`__str__`定义，您应该能够毫无问题地执行此操作（即不会引发异常）。但是，您实际上将打印的是另一个故事...

请注意，在较新的 python 代码中，还有另一个使用该`format`方法的选项：

```
'Integer: {}; Float: {}; String: {}'.format(a,b,c) 
```

这基本上以相同的方式工作，只是一旦您学习了语法，它就会更强大。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-24T16:46:27.280

是的，这正是它的`%s` *意思*；将参数转换为字符串并对其进行插值。

`%d`您还可以指定其他形式的转换，例如`%f`将值转换为不同类型的表示。有关详细信息，请参阅[字符串格式化操作。](http://docs.python.org/2/library/stdtypes.html#string-formatting-operations)

作为替代方案，从 Python 2.6 及更高版本开始，您还可以[使用以下`.format()`方法](http://docs.python.org/2/library/stdtypes.html#str.format)使用不同形式的字符串格式化：

```
print 'Integer: {0}; Float: {1}; String: {2}'.format(a, b, c) 
```

该方法提供了一些额外的功能，例如引用对象的属性、映射中的键或列表中的索引来引用值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T16:54:39.233

另一种选择是使用新样式的字符串格式 - 其行为方式相同。

```
>>> 'integer: {} float: {} string: {}'.format(1, 1.1, 'blah')
'integer: 1 float: 1.1 string: blah' 
```

但是，这也意味着您可以代替编写`str(obj)`do：

```
>>> format(1)
'1'
>>> format(1.1)
'1.1'
>>> format('blah')
'blah' 
```

然后，您可以为其提供格式化选项：

```
>>> format(12345, '>10,')
'    12,345' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-24T17:00:27.060

除了 %s 之外还有其他运算符的原因是为它们操作的数据类型提供特定的格式化功能。

当你使用 %s 时，你得到的只是对要插入的值调用**str () 的结果。**

因此，使用 %s 意味着您将无法强制值的表示符合您可能想要使用的严格格式，因为您被**str** () 的输出所困。

使用其他运算符，可以指定值的格式。IE：也许您希望将字符串中的所有浮点数表示为小数点后 2 位，而不管数字所需的实际小数位数 - 对于这种情况 %s 只是无法完成这项工作。

# jquery - 如何通过 jQuery 插入 wp 短代码

> ID：14506433
> 
> 赞同：0
> 
> 时间：2013-01-24T16:45:47.143
> 
> 标签：jquery, wordpress

我正在使用 .html() jquery 函数来更改我创建的 div 的内容。但是在 .html() 函数中插入短代码在 wp 中不起作用！还有其他方法可以插入短代码吗？或者也许我可以使用另一个 jQuery 函数，所以 wp 会理解短代码？

```
jQuery('.reihenhaus').click(function(){
    jQuery('#mehr_infoz').html('Reihnaus Gr&ouml;&szlig;en von 120m&sup2; bis 166m&sup2; <br/><br/>[tabs tab1="Tab 1" tab2="Tab 2" tab3="Tab 3"][tab]Tab 1 Content [/tab][tab]Tab 2 Content[/tab] [tab]Tab 3  Content [/tab][/tabs] Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa.Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa.')
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T16:50:10.597

由于 Wordpress 基于`PHP`（服务器执行的代码），因此您无法在页面加载 jQuery 后向页面添加简码。短代码需要在页面加载之前由服务器处理。

# c# - 为什么New Relic在慢速Web事务下列出“/System.ServiceModel.Activation.AspNetRouteServiceHttpHandler”？

> ID：14506441
> 
> 赞同：2
> 
> 时间：2013-01-24T16:46:27.787
> 
> 标签：c#, .net, wcf, newrelic

我正在使用 New Relic 收集 .NET 3.5 Web 服务的性能指标。New Relic 告诉我，这个应用程序中最耗时的 Web 事务是“/System.ServiceModel.Activation.AspNetRouteServiceHttpHandler”。我进行了一些研究并了解这与处理对 WCF 应用程序的 HTTP 请求有关，但我不明白为什么它在 New Relic 中显示为它自己的 Web 事务。有人对为什么会发生这种情况有任何建议吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-30T15:48:11.653

New Relic 的 .NET 代理使用具有最高命名优先级的事务中的跟踪器来命名事务。Web 事务可以使用 http 处理程序、asp 名称、MVC 控制器名称或 Web 服务名称来命名，具体取决于在事务执行中调用的跟踪器。没有显式命名事务的跟踪器的后台事务被汇总为单个事务名称。

您可以使用自定义命名设置自定义检测，以更好地了解您的代码，该过程记录在此处：[https ://newrelic.com/docs/dotnet/CustomInstrumentation#metrics](https://newrelic.com/docs/dotnet/CustomInstrumentation#metrics)

如果您在这方面需要更多帮助，我建议您在[https://support.newrelic.com/向我们开一张票](https://support.newrelic.com/)

# android - 如何左右滑动相同的活动

> ID：14506446
> 
> 赞同：0
> 
> 时间：2013-01-24T16:46:41.590
> 
> 标签：android, layout, slide, android-sliding

我有一个活动。我需要将此活动向右和向左滑动，其布局与我在活动中的布局相同。总之，我需要执行 n 次滑动并保持相同的布局。它是具有相同布局的相同活动在每张幻灯片中重复多次。

我看到的关于滑动的例子非常复杂。我需要一个基本的滑动示例，因为我不知道如何开始。

我放了一张我需要的图片。任何人都可以帮助我吗？感谢您的时间和帮助。

![在此处输入图像描述](../Images/bc49de677ae6ae8e67a1851a6db969f2.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T16:50:48.793

为此，您需要使用 ViewPager。

# validation - 将 Grails 验证代码保存在域对象中

> ID：14506447
> 
> 赞同：2
> 
> 时间：2013-01-24T16:46:45.677
> 
> 标签：validation, grails, groovy, dns

我见过的许多 Grails 控制器示例向您展示了如何将验证代码添加到传递到视图和从视图传递的命令类，如下所示：

```
class RegisterCommand {
    String username
    String email

    static constraints = {
         username blank: false, nullable: false, validator: { value ->
             !User.findByUsername(value) }

         email blank: false, nullable: false, email: true
    }
} 
```

这很好，但如果我们需要在另一个控制器中验证用户，可能会导致代码重复。因此，Grails 为您提供了从域类中导入验证规则的选项，如下所示 -

```
static constraints = {
    importFrom User
} 
```

所以在这里，我的验证规则是从我的`User`班级中提取出来的。

这确实有助于 DYR 原则，但是如果我想*有条件*地从域类中导入验证规则怎么办？因此，例如，如果有人选中了表格上的一个框，说他们想通过邮寄方式接收小册子，我只想验证表格上的地址字段。我已经尝试了这个主题的几个变体，但我似乎无法让它工作......这可能吗？

```
static constraints = {
    importFrom User
    addressCheckbox validator: { value, command -> 
        if (value) {
            importFrom Address
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T17:09:16.807

我认为它不起作用，因为`importFrom`在编译时适用于约束构建器层，但您的验证器闭包`importFrom`在运行时的验证阶段调用。

# java - NetBeans 平台应用程序品牌名称限制

> ID：14506448
> 
> 赞同：1
> 
> 时间：2013-01-24T16:46:45.850
> 
> 标签：java, netbeans-7, rcp, netbeans-platform

我真的很喜欢 NetBeans 平台框架，但它有一些“奇怪/隐藏”的特性，几乎不可能找到大多数事情的文档。我希望这会在未来改变，因为它会让一切变得更容易。

现在我的问题，请看下面的截图： ![在此处输入图像描述](../Images/a3c967ee3dc6bbf4df044ded26e858f3.png)

如您所见，NetBeans 报告“应用程序名称无效”。要使名称有效，它必须是“myapp”或“my_app”。当您将项目打包为 Windows 安装程序并安装应用程序时，它将安装为：

C:\Program Files\myapp 或 C:\Program Files\my_app

好吧，如果我想使用大写字母或空格怎么办？例如

C:\Program Files\MY Application Blah blah

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-06T14:44:54.803

尝试手动编辑应用程序的`project.properties`文件。

将一行从

```
app.name=${branding.token} 
```

至

```
app.name=MY Application Blah blah 
```

至少在 Mac 上，这种方法会产生更好的菜单栏应用程序名称，并且可能会产生更好的应用程序包名称。

# sublimetext2 - Sublime Text 选择文本并将插入符号移动到 html 文档中选择的开头

> ID：14506454
> 
> 赞同：0
> 
> 时间：2013-01-24T16:46:58.703
> 
> 标签：sublimetext2

在听到关于 Sublime 的好消息后，我才开始使用它。

我特别喜欢使用 zen 编码插件在 html 标签之间进行选择。但是，当我在 mac OS X 上使用 CONTROL+SHIFT+T 选择了一大块代码时，我希望能够移动到选择的开头而不是用鼠标一直向上滚动。是否有键盘快捷键可以执行此操作？

我也非常喜欢 Mac Rabbit Espresso 中的平衡大括号功能，我知道您可以使用 CTRL + SHIFT + B 向内平衡，并且正在寻找一种在 Sublime Text 中这样做的方法？

向外平衡标签的键盘快捷键被详细记录为 CTRL + SHiFT + N 但我猜有办法做相反的事情吗？

# javascript - javascript settimeout div不显示

> ID：14506455
> 
> 赞同：1
> 
> 时间：2013-01-24T16:47:00.463
> 
> 标签：javascript, settimeout

我用谷歌搜索了几个答案，但我的问题仍然存在。我在 IIS 7 上有一个 .net 网页，代码在 IE9 中运行良好，但在 Firefox 中运行良好。我需要它在两者中都起作用。不知道我做错了什么，请帮忙。

这是一个带有一个多行文本框的简单页面，当我单击提交时，应该会弹出一个隐藏的 DIV 并说，请稍候，此过程中...不要单击任何内容。（他们可能会提交 1000 个项目，因此需要时间。）

奇怪的是我注意到如果我取消注释警报按钮，警报弹出并且我确实看到了 DIV，但是如果我拿走警报按钮，我就看不到它。

这是我的javascript。

```
function do_totals1()
    {
        // alert("Here-1");
        document.getElementById('pleasewaitScreen').style.display = 'block';

        // alert("Here-2!");
        do_totals2();

         window.setTimeout(function () {
         "do_totals2()";
         }, 4000);
        //            
        // alert("Here-3!");
        // window.setTimeout("do_totals2()", 1);
     }

function do_totals2()
    {
         alert("Here-4!");
         wait(4000);
         document.getElementById('pleasewaitScreen').style.display = 'none';
    }

<div id="pleasewaitScreen" style="display:none;position:absolute;z-index:5;top:50%;left:5%;">
 <table bgcolor="#000000" border="1" style="border-color:blue; height:300;width:400" cellpadding="0" cellspacing="0">
    <tr>
        <td style="width:100%;height:100%" bgcolor="#CCCCCC" align="center" valign="middle">
        <br /><br />  
        <font face="Helvetica,Verdana,Arial" size="5" color="#000066"><b>Processing... Don't click on anything until ESN(s) populate the grid below.</b></font>
            <br /><br />
        </td>
    </tr>
 </table>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T16:59:59.527

这可能是您要求的：

```
function do_totals1() {
    document.getElementById('pleasewaitScreen').style.display = 'block';
    // we don't want to call do_totals2 directly, because it is what hides the element.
    window.setTimeout(do_totals2, 4000);  // setTimeout accepts a function reference
}

function do_totals2() {
    // if wait is effectively a thread sleep function, you don't want to use it.
    // if javascript doesn't release control of the thread (there's only one for your browser tab), 
    //the UI will never be updated, and you won't see that the element was shown.
    document.getElementById('pleasewaitScreen').style.display = 'none';
} 
```

如果您所做的只是显示一个元素，然后在 4 秒后将其隐藏，您可以这样做：

```
function do_totalsN(){
    var ele = document.getElementById('pleasewaitScreen');
    ele.style.display = 'block';
    setTimeout(function(){
        ele.style.display = 'none';
    }, 4000);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T17:01:14.543

如果您只想显示“请稍候，此过程中...”，然后在 4 秒后清除它，这样就可以了

```
function do_totals1()
{
    document.getElementById('pleasewaitScreen').style.display = 'block';
    setTimeout(function() {
        document.getElementById('pleasewaitScreen').style.display = 'none';
    }, 4000);
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-24T17:01:44.210

好吧，基本上你不会这样称呼它，你要么这样做：

```
window.setTimeout("do_totals2();",4000); 
```

或者

```
window.setTimeout(function(){
    do_totals2();
},4000); 
```

所以基本上，删除引号，你会没事的

这里有更多信息

[http://www.w3schools.com/jsref/met_win_settimeout.asp](http://www.w3schools.com/jsref/met_win_settimeout.asp)

# linq - 使用 Linq 进行分组

> ID：14506460
> 
> 赞同：4
> 
> 时间：2013-01-24T16:47:11.947
> 
> 标签：linq, c#-4.0, group-by

```
class Program
{
    static void Main(string[] args)
    {
        List<EmployeeLocalRegister> lclEmployees = new List<EmployeeLocalRegister>() { 
            new EmployeeLocalRegister(){Name = "A", Phone= "A1"}, 
            new EmployeeLocalRegister(){Name = "B", Phone= "B1"},
            new EmployeeLocalRegister(){Name = "A", Phone= "A2"}, 
            new EmployeeLocalRegister(){Name = "B", Phone= "B2"},
            new EmployeeLocalRegister(){Name = "B", Phone= "B3"},
            new EmployeeLocalRegister(){Name = "C", Phone= "C1"}};

        List<EmployeeTelDir> telDir = new List<EmployeeTelDir>();

        var queryEmployeeLocalRegisterByName =
        from empl in lclEmployees
        group empl by empl.Name;

        foreach (var employeeGroup in queryEmployeeLocalRegisterByName)
        {
            Console.WriteLine(employeeGroup.Key);
            List<string> phone = new List<string>();
            foreach (EmployeeLocalRegister employee in employeeGroup)
            {

                Console.WriteLine("    {0}", employee.Phone);
                phone.Add(employee.Phone);
            }

            telDir.Add(new EmployeeTelDir() { Name = employeeGroup.Key, Phone = phone });
        }

        Console.ReadKey();
    }
}

public class EmployeeLocalRegister
{
    public string Name;
    public string Phone;
}

public class EmployeeTelDir
{
    public string Name;
    public List<string> Phone;
} 
```

}

我正在使用上面的代码将 a 转换`List<EmployeeLocalRegister>`为`List<EmployeeTelDir>`. 这是唯一的优化方式吗？

我可以使用 Linq 查询`List<EmployeeLocalRegister>`为来回转换编写更简单的代码吗？`List<EmployeeTelDir>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T16:52:55.270

如果您不需要`Console.WriteLine(...)`您的代码，可以使用 LINQ 进行总结：

```
List<EmployeeTelDir> telDir = (from empl in lclEmployees
                               group empl by empl.Name into employeeGroup
                               select new EmployeeTelDir
                               {
                                   Name = employeeGroup.Key,
                                   Phone = (from employee in employeeGroup
                                           select employee.Phone).ToList()  // The ToList() is the Holy Grail of the LINQ queries
                               }).ToList(); 
```

对于反转操作：

```
List<EmployeeLocalRegister> inverse = (from employeeTelDir in telDir
                                       from phone in employeeTelDir.Phone  // Doing 2 from ... in ... successively corresponds to the SelectMany() LINQ method
                                       select new EmployeeLocalRegister
                                       {
                                           Name = employeeTelDir.Name,
                                           Phone = phone
                                       }).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T17:29:21.613

拉姆达方式：

```
var telDir = lclEmployees.GroupBy(e => e.Name, 
                                  (n, p) => new EmployeeTelDir 
                                            { 
                                              Name = n, 
                                              Phone = p.Select(k => k.Phone).ToList() 
                                            }).ToList(); 
```

# javascript - JSF 正在将 Javascript 中的双引号 " 转换为 "

> ID：14506463
> 
> 赞同：0
> 
> 时间：2013-01-24T16:47:22.487
> 
> 标签：javascript, jsf

我需要在 JSF 页面中使用 Javascript 添加动态 html 元素。

```
<ui:define name="head">
    <script type="text/javascript" language="javascript">

        $().ready(function() {
            $(".avisoAlteracao").each(function() {
                $(this).attr("oldValue", $(this).val());
            });
        });

        function checkIfChange(jItem) {
            return jItem.attr("oldValue") != jItem.val();
        }

        function checkChanges() {
            var changed = false;
            $(".avisoAlteracao").each(function() {
                if (checkIfChange($(this)))
                    changed = true;
            });
            return changed;
        }

        function setChangedLabels() {
            var labels = '&lt;ul style="list-style-type: circle;" &gt;';
            $(".avisoAlteracao").each(function() {
                if (checkIfChange($(this))) {
                    label = $("label[for$='" + $(this).attr('id') + "']");
                    labels += "&lt;li&gt;" + label.text() + $(this).val();
                    labels += " -&gt; ";
                    labels += $(this).attr("oldValue") + "&lt;/li&gt;";
                }
            });
            labels += "&lt;/ul&gt;";
            $("#customMessage").html(labels);
        }

    </script>

</ui:define> 
```

好的，这很容易，但这是我从谷歌浏览器得到的：

```
function setChangedLabels() {
            var labels = "<ul>&quot;;
            $(&quot;.avisoAlteracao&quot;).each(function() {
                if (checkIfChange($(this))) {
                    label = $(&quot;label[for$='&quot; + $(this).attr('id') + &quot;']&quot;);
                    labels += &quot;<li>&quot; + label.text() + $(this).val();
                    labels += &quot; -&gt; &quot;;
                    labels += +$(this).attr('oldValue') + &quot;</li>&quot;;
                }
            });
            labels += &quot;</ul>&quot;;
            $(&quot;#customMessage&quot;).append(labels);
        } 
```

我不知道为什么它会改变我的“`&quot;`如果我投入`&lt;`并`&gt;`工作”

我该如何处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T17:28:13.503

这是一个已知的 Mojarra 问题，报告为[问题 2443](http://java.net/jira/browse/JAVASERVERFACES-2443)，已在 2.1.13 中修复。目前[已经](http://javaserverfaces.java.net/)是 2.1.17。看来是时候升级了。

也就是说，您应该更喜欢将 JS 代码放在`.js`文件中。

# java - 在 JSF 2 中从同一命令调用不同的操作

> ID：14506471
> 
> 赞同：1
> 
> 时间：2013-01-24T16:47:59.807
> 
> 标签：java, jsf, jsf-2

`commandButton`我不知道这是否是一个好习惯，但我想根据用户上下文对托管 bean 调用不同的操作。原因是我从应用程序中的不同位置访问页面，并且我希望我的单个命令是一种“返回”按钮到我来自的位置。我已经实现了基于 MyFaces Orchestra Flow 的想法的自定义机制，并在自定义 NavigationHandler 中进行了重定向，但我想知道是否有一种方法可以参数`action`化我的 commandButton 的属性。

欢迎任何建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T17:00:24.200

如果您的目标环境支持 Servlet 3.0 / EL 2.2（Tomcat 7、Glassfish 3 等），或者安装了[JBoss EL](https://stackoverflow.com/questions/3284236/jsf-2-0-method-invocation/3284328#3284328)，那么您可以直接将 deisred 参数传递给方法。所以你可以有

```
public void submit(String argument) {
    // ...
} 
```

和

```
<h:commandButton value="submit" action="#{bean.submit('some')}" /> 
```

或者，基于 EL 范围变量：

```
<h:commandButton value="submit" action="#{bean.submit(some)}" /> 
```

不过还有其他方法。想想`<f:param>`, `<f:setPropertyActionListener>`,`Application#evaluateExpressionGet()`等。其中许多都在`<h:dataTable>`此处的上下文中得到了回答：[如何将选定的行传递给 dataTable 中的 commandLink？](https://stackoverflow.com/questions/4994458/how-can-i-pass-a-parameter-to-a-commandlink-inside-a-datatable/4994833#4994833)（在数据表之外，原理没有太大区别）

# c# - 从 ASP.Net 页面重定向后，在 Salesforce 案例中传递和填充字段值

> ID：14506473
> 
> 赞同：0
> 
> 时间：2013-01-24T16:48:13.100
> 
> 标签：c#, asp.net, salesforce

我们有一个 Asp .net 应用程序，其中有一个按钮；单击它会带您进入销售人员创建案例页面。是否有可能当我们将它们带到创建案例页面时，我可以传递一些值并填充该页面上的一些字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T19:40:14.257

这实际上不是 Salesforce 特定的问题；) 使用 URL 参数预填充表单很常见，您需要知道`name`要填写的字段，然后就可以开始了。

例如：`http://stackoverflow.com/search?q=salesforce`

[http://raydehler.com/cloud/clod/salesforce-url-hacking-to-prepopulate-fields-on-a-standard-page-layout.html](http://raydehler.com/cloud/clod/salesforce-url-hacking-to-prepopulate-fields-on-a-standard-page-layout.html)是您可以阅读的经典博客文章 有一些众所周知的字段名称（对于标准字段），可以在[http://phollaio.tumblr.com/post/22058016777/how-to-obtain-a-field-id](http://phollaio.tumblr.com/post/22058016777/how-to-obtain-a-field-id)上找到短名单，但我想强调一个事实您所需要的只是检查页面的来源并进行实验。

示例预填充案例表单（取决于您在布局上显示的字段以及您拥有的选项列表值！）：`https://na5.salesforce.com/500/e?cas5=Other&cas11=Web&cas14=Hello StackOverflow&cas15=Some long text here`

为了安全起见，您应该对参数进行urlencode。

# jquery - 在不存在的元素中委托

> ID：14506474
> 
> 赞同：1
> 
> 时间：2013-01-24T16:48:15.213
> 
> 标签：jquery, delegates

如果我这样做会发生什么：

```
$('#elementID').delegate('.findclick a', 'click', function()
{
   alert("test");
} 
```

首先：

`#elementID`文档中不存在

或者

`#elementID`存在但`.findclick a`不存在。

真的很糟糕吗？还是根本不重要？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T16:51:50.580

它不会触发...所以没关系。

如果您动态添加这些元素（使用`.on()`），它将触发并工作。

* * *

例子：

```
$(document).on('click', 'a.delegatedElementThatDoNotExistYet', function() {
    alert("Welcome");
}); 
```

没有任何反应，因为委托的元素不存在，但是：

```
setTimeout(function() {
   $('body').html('<a class="delegatedElementThatDoNotExistYet">Hello!</a>');
},5000); 
```

如果几秒钟后（在我的示例中为 5）我们添加委托的元素，它将触发警报。

这是**[JsFiddle上的示例](http://jsfiddle.net/toroncino/9Syqh/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T16:51:58.983

*   第一种情况并不是很糟糕，因为您不会将侦听器附加到不存在的节点。
*   如果在某个时候你有你的`.findclick a` 孩子，第二个可能会变得很糟糕`#elementID`。

```
function(){
   alert("test");
} 
```

每次单击这些锚点时都会触发。

关键是您将侦听器绑定到父级，它会照顾孩子

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T16:52:24.320

如果`#elementID`不存在，则什么也不会发生；该元素不存在，因此无法将事件处理程序绑定到它。

如果`#elementID`确实存在，那么恭喜您，您刚刚设置了[事件委托](http://api.jquery.com/on/#direct-and-delegated-events)。简而言之，事件委托是一种技术，通过它您可以在尚不存在的元素上设置事件处理程序，但会在页面加载后的某个时间点出现。

`.delegate()`第二种情况正是**打算**如何使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T17:00:46.553

> `#elementID`文档中不存在

它创建一个函数，然后将其作为委托（为空）应用于结果集；所以什么也没有发生（创建的函数最终会被垃圾收集）。

> `#elementID`存在但`.findclick a`不存在。

同样，它创建了一个函数，然后将其作为委托应用于结果集（应该只包含*一个*元素）。

现在，无论何时`#elementID`点击其中的任何元素，jQuery 都会遍历已注册的委托（应该只有一个）以找到匹配的选择器 ( `'.findclick a'`)。

当您稍后`.findclick a`在下面创建`#elementID`时，单击它时它将开始运行您的功能。

# model - 有没有更好的方法在 Codeigniter 中编写 get_all 模型方法？

> ID：14506477
> 
> 赞同：1
> 
> 时间：2013-01-24T16:48:20.130
> 
> 标签：model, codeigniter-2

我正在使用 Codeigniter 中的课程任务管理器模型，并试图找出我还能做些什么来改进 get_all 方法。

这是一个好方法吗（见下面的代码）？我连接一些值的原因是因为我试图在控制器中做更少的工作。这个可以吗？

到目前为止，任务管理器使用 4 个表 - 用户、任务、任务类型（编辑、审查等）和课程

这是代码

```
function get_tasks(){

    $query = $this->db->query(' 
    SELECT 

            tasks.id,
            tasks.created,
            tasks.expires,

            types.name as type,
            courses.name as course,

            CONCAT_WS(" ", assigned_by.first_name, assigned_by.last_name) as assigned_by,
            CONCAT_WS(" ", users.first_name, users.last_name) as user

        FROM
            '.$this->tables['tasks'].' tasks
        LEFT JOIN 
            '.$this->tables['types'].' types ON (types.id = tasks.type_id)
        LEFT JOIN 
            '.$this->tables['users'].' assigned_by ON (assigned_by.id = tasks.assigned_by_id)
        LEFT JOIN 
            '.$this->tables['users'].' users ON (users.id = tasks.user_id)
        LEFT JOIN 
            '.$this->tables['courses'].' courses ON (courses.id = tasks.course_id)

        ORDER BY 
            tasks.created ASC'
    ); 

    return $query->result();

} 
```

这就是我在控制器中调用方法的方式：

```
$this->load->model('Task_model', 'task');

$this->data['tasks'] = $this->task->get_tasks(); 
```

# java - 如何创建一个新的缓冲读取器对象，该对象从另一个停止的位置开始读取？

> ID：14506479
> 
> 赞同：4
> 
> 时间：2013-01-24T16:48:32.700
> 
> 标签：java, bufferedreader, bufferedinputstream

我有一个缓冲阅读器，它逐行读取一个大文件以删除重复的行。

而不是将整个文件加载到内存中，我想通过使用两个缓冲读取器来做到这一点：第一个迭代文件的固定部分，将每个部分一个接一个地加载到内存中。

在每次迭代中，第二个缓冲读取器将从第一个缓冲读取器停止的位置到文件末尾检查加载的部分是否不再存在于文件中。

问题是我不能让新的独立缓冲读取器对象（不是引用）从第一个停止的位置开始。

我需要一种方法来找出第一个缓冲阅读器的文件位置，以便我可以告诉第二个缓冲阅读器从哪里开始。

到目前为止我已经尝试过：

将第一个对象发送到第二个的构造函数。

这实际上有效，但两者都有相同的迭代器，所以第一个与第二个一起移动到文件末尾

```
BufferedReader cleanfilereader2 = new BufferedReader(cleanfilereader); 
```

`bufferedReader.mark()`设置缓冲阅读器的位置，但我仍然需要知道第一个阅读器的位置。

笔记：

*   行数不是恒定的
*   无法将整个文件加载到内存中
*   时间和记忆都是问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T17:21:07.103

如果文件很大并且时间问题，这*可能*不是最佳方式，因为您必须经常阅读每一行（O(n^2) 次）。

*如果*您有足够的内存，我建议逐行读取文件并将每行的哈希值存储在 ArrayList 中。每行只需要 4 个字节（一个整数）。然后你可以在这个数组列表中搜索重复项（快，因为它在内存中）。这为您提供了所有潜在重复项的列表，您只需在删除它们时检查它们是否是真正的重复项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T17:14:07.993

如果需要读取当前位置，可以使用[FileChannel](http://docs.oracle.com/javase/6/docs/api/java/nio/channels/FileChannel.html)作为

> 文件通道在其文件中具有可以查询和修改的当前位置

[您可以使用Channels.newInputStream()](http://docs.oracle.com/javase/6/docs/api/java/nio/channels/Channels.html#newInputStream%28java.nio.channels.ReadableByteChannel%29)`InputStream`从通道创建一个（如果您不想关闭底层通道，则无需关闭它）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T17:50:10.320

试试这个……（如果我没听错的话。）

```
import java.io.*;
class delete{
public static void main(String args[])throws IOException{
FileInputStream fis1=new FileInputStream("delete.java");
FileInputStream fis2=fis1;
String temp="";
byte buff[]=new byte[100];
while(true){
if (fis1.read(buff)==-1)break;
temp=new String(buff);
System.out.print(temp);
if(fis2.read(buff)==-1)break;
temp=new String(buff);
System.out.print(temp);
}}
} 
```

输出：上面的代码。

这个问题真的很有趣。所以请评论讨论。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T17:02:10.060

您需要`BufferedReader.skip`但没有 C 喜欢`tell`给出当前位置。因此删除 BufferedReader，并使用一个简单的随机访问文件，或 java.nio，一个内存映射文件缓冲区。

# r - 打开新的 rgl 设备时，绘图样式与默认样式有很大不同

> ID：14506480
> 
> 赞同：3
> 
> 时间：2013-01-24T16:48:50.167
> 
> 标签：r, plot, rgl

当我在使用 rgl.open() 并将 bg 设置为白色后，使用 rgl 包在不同的画布（rgl 设备）中绘制多个 3d 图形时，绘图风格似乎与默认风格大不相同。有没有办法设置这个？请看下面的图片。当旋转这两个图表时，您可以获得非常不同的体验。您可以尝试在默认画布中绘制相同的图形，打开一个新的并绘制相同的图片。

![默认绘图画布](../Images/2e3b382948992d9778058ca5d0b38e80.png)![添加画布](../Images/076632917707cc653775b3ae3850c89d.png)

此外，有没有办法将坐标的外框从立方体更改为球体？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T17:10:03.680

(**编辑**) 使用`open3d()`而不是`rgl.open()`打开新窗口。该文档警告不要将`rgl.*`呼叫与`*3d`呼叫混合，我想这是一个例子。这是三个图——默认值`rgl.open()`、 和`open3d()`...

```
library(rgl)
plot3d(1:4,1:4,1:4)
rgl.open()
plot3d(1:4,1:4,1:4)
open3d()
plot3d(1:4,1:4,1:4) 
```

结果并排：

![在此处输入图像描述](../Images/a0aef5cf4951601a609ba97620720435.png)

会话信息：

```
R Under development (unstable) (2012-12-14 r61321)
Platform: i686-pc-linux-gnu (32-bit)
[locale snipped]
attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     
other attached packages:
[1] rgl_0.92.894 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T17:04:52.640

如果您想在会话之间保持相同的设置，我认为您需要在启动时打开包 'rgl'（请参阅 参考资料`?Startup`）并指定`rgl.materials`您想要使用的设置。我从 help(package=rgl) 的索引中搜索了选项设置，但找不到选项设置。工作区中有一个名为的列表对象`r3dDefaults`，可以对其进行修改。也许：

```
r3dDefaults$bg$color <- "white"   # Change the value to get something different
# > names(r3dDefaults)
# [1] "userMatrix" "mouseMode"  "FOV"        "bg"         "family"     "material" 
```

`*.r3d`命令和`rgl.*`命令之间的设备行为之间的差异`?r3d`在`?open.3d`.

关于对球坐标参考的渴望，请参见`help(rgl.bg)`页面并尝试“sphere=TRUE”参数。（我觉得它不那么令人愉快，但 YMMV。）

```
rgl.open()
rgl.bg(sphere=TRUE, color=c("grey","blue"), lit=FALSE, back="lines" ) 
```

# iphone - 如何获取 nsmutablearray 中特定索引的对象

> ID：14506483
> 
> 赞同：2
> 
> 时间：2013-01-24T16:48:57.963
> 
> 标签：iphone, ios, objective-c, nsmutablearray, uilocalnotification

嗨，我在 scheduleNotification 方法中获得正确的描述时遇到了一些问题，由于remediatearray 超出范围，我得到了sigbart。如何在nsmutablearray 中获取该特定索引的对象

我在 notify.alertbody 的 scheduleNotification 方法中得到了错误的描述，在 cellforrow 我得到了正确的描述

我无法获得正确的描述，因为我无法在 schedulenotification 方法中执行 objectatindex ..

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    static NSString *cellIdentifier=@"cellIdentifier";
    PPtableCell *cell=(PPtableCell*)[tableView dequeueReusableCellWithIdentifier:cellIdentifier];

    if (cell==nil) {
        cell=[[PPtableCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];
        cell.cellDelegate = self;
    }

    cell.notifyMe.on = NO;
    cell.remedyTextLabel.text=[[remedyArray objectAtIndex:indexPath.row]objectForKey:@"RemedyTxtDic"];

    return cell;
 }

    else {
        return nil;
    }

}

- (UILocalNotification *)scheduleNotification :(int)remedyID {

    [[UIApplication sharedApplication] cancelAllLocalNotifications];

    Class cls = NSClassFromString(@"UILocalNotification");
    if (cls != nil) {

        UILocalNotification *notif = [[cls alloc] init];

        notif.timeZone = [NSTimeZone defaultTimeZone];

        NSLog(@"%d",remedyID);

        NSString *descriptionBody=[[remedyArray objectAtIndex:remedyID]objectForKey:@"RemedyTxtDic"];

        NSLog(@"%@",descriptionBody);

        notif.alertBody = [NSString stringWithString:descriptionBody]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T17:14:41.613

*   小点，但`-objectAtIndex:`需要一个`NSUInteger`，而不是一个`int`。

*   我假设`remedyArray`一个实例变量（？）

我不认为你的问题出在你展示的方法上，除了参数`-objectAtIndex:`是错误的类型之外，它应该可以正常工作。你能显示正在调用的代码`scheduleNotification:`吗？

如果我是你，我不会使用对象的数组索引来定位它，你可能会遇到竞争条件和数组在通知安排时发生变化的情况。相反，您应该对数组进行线性搜索，或者如果这太慢，您应该保留它的哈希映射。

或者更好的是，您的 Remedy 对象应该是一个 NSManagedObject，然后您就可以免费获得所有的表处理和查找功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T06:32:42.897

嗨，我能够解决它..这是我的代码

```
- (UILocalNotification *)scheduleNotification :(int)remedyID
{
    [[UIApplication sharedApplication] cancelAllLocalNotifications];

    Class cls = NSClassFromString(@"UILocalNotification");
    if (cls != nil)
    {
        UILocalNotification *notif = [[cls alloc] init];
        notif.timeZone = [NSTimeZone defaultTimeZone];

        NSString *descriptionBody;

        for (int i=0; i<remedyArray.count; i++)
        {
            int arrayid = [[[remedyArray objectAtIndex:i]objectForKey:@"RemedyID"]intValue];
            if (arrayid == remedyID)
            {
                descriptionBody=[[remedyArray objectAtIndex:i]objectForKey:@"RemedyTxtDic"];
                break;
            }

        }

        NSDateComponents *components = [[NSDateComponents alloc] init];
        [components setDay:25];
        [components setMonth:1];
        [components setYear:2013];
        [components setMinute:45];
        [components setHour:11];

        NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
        NSDate *date = [gregorian dateFromComponents:components];

        notif.alertBody = [NSString stringWithString:descriptionBody];
        notif.alertAction = @"Show me";
        notif.soundName = UILocalNotificationDefaultSoundName;
        notif.applicationIconBadgeNumber = 1;

        notif.fireDate = date;

        NSDictionary *userDict = [NSDictionary dictionaryWithObject:notif.alertBody
                                                             forKey:@"kRemindMeNotificationDataKey"];
        notif.userInfo = userDict;

        [[UIApplication sharedApplication] scheduleLocalNotification:notif];

        return notif;
    }
    else
    {
        return nil;
    }

} 
```

# java - 调用绘制后 JPanel 未在 JFrame 中显示

> ID：14506485
> 
> 赞同：0
> 
> 时间：2013-01-24T16:49:07.667
> 
> 标签：java, swing, jpanel, repaint, paintcomponent

我目前正在实施一个简单的 GUI 界面来与 Lego Mindstorm NXT 进行交互。我当前的问题在于我的界面上的油漆问题。当我的 MainUI 加载时，它会调用一个名为 GirdPanel() 的方法来设置我的 GridPanel。MainUI 扩展了 JFrame，然后将此面板添加到它的 JFrame 调用中。这是解决此问题的 MainUI 的完整代码。

```
 public MainUI(){
    setSize(700, 600);

    PathPanel pathPanel = new PathPanel(controller);
    add(pathPanel, BorderLayout.WEST);
    CurrentPath.getInstance().addPathDataListener(pathPanel);
    CurrentPath.getInstance().addPointSelectionListener(pathPanel);

    gridPanel();
    add(gridPanel, BorderLayout.CENTER);

    robotControlBar();
    add(robotControls, BorderLayout.NORTH);

    setJMenuBar(menuPanel());
    setDefaultCloseOperation(EXIT_ON_CLOSE);
    setVisible(true);
}

public void gridPanel(){
    gridPanel = new JPanel(new BorderLayout());
    WGraph graph = new WGraph();

    gridPanel.add(graph, BorderLayout.CENTER);

} 
```

WGraph 是我的类，它扩展了 JPanel 并控制该程序的图形显示。

```
public class WGraph extends JPanel{

public WGraph(){
    //WGraph Panel property setup
    setLayout(new BorderLayout());
    //Variable creation
    points = new ArrayList<Dot>();
    //Label to display coordinates of selected point
    pointDisplay = new JLabel("Selected point at: None Chosen");

    //testPoints(); //Comment Out when test dots not needed.

    //Create Graph Panel
    panel = new JPanel();
    panel.setBackground(PANEL_COLOR);

    //Mouse Listeners for Panel
    MouseEventHandler mouseListener = new MouseEventHandler();
    panel.addMouseListener(mouseListener);
    panel.addMouseMotionListener(mouseListener);

    //Adding components to the WGraph panel
    add(pointDisplay, BorderLayout.NORTH);
    add(panel, BorderLayout.CENTER);

    repaint();
}
public void paintComponent(Graphics g){
    // invokes default painting for JFrame; must have this!
    super.paintComponent(g); 

    // paint on the canvas rather than the JFrame
    Graphics pg = panel.getGraphics(); 
    System.out.println("*"); //Print out to see when repaint has been called. for testing only
    int width = panel.getWidth();
    int height = panel.getHeight();
    pg.setColor(GRID_COLOR);

    for (int i = 50; i < width; i+=50) {
        pg.drawLine(i, 0, i, height);
    }

    for (int i = 50; i < width; i+=50) {
        pg.drawLine(0, i, width, i);
    }

    Dot previousPoint = null;

    for (int i = 0; i < points.size(); i++) {
        Dot currentPoint = points.get(i);
        currentPoint.draw(pg);

        if (previousPoint != null) {
            pg.setColor(Dot.DESELECTED_COLOR);
            pg.drawLine(new Float(previousPoint.getCenter().x).intValue(), 
                    new Float(previousPoint.getCenter().y).intValue(), 
                    new Float(currentPoint.getCenter().x).intValue(), 
                    new Float(currentPoint.getCenter().y).intValue());
        }

        previousPoint = currentPoint;
    }
} 
```

所以毕竟我可以描述我的问题。问题出在图形面板上，它也不会按预期显示。我试图确定原因。当前，当程序加载时，它看起来像这样。LINK1 它根本不显示图表，但是当我下拉 JComboBox 时，它会出现。LINK2 当 JComboBox 选择了一个项目并关闭时，它也会重复。LINK3 但是，当您尝试与之交互时，它会再次消失。评论中的 LINK4

有人在我的 JFrame 或 JPanel 构造中看到任何明显的错误吗？你有什么建议可以帮助我弄清楚发生了什么吗？

旁注：Paint 函数在框架首次加载时被调用 3 次。当 JComboBox 打开时再一次。当 JComboBox 关闭时再一次。最后是更多次尝试通过单击图表来与图表互动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T19:01:53.573

为什么要使用这条线`Graphics pg = panel.getGraphics();`并使用`pg`对象在面板上绘制点？为什么不创建另一个类来扩展`JPanel`并覆盖其`paintComponent`方法以绘制所有必需的点，然后将该覆盖 Jpanel 类的对象添加到 WGraph 面板？

例如考虑下面给出的代码：

```
import java.awt.Container;
import java.awt.BorderLayout;
import java.awt.Graphics;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
import javax.swing.JFrame;
import javax.swing.JComboBox;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

class MyFrame extends JFrame implements ActionListener
{
    private JComboBox jcbShape;
    private WGraph jpGraph;
    public MyFrame()
    {
        super("GridFrame");
    }
    public void prepareGUI()
    {
        Object[] items= {"Line","Rectangle","Circle"};
        jcbShape = new JComboBox(items);
        jpGraph = new WGraph();
        Container container = getContentPane();
        container.add(jpGraph);
        container.add(jcbShape,BorderLayout.NORTH);
        jcbShape.addActionListener(this);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setSize(300,400);
    }
    @Override
    public void actionPerformed(ActionEvent evt)
    {
        String sShape = (String)jcbShape.getSelectedItem();
        jpGraph.setShape(sShape);
    }
    public static void main(String[] st)
    {
        SwingUtilities.invokeLater( new Runnable()
        {
            @Override
            public void run()
            {
                MyFrame myFrame = new MyFrame();
                myFrame.prepareGUI();
                myFrame.setVisible(true);
            }
        });
    }
}
class WGraph extends JPanel
{
    private String sShape = "Line";
    public void setShape(String shape)
    {
        sShape = shape;
        repaint();
    }
    @Override
    public void paintComponent(Graphics g)
    {
        super.paintComponent(g);
        if ("Line".equalsIgnoreCase(sShape))
        {
            g.drawLine(10, 20, 100, 200);
        }
        else if ("Circle".equalsIgnoreCase(sShape))
        {
            g.drawOval(50, 100 , 200, 200);
        }
        else if ("Rectangle".equalsIgnoreCase(sShape))
        {
            g.drawRect(10, 20, 150, 200);
        }
    }
} 
```

# eclipse - Eclipse p2 升级后调用前/后脚本？

> ID：14506490
> 
> 赞同：0
> 
> 时间：2013-01-24T16:49:15.397
> 
> 标签：eclipse, eclipse-plugin, p2

假设我在 Eclipse 中安装了一个应用程序（一堆功能）。现在，我为该应用程序创建了一个新版本的 p2 存储库，并准备好为该应用程序的新版本升级同一个 Eclipse。

有什么办法，我可以在 p2 升级后挂钩一个后期处理脚本吗？

我知道 p2 接触点可以挂钩一些安装操作，但这只是每个插件或功能的前/后操作。

我想要的是在整个升级之前和之后的一个单一操作（不是单独的插件/功能安装）。

有人有什么想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T08:50:24.530

将所有插件和功能包装在一个功能中，并将 p2 接触点附加到该包装功能。

# php - php glob模式匹配任意位数

> ID：14506491
> 
> 赞同：12
> 
> 时间：2013-01-24T16:49:15.843
> 
> 标签：php, glob

是否可以使用 php glob 函数匹配任意数量的数字？我正在尝试匹配以二到四位数字结尾的图像缩略图的文件名。

我知道我可以提供一个数字范围，但这仅匹配一个字符：

```
glob("thumbname-[0-9]-[0-9].jpg") 
```

这将匹配 thumbname-1-1.jpg 但不匹配 thumbname-10-10.jpg 等。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-24T17:01:17.080

尝试使用：`glob("thumbname-[0-9]*-[0-9]*.jpg")`

我做了一个测试，它对我有用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-24T17:03:21.620

glob() 的替代方法，使用带有正则表达式的 recursiveDirectoryIterator

```
$Directory = new RecursiveDirectoryIterator('path/to/project/');
$Iterator = new RecursiveIteratorIterator($Directory);
$Regex = new RegexIterator($Iterator,
    '/^thumbname-[0-9]*-[0-9]*\.jpg$/i', 
    RecursiveRegexIterator::GET_MATCH
); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-11-30T10:44:14.370

您可以将数字拆分为不同的全局数组并将它们合并。

例如，首先将 0-9 的所有图像放入一个数组中：

```
$g1 =  glob('thumbname-[0-9].jpg'); 
```

之后，您创建另一个数组，其中包含从 10 到 99 的数字：

```
$g2 =  glob('thumbname-[0-9][0-9].jpg'); 
```

现在您将这 2 个数组合并为一个并从 0-99 中获取所有数组：

```
$gResult = array_merge($g1, $g2); 
```

您可以随意扩展它，只需添加一个`[0-9]`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-14T14:37:36.693

以下 glob 模式很复杂，但有效：

```
+([0-9]|!(*[a-z]*)[0-9]) 
```

匹配**数**：**1、13、50000** **_** _

 **不匹配：**1a** , **a1** , **1a1****

# jquery - jQuery按钮单击以更改显示无显示不会在表单上工作

> ID：14506493
> 
> 赞同：-1
> 
> 时间：2013-01-24T16:49:17.863
> 
> 标签：jquery, html, toggle

我在表格中有一个表格，想要显示一半的表格，一旦填写完毕，用户可以按第 2 步按钮以在相同的表格和 div 中切换其下方的其余表格。

我试图使用一个名为 hideform 的 div id 将显示属性更改为无，直到单击按钮

**HTML**

```
 <div id="form">
        <h1>Booking</h1>
        <p>Fill in form</p>
        <form id="contactform">
        <table id="formtable">
        <tr>
        <td>
        <label class="label" for="name">Full Name</label>
        </td>

        <td>
        <input class="input" id="name" type="text">
        </td>
        </tr>

        <tr>
        <td>
        <label class="label" for="email">E-mail Address</label>
        </td>

        <td>
        <input class="input" id="email" type="email">
        </td>
        </tr>

        <tr>
        <td>
        <label class="label" for="date">Date</label>
        </td>

        <td>
        <input class="input" type="text" id="datepicker" />
        </td>
        </tr>

        <tr>
        <td>
        </td>
        <td>
        <input id="continue" type="button" class="submitbtn" value="Continue.." >

        </td>
        </tr>

        <div id="hideform">
        <tr>
        <td>
        <label class="label" for="telephone">Telephone</label>
        </td>

        <td>
        <input class="input" id="telephone" type="text">
        </td>
        </tr>

        <tr>
        <td>
        <label class="label" for="location">Location</label>
        </td>

        <td>
        <input class="input" id="location" type="text">
        </td>
        </tr>

        <tr>
        <td>
        </td>
        <td>
        <input id="submit" type="submit" class="submitbtn" value="Submit" >

        </td>
        </tr>
        </div>
        </table>
        </form> 

    </div>  

        <script>
        $("#submit").click(function () {
        $(".hide").show("slow");
        });    
        </script> 
```

**CSS**

```
#form{
    float:left;
    background:#0b0b0b;
    padding:0 0 10px 0;
    border-radius:3px;
    width:29%;
    margin:0 15px 0 0;
}

#hideform{
    display:none;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T17:08:55.410

1.  你有一个`div`包裹你桌子的一部分——不好。
2.  您没有任何具有该属性的元素`class="hide"`- jQuery 将找不到要[显示](http://api.jquery.com/show/)的任何内容。

鉴于您已定义不通过 CSS 显示具有“隐藏”类的元素，请尝试以下操作：

```
<div id="form">
  <h1>Booking</h1>
  <p>Fill in form</p>
  <form id="contactform">
    <table id="formtable">
      <tr>
        <td>
          <label class="label" for="name">Full Name</label>
        </td>
        <td>
          <input class="input" id="name" type="text" />
        </td>
      </tr>
      <tr>
        <td>
          <label class="label" for="email">E-mail Address</label>
        </td>
        <td>
          <input class="input" id="email" type="email" />
        </td>
      </tr>
      <tr>
        <td>
          <label class="label" for="date">Date</label>
        </td>
        <td>
          <input class="input" type="text" id="datepicker" />
        </td>
      </tr>
      <tr>
        <td></td>
        <td>
          <input id="continue" type="button" class="submitbtn" value="Continue.." >
        </td>
      </tr>
      <tr class="hidden">
        <td>
          <label class="label" for="telephone">Telephone</label>
        </td>
        <td>
          <input class="input" id="telephone" type="text" />
        </td>
      </tr>
      <tr class="hidden">
        <td>
          <label class="label" for="location">Location</label>
        </td>
        <td>
          <input class="input" id="location" type="text" />
        </td>
      </tr>
      <tr class="hidden">
        <td>
        </td>
        <td>
          <input id="submit" type="submit" class="submitbtn" value="Submit" />
        </td>
      </tr>
    </table>
  </form> 
</div>

<script>
  $(document).ready(function() {
    $('#contactform').on('click', '#continue', function() {
      $('.hidden').show('slow');
    });
  });
</script> 
```

看到这个小提琴：http: [//jsfiddle.net/fragmentedreality/Z2JQa/1/](http://jsfiddle.net/fragmentedreality/Z2JQa/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T16:53:17.127

您正在尝试显示`.hide`HTML 中不存在的元素。

表单的 HTML

```
<input id="submit" type="submit" class="submitbtn" value="Submit" > 
```

jQuery

```
<script type="text/javascript">
$(function() {
    $("#submit").click(function () {
        $("#hideform").show("slow");
    });
});    
</script> 
```

或者，您可以从以下位置修改您的 HTML：

```
<div id="hideform"> 
```

至：

```
<div class="hide"> 
```

并从以下位置更改css：

```
#hideform{display:none} 
```

至

```
.hide{display:none} 
```

本质上，我会研究[jquery 选择器](http://www.w3schools.com/jquery/jquery_ref_selectors.asp)的工作原理，以便您更好地了解它们的工作原理。

# python - 画布背景中的图像，Python

> ID：14506497
> 
> 赞同：0
> 
> 时间：2013-01-24T16:49:24.123
> 
> 标签：python, image, canvas, tkinter

我想将自己的图像放在画布的背景中。我做了这个代码：

```
size = (800,600)
im = Image.new('RGB',size)
pix = im.load()
for i in range(size[0]):
    for j in range(size[1]):
        pix[i,j] = (100,100,100) 
im.save('ima5.png')

im2 = ImageTk.PhotoImage(im)

canvas = Tkinter.Canvas(width=Width, height=Height, bg=im2) 
```

我有这个错误：`_tkinter.TclError: unknown color name "pyimage1"`，我知道这就是为什么图像没有画布预期的格式。如何将 im2 作为画布的背景？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T17:05:25.000

bg/background 属性需要颜色，而不是图像。要将图像用作背景，请使用`create_image`画布的方法：

```
import Image, ImageTk, Tkinter

im = ImageTk.PhotoImage(Image.open("<path\\to\\image.jpg-ect>").resize((800,600)))
canvas = Tkinter.Canvas(Parent, width=WIDTH, height=HEIGHT)
canvas.pack() #place(), etc.
Canvas_Image = canvas.create_image(0,0 image=im, anchor="nw") 
```

# wpf - WPF：属性绑定不会在运行时更新

> ID：14506498
> 
> 赞同：2
> 
> 时间：2013-01-24T16:49:24.563
> 
> 标签：wpf, mvvm, datagrid, combobox, telerik

我需要你的帮助。我在我的应用程序中使用 MVVM 设计模式。我的数据网格中有一个组合框：

```
<telerik:RadGridView AutoGenerateColumns="False" Name="rgvData" ItemsSource="{Binding Data}">
        <telerik:RadGridView.Columns>
            <telerik:GridViewColumn  Header="Department">
                <telerik:GridViewColumn.CellTemplate>
                    <DataTemplate>
                        <telerik:RadComboBox
                                            ItemsSource="{Binding RelativeSource={RelativeSource Mode=FindAncestor,AncestorType={x:Type UserControl}},Path=DataContext.Departments}"
                                            SelectedValue="{Binding DEP_LINK,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                            SelectedValuePath="LINK"
                                            DisplayMemberPath="TITLE">
                        </telerik:RadComboBox>
                    </DataTemplate>
                </telerik:GridViewColumn.CellTemplate>
            </telerik:GridViewColumn>
        </telerik:RadGridView.Columns>
    </telerik:RadGridView> 
```

Data 是 DATA 的 ObservableCollection。Departments 是 DEPARTMENTS 的 ObservableCollection。这两个类都是 SQL Server 中的实体。

现在我希望根据 DATA 类的 IsDepartmentUsed 属性对组合框进行着色。这是一种风格：

```
<telerik:RadComboBox.Style>
   <Style TargetType="{x:Type telerik:RadComboBox}">
       <Style.Triggers>
           <DataTrigger Binding="{Binding IsDepartmentUsed}" Value="False">
               <Setter Property="Background" Value="Red"/>
           </DataTrigger>
           <DataTrigger Binding="{Binding IsDepartmentUsed}" Value="True">
               <Setter Property="Background" Value="Transparent"/>
           </DataTrigger>
       </Style.Triggers>
   </Style>
</telerik:RadComboBox.Style> 
```

刚刚打开窗口时它工作正常。但是，如果我更改组合框的值，它不会改变颜色！

IsDepartmentUsed 属性如下所示：

```
public partial class DATA
{
    public bool IsDepartmentUsed
    {
        get
        {
            if (this.DEPARTMENTS.ISUSED != null)
            {
                return Convert.ToBoolean(this.DEPARTMENTS.ISUSED);
            }
            return false;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T17:13:30.257

您的 UI 不知道该属性已更改，因此不知道它需要更新。每当属性更改时，您都需要触发`PropertyChanged`事件处理程序。`IsDepartmentUsed``IsUsed`

听起来您正在使用 Entity Framework 之类的东西来生成模型，所以如果我正确理解了您的数据层次结构，您的部分`Data`类可以将`CollectionChanged`事件处理程序附加到`Departments`集合中，从而向内部的类添加或删除`PropertyChange`事件处理程序`Department`它反过来会在属性更改的`IsDepartmentUsed`任何时候引发更改通知。`IsUsed`

```
void Data()
{
    this.Departments.CollectionChanged += Departments_CollectionChanged;
}

void Departments_CollectionChanged (object sender, NotifyCollectionChangedEventArgs e)
{
    if (e.NewItems != null)
    {
        foreach(Department item in e.NewItems)
            item.PropertyChanged += Department_PropertyChanged;
    }
    if (e.OldItems != null)
    {
        foreach(Department item in e.OldItems)
            item.PropertyChanged -= Department_PropertyChanged;
    }
}

void Department_PropertyChanged(object sender, PropertyChangedEventArgs e)
{
    if (e.PropertyName == "IsUsed")
        RaisePropertyChanged("IsDepartmentUsed");
} 
```

我在这里假设您的`Department`类实现了[INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/ms743695.aspx)，因为您将它用于您的`Model`层。

（你的代码有点难以理解，因为你说`DEPARTMENTS`的是​​ an `ObservableCollection`，但是 an`ObservableCollection`没有`ISUSED`你在 C# 代码中的属性，所以我可能误解了你的数据层次结构。同样的概念应该适用 - 附加一些东西到类的事件，每当更改时都会`PropertyChanged`引发`PropertyChanged`通知）`IsDepartmentUsed``IsUsed`

# c# - 将 Html.Partial 添加到 Javascript

> ID：14506499
> 
> 赞同：4
> 
> 时间：2013-01-24T16:49:25.983
> 
> 标签：c#, javascript, asp.net, html, razor

我想用 ASP.NET Html.Partial 视图在 Javascript 中设置一个字符串。问题是 Html.Partial 给出了一个 HtmlString 而不是一个 Javascript 字符串，例如我可以用 JQuery 处理。

Javascript代码：

```
myfunction= function () {
   ...
   var badge=@Html.Partial("_UserBadge",User.Identity.Name).ToString();
   ....
   $("#myNode").append(badge);
}; 
```

Html-部分“_UserBadge.cshtml”：

```
@model WT.Models.ttUser

<div style="..">
...some more lines html...
</div> 
```

我的问题是没有添加 ' 开头和每行末尾的 '+ 。我该如何解决这个问题？

代码结果为：

```
var badge=
<div style="..">
...some more lines html...
</div>; 
```

而不是 javascript 字符串：

```
var badge=
'<div style="..">   '+
'...some more lines html...   '+
'</div>  '; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T17:14:28.083

你不能只使用类似的东西：

```
var badge='@Html.Partial("_UserBadge",User.Identity.Name).Replace( "\n", "\\n" ).Replace( "'", "\\'" )'; 
```

您在问题中建议您希望结果为：

```
'<div style="..">   '+
'...some more lines html...   '+
'</div>  '; 
```

但请注意，这相当于：

```
'<div style="..">   ...some more lines html...   </div>  '; 
```

这可能不是您真正想要的（因为这与 _UserBadge 页面不同）。

你可能*真正*想要的是更像这样的东西：

```
'<div style="..">\n...some more lines html...\n</div>'; 
```

该示例替换了`"\n"`将由 javascript 解释为换行符的换行符。最后，您需要将单引号替换为 ，`"\'"`以确保不会意外终止字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T17:29:23.930

我认为您可以使用 Json.NET 将对象序列化为 json（它将转义所有字符串字符）。

就像是：

```
@using Newtonsoft.Json

myfunction= function () {
   ...
   var badge=@(Html.Raw(JsonConvert.SerializeObject(Html.Partial("_UserBadge",User.Identity.Name))));
   ....
   $("#myNode").append(badge);
}; 
```

# python - 在 Numpy 数组中获取满足多个条件的行

> ID：14506505
> 
> 赞同：2
> 
> 时间：2013-01-24T16:50:03.160
> 
> 标签：python, numpy, python-2.7

我有以下数据数组

```
In [56]:data
Out[56]: 
array([[  4360.,   6178.],
       [ 10906.,  14956.],
       [  5071.,   8963.],
       ..., 
       [ 16019.,  12300.],
       [ 12306.,   3327.],
       [ 13663.,  12641.]]) 
```

我想存储`a`第零个元素小于某个值`value1`且高于某个其他值的所有行`value2`。

我尝试了以下

```
d[ 9057 > d[0::,0] > 8000, 0::] 
```

和

```
d[d[0::,0] > 8000 and d[0::,0] < 9057, 0::] 
```

但两者都因以下错误而停止

```
ValueError: The truth value of an array with more than one element is ambiguous. Use a.any() or a.all() 
```

有没有一种有效的方法来做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T16:54:52.947

以下应该做到这一点：

```
d[(d[0::,0] > 8000) & (d[0::,0] < 9057), 0::] 
```

顺便说一句，您可以将所有这些替换`0::`为`:`：

```
d[(d[:,0] > 8000) & (d[:,0] < 9057)] 
```

我发现这在眼睛上更容易一些。

# c# - 对字节数组的通用读/写

> ID：14506507
> 
> 赞同：0
> 
> 时间：2013-01-24T16:50:12.877
> 
> 标签：c#, .net

我希望能够将通用变量放入字节数组（使用 EF 将其保存到数据库中）

我试过这样：

```
public byte[] SerializedParams { get; set; } // property for EF

...

public void Write(params object[] args)
{
    var bf = new BinaryFormatter();
    using (var ms = new MemoryStream())
    {
        bf.Serialize(ms, args);

        SerializedParams = ms.ToArray();
    }
}

public T Read<T>()
{
    var byteSize = Marshal.SizeOf(typeof(T));
    using (var ms = new MemoryStream())
    {
        ms.Write(SerializedParams, 0, SerializedParams.Length);
        var bf = new BinaryFormatter();
        var x = bf.Deserialize(ms); // error here
        return (T)x;
    }
} 
```

var x = bf.Deserialize(ms); 此行会导致错误。调用后：

```
qr.Write(5,7,9);
var i1 = qr.Read<int>(); // error here
var i2 = qr.Read<int>();
var i3 = qr.Read<int>(); 
```

> “在解析完成之前遇到流结束。”

那有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T16:53:32.043

尝试将内存流的位置属性设置为 0：

```
public T Read<T>()
{
    var byteSize = Marshal.SizeOf(typeof(T));
    using (var ms = new MemoryStream())
    {
        ms.Write(SerializedParams, 0, SerializedParams.Length);
        var bf = new BinaryFormatter();
        ms.Position = 0; // this line should do the trick
        var x = bf.Deserialize(ms); 
        return (T)x;
    }
} 
```

# php - 使用 php 和 imap 读取 Exchange 2010 邮件

> ID：14506508
> 
> 赞同：0
> 
> 时间：2013-01-24T16:50:22.517
> 
> 标签：php, imap, exchange-server

我们在 Exchange 服务器上设置了一个带有多个别名的邮箱。然后 php 脚本循环执行，查看邮件发送到的别名并确定要采取的操作。

这一切都适用于 Exchange 2003，但我们最近将系统升级到 Exchange 2010，突然 php imap 数据告诉我，无论它实际发送到哪里，它发送到的地址始终是默认地址。

通过 Outlook 打开电子邮件时，属性会显示有效的“收件人”地址。下面是 Outlook 和 PHP (imap_fetchheader)

**外表**

```
Received: from server ([server]) by
 server ([server]) with mapi id
 14.02.0247.003; Thu, 24 Jan 2013 16:17:21 +0000
Content-Type: application/ms-tnef; name="winmail.dat"
Content-Transfer-Encoding: binary
From: My Name<me@domain.com>
To: Mailbox <scanned.workshop@domain.com>
Subject: -
Thread-Topic: --
Thread-Index: Ac36TYTyAEX3VodpSxiOpceRNCRERwAAMALg
Date: Thu, 24 Jan 2013 16:17:19 +0000
Message-ID: <99BC329D02E8D84C8FB1A96C34B4ADDC1900E7@server>
Accept-Language: en-GB, en-US
Content-Language: en-US
X-MS-Has-Attach: yes
X-MS-Exchange-Organization-SCL: -1
X-MS-TNEF-Correlator: <99BC329D02E8D84C8FB1A96C34B4ADDC1900E7@server>
MIME-Version: 1.0
X-MS-Exchange-Organization-AuthSource: server
X-MS-Exchange-Organization-AuthAs: Internal
X-MS-Exchange-Organization-AuthMechanism: 04
X-Originating-IP: [192.168.110.40] 
```

**PHP**

```
MIME-Version: 1.0
Received: from server ([server]) by
 server ([server]) with mapi id
 14.02.0247.003; Thu, 24 Jan 2013 16:17:21 +0000
From: Me <me@domain.com>
To: Mailbox <scanned@domain.com>
Subject: -
Thread-Topic: -
Thread-Index: Ac36TYTyAEX3VodpSxiOpceRNCRERwAAMALg
Date: Thu, 24 Jan 2013 16:17:19 +0000
Message-ID: <99BC329D02E8D84C8FB1A96C34B4ADDC1900E7@server>
Accept-Language: en-GB, en-US
Content-Language: en-US
X-MS-Exchange-Organization-AuthAs: Internal
X-MS-Exchange-Organization-AuthMechanism: 04
X-MS-Exchange-Organization-AuthSource: xxxxx
X-MS-Has-Attach: yes
X-MS-Exchange-Organization-SCL: -1
X-MS-TNEF-Correlator:
Content-Type: multipart/mixed;
        boundary="_002_99BC329D02E8D84C8FB1A96C34B4ADDC1900E7WINSERV12lewisloc_" 
```

通过的内容是有效的，但由于某种原因，升级后只有默认邮箱显示给 php，而不是电子邮件发送到的别名。

有什么想法吗？或者这是为服务器人员准备的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T10:17:49.037

I finally found a way around this problem so thought i would post it for others if they have a similar problem.

Rather than using an alias on the main account as worked with legacy exchange I built a distribution group and added the account as the only member.

When php looked up the "to" address it then came through correctly

# php - 具有多个选择字段的搜索表单

> ID：14506509
> 
> 赞同：1
> 
> 时间：2013-01-24T16:50:24.067
> 
> 标签：php, mysql

我已经制作了搜索表单，列表菜单在哪里。如果我填写表格的每个字段，它会非常有效，但是，我希望所有字段独立工作，例如，如果您只填写一个字段，它必须显示仅与该字段有关的结果，如果您选择另一个字段，它必须给出更漂亮的结果。我的代码看起来像这样。事先谢谢你。

```
 <?php 
 mysql_query("SET NAMES UTF8");
 $mxare = mysql_real_escape_string($_POST['mxare']);
 $raioni = mysql_real_escape_string($_POST['raioni']);
 $type = mysql_real_escape_string($_POST['type']);
 $result = mysql_query("SELECT * FROM dzeglebi WHERE mxare = '$mxare' AND   
 raioni ='$raioni' AND  type = '$type' ORDER BY title ASC", $db); 
 $myrow = mysql_fetch_array($result); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T20:53:41.153

你可以试试这个；

```
$where = array("1=1");
if (!empty($_POST["field_1"])) {
    $where[] = sprintf("field_1='%s'", mysql_real_escape_string($_POST["field_1"]));
}
// if (!empty($_POST["field_2"])) {
// and so on...

// convert where to string with AND or OR
$where = join(" AND ", $where);
mysql_query("SELECT * FROM dzeglebi WHERE $where"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T18:03:56.707

根据您的数据，您可以尝试如下

```
$mxare = mysql_real_escape_string($_POST['mxare']);
$raioni = mysql_real_escape_string($_POST['raioni']);
$type = mysql_real_escape_string($_POST['type']);

// here 
$sql = "SELECT * FROM dzeglebi WHERE 1==1 " ;
if ( isset($mxare)) $sql = $sql . " AND " . " mxare = '$mxare'";
if ( isset($raioni)) $sql = $sql . " AND " . " raioni= '$raioni'";
.....
.....

$result = mysql_query($sql)
$myrow = mysql_fetch_array($result); 
```

# php - 在不更改过去内容的情况下发布网站上的最新新闻

> ID：14506511
> 
> 赞同：0
> 
> 时间：2013-01-24T16:50:27.853
> 
> 标签：php, rss, vbulletin

我想要做的是让我的 vBulletin 论坛上的用户每次使用 RSS 海报生成来自网站的最新新闻故事。不幸的是，该网站没有 RSS 提要，因此我根据该网站的源代码创建了一个。提要引入新闻帖子的标题和链接。我还希望新闻帖子的描述显示在 vBulletin 帖子中，所以我创建了一个 php 脚本（如下所示）来收集帖子的描述。

我现在的问题是，vBulletin 上的 RSS 海报使用 php 脚本，它总是更新所有旧帖子以获取最新帖子的描述。这是因为它在每篇文章中都使用 php 脚本 - 始终显示最新的文章描述。

我一辈子都想不出办法来解决这个问题。任何帮助将不胜感激。谢谢！

```
<?php 
$fullxml = simplexml_load_file('http://feed43.com/efpatches.xml');
$link = $fullxml->channel->item[0]->link;
$page = file_get_contents($link);
$doc = new DOMDocument();
$doc->loadHTML($page); 
$divs = $doc->getElementsByTagName('div');
foreach($divs as $div) {
    if ($div->getAttribute('id') === 'G_g_ArticleViewContainer_viewArticleContent_v_hEditor_forView_strArticleContent_Viewer') {
return nl2br(str_replace("&nbsp;","",htmlentities($div->nodeValue,null,'utf-8')));
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T17:35:43.870

为什么不定期调用 RSS 提要，以显示所需的格式获取所有内容，然后在服务器上缓存生成的对象。每当您需要在论坛中显示 RSS 数据时，只需加载缓存的对象并使用它。您可以以这种方式缓存整个 RSS 结构，而不必担心只更新来自 RSS 的最新故事。

# report - Spring Roo 和特别报告 BIRT

> ID：14506513
> 
> 赞同：1
> 
> 时间：2013-01-24T16:50:35.113
> 
> 标签：report, spring-roo, birt

我也浏览了 Spring Roo 文档和 gvNIX。我发现他们也支持报告。如何生成代码来创建报告（Jasper 或 BIRT）。

我想将 BIRT 报告与 Spring Roo 应用程序集成。我非常热衷于将 BIRT 报告与不同的过滤条件相结合。

如果有人给我示例代码或教程链接，它将对我有很大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T08:26:25.197

gvNIX 为 Jasper 提供了开箱即用的自动生成代码。请按照手册进行操作，我相信它应该可以工作。请分享您的步骤和您面临的错误。

# python - 在 Python 中将滑动窗口与对枚举相结合

> ID：14506515
> 
> 赞同：0
> 
> 时间：2013-01-24T16:50:36.120
> 
> 标签：python, window, iteration, tuples

我正在尝试按照我在 Github 上的[Gist中找到的内容来概括 TextRank 算法的图形实现。](https://gist.github.com/1646117)

基本上这是一个图问题，您需要在大小为 n 的滑动窗口中的所有节点对之间创建边。例如，如果我有一个节点列表

```
nodes=[0,1,2,3,4,5,6] 
```

并且窗口大小为 n=3，我想枚举一组边

```
edges=[(0,1), (0,2), (1,2), (1,3), (2,3), (2,4), (3,4), (3,5), ..., (5,6)] 
```

我已经查看了一些关于滑动窗口（例如[#6998245](https://stackoverflow.com/questions/6998245/iterate-over-a-window-of-adjacent-elements-in-python)和[#6822725](https://stackoverflow.com/questions/6822725/rolling-or-sliding-window-iterator-in-python)）和枚举对（例如[#1257413](https://stackoverflow.com/questions/1257413/iterate-over-pairs-in-a-list-circular-fashion-in-python)和[#13014595](https://stackoverflow.com/questions/13014595/pythonic-iteration-over-sliding-window-pairs-in-list)）的问题，但不幸的是，我没有足够的 Python 和迭代器经验将它们组合成一个函数。

我想出的解决方案是这样的：

```
from itertools import islice, combinations, chain

def window(seq, n=2):
    "Returns a sliding window (of width n) over data from the iterable"
    "   s -> (s0,s1,...s[n-1]), (s1,s2,...,sn), ...                   "
    it = iter(seq)
    result = tuple(islice(it, n))
    if len(result) == n:
        yield result    
    for elem in it:
       result = result[1:] + (elem,)
       yield result

nodes = [0,1,2,3,4,5,6]

windowed = window(nodes,3)
intermediate_list = [combinations(item,2) for item in windowed]
edges = list(set(chain.from_iterable(intermediate_list)))
edges = sorted(edges)

print edges 
```

这给了我想要的结果，排序并不是真正必要的，但是有没有更优雅的“pythonic”方式来做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T20:37:14.220

实际上，恕我直言，您所拥有的还不错，而且可读性很强。我可以看到它当前操作方式的唯一改进是将 更改为`intermediate_list`生成[器表达式](http://docs.python.org/2/reference/expressions.html#generator-expressions)对象而不是实际的`list`：

```
intermediate_list = (combinations(item,2) for item in windowed) # outer parentheses required 
```

您可能还想更改它的名称以更好地反映它，然后说类似`pair_generator`or `gen_pairs`。

顺便说一句，它超越了“Pythonic”，以避免[过早地优化](http://en.wikipedia.org/wiki/Premature_optimization#When_to_optimize)事物（当然，除非你这样做只是为了好玩）。

# html - php xmailer 的问题？我不认为这是语法

> ID：14506518
> 
> 赞同：1
> 
> 时间：2013-01-24T16:50:48.827
> 
> 标签：html, forms, php

代码：

```
<?php

session_start();
$name = htmlspecialchars($_POST['name']);
$phone = htmlspecialchars($_POST['phone']);
$email = htmlspecialchars($_POST['email']);
$staddress = htmlspecialchars($_POST['staddress']);
$city = htmlspecialchars($_POST['city']);
$state = htmlspecialchars($_POST['state']);
$zipcode = htmlspecialchars($_POST['zipcode']);
$eventtype = htmlspecialchars($_POST['eventtype']);
$guests = htmlspecialchars($_POST['guests']);
$month = htmlspecialchars($_POST['month']);
$day = htmlspecialchars($_POST['day']);
$year = htmlspecialchars($_POST['year']);
$hourstart = htmlspecialchars($_POST['hourstart']);
$hourfinish = htmlspecialchars($_POST['hourfinish']);
$eventstreet = htmlspecialchars($_POST['eventstreet']);
$eventcity = htmlspecialchars($_POST['eventcity']);
$eventstate = htmlspecialchars($_POST['eventstate']);
$eventzip = htmlspecialchars($_POST['eventzip']);
$howwereu = htmlspecialchars($_POST['howwereu']);
$custmsg = htmlspecialchars($_POST['custmsg']);
$date = date('m-d-Y');

$to = '' . $email . '';
$subject = 'Thanks,' .$name . ' for requesting a quote!';
$message = "We will contact you as soon as possible!  ";
$headers = 'From: no-reply@xxx.com' . "\r\n" .
    'Reply-To: xxx@xxx.com' . "\r\n" .
    'X-Mailer: PHP/' . phpversion();

mail($to, $subject, $message, $headers);

$to2 = 'xxx@xxx.com';
$subject2 = '' . $name . ' has requested a quote!';
$message2 = '

<html>
<head>
<title>Contact Email</title>
</head>
<body>
<p>Here is the information provided. If the field is blank, the customer did not fill out the 
form.</p>
 <table>
<tr>
<td>Customer Name:</td>
<td>' . $name . '</td>
</tr>
<tr>
<td>Customer Email:</td>
<td>' . $email . '</td>
</tr>
<tr>
<td>Customer Phone:</td>
<td>' . $phone . '</td>
</tr>
<tr>
<td>Customer Street Address:</td>
<td>' . $staddress . '</td>
</tr>

<tr>
<td>Customer City:</td>
<td>' . $city . '</td>
</tr>
<tr>
<td>Customer State:</td>
<td>' . $state . '</td>
</tr>
<tr>
<td>Customer Zipcode:</td>
<td>' . $zipcode . '</td>
</tr>
<tr>
<td>Event Type:</td>
<td>' . $eventtype . '</td>
</tr>

<tr>
<td># of Guests:</td>
<td>' . $guests . '</td>
</tr>
<tr>
<td>Event Month:</td>
<td>' . $month . '</td>
</tr>
<tr>
<td>Event Day:</td>
<td>' . $day . '</td>
</tr>
<tr>
<td>Event Year:</td>
<td>' . $year . '</td>
</tr>

<tr>
<td>Event Start Hour:</td>
<td>' . $hourstart . '</td>
</tr>
<tr>
<td>Event Finish Hour:</td>
<td>' . $hourfinish . '</td>
</tr>
<tr>
<td>Event Street:</td>
<td>' . $eventstreet . '</td>
</tr>
<tr>
<td>Event City:</td>
<td>' . $eventcity . '</td>
</tr>
<tr>
<td>Event State:</td>
<td>' . $eventstate . '</td>
</tr>

<tr>
<td>Event Zip:</td>
<td>' . $eventzip . '</td>
</tr>
<tr>
<td>How were you referred:</td>
<td>' . $howwereu . '</td>
</tr>
<tr>
<td>Customer Message:</td>
<td>' . $custmsg . '</td>
</tr>
</table>
</body>
</html>

';
$header2  = 'MIME-Version: 1.0' . "\r\n";
$header2 .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
$header2 .= 'From: no-reply@xxx.com' . "\r\n";
$header2 .= 'Reply-To: xxx@xxx.com' . "\r\n";
$header2 .= 'X-Mailer: PHP Version: 5.0+' . "\r\n";

mail($to2, $subject2, $message2, $header2);

header('Location: http://www.xxxx.com');

?> 
```

不发送电子邮件，它曾经。我想知道发生了什么变化？也许托管公司在我不知道的情况下更新了 php 或其他东西？我真的迷路了。也许我只是忽略了一些东西，也许是语法。希望大家能帮忙！提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T17:19:23.510

我尝试了您的代码来修改表单中的数据，并且可以正常工作。正如您所怀疑的那样，错误**并非来自语法**

我的猜测是：您的**sendmail**要么损坏，要么路径错误（/usr/sbin/sendmail）。如果您在自己的服务器上工作，请使用以下命令检查您的 sendmail 路径

> phpinfo()

如果它是托管服务（我知道这是您的情况），请联系支持人员，因为这是服务器问题。

如果您对此类托管服务具有 ssh 访问权限，请访问它并使用以下命令执行您的脚本：

```
php -q *[yourScript.php]* 
```

连同错误报告，它可以让您跟踪 bin 文件发生的情况

# c#-4.0 - 将修改后的实体作为参数传递时如何更新 EF 实体？

> ID：14506520
> 
> 赞同：3
> 
> 时间：2013-01-24T16:50:54.793
> 
> 标签：c#-4.0, entity-framework-4

我有一个快速的问题。

假设**上下文**是我的 EF 上下文，而**Respondent**是 EF 从数据库生成的实际 EF 实体。

**更新答辩**人的最短方法是什么？

```
public void UpdateRespondent(Respondent respondent)
{
    var resp = context.Respondents.First(r => r.RespondentId == respondent.RespondentId);

    // Now... do I have to copy all properties from the respondent into resp ??
    // But respondent is actually the Respondent entity
    // Can I just replace it somehow?

    context.SaveChanges();
} 
```

谢谢一堆。

**更新1**

感谢 nrodic，这段代码就像一个魅力：

```
public void UpdateRespondent(Respondent changed)
{
    var respondent = db.Respondents.FirstOrDefault(r => r.RespondentId == changed.RespondentId);

    db.Respondents.ApplyCurrentValues(changed);
    db.SaveChanges();
} 
```

不过有一个问题 -**看起来我**根本不需要第一行“var respondent =”！

知道为什么在许多示例中存在这条线吗？

谢谢。

**更新2**

嗯，看来我需要第一行。否则它会在第二行引发异常 (db.Respondents.ApplyCurrentValues(changed);)

> 在 ObjectStateManager 中找不到具有与所提供对象的键匹配的键的对象。验证所提供对象的键值是否与必须应用更改的对象的键值匹配。

![在此处输入图像描述](../Images/1325017ad3b16951861ccf8fde626f8a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T16:59:16.913

你可以这样做：

```
 public void UpdateRespondent(Respondent respondent)
{
    var resp = context.Respondents.First(r => r.RespondentId == respondentId);

    // Now... do I have to copy all properties from the respondent into resp ??
    // But respondent is actually the Respondent entity
    // Can I just replace it somehow?

    resp.Name = "Bob";
    resp.SomeProperty = "SomeValue";
    context.SaveChanges();
} 
```

您可以只更新 resp 对象的属性。尽管看到第一条评论可能并不完全符合您的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T22:53:29.563

如果加载实体，将其从上下文中分离并更新其属性，则可以使用方法将更改应用于数据库[`ApplyCurrentValues()`](http://msdn.microsoft.com/en-us/library/dd466205.aspx)。像这样使用它：

```
public void UpdateRespondent(Respondent changed)
{
    var respondent = db.Respondents.FirstOrDefault(r => r.RespondentId == changed.RespondentId);

    db.Respondents.ApplyCurrentValues(changed);
    db.SaveChanges();
} 
```

请注意，在调用时必须将实体附加到上下文（从数据库中读取）`ApplyCurrentValues()`。否则`InvalidOperationException`会抛出：

> 在 ObjectStateManager 中找不到具有与所提供对象的键匹配的键的对象。验证所提供对象的键值是否与必须应用更改的对象的键值匹配。

如果您使用`DbContext`而不是`ObjectContext`，请务必阅读[此问题](https://stackoverflow.com/q/5807622/551322)。

* * *

更新数据库的另一种方法是使用自动映射技术（例如[Automapper](http://automapper.org/)或[ValueInjecter ）。](http://valueinjecter.codeplex.com/)这是更一般的情况，因为它允许使用 DTO 并且可以很好地控制要更新的内容（以及如何更新）。

# django-admin - Django 管理过滤器使用方法

> ID：14506521
> 
> 赞同：15
> 
> 时间：2013-01-24T16:50:56.790
> 
> 标签：django-admin

如何在 django admin 中制作自定义过滤器。我的意思是编写一个方法在其中进行一些计算并将其添加到[list_filter](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.list_filter)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-20T00:05:35.727

您可以使用从 django.contrib.admin.SimpleListFilter 继承的类，如此处[所述](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.list_filter)。

# c# - 从 javascript 调用任何 FB api 时出现 OAuthException 2500

> ID：14506524
> 
> 赞同：0
> 
> 时间：2013-01-24T16:51:02.890
> 
> 标签：c#, javascript, facebook, asp.net-mvc-4

问题：**我不断从 Facebook 收到以下错误**：

```
Code: 2500
Message: "An active access token must be used to query information about the current user."
Type: OAuthException 
```

我打的电话是：

```
Function TestResponse(response) {….}
FB.api(‘/me’, TestResponse); 
```

我使用了 MVC4 的 Facebook 应用程序模板。在服务器端，我可以做任何事情，但在客户端，使用 JavaScript，我无法进行任何调用。在服务器端，我存储了授权令牌，并尝试将其拉回并将其传递给 Facebook，如下所示：

```
var parameters = { access_token: $('#AccessToken').val() };
FB.api('/me', parameters, TestResponse); 
```

返回相同的东西。此代码作为我的 $(document).ready 设置的一部分被调用。布局页面包含所有 fb init 内容。

如前所述：从 C# 我可以调用 facebook API 并且一切正常，但我真的很想从 JavaScript 完成大部分工作，以避免在我的应用程序中产生额外的往返行程。

另外：我试过调用 getLoginStatus 但它从来没有提供响应。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-24T18:23:04.380

应该使用一个简短的解决方法`FB.api('userId');`。

# asynchronous - 异步数据库驱动程序的属性是什么？

> ID：14506526
> 
> 赞同：2
> 
> 时间：2013-01-24T16:51:05.823
> 
> 标签：asynchronous, database-connection, theory

今天我和一些 python 朋友讨论了在 Twisted 和 Tornado 等异步网络框架中管理连接池的一些挑战。

我知道有针对这类情况的社区开发的异步替代方案，但这让我想知道......

**一个好的异步数据库的完整属性列表是什么？**

我知道使数据库连接/游标在异步环境中正常工作背后的核心原则 - 不要阻止等待查询返回（或者就此而言，更一般地说，当然不要阻止） . 还有其他注意事项吗？主要指导方针是什么？如果要设置一个异步驱动程序替代主要数据库解决方案的任务，那么这种解决方案必须满足的全部标准是什么？应该对直接使用数据库查询协议的代码应用哪种类型的单元和功能测试以使其始终保持异步？

# ios - 实例化 NSDictionary。投射数组？

> ID：14506527
> 
> 赞同：0
> 
> 时间：2013-01-24T16:51:15.480
> 
> 标签：ios, casting, nsdictionary

如何理解第一行的这个符号？我对这种实例化 NSDictionary 的方式感到困惑（缺乏经验）。这是某种铸造吗？它来自 iOS TableViewController 教程，cellForRowAtIndexPath 方法。

```
NSDictionary *item = (NSDictionary *)[self.content objectAtIndex:indexPath.row];
cell.textLabel.text = [item objectForKey:@"mainTitleKey"];
cell.detailTextLabel.text = [item objectForKey:@"secondaryTitleKey"]; 
```

我希望得到以下结果，它可以工作：

```
NSDictionary *item = [arrayContainingDictionaries objectAtIndex:indexPath.row];
cell.textLabel.text = [item objectForKey:@"mainTitleKey"];
cell.detailTextLabel.text = [item objectForKey:@"secondaryTitleKey"]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T16:55:00.807

两种方法都应该有效，将对象转换为 NSDictionary 可能只是避免错误的额外措施，但我想因为 Objective-C 会向它从 NSArray 中提取的任何对象发送一个 objectForKey: 消息，它应该可以工作。

希望这可以给你一些见解。

# html - HTML5 AppCache：如果服务器不可访问但网络可访问，如何实现离线模式

> ID：14506532
> 
> 赞同：6
> 
> 时间：2013-01-24T16:51:39.497
> 
> 标签：html, html5-appcache, offlineapps

根据设计，如果客户端设备离线或客户端设备在线且服务器可访问，则 HTML5 离线支持 (AppCache) 有效。之后，当设备无法访问互联网时，我缓存了应用程序并在浏览器中重新打开它（刷新它），浏览器从 AppCache 加载应用程序。在这种情况下，浏览器**不会尝试**获取 appcache 清单（它知道我们处于离线状态）。

但是让我们考虑一下我的设备未离线的情况。它仍然有互联网连接。但是我的服务器宕机了。这可能有很多不同的原因（硬件故障、AppPool 停止、IIS 限制、DNS 错误等）。在这种情况下，当我在浏览器中打开缓存的应用程序时，它会尝试获取 appcache 清单并得到 404 错误（未找到）。之后，浏览器会清除应用程序的 AppCache！所以在下一次运行时，它不会从 AppCache 加载它并显示 404 错误“页面”。不再需要离线工作。

离线模式的功能取决于无法访问服务器的原因，这对我来说看起来很奇怪。作为用户，我为什么要关心（没有互联网连接或服务器已关闭）？

所以我的问题是：当设备在线但无法访问其服务器时，**是否**有人知道使应用程序工作的任何方法？
理想情况下，我应该能够捕获 window.applicationCache 的*错误*事件并告诉它“没关系，请继续使用缓存，不要废弃它”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-15T13:15:07.543

[根据应用程序缓存规范](http://www.w3.org/TR/2011/WD-html5-20110525/offline.html)，这是不可能的：

> 否则，如果获取清单以其他方式失败（例如，服务器返回另一个 4xx 或 5xx 响应或等效响应，或者存在 DNS 错误，或者连接超时，或者用户取消下载，或者清单解析器失败检查魔术签名时），或者如果服务器返回重定向，或者如果资源被标记为文本/缓存清单以外的 MIME 类型，则运行缓存失败步骤。

# c++ - Valgrind 如何估计函数的成本？

> ID：14506537
> 
> 赞同：2
> 
> 时间：2013-01-24T16:51:49.983
> 
> 标签：c++, valgrind

我试图弄清楚程序分析是如何工作的。我正在使用 Valgrind。我的第一个问题是：

函数的成本对 Valgrind 意味着什么？是时间吗？

根据我的阅读，Valgrind 似乎在应该镜像“通用计算机”的虚拟机上运行该程序。然后它会计算这台机器中发生的事件。但是它如何根据这些数据计算函数的成本呢？可以在标准台式 PC 上测量小于 1 毫秒的时间吗？

![在此处输入图像描述](../Images/049f31bdf473640397c7dc7acd8fe27a.png)

编辑：

请问callgrind的输出中的一维数字**“成本”是什么意思？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T16:56:46.607

> 函数的成本对 Valgrind 意味着什么？是时间吗？

假设您指的是 Cachegrind 和 Callgrind 工具，它们不会衡量“成本”；他们测量在模拟处理器上运行程序收集的特定统计数据，包括：

*   缓存读取和未命中
*   执行和错误预测的条件和间接分支

有关完整的详细信息，请参阅[文档](http://valgrind.org/docs/manual/cg-manual.html)。

其他分析器测量每个函数的经过时间，或使用采样来确定程序在哪些函数中花费的时间最多。

> 可以在标准台式 PC 上测量小于 1 毫秒的时间吗？

是的，大多数现代计算机都有精度低于一微秒的计​​时器，现代英特尔处理器允许您计算 CPU 周期。但是 Valgrind 不测量经过的时间，因为这在它的模拟机器上毫无意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T16:55:31.883

是的，可以测量时间，在标准台式 PC 上少于 1 毫秒（如果您的意思是具有英特尔处理器）。有一个名为的汇编指令`rtdsc`可以执行此操作。

# c# - 循环遍历 Excel 工作表并使用 C# 将文本保存到 TXT 文件中

> ID：14506539
> 
> 赞同：5
> 
> 时间：2013-01-24T16:51:51.907
> 
> 标签：c#, worksheet, excel, export-to-text

我已经解决了大部分问题。我可以循环浏览工作表，我可以创建文本文件并写入它。我遇到的唯一问题实际上是从每张纸中提取文本或值。下面是我的代码，但它只为每个工作表抛出一个对象，并将这些单词写入我的文本文件而不是实际值。

```
System.Object[,]
System.Object[,] 
```

我还缺少什么？我应该指出我是一个初学者程序员。

这是我到目前为止的代码：

```
using (StreamWriter sw = File.CreateText("ExtractedText.txt"))
{
    Excel.Application xlApp = new Excel.Application();
    Excel.Workbook thisWkBook = xlApp.Workbooks.Open(thisFile);

    foreach (Excel.Worksheet sheet in thisWkBook.Worksheets)
    {
        sw.WriteLine(sheet.UsedRange.Value);
    }
} 
```

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T17:02:11.777

像这样的，未经测试。请参阅[http://dontbreakthebuild.com/2011/01/30/excel-and-c-interop-with-net-4-how-to-read-data-from-excel/](http://dontbreakthebuild.com/2011/01/30/excel-and-c-interop-with-net-4-how-to-read-data-from-excel/)

```
using (StreamWriter sw = File.CreateText("ExtractedText.txt"))
{
    var excelApp = new Excel.Application();
    var workBook = excelApp.Workbooks.Open(thisFile);

    foreach (var sheet in workBook.Worksheets)
    {
      foreach (var row in sheet.UsedRange.Rows)
      {
        foreach (var cell in row.Columns)
        {
          sw.Write(cell.Value + " ");
        } 
        sw.WriteLine();
      }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T16:55:41.633

您需要从工作表中获取数据，例如：

```
sw.WriteLine(sheet.Range["C5"].Value.ToString()); 
```

# android - Activity 中的双击事件

> ID：14506540
> 
> 赞同：2
> 
> 时间：2013-01-24T16:51:53.277
> 
> 标签：android

我有一个实现 onGestureListener 的活动。如何检测同一活动中的双击事件？是否可以识别活动中的双击事件？

它也不识别长按？有什么帮助吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-24T17:20:42.660

`GestureDetector`允许您指定`OnDoubleTapListener`以及`OnGestureListener`. 您唯一需要做的就是实现`OnDoubleTapListener`并覆盖它的`onDoubleTap`方法。

你也可以只使用`SimpleOnGestureListener`和覆盖你想要的。

```
final Context context = this;
final GestureDetector.SimpleOnGestureListener listener = new GestureDetector.SimpleOnGestureListener() {
    @Override
    public boolean onDoubleTap(MotionEvent e) {
        Toast.makeText(context, "onDoubleTap", Toast.LENGTH_SHORT).show();
        return true;
    }

    @Override
    public void onLongPress(MotionEvent e) {
        Toast.makeText(context, "onLongPress", Toast.LENGTH_SHORT).show();
    }
};

final GestureDetector detector = new GestureDetector(listener);

detector.setOnDoubleTapListener(listener);
detector.setIsLongpressEnabled(true);

getWindow().getDecorView().setOnTouchListener(new View.OnTouchListener() {
    @Override
    public boolean onTouch(View view, MotionEvent event) {
        return detector.onTouchEvent(event);
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-10-13T10:57:02.307

对于任何视图，您都可以这样做

```
 ivPost.setOnTouchListener(new View.OnTouchListener() {
            private GestureDetector gestureDetector = new GestureDetector(ActivityName.this, new GestureDetector.SimpleOnGestureListener() {
                @Override
                public boolean onDoubleTap(MotionEvent e) {
                    Log.d("TEST", "onDoubleTap");
                    return super.onDoubleTap(e);
                }
                @Override
                public boolean onSingleTapConfirmed(MotionEvent event) {
                    Log.d("TEST", "onSingleTap");
                    return false;
                }
            });

            @Override
            public boolean onTouch(View v, MotionEvent event) {

                gestureDetector.onTouchEvent(event);
                return true;
            }

        }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-09-09T16:56:44.397

**onDoubleTap**函数 使用特定元素，如**ImageView** id，是 ' *selectedImage* ' & 运行这个函数名称是 ' *selectImage()* ' 完整代码：

```
findViewById(R.id.selectdImage).setOnTouchListener(new View.OnTouchListener() {
        private GestureDetector gestureDetector = new GestureDetector(MainActivity.this, new GestureDetector.SimpleOnGestureListener() {
            @Override
            public boolean onDoubleTap(MotionEvent e) {
                Toast.makeText(getApplicationContext(), "onDoubleTap", Toast.LENGTH_SHORT).show();
                selectImage(nView);
                return super.onDoubleTap(e);
            }
            @Override
            public boolean onSingleTapConfirmed(MotionEvent event) {
                Log.d("onSingleTapConfirmed", "onSingleTap");
                return false;
            }
        });

        @Override
        public boolean onTouch(View v, MotionEvent event) {

            gestureDetector.onTouchEvent(event);
            return true;
        }
    }); 
```

# jquery - 通过 jQuery 插件找到选定的 TinyMCE 编辑器

> ID：14506542
> 
> 赞同：1
> 
> 时间：2013-01-24T16:52:00.870
> 
> 标签：jquery, tinymce

有没有办法在多个实例中找到当前活动（选定）的 TinyMCE 编辑器？

```
$(document).tinymce(); 
```

此代码查找所有实例的数组，但我们如何知道哪个实例当前处于活动/选中/聚焦状态？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T17:44:13.660

我不熟悉tinyMCE，但如果它使用标准文本区域，你可以做这样的事情......

```
<script type="text/javascript">
var currTinyMCEID = '';
</script>

<textarea id="tinymce_1" onchange='setActive(this)'></textarea>
<textarea id="tinymce_2" onchange='sectActive(this)'></textarea>

<script type="text/javascript">
function setActive(elem)
{
    currTinyMCEID = elem.id;
}
</script> 
```

通过绑定到 onchange，“活动”的 Tiny MCE 将成为最近编辑的那个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T09:06:24.823

就在这里：

```
tinymce.activeEditor 
```

`null`如果没有编辑器处于活动状态（例如，如果用户根本没有单击编辑器）或最后一个处于活动状态的编辑器对象/实例，这将交付。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T16:55:04.003

我会想象这样的事情（未经测试）：

```
$(document).tinymce().filter(function() {
    return $(this).find(':focus').length > 0;
}); 
```

# python - 将 matplotlib 图放入 wxpython

> ID：14506544
> 
> 赞同：2
> 
> 时间：2013-01-24T16:52:01.173
> 
> 标签：python, matplotlib, wxpython

我有这个创建交互式散点图的代码：

```
if 1: # picking on a scatter plot (matplotlib.collections.RegularPolyCollection)

x, y, c, s = rand(4, 100)
def onpick3(event):
    ind = event.ind
    print('onpick3 scatter:', ind, np.take(x, ind), np.take(y, ind))

fig = figure()
ax1 = fig.add_subplot(111)
col = ax1.scatter(x, y, 100*s, c, picker=True)
#fig.savefig('pscoll.eps')
fig.canvas.mpl_connect('pick_event', onpick3) 
```

我想要做的是将此图集成到 wxPython

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-14T23:07:00.537

您要做的是将图形放在 wxPanel 中。请参阅[此处以获取一个很好的示例](http://dafx.org/an-easy-to-use-python-plotting-tool-with-wxpython-and-matplotlib/)。

```
class CanvasPanel(wx.Panel):
    def __init__(self, parent):
        wx.Panel.__init__(self, parent)

        self.figure = Figure()
        self.axes1 = self.figure.add_subplot(211)
        self.axes2 = self.figure.add_subplot(212)
        self.canvas = FigureCanvas(self, -1, self.figure)
        self.sizer.Add(self.canvas, 1, wx.LEFT | wx.TOP | wx.GROW)
        self.SetSizer(self.sizer)
        self.Fit()
        self.figure.tight_layout()
        self.canvas.mpl_connect('motion_notify_event', self.onMotion)

    def onMotion(self, event):
        if event.inaxes:
            xpos = event.xdata
            print(' %0.1f' % (xpos)) 
```

# java - 为什么我损坏的缓冲区出现在 8x8 像素的块中？

> ID：14506557
> 
> 赞同：4
> 
> 时间：2013-01-24T16:53:02.730
> 
> 标签：java, processing, jogl, corrupt

我最近一直在研究处理/Java/JOGL 作品，其中我正在绘制到屏幕外缓冲区。当我启动程序时，我看到了一些漂亮的故障（见下图）。

我假设这是我上次运行程序时缓冲区地址空间中的剩余数据。最小的方块是 8x8 像素。似乎更大的块将 8x8px 的正方形平铺在 4x4 元块中，而这些块也以 4x4 平铺成 überchunks。我使用的是 64 位操作系统。

谁能向我解释为什么我在程序 init 上看到这个故障图像？我已经回答了我的问题了吗？（主要是好奇引擎盖下发生了什么。）

**编辑：**添加了图像的放大版本，因为 SO 没有任何类型的点击缩放图像。

![我的故障启动屏幕。](../Images/b6acc9c77ce2869a5dbcb424a0f4d322.png) ![相同的放大镜头。](../Images/f97f50572d1b53cb60afe74e94a0a661.png)

**编辑：** @SuperKael 要求提供代码。很难隔离可能造成这种效果的原因，因为渲染主要被抽象到 Processing 的 JOGL 实现中。以下是试图解释我的代码中发生的事情：

地图背景图像加载为`PImage`：

```
PImage backgroundImage = pApplet.loadImage(pathToImage); 
```

要在该背景图像上绘制的内容的缓冲区被初始化：

```
PGraphics foregroundBuffer = pApplet.createGraphics(w, h, PApplet.OPENGL); 
```

加载要在缓冲区内渲染的前景图像：

```
for (String path : foregroundImagePaths) {
    pApplet.loadImage(path);
} 
```

在我的主`draw()`循环中，绘制背景图像，将其他图像绘制到缓冲区中，然后绘制缓冲区：

```
pApplet.image(backgroundImage, 0, 0);
foregroundBuffer.blendMode(PApplet.ADD);
for (PImage foregroundImage : foregroundImages) {
    foregroundBuffer.image(foregroundImage);
}
pApplet.image(foregroundBuffer, 0, 0); 
```

当应用程序启动时，故障图像只会短暂出现。我相信`foregroundBuffer`在正确初始化之前可能会被绘制到屏幕上，并且其他操作会阻塞主线程足够长的时间以在初始化发生时看到故障。

这是背景图像的缩小副本： ![在此处输入图像描述](../Images/9e3047f6489ed284ed365cfa254960ed.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T16:14:48.140

一种可能的解释：当您的程序启动时，缓冲区使用的内存可能“未初始化”。这意味着它包含之前用户物理上留下的任何东西（任务、进程、系统、驱动程序等）。

那里的内存由系统以最小大小的块来管理，通常一些字节用于链接块并记录块长度，然后是实际数据。

当您显示“未初始化”缓冲区时，您实际上会显示这些块（将左侧链接/大小/内容解释为图像数据），并且当存在一系列非常小的块时，它们会产生这种效果。

# iphone - iOS - prepareForSegue 不等待完成块完成

> ID：14506559
> 
> 赞同：1
> 
> 时间：2013-01-24T16:53:04.770
> 
> 标签：iphone, ios, storyboard, objective-c-blocks, uistoryboardsegue

**我喜欢的：**等到数据下载完成然后打开`TableView`并显示`data`。

**我所拥有的：什么**时候`prepareForSegue`被称为`TableView`立即打开而不等待`data`下载，尽管我有一个`completionBlock`（我猜可能没有正确实现）。

**注意：**当我返回并`TableView`再次打开时，我看到`data`.

```
- (void)fetchEntries
{
    void (^completionBlock) (NSArray *array, NSError *err) = ^(NSArray *array, NSError *err)
    {
        if (!err)
        {
            self.articlesArray = [NSArray array];
            self.articlesArray = array;
        }
    };

    [[Store sharedStore] fetchArticlesWithCompletion:completionBlock];
}

-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    [self fetchEntries];

    if ([[segue identifier] isEqualToString:@"ShowArticles"])
    {
        TableVC *tbc = segue.destinationViewController;
        tbc.articlesArrayInTableVC = self.articlesArray;
    }

} 
```

**商店.m**

```
- (void)fetchArticlesWithCompletion:(void (^) (NSArray *channelObjectFromStore, NSError *errFromStore))blockFromStore
{
    NSString *requestString = [API getLatestArticles];

    NSURL *url = [NSURL URLWithString:requestString];

    NSURLRequest *req = [NSURLRequest requestWithURL:url];

    Connection *connection = [[Connection alloc] initWithRequest:req];

    [connection setCompletionBlockInConnection:blockFromStore];

    [connection start];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T16:59:46.280

您应该在执行序列之前加载数据。

```
- (void) tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    // show loading indicator
    __weak typeof(self) weakSelf = self;
    [[Store sharedStore] fetchArticlesWithCompletion:^(NSArray *array, NSError *err)
    {
        [weakSelf performSegueWithIdentifier:@"ShowArticles" sender:weakSelf];
        // hide loading indicator
    }];
}

-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    // do whatever
} 
```

尽管在我看来，立即显示下一个视图控制器以响应用户交互要好得多。您是否考虑过在下一个视图控制器中加载数据，而不是在您真正想要转换之前等待它？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-21T21:53:01.907

我仍然更推荐 Joris 的回答，但理论上，你可以做一些时髦的事情，比如：

```
- (BOOL)shouldPerformSegueWithIdentifier:(NSString *)identifier sender:(id)sender
{
    if ([identifier isEqualToString:@"segueIdentifier"] && !_didFinishExecutingBlock)
    {
        [self methodWithCompletionBlock:^{
            _didFinishExecutingBlock = YES;
            [self.navigationController performSegueWithIdentifier:identifier sender:self];
        }];
        return false;
    }
    else
        return true;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T16:57:03.583

它不会等待，因为您使用的是块，并且在声明完成后立即执行，解决方案是删除块

```
- (void)fetchEntries
{
        if (!err)
        {
            self.articlesArray = [NSArray array];
            self.articlesArray = array;
        }

    [[Store sharedStore] fetchArticlesWithCompletion:completionBlock];
}

-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    [self fetchEntries];

    if ([[segue identifier] isEqualToString:@"ShowArticles"])
    {
        TableVC *tbc = segue.destinationViewController;
        tbc.articlesArrayInTableVC = self.articlesArray;
    }

} 
```

# css - css不影响chrome中的链接

> ID：14506561
> 
> 赞同：0
> 
> 时间：2013-01-24T16:53:09.267
> 
> 标签：css, google-chrome

我正在尝试更改链接的颜色。它默认为蓝色，我想覆盖它。我做了以下事情：

```
#site-links a:link{color:red;} 
```

并且在 Chrome 的 Inspect Element 中，这是一种压倒所有其他风格的风格。但是，链接仍然是蓝色的。然而，在 Firefox 中，该链接现在是红色的。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T16:54:47.490

`:link`专门针对您未访问过的链接。我将继续假设您已经在 chrome 中访问过它。您可以根据需要针对每个案例来修复它：

```
a:link    { color: red; }      /* unvisited link  */
a:visited { color: blue; }     /* visited link    */
a:hover   { color: green; }    /* mouse over link */
a:active  { color: yellow; }   /* selected link   */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T20:08:13.637

赋予规则更高优先级的一种方法是在其中声明重要性。

```
a:link { color: red ! important } 
```

此外，在 Chrome 检查器中，为了更好地控制正在发生的事情，您可以强制检查元素的状态

在元素检查器中时，转到右侧窗格中“样式”栏的顶部。有一个选项指出：

“切换元素状态”

在那里您可以检查/取消选中 :visited 状态

# wpf - StartupUri VisualStudio 2010 不工作

> ID：14506563
> 
> 赞同：1
> 
> 时间：2013-01-24T16:53:10.390
> 
> 标签：wpf, visual-studio-2010, visual-studio, visual-studio-2008

我刚刚创建了一个新的 WPF 项目，但我决定对文件夹进行不同的组织，使它们看起来像这样：

![在此处输入图像描述](../Images/8d81d974a8cbed22cbbef332a4dd8b1d.png)

所以我希望我所有的接口都在`src`文件夹中。但是当我按 F5 并尝试运行它时，调试器说它找不到`MainWindow.xaml`. xaml 看起来像这样：

**应用程序.xaml**

```
<Application x:Class="MyNamespace.App"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         StartupUri="MainWindow.xaml">
<Application.Resources>

</Application.Resources> 
```

**主窗口.xaml**

```
<Window x:Class="MyNamespace.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
<Grid>

</Grid> 
```

显然他们共享相同的命名空间，但它没有找到`MainWindow.xaml`......知道为什么吗？

**应用程序.xaml.cs**

```
namespace MyNamespace.src
{
    /// <summary>
    /// Interaction logic for App.xaml
    /// </summary>
    public partial class App : Application
    {
    }
} 
```

**主窗口.xaml.cs**

```
namespace MyNamespace
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T17:03:21.757

您`MainWindow`在`"src"`文件夹中。

这`StartupUri`与您的项目结构有关。所以`StartupUri = "src\MainWindow.xaml"`应该工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T17:05:09.763

将 startupuri 更改为“src/MainWindow.xaml”，这适用于我的空项目。

此外，在 App.xaml.cs 中，您有`namespace MyNamespace.src`，这可能不是您想要的（与其他不匹配）。有时，当您创建子文件夹时，VS 会自动附加到命名空间的末尾。

# iphone - 编写 iPhone 应用程序的最佳在线工具是什么？

> ID：14506566
> 
> 赞同：-5
> 
> 时间：2013-01-24T16:53:15.320
> 
> 标签：iphone

我认为他们被称为 iPhone 模拟器。我在哪里可以找到一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T16:57:18.617

退后两步，开始阅读 iOS 开发。只需访问 www.google.com 。有一个名为 Xcode 的 IDE，可用于在 iOS 上进行开发。没有在线工具。iPhone 模拟器只是 Xcode 附带的一个模拟器，您可以在上面测试您的应用程序。

# sql - 翻译帮助 MS SQL => Oracle

> ID：14506577
> 
> 赞同：1
> 
> 时间：2013-01-24T16:53:55.413
> 
> 标签：sql, oracle, stored-functions

我正在尝试将 MS SQL 函数转换为 oracle，但遇到了麻烦。他们的理由是在函数中创建临时表以逐渐添加。我似乎无法用光标替换临时表以逐渐添加。必须有人知道如何在 Oracle 中编写此代码：

```
ALTER FUNCTION [dbo].[F_GetDateIntervalTable]
(
@OccurredFrom datetime,
@OccurredTo datetime,
@Interval decimal
)
RETURNS @Tbl table
(
[Dts] datetime
)
AS
BEGIN
    DECLARE @Count int
    --DECLARE @Tbl table([Dts] datetime)
    DECLARE @Dts datetime
    DECLARE @SeedDts datetime

SET @Count = 1
SET @Dts = DATEADD(MINUTE, FLOOR(DATEDIFF(MINUTE,0,@OccurredFrom)/@Interval)*@Interval, 0);
SET @SeedDts = DATEADD(MINUTE, FLOOR(DATEDIFF(MINUTE,0,@OccurredFrom)/@Interval)*@Interval, 0);
SET @OccurredTo = DATEADD(MINUTE, -@Interval, @OccurredTo);
WHILE (@SeedDts < @OccurredTo)
BEGIN
    SET @SeedDts = DATEADD(MINUTE, @Interval*(@Count-1), @Dts)
    INSERT INTO @Tbl(Dts) VALUES(@SeedDts)
    SET @Count = (@Count + 1)
END

RETURN

END 
```

输出应该是这样的（给定参数）：

```
@OccurredFrom = '2013-01-01',
@OccurredTo = '2013-01-02',
@Interval = 60

2013-01-01 00:00:00.000
2013-01-01 01:00:00.000
2013-01-01 02:00:00.000
2013-01-01 03:00:00.000
2013-01-01 04:00:00.000
2013-01-01 05:00:00.000
2013-01-01 06:00:00.000
2013-01-01 07:00:00.000
2013-01-01 08:00:00.000
2013-01-01 09:00:00.000
2013-01-01 10:00:00.000
2013-01-01 11:00:00.000
2013-01-01 12:00:00.000
2013-01-01 13:00:00.000
2013-01-01 14:00:00.000
2013-01-01 15:00:00.000
2013-01-01 16:00:00.000
2013-01-01 17:00:00.000
2013-01-01 18:00:00.000
2013-01-01 19:00:00.000
2013-01-01 20:00:00.000
2013-01-01 21:00:00.000
2013-01-01 22:00:00.000
2013-01-01 23:00:00.000 
```

任何想法都非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T17:08:19.533

假设您需要使用函数而不是简单地编写 SQL 查询

```
SQL> ed
Wrote file afiedt.buf

  1  with x as (
  2    select date '2013-01-01' start_date,
  3           date '2013-01-02' end_date,
  4           60 interval
  5      from dual
  6  )
  7  select start_date + numtodsinterval( interval * (level-1), 'minute' )
  8    from x
  9* connect by level <= (end_date - start_date)*24*60/interval
SQL> /

START_DATE+NUMTODSI
-------------------
2013-01-01 00:00:00
2013-01-01 01:00:00
2013-01-01 02:00:00
2013-01-01 03:00:00
2013-01-01 04:00:00
2013-01-01 05:00:00
2013-01-01 06:00:00
2013-01-01 07:00:00
2013-01-01 08:00:00
2013-01-01 09:00:00
2013-01-01 10:00:00
2013-01-01 11:00:00
2013-01-01 12:00:00
2013-01-01 13:00:00
2013-01-01 14:00:00
2013-01-01 15:00:00
2013-01-01 16:00:00
2013-01-01 17:00:00
2013-01-01 18:00:00
2013-01-01 19:00:00
2013-01-01 20:00:00
2013-01-01 21:00:00
2013-01-01 22:00:00
2013-01-01 23:00:00

24 rows selected. 
```

您可以创建流水线表函数

```
SQL> create type tbl_date as table of date;
  2  /

Type created.

SQL> create or replace function get_date_interval( p_start_date in date,
  2                                                p_end_date   in date,
  3                                                p_interval   in number )
  4    return tbl_date
  5    pipelined
  6  is
  7    l_return_dt date := p_start_date;
  8  begin
  9    while( l_return_dt < p_end_date )
 10    loop
 11      pipe row( l_return_dt );
 12      l_return_dt := l_return_dt + numtodsinterval( p_interval, 'minute' );
 13    end loop;
 14    return;
 15  end;
 16  /

Function created.

SQL> select *
  2    from table( get_date_interval( date '2013-01-01',
  3                                   date '2013-01-02',
  4                                   60 ));

COLUMN_VALUE
-------------------
2013-01-01 00:00:00
2013-01-01 01:00:00
2013-01-01 02:00:00
2013-01-01 03:00:00
2013-01-01 04:00:00
2013-01-01 05:00:00
2013-01-01 06:00:00
2013-01-01 07:00:00
2013-01-01 08:00:00
2013-01-01 09:00:00
2013-01-01 10:00:00
2013-01-01 11:00:00
2013-01-01 12:00:00
2013-01-01 13:00:00
2013-01-01 14:00:00
2013-01-01 15:00:00
2013-01-01 16:00:00
2013-01-01 17:00:00
2013-01-01 18:00:00
2013-01-01 19:00:00
2013-01-01 20:00:00
2013-01-01 21:00:00
2013-01-01 22:00:00
2013-01-01 23:00:00

24 rows selected. 
```

# css - 在 scss 文件中使用 config.rb 中定义的变量

> ID：14506578
> 
> 赞同：9
> 
> 时间：2013-01-24T16:53:56.957
> 
> 标签：css, ruby, compass-sass, sass

是否可以在整个 SCSS 文件中使用在 compass 项目的 config.rb 文件中定义的变量？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-24T18:55:34.270

在您的 config.rb 文件中添加一个自定义模块：

```
module Sass::Script::Functions
  def custom_color(value)
    rgb = options[:custom][:custom_colors][value.to_s].scan(/^#?(..?)(..?)(..?)$/).first.map {|a| a.ljust(2, a).to_i(16)}
    Sass::Script::Color.new(rgb)
  end
end 
```

然后设置你的变量（同样，在 config.rb 文件中）：

```
sass_options = {:custom => { :custom_colors => {"main" => "#ff1122"} } } 
```

然后在您的 scss 文件中，您可以使用以下`custom_color()`功能：

```
body {
  background-color: custom_color(main);
} 
```

您还可以编写另一个自定义函数，通过传入字符串返回其他类型，例如字体大小、尺寸等，然后返回适当的类实例。

有趣的是，这将允许您将环境变量传递到 compass 命令行，这会产生不同的结果。

因此，如果您的 sass_options 是：

```
sass_options = {:custom => { :custom_colors => {"main" => ENV["MAIN_COLOR"]} } } 
```

你运行指南针：

```
MAIN_COLOR=#dd1122 bundle exec compass compile 
```

然后你在命令行中传入的任何颜色都会出现在生成的 css 中。如果您使用 Heroku，您可以`heroku config:set MAIN_COLOR=#224411`并且能够使用相同的 scss 文件在每个应用程序的基础上设置模板颜色。

# java - Mergesort - 拆分数组时的Stackoverflow不是一半

> ID：14506579
> 
> 赞同：2
> 
> 时间：2013-01-24T16:54:03.200
> 
> 标签：java, stack-overflow, mergesort

我有问题。我必须编辑标准的归并排序算法，改变数组两半之间的比率。标准合并排序将数组拆分为 2。但我必须用系数拆分它。

*例子：*

我有一个 10 元素数组，我必须用 0.2 的系数对其进行拆分。这意味着第一次将数组分成两部分：一个有 2 个元素，第二个有 8 个元素。由于是递归的，每次我拆分数组时都会应用这个比率。

*问题：*

如果系数 >=0.5，则没有概率。如果每次尝试的比率 <=0.5 都会导致堆栈溢出。

任何帮助将不胜感激！

这里的类：

```
public class Sort {
public static double coeff = 0.2;
public static void mergeSort(int[] a) {
    int vectorTemp[];
    vectorTemp = new int[a.length];
    mergeSort(a, vectorTemp, 0, a.length - 1);
}

private static void mergeSort(int[] a, int[] vectorTemp, int left, int right) {
    if (left < right) {
        int center = calculateMid(left, right);
        mergeSort(a, vectorTemp, left, center);
        mergeSort(a, vectorTemp, center + 1, right);
        merge(a, vectorTemp, left, center + 1, right);
    }
}

private static void merge(int[] a, int[] vectorAux, int posLeft, int posRight, int posEnd) {
    int endLeft = posRight - 1;
    int posAux = posLeft;
    int numElemen = posEnd - posLeft + 1;

    while (posLeft <= endLeft && posRight <= posEnd) {
        if ((a[ posLeft]) < (a[posRight])) {
            vectorAux[posAux++] = a[posLeft++];
        } else {
            vectorAux[posAux++] = a[posRight++];
        }
    }

    while (posLeft <= endLeft) {
        vectorAux[posAux++] = a[posLeft++];
    }

    while (posRight <= posEnd) {
        vectorAux[posAux++] = a[posRight++];
    }

    for (int i = 0; i < numElemen; i++, posEnd--) {
        a[posEnd] = vectorAux[posEnd];
    }
}
//this is the method i've added to calculate the size
private static int calculateMid(int left, int right){
    int mid = 0;
    int tot = right-left+1;
    int firstHalf = (int) (tot * coeff);
    mid = left + firstHalf;
    System.out.println(left+", "+mid +", "+firstHalf+", "+right + ", "+tot);

    return mid-1;
}

public static void main(String[] args) {
    int vector2[] = {10, 3, 15, 2, 1, 4, 9, 0};
    System.out.println("Array not ordered: " + Arrays.toString(vector2) + "\n");
    mergeSort(vector2);
    System.out.println("Array ordered: " + Arrays.toString(vector2));
}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T17:03:50.383

这里有一个提示：

考虑一下`calculateMid()`二元素数组的返回值，以及`mergeSort()`之后会发生什么。

一旦你弄清楚那里发生了什么，也会清楚为什么代码适用于`coeff >= 0.5`.

# css - 用于 CSS 继承的 Sass Mixin

> ID：14506580
> 
> 赞同：0
> 
> 时间：2013-01-24T16:54:06.200
> 
> 标签：css, sass, inheritance

我刚刚编写了这个 mixin 来帮助解决 IE7 的一些 CSS 继承问题：

```
=inherit($property)
  $property: inherit

  .ie7 &
    $property: expression(this.parentNode.currentStyle.$property) 
```

编译器没有错误，但我没有得到任何输出。

我这样称呼它：

```
+inherit(height) 
```

当然对于我应该得到的所有浏览器`height: inherit`，然后在一个单独的位中获取 IE `height: expression(this.parentNode.currentStyle.height)`？

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T18:00:13.093

使用以下方法自己解决了：

```
=inherit($property)
    #{$property}: inherit

    .ie6 &,
    .ie7 &
        #{$property}: expression(this.parentNode.currentStyle.#{$property}) 
```

# asterisk - 应答机接听时 Asterisk Dialplan 未运行

> ID：14506582
> 
> 赞同：0
> 
> 时间：2013-01-24T16:54:12.650
> 
> 标签：asterisk

我正在开发一个系统来自动拨出迟到的租户号码，并读取他们欠了多少。当拨打的号码被接听或在拨号时发送“忙音”时，一切正常。不幸的是，当电话响铃的时间足够长，以至于答录机（或语音邮件）自己接听时，拨号计划上下文和分机根本不会启动。当应答机或语音邮件应答时，我必须做什么才能启动拨号计划？我在两部手机上进行了测试，两者都做同样的事情。

这是启动调用的代码。该脚本有效，并将拨打我的电话：

```
fputs($socket, "Action: Login\r\n"); 
fputs($socket, "UserName: $username\r\n"); 
fputs($socket, "Secret: $secret\r\n\r\n"); 
fputs($socket, "Command: sip show peers\r\n\r\n");

fputs($socket, "Action: Originate\r\n");
fputs($socket, "Channel: $number_out\r\n");
fputs($socket, "Context: $context\r\n");
fputs($socket, "Exten: $exten\r\n");
fputs($socket, "Priority: 1\r\n");
fputs($socket, "Timeout: 20000\r\n");
fputs($socket, "Variable: NAME=$name\r\n");
fputs($socket, "Variable: LOCATION=$location\r\n");
fputs($socket, "Variable: AMOUNT=$amount\r\n");
fputs($socket, "Variable: TENSE=$tense\r\n");
fputs($socket, "Variable: CALLDIR={$cd['calls_out_dir']}\r\n");
fputs($socket, "Variable: CALLFILE=$callFile\r\n");
fputs($socket, "Variable: ICOID=${cd['ico_id']}\r\n");
fputs($socket, "Variable: LIVEORDEVEL=html-devel\r\n");
fputs($socket, "Variable: TIMESTAMP=$timestamp\r\n");
fputs($socket, "Callerid: \"$cid_name\" <$cid_num>\r\n"); 

fputs($socket, "Action: Logoff\r\n\r\n"); 
```

这是拨号计划的相关部分：

```
[out-tenant-collections]
exten => s,1,Wait(1)
exten => s,2,AMD()
exten => s,3,Monitor(gsm,"${CALLDIR}${CALLFILE}",m)

exten => s,n,NOOP(AMDSTATUS = ${AMDSTATUS} DIALSTATUS = ${DIALSTATUS})

exten => s,n,GotoIf($[${AMDSTATUS}=HUMAN]?humn:mach)

exten => s,n(mach),agi(/var/www/${LIVEORDEVEL}/asterisk-programs/ivr_collections_out_response.php,${ICOID},0,${CALLDIR}${CALLFILE}.gsm,${TIMESTAMP})

exten => s,n,Wait(10)

exten => s,n(humn),agi(googletts.agi,"You ${TENSE} at ${LOCATION}. Your rent is overdue by ${AMOUNT}., If you already made a payment in full, press 1\. If you already mailed payment or intend to pay within two days, press 2., If you feel$

exten => s,n,NOOP(ICOID: ${ICOID})

; the wait exten command will let you interupt the above googletts agi app and go to the extension dialed in (1,2,3 or 4) if a digit is dialed that is not recognized it will go to the i extension

exten => s,n,WaitExten()

; they entered something other than 1,2,3 or 4

exten => i,1,agi(googletts.agi,"Sorry I did not catch that.",en,,1.1)

exten => i,n,Goto(s,4)

;; They hit 1, register that they said they paid their full amount

exten => 1,1,agi(/var/www/${LIVEORDEVEL}/asterisk-programs/ivr_collections_out_response.php,${ICOID},1,${CALLDIR}${CALLFILE}.gsm,${TIMESTAMP})

exten => 1,2,agi(googletts.agi,"Thank you, we will double check our records, if the payment has been recorded you will not recieve any more calls.",en,,1.1)

exten => s,n,Hangup

;; They hit 2, register that they said they mailed a payment

exten => 2,1,agi(/var/www/${LIVEORDEVEL}/asterisk-programs/ivr_collections_out_response.php,${ICOID},2,${CALLDIR}${CALLFILE}.gsm,${TIMESTAMP})

exten => 2,2,agi(googletts.agi,"Thank you, we will await your payment.",en,,1.1)

exten => s,n,Hangup

;; They hit 3, register that they said it was an error to get this call

exten => 3,1,agi(/var/www/${LIVEORDEVEL}/asterisk-programs/ivr_collections_out_response.php,${ICOID},3,${CALLDIR}${CALLFILE}.gsm,${TIMESTAMP})

exten => 3,2,agi(googletts.agi,"Please explain why you feel you have recieved this message in error, after the beep.",en,,1.1)

exten => 3,3,Wait(1)

exten => 3,4,Playback(beep)

exten => 3,5,Wait(30)

exten => 3,n,Hangup

;; They hit 4, they want the message repeated

exten => 4,1,Goto(s,4)

;; The waitexten command timed out with no response

exten => t,1,agi(/var/www/${LIVEORDEVEL}/asterisk-programs/ivr_collections_out_response.php,${ICOID},0,${CALLDIR}${CALLFILE}.gsm,${TIMESTAMP})

exten => t,2,Hangup 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T18:23:13.567

请发布您用于生成外拨电话的代码。在我看来，您并没有将拨出呼叫的“您的一方”作为拨号命令的一部分发送到此上下文中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T20:24:48.637

事实证明，当应答机或语音邮件使用特殊分机接听时，您需要处理。我在拨号计划中添加了以下行。需要注意的重要一点是扩展名：“失败”这是答录机接听时执行的默认扩展名。

```
;; if the answering machine picks up when no user answers or sends a busy tone
exten => failed,1,Goto(s,mach) 
```

# pandas - 在 ipython 中绘图时抑制对象的输出

> ID：14506583
> 
> 赞同：23
> 
> 时间：2013-01-24T16:54:14.990
> 
> 标签：pandas, ipython

在 ipython 中绘制直方图时是否可以抑制数组输出？：

例如：

```
plt.hist(OIR['Range'], bins, named=True, histtype='bar') 
```

在显示图形之前输出/打印数组信息。

[![ipython直方图](../Images/8406be0d762b4c5d4bbcea950245673c.png)](https://i.stack.imgur.com/aiPJN.png)

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2015-08-03T16:17:59.333

只需放在`;`代码之后。
它仅适用于 ipython-notebook。

`plt.hist(...);`

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2013-01-24T17:00:50.780

将返回值分配给一个变量（我称它为`_`未使用的变量）：

```
_ = plt.hist(...) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-11-22T11:36:56.483

您还可以添加`plt.show()`：

```
plt.hist(OIR['Range'], bins, named=True, histtype='bar')
plt.show() 
```

# c# - Sharepoint - 通过 CAML 按用户 ID 过滤列表

> ID：14506584
> 
> 赞同：2
> 
> 时间：2013-01-24T16:54:14.980
> 
> 标签：c#, sharepoint-2007, filtering, caml, sharepoint-list

使用 Sharepoint 2007 并尝试按名为 StudentName 的字段过滤项目列表：

```
<Field
ID="{GUID-REDACTED}"
Name="StudentName"
DisplayName="Student Name"
Type="User"
Group="STUDENT COLS" /> 
```

目前，这是用于过滤的 CAML，当它通过 U2U CAML 查询生成器运行时，它返回正确的列表项没有问题，但是当它部署到 SharePoint 时，它返回整个列表（即没有过滤）。

```
SPQuery userQuery = new SPQuery();
userQuery.Query = "<OrderBy>
<FieldRef Name='Rank'>
</FieldRef>
</OrderBy>
<Where>
    <Eq>
        <FieldRef Name='StudentName' LookupId='TRUE' />
        <Value Type='Integer'><UserID /></Value>
    </Eq>
</Where>"

SPListItemCollection userProjectBasket = PBL.GetItems(userQuery); 
```

我已经尝试过使用和不使用查询标签，但都无济于事，我也将 userID 的类型更改为 User 作为最后的手段，仍然没有乐趣。

非常难过，所以热烈欢迎任何意见。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T17:13:35.823

`OrderBy`原因需要在子句`Where`之后：

```
userQuery.Query = 
@"<Where>
    <Eq>
        <FieldRef Name='StudentName' LookupId='TRUE' />
        <Value Type='Integer'><UserID /></Value>
    </Eq>
</Where>
<OrderBy>
    <FieldRef Name='Rank'/>
</OrderBy>"; 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-25T14:40:47.430

好的答案 - 但请注意一件事 - 使用 SPQuery 对象时，您永远不要指定标签（这些标签内部包含在 SPQuery.Query 对象中）。

此外，您仍然可以使用 U2U CAML 创建器来节省构建查询本身的时间 (http://www.u2u.be/Tools/SharePointCamlQueryBuilder.aspx)；虽然它是为 2007 年建造的，但它也适用于 2010 年。

大卫斯特林/SICG - [http://www.sterling-consulting.com](http://www.sterling-consulting.com)

# javascript - 禁用按钮时触发javascript函数？

> ID：14506585
> 
> 赞同：1
> 
> 时间：2013-01-24T16:54:26.050
> 
> 标签：javascript, html, xhtml, onclick, disabled-input

如果我这样使用提交按钮..

```
<input type="image" name="submit" src="image.png" disabled="disabled" /> 
```

当有人单击此按钮时，有什么方法可以触发 Javascript 警报？我尝试过使用`onclick()`，但除非我拿走`disabled="disabled"`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T16:56:50.943

不，该`disabled`设置还会禁用事件。

如果您需要保持行为，那么不要禁用它，而应该保持启用它，并根据添加到元素的某些标志（例如元素上的类或其他属性）强制执行您想要的行为。

# android - 将使用 wifi 的应用程序转换为使用蓝牙的应用程序

> ID：14506586
> 
> 赞同：2
> 
> 时间：2013-01-24T16:54:27.830
> 
> 标签：android, bluetooth, wifi, android-wifi

我有一个 android 应用程序，它执行以下操作：

与服务器连接以与其他服务器同时读取和更新数据库。

我想将其转换为不需要互联网连接的应用程序。因此，我想知道是否有可能让安卓设备充当数据库的服务器，而多部手机通过蓝牙连接到它，获取和更新数据库中的信息？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T16:59:08.037

是的。有可能。

但是，您的所有设备都必须位于附近，以便它们可以通过蓝牙相互连接。

你可以看看[Android 蓝牙 API](http://developer.android.com/guide/topics/connectivity/bluetooth.html)。

但是，我的建议是使用 Wifi 而不是蓝牙。您将需要额外的 WiFi 路由器。但是，在这种情况下，您不需要处理蓝牙 API。

您只需要在其中一台 Android 设备上编写服务器，其余设备都可以正常工作（与现在一样）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T23:06:07.400

这样做有几个选项，不涉及服务器。它们都需要与连接到服务器的两个设备略有不同的方法。

1.  Wi-fi Direct - 仅适用于 Android 4.0+。
2.  蓝牙

就个人而言，我一直在使用蓝牙选项，并没有发现它非常困难。本质上，您必须执行以下操作才能使其正常工作。

1.  让其中一台设备监听连接。如果未配对，则必须使设备可被发现。
2.  第二个设备需要发起连接。它可以通过查看已知设备并尝试连接到其中一个或侦听新设备来做到这一点
3.  两个设备连接后，它们必须启动某种通信协议。通信是必不可少的串行连接。

蓝牙要求设备彼此之间的距离在 10 m 以内。Wi-fi direct 将允许更进一步，但如前所述，较少支持。可以同时使用这两种通信方法，但有些挑战。

# jquery - 如何在node.js express中并排显示2个目录列表

> ID：14506592
> 
> 赞同：0
> 
> 时间：2013-01-24T16:54:49.327
> 
> 标签：jquery, node.js, express, pug, stylus

场景：客户端可以上传到2个目录

想要的结果：客户可以并排看到两个目录的列表

我是这些的新手。

1.  几个 jquery 列表框小部件来显示目录列表
2.  新条目是否可以自动显示或仅限于点击“刷新”按钮的客户？

这可行/可能吗？

npm 中是否有已经完成上述部分功能的软件包？

感谢您的任何/所有意见/想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T17:47:12.607

听起来你只需一点点 HTML/CSS 就可以做任何你想做的事情。以最简单的形式做这样的事情。

```
var fs = require('fs');

app.get('/foo', function(req, res){

    fs.readdir('dir1', function(error, result){

        res.write('<div class="bar">');
        res.write('<ul>');
        //write out all of the files as list
        res.write('</div>');
        fs.readdir('dir2', function(error, result){
            res.write('<div class="bar">');
            res.write('<ul>');
            //write out all of the files as lis
            res.write('</div>');
            res.end();
        });
    });
}); 
```

然后，在客户端，制定一个 CSS 规则

```
 .bar{
     float: left;
 } 
```

假设它们都在相对包装器 div 中，这会将它们都拉到左侧。您可以从那里尽可能多地使用 jquery/css 对其进行修饰。每次有请求时（即刷新时），这将更新他们两个。如果您希望它实时发生，请查看 Socket.io 或其他一些 websocket 工具。

# python - 在 python 中使用 gpg 的最简单但安全的方法？

> ID：14506593
> 
> 赞同：2
> 
> 时间：2013-01-24T16:54:50.217
> 
> 标签：python, encryption

我想使用通过 gpg2 命令行生成的密钥在 python 中加密一些明文。应用程序只知道公钥，并在存储到数据库之前对数据进行加密。

我知道有 python-gnupg，但只在 gpg 1.4.2 上测试过。最新的稳定版是 gpg 2.0.19，它添加了一些新的错误修复和功能。有 pycrypto，但用于简单的加密步骤似乎很笨重。

我可以使用 subprocess 模块并只使用 gpg2，但我不确定从 python 运行外部程序的安全隐患。

是否有我可以使用的 gpg 的纯 python 包装器？或者使用 subprocess 模块调用 gpg2 就足够了吗？

# content-management-system - Magnolia HierarchyManager 和 Content 已折旧。如何使用 Session 和 jcrNode 复制功能？

> ID：14506605
> 
> 赞同：0
> 
> 时间：2013-01-24T16:55:22.733
> 
> 标签：content-management-system, jcr, magnolia

我正在尝试在我的 Spring 控制器中执行一些逻辑，在该控制器中，我根据另一个网站节点中使用的模板路由到一个网站节点。

我可以使用 LifeTimeJCRSessionUtil.getHierarchyManager("website").getContent("mynodepath").getTemplate() 来执行此操作，但我看到 HierarchyManager 和 Content 类已被贬值。

我查看了 Session 类，但到目前为止我还无法弄清楚如何根据 jcrNode 获取模板 id。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T17:28:44.387

您可以改用：

```
javax.jcr.Session jcrSession = LifeTimeJCRSessionUtil.getSession("website");
Node mynode = jcrSession.getNode("/my/node/path");
info.magnolia.cms.core.MetaData metaData = info.magnolia.jcr.util.MetaDataUtil.getMetaData(mynode);
String template = metaData.getTemplate(); 
```

基本上，`getHierarchyManager("website").getContent("mynodepath")`您应该使用 `getSession("website").getNode("/my/node/path")`.

# c# - 使用 2 个子域、一个 Java、一个 .NET 进行单点登录

> ID：14506613
> 
> 赞同：7
> 
> 时间：2013-01-24T16:55:41.197
> 
> 标签：c#, asp.net-mvc, forms-authentication

我目前正在为上述问题寻找一个很好的解决方案。我们可能会在 .NET 上运行表单身份验证。

我有一个 ASP.NET MVC 应用程序运行在`a.mydomain.com`和一个基于 Java 的应用程序运行在`b.mydomain.com`.

什么是最好的方法，这样我就不必登录每个应用程序。说，当我登录`a.mydomain.com`然后打开 Java`b.mydomain.com`时，它会检查并看到我已经登录了吗？

WCF AuthenticationService 类会为此工作吗？我可以从 JavaScript 发出 AJAX 请求`b.mydomain.com`来检查我是否已经在 .NET 应用程序中登录吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T17:13:57.960

只要`mydomain.com`不在公共后缀列表（[http://publicsuffix.org/list/](http://publicsuffix.org/list/)）中，`a.mydomain.com`就可以放一个域cookie`.mydomain.com`

（注意放cookie只能降一级：`a.b.mydomain.com`不能放`.mydomain.com`cookie）

cookie 将被发送到`b.mydomain.com`(以及`*.mydomain.com`and `mydomain.com`) 并且可以用作打开会话的令牌。所以一定要控制整个 *.myDomain.com 子域并使其 httpOnly 和安全 (https)

```
Response.SetCookie(new HttpCookie("myCookieName", "myCookieValue") { HttpOnly = true, Domain = ".myDomain.com", Secure=true }); 
```

[Atlassian Crowd 解决方案http://www.atlassian.com/software/crowd/overview](http://www.atlassian.com/software/crowd/overview)的某些部分基于这种 cookie 机制

所以你可能：

1.  在 a.domain.com 上启用表单身份验证
2.  成功登录后构建一个`myToken`cookie，其值包含 userId 和散列 userId，散列键由 a.myDomain.com 和 b.myDomain.com 已知
3.  使用域 .myDomain.com 设置 cookie
4.  当用户进入 b.myDomain.com 时，检查 cookie 服务器端（在 java 中）是否匹配 userId 和散列值
5.  如果 cookie 正确，则为用户 userId 打开会话

请注意，您将无法访问 cookie 客户端（因此没有 js cookie 处理，除非它是服务器端 js，例如 nodejs）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T17:02:49.090

使用 Java 或 .NET 现有解决方案不太可能在其他平台上运行。你需要几个能力：

1.  使用识别标识符（会话、cookie）跟踪客户端。
2.  让 Java 和 .NET 应用程序都能获得相关信息。

你怎么能做到这些？

1.  这实际上很容易。您使用的是同一个域，因此您可以在浏览器上为所有域放置一个 cookie，这意味着对 a* 和 b* 的请求都会将 cookie 发送到服务器。Java 和 .NET 都具有出色的 cookie 放置功能。
2.  这取决于您的后端。用于持久存储的系统是什么？如果您有两个系统都连接到的 MySQL 数据库之类的东西，您可以为每个存储的标识符创建一个包含登录信息的表以进行身份​​验证。如果您采用这条路线，也可以设置某种超时来使旧的身份验证无效。

如果您拥有这两条信息，则可以在每个系统上进行身份验证。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T17:25:23.290

我建议使用企业 sso 协议之一，Oauth2 或 ws-federation。这为您在组合服务时提供了最大的灵活性，您不仅可以联合这两者，而且以后可以轻松地扩展您的应用程序环境。两种协议都不需要应用程序位于同一域中。

尽管这对于您的简单需求来说可能听起来过于复杂，但您只需执行一次，就可以永远解决 sso 问题，无论您的应用程序将来会发生什么。

# python - 一个预测中的目标值数量

> ID：14506615
> 
> 赞同：2
> 
> 时间：2013-01-24T16:55:47.063
> 
> 标签：python, statistics, machine-learning, scikit-learn, random-forest

我使用 python 的 scikit-learn 模块来预测 CSV 文件中的一些值。我正在使用随机森林回归器来做到这一点。例如，我有 8 个训练值和 3 个值要预测 - 我必须使用哪些代码？**作为要预测的值，我必须一次（A）**或单独**（B）**给出所有目标值？

**变体 A：**

```
#Readind CSV file
dataset = genfromtxt(open('Data/for training.csv','r'), delimiter=',', dtype='f8')[1:]
#Target value to predict  
target = [x[8:11] for x in dataset]
#Train values to train 
train = [x[0:8] for x in dataset]
#Starting traing
rf = RandomForestRegressor(n_estimators=300,compute_importances = True) 
rf.fit(train, target) 
```

**变体 B：**

```
#Readind CSV file
dataset = genfromtxt(open('Data/for training.csv','r'), delimiter=',', dtype='f8')[1:]
#Target values to predict  
target1 = [x[8] for x in dataset]
target2 = [x[9] for x in dataset]
target3 = [x[10] for x in dataset]
#Train values to train 
train = [x[0:8] for x in dataset]
#Starting traings
rf1 = RandomForestRegressor(n_estimators=300,compute_importances = True) 
rf1.fit(train, target1)
rf2 = RandomForestRegressor(n_estimators=300,compute_importances = True) 
rf2.fit(train, target2)
rf3 = RandomForestRegressor(n_estimators=300,compute_importances = True) 
rf3.fit(train, target3) 
```

**哪个版本是正确的？**

*提前致谢！*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T17:59:35.143

两者都是可能的，但做不同的事情。

第一个学习不同条目的独立模型`y`。第二个学习了所有条目的联合模型`y`。如果可以学习的条目之间存在有意义的关系`y`，则第二个应该更准确。

由于您正在对很少的数据进行训练并且没有进行规范化，我想您在第二种情况下只是过度拟合。我不完全确定回归案例中的分割标准，但如果标签空间是三维的，则叶子“纯”需要比它只是一维的时间长得多。因此，您将学习更复杂的模型，而您拥有的少量数据并不能保证这些模型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T18:27:19.933

在通常的机器学习用语中，“8 个训练值和 3 个值”可能最好表示为“8 个特征和 3 个目标变量”。

两种变体都应该工作并且~~产生类似的预测~~为`RandomForestRegressor`支持多输出回归所做的那样。

~~`RandomForestRegressor`不过，预测与非确定性算法并不完全相同。但平均而言，两种方法的预测质量应该是相同的。~~

**编辑**：请参阅 Andreas 的答案。

# c# - 在 C# 中确定数组数组的大小？

> ID：14506616
> 
> 赞同：0
> 
> 时间：2013-01-24T16:55:52.007
> 
> 标签：c#, visual-studio-2012

我正在创建一个数组数组，这样：

```
var arrNewArray = new string[arrOldArray.Length][7]; 
```

arrOldArray 是一个数组数组，它​​是 [X][4]，这意味着第一个数组或“外部”数组的长度可以改变，但“内部”数组的长度始终为 4，或包含 4 个字符串（[ 0][1][2][3]）。

为什么编译器不接受我上面的陈述？

本质上，我正在尝试使用 arrOldArray 并对其进行扩展，或者通过将旧数组中的 [4] 增加到新数组中的 [7] 来添加更多“列”，然后将内容复制过来。也许我没有以最好/有效的方式做到这一点，所以任何指导都将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T16:57:52.080

我想你想要一个二维数组：

```
var arrNewArray = new string[arrOldArray.Length, 7]; 
```

您可以像这样访问它：`arrNewArray[x, y]`.

这比锯齿状数组要好，因为它清楚地表明每一行的“列”数是相同的。

如果你想继续使用锯齿状数组，你需要这样做：

```
var arrNewArray = new string[arrOldArray.Length][];
for(int i = 0; i < arrOldArray.Length; ++i)
    arrNewArray[i] = new string[7]; 
```

这种复杂方式的原因是：对于锯齿状数组，每个“行”可以有不同数量的“列”。不存在每个“行”具有相同数量“列”的情况的简写语法。这就是您的代码无法编译的原因。
锯齿状数组是必不可少的数组数组，因此您需要为外部数组的每个“行”创建一个新的数组实例并显式分配它。这就是`for`循环正在做的事情。

您不能`Array.Copy`与锯齿状数组一起使用。每个子数组都是它自己的实例，`Array.Copy`不会进行深层复制，它只是将引用从一个数组复制到另一个数组。效果是，两个数组都指向相同的项，并且从另一个数组中可以看到更改一个数组中的项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T17:25:18.763

您没有正确创建锯齿状数组。正确的方法是创建交错数组的第一个维度，然后循环遍历第一个维度的项目以创建嵌套数组并从旧数组中复制数据。这是一个例子：

```
int newSize = 7;
string[][] newArray = new string[oldArray.Length][];
for (int i = 0; i < oldArray.Length; i++)
{
    newArray[i] = new string[newSize];
    Array.Copy(oldArray[i], newArray[i], oldArray[i].Length);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T16:57:34.577

你会想要

```
var arrNewArray = new string[arrOldArray.Length, 7]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T17:03:30.120

```
var arrNewArray = new[] {new string[7]};//array of arrays
var arrNewArray = new string[arrOldArray.Length, 7];//two-dimensional array 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T17:08:15.090

使用 Linq：

```
int[][] jaggedArray2 = new int[][] 
{
    new int[] {1,3,5,7,9},
    new int[] {0,2,4,6},
    new int[] {11,22}
};
int length = jaggedArray.Sum(a => a.Length); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-24T17:29:43.950

我不相信你问的是直接可能的。因为您使用的语法是针对锯齿状数组的，而您正在做的是有效地要求它创建一个多维数组。

语法令人困惑，因为它读起来就像您真正想要的是一个多维数组（尽管我知道情况并非如此。）

由于大小更改，我不相信您可以将数组存储在新分配的数组中。您需要构建一个自定义复制方法来将数据移动到更大的数组中。

# java - 如何在鼠标下模糊图像

> ID：14506619
> 
> 赞同：-2
> 
> 时间：2013-01-24T16:56:18.457
> 
> 标签：java, image, awt, mouseevent, java-2d

我在java中工作，并且正在生成一个图像。当鼠标经过生成的图像时，我需要图像使用模糊或像素化滤镜。

我应该使用什么方法来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T17:39:37.830

看这里： [http ://www.java2s.com/Code/Java/2D-Graphics-GUI/ImageEffectSharpenblur.htm](http://www.java2s.com/Code/Java/2D-Graphics-GUI/ImageEffectSharpenblur.htm)

您需要定义一个包含您想要的任何值的数组的内核，使用内核作为参数实例化 ConvolveOp，然后过滤所需的图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T16:19:43.493

```
public void test(int x, int y){ // Here x and y are the parameter thrown by mouseDragged() function
blur1 = displayImage; // blur1 is Image variable

blur2 = new BufferedImage(blur1.getWidth(this), blur1 //blur2 is BufferedImage Variable
    .getHeight(this), BufferedImage.TYPE_INT_RGB);
tst = blur2.createGraphics(); // tst is Graphics2D variable
tst.drawImage(blur1, 0, 0, this);
blur3 = new BufferedImage(blur1.getWidth(this), blur1 //blur3 is BufferedImage Variable
    .getHeight(this), BufferedImage.TYPE_INT_RGB);
float data[] = { 0.0625f, 0.125f, 0.0625f, 0.125f, 0.25f, 0.125f,
    0.0625f, 0.125f, 0.0625f };
Kernel kernel = new Kernel(3, 3, data);
ConvolveOp convolve = new ConvolveOp(kernel, ConvolveOp.EDGE_NO_OP,
    null);
blur2 = OSC.getSubimage(x, y, 20, 20); // 20 is the size in pixels where the effect is applied
blur3 = OSC.getSubimage(x, y, 20, 20);
convolve.filter(blur2, blur3);    
  Graphics osg = OSC.getGraphics();
  osg.setColor(fillColor);
  osg.drawImage(blur3,x,y,null);
  osg.dispose();
  repaint();
} 
```

# iphone - 最近保存的图像的访问 URL

> ID：14506621
> 
> 赞同：-1
> 
> 时间：2013-01-24T16:56:30.473
> 
> 标签：iphone, ios, ios4

我正在使用

```
UIImageWriteToSavedPhotosAlbum(image,nil,nil,nil); 
```

保存图像，但我想知道它在哪里保存，意思是参考 URL 和保存图像的名称..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T17:12:38.090

您可以使用 ALAssetsLibrary 获取它

```
ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];

[library writeImageToSavedPhotosAlbum:myCGImage metadata:nil completionBlock:^(NSURL* assetURL, NSError* error) 
{
      if (error.code == 0) {
         NSLog(@"URL %@", assetURL);
          [library assetForURL:assetURL resultBlock:^(ALAsset *asset) {
              NSLog(@"Filename %@", [[asset defaultRepresentation] filename]);
          }
          failureBlock:^(NSError* error) {
             NSLog(@"failed to retrieve image asset:\nError: %@ ", [error localizedDescription]);
            }];
       }else {
           NSLog(@"saved image failed.\nerror code %i\n%@", error.code, [error localizedDescription]);
       }
}]; 
```

# python - 不确定 Python 类代码有什么问题

> ID：14506624
> 
> 赞同：-2
> 
> 时间：2013-01-24T16:56:48.793
> 
> 标签：python

我仍然在研究 Python 中的类，

```
class Triangle(object):
    def __init__(self, angle1, angle2, angle3):
        angle1 = self.angle1
        angle2 = self.angle2
        angle3 = self.angle3
    number_of_sides = 3
    def check_angles(angle1, angle2, angle3):
        if angle1+angle2+angle3 == 180:
            return True
        else:
            return False

my_triangle = Triangle(30, 60, 90)
print(Triangle.number_of_sides)
print(Triangle.check_angles) 
```

那么有什么问题呢？

Stackoverflow 有一些非常卑鄙的用户，我来自 MathStackExchange，人们并没有像这里那样对新手/菜鸟问题投反对票。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T16:57:21.147

你有你的任务向后：

```
self.angle1 = angle1 
```

等等

考虑一下正在发生的事情可能会有所帮助。 `self`是传入的类的一个实例`Triangle`。所以，

```
T = Triangle()
T.method_call()  #basically the same as `Triangle.method_call(T)` 
```

内`method_call`，`self`是对 的引用`T`。（`__init__`有点神奇——它会在第一行自动调用，但原理还是一样的）。一旦你知道了，就很容易明白你为什么需要`self.whatever = whatever`——你在对象上添加了一个新属性`T`！
最后，这解释了您应该如何编写`check_angles`：

```
def check_angles(self):
    #remember, `self` is a reference to a triangle instance -- T in our hypothetical code
    #so we can use `self` to gain access to all the attributes we set in `__init__`.
    if self.angle1 + self.angle2 + self.angle3 == 180:
        return True
    else:
        return False 
```

* * *

现在快速转移到类属性。您也可以将属性放入*类*中：

```
class Triangle:
    number_of_sides = 3 
```

我认为在定义方法（函数）之前定义类属性是习惯性的，但实际上不必这样做。（它会帮助你的代码的读者理解它——由于你做事的顺序，我误解了你的原始代码）。

您也可以在创建类之后动态地向类添加属性：

```
class Triangle:
    ...

Triangle.number_of_angles = Rhombus.number_of_angles - 1 
```

您可以通过`Triangle.some_attribute`几种方式访问​​。第一种方法是直接通过类 ( `Triangle.number_of_sides`)。第二种方式是通过实例：

```
T = Triangle()
T.number_of_sides 
```

乍一看，这似乎有点好笑。毕竟，实例没有`number_of_sides`属性。事实证明，python 旨在首先查看实例**以**查看它是否具有自己的`number_of_sides`属性。如果确实如此，那太好了，这就是你得到的。但是，如果没有，python 将查看该属性的类。这变成了在类实例之间共享数据的便捷方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T16:58:22.950

我认为您的意思是这样编写构造函数：

```
class Triangle(object):
    def __init__(self, angle1, angle2, angle3):
        self.angle1 = angle1
        self.angle2 = angle2
        self.angle3 = angle3 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T17:07:06.747

我猜这是 Python Koans 练习。很棒的图书馆，祝你好运！

我相信你有两个问题。

首先是作业。自我在左侧。

其次是您的方法创建。您需要传递 self 变量并像这样引用属性

```
class Triangle(object):
    def __init__(self, angle1, angle2, angle3):
        self.angle1 = angle1
        self.angle2 = angle2
        self.angle3 = angle3
        self.number_of_sides = 3
    def check_angles(self):
        if self.angle1 + self.angle2 + self.angle3 == 180:
            return True
        else:
            return False 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-24T17:47:52.537

没有太多解释，所以您可以自己从中学习，这是一种编写类并使用它的方法：

```
class Triangle(object):
    def __init__(self, angle1, angle2, angle3):
        self.angle1 = angle1
        self.angle2 = angle2
        self.angle3 = angle3
    number_of_sides = 3
    def check_angles(self):
        return self.angle1+self.angle2+self.angle3 == 180

my_triangle = Triangle(30, 60, 90)
print(Triangle.number_of_sides)
print(my_triangle.check_angles()) 
```

输出：

```
3
True 
```

# php - 为什么聊天内容没有加载？

> ID：14506631
> 
> 赞同：-1
> 
> 时间：2013-01-24T16:57:11.487
> 
> 标签：php, jquery, html, chat

我想做一个 jQuery 聊天，但我无法将聊天内容加载到聊天框.. 加载脚本（我使用会话登录，所以我需要将用户名传输到 JS）

```
<?php 
    include "protect/1.php";
    print "<script type=\"text/javascript\">var name = '".$_SESSION['username']."'; </script>";
?>
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>
<script type="text/javascript">
    $(document).ready(function(){ chat_update(name) });
    setInterval("chat_update("+name+")",1000);
    function chat_update(user) {
        $.post("response.php",{ username:user },function(data){
            $(".chatbox").html(data);
    }
</script> 
```

和 div：

```
<div class="chatbox"></div> 
```

如果我打开 response.php（通过发送帖子值的表单），它会加载所有消息。所以很纠结。。

编辑：要添加response.php，也许问题就在那里，但我不这么认为..

```
<?php
include "functions.php";
include "sql.php";
$iQuery = mysql_query("SELECT * FROM chat ORDER BY id ASC");
while($row = mysql_fetch_array($iQuery)) {
    if($row["to"] != null) {
        if($_POST["username"] == $row["to"] || $_POST["username"] == $row["sender"])
            echo "<span class=\"text\">".$row["date"]." | ".$row["sender"].": ".$row["message"]."</span><br>\n";
    }
    switch(getbyUser($_POST["username"],"level")) {
        case 1: echo "<span class=\"text\">".$row["date"]." | ".$row["sender"].": ".$row["message"]."</span><br>\n"; break;
        case 2: echo "<span class=\"text\">".$row["date"]." | ".$row["sender"].": ".$row["message"]."</span><a href=\"?page=admin/delmsg&msg=".$row["id"]."\"><img src=\"res/del.png\"></a><br>\n"; break;
        case 3:
        case 4: echo "<span class=\"text\">".$row["date"]." | ".$row["sender"].": ".$row["message"]."</span><a href=\"?page=admin/delmsg&msg=".$row["id"]."\"><img src=\"res/del.png\"></a><a href=\"?page=admin/editmsg&msg=".$row["id"]."\"><img src=\"res/edit.png\"></a><br>\n"; break;
    }
}
mysql_free_result($iQuery);
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T17:12:08.293

假设这是您的实时 jquery 代码，您的 $.post 请求无效，这就是它不返回任何数据的原因。

你还没有关闭功能（数据）部分，所以它应该是

```
function chat_update(user) {
    $.post("response.php",{ username:user },function(data){
            $(".chatbox").html(data);
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T17:13:11.380

您的`$.post`通话中有语法错误，请更改为：

```
function chat_update(user) {
    $.post("response.php",{ username:user },function(data){
        $(".chatbox").html(data);
    }); // <-- this was missing
} 
```

第二个问题在这里：

```
setInterval("chat_update("+name+")",1000); 
```

通过传递`name`您传递未引用字符串的类似内容，例如：

```
chat_update(John) // <-- the string doesn't have quotes 
```

一个快速的解决方法是添加单引号，但您需要确保用户名本身不能包含引号。

```
setInterval("chat_update('"+name+"')",1000); 
```

# android - 在 ACTION_UP 上将旋转重置为初始视图

> ID：14506632
> 
> 赞同：2
> 
> 时间：2013-01-24T16:57:15.310
> 
> 标签：android, rotation

我正在尝试这段代码

[https://stackoverflow.com/a/14297097/1907593](https://stackoverflow.com/a/14297097/1907593)

运行良好，但在 ACTION_UP 上没有任何反应，我想在 ACTION_UP 上将图像重置为初始视图（未旋转）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T17:30:56.493

把它付诸行动：

```
case MotionEvent.ACTION_UP : {
            mPrevAngle = mCurrAngle = 0;
            animate(mPrevAngle, mCurrAngle,0);
            break;
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T16:40:03.460

我用这段代码解决了

```
 private double mCurrAngle = 0;
    private double mPrevAngle = 0;
    private long durationMillis;

 case MotionEvent.ACTION_UP : {
        mPrevAngle = Math.toDegrees(Math.atan2(x - xc, yc - y));
         mCurrAngle = 0;
        durationMillis = 1000;
        animate(mPrevAngle, mCurrAngle,durationMillis);
        break;
    case MotionEvent.ACTION_MOVE: {
        mPrevAngle = mCurrAngle;
        mCurrAngle = Math.toDegrees(Math.atan2(x - xc, yc - y));
        animate(mPrevAngle, mCurrAngle, 0);
        if (mCurrAngle>0);{mCurrAngle = mCurrAngle-360;}
        break; 
```

现在的问题是 myCurrAngle 的度数不是从 0 到 -360，而是从 0 到 180 以及从 -1 到 -180。我正在尝试使用上面的代码转换为 0-360 的值，但现在我的值从 -180 到 -360 以及从 -360 到 -540。我的最终目标是当我使用 ACTION_MOVE 达到 -240° 时自动返回 0°（ACTION_UP 代码）

# linux - shell脚本中的重复变量

> ID：14506638
> 
> 赞同：0
> 
> 时间：2013-01-24T16:57:25.170
> 
> 标签：linux, bash, shell

我应该先说我以前从未使用过 shell 脚本，所以这对我来说是全新的。我能够做出一些有用的东西，但是优化得非常厉害，我不知道如何改进它。如果有的话，这是一个非常搞笑的脚本：

```
#/bin/bash

get_char() {
    old_tty_settings=`stty -g`
    stty -icanon min 0 time 1
    stty cbreak
    grabbed_char=`dd if=/dev/tty bs=1 count=1 2>/dev/null`
    stty -cbreak
    stty "$old_tty_settings"
}

while true; do

    unset char00
    unset char01
    unset char02
    unset char03
    unset char04
    unset char05

    echo -e "\nWaiting for keystroke..."
    read -n 1 char00

    while true; do

        get_char; char01=$grabbed_char

        if [ "$char01" != "" ]; then get_char; char02=$grabbed_char
            else break
        fi
        if [ "$char02" != "" ]; then get_char; char03=$grabbed_char
            else break
        fi
        if [ "$char03" != "" ]; then get_char; char04=$grabbed_char
            else break
        fi
        if [ "$char04" != "" ]; then get_char; char05=$grabbed_char
            else break
        fi

    done

    fullstring=$char00$char01$char02$char03$char04$char05
    echo -e "\nFULLSTRING:  !$fullstring!"

done 
```

清单要长得多，但我饶了你。

基本上，程序需要永远坐在终端等待击键。在初始击键后，它需要等待很短的时间（在这种情况下为 1/10 秒）才能再次击键。如果在短时间内没有注册击键，它会回显输出（将使用 sed 命令传送），然后重新启动。

它旨在与条形码扫描仪一起使用，您可以在其中扫描 4 个字符或 100 个字符。我们希望尽快处理数据，这意味着我们不希望在扫描某些内容后出现 1 秒的延迟。

一个好的解决方案是，如果可以在收到字符时创建“charXX”。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T18:01:13.850

用这个替换你的内心会做你想要的吗？

```
read -n 1 fullstring

while true; do
    get_char
    if [ -n "$grabbed_char" ] ; then
        fullstring="$fullstring$grabbed_char"
    else
        break
    fi
done
echo -e "\nFULLSTRING:  !$fullstring!" 
```

顺便说一句，在 [...] 不是内置的旧 shell 上，用 this 替换 if 会运行得更快：

```
case "$grabbed_char" in
    "")  break ;;
    *) fullstring="$fullstring$grabbed_char" ;;
esac 
```

# php - CKEditor 获取选定的编辑器

> ID：14506639
> 
> 赞同：1
> 
> 时间：2013-01-24T16:57:26.343
> 
> 标签：php, javascript, jquery, content-management-system, ckeditor

我有一个 CMS 系统，它并排显示两个 CKEditor，以便用户可以编辑主体和侧边栏内容。两个编辑器共享相同的工具栏。

我添加了一个插件，允许用户将嵌入的数据添加到编辑器中。唯一的问题是我需要在当前选择的编辑器上显示数据，键盘光标当前正在设置。

如何使用 javascript 或 JQuery 获取在工具栏上按下按钮之前当前选择的 CKEditor 元素。

现在我只能通过直接选择特定的编辑器实例来让它工作。

```
CKEDITOR.instances.mtxDescription.insertHtml(data); 
```

但是，我需要能够将数据直接放入选择的任何编辑器中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T19:28:18.627

如果您正在创建 CKEditor 插件，那么您已经参考了它处于活动状态的编辑器，请查看有关如何创建 CKEditor 插件[http://docs.cksource.com/CKEditor_3.x/Tutorials/Timestamp_Plugin的基本教程](http://docs.cksource.com/CKEditor_3.x/Tutorials/Timestamp_Plugin)

```
editor.addCommand( 'insertTimestamp',
    {
        exec : function( editor )
        {    
            var timestamp = new Date();
            editor.insertHtml( 'The current date and time is: <em>' + timestamp.toString() + '</em>' );
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T20:24:19.277

我能够通过向每个编辑器添加一个模糊事件并存储最后一次调用事件的最后一个 id 来解决这个问题。

```
var currentEditorInstance = 'mtxDescription';   
for(name in CKEDITOR.instances) {
CKEDITOR.instances[name].on('blur', function () {
        currentEditorInstance = this.name;
});
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T17:15:28.347

我会在存在唯一 ID 的某个级别在编辑器包装器上放置一个类，然后是：

```
var myEditor = $(this).closest('.my-class').attr('id'); 
```

# javascript - 如何使用字符串索引创建二维对象并遍历结果

> ID：14506645
> 
> 赞同：1
> 
> 时间：2013-01-24T16:57:51.487
> 
> 标签：javascript

我有语法问题。我一直在浏览数百篇关于多维对象和数组的帖子，但找不到我要找的东西。我基本上需要用一堆预设填充数据库，并且正在寻找一种将它们设置在数组（或 2d 对象）中的方法，这样我就可以遍历它们并将它们插入数据库。

数据是对象及其附件的简单列表。IE：

```
Door ->   Handle
          Letterbox
          Cat Flap
          Hinges
          Lock
Window -> Sill
          Frame
          Lock
          Handle 
```

等等

然后我想要一个这样的函数（其中“items”是保存所有数据的对象）循环遍历结果并插入项目和附件：

```
for (var i = 0; i < items.length; i++) {
    var item = items[i];
    insertItem(item,'','Object');

    for (var b = 0; b < item.length; b++) {
        var accessory = item[b];
        insertItem(item,accessory,'Accessory');
    }
} 
```

我的问题是，我如何将我的数据放入一个对象中，我的循环函数是否可以循环遍历数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T17:08:28.507

也许您可以使用对象文字？

```
var house = new Object();
    house = {
        "door" : {
            "handle" : true,
            "letterbox" : true,
            "catFlap" : true,
            "hinges" : true,
            "lock" : true
        },
        "window" : {
            "sill" : true,
            "frame" : true,
            "lock" : true,
            "handle" : true
        }
    }; 
```

然后你可以通过`for...in`循环访问它

```
for(var item in house){
    for(var accessory in house[item]){
        if(house[item][accessory]){ //announce what was found
            alert(accessory); 
        }
        house[item][accessory] = false; //take accessory away
        house[item].newAccessory = true; //Add an accessory
    }
} 
```

# javascript - 将输入框中的值添加到组合框中

> ID：14506648
> 
> 赞同：-1
> 
> 时间：2013-01-24T16:57:52.403
> 
> 标签：javascript

使用 javascript，（没有 jQuery 库）

我想做的是当我在输入框中输入一个值并按下我的输入键（仅在文本框中）时，我希望将输入框的值添加到下拉框中。

请注意，如果已经在下拉框中存在现有值，则应在现有值下方添加下一个值。

我该如何设置？

这是html设置：

```
<!DOCTYPE html>

<html>

<head>

</head>

<body>

<input type="text" id="theinput" style="width: 100px;">

<select id="thebox" style="width: 100px;"></select>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T17:16:32.980

**首先**- 让我们添加一个事件监听器，当用户按下一个键时会触发它

**第二**- 让我们创建一个函数，传递您想要获取用户输入的元素并在文档中设置值

**第三**- 让我们创建 dom 元素并将其添加到您创建的*out 元素中：*

```
<script>
    //your input element
    var in = document.getElementById("theinput");
    //step 2
    function addItem(e) {
      //check if user press Enter
        if (e.keycode == 13) {            
            var out = document.getElementById("thebox");

            //step 3
            var optionElement = document.createElement("option"); //will create al <option> tag
            var text = document.createTextNode(in .value); //the value you inserted
            optionElement.appendChild(optionElement); // add the text to <option>
            out.appendChild(optionElement); // add the option to <select>
        }
    }
//Step 1 - add Eventlistener
  in.addEventListener("keydown", addItem, false);
</script> 
```

观察者：没有测试它。进行必要的调整。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T17:33:27.427

```
<html>
<head>
<script>
function displayResult(event)
{
if(event.keyCode == 13)
{
var x=document.getElementById("thebox");
var option=document.createElement("option");
var txtv=document.getElementById("theinput");
option.text=txtv.value;
try
  {
  // for IE earlier than version 8
  x.add(option,x.options[null]);
  }
catch (e)
  {
  x.add(option,null);
  }
}
}

</script>
</head>
<body>
<form>
<select id="thebox">
</select>
</form>
<br>
<input type="text" id="theinput" onkeyup="displayResult(event)"/>
</body>
</html> 
```

链接在 jsFiddle [http://jsfiddle.net/RYh7U/49/](http://jsfiddle.net/RYh7U/49/)

# arm - 如何使用--cross-compiler--编译wxwidget

> ID：14506653
> 
> 赞同：0
> 
> 时间：2013-01-24T16:58:28.757
> 
> 标签：arm, wxwidgets, cross-compiling

我已经尝试了很多但无法找到使用交叉编译器交叉编译 wxwidget 的解决方案

ignite@ubuntu:~/wxGTK-2.8.12/gtk-build$ sudo ../configure --host=arm-unknown-linux-gnueabi --build= i686-pc-linux --enable-unicode --prefix= /home/ignite/wxGTK_RPI_build^C

有人可以在此链接上提出建议吗：--- [http://forums.wxwidgets.org/viewtopic.php?f=19&t=36772&p=149948#p149948](http://forums.wxwidgets.org/viewtopic.php?f=19&t=36772&p=149948#p149948)

为什么不使用交叉编译器。当我使用在命令行上发出命令时...我什至在配置时更改了主机和构建选项:?:

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-24T17:00:45.710

尝试使用 pacman -S wxgtk 看看是否有效。

# silverlight - 如何在 RadGridView 的 Telerik GridViewCheckBoxColumn 过滤器中显示所有值？

> ID：14506656
> 
> 赞同：0
> 
> 时间：2013-01-24T16:58:40.240
> 
> 标签：silverlight, telerik, radgridview

使用 Silverlight GridViewCheckBoxColumn 时，过滤器仅显示所有当前查看项目的不同值（整个网格是分页的）。因此，如果所有项目的值都设置为“false”，则过滤器将仅显示“false”。如何更改它以显示“false”和“true”？

该列的 XAML 是：

```
<telerik:GridViewCheckBoxColumn 
         x:Name="processingFailureColumn"
         Header="{Binding ApplicationStrings.ProcessingFailure, Source={StaticResource ResourceWrapper}}"
         DataMemberBinding="{Binding IsErroneous}"> 
```

结果如下：

![在此处输入图像描述](../Images/d7b1495b8151600b4cc53030549b1d66.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T10:34:58.297

`DistinctValuesLoading`我通过在 RadGridView 事件中手动提供不同的值解决了这个问题。

```
private void DatagridArchivesOnDistinctValuesLoading(object sender, GridViewDistinctValuesLoadingEventArgs e)
    {
        if (e.Column.UniqueName == "processingFailureColumn")
        {
            e.ItemsSource = new List<bool> {true, false};
        }
    } 
```

# debugging - gDebugger 不工作

> ID：14506657
> 
> 赞同：1
> 
> 时间：2013-01-24T16:58:49.343
> 
> 标签：debugging, opengl

我下载了最新版本的 gDebugger（目前是 5.8.1）。但我不能让它工作。我尝试运行提供的示例，但没有任何反应。我尝试加载茶壶示例，但是当我运行它 (F5) 时，我只看到一个命令行提示符，该提示符立即消失。（我也尝试做出与[http://devgurus.amd.com/thread/158943](http://devgurus.amd.com/thread/158943)第一篇文章中描述的“Timothy Smith”相同的动作，但结果是一样的）

我在 Win7 64 位，GTX 470。

编辑：这是我在日志中得到的错误：

```
[20:10:36] [2495245290] [错误] [4448] [gaAPIToSpyConnector::initialize] [src\gaAPIToSpyConnector.cpp] [217] [断言失败 (rcAPISocket)]
## [20:10:36] [2495245327] [错误] [4448] [gaLaunchDebuggedProcess] [src\gaGRApiFunctions.cpp] [388] [断言失败（rcAPIConnection）]
## [20:10:36] [2495821910] [ERROR] [4448] [osPipeSocket::close] [src\win32\osPipeSocket.cpp] [124] [无法关闭管道（管道类型：osPipeSocketServer）]
## [20:10:36] [2495822046] [ERROR] [4448] [osPipeSocket::close] [src\win32\osPipeSocket.cpp] [137] [无法关闭管道（管道类型：osPipeSocketServer）]
## [20:10:36] [2495822236] [ERROR] [4448] [osPipeSocketServer::open] [src\win32\osPipeSocketServer.cpp] [76] [断言失败 (_incomingPipe != ((HANDLE)(LONG_PTR) -1))]
## [20:10:36] [2495822377] [ERROR] [4448] [osPipeSocketServer::open] [src\win32\osPipeSocketServer.cpp] [97] [断言失败 (_outgoingPipe != ((HANDLE)(LONG_PTR) -1))]
## [20:10:36] [2495822453] [错误] [4448] [gaAPIToSpyConnector::initialize] [src\gaAPIToSpyConnector.cpp] [217] [断言失败 (rcAPISocket)]
## [20:10:36] [2495822520] [错误] [4448] [gaLaunchDebuggedProcess] [src\gaGRApiFunctions.cpp] [388] [断言失败（rcAPIConnection）]

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T20:07:59.227

gDebugger 现在是 AMD 产品，所有新版本都可以在他们的开发者[网站上](http://developer.amd.com/tools/heterogeneous-computing/amd-gdebugger/)找到。当前版本是 6.2。

*编辑：* 该工具现在称为 CodeXL，可[在此处获得](http://developer.amd.com/tools-and-sdks/heterogeneous-computing/codexl/)

# mysql - MySQL ORDER BY (DESC|ASC) 得到相同的结果

> ID：14506658
> 
> 赞同：2
> 
> 时间：2013-01-24T16:58:50.707
> 
> 标签：mysql, sql-order-by

为了更新 HTML 中的锦标赛表，我执行以下查询：

```
SELECT p.pname, 
       team, 
       won, 
       tie, 
       lost, 
       goals, 
       goalsa 
FROM   player p, 
       stats s 
WHERE  p.tid = s.tid 
       AND p.pname = s.pname 
       AND p.tid = 23 
       AND p.groupno = 'A' 
ORDER  BY s.won, 
          s.tie, 
          ( s.goals - s.goalsa ), 
          s.goals, 
          p.pname DESC 
```

桌上玩家的表格在哪里

```
player (PName, TID, DraftNo, groupNo, team) 
```

表格统计了表格

```
stats(won, tie, lost, goals, goalsA, PName, TID) 
```

目前，在统计数据中有以下与查询相关的条目

```
0    0    0    0    0    a    23
0    0    0    0    0    c    23
0    0    0    0    0    e    23
1    0    0    2    1    g    23
0    0    1    1    2    i    23 
```

这意味着玩家 g 以 2-1 战胜了玩家 i。

现在，无论我是否指定or`ORDER BY`选项，我都会得到以下结果：`DESC``ASC`

```
i    Türkei    0    0     1     1     2
(...) 
g    Italien   1    0     0     2     1 
```

这与所需的完全相反。为什么会这样？我的查询有错误吗？显然，我想从得分最多的玩家到得分较少的玩家排序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T17:03:11.990

`ASC`or`DESC`关键字仅适用于它放在旁边的列，因此您正在按目标而不是目标`ORDER BY`进行降序。`p.pname`您需要应用`DESC`to`goals`和所有其他应该排序较高的列 ( `won`)，例如，如果您打算进行聚合，例如`SUM(won)`.

```
ORDER  BY s.won, 
      s.tie, 
      ( s.goals - s.goalsa ), 
      s.goals DESC, 
      p.pname 
```

关于您的连接方法的注释...您正在使用隐式内部连接，方法是在子句中提供逗号分隔的列表并在子句`FROM`中提供条件`WHERE`

```
FROM   player p, 
       stats s 
WHERE  p.tid = s.tid 
```

建议使用显式`INNER JOIN`代替。语法更现代，通常被认为更容易阅读。然而，两者在功能和性能上是等效的。

```
FROM  player p
      INNER JOIN stats s ON p.tid = s.tid 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T17:09:52.087

在排序的每个字段之后都需要 DESC 或 ASC：

```
ORDER BY s.won DESC, s.tie DESC, ... 
```

# android - 在 android 中改变 Spinner 的外观

> ID：14506659
> 
> 赞同：1
> 
> 时间：2013-01-24T16:58:53.743
> 
> 标签：android, android-spinner

安卓 2.3.3

我有两个微调器，一个使用来自 strings.xml（静态）的字符串数组填充，另一个使用适配器填充。

第一个微调器（静态）如下所示

![在此处输入图像描述](../Images/5bd666ba4598a1aa3355a375f2861648.png)

第二个微调器（动态）如下所示

![在此处输入图像描述](../Images/901a768f9ed40efcef320f8219523b9a.png)

我可以将动态微调器的外观和感觉更改为类似于静态微调器吗？如果是，如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T17:06:17.697

这是android开发人员对此的解释：

[http://developer.android.com/guide/topics/ui/controls/spinner.html](http://developer.android.com/guide/topics/ui/controls/spinner.html)

相关的代码行在这里：

`adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);`

显然，另一个内置选项是：

`simple_spinner_item`

否则，您可以设计一个布局以采用上述方法。

# php - 使用复选框从mysql中删除多行

> ID：14506668
> 
> 赞同：0
> 
> 时间：2013-01-24T16:59:31.300
> 
> 标签：php, mysql, sql, checkbox

我有一个查询，它显示一个包含有关消息的信息的表格，我还有一个列，一旦他们勾选了他们想要删除的消息，就可以选择用户想要使用复选框删除的消息，然后，他们单击提交按钮，将他们带到处理页面，在该页面中执行删除每个选定消息的 SQL 语句；但是，该声明似乎不起作用，这是我到目前为止所拥有的：

消息显示页面：

```
if ($_SESSION['user_session'] == "$current_user")
{
    {
     echo "<table border='1'>
     <tr>
     <th>Message ID</th>
     <th>Username</th>
     <th>Subject</th>
     <th>Message</th>
     <th>Delete?</th>
     </tr>";

        while($row = mysql_fetch_array($result))
         {
          echo "<tr>";
          echo "<td>" . $row['message_id'] . "</td>";
          echo "<td>" . $row['username'] . "</td>";
          echo "<td>" . $row['sub'] . "</td>";
          echo "<td>" . $row['message'] . "</td>";
          echo "<td><input type='checkbox' name='check_list[]' value='" .     $row['message_id'] . "' /></td>";
          echo "</tr>";
             }
      echo "</table>";
     }
} 
```

带有 SQL 语句的进程页面：

```
if(!empty($_POST['check_list']))
{
    foreach($_POST['check_list'] as $check)
    {
    //connection to the database
    $dbhandle = mysql_connect("XXX", "XXX", "XXX")
    or die("Unable to connect to MySQL");

    //select a database to work with
    $selected = mysql_select_db("XXX",$dbhandle)
    or die("Could not select examples");

    //execute the SQL query to update the "returned" field to 1 wherever the loan_id is     checked.
    $result = mysql_query("DELETE FROM message WHERE message_id='$check'");
    }

              if ($result)
          {
              echo 'Messages Deleted';
          }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T17:05:24.423

```
if(!empty($_POST['check_list']))
{
    $dbhandle = mysql_connect("XXX", "XXX", "XXX") or die("Unable to connect to MySQL");
    $selected = mysql_select_db("XXX",$dbhandle) or die("Could not select examples");

    $result = mysql_query("DELETE FROM message WHERE message_id IN (" . implode(',', $_POST['check_list']) . ")", $dbhandle);
    if ($result !== false)
        echo 'Messages deleted.';
} 
```

`$_POST['check_list']`您显然应该在执行查询之前对 的内容进行更多测试。我们不希望邪恶的人做傻事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-30T05:00:16.703

据我所知，您的代码没有任何问题，您应该`var_dump($check)`在 SQL 查询之前尝试 a 以输出它包含的内容，并`var_dump($_POST['check_list'])`在第二页的开头尝试 a。

另外，我建议您在进行多个不必要的连接时取出数据库连接`foreach`，如下所示：

```
if(!empty($_POST['check_list'])) {
    // Output the variable $_POST['check_list']
    var_dump($_POST['check_list']);

    //connection to the database
    $dbhandle = mysql_connect("XXX", "XXX", "XXX") or die("Unable to connect to MySQL");

    //select a database to work with
    $selected = mysql_select_db("XXX",$dbhandle) or die("Could not select examples");

    foreach($_POST['check_list'] as $check) {
        // Output the $check variable to see what it contains
        var_dump($check);

        //execute the SQL query to update the "returned" field to 1 wherever the loan_id is     checked.
        $result = mysql_query("DELETE FROM message WHERE message_id='$check'");

        // For each $check, verify what message_id got deleted
        if ($result) {
            echo 'Message ID Deleted: ' . $check;
        }
    }
} 
```

# jquery - 循环遍历 div 元素

> ID：14506671
> 
> 赞同：-1
> 
> 时间：2013-01-24T16:59:34.243
> 
> 标签：jquery, html

我想使用 jQuery 循环浏览页面中的 div 元素并更改其中的 html。但是我不想为 div 使用相同的类，也不能循环浏览页面上的所有 div。在不使用类的情况下循环这些 div 的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T17:08:59.703

如果您不想上课，请提供其他一些属性，您可以通过这些属性识别这些 div ...

**例子：**

```
<div data-attr='abc' ></div>     // let attribute is data-attr

// then identify those divs by that attribute.
$("div ['data-attr' = 'abc']").html("<span>hello</span>"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T17:38:22.700

**选项：1** 至少，命名第一个 div，您可以使用 jquery 使用 .next() 方法循环浏览其余部分。

**选项：2** 命名父级并在其子级“div”上使用 .each() 方法来循环遍历所有相应的“div”。

但是你至少应该命名一些东西，任何兄弟姐妹或父母或祖父母或可能与此相关的一些元素。

# java - Android 服务、JavaMail API

> ID：14506672
> 
> 赞同：1
> 
> 时间：2013-01-24T16:59:34.887
> 
> 标签：java, android, email, logcat

我有一段代码工作。但是当我尝试运行时，错误异常显示。我使用广播接收器在每次重新启动时启动服务，服务监视器 sim 更改并生成电子邮件给用户。但是我在编译时遇到问题，LogCat 显示如下：

**日志猫**

```
01-24 17:00:14.035: E/SimSerial::(8538): 8944110065486249080
01-24 17:00:14.035: E/Current Sim Serial::(8538): 8944110065486249080
01-24 17:00:14.035: E/Sim Status(8538): Sim no changed !!!
01-24 17:00:14.090: D/dalvikvm(8538): GC_CONCURRENT freed 233K, 9% free 12373K/13575K, paused 2ms+2ms, total 17ms
01-24 17:00:14.090: D/dalvikvm(8538): WAIT_FOR_CONCURRENT_GC blocked 11ms
01-24 17:00:14.120: E/MailApp(8538): Could not send email
01-24 17:00:14.120: E/MailApp(8538): android.os.NetworkOnMainThreadException
01-24 17:00:14.120: E/MailApp(8538):    at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1118)
01-24 17:00:14.120: E/MailApp(8538):    at java.net.InetAddress.lookupHostByName(InetAddress.java:385)
01-24 17:00:14.120: E/MailApp(8538):    at java.net.InetAddress.getLocalHost(InetAddress.java:365)
01-24 17:00:14.120: E/MailApp(8538):    at javax.mail.internet.InternetAddress.getLocalAddress(InternetAddress.java:517)
01-24 17:00:14.120: E/MailApp(8538):    at javax.mail.internet.UniqueValue.getUniqueMessageIDValue(UniqueValue.java:99)
01-24 17:00:14.120: E/MailApp(8538):    at javax.mail.internet.MimeMessage.updateMessageID(MimeMessage.java:2054)
01-24 17:00:14.120: E/MailApp(8538):    at javax.mail.internet.MimeMessage.updateHeaders(MimeMessage.java:2076)
01-24 17:00:14.120: E/MailApp(8538):    at javax.mail.internet.MimeMessage.saveChanges(MimeMessage.java:2042)
01-24 17:00:14.120: E/MailApp(8538):    at javax.mail.Transport.send(Transport.java:117)
01-24 17:00:14.120: E/MailApp(8538):    at com.example.newbootservice.GMailSender.send(GMailSender.java:119)
01-24 17:00:14.120: E/MailApp(8538):    at com.example.newbootservice.MyService.onStartCommand(MyService.java:52)
01-24 17:00:14.120: E/MailApp(8538):    at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:2531)
01-24 17:00:14.120: E/MailApp(8538):    at android.app.ActivityThread.access$1900(ActivityThread.java:140)
01-24 17:00:14.120: E/MailApp(8538):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1324)
01-24 17:00:14.120: E/MailApp(8538):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-24 17:00:14.120: E/MailApp(8538):    at android.os.Looper.loop(Looper.java:137)
01-24 17:00:14.120: E/MailApp(8538):    at android.app.ActivityThread.main(ActivityThread.java:4898)
01-24 17:00:14.120: E/MailApp(8538):    at java.lang.reflect.Method.invokeNative(Native Method)
01-24 17:00:14.120: E/MailApp(8538):    at java.lang.reflect.Method.invoke(Method.java:511)
01-24 17:00:14.120: E/MailApp(8538):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
01-24 17:00:14.120: E/MailApp(8538):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
01-24 17:00:14.120: E/MailApp(8538):    at dalvik.system.NativeStart.main(Native Method) 
```

我的代码如下：

**我的服务.java**

```
public class MyService extends Service {  

    String storedSimSerial;
    String currentSimSerial;

    @Override  
    public void onCreate() {  
        super.onCreate();    
    }  

    @Override  
    public int onStartCommand(Intent intent, int flags, int startId) {  

        Toast.makeText(this, "Service Started", Toast.LENGTH_LONG).show();

        {
        TelephonyManager telephoneMgr = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);
        storedSimSerial = telephoneMgr.getSimSerialNumber();
        Log.e("SimSerial::",storedSimSerial);

        TelephonyManager tmMgr = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);
        currentSimSerial = tmMgr.getSimSerialNumber();
        Log.e("Current Sim Serial::",currentSimSerial);

        if(currentSimSerial.equals(storedSimSerial))
        {
            Log.e("Sim Status","Sim no changed !!!");
        }             
        else
            Log.e("Sim Status","Sim changed !!!");

            GMailSender m = new GMailSender("gmailusername@gmail.com", "gmailpassword"); 

            String[] toArr = {"blabla@gmail.com", "blabla@hotmail.com"}; 
            m.setTo(toArr); 
            m.setFrom("wooo@wooo.com"); 
            m.setSubject("This is an email sent using my Mail JavaMail wrapper from an Android device."); 
            m.setBody("Email body."); 

            try {

              if(m.send()) { 
                Toast.makeText(this, "Email was sent successfully.", Toast.LENGTH_LONG).show(); 
              } else { 
                Toast.makeText(this, "Email was not sent.", Toast.LENGTH_LONG).show(); 
              } 
            } catch(Exception e) { 
              //Toast.makeText(MailApp.this, "There was a problem sending the email.", Toast.LENGTH_LONG).show(); 
              Log.e("MailApp", "Could not send email", e);

        }
        } 
```

**GMailSender.java**

```
public class GMailSender extends javax.mail.Authenticator { 
  private String _user; 
  private String _pass; 

  private String[] _to; 
  private String _from; 

  private String _port; 
  private String _sport; 

  private String _host; 

  private String _subject; 
  private String _body; 

  private boolean _auth; 

  private boolean _debuggable; 

  private Multipart _multipart; 

  public GMailSender() { 
    _host = "smtp.gmail.com"; // default smtp server 
    _port = "465"; // default smtp port 
    _sport = "465"; // default socketfactory port 

    _user = ""; // username 
    _pass = ""; // password 
    _from = ""; // email sent from 
    _subject = ""; // email subject 
    _body = ""; // email body 

    _debuggable = false; // debug mode on or off - default off 
    _auth = true; // smtp authentication - default on 

    _multipart = new MimeMultipart(); 

    // There is something wrong with MailCap, javamail can not find a handler for the multipart/mixed part, so this bit needs to be added. 
    MailcapCommandMap mc = (MailcapCommandMap) CommandMap.getDefaultCommandMap(); 
    mc.addMailcap("text/html;; x-java-content-handler=com.sun.mail.handlers.text_html"); 
    mc.addMailcap("text/xml;; x-java-content-handler=com.sun.mail.handlers.text_xml"); 
    mc.addMailcap("text/plain;; x-java-content-handler=com.sun.mail.handlers.text_plain"); 
    mc.addMailcap("multipart/*;; x-java-content-handler=com.sun.mail.handlers.multipart_mixed"); 
    mc.addMailcap("message/rfc822;; x-java-content-handler=com.sun.mail.handlers.message_rfc822"); 
    CommandMap.setDefaultCommandMap(mc); 
  } 

  public GMailSender(String user, String pass) { 
    this(); 

    _user = user; 
    _pass = pass; 
  } 

  public boolean send() throws Exception { 
    Properties props = _setProperties(); 

    if(!_user.equals("") && !_pass.equals("") && _to.length > 0 && !_from.equals("") && !_subject.equals("") && !_body.equals("")) { 
      Session session = Session.getInstance(props, this); 

      MimeMessage msg = new MimeMessage(session); 

      msg.setFrom(new InternetAddress(_from)); 

      InternetAddress[] addressTo = new InternetAddress[_to.length]; 
      for (int i = 0; i < _to.length; i++) { 
        addressTo[i] = new InternetAddress(_to[i]); 
      } 
        msg.setRecipients(MimeMessage.RecipientType.TO, addressTo); 

      msg.setSubject(_subject); 
      msg.setSentDate(new Date()); 

      // setup message body 
      BodyPart messageBodyPart = new MimeBodyPart(); 
      messageBodyPart.setText(_body); 
      _multipart.addBodyPart(messageBodyPart); 

      // Put parts in message 
      msg.setContent(_multipart); 

      // send email 
      Transport.send(msg); 

      return true; 
    } else { 
      return false; 
    } 
  } 

  public void addAttachment(String filename) throws Exception { 
    BodyPart messageBodyPart = new MimeBodyPart(); 
    DataSource source = new FileDataSource(filename); 
    messageBodyPart.setDataHandler(new DataHandler(source)); 
    messageBodyPart.setFileName(filename); 

    _multipart.addBodyPart(messageBodyPart); 
  } 

  @Override 
  public PasswordAuthentication getPasswordAuthentication() { 
    return new PasswordAuthentication(_user, _pass); 
  } 

  private Properties _setProperties() { 
    Properties props = new Properties(); 

    props.put("mail.smtp.host", _host); 

    if(_debuggable) { 
      props.put("mail.debug", "true"); 
    } 

    if(_auth) { 
      props.put("mail.smtp.auth", "true"); 
    } 

    props.put("mail.smtp.port", _port); 
    props.put("mail.smtp.socketFactory.port", _sport); 
    props.put("mail.smtp.socketFactory.class", "javax.net.ssl.SSLSocketFactory"); 
    props.put("mail.smtp.socketFactory.fallback", "false"); 

    return props; 
  } 

  // the getters and setters 
  public String getBody() { 
    return _body; 
  } 
  public void setBody(String _body) { 
    this._body = _body; 
  }

  public String[] getTo(){
      return _to;
  }
  public void setTo(String[] toArr) {
      this._to = toArr;
  }

  public String getFrom(){
      return _from;
  }
  public void setFrom(String _from){
      this._from = _from;
  }

  public String getSubject(){
      return _subject;
  }
  public void setSubject(String string) {
      this._subject = string;
  }

} 
```

**JSSEProvider.java**

```
public final class JSSEProvider extends Provider {

    /**
     * 
     */
    private static final long serialVersionUID = 1L;

    public JSSEProvider() {
        super("HarmonyJSSE", 1.0, "Harmony JSSE Provider");
        AccessController.doPrivileged(new java.security.PrivilegedAction<Void>() {
            public Void run() {
                put("SSLContext.TLS",
                        "org.apache.harmony.xnet.provider.jsse.SSLContextImpl");
                put("Alg.Alias.SSLContext.TLSv1", "TLS");
                put("KeyManagerFactory.X509",
                        "org.apache.harmony.xnet.provider.jsse.KeyManagerFactoryImpl");
                put("TrustManagerFactory.X509",
                        "org.apache.harmony.xnet.provider.jsse.TrustManagerFactoryImpl");
                return null;
            }
        });
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T17:12:37.740

克里是对的。自 Android 3.0 起，您无法在默认线程上执行网络 I/O

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T17:16:29.197

将网络调用 ( `m.send()`)`AsyncTask`移到一个单独的线程中运行“耗时”操作。

```
new AsyncTask<Void, Void, Void>() {

        @Override
        protected void onPreExecute()
        {
            Log.d(TAG, "onPreExecute()");
        }

        @Override
        protected Void doInBackground(Void... params)
        {
            Log.d(TAG, "doInBackground() -- Here is the download");
            m.send();
            return null;
        }

        @Override
        protected void onPostExecute(Void res)
        {
            Log.d(TAG, "onPostExecute()");
        }
    }.execute(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T17:51:53.777

在 onStartCommand 之外创建一个 AsyncTask

公共类 GmailAsync 扩展 AsyncTask{

```
 @Override
    protected Void doInBackground(String... params) {
        // TODO Auto-generated method stub
        GMailSender m = new GMailSender("gmailusername@gmail.com", "gmailpassword"); 

        String[] toArr = {"blabla@gmail.com", "blabla@hotmail.com"}; 
        m.setTo(toArr); 
        m.setFrom("wooo@wooo.com"); 
        m.setSubject("This is an email sent using my Mail JavaMail wrapper from an Android device."); 
        m.setBody("Email body."); 

        try {

          if(m.send()) { 
              Log.e("Email","Sent successfully !");
            //Toast.makeText(this, "Email was sent successfully.", Toast.LENGTH_LONG).show(); 
          } else { 
            //Toast.makeText(this, "Email was not sent.", Toast.LENGTH_LONG).show(); 
              Log.e("Email","Was not Sent !");  
          } 
        } catch(Exception e) { 
          //Toast.makeText(MailApp.this, "There was a problem sending the email.", Toast.LENGTH_LONG).show(); 
          Log.e("MailApp", "Could not send email", e);
        }
        return null;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T17:06:22.813

您在主线程异常上有一个网络。刚下过某个版本的android后，在主线程上使用网络命令是不允许的。当我在笔记本电脑前时，我会用更多信息更新我的答案。

# android - 从相机胶卷拍摄的图像需要很长时间才能在 ImageView android sdk 中显示

> ID：14506673
> 
> 赞同：0
> 
> 时间：2013-01-24T16:59:35.953
> 
> 标签：android

从相机胶卷拍摄的图像需要很长时间才能在 ImageView android sdk 中显示

我正在用相机拍照，一旦回到我的活动中，需要很长时间才能显示出来，任何人都知道我该如何减少这个时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T12:17:25.243

这是因为在获取过程和显示过程之间，对相机传感器的不同帧进行了预处理和后处理。然后，你看到的照片，是在过去的时间里拍的。

# .net - PKI 受保护的 Web 服务。获取 HTTP 413：请求实体太大

> ID：14506676
> 
> 赞同：2
> 
> 时间：2013-01-24T16:59:57.117
> 
> 标签：.net, web-services, pki, encryption-asymmetric, client-certificates

我一直在尝试实现一种安全的方式来验证通过安全证书调用基于 .Net SOAP 的 Web 服务的 Web 服务器。

我在接收服务器上设置了一个证书颁发机构，允许我颁发我们在接收服务器和调用服务器上安装的证书。我还将此证书颁发机构添加为调用服务器的证书根存储中的受信任颁发机构。

我现在遇到的问题是，当我将 IIS 设置为“要求”证书时，我只能发送一个小数据集，一次 25 行，每行大约 25 个字段，每个字段可能有 100 个字符长。我发送的数据已经用对称密钥加密。当我取消对客户端证书的要求时，我可以发送的数据量变为大约 25000 行。当使用“必需”的客户端证书执行此操作时，我得到

> HTTP 413：请求实体太大

我最好的猜测是，该要求以双向方式开启非对称加密，从而使数据量呈指数增长。我试过修改web.config，特别是

```
<httpRuntime targetFramework="4.5"  maxRequestLength="20000000" executionTimeout="3600" /> 
```

但这似乎没有效果，即使在数据集中发送 50 行也是如此。

我也想补充

```
maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647" maxBufferSize="100000" 
```

但我不确定它的去向。

我使用发送客户端证书

```
Dim S as new webmethodname.webmethod
Dim x509 As X509Certificate = X509Certificate.CreateFromCertFile("filelocation")
            s.ClientCertificates.Add(x509) 
```

我能想到的两个解决方案是

1.  进一步提高数据限制或找到阻止我的字段限制
2.  一次发送较小的批次。
3.  为此目的放弃使用客户端证书并寻求其他解决方案。

任何有关执行此操作的正确方法的建议，或有关使用 SSL 和 PKI 从服务器到服务器的幕后究竟发生了什么的信息，我们将不胜感激。

# jquery - Jquery附加到特定的div

> ID：14506681
> 
> 赞同：0
> 
> 时间：2013-01-24T17:00:09.470
> 
> 标签：jquery, html

我正在尝试传入一个 ID 并将一个元素附加到一个特定的 div 中，当前的方式无法正常工作。如果我要使用它，`.closest('slide_holder')`它会正确地将 附加`ul class='gallery'`到星期二 div 的底部。

我希望新的 div 位于 slide_holder 内。

```
$( "<ul class='gallery ui-helper-reset'/>" 
 ).appendTo($('#'+$droppableId).closest('.slide_holder')); 
```

* * *

## HTML 结构

```
<div id='Tuesday'>
    <div class='slide_holder'></div>
</div>  
  <div id='Wednesday'>
<div class='slide_holder'> </div>
</div> 
```

**droppableId 定义周一、周二等一周中的哪一天..**

```
var $droppableId = $(this).attr("id"); 
```

## 函数调用

```
deleteImage($droppableId, ui.draggable);
$item = $item.clone()

$item.fadeIn(function () {

   var $list = $("ul", $droppableId).length 
       ? $("ul", $droppableId) 
       : $("<ul class='gallery ui-helper-reset'/>").appendTo($('#' + $droppableId));
   .... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T17:20:38.867

**更新：** 好的，我知道您现在的目标是什么。您想将列表附加到**当天 div 的** `.slide_holder`孩子

做这个

```
var droppable = $(this);
$('.slide_holder',droppable).append('<ul class="gallery ui-helper-reset"/>'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T17:09:53.553

尝试：

```
$("<ul class='gallery ui-helper-reset'/>").appendTo(".slide_holder"); 
```

小提琴：http: [//jsfiddle.net/darshanags/wsTYL/](http://jsfiddle.net/darshanags/wsTYL/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T17:43:26.300

这行得通吗？

```
$("<ul class='gallery ui-helper-reset'/>").appendTo($('#' + $droppableId + ' .slide-holder')); 
```

如果我理解正确，您希望将新元素添加到 .slide-holder 但仅在 $droppableId div 中。

**编辑：**听起来变量 $droppableId 可能存在范围问题。我会检查以确保淡出回调可以访问新值，我假设它是在点击处理程序中设置的。

# jquery - 使用复选框重新加载页面后保持 div 切换状态

> ID：14506692
> 
> 赞同：1
> 
> 时间：2013-01-24T17:01:03.680
> 
> 标签：jquery

我一直试图解决这个问题，但不能完全结合我所拥有的。该页面是动态的，信息将从 db 加载。我有一个带有 call(class=registerbut) 的复选框，它在选中时直接在其下方切换（显示）一个 div（hidey）。它工作正常，但在页面重新加载后，无论检查状态如何，都会显示所有 div（隐藏）。我只希望被选中的那些保持显示而不是全部显示。

```
<div style="width:150px; float:left; padding:0px 0 0px 10px;">
<b>Approve</b><br />
<b>Day 1</b><input type="checkbox" name="" value=""/>
<b>Day 2</b><input type="checkbox" name="" value=""/><br />
<b>Day 3</b><input type="checkbox" name="" value=""/>
<b>Day 4</b><input type="checkbox" name="" value=""/><br />
<b>Day 5</b><input type="checkbox" name="" value=""/>
<b>Day 6</b><input type="checkbox" name="" value=""/><br />
<b>Day 7</b><input type="checkbox" name="" value=""/>
<b>Day 8</b><input type="checkbox" name="" value=""/><br />
<b>Approve All Dates</b><input type="checkbox" name="" value=""/><br />

<br />
</div>
<input type="checkbox" class="registerbut" name="toggle" style="margin-top:8px;">Approve

<div class="hidey" style="width:500px; float:left;margin-bottom:10px; padding:0px 0 0px 10px;height:20px; display:none;">
<b>This is where we can put the information for e-signature part of the deal</b><br />
</div> 
```

这确保下一个/下一个 div(hidey) 是唯一显示的 div。

```
$('.registerbut').change(function(){
    $(this).next('.hidey').toggle();}) 
```

以下内容使 div(hidey) 仍然显示在页面重新加载时 - 但它随后显示所有“隐藏” div，无论检查状态如何。

```
$(document).ready(function() {
$('.hidey').toggle($(".registerbut").is(":checked"));});

$(".registerbut").click(function() {
$('.hidey').toggle('fast');}); 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T04:35:59.577

[http://jsfiddle.net/ExplosionPIlls/xEfRK/](http://jsfiddle.net/ExplosionPIlls/xEfRK/)

更新`.change`方法以根据检查状态显式使用显示/隐藏，而不是使用`.toggle`：

```
if ($(this).is(":checked")) 
```

然后，`$(".registerbut").trigger('change');`页面加载将按照您的需要工作。

# jquery-selectors - jQuery在td中选择多个不同类型的元素

> ID：14506693
> 
> 赞同：0
> 
> 时间：2013-01-24T17:01:04.867
> 
> 标签：jquery-selectors

鉴于此表结构：

```
<table id="tblBranchDetails">
    <tr>
        <td width="120px">Branch:</td>
        <td id="branchName" class="branchData">
            <label id="lblBranchName"></label>
            <input type="text" id="txtBranchName" class="hideOnLoad editBranchInfo" />
        </td>
    </tr>
    <tr>
        <td>Address Line 1:</td>
        <td id="branchAddress1" class="branchData">
            <label id="lblAddress1"></label>
            <input type="text" id="txtAddress1" class="hideOnLoad editBranchInfo" />
        </td>
    </tr>... 
```

我正在尝试在每个 td 中选择标签和输入，以便我可以清除标签的文本并隐藏输入。

这给了我标签中的文本（在控制台中验证）：

```
$('table#tblBranchDetails tr td:nth-child(2):eq(0)').text(); 
```

所以我知道我可以用“.text('')”清除标签的文本

弄清楚这一点后，我认为这会给我输入的价值：

```
$('table#tblBranchDetails tr td:nth-child(2):eq(1)').val() 
```

但它给了我下一个 td 中标签的值。所以很明显我用错了 :nth-child() 和 :eq() 函数。

做我想做的事情的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T23:06:08.727

我正在核对这个。

这是解决方案：

```
$('#btnShowBranchEditBoxes').click(function() {
    $('#tblBranchDetails tr').find('label').fadeOut(200);
    $('#tblBranchDetails tr').find('.editBranchInfo').delay(200).fadeIn(200);

    // Replace the buttons
    $('table#tblBranchDetails input#btnShowBranchEditBoxes').fadeOut(200);
    $('table#tblBranchDetails input.btnEditBranch').delay(200).fadeIn(200);
}); 
```

# forms - Wicket - 具有 java 继承的可重用面板

> ID：14506698
> 
> 赞同：7
> 
> 时间：2013-01-24T17:01:10.890
> 
> 标签：forms, inheritance, wicket, panel, reusability

1.  我有以下java类：

    ![在此处输入图像描述](../Images/8a1447f020fe6473e84a6fc07edf2ae1.png)

2.  我有两个表单组件，它们使用 CompoundPropertyModel 映射到 Type1Task 和 Type2Task：

![在此处输入图像描述](../Images/874a4402dab5468e061e82f756f3cb72.png)

**问题：重复代码。我希望 D 和 E 字段映射到任务，而不是任务类型。当我有 java 继承时，有什么方法可以使这个可重用？**

如果是的话，你能给我提供教程或参考吗？

附加信息：该任务可以包含一个计时器（线程）。如果您单击提交按钮，计时器将启动。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T23:58:04.660

您可以在 ui 中复制相同的类层次结构。

```
public class TaskFormPanel<T extends Task> extends Panel {

public TaskFormPanel(String id, IModel<T> model)
     super(id, new CompoundPropertyModel(model));
     add(new TextField("d"));
     add(new TextField("e));
     add(new Button("submit) {
           (...)
     }
}

}

public class Task1FormPanel extends TaskFormPanel<Task1> {

public TaskFormPanel(String id, IModel<Task1> model)
     super(id, model);
     add(new TextField("a"));
     add(new TextField("b));
     add(new TextField("c"));
}

}

public class Task2FormPanel extends TaskFormPanel<Task2> {

public TaskFormPanel(String id, IModel<Task1> model)
     super(id, model);
     add(new TextField("x"));
     add(new TextField("y));
     add(new TextField("z"));
}

} 
```

和 HTML 文件：

任务表单面板：

```
<wicket:panel> 
   <wicket:child/>
   <label>d</label> <input wicket:id="d">
   <label>e</label> <input wicket:id="e">
   <input type="submit" wicket:id="submit"/>
</wicket:panel> 
```

Task1Panel.html：

```
<wicket:extend>
   <label>a</label> <input wicket:id="a">
   <label>b</label> <input wicket:id="b">
   <label>c</label> <input wicket:id="c">
</wicket:extend> 
```

Task2Panel.html：

```
<wicket:extend>
   <label>x</label> <input wicket:id="x">
   <label>y</label> <input wicket:id="y">
   <label>z</label> <input wicket:id="z">
</wicket:extend> 
```

注意：如果任务对象包含对线程的引用，请确保使用一些可加载的可拆卸模型来包装任务对象，否则您将遇到序列化问题。一个存储您的任务并可以通过一些随机键返回它们的单例注册表就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T22:21:48.937

```
public class TaskPanel extends FormComponentPanel{

      private IModel<Task> taskModel;

      public TaskPanel(String id, IModel<Task> model){
      taskModel = model;
      add(new TextField("DTextField", new PropertyModel(taskModel, "D")));
      add(new TextField("ETextField", new PropertyModel(taskModel, "E")));
      }
} 
```

这是您想要的，还是我没有正确理解？

# c# - ASP.Net MVC：导出 ApiController 操作的结果

> ID：14506702
> 
> 赞同：1
> 
> 时间：2013-01-24T17:01:23.933
> 
> 标签：c#, asp.net, json, asp.net-mvc-4

在我的应用程序中，我有几个网格，每个网格都从一个`ApiController`动作中获取它们的数据源。我想为用户添加一个选项，将这些网格导出为 CSV、PDF、Excel 等。编写代码以将数据源转换为预期格式不是问题。问题是我想编写可重用的代码。目前我对每个网格都有一个单独的操作。

我可以很容易地添加一个新的导出控制器，其中包含调用相同逻辑的匹配操作`ApiController`，但这意味着如果我有五个`ApiController`操作，我将需要五个额外`Controller`的操作。

我想知道是否有一种方法可以进行单个导出`Controller`操作，但以某种方式将详细信息传递`ApiController`给它。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-04T19:27:42.940

这是我发现的：

而不是作为内容返回`StreamContent`，我可以使它与`ByteArrayContent`.

```
[HttpGet]
public HttpResponseMessage Generate()
{
    var stream = new MemoryStream();
    // processing the stream.

    var result = new HttpResponseMessage(HttpStatusCode.OK)
    {
        Content = new ByteArrayContent(stream.GetBuffer())
    };
    result.Content.Headers.ContentDisposition =
        new System.Net.Http.Headers.ContentDispositionHeaderValue("attachment")
    {
        FileName = "CertificationCard.pdf"
    };
    result.Content.Headers.ContentType =
        new MediaTypeHeaderValue("application/octet-stream");

    return result;
} 
```

# java - 如何生成没有main方法的jar文件？

> ID：14506704
> 
> 赞同：0
> 
> 时间：2013-01-24T17:01:27.363
> 
> 标签：java

我正在使用 Eclipse 编写我的程序。我有 9 个类，我正在使用小程序，我的代码中没有 main 方法。

有人告诉我，我需要提交一个“包括源代码的可运行 Jar 存档”。不知何故，当我尝试使用 Eclipse 导出“可运行 Jar 文件”导出我的程序时，我找不到我的程序的启动配置。它在 Eclipse 中运行良好，但我无法导出可运行的 Jar 文件。

有人可以告诉我是什么问题吗？

肯尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T22:25:23.407

据我所知，可执行的 JAR 需要一个 main 方法。在清单 Main-Class 标记中，只能在主类所在的位置声明一个类（无方法）。也许以下代码对您来说是一个可能的解决方案：

```
package CaesarCodePackage;

public class StartClass {

 public static void main(String [] args)
  {
     // create an object of type appletclass 
     AppletClass theApplet = new AppletClass();
     theApplet.init();   // invoke the applet's init() method
     theApplet.start();  // starts the applet

     // If the applet views something (this is optional)
     // Create a window (JFrame) and make applet the content pane.
      javax.swing.JFrame window = new javax.swing.JFrame("Caesar's Cipher");
      window.setContentPane(theApplet);
      window.setDefaultCloseOperation(javax.swing.JFrame.EXIT_ON_CLOSE);
      window.pack();              // Arrange the components.
      window.setVisible(true);    // Make the window visible.
    }
} 
```

如果您不需要 Frame 来显示小程序，只需启动它。

（感谢 Haider M. al-Khateeb 提供代码）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T17:08:09.027

“启动配置”只是具有主要方法的类的花哨语言 - 根据您选择的内容，向导将使用以下属性填充您的可运行 jar 清单：

```
Main-Class: example.MainClass 
```

当然，如果没有这个条目，你实际上不可能有一个可执行的 jar。因此，要回答您的问题，您必须创建一个包含 main 方法的类。main 方法中的逻辑应该以独立模式启动您的 GUI。然后再次运行您的“Export Runnable JAR”向导并选择您创建的类作为启动配置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T17:08:54.850

我猜你在启动 jar 时遇到了一些问题

您可以通过单击“运行配置”来构建您的自定义启动器，将您的 jar 放在类路径中

![新构型](../Images/8afdce0d67b5f954499ff794ec0ce9ce.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T17:08:49.340

您是否尝试将项目导出为 JAR（不可运行的 JAR）。

我认为 ti 会让你指定你自己的 MANIFEST 文件。有了这个，您只需要确保 MANIFEST.mf 文件包含程序的 MAIN-Class。（你需要一个主类来运行 JAR）

[http://docs.oracle.com/javase/tutorial/deployment/jar/manifestindex.html](http://docs.oracle.com/javase/tutorial/deployment/jar/manifestindex.html)

[http://docs.oracle.com/javase/tutorial/deployment/jar/appman.html](http://docs.oracle.com/javase/tutorial/deployment/jar/appman.html)

例如

```
Main-Class: MyPackage.MyClass 
```

# javascript - 在表格单元格jquery中选择div

> ID：14506705
> 
> 赞同：0
> 
> 时间：2013-01-24T17:01:32.083
> 
> 标签：javascript, jquery, html, css

我需要在最顶层的 div“srch-sb-results”的上下文中选择具有“srch-maintop”类的深埋 div。如何使用 jquery 选择 srch-maintop div？

我离这里很近吗？

```
$('.srch-sb-results').next('table').find('td#MainLeftCell div.srch-maintop').delete(); 
```

那也没碰过。。

```
<div class="srch-sb-results"> stuff here </div>
    <table>
       <tr>
          <td colspan='3'>
             <div style="border:1px solid silver"></div>
           </td>
         </tr>
         <tr>
             <td class="srch-leftcell">stuff</td>

            <td class="srch-mainleftcell">
               <div>stuff</div>
               <div class="srch-maintop"></div>
               <div class="srch-maintop2"></div>
            </td>

            <td class="srch-rightcell">stuff</td>
         </tr>

    <table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T17:05:48.773

是的，你很接近；）

`$('.srch-sb-results').next('table').find('td.srch-mainleftcell div.srch-maintop').delete();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T17:04:44.017

我认为问题在于您写`#MainLeftCell`为**ID**，但您必须将其写为**class** `.MainLeftCell`。是的......你可以`.remove()`改用`.delete()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T17:11:36.093

如果给定类没有其他元素，您可以单独使用它：

```
$('.srch-maintop').remove(); 
```

或者在具有类 'srch-sb-results' 的 div 旁边的表中找到更具体的：

```
$('.srch-sb-results').next('table').find('.srch-maintop').remove(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T17:02:49.147

使用[**remove()**](http://api.jquery.com/remove/)代替：

```
$('.srch-sb-results').next('table').find('td#MainLeftCell div.srch-maintop').remove(); 
```

并且没有`class`或`id`命名`MainLeftCell`。

# javascript - Angularjs 使用带有过滤器的 ng-options 而不从过滤器中删除选项

> ID：14506707
> 
> 赞同：2
> 
> 时间：2013-01-24T17:01:40.543
> 
> 标签：javascript, angularjs

我正在尝试使用带有过滤器的 ng-options 并且看到的行为是预期的。但是，预期的行为并不是所需要的。

执行以下操作时最佳做法是什么：

```
<div ng-init="blades = [{item:'1', spec:'2'}]"></div>
<select 
    ng-model="blades"
    ng-options="blade.spec as blade.spec for blade in blades">
    <option>--</option>
</select>
<ul>
    <li ng-repeat="blade in blades">{{blades.item}}</li>
</ul> 
```

在这里，当您过滤时，您将值从选择列表中过滤出来，使其无用。最佳做法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T18:22:45.943

在此过程中，我回答了自己的问题和其他一些问题。这是如何：

```
<div ng-init="items = [{id:'1', spec:'A'}, {id:'2', spec:'B']"></div>
<select 
  ng-model="searchSpec"
  ng-options="item.spec as item.spec for item in items">
  <option>--</option>
</select>
<ul>
  <li ng-repeat="item in items | filter:{spec:searchSpec}">{{item.spec}}</li>
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-03T18:41:37.623

Angular 有一个内置的方法来做到这一点。使 ng-model="search.spec" 并且搜索将始终为 {spec:(selectedValue)}。这很好，因为您可以将多个选择下拉列表绑定到搜索对象的不同键。

```
<div ng-init="items = [{id:'1', spec:'A'}, {id:'2', spec:'B']"></div>
<select 
  ng-model="search.spec"
  ng-options="item.spec as item.spec for item in items">
    <option>--</option>
</select>
<ul>
    <li ng-repeat="item in items | filter:search">{{item.spec}}</li>
</ul> 
```

# visual-studio-2012 - Visual Studio 2012 中的类的语法突出显示失败

> ID：14506714
> 
> 赞同：3
> 
> 时间：2013-01-24T17:02:15.523
> 
> 标签：visual-studio-2012, syntax-highlighting

我最近在笔记本电脑上安装了 Visual Studio，语法高亮显示无法更改类颜色。

我尝试导出和导入完整、完整的设置集，但它仍然看起来像这样。

**编辑**

我尝试了这些带有方案的网站，并决定尝试一个 Humane 方案，这就是安装这些设置后示例代码在我的笔记本电脑中的外观：

![在此处输入图像描述](../Images/60512a4d10ba28d3d19f7d0c272fce5c.png)

但是，这就是它应该看起来的样子：

![在此处输入图像描述](../Images/13852ac9739b79c731788a302227a8ac.png)

请注意类名中没有突出显示。

这可能是什么原因造成的？我开始认为这是另一个地方的另一个设置导致了这种情况。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-24T18:23:35.450

最后，它通过重置用户数据来工作，从 Visual Studio 命令提示符运行它

```
devenv /Resetuserdata 
```

在这里找到提示： [https ://stackoverflow.com/a/11988265/1213246](https://stackoverflow.com/a/11988265/1213246)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-24T17:09:10.950

可以通过菜单更改语法高亮`Tools - Options - Environment - Font & Colors`。这是一种尝试和测试方法，与早期版本的 Visual Studio 相比没有太大改进。

幸运的是，今天有整个网站的主题只需要选择和安装我建议你访问[http://studiostyl.es/](http://studiostyl.es/)在那里你可以找到数千个主题，或者更通用的去[http://www.hanselman .com/blog/VisualStudioProgrammerThemesGallery.aspx](http://www.hanselman.com/blog/VisualStudioProgrammerThemesGallery.aspx)

# php - HTML表格数据

> ID：14506715
> 
> 赞同：-1
> 
> 时间：2013-01-24T17:02:20.030
> 
> 标签：php, jquery, mysql, html-table

我正在开发一个站点，在该站点中，我通过从表单中获取数据来使用 PHP 动态创建一个表。我需要为表格中的每一行保留一个按钮，以便人们可以单击该按钮并出现弹出窗口。所以，我的问题是，我们如何获取动态生成的表格的数据（因为其中一列是mysql DB表中的主键）？

[从 HTML 中的动态表中获取单元格值](https://stackoverflow.com/questions/5753503/get-cell-value-from-a-dynamic-table-in-html)我经历了这个但我找不到令人满意的答案..

document.getElementById 对我没有帮助，因为可能有数千条记录，我无法命名每一行和所有......所以请......帮助......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T17:07:35.220

是的，您可以命名每一行。只需给该行 id row_###### 或只是 ###### ，其中这是该组数据的主键标识符。您的按钮将调用 javascript myPopup('#######')。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T05:34:57.810

```
$('table tr').bind('click', function(e) {

            // Prevents the default action to be triggered. 
            e.preventDefault();
            var camp_id=$(this).find('td').get(0).innerHTML;
            alert(camp_id);               
        }); 
```

这就是答案！终于想通了！无论如何谢谢大家！:)

# coldfusion - ColdFusion 替换列表重新排序返回的字符串

> ID：14506716
> 
> 赞同：5
> 
> 时间：2013-01-24T17:02:22.290
> 
> 标签：coldfusion, coldfusion-10

我正在尝试清理提交的文件名。

我正在使用`replacelist(filename,"',##,&, ",",,and,-")`哪个应该

*   删除`'`和`#`
*   替换`&`为`and`
*   用 . 替换空格`-`。

当给定时`"apost's & pound#.JPG"`，而不是返回：

```
 "aposts-and-pound.jpg" 
```

替换列表返回：

```
 "apostandspound-.JPG" 
```

我正在使用 ColdFusion 10。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-24T17:14:27.137

这不是重新排序 - 这是由于 CF 列表处理的工作方式 - 空元素被忽略/删除。

一些 List~ 字符串处理函数有一个额外的参数来改变这种行为（即将空元素视为空字符串），但 ReplaceList 似乎没有。

您可以通过在替换的单独步骤中执行删除来解决此问题：

```
<cfset NewFilename = rereplace(Filename,"['##]","","all") />
<cfset NewFilename = replacelist(NewFilename,"&, ","and,-") /> 
```

或者

```
replacelist( rereplace(filename,"['##]","","all") , "&, " , "and,-" ) 
```

# python - python win32print不打印

> ID：14506717
> 
> 赞同：3
> 
> 时间：2013-01-24T17:02:24.130
> 
> 标签：python, printing

我需要直接打印一些信息（无需用户确认）并且我正在使用 Python 和`win32print`模块。

我已经阅读了整个[Tim Golden win32print 页面](http://timgolden.me.uk/python/win32_how_do_i/print.html)（甚至阅读了很小的[win32print 文档](http://timgolden.me.uk/pywin32-docs/win32print.html)），并且我正在使用他自己在那里编写的相同示例，但我什么也没打印。

如果我进入交互式 shell 并一次迈出一步，我会在打印机队列中获取文档（在 之后`StartDocPrinter`），然后我得到文档大小（在`StartPagePrinter, WritePrinter, EndPagePrinter`块之后），然后文档从队列中消失（在`EndDocPrinter`) 不打印。

我知道`ShellExecute`Tim Golden 展示的方法。它在这里工作，但它需要创建一个临时文件并打印这个文件名，这是我不想要的两件事。

有任何想法吗？提前致谢。

这是我正在测试的代码（Tim Golden 的复制和粘贴）：

```
import os, sys  
import win32print
import time
printer_name = win32print.GetDefaultPrinter()
if sys.version_info >= (3,):
    raw_data = bytes ("This is a test", "utf-8")
else:
    raw_data = "This is a test"

hPrinter = win32print.OpenPrinter (printer_name)
try:
    hJob = win32print.StartDocPrinter (hPrinter, 1, ("test of raw data", None, "RAW"))
    try:
        win32print.StartPagePrinter (hPrinter)
        win32print.WritePrinter (hPrinter, raw_data)
        win32print.EndPagePrinter (hPrinter)
    finally:
        win32print.EndDocPrinter (hPrinter)
finally:
    win32print.ClosePrinter (hPrinter) 
```

[编辑]

我在我的计算机中安装了一台 pdf 打印机，以使用另一台打印机（CutePDF Writer）进行测试，我可以生成`test of raw data.pdf`文件，但是当我查看内部时，什么也没有。含义：除了`WritePrinter`似乎在做他们应该做的事情之外的所有命令。但是，正如我在评论中所说，`WritePrinter`返回应该写入打印机的正确字节数。我不知道如何解决这个问题，但只是确认我的打印机没有问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T23:15:45.857

我仍在寻找最好的方法来做到这一点，但我找到了一个让我自己满意的答案。在 Tim Golden 的网站（有问题的链接）中，您可以找到以下示例：

```
import win32ui
import win32print
import win32con

INCH = 1440

hDC = win32ui.CreateDC ()
hDC.CreatePrinterDC (win32print.GetDefaultPrinter ())
hDC.StartDoc ("Test doc")
hDC.StartPage ()
hDC.SetMapMode (win32con.MM_TWIPS)
hDC.DrawText ("TEST", (0, INCH * -1, INCH * 8, INCH * -2), win32con.DT_CENTER)
hDC.EndPage ()
hDC.EndDoc () 
```

在阅读了大量文档后，我对其进行了一些调整。我将使用`win32ui`库和[`TextOut`](http://timgolden.me.uk/pywin32-docs/PyCDC__TextOut_meth.html)（设备上下文方法对象）。

```
import win32ui
# X from the left margin, Y from top margin
# both in pixels
X=50; Y=50
multi_line_string = input_string.split()
hDC = win32ui.CreateDC ()
hDC.CreatePrinterDC (your_printer_name)
hDC.StartDoc (the_name_will_appear_on_printer_spool)
hDC.StartPage ()
for line in multi_line_string:
     hDC.TextOut(X,Y,line)
     Y += 100
hDC.EndPage ()
hDC.EndDoc () 
```

在回答我自己的问题之前，我在 meta stackoverflow 中进行了搜索，在[这里](https://meta.stackexchange.com/questions/9933/is-there-a-convention-for-accepting-my-own-answer-to-my-own-question)我发现这是一种受鼓励的行为，因此我正在这样做。我会再等一会儿，看看我是否得到任何其他答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-23T17:04:45.027

```
# U must install pywin32 and import modules:
import win32print, win32ui, win32con  
# X from the left margin, Y from top margin 
# both in pixels
X=50; Y=50
# Separate lines from Your string 
# for example:input_string and create 
# new string for example: multi_line_string 
multi_line_string = input_string.splitlines()  
hDC = win32ui.CreateDC ()
# Set default printer from Windows:
hDC.CreatePrinterDC (win32print.GetDefaultPrinter ())
hDC.StartDoc (the_name_will_appear_on_printer_spool)
hDC.StartPage ()
for line in multi_line_string:
     hDC.TextOut(X,Y,line)
     Y += 100
hDC.EndPage ()
hDC.EndDoc ()
#I like Python 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-24T13:43:15.447

问题是驱动程序版本。如果版本是 4，您需要提供 XPS_PASS 而不是 RAW，这里是一个示例。

```
drivers = win32print.EnumPrinterDrivers(None, None, 2)
hPrinter = win32print.OpenPrinter(printer_name)
printer_info = win32print.GetPrinter(hPrinter, 2)
for driver in drivers:
    if driver["Name"] == printer_info["pDriverName"]:
        printer_driver = driver
raw_type = "XPS_PASS" if printer_driver["Version"] == 4 else "RAW"

try:
  hJob = win32print.StartDocPrinter(hPrinter, 1, ("test of raw data", None, raw_type))
  try:
    win32print.StartPagePrinter(hPrinter)
    win32print.WritePrinter(hPrinter, raw_data)
    win32print.EndPagePrinter(hPrinter)
  finally:
    win32print.EndDocPrinter(hPrinter)
finally:
  win32print.ClosePrinter(hPrinter) 
```

# python - MySQL for Python：不正确的整数值

> ID：14506720
> 
> 赞同：0
> 
> 时间：2013-01-24T17:02:39.407
> 
> 标签：python, mysql, csv

我有同样的问题在这里问：

[在 MySQL 中导入 CSV 数据时空整数字段的默认值](https://stackoverflow.com/questions/5394228/default-value-for-empty-integer-fields-when-importing-csv-data-in-mysql)

将 csv 文件导入 Mysql 时，我不断收到警告“整数值不正确”。我在这里阅读了所有相关的问题/答案，上面的链接是我的直接问题。但我正在尝试实现 Python 2.7 中给出的答案，但我似乎无法让它工作。

我下面的代码是我尝试实现上述帖子的答案。我认为问题是在我的 Load DATA Local Infile 语句中使用“Set”子句的语法......我非常感谢任何帮助，因为 MySQL 会自动将空 INT 转换为“0”，这会扰乱我的分析，因为我想要空白为空。我的代码是：

```
import MySQLdb
db = MySQLdb.connect(blah, blah, blah)
cursor = db.cursor()

sql = """CREATE TABLE PLAYER(
       PLAYER_ID INT,
       DATE DATETIME,
       BATTING_AVERAGE INT
       )"""

cursor.execute(sql)
statement = """LOAD DATA LOCAL INFILE 'path/file.csv'
INTO TABLE PLAYER
COLUMNS TERMINATED BY ','
SET BATTING_AVERAGE = IF(@BATTING_AVERAGE='',NULL,@BATTING_AVERAGE)
IGNORE 1 LINES;""" 
```

此代码给出的错误是：

ProgramingError：（1064，“您的 SQL 语法有错误；请查看与您的 MySQL 服务器版本相对应的手册，以获取在 'IGNORE 1 Lines at line 5 附近使用的正确语法”）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T17:05:05.047

`SET`and`IGNORE`子句是倒退的。尝试交换它们：

```
statement = """LOAD DATA LOCAL INFILE 'path/file.csv'
INTO TABLE PLAYER
COLUMNS TERMINATED BY ','
IGNORE 1 LINES
SET BATTING_AVERAGE = IF(@BATTING_AVERAGE='',NULL,@BATTING_AVERAGE);""" 
```

# java - Spring 命名参数：如何在查询中参数化 Oracle 间隔？

> ID：14506724
> 
> 赞同：9
> 
> 时间：2013-01-24T17:02:48.873
> 
> 标签：java, sql, oracle, spring

我在尝试在我的 Oracle 查询中参数化间隔参数时遇到问题：

```
select current_timestamp - interval :hours hour from dual 
```

如果我用常量替换间隔参数，那么它执行得很好。

在 SQL 中尝试了带引号和不带引号的参数。

请参阅下面使用最小片段的插图：

```
public class Main {
    private static String SQL_CONSTANT_INTERVAL = "select current_timestamp - interval '1' hour from dual";

    private static String SQL_PARAMETERIZED_INTERVAL_QUOTED = "select current_timestamp - interval ':hours' hour from dual";

    private static String SQL_PARAMETERIZED_INTERVAL_UNQUOTED = "select current_timestamp - interval :hours hour from dual";

    public static void main(String[] args) throws Exception {
        Properties properties = new Properties();
        properties.load(Main.class.getClassLoader().getSystemResourceAsStream("db.properties"));
        DataSource dataSource = BasicDataSourceFactory.createDataSource(properties);

        NamedParameterJdbcTemplate npTemplate = new NamedParameterJdbcTemplate(dataSource);

        Map<String, String> params = Collections.singletonMap("hours", "1");

        String[] queries =
                new String[] { SQL_CONSTANT_INTERVAL, SQL_PARAMETERIZED_INTERVAL_QUOTED, SQL_PARAMETERIZED_INTERVAL_UNQUOTED };

        for (String q : queries) {
            System.out.println("Executing " + q);
            try {
                System.out.println("Result = " + npTemplate.queryForObject(q, params, String.class));
            } catch (RuntimeException e) {
                System.out.println("Error: " + e);
            }
            System.out.println();
        }
    }
} 
```

输出：

```
Executing select current_timestamp - interval '1' hour from dual
Result = 2013-01-24 18:55:16.373 Europe/Moscow

Executing select current_timestamp - interval ':hours' hour from dual
24-Jan-2013 20:55:16 org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions
INFO: Loading XML bean definitions from class path resource [org/springframework/jdbc/support/sql-error-codes.xml]
24-Jan-2013 20:55:16 org.springframework.jdbc.support.SQLErrorCodesFactory <init>
INFO: SQLErrorCodes loaded: [DB2, Derby, H2, HSQL, Informix, MS-SQL, MySQL, Oracle, PostgreSQL, Sybase]
Error: org.springframework.dao.DataIntegrityViolationException: PreparedStatementCallback; SQL [select current_timestamp - interval ':hours' hour from dual]; ORA-01867: the interval is invalid
; nested exception is java.sql.SQLDataException: ORA-01867: the interval is invalid

Executing select current_timestamp - interval :hours hour from dual
Error: org.springframework.jdbc.BadSqlGrammarException: PreparedStatementCallback; bad SQL grammar [select current_timestamp - interval ? hour from dual]; nested exception is java.sql.SQLSyntaxErrorException: ORA-00923: FROM keyword not found where expected 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-24T17:18:45.080

是`interval '1' hour`Oracle[文字](http://docs.oracle.com/cd/B19306_01/server.102/b14200/sql_elements003.htm#i38598)。因此，您不能使用绑定参数来替换其中`'1'`的 。

相反，你可以使用这个：

```
NUMTODSINTERVAL( 1, 'HOUR' ) 
```

然后您可以像这样替换 Java SQL 中的整数文字：

```
NUMTODSINTERVAL( ?, 'HOUR' ) 
```

# ios - 在两个 TableView 之间传递数据

> ID：14506728
> 
> 赞同：1
> 
> 时间：2013-01-24T17:03:12.470
> 
> 标签：ios, objective-c, uitableview, tableview

我有一个包含两个**TableView的****ViewController**，如下所示。

 **![在此处输入图像描述](../Images/8e97350977edddc7858a8ac3fd5eb6c1.png)

所以最上面的表（firstTable）目前有两条记录。我想根据顶部的选择用一组不同的数据 (data2) 填充底部表 (secondTable)，事实上，这发生在我的许多 Windows 应用程序中。

最初，我想知道如何让一个视图控制器作为数据源托管两个表？vikingosegundo**解释**了如何在这个[主题](https://stackoverflow.com/questions/3907367/how-to-create-multiple-table-view-in-a-view-controller-for-ipad)中。太好了，我已经处理好了那部分。现在，我从**Manage1ViewController**获得了以下代码。

```
-(void) tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
// From Manage1ViewController.m for firstTable
UITableViewCell * cell = [tableView cellForRowAtIndexPath:indexPath];
if (!cell) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"Cell"];
}

NSString *name0 = cell.textLabel.text;
NSString *tsecs0 = [self findTsecs:name0];

[self openCreateDB2];
NSMutableArray *items2;
items2 = [[NSMutableArray alloc] init];
NSString *sql = [NSString stringWithFormat:@"Select * From data2 WHERE tsec = '%i'", [tsecs0 integerValue]];
sqlite3_stmt *statement;
if (sqlite3_prepare_v2(connection2, [sql UTF8String], -1, &statement, Nil)==SQLITE_OK){
    while (sqlite3_step(statement)==SQLITE_ROW) {
        char *field1 = (char *) sqlite3_column_text(statement, 1);
        NSString *field1Str = [[NSString alloc]initWithUTF8String:field1];
        NSString *str1 = [[NSString alloc]initWithFormat:@"%@", field1Str];
        [items2 addObject:str1];
    }
    sqlite3_finalize(statement);
    sqlite3_close(connection2);
}

/* Start populating secondTable with items2

*/
} 
```

到目前为止，一切都很好......并且应用程序根据用户在**firstTable**上的选择具有需要填充到**secondTable**中的数据（items2） 。但是怎么做？

在这里和那里阅读了几十个主题之后，我了解到有几种方法可以传递数据。好吧，在这种情况下，我不能使用**segue**，因为我在同一个视图控件中传递数据。无论如何，这里的一些人似乎建议我使用**Delegate**和**NSNotification**来做。看起来在我的情况下使用委托是合适的。再说一遍，怎么做？使用我认为我使用过委托的弹出窗口是否也是同样的想法？

我很感激你的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T17:10:19.903

您不想使用委托或通知——它们还用于将信息传递给控制器​​之外的其他对象。您需要实现第一个表的 tableView:didSelectRowAtIndexPath: 方法来获取用户选择。在该方法中，您将获得第二个表所需的数据（基于选择）并在第二个表上调用 reloadData。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T17:11:08.913

`[self.tableView2 reloadData]`在第一个表视图中选择一行后调用。您还必须在此方法之外存储所需的数据以填充第二个 UITableView

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T17:32:58.830

我有管理两个表视图的 ManageViewController。

// ManageViewController.h //

```
#import <UIKit/UIKit.h>
#import "Manage1ViewController.h"
#import "Manage2ViewController.h"

@interface ManageViewController : UIViewController {
Manage1ViewController *firstController;
Manage2ViewController *secondController;
IBOutlet UITableView *firstTable;
IBOutlet UITableView *secondTable;
}
@end 
```

// ManageViewController.m //

```
#import "ManageViewController.h"

@implementation ManageViewController

- (void)viewDidLoad {
[super viewDidLoad];
if (firstController == nil) {
    firstController = [[Manage1ViewController alloc] init];     
}
if (secondController == nil) {
    secondController = [[Manage2ViewController alloc] init];
}
[firstTable setDataSource:firstController];
[secondTable setDataSource:secondController];

[firstTable setDelegate:firstController];
[secondTable setDelegate:secondController];
firstController.view = firstController.tableView;
secondController.view = secondController.tableView;
}

@end 
```**

# javascript - API 数组 [0] Javascript/jQuery

> ID：14506729
> 
> 赞同：0
> 
> 时间：2013-01-24T17:03:15.207
> 
> 标签：javascript, jquery, arrays, api

我正在使用 getJSON 方法从 api 返回数据。api来自last.fm，这是我下面的代码......

```
$.getJSON('http://ws.audioscrobbler.com/2.0/?method=album.getinfo&api_key=ba2641c3bcc4d9e90ff25d4a7414f4ec&mbid='+lastresult1mbid+'&format=json', function (infodata) {
        console.log(infodata);       

         var lastrel1 =(JSON.stringify(infodata.album.releasedate));
         var releasedate1 = $.parseJSON(lastrel1);

         var fmtracks =(JSON.stringify(infodata.album.tracks.track[0].name));
         var tracks1 = $.parseJSON(fmtracks);

         $('#lastfminfo1').append(""+releasedate1+"");

          $('#tracks1').append(""+tracks1+"");

 }); 
```

对于可变 fmtracks，我需要显示这张专辑中的 15 首曲目，那么如何将它们全部输出到`lastmininfo1`div？

`Track[0].name`会起作用的，也会起作用`track[1]`。

我需要一个循环或 [i] 或每个函数来显示它们，但我尝试的一切都不起作用。

非常感谢您的帮助或写作方向上的一点，在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T17:31:00.163

```
$.getJSON('http://ws.audioscrobbler.com/2.0/?method=album.getinfo&api_key=ba2641c3bcc4d9e90ff25d4a7414f4ec&mbid=d63d427d-499c-4eb4-996e-535e36013766&format=json', function (infodata){ 

        console.log(infodata);
        var trackList = infodata.album.tracks.track
        for(var i = 0, currentTrack; currentTrack = trackList[i]; ++i){
                $("#lastfminfo1").append(currentTrack.name);
            } 
    }) 
```

这很有效，您只需要遍历曲目并附加您想要的任何信息。这只是没有任何标签的名称。

JSFiddle：http: [//jsfiddle.net/klatzkaj/3Z884/1/](http://jsfiddle.net/klatzkaj/3Z884/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T17:17:12.513

是的，您必须遍历它们，或者当支持 IE<9 不是问题时，您可以使用该[`forEach`方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach)并将`tracks`每个标题推送到数组中。

但是，由于您使用的是 jQuery，因此您可能需要查看[`$.map()`](http://api.jquery.com/jQuery.map/).

# mysql - 选择带有更新的语句

> ID：14506731
> 
> 赞同：0
> 
> 时间：2013-01-24T17:03:18.233
> 
> 标签：mysql, sql

我正在创建一个显示文章的网站。文章表具有以下字段：

```
article_id
title
text
views 
```

ATM 我正在​​选择文章并输出它，但我还想**增加同一查询中的视图，**即“views=views+1”。

查询看起来像这样

```
SELECT article_id, title, text, views
SET views=views+1
WHERE article_id=:article_id 
```

我也想在输出中获得视图的增量结果，所以我猜我需要将 SET 放在 SELECT 之前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T17:07:42.780

它必须是两个单独的查询。

```
SELECT 
    article_id, 
    title, 
    text, 
    views
FROM TABLE
WHERE article_id = article_id;

UPDATE TABLE
SET views = views + 1
WHERE article_id = article_id; 
```

您可以将它们包装在事务中以强制两者发生或回滚。

```
START TRANSACTION;

SELECT 
    article_id, 
    title, 
    text, 
    views
FROM TABLE
WHERE article_id = article_id;

UPDATE TABLE
SET views = views + 1
WHERE article_id = article_id;

COMMIT; 
```

# dtd - DTD 有效性错误

> ID：14506738
> 
> 赞同：1
> 
> 时间：2013-01-24T17:03:40.957
> 
> 标签：dtd

我正在自己学习一些 SQL 和 DTD。我不太习惯。在进行一些锻炼时，我遇到了一些问题。这是数据：[https](https://prod-c2g.s3.amazonaws.com/db/Winter2013/files/countries.xml) ://prod-c2g.s3.amazonaws.com/db/Winter2013/files/countries.xml 我正在尝试为此编写DTD。这是我写的：

```
<!ELEMENT countries (country*)>
<!ELEMENT country (city*, population*)>
<!ATTLIST country name (PCDATA) #REQUIRED population (CDATA) #REQUIRED area (CDATA) #REQUIRED >
<!ELEMENT city (name, population) >
<!ELEMENT name ANY>
<!ELEMENT population ANY>
<!ELEMENT language ANY>
<!ATTLIST language percentage CDATA #IMPLIED > 
```

可能会有一些小错误，但我经常得到的错误是有效性错误。例如它说

> 国家属性名称的值“阿富汗”不在枚举集中。

我做错什么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T17:16:12.753

那是因为：

```
<!ATTLIST country name (PCDATA) 
```

它认为这`PCDATA`是枚举中的一个值。尝试将其更改为`CDATA`（不带括号）...

```
<!ATTLIST country 
          name CDATA #REQUIRED 
          population CDATA #REQUIRED 
          area CDATA #REQUIRED> 
```

# php - excel utf-8 csv 导出和分隔符

> ID：14506739
> 
> 赞同：0
> 
> 时间：2013-01-24T17:03:46.920
> 
> 标签：php, excel, drupal, csv, utf-8

所以我这样做了（我使用 Drupal 6）：

```
 while(@ob_end_clean());
  drupal_set_header("Content-type: text/csv;");
  drupal_set_header("Cache-Control: no-store, no-cache");
  drupal_set_header("Content-Disposition: attachment; filename=translations.csv");
  print chr(255) . chr(254) . mb_convert_encoding($output, 'UTF-16LE', 'UTF-8');
  exit; 
```

导出 utf-8 字符的 CSV。当我导入 excel 时，utf-8 字符会正确显示。

问题是，excel 不会解析分隔符，即逗号将全部显示在一列中，而不是在文件打开时用作分隔符。

有没有办法让我打开它时，逗号将用作分隔符？

csv中的一行如下：

```
$output .= '"'.str_replace('"', '""', $id).'","'.str_replace('"', '""', $source).'","'.str_replace('"', '""', $translation) . '"'; 
```

我尝试使用制表符 \t 而不是逗号作为分隔符，但同样的事情会发生，即。选项卡不会用作文件打开时的分隔符

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T19:46:23.637

如果您使用 Excel 2007，那么如果您先打开 Excel，则可以转到`Data`选项卡，然后选择`From Text`

在资源管理器浏览器中选择您的 .csv 文件，然后应该会出现文本向导。这为您提供了更多步骤和选项来控制它在分解列等方面要寻找的内容。

旧版本的 Excel 也支持它，但我不能确定它在同一个地方，但我认为它是。

试试那个向导，看看它是否能解决你的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T06:02:59.313

要将逗号用作默认 CSV 分隔符，需要更改相应的 Windows 区域设置选项：

> 转到控制面板--> 区域和语言选项（或日期、时间和区域选项--> 在某些机器上的区域和语言选项）--> 单击自定义按钮。在打开的对话框中，您将看到“**列表分隔符**”选项，您可以在其中将逗号更改为不同的字符 --> 单击应用，然后单击确定，然后再次应用。

请注意以下事项：

1.  默认情况下，此设置用于 CSV 导入和导出。
2.  `File > Open`您应该使用、 NOT打开 CSV 文件`Data > Import External Data > Import Data...`，或者只需在资源管理器中双击任何 CSV 文件，它将在 Excel 中打开并应用默认分隔符。

阅读更多：

*   [http://www.ozgrid.com/forum/showthread.php?t=134498](http://www.ozgrid.com/forum/showthread.php?t=134498)
*   [https://superuser.com/a/298177/187330](https://superuser.com/a/298177/187330)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T16:10:51.577

对于 Excel 中带有 x 分隔值的 Unicode 支持，请使用制表符分隔的 UTF-16 Little-Endian（当您**Save As...** > **Unicode Text (*.txt)**时 Excel 生成的内容）。

如果你不这样做，你会遇到类似你遇到的问题。

请参阅：[Excel 和 Unicode](http://www.herongyang.com/Unicode/Excel-Using-Microsoft-Excel-as-Unicode-Text-Editor.html)

# sql - DateDiff 给出 ORDER BY 中遇到的常量表达式

> ID：14506744
> 
> 赞同：0
> 
> 时间：2013-01-24T17:04:01.570
> 
> 标签：sql, sql-server-2008, date, sql-order-by, datediff

我想编辑一个查询，但我被卡住了。我想按日期订购（最初是“2012-12-28”），但我读到它必须转换为 unix 时间戳才能做到这一点。我不知道我是否做错了所以请帮助我！奇怪的是，当我单独执行 DATEDIFF 时没有问题。但是当我把它放在查询中时。

有人可以帮我吗？这是查询。简化了课程。

`"SELECT TOP 6 * FROM jd_lighthouses WHERE locations_aanvang != '' ORDER BY DATEDIFF(s, '1970-01-01', '2012-12-28 00:00:00 +1:00') DESC";`

我得到的错误是：

`A constant expression was encountered in the ORDER BY list position 1`

提前致谢！

亲切的问候，布拉姆

> 评论后这里是真正的代码：
> 
> `"SELECT TOP 6 * FROM jd_lighthouses WHERE locations_aanvang != '' ORDER BY DATEDIFF(s, '1970-01-01', locations_aanvang+' 00:00:00 +1:00') DESC"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T17:07:45.667

在语法上你可以做

```
ORDER BY (SELECT DATEDIFF(s, '1970-01-01', '2012-12-28 00:00:00 +1:00')) DESC 
```

这是完全没有意义的，但已经优化（没有排序发生）。

所有行的值`DATEDIFF(s, '1970-01-01', '2012-12-28 00:00:00 +1:00')`都相同，因此在`ORDER BY`

您的意思是引用列而不是使用硬编码的日期吗？

```
ORDER  BY DATEDIFF(s, some_column, '2012-12-28 00:00:00 +1:00') DESC 
```

# mysql - mysql 性能 INSERT 到表 SELECT 中进行报告

> ID：14506745
> 
> 赞同：1
> 
> 时间：2013-01-24T17:04:02.943
> 
> 标签：mysql, insert, report, sql-optimization

我正在为报告进行 mysql 查询。这个想法是有一个简单的表说'reportTable'，其中的值是从各个地方获取的。然后我可以更轻松地使用 reportTable 而无需记住大量的连接等，并且还可以为其他项目共享此表。

1.  我是否应该分解查询的内部插入部分，以便它一次执行块，我可能会添加数万行？

* * *

```
INSERT INTO reportTable
(
   -- long query grabbing results from various places
   SELECT var1 FROM schema1.table1
   SELECT var2 FROM schema2.table1
   SELECT var2 FROM schema2.table1
   etc
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T11:24:44.890

这解决了您对插入数据需要太长时间等的担忧。我理解它就像你每次都重建你的桌子。因此，不要这样做，只需获取表中尚未包含的新数据。由于查找数据是否已经存在于您的报告表中可能也很昂贵，因此只需获取增量即可。就是这样：

确保在每个表中都需要这样的列：

```
ALTER TABLE yourTable ADD COLUMN created timestamp DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP; 
```

该`ON UPDATE`子句当然是可选的，不知道是否需要跟踪变化。如果是这样，请给我评论，我可以为您提供一个解决方案，您可以使用该解决方案保留您的数据历史记录。

现在您需要一个包含一些元信息的小表。

```
CREATE TABLE deltameta (tablename varchar(50), LSET timestamp, CET timestamp); 
```

LSET 是 Last Success Extraction Time 的缩写，CET 是 Current Extraction Time 的缩写。

当您获取数据时，它的工作方式如下：

```
UPDATE deltameta SET CET = CURRENT_TIMESTAMP WHERE tablename = 'theTableFromWhichYouGetData';
SELECT @varLSET := LSET, @varCET := CET FROM deltameta WHERE tablename = 'theTableFromWhichYouGetData';
INSERT INTO yourReportTable (
    SELECT whatever FROM aTable WHERE created >= @varLSET AND created < @varCET
);
UPDATE deltameta SET LSET = CET WHERE tablename = 'theTableFromWhichYouGetData'; 
```

如果在插入脚本过程中出现任何问题，您将在下次运行时获得相同的数据。此外，如果您需要回滚，您可以在此处处理事务。同样，如果您需要帮助，请写评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T17:43:50.137

我可能错了，但您似乎在谈论基本观点。您可以在此处阅读视图介绍：http: [//techotopia.com/index.php/An_Introduction_to_MySQL_Views](http://techotopia.com/index.php/An_Introduction_to_MySQL_Views)，这里是 mysql 视图文档：[http ://dev.mysql.com/doc/refman/5.0/en/create -view.html](http://dev.mysql.com/doc/refman/5.0/en/create-view.html)

# jquery - 如何根据删除文件的时间删除正确的文本输入

> ID：14506749
> 
> 赞同：0
> 
> 时间：2013-01-24T17:04:11.820
> 
> 标签：jquery, html, ajax, upload

我在这里有一个应用程序：[应用程序](http://helios.hud.ac.uk/u0867587/Mobile_app/InputTest.php)

请按照以下步骤操作：

1.  单击`Add Question`按钮将文件输入附加到下表中：

2.  通过使用文件输入上传 2 张图片（一次一张），每次成功上传一张图片时，它会在表格下方和下方显示上传文件的名称，并在文本输入中显示其 id。

3.  现在问题就在这里，单击`Remove`您上传的第二个文件名的按钮，您将看到它成功删除了关联的文件名和删除按钮，但它删除了下面的两个文本输入。这是不正确的，它应该只删除其 id 与删除的文件名相关联的文本输入。

所以这是我的问题，当用户单击`Remove`按钮时，如何才能仅删除与已删除文件名关联的文本输入，而不是在单击删除按钮时删除所有文本输入？

下面的代码显示了文件输入以及如何将其附加到下面的 html 表中，以及显示`.hiddenimg`存储文本输入的 div：

**Jquery附加文件输入表单：**

```
function GetFormImageCount(){ 
  return $('.imageuploadform').length + 1;
}

function insertQuestion(form) {

    var $tbody = $('#qandatbl_onthefly > tbody');
    var $tr = $("<tr class='optionAndAnswer' align='center'>");
    var $image = $("<td width='17%' class='image'></td>");

    var $fileImage = $("<form action='imageupload.php' method='post' enctype='multipart/form-data' target='upload_target_image' onsubmit='return imageClickHandler(this);' class='imageuploadform' >" +
        "<p class='imagef1_upload_form'><label>" +
        "Image File: <input name='fileImage' type='file' class='fileImage' /></label><br/><br/><label class='imagelbl'>" +
        "<input type='submit' name='submitImageBtn' class='sbtnimage' value='Upload' /></label>" +
        "<p class='imagef1_upload_process'>Loading...<br/><img src='Images/loader.gif' /></p>" +
        "<input type='hidden' class='numimage' name='numimage' value='" + GetFormImageCount() + "' />" +
        "</p><p class='imagemsg'></p><p class='listImage'></p>" +
        "<iframe class='upload_target_image' name='upload_target_image' src='/' style='width:0px;height:0px;border:0px;solid;#fff;'></iframe></form>");

    $image.append($fileImage);

    $tr.append($image);
    $tbody.append($tr);

} 
```

**HTML 表单和表格，其中附加了文件输入表单，并且文本输入存储在`.hiddenimg`div 标记中：**

```
<form id="QandA" action="insertQuestion.php" method="post">

<table id="questionBtn" align="center">
<tr>
<th>
<input id="addQuestionBtn" name="addQuestion" type="button" value="Add Question" onClick="insertQuestion(this.form)" />
</th>
</tr>
</table>

</div>
<hr/>

<table id="qandatbl" align="center" cellpadding="0" cellspacing="0" border="0">
<thead>
<tr>
    <th width="17%" class="image">Image</th>
</tr>
</thead>
</table>
<div id="qandatbl_onthefly_container">
<table id="qandatbl_onthefly" align="center" cellpadding="0" cellspacing="0" border="0">
<tbody>
</tbody>
</table>
</div>

<div class="hiddenimg"><!-- All uploaded image file ids go here --></div>

</form> 
```

下面是显示文件上传处理程序的代码，启动文件上传的函数，重要的是停止文件上传的函数，它控制文件名、文本输入和删除按钮的显示，以及控制`Remove`按钮时的删除点击：

**上传按钮处理程序：**

```
 function imageClickHandler(imageuploadform){ 
  if(imageValidation(imageuploadform)){ 
      window.lastUploadImageIndex = $('.imageuploadform').index(imageuploadform); 
      return startImageUpload(imageuploadform); 
  } 
  return false; 
```

**开始上传：**

```
function startImageUpload(imageuploadform){

  $(imageuploadform).find('.imagef1_upload_process').show()
  $(imageuploadform).find('.imagef1_upload_form').hide();
  $(imageuploadform).find('.imagemsg').hide();
  sourceImageForm = imageuploadform;

      return true;
} 
```

**上传完成：**

```
 var imagecounter = 0;

function stopImageUpload(success, imageID, imagefilename){

      var result = '';
      imagecounter++;

      if (success == 1){
         result = '<span class="imagemsg'+imagecounter+'">The file was uploaded successfully</span>';   
            $('.hiddenimg').eq(window.lastUploadImageIndex).append('<input type="text" name="imgid[]" id="'+imageID+'" value="' + imageID + '" />');
            $('.listImage').eq(window.lastUploadImageIndex).append('<div>' + htmlEncode(imagefilename) + '<button type="button" class="deletefileimage" data-imageID="'+imageID+'"  data-image_file_name="' + imagefilename + '">Remove</button><br/><hr/></div>');
         }

      $(sourceImageForm).find('.imagef1_upload_process').hide();
      $(sourceImageForm).find('.imagemsg').html(result);
      $(sourceImageForm).find('.imagemsg').show();
      $(sourceImageForm).find(".fileImage").replaceWith("<input type='file' class='fileImage' name='fileImage' />");
      $(sourceImageForm).find('.imagef1_upload_form').show();

  var _imagecounter = imagecounter;

$('.listImage').eq(window.lastUploadImageIndex).find(".deletefileimage").on("click", function(event) {
    jQuery.ajax("deleteimage.php?imagefilename=" + $(this).attr('data-image_file_name')).done(function(data) {
        $(".imagemsg" + _imagecounter).html(data);
    });

    $(this).parent().remove();
    $(".hiddenimg input").remove();
});

      return true;   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T17:20:36.530

如果我要这样做，那么我将添加图像 id 作为按钮的值，然后检索它，并删除相关的输入

```
$('.listImage').eq(window.lastUploadImageIndex).append('<div>' + htmlEncode(imagefilename)
 + '<button type="button" class="deletefileimage" data-imageID="'+imageID+'"  data-image_file_name="' + imagefilename + '"  value="'+imageID+'">Remove</button>
<br/>
<hr/>
</div>') 
```

然后我会将其添加为文本输入的 id，甚至添加到名称或类或任何内容中

```
$('.listImage').eq(window.lastUploadImageIndex).find(".deletefileimage").on("click", function(event) {
    jQuery.ajax("deleteimage.php?imagefilename=" + $(this).attr('data-image_file_name')).done(function(data) {
        $(".imagemsg" + _imagecounter).html(data);
    });
var buttonid = $(this).attr(value) // or class or what ever
    $(this).parent().remove();
    $("#"+ buttonid  +"").remove(); // this will be the id of the text input (you allready have that in your application .
}); 
```

# c# - LinkBut ton 单击事件未在动态用户控件中触发

> ID：14506750
> 
> 赞同：0
> 
> 时间：2013-01-24T17:04:15.157
> 
> 标签：c#, asp.net, user-controls, webforms

在我的主页视图中，我有一个链接按钮、一个占位符，并且我注册了我的用户控件：

```
<%@ Register TagPrefix="vf" TagName="Headline" Src="~/Controls/Headline.ascx" %>

<asp:LinkButton ID="lbAddHeadline" runat="server" OnClick="lbAddHeadline_OnClick">+ Headline</asp:LinkButton>

<asp:PlaceHolder ID="phAddTemplateControlsArea" runat="server"></asp:PlaceHolder> 
```

如果出现此链接按钮，我会根据添加到页面的控件数量为控件提供 ID，我还设置命令 arg 并链接按钮单击事件，然后将它们全部加载到面板中。当我单击用户控件中的按钮时，我希望它在我的主页上触发一个方法 RemoveItem_OnClick()

```
protected void lbAddHeadline_OnClick(object sender, EventArgs e)
{
    Controls_Headline ctrl = (Controls_Headline)LoadControl("~/Controls/Headline.ascx");
    ctrl.ID = "MyCtrl_" + CMSSession.Current.AddedTemplateControls.Count;
    ctrl.Remove.CommandArgument = CMSSession.Current.AddedTemplateControls.Count.ToString();
    ctrl.RemoveEvent += new EventHandler(RemoveItem_OnClick);

    CMSSession.Current.AddedTemplateControls.Add((Control)ctrl);

    LoadControlsToPanel();
}

private void LoadControlsToPanel()
{
    PlaceHolder ph = accAddTemplates.FindControl("phAddTemplateControlsArea") as PlaceHolder;

    foreach (var ctrl in CMSSession.Current.AddedTemplateControls)
    {
        ph.Controls.Add(ctrl);
    }
}

public void RemoveItem_OnClick(object sender, EventArgs e)
{
    LinkButton lb = sender as LinkButton;
} 
```

当控件被添加到主页上的面板时，我已经重写了 OnInit 方法来保存用户控件中的数据：

```
protected override void OnInit(EventArgs e)
{
    PlaceHolder ph = accAddTemplates.FindControl("phAddTemplateControlsArea") as PlaceHolder;

    int counter = 0;

    foreach (UserControl ctrl in CMSSession.Current.AddedTemplateControls)
    {
        ctrl.ID = "MyCtrl_" + counter;
        ITemplateControl ictrl = ctrl as ITemplateControl;
        ictrl.Remove.CommandArgument = counter.ToString();
        ictrl.RemoveEvent += new EventHandler(RemoveItem_OnClick);
        counter++;
        ph.Controls.Add(ctrl);
    }

    base.OnInit(e);
} 
```

如您所见，用户控件隐含了一个通用界面，它和其他用户控件将使用，因此我可以链接一些通用按钮

```
public interface ITemplateControl
{
    LinkButton Remove { get; set; }
    TextBox Label { get; set; }
    event EventHandler RemoveEvent;
} 
```

这是用户控件的 html：

```
<%@ Control Language="C#" AutoEventWireup="true" CodeFile="Headline.ascx.cs" Inherits="Controls_Headline" %>

<div class="headline">

    Headline Text:

    <asp:TextBox ID="txtLabel" runat="server"></asp:TextBox>

    <asp:LinkButton ID="lbRemove" runat="server" OnClick="lbRemove_OnClick">X</asp:LinkButton>

</div> 
```

这是用户控件的代码隐藏：

```
public partial class Controls_Headline : UserControl, ITemplateControl
{    
    protected void Page_Load(object sender, EventArgs e)
    {
        lbRemove.Click += new EventHandler(lbRemove_OnClick);
    }

    public TextBox Label
    {
        get { return txtLabel; }
        set { txtLabel = value; }
    }

    public LinkButton Remove
    {
        get { return lbRemove; }
        set { lbRemove = value; }
    }

    public event EventHandler RemoveEvent;

    protected void lbRemove_OnClick(object sender, EventArgs e)
    {
        if (RemoveEvent != null)
        {
            RemoveEvent(sender, e);
        }
    }
} 
```

现在，当我单击位于用户控件中的 lbRemove 链接按钮时，我希望它调用它自己的方法 lbRemove_OnClick，然后调用我在 OnInit 方法中绑定的委托事件。

每次我单击 lbRemove 链接按钮时会发生什么，它会调用主页的 OnInit 方法，仅此而已。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T18:53:37.837

弄清楚了。

直接将UC的点击事件绑定到页面中的点击事件即可。我把它复杂化了。

```
 protected void lbAddHeadline_OnClick(object sender, EventArgs e)
    {
        Controls_Headline ctrl = (Controls_Headline)LoadControl("~/Controls/Headline.ascx");
        ctrl.ID = "MyCtrl_" + CMSSession.Current.AddedTemplateControls.Count;
        ctrl.Remove.CommandArgument = CMSSession.Current.AddedTemplateControls.Count.ToString();
        ctrl.Remove.Click += new EventHandler(RemoveItem_OnClick);

        CMSSession.Current.AddedTemplateControls.Add((Control)ctrl);

        LoadControlsToPanel();
    }

    protected override void OnInit(EventArgs e)
    {
        PlaceHolder ph = accAddTemplates.FindControl("phAddTemplateControlsArea") as PlaceHolder;

        int counter = 0;

        foreach (UserControl ctrl in CMSSession.Current.AddedTemplateControls)
        {
            ctrl.ID = "MyCtrl_" + counter;
            ITemplateControl ictrl = ctrl as ITemplateControl;
            ictrl.Remove.CommandArgument = counter.ToString();
            ictrl.Remove.Click += new EventHandler(RemoveItem_OnClick);
            counter++;
            ph.Controls.Add(ctrl);
        }

        base.OnInit(e);
    } 
```

# javascript - Javascript在字符串中提取未知数字

> ID：14506751
> 
> 赞同：2
> 
> 时间：2013-01-24T17:04:17.127
> 
> 标签：javascript, asp.net, regex

我有一个字符串 ctl00_ContentPlaceHolder1_lstViewFormulas_ctrl06_lblCountDown 将使用我的 asp.net 按钮控件中的 sender 进入一个 javascript 函数...

```
<asp:Button ID="buttStartTimer" runat="server" CausesValidation="false" OnClientClick="javascript:countdown(this);" Text="Start" /> 
```

功能测试（发件人）{

}

需要在ctrl后面直接获取数字，在上面的例子中应该是06（ctrl06_lblCountDown）

如何使用 javascript 提取此号码？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T17:13:57.493

```
var str = "ctl00_ContentPlaceHolder1_lstViewFormulas_ctrl06_lblCountDown",
    result = str.match(/.*ctrl(\d+).*/)[1]; 
```

工作示例：http: [//jsfiddle.net/RXGb2/](http://jsfiddle.net/RXGb2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T17:19:51.643

你可以尝试这样的事情：

```
var str = 'ctrl06_lblCountDown',
    numericArray = [],
    numericString,
    num,
    i=0,
    len = 0;

numericArray = str.match(/[0-9]/g);

len = numericArray.length;

numericString = '';
for(i=0; i<len; i++){
    numericString += numericArray[i];

}

num = parseInt(numericString,10); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T17:11:01.820

您可以轻松提取正在使用的正则表达式：

```
var str = "ctl00_ContentPlaceHolder1_lstViewFormulas_ctrl06_lblCountDown";
var num = parseInt(str.match(/_ctrl([\d]*)_/)[1], 10); 
```

* * *

*更安全的方式：*

```
var str = "ctl00_ContentPlaceHolder1_lstViewFormulas_ctrl06_lblCountDown";
var parts = str.match(/_ctrl([\d]*)_/), num;
if(parts.length > 1) {
    num = parseInt(parts[1], 10);
} 
```

# java - Java：JTextArea 的 PropertyChangeListener 没有响应？

> ID：14506753
> 
> 赞同：2
> 
> 时间：2013-01-24T17:04:21.647
> 
> 标签：java, swing, listener, jtextarea, propertychangelistener

我用`PropertyChangeListener`for`JTextFields`来监听**值**的变化，它工作正常，当我使用它时`JTextArea`; 代码中没有错误，并且可以正常编译。但是，此方法在文本值发生某些更改时显示响应，`JTextField`但在涉及 时没有响应`JTextArea`。

这就是我编写代码的方式

在构造函数内部：

```
textField_1.addPropertyChangeListener("value", new ChangeListener());
textField_2.addPropertyChangeListener("value", new ChangeListener());
textArea.addPropertyChangeListener("value", new ChangeListener()); 
```

在课堂上的某个地方：

```
private class ChangeListener implements PropertyChangeListener
{
    @Override
    public void propertyChange(PropertyChangeEvent e)
    {
        Object source = e.getSource();

        if ((source == textField_1) || (source == textField_2) || (source == textArea))
        {
              System.out.println("some value changed "+ source.getClass());
        }
    }
} 
```

每次更改这些组件文本值时，我都会使用*新值。*

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T17:09:57.173

*   使用[DocumentListener](http://docs.oracle.com/javase/tutorial/uiswing/events/documentlistener.html)监听[JTextArea的变化](http://docs.oracle.com/javase/tutorial/uiswing/components/text.html)

*   从此[侦听器](http://docs.oracle.com/javase/tutorial/uiswing/events/eventsandcomponents.html)中，您可以向[PropertyChangeListener触发一个新事件](http://docs.oracle.com/javase/tutorial/uiswing/events/propertychangelistener.html)

*   仅在需要的情况下触发一个新事件`PropertyChangeListener`，从这个描述中不知道，为了更快地发布[SSCCE以获得更好的帮助](http://sscce.org/)

# c# - 使用 QueryOver 将相关子查询添加到 Select 语句

> ID：14506754
> 
> 赞同：2
> 
> 时间：2013-01-24T17:04:22.680
> 
> 标签：c#, nhibernate, fluent-nhibernate

我正在尝试将 SQL 语句转换为使用 QueryOver（希望预取响应的实体部分），但我无法弄清楚如何将相关子查询添加到 Select 语句（我发现的所有示例仅显示在 Where 子句中使用子查询）。

这是我要转换的查询：

```
var pendingFeedbackStatus = Session.QueryOver<FeedbackStatus>().Where(fs => fs.Name == "pending");
var projectWhereClause = project != null ? "AND f1.project_id = " + project.Id : "";

var query = Session.CreateSQLQuery(string.Format(@"
        SELECT
            ft.id as FEEDBACK_TYPE_ID,
            (SELECT COUNT(*) FROM FEEDBACK f1 WHERE ft.id = f1.feedback_type_id AND f1.archive_ind = 0 {0}) as ALL_FEEDBACK_COUNT,
            (SELECT COUNT(*) FROM FEEDBACK f1 WHERE ft.id = f1.feedback_type_id AND f1.archive_ind = 0 {0} AND feedback_status_id = {1}) as PENDING_FEEDBACK_COUNT
        FROM feedback f
        RIGHT JOIN feedback_type ft on f.feedback_type_id = ft.id WHERE ft.RESTRICTED_IND = 0
        GROUP BY ft.id, ft.sort_order
        ORDER BY ft.sort_order",
        projectWhereClause,
        pendingFeedbackStatus.Id
    ))
    .SetResultTransformer(Transformers.AliasToEntityMap);

var results =  query.List<IDictionary>();
return results.Select(r =>
    new FeedbackTypeSummary
    {
        Type = Get(Convert.ToInt32(r["FEEDBACK_TYPE_ID"])),
        AllFeedbackCount = Convert.ToInt32(r["ALL_FEEDBACK_COUNT"]),
        PendingFeedbackCount = Convert.ToInt32(r["PENDING_FEEDBACK_COUNT"])
    }).ToList(); 
```

这是我到目前为止所拥有的（主要是减去相关子查询和添加到子查询中的一些额外过滤）：

```
var pendingFeedbackStatus = Session.QueryOver<FeedbackStatus>().Where(fs => fs.Name == "pending");

Feedback feedbackAlias = null;
FeedbackType feedbackTypeAlias = null;

var allFeedback = QueryOver.Of<Feedback>()
    .Where(f => f.Type.Id == feedbackTypeAlias.Id)
    .Where(f => !f.IsArchived);

var pendingFeedback = QueryOver.Of<Feedback>()
    .Where(f => f.Type.Id == feedbackTypeAlias.Id)
    .Where(f => !f.IsArchived)
    .Where(f => f.Status.Id == pendingFeedbackStatus.Id);

var foo = Session.QueryOver<Feedback>(() => feedbackAlias)
    .Right.JoinAlias(f => f.Type, () => feedbackTypeAlias, ft => !ft.IsRestricted)
    .SelectList(list => list
        // TODO: Add correlated subqueries here?
        .SelectGroup(() => feedbackTypeAlias.Id)
        .SelectGroup(() => feedbackTypeAlias.SortOrder)
     )
    .OrderBy(() => feedbackTypeAlias.SortOrder).Asc;

var test = foo.List<object[]>(); 
```

我还想找到一种`FeedbackType`从语句中返回完整实体的方法，而不是返回 feedbackTypeAlias.Id 然后必须`Type = Get(Convert.ToInt32(r["FEEDBACK_TYPE_ID"]))`像我在原始语句中那样在循环中执行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T19:53:47.343

我觉得我找了 10 次，但我忽略了`.SelectSubQuery()`提供所需相关子查询的方法。这个答案让我失望了 - [https://stackoverflow.com/a/8143684/191902](https://stackoverflow.com/a/8143684/191902)。

这是完整的 QueryOvery 版本：

```
var pendingFeedbackStatus = Session.QueryOver<FeedbackStatus>().Where(fs => fs.Name == "pending").SingleOrDefault();

Domain.Feedback.Feedback feedbackAlias = null;
FeedbackType feedbackTypeAlias = null;
var allFeedback = QueryOver.Of<Domain.Feedback.Feedback>()
    .Where(f => f.Type.Id == feedbackTypeAlias.Id)
    .Where(f => !f.IsArchived);

var pendingFeedback = QueryOver.Of<Domain.Feedback.Feedback>()
    .Where(f => f.Type.Id == feedbackTypeAlias.Id)
    .Where(f => !f.IsArchived)
    .Where(f => f.Status.Id == pendingFeedbackStatus.Id);

if (project != null)
{
    allFeedback.Where(f => f.Project.Id == project.Id);
    pendingFeedback.Where(f => f.Project.Id == project.Id);
}

FeedbackTypeSummary result = null;
var query = Session.QueryOver<Domain.Feedback.Feedback>(() => feedbackAlias)
    .Right.JoinAlias(f => f.Type, () => feedbackTypeAlias, ft => !ft.IsRestricted)
    .SelectList(list => list
        .SelectSubQuery(allFeedback.ToRowCountQuery()).WithAlias(() => result.AllFeedbackCount)
        .SelectSubQuery(pendingFeedback.ToRowCountQuery()).WithAlias(() => result.PendingFeedbackCount)
        .SelectGroup(() => feedbackTypeAlias.Id).WithAlias(() => result.TypeId)
        .SelectGroup(() => feedbackTypeAlias.Name).WithAlias(() => result.TypeName)
        .SelectGroup(() => feedbackTypeAlias.NamePlural).WithAlias(() => result.TypeNamePlural)
        .SelectGroup(() => feedbackTypeAlias.SortOrder)
    )
    .OrderBy(() => feedbackTypeAlias.SortOrder).Asc
    .TransformUsing(Transformers.AliasToBean<FeedbackTypeSummary>());

var results = query.List<FeedbackTypeSummary>();
return results; 
```

我还能够`FeedbackTypeSummary`从单个查询中填充我的 DTO，尽管我找不到为实体命名的方法并最终从`FeedbackType`into中提取了一些所需的属性`FeedackTypeSummary`（无论如何这可能是更好的做法）。

# haskell - 尝试使用数据并行 Haskell - 但无法安装

> ID：14506758
> 
> 赞同：3
> 
> 时间：2013-01-24T17:04:39.390
> 
> 标签：haskell, cabal, data-parallel-haskell

`2012.4.0.0 Haskell`有人在平台上使用数据并行 Haskell吗？

我是 Haskell 初学者 - 但想尝试从列表切换到并行数组。

当我尝试跑步时

```
cabal install dph-examples 
```

我遇到了一个构建问题`bmp.1.2.3.1`：

```
Codec\BMP.hs:208:11: Not in scope: `BSL.fromStrict' 
```

当然这是某种类型的版本不匹配 - 但不确定该怎么做。有高手吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T08:40:37.063

[`bmp`](http://hackage.haskell.org/package/bmp)取决于[`bytestring`](http://hackage.haskell.org/package/bytestring)和[`binary`](http://hackage.haskell.org/package/binary)。`binary`取决于`bytestring`自己。您的`binary`软件包是`bytestring-0.9.2.1`使用平台附带的版本构建的。

尝试安装时`cabal install bmp`，`cabal`尝试安装可以构建有效安装计划的最新版本，而无需重新安装库（如果可能的话）。用 a`binary`构建的`bytestring-0.9.2.1`，也就是`bmp-1.2.3.1`作者忘记调整版本下限的地方`bytestring`，所以构建失败，因为`fromStrict`添加了`bytestring-0.10`.

您可以安装早期版本的`bmp`,

```
cabal install "bmp < 1.2.3" 
```

这是安全的选择，或者您可以`binary`针对较新的`bytestring`版本进行重建。后者可能会破坏其他一些依赖于 的软件包`binary`，因此也必须重建这些软件包。并且对于*许多*`bytestring`其他软件包所依赖的软件包，类似的问题也很可能很快再次发生。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T17:15:40.010

确保您已`bytestring`安装 >= 0.10.0.0。*

# javascript - Watir-webdriver，无法与 div 弹出窗口交互

> ID：14506763
> 
> 赞同：0
> 
> 时间：2013-01-24T17:04:56.763
> 
> 标签：javascript, ruby, popup, watir-webdriver

我想不出一种与突出显示的 HTML 交互的方法：

![在 js 模态中购买商品](../Images/90ea66e51360b687eee9f8a4c90ce656.png)

当我点击一个链接时，会出现一个交互式模式，其中有一个允许用户购买零件的表格。此外，模态具有在模态中打开新部分的链接。

我试图编写步骤定义，但无法通过测试。请参阅下面的我的（最新尝试）代码：

```
When /^I click on the Buy icon of loan part selected$/ do
  @browser.div(:id, 'modal_loan_parts_table').link(:text, 'Buy').click
end 
```

我不断收到的错误是`element not located`. 有人可以指导我启蒙吗？

这是发生的错误：

```
 unable to locate element, using {:id=>"modal_loan_parts_table", :tag_name=>"div"} (Watir::Exception::UnknownObjectException)
  ./step_definitions/secondarymkt_buying_lp.rb:62:in `/^I click on the Buy icon of loan part selected$/'
  secondarymkt_buying_lp.feature:27:in `When I cllick on the Buy icon of loan part selected' 
```

非常感谢伙计们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T11:25:38.847

我在不使用 xpath 的情况下找到了解决方案。这是我的代码，它有效：

```
When /^I click on the Buy icon of loan part selected$/ do
  @browser.div(:id, 'details-ajax-modal').wait_until_present
  @browser.div(:id, 'details-ajax-modal').exists?
  @browser.link(:class, 'modal-buy').wait_until_present
  @browser.link(:class, 'modal-buy').click
end 
```

非常感谢大家。

# python - 同名的模块和参数

> ID：14506770
> 
> 赞同：1
> 
> 时间：2013-01-24T17:05:12.067
> 
> 标签：python

我在 SO 上看到了一个关于具有相同名称的参数和函数以及如何处理的问题，但我还没有找到一个处理具有相同名称的参数和模块的问题。

我宁愿避免使用`from x import *`导入方法来支持`import x`. 但是，这导致我有一个名为 的函数的参数`x`，它与模块名称相同`x`。解决这个问题的最干净的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T17:07:24.480

将导入的模块重命名为其他名称，因此它位于不同的命名空间中：

```
import x as y 
```

然后您可以使用具有不同选择名称的导入对象。

# emacs - 组织模式在不同日期和不同时间重复发生的事件

> ID：14506775
> 
> 赞同：3
> 
> 时间：2013-01-24T17:05:33.250
> 
> 标签：emacs, elisp, org-mode, appointment

我的班级每周一/周三 12:00-12:50*和*周四 16:00-16:50 定期开会。我想把所有的笔记放在一起，因为它们都是针对同一个班级的，但我不知道如何设置这个重复事件。

有一种足够简单的方法来定义任意日期范围，但我看不到也可以正确显示在议程中的时间范围。他们也在不同的房间，所以如果可能的话，我想添加一些表示房间号的东西。如果只是约会（同时*也是*如此），我会继续

```
(and (org-class 2013 1 21 2013 5 9 1) (org-class 2013 1 21 2013 5 9 3)) 
```

会好的。是否有一个（n org-mode）函数来描述时间？有没有办法添加注释（比如房间号）？我不太清楚这整个部分是如何`org-mode`工作的（尽管我的猜测是，如果 sexp 评估为非零，那么事件是活动的）。

因此，总而言之，我想要一种能够将日期时间范围对象的任意集合分配给`org-mode`事件的方法，最好是使用我正在谈论的注释。

* * *

**编辑**
作为次要（但显然相关）问题，`sexp`指定时间的方式是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T19:23:15.313

您可以在同一条目中使用多个时间戳。

例如： `C-c``.`mon 12:00-12:50`RET`将产生`<2013-01-28 Mon 12:00-12:50>`. 然后，您可以对其进行编辑以添加中继器`+1w`。最后的时间戳看起来像`<2013-01-28 Mon 12:00-12:50 +1w>`。

我不知道你如何管理教室。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T16:00:14.300

不会为两个房间创建子树，然后为笔记本身创建第三个子树吗？

例如（有关将时间放在同一行的详细信息，请参阅[Org-FAQ](http://orgmode.org/worg/org-faq.html#org-class)。我认为在 <> 中添加时间会将其添加到时间中，但不完全确定，否则在之后添加它，它仍应将其包含在信息。

```
* Math Class
:PROPERTIES:
:CATEGORY: Math Class
:END:
** Room #1
<%%(and (org-class 2013 1 21 2013 5 9 1) (org-class 2013 1 21 2013 5 9 3)) 12:00-- 12:50>
** Room #2
<%%(org-class 2013 1 21 2013 5 9 4) 16:00--16:50>
** Notes 
```

# ssl - PayPal IPN 更新以适应 HTTP1.1 - 对等方重置连接

> ID：14506776
> 
> 赞同：3
> 
> 时间：2013-01-24T17:05:42.253
> 
> 标签：ssl, paypal, paypal-ipn, fsockopen

我们一直在努力根据 seom 最近的变化更新我们的 PayPal IPN 脚本。以下是 PayPal 的部分说明...

> 您需要在 2013 年 2 月 1 日之前采取的行动 您需要更新您的 IPN 和/或 PDT 脚本以使用 HTTP 1.1，并在 IPN 和 PDT 中包含“主机：www.paypal.com”和“连接：关闭”HTTP 标头脚本。

我们这样做了，但 IPN 失败了。PayPal 商家技术服务要求我们转移到 SLL 连接。以前我们与 PayPal 的连接是基于...

```
fsockopen ('www.paypal.com', 80, $errno, $errstr, 30) 
```

现在它是 ...

```
fsockopen ('ssl://ipnpb.paypal.com', 443, $errno, $errstr, 30) 
```

我们必须克服主机配置的 SSL 问题才能使其正常工作，但它现在可以建立连接。然而，IPN 要求我们发回 PayPal 以接收“已验证”通知，此时脚本可以根据确认的付款进行本地处理。

这就是失败的地方。

示例 PayPal 脚本的行是：

```
if (!$fp) {
    // HTTP ERROR

} else {
    fputs ($fp, $header . $req);
    while (!feof($fp)) {
        $res = fgets ($fp, 1024);

        if (strcmp (trim($res), "VERIFIED") == 0) {  ... rest of script 
```

但是回复是空白的。我插入了一个诊断程序，通过电子邮件向我发送每个阶段 $res 的值。如果我使用旧脚本执行此操作，它会返回一个“已验证”值就好了。几个网站上的旧脚本多年来一直很稳定。我现在已经在两个不同服务器上的两个不同站点上尝试了这些新更新，结果是相同的。

在查看 Apache 日志时，我看到了这个错误：

PHP 警告：fgets() [function.fgets]: SSL: Connection reset by peer in /home/[sitename]/public_html/[IPN scriptname].php on line 145

因此，PayPal 似乎在未发送已验证响应的情况下关闭了连接。然而，贝宝支持否认这是一个问题，因为连接首先是打开的。

我花了几天时间试图解决这个问题。我仍然有 2 月 1 日的最后期限，在那之后 PayPal 说我的旧脚本可能无法正常工作，但新脚本也不能。

其他人有这方面的经验吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-11T01:49:15.940

如果其他人有同样的问题，CURL 似乎是 PayPal 推荐的 IPN 选择。

在 Github 上查看代码示例：[https ://github.com/paypal/ipn-code-samples/blob/master/paypal_ipn.php](https://github.com/paypal/ipn-code-samples/blob/master/paypal_ipn.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-02T11:03:08.153

After struggle this issue a few hours. I got it right.

first, the header should be correct.

```
$header  = "POST /cgi-bin/webscr HTTP/1.1\r\n";
$header .= "Host: www.sanbox.paypal.com\r\n";
$header .= "Accept: */*\r\n";
$header .= "Connection: Close\r\n";
$header .= "Content-Length: " . strlen($req) . "\r\n";
$header .= "Content-Type: application/x-www-form-urlencoded\r\n";
$header .= "\r\n"; 
```

second, the buffer should be big enough to receive whole msg from Paypal. the original sample code use 1024, but the result got truncated.

```
$res = stream_get_contents($fp, 2048); 
```

After the two, the result return good.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-21T23:16:13.713

终于找到答案了！ [Paypal IPN 脚本，feof 和 fgets 的问题](https://stackoverflow.com/questions/8314064/paypal-ipn-script-issue-with-feof-and-fgets)

删除`while(!feof($fp) ...` 并将其更改为`$res = stream_get_contents($fp, 1024);`也添加`$header .= "Conection: Close"`以确保贝宝关闭连接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-06T01:13:22.530

> **更新：2016 年 1 月 7 日** 我注意到以下内容对于 tls://www.sandbox.paypal.com 非常有效，**但是**当您上线 tls://www.paypal.com 时，连接被拒绝！（它不起作用）我发现问题出在标题中，沙箱和生产级别的 live paypal 需要不同的标题！这是一个错误，但要让它在生产级别和沙箱中工作，请分别使用这些标头：
> 
> **生产级别（实时 PayPal 标头）：**

```
 $header  = "POST /cgi-bin/webscr HTTP/1.1\r\n"; 
  $header .= "Content-Type: application/x-www-form-urlencoded\r\n";
  $header .= "Content-Length: " . strlen($req) . "\r\n\r\n"; 
```

> **沙盒 PayPal 标头：**

```
$header  = "POST /cgi-bin/webscr HTTP/1.1\r\n";
$header .= "Host: www.paypal.com\r\n";
$header .= "Accept: */*\r\n";
$header .= "Connection: Close\r\n";
$header .= "Content-Length: " . strlen($req) . "\r\n";
$header .= "Content-Type: application/x-www-form-urlencoded\r\n";
$header .= "\r\n"; 
```

> *** 下面的代码是相同的，它工作正常，只需分别替换标题。*** 这是其余的代码（和答案）：

我在这里和那里检查了所有答案，以使其在 2016 年 1 月 5 日生效。他们都有优点，但不适用于整体情况。

所以首先，这是实际**工作的****完整**代码，然后我将通过它：

 **```
<?php

// =========================================================================
// PayPal Official PHP Codes and Tutorial:
// https://developer.paypal.com/webapps/developer/docs/classic/ipn/gs_IPN/
// =========================================================================

// Send an empty HTTP 200 OK response to acknowledge receipt of the notification 
header('HTTP/1.1 200 OK');

// Assign payment notification values to local variables
$item_name        = $_POST['item_name'];
$item_number      = $_POST['item_number'];
$payment_status   = $_POST['payment_status'];
$payment_amount   = $_POST['mc_gross'];
$payment_currency = $_POST['mc_currency'];
$txn_id           = $_POST['txn_id'];
$receiver_email   = $_POST['receiver_email'];
$payer_email      = $_POST['payer_email'];

// Build the required acknowledgement message out of the notification just received
$req = 'cmd=_notify-validate';               // Add 'cmd=_notify-validate' to beginning of the acknowledgement

foreach ($_POST as $key => $value) {         
    // Loop through the notification NV pairs
    $value = urlencode(stripslashes($value));  // Encode these values
    $req  .= "&$key=$value";                   // Add the NV pairs to the acknowledgement
}

// Set up the acknowledgement request headers
// HTTP POST request
$header  = "POST /cgi-bin/webscr HTTP/1.1\r\n";
$header .= "Host: www.sanbox.paypal.com\r\n";
$header .= "Accept: */*\r\n";
$header .= "Connection: Close\r\n";
$header .= "Content-Length: " . strlen($req) . "\r\n";
$header .= "Content-Type: application/x-www-form-urlencoded\r\n";
$header .= "\r\n";

// Open a socket for the acknowledgement request
$fp = fsockopen('tls://www.sandbox.paypal.com', 443, $errno, $errstr, 30);

// Send the HTTP POST request back to PayPal for validation
fputs($fp, $header . $req);

// Log the transaction:
file_put_contents("paypal_post.txt",  date('Y-m-d H:i:s')."\n".file_get_contents("php://input")."\n\n", FILE_APPEND);

// While not EOF
while (!feof($fp)) {
    // Get the acknowledgement response
    // $res = fgets($fp, 1024);  
    $res = stream_get_contents($fp, 1024);
    $responses = explode("\r\n", $res);
    foreach ($responses as $response) {
        if (strcmp ($response, "VERIFIED") == 0) {
            // Response contains VERIFIED - process notification

            // Authentication protocol is complete - OK to process notification contents

            // Possible processing steps for a payment include the following:

            // Check that the payment_status is Completed
            // Check that txn_id has not been previously processed
            // Check that receiver_email is your Primary PayPal email
            // Check that payment_amount/payment_currency are correct
            // Process payment

        } else if (strcmp ($response, "INVALID") == 0) {
            // Response contains INVALID - reject notification
            // Authentication protocol is complete - begin error handling

        }
    }
}
// Close the file
fclose($fp);
?> 
```

好的，现在您有了用于**侦听 PayPal IPN的****代码**，重新编译并将**其发送回 PayPal**进行验证，**接收**回标头，逐行**处理标头以查找****VERIFIED**验证。

 ******这应该由 PayPal 一体化软件包在**工作状态下**提供，但他们的教程缺少非常关键的部分，它对我和这个线程上的许多人都不起作用。

那么现在使它工作的关键部分是什么：首先，paypal 提供的标题不起作用，我发现 @jp_eagle 的标题工作完美。

贝宝错了 $res = fgets($fp, 1024); 还有……

但是你不需要 $res = stream_get_contents($fp, 2048); 正如@jp_eagle 建议的那样， $res = stream_get_contents($fp, 1024); 很好。

> while (!feof($fp)) {} 循环应该留在那里以使其工作！是的，即使从 fgets() 切换到 stream_get_contents() 它也应该留在那里！

@richbai90 删除它的建议是错误的。换个方法试试，不行。。。

获得 VALIDATION 的最关键部分是这个循环：

```
 $res = stream_get_contents($fp, 1024);
    $responses = explode("\r\n", $res);
    foreach ($responses as $response) {} 
```

**现在您可以在此处的每一行**中查找 VALIDATION ：

> if (strcmp ($response, "VERIFIED") == 0) {}

在其他任何事情之前，还记录了初始完整的传入 POST 请求表单 paypal：

> // 记录交易：file_put_contents("paypal_post.txt", date('Ymd H:i:s')."\n".file_get_contents("php://input")."\n\n", FILE_APPEND );

而已。现在去这里用你的贝宝登录看看它是否有效： [https ://developer.paypal.com/developer/ipnSimulator/](https://developer.paypal.com/developer/ipnSimulator/)

例如，给您的网址选择“购物车结帐”并发送测试 IPN。如果一切正常，请继续从上面的 paypal URL 中删除 .sandbox，从 www.sandbox.paypal.com 到 www.paypal.com，您就可以上线了。

使用您的数据库操作填写 if-else 语句中的 VERIFIED 和 INVALID 部分，然后就完成了。********

# php - PHP脚本之间需要共享内存数组

> ID：14506780
> 
> 赞同：0
> 
> 时间：2013-01-24T17:06:00.067
> 
> 标签：php

所以我有这个**a.php**文件正在执行**SELECT X FROM Y WHERE Z**。
**a.php**被用户多次调用。
我想跟踪已送达的行，所以我想为每一行保留一个计数器。

我要问的问题是如何跟踪这些计数器？当然，我可以将它们存储在数据库中，但这意味着必须在服务器端为每个用户进行许多更新，并且索引列的更新会消耗时间。

[在这个线程](https://stackoverflow.com/questions/7105866/i-want-to-define-a-variable-with-superglobal-scope-in-php)上提出了另一个我认为有趣的选项我认为
使用服务器文件（会话指向服务器上的本地文件）将是一个有趣的解决方案，但是两个或多个用户阅读有关文件的文件是什么？同时？他们将读取第 23 行的计数器 7，然后将 8 写回文件。因此，例如，如果它是 3 个用户一起，这意味着计数器现在落后 3-1 位数。因此，不是 10 (7+3)，而是 7+2 = 9。

你的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T17:45:09.880

如果您使用文件，则需要管理锁。如果您已经有一个数据库，除非您真的在那里遇到性能问题，否则我会坚持使用它。如果是这种情况，您可能根本不想写入磁盘并寻找内存解决方案。

# python - 从外部 qss 文件中读取 pyqt 样式表

> ID：14506787
> 
> 赞同：9
> 
> 时间：2013-01-24T17:06:17.117
> 
> 标签：python, pyqt4, pyside, stylesheet

我已经制作了一个 pyqt stylsheet 的 qss 文件，我应该如何调用文件内容并提供给`self.setStylesheet(..)`

```
from PyQt4 import QtCore
s = QtCore.QString('c:\myProject\darkFantasy.stylesheet') 
```

上面的代码加载路径字符串而不是实际的样式表。

那么如何加载样式表文件的实际内容..？我应该在读取模式下使用打开的文件读取它吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-24T17:16:09.243

好吧，我自己想出了答案，希望对大家有帮助：

```
sshFile="darkorange.stylesheet"
with open(sshFile,"r") as fh:
    self.setStyleSheet(fh.read()) 
```

# actionscript-3 - flex4 添加带有过渡效果的组

> ID：14506798
> 
> 赞同：0
> 
> 时间：2013-01-24T17:06:50.830
> 
> 标签：actionscript-3, apache-flex, flex4

如何将组（大小未知）添加到具有转换效果的 SkinnableContainer？

**示例**
首先，将 SkinnableContainer 平滑地调整为其最终大小，然后在 Group 中淡入淡出。

**此处**
的问题 Group-size 是通过将其添加到 SkinnableContainer 来确定的。这样做，SkinnableContainer 获得最终大小并显示组，而不播放过渡效果。

我发现的所有示例都是基于 MXML 和状态的。但我在这里需要一个**仅限 Actionscript 的**解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T07:39:44.520

```
 <fx:Declarations>
    <s:Parallel id="showEff">
        <s:Rotate3D angleYFrom="-90" angleYTo="0" duration="7000"/>
        <s:Fade alphaFrom="0.0" alphaTo="1.0" duration="7000" />
        <mx1:WipeRight duration="9000"/>
    </s:Parallel>

    <s:Parallel id="hideEff">
        <s:Rotate3D angleYFrom="0" angleYTo="-90" duration="4000" />
        <s:Fade alphaFrom="1.0" alphaTo="0.0"  duration="7000"/>
        <mx1:WipeRight duration="5000"/>
    </s:Parallel>
</fx:Declarations>

    <s:Button id="btn"
              label="Toggle Panel visibility"
              click="skinnableContainerPanel.visible =      !skinnableContainerPanel.visible;" />

 <s:Panel id="skinnableContainerPanel" title="Using SkinnableContainer" 
         width="500" height="300" showEffect="{showEff}"
         hideEffect="{hideEff}" >
    <s:layout>
        <s:VerticalLayout  gap="10" verticalAlign="middle" 
                           horizontalAlign="center"/>
    </s:layout>
<s:SkinnableContainer
    skinClass="com.SkinnableContainerSkin" 
    width="50%" height="50%" horizontalCenter="0"
    verticalCenter="0">
    <s:HGroup horizontalCenter="0" verticalCenter="0"  >
        <s:BorderContainer width="50" height="50"  
                           borderWeight="2"   color="0x323232" />
        <s:BorderContainer width="50" height="50"  
                           borderWeight="2" color="0x323232" />
        <s:BorderContainer width="50" height="50" 
                           borderWeight="2" color="0x323232" />
    </s:HGroup>
</s:SkinnableContainer>
</s:Panel> 
```

# git - Git、Git 拉取和转义

> ID：14506801
> 
> 赞同：3
> 
> 时间：2013-01-24T17:07:00.360
> 
> 标签：git

我正在尝试将我正在处理的分支推送到其远程分支。我收到消息：

```
error: failed to push some refs to 'website.git'
hint: Updates were rejected because the tip of your current branch is behind
hint: its remote counterpart. Merge the remote changes (e.g. 'git pull')
hint: before pushing again.
hint: See the 'Note about fast-forwards' in 'git push --help' for details. 
```

我跑过去`git pull origin`得到消息：

```
you asked to pull from the remote 'origin', but did not specify
a branch. Because this is not the default configured remote
for your current branch, you must specify a branch on the command line. 
```

运行时`git push origin branch_name`出现与上述相同的错误，所以我运行`git pull origin master`.

我有一种感觉，这不是我想要的，现在想以某种方式逃避/中止最后一个命令。我当前的屏幕显示：

```
From website.com

* branch            master     -> FETCH_HEAD
Auto-merging config/routes.rb

Merge branch 'master' of website into branch

# Please enter a commit message to explain why this merge is necessary,
# especially if it merges an updated upstream into a topic branch.
# 
# Lines starting with '#' will be ignored, and an empty message aborts
# the commit.
~                                                                                                                                                
~                                                                                                                                                
~                                                                                                                                                
~                                                                                                                                                                                                                                                                                                                                                                                                                                     

-- INSERT -- 
```

对不起，我对 git 很陌生。谁能向我解释如何逃离当前的屏幕以及它要我做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T17:44:23.713

您当前正在将位于“origin”的“master”分支上的任何新内容“合并”到本地版本的“master”分支中。当你这样做时，它会要求你解释你在用一条消息做什么。输入一些内容来说明更改是什么，然后按回车键。

为确保一切正常，请尝试以下操作。“获取”源的最新状态，拉取任何更改以确保您是最新的。提交任何新更改，然后将它们推送到服务器。“-a”提交任何已更改的内容。你可能还需要做`git add <some file that has changed>`

```
git fetch    
git pull origin master
git commit -m"my changes" -a
git push origin master 
```

# php - 使用php从channeladvisor导入大量数据

> ID：14506809
> 
> 赞同：-1
> 
> 时间：2013-01-24T17:07:17.897
> 
> 标签：php, curl

我正在从 channeladvisor 导入产品。我正在用 PHP 编写并使用 curl 进行导入（我之前使用的是 nusoap，但问题仍然存在）。我有一个客户，他有 80000 个产品。

有谁知道进口大量产品的有效方法？

这是我的导入流程：

*   我得到 100`sku`秒`GetFilteredSkuList`。
*   然后我检查`foreach`这个列表并为它们打包 10 个 curl 对象`multi_curl`并触发它们
*   我收集信息并进一步循环。
*   在我完成 100 个 sku 后，我打电话`GetFilteredSkuList`给新的 100 个
*   等等。

由于某种原因，我的进口在大约 6880 种产品后停止。它没有给我任何错误-什么都没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T17:25:46.737

1.  使用功能`set_time_limit(0)`
2.  使用功能`ignore_user_abort(true)`。忽略用户中止并允许脚本永远运行
3.  使用增加内存限制`ini_set('memory_limit','1024')`

# node.js - Express.js 的外部配置

> ID：14506810
> 
> 赞同：2
> 
> 时间：2013-01-24T17:07:20.573
> 
> 标签：node.js, express

我正在使用 Express.js 构建一个小型 Node 应用程序，并且为了使我的`server.js`文件尽可能干净，我想在外部文件中构建我的配置。这是服务器的外观：

```
// server.js
var express = require( 'express' );
var app = express();
app.enable( 'trust proxy' );

// Set application config params
require( './config.js' )( app, express );

// Load routes and start listening...
require( './routes' )( app );
app.listen( app.get( 'port' ) ); 
```

我的`config.js`文件设置了一些默认值，然后更新或覆盖`NODE_ENV`特定配置函数中的配置。除了那个讨厌的时机，一切都会好起来的。

我的路线需要访问一些配置值。有没有办法确保我的路由已加载并且我的服务器仅*在*配置完全加载后才开始侦听？有没有更好的办法？

我得到了事件循环，但我是 node/express 的新手，所以我对几乎任何事情都持开放态度。在我进行的过程中，我根据我在各种文章或文档资源中所读到的内容，将我知道我想做的事情拼凑在一起，从而弥补了这一点。我认为我在这里并不过分，但也许这过于乐观了。

**更新**

我的`config.js`.

```
module.exports = function( app, express ) {
  var config = this;

  app.configure( function() {
    app.set( 'port', 3000 );
    app.set( 'datasources',   {
      'api'   : {...},
      'mysql' : {...}
    });
    app.use( express.logger() );
    app.use( express.bodyParser() );
    app.use( express.cookieParser() );
    app.use( express.methodOverride() );
    app.use( app.router );
  });

  // dev-specific config
  app.configure( 'development', function() {
    console.log( 'Loading development configuration' );

    app.use( express.errorHandler({ dumpExceptions: true, showStack: true }) );

    // update the mysql config with a connection object
    var datasources = app.get( 'datasources' );
    var mysqlConnection = require( 'mysql' ).createConnection({...});
    datasources.mysql.connection = mysqlConnection;

    app.set( 'datasources', datasources );
  });

  // stg-specific config
  app.configure( 'staging', function() {
    console.log( 'Loading staging configuration' );

    app.use( express.errorHandler() );

    // update the mysql config with a connection object
    var datasources = app.get( 'datasources' );
    var mysqlConnection = require( 'mysql' ).createConnection({...});
    datasources.mysql.connection = mysqlConnection;

    app.set( 'datasources', datasources );
  });

  // prd-specific config
  app.configure( 'production', function() {
    console.log( 'Loading production configuration' );
    app.use( express.errorHandler() );
  });

  console.log( app.get( 'datasources' ) );
  console.log( 'Configuration loaded' );

  return config;
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T18:31:34.287

将回调分配给您的 config.js 模块，让它看起来像

```
require( './config.js' )( app, express, finish );
var finish = function(){
    // Load routes and start listening...
   require( './routes' )( app );
   app.listen( app.get( 'port' ) );
} 
```

在您的配置方法中，使用[async](https://github.com/caolan/async#parallel)之类的模块，并在最后使所有加载同步并回调函数。例子：

```
**config.js**
module.exports = function(app,express,finish){
    function loadConfig1(cb){
        fs.readFile("....", function(){ // Or someother else async function
              ...  if succesfull, cb(null);
              ...  if fail, cb("error!!!!");
         });
    }
    ....
    function complete(err, results){
         if (!err){
            finish(); // you guarantee that all the functions are completed succesfully
         }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T18:53:00.867

如果您的配置中的代码都是同步的，这应该可以工作：

```
// server.js
var express = require( 'express' );
var app = express();
var config = require( './config.js' );  // load config
app.enable( 'trust proxy' );

// -----------------------------------------------
// If the code inside your config is all synchronous this call 
// will block, which is what you want.
config(app, express );

// Load routes and start listening...
require( './routes' )( app );
app.listen( app.get( 'port' ) ); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-06-24T17:13:06.653

我目前正在开发 Express 的扩展，它允许纯 json 外部路由配置。我计划在不久的将来开源这个项目。如果有人感兴趣，我很乐意通过 Github 和 NPM 分享这个项目的早期预览

```
module.exports = {
  /**
   * settings
   */
  config:{
    "controller_directory" : "routes"
  },

  /**
   * defaults to ./routes directory
   */
  filters: {
    secure: "secure.securityListener",
    global:"secure.globalListener"
  },
  /**
   * defaults to ./routes directory
   * order matters for filters
   * filters should always contain a path which calls next();
   * router should be the final destination to a request
   *
   * possible verbs are [use, all, get, post, delete ...]
   * "use" is the default, "mount" path is stripped and is not visible to the middleware function.
   * other verbs will not strip out the "mount" path
   */
  routes: {
    global: {"filters": ["global"]},
    index:{path:"/", "controller": "index"},
    users:{path:"/users", "controller": "users", "filters": ["secure"]},
    prices:{path:"/prices", "controller": "prices"},
    software:{path:"/software", "controller": "software"},
    auth:{path:"/auth", "controller": "secure.onAuthentication", "verb": "get"}
  }

}; 
```

# sql-server-2008 - JBoss 7.1 - SQL Server - 数据源配置 (JTDS)

> ID：14506813
> 
> 赞同：3
> 
> 时间：2013-01-24T17:07:33.763
> 
> 标签：sql-server-2008, datasource, jboss7.x

我与这个问题斗争了好几天，但我一直无法解决它。我有一个装有 SQL Server 2008 R2 实例和 JBoss 7.1 的服务器（我使用的是独立配置）。我正在尝试使用 JTDS 驱动程序在应用程序服务器中配置数据源以连接到数据库。应用程序服务器正确启动，但是当我尝试通过管理控制台测试数据源时，它会输出以下错误：

```
17:49:42,117 WARN  [org.jboss.jca.core.connectionmanager.pool.strategy.OnePool] (HttpManagementService-threads - 1) IJ000604: Throwable while attempting to get a new connection: null: javax.resource.ResourceException: Co
uld not create connection
        at org.jboss.jca.adapters.jdbc.local.LocalManagedConnectionFactory.getLocalManagedConnection(LocalManagedConnectionFactory.java:277) [ironjacamar-jdbc-1.0.9.Final.jar:1.0.9.Final]
        at org.jboss.jca.adapters.jdbc.local.LocalManagedConnectionFactory.createManagedConnection(LocalManagedConnectionFactory.java:235) [ironjacamar-jdbc-1.0.9.Final.jar:1.0.9.Final]
        at org.jboss.jca.core.connectionmanager.pool.mcp.SemaphoreArrayListManagedConnectionPool.createConnectionEventListener(SemaphoreArrayListManagedConnectionPool.java:761) [ironjacamar-core-impl-1.0.9.Final.jar:1.0.
9.Final]
        at org.jboss.jca.core.connectionmanager.pool.mcp.SemaphoreArrayListManagedConnectionPool.getConnection(SemaphoreArrayListManagedConnectionPool.java:343) [ironjacamar-core-impl-1.0.9.Final.jar:1.0.9.Final]
        at org.jboss.jca.core.connectionmanager.pool.AbstractPool.getSimpleConnection(AbstractPool.java:397) [ironjacamar-core-impl-1.0.9.Final.jar:1.0.9.Final]
        at org.jboss.jca.core.connectionmanager.pool.AbstractPool.getConnection(AbstractPool.java:365) [ironjacamar-core-impl-1.0.9.Final.jar:1.0.9.Final]
        at org.jboss.jca.core.connectionmanager.pool.AbstractPool.internalTestConnection(AbstractPool.java:627) [ironjacamar-core-impl-1.0.9.Final.jar:1.0.9.Final]
        at org.jboss.jca.core.connectionmanager.pool.strategy.OnePool.testConnection(OnePool.java:88) [ironjacamar-core-impl-1.0.9.Final.jar:1.0.9.Final]
        at org.jboss.as.connector.pool.PoolOperations$TestConnectionInPool.invokeCommandOn(PoolOperations.java:121) [jboss-as-connector-7.1.1.Final.jar:7.1.1.Final]
        at org.jboss.as.connector.pool.PoolOperations$1.execute(PoolOperations.java:60) [jboss-as-connector-7.1.1.Final.jar:7.1.1.Final]
        at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:385) [jboss-as-controller-7.1.1.Final.jar:7.1.1.Final]
        at org.jboss.as.controller.AbstractOperationContext.doCompleteStep(AbstractOperationContext.java:272) [jboss-as-controller-7.1.1.Final.jar:7.1.1.Final]
        at org.jboss.as.controller.AbstractOperationContext.completeStep(AbstractOperationContext.java:200) [jboss-as-controller-7.1.1.Final.jar:7.1.1.Final]
        at org.jboss.as.connector.pool.PoolOperations.execute(PoolOperations.java:74) [jboss-as-connector-7.1.1.Final.jar:7.1.1.Final]
        at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:385) [jboss-as-controller-7.1.1.Final.jar:7.1.1.Final]
        at org.jboss.as.controller.AbstractOperationContext.doCompleteStep(AbstractOperationContext.java:272) [jboss-as-controller-7.1.1.Final.jar:7.1.1.Final]
        at org.jboss.as.controller.AbstractOperationContext.completeStep(AbstractOperationContext.java:200) [jboss-as-controller-7.1.1.Final.jar:7.1.1.Final]
        at org.jboss.as.controller.ModelControllerImpl$DefaultPrepareStepHandler.execute(ModelControllerImpl.java:466) [jboss-as-controller-7.1.1.Final.jar:7.1.1.Final]
        at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:385) [jboss-as-controller-7.1.1.Final.jar:7.1.1.Final]
        at org.jboss.as.controller.AbstractOperationContext.doCompleteStep(AbstractOperationContext.java:272) [jboss-as-controller-7.1.1.Final.jar:7.1.1.Final]
        at org.jboss.as.controller.AbstractOperationContext.completeStep(AbstractOperationContext.java:200) [jboss-as-controller-7.1.1.Final.jar:7.1.1.Final]
        at org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:121) [jboss-as-controller-7.1.1.Final.jar:7.1.1.Final]
        at org.jboss.as.controller.ModelControllerImpl$1.execute(ModelControllerImpl.java:309) [jboss-as-controller-7.1.1.Final.jar:7.1.1.Final]
        at org.jboss.as.controller.ModelControllerImpl$1.execute(ModelControllerImpl.java:299) [jboss-as-controller-7.1.1.Final.jar:7.1.1.Final]
        at org.jboss.as.domain.http.server.DomainApiHandler.processRequest(DomainApiHandler.java:294)
        at org.jboss.as.domain.http.server.DomainApiHandler.doHandle(DomainApiHandler.java:201)
        at org.jboss.as.domain.http.server.DomainApiHandler.handle(DomainApiHandler.java:208)
        at org.jboss.as.domain.http.server.security.SubjectAssociationHandler.handle(SubjectAssociationHandler.java:51)
        at org.jboss.com.sun.net.httpserver.Filter$Chain.doFilter(Filter.java:78)
        at org.jboss.sun.net.httpserver.AuthFilter.doFilter(AuthFilter.java:69)
        at org.jboss.com.sun.net.httpserver.Filter$Chain.doFilter(Filter.java:81)
        at org.jboss.sun.net.httpserver.ServerImpl$Exchange$LinkHandler.handle(ServerImpl.java:710)
        at org.jboss.com.sun.net.httpserver.Filter$Chain.doFilter(Filter.java:78)
        at org.jboss.as.domain.http.server.RealmReadinessFilter.doFilter(RealmReadinessFilter.java:54)
        at org.jboss.com.sun.net.httpserver.Filter$Chain.doFilter(Filter.java:81)
        at org.jboss.sun.net.httpserver.ServerImpl$Exchange.run(ServerImpl.java:682)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) [rt.jar:1.7.0_11]
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) [rt.jar:1.7.0_11]
        at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_11]
        at org.jboss.threads.JBossThread.run(JBossThread.java:122) [jboss-threads-2.0.0.GA.jar:2.0.0.GA]
Caused by: java.sql.SQLException: Cannot open database "SQLEXPRESS" requested by the login. The login failed.
        at net.sourceforge.jtds.jdbc.SQLDiagnostic.addDiagnostic(SQLDiagnostic.java:368)
        at net.sourceforge.jtds.jdbc.TdsCore.tdsErrorToken(TdsCore.java:2820)
        at net.sourceforge.jtds.jdbc.TdsCore.nextToken(TdsCore.java:2258)
        at net.sourceforge.jtds.jdbc.TdsCore.login(TdsCore.java:603)
        at net.sourceforge.jtds.jdbc.ConnectionJDBC2.<init>(ConnectionJDBC2.java:345)
        at net.sourceforge.jtds.jdbc.ConnectionJDBC3.<init>(ConnectionJDBC3.java:50)
        at net.sourceforge.jtds.jdbc.Driver.connect(Driver.java:184)
        at org.jboss.jca.adapters.jdbc.local.LocalManagedConnectionFactory.getLocalManagedConnection(LocalManagedConnectionFactory.java:249) [ironjacamar-jdbc-1.0.9.Final.jar:1.0.9.Final]
        ... 39 more 
```

这似乎是一个简单的身份验证问题，但用户/密码是绝对正确的！通过 SQL Server Management Studio，我可以使用以下命令正确连接到数据库：

*   服务器名称：DAN-Aladino-vs.usersad.everis.int\SQLEXPRESS
*   身份验证：SQL Server 身份验证
*   登录： aladinoDs
*   密码：aladinoDs

要配置数据源，我做了以下步骤：

**1) 在 JBoss 中，我创建了目录“modules\net\sourceforge\jtds\main”。**

在里面我放了 jtds-1.2.5.jar 和一个新的 module.xml，内容如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<module xmlns="urn:jboss:module:1.0" name="net.sourceforge.jtds">
  <resources>
    <resource-root path="jtds-1.2.5.jar"/>
        <!-- Insert resources here -->
  </resources>
  <dependencies>
    <module name="javax.api"/>
    <module name="javax.transaction.api"/>
  </dependencies>
</module> 
```

**2）我修改了standalone.xml配置文件，添加了以下内容：**

```
<datasource jndi-name="java:jboss/datasources/AladinoDS" pool-name="AladinoDS" enabled="true" use-java-context="true">
    <connection-url>jdbc:jtds:sqlserver://DAN-Aladino-vs.usersad.everis.int:1433/SQLEXPRESS</connection-url>
    <driver>JTDS</driver>
    <new-connection-sql>select 1</new-connection-sql>
    <transaction-isolation>TRANSACTION_READ_COMMITTED</transaction-isolation>
    <pool>
        <min-pool-size>5</min-pool-size>
        <max-pool-size>50</max-pool-size>
    </pool>
    <security>
        <user-name>aladinoDs</user-name>
        <password>aladinoDs</password>
    </security>
    <validation>
        <check-valid-connection-sql>select 1</check-valid-connection-sql>
    </validation>
    <timeout>
        <set-tx-query-timeout>true</set-tx-query-timeout>
        <blocking-timeout-millis>5000</blocking-timeout-millis>
        <idle-timeout-minutes>15</idle-timeout-minutes>
    </timeout>
    <statement>
        <track-statements>false</track-statements>
    </statement>
</datasource> 
```

并且，在该`<drivers>`部分：

```
<driver name="JTDS" module="net.sourceforge.jtds">
    <driver-class>net.sourceforge.jtds.jdbc.Driver</driver-class>
</driver> 
```

根据我在网上找到的，它应该是正确的，但它仍然不起作用。顺便说一句，我不想​​对数据源使用 Windows 身份验证，但我也尝试过这种方式，但没有成功。

我希望有人能在我的配置中找到问题。如果正确，可能是数据库服务器/实例配置的问题？我很困惑...通过 SQL Server Mgmt Studio 似乎一切正常。

谢谢大家，卢卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-26T15:48:54.393

（在评论和编辑中回答。请参阅[没有答案的问题，但问题在评论中解决（或在聊天中扩展）](https://meta.stackoverflow.com/questions/251597/question-with-no-answers-but-issue-solved-in-the-comments)）

OP写道：

> @Jon Skeet：SQL Server 错误日志显示以下内容：

```
01/25/2013 09:47:02,Logon,Unknown,Login failed for user 'aladinoDs'. Reason: Failed to open the explicitly specified database. 
```

> 所以，问题应该是我没有使用正确的数据库名称。
> 
> @CoolBeans：我不习惯 SQL Server（通常我使用 Oracle DB），并且我不熟悉它在数据库/实例/登录之间的区别，但是如果我使用上面的凭据成功登录到 db通过 SQL Server Mgmt Studio，为什么我不能将它们用于数据源？当我连接到数据库服务器时，我可以在 SQL Server Mgmt Studio 中看到“数据库”文件夹中的两个对象：系统数据库和 AladinoSFA2。我应该在连接字符串中使用最新的服务器名称吗？这将是我的下一次尝试。我会发布更新。
> 
> **解决了：**
> 
> 我更正了连接字符串：`<connection-url>jdbc:jtds:sqlserver://DAN-Aladino-vs.usersad.everis.int:1433/AladinoSFA2</connection-url>`
> 
> 看来我必须在连接字符串中使用单个数据库名称而不是数据库服务器名称。我真的不明白为什么使用 SQL Server Mgmt Studio 我不需要指定数据库实例名称，而只需指定数据库服务器名称，而在数据源中，相反，数据库实例名称是唯一需要的。
> 
> 但是现在一切正常。

# google-analytics - Google Analytics 电子商务跟踪 - 多个帐户

> ID：14506816
> 
> 赞同：2
> 
> 时间：2013-01-24T17:07:35.570
> 
> 标签：google-analytics, e-commerce

我们在数百个客户网站上使用 Google Analytics。每个站点都有自己的帐户，我们也有一个用于汇总数据的帐户。我们使用以下代码来跟踪两个帐户的综合浏览量。

```
<script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-12345678-1']);  //obviously fake UA numbers
_gaq.push(['_trackPageview']);
_gaq.push(
['aggregate._setAccount', 'UA-87654321-1'],
['aggregate._trackPageview']
);
(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async =         true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script> 
```

这对于跟踪访问和行为非常有效，但我不确定如何为电子商务跟踪代码实施相同类型的双重跟踪。我们使用通常的 _addTrans、_addItem 和 _trackTrans 设置。

如何调整电子商务跟踪以向两个帐户报告？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T19:13:37.890

In your code, the `aggregate.` in the `_gaq.push` calls like `aggregate._setAccount` is used to create an additional named tracker.

Just copy the ecommerce `_gaq.push` code lines, and add `aggregate.` in front of the `_addTrans`, `_addItem` and `_trackTrans` calls.

For example,

```
 _gaq.push(['_addTrans', ...parameters...]);
 _gaq.push(['aggregate._addTrans', ...parameters...]); 
```

# c# - 使用 Process.Start() 时如何在活动显示器上打开应用程序？

> ID：14506817
> 
> 赞同：1
> 
> 时间：2013-01-24T17:07:42.173
> 
> 标签：c#, .net, process.start

我在用

```
System.Diagnostics.Process.Start(ProcessInfo); 
```

从我的 Windows 窗体应用程序中在记事本中打开 TEXT 文件。

详细的代码片段是

```
ProcessStartInfo PSI = new ProcessStartInfo("notepad.exe", LogFile);
PSI.WindowStyle = ProcessWindowStyle.Normal;
System.Diagnostics.Process p = System.Diagnostics.Process.Start(PSI); 
```

但是，它会在默认桌面上打开记事本，但不会在运行主应用程序的扩展桌面上打开。

现在，问题是，如何在活动桌面上打开记事本，即当前应用程序正在运行的窗口？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T17:16:36.350

除了指定初始窗口状态（正常、隐藏等）之外，您基本上无法控制新启动的应用程序如何启动以及它在何处显示。

最好的办法是启动应用程序，然后使用它的窗口句柄告诉它移动。这一切都需要使用 P/Invoke 来调用[`MoveWindow`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633534%28v=vs.85%29.aspx). 所有这些函数的 C# 签名都在[pinvoke.net](http://pinvoke.net/)上。

这是一个非常[简单的（VB.NET）示例](http://social.msdn.microsoft.com/Forums/en-US/Vsexpressvb/thread/b22ad05b-c8d1-4bc1-bcc3-0cfe714649b6/)，显示了基本思想。在这种情况下，正如@Lloyd 指出的那样，您需要的窗口句柄是`Process.MainWindowHandle`您从`Process.Start`. 注意`Process.MainWindowHandle`不是立即填写；您通常需要调用`WaitForInputIdle`以确保实际创建了窗口。如果`MainWindowHandle`是 0，那么你会知道它为时过早。

# ruby - 为什么我的 vim 编码和 ruby 编码不一致？

> ID：14506821
> 
> 赞同：0
> 
> 时间：2013-01-24T17:08:00.657
> 
> 标签：ruby, vim, encoding

在红宝石文件中：

```
p __ENCODING__

#<Encoding:US-ASCII> 
```

在 vim 中：

```
set encoding?
encoding=utf-8 
```

这让我感到悲痛（http://stackoverflow.com/questions/14495486/ruby-syntax-error-with-multiple-language-in-hash），已修补但我仍然不明白为什么文件显示为ruby 的 ASCII 和 vim 的 utf-8。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T20:23:19.433

正如@melpomene 评论的那样，`:set encoding`告诉你 Vim 内部使用了什么编码。

`:set fileencoding`会告诉你 Vim 决定为你的文档使用什么编码。可能的值由`fileencodings`选项给出。ASCII 不是默认列表的一部分，因为它通常由列出的其他编码透明地处理。

但是你问题的那一部分让我感到困惑：

> 但我还是不明白为什么文件是 ASCII

因为看起来您*希望*该文件被解释器视为 ASCII。

无论如何，该编码指令仅由 Ruby 使用：这并不意味着文件*实际上*被编码为 ASCII 或 Vim 应该关心它并以特殊方式处理它。

简而言之，无论你的文件是否真的用 ASCII 编码，Vim 都不在乎。

那么……你到底想要什么？`fileencoding`当您打开一个所谓的 ASCII 文件时，该 vim 将其选项设置为 ASCII？将您所谓的 ASCII 文件转换为另一种编码？

***编辑***

1.  使用该指令，您明确告诉 Ruby 文件的内容必须被视为 ASCII 并且 Ruby 说“好的，那是 ASCII，如果你这么说的话。”。

2.  该指令不会更改*文件*的实际编码。它可以是 utf-8、latin1 或其他。

3.  Vim 不理解该指令。

4.  Vim 根据你应该在和中阅读`:h encoding`的一些规则选择它用于该文件的编码。`:h fileencoding``:h fileencodings`

5.  Vim 不会以特殊的“ASCII”方式处理 ASCII，它只是处理它具有 utf-8 的子集。

因此，在我们继续之前，请验证：

*   文件的编码类似于`$ file /path/to/file`

*   `fileencoding`Vim 用于该文件`:set fileencoding`

# c++ - 未定义对 Sigar 库的引用

> ID：14506826
> 
> 赞同：0
> 
> 时间：2013-01-24T17:08:16.007
> 
> 标签：c++, qt, cpu-usage, sigar

我正在编写代码来获取 Sigar 库的 CPU 使用情况，但是当我尝试编译代码时出现此错误： undefined reference to `sigar_cpu_perc_calculate(sigar_cpu_t*, sigar_cpu_t*, sigar_cpu_perc_t*)@12' 有什么问题我的代码？在我添加的 .pro 文件中

```
INCLUDEPATH += "path_to\\sigar-bin\\include"
LIBS += "path_to\\sigar-bin\\lib\\sigar-x86-winnt.lib" 
```

代码：

```
#include <QDebug>
#include <sigar.h>
#include <sigar_format.h>

int main(int argc, char *argv[])
{
    QCoreApplication a(argc, argv);

    sigar_t *sigarcpu1;
    sigar_cpu_t cpu1;
    sigar_open(&sigarcpu1);
    sigar_cpu_get(sigarcpu1, &cpu1);
    sigar_close(sigarcpu1);

    sigar_t *sigarcpu2;
    sigar_cpu_t cpu2;
    sigar_open(&sigarcpu2);
    sigar_cpu_get(sigarcpu2, &cpu2);
    sigar_close(sigarcpu2);

    sigar_cpu_perc_t perc;
    sigar_cpu_perc_calculate(&cpu1, &cpu2, &perc);
    qDebug() << perc.combined;

    return a.exec();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T17:13:50.600

试试这个：-

```
extern "C" {
#include <sigar_format.h>
} 
```

看这里：-

[http://communities.vmware.com/thread/389369](http://communities.vmware.com/thread/389369)

# python - 字母后跟一些以句点结尾的字母或数字

> ID：14506829
> 
> 赞同：0
> 
> 时间：2013-01-24T17:08:27.147
> 
> 标签：python, regex

我正在寻找创建一个 Python 正则表达式来匹配特定模式：模式总是以任何大写或小写字母开头，后面可以有任意数量的字母或数字，并且总是以句点 ( `.`) 结束。

例如，该模式将匹配`Q42.`此 HTML 代码中具有问题标签（例如：）的行：

```
<p>Q42\. Which of the following newspapers, if any, do you read on a regular 
   basis? Please select all that apply:</p>
<p>NY Times</p>
<p>Chicago Tribune</p> 
```

编辑：
我已经尝试过`[a-zA-Z]\W*\.`
对我说的是任何大写或小写字母后跟任何数字或字母大写或小写或数字后跟句点。

编辑：
我只是想测试整行是否包含这些字符。只寻找`True`or `False`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T17:39:05.010

尝试：

`[a-zA-Z][a-zA-Z0-9]*\.`

需要注意的是，`\w`将匹配字母数字字符和下划线。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T17:24:31.097

关闭：

```
\b[a-zA-Z]\w*\. 
```

应该这样做。

`\W`意思是“*除了*字母数字以外的任何字符，所以你需要相反的，`\w`.

`\b`是一个单词边界，确保我们从单词的开头开始匹配。

# algorithm - 检查输入字符串是否是正确的 RPN 表达式的最快方法是什么？

> ID：14506831
> 
> 赞同：6
> 
> 时间：2013-01-24T17:08:31.140
> 
> 标签：algorithm

我遇到了一个任务，它让您检查作为参数传递给您的方法/函数的字符串是否是反向波兰表示法意义上的正确语句。它可以包含小写字母、操作符号和整数。有没有比分别读取每个字符并实际尝试评估整个表达式更快的方法来检查它？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-24T17:21:43.467

您不必评估整个表达式，但您确实需要将其拆分为标记，并且您必须知道每个运算符的化合价（即它需要多少个操作数）。为简单起见，设操作数的化合价为 0；然后执行以下操作：

```
Set stack_size to 0;
For Each token In expression:
    Set stack_size to stack_size + 1 - valence(token)
    If stack_size <= 0: Report failure
If stack_size == 1: Report success
Else              : Report failure 
```

用于一元减号的示例`_`。

```
expression:     3 4 + 1 * _
stack_size:   0 1 2 1 2 1 1 -> success

expression:     2 3 4 + 1 * _
stack_size:   0 1 2 3 2 3 2 2 -> failure (not 1 at the end)

expression:     2 3 + + 1 * _
stack_size:   0 1 2 1 0       -> failure (stack_size <= 0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T17:13:42.517

您可以使用解析表来识别反向波兰符号。它需要查看每个字符，但速度很快。

# node.js - 节点单元测试 - 模拟对 solr 的调用

> ID：14506837
> 
> 赞同：0
> 
> 时间：2013-01-24T17:08:53.250
> 
> 标签：node.js, unit-testing, solr, nodeunit

对于我的应用程序，我使用了 solr-node 客户端
我如何通过模拟对 solr 模块的调用来编写单元测试？
有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T01:04:43.553

尝试使用[JsMockito](http://jsmockito.org/) - 这是一个基于 JavaScript 的模拟框架，允许您在项目中模拟对象、函数调用和返回。

# ios - 以编程方式设置 UILabel 文本模糊（整数帧值）

> ID：14506845
> 
> 赞同：2
> 
> 时间：2013-01-24T17:09:11.627
> 
> 标签：ios, uilabel

我有一个视图，我以编程方式在`viewDidLoad`. 该标签上的文字模糊不清。编码：

```
- (void)viewDidLoad {
    [super viewDidLoad];
    self.view.backgroundColor = [UIColor groupTableViewBackgroundColor];

    [self setTitle:tAddSystemScreenTitle];
    CGRect rect = CGRectMake(10,0,300,80);
    UILabel *messageLabel = [[UILabel alloc] initWithFrame:rect];

    [messageLabel setOpaque:NO];
    if (shouldShowControlForRemoteAccess) {
        [messageLabel setText:kRemoteAccessInfoMessage];
        [messageLabel setNumberOfLines:2];
    } else {
        [messageLabel setText:kOneSystemAlreadyAssociatedAlertString];
        [messageLabel setNumberOfLines:4];

        rect.size.height += 30;
        [messageLabel setFrame:rect];

        rect = dataTable.frame;
        rect.origin.y += 30;
        rect.size.height -= 30;
        [dataTable setFrame:rect];
    }
    NSLog(@"x: %f, y: %f, w: %f, h: %f", messageLabel.frame.origin.x, messageLabel.frame.origin.y, messageLabel.frame.size.width, messageLabel.frame.size.height);
    [messageLabel setBackgroundColor:[UIColor clearColor]];
    [messageLabel setShadowColor:[UIColor blackColor]];
    [messageLabel setTextColor:[UIColor blackColor]];
    [messageLabel setTextAlignment:UITextAlignmentLeft];
    [messageLabel setShadowOffset:CGSizeMake(0,-1)];
    [self.view addSubview:messageLabel];

    NSLog(@"x: %f, y: %f, w: %f, h: %f", self.view.frame.origin.x, self.view.frame.origin.y, self.view.frame.size.width, self.view.frame.size.height);

    [dataTable setScrollEnabled:NO];

    [messageLabel release], messageLabel = nil;
} 
```

当我检查帧值是什么时，我得到以下信息：

```
x: 10.000000, y: 0.000000, w: 300.000000, h: 80.000000 
```

检查相同的`self.view`获取：

```
x: 0.000000, y: 20.000000, w: 320.000000, h: 460.000000 
```

在这个问题上我能找到的[唯一](https://stackoverflow.com/questions/2047294/blurry-uilabel-as-programmatic-subview-of-uitableviewcell-contentview) [其他](https://stackoverflow.com/questions/8065892/blurry-uilabel-when-added-programatically) [问题](https://stackoverflow.com/questions/1927815/blurry-uilabel-text-in-accessory-view-of-mkannotationview)表明我需要整数的帧，但正如你所看到的，我已经有了整数。我尝试了他们推荐的解决方案，`CGRectIntegral(rect)`用来替换我刚刚拥有的所有地方`rect`，但这不起作用。如何防止文字模糊？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T04:41:42.450

我有同样的问题。就我而言，原因是我在父视图上调用 setShouldRasterize 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T04:47:41.580

也许是因为你的黑色文本带有一个略微偏移的黑色阴影，这使它看起来很模糊。尝试删除你的 shadowColor 和 shadowOffset 线，看看它的外观。

# qt - 使用 QImage 和 OpenCV 显示图像

> ID：14506850
> 
> 赞同：2
> 
> 时间：2013-01-24T17:09:21.133
> 
> 标签：qt, image-processing, opencv, qt5, qimage

> **可能重复：**
> [将 IplImage IPL_DEPTH_32S 转换为 QImage Format_RGB32 的最快方法](https://stackoverflow.com/questions/11371540/fastest-method-to-convert-iplimage-ipl-depth-32s-to-qimage-format-rgb32)

我在使用 Qt 显示图像时遇到了一个奇怪的问题...我使用 OpenCV 读取视频帧并将其从 BGR 转换为 RGB。

```
video >> frameOrg;
cvtColor(frameOrg,frameOrg,CV_BGR2RGB); 
```

然后我使用裁剪样式在图像上选择一个 ROI..

```
frame = frameOrg(roi); 
```

我通过信号/插槽将选定的 ROI 发送到小部件以进行显示..`paintEvent()`显示器使用

```
image = QImage((const unsigned char*)frame.data,frame.cols,
               frame.rows,QImage::Format_RGB888);

QRectF target(0.0,0.0,image.width(),image.height());
QRectF source(0.0,0.0,image.width(),image.height());
QPainter painter(this);
painter.drawImage(target,image,source); 
```

但是，每当我选择 ROI 的奇数值宽度和高度的某种组合时，我都会得到一个奇怪的显示，如下所示...... **原始图像**

![显示时的完整图像](../Images/28064311c1724e820c117912b2afaef5.png)

**所选投资回报率的图像**

![所选投资回报率的图像](../Images/4213728ff2c8b9905a743e826e49be52.png)

我需要做一些修改吗？windows 7显示有问题吗？正确显示时相同的投资回报率`imshow()`......任何人帮助我......谢谢提前......

**实际工作的代码**

```
image = QImage((const unsigned char*)frame.data,frame.cols,
               frame.rows,frame.step,QImage::Format_RGB888); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T18:13:25.307

这可能是一个填充问题。你还没有说你的`frame`变量的类型是什么，但是`IPLImage`有一个`widthStep`字段。将此构造函数用于 QImage

```
QImage ( uchar * data, int width, int height, int bytesPerLine, Format format ) 
```

`widthStep`并作为`bytesPerLine`参数传递。

# c# - 如何将通知从 PHP 发送到 C# 服务？

> ID：14506852
> 
> 赞同：2
> 
> 时间：2013-01-24T17:09:32.143
> 
> 标签：c#, php, mysql, windows-services

我有一个用 C# 编写的用于处理数字文档的 Windows 服务，以及一个用 PHP 编写的 Web 应用程序。我需要能够通知 C# 服务新文档已准备好进行处理。

目前，C# 服务每 10 秒读取一次 MySQL 数据库，以查看是否有新任务要执行。这会导致 Web 应用程序的响应延迟 10 秒。我希望能够在文档准备好后立即触发 C# 服务。

我正在寻找一个答案，让 PHP 可以毫不拖延地通知 C# 服务。

以下是我的一些可能的想法；

*   在 PHP 和 C# 之间使用共享内存对象，并让 C# 中的线程等待该对象发出信号。这可以用PHP吗？
*   PHP 使用 localhost 上的套接字连接到 C#，发送一个 nak 并断开连接。这对我来说似乎效率低下。
*   将 MySQL 配置为使用内存中的表，并让 C# 服务每秒查询一次该表。
*   在 C# 中创建某种使用 XML 或 SOAP 的 Web 服务是否困难，并且通过 PHP 调用该服务会有任何延迟（+1 秒）吗？

这就是我能想到的。也许应该有某种*标准*的方式来完成，我只是不知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T17:24:22.087

我将继续尝试回答这个问题。

在您的服务中，添加一个 OnCustomCommand 处理程序，如本问题所述以触发服务工作：[如何从 .NET 代码向 .NET windows 服务发送自定义命令？](https://stackoverflow.com/questions/3695245/how-to-send-a-custom-command-to-a-net-windows-service-from-net-code)

创建一个单独的 C# 应用程序，它只是将命令发送到您的服务并通过 exec() 函数从 PHP 调用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T17:24:40.283

在 WCF 中创建一个 REST 外观以在针对 / 的 POST 上触发您的 c# 服务是非常简单的。可以根据部署的性质对安全性进行分层。

[http://msdn.microsoft.com/en-us/library/bb412178.aspx](http://msdn.microsoft.com/en-us/library/bb412178.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T17:29:40.390

您可以在您的服务中自托管一个[ASP.NET WebAPI](http://code.msdn.microsoft.com/ASPNET-Web-API-Self-Host-30abca12)

# mysql - 从具有多个条件的多个表中进行选择

> ID：14506853
> 
> 赞同：0
> 
> 时间：2013-01-24T17:09:35.817
> 
> 标签：mysql, sql

我有一个包含三个表的 MySQL 数据库：`sample`, `method`, `compound`.

`sample`有以下列：`id(PK)(int)`, `date(date)`, `compound_id(int)`, `location(varchar)`, `method(int)`,`value(float)`

`method`具有以下列：`id(PK)(int)`,`label(varchar)`

并且`compound`有：`id(PK)(int)`, `name(varchar)`,`unit(varchar)`

我正在尝试生成一个 SQL 命令，该命令仅针对以下条件提取唯一行：

*   日期 ( `sample.date`)
*   化合物名称 ( `compound.name`)
*   位置 ( `sample.location`)
*   方法 ( `sample.method`)

但是，我想在标签中替换某些`sample`列而不是数字：

*   `sample.compound_id`匹配到`compound.id`具有对应的`compound.name`和`compound.unit`

我尝试查询的第一个 SQL 命令是：

```
SELECT sample.id, sample.date, compound.name, sample.location, method.label, sample.value, compound.unit
FROM sample, compound, method 
WHERE sample.date = "2011-11-03"
AND compound.name = "Zinc (Dissolved)"
AND sample.location = "13.0"
AND method.id = 1; 
```

上述命令的输出：

```
id      date        name            location    label       value   unit
1       2011-11-03      Zinc (Dissolved)    13.0        (1) Indivi...   378.261     μg/L
5       2011-11-03      Zinc (Dissolved)    13.0        (1) Indivi...   197.917     μg/L
9       2011-11-03      Zinc (Dissolved)    13.0        (1) Indivi...   92.4051     μg/L 
```

但是当我查看`sample`并比较`sample.id`返回的内容时：

```
id      date    compound_id     location     method     value   
1       2011-11-03  13          13.0         1          378.261
5       2011-11-03  14          13.0         1          197.917
9       2011-11-03  47          13.0         1          92.4051 
```

其中`compound.id`47 对应于`compound.id`47 和`compound.name`“锌（溶解）”。化合物 ID #13 和 #14 分别是“铜（溶解）”和“铜（总）”。

因此，它似乎返回满足`sample.date`和`sample.location`不考虑`compound.name`. 鉴于上述标准，我知道我的数据库应该只返回一行，但我得到的一些行与我指定的匹配`sample.id`完全不同。`sample.compound_id``compound.name`

我想以`SELECT`第一行中的列结束，以与我编写它们的顺序相同。此代码适用于我正在用 Python/Tkinter 编写的小型数据库查看器/报告器程序，并且依赖于统一的列。我用来初始化程序数据的代码按我的预期工作：

```
SELECT sample.id, sample.date, compound.name, sample.location, method.label, sample.value, compound.unit
FROM sample, compound, method 
WHERE sample.compound_id = compound.id
AND sample.method = method.id; 
```

它将每个唯一的行`sample`替换为`sample.compound_id`to`compound.name`和`sample.method`to`method.label`并在`compound.unit`最后添加。

问题 #1：我需要如何重组我的查询，以便它只返回满足特定条件的行？

问题 #2：最终我将需要`sample.locations`一次指定多个。`OR`这就像为我需要的每个单独的位置添加一个声明一样简单吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T17:21:42.033

```
SELECT sample.id, sample.date, compound.name, sample.location, method.label, sample.value, compound.unit
FROM sample 
INNER JOIN compound ON compound.id = sample.compound_id 
INNER JOIN method ON method.id = sample.method
WHERE sample.date = '2011-11-03'
AND compound.name = 'Zinc (Dissolved)'
AND sample.location = "13.0"
AND method.id = 1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T17:30:24.543

既然我已经弄清楚了第一个问题，那么我想出了我的第二个问题：

```
SELECT sample.id, sample.date, compound.name, sample.location, method.label, sample.value, compound.unit
FROM sample 
INNER JOIN compound ON compound.id = sample.compound_id 
INNER JOIN method ON method.id = sample.method
WHERE sample.date = '2011-11-03'  
AND compound.name = 'Zinc (Dissolved)'
AND sample.location IN ("13.0", "22.0")
AND method.id = 1; 
```

并且只需`OR`在括号内为其他位置添加 s 即可。

# php - php根据值合并数组

> ID：14506857
> 
> 赞同：0
> 
> 时间：2013-01-24T17:09:45.677
> 
> 标签：php, arrays, loops

我正在尝试从数组循环向用户发送电子邮件。每封电子邮件可以出现在多个数组元素中，但除了电子邮件之外，其余元素是不同的。

我在下面有这段代码，它试图创建两个新数组 - 一个只包含电子邮件，而另一个包含其他值，例如“名称”等。我最终需要的是一个具有以下内容的数组：

```
$array_final(
             [0]email=>'whatever@com'=> (name1, name 2),
             [1]email=>"second@.com"=>name3,name4
            ); 
```

**这是我的数组和循环：**

```
$array_emailedinfo_email = array();//will hold just email
$array_emailedinfo = array();//will hold email and other date; 

foreach($array_expiredmeetingscos as $mail) {

 if(isset($checkAgainst[$mail[1]])) {

    $array_emailedinfo_email[] = array(
                                             "email" => $checkAgainst[$mail[1]]
                                              );
    $array_emailedinfo[] = array( 
                                        "email" => $checkAgainst[$mail[1]], 
                                        "name" => $mail[2]
                                        );
        }
     } 
```

我想我可能能够在`foreach`循环本身中获得最终数组，但还没有弄清楚。我已经尝试过`array_merge()`等但没有运气，顺便说一句。

任何想法？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T20:02:23.090

让我们有两个数组：

```
$emails = array(array('email' => 'foo@example.com'), array('email' => 'bar@example.com');
$emails_info = array(array('email' => 'foo@example.com', 'name' => 'Alice'), array('email' => 'bar@example.com', 'name' => 'Bob')); 
```

现在您想循环`$emails`并在以下位置找到适当的值`$emails_info`：

```
foreach ($emails as $email) {
  $info = array_filter($emails_info, function($item) use ($email) {
    return $item['email'] == $email['email'];
  });

  // because $emails_info[index]['email'] might not be unique, $info is array of such items
  print_r($info);
} 
```

但我认为用给定的电子邮件索引一个或两个数组会容易得多，例如

```
//variable from your question
$array_emailedinfo['foo@example.com'] = array(array('email' => 'foo@example.com', 'name' => 'Alice')); 
```

**编辑**

在数组中找到适当项目的函数：

```
function find_in_emails($emails_info, $email) {
    foreach ($emails_info as $email_info) {
        if ($email_info['email'] == $email)
            return $email_info;
    }
    //not found...
    return array();
}
//usage
//...loop...
$info = find_in_emails($emails_info, $email['email']);
//...endloop... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T19:47:42.327

这是我修复它的方法。请注意，在新代码中，$emails 与 $$array_emailedinfo_email 相同，$emails_info 与原始问题中的 $array_emailedinfo 相同。

```
$array_all_expired_info = array();
$i=0;
$temparray = array();
foreach ($emails as $email) {
if (is_array($email)) {
    $array_all_expired_info[$i] = $email;
    foreach($emails_info as $all_info) {
        if (in_array($email["email"],$all_info)) {
            $array_all_expired_info[$i][] = $all_info;
        }
}
}
$i++; 
```

}//为了

最终的数组接近我需要的：第一个元素只是电子邮件，其余的是各个元素内的数组。所以现在我可以遍历所有元素，抓取电子邮件，然后抓取相应的数据（每封电子邮件可能是多个）并简单地发送电子邮件。

这一切来之不易。但是在这个过程中学到了一些关于php数组的东西。很值得。

谢谢。

# linux - 如何grep日志文件中变量的下一个实例？

> ID：14506862
> 
> 赞同：2
> 
> 时间：2013-01-24T17:09:56.580
> 
> 标签：linux, bash, parsing, grep

所以我正在尝试解析 FTP 日志并查看某个用户是否安全登录。到目前为止，我有这个在用户登录后拉下几行

```
cat proftpd.log.2 | grep -B 3 "USER $sillyvariable" 
```

这是它创建的示例输出

```
::ffff:127.0.0.0 UNKNOWN ftp [04/Jan/2013:11:03:06 -0800] "AUTH TLS" 234 -
::ffff:127.0.0.0 UNKNOWN ftp [04/Jan/2013:11:03:06 -0800] "USER $sillyvariable" 331 - 
```

现在这是我想要的一个完美示例，它显示**AUTH TLS** Message 和**IPs match**。然而，情况并非总是如此，因为许多用户不断地登录和退出，并且大多数时候输出是混乱的。

有没有办法我可以`USER $sillyvariable`在前一行中查找并找到包含“AUTH TLS”的他/她匹配的 IP，以便我可以知道他们安全登录？我想你可以说我想 grep 用户，然后向后 grep 看看他们源自（匹配 IP）的连接是否安全。我有点坚持这一点，真的可以使用一些帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T17:20:15.560

```
$ grep -B3 'USER $sillyvariable' proftpd.log.2 |
  tac | awk 'NR==1 {IP=$1} $1==IP {print}' | tac
::ffff:127.0.0.0 UNKNOWN ftp [04/Jan/2013:11:03:06 -0800] "AUTH TLS" 234 -
::ffff:127.0.0.0 UNKNOWN ftp [04/Jan/2013:11:03:06 -0800] "USER $sillyvariable" 331 - 
```

这用于`tac`反转 grep 结果中的行。然后，它会查找 IP 地址与该行中的 IP 地址匹配的所有`USER`行。最后它`tac`再次运行以将行放回原始顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T23:50:03.590

我意识到我参加这个聚会已经很晚了，但是我之前对 AUTH 声明可能超过 3 行的评论让我感到疑惑。

我采取了一种略有不同的方法，其中我做出了最小的假设（基于对日志文件内容的有限了解）：

1.  每个 IP 地址有一个用户（如果他们位于防火墙后面，则可能不是这样）
2.  对于每个 AUTH 条目，都应该有一个来自同一 IP 地址的“好”用户条目
3.  在日志文件中有条目的 IP 地址的排序列表将显示对发出“错误”请求的任何 IP 地址的“用户”请求多于“授权”请求

如果这些假设是合理/正确的，那么一个简单的 bash 脚本可以很好地为您提供您想要的内容（这是一个未正确登录的用户列表 - 这并不是您所要求的):

```
#!/bin/bash
# first, find all the "correct" IP addresses that did the login "right", and sort by IP address:
grep -F "AUTH TLS" $1 | awk '{print $1}' | sort > goodLogins

# now find all the lines in the log file with USER and sort by IP address
grep USER $1 | awk '{print $1}' | sort > userLogins

# now see if there were user logins that didn't correspond to a "good" login:
echo The following lines in the log file did not have a corresponding AUTH statement:
echo
sdiff goodLogins userLogins | grep "[<>]" | awk '{print $2 ".*USER"}' > badUsers
grep -f badUsers $1
echo ----- 
```

请注意，这会留下您可能想要删除的三个临时文件（goodLogins、userLogins、badUsers）。我假设您知道如何使用上述代码创建一个文本文件，将其设置为可执行文件 ( `chmod u+x scrubLog`)，并使用日志文件的名称作为参数 ( `./scrubLog proftpd.log.2`) 运行它。

享受！

PS - 我不确定您所说的“正确登录”是什么意思，但还有其他方法可以强制执行良好的行为。例如，您可以阻止端口 21，因此只有 sftp（端口 22）请求通过，您可以阻止匿名 ftp，......但这不是您要问的。

# python - 使用 python 在多个现有文件夹中创建新文件夹

> ID：14506864
> 
> 赞同：-1
> 
> 时间：2013-01-24T17:10:06.747
> 
> 标签：python, directory

我正在寻找一种在多个现有文件夹中创建新文件夹的方法。例如，我有文件夹 a、b、c.. 等，我想在每个现有文件夹中创建一个新文件夹，并使用 python 脚本将新文件夹命名为 a1、b1、c1、.. 等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T19:11:25.177

尝试循环浏览您的文件夹列表，而不是传入列表。这不是最干净的方法，但您可以执行以下操作：

```
parents = [p1, p2, p3]
childern = [c1, c2, c3]

for p in parents:
   for c in children:
      os.mkdir(os.path.join(p,c)) 
```

# sql - 如何在选择查询中执行存储过程

> ID：14506871
> 
> 赞同：57
> 
> 时间：2013-01-24T17:10:49.807
> 
> 标签：sql, sql-server, sql-server-2008, stored-procedures

```
SELECT col1,
       col2,
       col3,

EXEC GetAIntFromStoredProc(T.col1) AS col4
     FROM Tbl AS T
     WHERE (col2 = @parm) 
```

如何在 SQL Server 2008 中编写此 SQL 查询？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-01-24T18:01:06.883

谢谢@twoleggedhorse。

这是解决方案。

1.  首先我们创建了一个函数

    ```
    CREATE FUNCTION GetAIntFromStoredProc(@parm Nvarchar(50)) RETURNS INTEGER

    AS
    BEGIN
       DECLARE @id INTEGER

       set @id= (select TOP(1) id From tbl where col=@parm)

       RETURN @id
    END 
    ```

2.  然后我们做选择查询

    ```
    Select col1, col2, col3,
    GetAIntFromStoredProc(T.col1) As col4
    From Tbl as T
    Where col2=@parm 
    ```

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2017-05-12T21:54:32.737

函数在选择循环中很容易调用，但它们不允许您运行插入、更新、删除等操作。它们仅对查询操作有用。您需要一个存储过程来操作数据。

因此，这个问题的真正答案是您必须通过“游标”遍历 select 语句的结果，并从该循环中调用该过程。这是一个例子：

```
DECLARE @myId int;
DECLARE @myName nvarchar(60);
DECLARE myCursor CURSOR FORWARD_ONLY FOR
    SELECT Id, Name FROM SomeTable;
OPEN myCursor;
FETCH NEXT FROM myCursor INTO @myId, @myName;
WHILE @@FETCH_STATUS = 0 BEGIN
    EXECUTE dbo.myCustomProcedure @myId, @myName;
    FETCH NEXT FROM myCursor INTO @myId, @myName;
END;
CLOSE myCursor;
DEALLOCATE myCursor; 
```

请注意，这`@@FETCH_STATUS`是一个为您更新的标准变量。这里的其余对象名称是自定义的。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-07-18T16:43:14.653

您可以创建一个与您的 proc 输出匹配的临时表并插入其中。

```
CREATE TABLE #Temp (
    Col1 INT
)

INSERT INTO #Temp
    EXEC MyProc 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-01-24T17:52:20.220

只要您不在存储过程中执行任何 INSERT 或 UPDATE 语句，您可能希望将其设为函数。

存储过程用于由外部程序或按时间间隔执行。

这里的答案将比我更好地解释它：

[SQL Server 中的函数与存储过程](https://stackoverflow.com/questions/1179758/function-vs-stored-procedure-in-sql-server)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2020-09-30T11:57:10.850

“不可能”。您可以使用此查询来执行此操作。在这里初始化

```
declare @sql nvarchar(4000)='' 
```

使用参数设置您的 sp 的值和执行命令

```
SET @sql += ' Exec spName @param'
EXECUTE sp_executesql @sql,  N'@param type', @param = @param 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2020-05-13T05:07:02.243

“不可能”。您可以使用函数而不是存储过程。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2022-02-10T20:26:30.350

不要忘记，如果您只是想将 SP 用作一次性查询来真正快速地检查某些内容，您所要做的就是将 SP 的内部内容拉出并将其粘贴到新的查询窗口中，然后做任何您想做的事情就像那时一样，因为它不再是 SP。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-12-18T12:28:20.327

***创建一个动态视图并从中获取结果.......***

```
CREATE PROCEDURE dbo.usp_userwise_columns_value
(
    @userid BIGINT
)
AS 
BEGIN
        DECLARE @maincmd NVARCHAR(max);
        DECLARE @columnlist NVARCHAR(max);
        DECLARE @columnname VARCHAR(150);
        DECLARE @nickname VARCHAR(50);

        SET @maincmd = '';
        SET @columnname = '';
        SET @columnlist = '';
        SET @nickname = '';

        DECLARE CUR_COLUMNLIST CURSOR FAST_FORWARD
        FOR
            SELECT columnname , nickname
            FROM dbo.v_userwise_columns 
            WHERE userid = @userid

        OPEN CUR_COLUMNLIST
        IF @@ERROR <> 0
            BEGIN
                ROLLBACK
                RETURN
            END   

        FETCH NEXT FROM CUR_COLUMNLIST
        INTO @columnname, @nickname

        WHILE @@FETCH_STATUS = 0
            BEGIN
                SET @columnlist = @columnlist + @columnname + ','

                FETCH NEXT FROM CUR_COLUMNLIST
                INTO @columnname, @nickname
            END
        CLOSE CUR_COLUMNLIST
        DEALLOCATE CUR_COLUMNLIST  

        IF NOT EXISTS (SELECT * FROM sys.views WHERE name = 'v_userwise_columns_value')
            BEGIN
                SET @maincmd = 'CREATE VIEW dbo.v_userwise_columns_value AS SELECT sjoid, CONVERT(BIGINT, ' + CONVERT(VARCHAR(10), @userid) + ') as userid , ' 
                            + CHAR(39) + @nickname + CHAR(39) + ' as nickname, ' 
                            + @columnlist + ' compcode FROM dbo.SJOTran '
            END
        ELSE
            BEGIN
                SET @maincmd = 'ALTER VIEW dbo.v_userwise_columns_value AS SELECT sjoid, CONVERT(BIGINT, ' + CONVERT(VARCHAR(10), @userid) + ') as userid , ' 
                            + CHAR(39) + @nickname + CHAR(39) + ' as nickname, ' 
                            + @columnlist + ' compcode FROM dbo.SJOTran '
            END

        EXECUTE sp_executesql @maincmd
END

-----------------------------------------------
SELECT * FROM dbo.v_userwise_columns_value 
```

# javascript - JavaScript 函数显然没有被调用

> ID：14506872
> 
> 赞同：1
> 
> 时间：2013-01-24T17:10:52.507
> 
> 标签：javascript, html5-canvas, kineticjs

我有一个带有 HTML5 画布的网页，其中显示了许多图像。通过使用 kineticJS 库，我可以在画布周围拖放图像。

但是，我使用的是我下载并保存在本地的库的副本，因为我想对其功能进行一两次更改。（例如，在我更改它之前，当在画布上的图像上检测到点击时，以前由 Kinetic 库以外的任何东西绘制到画布上的任何东西都将从画布中清除。我删除了这个调用clear()，因为我在画布上画了一些其他的东西，我想保留在那里。）

现在，我想在我的代码中添加一些功能，以便在检测到已绘制到画布上的图像之一上单击时，已单击图像的文本描述将出现在外部网页上画布。

我有以下功能，我用它来检测是否在其中一个图像上检测到点击：

```
function isClickOnImage(event){
    var clickX = event.clientX;
    var clickY = event.clientY;

    //var imageCheckIteration = 0;
    while(imageCheckIteration < sources.length){
        if((clickX > sources[imageCheckIteration].x && clickX < sources[imageCheckIteration].x + imageWidth) &&
        (clickY > sources[imageCheckIteration].y && clickY < sources[imageCheckIteration].y + imageHeight)){
            /*This is where I need to print the variable that holds the text I want to display, but I need to display its contents
            outside the canvas, in the <p></p> tags below. */
            console.log("Click on image detected");
            document.getElementById("tipsParagraph").innerHTML = tips[imageCheckIteration];
        } else {
            document.getElementById("tipsParagraph").innerHTML = "";
        }
    }
} 
```

画布上显示的图像都存储在一个名为“源”的数组中。因此，我的代码的这一部分中的 while 循环应该检查单击的 x 和 y 坐标是否位于已绘制图像的位置，从数组中的第一个图像开始，一直到最后。

如果循环确定单击位于已绘制图像的位置，则控制台应记录消息“检测到单击图像”，并且我的`tipsParagraph`变量的值应更新为存储在其中的任何值'tips' 数组，与图像数组中被点击的图像位置相同（图像数组被称为 'sources'）。（存储在'tips'数组的每个位置的文本对应于'sources'数组中相同位置的图像）。

正如我之前所说，我使用的是 KineticJS 库的本地副本，并且我已经编辑了它的“mousedown”功能，现在它看起来像这样：

```
_mousedown: function(evt) {
    this._setUserPosition(evt);
    var obj = this.getIntersection(this.getUserPosition());
    if(obj && obj.shape) {
        var shape = obj.shape;
        this.clickStart = true;
        shape._handleEvent('mousedown', evt);
        isClickOnImage(evt);
    }

    //init stage drag and drop
    if(Kinetic.DD && this.attrs.draggable) {
        this._initDrag();
    }
} 
```

即我添加了对我的`isClickOnImage`函数的调用。

但是，当我单击画布上的图像时，我页面的“tipsParagraph”部分中的文本不会更新。“tipsParagraph”只是我给`<p>`显示在画布下方的标签的 ID。

这是我为“tipsParagraph”编写的代码行：

```
<p id = "tipsParagraph">This is where the text will be displayed. <script>$('#tipsParagraph').text(tips[imageCheckIteration]);</script></p> 
```

我假设我添加到这一行的 JS 将确保显示的文本是来自tips 数组的文本，无论变量值`imageCheckIteration`确定在什么位置。但是，出于某种原因，在我的页面上显示的提示始终是提示数组中的第一个元素。这是页面加载后立即显示的元素（即在单击图像之前），并且在检测到单击图像时不会更改。所以在我看来，我的`isClickOnImage`函数永远不会被`mousedown`库中的函数调用，而是`tipsParagraph`在页面加载时立即设置的值，并且在此之后不会更改，无论用户与页面的交互如何...

谁能指出我为什么会这样？我做错了什么，我需要做什么才能使显示的文本成为与用户单击的图像相对应的文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T17:37:15.070

看看

```
function isClickOnImage(event){
 var clickX = event.clientX;
 var clickY = event.clientY;

 //var imageCheckIteration = 0;  // <-- why is this 0 commented out?
 while(imageCheckIteration < sources.length){ // <-- imageCheckIteration is never incremented, so it never increases, hence the check never occurs
    if((clickX > sources[imageCheckIteration].x && clickX < sources[imageCheckIteration].x + imageWidth) &&
    (clickY > sources[imageCheckIteration].y && clickY < sources[imageCheckIteration].y + imageHeight)){
        /*This is where I need to print the variable that holds the text I want to display, but I need to display its contents
        outside the canvas, in the <p></p> tags below. */
        console.log("Click on image detected");
        document.getElementById("tipsParagraph").innerHTML = tips[imageCheckIteration];
    } else {
        document.getElementById("tipsParagraph").innerHTML = "";
    }
 }
} 
```

尝试类似：用于控制递增的 for 循环结构：

```
for( var i=0; i<sources.length; i++){ // this will go through all items in the sources array
    if((clickX > sources[i].x ... ) //and other checks
} 
```

# html - Hotmail 内容后的空格

> ID：14506876
> 
> 赞同：1
> 
> 时间：2013-01-24T17:11:02.803
> 
> 标签：html, html-email, space, html-table, hotmail

我正在设计一个 e-blast，在 Hotmail 中对其进行测试时，它在`<td></td>`标签之间的内容底部添加了额外的空间。

它在所有其他客户端中看起来都很好。

我已经添加了`display: block; margin:0`

我还尝试在样式标签之间的电子邮件头部添加以下内容，但我认为 Cheetahmail 只是忽略了 CSS。

```
.ExternalClass, .ExternalClass p, .ExternalClass span, 
.ExternalClass font, .ExternalClass td, 
.ExternalClass div 
{
   line-height: 100%;
} 
table td 
{
    border-collapse: collapse;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T22:24:48.040

使用`<font>`标签来设置您的文本样式。我相信`<span>`也可以正常工作。我发现 double`<br>`比`<p>`标签的间距更一致。

添加`border="0" cellpadding="0" cellspacing="0"`到您的`<table>`标签。你不需要`border:collapse;`

`display:block;`除非您浮动它们，否则将所有图像设置为，这在大多数情况下可能不是最佳做法。不需要`display:block;`为表设置。

此外，Gmail 会忽略任何非内联 CSS，因此要么将其内联，要么使用内联工具，例如[Premailer](http://premailer.dialect.ca/)。

# python - 在 Python 脚本中包含“请求”模块

> ID：14506877
> 
> 赞同：0
> 
> 时间：2013-01-24T17:11:06.557
> 
> 标签：python

我编写的 Python 脚本（一个 .py 文件）依赖于[requests](http://docs.python-requests.org/en/latest/index.html)模块，但是目标机器没有安装 requests。如何将两者打包在一起？目标机器是一个 CentOS Linux 机器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T17:12:58.603

使用`distutils`基于 - 的安装脚本，然后使用`pip`或安装`easy_install`。

这样您就可以指定`requests`为依赖项，它将与您的脚本一起安装：

```
from distutils.core import setup

setup(
    # various package metadata fields

    install_requires=[
        'requests',
    ],
) 
```

有关更多信息，请参阅[声明依赖项](http://packages.python.org/setuptools/setuptools.html#declaring-dependencies)和[Python 打包用户指南](https://packaging.python.org/en/latest/)。

如果由于某种原因您无法使用此基础架构，只需解`requests`压缩脚本旁边的 tarball，并将脚本的父目录添加到`sys.path`：

```
import sys
import os

parentdir = os.path.dirname(os.path.abspath(__file__))
sys.path.insert(0, parentdir)

# rest of your imports go here
import requests 
```

# android - 带有图像的警报对话框

> ID：14506881
> 
> 赞同：1
> 
> 时间：2013-01-24T17:11:19.183
> 
> 标签：android, android-imageview, android-alertdialog

我想创建一个对话框，它会出现并且一个人可以选择八个选项之一。所以我发现，最好的将是“警报对话框”类。我知道，如何用这个类创建一个对象，它显示一个可供选择的文本选项列表。但我决定，现在显示文本选项，但图像，所以我创建了这样的东西：

`AlertDialog.Builder builder = new AlertDialog.Builder(StartGameActivity.this);`

 ````
 builder.setTitle(R.string.pickColor);

           builder.setItems(R.array.colorArray, new DialogInterface.OnClickListener() {

               public void onClick(DialogInterface dialog, int which) {
                      it's not important what is inside this function
                   } 
```` 

`}`

但是当我运行我的应用程序并出现警告对话框时 - 我只看到文本，我认为这是我的图像所在文件夹的路径（类似于：res/drawable-xhpi/image_name.jpeg）

我一直在寻找解决这个问题的方法，但是，我发现这个没用。我读过，我可能应该使用 ListAdapter 或 LayoutInflater，但我不确定如何使用它。谁能解释我如何在 AletDialog 中制作图像列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T17:30:03.793

假设您的数组是资源 id 的列表...

```
AlertDialog.Builder builder = new AlertDialog.Builder(StartGameActivity.this);
builder.setTitle(R.string.pickColor);
ListView lv = new ListView(getActivity());
lv.setAdapter(new ArrayAdapter<String>(getActivity(), -1) {
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        Resources res = getResources();
        TypedArray colorArray = res.obtainTypedArray(R.array.colorArray);
        Drawable drawable = colorArray.getDrawable(position);
        ImageView v = new ImageView(getActivity());
        v.setImageDrawable(drawable);
        return v;
    }

    @Override
    public int getCount() {
        Resources res = getResources();
        TypedArray colorArray = res.obtainTypedArray(R.array.colorArray);
        return colorArray.length();
    }
});
lv.setOnItemClickListener(new OnItemClickListener() {

    @Override
    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
        // do click stuff
    }

});
builder.setView(lv); 
```

# php - 使用连续网页

> ID：14506885
> 
> 赞同：-4
> 
> 时间：2013-01-24T17:11:28.417
> 
> 标签：php, javascript, html, css, web

我有一个网站，其中的图像在一段时间后不断变化。但是，我想放置的不是图像，而是网站页面，该页面也会不断更改和刷新以获取最新数据。

## 代码：

```
<div class="bannerbg">
        <div class="container clearfix">
                <div class="flexslider" >
                <ul class="slides">
                    <li>
                        <img src="images/fslide01.jpg" alt="" />
                        <p class="flex-caption">I am Caption!</p>
                    </li>
                    <li>
                        <a href="#"><img src="images/fslide02.jpg" alt="" /></a>
                    </li>
                    <li>
                        <img src="images/fslide03.jpg" alt="" />
                        <p class="flex-caption">I am Caption!</p>
                    </li>
                    <li>
                        <img src="images/fslide04.jpg" alt="" />
                    </li>

                    <li>
                        <img src="images/fslide05.jpg" alt="" />
                    </li>

                    <li>
                        <img src="images/fslide06.jpg" alt="" />
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <!-- /Slider --> 
```

* * *

而不是这些图片 fslide01/02/03/04/05/06.jpg 我想使用像 www.yahoo.com/www.facebook.com/www.google.com/etc 这样的网页，我也应该刷新以获取最新视图.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T17:15:17.007

您可以使用`iframes`，尽管某些网站（例如 Google）不允许在 iframe 中显示他们的网站。我想其他流行的网站也会这样做。

```
<li>
    <iframe src="somesite.com/index.html"></iframe>
    <p class="flex-caption">I am Caption!</p>
</li> 
```

MDN 链接：[https ://developer.mozilla.org/en-US/docs/HTML/Element/iframe](https://developer.mozilla.org/en-US/docs/HTML/Element/iframe)

# java - MongoDB java驱动在分片环境下可以做db.collection.group()

> ID：14506889
> 
> 赞同：9
> 
> 时间：2013-01-24T17:11:36.843
> 
> 标签：java, mongodb

正如 Mongodb 手册所述，“db.collection.group() 方法不适用于分片集群。在分片环境中使用聚合框架或 map-reduce。” 但是今天，令人惊讶的是，我发现它可以在 Java 驱动程序中使用。

在我的测试中，分片集合称为“垃圾邮件”，其中包含 4,001,633 个文档。它被分成 7 个分片。

集合中的每个文档都有这样的格式。

```
shard1:PRIMARY> db.spams.findOne()
{
    "IP" : "113.162.134.245",
    "_id" : ObjectId("4ebe8c84466e8b1a56000028"),
    "attach" : [ ],
    "bot" : "Lethic",
    "charset" : "iso-8859-1",
    "city" : "",
    "classA" : "113",
    "classB" : "113.162",
    "classC" : "113.162.134",
    "content_type" : [ ],
    "country" : "Vietnam",
    "cte" : "7bit",
    "date" : ISODate("2011-11-11T00:07:12Z"),
    "day" : "2011-11-11",
    "from_domain_a" : "domain157939.com",
    "geo" : "VN",
    "host" : "",
    "lang" : "unknown",
    "lat" : 16,
    "long" : 106,
    "sequenceID" : "user648",
    "size" : 1060,
    "smtp-mail-from_a" : "barriefrancisco@domain157939.com",
    "smtp-rcpt-to_a" : "jaunn@domain555065.com",
    "subject_ta" : "nxsy8",
    "uri" : [ ],
    "uri_domain" : [ ],
    "x_p0f_detail" : "2000 SP4, XP SP1+",
    "x_p0f_genre" : "Windows",
    "x_p0f_signature" : "65535:105:1:48:M1402,N,N,S:."
} 
```

我想做的是在“2012-01-01T00:00:00Z”之后找到带有“日期”的文档，并按字段“classA”对它们进行分组并计算每组中的金额。所以我写了如下的Java代码：

```
final private String mongoUrl = "172.16.10.61:30000";
final private String databaseName = "test";
final private String collecName = "spams";
private DBCollection collection = null;
private DB db;

public void init(){
    Mongo mongo = null;
    try {
        mongo = new Mongo(new DBAddress(mongoUrl));
    } catch (MongoException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (UnknownHostException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    db = mongo.getDB(databaseName);
    db.requestStart();
    collection = db.getCollection(collecName);
}

public void group_range_normal(boolean printResult){
    BasicDBObject key = new BasicDBObject("classA", true);
    BasicDBObject initial = new BasicDBObject("cou", 0);

    DateFormat formatter = new SimpleDateFormat("yyyy-MM-dd'T'hh:mm:ss'Z'");
    try {
        Date fromDate = formatter.parse("2012-01-01T00:00:00Z");

        BasicDBObject cond = new BasicDBObject();
        cond.put("date", new BasicDBObject("$gt", fromDate));

        String reduce = "function(obj,pre){pre.cou++}";
        Long runBefore = Calendar.getInstance().getTime().getTime();
        BasicDBList returnList = (BasicDBList) collection.group(key, cond, initial, reduce);
        Long runAfter = Calendar.getInstance().getTime().getTime();
        DBObject errors = db.getLastError();
        if(printResult){
            for (Object o : returnList) {
                System.out.println(o.toString());
            }
        }

        System.out.println("[Group Range Normal]: " + (runAfter - runBefore) + " ms.");
    } catch (ParseException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

结果看起来不错：

```
 ------Group Range Normal------
{ "classA" : "72" , "cou" : 3.0}
{ "classA" : "85" , "cou" : 21.0}
{ "classA" : "115" , "cou" : 23.0}
{ "classA" : "217" , "cou" : 25.0}
{ "classA" : "46" , "cou" : 31.0}
{ "classA" : "117" , "cou" : 58.0}
{ "classA" : "122" , "cou" : 20.0}
{ "classA" : "195" , "cou" : 7.0}
{ "classA" : "190" , "cou" : 44.0}
{ "classA" : "94" , "cou" : 83.0}
{ "classA" : "87" , "cou" : 22.0}
{ "classA" : "95" , "cou" : 53.0}
{ "classA" : "178" , "cou" : 108.0}
{ "classA" : "219" , "cou" : 37.0}
{ "classA" : "76" , "cou" : 1.0}
{ "classA" : "101" , "cou" : 1.0}
{ "classA" : "111" , "cou" : 20.0}
{ "classA" : "194" , "cou" : 34.0}
{ "classA" : "93" , "cou" : 31.0}
{ "classA" : "98" , "cou" : 2.0}
{ "classA" : "180" , "cou" : 45.0}
{ "classA" : "211" , "cou" : 17.0}
{ "classA" : "92" , "cou" : 31.0}
{ "classA" : "177" , "cou" : 21.0}
{ "classA" : "189" , "cou" : 23.0}
{ "classA" : "89" , "cou" : 44.0}
{ "classA" : "78" , "cou" : 12.0}
{ "classA" : "77" , "cou" : 18.0}
{ "classA" : "125" , "cou" : 22.0}
{ "classA" : "200" , "cou" : 16.0}
{ "classA" : "74" , "cou" : 4.0}
{ "classA" : "58" , "cou" : 21.0}
{ "classA" : "80" , "cou" : 12.0}
{ "classA" : "79" , "cou" : 14.0}
{ "classA" : "186" , "cou" : 24.0}
{ "classA" : "105" , "cou" : 2.0}
{ "classA" : "41" , "cou" : 11.0}
{ "classA" : "213" , "cou" : 8.0}
{ "classA" : "220" , "cou" : 10.0}
{ "classA" : "201" , "cou" : 17.0}
{ "classA" : "176" , "cou" : 7.0}
{ "classA" : "112" , "cou" : 46.0}
{ "classA" : "118" , "cou" : 38.0}
{ "classA" : "124" , "cou" : 11.0}
{ "classA" : "82" , "cou" : 19.0}
{ "classA" : "59" , "cou" : 24.0}
{ "classA" : "120" , "cou" : 14.0}
{ "classA" : "114" , "cou" : 17.0}
{ "classA" : "182" , "cou" : 33.0}
{ "classA" : "39" , "cou" : 7.0}
{ "classA" : "90" , "cou" : 7.0}
{ "classA" : "109" , "cou" : 48.0}
{ "classA" : "81" , "cou" : 13.0}
{ "classA" : "27" , "cou" : 16.0}
{ "classA" : "84" , "cou" : 27.0}
{ "classA" : "187" , "cou" : 14.0}
{ "classA" : "91" , "cou" : 25.0}
{ "classA" : "203" , "cou" : 7.0}
{ "classA" : "168" , "cou" : 1.0}
{ "classA" : "123" , "cou" : 25.0}
{ "classA" : "62" , "cou" : 5.0}
{ "classA" : "67" , "cou" : 4.0}
{ "classA" : "2" , "cou" : 48.0}
{ "classA" : "113" , "cou" : 44.0}
{ "classA" : "221" , "cou" : 5.0}
{ "classA" : "121" , "cou" : 26.0}
{ "classA" : "188" , "cou" : 35.0}
{ "classA" : "83" , "cou" : 17.0}
{ "classA" : "119" , "cou" : 21.0}
{ "classA" : "61" , "cou" : 17.0}
{ "classA" : "218" , "cou" : 9.0}
{ "classA" : "49" , "cou" : 15.0}
{ "classA" : "173" , "cou" : 2.0}
{ "classA" : "14" , "cou" : 6.0}
{ "classA" : "159" , "cou" : 4.0}
{ "classA" : "1" , "cou" : 6.0}
{ "classA" : "151" , "cou" : 4.0}
{ "classA" : "181" , "cou" : 2.0}
{ "classA" : "116" , "cou" : 14.0}
{ "classA" : "202" , "cou" : 17.0}
{ "classA" : "42" , "cou" : 2.0}
{ "classA" : "171" , "cou" : 6.0}
{ "classA" : "222" , "cou" : 6.0}
{ "classA" : "209" , "cou" : 1.0}
{ "classA" : "210" , "cou" : 5.0}
{ "classA" : "175" , "cou" : 8.0}
{ "classA" : "71" , "cou" : 3.0}
{ "classA" : "212" , "cou" : 11.0}
{ "classA" : "24" , "cou" : 6.0}
{ "classA" : "110" , "cou" : 18.0}
{ "classA" : "31" , "cou" : 9.0}
{ "classA" : "139" , "cou" : 1.0}
{ "classA" : "196" , "cou" : 2.0}
{ "classA" : "183" , "cou" : 11.0}
{ "classA" : "193" , "cou" : 3.0}
{ "classA" : "207" , "cou" : 5.0}
{ "classA" : "108" , "cou" : 1.0}
{ "classA" : "75" , "cou" : 1.0}
{ "classA" : "106" , "cou" : 3.0}
{ "classA" : "86" , "cou" : 9.0}
{ "classA" : "96" , "cou" : 1.0}
{ "classA" : "174" , "cou" : 2.0}
{ "classA" : "158" , "cou" : 2.0}
{ "classA" : "197" , "cou" : 4.0}
{ "classA" : "141" , "cou" : 6.0}
{ "classA" : "65" , "cou" : 1.0}
{ "classA" : "223" , "cou" : 1.0}
{ "classA" : "184" , "cou" : 2.0}
{ "classA" : "37" , "cou" : 2.0}
{ "classA" : "88" , "cou" : 10.0}
{ "classA" : "149" , "cou" : 1.0}
{ "classA" : "130" , "cou" : 1.0}
{ "classA" : "99" , "cou" : 1.0}
{ "classA" : "208" , "cou" : 1.0}
[Group Range Normal Result]: { "serverUsed" : "/127.0.0.1:27017/172-16-10-61:30000" , "n" : 0 , "lastOp" : { "$ts" : 0 , "$inc" : 0} , "connectionId" : 17496 , "err" :  null  , "ok" : 1.0}
[Group Range Normal Time]: 85 ms. 
```

java驱动的版本是mongo-2.9.1.jar。MongoDB 是 2.2.2 版本。

我也尝试过使用 shell，但它提醒我 group 不适用于分片集群。

这是否意味着[db.collection.group()](http://docs.mongodb.org/manual/reference/command/group/)可以在分片集群下工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-08T15:56:39.487

确实，MongoDb 提到了

> db.collection.group() 方法不适用于分片集群。

并且必须

> 在分片环境中使用聚合框架或 map-reduce。

但是您没有使用`db.collection.group()`mongo shell 中使用的 javascript 函数。您正在使用 java 驱动程序。实际上，驱动程序的[Javadocs](http://api.mongodb.org/java/2.9.1/com/mongodb/DBCollection.html#group%28com.mongodb.DBObject,%20com.mongodb.DBObject,%20com.mongodb.DBObject,%20java.lang.String,%20java.lang.String%29)建议`DBCollection.group(...)`使用聚合框架。这就是它起作用的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-10T10:14:10.303

我遵循 DBCollection.group 源代码只是为了确定......

[https://github.com/mongodb/mongo-java-driver/blob/master/src/main/com/mongodb/GroupCommand.java?source=cc](https://github.com/mongodb/mongo-java-driver/blob/master/src/main/com/mongodb/GroupCommand.java?source=cc)

DBCollection.group 不使用聚合框架。

[https://github.com/mongodb/mongo-java-driver/blob/2.10.x/src/main/com/mongodb/DBCollection.java](https://github.com/mongodb/mongo-java-driver/blob/2.10.x/src/main/com/mongodb/DBCollection.java)

```
/**
* Applies a group operation
* @param key - { a : true }
* @param cond - optional condition on query
* @param reduce javascript reduce function
* @param initial initial value for first match on a key
* @param finalize An optional function that can operate on the result(s) of the reduce function.
* @return
* @throws MongoException
* @see <a href="http://www.mongodb.org/display/DOCS/Aggregation">http://www.mongodb.org/display/DOCS/Aggregation</a>
*/
    public DBObject group( DBObject key , DBObject cond , DBObject initial , String reduce , String finalize ){
        GroupCommand cmd = new GroupCommand(this, key, cond, initial, reduce, finalize);
        return group( cmd );
    } 
```

# java - 将 jtable 中的已编辑值更新到 mysql 数据库

> ID：14506890
> 
> 赞同：0
> 
> 时间：2013-01-24T17:11:38.637
> 
> 标签：java, mysql, swing

```
JTable.setModel(DbUtils.resultSetToTableModel(resultaat)); 
```

// 将 JTable 中的已编辑值更新到 mysql 数据库的最简单方法是什么。

-Jtable 监听器？上面的代码只是数据插入JTable的方式

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T17:33:36.137

我会使用 TableModelListener。查看[官方教程](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#modelchange) 了解更多详情

# playframework - 玩 2.1 getControllerInstance 的用法？

> ID：14506891
> 
> 赞同：2
> 
> 时间：2013-01-24T17:11:40.307
> 
> 标签：playframework

GlobalSettings 上 getControllerInstance 的预期使用模式是什么？是否可以在没有依赖注入框架的情况下使用它？

签名是`getControllerInstance[A](controllerClass: Class[A]): A`

因此，据我了解，这会在使用`@`前缀指定的任何路由上调用，并且您必须返回该类型控制器 ( `A`) 的实例。但是，如果`A`它的参数化类型`Class`在运行时会受到类型擦除，对吗？我如何知道要求使用哪个控制器类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T00:53:58.717

我发现这种方式看起来非常非 Scala，但对我有用。

```
override def getControllerInstance[A](controllerClass: Class[A]): A = {
  if (controllerClass == classOf[CardsService]) ComponentsRegistry.cardsService.asInstanceOf[A]
  else super.getControllerInstance(controllerClass)
} 
```

我绝对同意它很丑，并且很高兴看到更好的解决方案。

不幸的是，这里不可能使用模式匹配来使这段代码更惯用：[如何在 Scala“匹配”语句中匹配类？](https://stackoverflow.com/questions/7157143/how-can-i-match-classes-in-a-scala-match-statement)

# c++ - Turbo C++ 和 GCC（在 Windows 上使用代码块）以不同的方式评估相同的三元表达式

> ID：14506895
> 
> 赞同：0
> 
> 时间：2013-01-24T17:11:54.843
> 
> 标签：c++, gcc, operator-precedence, turbo-c++

我有这个表情

```
(*p % 3 != 0) ? *p = (*p) + 1 : *p = (*p) + 2; 
```

在 Turbo C++ 中，如果 *p 为 11，则计算结果为 14；如果 *p 为 33，则计算结果为 35

在 GCC (Windows) 中，它分别评估为 12 和 35，这是预期的

用括号括起来的格式如下：

```
(*p % 3 != 0) ? (*p = (*p) + 1) : (*p = (*p) + 2); 
```

这种差异有什么解释吗？我猜它归结为编译器使用的优先顺序的差异，但无法查明根本原因

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T17:17:58.763

三元条件运算符在 C 和 C++ 中是不同的。表达式`a ? b : c = d`被解析...

*   就像`(a ? b : c) = d`在 C 中一样，并且

*   就像`a ? b : (c = d)`在 C++ 中一样。

# php - Levenshtein 距离作为全文的替代方案

> ID：14506896
> 
> 赞同：-1
> 
> 时间：2013-01-24T17:12:03.050
> 
> 标签：php, regex

我正在尝试实现 Levenshtein 距离以从字符串中提取单词。我有一个 mysql 表来比较每个单词或单词组合。这是进行的最佳方式还是您可以提出其他替代方案？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T17:37:09.867

你试过吗，我认为是一个很好的解决方案希望它有帮助

# c# - DDD 值对象相等，== vs .Equals()

> ID：14506901
> 
> 赞同：1
> 
> 时间：2013-01-24T17:12:19.523
> 
> 标签：c#, nhibernate, domain-driven-design, equality, value-objects

所以我有一个值`object`，（随意说钱），我想为它实现平等。我知道`==`和`.Equals()`（引用和数据相等）的预期/默认行为。

不过，在这种情况下，我希望能够比较两个对象，并说它们对于计算是等效的（例如 1m 和 3 ft 是等效的）但是对于持久性（使用`NHibernate`，`isDirty`我认为取决于相等性）、用户显示和选择货币，我希望它们被认为是不同的。

在这种情况下，我是否应该

1.  `==`和`.Equals()`（应该做什么）有不同的行为，
2.  无论我想在哪里检查等效性，只需检查每个属性（意味着额外的代码）
3.  实现类似的方法`.IsEquivalent()`（我不想做后者）
4.  我想念的其他东西

是否有我应该遵循的最佳实践/模式？谢谢

编辑：我收到了一些关于改变汇率的回应。为了清楚起见，所以更新。让我们说身高，而不是货币

*   我想澄清一些假设：
*   //忽略：值对象包含十进制金额，字符串/类货币
*   // 忽略：汇率不变。
*   // 忽略：类货币知道它与其他货币的汇率
*   值对象包含十进制数量，字符串/类单位
*   班级单位知道它与另一个单位的转换
*   我不打算扩大费率/转换等

我更关心实践和模式，而不是实施货币。基本上，对人的身高采用相同的方法，其中身高是一个值对象，（{1,m} 到 {3,ft}，其中 1m 始终“等于”/“等价于”到 3ft）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T17:15:49.940

我不会将 1.0 美元视为*等于*0.63 英镑。为了检查货币价值是否相等，您需要的信息不仅仅是两个值 - 您还需要当前汇率等。尤其如此，因为相同的两个值*不会始终相等*, 如果两个值永远相等，则相等应该始终为真。

因此，诸如 之类的方法`AreEquivalentMonitaryValues()`似乎是合适的——尤其是考虑到需要额外的信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T17:22:17.273

由于您需要不同的相等定义，具体取决于您想要使用的上下文`IEqualityComparer`。

正如[Reed 建议](https://stackoverflow.com/a/14506977/1159478)类型本身的平等应该真正意味着“永远和永远平等”而不是当前汇率平等，但拥有 IEqualityComparer 只是意味着“从这个比较器的角度来看，它们是平等的” . 从那里你可以让你的`ExchangeRate`类型，或者给定汇率的东西，能够创建一个代表*给定汇率*`IEqualityComparer<Money>`相等的对象。然后可以使用该相等比较器来比较各种类型的货币是否相等。

 *另一种方法完全是创建“不变货币”，并提供您的类`ToInvariant`和`FromInvariant`方法，以便非不变货币不相等（永远），并且不变货币可以相等，尽管产生不变值的货币。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T17:17:50.820

创建一个`MoneyExchangeRates`具有方法的类`IsWorthApproximatelyTheSame(Money m1, Money m2)`。

汇率会随着时间而变化，不要让它们成为全局可变状态。*

# logging - glassfish JUL 中的多个应用程序记录到不同的日志文件？

> ID：14506902
> 
> 赞同：1
> 
> 时间：2013-01-24T17:12:19.977
> 
> 标签：logging, glassfish-3

我使用 java.util.logging 并在 glassfish 服务器中有多个战争应用程序。我希望 JUL 为每次战争记录到不同的文件（目前 glassfish 将所有内容记录到 server.log）。我知道使用 log4j 或其他日志记录模块很容易做到这一点，但我想坚持使用 JUL。（不想讨论 JUL 是否是我的最佳选择）。可能吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:12:58.783

可以将不同的 FileHandler 附加到 Logger。

如果你有一个普通的记录器：

```
private final static Logger LOGGER = Logger.getLogger(Something.class.getName()); 
```

添加一个新的 FileHandler：

```
Handler fh = new FileHandler("/home/file.log");
LOGGER.addHandler(fh); 
```

日志语句将以某种 XML 格式写入文件...

# sql-server - SSRS 报告呈现的查询计划在哪里

> ID：14506903
> 
> 赞同：3
> 
> 时间：2013-01-24T17:12:20.160
> 
> 标签：sql-server, sql-server-2008, tsql, stored-procedures, sql-execution-plan

嗨，我有一个简单的问题。但这又引出了另一个问题。我想删除我运行的存储过程的查询计划。所以我使用

```
exec dbo.uspNameOfProc 
```

然后使用查询检查计划追逐

```
SELECT [text], cp.size_in_bytes, plan_handle
FROM sys.dm_exec_cached_plans AS cp CROSS APPLY 
     sys.dm_exec_sql_text(plan_handle)
where [text] like '%uspNameOfProc%' 
```

我还缺少什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T17:30:37.107

RUN`exec dbo.uspNameOfProc`然后运行[​​sp_who3](http://sqlserverplanet.com/dba/a-better-sp_who2-using-dmvs-sp_who3)找出它在哪个 spid 下运行。

```
Then run USE master;
GO
SELECT * FROM sys.dm_exec_requests
WHERE session_id = YourSPID;
GO 
```

这将为您提供计划句柄。查看执行计划运行。

```
USE master;
GO
SELECT * FROM sys.dm_exec_query_plan (YourPlanHandleID);
GO 
```

然后，如果您想从缓存中清除计划，请使用它。

```
DBCC FREEPROCCACHE (YourPlanHandleID);
GO 
```

希望有帮助。UPDATE* *** * 确保在单独的查询窗口上执行这些操作，以免改变执行计划。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T17:57:01.220

从 sys.dm_exec_procedure_stats 获取计划句柄（因为您使用的是存储过程）的稍微简单的方法。类似于（来自您的数据库）：

```
select plan_handle
from sys.dm_exec_procedure_stats
where database_id = db_id()
   and object_id = object_id('dbo.uspNameOfProc'); 
```

# git - Git：将更改移出主分支

> ID：14506910
> 
> 赞同：35
> 
> 时间：2013-01-24T17:12:38.183
> 
> 标签：git, git-branch, master

基本问题，但这一直发生在我身上：

*   在 a 中进行更改`working-branch`
*   切换到`master`
*   `git merge working-branch`
*   `git push`
*   `cap deploy`（到分期）
*   泡一杯新茶

然后我回来想别的东西并开始做一些改变......虽然还在主人身上。

有什么简单的方法：

1.  防止对 master 进行直接编辑（可能是警告）
2.  将所有编辑移至`working-branch`并清除`master`，以便我可以继续编辑`working-branch`
3.  将编辑旋转到一个全新的分支`new-working-branch`然后丢弃`working-branch`？

冒险尝试在[本页](http://longair.net/blog/2009/04/16/git-fetch-and-merge/)“分支”部分的后半部分进行推荐，但这只是抹去了我所有的编辑！？！也许是因为两个分支上的 after`git branch dubious-experiment`和`git checkout master`the是相同的（在 master 上不是“干净”）。`git status`所以`git reset --hard <SHA1sum>`消除了两者的所有变化！？！

```
 git branch dubious-experiment

  M---N-----O----P---Q ("master" and "dubious-experiment")

  git checkout master

  # Be careful with this next command: make sure "git status" is
  # clean, you're definitely on "master" and the
  # "dubious-experiment" branch has the commits you were working
  # on first...

  git reset --hard <SHA1sum of commit N> 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-01-24T23:03:58.963

根据您的描述，我假设您尚未提交任何更改 - 对吗？

如果是，这是您的答案：

### 如何防止直接编辑母版

您需要在编辑器中进行设置，但这可能会很困难。在提示符和编辑器中显示当前分支有很大帮助。

### 如何将更改移动到新分支`new-working-branch`然后丢弃`working-branch`

```
git checkout -b new-working-branch
git add …
git commit -m "mycommit" 
```

由于您尚未向 master 提交任何内容，因此您无需更改 master 上的任何内容。如果您愿意，现在可以丢弃您的工作分支。

### 如何将更改移至`working-branch`

```
git checkout -b temp-branch
git add …
git commit -m "mycommit" 
git rebase --onto working-branch master
git checkout working-branch
git reset --hard temp-branch
git branch -d temp-branch 
```

如果您的更改与 master 上的任何更改不冲突，但不与工作分支中的任何更改冲突，则可以更简单地完成此操作：

```
git stash
git checkout working-branch
git stash pop 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-24T18:07:55.147

如果您已经将更改提交到`master`但没有推送到任何地方...

为最后的更改创建一个新分支

```
git checkout -b newfeat master 
```

`working-branch`在分支顶部重放所有更改（移动提交）

```
git rebase --onto working-branch origin/master newfeat 
```

更改为`master`分支并将其重置为上次推送的状态

```
git checkout master
git reset --hard origin/master 
```

此时你有：

*   `master`指向最后推送的提交 ( `origin/master`)
*   `working-branch`从未改变
*   一个`newfeat`包含所有新提交的新分支，位于`working-branch`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T17:16:43.493

我用于类似的情况：

```
git branch -f <branch-name>
git checkout <branch-name> 
```

或者

```
git checkout -B <branch-name> 
```

.

两种变体都将分支移动`branch-name`到您当前的提交，而无需重新设置您的树。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T17:20:06.820

我一般推荐以下 Git 设置：

```
git config push.default nothing 
```

有了这个，您至少必须在推送时命名分支。它不会阻止您在本地提交到 master，但是当您意识到自己拥有时，您可以将这些提交移动到分支而不影响其他任何人。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-24T17:18:12.427

养成`$ git status`在实际执行会修改某些内容的 git 命令之前输入的习惯。

鉴于此，您可能已经编辑了文件但没有将其签入，因为您将`git status`在提交之前运行。在这种情况下，如果你只是切换分支然后提交，git 会做正确的事情。

如果您*已经*向 master 提交了提交，那么只需在分支之间移动文件，如下所示：

```
 $ git checkout --patch master <somefile> 
```

如果您只是要将同一个文件与它合并，您实际上不必重置 master ，但由于大概您还没有推送任何内容，您应该重置到您的远程跟踪分支......

```
$ git reset master origin/master
$ git reset stage origin/stage # whatever 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-01-24T18:07:09.003

**1.防止直接编辑master（可能警告）**

你不是唯一一个想要这个的人。我遇到的最好的想法是将 git 分支直接放在你的 shell 提示符中。我的提示如下所示：

```
[user@host directory:git_branch] 
```

我还为 git_branch 条目着色，所以很明显我一直在做什么。 [Stack Overflow 上的这](https://stackoverflow.com/questions/7295011/showing-git-branch-in-shell-prompt) [两个](https://stackoverflow.com/questions/7304120/in-my-bash-prompt-git-ps1-is-telling-me-something-is-wrong-but-what)链接应该有助于您的提示。

**2\. 将所有编辑移至工作分支并清除母版，以便我可以继续在工作分支上进行编辑**

或者

**3\. 将编辑旋转到一个全新的分支 new-working-branch 然后丢弃 working-branch？**

这些实际上是同一个问题 - 如何将更改从 master 移到分支上，无论是旧分支还是新分支。而你自己的答案是正确的。尽管乍一看，假设您在 master 上，您可以更简单地运行：

```
git branch new_branch
git reset --hard origin/master 
```

我更喜欢将 master 重置为 origin/master 而不是担心特定的提交 SHA。但是您的步骤基本上是正确的。至于为什么您丢失了更改，我不得不认为当您重置 master 时错误地没有指向 Q 的分支指针。没有其他解释是有道理的。同样，使用分支 shell 提示符将有助于避免这些错误。此外，我非常喜欢使用 gitk 或 git log --graph 在我移动它们之前验证我的分支在哪里。由于我不能在工作中轻松使用 gitk，因此我在 .gitconfig 中有一个别名，称为“graph”，它本质上是它的命令行版本：

```
[alias]
    graph = log --graph --all --date=short --pretty=format':%C(yellow)%h%Cblue%d%Creset %s %Cgreen %aN, %ad%Creset' 
```

这将在最左侧显示图表，黄色的提交 SHA，蓝色的分支，白色的提交消息，绿色的作者和日期。当然，这可以根据自己的喜好进行修改。

[编辑使上述命令更简单]

===============================

**回应以下评论：**

从...开始

```
A-B < origin/master
   \
    C-D < master 
```

现在执行`git checkout -b new_branch`

```
A-B < origin/master
   \
    C-D < master, new_branch 
```

现在结帐大师，`git checkout master`. 请注意，`git checkout -b new_branch && git checkout master`这与`git branch new_branch`您已经在 master 上一样。我编辑了上面的答案以反映这一点。

现在将 master 重置为 origin/master，`git reset --hard origin/master`

```
A-B < master, origin/master
   \
    C-D < new_branch 
```

因为您有一个指向 D 的分支 (new_branch)，所以不会丢失任何更改。如果我犯了错误，请详细说明在哪里。

# hibernate - 使用@NoTransaction 时如何创建新事务？

> ID：14506911
> 
> 赞同：1
> 
> 时间：2013-01-24T17:12:40.770
> 
> 标签：hibernate, jpa, transactions, playframework, playframework-1.x

```
@NoTransaction
public static void myAction() {
  // Can I do anything here to start a transaction myself?
} 
```

我想到的一种解决方法是创造一份工作。还有一个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T19:15:10.197

看看 JPAPlugin.startTx(readOnly) - 也许您可以直接使用它或从中获取代码。但这确实让我想知道你为什么要这样做？

我认为创建工作听起来是一个更好的主意。

# php - 获取数据库的多个列

> ID：14506912
> 
> 赞同：-1
> 
> 时间：2013-01-24T17:12:47.557
> 
> 标签：php, mysql, pdo

我需要获取数据库的一整列并且只获取该列，并将其作为数组返回。我正在使用`$qarr1 = $stmt->fetchAll(PDO::FETCH_COLUMN);`，效果很好。`fetchAll()`我现在需要从该数据中提取第二列并将其保存为单独的数组，但由于光标问题，我不能用于此操作。我对 PHP 还是很陌生，不太了解光标的整个概念，而且我很难理解[`fetch()`](http://php.net/manual/en/pdostatement.fetch.php). 有人能够解释我可以做什么而不是使用`fetchAll()`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T17:18:27.983

您可以尝试使用`$stmt->fetchAll(PDO::FETCH_ASSOC);` ，但如果您真的想避免，`fetchAll()`那么只需遍历每一行。

```
$arr = array();
while($row = $stmt->fetch(PDO::FETCH_ASSOC)) {
  $arr[] = $row;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-01T17:34:25.737

我认为最好的方法是使用`PDO::FETCH_NUM`抓取所有类似于`FETCH_ASSOC`但不是关联索引的结果，您将拥有数字索引，然后使用 php 函数`array_column(myArray, columnNumber)`，这样您就可以将每一列抓取到您想要的任何变量。这里有一个代码示例：

```
// grab all columns and put index numbers for each column
$allColumns = $user_database->fetchAll(PDO::FETCH_NUM);

// grab first column
$con = array_column($allColumns, 0);
// grab second column
$gan = array_column($allColumns, 1);

// this will output the variables so you can see what was grabbed   
echo '<pre>$con:  '; var_dump($con); 
echo '<pre>$gan:  '; var_dump($gan); 
```

我希望这有帮助。

# file-upload - 无法获取上传文件中的内容？

> ID：14506915
> 
> 赞同：0
> 
> 时间：2013-01-24T17:13:08.927
> 
> 标签：file-upload, dart

我采用了以下问题的代码形式：

[如何在 Dart 中上传文件？](https://stackoverflow.com/questions/13298140/how-to-upload-a-file-in-dart)

客户代码

```
void main(){
     InputElement uploadInput = query('#uploadFile');
     uploadInput.on.change.add((e) {
     // read file content as dataURL
     final files = uploadInput.files;
     if (files.length == 1) {
              final file = files[0];
              final reader = new FileReader();
              reader.on.load.add((e) {
                     sendFile(reader.result);
              });
              reader.readAsText(file);
     }
  }); 
}

sendFile(dynamic data) {
    final req = new HttpRequest();
    req.on.readyStateChange.add((Event e) {
      if (req.readyState == HttpRequest.DONE &&
         (req.status == 200 || req.status == 0)) {
         window.alert("test successful");
      }
    });
    req.open("POST", "http://127.0.0.1:8080/upload");
    req.send(data);
    print(req.response);
} 
```

带有细微更改的服务器代码如下所示：

```
void UploadFile(HttpRequest request, HttpResponse response) {
     //some logic
     _readBody(request, (body) {
       var logFile = new File('test.txt');
       var out = logFile.openOutputStream(FileMode.WRITE);
       out.writeString(body);
       out.close();
       response.statusCode = HttpStatus.CREATED;
       response.contentLength = 0;
       response.outputStream.close();
     });
}

_readBody(HttpRequest request, void handleContent(String body)) {
     String contentString = ""; // request body byte data
     final completer = new Completer();
     final textFile = new StringInputStream(request.inputStream);
     textFile.onData = (){
              print("inside data");
              contentString = contentString.concat(textFile.read());
     };
     textFile.onClosed = () {
           completer.complete("");
     };
     textFile.onError = (Exception e) {
           print('exeption occured : ${e.toString()}');
     };

    // process the request and send a response
    completer.future.then((_){
           handleContent(contentString);
    });
   } 
```

我不知道错误是什么，因为我无法在 dart 编辑器的窗口中调试控制台应用程序。但我无法理解错误是什么，因为我的测试文件不包含我从上传文件发送的文本。

# r - 如何找到 R 中每个因子的最小行数？

> ID：14506919
> 
> 赞同：1
> 
> 时间：2013-01-24T17:13:19.240
> 
> 标签：r, dataframe

我有一个数据框，称为 A，它看起来像这样：

```
GroupID  Dist1   Dist2 ...
1        4       4 
1        5       4 
1        3       16 
2        0       4 
2        7       2 
2        8       0 
2        6       4 
2        7       4 
2        8       2 
3        7       4 
3        5       6
... 
```

GroupID 是一个因子，Dist1、Dist2 是整数。

我有一个派生的数据框，SummaryA

```
GroupID  AveD1  AveD2 ...
1        4       8 
2        6       2
3        6       5
... 
```

对于每个 groupID，我需要找到具有最小值的 ROW NUMBER，以进行进一步的操作，并将数据提取到我的摘要集中。例如，我需要：

```
GroupID  MinRowD1  
1        1 
2        4 
3        11 
```

在比赛中，我选择哪个并不重要，但我不知道我是如何得到这个的。我不能使用 which()，因为它不能很好地对因子进行操作，我不能使用 ave(Fun=min)，因为我需要位置，而不是最小值。如果我为每个组做一些匹配到最低限度的事情，我可以有多个匹配，这搞砸了。

关于如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T17:36:24.897

使用您`by`的`rownames`数据

```
> dat$row <- 1:nrow(dat)
>  by(dat,dat$GroupID,FUN = function(x) rownames(x)[which.min(x$Dist1)])
dat$GroupID: 1
[1] "3"
---------------------------------------------------------------------------------------- 
dat$GroupID: 2
[1] "4"
---------------------------------------------------------------------------------------- 
dat$GroupID: 3
[1] "11" 
```

在这里我假设

```
dat <- read.table(text = 'GroupID  Dist1   Dist2
1        4       4 
1        5       4 
1        3       16 
2        0       4 
2        7       2 
2        8       0 
2        6       4 
2        7       4 
2        8       2 
3        7       4 
3        5       6', header = T) 
```

**编辑**`data.table`使用包的另一个解决方案

我认为 data.table 提供了更优雅的解决方案：

```
library(data.table)

dat$row <- 1:nrow(dat)
dtb <- as.data.table (dat)
dtb [,.SD[which.min(Dist1)],by=c('GroupID')]
   GroupID Dist1 Dist2 row
1:       1     3    16   3
2:       2     0     4   4
3:       3     5     6  11 
```

**Edit1**行表而不创建行列（@Arun 评论）

```
dtb[, {i = which.min(Dist1); list(Dist1=Dist1[i], 
    Dist2=Dist2[i], rowNew=.I[i])}, by=GroupID]

  GroupID Dist1 Dist2 rowNew
1:       1     3    16   3
2:       2     0     4   4
3:       3     5     6  11 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-24T17:32:29.517

这是一个基本的 R 解决方案；基本思路是通过 GroupID 拆分数据，获取每个数据最小值的行，然后将其重新组合在一起。有些人认为`plyr`函数是一种更直观的方式来做到这一点；我确信使用其中一个的解决方案很快就会出现......

```
A$row <- 1:nrow(A)
As <- split(A, A$GroupID)
sapply(As, function(Ai) {Ai$row[which.min(Ai$Dist1)]}) 
```

对于大型数据集，`split`在标量而不是数据帧上执行时会更快，就像这样。

```
rows <- split(1:nrow(A), A$GroupID)
sapply(rows, function(rowi) {rowi[which.min(A$Dist1[rowi])]}) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-24T18:45:02.573

假设`dat`从@agstudy 的答案，那么`aggregate()`是一个很好的基本功能，可以轻松地做你想做的事。（此答案使用`which.min()`，在存在多个值的情况下具有有趣的行为，该值在输入向量中取最小值。请参阅最后的警告！）。例如

```
aggregate(cbind(Dist1, Dist2) ~ GroupID, data = dat, FUN = which.min)

> aggregate(cbind(Dist1, Dist2) ~ GroupID, data = dat, FUN = which.min)
  GroupID Dist1 Dist2
1       1     3     1
2       2     1     3
3       3     2     1 
```

获取行 ID，或者获取行名，我们可以这样做（在示例中添加一些行名之后）：

```
rownames(dat) <- letters[seq_len(nrow(dat))] ## add rownames for effect

## function, pull out for clarity
foo <- function(x, rn) rn[which.min(x)]
## apply via aggregate
aggregate(cbind(Dist1, Dist2) ~ GroupID, data = dat, FUN = foo,
          rn = rownames(dat)) 
```

这使

```
>     rownames(dat) <- letters[seq_len(nrow(dat))] ## add rownames for effect
> 
>     ## function, pull out for clarity
>     foo <- function(x, rn) rn[which.min(x)]
>     ## apply via aggregate
>     aggregate(cbind(Dist1, Dist2) ~ GroupID, data = dat, FUN = foo,
+               rn = rownames(dat))
  GroupID Dist1 Dist2
1       1     c     a
2       2     a     c
3       3     b     a 
```

我发现`aggregate()`输出比`by()`公式界面更好（虽然不是最有效的使用方式）当然非常直观。

## 警告

`which.min()`如果至少没有重复值，那就太好了。如果有，则`which.min()`选择第一个具有最小值的值。或者，有`which(x == min(x))`成语，但是任何解决方案都需要处理存在重复最小值的事实。

```
dat2 <- dat
dat2 <- rbind(dat2, data.frame(GroupID = 1, Dist1 = 3, Dist2 = 8))

aggregate(cbind(Dist1, Dist2) ~ GroupID, data = dat2, FUN = which.min) 
```

错过了重复项。

```
> aggregate(cbind(Dist1, Dist2) ~ GroupID, data = dat2, FUN = which.min)
  GroupID Dist1 Dist2
1       1     3     1
2       2     1     3
3       3     2     1 
```

`which(x == min(x))`将其与成语进行对比：

```
out <- aggregate(cbind(Dist1, Dist2) ~ GroupID, data = dat2,
          FUN = function(x) which(x == min(x)))
> (out <- aggregate(cbind(Dist1, Dist2) ~ GroupID, data = dat2,
+                   FUN = function(x) which(x == min(x))))
  GroupID Dist1 Dist2
1       1  3, 4  1, 2
2       2     1     3
3       3     2     1 
```

虽然使用的输出`which(x == min(x))`很吸引人，但对象本身要复杂一些，它是一个以列表为组件的数据框：

```
> str(out)
'data.frame':   3 obs. of  3 variables:
 $ GroupID: num  1 2 3
 $ Dist1  :List of 3
  ..$ 0: int  3 4
  ..$ 1: int 1
  ..$ 2: int 2
 $ Dist2  :List of 3
  ..$ 0: int  1 2
  ..$ 1: int 3
  ..$ 2: int 1 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-24T17:24:33.710

假设 dFrame 包含您的数据

```
 install.packages('plyr')
 library('plyr') 
```

试试这个：

```
 dFrame$GroupID<-as.numeric(dFrame$GroupID) ## casting to numeric type
 dFrame<-arrange(dFrame,Dist1) ## sorting the frame by Dist1 to find min by Dist1
 dFrame$row_name<-1:nrow(dFrame) ## will use this to pick out the index

 newFrame<-data.frame(GroupID = unique(dFrame$GroupID), MinRowD1 = as.numeric(tapply(dFrame$row_name,dFrame$GroupID,FUN = function(x){return (x[1])}) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-24T17:30:09.177

有点令人费解，但这应该可以解决问题：

```
x <- data.frame(GroupID=rep(1:3,each=3),Dist1=rpois(9,5))
x
  GroupID Dist1
1       1    10
2       1     5
3       1     3
4       2     9
5       2     9
6       2    13
7       3    10
8       3    10
9       3     4
sapply(lapply(lapply(split(x,x$GroupID),
    function(y) y[order(y[2]),]),head,1),rownames)
  1   2   3 
"3" "4" "9" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-24T17:50:58.417

这将返回与每组中第一个最小值相关联的两列的行名。并将它们作为具有命名列的数据框返回：

```
do.call(rbind, 
   by(dat,dat$GroupID,FUN = function(x) c(
                               minD1=rownames(x)[which.min(x[['Dist1']])], 
                               minD2=rownames(x)[which.min(x[['Dist2']])] ) ) )
#-------------
  minD1 minD2
1 "3"   "1"  
2 "4"   "6"  
3 "11"  "10" 
```

# javascript - Javascript：数组长度未计算

> ID：14506921
> 
> 赞同：0
> 
> 时间：2013-01-24T17:13:28.197
> 
> 标签：javascript, dom

我将把这归结为只是累了，但我有一个简单的`if`语句来检查数组的大小。从图中可以看出，数组的长度是 4，我的 if 语句是：

```
if blankFields.length > 0 { 
```

即使它应该运行该函数，它也总是跳过该函数。

正如您从图像中看到的，当我将鼠标悬停在 上时`blankFields`，您会看到数组的内容和长度。但是，如果我将鼠标悬停在`.length`我被告知它是“未定义的”。

我错过了什么？ ![在此处输入图像描述](../Images/375df81a27dcebbab7075944845b4572.png)

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T17:14:56.263

是的，你累了。`lentgh`->**`length`**

# node.js - Backbone.js - 简单的 CORS 回显服务器

> ID：14506927
> 
> 赞同：0
> 
> 时间：2013-01-24T17:13:43.317
> 
> 标签：node.js, rest, backbone.js, cors

我正在尝试学习 Backbone.js 并因此遵循教程。

特别是，我正在关注[Thomas David](https://www.youtube.com/watch?v=HsEw2i4wQMM)（Backbone Tutorials 的创始人）的教程。

问题是他在[GitHub 上](https://github.com/thomasdavis/video-backbone-beginner-server)提供的基本服务器不起作用。

所以我的问题如下：

*   有没有人有一个可以与 Backbone.js 一起使用的准系统 Node.js 启用 CORS 的回显服务器？

我只希望服务器能够使用 JSON 字符串（如 REST 服务器）回答某些请求，以便我可以专注于学习 Backbone.js。

提前致谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T19:21:02.810

我在 node.js 中专门针对以下问题编写了一个 echo-server：[https](https://github.com/monsur/echo-server) ://github.com/monsur/echo-server 。查看“samples”目录以获取有关如何测试 CORS 请求的示例。

# java - DN - Java JDNI LDAP - 通用名称与用户 ID

> ID：14506928
> 
> 赞同：0
> 
> 时间：2013-01-24T17:13:47.573
> 
> 标签：java, ldap, distinguishedname

通用名称，假设“John Smith”用于组成 DN，但是否可以使用 UID 组成完整的 DN。

我目前正在这样做并且它有效。

```
Hashtable env = new Hashtable(11);
env.put(Context.INITIAL_CONTEXT_FACTORY, 
env.put(Context.PROVIDER_URL, "ldap://myDomain.com");
env.put(Context.SECURITY_AUTHENTICATION, "simple");
env.put(Context.SECURITY_PRINCIPAL, "CN=John Smith,OU=IT,OU=MyCompany,OU=Users,DC=myDomain,DC=com");
env.put(Context.SECURITY_CREDENTIALS, "myPassWrd"); 
```

现在我想用`UID`J.smith 代替他的全名进行身份验证。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T19:37:07.860

在我们的 LDAP 身份验证例程中，我们创建一个`jndi`用户帐户，应用程序使用该用户帐户在 LDAP 中验证自己，一旦应用程序使用 jndi 用户的可分辨名称（例如：）建立连接，`uid=jndi,ou=branch,dc=com,dc=your,dc=organization`然后（为用户节点提供一个分支树）它使用以下代码检查用户`uid`是否在 LDAP 树中：

```
public String findUserDnByBranchAndUid(String branchName, String uid) throws NamingException {
    SearchControls searchControls = new SearchControls();
    searchControls.setSearchScope(SearchControls.SUBTREE_SCOPE);
    searchControls.setCountLimit(1);

    NamingEnumeration<SearchResult> answer;
    answer = dirContext.search(branchName, String.format("(uid=%s)", uid), searchControls);

    if (answer.hasMoreElements()) {
        SearchResult searchResult = answer.nextElement();
        return searchResult.getNameInNamespace();
    } else {
        return null;
    }
} 
```

像这样称呼它：

```
String userDn = findUserDnByBranchAndUid("ou=users,dc=com,dc=your,dc=organization", "jsmith"); 
```

如果`userDn`不为空，则用户存在于树中，然后我们继续使用该 DN（和用户密码）而不是 jndi 用户 DN 建立新连接。

如果一切顺利，那么用户`jsmith`只需使用他/她的 id 就可以使用其凭据登录，而无需提供任何对用户不友好的 DN。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T18:35:47.930

我用：

```
 env.put(Context.SECURITY_PRINCIPAL, username);
 env.put(Context.SECURITY_CREDENTIALS, password); 
```

为我工作。

# ruby-on-rails - 即使正在发布值，验证也会显示错误

> ID：14506929
> 
> 赞同：0
> 
> 时间：2013-01-24T17:13:48.803
> 
> 标签：ruby-on-rails, ruby-on-rails-3, validation

我有以下模型验证

```
 validates_presence_of :enddate
  validates_presence_of :startdate 
```

这是发布的内容

```
Parameters: {"utf8"=>"✓", "authenticity_token"=>"QczhHQoDU7a0/WKnUnLlzQ9Aob/NQOj1naiwfOYIW1c=", 
"billsanddeposit"=>{"name"=>"Test Bill Item", 
"itemcategory_id"=>"2", "repeatsevery"=>"2", "startdate"=>"01/24/2013", "enddate"=>"01/31/2013", 
"deposit"=>"0", "amount"=>"100"}, "commit"=>"Create Billsanddeposit"} 
```

这些是出现的错误

```
Enddate can't be blank
Startdate can't be blank 
```

这些是数据库中的日期时间字段，当脚手架最初创建表单时，它具有 date_select。我将其更改为带有 jquery datepicker 的 text_field，现在即使我可以看到上面显示的值正在发布，但我得到了上面的错误，表明它们没有被看到。

这是整个模型

```
class Billsanddeposit < ActiveRecord::Base
  attr_accessible :amount, :bankaccount_id, :deposit, :enddate, :itemcategory_id, :name, :repeatsevery, :repeattype_id, :startdate

  validates_presence_of :amount
  validates_presence_of :bankaccount_id
  validates_presence_of :itemcategory_id
  validates_presence_of :enddate
  validates_presence_of :name
  validates_presence_of :repeatsevery
  validates_presence_of :repeattype_id
  validates_presence_of :startdate

  belongs_to  :bankaccount
  belongs_to  :repeattype
  belongs_to  :itemcategory
  has_many    :ledgeritems
end 
```

到目前为止，我所做的只是添加关系和验证。

这是控制器，几乎完全默认

```
 def create
    @billsanddeposit = Billsanddeposit.new(params[:billsanddeposit])

    respond_to do |format|
      if @billsanddeposit.save
        @billsanddeposits = Billsanddeposit.joins(:bankaccount).where("bankaccounts.user_id = ?", current_user.id)
        @billsanddeposit = Billsanddeposit.new

        format.html { redirect_to @billsanddeposit, :notice => 'Billsanddeposit was successfully created.' }
        format.json { render :json => @billsanddeposit, :status => :created, :location => @billsanddeposit }
      else
        @billsanddeposits = Billsanddeposit.joins(:bankaccount).where("bankaccounts.user_id = ?", current_user.id)

        format.html { render :action => "index" }
        format.json { render :json => @billsanddeposit.errors, :status => :unprocessable_entity }
      end
    end
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T17:39:00.923

我已发表评论，但这是我的回应。

如果要保存在数据库中`enddate`并且`startdate`必须添加`attr_accessible`

```
attr_accessible :enddate, :startdate 
```

如果您可以在您的操作中收到这些参数，`created`则可能是日期格式有问题。

此外，您应该确保模型上的这些属性是日期、时间...等类型。

问候！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T18:45:23.760

我从这个博客中发现了问题：http: [//library.edgecase.com/american-date-parsing#tldr](http://library.edgecase.com/american-date-parsing#tldr)

这是因为我使用的是美国日期格式。通过包含引用的 gem，它再次开始工作。

# postgresql - 使用 Liquibase 的更新目标

> ID：14506930
> 
> 赞同：1
> 
> 时间：2013-01-24T17:13:49.223
> 
> 标签：postgresql, jakarta-ee, maven, liquibase

我试图自动化数据库进程。据我了解，通过使用 Liquibase，我可以使用`<goal>`标签自动调用 changesetLog-file 中所做的更改。

但是当我扩展我的 pom.xml 时：

```
<plugin>
  <groupId>org.liquibase</groupId>
  <artifactId>liquibase-maven-plugin</artifactId>
  <version>2.0.5</version>
  <configuration>
    ..
  </configuration>
  <executions>
    <execution>
      <phase>process-resources</phase>
      <goals>
        <goal>update</goal>
      </goals>
    </execution>
  </executions>
</plugin> 
```

Eclipse 向我显示了这个错误：

`Plugin execution not covered by lifecycle configuration: org.liquibase:liquibase-maven-plugin:2.0.5: (execution: default, phase: process-resources)`

知道如何解决这个问题吗？问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T20:45:01.457

liquibase 有几个[可用的目标](http://www.liquibase.org/manual/maven)。您忽略了指定“更新”。

```
 <executions>
    <execution>
      <phase>process-resources</phase>
      <goals>
        <goal>update</goal>
      </goals>
    </execution>
  </executions> 
```

有关 liquibase 示例，请参见以下问题：

*   [在运行删除/加载数据脚本之前锁定 oracle 数据库](https://stackoverflow.com/questions/10794169/lock-oracle-database-before-running-the-delete-load-data-scripts/10804663#10804663)

# iphone - 在没有导航控制器的情况下将 barButtonItems 添加到 UINavigationBar

> ID：14506932
> 
> 赞同：3
> 
> 时间：2013-01-24T17:13:51.893
> 
> 标签：iphone, ios, objective-c, xcode, ipad

我正在尝试向 uiNavigationBar 添加一些按钮，但它没有附加到导航控制器，我不希望它是这样。

我试图在栏的左侧添加两个按钮，但我发现的唯一允许这样做的代码示例涉及使用该行

```
 self.navigationItem.leftBarButtonItems 
```

显然，我的 UINavigationBar 不是 navigatinItem。

这是我创建导航栏的方式..

。H

```
@property (nonatomic, retain) UINavigationBar *navBar; 
```

.m

```
_navBar = [[UINavigationBar alloc] init];
[_navBar setFrame:CGRectMake(0,0,self.view.bounds.size.width,52)];
[self.view addSubview:_navBar]; 
```

我见过两种将项目推送到导航栏的方法，但都不起作用。

首先是..

```
 UIBarButtonItem *barButton = [[UIBarButtonItem alloc]
                                  initWithBarButtonSystemItem:UIBarButtonSystemItemAction
                                  target:self
                                  action:@selector(buttonSettingClicked)];

    [[self navigationItem] setLeftBarButtonItem:barButton] 
```

和

```
 self.navigationItem.leftBarButtonItems = _ArrayOfBarButtons; 
```

两者都没有产生任何结果......我怀疑是因为我的 UINavigationBar 在技术上不是“导航项”。

那么如何将项目添加到我的 NavigationBar？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T17:47:30.350

您需要先创建 UINavigationItem，将按钮添加到其中，然后将 navigationItem 添加到导航栏。

```
[super viewDidLoad];
    _navBar = [[UINavigationBar alloc] init];
    [_navBar setFrame:CGRectMake(0,0,self.view.bounds.size.width,52)];
    [self.view addSubview:_navBar];
    UINavigationItem *navItem = [[UINavigationItem alloc]initWithTitle:@""];
    UIBarButtonItem *barButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAction target:self action:@selector(buttonSettingClicked)];
    [navItem setLeftBarButtonItem:barButton];

    [_navBar setItems:@[navItem]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T18:00:27.383

```
 m_navBar = [[UINavigationBar alloc] init];
  [m_navBar setFrame:CGRectMake(0,0,self.view.bounds.size.width,52)];
  [self.view addSubview:m_navBar];

  UIBarButtonItem *barButton = [[UIBarButtonItem alloc]
                                initWithBarButtonSystemItem:UIBarButtonSystemItemAction
                                target:self
                                action:@selector(buttonSettingClicked)];

  UINavigationItem* navItem = [[UINavigationItem alloc] initWithTitle:@"MyItem"];
  [m_navBar pushNavigationItem:navItem animated:NO];

  navItem.leftBarButtonItems = @[barButton, barButton]; 
```

# asp.net-mvc - ASP MVC3 获取和设置下拉列表项

> ID：14506937
> 
> 赞同：3
> 
> 时间：2013-01-24T17:14:02.937
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我正在尝试仅使用两个可选项目填充 ASP MVC3 下拉列表，并根据数据库中的值确定要选择的项目。到目前为止，这就是我的观点（我认为这是正确的）

```
 <div class="editor-label">
        @Html.LabelFor(model => model.Status)
    </div>
    <div class="editor-field">
        @Html.DropDownList("CategoryID")
    </div> 
```

但是我在获取和设置控制器中的值时遇到了问题。

首先，我使用的方法似乎只根据首先列出的下拉列表中选择值`SelectListItem`。

```
 public ActionResult Edit(int id)
    {
        //redirect if security is not met.  Must be admin here
        if (!Security.IsAdmin(User)) return RedirectToAction("Message", "Home", new { id = 1 });

        var item = db.FollowUpItems.Find(id);

        string start = string.Empty;

        if (item.Status.Equals("O")) start = "Open";
        else start = "Closed";

        ViewBag.CategoryID = new SelectList(new[]
                                                {
                                                    new SelectListItem {Text = "O", Value = "Open"},
                                                    new SelectListItem {Text = "C", Value = "Closed"},
                                                },"Text", "Value", start);

        FollowUpItems followupitems = db.FollowUpItems.Find(id);
        return View(followupitems);
    } 
```

其次，当我点击`Save`编辑页面上的按钮时，传递到控制器这一部分的`Status`属性始终为空。`FollowUpItem`

```
 [HttpPost]
    public ActionResult Edit(FollowUpItems followupitems)
    {
        try
        {
            if (ModelState.IsValid)
            {
                db.Entry(followupitems).State = EntityState.Modified;
                db.SaveChanges();
                return RedirectToAction("Index");
            }
        }
        catch (DbEntityValidationException dbEx)
        {
            ViewBag.ErrorMessage = Common.ErrorCheck.CombineDbErrors(dbEx);
        }
        catch (Exception ex)
        {
            ViewBag.ErrorMessage = ErrorCheck.FriendlyError(ex);
        }

        return View(followupitems);
    } 
```

编辑

由于昆顿在下面的回答，这个`GET`问题已经解决了，但是我仍然在设置值时遇到问题。使用该`@Html.DropDownList("CategoryID")`方法每次都会向控制器返回一个`null`值（对于 Status 值，所有其他值都是应有的），并且使用该`@Html.DropDownListFor(m => m.Status, ViewBag.CategoryID)`语法会导致以下错误消息：

“编译器错误消息：CS1973：“System.Web.Mvc.HtmlHelper”没有名为“DropDownListFor”的适用方法，但似乎具有该名称的扩展方法。扩展方法不能动态调度。考虑强制转换动态参数或调用扩展方法而不使用扩展方法语法。

最终编辑

我的视图中的以下演员允许我正确设置值

```
@Html.DropDownListFor(m => m.Status, (SelectList)ViewBag.CategoryID) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T17:51:46.547

您的 item.Status 字段确实包含一个`O`或一个`C`？如果是这样，那么这可能会起作用，请将`GET`方法更改为：

```
 public ActionResult Edit(int id) {
        //redirect if security is not met.  Must be admin here
        if (!Security.IsAdmin(User)) return RedirectToAction("Message", "Home", new { id = 1 });

        var item = db.FollowUpItems.Find(id);

        //string start = string.Empty;

        //if (item.Status.Equals("O")) start = "Open";
        //else start = "Closed";

        var StatusOptions = new [] { new { Text = "Open", Value = "O" }, new { Text = "Closed", Value = "C" }};
        ViewBag.CategoryID = new SelectList(StatusOptions, "Value", "Text", item.Status);

        /* this line is duplicated 
         */
        // FollowUpItems followupitems = db.FollowUpItems.Find(id);
        return View(item);
    } 
```

我不知道您的 有什么问题`@Html.DropDownList("CategoryID")`，您可能想将其更改为：

```
@Html.DropDownListFor(m => m.Status, (SelectList)ViewBag.CategoryID) 
```

我使用它是因为我发现它更具表现力 - 我可以清楚地看到我希望它绑定到什么模型属性。

这可能会解决您的模型绑定问题。请注意 - 在您设置实体的状态之前，您必须先将其附加到数据库上下文，

```
db.Set<FollowUpItems>().Attach(followupitems); 
```

# c# - 无法加载文件或程序集“WindowsBase，版本 4.0.0.0

> ID：14506938
> 
> 赞同：3
> 
> 时间：2013-01-24T17:14:03.967
> 
> 标签：c#, visual-studio-2012

今天早上买了一台新机器，然后安装了 Visual Studio 2012，这是我在启动时遇到的错误

```
---------------------------
Microsoft Visual Studio
---------------------------
Could not load file or assembly 'WindowsBase, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of its dependencies. The module was expected to contain an assembly manifest.
---------------------------
OK   
--------------------------- 
```

显示此消息后，Visual Studio 关闭。我第一次进行 Web 安装时尝试从 ISO 重新安装。谷歌不是很有帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T12:07:47.050

我没有安装修复/卸载/重新安装，而是安装了 Windows 更新，因为我的系统在安装更新期间崩溃了。在这次崩溃之后，我遇到了同样的问题，但现在它解决了。:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T18:49:33.190

我进行了**修复**而不是卸载/重新安装，这解决了我的问题。

# javascript - 动态创建和销毁 Three.js 场景而不泄漏内存

> ID：14506940
> 
> 赞同：5
> 
> 时间：2013-01-24T17:14:10.307
> 
> 标签：javascript, memory, three.js, webgl, memory-leaks

假设我们有一个带有两个按钮的页面，创建和销毁。当您在此内存测试中单击创建 Three.js 场景时，将动态添加到页面并开始运行。单击销毁应该删除场景，释放所有缓冲区并释放所有内存等。 [http://mrdoob.github.com/three.js/examples/webgl_test_memory.html](http://mrdoob.github.com/three.js/examples/webgl_test_memory.html)

有谁知道如何在不构图和更改网址的情况下做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-04-07T19:39:44.907

我认为您需要在侧面几何、材质和纹理中使用 dispose() 方法。

```
geometry.dispose();
material.dispose();
texture.dispose(); 
```

[https://github.com/mrdoob/three.js/blob/master/examples/webgl_test_memory.html](https://github.com/mrdoob/three.js/blob/master/examples/webgl_test_memory.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T17:18:28.097

JavaScript 是一种垃圾收集语言。如果您不再对某个对象（如旧场景）有任何引用，那么内存最终将被回收，除非某处的实现中存在错误。不过，您链接到的页面似乎工作正常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-12T10:44:23.710

我本人长期以来一直为这个问题所困扰，提出了 chrome 和 Three.js 的错误报告，但找不到任何解决方案。

由于某些原因，即使很长时间后内存也不会释放，并且似乎有东西一直指向内存块，因此垃圾收集器永远不会释放它。

然而，这对我来说是什么诀窍

1.  创建一个数组，该数组将保存添加到场景中的所有项目。
2.  每当您向场景添加额外的项目时，请将其添加到此数组中。
3.  在销毁功能上，运行 scene.remove('item name') 将它们从场景中移除。
4.  现在遍历数组并手动使所有项目未定义。

通过这种方式，我能够从 Three.js 场景中获得超过 600MB 的 RAM。

**更新**

Doob 先生和 WestLangley 的回答[内存泄漏与three.js 和许多形状](https://stackoverflow.com/questions/12945092/memory-leak-with-three-js-and-many-shapes?rq=1)，我还没有用我的代码测试这个。

在 webGLRenderer 中，删除网格后

`scene.remove( mesh )`,

你可以释放内存

`renderer.deallocateObject( mesh );`

您可以使用释放纹理

`renderer.deallocateTexture( texture );`

# jquery - jquery在悬停时淡化其他列表项，然后在单击时将项目保持为100％不透明度

> ID：14506944
> 
> 赞同：0
> 
> 时间：2013-01-24T17:14:33.470
> 
> 标签：jquery, click, fade

我正在一个项目列表为 100% 不透明度的网站上工作，一旦项目悬停，所有其他项目的不透明度都会降低到 30%。我使用下面的代码可以正常工作。现在我需要的是让被点击的项目保持 100% 的不透明度并消除其他项目的淡入淡出。任何人都可以帮忙吗？谢谢

```
$(function() {
$("#input_1_8>li").hover( 
function() {}, 
function() {     
$('#input_1_8>li').fadeTo(0.1, 1.0); 
});

$("#input_1_8>li").hoverIntent(
function(){
$(this).attr('class', 'current'); // Add class .current
$(this).siblings().fadeTo(0.1, 0.3); // Fade other items to 30%
$(this).fadeTo(0.1, 1.0); // Fade current to 100%
}, 
function(){            
$(this).removeClass("current"); // Remove class .current
$(this).fadeTo(0.1, 1.0); // This should set the other's opacity back to 100% on mouseout   
}
); 
$("#input_1_8>li").on('click', function(){
$("#input_1_8>li").unbind("mouseenter").
               unbind("mouseleave");
});

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T17:17:25.690

尝试 ：

```
$("#sites>li").on('click', function(){
    $("#sites>li").unbind("mouseenter").
                   unbind("mouseleave");
}); 
```

# actionscript-3 - AS3 - 访问可能未定义的变量

> ID：14506945
> 
> 赞同：0
> 
> 时间：2013-01-24T17:14:35.483
> 
> 标签：actionscript-3, flash, oop, class

我有一个名为“字符”的课程。有些角色是可玩的（playable = true）。所有可播放的角色都有一个名为“follower”的子movieClip（不是用ActionScript 创建的）。每当我尝试使用代码访问“追随者”时，都会出现错误，因为“追随者”并不“必然”存在。这是因为有些角色没有“追随者”。

但是，我已经使用 'if (this.contains(follower)) { .. }' 来确保它在继续之前确实存在，但我仍然收到错误消息说 'follower' 可能不存在。

为什么我会收到错误消息？我能做些什么吗？我必须使用 AS3 来创建追随者吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T17:38:12.030

你可以像这样访问'follower'：`this["follower"]`- 所以你不会得到编译时错误。

此外，您可以检查`playable`属性而不是检查是否`follower`存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T20:46:27.780

这缺少一些信息，这是一个 AS2/AS3 项目（基于您的问题）。如果是这样，问题是因为 AS3 无法访问 AS2 内容。

“我必须使用 AS3 来创建追随者吗？” - 如果它是一个 AS3 项目，是的，请这样做。

如果您的项目都是 AS2/3，请尝试使用 LocalConnection 来控制“follower”剪辑。如果我的假设不正确，请纠正我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T18:31:32.477

课堂内`Character`：

```
if(this["follower"]) {
    // follower instance exists
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T18:20:41.890

您可以在 Character 类（类型 MovieClip）中声明一个公共`follower`变量。这将在不可播放角色中为空，并将设置为可播放角色中的子剪辑。

这仅在您关闭“自动声明阶段实例”时才有效。

# windows - windows批处理在for循环中迭代令牌

> ID：14506948
> 
> 赞同：1
> 
> 时间：2013-01-24T17:14:41.813
> 
> 标签：windows, for-loop, batch-file, token, loops

如何在 Windows 批处理脚本的 for 循环中遍历令牌？

我正在编写一个脚本，允许用户搜索文件并打印出该文件的父目录。到目前为止，我可以从文件名中获取完整路径，但我只需要父目录。工作正常，但想要一种更有效的方式来遍历令牌。

这是我所拥有的一个片段。file 变量是要搜索的文件，Path 变量是文件的完整路径。

```
fOR /F "tokens=1-25 delims=\" %%i IN ("!thePath!") DO (

    if %%j equ %file% set theParent= %%i
    if %%k equ %file% set theParent= %%j
    if %%l equ %file% set theParent= %%k
    if %%m equ %file% set theParent= %%l
    if %%n equ %file% set theParent= %%m
    if %%o equ %file% set theParent= %%n
    if %%p equ %file% set theParent= %%o
    if %%q equ %file% set theParent= %%p
    if %%r equ %file% set theParent= %%q
    if %%s equ %file% set theParent= %%r
    if %%t equ %file% set theParent= %%s
    if %%u equ %file% set theParent= %%t
    if %%v equ %file% set theParent= %%u
    if %%w equ %file% set theParent= %%v
    if %%x equ %file% set theParent= %%w
    if %%y equ %file% set theParent= %%x
    if %%z equ %file% set theParent= %%y

)
echo The parent directory is: %theParent% 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T17:41:12.063

您的方法不能可靠地工作，因为文件可能与其父文件夹之一共享相同的名称。

无需迭代 FOR /F 令牌。您可以使用简单的 FOR 直接获取父文件夹 :-)

```
for %%F in ("!thePath!\..") do set "theParent=%%~nxF"
echo The parent directory is: !theParent! 
```

*注意 -`theParent`如果文件位于根目录中，则为未定义（空）。*

# e-commerce - 电子商务工具/沙盒

> ID：14506949
> 
> 赞同：0
> 
> 时间：2013-01-24T17:14:44.730
> 
> 标签：e-commerce, edi, b2b, cxml

这可能含糊不清，但希望有人可以帮助我完善这个问题，但我正在寻找的可能是我可以测试电子商务/b2b 功能的方法/工具，例如使用 cXML 打孔、创建 EDI 文档并在 (理想情况下免费用于开发）沙盒。任何人都可以提出任何建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T22:09:44.177

换句话说，您正在寻找免费的（理想情况下）数据转换器。

您可以下载 Jitterbit 社区版 ( [Jitterbit](http://sourceforge.net/projects/jitterbit/files/) )

您也可以将 BOTS 用于 EDI：[BOTS](http://bots.sourceforge.net/en/index.shtml)

或塔伦德 ( [Talend](http://www.talend.com/products/data-integration) )

如果不完全了解您正在尝试做的事情，就很难指出正确的方向。如果您想要一个计划构建集成架构的商业数据转换器，请查看 Liaison 的 Delta 和 ECS ( [Liaison](http://www.liaison.com) )

# c# - 在 XNA 中加载内容和项目布局

> ID：14506951
> 
> 赞同：1
> 
> 时间：2013-01-24T17:14:54.293
> 
> 标签：c#, xna

我对 XNA 做事的方式有点困惑

所以我试图在 XNA 项目中进行以下布局： ![概述](../Images/bea713217539f8f9f5c1e39a3914079c.png)

```
.cs = file
<*>(); = list
new *(); = object
" : " = an inheritance
*(folder) = folder (I think you probably figured that one out) 
```

在 Box.cs 中加载了盒子的纹理（对于墙壁也是如此），所以当我执行 new box(); 我只需要指定位置。

但是我不知道每个文件要使用什么，在哪里调用什么，或者我如何加载我的纹理（我尝试过，`LoadContent()`但并不总是在正确的时刻调用。）

我尝试搜索具有类似布局的项目以找出这些东西，但我真的找不到一个好的项目，或者我没有输入正确的关键字。

有人可以向我解释我应该如何以及在哪里做事吗？或者如果你真的很慷慨，一个存在这种布局并且只加载活动关卡的纹理的项目（例如：直到 lvl 2 才加载墙）

如果有不清楚的地方，请随时询问，我会尝试解释更多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T00:06:49.053

好的，我一直在寻找更多，并且我能够获得 XBOX 现场独立游戏的学生许可证，

在那里我找到了一个演示项目+教程（双赢！）明天会去研究，但这应该足以开始我的项目了:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T17:26:54.130

只需确保在尝试绘制它们之前加载所有纹理，当您切换级别时应该这样做。

如果你的游戏没有那么多内容，我之前所做的就是将所有纹理加载到一个静态`Dictionary<String, Texture2D>`的 in 中`LoadContent()`，然后每个对象，而不是一个纹理，都有一个`string`字典的键。

# c - Windows 物理驱动器访问 fopen 和 fseek

> ID：14506952
> 
> 赞同：1
> 
> 时间：2013-01-24T17:14:54.777
> 
> 标签：c, windows, file, fseek

我目前正在尝试将物理硬盘作为 C 中的二进制数据流访问。我已经安装了一个图像 (.img)，它可以从操作系统 (Win 7) 读取。

我的 C 程序只是尝试以只读二进制模式打开物理驱动器，然后从驱动器中读取一些数据。

但是，如果我只是从流中读取数据而不寻找任何地方，一切都很好，我会取回存储在驱动器中的数据，并且由于我在流中的偏移量 0 处，我能够读取 MBR磁盘上。

但是，如果我尝试`fseek`从原点（零）偏移任何偏移量，则`fseek`返回 -1，表示它做不到。

我猜这可能是访问物理磁盘的权限/环 3/用户级别问题，我可能必须编写一个驱动程序来获得内核级别访问权限才能做到这一点，我只是很困惑为什么我可以从第一个扇区读取一些数据很好，但我无法寻找任何其他偏移量。我已经包含了我在下面编写的 C 程序的一部分。

```
FILE *disk = fopen("\\\\.\\PhysicalDrive1, "rb+");
if (disk == NULL) {
    **error handle
 }
else { //Opened the drive sucessfully
fread(buffer, 1, 100, disk);
printf("Reading the first byte from buffer, it's:%d\n", buffer[0]);
//This works fine and I can read any byte within the initial buffer
int test = fseek(disk, 100, SEEK_SET);
printf("The value of fseek is:%d\n", test);
//This always returns -1, indicating the seek failed  
fclose(disk);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T18:31:16.810

引用msdn：

如果成功，`fseek`则返回 0。否则，它返回一个非零值。在无法搜索的设备上，返回值是*undefined*。如果 stream 是空指针，或者如果 origin 不是下面描述的允许值之一，则`fseek`调用无效参数处理程序，如参数验证中所述。如果允许继续执行，则这些函数设置`errno`为`EINVAL`并返回 -1。

C 标准 [ISO/IEC 9899:2011] 的第 7.21.9.2 节规定了 fseek() 在二进制模式下打开二进制文件时的以下行为：

> 二进制流不需要有意义地支持 wherece 值为 SEEK_END 的 fseek 调用。

此外，第 7.21.3 节的脚注 268 有这样的说法：

> 将文件位置指示器设置为文件结尾，与 fseek(file, 0, SEEK_END) 一样，对于二进制流（因为可能出现尾随空字符）或任何具有状态相关编码的流具有未定义的行为确保以初始换档状态结束。

很多低级的东西很重要，比如扇区对齐、文件系统等。这需要一个特定的驱动程序来帮助在驱动器中导航也需要考虑。

希望这可以帮助。

# ios - setNeedsLayout 和 setNeedsDisplay

> ID：14506968
> 
> 赞同：71
> 
> 时间：2013-01-24T17:15:32.487
> 
> 标签：ios, autolayout, setneedsdisplay

`UIView`方法`setNeedsLayout`和之间的真正区别是什么`setNeedsDisplay`？

像往常一样，文档对此很模糊。

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2013-01-24T17:18:23.387

实际上，文档对此非常清楚：

*   [setNeedsLayout](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/UIView/UIView.html#//apple_ref/doc/uid/TP40006816-CH3-SW28)将布局子视图

    > 当您想要调整视图的子视图的布局时，请在应用程序的主线程上调用此方法。

*   [setNeedsDisplay](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/UIView/UIView.html#//apple_ref/doc/uid/TP40006816-CH3-BBCCADHC)将要求重绘您的视图（`drawRect:`等）。

    > 您可以使用此方法或 setNeedsDisplayInRect: 通知系统您的视图内容需要重绘。

# python-2.7 - NLTK POS 标记器不工作

> ID：14506969
> 
> 赞同：6
> 
> 时间：2013-01-24T17:15:32.160
> 
> 标签：python-2.7, nltk, pos-tagger

如果我试试这个：

```
import nltk
text = nltk.word_tokenize("And now for something completely different")
nltk.pos_tag(text) 
```

输出：

```
Traceback (most recent call last):
File "C:/Python27/pos.py", line 3, in <module>
nltk.pos_tag(text)
File "C:\Python27\lib\site-packages\nltk-2.0.4-py2.7.egg\nltk\tag\__init__.py" ipos_tag
tagger = load(_POS_TAGGER)
File "C:\Python27\lib\site-packages\nltk-2.0.4-py2.7.egg\nltk\data.py", line 605,in 
resource_val = pickle.load(_open(resource_url))
ImportError: No module named numpy.core.multiarray 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-24T18:22:45.467

似乎保存的单词标记器需要[numpy](http://www.numpy.org/)。您需要[安装它](http://sourceforge.net/projects/numpy/files/NumPy/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-24T14:45:22.177

使用以下命令安装 numpy：

```
sudo pip install -U numpy 
```

# c# - 无法写入输出文件 'c:\Windows\Temp\HibernatingRhinos.Profiler.Appender.NHibernate3Logger.dll' - '访问被拒绝。'

> ID：14506973
> 
> 赞同：2
> 
> 时间：2013-01-24T17:15:41.873
> 
> 标签：c#, iis-7, nhprof

我们有一个网站和两个服务托管在`IIS7`UAT/STG 和 LIVE 自从更新 NHProf 后，登台站点和 UAT 站点因以下错误而死亡。

```
net4exception: System.InvalidOperationException: Could not write to output file 'c:\Windows\Temp\HibernatingRhinos.Profiler.Appender.NHibernate3Logger.dll' -- 'Access is denied. '
  at HibernatingRhinos.Profiler.Appender.Util.GenerateAssembly.CompileInternally(String fileName, List`1 sources, HashSet`1 assemblies, HashSet`1 defineSymbols, String compilerVersion)
  at HibernatingRhinos.Profiler.Appender.Util.GenerateAssembly.CompileAssembly(List`1 sources, HashSet`1 assemblies, HashSet`1 defineSymbols, String assemblyFileName)
net35exception: System.InvalidOperationException: Could not write to output file 'c:\Windows\Temp\HibernatingRhinos.Profiler.Appender.NHibernate3Logger.dll' -- 'Access is denied. '
  at HibernatingRhinos.Profiler.Appender.Util.GenerateAssembly.CompileInternally(String fileName, List`1 sources, HashSet`1 assemblies, HashSet`1 defineSymbols, String compilerVersion)
  at HibernatingRhinos.Profiler.Appender.Util.GenerateAssembly.CompileAssembly(List`1 sources, HashSet`1 assemblies, HashSet`1 defineSymbols, String assemblyFileName)

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.InvalidOperationException: net4exception: System.InvalidOperationException: Could not write to output file 'c:\Windows\Temp\HibernatingRhinos.Profiler.Appender.NHibernate3Logger.dll' -- 'Access is denied. '
  at HibernatingRhinos.Profiler.Appender.Util.GenerateAssembly.CompileInternally(String fileName, List`1 sources, HashSet`1 assemblies, HashSet`1 defineSymbols, String compilerVersion)
  at HibernatingRhinos.Profiler.Appender.Util.GenerateAssembly.CompileAssembly(List`1 sources, HashSet`1 assemblies, HashSet`1 defineSymbols, String assemblyFileName)
net35exception: System.InvalidOperationException: Could not write to output file 'c:\Windows\Temp\HibernatingRhinos.Profiler.Appender.NHibernate3Logger.dll' -- 'Access is denied. '
  at HibernatingRhinos.Profiler.Appender.Util.GenerateAssembly.CompileInternally(String fileName, List`1 sources, HashSet`1 assemblies, HashSet`1 defineSymbols, String compilerVersion)
  at HibernatingRhinos.Profiler.Appender.Util.GenerateAssembly.CompileAssembly(List`1 sources, HashSet`1 assemblies, HashSet`1 defineSymbols, String assemblyFileName) 
```

在临时文件夹中有一些`dll's`，但它们都是随机命名的……除了 NHProf 库。

关于如何阻止这种情况的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T17:21:35.170

创建清单文件 (app.manifest) 并更改`<requestedExecutionLevel level="asInvoker" uiAccess="false" />`为`<requestedExecutionLevel level="requireAdministrator" uiAccess="false" />`. 现在应该可以了。

最常见的代码示例：

```
 <?xml version="1.0" encoding="utf-8"?>
<asmv1:assembly manifestVersion="1.0" xmlns="urn:schemas-microsoft-com:asm.v1" xmlns:asmv1="urn:schemas-microsoft-com:asm.v1" xmlns:asmv2="urn:schemas-microsoft-com:asm.v2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <assemblyIdentity version="1.0.0.0" name="MyApplication.app"/>
  <trustInfo xmlns="urn:schemas-microsoft-com:asm.v2">
    <security>
      <requestedPrivileges xmlns="urn:schemas-microsoft-com:asm.v3">
        <!-- UAC Manifest Options
            If you want to change the Windows User Account Control level replace the 
            requestedExecutionLevel node with one of the following.

        <requestedExecutionLevel  level="asInvoker" uiAccess="false" />
        <requestedExecutionLevel  level="requireAdministrator" uiAccess="false" />
        <requestedExecutionLevel  level="highestAvailable" uiAccess="false" />

            Specifying requestedExecutionLevel node will disable file and registry virtualization.
            If you want to utilize File and Registry Virtualization for backward 
            compatibility then delete the requestedExecutionLevel node.
        -->
        <requestedExecutionLevel level="requireAdministrator" uiAccess="false" />
      </requestedPrivileges>
    </security>
  </trustInfo>

  <compatibility xmlns="urn:schemas-microsoft-com:compatibility.v1">
    <application>
      <!-- A list of all Windows versions that this application is designed to work with. Windows will automatically select the most compatible environment.-->

      <!-- If your application is designed to work with Windows 7, uncomment the following supportedOS node-->
      <!--<supportedOS Id="{35138b9a-5d96-4fbd-8e2d-a2440225f93a}"/>-->

    </application>
  </compatibility>

  <!-- Enable themes for Windows common controls and dialogs (Windows XP and later) -->
  <!-- <dependency>
    <dependentAssembly>
      <assemblyIdentity
          type="win32"
          name="Microsoft.Windows.Common-Controls"
          version="6.0.0.0"
          processorArchitecture="*"
          publicKeyToken="6595b64144ccf1df"
          language="*"
        />
    </dependentAssembly>
  </dependency>-->

</asmv1:assembly> 
```

# ubuntu - 在ubuntu中编译opencv程序

> ID：14506974
> 
> 赞同：0
> 
> 时间：2013-01-24T17:15:42.387
> 
> 标签：ubuntu, opencv, compilation, makefile

我已经在 ubuntu 12.04 上安装了 opencv 2.4.2。我想知道如何在 ubuntu 中编译用 c++ 编写的 opencv 程序？另外，使用“make 文件”有什么好处？我如何使用 make-文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T18:39:02.293

makefile 是一种编译项目的简单方法，无需每次都指定编译和链接指令。它被构造为一系列规则，格式如下：

```
target:dependencies
[tab] rule 
```

其中规则必须以制表符为前缀。

例如，如果您的项目包含 2 个源文件 main.cpp 和 functions.cpp，它们都使用了 opencv 代码，那么您的 makefile 可能包含如下内容：

```
executable: main.o functions.o
g++ -o executable `pkg-config --libs opencv` main.o functions.o

main.o: 
g++ `pkg-config --cflags opencv` -c main.cpp 

functions.o:
g++ `pkg-config --cflags opencv` -c functions.cpp 
```

其中 main.cpp 只是您的主函数，您可以在其中多次调用在 functions.cpp 中定义的函数。该指令`pkg-config --cflags/libs opencv`使用一个名为 pkg-config 的实用程序，它会自动生成必要的编译器和链接器标志、路径和构建所需的库。如果您使用的库不支持 pkg-config 但就像 opencv 一样，使用它是有意义的，您当然可以在您的 makefile 中手动指定这些。

要使用 makefile 进行编译，您只需导航到保存源代码的目录，将 makefile 保存为“Makefile”并使用命令构建`make`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-15T11:38:36.890

这是一个一般提示：

您可以使用 eclipse IDE 来加速您的开发。

这是一篇文章，解释了如何轻松完成此操作：

[http://codewithgeeks.blogspot.in/2013/10/installing-opencv-ubuntu-1204-eclipse.html](http://codewithgeeks.blogspot.in/2013/10/installing-opencv-ubuntu-1204-eclipse.html)

和

[http://codewithgeeks.blogspot.in/2013/10/installing-opencv-ubuntu-1204-eclipse_10.html](http://codewithgeeks.blogspot.in/2013/10/installing-opencv-ubuntu-1204-eclipse_10.html)

# jdbc - 并行模式下的 Pgpool 在 java 中不起作用

> ID：14506976
> 
> 赞同：2
> 
> 时间：2013-01-24T17:15:42.653
> 
> 标签：jdbc, pgpool

我们正在尝试以并行模式使用 pgpool 3.2.1 在多个服务器上拆分数据库表。但是在使用java的时候，好像只做replication模式，没有parallel模式。

在测试中，我们使用了 3 台运行 Postgres 8.3 的后端服务器和一个测试数据库，其中要分发的表中有 300 行。

当我们使用 sql 语句（即从 psql shell）创建和查询数据库时，一切似乎都运行良好。查询系统服务器显示300行，查询3台后端服务器显示各有100行。

但是，从 java 应用程序创建相同的数据库会导致插入被复制而不是分布式，因此每个后端服务器都有全部 300 行。在java中查询系统服务器正确显示300行，但是在psql中查询系统服务器合并结果显示900行。

似乎在 java 中忽略了并行模式，而是使用复制模式。pgpool 日志中似乎没有打印任何关于此的内容，并且我在 java 中没有收到任何错误，只是数据未在后端服务器之间分发。

我发现 pgpool 手册中列出了以下限制：http: [//pgpool.projects.pgfoundry.org/pgpool-II/doc/pgpool-en.html#restriction](http://pgpool.projects.pgfoundry.org/pgpool-II/doc/pgpool-en.html#restriction)

> 扩展查询协议（用于并行模式）
> 
> 不支持 JDBC 驱动等使用的扩展查询协议。必须使用简单查询协议。这意味着您不能使用准备好的语句。

java 程序确实使用了准备好的语句，并且不使用准备好的语句可能不是一个选项。

关于 pgpool 和prepared statements 有一个类似的问题： [Java queries against PGPool II cause "unnamed Prepared statement does not exist" 错误](https://stackoverflow.com/questions/9725018/java-queries-against-pgpool-ii-cause-unnamed-prepared-statement-does-not-exist)

但是将 protocolVersion=2 添加到 JDBC URL 会导致 java 中的 insert 语句无法完成。

有没有人遇到过这个问题？有没有可能的解决方法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T17:34:03.200

我也有同样的问题。我正在尝试使用 libpq C 库而不是 JDBC 驱动程序来解决它。

我通过 SWIG/JNI 用 Ja​​va 制作了 C 库的包装器，现在它似乎工作正常。

[你可以在我博客](http://benfante.blogspot.it/2013/02/using-postgresql-in-java-without-jdbc.html)的这篇文章中看到我的实验结果。

我不知道相同的解决方案是否适用于您的情况。我只有很少（并且是孤立的）表要分区，所以我将在这些特定情况下使用 licpq 包装器。对于应用程序的其他部分，我将继续使用 JDBC 驱动程序，直接连接到单个 PostgreSQL 后端（而不是通过 PGPool）。

# playframework - 如何等待超时的承诺？

> ID：14506979
> 
> 赞同：2
> 
> 时间：2013-01-24T17:16:07.240
> 
> 标签：playframework, playframework-1.x

我认为，以下内容将永远等待。如何指定超时？

```
await(new Job<Long>() {
    @Override
    public Long doJobWithResult() throws Exception {
        ...
    }
}.now()); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T18:30:33.297

实现一个杀死线程的超时实际上是一件非常困难的事情，因为你需要使用 Thread.stop() 或其他可怕的东西，当它死亡时可能无法清理。更好的方法是让超时在您的长期工作中设置一个标志，使其停止处理并更快地返回。或者，您让长时间的工作继续，并在超时时呈现响应。

这是一个可以满足您要求的测试用例：

[https://github.com/playframework/play/blob/1.3.x/samples-and-tests/just-test-cases/app/controllers/WithContinuations.java#L73](https://github.com/playframework/play/blob/1.3.x/samples-and-tests/just-test-cases/app/controllers/WithContinuations.java#L73)

```
public static void waitWithTimeout() {
        Promise<String> task1 = new jobs.DoSomething(100).now();
        Promise<String> task2 = new jobs.DoSomething(2000).now();
        Either<List<String>,Timeout> r = await(Promise.waitEither(Promise.waitAll(task1, task2), Timeout(300)));

        for(Timeout t : r._2) {

            StringBuilder result = new StringBuilder();

            if(task1.isDone()) {
                result.append(" + Task1 -> " + task1.getOrNull());
            }

            if(task2.isDone()) {
                result.append(" + Task2 -> " + task2.getOrNull());
            }

            renderText("Timeout! Partial result is " + result);
        }

        renderText("Fail!");
    } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-24T21:47:08.293

指定动作之前的时间。所以对于 30 秒的超时：

```
await("30s", new Job<Long>() {
    @Override
    public Long doJobWithResult() throws Exception {
        ...
    }
}.now()); 
```

# c++ - std::stoi 整数限制

> ID：14506985
> 
> 赞同：1
> 
> 时间：2013-01-24T17:16:24.683
> 
> 标签：c++, c++11

我对传入的整数字符串的限制感到困惑`std::stoi`。整数是 32 位我没记错吗？在带符号的 32 位整数中，范围可以从 -2,147,483,648 到 2,147,483,647。我在其中输入了“300000000”（三亿）并抛出了超出范围的异常。似乎它强制执行 16 位限制。`std::stol`另一方面似乎有效。我一直在尝试找到一些说明这些功能限制的文档，但我似乎无法做到。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T17:45:09.277

施加限制的不是函数，而是整数类型本身；如果输入太大而无法容纳，则函数会引发异常。要查看任何整数类型的最大值和最小值，请使用`std::numeric_limits<the_type>::max()`和`std::numeric_limits<the_type>::min()`。

# javascript - 带有来自 GeoJSON 的附加信息的传单弹出窗口

> ID：14506989
> 
> 赞同：9
> 
> 时间：2013-01-24T17:16:30.410
> 
> 标签：javascript, leaflet, geojson

我想将来自 geojson 的附加信息绑定到传单标记弹出窗口。我从传单文档中查找了一些东西，但它不起作用。

```
var map = L.map('map').setView([51.9, 7.6], 11);

L.tileLayer('http://{s}.tile.cloudmade.com/5e4495ff4b0d454eb0443225198b7e6c/997/256/{z}/{x}/{y}.png', {
    maxZoom: 16
}).addTo(map);

var polygon = {
    "type": "Feature",
    "properties": {
        "name":"City BoundingBox",
        "style": {
            "color": "#004070",
            "weight": 4,
            "opacity": 1
        }
    },
    "geometry": {
        "type": "Polygon",
        "coordinates": [[
            [7.5,52.05],                
            [7.7,51.92],
            [7.6,51.84],
            [7.4,51.94],
            [7.5,52.05]
        ]]
    }
};

var myLayer = L.geoJson().addTo(map);
//myLayer.addData(polygon);

var popup = L.popup();

function onMapClick(e) {
    popup
        .setLatLng(e.latlng)
        .setContent("You clicked the map at " + e.latlng.toString())
        .openOn(map);
}

map.on('click', onMapClick);

<?php 
    $mdjson = file_get_contents("http://xxx/ows?service=WFS&version=1.0.0&outputFormat=JSON&request=GetFeature&typeName=xx:yy&maxFeatures=50");
    echo "var geojsonMD = ".$mdjson.";";    
?>

myLayer.addData(geojsonMD);

L.geoJson(geojsonMD, {
    style: function (feature) {
        return {color: feature.properties.color};
    },
    onEachFeature: function (feature, myLayer) {
        layer.bindPopup(feature.properties.description);
    }
}).addTo(map); 
```

希望您能够帮助我。

此致。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-26T15:38:45.527

假设服务返回与多边形具有相似属性的数据，您确实可以将它们添加到同一层。

```
var myLayer = L.geoJson(geojsonMD, {
     style: function (feature) {
         return feature.properties.style;
     },
     onEachFeature: function (feature, layer) {
         layer.bindPopup(feature.properties.name);
     }
 })

myLayer.addData(polygon);
myLayer.addTo(map); 
```

[http://jsfiddle.net/Wn5Kh/](http://jsfiddle.net/Wn5Kh/)（没有下载的数据，因为我没有网址）

如果`geojsonMD`具有不同的特征属性，则添加两个 GeoJson 层没有任何问题。一种用于您从服务中检索的数据，另一种用于多边形。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T18:47:00.007

Now it works. I wanted leaflet automatically gets coords and feature information from a wfs and adding them to the map.

thats the working code and thanks for your help =)

```
<?php 
                    echo "var geojsonMD = ".$mdjson.";";    
?>

 myLayer.addData(geojsonMD);

 var myLayer = L.geoJson(geojsonMD, {
 style: function (feature) {
     return feature.properties.style;
 },
 onEachFeature: function (feature, layer) {

        var strtype = '';

        if (feature.properties.mdtype == 0) {
            strtype = 'aaa';
        } else if (feature.properties.mdtype == 1) {
            strtype = 'bbb';
        }

     layer.bindPopup('<b>' + feature.properties.mdname + '</b><br>'
                        + strtype + '<br><br>'
                        + feature.properties.mdadress + '<br>'
                        + feature.properties.mdfon);
   }
   })
        myLayer.addTo(map); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T18:34:39.530

如 Leaflet 文档中所述，您应该使用“onEachFeature”将包含所需信息的弹出窗口附加到 GeoJson 的每个功能：

> onEachFeature 选项是在将每个要素添加到 GeoJSON 图层之前对其调用的函数。使用此选项的一个常见原因是在单击要素时将弹出窗口附加到要素

你可以这样使用它：

```
var myLayer = L.geoJson(polygon, {
    onEachFeature: yourOnEachFeatureFunction
}).addTo(map);

function yourOnEachFeatureFunction(feature, layer){
    if (feature.properties.name) {
        layer.bindPopup(feature.properties.name);
    }
} 
```

在此示例中，弹出窗口将显示每个单击的功能的属性“名称”的内容

# html - 子导航：悬停状态，子元素悬停时的样式父？

> ID：14506990
> 
> 赞同：2
> 
> 时间：2013-01-24T17:16:31.997
> 
> 标签：html, css, navigation

我正在设计导航样式。此导航有一个子菜单下拉菜单，在该下拉菜单中可能会出现第二个下拉菜单。本质上，我有两层子导航项。

这是我的问题：我在最外层的父项上有一个悬停状态，我们称之为“关于我们”。它下方的下拉菜单显示更多链接，当我将鼠标移动到此下拉菜单中时，这些链接会激活不同的悬停状态。我的问题是“关于我们”链接上的悬停状态消失了。我希望悬停状态保持活跃。到目前为止，这个导航完全是用 CSS 完成的，没有使用 javascript，如果可能的话，我想完全坚持使用 CSS。

每个 UL 都有一个类，例如 .main-nav 用于父 UL，.main-sub-nav 用于子导航元素。

尝试有创意，我想我可以说例如（该示例假设 #ccc 是父母悬停状态的突出显示颜色：

```
.main-nav li a:hover {background: #ccc;}    
.main-sub-nav li a:hover .main-nav li a {background: #ccc;} 
```

这不起作用，我假设因为我试图从子元素引用父元素，它不明白我在做什么。是否有与我上面所做的类似的方法来实现这一目标？

示例 HTML 结构：

```
<nav>
    <ul class="main-nav">
        <li><a href="#">Home</a></li>
        <li><a href="#">About Us</a>
            <ul class="main-sub-nav">
                <li><a href="#">About Sub 1</a></li>
                <li><a href="#">About Sub 2</a></li>
            </ul>
        </li>
        <li><a href="#">Contact Us</a></li>
    </ul>
</nav> 
```

您可以在以下开发站点上完整查看此代码：http: [//khill.mhostiuckproductions.com/siteLSSBoilerPlate/](http://khill.mhostiuckproductions.com/siteLSSBoilerPlate/)

请注意，当您将鼠标悬停在“关于我们”上并将鼠标向下移动到子导航时，“关于我们”的突出显示会消失。

就像我说的，我想用纯 CSS 来解决这个问题，最好不要给任何东西添加类。这变得很复杂，因为这个导航完全是用 PHP 生成的，并且添加更多的类会变得很讨厌。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T17:24:03.267

我认为这应该可以解决问题，

```
.main-nav > li:hover > a {background: #ccc;} 
```

[演示](http://jsfiddle.net/v3xe9/3)

# ruby - 在 OS X Lion 上安装 Postgres 的 PATH 问题：如何编辑 Bash_Profile？

> ID：14506994
> 
> 赞同：0
> 
> 时间：2013-01-24T17:16:41.653
> 
> 标签：ruby, bash, postgresql, unix, homebrew

我正在尝试让 Postgres 在 OS X Lion - homebrew - rvm 上运行。

[http://railscasts.com/episodes/342-migrating-to-postgresql](http://railscasts.com/episodes/342-migrating-to-postgresql)

按照上述说明操作后，我遇到了此处描述的相同问题：

[升级到 OSX 10.7 Lion 后修复 Postgresql](https://stackoverflow.com/questions/6770649/repairing-postgresql-after-upgrading-to-osx-10-7-lion)

在应该的时候运行`which psql`产量`usr/bin/psql``usr/local/bin/psql`

好的，我知道我需要编辑我的 bash 文件`export PATH=/usr/local/bin:$PATH`

这里有很多问题提到这是我应该做的。

**更新**

这是我尝试过的：

我以这种方式打开了 .bash_file：

```
open -e ~/.bash_profile 
```

并像这样修改它（这就是文件中的全部内容）：

```
export PATH="/usr/local/bin:$PATH"
[[ -s "/Users/chase/.rvm/scripts/rvm" ]] && source "/Users/chase/.rvm/scripts/rvm" 
```

`source ~/.bash_profile`然后运行`which psql`现在产生`usr/local/bin/psql`

这似乎回答了主要问题。

但是，当我使用`-d postgresql`数据库生成一个新的 rails 应用程序时，它会一直运行，直到我尝试`rake db:create:all`导致

```
could not connect to server: No such file or directory
    Is the server running locally and accepting
    connections on Unix domain socket "/tmp/.s.PGSQL.5432"? 
```

但我想这是另一个问题；)

[Postgres - 尝试 rake db:create:all 后无法连接到服务器](https://stackoverflow.com/questions/14508075/postgres-could-not-connect-to-server-after-trying-rake-dbcreateall)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T17:26:28.160

您的`.bash_profile`文件在您的主目录中。如果文件不存在，只需制作一个。

终端窗口应在您的主目录中打开。您也可以通过键入到达那里`cd ~`。或者从 Finder 窗口打开文件，但除非您选择“显示隐藏文件”，否则它将不可见。

至于*如何*编辑它，请使用您喜欢的任何编辑器，但要确保它可以保存实际的文本文件（例如，没有富文本，如 Word、OpenOffice 等，除非您导出为纯文本）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T17:28:49.607

您的 bash 文件位于您的主目录`~/.bash_profile`中。使用任何编辑器对其进行修改。

`nano ~/.bash_profile`如果您没有设置编辑器，您可以在终端中输入，它将在终端中打开一个简单的编辑器以使您能够编辑文件。它会完成这项工作，但每个人都应该真正切换到更好的编辑器。

在那里你必须改变`export PATH`元素的顺序。只是放在`/usr/local/bin`前面，`/usr/bin`所以外壳会检查第`/usr/local/bin`一个。

# ruby-on-rails-3.1 - 为什么 Asset Pipeline 会重新编译已编译的资产，创建冗余嵌套路径？

> ID：14506997
> 
> 赞同：0
> 
> 时间：2013-01-24T17:16:45.293
> 
> 标签：ruby-on-rails-3.1, asset-pipeline

当我将我的应用程序部署到生产环境（使用 capistrano）时，我在资产预编译期间遇到了错误：

```
 * executing `deploy:assets:precompile'
  * executing "cd /home/ubuntu/projects/Marketplace-web/releases/20130124162353 && bundle exec rake RAILS_ENV=production RAILS_GROUPS=assets assets:precompile"
    servers: ["server_name"]
    [server_name] executing command
*** [err :: server_name] rake aborted!
*** [err :: server_name] File name too long - /home/ubuntu/projects/Marketplace-web/releases/20130124162353/public/assets/assets/assets/assets/assets/assets/assets/assets/assets/assets/assets/assets/assets/widgets/jquery.jcarousel-d505e569ed1040e0b45bc33e0e49f117.js-26b4b41e4a45cb353ba7e39510893ace-93b194138c96579222ca08f9651946a7-43eca25d0cc511b37176bc58d8575e1a-1b97916c47bfa22545013b3751cb59e4-d9043106773924d12596e08b349f00dc-b7b7aa9bf440ca19896b1103d7651728-c40c1f2b8b11e6de163fefea9db6778c.gz+ 
```

[我在http://railscasts.com/episodes/335-deploying-to-a-vps?view=comments](http://railscasts.com/episodes/335-deploying-to-a-vps?view=comments)上找到了一条评论，说这个问题可以通过从我的 config/application.rb 中删除来解决：

```
config.assets.paths << "#{Rails.root}/public" 
```

我删除了它，任务停止重新编译我在 public/assets 文件夹中预编译的静态资产，但我的问题是：为什么它首先要这样做？那条配置行不是要告诉 Rails 在哪里可以找到我的其他未编译的静态资产吗？为什么要尝试编译 config.assets.paths 数组中的资产？我不需要那条线以便 Rails 知道在哪里可以找到我的静态资产吗？

我做错了吗？我应该把我的非编译的静态资产放在哪里，我应该如何告诉 Rails 在哪里可以找到它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T19:03:33.730

检查[Rails 资产配置文档](http://guides.rubyonrails.org/configuring.html#configuring-assets)：

*   `config.assets.paths`包含用于查找资产的路径。将路径附加到此配置选项将导致在搜索资产时使用这些路径。

不要将*输出目录添加到**输入*目录数组中。否则，前一次资产编译运行的输出将作为另一个输入包含到下一次资产编译运行中。

`app/assets`如果您编写或`vendor/assets`没有编写可编译资产，通常应该在其中。为什么不`jquery.carousel.js`投入`vendor/assets/javascripts/`？

# python - python的初学者练习

> ID：14506998
> 
> 赞同：-7
> 
> 时间：2013-01-24T17:17:02.120
> 
> 标签：python

我在“Think Python”上工作，但在这个练习中遇到了一些问题：

> Python 提供了一个名为的内置函数，该函数`len`返回字符串的长度，因此 的`len('allen')`值为`5`。编写一个名为的函数`right_justify`，它接受一个名为的字符串`s`作为参数，并打印带有足够前导空格的字符串，以便字符串的最后一个字母在显示的第 70 列中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T17:20:33.160

您需要在这里打印空间减去字符串长度的 70 倍，然后是字符串。

```
print (' '*(70-len(s))+s) 
```