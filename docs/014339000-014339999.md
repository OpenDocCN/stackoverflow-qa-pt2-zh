# StackOverflow 问答 14339000-14339999

# c# - 按月排序并添加列值

> ID：14339000
> 
> 赞同：0
> 
> 时间：2013-01-15T13:38:37.313
> 
> 标签：c#

我正在做 ac# 项目，我有以下场景：

我正在使用 Visual Studio，我有一个包含两个组合框的 winform，如屏幕截图所示。

第一个是月，第二个是年，旁边有一个按钮。我还有一个表，其中包含名为 date d(atatype small datetime) 和 price (varchar) 的两列。

单击按钮时，我希望根据月份和年份检查表格并在标签中显示价格列的总和。

那有可能吗？我没有使用任何数据网格或任何数据视图这样的类型。我正在使用标签显示我可以计算并显示总和吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T14:10:45.957

如果您使用的是[ADO.NET 实体数据模型](http://msdn.microsoft.com/en-us/library/vstudio/bb399247%28v=vs.100%29.aspx)，那么您可以使用这种方法。只需将 GetValues() 方法绑定到您的按钮单击事件或组合框选择更改事件。

```
//Get the data from your combo boxes. 
public void GetValues()
{
    string month = monthComboBox.SelectedValue.ToString(); 
    string year = yearComboBox.SelectedValue.ToString(); 
    InsertValuesInDatabase(month, year); 
}

//Insert the values into your table
public void InsertValuesInDatabase(string month, string year)
{

    try
    {
        using (var db = new MyEntities())
        {
            var newDateValueRecord = new DateValue() 
                            {
                               Month = month, 
                               Year = year
                            }

            db.DateValues.Add(newDateValueRecord); 
            db.SaveChanges(); 
        }
    }
    catch(Exception e)
    {
        Console.WriteLine(e); 
    }

} 
```

# azure - 天蓝色而不是 LA(MP)

> ID：14339004
> 
> 赞同：1
> 
> 时间：2013-01-15T13:38:55.783
> 
> 标签：azure

我将不胜感激任何“逐步”指南，了解如何更改 PHP/HTML 页面上的动态数据库连接/连接字符串/等上的代码以使其通过 ftp“即插即用”工作页面和 MySQL 数据库托管在“Azure 网站”上

多谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-10T21:14:24.230

让我重新表述这个问题（基于我对它的理解），并跟进我建议的解决方案。

**当前场景**：

*   PHP/HTML 网站
*   MySQL数据库
*   连接字符串指向本地数据库

**计划场景**：

*   Azure 网站（又名 Web 应用程序）
*   FTP/部署 PHP 站点到 Azure
*   将 MySQL 数据库迁移到 Azure

**想拥有**：

*   数据库连接字符串输入一次
*   本地数据库在本地运行时应该可以工作
*   Web/Cloud DB 应该在重复部署之间工作

**解决方案**

1.  创建和部署 PHP/MySQL Web 应用程序
2.  使用环境变量进行配置（检测本地与 Web/云）
3.  使用暂存槽来交换暂存/生产

**链接**

1.  部署：[https ://azure.microsoft.com/en-us/documentation/articles/web-sites-php-mysql-deploy-use-ftp/](https://azure.microsoft.com/en-us/documentation/articles/web-sites-php-mysql-deploy-use-ftp/)
2.  配置：[https ://azure.microsoft.com/en-us/documentation/articles/web-sites-configure/](https://azure.microsoft.com/en-us/documentation/articles/web-sites-configure/)
3.  暂存槽：[https ://azure.microsoft.com/en-us/documentation/articles/web-sites-staged-publishing/](https://azure.microsoft.com/en-us/documentation/articles/web-sites-staged-publishing/)

# oauth - twitter request_token 401 未经授权

> ID：14339005
> 
> 赞同：0
> 
> 时间：2013-01-15T13:39:00.110
> 
> 标签：oauth, twitter, appcelerator

好的，经过两天的试用后，我的钛应用程序仍然无法与 twitter request_token api 1.1 配合使用，我总是收到 401 未经授权的错误。下面是我的代码。我被阻止了，所以任何帮助表示赞赏。

```
var httpClient = Ti.Network.createHTTPClient({
                onerror : function(e) {
                    alert(this.status + ":" + e.error);
                },
                onload : function(e) {
                    alert(this.responseText);
                    if (this.readyState == 4) {
                        var resposeText = this.responseText;
                    }

                }
            });
httpClient.open('POST', "https://api.twitter.com/oauth/request_token");
httpClient.setRequestHeader("content-type", "application/x-www-form-urlencoded; charset=UTF-8");

var now = new Date().getTime();

var chars = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz";
var nonce = "";
for (var i = 0; i < 10; ++i) {
    var rnum = Math.floor(Math.random() * chars.length);
    nonce += chars.substring(rnum, rnum + 1);
}
var parameters = "oauth_callback=" + Ti.Network.encodeURIComponent("http://apicallback.stc.com.sa");

var signature = "POST&" + Ti.Network.encodeURIComponent("https://api.twitter.com/oauth/request_token") + "&" + Ti.Network.encodeURIComponent(parameters);
var header = "OAuth oauth_callback=\"" + Ti.Network.encodeURIComponent("http://apicallback.stc.com.sa") + "\",oauth_consumer_key=\"wPdlchopdYaqHhab8H8jMA\",oauth_nonce=\"" + nonce + "\",oauth_signature=\"" + signature + "\",oauth_signature_method=\"HMAC-SHA1\",oauth_timestamp=\"" + now + "\",oauth_version=\"1.0\"";
httpClient.setRequestHeader("Authorization", header);
httpClient.send(parameters); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T02:09:17.890

有几个错误：

*   您的 nonce 似乎构建不正确。生成一个包含 32 个字母的字符串，并使用 Base 64 对其进行编码。
*   您的签名也没有正确构建。请参阅[有关制作签名的 Twitter 开发人员文档](https://dev.twitter.com/docs/auth/creating-signature)。这是您的错误：
    *   所有 OAuth 参数都丢失了，但是`oauth_callback`. 标头中使用的 OAuth 参数`Authorize`必须包含在签名的参数中
    *   您无需构建密钥来签署数据。
    *   您不使用签名方法（`oauth_signature_method`设置为“ *`HMAC-SHA1`*”）来签署您的数据。
*   你的时间戳太大了。它是自 Unix 纪元时间以来的**秒数，而不是毫秒。**添加一个“ `/1000`”：

    `var now = new Date().getTime() **/ 1000**`

更一般地查看有关授权请求的 Twitter 开发人员文档：[https ://dev.twitter.com/docs/auth/authorizing-request](https://dev.twitter.com/docs/auth/authorizing-request)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T14:56:59.743

偶然我发现 javascript 库发布在 twitter 库列表中。看看[jsOAuth](https://github.com/bytespider/jsOAuth/downloads)。该库还有[API 文档](http://bytespider.github.com/jsOAuth/api-reference/):)。现在我能够获得授权令牌，但是当我通过发布到[https://api.twitter.com/1.1/search/tweets.json](https://api.twitter.com/1.1/search/tweets.json)来执行搜索时，我得到 401（未经授权）错误。现在我又被困住了。任何想法可能是什么问题...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T15:17:11.943

已经有多个用于 appcelerator 的 twitter 库，我建议从其中一个开始。

[http://www.clearlyinnovative.com/blog/post/33810421717/titanium-appcelerator-quickie-posting-images-to-twitter-with-social_plus-js](http://www.clearlyinnovative.com/blog/post/33810421717/titanium-appcelerator-quickie-posting-images-to-twitter-with-social_plus-js)

请参阅帖子底部的 github repo 链接

# backbone.js - 在 RequireJs 和 Backbone App 中放置加载代码的位置

> ID：14339010
> 
> 赞同：3
> 
> 时间：2013-01-15T13:39:21.603
> 
> 标签：backbone.js, requirejs

做我的第一个主干应用程序，我使用的结构有点[像本教程](http://backbonetutorials.com/organizing-backbone-using-modules/)

我想知道我放置 onload 代码的正确位置，例如设置 onclick 侦听器等？

我有：

**一个简单的引导程序**

```
require.config({
  paths: {
    jquery: 'libs/jquery/jquery',
    underscore: 'libs/underscore/underscore',
    backbone: 'libs/backbone/backbone'
  }

});

require([

  // Load our app module and pass it to our definition function
  'app',
], function(App){
  // The "app" dependency is passed in as "App"
  App.initialize();
}); 
```

**App.js**

```
define(['routers/search'], function(router){
  var initialize = function(){
      this.router = new router();
  } 
  return { initialize: initialize};
}); 
```

然后一个简单的路由器，调用路由器中的相关函数，也定义为一个模块，根据页面调用路由器上的相关函数。

我的感觉是路由器中的这个函数是我应该放置我的加载代码的地方。那是对的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T15:31:19.440

一种可能性是使用 RequireJS domReady 插件（可以从他们的简短插件列表中下载）：[http ://requirejs.org/docs/api.html#pageload](http://requirejs.org/docs/api.html#pageload)

这是他们给出的例子：

```
require(['domReady'], function (domReady) {
  domReady(function () {
    //This function is called once the DOM is ready.
    //It will be safe to query the DOM and manipulate
    //DOM nodes in this function.
  });
}); 
```

因此，您可以将其合并到您的正常 RequireJS 结构中，同时知道 DOM 已加载以及您可能在其旁边列出的任何其他依赖项。

# php - 如何以矩阵模式访问 MySQL 表中的值？

> ID：14339011
> 
> 赞同：1
> 
> 时间：2013-01-15T13:39:26.657
> 
> 标签：php, mysql, sql, arrays

```
Cust_Id 姓名 电话
--------------------------
A001 约翰 88888
A002 史密斯 77777
A003 斯黛拉 66666
```

目前我正在执行 3 个查询，例如：**SELECT Name, Phone from tablename WHERE Cust_Id = 'A001'**。对于 A002 和 A003 也是如此 上面的查询将返回：$row[Name], $row[Phone]。

有什么方法可以运行单个查询并获得结果： $row[A001][Phone] 或者我可以直接引用这些值。

该表有超过 3 个元组。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T13:40:57.467

为什么不使用`IN`

```
SELECT Name, Phone 
FROM   tablename 
WHERE  Cust_Id IN ('A001','A002', 'A003') 
```

这与

```
SELECT Name, Phone 
FROM   tablename 
WHERE  Cust_Id = 'A001' OR
       Cust_ID = 'A002' OR
       Cust_ID = 'A003' 
```

# achievements - 游戏中心的成就按钮

> ID：14339016
> 
> 赞同：0
> 
> 时间：2013-01-15T13:39:38.830
> 
> 标签：achievements

我将带有游戏中心成就的应用发布到应用商店。成就正在工作和更新。我在非游戏中心代码类中进行了错误修复，并将更新的应用程序版本提交到存储。现在，我注意到当我运行从商店更新的新版本时，游戏中心不再显示应用成就按钮。在应用程序的第一个版本中，我必须通过 iTunes Connect 进行大量配置来定义我的排行榜和成就，但随着更新没有任何改变，所以我就不管了。我错过了一步吗？更新版本正确显示高分，但未显示成就。事实上，当我直接进入游戏中心并查找我的应用程序时，游戏中心中的成就按钮甚至不存在于我的应用程序中，就像它在第一个版本中和它显示的应用程序标题上方一样，“

应用程序目标是 iOS 6 for dev in objective-c 与 iPhone 4.3 向后兼容。我使用 iPhone 6.0 模拟器和 iPhone 4 进行测试。

我已经搜索了您的常见问题解答，但找不到有关更新应用程序提交的任何信息，因此希望您能提供帮助。如果我错过了什么，链接会起作用，但我真的需要解决这个问题，因为应用程序是“实时的”。

感谢您提供的任何帮助。

PS模拟器显示我的成就按钮。:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T01:37:09.770

在别处找到我的答案。我确实错过了一步。事实证明，即使您没有更改任何内容，每次上传版本时都必须为应用重新选择并启用成就。值得庆幸的是，他们有一个“全选”选项。看起来我将发布另一个版本只是为了重新启用我的成就。叹...

# c# - 如何表达包含双引号而没有转义字符的字符串文字？

> ID：14339017
> 
> 赞同：8
> 
> 时间：2013-01-15T13:39:43.210
> 
> 标签：c#

是否有一种 C# 语法可以表达包含双引号的字符串而不必转义它们？我经常将 C# 源代码之间的字符串复制并粘贴到其他应用程序，不断添加和删除反斜杠令人沮丧。

例如。目前用于以下字符串（简单示例）

> “不，”他说。

我用 C# 编写`"\"No,\" he said."`

但我更愿意编写 Python`'"No," he said.'`或 Ruby之类的东西`%q{"No," he said.}`，这样我就可以将内容逐字复制并粘贴到其他应用程序中。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-15T13:43:20.233

> 我经常将 C# 源代码之间的字符串复制并粘贴到其他应用程序，不断添加和删除反斜杠令人沮丧。

那么听起来你可能不应该在源代码中包含这些字符串。

相反，创建嵌入在程序集中的文本文件，并动态加载它们......或创建资源文件，以便您可以按键查找字符串。

C# 中没有任何形式的字符串文字可以让您将双引号表示为源代码中*的*单个双引号字符。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-15T13:42:57.297

你可以试试这个，但你仍然有效地逃避：

```
string s = @"""No,"" he said."; 
```

# grails - 混合同名的私有和公共/受保护方法会导致多方法被禁用，并且被禁止以避免出现意外行为

> ID：14339022
> 
> 赞同：8
> 
> 时间：2013-01-15T13:40:01.343
> 
> 标签：grails, groovy, groovy-2, grails-2.2

我刚刚将我的一个 Grails 应用程序升级到使用 Groovy 2.0 的 2.2.0，现在我得到了这个编译错误：

> 混合同名的私有和公共/受保护的方法会导致多方法被禁用，并且被禁止以避免令人惊讶的行为。重命名私有方法将解决问题。

基于以下代码：

```
def getRootDomain(key) { }

private getRootDomain() { } 
```

这是一个简单的解决方法，但我真的很想更好地理解为什么。谁可以给我解释一下这个？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-15T14:07:31.870

这是因为 groovy 选择调用哪个方法的方式，以及它与 java 的潜在不兼容。

你在邮件列表上看到过这个帖子吗？

[http://groovy.329449.n5.nabble.com/mixing-public-private-overloaded-methods-causes-compilation-error-td367147.html](http://groovy.329449.n5.nabble.com/mixing-public-private-overloaded-methods-causes-compilation-error-td367147.html)

# hide - 用于隐藏和取消隐藏的富文本格式标签

> ID：14339026
> 
> 赞同：7
> 
> 时间：2013-01-15T13:40:18.070
> 
> 标签：hide, rtf, richtext

我想在我的 RichTextBox 中隐藏部分文本。我知道 \v 是隐藏部分的开始。但是我如何取消隐藏？例如，如果我想在字符串“hello big world”中隐藏单词“big”，以便“hello world”可见：

* * *

```
text              : "hello big world"
RTF so far        : "hello \v big world"
result            : "hello "
wanted result  -> : "hello  world"
doesn't work      : "hello \v big\v  world" 
```

* * *

有办法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-15T14:10:02.183

Alex K. 的解决方案可能更好，但我添加了我刚刚找到的这个解决方案，因为它也有效。`\plain`将文本样式重置为默认值：

```
hello \v big\plain  world 
```

另一个解决方案（实际上由 RichTextBoxes 使用）：`\v0`仅禁用隐藏

```
hello \v big\v0  world 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-15T13:48:32.960

您需要使用花括号对代码进行分组；

```
"hello {\v big} world" 
```

# wordpress - WordPress 促销滑块插件：“设置特色图片”链接未显示在屏幕选项中

> ID：14339028
> 
> 赞同：0
> 
> 时间：2013-01-15T13:40:22.530
> 
> 标签：wordpress

[我已按照WordPress](http://codex.wordpress.org/Post_Thumbnails)的建议在主题文件夹**/wp-content/themes/brave-zeenat/function.php**文件中添加了以下代码行

```
add_theme_support( 'post-thumbnails' ); 
```

但屏幕选项页面中仍然没有显示“设置特色图片”选项。需要您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T17:32:03.033

确保在“屏幕选项”下勾选了特色图片复选框。您可以在页面顶部找到此下拉菜单。

# c++ - 如何在自己的代码中使用 _DEBUG_ERROR？

> ID：14339032
> 
> 赞同：1
> 
> 时间：2013-01-15T13:40:34.080
> 
> 标签：c++, debugging, visual-c++, visual-studio-2012

在`<vector>`标题中，有这样的代码：

```
_DEBUG_ERROR("vector iterator not dereferencable");
_SCL_SECURE_OUT_OF_RANGE; 
```

这会通过一条消息暂停程序，并让程序员有机会调试代码。

对于一个小玩具项目，我想用`_DEBUG_ERROR`自己。它定义在`<xutility>`.

但是，当我包含`<xutility>`并尝试使用`_DEBUG_ERROR`时，我收到以下错误：

```
error C3861: "_Debug_message": identifier not found. 
```

但是在第 28 行`_Debug_message` *里面*定义`<xutility>`了！为什么编译器会抱怨？

此外，是否有另一种（甚至可能有点可移植？）方法来停止程序进行调试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T13:51:21.960

不是 100% 确定，但我相当确定它实际上是`std::_Debug_message`. PlasmaHH 是对的：`assert()`是正常的解决方案。您可以写信`assert(!"message")`以获取自定义消息。（注意！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T11:37:33.577

您可以使用`ASSERT`or`_ASSERT`宏进行断言和调试。或者，您可以制作自己的断言宏。使用`_ASSERT`（取自`crtdbg.h`）的定义：

```
#define _ASSERT_EXPR(expr, msg) \
        (void) ((!!(expr)) || \
                (1 != _CrtDbgReportW(_CRT_ASSERT, _CRT_WIDE(__FILE__), __LINE__, NULL, L"%s", msg)) || \
                (_CrtDbgBreak(), 0)) 
```

这里的重要功能是[_CrtDbgReportW](http://msdn.microsoft.com/en-us/library/8hyw4sy7%28v=vs.80%29.aspx)，它将显示具有三个标准按钮（Abort、Retry 和 Ignore）的断言对话框。根据返回值，您可以调用其他函数。在上面给出的宏中，`_CrtDbgBreak`当用户点击“重试”按钮时调用函数（这会导致函数返回 1，请参阅 MSDN）。

您可以写入日志文件，显示到调试输出窗口（使用`OutputDebugString`），或做您可能喜欢的事情。

# objective-c - 如何使 UIImage 更暗？

> ID：14339033
> 
> 赞同：0
> 
> 时间：2013-01-15T13:40:44.683
> 
> 标签：objective-c, uiimage, grayscale

我可以在网上找到许多制作 UIImage 灰度的教程。但我只希望 UIImage 稍微暗一些，并且仍然色彩鲜艳。这可能吗？如果是，请给我一些示例来源。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T09:00:00.583

感谢 Zenox，这个解决方案运行良好：

```
+ (UIImage *)colorizeImage:(UIImage *)image withColor:(UIColor *)color {
    UIGraphicsBeginImageContext(image.size);

    CGContextRef context = UIGraphicsGetCurrentContext();
    CGRect area = CGRectMake(0, 0, image.size.width, image.size.height);

    CGContextS﻿caleCTM(context, 1, -1);
    CGContextTranslateCTM(context, 0, -area.size.height);

    CGContextSaveGState(context);
    CGContextClipToMask(context, area, image.CGImage);

    [color set];
    CGContextFillRect(context, area);

    CGContextRestoreGState(context);

    CGContextSetBlendMode(context, kCGBlendModeMultiply);

    CGContextDrawImage(context, area, image.CGImage);

    UIImage *colorizedImage = UIGraphicsGetImageFromCurrentImageContext();

    UIGraphicsEndImageContext();

    return colorizedImage;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T13:43:40.667

您应该调查 Core Image 过滤器 - 这里是[Apple Docs](https://developer.apple.com/library/ios/#documentation/GraphicsImaging/Conceptual/CoreImaging/ci_tasks/ci_tasks.html)

（......或者你可以按照阿提拉的回答，简单得多！）

# .htaccess - .htaccess 中的默认查询字符串

> ID：14339035
> 
> 赞同：1
> 
> 时间：2013-01-15T13:40:51.727
> 
> 标签：.htaccess, url-rewriting

有点奇怪的问题，但我想在我的所有 URL 上设置一个查询字符串。如果参数未设置（或为空），那么我想重定向以包含默认值。

例如：

```
example.com would need to requrect to example.com?param=a

example.com?param would also need to redirect to example.com?param=a 
```

如果参数已设置并且是已知值列表的一部分，那么它应该照常进行：

```
example.com?param=(a|b|c|d) would go to the respective page a,b,c or d 
```

站点的某些页面使用其他参数进行排序和分页，因此规则不能假定这是唯一的查询字符串。

我已经尝试了几件事，但一直卡在重定向循环中。这是尝试设置默认参数：

```
RewriteCond %{QUERY_STRING} !(^|&)param=(a|b|c|d)($|&)
RewriteRule ^(.*)$ /index.php?rq=$1&param=a [L,QSA] 
```

主要的 CMS 重写规则是：

```
RewriteCond %{REQUEST_URI} !^\/*(index\.php|blog|admin\/assets|site\/assets|robots.txt|sitemap(|\-[0-9]+)\.xml|products.xml|favicon\.ico)
RewriteRule ^(.*)$ /index.php?rq=$1 [L,QSA] 
```

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T16:29:07.077

```
RewriteCond %{QUERY_STRING} !(^|&)param=(a|b|c|d)($|&)
RewriteCond %{REQUEST_URI} !^\/*(index\.php|blog|admin\/assets|site\/assets|robots.txt|sitemap(|\-[0-9]+)\.xml|products.xml|favicon\.ico)
RewriteRule ^(.*)$ $1?%{QUERY_STRING}&param=a [L]

RewriteCond %{REQUEST_URI} !^\/*(index\.php|blog|admin\/assets|site\/assets|robots.txt|sitemap(|\-[0-9]+)\.xml|products.xml|favicon\.ico)
RewriteRule ^(.*)$ /index.php?rq=$1 [L,QSA] 
```

# java - 如果打印出来，byte b=(byte)0x8A 的值是多少？

> ID：14339038
> 
> 赞同：0
> 
> 时间：2013-01-15T13:40:57.827
> 
> 标签：java, android

b 会返回什么？

```
byte b = (byte)0x8A;
System.out.println("Value"+b); 
```

它会打印什么？该值何时会返回否定？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T13:45:13.523

> 会打印什么？？

可能不是你所期望的。在 Java 中 a`byte`是一个（有符号的）数字而不是一个字符，因此当`0x8A`转换为 String 时，您将得到一个小负数的十进制表示。

所以我期望：

```
Value-118 
```

* * *

如果你想`0x8A`被解释为一个字符，你应该这样写：

```
char c = (char) 0x8A;
System.out.println("Value" + c); 
```

但这也不起作用，因为 Unicode 代码点 008A 不是打印字符。（就其价值而言，0x8A 不是 ASCII，因为真正的 ASCII 是 7 位字符集。）

# vb.net - 如何在vb.net的datagrid中获取选定行的单元格的值

> ID：14339039
> 
> 赞同：0
> 
> 时间：2013-01-15T13:40:59.550
> 
> 标签：vb.net, wpfdatagrid

我试图从数据网格中选定行的单元格中获取值，但徒劳无功。我已经能够在 windows 窗体中的 datagridview 中轻松地做到这一点，但在 wpf datagrid 中同样不起作用。到目前为止我尝试过的代码如下：

```
 `If Me.mileGrd.Items.Count > 0 Then
        If Me.mileGrd.SelectedItems.Count > 0 Then
            MessageBox.Show("check me")
            Dim cnum As String = Me.mileGrd.SelectedItems(0).Cells("Car No").Value
            'do more stuff here
        End If
    End If` 
```

`mileGrd`是数据网格。当我运行程序时，我收到一条错误消息，即`Public member 'Cells' on type 'DataRowView' not found`. `Car No`在这种情况下，我可以使用列标题作为参数从数据网格中的选定行读取单元格的值吗？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T17:17:05.030

```
Dim cnum = From row in mileGrd.Rows.Cast(Of DataGridViewRow)()
Select row.Cells("Car No").Value 
```

# php - 将终端输出结果写入php文件

> ID：14339040
> 
> 赞同：1
> 
> 时间：2013-01-15T13:41:04.960
> 
> 标签：php, system, output

我已经使用系统运行了我的命令，我希望它将终端结果复制到一个名为 output.txt 的文件中。当我在浏览器上运行我的 php 脚本时，它会显示结果，但不会在 output.txt 中显示该文件为空。

```
echo '<pre>';

$last_line = system('ruby /home/simon/ruby-grok/examples/result.rb', $retval);

echo '</pre>';

$out = fopen('output.txt', 'w'); //output handler
fputs($out,$last_line); //writing output operation
fclose($out); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T14:28:20.647

使用反引号要好得多。

```
$variable = `ls -l`; 
```

接着：

```
$out = fopen('output.txt', 'w'); //output handler

fputs($out,$variable); //writing output operation

fclose($out); 
```

或者：

```
file_put_content('output.txt',$variable); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T13:54:37.843

代码看起来不错。脚本是否有权写入该特定文件？你可以尝试而不是

```
$out = fopen('output.txt', 'w'); //output handler
fputs($out,$last_line); //writing output operation
fclose($out); 
```

把这个：

```
file_put_contents('output.txt',$last_line); 
```

## 编辑：

顺便说一句，我忘了问。您的浏览器显示什么输出？$out 变量中是否有任何数据？

# python - 可以从 Pylint 的统计信息中排除继承的公共方法吗？

> ID：14339042
> 
> 赞同：9
> 
> 时间：2013-01-15T13:41:06.377
> 
> 标签：python, pylint

`R: 73,0:MyLogging: Too many public methods (22/20)`Pylint 不断报告以下代码的错误 ( )：

```
class MyLogging(logging.Logger):

    def foo(self):
        pass

    def bar(self):
        pass 
```

起初我认为这是 Pylint 中的一个错误，因为`MyLogging`该类只有 22 行代码，但后来我意识到，它还包括了基类`logging.Logger`中的所有公共方法，这增加了 20 的统计数据。

是否可以从 Pylint 统计信息中排除基类的公共方法？

PS.：我知道我可以更改`max-public-methods`为更高的数字，或者添加一次性例外`# pylint: disable=R0904`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T07:59:26.050

有办法，但没有一个是好的。

这是不可配置的：您可以在 Pylint 的*design_analysis.MisdesignChecker*中检查代码`def leave_class`：

```
for method in node.methods():
    if not method.name.startswith('_'):
        nb_public_methods += 1 
```

上面的代码简单地遍历了所有不以“_”开头的方法，并将它们计为公共方法。

因此，我看到了两种方法来做你想做的事：

1.  fork Pylint 并修改此方法：

    ```
     for method in node.methods():
         if not method.name.startswith('_') and method.parent == node:
             nb_public_methods += 1 
    ```

    `method.parent`- 定义此函数的类节点；在你的`leave_class`函数中你还有一个参数`node`- 这是类节点。

    比较它们，您可以了解它是否是当前课程。

2.  在 Pylint 配置中禁用此规则并创建您自己的插件：

    ```
     MAX_NUMBER_PUBLIC_METHODS = 3
     class PublicMethodsChecker(BaseChecker):
         __implements__ = (IASTNGChecker,)

         name = 'custom-public-methods-checker'

         msgs = {
             "C1002": ('Too many public methods (%s/%s)',
                   'Used when class has too many public methods, try to reduce \
                    this to get a more simple (and so easier to use) class.'),
         }

         def leave_class(self, node):
             """check number of public methods"""
             nb_public_methods = 0
             print type(node)
             for method in node.methods():
                 if not method.name.startswith('_') and method.parent == node:
                     nb_public_methods += 1
             if nb_public_methods > MAX_NUMBER_PUBLIC_METHODS:
                  self.add_message('C1002',
                              node=node,
                              args=(nb_public_methods, MAX_NUMBER_PUBLIC_METHODS)) 
    ```

    基本上，此实现是 Pylint 源代码中 design_analysis.MisdesignChecker 的稍微修改的*摘录*。

有关插件的更多信息，请参阅*[帮助 pylint 了解它不了解的内容](http://www.logilab.org/blogentry/78354)*，以及 Pylint 源代码中的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T14:08:13.050

pylint 目前没有允许忽略父方法的配置。您可以按照 Romanl 的建议绕过问题，直到我为您的 pb 创建的问题在上游得到解决（http://www.logilab.org/ticket/116963）

# c# - 使用 ASP.NET Web API 的自定义路由

> ID：14339046
> 
> 赞同：12
> 
> 时间：2013-01-15T13:41:23.817
> 
> 标签：c#, rest, asp.net-mvc-4, namespaces, asp.net-web-api

假设我有一个嵌套*的一对多*类型的层次结构数据库，如下所示：

一个**地区**有很多**国家**；每个**国家**都有许多**城市**；一个**城市**必须属于*一个且仅属于一个*国家。

将此信息抽象到 RDBMS 中是一个简单的练习，但（在我看来）返回**给定区域 id**的国家列表的最明智的 REST 端点将类似于以下内容：

```
HTTP GET http://localhost/Region/3/Countries 
```

默认情况下，.NET Web API 的路由最多是 .NET`http://localhost/Countries/Region/3`或`http://localhost/Region/Countries/3`.

是否有我应该遵循的合理命名约定，或者路由是否可自定义以允许 URI 采用我喜欢的任何形状？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-15T13:58:01.630

路由应该是可定制的，足以获得您正在寻找的 URL。假设您想要“http://localhost/Region/3/Countries”形式的 URL，您可以注册此自定义路由：

```
config.Routes.MapHttpRoute("MyRoute", "Region/{regionId}/Countries", new { controller = "Region", action = "GetCountries" }); 
```

这会将请求分派到“RegionController”类上的“GetCountries”操作。您可以在从 URI 自动为您绑定模型的操作上有一个 regionId 参数。

您可能想在线查找 WebAPI 的属性路由包，因为它可能更适合您的情况。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T13:57:13.127

路由应该非常灵活——问题是您希望如何提供数据。您心中有一个控制器还是多个控制器？

如果你有一个 RegionController 我不明白为什么你不能配置一个路由：

```
routes.MapHttpRoute(
    name: "CountryList",
    routeTemplate: "{controller}/{regionId}/countries"
); 
```

以及对应的方法：

```
public CountryCollection Get(int regionId) 
```

还是我在您的问题中遗漏了什么？您的默认路由来自哪里？

看看他们的文档：

[http://www.asp.net/web-api/overview/web-api-routing-and-actions/routing-and-action-selection](http://www.asp.net/web-api/overview/web-api-routing-and-actions/routing-and-action-selection) http://www.asp.net/web-api/overview/web -api-routing-and-actions/routing-in-aspnet-web-api

# asp.net - 如何将列表框中的多个选定项目插入数据库

> ID：14339051
> 
> 赞同：0
> 
> 时间：2013-01-15T13:41:30.500
> 
> 标签：asp.net, sql-server

我有两个列表框，我想将两个列表框中的多个选定值插入到数据库中。让我解释 ：-

```
<asp:ListBox ID="ddlSuperior" runat="server" SelectionMode="Multiple">
<asp:ListBox ID="ddlSubordinate" runat="server" SelectionMode="Multiple"> 
```

和一个提交按钮

```
<asp:Button ID="btnSubmit" runat="server" Text="Submit" /> 
```

假设我从 ddlSuperior 中选择 2 个值，从 ddlSubordinate 中选择 1 个值。我怎样才能做到这一点..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T13:44:31.833

嗯，有很多方法。

```
 Dim superiorIndexes = ddlSuperior.GetSelectedIndices
    Dim vals = superiorIndexes.Select(Function(i) ddlSuperior.Items(i).Value)
    Dim subordinateIndexes = ddlSubordinate.GetSelectedIndices()

    vals = vals.Concat(subordinateIndexes.Select(Function(i) ddlSubordinate.Items(i).Value))

    For Each val As String In vals

        ' Code to do db insert

    Next 
```

在此处查找 db 示例：[C# SQL insert command](https://stackoverflow.com/questions/8218867/c-sharp-sql-insert-command) 查看 Marc_S 答案。

# android - 在 Android 应用程序中从服务器接收数据会破坏其余代码

> ID：14339055
> 
> 赞同：0
> 
> 时间：2013-01-15T13:41:35.600
> 
> 标签：android, jax-ws, ksoap2

我的 Android 服务器游戏有问题。在一个玩家移动后，每隔 3 秒就会向服务器发送一个请求，以检查其他玩家是否移动，以便第一个玩家可以再次移动。现在我不知道为什么，但无论我怎么做（使用 Thread.sleep() 或下面的方法），就像其余的代码不存在一样。

```
if (this.filled[field_id] != 0) // The field was already marked
            return;     

        neighbours(field_id); // Colouring neccesary fields

        // Sending updated board to the server:

        if (move>0) {
            filled[field_id] = current;
            GameAndroidUtil.callGameAddMove(session, filled);
            switchColourToOpposite(current); // Switching colour to the opposite as our opponent will now take action
        }                               

        score(); // Updating the score after our move

        if (isBoardFull()){ // Checking if the board is empty
            if(white_score>black_score)
                Toast.makeText(this, "White won!", Toast.LENGTH_SHORT).show();
            else if(white_score<black_score)
                Toast.makeText(this, "Black won!", Toast.LENGTH_SHORT).show();
            else
                Toast.makeText(this, "No winner!", Toast.LENGTH_SHORT).show();
        }

        // Waiting for the opponent to make his move

        boolean different = false;

        while (!different) {
            long startTime = System.currentTimeMillis();
            long endTime = System.currentTimeMillis();

            while(endTime!=startTime+3000)
                endTime = System.currentTimeMillis();

            if (checkChange()) {
                different = true;
            }
        } 
```

neighbours() 和 score() 应该给棋盘上色，然后计算当前分数。但他们没有。然而，代表棋盘（已填充）的数组在通过 callGameAddMove（会话，已填充）发送到服务器时会正确更新。

这个怎么可能？我使用 ksoap2 向服务器发送和接收请求。

# shell - 用于查找带空格的字符串并用引号括起来的 Shell 脚本

> ID：14339058
> 
> 赞同：1
> 
> 时间：2013-01-15T13:41:46.373
> 
> 标签：shell, unix

我是 shell 脚本的新手。我想逐行读取包含参数的文件，如果参数中包含任何空格，我想用引号将其替换。

例如，如果文件 (test.dat) 包含，

```
-DtestArgument1=/path/to a/text file
-DtestArgument2=/path/to a/text file 
```

解析上述文件后，shell 脚本应准备以下字符串

```
-DtestArgument1="/path/to a/text file" -DtestArgument2="/path/to a/text file" 
```

这是我的shell脚本，

```
while read ARGUMENT; do
    ARGUMENT=`echo ${ARGUMENT} | tr "\n" " "`
        if [[ "${ARGUMENT}" =~ " " ]]; then
            ARGUMENT=`echo $ARGUMENT | sed 's/\^(-D.*\)=(.*)/\1=\"\2\"/g'`
            NEW_ARGUMENT="${NEW_ARGUMENT} ${ARGUMENT}"
        else
            echo "doesn't contains spaces"
            NEW_ARGUMENT="${NEW_ARGUMENT} ${ARGUMENT}"
        fi
    done < test.dat 
```

但它抛出以下错误：

```
sed: -e expression #1, char 28: Unmatched ) or \) 
```

代码应该与所有 shell 兼容。请帮帮我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T13:47:05.670

我认为你应该简化问题。不用担心空格，只需在`=`. 就像是：

```
sed -e 's/=/="/' -e 's/$/"/' test.dat | paste -s -d\  - 
```

应该足够了。如果您真的关心空间，您可以尝试以下操作：

```
sed -e '/=.* /{ s/=/="/; s/$/"/; }' test.dat | paste -s -d\  - 
```

那只会注意到`=`. `/ /`如果你真的想改变任何地方有空格的行，就使用它。

无需使用`while/read`循环：只需让 sed 直接读取文件即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T13:50:07.880

`sed`括号应该被转义：

```
ARGUMENT=`echo $ARGUMENT | sed "s/\^\(-D.*\)=\(.*\)/\1=\"\2\"/g"` 
```

你做了一个地方，在 3 个地方你忘记了......顺便说一句，我通常使用`"`引用。

如果您更喜欢`'`-style，请这样做：

```
ARGUMENT=`echo $ARGUMENT | sed 's/\^(-D.*)=(.*)/\1="\2"/g'` 
```

# mod-rewrite - mod_rewrite / Prestashop 1.5.3 的友好 URL

> ID：14339067
> 
> 赞同：0
> 
> 时间：2013-01-15T13:42:13.353
> 
> 标签：mod-rewrite, friendly-url, prestashop

我创建了 3 个自定义页面（控制器、php 和 tpl 文件）并为 SEO 和 URL 创建了条目。目前所有自定义页面都是重复的，并显示相同的内容。

我在 blocktopmenu.php 中为自定义页面创建了链接：

```
$this->_menu .= '<li><a href="'.$this->context->link->getPageLink('bHome.php').'">Home</a></li>'.PHP_EOL;
$this->_menu .= '<li><a href="'.$this->context->link->getPageLink('bSamples.php').'">Samples</a></li>'.PHP_EOL;
$this->_menu .= '<li><a href="'.$this->context->link->getPageLink('start.php').'">Test</a></li>'.PHP_EOL; 
```

链接工作正常，网站显示正确。

我的问题是，只显示了一个页面友好的 URL，我根本不知道问题可能是什么。

正常工作的 URL 翻译如下：

```
http://localhost/Shop/index.php?controller=start -> http://localhost/Shop/Test 
```

我的另外两页没有翻译：

```
http://localhost/Shop/index.php?controller=bHome
http://localhost/Shop/index.php?controller=bSamples 
```

有谁知道问题可能是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T22:37:15.227

那么让我们看一下函数getPageLink：

```
public function getPageLink($controller, $ssl = false, $id_lang = null, $request = null, $request_url_encode = false)
{
    $controller = Tools::strReplaceFirst('.php', '', $controller);

    if (!$id_lang)
        $id_lang = (int)Context::getContext()->language->id;

    if (!is_array($request))
    {
        // @FIXME html_entity_decode has been added due to '&amp;' => '%3B' ...
        $request = html_entity_decode($request);
        if ($request_url_encode)
            $request = urlencode($request);
        parse_str($request, $request);
    }

    $uri_path = Dispatcher::getInstance()->createUrl($controller, $id_lang, $request);
    $url = ($ssl && $this->ssl_enable) ? Tools::getShopDomainSsl(true) : Tools::getShopDomain(true);
    $url .= __PS_BASE_URI__.$this->getLangLink($id_lang).ltrim($uri_path, '/');

    return $url;
} 
```

`.php`正如@romainberger 所建议的那样，它删除了。但你的情况并非如此。接下来我们深入探讨 Dispatcher 类中的 createUrl。我不会在这里全部粘贴，您不妨自己挖掘一下，但是：

```
public function createUrl($route_id, $id_lang = null, array $params = array(), $force_routes = false, $anchor = '')
{
    if (!$id_lang)
        $id_lang = Context::getContext()->language->id;

    if (!isset($this->routes[$id_lang][$route_id]))
    {
        $query = http_build_query($params, '', '&');
        $index_link = $this->use_routes ? '' : 'index.php';
        return ($route_id == 'index') ? $index_link.(($query) ? '?'.$query : '') : 'index.php?controller='.$route_id.(($query) ? '&'.$query : '').$anchor;
    } 
```

我很确定这里就是这种情况，这意味着当前语言的路由配置不正确。

# java - eclipse helios中代码的识别

> ID：14339070
> 
> 赞同：1
> 
> 时间：2013-01-15T13:42:18.997
> 
> 标签：java, eclipse

如何识别所选代码是方法、函数、变量...？？？

```
public class Modifiers implements IObjectActionDelegate{
private Shell shell;

public void run(IAction action) {
    SelectedText selectedText;      
    IEditorPart editor = getActiveEditor();

    if (editor instanceof AbstractTextEditor) {
        selectedText = getSelectedText(editor);

        //HOW TO IDENTIFY THE SELECTED CODE         
    }
}

public void selectionChanged(IAction action, ISelection selection) {        
}

public void setActivePart(IAction action, IWorkbenchPart targetPart) {
    shell = targetPart.getSite().getShell();
}

private IEditorPart getActiveEditor() {
    return Activator.getDefault().getWorkbench().getActiveWorkbenchWindow()
            .getActivePage().getActiveEditor();
}

private SelectedText getSelectedText(IEditorPart editor) {
    SelectedText selectedText;

    try {
        final ISelection selection = editor.getEditorSite().getSelectionProvider().getSelection();
        final ITextSelection textSelection = (ITextSelection) selection;
        selectedText = new SelectedText(textSelection.getText(), textSelection.getOffset(), textSelection.getLength());
    } catch (Exception e) {
        selectedText = new SelectedText("", 0, 0);
    }
    return selectedText;
} 
```

}

如您所见，我在`selectedText`. 现在我想知道如何确定该变量中的代码是方法、变量还是它包含的任何内容。

使用 eclipse 进行重构时，它会显示您选择的代码信息。这个想法是做类似的事情。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T14:02:11.253

如果我是正确的，您只需将鼠标指针移动到要获取详细信息的代码上，它将显示一个弹出窗口，其中包含带有特定符号的详细信息，例如对于静态变量，它将在其中显示“s”符号或图标。

仔细查看每个包含不同 2 个字母和颜色的符号都有其自身的含义。即**绿色为公共**，**红色为私人**，**灰色为本地**等。

# php - MVC 的 Htaccess 重写规则

> ID：14339071
> 
> 赞同：0
> 
> 时间：2013-01-15T13:42:24.190
> 
> 标签：php, .htaccess, mod-rewrite, url-routing

我正忙着为我的 MVC 微框架找出重写规则。我遵循**url.com/:controller/:action/:params**模式，但是当请求资产（例如 css、js 或 png）时，我不希望这些被重写。这是我的基本文件夹结构：

```
index.php
app/
--> Config
--> Controllers
--> Layout
--> Lib
--> Models
--> Views
assets/
--> app/
    --> ...
--> vendor/
    --> ... 
```

因此，如果一个请求与我上面描述的 URL 模式匹配，我希望它路由到 index.php 文件。如果它与资产文件夹中的某些内容匹配，我希望它允许它不受影响地通过。

这是我创建的当前 .htaccess 并且一直在来回更改内容：

```
RewriteEngine On
RewriteBase /

RewriteCond %{SCRIPT_FILENAME} !-d
RewriteCond %{SCRIPT_FILENAME} !-f 
RewriteCond %{REQUEST_URI} !\.(jpg|png|js|css)$

RewriteRule ^([^/]+)(/)([^/]+)(/)(.*) index.php?controller=$1&action=$3&params=$5 [L]
RewriteRule ^([^/]+)(/)(.*) index.php?controller=$1&action=$3&params= [L]
RewriteRule ^([^/]+)(/) index.php?controller=$1&action=index&params= [L]
RewriteRule ^([^/]+) index.php?controller=$1&action=index&params= [L] 
```

url 模式匹配得很好，但由于某种原因，对 assets 文件夹的任何请求也会被重写。做了一些不同的测试，我发现**L**标志，据我所知，它的意思是“最后一个”，并没有阻止它处理进一步的重写。

我知道其他人以前必须处理过这个问题，因为 MVC 是一种常见的模式。谁能指出我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T13:46:46.730

尝试排除该文件夹：

```
RewriteCond %{REQUEST_URI} ^/assets.*$
RewriteRule ^(.*)$ - [L,NC] 
```

我使用：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d 
```

代替：

```
RewriteCond %{SCRIPT_FILENAME} !-d
RewriteCond %{SCRIPT_FILENAME} !-f 
```

# php - 从文件名中去除 php 时间戳（如果存在）

> ID：14339074
> 
> 赞同：1
> 
> 时间：2013-01-15T13:42:26.593
> 
> 标签：php, regex, timestamp, substring

我正在尝试通过删除添加到图像的时间戳来检索图像的文件名。图像可能附有时间戳，也可能没有时间戳。例如，它可能采用以下格式：

`mylogo.1358256757.jpg`

或者它可能只是：

`mylogo.jpg`

它可以是`jpg`，`png`或任何其他有效的图像文件。

时间戳是使用以下方法生成的：

```
$date = new DateTime();
$timestamp = $date->getTimestamp(); 
```

我需要一个 PHP 正则表达式来保留原始图像名称，假设：

*   图像可以有任何可能的文件名，包括数字和点，以及
*   它可能根本没有时间戳！

我可以使用子字符串等我只是想知道最安全的方法是什么。PHP 时间戳总是正好是 10 位数字吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T13:46:20.903

像这样的东西应该工作：

```
$filename = "mylogo.1358256757.jpg";
$filename = preg_replace('/^(.*)\.\d+\.(gif|jpg|png)$/', '$1.$2', $filename); 
```

如果您只想将特定数量的数字视为时间戳，例如 8，您只需要限定`\d`：

```
$filename = preg_replace('/^(.*)\.\d{8,}\.(gif|jpg|png)$/', '$1.$2', $filename);
//                                  ^^^^ 8 or more digits 
```

您还可以进行一些语义检查以查看可疑时间戳是否在某个窗口中。以下检查以确保文件名中嵌入的时间戳代表过去 1 年的日期/时间。如果是，则进行替换，如果不是，则仅返回原始文件名（此代码需要 PHP 5.3.0 或更高版本）：

```
$filename = "mylogo.1358256757.jpg";     

$filename = preg_replace_callback(
    '/^(.*)\.(\d+)\.(gif|jpg|png)$/',
    function ($matches) {
        $when = new DateTime();
        if ($when->setTimestamp(intval($matches[2])) !== false) {
            $start = new DateTime('1 year ago');
            $end   = new DateTime();

            // Is it a timestamp in the last year?
            if ($when > $start && $when < $end) {
                return $matches[1] . '.' . $matches[3];
            }
        }

        // Doesn't appear to be valid, return the original
        // filename.
        return $matches[0];
    },
    $filename);

echo $filename . "\n"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T13:52:13.297

如果 Regex 不是强制性的，您还可以在“。”上拆分（例如分解）文件名。（点）并且只使用第一和第三部分，将它们粘合在一起以获得没有时间戳部分的文件名。

您问题的“如果存在”部分（以最简单的形式）是检查从explode（或类似）函数返回的“令牌”数量的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T13:53:37.023

您可以使用`preg_replace`

[preg_replace](http://php.net/manual/en/function.preg-replace.php)

您将使用此获取文件名

```
$prevFileName = "mylogo.1358256757.jpg";
$fileName = preg_replace('/(\\.\\d+\\.)/', '.', $prevFileName);
echo $fileName; 
```

# c# - WCF REST、文件的流式上传和 httpRuntime maxRequestLength 属性

> ID：14339078
> 
> 赞同：18
> 
> 时间：2013-01-15T13:42:40.617
> 
> 标签：c#, wcf, file-upload, httpwebrequest, streaming

我创建了一个简单的 WCF 服务来原型文件上传。服务：

```
[ServiceContract]
public class Service1
{
    [OperationContract]
    [WebInvoke(Method = "POST", UriTemplate = "/Upload")]
    public void Upload(Stream stream)
    {
        using (FileStream targetStream = new FileStream(@"C:\Test\output.txt", FileMode.Create, FileAccess.Write))
        {
            stream.CopyTo(targetStream);
        }
    }
} 
```

它使用`webHttpBinding`设置`transferMode`为“流式传输”和`maxReceivedMessageSize`,`maxBufferPoolSize`并且`maxBufferSize`全部设置为 2GB。`httpRuntime`已`maxRequestLength`设置为 10MB。

客户端通过以下方式发出 HTTP 请求：

```
HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(@"http://.../Service1.svc/Upload");

request.Method = "POST";
request.SendChunked = true;
request.AllowWriteStreamBuffering = false;
request.ContentType = MediaTypeNames.Application.Octet;

using (FileStream inputStream = new FileStream(@"C:\input.txt", FileMode.Open, FileAccess.Read))
{
    using (Stream outputStream = request.GetRequestStream())
    {
        inputStream.CopyTo(outputStream);
    }
} 
```

现在，最后，出了什么问题：

上传 100MB 大的文件时，服务器返回 HTTP 400（错误请求）。我尝试启用 WCF 跟踪，但没有显示错误。当我增加`httpRuntime`. `maxRequestLength`到 1GB，文件上传没有问题。[MSDN 说](http://msdn.microsoft.com/sk-sk/library/e1f13641%28v=vs.100%29.aspx)“指定*输入流缓冲阈值的限制，以 KB 为单位*`maxRequestLength`” 。

 *这使我相信整个文件（全部 100MB）首先存储在“输入流缓冲区”中，然后才可用于我`Upload`在服务器上的方法。我实际上可以看到服务器上文件的大小并没有逐渐增加（正如我所期望的那样），相反，在创建它的那一刻它已经是 100MB 大。

**问题：**我怎样才能让它工作，以便“输​​入流缓冲区”相当小（比如，1MB），当它溢出时，我的`Upload`方法被调用？换句话说，我希望上传能够真正流式传输，而不必在任何地方缓冲整个文件。

**编辑：** 我现在发现`httpRuntime`包含与此处相关的另一个设置 - `requestLengthDiskThreshold`。似乎当输入缓冲区增长超过此阈值时，它不再存储在内存中，而是存储在文件系统中。所以至少整个 100MB 的大文件没有保存在内存中（这是我最害怕的），但是，我仍然想知道是否有一些方法可以**完全避免这个缓冲区**。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-24T09:58:13.480

如果您使用 .NET 4 并在 IIS7+ 中托管您的服务，您可能会受到以下博客文章中描述的 ASP.NET 错误的影响：

[http://blogs.microsoft.co.il/blogs/idof/archive/2012/01/17/what-s-new-in-wcf-4-5-improved-streaming-in-iis-hosting.aspx](http://blogs.microsoft.co.il/blogs/idof/archive/2012/01/17/what-s-new-in-wcf-4-5-improved-streaming-in-iis-hosting.aspx)

基本上，对于流式请求，IIS 中的 ASP.NET 处理程序将在将控制权交给 WCF 之前缓冲整个请求。这个处理程序遵守`maxRequestLength`限制。

据我所知，该错误没有解决方法，您有以下选择：

*   升级到 .NET 4.5
*   自托管您的服务，而不是使用 IIS
*   使用不基于 HTTP 的绑定，从而不涉及 ASP.NET 处理程序

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-23T06:10:20.680

这可能是流实现中的错误。我发现一篇 MSDN 文章建议完全按照您在[http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/fb9efac5-8b57-417e-9f71-35d48d421eb4/](http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/fb9efac5-8b57-417e-9f71-35d48d421eb4/)上的描述进行操作。不幸的是，建议修复的微软员工在实施中发现了一个错误，并没有跟进修复的细节。

也就是说，看起来实现被破坏了，您可以通过使用内存分析器分析您的代码并验证整个文件是否存储在内存中来进行测试。如果整个文件都存储在内存中，您将无法解决此问题，除非有人发现您的代码存在配置问题。

也就是说，虽然使用*requestLengthDiskThreshold*在技术上可以工作，但它会大大增加您的写入时间，因为每个文件必须首先作为临时数据写入，从临时数据中读取，再次作为最终数据写入，最后删除临时数据。正如您已经说过的，您正在处理非常大的文件，所以我怀疑这样的解决方案是否可以接受。

您最好的选择是使用分块框架并手动重建文件。[我在http://aspilham.blogspot.com/2011/03/file-uploading-in-chunks-using.html](http://aspilham.blogspot.com/2011/03/file-uploading-in-chunks-using.html)找到了有关如何编写此类逻辑的说明，但没有时间检查其准确性。

很抱歉，我无法告诉您为什么您的代码没有按文档说明工作，但类似于第二个示例的内容应该能够在不增加内存占用的情况下工作。*

# java - 在 Windows7-Jenkins-Slave 上远程运行 Swing-Tests

> ID：14339079
> 
> 赞同：2
> 
> 时间：2013-01-15T13:42:49.583
> 
> 标签：java, swing, jenkins, windows-7-x64

我已经设法在 Windows 7(x64) 机器上设置了 Jenkins-Slave。我还可以将作业附加到从属设备，并且它们成功执行。但是所有任务似乎都在无头模式下运行！？我们有一些图形 Swing-Tests 正在启动 Swing GUI 并在其上执行宏。在从节点上手动执行相应的 Maven 命令时

```
mvn -B -f C:\Jenkins\workspace\3-Test-Script-GUI-Test\pom.xml clean test 
```

一切正常，但是当通过 Jenkins 触发此命令时，Swing-GUI 没有打开并且测试失败。

jenkins-jobs 默认情况下是在无头模式下触发的，还是有任何其他配置可以帮助我解决这个问题？

jenkins-slave.xml 如下所示：

```
 <executable>javaw.exe</executable>
  <arguments>-Xrs  -jar "%BASE%\slave.jar" -tcp %BASE%\port.txt</arguments> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T15:24:53.663

当从主机上运行的 X11 会话运行时，手动测试可能（似乎）起作用，因为 X 服务器充当 AWT 组件的有效对等点。[此处](https://stackoverflow.com/a/13985919/230513)提到了[无头模式](http://www.oracle.com/technetwork/articles/javase/headless-136834.html)的一些替代方案（VNC、Xvfb）。

# c# - 共享程序集中的静态字段

> ID：14339080
> 
> 赞同：3
> 
> 时间：2013-01-15T13:42:51.310
> 
> 标签：c#, gac

如果一个共享程序集（在 GAC 中）有一个静态字段，并且该字段的值被更新，这是否会反映在引用共享程序集的客户端应用程序中？或者客户端应用程序是否需要重建？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T13:46:26.787

如果该字段表示为 a `const`：

```
public const int Foo = 100; 
```

那么您需要重建所有客户端应用程序，因为该值将被纳入这些客户端。

如果它只是一个公共静态只读字段：

```
public static readonly int Foo = 100; 
```

...那么您将不需要重建客户端。该值将在执行时从程序集中获取。（当然，客户端需要*使用*新程序集执行，因此您需要考虑版本控制等）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-15T13:46:02.477

在 .NET 中，静态是每个[AppDomain](http://msdn.microsoft.com/en-us/library/ms173138%28v=vs.80%29.aspx)的，因此即使程序集在 中`GAC`，在其中声明的任何静态变量的范围都只存在于引用的 AppDomain 中。如果您将静态初始化为文字（无论是否为只读），它将自动反映在所有使用它的程序集中，而无需重新编译它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T13:46:34.710

如果该字段未标记为常量，则不需要重新编译客户端，因为每次访问该字段时都会返回该值。

如果它被标记为常量，那么客户端将需要重新编译，因为该字段的值在编译时是“烘焙”的。

# java - 在 Java 中操作 Blender 对象

> ID：14339084
> 
> 赞同：2
> 
> 时间：2013-01-15T13:43:05.457
> 
> 标签：java, graphics, blender, java-3d

我在 Blender 上创建了一个 3D 魔方，可以像普通魔方一样旋转。我不想制作动画，我希望能够在 Java 中独立移动魔方的各个部分。

这可能吗？我看过 blend2Java ，它暗示了一个解决方案，但没有明确的解释。

我有 Java3D 的基本知识，我只想知道它是否以及如何实现，以便我可以制作魔方游戏。

如果这不可能，是否有另一种方法可以在 Java 中创建可解的魔方。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:49:51.727

如果没有动画，就没有任何真正的方法可以做到这一点。您必须创建 rubix 立方体的每个立方体 seapertly 然后分配那里的 coidants 看起来像一个 rubix 立方体。通过它你可以让它一起旋转

# javascript - 创建一个没有一些重叠动画的jquery固定动画

> ID：14339088
> 
> 赞同：0
> 
> 时间：2013-01-15T13:43:18.297
> 
> 标签：javascript, jquery, html

我有这个动画[http://codepen.io/DWboutin/pen/DFJze](http://codepen.io/DWboutin/pen/DFJze)

当我快速浏览这些选项卡时，动画真的很奇怪。

我怎么能阻止它？我尝试了 .stop(true,true)，我尝试创建队列，但我可以让这个更干净。

该函数在 mouseenter 时触发

```
var becomeBigger = function(element){
    deplace(element.index(),function(){
        element.dequeue();
        element.queue(function(){
            $(this).animate({top: '118px', height: '435px',width: '248px'},settings.timeAnimIn,settings.easingIn,function(){
                $(this).addClass('active');
                deplace(element.index());
            });
            $(this).children('.img').children('.noiretblanc').animate({'opacity':0},settings.timeAnimIn,settings.easingIn);
            $(this).children('.img').children('.couleur').animate({opacity: 1, top: '-321px'},settings.timeAnimIn,settings.easingIn);
            $(this).children('.img').animate({height: '321px'},settings.timeAnimIn,settings.easingIn);
            $(this).children('.titre').animate({height: '57px', width: '228px', backgroundColor: '#4696a7'},settings.timeAnimIn,settings.easingIn);
            $(this).children('.titre').children('h2').animate({fontSize : '22px'},settings.timeAnimIn,settings.easingIn);
            $(this).children('.titre').children('h3').animate({fontSize : '18px'},settings.timeAnimIn,settings.easingIn);
            $(this).children('.btn-verso').css({backgroundPosition : '0 0'});
            $(this).dequeue();
        });
    });

} 
```

这个在mouseleave上

```
var recoverSize = function(element){
    replace(element.index(),function(){
        element.queue(function(){
            $(this).removeClass('active');
            $(this).animate({top: '148px',height: '385px',width: '214px'},settings.timeAnimOut,settings.easingOut);
            $(this).children('.img').children('.noiretblanc').animate({'opacity':1},settings.timeAnimOut,settings.easingOut);
            $(this).children('.img').children('.couleur').animate({opacity: 0, top: '-277px'},settings.timeAnimOut,settings.easingOut);
            $(this).children('.img').animate({height: '277px'},settings.timeAnimOut,settings.easingOut);
            $(this).children('.titre').animate({height: '50px', width: '194px', backgroundColor: '#959595'},settings.timeAnimOut,settings.easingOut);
            $(this).children('.titre').children('h2').animate({fontSize : '20px'},settings.timeAnimOut,settings.easingOut);
            $(this).children('.titre').children('h3').animate({fontSize : '16px'},settings.timeAnimOut,settings.easingOut);
            $(this).children('.btn-verso').css({backgroundPosition : '0 -72px'});
            $(this).dequeue();
        });
    });

} 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T13:57:43.277

您可以使用

```
.stop(false, true).animate(...); 
```

或带有 clearQueue() 的东西

[http://api.jquery.com/clearQueue/](http://api.jquery.com/clearQueue/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T13:48:37.207

您需要在开始当前动画之前停止所有动画，这很容易用 jQuery 完成：

[停止（）](http://api.jquery.com/stop/)

# asp.net-mvc - 使用 JSON 结果填充下拉列表 - 使用 MVC3、JQuery、Ajax、JSON 的级联下拉列表

> ID：14339089
> 
> 赞同：14
> 
> 时间：2013-01-15T13:43:18.637
> 
> 标签：asp.net-mvc, json, jquery

我有一个使用 mvc 的级联下拉菜单。例如，如果您在第一个下拉列表中选择一个国家，则应相应地填充第二个下拉列表中该国家的州。

目前，一切似乎都很好，我得到了 Json 响应（使用 F12 工具看到它），它看起来像 `[{ "stateId":"01", "StateName": "arizona" } , { "stateId" : "02", "StateName":"California" }, etc..] ..`

我想知道如何`second-dropdown`用这些数据填充我的。我的第二个下拉列表的 id 是“ `StateID`”。任何帮助将不胜感激。

下面是用于从服务器生成 JSON 响应的代码：

```
[HttpPost]
public JsonResult GetStates(string CountryID)
{
    using (mdb)
    {
        var statesResults = from q in mdb.GetStates(CountryID)
                        select new Models.StatesDTO
                        {
                            StateID = q.StateID,
                            StateName = q.StateName
                        };

        locations.statesList = stateResults.ToList();
    }

    JsonResult result = new JsonResult();

    result.Data = locations.statesList;

    return result;
} 
```

下面是客户端 HTML、我的剃须刀代码和我的脚本。我想在“ `success`：”中编写一些代码，以便`dropdown`使用 JSON 数据填充州。

```
<script type="text/javascript">
    $(function () {
        $("select#CountryID").change(function (evt) {

            if ($("select#CountryID").val() != "-1") {

                $.ajax({
                    url: "/Home/GetStates",
                    type: 'POST',
                    data: { CountryID: $("select#CountryID").val() },
                    success: function () { alert("Data retrieval successful"); },
                    error: function (xhr) { alert("Something seems Wrong"); }
                });
            }
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-15T13:56:04.563

首先，在 jQuery 事件处理函数内部`this`指的是触发事件的元素，因此您可以将额外的调用替换`$("select#CountryID")`为`$(this)`. 尽管在可能的情况下您应该直接访问元素属性，而不是使用 jQuery 函数，所以您可以简单地使用`this.value`而不是`$(this).val()`or `$("select#CountryID").val()`。

然后，在您的 AJAX 调用`success`函数中，您需要创建一系列`<option>`元素。这可以使用基本`jQuery()`功能（或`$()`简称）来完成。看起来像这样：

```
$.ajax({
    success: function(states) {
        // states is your JSON array
        var $select = $('#StateID');
        $.each(states, function(i, state) {
            $('<option>', {
                value: state.stateId
            }).html(state.StateName).appendTo($select);
        });
    }
}); 
```

这是一个[jsFiddle 演示](http://jsfiddle.net/wadVp/)。

相关的 jQuery 文档：

*   [`jQuery.each()`](http://api.jquery.com/jQuery.each/)
*   [`jQuery()`](http://api.jquery.com/jQuery/#jQuery2)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-15T13:52:08.637

在我的项目中，我正在这样做，它在下面

iN MY 控制器

```
public JsonResult State(int countryId)
{               
    var stateList = CityRepository.GetList(countryId);
    return Json(stateList, JsonRequestBehavior.AllowGet);
} 
```

在模型中

```
public IQueryable<Models.State> GetList(int CountryID)
{

    var statelist = db.States.Where(x => x.CountryID == CountryID).ToList().Select(item => new State
    {
        ID = item.ID,
        StateName = item.StateName
    }).AsQueryable();
    return statelist;
} 
```

在视图中

```
<script type="text/javascript">
   function cascadingdropdown() {
       $("#stateID").empty();
       $("#stateID").append("<option value='0'>--Select State--</option>");
       var countryID = $('#countryID').val();
       var Url="@Url.Content("~/City/State")";
       $.ajax({
           url:Url,
           dataType: 'json',
           data: { countryId: countryID },
           success: function (data) {                
               $("#stateID").empty();
               $("#stateID").append("<option value='0'>--Select State--</option>");
               $.each(data, function (index, optiondata) {                  
                   $("#stateID").append("<option value='" + optiondata.ID + "'>" + optiondata.StateName + "</option>");
               });
           }
       });
   }     
</script> 
```

我想这会对你有所帮助......

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-03-14T10:08:30.560

**第1步：**

*   首先，我们需要一个模型类来定义存储数据的属性。

    ```
    public class ApplicationForm
    {
        public string Name { get; set; }
        public string State { get; set; }
        public string District { get; set; }
    } 
    ```

    **第2步：**

*   现在，我们需要一个初始控制器，它将通过 ViewBag.StateName 中的状态打包列表返回一个索引视图。

    ```
    public ActionResult Index()
    {
        List<SelectListItem> state = new List<SelectListItem>();
        state.Add(new SelectListItem { Text = "Bihar", Value = "Bihar" });
        state.Add(new SelectListItem { Text = "Jharkhand", Value = "Jharkhand" });
        ViewBag.StateName = new SelectList(state, "Value", "Text");

        return View();
    } 
    ```

    在上面的控制器中，我们有一个包含附加到 ViewBag.StateName 的状态的列表。我们可以使用 Linq 查询或其他东西从数据库中获取状态列表，并将其打包到 ViewBag.StateName，让我们使用内存中的数据。

    **第 3 步：**

*   一旦我们有了控制器，我们就可以添加它的视图并开始创建一个 Razor 表单。

    ```
     @Html.ValidationSummary("Please correct the errors and try again.")

      @using (Html.BeginForm())
         {
         <fieldset>
        <legend>DropDownList</legend>
        @Html.Label("Name")
        @Html.TextBox("Name")
        @Html.ValidationMessage("Name", "*")

        @Html.Label("State")
        @Html.DropDownList("State", ViewBag.StateName as SelectList, "Select a State", new { id = "State" })
        @Html.ValidationMessage("State", "*")

        @Html.Label("District")
        <select id="District" name="District"></select>
        @Html.ValidationMessage("District", "*")

        <p>
            <input type="submit" value="Create" id="SubmitId" />
        </p>
    </fieldset>
    } 
    ```

    您可以看到我为每个输入控件（两个 DropDownList 和一个 TextBox）添加了适当的标签和验证字段，并且还在顶部添加了验证摘要。请注意，我使用的是 HTML 而不是 Razor 助手，这是因为当我们使用 jQuery 进行 JSON 调用时，将返回预填充选项标签的 HTML 标记。现在，让我们在上面的视图页面中添加 jQuery 代码。

    **第4步：**

    这是 jQuery 代码使用参数（选择的状态名称）对名为控制器的 DistrictList 方法的 DDL 进行 JSON 调用。DistrictList 方法将返回 JSON 数据。使用返回的 JSON 数据，我们正在构建标记 HTML 标记并将此 HTML 标记附加到 DOM 控件的“区域”。

    ```
     @Scripts.Render("~/bundles/jquery")
        <script type="text/jscript">
           $(function () {
            $('#State').change(function () {
                $.getJSON('/DDL/DistrictList/' + $('#State').val(),         function (data) {
                    var items = '<option>Select a District</option>';
                    $.each(data, function (i, district) {
                        items += "<option value='" + district.Value + "'>" + district.Text + "</option>";
                    });
                    $('#District').html(items);
                });
               });
            });
        </script> 
    ```

    请确保您在标记之前使用 jQuery 库引用。

    **第 5 步：**

*   在上面的 jQuery 代码中，我们使用参数对名为控制器的 DistrictList 方法的 DDL 进行 JSON 调用。这是将返回 JSON 数据的 DistrictList 方法代码。

    ```
    public JsonResult DistrictList(string Id)
    {
        var district = from s in District.GetDistrict()
                        where s.StateName == Id
                        select s;

        return Json(new SelectList(district.ToArray(), "StateName", "DistrictName"), JsonRequestBehavior.AllowGet);
    } 
    ```

    请注意，DistrictList 方法将接受 jQuery JSON 调用发送的字符串类型的“Id”（它应该始终是“Id”）参数。在该方法中，我在 linq 查询中使用“Id”参数来获取匹配地区的列表，从概念上讲，在地区数据列表中应该有一个状态字段。另请注意，在 linq 查询中，我正在调用 District.GetDistrict() 方法。

    **第 6 步：**

    在上面的 District.GetDistrict() 方法调用中，District 是一个具有 GetDistrict() 方法的模型。我在 linq 查询中使用 GetDistrict() 方法，所以这个方法应该是 IQueryable 类型。这是模型代码。

    ```
    public class District
    {
        public string StateName { get; set; }
        public string DistrictName { get; set; }

        public static IQueryable<District> GetDistrict()
        {
            return new List<District>
            {
                new District { StateName = "Bihar", DistrictName = "Motihari" },
                new District { StateName = "Bihar", DistrictName = "Muzaffarpur" },
                new District { StateName = "Bihar", DistrictName = "Patna" },
                new District { StateName = "Jharkhand", DistrictName = "Bokaro" },
                new District { StateName = "Jharkhand", DistrictName = "Ranchi" },
            }.AsQueryable();
        }
    } 
    ```

    **第 7 步：**

    您可以在此处运行应用程序，因为级联下拉列表现已准备就绪。当用户单击提交按钮时，我将做一些验证工作。因此，我将添加另一个 POST 版本的操作结果。

    ```
    [HttpPost]
    public ActionResult Index(ApplicationForm formdata)
    {
        if (formdata.Name == null)
        {
            ModelState.AddModelError("Name", "Name is required field.");
        }
        if (formdata.State == null)
        {
            ModelState.AddModelError("State", "State is required field.");
        }
        if (formdata.District == null)
        {
            ModelState.AddModelError("District", "District is required field.");
        }

        if (!ModelState.IsValid)
        {
            //Populate the list again
            List<SelectListItem> state = new List<SelectListItem>();
            state.Add(new SelectListItem { Text = "Bihar", Value = "Bihar" });
            state.Add(new SelectListItem { Text = "Jharkhand", Value = "Jharkhand" });
            ViewBag.StateName = new SelectList(state, "Value", "Text");

            return View("Index");
        }

        //TODO: Database Insertion

        return RedirectToAction("Index", "Home");
    } 
    ```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-15T13:55:47.450

在 ajax 调用中试试这个：

```
$.ajax({
  url: "/Home/GetStates",
  type: 'POST',
  data: {
    CountryID: $("select#CountryID").val()
  },
  success: function (data) {
    alert("Data retrieval successful");
    var items = "";

    $.each(data, function (i, val) {
      items += "<option value='" + val.stateId + "'>" + val.StateName + "</option>";
    });

    $("select#StateID").empty().html(items);
  },
  error: function (xhr) {
    alert("Something seems Wrong");
  }
}); 
```

**编辑 1**

```
success: function (data) {

  $.each(data, function (i, val) {
    $('select#StateID').append(
    $("<option></option>")
      .attr("value", val.stateId)
      .text(val.StateName));
  });
}, 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-14T10:04:35.703

```
<script type="text/javascript">
   $(document).ready(function () {
       $("#ddlStateId").change(function () {
           var url = '@Url.Content("~/")' + "Home/Cities_SelectedState";
           var ddlsource = "#ddlStateId";
           var ddltarget = "#ddlCityId";
           $.getJSON(url, { Sel_StateName: $(ddlsource).val() }, function (data) {
               $(ddltarget).empty();
               $.each(data, function (index, optionData) {
                   $(ddltarget).append("<option value='" + optionData.Text + "'>" + optionData.Value + "</option>");
               });

           });
       });
   });
</script> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-08-29T08:36:40.337

我知道这篇文章已经有一年了，但我找到了，你也可以。我使用以下解决方案，效果很好。强类型，无需编写一行 Javascript。

[mvc4ajaxdropdownlist.codeplex.com](http://mvc4ajaxdropdownlist.codeplex.com)

您可以通过 Visual Studio 将其作为 NuGet 包下载。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-12-09T11:13:42.680

您应该考虑使用一些将模型（在您的情况下是从 API 返回的 JSON）绑定到模板（SELECT 的 HTML 代码）的客户端视图引擎。对于这个用例，Angular 和 React 可能会很复杂，但是[JQuery 视图引擎](https://jocapc.github.io/jquery-view-engine/)使您能够使用类似 MVC 的方法轻松地将 JSON 模型加载到模板中：

```
<script type="text/javascript">
    $(function () {
        $("select#CountryID").change(function (evt) {

            if ($("select#CountryID").val() != "-1") {

                $.ajax({
                    url: "/Home/GetStates",
                    type: 'POST',
                    data: { CountryID: $("select#CountryID").val() },
                    success: function (response) {
                             $("#stateID").empty();
                             $("#stateID").view(response);
                    },
                    error: function (xhr) { alert("Something seems Wrong"); }
                });
            }
        });
    });
</script> 
```

在 JavaScript 中生成原始 HTML 要干净得多。在此处查看详细信息：[https ://jocapc.github.io/jquery-view-engine/docs/ajax-dropdown](https://jocapc.github.io/jquery-view-engine/docs/ajax-dropdown)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-12-23T09:54:57.580

试试这个：

```
public JsonResult getdist(int stateid)
{
    var res = objdal.getddl(7, stateid).Select(m => new SelectListItem { Text = m.Name, Value = m.Id.ToString() });
    return Json(res,JsonRequestBehavior.AllowGet);
} 
```

# sql - 将 psql 查询从 perl 传递到字符串

> ID：14339100
> 
> 赞同：0
> 
> 时间：2013-01-15T13:43:43.347
> 
> 标签：sql, linux, perl, psql

目前我有一个 perl 脚本可以访问我们的数据库，执行某些查询并将输出打印到终端。相反，我想在生成 pdf 之前将结果输出到模板乳胶文件中。对于我的大多数查询，我提取数字并将它们存储为标量变量（例如，特定操作员执行给定任务的频率）。例如。

```
foreach $op (@operator) {
    $query = "SELECT count(task_name) FROM table WHERE date <= '$date_stop' and 
              date >= '$date_start' and task=\'$operator[$index]\';";

    #execute query
    $result=$conn->exec($query);
    $conres = $conn->errorMessage;
    if ($result->resultStatus eq PGRES_TUPLES_OK) {
        if($result->ntuples > 0) {
            ($task[$index]) = $result->fetchrow;
        }
        printf("$operator[$index] carried out task: %d\n", $task[$index]);   
    } else {
        die "Failed.\n$conres\n\n";
        exit -1;
    }
    $index++;
} 
printf("**********************************\n\n"); 
```

在最终报告中，我将在表格中总结每个操作员完成每个任务的次数。除此之外，还有一些必须报告的事件。我可以使用以下命令轻松地将这些打印到终端

```
$query = "SELECT operator, incident_type from table_name WHERE incident_type = 'Y' 
          and date <= '$date_stop' and date >= '$date_start';";
$result=$conn->exec($query);
$conres = $conn->errorMessage;
if ($result->resultStatus eq PGRES_TUPLES_OK) {
    if($result->ntuples > 0) {
        $result->print(STDOUT, 1, 1, 0, 0, 0, 1, "\t", "", "");
    }
} else {
    die "Failed.\n$conres\n\n";
    exit -1;
} 
```

此命令的输出示例是

```
operator  |   incident_type
-----------------------------
AB        |  Incomplete due to staff shortages
-------------------------------
CD        |  Closed due to weather
----------------------------- 
```

如何让我的 perl 脚本将操作员名称和事件传递到字符串数组中，而不仅仅是将结果发送到终端？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T15:03:26.457

您应该考虑更新您的脚本以使用[`DBI`](http://search.cpan.org/dist/DBI/DBI.pm). 这是 Perl 中数据库连接的标准。

DBI 具有用于将参数插入查询字符串的内置工具。它比自己手动创建字符串更安全、更快捷。在循环之前，执行一次：

```
#dbh is a database handle that you have already opened.
my $query = $dbh->prepare(
    "SELECT count(task_name) FROM table WHERE date<=? and date>=? and task=?"
); 
```

然后在循环中，您只需每次都这样做：

```
$query->execute($date_stop,$date_start,$op); 
```

请注意，您传递的参数会`execute`自动插入到`?`语句中的 's 位置。它为您处理报价。

同样在循环中，执行语句后，可以得到如下结果：

```
my $array_ref = $query->fetchall_array_ref; 
```

现在所有的行都存储在一个二维数组结构中。`$array_ref->[0][0]`将返回第一行的第一列。

有关详细信息，请参阅[DBI 文档](http://search.cpan.org/dist/DBI/DBI.pm#fetchall_arrayref)。

正如其他人所提到的，您的代码中还有很多其他错误。确保您从 开始`use strict; use warnings;`，如果您需要进一步的帮助，请提出更多问题！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T16:48:58.340

对您的脚本有很多很好的反馈，但对您的实际问题却一无所知。

> 如何让我的 perl 脚本将操作员名称和事件传递到字符串数组中，而不仅仅是将结果发送到终端？

您是否尝试过创建一个数组并将项目推送到它？

```
my @array;
push (@array, "foo"); 
```

或使用嵌套数组：

```
push (@array, ["operator", "incident"]); 
```

# java - Java：使用 CTR 模式的 AES 加密；无法解密

> ID：14339101
> 
> 赞同：3
> 
> 时间：2013-01-15T13:43:46.330
> 
> 标签：java, encryption, aes

我正在使用以下代码，但它没有正确解密文本，我得到的输出是

加密：%öNo2F?¢¶SHºûÅ“?¾

明文：hello × am originÎl

```
public static void main(String[] args) throws Exception {
    // TODO Auto-generated method stub

    // Dernier exemple CTR mode
    // Clé 16 bits
    byte[] keyBytes = new byte[] { (byte) 0x36, (byte) 0xf1, (byte) 0x83,
            (byte) 0x57, (byte) 0xbe, (byte) 0x4d, (byte) 0xbd,
            (byte) 0x77, (byte) 0xf0, (byte) 0x50, (byte) 0x51,
            (byte) 0x5c, 0x73, (byte) 0xfc, (byte) 0xf9, (byte) 0xf2 };
    // IV 16 bits (préfixe du cipherText)
    byte[] ivBytes = new byte[] { (byte) 0x69, (byte) 0xdd, (byte) 0xa8,
            (byte) 0x45, (byte) 0x5c, (byte) 0x7d, (byte) 0xd4,
            (byte) 0x25, (byte) 0x4b, (byte) 0xf3, (byte) 0x53,
            (byte) 0xb7, (byte) 0x73, (byte) 0x30, (byte) 0x4e, (byte) 0xec };

    // Initialisation
    SecretKeySpec key = new SecretKeySpec(keyBytes, "AES");
    IvParameterSpec ivSpec = new IvParameterSpec(ivBytes);

    // Mode
    Cipher cipher = Cipher.getInstance("AES/CTR/NoPadding");

    String originalText = "hello i am original";
    // ///////////////////////////////ENCRYPTING
    cipher.init(Cipher.ENCRYPT_MODE, key, ivSpec);
    byte[] ciphered = cipher.doFinal(originalText.getBytes());
    String cipherText = new String(ciphered,"UTF-8");
    System.out.println("ciphered: " + cipherText);
    // ///////////////////////////////DECRYPTING
    cipher = Cipher.getInstance("AES/CTR/NoPadding");

    cipher.**init(Cipher.DECRYPT_MODE**, key, ivSpec);
    byte[] plain = **cipher.doFinal(ciphered);**
    originalText = new String(plain,"UTF-8");
    System.out.println("plaintext: " + originalText);
} 
```

我不知道我做错了什么。非常感谢任何帮助。这也是加密一些数据的正确方法这次我试图加密4字节的城市密码。预先感谢

////

我做了这些更改，它工作正常，但是如果我在 cipher.init() 函数中传递 cipherText.getByte() 有什么问题。像

```
byte[] plain = cipher.doFinal(cipherText.getByte("UTF-8")); 
```

n'感谢您的所有帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T13:49:47.533

对于解密，您需要在`DECRYPT_MODE`. 而且 byte[] 到 String 的转换也不正确（参见其他答案）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T13:47:13.567

您不能将加密的字节转换为这样的字符串。“字节”和“字符”是两个完全不同的东西。删除将字节转换为字符串并在加密和解密之间再次返回的代码，您的代码应该可以工作（正如其他答案中所指出的，第二步应该是 using `DECRYPT_MODE`）。

请注意，使用平台字符编码在字节和字符/字符串之间进行转换时需要小心，因为这在不同的平台上可能会有所不同。如果您的数据需要跨平台移动，这可能会导致问题。如果您的默认平台编码不支持您正在使用的文本中的所有字符，它也可能是有损的。

# php - ok I've made a plain api of google translate

> ID：14339106
> 
> 赞同：-4
> 
> 时间：2013-01-15T13:44:02.897
> 
> 标签：php, google-translate

I just need a way to use it in php it uses url params here is what I mean

```
<?php
$url = "http://raizen.tk/translate/?lang=".$_POST['lang']."&term=".$_POST['term'].;
$html = iconv("gb2312","utf-8",$html);
$ch = curl_init($url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_BINARYTRANSFER, true);
curl_setopt($ch, CURLOPT_ENCODING, "utf-8" );
$e = curl_exec($ch);
echo $e;
curl_close($ch);
?> 
```

my vps does not show php errors so i do not know why it wont work when i add the html can anyone help if you can then I would be so happy and that would mean google api would be free again :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T13:58:03.593

```
$url = "http://raizen.tk/translate/?lang=".$_POST['lang']."&term=".$_POST['term'].; 
```

has an extra `.` at the end of the line before the semicolon. Try this:

```
$url = "http://raizen.tk/translate/?lang=".$_POST['lang']."&term=".$_POST['term']; 
```

# http - 可以使用 curl 来模拟持久（但空闲）的打开连接

> ID：14339111
> 
> 赞同：19
> 
> 时间：2013-01-15T13:44:26.063
> 
> 标签：http, curl, firewall

我遇到了一些 Http Client 连接返回 NoHttpResponseException 大约 3 次的问题。

我的假设是防火墙正在关闭空闲连接（并不罕见）。我想用 curl 来模仿这个。

我一直在尝试这样的事情，但很可能连接永远不会空闲

```
curl --keepalive-time 60 --limit-rate 128B $URL $URL $URL $URL $URL $URL $URL $URL $URL $URL $URL $URL $URL $URL 
```

我想要的是类似于

```
curl $URL
sleep 10
curl $URL    
sleep 20
curl $URL 
sleep 30
curl $URL 
```

每次（使用一些魔法！）Curl 重用相同的连接。

有没有办法使用 curl（或 wget）来做到这一点，而不必编写程序来做到这一点

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-28T22:44:44.923

netcat 没有什么是你不能做的。

```
REQ="GET / HTTP/1.1\nHost: localhost\nAccept: *\n\n"
(echo -ne $REQ; sleep 1; echo -ne $REQ; sleep 2; echo -ne $REQ) | netcat localhost 80 
```

如果需要，将路径更改为与 / 不同的路径...

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-23T09:13:36.407

不，curl 和 wget 都无法做到这一点。当工具退出时，它将*关闭*所有连接。

我想说对你来说最好的选择是使用脚本语言，也许还有一个 libcurl 绑定，它允许你以更加程序化的方式来处理所有的 curl 魔法。这样你就可以做一个请求，休眠 10 秒，然后做另一个请求，然后它会尽可能地重复使用相同的连接。

几乎所有您选择的编程语言都有 libcurl 绑定可用，即使不使用 libcurl，您也可以实现此功能，尽管可能不那么容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T08:28:16.810

我不确定，但如果你允许使用编程选项，那么 PHP 中的多卷曲可以给你预期的结果，你也不需要使用睡眠。多卷曲将在并行过程中运行所有请求。

[多卷曲](http://php.net/manual/en/function.curl-multi-init.php)

如果你想使用它，我可以把代码发给你。

# javascript - 确定日期并输出“时间”（如果是今天）、“昨天”（如果是昨天）和实际日期（如果是在此之前）的 Javascript

> ID：14339114
> 
> 赞同：6
> 
> 时间：2013-01-15T13:44:33.357
> 
> 标签：javascript, string, date, time, trim

我正在创建一个简单的电子邮件客户端，我希望收件箱以以下格式显示收到电子邮件的日期：

今天 13:17

昨天 20:38

1 月 13 日 17:15

2012 年 12 月 21 日 @ 18:12

我正在从数据库中检索数据，将其输出到 xml（因此一切都可以通过 AJAX 完成）并将结果打印成某种`<ul><li>`格式。

日期和时间分别以以下格式存储：

`Date(y-m-d)`

`Time(H:i:s)`

![到目前为止我有什么](../Images/0822969a029834a3261666a224a874a8.png)

我看到使用 php 可以实现类似的功能。这里 - [PHP：日期“昨天”，“今天”](https://stackoverflow.com/questions/3454258/php-date-yesterday-today)

这可能使用javascript吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T14:23:54.320

我会做这样的事情

```
function getDisplayDate(year, month, day) {
    today = new Date();
    today.setHours(0);
    today.setMinutes(0);
    today.setSeconds(0);
    today.setMilliseconds(0);
    compDate = new Date(year,month-1,day); // month - 1 because January == 0
    diff = today.getTime() - compDate.getTime(); // get the difference between today(at 00:00:00) and the date
    if (compDate.getTime() == today.getTime()) {
        return "Today";
    } else if (diff <= (24 * 60 * 60 *1000)) {
        return "Yesterday";
    } else { 
        return compDate.toDateString(); // or format it what ever way you want
    }
} 
```

比你应该能够得到这样的日期：

```
getDisplayDate(2013,01,14); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T13:57:26.883

这是这两个答案的汇编（应该给你一个很好的开始）：

*   [在Javascript中计算日期差异的最佳方法是什么](https://stackoverflow.com/questions/327429/whats-the-best-way-to-calculate-date-difference-in-javascript)
*   [Javascript将毫秒显示为天：小时：分钟，没有秒](https://stackoverflow.com/questions/8528382/javascript-show-milliseconds-as-dayshoursmins-without-seconds)

我建议阅读问题和回复，以更好地了解正在发生的事情。

* * *

```
function DateDiff(date1, date2) {
    return dhm(date1.getTime() - date2.getTime());
}

function dhm(t){
    var cd = 24 * 60 * 60 * 1000,
        ch = 60 * 60 * 1000,
        d = Math.floor(t / cd),
        h = '0' + Math.floor( (t - d * cd) / ch),
        m = '0' + Math.round( (t - d * cd - h * ch) / 60000);
    return [d, h.substr(-2), m.substr(-2)].join(':');
}

var yesterdaysDate = new Date("01/14/2013");
var todaysDate = new Date("01/15/2013");

// You'll want to perform your logic on this result
var diff = DateDiff(yesterdaysDate, todaysDate); // Result: -1.00 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T15:36:48.753

```
function getDisplayDate(year, month, day) {
    today = new Date();
    today.setHours(0);
    today.setMinutes(0);
    today.setSeconds(0);
    today.setMilliseconds(0);
    compDate = new Date(year,month-1,day); // month - 1 because January == 0
    diff = today.getTime() - compDate.getTime(); // get the difference between today(at 00:00:00) and the date
    if (compDate.getTime() == today.getTime()) {
        return "Today";
    } else if (diff <= (24 * 60 * 60 *1000)) {
        return "Yesterday";
    } else { 
        //return compDate.toDateString(); // or format it what ever way you want
        year = compDate.getFullYear();
        month = compDate.getMonth();
        months = new Array('Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec');
        day = compDate.getDate();
        d = compDate.getDay();
        days = new Array('Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat');

        var formattedDate = days[d] + " " + day + " " + months[month] + " " + year;
        return formattedDate;
    }
} 
```

这是@xblitz 用我的格式回答以一种很好的方式显示日期。

# ember.js - 应用程序准备好后在应用程序控制器上设置控制器属性

> ID：14339116
> 
> 赞同：5
> 
> 时间：2013-01-15T13:44:40.163
> 
> 标签：ember.js

我正在尝试将我的主应用程序视图标题设置为当前公司名称。我需要通过ajax“/company.json”获取。

在我的 ApplicationController 中，我有一个“companyName”属性和一个名为“loadCompanyName”的方法，它将获取 companyName。问题是，我如何从应用程序就绪函数中引用这个实例化控制器。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-15T14:16:00.620

对于新的，您应该更喜欢在 App.ready() 函数中执行此操作。

通常我会在 ApplicationRoute 的 setupController() 函数中执行此操作：

```
App.ApplicationRoute = Ember.Route.extend({
  setupController: function(controller, model){
    controller.loadCompanyName();
    this._super(controller, model);
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T14:05:25.910

如果您使用旧的路由器 API (=ember-pre)，您可以使用：

```
var controller = App.get("router.applicationController");
controller.loadCompanyName(); 
```

# android - Progressbar 和 progressDialog 有什么区别？

> ID：14339119
> 
> 赞同：26
> 
> 时间：2013-01-15T13:44:51.927
> 
> 标签：android, progress-bar

我到处搜索并阅读了谷歌的官方文档。但我仍然看不出它们之间的区别。

什么时候应该使用 ProgressBar，什么时候应该使用 ProgressDialog？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-01-15T13:55:43.467

`ProgressBar`：

![](../Images/5dae91991243a825f2852976e45efcd3.png)

`ProgressDialog`：

![](../Images/19df82dc5f8276b31d4ab802c8fba4de.png)

是`ProgressBar`一个`View`，`ProgressDialog`是一个`Dialog`。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2015-02-10T16:28:08.980

虽然这里的答案提供了丰富的信息，但没有一个真正解决了这个问题。

*   当您想阻止用户在等待时与应用程序交互时，请使用 ProgressDialog。Dialog 方面冻结用户做任何事情，直到它被解雇。请注意 ProgressDialog 背后的 UI 是如何变灰且无法访问的。

![进度对话框示例](../Images/ba5d1c2c7504d29c0150f12c49ccad59.png)

*   使用 ProgressBar 来指示您的应用程序中的某些内容仍在等待（加载、思考等），而用户仍可能与其他部分进行交互。在这张图片中，用户仍然可以在等待 GPS 响应的同时填写表格。

![进度条示例](../Images/db30608a2309ee9e2a8e4d8b0dd971d1.png)

（感谢[Johnny S](http://huuah.com/dialog-boxes-in-android/)提供 ProgressDialog 的图片。）

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2013-01-15T13:51:00.847

ProgressBar 是一个 View（如 TextView、ImageView、Button 等），可以在您的布局中使用它来显示一些进度。

ProgressDialog 是一个带有“内置”ProgressBar 的对话框。对话框可用于让用户在计算某些内容时等待。ProgressDialog 可以更轻松地在对话框中显示计算进度。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-08-31T23:49:43.820

除了其余答案中指出的差异之外，您还应该考虑[Dialogs @ Android Developer](http://developer.android.com/guide/topics/ui/dialogs.html)的以下建议：

> **避免 ProgressDialog**
> 
> Android 包含另一个名为的对话框类`ProgressDialog`，它显示带有进度条的对话框。但是，如果您需要指示正在加载或不确定的进度，则应遵循**Progress & Activity**`ProgressBar`的设计指南并在布局中使用 a 。

考虑以下答案也可能有用：

*   [https://stackoverflow.com/a/12559601/2482894](https://stackoverflow.com/a/12559601/2482894)
*   [如何避免Android中的ProgressDialog](https://stackoverflow.com/q/14481820/2482894)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-15T13:51:48.103

当您的迭代是可数的（在循环中执行操作，执行代码 x 次等）使用 ProgressBar，如果任务不可数状态（如调用 Web 服务）使用 ProgressDialog

来自安卓文档

> **ProgressBar** : 某些操作的进度可视化指示器。向用户显示一个条形图，表示操作进行了多远；应用程序可以在向前移动时更改进度量（修改条的长度）。还有一个可显示在进度条上的辅助进度，这对于显示中间进度很有用，例如流式播放进度条期间的缓冲区级别。
> 
> **ProgressDialog**：显示进度指示器和可选文本消息或视图的对话框。只能同时使用文本消息或视图。

# php - 访问另一个 PHP 文件中的 POST 变量

> ID：14339123
> 
> 赞同：0
> 
> 时间：2013-01-15T13:45:05.593
> 
> 标签：php, mysql, sql, forms, variables

> **可能重复：**
> [在 url 中传递一个 php 变量的最简单方法](https://stackoverflow.com/questions/14331479/simplest-method-of-passing-one-php-variable-in-a-url)

我正在做一个测验应用程序。在教师端，教师可以输入主题名称（我将使用它形成一个虚 URL），然后输入 3 个带有可能选项的问题，包括其中一个的答案。每次教师创建测验时，都会创建一个包含问题、选项和答案的新表格。

我的 db.php 文件：

```
<?php
mysql_connect("localhost","root","");
mysql_select_db("quiz");
?> 
```

我的faculty.php文件：

```
<form action="fac_handler.php" method="POST">
Quiz Topic:<br><input type="text" name="topic"><br><br>Enter Questions:<br><br>
<?php
$a="a";
$b="b";
$c="c";
$d="d";
for ($i=1; $i<=3;$i++) 
{ 
?>
Question <?php echo $i?>:<br>
<textarea type="text" name="<?php echo "q".$i;?>"></textarea><br>
<br>
<input type="text" name="<?php echo $a.$i; ?>">&nbsp;&nbsp;
<input type="text" name="<?php echo $b.$i; ?>">&nbsp;&nbsp;
<input type="text" name="<?php echo $c.$i; ?>">&nbsp;&nbsp;
<input type="text" name="<?php echo $d.$i; ?>">&nbsp;&nbsp;<br><hr>
<?php
}
?>
<br>
<input type="submit" value="Submit">
</form> 
```

我的 fac_handler.php 文件：

```
<?php
require "db.php";

if(isset($_POST['topic']) && !empty($_POST['topic']))
{
$topic=$_POST['topic'];

if(isset($_POST['q1'])&&isset($_POST['a1'])&&isset($_POST['b1'])&&isset($_POST['c1'])&&isset($_POST['d1'])) 
{
if(!empty($_POST['q1']) && !empty($_POST['a1']) && !empty($_POST['b1']) && !empty($_POST['c1']) && !empty($_POST['d1'])) 
{
$q1=$_POST['q1'];
$a1a=$_POST['a1'];
$a1b=$_POST['b1'];
$a1c=$_POST['c1'];
$a1d=$_POST['d1'];  
}
else
{
    echo "Please Set the Questions and the Options!";
    die();
}
} 
if(isset($_POST['q2'])&&isset($_POST['a2'])&&isset($_POST['b2'])&&isset($_POST['c2'])&&isset($_POST['d2']))
{
if(!empty($_POST['q2']) && !empty($_POST['a2']) && !empty($_POST['b2']) && !empty($_POST['c2']) && !empty($_POST['d2']))
{
$q2=$_POST['q2'];
$a2a=$_POST['a2'];
$a2b=$_POST['b2'];
$a2c=$_POST['c2'];
$a2d=$_POST['d2'];  
}
else
{
    echo "Please Set the Questions and the Options!";
    die();
}
}
if(isset($_POST['q3'])&&isset($_POST['a3'])&&isset($_POST['b3'])&&isset($_POST['c3'])&&isset($_POST['d3']))
{
if(!empty($_POST['q3']) && !empty($_POST['a3']) && !empty($_POST['b3']) && !empty($_POST['c3']) && !empty($_POST['d3']))
{
$q3=$_POST['q3'];
$a3a=$_POST['a3'];
$a3b=$_POST['b3'];
$a3c=$_POST['c3'];
$a3d=$_POST['d3'];  
}
else
{
    echo "Please Set the Questions and the Options!";
    die();
}
}  
$ans1=$a1a;
$ans2=$a2a;
$ans3=$a3a;

$qtbname="q_".$topic;
$top=$_SESSION['topic']=serialize($_POST['topic']);
$new="q_".$top;

$create_table="CREATE TABLE $qtbname(id int NOT NULL AUTO_INCREMENT,question VARCHAR(500),answer VARCHAR(30),optiona VARCHAR(30),optionb VARCHAR(30),optionc VARCHAR(30),optiond VARCHAR(30),PRIMARY KEY (id))";
mysql_query($create_table);

$query1="INSERT INTO $qtbname VALUES('','$q1','$ans1','$a1a','$a1b','$a1c','$a1d')";
$query2="INSERT INTO $qtbname VALUES('','$q2','$ans2','$a2a','$a2b','$a2c','$a2d')";
$query3="INSERT INTO $qtbname VALUES('','$q3','$ans3','$a3a','$a3b','$a3c','$a3d')";

$result1=mysql_query($query1);
$result2=mysql_query($query2);
$result3=mysql_query($query3);

header("Location: student.php");
}
else
{
    echo "Please Set the Quiz Topic";
}
?> 
```

现在您可以看到，在每次使用表前缀动态创建表后，它会被重定向到如下所示的 student.php 文件。

我的 student.php 文件：

```
<?php
require "db.php";

$query="SELECT * FROM $new";
$result=mysql_query($query);
$n="1";
$i="a";

while($row=mysql_fetch_assoc($result))
{
echo "Question ".$n." : ".$row['question'];
echo "<br>";
$ansr=$row['answer'];
?>
<form action="std_handler.php" method="POST">
<input type="radio" name="<?php echo $i; ?>" value="<?php echo $row['optiona']; ?>"><?php echo $row['optiona']; ?>
<input type="radio" name="<?php echo $i; ?>" value="<?php echo $row['optionb']; ?>"><?php echo $row['optionb']; ?>
<input type="radio" name="<?php echo $i; ?>" value="<?php echo $row['optionc']; ?>"><?php echo $row['optionc']; ?>
<input type="radio" name="<?php echo $i; ?>" value="<?php echo $row['optiond']; ?>"><?php echo $row['optiond']; ?><br>
<?php
++$i;
++$n;
}
?>
<input type="submit" value="Submit">
</form> 
```

这个 student.php 文件的第四行，查询，**$query="SELECT * FROM $new";** ，我需要访问我刚刚在教员端创建的表格，以文本和单选按钮格式显示问题和答案。

这是我的 std_handler.php 文件：

```
<?php
if(isset($_POST['a']))
{
$ans=$_POST['a'];
echo $ans;
echo "<br>";
}
if(isset($_POST['b']))
{
$ans=$_POST['b'];
echo $ans;
echo "<br>";
}
if(isset($_POST['c']))
{
$ans=$_POST['c'];
echo $ans;
echo "<br>";
}
?> 
```

在教师处理程序文件中，验证后，我尝试使用会话并获取变量，我尝试使其成为全局变量，我尝试对其进行序列化，我无法成功使用并选择 student.php 中的动态表名页。

我想要的是，一旦我被重定向到 student.php 页面，我想选择之前立即创建的表，我该怎么做？如何访问我创建表并在教员端执行查询的变量？

我不断收到此错误：**注意：未定义变量：第 4 行 C:\xampp\htdocs\quiz\student.php 中的新变量**

请帮我解决这个问题。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T13:56:58.167

你想要这样的东西：

**不好的解决方案，但你可以看到如何传递一个变量**

在 fac_handler.php 中：

改变

```
header("Location: student.php"); 
```

到

```
header("Location: student.php?url=". urlencode($new)); 
```

在学生页面上：

```
$query="SELECT * FROM " . mysql_real_escape_string($_GET["url"]); 
```

这是一种方法，但如果我在你的地方，我会以另一种方式做到这一点。

**我会怎么做**

创建一个您发送的 ID，并将该名称解析为行程数据库名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T13:52:31.050

如果我不得不猜测，我会这么说。当它给你这个错误时：**注意：未定义的变量：第 4 行的 C:\xampp\htdocs\quiz\student.php 中的新变量**是因为它就是这样。如果我们看这里的代码：

```
require "db.php";

$query="SELECT * FROM $new";
$result=mysql_query($query);
$n="1";
$i="a"; 
```

这是你的学生.php ^^^

您没有设置 $new 的值。

所以你需要实际定义值。

```
$new = $_GET['x'];
$query="SELECT * FROM $new";
$result=mysql_query($query);
$n="1";
$i="a"; 
```

其中 x 是您作为查询值传递的任何内容。

或类似的规定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T14:24:53.063

好的，我解决了这个问题，这就是我所做的。

我从 fac_handler.php 页面中删除了这两个：

```
$top=$_SESSION['topic']=serialize($_POST['topic']);
$new="q_".$top; 
```

下面几行，我将标题位置更改为：

```
header("Location: student.php?url=".$qtbname); 
```

在 student.php 页面中，我将查询更改为：

```
$query="SELECT * FROM " . mysql_real_escape_string($_GET["url"]); 
```

对于上面的最后两个修改，我衷心感谢劳伦斯。此外，Thunda 也非常感谢您给了我使用 GET 变量的想法。

deceze 和 tim.baker（在评论中）：也非常感谢您的建议，既然我解决了我的问题，我将按照您的建议进行规范化。

非常感谢stackoverflow，为此苦苦挣扎了很长时间。

# c++ - 如何正确结束正则表达式 url 匹配

> ID：14339128
> 
> 赞同：1
> 
> 时间：2013-01-15T13:45:23.370
> 
> 标签：c++, regex

我一直在研究一个 url 解析器，但我在让结尾正确时遇到了一些麻烦

```
sregex rex = sregex::compile("((?:ftp|http|https)://)([^<>\\s/]+/+[^\\s\"<>]+([^)\\s\\\"<>$]*[\\)$]*))", sregex::icase ); 
```

如果字符串前面没有正斜杠（ ） ，我不希望`)`在字符串末尾有一个。`\`它也不能以`"`、`\` `<`或`>`空格结尾。我的努力是：

```
 ([^)\\s\\\"<>$]*[\\)$]*) 
```

如何正确书写？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T02:27:18.667

你想要

*   允许可能以 \)、))、))) 结尾的字符串
*   拒绝以 "、\、<、>、空格或 ) 结尾的字符串
*   所有其他字符串都可以

最后一个关闭参数需要包含在拒绝字符中，以便如果字符串以 ) 结尾，则可以正确找到它

我在powershell中尝试了这个，它按预期工作。

```
clear

foreach ($String in @("", "abc", "abc\)", "abc>", "abc<", "abc\", "abc""", "abc)", "abc))", "abc)))", "abc ", "abc`t")) {
    if ( $String -match '((?<!(["\\<>)]|\s))$)|((?<=\\|\){1,})\)$)' )  {
        Write-Host "'$String' is good"

        } else {
        Write-Host "'$String' is bad"
        } # end if
    } # next string 
```

我正在使用两个由“或”管道分隔的正则表达式lookbehinds

```
((?<!(["\\<>)]|\s))$) 
```

验证被拒绝的字符不在字符串的末尾

```
((?<=\\|\){1,})\)$) 
```

如果最后一个字符是 a ) 那么它前面应该有一个 \ 或者一个或多个)

这个小例程产生以下输出：

```
'' is good
'abc' is good
'abc\)' is good
'abc>' is bad
'abc<' is bad
'abc\' is bad
'abc"' is bad
'abc)' is bad
'abc))' is good
'abc)))' is good
'abc ' is bad
'abc    ' is bad 
```

# java - Android：调用 BitmapFactory.decodeStream() 时出现内存不足

> ID：14339130
> 
> 赞同：0
> 
> 时间：2013-01-15T13:45:33.033
> 
> 标签：java, android, memory, bitmap

我正在开发一个必须在屏幕上显示一些图片（通常由手机的相机拍摄）的 Android 应用程序。我创建位图的方式是：

```
Uri uri = Uri.withAppendedPath(Images.Media.EXTERNAL_CONTENT_URI, "" + mediaId);
bitmap = BitmapFactory.decodeStream(context.getContentResolver().openInputStream(uri)); 
```

第二行在某些手机上出现 OutOfMemoryException。我做错了什么，或者有没有其他方法可以做同样的事情？

提前感谢您的任何想法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T13:53:35.123

来自相机的照片有几 MB 大。Android 应用程序最多有 24MB RAM 可用（请参阅[Android 2.2 每个应用程序的最大内存限制是多少？](https://stackoverflow.com/questions/3590443/what-is-the-maximum-memory-limits-per-application-for-android-2-2)）

因此，如果您的应用程序有多个来自相机的图像，则它不会适合您的应用程序可用的 RAM。

恐怕缩小图像是唯一的解决方案......

# web-services - 如何将 WSSE 标头添加到我的 Web 服务客户端？

> ID：14339132
> 
> 赞同：0
> 
> 时间：2013-01-15T13:45:40.123
> 
> 标签：web-services, header, ws-security, soapheader

我想在 ASP 3.5 上将 wsse Security 标头添加到我的 Web 服务客户端。我使用这个 Soap Envelope 从 SoapUI 测试 Web 服务并得到答案：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:comp="http://myCompany.org.tr">   <soapenv:Header xmlns:env="http://schemas.xmlsoap.org/soap/envelope/">
 <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
 <wsse:UsernameToken xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd"/>
 <wsse:Username>MyUsername</wsse:Username>
 </wsse:Security>
</soapenv:Header>
<soapenv:Body>
    (Body Info.)

   </soapenv:Body>

</soapenv:Envelope> 
```

我想通过 Visual Studi 2012 创建的经典 Web 服务参考来创建这个信封。我应该使用哪个类将用户名信息添加到我的信封？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-13T14:59:35.370

谢谢约翰和拉迪斯拉夫。

事实证明，您应该通过 web.config 文件添加标头以获取正确排序的 SOAP 消息。否则，.Net 会尝试用自己的封装嵌套您的代码（即使您不要求它），并因此发送一些垃圾。

# dynamics-crm-2011 - CRM 解决方案的哪些部分是累积的，哪些部分不是？

> ID：14339140
> 
> 赞同：1
> 
> 时间：2013-01-15T13:46:06.980
> 
> 标签：dynamics-crm-2011

大多数解决方案更改在 CRM 中是累积的（添加实体、向实体添加字段、添加表单等），但有些不是（站点地图是目前我知道的唯一一个）。有没有人有一个累积的解决方案更改列表（允许自动合并是安全的），哪些更改不是？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T14:47:31.537

SDK 包括以下两篇关于您的问题的文章：

*   [了解托管解决方案如何合并](http://msdn.microsoft.com/en-us/library/gg309329.aspx)
*   [解决方案简介 - 冲突解决](http://msdn.microsoft.com/en-us/library/gg334576.aspx#BKMK_ConflictResolution)

我目前不知道更好的描述。

# browser - 尽管设置了 target=_blank，为什么 mailTo 链接仍会在同一窗口中打开 gmail？

> ID：14339142
> 
> 赞同：3
> 
> 时间：2013-01-15T13:46:13.050
> 
> 标签：browser, gmail, target, mailto

我正在尝试允许我们网站的用户单击链接并打开邮件应用程序/gmail 来撰写消息。我正在使用mailTo方法在mac上打开我的邮件应用程序，但是当我在浏览器设置（例如chrome和firefox）中将gmail设置为我的默认邮件应用程序时，它将在与单击链接的页面相同的窗口中打开gmail .

我知道 target=_blank 并不是真的用于 mailTo 链接，但我试过了，即使这样也没有在空白窗口中打开链接。

当然这不是这些浏览器中的错误，必须有办法做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T13:50:25.920

Mailto 在任何情况下都不会打开窗口或选项卡。如果您想使用窗口或选项卡，您需要配置表单并允许表单在您的窗口/选项卡中打开。当然，您必须配置表单以使用服务器上可用的任何方法发送邮件。

[资源](https://stackoverflow.com/questions/8549816/open-the-href-mailto-link-in-new-tab-window)

# inputstream - h.264 直播

> ID：14339145
> 
> 赞同：0
> 
> 时间：2013-01-15T13:46:27.463
> 
> 标签：inputstream, h.264, red5, flash-media-server, wowza

经过几天的研究，我仍然迷失了这个问题：

我有一个通过 WiFi 连接到我的 Android 设备的网络摄像头。我编写了一个 Android 应用程序来连接到网络摄像头的指定 Socket（IP 和端口）。从这个 Socket 我得到一个已经用 H.264 编码的 InputStream。然后我将此 InputStream 从 android 设备重定向到我的服务器，在那里我设法使用 Xuggler 将其解码为图像/帧。

我想将我的网络摄像头直播到互联网到 Flash 播放器或其他东西。我知道我必须为此使用 Wowza、FMS 或 RED5。

我的问题是，我不明白如何处理我拥有的 InputStream。我读过的所有示例都需要一个 mp4/flv 或其他容器文件来流式传输……但我有一个连续的实时 InputStream。其他一些示例考虑使用 Flash 编码器。但是我的 InputStream 已经用 H.264 编码了。

这是一个普遍的理解问题。请告诉我如何解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T02:01:48.447

why flash if I may ask, hope you know that HTML5 video tag now directly accepts h264 encoded videos.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T14:03:22.303

您有以下选择 -

1.  在 flv 容器中编码。是的，您可以使用 flv 容器传输实时流。您可以将标题中的“持续时间”字段设置为任意长度。例如 youtube 使用这个技巧进行直播。

2.  您可以将流编码为 RTMP。ffmpeg 有可用于理解的 rtmp 代码，或者我相信还有其他可用的开源 rtmp 多路复用器。

3.  将流转换为 HLS，有基于 Flash 的 HLS 播放器可用。

# javascript - 到 socket.io 服务器的服务器端连接

> ID：14339152
> 
> 赞同：1
> 
> 时间：2013-01-15T13:46:49.233
> 
> 标签：javascript, node.js, websocket, socket.io

我有一个 Java 服务器，它通过 web-sockets 与 web 浏览器连接，特别是 socket.io，特别是这个实现：[https ://github.com/mrniko/netty-socketio](https://github.com/mrniko/netty-socketio)

现在我想连接到同一台服务器，不是从网络浏览器（通过 Javascript），而是从 Node.JS 程序。

问题是，在我发现的所有示例中，Node.JS 程序都是服务器，而客户端始终是 Web 浏览器。

我尝试使用类似于 node.js 中客户端连接代码的代码：

```
var io = require('socket.io');
var socket = io.connect("http://localhost:9080"); 
```

但收到此错误：

```
TypeError: Object #<Object> has no method 'connect' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T13:50:06.900

您需要使用 socketio-client

```
$ npm install socket.io-client 
```

[https://github.com/LearnBoost/socket.io-client](https://github.com/LearnBoost/socket.io-client)

然后，您可以通过以下方式连接到另一个套接字服务器：

```
var io = require('socket.io-client');
var socket = io.connect('http://domain.com');
socket.on('connect', function () {
  // socket connected
}); 
```

# iphone - UIAlertView - 访问子视图，滚动

> ID：14339153
> 
> 赞同：2
> 
> 时间：2013-01-15T13:47:01.800
> 
> 标签：iphone, ios, cocoa

我在我的 iPhone 应用程序中实现了类似 Eula 的东西。只有当用户阅读整个 Eula（沿整个长文本滚动）时，我才需要启用确认按钮。

我正在使用 UIAlertView，内部文本很长。多亏了这一点，警报视图中的文本字段在其右侧有一个滚动条。

我需要访问此滚动的代表，因为只有当用户使用可滚动文本向下滚动时我才需要启用确定按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T15:59:52.970

如果您打算在 AppStore 上发布此应用程序，则无法使用内置的 UIAlertView 执行此操作。UIAlertView 没有任何方法，它的委托协议也没有给你这种信息。

可能你可以通过 UIAlertView 实例的子视图来实现这个迭代，但是这样做会保证你的应用程序被拒绝:-)

您唯一能做的就是创建自己的“MYAlertView”组件

# asp.net - 根据 IHtmlString 的上下文使用不同的 HTML 编码

> ID：14339156
> 
> 赞同：1
> 
> 时间：2013-01-15T13:47:06.347
> 
> 标签：asp.net, html-encode, html, ihtmlstring

如果您查看反 XSS 库，它们通常对 HTML 内容和 HTML 属性具有不同的编码。例如使用[微软的 WPL 实现](http://wpl.codeplex.com/)：

```
<@ Imports Namespace="Microsoft.Security.Application" %>

<span attribute="<%= AntiXss.HtmlAttributeEncode(attrVariable) %>">
    <%= AntiXss.HtmlEncode(contentVariable) %>
</span> 
```

现在 ASP.Net 添加了编码蜜蜂刺，使这更容易：

```
<span attribute="<%: attrVariable %>">
    <%: contentVariable %>
</span> 
```

然后，您可以[指定要在 web.config 中使用的编码器](http://haacked.com/archive/2010/04/06/using-antixss-as-the-default-encoder-for-asp-net.aspx)：

```
<system.web>
    <httpRuntime encoderType="AntiXssEncoder, AssemblyName"/> 
```

这里的编码器知道是调用`HtmlAttributeEncode`还是`HtmlEncode`依赖上下文。

我的问题是我有一个实现的智能类`IHtmlString`- 这告诉`<%:`语法完全绕过它。但是我仍然想根据上下文进行不同的编码：

```
<% var item = GetImplementationOfIHtmlString() %>

<span attribute="<%: item %>"> <!-- attribute encodes -->
    <%: item %>                <!-- HTML encodes -->
</span> 
```

有什么方法`IHtmlString.ToHtmlString`可以了解上下文（HTML 内容的编码或属性内部）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T17:04:03.443

不可以。自定义 HtmlEncode 方法的约定是它们还必须适用于属性编码（当属性值被引号括起来时）。这样 <%: %> 语法不需要上下文感知。

# iphone - 单击 10 分钟后停用按钮 (iOS)

> ID：14339161
> 
> 赞同：1
> 
> 时间：2013-01-15T13:47:14.107
> 
> 标签：iphone, ios, xcode

我的 iOS 应用中有按钮：

```
 _Button = [UIButton buttonWithType:UIButtonTypeCustom];
    UIImage *shareIMG = [UIImage imageNamed:@"button.png"];
    [_Button setBackgroundImage:shareIMG forState:UIControlStateNormal];
    [_Button setBackgroundImage:[UIImage imageNamed:@"button_active.png"] forState:UIControlStateHighlighted];
    [_Button addSubview:titleLabel];

    UILabel * titleLabel = [[UILabel alloc] initWithFrame:CGRectMake(0, 3, shareIMG.size.width, shareIMG.size.height)];
    [titleLabel setTextAlignment:UITextAlignmentCenter];
    [titleLabel setText:@"Button";
    [_Button addSubview:titleLabel];
    [titleLabel release];
    [_Button setFrame:CGRectMake(2 * self.sendPushButton.frame.origin.x + self.sendPushButton.frame.size.width , 380 - liteIndent1 - liteIndent2 + iphone5Fix, shareIMG.size.width, shareIMG.size.height)];
    [self addSubview:_Button]; 
```

您能帮我如何使此按钮处于非活动状态（button_non_active.png）并且在点击后 10 分钟内不可点击吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T13:52:58.493

```
// disable button
[_Button setEnabled:NO];

// run a selector after 10 minutes
[_Button performSelector:@selector(onEnableButton:) withObject:_Button afterDelay:(10.0 * 60.0)]

- (void) onEnableButton:(UIButton *)sender
{
 [sender setEnabled:YES];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T13:52:20.557

在同一个类中创建一个方法来重新启用它：

```
-(void)enableButton:(UIButton *)button {
    [button setBackgroundImage:[UIImage imageNamed:@"button_active.png"] forState:UIControlStateHighlighted];
    button.enabled = YES;
} 
```

以及按下时将触发的选择器（您的代码段中似​​乎缺少这个。用 设置它`[_Button addTarget:self action:@selector(buttonPressed:) forControlEvents:UIControlEventTouchUpInside];`）

```
-(void)buttonPressed:(UIButton *)button {
    //do actual action here
    [button setBackgroundImage:[UIImage imageNamed:@"button_non_active.png"] forState: UIControlStateHighlighted];
    button.enabled = NO;
    [self performSelector: @selector(enableButton:) withObject: button afterDelay: 600.0];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T13:52:23.797

使用`

```
 btn.enabled=NO;`

  NSTimer  *   notificationTimer = [NSTimer scheduledTimerWithTimeInterval:10*60.0 target:self selector:@selector(enable) userInfo:nil repeats:No];

    -(void)enable
    {
    btn.enabled=YES;
    } 
```

修改它只是一个指导。根据需要设置重复是或否

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T13:53:22.500

单击按钮时，您必须调用一个函数。

```
- (void)buttonClickedStartTimer
{
    _Button.userInteractionEnabled = FALSE;
    NSTimer *timer = [NSTimer scheduledTimerWithTimeInterval:10 target:self selector:@selector(stopTimer) userInfo:nil repeats:YES];

}

- (void)stopTimer
{
     _Button.userInteractionEnabled = TRUE;
    [timer invalidate];
    [timer release];
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-15T13:55:30.193

```
  _Button = [UIButton buttonWithType:UIButtonTypeCustom];
    [_Button setImage:[UIImage imageNamed:@"button_active.png"] forState:UIControlStateNormal];
    [_Button setImage:[UIImage imageNamed:@"button_non_active.png"] forState:UIControlStateDisabled];
    [_Button addSubview:titleLabel];
   [_Button setEnabled:NO];

    int64_t delayInSeconds = 60.0 * 10;
    dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, delayInSeconds * NSEC_PER_SEC);
    dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
       [_Button setEnabled:YES];
    });

```

# database - 使用 git/gerrit 进行迭代数据库迁移

> ID：14339163
> 
> 赞同：1
> 
> 时间：2013-01-15T13:47:18.163
> 
> 标签：database, git, migration, gerrit

问题：如何处理具有缓慢提交/gerrit 的顺序数据库迁移脚本。

设置如下：

*   数据库表的持续开发是通过添加具有顺序名称的文件（12.sql、13.sql、14.sql 等）来完成的
*   在数据库中设置了版本号
*   迁移工具根据文件检查版本，以查看是否有未处理的数据库迁移

这种方法的主要问题（否则效果很好）是，当两个开发人员同时添加迁移脚本时，他们中的最后一个提交将发生合并冲突。在 subversion 中（我们一直使用到现在），这是一个树冲突，提交者通过还原该文件并使用新文件名添加它来处理，作为最后一个操作。由于我们在主干上使用了这些东西，他们通常会设法修复文件名作为最后的快速操作。

现在我们正在迁移到 git，冲突将改为在文件中显示为差异，这使得分离两个提交的文件（它们可能是不同提交包的一部分，以及其他文件）变得更加棘手。此外，由于我们使用 gerrit 进行代码审查，因此在将文件推送到主 git 存储库之间会有延迟，因此时不时会出现这种情况：

1.  你推送一个迁移
2.  Gerrit 在代码审查后发生冲突
3.  您通过重命名文件来解决冲突，并推送新的提交（必须重新审查）
4.  在代码审查之前，有人设法进行了新的迁移，因此 Gerrit 再次发生冲突
5.  您通过重命名文件来解决冲突，并推送新的提交（必须重新审查）
6.  从 4 开始重复，直到你幸运并且 Gerrit 成功提交迁移。

解决这种情况的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T20:12:21.133

我使用[liquibase](http://www.liquibase.org/)来管理我的数据库迁移。

它使用 XML 语法来描述数据库的每个“变更集”。虽然这可能是采用的障碍，但我发现它将来自不同开发人员的贡献合并到同一个文件中变得更加容易。

```
<changeSet id="bob-20130115-1" author="bob">
    <createTable tableName="commontable">
       ..
       ..
    </createTable>
</changeSet>

<changeSet id="tom-20130115-1" author="tom">
    <addColumn tableName="commontable">
        <column name="newcolumn" type="varchar(255)"/>
    </addColumn>
</changeSet> 
```

使用 liquibase 的第二个优点是它支持回滚。如果发生冲突，我们可以撤消变更集，将我们带回上一个稳定版本，修复迁移文件并执行全新更新。

如果您没有切换工具的奢侈，那么我建议也许采用 liquibase 的方法，将 DEV 期间的每次迁移都视为“变更集”。每次迭代使用单个迁移文件，并在每个开发人员贡献的开始和结束处添加注释。在合并冲突的情况下，不要尝试重新编写 SQL，而是重新排序，以便一个开发人员的更改在其他人之前或之后。（强制其他开发人员创建另一个文件的方法是有效的，但我发现在实践中很难实施，因为第三个开发人员稍后出现并与序列中的下一个数字冲突......）

在没有回滚功能的情况下管理集成环境很棘手......除了每次都从头开始重建数据库之外，我不知道任何简单的方法。也许唯一有效的方法是听从 VonC 的建议，将数据库更改者的数量保持在最低限度。

笔记：

*   每个使用自己的数据库的开发人员都是给定的。您正在使用迁移工具，因此应该没有异议。它简化了问题，尤其是当您需要消除和重建架构时。它还迫使您解决“测试数据”挑战....当我在一个测试数据位于单个数据库实例中的项目上工作时，我会努力工作....
*   我最近发现[SQL Alchemy migrate](http://code.google.com/p/sqlalchemy-migrate/)具有与 liquibase 相同的回滚功能。它强制您为每次迁移编写前滚和回滚脚本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T15:17:42.443

我将 Liquibase 作为一种解决方案。恕我直言，Mark O'Connor 没有很好地指出 Liquibase 的一个属性是，Liquibase 维护一个已应用变更集的**列表，而不是您方法****中最后**应用的变更。

因此（只要更改标识符不冲突）分支不是问题。Liquibase 简单地应用所有尚未在 XML 中按顺序应用的未完成的变更集。作为检测冲突的功能，Liquibase 还存储了变更集源代码本身的 MD5 哈希，因此它也能够检测到变更“XY”本身的内容已更改。在这种情况下，您必须手动找出问题所在，并教导您的开发人员同事在任何第三方应用后不要更改任何变更集。

如果您*不想切换/引入*像 liquibase 这样的新数据库版本控制工具，我认为您可以轻松地将自定义方法扩展到这个方向。只需维护已应用更改的列表，只要您的文件名不匹配，您就可以很好地处理分支。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T13:51:51.893

> 两个开发者同时添加一个迁移脚本

他们需要在自己的分支上进行修改，并触发对 Gerrit 的单独审查。
集成商（或两个开发人员之一）将负责合并和审查两个开发工作。

那，或者两者之间的通信需要改进，如果“dev 1”需要获得一些补丁（代表“dev 2”的工作）首先在“dev 1”的工作树中。

# eclipse - Eclipse m2e 不允许 SNAPSHOT 依赖项及其项目在工作区中打开

> ID：14339165
> 
> 赞同：1
> 
> 时间：2013-01-15T13:47:26.440
> 
> 标签：eclipse, maven, m2eclipse, m2e, snapshot

我对 Maven + Eclipse (m2e) 中的 SNAPSHOT 依赖项有一个非常奇怪的问题。在项目 AuditingWebService-installer 中，我依赖于 IDS-Utils-1.3.2-SNAPSHOT，这也是我工作区中的一个开放项目。如果我保持打开 IDS-Utils 项目，我在 AuditingWebService 上会出现错误（缺少工件 it.ids:IDS-Utils:jar:1.3.2-SNAPSHOT）。我必须关闭 IDS-Utils 项目才能清除错误。为什么？这仅发生在 SNAPSHOT 依赖项中，而不发生在发布中。显然，来自命令行的 maven 可以正确编译。

PS 我已将“解决来自工作区项目的依赖项”设置为 false，因为如果导入项目作为 webapp 启动，WTP 将无法正常工作。

![这是工作空间的情况](../Images/eb7449f06ec831d407c9a97bd5d9bed5.png)

# javascript - 如何在javascript中存储值并在需要时进行比较

> ID：14339168
> 
> 赞同：-1
> 
> 时间：2013-01-15T13:47:39.767
> 
> 标签：javascript, html, hashmap

我有以下值需要在 javascript 中进行硬编码和比较

值为：

```
SR = PlantWRShippingMail@shawinc.com
26 = Plant26ShippingMail@shawinc.com
29 = Plant29ShippingMail@shawinc.com
30 = Plant30ShippingMail@shawinc.com
34 = Plant34ShippingMail@shawinc.com
54 = Plant54ShippingMail@shawinc.com
41 = Plant41ShippingMail@shawinc.com
47 = Plant47ShippingMail@shawinc.com
DL = Plant.DL.Shipping.Mail@shawinc.com
37 = Plant37ShippingMail@shawinc.com
MU = PlantMUShippingMail@shawinc.com
UC = PlantUCShippingMail@shawinc.com
NB = plantnbshippingmail@shawinc.com 
```

等等

我必须将该值与现有值进行比较，例如

```
var plantNo=document.getElementById('plantNo').value;
if(plantNo=`anyonevaluefromAbove`){
    //than get the value of it.
} 
```

怎么做我在javascript中做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T13:51:03.287

您可以简单地使用 JS 对象

```
var obj = {
SR: "PlantWRShippingMail@shawinc.com", ...
} 
```

然后简单地看

```
if(obj[plantNo]) {
// obj[plantNo] is value 
} 
```

这是你想要的吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T13:51:41.960

您需要使用对象将硬编码值存储为地图；首先将所有植物存储在一个对象中：

```
var plants = {
  SR: "PlantWRShippingMail@shawinc.com",
  26: "Plant26ShippingMail@shawinc.com",
  29: "Plant29ShippingMail@shawinc.com",
  // and so on
  NB: "plantnbshippingmail@shawinc.com"
}; 
```

然后使用以下方法从对象中查找值：

```
var plantNo=document.getElementById('plantNo').value;
if(plants[plantNo]){
  alert(plants[plantNo]);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T14:04:42.980

您可以将这些值存储在 javascript 对象中。

```
var someobj = {'SR' : 'PlantWRShippingMail@shawinc.com'
               // other keys
};

var plantNo=document.getElementById('plantNo').value;
if(someobj[plantNo]){
    alert(someobj[plantNo]); // than get the value of it.
} 
```

# android - 使用 NanoHTTPD 时，MediaPlayer 显示错误 (100,0)

> ID：14339173
> 
> 赞同：0
> 
> 时间：2013-01-15T13:48:08.993
> 
> 标签：android, video-streaming, media-player, nanohttpd

我正在开发一个视频流应用程序。在服务器上，我保护了 m3u8 文件。其中包含加密的 ts 文件（AES-128 加密）。我正在解析安全的 m3u8 文件，然后我下载 ts 文件并解密它们。

我将所有解密的文件存储在设备的外部存储位置。然后我创建一个新的 m3u8 文件，它指向所有解密的 ts 文件。

我正在使用[NanoHTTPD](http://elonen.iki.fi/code/nanohttpd/)类在设备本身上创建我的自定义服务器，这指向一个目录，我将所有解密的 ts 文件和新的 m3u8 文件放在该目录中。

然后我使用`VideoView`& 我在我的自定义服务器上将 m3u8 文件的 url 传递给它。

当我开始播放`VideoView`时，它可以很好地开始播放视频，但一段时间后它会显示一条错误消息“无法播放此视频”

在日志中我收到此消息

```
01-15 18:53:52.072: W/AudioSystem(16009): AudioFlinger server died!
01-15 18:53:52.072: W/IMediaDeathNotifier(16009): media server died
01-15 18:53:52.072: E/MediaPlayer(16009): error (100, 0)
01-15 18:53:52.072: E/MediaPlayer(16009): Error (100,0)
01-15 18:53:52.072: D/VideoView(16009): Error: 100,0 
```

我不知道问题出在哪里。在我的服务器或 VideoView 中。

我检查了所有加密的 ts 文件都已正确解密。＆我已经将我的自定义服务器的 m3u8 url 播放到 Android 播放器，它运行良好。

我也尝试过来自苹果的示例[m3u8 url](http://devimages.apple.com/iphone/samples/bipbop/gear1/prog_index.m3u8)，在这里我只是下载 ts 文件并动态创建我自己的 m3u8 文件。它工作正常。

请指导我在哪里以及我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T07:05:01.220

我解决了我的问题。问题在于解密。

# javascript - Firefox 滚动到顶部

> ID：14339182
> 
> 赞同：0
> 
> 时间：2013-01-15T13:48:56.413
> 
> 标签：javascript, firefox

我有一个运行良好的 ajax 调用，除了 FF 缓慢滚动到顶部。任何想法可能是什么原因。

```
$("#delete-team-dialog .btn-danger").unbind("click").click(function () {
    var contextPath = $.trim($("#context_path").text());

    $.ajax({
        type : 'DELETE',
        url :  contextPath + "/team/" + teamId,
        cache : false,
        success : function(data) {
            $(li).closest(".entered_teams_container").find(".number-of-teams").text(numberOfTeams -1);
            li.remove();
            $("#delete-team-dialog").modal('hide');
            startFormChanged();
            updateNumberOfParticipants();
            //If no teams left reload the page for redirect.
            if($(".team-row").length === 0){
                window.location.reload(true);
            }

        },  
        error : function(jqXHR, textStatus, errorThrown) {
            alert("....");
        }

    });

}); 
```

编辑：一些HTML

```
 <ul class="entered_teams">
                    <#list class6 as team>
                    <li class="row-fluid team">

                        <div class="span2">${((team.heat.date)?string("HH:mm"))!}</div>
                        <div class="span7 team">
                            ${team.enrollment.organization.name!?html}, 6\. trinn, lag${team.number?c} <#if !team.complete ><i class="icon-warning-sign text-error"></i></#if>
                        </div> 
                            <span class="delete pull-right"><i class="icon-trash"></i> Delete</span>  
                            <span class="edit pull-right">
                            <i class="pencil"></i> Edit</span>

                        <div class="team_setup row-fluid">
                            <button class="btn update-event-button">Save</button>
                        </div> <span class="team-id hidden">${team.id?c}</span>
                    </li> 
                    </#list>
                </ul 
```

# iphone - 将 iOS Aviary 集成到 iOS

> ID：14339184
> 
> 赞同：1
> 
> 时间：2013-01-15T13:49:04.790
> 
> 标签：iphone, ios, aviary

我已成功集成 iOS Aviary 全新项目，但未能按照完全相同的步骤在当前工作项目中这样做。（使用 XCode 4.5）。

我收到错误：

```
[AFPhotoEditorCustomization setVisualDefaults]: 
unrecognized selector sent to instance 0x9869210 
```

见图片：

[![附加堆栈跟踪](../Images/a6ba39fb17b1110fccebc132cae12d14.png)](https://i.stack.imgur.com/4xEkd.png)

快速堆栈跟踪：

在堆栈跟踪下的变量`[AFPhotoEditorCustomization options]`中，我可以看到变量：`resourceBundle`并且`path`都是`NIL`.

我怀疑这是资源包没有被正确读取的问题，可能是由于某些项目/目标设置...

知道在哪里寻找吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T08:15:27.797

我最终发现了问题。

必须在 TARGETS 而不是项目上设置 -ObjC -all_load -fobjc-arc 链接器标志。

# c++ - 我应该如何避免 MSSQL 超时？

> ID：14339185
> 
> 赞同：2
> 
> 时间：2013-01-15T13:49:07.637
> 
> 标签：c++, .net, sql-server

我有 2 个程序：

*   生成数据并将其插入 MSSQL 的服务器（用 C++ 编写并使用 ODBC 进行连接）。
*   从 MSSQL 读取数据并将其显示给用户的客户端（用 .NET（C#，VB）编写并使用 .Net SqlClient）。

现在我的问题是当我的服务器正在运行并将数据插入 MSSQL 时，我的客户端无法从中选择数据，甚至有时连接会失败。目前我在一台机器上同时运行服务器和客户端，但它们应该在网络上运行！我尝试增加`connection timeout`我的连接字符串，它有时会起作用，但并非总是如此。我的服务器负载不太高（可能每秒插入一个）。那么我的服务器出了什么问题，我应该怎么做才能找到错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T06:12:16.383

如果阅读客户端无法*连接*，您需要了解原因。这与其他客户写作无关。

如果读取客户端连接正常，但它发出的查询超时，并且查询应该在几秒钟内安全执行，这表明锁定（可能由从未提交的事务持有）。出现问题时，请检查服务器上的 sys.dm_tran_locks 之类的内容，以查找持有表锁的进程。

# android - 使用 MediaPlayer 进行视频流式传输

> ID：14339188
> 
> 赞同：0
> 
> 时间：2013-01-15T13:49:19.267
> 
> 标签：android, video, streaming

我尝试使用以下代码通过此链接流式传输视频：

```
VideoView mVideoView;
MediaController mMediaController = new MediaController(this);
mVideoView = (VideoView)findViewById(R.id.videoView1);
mVideoView.setMediaController(mMediaController);        
mVideoView.setVideoURI(Uri.parse("http://ref10.vn.aditmedia.net:8080/video?channel=1004&token=6436488"));
mVideoView.start(); 
```

但我无法流式传输此视频，尽管我在 Windows Media Player 上尝试此链接并且它可以流式传输此视频。任何人帮助我！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T13:53:37.510

查看您的网址，删除和之间的`http://ref10.vn.aditmedia.net:8080/video?`空格`channel=1004&token=6436488`

# c# - 从谷歌翻译中抓取 HTML

> ID：14339190
> 
> 赞同：1
> 
> 时间：2013-01-15T13:49:23.037
> 
> 标签：c#, .net, winforms, html-agility-pack, google-translate

我想使用谷歌翻译翻译一个字符串。

我的示例字符串是`"this is my string"`.

我想使用 HTML Agility Pack 来解析 HTML 文档。

我试过这个：

```
using HtmlAgilityPack; 

........

var webGet = new HtmlWeb();
var document = webGet.Load(
    "http://translate.google.com/#en/bn/this%20is%20my%20string");

var node = document.DocumentNode.SelectNodes(
    "//span[@class='short_text' and @id='result_box']");

if (node != null)
{
    foreach (var xx in node)
    {
        x = xx.InnerText;
        MessageBox.Show(x);
    }
} 
```

但我没有得到任何结果。

我的目标是使用谷歌翻译翻译一个完整的字符串，并在 Windows 窗体的标签中显示翻译后的字符串。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T13:59:21.953

这是一个坏主意。正如评论者所指出的，谷歌提供了一个程序化界面作为付费服务。谷歌肯定有适当的安全功能来试图阻止你正在做的事情，这就是它不起作用的原因。也许你可以让它以某种方式工作，但即使这样，你也总是面临谷歌提高其安全性和你的脚本再次被阻止的危险。此外，您几乎可以肯定违反了 Google 的使用条款。

**2017 更新：** [Microsoft Translator API](https://www.microsoft.com/en-us/translator/translatorapi.aspx)现在支持孟加拉语，每月最多可免费使用 200 万个字符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-06-08T17:05:08.017

使用 HTML Agility Pack 的基本示例

```
using System;
using HtmlAgilityPack;    
class Traslator
    {
        private string url;
        private HtmlWeb web;
        private HtmlDocument htmlDoc;

        public Translator(string langPair) // LangPair = "SL|TL" ( Source Lang | Target Lang - Ex.: "en|pt"
        {
            this.url = "http://www.google.com/translate_t?hl=en&ie=UTF8&text={0}&langpair=" + langPair;
            this.web = new HtmlWeb();
            this.htmlDoc = new HtmlDocument();
        }

        public string Translate(string input)
        {
            this.htmlDoc = web.Load(String.Format(this.url, Uri.EscapeUriString(input)));
            HtmlNode htmlNode = htmlDoc.DocumentNode.SelectSingleNode("//*[@id=\"result_box\"]");
            return htmlNode.InnerText;
        }
    } 
```

您的示例中出了什么问题：仅使用了 url...尝试检查 document.Text 道具以获取从 webGet 收到的 html...您将看到 span.result_box 将为空。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T13:51:09.660

与其依赖屏幕抓取，不如考虑使用谷歌为翻译服务提供的 API。

一些文档可以在[这里找到](https://developers.google.com/translate/v2/getting_started)

**更新：**

我相信您对屏幕抓取方法的问题可能是翻译应用程序使用 Ajax 调用服务器端并检索翻译。使用下载时得到的页面`HtmlWeb`只是JS应用程序，它实际上不包含翻译。直到从页面向服务器发出调用后才会填写。

# java - Web 服务失败，因为在 SOAPMessage 中添加了换行符/间距

> ID：14339195
> 
> 赞同：0
> 
> 时间：2013-01-15T13:49:46.030
> 
> 标签：java, web-services, soap

我正在创建一个 SOAPMessage 以通过 web 服务返回给客户端。在我的本地化测试（使用 TCPMon）期间，我将此 SOAPMessage 视为响应，但它会故障转移 Web 服务。

我使用 Wireshark 进行了一些诊断，发现此响应 xml(SOAPMessage) 已损坏，因为它在第 1024 个字符处添加了换行符。我不知道响应是否正确形成，并且由于某种原因，Wireshark 添加了换行符，或者此响应被真正损坏。我正在使用 Tomcat

要了解代码的结构，它类似于 -

在流程中的某个时刻，我设置了以下内容（我删除了这两行，但结果仍然相同）

```
//httpservletResponse.setContentType("text/html; charset=UTF-8");
//httpservletResponse.setCharacterEncoding("UTF-8"); 
```

在流程的后期，我执行以下操作

```
try {
servletOS = httpservletResponse.getOutputStream();
soapMessage.writeTo(servletOS);
servletOS.close();
} finally {
    httpservletResponse.flushBuffer();
} 
```

上面的代码只是给出一个基本的理解，请考虑它编译良好并且所有用户定义的值都正确设置。我正在努力缩小确切问题的可能范围，实际上是 SOAPMessage 由于其编码等原因？流被刷新/关闭等？客户？

我很乐意提供更多信息。

另请注意，使用 SAAJ 的类似过程在相同环境中工作得非常好。

这就是我建立回应的方式 -

```
MessageFactory messageFactory = MessageFactory.newInstance();
SOAPMessage soapMessage = messageFactory.createMessage();
SOAPPart responseSOAPPart = faultMessage.getSOAPPart();
SOAPEnvelope responseEnvelope = responseSOAPPart.getEnvelope();  
soapMessage.setProperty(SOAPMessage.CHARACTER_SET_ENCODING, "UTF-8");
soapMessage.setProperty(SOAPMessage.WRITE_XML_DECLARATION, "true");  
responseEnvelope.addNamespaceDeclaration("xsd", "http://........");
responseEnvelope.addNamespaceDeclaration("wsa", "http://......");
// and others  
SOAPHeader soapHeader = responseEnvelope.getHeader();  
// creating various SOAPHeaderElements viz. wsa:To,  wsa:Action, wsa:From etc. 
// and adding these to the SOAPHeader  
// Adding SOAPBody
SOAPBody body = soapMessage.getSOAPBody();
// add body element  
soapMessage.saveChanges() 
```

# python - 使用 matplotlib 键事件和修饰符

> ID：14339198
> 
> 赞同：4
> 
> 时间：2013-01-15T13:49:54.757
> 
> 标签：python, event-handling, matplotlib, modifier

```
import matplotlib
import matplotlib.pyplot as plt
print matplotlib.__version__
print plt.get_backend()

def key_event(e):
  print e.key

fig = plt.figure()
fig.canvas.mpl_connect('key_press_event', key_event)
plt.show() 
```

我对 matplotlib/pyplot 中带有修饰符（例如 Ctrl、Alt、Shift）的按键事件处理程序感兴趣。 [这](http://matplotlib.org/api/backend_bases_api.html?highlight=key%20event%20modifiers#matplotlib.backend_bases.KeyEvent)部分文档提到了对修饰符的一些支持。但是当我使用上面的代码时，我看不到这种行为。

我宁愿避免必须手动处理修饰符来维护有关这些按键/释放事件的状态；例如，我希望能够轻松区分`a`和`ctrl`+ `a`，而不必保持关于控制向上/向下的状态。

-我是否在某个地方错过了一些更高级别的界面，修改器在哪里起作用？
- 或者当我通常使用 TkAgg 时，文档的那部分可能只适用于 GTKAgg 后端？
-也许对修饰符的支持可能是最近添加的，但不在我的 matplotlib 1.1.1rc 版本中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T13:09:22.553

在看到上面的 mmgp 评论后，我尝试更新到存储库版本`git clone git://github.com/matplotlib/matplotlib.git`等，这给了我 1.3.x。Ubuntu 12.10 中的版本回到 1.1.1rc。

该问题在较新的版本中得到了解决，因此对修饰符的支持似乎只是最近添加的情况。

# php - Codeigniter 中的用户角色

> ID：14339199
> 
> 赞同：0
> 
> 时间：2013-01-15T13:50:02.307
> 
> 标签：php, codeigniter, jquery, user-roles

我想根据付款创建用户角色。我在 www.indiancupid.com 网站上看到了确切的系统。在那里注册后，您成为标准会员，您可以查看其他用户的个人资料，但在您付款之前无法联系他们，当您使用信用卡付款时，您将成为黄金会员。作为金牌会员，您可以发送消息并直接与在线会员聊天。当时间（您升级为黄金会员的时间）结束后，您将自动再次成为标准会员。

我想使用 CodeIgniter 制作这种类型的用户角色系统。

有人会建议我任何可以为我做的图书馆吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T14:47:41.567

好的，您已经描述了几乎每个约会/订阅网站的工作方式。

关于 codeigniter 的身份验证系统有很多问题，例如：

[我应该如何为 CodeIgniter 选择认证库？](https://stackoverflow.com/questions/346980/how-should-i-choose-an-authentication-library-for-codeigniter)

我只使用过 ion auth - [http://benedmunds.com/ion_auth/](http://benedmunds.com/ion_auth/)和 tank auth - [http://konyukhov.com/soft/tank_auth/](http://konyukhov.com/soft/tank_auth/)，这些似乎是最受最大用户群欢迎的。两者都可以轻松修改以具有不同级别的用户访问权限。事实上 ion 有这个开箱即用的功能，您只需将其放入您自己的组检查中。就我个人而言，我会建立在 ion auth 的基础上。Ion auth 是一个很好的库，它只有基础知识，允许您根据需要进行设置。在我看来，它也是最容易融入现有应用程序的，因为它是最小的性质

但是，如果您正在寻找准备好的东西，您可以查看 ezauth - [http://ellislab.com/forums/viewthread/70386/](http://ellislab.com/forums/viewthread/70386/)。我似乎记得这个访问级别和一个管理面板。不幸的是，演示已经消失（从来都不是一个好兆头），如果它不能完全按照您想要的方式工作，您可能会发现很难进行更改。

# c# - 如何在 89c51 微控制器中嵌入 C# 代码

> ID：14339201
> 
> 赞同：-2
> 
> 时间：2013-01-15T13:50:06.303
> 
> 标签：c#, embedded, .net-assembly

我正在处理一个与嵌入式系统相关的项目。我希望我的控制器（89c51 微控制器）在我单击一个按钮（采用 .NET 技术设计的 GUI）时做出响应（执行编程操作）。告诉我编程语言为控制器编写代码。我应该做什么，'我的硬件部分根据 GUI/Button 上的点击事件做出响应（在 .NET 中设计）还告诉我假定的步骤（用于在控制器上编译和刻录代码），以便我可以与微通信- 事件的控制器。我还想知道我必须拥有的必要工具（如果有的话）。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T14:15:47.123

89C51 不可能，因为它只有一个 8 位处理器。

如果你想运行嵌入式 C#，你需要一个 netduino 或 GHI fez 板，它们是低成本的 .net 微框架开发板。

如果问题是询问如何通过 C# 连接到 MCU，那么如所述的程序 MCU 以启用串行功能，然后使用 System.IO.Ports.SerialPort 类在 C# 中编写串行应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T13:58:17.820

我猜你是在问如何建立与[AT89C51](http://www.atmel.com/images/doc0265.pdf)的连接（点击查看数据表）。

AT89C51 似乎在端口 3 上带有一个串行端口。您需要 C 来对微控制器本身进行编程，但可以使用 C# 建立到端口 3 的串行连接。

有关如何使用 C# 建立串行连接的参考和示例，请参阅此类：[System.IO.Ports.SerialPort](http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T13:54:38.070

这是行不通的，因为您不能（使用通用编译器）将 C# 编译成嵌入式系统可以理解的本机代码。C# 编译为中间代码 (MSIL/CIL)，然后由运行时环境编译/执行（在大多数嵌入式系统中您不会拥有）。

在为实时嵌入式系统编程时，除非您的平台明确支持/基于 .NET Micro Framework，否则通常无法使用汇编（或者 C/C++，如果幸运的话），它也仅支持特定的子集桌面机器上可用的整个 .NET 运行时

# python - pymongo 有什么简短的介绍教程吗？

> ID：14339206
> 
> 赞同：6
> 
> 时间：2013-01-15T13:50:16.707
> 
> 标签：python, mongodb, pymongo

是否有一个 5 分钟的教程，涵盖`indexing`( `retrieval`+ `query`)`search`和`display`pymongo，类似于 lucene [http://www.lucenetutorial.com/lucene-in-5-minutes.html](http://www.lucenetutorial.com/lucene-in-5-minutes.html)？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-15T13:57:38.363

这是您正在寻找的[PyMongo 包的教程。](http://api.mongodb.org/python/current/tutorial.html)

# javascript - 是否可以使用文本和其他图像使用 javascript 生成 jpg

> ID：14339209
> 
> 赞同：0
> 
> 时间：2013-01-15T13:50:26.760
> 
> 标签：javascript, canvas, jpeg

我想创建包含图像和文本的练习的 jpg 文件。我想使用javascript。我知道使用 PHP 是可能的，但我不能使用它，它必须是无 Flash 客户端。也许与`<canvas>`元素？但这仅适用于 HTML5

普莱？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T14:16:55.873

是的，您可以使用画布创建它。但同样，它仅适用于支持 html5 的浏览器，您无法在不支持 HTML5 的浏览器中使用 javascript 来实现这一点。

# javascript - 只有当页面上的元素超过两个时，如何才能向元素添加另一个类？

> ID：14339212
> 
> 赞同：1
> 
> 时间：2013-01-15T13:50:36.993
> 
> 标签：javascript, jquery

我模拟了纸牌游戏——你可以[在这里](http://jsfiddle.net/Cvw69/7/)看到当我转动它们时，我将一个类“返回”给它们，它们的背景图像由一个公共 ID 给出。正如您在转动其中两个后看到的那样，它们又掉头了。但是，如果它们具有相同的图像，我想让它们保持转动。并且以任何方式我会尝试我无法弄清楚如何使用组合的长度，例如

```
if($('.back.#i1').length==2) {do smth} 
```

删除使它们可点击的类“面”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T13:54:33.123

不知道它是否能解决您的所有问题，但您对 ID 的使用并不是最好的：

```
<div id="content">
    <div id="i1" class="card face"></div>
    <div id="i2" class="card face"></div>
    <div id="i1" class="card face"></div>
    <div id="i2" class="card face"></div>
</div> 
```

你应该使用类：

```
<div id="content">
    <div class="i1 card face"></div>
    <div class="i2 card face"></div>
    <div class="i1 card face"></div>
    <div class="i2 card face"></div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T16:31:23.170

我查看了您的代码并在[此处](http://jsfiddle.net/WkTMr/2/)发布了一个工作版本 正如上一篇文章所指出的，您要确保您的元素具有唯一的 ID，否则在尝试定位它们时会遇到问题。所以是这样的：

```
<div id="content">
  <div id="i1" class="card face" cardFace="image1"></div>
  <div id="i2" class="card face" cardFace="image2"></div>
  <div id="i3" class="card face" cardFace="image1"></div>
  <div id="i4" class="card face" cardFace="image2"></div>
</div> 
```

我更新了您的 CSS 和代码中的逻辑以使用这些 div。代码现在所做的是在初始元素上单击它保存它没有变量的卡片面，然后将 div 设置为具有一个返回类和一个在第一个动画完成后代表图像的类

```
var myCardface = $(this).attr("cardFace");
...
//Toggle card back status
$(this).toggleClass('back');
// Set the image to be shown
$(this).toggleClass('back_'+myCardface); 
```

在第二个动画结束时，代码现在查找所有显示背面的卡片（不包括当前卡片）并检查它们是否具有相同的“cardFace”值。如果它们都标记为完成.

```
//Check for other open cards having the same cardFace value
$("#content").find(".back").not("#"+$(this).attr("id")).each(function(index){
if(myCardface == $(this).attr("cardFace")){
  matchFound = true;
  $(this).toggleClass('done');
}

if(matchFound == true){
  $(this).toggleClass('done');
} 
```

如果背面已打开两张卡片，则代码会将它们翻转回来，以免它们保持打开状态。

```
var unmatchedCards = $('.back:not(.done)').length
//Reset the cards
if(unmatchedCards == 2){
  $('.back:not(.done)').each(function(){
    $(this).animate({
      rotateY: "+=" + (Math.PI) / 2
    }, 500, function() {
      //Toggle card back status
      $(this).toggleClass('back');
      // Set the image to be shown
      $(this).toggleClass('back_'+$(this).attr("cardFace"));
    }).animate({
      rotateY: "+=" + (Math.PI) / 2
    }, 500);
  });
} 
```

让我知道这是否有帮助。

# asp.net - 将每个新字符串添加到现有的 Sting 列表

> ID：14339214
> 
> 赞同：0
> 
> 时间：2013-01-15T13:50:48.750
> 
> 标签：asp.net, vb.net

我正在尝试将`templateFields`我的 gridview 的值添加到`List(Of String)`. 这些`templateFields`由 2 组成`Labels`。我想要实现的是

1.  为了能够遍历 的每一行`GridView`，获取重复的 templateField 值。

2.  将行的`TemplateFields1`值存储在字符串中。

3.  将该字符串添加到字符串列表中。

这是我的代码：

```
For Each row As GridViewRow In GridView1.Rows`
    Dim stri As String
    Dim ttt As Label = DirectCast(row.FindControl("Title"), Label)
    Dim desc As Label = DirectCast(row.FindControl("lblDescription"), Label)
    stri = ttt.Text.ToString & desc.Text.ToString
    Dim list As New List(Of String)
    While (stri <> Nothing) 
        list.Add(stri)  ' Add every new string in a new index of the list 
    End While
Next 
```

因此，在`while`循环中，将`stri`其存储在`list(0)`然后继续`for loop`，获取下一个并将其存储在新的同时保持`stri`索引中，依此类推，直到所有完成。`list(1)``list(0)``templateField stri`

有什么想法或建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T13:59:13.640

您必须在循环外创建列表。我还将用语句替换`While`循环：`If`

```
Dim list As New List(Of String)

For Each row As GridViewRow In GridView1.Rows
    Dim ttt As Label = DirectCast(row.FindControl("Title"), Label)
    Dim desc As Label = DirectCast(row.FindControl("lblDescription"), Label)
    Dim stri As String = ttt.Text.ToString & desc.Text.ToString

    If (Not String.IsNullOrEmpty(stri)) 
        list.Add(stri)
    End If
Next 
```

# android - 如何使用 Android Intent 以编程方式启动 Instrumentation 项目？

> ID：14339216
> 
> 赞同：5
> 
> 时间：2013-01-15T13:50:50.357
> 
> 标签：android, android-intent, android-activity, robotium, instrumentation

开始测试用例的一种方法是，

```
adb shell am instrument 
  -w com.google.vishal.test/android.test.InstrumentationTestRunner 
```

我想使用 Android 代码开始这个（有意图）

例如，

```
adb shell am start -n com.google.android.contacts/.ContactsActivity 
```

我们可以通过以下方法使用 Android Intent 运行：-

```
Intent intent = new Intent(com.google.android.contacts, ContactsActivity.class);
startActivity(intent); 
```

但是，如何运行

```
adb shell am instrument 
  -w com.google.vishal.test/android.test.InstrumentationTestRunner 
```

由 Android 意图？

提前感谢您的帮助:-)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-17T05:47:53.640

从**adb shell启动****检测**的命令：-

 **```
adb shell am instrument -w com.android.vishal.project.test/android.test.InstrumentationTestRunner 
```

从**Android Activity**开始**检测**的 Android 代码：-

 **```
 startInstrumentation(new ComponentName("com.android.vishal.project.test", "android.test.InstrumentationTestRunner"), null, null); 
```

笔记 ：

其他方法，

用于启动检测的 Android 代码（Android 2.3 到 Android 4.1.2）

```
String str_cmd = "adb shell am instrument -w com.android.vishal.project.test/android.test.InstrumentationTestRunner";
Runtime.getRuntime().exec(str_cmd); 
```

对于 Android 4.2，它需要权限“android.permission.INJECT_EVENTS”& 只有系统应用程序才允许。由于某些安全原因，用户应用程序无法使用此权限。

所以你不能使用 Runtime.getRuntime().exec(str_cmd); 对于 Android 4.2 及更高版本...

所以现在的工作方法是：

```
 startInstrumentation(new ComponentName("com.android.vishal.project.test", "android.test.InstrumentationTestRunner"), null, null); 
```

从您的活动中执行此命令。

谢谢。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T07:20:00.783

这实际上是不可能的，原因是要通过 ADB 运行仪器，adb 出于安全原因具有某些特权，因此不能在手机上运行（与任何开源软件一样，它是当然可能，但你必须重写一些 android，然后它只能在你安装了它的手机上工作！）。

请问你这样做的原因是什么？如果你真的需要跨应用程序自动化，你更好的选择可能是我们新的 android ui 测试框架，或者只在模拟器上测试并使用在视图层次结构之上运行的东西，因为尝试你目前的状态是死胡同.****

# java - Android 上的 java.io 方法是否会抛出 InterruptedIOException？

> ID：14339224
> 
> 赞同：2
> 
> 时间：2013-01-15T13:51:26.277
> 
> 标签：java, android, exception-handling, interrupted-exception

我知道在引入*InterruptedIOException*时没有太多选择。它必须是*IOException*的子类。

*如果您想知道线程是否被中断，那么InterruptedIOException*的唯一存在无疑会让生活变得有点复杂。这是因为如果要维护线程被中断的信息，则必须将*InterruptedIOException*与*IOException区别对待。*

虽然*InterruptedIOException*是为*java.nio*发明的，但据报道，至少在 Solaris 下，有*java.io*方法会抛出*InterruptedIOException*。此外，对于新的 Android 版本，库会面临从*java.io*迁移到*java.nio*或其他方法以某种方式映射的风险。

我倾向于认为应该考虑到*InterruptedIOException*是安全的。你怎么看？洞察力、经验、策略？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T13:56:43.047

如果可以避免，我个人不会使用中断。对于阻塞 IO 操作，我会设置一个 volatile 标志并关闭流。如果已设置关闭标志，我将忽略任何抛出的 IOException。这使您可以更好地控制组件的关闭方式。一旦我设置了一个组件，`closed`我当然不会取消设置，我可以随时检查它。

# jquery - 使用 Chosen jQuery 插件进行前缀字符串匹配

> ID：14339226
> 
> 赞同：2
> 
> 时间：2013-01-15T13:51:28.873
> 
> 标签：jquery, autocomplete, jquery-chosen

我们正在使用[Chosen](http://harvesthq.github.com/chosen/) jquery 插件将选择元素的长选项列表转换为可搜索的自动完成输入字段。

是否可以影响/配置搜索词的匹配行为？现在，Chosen 似乎将所有选项项拆分为单词，并对选项项的所有单词执行前缀搜索。我们需要的期望行为是仅对选项项进行前缀搜索。所以搜索“Island”应该匹配一个选项，比如

> **……**岛****
> 
>  ****希望**岛****
> 
>  ****灾难之**岛********

 ****但不是

> 复活节 **岛**s

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-31T10:59:07.603

今天我使用`Chosen jQuery Plugin`并遇到了同样的问题，即在选项词前缀中搜索字符串。

搜索解决方案时，我发现这是一个已注册的问题[`GitHub`](https://github.com/harvesthq/chosen/issues/978)。

解决方案是使用`search_contains`选项。

我通过使用以下配置解决了这个问题。

```
$("select").chosen({enable_split_word_search:true,search_contains:true}); 
```****

# java - mybatis几个jndi名字

> ID：14339234
> 
> 赞同：1
> 
> 时间：2013-01-15T13:51:53.037
> 
> 标签：java, tomcat, jndi, mybatis

我有这样一个问题：不同的 Web 服务器对 jndi 命名有不同的规则。因此，例如，如果在 Tomcat 中我想使用 jndi 名称作为数据源，它将如下所示：

```
<dataSource type="JNDI">
    <property name="data_source" value="java:comp/env/jdbc/myJndiName"/>
</dataSource> 
```

但是在 WebSphere 或 Jboss 中，我必须提供不带“comp/env”的 jndi 名称，就像

```
<dataSource type="JNDI">
    <property name="data_source" value="java:jdbc/myJndiName"/>
</dataSource> 
```

或我在配置中提供的 jndi 名称。如果使用与 Tomcat 中相同的名称，使用“comp/env”前缀，显然是行不通的。

有没有办法让应用程序对不同的网络服务通用？我正在考虑编写自己的 DataSource 包装来检查 jndi 名称的可用性并正确设置它。有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T16:21:18.393

Mybatis 环境可能正是你要找的。

[http://mybatis.github.com/mybatis-3/configuration.html#environments](http://mybatis.github.com/mybatis-3/configuration.html#environments)

在您的情况下，配置可能看起来像

```
<environments default="tomcat">
    <environment id="tomcat">
        <transactionManager type="JDBC"/>
        <dataSource type="JNDI">
            <property name="data_source" value="java:comp/env/jdbc/myJndiName"/>
        </dataSource>
    </environment>
    <environment id="websphere">
        <transactionManager type="JDBC"/>
        <dataSource type="JNDI">
            <property name="data_source" value="java:jdbc/myJndiName"/>
        </dataSource>
    </environment>
</environments> 
```

您需要为每个环境创建一个 sql 会话工厂

```
InputStream in = Resources.getResourceAsStream("myconfig.xml");
SqlSessionFactory tomcatSessionFactory = new SqlSessionFactoryBuilder().build(in, "tomcat");
SqlSessionFactory websphereSessionFactory = new SqlSessionFactoryBuilder().build(in, "websphere"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-25T05:21:46.613

在 OSGI 环境（Aries JNDI）中，查找配置应如下所示

```
<environment id="development">
   <transactionManager type="JDBC"/>
    <dataSource type="JNDI">
    <property name="data_source" value="osgi:service/javax.sql.DataSource/(osgi.jndi.service.name=jdbc/Ds)"/>
  </dataSource> 
```

# jquery - Jquery 搜索过滤器 - 未找到结果时显示默认消息

> ID：14339235
> 
> 赞同：0
> 
> 时间：2013-01-15T13:51:55.767
> 
> 标签：jquery, filter, message, default, keyup

我目前正在构建一个搜索字段充当过滤器的页面，如下所示：

```
// Custom case insensitive selector
jQuery.expr[':'].Contains = function(a,i,m) { 
    return jQuery(a).text().toUpperCase().indexOf(m[3].toUpperCase())>=0;
};

// Search field filter
var $section = $('section');

$('#search').keyup(function() {
    var input = $(this).val();

    if(input) {
        $section.hide();
        $("section:Contains('"+input+"')").show();
    }
    else {
        $section.show();
    }
}); 
```

它工作得很好，但是我想解决一个问题。当输入的字符串在所有现有字符串中都找不到时`<section>`，页面保持**空白**。

我的问题很简单，当过滤器没有找到结果时，如何在我的页面上显示默认消息？就像一个简单的`<p>`解释“没有找到结果”。

这个想法是只要找不到字符串就只显示**一次。**

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T15:24:39.837

我最终做了以下事情：

在列表末尾创建我的错误消息。

```
<p id="noresults">Error message.</p> 
```

在需要时显示/隐藏它。

```
// Search field filter
var $section = $('section');
var $noresults = $('#noresults');

$noresults.hide();

$('#search').bind('keyup', function() {
    var input = $(this).val();

    if(input) {
        $section.hide();
        var result = $("section:Contains('"+input+"')");

        if(result.length) {
            $noresults.hide();
            result.show();
        } else {
            $noresults.show();
        }
    }
    else {
        $noresults.hide();
        $section.show();
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T14:02:56.360

首先检查匹配元素的长度。

```
var elements = $("section:Contains('"+input+"')");
if(elements.length) //Found
    elements.show();
else
    //display a message
    $("body").append("<p>No results were found.</p>"); 
```

# javascript - pdf中的javascript预加载器

> ID：14339247
> 
> 赞同：0
> 
> 时间：2013-01-15T13:52:45.827
> 
> 标签：javascript, pdf, livecycle

我有一个 pdf 表单，其中不包含图像，但有很多 javascript 来格式化答案字段（验证、部分生成等）。当它在 acrobat 中打开时，这会减慢 pdf 的速度，以至于用户需要整整 25 秒才能看到表单的第一页。

有什么方法可以设置 pdf 以在打开时显示预加载器，从而为用户提供信息以显示正在设置要填写的表单？

附加信息：表单正在 LiveCycle 中编写。它不是在线填写的（因此不需要网页预加载器），将在打开之前下载，填写并打印出来返回给我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:18:12.367

我还没有看到 livecycle 表单的预加载器，但您可能想要查看的是将一些验证移至 Form:Ready 事件或类似事件。

验证事件在表单加载时被多次调用，例如。当对象加载时，它包含的子表单和页面。

您应该分析何时需要进行验证并触发它，而不是纯粹依赖 validate 事件。

我发现创建函数来执行验证并调用它们而不是将脚本直接输入到事件中也更快，因为它减小了表单的大小。

# javascript - 创建具有多个仪表板和数据表的 Google 仪表板，这些仪表板和数据表从带有查询的 Google 电子表格馈送

> ID：14339248
> 
> 赞同：1
> 
> 时间：2013-01-15T13:52:47.070
> 
> 标签：javascript, api, google-visualization

第一次在这里发帖。

我正在尝试开发一个显示多个图表的谷歌仪表板。每个图表都需要从不同的数据表中获取数据。这些数据表通过 JSON 提要从同一个 Google 电子表格中填充。我通过对谷歌电子表格运行查询来生成数据表，并在谷歌返回查询时将它们存储为变量。

更复杂的是，我有需要影响每个图表的类别过滤器。这是通过为每个单独的数据表创建一个仪表板来完成的，就像一个“逻辑”仪表板，将它们聚合在一起，我正在为每个数据表创建类别过滤器。我正在监听事件的类别过滤器的第一个实例，以影响其他仪表板上的其他类别过滤器。这样，所有图表都受仅在类别过滤器上所做的状态更改的影响。

为了概念证明，我正在开发以下代码，我已经运行了 Javascript 控制台并修复了所有错误，但我仍然得到一个空白页。

我希望以上内容有意义，在此先感谢您的帮助。

```
 <html>
<head>
    <title>Google visualisation demo: chart query controls</title>
    <!--Load the AJAX API-->
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">

    // Load the Visualization API and the controls package.
    // Packages for all the other charts you need will be loaded
    // automatically by the system.
    google.load('visualization', '1.1', {'packages':['controls','linechart']});

    // Set a callback to run when the Google Visualization API is loaded.
    google.setOnLoadCallback(drawVisualization);

    // Declare variables outside of functions.
    var data1;
    var data2;

    function drawVisualization() {

    // Replace the data source URL on next line with your data source URL.
    var query1 = new google.visualization.Query('http://spreadsheets.google.com/tq?key=0AkjuVAUAbKOZdFM2LTByOVdLMkpFT3FmVTFyOW1jT2c&output=html');

    // Apply query language.
    query1.setQuery('SELECT E,F,I,C, sum(D) group by E,F,I,C');

    // Send the query with a callback function.
    query1.send(Dashboard1);

    // Replace the data source URL on next line with your data source URL.
    var query2 = new google.visualization.Query('http://spreadsheets.google.com/tq?key=0AkjuVAUAbKOZdFM2LTByOVdLMkpFT3FmVTFyOW1jT2c&output=html');

    // Apply query language.
    query2.setQuery('SELECT E,F,I,C, sum(D) group by E,F,I,C');

    // Send the query with a callback function.
    query2.send(Dashboard2);

    // First category filter
    network_filter = createDashboard1();
    network_filter2 = createDashboard2();

    // Second category filter
    introducer_filter = createDashboard1();
    introducer_filter2 = createDashboard2();

    // Third category filter
    business_filter = createDashboard1();
    business_filter2 = createDashboard2();

    // First category filter Event Listener
    google.visualization.events.addListener(network_filter, 'statechange', function() {
        network_filter2.setState(network_filter.getState());
        network_filter2.draw();
    });

    // Second category filter Event Listener
    google.visualization.events.addListener(business_filter, 'statechange', function() {
        business_filter2.setState(business_filter.getState());
        business_filter2.draw();
    });

    // Third category filter Event Listener
    google.visualization.events.addListener(introducer_filter, 'statechange', function() {
        introducer_filter2.setState(introducer_filter.getState());
        introducer_filter2.draw();
    });

    }

    function Dashboard1(response) {
        data1 = response.getDataTable();
        return data1;
        }

    // Everything is loaded. Assemble your dashboard...
    function createDashboard1() {

    // Wrapper for category filter declared in above function
    var networkPicker = new google.visualization.ControlWrapper({
    'controlType': 'CategoryFilter',
    'containerId': 'network_filter',
    'options': {
      'filterColumnLabel': 'Main Network',
      'ui': {
        'labelStacking': 'vertical',
        'allowTyping': false,
        'allowMultiple': false    
      }
    }
    });

    // Wrapper for category filter declared in above function
    var businessPicker = new google.visualization.ControlWrapper({
    'controlType': 'CategoryFilter',
    'containerId': 'business_filter',
    'options': {
      'filterColumnLabel': 'Business',
      'ui': {
        'labelStacking': 'vertical',
        'allowTyping': false,
        'allowMultiple': false    
      }
    }
    });

    // Wrapper for category filter declared in above function
    var introducerPicker = new google.visualization.ControlWrapper({
    'controlType': 'CategoryFilter',
    'containerId': 'introducer_filter',
    'options': {
      'filterColumnLabel': 'Introducer',
      'ui': {
        'labelStacking': 'vertical',
        'allowTyping': false,
        'allowMultiple': false    
      }
    }
    });

    // Chart effected by category filter
    var introducerChart = new google.visualization.ChartWrapper({
    'chartType': 'ColumnChart',
    'containerId': 'introducer_chart',

    'options': {
      'width': 800,
      'height': 200
    },
    'view': {'columns': [2, 4]}
    });

    // Table effected by category filter
    var table = new google.visualization.ChartWrapper({
    'chartType': 'Table',
    'containerId': 'table',
    'options': {
      'width': '900px'
    }
    });

    // Bind, glue and draw dashboard
    var dashboard = new google.visualization.Dashboard(document.getElementById('dashboard_div')).
        bind(networkPicker, businessPicker).
        bind(businessPicker, introducerPicker).
        bind(introducerPicker, introducerChart).
        bind(introducerPicker, table).
        draw(data1);

        return networkPicker;
        return businessPicker;
        return introducerPicker;
        return data1;
    }

    function Dashboard2(response) {
        data2 = response.getDataTable();
        return data2;
    }

    // Everything is loaded. Assemble your dashboard...
    function createDashboard2() {

    // Wrapper for category filter declared in above function
    var networkPicker = new google.visualization.ControlWrapper({
    'controlType': 'CategoryFilter',
    'containerId': 'network_filter2',
    'options': {
      'filterColumnLabel': 'Main Network',
      'ui': {
        'labelStacking': 'vertical',
        'allowTyping': false,
        'allowMultiple': false    
      }
    }
    });

    // Wrapper for category filter declared in above function
    var businessPicker = new google.visualization.ControlWrapper({
    'controlType': 'CategoryFilter',
    'containerId': 'business_filter2',
    'options': {
      'filterColumnLabel': 'Business',
      'ui': {
        'labelStacking': 'vertical',
        'allowTyping': false,
        'allowMultiple': false    
      }
    }
    });

    // Wrapper for category filter declared in above function
    var introducerPicker = new google.visualization.ControlWrapper({
    'controlType': 'CategoryFilter',
    'containerId': 'introducer_filter2',
    'options': {
      'filterColumnLabel': 'Introducer',
      'ui': {
        'labelStacking': 'vertical',
        'allowTyping': false,
        'allowMultiple': false    
      }
    }
    });

    // PieChart effected by category filter
    var productPie = new google.visualization.ChartWrapper({
       'chartType':'PieChart',
       'containerId': 'product_pie',
        'options': {'width': 300,'height': 300},
        'view': {'columns': [3, 4]}
    });

    // Table effected by category filter 
    var table = new google.visualization.ChartWrapper({
    'chartType': 'Table',
    'containerId': 'table2',
    'options': {
      'width': '900px'
    }
    });

    // Bind, glue and draw dashboard
    var dashboard = new google.visualization.Dashboard(document.getElementById('dashboard_div')).
        bind(networkPicker, businessPicker).
        bind(businessPicker, introducerPicker).
        bind(introducerPicker, productPie).
        bind(introducerPicker, table).
        draw(data2);

        return networkPicker;
        return businessPicker;
        return introducerPicker;
        return data2;
    }

    // Set a callback to run when the Google Visualization API is loaded.
    google.setOnLoadCallback(drawVisualization);

    </script>
</head>
<body>

<!--Div that will hold the dashboard-->
    <div id="dashboard_div">
        <!--Divs that will hold each control and chart-->
        <div id="network_filter"></div>
        <!--Display none because its managed by event listener-->
        <div id="network_filter2" style="display:none"></div>
        <div id="business_filter"></div>
        <!--Display none because its managed by event listener-->
        <div id="business_filter2" style="display:none"></div>
        <div id="introducer_filter"></div>
        <!--Display none because its managed by event listener-->
        <div id="introducer_filter2" style="display:none"></div>
        <div id="introducer_chart"></div>
        <div id="product_pie"></div>
        <div id="table"></div>
        <div id="table2"></div>
    </div>

<body>
</html> 
```

# sql - 从表中选择，然后在此记录集上选择，然后将全部返回给调用者

> ID：14339254
> 
> 赞同：-1
> 
> 时间：2013-01-15T13:52:58.570
> 
> 标签：sql, select, stored-procedures, subquery

有没有办法在一个存储过程/UDF 中执行以下操作：

1.  从表中选择
2.  从 pt 1 中选择的结果中选择
3.  从 pt 1 中的选择中再次选择结果
4.  将 pt 1、2 和 3 中的所有三个结果返回给调用者

PS：三个结果将是记录集而不是单个值。

* * *

好的，我会尽量让问题更清楚。我不认为我可以通过子查询实现我想要的..

伪代码：

```
SELECT BrandID, TypeID, CECategoryID, BrandName, ModelID, ModelName 
FROM Boats 
WHERE BrandID = @BrandID
"INTO @Recordset1"

SELECT Count(ModelID) AS ModelsPerType
FROM @Recordset1
GROUP BY TypeID
"INTO @Recordset2"

SELECT Count(ModelID) AS ModelsPerCECategory
FROM @Recordset1
GROUP BY CECategoryID
"INTO @Recordset3"

"RETURN Recordset1, Recordset2, Recordset3" 
```

我知道我不能用连字符写我所做的事情，但这是为了说明我在寻找什么。在我的代码（Web 应用程序）中，我想调用一个存储过程来保存上面的代码并接收三个记录集。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T14:26:16.573

你可以使用这样的东西

```
 Select * From (Select * From (Select * from Table1)T1)T2 --pt3
        Select * From (Select * from Table1)T1 --pt2
        Select * from Table1 --pt1 
```

我在查看您更新的需求后编辑了查询，此查询将显示 3 个记录集，您可以根据您的要求使用它们

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T14:04:04.383

```
SELECT *
FROM ( SELECT * 
       FROM ( SELECT *
              FROM BIG_DATA_TABLE )
       WHERE blah blah )
WHERE blah blah
ORDER BY etc 
```

这应该适用于大多数数据库，包括[Sql Server](http://msdn.microsoft.com/en-us/library/ms189575%28v=sql.105%29.aspx)：

我不明白第 4 点。你想如何返回所有三个结果？通过将后续结果的行添加到第一个结果表中？

您*可以*编写三个单独的查询（主查询、带有第一个子查询的主查询和带有两个子查询的主查询）并使用 a 将每个查询的结果连接到下一个`union`查询，但是这三个查询需要包含相同数量和类型的列，但那会很糟糕。

就像是

```
SELECT * FROM BIG_TABLE
UNION
SELECT * FROM ( SELECT * FROM BIG_TABLE ) WHERE subquery_stuff 
UNION
SELECT * FROM ( SELECT * FROM ( SELECT * FROM BIG_TABLE ) WHERE subquery_stuff ) WHERE sub_subquery_stuff ) 
```

编辑：伊斯兰会议组织

如果只是将三个查询放入存储过程中，应该会得到三个结果集。 [http://msdn.microsoft.com/en-US/data/jj691402](http://msdn.microsoft.com/en-US/data/jj691402)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T17:19:35.793

如果要在第一个查询中检索到的详细数据旁边返回计数，可以使用[窗口](http://msdn.microsoft.com/en-us/library/ms189461.aspx "OVER 子句 (Transact-SQL)")聚合函数：

```
SELECT
  BrandID,
  TypeID,
  CECategoryID,
  BrandName,
  ModelID,
  ModelName,
  COUNT(ModelID) OVER (PARTITION BY TypeID      ) AS ModelsPerType,
  COUNT(ModelID) OVER (PARTITION BY CECategoryID) AS ModelsPerCECategory
FROM Boats 
WHERE BrandID = @BrandID
; 
```

# android - 在片段中在运行时更改方向时更改布局而不重新创建视图

> ID：14339255
> 
> 赞同：7
> 
> 时间：2013-01-15T13:52:58.927
> 
> 标签：android, layout, runtime, orientation, fragment

我尝试开发第一个从网络下载图像并在网格视图中显示它们的应用程序。gridview 是主 Activity 的一个片段。下载过程是使用 onCreate 函数中的 AsyncTask 完成的。为了在更改方向时不会再次下载图像，我`android:configChanges="orientation|screenSize"`在 Android Manifest 中设置了 。然后 onCreate 函数只调用一次，一切都很好......除了我必须在横向模式下对 gridview 片段的布局进行一些更改。所以我创建了 2 个布局表：`fragment_library.xml`和`fragment_library_land.xml`在布局/文件夹中。为了使这些更改生效，我尝试使用 onConfigurationChanged 函数手动更改库片段的布局。在运行时，程序评估函数并传入好的情况（纵向或横向），但使用的布局仍然是纵向模式的布局：`fragment_library.xml`...

```
public class LibraryFragment extends Fragment {
    public GridView gridview;
    private Boolean isImageAdapterPopulated = false;

    @Override
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        GetLibraryTask getLibraryTask = new GetLibraryTask(this);
        getLibraryTask.execute(Config.URL + "action=getLibrary");
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
        if (container == null)
            return null;

        // gridview
        View V = inflater.inflate(R.layout.fragment_library, container, false);
        gridview = (GridView)V.findViewById(R.id.gridview);

        if(this.isImageAdapterPopulated)
            this.setGridAdapter();
        return V;
    }

    @Override
    public void onConfigurationChanged(Configuration newConfig){
        super.onConfigurationChanged(newConfig);
        if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE) {
            LayoutInflater inflater = (LayoutInflater) getActivity().getSystemService( Context.LAYOUT_INFLATER_SERVICE );
            inflater.inflate(R.layout.fragment_library_land, null);
        } else if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT){
            LayoutInflater inflater = (LayoutInflater) getActivity().getSystemService( Context.LAYOUT_INFLATER_SERVICE );
            inflater.inflate(R.layout.fragment_library, null);
        }
    }

    public void setGridAdapter(){
        this.isImageAdapterPopulated = true;
        gridview.setAdapter(new ImageAdapter(getActivity()));
    }

    // ...
} 
```

片段库.xml

```
<?xml version="1.0" encoding="utf-8"?>
<GridView xmlns:android="http://schemas.android.com/apk/res/android" 
    android:id="@+id/gridview"
    android:cacheColorHint="@android:color/transparent"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent"
    android:columnWidth="200dp"
    android:numColumns="auto_fit"
    android:verticalSpacing="10dp"
    android:horizontalSpacing="20dp"
    android:stretchMode="columnWidth"
    android:gravity="bottom"
/> 
```

fragment_library_land.xml

```
<?xml version="1.0" encoding="utf-8"?>
<GridView xmlns:android="http://schemas.android.com/apk/res/android" 
    android:id="@+id/gridview"
    android:cacheColorHint="@android:color/transparent"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent"
    android:columnWidth="400dp"
    android:numColumns="2"
    android:verticalSpacing="50dp"
    android:horizontalSpacing="50dp"
    android:stretchMode="columnWidth"
    android:gravity="bottom"
/> 
```

感谢帮助 ：）

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-29T09:58:06.663

这不可能。Fragment 无法动态更新其布局。但是，您确实有其他一些选择。

*1* . 不喜欢这个，但你可能有一个 Fragment 的布局，同时具有纵向和横向视图，并显示和隐藏。

片段库.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<GridView xmlns:android="http://schemas.android.com/apk/res/android" 
    android:id="@+id/gridview_portrait"
    android:cacheColorHint="@android:color/transparent"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent"
    android:columnWidth="200dp"
    android:numColumns="auto_fit"
    android:verticalSpacing="10dp"
    android:horizontalSpacing="20dp"
    android:stretchMode="columnWidth"
    android:gravity="bottom"
/>
<GridView xmlns:android="http://schemas.android.com/apk/res/android" 
    android:id="@+id/gridview_landscape"
    android:cacheColorHint="@android:color/transparent"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent"
    android:columnWidth="400dp"
    android:numColumns="2"
    android:verticalSpacing="50dp"
    android:horizontalSpacing="50dp"
    android:stretchMode="columnWidth"
    android:gravity="bottom"
    android:visible="gone"
/> 
```

然后是一些私有成员变量：

```
private GridView mGridViewPortrait;
private GridView mGridViewLandscape; 
```

然后在`onConfigurationChanged(Configuration newConfig)`：

```
@Override
        public void onConfigurationChanged(Configuration newConfig) {
            super.onConfigurationChanged(newConfig);

            if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT) {
                 mGridViewPortrait.setVisibility(View.VISIBLE);
                 mGridViewLandscape.setVisibility(View.GONE);
            }

            else if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE) {
                 mGridViewPortrait.setVisibility(View.GONE);
                 mGridViewLandscape.setVisibility(View.VISIBLE);
            }
        } 
```

几点：请注意，我省略了引用两个 GridView 的代码。我还将您的 GridView 更改为私有，并将名称更改为 mGridView*。私有以保持“数据封装”和“m”，因为它是该类的成员，只是约定。我还更改了 if-else 子句，因为我希望先进行纵向检查。

这种方式是最快和最简单的，但是如果你有很大的布局它可能会变得很重，所以如果你有很多东西就**不要**使用它。最好不要使用这种方法。

*2* . 正确的方法是让 Andorid 处理方向并将您的 XML 移动到正确的目录。但是，这将重新创建您的 Fragment （如果您没有设置`setRetainInstance(true);`，在这种情况下您不会设置；这将使 Fragment 不会重新创建它的布局（实际上查找它未提及[的保留方法](http://developer.android.com/reference/android/app/Fragment.html#setRetainInstance%28boolean%29)`onCreateView`，因此您也可以尝试将其设置为 true并尝试））。

将您的 fragment_library_land.xml 移动到目录 layout-land 而不是 layout 并将其命名为**fragment_library** .xml。注意粗体，它将具有相同的名称但位于不同的目录中。这样，Android 将根据方向了解并采用正确的布局。

如果我理解了为什么你不想重新创建 Fragment 因为`onCreate(Bundle savedInstanceState)`会再次被调用（`setRetainInstance(true);`它不会并且关于我之前写的你可以试一试）从而创建一个新实例`GetLibraryTask`并再次下载图像. 如果您使用数据库来存储图像，并且如果您有一个布尔值来跟踪您是否下载了图像，则可以防止这种情况发生。然后，`GetLibraryTask`您将挑选出未下载的图像，无论是第一次运行任务还是方向改变。您还需要在下载循环中的库任务中进行停止检查，在每个项目之前检查您是否应该下载图像或片段是否不再可用并因此退出任务。

现在，当您更改方向时，Activity 将重新创建 LibraryFragment，并根据方向使用 layout 或 layout-land。

代码中的一些旁注：

*   正如我之前写的，永远不要使用公共访问，必要时总是使用私有或受保护。Private 可以一直使用，并且有 getter 和 setter（访问器和 mutator）来进行通信。
*   使用“m”作为成员变量的前缀，在这种情况下`public GridView gridview`将是`private GridView mGridView`并且`private Boolean isImageAdapterPopulated`将会是`private boolean mIsImageAdapterPopulated`
*   如果不需要，切勿将类用于原始类型。您可能在不支持原始类型或类保留等的列表中需要它。
*   在`onConfigurationChanged(Configuration newConfig)`你膨胀一个 XML 并返回一个视图，但你没有用它做任何事情

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-14T10:36:35.473

It is possible if you will use oncongi change method. please see this link [Change Fragment layout on orientation change](https://stackoverflow.com/questions/7442811/change-fragment-layout-on-orientation-change)

# java - Java数据处理工作流框架

> ID：14339256
> 
> 赞同：1
> 
> 时间：2013-01-15T13:53:05.057
> 
> 标签：java, workflow, apache-storm

我有一个数据流，基本上是一个 SQL 表，每分钟添加 30-50 条记录。需要以接近实时的速度处理（记录应在出现在数据库后大约 10 分钟内处理）。我想在这里使用一些像解决方案这样的工作流来让我更容易处理所有记录。我需要这个解决方案来获得高可用性——系统应该在单独的硬件节点上工作，并且如果其中一个节点出现故障，它应该是容错的。基本上会发生的是这样的：

*   一条新记录被添加到数据库中
*   工作流开始处理它
*   作为该处理的结果做一些事情（发送电子邮件，插入数据库等）
*   框架应记住该记录已被处理

另一个要求是，如果在处理其中一个记录期间出现错误，则不应阻止框架处理其他记录。它应该只记住这个特定的记录需要重新处理。

我听说 twitter-storm 做了类似的事情，但在这里使用它不是矫枉过正吗？据我了解，它的主要目的是同时处理大量数据，我在这里根本不需要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T13:56:26.900

您可以使用`Apache Camel`和构建完美的可扩展解决方案`ActiveMQ`。故障节点将抛出异常，未处理的消息可能会被发送回`AMQ`队列以供稍后处理（可能与其他节点一起）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T20:33:09.807

请记住，Storm 不进行持久化，因此您会将数据作为流处理，然后在其末尾（或中间、开头等）进行持久化。本质上，拓扑中的某个螺栓会将其写出来）。

当涉及到容错和处理保证时，Storm 将解决您的问题。但是在 30-50 个元组（Storm 数据抽象）上，使用它可能确实“过大”。但是接下来的问题就变成了你可以多么容易地编写自己的系统，该系统仍然具有Storm 所具有的数据处理*保证*（例如，如果你系统中的一个节点出现故障，但正在处理一些数据，会发生什么？那个数据？）。我可以告诉你，设置拓扑并运行它非常简单。Storm 使用的抽象并不难处理（Streams、Tuples、Bolts 和 Spout）。如果您还没有，我建议您观看此技术讲座： [http ://www.youtube.com/watch?v=biKMS3HILJ4](http://www.youtube.com/watch?v=biKMS3HILJ4)

# hadoop - WSO2 外部 hadoop

> ID：14339263
> 
> 赞同：2
> 
> 时间：2013-01-15T13:53:24.807
> 
> 标签：hadoop, hive, wso2, wso2bam

我们希望将 WSO2 BAM 2.0.1 连接到外部 hadoop 集群（完全分布式）。我按照此链接进行设置

[配置 Apache Hive](http://docs.wso2.org/wiki/display/BAM201/Configuring+Apache+Hive)

但是，当我运行我的 Hive 脚本时，出现以下错误

> java.sql.SQLException：查询返回非零代码：9，原因：FAILED：执行错误，从 org.apache.hadoop.hive.ql.exec.MapRedTask 返回代码 -101

此 Hive 脚本适用于本地 Hadoop 模式...

在使用外部 Hadoop 集群时，我是否还需要对 Hive 脚本进行任何更改。

这些是我在控制台中看到的错误..

> TID：[0] [BAM] [2013-01-16 09:42:36,583] INFO {org.apache.hadoop.hive.ql.exec.Utilities} - 未缓存 hdfs://r4p8n0c:9000/ 的内容摘要用户/hive/warehouse_wso2-1234/aeanalyticstable_demo {org.apache.hadoop.hive.ql.exec.Utilities}
> TID：[0] [BAM] [2013-01-16 09:42:36,583] 信息 {org.apache. hadoop.hive.ql.exec.Utilities} - 未缓存 hdfs://r4p8n0c:9000/user/hive/warehouse_wso2-1234/aeanalyticstable_demo {org.apache.hadoop.hive.ql.exec.Utilities}
> TID 的内容摘要： [0] [BAM] [2013-01-16 09:42:36,590] INFO {org.apache.hadoop.hive.ql.exec.ExecDriver} - 添加非本地表 hdfs://r4p8n0c:9000/user /hive/warehouse_wso2-1234/aeanalyticstable_demo {org.apache.hadoop.hive.ql.exec.ExecDriver}
> TID：[0] [BAM] [2013-01-16 09:42:36,590] INFO {org.apache.hadoop.hive.ql.exec.ExecDriver} - 添加非本机表 hdfs://r4p8n0c:9000 /user/hive/warehouse_wso2-1234/aeanalyticstable_demo {org.apache.hadoop.hive.ql.exec.ExecDriver}
> TID：[0] [BAM] [2013-01-16 09:42:36,832] 错误 {org.apache .hadoop.hive.ql.Driver} - 失败：执行错误，从 org.apache.hadoop.hive.ql.exec.MapRedTask {org.apache.hadoop.hive.ql.Driver} 返回代码 -101
> TID：[0 ] [BAM] [2013-01-16 09:42:36,832] 错误 {org.apache.hadoop.hive.ql.Driver} - 失败：执行错误，从 org.apache.hadoop.hive.ql 返回代码 -101 .exec.MapRedTask {org.apache.hadoop.hive.ql.Driver}
> TID：[0] [BAM] [2013-01-16 09:42:36,833] INFO {org.apache.hadoop.hive.ql.Driver } - {org.apache.hadoop.hive.ql.Driver}
> TID：[0] [BAM] [2013-01-16 09:42:36,833] 信息 {org.apache.hadoop.hive.ql.Driver} - {org.apache.hadoop.hive.ql.Driver}
> TID： [0] [BAM] [2013-01-16 09:42:36,833] 信息 {org.apache.hadoop.hive.ql.Driver} - {org.apache.hadoop.hive.ql.Driver}
> TID：[0 ] [BAM] [2013-01-16 09:42:36,833] 信息 {org.apache.hadoop.hive.ql.Driver} - {org.apache.hadoop.hive.ql.Driver}
> TID：[0] [ BAM] [2013-01-16 09:42:36,834] 信息 {org.apache.hadoop.hive.ql.Driver} - {org.apache.hadoop.hive.ql.Driver}
> TID：[0] [BAM] [2013-01-16 09:42:36,834] 信息 {org.apache.hadoop.hive.ql.Driver} - {org.apache.hadoop.hive.ql.Driver}
> TID：[0] [BAM] [2013-01-16 09:42:36,834] 错误 {org.wso2.carbon.analytics.hive.impl.HiveExecutorServiceImpl} - 执行 Hive 脚本时出错。
> 查询返回非零代码：9，原因：FAILED：执行错误，从 org.apache.hadoop.hive.ql.exec.MapRedTask {org.wso2.carbon.analytics.hive.impl.HiveExecutorServiceImpl}
> java返回代码 -101 .sql.SQLException：查询返回非零代码：9，原因：失败：执行错误，从 org.apache.hadoop.hive.jdbc
> 的 org.apache.hadoop.hive.ql.exec.MapRedTask 返回代码 -101。 HiveStatement.executeQuery(HiveStatement.java:189)
> 在 org.wso2.carbon.analytics.hive.impl.HiveExecutorServiceImpl$ScriptCallable.call(HiveExecutorServiceImpl.java:325)
> 在 org.wso2.carbon.analytics.hive.impl.HiveExecutorServiceImpl$ScriptCallable.call(HiveExecutorServiceImpl.java:225)
> 在 java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
> 在 java.util.concurrent .FutureTask.run(FutureTask.java:138)
> 在 java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
> 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
> 在java.lang.Thread.run(Thread.java:662)
> TID：[0] [BAM] [2013-01-16 09:42:36,848] 错误 {org.wso2.carbon.analytics.hive.ui.client.HiveExecutionClient} - 执行 Hive 脚本时出错。查询返回非零代码：9，原因：FAILED：执行错误，从 org.apache.hadoop.hive.ql.exec.MapRedTask {org.wso2.carbon.analytics.hive.ui.client.HiveExecutionClient} 返回代码 -101
> 
> org.wso2.carbon.analytics.hive.stub.HiveExecutionServiceHiveExecutionException：HiveExecutionServiceHiveExecutionException
> at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
> at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
> at sun.reflect.DelegatingConstructorAccessorImpl.newInstance (DelegatingConstructorAccessorImpl.java:27)
> 在 java.lang.reflect.Constructor.newInstance(Constructor.java:513)
> 在 java.lang.Class.newInstance0(Class.java:355)
> 在 java.lang.Class.newInstance(Class.爪哇：308）
> 在 org.wso2.carbon.analytics.hive.stub.HiveExecutionServiceStub.executeHiveScript(HiveExecutionServiceStub.java:215)
> 在 org.wso2.carbon.analytics.hive.ui.client.HiveExecutionClient.executeScript(HiveExecutionClient.java:66)
> 在 org .apache.jsp.hive_002dexplorer.queryresults_jsp._jspService(queryresults_jsp.java:90)
> at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:97)
> at javax.servlet.http.HttpServlet.service(HttpServlet.java :722)
> 在 org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:332)
> 在 org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:314)
> 在 org.apache.jasper.servlet.JspServlet.service(JspServlet.java:264)
> 在 javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
> 在 org.wso2.carbon.ui.JspServlet.service(JspServlet .java:161)
> 在 org.wso2.carbon.ui.TilesJspServlet.service(TilesJspServlet.java:80)
> 在 javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
> 在 org.eclipse.equinox.http。 helper.ContextPathServletAdaptor.service(ContextPathServletAdaptor.java:36)
> 在 org.eclipse.equinox.http.servlet.internal.ServletRegistration.handleRequest(ServletRegistration.java:90)
> 在 org.eclipse.equinox.http.servlet.internal.ProxyServlet。进程别名（ProxyServlet.java:111）
> 在 org.eclipse.equinox.http.servlet.internal.ProxyServlet.service(ProxyServlet.java:67)
> 在 javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
> 在 org.wso2.carbon.tomcat.ext .servlet.DelegationServlet.service(DelegationServlet.java:68)
> 在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
> 在 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210 ) )
> 在 org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:599)
> 的 org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:690)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T16:38:47.873

如果您正确设置了外部 hadoop 集群，它应该可以工作。它已经使用外部 hadoop 集群进行了测试。如果您遇到任何问题，请同时检查 hadoop 集群节点中的错误日志。查找与 hadoop 集群相关的配置问题将很有帮助。因为有时在 ui 中显示的问题不是很有用。您无需更改 Hive 脚本即可使用外部集群。

谢谢，卡松。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T05:27:42.397

我们能够让 WSO2 BAM 与外部完全分布式 Hadoop 一起工作。

看起来 2.0.1 版本无法将 map-reduce 作业提交到外部 hadoop 集群。我们回滚到 2.0.0 并且 Hive 脚本开始工作。

我想知道这是否是 2.0.1 的已知问题？我们有一个精简的 2.0.1 版本（它只有 carbon、Analytics/AnalyticsUI、Dashboard、Registry、Databridge、datasource、stratos、security、tasks 和传输管理功能）

谢谢拉吉夫

# javascript - Ajax 不执行 vb.net 功能

> ID：14339264
> 
> 赞同：0
> 
> 时间：2013-01-15T13:53:27.137
> 
> 标签：javascript, asp.net, vb.net, jquery

我在 C# 中找到了一个项目，我正在尝试将其转换为 vb.net，我几乎完成了它，但我无法让最后一个函数工作

Javascript 和 Ajax 代码

```
 $('#sendBtn').live('click', function () {
        var image = document.getElementById("signatureCanvas").toDataURL();
        document.getElementById("TextBox1").value = image;
        image = image.replace('data:image/png;base64,', '');

        $.ajax({
            type: 'POST',
            url: '/Default.aspx/UploadImage',
            data: '{ "imageData" : "' + image + '" }',
            contentType: 'application/json; charset=utf-8',
            dataType: 'json',
            success: function (msg) {
                alert('Image sent!');
            }
        });
    }); 
```

VB.NET 代码

```
Namespace CanvasToServer
Partial Class _Default
    Inherits System.Web.UI.Page
    <WebMethod()>
    Public Shared Sub UploadImage(imageData As String)
        'FileStream fs = new FileStream("C:\\image.png", FileMode.Create);
        'FileStream fs = new FileStream(@"C:\inetpub\wwwroot\image.jpg", FileMode.Create);
        Dim fs As New FileStream("C:\inetpub\wwwroot\image.png", FileMode.Create)
        Dim bw As New BinaryWriter(fs)
        Dim data As Byte() = Convert.FromBase64String(imageData)
        bw.Write(data)
        bw.Close()
    End Sub
End Class
End Namespace 
```

ASPX 代码

```
<%@ Page Language="VB" AutoEventWireup="true" CodeFile="Default.aspx.vb" Inherits="CanvasToServer._Default" %> 
```

Tut 链接：[http ://www.worldwidewhat.net/2011/06/send-canvas-content-to-server/](http://www.worldwidewhat.net/2011/06/send-canvas-content-to-server/)

唯一不起作用的是保存到服务器功能，但我没有收到任何错误请指教

# c# - iTextSharp 中的 PDF 大小最大限制

> ID：14339266
> 
> 赞同：1
> 
> 时间：2013-01-15T13:53:33.310
> 
> 标签：c#, pdf-generation, itextsharp

我遇到了 iTextsharp 中允许的最大页面大小的问题，所以当我尝试生成大小超过 14 400 的文档时，我收到一条消息错误，我尝试像[这里描述](http://itextsharp.10939.n7.nabble.com/Big-pdf-pagesize-cause-problems-td3937.html)`the.page.size.must.be.smaller.than.14400.by.14400.its.1.by.2`的那样玩，但我还没有找到解决方案。`userunits`

我通过在一个页面中合并文件来生成PDF，`AddTemplate()`例如，我认为将pdf尺寸缩放1/4，并将userunits设置为4，但我认为我也应该缩放导入的页面，这种方式有什么帮助，因为我不知道如何缩放导入的页面，我不确定这是否是正确的解决方案。

```
 PdfImportedPage imp1 = wr.GetImportedPage(r1, 1); 
 wr.DirectContent.AddTemplate(imp1,(float)(x*cm),(float)(y*cm)); 
```

请提供任何帮助或任何建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T09:41:19.887

正如您在评论中明确指出的那样，您在测试解决方案（`DirectContent.AddTemplate`应用于 a `PdfImportedPage`）时遇到的问题实际上是您*不知道如何缩放导入的页面*，这里有一个指向示例的指针，该示例显示了如何正确地做到这一点。

查看从[iText in Action - 2nd Edition](http://itextpdf.com/book/)[第 6 章](http://www.manning.com/lowagie2/samplechapter6.pdf)中匹配的 Java 示例[NUpTool翻译的示例](http://kuujinbo.info/iTextInAction2Ed/index.aspx?ch=Chapter06&ex=NUpTool)[NUpTool.cs](http://itextpdf.com/examples/iia.php?id=115)。这里的变量描述了比例因子。`factor`

# xcode - Xcode“移动线”键盘快捷键

> ID：14339275
> 
> 赞同：54
> 
> 时间：2013-01-15T13:54:00.320
> 
> 标签：xcode, xcode4, keyboard-shortcuts, key-bindings

在 Xcode 4 中，我已经成功地添加了新的自定义键盘快捷键来移动行或复制行：

**/Applications/Xcode.app/Contents/Frameworks/IDEKit.framework/Resources/IDETextKeyBindingSet.plist**

```
<key>My Custom Keys</key>
<dict>
    <key>Move Line Up</key>
    <string>selectLine:, cut:, moveUp:, moveToBeginningOfLine:, paste:, moveUp:</string>
    <key>Move Line Down</key>
    <string>selectLine:, cut:, moveDown:, moveToBeginningOfLine:, paste:, moveUp:</string>
    <key>Duplicate Line</key>
    <string>moveToBeginningOfLine:, deleteToEndOfLine:, yank:, insertNewline:, moveToBeginningOfLine:, yank:</string>
    <key>Delete Line</key>
    <string>selectLine:, delete:</string>
</dict> 
```

但是**向上/向下移动行**使用复制/粘贴，我想避免这种情况。任何人都知道如何用*yank*移动行，就像我在那里找到的**Duplicate Line ：** [Xcode duplicate line](https://stackoverflow.com/questions/10266170/xcode-4-duplicate-line/13369654#13369654)

* * *

## 回答 #1

> 赞同：166
> 
> 时间：2013-03-01T14:00:36.307

[从https://stackoverflow.com/a/9078952/852828](https://stackoverflow.com/a/9078952/852828)复制，因为这不是链接副本的公认答案。

> Xcode 4 有一组新的命令，用于移动光标所在的行或使用`command`+ `option`+`[`或选定的文本`]`
> 
> `⌥⌘[`或者`⌥⌘]`

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2019-07-17T13:37:35.833

**如何通过菜单或热键在 Xcode 中移动行：**

[![在此处输入图像描述](../Images/26fc11829b44c741f9e53509dd6f8645.png)](https://i.stack.imgur.com/FbmuW.png)

**如果您使用的是 Windows 键盘，则命令将转换为：**

*   `⌥⌘[`......`Alt + Win + [`
*   `⌥⌘]`......`Alt + Win + ]`

# facebook - 显示带有所选页面的“添加页面对话框”

> ID：14339283
> 
> 赞同：0
> 
> 时间：2013-01-15T13:54:53.467
> 
> 标签：facebook, tabs, add

旧的“http://www.facebook.com/add.php”允许在显示添加页面选项卡对话框时选择页面，因此应用程序可以显示页面列表并将应用程序选项卡单独添加到每个页面。

如何使用新的添加页面选项卡对话框做同样的事情？我可以显示添加对话框，但不能显示所选页面。我尝试使用以下代码：

```
var obj = {
        method: 'pagetab',
        page: page_id,
        pages: 1
    };

FB.ui(obj); 
```

有什么方法可以用 javascript 对话框弹出来完成这个吗？

**更新**

这是我的场景：我的 facebook 应用程序有两种类型的访问者：想要将我的应用程序添加到页面的页面管理员，以及在选项卡中使用我的应用程序的页面访问者。

页面管理员使用我的应用程序的画布版本来管理他的所有页面。他可以在我的应用程序中选择其中一个页面（甚至是没有选项卡的页面）并执行配置任务。当我们使用旧的 add.php 对话框时，我们可以向用户显示一个按钮，以将选项卡直接添加到当前选定的页面。我想使用“添加页面选项卡”对话框来完成相同的行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T08:22:07.243

如何使用“[*添加页面选项卡”对话框*](https://developers.facebook.com/docs/reference/dialogs/add_to_page/)预先选择页面？你**不能**。

不知道你为什么想要这个功能。如果您是管理员，那么只需选择您想要的页面，同样的事情将适用于要添加您的应用程序的任何人。

`/PAGE_ID/tabs/TAB_ID`另外请注意，您始终可以通过向带有页面访问令牌的对象发出 HTTP DELETE 请求来从特定页面中删除您的应用程序。[参考](https://developers.facebook.com/docs/reference/api/page/#tabs)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T18:45:37.557

正如接受的答案正确告知的那样，使用默认的“添加页面选项卡”对话框无法完成我需要的操作。

如果其他人有同样的需求，我建议以下解决方案：

> *   开发自定义添加页面选项卡对话框，以便用户确认添加操作；
> *   如果您还没有，请获取该页面的访问令牌；
> *   使用graph api在服务器端添加页面：发帖子到/PAGE_ID/tabs/app_id。

您可以在此处了解如何使用图形 api 将页面添加到选项卡：[Facebook Graph Api Docs](https://developers.facebook.com/docs/reference/api/page/#tabs "Facebook 图形 API 文档")

# tags - 如何从文本中提取关键字（标签）

> ID：14339290
> 
> 赞同：7
> 
> 时间：2013-01-15T13:55:32.117
> 
> 标签：tags, nlp, keyword, nltk

我目前正在尝试在 Java 中实现标记引擎，并搜索从文本（文章）中提取关键字/标记的解决方案。我在 stackoverflow 上找到了一些建议使用 Pointwise Mutual Information 的解决方案。

[解决方案 1](https://stackoverflow.com/questions/2764116/tag-generation-from-a-small-text-content-such-as-tweets)

[解决方案 2](https://stackoverflow.com/questions/2661778/tag-generation-from-a-text-content/2664351#2664351)

我不能使用 pyton 和 nltk，所以我必须自己实现它。但我不知道如何计算概率。方程如下所示：

```
PMI(term, doc) = log [ P(term, doc) / (P(term)*P(doc)) ] 
```

我想知道的是如何计算 P(term, doc)

我已经有一个朗格文本语料库和一系列文章。这些文章不是语料库的一部分。语料库使用 lucene 进行索引。

请帮帮我。此致。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-21T12:18:49.147

有很多算法可以做到这一点：

**开源工具：**

kea([​​ http://www.nzdl.org/Kea/](http://www.nzdl.org/Kea/) ) 监督方法使用训练数据和受控词汇

maui indexer( [http://code.google.com/p/maui-indexer/](http://code.google.com/p/maui-indexer/) ) 它基本上是 kea 的扩展，它提供了使用百科全书提取关键短语的便利。

carrot2( [http://project.carrot2.org/](http://project.carrot2.org/) ) 用于关键短语提取的无监督方法。它支持用于关键短语提取的输入、输出格式和参数的多种变化。

mallet 主题建模模块（[http://mallet.cs.umass.edu/topics.php](http://mallet.cs.umass.edu/topics.php)）

斯坦福主题建模工具 ( [http://nlp.stanford.edu/software/tmt/tmt-0.3/](http://nlp.stanford.edu/software/tmt/tmt-0.3/) )

Mahout 聚类算法（[http://mahout.apache.org/](http://mahout.apache.org/)）

**商业api：**

炼金术 API（[http://www.alchemyapi.com/api/keyword-extraction/](http://www.alchemyapi.com/api/keyword-extraction/)）

zemanta API（[http://www.zemanta.com/developer/](http://www.zemanta.com/developer/)）

雅虎术语提取API（[http://developer.yahoo.com/contentanalysis/](http://developer.yahoo.com/contentanalysis/)）

# mysql - MYSQL从其他表执行切线查询？

> ID：14339293
> 
> 赞同：0
> 
> 时间：2013-01-15T13:55:42.110
> 
> 标签：mysql, sql, select, join

```
where meetingID = [[WHERE IT MATCHES]] (select meetingID from meeting where categoryID = '1') 
```

我不太确定在这里放什么来将这两者结合在一起？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T13:57:48.583

如果一个类别可以有多个，`meetingID`更好地使用它不会生成和错误，`IN``=`

```
SELECT ...
FROM ....
where meetingID IN (select meetingID 
                    from meeting 
                     where categoryID = '1') 
```

另一种方式是`JOIN`他们，例如。

```
SELECT DISTINCT a.*
FROM   tableName a
       INNER JOIN meeting b
           ON a.meetingID = b.meetingID 
WHERE  b.categoryID  = '1' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T14:01:51.160

使用**JOIN**将提高性能。

```
SELECT ... 
FROM tablea a 
INNER JOIN meeting m ON a.meetingID = m.meetingID AND m.categoryID = '1' 
```

**或者**

```
SELECT ... 
FROM tablea a 
INNER JOIN (SELECT meetingID 
            FROM meeting 
            WHERE categoryID = '1'
          ) b ON a.meetingID = b.meetingID; 
```

检查此链接[**MySQL Optimizing Subqueries**](http://dev.mysql.com/doc/refman/5.1/en/optimizing-subqueries.html)

# jsf - 在 Primefaces JSF2.x 中使用请求范围的托管 bean

> ID：14339298
> 
> 赞同：2
> 
> 时间：2013-01-15T13:55:52.233
> 
> 标签：jsf, primefaces, scope

JSF + Primefaces 新手。（使用 JSF 2.1，Primefaces 3.4.2）

我有一个表单，它有一个内部 panelGroup，它使用 Primefaces commandButton 来获取数据以填充各种表单组件。partialSubmit 解决了尚未填充的字段的验证问题，因此效果很好。该页面按预期运行，但现在我正在尝试将实现调整为“更清洁”。

我的问题与我用于表单使用的支持 bean 的 JSF 范围有关。使用会话范围，一切都很好，但在使用请求范围时就不行了。据我了解，“最终”提交（通过另一个 p:commandButton 组件）和此获取按钮都在调用提交，因此对任何一个的响应都构成了请求生命周期的完成。如果我是正确的，它解释了为什么我得到（使用请求范围）以下内容：
java.lang.IllegalStateException：在提交响应后无法创建会话

使用获取按钮时。

但很明显，这“打破”了我对获取请求的意图，只是导致表单通过 bean 使用更新的数据。

那么，我的理解是否正确，任何使用中间提交的设计模式（通过 partialSubmit="true" commandButton（默认情况下启用 ajax 行为）都需要使用至少会话范围的支持 bean？理想情况下, 实现请求与导航级别请求的机制将允许在 1 个请求的上下文中完成这些中间提交。或者我需要做一些额外的研究吗？（获取 JSF 2.x 书而不是使用我的 1.2 副本？） MTIA 的任何反馈。

我的获取组件：

```
<p:commandButton id="returningBtn" partialSubmit="true" value="Hit if returning" 
    process="nameInfo" actionListener="#{player.loadReturning}" update="registrationForm">
    <p:resetInput target="registrationForm" />
</p:commandButton> 
```

我的最终提交：

```
<p:commandButton tabindex="0" id="SubmitButton" value="Register"
   action="#{player.register}" update="regPage"/> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T14:06:41.400

> *partialSubmit 解决了尚未填充的字段的验证问题，因此效果很好。*

不，它不会那样做。它只将`process`属性中指定的输入字段发送到服务器，而不是当前表单的*所有*输入字段。它正是`process`告诉哪些输入需要处理（转换、验证和更新）的属性。`partialSubmit="true"`仅仅减少了网络带宽和请求参数解析开销。另请参阅[有关该主题的 PrimeFaces 博客](http://blog.primefaces.org/?p=1842)。

* * *

> *该页面按预期运行，但现在我正在尝试将实现调整为“更清洁”。我的问题与我用于表单使用的支持 bean 的 JSF 范围有关。使用会话范围，一切都很好，但在使用请求范围时就不行了。*

会话范围确实是表单的错误范围。您需要请求或视图范围。如果您的表单具有某种状态，需要在同一表单上的后续提交中记住该状态，那么您需要视图范围。另请参阅[如何选择正确的 bean 范围？](https://stackoverflow.com/questions/7031885/how-to-choose-the-right-bean-scope)

* * *

> *java.lang.IllegalStateException：提交响应后无法创建会话*

这可以看作是 Mojarra 中的一个错误，该错误已在 2.1.8 中修复。另请参阅添加 <h:form> 导致 java.lang.IllegalStateException:如果您无法升级，则[在响应已提交多个解决方法后无法创建会话。](https://stackoverflow.com/questions/8072311/illegalstateexception-cannot-create-a-session-after-the-response-has-been-commi)

* * *

> *那么，我的理解是否正确，任何使用中间提交的设计模式（通过 partialSubmit="true" commandButton（默认情况下启用 ajax 行为）都需要使用至少会话范围的支持 bean？理想情况下，具有实现请求与导航级别请求的机制将允许在 1 个请求的上下文中完成这些中间提交。*

如前所述，您需要视图范围。

* * *

> *还是我需要做一些额外的研究？（获取 JSF 2.x 书籍而不是使用我的 1.2 副本？）*

确实。自 JSF2 以来不仅视图范围是新的，而且与 JSF1 相比，JSF2 中的许多其他事情都以不同的方式完成（阅读：更优雅）。[您可以在我们的 JSF wiki 页面](https://stackoverflow.com/tags/jsf/info)底部找到几个指向合理 JSF2 资源的链接。

# jquery - 隐藏更改的选择

> ID：14339299
> 
> 赞同：1
> 
> 时间：2013-01-15T13:55:52.437
> 
> 标签：jquery, html

我有一个表，每个表有 3 行和 3 个选择框。在更改时，我想隐藏选择框，插入一个 250 毫秒的小加载器图像，然后显示带有所选选项的选择框。前任。如果我在第 1 行中选择“已完成”，则仅在第 1 行中隐藏选择，插入加载器图像，然后将“已完成”的选择框显示为已选择（添加属性 selected="selected 到选项"）。这是我的演示： http: [//jsfiddle.net/5ueYw/1/](http://jsfiddle.net/5ueYw/1/)到目前为止我得到了什么。谁能给点建议？谢谢

HTML：

```
<table id="inbTB">
<thead>
    <tr class="head">
        <th class="sortH alignCenter smSelN header">#</th>
        <th class="sortH alignLeft header headerWidth " nowrap="nowrap">Name</th>
        <th class="sortH alignLeft header smSelR"><tag:lang.stats />Status</th>
    </tr>
</thead>
<tbody>
<tr class="sortRow">
        <td class="alignCenter">#1</td>
        <td class="alignLeft upCase">One</td>
        <td class="alignCenter">
            <select class="stSel smSelR smSelRInput">
                <option value="0">New</option>
                <option value="1">Completed</option>
                <option value="2">Canceled</option>
            </select>
            <div class="loader"></div>
        </td>
    </tr>
 <tr class="sortRow">
        <td class="alignCenter">#2</td>
        <td class="alignLeft upCase">Two</td>
        <td class="alignCenter">
            <select class="stSel smSelR smSelRInput">
                <option value="0">New</option>
                <option value="1">Completed</option>
                <option value="2">Canceled</option>
            </select>
            <div class="loader"></div>
        </td>
    </tr>
 <tr class="sortRow">
        <td class="alignCenter">#3</td>
        <td class="alignLeft upCase">Three</td>
        <td class="alignCenter">
            <select class="stSel smSelR smSelRInput">
                <option value="0">New</option>
                <option value="1">Completed</option>
                <option value="2">Canceled</option>
            </select>
            <div class="loader"></div>
        </td>
    </tr> 
```

查询：

```
 var gif = $('.alignCenter .loader');
    $('.stSel').change(function(){
     $('select').hide();
   gif.html('<img alt="" src="" />').show().delay(250).fadeOut(function(){  // src    image is a loader gif
     $('.stSel option selected').show();
   });
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T14:04:44.507

如果我正确理解您的问题，那是因为您`.select`用于隐藏和显示选择。您需要使用`this`以引用触发更改事件的那个...

```
var gif = $('.alignCenter .loader');
$('.stSel').change(function() {
    var $this = $(this);
    $this.hide();
    gif.html('<img alt="" src="" />')
        .show()
        .delay(250)
        .fadeOut(function(){  // src image is a loader gif
            $this.show();
        }
    );
}) 
```

jsFiddle 示例... [http://jsfiddle.net/5ueYw/3/](http://jsfiddle.net/5ueYw/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T14:12:45.313

这是一个开始，有一些地方我相信你可以改进：

[http://jsfiddle.net/5ueYw/6/](http://jsfiddle.net/5ueYw/6/)

HTML

```
<table id="inbTB">
    <thead>
        <tr class="head">
            <th class="sortH alignCenter smSelN header">#</th>
            <th class="sortH alignLeft header headerWidth " nowrap="nowrap">Name</th>
            <th class="sortH alignLeft header smSelR"><tag:lang.stats />Status</th>
        </tr>
    </thead>
    <tbody>
    <tr class="sortRow">
            <td class="alignCenter">#1</td>
            <td class="alignLeft upCase">One</td>
            <td class="alignCenter">
                <select class="stSel smSelR smSelRInput">
                    <option value="0">New</option>
                    <option value="1">Completed</option>
                    <option value="2">Canceled</option>
                </select>
                <div class="loader" style="display:none;">loading...</div>
            </td>
        </tr>
     <tr class="sortRow">
            <td class="alignCenter">#2</td>
            <td class="alignLeft upCase">Two</td>
            <td class="alignCenter">
                <select class="stSel smSelR smSelRInput">
                    <option value="0">New</option>
                    <option value="1">Completed</option>
                    <option value="2">Canceled</option>
                </select>
                <div class="loader" style="display:none;">loading...</div>
            </td>
        </tr>
     <tr class="sortRow">
            <td class="alignCenter">#3</td>
            <td class="alignLeft upCase">Three</td>
            <td class="alignCenter">
                <select class="stSel smSelR smSelRInput">
                    <option value="0">New</option>
                    <option value="1">Completed</option>
                    <option value="2">Canceled</option>
                </select>
                <div class="loader" style="display:none;">loading...</div>
            </td>
        </tr>
  </tbody>
</table> 
```

JS

```
$('.stSel').change(function(){
  myselect = $(this); 
  myloader = $(this).parent().children('.loader');

    // Make sure we override animations that are already running, there is probably a
  // better way to do this.  
  $('.stSel').show();
  $('.loader').hide();  

  myselect.hide();
  myloader.show();

  setTimeout(function() {
    showme( myselect, myloader );
  }, 2000)  
});

function showme(el, loader){
  el.show();
  loader.hide();
} 
```

# android - Android SplashActivity 只显示一次

> ID：14339303
> 
> 赞同：1
> 
> 时间：2013-01-15T13:56:20.427
> 
> 标签：android, splash-screen

我有一个启动主要活动的启动屏幕活动，并且从主要活动启动服务，当我关闭应用程序时，该服务仍在运行，但是当我重新启动它时，它再次显示启动屏幕。

我怎样才能让它只出现一次？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-02T15:16:08.870

要么使用上面的解决方案，要么至少使用我检查应用程序是否第一次启动的部分。但我猜你已经解决了它......

我更喜欢`Splash Screen Layout`在我的`main_activity.xml`. 我通过扩展应用程序来检测应用程序的第一次启动。如果是第一次开始，我会在后台构建 UI 时显示我的 Splash-Screen ...（如果 ProgressBar 滞后，请使用后台线程！）

```
//Extend Application to save the value. You could also use getter/setter for this instead of Shared Preferences...
public class YourApplication extends Application {

    public static final String YOUR_APP_STARTUP = "APP_FIRST_START";

    @Override
    public void onCreate() {
        super.onCreate();

        //set SharedPreference value to true
        SharedPreferences mPreferences = PreferenceManager.getDefaultSharedPreferences(getApplicationContext());
        SharedPreferences.Editor editor = mPreferences.edit();
        editor.putBoolean(YOUR_APP_STARTUP, true);
        editor.apply();     
        ...    
     } 
```

检查你的第一次开始`MainActivity`

```
public class YourMainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    //hide actionbar and other menu which could overlay the splash screen
    getActionBar().hide();

    setContentView(R.layout.activity_main);

    Boolean firstStart = PreferenceManager.getDefaultSharedPreferences(getApplicationContext()).getBoolean(TVApplication.YOUR_APP_STARTUP, true);

    if (firstStart) {
        //First app start, show splash screen an hide it after 5000ms
        final RelativeLayout mSplashScreen = (RelativeLayout) findViewById(R.id.splash_screen);
        mSplashScreen.setVisibility(View.VISIBLE);
        mSplashScreen.setAlpha(1.0f);
        final FrameLayout mFrame = (FrameLayout) findViewById(R.id.frame_container);
        mFrame.setAlpha(0.0f);

        Handler handler = new Handler();
        handler.postDelayed(new Runnable() {
            @Override
            public void run() {
                Animation fadeOutAnimation = AnimationUtils.loadAnimation(getApplicationContext(),
                        R.anim.fade_out_animation);
                fadeOutAnimation.setDuration(500);
                fadeOutAnimation.setAnimationListener(new Animation.AnimationListener() {

                    @Override
                    public void onAnimationStart(Animation animation) {
                        mFrame.setAlpha(1.0f);
                        getActionBar().show();
                    }

                    @Override
                    public void onAnimationEnd(Animation animation) {
                        mSplashScreen.setVisibility(View.GONE);
                    }

                    @Override
                    public void onAnimationRepeat(Animation animation) {

                    }
                });
                mSplashScreen.startAnimation(fadeOutAnimation);
            }
        }, 5000); //<-- time of Splash Screen shown

    } else {
        ((RelativeLayout) findViewById(R.id.splash_screen)).setVisibility(View.GONE);
        getActionBar().show();
    } 
```

在 main.xml 的顶部插入 SplashScreen。我更喜欢`RelativeLayout`那个。在示例中，SplashScreen 放置在带有 的布局中`Navitgation Drawer`，这是我们非常喜欢的，不是吗？

```
//main_activity.xml
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <android.support.v4.widget.DrawerLayout
        android:id="@+id/drawer_layout"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <!-- The main content view -->

        <FrameLayout
            android:id="@+id/frame_container"
            android:layout_width="match_parent"
            android:layout_height="match_parent" />

        <!-- The navigation drawer list -->

        <ListView
            android:id="@+id/slider_list"
            android:layout_width="240dp"
            android:layout_height="match_parent"
            android:layout_alignParentTop="true"
            android:layout_gravity="start"
            android:background="@color/tvtv_background"
            android:choiceMode="singleChoice"
            android:divider="@drawable/nav_bar_divider"
            android:dividerHeight="1dp"
            android:listSelector="@android:color/transparent" />
    </android.support.v4.widget.DrawerLayout>

    <RelativeLayout
        android:id="@+id/splash_screen"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_alignParentTop="true"
        android:background="@color/tvtv_white"
        android:visibility="visible" >

        <ImageView
            android:id="@+id/splash_screen_logo"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_centerInParent="true"
            android:paddingLeft="50dp"
            android:paddingRight="50dp"
            android:scaleType="fitCenter"
            android:src="@drawable/ic_launcher" />

        <TextView
            android:id="@+id/splash_screen_text"
            style="@style/TVTextBlueContent"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/splash_screen_logo"
            android:layout_centerHorizontal="true"
            android:padding="10dp"
            android:text="Awesome splash shiat" />

        <ProgressBar
            android:id="@+id/splash_screen_loader"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/splash_screen_text"
            android:layout_centerHorizontal="true"
            android:clickable="false"
            android:indeterminate="true" />
    </RelativeLayout>

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T14:01:03.230

在您的启动活动中，您可以检查您的服务是否已经在运行（有关详细信息，请参阅[如何检查服务是否在 Android 上运行？](https://stackoverflow.com/questions/600207/android-check-if-a-service-is-running)）。如果服务正在运行，您可以立即启动主要活动并完成启动活动

# jsf - websphere上的基本认证后如何重定向到请求页面

> ID：14339305
> 
> 赞同：1
> 
> 时间：2013-01-15T13:56:30.053
> 
> 标签：jsf, redirect, jsf-2, websphere, basic-authentication

我正在尝试使用该`HttpServletRequest.login`方法登录用户。我已经设置了我的`web.xml`，创建了一个`login.xhtml`，并将登录按钮的操作映射到我的支持 bean 方法，称为`performLogin`

问题是从用户被重定向的地方获取 URL。IE。他试图去`index.xhtml`，但没有会话，所以被重定向到`login.xhtml`。我想首先获取他请求的 url，所以我尝试`RequestDispatcher.FORWARD_REQUEST_URI`从请求映射中读取，如 balusC 所述：[JSF 2.0 : How to redirect to the protected page after using HttpServletRequest.login](https://stackoverflow.com/questions/12245749)

这在使用 websphere 时不起作用，我猜是因为它不转发，而是将用户重定向到登录页面。但是，由于 Websphere 本身能够在使用 http-form 中的内置`j_security_check`操作时进行正确的转发，所以这一定是可以完成的！

所以，我的问题基本上是；在 websphere 上运行时，如何获取此 uri 以便在成功登录时将用户转发到正确的页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T08:59:19.080

要获取您在 websphere 上被重定向的 url，您可以读取名为`WASReqURL`. 你在这里得到的 uri 包括主机名、端口和上下文路径，所以我在我的方法中删除了这些：

```
private String getRedirectUrl() {
    Map<String, Object> cookies = FacesContext.getCurrentInstance().getExternalContext().getRequestCookieMap();

    if (cookies.containsKey(WAS_REDIRECT_COOKIE_NAME)) {
        Cookie cookie = (Cookie) cookies.get(WAS_REDIRECT_COOKIE_NAME);

        String url = cookie.getValue();

        String context = FacesContext.getCurrentInstance().getExternalContext().getRequestContextPath();

        if (url != null && url.contains(context)) {
            url = url.substring(url.indexOf(context) + context.length() + 1);
        }

        return url;
    }
    return null;
} 
```

# php - 从平面文本生成多维数组

> ID：14339306
> 
> 赞同：0
> 
> 时间：2013-01-15T13:56:35.773
> 
> 标签：php, arrays, preg-match, preg-match-all

我有一个文本字段，其中我将菜单导航作为纯文本 - 就像这个：

```
Company
- Apple
-- Inbound
-- Outbound
--- Delete
- Microsoft
-- Inbound
Invoices
- Customers
-- Apple
--- January 
```

等等。现在我想创建一个多维数组。数组应如下所示：

```
Array
(
    [Company] => Array
        (
            [Apple] => Array
                (
                    [Inbound] => '',
                    [Outbound] => Array
                        (
                           [Delete] => ''
                        )
                ) 
```

但我不知道该怎么做。谁能给我一个提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T15:52:43.063

@Rocket Hazmat 是正确的。破折号表示每个项目的深度。试试这个：

```
<?php

function parse_line($line)
{
    $split = explode(" ", $line);
    $result = count($split) == 1 ? array(0, $split[0]) : array(strlen($split[0]), $split[1]);
    return $result;
}

function find_parent($item, $lines)
{
    $dashes = str_pad("", $item[0], '-');
    $orig_line = $item[0] ? $dashes.' '.$item[1] : $item[1];
    $key_of_orig_line = array_search($orig_line, $lines);
    $depth = $item[0];
    for($i = $key_of_orig_line-1; $i > -1; $i--)
    {
        $current_item = parse_line($lines[$i]);
        $current_depth = $current_item[0];
        if($current_depth < $depth)
        {
            return $current_item;
        }
    }
    return array(null, null);
}

function get_trail($item, $lines)
{
    $trail = array();
    $parent = find_parent($item, $lines);
    $trail[] = $parent[1];
    while($parent[1] != null)
    {
        $parent = find_parent($parent, $lines);
        $trail[] = $parent[1];
    }
    return array_reverse($trail);
}

function add_to_menu($item, $trail, $menu)
{
    $cursor = &$menu;
    for($i = 0; $i < count($trail); $i++)
    {
        if($trail[$i] == null) continue;
        $trail[$i] = substr($trail[$i], 0, -3);
        if(!array_key_exists($trail[$i], $cursor) || $cursor[$trail[$i]] == '') $cursor[$trail[$i]] = array();
        $cursor = &$cursor[$trail[$i]];
    }
    $cursor = array_merge($cursor, array(substr($item[1], 0, -3) => ''));
    return $menu;
}

function assign_ids($lines)
{
    $new = array();
    $id_counter = 100;
    foreach($lines as $line)
    {
        $new[] = $line.$id_counter;
        $id_counter++;
    }
    return $new;
}

function p($s) { echo '<pre>'; print_r($s); echo '</pre>'; }

$input = "Company
- Apple
-- Inbound
-- Outbound
--- Delete
- Microsoft
-- Inbound
Invoices
- Customers
-- Apple
--- January";

$menu = array();

$lines = explode("\n", $input);
$lines = array_map("trim", $lines);
$lines = assign_ids($lines);

foreach($lines as $line)
{
    $item = parse_line($line);
    $trail = get_trail($item, $lines);
    $menu = add_to_menu($item, $trail, $menu);
}

p($menu);

?> 
```

# javascript - 检查字符串是否包含javascript中的任何特殊字符或字符串

> ID：14339307
> 
> 赞同：1
> 
> 时间：2013-01-15T13:56:41.060
> 
> 标签：javascript, alert

我想检查一个字符串是否有任何特殊字符。我正在使用这个脚本：

```
var name = $("#name").val();
if(name.match(/[_\W]0-9/))
{
    alert('Not A Name');
} 
```

即使在`name="sas23"`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T14:04:08.690

相反，`/[_\W]0-9/`您的正则表达式文字应该是`/[_\W0-9]/`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T14:00:00.033

你的功能应该是这样的：

```
var name=$("#name").val();
if(!isLetters(name))
{
   alert('Not A Name');
}
function isLetters(str) {
   return /^[a-zA-Z]+$/.test(str);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T14:07:53.600

创建正则表达式时，您应该始终采用白名单方法。这意味着指定允许哪些字符，并默认禁止其他所有字符。如果你想要的只是字母，那么只允许字母：

```
var name=$("#name").val();

if(!name.match(/^[a-z]+$/i)) {
    alert('Not A Name');
} 
```

[试试看。](http://regexr.com?33dn4)

# javascript - 使用 load() 加载 html 页面后，jQuery 单击事件处理程序不起作用

> ID：14339309
> 
> 赞同：9
> 
> 时间：2013-01-15T13:56:45.183
> 
> 标签：javascript, jquery

嗨，我正在索引页面上加载几个 html 页面，具体取决于单击的链接。我对与单击事件处理程序相关的链接有问题。似乎在 jQuery 加载 html 文件后，该 html 中的链接没有有绑定到它们的点击事件处理程序。这是我的代码：

这是其中一个不起作用的链接的 html：

```
<a href="#" id="NavContactPage" data-sectionId="Skills">skills</a> 
```

这是与之相关的jquery代码：

```
$("nav a , a.first_anchor , a#NavContactPage").click(function(){
    var id = $(this).attr("data-sectionId");
    var link = "load/" + id + ".html";

    $("div#Content").load(link , function(){
        $("section#" + id).fadeIn(); 
        if(id === "Portfolio"){
            $('div.slide').cycle('fade');
        }
        if(id === "Home"){
            $("#jcycleslider").cycle({
                fx: mtransition,
                easing: easing,
                before: onBefore,
                after: onAfter,
                speed: mpace,
                timeout: mnext,
                sync: msync,
                randomizeEffects:0,
                pager:'#jslider_nav'
            })
            $("#jslider_nav a").text("");
        }    
    })      
    return false;
}) 
```

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-15T14:05:52.450

`$("selector").click(...)`仅将事件的回调注册`click`到在您进行查询时对 jQuery 可见的元素。因此，对于与此选择器匹配的新添加元素，将不会应用回调。

您要么需要再次将回调注册到新添加的元素，要么需要使用：

`$(document).on('click',"nav a , a.first_anchor , a#NavContactPage", ... );`

建议使用例如将内容加载到的元素作为根而不是使用文档作为根，例如`$("div#Content").on( .... );`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-15T13:59:52.763

据我了解，您应该将委托与 .on() 一起使用：

```
$(document).on('click',"nav a , a.first_anchor , a#NavContactPage",function(){...} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-03-05T22:51:33.080

当我使用 .load() 函数将 html 导入我的主页时遇到了这个问题。我把它放在我准备好的函数中，它对我有用

```
$(document).on('click','#btninsertrequest',function(){
alert("yes");
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T14:09:22.723

你在 jquery 上绑定你的事件准备好了吗？

您的事件绑定代码应该在里面并使用 on 而不是 click。我认为这应该可以解决您的问题。

```
$(function(){

  // Bind event here

}); 
```

# gruntjs - Grunt 对静态文件目录执行操作

> ID：14339311
> 
> 赞同：1
> 
> 时间：2013-01-15T13:56:51.000
> 
> 标签：gruntjs

我一直在努力为我在我的个人网站上所做的工作整合 grunt。但是-似乎它的设计不适用于我当前的实现。简而言之，我使用的是静态站点生成器（Wintersmith）。我的愿望是在站点生成器生成的这个目录上执行一系列操作（缩小 css、uglify for js、格式化 HTML 和删除空行）。

简而言之，这是我的问题：

1.  Grunt 插件似乎总是有不同的文件来源和目的地。就我而言，我只是希望它获取一个文件（例如，一个 CSS 文件）并将其缩小到同一个文件中。
2.  Grunt 似乎无法处理您想要对一系列文件执行操作的情况，其中每个操作都有不同的输出。例如，如果我希望它执行一个操作来格式化目录中所有 HTML 文件上生成的 HTML（没有具体命名它们） - 那么我不能。

在这种情况下我想使用 grunt，但似乎我最好为这个任务编写一个 shell 脚本。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T23:30:51.313

1.  只需在`src`和中指定相同的路径`dest`。

2.  是的你可以。请参阅[动态构建文件对象](http://gruntjs.com/configuring-tasks#building-the-files-object-dynamically)

从文档复制的示例：

```
grunt.initConfig({
  minify: {
    dynamic_mappings: {
      // Grunt will search for "**/*.js" under "lib/" when the "minify" task
      // runs and build the appropriate src-dest file mappings then, so you
      // don't need to update the Gruntfile when files are added or removed.
      files: [
        {
          expand: true,     // Enable dynamic expansion.
          cwd: 'lib/'       // Src matches are relative to this path.
          src: ['**/*.js'], // Actual pattern(s) to match.
          dest: 'build/',   // Destination path prefix.
          ext: '.min.js',   // Dest filepaths will have this extension.
        },
      ],
    },
  },
}); 
```

*这与 Grunt 0.4 相关*

# loader - 迄今为止最小的 AMD 加载程序是什么？

> ID：14339313
> 
> 赞同：8
> 
> 时间：2013-01-15T13:56:56.277
> 
> 标签：loader, amd, js-amd

我正在寻找一个支持动态代码加载的 AMD 加载器，而且它非常小。

loader 是在移动/高延迟环境中使用的，requirejs 的大小实在是太大了。

我不需要： -text
插件
-css 插件
-i18n 插件

支持这些功能的最小 AMD 加载程序是什么？我正在寻找缩小时理想情况下不大于 5k 的东西。Gzip 不包括在此措施中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-07-13T11:38:16.380

By "dynamic code loading," do you mean something like [this](https://stackoverflow.com/questions/12047637)?

You may want to try (listed in order of size):

*   [amdlite](https://github.com/abadc0de/amdlite), 1.924 kb minified
*   [tinyamd](https://github.com/briancray/tinyamd), 2.628 kb minified
*   [tAMD](https://github.com/jivesoftware/tAMD), 4.554 kb minified

Full disclosure: I wrote amdlite. It passes all relevant [unit tests](https://github.com/amdjs/amdjs-tests), but has not seen much real-world use. If you try it and discover anything wrong with it, please [file an issue](https://github.com/abadc0de/amdlite/issues).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-08T00:27:22.290

我相信这与 AMD 规范相当接近，并且在缩小 960 字节时（不包括最后的虚假换行符）可能会占据榜首。

[https://github.com/MaxMotovilov/eeMD](https://github.com/MaxMotovilov/eeMD)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-13T09:04:19.820

您可能想看看我为支持我自己的一些项目而编写的这个[lockandload AMD 加载程序：](https://www.npmjs.com/package/lockandload)

*   Gzipped 但没有缩小它大约 859 字节。

*   没有压缩也没有缩小，大约是 1520 字节。

*   它不需要 polyfill，它可以在 IE10 及更高版本的所有浏览器上运行。

*   它与 RequireJS 兼容（因此支持循环依赖）。

*   它支持匿名模块。

*   它也支持加载旧版 javascript。

*   它支持遗留的 jQuery 代码。

*   它集成了谷歌标签管理器（GTM）。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-03-28T09:36:57.070

除了[Dagg Nabbit 的回答](https://stackoverflow.com/a/24722242/604611)之外，我还发布了我为自己的项目编写并使用的 AMD 代码。

*   [ultralight_amd](https://github.com/TikiTDO/ultralight_amd)，缩小了 625 字节。

你可以制作这种组件，它既小又简单。如果您想自己动手，它可以作为一个很好的起点，您可以根据需要重新调整工具。

注意：这不符合任何类型的规范或标准。它只是为了快速而小巧。

# node.js - 试图使用 supertest 来检查响应的主体 - 得到一个错误

> ID：14339316
> 
> 赞同：30
> 
> 时间：2013-01-15T13:57:07.573
> 
> 标签：node.js, express, supertest

我正在尝试使用 supertest 进行一些测试。这是我要测试的代码片段：

```
it("should create a new org with valid privileges and input with status 201", function(done) {
  request(app)
    .post("/orgs")
    .send({ name: "new_org", owner: "oldschool@aol.com", timezone: "America/New_York", currency: "USD"})
    .expect(201)
    .end(function(err, res) {
      res.body.should.include("new_org");
      done();
    });
}); 
```

尝试测试 res 正文时出现错误：

```
 TypeError: Object #<Object> has no method 'indexOf'
  at Object.Assertion.include (../api/node_modules/should/lib/should.js:508:21)
  at request.post.send.name (../api/test/orgs/routes.js:24:27)
  at Test.assert (../api/node_modules/supertest/lib/test.js:195:3)
  at Test.end (../api/node_modules/supertest/lib/test.js:124:10)
  at Test.Request.callback (../api/node_modules/supertest/node_modules/superagent/lib/node/index.js:575:3)
  at Test.<anonymous> (../api/node_modules/supertest/node_modules/superagent/lib/node/index.js:133:10)
  at Test.EventEmitter.emit (events.js:96:17)
  at IncomingMessage.Request.end (../api/node_modules/supertest/node_modules/superagent/lib/node/index.js:703:12)
  at IncomingMessage.EventEmitter.emit (events.js:126:20)
  at IncomingMessage._emitEnd (http.js:366:10)
  at HTTPParser.parserOnMessageComplete [as onMessageComplete] (http.js:149:23)
  at Socket.socketOnData [as ondata] (http.js:1367:20)
  at TCP.onread (net.js:403:27) 
```

这是超测中的错误，还是我的测试格式不正确？谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-02-07T22:41:04.523

或者，这也应该有效：

```
res.body.should.have.property("name", "new_org"); 
```

另外，只是一个注释，但从逻辑上讲，我认为将其放在另一个调用`expects`而不是最终回调中是有意义的。这个函数也可以重复使用，所以我倾向于尽可能把它放在可重复使用的地方：

```
var isValidOrg = function(res) {
  res.body.should.have.property("name", "new_org");
};

it("should create a new org with valid privileges and input with status 201", function(done) {
  request(app)
    .post("/orgs")
    .send({ name: "new_org", owner: "oldschool@aol.com", timezone: "America/New_York", currency: "USD"})
    .expect(201)
    .expect(isValidOrg)
    .end(done);
}); 
```

现在你可以想象你正在测试一个`GET`for`/orgs/:orgId`并且你可以重复使用相同的验证。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2021-05-18T16:36:58.287

使用 Jest 这对我来说就像这样

```
 it('should do something', async () => {

    const test = await supertest(app)
      .post('/some/endpoint')
      .send({
        someResource,
      })
      .expect(200);

    expect(test.body.someKey).toBeDefined();
    expect(test.body.someKey).toBe('someValue');
  }); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-03-22T11:33:17.417

要测试响应正文，您只需将预期响应包含在`expect`,

```
const { describe, it } = require('mocha');
const supertest = require('supertest');
describe('Validate API calls', () => {
  it('create session post request should fail for invalid credentials', (done) => {
    const data = { user_name: 'incorrect_username', password: 'INVALID' };
    supertest(app).post('/api/session')
      .send(data)
      .expect('Content-Type', /json/)
      .expect({ name: 'AuthenticationError', message: 'Unauthorized' })
      .expect(401, done);
  });
}); 
```

来源：[https ://willi.am/blog/2014/07/28/test-your-api-with-supertest/](https://willi.am/blog/2014/07/28/test-your-api-with-supertest/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T14:57:14.543

这可以重写如下：

```
res.body.name.should.equal("new_org"); 
```

这将修复错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-25T09:54:25.273

如果您的 res.body 是一个数组，则您需要提供对象的索引`res.body[res.body.length -1].name.should.equal("new_org")`- 如果您的属性是数组中的最后一个并且未排序

# html - Capybara，click 在 rspec 上下文中什么也不做，但在命令行提示符上工作，为什么？

> ID：14339327
> 
> 赞同：0
> 
> 时间：2013-01-15T13:57:48.397
> 
> 标签：html, ruby-on-rails, testing, rspec, capybara

**我的配置：**

[https://gist.github.com/4547098](https://gist.github.com/4547098)

**html如下：**

```
<td>
  <img id="listActorsResultsForm:actorList:1:viewActionImage" 
     src="/TM/img/icons64/kfind.gif" height="28" 
     onclick="A4J.AJAX.Submit('listActorsResultsForm',event,
     {'similarityGroupingId':'listActorsResultsForm:actorList:1:j_id709','parameters':
     {'listActorsResultsForm:actorList:1:j_id709':'listActorsResultsForm:actorList:1:j_id709'} 
     } )" style="cursor: pointer;" title="Voir" width="28">
</td> 
```

我的图像有一个链接到 onclick 事件的 ajax.submit。我想做的是用水豚点击图像，但我所有的尝试都失败了。

**我试过的：**

```
 find('listActorsResultsForm:actorList:1:viewActionImage').click
  find_by_id('listActorsResultsForm:actorList:1:viewActionImage').click
  page.find(:xpath,'//*[@id="listActorsResultsForm:actorList:1:viewActionImage"]').click 
```

我找不到单击图像以执行 ajax.submit 的好方法。

**有一种奇怪的行为**

当我做：

```
 page.find(:xpath,'//*[@id="listActorsResultsForm:actorList:1:viewActionImage"]').click
  click_on 'listActorsResultsForm:actorList:1:viewActionImage' 
```

我想看的页面出现了，但是有一个错误：

```
Failure/Error: click_on 'listActorsResultsForm:actorList:1:viewActionImage'
 Capybara::ElementNotFound:
   Unable to find link or button "listActorsResultsForm:actorList:1:viewActionImage"
 # ./spec/aipo_spec.rb:20:in `block (3 levels) in <top (required)>' 
```

但是在命令行上下文中（请参阅设置要点）它可以工作

```
Capybara.find(:xpath,"//img[@alt='viewActor119']").click 
```

找到链接，点击操作打开网页

有谁知道为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T15:18:13.837

根据Capybara [docs](http://rubydoc.info/github/jnicklas/capybara/master/Capybara/Node/Actions%3aclick_link_or_button)，“click_on”专门寻找具有该 ID 的链接或按钮，而您只有具有该 ID 的图像。当您从类似命令运行它时，您正在搜索具有正确 id 的图像。

我的 Ajax 不是很好，所以如果我错了请纠正我，但你不能用正确 id 的标签包装那个图像吗？

# installation - 检查应用程序是否正在运行 - InstallJammer

> ID：14339330
> 
> 赞同：5
> 
> 时间：2013-01-15T13:57:58.813
> 
> 标签：installation, tcl, uninstallation

我正在使用 InstallJammer 来创建我的应用程序。我想在继续卸载程序之前检查应用程序是否正在运行。

```
set program <%Company%><%AppName%>.exe
set pids [twapi::get_process_ids -name $program]
foreach pid $pids {
    catch {twapi::end_process $pid -force}
} 
```

上面给出的是我试过的 TCL 脚本。但该脚本不返回任何值。如何解决这个问题。？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T11:55:42.440

我假设您正在使用[执行脚本条件，而仅使用](http://installjammer.com/docs/index.html?ExecuteScriptCondition)[脚本条件](http://installjammer.com/docs/index.html?ScriptCondition)可能更容易

如果使用脚本条件，只需使用kostix给出的expr即可：

```
[llength [twapi::get_process_ids -name <%Company%><%AppName%>.exe]] > 0 
```

如果您确实必须使用执行脚本条件，那么只需将所有内容都包含在`expr {`and中`}`，您将获得与脚本条件相同的结果（或者：脚本条件只是一个`expr {`在开头和`}`结尾的执行脚本条件）。

```
expr {[llength [twapi::get_process_ids -name <%Company%><%AppName%>.exe]] > 0} 
```

# java - 如何在 Android 中读取自定义属性

> ID：14339333
> 
> 赞同：8
> 
> 时间：2013-01-15T13:58:03.763
> 
> 标签：java, android, android-custom-view

我可以创建自定义属性并将它们应用于常规`EditTexts`，如下所示：

```
<EditText
     android:id="@+id/field1"
     custom:attr1="whatever"
     (...)
<EditText
     android:id="@+id/field2"
     custom:attr1="whatever2"
     (...) 
```

我的问题：我可以在不创建扩展类的情况下读取这些自定义属性的值`EditText`吗？我的意思是，我想从我[的](https://stackoverflow.com/questions/3441396/defining-custom-attrs)`Activity`.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-15T16:03:23.107

> 我的问题：我可以在不创建扩展 EditText 的类的情况下读取这些自定义属性的值吗？

是的，您可以在不扩展类的情况下获得这些属性。为此，您可以使用一个特殊的`Factory`集合`LayoutInflater`来`Activity`解析布局文件。像这样的东西：

```
super.onCreate(savedInstanceState);
getLayoutInflater().setFactory(new CustomAttrFactory());
setContentView(R.layout.the_layout); 
```

是`CustomAttrFactory`这样的：

```
public static class CustomAttrFactory implements Factory {

    @Override
    public View onCreateView(String name, Context context,
            AttributeSet attrs) {
        String attributeValue = attrs
                .getAttributeValue(
                        "http://schemas.android.com/apk/res/com.luksprog.droidproj1",
                        "attrnew");
        Log.e("ZXX", "" + attributeValue);
        // if attributeValue is non null then you know the attribute is
        // present on this view(you can use the name to identify the view,
        // or its id attribute)
        return null;
    }
} 
```

这个想法来自[博客文章](http://sergiandreplace.com/blog/2012/11/15/dealing-with-fonts-and-inflaters-in-android/)，您可能需要阅读它以获取更多信息。

此外，根据该自定义属性（或其他属性），您可以只使用它`android:tag="whatever"`来传递其他数据（然后在`Activity`with中检索它`view.getTag()`）。

我建议您不要使用那些自定义属性并重新考虑您当前的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T14:06:07.610

我会说不，你不能。我检查了它的来源`EditText`和它的父母，但没有找到它将自定义属性存储到实例属性的位置，以便您以后可以使用它们。所以我认为你需要创建自己的扩展类`EditText`。

# tomcat - xwiki 占用 100 cpu

> ID：14339335
> 
> 赞同：1
> 
> 时间：2013-01-15T13:58:13.043
> 
> 标签：tomcat, cpu, wiki, xwiki

我已经安装了 Xwiki 4.4。如果我访问我的 wiki 上的页面，cpu 负载会上升到 100%。一旦页面完成加载，负载就会下降。

我已经完成了以下描述的几个步骤：http: [//platform.xwiki.org/xwiki/bin/view/AdminGuide/Performances](http://platform.xwiki.org/xwiki/bin/view/AdminGuide/Performances)

哪里有问题？

这是htop的图片：http: [//d60.img-up.net/xwiki_htop3fef.png](http://d60.img-up.net/xwiki_htop3fef.png)

我的服务器是虚拟化的，有 2 GB RAM。

雄猫日志：

```
Wrapped Exception: Java heap space
com.xpn.xwiki.XWikiException: Error number 0 in 11: Uncaught exception
Wrapped Exception: Java heap space
        at com.xpn.xwiki.web.XWikiAction.execute(XWikiAction.java:254) [xwiki-platform-legacy-oldcore-4.4.jar:na]
        at com.xpn.xwiki.web.XWikiAction.execute(XWikiAction.java:116) [xwiki-platform-legacy-oldcore-4.4.jar:na]
        at org.apache.struts.action.RequestProcessor.processActionPerform(RequestProcessor.java:431) [struts-1.2.9.jar:1.2.9]
        at org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:236) [struts-1.2.9.jar:1.2.9]
        at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1196) [struts-1.2.9.jar:1.2.9]
        at org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:432) [struts-1.2.9.jar:1.2.9]
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:637) [servlet-api-2.5.jar:na]
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:717) [servlet-api-2.5.jar:na]
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290) [catalina-6.0.35.jar:6.0.35]
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) [catalina-6.0.35.jar:6.0.35]
        at com.xpn.xwiki.web.ActionFilter.doFilter(ActionFilter.java:120) [xwiki-platform-legacy-oldcore-4.4.jar:na]
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235) [catalina-6.0.35.jar:6.0.35]
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) [catalina-6.0.35.jar:6.0.35]
        at org.xwiki.wysiwyg.server.filter.ConversionFilter.doFilter(ConversionFilter.java:144) [xwiki-platform-wysiwyg-server-4.4.jar:na]
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235) [catalina-6.0.35.jar:6.0.35]
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) [catalina-6.0.35.jar:6.0.35]
        at com.xpn.xwiki.plugin.webdav.XWikiDavFilter.doFilter(XWikiDavFilter.java:66) [xwiki-platform-webdav-server-4.4.jar:na]
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235) [catalina-6.0.35.jar:6.0.35]
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) [catalina-6.0.35.jar:6.0.35]
        at org.xwiki.container.servlet.filters.internal.SavedRequestRestorerFilter.doFilter(SavedRequestRestorerFilter.java:208) [xwiki-platform-container-servlet-4.4.jar:na]
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235) [catalina-6.0.35.jar:6.0.35]
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) [catalina-6.0.35.jar:6.0.35]
        at org.xwiki.container.servlet.filters.internal.SetCharacterEncodingFilter.doFilter(SetCharacterEncodingFilter.java:111) [xwiki-platform-container-servlet-4.4.jar:na]
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235) [catalina-6.0.35.jar:6.0.35]
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) [catalina-6.0.35.jar:6.0.35]
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233) [catalina-6.0.35.jar:6.0.35]
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191) [catalina-6.0.35.jar:6.0.35]
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127) [catalina-6.0.35.jar:6.0.35]
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [catalina-6.0.35.jar:6.0.35]
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [catalina-6.0.35.jar:6.0.35]
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293) [catalina-6.0.35.jar:6.0.35]
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859) [tomcat-coyote-6.0.35.jar:6.0.35]
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602) [tomcat-coyote-6.0.35.jar:6.0.35]
        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489) [tomcat-coyote-6.0.35.jar:6.0.35]
        at java.lang.Thread.run(Thread.java:636) [na:1.6.0_18] 
```

Tomcat（卡特琳娜日志？）

```
INFO: Pausing Coyote HTTP/1.1 on http-8080
Jan 15, 2013 1:18:08 PM org.apache.catalina.core.StandardService stop
INFO: Stopping service Catalina
Jan 15, 2013 1:18:09 PM org.apache.catalina.loader.WebappClassLoader clearReferencesJdbc
SEVERE: The web application [/xwiki] registered the JDBC driver [com.mysql.jdbc.Driver] but failed to unregister it when the web application was stopped. To prevent a memory leak, the JDBC Driver has been forcibly unregistered.
Jan 15, 2013 1:18:09 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [/xwiki] appears to have started a thread named [com.google.inject.internal.util.$Finalizer] but has failed to stop it. This is very likely to create a memory leak.
Jan 15, 2013 1:18:09 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [/xwiki] appears to have started a thread named [Job Manager daemon thread] but has failed to stop it. This is very likely to create a memory leak.
Jan 15, 2013 1:18:09 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [/xwiki] appears to have started a thread named [MySQL Statement Cancellation Timer] but has failed to stop it. This is very likely to create a memory leak.
Jan 15, 2013 1:18:09 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [/xwiki] appears to have started a thread named [Lucene Index Updater] but has failed to stop it. This is very likely to create a memory leak.
Jan 15, 2013 1:18:09 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [/xwiki] appears to have started a thread named [DefaultQuartzScheduler_Worker-1] but has failed to stop it. This is very likely to create a memory leak.

Jan 15, 2013 1:18:09 PM org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap
SEVERE: The web application [/xwiki] created a ThreadLocal with key of type [java.lang.ThreadLocal] (value [java.lang.ThreadLocal@126f0939]) and a value of type [org.python.core.ThreadState] (value [org.python.core.ThreadState@37c686a3]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak.
Jan 15, 2013 1:18:09 PM org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap
SEVERE: The web application [/xwiki] created a ThreadLocal with key of type [java.lang.ThreadLocal] (value [java.lang.ThreadLocal@4ab153f0]) and a value of type [org.codehaus.plexus.classworlds.realm.ClassRealm] (value [ClassRealm[plexus.core, parent: null]]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak.
Jan 15, 2013 1:18:09 PM org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap
SEVERE: The web application [/xwiki] created a ThreadLocal with key of type [com.google.inject.internal.InjectorImpl$1] (value [com.google.inject.internal.InjectorImpl$1@3267924b]) and a value of type [java.lang.Object[]] (value [[Ljava.lang.Object;@2db593c7]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak.
Jan 15, 2013 1:18:09 PM org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap
SEVERE: The web application [/xwiki] created a ThreadLocal with key of type [org.sonatype.guice.bean.inject.BeanInjector$1] (value [org.sonatype.guice.bean.inject.BeanInjector$1@6bf90542]) and a value of type [boolean[]] (value [[Z@29c8676f]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak.
Jan 15, 2013 1:18:09 PM org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap
SEVERE: The web application [/xwiki] created a ThreadLocal with key of type [com.google.inject.internal.InjectorImpl$1] (value [com.google.inject.internal.InjectorImpl$1@3267924b]) and a value of type [java.lang.Object[]] (value [[Ljava.lang.Object;@23febdd7]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak.
Jan 15, 2013 1:18:09 PM org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap
SEVERE: The web application [/xwiki] created a ThreadLocal with key of type [java.lang.ThreadLocal] (value [java.lang.ThreadLocal@3fe51ea2]) and a value of type [org.infinispan.context.SingleKeyNonTxInvocationContext] (value [SingleKeyNonTxInvocationContext{flags=null}]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak.
Jan 15, 2013 1:18:38 PM org.apache.catalina.startup.ClassLoaderFactory validateFile
WARNING: Problem with directory [/usr/share/tomcat6/server/classes], exists: [false], isDirectory: [false], canRead: [false]
Jan 15, 2013 1:18:38 PM org.apache.catalina.startup.ClassLoaderFactory validateFile
WARNING: Problem with directory [/usr/share/tomcat6/server], exists: [false], isDirectory: [false], canRead: [false]
Jan 15, 2013 1:18:38 PM org.apache.catalina.startup.ClassLoaderFactory validateFile
WARNING: Problem with directory [/usr/share/tomcat6/shared/classes], exists: [false], isDirectory: [false], canRead: [false]
Jan 15, 2013 1:18:38 PM org.apache.catalina.startup.ClassLoaderFactory validateFile
WARNING: Problem with directory [/usr/share/tomcat6/shared], exists: [false], isDirectory: [false], canRead: [false]
Jan 15, 2013 1:18:41 PM org.apache.coyote.http11.Http11Protocol init
INFO: Initializing Coyote HTTP/1.1 on http-8080
Jan 15, 2013 1:18:41 PM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 2737 ms
Jan 15, 2013 1:18:41 PM org.apache.catalina.core.StandardService start
INFO: Starting service Catalina
Jan 15, 2013 1:18:41 PM org.apache.catalina.core.StandardEngine start
INFO: Starting Servlet Engine: Apache Tomcat/6.0.35
Jan 15, 2013 1:18:41 PM org.apache.catalina.startup.HostConfig deployDescriptor
INFO: Deploying configuration descriptor ROOT.xml
Jan 15, 2013 1:18:42 PM org.apache.catalina.startup.HostConfig deployDescriptor
INFO: Deploying configuration descriptor xwiki.xml
Jan 15, 2013 1:19:07 PM org.apache.coyote.http11.Http11Protocol start
INFO: Starting Coyote HTTP/1.1 on http-8080
Jan 15, 2013 1:19:07 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 25366 ms
Jan 15, 2013 1:26:57 PM org.apache.catalina.startup.HostConfig checkResources
INFO: Reloading context [/xwiki]
Jan 15, 2013 1:26:58 PM org.apache.catalina.loader.WebappClassLoader clearReferencesJdbc
SEVERE: The web application [/xwiki] registered the JDBC driver [com.mysql.jdbc.Driver] but failed to unregister it when the web application was stopped. To prevent a memory leak, the JDBC Driver has been forcibly unregistered.
Jan 15, 2013 1:26:58 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [/xwiki] appears to have started a thread named [com.google.inject.internal.util.$Finalizer] but has failed to stop it. This is very likely to create a memory leak.
Jan 15, 2013 1:26:58 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [/xwiki] appears to have started a thread named [Job Manager daemon thread] but has failed to stop it. This is very likely to create a memory leak.
Jan 15, 2013 1:26:58 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [/xwiki] appears to have started a thread named [MySQL Statement Cancellation Timer] but has failed to stop it. This is very likely to create a memory leak.
Jan 15, 2013 1:26:58 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [/xwiki] appears to have started a thread named [Lucene Index Updater] but has failed to stop it. This is very likely to create a memory leak.
Jan 15, 2013 1:26:58 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [/xwiki] appears to have started a thread named [DefaultQuartzScheduler_Worker-1] but has failed to stop it. This is very likely to create a memory leak.
Jan 15, 2013 1:26:58 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [/xwiki] appears to have started a thread named [DefaultQuartzScheduler_Worker-2] but has failed to stop it. This is very likely to create a memory leak.
Jan 15, 2013 1:26:58 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [/xwiki] appears to have started a thread named [DefaultQuartzScheduler_Worker-3] but has failed to stop it. This is very likely to create a memory leak.
Jan 15, 2013 1:26:58 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [/xwiki] appears to have started a thread named [DefaultQuartzScheduler_Worker-4] but has failed to stop it. This is very likely to create a memory leak.
Jan 15, 2013 1:26:58 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [/xwiki] appears to have started a thread named [DefaultQuartzScheduler_Worker-5] but has failed to stop it. This is very likely to create a memory leak.
Jan 15, 2013 1:26:58 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [/xwiki] appears to have started a thread named [DefaultQuartzScheduler_Worker-6] but has failed to stop it. This is very likely to create a memory leak.
Jan 15, 2013 1:26:58 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [/xwiki] appears to have started a thread named [DefaultQuartzScheduler_Worker-7] but has failed to stop it. This is very likely to create a memory leak.
Jan 15, 2013 1:26:58 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [/xwiki] appears to have started a thread named [DefaultQuartzScheduler_Worker-8] but has failed to stop it. This is very likely to create a memory leak.
Jan 15, 2013 1:26:58 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [/xwiki] appears to have started a thread named [DefaultQuartzScheduler_Worker-9] but has failed to stop it. This is very likely to create a memory leak.
Jan 15, 2013 1:26:58 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [/xwiki] appears to have started a thread named [DefaultQuartzScheduler_Worker-10] but has failed to stop it. This is very likely to create a memory leak.
Jan 15, 2013 1:26:58 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [/xwiki] appears to have started a thread named [Statistics storing daemon] but has failed to stop it. This is very likely to create a memory leak.
Jan 15, 2013 1:26:58 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [/xwiki] appears to have started a thread named [DefaultQuartzScheduler_QuartzSchedulerThread] but has failed to stop it. This is very likely to create a memory leak.
Jan 15, 2013 1:26:58 PM org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap
SEVERE: The web application [/xwiki] created a ThreadLocal with key of type [java.lang.ThreadLocal] (value [java.lang.ThreadLocal@29c51b4e]) and a value of type [org.codehaus.plexus.classworlds.realm.ClassRealm] (value [ClassRealm[plexus.core, parent: null]]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak.
Jan 15, 2013 1:26:58 PM org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap
SEVERE: The web application [/xwiki] created a ThreadLocal with key of type [com.google.inject.internal.InjectorImpl$1] (value [com.google.inject.internal.InjectorImpl$1@3370ec9d]) and a value of type [java.lang.Object[]] (value [[Ljava.lang.Object;@3abe51cd]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak.
Jan 15, 2013 1:26:58 PM org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap
SEVERE: The web application [/xwiki] created a ThreadLocal with key of type [org.sonatype.guice.bean.inject.BeanInjector$1] (value [org.sonatype.guice.bean.inject.BeanInjector$1@24ec87dc]) and a value of type [boolean[]] (value [[Z@24cb8f74]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak.
Jan 15, 2013 1:26:58 PM org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap
SEVERE: The web application [/xwiki] created a ThreadLocal with key of type [java.lang.ThreadLocal] (value [java.lang.ThreadLocal@30371b8b]) and a value of type [org.infinispan.context.SingleKeyNonTxInvocationContext] (value [SingleKeyNonTxInvocationContext{flags=null}]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak.
Jan 15, 2013 1:26:58 PM org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap
SEVERE: The web application [/xwiki] created a ThreadLocal with key of type [java.lang.ThreadLocal] (value [java.lang.ThreadLocal@71f15b67]) and a value of type [org.infinispan.context.SingleKeyNonTxInvocationContext] (value [SingleKeyNonTxInvocationContext{flags=null}]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak.
Jan 15, 2013 1:26:58 PM org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap
SEVERE: The web application [/xwiki] created a ThreadLocal with key of type [java.lang.ThreadLocal] (value [java.lang.ThreadLocal@1ca801a2]) and a value of type [org.infinispan.context.SingleKeyNonTxInvocationContext] (value [SingleKeyNonTxInvocationContext{flags=null}]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak.
Jan 15, 2013 1:26:58 PM org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap
SEVERE: The web application [/xwiki] created a ThreadLocal with key of type [com.xpn.xwiki.store.migration.AbstractDataMigrationManager.ThreadLock] (value [com.xpn.xwiki.store.migration.AbstractDataMigrationManager$ThreadLock@64827e06]) and a value of type [java.lang.Integer] (value [0]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak.
Jan 15, 2013 1:26:58 PM org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap
SEVERE: The web application [/xwiki] created a ThreadLocal with key of type [com.xpn.xwiki.store.migration.AbstractDataMigrationManager.ThreadLock] (value [com.xpn.xwiki.store.migration.AbstractDataMigrationManager$ThreadLock@64827e06]) and a value of type [java.lang.Integer] (value [0]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak.
Jan 15, 2013 1:26:59 PM org.apache.coyote.http11.Http11Protocol pause
INFO: Pausing Coyote HTTP/1.1 on http-8080
Jan 15, 2013 1:27:00 PM org.apache.catalina.core.StandardService stop
INFO: Stopping service Catalina
Jan 15, 2013 1:27:12 PM org.apache.catalina.core.StandardContext start
SEVERE: Error listenerStart
Jan 15, 2013 1:27:12 PM org.apache.catalina.core.StandardContext start
SEVERE: Context [/xwiki] startup failed due to previous errors
Jan 15, 2013 1:27:12 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [/xwiki] appears to have started a thread named [Job Manager daemon thread] but has failed to stop it. This is very likely to create a memory leak.
Jan 15, 2013 1:27:16 PM org.apache.coyote.http11.Http11Protocol destroy
INFO: Stopping Coyote HTTP/1.1 on http-8080
Jan 15, 2013 1:27:17 PM org.apache.catalina.startup.ClassLoaderFactory validateFile
WARNING: Problem with directory [/usr/share/tomcat6/server/classes], exists: [false], isDirectory: [false], canRead: [false]
Jan 15, 2013 1:27:17 PM org.apache.catalina.startup.ClassLoaderFactory validateFile
WARNING: Problem with directory [/usr/share/tomcat6/server], exists: [false], isDirectory: [false], canRead: [false]
Jan 15, 2013 1:27:17 PM org.apache.catalina.startup.ClassLoaderFactory validateFile
WARNING: Problem with directory [/usr/share/tomcat6/shared/classes], exists: [false], isDirectory: [false], canRead: [false]
Jan 15, 2013 1:27:17 PM org.apache.catalina.startup.ClassLoaderFactory validateFile
WARNING: Problem with directory [/usr/share/tomcat6/shared], exists: [false], isDirectory: [false], canRead: [false]
Jan 15, 2013 1:27:19 PM org.apache.coyote.http11.Http11Protocol init
INFO: Initializing Coyote HTTP/1.1 on http-8080
Jan 15, 2013 1:27:19 PM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 1319 ms
Jan 15, 2013 1:27:19 PM org.apache.catalina.core.StandardService start
INFO: Starting service Catalina
Jan 15, 2013 1:27:19 PM org.apache.catalina.core.StandardEngine start
INFO: Starting Servlet Engine: Apache Tomcat/6.0.35
Jan 15, 2013 1:27:19 PM org.apache.catalina.startup.HostConfig deployDescriptor
INFO: Deploying configuration descriptor ROOT.xml
Jan 15, 2013 1:27:19 PM org.apache.catalina.startup.HostConfig deployDescriptor
INFO: Deploying configuration descriptor xwiki.xml
Jan 15, 2013 1:27:38 PM org.apache.coyote.http11.Http11Protocol start
INFO: Starting Coyote HTTP/1.1 on http-8080
Jan 15, 2013 1:27:38 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 18762 ms
Jan 15, 2013 1:42:34 PM org.apache.tomcat.util.http.Parameters processParameters
INFO: Invalid chunk starting at byte [0] and ending at byte [0] with a value of [null] ignored 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T16:52:48.563

看起来您使用默认内存设置离开了 Tomcat。XWiki 是相当资源密集型的，因此至少需要 512M 的堆空间和 128M 的 PermGen 空间才能获得良好的稳定性，这是获得良好性能的两倍。

堆栈跟踪本身表明正在发生这种情况：

> 包装异常：Java 堆空间

JVM 占用了大量 CPU，因为它不断尝试通过运行垃圾收集器来释放更多内存。

有关更多详细信息以及如何修复它，请参阅[XWiki 的 Tomcat 安装指南。](http://platform.xwiki.org/xwiki/bin/view/AdminGuide/InstallationTomcat#HOutOfMemoryError)

# javascript - Jquery随机位置到多个div

> ID：14339340
> 
> 赞同：0
> 
> 时间：2013-01-15T13:58:40.513
> 
> 标签：javascript, jquery, html, position, each

那是我的代码[http://jsfiddle.net/BREvn/2/](http://jsfiddle.net/BREvn/2/) **（它有效）**，但我希望每个 div 都具有*唯一的*位置坐标。现在脚本得到第一个，其他人移动到他的地方。怎么可能解决这个问题？我尝试了一个 .each 函数，但没有任何结果。我认为这很容易，但我在 jquery/javascript 方面做得太好了。

```
$('#latestblock').animate({
  top: newY,
  left: newX
}, 500, function() { }); 
```

我认为这里必须循环但不知道该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T14:06:50.747

像这样的东西？

[http://jsfiddle.net/BREvn/5/](http://jsfiddle.net/BREvn/5/)

我将 id 重命名为一个类并创建了一个无限循环。还将对象发送到 moveRandom 函数“moveRandom(obj)”中，并在动画完成后，自行调用 moveRandom 函数。

```
$('.latestblock').each(function() {
    moveRandom($(this));
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T14:04:25.053

您不能为多个元素提供相同的 id。

你可以使用一个类

```
<div id='container'>
  <div class='latestblock'></div>
  <div class='latestblock'></div>
  <div class='latestblock'></div>
</div> 
```

然后使用`each`动画所有元素：

```
$('.latestblock').each(function(){ // <= iterates on all blocks
   moveRandom($(this)); // <= pass the block to the moveRandom function
}); 
```

[完整的演示](http://jsfiddle.net/f4p6b/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T14:05:58.453

这是更新的工作版本：http: [//jsfiddle.net/BREvn/4/](http://jsfiddle.net/BREvn/4/)

ID 必须是唯一的，不能有 3 个元素具有相同的 id='latestblock'

我还调用了该函数 3 次，并确保该函数正在使用传入的参数。

```
moveRandom('#latestblock1');
moveRandom('#latestblock2');
moveRandom('#latestblock3'); 
```

# intellij-idea - 如何在 Intellij IDEA 标题中显示当前的 SVN 分支？

> ID：14339341
> 
> 赞同：8
> 
> 时间：2013-01-15T13:58:46.507
> 
> 标签：intellij-idea

我经常切换到不同的 SVN 分支，通常我使用 1 个分支来处理我正在处理的 1 个问题。

IDEA 12 没有在一些好的可见区域显示当前的 SVN 分支，有时我忘记了我正在处理的分支，并且必须转到更改 -> 工作副本信息 -> 刷新

有没有办法在窗口标题或状态栏中显示当前分支（就像 IDEA 对 git 所做的那样）？

我也在尝试编写一个可以在 IDEA 标题中显示当前 SVN 分支的插件，但并不想阅读大量的 API 和文档。

据我了解，如果没有标准方法，我需要： 1）以某种方式订阅 SVN 更新事件 2）修改 IDEA 标题（或状态栏）并将当前分支名称添加到其中

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-23T16:03:41.307

尚不支持，请[投票支持此开放请求](http://youtrack.jetbrains.com/issue/IDEA-80019)，以尽快实现此功能。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-11-06T10:22:04.663

我只需点击“更新项目 (Ctrl+T)”即可识别分支。在“使用分支”字段中，它将显示当前分支。

但是，当然它不如为分支或类似的东西设置一些状态栏那么方便。有时我忘记在分支之间切换，我想如果有这样的酒吧，那么它可能会解决这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T17:51:04.230

我知道您正在寻找一些自动化的方法来做到这一点。不幸的是，我对此没有答案。但是我解决这个问题的方法是在项目标题中手动写入分支名称。例如，我有一个名为的项目`Product Trunk`和另一个名为`Product Branch v2.3`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-05T11:45:31.760

还有另一个请求：[https](https://youtrack.jetbrains.com/issue/IDEA-76042) ://youtrack.jetbrains.com/issue/IDEA-76042 - 这个得到了更多关注，所以也请给这个投票。

# sql-server - 将数据从 excel 导入 SQL Server 时出现错误消息

> ID：14339344
> 
> 赞同：0
> 
> 时间：2013-01-15T13:58:56.767
> 
> 标签：sql-server, oledb

我正在尝试在不使用向导的情况下将数据从 Excel 导入 SQL，因为这是一个每周都需要进行的过程，因此自动化是必须的。但是，当我运行以下脚本时，我收到一条错误消息：

**脚本：**

```
IF OBJECT_ID('TEST Weekly Sales D') IS NOT NULL
DROP TABLE [TEST Weekly Sales D]

SELECT *
INTO [TEST Weekly Sales D]
FROM OPENROWSET('Microsoft.ACE.OLEDB.12.0',
  'Excel 12.0;Database=C:\.....\Weekly Sales D.xlsx',
   ['SHEET1$'])
GO 
```

**错误信息：**

> 链接服务器“（null）”的 OLE DB 提供程序“Microsoft.ACE.OLEDB.12.0”返回消息“未指定错误”。消息 7303，级别 16，状态 1，第 5 行无法为链接服务器“（null）”初始化 OLE DB 提供程序“Microsoft.ACE.OLEDB.12.0”的数据源对象。

服务器上没有excel，但有人告诉我这不是问题。我安装了 ACE OLEDB 驱动程序，但它似乎间歇性地工作。

有人可以指出我哪里出错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T14:38:55.287

首先检查 ACE 提供程序是否出现在 Management Studio 中的 ServerObjects>Linked Servers>Providers 树下。

然后运行以下命令（单独运行它们以注意是否出现“从 0 更改为 1”信息）。

要启用 OPENROWSET：

```
sp_configure 'show advanced options'
GO
RECONFIGURE
GO

sp_configure 'Ad Hoc Distributed Queries', 1
GO
RECONFIGURE
GO 
```

要配置 ACE 驱动程序：

```
EXEC sp_MSset_oledb_prop N'Microsoft.ACE.OLEDB.12.0', N'AllowInProcess', 1
GO
EXEC sp_MSset_oledb_prop N'Microsoft.ACE.OLEDB.12.0', N'DynamicParameters', 1
GO 
```

另外，您安装了哪个版本的驱动程序，以及您运行的是哪个版本的 SQL Server？x86 还是 64？

问候

# javascript - 在这个例子中使用 Backbone over jQuery 插件的好处

> ID：14339346
> 
> 赞同：0
> 
> 时间：2013-01-15T13:59:10.470
> 
> 标签：javascript, jquery, jquery-ui, backbone.js

我希望了解在这种情况下使用 Backbone 而不是 jQuery 插件的主要好处：

*   我的应用程序有 5 个主要部分可供用户导航。
*   我使用 oAuth2.0 进行身份验证和访问应用程序（所有部分）。
*   其中一个部分在屏幕上有 4 列。每列都是一个无序列表。

我想允许用户过滤和排序这些列表。此外，当用户单击列表项时，它会将他们带到编辑页面（不同的 URL），用户可以在其中编辑该特定列表项的详细信息。我更愿意通过模态或类似的方式来执行此操作，从而消除加载新页面。

**解决方案 1**

我正在考虑使用 jQuery 插件（如[http://codecanyon.net/item/jquery-jplist-plugin/full_screen_preview/1860318?ref=lvraa](http://codecanyon.net/item/jquery-jplist-plugin/full_screen_preview/1860318?ref=lvraa)）和 ajax 调用我现有的代码来排序和过滤列表中的 li 元素. 这样做我可能会保持编辑页面不变或使用模式。

**解决方案 2**

但是，在查看 Backbone 之后，我正在考虑使用它而不是 jQuery 插件。Backbone 将处理列表的排序和过滤以及列表的编辑。然后，用户可以导航到应用程序的其他部分（在不同的 url），这些部分不会使用 Backbone 构建。

为此使用 Backbone 有什么好处？

我是 Backbone 的新手，不确定这对于我想要做的事情是否有点过分？我关心的另一件事是编辑其中一个列表元素时的身份验证部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T20:01:29.640

你必须退后一步，看看更大的图景，看看 Backbone 带来了什么。IMO，任何需要使用一组模型或集合的应用程序都可以从使用 Backbone 中受益。Backbone 是严格结构的，它仍然需要您编写自己的过滤功能。话虽如此，如果您将 Backbone 引入图片中，则构建自己的过滤机制会更容易。Backbone 和另一个 jQuery 插件可以在同一个应用程序中共存，因为它们解决的问题是不同的。

jQuery 插件只能处理所呈现的数据，但您仍然必须进行手动管道以通过 AJAX 调用来处理这些数据（除非插件会为您处理这些数据）。

最后，你不能逃脱他们中的任何一个。答案将取决于您希望如何构建应用程序以及您希望对其进行多少控制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T14:20:28.540

除非您的应用程序中需要 MVC 或 MV* 结构，否则您不需要使用 BackboneJS。jQuery 插件不一定会被 Backbone 取代。顺便说一句，Backbone 默认使用 jQuery 进行 DOM 相关操作。看看您的要求，我想说您可以使用 Backbone 来布置应用程序（不过我更喜欢 AngularJS）并在必要时使用该 jQuery 插件。只知道一个 jQuery 插件不能取代 MV* 框架的本质。

# mysql - MySql无故插入错误

> ID：14339349
> 
> 赞同：0
> 
> 时间：2013-01-15T13:59:14.890
> 
> 标签：mysql, sql

我有下表：

```
CREATE TABLE IF NOT EXISTS `towers_raw_data` (
`DoveID` varchar(10) NOT NULL DEFAULT '',
`NG` varchar(8) DEFAULT NULL,
`SNLat` varchar(8) DEFAULT NULL,
`SNLong` varchar(9) DEFAULT NULL,
`Postcode` varchar(8) DEFAULT NULL,
`TowerBase` int(4) DEFAULT NULL,
`County` varchar(10) DEFAULT NULL,
`Country` varchar(12) DEFAULT NULL,
`ISO3166code` varchar(2) DEFAULT NULL,
`Diocese` varchar(14) DEFAULT NULL,
`Place` varchar(29) DEFAULT NULL,
`Place2` varchar(30) DEFAULT NULL,
`PlaceCL` varchar(30) DEFAULT NULL,
`Dedicn` varchar(54) DEFAULT NULL,
`Bells` int(2) DEFAULT NULL,
`Wt` int(4) DEFAULT NULL,
`App` varchar(3) DEFAULT NULL,
`Note` varchar(2) DEFAULT NULL,
`Hz` varchar(5) DEFAULT NULL,
`Details` varchar(1) DEFAULT NULL,
`GF` varchar(2) DEFAULT NULL,
`Toilet` varchar(1) DEFAULT NULL,
`UR` varchar(3) DEFAULT NULL,
`PDNo` varchar(1) DEFAULT NULL,
`PracN` varchar(3) DEFAULT NULL,
`PSt` varchar(5) DEFAULT NULL,
`PrXF` varchar(22) DEFAULT NULL,
`OvhaulYr` varchar(4) DEFAULT NULL,
`Contractor` varchar(28) DEFAULT NULL,
`TuneYr` varchar(4) DEFAULT NULL,
`ExtraInfo` varchar(163) DEFAULT NULL,
`WebPage` varchar(70) DEFAULT NULL,
`Updated` varchar(1) DEFAULT NULL,
`Affiliations` varchar(14) DEFAULT NULL,
`AltName` varchar(39) DEFAULT NULL,
`Simulator` varchar(1) DEFAULT NULL,
`Lat` varchar(8) DEFAULT NULL,
`Long` varchar(9) DEFAULT NULL,
PRIMARY KEY (`DoveID`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1; 
```

我正在尝试运行以下查询：

```
INSERT INTO `towers_raw_data` (`Affiliations`, `AltName`, `App`, `Bells`, `Contractor`, `Country`, `County`, `Dedicn`, `Details`, `Diocese`, `DoveID`, `ExtraInfo`, `GF`, `Hz`, `ISO3166code`, `Lat`, `Long `, `NG`, `Note`, `OvhaulYr`, `PDNo`, `PSt`, `Place`, `Place2`, `PlaceCL`, `Postcode`, `PrXF`, `PracN`, `SNLat`, `SNLong`, `Simulator`, `Toilet`, `TowerBase`, `TuneYr`, `UR`, `Updated`, `WebPage`, `Wt`) VALUES
 ('','','','3','','','Leics','S James','C','Leicester','AB KETTLEB','Ringing prohibited; tuning: 1-3 of 4','','879.0','GB','52.79858','-0.92747\r\n','SK724229','A','','','','Ab Kettleby','','','LE14 3HS','','','','','','','6918','','','','','652') 
```

出于某种原因，我收到以下错误：

```
 #1054 - Unknown column 'Long ' in 'field list' 
```

当我的表中有一个名为 Long 的字段时，任何人都知道为什么会发生这种情况

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T14:00:17.427

产生错误是有原因的。

您的列名中有一个额外的空格`long`，

```
`long ` is not equal to `long` 
```

所以你应该删除额外的尾随空格。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T14:00:43.317

你有一个名为“long”而不是“long”的字段

注意尾随空格

采用

```
INSERT INTO `towers_raw_data` (`Affiliations`, `AltName`, `App`, `Bells`, `Contractor`, `Country`, `County`, `Dedicn`, `Details`, `Diocese`, `DoveID`, `ExtraInfo`, `GF`, `Hz`, `ISO3166code`, `Lat`, `Long`, `NG`, `Note`, `OvhaulYr`, `PDNo`, `PSt`, `Place`, `Place2`, `PlaceCL`, `Postcode`, `PrXF`, `PracN`, `SNLat`, `SNLong`, `Simulator`, `Toilet`, `TowerBase`, `TuneYr`, `UR`, `Updated`, `WebPage`, `Wt`) VALUES
 ('','','','3','','','Leics','S James','C','Leicester','AB KETTLEB','Ringing prohibited; tuning: 1-3 of 4','','879.0','GB','52.79858','-0.92747\r\n','SK724229','A','','','','Ab Kettleby','','','LE14 3HS','','','','','','','6918','','','','','652') 
```

反而

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T14:02:07.123

您的 INSERT 是指 末尾`Long`没有空格。`Long`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T14:02:30.333

`long`是 mysql 中的关键字，您可能对该列名有疑问。

[在如何将 MySQL 列从 long 重命名为其他内容中](https://stackoverflow.com/questions/4243932/how-to-rename-a-mysql-column-from-long-to-something-else)查看更多信息

# c# - 保存多页 tiff 而不写入整个文件

> ID：14339350
> 
> 赞同：0
> 
> 时间：2013-01-15T13:59:16.773
> 
> 标签：c#, tiff, multipage

我面临一个挑战，我需要在 tiff 文件的最后一页上做一些工作。所以我写了下面的示例代码，它确实有效，只是运行缓慢。代码最终会执行很多，我需要加快速度。

我玩过多线程的想法，但我认为结果并不好，因为最终所有数据都必须写入同一个文件，这似乎是耗时的部分。

我希望有一个答案可以告诉我如何仅在最后一页上工作，或者我还没有考虑过的事情。

```
private void rotateLastPage() {
    string inputfile = "C:\\input.tif";
    string tmpfile = inputfile + ".tmp";

    Bitmap bmap = (Bitmap)Image.FromFile(inputfile);
    int max = bmap.GetFrameCount(FrameDimension.Page);

    Image[] images = new Image[max];
    int i;
    for (i = 0; i < max; i++)
    {
            bmap.SelectActiveFrame(FrameDimension.Page, i);
            images[i] = (Image)bmap.Clone();
    }
    bmap.Dispose();

    Bitmap pages = null;
    i = 0;
    foreach(Image image in images)
    {
        try
        {
            if (i == max - 1)
            {
                image.RotateFlip(RotateFlipType.Rotate90FlipNone);
            }
            EncoderParameters encoderParameters = new EncoderParameters(2);
            encoderParameters.Param[0] = new EncoderParameter(System.Drawing.Imaging.Encoder.SaveFlag, (long)EncoderValue.MultiFrame);

            Int16 c = BitConverter.ToInt16(image.PropertyItems[Array.IndexOf(image.PropertyIdList, 0x103)].Value, 0);

            if (c != 4 && c != 5)
            {
                throw new ArgumentException("Only CCIT4 and LZW compressed images are allowed.");
            }
            else if (c == 4)
            {
                encoderParameters.Param[1] = new EncoderParameter(System.Drawing.Imaging.Encoder.Compression, (long)EncoderValue.CompressionCCITT4);
            }
            else if (c == 5)
            {
                encoderParameters.Param[1] = new EncoderParameter(System.Drawing.Imaging.Encoder.Compression, (long)EncoderValue.CompressionLZW);
            }

            if (i == 0)
            {
                pages = (Bitmap)image;
                ImageCodecInfo encoder = getTiffEncoder();
                pages.Save(tmpfile, encoder, encoderParameters);
            }
            else
            {
                encoderParameters.Param[0] = new EncoderParameter(System.Drawing.Imaging.Encoder.SaveFlag, (long)EncoderValue.FrameDimensionPage);
                pages.SaveAdd(image, encoderParameters);
            }

            if (i == max - 1)
            {
                encoderParameters = new EncoderParameters(1);
                encoderParameters.Param[0] = new EncoderParameter(System.Drawing.Imaging.Encoder.SaveFlag, (long)EncoderValue.Flush);
                pages.SaveAdd(encoderParameters);
            }
            i++;
        }
        catch (Exception e)
        {
            Console.WriteLine(String.Format("Unable to rotate page {0} in file {1} due to {2}", (i + 1).ToString(), inputfile, e.Message));
            break;
        }
    }

    foreach (Image image in images) {
        image.Dispose();
    }
    pages.Dispose();

    // eventually overwrite input file with tmp file
}

private static ImageCodecInfo getTiffEncoder()
{
    ImageCodecInfo encoder = null;
    ImageCodecInfo[] encoders = ImageCodecInfo.GetImageEncoders();
    for (int i = 0; i < encoders.Length; i++)
    {
        if (encoders[i].MimeType == "image/tiff")
        {
            encoder = encoders[i];
        }
    }
    if (encoder == null)
    {
        throw new NotSupportedException("Unable to find a tiff encoder.");
    }
    return encoder;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T14:54:59.583

您可以处理原始文件并仅保存最后一页的旋转，而不是处理临时文件。（编辑：它似乎不起作用）

* * *

编辑：仅克隆第一帧，添加所有其他帧并旋转最后一帧..

像这样的东西：

```
public void rotateLastPage()
    {
        string inputfile = @"u:\\input.tiff";

        Bitmap bmap = (Bitmap)Image.FromFile(inputfile);
        int max = bmap.GetFrameCount(FrameDimension.Page);

        try
        {
            EncoderParameters encoderParameters = GetEncoderParameters(bmap, EncoderValue.MultiFrame);
            ImageCodecInfo encoder = GetTiffEncoder();
            var firstPage = (Image)bmap.Clone();
            firstPage.Save(inputfile+".tmp", encoder, encoderParameters);
            for (int i = 1; i < max - 1; i++)
            {
                bmap.SelectActiveFrame(FrameDimension.Page, i);
                encoderParameters = GetEncoderParameters(bmap, EncoderValue.FrameDimensionPage);
                firstPage.SaveAdd(bmap, encoderParameters);
            }
            bmap.SelectActiveFrame(FrameDimension.Page, max - 1);
            bmap.RotateFlip(RotateFlipType.Rotate90FlipNone);
            encoderParameters = GetEncoderParameters(bmap, EncoderValue.FrameDimensionPage);
            firstPage.SaveAdd(bmap, encoderParameters);
            firstPage.SaveAdd(GetEncoderParameters(EncoderValue.Flush));
        }
        catch (Exception e)
        {
            Console.WriteLine(String.Format("Unable to rotate page {0} in file {1} due to {2}", max.ToString(), inputfile, e.Message));
        }
        bmap.Dispose();
    }

    private static EncoderParameters GetEncoderParameters(Image image, EncoderValue encoderValue)
    {
        EncoderParameters encoderParameters = new EncoderParameters(2);
        encoderParameters.Param[0] = new EncoderParameter(System.Drawing.Imaging.Encoder.SaveFlag, (long)encoderValue);
        encoderParameters.Param[1] = GetCompressionEncoder(image);
        return encoderParameters;
    }
    private static EncoderParameters GetEncoderParameters(EncoderValue encoderValue)
    {
        EncoderParameters encoderParameters = new EncoderParameters(1);
        encoderParameters.Param[0] = new EncoderParameter(System.Drawing.Imaging.Encoder.SaveFlag, (long)encoderValue);            
        return encoderParameters;
    }

    private static EncoderParameter GetCompressionEncoder(Image image)
    {
        Int16 c = BitConverter.ToInt16(image.PropertyItems[Array.IndexOf(image.PropertyIdList, 0x103)].Value, 0);

        if (c == 4)
        {
            return new EncoderParameter(System.Drawing.Imaging.Encoder.Compression, (long)EncoderValue.CompressionCCITT4);
        }
        else if (c == 5)
        {
            return new EncoderParameter(System.Drawing.Imaging.Encoder.Compression, (long)EncoderValue.CompressionLZW);
        }
        throw new ArgumentException("Only CCIT4 and LZW compressed images are allowed.");
    }

    private static ImageCodecInfo GetTiffEncoder()
    {
        ImageCodecInfo encoder = null;
        ImageCodecInfo[] encoders = ImageCodecInfo.GetImageEncoders();
        for (int i = 0; i < encoders.Length; i++)
        {
            if (encoders[i].MimeType == "image/tiff")
            {
                encoder = encoders[i];
            }
        }
        if (encoder == null)
        {
            throw new NotSupportedException("Unable to find a tiff encoder.");
        }
        return encoder;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T14:31:55.087

您正在使用一个 foreach 循环和一个 for 循环。如果您要使用列表，则最后一页由 images.Last() 访问，第一页由 images.First() 访问，返回相应的图像对象。

同样，现在您似乎正在为自己保存每张图片。我不知道你有多少页，但如果这些是一堆，那可能需要很长时间。您是否尝试过全部处理它们然后最后一次保存它们？因为访问硬盘很费时间。当我处理文本文件的某些行并将其保存到新文件中时遇到了这个问题.....如果这不是您对“不写入整个文件”的限制的意思。

希望有帮助！

# ms-access - Select Count from multiple columns and multiple tables 按一列分组

> ID：14339351
> 
> 赞同：1
> 
> 时间：2013-01-15T13:59:18.693
> 
> 标签：ms-access

我被 MS Access 2003 查询困住了。我已经用谷歌搜索并阅读了许多类似的问题，但我无法达到预期的结果。

我有两个表“订单”和“库存”

```
 Orders                              Inventory
----------------------------------------    | -------------------
| SKU         | OrderID |PStatus    |   |   | SKU  | LID  |
----------------------------------------|   | -------------------
|  23|        | abc     |  New      |       |  23  | wsx  | 
|  24|        | asd     |  Shiped   |   |   |  24  | qax  | 
| 19 |        | zxc     |  New      |   |   |  19  | wsx  |
----------------------------------------    | ------------------- 
```

问题：我想要像这样的查询

```
SELECT Orders.SKU, 
       Count(LID), 
       LID 
FROM Orders 
INNER JOIN Inventory on Orders.SKU=Inventory.SKU 
WHERE Orders.PStatus = 'New' 
AND (OrderID = 'abc' OR Order = 'zxc') 
```

这可能是一个非常基本的查询，但我对此并不陌生，因此任何示例都将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T14:11:27.923

看看你上面的例子，我会说使用一个简单的 ' [Group By](http://office.microsoft.com/en-gb/access-help/group-by-clause-HA001231482.aspx) ' 应该足够好。

```
SELECT      Orders.SKU, 
            LID,
            COUNT(LID),

FROM        Orders 
INNER JOIN  Inventory on Orders.SKU=Inventory.SKU 
WHERE       Orders.PStatus = 'New' 
AND         (OrderID = 'abc' OR Order = 'zxc')

GROUP BY    Orders.SKU,
            LID 
```

我们真正要说的是从订单表中加载所有在库存表中具有匹配 LID 的 SKU。然后，我们要求对这些订单-LID 组合中的每一个进行计数（基本上每个 SKU 的 LID 数量） - 这`GROUP BY`告诉 Access 它应该根据 SKU 和 LID 的每个组合出现的次数来计算行数。

# exe - 如何使用 config.txt 的 7zip sfx 中的“RunProgram”运行多个 exe？

> ID：14339353
> 
> 赞同：2
> 
> 时间：2013-01-15T13:59:29.767
> 
> 标签：exe, 7zip, sfx

我试过这个它只运行哪个运行程序的实例是第一个。我也尝试过使用 ExecuteFile。

```
;!@Install@!UTF-8!
Title="Title"
RunProgram="one.exe"
RunProgram="two.exe"
;!@InstallEnd@! 
```

任何帮助将不胜感激。谢谢

好的，所以我创建了一个名为 Run.cmd 的 cmd 文件

```
@echo off
start one.exe && start two.exe
exit 
```

和一个配置文件

```
;!@Install@!UTF-8!
Title="Title"
RunProgram="hidcon:Run.cmd"
;!@InstallEnd@! 
```

但我得到错误指定文件未找到。移除 hidecon：修复了这个问题，但现在控制台是可见的，但几乎看不到。但我得到一个 .inf 文件，表明它无法为一个或程序找到。 *** !!! 出于某种原因，如果我打开说只是 RungProgram="one.exe" 它工作正常，但如果我使用 RunProgram="Run.cmd" 并非所有文件都被提取，这是因为 cmd.exe 在提取完成之前退出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T14:02:46.837

创建一个按顺序运行其他程序的 .cmd 文件，然后运行该文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-24T10:08:18.380

如果您使用的是[原始发行版](http://www.7-zip.org/7z.html)，则无法顺序运行两个 exe。但如果您使用的是它的[修改版本](http://7zsfx.solta.ru/en/)。它将工作。我已经下载了[7z SFX Tools](http://7zsfx.info/files/7zsd_tools_150_2712.7z)，解压缩并将其重命名为 7zsd_All.sfx 为 7zS.sfx并使用此配置按顺序运行到应用程序。

```
;!@Install@!UTF-8!
RunProgram="setup.exe"
RunProgram="launcher-Win32.exe"
;!@InstallEnd@! 
```

# java - 与 MapClass 相关的 Hadoop ClassNotFoundException

> ID：14339356
> 
> 赞同：6
> 
> 时间：2013-01-15T13:59:34.877
> 
> 标签：java, exception, hadoop

我看到许多与 ClassNotFoundExceptions、“没有作业 jar 文件集”和 Hadoop 相关的问题。他们中的大多数指向配置中缺少`setJarByClass`方法（使用`JobConf`或`Job`）。我对我遇到的异常感到有点困惑，因为我有那个设置。以下是我认为相关的所有内容（如果我遗漏了任何内容，请告诉我）：

```
 echo $CLASS_PATH
/root/javajars/mysql-connector-java-5.1.22/mysql-connector-java-5.1.22-bin.jar:/usr/lib/hadoop-0.20/hadoop-core-0.20.2-cdh3u5.jar:. 
```

代码（大部分省略）

```
import org.apache.hadoop.mapreduce.Job;
import org.apache.hadoop.mapreduce.Mapper;
import org.apache.hadoop.mapreduce.Reducer;
import org.apache.hadoop.mapreduce.lib.input.FileInputFormat;
import org.apache.hadoop.mapreduce.lib.input.TextInputFormat;
import org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;
import org.apache.hadoop.mapreduce.lib.output.TextOutputFormat;
import org.apache.hadoop.fs.Path;
import org.apache.hadoop.conf.Configuration;
import org.apache.hadoop.conf.Configured;
import org.apache.hadoop.util.ToolRunner;
import org.apache.hadoop.util.Tool;
import org.apache.hadoop.util.GenericOptionsParser;
import org.apache.hadoop.io.LongWritable;
import org.apache.hadoop.io.Text;
import org.apache.hadoop.io.IntWritable;

import java.io.IOException;
import java.util.Iterator;
import java.lang.System;
import java.net.URL;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;
import java.sql.Statement;
import java.sql.ResultSet;

public class QueryTable extends Configured implements Tool {

    public static class MapClass extends Mapper<Object, Text, Text, IntWritable>{

    public void map(Object key, Text value, Context context)
            throws IOException, InterruptedException {
            ...
        }
    }

    public static class Reduce extends Reducer<Text, IntWritable, Text, IntWritable>{
        private IntWritable result = new IntWritable();

        public void reduce (Text key, Iterable<IntWritable> values,
                            Context context) throws IOException, InterruptedException {
            ...
        }
    }

    public int run(String[] args) throws Exception {
         //Configuration conf = getConf();                                                                                                                                                                                                                                       
        Configuration conf = new Configuration();

        Job job = new Job(conf, "QueryTable");
        job.setJarByClass(QueryTable.class);

        Path in =  new Path(args[0]);
        Path out = new Path(args[1]);
        FileInputFormat.setInputPaths(job, in);
        //FileInputFormat.addInputPath(job, in);                                                                                                                                                                                                                                
        FileOutputFormat.setOutputPath(job, out);

        job.setMapperClass(MapClass.class);
        job.setCombinerClass(Reduce.class); // new                                                                                                                                                                                                                              
        job.setReducerClass(Reduce.class);

        job.setInputFormatClass(TextInputFormat.class);
        job.setOutputFormatClass(TextOutputFormat.class);
        job.setOutputKeyClass(Text.class);
        job.setOutputValueClass(Text.class);

        System.exit(job.waitForCompletion(true)?0:1);
        return 0;
    }

    public static void main(String[] args) throws Exception {
        int res = ToolRunner.run(new Configuration(), new QueryTable(), args);
        System.exit(res);
    }
} 
```

然后我编译、创建 jar 并运行：

```
javac QueryTable.java -d QueryTable
jar -cvf QueryTable.jar -C QueryTable/ .
hadoop jar QueryTable.jar QueryTable input output 
```

这是一个例外：

```
13/01/14 17:09:30 WARN mapred.JobClient: Use GenericOptionsParser for parsing the arguments. Applications should implement Tool for the same.
**13/01/14 17:09:30 WARN mapred.JobClient: No job jar file set.  User classes may not be found. See JobConf(Class) or JobConf#setJar(String).**
13/01/14 17:09:30 INFO input.FileInputFormat: Total input paths to process : 1
13/01/14 17:09:30 WARN util.NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable
13/01/14 17:09:30 WARN snappy.LoadSnappy: Snappy native library not loaded
13/01/14 17:09:31 INFO mapred.JobClient: Running job: job_201301081120_0045
13/01/14 17:09:33 INFO mapred.JobClient:  map 0% reduce 0%
    13/01/14 17:09:39 INFO mapred.JobClient: Task Id : attempt_201301081120_0045_m_000000_0, Status : FAILED
java.lang.RuntimeException: java.lang.ClassNotFoundException: QueryTable$MapClass
    at org.apache.hadoop.conf.Configuration.getClass(Configuration.java:1004)
    at org.apache.hadoop.mapreduce.JobContext.getMapperClass(JobContext.java:217)
    at org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:602)
    at org.apache.hadoop.mapred.MapTask.run(MapTask.java:323)
    at org.apache.hadoop.mapred.Child$4.run(Child.java:266)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:415)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1278)
    at org.apache.hadoop.mapred.Child.main(Child.java:260)
Caused by: java.lang.ClassNotFoundException: QueryTable$MapClass
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadCl 
```

对不起那巨大的文字墙。我不明白为什么我会收到关于没有设置作业 jar 文件的警告。我在我的运行方法中设置它。此外，警告是由 JobClient 发出的，在我的代码中，我使用的是 Job 而不是 JobClient。如果您有任何想法或反馈，我很感兴趣。谢谢你的时间！

编辑

罐子的内容：

```
jar -tvf QueryTable.jar
    0 Tue Jan 15 14:40:46 EST 2013 META-INF/
   68 Tue Jan 15 14:40:46 EST 2013 META-INF/MANIFEST.MF
 3091 Tue Jan 15 14:40:10 EST 2013 QueryTable.class
 3173 Tue Jan 15 14:40:10 EST 2013 QueryTable$MapClass.class
 1699 Tue Jan 15 14:40:10 EST 2013 QueryTable$Reduce.class 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T22:01:04.650

我能够通过在源代码顶部声明一个包来解决问题。

```
package com.foo.hadoop; 
```

然后，我编译、创建了 jar，并显式调用了 hadoop，并将包附加到类名中。

```
hadoop jar QueryTable.jar com.foo.hadoop.QueryTable input output 
```

我知道这是大多数人一开始就会做的事情，尽管我认为它仍然可以在不指定包的情况下工作。不过，这绝对是更好的做法，它让我能够继续。

# sql - 按列更新行分组

> ID：14339358
> 
> 赞同：0
> 
> 时间：2013-01-15T13:59:57.180
> 
> 标签：sql, sql-server

我有一个有 4 列的表：

```
| PromoId | Amount| PromoType  |Description|
--------------------------------------------------
|   101   |   11  |      a     |     free|       
|   101   |   12  |      a     |     20% |       
|   103   |   17  |      c     |     45% |       
|   104   |   14  |      c     |     50% | 
```

我必须结合对 PromoId 和 PromoType 相同值的描述。

对于上述表格，我的输出应该是：

```
| PromoId | Amount| PromoType  |Description|
--------------------------------------------------
|   101   |   11  |      a     |     free 20% |       
|   101   |   12  |      a     |     free 20% |       
|   103   |   17  |      c     |     45%      |       
|   104   |   14  |      c     |     50%      | 
```

我正在使用 SQL Server。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T14:24:11.400

这是我的解决方案

```
select d.PromoId, d.Amount, d.PromoType, Left(x.Description,Len(x.Description)-1)
from demo d
join (
    select distinct x1.PromoId, 
    (select x2.Description + ',' from demo x2 where x2.PromoId = x1.PromoId For XML PATH ('')) Description
    from demo x1) x on d.PromoId = x.PromoId 
```

[致谢](https://stackoverflow.com/questions/194852/concatenate-many-rows-into-a-single-text-string)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T14:20:50.333

```
WITH ConcatValue
AS
(
  SELECT
       PromoId,
       STUFF(
           (SELECT ' ' + Description
            FROM TableName
            WHERE PromoId = a.PromoId
            FOR XML PATH (''))
            , 1, 1, '')  AS Title
  FROM TableName AS a
  GROUP BY PromoId
)
SELECT   a.PromoId, a.Amount, a.PromoType,
         b.Title
FROM     tableName a
         INNER JOIN ConcatValue b
            ON a.PromoId = b.PromoId 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!3/10b8b/8)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T14:12:40.047

您需要字符串连接，这在 SQL Server 中有点麻烦。这是一种方法：

```
select t.*,
       (select t2.description+' '
        from t t2
        where t2.promoID = t.promoID and t2.promoType = t.promotType
        order by t2.amount
        for xml path ('')
       ) as CombinedDescription
from t 
```

这会在最后留下一个空间，您可以将其修剪掉。

# c# - 在 SQL Server 上执行分页的最佳方法是什么？

> ID：14339365
> 
> 赞同：10
> 
> 时间：2013-01-15T14:00:19.330
> 
> 标签：c#, sql, visual-studio-2010, sql-server-2008, pagination

我有一个包含超过**200 万**条记录的数据库，我需要执行分页以显示在我的 Web 应用程序上，该应用程序必须在`DataGrid`.

我已经尝试过使用`ROW_NUMBER()`，但是这种方式会选择所有 200 万条记录，然后只得到 10 条记录。我也尝试使用`TOP 10`，但我必须保存第一个和最后一个 id 来控制页面。而且我读过 using`DataAdapter.Fill()`将选择所有内容，然后获取我需要的 10 条记录。

哪个是最好的方法？我应该使用`DataAdapter.Fill()`吗？还是使用 SQL Server 的功能`ROW_NUMBER()`？或者尝试使用`TOP 10`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T10:45:33.890

```
ALTER PROCEDURE [dbo].[SP_tblTest_SelectSpecificRecordsWithCTE]
    @FromRow int = 1000000,
    @PgSize int = 10
AS
BEGIN
    ;WITH RecordsRN AS
    (
        select ID, colValue, ROW_NUMBER() over(order by colvalue) as Num from tblTest
    )
    SELECT ID Value, colValue Text FROM RecordsRN WHERE Num between @FromRow AND (@FromRow+@PgSize-1)
END 
```

那是我用于分页的查询。使用它，您将在 4-5 秒内获得您想要的 10 条记录。我在 3 秒内获得 10 条记录，我的数据库中的总记录为 1000 万条，不要使用前 10 名，它每次只会带来相同的 10 条记录。在我的情况下，我在会话中维护页面大小和起始行号（@FromRow），并将这两个值传递给下面给定的存储过程并获得结果。此外，如果您使用的是 SQL 2012，您可能希望使用 OFFSET 和 Fetch next 10 rows 之类的东西。在 google 上搜索 OFFSET 关键字，您将在顶部看到您想要的结果。

谢谢

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T14:35:31.647

使用`ROW_NUMBER()`并实现一个静态实用程序函数（如`GetPaginatedSQL`在我的代码中），它会自动将您的原始 SQL 查询包装到一个有限/分页的查询中。

这是我使用的一个：

```
namespace Persistence.Utils
{
    public class SQLUtils
    {
        /// <summary>
        /// Builds a paginated/limited query from a SELECT SQL.
        /// </summary>
        /// <param name="startRow">Start row</param>
        /// <param name="numberOfRows">Number/quatity of rows to be expected</param>
        /// <param name="sql">Original SQL (without its ordering clause)</param>
        /// <param name="orderingClause">MANDATORY: ordering clause (including ORDER BY keywords)</param>
        /// <returns>Paginated SQL ready to be executed.</returns>
        /// <remarks>SELECT keyword of original SQL must be placed exactly at the beginning of the SQL.</remarks>
        public static string GetPaginatedSQL(int startRow, int numberOfRows, string sql, string orderingClause)
        {
            // Ordering clause is mandatory!
            if (String.IsNullOrEmpty(orderingClause))
                throw new ArgumentNullException("orderingClause");

            // numberOfRows here is checked of disable building paginated/limited query
            // in case is not greater than 0\. In this case we simply return the
            // query with its ordering clause appended to it. 
            // If ordering is not spe
            if (numberOfRows <= 0)
            {
                return String.Format("{0} {1}", sql, orderingClause);
            }
            // Extract the SELECT from the beginning.
            String partialSQL = sql.Remove(0, "SELECT ".Length);

            // Build the limited query...
            return String.Format(
                "SELECT * FROM ( SELECT ROW_NUMBER() OVER ({0}) AS rn, {1} ) AS SUB WHERE rn > {2} AND rn <= {3}",
                orderingClause,
                partialSQL,
                startRow.ToString(),
                (startRow + numberOfRows).ToString()
            );
        }
    }
} 
```

上面的功能可能会有所改进，但只是一个初始实现。

然后，在你的 DAO 中，你应该只做这样的事情：

```
using (var conn = new SqlConnection(CONNECTION_STRING))
{
    using (var cmd = conn.CreateCommand())
    {
        String SQL = "SELECT * FROM MILLIONS_RECORDS_TABLE";
        String SQLOrderBy = "ORDER BY DATE ASC "; //GetOrderByClause(Object someInputParams);
        String limitedSQL = GetPaginatedSQL(0, 50, SQL, SQLOrderBy);

        DataSet ds = new DataSet();
        SqlDataAdapter adapter = new SqlDataAdapter();

        cmd.CommandText = limitedSQL;

        // Add named parameters here to the command if needed...

        adapter.SelectCommand = cmd;
        adapter.Fill(ds);

        // Process the dataset...
    }
    conn.Close();
} 
```

希望能帮助到你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T12:11:10.167

我使用以下模式（自动）生成分页子查询：

```
select top (@takeN) <your-column-list>
from (
    select qSub2.*, _row=row_number() over (order by SomeColumn Asc, SomethingElse Desc)
    from (
        select top (@takeN + @skipN) <your-column-list> 
        from ( 
            select <your-subquery-here>
        ) as qSub1 
        order by SomeColumn Asc, SomethingElse Desc
    ) as qSub2
) qSub3
where _row > @skipN
order by _row 
```

此模式的注意事项：

*   子查询在概念上跳过`@skipN`行，然后获取下一`@takeN`行。
*   如果您不关心`_row`结果中的额外列，则可以替换`<your-column-list>`为`*`; 我使用显式列列表，因为它允许我在运行时对列集进行子集化，这可能很有用，例如仅查找主键列等。
*   你的`order by`条款应该是相同的；sql server 的优化器通常足够聪明，可以理解这一点。`top`重复是用于截断结果的子句的副作用；`top`对未排序的子查询是不合法的。top 有助于帮助查询优化器了解此查询可能返回几行。
*   使用基于页码 + 大小的参数`@takeN`的 `@skipN`原因相对较小。首先，它在查询中更灵活一点，更简单一点，其次，它更好地发挥了 sql server 的优势：DB 在优化这类查询方面并不是特别出色，希望是像这样的外部简单顶部子句使优化器了解可能的最大行数变得微不足道。一般来说，我尽量避免在 sql 中进行计算，因为它往往会混淆优化器（尽管在特定情况下 @pagecount*@pagesize 实验表明这不是一个大问题）

请注意，sql server 2012 支持一个新的[offset...fetch 子句](http://msdn.microsoft.com/en-us/library/gg699618.aspx)，正是这种情况要简单得多。

# symlink - 错误：使用 FileUtils.ln_s 时功能未实现

> ID：14339368
> 
> 赞同：2
> 
> 时间：2013-01-15T14:00:38.717
> 
> 标签：symlink, mount, ln

以下代码给我带来了麻烦：

```
symlink_path = "symlink/to/mnt/xyz/file"
remote_path ="/mnt/xyz/data/folderx"
FileUtils.mkdir(remote_path)
FileUtils.symlink(symlink_path, "#{remote_path}/#{db_table_name}") 
```

另一方面，FileUtils.cp 确实有效（用 cp 替换符号链接）。mkdir 在这两种情况下都有效。

挂载和符号链接都有效。在已安装的文件系统上创建一个符号链接是否有问题，该符号链接指向一个符号链接，该符号链接指向该已安装文件系统上的另一个文件？

这是错误：

```
Function not implemented - /home/usr1/webservice/symlink/to/mnt/xyz/file or /mnt/xyz/data/folderx/table_name
RAILS_ROOT: /home/usr1/webservice 
```

跟踪顶部：

```
/usr/lib/ruby/1.8/fileutils.rb:338:in `symlink'
/usr/lib/ruby/1.8/fileutils.rb:338:in `ln_s'
/usr/lib/ruby/1.8/fileutils.rb:1418:in `fu_each_src_dest0'
/usr/lib/ruby/1.8/fileutils.rb:336:in `ln_s'
app/controllers/upload_controller.rb:133:in `upload' 
```

编辑：

好的，我刚刚发现问题出在 ln 而不是 ruby​​ 内。在 bash 中执行 ln -s 命令会导致 Function not implemented 错误。有人可以告诉我为什么这是不可能的吗？

# sql - 如何在 SQL 中生成一个数字列表，因为它是一个理解列表？

> ID：14339369
> 
> 赞同：4
> 
> 时间：2013-01-15T14:00:39.247
> 
> 标签：sql, list-comprehension, sqlanywhere

就我而言，在任何地方使用 sql (sybase)。

类似于haskell的东西。[1..100]。

我不知道如何生成 1 到 100 的随机简单列表。

我只能这样做：

```
select 1
union 
select 2
union
select 3 
```

谷歌没有提供任何样本，我怀疑这个功能不存在。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T17:49:04.337

SQL Anywhere 包含一个可用于此目的的 sa_rowgenerator 存储过程。例如：

```
select row_num from sa_rowgenerator( 1, 100 ) 
```

返回从 1 到 100（包括 1 到 100）的 100 行的结果集。文档链接（适用于 12.0.1 版）在[此处](http://dcx.sybase.com/index.html#1201/en/dbreference/sa-rowgenerator-system-procedure.html)。

**免责声明：**我在 SAP/Sybase 的 SQL Anywhere 工程部门工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T14:08:08.573

我发现简短列表的最简单方法是：

```
select t.*
from (select row_number() over (order by (select NULL)) as num
      from Information_Schema.columns
     ) t
where num <= 100 
```

列表通常至少有 100 行。也可以使用其他表。

对于大数，如下所示：

```
with digits as (
      select 0 as dig union all select 1 union all select 2 union all select 3 union all select 4 union all
      select 5 union all select 6 union all select 7 union all select 8 union all select 9
),
     numbers as
      select d1.dig*10+d2.dig
      from digits d1 cross join
           digits d2
)
 . . . 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T14:58:50.160

```
Oracle queries - use any number to start/end:

 SELECT 99 + ROWNUM
   FROM dual       
 CONNECT BY ROWNUM <= 100 + 1
/

SELECT 99 + LEVEL
  FROM dual       
CONNECT BY LEVEL <= 100 + 1
/ 
```

# installation - Wix 非管理员安装教程？

> ID：14339372
> 
> 赞同：12
> 
> 时间：2013-01-15T14:00:56.593
> 
> 标签：installation, wix, wix3.6, non-admin

我们正在评估 Wix 安装程序是否适合我们的项目。最终用户需要能够在没有管理员权限的情况下安装我们的软件。安装程序至少需要在没有管理员权限或 UAC 的情况下使用 XP/Vista/Windows 7。

我很难找到好的文档和教程如何做到这一点。我找到了几个旧的，但它们没有与最新的 Wix 版本的蜡烛/灯一起编译。有没有人有很好的例子或教程可能会有所帮助？

提前致谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-16T12:16:47.510

要允许用户安装，您需要在[package](http://wix.sourceforge.net/manual-wix3/wix_xsd_package.htm)元素上设置`InstallScope='perUser'`和。`InstallPrivileges='limited'`

不幸的是，这不会阻止您添加此模式不支持的功能，例如将文件放入 ProgramFiles 目录。如果您尝试这样做，安装程序将在到达该点时失败。

# ruby-on-rails - 如何循环 rails 参数？

> ID：14339376
> 
> 赞同：1
> 
> 时间：2013-01-15T14:01:17.933
> 
> 标签：ruby-on-rails

这是我第一次在这里发布问题。

我在 html 中有九个按钮传递给 ruby​​ on rails。

这是我要循环的参数：

```
Button.new(:title => params[:button_title_1], :order => 1, :icon_url => params[:button_icon_1], :navigation_id => @navigation.id, 
                   :next_navigation => params[:selected_navigation_1].to_i, :next_page => params[:selected_page_1].to_i) 
```

我想将数字 1 转换为 i 并将其放入以下循环：

```
@buttonNumber.each do |i|

end 
```

请帮忙！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T14:06:26.267

```
@buttonNumber.each do |i|
  Button.new(:title => params["button_title_#{i}".to_sym], 
             :order => 1, 
             :icon_url => params["button_icon_#{i}".to_sym], 
             :navigation_id => @navigation.id, 
             :next_navigation => params["selected_navigation_#{i}".to_sym].to_i, 
             :next_page => params["selected_page_#{i}".to_sym].to_i)
end 
```

"to_sym" 是可选的，因为 params 集合是 HashWithIndifferentAccess，所以我把它放在其他情况下可以更好地理解。

# google-analytics - 获取一系列值（每天）而不是给定日期范围的汇总分数

> ID：14339382
> 
> 赞同：1
> 
> 时间：2013-01-15T14:01:45.700
> 
> 标签：google-analytics, google-analytics-api

在 Google Analytics API 中，有没有办法获取给定日期范围（例如：“2013-01-01”到“2013-02-01”）之间的一系列值（每天）而不是总分？

查询：

```
https://www.googleapis.com/analytics/v2.4/data
?ids=ga:12134
&dimensions=ga:source&metrics=ga:pageviews
&filters=ga:source%3D~%5Egoogle
&start-date=2013-01-01
&end-date=2013-02-31&access_token=*** 
```

给我一个总分`{ ... "totalsForAllResults"=>{"ga:pageviews"=>"1125"} ... }`，但我需要的是在给定日期范围内每天分布的分数。是否可以进行这样的 API 调用？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T17:56:08.830

是的，您可以这样做，只需`ga:date`在查询中添加一个维度即可。

```
https://www.googleapis.com/analytics/v3/data/ga?
ids=ga:1234
&start-date=2012-01-01&end-date=2012-12-31
&metrics=ga:pageviews
&dimensions=ga:date,ga:source 
```

# java - Bancha 等价于 Java（和 Ext.js/Sencha Touch）

> ID：14339386
> 
> 赞同：1
> 
> 时间：2013-01-15T14:01:58.227
> 
> 标签：java, extjs, model, sencha-touch, integration

我习惯于使用 Bancha 构建带有 CakePHP 后端的 Ext.js（或 Sencha Touch [）](http://banchaproject.org/)[应用](http://cakephp.org/)程序。基本上 Bancha 将基于后端 (CakePHP) 模型类生成前端 (Ext.js) 模型类，并将提供一种从客户端调用后端函数的简单方法。

在 Java 世界中是否有类似的（最好是开源的）项目实现相同的目标？

编辑：我们将在服务器端使用 Spring 框架。

# r - 如何将给定的公式应用于 R 中的整个数据框？

> ID：14339390
> 
> 赞同：0
> 
> 时间：2013-01-15T14:02:09.927
> 
> 标签：r

我有一个非常大的数据框（大约 700 列和 4,00,000 行）。示例如下：

```
 "samp1"             "samp2"              "samp3"
"ct1"   3.45909539741409    4.16162745114877    4.28378657903742
"ct2"   2.45516883029741    2.64529479763739    2.62023669114738
"ct3"   -1.53506396613939   -1.53318358856732   -1.2235498333358
"ct4"   2.54561049516449    1.91067140586626    2.6860636959124
"ct5"   1.08270893850391    0.847112473835081   0.90241673852809
"ct6"   -1.49057768051391   -1.09321836721649   -1.11635564230449
"ct7"   -0.82888593769947   -0.533641693674542  -0.339345700770896 
```

所有列在每个数字单元格中都包含 log2 值（假设为“a”），我希望使用以下公式将它们全部转换为正常值（假设为“b”）：

b = 2^a / [(2^a) + 1]

所以我的结果文件应该像上面那样，但所有转换后的值都是 b，而不是 a。

谁能帮我这个 ？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T14:14:26.220

正如 Andrie 在评论中所说，您应该简单地将公式应用于您的数据框。并将其转换为矩阵将使事情运行得更快。像这样的东西：

```
DATA <- as.matrix(read.table(text = "samp1             samp2              samp3
3.45909539741409    4.16162745114877    4.28378657903742
2.45516883029741    2.64529479763739    2.62023669114738
-1.53506396613939   -1.53318358856732   -1.2235498333358
2.54561049516449    1.91067140586626    2.6860636959124
1.08270893850391    0.847112473835081   0.90241673852809
-1.49057768051391   -1.09321836721649   -1.11635564230449
-0.82888593769947   -0.533641693674542  -0.339345700770896", header = TRUE))

DATAprocessed <- 2^DATA/((2^DATA) + 1) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T14:16:07.857

创建一些数据

```
a <- matrix(runif(21), ncol=3,
            dimnames=list(paste0("ct", 1:7), paste0("samp", 1:3)))

a
         samp1     samp2      samp3
ct1 0.36856468 0.1969006 0.21410103
ct2 0.80894310 0.4402108 0.96686681
ct3 0.52169299 0.1410873 0.35899306
ct4 0.75243588 0.5432110 0.85099247
ct5 0.77734048 0.5657070 0.33521023
ct6 0.73011232 0.1539275 0.08615577
ct7 0.08505216 0.4905622 0.13415698 
```

转换：

```
b <- 2^a / ((2^a) + 1)

b
        samp1     samp2     samp3
ct1 0.5635223 0.5340674 0.5370329
ct2 0.6366183 0.5756963 0.6615437
ct3 0.5894301 0.5244291 0.5618897
ct4 0.6275099 0.5930347 0.6433337
ct5 0.6315359 0.5967925 0.5578276
ct6 0.6238860 0.5266483 0.5149252
ct7 0.5147341 0.5841982 0.5232309 
```

# php - 使用 PHP bcrypt 时是否有最大输入长度（通过 Laravel 的 Hash::make）？

> ID：14339391
> 
> 赞同：2
> 
> 时间：2013-01-15T14:02:10.923
> 
> 标签：php, hash, passwords, laravel, bcrypt

当使用 Laravel 的**[Hash::make()](http://laravel.com/docs/auth/usage#hash)**方法（即 bcrypt）时：

*   秘密是否有最大输入长度？
*   如果超过这个长度会发生什么？
*   返回值是否总是具有相同的长度？

我想知道是否应根据最大长度验证用户注册表单中的密码字段。表单的处理方式如下：

```
public function action_register()
{
    $rules = array(
        'username' => 'required',
        'password' => 'required|min:10'
    );

    $validation = Validator::make(Input::all(), $rules);

    if($validation->passes())
    {
        $user = new User;
        $user->name = Input::get('name');
        $user->password = Input::get('password');
        $user->save();
        //todo - report success
    }
    else
    {
        //todo - report errors
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T10:41:32.063

哈希是固定的（或至少是最大的）长度。

严格来说，bcrypt 密码长度是有上限的，但是超过了就什么都不会发生。它是 55 个（或者可能是 72 个，取决于你问谁）字符。

如前所述，限制密码长度是一种不好的做法，但实际上，您可能希望将密码截断为 1024 个字符，以确保没有人在您的服务器上玩傻瓜。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T14:12:12.713

哈希算法可以采用*任何*长度（或类型——它甚至不必是字符串）的变量，并输出该变量的计算“哈希”。

除了密码，哈希的另一个常见用途是为可下载文件提供验证密钥——即“这是下载链接，这是文件的哈希值，因此您可以证明您收到的副本没有被篡改和”。这通常用于像 CD 或 DVD 图像一样大的文件，因此输入长度绝对没有任何限制。

所以简短的回答是否定的，您的密码字段不需要最大长度。

（事实上​​，黑客会寻找指定密码最大长度的网站，假设这意味着他们没有散列密码并且容易受到攻击）

要回答您问题的另一部分：是的，假设您每次都使用相同的哈希算法，计算出的哈希值始终是相同的长度。

# c# - 如何在 sql server 上更新 ItemsSource 时自动刷新 datagrid Items

> ID：14339394
> 
> 赞同：3
> 
> 时间：2013-01-15T14:02:16.137
> 
> 标签：c#, wpf, wpfdatagrid, observablecollection, inotifypropertychanged

我经历了许多相同类型的问题，但无法找到正确的解决方案。我已经`INotifyPropertyChanged`为我的`MainViewModel.cs`班级实现了，以查看当我的源代码更改时我的 UI 是否更新，但是当我运行我的应用程序时没有任何效果。

这是我的 Xaml 代码：

```
<Window.DataContext>
<ViewModel:MainViewModel/>
</Window.DataContext>
 <Grid>
   <DataGrid ItemsSource="{Binding Path=SystemStatusData,Mode=OneWay,UpdateSourceTrigger=PropertyChanged,NotifyOnTargetUpdated=True}" 
AutoGenerateColumns="False" Height="287" HorizontalAlignment="Left" Margin="12,12,0,0" Name="dataGrid1" VerticalAlignment="Top" Width="479" > 
```

我的 MainViewModel.cs 类：

```
namespace MVVM_DemoAppl.ViewModels
{
public class MainViewModel : INotifyPropertyChanged
{
  Model _myModel = new Model();
  private ObservableCollection<SystemStatus> _systemStatusData= new ObservableCollection<SystemStatus>();
  public ObservableCollection<SystemStatus> SystemStatusData
  {
    get { return _systemStatusData; }
    set
      {
        _systemStatusData= value;
        OnPropertyChanged("SystemStatusData");
      }
  }

public MainViewModel()
 {
   initializeload();
 }

private void initializeload()
{
   DataTable table = _myModel.getData();

   for (int i = 0; i < table.Rows.Count; ++i)
   SystemStatusData.Add(new SystemStatus
   {
   Systems= table.Rows[i][0].ToString(),
   Date =Convert.ToDateTime(table.Rows[i][1]),
   Types = table.Rows[i][2].ToString(),
   Messages = table.Rows[i][3].ToString()       
   Critical = Convert.ToBoolean(table.Rows[i][1]),
   });
   }

  public event PropertyChangedEventHandler PropertyChanged;

  private void OnPropertyChanged(string propertyname)
 {
    var handler = PropertyChanged;
    if (handler != null)
    handler(this, new PropertyChangedEventArgs(propertyname));
   }
}

public class Model
{
 string con = ConfigurationManager.AppSettings["ConnectionStrings"];
 public DataTable getData()
 {
 DataTable ndt = new DataTable();
 SqlConnection sqlcon = new SqlConnection(con);
 sqlcon.Open();
 SqlDataAdapter da = new SqlDataAdapter("select * from test_DB.dbo.SystemStatus",con);
 da.Fill(ndt);
 return ndt;
 }
 }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T14:18:20.987

首次运行查询后，SQL Server 不会自动更新您的结果集。实现您所追求的最基本方法是轮询服务器以按设定的时间间隔检查更改并从那里更新屏幕。

您可以查看[CDC](http://msdn.microsoft.com/en-us/library/bb522489%28v=sql.105%29.aspx)，这将有助于确定发生了什么变化。但这些都不是自动的，您每次都需要重新运行查询。

计时器如何工作的示例：

```
// Background timer used to refresh...
private DispatcherTimer _timer = null;

public MainViewModel()
{
    // Do initial load
    initializeload();

    // Start the timer to refresh every 100ms thereafter (change as required)
    _timer = new DispatcherTimer();
    _timer.Tick += Each_Tick;
    _timer.Interval = new TimeSpan(0, 0, 0, 0, 100);
    _timer.Start(); 
}

// Raised every time the timer goes off
private void Each_Tick(object o, EventArgs sender)
{
    // Refresh from database etc ...
    initializeload();

    // Anything else you need ...
}

private void initializeload()
{
    // Your existing code here ...
} 
```

# jquery - 仅在使用 jquery 的按钮之前选择某些类

> ID：14339397
> 
> 赞同：0
> 
> 时间：2013-01-15T14:02:38.347
> 
> 标签：jquery

我有这个 html 标记，我想使用 jQuery 选择一些行。

当按下“cerrar”类的按钮时，我想**在同一个按钮之前选择“隐藏”类的 3 tr**

```
 <tr class='main'>
            <td class='table-sub-title'> 
                Test
            </td>
            <td class='table-sub-title'>
                Test
            </td>
            <td class='table-sub-title'>
                Test
            </td>
            <td class='table-sub-title'>
                Test
            </td>
        </tr>
        <tr class='hidden'> <!-- ********* Select this <tr> ********* -->
            <td class='noborder'>
                Test
            </td>
            <td class='noborder'>
                Test
            </td>
            <td class='noborder'>
                Test
            </td>
            <td class='noborder'>
                Test
            </td>
        </tr>
        <tr class='hidden'> <!-- ********* Select this <tr> ********* -->
            <td class='noborder'>
                Test
            </td>
            <td class='noborder'>
                Test
            </td>
            <td class='noborder'>
                Test
            </td>
        </tr>
        <tr class='hidden'> <!-- ********* Select this <tr> ********* -->
            <td class='noborder'>
                Test
            </td>
            <td class='noborder'>
                Test
            </td>
            <td class='noborder'>
            </td>
            <td class='noborder'>
                <input type='button' name='Cancelar' value='Cancelar' class='cerrar' />
            </td>
        </tr>
        <tr class='main'>...
    <!-- Repeat --> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T14:06:38.160

你可以这样做：

```
$('.cerrar').click(function(){

    // Get all the tr's with hidden class before button
    var TRs = $(this).closest('tr').prevUntil("tr.main").andSelf();

}); 
```

# java - 将 JPA Criteria Builder 与表连接一起使用

> ID：14339401
> 
> 赞同：1
> 
> 时间：2013-01-15T14:02:54.617
> 
> 标签：java, hibernate, jpa

我正在尝试使用 JPA Criteria Builder 来连接两个表，`Country`并且`Geotarget`. 等效`SQL`的是

```
Select distinct Country.* from Country Inner Join Geotarget
 where Geotarget.Country_ID = Country.ID; 
```

我的代码是

```
 CriteriaBuilder criteriaBuilder getTransactionalEntityManager().getCriteriaBuilder();
    CriteriaQuery<Country> criteriaQuery = criteriaBuilder.createQuery(Country.class);
    Root<Country> root = criteriaQuery.from(Country.class);
    Join<Geotarget, Country> geotargetJoin = root.join(Geotarget_.country, JoinType.INNER);
    Predicate predicate = criteriaBuilder.equal(Country_.id,Geotarget_.country);
    criteriaQuery = criteriaQuery.where(predicate);
    criteriaQuery.select(Country.class).distinct(true);
    return findAllObjects(criteriaQuery); 
```

但这是错误的，它甚至没有在某些地方解析。特别是我似乎找不到连接行的代码，或者似乎不喜欢比较两个字段的等于原因。你能帮我吗，用正确的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T14:21:16.590

我认为你不需要谓词。连接本身应该执行 GeoTarget.Country_ID = Country.ID。所以修改为：

```
CriteriaBuilder criteriaBuilder getTransactionalEntityManager().getCriteriaBuilder();
CriteriaQuery<Country> criteriaQuery = criteriaBuilder.createQuery(Country.class);
Root<Country> root = criteriaQuery.from(Country.class);
Join<Geotarget, Country> geotargetJoin = root.join(Geotarget_.country); // Default is inner
criteriaQuery.select(Country.class).distinct(true);
return findAllObjects(criteriaQuery); 
```

# c# - Javascript 和必填字段验证器

> ID：14339408
> 
> 赞同：0
> 
> 时间：2013-01-15T14:03:14.817
> 
> 标签：c#, javascript, asp.net

我在 TextBox 上有一个RequiredFieldValidator。当在 TextBox 中没有输入任何内容时，这可以正常工作。现在，我要做的另一项验证是，当用户输入一些垃圾数据时，我会抛出一条错误消息，说“输入无效”。这是在标签上。

现在的场景是在抛出错误消息之后，如果用户清空文本框并单击按钮，RequiredFieldValidator 工作但标签上的错误消息仍然保持原样。一旦用户清空文本框，我想隐藏/删除它。

为此，我使用了 JavaScript 函数，但RequiredFieldValidator 不起作用。这是我的代码：

```
<asp:TextBox ID="txtemp" runat="server"></asp:TextBox>
<asp:Button ID="btnstatus" runat="server"  ValidationGroup="valgrp1" OnClientClick="Validate()"
    CausesValidation="true"  onclick="btnstatus_Click" 
    Text="Fetch status message" BackColor="#ccebff" />
&nbsp;
<asp:RequiredFieldValidator ID="Reqfield1" ControlToValidate="txtportalid"  ValidationGroup="valgrp1" ErrorMessage="wrong entry" runat="server" />
</div>
<div>
    <asp:Label ID="lblerrormsg" runat="server"  Font-Bold="true"  Visible="false" ForeColor="#FF3300">
    </asp:Label>
</div> 
```

JavaScript：

```
function Validate()
{
    var txt1 = document.getElementById("<%= Txtemp.ClientID %>");
    var val1 = txt1.value.replace(/\s/g, "");

    if (val1=="")
    {
        document.getElementById("<%= lblerrormsg.ClientID%>").style.display = 'none';
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T14:18:22.117

我建议使用带有属性集的[CustomValidator](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.customvalidator.aspx)`ClientValidationFunction`来指向您的`Validate`函数，如下所示：

```
<script>
    function Validate(source, arguments) {
        arguments.IsValid = /* your validation logic */
    }
</script>

...

<asp:CustomValidator ControlToValidate="txtportalid" 
    ErrorMessage="..." ClientValidationFunction="Validate" runat="server" /> 
```

...或者，在您的情况下，您可以只使用[RegularExpressionValidator](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.regularexpressionvalidator.aspx)。两者都会给你你正在寻找的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T17:29:54.747

You could handle the `keyup` event for the textbox using [jQuery](http://jquery.com/).

The example below does two things:

1.  Everytime a keypress occurs on the textbox check whether the textbox is empty **and**
2.  Check whether the error label has a value

If both the checks have passed, simply clear the error label!

**ASPX:**

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>Home</title>
    <script src="Scripts/jquery-1.7.1.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $("#txtemp").keyup(function () {
                if (!this.value) {
                    var errorMessage = $("#<%= lblErrorMessage.ClientID %>").length;
                    if (errorMessage) {
                        $("#<%= lblErrorMessage.ClientID %>").html("");
                    }
                }
            });
        });
    </script>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:TextBox ID="txtemp" runat="server" />
        <asp:Button ID="btnstatus" runat="server" ValidationGroup="valgrp1" CausesValidation="true"
            OnClick="btnstatus_Click" Text="Fetch status message" />
        <asp:RequiredFieldValidator runat="server" ID="req" ValidationGroup="valgrp1" ControlToValidate="txtemp"
            ErrorMessage="Field is required" />
        <asp:Label ID="lblErrorMessage" ClientIDMode="Static" runat="server" EnableViewState="false" />
    </div>
    </form>
</body>
</html> 
```

**Code behind (I've just created a simple method for testing) :**

```
protected void btnstatus_Click(object sender, EventArgs e)
{
    if (txtemp.Text == "invalid")
    {
        lblErrorMessage.Text = "The data is invalid";
    }
} 
```

# parallel-processing - OpenCL 矩阵乘法失败

> ID：14339409
> 
> 赞同：1
> 
> 时间：2013-01-15T14:03:15.527
> 
> 标签：parallel-processing, opencl, matrix-multiplication

我正在使用 OpenCL 实现矩阵乘法，但问题是我总是得到错误的结果。也许这里有人可以给我一个提示错误可能在哪里。

数据类型和常量：

```
 /*
     *  Data types
     */

    // Matrix data type
    typedef float TMatrix;

    // This struct hold data for one Matrix
    struct Dimension {
        size_t x;
        size_t y;
        size_t z;
    };

    struct TMat {
        Dimension dims;
        TMatrix* pData;
    };

    /*
     *  Globals
     */

    // name of graphic card
    std::string const kPlatformName = "NVIDIA";
    std::string const kDeviceName = "GTX";

    // used block size (16 for below Fermi (2.x) and 32 for above)
    /*
     *  WARNING: This constant is also defined in the Kernel Source
     *           Do not forget to apply changes there too!
     */
    int const kBlockSize = 32;

    TMatrix const kFailure = 1e-5f;

    // Matrix dimensions - scale factor! (i [= kStart, kStart+kStep .. kStop] * block_size, ...)
    size_t const kStart = 1;
    size_t const kStep = 1;
    size_t const kStop = 30 + 1;        // check for < kStop

    // number of iterations to calculate avg exec time on GPU
    size_t const kNrIter = 1; 
```

主机代码：

```
// enable OpenCL exceptions
    #define __CL_ENABLE_EXCEPTIONS

    #include <iostream>
    #include <algorithm>
    #include <string>
    #include <cstdio>
    #include <cstdlib>
    #include <stdlib.h>
    #include <iterator>
    #include <fstream>
    #include "types.h"

    #include "StopWatch.h"

    // include OpenCL C++ Wrapper classes instead of pure C API
    #include "CL/cl.hpp"

    using namespace std;

    /*
     *  Forward declaration
     */
    cl::Program LoadProgram(cl::Context& context, std::string const& fname, std::string const& params = "");
    int oclMatrixMult(TMat const& matA, TMat const& matB, TMat& matC);
    int CPUMatrixMultiplyNaive(TMat const& matA, TMat const& matB, TMat& matC, size_t const nrIt);

    int main(int argc, char** argv) {
        srand(2013);
        int retCPU = 1, retGPU = 1;
        volatile TMatrix GPUOptPrevent = 0;

        for (size_t i = kStart; i < kStop; i += kStep) {

                // Allocate host memory
            TMat matA;
            matA.dims.x = i*kBlockSize;
            matA.dims.y = i*kBlockSize;
            matA.dims.z = 1;
            matA.pData = new TMatrix[sizeof(TMatrix) * matA.dims.x * matA.dims.y];

            TMat matB;
            matB.dims.x = i*2*kBlockSize;
            matB.dims.y = i*kBlockSize;
            matB.dims.z = 1;
            matB.pData = new TMatrix[sizeof(TMatrix) * matB.dims.x * matB.dims.y];

            TMat matC;
            matC.dims.x = matB.dims.x;
            matC.dims.y = matA.dims.y;
            matC.dims.z = 1;
            matC.pData = new TMatrix[sizeof(TMatrix) * matC.dims.x * matC.dims.y];

            TMat matCPU;
            matCPU.dims.x = matB.dims.x;
            matCPU.dims.y = matA.dims.y;
            matCPU.dims.z = 1;
            matCPU.pData = new TMatrix[sizeof(TMatrix) * matCPU.dims.x * matCPU.dims.y];

            cout << "Matrix dimensions: A(" << matA.dims.x << "," << matA.dims.y << "), B(" << matB.dims.x << "," << matB.dims.y << ")" << endl;

                // Initialize host memory
    #if 0
            generate(matA.pData, matA.pData + matA.dims.x * matA.dims.y, rand);
            generate(matB.pData, matB.pData + matB.dims.x * matB.dims.y, rand);
    #else
            for (size_t a=0;a<matA.dims.x * matA.dims.y;++a) {
                matA.pData[a] = (float)a;
            }
            for (size_t b=0;b<matB.dims.x * matB.dims.y;++b) {
                matB.pData[b] = (float)b;
            }
    #endif
            memset(matC.pData, 0, matC.dims.x*matC.dims.y*sizeof(TMatrix));
            memset(matCPU.pData, 0, matCPU.dims.x*matCPU.dims.y*sizeof(TMatrix));

    #if 1
            ofstream fA("matA.txt");
            ofstream fB("matB.txt");
            for (size_t r=0; r < matA.dims.y; ++r) {
                for (size_t c=0; c < matA.dims.x; ++c) {
                    fA << matA.pData[r*matA.dims.x + c];
                    fA << ((c<matA.dims.x-1)?",":";\n");
                }
            }
            for (size_t r=0; r < matB.dims.y; ++r) {
                for (size_t c=0; c < matB.dims.x; ++c) {
                    fB << matB.pData[r*matB.dims.x + c];
                    fB << ((c<matB.dims.x-1)?",":";\n");
                }
            }

            fA.close();
            fB.close();
    #endif

                // Performing kernel execution
            double GPUtime = 0;
            for (size_t it = 0; it < kNrIter; ++it) {
                stw::Start();
                retGPU = oclMatrixMult(matA, matB, matC);
                GPUtime += stw::Stop();

                // prevent optimization
                volatile int r = rand() % (matC.dims.x*matC.dims.y);
                GPUOptPrevent += matC.pData[r];
            }

            cout << "Average Time for " << kNrIter << " matrix multiplication on GPU: " << GPUtime << " seconds." << endl;
            cout << "Average Time for one matrix multiplication on GPU: " << GPUtime/kNrIter << " seconds." << endl;

                // CPU calculation only once to verify result
            retCPU = CPUMatrixMultiplyNaive(matA, matB, matCPU, 1);

                // prevent optimization
            volatile int r = rand() % (matA.dims.x*matA.dims.y);
            volatile int s = rand() % (matB.dims.x*matB.dims.y);
            volatile int t = rand() % (matC.dims.x*matC.dims.y);
            volatile int u = rand() % (matCPU.dims.x*matCPU.dims.y);
            cout << "Optimization prevention: " << GPUOptPrevent << matA.pData[r] << matB.pData[s] << matC.pData[t] << matCPU.pData[u] << endl;

    #if 1
            ofstream fC("matC.txt");
            ofstream fCPU("matCPU.txt");
            for (size_t r = 0; r < matC.dims.y; r++) {
                for (size_t e = 0; e < matC.dims.x; ++e) {
                    fC << matC.pData[r*matC.dims.x + e] << ((e<(matC.dims.x-1)) ? ",":";");
                    fCPU << matCPU.pData[r*matCPU.dims.x + e] << ((e<(matCPU.dims.x-1)) ? ",":";");
                }
                fC << endl;
                fCPU << endl;
            }
            fC.close();
            fCPU.close();
    #endif

                // Verify result
            bool correct = true;
            cout << "Checking results for correctness: ";
            for (size_t v = 0; v < (matC.dims.x*matC.dims.y); ++v) {
                if (fabs(matC.pData[v] - matCPU.pData[v]) > kFailure) {
                    correct = false;
                    break;
                }
            }
            cout << ((correct)?"OK":"Failed!") << endl << endl;

            delete [] matA.pData; matA.pData = 0;
            delete [] matB.pData; matB.pData = 0;
            delete [] matC.pData; matC.pData = 0;
            delete [] matCPU.pData; matCPU.pData = 0;
        }

        return retCPU + retGPU;
    }

    int oclMatrixMult(TMat const& matA, TMat const& matB, TMat& matC) {
        try {
                // Initialize OpenCL
            std::vector<cl::Platform> platforms;
            std::vector<cl::Device> devices;
            int pidx = -1;  // platform index
            int didx = -1;  // device index

            size_t memsize_A = sizeof(TMatrix) * matA.dims.x * matA.dims.y;
            size_t memsize_B = sizeof(TMatrix) * matB.dims.x * matB.dims.y;
            size_t memsize_C = sizeof(TMatrix) * matC.dims.x * matC.dims.y;

                // checkout available GPU devices
            cl::Platform::get(&platforms);
            if (platforms.size() < 1) {
                return 1;
            }

            for (size_t i = 0; i < platforms.size(); ++i) {
                platforms[i].getDevices(CL_DEVICE_TYPE_ALL, &devices);
                if (platforms[i].getInfo<CL_PLATFORM_NAME>().find(kPlatformName) == string::npos) {
                    continue;
                }
                if (devices.size() > 0) {
                    for (size_t j = 0; j < devices.size(); ++j) {
                        if (devices[j].getInfo<CL_DEVICE_NAME>().find(kDeviceName) != string::npos) {
                            pidx = i;
                            didx = j;
                        }
                    }
                }
                if (didx >= 0) {
                    break;
                }
            }

                // create context for found GPU devices.
            std::vector<cl::Device> device;
            device.push_back(devices[didx]);
            cl_context_properties cop[] = {CL_CONTEXT_PLATFORM, (cl_context_properties)(platforms[pidx])(), 0};

    #if 1
            cout << "Platform: " << platforms[pidx].getInfo<CL_PLATFORM_NAME>() << endl
                << "Device: " << devices[didx].getInfo<CL_DEVICE_NAME>() << endl;
    #endif

            cl::Context context;
            context = cl::Context(device, cop, 0, 0, 0);

                // create a cmd queue
            cl::CommandQueue CmdQueue(context, context.getInfo<CL_CONTEXT_DEVICES>() [0]);

            // create buffers
            // two read only (ad Nvidia Programmers Guide for OpenCL)
            // and one write only buffer!
            cl_int err = CL_SUCCESS;
            cl::Buffer dA(context, CL_MEM_READ_ONLY | CL_MEM_COPY_HOST_PTR, memsize_A, matA.pData, &err);
            if (err != CL_SUCCESS) {
                cerr << "cl::Buffer() failed (dA)" << endl;
            }
            cl::Buffer dB(context, CL_MEM_READ_ONLY | CL_MEM_COPY_HOST_PTR, memsize_B, matB.pData, &err);
            if (err != CL_SUCCESS) {
                cerr << "cl::Buffer() failed (dA)" << endl;
            }
            cl::Buffer dC(context, CL_MEM_WRITE_ONLY, memsize_C, matC.pData, &err);
            if (err != CL_SUCCESS) {
                cerr << "cl::Buffer() failed (dA)" << endl;
            }

                // Load and build OpenCL kernel
            cl::Program program = LoadProgram(context, "MatrixMulKernel.cl");

                // Launch OpenCL kernel
            cl::Kernel MatMulKernel;
            MatMulKernel = cl::Kernel(program, "MatrixMulKernel");

            MatMulKernel.setArg(0, dC);
            MatMulKernel.setArg(1, dA);
            MatMulKernel.setArg(2, dB);
            MatMulKernel.setArg(3, matA.dims.x);
            MatMulKernel.setArg(4, matB.dims.x);

                // execute the kernel
            cl::NDRange LocalWorksize(kBlockSize,kBlockSize);
            cl::NDRange GlobalWorksize(matB.dims.x/(kBlockSize), matA.dims.y/(kBlockSize));

            // necessary?
            //CmdQueue.enqueueWriteBuffer(dA, CL_TRUE, 0, memsize_A, matA.pData);
            //CmdQueue.enqueueWriteBuffer(dB, CL_TRUE, 0, memsize_B, matB.pData);

            CmdQueue.enqueueNDRangeKernel(MatMulKernel, cl::NullRange, GlobalWorksize, cl::NullRange);

                // Retrieve result from device
            CmdQueue.enqueueReadBuffer(dC, CL_TRUE, 0, memsize_C, matC.pData);
            CmdQueue.finish();
        }
        catch (cl::Error err) {
            std::cerr << "ERROR: " << err.what() << " ("    << err.err() << ")" << std::endl;
            return 1;
        }
        catch (std::string err) {
            std::cerr << "ERROR: " << err << std::endl;
            return 1;
        }
        catch (...) {
            std::cerr << "Unknown error occurred!" << std::endl;
            return 1;
        }

        return 0;
    }

    int CPUMatrixMultiplyNaive(TMat const& matA, TMat const& matB, TMat& matC, size_t const nrIt) {

        if (nrIt == 0) return 1;

        TMatrix tmp = 0;
        for (size_t i = 0; i < nrIt; ++i) {

            for (size_t i = 0; i < matA.dims.y; ++i) {          // height of C
                for (size_t j = 0; j < matB.dims.x; ++j) {      // width of C
                    for (size_t k = 0; k < matA.dims.x; ++k) {  // width of A and height of B
                        tmp += matA.pData[i*matA.dims.x + k] * matB.pData[k*matB.dims.x + j];
                    }
                    matC.pData[i*matC.dims.x + j] = tmp;
                    tmp = 0;
                }
            }

        }
        return 0;
    }

    cl::Program LoadProgram(cl::Context& context, std::string const& fname, std::string const& params /*= ""*/) {
        cl::Program::Sources sources;
        cl::Program program;
        std::vector<cl::Device> device = context.getInfo<CL_CONTEXT_DEVICES>();

        std::ifstream src_file(fname.c_str());
        if (!src_file) { throw std::string("Failed to open Kernel-Source file!"); }
        std::string src_code(std::istreambuf_iterator<char>(src_file), (std::istreambuf_iterator<char>()));

        sources.insert(sources.end(), std::make_pair(src_code.c_str(), src_code.length()));
        program = cl::Program(context, sources);
        try {
            // build kernel source
            program.build(device, params.c_str());
        }
        catch (cl::Error e) {
            std::cerr << "Compilation build error log: " << std::endl <<
                program.getBuildInfo<CL_PROGRAM_BUILD_LOG>(device[0]) << std::endl;

            throw e;
        }
        return program;
    } 
```

内核代码：

```
 #define BLOCK_SIZE 32

__kernel void MatrixMulKernel(__global float* C, __global float* A, __global float* B, unsigned int wA, unsigned int wB) {

    // Block index
    int bx = get_group_id(0);
    int by = get_group_id(1);

    // Thread index
    int tx = get_local_id(0);
    int ty = get_local_id(1);

    // Index of the first sub-matrix of A processed 
    // by the block
    int aBegin = wA * BLOCK_SIZE * by;

    // Index of the last sub-matrix of A processed 
    // by the block
    int aEnd   = aBegin + wA - 1;

    // Step size used to iterate through the 
    // sub-matrices of A
    int aStep  = BLOCK_SIZE;

    // Index of the first sub-matrix of B processed 
    // by the block
    int bBegin = BLOCK_SIZE * bx;

    // Step size used to iterate through the 
    // sub-matrices of B
    int bStep  = BLOCK_SIZE * wB;

    float Csub = 0;

    // Loop over all the sub-matrices of A and B
    // required to compute the block sub-matrix
    for (int a = aBegin, b = bBegin; a <= aEnd; a += aStep, b += bStep) {

        // Declaration of the local memory array As 
        // used to store the sub-matrix of A
        __local float As[BLOCK_SIZE][BLOCK_SIZE];

        // Declaration of the local memory array Bs 
        // used to store the sub-matrix of B
        __local float Bs[BLOCK_SIZE][BLOCK_SIZE];

        // Load the matrices from global memory
        // to local memory; each thread loads
        // one element of each matrix
        As[ty][tx] = A[a + wA * ty + tx];
        Bs[ty][tx] = B[b + wB * ty + tx];

        // Synchronize to make sure the matrices 
        // are loaded
        barrier(CLK_LOCAL_MEM_FENCE);

        // Multiply the two matrices together;
        // each thread computes one element
        // of the block sub-matrix
        for (int k = 0; k < BLOCK_SIZE; ++k) {
            Csub += As[ty][k] * Bs[k][tx];
        }

        // Synchronize to make sure that the preceding
        // computation is done before loading two new
        // sub-matrices of A and B in the next iteration
        barrier(CLK_LOCAL_MEM_FENCE);

    }

    // Write the block sub-matrix to device memory;
    // each thread writes one element
    int c = wB * BLOCK_SIZE * by + BLOCK_SIZE * bx;
    C[c + wB * ty + tx] = Csub;
} 
```

可以在此处找到 Visual Studio 10 项目：
[VS2010oclMatrixMultiplication](http://www.file-upload.net/download-7061549/oclMatrixMultiplication.zip.html)

当使用从 0 .. matX.dims.x*matX.dims.y-1 填充的矩阵执行此操作时，我收到以下结果（对于 A(32,32) B(64,32)）：

```
 6.20951,6.02305,0,0,2.35099e-038,0,0,0,2.35099e-038,0,0,0,2.35099e-038,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2.35099e-038,0,0,0,2.35099e-038,0,0,0,2.35099e-038,2.35099e-038,2.35099e-038,2.35099e-038,2.35099e-038,0,0,0,2.35099e-038,2.35099e-038,2.35099e-038,2.35099e-038,0,0,0,0,0,0,0,0,0,0,0,0;
    2.35099e-038,0,0,0,2.35099e-038,0,0,0,2.35099e-038,0,0,0,2.35099e-038,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2.35099e-038,0,0,0,2.35099e-038,0,0,0,2.35099e-038,0,0,0,2.35099e-038,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0;
    2.35099e-038,0,0,0,2.35099e-038,0,0,0,2.35099e-038,0,0,0,2.35099e-038,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2.35099e-038,0,0,0,2.35099e-038,0,0,0,2.35099e-038,0,0,0,2.35099e-038,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0;
    2.35099e-038,0,0,0,2.35099e-038,0,0,0,2.35099e-038,0,0,0,2.35099e-038,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2.35099e-038,0,0,0,2.35099e-038,0,0,0,2.35099e-038,0,0,0,2.35099e-038,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0;
    2.35099e-038,0,0,0,2.35099e-038,0,0,0,2.35099e-038,0,0,0,2.35099e-038,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2.35099e-038,0,0,0,2.35099e-038,0,0,0,2.35099e-038,0,0,0,2.35099e-038,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0;
    2.35099e-038,0,0,0,2.35099e-038,0,0,0,2.35099e-038,0,0,0,2.35099e-038,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2.35099e-038,0,0,0,2.35099e-038,0,0,0,2.35099e-038,0,0,0,2.35099e-038,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0;
    2.35099e-038,0,0,0,2.35099e-038,0,0,0,2.35099e-038,0,0,0,2.35099e-038,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2.35099e-038,0,0,0,2.35099e-038,0,0,0,2.35099e-038,0,0,0,2.35099e-038,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0;
    2.35099e-038,0,0,0,2.35099e-038,0,0,0,2.35099e-038,0,0,0,2.35099e-038,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2.35099e-038,0,0,0,2.35099e-038,0,0,0,2.35099e-038,0,0,0,2.35099e-038,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0;
    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0;
    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0;
    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2.35099e-038,2.35099e-038,2.35099e-038,2.35099e-038,0,0,0,0,2.35099e-038,2.35099e-038,2.35099e-038,2.35099e-038,0,0,0,0,0,0,0,0,0,0,0,0;
    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0;
    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0;
    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0;
    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0;
    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0;
    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0;
    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0;
    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0;
    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0;
    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0;
    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0;
    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2.35099e-038,2.35099e-038,2.35099e-038,2.35099e-038,0,0,0,0,2.35099e-038,2.35099e-038,2.35099e-038,2.35099e-038,0,0,0,0,0,0,0,0,0,0,0,0;
    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0;
    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2.35099e-038,2.35099e-038,2.35099e-038,2.35099e-038,0,0,0,0,2.35099e-038,2.35099e-038,2.35099e-038,2.35099e-038,0,0,0,0,0,0,0,0,0,0,0,0;
    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0;
    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0;
    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0;
    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0;
    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0;
    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0;
    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0; 
```

这里有人能找出我的错吗？我玩了几天解决它并做了一些研究，但内核代码必须是正确的。我还在 CUDA 中实现了相同的内核，它完美地工作并计算出正确的结果！

在此先感谢
男爵

编辑：我忘了列出我的硬件。我正在使用 NVIDIA GTX 460 来计算问题。此卡仅支持 OpenCL 1.1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T19:23:33.113

我喜欢这个错误：

正如 Eric 所提到的，错误的结果是由局部和全局大小变量引起的。

OpenCL 1.1 标准指定本地和全局工作大小如下：

> 明确指定的 local_work_size 将用于确定如何将 Last Revision Date: 6/1/11 第 134 页 global_work_size 指定的全局工作项分解为适当的工作组实例。如果指定了 local_work_size，则 global_work_size[0], … global_work_size[work_dim - 1] 中指定的值必须能被 local_work_size[0], … local_work_size[work_dim – 1] 中指定的相应值整除。

[opencl-1.1.pdf](https://www.khronos.org/registry/cl/specs/opencl-1.1.pdf)在第 133/134 页定义

当我更改以下行时，指定本地和全局工作大小

```
cl::NDRange GlobalWorksize(kBlockSize,kBlockSize);
cl::NDRange LocalWorksize(matB.dims.x/(kBlockSize), matA.dims.y/(kBlockSize)); 
```

到

```
cl::NDRange GlobalWorksize(matB.dims.x, matA.dims.y);
cl::NDRange LocalWorksize(range,range); 
```

所有结果都计算正确。

谢谢埃里克的提示！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T20:45:04.567

检查您的全球和本地规模。

显然，您的内核假定本地大小为 BLOCK_SIZE x BLOCK_SIZE，因此您应该在 enqueueNDRangeKernel 中传递这些而不是 null。

由于每个工作项将一个元素写入输出，因此全局大小应至少为输出大小（您在代码中将其除以 BLOCK_SIZE，这可能是错误的）。

要进行调试，请在输出中写入一些琐碎的值，例如 (tx+1000*ty)，这样您会立即看到是否有问题。

# android - 在android中的imageview上创建位图模糊效果时遇到问题

> ID：14339411
> 
> 赞同：1
> 
> 时间：2013-01-15T14:03:32.763
> 
> 标签：android, bitmap, imageview, blur

我正在尝试对图像视图中显示的图像创建模糊效果。我遇到了一个例子，说明缩小位图中的图像然后再次放大它（我认为是双线性过滤），到目前为止图像质量真的很差。我试图实现一个很好的平滑模糊。我目前使用的代码是：

```
originalImage = BitmapFactory.decodeResource(getResources(),
            mImageIds[coverFlow.getSelectedItemPosition()]);

    xPos = originalImage.getWidth() / 2;

    zoomedImage = Bitmap.createBitmap(originalImage, xPos / 2, yPos, width,
            height);

    int upWidth = (int) (width * 3.5); //width is 450 >> upWidth is 1575
    int upHeight = (int) (height * 3.5); //height is 700 >> upHeight is 2450

    int downWidth = (int) ((width * 1.75)*0.06); //width is 450 >> downWidth is 787.5
    int downHeight = (int) ((height * 1.75)*0.06); //height is 700 >> downHeight is 1225

    Bitmap ScaledUp = Bitmap.createScaledBitmap(zoomedImage, upWidth,
            upHeight, true);
    Bitmap BlurredImage = Bitmap.createScaledBitmap(ScaledUp, downWidth,
            downHeight, true);

    background.startAnimation(myFadeInAnimation);
    background.setImageBitmap(BlurredImage);
    background.setFocusable(true); 
```

有人可以解释出了什么问题吗？我似乎无法获得平滑的模糊，它总是像素化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-06T15:25:36.703

在我的脑海中，我会尝试以下方法：

`//downscale Bitmap bmp = Bitmap.createScaledBitmap(originalBitmap, originalBitmap.getWidth()/scale, originalBitmap.getHeight()/scale, true); //blur Bitmap blurred = blurAlgorithm.blur(bmp, BLUR_RADIUS); //draw the blurred image Canvas c = new Canvas(blurred); //upscale c.scale(scale, scale);`

对于 android 的一个好的模糊算法，看看[这个](https://github.com/PomepuyN/BlurEffectForAndroidDesign/blob/master/BlurEffect/src/com/npi/blureffect/Blur.java)。通常，该项目有很多关于如何正确进行模糊的信息。

# scala - Scala 中如何实现 Int*、String* 等可变参数？

> ID：14339414
> 
> 赞同：1
> 
> 时间：2013-01-15T14:03:45.053
> 
> 标签：scala

> **可能重复：**
> [Scala 中可变长度参数列表的类型是什么？](https://stackoverflow.com/questions/13205012/what-is-the-type-of-a-variable-length-argument-list-in-scala)

我最近在参数列表上看到了这篇文章：[https](https://stackoverflow.com/a/4684598/1287554) ://stackoverflow.com/a/4684598/1287554 ，我觉得它真的很有趣。

我也理解下面给出的用例：

```
def fn(x:Int*) = x.sum                    //> fn: (x: Int*)Int  
fn(1,2,3)                                 //> res0: Int = 6 
```

我看到的明显解释是，它是以下代码的某种语法糖：

```
def fn(x:List[Int]) = x.sum               //> fn: (x: List[Int])Int
fn(List(1,2,3))                           //> res0: Int = 6 
```

但我找不到任何关于它们的文档。有人可以指出一些解释此类函数参数的链接吗？另外，它们是称为参数列表还是其他名称？也许我找不到任何东西的原因是因为我用错误的名字搜索？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T14:30:55.403

这些是可变长度参数列表（根据规范的[重复参数，正如](http://www.artima.com/pins1ed/functions-and-closures.html#8.8)[Randall在](https://stackoverflow.com/users/200166/randall-schulz)[他的回答](https://stackoverflow.com/a/14340561/53013)中正确指出的那样），通常称为“varargs”，是实现此类功能的 K&R C 库函数的名称。

对于 Scala，在 JVM 级别，`arg: T*`参数作为 传递`arg: Seq[T]`，通常通过`WrappedArray`.

Java 与语法相同`T... arg`，总是将参数作为`Array[T]`. Scala 可以识别 Java 可变参数，并且可以像 Scala 一样调用它们。

Scala varargs 和 Java varargs 之间的一个重要区别是用于*调用*实现它们的方法的约定不是传递参数，而是传递包含它们的对象。在 Java 中，您可以只传递一个数组：

```
public void m(String... args)

String[] list = new String[] { "a", "b", "c" };
m(list) 
```

而在 Scala 中，您必须借助一种特殊的语法来明确您的意思：

```
val list = Seq("a", "b", "c")
m(list: _*) 
```

另外值得注意的是，模式匹配时有一个逆运算符：

```
list match {
    case Seq(xs @ _*) => xs.size
    case _            => 0
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T15:04:52.243

首先，Scala 称它们为[“重复参数”，](http://www.artima.com/pins1ed/functions-and-closures.html#8.8)而不是“可变参数”。

一个重复的形参对应的实参被收集到一种特殊的`IndexedSeq`实现中`WrappedArray`：

```
scala> def mRP1(ints: Int*): Int = { printf("ints=%s%n", ints); ints.length }
mRP1: (ints: Int*)Int

scala> mRP1(1, 4, 9)
ints=WrappedArray(1, 4, 9)
res0: Int = 3 
```

请注意，因为它们是由它们实现的，所以`IndexedSeq`它们具有恒定时间的索引访问。

# php - 如果满足该div中的条件，如何使用echo来回显div

> ID：14339415
> 
> 赞同：0
> 
> 时间：2013-01-15T14:03:49.237
> 
> 标签：php, wordpress, echo

我有一个简单的 php 脚本，如果用户在 wordpress 中的用户帐户字段中提供了他们的社交网络用户名，我将使用它来显示社交图标。

问题是即使未提供网络用户名，也会显示所有网络图标。

我清楚地理解它发生的原因，因为所有 div 都包装在同一个 echo 输出中，但是如果每个 div 的条件都单独满足，我无法真正弄清楚如何在该 echo 中使用 isset 来输出。

我希望我对问题的解释不会太混乱

这是我的脚本示例

```
 echo '
<div class="author_networks">
<div class="gplus"><a class="soc_btn gplus_img" href="https://plus.google.com/'. get_the_author_meta('google_plus', $authorID) .'" rel="me" target="_blank"></a></div>
<div class="facebook"><a class="soc_btn facebook_img" href="http://www.facebook.com/'. get_the_author_meta('facebook', $authorID) .'" target="_blank"></a></div>
<div class="twitter"><a class="soc_btn twitter_img" href="http://twitter.com/'. get_the_author_meta('twitter', $authorID) .'" target="_blank"></a></div>
<div class="linkedin"><a class="soc_btn linkedin_img" href="http://www.linkedin.com/company/'. get_the_author_meta('linkedin', $authorID) .'" target="_blank"></a></div>
</div>
</div>' 
```

提前感谢您的建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T14:08:40.897

对每个使用单独的 echo 调用`<div>`：

```
echo '<div class="author_networks">';
if(isset(get_the_author_meta('google_plus', $authorID))) {
 echo '<div class="gplus">...</div>';
}
if(isset(get_the_author_meta('facebook', $authorID))) {
 echo '<div class="facebook">...</div>';
}
// and so on
echo '</div>'; 
```

假设当没有可用的作者数据时`get_the_author_meta()`返回。`null`如果没有，则需要使用其他方法检查数据是否可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T14:08:41.187

Sime`IF`语句将起作用：

```
<?
echo '<div class="author_networks">';
if ($condition == 'gplus') {
    echo '<div class="gplus"><a class="soc_btn gplus_img" href="https://plus.google.com/' . get_the_author_meta('google_plus', $authorID) . '" rel="me" target="_blank"></a></div>';
} elseif ($condition == 'facebook') {
    echo '<div class="facebook"><a class="soc_btn facebook_img" href="http://www.facebook.com/' . get_the_author_meta('facebook', $authorID) . '" target="_blank"></a></div>';
} elseif ($condition == 'twitter') {
    echo '<div class="twitter"><a class="soc_btn twitter_img" href="http://twitter.com/' . get_the_author_meta('twitter', $authorID) . '" target="_blank"></a></div>';
} elseif ($condition == 'linkedin') {
    echo '<div class="linkedin"><a class="soc_btn linkedin_img" href="http://www.linkedin.com/company/' . get_the_author_meta('linkedin', $authorID) . '" target="_blank"></a></div>';
}
echo '</div>';
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T14:08:28.573

我认为您必须为`echo`每个图标使用单独的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T14:09:06.233

您需要将其拆分为单独的部分，并且应该删除 echo 并将其替换为 php.ini 之外的 html。像这样：

```
?><div class="author_networks"><?php
if (/*google plus check*/) { ?><div class="gplus"><a class="soc_btn gplus_img" href="https://plus.google.com/<?php echo get_the_author_meta('google_plus', $authorID); ?>" rel="me" target="_blank"></a></div> 
```

对所有 4-5 个条目执行此操作，您就完成了。

# python - 对 Windows 8 的 Python 支持

> ID：14339417
> 
> 赞同：5
> 
> 时间：2013-01-15T14:03:57.437
> 
> 标签：python, windows-8, microsoft-metro, windows-phone-8

我们可以用 Python 为 Windows 8 或 Windows RT 开发应用程序吗？如果是，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T14:15:38.390

谷歌搜索给出了 PyCon 2013 的这个结果：[Windows 8 Apps and Python](https://us.pycon.org/2013/schedule/presentation/127/)

# asp.net - OrmLite 真的与数据库无关吗？

> ID：14339420
> 
> 赞同：3
> 
> 时间：2013-01-15T14:04:13.980
> 
> 标签：asp.net, database, entity-framework-5, servicestack, ormlite-servicestack

我是 Service Stack 和 OrmLite 的新手，并且正在探索 ORMLite 作为 Entity Framework 的替代方案。我对此有 2 个问题： - EF 吸引我的原因是能够将数据库操作和业务数据模型分离到单独的层中 - EF 可以使用您在配置文件的连接字符串中指定的任何内容运行。ORMLite 似乎对不同的数据库有不同的风格，这让我很担心，因为我不想重复进行代码更改。

我理解正确吗？请澄清

谢谢

苏拉杰

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T00:46:35.953

OrmLite 通过使用**DialectProvider 的**.

基本上，只要某些 RDBMS 偏离规范并需要特别注意，此功能就会被分解到方言提供程序中，因此它可以提供定制功能并覆盖默认行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T14:16:07.677

尽管没有“数据库不可知论”之类的东西。产品可能符合标准（例如 SQL92），但即使这样也不能保证它完全实现了该标准。

根据[文档](https://github.com/ServiceStack/ServiceStack.OrmLite)设置与不同数据库/后备存储的连接将只是在连接工厂中设置不同的连接字符串和方言提供程序，因此这意味着更改数据库不会太困难。

就官方列表而言，[这](https://github.com/ServiceStack/ServiceStack.OrmLite/blob/master/src/AllDialectsTest/Main.cs)是我能找到的最接近的列表。

*   SqlLite
*   SqlServer
*   mysql
*   PostgreSQL
*   FirebirdSql

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T14:20:10.017

过去曾在 ORM 上工作过，我可以告诉您 ORM 实际上并不是“与数据库无关”。相反，ORM 试图尽可能地与数据库无关，并且通常有一个目标集。如果您帮助添加对不在列表中的数据库的支持，他们当然会喜欢您。

例如，ORM 不太可能支持 NoSQL 数据库（例如 Redis、CouchDB）[但并非不可能]、原生 XML（例如 eXist）或面向对象的数据库（例如 Zope）。在大多数情况下，这些技术以 RDBMS 为目标，而且它们通常做得很好。

由于这是基于 Java 构建的，因此您可能会有很多选择 - 任何与 JDBC 连接的东西都可能会受到支持，或者保留扩展的可能性。

在这些工具的核心，您编写的 SQL 和函数会被底层数据库解析和消化。理论上可以使用任何数据库。

StingyJack 找到了支持的确切数据库。MySQL、Postgres、Microsoft SQL Server、H2、Derby、HSQLDB 和 Sqlite。

现在请记住，另一个特性是新数据库通常可以通过使用代码中的接口来支持 - 因此，如果您没有看到您想要的数据库，您可能会复制另一个模块并对其进行修改，直到它符合要求。

因为这些工具是按照标准模式构建的，所以该模式被重新应用并适用于每个数据库。因此，随着该列表的增长，您应该能够安全地期望每个新数据库都获得相同的支持。

话虽如此，观察任何开源项目的活动是个好主意，因为如果在达到成熟状态之前未充分利用或承诺不足，支持可能会落后。

这个特殊的 ORM 似乎是基于 SQL 的，所以不要期望扩展的支持涵盖非关系数据库。

# inheritance - 具有不同参数的继承和覆盖方法

> ID：14339421
> 
> 赞同：0
> 
> 时间：2013-01-15T14:04:15.307
> 
> 标签：inheritance, overriding, typescript

我有一个继承的接口`HTMLElement`：

```
export interface IEElement extends HTMLElement {
    click: (event: IEEvent) => void;
    onmousedown: (event: IEEvent) => void;
    onmousemove: (event: IEEvent) => void;
    onmouseup: (event: IEEvent) => void;
} 
```

在所有属性上出现错误：

![错误图像](../Images/493571148d1a1ea51f5cb474664943f1.png)

我想这是因为`click`is type `() => void`，但它不应该被我的新模式覆盖吗？如何省略错误（我不想重命名我的属性 - 如果没有必要）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T14:21:37.890

使其成为可选（使用：？）

```
export interface IEElement extends HTMLElement {
    click: (event?: IEEvent) => void;
    onmousedown: (event: IEEvent) => void;
    onmousemove: (event: IEEvent) => void;
    onmouseup: (event: IEEvent) => void;
} 
```

# php - PHP 网站 facebook 登录

> ID：14339423
> 
> 赞同：1
> 
> 时间：2013-01-15T14:04:16.593
> 
> 标签：php, mysql, facebook, login

我在一个社交网站上工作，我想在其中集成 facebook 登录。但我需要以下建议；

*   访问者可以在网站上注册并使用他们注册的信息登录。
*   注册访问者可以登录并创建和保存“文档（在线文本编辑器中的纯文本）”，向其他用户发送请求以评价他们的“文档”并接收和发送私人消息。

我知道如何执行上述操作，但如果我希望访问者能够使用他们的 Facebook 帐户执行上述操作，这可能吗？我已经知道我将使用 mysql 数据库来保存注册用户帐户及其文件和私人消息。

如果是的话，你能告诉我如何做到这一点吗？

我知道现在听起来有点含糊，但我不能说更多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T14:12:19.033

您正在寻找“Facebook 登录”。前往[FBs 开发者中心](https://developers.facebook.com/)并阅读有关“[登录](https://developers.facebook.com/docs/concepts/login/)”的文档。它涵盖了实现所需的一切。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T14:13:36.047

[您可以在https://developers.facebook.com/docs/howtos/login/getting-started/](https://developers.facebook.com/docs/howtos/login/getting-started/)尝试开发者中心或尝试替代[http://opauth.org/](http://opauth.org/)

# c# - 如何将成形对象数据制作成 XML 文档并通过 Schema 进行验证？

> ID：14339429
> 
> 赞同：1
> 
> 时间：2013-01-15T14:04:29.510
> 
> 标签：c#, xml, linq-to-xml

我有一系列域实体，假设如下：

*   客户（客户有订单）
*   订单（订单有产品）
*   产品

现在对象图中的数据与 .xsd*不匹配。*因此，我不相信我可以将对象图序列化为 XML，因为它可能与 .xsd 不匹配。但是，如果我错了，请纠正我。所以我有几个问题：

1.  一般而言，如何从可能需要手动遍历和构建 XML 文档的对象或集合中获取数据？我可以使用 LINQ to XML（使用 XElement）吗，因为我了解 XPath 是一项较旧的技术？我以前使用过 LINQ to XML 来读取和查询 XML 文档，但想知道如何使用它来构建 XML 文档。
2.  如何在构建后使用#1 中建议的方法针对架构验证构建的 XML 文档？

对此的任何方向表示赞赏，谢谢！

# mysql - MySQL中奇怪的二进制到十进制转换

> ID：14339438
> 
> 赞同：0
> 
> 时间：2013-01-15T14:04:51.147
> 
> 标签：mysql, sql, binary, type-conversion, decimal

我尝试在 MySQL 中将二进制转换为小数，但有一个大问题：

```
SELECT CONV(BINARY('10000000000000000000000000000000000000001111111100000000000000000'),2,10) 
```

和

```
SELECT CONV(BINARY('11111111111111111111111111111111111111101111111111011110111100000'),2,10) 
```

给出相同的错误结果：18446744073709551615

虽然，如果我使用 bindec() PHP 函数，我会分别获得：

3.6893488147386E+19 和 1.8446744073743E+19。这些结果是预期的，我会在我的 SQL 请求输出中获得它们。

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T14:34:30.517

为简单起见，假设所有要转换的字符串都是 65 个字符长。这意味着右移一位将使字符串可转换。所以这样的事情可能会起作用：

```
SELECT CONV(LEFT(mystring,64))*2 + RIGHT(mystring,1); 
```

# java - 表达式语言：如何简化此语句（需要类似“in”的子句）

> ID：14339443
> 
> 赞同：4
> 
> 时间：2013-01-15T14:05:01.797
> 
> 标签：java, jsp, jsf, el, in-clause

如果我可以更换就好了

```
${myvar eq 'foo' or myvar eq 'bar' or myvar eq 'john' or myvar eq 'doe' or myvar eq ...} 
```

通过

```
${myvar in ['foo', 'bar', 'john', 'doe', ...]} 
```

或者

```
${myvar in {'foo', 'bar', 'john', 'doe', ...}} 
```

但他们都没有工作。任何替代解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T14:20:22.353

首先为此创建一个 EL 函数。Facelets 的启动示例可以在[这个答案](https://stackoverflow.com/questions/7079978/how-to-create-a-custom-el-function/7080174#7080174)中找到，另一个 JSP的示例可以在[我们的 EL wiki 页面](https://stackoverflow.com/tags/el/info)底部附近的某个地方找到。

```
public static boolean contains(Object[] array, Object item) {
    if (array == null || item == null) {
        return false;
    }

    for (Object object : array) {
        if (object != null && object.toString().equals(item.toString())) {
            return true;
        }
    }

    return false;
} 
```

*（或者如果您使用的是 JSF 实用程序库[OmniFaces](http://omnifaces.org)，请使用它[`of:contains()`](http://showcase.omnifaces.org/functions/Arrays)，尽管它仅适用于 Facelets，不适用于已弃用的 JSP）*

然后按如下方式使用它：

```
<%@taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions" %>
<%@taglib prefix="my" uri="http://my.example.com/functions" %>
...
${my:contains(fn:split('foo,bar,john,doe', ','), myvar)} 
```

*（这`fn:split()`只是将 a delimited 转换为 a 的`String`技巧`String[]`）*

您甚至可以通过直接传递分隔字符串并在函数中执行拆分来进一步简化/专门化它，以便您最终可以像：

```
${my:contains('foo,bar,john,doe', myvar)} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T14:13:20.833

使用名称列表定义一个变量`mylist`并使用`contains`：

```
mylist.contains(myvar) 
```

# asp.net-mvc - 如何使自定义 DropDownList 编辑器模板的 Required 属性在客户端运行？

> ID：14339445
> 
> 赞同：9
> 
> 时间：2013-01-15T14:05:13.613
> 
> 标签：asp.net-mvc, asp.net-mvc-4, data-annotations, asp.net-mvc-viewmodel

我有一个 DropDownLists 的编辑器模板，它标有如下属性：

```
[AttributeUsage(AttributeTargets.Property)]
public class DropDownListAttribute : UIHintAttribute
{
    public string SelectListName { get; set; }
    public DropDownListAttribute(string selectListName)
        : base("DropDownList", "MVC", selectListName)
    {
        SelectListName = selectListName;
    }
} 
```

它本身看起来像这样：

```
@using Comair.RI.UI.Core
@{
    var list = this.GetModelSelectList();
    var listWithSelected = new SelectList(list.Items, list.DataValueField, list.DataTextField, Model);
}
@Html.DropDownListFor(m => Model, listWithSelected, " - select - ") 
```

我的问题是它只验证服务器端，这对于用户解决所有客户端验证非常烦人，只是提交并获得一个新的、令人惊讶的服务器端验证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T18:14:50.327

如果您的客户端验证不起作用，则可能是由以下原因之一引起的：

1.  您的 web.config 没有那个输入：

    ```
    <应用设置>
    <add key="ClientValidationEnabled" value="true" />
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />
    </app设置>

    ```

2.  您忘记添加验证脚本：

    ```
    <script src="@Url.Content("~/Scripts/jquery.validate.min.js")"></script>
    <script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")"></script>

    ```

3.  `Html.BeginForm`您的控件没有被或包围`Ajax.BeginForm`

4.  如果您使用以下方法，在更新到 ASP.NET MVC 4 后，客户端验证可能会在 EditorFor 中停止工作：

    ```
    @Html.DropDownListFor(m => Model, listWithSelected, " - select - ") 
    ```

    替换`Model`为`m`应该可以解决问题：

    ```
    @Html.DropDownListFor(m => m, listWithSelected, " - select - ") 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T11:15:32.140

设置所需的类

```
@Html.DropDownListFor(m => Model, listWithSelected, " - select - ", new { @class='required' }) 
```

请参阅[ASP MVC 3：如何在选择列表上进行客户端验证？](https://stackoverflow.com/questions/5818862/asp-mvc-3-how-can-i-do-client-side-validation-on-a-select-list)

# web2py - 如何处理用户名登录和注册？

> ID：14339446
> 
> 赞同：1
> 
> 时间：2013-01-15T14:05:13.620
> 
> 标签：web2py

我试图将默认登录样式更改为基于用户名的登录。为此，在 db.py 中，我写道：

```
from gluon.tools import Auth, Crud, Service, PluginManager, prettydate
auth = Auth(db)
crud, service, plugins = Crud(db), Service(), PluginManager()
auth.define_tables(username=True, signature=False, migrate=False)
auth_table=auth.settings.table_user
auth_table.username.requires = IS_NOT_IN_DB(db, auth_table.username) 
```

当我尝试注册新用户时，它给了我这个错误：

```
<class 'sqlite3.OperationalError'> no such column: auth_user.username 
```

我想知道如何正确处理这个问题。此外，对公开和处理这些表的工作方式有一个很好的解释会非常有帮助。我对此很陌生，发现它真的很混乱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T15:15:39.260

如果您最初创建的 Auth 表没有用户名，那么 auth_user 表中将没有“用户名”字段。因为您有`auth.define_tables(..., migrate=False)`，所以 DAL 将不会运行迁移以添加新字段。因此，尝试暂时将 migrate 更改为 True 以便添加该字段。

# tsql - CASE WHEN 仅在有值时添加逗号

> ID：14339447
> 
> 赞同：0
> 
> 时间：2013-01-15T14:05:14.423
> 
> 标签：tsql, sql-update, case

我有多个字段，仅当字段中有内容时才需要将其放入字符串中，最重要的是，如果字段为空，我不希望字段之间的逗号。我尝试使用 case when 但显然做错了什么，并希望在以下方面提供一些帮助：

```
USE newCityCollection

UPDATE PropertyInformationDump
SET    RegistryAdd = (CASE
                        WHEN b.OCAREOF IS NULL THEN Isnull(b.OCAREOF, '')
                        ELSE b.OCAREOF + ' ,'
                      END) + (CASE
                                WHEN b.O1STADD IS NULL THEN Isnull(b.O1STADD, '')
                                ELSE b.O1STADD + ' ,'
                              END) + (CASE
                                        WHEN b.O2NDADD IS NULL THEN Isnull(b.O2NDADD, '')
                                        ELSE b.O2NDADD + ' ,'
                                      END) + (CASE
                                                WHEN b.OSTNAME IS NULL THEN Isnull(b.OSTNAME, '')
                                                ELSE b.OSTNAME + ' ,'
                                              END) + (CASE
                                                        WHEN b.OCITYST IS NULL THEN Isnull(b.OCITYST, '')
                                                        ELSE b.OCITYST + ' ,'
                                                      END) + (CASE
                                                                WHEN b.OZIP IS NULL THEN Isnull(b.OZIP, '')
                                                                ELSE b.OZIP + ' ,'
                                                              END)
FROM   dbo.vw_BRT b
WHERE  BRTNumber = b.PARCEL 
```

当我在某个领域执行该操作时，我会感到无助，并且不确定为什么这可能是对`CASE`工作原理的根本误解。我确实确保这些字段实际上是空的，而不是空的，所以这不是问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-15T14:11:28.193

考虑以下情况：当您在 SQL 中将字符串连接在一起时，其中之一是`null`，结果是`null`(*)。所以，如果你在消除s*之前*`null`添加逗号，它会更容易一点：

```
SELECT COALESCE(b.OCAREOF + ' ,','') + COALESCE(b.O1STADD + ' ,','') + ... 
```

这里不需要`CASE`。

`COALESCE`类似于`ISNULL`并且通常会被推荐，除了一些奇怪的情况 - 一方面，它是标准 SQL 的一部分（如果你必须使用其他 RDBMS 时很有用），另一方面它可以接受*多个*参数并返回第一个`NULL`非. 第三，考虑到每个表达式的类型，它为结果使用最合适的数据类型——`ISNULL`总是尝试将第二个参数转换为第一个参数的类型）

* * *

（我也不确定我们在你的`CASE`表达式中做了什么——你已经确定了，例如`OCAREOF`为 null——没有必要再使用`ISNULL`表达式来获取`''`）

* * *

(*) 正如 Conrad 指出的那样，在 SQL Server 上，这确实取决于`CONCAT_NULL_YIELDS_NULL`being `ON`，但默认情况下[它*确实*应该是](http://msdn.microsoft.com/en-us/library/ms176056.aspx)：

> 在 SQL Server 的未来版本中，任何显式设置该选项的应用程序`CONCAT_NULL_YIELDS_NULL`都会生成错误。避免在新的开发工作中使用此功能，并计划修改当前使用此功能的应用程序。`ON``OFF`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-01T16:25:44.157

即使后面没有值，该解决方案仍会添加逗号。从 SQL Server 2017 开始，您可以`CONCAT_WS`像这样使用 (= concat with separator)：

```
UPDATE PropertyInformationDump
   SET RegistryAdd = concat_ws(' ,', b.OCAREOF, b.O1STADD, b.O2NDADD, ...) 
```

# delphi - Delphi 查询组件忽略引发错误

> ID：14339450
> 
> 赞同：4
> 
> 时间：2013-01-15T14:05:25.770
> 
> 标签：delphi

我有一个`TADOQuery`使用`TADOConnection`. 现在，当我将下面的 SQL 添加到组件并调用 ExecSql 时，它会引发适当的异常，因为“创建”单词中有错字。

```
 exec ('creat1e table myTable 
     (
          col1     TPT_Dt       not null ,
          col2     TPT_FLOAT       not null
     )'); 
```

但是同样的语句，如果我将它添加到另一个语句中，那么 TADOQuery 组件会忽略这个异常。例如：

```
 select * from SomeOtherTable where id = 10

 exec ('creat1e table myTable 
     (
          col1     DtDataType       not null ,
          col2     FLOATDataType       not null
     )'); 
```

您能否告诉我为什么 Delphi 在第二种情况下会忽略异常。

我的问题不在于 select 语句。即使我添加了一个 if 条件，那么也是同样的问题；

例如

```
if not exists (select * from dbo.sysobjects where id = object_id('TABLE1278') and type='U')
begin
 exec ('crea11te table table1278 
     (
          col1     TPT_Dt     
     )');
end 
```

delphi 只是忽略了错字。

提前致谢。

罗勒

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T14:25:04.857

返回从查询生成的所有记录集。默认情况下会显示第一个，并带有相应的错误。
您可以通过 ADODataSet1.NextRecordset(a) 访问所有记录集。

例如，您有以下查询

```
select * from TableWhichExists

Select * from TableWichNotExists 
```

您将获取 TableWhichExists 的结果。

和

```
procedure TForm1.Button1Click(Sender: TObject);
var
 rs:_RecordSet;
 a:Integer;
begin
  rs := ADODataSet1.NextRecordset(a)
end; 
```

您可以访问下一个记录集，并且将收到相应的错误。

NextRecordset 可能很有用，例如通过程序接收多个记录集，计算一次所有需要的记录集。

要使用例如三个收到的结果，您可以像这样工作：

```
procedure TForm1.Button1Click(Sender: TObject);
var
 a:Integer;
begin
  Adodataset2.Recordset := ADODataSet1.NextRecordset(a) ;
  Adodataset3.Recordset := ADODataSet1.NextRecordset(a)
end; 
```

Adodataset1 将显示第一个结果。

# c - 印刷浮标。（电源电脑）

> ID：14339452
> 
> 赞同：8
> 
> 时间：2013-01-15T14:05:40.937
> 
> 标签：c, powerpc

我正在尝试打印花车。尽管可变参数函数不适用于浮点数，但它们被提升为双精度值。我可以通过将其转换为双倍来设法摆脱警告。在某些 powerpc 架构上打印结果时，如果使用 %f 打印，则会给出不正确的值。为什么 ？

测试代码：

```
 #include <stdio.h>

 #define _echo_size(X) \
        printf ("Sizeof "#X" %u\n", sizeof(X))

int main (void)
{

        float x;
        long usec = 7L;

        _echo_size(float);
        _echo_size(double);
        _echo_size(short);
        _echo_size(int);
        _echo_size(long);
        _echo_size(long long);

        x = ((float) usec) / 2;
        printf("Expected: 3.5 Got: %1.1f\n", (double) x);
        printf("Expected: 3.5 Got: %1d.%.1d\n", (int)x,
                (int)((x-(int)x)*10));
        return 0;
} 
```

## X86系统结果：

```
Sizeof float 4
Sizeof double 8
Sizeof short 2
Sizeof int 4
Sizeof long 8
Sizeof long long 8
Expected: 3.5 Got: 3.5
Expected: 3.5 Got: 3.5 
```

## ppc系统结果：

```
Sizeof float 4
Sizeof double 8
Sizeof short 2
Sizeof int 4
Sizeof long 4
Sizeof long long 8
Expected: 3.5 Got: 0.0  <--- Why this ?
Expected: 3.5 Got: 3.5 
```

它是工具链中的错误吗？否则打印花车的优雅方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T21:58:27.203

哦，呃！无论您的 FPU 是否正在执行此操作，或者您的编译器是否在软件中为您执行此操作，您的浮点值`x` **都会被正确计算；**只是您的`printf()`实现显然不被`%f`视为`double`...

您是否在使用自定义实现的嵌入式系统上`printf()`？如果是这样，它可能无论如何都不是为了处理浮点数而编写的，因为浮点数通常甚至不用于嵌入式系统，程序员经常选择使用整数变量和定点算术，这在历史上要快得多浮点（并且可能仍然在小型嵌入式系统上）。

或者，另一种可能性：您的自定义`printf()` **是**为处理浮点数而编写的，但将`%f`其视为`float`，即使您的编译器在传递它时将其提升`float`为. 找到您的自定义实现并修复它以将堆栈作为 a而不是. （您的自定义实现可能会因为尝试这样做而收到警告，人们可能只是忽略了这一点。）在该代码中搜索并将其更改为. （当然在那个例子中是我自己的变量名 a ；你的变量名可能不同。）`double``...``%f``double``float``va_arg(args,float)``va_arg(args,double)``args``va_list`

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-01-15T14:28:17.600

我想这都是关于“大端”和“小端”的

# msbuild - MSBuild minify & concat javascript，将内容散列到文件名中

> ID：14339453
> 
> 赞同：5
> 
> 时间：2013-01-15T14:05:50.763
> 
> 标签：msbuild, concatenation, versioning, tfsbuild, minify

到目前为止，我一直在使用 MS Ajax Minifier 来压缩和组合我的 CSS 和 JS。我的服务器设置了很远的未来过期标头，所以我需要一个缓存过期策略。目前，我正在通过更改文件名手动对这些项目进行版本控制，以便它们在每个版本中过期。

我想稍微自动化一下，特别是通过将文件内容的哈希附加到压缩的文件名上。如果我们可以用这个更新的文件名更新一些配置 XML（存在于不同的项目中）文件，那么奖励积分

我们正在使用 TFS 构建服务器，所以我想这应该包含在 MSBuild 任务中？或者我可以让它作为预/后期构建项目步骤运行吗？

如果有人在这方面有任何他们乐于分享的知识，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T00:47:45.983

当然，您可以通过 MSBuild 完成所有操作：

*   创建您的[Ajax Minifier 清单文件](http://ajaxmin.codeplex.com/wikipage?title=XML%20File%20Formats)。我会保留这些静态和版本。
*   创建一个[msbuild 脚本](http://msdn.microsoft.com/en-us/library/dd393574.aspx)，其中包含：

    1 - [Ajax Minifier Manifest Task](http://ajaxmin.codeplex.com/wikipage?title=ManifestTask)进行压缩和组合。

    2 - [散列](http://blog.ylett.com/2012/05/msbuild-task-to-generate-hash-of-files.html)任务。如您所见，这是 c# 代码。更改代码以读取在步骤“1”中设置的输出文件夹并更改文件的名称，将计算的哈希添加到每个文件中。

*   [将创建的 msbuild 脚本导入](http://msdn.microsoft.com/en-us/library/92x05xfs.aspx)您的项目或主构建脚本（如果有）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T19:06:27.630

您是否考虑过 System.Web.Optimization 中的捆绑和缩小功能？

[http://blogs.msdn.com/b/rickandy/archive/2012/08/14/adding-bundling-and-minification-to-web-forms.aspx](http://blogs.msdn.com/b/rickandy/archive/2012/08/14/adding-bundling-and-minification-to-web-forms.aspx)

[http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification](http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification)

它应该可以满足您的所有需求，而无需 msbuild 维护麻烦。

它不会触及原始文件并更改每个构建的捆绑散列。此外，它可以在直播站点上以编程方式关闭，以允许在直播站点上调试 css 和 js，并保留所有原始文件名和注释。

我们非常成功地使用它，我鼓励 UI 程序员将 css 和 javascript 文件拆分为更小且更具逻辑命名的文件，并在其中留下更多的注释以用于文档。最终用户最终将始终获得单个 css 和 js，每个构建具有不同的名称。

# php - 根据选择的变量名称，netbeans 自动完成功能不起作用

> ID：14339455
> 
> 赞同：0
> 
> 时间：2013-01-15T14:05:54.087
> 
> 标签：php, netbeans, autocomplete, namespaces

我遇到了这个奇怪的自动完成问题，我很难找到原因。

我已经尝试删除缓存目录，但无济于事！我也尝试过 typehinting/phpdocs （ /**@return classname*/ 但同样没有解决问题。

旁注：很抱歉第一个屏幕的收成不好：p

问题： ![在此处输入图像描述](../Images/1bb94f615db2a3d122a496092c5cb295.png)

但是，当我使用不同的变量名时，它确实有效：

![在此处输入图像描述](../Images/ab5230021dbc0d89ede3ffc569ab7085.png)

你们会认为这是netbeans的错误吗？还是我错过了什么？我不得不说，我的函数 'fetchById($id)' 确实根据应用程序逻辑返回不同的类型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T14:55:30.857

第二个屏幕截图中的黄色下划线让人相信问题可能是由代码中的多个变量分配引入的，而这些变量在屏幕截图中不可见。但这只是一个猜测。

# ios - 自动完成委托方法 xcode（不仅仅是列出和搜索）

> ID：14339457
> 
> 赞同：0
> 
> 时间：2013-01-15T14:06:00.580
> 
> 标签：ios, xcode, cocoa, autocomplete

嗨，我正在寻找一种更快速的方法来通过 XCode 在委托类中插入委托方法。例如，如果我实现 UITableViewDelegate，我可以编写“-tableview”并且 Xcode 在自动完成字段中显示 uitableviewdelegate 的所有方法。但我必须滚动浏览所有方法。以某种方式是否可以进行另一级过滤。像编写“-tableview”并继续使用“didSel”并仅显示以该字符串开头的方法？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-09T19:53:44.273

一种解决方案是使用 Xcode 的[模糊自动完成插件](https://github.com/chendo/FuzzyAutocompletePlugin)。

例如，这将允许您`- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath`通过键入来过滤`- tabledidselect`。

# php - 为什么这些参数在这个 Mysql 查询中不经过？

> ID：14339459
> 
> 赞同：1
> 
> 时间：2013-01-15T14:06:03.573
> 
> 标签：php, mysql

这个查询有什么问题？

我无法让这个查询传递这些参数！

```
$offset = 5;
$rowsperpage = 10;
$stmt = $db->prepare("SELECT * FROM table ORDER BY ID DESC LIMIT ?,?");
if ($stmt->execute(array($offset, $rowsperpage))) {
  while ($row = $stmt->fetch()) {
    echo $row['title'];
  }
} 
```

如果我将查询更改为此它可以正常工作，但我需要传递字符串，因为它们是动态的。

```
$stmt = $db->prepare("SELECT * FROM table ORDER BY ID DESC LIMIT 5,10");
if ($stmt->execute(array($offset, $rowsperpage))) {
  while ($row = $stmt->fetch()) {
    echo $row['title'];
  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T14:14:40.023

我有一种感觉，“延迟执行”将所有参数视为字符串，因此将它们括在引号中。

所以，要么显式绑定你的参数，使用 bind_param 而不是将数组传递给 execute()

或将仿真模式设置为关闭

```
$db->setAttribute( PDO::ATTR_EMULATE_PREPARES, false ); 
```

连接后。

无论如何，您必须先与错误消息取得联系。
所以，设置这个

```
$db->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION ); 
```

将向您显示错误消息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T14:16:30.557

您忘记执行[bind_param](http://php.net/manual/en/mysqli-stmt.bind-param.php)来填空

# bash - 在 shell 变量中转义单引号

> ID：14339460
> 
> 赞同：3
> 
> 时间：2013-01-15T14:06:04.590
> 
> 标签：bash, shell

我编写了一个 bash 脚本来将值插入`sqlite`数据库。命令如下

```
sqlite3 ${db_name} "insert into ${table_name} (${column1},${column2}) values ('$f1','$f2');" 
```

此命令工作正常，直到`f1`变量包含单引号

```
# e.g f1="I'm just kidding"
# the command reported error
Error: near "m": syntax error 
```

有人可以告诉我如何逃避变量内的单引号吗？任何建议表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T15:26:31.833

要转义 SQL 的单引号，请将其加倍（[https://www.sqlite.org/faq.html#q14](https://www.sqlite.org/faq.html#q14)）：

```
$ f1="I'm just kidding"
$ echo "${f1//\'/''}"
I''m just kidding
$ f2="no single quotes"
$ echo "${f2//\'/''}"
no single quotes 
```

所以

```
sqlite3 ${db_name} "insert into ${table_name} (${column1},${column2}) values ('${f1//\'/''}','${f2//\'/''}');" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-15T14:19:40.813

从 bash 中，您可以使用 ${varname//x/y} 将 varname 变量中的所有 x 实例替换为 y 。

```
sqlite3 ${db_name} "insert into ${table_name} (${column1},${column2}) values ('${f1//\'/\'}','${f2//\'/\'}');" 
```

尽管@ignacioVazquez-Abrams 有最好的答案，但将用\'替换任何'，因为php perl python都有帮助清理输入的模块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T14:11:58.310

你可以使用**\**

```
f1="I\'m just kidding" 
```

# sql - 以下查询有什么问题？

> ID：14339464
> 
> 赞同：1
> 
> 时间：2013-01-15T14:06:20.583
> 
> 标签：sql, oracle, tsql

我在**oracle**数据库上写了这个查询。

```
Select salary from emp having salary < (SELECT MAX(SALARY) FROM EMP )); 
```

[http://sqlfiddle.com/#!4/47961/13](http://sqlfiddle.com/#!4/47961/13)

但它不起作用。

我哪里错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T14:07:32.697

要做的事情，

*   使用`WHERE`（*与聚合条件比较时使用具有*）
*   去掉多余的括号，

例如。

```
Select salary 
FROM emp 
WHERE salary < (SELECT MAX(SALARY) FROM EMP ); 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!4/47961/15)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T14:07:43.067

两个错误：

*   使用`WHERE`而不是`HAVING`.
*   去掉多余的括号。

尝试这个：

```
SELECT salary
FROM emp
WHERE salary < (SELECT MAX(salary) FROM emp); 
```

[http://sqlfiddle.com/#!4/47961/17](http://sqlfiddle.com/#!4/47961/17)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T14:07:59.947

```
Select salary from emp where salary < (SELECT MAX(SALARY) FROM EMP )); 
```

您可以`having`在使用 group by 的地方应用子句，这里没有 group by 而只是使用`where`

[**HAVING 条款**](http://www.techonthenet.com/sql/having.php)

HAVING 子句被添加到 SQL 中，因为 WHERE 关键字不能与聚合函数一起使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T14:09:00.823

```
Select salary from emp WHERE SALARY < (SELECT MAX(SALARY) FROM EMP ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-15T15:03:19.923

在 Oracle 中使用 Have 的正确方法：

```
SELECT sal FROM scott.emp
 GROUP BY sal
HAVING sal < (SELECT MAX(SAL) FROM scott.EMP)

/
SELECT deptno, COUNT(*) total_emps_by_dept
  FROM scott.emp
GROUP BY deptno
HAVING COUNT(*) > 1
/ 
```

# php - 在drupal 7中打印分配给节点模板上区域的drupal块的正确方法

> ID：14339466
> 
> 赞同：1
> 
> 时间：2013-01-15T14:06:28.967
> 
> 标签：php, drupal, drupal-7, drupal-theming

打印分配给节点模板ex（node.tpl.php）上区域的drupal块的正确方法是什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T14:23:58.850

您可以使用[module_invoke($module, $hook)](http://api.drupal.org/api/drupal/includes!module.inc/function/module_invoke/7)来执行此操作。

> $module：模块的名称（不带 .module 扩展名）。
> 
> $hook：要调用的钩子的名称。

代码片段：

```
$block = module_invoke('module_name', 'block_view', 'block_delta');
print $block['content']; 
```

**或者**

使用以下代码片段：

```
function block_print_html($module, $block_id)
{
  $block_html = "";
  $block = block_load($module, $block_id);
  $block_content = _block_render_blocks(array($block));
  $block_build = _block_get_renderable_array($block_content);
  return = drupal_render($build);
} 
```

# wpf - 使用数据虚拟化切换多选时的 DataGrid 请求

> ID：14339467
> 
> 赞同：6
> 
> 时间：2013-01-15T14:06:29.283
> 
> 标签：wpf, datagrid, data-virtualization

加起来 4 个月前的一个[帖子](https://stackoverflow.com/questions/12248633/datagrid-row-request-patterns-with-data-virtualization)，不幸的是没有收到任何答案。

在带移位的数据网格中使用多选时，我基本上遇到了同样的问题。

当在一个巨大列表中间的某个地方（比如网格中有 1,000,000 个项目，所有数据都虚拟化）并且我要使用 shift + 鼠标单击从 500,000 到 500,050 中进行选择时，网格调用我的“GetEnumerator()”方法虚拟列表（类似于文森特和保罗的实现）。到目前为止，我所做的只是缓存页面上的 SelectMany。但不幸的是，导致没有正确选择行（而 ctrl + 鼠标单击完成了这项工作！）。

所以我发现，DataGrid 实际上需要从索引 0 到最后一个选择的**所有项目。**显然，这对于 1m 个项目的列表并不理想，因为这将导致从 0 到（在我的示例中）500,050 的每个项目的请求，从而加载所有表单数据库。

所以我的问题与上面发布的链接中丹尼尔的问题相同：

*   为什么 DataGrid 多次请求项目（选定的项目被连续请求约 6-7 次，没有明显的原因）？

*   有没有办法告诉 DataGrid 不要使用 Enumerator 并只获取选定的项目而不是从 0 开始迭代？

非常感谢，希望我有更多的运气至少能得到发人深省的答案，因为关于数据虚拟化的内容并不多。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T07:50:13.883

我找到了解决这个问题的方法（至少我可以说它对我有用）。

我基本上所做的就是愚弄 VirtualList，因此我执行以下代码：

```
for (int i = 0; i < Count; i++)
{
  int pageIndex = i/PageSize;
  int pageOffset = i%PageSize;
  IList<TItem> page;
  if (pages.TryGetValue(pageIndex, out page))
  {
    yield return page[pageOffset];
  }
  yield return default(TItem);
} 
```

这样，我将始终获得真正在列表中的项目，但当它是虚拟化的一部分时，什么也不返回。

当然，这可能会导致其他一些问题，但这是迄今为止我得到的最接近的。

# ios - UITableViewCell如何根据里面标签的大小来布局？

> ID：14339468
> 
> 赞同：1
> 
> 时间：2013-01-15T14:06:31.540
> 
> 标签：ios, layout, uitableview

![在此处输入图像描述](../Images/60272cde422b962537731f353ec119b6.png)

正如您在照片中看到的，有两个标签 1 个方形图标和 1 个个人资料照片。第一个标签没有动态调整大小。第二个没有正确对齐。

我能做些什么来解决这个问题？什么是常见的模式？

![更新的图像](../Images/45516a21be5c4d45341a495662ad1966.png)

现在我对中间的视图有另一个问题。当标题变大时，它不会下降。有什么解决办法吗？

更新：正如你所说，我在 layoutSubviews 中解决了它。非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T14:25:39.320

您需要使用某种方法动态计算表格视图单元格的高度。

我个人将 twitter 用于类似的 tableview 格式，只需为您的自定义单元格创建单元格 .h .m，

[你可以在 github 上](https://github.com/iosdeveloper/TwitterFeed)找到原始示例

***特别看`(void)layoutSubviews`下面的代码***

也看看这个[教程](http://www.cimgf.com/2009/09/23/uitableviewcell-dynamic-height/)

yourcustomcell.h

```
#import <UIKit/UIKit.h>
@interface TwitterFeedCell : UITableViewCell {}
@end 
```

您的自定义 cell.m

```
 #import "TwitterFeedCell.h"
    #import <QuartzCore/QuartzCore.h>

    @implementation TwitterFeedCell

    - (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier {
        self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
        if (self) {
            [[self detailTextLabel] setLineBreakMode:UILineBreakModeWordWrap];
            [[self detailTextLabel] setNumberOfLines:NSIntegerMax];

            [[[self imageView] layer] setMasksToBounds:YES];
            [[[self imageView] layer] setCornerRadius:5.0];

            //[self setSelectionStyle:UITableViewCellSelectionStyleNone];
        }
        return self;
    }
    - (void)layoutSubviews {
        [super layoutSubviews];

        CGRect rect = [[self imageView] frame];
        rect.origin.x = 5.0;
        rect.origin.y = 5.0;
        [[self imageView] setFrame:rect];

        rect = [[self textLabel] frame];
        rect.origin.x = 60.0;
        rect.origin.y = 5.0;
        [[self textLabel] setFrame:rect];

        rect = [[self detailTextLabel] frame];
        rect.origin.x = 60.0;
        rect.origin.y = 27.0;
        [[self detailTextLabel] setFrame:rect];
    }
    @end 
```

在您的单元格标识符上调用您的自定义单元格类

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"tweets";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[TwitterFeedCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
        //cell = [[TwitterFeedCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    //cell.textLabel.text
    //cell.detailTextLabel.text
    //cell.imageView.image
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T14:21:32.253

使用此方法计算字符串的高度和宽度

```
+  (CGSize) calculateLabelHeightWith:(CGFloat)width text:(NSString*)textString
{
    CGSize maximumSize = CGSizeMake(width, 9999);
    CGSize size = [textString sizeWithFont:[UIFont fontWithName:@"HelveticaNeue-Medium" size:14]
                         constrainedToSize:maximumSize 
                             lineBreakMode:UILineBreakModeWordWrap];
    return size;
}

+ (CGSize) calculateLabelWidthOfString:(NSString*)textString withFont:(UIFont*)font
{
    CGSize maximumSize = CGSizeMake(9999, 22);
    CGSize size = [textString sizeWithFont:font
                         constrainedToSize:maximumSize 
                             lineBreakMode:UILineBreakModeWordWrap];
    return size;
} 
```

但是您仍然必须动态设置表格视图单元格的高度

为了那个原因

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return <height>;
} 
```

# php - 如何抓取 PHP 生成的图像

> ID：14339474
> 
> 赞同：-1
> 
> 时间：2013-01-15T14:06:53.687
> 
> 标签：php, image, http-headers, php-gd, google-crawlers

我有一个网站 textscloud.com
在这个网站上，我使用 PHP GD 库制作图像。这是演示的链接：

在此页面中，我允许用户下载将在其上打印文本的图像。下载链接就像

这个 download.php 文件有一个标题，用于使用 PHP GD 库制作图像并像这样下载文件

```
header("Content-type: image/png"); 
```

但谷歌并没有抓取这些图片。有谁知道解决方案？我无法将这些图像存储在服务器中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T14:20:53.427

Google 无法索引未永久存储的图像，我很确定它甚至无法索引没有上下文的图像（即不属于描述/链接页面的一部分）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T14:35:37.987

你没有提到你是*如何*喂养野兽的，所以我建议你首先通过他们的[网站管理员工具包](https://www.google.com/webmasters/tools)向谷歌提供一个站点地图。您可以专门列出要抓取的图像。谷歌提供了很好的[帮助文章](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=178636)来帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T14:56:39.917

您可以尝试：

发送缓存标头以允许缓存图像。

将实际网址重写为类似：[http](http://textscloud.com/get_img/download/VkZaU1FtUXdNVVZWVkZKT1ZWUXdPUT09.png) ://textscloud.com/get_img/download/VkZaU1FtUXdNVVZWVkZKT1ZWUXdPUT09.png （应与您的文件名标题匹配）

# teradata - Teradata Assistant 数据库资源管理器

> ID：14339475
> 
> 赞同：0
> 
> 时间：2013-01-15T14:06:54.817
> 
> 标签：teradata

我在使用 Teradata Assistant（版本 Teradata.Net 13.11.0.1）时遇到问题 问题出在 Database Explorer 窗口，因为它的长度和宽度是固定的，我无法将其调整为答案窗口和历史记录窗口。你能帮我解决这个问题吗，因为助手的宽度非常小，当我扩展数据库时，我看不到列名。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-04T17:43:07.527

听起来工具窗口的配置文件已损坏。尝试删除**DBTree.config**或**DockMgr.config**（取决于您现在使用的版本）。

这些将在：

```
C:\Documents and Settings\<username>\Application Data\Teradata\SQL Assistant 
```

或者

```
C:\Users\<username>\Roaming\AppData\Teradata\SQL Assistant 
```

# javascript - 如何在 android 2.2 浏览器上使用 javascript 检测缩放级别

> ID：14339478
> 
> 赞同：1
> 
> 时间：2013-01-15T14:07:18.160
> 
> 标签：javascript, android, zooming

我已经看到了多个关于如何检测桌面浏览器缩放级别的示例，但我似乎无法找到如何为 android 2.2 浏览器执行此操作。

此示例适用于桌面上的 chrome：

```
 function detectZoom() {
    var screenCssPixelRatio = (window.outerWidth - 8) / window.innerWidth;
    zoomLevel = 0;

    if (screenCssPixelRatio >= .46 && screenCssPixelRatio <= .54) {
      zoomLevel = "-4";
    } else if (screenCssPixelRatio <= .64) {
      zoomLevel = "-3";
    } else if (screenCssPixelRatio <= .76) {
      zoomLevel = "-2";
    } else if (screenCssPixelRatio <= .92) {
      zoomLevel = "-1";
    } else if (screenCssPixelRatio <= 1.10) {
      zoomLevel = "0";
    } else if (screenCssPixelRatio <= 1.32) {
      zoomLevel = "1";
    } else if (screenCssPixelRatio <= 1.58) {
      zoomLevel = "2";
    } else if (screenCssPixelRatio <= 1.90) {
      zoomLevel = "3";
    } else if (screenCssPixelRatio <= 2.28) {
      zoomLevel = "4";
    } else if (screenCssPixelRatio <= 2.70) {
      zoomLevel = "5";
    } else {
      zoomLevel = "0";
    }

    return zoomLevel;
} 
```

任何帮助表示赞赏。

# c# - 用户错误警报

> ID：14339487
> 
> 赞同：0
> 
> 时间：2013-01-15T14:07:44.927
> 
> 标签：c#, asp.net

我正在使用 VS2010（使用 C#）。我有一个在线申请。我有 2 个错误表单设置，如果用户遇到错误，他们将被重定向到。我有一个 global.asax.cs 文件，我有代码设置，`Application_Error`以便向我发送电子邮件，让我知道用户收到了错误。我的问题是每次表单加载时我都会收到一封电子邮件。应该只在发生错误时。这是我在`global.asax.cs`文件中的代码：

```
protected void Application_Error(object sender, EventArgs e)
{
    if (HttpContext.Current.Server.GetLastError() != null)
    {
        Exception myException = HttpContext.Current.Server.GetLastError().GetBaseException();

        // Create the Outlook application by using inline initialization.
        Outlook.Application oApp = new Outlook.Application();

        Outlook.MailItem email = (Outlook.MailItem)(oApp.CreateItem(Outlook.OlItemType.olMailItem));

        email.Recipients.Add(fake@fakeemail.com);

        email.Subject ="Error in COF page " + Request.Url.ToString();

        string message = string.Empty;

        message +="<b>Message</b><br />" + myException.Message + "<br />";

        message +="<b>StackTrace</b><br />" + myException.StackTrace + "<br />";

        message +="<b>Query String</b><br />" + Request.QueryString.ToString() + "<br />";

        email.Body = message;

        email.Send();

         //Clear out any lingering errors after they have been reported. 
        Server.ClearError();
    }
} 
```

# linux - Linux shell 脚本 - 在文件的第一行中搜索字符串（日期）并将其复制到新文件中？

> ID：14339494
> 
> 赞同：1
> 
> 时间：2013-01-15T14:08:02.230
> 
> 标签：linux, string, shell

如何在文件的第一行搜索字符串（并且该字符串恰好是日期）并将其复制到新文件中？

我有我的文件的第一行：

```
START,11/12/2012 19:30,,Start 'suite_ABN_R71',Test 'suite_ABN_R71' started, 
```

我想要的字符串是“ `11/12/2012`”。

对于不同的文件，文件中的日期是不同的。因此，如果有意义的话，我不能只搜索 11/12/2012。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T14:10:27.577

你需要类似的东西

```
head -n1 -q <list of files> | grep '11/12/2012' > <new filename> 
```

`sed`如有必要，您可以将其通过管道。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T14:21:23.983

假设文件总是以`START,`我会做

```
head -1 filename | cut -c7-16 > newfile 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T15:20:20.300

如果您希望正则表达式匹配您格式中的日期，您可以使用：

```
grep -oP '(?<=,)(0\d|1[012])/([012]\d|3[01])/\d{4}(?= )' 
```

# parallel-processing - 并行进程未更新 WPF 集合列表

> ID：14339497
> 
> 赞同：0
> 
> 时间：2013-01-15T14:08:14.800
> 
> 标签：parallel-processing, task

在我的 WPF 应用程序中，我有一个使用 ObservableCollection 集合填充的数据网格。假设我在网格中有这样的 10 个学生数据。每个学生都能够进行 2 项长时间运行的工作或流程，并将流程的状态更新回网格。我想同时进行这两个过程。所以我使用了 Task 和 Parallel.Invoke 方法。工作流程如下。

1.  我在网格中填充了学生数据集合。
2.  我点击了一个开始按钮。
3.  在开始按钮的单击事件中，我执行了以下代码。

    ```
     foreach (Student stud in StudentLists)
        {
            stud.Status = "started..";
            Task.Factory.StartNew(() => StartProcess(stud));
        } 
    ```

4.  在启动过程中，

    ```
    Parallel.Invoke(() =>
        {                
            MarkService ms = new MarkService(stud_data); 
            Student s = ms.GetMarkProcess(); // This will return the stud_data in the above line

            Student studitem = StudentLists.Where(x => x.RollID == s.RollID).FirstOrDefault(); // find the student in the grid
            if (studitem != null)
            {                    
                studitem.Status = "Mark Got it";  // if find, updating the status
            }
        },                              

        () =>
        {
            SentMarks(poll); // this is another method to be executed parallel
        } 
        ); 
    ```

当执行所有 10 个学生的过程时，网格中的每个学生都变成了相同的数据。或者网格中只有 2 或 1 名学生显示状态“Mark Got it”。其他行仅显示“已开始..”状态。

为什么这不更新集合。

我使用了 INotofyPropertyChanged 并在属性更新时引发了事件。在 XAML 中，每个绑定都以双向模式使用。

没有错误。但是学生收藏中的 1 或 2 个项目有时会更新。有时，该集合包含所有 9 个项目的最后一个学生数据。

它不会更新网格中的确切学生对象。我的代码有什么问题？

在这种情况下有什么帮助？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T15:49:03.237

这里的问题是您从另一个线程引用 UI 控件。您应该创建一个内存数据结构，网格可以将其用作 DataSource（任何实现 IEnumerable 的东西）。我建议将 ConcurrentBag 数据结构用于并行代码 ( [http://msdn.microsoft.com/en-us/library/dd997305.aspx](http://msdn.microsoft.com/en-us/library/dd997305.aspx) )。更新 ConcurrentBag 中的每个学生记录后，您将网格的数据源设置为该包。

# php - 解析没有换行符的自定义 [CODE] 标签，用段落格式化所有其他文本

> ID：14339500
> 
> 赞同：0
> 
> 时间：2013-01-15T14:08:25.330
> 
> 标签：php, preg-replace

我已经玩了几个小时了，并且很好奇其他人对解决这个问题的最佳方法的看法。

我正在制作各种 CMS，我希望能够发布代码片段。

我希望能够用解释性文本段落围绕所述片段。

我想要的是：

*   要格式化为段落的解释性文本，即 str_replace `/n`for `</p><p>`。
*   标记中包含的任何内容都`[CODE][/CODE]`不会被格式化，并且已经`htmlspecialchars()`应用​​于它以便不执行任何代码。

我可以通过使用匹配文本的 preg_replace_callback 并在回调函数中应用 htmlspecialchars 来实现后一点。

我想对于前一点，我可以简单地做逆表达式，但这似乎是错误的做法。

有人可以建议吗？

编辑

示例代码：到目前为止我所拥有的..

```
function format_it($matches)
{
return "<pre class='prettyprint'>" . htmlspecialchars($matches['1']) . "</pre>";
}

$content=preg_replace_callback('#\[code\](.*)\[/code\]#isU', "format_it", $content); 
```

# ios - UIPickerView 导致崩溃

> ID：14339505
> 
> 赞同：4
> 
> 时间：2013-01-15T14:08:41.297
> 
> 标签：ios, xcode, uipickerview

每当我尝试在我的应用程序中选择 UIPickerView 时，它都会崩溃。

我已经实现了所有委托方法，但收到此错误：

```
2013-01-15 13:57:56.176 tracker[16142:c07] *** Assertion failure in -[UITableViewRowData rectForRow:inSection:], /SourceCache/UIKit_Sim/UIKit-2372/UITableViewRowData.m:1630
2013-01-15 13:57:56.177 tracker[16142:c07] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'request for rect at invalid index path (<NSIndexPath 0x918c700> 2 indexes [0, 0])'
*** First throw call stack:
(0x1c97012 0x10d4e7e 0x1c96e78 0xb6af35 0x2050c0 0xc892e 0x457fc6 0x457eba 0x7ba5d 0x7e03b 0x2e689a 0x2e59db 0x2e711f 0x2e9d6d 0x2e9cec 0x2e1a68 0x4efc2 0x4f4a3 0x2d3aa 0x1ecf8 0x1bf2df9 0x1bf2ad0 0x1c0cbf5 0x1c0c962 0x1c3dbb6 0x1c3cf44 0x1c3ce1b 0x1bf17e3 0x1bf1668 0x1c65c 0x29bd 0x28e5 0x1)
libc++abi.dylib: terminate called throwing an exception 
```

以下是实现的委托方法：

```
- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)thePickerView {

    return 1;
}

- (NSInteger)pickerView:(UIPickerView *)thePickerView numberOfRowsInComponent:(NSInteger)component { 
    return [classes count];
}

- (NSString *)pickerView:(UIPickerView *)thePickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component {
    return [classes objectAtIndex:row];
}

- (void)pickerView:(UIPickerView *)thePickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component {

    NSLog(@"Selected Class: %@. Index of selected color: %i", [classes objectAtIndex:row], row);
} 
```

'classes' 是一个 NSMutableArray。

以下是视图的连接方式：

![在此处输入图像描述](../Images/aed5f439e2e6972b4913fa2f40d78137.png)

控制的视图称为 MemberViewController。

我的接口声明包含以下内容：

```
@interface MemberViewController : UIViewController <UIPickerViewDataSource, UIPickerViewDelegate> 
```

我究竟做错了什么？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T14:14:43.880

我在以前的应用程序中遇到了这个问题，我快速查找并[在选择器视图上的断言失败中找到了这个答案](https://stackoverflow.com/questions/12672318/assertion-failure-on-picker-view)

这绝对是一个错误，除非`memberPicker`被声明为一个`UITableView`对象。

此代码可能会修复它：

```
- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component
{
    if ([classes count] == 0)
        return 1;
     return [classes count];
} 
```

你在 BTW 上运行什么版本的 Xcode 和 iOS？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-15T14:39:44.203

我的应用程序也有类似的问题。IIRC，用作数据源的数组已被声明为弱，并且它正在被释放，`didSelectRow`因此收到时数组计数为 0（声明它为强解决了该问题）。正如 Rohan Kapur 所指出的，有一个与从该方法返回 0 相关的错误。

我建议在两者的开头记录数组计数，`numberOfRowsInComponent`并`didSelectRow`确保“类”确实包含您期望的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-06T07:56:02.093

检查这篇文章<[选择器视图上的断言失败](https://stackoverflow.com/questions/12672318/assertion-failure-on-picker-view/12684155#12684155)>？

```
- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:       (NSInteger)component
{
    if ([classes count] == 0)
        return 1;
     return [classes count];
}

- (UIView *)pickerView:(UIPickerView *)pickerView viewForRow:(NSInteger)row  forComponent:   (NSInteger)component reusingView:(UIView *)view {
   if ([classes count] == 0)
       return nil;
} 
```

# ruby-on-rails - 在 form_for 字段中使用，该字段不在对象中

> ID：14339506
> 
> 赞同：4
> 
> 时间：2013-01-15T14:08:43.960
> 
> 标签：ruby-on-rails, forms, params, form-for

我有这样的形式：

```
= form_for @order do |f|
  .field
    = f.label :city , "Использовать данные вашего профиля*: "
    = f.radio_button :usercase, true, :required => true
    = f.radio_button :usercase, false, :required => true
  .field
    = f.label :city , "Город*: "
    = f.text_field :city, :placeholder => "Minsk", :required => true 
```

但是字段 :usercase 没有出现在@order 中。我如何将 radio_button 作为参数发送到我的控制器方法？现在我得到：未定义的方法“用户案例”如何发送用户案例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T14:18:39.263

在您的`Order`模型中，您可以添加`usercase=`处理数据的方法。像这样。

```
def usercase=(data)
  # DO SOMETHING WITH data
end 
```

变量数据将包含`usercase`字段中的值。

// attr_accessor 将定义`usercase`，`usercase=`但`usercase=`无论如何您都必须重新定义，因为您需要对数据做一些事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T14:18:18.537

尝试在模型中定义`usercase`为虚拟属性`Order`

```
class Order < ActiveRecord::Base
  attr_accessor :usercase
  ...
end 
```

检查[演员](http://railscasts.com/episodes/16-virtual-attributes)表以获取更多信息。

# python - 在python中从静态属性创建对象

> ID：14339511
> 
> 赞同：2
> 
> 时间：2013-01-15T14:08:59.227
> 
> 标签：python, properties, static, object-construction

我有一个 Category 类，每个类别都有不同的名称，类别的名称可以是未知的，好的和坏的，所有类别共享相同的行为，所以我不想为每种类别创建子类，问题当我试图以这种方式创建不同的类别时出现：

```
Category.GOOD 
```

此语句应返回一个类别对象，其名称设置为“好”，因此我尝试以下操作：

```
class Category(object):                                                                                                            

  def __init__(self, name):                                                                                                      
      self.name = name                                                                                                           

  @property
  def GOOD(self):
      category = Category(name='good')                                                                                           
      return category                                                                                                            

  @property
  def BAD(self): 
      category = Category(name='bad')                                                                                            
      return category 
```

然后我创建并使用具有以下输出的类别：

```
c = Category.GOOD
c.name
AttributeError: 'property' object has no attribute 'name' 
```

意识到这不起作用，我尝试了类似 java 的方法：

```
class Category(object):                                                                                                          

    GOOD = Category(name='good')
    BAD = Category(name='bad')                                                                                                   

    def __init__(self, name):
        self.name = name 
```

我在这里得到的是一个未定义的名称“类别”错误，所以我的问题是是否有一种 Python 的方式来创建这样的类别对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T14:29:29.563

您不能对属性执行此操作；您要么必须使用 a `classmethod`，要么为此创建自己的[描述符](http://docs.python.org/2/reference/datamodel.html#implementing-descriptors)：

```
class classproperty(property):
    def __get__(self, inst, cls):
        return self.fget(cls) 
```

我在`property`这里滥用装饰器；它也实现了`__set__`，`__del__`但为了方便起见，我们可以忽略这里的那些。

然后使用它代替`property`：

```
class Category(object):
    def __init__(self, name):
        self.name = name

    @classproperty
    def GOOD(cls):
        return cls(name='good')

    @classproperty
    def BAD(cls):
        return cls(name='bad') 
```

现在访问`Category.GOOD`作品：

```
>>> Category.GOOD
<__main__.Category object at 0x10f49df50>
>>> Category.GOOD.name
'good' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T14:15:54.190

您可能想使用类方法：

```
class Category(object):

    @classmethod
    def GOOD(cls):
        category = cls(name='GOOD')
        return category 
```

现在你可以做`c = Category.GOOD()`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T14:14:30.763

我会为此使用模块变量。考虑你有模块`category.py`：

```
class Category(object):
    # stuff... 
```

现在您将两个全局对象放入其中：

```
GOOD = Category(name='good')
BAD = Category(name='bad') 
```

你可以这样使用它：

```
from path.to.category import GOOD, BAD 
```

我并不是说这是*pythonic*，但我认为这种方法很优雅。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T14:21:20.803

您不能在该类定义本身内使用类定义的要点。因此，实现您想要的最直接的方法是使用如下所示的类/静态方法，甚至是包常量。

```
class Category(object):
    def __init__(self, name):
        self.name = name

    @classmethod
    def GOOD(cls):
        return Category(name='good')

    @classmethod
    def BAD(cls):
        return Category(name='bad')

print Category.GOOD().name 
```

或者

```
class Category(object):
    def __init__(self, name):
        self.name = name

    @staticmethod
    def GOOD():
        return Category(name='good')

    @staticmethod
    def BAD():
        return Category(name='bad')

print Category.GOOD().name 
```

# wpf - 在 MVVM 中绑定滑块值

> ID：14339515
> 
> 赞同：2
> 
> 时间：2013-01-15T14:09:16.373
> 
> 标签：wpf, mvvm, binding, slider

我在 MVVM 中的滑块值数据绑定有问题。当价值发生变化时，我的预期价值没有实现。我该如何解决我的问题？
我有一个列表框、一个滑块和一个文本块。列表框绑定到 ListImage，滑块值和文本块文本绑定到 CurrentImage。带有命令的一键导航 lisbox 项目。CurrentImage 是视图模型中的一个属性。当我更改滑块的设置器时，设置器的新值放入滑块设置器的当前值并且列表框的排列被破坏。例如，当我的滑块设置器的值设置为 50 并且我再次将滑块的值更改为 10 时。我的滑块值从 10 导航到 50，而不是更多。它必须导航整个列表框，但不能。有我的代码：

XAML：

```
<TextBlock Text="{Binding CurrentImage.Index}"/>
<Slider Height="23" HorizontalAlignment="Left" Margin="12,305,0,0" Name="slider1" VerticalAlignment="Top" Width="479" Maximum="{Binding ListImage.Count, Mode=OneTime}"
              Value="{Binding CurrentImage.Index, Mode=TwoWay}"
              SmallChange="1" />
<Button Content="{Binding DisplayPlay}" Command="{Binding PlayCommand}" Height="23" HorizontalAlignment="Left" Margin="507,305,0,0" Name="button1" VerticalAlignment="Top" Width="75" />
<ListBox Height="129" HorizontalAlignment="Left"  Margin="12,334,0,0" ItemsSource="{Binding ListImage}" SelectedItem="{Binding CurrentImage,Mode=TwoWay}" 
                 VerticalAlignment="Top" Width="472"> 
```

视图模型：

```
public class MainViewModel : ViewModelBase
{
    public ICommand PlayCommand { get; set; }
    private DispatcherTimer _Timer;
    public ImageDTO Image { get; set;}
    DataAccess AC = new DataAccess();
    public byte[] Bytes { get; set; }
    public MainViewModel()
    {
        ListImage = AC.OpenImages();
        CurrentImage = ListImage[0];
        Bytes = CurrentImage.Bytes;
        this.PlayCommand = new DelegateCommand(Play, CanPlay);
        DisplayPlay = "Play";
        _Timer = new DispatcherTimer();
        _Timer.Interval = new TimeSpan(0, 0, 0, 0, 2000 / 30);
        _Timer.Tick += new EventHandler(timer_Tick);
    }

    private string _DisplayPlay;
    public string DisplayPlay
    {
        get { return _DisplayPlay; }
        set
        {
            if (_DisplayPlay != value)
            {
                _DisplayPlay = value;
                OnPropertyChanged("DisplayPlay");
            }
        }
    }

    private List<ImageDTO> _ListImage;
    public List<ImageDTO> ListImage
    {
        get { return _ListImage; }
        set
        {
            if (_ListImage != value)
                _ListImage = value;
                OnPropertyChanged("ListImage");
        }
    }

    private ImageDTO _CurrentImage;
    public ImageDTO CurrentImage
    {
        get { return _CurrentImage; }
        set
        {
            if (_CurrentImage != value)
            {
                _CurrentImage = value;
                OnPropertyChanged("CurrentImage");
            }
        }
    }

    public bool CanPlay(object parameter)
    {
        return true;
    }
    public void Play(object parameter)
    {
        if (DisplayPlay == "Play")
        {
            DisplayPlay = "Pause";
            _Timer.Start();
        }
        else
        {
            _Timer.Stop();
            DisplayPlay = "Play";
        }
    }

    private void timer_Tick(object sender, EventArgs e)
    {
        int position = ListImage.FindIndex(x => x.Index == CurrentImage.Index);
        position++;
        if (position == ListImage.Count)
        {
            position = 0;
        }
        else
        {
            CurrentImage = ListImage[position];
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T14:31:29.533

也许这就是你想要的：

```
<StackPanel>
    <ListBox x:Name="ImageListBox" IsSynchronizedWithCurrentItem="True">
        <ListBoxItem>Image1</ListBoxItem>
        <ListBoxItem>Image2</ListBoxItem>
        <ListBoxItem>Image3</ListBoxItem>
        <ListBoxItem>Image4</ListBoxItem>
    </ListBox>
    <Slider Value="{Binding ElementName=ImageListBox, Path=SelectedIndex}" 
            Maximum="{Binding ElementName=ImageListBox, Path=Items.Count}"/>
</StackPanel> 
```

您可能希望比本示例更好地处理最大值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T18:50:28.113

在您的代码中，滑块的值绑定到 CurrentImage 索引，因此当您更改滑块的值时，当前图像的索引将被更改。假设当前图像索引为 5，则滑块的值为 5，那么如果将滑块指针移动到 10 之类的位置，则当前图像索引将设置为 10，这意味着您当前的图像将被修改，所以这意味着它不会导航到列表的第 10 个元素，但它会修改图像的索引（索引为 5）并将其索引设置为 10，换句话说，您将不再拥有索引为 5 和 2 的图像您的图像将具有相同的索引 (10)。

作为一种解决方案，您可以在视图模型中添加另一个属性，如“Index”，并将滑块值绑定到该属性，因此在 get 方法中返回列表中所选项目的索引，并在 set 方法中更改所选项目列表并调用 OnPropertyChanged 并将“Index”作为参数传递。

# cmake - cmake 找到包，但不添加到包含路径

> ID：14339518
> 
> 赞同：1
> 
> 时间：2013-01-15T14:09:19.633
> 
> 标签：cmake, include-path

我正在尝试编译（在 FreeBSD 上，如果重要的话）一个使用 cmake 的程序。`CMakeLists.txt`包含行

```
find_package(GLUT REQUIRED)

include_directories(${CMAKE_CURRENT_BINARY_DIR} ${OPENGL32_INCLUDE_DIRS} ${GLUT_INCLUDE_DIRS}) 
```

并且 cmake 没有报告任何错误，但是当我`make`之后运行时，我得到

```
[…]
/usr/bin/c++  -fopenmp -I/path/build -o CMakeFiles/scriptbots.dir/GLView.cpp.o -c /path/GLView.cpp
[…]
In file included from /path/GLView.cpp:2:
/path/GLView.cpp:10:21: error: GL/glut.h: No such file or directory
[…] 
```

GL/ glut.h存在于 中`/usr/local/include`，它没有作为.`-I``/usr/bin/c++`

当我明确添加`-I/usr/local/include`到`CMakeFiles/scriptbots.dir/flags.make`. 我需要更改哪些内容才能在不手动更改标志文件的情况下编译项目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T14:15:36.327

根据其文档，`FindGLUT`设置 variable `GLUT_INCLUDE_DIR`，而不是`GLUT_INCLUDE_DIRS`. 在您的 CMakeList 中更改它，它应该可以工作。

# matlab - 生成一个由 100 行和 100 列组成的随机矩阵，这些矩阵正态分布，均值为 0，标准差为 25

> ID：14339520
> 
> 赞同：-1
> 
> 时间：2013-01-15T14:09:28.227
> 
> 标签：matlab, probability, matlab-guide

> **可能重复：**
> [如何使用 matlab 创建正态分布](https://stackoverflow.com/questions/4970679/how-to-create-normal-distribution-by-using-matlab)

生成一个由 100 行和 100 列组成的随机矩阵，这些矩阵正态分布，均值为 0，标准差为 25。我做了随机矩阵 mat=rand(100,100)，但后来我不知道均值为 0 和标准差的正态分布。

下一部分是这个矩阵greeter中给定数字比25的概率是多少。据我了解，每次运行脚本时概率的数量应该是相同的。我可以使用兰迪吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T14:21:46.687

你的问题有两个部分。我的回答也是：

1.  如何生成大小为 100x100 的矩阵，其中每个条目是正态分布的，均值 = 0 和标准 = 25：

    你应该使用[`randn`](http://www.mathworks.com/help/matlab/ref/randn.html)：

    ```
    mat = randn(100,100) * 25; 
    ```

2.  `mat`进入大于的概率是多少`25`：

    您可以使用以下方式从该概率中**采样**`mat`：

    ```
    prob = mean( mat(:) > 25 ); 
    ```

    **但是**，**并不是**事件“进入大于”`prob`的概率。它只是该概率的一个**样本**。**`mat``25`**

# javascript - 使用 underscore.js 过滤数组

> ID：14339523
> 
> 赞同：4
> 
> 时间：2013-01-15T14:09:38.860
> 
> 标签：javascript, underscore.js

我试图过滤一些对象以更好地理解 JS，我正在使用 underscore.js

我来自 C# 背景并习惯于 LINQ，但下划线并不完全相同。

你能帮我根据定义的测试过滤掉这个数组吗，我遇到的问题是数组上的数组属性。`Where`运算符与我通常用来过滤项目的 C# 不同。

```
products = [
       { name: "Sonoma", ingredients: ["artichoke", "sundried tomatoes", "mushrooms"], containsNuts: false },
       { name: "Pizza Primavera", ingredients: ["roma", "sundried tomatoes", "goats cheese", "rosemary"], containsNuts: false },
       { name: "South Of The Border", ingredients: ["black beans", "jalapenos", "mushrooms"], containsNuts: false },
       { name: "Blue Moon", ingredients: ["blue cheese", "garlic", "walnuts"], containsNuts: true },
       { name: "Taste Of Athens", ingredients: ["spinach", "kalamata olives", "sesame seeds"], containsNuts: true }
    ];

it("given I'm allergic to nuts and hate mushrooms, it should find a pizza I can eat (functional)", function () {

      var productsICanEat = [];

      //This works but was hoping I could do the mushroom check as well in the same line
      var noNuts = _(products).filter(function (x) { return !x.containsNuts;});

      var noMushrooms = _(noNuts).reject(function(x){ return !_(x.ingredients).any(function(y){return y === "mushrooms";});});

      console.log(noMushrooms);

      var count = productsICanEat.length;
      expect(productsICanEat.length).toBe(count);
  }); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-15T14:14:19.007

您只需`!`要从`reject`回调中删除 ，使其看起来像这样：

```
var noMushrooms = _(noNuts).reject(function(x){ 
    return _(x.ingredients).any(function(y){return y === "mushrooms";});
}); 
```

否则你会拒绝那些*不含*蘑菇的，而不是那些含有蘑菇的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-15T15:19:46.180

实现这一点的更简洁的方法是使用下划线的 chain() 函数：

```
var noMushrooms = _(products).chain()
    .filter(function (x) { 
        return !x.containsNuts;})
    .reject(function(x){ 
        return _(x.ingredients).any(function(y){
            return y === "mushrooms";
        });
    })
    .value(); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-15T14:59:24.280

我设法将我的解决方案全部包含在一个过滤器调用中，所以我想我会发布它：

```
products = [
       { name: "Sonoma", ingredients: ["artichoke", "sundried tomatoes", "mushrooms"], containsNuts: false },
       { name: "Pizza Primavera", ingredients: ["roma", "sundried tomatoes", "goats cheese", "rosemary"], containsNuts: false },
       { name: "South Of The Border", ingredients: ["black beans", "jalapenos", "mushrooms"], containsNuts: false },
       { name: "Blue Moon", ingredients: ["blue cheese", "garlic", "walnuts"], containsNuts: true },
       { name: "Taste Of Athens", ingredients: ["spinach", "kalamata olives", "sesame seeds"], containsNuts: true }
    ];

 it("given I'm allergic to nuts and hate mushrooms, it should find a pizza I can eat (functional)", function () {

      var productsICanEat = [];

      productsICanEat = _(products).filter(function (x) { return !x.containsNuts && !_(x.ingredients).any(function(y){return y === "mushrooms";});});

      expect(productsICanEat.length).toBe(1);
  }); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-02-20T17:46:27.500

这将给出所需的结果

```
var no_nuts = _.filter(products,function(item) {
         return !item.containsNuts;
       });

var no_mushroom = _.reject(no_nuts,function(item) {
        return _.any(item.ingredients,function(item1) {
            return item1 === "mushrooms"
        }); 
     });

console.log(no_mushroom); 
```

`reject()`与 , 相反`filter()`，`any()`它等效于数组的某些方法，当数组中的任何元素通过回调时返回 true 时返回 true。

# html - 三星 Galaxy s3 4.1.1 和 4.1.2 上的 Canvas globalCompositeOperation 问题

> ID：14339524
> 
> 赞同：3
> 
> 时间：2013-01-15T14:09:47.097
> 
> 标签：html, canvas, globalcompositeoperation

我正在尝试为 android 浏览器创建一个小型绘图应用程序。但是，当我尝试使用 globalCompositeOperation = "destination-out" 擦除位图时遇到问题，它根本不适用于三星 Galaxy S3

完全相同的代码在带有 android 4.1.1 的 HTC ONE X 上运行良好

我在这里[http://code.google.com/p/android/issues/detail?id=39183](http://code.google.com/p/android/issues/detail?id=39183)发现了类似的问题，但没有解决方案。该示例的行为与我在 SGS3 和 ONEx 上的代码完全相同

知道有什么问题吗？它是 SGS3 唯一的问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-16T11:34:31.613

我也遇到了，但是当我使用 toDataURL 时，我得到的图像是正确的。可能是因为浏览器目前没有渲染画布，所以我更改了 css，将其边距更改为 0px 和 1px，然后它就可以工作了。

```
$(this.canvas).css('margin-right', $(this.canvas).css('margin-right') == "0px" ? "1px" : "0px"); 
```

# bash - cut 或 grep 捕捉特定模式

> ID：14339525
> 
> 赞同：1
> 
> 时间：2013-01-15T14:09:47.130
> 
> 标签：bash, sorting, grep, cut

我有这样的行

```
5.7015   40828240     +152             -> explode(string(1), string(21)) /f.inc:467
5.7020   40834040     +192             -> explode(string(1), string(21)) /f.inc:467
5.7020   40834088     +160             -> explode(string(1), string(21)) /f.inc:467
5.7023   40834392     +192             -> explode(string(1), string(21)) /f.inc:467
5.7027   40835000     +152             -> explode(string(1), string(21)) /f.inc:467 
```

我想按列对这样的输出进行排序，其中数字从加号开始（也完全相同的列中的数字有时可以从减号开始）。

所以不知何故，我需要按第三列排序输出。我已经尝试过`cut`了，但我无法达到结果

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T14:14:05.193

使用 coreutils 排序，您可以这样做（使用一般数字排序顺序）：

```
sort -k3,3g file 
```

输出：

```
5.7015   40828240     +152             -> explode(string(1), string(21)) /f.inc:467
5.7027   40835000     +152             -> explode(string(1), string(21)) /f.inc:467
5.7020   40834088     +160             -> explode(string(1), string(21)) /f.inc:467
5.7020   40834040     +192             -> explode(string(1), string(21)) /f.inc:467
5.7023   40834392     +192             -> explode(string(1), string(21)) /f.inc:467 
```

### 编辑 - 适应新的输入

如果输入如[OP 所列](https://dl.dropbox.com/u/7017985/1.xt.txt)，我认为需要进行一些预过滤来加入相关行，类似于`sed 'N; /\n *>=>/ s// >=>/; P; D'`. 综合起来：

```
< 1.xt.txt sed 'N; /\n *>=>/ s// >=>/; P; D' | sort -k3,3g 
```

输出：

```
TRACE START [2013-01-15 13:17:48]
    0.0149    2268328       +0       -> realpath(string(36)) /htdocs/lib/functions.inc:2 >=> '/htdocs/lib'
    0.0016     942488      +80     -> header(string(38)) /htdocs/scripts/univexport.php:8 >=> NULL
    0.0016     941816     +160     -> error_reporting(long) /htdocs/scripts/univexport.php:4 >=> 22527
    0.0016     942008     +192     -> set_time_limit(long) /htdocs/scripts/univexport.php:5 >=> TRUE
    0.0148    2268328     +264       -> dirname(string(50)) /htdocs/lib/functions.inc:2 >=> '/htdocs/lib'
    0.0016     942408     +400     -> ini_set(string(12), string(5)) /htdocs/scripts/univexport.php:6 >=> '-1'
    0.0188    2651104  +382776       -> require_once(1/htdocs/lib/functions_common.inc) /htdocs/lib/functions.inc:2
    0.0014     941656  +941656   -> {main}() /htdocs/scripts/univexport.php:0
    0.0147    2268064 +1325576     -> include_once(/htdocs/lib/functions.inc) /htdocs/scripts/univexport.php:9 
```

标题被排序到顶部，因为它被认为是一个字符串，一般的数字顺序决定了这样的顺序（来自 GNU 排序手册）：

> *   不以数字开头的行（都被认为是相等的）。
>     
>     
> *   NaN（“非数字”值，在 IEEE 浮点算术中）以一致但与机器相关的顺序。
>     
>     
> *   负无穷大。
>     
>     
> *   以数字升序排列的有限数字（-0 和 +0 相等）。
>     
>     
> *   加上无穷大。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T14:15:40.150

可以使用 -k 标志告诉 sort 对特定列进行排序。

```
sort -g -k3 file 
```

将在第三列排序。-t 可以更改默认为空格的字段分隔符

编辑：

添加了 -g 选项，强制排序使用一般数字排序

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T14:20:06.110

```
awk '{print $3}' file| sed s'/+//' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T14:22:57.513

我假设您在“data.txt”中获得了数据。

然后只需使用

```
sort +2 -n data.txt 
```

这将从第 3 列开始对您的文件进行排序。

# c++ - 使用 libtorrent 优先排序 torrent 下载序列

> ID：14339532
> 
> 赞同：1
> 
> 时间：2013-01-15T14:10:06.623
> 
> 标签：c++, bittorrent, libtorrent

假设我有 2 个以上的客户端（由我开发）全部使用 libtorrent（[http://www.rasterbar.com/products/libtorrent/manual.html#queuing](http://www.rasterbar.com/products/libtorrent/manual.html#queuing)）

我是否可以有效地优先考虑从其他客户端下载文件，以便他们从文件的开头到结尾下载文件的片段/块（无论是什么种子术语），而不是完全按照随机顺序？

（当然，出于可用性和性能的原因，我允许一些“多路复用”/“交织”片段，但这里的目标是从文件开头到结尾尽可能线性和快速地下载）

我在这里考虑的目标显然是快速预览文件。如何使用 libtorrent / 可能是其他 C++ 种子库最有效地做到这一点？

（我对使用非二进制语言（如 Java 或 Python）的 torrent 实现不太感兴趣——出于性能和安全性的原因，我需要机器代码，因此，C、C++ 或可能的 D 都符合要求）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T06:14:23.580

您当然可以使用 和 对片段和文件进行优先级`torrent_handle::prioritize_pieces()`排序`torrent_handle::prioritize_files()`。请参阅[文档](http://www.rasterbar.com/products/libtorrent/manual.html#torrent-handle)。

但是，这还不足以按顺序下载。为此，您可以使用`torrent_handle::set_sequential_download()`. 这将按顺序发出新的工件请求。请记住，满足请求所需的时间会因您与哪个对等方交谈而有很大差异。按顺序提出请求并不一定意味着按顺序接收碎片。

还有另一种机制可以尝试这样做。`torrent_handle::set_piece_deadline()`用于设置一个片段的目标完成时间。这些片段被认为是时间关键片段，它们按截止日期排序，最快的对等节点用于从这些片段中请求块，并尝试按截止日期顺序下载它们。

现在，我还觉得您希望两个独立的客户端（可能在不同的机器上运行）来协调他们下载的部分。是对的吗？目前还不完全清楚你在问什么，但没有简单的方法可以让 libtorrent 做到这一点。

您可以为 libtorrent 编写一个插件，为这些客户端实现一个新的扩展消息以进行聊天和协调，这可以通过将其他客户端的优先级设置为 0 来取消选择其他客户端正在下载的某些片段。

# mysql - 根据时间间隔使用 MAX(price) 或 MAX(date) 对产品进行分组

> ID：14339535
> 
> 赞同：2
> 
> 时间：2013-01-15T14:10:21.460
> 
> 标签：mysql, date, group-by, max, min

我一直在寻找2天的答案，但仍然一无所获。请帮我。

我有一个包含产品、产品价格和价格注册日期的数据库：

```
product_id | price | date
-------------------------
    1      | 8.95  | 2012-12-01
    2      | 3.40  | 2012-12-01
    1      | 9.05  | 2012-12-19
    3      | 2.34  | 2012-12-24
    3      | 2.15  | 2012-12-01
    1      | 8.80  | 2012-12-19
    1      | 8.99  | 2012-12-02
    2      | 3.45  | 2012-12-02 
```

请注意，同一天的产品可能具有不同的价格值（第 3 行和第 6 行）。这是因为单一产品有许多供应商。数据库上也有一个供应商列，但我发现它与解决方案无关。如果我错了，您可以将其添加到解决方案中。

基本上我想要的是编写一个返回两个组合数据集的查询，如下所示：

*   第一套是按上个月插入的产品的最低价格制作的。由于今天是 1 月 15 日，查询应读取第 3、4 和 6 行，应用最低价格，并仅返回第 4 和第 6 行，均包含该产品上个月的最低价格。
*   第二套是最后插入的产品，上个月没有注册价格。即，对于第一组中未显示的产品，查询应搜索最后插入的产品。

我希望这很清楚。如果不是，请再问我。

该数据库的查询结果应该是：

```
product_id | price | date
-------------------------
    1      | 8.80  | 2012-12-19 <-Min price for product 1 on last month
    3      | 2.34  | 2012-12-24 <-Min price for product 3 on last month
    2      | 3.45  | 2012-12-02 <-No reg for product 2 on last month, show last reg. 
```

我已经尝试了所有方法：UNION，（DATE_SUB（CURDATE（），INTERVAL 1 MONTH），MIN（价格），MAX（日期）等。没有任何效果。我现在不知道在哪里搜索，请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T14:39:55.977

```
(SELECT product_id, MIN(price), date
FROM products
WHERE date + INTERVAL 1 MONTH > NOW()
GROUP BY product_id)
UNION
(SELECT product_id, price, MAX(date)
FROM products
WHERE product_id NOT IN (SELECT product_id
    FROM products
    WHERE date + INTERVAL 1 MONTH > NOW()
    GROUP BY product_id)
GROUP BY product_id) 
```

这应该可行，但我不确定这是最优化的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T14:23:25.190

将其分解为几个子查询：

*   上个月价格的产品，最低价格
    *   以该价格加入日期

联盟

*   上个月无价商品，最大日期
    *   在那个日期加入价格

## SQL小提琴

[这里](http://sqlfiddle.com/#!2/7f7f0/26)

## 询问

```
SELECT MINPRICE.product_id, P.date, MINPRICE.price
    FROM
    (
        -- Min price in last 31 days
        SELECT product_id, MIN(price) AS price
            FROM Prices
            WHERE DATEDIFF(CURDATE(), date) < 31
            GROUP BY product_id
    ) MINPRICE
    -- Join in to get the date that the price occured on
    INNER JOIN Prices P ON
        P.product_id = MINPRICE.product_id
        AND
        P.price = MINPRICE.price
UNION
SELECT MAXDATE.product_id, MAXDATE.date, P.price
    FROM
    (
        -- Product with no price in last 31 days - get most recent date
        SELECT product_id, MAX(date) AS date
            FROM Prices
            WHERE product_id NOT IN
            (
                SELECT product_id
                    FROM Prices
                    WHERE DATEDIFF(CURDATE(), date) < 31
            )
    ) MAXDATE
    -- join in price on that date
    INNER JOIN Prices P ON
        P.product_id = MAXDATE.product_id
        AND
        P.date = MAXDATE.date 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T14:42:09.223

像这样的东西可以解决问题：

```
SELECT * FROM ( 
    SELECT DISTINCT b.product_id, IF (c.min IS NULL,(SELECT ROUND(e.price,2) FROM products AS e WHERE e.product_id = b.product_id ORDER BY e.date DESC LIMIT 1 ),c.min) AS min, IF (c.date IS NULL,(SELECT f.date FROM products AS f WHERE f.product_id = b.product_id ORDER BY f.date DESC LIMIT 1 ),c.date) AS date, IF(c.min IS NULL,'<-No reg for product 2 on last month, show last reg.','<-Min price for product 1 on last month') as text FROM products AS b
    LEFT JOIN
        (SELECT a.product_id, round(MIN(a.price),2) AS min, a.date FROM products AS a WHERE a.date BETWEEN DATE_SUB(CURDATE(), INTERVAL 1 MONTH) AND CURDATE() GROUP BY a.product_id) AS c 
        ON (b.product_id = c.product_id)
    ) AS d
    ORDER BY d.text, d.product_id 
```

给出输出：

```
product_id|min|date|text
1|8.80|2012-12-19|<-Min price for product 1 on last month
3|2.34|2012-12-24|<-Min price for product 1 on last month
2|3.45|2012-12-02|<-No reg for product 2 on last month, show last reg. 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-15T14:28:32.903

不是我测试过，但你可以试试...

```
SELECT * FROM 
  (SELECT * FROM (
      SELECT * FROM table ORDER BY date DESC)
  as tmp GROUP BY product_id) t1
LEFT JOIN
  (SELECT * FROM (
      SELECT * FROM table WHERE date => CURDATE() ORDER BY price)
  as tmp2 GROUP BY product_id) t2
ON t1.product_id = t2.product_id 
```

# php - 如何从 PayPal 创建虚拟货币或代币？

> ID：14339538
> 
> 赞同：0
> 
> 时间：2013-01-15T14:10:38.290
> 
> 标签：php, mysql, paypal

我见过许多网站向用户提供某种虚拟货币或代币，允许他们解锁网站的特定功能。这是 PayPal API 的一部分还是这些本地解决方案。我在 google 和 git 上搜索了开源项目，但找不到任何东西。

有没有人有这方面的经验，如果有的话，对我如何创建类似的东西有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T14:34:18.863

我创建了一个预付费电话解决方案，用于存储用户可以通过 PayPal 购买的信用额度。我使用的是一个基本的“立即购买按钮”，我通过 IPN（即时付款通知）获得付款确认。我将积分存储在数据库中的用户帐户中。

您必须考虑的重要事项：

*   避免两次处理相同的付款。有时 PayPal 会向您发送两次付款通知。
*   确保您只处理“已完成”的付款。
*   使用 PayPal IPN 验证您收到的每笔付款都来自 PayPal。您有来自 PayPal 的 PHP 代码示例。
*   验证您的付款货币

您需要调整您的用户帐户以管理余额，并且您还需要一个单独的通知表。总而言之，没有那么复杂。也许最复杂的部分是通过 IPN 验证付款，但这样的例子很多。

# java - Spring Security 中的 Ldap 配置 - 自己的类

> ID：14339539
> 
> 赞同：0
> 
> 时间：2013-01-15T14:10:39.207
> 
> 标签：java, authentication, ldap

我想编写自己的 LDAP 身份验证提供程序。我正在扩展`AbstractUserDetailsAuthenticationProvider`，其中有一个方法`retrieveUser(String username, UsernamePasswordAuthenticationToken authentication)`。

我想重写这个方法并编写我自己的数据检索方法。如何在 Java 中做到这一点？如何进行 LDAP 查询以及如何连接到 LDAP 服务器？我在互联网上搜索，但没有找到任何帮助。

编辑：22.01.2013

```
@Override
protected UserDetails retrieveUser(String username,
        UsernamePasswordAuthenticationToken authentication)
        throws AuthenticationException {

    LdapUser userDetail = null;

    log.entry("retrieveUser", authentication.getPrincipal());

    UsernamePasswordAuthenticationToken userToken = authentication;
    String userName = userToken.getName();
    userName = userName != null ? userName.toLowerCase() : userName;
    String password = userToken.getCredentials().toString();

    try {
        if (password == null || "".equals(password)) {
            log.debug("retrieveUser", "no password provided");
            throw new AuthenticationCredentialsNotFoundException(
                    "Invalid login or password");
        }
    }

    catch (AuthenticationCredentialsNotFoundException e) {
        log.debug("retrieveUser", "no password provided");
    }

    // connection with ldap and check retrieved username and password
    connect = connection(userName, password);

    if (connect) {
        log.debug("retrieve user", "correct connection with ldap");
        userDetail = new LdapUser();
        setUserDetails(userDetail, ctx, username);

    } else {
        log.error("retrieve user", "Failed connection");
    }

    log.exit("retrieveUser", "user logged: " + userDetail);
    return userDetail;
} 
```

我的 security.xml 文件

```
<http auto-config='true'>
    <intercept-url pattern="/**/*.ico" filters="none" />
    <intercept-url pattern="/**/*.gif" filters="none" />
    <intercept-url pattern="/**/*.jpg" filters="none" />
    <intercept-url pattern="/**/*.css" filters="none" />
    <intercept-url pattern="/**/*.js" filters="none" />
    <intercept-url pattern="/**/*.png" filters="none" />
    <intercept-url pattern="/logout.jsp*" filters="none" />
    <intercept-url pattern="/index.jsp*" filters="none" />
    <intercept-url pattern="/**" access="ROLE_USER,ROLE_ADMIN" />
    <logout logout-success-url="/index.jsp"/>

    <form-login login-page="/index.jsp"
    authentication-failure-url="/error_ldap.jsp" 
    default-target-url="/main_ldap.jsp" always-use-default-target="true" />                 
    </http>

<authentication-manager>
    <authentication-provider ref="ldapAuthenticationProvider">  
        <password-encoder hash="sha" /> 
    </authentication-provider>
</authentication-manager> 
```

登录成功后，我重定向到 main_ldap.jsp，但如果身份验证失败，我收到此错误。我试图抛出异常 UsernameNotFoundException 而不是在retrieveUser 方法中返回null（这是不允许的）但是发生了任何事情（只有我得到了这个异常）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T15:23:12.633

您可以从 java 连接到 LDAP：

[http://docs.oracle.com/javase/jndi/tutorial/ldap/security/ldap.html](http://docs.oracle.com/javase/jndi/tutorial/ldap/security/ldap.html)

但是 spring security 已经集成了 ldap，你可以使用这里描述的方法：

[http://static.springsource.org/spring-security/site/docs/3.0.x/reference/ldap.html](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/ldap.html)

...

使用您自己的 UserDetails 服务的 xml 配置是：

```
<b:bean id="userDetailsService" class="your.class.here">
</b:bean>
<authentication-provider user-service-ref="userDetailsService">
</authentication-provider> 
```

# selenium - 使用 selenium 在 Web 上测试 Flash 应用程序

> ID：14339540
> 
> 赞同：7
> 
> 时间：2013-01-15T14:10:39.613
> 
> 标签：selenium, selenium-rc, microstrategy

我想使用任何 Web 测试工具来测试 Microstrategy 应用程序。我发现硒很好地满足了我的目的。但微战略应用程序以闪存格式部署。请帮助我指导如何测试这些闪存应用程序是否有可用的工具？我可以只使用硒吗？如何使用？提前致谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-15T15:00:18.460

Selenium 无法与 Flash 对象交互。

您可以使用 FlashSelenium，它很老但似乎可以工作：

[http://code.google.com/p/flash-selenium/](http://code.google.com/p/flash-selenium/)

或者使用 Sikuli、Adobe 的“精灵”库或 Ranorex 的库：

[http://sourceforge.net/adobe/genie/wiki/Home/](http://sourceforge.net/adobe/genie/wiki/Home/) http://www.ranorex.com/product/automated-ui-testing-of-flash-flex-applications.html [http://www.sikuli .org/](http://www.sikuli.org/)

Flash UI 测试的工具和信息非常有限。

另一种选择是直接使用 Javascript 与之交互。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T11:37:59.970

sikuli 是一个不错的选择，因为它基于 JAVA，因此您可以将其 jar 文件添加到您的构建路径中。另一个是 AUTOIT，它是一个“简单的坏”想法，不推荐，但在某些情况下它可能（或可能不会）派上用场。因为您必须提供任何元素的坐标 (x,y) 并输入代码以使其与其交互，例如单击或输入文本..

# bison - Bison 和 Flex 语法中规则的重用

> ID：14339544
> 
> 赞同：-1
> 
> 时间：2013-01-15T14:10:50.947
> 
> 标签：bison, flex-lexer

我试图在客户端和服务器之间创建一个请求-响应消息序列。为了解析消息，我使用了 flex 和 bison 语法。我有一个关于在不同语法中重用规则的问题。例如，如果我有一个用于处理请求的语法

```
req_message:
    request_message
    |response_message
    |error
    ; 
```

请求消息在哪里

```
request_message:
    |request_header_list request_hdr 
```

request_hdr 是

```
request_hdr:
    accept
    |accept_language
    |bandwidth
    |user_agent
    |session
    |cseq
    |cache_control
    ..
    ; 
```

同样对于响应，我有一个语法

```
response_header:
    cseq
    |session
    |range
    |public
    |server
    |content_type
    ..
    ; 
```

为了解析`cseq`，我只定义了一个规则。该规则在解析请求时工作正常。但是在解析响应时，规则没有出现。有没有类似的规则不能用于不同的语法？为什么它适用于请求而不适用于响应？在 lex 方面，我发现 lexims 解析没有问题，可以返回`cseq token`到 yacc

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T14:45:59.493

如果不了解更多 yacc 规范，就很难诊断问题。特别是，查看您的`response_message`. 但是，即使没有这些信息，我也注意到您的命名不一致。你有`request_hdr`但是`response_header`。这是故意的吗？

# xpath - 性能改进 - xquery 中地图的替代方案

> ID：14339548
> 
> 赞同：0
> 
> 时间：2013-01-15T14:11:01.443
> 
> 标签：xpath, xquery, bigdata, marklogic

我正在使用`cts:element-value-co-occurences`返回大量值的查询。由于我提供“ `map`”作为选项，因此将这些事件复制到地图中（下面给出示例）。

## 查询的返回地图

```
map:map(
<map:map xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:map="http://marklogic.com/xdmp/map">
<map:entry key="doc">
  <map:value xsi:type="map:map">
  <map:map>
     <map:entry key="/data/fb/www.abcdefgh.com#form123456665364#thread123456968765#post987986513213_65434360536840613_66445444">
     <map:value xsi:type="xs:float">0.289406</map:value>
     </map:entry>
  </map:map>
  </map:value>
</map:entry>
</map:map>
) 
```

正如您所注意到的，我的地图键是“ `doc`”，返回的出现被复制到这个键“ `doc`”中`sub-map`。子地图的 " `<map:entry key=`" 有一个大 URL 作为键。

当查询返回一个事件/结果时，它很好。问题是当返回数百个结果时，性能变得非常糟糕。有没有其他选择？我只关心值“0.289406”而不是大键。

我可以将值单独直接放入任何 xml 元素中，如下所示：-

```
<doc>
 <valu>0.289406</valu>
 <valu>-0.23456</valu>
 <valu>0.3665</valu>
</doc> 
```

而不是使用地图或任何迭代？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T18:45:45.537

数百个结果应该没问题。我定期处理地图中的数千到数百万个结果。

所以我怀疑还有其他事情发生。如果你能想出一个可重现的测试用例，那么有人可能会发现问题。

# java - PreferenceFragment.findPreference 总是返回 NULL

> ID：14339550
> 
> 赞同：11
> 
> 时间：2013-01-15T14:11:08.110
> 
> 标签：java, android, nullpointerexception, android-preferences, multi-select

我目前正在尝试制作一个设置菜单，该菜单将显示`MultiSelectListPreference`, 以从您的联系人列表中选择多个联系人。

此刻，我收到一个`NullPointerException`，当我尝试`MultiSelectListPreference#setEntryValue(CharSequence[])`放置第`setEntries`一个时，那个会抛出相同的异常。

我已经设置了一个断点，以便逐步查看会发生什么。变量被填充是因为它们存储`Strings`，它们可以包含`String`“null”，所以我猜如果没有`Display_Name`可用的左右它不会失败。

我将 findPreference 基于[此答案的示例](https://stackoverflow.com/questions/6136770/android-dynamic-array-listpreference/6137076#6137076)

有人有想法吗？如果您需要更多信息，请告诉我。谢谢阅读！

```
package be.wdk.sendtowork;contactNumberArray

import android.database.Cursor;
import android.os.Bundle;
import android.preference.MultiSelectListPreference;
import android.preference.PreferenceFragment;
import android.provider.ContactsContract;
import android.util.Log;
import android.widget.Toast;

public class PreferenceClass extends PreferenceFragment {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Integer countContacts = 0;

        String[] projection = new String[]{
                ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME,
                ContactsContract.CommonDataKinds.Phone.NUMBER,
                ContactsContract.CommonDataKinds.Phone.PHOTO_URI
        };

        String selection = ContactsContract.CommonDataKinds.Phone.HAS_PHONE_NUMBER;
        String sortOrder = ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME;
        try {
            Cursor c1 = getActivity().getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, projection, selection, null, sortOrder);
            c1.moveToFirst();
            Integer c1columncount = c1.getColumnCount();
            Integer c1count = c1.getCount();
            Toast toastje = Toast.makeText(getActivity(), c1columncount.toString() + " - " + c1count.toString(), Toast.LENGTH_SHORT);
            toastje.show();

            CharSequence[] contactNameArray = new CharSequence[c1count], contactNumberArray = new CharSequence[c1count];
            MultiSelectListPreference mslp = (MultiSelectListPreference) findPreference("contactList");
            do {
                contactNameArray[countContacts] = c1.getString(0) + " - " + c1.getString(2);
                contactNumberArray[countContacts] = c1.getString(1);
                countContacts += 1;
            } while(c1.moveToNext());

            mslp.setEntryValues(contactNumberArray); //<- line that throws the error
            mslp.setEntries(contactNameArray);
            addPreferencesFromResource(R.xml.preferences);
        } 
        catch (Exception e) {
            Log.v("TAG", " " + e.toString());
            e.getMessage();
        }
    }
} 
```

**编辑：**好的，我又做了几项检查。-我在我的 XML 中做了一个测试首选项，并使用 findPrefence 来制作它的对象 -> 返回 NULL -我已将 MultiSelectListPreference 的键设置为 @string/test，将其放入我的 strings.xml，findpreference仍然返回 Null。

我的 PreferenceFragment 有问题吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-16T12:31:41.973

好的，我发现我的问题是什么。

```
MultiSelectListPreference mslp = (MultiSelectListPreference) findPreference("contactList"); 
```

返回 NULL 因为

```
addPreferencesFromResource(R.xml.preferences); 
```

一开始还没有完成......所以它还没有加载我的偏好。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-10-31T09:23:15.310

您可以使用解决此问题

```
getFragmentManager().executePendingTransactions(); 
```

前

```
findPreference(section); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-05T18:01:43.727

就我而言，我试图在封闭的 PreferenceActivity 的 onCreate 中使用 findPreferences。我将它移到 PreferenceFragment 的 onCreate 上，它工作正常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-01T11:35:58.617

您可以通过将所有内容访问函数放在以下片段回调中来解决此问题

```
@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    //Access the content here.
} 
```

# c# - 如何将模型错误加载到模态对话框中

> ID：14339554
> 
> 赞同：0
> 
> 时间：2013-01-15T14:11:18.450
> 
> 标签：c#, javascript, asp.net-mvc, modal-dialog, modelstate

是否可以在使用 javascript 提交表单后将模型状态错误加载到相同的模式对话框中？

我的代码是这样的：

控制器：

```
public ActionResult Create(MyModel model){
     if(ModelState.isValid){
           // DB Save
           return RedirectToAction("Index");
     }
     else{
           return View(model);
     }
} 
```

阿贾克斯方法

```
$.ajax({
       type: 'POST',
       url: '/Receipt/Create',
       cache: false,
       data: $("#CreateForm").serialize(),
       success: function (e) { window.location="/Controller/Action"; },
       error: function (e) { e.preventDefault(); /*Code here to load model error into page*/ }                
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:45:54.997

我今天已经解决了这个问题，就像这样

```
public ActionResult Create(MyModel model){
 if(ModelState.isValid){
       // DB Save
       return RedirectToAction("Index");
 }
 else{
       return PartialView("_myPartialForm",model);
 }
} 
```

和

```
$.ajax({
   type: 'POST',
   url: '/Receipt/Create',
   cache: false,
   data: $("#CreateForm").serialize(),
   success: function (e) { 
if(e.Valid){
    window.location="/Controller/Action";}
else{
    return false;
  } },
   error: function (e) { e.preventDefault();$("#mymodal").load(e) } 
 }); 
```

就像 jmrnet 所说的那样。谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T15:28:59.617

我能够通过使用`Ajax.BeginForm`带有`UpdateTargetId`AjaxOption 的方法来实现这一点。这是我使用的代码。它并不完全适合您正在做的事情，但它应该为您指明正确的方向。

在视图中：

```
@using (Ajax.BeginForm(new AjaxOptions(){ UpdateTargetId="loginresult" }))
{
    <b>User:</b><br />
    @Html.TextBoxFor(m => m.UserName)<br />
    <br />
    <b>Password:</b><br />
    @Html.PasswordFor(m => m.Password)<br />
    <div id="loginresult"><br /></div>
    <input id="Button1" type="submit" value="Login" class="touch-button" />
} 
```

在控制器中：

```
[HttpPost]
public ActionResult Index(LoginModel model)
{
    //Execute Log-in code.
    //Capture any errors and put them in the model.LoginResponse property.

    return PartialView("LoginResult", model);
} 
```

在`LoginResult`局部视图中：

```
@model MerchantMobile.Models.LoginModel

@if (String.IsNullOrEmpty(Model.LoginResponse))
{
    Html.RenderPartial("_AjaxRedirect", Url.Content("~/Home/Activity"));
}
else
{
    <div id="loginresult">
        <div style="color: Red; font-weight: bold;">
            @Model.LoginResponse
        </div>
    </div>
} 
```

您可以轻松地将 替换为`loginresult` `<div>`jquery ui 用来弹出模式对话框的对话框，而不仅仅是在 div 中显示一些文本。

希望这可以帮助！

# javascript - JavaScript：在对象声明中声明变量

> ID：14339555
> 
> 赞同：6
> 
> 时间：2013-01-15T14:11:21.303
> 
> 标签：javascript

是否可以在对象声明中在 JavaScript 中声明变量？我正在寻找类似的东西

```
var myObject = {
    myLabel: (var myVariable)
}; 
```

而不必写

```
var myVariable;
var myObject = {
    myLabel: myVariable
}; 
```

**编辑**

我希望在 Node.JS 的上下文中这样做。这就是我所拥有的：

```
var server = {};
var database = {};
var moar = {};

module.exports = {
    server: server,
    database: databse,
    moar: moar
};

doStuffAsync(function callback() {
    // Populate variables
    server = stuff();
    database = stuff2();
}); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-15T14:15:39.793

如果你想在一个对象中定义一个变量，你可以使用 IIFE（立即调用的函数表达式）

```
var myObject = {
    a_variable_proxy : (function(){ 
        var myvariable = 'hello'; 
        return myvariable; 
    })()
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T14:14:12.557

您可以直接为键分配值。

如果你现在有：

```
var myVariable = 'some value';
var myObject = {
    myLabel: myVariable
}; 
```

您可以将其替换为：

```
var myObject = {
    myLabel: 'some value'
}; 
```

# java - 使用 Hibernate 查询 Oracle 时出现异常？

> ID：14339558
> 
> 赞同：0
> 
> 时间：2013-01-15T14:11:29.747
> 
> 标签：java, oracle, hibernate, gwt, oracle11g

在我的 GWT 应用程序中执行选择查询时出现以下异常。

```
2013-01-15 19:36:34,407  WARN [org.hibernate.util.JDBCExceptionReporter] [btpool0-0] (JDBCExceptionReporter.java:100) - SQL Error: 28001, SQLState: 99999
2013-01-15 19:36:34,407 ERROR [org.hibernate.util.JDBCExceptionReporter] [btpool0-0] (JDBCExceptionReporter.java:101) - ORA-28001: the password has expired
ORA-02063: preceding line from LOCAL 
```

无法弄清楚原因。有人可以帮我解决这个问题吗？

甲骨文版本：11g

休眠版本：3.4.0

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T14:13:43.303

错误消息说，密码已过期。您需要检查您的凭据以及属性`file`或`db.xml`文件中的凭据。您可以从命令行使用您的凭据登录吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T14:16:22.097

如果您使用的是 Windows，请尝试此操作。这用于重置密码：

```
set ORACLE_HOME=<YOUR_ORACLE_HOME>;
set ORACLE_SID=<SID>
Sqlplus / as sysdba
startup ; 
```

数据库启动后；

```
SQL > alter user <USERNAME> identified by <password > 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T14:17:32.713

问题是以下两件事之一：

1) 您的密码已过期，您需要更新它。

2) 系统**认为**您的密码已过期，您需要更新密码。

如果您打开 SQL Developer 并执行以下操作，这可以很容易地解决：

右键单击连接->更改密码

如果您正在运行多个数据库（例如测试和生产），请在所有位置更改密码，这可能听起来不合理，但还有其他问题具有相同的问题解决方案。

[资源](https://stackoverflow.com/questions/9479781/ora-28001-the-password-has-expired-not-fixable)

# android - 在 Android 的单个菜单项中实现三个操作

> ID：14339560
> 
> 赞同：9
> 
> 时间：2013-01-15T14:11:39.033
> 
> 标签：android, menu, android-actionbar, android-menu, android-browser

我希望拥有与图片中的移动版 chrome 浏览器类似的菜单项功能。我想在一行中有后退、前进、刷新菜单项。如何实现类似的菜单项？是否有任何参考或是否有任何技巧可以带来此功能？

![在此处输入图像描述](../Images/6ddc0fa92a33cf2db871a5fc2520c74f.png)

我的应用程序仅针对平板电脑。这是我当前的操作栏菜单项：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
<item
    android:id="@+id/favorite"
    android:showAsAction="always"
    android:title="Happy"/>
<item
    android:id="@+id/share_button"
    android:icon="@drawable/share"
    android:showAsAction="always"
    android:title="Share"/>
<item
    android:id="@+id/hola_button"          
    android:showAsAction="always"
    android:title="Hola"/>
<item
    android:icon="@drawable/more_actions"
    android:showAsAction="always">
    <menu>
        <item
            android:id="@+id/back_button"
            android:icon="@drawable/back"
            android:title="back"/>
        <item
            android:id="@+id/forward_button"
            android:icon="@drawable/forward"
            android:title="forward"/>
        <item
            android:id="@+id/refresh_button"
            android:icon="@drawable/refresh"
            android:title="refresh"/>          
    </menu>
 </item>
 </menu> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T21:21:10.997

**编辑：**

![截图溢出菜单](../Images/f25b3e1722e0feffd6cf071d0bf86f67.png)

这个例子是作为一个溢出菜单（因为 ABS 放弃了溢出主题）。你可以膨胀任何类型的布局组合。此类从 PopUpWindow 扩展而来，不使用典型的 onCreateOptions。它使用 ABS-CustomView 和 PopUpWindow 来创建菜单。

来自 android 参考：可用于显示任意视图的弹出窗口。弹出窗口是一个浮动容器，出现在当前活动的顶部。

布局看起来类似于您请求的布局。此视图锚定到 ActionBar，但您可以在任何您想要的地方显示它。弹出窗口支持许多开箱即用的显示功能。

**可定制的溢出菜单**

```
public class OverflowMenu extends PopupWindow {

private View mContentView;

public OverflowMenu(Context context, int resourceId) {
    super(context);
    mContentView = LayoutInflater.from(context).inflate(resourceId, null);
    setContentView(mContentView);
    setHeight(WindowManager.LayoutParams.WRAP_CONTENT);
    setWidth(WindowManager.LayoutParams.WRAP_CONTENT);

    // Handle touchevents
    setOutsideTouchable(true);
    setFocusable(true);
    setBackgroundDrawable(new BitmapDrawable());
}

/**
 * Attach the OverflowMenu View to the ActionBar's Right corner
 * @param actionBarView
 */
public void show(View actionBarView) {
    int x = actionBarView.getMeasuredWidth() - mContentView.getMeasuredWidth();
    showAsDropDown(actionBarView, x, 0);
}

/**
 * Return mContentView, 
 *  used for mContentView.findViewById();
 * @return
 */
public View getView(){
    return mContentView;
}
} 
```

**主要活动**

```
public class MainActivity extends SherlockActivity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_mai n);

    final ActionBar actionBar = getSupportActionBar();
    actionBar.setCustomView(R.layout.actionbar);
    actionBar.setDisplayOptions(ActionBar.DISPLAY_SHOW_CUSTOM);

    final OverflowMenu menu = new OverflowMenu(this,R.layout.menu_overflow);

    final ImageButton overflowBtn = (ImageButton) actionBar.getCustomView().findViewById(R.id.actionbar_overflow);
    overflowBtn.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            menu.show(actionBar.getCustomView());
        }
    });
  }

 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T18:39:02.083

这看起来像一个带有列表视图和自定义列表头的自定义对话框

或者

一个简单布局下方的列表视图，对话框顶部有 3 个按钮。

您可以在操作栏菜单项单击上显示相同的内容。

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    super.onCreateOptionsMenu(menu);
    getSupportMenuInflater().inflate(R.menu.menu_items, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {

    switch (item.getItemId()) {
    case android.R.id.show_dlg:

    // Show your custom dialog
        break;
    }

    return super.onOptionsItemSelected(item);

} 
```

此外，本教程将有助于作为膨胀自定义菜单的参考 [http://www.codeproject.com/Articles/173121/Android-Menus-My-Way](http://www.codeproject.com/Articles/173121/Android-Menus-My-Way)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T17:07:44.917

您可以使用以下内容将菜单项添加到页面：

```
OptionCommand command = new OptionCommand();
command.setActionView(view);
command.setIcon(canvas.getContext().getResources().getDrawable(android.R.drawable.ic_menu_search));
command.setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM | MenuItem.SHOW_AS_ACTION_COLLAPSE_ACTION_VIEW);
canvas.getActivity().getOptionCommands().add(command); 
```

# eclipse - 在 Eclipse 中导入克隆的 Git 存储库

> ID：14339561
> 
> 赞同：0
> 
> 时间：2013-01-15T14:11:46.110
> 
> 标签：eclipse, git

我正在尝试从克隆的 Git 存储库创建一个 Eclipse 项目我已经从这里克隆了存储库： [https ://github.com/nazgee/AndEnginePhysicsBox2DExtension](https://github.com/nazgee/AndEnginePhysicsBox2DExtension)

我有一个现有项目 AndEnginePhysicsBox2DExtension，我想用新克隆的存储库创建一个名为 AndEnginePhysicsBox2DExtension-nazgee 的项目。

当我尝试 File -> Import -> Projects from Git 并选择新的存储库时，我无法做到。我收到这条消息：

部分或所有项目无法导入，因为它们已存在于工作区中。

我有目录：
C:....AndEnginePhysicsBox2DExtension
C:....AndEnginePhysicsBox2DExtension-nazgee

然后我编辑 .project 文件，将：
AndEnginePhysicsBox2DExtension更改
为：
AndEnginePhysicsBox2DExtension-nazgeee
还编辑了 build.xml，将 -nazgee 添加到项目名称

有了这个错误现在是：
Invalid project description org.eclipse.egit.ui
Invalid project description org.eclipse.core.resources

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T15:07:38.047

我会反过来做：在 Eclipse 中重命名您现有的项目，然后像您一样导入新项目。

# visual-studio - Consola 字体的某些字符被渲染为两倍的高度

> ID：14339563
> 
> 赞同：0
> 
> 时间：2013-01-15T14:11:55.290
> 
> 标签：visual-studio, fonts, consolas

有谁知道为什么 ASCII 字符 ░、▒ 和 ▓ 的渲染高度是其假定高度的两倍（在某些应用程序下）？

Microsoft Word 似乎可以正确呈现它们，但例如，Visual Studio 会错误地呈现它们。在此处查看屏幕截图：[屏幕截图 1](http://xfx.net/consolas_rendering_issue/ss02.png)

Graphics.DrawString 似乎也有类似的问题：[Screenshot 2](http://xfx.net/consolas_rendering_issue/ss01.png)

# ios - iPad 2 上的全精度浮点纹理

> ID：14339570
> 
> 赞同：0
> 
> 时间：2013-01-15T14:12:23.363
> 
> 标签：ios, opengl-es, ios6, opengl-es-2.0, ipad-2

有人可以告诉我是否可以在 iPad2 上使用全精度浮点 2DTextures？（全精度 = 单精度）

通过使用在 iPad2 上打印出实现的 OpenGL 扩展

```
glGetString(GL_EXTENSIONS) 
```

我发现**OES_texture_half_float**和**OES_texture_float**都受支持。

但是，使用**GL_HALF_FLOAT_OES**作为纹理类型可以正常工作，

```
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, w, h, 0, GL_RGBA, GL_HALF_FLOAT_OES, NULL); 
```

而使用**GL_FLOAT**会导致帧缓冲区对象不完整。

```
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, w, h, 0, GL_RGBA, GL_FLOAT, NULL); 
```

我在这里做错了什么还是不支持全精度浮点纹理？

提前谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T17:19:50.880

该[`OES_texture_float`](http://www.khronos.org/registry/gles/extensions/OES/OES_texture_float.txt)扩展提供 32 位浮点纹理用作输入，但这并不意味着您可以渲染到它们中。这[`EXT_color_buffer_half_float`](http://www.khronos.org/registry/gles/extensions/EXT/EXT_color_buffer_half_float.txt)增加了 iOS 设备（我相信 A5 GPU 和更高版本）渲染为 16 位半浮点纹理的功能，但不是 32 位全浮点纹理。

我不相信任何当前的 iOS 设备都允许渲染成完整的 32 位浮点纹理，只是在渲染场景时将它们用作输入。

# hadoop - oozie 是否应该安装在单个 hadoop 集群内的所有 hadoop 节点上？

> ID：14339573
> 
> 赞同：0
> 
> 时间：2013-01-15T14:12:34.503
> 
> 标签：hadoop, mapreduce, oozie

我在 hadoop 1.0.3 上运行 oozie。我想知道是否必须在单个集群内的所有 hadoop 节点上安装 oozie？仅将它安装在主节点（hadoop）上就足够了吗？我搜索了 oozie 文档，但找不到我的问题的答案。

谢谢你，莫辛。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T15:34:47.207

[Oozie](http://oozie.apache.org/)不需要安装在集群中的所有节点上。它可以安装在专用机器上或与任何其他框架一起安装。查看本[指南](http://oozie.apache.org/docs/3.3.0/DG_QuickStart.html)以快速安装 Oozie。

请注意，Oozie 有一个客户端和一个服务器组件。服务器组件有一个调度器和一个工作流引擎。工作流引擎使用 hPDL（Hadoop 流程定义语言）来定义工作流。

# c# - 位图 XML 序列化

> ID：14339577
> 
> 赞同：0
> 
> 时间：2013-01-15T14:12:40.843
> 
> 标签：c#, .net, xml-serialization

> **可能重复：**
> [将 C#/.NET 中的位图序列化为 XML](https://stackoverflow.com/questions/1907077/serialize-a-bitmap-in-c-net-to-xml)

我正在尝试使用 XmlSerializer 序列化 MyClass，但看起来 [XmlInclude(typeof(Bitmap))] 不起作用。

```
using System;
using System.Drawing;
using System.IO;
using System.Xml.Serialization;

class Program {
    static void Main() {
        var myClass = new MyClass {
            Name = "foo",
            MyImage = new Bitmap(@"e:\pumpkin.jpg")
        };

        var serializer = new XmlSerializer(typeof(MyClass));
        var fileStream = File.OpenWrite(@"e:\test.xml");
        serializer.Serialize(fileStream, myClass);
    }
}

[Serializable]
[XmlInclude(typeof(Bitmap))]
public class MyClass {
    public string Name { get; set; }
    public Bitmap MyImage { get; set; }
} 
```

这是生成的文件：

```
<?xml version="1.0"?>
<MyClass xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <Name>foo</Name>
  <MyImage>
    <Palette />
  </MyImage>
</MyClass> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T14:25:37.757

您可以创建一个将位图获取/设置为字节数组的属性。这应该是由序列化器编码的 base-64。

```
public byte[] MyImageBytes {
    get {
       ImageConverter converter = new ImageConverter();
       return (byte[])converter.ConvertTo(MyImage, typeof(byte[]));
    }
} 
```

您可能还希望使用 [XmlIgnore] 属性隐藏您的 Bitmap 属性。您可能还希望 LinqToXml 优于序列化程序，因为它为您提供了更多控制权。

请注意，XmlSerializer 在 base-64 编码时性能很差。LinqToXml 也是如此，但 BitConverter 类在转换为 base-64 方面做得很好。

# html - 在智能手机上滚动的网站

> ID：14339582
> 
> 赞同：0
> 
> 时间：2013-01-15T14:12:56.577
> 
> 标签：html, css

在网站设计方面，我是一个完全的新手，但我的任务是为学术会议设计网站。我想设计一个功能性网站，我了解它背后的代码。我设法做到了，但现在在智能手机上查看它时遇到问题。[当我在砖块和手机](http://www.brickandmobile.com/mobile-emulator/)等在线模拟器上查看网站时，似乎工作正常。但是，当我的同事使用智能手机尝试查看它时，主要内容区域不会滚动。有谁知道解决这个问题的方法。该网站的网址是：

[会议网站](http://www.maths.manchester.ac.uk/~dward/)

编辑：问题似乎出在安卓手机上。如果你放大一点，你就可以滚动，如果你移动到纵向视图而不是横向视图，那很好，但它不会在安卓的横向视图上滚动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T14:31:14.997

您可能想尝试将视口元数据添加到您的标题中，确保每个设备都能以最佳宽度看到您的网站（这消除了用户在大多数移动设备上放大的麻烦）。

您可以在以下文章中找到一些有用的信息：http: [//www.html5rocks.com/en/mobile/mobifying/](http://www.html5rocks.com/en/mobile/mobifying/)

三星 Galaxy S2 上的网站存在一些缩放问题。这主要与设置为 21% 的菜单有关。

此外，您将许多元素的高度设置为 100%。你可能也想调查一下。

# php - 表达式引擎上的 PHP 本机会话问题

> ID：14339585
> 
> 赞同：0
> 
> 时间：2013-01-15T14:13:00.697
> 
> 标签：php, codeigniter, session, expressionengine

我正在为我的表达式引擎项目使用会话。我使用以下方法在页面顶部设置会话。

```
 if (session_id() == ''){
         session_start(); 
    } or

   if(!isset($_SESSION)){
        session_start();
    }

      or

   if(empty($_SESSION['userid'])){
      session_start(); 
   } 
```

我编写了自定义表达式引擎插件，在其中进行会话检查。

过了一段时间，我观察到了一个奇怪的会话行为。对于不同的 url，它的设置不同。对于 http:// url 它设置不同，对于 www:// url 它设置不同。如何设置和检索会话以使[http://example.com](http://example.com)和 www.example.com 产生相同的结果。

我也遵循了这个网址的步骤[http://ellislab.com/forums/viewthread/231468/](http://ellislab.com/forums/viewthread/231468/)。我在[http://ellislab.com/forums/viewthread/232604/](http://ellislab.com/forums/viewthread/232604/)上发布了同样的问题。但它对我没有帮助。

有人可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T14:18:18.090

一个小提示：www 是一个子域，而不是一个协议。所以它是 www.example.com，而不是 www://example.com

话虽这么说：问题是会话cookie（我猜您正在使用会话cookie）在不同的子域上无法识别，因此您需要使其在整个域上可用

您可以查看此 php 函数以获取更多详细信息：http: [//php.net/session_set_cookie_params](http://php.net/session_set_cookie_params)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T15:05:13.243

谢谢@mishu。在您解释 www 是一个子域和 session_cookie 问题后，我做了一些实验，然后用谷歌搜索了一下。

这篇关于 stackoverflow 的帖子非常有帮助。 [跨子域的 PHP 会话](https://stackoverflow.com/questions/1064243/php-sessions-across-sub-domains)

我在 expressionengine / codeigniter 的根文件夹中打开了 index.php 文件，然后添加了以下行

```
ini_set('session.cookie_domain','.example.com'); 
```

现在它工作正常。如果有人可以在这个线程上简要解释一下，它将对其他开发人员很有用。

# javascript - 占位符删除焦点

> ID：14339588
> 
> 赞同：2
> 
> 时间：2013-01-15T14:13:16.157
> 
> 标签：javascript, jquery, html, attributes, placeholder

我正在使用“占位符”属性。用于输入字段中的占位符文本

我也需要在 IE 化身中具有此功能。

我希望占位符隐藏在 FOCUS 上！当输入第一种类型时，我发现的每个解决方法都会隐藏占位符。

我自己无法解决，它需要简单地删除输入的占位符文本，但如果输入值为空，还需要恢复模糊时的占位符文本。

我试图让它发挥作用

```
jQuery(document).ready(function () {

jQuery('[placeholder]').focus(function() {
  input = jQuery(this);
  if (input.val() == input.attr('placeholder')) {
    input.val('');
    input.removeClass('placeholder');
    input.attr('placeholder','')
  }
}).blur(function() {
  var input = jQuery(this);
  if (input.val() == '' || input.val() == input.attr('placeholder')) {
    input.addClass('placeholder');
    input.val(input.attr('placeholder'));
  }
}).blur().parents('form').submit(function() {
  jQuery(this).find('[placeholder]').each(function() {
    var input = jQuery(this);
    if (input.val() == input.attr('placeholder')) {
      input.val('');
    }
  })
});

}); 
```

这会将占位符的值更改为“（无）”，并且行为是我想要的，但在模糊时它无法恢复占位符值，因为它的“（无）”现在

//更新

我的解决方案：

```
$(function()
{
  $('input').each(function() 
  {
     $(this).val($(this).attr('holder'));
  });

  $('input').focus(function()
  {
    if($(this).attr('holder')==$(this).val())
    {
      $(this).val('');
    }
  });
  $('input').focusout(function()
  {
     if($.trim($(this).val())=='')
     {
       var holder = $(this).attr('holder');
       $(this).val(holder);
     }
  });
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T14:14:42.993

使用占位符属性：

```
<input type="text" placeholder="Search here"> 
```

对于不支持的浏览器`placeholder`；你可以使用[polyfill](https://github.com/ginader/HTML5-placeholder-polyfill)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T14:35:07.577

如果您不想使用`placeholder`，可以使用下面的代码或使用这个简单的 jQuery 插件：

[**jQuery Placeholder**](https://github.com/blacksrc/jQuery-Placeholder)。**HTML**

**[下代码的 jsFiddle 现场演示](http://jsfiddle.net/BlackSRC/FdjJv/2/)**

 **```
<input type='text' holder='First name'><br>
<input type='text' holder='Last name'><br>
<input type='text' holder='Age'> 
```

**JavaScript**

```
$(function() {

  $('input').each(function() {
     $(this).val($(this).attr('holder'));
  });

  $('input').focus(function() {
    if($(this).attr('holder')==$(this).val()) {
      $(this).val('');
    }
  });

  $('input').focusout(function() {
     if($.trim($(this).val())=='') {
       var holder = $(this).attr('holder');
       $(this).val(holder);
     }
  });
}); 
```

你也可以使用这个简单的 jQuery 插件：[jQuery Placeholder](https://github.com/blacksrc/jQuery-Placeholder)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-15T14:35:38.313

老而不是最好的方法是：

```
<input type="text" name="fname" value="Enter text here" onFocus="if (this.value=='Enter text here'){this.value='';}"
onBlur="if (this.value==''){this.value='Enter text here';}" /> 
```

但它甚至在 IE6 中也有效。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-15T15:07:09.523

对于基于 Webkit 的浏览器和 Firefox，您可以在纯 CSS 中隐藏占位符：

```
input:focus::-webkit-input-placeholder, 
input:focus::-moz-placeholder { opacity:0; } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-15T14:27:12.717

有许多 polyfill 可以在不支持它的浏览器中“添加”占位符功能。我过去使用过[jQuery Placeholder](https://github.com/mathiasbynens/jquery-placeholder)，但是在[modernizr 文档](https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-Browser-Polyfills)中提到了很多其他的（向下滚动到占位符部分）。

jQuery Placeholder 的好处是除了对库的引用之外，您不必更改/添加任何代码。只需将`placeholder`属性添加到您的元素。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-08T13:30:29.863

这是我在输入和 textarea focus() 上隐藏占位符文本的代码。简单而且工作得很好。

```
$('textarea,input').focus(function(e){
    val=$(this).attr('value');
    if (!val)
    $(this).attr('value',' ');
    this.select();
}).blur(function(e){
    val=$(this).attr('value');
    if (val==' ')
    $(this).attr('value','');
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-10-01T21:24:06.170

我使用这两种方法（jquery）在输入获得焦点时隐藏占位符，当它失去焦点并且它为空时显示占位符。

输入焦点

*   第 1 步：简单地将占位符值保存到通用变量中（此处为 pl）
*   步骤2：将输入的占位符属性设置为''

input.focusout

*   步骤 1：将输入的占位符属性设置为保存的变量（此处为 pl）

    ```
     var pl;
    //on getting focus
    $('input').focus(function(){
      pl=$(this).prop('placeholder');
      $(this).prop('placeholder','');
    });
    // on losing focus:
    $('input').focusout(function(){    
      $(this).prop('placeholder',pl);
    }); 
    ```**

# jquery - 动态文本区域值卡在空白处

> ID：14339590
> 
> 赞同：0
> 
> 时间：2013-01-15T14:13:28.907
> 
> 标签：jquery, textarea

使用 jquery 动态生成 textarea 后，我尝试获取此 textarea 的值并记录它，这在我第一次尝试时有效，但第二次、第三次等时，值被卡在空白处。我不确定为什么，但它唯一一次为这个 textarea 获得新值是当我刷新页面时。

```
$(document).on('click','.messager',function(e){
        e.preventDefault();
        $('body').append("<div class='messageSender'>"
                +"<div class='colr' id='content'>"
                        +"<button id='modal-close'>Close Window</button>"
                        +"<button id='modal-send'>Send Message</button><br /><br /><br />"
                        +"<label for='messageUser'><font size='5'>Message:</font></label>"
                        +"<textarea id='messageUser' maxlength='1400'> </textarea>"
                    +"</div></div>");
 }); 
```

我尝试记录值的地方

```
$(document).on('click','#modal-send',function(e){
    e.preventDefault();
    var msg = $("#messageUser").val();
    console.log(msg);

            $.post("sendMessage.php", { request: "sendMsg"},
            function(data) { 
                                $("#messageUser").val("");
                                $(".messageSender").hide();
                                $(".modal").hide();
                            alert("Message Sent Successfully")  
            });
    return false;   
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T17:06:12.710

事实证明这是markpsmith提到的某种“绑定问题”。发送消息后，我必须使用 .remove() 方法完全删除 div 和 textarea ，否则消息值将停留在设置为它的初始值上，因为每次单击发送消息时都会附加一个新的 textarea 。

```
 $(document).on('click','#modal-send',function(e){
e.preventDefault();
var msg = $("#messageUser").val();
console.log(msg);

        $.post("sendMessage.php", { request: "sendMsg"},
        function(data) { 
                            $("#messageUser").remove();
                                $(".messageSender").remove();
                                $("#content").remove();
                        alert("Message Sent Successfully")  
        });
return false; 
```

});

# javascript - phonegap window.location 不适用于 .html#page

> ID：14339593
> 
> 赞同：1
> 
> 时间：2013-01-15T14:13:48.593
> 
> 标签：javascript, jquery, cordova, jquery-mobile

起初很抱歉，如果我有一些打字错误，英语不是我的主要语言，但我会尽我所能解释它。

我正在开发一个带有笔记数据库的测试应用程序。添加和删​​除它可以正常工作，但有一个小问题......目前我添加了一个注释（在edit.html上）并想要返回到 index.html 页面它不会返回。我正在处理多个数据页面角色页面，因此每个页面都有自己的 ID。我用于笔记数据库的代码：

index.html 标题：

```
$("#homePage").live('pageinit', function() {
init();
}); 
```

index.html 数据页角色

```
<div data-role="page" id="homePage" data-add-back-btn="true" class="noteclass">
<!-- HEader -->
<div data-role="header" >
    <h1>Notitie Database</h1>
</div>
<!-- Main content div -->
<div data-role="content" id="mainContent">
    <ul data-role="listview" id="noteTitleList"></ul><br />
</div>
<div data-role="content">
    <a href="edit.html" data-role="button" data-icon="plus">Voeg notitie toe</a>
</div>
<!-- Footer -->
<div data-role="footer" id="footer"> <img src="a12.png" />
    <p>&copy; 2012 - Swen Kooij / Paksha Thullner / Johnny Jansen</p>
</div>
</div> 
```

Edit.html（在这里你可以添加/更改/删除注释）

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>
<body>
<div data-role="page" id="editPage">
<!-- HEader -->
<div data-role="header">
    <h1>Write Note</h1>
</div>
<script type="text/javascript">
$(document).ready(function() {
    $('#Delete').click(function() {
        DeleteNote($('#noteId').val());
    });

    $('#addNote').click(function() {
        var data = {title:$("#noteTitle").val(), 
                body:$("#noteBody").val(),
                id:$("#noteId").val()
        };
        saveNote(data);             
    });     
});
</script>
<div data-role="content">   
    <form id="editNoteForm" method="post">
        <input type="hidden" name="noteId" id="noteId" value="">
        <div data-role="fieldcontain">
            <label for="noteTitle">Title</label>
            <input type="text" name="noteTitle" id="noteTitle">
        </div>
        <div data-role="fieldcontain">
            <label for="noteBody">Note</label>
            <textarea name="noteBody" id="noteBody"></textarea>
        </div>
        <div data-role="fieldcontain">
            <button id="addNote">Opslaan</button>
        </div>
    </form>
    <button id="Delete">Verwijder</button>
</div>
<a href="index.html#homePage" data-role="button" data-icon="home">Ga terug</a>
<!-- Footer -->
<div data-role="footer" id="footer"> <img src="a12.png" />
    <p>&copy; 2012 - Swen Kooij / Paksha Thullner / Johnny Jansen</p>
</div>
</div>
</body>
</html> 
```

这是我用于笔记数据库的后端代码

```
document.addEventListener("deviceready", onDeviceReady, false);

function onDeviceReady() {
phoneready();
}

function setupTable(tx){
tx.executeSql("CREATE TABLE IF NOT EXISTS notes(id INTEGER PRIMARY KEY,title,body,updated)");
}   

function getEntries() {
dbShell.transaction(function(tx)
{
    tx.executeSql("select id,title,body, updated from notes order by id asc", dbErrorHandler, renderEntries)
}, function(){ alert ("Error getentries"); 
});

}

function renderEntries(tx,results){
if (results.rows.length == 0) {
    $("#mainContent").html("<p>Je hebt nog geen notities.</p>");
} else {
   var s = "";
   for(var i=0; i<results.rows.length; i++) {
     s += "<li><a href='edit.html?id="+results.rows.item(i).id + "'>" + results.rows.item(i).title + "</a></li>";   
   }
   $("#noteTitleList").html(s);
   $("#noteTitleList").listview("refresh");
}
}

function saveNote(note) {

//Sometimes you may want to jot down something quickly....
if(note.title == "") note.title = "[Geen Titel]";
dbShell.transaction(function(tx) {
    if(note.id == "") 
    {
        tx.executeSql("insert into notes(title,body,updated) values(?,?,?)",[note.title,note.body, new Date()]);
    }
    else
    {
         tx.executeSql("update notes set title=?, body=?, updated=? where id=?",[note.title,note.body, new Date(), note.id]);
    }
}, function(){ alert ("Error savenote");}, 
    function()
    {
        window.navigator.location("index.html#homePage");
    });
}

function DeleteNote(id){
    dbShell.transaction(
    function(tx)
    {
        tx.executeSql('Delete FROM notes where id=' + id);
    },
        function(){ alert ("Error deletenote");},
    function(err)
    {
        window.navigator.location("index.html#homePage");
    });
}

function phoneready(){
dbShell = window.openDatabase("SimpleNotes", 2, "SimpleNotes", 1000000);
setupTable();   
}

function init(){
getEntries();

//edit page logic needs to know to get old record (possible)
$("#editPage").live("pagebeforeshow", function() {
    //get the location - it is a hash - got to be a better way
    var loc = window.location.hash;
    if(loc.indexOf("?") >= 0) {
        var qs = loc.substr(loc.indexOf("?")+1,loc.length);
        var noteId = qs.split("=")[1];
        //load the values
        dbShell.transaction(
            function(tx) {
                tx.executeSql("select id,title,body from notes where id=?",[noteId],function(tx,results) {
                    $("#noteId").val(results.rows.item(0).id);
                    $("#noteTitle").val(results.rows.item(0).title);
                    $("#noteBody").val(results.rows.item(0).body);
                });
            }, dbErrorHandler);

    }
});
} 
```

正如您在 saveNote 和 deleteNote 上看到的那样，我调用函数 window.navigator.location("index.html#homePage"); 我尝试使用 $.mobile.changePage("index.html#homePage"); 它会返回，但不会运行 init(); 头脚本中的函数。我希望我解释的一切都是正确的，如果有任何问题，请告诉我。然后我会尽力解释它。

编辑：更多信息：

首先感谢您的回答，我得到了多个数据角色页面。

一个额外的例子：

```
<div data-role="page" id="page5" data-add-back-btn="true">
<!-- Header --> 
<div data-role="header" >
<h1>Locatie</h1>
</div>
<!-- Main content div -->
<div data-role="content">   
<p id="geolocation" onClick="onDeviceReady()">Op zoek naar uw locatie ...</p>
<img src="" id="map" width="100%" height="" />
<h4>Omgeving</h4>
<img src="" id="map2" width="100%" height="" />
</div>
<div data-role="footer" id="footer"> <img src="a12.png" />
<p>&copy; 2012 -  Swen Kooij / Paksha Thullner / Johnny Jansen</p>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T14:22:47.500

您正在尝试使用深层链接 "index.html#homePage" 更改页面。JqueryMobile 不支持。当您传递一个文件时，他将只加载该文件的第一页。这意味着当您传递“index.html#homePage”时，他只会考虑“index.html”并加载该文件的第一页。

我不确定，但如果您的 index.html 文件中只有“主页”，请将函数 window.navigator.location 更改为：

```
$.mobile.changePage("index.html") 
```

当然，对锚标签也做同样的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T16:27:40.130

我用：

window.location = "#home";

# ruby - AR 方法转 JSON

> ID：14339595
> 
> 赞同：0
> 
> 时间：2013-01-15T14:13:59.583
> 
> 标签：ruby, json, ruby-on-rails-3.2

我有一个模型

```
class Store
    has_many :opening_times
    #returns ActiveRecordRelation 
```

我有一个 JSON API，它调用类似的东西

```
Store.first.opening_times.to_json 
```

有没有办法让这个方法自定义？

当然我知道我可以创建一个像“opening_times_to_json”这样的方法并在我的 json 模板中调用它，但也许有一个很好的 Ruby 或 Rails 方法可以响应不同的格式？

***编辑***

我想要那样

我现在做到了：

```
def opening_times_as_json
  #opening_times.map{|o| {o.weekday.to_sym=>"#{o.open} - #{o.close}"}}
  { :monday=>"#{opening_times[0].open} - #{opening_times[0].close}", 
    :tuesday=>"#{opening_times[1].open} - #{opening_times[1].close}",
    :wednesday=>"#{opening_times[2].open} - #{opening_times[2].close}",
    :thursday=>"#{opening_times[3].open} - #{opening_times[3].close}",
    :friday=>"#{opening_times[4].open} - #{opening_times[4].close}",
    :satturday=>"#{opening_times[5].open} - #{opening_times[5].close}",
    :sunday=>"#{opening_times[6].open} - #{opening_times[6].close}" }
end 
```

这就是我想要的结果：

![结果](../Images/c6689be81b57da00623ed92b5ef892dd.png)

有没有更优雅的方式来实现这一点？

```
opening_time model has weekday as string, open as integer and close as integer 
```

# EDIT 2 作为请求 opening_time 模型

```
class Advertisement::OpeningTime < ActiveRecord::Base
  attr_accessible :weekday, :open, :close  
  belongs_to :advertisement
end 
```

和广告

```
class Advertisement < ActiveRecord::Base
    has_many :opening_times
    def initialize(*params)super(*params)
    if (@new_record)
      %w(monday tuesday wednesday thursday firday saturday sunday).each do |weekday|
        self.opening_times.build weekday: weekday
      end      
    end
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T19:49:08.710

我可能会推荐这样的东西：

```
DAYS_OF_THE_WEEK = [
  "Monday",
  "Tuesday",
  "Wednesday",
  "Thursday",
  "Friday",
  "Saturday",
  "Sunday"
]

# I might recommend renaming #opening_times_as_json to #hours
def hours
  DAYS_OF_THE_WEEK.map { |day| :day.to_sym => hours_for_day(day) }
end

def hours_for_day(day)
  "#{opening_times[index_for_day(day)].open} - #{opening_times[index_for_day(day)].close}"
end

def index_for_day(day)
  DAYS_OF_THE_WEEK.index(day_of_week_name)
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T14:27:54.913

我认为，您可以覆盖模型`as_json`的方法`OpeningTime`。这是[关于 as_json 与 to_json 的文章](http://jonathanjulian.com/2010/04/rails-to_json-or-as_json/)。引用：“as_json 用于将 JSON 的结构创建为哈希，并且将该哈希渲染为 JSON 字符串由 ActiveSupport::json.encode 决定。您永远不应该使用 to_json 来创建表示，只能消耗代表权。”

所以，你会做这样的事情：

```
class OpeningTime

  def as_json(options)
    super(:only => [:attributes_you_want], :methods => [:description_markdown])
  end

end 
```

**更新**

您是否尝试过在控制器中执行以下操作：

类 StoreOpeningTimes < ApplicationController

```
 def index
   @store = Store.find(params[:id])
   render json: @store.opening_times
 end 
```

结尾

希望能帮助到你。

# header - 浏览器下载文件而不是显示它

> ID：14339596
> 
> 赞同：0
> 
> 时间：2013-01-15T14:14:03.040
> 
> 标签：header, download, http-headers, readfile

我正在使用 php readfile 将文件发送到浏览器。它是一个图像文件。但是浏览器会下载它，而不是显示它。这是响应标头：

```
HTTP/1.1 200 OK
Date: Tue, 15 Jan 2013 14:11:46 GMT
Server: Apache
X-Powered-By: PHP/5.3.18-nmm1
Content-disposition: attachment; filename=test.jpg
Content-Length: 20599
Keep-Alive: timeout=1, max=100
Connection: Keep-Alive
Content-Type: image/jpeg; charset=binary 
```

为什么不显示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T14:16:21.273

坏人是这一行：

```
Content-disposition: attachment; filename=test.jpg 
```

尝试删除它以在浏览器中显示图像。

或者，使用一个小的 html 文件，因为这是浏览器应该工作的方式；）

# java - Java - 想要空白的窗口

> ID：14339600
> 
> 赞同：-1
> 
> 时间：2013-01-15T14:14:13.140
> 
> 标签：java, swing, jframe

我对 Java 还是很陌生。
在 C# 中，我们可以像这样设置表单边框样式：

```
this.FormBorderStyle = FormBorderStyle.None; 
```

我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T14:17:33.160

您可以使用 JFrame 方法`setUndecorated(true)`。这是一个例子：

```
 import javax.swing.JFrame;
   import javax.swing.JLabel;

   public class Main {
     public static void main(String[] args) {
       JFrame frame = new JFrame("TitleLessJFrame");
       frame.getContentPane().add(new JLabel(" HEY!!!"));
       frame.setUndecorated(true);
       frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
       frame.setSize(400, 200);
       frame.setVisible(true);
     }
   } 
```

# makefile - Makefile - 查找任意测试目录

> ID：14339609
> 
> 赞同：0
> 
> 时间：2013-01-15T14:14:35.333
> 
> 标签：makefile, zend-framework2

我有一个 ZF2 应用程序，我已将其设置为使用具有各种选项的 Makefile 构建。手头的问题是该`/vendors/`目录可以包含通过composer安装/更新的各种依赖项。每个依赖项可能包含也可能不包含单元测试，并且测试的位置是任意的。

运行时`make test`，我希望 Makefile 在`/vendors/`目录中搜索任何命名的文件夹`/tests/`并相应地执行单元测试。

遍历供应商并找到`/tests/`能够执行单元测试的任何目录的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T14:24:23.207

使用[`wildcard`](http://www.gnu.org/software/make/manual/html_node/Wildcard-Function.html#Wildcard-Function)功能：

```
LIST_OF_TESTS:=$(wildcard vendors/*/tests) 
```

# linux - osm2pgsql 与 PostgreSQL 9.0

> ID：14339610
> 
> 赞同：0
> 
> 时间：2013-01-15T14:14:36.097
> 
> 标签：linux, postgresql, postgis

我正在使用 PostgreSQL 9.0。我已经从 Debian 存储库安装了 osm2pgsql 包，现在我的机器上安装了两个版本的 postgres 数据库（9.0 和 9.1 - 随 osm2pgsql 一起安装）。如何配置 osm2pgsql 和 postgis 以使用 9.0 数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T02:38:59.223

Debian 通常会在从 5432 开始的顺序端口上安装多个版本的 PostgreSQL，因此您的第一次安装在 5432，第二次安装在 5433，依此类推。

PostGIS 通常安装到数据库中，尽管这样做的机制在 9.0 和 9.1 中有所不同（在 9.0 中，查看文档以找到合适的安装方法，您可能需要从源安装。然后您将运行特定的 .sql文件导入相关函数。9.1使用`CREATE EXTENSION`语法。

`PGPORT`对于客户端程序，您可以通过将 设置为适当的设置来设置默认情况下它将连接到哪个 PostgreSQL 安装（即，除非程序另有说明） 。

# sql - 适当限制 SQL 和 Hibernate 中特定记录的数量

> ID：14339611
> 
> 赞同：0
> 
> 时间：2013-01-15T14:14:36.437
> 
> 标签：sql, hibernate, grails-orm

在我的场景中，a每天`PLAYER`可以执行 2`ACTIONS`次（例如，每天可以攻击 2 名其他玩家）。我实现了两个持久类：`Player`和`Action`. `Action`类引用`Player`了`Date`这个动作（日期只包含日期部分，比如 2013-01-15 00:00:00）。我想创建一个数据库级别的约束，`Action`将特定日期的记录数限制为 2。这将阻止玩家每天执行超过 2 个操作。该系统是高度并发的，应用程序级别的检查通常会失败，允许玩家同时执行 3-4 个动作。

我当前的解决方案是使用对、和`PlayerDayActions`的引用来实现第三个版本化实体。因此，我可以检查或计算玩家已经执行了多少操作，并且版本将不允许覆盖同时修改的实例（如果有的话）。为了扩展，我可以将 action1 和 action2 更改为列表并检查这样的列表。`player``date``action1``action2``action1 IS NULL``action2 IS NULL``PlayerDayAction`

有没有更干净和可扩展的解决方案来解决这个问题？在休眠中的普通 SQL 中？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T18:53:30.800

如果您创建第三个表 PlayerDayAction，则具有 Player、date、action 列。为每个动作添加一条记录，如果（玩家今天有 2 个动作）不允许该动作。除非您希望这些数据用于历史目的，否则您甚至可以每晚或每周删除数据，这样表格就不会变得太大。

我就是这样做的:)。

# c# - 结合 WCF 路由和发现

> ID：14339617
> 
> 赞同：1
> 
> 时间：2013-01-15T14:14:44.580
> 
> 标签：c#, .net, wcf, wcf-routing

我正在尝试将 WCF 路由服务与发现相结合，但似乎它们不能一起工作。这是我的场景：

来自客户端的请求进入路由服务。我希望路由服务使用发现来找到正确的端点并将传入消息发送到找到的端点。然而，路由服务向发现服务发送了一个 [ [http://tempuri.org]](http://tempuri.org])命名空间，因此发现服务无法通过该命名空间找到服务，因为它需要路由器服务上传入消息的命名空间。

我知道我正确配置了发现服务，因为如果我在客户端使用发现配置，它可以解析端点。但是，在我的生产场景中，无法在客户端进行发现。如果我不使用发现来解析端点，路由器服务也可以工作。

这是我的路由和发现配置：

```
<routing>
  <filters>
    <filter name="GreetingsFilter" filterType="EndpointName" filterData="GreetingsRoutingEndpoint"/>
  </filters>
  <filterTables>
    <filterTable name="DefaultTable">
      <add filterName="GreetingsFilter" endpointName="GreetingsDiscoveryEndpoint"/>
    </filterTable>
  </filterTables>
</routing>

<client>
  <endpoint behaviorConfiguration="LoggingBehavior" binding="basicHttpBinding"
    contract="*" name="GreetingsDiscoveryEndpoint"
    kind="dynamicEndpoint" endpointConfiguration="dynamicEndpointConfiguration" />
</client>

<standardEndpoints>
  <dynamicEndpoint>
    <standardEndpoint name="dynamicEndpointConfiguration">
      <discoveryClientSettings>
        <endpoint address="http://server/DiscoveryProxy.svc" behaviorConfiguration="DiscoveryEndpointBehavior" binding="wsHttpBinding" bindingConfiguration="NoSecurityBinding" name="DiscoveryEndpoint" kind="discoveryEndpoint" endpointConfiguration="managedDiscoveryEndpointConfiguration"/>
      </discoveryClientSettings>
    </standardEndpoint>
  </dynamicEndpoint>

  <discoveryEndpoint>
    <standardEndpoint name="managedDiscoveryEndpointConfiguration" discoveryVersion="WSDiscovery11" discoveryMode="Managed"/>
  </discoveryEndpoint>
</standardEndpoints> 
```

这是一张提琴手图片，显示了正在发送到发现服务的内容。（注意 [ [http://tempuri]](http://tempuri]) 命名空间）： ![Fiddler 屏幕截图显示正在发送到发现服务的 [http://tempuri] 命名空间](../Images/2d366ad949ddaad0831e73a504b9e48b.png)

如果我的情况可行，有人可以建议我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T08:00:12.260

我找到了解决方案。我必须在 discoveryClientSettings 元素中指定搜索条件。在这里，我可以明确地说出我正在寻找哪些类型。我的 standardEndpoints 配置现在如下所示：

```
<standardEndpoints>
  <dynamicEndpoint>
    <standardEndpoint name="dynamicEndpointConfiguration">

      <discoveryClientSettings>
        <endpoint address="http://server/DiscoveryProxy.svc" behaviorConfiguration="DiscoveryEndpointBehavior" binding="wsHttpBinding" bindingConfiguration="NoSecurityBinding" name="DiscoveryEndpoint" kind="discoveryEndpoint" endpointConfiguration="managedDiscoveryEndpointConfiguration" />
        <findCriteria>
          <types>
            <add name="IGreetingService" namespace="urn:poc:igreetingservice:v1"/>
          </types>
        </findCriteria>
      </discoveryClientSettings>
    </standardEndpoint>
  </dynamicEndpoint>

  <discoveryEndpoint>
    <standardEndpoint name="managedDiscoveryEndpointConfiguration" discoveryVersion="WSDiscovery11" discoveryMode="Managed"/>
  </discoveryEndpoint>
</standardEndpoints> 
```

# javascript - 将 onClick 函数更改为以编辑按钮为目标

> ID：14339620
> 
> 赞同：2
> 
> 时间：2013-01-15T14:14:51.033
> 
> 标签：javascript

我有以下脚本

```
var counter = 0;
function appendText(){

        var text = document.getElementById('usertext').value;

            if ( document.getElementById('usertext').value ){

                var div = document.createElement('div');
                div.className = 'divex';

                var li = document.createElement('li');
                li.setAttribute('id', 'list');  
                div.appendChild(li);

                var texty = document.createTextNode(text);
                var bigdiv = document.getElementById('addedText');

                var editbutton = document.createElement('BUTTON');
                editbutton.setAttribute('id', 'button_click');
                var buttontext = document.createTextNode('Edit');
                editbutton.appendChild(buttontext); 

                bigdiv.appendChild(li).appendChild(texty);
                bigdiv.appendChild(li).appendChild(editbutton);

                document.getElementById('button_click').setAttribute('onClick', makeAreaEditable());

                document.getElementById('usertext').value = "";
                counter++;
        }        
};                                                          

var makeAreaEditable = function(){    

    alert('Hello world!');
}; 
```

我希望 makeAreaeditable 函数在按下编辑按钮时工作（对于附加在文本区域下的每个编辑按钮）。在这种状态下，脚本会在我点击 Addtext 按钮时提醒我。

以下是html。PS我需要这个纯javascript，如果你能帮忙的话。谢谢

```
 <textarea id="usertext"></textarea>
    <button onClick="appendText()">Add text </button>

    <div id="addedText" style="float:left">
    </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T14:21:12.117

代替：

```
document.getElementById('button_click').setAttribute('onClick', makeAreaEditable()); 
```

你需要这样做：

```
editbutton.onclick = makeAreaEditable; 
```

函数的名称不带括号，除非你想执行它

`document.getElementById('button_click')` 您可以使用`editbutton`已经创建的变量，而不是使用从 DOM 获取元素。此对象是您要查找的 DOM 元素

旁注：执行此操作的标准方法是`onclick`在附加元素之前添加属性

# python - 启动后台进程 witk paramiko 和 python

> ID：14339622
> 
> 赞同：1
> 
> 时间：2013-01-15T14:14:56.690
> 
> 标签：python, ssh, background-process, paramiko

我正在编写python代码以在后台在远程服务器中启动服务，这意味着代码不会等到进程完成（它代表服务器）

我现在的代码是：

```
server_session = paramiko.SSHClient()
server_session.set_missing_host_key_policy(paramiko.AutoAddPolicy())
server_session.connect(SERVER[0], username=SERVER[1], password=SERVER[2])
server_session.exec_command('pkill python')
time.sleep(5)
server_session.exec_command(SERVER[3]) 
```

exec_command 不做这项工作提前谢谢

# android - UI重载+动画

> ID：14339623
> 
> 赞同：0
> 
> 时间：2013-01-15T14:15:07.280
> 
> 标签：android, listview, animation, user-interface, adapter

所以，我正在做一个应该像这张图片的应用程序：

## ![信息卡应用程序](../Images/221043baca0c4ab66456418bacc98b56.png)

它有一个列表视图，用户可以在其中选择要显示的内容，以及一个内容区域，当内容被选择时，它将被动画（滑入/滑出）。

内容区域必须动态构建，其布局会根据 JSON 请求中包含的信息发生变化，它由一个巨大的列表视图组成，每个项目都是一个信息部分（见图）。

问题是在 UI 线程中完成大量视图加载时为内容区域设置动画会导致动画中的巨大滞后和闪烁，并且无法在 UI 线程以外的线程中完成视图加载。

我尝试`AsyncTask`在适配器中使用一些 UI 加载在后台完成，但只有 ViewHolder 模式实例化和`findviewById`调用可以进入内部，所以我没有获得很大的性能增益。实际问题是 `.setText()`，`.setImageBitmap()`调用。

最后真正的问题是：为了获得流畅的动画，我能做些什么来在这个 UI 加载中获得更好的性能？

***注意：****考虑到用于填充内容区域的数据被硬编码以用于测试目的。*

* * *

**编辑：** 我的内容区域适配器中使用的代码：

```
public class InfoAdapter extends ArrayAdapter<Info> {

    private final LayoutInflater layoutInflater;
    private final Typeface typeface;

    public InfoAdapter(final Context context, final List<Info> list) {
        super(context, 0, list);
        this.layoutInflater = LayoutInflater.from(context);
        this.typeface = Typeface.createFromAsset(context.getAssets(), "fonts/"
                + Constants.DEFAULT_FONTNAME);
    }

    @Override
    public View getView(final int position, final View convertView,
            final ViewGroup parent) {

        View infoView = convertView;

        ViewHolder holder;
        if (infoView == null) {
            infoView = (RelativeLayout) layoutInflater.inflate(getItem(position).getLayout(), null);
            holder = new ViewHolder(
                    (TextView) infoView.findViewById(R.id.highlight_title),
                    (TextView) infoView.findViewById(R.id.info_title),
                    (TextView) infoView.findViewById(R.id.info_extra_info01),
                    (TextView) infoView.findViewById(R.id.info_extra_info02),
                    (TextView) infoView.findViewById(R.id.info_description),
                    (ImageView) infoView.findViewById(R.id.info_image),
                    (TextView) infoView.findViewById(R.id.info_subtitle),
                    (TextView) infoView.findViewById(R.id.info_subdescription),
                    (ImageView) infoView.findViewById(R.id.info_subimage));
            infoView.setTag(holder);
        } else {
            holder = (ViewHolder) infoView.getTag();
        }

        final String extraInfo01 = String.valueOf((int) (getItem(position).getValue() / 1));
        final String extraInfo02 = String.valueOf((int) ((getItem(position).getValue() % 1) * 100));

        setDataInView(holder.highlight, getItem(position).getFavorite());

        holder.title.setText(getItem(position).getName());
        holder.title.setTypeface(typeface);

        holder.extraInfo01.setText(extraInfo01);
        holder.extraInfo01.setTypeface(typeface);

        holder.extraInfo02.setText("," + extraInfo02);
        holder.extraInfo02.setTypeface(typeface);

        holder.description.setText(getItem(position).getDescription());
        holder.description.setTypeface(typeface);

        if (holder.image != null) {
            if (getItem(position).getImage() == 0) {
                holder.image.setVisibility(View.GONE);
            } else {
                holder.image.setVisibility(View.VISIBLE);
                holder.image.setImageResource(getItem(position).getImage());
            }
        }

        setDataInView(holder.subTitle, getItem(position).getHistoryTitle());
        setDataInView(holder.subDescription, getItem(position).getHistory());

        if (holder.subImage != null) {
            if (getItem(position).getUri() == null) {
                holder.subImage.setVisibility(View.GONE);
            } else {
                final Drawable subDrawable = Drawable.createFromPath(getItem(
                        position).getUri());
                holder.subImage.setVisibility(View.VISIBLE);
                holder.subImage.setImageDrawable(subDrawable);
            }
        }

        return infoView;
    }

    private void setDataInView(final TextView textView, final String data) {
        if (textView != null) {
            if (data.isEmpty()) {
                textView.setVisibility(View.GONE);
            } else {
                textView.setVisibility(View.VISIBLE);
                textView.setTypeface(typeface);
                textView.setText(data);
            }
        }
    }

    private static class ViewHolder {
        private final TextView highlight;
        private final TextView title;
        private final TextView extraInfo01;
        private final TextView extraInfo02;
        private final TextView description;
        private final ImageView image;
        private final TextView subTitle;
        private final TextView subDescription;
        private final ImageView subImage;

        public ViewHolder(final TextView highlight, final TextView title,
                final TextView extraInfo01, final TextView extraInfo02,
                final TextView description, final ImageView image,
                final TextView subTitle, final TextView subDescription,
                final ImageView subImage) {
            this.highlight = highlight;
            this.title = title;
            this.extraInfo01 = extraInfo01;
            this.extraInfo02 = extraInfo02;
            this.description = description;
            this.image = image;
            this.subTitle = subTitle;
            this.subDescription = subDescription;
            this.subImage = subImage;
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T22:19:23.760

我认为这条线可能是一个问题：

```
holder.image.setImageResource(getItem(position).getImage()); 
```

检查`setImageResource`文档中的内容：

> 这会在 UI 线程上进行位图读取和解码，这可能会导致延迟打嗝。如果这是一个问题，请考虑改用 setImageDrawable(android.graphics.drawable.Drawable) 或 setImageBitmap(android.graphics.Bitmap) 和 BitmapFactory。

对于图像的延迟加载，您应该检查[此链接](http://android-developers.blogspot.com/2010/07/multithreading-for-performance.html)。您应该更改声明`public void download(String url, ImageView imageView)`

至

```
public void download(int id, ImageView imageView) 
```

*身份证*是

```
getItem(position).getImage() 
```

# php - 显示页面直到满足条件然后重定向

> ID：14339624
> 
> 赞同：0
> 
> 时间：2013-01-15T14:15:14.557
> 
> 标签：php, loops, redirect, conditional-statements

我有一个保留页面，该页面创建后会重定向到另一个页面。

目前我的解决方案是每 5 秒刷新一次保存页面，每次检查是否已创建新页面。问题是页面闪烁。

有没有办法在标题中使用一个简单的 while 循环来做到这一点，但仍然显示持有页面 html。谢谢。当前代码如下。

```
<?php
ob_start();
$id = escapeshellarg($_GET['id']);
$id = str_replace("'", "", $id);
$url = 'http://sub.testxxx.com/'. $id . '/index.html';
$handle = @fopen($url,'r');
if(!$handle) {
header("Refresh: 5; url=http://testxxx.com/loading.php?id=".$id);
ob_flush;
} else {
sleep(5);
header("Location: http://sub.testxxx.com/".$id);
}
?>
<html>
...........

</html>
<?
ob_flush;
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T14:20:49.943

我会将它分成两部分：**1）**服务器端脚本（php）检查页面是否已创建；**2）**客户端脚本（javascript）每 n 秒通过 ajax 调用 php 脚本。如果 php 脚本返回 true，则 js 将客户端重定向到其新目的地。无需重新加载整个页面 - 并且没有闪烁；）

你需要一些示例代码吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T15:21:08.323

检查页面.php：

```
<?php
$id = escapeshellarg($_GET['id']);
$id = str_replace("'", "", $id);
$url = 'http://sub.testxxx.com/'. $id . '/index.html';
$handle = @fopen($url,'r');
if(!$handle) {
return true;
} else {
return false;
}
?> 
```

页面.php：

```
<html>
<head></head>
<body>
<script type="text/javascript">
$.ajax({
  url: 'checkPage.php?id=someId',
  success: function(data) {
    $(location).attr('href','http://sub.testxxx.com/someId/index.html');
  }
});
</script>
</body>
</html> 
```

# c# - 检查是否处理了所有枚举值

> ID：14339625
> 
> 赞同：4
> 
> 时间：2013-01-15T14:15:15.847
> 
> 标签：c#, security, unit-testing, enums, static-analysis

假设有一段代码：

```
enum Directions
{
    North,
    South,
    East,
    West
}

// (...)

switch (dir)
{
    case North : // Do sth
    case South : // Do sth
    case East : // Do sth
    case West : // Do sth
} 
```

特别注意缺乏`default:`指导。现在假设，后来有人向该枚举添加了另外四个值：`NorthEast`, `NorthWest`, `SouthEast`, `SouthWest`。在这种情况下，引用的代码很可能会影响未定义的行为，因为没有安全措施来处理对 Directions 枚举类型的可能扩展。

我有一些关于这个问题的问题。

1.  程序员是否应在此处实施安全措施，例如：

    ```
    default: throw new InvalidArgumentException("Unsupported enum value!"); 
    ```

2.  这个问题是否应该在单元测试中进行测试？

    ```
    // Naïve implementation, for example purposes only
    [ExpectedException(typeof(InvalidArgumentException))]
    [Test]
    void SomeTestMethod()
    {
        SomeFunction((Direction)-1);
    } 
    ```

    如果是这样，您将如何自动化此类测试（例如，找到与此枚举中的所有其他值不同的序数值，考虑枚举支持类型等）？

3.  静态代码分析时是否应该验证这件事？哪个工具可以提供这样的信息？我在 VS 2012 Pro 中编写了简单的概念证明，运行代码分析，但 IDE 报告说“未检测到代码分析问题”。

    编码：

    ```
    namespace ManagedConsoleSketchbook
    {
        class Program
        {
            enum MyEnum
            {
                One,
                Two,
                Three
            }

            static void Main(string[] args)
            {
                MyEnum e = MyEnum.One;

                switch (e)
                {
                    case MyEnum.One:
                        break;
                    case MyEnum.Two:
                        break;
                }
            }
        }
    } 
    ```

4.  有没有解决这个普遍问题的通用方法？例如。也许我可以使用反射在 C# 中编写复杂的测试方法，但在 C++ 中，与 C# 或其他高级语言相比，确定这种*潜在的代码完整性漏洞要困难得多。*

* * *

为什么我要问是否应该在单元测试期间检查它？这是因为 - 据我所知 - 单元测试应验证，*如果方法的行为与预期（记录）到*. 在这种情况下，它应该接受四个枚举元素中的任何一个，并且它确实做到了，所以所有测试都应该通过。在我看来，检查*潜在*问题似乎不是单元测试过程的关注点。如果我想验证单元测试中*潜在*问题的所有可能性，我可能最终会为 3 行代码方法编写数百个测试。

另一方面，当有人决定向枚举添加另一个值时，它似乎是一种非常便宜的（就花费的资源而言）方法来确保该方法不会引起任何严重的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T14:25:52.470

1：是的，我经常这样做。

2：是的。我要补充一点：

```
[ExpectedException(typeof(InvalidArgumentException))]
[Test]
void SomeTestMethod()
{
    Direction testValue = (Direction)-1;
    Assert.IsFalse(Enum.IsDefined(typeof(Direction), testValue));
    SomeFunction((Direction)-1);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T14:23:08.963

[这个问题实际上是在 VS-2012 中处理的](http://msdn.microsoft.com/en-us/library/96f5t7fy.aspx)。请注意，默认情况下禁用此测试。

启用警告后，您可以指示 Vs 将此特定警告视为错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T14:26:01.377

1.  是的
2.  这将是理想的测试。
3.  我不知道有什么工具可以做到这一点。
4.  最简单的方法是总是有一个默认子句。当默认值不应该做任何事情时，请编写如下内容：

    ```
    default:
        // No action required
        break; 
    ```

    这样，您的程序员至少会考虑剩余的项目（如果有的话）。

# mysql - sql分组时选择行

> ID：14339627
> 
> 赞同：1
> 
> 时间：2013-01-15T14:15:20.127
> 
> 标签：mysql, sql

```
id | field_1 | field_2
1  | a       | 1
2  | b       | 1

SELECT id, field_1 FROM table GROUP BY field_2 
```

这将获得 id = 1 的行，我怎样才能获得具有最大 id 的行？（我想得到 field_1 = b）。实现这一目标的最简单方法是什么？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T14:28:44.523

根据定义，这个表达式*没有*得到第一行：

```
SELECT id, field_1
FROM table
GROUP BY field_2 
```

它的作用是从*任意*行中获取`field2`. 任意行可能是第一行，但不能保证。查看隐藏列的[文档](http://dev.mysql.com/doc/refman/5.5/en/group-by-extensions.html)以了解这一点。

在 MySQL 中，您需要一个连接来获取具有最高 id 的行。这是一种方法：

```
select t.*
from t
where id = (select max(id) from t t2 where t2.field2 = t.field2) 
```

这将为 field2 的每个值获取具有最高 id 的所有行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T14:17:05.157

```
SELECT t1.id, t1.field_1, t2.IdSum
FROM table t1
INNER JOIN
(
  SELECT field_2, MAX(id) id, SUM(id) IdSum
  FROM  Table
  GROUP BY field_2
) t2  on t1.id = t2.id
     AND t1.field_2 = t2.field_2; 
```

# android - 本机应用程序在最小化到后台后重新启动

> ID：14339630
> 
> 赞同：0
> 
> 时间：2013-01-15T14:15:33.867
> 
> 标签：android, android-ndk, savestate

我有一个简单的本机应用程序进行调试，
只显示一个慢慢改变颜色的三角形。

现在，当我按下主页按钮并将我的应用程序置于后台
然后再次启动它时，它会完全重新启动。
我怎样才能恢复旧状态？

我已经尝试过这样做`native-app-example`：

```
app->userdata = &my_state;

if (app->savedState != NULL)
    my_state = *(State*)app->savedState; 
```

并`handle_cmd`与：

```
 case APP_CMD_SAVE_STATE:
        app->savedState = malloc(sizeof(State));
        *((State*)app->savedState) = my_state;
        app->savedStateSize = sizeof(State);
        break; 
```

`State`我想保存的所有东西在哪里上课。
我怎么能这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T19:52:27.790

不一定要上课。它可能是一个结构（实际上是“相同的”）。您必须拥有在该结构或类中恢复应用程序状态所需的所有值，并从该位置读取。

阅读一些示例，您会发现在应用程序 userData 中放置一个引擎是很正常的，例如：

```
app->userData = &engine; 
```

并在该引擎中，具有来自 State 的结构。通过这种方式，您可以只保存您需要的东西，而留下另一个。

重要的是始终使用该保存状态的值（如三角形的颜色），并使用您编写的代码进行恢复。

PD：对于更复杂的事情，当你使用动态内存时，你必须更微妙地保存数据。

# java - python - 什么是最大字节等效于 java Byte.MAX_VALUE

> ID：14339632
> 
> 赞同：2
> 
> 时间：2013-01-15T14:15:37.920
> 
> 标签：java, python, hbase

python 是否与`Byte.MAX_VALUE`代表最大字节的 java 等价？我看了一下 python`sys`模块，我只找到了`sys.maxint`. 它有类似的东西`sys.maxbyte`吗？

更新：

就我而言，我正在进行 Hbase Rowkey 扫描，我的 rowkey 看起来像 rk1_rk2。为了在不知道确切 rk2 的情况下扫描 rk1 的所有结果，我的 java 代码如下所示：

```
byte[] startRowBytes = "rk1".getBytes(); 
byte[] endRowBytes = ("rk1" + (char) Byte.MAX_VALUE).getBytes(); 

HbaseScanQuery query = new   HbaseScanQuery(tableName, colFamily);
query.setStartRow(startRowBytes).setStopRow(endRowBytes); 
```

我只是想弄清楚 Byte.MAX_VALUE 部分的 python 等价性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T14:23:17.883

我认为你必须自己定义价值。一个字节有 2^8 = 256 个唯一状态，因此它可以表示的最大整数是 255。然而，java 的字节类型是有符号字节，所以一半状态保留用于正数（和 0），另一半用于对于底片。因此java的Byte.MAX_VALUE的等价物是127，java的Byte.MIN_VALUE的等价物是-128

由于 python 字节是无符号的，因此 java 的 Byte.MIN_VALUE 的等价物将是 128，这是 2 的补码表示法（表示有符号整数的事实上的标准）中 -128 的表示，这要感谢 Ignacio Vazquez-Abrams 指出这一点。

我有一段时间没有处理 python，但我相信你想要的是 ("rk1"+chr(127))

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T15:57:19.243

鉴于您的更新，有一个更好的答案：不要担心最大字节值是多少。根据[HBase 文档](http://hbase.apache.org/book/data_model_operations.html)，`setStartRow`和`setStopRow`方法的工作方式就像 Python 的切片一样；即，开始是包容的，而停止是**排斥**的，这意味着你`endRowBytes`应该是`'rk2'`。

此外，文档提到您可以通过添加**零**字节来使停止行包含在内，因此另一种选择是`'rk1' + chr(0)`（或`'rk1\0'`或`'rk1\x00'`，以您最清楚的为准）。事实上，链接文档中用于解释 HBase 扫描的示例准确地说明了您的用例。

# php - java容器的div中的响应式绝对值

> ID：14339635
> 
> 赞同：0
> 
> 时间：2013-01-15T14:15:38.467
> 
> 标签：php, css, responsive-design

我的 Java 元素正在运行，我有绝对定位的“容器”。背景图像正在响应页面，但“容器”没有缩放。有没有办法让它们与它们位于“顶部”的图像一起缩放？这是我正在使用的一些代码。

CSS

```
#forest2 {

    width: 960px;
    max-width: 100%;
    margin-left: auto;
    margin-right: auto;
    margin-top: 20px;
} 
```

PHP

```
<div class="forest2" style = "position: relative" >
<img src = "http://xxx/wordpress/wp-content/uploads/2013/01/xxx.png">

    <div style = "position: absolute; top: 315px; left: 24px;" class="slideshow0" >
        <a href="http://xxx/wordpress/catch-test/"><img src="http://xxx/wordpress/wp-content/themes/responsive-child/images/1.jpg"/></a>
        <a href="http://xxx/wordpress/catch-test/"><img src="http://xxx/wordpress/wp-content/themes/responsive-child/images/2.jpg"/></a>
        <a href="http://xxx/wordpress/catch-test/"><img src="http://xxx/wordpress/wp-content/themes/responsive-child/images/3.jpg"/></a>
        <a href="http://xxx/wordpress/catch-test/"><img src="http://xxx/wordpress/wp-content/themes/responsive-child/images/4.jpg"/></a>
        <a href="http://xxx/wordpress/catch-test/"><img src="http://xxx/wordpress/wp-content/themes/responsive-child/images/5.jpg"/></a>
    </div> 
```

脚本语句..如果需要但可能不需要

```
<script type="text/javascript">
$(document).ready(function() {
    $('.slideshow0').cycle({
        fx: 'fade',
        random:     true,
        timeout:    6000,
        speed:      3000,
        delay:      100,

    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T05:39:52.933

用不同的方法解决。改编 AS3 以代替 java。它适用于响应式设计，并且所有变量都可以正常传递。

# visual-studio - 执行 SQL 脚本的 Visual Studio 项目

> ID：14339640
> 
> 赞同：0
> 
> 时间：2013-01-15T14:15:49.867
> 
> 标签：visual-studio, sql-server-2008

我有这个问题......可能类似于[在 Visual Studio 中从数据库项目执行脚本](https://stackoverflow.com/questions/1220705/executing-scripts-from-a-database-project-in-visual-studio)

但我不明白给出的解决方案。

所以我在 Visual Studio 中做了一个 Database Server 2008 项目。只有一张桌子。当我按下 DEPLOY 时，在 SQLServer2008 中创建数据库并创建表。

现在，如果我想将项目提供给拥有 SQLServer 并且他需要在他的计算机中重新创建数据库和表的人怎么办？.. 除了从 Visual Studio 执行查询之外，还有什么方法可以创建自动执行的可执行文件“从 Visual Studio 外部部署”？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T14:30:05.790

Visual Studio 中有不同类型的数据库项目。旧的，没有那么丰富的功能。[Visual Studio 2010 Team Database Edition 附带的“Data Dude”以及SQL Server Data Tools](http://msdn.microsoft.com/en-us/data/tools.aspx)附带的最新迭代。所有这些都可以安装在标准 Visual Studio Professional 之上，并且不需要额外的许可证。

SQL Server Data Tools 是最新的，也是最好的集成和最强大的变体。它还可用于比较现有模式并生成升级脚本或为您自动升级现有数据库中的模式。

在构建期间，将创建一个包，其中包含数据库的所有架构信息。然后，您可以使用[SQL Server 数据工具](https://stackoverflow.com/questions/8371879/deploy-sql-server-2012-db-project-via-command-line-sql-server-data-tools-ctp4)或[MSDeploy](http://msdn.microsoft.com/en-us/library/hh550081%28v=vs.103%29.aspx)提供的命令行工具将压缩架构文件部署到新的或现有的数据库。

如果需要，此部署机制还可以升级现有模式。

# vb.net - MS Access：从 Visual Basic 以编程方式将数据添加到图表

> ID：14339641
> 
> 赞同：0
> 
> 时间：2013-01-15T14:15:50.273
> 
> 标签：vb.net, ms-access, graph, vba

我正在寻找可以帮助我解决这个问题的人，这似乎很容易实现，但互联网上没有太多信息。

我正在使用 MS Access 和 Visual Basic，我想创建一个简单的条形图，提供我已经从许多查询中收集的参数。在这种情况下：关于每周升数的图表。我有一个查询来收集 4 个不同周的升量。我还提供了 X 轴的信息（上周、最近两周等）。它看起来像这样：

![例子](../Images/159f643e0bb720bc29b2a1f16d51cef8.png)

所以我想知道是否可以这样做，以及饼图和折线图。

我知道这可以用 Excel 轻松完成，但我不想打开另一个程序来读取信息。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T14:51:47.620

[如何在 MS Access 中制作图表将是我的第一个关键词搜索](http://www.smallbusinesscomputing.com/buyersguide/article.php/3841181/How-to-Make-Charts-in-Microsoft-Access.htm):)

然后我将在 MSDN 上检查适当的工具/属性可用性/软件更新等。

*   [这是一个简单的基础教程](http://office.microsoft.com/en-us/access-help/a-new-technique-for-adding-charts-in-access-HA001034600.aspx)

*   [这是整个 google 搜索，可以为您提供任何您想检查的主题。](https://www.google.com.sg/search?q=access+charts&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:en-GB:official&client=firefox-a)

请注意您在所描述的教程中使用的 MS Access 版本。在某些版本中，对软件本身进行了某些更改。如果不是 2007 年，你就很幸运了……

**编辑根据 OP 的评论**：

*   `temp`由于 OP 具​​有详尽/繁重的查询，因此建议根据最终查询创建表。
*   然后临时表可以充当视图，成为图表的数据源
*   [C#中VS2010中数据库图表的动态绑定](https://stackoverflow.com/questions/9916659/dynamic-binding-of-chart-from-database-in-vs2010-in-c-sharp)
*   [将查询作为数据源绑定到 MS Access 图表](http://msdn.microsoft.com/en-us/library/dd456766.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-1)。有一个称为`databindtable`图表属性的方法。你可以使用它：

例如`chart1.DataBindTable(yoursource,columname)`

本文提供了一个很好的示例代码。

# vb.net - 动态方法访问冲突，仅在运行 32 位时

> ID：14339645
> 
> 赞同：0
> 
> 时间：2013-01-15T14:16:05.750
> 
> 标签：vb.net, access-violation, il, dynamicmethod

我有以下代码用于创建动态方法来调用我的 VB.net 应用程序中的属性的 Set 方法，使用 .NET 3.5（无法切换到 Lambda 表达式样式）。[使用此处](http://jachman.wordpress.com/2006/08/22/2000-faster-using-dynamic-method-calls/)发布的示例，我添加了该函数，因为它不适用于`Int64`属性，主要是如果使用常规调用它`int`，取消装箱操作会导致 Invalid Cast 错误。所以我添加了代码来处理这个问题，但现在我遇到了一个新问题。在 64 位下运行时一切正常，但是一旦我更改为 32 位进程，调用委托的`Int64`属性会导致`AccessViolationException`, 尝试读取或写入受保护的内存。其他类型，如字符串，似乎工作正常。请参阅下面的代码，我做错了什么？

```
Public Shared Sub SetFieldData(Instance As Object, PropInfo As PropertyInfo, value As Object)

        Dim Compiled As Action(Of Object, Object) = Nothing
        If Not _PropSetterCache.TryGetValue(PropInfo, Compiled) Then
            SyncLock _PropSetterCache
                If Not _PropSetterCache.TryGetValue(PropInfo, Compiled) Then

                    'http://jachman.wordpress.com/2006/08/22/2000-faster-using-dynamic-method-calls/
                    Dim setMethod = PropInfo.GetSetMethod()

                    Dim arguments As Type() = New Type(1) {}
                    arguments(0) = GetType(Object)
                    arguments(1) = arguments(0)

                    Dim setter As New DynamicMethod([String].Concat("_Set", PropInfo.Name, "_"), Nothing, arguments, PropInfo.DeclaringType)
                    Dim generator As ILGenerator = setter.GetILGenerator()
                    generator.Emit(OpCodes.Ldarg_0)

                    generator.Emit(OpCodes.Castclass, PropInfo.DeclaringType)

                    If PropInfo.PropertyType.IsClass Then
                        generator.Emit(OpCodes.Ldarg_1)
                        generator.Emit(OpCodes.Castclass, PropInfo.PropertyType)
                    ElseIf PropInfo.PropertyType Is GetType(Boolean) Then
                        generator.Emit(OpCodes.Ldarg_1)
                        generator.Emit(OpCodes.Unbox_Any, PropInfo.PropertyType)
                    ElseIf PropInfo.PropertyType.IsValueType Then
                        'my stuff, blog example doesn't cover the sent value being different type than the property

                        Dim LByte = generator.DefineLabel
                        Dim LInt = generator.DefineLabel
                        Dim LInt16 = generator.DefineLabel
                        Dim LInt32 = generator.DefineLabel
                        Dim LInt64 = generator.DefineLabel
                        Dim LSByte = generator.DefineLabel
                        Dim LUInt16 = generator.DefineLabel
                        Dim LUInt32 = generator.DefineLabel
                        Dim LUInt64 = generator.DefineLabel
                        Dim LDouble = generator.DefineLabel
                        Dim LSingle = generator.DefineLabel
                        Dim LElse = generator.DefineLabel
                        Dim LEnd = generator.DefineLabel

                        'byte
                        generator.Emit(OpCodes.Ldarg_1)
                        generator.Emit(OpCodes.Isinst, GetType(Byte))
                        generator.Emit(OpCodes.Brtrue, LByte)
                        'int
                        generator.Emit(OpCodes.Ldarg_1)
                        generator.Emit(OpCodes.Isinst, GetType(Integer))
                        generator.Emit(OpCodes.Brtrue, LInt)
                        'int16
                        generator.Emit(OpCodes.Ldarg_1)
                        generator.Emit(OpCodes.Isinst, GetType(Int16))
                        generator.Emit(OpCodes.Brtrue, LInt16)
                        'int32
                        generator.Emit(OpCodes.Ldarg_1)
                        generator.Emit(OpCodes.Isinst, GetType(Int32))
                        generator.Emit(OpCodes.Brtrue, LInt32)
                        'int64
                        generator.Emit(OpCodes.Ldarg_1)
                        generator.Emit(OpCodes.Isinst, GetType(Int64))
                        generator.Emit(OpCodes.Brtrue, LInt64)
                        'double 
                        generator.Emit(OpCodes.Ldarg_1)
                        generator.Emit(OpCodes.Isinst, GetType(Double))
                        generator.Emit(OpCodes.Brtrue, LDouble)
                        'short
                        generator.Emit(OpCodes.Ldarg_1)
                        generator.Emit(OpCodes.Isinst, GetType(Single))
                        generator.Emit(OpCodes.Brtrue, LSingle)
                        'sbyte
                        generator.Emit(OpCodes.Ldarg_1)
                        generator.Emit(OpCodes.Isinst, GetType(SByte))
                        generator.Emit(OpCodes.Brtrue, LSByte)
                        'uint16
                        generator.Emit(OpCodes.Ldarg_1)
                        generator.Emit(OpCodes.Isinst, GetType(UInt16))
                        generator.Emit(OpCodes.Brtrue, LUInt16)
                        'uint32
                        generator.Emit(OpCodes.Ldarg_1)
                        generator.Emit(OpCodes.Isinst, GetType(UInt32))
                        generator.Emit(OpCodes.Brtrue, LUInt32)
                        'uint64
                        generator.Emit(OpCodes.Ldarg_1)
                        generator.Emit(OpCodes.Isinst, GetType(UInt64))
                        generator.Emit(OpCodes.Brtrue, LUInt64)
                        'else
                        generator.Emit(OpCodes.Br, LElse)

                        '
                        generator.MarkLabel(LByte)
                        generator.Emit(OpCodes.Ldarg_1)
                        generator.Emit(OpCodes.Unbox_Any, GetType(Byte))
                        generator.Emit(OpCodes.Br, LEnd)
                        '
                        generator.MarkLabel(LInt)
                        generator.Emit(OpCodes.Ldarg_1)
                        generator.Emit(OpCodes.Unbox_Any, GetType(Integer))
                        generator.Emit(OpCodes.Br, LEnd)
                        '
                        generator.MarkLabel(LInt16)
                        generator.Emit(OpCodes.Ldarg_1)
                        generator.Emit(OpCodes.Unbox_Any, GetType(Int16))
                        generator.Emit(OpCodes.Br, LEnd)
                        '
                        generator.MarkLabel(LInt32)
                        generator.Emit(OpCodes.Ldarg_1)
                        generator.Emit(OpCodes.Unbox_Any, GetType(Int32))
                        generator.Emit(OpCodes.Br, LEnd)
                        '
                        generator.MarkLabel(LInt64)
                        generator.Emit(OpCodes.Ldarg_1)
                        generator.Emit(OpCodes.Unbox_Any, GetType(Int64))
                        generator.Emit(OpCodes.Br, LEnd)
                        '
                        generator.MarkLabel(LDouble)
                        generator.Emit(OpCodes.Ldarg_1)
                        generator.Emit(OpCodes.Unbox_Any, GetType(Double))
                        generator.Emit(OpCodes.Br, LEnd)
                        '
                        generator.MarkLabel(LSingle)
                        generator.Emit(OpCodes.Ldarg_1)
                        generator.Emit(OpCodes.Unbox_Any, GetType(Single))
                        generator.Emit(OpCodes.Br, LEnd)
                        '
                        generator.MarkLabel(LSByte)
                        generator.Emit(OpCodes.Ldarg_1)
                        generator.Emit(OpCodes.Unbox_Any, GetType(SByte))
                        generator.Emit(OpCodes.Br, LEnd)
                        '
                        generator.MarkLabel(LUInt16)
                        generator.Emit(OpCodes.Ldarg_1)
                        generator.Emit(OpCodes.Unbox_Any, GetType(UInt16))
                        generator.Emit(OpCodes.Br, LEnd)
                        '
                        generator.MarkLabel(LUInt32)
                        generator.Emit(OpCodes.Ldarg_1)
                        generator.Emit(OpCodes.Unbox_Any, GetType(UInt32))
                        generator.Emit(OpCodes.Br, LEnd)
                        '
                        generator.MarkLabel(LUInt64)
                        generator.Emit(OpCodes.Ldarg_1)
                        generator.Emit(OpCodes.Unbox_Any, GetType(UInt64))
                        generator.Emit(OpCodes.Br, LEnd)
                        '
                        generator.MarkLabel(LElse)
                        generator.Emit(OpCodes.Ldarg_1)
                        generator.Emit(OpCodes.Unbox_Any, PropInfo.PropertyType)
                        generator.Emit(OpCodes.Br, LEnd)

                        generator.MarkLabel(LEnd)

                    End If

                    generator.Emit(OpCodes.Callvirt, setMethod)
                    generator.Emit(OpCodes.Ret)

                    Compiled = setter.CreateDelegate(GetType(Action(Of Object, Object)))

                    _PropSetterCache.Add(PropInfo, Compiled)

                End If
            End SyncLock
        End If

        Compiled(Instance, value)

    End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T16:18:14.473

如果我为 .Net 4.5 编译您的代码，`InvalidProgramException`无论它是编译为 32 位还是 64 位，我都会得到。这是因为您不能简单地将一种类型的值分配给完全不同类型的字段。您需要包含正确的强制转换，这会使您的代码更加复杂。我认为您的代码在某些情况下确实有效的事实是 .Net 中的一个错误（在较新版本中已修复）。

但是您*可以*使用表达式来执行此操作，即使在 .Net 3.5 中也是如此。`Assign`您可以使用`Call`set 方法而不是 using 。您不能将该方法作为 VB.NET（或 C#）中的方法调用，但您可以在表达式中执行此操作。

但要使其正常工作，您需要将值转换两次：首先将其拆箱，然后将其转换为所需的类型。但正因为如此，生成的代码取决于值的类型。这意味着您需要将缓存的键更改为类似`Tuple(Of PropertyInfo, Type)`.

代码可能如下所示：

```
Private Shared ReadOnly _PropSetterCache As Dictionary(Of Tuple(Of PropertyInfo, Type), Action(Of Object, Object)) _
    = New Dictionary(Of Tuple(Of PropertyInfo, Type), Action(Of Object, Object))

Public Shared Sub SetFieldData(instance As Object, propInfo As PropertyInfo, value As Object)

    Dim compiled As Action(Of Object, Object) = Nothing
    Dim key = New Tuple(Of PropertyInfo, Type)(propInfo, If(value IsNot Nothing, value.GetType(), GetType(Object)))
    If Not _PropSetterCache.TryGetValue(key, compiled) Then
        SyncLock _PropSetterCache
            If Not _PropSetterCache.TryGetValue(key, compiled) Then
                Dim setMethod = propInfo.GetSetMethod()

                Dim instanceParameter = Expression.Parameter(GetType(Object), "instance")
                Dim castedInstance = Expression.Convert(instanceParameter, propInfo.DeclaringType)

                Dim valueParameter = Expression.Parameter(GetType(Object), "value")
                Dim valueCastedOnce = Expression.Convert(valueParameter, If(value IsNot Nothing, value.GetType(), GetType(Object)))
                Dim valueCastedTwice = Expression.Convert(valueCastedOnce, propInfo.PropertyType)

                Dim callExpression = Expression.Call(castedInstance, setMethod, valueCastedTwice)

                Dim lambda = Expression.Lambda(Of Action(Of Object, Object))(callExpression, instanceParameter, valueParameter)

                compiled = lambda.Compile()

                _PropSetterCache.Add(key, compiled)

            End If
        End SyncLock
    End If

    compiled(instance, value)

End Sub 
```

.Net 3.5 没有`Tuple`，但您可以自己创建一个：

```
NotInheritable Class Tuple(Of T1, T2)
    Implements IEquatable(Of Tuple(Of T1, T2))
    Private ReadOnly _value1 As T1

    Public ReadOnly Property Value1 As T1
        Get
            Return _value1
        End Get
    End Property

    Private ReadOnly _value2 As T2

    Public ReadOnly Property Value2 As T2
        Get
            Return _value2
        End Get
    End Property

    Public Sub New(ByVal value1 As T1, ByVal value2 As T2)
        _value1 = value1
        _value2 = value2
    End Sub

    '' following code generated by R#
    Public Overloads Function Equals(ByVal other As Tuple(Of T1, T2)) As Boolean Implements IEquatable(Of Tuple(Of T1, T2)).Equals
        If ReferenceEquals(Nothing, other) Then Return False
        If ReferenceEquals(Me, other) Then Return True
        Return EqualityComparer(Of T1).[Default].Equals(_value1, other._value1) AndAlso EqualityComparer(Of T2).[Default].Equals(_value2, other._value2)
    End Function

    Public Overloads Overrides Function Equals(ByVal obj As Object) As Boolean
        If ReferenceEquals(Nothing, obj) Then Return False
        If ReferenceEquals(Me, obj) Then Return True
        Return TypeOf obj Is Tuple(Of T1, T2) AndAlso Equals(DirectCast(obj, Tuple(Of T1, T2)))
    End Function

    Public Overrides Function GetHashCode() As Integer
        Dim hashCode = EqualityComparer(Of T1).[Default].GetHashCode(_value1)
        hashCode = CInt((hashCode * 397L) Mod Integer.MaxValue) Xor EqualityComparer(Of T2).[Default].GetHashCode(_value2)
        Return hashCode
    End Function
End Class 
```

# node.js - Node.js - 类型错误：对象# has no method I am trying to include a module i found that will help manage users: http://www.codeproject.com/Ar 问问题 问问题 2013-01-15T14:16:45.517 16215 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I am trying to include a module i found that will help manage users: http://www.codeproject.com/Articles/382561/Session-Management-in-Nodejs Ive copied the code and put it in the same directory as my server.js I require it by doing: var express = require('express'); var http = require('http'), mysql = require("mysql"); var server = http.createServer(app); var io = require('socket.io').listen(server); var sessionMgm = require("./sessionManagement"); Now in my socket i do this: io.sockets.on('connection', function (socket) { socket.on('setUserInfo', function (data) { var sess = new Object(); sess.sessionId = socket.id; sess.userId = data.userId; sess.username = data.username; sess.role = data.role; sessionMgm.add(sess); }); socket.on("private", function(data) { if(data.agentName.length <= 0) { data.agentName = 'Besökare'; } io.sockets.in('Room_' + data.user_id).emit('updatechat', data.agentName, data.msg); var user = sessionMgm.getSessionByUserId(data.id); console.log('::: A socket with ID ' + user + ' connected! ::: '); }); }); However i keep getting this error: TypeError: Object # has no method 'getSessionByUserId' Cant seem to figure out whats wrong, any ideas? sessionManagement.js: module.exports = sessionManagement; var sessions = []; //User roles list var userRoles = { Admin: "administrator", User: "user", Supervisor: "supervisor" }; var sessionManagement = { indexOf: function(sessionId) { for(var i in sessions) { if(sessions[i].sessionId == sessionId) return i; } return null; }, indexOfUser: function(userId) { for(var i in sessions) { if(sessions[i].userId == userId) return i; } return null; }, add: function(sessionData) { sessions.push(sessionData); }, remove: function(sessionId) { var index = this.indexOf(sessionId); if(index != null) { sessions.splice(index, 1); } else { return null; } }, removeByUserId: function(userId) { var index = this.indexOf(userId); if(index != null) { sessions.splice(index, 1); } else { return null; } }, getSessionById: function(userId) { var index = this.indexOfUser(userId); if(index != null) { return sessions[index]; } else { return null; } }, getSessionByUserId: function(sessionId) { var index = this.indexOfUser(userId); if(index != null) { return sessions[index]; } else { return null; } }, isAdmin: function(userId) { var index = this.indexOfUser(userId); if(index != null) { if(users[index].role == userRoles.Admin) { return true; } else { return false; } } else { return null; } }, getUsersByRole: function(role) { var usersByRole = []; for(var i in users) { if(users[i].role == role) usersByRole.push(users[i]); } return usersByRole; } }; As madflow mentioned, you were missing module.exports = sessionManagement in sessionManagement.js Then you got the error, because you were exporting sessionManagement, before initializing it. Moving the export line to the end of sessionManagement.js should fix that. module.exports = sessionManagement; // <- you export here ... ... ... var sessionManagement = { // and initialize here Although sessionManagement declaration gets hoisted to the top of the module (and that's why you don't get Unexpected identifier or ReferenceError when assigning it to module.exports), it's initialization does not, so what really happens behind the scenes is something like that: var sessionManagement; // undefined at this point module.exports = sessionManagement; // <- you export here, // but sessionManagement is undefined at this point // and so will be module.exports after this line ... ... ... sessionManagement = { // and initialize here node.js 4 1 回答 1 This answer is useful 4 正如 madflow 提到的，你module.exports = sessionManagement在sessionManagement.js 然后你得到了错误，因为你sessionManagement在初始化它之前正在导出。将出口线移到末尾sessionManagement.js应该可以解决这个问题。 module.exports = sessionManagement; // <- you export here ... ... ... var sessionManagement = { // and initialize here 虽然sessionManagement声明被提升到模块的顶部（这就是为什么你没有得到Unexpected identifier或ReferenceError将它分配给时module.exports），但它的初始化没有，所以幕后真正发生的事情是这样的： var sessionManagement; // undefined at this point module.exports = sessionManagement; // <- you export here, // but sessionManagement is undefined at this point // and so will be module.exports after this line ... ... ... sessionManagement = { // and initialize here 于 2013-01-15T14:32:33.293 回答 Related 2 sql-server-2008-r2 - 在 SQL Server 2008 R2 的另一个 SNAPSHOT 事务中写入 SNAPSHOT 隔离级别块写入 1 c++ - 由于不一致而无法追踪崩溃 3 ruby-on-rails - Rails 验证错误不包括属性名称 1 php - FOSUserBundle 自定义错误信息 change_password 1 python - Python 语法空格 1 drupal - Drupal 7 更改 IMCE 文件上传路径（目标）？ 5 mysql - table_schema 和 table_name 关系的工具 1 c++ - 为什么 C++ 中有替代标记？ 1 android - 在 Android 4.1 中打开图库 2 python - 你能解释一下 mod_wsgi 和 werkzeug 之间更详细的区别吗？（求救新手） Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：14339654
> 
> 赞同：1
> 
> 时间：
> 
> 标签：node.js

I am trying to include a module i found that will help manage users: [http://www.codeproject.com/Articles/382561/Session-Management-in-Nodejs](http://www.codeproject.com/Articles/382561/Session-Management-in-Nodejs)

> Ive copied the code and put it in the same directory as my server.js

I require it by doing:

```
var express = require('express');
var http = require('http'), 
mysql = require("mysql");
var server = http.createServer(app);
var io = require('socket.io').listen(server);
var sessionMgm = require("./sessionManagement"); 
```

Now in my socket i do this:

```
io.sockets.on('connection', function (socket) {

    socket.on('setUserInfo', function (data) {
        var sess = new Object();
        sess.sessionId = socket.id;
        sess.userId = data.userId;
        sess.username = data.username;
        sess.role = data.role;
        sessionMgm.add(sess);
    });

    socket.on("private", function(data) { 
        if(data.agentName.length <= 0) {
            data.agentName = 'Besökare';
        }       
        io.sockets.in('Room_' + data.user_id).emit('updatechat', data.agentName, data.msg);
        var user = sessionMgm.getSessionByUserId(data.id);

        console.log('::: A socket with ID ' + user + ' connected! ::: ');
    });

}); 
```

However i keep getting this error:

> TypeError: Object # has no method 'getSessionByUserId'

Cant seem to figure out whats wrong, any ideas?

sessionManagement.js:

```
module.exports = sessionManagement;

var sessions = [];

//User roles list
var userRoles = {
  Admin: "administrator",
  User: "user",
  Supervisor: "supervisor"
};

var sessionManagement = {
  indexOf: function(sessionId) {
    for(var i in sessions) {
        if(sessions[i].sessionId == sessionId)
            return i;
    }

    return null;
  },
  indexOfUser: function(userId) {
    for(var i in sessions) {
        if(sessions[i].userId == userId)
            return i;
    }

    return null;
  },

  add: function(sessionData) {
    sessions.push(sessionData);
  },
  remove: function(sessionId) {
    var index = this.indexOf(sessionId);
    if(index != null) {
        sessions.splice(index, 1);
    } else {
        return null;
    }
  },
  removeByUserId: function(userId) {
    var index = this.indexOf(userId);
    if(index != null) {
        sessions.splice(index, 1);
    } else {
        return null;
    }
  },

  getSessionById: function(userId) {
    var index = this.indexOfUser(userId);
    if(index != null) {
        return sessions[index];
    } else {
        return null;
    }
  },
  getSessionByUserId: function(sessionId) {
    var index = this.indexOfUser(userId);
    if(index != null) {
        return sessions[index];
    } else {
        return null;
    }
  },

  isAdmin: function(userId) {
    var index = this.indexOfUser(userId);
    if(index != null) {
        if(users[index].role == userRoles.Admin) {
            return true;
        } else {
            return false;
        }
    } else {
        return null;
    }
  },
  getUsersByRole: function(role) {
    var usersByRole = [];
    for(var i in users) {
        if(users[i].role == role)
            usersByRole.push(users[i]);
    }

    return usersByRole;
  }
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T14:32:33.293

正如 madflow 提到的，你`module.exports = sessionManagement`在`sessionManagement.js`

然后你得到了错误，因为你`sessionManagement`在初始化它之前正在导出。将出口线移到末尾`sessionManagement.js`应该可以解决这个问题。

```
module.exports = sessionManagement; // <- you export here
    ...
    ...
    ...
var sessionManagement = { // and initialize here 
```

虽然`sessionManagement`声明被提升到模块的顶部（这就是为什么你没有得到`Unexpected identifier`或`ReferenceError`将它分配给时`module.exports`），但它的初始化没有，所以幕后真正发生的事情是这样的：

```
var sessionManagement;  // undefined at this point

module.exports = sessionManagement; // <- you export here, 
// but sessionManagement is undefined at this point 
// and so will be module.exports after this line
    ...
    ...
    ...
sessionManagement = { // and initialize here 
```

# php - 遇到“致命错误”时未调用对象析构函数

> ID：14339657
> 
> 赞同：0
> 
> 时间：2013-01-15T14:16:59.033
> 
> 标签：php, error-handling

我的模型中有以下逻辑：

```
if ( $switch_obj->connect() )  {
  if ( $data = $switch_obj->showIntAll() )  {
        $switch_obj->disconnect();  
        return $data;
  }
  else  {
     $switch_obj->disconnect();
     throw new Exception('Empty Data Set');
  }
}
else  {                                     
   throw new Exception('Connection');                                  
    } 
```

这个被调用的 switch_obj 在它的构造函数和析构函数中具有分别递增/递减计数器的逻辑。（保存在一个名为 testclass 的类中）。因此，每次实例化类型为 testclass 的对象时，都会增加一个计数器。然后当被销毁时，它会递减。但是，我刚刚发现了一个我没有处理的场景。

> 致命错误：在第 215 行的 /var/www/myapp/application/models/test_model.php 中调用未定义的方法 testclass::showIntAll()

很明显，我正在调用一个不存在的方法，我将解决它。但我的问题是：在创建这个错误时，我可以看到计数器已经增加了......但没有减少，因为一旦抛出这个错误，它就永远不会返回到我的类中的析构函数方法。我将如何针对这些类型的场景进行编程？显然，在生产中，我不会因为 testclass 中缺少方法而出错......但如果我在调用 testclass 构造函数时遇到意外错误，然后它会爆炸，我只是想知道最好的方法是什么是处理这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T14:25:35.953

您可以使用[register_shutdown_function](http://php.net/manual/en/function.register-shutdown-function.php)实现一些目标。您的构造函数可以注册一个清理函数，如果发生错误，该函数将被调用。您必须小心不要两次调用清理代码（一次来自析构函数，一次来自此注册函数。

不是一个很好的解决方案，但它可以工作:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T14:24:10.297

据我所知，在致命错误上不会调用析构函数

# javascript - Jade引擎：从属性内的变量设置值

> ID：14339661
> 
> 赞同：4
> 
> 时间：2013-01-15T14:17:09.773
> 
> 标签：javascript, express, pug

我是 Jade Engine 的初学者，无法在属性内设置值。所以，我有一个类似的代码：

```
 for job in jobs
   tr
    td
     a(href="/job/= job.ID")= job.Title 
```

= job.Title 显示正确，但我无法设置 job.ID。我需要像 /job/12345 这样的 href 链接，其中 12345 是 job.ID。怎么做？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-15T14:45:52.887

应该`a(href="/job/#{job.ID}")`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-17T12:20:18.600

这将起作用：

```
a(href="/job/" + job.ID) 
```

# java - java方法的顶部是什么

> ID：14339667
> 
> 赞同：1
> 
> 时间：2013-01-15T14:17:26.143
> 
> 标签：java

我不记得调用方法的顶部是什么，当您将鼠标悬停在方法上时将显示的部分，例如，servlet 中 doPost 方法的默认顶部是：

```
 /**
 * Handles the HTTP <code>POST</code> method.
 *
 * @param   request   servlet request
 * @param   response  servlet response
 *
 * @throws  ServletException  DOCUMENT ME!
 * @throws  IOException       DOCUMENT ME!
 */ 
```

这个顶部被称为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T14:19:58.900

如果它以

```
/* 
```

它是一个普通的注释块，但它以

```
/** 
```

这意味着它是一个 Javadoc 注释。

# codeigniter - 更改 Codeigniter 网址

> ID：14339670
> 
> 赞同：0
> 
> 时间：2013-01-15T14:17:33.173
> 
> 标签：codeigniter

我正在使用 Codeigniter。我想将 href attr 设置为：

```
<a href="/contact.html" >Contact</a> 
```

但我收到 404 错误，因为我应该写

```
<a href="./contact.html">Contact</a>. 
```

有什么东西可以解决这个问题。

请提供任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T14:36:03.673

假设您有一个名为**Contact**的控制器并且您成功扩展了**CI_Controller**类，请转到**application/config**文件夹并在**config.php**中找到：

```
$config['base_url'] = 'http://www.youdomain.com/'; 
```

然后在您的内部链接中，您应该执行以下操作：

```
<a href="<?php echo base_url(); ?>contact">Contact</a> 
```

如果您使用**javascript**进行重定向，请放在**js**文件的顶部：

```
var host = 'http://www.yourdomain.com/'; 
```

再次：

```
window.location.href = host + 'contact'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T14:23:57.043

如果您使用的是 codeigniter，则不想指向 .html 文件。

如果您正确使用 codeigniter，则应使用 codeigniter 中存在的辅助方法。

与其自己编写锚标签，不如试试这个：

```
<?php echo anchor('contact', 'Contact'); ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T02:38:40.317

在调用时将后缀添加到您的控制器转到**config/config.php**并搜索

```
$config['url_suffix'] = ''; 
```

并将html分配给它成为

```
$config['url_suffix'] = 'html'; 
```

# c# - WIALib.dll 和 WIAVideo.dll 在 Windows 7 上不支持

> ID：14339672
> 
> 赞同：-1
> 
> 时间：2013-01-15T14:17:51.970
> 
> 标签：c#

在 Windows 7 上运行时

> WIAVideoLib.ViaVideoClass.CreateVideoByName () 发生异常“类未注册 HRESULT：0x80040154”

运行时没问题，在 Windows XP 上。请帮忙...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T14:38:42.540

WIA Video的[MSDN 文章](http://msdn.microsoft.com/en-us/library/ms630377%28VS.85%29.aspx)中明确提到了这一点：

> 注意 WIA 不支持 Windows Server 2003、Windows Vista 或更高版本中的视频设备。对于那些版本的 Windows，使用 DirectShow 从视频中获取图像。

[DirectShow.NET](http://directshownet.sourceforge.net/)是一个常用的 C# 包装库。

# sql - 如何优化这个 SQL 查询？

> ID：14339678
> 
> 赞同：0
> 
> 时间：2013-01-15T14:18:17.840
> 
> 标签：sql, sql-server, sql-server-2008, query-optimization

现在我有这个，它检索大约 16K 记录：

```
DECLARE @LINE_ID INT
SET @LINE_ID = 37
SELECT 
    a.eventType as 'evento', 
    a.tipo as 'tipo', 
    a.nroSoldadura as 'nro soldadura', 
    a.cuentaOdometrica as 'Distancia Absoluta [m]',
    a.x as 'x', 
    a.y as 'y', 
    a.z as 'z', 
    a.zonaGeografica as 'Zona geografica', 
    a.orientacionSoldadura as 'orientacion', 
    a.prof * 100 as 'prof maxima [%]',
    a.longitud as 'long. [mm]',
    a.ancho as 'ancho [mm]',
    a.IntExt as 'INT o EXT',
    a.cluster as 'Cluster',
    a.espesorPared as 'espesor de pared nominal',
    a.longitudEfectiva as 'longitud efectiva',
    a.anchoEfectivo as 'Ancho efectivo',
    a.areaEfectiva as 'Area efectiva',
    a.factorSeguridad as 'Factor de seguridad',
    a.MAOP as 'MAOP (kPa)',
    a.ruptura as 'Ruptura 0.85dL (kPa)',
    a.FER as 'FER',
    NULL as 'Diametro maximo',
    NULL as 'Diametro minimo',
    NULL as 'Ovalizacion',
    NULL as 'Ovalizacion axial',
    a.orientacionSoldadura as 'Orientacion soldadura',
    a.velocidadHerramienta as 'Velc Herr',
    a.comentarios as 'comentarios'
FROM ILI_IMPORT_MFL as a
JOIN ILI_INSPECTION as b ON a.ILI_INSPECTION_ID = b.ILI_INSPECTION_ID
WHERE 
    a.ID IN (
        SELECT TOP 1 c.ID
        FROM ILI_IMPORT_MFL as c 
        JOIN ILI_INSPECTION as d ON c.ILI_INSPECTION_ID = d.ILI_INSPECTION_ID
        WHERE a.nroSoldadura = c.nroSoldadura
            AND d.LINE_ID = @LINE_ID
        ORDER BY d.BEGIN_DATE 
    )
    AND b.LINE_ID = @LINE_ID
ORDER BY a.nroSoldadura, b.BEGIN_DATE 
```

ILI_IMPORT_MFL 和 ILI_INSPECTION 之间存在连接，因为 ILI_INSPECTION 包含我需要的日期和行 ID。
由于子查询，现在这个查询需要大约 6 分钟来执行。子查询在那里，因为每个 nroSoldadura 可能有不止一行，我只想要其中最旧的一行。

我正在使用 SQL Server 2008。
我该如何解决这个问题？谢谢。

编辑：尝试向 nroSoldadura 和 BEGIN_DATE 列添加索引，并将查询时间缩短到 30 秒。仍然很高兴看到可能的优化以便学习。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T14:31:11.313

您可以尝试使用`ROW_NUMBER() ... PARTITION BY`来替换您的子查询：

```
DECLARE @LINE_ID INT
SET @LINE_ID = 37
SELECT 
    a.eventType as 'evento', 
    a.tipo as 'tipo', 
    a.nroSoldadura as 'nro soldadura', 
    a.cuentaOdometrica as 'Distancia Absoluta [m]',
    a.x as 'x', 
    a.y as 'y', 
    a.z as 'z', 
    a.zonaGeografica as 'Zona geografica', 
    a.orientacionSoldadura as 'orientacion', 
    a.prof * 100 as 'prof maxima [%]',
    a.longitud as 'long. [mm]',
    a.ancho as 'ancho [mm]',
    a.IntExt as 'INT o EXT',
    a.cluster as 'Cluster',
    a.espesorPared as 'espesor de pared nominal',
    a.longitudEfectiva as 'longitud efectiva',
    a.anchoEfectivo as 'Ancho efectivo',
    a.areaEfectiva as 'Area efectiva',
    a.factorSeguridad as 'Factor de seguridad',
    a.MAOP as 'MAOP (kPa)',
    a.ruptura as 'Ruptura 0.85dL (kPa)',
    a.FER as 'FER',
    NULL as 'Diametro maximo',
    NULL as 'Diametro minimo',
    NULL as 'Ovalizacion',
    NULL as 'Ovalizacion axial',
    a.orientacionSoldadura as 'Orientacion soldadura',
    a.velocidadHerramienta as 'Velc Herr',
    a.comentarios as 'comentarios'
    ROW_NUMBER() OVER (PARTITION BY a.ID ORDER BY d.BEGIN_DATE) As row
FROM ILI_IMPORT_MFL as a
JOIN ILI_INSPECTION as b ON a.ILI_INSPECTION_ID = b.ILI_INSPECTION_ID
WHERE 
    row = 1
    AND b.LINE_ID = @LINE_ID
ORDER BY a.nroSoldadura, b.BEGIN_DATE 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T14:33:04.047

你想用`row_number()`这个。您需要将其放在子查询中。我认为这就是你想要的：

```
select * from (
SELECT 
    a.eventType as 'evento', 
    a.tipo as 'tipo', 
    a.nroSoldadura as 'nro soldadura', 
    a.cuentaOdometrica as 'Distancia Absoluta [m]',
    a.x as 'x', 
    a.y as 'y', 
    a.z as 'z', 
    a.zonaGeografica as 'Zona geografica', 
    a.orientacionSoldadura as 'orientacion', 
    a.prof * 100 as 'prof maxima [%]',
    a.longitud as 'long. [mm]',
    a.ancho as 'ancho [mm]',
    a.IntExt as 'INT o EXT',
    a.cluster as 'Cluster',
    a.espesorPared as 'espesor de pared nominal',
    a.longitudEfectiva as 'longitud efectiva',
    a.anchoEfectivo as 'Ancho efectivo',
    a.areaEfectiva as 'Area efectiva',
    a.factorSeguridad as 'Factor de seguridad',
    a.MAOP as 'MAOP (kPa)',
    a.ruptura as 'Ruptura 0.85dL (kPa)',
    a.FER as 'FER',
    NULL as 'Diametro maximo',
    NULL as 'Diametro minimo',
    NULL as 'Ovalizacion',
    NULL as 'Ovalizacion axial',
    a.orientacionSoldadura as 'Orientacion soldadura',
    a.velocidadHerramienta as 'Velc Herr',
    a.comentarios as 'comentarios',
    ROW_NUMBER() over (partition by a.nroSoldadura order by begin_date desc) as seqnum
FROM ILI_IMPORT_MFL as a
JOIN ILI_INSPECTION as b ON a.ILI_INSPECTION_ID = b.ILI_INSPECTION_ID
where b.line_id = @line_id
)
where seqnum = 1 
```

# meteor - 获取 Meteor 模板的外部上下文

> ID：14339681
> 
> 赞同：3
> 
> 时间：2013-01-15T14:18:20.253
> 
> 标签：meteor

我有以下用例：有些房间里面有床。（无赖……）

有一个使用模板“房间”的房间循环。

```
<template name="rooms">
    {{#each availableRooms}}
        {{> room}}
    {{/each}}
</template> 
```

该模板为每次迭代获取一个房间。这是可以访问的。

```
<template name="room">
<div class="room-outer">
    <button type="button" class="btn" data-toggle="collapse" data-target="#list-{{_id}}">
        {{name}} : {{getBeds this}} beds free.
    </button>
    <div id="list-{{_id}}" class="collapse in room-inner">
        {{#each guests_id}}
            <div class="bed">
                <div class="blanket">
                {{showUser this}}
                </div>
            </div>
        {{/each}}
    </div>
</div>
</template> 
```

现在我喜欢通过扩展模板来计算一些特殊值。我现在需要将这个变量传递给 getBeds 函数。是否可以通过抓取模板外部并将房间放入功能中来做到这一点？

```
Template.room.getBeds = function (room) {
    if (room.guests_id)
        return room.beds - _.size(room.guests_id);
    else
        return room.beds;
}; 
```

基本上我不想写 {{getBeds this}} 但只写 {{getBeds}}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T15:55:44.110

这不应该工作吗？

```
Template.room.getBeds = function () {
    if (this.guests_id)
        return this.beds - _.size(this.guests_id);
    else
        return this.beds;
}; 
```

请参阅[文档](http://docs.meteor.com#templates)：

> 助手可以接受参数，他们接收当前的模板数据`this`：

# javascript - 更改 HTML 的当前属性，从那里调用函数

> ID：14339686
> 
> 赞同：0
> 
> 时间：2013-01-15T14:18:36.327
> 
> 标签：javascript, jquery, html

我正在使用 JavaScript 构建动态 HTML 页面，这是我的代码：

```
 for (var i = 0; i < getImage.length; i++) {
   $("#a1").append("<img src=\"" + getImage(images[i])+" \"width=\"90\""); 
      } 
```

该函数返回一个图像......我的问题，`getImage`我如何在每次迭代中更改该当前行的属性，例如在我的函数中更改该当前行的任何图像属性。如果我使用它返回对象，但不引用当前行。我可以在该函数内的每次迭代中更改这些内容吗？所以结果我会得到：`JavaScript``Jquery``width``getImage``$('this')`

```
<img src="1.jpg" width="20">
<img src="2.jpg" width="90" > 
```

* * *

```
function getImage(i) {
// some code

// WANT TO CHANGE HERE THE IMG ATTRIBUTE OF <img src "" width="">
return image ;
} 
```

这个想法当然是改变更多的属性......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T14:27:10.723

如果您希望能够从内部更改图像属性，`getImage`则不应使用字符串连接来构建图像标签。

尝试类似：

```
for (var i = 0; i < images.length; i++) {
  $("#a1").append(getImage(images[i])); 
} 
```

和：

```
function getImage(input) {
   var $img = $('<img>').attr({
     src: '%your-source%', // maybe from input?!
     width: 100
   });

   // do other stuff with $img as needed

   return $img;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T14:26:27.490

你不能像现在这样那样做。据我了解，`getImage`只需返回图像的 URL。而且它不能修改img标签的宽度。你可以这样做：

```
for (var i = 0; i < getImage.length; i++) {
  $("#a1").append("<img src=\"" + getImage(images[i]) + " \"width=\"" + images[i].width + "\""); 
} 
```

假设您的`images`数组包含具有字段的对象`src`和`width`

或者你应该让你的 getImage 返回整个`img`标签 HTML：

```
for (var i = 0; i < getImage.length; i++) {
      $("#a1").append(getImage(images[i])); 
    }
function getImage(index) {
    // some code
    return "<img src=\"" + image + " \"width=\"" + width + "\"";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T14:28:59.803

这可能有一些错误，但我只是想分享一个关于如何以另一种方式做到这一点的想法。

```
 for (var i = 0; i < getImage.length; i++) {
      $("#a1").append(getImage(images[i])); 
      }

    function getImage(i) {
       var s = // get the src
       var w = // width based on i 
       return "<img src=\"" + s+ " \"width=\"" + w+ "\"" ;
    } 
```

# android - 用于预订的 Android 自定义日历

> ID：14339688
> 
> 赞同：0
> 
> 时间：2013-01-15T14:18:47.757
> 
> 标签：android

我正忙着写一个需要预订系统的安卓应用程序。它需要有一个日历，用户可以查看或导航（日|月|年）并单击以预订特定日期的活动。因此，在日视图中，您将看到已预订的活动。然后这些事件将保存在该用户 ID 下的数据库中。

问题是在不重新发明日历或从头开始编写日历的情况下获得日历视图来执行此操作。据我所知，android 不支持此功能或至少不支持 API 10。该应用程序需要 API 10 及更高版本的支持。

此外，我不想使用手机附带的内置 Google 日历或手机上运行的任何日历应用程序，因为这会带来一些限制，例如设备需要安装该应用程序等。

屏幕截图或多或少地显示了我正在寻找的视图。如果我能让这种类型的视图与日、月和年视图一起工作，那就太好了。任何帮助、资源、库等都会很有用。

请查看屏幕截图以了解我或多或少想要做的事情。

[http://i50.tinypic.com/1q0u49.png](http://i50.tinypic.com/1q0u49.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-28T12:14:24.687

@ashutiwari4，Java 中的公历类没有任何视图，它是一个代表公历及其功能的类。它内置了成员和函数来打印基本信息，例如时间、motnh 日期、年份等。因此，您可以使用该类来创建 Date 对象的新实例。然后您可以操作该日期对象，例如，如果用户单击“第二天”按钮查看日历上的第二天，您可以将一天添加到您的日期对象。您必须使用 gridview（或任何其他适合您的视图）构建自己的视图

# c# - 用按钮填充二维数组

> ID：14339689
> 
> 赞同：0
> 
> 时间：2013-01-15T14:18:49.320
> 
> 标签：c#, arrays, winforms, button

我这里有个小问题。我有一个 [5,5] 大的二维数组。我有一个带有 25 个按钮的窗体。现在我想将按钮存储在对象数组中，但我的问题是，我如何告诉程序知道将哪个按钮放入数组中？是否有可能以某种方式：

```
//_array[i] = button(i); 
```

这是我第一次将对象存储在数组中，我不知道该怎么做。

编辑：按钮具有所有标准名称（button1，button，button3 ...）

EDIT2：我知道如何手动操作`(_array[x,y] = button1)`，但我想知道如何使用 for 循环。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T14:38:49.353

您可以使用按钮的名称作为`Controls`集合的索引来访问按钮：

```
for (int i = 0; i < 5; i++) {
    for (int k = 0; k < 5; k++) {
        _array[i, k] = Controls["Button" + (5 * i + k + 1).ToString()];
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T14:30:10.730

您可以使用以下方法过滤控件[`IEnumerable.OfType()`](http://msdn.microsoft.com/en-us/library/bb360913.aspx)：

```
//get all buttons and order them by name
var buttons = Controls.OfType<Button>().OrderBy(x => x.Name).ToList();

for(int i = 0; i < 5; i++)
   for(int j = 0; j < 5; j++)
        _array[i, j] = buttons[i*5+j]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T14:20:57.390

尝试这个：

```
for (int i=0; i<5; i++)
for (int j=0; j<5; j++)
  _array[i,j] = Controls.Item["Button" + (i*5 +j).ToString()]; 
```

# c# - 使用正则表达式以任意顺序查找两个字符串

> ID：14339693
> 
> 赞同：1
> 
> 时间：2013-01-15T14:19:10.953
> 
> 标签：c#, regex, winforms

例如，我有一个输入：（`"Test your Internet connection bandwidth. Test your Internet connection bandwidth."`重复两次）并且我想搜索字符串**internet**和**bandwidth**。

```
string keyword = tbSearch.Text //That holds value: "internet bandwidth"
string input = "Test your Internet connection bandwidth. Test your Internet connection bandwidth.";

Regex r = new Regex(keyword.Replace(' ', '|'), RegexOptions.IgnoreCase);
if (r.Matches(input).Count == siteKeyword.Split(' ').Length)
{
    //Do something
} 
```

这不起作用，因为它找到 2 个“互联网”和 2 个“带宽”，所以它计数为 4，但关键字长度为 2。那我能做什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T14:43:48.483

```
var pattern = keyword.Split()
        .Aggregate(new StringBuilder(),
                   (sb, s) => sb.AppendFormat(@"(?=.*\b{0}\b)", Regex.Escape(s)),
                   sb => sb.ToString());

if (Regex.IsMatch(input, pattern, RegexOptions.IgnoreCase))
{
    // contains all keywords
} 
```

第一部分是从您的关键字生成模式。如果有两个关键字`"internet bandwidth"`，则生成的正则表达式模式将如下所示：

`"(?=.*\binternet\b)(?=.*\bbandwidth\b)"`

它将匹配以下输入：

```
"Test your Internet connection bandwidth."
"Test your Internet connection bandwidth. Test your Internet bandwidth." 
```

以下输入将不匹配（并非包含所有单词）：

```
"Test your Internet2 connection bandwidth bandwidth."
"Test your connection bandwidth." 
```

* * *

另一种选择（分别验证每个关键字）：

```
var allWordsContained = keyword.Split().All(word => 
    Regex.IsMatch(input, String.Format(@"\b{0}\b", Regex.Escape(word)), RegexOptions.IgnoreCase)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T14:51:39.827

```
Regex r = new Regex(keyword.Replace(' ', '|'), RegexOptions.IgnoreCase);
int distinctKeywordsFound = r.Matches(input)
                             .Cast<Match>()
                             .Select(m => m.Value)
                             .Distinct()
                             .Count();
if (distinctKeywordsFound == siteKeyword.Split(' ').Length)
{
    //Do something
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T14:34:24.353

不知道你想做什么，但你可以尝试这样的事情：

```
public bool allWordsContained(string input, string keyword)
{
    bool result = true;
    string[] words = keyword.Split(' ');

    foreach (var word in words)
    {
        if (!input.Contains(word))
            result = false;
    }

    return result;
}

public bool atLeastOneWordContained(string input, string keyword)
{
    bool result = false;
    string[] words = keyword.Split(' ');

    foreach (var word in words)
    {
        if (input.Contains(word))
            result = true;
    }

    return result;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T14:35:00.860

这是解决方案。线索是获取结果列表并使 Distinct()...

```
 string keyword = "internet bandwidth";
    string input = "Test your Internet connection bandwidth. Test your Internet connection bandwidth.";

    Regex r = new Regex(keyword.Replace(' ', '|'), RegexOptions.IgnoreCase);
    MatchCollection mc = r.Matches(input);
    List<string> res = new List<string>();

    for (int i = 0; i < mc.Count;i++ )
    {
        res.Add(mc[i].Value);
    }

    if (res.Distinct().Count() == keyword.Split(' ').Length)
    {
        //Do something
    } 
```

# search - 带有 json 搜索正文的 ElasticSearch POST 与带有 json 在 url 中的 GET

> ID：14339696
> 
> 赞同：16
> 
> 时间：2013-01-15T14:19:15.517
> 
> 标签：search, post, elasticsearch, get

根据 ES 文档，这两个搜索请求应该得到相同的结果：

得到

```
http://localhost:9200/app/users/_search?source={"query": {"term": {"email":"foo@gmail.com"}}} 
```

邮政

```
http://localhost:9200/app/users/_search 
```

帖子正文：

```
{
    "query":  {
         "term": {
               "email":"foo@gmail.com"
          }
    }
} 
```

但是第一个没有结果，而第二个给了我预期的结果。我使用 ES 版本 0.19.10 其他人有相同的行为吗？这是一个错误吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-08-20T20:58:22.253

`source`根据[URI 搜索，它不是有效的查询字符串参数](https://www.elastic.co/guide/en/elasticsearch/reference/current/search-uri-request.html)

Elasticsearch 允许三种方式来执行搜索请求...

**GET 请求正文：**

```
curl -XGET "http://localhost:9200/app/users/_search" -d '{
  "query": {
    "term": {
      "email": "foo@gmail.com"
    }
  }
}' 
```

**POST 请求正文：**

[由于并非所有客户端都支持带有正文的 GET，因此也允许使用 POST。](https://www.elastic.co/guide/en/elasticsearch/reference/current/search-request-body.html#search-request-body)

```
curl -XPOST "http://localhost:9200/app/users/_search" -d '{
  "query": {
    "term": {
      "email": "foo@gmail.com"
    }
  }
}' 
```

**GET 没有请求正文：**

```
curl -XGET "http://localhost:9200/app/users/_search?q=email:foo@gmail.com" 
```

或（如果您想手动对查询字符串进行 URL 编码）

```
curl -XGET "http://localhost:9200/app/users/_search?q=email%3Afoo%40gmail.com" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T14:25:49.400

您应该在第一种情况下对您的查询进行 URL 编码：

```
http://localhost:9200/app/users/_search?source=%7b%22query%22%3a+%7b%22term%22%3a+%7b%22email%22%3a%22foo%40gmail.com%22%7d%7d%7d 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-05-25T16:59:10.700

以上答案与Elasticsearch 6.0及以上版本不兼容。ES从6.0版本开始引入Strict Content type check。该链接对其进行了解释： [https](https://www.elastic.co/blog/strict-content-type-checking-for-elasticsearch-rest-requests) ://www.elastic.co/blog/strict-content-type-checking-for-elasticsearch-rest-requests 。对于 curl，需要在任何具有 JSON 正文的请求的命令行中添加 -H'Content-Type: application/json'

# linux - 部署工具后 Matlab UI 程序工作不正常

> ID：14339698
> 
> 赞同：1
> 
> 时间：2013-01-15T14:19:17.293
> 
> 标签：linux, windows, matlab, compilation

这是我第一次遇到这种问题。我有一个完美运行的代码，在 3 个不同的平台（Win/Linux/OS X）下运行没​​有任何问题。然而，在 deploytool 编译后，它的一部分停止工作。编译代码后如何得到错误！？似乎在加载和读取 .mat 文件时存在一些问题。那可能吗？我希望有一个人可以帮助我。

谢谢

编辑：我已经解决了这个问题！不幸的是所有 addpath 错误！我有很多文件夹，其中包含运行代码所需的文件和函数，在编译后，matlab 将所有这些文件夹弄得一团糟。好提示：不要使用 addpath 进行编译！还是非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T14:37:07.987

您可以`try`找到`catch`错误并将其写入文本文件。或者建立一个在屏幕上打印文本的检查。

更笼统一点：你可以尝试隔离出问题的代码部分，然后基本上反复删掉这部分的一半功能，直到准确找到错误的根源。

# android - 如何从android应用程序调用存储过程？

> ID：14339700
> 
> 赞同：2
> 
> 时间：2013-01-15T14:19:26.367
> 
> 标签：android, sql-server-2008, stored-procedures

我想从 sql server 调用一个存储过程来操作一个登录页面，但一直收到这个错误：

```
import java.sql.CallableStatement;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;

public class Sp
{
    public static void main(String[] args)
    {

         String dbName = "My_database";
         String serverip="192.168.5.10";
         String serverport="1433";

         String url = "jdbc:sqlserver://"+serverip+"\\SQLEXPRESS:"+serverport+";databaseName="+dbName+"";

         try

        {
            Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");
        }

        catch(ClassNotFoundException ex)
        {
            ex.printStackTrace();
        }

        Connection con=null;
        CallableStatement cstmt=null;
        try
        {

             String databaseUserName = "sa";
             String databasePassword = "a123";

            con= DriverManager.getConnection(url, databaseUserName, databasePassword);

            cstmt=con.prepareCall("{? = call spLoginvalidate(@CO_ID)}");//called the procedure
                                        //how to create procedure had writen in  bellow
            cstmt.executeUpdate();
            System.out.println("done");
        } 

        catch(SQLException ex)
        {
            ex.printStackTrace();
        }
        finally
        {
            try
            {
                if(cstmt!=null) //close the callablestatement
                {
                    cstmt.close();
                    cstmt=null;
                }
            }
            catch(SQLException ex)
            {
                ex.printStackTrace();
            }
            try
            {
                if(cstmt!=null)  //close the connection
                {
                    cstmt.close();
                    cstmt=null;
                }
            }
            catch(SQLException ex)
            {
                ex.printStackTrace();
            }
        }
    }
} 
```

我的错误信息是：

```
com.microsoft.sqlserver.jdbc.SQLServerException: The value is not set for the parameter number 1.
    at com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDriverError(SQLServerException.java:190)
    at com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement.buildParamTypeDefinitions(SQLServerPreparedStatement.java:260)
    at com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement.buildPreparedStrings(SQLServerPreparedStatement.java:219)
    at com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement.doPrepExec(SQLServerPreparedStatement.java:612)
    at com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement.doExecutePreparedStatement(SQLServerPreparedStatement.java:400)
    at com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement$PrepStmtExecCmd.doExecute(SQLServerPreparedStatement.java:350)
    at com.microsoft.sqlserver.jdbc.TDSCommand.execute(IOBuffer.java:5696)
    at com.microsoft.sqlserver.jdbc.SQLServerConnection.executeCommand(SQLServerConnection.java:1715)
    at com.microsoft.sqlserver.jdbc.SQLServerStatement.executeCommand(SQLServerStatement.java:180)
    at com.microsoft.sqlserver.jdbc.SQLServerStatement.executeStatement(SQLServerStatement.java:155)
    at com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement.executeUpdate(SQLServerPreparedStatement.java:314)
    at com.first.mainapp.Sp.main(Sp.java:45) 
```

如果我想使用存储过程来验证登录需要做什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T15:17:55.747

代替

```
 cstmt=con.prepareCall("{? = call spLoginvalidate(@CO_ID)}");//called the procedure 
```

尝试

```
 cstmt=con.prepareCall("{EXEC ? = spLoginvalidate(?)}");//called the procedure

        cs.registerOutParameter(1, Types.INT);
        cs.setInt(2, 1000);//your @CO_ID value here 
```

您可以在这里获得更多信息：[http ://www.xyzws.com/javafaq/how-to-call-a-stored-procedure-by-jdbc-java-class/169](http://www.xyzws.com/javafaq/how-to-call-a-stored-procedure-by-jdbc-java-class/169)

SQL Server 不知道该`call`语句。改为使用`EXEC`。

# c# - C# Process Start 需要带双引号的参数 - 它们消失了

> ID：14339701
> 
> 赞同：18
> 
> 时间：2013-01-15T14:19:31.727
> 
> 标签：c#, matlab, cmd, command-line-arguments, process.start

我正在尝试使用 Process.Start(ProcessStartInfo) 从 c# 运行命令行应用程序；

问题是，cmd 行应用程序是一个 matlab 独立的 .exe，并且具有可选参数，这意味着您可以将它们传递到 cmd 行，如下所示：

```
app.exe "optional1" optional1value "optional2" optional2value 
```

其中**optional1value**是整数或字符串等。

我们遇到的问题是双引号没有作为**“可选1”**参数的一部分传递，所以我相信 cmd.exe 会得到类似的东西：

```
app.exe optional1 optional1value optional2 optional2value 
```

或类似的东西，matlab的解析器显然会被混淆。

我努力了：

```
@"""optional1"" optional1value ""optional2" optional2value""" 
```

正如其他一些关于 cmd 行参数中双引号的 SO questions 中所建议的那样，但它似乎对我不起作用，也不是：

```
"\"optional1\" optional1value \"optional2\" optional2value\"" 
```

我写了一个小的 c# 命令行 .exe 来打印它得到的参数。如果我将命令行参数放在 VS Project->Debug 区域并运行它，那么它会用双引号打印它们，但是由于所有转义等，当我在代码中执行此操作时，.exe 会打印不带任何双引号的参数。

我发现[这篇](http://www.mobzystems.com/code/bugingetcommandlineargs)关于它的文章可能是 .NET 3.5 的 cmd 解析器中的一个错误，但似乎找不到可行的解决方案。

有没有人有任何想法？

感谢您的时间，

雨披

PS 有没有办法在使用 Process.Start() 发送参数时查看 cmd.exe 得到什么？我的进程打开了一个 cmd 窗口，但很高兴看到 cmd.exe 得到的行，例如：“app.exe optional1 optional1value”等。

再次感谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-15T14:49:24.980

引号 in`ProcessStartInfo.Arguments`必须转义为三个引号 ( `"""`)。这是因为单引号用于将包含空格的字符串作为单个参数传递。

[请参阅此处](https://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.arguments(v=vs.110).aspx)的文档。

```
var psi = new ProcessStartInfo(
    "cmd_app.exe",
    "\"\"\"optional1\"\"\" optional1value \"\"\"optional2\"\"\" optional2value");
Process.Start(psi); 
```

cmd_app.exe 所做的只是宣布它的 # of args 和 args 是什么，通过这个输入它显示：

```
"optional1"
optional1value
"optional2"
optional2value 
```

# php - Zend，无法从 Bootstrap 中找到模型

> ID：14339703
> 
> 赞同：0
> 
> 时间：2013-01-15T14:19:40.407
> 
> 标签：php, zend-framework, model, bootstrapping

我正在尝试从主应用程序引导文件将模型放入 Zend Registry：

```
public function _initRegistry()
{
    $this->bootstrap('db'); 

    $processmanager = new Systems_Model_Process();
    Zend_Registry::set('processmanager', $processmanager);
} 
```

出于某种原因，我遇到了以下错误：

```
Warning: include_once(Systems/Model/Process.php) [function.include-once]: failed to open stream: No such file or directory in /home/planetxg/public_html/dash/library/Zend/Loader.php on line 146

Warning: include_once() [function.include]: Failed opening 'Systems/Model/Process.php' for inclusion (include_path='/home/planetxg/public_html/dash/application/../library:/home/planetxg/public_html/dash/library:.:/usr/lib/php:/usr/local/lib/php') in /home/planetxg/public_html/dash/library/Zend/Loader.php on line 146

Fatal error: Class 'Systems_Model_Process' not found in /home/planetxg/public_html/dash/application/Bootstrap.php on line 20 
```

有问题的模型位于以下位置：

```
application/modules/Systems/models/Process.php 
```

是否有一些简单的东西我错过了或根本没有设置在这里？在控制器中正常调用模型时，我应该添加一切正常。

如果有帮助，这是我的主要 ini 块：

```
phpSettings.display_startup_errors = 1
phpSettings.display_errors = 1
includePaths.library = APPLICATION_PATH "/../library"
bootstrap.path = APPLICATION_PATH "/Bootstrap.php"
bootstrap.class = "Bootstrap"
appnamespace = "Application"
resources.frontController.controllerDirectory = APPLICATION_PATH "/controllers"
resources.frontController.params.displayExceptions = 0
resources.frontController.actionHelperPaths.Utilities = APPLICATION_PATH "/controllers/Helpers"
resources.layout.layoutPath = APPLICATION_PATH "/layouts/scripts/"
resources.frontController.moduleDirectory = APPLICATION_PATH "/modules"
resources.modules[] = 
autoloaderNamespaces[] = "CreativeLaunch_"
autoloaderNamespaces[] = "Systems_" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T14:32:02.940

您需要一个`application/modules/systems/Bootstrap.php`扩展模块引导类`Zend_Application_Module_Bootstrap`。这将设置模块自动加载。此外，您的模块文件夹应该是小写的 - `application/modules/systems`。

模块资源需要`_initRegistry`在主引导文件中的方法之前运行，因此将该方法的第一行更改为：

```
$this->bootstrap(array('db', 'modules')); 
```

其他一切看起来都不错。

# java - wicket：AjaxLazyLoadPanel 中的片段

> ID：14339714
> 
> 赞同：0
> 
> 时间：2013-01-15T14:20:27.313
> 
> 标签：java, web, wicket

我想在延迟加载的页面上渲染一些检票口片段。Java 示例如下：

```
staticPanel.add(new AjaxLazyLoadPanel("fragment4Span") {

        @Override
        public Component getLazyLoadComponent(String id) {
            fragment4 = new Fragment4(id, "fragment4", this);
            fragment4.add(propertyLoop4);
            return fragment4;
        }
    }); 
```

和 html 组件：

```
<span wicket:id="fragment4Span"></span>
<wicket:fragment wicket:id="fragment4">
</wicket:fragment> 
```

但我得到以下例外：

```
org.apache.wicket.markup.MarkupException: Markup of component class `org.apache.wicket.extensions.ajax.markup.html.AjaxLazyLoadPanel` does not contain a fragment with wicket:id `fragment4`. Context: [MarkupContainer [Component id = content]]
at org.apache.wicket.markup.html.panel.Fragment.renderFragment(Fragment.java:262)
at org.apache.wicket.markup.html.panel.Fragment.onComponentTagBody(Fragment.java:212)
at org.apache.wicket.Component.renderComponent(Component.java:2680)
at org.apache.wicket.MarkupContainer.onRender(MarkupContainer.java:1538) 
```

这可能是什么原因？顺便说一句，我无法通过谷歌搜索找到答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T08:27:19.893

您通过`this`- 它引用 AjaxLazyLoadPanel 实例 - 作为片段容器。但正如错误消息所述，它不包含该片段。Whis 是真的，因为您的页面/面板确实如此。

因此，您实际上需要将对页面/面板的引用传递给 Fragment 构造函数：

```
fragment4 = new Fragment4(id, "fragment4", CurrentPageOrPanelName.this); 
```

另一种可能性（不完全确定这是否有效）是更改您的标记，以便片段位于 ALLP 内：

```
<span wicket:id="fragment4Span">
  <wicket:fragment wicket:id="fragment4">
  </wicket:fragment>
</span> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T16:35:29.940

您的标记不包含任何可将片段添加到... 即没有可能与您的 id 变量匹配的 id 组件。你有fragment4Span，这将是你的LazyLoadPanel，你有一个片段ID为“fragment4”但没有匹配的“接收器”的片段......

请参阅：[有关片段的 Wicket 示例](http://wicket.apache.org/learn/examples/usingfragments.html)

# sql - 尝试多个 SELECT 直到结果可用的方法？

> ID：14339715
> 
> 赞同：4
> 
> 时间：2013-01-15T14:20:28.480
> 
> 标签：sql, postgresql, union, postgresql-performance

如果我想以递减的精度在表中搜索单行怎么办，例如：

```
SELECT * FROM image WHERE name LIKE 'text' AND group_id = 10 LIMIT 1 
```

当这给我没有结果时，试试这个：

```
SELECT * FROM image WHERE name LIKE 'text' LIMIT 1 
```

当这给我没有结果时，试试这个：

```
SELECT * FROM image WHERE group_id = 10 LIMIT 1 
```

是否有可能只用一种表达方式来做到这一点？

当我没有两个但例如三个或更多搜索参数时也会出现问题。有没有通用的解决方案？当然，当搜索结果按相关性排序时，它会派上用场。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T18:53:58.263

[`LIKE`](http://www.postgresql.org/docs/current/interactive/functions-matching.html#FUNCTIONS-LIKE)不带通配符等同于`=`. 假设您实际上是说`name = 'text'`.

[**索引**](http://www.postgresql.org/docs/current/interactive/indexes.html)是性能的关键。

### 测试设置

```
CREATE TABLE image (
  image_id serial PRIMARY KEY
, group_id int NOT NULL
, name     text NOT NULL
); 
```

理想情况下，您创建两个索引（除了主键）：

```
CREATE INDEX image_name_grp_idx ON image (name, group_id);
CREATE INDEX image_grp_idx ON image (group_id); 
```

第二个*可能*不是必需的，具体取决于数据分布和其他细节。这里的解释：

*   [复合索引是否也适用于第一个字段的查询？](https://dba.stackexchange.com/a/27493/3684)

### 询问

对于您的情况，这应该是*最快的*查询：

```
SELECT * FROM image WHERE name = 'name105' AND group_id = 10
UNION ALL
SELECT * FROM image WHERE name = 'name105'
UNION ALL
SELECT * FROM image WHERE group_id = 10
LIMIT  1; 
```

[**SQL小提琴。**](http://www.sqlfiddle.com/#!15/227cb/1)

该`LIMIT`子句适用于整个查询。Postgres 足够聪明，一旦找到足够的行来**满足**. 因此，对于*第一个*查询中的匹配，输出如下所示（***向右滚动！***）：`UNION ALL``LIMIT` *`SELECT``EXPLAIN ANALYZE`*

 ***```
限制（成本=0.00..0.86 行=1 宽度=40）（实际时间=0.045..0.046 行=1 循环=1）
  缓冲区：本地命中=4
  -> 结果（成本=0.00..866.59 行=1002 宽度=40）（实际时间=0.042..0.042 行=1 循环=1）
        缓冲区：本地命中=4
        -> 追加（成本=0.00..866.59 行=1002 宽度=40）（实际时间=0.039..0.039 行=1 循环=1）
              缓冲区：本地命中=4
              -> 在图像上使用 image_name_grp_idx 进行索引扫描（成本=0.00..3.76 行=2 宽度=40）（实际时间=0.035..0.035行=1 循环=1）
                    索引条件：((name = 'name105'::text) AND (group_id = 10))
                    缓冲区：本地命中=4
              -> 在图像上使用 image_name_grp_idx 进行索引扫描（成本=0.00..406.36 行=500 宽度=40）（从未执行）
                    索引条件: (name = 'name105'::text)
              -> 在图像上使用 image_grp_idx 进行索引扫描（成本=0.00..406.36 行=500 宽度=40）（从未执行）
                    指数条件：（group_id = 10）
总运行时间：0.087 毫秒
```

大胆强调我的。

**不要添加子句*`ORDER BY`****，这会使效果无效***。***然后 Postgres 在返回顶行之前必须考虑所有行。*

 *### 最后的问题

> 有没有通用的解决方案？

这**是**通用解决方案。添加任意数量的`SELECT`语句。

> 当然，当搜索结果按相关性排序时，它会派上用场。

结果中只有一行带有`LIMIT 1`。空位排序的一种。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T05:09:18.677

已经很晚了，我不想写出一个完整的解决方案，但是如果我需要这个，我可能会创建一个返回客户类型、记录或表格的客户[函数](http://www.postgresql.org/docs/9.1/static/plpgsql-declarations.html)（取决于您的需求）。这样做的好处是，一旦你找到你的记录，你就可以停下来。

使参数的数量是动态的将使其更具挑战性。根据您的 PostgreSQL 版本（以及您可用的扩展），您可能能够传入[hstore](http://www.postgresql.org/docs/9.1/static/hstore.html)或 json 并[动态](http://www.postgresql.org/docs/9.1/static/plpgsql-statements.html)构建查询。

也许不是最好的 SO 答案，但它不仅仅是一个评论，希望是一些值得深思的东西。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-16T16:23:48.577

在找到所需的结果之前，我认为单独运行这些查询没有任何问题。虽然有多种方法可以将这些组合到一个查询中，但最终会变得更复杂和更慢，这不是您想要的。

您应该考虑在一个事务中运行所有查询，这可能是可重复读取隔离级别的最佳选择，这样您可以获得一致的结果并避免设置重复事务的开销。此外，如果您明智地使用准备好的语句，您将拥有与在一个组合语句中运行所有三个查询几乎相同的开销。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-15T14:27:33.263

```
SELECT *, 
CASE WHEN name like 'text' AND group_id = 10 THEN 1
WHEN name like 'text' THEN 2
WHEN group_id = 10 THEN 3
ELSE 4
END ImageRank
FROM image
WHERE ImageRank <> 4
ORDER BY ImageRank ASC
LIMIT 1 
```

这将是一种伪解决方案，但我不完全确定您的场景中的语法是否允许它****

# ruby-on-rails - Ransack Gem - 搜索 undefined

> ID：14339717
> 
> 赞同：2
> 
> 时间：2013-01-15T14:20:34.503
> 
> 标签：ruby-on-rails, ransack

我正在尝试设置 Ransack 搜索。我已将 gem 添加到 Gem 文件中，运行 bundle install。

然后我添加了：

```
class ProfilesController < ApplicationController

  # GET /profiles
  def index
    @search = Profile.search(params[:q])
    @profiles = @search.result
  end

end 
```

在我添加的索引视图文件中：（屏幕名称是我的配置文件表中的有效字段）

```
<% = search_form_for @search do |f| %>
      <%= f.label :screenname %>
      <%= f.text_field :screenname %>
      <%= f.submit "Search" %>
    <% end %> 
```

（以及其他一些样式）

但是我得到：

未定义的方法“搜索”#

在 app/controllers/profiles_controller.rb:12:in `index'

有任何想法吗？

干杯:)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-15T15:10:57.987

安装 gem 后，您应该重新启动应用程序服务器。

# ruby-on-rails - Redmine：用于添加新闻的自定义过滤器字段

> ID：14339721
> 
> 赞同：3
> 
> 时间：2013-01-15T14:20:42.507
> 
> 标签：ruby-on-rails, redmine, redmine-plugins

我想在 Redmine 的“添加新闻”页面中添加一个自定义过滤器字段，这样当我添加新新闻时，我可以选择应该发送电子邮件的用户组。

该字段本身是 Redmine 用户组的列表，每个用户至少分配给其中 1 个。

有人做过吗？任何建议，将不胜感激

我找到了与该问题相关的 3 个文件：

*   /app/controller/news_controller.rb
*   /app/models/news.rb
*   /app/views/news/_form.html.erb

```
环境：
  Redmine 版本 2.2.1.stable.11156
  Ruby 版本 1.8.7 (x86_64-linux)
  Rails 版本 3.2.11
  环境制作
  数据库适配器 MySQL
Redmine插件：
  没有安装插件

```

到目前为止，我在 Redmine 中只进行了 1 次修改，它将添加的消息发送给所有注册用户。文件：/app/modelsmailer.rb

## 概述：

![http://www.lwks.com/images/custom/redmine_question.png](../Images/3aa2e958b6bc7ffbb06e8237a46cd621.png)

编辑：**按照您的建议，我将邮件功能移至控制器：**

```
 def create
    @news = News.new(:project => @project, :author => User.current)
    @news.safe_attributes = params[:news]
    @news.save_attachments(params[:attachments])

    if @news.save
      #news_added(@news)
      if params[:group]
        mail :to => GroupsUser.find(params[:group][:ids]).joins(:users).select("users.mail").compact,
            :subject => "[#{@news.project.name}] #{l(:label_news)}: #{@news.title}"
      else
        render :new
      end
    end
  end 
```

但我收到错误：**NameError (uninitialized constant NewsController::GroupsUser):** pointing to line

```
mail :to => GroupsUser.find 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T22:50:32.893

news_controller.rb：

```
def new
  @news = News.new
  @groups = GroupsUser.all
end 
```

新闻/_form.html.erb：

```
<%= label_tag :group_ids "Groups"
<%= collection_select :group, :ids, @groups, :id, :name, {}, multiple: true %> 
```

**编辑：**

我将不得不对你的控制器的外观进行一些猜测，但我会给你一些接近的东西。根据您提供的邮件功能，我假设在保存`create`后从控制器中调用它。`News`之后我会调用邮件功能。像这样的东西：

```
def create
  news = News.new(params[:news]
  if news.save
    news_added(news)
    send_mail_to_groups(params[:group][:ids]) if params[:group]
    redirect_to ...
  else
    render :new
  end
end 
```

邮寄部分应从`news_added`

```
def news_added(news)
  redmine_headers 'Project' => news.project.identifier
  @author = news.author
  message_id news
  @news = news
  @news_url = url_for(:controller => 'news', :action => 'show', :id => news)
end 
```

支持自己的新程序：

```
send_mail_to_users_by_group_ids(group_ids)
    # Woo: Sent to all users, despite their email settings
    mail :to => GroupsUser.find(group_ids).joins(:users).select("users.mail").compact,
      :subject => "[#{@news.project.name}] #{l(:label_news)}: #{@news.title}"
end 
```

您可能希望添加一个`where`仅包含活动用户的子句。

我认为这是对的。我正在做这件事，所以那里可能有一两个错字或错误。希望它为您指明正确的方向。

# java - 为什么 Java forkbomb 不会导致 StackOverflowError？

> ID：14339731
> 
> 赞同：3
> 
> 时间：2013-01-15T14:21:09.227
> 
> 标签：java, stack-overflow

我是编程新手，我正在尝试自学 StackOverflow 是由什么引起的。我玩弄循环并导致错误，但我测试的 forkbomb 代码不会导致错误。为什么是这样？

```
public class ForkBomb
{
  public static void main(String[] args) throws java.io.IOException 
  {
     while(true) 
    {
        Runtime.getRuntime().exec(new String[]{"java", "-cp", System.getProperty("java.class.path"), "ForkBomb"});
    }
  }
} 
```

这不会导致堆栈溢出。为什么？然而，这导致了一个：

```
public class WhileBomb
{
   public WhileBomb()
   {
      while (true)
      {
      new WhileBomb();
      }
   }

   public static void main(String[] args) throws java.io.IOException
   {
     WhileBomb goodBye = new WhileBomb();
   }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-15T14:23:16.140

每个线程都有自己的堆栈。当您创建一个新进程时，您还将获得一个新线程和一个新堆栈。当一个堆栈被填满时会发生堆栈溢出错误，但您正在创建许多不同的堆栈，但没有一个堆栈被填满。

在第二个示例中，您只有一个线程并且您有一个递归调用。每次调用方法时，一些信息都会临时存储在堆栈中，直到方法返回。因为你的方法永远不会返回堆栈，直到你得到堆栈溢出异常。

你甚至不需要 while 循环。这也会产生堆栈溢出异常：

```
public WhileBomb()
{
   new WhileBomb();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T14:24:10.753

第一个示例没有向堆栈添加任何内容，而是创建了全新的堆栈。但是，第二个示例在此处添加到堆栈中：

```
public WhileBomb()
{
    while (true)
    {
        new WhileBomb();
    }
} 
```

你在这里看到的是一个无限递归。创建`WhileBomb`对象涉及创建`WhileBomb`对象。这一切都发生在同一个程序的同一个线程中（不是分叉一个新线程），所以它在同一个堆栈中。线程中每次创建新`WhileBomb`的都会将自身的另一个实例添加到堆栈中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T14:23:54.363

堆栈溢出是由于使用的堆栈空间多于可用空间造成的。叉子炸弹通过产生大量新进程来减慢 PC 的速度，每个新进程都会不断产生更多（等等）。

fork 炸弹不会导致堆栈溢出的原因是每个进程都有自己的堆栈，因此您实际上并没有在任何进程中使用太多堆栈空间，只是创建了许多进程，每个进程都有自己的（相对较小的）堆栈。

# asp.net - 未为子路径 cookie 设置 HttpOnly 和 Secure

> ID：14339733
> 
> 赞同：1
> 
> 时间：2013-01-15T14:21:13.093
> 
> 标签：asp.net, umbraco, httponly

我在 web.config 中有以下内容...

```
<httpCookies httpOnlyCookies="true" requireSSL="true" /> 
```

这些设置已正确应用于我网站的 cookie，但名为“UMB_PANEL”的 cookie 除外，其路径为“/umbraco”。

我尝试将具有重复设置的 web.config 文件添加到“/umbraco”文件夹中，但没有效果。

如何让这些 cookie 设置应用于整个网站？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2021-11-24T09:30:56.440

晚了一点，但您可以通过[Outbound Rules](https://docs.microsoft.com/en-us/iis/extensions/url-rewrite-module/creating-outbound-rules-for-url-rewrite-module)实现您所需要的。

`Secure=true`这将在不安全的情况下重写任何 cookie ：

```
<outboundRules>
    <rule name="Add Secure Cookies" preCondition="No Secure">
      <match serverVariable="RESPONSE_Set_Cookie" pattern=".*" negate="false"/>
      <action type="Rewrite" value="{R:0}; Secure=true"/>
      <conditions/>
    </rule>
    <preConditions>
      <preCondition name="No Secure">
        <add input="{RESPONSE_Set_Cookie}" pattern="."/>
        <add input="{RESPONSE_Set_Cookie}" pattern="; Secure=true" negate="true"/>
      </preCondition>
    </preConditions>
  </outboundRules> 
```

如果需要，您可以调整`pattern`它以匹配特定的 cookie，例如：`^(UMB_PANEL).*`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T04:20:51.140

我相信只有在您登录 Umbraco 管理区域时才会设置 cookie。

[http://our.umbraco.org/forum/using/ui-questions/20674-Does-Umbraco-make-use-of-Cookies-anywhere-in-the-core-product](http://our.umbraco.org/forum/using/ui-questions/20674-Does-Umbraco-make-use-of-Cookies-anywhere-in-the-core-product)

我的猜测是你的主要网站用户永远不会得到那个 cookie。我意识到这不是直接回答这个问题，但也许它使它成为一个有争议的问题？

# java - Jtree根据鼠标点击获取对象？

> ID：14339739
> 
> 赞同：2
> 
> 时间：2013-01-15T14:21:25.330
> 
> 标签：java, swing, selection, jtree

双击鼠标时，我使用此代码片段在树上执行一些操作：打开一个窗口并获取鼠标双击的窗口`node`，但它不返回任何内容，它返回 null：

```
MouseListener ml = new MouseAdapter() {
    public void mousePressed(MouseEvent e) {
        int selRow = contactTree.getRowForLocation(e.getX(), e.getY());
        TreePath selPath = contactTree.getPathForLocation(e.getX(), e.getY());
        System.out.println(contactTree.getEditingPath());
        Account memberToChat;
        if(selRow != -1) {
            if(e.getClickCount() == 1) {

            }
            else if(e.getClickCount() == 2) {
                new ChatWindow().setVisible(true);
                memberToChat=(Account)node.getUserObject(); // node is declared somewhere in the class as   DefaultMutableTreeNode node
                System.out.println(memberToChat.getFirstName()+" "+memberToChat.getEmail());
            }
        }
    }
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T14:25:29.037

*   [让 JTree 设置正确的 setSelectionMode](http://docs.oracle.com/javase/tutorial/uiswing/components/tree.html#select)

*   添加[TreeSelectionListener](http://docs.oracle.com/javase/tutorial/uiswing/events/treeselectionlistener.html)

*   [TreeSelectionModel.DISCONTIGUOUS_TREE_SELECTION](https://stackoverflow.com/a/6985736/714968)示例

# gnuplot - 如何在 gnuplot 中设置时区？

> ID：14339742
> 
> 赞同：8
> 
> 时间：2013-01-15T14:21:32.907
> 
> 标签：gnuplot

我有一个简单的 gnuplot 命令文件：

```
 ....
set xdata time
set timefmt "%s"
set format x "%H:%M"
.... 
```

其中 x - 时间戳列。

结果 - UTC 格式的时间。我可以更改 x 轴的本地时区吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-25T02:59:39.860

今天刚刚在文档中遇到了这个：

> 与秒之间的转换采用世界时间（与格林威治标准时间相同）。没有更改时区或夏令时的规定。如果您的所有数据都指的是同一时区（并且都是日光或标准），则您无需担心这些事情。但如果绝对时间对您的应用程序至关重要，则您需要自己转换为 UT。

从`help time/date`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-06-15T03:19:02.750

我今天刚碰到这个。您无需更改格式，只需更改数据即可。如果 data.txt 包含 UTC 时间戳，并且您想在 PDT 中显示它们（距 UTC 有 -7 小时），只需使用：

```
plot 'data.txt' using ($1+(-7*3600)):2 
```

这会从每个 x 值中减去 7 小时（以秒为单位）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-06-12T18:46:40.827

聚会有点晚了，我没有足够的声誉点来发表评论，但为了补充 anthony 和 hermannk 的回答，我是这样用他们的信息实现的：

*   在 中`command.gnuplot`，假设第一个字段包含日期/时间，第二个字段包含 Y 轴的值：

`plot "inputfile" using ($1 - offset):2`

*   从（bash）命令行调用gnuplot时：

`gnuplot -e "offset=$(date +%s -d '1 Jan 1970')" command.gnuplot`

偏移量通常可以正常工作，因为 gnuplot 在内部将日期/时间解释为从纪元开始的秒数。我不知道表单`"offset=$(date ...)"`是否是特定于 bash 的东西，但你总是可以使用它`"offset=`date ...`"`。

编辑——我发现这在处理夏令时/夏令时变化时效果不佳。我将偏移量更改为这个，现在效果更好：

*   在 中`command.gnuplot`，假设第一个字段包含日期/时间，第二个字段包含 Y 轴的值：

`plot "inputfile" using ($1 + offset):2`

*   从（bash）命令行调用gnuplot时：

`gnuplot -e "offset=$(echo "`日期 +%z`* 36" | bc)" command.gnuplot`

这是如何运作的？ `date +%z`以形式或类似形式提供时区偏移量`-0400`，这意味着`Local_Time = UTC - 4 hours`. 如果我们认为这是一个数字（-400），那么偏移量（以秒为单位）为 -400 / 100 * 3600 = -400 * 36。请注意，这不适用于具有 30 分钟增量的时区（印度？），但我敢肯定，通过一些创建数学，您也可以涵盖这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-02T14:59:02.167

### 除了以前的正确答案之外，还有我如何在[bash下执行此操作](/questions/tagged/bash "显示标记为“bash”的问题")

从[bash](/questions/tagged/bash "显示标记为“bash”的问题")的 4.1 版开始，您可以避免`date`为此使用分叉：

```
printf -v tzoff "%(%z)T" -1
tzoff=${tzoff:0:1}$(( ( 10#${tzoff:1:2}* 3600 + 10#${tzoff:3:2}* 60 ) )) 
```

一些样本：

```
TZ=Asia/Katmandu printf -v tzoff "%(%z)T" -1
echo $tzoff 
+0545

tzoff=${tzoff:0:1}$(( ( 10#${tzoff:1:2}* 3600 + 10#${tzoff:3:2}* 60 ) ))
echo $tzoff 
+20700

TZ=America/Chihuahua printf -v tzoff "%(%z)T" -1
echo $tzoff 
-0700

tzoff=${tzoff:0:1}$(( ( 10#${tzoff:1:2}* 3600 + 10#${tzoff:3:2}* 60 ) ))
echo $tzoff 
-25200 
```

然后`$tzoff`在创建`.dat`文件时或者将它们添加到绘图命令文件中，或者将其添加到值中。

```
printf -v plotcmd 'plot \47file.dat\47 using ($1%s):2' $tzoff

echo "$plotcmd"
plot 'file.dat' using ($1-25200):2 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-18T12:33:04.670

此处发布的片段对我不起作用，但这似乎可以解决问题：

```
TZ=Europe/Amsterdam tzoff=$(printf "%(%z)T")
tzoff=${tzoff:0:1}$(( ( 10#${tzoff:1:2} * 3600 + 10#${tzoff:3:2}* 60 ) ))
echo $tzoff 
```

# zend-framework2 - Zend 2中的多视图策略

> ID：14339744
> 
> 赞同：0
> 
> 时间：2013-01-15T14:21:38.133
> 
> 标签：zend-framework2, zend-controller

> **可能重复：**
> [如何在 JSON 响应中呈现 ZF2 视图？](https://stackoverflow.com/questions/12451399/how-to-render-zf2-view-within-json-response)

我必须更新已将其设置为视图策略 ViewJsonStrategy 的 Zend 控制器。

通常我有

```
 $result = new JsonModel($result);
    $e->setResult($result);

    return $e; 
```

一切顺利。但例如我还需要渲染一些 html。例如：

```
$result = new JsonModel($result);
if($someFlag)
{
    $result = "<html><body>Html message</body>";
}
$e->setResult($result);
return $e; 
```

这根本不起作用。我怎样才能做到这一点？

# wpf - system.windows.controls.combobox 中的等效自动完成模式

> ID：14339748
> 
> 赞同：1
> 
> 时间：2013-01-15T14:21:51.493
> 
> 标签：wpf, autocomplete, combobox

我有一个可编辑`combo-box`的地方，用户可以从中选择（或键入）其中一个值`drop-down`，或者完全不同的值。

我需要该`autocomplete`功能，它本质上是在输入一个或多个字符时在下拉列表中显示值的子集。

我看到 中有一个[autocompletemode](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.autocompletemode.aspx)属性`system.windows.forms.combobox`，这可能会达到我的目的，但是在 中是否有等价物`WPF system.windows.controls.combobox`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T14:32:32.870

[WPF 工具包自动完成框](http://wpf.codeplex.com/)正是您所需要的。[本教程](http://www.jeff.wilcox.name/2010/02/wpfautocompletebox/) [应该可以帮助您入门](http://www.c-sharpcorner.com/uploadfile/dpatra/auto-complete-box-in-wpf-toolkit/)。

# php - 为台式机/iPad/iPhone/手机构建“响应式”网站

> ID：14339753
> 
> 赞同：-4
> 
> 时间：2013-01-15T14:21:59.227
> 
> 标签：php, jquery, iphone, mobile

我目前管理一些网站。我对为移动设备构建网站并不陌生，但我有一个问题。我的朋友购买了一个模板，当用户从移动设备访问它时，它似乎可以即时“构建”网站。

我推测这样的事情的唯一原因是因为当他更新他的网站时，他只会像往常一样更新 HTML。请参阅我所知道的唯一方法是构建两个完全不同的网站，一个用于移动设备，一个用于台式机。

模板如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T14:51:04.827

由于您的问题非常模糊，因此无法为您提供比一些指向执行类似操作的示例的链接更多的帮助。无论如何，这些应该有助于您理解响应式设计的基础知识。这是响应式菜单设计的示例，它根据屏幕大小以整齐的方式增长/缩小

[http://codepen.io/TimPietrusky/pen/ysblx](http://codepen.io/TimPietrusky/pen/ysblx)

这是一篇有趣的文章，详细介绍了这个问题：

[http://css-tricks.com/responsive-menu-concepts/](http://css-tricks.com/responsive-menu-concepts/)

另一个网站，其中包含一些处理调整大小的示例：

[http://thinkmobilefirst.net/nav/](http://thinkmobilefirst.net/nav/)

事实上，css-tricks 在它的实际站点上也有响应式设计！因此，您始终可以将其视为另一个示例。如果您的问题中没有更多信息，除了我自己对您所追求的东西的猜测知识以及关于此事的一些谷歌搜索之外，我真的无法提供更多信息。

# android - Eclipse 仍然使用旧名称运行项目

> ID：14339754
> 
> 赞同：4
> 
> 时间：2013-01-15T14:22:01.073
> 
> 标签：android, eclipse

我有一个名为“xxx”的项目，我将其重命名为“yyy”。该项目在我的手机上运行良好。但是当我运行应用程序时，Eclipse 仍然会说“正在启动 xxx”。我该如何补救这种情况？我尝试在整个项目中搜索“xxx”，但没有成功。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-08T11:26:15.420

我的 Android 项目也有这个问题。现在我找到了解决方案：

1.  单击运行按钮旁边的**向下箭头。**
2.  在弹出菜单中选择**运行配置项。**
3.  展开**Android Application**并选择具有旧项目名称的项目。
4.  将**名称：**右侧的字段设置为新项目名称。
5.  单击**应用**

希望这可以解决您的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T14:28:36.353

转到启动配置并查看名为 的配置`xxx`。
在名称字段中，您可以将启动配置的名称编辑为您想要的任何名称。

**编辑：**
也许这篇文档文章更清楚：
[http ://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.jdt.doc.user%2Freference%2Fviews%2Fdebug%2Fref-editlaunchconfig .htm](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.jdt.doc.user%2Freference%2Fviews%2Fdebug%2Fref-editlaunchconfig.htm)

# mysql - 添加额外选择后出现sql错误

> ID：14339757
> 
> 赞同：2
> 
> 时间：2013-01-15T14:22:10.230
> 
> 标签：mysql, sql

我将不胜感激以下方面的帮助

```
SELECT distinct playerid as le_player, 
    (select sum(score) from playerresults where playerid = le_player) as wins, 
    (select handicap from players where playerid = le_player) as handicap, playername, 
    (select count(playerid)*3 from playerresults where playerid = le_player)as totalgames, 
    (select count(playerid)*3 from playerresults where playerid = le_player) - (select sum(score) from playerresults where playerid = le_player)as lost, 
    round((select sum(score) from playerresults where playerid = le_player) / (select count(playerid)*3 from playerresults where playerid = le_player) * 100,2) as percent, 
    teams.team_name 
FROM playerresults 
    INNER JOIN teams on (select players.team_id from players where players.id = playerid) = teams.id 
WHERE playerresults.season = 2012 AND playerresults.league = 4 
ORDER BY wins desc,totalgames asc 
```

它一直在工作，直到我添加了以下行：

```
(select handicap from players where playerid = le_player) as handicap 
```

现在这会产生`Subquery returns more than 1 row`错误。

Handicap 是添加到我的玩家表中的一个新字段，所以我认为我可以将那一点 sql 添加到我的原始字段中。

有什么想法吗？

谢谢dg

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T14:29:38.443

您可能需要考虑对表使用连接，而不是使用所有相关的子查询：

```
SELECT playerid as le_player, 
    sum(pr.score) as wins,
    p.handicap,
    pr.playername, 
    count(pr.playerid)*3 as totalgames, 
    count(pr.playerid)*3 - sum(pr.score) as lost, 
    round(sum(pr.score) / (count(pr.playerid)*3) * 100,2) as percent, 
    t.team_name 
from playerresults pr
left join players p
    on pr.playerid = p.id
left join teams t
    on p.team_id = teams.id 
where pr.season = 2012 
    AND pr.league = 4 
group by pr.playerid
ORDER BY wins desc, totalgames asc; 
```

甚至是这样的：

```
SELECT pr.playerid as le_player, 
    Score as wins,
    p.handicap,
    pr.playername, 
    CountPlayerId*3 as totalgames, 
    CountPlayerId*3 - Score as lost, 
    round(Score / (CountPlayerId*3) * 100,2) as percent, 
    t.team_name 
from
(
    select playerid,
        sum(pr.score) Score,
        count(pr.playerid) CountPlayerId
    from playerresults
    WHERE season = 2012 
       AND league = 4 
    group by playerid
) pr
left join players p
    on pr.playerid = p.id
left join teams t
    on p.team_id = teams.id 
where pr.season = 2012 
    AND pr.league = 4 
ORDER BY wins desc, totalgames asc; 
```

# sql-server - 取每个分区的第一行

> ID：14339758
> 
> 赞同：0
> 
> 时间：2013-01-15T14:22:19.743
> 
> 标签：sql-server, row-number

我有这个查询：

```
select   ROW_NUMBER() OVER ( PARTITION BY codtiers ORDER BY case when isnull(cumulapport, 0) > isnull(cumulretrait, 0) then cumulapport
 else cumulretrait
end DESC ) AS classement,
                    codTiers
           from     dbo.TiersComptesLocal 
           group by codTiers 
```

返回此结果：

```
classement  |  codTiers  
-------------------------
    1       |  1XXXXX
    2       |  1XXXXX
    1       |  1YYXXX
    2       |  1YYXXX
    3       |  1YYXXX
    1       |  1XXXYY 
```

我想显示每个分区的第一行，我想得到这样的结果：

```
classement  |  codTiers  
-------------------------
    1       |  1XXXXX
    1       |  1YYXXX
    1       |  1XXXYY 
```

任何想法将不胜感激。

这是我的完整查询：

```
select   ROW_NUMBER() OVER ( PARTITION BY tcl_codtiers ORDER BY case when isnull(cumulapport, 0) > isnull(cumulretrait, 0) then cumulapport
                                                                                                                else cumulretrait
                                                                                                           end DESC ) AS classement,

                                        TCL_CodTiers,
                                        'le montant max des ' + Senscumul + ' ( '
                        + convert(varchar(50), '') + ' € ) du tiers titulaire '
                        + TCL_CodTiers + ' ( ' + ''
                        + ' ) est supérieur au seuil fixé dans l''alerte : '
                        + '75000'

                               from     dbo.CLI_TCL_TiersComptesLocal
                                        INNER JOIN dbo.CLI_GCO_GeneriquesComptes ON TCL_CodTiers = GCO_CodTiersPrincipal
                                                                                    AND TCL_NumLien IN ( 0, 1 )
                                                                    inner join ( select TCL_CodTiers CodTiers,
                                                                sum(case when ESO_MntValoRetenuEnEuros > 0
                                                                         then ESO_MntValoRetenuEnEuros
                                                                         else 0
                                                                    end) cumulapport,
                                                                sum(case when ESO_MntValoRetenuEnEuros < 0
                                                                         then abs(ESO_MntValoRetenuEnEuros)
                                                                         else 0
                                                                    end) cumulretrait, 
                                                                      case when isnull(  sum(case when ESO_MntValoRetenuEnEuros > 0
                                                                         then ESO_MntValoRetenuEnEuros
                                                                         else 0
                                                                    end), 0) > isnull( sum(case when ESO_MntValoRetenuEnEuros < 0
                                                                         then abs(ESO_MntValoRetenuEnEuros)
                                                                         else 0
                                                                    end), 0)
                                                 then 'Apports'
                                                 else 'Retraits'
                                            end as Senscumul
                                                         from   CRO_ESO_EntreeSortie
                                                                inner join CLI_TCL_TiersComptesLocal on TCL_CodCompte = ESO_CodCompte
                                                                                                        and TCL_NumLien in ( 0, 1 )
                                                         group by TCL_CodTiers
                                                         having sum(case when ESO_MntValoRetenuEnEuros > 0
                                                                         then ESO_MntValoRetenuEnEuros
                                                                         else 0
                                                                    end) > 75000
                                                                or sum(case when ESO_MntValoRetenuEnEuros < 0
                                                                            then abs(ESO_MntValoRetenuEnEuros)
                                                                            else 0
                                                                       end) > 75000
                                                       ) surveillance on GCO_CodTiersPrincipal = CodTiers 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T14:24:14.077

```
WITH CTE
AS
(
    SELECT
      ROW_NUMBER() OVER (PARTITION BY codtiers 
                         ORDER BY CASE 
                                    WHEN ISNULL(cumulapport, 0) >
                                         ISNULL(cumulretrait, 0) THEN cumulapport
                                  ELSE cumulretrait
                                  END DESC) AS classement,
                        codTiers
    FROM dbo.TiersComptesLocal 
) 
SELECT * 
FROM CTE
WHERE classement = 1; 
```

* * *

## 更新

您*不能*在同一查询中过滤该列`classement`，您必须使用 CTE 或子查询，而不是像 @AaronBertrand 答案中那样。但是，如果您想在同一个查询中执行此操作，则必须在没有以下情况下执行此操作`ROW_NUMBER()`：

```
 SELECT
      codtiers,
      MAX(CASE 
            WHEN ISNULL(cumulapport, 0) >
                 ISNULL(cumulretrait, 0) THEN cumulapport
            ELSE cumulretrait
            END DESC) AS classement
    FROM dbo.TiersComptesLocal 
    GROUP BY codtiers; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T14:37:01.387

不知道为什么你不想使用 CTE，但如果你愿意，你可以使用派生表，尽管它仍然与 Mahmoud 已经发布的答案基本相同：

```
SELECT *
FROM (SELECT ROW_NUMBER() OVER (PARTITION BY codtiers 
                                ORDER BY CASE WHEN ISNULL(cumulapport, 0)>ISNULL(cumulretrait, 0) 
                                              THEN cumulapport ELSE cumulretrait END DESC) AS classement,
             codTiers
        FROM dbo.TiersComptesLocal 
        GROUP BY codTiers) A
WHERE classement = 1 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-15T14:39:39.630

这是一个不使用的解决方案`WITH`-尽管我不确定为什么会出现问题。

```
SELECT classement, codtiers
FROM 
(
  SELECT 
    classement = ROW_NUMBER() OVER (PARTITION BY codtiers 
      ORDER BY CASE WHEN ISNULL(cumulapport, 0) > ISNULL(cumulretrait, 0) 
      THEN cumulapport ELSE cumulretrait END DESC),
    codTiers
  FROM dbo.TiersComptesLocal 
) AS x
WHERE classement = 1; 
```

# css - 行中断功能，如 CSS 中的列中断

> ID：14339774
> 
> 赞同：0
> 
> 时间：2013-01-15T14:23:25.357
> 
> 标签：css, html

我在动态创建的主 div 中有一系列 div，结果如下所示

```
<div id="main_div">
  <div class="subdiv" style="width: 200px"> </div>
  <div class="subdiv" style="width: 400px"> </div>
  <div class="subdiv" style="width: 900px"> </div>
  <div class="subdiv" style="width: 100px"> </div>
  <div class="subdiv" style="width: 200px"> </div>
  <div class="subdiv" style="width: 300px"> </div>
  <div class="subdiv" style="width: 20px"> </div>
  <div class="subdiv" style="width: 600px"> </div>
<div/> 
```

如果总宽度超过容器的宽度，我想打破一个 div。

**这个**

```
|‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾container‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾|
|                                                                      | 
|‾‾‾‾‾‾‾‾‾‾‾‾‾‾|‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾|‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾|
|   subdiv1    |       subdiv2      |       subdiv3                                    |
|______________|____________________|__________________________________________________|
|                                                                      | 
|                                                                      | 
|______________________________________________________________________| 
```

**会变成这样：**

```
|‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾container‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾|
|                                                                      | 
|‾‾‾‾‾‾‾‾‾‾‾‾‾‾|‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾|‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾|
|   subdiv1    |       subdiv2      |       subdiv3 - first part       |
|______________|____________________|__________________________________|
|                                                                      | 
|                                                                      | 
|‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾|                                             | 
| subdiv3-remaining      |                                             | 
|________________________|                                             | 
|                                                                      | 
|______________________________________________________________________| 
```

使用 column-count 和 column-break 属性，您可以垂直执行此操作。检查我的[例子](http://jsfiddle.net/CRzSP/2/)。

我想**水平**地做到这一点。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T14:37:03.600

```
#main-div { overflow:hidden; }
.subdiv { float:left; } 
```

# android - Android numberpicker 锁应用

> ID：14339778
> 
> 赞同：3
> 
> 时间：2013-01-15T14:23:28.907
> 
> 标签：android, numberpicker

我正在尝试使用 android.widget.NumberPicker 但将范围限制为 0 - 5。但是，这似乎导致我的应用程序锁定。最初，向上/向下按钮不可用，突出显示该框会出现一个，但按几次会导致应用程序停止响应。

```
 final NumberPicker numerOnePicker  = (NumberPicker) findViewById(R.id.numericOnePicker);    
    numerOnePicker.setMinValue(0);
    numerOnePicker.setMaxValue(4); 
```

XML如下：

```
<LinearLayout android:layout_height="wrap_content" 
android:layout_width="wrap_content"
android:layout_gravity="center_horizontal"   
android:orientation="horizontal"
android:paddingTop="20dp"> 

<NumberPicker
        android:id="@+id/numericOnePicker"
        android:layout_width="55dp"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:orientation="vertical"/> 
```

# php - 从两个表中选择一行取决于主键（Mysql）？

> ID：14339788
> 
> 赞同：2
> 
> 时间：2013-01-15T14:24:08.713
> 
> 标签：php, mysql, sql, select

我有两个表用户和相册。在 users 表中有`user_id`主键。在其他表专辑中有多行，`user_id`因为每次用户上传新专辑时，它都会`user_id`作为外键上传。我只想选择一次`user_id`与其他表（专辑）忽略其他结果集。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T14:27:48.550

```
SELECT album.* FROM album LEFT JOIN users ON user.id = album.id WHERE user.id = SOMEIDHERE 
```

我相信这会奏效，你没有给我很多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T14:29:42.920

```
SELECT  a.*, b.*
FROM    users a
        INNER JOIN album b
            ON a.user_ID = b.user_ID
        INNER JOIN
        (
            SELECT user_ID, MAX(photo_id) max_rec
            FROM album
            GROUP BY    user_ID
        ) c ON b.user_ID = c.user_ID AND
                b.photo_id = c.max_rec 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T14:31:54.470

```
SELECT *
FROM (  SELECT u.*, a.*
        FROM users AS u
        INNER JOIN album AS a
        ON u.user_ID = a.user_ID
        ORDER BY a.created DESC) AS h
GROUP BY user_ID 
```

`ORDER BY b.created DESC`->`ORDER BY`任何你想要的行。在这种情况下，选择最新的。

# wix - WiX ServiceInstall 服务依赖

> ID：14339794
> 
> 赞同：12
> 
> 时间：2013-01-15T14:24:15.453
> 
> 标签：wix, serviceinstall

如何在 WiX ServiceInstall 属性中设置服务的依赖项以依赖于，例如 LmHosts

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-15T14:24:15.453

```
<ServiceInstall Id="ServiceNameId" Type="ownProcess" Name="ServiceName"
                DisplayName="Service Display Name"
                Description="Service Description" Start="auto" Account="LOCALSYSTEM"
                ErrorControl="normal">
      <ServiceDependency Id="LmHosts" />
</ServiceInstall> 
```

# r - R-Project if else 语法

> ID：14339803
> 
> 赞同：5
> 
> 时间：2013-01-15T14:24:43.157
> 
> 标签：r, if-statement, syntax

我正在学习一个教程，并且在语法方面遇到了困难。我看不到哪里出错了，但我从控制台收到错误消息。

我在一个目录中有 300 个 csv 文件的列表。用户将输入他们正在寻找信息的文件的编号（id）。格式如下：001.csv、002.csv、090.csv 250.csv 等。

该功能是将输入转换为字符串，即csv文件名。例如，如果 id 为 5，则返回 005.csv。如果输入220，输出220.csv。

这是代码：

```
csvfile <- function(id) {
  if (id < 10) { paste0(0,0,id,".csv"
  } else if (id < 100) {paste0(0,id,".csv"
  }else paste0(id,".csv")
} 
```

这是控制台返回的错误：

```
> csvfile <- function(id) {
+ if (id < 10) { paste0(0,0,id,".csv"
+ } else if (id < 100) {paste0(0,id,".csv"
Error: unexpected '}' in:
"if (id < 10) { paste0(0,0,id,".csv"
}"
> }else paste0(id,".csv")
Error: unexpected '}' in "}"
> } 
```

我可以看到 R 不喜欢我的一些 '}' 但不知道为什么？我的语法有什么问题？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-15T14:27:23.847

`)`对于前两个`paste0`电话，您在其中缺少一些字符：

```
csvfile <- function(id) {
    if (id < 10) { 
        paste0(0,0,id,".csv")
    } else if (id < 100) {
        paste0(0,id,".csv")
    } else paste0(id,".csv")
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-15T14:37:32.687

一开始很难发现 R 中的语法错误。控制台可以很好地测试一行代码，但是当您尝试编写更长的语句时它不是很有帮助。

我的建议是使用 IDE 来帮助您编写函数。为什么不试试[RStudio](http://www.rstudio.com/)？

# c - 从 bst 写入 n 个第一个元素

> ID：14339804
> 
> 赞同：0
> 
> 时间：2013-01-15T14:24:46.713
> 
> 标签：c, binary-search-tree

我只想打印 bst 树中的 n 个第一个元素，所以我添加了全局变量 counter

```
int a = 0;
void print (wezel **korzen,int x)
{
    if((*korzen) != NULL && (a < x))
    {
        print( &((*korzen)->lewe),x );
        a++;
        printf("%s %d\n", (*korzen)->wartosc, (*korzen)->ile);
        print( &((*korzen)->prawe),x );
    }
} 
```

但是如果这种情况不起作用？我在哪里犯错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T14:37:26.743

正如我在评论中提到的，您在第一次打印后不检查 a ：

```
int a = 0;
void print (wezel **korzen,int x)
{
    if((*korzen) != NULL && (a < x))
    {
        print( &((*korzen)->lewe),x );
        // A has incremented since last check
        if (a < x) {
            printf("%s %d\n", (*korzen)->wartosc, (*korzen)->ile);
            a++;
            print( &((*korzen)->prawe),x );
        }
    }
} 
```

# jquery - 使用复选框模拟单选按钮并且只触发一次更改事件？

> ID：14339805
> 
> 赞同：0
> 
> 时间：2013-01-15T14:24:51.260
> 
> 标签：jquery, checkbox, radio-button

我想使用复选框来模拟单选按钮的行为，这表示：

> 当一个复选框被选中时，所有其他同名的复选框（这里是选择器）都不会被选中

但是，如果我尝试做类似的事情：

```
$('body').delegate('.myradio', 'click', function(e) {
    $('.myradio').prop('checked', false);
    $(this).prop('checked', true);
}); 
```

这会触发`change`事件两次。

如果我尝试添加`e.preventDefault`：

```
$('body').delegate('.myradio', 'click', function(e) {
    $('.myradio').prop('checked', false);
    $(this).prop('checked', true);
    e.preventDefault();
}); 
```

根本没有触发任何事件，也没有选中复选框。

最后，如果我尝试自己触发事件：

```
$('body').delegate('.myradio', 'click', function(e) {
    $('.myradio').prop('checked', false);
    $(this).prop('checked', true);
    e.preventDefault();
    $(this).change();
}); 
```

该`change`事件也被调用两次。

有关信息，我所有的复选框都有唯一的 ID。

除了选中的复选框之外，禁用所有复选框的正确方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T14:40:32.540

如果我正确理解您的问题，以下应该可以。

```
$('body').delegate('.myradio', 'click', function (e) {
    var $element = $(this)[0];
    $('.myradio').each(function () {
        if ($(this)[0] !== $element)
            $(this).prop('checked', false);
    });
}); 
```

This way the checkbox group behaves like a radio button group. Except that you can de-select a selected item.

* * *

Below code makes the group behave more like a radio group. You can't de-select once you made a selection.

```
$('body').delegate('.myradio', 'click', function (e) {
    var $element = $(this)[0];

    if ($(this).prop('checked') == false) {
        $(this).prop('checked', true);
        return;
    }

    $('.myradio').each(function () {
        if ($(this)[0] !== $element)
            $(this).prop('checked', false);
    });
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T14:49:36.967

You can do it like this if you still want to be able to unselect a checkbox

```
$('input[type=checkbox]').change(function(){ // <-- use the change event
  var group = $(this).attr('name'); // get the group
  $('input[name='+group+']').not(this).prop('checked',false);  // set others to unchecked
}); 
```

[http://jsfiddle.net/rmJpB/](http://jsfiddle.net/rmJpB/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T14:55:34.067

You can use on() function.

```
$('body').on('click', '.myradio', function(){
  $('.myradio[name="'+$(this).attr('name')+'"]').prop('checked', false);
  $(this).prop('checked', true);
}); 
```

Uncheck all the other checkboxes with the same name, check the current checkbox.

[http://jsbin.com/ofibow/2/edit](http://jsbin.com/ofibow/2/edit)

# wix - 如何使用 WIX 在 D 盘中创建 INSTALLLOCATION 文件夹？

> ID：14339814
> 
> 赞同：3
> 
> 时间：2013-01-15T14:25:22.160
> 
> 标签：wix

下面的 xml 在 C:\Programfiles 下创建指定的文件夹，但我想在 D:\MySetupFolder\ 中创建 (SomeFolder\MyApp) 文件夹，如何使用 WIX 创建它？

```
<Directory Id="TARGETDIR" Name="SourceDir">
**<Directory Id="$(var.PlatformProgramFilesFolder)">**      
        <Directory Id="INSTALLFOLDERLOCATION" Name="SomeFolder">
                <Directory Id="INSTALLLOCATION" Name="MyApp">
</Directory>
</Directory>
</Directory> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T17:40:33.660

将rootdrive的值设置为您想要的驱动器

```
<CustomAction Id='SetRootDrive' Property='ROOTDRIVE' Value='[%SystemDrive]\'/> 
```

默认情况下，系统驱动器将是操作系统使用的默认驱动器

添加了调用“SetRootDrive”操作的代码：您需要从 InstallUISequence 调用它

```
<InstallUISequence>
  <Show Dialog="MyWelcomeDlg" Before="CostFinalize">NOT Installed</Show>
  <!-- App search is what does FindInstallLocation, and it is dependent on FindRelatedProducts -->
  <AppSearch After="FindRelatedProducts"/>
  <Custom Action="SetRootDrive" Before="CostInitialize"></Custom>
</InstallUISequence> 
```

# opengl-es - LibGDX - 检测碰撞的最佳方法

> ID：14339816
> 
> 赞同：1
> 
> 时间：2013-01-15T14:25:30.457
> 
> 标签：opengl-es, collision-detection, game-engine, libgdx

我有一架飞机。我`rectangle`用来限制这架飞机以检测碰撞，效果很好。当飞机开始下落时，我旋转飞机的纹理，但`rectangle`保持不变。我不知道如何旋转它。我需要用飞机的纹理旋转它，因为我的外壳不会碰撞飞机的尾部和机舱。

![在此处输入图像描述](../Images/e74b9b7a45f4a324bc1f7f109637b556.png)

如何旋转矩形或创建多边形来包裹所有飞机？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T18:38:23.270

@jellyfication 的答案指向光线投射，但您可以实施的另一种简单的方法是**分离轴定理**。下面的链接将详细向您展示该算法的内容以及如何实现它。他们也有一些交互式演示，所以你可以“感受”到算法在做什么。

*   [http://www.metanetsoftware.com/technique/tutorialA.html](http://www.metanetsoftware.com/technique/tutorialA.html)
*   [http://www.sevenson.com.au/actionscript/sat/](http://www.sevenson.com.au/actionscript/sat/)
*   [http://www.codezealot.org/archives/55](http://www.codezealot.org/archives/55)（这个有很多代码）
*   [http://gamedev.tutsplus.com/tutorials/implementation/collision-detection-with-the-separating-axis-theorem/](http://gamedev.tutsplus.com/tutorials/implementation/collision-detection-with-the-separating-axis-theorem/)

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T09:05:23.237

使用多边形类来绘制你的边界框。

然后在多边形类中有一个旋转的方法。

随平面旋转和移动多边形。

# ruby-on-rails - 如何覆盖系统功能

> ID：14339817
> 
> 赞同：1
> 
> 时间：2013-01-15T14:25:33.763
> 
> 标签：ruby-on-rails, ruby

我想覆盖 system() 函数。那可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T14:31:02.857

当然，您几乎可以覆盖 Ruby 中的所有内容（无论有用与否）：

```
system "ls /" # returns "/etc /var...", normal behaviour

def system args
  puts args
end

system "ls /" # returns "ls /" 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-15T14:33:00.813

如果根本不需要使用`system`，那么您可以使用反引号。反引号执行命令并将输出作为字符串返回。

然后，您可以将值分配给一个变量，如下所示：

```
output = `ls`
p output 
```

# c# - 如何根据特定列对对象列表进行排序（排序）

> ID：14339825
> 
> 赞同：-1
> 
> 时间：2013-01-15T14:25:52.750
> 
> 标签：c#, asp.net, linq, sorting, gridview

如何根据特定字段 ( `sort expression`) 和方向 ( `sort direction`) 对对象列表进行排序..

例如 ：

```
TransactionList.ToList<UserTransactionDTO>() 
```

* * *

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T14:28:21.950

假设您的列表是自定义类型的列表，并且您希望按一个或多个属性排序：

```
var trans = transactions.OrderBy(t => t.PropertyName)
                        .ThenBy(t => t.DifferentPropertyName) 
```

如果您想按降序排序：

```
var trans = transactions.OrderByDescending(t => t.PropertyName)
                        .ThenByDescending(t => t.DifferentPropertyName) 
```

[`Enumerable.OrderBy`方法](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.orderby.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T14:29:32.660

```
public class Person
{
    public String Name { get; set; }
    public int Age { get; set; }
}

var people = new List<Person>(); //Fill it
var sorted = people.OrderBy(p => p.Name).ThenBy(p => p.Age); 
```

否则使用 OrderByDescending();

希望这可以帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T14:31:22.787

`IComparer<T>`如果你想使用复杂的排序，你也可以使用,。

请参阅：[如何在 VB.Net 中对 System.Collections.Generic.List 进行排序？](https://stackoverflow.com/questions/438715/how-sort-a-system-collections-generic-list-in-vb-net)

# css - 如何更改select2标签颜色的css？

> ID：14339828
> 
> 赞同：14
> 
> 时间：2013-01-15T14:26:05.400
> 
> 标签：css, twitter-bootstrap, jquery-select2, jquery-select2-4

我刚开始使用项目从选择框中显示多个标签，效果很好，感谢图书馆。

我只需要修改多值选择框中显示的标签的颜色或 CSS。现在标签的颜色显示为灰色，我想根据标签的类型将其更改为其他颜色。或者至少有办法改变默认颜色？

也可以更改标签的css类吗？有一个选项，例如，`formatResultCssClass`但是当我尝试通过该属性添加 css 类时，没有任何改变，如果有人可以展示如何执行此操作的示例，我将不胜感激？

编辑：解决问题的解决方法：向 select2.defaults 添加一个新属性，用于表示所选对象的类。

```
$.fn.select2.defaults = {
...
    selectedTagClass: "",
...
}

addSelectedChoice: function (data) {
        var choice=$(
            "<li class='select2-search-choice " + this.opts.selectedTagClass + "'>" +
            "    <div><a href='#' onclick='return false;' class='select2-search-choice-close' tabindex='-1'><i class='icon-remove icon-white'/></a></div>" +
            "</li>"),
        id = this.id(data),
        val = this.getVal(),
        formatted;
... 
```

并使用这个新属性初始化 select2：

```
$(".#select2Input").select2({placeholder: "Please Select Country", 
                    selectedTagClass: 'label label-info', // label label-info are css classes that will be used for selected elements
                    formatNoMatches: function () { return "There isn't any country similar to entered query"; }
                }); 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-02-20T09:26:59.580

要格式化标签，您可以使用函数 formatSelectionCssClass。

```
$("#mySelect").select2({
    formatSelectionCssClass: function (data, container) { return "myCssClass"; },
}); 
```

或者您可以根据选项 id 添加一个 css 类：

```
$("#mySelect").select2({
    formatSelectionCssClass: function (data, container) { return data.id; },
}); 
```

请记住，您需要在 CSS 类中同时覆盖 filter 和 background_color

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-16T13:19:51.407

首先 - 一个警告，这意味着您正在覆盖 select2 内部的 CSS，因此如果 select2 代码在以后更改，*您还必须更改您的代码*。目前没有`formatChoiceCSS`方法（尽管它会很有用）。

要更改默认颜色，您必须覆盖具有此 CSS 类的标签的各种 CSS 属性：

```
.select2-search-choice {
    background-color: #56a600;
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#f4f4f4', endColorstr='#eeeeee', GradientType=0 );
    background-image: -webkit-gradient(linear, 0% 0%, 0% 100%, color-stop(20%, #f4f4f4), color-stop(50%, #f0f0f0), color-stop(52%, #e8e8e8), color-stop(100%, #eeeeee));
    background-image: -webkit-linear-gradient(top, #f4f4f4 20%, #f0f0f0 50%, #e8e8e8 52%, #eeeeee 100%);
    background-image: -moz-linear-gradient(top, #f4f4f4 20%, #f0f0f0 50%, #e8e8e8 52%, #eeeeee 100%);
    background-image: -o-linear-gradient(top, #f4f4f4 20%, #f0f0f0 50%, #e8e8e8 52%, #eeeeee 100%);
    background-image: -ms-linear-gradient(top, #f4f4f4 20%, #f0f0f0 50%, #e8e8e8 52%, #eeeeee 100%);
    background-image: linear-gradient(top, #f4f4f4 20%, #f0f0f0 50%, #e8e8e8 52%, #eeeeee 100%);
    -webkit-box-shadow: 0 0 2px #ffffff inset, 0 1px 0 rgba(0,0,0,0.05);
    -moz-box-shadow: 0 0 2px #ffffff inset, 0 1px 0 rgba(0,0,0,0.05);
    box-shadow: 0 0 2px #ffffff inset, 0 1px 0 rgba(0,0,0,0.05);
    color: #333;
    border: 1px solid #aaaaaa;
} 
```

要根据该标签的文本或选项 # 更改每个标签的类，您必须添加一个更改事件：

```
$("#select2_element").on("change", function(e) { 
      if (e.added) {
          // You can add other filters here like
          // if e.val == option_x_of_interest or
          // if e.added.text == some_text_of_interest
          // Then add a custom CSS class my-custom-css to the <li> added
          $('.select2-search-choice:not(.my-custom-css)', this).addClass('my-custom-css');
      }
}); 
```

您可以在此类中定义自定义背景颜色等：

```
li.my-custom-css {
       background-color: // etc etc
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-06-16T21:28:17.480

在我的情况下，我需要显示“选择”的标签和正在添加的标签之间的区别。

这里的帮助是针对以前版本的 select2 的，并没有多大用处。使用当前的 4.0 版本（带有非常稀疏的文档），我能够使用模板函数和一点“聪明”来实现这一点。

第一步是对结果进行模板化（应该注意，在每次选择或删除操作时，都会为框中的每个选择触发）。这通常只返回将在生成的 LI 中出现的文本......但是我们希望将该文本包装在一个跨度中（并告诉 S2 不要通过返回一个对象来剥离 HTML），并为我们的类型使用自定义 CSS 类。在我的示例中，我使用该`selected`属性来确定这一点：

```
$('.select2_sortable').select2({
    tags: true,
    templateSelection: function(selection) {
        if(selection.selected) {
            return $.parseHTML('<span class="im_selected">' + selection.text + '</span>');
        }
        else {
            return $.parseHTML('<span class="im_writein">' + selection.text + '</span>');
        }
    }
}); 
```

选择项目后生成的 HTML 应该是这样的：

```
<ul class="select2-selection__rendered ui-sortable" id="select2_rendered_smartselectbox_4">
    <li class="select2-selection__choice" title="John Doe">
        <span class="select2-selection__choice__remove" role="presentation">×</span>
        <span class="im_selected">John Doe</span>
    </li>
    <li class="select2-selection__choice" title="fdfsdfds">
        <span class="select2-selection__choice__remove" role="presentation">×</span>
    <span class="im_writein">fdfsdfds</span>
    </li>
    <li class="select2-search select2-search--inline ui-sortable-handle">
        <input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" placeholder="" style="width: 0.75em;">
    </li>
</ul> 
```

但这还不够，因为我们需要访问父 LI，而不是 span 子。由于 CSS 不允许父选择器，我们必须运行一些 jQuery 来实现它。因为这些是重绘的，所以我们希望在 Select2 项的`select`和事件上运行此函数：`remove`

```
$('.select2_sortable').on("select2:select", function (ev) {
    updateSelectedParents();
});
$('.select2_sortable').on("select2:removed", function (ev) {
    updateSelectedParents();
});

function updateSelectedParents() {
    $('.im_selected').closest('li').addClass('im_connected_item');
    $('.im_writein').closest('li').addClass('im_writein_item');
} 
```

最终导致：

```
<ul class="select2-selection__rendered ui-sortable" id="select2_rendered_smartselectbox_4">
    <li class="select2-selection__choice im_connected_item" title="John Doe">
        <span class="select2-selection__choice__remove" role="presentation">×</span>
        <span class="im_selected">John Doe</span>
    </li>
    <li class="select2-selection__choice im_writein_item" title="fdfsdfds">
        <span class="select2-selection__choice__remove" role="presentation">×</span>
    <span class="im_writein">fdfsdfds</span>
    </li>
    <li class="select2-search select2-search--inline ui-sortable-handle">
        <input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" placeholder="" style="width: 0.75em;">
    </li>
</ul> 
```

并允许您根据`im_writein_item`和`im_connected_item`CSS 类对元素进行样式设置。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-07-31T22:06:07.773

您可以像这样访问标签容器：

```
formatSelectionCssClass = function(tag, container) {
    $(container).parent().addClass("my-css-class");
}; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-01-23T11:13:49.737

使用`formatResultCssClass`,`containerCssClass`和`dropdownCssClass`选项指定代码中的类，使用`adaptContainerCssClass`and`adaptDropdownCssClass`选项指定标记中的类，甚至使用`containerCss`and`dropdownCss`选项指定代码中的内联样式。

*如果你想知道为什么你从来没有使用过这些，那么它们不久前[没有被正确记录。](https://github.com/ivaynberg/select2/issues/285)*

**参考**：< [http://ivaynberg.github.io/select2/](http://ivaynberg.github.io/select2/) >

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-10-29T14:03:38.917

对于那些只想更改某些 select2 框颜色的人：

与其直接修改 select2-choice 的 Select2 CSS 属性，不如使用 select2 为 select2 div 生成的 ID（这将是#s2id_yourelementid）来选择其携带 select2-choice 类的子项。

例如，如果我想修改应用 Select2 的元素#myelement，然后要更改颜色，我会在我的 css 中添加以下内容：

```
#s2id_myelement > .select2-choice{
     background-color:blue;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-07-25T14:47:12.730

**添加这个 CSS 对我有用：**

```
.select2-selection__choice {
  background-color: red !important;
  filter: progid: DXImageTransform.Microsoft.gradient( startColorstr='#f4f4f4', endColorstr='#eeeeee', GradientType=0);
  background-image: -webkit-linear-gradient(top, red 25%, yellow 52%, green 25%, purple 100%) !important;
  background-image: -moz-linear-gradient(top, red 25%, yellow 52%, green 25%, purple 100%) !important;
  background-image: -o-linear-gradient(top, red 25%, yellow 52%, green 25%, purple 100%) !important;
  background-image: -ms-linear-gradient(top, red 25%, yellow 52%, green 25%, purple 100%) !important;
  background-image: linear-gradient(top, red 25%, yellow 52%, green 25%, purple 100%) !important;
  -webkit-box-shadow: 0 0 2px #ffffff inset, 0 1px 0 rgba(0, 0, 0, 0.05) !important;
  -moz-box-shadow: 0 0 2px #ffffff inset, 0 1px 0 rgba(0, 0, 0, 0.05) !important;
  box-shadow: 0 0 2px #ffffff inset, 0 1px 0 rgba(0, 0, 0, 0.05) !important;
  color: white !important;
  border: 1px solid #aaaaaa !important;
} 
```

**小提琴示例：**

[http://jsfiddle.net/sajjansarkar/hvsvcc5r/](http://jsfiddle.net/sajjansarkar/hvsvcc5r/)

*（是的，我疯狂地用颜色来证明我的观点；-)）*

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-11-27T08:21:12.473

我在下面使用

```
 .form-control{
        border: 1px solid #cccccc!important;
    }
    .select2-container .select2-selection--single {
        height: 48px !important;
        padding: 10px;
        border-radius: 0px;
        border: 1px solid #cccccc;
    }
    .select2-container .select2-selection--multiple {
        height: 48px !important;
        padding: 5px;
        border-radius: 0px;
        border: 1px solid #cccccc;
    } 
```

# c# - 如何反转字符串的字母顺序

> ID：14339835
> 
> 赞同：-5
> 
> 时间：2013-01-15T14:26:28.330
> 
> 标签：c#

如何反转字符串的字母顺序

我想知道如何反转字符串中的单个字符，加上数字。我已经通过执行以下操作以非常简单的方式尝试了它，但出于逻辑原因，这不起作用：

**解码**

```
abcdefghijklmnopqrstuvwxyz 
```

**编码**

```
abcdefghijklmmlkjihgfedcba 
```

我使用了一个非常简单的 string.Replace 来获得它。正如你所看到的，只有一半的字符串被反转了。我不确定我的逻辑是否正确，但我认为这是因为字符串作为一个整体进行转换，而不是单独转换其中的每个字符。我想知道反转字母字符和数字的最佳方法是什么，以便获得正确的输出。例子非常受欢迎！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T14:28:08.007

```
using System.Linq;

//...

string f = "abcdefghijklmmlkjihgfedcba"
string r = new string(f.Reverse().ToArray()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T14:36:18.980

假设 OP 想要按字母顺序排列

```
string s = "yourstring";
s = new string(s.OrderBy(t => t).ToArray()); 
```

或者

```
s = new string(s.OrderByDescending(t => t).ToArray()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T14:36:34.553

*（假设您正在尝试反转字符串，这从您的问题中不是很清楚......）*

您可以使用这样的扩展方法：

```
public static class StringExtensions
{
    public static string Reverse(this string s)
    {
        if (s == null)
            throw new ArgumentNullException("s");

        bool wasFormD = false;
        if (s.IsNormalized(NormalizationForm.FormD))
        {
            wasFormD = true;
            // Normalize to form C so that composite chars are represented as a single char
            s = s.Normalize(NormalizationForm.FormC);
        }
        s = new String(((IEnumerable<char>)s).Reverse().ToArray());

        // Restore normalization form D
        if (wasFormD)
        {
            s = s.Normalize(NormalizationForm.FormD);
        }
        return s;
    }
} 
```

然后你可以像这样使用它：

```
string original = "abcdefghijklmnopqrstuvwxyz";
string reversed = original.Reverse(); 
```

注意：扩展方法的代码可能看起来比必要的复杂，但规范化技巧是必要的，以避免颠倒组合字符的顺序。如果没有这种操作，像“Les Misérables”这样的字符串将被反转为“selbaŕesiM seL”（注意“r”而不是“e”上的重音）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T14:31:19.720

以下是反转字符串的一种方法

```
string str= "reverse string";
string stroutput = new string(str.ToCharArray().Reverse().ToArray()); 
```

用于此的 Ext 方法

```
static class StringExt
{
    public static string ReverseStr(this string str)
    {
        return new string(str.ToCharArray().Reverse().ToArray());
    }
} 
```

* * *

如果要更改字母顺序

```
string str = "agdefbv";
char[] str = str.ToArray();
Array.Sort(str );
string s = new string(str); 
```

# android - 设置 SherlockActionBar 的标题

> ID：14339836
> 
> 赞同：4
> 
> 时间：2013-01-15T14:26:29.253
> 
> 标签：android, android-fragments, android-actionbar, android-fragmentactivity

我有两个活动。

第一个扩展了 SherlockListActivity，第二个扩展了 SherlockFragmentActivity。在第一个中，我可以像这样设置我的 actionBar 的标题和副标题，`getSupportActionBar.setTitle("some Title");`它工作正常。

当我在我的第二个 Activity 上做同样的事情时，名称不会改变（我在我的班级的上级之前提到过，以防它与问题相关）。

为什么会这样？

先感谢您。

编辑：好的，我刚刚发现了问题所在。我在 actionBar 上添加了一些选项卡，所以当我尝试设置标题时，它被隐藏了（我猜）有什么办法可以克服这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T08:23:30.480

默认情况下不应隐藏标题，但您可以尝试使用

```
 getActionBar().setDisplayShowTitleEnabled(true); 
```

看看你能不能把标题拿回来。或者，如果您在某处以 false 作为参数调用该方法，那么这就是您的问题。

# php - 导出帖子以供 CSV 文件下载

> ID：14339838
> 
> 赞同：0
> 
> 时间：2013-01-15T14:26:43.787
> 
> 标签：php, wordpress, csv

如何合并下面的循环以导出为 CSV？

```
<?php $answers = new WP_Query(array('cat' => 25, 'order' => 'DESC')); ?>
<table width="100%" border="1" cellspacing="1" cellpadding="1">
      <tr>
        <td valign="top">Name</td>
        <td valign="top">Submission/production title</td>
        <td valign="top">Performance space</td> 
      </tr>
<?php if ($answers->have_posts()) : while ($answers->have_posts()) : $answers->the_post(); ?>   
      <tr>
        <td><?php echo the_title(); ?></td>
        <td><?php echo the_field('submit_submission_production_title'); ?></td>
        <td><?php echo the_field('submit_performance_space'); ?></td>  
      </tr>
   <?php endwhile; ?> 
    </table>                    
<?php endif; ?> 
```

如何将其与[fputcsv](http://ca2.php.net/manual/en/function.fputcsv.php)集成？

```
<?php
$list = array (
    'aaa,bbb,ccc,dddd',
    '123,456,789',
    '"aaa","bbb"'
);

$fp = fopen('file.csv', 'w');

foreach ($list as $line) {
    fputcsv($fp, split(',', $line), ',', '&quot;');
}
fclose($fp);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T19:16:06.967

首先，`the_title`和`the_field`* 是自己**做** *`echo`*的功能，你不需要`echo the_title()`.

**`*`** *假设这是来自高级自定义字段。*

只需构建一个数组，例如：

```
$answers = new WP_Query( array('cat' => 25, 'order' => 'DESC') ); 
if ( $answers->have_posts() ) {
    $list = array( 'Name,Submission/production title,Performance space' );
    while ( $answers->have_posts() ) {
        $title = get_the_title();
        $field1 = get_field('submit_submission_production_title');
        $field2 = get_field('submit_performance_space');
        $list[] = $title . ',' . $field1 . ',' . $field2;

        // IF ENCLOSING DOUBLE QUOTES ARE NEEDED
        // $list[] = '"' . $title . '","' . $field1 . '","' . $field2 . '"';
    }
} 
```

# mysql - JPQL / SQL 查询：其中 '%' 包括空值

> ID：14339841
> 
> 赞同：2
> 
> 时间：2013-01-15T14:26:56.273
> 
> 标签：mysql, sql, database, hibernate, jpql

我有一个简单的 JPQL 查询。（但这也适用于 sql 查询..）

```
FROM DomainObj d where d.field1 like 'TEST%' and d.field2 like '%'; 
```

如果数据库包含以下行：

1）字段1->'测试'；字段2->空

查询什么也不返回！

如果 DB 包含以下值：

2) 归档1 -> '测试'; 字段2->''

查询返回行！

如何在搜索类似“%”的同时包含空值，使查询尽可能简单（避免和/或子句？）

我正在数据库中实现实体的搜索功能。我还同时搜索许多字段。

谢谢马可

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-15T14:30:13.350

您不能在相等测试中直接使用 null，因为 null 不等于一切，包括它自己。这就是为什么有`is null`测试，例如：

```
select null = null -> null
select null <> null -> null
select 1 = null -> null
select 1 <> null -> null
select 1 + null -> null 
```

本质上 null 是具有传染性的，并且会使与之比较或添加的任何内容无效。

所以是的，你必须做

```
SELECT ... WHERE somefield LIKE '%...%' or somefield IS NULL 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T14:30:22.757

尝试这个：

```
...
and IFNULL(d.field2, '') like '%' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T14:30:16.767

```
...
where ...
and (field2 = '' or field2 is null) 
```

请注意，该条件`field2 like '%'`是无意义的，因为它匹配除 null 之外的任何文本。如果您添加`or field2 is mull`到它，您将匹配所有内容，因此从逻辑上讲，您应该*删除*field2 上的条件

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T14:30:25.627

使用`IS NULL`：

```
where d.field1 like 'TEST%' OR d.field2 IS NULL; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-15T14:30:45.627

```
FROM DomainObj d where (d.field1 like 'TEST%' or d.field1 IS NULL) and (d.field2 like '%' or d.field2 IS NULL) 
```

# objective-c - 如何在 Mac 上分别录制音频和视频？

> ID：14339843
> 
> 赞同：1
> 
> 时间：2013-01-15T14:26:59.523
> 
> 标签：objective-c, macos, cocoa

我正在构建需要将录制的音频和视频数据分别发送到网络的应用程序。目前我正在使用 QTKit 来捕获媒体，但它只允许将视频和音频数据结合使用。
是否有任何方法或框架可以分开处理视频和音频？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T23:50:17.847

> 我正在使用 QTKit 来捕获媒体，但它只允许结合使用视频和音频数据。

错误的。

您可以使用 QTKit 将多个输入和输出添加到您的捕获会话中。他们不必结合 A/V。[从这里开始阅读整个文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/QTKitApplicationTutorial/Introduction/Introduction.html)，如果遇到问题，请发布另一个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T09:07:23.310

AVFoundation 框架还支持录制音频和视频。参考这个示例代码

[AVRecorder](https://developer.apple.com/library/mac/#samplecode/AVRecorder/Introduction/Intro.html#//apple_ref/doc/uid/DTS40011004)

但此框架仅支持 OS X v10.7 或更高版本

# python - CorelDraw 中的 Python

> ID：14339844
> 
> 赞同：0
> 
> 时间：2013-01-15T14:27:06.267
> 
> 标签：python, language-agnostic, cross-platform, coreldraw

我一直在寻找大多数跨平台（和简单）的编程语言来学习，经过一些调查，我认为它是 Python 特别是，我发现的所有路径都可以选择 Python 来开发它（Ubuntu 桌面等），但是当谈到 CorelDraw (VBA) 我没有发现 Python 可以做到，所以这是我的问题。

有没有办法在 Python 中开发/自动化 CorelDraw？

我不想要像 javaScript 这样的脚本选项，当然也不想要像 C、C++ 这样的任何选项，否则我会说 Assembly :)

HTML5 也不是解决方案，因为我正在寻找后端（除非我错过了一些关于 HTML5 的信息）

还让我举例说明我希望能够做什么（每件事） 1\. Windows 应用程序（所有版本，特别是新的 7,8） 2\. Web 3\. 类 Lib 4\. skype 插件 5\. 替换 VBA（ Excel VBA, Corel VBA) 6\. 构建 ubuntu 桌面应用程序 7\. 构建移动应用程序 (iPhone, and Roid & 当然是 Ubuntu) 8\. Chrome 应用程序/附加组件 9\. FireFox 附加组件 10 ... etc. Thanx,

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T14:55:12.063

我没有从事过图形设计包；但我知道 CorelDraw 不是跨平台的。它是特定于 Windows 的。但是您提到您的需求是跨平台的；所以你必须改变你将要工作的应用程序的选择。为了那个原因; 那里有三个非常著名的跨平台应用程序；[`Inkscape`](http://www.inkscape.org/),[`GIMP`](http://www.gimp.org/docs/python/index.html)和[`Blender`](http://www.blender.org/education-help/python/). 此外；都支持 python 脚本。

inkscape 示例教程：http: [//oco-carbon.com/2012/05/13/heat-maps-with-python-and-inkscape/](http://oco-carbon.com/2012/05/13/heat-maps-with-python-and-inkscape/)

# python - 在 Python 中创建和使用设置模块

> ID：14339845
> 
> 赞同：0
> 
> 时间：2013-01-15T14:27:06.193
> 
> 标签：python

我是 Python 新手，所以请耐心等待。我在 Eclipse 前使用 pyDev 插件。共有三个文件：

**工具.py：**

```
from gui import Tool_Window
import wx
import settings

if __name__ == '__main__':

    window = wx.App()
    Tool_Window(None, settings.WindowHeader)
    window.MainLoop() 
```

**工具窗口.py：**

```
from Tool import settings
import wx

class Tool_Window(wx.Frame):

def __init__(self, parent, title):

    super(Tool_Window,self).__init__(parent, title = title)

    self.SetDimensions(settings.WindowOpenX,
                       settings.WindowOpenY,
                       settings.WindowWidth,
                       settings.WindowHeight) 
```

**设置.py：**

```
WindowHeader = 'The SuperAwesome Tool'
WindowOpenX = 500
WindowOpenY = 100
WindowWidth = 200
WindowHeight = 400 
```

“tool.py”文件位于名为“Tool”的包中，“settings.py”文件也是如此，“Tool_Window”位于“gui”包中。

我从项目中以前的文件中收到错误消息，现在重命名为“settings.py”。我曾尝试在 Eclipse 中清理项目，但没有任何反应。错误消息如下所示：

```
Traceback (most recent call last):
  File "/home/oystein/workspaces/python/awesome.tool/src/Tool/tool.py", line 8, in <module>
    Tool_Window(None, settings.WindowHeader)
  File "/home/oystein/workspaces/python/awesome.tool/src/gui/__init__.py", line 12, in __init__
    # ;-)
AttributeError: class GeneralParameters has no attribute 'WindowParameters' 
```

以前我有一个名为 GeneralParameters 的类，它有一个子类 WindowParameters，因为我想访问静态变量以进行设置。我 relaized Python 不能那样做，并将其更改为“settings.py”文件。

我从“tool.py”运行程序

谁能看到这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T15:53:10.390

您正在运行陈旧的字节码，删除`.pyc`文件并重新运行您的代码。

回溯从文件中读取源代码，`.py`但从字节码构建，事实表明错误出现在仅包含注释的行上，这表明事情不再同步。

通常，Python 会在文件过时时清理`.pyc`文件，但前提是`.py`修改时间较新。

# android - Android构建目标升级的利弊？

> ID：14339847
> 
> 赞同：1
> 
> 时间：2013-01-15T14:27:10.340
> 
> 标签：android, upgrade

我将构建目标从 7 更改为 16，唯一的原因是我想使用最新的 SDK 进行编译。我仍然想定位从 7 开始的版本。

我的项目在 2 台设备上编译并运行没有问题。但我不确定这是否安全。我不想承认它在某些设备上崩溃，因为有些事情我不知道。

在没有任何具体原因的情况下升级构建目标是否有意义？

**编辑**：只是为了说清楚-我不是为了更新版本或支持新功能（我已经在使用兼容性库）。这只是因为，也许随着更新的构建目标，内部结构得到了改进——比如性能等？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T14:30:47.980

如果您*不*使用新 SDK 版本的任何功能，则更新此要求“仅用于升级”是*没有意义的。*在设备上运行您的应用程序时，它将使用*该*版本，因此它已经使用了最新的内部结构。

android 库是*向后兼容*的（意味着它与旧版本兼容）。支持库提供*前向兼容性*（意味着它添加了功能以匹配最新的 android 库版本），支持库随应用程序提供（在 APK 中），因此在需要时可用。应用程序首先尝试使用 android 库（因此它始终使用该设备的最新内部组件），如果功能不存在，它会尝试支持库。

* * *

*如果*您需要一些新功能，那么您应该升级到*该*SDK 版本。并且（最终）添加代码以检查运行版本并为具有较低 SDK 版本的设备提供替代方案。

要在运行时找出 SDK 版本以提供替代方案，请使用[`android.os.Build.VERSION`](http://developer.android.com/reference/android/os/Build.VERSION.html).

# ios - 在 xcode 输出中禁用日期/进程 ID

> ID：14339851
> 
> 赞同：1
> 
> 时间：2013-01-15T14:27:15.477
> 
> 标签：ios, xcode

如何从 XCode 的输出窗口中删除日期和进程 ID？它们只占用大量空间而没有真正的价值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T17:48:59.997

使用这个宏，这将覆盖 NSLog 的默认行为，

```
#define NSLog(STRING, ...) printf("%s\n", [[NSString stringWithFormat:STRING, ##__VA_ARGS__] UTF8String]); 
```

# ajax - 在 p:dataTable 上使用过滤器时，Ajax 更新不起作用

> ID：14339855
> 
> 赞同：31
> 
> 时间：2013-01-15T14:27:28.883
> 
> 标签：ajax, jsf, filter, primefaces, datatable

我有一个数据表，其中包括 primefaces 的过滤器功能。可以对表格进行一些操作（例如编辑）。用户使用 ajax 操作完成后数据表会更新。如果我不过滤数据表，它会直接更新表格并且效果很好，不幸的是，如果我使用它并对其进行编辑，则不会。

这就是我的数据表的样子：

```
 <p:dataTable id="dataTable" var="row"
                value="#{bean.value}"
                filteredValue="#{bean.filteredValue}"
                paginator="true" rows="25" paginatorPosition="bottom"
                rowKey="${row.id}"
                paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}"
                editable="true"> 
```

以及触发更新的 Button

```
<p:commandButton value="Save"
                        actionListener="#{bean.save}"
                        update=":form"/> 
```

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-01-15T15:24:31.897

更新**数据表**后，您必须调用它的客户端`filter()`方法。

```
<p:dataTable widgetVar="dataTableWidgetVar" id="dataTable" var="row"
             value="#{bean.value}"
             filteredValue="#{bean.filteredValue}"
             paginator="true" rows="25" paginatorPosition="bottom"
             rowKey="${row.id}"
             editable="true">

<p:commandButton value="Save"
                 actionListener="#{bean.save}"
                 update=":form"
                 oncomplete="PF('dataTableWidgetVar').filter()"/> 
```

对于早于 5 的 PrimeFaces 版本，您应该使用

```
<p:commandButton value="Save"
                 actionListener="#{bean.save}"
                 update=":form"
                 oncomplete="dataTableWidgetVar.filter()"/> 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2015-02-11T14:42:26.743

为 Primefaces 5.x 添加答案，因为它们改变了调用小部件 var 的方式：

与 Kerem Baydogan 的回答几乎相同，但稍作修改：

```
<p:commandButton value="Save"
                 actionListener="#{bean.save}"
                 update="@form"
                 oncomplete="PF('dataTableWidgetVar').filter()"/> 
```

或者您可以使用以下命令完全清除过滤器：

```
<p:commandButton value="Save"
                 actionListener="#{bean.save}"
                 update="@form"
                 oncomplete="PF('dataTableWidgetVar').clearFilters()"/> 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2017-04-20T15:37:51.457

对于primefaces大于等于5的版本，可以使用这块代码，效果很好

```
<p:dataTable var="page" value="#{yourBean.allData}" widgetVar="yourWidgetVarName"/>

<p:commandButton value="delete"
                 actionListener="#{yourBean.delete}"
                 update="@form"
                 oncomplete="PF('yourWidgetVarName').filter()"/> 
```

* * *

## 回答 #4

> 赞同：-6
> 
> 时间：2015-04-10T10:12:36.490

如果您使用的是 primefaces 的第 5 版，只需制作表示单个数据行的数据类，以实现 Serializable

# visual-studio - 将 TFS 2010 团队项目和集合组导出或复制到不同的集合和项目

> ID：14339859
> 
> 赞同：2
> 
> 时间：2013-01-15T14:27:51.580
> 
> 标签：visual-studio, tfs

我正在尝试确定是否有办法导出/导入集合和项目组或将它们复制到不同的集合和/或项目。我知道对于我们的测试设置，我可以复制完整的集合，但在我们的情况下，仅获取组会很有帮助。

# java - Toedter 的 JTable 列中的 JDateChooser

> ID：14339860
> 
> 赞同：0
> 
> 时间：2013-01-15T14:27:51.770
> 
> 标签：java, swing, jtable, jcalendar, jdatechooser

我会切入正题。我尝试在 JTable 的列中添加 Toedter 的 JDateChooser。我的应用程序使用 MVC 模式，这是来自我的观点：

```
scrollPanePermits = new JScrollPane();
        tableVehiclePermitHeader = new String[] {"Name", "Expiration Date"};
        tableVehiclePermitData = new Object [0][0];
        tableVehiclePermitDefaultTableModel = new DefaultTableModel(tableVehiclePermitData, tableVehiclePermitHeader);
        tableVehiclePermit = new JTable(tableVehiclePermitDefaultTableModel){
//          public Class getColumnClass(int c) {
//              return getValueAt(0, c).getClass();
//           }
            public Class getColumClass(int c){
                if(c == 0){
                    return String.class;
                } else if (c == 1){
                    return JDateChooser.class;
                }
                return null;
            }
            public boolean isCellEditable(int rowIndex, int colIndex){
                if (colIndex == 0){
                    return false;
                } else {
                    return true;
                }
            }
        }; 
```

老实说，我没有办法去做，所以任何帮助将不胜感激。

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T02:42:29.130

我从未尝试过，但您可以从[*Concepts: Editors and Renderers*](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)开始。这是一个相关的[示例](https://stackoverflow.com/a/10067560/230513)using`Double`和一个关于 using的[线程](http://www.coderanch.com/t/344242/GUI/java/JDateChooser-JTable)`JDateChooser`。

# html - CSS：不是属性

> ID：14339861
> 
> 赞同：49
> 
> 时间：2013-01-15T14:27:54.493
> 
> 标签：html, css, css-selectors

我有几个 HTML 表格。这些表没有 CSS 类。这两个表都有`width="100%"`属性。其他表没有该`width`属性。

仅使用 CSS 我需要设置没有`width=100%`. 像这样的东西：

```
table:not(width="100%"){
    width: myValue;
} 
```

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2013-01-15T14:30:23.800

属性选择器由 包围`[]`，因此您的选择器应如下所示：

```
table:not([width="100%"]) {
    width: myValue;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T14:30:40.460

在该表上使用一个类并将其放在 not

```
table:not(.foo) {

} 
```

你需要一个在 not 和 width = 100% is not one 中的选择器

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-15T14:31:16.047

如何为您想要不同宽度的表格使用内联样式？

```
<table style="width:95%">
    <tr>
        <td></td>
    </tr>
</table> 
```

或者一个单独的类：

```
<table class="customWidth">
    <tr>
        <td></td>
    </tr>
</table> 
```

CSS：

```
table { width:100%; }
table.customWidth { width:95%; } 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-01-15T14:30:45.650

只写在css文件夹中`table { width: 100% };`

# c# - 如何在 Winforms/WPF 中创建透明 ElementHost

> ID：14339875
> 
> 赞同：2
> 
> 时间：2013-01-15T14:28:20.973
> 
> 标签：c#, wpf, transparency, transparent, elementhost

长时间的潜伏者和自学 OOP 和 c# 非常感谢这里的伟大人物。我 99% 的问题似乎都是通过在网上搜索找到的，但我被这个问题困住了。

我的问题是我有一个自定义 GUI，我在其中堆叠托管 WPF 用户控件的 elementhost 控件元素。我已经成功地使这些图形出现并执行它们的行为，但它们彼此之间并不透明。我已经堆叠了彼此重叠的图标，它们具有半透明的边缘，它们应该融合在一起。这些图标是在paint.net 中制作的，并且确实具有正确的透明度图形。使用 host.BackColorTransparency = true，我能够使这些元素宿主对我的 winforms GUI 的背景透明，但它们彼此之间仍然不透明。

我试图在这里尽可能地进行描述。由于这是一个工作项目，我无法显示任何专有信息。如果有人需要更多信息，请告诉我。感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T14:47:34.250

[这篇](http://msdn.microsoft.com/en-us/library/system.windows.forms.integration.elementhost.backcolortransparent%28v=vs.100%29.aspx)MSDN 文章提到了一种称为“位图复制”的技巧。

实际上这意味着 ElementHost 将所有者控件的背景绘制到它自己的绘图表面上。这是一个简单的 1:1 关系。它没有考虑重叠控制。

# java - Java - 打印路线和成本

> ID：14339879
> 
> 赞同：3
> 
> 时间：2013-01-15T14:28:24.703
> 
> 标签：java, algorithm, search, a-star

我在 Java 中有一个 A* 搜索算法，我希望它能够打印旅行，以便用户可以看到它尝试了哪些路线以及哪些路线是最佳路线。此刻它只打印最佳路线，这很好，我希望它这样做，但我也希望它打印路线列表，以便您可以看到每条路线的最差和相关成本。从下面的代码中，如果我打印 followRoute 打印出每个旅行，但我可以打印每个旅行的费用吗？该算法通过查找每个完整的游览和其中最低的成本来工作，理想情况下我只想打印完整的游览而不是 {0}、{0、3} 等。

以下是我认为的相关代码段，如果您需要再看，请询问:)

* * *

```
Cities aux = currentCities;
ArrayList followedRoute = new ArrayList();
followedRoute.add(aux.number);
while (aux.level != 0) {
    aux = aux.parent;
    followedRoute.add(0, aux.number);
}

if (currentCities.level == distances.getCitiesCount()) {
    solution = true;
    bestRoute = followedRoute;
    bestCost = currentCities.g;
} else {
    for (int i=0; i<distances.getCitiesCount(); i++) {
        // have we visited this city in the current followed route?
        boolean visited = followedRoute.contains(i);
        boolean isSolution = (followedRoute.size() == distances.getCitiesCount())&&(i == firstNode);

        if (!visited || isSolution) {
            Cities childCities = new Cities(i, currentCities.g + distances.getCost(currentCities.number, i), 
                    getHeuristicValue(currentCities.level + 1), currentCities.level + 1);
            childCities.parent = currentCities;
            opened.add(childCities);  
            System.out.println(followedRoute);
        }
    }                
} 
```

* * *

非常感谢任何帮助！提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T15:38:52.480

好吧，您将很难修改 A* 来这样做，而且效率非常低¹。

事实上，没有已知的算法可以做你所追求的，它被称为[**最长路径问题**](http://en.wikipedia.org/wiki/Longest_path_problem)，它是[NP-Hard](http://en.wikipedia.org/wiki/NP-hard)，所以没有已知的多项式解决方案。

（直觉为什么它是正确的 - 考虑一种可以从顶点找到最长简单路径的`v`算法 - 给定这样的算法 - 可以轻松确定是否存在来自 的哈密顿路径`v`，重复该过程以检查是否存在任何哈密顿[路径](http://en.wikipedia.org/wiki/Hamiltonian_path)在图中。由于[哈密顿路径问题](http://en.wikipedia.org/wiki/Hamiltonian_path_problem)是 NP-Hard，所以这个问题也是如此。

找到最长路径的一种方法是使用蛮力（搜索所有可能的路径）。它可以通过对[DFS](http://en.wikipedia.org/wiki/Depth-first_search)的修改（忘记“访问”节点）来实现，并递归检查图中的所有路径 - 直到所有路径都用尽 - 并返回其中最长的路径。

很抱歉这个令人失望的消息，但我希望至少它不会让你把时间花在（很可能）无法（有效地）完成的事情上。

* * *

(1)[假设 P!=NP](http://en.wikipedia.org/wiki/P_versus_NP_problem)，这是大多数 CS 研究人员的共同信念。

# android - webview透明背景§？

> ID：14339883
> 
> 赞同：1
> 
> 时间：2013-01-15T14:28:45.353
> 
> 标签：android

有人能告诉我为什么在我的三星 S3`(v 4.1.1)`上 webview 有透明背景，而在 xperia U 上`(v 4.0.1)`它有黑色背景吗？

我在 java 代码`'webView.setBackgroundColor(0x00FFFFFF)'`和 html 中使用 `'<body style="background: transparent">'`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T09:34:13.100

我有同样的问题。无论我做什么，在 Xperia 上使用 Android 4.0.4 的所有 webview 都有不透明的背景。

解决方案是在所有包含有 bug 的 webviews 的活动中禁用硬件加速。

尝试将此添加到 AndroidManifest.xml 中的活动节点

```
android:hardwareAccelerated="false" 
```

它对我有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T15:02:33.953

请使用这个，它对我有用

```
<WebView
            android:id="@+id/webview1"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:fitsSystemWindows="true"
            android:background="@android:color/transparent"
            android:scrollbarStyle="insideOverlay"
            android:scrollbars="none" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-13T18:10:49.540

也试试 webView.setBackgroundColor(0x00000000);

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T14:33:17.227

这基本上是由于不同供应商用来设置视图样式并更改其外观和感觉的活动主题。在这种情况下，您可以扩展 webview 并覆盖 setBackgroungColor(int color) 方法并删除您的活动主题。您将始终看到差异列表视图、进度条复选框等视图在不同的供应商设备上看起来不同。

# .net - 从 .net 项目定义 AppFabric 缓存客户端程序集引用的正确方法？

> ID：14339884
> 
> 赞同：1
> 
> 时间：2013-01-15T14:28:46.783
> 
> 标签：.net, visual-studio-2010, appfabric, appfabric-cache

所需的 AppFabric 缓存客户端代码引用了作为客户端安装一部分的这两个程序集：

```
Microsoft.ApplicationServer.Caching.Client.dll
Microsoft.ApplicationServer.Caching.Core.dll 
```

在 Visual Studio 2010 中定义这些引用将导致程序集在构建时被复制到项目 bin 文件夹中，然后与我们的二进制文件一起重新分发。但是，AppFabric 缓存 EULA 没有明确提及再分发权利，因此这些文件在法律上是不可再分发的。我不确定这是否有意，但是我们的客户最好在安装时为自己获取和安装 AppFabric 缓存，而不是使用可能已过时和/或与 AppFabric 缓存不兼容的重新分发的程序集集群（例如，如果它使用不同的版本）。

但是，AppFabric 缓存安装程序不会将打包的程序集放入 GAC，因此客户端/客户需要这样做以允许我们的代码能够引用它们 - 程序集无法在适当位置引用（在 \Program Files\ AppFabric 1.1 for Windows Server），除非我们明确引用并从特定路径加载程序集，这是不寻常的。

那么我的问题是 - 引用这些程序集的预期使用模式是什么？它们实际上应该是可再分发的，还是我们的客户应该将它们放在 GAC 中，还是有其他选择？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T08:42:08.943

就个人而言，我使用 Nuget 来引用 AppFabric 缓存客户端库（[在此处打​​包](http://nuget.org/packages/ServerAppFabric.Client)）。这些程序集只是访问缓存集群的 API。您无需在客户端计算机上进行任何特定安装即可使用它们。

这些程序集是您的应用程序的一部分。添加对另一个程序集（如 Automapper、Json.Net 等）的引用时完全相同，它可以帮助您构建应用程序而无需重新发明轮子。因此，将它们包含在您的构建/设置中，将更容易部署。

# android - Android onActivityResult 数据参数使用相机返回 null

> ID：14339890
> 
> 赞同：4
> 
> 时间：2013-01-15T14:29:04.693
> 
> 标签：android, android-camera, android-camera-intent

我想请教一些有关使用相机应用程序的帮助。首先，我阅读了所有[Android Developer API 指南](http://developer.android.com/guide/topics/media/camera.html#intent-receive)

在我尝试创建我的第一个使用相机的应用程序之后。我复制了所有源代码，但不幸的是我遇到了一个问题：当用户使用相机完成时，onActivityResult 数据参数为 NULL :(

我在这里尽可能多地阅读问题和答案，但我找不到我的灵魂 :( 我的代码是下一个：

**显现**

```
<uses-permission android:name="android.permission.CAMERA" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />

<uses-feature android:name="android.hardware.camera" android:required="false" />
<uses-feature android:name="android.hardware.camera.autofocus" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="hu.abanhidy.android.cameramanager.CameraManagerActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

**主.xml：**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".CameraManagerActivity" >

<ImageView
    android:id="@+id/image"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" />

<Button
    android:id="@+id/btnTakePhoto"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerInParent="true"
    android:text="Make Photo" /> 
```

**主要活动：**

```
public class CameraManagerActivity extends Activity {

private static final int CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE = 100;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Button takePhoto = (Button)findViewById(R.id.btnTakePhoto);
    takePhoto.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View arg0) {
            Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
            startActivityForResult(intent, CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE);
        }
    });
}

protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    Toast.makeText(this, "result code: " + resultCode, Toast.LENGTH_LONG).show();

    if (data != null){
        if (requestCode == CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE) {
            if (resultCode == RESULT_OK) {
                // Image captured and saved to fileUri specified in the Intent
                Toast.makeText(this, "Image saved to:\n" + data.getData(), Toast.LENGTH_LONG).show();
            } else if (resultCode == RESULT_CANCELED) {
                // User cancelled the image capture
                Toast.makeText(this, "User cancelled the image capture", Toast.LENGTH_LONG).show();
            } else {
                // Image capture failed, advise user
                Toast.makeText(this, "Image capture failed, advise user", Toast.LENGTH_LONG).show();
            }
        }
    } else {
        Toast.makeText(this, "Data is null!", Toast.LENGTH_LONG).show();
    }
}} 
```

我尝试设置额外的参数，例如：

```
 takePhoto.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View arg0) {
            String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss").format(new Date());
            File mediaStorageDir = new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES), "MyCameraApp");
            fileUri = Uri.fromFile(new File(mediaStorageDir.getPath() + File.separator + "IMG_"+ timeStamp + ".jpg"));

            Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
            intent.putExtra(MediaStore.EXTRA_OUTPUT, fileUri);

            startActivityForResult(intent, CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE);
        }
    }); 
```

...但我一直得到 onActivityresult 的数据参数为空。

有人可以帮忙解决问题吗？

非常感谢，再次抱歉这个问题！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T14:50:27.300

检查您是否获得了 Activity.RESULT_OK 作为结果代码。如果不是，您要么取消了拍照操作，要么出现了其他问题。即，添加这个：

```
Toast.makeText(this, "result code was ok: " + (resultCode == Activity.RESULT_OK), Toast.LENGTH_LONG).show(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T09:59:52.857

行！我想我理解这个过程。如果您设置 extraOutput Uri，则 onActivityResult 数据参数为空......因为您不需要图像所在的示例 Uri 信息！你已经设置好了。如果您不设置此信息，您必须知道图像在哪里。

所以......我理解这个过程，但我真的不同意它！

# windows - 如何增加 EventProvider 有效负载大小？

> ID：14339893
> 
> 赞同：2
> 
> 时间：2013-01-15T14:29:20.583
> 
> 标签：windows, appfabric, etw

是否可以增加 Appfabric 中用户定义事件的有效负载大小？为了实现自定义事件，我使用`EventProvider`了命名空间中定义的类（[此处](http://msdn.microsoft.com/en-us/library/ee667248.aspx)`System.Diagnostics.Eventing`为示例）。

我们可以在[msdn](http://msdn.microsoft.com/en-us/library/bb382834.aspx)上找到，

*事件的最大数据大小限制为 64 KB 减去事件标头的大小。如果会话的缓冲区大小较小并且会话包含事件的扩展数据项，则事件大小较小。*

仅供参考，我的一些自定义事件占用超过 64KB，因为它们包含输入和/或输出的序列化副本。当有效负载大小大于 64KB 时，不会写入消息。

# javascript - 自动登录 facebook - FB.Event.subscribe auth.login 不起作用

> ID：14339899
> 
> 赞同：1
> 
> 时间：2013-01-15T14:29:34.810
> 
> 标签：javascript, facebook, api, facebook-javascript-sdk

由于某种原因，今天我为现有成员自动登录的代码坏了。通常这段代码工作得很好，在检查了萤火虫后，我发现由于某种原因找不到“auth.login”，因此调用了 window.location.reload(); 不工作。（如果我手动刷新然后成员显示为正确连接，问题只是在会话打开之前自动登录需要刷新页面）我还尝试查看问题是否只是“auto.login”并将其替换为'auth.authResponseChange' 当我这样做时，页面不断刷新......所以我认为问题出在'auth.login' 触发器上。有没有人知道出于特殊原因或 Facebook 所做的任何更改可能导致此问题？

****更新**** BUG 已解决！这个问题已经被脸书解决了。

此错误已报告并由 facebook 在这里回答-

[https://developers.facebook.com/bugs/524245490930206?browse=search_50f87d9e8869a5e06191882#](https://developers.facebook.com/bugs/524245490930206?browse=search_50f87d9e8869a5e06191882#)

顺便说一句，这是一个再次工作的代码：

```
<div id="fb-root"></div>
    <script>
      window.fbAsyncInit = function() {
        FB.init({
              appId  : '<?php =$APP_ID ?>',
              status : true, // check login status
              cookie : true, // enable cookies to allow the server to access the session
              xfbml  : true,  // parse XFBML
              oauth  : true
        });

      // Additional initialization code here
        FB.Event.subscribe('auth.login', function(response) {
          window.location.reload();
        });
      };
      // Load the SDK Asynchronously
      (function(d){
         var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
         if (d.getElementById(id)) {return;}
         js = d.createElement('script'); js.id = id; js.async = true;
         js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
         ref.parentNode.insertBefore(js, ref);
       }(document));
    </script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T17:53:09.327

我从 auth.login 更改为 auth.statusChange，并将所有内容都包装在 getLoginStatus 中，因此它仅在未连接时运行，似乎工作正常。看起来像这样（在 window.fbAsyncInit = function() { 内）

```
 FB.getLoginStatus(function(response) {
    if (response.status != 'connected') {
      FB.Event.subscribe('auth.statusChange', function(response) {
        if (response.authResponse) {
          // whatever code runs when user logs in
        }
      });
    }
  }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T14:21:42.890

看来我遇到了同样的问题..

直到几个小时前，当一个用户（之前已经授权并登录到我的应用程序）打开我的网站并且 cookie 已过期时，登录按钮出现但在几秒钟后（JS SDK 触发的时间）登录功能），他自动登录，页面重新加载，没有登录按钮和用户信息。

现在，当一个已经注册的用户在 cookie 过期后打开我的网站时，登录按钮会再次出现，但用户不会自动登录，并且页面不会像以前那样重新加载。奇怪的是，如果我点击登录按钮，它也不起作用！如果我现在手动刷新页面，登录按钮会消失并显示用户信息，所以看起来用户实际上已登录，但未捕获事件以触发页面重新加载。

如果我手动注销并再次登录（因此使用 php sdk）一切正常。

我的代码：

```
<script>
        window.fbAsyncInit = function() {
            FB.init({
                appId: '<?php echo $facebook->getAppID() ?>',
                cookie: true,
                xfbml: true,
                oauth: true
            });
            FB.Event.subscribe('auth.login', function(response) {
                window.location.reload();
            });
            FB.Event.subscribe('auth.logout', function(response) {
                window.location.reload();
                });
        };
        (function() {
            var e = document.createElement('script'); e.async = true;
            e.src = document.location.protocol +
                '//connect.facebook.net/en_US/all.js';
                document.getElementById('fb-root').appendChild(e);
        }());
        function facebookLogin() {
            FB.login(function(response) {
                // handle the response
            }, {scope: 'email, publish_stream, read_friendlists'});
        }
    </script> 
```

**更新**我将这几行添加到我的 js 代码中：

```
FB.Event.subscribe('auth.statusChange', function(response) {
                alert('The status of the session is: ' + response.status);
            }); 
```

所以现在当用户在令牌过期后打开我的页面时：

*   php sdk 检测到他没有登录并显示登录对话框（像以前一样）
*   javascript sdk 触发登录功能（像以前一样）
*   用户定期登录（像以前一样）（我现在可以肯定地知道它，因为它会弹出警报：会话的状态是：已连接）
*   但是 .. 未触发事件 auth.login -> 脚本不知道成功登录 -> 页面未重新加载

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T19:09:48.663

我遇到了完全相同的问题。如果用户连接了我的应用程序并且他们的访问令牌已过期，javascript SDK 会使用户自动登录并重新加载页面。

我通过切换到 auth.statusChange 而不是 auth.login 解决了这个问题。然后我检查 PHP Facebook SDK 用户是否登录，如果他登录了，我不订阅 javascript 中的 auth.statusChange 事件。（如果您在用户登录时在 javascript 中包含 auth.statusChange，您最终会陷入无限的页面刷新循环，至少我的实现是这样）。

# mysql - mysql 检查组中是否存在值

> ID：14339905
> 
> 赞同：6
> 
> 时间：2013-01-15T14:29:47.163
> 
> 标签：mysql, sql, group-by, aggregate

我有一个名为、和`votes`列的表。`id``image_id``user_id``time`

我如何在结果中添加一个布尔值，如果一个特定`user_id`是每个人的投票之一`image_id`？

```
SELECT image_id,
count(image_id) as vote_count
FROM votes
GROUP BY image_id 
ORDER BY vote_count DESC 
```

我已经尝试过`if(user_id = 18, 1, 0) as have_voted`，但它不适用于每个`image_id`.

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-15T14:33:26.000

将你想要的所有行相加`user_id`，并检查这个总和是否大于 0 怎么样？

```
SELECT image_id,
count(image_id) as vote_count,
SUM(IF(user_id = 18,1,0)) > 0 AS hasUser18
FROM votes
GROUP BY image_id 
ORDER BY vote_count DESC 
```

# javascript - Bxslider 边框问题

> ID：14339906
> 
> 赞同：4
> 
> 时间：2013-01-15T14:29:49.037
> 
> 标签：javascript, jquery, css, jquery-plugins, bxslider

尝试正确对齐 bxslider 边框，使其适合我的图像。

我已经尝试了许多不同的图像，bxslider 在不同的设置。

如果我删除选项“Mode:'Fade”和“Captions:“True”，Bxslider 实际上会适合图像，虽然我可以在没有字幕的情况下生活，但我确实希望有淡入淡出过渡。

你可以在这里看到我的意思[http://www.dennysplace.co.uk/](http://www.dennysplace.co.uk/)

这也是一个工作 jsfiddle [http://jsfiddle.net/FLuRH/](http://jsfiddle.net/FLuRH/)

代码如下

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script src="js/jquery.bxslider.min.js"></script>
<link href="js/lib/jquery.bxslider.css" rel="stylesheet" />

<ul class="bxslider">
  <li><img src="images/barbers1.jpg" title="Dennys Place Gentlemens Barbers"></li>
  <li><img src="images/display.jpg" title="Tunbridge Wells"></li>
  <li><img src="images/photos11.jpg" title="The famous heads of Dennys Place"></li>
 </ul>

<script type="text/javascript">
 $(document).ready(function(){
$('.bxslider').bxSlider({
    mode: 'fade',
    captions:true,
    auto: true

});
 });
</script> 
```

和这里的 CSS

```
.bx-wrapper {
position: relative;
margin: 0 0 60px;
padding: 0;
*zoom: 1;
}

.bx-wrapper img {
width: 100%;
display: block;
}

/** THEME
===================================*/

.bx-wrapper .bx-viewport {
-moz-box-shadow: 0 0 5px #ccc;
-webkit-box-shadow: 0 0 5px #ccc;
box-shadow: 0 0 5px #ccc;
border: solid #fff 5px;
left: -5px;
background: #fff;
}

.bx-wrapper .bx-pager,
.bx-wrapper .bx-controls-auto {
position: absolute;
bottom: -30px;
width: 100%;
}

/* LOADER */

.bx-wrapper .bx-loading {
min-height: 50px;
background: url(images/bx_loader.gif) center center no-repeat #fff;
height: 100%;
width: 100%;
position: absolute;
top: 0;
left: 0;
z-index: 2000;
}

/* PAGER */

.bx-wrapper .bx-pager {
text-align: center;
font-size: .85em;
font-family: Arial;
font-weight: bold;
color: #666;
padding-top: 20px;
}

.bx-wrapper .bx-pager .bx-pager-item,
.bx-wrapper .bx-controls-auto .bx-controls-auto-item {
display: inline-block;
*zoom: 1;
*display: inline;
}

.bx-wrapper .bx-pager.bx-default-pager a {
background: #666;
text-indent: -9999px;
display: block;
width: 10px;
height: 10px;
margin: 0 5px;
outline: 0;
-moz-border-radius: 5px;
-webkit-border-radius: 5px;
border-radius: 5px;
}

.bx-wrapper .bx-pager.bx-default-pager a:hover,
.bx-wrapper .bx-pager.bx-default-pager a.active {
background: #000;
}

/* DIRECTION CONTROLS (NEXT / PREV) */

.bx-wrapper .bx-prev {
left: 10px;
background: url(images/controls.png) no-repeat 0 -32px;
}

.bx-wrapper .bx-next {
right: 10px;
background: url(images/controls.png) no-repeat -43px -32px;
}

.bx-wrapper .bx-prev:hover {
background-position: 0 0;
}

.bx-wrapper .bx-next:hover {
background-position: -43px 0;
}

.bx-wrapper .bx-controls-direction a {
position: absolute;
top: 50%;
margin-top: -16px;
outline: 0;
width: 32px;
height: 32px;
text-indent: -9999px;
z-index: 9999;
}

.bx-wrapper .bx-controls-direction a.disabled {
display: none;
}

/* AUTO CONTROLS (START / STOP) */

.bx-wrapper .bx-controls-auto {
text-align: center;
}

.bx-wrapper .bx-controls-auto .bx-start {
display: block;
text-indent: -9999px;
width: 10px;
height: 11px;
outline: 0;
background: url(images/controls.png) -86px -11px no-repeat;
margin: 0 3px;
}

.bx-wrapper .bx-controls-auto .bx-start:hover,
.bx-wrapper .bx-controls-auto .bx-start.active {
background-position: -86px 0;
}

.bx-wrapper .bx-controls-auto .bx-stop {
display: block;
text-indent: -9999px;
width: 9px;
height: 11px;
outline: 0;
background: url(images/controls.png) -86px -44px no-repeat;
margin: 0 3px;
}

.bx-wrapper .bx-controls-auto .bx-stop:hover,
.bx-wrapper .bx-controls-auto .bx-stop.active {
background-position: -86px -33px;
}

/* PAGER WITH AUTO-CONTROLS HYBRID LAYOUT */

.bx-wrapper .bx-controls.bx-has-controls-auto.bx-has-pager .bx-pager {
text-align: left;
width: 80%;
}

.bx-wrapper .bx-controls.bx-has-controls-auto.bx-has-pager .bx-controls-auto {
right: 0;
width: 35px;
}

/* IMAGE CAPTIONS */

.bx-wrapper .bx-caption {
position: absolute;
bottom: 0;
left: 0;
background: #666\9;
background: rgba(80, 80, 80, 0.75);
width: 100%;
}

.bx-wrapper .bx-caption span {
color: #fff;
font-family: Arial;
display: block;
font-size: .85em;
padding: 10px;
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-15T15:59:19.203

将此添加到您的 css 中应该这样做：

```
ul.bxslider {
  margin: 0;
  padding: 0;
} 
```

# jquery - 为什么我的 jQuery 脚本不适用于 Internet Explorer 7

> ID：14339907
> 
> 赞同：0
> 
> 时间：2013-01-15T14:29:50.943
> 
> 标签：jquery

因为我在 IE7 中遇到了错误 - 我应该仔细查看 JS 文件 - 之前写的......（由其他人）。

在这一点上我不确定任何事情，所以我想问你 - 从我的角度来看这是错误的（我认为间距可能会导致问题） - 但它在整个网站上都完成了：

```
(function ($) {
    $(document).ready( function() {
          //the code
    });
})(jQuery); 
```

哦，是的，IE8中的错误：

> HTML Parsing Error: Unable to modify the parent container element before child element is close (KB927917) - 这让我觉得 JS 出错了。

我知道这是一个愚蠢的问题，但感谢您的回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T14:33:06.747

我一直都看到这样的。这将等到文档加载完毕后再运行任何脚本。

```
$(function() {
  //the code
}); 
```

如果您需要使用另一个会导致与 jQuery 使用的 $ 冲突的库，请使用此

```
jQuery.noConflict(); 
```

[在此处查看 $.noConflict() 文档。](http://api.jquery.com/jQuery.noConflict/)

# ios - NSPredicate 按字母过滤

> ID：14339925
> 
> 赞同：3
> 
> 时间：2013-01-15T14:30:28.847
> 
> 标签：ios, objective-c

你如何创建一个 NSPredicate 来查找数组中包含特定字母的所有对象？

```
NSMutableArray *testArray = [[NSMutableArray alloc] initWithObjects:@"abc",@"cba", @"bca", nil];

NSPredicate *p = [NSPredicate predicateWithFormat:@"SELF contains[cd] %@",@"abc"];

NSMutableArray *result = (NSMutableArray *)[testArray filteredArrayUsingPredicate: p]; 
```

结果只包含一个对象，@“abc”......我希望它能够捕获所有包含“abc”的单词。（例如“cba”、“cba”、“lllllllllbbacllllll”等）..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T14:46:10.877

我不知道是否可以使用单个谓词，但您可以使用以下方法构建复合谓词`NSCompoundPredicate`：

```
NSMutableArray *testArray = [[NSMutableArray alloc] initWithObjects:@"abc",@"cba", @"bca", nil];

NSMutableArray *predicates = [NSMutableArray array];
for (NSString *substring in @[@"a", @"b", @"c"]) {
    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"SELF contains[cd] %@", substring];
    [predicates addObject:predicate];
}
NSPredicate *compoundPredicate = [NSCompoundPredicate andPredicateWithSubpredicates:predicates];

NSArray *result = [testArray filteredArrayUsingPredicate:compoundPredicate]; 
```

另请参阅 Nicolas 对 的评论`filteredArrayUsingPredicate`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T15:32:54.637

其他答案没有任何问题。但是，我想建议一种不同的方法来创建谓词：使用块。

```
NSArray *testArray = @[@"abc", @"cba", @"cda"];
NSArray *letters = @[@"a", @"b", @"c"];

NSPredicate *p = [NSPredicate predicateWithBlock:^BOOL(id string, NSDictionary *bindings) {
    for ( NSString *letter in letters ) {
        NSStringCompareOptions options = NSCaseInsensitiveSearch | NSDiacriticInsensitiveSearch;
        if ( ! [string rangeOfString:letter options:options].length ) {
            return NO;
        }
    }
    return YES;
}];
NSArray *result = [testArray filteredArrayUsingPredicate:p]; 
```

只是为了好玩，您还可以使用子查询编写谓词。这效率较低，但它是较短的解决方案。

```
NSArray *testArray = @[@"abc", @"cba", @"bcda"];
NSArray *letters = @[@"a", @"b", @"c"];

NSPredicate *p = [NSPredicate predicateWithFormat:@"SUBQUERY(%@, $a, self CONTAINS[cd] $a)[SIZE] == %d", letters, letters.count];
NSArray *result = [testArray filteredArrayUsingPredicate:p]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T14:49:05.773

单独测试角色，试一试：

```
NSMutableArray *testArray = [[NSMutableArray alloc] initWithObjects:@"abc",@"cba", @"bca", nil];
NSPredicate *p = [NSPredicate predicateWithFormat:@"self contains 'a' && self contains 'b' && self contains 'c'"];
NSMutableArray *result = [[testArray filteredArrayUsingPredicate: p] mutableCopy]; 
```

# c# - 继承时缺少方法异常

> ID：14339926
> 
> 赞同：3
> 
> 时间：2013-01-15T14:30:29.603
> 
> 标签：c#, datatable

我有以下从 DataTable 继承的类：

```
public class ExcelStaticDataTable : DataTable
{
    public List<ExcelStaticDataTable> SubTables { get; set; }
    public ExcelStaticDataTable(string tableName): base(tableName)
    {
        SubTables = new List<ExcelStaticDataTable>();
    }
} 
```

当我执行以下操作时，您知道为什么我得到`MissingMethodException`“为该对象定义的无参数构造函数”：

```
ExcelStaticDataTable table=new ExcelStaticDataTable("table1");
table.Clone(); 
```

这两段代码都在不同的dll中，只是为了澄清。这里是堆栈跟踪：

```
at System.RuntimeTypeHandle.CreateInstance(RuntimeType type, Boolean publicOnly, Boolean noCheck, Boolean& canBeCached, RuntimeMethodHandleInternal& ctor, Boolean& bNeedSecurityCheck)
   at System.RuntimeType.CreateInstanceSlow(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache, StackCrawlMark& stackMark)
   at System.RuntimeType.CreateInstanceDefaultCtor(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache, StackCrawlMark& stackMark)
   at System.Activator.CreateInstance(Type type, Boolean nonPublic)
   at System.Data.DataTable.CreateInstance()
   at System.Data.DataTable.Clone(DataSet cloneDS)
   at System.Data.DataTable.Clone()
   at System.Data.DataTable.Copy()
   at ..........cs:line 35 
```

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T14:37:40.810

我怀疑其他代码正在`object newObj = Activator.CreateInstance(GetType());`用作`Clone()`. 这需要在默认用法中使用公共无参数构造函数。否则它会抛出一个`MissingMethodException`.

更新：您显示堆栈跟踪的更新证实了这一点。

我怀疑您可以通过覆盖该`CreateInstance`方法来解决此问题：

```
protected override DataTable CreateInstance()
{
    return new ExcelStaticDataTable(TableName);
} 
```

# html - CSS 菜单在 iOS 上的 Safari 中不同，在 Firefox 和 IE 中可以

> ID：14339945
> 
> 赞同：0
> 
> 时间：2013-01-15T14:31:32.013
> 
> 标签：html, css

我创建了一个新的自定义 Wordpress 主题。去掉 Wordpress 拖放菜单的东西，我有这个 html：

```
<div id="navbar">
 <div id="navholder">
  <div id="navbarleft">
  <ul class="sf-menu">
  <li><a href="http://mydomain.com">Home</a></li>
  <li><a href="http://mydomain.com/privacy/">Privacy</a></li>
  </ul>
  </div>
 </div>
</div> 
```

这个CSS：

```
#navholder {
    float:              left;
    width:              100%;
    font-weight: bold;
}
#navbar {
    width: 960px;
    height: 33px; 
    font-size: 18px;
    color: #eee;
    margin: 0px auto;
    padding: 0px;
    }
#navbarleft {
    width: 950px;
    float: left;
    margin: 0px;
    padding: 0px;
    }
.sf-menu, .sf-menu * {
    margin:         0;
    padding:        0;
    font-size:13px;
    list-style:     none;
}
.sf-menu {

    float:left;
        width:100%;
}
.sf-menu ul {
    position:absolute;
    top:-999em;
    width:15em; 
}
.sf-menu ul li, .topsf-menu ul li {
    width:100%;
}
.sf-menu li:hover, .topsf-menu li:hover {
    visibility:inherit; /* fixes IE7 'sticky bug' */
}
.sf-menu li {
    float:left;
    position:relative;
    background:transparent;
}
.sf-menu a {
    display:block;
    position:relative;
    color: #CCC !important;
    padding:9px 15px;
    text-decoration:none;
    text-transform:uppercase; 
}
.sf-menu li:hover ul, .sf-menu li.sfHover ul {
    left:           0;
    top:            2.5em; 
    z-index:        99;
}
ul.sf-menu li:hover li ul, ul.sf-menu li.sfHover li ul, ul.topsf-menu li:hover li ul, ul.topsf-menu li.sfHover li ul {
    top:            -999em;
}
ul.sf-menu li li:hover ul, ul.sf-menu li li.sfHover ul, ul.topsf-menu li li:hover ul, ul.topsf-menu li li.sfHover ul {
    left:           15em; /* match ul width */
    top:            0;
}
ul.sf-menu li li:hover li ul, ul.sf-menu li li.sfHover li ul, ul.topsf-menu li li:hover li ul, ul.topsf-menu li li.sfHover li ul {
    top:            -999em;
}
ul.sf-menu li li li:hover ul, ul.sf-menu li li li.sfHover ul, ul.topsf-menu li li li:hover ul, ul.topsf-menu li li li.sfHover ul {
    left:           15em; /* match ul width */
    top:            0;
}
.sf-menu ul li a {
    color:              #eee;
    padding:            5px 15px;
    text-decoration:    none;
    border:             1px solid #777;
}
.sf-menu li li {
    background:         #162934;
}
.sf-menu li li li {
    background:         #999;
}
.sf-menu li:hover, .sf-menu li.sfHover, .sf-menu a:focus, .sf-menu a:hover, .sf-menu a:active {
    background:         #162934;
    outline:            0;
} 
```

菜单在 Firefox 和 IE 中显示正常，但 Safari 将菜单的文本放置得太低。

注意：这仅适用于 iOS 上的 Safari。

任何想法为什么会发生这种情况？

[JSFiddle 演示](http://jsfiddle.net/nbM3A/)

更新：请注意，小提琴演示在 iOS Safari 上看起来很好，但问题发生在这个现场网站上，这里有类似的模板： [http ://www.badassgamereview.com](http://www.badassgamereview.com)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T14:39:14.740

我没有看到任何问题，除了在 Safar PRIVACY 中看起来有点像 PRIV ACY 有一点空间，但这可能是因为浏览器导致每个浏览器读取字体不同。你可以添加`line-height: 18px`，但我真的不确定你的问题是什么

# android - 2013 年 1 月 - Admob 和 AdWhirl？

> ID：14339947
> 
> 赞同：2
> 
> 时间：2013-01-15T14:31:47.023
> 
> 标签：android, admob, ads, adwhirl

我已经阅读了很多问题，但它们都已经过时了，我知道在 admob 使用它的广告或其他东西停止 adwhirl 的地方发生了一些事情。

我想知道是否可以让我的新 android 应用同时包含 adwhirl 和 admob？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T07:22:01.697

Adwhirl 已被 Admob 中介取代。

Admob 中介使用简单。事实上，它非常简单，您只需将 AdView 构造函数中的 Admob Id 替换为 Admob 中介 Id。

Admob 中介使您可以访问 AdWhirl 所做的所有网络。

# r - 大数字的错误相关结果

> ID：14339952
> 
> 赞同：2
> 
> 时间：2013-01-15T14:31:57.053
> 
> 标签：r, correlation, bignum, pearson

如果向量中有非常大的数字，则该`cor()`函数无法计算相关值并仅返回零：

```
foo <- c(1e154, 1, 0)
bar <- c(0, 1, 2)
cor(foo, bar)
# -0.8660254
foo <- c(1e155, 1, 0)
cor(foo, bar)
# 0 
```

虽然`1e155`很大，但比 R 可以处理的最大数量要小得多。令我惊讶的是，为什么 R 返回错误的值并且没有返回更合适的结果，例如`NA`or `Inf`。

有什么理由吗？如何确保我们的程序不会遇到这样的情况？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-15T14:39:01.437

两个变量之间的皮尔逊相关系数定义为两个变量的协方差除以其标准差的乘积。（来自[http://en.wikipedia.org/wiki/Pearson_product-moment_correlation_coefficient](http://en.wikipedia.org/wiki/Pearson_product-moment_correlation_coefficient)）

```
foo <- c(1e154, 1, 0)
sd(foo)
## [1] 5.773503e+153
foo <- c(1e155, 1, 0)
sd(foo)
## [1] Inf 
```

而且，更重要的是，要计算，`sd()`您需要取 x 的平方：

```
1e154^2
[1] 1e+308

1e155^2
[1] Inf 
```

因此，您的数字确实处于使用 64 位可以计算的边界。

在 Windows 上使用 R-2.15.2 我得到：

```
cor(c(1e555, 1, 0), 1:3)
[1] NaN 
```

# android - 使用 Robotium .getString() 方法从 R.string 错误返回

> ID：14339957
> 
> 赞同：1
> 
> 时间：2013-01-15T14:32:08.533
> 
> 标签：android, robotium

我尝试使用 Robotium 从 R.string 获取 Android 设置

```
String loginButton = solo.getString(test_project_package.R.string.login_button); 
```

string.xml 文件包含（位于测试项目中）：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="login_button">Sign In to App.</string>
</resources> 
```

问题在于返回值。而不是**“登录应用程序”。**, Java 返回**"res/layout/bottom.xml"**。它似乎是应用程序源代码的路径。即在同一个工作区中）。

我试着不使用独奏：

```
Resources resources = getInstrumentation().getTargetContext().getResources();
String loginButton = res.getString(test_project_package.R.string.login_button); 
```

同样的问题。

怎么了？为什么 Java 返回不正确的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T06:55:51.133

部分解决了这个问题:)

在测试项目中添加以下导入：

```
import project_package.R; 
```

之后可以使用源代码中的设置。Java 返回正确的参数。

```
solo.clickOnButton(solo.getString(R.string.add_account_button)); 
```

**但！**如果你想从测试项目中获取参数并像这样设置导入：

```
import project_package.test.R; 
```

或者只是没有 import Java 将返回错误的参数。不知道为什么

我在[使用 Android 测试框架、Robotium、Monkey 和 Robolectric 的文章 Android 测试中找到了这个技巧](http://www.vogella.com/articles/AndroidTesting/article.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-22T11:23:35.827

我认为`solo.getString()`不是从 String.xml 获取字符串，而是获取与当前活动中的视图关联的字符串。

要从 String.xml 获取字符串，请使用以下命令：

```
solo.getContext().getString( resId ); 
```

在你的情况下 -

```
solo.getContext().getString( R.string.login_button ); 
```

应该可以正常工作。

# php - 页面源何时可以有内容但不显示在网页上？

> ID：14339958
> 
> 赞同：1
> 
> 时间：2013-01-15T14:32:17.443
> 
> 标签：php, browser, view-source

我正在开发一个 fb 网络应用程序。我遇到了一种情况，即网页的视图源显示内容但未显示在实际页面上。但是当我刷新它显示的页面时。谁能解释它为什么会发生？

在进入该页面之前，我使用了可能的重定向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T14:40:54.590

禁用所有重定向，看看发生了什么。如果您使用 cookie 来定义页面重定向的方式，请记住，您无法在同一页面中创建 cookie 后立即读取它们。

# wpf - 如何在多绑定字符串块中添加条件？(WPF)

> ID：14339960
> 
> 赞同：3
> 
> 时间：2013-01-15T14:32:20.763
> 
> 标签：wpf, string, xaml, multibinding, string-formatting

我正在尝试格式化我的应用程序的标题，但似乎一些基本的 WPF 细节让我无法理解。这是我的代码：

```
<Window.Title>
   <MultiBinding StringFormat="{}{0} - {1}">
      <Binding Path="Shell.Workbench.Title" />
      <Binding Path="Shell.Workbench.CurrentFileName" />
   </MultiBinding>
</Window.Title> 
```

问题是我的第二个字段有时可能是空字符串。如果是这种情况，我该如何隐藏它们之间的破折号？

示例：如果两个字符串都存在，我有这样的标题 *"Title - CurrentFileName"*。如果第二个字符串为空，我有 *"Title -"* 并且我只想有 **"Title"**。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T14:36:29.863

嗯，好吧，这只是一个替代方案，因为您正在寻求解决方案，`MultiBinding`但我会在 中创建一个附加属性（用于连接字符串）`ViewModel`，它的行为方式是这样，并将其绑定到视图。

其他所有方法`ValueConverters`都不值得付出努力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T14:39:35.063

*这是一个答案，我已经编辑了我的命令
，您可以使用转换器[http://msdn.microsoft.com/en-us/library/system.windows.data.multibinding.converter.aspx](http://msdn.microsoft.com/en-us/library/system.windows.data.multibinding.converter.aspx) 并在其中进行文本操作

# java - 从内部类调用paint方法

> ID：14339964
> 
> 赞同：1
> 
> 时间：2013-01-15T14:32:36.857
> 
> 标签：java, swing, jpanel, paintcomponent, event-dispatching

我有一个示例代码，它只是用一个矩形和几个按钮构建一个 JFrame。我完成了矩形的构建，现在我要放置两个按钮，一个开始 - 顶部，一个停止 - 底部。

我有一切工作，至少它的科学。但是，当我尝试设置开始按钮来运行代码时，什么也没有发生。我试图通过创建一个JFrame来查看是否有错误并且代码是成功的。JFrame 应该使用启动按钮打开，`paintComponent()`而停止则终止整个事情。

有没有人可以提供一些指导，我已经好几天没睡了，试图弄清楚这一点。

```
 public static void main (String[] args){
        TwoButtonsRandomRec two = new TwoButtonsRandomRec();
        two.go();
    }

    public void go(){

        JPanel pan = new JPanel(new GridBagLayout());

        START = new JButton("START");
        START.addActionListener(new StartListener());
        STOP = new JButton("STOP");
        STOP.addActionListener(new StopListener());

        pan.add(START);
        pan.add(STOP);

        frame = new JFrame();
        frame.getContentPane().add(BorderLayout.NORTH, START);
        frame.getContentPane().add(BorderLayout.SOUTH, STOP);
        frame.setSize(500,500);       
        frame.setVisible(true);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }

    public void GUI(){
        JFrame frame2 = new JFrame();
        frame2.setSize(500,500);       
        frame2.setVisible(true);
    }
    class StartListener implements ActionListener{
        public void actionPerformed(ActionEvent e){
                //frame.getContentPane().add(new DrawPanel());
                //System.exit(0);
                //
            DrawPanel panel = new DrawPanel();

         }
    }

    class StopListener implements ActionListener{
        public void actionPerformed(ActionEvent e){
               System.exit(0);
        }
    }

    /*
     * Panel created
     * rectangle drawn to random sizes
     */
    class DrawPanel extends JPanel{
        public void paintComponent(Graphics g){
                ran = new Random();
                g.setColor(new Color(ran.nextInt(255),+
                ran.nextInt(255),ran.nextInt(255)));
                height = ran.nextInt(getHeight());
                width = ran.nextInt(getWidth());
                x = ran.nextInt(getWidth()-width);
                y = ran.nextInt(getHeight()-height);
                g.fillRect(x,y,width,height);
                //repaint();
            try{
                Thread.sleep(240);
            }catch(InterruptedException ie){
            }   
            repaint();
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T14:47:52.440

这个片段是一个杀手：

```
class DrawPanel extends JPanel{
        public void paintComponent(Graphics g){
                ran = new Random();
                g.setColor(new Color(ran.nextInt(255),+
                ran.nextInt(255),ran.nextInt(255)));
                height = ran.nextInt(getHeight());
                width = ran.nextInt(getWidth());
                x = ran.nextInt(getWidth()-width);
                y = ran.nextInt(getHeight()-height);
                g.fillRect(x,y,width,height);
                //repaint();
            try{
                Thread.sleep(240);
            }catch(InterruptedException ie){
            }   
            repaint();
        }

    } 
```

1.  永远不要打电话`Thread.sleep(240);`给美国东部时间
2.  `repaint();`永远不要从内部调用，`paintComponent`因为这将创建一个无限循环
3.  启动`ran`一次就足够了，不要一遍又一遍地重新实例化它`paintComponent`
4.  将组件添加到框架的方式不正确`(Component, int)`，而不是相反
5.  使用Java 编码约定，即变量和方法是驼峰式大小写并以小写字母开头。
6.  如果您已经将按钮添加到面板，那么您只需将该面板添加到框架而不是按钮。否则，这将意味着您的面板毫无用处。
7.  `super.paintComponent`当你覆盖时不要忘记`paintComponent`。

每当您需要再次绘制组件时（即，您希望以某种方式`paintComponent`调用 ()），请`repaint()`在该组件上调用。

# php - 如何将 2 个 mysql 查询合并到 1 个表中

> ID：14339966
> 
> 赞同：2
> 
> 时间：2013-01-15T14:32:42.330
> 
> 标签：php, mysql, sql, database

我有一张桌子，例如

```
catid | parentcatid | dirname
  4   |      0      | mobiles 
 243  |      4      | Nokia 
```

当我得到`catid = 243`我需要带走`mysql_query (catid=parentcatid)`

```
243 | mobiles | Nokia 
```

我可以先选择`catid`,`parentcatid`和`dirname`where `id=243`，然后选择相同的 where `parentcatid = catid`，但是

**如何进行这个单一查询？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T14:34:07.690

`JOIN`表两次：

```
SELECT
  t2.catid, t1.dirname 'dirname', t2.dirname 'parentname'
FROM Tablename t1
INNER JOIN Tablename t2 ON t1.catid = t2.parentcatid
WHERE t2.catid = 243; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/55658/4)

这会给你：

```
| CATID | DIRNAME | PARENTNAME |
--------------------------------
|   243 | mobiles |      Nokia | 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T14:34:39.817

使用自联接：

```
SELECT parent.catid, parent.dirname
FROM yourtable AS parent
LEFT JOIN yourtable AS child ON (child.parentcatid = parent.catid)
WHERE child.catid = 243 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T14:40:22.077

您的问题的字面答案是使用自联接（正如 Marc B 所建议的那样）。

在字里行间阅读，我假设您事先不知道您的层次结构将有多深 - 这使得自我加入不太有用，因为如果您必须继续加入以获得更深层次的树，如果不是树的所有部分都进入相同的深度，您可能需要用户外部连接。

另一种方法——要复杂得多，并且只有在我的假设为真时才这样做——是[使用递归函数](http://explainextended.com/2009/03/17/hierarchical-queries-in-mysql/)，或者将您的数据表示为[嵌套集](http://www.ibase.ru/devinfo/DBMSTrees/sqltrees.html)。

# grails - 如何从独立的 grails 应用程序调用soap服务

> ID：14339968
> 
> 赞同：0
> 
> 时间：2013-01-15T14:32:59.263
> 
> 标签：grails, ejb, glassfish-3, noclassdeffounderror

我提前道歉，因为英语不是我的母语。我在测试与提供 ejb 服务的 java 服务器应用程序连接的独立客户端（使用 grails - groovy 框架创建）时遇到了一些麻烦。

我尝试通过 corba 和 wsdl 进行连接，两种方式都无法初始化上下文（ ），因为它说我在运行我的应用程序（使用嵌入式 jetty grails 服务器）时`InitialContext`缺少一些类（ ）。`NoClassDefFoundError`我确信这个类应该在类路径中，因为我有一个包含它的 jar，并且这个 jar 在类路径中，作为我的 grails 应用程序的 lib 文件夹中的文件。

这就是我尝试初始化 bean 以调用服务的方式：

```
Properties p = new Properties();
p.put(Context.INITIAL_CONTEXT_FACTORY, "com.sun.enterprise.naming.SerialInitContextFactory")
p.setProperty("org.omg.CORBA.ORBInitialHost", iProperties.getINTEGRATION_IP())
p.setProperty("org.omg.CORBA.ORBInitialPort", iProperties.getCORBA_PORT())
try{
    ctx = new InitialContext(p)
    authWS = (AdmAuthenticationRemote) ctx.lookup(AUTHENTICATION_SERVICE_JNDI); // CORBA
} catch(Throwable e){
    ctx = new InitialContext(p)
    authenticationWS = (AdmAuthenticationRemote) ctx.lookup(REMOTE_CLASS_PACKAGE_NAME) // WSDL
} 
```

上面的代码没有';' 因为 groovy 不需要它们来运行 java 代码。我在一个 netbeans 环境小应用程序中测试了这段代码，并且都有效。当我尝试在我的 grails 应用程序中执行此操作时，问题就出现了。

这是我尝试调用任何服务时遇到的错误：

```
NoClassDefFoundError: org/jvnet/hk2/component/MultiMap 
```

当然这不是完整的堆栈，但这是问题原因（由堆栈引起）。此类 ( `org.jvnet.hk2.component.MultiMap`) 包含在文件中`auto-depends.jar`（来自 glassfish 的 jar）。我尝试将`gf-client.jar`and `appserv-rt.jar`(glassfish jars too) 添加到 lib 中，以便应用程序将所有 glassfish jars 调用到类路径中，但这不起作用，我发现在独立应用程序中包含类的 jars 应该手动添加（甚至你我只是`appserv-rt.jar`在 netbeans 测试文件中添加并工作！）所以我将此 jar 添加到我的 lib 文件夹中：

```
appclient.security.jar
auto-depends.jar
common-util.jar
config-api.jar
config.jar
config-types.jar
connectors-admin.jar
connectors-inbound-runtime.jar
connectors-internal-api.jar
connectors-runtime.jar
container-common.jar
deployment-common.jar
dol.jar
ejb-container.jar
ejb-internal-api.jar
ejb.security.jar
glassfish-api.jar
glassfish-corba-asm.jar
glassfish-corba-codegen.jar
glassfish-corba-csiv2-idl.jar
glassfish-corba-newtimer.jar
glassfish-corba-omgapi.jar
glassfish-corba-orbgeneric.jar
glassfish-corba-orb.jar
glassfish.jar
glassfish-naming.jar
gmbal.jar
hk2-core.jar
internal-api.jar
javax.ejb.jar
kernel.jar
management-api.jar
orb-connector.jar
orb-enabler.jar
orb-iiop.jar
security.jar
tiger-types-osgi.jar 
```

当然，我也有带有远程接口和服务对象的 jar，我需要访问 glassfish 服务器中的服务。即使我这样做，这个错误也会不断发生。我没有想法，被这个问题困在这里，不知道如何解决它。我的问题是如何解决这个异常？是grails的问题吗？？我没有配置一些 grails 文件吗？请任何想法将不胜感激。

提前致谢

凯文

**更新**：我也发现，如果我运行 clean 和 compile 命令，我会得到这个错误而不是之前的错误：

`java.lang.ClassNotFoundException: org.jvnet.hk2.component.Inhabitant`

我不确定为什么会发生这种情况，但是当我重新启动服务器（没有干净编译）时，它给出了以前的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T10:04:12.193

您将 auto-depends.jar 添加到 lib 文件夹。我想 grails WAR 文件应该看到它。但是要让 grails 在运行应用程序模式下使用该 jar，您可能还需要注册依赖项。在 BuildConfig.groovy 中添加以下行：

```
grails.project.dependency.resolution = {
    //.....
    dependencies {
        //.....

        runtime ':glassfish-auto-depends:1'

    }
    //.....
} 
```

并将您的 auto-depends.jar 重命名为 glassfish-auto-depends-1.jar（“-1”是必需的版本；“glassfish”是为了方便起见）。它的所有依赖项也应该类似地指定。然后执行命令：

```
grails refresh-dependencies 
```

它会将 jar 复制到 ivy 缓存。然后运行您的应用程序 - 它应该加载 jar。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T18:40:39.537

我设法通过将所有 glassfish jar 文件（lib 和模块）添加到我的项目的 lib 文件夹来解决他的问题，但是我在调​​用服务时仍然遇到问题。

我创建了另一个帖子，详细说明了我遇到的新问题。

[如何从 Grails 独立客户端访问 EJB 服务](https://stackoverflow.com/questions/14483725/how-to-access-ejb-services-from-a-grails-standalone-client)

# bluetooth - 通过蓝牙从 arduino 接收温度读数并在 android 智能手机中显示

> ID：14339974
> 
> 赞同：0
> 
> 时间：2013-01-15T14:33:11.343
> 
> 标签：bluetooth, arduino

我必须做一个项目，我必须从温度传感器获取温度读数，然后通过蓝牙将其发送到安卓智能手机并显示读数。

我正在使用麻省理工学院的应用程序发明者来制作应用程序。到目前为止，我可以连接到连接到 arduino uno r3 的蓝牙模块，如果按下“显示”按钮，我可以显示温度。我希望应用程序自行更新温度读数，而无需每次都按下按钮进行更新。我该怎么做呢？这是我到目前为止的代码。

我尝试使用应用程序发明者中的计时器自动更新读数，但应用程序发明者在连接到蓝牙模块后不断崩溃。

我到目前为止的代码块在这个链接中。[http://www.flickr.com/photos/92242434@N07/8382878573/in/photostream](http://www.flickr.com/photos/92242434@N07/8382878573/in/photostream)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T14:45:02.883

帮助我了解需求：

为什么每次都想连接？您的手机是否总是靠近温度传感器？

您设置的计时器值是多少？我的意思是与温度传感器交互的时间？

只是一个伪：

如果连接请求温度，则每 2 分钟一次，否则重新连接请求温度

此代码的问题是，如果您超出范围，它将继续发送重新连接请求，从而耗尽手机的电池。您需要接听电话，而实际上您想断开/或 y

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-13T01:20:48.963

尝试设置显示温度的标签，如下所示：

```
when Clock.Timer do:
 if (BluetoothClient.IsConnected) then:
    set Label.Text to: call BluetoothClient.ReceiveText
                  Number of bytes: call BluetoothClient.BytesAvailableToReceive 
```

该视频展示了您尝试使用 App Inventor 和 Arduino 代码执行的操作的示例：[https ://www.youtube.com/watch?v=xjtxrxVauZg](https://www.youtube.com/watch?v=xjtxrxVauZg)

# scala - Scala isAssignable From 与 Scala 和 Java 原语

> ID：14339976
> 
> 赞同：0
> 
> 时间：2013-01-15T14:33:25.340
> 
> 标签：scala

我有一个地图扩展方法

```
def getAs[T : Manifest](key: String): Option[T] =
  m.get(key) collect { 
    case v if manifest[T].erasure.isAssignableFrom(v.getClass) => v.asInstanceOf[T]
  } 
```

如果它是可分配的，它会获取键值并将其转换为所需的类型。现在，如果存储项目是 java.lang.Boolean，并且类型参数是 scala.Boolean，那么这不起作用。我想这对于 Int、Long 等也是一样的。

有什么明显的方法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T14:57:18.570

这是一个蛮力解决方案

```
 def getAs[T : Manifest](key:String):Option[T] = m.get(key) collect {
    case v if manifest[T].erasure.isAssignableFrom(v.getClass)    => v.asInstanceOf[T]
    case i:java.lang.Integer if manifest[T] == manifest[Int]      => i.asInstanceOf[T]
    case l:java.lang.Long if manifest[T] == manifest[Long]        => l.asInstanceOf[T]
    case f:java.lang.Float if manifest[T] == manifest[Float]      => f.asInstanceOf[T]
    case d:java.lang.Double if manifest[T] == manifest[Double]    => d.asInstanceOf[T]
    case b:java.lang.Boolean if manifest[T] == manifest[Boolean]  => b.asInstanceOf[T]
  } 
```

# ruby - Ruby中正则表达式的贪婪和非贪婪方法有什么区别？

> ID：14339978
> 
> 赞同：4
> 
> 时间：2013-01-15T14:33:40.100
> 
> 标签：ruby, regex

任何人都可以通过一些合适的例子帮助我理解两种正则表达式方法之间的区别吗？

*   贪婪的
*   不贪心

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-15T14:51:06.473

在贪婪的方法中，正则表达式模式倾向于消耗源字符串中的最大字符。例如

```
textstr = "bcabdcab"
textstr.gsub!(/(.*)ab/, "xxx")  
# this will match whole `bcabdcab` and return `xxx` 
```

这`*`是一个贪婪的量词。在非贪婪方法中，正则表达式引擎在满足匹配条件时返回。使量词非贪婪追加`?`

```
textstr = "bcabdcab"
textstr.gsub!(/(.*?)ab/, "xxx")  
# this will match only `bcab` part and return `xxxdcab` 
```

`gsub`返回 str(first argument) 的副本，其中所有出现的模式都替换为第二个参数

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T15:07:41.073

查看[http://www.regular-expressions.info/repeat.html](http://www.regular-expressions.info/repeat.html)。

贪婪是指正则表达式引擎尝试匹配特定字符集的次数。陈述正则表达式“贪婪”的方法是使用特殊字符`*`,`+`和.`?``{}`

考虑

```
str = "asdfasdfbbbb"
r1 = /b/
r2 = /(asdf)*/
r3 = /b{3}/
r4 = /.*/ 
```

**将这些正则表达式与str**匹配将导致：

**r1** matching *"asdfasdf **b** bbb"* (non-greedy, tries to match *b* just once)
**r2** matching *"**asdfasdf** bbbb"* (greedy, tries to match *asdf* as many times as possible)
**r3** matching *"asdfasdf **bbb** b"* (non-greedy, matches *b* exactly 3 times)
**r4** matching *"**asdfasdfbbbb**"* (ULTRA-greedy, matches almost any character as many times as possible)

As regex are means to represent specific text patterns, it's not like greediness it's a matter of approach. You will sometimes need to match three times *foo*(`/(foo){3}/`) or infinite times *bar*(`/(bar)*/`).

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-15T14:41:32.240

*   `*`- （0个或更多）贪婪匹配
*   `+`- （1个或更多）贪婪匹配
*   `*?`- （0个或更多）非贪婪匹配
*   `+?`- （1个或多个）非贪婪匹配

# vb.net - VBA/Macro：如何从 Normal.dotm 以外的文件中读取自动更正条目（例如 oldNormal.dotm）

> ID：14339983
> 
> 赞同：1
> 
> 时间：2013-01-15T14:34:18.300
> 
> 标签：vb.net, ms-word, visual-studio-macros

如前所述，Normal.dotm：存储格式化的自动更正条目、自动图文集条目、键盘快捷键、菜单自定义、自定义工具栏、样式、宏。

我对**格式化的**自动更正条目特别感兴趣。让我们看看案例场景：

*   我已经在 Normal.dotm System-A 和 System-B 中有 100 个自动更正条目。
*   我想将 System-B 的所有自动更正条目添加到 System-A。
*   我将 Normal.dotm 文件下载/下载到 System-B，VB/Macro 中的例程/程序从 Normal.dotm（来自 B）读取自动更正条目并添加到 Normal.dotm（A）。

所以在 VBA 宏中，我们有**Application.Autocorrect.Entries**来访问所有自动更正条目，但是如何从默认的“Normal.dotm”以外的文件中读取它

也欢迎在两个系统之间以编程方式添加/复制**格式化的**自动更正条目的任何其他建议

提前感谢

**编辑**：有用的链接（感谢 James）[http://www.word.mvps.org/FAQs/Customization/ExportAutocorrect.htm](http://www.word.mvps.org/FAQs/Customization/ExportAutocorrect.htm)，它是一个 docx 宏。但无法准确恢复格式化**表格。**例如，最初有 5 列存储/备份 3 列的表（宏将自动更正条目存储在**docx**文件中作为键值对），然后在恢复时失败。

# php - Wordpress 自定义 post_type

> ID：14339985
> 
> 赞同：0
> 
> 时间：2013-01-15T14:34:20.053
> 
> 标签：php, wordpress

我想在我的 wordpress 插件中使用自定义 post_type，但是如果我要访问这个 post_type，我会遇到问题。

如果我激活我的插件，我可以访问例如： [http://wp.localhost/movie_reviews/movie_test/](http://wp.localhost/movie_reviews/movie_test/)

类的一般部分

```
function __construct () {

  add_action( 'init', array( &$this, 'my_int' ), 1 );

}

function my_int () { 

    add_filter( 'template_include', array(&$this, 'my_template' ), 10 );

    register_post_type( 'movie_reviews',
      array(
        'labels' => array(
        'name' => __('Movie Reviews', $this->var_sTextdomain),
        'singular_name' => __('Movie Review', $this->var_sTextdomain),
        'add_new' => __('Add New', $this->var_sTextdomain),
        'add_new_item' => __('Add New Movie Review', $this->var_sTextdomain),
        'edit' => __('Edit', $this->var_sTextdomain),
        'edit_item' => __('Edit Movie Review', $this->var_sTextdomain),
        'new_item' => __('New Movie Review', $this->var_sTextdomain),
        'view' => __('View', $this->var_sTextdomain),
        'view_item' => __('View Movie Review', $this->var_sTextdomain),
        'search_items' => __('Search Movie Reviews', $this->var_sTextdomain),
        'not_found' => __('No Movie Reviews found', $this->var_sTextdomain),
        'not_found_in_trash' => __('No Movie Reviews found in Trash', $this->var_sTextdomain),
        'parent' => __('Parent Movie Review', $this->var_sTextdomain)
      ),
      'public' => true,
      'menu_position' => 15,
      'supports' => array( 'title', 'editor', 'comments', 'thumbnail', 'custom-fields', 'post-formats' ),
      'taxonomies' => array( '' ),
      'menu_icon' => plugins_url( 'img/my_icon.png', __FILE__ ),
      'has_archive' => false,
      'rewrite' => array('slug' => 'movie_reviews')
      )
    );

}

function my_template ( $template_path ) {

  if ( get_post_type() == 'movie_reviews' ) { 

        if ( is_single() ) {
          $template_path = plugin_dir_path( __FILE__ ) . '/templates/single-movie_reviews.php';
        }

        // etc ...

  }

  return $template_path;

} 
```

在激活钩子上（课程的一部分）

```
function my_int () {

    register_post_type( 'movie_reviews',
      array(
          'labels' => array(
              'name' => __('Produkt Reviews', $this->var_sTextdomain),
              'singular_name' => __('Produkt Review', $this->var_sTextdomain),
              'add_new' => __('Add New', $this->var_sTextdomain),
              'add_new_item' => __('Add New Produkt Review', $this->var_sTextdomain),
              'edit' => __('Edit', $this->var_sTextdomain),
              'edit_item' => __('Edit Produkt Review', $this->var_sTextdomain),
              'new_item' => __('New Produkt Review', $this->var_sTextdomain),
              'view' => __('View', $this->var_sTextdomain),
              'view_item' => __('View Produkt Review', $this->var_sTextdomain),
              'search_items' => __('Search Produkt Reviews', $this->var_sTextdomain),
              'not_found' => __('No Produkt Reviews found', $this->var_sTextdomain),
              'not_found_in_trash' => __('No Produkt Reviews found in Trash', $this->var_sTextdomain),
              'parent' => __('Parent Produkt Review', $this->var_sTextdomain)
          ),
          'public' => true,
          'menu_position' => 15,
          'supports' => array( 'title', 'editor', 'comments', 'thumbnail', 'custom-fields', 'post-formats' ),
          'taxonomies' => array( '' ),
          'menu_icon' => plugins_url( 'assets/img/plugin.png', __FILE__ ),
          'has_archive' => true,
          'rewrite' => array('slug' => 'movie_reviews')
      )
    );

    flush_rewrite_rules();
} 
```

// 编辑：已解决

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T23:49:47.643

设置`has_archive`为`true`将在您提到的位置显示帖子类型存档。

或者您可以保留它`false`并使用 slug 创建一个页面`movie_reviews`

进行更改以刷新重写规则后，请确保访问管理员中的永久链接设置页面。

# prolog - Prolog：如何查找和删除最小列表元素？

> ID：14339993
> 
> 赞同：3
> 
> 时间：2013-01-15T14:35:00.530
> 
> 标签：prolog

我是 Prolog 的新手。

我需要帮助编写一个谓词来查找和删除列表中的最小元素。

非常感谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-08-05T06:28:02.030

如果所有列表项都是整数，我们可以使用[clpfd](/questions/tagged/clpfd "显示标记为“clpfd”的问题")！

```
:- use_module(library(clpfd)). 
```

我们`zmin_deleted/2`使用[`maplist/2`](https://stackoverflow.com/a/6683502/4609915)、[`(#=<)/2`](http://www.swi-prolog.org/man/clpfd.html)、 [`same_length/2`](http://www.swi-prolog.org/pldoc/doc_for?object=same_length/2)和定义[`select/3`](http://www.swi-prolog.org/pldoc/doc_for?object=select/3)：

```
zmin_deleted(Zs1,Zs0) :-
   same_length(Zs1,[_|Zs0]),
   maplist(#=<(Min),Zs1),
   select(Min,Zs1,Zs0). 
```

示例查询：

```
?- zmin_deleted([3,2,7,8],Zs).
  Zs = [3,7,8]
; false.

?- zmin_deleted([3,2,7,8,2],Zs).
  Zs = [3,  7,8,2]
; Zs = [3,2,7,8  ]
; false. 
```

请注意，这`zmin_deleted/2`也适用于“其他方向”：

```
?- zmin_deleted(Zs,[3,2,7,8]).
  _A in inf..2, Zs = [_A, 3, 2, 7, 8]
; _A in inf..2, Zs = [ 3,_A, 2, 7, 8]
; _A in inf..2, Zs = [ 3, 2,_A, 7, 8]
; _A in inf..2, Zs = [ 3, 2, 7,_A, 8]
; _A in inf..2, Zs = [ 3, 2, 7, 8,_A]
; false. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T15:14:15.463

让我为你谷歌它。

[你怎么能找到最少的列表。](https://stackoverflow.com/a/3966139/570689).

无论如何，有一个很好的[`min_list`](http://www.swi-prolog.org/pldoc/man?predicate=min_list%2f2)谓词。

```
?- min_list([1,2,2,3],X).
X = 1. 
```

这是一个小例子，如何从列表中删除一些元素（注意，所有`2`s 都消失了）：

```
?- delete([1,2,2,3],2,X).
X = [1, 3]. 
```

如果您只想删除元素的第一次，请使用[`select`](http://www.swi-prolog.org/pldoc/doc_for?object=select/3)：

```
?- select(2, [2,1,2,2,3], X), !.
X = [1, 2, 2, 3]. 
```

所以你的最终答案可能是这样的：

```
delete_min(A, C) :-
  min_list(A, B),
  select(B, A, C), !. 
```

和

```
?- delete_min([1,1,2,3],X).
X = [1, 2, 3]. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T15:16:25.017

同样，只需在列表上使用结构递归。列表由节点构建，`[H|T]`即具有两个字段的复合数据结构- *head*和*tail*。Head 是节点中保存的数据（列表元素），是列表的其余部分。`H`*`T``T`*

 *我们通过滚动列表找到最小元素，同时保留一个额外的数据 - 到目前为止所有看到的最小元素：

```
minimum_elt([H|T],X):- minimum_elt(T,H,X). 
```

空列表情况没有定义 - 空列表没有最少元素。

```
minimum_elt([],X,X). 
```

如果列表中没有更多元素，那么我们目前拥有的就是答案。

```
minimum_elt([A|B],M,X):- 
```

这里有两种情况：`A < M`或其他情况：

```
 A < M, minimum_elt(B,A,X).

minimum_elt([A|B],M,X):- 

    A >= M, minimum_elt(B,M,X). 
```

没什么好说的了，程序到此结束。

* * *

编辑：除了，您还想删除该元素。这改变了事情。唔。一种明显的方法是首先找到最小 elt，然后将其删除。我们将不得不再次比较所有元素，这次与之前找到的最小元素进行比较。我们可以在一次扫描中做到这一点吗？

在 Lisp 中我们可以。要从列表中删除任何元素，我们只需将*前一个*节点的尾指针重置为指向被删除节点之后的*下一个节点。*然后使用这种方法，我们将扫描输入列表一次，保持对前一个节点的引用为目前找到的最小元素，当我们找到越来越小的元素时交换它。然后，当我们到达列表的末尾时，我们只需通过手术移除最小节点。

但是在 Prolog 中，我们不能*重置*东西。Prolog 是一种*设置一次*的语言。所以看起来我们被困在需要遍历列表两次......或者我们可以尝试非常聪明，并在我们进行时构建所有可能的列表，每次找到新的候选者时将它们整理出来最小的元素。

```
rem_min([A|B],L):-
    % two possibilities: A is or isn't the minimum elt
    rem_min(B,A,([A|Z],Z,Z),L).

rem_min([],A,(With,Without,Tail),L):- Tail = [],
    % A is indeed the minimal element
    L = Without.

rem_min([H|T],A,(With,Without,Tail),L):- H >= A, Tail=[H|Z],
    rem_min(T,A,(With,Without,Z),L).

rem_min([H|T],A,(With,Without,Tail),L):- H < A,  % use this H
    copy_the_list(With,Tail,W2,T2),              % no good - quadratic behaviour
    Tail=[H|Z], T2=Z,
    rem_min(T,A,(With,W2,Z),L).

copy_the_list([A|B],T,[A|C],C):- var(B), !, T=B.            % fresh tail
copy_the_list([A|B],T,[A|C],T2):- copy_the_list(B,T,C,T2). 
```

* * *

所以看起来我们无法避免第二遍，但至少我们可以保存所有多余的比较：

```
rem_min([A|B],L):- N=[A|_], rem_min(B,A,N,[N|Z],Z,L).

rem_min([],_A,N,L2,Z,L):- Z=[], N=[_,1], % finalize the minimal entry
    scan(L2,L).
rem_min([H|T],A,N,L2,Z,L):- H >= A, Z=[H|Z2], rem_min(T,A,N,L2,Z2,L).
rem_min([H|T],A,N,L2,Z,L):- H < A,       % use this H
    N2=[H|_], N=[_],                     % finalize the non-minimal entry
    Z=[N2|Z2], rem_min(T,H,N2,L2,Z2,L).

scan( [], []).
scan( [[_,1]|B],C):- !, scan(B,C).       % step over the minimal element
scan( [[A]|B],[A|C]):- !, scan(B,C).     % previous candidate
scan( [A|B], [A|C]):- !, scan(B,C). 
```*

# symfony - 从 phpmyadmin 设置用户角色

> ID：14339995
> 
> 赞同：1
> 
> 时间：2013-01-15T14:35:01.187
> 
> 标签：symfony, fosuserbundle

这似乎很容易，但我找不到任何关于它的东西。因此，我将 FOSUserBundle 用于 Symfony2。我注册了我的用户，我希望它拥有`ROLE_ADMIN`. 由于我不打算拥有更多管理员，因此我想从 phpmyadmin 进行设置。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T15:33:31.550

是的，有可能。您需要将 ROLE_ADMIN`roles`作为序列化数组添加到数据库字段：

```
a:1:{i:0;s:10:"ROLE_ADMIN";} 
```

但是，这不是提升用户的推荐方式。相反，您可以使用以下控制台命令：

`php app/console fos:user:promote`