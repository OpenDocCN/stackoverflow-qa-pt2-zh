# StackOverflow 问答 13562000-13562999

# mysql - 数据库镜像和数据库复制（例如 Amazon RDS 中的多可用区部署）之间有什么区别？

> ID：13562000
> 
> 赞同：1
> 
> 时间：2012-11-26T09:34:13.640
> 
> 标签：mysql, amazon-ec2, amazon-rds, mirroring

我有一个在 Amazon RDS 上运行 MySQL 引擎的应用程序数据库。为了更好地为世界各地的用户提供我们的数据，我正在寻找最佳解决方案。

在之前版本的应用程序中，我们镜像了我们在美国和新加坡的数据库，以便用户在速度方面获得更好的性能，并且在我们这边，如果发生任何灾难，我们都有备份。

现在，当我们搬到亚马逊时，多可用区部署是否会以同样的方式为我们服务？我的意思是在所有区域复制数据库，但 RDS 是否仍仅在单个区域中工作？

我已经做了一些研究，但仍然不确定，所以如果我感到困惑，请再问我一些问题。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T06:28:52.817

RDS MySQL 多可用区部署目前仅在 Amazon EC2 区域内有效。RDS 只读副本也需要存在于同一 Amazon EC2 区域内。区域间复制是 AWS RDS 中最需要的功能，用于将数据复制到备用 Amazon EC2 区域中的另一个 RDS。目前在他们的路线图中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T13:55:25.913

我认为您需要 AWS RDS 的多可用区和只读副本功能。

多可用区只是在另一个可用区中创建一个不可访问的辅助数据库，如果主数据库发生故障，AWS 将切换到辅助数据库。所以你有故障转移。

如果您想提高性能，并且您的应用程序可以在新加坡以只读模式工作（例如），那么只读副本将是完美的。如果还需要写入，则需要将它们路由到主读写数据库。

AWS 支持这两种方法的组合。

# powerbuilder - 复合数据窗口到 txt

> ID：13562009
> 
> 赞同：0
> 
> 时间：2012-11-26T09:34:53.300
> 
> 标签：powerbuilder, composite, datawindow

我在 Powerbuilder 11.5 中构建了一个复合数据窗口，它显示了我的应用程序的发票表单。与希腊的大多数财政文件一样，我必须将其作为文本文件发送到构成数字税收签名的财政设备，然后我将其附加到发票上。问题是该`SaveAsAscii`函数只保存第一个子数据窗口而不是整个组合！如您所知，这是一个严重的问题。

有没有办法可以在每个嵌套数据窗口上使用 SaveAscii 并生成单独的文本文件？然后，我可以轻松地将它们合并到一个文本文件中并将其发送到财务设备。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T22:41:28.367

安装 Windows“通用/纯文本”打印机并重定向打印文件。

```
dw_1.object.DataWindow.Print.filename = 'c:\temp\test.txt'
dw_1.print() 
```

# android - 选项卡出现在操作栏上方

> ID：13562010
> 
> 赞同：2
> 
> 时间：2012-11-26T09:35:00.897
> 
> 标签：android, tabs, android-actionbar

我希望我的活动看起来像

> 1.  操作栏，带有自定义视图
> 2.  使用 NAVIGATION_MODE_TABS 创建的选项卡
> 3.  选项卡内容

但 1,2 已切换。（选项卡出现在屏幕顶部，操作栏出现在选项卡下方）

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T09:50:45.653

[https://github.com/JakeWharton/ActionBarSherlock/issues/327](https://github.com/JakeWharton/ActionBarSherlock/issues/327)

显然这是一个错误..

有人发布了修复

> furyfred 于 5 天前发表评论 刚刚找到一个简单的解决方法。
> 
> 在您的 onCreate 方法中使用以下内容：
> 
> 查看 homeIcon = findViewById(android.R.id.home); ((View) homeIcon.getParent()).setVisibility(View.GONE);
> 
> 这会完全折叠主页按钮。
> 
> PS：我使用的是标准的 ActionBar 但这应该是一样的

# android - 服务中的断点不起作用

> ID：13562011
> 
> 赞同：5
> 
> 时间：2012-11-26T09:35:00.573
> 
> 标签：android, eclipse, debugging, service, breakpoints

我正在尝试向在单独线程上运行的服务添加断点。无论我将断点放在服务的哪个位置，它们总是被忽略。

`Log.e`正如我在 logcat 中看到的那样，我确信该服务正在运行。我的调试模式也被正确地用作应用程序主线程中的任何断点工作。

我错过了什么吗？单独线程中的服务是否不支持调试模式？

我今天刚刚将 Eclipse 和 Android SDK 工具更新到最新版本。

我正在设备上测试我的应用程序。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-27T12:43:56.757

成功了`android.os.Debug.waitForDebugger()`。在要调试的代码行之前添加它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-12-21T11:45:25.527

确保使用 android:process 属性在清单的服务标签中声明包名称，例如：

```
<service android:name=".YourCoolService"
            android:process="your.package.here"/> 
```

# c# - 防止用户在卸载时启动应用程序的最佳方法是什么

> ID：13562012
> 
> 赞同：0
> 
> 时间：2012-11-26T09:35:09.197
> 
> 标签：c#, .net, uninstallation

我正在开发一个 C# windows 服务 + UI 应用程序。

我有一个问题，如果在卸载过程中用户尝试启动 UI，则卸载会损坏并卡住（因为 ui 持有某些文件的句柄并防止它们被删除）。

处理这种情况的最佳方法是什么？我想也许我应该在开始卸载过程时限制对 .exe 的访问，这样用户将无法启动它。

但我想知道是否有关于如何做到这一点的 BKM

**编辑**

该应用程序已安装在客户的机器上，因此我无法对应用程序本身进行任何更改。

我有一个升级安装程序，它可以在卸载过程中做一些事情。升级安装程序首先卸载应用程序，然后重新安装。我只能将代码添加到升级安装程序，因此我不能使用互斥锁。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T09:40:24.540

您可以使用命名互斥锁，它是 Windows 核心对象，两个进程可以检查它是否已经注册。

卸载时只需创建一个命名互斥体，并在进程启动时检查它是否存在

[这](http://msdn.microsoft.com/en-us/library/f55ddskf.aspx)是创建命名互斥锁的方法

[这](http://msdn.microsoft.com/en-us/library/hh194641.aspx)是检查它是否存在的方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T09:43:12.147

在卸载中杀死进程怎么样？

```
 public static bool KillProcess(string yourProcessName)
{
    foreach (Process clsProcess in Process.GetProcesses())
    {
        if (Process.GetCurrentProcess().Id == clsProcess.Id)
            continue;
        if (clsProcess.ProcessName.Contains(name))
        {
            clsProcess.Kill();
            return true;
        }
    }
    return false;
} 
```

# visual-studio - Visual Studio 2012 / Resharper / 找到了很酷的快捷方式，但无法重现

> ID：13562013
> 
> 赞同：1
> 
> 时间：2012-11-26T09:35:09.990
> 
> 标签：visual-studio, resharper, keyboard-shortcuts

我只是不小心点击了一个很酷的快捷方式（打字时左手有一个松饼:-)）但无法重现它。甚至谷歌也没有答案。

我在评论行中，突然打印出当前时间：“[26.11.2012 09:49 <-]”

Resharper 7.1 也已安装。

有人知道我打的是什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T11:33:39.067

好的。找到了：

“STRG+1”是解决方案。但我不知道它来自哪里。

更好的解决方案：在 Reharper 中定义一个动态打印当前用户名和当前时间的模板。

# events - 服务器处理程序事件信息参数谷歌应用程序脚本

> ID：13562017
> 
> 赞同：0
> 
> 时间：2012-11-26T09:35:19.260
> 
> 标签：events, google-apps-script

一个简单的应用程序：

```
function doGet() {
  return(test());
}

function test(){
  var smiley = UiApp.createApplication().setTitle("TT Bomgar Feedback");
  var textIn = smiley.createTextBox().setName("text");
  var textOut = smiley.createLabel().setId("label").setVisible(false);
  var button = smiley.createSubmitButton("Submit");
  var handler = smiley.createServerHandler("handler");
  button.addClickHandler(handler);
  smiley.add(button);
  smiley.add(textIn);
  smiley.add(textOut);
  return(smiley);
}

function handler(e){
  app = UiApp.getActiveApplication();
  var text = e.parameter.text;
  app.getElementById("label").setVisible(true).setText(text);
  return(app);
} 
```

在处理函数中，`var text`总是`undefined`. 这意味着返回以下内容：

![在此处输入图像描述](../Images/9862fe8ee58ae51665c1794a519214e7.png)

因此，打印的是 undefined 而不是“一些文本”。

我不明白为什么，因为我已经在测试函数中正确设置了文本框元素的名称......

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T10:10:10.007

您需要将 callBackElemnt 添加到处理程序，以便将其值传递给处理程序函数。在通常的实践中，我们只添加包含所有其他元素的最顶层元素。但是您也可以添加所有要传递其值的元素。

修改后的脚本

```
var handler = smiley.createServerHandler("handler");
handler.addCallbackElement(textIn);
button.addClickHandler(handler); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T10:06:30.773

您必须将回调元素添加到您的服务器处理程序：

```
...
var handler = smiley.createServerHandler("handler");
handler.addCallbackElement(textIn);
button.addClickHandler(handler);
... 
```

[https://developers.google.com/apps-script/class_serverhandler#addCallbackElement](https://developers.google.com/apps-script/class_serverhandler#addCallbackElement)

# android - 如何使用缩略图 android 小部件创建网络书签？

> ID：13562019
> 
> 赞同：0
> 
> 时间：2012-11-26T09:35:22.823
> 
> 标签：android, android-widget, bookmarks

有人知道如何用缩略图制作网页书签吗？请告诉我如何获取当前书签网站的缩略图或屏幕截图..

这是我想学习的小部件..
![在此处输入图像描述](../Images/1f786e996cc4e1e9c8e2c179ab8b659d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T06:54:50.990

这仅适用于 ICS+：

浏览器 API 正在按照 Contacts API 进行修改，现在书签链接到 Accounts 并且还具有文件夹结构。据我所知，新的 Internals 尚未通过公共 API 调用公开，并且所有实现都可能会更改将来，如果您使用内部 API，您的应用程序可能会停止工作。尽管如此，了解 android 浏览器提供商的内部运作还是值得的：

在[`BrowserProvider2`](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/4.1.1_r1/com/android/browser/provider/BrowserProvider2.java#BrowserProvider2). 现在，缩略图在不同的表中，并且有自己的[URI](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/4.1.1_r1/com/android/browser/provider/BrowserProvider2.java#226)。但在内部，他们将数据放在 images 表中，这也有一个[URI](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/4.1.1_r1/com/android/browser/provider/BrowserProvider2.java#222)。

查看新[Bookmarks 表](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/4.1.1_r1/com/android/browser/provider/BrowserProvider2.java#401)和[Thumbnails 表](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/4.1.1_r1/com/android/browser/provider/BrowserProvider2.java#474)和[Images 表](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/4.1.1_r1/com/android/browser/provider/BrowserProvider2.java#437)的结构。然后，看看书签是如何被插入的：

*   [遗留电话](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/4.1.1_r1/com/android/browser/provider/BrowserProvider2.java#1371)
*   [书签插入](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/4.1.1_r1/com/android/browser/provider/BrowserProvider2.java#1386)
*   [提取缩略图等](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/4.1.1_r1/com/android/browser/provider/BrowserProvider2.java#2033)
*   [提取图像插入](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/4.1.1_r1/com/android/browser/provider/BrowserProvider2.java#1429)

此外，[`BrowserContract`](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/provider/BrowserContract.java#BrowserContract)是否将这些列定义为[`ImageColumns`](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/provider/BrowserContract.java#186)这些商店、缩略图、网站图标和触摸图标等。

最后，[`query()`](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/4.1.1_r1/com/android/browser/provider/BrowserProvider2.java#877)匹配 [`IMAGES`](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/4.1.1_r1/com/android/browser/provider/BrowserProvider2.java#1069)（没有 id，url 是主键）和[`THUMBNAILS`](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/4.1.1_r1/com/android/browser/provider/BrowserProvider2.java#1104)（有 id）。

因此，从这里您可以使用 new [`CONTENT_URI`](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/provider/BrowserContract.java#BrowserContract.Bookmarks.0CONTENT_URI)of获取所需的任何图像[`BrowserContract`](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/provider/BrowserContract.java#BrowserContract)，将其附加到图像、缩略图等[的 URI并运行您的查询/插入。](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/4.1.1_r1/com/android/browser/provider/BrowserProvider2.java#202)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T09:38:44.527

我认为对于缩略图，您将链接放在 webView 上并将 webView 保存在位图下。然后你把位图保存在 SD 卡上，你就有了你的缩略图。

你可以得到这样的书签：

```
Cursor mCur  = ActivityChooseBookmark.this.getContentResolver().query(android.provider.Browser.BOOKMARKS_URI,
                        projection, Browser.BookmarkColumns.BOOKMARK, null, null); 
```

使用它从 webView 获取您的位图：

```
public static Bitmap getBitmapFromView(View view) {
        Bitmap returnedBitmap = Bitmap.createBitmap(view.getWidth(), view.getHeight(),Bitmap.Config.ARGB_8888);
        Canvas canvas = new Canvas(returnedBitmap);
        Drawable bgDrawable = view.getBackground();
        if (bgDrawable!=null) 
            bgDrawable.draw(canvas);
        else 
            canvas.drawColor(Color.TRANSPARENT);
        view.draw(canvas);
        return returnedBitmap;
    } 
```

现在只需将其保存在 SD 上即可

# jquery - 如何使用 iframe 调用两个 src/url 请求或将一个 iframe 添加到另一个 iframe？

> ID：13562022
> 
> 赞同：0
> 
> 时间：2012-11-26T09:35:41.130
> 
> 标签：jquery, iframe, frameset-iframe

如何从“iframe”调用两个 src/url 请求。我需要用 iframe 显示两个 src/url。我正在使用 iframe src 调用一个文件...但是如何调用第二个文件？或者我可以在另一个 iframe 中添加一个 iframe 吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T09:46:17.623

每个 iframe 只能有一个 URL。

您的替代方案是：

1.  嵌入 iframe
2.  两个同级 iframe（有两个相邻的 iframe，每个都有一个 URL）

# php - PHP External Oauth：如何在等待回调时显示等待消息（不使用 AJAX）

> ID：13562027
> 
> 赞同：0
> 
> 时间：2012-11-26T09:35:52.533
> 
> 标签：php, callback, popup

我们允许使用 PHP API 对多个社交网络进行外部 OAuth。当用户选择外部身份验证时，会打开一个新窗口（弹出窗口），应用程序在此请求授权。然后，仍然在弹出窗口中，使用提供给外部应用程序的回调 url 重定向用户。回调脚本执行各种任务（登录、检查、同步等），这些任务可能需要一段时间，然后才会关闭弹出窗口并更新母页。在执行这些任务时，弹出窗口只是空白。

我想要的是在调用回调 url 时在弹出窗口上显示“请稍候...”消息。一种解决方案是弹出窗口仅显示消息并传递 AJAX，但由于我不知道回调的参数（取决于外部应用程序），我想避免这种情况。有没有办法只用一个 PHP 脚本来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T10:25:03.667

由于服务会将您返回到您的服务器 - 您可以尝试下一步： 1\. 将传输编码设置为分块。2\. 使用加载器 img 回显 javascript document.write。3\. 做你的处理。4\. 处理结束后关闭窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T09:42:19.623

您可以在 iFrame 中执行授权（将需要额外的工作以将 iframe 与弹出窗口同步以达到您的想法）并根据需要设计窗口。

~~您也可以只设置标题。~~

# android - 从资源在画布上制作新的位图

> ID：13562028
> 
> 赞同：0
> 
> 时间：2012-11-26T09:35:59.087
> 
> 标签：android, android-canvas

我认为我的问题很小，但我找不到解决方案。我正在尝试制作可以帮助我制作 WEB 页面的应用程序，并且我想制作可以将图形元素放在屏幕上的应用程序。

我制作了矩形的可绘制 png 图像，我可以将它们放在我想要的屏幕上，没问题，但我不能制作新的图形/位图。

当我按下meni DIV或iFrame时，如何将新的图形对象放在屏幕上？

```
public class Objects extends View {
    private float X;
    private float Y;
    private Paint myPaint;
    final String C_DIV = "DIV";
    final String C_TABLE = "Table";
    final String C_IFRAME = "iFrame";
    final String C_LIST = "List";
    Canvas canvas;
    Bitmap divimg = BitmapFactory.decodeResource(getResources(), R.drawable.div);
    Bitmap iframeimg = BitmapFactory.decodeResource(getResources(), R.drawable.iframe);
    Bitmap img = null;
    String objectname = " ";

    public Objects(Context context) {
        super(context);
        myPaint = new Paint();
    }

    public void HTMLObjects(String object) {
        Log.d(object, "see");
        if (object.equals(C_DIV)) {
            myPaint.setColor(Color.GREEN);
            img = Bitmap.createBitmap(divimg);
            objectname = "DIV";
        }
        if (object.equals(C_IFRAME)) {
            myPaint.setColor(Color.BLUE);
            img = Bitmap.createBitmap(iframeimg);
            objectname = "iFrame";
        }
    }

    public boolean onTouchEvent(MotionEvent event) {
        int action = event.getAction();
        switch (action) {
            case MotionEvent.ACTION_DOWN:
                X = (int) event.getX();
                Y = (int) event.getY();
                break;
            case MotionEvent.ACTION_MOVE:
            case MotionEvent.ACTION_UP:
            case MotionEvent.ACTION_CANCEL:
                X = (int) event.getX();
                Y = (int) event.getY();
                break;
        }
        return true;
    }

    public void onDraw(Canvas canvas) {
        if (img != null) {

            canvas.drawBitmap(img, X - 50, Y - 50, myPaint);
            canvas.drawText(objectname, X, Y - 50, myPaint);
        }
        invalidate();
    }
} 
```

这是我从活动 Workspace 中调用的一个类

```
ob.HTMLObjects((String) item.getTitle()); 
```

我正在发送按下哪个菜单的信息。

当我按下 DIV 或 iFrame 时，我不知道如何制作新的/不同的对象/位图。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T13:12:04.980

试试这些版本。我用以下列表替换`x`, `y`, `img`, `objectname`：

```
public class Objects extends View {
    private Paint myPaint;
    public final String C_DIV="DIV";
    public final String C_TABLE="Table";
    public final String C_IFRAME="iFrame";
    public final String C_LIST="List";
    private Canvas canvas;
    private Bitmap divimg= BitmapFactory.decodeResource(getResources(), R.drawable.div);
    private Bitmap iframeimg=BitmapFactory.decodeResource(getResources(), R.drawable.iframe);
    private List<Bitmap> images;
    private List<Float> xs;
    private List<Float> ys;
    private List<String> objectNames;

    public Objects(Context context) {
        super(context);
        myPaint = new Paint();
        images = new ArrayList<Bitmap>();
        xs = new ArrayList<Float>();
        ys = new ArrayList<Float>();
        objectNames = new ArrayList<String>();
    }

    public void HTMLObjects(String object){
        Log.d(object, "see");
        if (object.equals(C_DIV)) {
            myPaint.setColor(Color.GREEN);
            images.add(Bitmap.createBitmap(divimg));
            objectNames.add("DIV");
            xs.add(0F);
            ys.add(0F);
        }
        if (object.equals(C_IFRAME)){
            myPaint.setColor(Color.BLUE);
            images.add(Bitmap.createBitmap(iframeimg));
            objectNames.add("iFrame");
            xs.add(0F);
            ys.add(0F);
        }
    }
    public boolean onTouchEvent(MotionEvent event) {
        int action=event.getAction();
        if (xs.isEmpty()) {
            return true;
        }
        int pos = xs.size() - 1;
        switch(action) {
            case MotionEvent.ACTION_DOWN:
                xs.set(pos, event.getX());
                ys.set(pos, event.getY());
                break;
            case MotionEvent.ACTION_MOVE:
            case MotionEvent.ACTION_UP:
            case MotionEvent.ACTION_CANCEL:
                xs.set(pos, event.getX());
                ys.set(pos, event.getY());
                break;
        }
        return true;
    }
    public void onDraw(Canvas canvas){
        for (int i = 0; i < images.size(); i++) {
            float x = xs.get(i);
            float y = ys.get(i);
            canvas.drawBitmap(images.get(i), x-50, y-50, myPaint);
            canvas.drawText(objectNames.get(i), x, y-50, myPaint);
        }
        invalidate();
    }
} 
```

# asp.net - 在服务器被击中或在 ASP.net 中刷新会话 ID 时触发事件

> ID：13562033
> 
> 赞同：0
> 
> 时间：2012-11-26T09:36:08.190
> 
> 标签：asp.net, session-timeout

基本上我想在我的应用程序中实现会话管理，会话超时为 1 小时。也就是说，我想在会话超时前 15 分钟显示一个弹出窗口。

在我的 .NET 应用程序中，有一个主页，通过单击主页上存在的不同链接，可以从该主页打开其他子页面。现在，可以通过编写一个计时器来显示会话超时警告弹出窗口cient 端脚本代码并使用主页上的 javascipt 方法-setinterval。

但是，当用户从主页转到任何子页面/窗口并通过从该子页面从数据库中获取数据来访问服务器来刷新会话 ID 时，就会出现问题。但是主页上实现的会话超时警告计时器会显示警告弹出窗口，即使会话已被子页面上的活动刷新。由于我无法在每个 cild 页面上实现计时器，因为它是一个具有大量子页面和嵌套 chld 页面的庞大应用程序，所以我想问的是 -**我们可以在主页上触发一个事件以****在服务器时**重置会话超时计时器**被击中了**吗？

如果我们能做到，那么我的工作就完成了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T16:38:46.493

您无法收到会话清除或会话即将从服务器回发的通知。您可以从客户端实现您想要做的事情，但您需要处理 ajax 回发场景。通过监听 Sys.Application 事件，可以知道 AJAX 请求何时结束，并重启定时器（应该是 endRequest 事件）。回发到服务器应该自然刷新计时器，因为您的会话正在滑动到期，并且回发无论如何都会重置计时器。

这就是我在过去的项目中的做法。

# python - python tar文件如何将文件提取到流中

> ID：13562037
> 
> 赞同：11
> 
> 时间：2012-11-26T09:36:18.510
> 
> 标签：python, stream, tar

我正在尝试提取一个压缩文件夹，但不是直接使用`.extractall()`，我想将文件提取到流中，以便我可以自己处理流。是否可以使用它来做到这一点`tarfile`？或者有什么建议吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-26T09:46:37.783

您可以使用该方法从 tar 文件中获取每个文件作为 python`file`对象。`.extractfile()`循环`tarfile.TarFile()`实例以列出所有条目：

```
import tarfile

with tarfile.open(path) as tf:
    for entry in tf:  # list each entry one by one
        fileobj = tf.extractfile(entry)
        # fileobj is now an open file object. Use `.read()` to get the data.
        # alternatively, loop over `fileobj` to read it line by line. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-17T04:01:40.417

我无法`extractfile`在网络流式传输 tar 文件时，我做了这样的事情：

```
from backports.lzma import LZMAFile
import tarfile
some_streamed_tar = LZMAFile(requests.get('http://some.com/some.tar.xz').content)
with tarfile.open(fileobj=some_streamed_tar) as tf:
    tarfileobj.extractall(path="/tmp", members=None) 
```

并阅读它们：

```
for fn in os.listdir("/tmp"):
    with open(os.path.join(t, fn)) as f:
        print(f.read()) 
```

蟒蛇 2.7.13

# ajax - 上传文件大小检查 Grails

> ID：13562039
> 
> 赞同：0
> 
> 时间：2012-11-26T09:36:22.587
> 
> 标签：ajax, grails, file-upload

我遇到了关于在 Grails 中上传文件的问题。我想在从 Windows 资源管理器打开后检查文件大小运行时，如果任何条件失败，都会给我错误消息。

我有一个文件上传窗口，其中有 3 个文件选择选项。我想检查每三个文件不超过 5MB。当我单击浏览按钮时，我的系统资源管理器打开并选择文件。

有没有办法在使用 javascript/Ajax 调用选择文件时检查文件大小？如果文件大小超过资源管理器再次显示以选择另一个文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T04:43:49.413

[关于这个问题，有一个名为file-uploader](http://www.grails.org/plugin/file-uploader)的插件可以解决这个问题。

使用此插件，您可以在 config.groovy 中定义一些限制。这是一个例子：

```
fileuploader {
    avatar {
        maxSize = 1024 * 256 //256 kbytes
        allowedExtensions = ["jpg","jpeg","gif","png"]
        path = "/tmp/avatar/"
    }
    docs {
        maxSize = 1000 * 1024 * 4 //4 mbytes
        allowedExtensions = ["doc", "docx", "pdf", "rtf"]
        path = "/tmp/docs/"
    }
} 
```

# jquery - jQuery：如何停止传播 Ctrl + A？

> ID：13562041
> 
> 赞同：8
> 
> 时间：2012-11-26T09:36:47.647
> 
> 标签：jquery, events, selection, propagation, ctrl

我目前正在开发一个依赖于地图（通过 Leaflet.js 的 OpenStreetMap 数据）和地图上显示的标记的应用程序。

我为用户实现了*选择*，因此他可以单击标记以选择它们，然后按住 Ctrl 键单击以将标记添加到选择中。这很好用。

现在我希望用户能够通过点击来选择地图上当前的所有标记`Ctrl``A`。我用来实现此目的的代码如下所示：

```
jQuery(document).keydown(function(e) {
  if (e.ctrlKey) {
    if (e.keyCode == 65 || e.keyCode == 97) { // 'A' or 'a'
      e.stopPropagation();
      // SELECT ALL MARKERS HERE...
    }
  }
}); 
```

就同​​时触发 Ctrl 和 A 按键而言，这是有效的，选择是按照我的意愿完成的。

**我的问题：** 即使我添加了停止传播事件的行，浏览器（在 Chrome 和 Opera 上测试）*仍然*执行通常的 Ctrl+A-Selection，即除了我的标记被我在地图上的自定义选择实现选中，*整个网页被选中*。这很烦人：除了地图之外，此页面上没有可以选择的文本，所以真的没有意义 - 我想`Ctrl``A`在显示我的地图时禁用。

*PS 我尝试使用[如何在浏览器中使用 jquery 禁用 Ctrl+A（全选）中显示的代码？](https://stackoverflow.com/questions/2403748/how-can-i-disable-ctrla-select-all-using-jquery-in-a-browser)但无法让它工作。这个功能真的在 API 中吗？*

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-26T10:10:25.920

假设您的错误是您正在使用`e.stopPropagation()`它只是阻止事件的进一步冒泡（因为您的事件附加到文档 - 它是无用的）。请尝试`e.preventDefault()`：

```
jQuery(document).keydown(function(e) {
  if (e.ctrlKey) {
    if (e.keyCode == 65 || e.keyCode == 97) { // 'A' or 'a'
      e.preventDefault();
      // SELECT ALL MARKERS HERE...
    }
  }
}); 
```

[在这个演示](http://jsfiddle.net/7Qjzz/)中这对我来说很好

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-26T10:11:15.553

啊，我找到了诀窍：

```
e.preventDefault(); 
```

阻止浏览器执行任何默认操作。在上述情况下，这可以防止通常在 上触发的全选事件`Ctrl+A`。

# plugins - 带有 NPAPI 插件扩展的外部 dll 打包

> ID：13562044
> 
> 赞同：5
> 
> 时间：2012-11-26T09:36:57.477
> 
> 标签：plugins, dll, google-chrome-extension, firefox-addon, npapi

我创建了一个 NPAPI 插件。它使用另外两个 Dll。
我需要将这些 Dll 文件与 Plugin dll 一起打包为扩展。
我怎样才能做到这一点？这样我就可以将该 dll 放置到任何文件夹并注册它。

有没有办法做到这一点？

对不起，如果它是重复的。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T16:50:34.047

如果你把它打包成一个扩展，你只需把你需要的两个DLL和插件DLL放在扩展的同一个目录下。

请注意，某些浏览器的搜索路径可能难以找到这些 DLL；如果您发现这种情况，您可以尝试 DELAYLOAD 链接这些 DLL 并使用[SetDllDirectory](http://msdn.microsoft.com/ru-ru/library/windows/desktop/ms686203%28v=vs.85%29.aspx)将插件 dll 目录添加到路径中。

# asp.net-mvc - 如何在 mvc asp.net 中检查应用程序状态中的重复项

> ID：13562045
> 
> 赞同：0
> 
> 时间：2012-11-26T09:36:56.847
> 
> 标签：asp.net-mvc

如何检查应用程序状态中的重复项

我的问题场景：

我将用户名和密码存储在 application[""] 变量中。另一个用户输入我要检查每个用户的用户名密码。

我尝试了 for 循环，但很难找到计数..

你能帮我检查一下副本吗

```
 for (int j = 0; j < (int)System.Web.HttpContext.Current.Application["Userlogin"].ToString().Length - 1; j++)
                {
                    if (System.Web.HttpContext.Current.Application[i].ToString() == sKey)
                    {
                        Session["duplicateuser"] = "logout";
                        Returnmsg = "-3";
                    }
                } 
```

但它显示了应用程序的字符串长度[]

预先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T09:42:20.137

> 我将用户名和密码存储在 application[""] 变量中

哇，不要。应用程序状态在应用程序的所有用户之间共享。永远不要将用户特定的数据存储在应用程序状态中。请改用会话状态。

* * *

更新：

如果要检查并发用户访问，可以将用户集合存储到应用程序状态中，例如`IEnumerable<string>`. 然后您可以检查用户是否已经轻松登录：

```
public bool IsUserLoggedIn(string username, HttpApplicationStateBase application)
{
    var users = application["users"] as IEnumerable<string>;
    if (users == null)
    {
        users = new ConcurrentBag<string>();
        application["users"] = users;
    }

    return users.Any(u => u == username);
} 
```

# java - 为什么我们设置属性 Hibernate.Dialect？

> ID：13562046
> 
> 赞同：1
> 
> 时间：2012-11-26T09:36:59.187
> 
> 标签：java, mysql, hibernate

我的项目中有 persistence.xml 文件，并且在该文件中设置了一个属性，所以我很好奇，为什么要设置它？它能做什么？

```
<property name="hibernate.dialect" value="org.hibernate.dialect.MySQLDialect" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T09:40:39.693

虽然基本 SQL 是一个标准，但不同的数据库对标准之外的某些事物使用不同的数据类型，有不同的引用标识符的方法等。*方言*是 hibernate 抽象出这些差异的方式 - 将其视为 HQL 之间的转换层以及每个数据库的正确 SQL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T09:38:26.850

这样我们就可以利用数据库的特定功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T09:40:12.850

这是一个提示 JPA 可以利用您的数据库及其方言。JPA 可以自行发现这一点，但有时最好修复方言（例如，即使在使用 Oracle 11g 时也为 Oracle 10g 修复它）。

# android - 设置popupWinodw的背景使所有avctivies的背景变成半透明

> ID：13562047
> 
> 赞同：1
> 
> 时间：2012-11-26T09:37:00.333
> 
> 标签：android, android-layout

问题是，在我显示弹出窗口后，所有活动的背景（颜色：#fff）都变成了半透明的。当我将背景更改为其他颜色（#f0f 或其他）时，它不会变成半透明的。而且当我调试时，它也不会变得半透明。并且半透明效果会随着 alpha 值的变化而变化。前任。当我将 setAlpha(50) 更改为 setAlpha(150) 时，半透明效果会发生变化，这似乎是 popupWindow 的 contentView 的背景颜色与其他活动之间存在某种关系。

我的代码如下。

```
popup = PopWin.popupWindow(context, TestActivity.this, popid);
View contentView = popup.getContentView();
contentView.getBackground().setAlpha(50);

public static PopupWindow popupWindow(final Context context,
        final View view, int rsid) {
    LayoutInflater inflater = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View popView = inflater.inflate(rsid, null, false);
    final PopupWindow popWin = new PopupWindow(popView,
            LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT, true);

    popWin.setBackgroundDrawable(new BitmapDrawable());
    popWin.setFocusable(true);

    popWin.showAtLocation(view, Gravity.CENTER, 0, 0);
    return popWin;
} 
```

下图是半透明后的截图。（无法上传图片，抱歉！）

[http://g.hiphotos.baidu.com/zhidao/pic/item/aec379310a55b3191df0b28343a98226cffc173e.jpg](http://g.hiphotos.baidu.com/zhidao/pic/item/aec379310a55b3191df0b28343a98226cffc173e.jpg)

所有灰色/黑色区域在正确状态下都是白色（#fff）。

# android - Android中的上下文导入意外关闭

> ID：13562048
> 
> 赞同：0
> 
> 时间：2012-11-26T09:37:03.780
> 
> 标签：android, android-context

我正在尝试使用上下文传输将上下文导入此 android 文件。但是，如果我的消息包含“aakash”，则此代码会意外终止，并给出代码后显示的错误。

我该怎么办 ？

```
 public class messagebody extends BroadcastReceiver{

             Context mContext;
             public messagebody(Context context){
                   this.mContext = context;
                   Log.i(TAG, "yayyyy: " );
              }
             public messagebody(){

          }

            private static final String SMS_RECEIVED = "android.provider.Telephony.SMS_RECEIVED";
            private static final String TAG = "SMSBroadcastReceiver";

            @Override
            public void onReceive(Context context, Intent intent) {
                 Log.i(TAG, "Intent recieved: " + intent.getAction());

                    if (intent.getAction().equals(SMS_RECEIVED)) {
                        Bundle bundle = intent.getExtras();
                        if (bundle != null) {
                            Object[] pdus = (Object[])bundle.get("pdus");
                            final SmsMessage[] messages = new SmsMessage[pdus.length];
                            for (int i = 0; i < pdus.length; i++) {
                                messages[i] = SmsMessage.createFromPdu((byte[])pdus[i]);
                            }
                            if (messages.length > -1) {
                               // Toast.makeText(context, "Message recieved: " + messages[0].getMessageBody(), 7000).show();
                                if(messages[0].getMessageBody().contains("aakash"))
                                {
                                    /*AudioManager am = (AudioManager)mContext.getSystemService(Context.AUDIO_SERVICE);
                                    switch (am.getRingerMode()) {   
                                        case AudioManager.RINGER_MODE_NORMAL:   
                                            //Log.i("MyApp","NORMAL mode");
                                            am.setRingerMode(AudioManager.RINGER_MODE_VIBRATE);
                                            Toast toast2=Toast.makeText(mContext, "Vibrate", Toast.LENGTH_LONG);  
                                            toast2.show();
                                            break;                
                                        case AudioManager.RINGER_MODE_VIBRATE:   
                                            //Log.i("MyApp","VIBRATE mode");
                                            am.setRingerMode(AudioManager.RINGER_MODE_NORMAL);
                                            Toast toast1=Toast.makeText(mContext, "Normal", Toast.LENGTH_LONG);  
                                            toast1.show();
                                            break;   */
                                    Toast toast1=Toast.makeText(mContext, "Normal", Toast.LENGTH_LONG);  
                                    toast1.show();
                                    } 

                                }
                                }
                            }
                        }

    } 
```

错误如下：

```
11-26 15:03:43.150: E/AndroidRuntime(2056): FATAL EXCEPTION: main
11-26 15:03:43.150: E/AndroidRuntime(2056): java.lang.RuntimeException: Unable to start receiver com.example.messages.messagebody: java.lang.NullPointerException
11-26 15:03:43.150: E/AndroidRuntime(2056):     at android.app.ActivityThread.handleReceiver(ActivityThread.java:2236)
11-26 15:03:43.150: E/AndroidRuntime(2056):     at android.app.ActivityThread.access$1500(ActivityThread.java:130)
11-26 15:03:43.150: E/AndroidRuntime(2056):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1271)
11-26 15:03:43.150: E/AndroidRuntime(2056):     at android.os.Handler.dispatchMessage(Handler.java:99)
11-26 15:03:43.150: E/AndroidRuntime(2056):     at android.os.Looper.loop(Looper.java:137)
11-26 15:03:43.150: E/AndroidRuntime(2056):     at android.app.ActivityThread.main(ActivityThread.java:4745)
11-26 15:03:43.150: E/AndroidRuntime(2056):     at java.lang.reflect.Method.invokeNative(Native Method)
11-26 15:03:43.150: E/AndroidRuntime(2056):     at java.lang.reflect.Method.invoke(Method.java:511)
11-26 15:03:43.150: E/AndroidRuntime(2056):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
11-26 15:03:43.150: E/AndroidRuntime(2056):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
11-26 15:03:43.150: E/AndroidRuntime(2056):     at dalvik.system.NativeStart.main(Native Method)
11-26 15:03:43.150: E/AndroidRuntime(2056): Caused by: java.lang.NullPointerException
11-26 15:03:43.150: E/AndroidRuntime(2056):     at android.widget.Toast.<init>(Toast.java:92)
11-26 15:03:43.150: E/AndroidRuntime(2056):     at android.widget.Toast.makeText(Toast.java:238)
11-26 15:03:43.150: E/AndroidRuntime(2056):     at com.example.messages.messagebody.onReceive(messagebody.java:68)
11-26 15:03:43.150: E/AndroidRuntime(2056):     at android.app.ActivityThread.handleReceiver(ActivityThread.java:2229) 
```

将 mContext 更改为上下文后，新代码出现空指针异常。代码是

```
 package com.example.messages;
import com.example.messages.R;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.media.AudioManager;
import android.os.Bundle;
import android.telephony.SmsMessage;
import android.util.Log;
import android.widget.Toast;
import android.media.AudioManager;
import android.media.MediaRecorder;
import android.os.Bundle;
import android.os.Environment;
import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.Toast;

    public class messagebody extends BroadcastReceiver{

             Context mContext;
             public messagebody(Context context){
                   this.mContext = context;
                   Log.i(TAG, "yayyyy: " );
              }
             public messagebody(){

          }

            private static final String SMS_RECEIVED = "android.provider.Telephony.SMS_RECEIVED";
            private static final String TAG = "SMSBroadcastReceiver";

            @Override
            public void onReceive(Context context, Intent intent) {
                 Log.i(TAG, "Intent recieved: " + intent.getAction());

                    if (intent.getAction().equals(SMS_RECEIVED)) {
                        Bundle bundle = intent.getExtras();
                        if (bundle != null) {
                            Object[] pdus = (Object[])bundle.get("pdus");
                            final SmsMessage[] messages = new SmsMessage[pdus.length];
                            for (int i = 0; i < pdus.length; i++) {
                                messages[i] = SmsMessage.createFromPdu((byte[])pdus[i]);
                            }
                            if (messages.length > -1) {
                               // Toast.makeText(context, "Message recieved: " + messages[0].getMessageBody(), 7000).show();
                                if(messages[0].getMessageBody().contains("aakash"))
                                {
                                    Toast toast3=Toast.makeText(context, "Normal", Toast.LENGTH_LONG);  
                                    toast3.show();
                                    AudioManager am = (AudioManager)mContext.getSystemService(Context.AUDIO_SERVICE);
                                    switch (am.getRingerMode()) {   
                                        case AudioManager.RINGER_MODE_NORMAL:   
                                            //Log.i("MyApp","NORMAL mode");
                                            am.setRingerMode(AudioManager.RINGER_MODE_VIBRATE);
                                            Toast toast2=Toast.makeText(context, "Vibrate", Toast.LENGTH_LONG);  
                                            toast2.show();
                                            break;                
                                        case AudioManager.RINGER_MODE_VIBRATE:   
                                            //Log.i("MyApp","VIBRATE mode");
                                            am.setRingerMode(AudioManager.RINGER_MODE_NORMAL);
                                            Toast toast1=Toast.makeText(context, "Normal", Toast.LENGTH_LONG);  
                                            toast1.show();
                                            break;   

                                    } 

                                }
                                }
                            }
                        }
            }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T09:40:26.363

采用

```
Toast toast1=Toast.makeText(context, "Normal", Toast.LENGTH_LONG);  
 toast1.show(); 
```

代替

```
 Toast toast1=Toast.makeText(mContext, "Normal", Toast.LENGTH_LONG);  
  toast1.show(); 
```

使用当前`BroadcastReceiver` `Context`显示 `Toast`而`BroadcastReceiver`不是任何旧的活动或服务上下文

# iphone - 电子邮件签名应用程序 Iphone

> ID：13562049
> 
> 赞同：-4
> 
> 时间：2012-11-26T09:37:07.670
> 
> 标签：iphone, objective-c, xcode

我正在制作一个电子邮件签名应用程序，允许用户进行签名并使用它们与电子邮件一起发送，它们是签名名称（文本字段）、内容（文本视图）和图像（图像视图），我将它们保存在数据库中，以便如果用户从第二个视图上的表视图中选择签名名称，则预览将显示在同一视图上，就像我从表视图中选择签名 1 一样，则在预览部分中，签名图像应与签名内容一起显示在（文本视图），然后在同一个视图中，我们按下发送（按钮），预览部分的文本视图中的文本和图像将被复制到剪贴板，然后在第三个视图中，我可以将其粘贴到消息部分并发送电子邮件，是否有可能这样做，如果是的话，我该如何实现它或任何其他想法如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T09:46:06.403

我有这种发送带有图像和消息的电子邮件的方法..只需添加.h文件并在您的项目中`MFMessageComposeViewControllerDelegate`添加框架`MessageUI.framework`

```
-(void)sendMailWithImage:(NSString *)message Image:(UIImage *)image{
    if ([MFMailComposeViewController canSendMail]) 
    {
        UIImage *tempImageSave=image;
        MFMailComposeViewController *mailComposeViewController = [[MFMailComposeViewController alloc] init];
        NSString *mailBody = message;

        NSData *imageData = UIImagePNGRepresentation(tempImageSave);
        [mailComposeViewController addAttachmentData:imageData mimeType:@"image/png" fileName:@"Testing"];
        [mailComposeViewController setMessageBody:mailBody isHTML:NO];
        mailComposeViewController.mailComposeDelegate = self;
        [self presentViewController:mailComposeViewController animated:YES completion:nil];
    } 
    else 
    {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"e-Mail Sending Alert"
                                                        message:@"You can't send a mail"
                                                       delegate:nil
                                              cancelButtonTitle:@"OK" 
                                              otherButtonTitles:nil];
        [alert show];
        [alert release];
    }

} 
```

这个波纹管方法是委托方法`MFMessageComposeViewControllerDelegate`

```
#pragma mark - MFMessage Delegate

- (void)messageComposeViewController:(MFMessageComposeViewController *)controller didFinishWithResult:(MessageComposeResult)result
{
    [self dismissViewControllerAnimated:YES completion:nil];
}

- (void)mailComposeController:(MFMailComposeViewController*)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError*)error
{
    if (result == MFMailComposeResultSent) 
    {
        NSLog(@"\n\n Email Sent");
    }
    [self dismissViewControllerAnimated:YES completion:nil];
} 
```

我希望这可以帮助你...

# c - C中多文件项目中的动态内存分配

> ID：13562052
> 
> 赞同：0
> 
> 时间：2012-11-26T09:37:13.863
> 
> 标签：c, dynamic-memory-allocation

我被要求实现`string.h`图书馆的模拟。但是，我不允许使用`'\0'`我的库内部来结束我的字符串；这就是为什么我应该在我的程序中使用字符串结构。我在`mystring.h`文件中有这个：

```
#include <stdio.h>
#define MAXSTRLEN 100 // Defining the maximum lenght of the string as being 100

typedef struct scell *mystring_t;
mystring_t makemystring (char cs[]); // This function stores a given string into the mystring structure 
```

我在`mystring.c`文件中有这个：

```
#include <stdlib.h>
#include "mystring.h" // including the header file of mystring library

struct scell {
    char *string;
    int length;
};

mystring_t makemystring (char cs[]){ //Storing a string into the structure

    int i = 0;
    mystring_t ns;

    ns->string=(char*)calloc(MAXSTRLEN ,sizeof(char));

    // printf ("I allocated memory for the string");

    while (cs[i] != '\0')
    {
        printf ("\nI entered into the while\n");
        ns->string[i] = cs[i];
        printf ("I inserted\n");
        i++;
        printf ("I incremented the count\n");
    }
    ns->length=i; // storing the length of the string into the structure
    printf ("%d\n", ns->length);
    printf ("refreshed the length\n");
    printf ("%d", ns->length);
    return ns;
} 
```

我在 `main.c`文件中有这个：

```
#include "mystring.h"
#include <stdlib.h>
int main () {

int result;
mystring_t S1;
mystring_t S2;
    // create two strings
S2 = makemystring("Bye");
printf("I got out of the makemystring function\n");
S1 = makemystring("Hi"); 
```

这些`printf()`调用只是调试语句。在我看来，函数 makemystring 工作正常，但我在返回级别发生了崩溃。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T09:41:59.197

`ns`当它被取消引用时是一个未初始化的指针：

```
mystring_t ns;

ns->string = (char*)calloc(MAXSTRLEN ,sizeof(char)); 
```

作为`mystring_t`一个`typedef`for `struct cell*`。使用前分配内存`ns`：

```
mystring_t ns = malloc(sizeof(*ns)); /* No cast on return value required. */
if (ns)
{
    ns->string = calloc(MAXSTRLEN, 1);
    ns->length = 0;
} 
```

*FWIW，这是我不喜欢在`typedef`s 中隐藏指针的原因之一，因为它在使用时并不明显。*

在循环`ns->string`条件下保护越界。`while`

# java - 是否有内置函数用于在 java 中舍入双精度

> ID：13562056
> 
> 赞同：1
> 
> 时间：2012-11-26T09:37:46.727
> 
> 标签：java

我想在 java 中将一个 double 舍入到特定数量的小数位。是否有这样做的特定函数，该函数可以将双精度数舍入为整数吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T09:38:57.897

有`Math.round()`将返回舍入`long`值。

您还可以将`double`值强制转换为 a`long`或 an `int`。

如果您需要将双精度值格式化为特定的小数位数，请使用`DecimalFormat`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T09:50:52.377

`DateFormat df = new DateFormat("#.##");`

上面的语句可以将你的 double 值带入特定的格式。

`double d = Math.round(43.475);`

上面的语句可以四舍五入你的 double 值。

# android - Asynctask期间的Android Indexoutofbounds异常

> ID：13562058
> 
> 赞同：0
> 
> 时间：2012-11-26T09:37:56.163
> 
> 标签：android, android-asynctask, media-player, indexoutofboundsexception

我不明白为什么在我的音乐游戏中的 10 首歌曲之一的复制过程中收到 IndexOutOfBound 异常。我认为即使使用等待计算完成的 asynctask.get() ，他也会以某种方式跳过使用 10 首歌曲信息 (dieciCanzoni) 填充列表。

你能帮我吗？

谢谢！

日志猫：

```
11-26 10:29:49.441: E/AndroidRuntime(7509): FATAL EXCEPTION: main
11-26 10:29:49.441: E/AndroidRuntime(7509): java.lang.IndexOutOfBoundsException: Invalid index 1, size is 1
11-26 10:29:49.441: E/AndroidRuntime(7509):     at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:251)
11-26 10:29:49.441: E/AndroidRuntime(7509):     at java.util.ArrayList.get(ArrayList.java:304)
11-26 10:29:49.441: E/AndroidRuntime(7509):     at com.guessthesetunes.Canzone.onCompletion(Canzone.java:539)
11-26 10:29:49.441: E/AndroidRuntime(7509):     at android.media.MediaPlayer$EventHandler.handleMessage(MediaPlayer.java:1528)
11-26 10:29:49.441: E/AndroidRuntime(7509):     at android.os.Handler.dispatchMessage(Handler.java:99)
11-26 10:29:49.441: E/AndroidRuntime(7509):     at android.os.Looper.loop(Looper.java:137)
11-26 10:29:49.441: E/AndroidRuntime(7509):     at android.app.ActivityThread.main(ActivityThread.java:4575)
11-26 10:29:49.441: E/AndroidRuntime(7509):     at java.lang.reflect.Method.invokeNative(Native Method)
11-26 10:29:49.441: E/AndroidRuntime(7509):     at java.lang.reflect.Method.invoke(Method.java:511)
11-26 10:29:49.441: E/AndroidRuntime(7509):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:789)
11-26 10:29:49.441: E/AndroidRuntime(7509):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:556)
11-26 10:29:49.441: E/AndroidRuntime(7509):     at dalvik.system.NativeStart.main(Native Method) 
```

我在这一行得到错误，它调用了一个初始化媒体播放器的方法： PlayStream(dieciCanzoni.get(i).get(0));

我正在使用的 AsyncTask 的代码：

```
class Json extends AsyncTask<String, String, String>
{
List<String> canzoni = new ArrayList<String>(5);
ProgressDialog pDialog;
int[] arrayGenere;
Context context;

public Json(int[] arrayGenere,Context context) 
{
    this.arrayGenere = arrayGenere;
    this.context = context;
}

@Override
protected void onPreExecute()
{
    super.onPreExecute();
    pDialog = new ProgressDialog(context);
    pDialog.setMessage("Preparazione Round...");
    pDialog.setIndeterminate(false);
    pDialog.setCancelable(false);
    pDialog.show();
}

protected String doInBackground(String... params) 
{
    try
    {       
        int randomLookupId;
        JSONObject obj;                         
        JSONArray jsonArray;    

        for(int i = 0; i < 10; i++)
        {
            canzoni = new ArrayList<String>();

            obj = getJSONObject(scegliClassifica(arrayGenere));
            jsonArray = obj.getJSONArray("resultIds");

            randomLookupId = new Random().nextInt(jsonArray.length());  

            JSONObject finalObj = getJSONObject("http://itunes.apple.com/lookup?id="+jsonArray.getString(randomLookupId)); 
            JSONArray finalJsonArray = finalObj.getJSONArray("results");    

            JSONObject returnObj = finalJsonArray.getJSONObject(0);

            canzoni.add(returnObj.getString("previewUrl"));
            canzoni.add(returnObj.getString("artistName"));
            canzoni.add(returnObj.getString("trackName"));
            canzoni.add(returnObj.getString("artistViewUrl"));
            canzoni.add(returnObj.getString("artworkUrl100"));

            Canzone.dieciCanzoni.add(i, new ArrayList<String>(canzoni));
        }
    }   
    catch (JSONException ignored)
    {
        ignored.getCause();
    }
    catch (MalformedURLException e) 
    {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    catch (IOException e) 
    {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    return null;
}

private String scegliClassifica(int[] arrayGenere)
{
    int randomArrayPosition = new Random().nextInt(arrayGenere.length);
    return "http://itunes.apple.com/WebObjects/MZStoreServices.woa/ws/charts?cc=us&g="+arrayGenere[randomArrayPosition]+"&name=Songs&limit=300";
}

@Override
protected void onPostExecute(String stringa)
{
    pDialog.dismiss();
}

JSONObject getJSONObject(String url) throws IOException, MalformedURLException, JSONException
{

    HttpURLConnection conn = (HttpURLConnection) new URL(url).openConnection();

    InputStream in = conn.getInputStream();

    try
    {
        StringBuilder sb = new StringBuilder();
        BufferedReader r = new BufferedReader(new InputStreamReader(new DoneHandlerInputStream(in)));
        for (String line = r.readLine(); line != null; line = r.readLine())
        {
            sb.append(line);
        }
        return new JSONObject(sb.toString());
    }
    finally
    {
        in.close();
    }
}
} 
```

这是对 Asynctask 的调用：

```
try {
        new Json(arrayGenere,Canzone.this).execute().get(15000,TimeUnit.MILLISECONDS);
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (ExecutionException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (TimeoutException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

编辑：

把JsonArray的大小改成JsonArray.lenght()-1后，也不管用！！！例如，在一种情况下，Json 类只填充了 List 的 2 个元素，但我不明白为什么！

你们能帮我吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T10:18:45.623

请记住，数组的第一个元素是索引 0。因此，长度将比最高索引高 1，因此您需要`randomLookupId`在使用它之前从您的索引中减去 1。

（考虑一个长度为 1 的数组，你应该总是随机选择索引 0）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T09:55:59.490

在你`doInBackground`的方法中，你怎么知道你在“法定规模”之内？

您的整个方法建立在错误/硬编码的假设之上......

# php - PHP：使用 foreach 在多维数组中显示特定数据

> ID：13562061
> 
> 赞同：0
> 
> 时间：2012-11-26T09:38:03.797
> 
> 标签：php, mysql

我有一个包含从 mysql 表中查询的数据的数组，我想使用 foreach 在数组中显示特定数据（特定列数据）。

```
+------+-------+------+-----+
| id   | name  | sex  | age |
+------+-------+------+-----+
|    1 | tom   | m    |  18 |
|    2 | jane  | f    |  32 |
|    4 | Doyle | m    |  25 |
+------+-------+------+-----+ 
```

假设数组名称是 $candidates，我需要从 $candidates 显示的只是列“名称”中的名称......

我已经使用 while 循环完美地完成了这项工作，但我不想再次运行数据库查询，因为数据已经存在于数组 $candidates 中

以下是代码：

```
1\. Class function performing the query

       <?php

    class pubCourses {
            function getPubRegCand($org_id, $c_id){
            //fetch the list of registered candidates for this course
            $query_reg_cand = @mysql_query("select * from public_reg_cand where org_id='".$org_id."'");
            $cand = array();
            $cand = @mysql_fetch_assoc($query_reg_cand);

            return $cand;
                    }
          }
        ?>

2\. Calling the class function 

    <?php
        $obj = new pubCourses();
        $candidates = array();
        if(isset($_GET['c_id']) && isset($_GET['org_id'])){
            $candidates = $obj->getPubRegCand($_GET['org_id'], $_GET['c_id']);
        }
    ?>

3\. Foreach statement to display the candidates names

      <?php

        foreach($candidates as $id=>$cands){
      ?>
     <tr>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td class="bold">Participant&#039;s Name: <?php echo ucwords($cands['name']); ?></td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
     </tr>
     <?php
        }
     ?> 
```

上面的 foreach 语句没有显示我需要的“名称”，而是显示第一行的第一个字符，即 1、t、m、1...

请帮我解决这个问题...谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T09:44:12.763

Why not do a regular `while` loop with your query?

```
$mysqli = new mysqli("localhost", "user", "password", "db_name");
$query = "SELECT name FROM your_table";

if ($result = $mysqli->query($query)) {
    while ($row = $result->fetch_assoc()) {
        echo <<<HTML 
<tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td class="bold">Participant&#039;s Name: {$row['name']}</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
</tr>
HTML;
        //echo $row['name'];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T10:21:49.160

因为您要从数据库返回一行...

利用

```
 while($row=mysql_fetch_array($query_reg_cand)) {
   $cand[] = $row;
 } 
```

代替

```
$cand = @mysql_fetch_assoc($query_reg_cand); 
```

这应该可以......不需要使用`$id=>$cands`（除非你想要钥匙）。你可以做..

```
 foreach($candidates as $cands){... 
```

最后

```
Use of mysql extension is discouraged. Instead, the MySQLi or PDO_MySQL extension should be used 
```

# c# - 设置加载指示器的位置

> ID：13562062
> 
> 赞同：0
> 
> 时间：2012-11-26T09:38:07.720
> 
> 标签：c#, asp.net, html, css, loading

我定义了一个Loading-Indicator，并且位置有问题。我的问题是
在通过不同分辨率或屏幕尺寸的不同机器看到加载指示器时定位加载指示器。我该如何解决！

这是我的代码：

```
<body class="loadPage">
<form id="form1" runat="server">
  <asp:ScriptManager ID="ScriptManager1" runat="server">
  </asp:ScriptManager>

  <div id="loadingLogo">
     <asp:Image ID="Image1" runat="server" ImageUrl="Images/Logo.png" />
     <hr class="line"/>
  </div>

  <div id="loadingIndicator" >
     <syncfusion:WaitingPopup ID="WaitingPopup1" runat="server" CloseTimeOut="2000"    
                 ClientObjectID="Popup1" PositionParent="Screen"
                 Width="250px" Height="50px" Alignment="MiddleRight"  
                 InitiallyShown="True" DisableOnShowElementID="loadingIndicator">
     </syncfusion:WaitingPopup>
  </div>

</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T10:30:55.723

你不写你想要它定位的地方，但我建议使用 position: absolute; 或位置：固定；见[http://www.w3schools.com/cssref/pr_class_position.asp](http://www.w3schools.com/cssref/pr_class_position.asp)

如果你想让它居中，css可能是这样的

```
#loadingIndicator {
position: absolute;
width: 200px;
left: 50%;
margin-left: -100px;
top: 10px;
} 
```

Margin-left 应该是 loadginIndicator 宽度的负一半，以使其居中。

# java - 为什么这里使用 final 关键字？

> ID：13562065
> 
> 赞同：3
> 
> 时间：2012-11-26T09:38:22.180
> 
> 标签：java

我从“Java。如何编程”P. & H. Deitel 一书中学习`final`java

```
private static final Random randomNumbers = new Random(); 
```

据我了解变量中的 final 声明，该变量是一种常量，这意味着初始化时您不能再更改它。但是上面的对象（变量）在程序中使用了两次以返回随机数

```
int die1 = 1 + randomNumbers.nextInt( 6 );
int die2 = 1 + randomNumbers.nextInt( 6 ); 
```

它返回 2 个不同的（随机）值。我想我在这里失去了一些东西。程序运行良好，但我不明白`final`在对象声明中使用的目的是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-26T09:41:00.390

`final`意味着*变量*不能在这里改变它的值——事实上它不能也不会。

这里`randomNumbers`变量的值是对 的一个实例的*引用*`Random`。它指的是同一个实例，即使该实例每次调用时都会产生（可能）不同的数字`nextInt`。

区分不改变值的变量和它所指的不改变内部状态的对象很重要。作为另一个例子，你可以有这样的东西：

```
public class Person {
    private final List<Person> friends = new ArrayList<Person>();

    public void addFriend(Person friend) {
        friends.add(friend);
    }

    ...
} 
```

这里我们只有一个列表——你永远不能改变`friends`来引用不同的对象——但我们仍然可以改变变量引用的列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T09:44:19.953

除了乔恩所说的。final 的目的是避免在应用程序生命周期的不同阶段有两个由 randomNumber 变量引用的 Random 类实例。最明显的目的是避免不必要的对象创建。然而，使它成为最终的最重要（也是合乎逻辑的）原因是保持随机数的公平性很高。我的意思是，当您在 randomNumbers 上连续调用 nextInt 时，返回的结果必须是唯一的、随机的并且以最高概率与先前的结果不同。假设您没有将其设为最终结果，那么与之前的 Random 实例的结果相比，稍后阶段的另一个 Random 实例可能会开始给出重复值。为了避免这种情况，有必要使 randomNumbers 最终

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-26T09:44:50.167

一句话，当您将**引用类型或原始类型设为 final 时，它是不可变的。**即，您不能再更改该值。

> 据我了解变量均值中的最终声明，该变量是一种常量，

这只是对了一半，如果您将变量标记为 final 并不一定意味着它是常量。**用static final**标记变量使其成为常量。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-26T09:46:08.107

**-**将变量设为 final 将表明该变量的值不能更改。

`private static final Random randomNumbers = new Random();`

**-**在上面的行中，`randomNumbers`是一个类型的**对象引用变量**`Random`，当它被标记`final`时，它将**始终被锁定到该随机类型的对象上。**

**-**这里要注意的非常重要的一点是，随机对象没有被锁定，但**对象引用变量** `randomNumbers`被**特定的随机对象锁定。**

**笔记：**

`final variable`：它的值不能改变

`final method`: 不能被覆盖

`final class`: 不能扩展

`final Parameter`：它的值不能改变，它从调用者的参数接收到

`final Object Reference Variable`：它不能引用任何其他对象，除了它当前引用的对象

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-26T10:05:23.833

Final 意味着您无法更改引用变量，一旦它被初始化

```
For example

final Object obj = new Object();  //initialized 

now that doesnot mean that u cant call methods on obj

obj.someOperation1() //allowed
obj.someOperation2() //allowed
obj.anyOperationAnyTime() //allowed

But u cant assign new object to referance obj
final Object obj = new Object();  //initialized 
obj =  new Object() //now allowed , you cant make obj to point to new referance 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-26T09:43:33.267

randomNumbers 的类型是随机的。那就是 randomNumbers 是一个最终的对象。不能将任何其他 Random 对象分配给它。而且您只是两次调用该 randomNumbers 对象的方法。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-26T09:59:06.647

将 Random 引用 (randomNumbers) 设置为 final 意味着您不能为该特定引用分配另一个值。

也就是说，以下两个语句都将在编译时检查/报告。

```
a. randomNumbers = new Random(); 

b. Random someOtherRandomNumbers = new Random(); 
   randomNumbers = someOtherRandomNumbers; 
```

# sql-server-2008 - 如何将数据保存到临时表中？

> ID：13562068
> 
> 赞同：0
> 
> 时间：2012-11-26T09:38:30.107
> 
> 标签：sql-server-2008, tsql

```
Select TOP 1  @TaxId= REFQualifierValue
                From  OPENXML (@XmlHandleTemp,'NewDataSet/CMSQualifier',2)        
                with (
                     [identityColumn] [varchar] (10) ,FileClaimNo  int ,EntityIDCode Varchar(20),EntityTypeQualifier  Varchar(20),PreviousEntityTypeQualifier varchar(10),Qualifier varchar(2),LineItemNo int ,REFQualifier Varchar(20),REFQualifierValue varchar(50)
                    )CmsQualifier
               where CmsQualifier.FileClaimNo=@FileClaimNo 
```

上面的查询在一个过程中重复了很多次。所以为避免这种情况，我想将这些信息保存在临时表或表变量中。任何人都可以告诉我我该怎么做。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T09:57:08.343

根据您的要求声明临时表变量的结构，下面是临时表中有两列的示例：

```
declare @tableVariable Table([index] integer,TaxId varchar(50)) 
declare  @TaxId as varchar(50); 
```

在变量@TaxId 中设置值，例如

```
 Select TOP 1 @TaxId=[column_name] from [table_name] 
```

您现在可以将您的值插入到具有整数类型索引的临时表中

```
insert into @tableVariable([index],  TaxId) values (1, @TaxId) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T11:30:54.160

你试过这个吗？

```
insert into #temp_Tune ([identityColumn],FileClaimNo   ,EntityIDCode ,EntityTypeQualifier       ,PreviousEntityTypeQualifier ,
Qualifier ,LineItemNo  ,REFQualifier ,REFQualifierValue )
Select TOP 1  
[identityColumn],FileClaimNo   ,EntityIDCode ,EntityTypeQualifier    ,PreviousEntityTypeQualifier ,
Qualifier ,LineItemNo  ,REFQualifier ,REFQualifierValue 
            From  OPENXML (@XmlHandleTemp,'NewDataSet/CMSQualifier',2)        
            with (
                 [identityColumn] [varchar] (10) ,FileClaimNo  int ,EntityIDCode     Varchar(20),EntityTypeQualifier  Varchar(20),PreviousEntityTypeQualifier varchar(10),Qualifier    varchar(2),LineItemNo int ,REFQualifier Varchar(20),REFQualifierValue varchar(50)
                )CmsQualifier
            where CmsQualifier.FileClaimNo=@FileClaimNo 
```

# python - 对 ReportLab 的 XValueAxis 的第一个和最后一个值强制打勾

> ID：13562073
> 
> 赞同：2
> 
> 时间：2012-11-26T09:38:52.733
> 
> 标签：python, reportlab

对于 ReportLab 绘制的图表，我如何对 an 的第一个和最后一个值强制打勾`XValueAxis`？

因为`NormalDateXValueAxis`有`forceFirstDate`and `forceEndDate`，但我没有找到类似的东西`XValueAxis`。

# splunk - Splunk 搜索模式

> ID：13562074
> 
> 赞同：0
> 
> 时间：2012-11-26T09:38:52.977
> 
> 标签：splunk

我想在模式下搜索，结果应该只显示与给定模式匹配的行，并且该行必须是唯一的 -

引起：java.io.NotSerializableException：

我怎样才能做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T17:12:57.800

以下是编写搜索查询以获得所需内容的一种方法。

```
... "Caused by: java.io.NotSerializableException:" | uniq 
```

[您可以在Splunk 的搜索命令参考](http://docs.splunk.com/Documentation/Splunk/latest/SearchReference/SearchCheatsheet)中获取更多信息

# php - SQL Server 运行触发器后台

> ID：13562079
> 
> 赞同：0
> 
> 时间：2012-11-26T09:39:05.257
> 
> 标签：php, sql, sql-server, tsql

在 PHP、SQL Server、

PHP 将插入缺少的记录，对于每个我都调用一个触发器。

触发器需要将近 20 分钟才能完成触发过程，所以我的 PHP 脚本每次插入都要等待 20 分钟，那么如何在后台运行触发过程并继续 PHP 插入过程，而不是每次插入等待 20 分钟。

PHP 或 SQL Server 中的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T00:33:00.473

要解决此问题，您需要修复触发器需要 20 分钟才能执行的原因 - 它可能正在执行表扫描而不是索引扫描来检查我猜测的是否存在，或者使用游标。

但是，要回答您的问题，请创建第二个表（没有触发器），在其中插入行，然后有一个 SQL 作业每 x 分钟运行一次并将数据从该表中取出，然后插入到您的主表中慢触发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-12T09:31:42.633

我认为您可以执行任务。该任务是异步的（我认为） [https://docs.microsoft.com/en-us/sql/integration-services/control-flow/execute-sql-task?view=sql-server-ver15](https://docs.microsoft.com/en-us/sql/integration-services/control-flow/execute-sql-task?view=sql-server-ver15)

# asp.net - 微小的 MCE 组合框奇怪的位置

> ID：13562083
> 
> 赞同：0
> 
> 时间：2012-11-26T09:39:35.273
> 
> 标签：asp.net, css, ajax, jquery, tinymce

我使用了 Tiny MCE，但出了点问题，组合框列表出现在奇怪的位置。这是链接

[http://103.imagebam.com/download/0q5oXQZf7-JsgaCeNjjkew/22248/222470402/Blur%20Image.png](http://103.imagebam.com/download/0q5oXQZf7-JsgaCeNjjkew/22248/222470402/Blur%20Image.png)

我怎么能解决它？它是一个错误吗？

我使用最新的 Tiny MCE(3.5.8)。

# javascript - 滑块插件使用单个图像而不是几个

> ID：13562092
> 
> 赞同：0
> 
> 时间：2012-11-26T09:40:08.247
> 
> 标签：javascript, jquery

我想在我的网站中实现以下滑块：[http ://simplewpthemes.com/demo/theme/?wptheme=MahasoliTribune](http://simplewpthemes.com/demo/theme/?wptheme=MahasoliTribune)

现在，如您所见，滑块由 5 个图像组成。我想使用单个图像，但在显示非悬停状态时图像应分为 5 个部分，以便最左侧的“图像”应聚焦在图像的左侧，第二个“图像”应显示图像的下一部分，但这是一张图像的全部部分，几乎就像一个精灵效果，其中预览（非悬停最小化状态）基本上是单个原始大图像的特定部分。

谁能帮我解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T10:16:33.240

你为什么不把你的大图像分成 5 ？您可能需要一个自定义功能来移动您的图像，而不是为多图像目的而设计和构建的滑块。

编辑：这里的要求是滑动一个图像的自定义 js 函数：

[http://jsfiddle.net/ktNxN/](http://jsfiddle.net/ktNxN/)（点击按钮）

大多数魔法都发生在这里：

```
var slideView = $('.bigImage');
var slideWidth = parseInt(slideView.css('width'));
var slideStep = slideWidth/5; 
```

第二次编辑：我现在才意识到你想要达到的目标。您不能尝试为每个面板放置具有不同背景位置的 div（背景将是您的大图像）

去做这个 ：

HTML

```
 <img src="transparent_png_1x1.png"> 
```

CSS

```
 img {
 /* to be sure the png covers the whole area */
 width:100%;height:100%;
 /* put your big image as the css background */
 background-image:url(bigImage.jpg);
 }

 img:nth-of-type(1) {background-position:0px 0px;}
 img:nth-of-type(2) {background-position:100px 0px;} 
```

..等等，需要一些适应来满足你的需要

# delphi - Delphi XE2 中的 Crystal Reports 2011

> ID：13562095
> 
> 赞同：0
> 
> 时间：2012-11-26T09:40:16.090
> 
> 标签：delphi, crystal-reports, delphi-xe2

我需要找到将 Crystal Reports（2011 版）集成到 Delphi XE2 中的任何解决方案。

不幸的是，我无法使用 Google 找到任何提示...

有人对我有线索吗？

问候费边

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T07:52:30.450

在与 SAP 通话后，无法使用 ActiveX 在 Delphi 中交互 CR 2011... 1 可能正在切换到 .net ..

CR XI 可与 ActiveX 组件一起使用...

这就是我发现的全部=）

# php - PHP 与多服务器

> ID：13562103
> 
> 赞同：2
> 
> 时间：2012-11-26T09:40:33.837
> 
> 标签：php, multiserver

我想制作一个页面，用于将我的一些本地记录上传到 Web 服务器。

从`Table Structure`本地和 Web 服务器是相同的。

我的问题是，如何连接到两个服务器？

```
<?php
$localCon = mysql_connect("localhost", "root", "");
if (!$localCon) {
    die('Could not connect: ' . mysql_error());
}
mysql_select_db("[table]", $localCon);

$serverCon = mysql_connect("mysql", "[username]", "[password]");
if (!$serverCon) {
    die('Could not connect: ' . mysql_error());
}
mysql_select_db("[table]", $serverCon);

$result = mysql_query("SELECT * FROM [table]");

while ($row = mysql_fetch_array($result)) {
    echo $row['[coloumn]'];
    echo "<br />";
}

mysql_close($localCon);
mysql_close($serverCon);
?> 
```

我的本地服务器和 Web 服务器都出现错误。

或者我有其他方法可以将本地记录上传到网络吗？

```
This is the error msg:
Warning: mysql_connect() [function.mysql-connect]: php_network_getaddresses: getaddrinfo failed: No such host is known. in [addres]
Warning: mysql_connect() [function.mysql-connect]: [2002] php_network_getaddresses: getaddrinfo failed: No such host is known. (trying to connect via tcp://mysql:3306) in [addres]
Warning: mysql_connect() [function.mysql-connect]: php_network_getaddresses: getaddrinfo failed: No such host is known. in [address]
Could not connect: 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T09:44:45.023

您可以连接到更多数据库，但您需要查询中的句柄。

```
$result = mysql_query("SELECT * FROM [table]", $serverCon); 
```

否则，您不知道从哪里进行查询并且它不起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T01:24:14.670

错误很明显：除非您`mysql`的`hosts`文件中有一个条目，否则`mysql`它不是有效的网络地址。

您需要将远程服务器的地址指定为`mysql_connect`调用中的第一个参数。

请注意，这些`mysql_*`函数已弃用，建议使用准备好的语句切换到 PDO 或 mysqli。

# java - NetBeans 不能生成 Java Doc？

> ID：13562104
> 
> 赞同：1
> 
> 时间：2012-11-26T09:40:33.543
> 
> 标签：java, netbeans, javadoc, illegalargumentexception

我不知道为什么，但它已经有一段时间了。

我似乎无法为使用 NetBeans 7.2 的大多数应用程序生成 Java Doc（与 7.1 有同样的问题）。我根本无法弄清楚为什么会出现此错误：

```
java.lang.IllegalArgumentException: Error decoding percent encoded characters 
```

我知道错误是什么意思（英语duh），但我不知道它为什么这么说。据我在文档中看到的，不应该有任何“百分比编码字符”，除非我完全错过了这意味着什么。

这是整个代码（只有一个文件，它是一个接口，所以它很短）：

```
package access;

import exception.DataException;
import java.util.List;
import table.Row;

/**
 *
 * @author Vipar
 */
public interface DataAccessor {
    /**
     * Reads data from a table.
     * 
     * @param table The table.
     * 
     * @param columns The columns to read, or null to read 
     * all the columns in the table.
     * 
     * @param selectionRow A set of filter columns and values 
     * use to subset the rows, or null to 
     * read all the rows in the table.
     * 
     * @param sortColumns The columns to sort, or null to read 
     * without sorting.
     * 
     * @return The list of rows.
     */
    List read(String table,
            String[] columns,
            Row selectionRow,
            String[] sortColumns) throws DataException;

    /**
     * Inserts data into a table.
     * 
     * @param table The table.
     * @param rows The rows to insert
     */
    void insert(String table, List rows) throws DataException;

    /**
     * Updates data in a table.
     * 
     * @param table The table.
     * 
     * @param selectionRow A set of filter columns and values 
     * used to subset the rows, or null to 
     * update all of the rows in the table.
     * 
     * @param updateRow A set of update columns and values.
     */
    void update(String table,
            Row selectionRow,
            Row updateRow) throws DataException;

    /**
     * Deletes data from a table.
     * 
     * @param table The table.
     * 
     * @param selectionRow A set of filter columns and values 
     * used to subset the rows, or null to 
     * delete all of the rows in the table.
     */
    void delete(String table,
            Row selectionRow) throws DataException;
} 
```

Row 和 DataException 没有任何文档，因为当前两者都是空的。我只是想测试文档的外观。

我使用 Java 1.7

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T16:25:43.597

我测试了您的课程-> javadoc 照常生成。

请检查这些设置 ( **`contextmenu of project -> Properties`**)：

*   **`Sources -> Encoding: UTF-8`**: 你这里有什么？
*   **`Build -> Documenting`**: 你有设置一些*Javadoc 选项*吗？如果您在此文本字段中有设置，请删除它们并重试。顺便提一句。您在*Documenting*中的设置是什么？
*   由于此异常没有[问题](http://netbeans.org/community/issues.html)，请随意打开一个。

# database - Oracle Lite 帮助在 Windows Mobile 上进行开发

> ID：13562105
> 
> 赞同：0
> 
> 时间：2012-11-26T09:40:35.650
> 
> 标签：database, oracle, oracle11g

任何人都可以帮助我将 Oracle Lite 用于 Windows Mobile 6.5 吗？我什至无法让自己开始。我试图阅读它提供的文档，但它只向我展示了 Oracle Lite 的功能，而且 Oracle 文档中甚至没有 What-to-do 或 How-to-do 部分。它可能有样本，但我如何使用这些样本？

我已经在我的 PC 上安装了 Oracle Lite，但我什至不确定我是否正确安装了它。因为我不知道下一步该做什么。我以前是使用 MySQL 和 SQL Server 的中级开发人员。任何教程链接都可以，或者一本书，或者一步一步的答案将不胜感激。同样，Oracle 文档非常难以阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T07:04:00.750

请注意，Oracle Lite 并未得到积极开发。

对于 Lite 客户端数据库，推荐的替代产品是 Berkeley DB [http://www.oracle.com/technetwork/products/berkeleydb/overview/index-085366.html](http://www.oracle.com/technetwork/products/berkeleydb/overview/index-085366.html)

对于同步和设备管理，推荐的替代产品是 Database Mobile Server [http://www.oracle.com/technetwork/products/database-mobile-server/overview/index.html](http://www.oracle.com/technetwork/products/database-mobile-server/overview/index.html)

Eric Jensen，Oracle 产品经理

# python - Google App Engine 运行代码耗时超过 60 秒

> ID：13562108
> 
> 赞同：-2
> 
> 时间：2012-11-26T09:40:41.403
> 
> 标签：python, google-app-engine

好的，我想是时候放弃了，我一直在尝试使用 deferred 函数的几乎所有东西来尝试运行我的代码，这需要超过 60 秒的时间。我尝试了无法正常工作的 TaskQueues，然后我尝试了延迟函数，这似乎是正确的方法。我可以让一个函数运行良好，但是当我想知道它何时完成时，通过调用 MainHandler 的 self.response.out.write 并在屏幕上写出一些东西。我得到 PickleError。我尝试创建一个新的 python 文件并导入它，所以我不在 MainHandler 中执行它，我尝试在使用 deferred 之前创建一个新类。没有任何效果。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T11:47:18.023

我认为您应该查看 AppEngine [Backends](https://developers.google.com/appengine/docs/python/backends/)：

> 后端是特殊的 App Engine 实例，它们没有请求期限、更高的内存和 CPU 限制以及跨请求的持久状态。

希望它有帮助。

# javascript - 如何使用jquery从具有相同类名的输入中获取最大值

> ID：13562109
> 
> 赞同：-1
> 
> 时间：2012-11-26T09:40:40.143
> 
> 标签：javascript, jquery

在我的代码中，我需要使用 jQuery 获取类名“numberoffield”的隐藏输入字段的最大值。任何人都可以帮助我。

```
 $('.addTime1').click(function(){
   var $i = 0;
   $('<div class="fields"><input type="hidden" value="'+$i+'" id="hidden'+$i+'" 
   class="numberoffield" /></div>').slideDown('slow').appendTo('.inputs');
   $i++;
 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T09:47:06.073

这应该得到每个`input`元素的值 class `'.fields'`，并将最高值保存到`output`;

```
var output = 0;
$(".fields > input").each(
    function(){
        if(this.val() > output){
            output = this.val();
        }
    }
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T09:47:29.787

在您对您的 OP 发表评论后，您可以：

```
function getValue(){
    return $('#hidden').val()
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T09:43:06.667

```
$(".numberoffield").attr("maxlength") 
```

# plsql - WSDL-XSD 到 PL\SQL

> ID：13562120
> 
> 赞同：0
> 
> 时间：2012-11-26T09:41:36.690
> 
> 标签：plsql, xsd, wsdl, xsd2code, wsdl2code

我的问题是：我们有一个需要从 PL\SQL 调用的 Web 服务。我想要一个类似于这个[http://www.liquid-technologies.com/XmlDataBinding/Xml-Schema-To-VB.aspx的工具](http://www.liquid-technologies.com/XmlDataBinding/Xml-Schema-To-VB.aspx), 仅适用于 PL\SQL。在 java 中，您可以传递 WSDL 文件，API 将生成在客户端实现该 Web 服务所需的类和方法。PL\SQL 有什么类似的吗？我想将 WSDL url 传递给一个工具，并获取在客户端实现该 Web 服务所需的 PL\SQL 过程和功能，在我的情况下，它使用 Oracle 表单作为他的主要系统。换句话说，我想要一种简单的方法来创建客户端代码来使用我的 Web 服务，而无需完成将 WSDL 转换为 Soap 的所有工作，然后将 soap 重新创建为文本并通过 utl_http 将其发送到服务器然后渲染soap响应并获得所需的值。即，如果我将 WSDL 描述的对象转换为 PL\SQL 对象。然后我可以像这样创建在服务器-客户端之间传输的 XML：

```
person.setname('Test');    //this should be PL\SQL code;
person.setaddress('Somewhere');    //this should be PL\SQL code;
person.setage(25);    //this should be PL\SQL code;
xml.send_as_xml(person);   //this should be PL\SQL code; 
```

person 是我想从客户端发送到服务器的对象。人和对象骨架是由我正在寻找的工具创建的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T07:32:19.233

经过大量研究，我发现最好用 JAVA 编写代码并将 java 类加载到数据库中。JDeveloper 是一个很好的资源来帮助我做到这一点。

# linux - 配置使用：如何使用字符串定义编写 CFLAGS 定义

> ID：13562123
> 
> 赞同：1
> 
> 时间：2012-11-26T09:41:41.970
> 
> 标签：linux, gcc, configure

我正在尝试编译 fontconfig 并重新定义值 FONTCONFIG_FILE 允许更改 fonts.conf 路径。可以通过使用 -DFONTCONFIG_FILE 定义 CFLAGS，但我找不到正确的编写方法。事实上，我尝试了很多组合，但没有一个有效。CFLAGS= -DFONTCONFIG_FILE='"/path_to/fonts.conf"'，我尝试在每个引号之前添加'\'，但我从来没有得到任何效果：gcc -DFONTCONFIG_FILE='"/path_to/fonts.conf"'

有人可以帮助我如何在 CFLAGS 中给出这个定义以供编译器处理和使用吗？BR。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T13:10:43.287

谢谢您的回答。我在 shell 中提供 CFLAGS，因为我用 CFLAGS env var 调用配置。似乎 fontconfig 尊重用户 CFLAGS 看到我以后可以看到 cflags。但我无法得到正确的语法，据我所知，-DFONTCONFIG_FILE='"/path_to/fonts.conf"'。在文件 src/fccfg.c 的第 1796 行中，您可以看到我们可以将此定义设置为在 c 函数中使用。我成功获得的最好结果是 -DFONTCONFIG_FILE='/pathto/fonts.conf' 和 CFLAGS+=-DFONTCONFIG_FILE="'"/pathto/fonts.conf"'"

# sql-server-2008 - IDENTITY INSERT ON/OFF 对整个数据库

> ID：13562126
> 
> 赞同：1
> 
> 时间：2012-11-26T09:41:56.420
> 
> 标签：sql-server-2008

我有一个需要运行的脚本，它的值需要在列中存在空值的任何地方插入。为此，我需要在整个数据库上设置 IDENTITY_INSERT OFF。在脚本结束时，需要再次打开 IDENTITY_INSERT。是否有可用于在整个数据库上设置 IDENTITY_INSERT ON/OFF 的语句，还是只能单独执行每个表？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T14:51:26.467

尚不清楚您要做什么，但正如[文档](http://msdn.microsoft.com/en-us/library/ms188059%28v=sql.100%29.aspx)所述，会话中只有一个表可以使用`IDENTITY_INSERT`，因此您不能同时在所有表上禁用它。您的脚本将不得不逐个表格，将其关闭，仅为该表格进行插入，然后再次将其打开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-19T01:29:47.813

在显示表列表的导入/导出向导上，单击标题左侧大小的复选框，以便系统选择所有表。单击 Edit Mappings，您将有机会为所有选定的表选择 Identity Insert。

这是为我节省了大量时间的链接：

[https://dba.stackexchange.com/questions/190119/how-to-set-enable-identity-insert-for-all-the-tables-at-once-during-importing](https://dba.stackexchange.com/questions/190119/how-to-set-enable-identity-insert-for-all-the-tables-at-once-during-importing)

# iphone - 使滚动条在 uiscrollview 中始终可见

> ID：13562134
> 
> 赞同：3
> 
> 时间：2012-11-26T09:42:13.837
> 
> 标签：iphone, objective-c, ios, uiscrollview

> **可能重复：**
> [UIScrollView - 显示滚动条](https://stackoverflow.com/questions/1888647/uiscrollview-showing-the-scroll-bar)

如何使`scrollbars`始终可见`uiscrollview`。我用`flashscrollindicators`它没有任何意义。

我使用此代码启用滚动指示器

```
hscroll.showsHorizontalScrollIndicator=YES; 
```

但是只有在我开始滚动`uiscrollview`.

我想让滚动条在 uiscrollview 中始终可见

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T09:48:30.827

您可以闪烁它们，但没有使它们始终可见的选项：

```
[myScrollView flashScrollIndicators]; 
```

尽管[问题 1888647中描述了一种可能的解决方法](https://stackoverflow.com/questions/1888647/uiscrollview-showing-the-scroll-bar)

# objective-c - 在 Core Animation 中为圆形箭头遮罩的长度设置动画

> ID：13562137
> 
> 赞同：4
> 
> 时间：2012-11-26T09:42:22.587
> 
> 标签：objective-c, ios, core-animation, caanimation

我使用 CAShapeLayer 和遮罩创建了一个圆形动画。这是我的代码：

```
- (void) maskAnimation{

    animationCompletionBlock theBlock;
    imageView.hidden = FALSE;//Show the image view

    CAShapeLayer *maskLayer = [CAShapeLayer layer];

    CGFloat maskHeight = imageView.layer.bounds.size.height;
    CGFloat maskWidth = imageView.layer.bounds.size.width;

    CGPoint centerPoint;
    centerPoint = CGPointMake( maskWidth/2, maskHeight/2);

    //Make the radius of our arc large enough to reach into the corners of the image view.
    CGFloat radius = sqrtf(maskWidth * maskWidth + maskHeight * maskHeight)/2;

    //Don't fill the path, but stroke it in black.
    maskLayer.fillColor = [[UIColor clearColor] CGColor];
    maskLayer.strokeColor = [[UIColor blackColor] CGColor];

    maskLayer.lineWidth = 60;

    CGMutablePathRef arcPath = CGPathCreateMutable();

    //Move to the starting point of the arc so there is no initial line connecting to the arc
    CGPathMoveToPoint(arcPath, nil, centerPoint.x, centerPoint.y-radius/2);

    //Create an arc at 1/2 our circle radius, with a line thickess of the full circle radius
    CGPathAddArc(arcPath,
                 nil,
                 centerPoint.x,
                 centerPoint.y,
                 radius/2,
                 3*M_PI/2,
                 -M_PI/2,
                 NO);

    maskLayer.path = arcPath;//[aPath CGPath];//arcPath;

    //Start with an empty mask path (draw 0% of the arc)
    maskLayer.strokeEnd = 0.0;

    CFRelease(arcPath);

    //Install the mask layer into out image view's layer.
    imageView.layer.mask = maskLayer;

    //Set our mask layer's frame to the parent layer's bounds.
    imageView.layer.mask.frame = imageView.layer.bounds;

    //Create an animation that increases the stroke length to 1, then reverses it back to zero.
    CABasicAnimation *swipe = [CABasicAnimation animationWithKeyPath:@"strokeEnd"];
    swipe.duration = 5;
    swipe.delegate = self;
    [swipe setValue: theBlock forKey: kAnimationCompletionBlock];
    swipe.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear];
    swipe.fillMode = kCAFillModeForwards;
    swipe.removedOnCompletion = NO;
    swipe.autoreverses = YES;
    swipe.toValue = [NSNumber numberWithFloat: 1.0];

    [maskLayer addAnimation: swipe forKey: @"strokeEnd"];

} 
```

这是我的背景图片： ![在此处输入图像描述](../Images/816f4bfa9218d0a63346b82881a0b463.png)

这是我运行动画时的样子： ![在此处输入图像描述](../Images/e768711855feb1f34fd5e4e1387a367a.png)

但是我想要的，箭头不见了怎么加这个？ ![在此处输入图像描述](../Images/012d938ca16a4f20e948836a57e510f6.png)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-27T06:45:11.877

由于[我的另一个答案（动画两个级别的蒙版）](https://stackoverflow.com/a/13574911/77567)有一些图形故障，我决定尝试在每一帧动画上重绘路径。所以首先让我们编写一个类似于 的`CALayer`子类`CAShapeLayer`，但只画一个箭头。我最初尝试将其设为 的子类`CAShapeLayer`，但我无法让 Core Animation 正确地为其设置动画。

无论如何，这是我们要实现的接口：

```
@interface ArrowLayer : CALayer

@property (nonatomic) CGFloat thickness;
@property (nonatomic) CGFloat startRadians;
@property (nonatomic) CGFloat lengthRadians;
@property (nonatomic) CGFloat headLengthRadians;

@property (nonatomic, strong) UIColor *fillColor;
@property (nonatomic, strong) UIColor *strokeColor;
@property (nonatomic) CGFloat lineWidth;
@property (nonatomic) CGLineJoin lineJoin;

@end 
```

该`startRadians`属性是尾巴末端的位置（以弧度为单位）。`lengthRadians`是从尾部末端到箭头尖端的长度（以弧度为单位）。`headLengthRadians`是箭头的长度（以弧度为单位）。

我们还重现了 的一些属性`CAShapeLayer`。我们不需要该`lineCap`属性，因为我们总是绘制一条闭合路径。

那么，我们如何实现这个疯狂的东西呢？碰巧，[`CALayer`将负责存储您要在子类上定义的任何旧属性](https://developer.apple.com/Library/ios/#documentation/Cocoa/Conceptual/CoreAnimation_guide/Articles/KVCAdditions.html)。所以首先，我们只是告诉编译器不要担心合成属性：

```
@implementation ArrowLayer

@dynamic thickness;
@dynamic startRadians;
@dynamic lengthRadians;
@dynamic headLengthRadians;
@dynamic fillColor;
@dynamic strokeColor;
@dynamic lineWidth;
@dynamic lineJoin; 
```

但是我们需要告诉 Core Animation，如果这些属性中的任何一个发生变化，我们需要重新绘制图层。为此，我们需要一个属性名称列表。我们将使用 Objective-C 运行时来获取一个列表，因此我们不必重新键入属性名称。我们需要`#import <objc/runtime.h>`在文件的顶部，然后我们可以得到这样的列表：

```
+ (NSSet *)customPropertyKeys {
    static NSMutableSet *set;
    static dispatch_once_t once;
    dispatch_once(&once, ^{
        unsigned int count;
        objc_property_t *properties = class_copyPropertyList(self, &count);
        set = [[NSMutableSet alloc] initWithCapacity:count];
        for (int i = 0; i < count; ++i) {
            [set addObject:@(property_getName(properties[i]))];
        }
        free(properties);
    });
    return set;
} 
```

现在我们可以编写 Core Animation 用来找出哪些属性需要导致重绘的方法：

```
+ (BOOL)needsDisplayForKey:(NSString *)key {
    return [[self customPropertyKeys] containsObject:key] || [super needsDisplayForKey:key];
} 
```

事实证明，Core Animation 会在动画的每一帧中复制我们的图层。当 Core Animation 复制时，我们需要确保复制所有这些属性：

```
- (id)initWithLayer:(id)layer {
    if (self = [super initWithLayer:layer]) {
        for (NSString *key in [self.class customPropertyKeys]) {
            [self setValue:[layer valueForKey:key] forKey:key];
        }
    }
    return self;
} 
```

我们还需要告诉 Core Animation，如果图层的边界发生变化，我们需要重绘：

```
- (BOOL)needsDisplayOnBoundsChange {
    return YES;
} 
```

最后，我们可以深入了解绘制箭头的细节。首先，我们将图形上下文的原点更改为图层边界的中心。然后我们将构建概述箭头的路径（现在以原点为中心）。最后，我们将根据需要填充和/或描边路径。

```
- (void)drawInContext:(CGContextRef)gc {
    [self moveOriginToCenterInContext:gc];
    [self addArrowToPathInContext:gc];
    [self drawPathOfContext:gc];
} 
```

将原点移动到边界的中心很简单：

```
- (void)moveOriginToCenterInContext:(CGContextRef)gc {
    CGRect bounds = self.bounds;
    CGContextTranslateCTM(gc, CGRectGetMidX(bounds), CGRectGetMidY(bounds));
} 
```

构建箭头路径并非易事。首先，我们需要得到尾部开始的径向位置，尾部结束和箭头开始的径向位置，以及箭头尖端的径向位置。我们将使用辅助方法来计算这三个径向位​​置：

```
- (void)addArrowToPathInContext:(CGContextRef)gc {
    CGFloat startRadians;
    CGFloat headRadians;
    CGFloat tipRadians;
    [self getStartRadians:&startRadians headRadians:&headRadians tipRadians:&tipRadians]; 
```

然后我们需要算出箭头内外圆弧的半径，以及尖端的半径：

```
 CGFloat thickness = self.thickness;

    CGFloat outerRadius = self.bounds.size.width / 2;
    CGFloat tipRadius = outerRadius - thickness / 2;
    CGFloat innerRadius = outerRadius - thickness; 
```

我们还需要知道我们是在顺时针还是逆时针方向绘制外圆弧：

```
 BOOL outerArcIsClockwise = tipRadians > startRadians; 
```

内弧将以相反的方向绘制。

最后，我们可以构建路径。我们移动到箭头的尖端，然后添加两条弧线。该`CGPathAddArc`调用会自动添加一条从路径当前点到圆弧起点的直线，因此我们不需要自己添加任何直线：

```
 CGContextMoveToPoint(gc, tipRadius * cosf(tipRadians), tipRadius * sinf(tipRadians));
    CGContextAddArc(gc, 0, 0, outerRadius, headRadians, startRadians, outerArcIsClockwise);
    CGContextAddArc(gc, 0, 0, innerRadius, startRadians, headRadians, !outerArcIsClockwise);
    CGContextClosePath(gc);
} 
```

现在让我们弄清楚如何计算这三个径向位​​置。这将是微不足道的，除非我们希望在头部长度大于总长度时保持优雅，通过将头部长度剪裁到总长度。我们还想让总长度为负值以沿相反方向绘制箭头。我们将从开始位置、总长度和头部长度开始。我们将使用一个帮助器将头部长度剪辑为不大于总长度：

```
- (void)getStartRadians:(CGFloat *)startRadiansOut headRadians:(CGFloat *)headRadiansOut tipRadians:(CGFloat *)tipRadiansOut {
    *startRadiansOut = self.startRadians;
    CGFloat lengthRadians = self.lengthRadians;
    CGFloat headLengthRadians = [self clippedHeadLengthRadians]; 
```

接下来我们计算尾部与箭头相交的径向位置。我们这样做很小心，所以如果我们剪裁了头部长度，我们就会准确地计算出起始位置。这很重要，因此当我们`CGPathAddArc`用两个位置调用时，它不会由于浮点舍入而添加意外的弧。

```
 // Compute headRadians carefully so it is exactly equal to startRadians if the head length was clipped.
    *headRadiansOut = *startRadiansOut + (lengthRadians - headLengthRadians); 
```

最后我们计算箭头尖端的径向位置：

```
 *tipRadiansOut = *startRadiansOut + lengthRadians;
} 
```

我们需要编写剪辑头部长度的助手。它还需要确保头部长度与总长度具有相同的符号，因此上面的计算可以正常工作：

```
- (CGFloat)clippedHeadLengthRadians {
    CGFloat lengthRadians = self.lengthRadians;
    CGFloat headLengthRadians = copysignf(self.headLengthRadians, lengthRadians);

    if (fabsf(headLengthRadians) > fabsf(lengthRadians)) {
        headLengthRadians = lengthRadians;
    }
    return headLengthRadians;
} 
```

要在图形上下文中绘制路径，我们需要根据我们的属性设置上下文的填充和描边参数，然后调用`CGContextDrawPath`：

```
- (void)drawPathOfContext:(CGContextRef)gc {
    CGPathDrawingMode mode = 0;
    [self setFillPropertiesOfContext:gc andUpdateMode:&mode];
    [self setStrokePropertiesOfContext:gc andUpdateMode:&mode];

    CGContextDrawPath(gc, mode);
} 
```

如果给定填充颜色，我们将填充路径：

```
- (void)setFillPropertiesOfContext:(CGContextRef)gc andUpdateMode:(CGPathDrawingMode *)modeInOut {
    UIColor *fillColor = self.fillColor;
    if (fillColor) {
        *modeInOut |= kCGPathFill;
        CGContextSetFillColorWithColor(gc, fillColor.CGColor);
    }
} 
```

如果给定描边颜色和线宽，我们会描边路径：

```
- (void)setStrokePropertiesOfContext:(CGContextRef)gc andUpdateMode:(CGPathDrawingMode *)modeInOut {
    UIColor *strokeColor = self.strokeColor;
    CGFloat lineWidth = self.lineWidth;
    if (strokeColor && lineWidth > 0) {
        *modeInOut |= kCGPathStroke;
        CGContextSetStrokeColorWithColor(gc, strokeColor.CGColor);
        CGContextSetLineWidth(gc, lineWidth);
        CGContextSetLineJoin(gc, self.lineJoin);
    }
} 
```

结束！

```
@end 
```

所以现在我们可以回到视图控制器并使用一个`ArrowLayer`作为图像视图的掩码：

```
- (void)setUpMask {
    arrowLayer = [ArrowLayer layer];
    arrowLayer.frame = imageView.bounds;
    arrowLayer.thickness = 60;
    arrowLayer.startRadians = -M_PI_2;
    arrowLayer.lengthRadians = 0;
    arrowLayer.headLengthRadians = M_PI_2 / 8;
    arrowLayer.fillColor = [UIColor whiteColor];
    imageView.layer.mask = arrowLayer;
} 
```

我们可以将`lengthRadians`属性从 0 设置为 2 π：

```
- (IBAction)goButtonWasTapped:(UIButton *)goButton {
    goButton.hidden = YES;
    [CATransaction begin]; {
        [CATransaction setAnimationDuration:2];
        [CATransaction setCompletionBlock:^{
            goButton.hidden = NO;
        }];

        CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:@"lengthRadians"];
        animation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear];
        animation.autoreverses = YES;
        animation.fromValue = @0.0f;
        animation.toValue = @((CGFloat)(2.0f * M_PI));
        [arrowLayer addAnimation:animation forKey:animation.keyPath];
    } [CATransaction commit];
} 
```

我们得到一个无故障的动画：

![没有故障的箭头动画](../Images/6865823fb9d1dc423d17882725c4e3ab.png)

我使用 Core Animation 工具在运行 iOS 6.0.1 的 iPhone 4S 上对此进行了分析。它似乎每秒获得 40-50 帧。你的旅费可能会改变。我尝试打开该`drawsAsynchronously`属性（iOS 6 中的新功能），但没有任何区别。

我已经上传了这个答案中的代码作为[便于复制的要点](https://gist.github.com/4152776)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-26T23:22:57.317

### 更新

有关没有故障的解决方案，[请参阅我的其他答案。](https://stackoverflow.com/a/13578767/77567)

### 原来的

这是一个有趣的小问题。我不认为我们可以仅使用 Core Animation 完美地解决它，但我们可以做得很好。

我们应该在视图布局时设置遮罩，所以我们只需要在图像视图第一次出现或改变大小时进行设置。所以让我们从`viewDidLayoutSubviews`：

```
- (void)viewDidLayoutSubviews {
    [super viewDidLayoutSubviews];
    [self setUpMask];
}

- (void)setUpMask {
    arrowLayer = [self arrowLayerWithFrame:imageView.bounds];
    imageView.layer.mask = arrowLayer;
} 
```

这里，`arrowLayer`是一个实例变量，所以我可以为图层设置动画。

要实际创建箭头形层，我需要一些常量：

```
static CGFloat const kThickness = 60.0f;
static CGFloat const kTipRadians = M_PI_2 / 8;
static CGFloat const kStartRadians = -M_PI_2;

static CGFloat const kEndRadians = kStartRadians + 2 * M_PI;
static CGFloat const kTipStartRadians = kEndRadians - kTipRadians; 
```

现在我可以创建图层了。由于没有“箭头形”线端盖，我必须制作一条勾勒出整个路径的路径，包括尖尖：

```
- (CAShapeLayer *)arrowLayerWithFrame:(CGRect)frame {
    CGRect bounds = (CGRect){ CGPointZero, frame.size };
    CGPoint center = CGPointMake(CGRectGetMidX(bounds), CGRectGetMidY(bounds));
    CGFloat outerRadius = bounds.size.width / 2;
    CGFloat innerRadius = outerRadius - kThickness;
    CGFloat pointRadius = outerRadius - kThickness / 2;

    UIBezierPath *path = [UIBezierPath bezierPath];
    [path addArcWithCenter:center radius:outerRadius startAngle:kStartRadians endAngle:kTipStartRadians clockwise:YES];
    [path addLineToPoint:CGPointMake(center.x + pointRadius * cosf(kEndRadians), center.y + pointRadius * sinf(kEndRadians))];
    [path addArcWithCenter:center radius:innerRadius startAngle:kTipStartRadians endAngle:kStartRadians clockwise:NO];
    [path closePath];

    CAShapeLayer *layer = [CAShapeLayer layer];
    layer.frame = frame;
    layer.path = path.CGPath;
    layer.fillColor = [UIColor whiteColor].CGColor;
    layer.strokeColor = nil;
    return layer;
} 
```

如果我们这样做，它看起来像这样：

![全箭头](../Images/f0ec729413667c4cca591049f7250597.png)

现在，我们想让箭头四处走动，所以我们对遮罩应用旋转动画：

```
- (IBAction)goButtonWasTapped:(UIButton *)goButton {
    goButton.enabled = NO;
    [CATransaction begin]; {
        [CATransaction setAnimationDuration:2];
        [CATransaction setCompletionBlock:^{
            goButton.enabled = YES;
        }];

        CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:@"transform.rotation"];
        animation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear];
        animation.autoreverses = YES;
        animation.fromValue = 0;
        animation.toValue = @(2 * M_PI);
        [arrowLayer addAnimation:animation forKey:animation.keyPath];

    } [CATransaction commit];
} 
```

当我们点击 Go 按钮时，它看起来像这样：

![旋转未剪辑的箭头](../Images/d33293762f33a141fa4d4c96d453eaa2.png)

当然，这是不对的。我们需要剪掉箭头的尾巴。为此，我们需要对蒙版应用蒙版。我们不能直接应用它（我试过）。相反，我们需要一个额外的层来充当图像视图的蒙版。层次结构如下所示：

```
Image view layer
  Mask layer (just a generic `CALayer` set as the image view layer's mask)
      Arrow layer (a `CAShapeLayer` as a regular sublayer of the mask layer)
          Ring layer (a `CAShapeLayer` set as the mask of the arrow layer) 
```

新的环层将就像您最初尝试绘制蒙版一样：单笔划 ARC 段。我们将通过重写来设置层次结构`setUpMask`：

```
- (void)setUpMask {
    CALayer *layer = [CALayer layer];
    layer.frame = imageView.bounds;
    imageView.layer.mask = layer;
    arrowLayer = [self arrowLayerWithFrame:layer.bounds];
    [layer addSublayer:arrowLayer];
    ringLayer = [self ringLayerWithFrame:arrowLayer.bounds];
    arrowLayer.mask = ringLayer;
    return;
} 
```

我们现在有了另一个 ivar，`ringLayer`因为我们也需要对其进行动画处理。`arrowLayerWithFrame:`方法不变。下面是我们如何创建环层：

```
- (CAShapeLayer *)ringLayerWithFrame:(CGRect)frame {
    CGRect bounds = (CGRect){ CGPointZero, frame.size };
    CGPoint center = CGPointMake(CGRectGetMidX(bounds), CGRectGetMidY(bounds));
    CGFloat radius = (bounds.size.width - kThickness) / 2;

    CAShapeLayer *layer = [CAShapeLayer layer];
    layer.frame = frame;
    layer.path = [UIBezierPath bezierPathWithArcCenter:center radius:radius startAngle:kStartRadians endAngle:kEndRadians clockwise:YES].CGPath;
    layer.fillColor = nil;
    layer.strokeColor = [UIColor whiteColor].CGColor;
    layer.lineWidth = kThickness + 2; // +2 to avoid extra anti-aliasing
    layer.strokeStart = 1;
    return layer;
} 
```

请注意，我们将 设置`strokeStart`为 1，而不是将 设置`strokeEnd`为 0。笔划末端位于箭头的尖端，并且我们始终希望尖端可见，因此我们不理会它。

最后，我们重写`goButtonWasTapped`为环形层的`strokeStart`动画（除了动画箭头层的旋转）：

```
- (IBAction)goButtonWasTapped:(UIButton *)goButton {
    goButton.hidden = YES;
    [CATransaction begin]; {
        [CATransaction setAnimationDuration:2];
        [CATransaction setCompletionBlock:^{
            goButton.hidden = NO;
        }];

        CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:@"transform.rotation"];
        animation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear];
        animation.autoreverses = YES;
        animation.fromValue = 0;
        animation.toValue = @(2 * M_PI);
        [arrowLayer addAnimation:animation forKey:animation.keyPath];

        animation.keyPath = @"strokeStart";
        animation.fromValue = @1;
        animation.toValue = @0;
        [ringLayer addAnimation:animation forKey:animation.keyPath];

    } [CATransaction commit];
} 
```

最终结果如下所示：

![旋转剪裁箭头](../Images/b550a277aa99f906848d7a0ca05a073b.png)

它仍然不完美。尾部有一点摆动，有时你会在那里看到一列蓝色像素。在尖端，您有时还会听到一条白线的耳语。我认为这是由于核心动画在内部表示弧的方式（作为三次贝塞尔样条曲线）。它不能完美地测量 沿路径的距离`strokeStart`，因此它是近似值，有时该近似值偏离了足够大的程度以泄漏一些像素。您可以通过更改`kEndRadians`为解决提示问题：

```
static CGFloat const kEndRadians = kStartRadians + 2 * M_PI - 0.01; 
```

`strokeStart`您可以通过调整动画端点来消除尾部的蓝色像素：

```
 animation.keyPath = @"strokeStart";
        animation.fromValue = @1.01f;
        animation.toValue = @0.01f;
        [ringLayer addAnimation:animation forKey:animation.keyPath]; 
```

但你仍然会看到尾巴摆动：

![带有调整的旋转剪辑箭头](../Images/62f8caf7508f614f55e5021528cdca56.png)

如果您想做得更好，您可以尝试在每一帧上实际重新创建箭头形状。我不知道这会有多快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T21:49:28.683

不幸的是，路径绘图中没有选项可以像您描述的那样具有尖线帽（选项可使用`CAShapeLayer`'`lineCap`属性获得，而不是您需要的选项）。

您必须自己绘制路径边界并填充它，而不是依赖笔划的宽度。这意味着 3 条线和 2 条弧线，这应该是易于管理的，尽管不像您尝试做的那样简单。

# mysql - 如何 LEFT JOIN，创建日期范围？

> ID：13562144
> 
> 赞同：0
> 
> 时间：2012-11-26T09:42:57.933
> 
> 标签：mysql

我有这个查询

```
SELECT userId, orgQuery.timeUnit, 
  @SUM := @SUM + orgQuery.orderValue AS sum, 
  @COUNT := @COUNT + 1 AS count, 
  @AVG := @SUM / @COUNT AS avg
    FROM (
    SELECT userid, orderValue,  
      DATE_FORMAT(`acceptDate`, '%Y%M') AS timeUnit
FROM `agreements` 
    WHERE userId = 4 
    AND acceptDate > 2000-00-00 
   GROUP BY timeUnit
)
AS orgQuery, 
  (SELECT @COUNT := 0, @SUM := 0,@AVG :=0) 
 AS extra GROUP BY timeUnit 
```

输出：

```
userId  timeUnit    sum count   avg
4         201001    6000    1   6000.0000
4         201003    12000   2   6000.0000
4         201004    19500   3   6500.0000 
```

但正如您所看到的，某些日期之间存在差距，我希望输出是一个连续的范围，例如：

```
userId  timeUnit    sum count   avg
4         201001    6000    1   6000.0000
4         201002    0       2   3000.0000
4         201003    12000   3   6000.0000
4         201004    19500   4   4875.0000 
```

此查询

```
(SELECT DATE_FORMAT(`acceptDate`, '%Y%M') AS timeUnit FROM `agreements` GROUP BY timeUnit ) 
```

输出完整的日期范围，但是当我尝试 LEFT JOIN 两个查询时，计数和平均值都搞砸了。我怎样才能得到我想要的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T10:50:30.257

假设您在 2012 年 2 月的协议表中缺少一个条目，那么最好有一个包含简单日期的表。

```
CREATE TABLE dates(`date` date primary key);

DROP PROCEDURE IF EXISTS insertDates;
DELIMITER $$
CREATE PROCEDURE insertDates()
BEGIN
SET @start_date = '2010-01-01';
WHILE (@start_date <= '2010-12-31') DO
INSERT INTO dates VALUES (@start_date);
SET @start_date:=DATE_ADD(@start_date, INTERVAL 1 DAY);
END WHILE;
END $$
DELIMITER ;

CALL insertDates(); 
```

根据您的需要调整日期范围。

然后你可以像下面这样编写你的查询。我简化了一点，因为我认为不需要您的变量或子查询。

```
SELECT userId, DATE_FORMAT(dates.`date`, '%Y%M') AS timeUnit, 
  SUM(orderValue), 
  COUNT(orderValue),
  AVG(orderValue)
FROM 
dates LEFT JOIN
`agreements` ON dates.date = agreements.acceptDate
  WHERE userId = 4 
  AND acceptDate > '2000-00-00'
GROUP BY userId, timeUnit 
```

**更新：**

```
SELECT userId, orgQuery.timeUnit, 
  @SUM := @SUM + orgQuery.orderValue AS sum, 
  @COUNT := @COUNT + 1 AS count, 
  @AVG := @SUM / @COUNT AS avg
    FROM (
    SELECT userid, orderValue,  
      DATE_FORMAT(dates.`date`, '%Y%M') AS timeUnit
FROM dates LEFT JOIN
`agreements` ON dates.date = agreements.acceptDate
    WHERE userId = 4 
    AND acceptDate > '2000-00-00' 
   GROUP BY timeUnit
)
AS orgQuery, 
  (SELECT @COUNT := 0, @SUM := 0,@AVG :=0) 
 AS extra GROUP BY timeUnit 
```

# hadoop - 记录阅读器和记录边界

> ID：13562146
> 
> 赞同：4
> 
> 时间：2012-11-26T09:43:06.213
> 
> 标签：hadoop, mapreduce

假设我有一个输入文件，并且在 HDFS 中为此文件创建了三个块。假设我有三个数据节点，每个数据节点都存储一个块。如果我有 3 个输入拆分，则 3 个映射器将并行运行以处理各个数据节点的本地数据。每个映射器使用输入格式和记录读取器根据键值对获取输入。此场景使用 TextInputFormat，其中记录是文件中的完整文本行。

这里的问题是如果在第一个块的末尾有记录中断会发生什么。

1）Hadoop在这个场景中是如何读取完整记录的？

2）数据节点1是否联系数据节点2以获取完整记录？

3) 如果数据节点 2 开始处理数据并在第一行识别出不完整的记录，会发生什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T01:09:26.053

1.  Hadoop 将继续读取第一个块的末尾，直到到达 EOL 字符或 EOF。
2.  该数据节点在数据复制之外不相互通信（当由名称节点指示时）。HDFS 客户端将从 node1 然后 node2 读取数据
3.  一些例子来澄清
    *   如果您有一个跨越 300MB 文件且块大小为 128MB 的单行记录 - 映射器 2 和 3 将从文件的给定拆分偏移量（分别为 128MB 和 256MB）开始读取。他们都将向前跳过尝试查找下一个 EOL 字符并从该点开始记录。在此示例中，两个映射器实际上将处理 0 条记录。
    *   一个 300MB 文件，有两行 150MB 长，128MB 块大小 - 映射器 1 将处理第一行，在块 2 中查找 EOL 字符。映射器 2 将从偏移量 128MB（块 2）开始并向前扫描以查找 EOL 字符在偏移 150MB 处。它将向前扫描并找到块 3 之后的 EOF 并处理此数据。Mapper 3 将从偏移量 256MB（块 3）开始，并在遇到 EOL 字符之前向前扫描到 EOF，因此处理 0 条记录
    *   一个 300MB 的文件，有 6 行，每行 50MB 长：
        *   映射器 1 - 偏移量 0 -> 128MB，第 1 行 (0->50)、2 (50->100)、3 (100->150)
        *   映射器 2 - 偏移 128 MB -> 256 MB，第 4 行 (150->200)、5 (200->250)、6 (250->300)
        *   映射器 3 - 偏移 256 MB -> 300 MB，0 行

希望有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T13:45:40.280

1.  Hadoop 将对节点 2 进行远程读取以获取其余记录
2.  是的
3.  据我了解，节点 2 将忽略不完整的记录

如果您有“Hadoop：权威指南”，请查看第 246 页（最新版本），其中讨论了这个确切的问题（虽然很简短，但很遗憾）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-27T16:05:34.480

从 LineRecordReader.java 的 hadoop 源代码构造函数：我找到了一些评论：

```
// If this is not the first split, we always throw away first record
// because we always (except the last split) read one extra line in
// next() method.
if (start != 0) {
  start += in.readLine(new Text(), 0, maxBytesToConsume(start));
}
this.pos = start; 
```

由此我相信（未确认）hadoop 将为每个拆分读取一个额外的行（在当前拆分结束时，在下一个拆分中读取下一行），如果不是第一次拆分，第一行将被丢弃。以免线路记录丢失和不完整

# javascript - 无法在 jquery onclick 事件中通过 Firefox 中的 javascript 提交

> ID：13562148
> 
> 赞同：0
> 
> 时间：2012-11-26T09:43:08.947
> 
> 标签：javascript, jquery, firefox, dom, submit

在 jquery onclick 事件中，我修改了 dom，然后提交它在 Firefox 中不起作用，但在 Chrome 和 IE 中运行良好。

```
 function test(){
    $('#b2').remove();
    var form = document.getElementById("123");
    form.submit();
}

$(function() {
    $('#b1').on('click', test);
});​ 
```

这里有最小的测试用例[http://jsfiddle.net/Tjtjv/](http://jsfiddle.net/Tjtjv/) 点击按钮测试它应该加载页面[http://jsfiddle.net](http://jsfiddle.net)

我怎样才能让它在 Firefox 中像在 Chrome 和 IE 中一样工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T09:51:58.180

我已经像这样修改了你的小提琴，它适用于 FF。

检查[这个小提琴](http://jsfiddle.net/BuddhiP/Tjtjv/7)

```
function test(){
    $('#bsub').remove();
    var $form = $("#123");
    $form.submit();
    console.log('form submitted');
}

$(function() {
    $('#b1').on('click', test);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T09:52:32.383

`Onclick`通过在按钮事件中调用函数解决了这个问题。

```
 <form id="123" action="http://jsfiddle.net/" >
     <div id="b2" >
     <button id="b1" onclick="test()">test</button>
     </div>
 </form> 
```

[演示](http://jsfiddle.net/Tjtjv/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T09:58:07.817

为什么要使用按钮删除该区域？如果您不希望您的用户不再提交表单，您应该禁用该按钮：

```
$("#b1").attr("disabled", "disabled"); // instead of $("#b2").remove() 
```

# php - php utf8 编码

> ID：13562153
> 
> 赞同：0
> 
> 时间：2012-11-26T09:43:31.853
> 
> 标签：php, encoding

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-26T09:48:44.753

用这个

```
<?php
 $headers   = array();
 $headers[] = "MIME-Version: 1.0";
 $headers[] = "Content-type: text/plain; charset=iso-8859-1";
 $headers[] = "From: Sender Name <sender@domain.com>";
 $headers[] = "Bcc: JJ Chong <bcc@domain2.com>";
 $headers[] = "Reply-To: Recipient Name <receiver@domain3.com>";
 $headers[] = "Subject: {$subject}";
 $headers[] = "X-Mailer: PHP/".phpversion();

mail($to, $subject, $email, implode("\r\n", $headers));
 ?> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-26T11:10:34.307

您可以使用以下代码删除无效的 UTF-8 字符：

```
$text = iconv("UTF-8","UTF-8//IGNORE",$text); 
```

# c# - 如何通过代码将桌面切换到 Metro UI？

> ID：13562166
> 
> 赞同：-1
> 
> 时间：2012-11-26T09:44:24.557
> 
> 标签：c#, .net, wpf, windows-8, microsoft-metro

我想知道如何以编程方式将桌面切换到 Metro UI。我知道按 Windows 键可以做到这一点，但如何通过代码做同样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T12:14:36.877

对于桌面应用程序

1.  你可以你的窗口服务主机。参考链接[Pro-grammatically open window start menu](http://crsouza.blogspot.in/2009/01/programmatically-opening-windows-start.html)

2.  使用 P/Invoke 发送窗口密钥（来自[链接](http://www.codeproject.com/Questions/46731/Open-Start-Menu)）

    ```
    private static extern int keybd_event(Byte bVk, Byte bScan, long dwFlags, long dwExtraInfo);
    private const byte UP = 2;
    private const byte CTRL = 17;
    private const byte ESC = 27;

    Finally on the event where you want to open start menu use :
    // Press Ctrl-Esc key to open Start menu
    keybd_event(CTRL, 0, 0, 0);
    keybd_event(ESC, 0, 0, 0);

    // Need to Release those two keys
    keybd_event(CTRL, 0, UP, 0);
    keybd_event(ESC, 0, UP, 0); 
    ```

对于现代 UI 应用程序，由于 API 支持有限，我不确定是否可以这样做。

# php - 以下错误的原因是什么？

> ID：13562168
> 
> 赞同：0
> 
> 时间：2012-11-26T09:44:30.117
> 
> 标签：php

**索引.php**

```
<?
include "controller.php"
?> 
```

**控制器.php**

```
<?
include "class/clientclass.php";
?> 
```

**类/clientclass.php**

```
<?
include "configuration.php";
include "class/database.php";
$db=new Database();
?> 
```

**配置.php**

```
<?php
class myConfig {
    public $host = 'localhost';
    public $user = 'root';
    public $password = 'root';
    public $db = 'dojo';

} ?> 
```

**类/数据库.php**

```
<?
    class Database extends myConfig {

        function Database()
        {

                mysql_connect($this->host,$this->user,$this->password);
                mysql_select_db($this->db);

        }
    }
?> 
```

现在我得到的错误是

```
Fatal error: Cannot redeclare class myConfig in /var/www/dojo/configuration.php on line 2 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T09:49:34.353

我认为将类名更改为 myconfig 以外的名称就可以了。在您的代码中的某些地方有一个名为 myConfig 的类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T09:56:45.210

```
<?php
namespace Config;
class myConfig {
    public $host = 'localhost';
    public $user = 'root';
    public $password = 'root';
    public $db = 'test';

} 
```

试试这个。

# matlab - 帧到电影 - matlab windows 7

> ID：13562177
> 
> 赞同：1
> 
> 时间：2012-11-26T09:45:33.843
> 
> 标签：matlab, frames, avi

为什么代码：

```
aviobj = avifile('example_1.avi', 'compression', 'none', 'fps', 30);  
for i=1:8  
    %generating the filenames  
    filename = strcat('Masks/',int2str(i),'.bmp');   
    I = imread(filename);  
    aviobj = addframe(aviobj,I);                                                 
end  
aviobj = close(aviobj); 
```

在带有 windows xp 的 matlab 中工作，在 windows 7 中不起作用。我知道还有其他解决方案可以从 matlab 中的框架创建 avi，但我很困惑为什么它可以在 xp 而不是 7 上工作。而且它有一些东西可以安装，这样它就可以工作了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T16:22:32.967

试试[VideoWriter](http://www.mathworks.com/help/matlab/ref/videowriterclass.html)，建议在`avifile`.

# javascript - 创建动态并添加 onMouseOver 属性

> ID：13562178
> 
> 赞同：0
> 
> 时间：2012-11-26T09:45:41.833
> 
> 标签：javascript

我在我的页面中使用 Javascript 在 DOM 中创建元素，如下所示

```
var myTd_1 = document.createElement("td") 
```

并为它们添加属性，例如

```
myTd_1.width='25%'
myTd_1.padding = '6' 
```

我真的想为 TD 添加不同的背景颜色，以防使用 onMouseOver 和 onMouseOut 事件。

我该怎么做 ？

我尝试在网上寻找它，但无法真正找到我需要的东西。

我使用我所知道的最接近的是：

```
myTd_1.onMouseOver = 'this.style.backgroundColor="#042b2b"'
myTd_1.onMouseOut = 'this.style.backgroundColor="transparent"' 
```

但它不起作用:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T09:51:02.777

您所要做的就是将事件侦听器添加到`mouseover`和`mouseout`事件的元素。您可以使用以下方法执行此操作`addEventListener`：

```
var myTd_1 = document.createElement("td");

myTd_1.width='25%';
myTd_1.padding = '6';

document.getElementById('targetrow').appendChild(myTd_1);

myTd_1.addEventListener("mouseover",function(){
    this.style.backgroundColor="#042b2b";
});
myTd_1.addEventListener("mouseout",function(){
    this.style.backgroundColor="transparent";
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T13:39:21.467

您可以在不以更动态的方式使用 id 的情况下执行此操作。

这是一个活生生的[例子](http://jsfiddle.net/nameIsNull/7hWfx/5/)

这是我使用的代码：

```
/* get the table td elements */
var tdCollection = document.getElementById('main').getElementsByTagName('td'),
    i = 0,
    bgClassName = 'mouseover';

function removeClass(element, className) {
    element.className = element.className.replace(new RegExp('(\\s|^)' +  className + '(\\s|$)', 'g'), '');
}

while (tdCollection[i]) {
    tdCollection[i].addEventListener('mouseover', function () {
        /* adding the class to change bgcolor */
        this.className += ' mouseover'; 
    });
    tdCollection[i++].addEventListener('mouseout', function () {
        /* removing the bgcolor changing class */
        removeClass(this, bgClassName);  
    });
};
​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T09:53:01.057

尝试这个：

```
 myTd_1.onmouseover = function() {
      myTd1.style.backgroundColor = "#042b2b";
   }

   myTd_1.onmouseout = function() {
      myTd1.style.backgroundColor = "transparent";
   } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-26T09:53:12.087

尝试这个 ....

```
myTd_1.onmouseover = 'this.style.backgroundColor="#042b2b"';
myTd_1.onmouseout = 'this.style.backgroundColor="transparent"'; 
```

# c# - 从 MyObject[] 转换为 Object[] 然后再返回一个不好的代码气味？

> ID：13562181
> 
> 赞同：0
> 
> 时间：2012-11-26T09:45:45.763
> 
> 标签：c#, refactoring

我正在审查/重构一些代码，但遇到了我不喜欢的相互依赖关系，但我不确定在 C# 中解决此问题的最佳方法是什么。我的问题的本质是在一个文件中我有：

```
class MyObject
{
  public string Name {get;set;}
  public int? Age {get;set;}
}

public interface IConnection
{
  void Connect(string user,string pw,Action<MyObject[]> onConnect);
  void Disconnect();
} 
```

然后在另一个文件中：

```
public class ConcreteDataProvider : IConnection
{
  public void Connect(string user,string pw,Action<MyObject[]> onConnect)
  {
    //...
    IEnumerable<MyObject> collection = ...
    onConnect( collection.ToArray() );
  }
} 
```

我对这个设计的问题`MyObject`是特定于这个具体的数据提供者。我不想在`IConnection`.

我的想法是重构`IConnection.Connect()`看起来像：

```
void Connect(string user,string pw,Action<Object[]> onConnect); 
```

然后在`ConcreteDataProvider`执行中`onConnect`我将数组转换为`MyObject[]`. （从[Unable to cast object of type 'System.Object[]' to 'MyObject[]' 看来，](https://stackoverflow.com/questions/212429/unable-to-cast-object-of-type-system-object-to-myobject-what-gives)这意味着我需要使用`Array.ConvertAll`）

这是一个糟糕的设计，会回来困扰我吗？

* * *

顺便说一句，调用`ToArray()`触发数据下载，我不想`onConnect()`在它完成之前调用。在幕后它也触发了实际的连接；在执行第一个查询之前，我不知道连接是否有效并且是否正常工作。这就是为什么我不想传递`IEnumerable`给`OnConnect()`，并让它调用 to `ToArray()`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T09:47:28.317

使用泛型怎么样？

```
public interface IConnection<T>
{
  void Connect(string user, string pw, Action<T[]> onConnect);
  void Disconnect();
} 
```

# html - 根据打开的 URL 交换网页上的 DIV 代码

> ID：13562185
> 
> 赞同：2
> 
> 时间：2012-11-26T09:45:56.487
> 
> 标签：html

好的，请放轻松，因为我是一个编程新手，但现在拥有相当好的 HTML 和 CSS 知识。

基本上我有一个网站[http://www.samuivillaretreats.com](http://www.samuivillaretreats.com)并且在页面顶部的主页上是使用 Diapo 的相册。此幻灯片显示在 DIV 中，并与构成每张幻灯片上的信息（幻灯片的 URL 和标题信息）的隐藏 DIVS 列表相关联。幻灯片的代码是使用内容管理系统添加的。与 Diapo 幻灯片关联的 .JS 文件被编码到主页的 HEAD 部分，这是用于每个网页的 HEAD 代码 - 而不仅仅是主页

主页幻灯片目前呈现在网站的每个页面上。我想要做的是创建一个特定于投资组合中别墅属性的幻灯片 - 因此，当用户单击特定的假日属性时，幻灯片会在与主页幻灯片相同的位置打开。我正在考虑创建一个具有唯一 ID 的 DIV 负载，其中包含特定属性的信息，并将这些信息存储在一个特定的 HTML 文件中。

因此，我需要将主页 DIV 代码与属性的特定代码交换。我在想，可以通过读取 URL 来切换到正确的幻灯片，因为每个属性都有一个与该属性相对应的唯一 URL 结尾。

最后，我可以访问 HEAD 部分代码，但这个 HEAD 代码用于网站的每个页面 - 即我无法访问特定别墅属性页面的特定 HEAD 区域。

任何想法都会非常感激 - 我在这个网站上阅读了很多关于使用按钮和通过 URL 末尾的哈希进行 DIV 交换的信息，但我没有任何意义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T14:32:50.730

您网站上 diapo.js 中第 318 行的此代码选择幻灯片中的图像

```
var allImg = new Array(); //I create an array for the images of the slideshow
    $('img', elem).each( function() { 
    allImg.push($(this).attr('src')); 
```

diapo.js 的作用是从所有 img 元素中检索 src 属性（或者在之后检索 IE 8-的滑块 div 的背景图像）。

如果您通过 CMS 输入幻灯片的图像，并且没有将特定站点更改为特定页面的选项，那么我不知道如何实现它。也许是 ASP 或 PHP，但我对此知之甚少，无法为您提供建议。

但是，您可以做的是在每个页面中创建这样一个 div：

```
<div id="slider_img_links">
   <img src="example.jpg"></img>
   <img src="example2.jpg"></img>
</div> 
```

..所有您想在滑块中显示的图像。

之后，将我在此处提到的 diapo.js 代码（第 318 行）替换为：

```
var allImg = new Array(); //I create an array for the images of the slideshow
    $('#slider_img_links').children('img').each( function() { 
    allImg.push($(this).attr('src')); 
```

或者如果您还不完全信任 .each 函数，

```
var allImg = new Array(); //I create an array for the images of the slideshow
var imgLinks = $('#slider_img_links').children('img');
for(i=0;i<imgLinks.length;i++) {
    var oneLink = imgLinks[i].attr('src')
    allImg.push(oneLink);
    } 
```

Diapo.js 第 322-342 行通常可以删除而不会产生任何后果。我没有对此进行测试，但它应该可以工作。

PS（与问题无关，但适用于您的网站）：

*   您已包含 jQuery（Javascript 库）3x（因此您可以删除其中的 2 个）；
*   您的 CMS 生成基于表格的布局，这篇文章解释了为什么这是不好的： [http ://coding.smashingmagazine.com/2009/04/08/from-table-hell-to-div-hell/](http://coding.smashingmagazine.com/2009/04/08/from-table-hell-to-div-hell/)

# php - 避免频繁的数据库连接

> ID：13562187
> 
> 赞同：1
> 
> 时间：2012-11-26T09:46:03.220
> 
> 标签：php, database, codeigniter, optimization

我试图读取一个有 10000 行的 excel 文件。读取每个单元格后，我的应用程序应该检查读取的值是否存在于数据库中。这工作得很好，但问题是由于频繁的数据库检查，应用程序似乎很慢。任何人都可以提出更好的替代方案吗？我正在使用带有 mysql 的 codeigniter 框架。

谢谢并恭祝安康，

提斯蒙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T09:54:30.970

读取 10000 行不应该占用大量资源，我认为真正减慢您的应用程序速度的是每次读取的每个单元格都检查整个数据库。所以你应该避免这种情况。

我想到的第一件事是：在每一行中添加一个更新（日期/时间）字段，如果更新的日期/时间比上次检查更新，则只检查整行。

无论如何，显示更多细节会让我们更好地帮助您。

谈论您的应用程序需要准确检查什么或您的 excel 文件包含什么

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T09:53:19.627

您可以对从 Excel 文件中读取的数据进行分组。

假设您的 Excel 文件中有一个“邮政编码”列。然后制作一组邮政编码，这可能会产生一个包含 10 个唯一邮政编码的列表。然后，您只需为每个邮政编码对数据库进行 10 次查询，并将返回的列表与 Excel 文件中的分组数据进行比较。

# php - 处理空数组元素的最佳方法？

> ID：13562189
> 
> 赞同：0
> 
> 时间：2012-11-26T09:46:05.207
> 
> 标签：php

不知道如何将问题指定得更具体、更有意义。

基本上我有一个客户信息模块，能够为每个客户添加多个联系人，它会是这样的：

```
<p>Contacts</p>
<ul>
<li>
<label for="name">Name: <label><input type="text" name="name[]" value="" />
<label for="lname">Last Name: <label><input type="text" name="lname[]" value="" />
<label for="phone">Phone: <label><input type="text" name="phone[]" value="" />
</li>
<li>
<label for="name">Name: <label><input type="text" name="name[]" value="" />
<label for="lname">Last Name: <label><input type="text" name="lname[]" value="" />
<label for="phone">Phone: <label><input type="text" name="phone[]" value="" />
</li>
<li>
<label for="name">Name: <label><input type="text" name="name[]" value="" />
<label for="lname">Last Name: <label><input type="text" name="lname[]" value="" />
<label for="phone">Phone: <label><input type="text" name="phone[]" value="" />
</li>
</ul> 
```

这是一个向您展示想法的粗略示例。当该表单提交到 php 脚本时，例如第二个联系人详细信息中的姓氏为空白，当我试图循环访问所有联系人时，我会遇到偏移错误？

```
<?php

$total = count($_POST['name']);
$name = $_POST['name'];
$lname = $_POST['lname'];
$phone = $_POST['phone']
for($x = 0 ; $x > $total; $x)
{
    echo 'Name: '.$name[$x].' Last name: '.$lname[$x].' Phone: '.$phone[$x];
}

?> 
```

我没有测试这个特定的片段，它只是为了向你展示想法（可能你们中很少有人有类似的问题）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T10:01:47.590

```
for($x = 0 ; $x < $total; $x++)
{
    if(!empty($name[$x]))
    echo 'Name: '.$name[$x];
} 
```

Is this what you are looking for?

# visual-studio-2010 - 如何安装和配置插件客户端 Social Team Foundation Server 2010

> ID：13562195
> 
> 赞同：1
> 
> 时间：2012-11-26T09:46:20.537
> 
> 标签：visual-studio-2010, tfs

我需要安装客户端插件 TFS，但我发现只有服务器端的在线指南。

我已经安装了 Visual Studio 2010 Ultimate

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T13:09:07.827

下载[Microsoft Visual Studio Team Explorer 2010](http://www.microsoft.com/en-us/download/details.aspx?id=329)并安装它。

然后使用本文[连接](http://msdn.microsoft.com/en-us/library/dd578614%28v=vs.100%29.aspx)到 TFS Server。

# jquery - 客户端验证 jquery 插件不起作用

> ID：13562196
> 
> 赞同：2
> 
> 时间：2012-11-26T09:46:22.143
> 
> 标签：jquery, ruby-on-rails-3, validation, jquery-plugins, jquery-validate

我使用路径 assets\javascripts\jquery.validate.js (rails 3.2) 上的 jquery 插件进行客户端验证。但它不起作用。我的表格：

update_name_phone_city_user_registration_path, :html => { :id => "form_edit_name", :method => :put }, :remote => true) 做 |f| %>

10 %> “提交” %>

我的 application.js 文件：

```
//= require jquery
//= require jquery_ujs
//= require bootstrap-modal
//= require_tree .

$(document).ready(function() {

$("#form_edit_name").validate({
   debug: true,
   rules: {
      "user[name]": {
        required: true,
        minlength: 2
      },
    "user[name]": {
      required: 'Your username is required',
      minlength: 'The minimum number of characters is 2'
     }

     alert("ok");
   });

}); 
```

怎么了？

UPD 1 生成的 HTML- 代码

```
<script src="/assets/jquery.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery_ujs.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap-modal.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery.validate.js?body=1" type="text/javascript"></script>
<script src="/assets/application.js?body=1" type="text/javascript"></script>

<form accept-charset="UTF-8" action="/users" class="edit_user" id="form_edit_name" method="post">
<div><label for="user_name">Name</label><br />
        <input id="user_name" name="user[name]" size="30" type="text" value="" /></div>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T10:21:35.520

假设您正在验证这样的测试输入

```
<input type="text" id="name" name="name" /> 
```

试试这个

```
$("#form_edit_name").validate({
       debug: true,
       rules: {
          "name": { required: true, minlength: 2 },
       messages: {
        "name": {
          required: 'Your username is required',
          minlength: 'The minimum number of characters is 2'
         }
      }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-17T18:08:23.187

解决方案似乎是将名称值放在引号中。

```
$("#form_edit_name").validate({
   debug: true,
   rules: {
      "user[name]": { required: true, minlength: 2 },
   messages: {
      "user[name]": {
       required: 'Your username is required',
       minlength: 'The minimum number of characters is 2'
     }
  }
}); 
```

请参阅 [Ruby on Rails 3 上的 jQuery Validator 插件？](https://stackoverflow.com/questions/7183881/jquery-validator-plugin-on-ruby-on-rails-3)详情。

# list - 查找列表中元素的索引

> ID：13562200
> 
> 赞同：5
> 
> 时间：2012-11-26T09:46:31.127
> 
> 标签：list, scheme, element

我需要在方案列表中获取元素的索引。例如：

> > (... 2 '(2 3 4 5))
> > 
> > 0
> > 
> > (... 4 '(2 3 4 5))
> > 
> > 2

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-26T10:36:43.333

像这样的东西

```
(define list-index
        (lambda (e lst)
                (if (null? lst)
                        -1
                        (if (eq? (car lst) e)
                                0
                                (if (= (list-index e (cdr lst)) -1) 
                                        -1
                                        (+ 1 (list-index e (cdr lst)))))))) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-12-16T02:39:12.160

以下是我能想到的最清晰的解决方案：

```
(define (get-list-index l el)
    (if (null? l)
        -1
        (if (= (car l) el)
            0
            (let ((result (get-list-index (cdr l) el)))
                (if (= result -1)
                    -1
                    (1+ result)))))) 
```

这个解决方案与 merriav 的解决方案基本相同，只是我在末尾添加了一个 let 以便递归调用不会不必要地重复（在书面代码或执行中）。

公认的解决方案似乎没有考虑空列表或不包含所寻求元素的列表。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-06-30T16:21:04.817

您可以使用*reverse*、*member*、*length*和*cdr*实现*索引*，如下所示：

 ***```
(define (index a b)
  (let [(tail (member a (reverse b)))]
    (and tail (length (cdr tail)))) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T11:18:49.780

我的最终解决方案：

```
(define index
  (lambda (cislo l)
    (if (equal? (car l) cislo) 0 (+ 1 (index cislo (cdr l))))))
(define map-index-pred
  (lambda (pred? f l)
     (foldr (lambda (x y)
       (if (pred? (index x l))
         (cons (f x) y) (cons x y))) '() l))) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-30T09:02:28.153

答案比你们预期的要容易，也没有递归:)

简单的功能，以防您确定元素在列表中

```
(define element-index
  (lambda (elemento lista)
    (- (length lista) (length (memv elemento lista))))) 
```

如果您考虑元素可能不在列表中的情况。`false`没找到就返回

```
(define element-index
  (lambda (elemento lista)
    (if (eqv? (list? (memv elemento lista)) #t)
        (- (length lista) (length (memv elemento lista)))
        false
        )
    )) 
```

最后结果：

```
> (element-index 2 '(2 3 4 5))
0
> (element-index 4 '(2 3 4 5))
2
> (element-index 6 '(2 3 4 5))
false 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-10T14:53:46.663

如果你不需要担心元素不在列表中的情况，下面的代码可能是最短的版本。（如果元素不在列表中，则会发生异常。）

```
(define (element-index e lst)
    (cond [(eqv? e (car lst)) 0]
          [else (+ (element-index e (cdr lst)) 1)]))) 
```

否则，请使用以下代码：

```
(define element-index
  (letrec
    ([element-index-helper
       (lambda (e lst index)
         (cond [(null? lst) #f]
               [(eqv? e (car lst)) index]
               [else (element-index-helper e (cdr lst) (+ index 1))]))])
    (lambda (e lst)
      (element-index-helper e lst 0)))) 
```

例子：

```
> (element-index 'a '(a b c))
0
> (element-index 'b '(a b c))
1
> (element-index 'c '(a b c))
2
> (element-index 'd '(a b c))
#f 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-02-27T17:02:58.737

以下代码实现了目标：

```
(define (getpos element lst)
    (let loop ([counter 0] [temp lst])
        (if (= element (car temp)) counter
            (loop (+ counter 1) (cdr temp))))) 
```***

# java - 春季批处理作业中junit的实现

> ID：13562204
> 
> 赞同：-4
> 
> 时间：2012-11-26T09:46:40.997
> 
> 标签：java, junit, spring-batch

任何人都可以分享如何使用junit测试框架在spring批处理作业中测试不同的DAO方法。如何分别测试读取器、写入器和处理器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T09:39:18.997

[官方文档的答案](http://static.springsource.org/spring-batch/reference/html/testing.html)

# iphone - 如何在 iPhone App 中通过修改图像的像素值在 UIImage 上添加色调效果

> ID：13562208
> 
> 赞同：0
> 
> 时间：2012-11-26T09:46:54.033
> 
> 标签：iphone, objective-c, c, cocoa-touch

想在 iPhone 应用程序中添加色调过滤器我想编写一个代码，通过修改图像的像素值来添加具有不同色调值参数值的色调图像效果。我怎样才能做到这一点。总的来说，我想通过操纵图像的每个像素值来添加色调图像过滤器。但是像素在添加色调效果时的实际值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T10:21:35.173

为此，您需要使用 CoreImage，特别是 CIFilter。网上有很多例子，但苹果开发者网站上有一个与你想要的完全匹配：

转到[此处](http://developer.apple.com/library/ios/#DOCUMENTATION/GraphicsImaging/Conceptual/CoreImaging/ci_tasks/ci_tasks.html#//apple_ref/doc/uid/TP30001185-CH203-TPXREF101)并检查“创建 CIFilter 对象和设置值”部分，其中显示了如何为给定图像创建色调过滤器。

# c# - 如何定义我的返回类型

> ID：13562215
> 
> 赞同：0
> 
> 时间：2012-11-26T09:47:22.930
> 
> 标签：c#

我有以下代码：

```
 public IList<Content.Grid> GetContentGrid(string pk)
    {
        // How can I define result to hold the return 
        // data? I tried the following but it does not
        // work:
        var result = new IList<Content.Grid>();

        var data = _contentRepository.GetPk(pk)
             .Select((t, index) => new Content.Grid()
             {
                 PartitionKey = t.PartitionKey
                 ....
             });

        switch (pk.Substring(2, 2))
        {
            case "00":
                return data
                    .OrderBy(item => item.Order)
                    .ToList();
                break;
            default:
                return data
                    .OrderBy(item => item.Order)
                    .ToList();
                break;

        }
    } 
```

VS2012 告诉我不需要中断，所以我想做的是从开关内部删除返回，将结果存储在一个变量中，然后在开关完成后有：

```
return result; 
```

有人可以告诉我如何声明名为 result 的变量。我尝试了以下方法，但这给出了语法错误：

```
var result = new IList<Content.Grid>(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T09:52:40.387

您已经在开关中返回了结果：

```
return data
    .OrderBy(item => item.Order)
    .ToList(); 
```

没有必要在切换之前/之后声明变量，因为您使用返回语句跳出切换。（这就是为什么你不需要休息）

但是，您可以使用以下内容：

```
IList<Content.Grid> result; 
```

...

```
case "00":
            result = data
                .OrderBy(item => item.Order)
                .ToList();
            break;
        default:
            result = data
                .OrderBy(item => item.Order)
                .ToList();
            break; 
```

...

```
return result; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T09:49:32.420

IList 是一个接口。您不能构造接口的实例。您必须创建实现该接口的具体类型的实例，例如：

```
var result = new List<Content.Grid>(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T09:49:59.093

`IList`是一个接口，它不能被实例化。您需要选择特定实现`IList`并创建非抽象类的对象，例如`List`：

```
var result = new List<Content.Grid>(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T09:51:56.537

您不能实例化接口，只能实现它们。

```
public class SomeList<T> : IList<T>
{

} 
```

您需要一个类型参数才能转到`IList`，所以在您的普通类中使用

```
IList<T> result = New SomeList<T>(); 
```

那应该这样做。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-26T09:50:28.837

不要使用`var`，你会没事的；您不需要默认值，因为它只会被覆盖。

```
IList<Content.Grid> result; 
```

# c# - 实体可以找到对象但不能删除它

> ID：13562217
> 
> 赞同：0
> 
> 时间：2012-11-26T09:47:28.270
> 
> 标签：c#, asp.net, entity-framework

实体可以找到对象并可以设置它的属性，但它会抛出“无法删除对象，因为它在 ObjectStateManager 中找不到。” 当我尝试删除它时出现异常。你可以在属于图片中看到我的故事。

如您所见，对象不为空，实体可以找到它。

![在此处输入图像描述](../Images/cbc343a8ae3257046c1a0ccabaef8398.png)

我可以在上下文中看到要删除的对象。

![在此处输入图像描述](../Images/c17c1e6d2d7ed8665c9d535db2fdf29a.png)

你有什么建议吗？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T10:08:08.277

问题是您在获取实体后立即处理上下文。这样，实体框架就无法跟踪对该实体的疯狂更改。尝试将删除代码放在 using 语句中：

```
using (var context = new eTicaretEntity()) 
{ 
    var cart = context.carts.FirstOrDefault(x => 
        x.CartGuid == cartGuid && 
        x.ProductId == productId 
        && x.ProductTypeId == productTypeId); 

    // delete entity here
    // .....
} 
```

# c# - MVVM 的正确方法

> ID：13562220
> 
> 赞同：2
> 
> 时间：2012-11-26T09:47:32.160
> 
> 标签：c#, wpf, mvvm, binding

我在其他问题中得到了有关如何实现 MVVM 的提示。当学生类本身发生更改时（在我的项目中经常发生这种情况），我在将绑定更新传递给 GUI 时遇到了问题。有没有办法让这些事情变得简单，并以比实施更紧凑的方式实现？或者这是实现 MVVM 的最先进技术？

```
class MainWindowViewModel : INotifyPropertyChanged
{
   ObservableCollection<StudentViewModel> studentViewModels = new ObservableCollection<StudentViewModel>();

   public ObservableCollection<StudentViewModel> StudentViewModels
   {
      get { return studentViewModels; }
   }

   public MainWindowViewModel()
   {
      studentViewModels.Add(new StudentViewModel());
      studentViewModels.Add(new StudentViewModel());
      studentViewModels.Add(new StudentViewModel());
   }

   public event PropertyChangedEventHandler PropertyChanged;
   internal void OnPropertyChanged(String propertyName)
   {
      if (PropertyChanged != null)
      {
         PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
      }
   }
}

class StudentViewModel : INotifyPropertyChanged
{
   Student model;
   public String StudentFirstName
   {
      get { return model.StudentFirstName; }
      set { model.StudentFirstName = value; }
   }
   public String StudentLastName
   {
      get { return model.StudentLastName; }
      set { model.StudentLastName = value; }
   }

   public StudentViewModel()
   {
      model = new Student();
      this.model.PropertyChanged += (sender, e) => 
      {
         switch (e.PropertyName)
         {
            case "StudentFirstName": OnPropertyChanged("StudentFirstName"); break;
            case "StudentLastName": OnPropertyChanged("StudentLastName"); break;
            default: break;
         }
      };
   }

   public StudentViewModel(Student model)
   {
      this.model = model;

      this.model.PropertyChanged += (sender, e) =>
      {
         switch (e.PropertyName)
         {
            case "StudentFirstName": OnPropertyChanged("StudentFirstName"); break;
            case "StudentLastName": OnPropertyChanged("StudentLastName"); break;
            default: break;
         }
      ;
   }

   public void changeStudent()
   {
      model.changeStudent();
   }

   public event PropertyChangedEventHandler PropertyChanged;
   internal void OnPropertyChanged(String propertyName)
   {
      if (PropertyChanged != null)
      {
         PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
      }
   }
}

class Student : INotifyPropertyChanged
{
   public String studentFirstName;
   public String StudentFirstName
   {
      get { return studentFirstName; }
      set 
      {
         if (studentFirstName != value)
         {
            studentFirstName = value;
            OnPropertyChanged("StudentFirstName");
         }
      }
   }
   public String studentLastName;
   public String StudentLastName
   {
      get { return this.studentLastName; }
      set
      {
         if (studentLastName != value)
         {
            studentLastName = value;
            OnPropertyChanged("StudentLastName");
         }
      }
   }

   public Student() { }

   public void changeStudent()
   {
      StudentLastName = "McRonald";
   }

   public event PropertyChangedEventHandler PropertyChanged;
   internal void OnPropertyChanged(String propertyName)
   {
      if (PropertyChanged != null)
      {
         PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-26T10:12:07.127

首先，我想推荐使用其中一个 MVVM 框架（我个人喜欢并使用[`Caliburn.Micro`](http://caliburnmicro.codeplex.com/)，但也有[`MVVM Light`](http://www.galasoft.ch/mvvm/)无数[其他的](https://stackoverflow.com/questions/5069783/which-mvvm-framework-is-the-best-framework-for-wpf-apps)）。

*（从现在开始我将使用`Caliburn.Micro`实现作为示例，因为这是我或多或少知道的一个框架）*

为什么？好吧，它为您提供了强类型`NotifyOfPropertyChange()`、内置事件聚合器、窗口管理器等等。这样你就不必每次都重新发明轮子。此外，Caliburn.Micro 的引导程序允许您烘焙您选择的 IoC 容器，如果您想采用 MVVM-without-framework 方式，这对于 WPF 来说并不是那么容易。作为奖励，您可以拦截来自 GUI 控件的事件，因此您实际上不必在代码隐藏中编写任何内容。

一些框架允许您按约定绑定并简化命令，但您必须阅读这一点，具体取决于您使用的框架。

第二件事，我强烈支持完全重写视图模型，以便它们是独立的类而不是数据模型的包装器。您可以稍后使用[Automapper](http://automapper.codeplex.com/)或[ValueInjecter](http://valueinjecter.codeplex.com/)进行映射。

那么你就有了视图模型，例如：

```
public class StudentViewModel : PropertyChangedBase
{
    private string firstName;
    public string FirstName
    {
        get { return firstName; }
        set
        {
            firstName = value;
            NotifyOfPropertyChange(() => FirstName);
        }       
    }

    private string lastName
    public string LastName
    {
        get { return lastName; }
        set
        {
            lastName = value;
            NotifyOfPropertyChange(() => LastName);
        }       
    }
} 
```

这就是视图模型。然后在视图模型中使用数据绑定、验证等。

您的`Student`类可以是例如简单的 DTO 或 EF 类或其他。为简单起见，让我们使用愚蠢的 DTO：

```
public class Student
{
    public string FirstName { get;set; }
    public string LastName { get;set; }
} 
```

因此，您仅在例如保存到数据库时才使用 DTO。就是这样。对于“常规”应用程序使用，您使用视图模型的 GUI 交互（绑定）。

这就是 Automapper/ValueInjecter 发挥作用的地方，因为当您想在任何地方“保存”更改/添加新学生时，您必须将视图模型映射到模型，例如：

```
//ValueInjecter
var dataModel = new Student().InjectFrom(this) as Student;
//AutoMapper
var dataModel = Mapper.Map<StudentViewModel, Student>(this); 
```

就是这样。简单，轻松，干净。你描述它的方式，你想改变底层模型。我建议不要这样做，而是在可以通知您的 UI 的视图模型上进行操作。您仅使用模型来“修改”数据存储中的数据（保存/更新/获取/删除）或以某种方式“传输”数据（例如使用 REST Web 服务），并使用视图模型进行交互。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T20:11:32.720

我同意其他答案，您应该看看 MVVM 框架。我在工作中使用[MVVM Foundation](http://mvvmfoundation.codeplex.com/)。

文字墙是跟随。不久前我也开始使用 MVVM。这段代码对我上一个项目有很大帮助。

最近，我不得不研究一个还需要 IEditableObject 来管理编辑/保存/丢弃对象以及 PropertyChanged 通知的类。既然你提到了一种“让事情变得简单”的方法，我将发布我用来将 MVVM 和可编辑对象绑定在一起的基类。实现所有其他类对我来说节省了大量时间。

EditableObject 继承自 ObservableObject，它是 MVVM Foundation 的一部分。它将您正在使用的对象的结构作为类型参数。

如果您熟悉[IEditabeObject](http://msdn.microsoft.com/en-us/library/system.componentmodel.ieditableobject.aspx)的实现，则存在 editData 和 backupData 变量，它们保存您当前正在使用的数据（我没有继承此数据，我创建了自己的 EditableObject）。基本上，我使用 AutoMapper 来创建我正在使用的数据的深层副本（备份），以便可以恢复它。还有其他方法可以做到这一点（查找序​​列化或值注入），但我已经在项目中有[AutoMapper](http://automapper.org/)，因此不需要更多的 dll。

EditableObject 具有抽象方法 SaveObject 和 RemoveObject，您可以实现这些方法来处理数据库调用等，以删除和保存对象。使用 BeginEdit 和 DiscardChanges 和 SaveChanges 完成对象的编辑。

神奇的是 RaisePropertiesChanged 方法，它在类中的所有修饰属性上引发 PropertyChanged 方法。因此，每当您编辑对象并（假设）放弃更改时。UI 被刷新并恢复为原始值。它还包括您可以将 UI 绑定到的 IsEditEnabled 标志。最初我将 PropertyChanged 与一个空字符串一起使用，但这会在所有属性上引发它。使用属性，我确保它仅在我需要更新的属性上发生变化。

我使用您的学生类来实现这一点，并在下面附加了基类。

希望能帮助到你！

```
public class Student: EditableObject<WPF.MVVMBase.Student.StudentData>
    {
        #region Struct

        public struct StudentData
        {
            public string firstName;
            public string lastName;
        }

        #endregion

        #region Public Properties

        [ObservableProperty]
        public string FirstName
        {
            get
            {
                return _editData.firstName;
            }
            set
            {
                _editData.firstName = value;
                this.RaisePropertyChanged("FirstName");
            }
        }

        [ObservableProperty]
        public string LastName
        {
            get
            {
                return _editData.lastName;
            }
            set
            {
                _editData.lastName = value;
                this.RaisePropertyChanged("LastName");
            }
        }

        #endregion

        #region Methods

        protected override bool SaveObject()
        {
            //Save Student Changes to Database

            return true;
        }

        protected override bool RemoveObject()
        {
            //Remove Student from Database

            return true;
        }

        #endregion
    } 
```

这是 EditableObject 类

```
namespace WPF.MVVMBase
{
    /// <summary>
    /// Property Decorator that marks the Property as Observable. This is used by the EditableObject class to determine for which properties to raise the Property Changed method
    /// </summary>
    public class ObservablePropertyAttribute : System.Attribute{};

    /// <summary>
    /// Extends the ObservableObject class. EditableObject implements methods which are used to edit the object as well as raise the Property Changed events.
    /// </summary>
    /// <typeparam name="T">The Struct for the Editable Object</typeparam>
    public abstract class EditableObject<T> : ObservableObject
    {
        #region Private Variables

        bool _IsEditEnabled = false;
        bool _IsSelected = false;

        protected T _editData;
        protected T _backupData;

        #endregion

        #region Public Properties

        /// <summary>
        /// Controls if the Edit is enabled on the Editable Object
        /// </summary>
        public bool IsEditEnabled
        {
            get
            {
                return _IsEditEnabled;
            }
            protected set
            {
                _IsEditEnabled = value;
                this.RaisePropertyChanged("IsEditEnabled");
            }
        }

        /// <summary>
        /// Determines weather the object is Selected. Used with Lists
        /// </summary>
        public bool IsSelected
        {
            get
            {
                return _IsSelected;
            }
            set
            {
                _IsSelected = value;
                this.RaisePropertyChanged("IsSelected");
            }
        }

        #endregion

        #region Constructor

        public EditableObject()
        {
            //Create an instance of the object that will hold the data.
            _editData = Activator.CreateInstance<T>();
        }

        #endregion

        #region Methods

        #region Abstract Methods

        /// <summary>
        /// Handle the object saving. This is called by the SaveChanges method.
        /// </summary>
        /// <returns>Indicates if the object was saved successfully</returns>
        protected abstract bool SaveObject();

        /// <summary>
        /// Handle the object remove. This is called by the Remove method.
        /// </summary>
        /// <returns>Indicates if the object was removed successfully</returns>
        protected abstract bool RemoveObject();

        #endregion

        /// <summary>
        /// Begin editing the object. Sets the IsEditEnabled to true and creates a backup of the Data for restoring.
        /// </summary>
        public void BeginEdit()
        {
            IsEditEnabled = true;
            _backupData = Mapper.DynamicMap<T>(_editData);
        }

        /// <summary>
        /// Discard any changes made to the object. Set the IsEditEnabled flag to false and restore the data from the Backup.
        /// </summary>
        public void DiscardChanges()
        {
            _editData = _backupData;
            IsEditEnabled = false;

            RaisePropertiesChanged(this);
        }

        /// <summary>
        /// Save the changes made to the object. Calls the SaveObject method. If save was successfull IsEditEnabled is set to false and backup data is set to current data.
        /// </summary>
        /// <returns>Indicates if the object was saved successfully</returns>
        public bool SaveChanges()
        {
            bool isSaveSuccessfull = SaveObject();

            if (isSaveSuccessfull == true)
            {
                _backupData = _editData;

                IsEditEnabled = false;

                RaisePropertiesChanged(this);
            }

            return isSaveSuccessfull;
        }

        public bool Remove()
        {
            bool isRemoveSuccessfull = RemoveObject();
            return isRemoveSuccessfull;
        }

        /// <summary>
        /// Raises ObservableObject Property Changed for all the decorated methods in the given object so that the interface can refresh accordingly.
        /// </summary>
        /// <param name="baseObject"></param>
        public void RaisePropertiesChanged(object baseObject)
        {
            PropertyInfo[] properties = baseObject.GetType().GetProperties();
            foreach (PropertyInfo property in properties)
            {
                object[] attributes = property.GetCustomAttributes(true);

                bool isObservableProperty = (from attribute in attributes
                                             where attribute is ObservablePropertyAttribute
                                             select attribute).Count() > 0;

                if (isObservableProperty)
                {
                    RaisePropertyChanged(property.Name);
                }
            }
        }

        #endregion
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T10:18:00.400

如果您在`StudentViewModel`课堂上创建一个学生属性怎么办？此外，ViewModelBase 类可以简化代码（或至少使其更短）。

```
class MainWindowViewModel : ViewModelBase
{
    public ObservableCollection<StudentViewModel> StudentViewModels { get; private set; }
    public MainWindowViewModel()
    {
        StudentViewModels = new ObservableCollection<StudentViewModel>();
    }
}

class StudentViewModel : ViewModelBase
{
    public Student Student { get; private set; }

    public StudentViewModel()
    {
        Student = new Student();
    }

    public StudentViewModel(Student model)
    {
        Student = model;
    }

    public void ChangeStudent()
    {
        Student.changeStudent();
    }
}

public class Student : ViewModelBase
{
    public String studentFirstName;
    public String StudentFirstName
    {
        get { return studentFirstName; }
        set
        {
            if (studentFirstName != value)
            {
                studentFirstName = value;
                OnPropertyChanged("StudentFirstName");
            }
        }
    }
    public String studentLastName;
    public String StudentLastName
    {
        get { return this.studentLastName; }
        set
        {
            if (studentLastName != value)
            {
                studentLastName = value;
                OnPropertyChanged("StudentLastName");
            }
        }
    }

    public Student() { }

    public void changeStudent()
    {
        StudentLastName = "McRonald";
    }
} 
```

这是一个`ViewModelBase`实现`INotifyPropertyChanged`接口的类：

```
public abstract class ViewModelBase : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;
    public void OnPropertyChanged(string propName)
    {
        var eh = PropertyChanged;
        if (eh != null)
        {
            eh(this, new PropertyChangedEventArgs(propName));
        }
    }
} 
```

* * *

用于检测：

```
<Grid>
    <ListBox Name="lbStudents" ItemsSource="{Binding StudentViewModels}" >
        <ListBox.ItemTemplate>
            <DataTemplate>
                <TextBlock Text="{Binding Path=Student.StudentLastName}" />
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox>
</Grid> 
```

和 MainWidnow 的构造函数

```
 public MainWindow()
    {
        InitializeComponent();

        var viewModel = new MainWindowViewModel();
        var student = new Student { StudentFirstName = "John", StudentLastName = "Doe" };
        viewModel.StudentViewModels.Add(new StudentViewModel(student));

        DataContext = viewModel;
        MouseLeftButtonDown += new MouseButtonEventHandler((object sender, MouseButtonEventArgs e) =>
        {
            viewModel.StudentViewModels[0].ChangeStudent();
        });
    } 
```

如果单击窗口，将调用`ChangeStudent`第一个方法，`StudentViewModel`并且 UI 也将更新。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T10:09:48.150

好吧，我将 INotifyPropertyChanged 代码放入了一个基类：

```
public abstract class PropertyChangedBase: INotifyPropertyChanged
{
    protected PropertyChangedBase()
    {
    }

    public event PropertyChangedEventHandler PropertyChanged;

    public void OnPropertyChanged(string propertyName)
    {
        var propertyChangedEventArgs = new PropertyChangedEventArgs(propertyName);
        PropertyChangedEventHandler changed = PropertyChanged;
        if (changed != null)
        {
            changed(this, propertyChangedEventArgs);
        }
    }
} 
```

然后在每个需要属性更改事件的类中，将其添加为基类：

```
class Student : PropertyChangedBase
{
    public String StudentFirstName
    {
        get { return model.StudentFirstName; }
        set 
          { 
            model.StudentFirstName = value;
            this.OnPropertyChanged("StudentFirstName"); 
          }
    }

    public String StudentLastName
    {
       get { return model.StudentLastName; }
       set 
          { 
             model.StudentLastName = value;
             this.OnPropertyChanged("StudentLastName");
          }
    } 
} 
```

在您的代码中我有点困惑的一件事是，为什么您有一个学生视图模型？在 MVVM 中，您有您的模型，即您的对象设计 - 在本例中为“学生”，然后您有一个视图，它将是 MainWindow.xaml，然后是您的 ViewModel，它是 MainWindowViewModel。所以真的你不应该需要 studentViewModel。所以你的 MainViewModel 应该是这样的：

```
class MainWindowViewModel : PropertyChangedBase
{
   ObservableCollection<Student> _Students = new ObservableCollection<Student>();

   public ObservableCollection<Student> Students
   {
      get { return _Students; }
   }

public MainWindowViewModel()
{
  _Students.Add(new Student() { StudentFirstName = "Foo", StudentLastName = "Bar" });
  _Students.Add(new Student() { StudentFirstName = "John", StudentLastName = "Doe" });
  _Students.Add(new Student() { StudentFirstName = "Emy", StudentLastName = "Bob" });
} 
```

# python - Jinja2 内联注释

> ID：13562222
> 
> 赞同：85
> 
> 时间：2012-11-26T09:47:53.190
> 
> 标签：python, macros, jinja2, comments

如何在 Jinja2 参数列表声明中添加注释？

我尝试过的一切都会出错： **jinja2.exceptions.TemplateSyntaxError: unexpected char u'#'**

```
{{ Switch('var',
    [('1', 'foo'),    #  comment 1
     ('2', 'bar'),    ## comment 2
     ('3', 'rum'),    {# comment 3 #}
     ]) }}

{% macro Switch(var, caselist) %}
    {% for case, action in caselist%}
        CMP  {{var}} {{case}} 
        JNE  {{LABEL}}
        {{action}}
        JMP  {{LABELF}}
{{LABEL}}:  NOP
    {%- endfor %}
{{LABELF}}: NOP
{%- endmacro -%} 
```

在我的例子中，Jinja2 被用作汇编程序的宏预处理器。

* * *

## 回答 #1

> 赞同：167
> 
> 时间：2012-11-26T09:53:53.587

Jinja2 不支持在`{{ ... }}`声明中发表评论。您只能在此类语句*之外*使用注释，然后只能使用`{# .. #}`or `## comment`。

*   `{# .. #}`仅用于*禁用*模板的一部分或在其他 Jinja2 语法*之外添加注释。*你不能嵌套这些。
*   `# statement`等效于`{% statement %}`, if[行语句已启用并进行了配置](http://jinja.pocoo.org/docs/templates/#line-statements)。
*   `## comment`仅在启用 line 语句时才有效，此时它被视为注释。

通常，在 Jinja 语句之外，使用目标语言的注释来代替；例如`<!-- comment -->`在生成 XML 等时。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2020-12-14T12:50:13.090

现在 Jinja2 有一个评论声明：

```
{% comment %}

    <html code/>
    {% some other statements %}
    {{ some.values }}

{% endcomment %} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2020-02-26T16:39:43.060

我试图向 Martijn Pieters 添加评论。

`{% .. %}`=`{# .. #}`

`{{ .. }}`= `{# .. #}` （同上）

# php - Magento 显示多个折扣细分

> ID：13562229
> 
> 赞同：9
> 
> 时间：2012-11-26T09:48:16.213
> 
> 标签：php, magento, magento-1.7

我已经在我的 Magento 构建中安装了一个奖励模块。我还设置了一些购物车促销活动。一切正常。在购物车页面上，您可以兑换奖励积分并输入折扣码，一切都会正确打折。问题是它们都贴上了“折扣”标签（其中 1,000 积分 = 1 英镑折扣）

[![](../Images/0ad3ba8131f6041fc622ef9e7073f19a.png)](https://i.stack.imgur.com/qNy5g.png)
[（来源：[i.imm.io](http://i.imm.io/N0hf.png)）]

如您所见，它将 5 英镑的优惠券折扣和 1 英镑的奖励折扣组合在一起。如何将它们分开，以便我有两个折扣行，一个用于优惠券，一个用于奖励积分？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-03T02:11:24.440

这不是一项简单的任务。不幸的是，Magento 的折扣系统并没有为添加您可能不希望在购物车总计框中一起添加的新折扣*类型做好充分准备。*

确实需要修改类的`resetDiscountLabels()`方法`TBT_Rewards_Model_Salesrule_Observer`。但是，这种方法*不是*Sweet Tooth 在折扣描述中添加折扣的地方。恰恰相反。Sweet Tooth 的折扣会*自动*添加到购物车上 Magento 的折扣列表中（并且折扣描述是从这个折扣列表中自动生成的）。问题是，即使是*不*应该添加到购物车的 Sweet Tooth 折扣也会显示在那里 - 根据您创建的规则适用于购物车的折扣，但客户实际上还没有选择花费他们的积分. 该`resetDiscountLabels()`方法可以从购物车中*删除*不需要的折扣描述，而不是添加任何内容。

您的问题的解决方案分两个步骤，第二步是更费力的。

首先，您必须修改上述方法以从购物车中删除*所有*Sweet Tooth 折扣描述，而不仅仅是那些不适用的。我建议先将文件复制到您的应用程序/代码/本地代码池，然后修改该文件而不是原始文件。如果您遍历购物车上的所有规则 ID，然后加载规则模型，您可以判断它是否是 Sweet Tooth 规则，如果它的`points_action`字段已设置，即`$rule->getPointsAction() !== null`. 如果*任何*规则是 Sweet Tooth 规则，您可以`unset`从折扣描述中使用该方法已经在执行的方式。在此之后，Sweet Tooth 折扣不应再出现在总计框中的该行中。

第二步是在总计框中添加一个新行，也就是在报价单中添加一个新的总计模型。这将是更复杂的步骤 - 比我在这个答案中描述的要复杂得多，但这里有一个关于添加新总列的教程：http: [//turnkeye.com/blog/magento-development-add-total-row-结帐/](http://turnkeye.com/blog/magento-development-add-total-row-checkout/) 在您的新总模型`collect()`方法中，您应该检查报价`applied_redemptions`字段以获取客户已应用于其购物车的 Sweet Tooth 规则 ID 列表。然后，您可以使用这些值重新生成 Sweet Tooth 总折扣。

正如我所说，这不是一项简单的任务，不幸的是，这是唯一的半干净方法。希望不会太多。如果您宁愿将自己的开发时间集中在其他任务上，您也可以随时聘请开发公司为您做这件事。

希望这是有用的！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-01T14:29:18.523

您需要修改`/TBT/Rewards/Model/Salesrule/Observer.php`- 检查`checkRedemptionCouponBefore()`折扣金额并检查`resetDiscountLabels()`- 这是 Sweet Tooth 在折扣描述中添加折扣的地方。

您可能还需要修改`/app/design/frontend/base/default/template/rss/order/details.phtml`- 在行之后`if ($_order->getDiscountAmount() > 0)`

# connection-string - 在 vb.net 中将文本文件读取为 csv

> ID：13562230
> 
> 赞同：0
> 
> 时间：2012-11-26T09:48:16.700
> 
> 标签：connection-string, vb.net-2010

我正在使用 vb.net .am 有一个文件。该文件包含一些值。我想使用 vb.net 读取该文件。

```
file name cdr_StandAloneCluster_03_201208090909_33121.file

data type        file

it contain the data look like this

cdrRecordType,"globalCallID_callManagerId","globalCallID_callId","origLegCallIdentifier","dateTimeOrigination","origNodeId","origSpan","origIpAddr","callingPartyNumber","callingPartyUnicodeLoginUserID","origCause_location","origCause_value","origPrecedenceLevel","origMediaTransportAddress_IP","origMediaTransportAddress_Port","origMediaCap_payloadCapability","origMediaCap_maxFramesPerPacket","origMediaCap_g723BitRate","origVideoCap_Codec","origVideoCap 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T01:44:29.170

解析数据的关键是使用“SPLIT”方法

这是我敲出的示例代码。我不能确定它是 110%，但它应该能让你更接近解决你的问题。

```
 Sub SomePrcoedure(strFilename As String)

Dim arrRawData As Generic.List(Of String) = Nothing
Dim arrLineItems() As String = Nothing
Dim objStreamReader As StreamReader = Nothing
Dim datTextLine As String = Nothing

    '-> Validate Filename
    If Trim(strFilename) <> "" Then
        If FileIO.FileSystem.FileExists(strFilename) Then
            '-> Read the WHOLE file in 
            arrRawData = New Generic.List(Of String)
            objStreamReader = New StreamReader(Trim(strFilename))
            Do
                datTextLine = objStreamReader.ReadLine()
                If Trim(datTextLine) <> "" Then
                    arrRawData.Add(Trim(datTextLine))
                End If
            Loop Until objStreamReader.EndOfStream()
            objStreamReader.Close()
            '-> Split EACH line data into the array arrLineItems
            For intCounta = 0 To arrRawData.Count - 1
                arrLineItems = Split(arrRawData(intCounta), ",")
                'your line is now split into the array arrLineItems() 
                'process results here or store results for later or your code here....
            Next
        Else
            'file not found
        End If
    Else
        'file name missing
    End If
    arrRawData = Nothing
    arrLineItems = Nothing
    objStreamReader = Nothing
    datTextLine = Nothing

End Sub 
```

# c# - 二维矢量路径的简单交换格式

> ID：13562231
> 
> 赞同：1
> 
> 时间：2012-11-26T09:48:19.053
> 
> 标签：c#, format, 2d, autocad, cad

我正在寻找一种将简单的二维路径从像 AutoCAD 这样的 CAD 程序传输到我的程序的方法。

格式应该尽可能简单地解析。
该程序是用 C# 编写的。
每个文件将有一个或最多很少的路径，并且路径可能是打开的或关闭的。

我一直在研究标准的 CAD 导出格式。IGES、EPS、DXF、PDF 都足够强大，但问题是它们功能强大得多，编写一个转换器而不是从中提取路径描述将是一项艰巨的任务。

STL 格式的简单性完全符合我的需求，只是它只适用于 3d 表面，而不适用于 2d 路径。

从 CAD 程序中获取 2d 路径的标准方法是什么？
是否有我错过的另一种格式，或者是否有任何这些格式的 .net 库可以提取我需要的信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T07:38:28.127

DXF 非常容易解析，您可以跳过大部分文件内容，专注于您感兴趣的唯一实体......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T09:31:03.950

我同意 Alberto 的观点，即 DXF 应该很容易管理。这取决于您想如何在程序中使用这些信息（例如，您要绘制它吗？）

当您说 2D 路径时，我假设您的意思是折线。另一种方法是将所有折线转换为 SVG。

您只需要解析折线的每一段并确定它是直线还是圆弧。然后您需要将直线或圆弧转换为 SVG 字符串。

**编辑：** 这只有在您编写 AutoCAD 插件来导出数据时才真正可行。如果您只是想使用其中一种 AutoCAD 内置格式保存 AutoCAD 文件，那么 DXF 可能是最佳选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T18:51:09.690

您应该考虑使用标准数据格式，例如[STEP](http://en.wikipedia.org/wiki/ISO_10303)（产品模型数据交换标准）从 CAD 工具中提取数据。有一个用 C++ 编写的开源库[STEPcode 。](http://stepcode.org)

Autocad 应将数据导出为 STEP P21 格式：请参阅[此对话](http://grabcad.com/questions/how-to-export-to-step-from-autocad)。

# ios - UINavigationController & SplitViewController

> ID：13562233
> 
> 赞同：0
> 
> 时间：2012-11-26T09:48:22.733
> 
> 标签：ios, uinavigationcontroller, uisplitviewcontroller, uisplitviewdelegate

我有一个项目，我使用 a`NavigationController`作为我的`SplitViewController`.

因此，当应用程序出现时，两个方向的一切都很好。但是，一旦我在导航控制器中推送视图，如果我处于纵向模式，我的“显示主视图”（uisplitview 委托）按钮将消失，并且“后退”按钮`uinavigationcontroller`将取代它。如果我按下后退按钮弹出我的视图，“显示主视图”按钮就会回来。

`UINavigationBar`我的问题是，即使我推送了一些视图，我如何管理我希望能够在我的页面中显示两个按钮（“返回”、“显示大师”）的事实？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-17T09:59:21.363

您可以使用 UIToolbar 来完成。您必须首先隐藏导航栏并在视图顶部放置一个 UiToolbar。

现在您可以根据需要添加为按钮。

```
UIToolbar *tools = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 20, 1036, 42)];          
tools.barStyle = UIBarStyleBlackTranslucent;
NSMutableArray* buttons = [[NSMutableArray alloc] initWithCapacity:3];

UIBarButtonItem * backButton = [[UIBarButtonItem alloc] initWithCustomView:myCustomView];
[buttons addObject:backButton];

//you can add also a spacer
UIBarButtonItem *spacer = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];
[buttons addObject:spacer];

UIBarButtonItem * homeButton = [[UIBarButtonItem alloc] initWithCustomView:myCustomView];
[buttons addObject:homeButton];
[tools setItems:buttons animated:NO]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T10:40:55.633

您根本无法使用常规的`UINavigationBar`.

您必须将“显示主视图”按钮放在其他地方 - 例如在`UIToolbar`详细视图的底部。

或者您可以编写自己的 NavigationController 和 NavigationBar，但这需要更多的工作。:)

# visual-studio-2010 - 使用 Visual Studio 编辑器扩展点标记整行

> ID：13562234
> 
> 赞同：1
> 
> 时间：2012-11-26T09:48:25.683
> 
> 标签：visual-studio-2010, mef, vspackage

我想根据我的 VSPackage 中的一些逻辑在编辑器上标记一整行。
所以我导出`IClassifierProvider`并`EditorFormatDefinition`通过设置成功标记了相关`BackgroundColor`行`ClassificationFormatDefinition`。

但是，问题在于该行没有“完全”标记，仅标记了文本和空格。当行首有制表符时，它们之间的标记是“间歇的”。此外，该标记不跨越行尾。

我希望标记从编辑器窗口的左边缘开始并延伸到编辑器窗口的右边缘，无论文本行有多长。

也许分类格式在这里不是最好的解决方案。但是有什么选择呢？
（更喜欢一个简单的。我想我可以得到窗口句柄并自己绘制标记......）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T16:35:17.057

我将从“编辑器文本装饰”项目模板开始。该项目突出显示文档中的所有“a”。我想您可以很容易地从`GetMarkerGeometry`示例中的调用结果中获取行的顶部和底部。然后，您可以制作一个跨越文本视图 ( ) 整个宽度的元素`_view.ViewportWidth`。

*编辑*：请注意，这是在 Visual Studio 2012 中。我不确定项目模板是否存在于 2010 SDK 中。

# java - java.net.SocketException：连接重置。Servlet 无法读取 InputStream

> ID：13562241
> 
> 赞同：1
> 
> 时间：2012-11-26T09:48:56.927
> 
> 标签：java, servlets, applet, communication, socketexception

我面临以下问题。它与套接字通信错误有关。在这里，我将代码迁移到 JBoss 服务器。我知道这个错误与端口阻塞有关。我在本地运行此应用程序（远程桌面）。Applet 和 Servlet 之间进行通信。当我将此应用程序作为 Applet 运行时，applet 在一个端口上运行，而 servlet 在本地的 8080 端口上运行。我已经更改了用于套接字通信的 servlet 的安全策略。

我从一开始就收到这个错误。因此，如果您对此有任何想法，请告诉我。我没有做任何防火墙更改，因为我可以 ping 数据库服务器。错误如下。这里小程序被加载并与 servlet 进行通信。但是它在某个地方被阻塞了。

```
java.net.SocketException: Connection reset
  at java.net.SocketInputStream.read(Unknown Source)
  at java.io.BufferedInputStream.fill(Unknown Source)
  at java.io.BufferedInputStream.read1(Unknown Source)
  at java.io.BufferedInputStream.read(Unknown Source)
  at sun.net.www.http.HttpClient.parseHTTPHeader(Unknown Source)
  at sun.net.www.http.HttpClient.parseHTTP(Unknown Source)
  at sun.net.www.http.HttpClient.parseHTTP(Unknown Source)
  at sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source)
  at com.sears.adnet.data.access.servlet.HttpMessage.sendPostObject(HttpMessage.java:112) 
```

# xquery - 如何获取 xdmp:unquote($record) 的基本 URI

> ID：13562245
> 
> 赞同：2
> 
> 时间：2012-11-26T09:49:09.897
> 
> 标签：xquery, marklogic

`fn:doc()`我通过and 和`quote`and从数据库中获取记录`unquote`。但是如果我尝试得到它会给出空的结果`base-uri`。

```
 let $Doc := fn:doc("/aaaa.xml")
 let $nodc := xdmp:quote($Doc)
 let $unquote := xdmp:unquote(xdmp:quote($Doc))
 return
  $unquote/fn:base-uri(.) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T17:26:19.770

构造的节点没有 URI。

当您`xdmp:quote`使用 XML 时，字符串输出与输入 XML 没有任何连接。它只是一个字符串。当您`xdmp:unquote`使用带引号的 XML 字符串进行调用时，输出是一个新构造的节点并且没有 URI。所以构造的新文档`xdmp:unquote`没有URI。

# css - 如何在 kendoui 中为两个不同的列表视图设置两种不同的颜色，

> ID：13562248
> 
> 赞同：1
> 
> 时间：2012-11-26T09:49:22.873
> 
> 标签：css, kendo-ui

我正在为样式使用 .css 文件。在我的视图页面中，我有两个列表视图，我想要两个列表视图有两种不同的颜色。我怎么能在剑道ui中做到这一点

问候，

斯里兰卡

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T09:53:59.653

通过 listview 为您的 CSS 定义添加前缀`id`，区分一个和另一个。

给定 ListViews 的 HTML：

```
<div id="ListView1"></div>
<div id="ListView2"></div> 
```

和一个 JavaScript：

```
$("#ListView1").kendoListView({
    dataSource: sharedDataSource,
    selectable: true,
    template: "<li>${title} ${year}</li>"
});
$("#ListView2").kendoListView({
    dataSource: sharedDataSource,
    selectable: true,
    template: "<li>${title} ${year}</li>"
}); 
```

CSS 定义类似于：

```
#ListView1 .k-state-selected {
    background: red;
}
#ListView2 .k-state-selected {
    background: blue;
} 
```

# ruby - 如何使用 Activerecord 从 db-table 中解析 yaml-config？

> ID：13562253
> 
> 赞同：0
> 
> 时间：2012-11-26T09:49:47.063
> 
> 标签：ruby, activerecord, ruby-on-rails-3.2

我的数据库中有一个表，它将配置保存为 yaml 文件。相应的列称为`config`。

我想阅读前 5 个配置条目，并将它们转换回 yaml。

我在rails控制台中试过，如下：

`Person.pluck(:config).first(5).each do {|c| c.to_yaml}`

这似乎是完全错误的，我知道。让我绊倒的第一件事：

*   为什么会`Person.first(5).pluck(:config)`产生 NoMethodError？
*   按照我上面的方式进行操作将首先提取所有配置，然后检索前 5 行，对吗？如何加快查询速度？

第二个问题：

*   什么是正确的方法，遍历返回的表行（例如前 5 行），并通过`to_yaml`-method 将每个配置列的内容转换回 yaml？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T10:00:57.287

> 为什么 Person.first(5).pluck(:config) 会产生 NoMethodError？

它产生 a`NoMethodError`因为您试图将消息发送`pluck`到没有这种方法的数组。

> 按照我上面的方式进行操作将首先提取所有配置，然后检索前 5 行，对吗？如何加快查询速度？

对，那是正确的。如果您想从前五个记录中提取配置，请使用`limit`：

```
Person.limit(5).pluck(:config) 
```

有关如何将`config`值解析为 YAML 的信息，请参阅[此线程](http://www.ruby-forum.com/topic/207363)。

# redirect - 如何让 IIS 6 将 .html 页面解析为 ASP

> ID：13562254
> 
> 赞同：0
> 
> 时间：2012-11-26T09:49:47.553
> 
> 标签：redirect, asp-classic, iis-6

我有一个站点，其中包含几个要更改为 ASP 页面的 .html 页面。我想创建一个从每个旧 .html 页面到新 .asp 页面的 301 重定向，并且该站点位于 IIS 6 上。

我认为使用 Windows 的唯一解决方案是在 IIS 中添加所有重定向，但这很耗时，因为页面很多，而且我在共享服务器上，所以主机不会这样做。

另一个想法是让 IIS 将 .html 文件解释为 ASP，然后我可以将 ASP 标记添加到每个页面以创建重定向。只要不影响其他站点并且不需要很长时间，主机就可以这样做。这可能吗？如何？除非有更快的解决方案来添加 301 重定向，否则我自己做这项工作没有问题，只要他们做的很快。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T10:07:20.247

1.  打开 IIS
2.  选择您的网站
3.  按右键单击鼠标按钮并单击属性
4.  选择主目录选项卡并单击配置按钮
5.  在应用程序映射中&如果 .html 扩展名是他们的&选择它&单击编辑按钮
6.  在编辑对话框中在可执行文本框中添加“C:\WINNT\System32\inetsrv\asp.dll”或 asp.dll 的路径并按确定...

你完成了这个，现在你的 .html 页面将处理 asp 代码......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-28T13:38:04.687

Another way to do a mass redirect using ASP classic on IIS6 is to set your 404 error page to an ASP file. That file then uses logic to redirect a .html file to the .asp equivalent. This is a very efficient and powerful way of handling redirects on II6 without having to modify server settings or configurations (well, other than just the initial custom error page).

Please note you should also set your 500 server errors to use the same ASP page. This way it can also deal with "Directory listing denied" on virtual directories and know how to redirect them (or just display a 404).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T10:06:25.807

对于重定向，您可以使用 Javascript 之类的客户端脚本，也可以使用经典 asp 之类的服务器端脚本。但是您需要更改页面的扩展名。所以你可以在你的页面上使用这个脚本

```
 <script type="text/javascript">
window.location="http://yourLocation";
</script> 
```

当您转到您的页面时，这将重定向到您在此处提到的位置。您`window.location="http://www.google.com";`现在可以进行测试。

# vsto - 让自定义上下文菜单和自定义选项卡同时工作

> ID：13562259
> 
> 赞同：0
> 
> 时间：2012-11-26T09:50:02.203
> 
> 标签：vsto, outlook-2010

我的 Outlook 2010 插件需要邮件项目上下文菜单中的一个自定义按钮和两个自定义功能区（一个用于新邮件消息，另一个用于消息阅读）。

为了使自定义菜单正常工作，我使用了这个：

```
protected override Microsoft.Office.Core.IRibbonExtensibility CreateRibbonExtensibilityObject()
{
    return new crmContextMenu(); //my custom context menu
} 
```

但是当我这样做时，其他丝带不会出现。然后我尝试了另一个覆盖：

```
protected override Microsoft.Office.Tools.Ribbon.IRibbonExtension[] CreateRibbonObjects()
    {
        Microsoft.Office.Tools.Ribbon.IRibbonExtension crmCM = new crmContextMenu() as Microsoft.Office.Tools.Ribbon.IRibbonExtension;
        return new Microsoft.Office.Tools.Ribbon.IRibbonExtension[] { new ReadRibbon(), new ComposeRibbon(), crmCM };
    } 
```

并且自定义上下文菜单不显示。我怎样才能让它们“共存”？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T10:57:00.837

没关系，我解决了将设计器中制作的功能区导出到 XML 并使用 GetCustomUI() -> GetResourceText() 方法的问题。

# java - 如何在 HQL 中编写类似查询

> ID：13562261
> 
> 赞同：22
> 
> 时间：2012-11-26T09:50:04.667
> 
> 标签：java, hibernate, hql, sql-like

我想搜索以特定字母开头的特定字符串。

因此，例如，如果起始字母是`'A'`那么它应该产生一个结果，其中将包含所有带有字母的字符串`'A'`。

我该如何做到这一点？

我的查询如下所示：

```
Query qry = session.createQuery("From RegistrationBean as rb where rb."+searchCriteria+"  like %?%");
qry.setString(0,searchField); 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-26T10:01:11.860

将您的查询更改为：

```
Query qry = session.createQuery("From RegistrationBean as rb where rb."+searchCriteria+"  like ?");
qry.setString(0, "%"+searchField+"%"); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-11-26T09:57:39.413

您可以使用标准来使用 like

```
session = sessionFactory.openSession();
Criteria query = session.createCriteria(Pojo.class);
query.add(Restrictions.like("column", "a", MatchMode.START)); 
```

它将为您提供以 alpha-bate 'a' 开头的字符串列表。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-04-14T12:28:38.697

改成

```
Query qry = session.createQuery("From RegistrationBean as rb where rb ";
if (searchField != null)
{
    qry = qry + " where rb.searchCriteria like :searchField ";
}
if ( searchField!= null)
{
    query.setString("searchField","%"+searchField+"%");
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-11-26T10:33:35.137

这边走

```
createQuery("from RegistrationBean as rb where rb.:searchCriteria like '%:searchField%'"); 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-11-26T10:02:02.270

```
Query qry = session.createQuery("From RegistrationBean as rb where rb."+searchCriteria+" like :sf");
qry.setString("sf",'%'+searchField+'%'); 
```

上面的东西对我有用:)

# iphone - 将 EXIF 标记“ImageUniqueID”添加到图像

> ID：13562264
> 
> 赞同：2
> 
> 时间：2012-11-26T09:50:19.030
> 
> 标签：iphone, ipad, cocoa-touch, exif, javax.imageio

我在将 EXIF 数据添加到从 UIImagePickerControl 捕获的图像中取得了一些巨大的成功......主要遵循其他问题的示例。IE

1.  [UIImagePickerController 并从现有照片中提取 EXIF 数据](https://stackoverflow.com/questions/1238838/uiimagepickercontroller-and-extracting-exif-data-from-existing-photos)
2.  [为图像设置 exif 数据时出现问题](https://stackoverflow.com/questions/5125323/problem-setting-exif-data-for-an-image)

但我从未设法（设置然后检索）ImageUniqueID 标签（kCGImagePropertyExifImageUniquID）

我尝试了各种组合：

```
NSMutableDictionary *EXIFDictionary = [[[metadataAsMutable objectForKey:(NSString *)kCGImagePropertyExifDictionary]mutableCopy]autorelease];

[EXIFDictionary setObject:@"1234" forKey:(NSString*)kCGImagePropertyExifImageUniquID];

//[EXIFDictionary setObject[NSNumber numberWithInt:1234] forKey:(NSString*)kCGImagePropertyExifImageUniquID];

[metadataAsMutable setObject:EXIFDictionary forKey:(NSString *)kCGImagePropertyExifDictionary];

//then save the mutable data back to Image 
```

我使用此方法设置的所有其他 EXIF、TIFF 和 IPTC 密钥都成功保存，然后使用类似方法检索。

任何想法如何设置这个值？

# rest - 使用 Windows 8 应用程序导航到另一个 HTML

> ID：13562272
> 
> 赞同：0
> 
> 时间：2012-11-26T09:50:46.090
> 
> 标签：rest, windows-8, navigation, xmlhttprequest

我的代码是：

```
var userName = document.getElementById("txtSearch").value;
    var xhr = new XMLHttpRequest();
    xhr.open("POST", "http://www.rest.net/services/abc.svc/json/GetXml", true);
    xhr.responseType = "text";
    xhr.setRequestHeader("Content-Type", "text/xml;charset=UTF-8");
    var packet = '<?xml version="1.0" encoding="utf-8" ?><CompanyRequest xmlns="http://schemas.datacontract.org/2004/07/abc.DomainModel" xmlns:i="http://www.w3.org/2001/XMLSchema-instance"><CompanyName>company</CompanyName></CompanyRequest>';
    xhr.onreadystatechange = function () {
        if (xhr.readyState==xhr.DONE) {            
            var parser = new DOMParser();
            var response = parser.parseFromString( xhr.responseText, "text/xml");
            var n = response.getElementsByTagName("CompanyResponse");               
            for (var i = 0; i < n.length; i++) {
                var p = n[i].getElementsByTagName("CompanyList1");
                for (var j = 0; j < p.length; j++) {
                    var l = p[j].getElementsByTagName("Company");
                    for (var k = 0; k < l.length; k++) {
                        var a = l[k].getElementsByTagName("Id")[0].firstChild.nodeValue;

                        if (a != null) {
                            sessionStorage.setItem(1, a);
                            WinJS.Navigation.navigate("Search.html");
                        }
                    }
                }
            }
        }
    }

    xhr.send(packet); 
```

我对此很陌生。我想在按钮单击时导航到 search.html 页面。但事实并非如此......我无法理解它有什么问题......帮帮我..

提前致谢..........

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T17:09:05.223

如果您使用的是 Visual Studio 中的导航模板，那么您需要：

*   确保您的主页已使用该名称注册
*   确保正在实例化 Page 控件

WinJS.Navigation 命名空间**不适**用于将应用程序导航到 Internet 网址；它旨在管理应用程序中的导航*，*例如您的包中已有的文件。

如果您尝试导航整个应用程序，您可以将 window.location.href 设置为您希望导航到的完整 URL。这将拆除您当前的脚本状态并将您批发到该页面。

如果您确实在使用单页导航，我建议您进入您拥有的导航调用，并查看它引导您验证您已正确注册目的地的位置，并且导航模板示例代码正在工作。

# c# - 序列化/反序列化和非默认构造函数

> ID：13562277
> 
> 赞同：1
> 
> 时间：2012-11-26T09:51:08.710
> 
> 标签：c#, serialization, reflection, attributes, initialization

考虑这个类：

```
[Persistable]
public sealed class FileMoveTask : TaskBase
{
     [PersistMember]
     public string SourceFilePath { get; private set;}

     [PersistMember]
     public string DestFilePath { get; private set;}

     public FileMoveTask(string srcpath, string dstpath)
     {
         this.SourceFilePath = srcpath;
         this.DestFilePath = dstpath;

         //possibly other IMPORTANT initializations
     }

     //code
} 
```

我可以通过使用属性序列化所有成员来持久化此类的对象`PersistMember`。但是我在反序列化过程中遇到了一些问题（设计问题）。特别是，问题在于构造函数中可能存在的*“可能存在其他重要的初始化”*，程序员可能决定**不让**少数成员持久化（即不添加`PersistMember`到它们），因为这没有意义。

在这种情况下，我如何将对象反序列化到与它完全相同的状态？我想，这个问题归结为：我将如何调用非默认构造函数，将*相同*的参数传递给它，这是之前传递的？有没有办法做到这一点？我们可以制定一些可以由编译器强制执行的规则（某种元编程）吗？构造函数属性可以在这里提供帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T11:36:03.713

解决这个问题的最简单方法是使用现有的众所周知的技术。例如，看看 .NET 框架中使用的其他序列化机制（您会注意到巨大的多样性是什么）。

例如，在[BinaryFormatter](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.formatters.binary.binaryformatter%28v=vs.71%29.aspx)、[SoapFormatter](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.formatters.soap.soapformatter%28v=vs.110%29.aspx)和[DataContractSerializer](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.datacontractserializer.aspx)中，使用以下技术来反序列化对象：

1.  通过调用[FormatterServices.GetUnitializedObject获取“原始”对象](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.formatterservices.getuninitializedobject.aspx)
2.  在构造对象上调用单独的预序列化方法（通过检查标有[OnSerializingAttribute](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.onserializingattribute.aspx)的方法）。
3.  反序列化对象的状态（通过检查适当的属性来了解序列化程序应该跳过哪些字段以及应该反序列化哪些字段）。
4.  在反序列化对象上调用序列化后方法（通过检查标有[OnSerializedAttribute](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.onserializedattribute.aspx)的方法）。

另一方面，[XmlSerializer](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx)使用完全不同的算法：它需要无参数构造函数，应该用作“预序列化”和“后序列化”步骤。

所以我的观点是它完全取决于序列化程序的类型及其实现。并且仍然需要序列化程序的作者和序列化程序的消费者都付出一些精神上的努力。

所以我强烈建议使用现有技术之一，但不要发明轮子（比如添加一些其他自定义属性来恢复对象的状态）。您甚至可以使用现有属性来简化从 .NET 序列化工具到自定义序列化机制的迁移（以及使用其他属性，例如[NonSerializableAttrubite](http://msdn.microsoft.com/en-us/library/system.nonserializedattribute.aspx)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T10:12:40.170

你可以通过两种方式解决这个问题。使用约定优于配置（将构造函数参数命名为属性并且不包括默认构造函数）：

```
[Persistable]
public sealed class FileMoveTask : TaskBase
{
     [PersistMember]
     public string SourceFilePath { get; private set;}

     [PersistMember]
     public string DestFilePath { get; private set;}

     public FileMoveTask(string sourceFilePath, string destFilePath)
     {
         this.SourceFilePath = srcpath;
         this.DestFilePath = dstpath;

         //possibly other IMPORTANT initializations
     }

     //code
} 
```

使用您的属性显式标记构造函数参数并搜索已标记的构造函数：

```
[Persistable]
public sealed class FileMoveTask : TaskBase
{
     [PersistMember]
     public string SourceFilePath { get; private set;}

     [PersistMember]
     public string DestFilePath { get; private set;}

     public FileMoveTask([PersistMember("SourceFilePath")]string srcpath, [PersistMember("DestFilePath")]string dstpath)
     {
         this.SourceFilePath = srcpath;
         this.DestFilePath = dstpath;

         //possibly other IMPORTANT initializations
     }

     //code
} 
```

属性或参数名称不是用来知道要设置哪个属性，而是要知道在调用构造函数时要使用序列化数据中的哪些信息。

# javascript - 使用 jsGauge 创建 Gauge

> ID：13562282
> 
> 赞同：2
> 
> 时间：2012-11-26T09:51:25.290
> 
> 标签：javascript, jquery, jquery-ui, jsgauge

我正在使用 jsGauge 创建一个仪表

此链接中的答案[使用 jsgauge 创建仪表](https://stackoverflow.com/questions/13469427/create-a-arraylist-in-net)对我有帮助，但我正在尝试制作一个可以显示百分比的仪表，例如 55.57%。

如 jsgauge 插件页面[http://code.google.com/p/jsgauge/](http://code.google.com/p/jsgauge/)所示 ，第四个仪表显示值 10.55。是否可以使用 jsgauge 和答案中显示的示例，如果可以，如何做到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T04:07:59.380

您可以为此使用 valueFormat 选项。例如：

```
 valueFormat: function (value, decimals) {
                  return value.toFixed(decimals) + '%';
              } 
```

* * *

您可能还需要指定一个`decimals`选项以确保正确的小数位数：

```
options = {
    ...
    decimals: 2,
    ...
 } 
```

这有帮助吗？

# c# - 使用按字母顺序排列的人名填充表

> ID：13562283
> 
> 赞同：0
> 
> 时间：2012-11-26T09:51:30.680
> 
> 标签：c#

我在客户端动态创建一个表并用人名列表填充它。

```
sbData.Append("<table>");
    int iColumnCounter = 1;
    sbData.Append("<tr>");

    foreach (int _iPerId in lsiPeople)
    {
        if (iColumnCounter == 5)
        {
            iColumnCounter = 1;
            sbData.Append("</tr><tr>");
        }

        string sName = GetPersonName(_iPerId);
        DropDownList_Student.Items.Add(new ListItem(sName, _iPerId.ToString()));
        sbData.AppendFormat("<td><input class=\"studentCheckBox\" type=\"checkbox\" onClick=\"UpdateSelectedCounter()\" id={0} name=\"{1}\" value={0}>{1}</td>", _iPerId, sName);
        iColumnCounter++;
    }

    sbData.Append("</tr>");
    sbData.Append("</table>"); 
```

名称已按字母顺序排序，但正如您所见，这会将它们从左到右输入，跳过一列。当它达到 4 列时，它将转到下一行。

我希望它从上到下在一列中，然后到下一列，所以它会像

```
______
|A|C|L|
|A|F|N|
|C|K|N| 
```

想象这些字母是人的第二个名字的第一个字母。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T11:22:34.783

如果您想要一个 4x4 表，按字母顺序向下，则索引如下：

```
*/
[0][4][8][12]
[1][5][9][13]
[2][6][10][14]
[3][7][11][15]
*/ 
```

所以你想要做的是这样的：

```
 sbData.Append("<table>");
    int iColumnCounter = 0;
    sbData.Append("<tr>");

    for(int i = -4; i < lsiPeople.count; )
    {
        iColumnCounter++;
        i+=4;
        if(5 == iColumnCounter)
        {
            iColumnCounter = 1;
            i = i - 15;//we want the index to go back to start of next row
            sbData.Append("</tr><tr>");
        }
        string sName = GetPersonName(i);
        DropDownList_Student.Items.Add(new ListItem(sName, _iPerId.ToString()));
        sbData.AppendFormat("<td><input class=\"studentCheckBox\" type=\"checkbox\" onClick=\"UpdateSelectedCounter()\" id={0} name=\"{1}\" value={0}>{1}</td>", _iPerId, sName);
    }

    sbData.Append("</tr>");
    sbData.Append("</table>"); 
```

# jquery - jQuery.Masonry 的问题

> ID：13562285
> 
> 赞同：1
> 
> 时间：2012-11-26T09:51:37.750
> 
> 标签：jquery, html

我有个问题。当页面加载时放置照片不是，并且相互叠加。

**CSS：**

```
 body {background: #fefefe; color:#333; line-height:200%;}
.item {
    float:left /* ОБЯЗАТЕЛЬНО задаем блокам float */; 
    border:1px solid black;
    -webkit-transition-duration: 0.5s;
            -moz-transition-duration: 0.5s;
        -o-transition-duration: 0.5s;
    transition-duration: 0.5s;
} 
```

**JS：**

```
function ImagesStart(id) {
    var Images = [
        "photes/сайт002",
        "photes/сайт003",
        "photes/сайт004",
        "photes/сайт005",
        "photes/сайт006",
        ];
    for (var i = 0; i < Images.length; i++) {
        $("#" + id).append("<img id = '" + i + "' src = '" + Images[i] + "мал.jpg'class = 'item' onmouseover = 'over(this)' onmouseout = 'out(this)'>")
    }
}

$(document).ready(function() {
    ImagesStart("container");
    $('#container').masonry({
        itemSelector: '.item',
        singleMode: false,
        resizeable: true,
        //isAnimated: !Modernizr.csstransitions
    });
}); 
```

和截图。

![](../Images/72940bb56bcb807068f02438e20fd594.png)

如果您启动以更改浏览器窗口的大小，则一切正常。有什么问题？

![](../Images/341944b65e2c65285fc7544f65b84626.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T10:25:29.237

您需要使用[`imagesLoaded`](http://masonry.desandro.com/demos/images.html)插件，它基本上会延迟操作`window.load`，即在加载所有资产之后：

```
var $container = $('#container');

$container.imagesLoaded( function(){
  $container.masonry({
    itemSelector : '.box'
  });
}); 
```

为了实现这一点，您不应该通过 js 对图像进行 DOM 注入，而是更好地将它们提供到原始 HTML 文档中。

# visual-studio-2010 - 从 Matlab 调用 Visual Studio 的 link.exe 失败

> ID：13562295
> 
> 赞同：1
> 
> 时间：2012-11-26T09:52:19.563
> 
> 标签：visual-studio-2010, matlab, mex

对于在 Matlab 中*构建自定义 mex 文件*，我试图通过以下方式从 Matlab 命令 shell 调用 Visual Studio 2010 的 link.exe：

```
>> !link 
```

完全没有效果。使用 Matlab 的“dos”的替代调用返回错误值：

```
>> dos('link')
   ans = -1.0737e9 
```

但是，直接从外部 Windows shell 调用链接可执行文件效果很好。

如何从 Matlab中调用**link.exe ？**任何帮助将不胜感激！

*   操作系统：Win7 32位
*   Matlab：R2012a
*   Visual Studio C++ 2010 速成版

谢谢，彼得

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T10:21:07.720

检查您是否在 link.exe 的源代码中返回正确的值。

dos('testapp.exe') 和 system('testapp.exe') 都应该可以工作...如果您详细说明问题（link.exe 的输入和输出），有人可能会为您提供帮助。

# silverlight - 根据 wp7 中的有界值更改文本块属性

> ID：13562296
> 
> 赞同：2
> 
> 时间：2012-11-26T09:52:21.537
> 
> 标签：silverlight, windows-phone-7, xaml

我有一个带有属性 ItemsSource="{Binding}" 的列表框，并且我在其中放置了一些文本块，例如。状态、名称、日期等。我正在像这样以编程方式设置它。

listBox.ItemsSource = SomeController.GetSomeList();

状态字段是我的类模型中的布尔字段，我想在状态字段中显示打开和关闭，而不是显示真假，但我找不到任何可以执行此操作的事件。我们没有任何像 onrowcreated 或类似的事件，我可以根据它的值更改 textblock 的属性。

谢谢Yama，但我自己找到了一个更简单的解决方案:)

我使用来自我的模型类的数据设置文本块，并在我的 CS 文件中描述加载的事件。在那次事件中，我写了

```
 if (Boolean.Parse(((TextBlock)sender).Text) == true)
        {
            ((TextBlock)sender).Text = "Opened";
        }
        else
        {
            ((TextBlock)sender).Text = "Closed";
        } 
```

我可以通过这个更改所有文本块的属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T10:45:38.520

感谢 Yama，但我自己找到了一个更简单的解决方案 :) 我使用来自我的模型类的数据设置文本块，并在我的 CS 文件中描述加载的事件。在那次事件中，我写了

if (Boolean.Parse(((TextBlock)sender).Text) == true) { ((TextBlock)sender).Text = "Opened"; } else { ((TextBlock)sender).Text = "关闭"; 我可以通过这个更改所有文本块的属性

# ios - iCloud 用于保存相当频繁的游戏状态更改

> ID：13562298
> 
> 赞同：4
> 
> 时间：2012-11-26T09:52:29.837
> 
> 标签：ios, icloud

我想在我的应用程序中实现 iCloud：这是一个简短的游戏。一轮需要 3-5 分钟，然后你会得到经验值、硬币或其他任何东西。它实际上只有 5 个键值对，并且仅在每一轮后更新。除了同步问题，[苹果文档](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/UserDefaults/StoringPreferenceDatainiCloud/StoringPreferenceDatainiCloud.html)指出：

> 键值存储旨在存储不经常更改的数据。如果设备上的应用程序对键值存储进行频繁更改，系统可能会延迟某些更改的同步，以尽量减少与服务器的往返次数。应用程序进行更改的频率越高，以后的更改就越有可能被推迟并且不会立即显示在其他设备上。

考虑到我的数据的简单性和大小，我仍然会选择键值存储，但在我读完这篇文章后，我不太确定。[Apple 建议](https://developer.apple.com/library/ios/#documentation/General/Conceptual/iCloudDesignGuide/Chapters/Introduction.html)为复杂的应用程序状态存储文档，为简单的应用程序状态存储键值。所以我的问题是：

当数据经常变化时，即使我的数据那么简单，使用文档存储是否更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-13T22:12:43.233

关键值是一团糟。它不会与 icloud 快速同步，同步是由操作系统控制的。太令人沮丧了。使用文档/核心数据

# sql - 更改具有数百万行的现有表的列长度

> ID：13562301
> 
> 赞同：0
> 
> 时间：2012-11-26T09:52:33.130
> 
> 标签：sql, sybase

我需要将 VARCHAR 字段的列长度从 50 扩展到 250。表中已经有 100 万多行需要更改。

扩展该领域是否存在任何风险？这是 Sybase 执行的快速过程还是可能需要很长时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T16:41:28.537

它应该非常快，因为您只更改元数据。

要 100% 确定明确指定 NULL/NOT NULL，以避免会话默认设置出现问题。

# c# - C# 字符串比较 'ö' 'oe' 'o'

> ID：13562304
> 
> 赞同：2
> 
> 时间：2012-11-26T09:52:39.860
> 
> 标签：c#, string-comparison, culture

> **可能重复：**
> [如何识别拼写不同的相似词](https://stackoverflow.com/questions/3091257/how-to-recognize-similar-words-with-difference-in-spelling)

我试图在比较这 3 个字符串时返回 true：'voest'、'vost' 和 'vöst'（德国文化），因为它是同一个词。（事实上​​，只有 oe 和 ö 是相同的，但例如对于 DB 排序规则 CI，它是相同的，这是正确的，因为 'vost' 是一个错误输入的 'voest'）

string.Compare(..) / string.Equals(..) 无论我为该方法提供什么参数，都总是返回 false。

如何使 string.Compare() / Equals(..) 返回 true ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T10:33:55.777

您可以创建一个忽略变音符号的自定义比较器：

```
class IgnoreUmlautComparer : IEqualityComparer<string>
{
    Dictionary<char, char> umlautReplacer = new Dictionary<char, char>()
    {
        {'ä','a'}, {'Ä','A'},
        {'ö','o'}, {'Ö','O'},
        {'ü','u'}, {'Ü','U'},
    };
    Dictionary<string, string> pseudoUmlautReplacer = new Dictionary<string, string>()
    {
        {"ae","a"}, {"Ae","A"},
        {"oe","o"}, {"Oe","O"},
        {"ue","u"}, {"Ue","U"},
    };

    private IEnumerable<char> ignoreUmlaut(string s)
    {
        char value;
        string replaced = new string(s.Select(c => umlautReplacer.TryGetValue(c, out value) ? value : c).ToArray());
        foreach (var kv in pseudoUmlautReplacer)
            replaced = replaced.Replace(kv.Key, kv.Value);
        return replaced;
    }

    public bool Equals(string x, string y)
    {
        var xChars = ignoreUmlaut(x);
        var yChars = ignoreUmlaut(y);
        return xChars.SequenceEqual(yChars);
    }

    public int GetHashCode(string obj)
    {
        return ignoreUmlaut(obj).GetHashCode();
    }
} 
```

现在您可以将此比较器与以下`Enumerable`方法一起使用[`Distinct`](http://msdn.microsoft.com/en-us/library/bb338049.aspx)：

```
string[] allStrings = new[]{"voest","vost","vöst"};
bool allEqual = allStrings.Distinct(new IgnoreUmlautComparer()).Count() == 1;
// --> true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T10:04:19.857

您可以在比较时尝试[IgnoreNonSpace](http://msdn.microsoft.com/en-us/library/system.data.sqltypes.sqlstring.ignorenonspace.aspx)选项。它不会解决voest - vost，但会帮助vost-vöst。

```
int a = new CultureInfo("de-DE").CompareInfo.Compare("vost", "vöst", CompareOptions.IgnoreNonSpace);
// a = 0; strings are equal. 
```

# php - 在弹出 java 脚本警报消息时隐藏 html 控件

> ID：13562307
> 
> 赞同：0
> 
> 时间：2012-11-26T09:52:49.820
> 
> 标签：php, javascript, html, alert

当弹出警报消息时，我需要隐藏按钮等 html 控件。最初，一些控件是隐藏的，但是当弹出警报消息时，它会显示控件。如何在弹出警报消息时隐藏控件。下图显示了问题..

```
<html>
<head>
<script>
function disableElements()
{
    document.getElementById("name").disabled=true;
    document.getElementById("link").disabled=true;
    document.getElementById("s1").style.display="none";
    document.getElementById("c1").style.display="none";
    document.getElementById("ex1").style.display="none";
    document.getElementById("u1").style.display="none";
    document.getElementById("u2").style.display="none";
    document.getElementById("se1").style.display="none";
    document.getElementById("ladd").style.display="none";
    document.getElementById("ledit").style.display="none";
    document.getElementById("lfind").style.display="none";
    document.getElementById("ldel").style.display="none";
}
function addenable()
{
    document.getElementById("name").disabled=false;
    document.getElementById("link").disabled=false;
    document.getElementById("s1").style.display="inline";
    document.getElementById("c1").style.display="inline";
    document.getElementById("ex1").style.display="inline";
    document.getElementById("a1").style.display="none";
    document.getElementById("e1").style.display="none";
    document.getElementById("f1").style.display="none";
    document.getElementById("d1").style.display="none";
    document.getElementById("u1").style.display="none";
    document.getElementById("u2").style.display="none";
    document.getElementById("ladd").style.display="inline";
    document.getElementById("ledit").style.display="none";
    document.getElementById("lfind").style.display="none";
    document.getElementById("ldel").style.display="none";
}
</script>
</head>
<body onload="disableElements()">
<form method="post" action="#">
<input type="button" name="add" id="a1" value="Add" onclick="addenable()"/>
<input type="button" name="edit" id="e1" value="Edit"/>
<input type="button" name="find" id="f1" value="Find"/> 
<input type="button" name="delete" id="d1" value="Delete"/>
<input type="submit" name="save" id="s1" value="Save"/>
<input type="submit" name="update" id="u1" value="Update"/>
<input type="submit" name="remove" id="u2" value="Update"/>
<input type="reset" name="cancel" id="c1" value="Cancel"/>
<input type="button" name="exit" id="ex1" value="Exit" onclick="javascript:history.go(0);" />

    <table id="tbl1" width="100%" border="0" >
    <tr>
        <td><label>Name :</label></td>
        <td>&nbsp;</td>
        <td><input type="text" name="Name" size="40px" id="name" /></td>
        <td></td>
        <td><label>Website :</label></td>
        <td>&nbsp;</td>
        <td><input type="text" name="Link" size="40px" id="link" /><br/></td>
    </tr>
    <tr>
        <td><input type="button" name="search" id="se1" value="Search"/></td>
    </tr>
</table>
</form>
</body>
</html>

<?php
if(isset($_POST["save"]))
{
    if(($_POST["Name"] == '') || ($_POST["Link"] == ''))
        {
            echo '<script type="text/javascript">alert("insert values....!")</script>';
        }
        else
        {
    $name = $_POST["Name"];
    $link = $_POST["Link"];

        #inserting values
        $insert = mysql_query("INSERT INTO data (Name, Link) VALUES ('$name','$link')");
        if(!$insert)
            {
                //die ("Error". mysql_error());
                echo '<script type="text/javascript">alert("Duplicate Entry!")</script>';
            }
        else
            {
                echo '<script type="text/javascript">alert("Record Save Successflly!")</script>';
            }
    }
}

?> 
```

![在此处输入图像描述](../Images/b1fbb82941763873ea2f19a83347d1bc.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T10:07:54.973

如果我是你，我会创建一个这样的函数来覆盖我的整个文档并调用 alert()。

```
 function hideAll(){
            var div = $('<div id="div-cover" style="background:rgba(3,3,3,.7);display:block;position:absolute;left:0px;top:0px;z-index:1000;"></div>');
            $(div).width($(document).width()).height($(document).height());
            $(document.body).prepend(div);
        }
        function showAll(){
            $('#div-cover').remove();
        } 
```

并称它为：

```
hideAll();
alert();
showAll(); 
```

和

如果您只想隐藏某些元素。给它一些共同点。这里我使用 html5 数据属性和 javascript querySelectorAll，没有 jQuery。

```
 <input type="button" data-group="grp1" name="add" id="a1" value="Add" onclick="addenable()"/>
    <input type="button" data-group="grp1" name="edit" id="e1" value="Edit"/>
    <input type="button" data-group="grp1" name="find" id="f1" value="Find"/> 
    <input type="button" data-group="grp1" name="delete" id="d1" value="Delete"/>
    <input type="submit" data-group="grp1" name="save" id="s1" value="Save"/>
    <input type="submit" data-group="grp1" name="update" id="u1" value="Update"/>
    <input type="submit" data-group="grp1" name="remove" id="u2" value="Update"/>
    <input type="reset" data-group="grp1" name="cancel" id="c1" value="Cancel"/>
    <input type="button" data-group="grp1" name="exit" id="ex1" value="Exit" onclick="javascript:history.go(0);" />

    <script type="text/javascript">

        function hideAll(){
            var arr = document.querySelectorAll('[data-group="grp1"]');
            for(var i=0;i<arr.length;i++){
                arr[i].style.display = 'none';
            }
        }
        function showAll(){
            var arr = document.querySelectorAll('[data-group="grp1"]');
            for(var i=0;i<arr.length;i++){
                arr[i].style.display = 'inline';
            }
        }
    </script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T10:00:37.667

尝试`$("#ex1").hide()`使用 jquery

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T10:00:33.403

代替：

```
echo '<script type="text/javascript">alert("Duplicate Entry!")</script>'; 
```

和：

```
echo '<script type="text/javascript">disableElements();alert("Duplicate Entry!");</script>'; 
```

调用警报时应该隐藏控件。

# javascript - Ruby/JS 实例变量作用域的区别

> ID：13562308
> 
> 赞同：1
> 
> 时间：2012-11-26T09:52:51.963
> 
> 标签：javascript, ruby

尝试学习 Ruby，在教程中，我在此[页面](http://www.ruby-lang.org/en/documentation/quickstart/2/)上遇到了以下代码：

```
class Greeter
  def initialize(name = "World")
    @name = name
  end
  def say_hi
    puts "Hi #{@name}!"
  end
  def say_bye
    puts "Bye #{@name}, come back soon."
  end
end 
```

我还被告知该`@name`变量是一个实例变量，并且它的作用域是类中的所有方法（在本例中为`Greeter`）。我对 JS 很熟悉，但在范围界定方面有点令人困惑。让我澄清一下。以下是我对JS中代码的理解：

```
function Greeter (name){
    name = (typeof name === "undefined") ? "World" : name;

    function say_hi (name){
        alert('Hi ' + this.name);
    };

    function say_bye (name){
        alert('Bye ' + this.name + ', come back soon.');
    };
}; 
```

所以在 ruby​​ 示例中，似乎有一个名为 的方法`initialize`，我猜在 ruby​​ 中，他们可以在参数中定义变量？在`initialize`其中定义了 var `@name`。在 JS 示例中，我明确抽象了 var 的命名`name`，通过声明`this.name`为 WITHIN `say_hi`&的名称`say_bye`。我理解这是一种很好的编码实践，可以区分范围，即使在这种情况下`name`在整个代码中保持不变，如果传递了一个空参数，则要么是“世界”，要么是作为参数传递的人的姓名。无论哪种方式，我都不确定 Ruby 中的作用域是如何工作的，因为我不知道这在 JS 中是可能的。拿上面的 JS 代码，比较一下：

```
function Greeter (name){

    function say_hi (name){
        this.name = (typeof name === "undefined") ? "World" : name;
        alert('Hi ' + this.name);
    };

    function say_bye (name){
        this.name = (typeof name === "undefined") ? "World" : name;
        alert('Bye ' + this.name + ', come back soon.');
    };
}; 
```

如果我未能`this.name`在子方法中声明 the ，则可能分别表示`Greeter`类变量`name`，而不是`say_hi`or`say_bye`变量`name`。

问题：

1 - 是否需要获得对类`@`中`@name`所有方法可见的能力，还是这个约定？如果是惯例，那`@`意味着什么？（我将其等同于`$this`在 JQuery 中声明的变量，它表示该变量是 JQuery 元素，与查询时不同`$('whatever')`）

2 - 该方法的`initialize`作用类似于类内的 getter/setter 方法`Greeter`吗？

3 - 非常欢迎您对我的逻辑、代码和问题的假设提出任何其他意见！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T10:30:49.777

`@`与javascript中的大致相同`this`，它指的是当前实例。类中的`initialize`方法是构造函数，而不是 getter/setter。

```
function Greeter( name ) { 
    /*Functions called with `new` return objects
     with their proto link pointing to the object
     pointed at function's .prototype property at the time of instanciation. */
    this.name = arguments.length < 1 ? "World" : name; //No real way to do optional arguments
}

Greeter.prototype.say_hi = function() {
    alert( "Hi " + this.name + "!" ); //Methods are defined outside on the `.prototype` object
};

Greeter.prototype.say_bye = function() {
    alert( "Bye " + this.name + ", come back soon." );
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T10:10:13.190

1.  `@`必须声明`@name`为实例变量，就像`{name : 'foo'}`在 js 中一样；
2.  `initialize`就像`Constructor`在`new Constructor(foo, bar)`js 中一样。当`new Constructor(foo, bar)`, ruby​​ 将调用`Constructor#initialize`参数`foo`和`bar`.

我认为将js与ruby进行比较并不是最好的；ruby 是基于类的 OOP，类似于 C++ 和 Java。

# c++ - 如何将数组的一部分从 int 转换为 float 并将值设置为另外两个数组

> ID：13562310
> 
> 赞同：2
> 
> 时间：2012-11-26T09:52:58.260
> 
> 标签：c++

编辑：我正在尝试和搜索，但没有找到如何在 (j==3) 浮动时仅转换部分，因为我需要评估（等级或 idk 确切的词）从 2 到 6 - 它可以是 3,5 ......所以我需要浮动。好的，检查我的代码：

```
#include <iostream>
#include <iomanip>

using namespace std;

int main()
{
  unsigned int m[25][4], a[25][4], b[25][4];
  int i,j,n,k=0,p=0,g=0,t=0;
  do
  {
    cout<<"Enter number of students: ";cin>>n;
  }
  while(!(n>0 && n<=25));

  for(i=0;i<n;i++)
  {
    cout<<"Student N:"<<i+1<<"\n";
    for(j=0;j<4;j++)
      if(j==0)
      {
        do
        {
          cout<<"Fak nomer: ";cin>>m[i][j];
        }
        while(!(m[i][j]>=10000000 && m[i][j]<100000000));
      }
      else if(j==1)
      {
        do
        {
          cout<<"Enter Speciallity - 52 for E, 61 for AIUT"<<endl;
          cout<<"Code: ";cin>>m[i][j];
        }
        while(!(m[i][j]==52 || m[i][j]==61));   
      }
      else if(j==2)
      {
        do
        {
          cout<<"Group: ";cin>>m[i][j];
        }
        while(!(m[i][j]==1 || m[i][j]==2 || m[i][j]==3 || m[i][j]==4));
      }
      else
      {
        //float f=m[i][j];(i tried to replace all m[i][j] with f but..)
        do
        {
          cout<<"Avg. evaluation: ";cin>>m[i][j];
        }
        while(!(m[i][j]>=2 && m[i][j]<=6));
        //m[i][j]=f; 
      }
    }
    for(i=0;i<n;i++)
    {
      for(j=0;j<4;j++)
        cout<<setprecision(8)<<m[i][j]<<"\t";
      cout<<endl;
    }
    cout<<endl; 
  } 
```

假设我们将使整个数组浮动，所以我需要根据两个新数组设置信息，因为它说：

```
if(m[i][1]==52)
   a[k][p]=m[i][j]
else if(m[i][1]==61)
   b[g][t]=m[i][j] 
```

实际上，我需要根据组代码显示它们，如果 52 显示只有 52 的数组......如果 61 只显示含有 61 的数组，则对它们进行某种排序......我尝试了一些方法，但我明白了：“ -9.2559631e+061" 我认为正如我所说我需要无符号数组来工作......编辑！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-21T16:17:41.317

不要使用从任意数字索引的数组来存储不同的数据项。你要做的就是让每个人都头疼。

```
struct Student
{
    unsigned int fak;
    unsigned int speciality;
    unsigned int group;
    float grade;
}

Student students[25];
students[20].group = 1.7f; 
```

在这个问题上，也请停止使用幻数（如果数字 25 出现两次，它应该是一个常数）。

```
const int studentCount = 25;
Student students[studentCount]; 
```

还有其他事情，但是请开始编写代码，命名所有内容，而不是要求我们、与您一起工作的人或下周您未来的自己试图弄清楚 j==3 代表什么......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T10:00:36.867

你不能。数组具有相同类型的所有条目。

不过，有几种方法可以解决它。首先是制作整个数组 type `float`。另一种是使用类似[Boost Any 类](http://www.boost.org/doc/libs/1_52_0/doc/html/any.html)的东西。

# spring - 如何在spring上设置hbase

> ID：13562311
> 
> 赞同：2
> 
> 时间：2012-11-26T09:52:59.667
> 
> 标签：spring, configuration, hadoop, installation, hbase

我在远程集群上安装了 Hbase，并成功使用 Hbase API 访问数据。但我需要通过 webapp 与数据交互。是否有任何 hello world 示例用于在 spring/JSF2 上使用必要的配置文件设置 hbase。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T20:56:39.403

在谷歌的顶部显示了这一点。

[http://static.springsource.org/spring-hadoop/docs/snapshot/reference/html/hbase.html](http://static.springsource.org/spring-hadoop/docs/snapshot/reference/html/hbase.html)

# extjs - 使用带有 extjs 的自动完成组合框

> ID：13562314
> 
> 赞同：2
> 
> 时间：2012-11-26T09:53:09.230
> 
> 标签：extjs, extjs4

我的情况是，我有一个编辑表单，它从网格的选定行中获取其数据。在这种形式中有一些“组合框”类型的字段，我正在使用自动完成属性：

```
 xtype: 'combobox',
    store: 'Paciente',
    forceSelection: true,
    typeAhead: true,
    pageSize: 10,
    fieldLabel: 'Paciente',
    name: 'paciente_id',
    valueField: 'id',
    displayField: 'nome',
    allowBlank: false,
    afterLabelTextTpl: required 
```

这是我的商店：

```
Ext.define('App.store.Paciente', {
  extend: 'Ext.data.Store',
  model: 'App.model.Paciente',
  pageSize: 10,
  proxy: {
      type: 'rest',
      format: 'json',
      url: 'pacientes',
      reader: {
          root: 'pacientes',
          totalProperty: 'totalCount'
      }
  }
}); 
```

该组合在使用时有效。但是当我在网格中选择一条线时，所有字段都会被填充，但组合不会。

```
gridSelectionChange: function(model, records) {
    if (records[0]) {
        this.getForm().load(records[0]);
    }
}, 
```

加载表单后，如何正确填写此组合？

**更新 1：工作代码**

我必须为每个组合框手动执行此操作。我以为这是一种自动方式..

```
if (records[0]) {
        this.getForm().loadRecord(records[0]);

        //updating current value for combo paciente 
        this.getStore('Paciente').add({nome: records[0].get('nome'), id: records[0].get('id')});
        this.getCombopaciente().select(records[0].get('paciente_id'));

        //updating current value for combo XYZ...
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T10:29:09.110

默认情况下，组合仅在扩展时加载商店。在您的情况下，它没有要显示的数据。您可以手动调用存储**加载**方法或在组合配置中设置自动加载属性。

# ruby-on-rails - 在javascript中创建哈希并在rails控制器中访问

> ID：13562316
> 
> 赞同：0
> 
> 时间：2012-11-26T09:53:18.500
> 
> 标签：ruby-on-rails

我在 java 脚本中创建了一个哈希并通过 Ajax 请求将其传递给控制器​​，但在控制器中我得到了字符串中的哈希

```
{1100:{time:\"1\", mark:\"1\", difficulty_level:\"3\"}, 1108:{time:\"1\", mark:\"1\", difficulty_level:\"3\"}} 
```

我尝试使用`JSON.parse`但出现错误`JSON::ParserError: 710: unexpected token at`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T10:01:12.177

您应该找到一种方法，通过使用一些 JavaScript 库（例如[JSON-js](https://github.com/douglascrockford/JSON-js "JSON-js")）和`JSON.stringify(myObject)`. JSON 要求所有字符串值（键和值等）都用引号引起来。

所以在你的情况下，正确的 JSON 看起来像这样（非引号转义）：

```
{1100:{"time":"1", "mark": "1", "difficulty_level": "3"}, 1108:{ "time":"1", "mark":"1", "difficulty_level": "3"}} 
```

# javascript - Javascript 正则表达式替换 src 内容

> ID：13562319
> 
> 赞同：4
> 
> 时间：2012-11-26T09:53:20.403
> 
> 标签：javascript, regex

我有一个带有 src 的图像标签，我想在 src 上添加一个网站 url，但前提是它不以 http:// 开头。到目前为止我有

```
content.replace(/(<img *src=")(.*?)"/, '$1' + this.websiteUrl + '$2"'); 
```

但我不知道如何做到不以 http:// 开头

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T09:56:10.793

使用负前瞻：

```
content.replace(/(<img *src=")(?!http:\/\/)(.*?)"/, '$1' + this.websiteUrl + '$2"'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T10:00:11.020

@Guffa 的模式就是答案。只是一些旁注：假设标记看起来像这样`<img alt="foo" src="foo/bar.png" />`，你的模式将不起作用，试试这个：

```
content.replace(/(<img.+src=")(?!http:\/\/)(.*?)"/,'$1' + this.websiteUrl + '$2"'); 
```

如果您打算将这个正则表达式用于整个 DOM（片段），请考虑使用解析器而不是正则表达式。[这是一个 X 浏览器](http://jsfiddle.net/d6cgf/1/)示例

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T09:56:57.090

如果你只是在前面加上一些文本，你真的不需要正则表达式。怎么样：

```
if /^http:\/\//.test(img.src)
    img.src = this.websiteUrl + img.src; 
```

`img`您要更改 src 属性的元素在哪里。

如果您没有 img 标签或其父标签之一作为对象，但您的 HTML 格式正确，则可以使用 a`DOMParser`来获取它们：

```
var parser = new DOMParser();
var doc = parser.parseFromString(html, "text/XML");
var collection = doc.getElementsByTagName("img");
for (var i = 0; i < collection.length, i++){
    if /^http:\/\//.test(collection[i].src)
        collection[i].src = this.websiteUrl + collection[i].src;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-07T12:12:33.493

就我而言，Elias Van Ootegem 提供的解决方案不起作用。我正在使用：

```
content.replace(/(<img[^]+?src=")(?!http:\/\/)(.*?)"/gi,'$1' + this.websiteUrl + '$2"'); 
```

即使 img 标签分布在 2 行甚至有多个 img 标签，这个也能工作

# javascript - 从 HTML 表格中获取单元格值

> ID：13562325
> 
> 赞同：1
> 
> 时间：2012-11-26T09:53:46.800
> 
> 标签：javascript, jquery, html-table

我有这样的表结构；

```
"<td>",
    "<table class='ead' name=\""+i+"\" id=\""+x+"\" border='0'>",
        "<tr id='e'>",
            "<td class='estimate' name=\""+i+"\" id=\""+x+"\">0</td>",
        "</tr>",
        "<tr id='a'>",
            "<td class='actual' name=\""+i+"\" id=\""+x+"\">"+keyVal[key]+"</td>",
        "</tr>",
        "<tr id='d' >",
            "<td class='difference' name=\""+i+"\" id=\""+x+"\">"+day_total+"</td>",
        "</tr>",
    "</table>",
"</td>" 
```

您可以看到`<td>`标签，因为它嵌套在另一个表中。在父表中有 5 列，但可能有数百行。子表中只有 1 列，并且只有 3 行。

我有一个功能可以让我编辑`<td>`行估计；

```
$(document).on("click", ".estimate", function() {
var myName = parseInt($(this).attr("NAME"));
var myId = parseInt($(this).attr("ID"));

$('.estimate').editable(function(value, settings) { 
    console.log(value);
    return(value);
 },
 {type      : 'textarea',
     //cancel    : 'Cancel',
     event     : 'dblclick',
     //submit    : 'OK',
     indicator : '<img src="images/indicator.gif">',
     tooltip   : 'Double-click this value to edit...',
     width     : '40px',
     height    : '21px',
     onblur    : 'submit'
 });
}); 
```

这工作正常，新值已发布到表中。问题是我需要用新值进行计算；所以我需要获取实际值并将差异（实际 - 新估计）发布到差异中。

我无法获得实际的独特价值。id=x 和 name=i 是将数据发布到表中的循环值的位置。

任何帮助表示赞赏！

克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T11:15:54.160

没关系，稍微改变一下结构就可以了……而不是循环值，我给了它自己的唯一索引，每次出现时递增 1。一旦我有了这个值，我就可以通过该值引用每个标签。

```
"<td class='estimate' name=\""+IdIndex+"\" id=\"estimate"+IdIndex+"\">0</td>", 
```

然后我只是做了总和；

```
IDVal = $(this).attr("ID");
NameVal = parseInt($(this).attr("NAME"));
$('.estimate').editable(function(value, settings) { 
    myActual = "#actual"+NameVal;
    myDiff = "#diff"+NameVal;
    $($(myDiff)).text(value - $(myActual).text());
    return(value); 
```

# php - 如何使用 Post Ajax 传递多维 JS 数组

> ID：13562326
> 
> 赞同：0
> 
> 时间：2012-11-26T09:53:51.527
> 
> 标签：php, javascript, ajax, post, multidimensional-array

我在使用 JS 多维数组和 ajax 时遇到问题，我尝试了很多方法并决定将数组连接到然后，在 php 上进行爆炸并获取数组。

我决定，如果像这样发送“公园”数组：

```
 $.post( VIEW+THEME+"ajax/insertPark.php", {
            p:Base64.encode(park),
    } 
```

我没有在 PHP 上得到数组。

加入不能正常工作，我不知道是不是因为我的数组看起来不像：[水果，食物，肉类]...

并在 console.log 测试 park.join 使该 park 成为字符串 '~'，没有其他数据。

```
var park = [];
    $.each(languajes, function(i, itemData) {
        park[i] = [];
        park[i]['idLanguaje']   = itemData['idLanguaje'];
        park[i]['name'] = $('#name-'+itemData['idLanguaje']).val();
    });

    console.log(park);
    console.log(park.join('~'));

    $.post( VIEW+THEME+"ajax/insertPark.php", {
            p:Base64.encode(park.join('~')),
    }, function(data) {
        //window.location.href='/';
    }, "json" ); 
```

知道我该怎么做吗？数组中的元素取决于数据库中语言的数量，（即：不同语言中的公园名称），可以是 ES,EN 或 ES,EN,RU,FR... 并且函数必须适应这一点。

谢谢指教！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T09:59:41.647

从您的数组中生成 json 并将其字符串化 -[在 jQuery 中序列化为 JSON](https://stackoverflow.com/questions/191881/serializing-to-json-in-jquery)

在 PHP 中使用 json_decode 函数

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T10:00:09.663

您可以尝试将您的数组编码为 JSON 吗？像这样的东西？

JS：

```
var parkString = JSON.stringify(park);
$.post( VIEW+THEME+"ajax/insertPark.php", {
        p: parkString,
} 
```

PHP：

```
$park = json_decode($_POST['p'], true); 
```

# jquery - jQuery 方法，JavaScript 中的变量范围

> ID：13562330
> 
> 赞同：1
> 
> 时间：2012-11-26T09:53:59.183
> 
> 标签：jquery, ajax, variables, scope

我有这样的代码：

```
function some_func_validate(some_id) {
    var variable_to_return = false; // i wanna use that
    $.ajax({
        type: 'GET',
        url: '/something/'+some_id+'/check',
        success: function(response){
            variable_to_return = true; // in this place
        }
    });
    return variable_to_return;
} 
```

因此，代码将返回错误值。我如何在不使用 HTML 文档的 DOM 的情况下为变量赋值，例如为某个标签的 html 属性赋值，然后通过 jQuery 获取？

如何在 JavaScript 中使用任何“全局”变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T09:58:26.697

由于ajax是异步的，你需要做这样的事情

```
function some_func_validate(some_id, cb) {

    $.ajax({
        url: '/something/'+some_id+'/check',
        success: function(response){
            cb(response);
        }
    });

} 
```

并使用它调用它

```
some_func_validate(some_id, function(response){
    //handle response here
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T10:14:57.660

[从 1.5 版开始，jQuery 提供了使用Defered](http://api.jquery.com/category/deferred-object/)对象来处理回调和异步调用管理的实用程序。使用这些类型的对象，客户端可以更轻松地添加在完成某些后台工作时调用的回调。这是使用您的代码的示例：

```
function some_func_validate(some_id) {
    var deferred = $.Deferred(),
        context = {
           id: some_id,
           success: false
        };

    $.ajax({
        type: 'GET',
        url: '/something/'+some_id+'/check'
    })
    .done(function(response){
       context.success = true;
       context.content = response;
       deferred.resolveWith(context);
    })
    .fail(function() {
       deferred.rejectWith(context)
    });

    return deferred.promise();
} 
```

示例用法：

```
some_func_validate(5).then (
    function (context) {
      // Handle successful validation.
      console.log(context);
    },
    function (context) {
      // Handle failed validation.
      console.log(context)
    }
); 
```

另一个使用示例：

```
function logger (context) {
   console.log(context);
}

function onSuccessfulValidation (context) {
   // Handle successful validation.
   // context contains {id, content, success}
}

function onFailedValidation (context) {
   // Handle failed validation.
   // context contains {id, success}
}

some_func_validate(3).then (
    [logger, onSuccessfulValidation],
    [logger, onFailedValidation]
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T09:59:04.917

在进行异步调用时不能这样做。您可以强制同步调用，但这会导致在服务器返回响应之前冻结您的页面。将 async:flase 开关添加到您的通话中。

```
function some_func_validate(some_id) {
   var variable_to_return = false; // i wanna use that
   $.ajax({
       type: 'GET',
       async: false,
       url: '/something/'+some_id+'/check',
       success: function(response){
           variable_to_return = true; // in this place
       }
   });
   return variable_to_return;
} 
```

但我仍然建议重构您的代码并仅在回调中使用该变量。

# ios - animationImages 不适用于 Retina 屏幕

> ID：13562335
> 
> 赞同：0
> 
> 时间：2012-11-26T09:54:12.640
> 
> 标签：ios, uiimageview

我的应用程序在 Retina 显示屏上适当地显示“@2x”版本的图像效果很好，除非我使用“animationImages”。在 Retina 屏幕上，它将这些动画图像显示为应有的两倍大。这是一个错误吗？还是我在这里做错了什么？

```
-(void)viewDidLoad;

coransStar1 = [[[UIImageView alloc] initWithFrame:CGRectMake(46, 272, 48, 45)]     autorelease];
coransStar1.image = starImage;
coransStar1.opaque = YES;
NSArray * imageArray  = [[NSArray alloc] initWithObjects:
                         [UIImage imageNamed:@"star1"],
                         [UIImage imageNamed:@"star2"],
                         [UIImage imageNamed:@"star3"],
                         [UIImage imageNamed:@"star4"],
                         [UIImage imageNamed:@"star5"],
                         [UIImage imageNamed:@"star6"],
                         [UIImage imageNamed:@"star7"],
                         [UIImage imageNamed:@"star8"],
                         nil];

coransStar1.animationImages = imageArray;
coransStar1.animationDuration = 1.1;
coransStar1.contentMode = UIViewContentModeBottomLeft;

[coransView addSubview:coransStar1];
[coransStar1 startAnimating]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T10:13:58.067

问题是这一行： coransStar1.image = starImage;

我不知道为什么，但是当我删除那条线（本来不应该存在的）时，问题就消失了。

# android - Android，意图不起作用？

> ID：13562337
> 
> 赞同：4
> 
> 时间：2012-11-26T09:54:16.657
> 
> 标签：android, button, android-intent, tabs, android-tabhost

这是我的代码。它非常简单，但是当我单击按钮“button1”时，什么也没有发生。我做错了什么？

```
public class TestTab extends Activity {

    Button button1;
        Intent i;

    @Override

    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        button1 = (Button) findViewById(R.id.btnScore);
        button1.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {

                Toast.makeText(getApplicationContext(), "On Click Event", 5000).show();

                //i = new Intent(TestTab.this, AndroidTab.class);
                //startActivity(i);

            }

        });
   }} 
```

第二 -

```
package com.example.picturegame2;

import android.app.TabActivity;

public class AndroidTab extends TabActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.tabzz);

        TabHost tabHost = getTabHost();

        TabSpec localspec = tabHost.newTabSpec("Local");
        localspec.setIndicator("Local", getResources().getDrawable(R.drawable.friend));
        Intent localIntent = new Intent(this, local.class);
        localspec.setContent(localIntent);

        TabSpec worldwidespec = tabHost.newTabSpec("worldwide");
        worldwidespec.setIndicator("Worldwide", getResources().getDrawable(R.drawable.worldwide));
        Intent worldwideIntent = new Intent(this, worldwide.class);
        worldwidespec.setContent(worldwideIntent);

        tabHost.addTab(worldwidespec);
        tabHost.addTab(localspec);

    }

} 
```

第三 -

```
package="com.example.picturegame2"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name=".local"/>
    <activity android:name=".AndroidTab"/>
    <activity android:name=".TestTab"/>
    <activity android:name=".tabzz"/>
    <activity android:name=".worldwide"/>
</application> 
```

布局 -

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"

    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <Button
        android:layout_width="250dp"
        android:layout_height="100dp"
        android:text="Start New Game"
        android:id="@+id/BtnGame"
        android:textSize="35dp"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="20dp"
        />

    <ListView 
        android:id="@+id/LsOpenGames"
        android:layout_width="250dp"
        android:layout_height="210dp"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="130dp" 

        ></ListView>

    <Button
        android:layout_width="120dp"
        android:layout_height="40dp"
        android:text="Profile"
        android:id="@+id/btnProfile"
        android:textSize="15dp"
        android:layout_marginLeft="40dp"
        android:layout_marginTop="375dp"
        />

    <Button
        android:layout_width="120dp"
        android:layout_height="40dp"
        android:text="Score"
        android:id="@+id/btnScore"
        android:textSize="15dp"
        android:layout_marginLeft="170dp"
        android:layout_marginTop="375dp"
        />

</RelativeLayout> 
```

新 Logcat：11-29 12:15:39.552：D/gralloc_goldfish(613)：没有检测到 GPU 仿真的仿真器。11-29 12:15:40.062：I/Choreographer(613)：跳过 51 帧！应用程序可能在其主线程上做了太多工作。11-29 12:16:08.902: I/Choreographer(613): 跳过 30 帧！应用程序可能在其主线程上做了太多工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T09:59:21.967

您必须像这样删除全局声明的**Intent**变量，

```
 Button button1;
 @Override

    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        button1 = (Button) findViewById(R.id.btnScore);
        button1.setOnClickListener(new Button.OnClickListener() {

        @Override
        public void onClick(View v) {

         Intent i = new Intent(TestTab.this, AndroidTab.class);
         startActivity(i);

            }

        });
    } 
```

或者试试这个，

```
 Button button1;
     Intent i;

@Override

protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    button1 = (Button) findViewById(R.id.btnScore);
    button1.setOnClickListener(new Button.OnClickListener() {

    @Override
    public void onClick(View v) {

     i = new Intent(TestTab.this, AndroidTab.class);
     startActivity(i);

        }

    });
} 
```

您`startActivity(i)`可能一直在引用您忘记初始化的全局声明的**Intent**变量，并在本地创建了一个与全局声明的同名“i”的**Intent对象。**

如果上述想法对您没有帮助，那么正如用户 Yajneshwar Mandal 所建议的，您需要尝试一下。或者在 ClickListener 中放置一个日志，以查看控件是否进入其中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T10:00:21.643

```
public class TestTab extends Activity {

Button button1;

@Override

protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    button1 = (Button) findViewById(R.id.btnScore);
    button1.setOnClickListener(new Button.OnClickListener() {

    @Override
    public void onClick(View v) {
    // TODO Auto-generated method stub
    Intent i = new Intent(TestTab.this, AndroidTab.class);
    //i.setAction(Intent.ACTION_CALL_BUTTON);
    startActivity(i);

        }

    });
}

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-26T10:18:28.413

可能有两个问题

1.  您将两次声明您的意图，首先是全局，然后是本地。系统可能正在引用全局减速。

2.  其次，你用过

    ```
    button1.setOnCLickListener(new Button.OnClickListener()

    ...     ); 
    ```

在这里你应该使用，

```
button1.setOnClickListener(new View.OnClickListener() 
```

# jquery - 滑动时的 Jquery 移动图像缩放功能

> ID：13562339
> 
> 赞同：0
> 
> 时间：2012-11-26T09:54:28.310
> 
> 标签：jquery, jquery-mobile, zooming

我的缩放功能在桌面上运行良好。我需要在移动浏览器中实现相同的功能，当我在触摸屏上移动时，应该缩小特定部分。示例 [http://thecodeplayer.com/walkthrough/magnifying-glass-for-images-using-jquery-and-css3](http://thecodeplayer.com/walkthrough/magnifying-glass-for-images-using-jquery-and-css3)

任何意见表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T22:50:27.260

嗨，我最近写了一个插件，我相信它就是这样做的......不同之处在于放大的图像不是直接在你的手指下，因为那没有意义。试试看，我很想听听您的意见：

[https://github.com/Likwidt/spyglasstouch](https://github.com/Likwidt/spyglasstouch)

# c# - 在asp.net c#中发送电子邮件时出现问题

> ID：13562343
> 
> 赞同：0
> 
> 时间：2012-11-26T09:54:33.163
> 
> 标签：c#, asp.net, email

我得到了例外

> 不允许使用邮箱名称。服务器响应是：对不起，您的信封发件人在我的 badmailfrom 列表中。

这是发送电子邮件的代码

```
public void SendEmail()
    {
        try
        {
            string Smtp_Client = System.Configuration.ConfigurationManager.AppSettings["Smtp_Client"];
            string NewtwrkCredentials_Uname = System.Configuration.ConfigurationManager.AppSettings["NewtwrkCredentials_Uname"];
            string NewtwrkCredentials_P = System.Configuration.ConfigurationManager.AppSettings["NewtwrkCredentials_P"];

            //Declaration a list of attendees
            MailAddressCollection macCollection = new MailAddressCollection();
            //Add attendde. In this example, I send invite to only one
            macCollection.Add(new MailAddress("****@****.com"));
            //Create mail message
            MailMessage mmMessage = formMailMessage("Test", "Test", "***.***@gmail.com", macCollection);
            //Create smtp client
            SmtpClient smtp = new SmtpClient("smtpout.europe.secureserver.net", 25);
            //Configure your smtp client
            smtp.EnableSsl = false;
            smtp.Credentials = new NetworkCredential("****@*****.com", "****");
            //Send it
            smtp.Send(mmMessage);

        }
        catch (Exception er)
        {

        }

    }

    public static MailMessage formMailMessage(string strSubject, string strBodyHTML, string Email, MailAddressCollection macAttendeeList)
    {
        //Create an instance of mail message
        MailMessage mmMessage = new MailMessage();
        //  Set up the different mime types contained in the message
        System.Net.Mime.ContentType typeText = new System.Net.Mime.ContentType("text/plain");
        System.Net.Mime.ContentType typeHTML = new System.Net.Mime.ContentType("text/html");

        AlternateView viewHTML = AlternateView.CreateAlternateViewFromString(strBodyHTML, typeHTML);
        mmMessage.AlternateViews.Add(viewHTML);
        //Adress the message
        mmMessage.From = new MailAddress(Email);
        foreach (MailAddress attendee in macAttendeeList)
        {
            mmMessage.To.Add(attendee);
        }
        mmMessage.Subject = strSubject;
        return mmMessage;
    } 
```

任何人都可以帮我解决我做错了什么的代码吗？我创建了一个控制台应用程序并使用了相同的代码，它运行良好。smtp 服务器，网络凭据都正确。

请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T09:58:31.183

错误所说的发件人地址几乎在电子邮件地址的黑名单中。

如果您有管理服务器的系统管理员，请与他们联系以解决此问题，或使用其他地址发送。

如果它是托管服务，请联系提供商并通知他们并询问他们要使用哪些凭据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T08:54:03.733

不知道问题是什么，我使用了不同的 smtp 服务器并且代码有效。

# iphone - iOS中长字符串的http-post请求

> ID：13562344
> 
> 赞同：0
> 
> 时间：2012-11-26T09:54:37.047
> 
> 标签：iphone, objective-c, ios

我希望发送一个很长的字符串，这是一个编码为字符串的图像。我需要使用 POST 方法发送该信息。我已经在 中实现了相同的`Android using key-value pair`功能，我需要在 iOS 中使用键值对来实现相同的功能。请帮助我提供有用的资源/方法。

**编辑 1**

我试过什么

```
[dictionnary setObject:@"admin"  forKey:@"username"];
[dictionnary setObject:@"123123" forKey:@"password"];

NSError *error = nil;

NSData *jsonData = [NSJSONSerialization dataWithJSONObject:dictionnary
                                                   options:kNilOptions
                                                     error:&error];

NSString *urlString = @"MY CALL URL";

NSURL *url = [NSURL URLWithString:urlString];
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];
[request setHTTPMethod:@"POST"];

[request setHTTPBody:jsonData];
NSURLResponse *response = NULL;
NSError *requestError = NULL;
NSData *responseData = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&requestError];
NSLog(@"response is obtained");

NSString *responseString = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding] ;
NSLog(@"%@", responseString); 
```

**编辑 2**

我得到的错误

```
Request Error Error Domain=kCFErrorDomainCFNetwork Code=303 "The operation couldn’t be completed. (kCFErrorDomainCFNetwork error 303.)" UserInfo=0x7ba0120 {NSErrorFailingURLKey=http://yahoo.com/, NSErrorFailingURLStringKey=http://yahoo.com/} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T10:27:59.360

在您的帖子字典中添加您的图像字符串：

`[dictionnary setObject:imageEncodedString forKey:@"image"];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T09:57:18.063

您可以使用 NSMutableDictionary

[看看这个](https://developer.apple.com/library/iOS/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableDictionary_Class/Reference/Reference.html)

# eclipse - 将三星智能电视 SDK 与 Eclipse Juno（或更新版本）集成

> ID：13562346
> 
> 赞同：3
> 
> 时间：2012-11-26T09:54:51.143
> 
> 标签：eclipse, samsung-smart-tv

Samsung Apps Developer Forum 附带基于 Eclipse 的 IDE，但即使是 4.0 beta 版本也是基于 Eclipse Indigo。是否可以将三星智能电视 SDK 与新版本（如 Juno）集成？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T09:54:51.143

是的，有可能！按照[blog.wirone.info](http://blog.wirone.info/2012/11/26/integracja-samsung-smart-tv-sdk-z-eclipse-juno-lub-nowszym/)的说明进行操作。

我们所要做的就是：

1.  下载[Eclipse Platform Runtime Binary](https://web.archive.org/web/20130413071514/http://download.eclipse.org:80/eclipse/downloads/drops4/R-4.2-201206081400/#PlatformRuntime)（没有插件的 Eclipse）并将其解压到目标目录（我们可以更改名称，比如“Eclipse Juno”）。我们将在下面将其命名为 Juno。

2.  安装到三星 SDK eclipse 版本中安装的 Juno 功能。您可以将它们与*Help → About Eclipse → Installation Details → Features*（或*Window → Preferences → Install/Update → "Uninstall or update software that has installed" → Features*）进行比较。其中大部分属于“ *Web、XML、Java EE 和 OSGi 企业开发*”类别。这些功能是（按提供者分组）：

    *   Eclipse 打包项目
        *   Javascript IDE
        *   市场客户端（可选）
    *   Eclipse Web 平台工具
        *   Eclipse Faceted 项目框架
        *   Eclipse JavaScript 开发工具
        *   Eclipse Web 开发者工具
        *   Eclipse XML 编辑器和工具
        *   Eclipse XPath 2 开发人员工具
        *   Eclipse XSL 开发人员工具
    *   Eclipse.org
        *   Eclipse CVS 客户端
3.  上面列出的 Javascript IDE 不能通过内置工具安装，所以我们必须从三星的 IDE 中“窃取”它。只需将此目录复制/粘贴到 Juno：

    *   插件/org.eclipse.epp.package.javascript_1.4.2.20120131-1457
    *   功能/org.eclipse.epp.package.common.feature_1.4.2.20120213-0814
    *   功能/org.eclipse.epp.package.javascript.feature_1.4.2.20120213-0814

    现在你应该有：（ [来源：][[wirone.info](http://static.blog.wirone.info/2012/11/Eclipse_Juno_with_features_from_Samsung_SDK.png)][）][![特征](../Images/7d3e2ad2245f0b941fca14c98a93b3cd.png)](https://i.stack.imgur.com/MuimL.png)

4.  安装 Eclipse 图形建模框架 (GMF) 运行时 - 它是依赖项所必需的。否则你会得到：

    > ```
    > ENTRY org.eclipse.equinox.p2.director 2 0 2012-11-25 00:33:56.606
    > MESSAGE Problems resolving provisioning plan.
    > SUBENTRY 1 org.eclipse.equinox.p2.director 2 0 2012-11-25 00:33:56.606
    > MESSAGE Unable to satisfy dependency from tv.samsung.sdk.core 2.1.1.201209271345 to bundle org.eclipse.gmf.runtime.common.core 0.0.0. 
    > ```

5.  关闭朱诺。

6.  `dropins/sec_smart_tv_sdk`从 SDK 4.0复制/粘贴目录到 Juno

7.  以管理员身份运行 Juno。菜单栏中应该有三星的 SDK。 [（来源：][[wirone.info](http://static.blog.wirone.info/2012/11/Eclipse_4.2_with_Samsung_Smart_TV_SDK.png)][）][![带有三星智能电视 SDK 的 Eclipse Juno](../Images/4f31a973aa2cfe1bef53a4da7e28546d.png)](https://i.stack.imgur.com/RFwG1.png)

8.  打开*三星智能电视 SDK → 三星智能电视 SDK 首选项*- 哎呀，“找不到 SDK 安装路径”，所以选择带有 SDK 4.0 的目录

9.  有一个良好的发展:)

* * *

如果集成有问题，可以调试 dropin 安装。在 Juno 的根目录中创建`.options`文件并放入文件：

> ```
> org.eclipse.equinox.p2.core/debug=true
> org.eclipse.equinox.p2.core/reconciler=true 
> ```

通过控制台调试运行 Juno：`eclipse.exe -debug`并观察日志。[您可以在此处](https://www-01.ibm.com/support/docview.wss?uid=swg21428463)阅读有关 dropins的信息。

可能会有所帮助：

*   清除其中的`sec_smart_tv_sdk`条目是一个随机数，因此只需使用系统的搜索即可找到。`Juno\configuration\org.eclipse.osgi\bundles\...\data\cache.timestamps``...``cache.timestamps`
*   工作区的日志 ( `.metadata/.log`)

# python - 从 python 到 mongodb 数据库的更新命令是否返回查询结果（例如布尔值或整数）

> ID：13562348
> 
> 赞同：0
> 
> 时间：2012-11-26T09:55:02.587
> 
> 标签：python, mongodb, return-type, updatecommand

我对 Python 很陌生。在我的脚本中，我编写了更新 MongoDB 数据库的代码。

```
def mongoInsert(userData, collection):
    mconn = Connection(MONGODB_HOST,MONGODB_PORT)
    mdb = mconn[MONGODB_DBNAME]
    col = mdb[collection]

    #The below codeis used to upsert the data in MongoDB.
    for user in userData:
        print user
        col.update({'id': user[0]}, {'$set':user}, True)
return 
```

其中 userData 是一个列表，

```
 userData = [] 
```

当我使用 putty运行命令**python script_name.py时；**该脚本运行没有任何错误或异常。但是当我看到**尝试**查看MongoDB中的数据时，数据库中没有添加数据（我不确定，可能已经添加了数据，但是由于我是新来的，所以我看不到它） . 所以我现在在想，如果有任何方法可以在更新命令之后更新数据库中的行（更新命令的任何返回类型，例如布尔值或整数），我会像使用它一样使用它

```
success = col.update({'id': user[0]}, {'$set':user}, True)
print success 
```

但它总是打印 None 成功的值。那么有没有办法检查数据是否添加，修改上面的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T10:36:07.670

我想用这条线

```
col.update({'id': user[0]}, {'$set': user}, True) 
```

其中 user[0] 是用户集合的整个文档，您正在尝试更新 id 是整个文档的文档。你应该这样写：

```
col.update({'_id': user[0]['_id']}, {'$set': user}, True) 
```

此外，我不明白你想用这部分做什么 `{'$set': user}`。阅读[这个](http://www.mongodb.org/display/DOCS/Updating#Updating-%24set)和[这个](http://api.mongodb.org/python/2.1.1/api/pymongo/collection.html?highlight=update#pymongo.collection.Collection.update)。

要检查您的查询是否正常，您应该将关键字参数传递`safe=True`给更新方法：

```
success = col.update({'id': user[0]}, {'$set': user}, True, safe=True)
print success 
```

抱歉，如果我没有正确理解您的问题。

# facebook - 如何获取 Facebook 群组成员的电子邮件 ID

> ID：13562350
> 
> 赞同：0
> 
> 时间：2012-11-26T09:55:14.387
> 
> 标签：facebook, email, facebook-group

假设我是**A**组的成员，该组有大约 700 名成员。有什么方法可以获取这 700 个成员的电子邮件 ID？如果是，那么我们如何使它成为可能，程序是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T11:14:58.233

抱歉，您无法获取您所属用户的电子邮件 ID，这是因为 Facebook 尊重个人的隐私选项。如果您仍然需要成员的电子邮件 ID，那么您可以要求他们授权具有“电子邮件”权限的 Facebook 应用程序可以访问该电子邮件 ID。

# mysql - MySQL 连接，左连接

> ID：13562351
> 
> 赞同：0
> 
> 时间：2012-11-26T09:55:15.583
> 
> 标签：mysql, join, left-join

所以我试图用一个简单的连接编写一个 MySQL 查询来从两个不同的表中提取内容。

第一张桌子是学生桌（抱歉，它不是更漂亮，我找不到更好的方法来放置它们）

```
id  first_name  last_name   major    phone_number
-------------------------------------------------
1   Eric        Larsen      CS       1234567891
2   Sam         Coons       English  1234567891
3   David       Brown       MAE      1234567891
4   Richard     Brown       CS       1234567891
5   Kendra      Griffiths   FCHD     1234567891 
```

第二个是分数表，现在它只有一行，

```
id  student_id  item_id  score
------------------------------
1   1           1        20 
```

还有第三个表，其中包含项目列表，但此特定查询并不真正需要。

如果他们有分数，我想把所有学生连同分数一起拉出来，如果他们有分数，如果他们没有，我仍然希望它为学生拉信息，好吧，至少有名字。

所以这是我写的查询。

```
SELECT students.first_name, students.last_name, scores.score
FROM students
     LEFT JOIN scores
     ON students.id = scores.student_id
WHERE scores.item_id =1 
```

在我看来，这应该可行，即使没有分数，它也应该拉所有学生，因为它是左连接，但它只会拉一个得分为 Eric Larsen 的学生，结果看起来像

```
Eric, Larsen, 20 
```

但不应该是：

```
first_name  last_name  score
----------------------------
Eric        Larsen     20
Sam         Coons      NULL
David       Brown      NULL
Richard     Brown      NULL
Kendra      Griffiths  NULL 
```

?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T10:05:21.447

此查询将揭示您的问题。

```
SELECT students.first_name, students.last_name, scores.score, scores.item_id
    FROM students
    LEFT JOIN scores
        ON students.id = scores.student_id 
```

您看到`scores.item_id`的是`NULL`所有其他行，因此您的`WHERE scores.item_id = 1`子句失败了，因此这些行没有出现在您的结果中。

这应该得到你想要的结果

```
SELECT students.first_name, students.last_name, scores.score
    FROM students
    LEFT JOIN scores
        ON (students.id = scores.student_id)
    WHERE (scores.item_id = 1 OR scores.item_id IS NULL) 
```

或者

```
SELECT students.first_name, students.last_name, scores.score
    FROM students
    LEFT JOIN scores
        ON (students.id = scores.student_id AND scores.item_id = 1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T09:57:08.430

您需要将连接的列添加到您的选择 - 列

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T09:58:19.117

您在 SQL 查询中添加的 where 子句将结果集限制为一行。尝试删除 where 子句。

```
SELECT students.first_name, students.last_name, scores.score
    FROM students
    LEFT JOIN scores
        ON students.id = scores.student_id; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T10:06:10.400

您提供了一个 where 条件来过滤掉记录，然后删除您应该获得所需结果的 where 条件。

# javascript - EmailComposer 中预定义的主题和正文

> ID：13562355
> 
> 赞同：0
> 
> 时间：2012-11-26T09:55:26.533
> 
> 标签：javascript, ios, cordova, phonegap-plugins

有没有办法在 emailcomposer ios phonegap 插件中预定义电子邮件的正文和主题？到目前为止，我在谷歌群组中找到了一些群组

```
window.plugins.emailComposer.showEmailComposer("My Subject","My Plain Text Body", "recip...@email.com,recipient2@email.com", "ccReci...@email.com,ccRecipient2@email.com", "bccRec...@email.com,bccRecipient2@email.com",false); 
```

但我不确定如何将其连接到我的 html 页面。我试过了

```
cordova.exec(null, null, "EmailComposer", "showEmailComposer", [args]); 
```

在我的 js 文件中，但显示 emailcomposer 页面，这是不可接受的。如何让用户只输入电子邮件或收件人？

UPD：我没有查看 emailcomposer.js，有数组 [args]，我可以在其中定义我需要的所有内容，但我不知道该怎么做尝试过这种方式，但这没有帮助

```
var args = [toRecipients="example@email.com"]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T10:31:32.757

添加参数作为哈希

```
args['subject']='hello world'; 
```

并在您的索引文件中使用名称 args 初始化哈希

```
args = {}; 
```

# c# - 队列 调用时参数不正确

> ID：13562361
> 
> 赞同：0
> 
> 时间：2012-11-26T09:55:41.510
> 
> 标签：c#, windows-phone-7, queue, action

所以我想排队一些要调用的动作。

一点背景知识：尝试使用 Webclient 发送请求，但显然它不允许很长的 URL（超过 2000 个字符），并且在我的系统中发现该值的上限约为 40 个项目（确切地说是 43 个）。所以我需要将 Webclient 请求分成 40~ 组，并决定使用队列来这样做。

这是代码：

```
 public void some_method()
        int num = 40; // readonly variable declared at top but put here for clarity
        String hash = "";
        Queue<Action> temp_actions = new Queue<Action>();
        foreach (ItemViewModel item in collection)
        {
            num--;
            hash += "&hash=" + item.Hash; // Add &hash + hash to hash

            if (num == 0)
            {
                // Change status for these 40 items
                temp_actions.Enqueue(() => auth.change_status_multiple(status, hash));

                // Reset variables
                num = 40;
                hash = "";
            }
        }

        // Enqueue the last action for the rest of the items
        // Since "num == 0" doesn't cater for leftovers
        // ie. 50 items and 40 in first set, 10 left (which will be enqueued here)
        temp_actions.Enqueue(() => auth.change_status_multiple(status, hash));

        // Start the change status process
        temp_actions.Dequeue().Invoke();

        actions = temp_actions;
    }

    public Queue<Action> actions { get; set; }

    // Event handler for when change_status_multiple fires its event for finish
    private void authentication_MultipleStatusChanged(object sender, EventArgs e)
    {
        if (actions.Count > 0) // Check if there are actions to dequeue
            actions.Dequeue().Invoke();
    } 
```

但是在运行时，哈希将是“”。例如，我有 50 个项目，40 个将在第一个动作中排队，然后 10 个在第二个中，但是第一个集合的哈希字符串是“”。这是为什么？我会认为在将操作排入队列时，它会保留我当时提供的变量的任何值。

我调试了我的代码，在将第一组排入队列时，哈希是正确的，但是当它重置变量 num 和哈希时，第一组（队列内）的哈希更改为“”。

有没有办法解决？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T10:01:47.030

您是延迟执行的受害者...您正在`hash`以下行的委托中捕获范围：

```
temp_actions.Enqueue(() => auth.change_status_multiple(status, hash));
//...
hash = "";  //happens before delegate above has executed 
```

然后立即清除`hash`为“”。

当委托运行时，`hash`已经被清除。

要修复，请获取本地副本`hash`

```
var hashCopy = hash;
temp_actions.Enqueue(() => auth.change_status_multiple(status, hashCopy));
//...
hash = ""; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T10:04:52.807

这是因为您的 lambda 表达式创建了一个**[闭包](http://www.codethinked.com/c-closures-explained)**并捕获了`status`and`hash`变量。

快速解决方案是创建另一个变量，它将被捕获：

```
string capturedHash = hash;
temp_actions.Enqueue(() => auth.change_status_multiple(status, capturedHash)); 
```

# windows-8 - Windows 8 应用更新机制如何处理 ApplicationData.LocalFolder 中的现有文件？

> ID：13562365
> 
> 赞同：0
> 
> 时间：2012-11-26T09:56:02.383
> 
> 标签：windows-8, microsoft-metro

我即将发布我的 Win8 应用程序的更新。

Win8 应用商店如何处理更新？安装新版本时，应用程序数据文件夹会保持不变吗？ApplicationData.SetVersionAsync() 对此有何影响？

每个版本会有单独的子文件夹吗？

我需要确保所有用户的数据都被带到我的应用程序的新版本中。我会处理数据文件格式——但我只需要知道更新机制将如何处理这些文件夹。

有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T10:09:17.247

找到了答案！

[http://t.co/rIUFkpgv](http://t.co/rIUFkpgv)

我在 MSDN 上找到了关于应用程序数据的那篇文章，其中说：

> ...当用户安装您的应用程序更新时，系统还会保留这些数据存储的内容...

所以基本上，应用程序数据保留在同一个地方 - 新版本可以简单地读取旧文件并决定做什么！

# java - Akka Actors - 锁定单个资源请求

> ID：13562367
> 
> 赞同：5
> 
> 时间：2012-11-26T09:56:22.183
> 
> 标签：java, scala, akka, actor

我正在使用几个 akka 演员来监控我的系统，每个演员负责不同的组件。

一些actor操作不应该并行执行。所以我创建了一个持有锁的演员（LockActor）。一旦actor想要执行这样的操作，他需要请求LockActor的批准，并且在他获得批准之前他不能执行该操作。

如果我想让代码简单，在请求的演员中，我需要做类似的事情：

```
while (LockActor.isLockHold()) {
    // perform the operation
} 
```

这当然打破了演员系统的整体设计......

所以我需要使用使代码有点复杂的消息：

1.  Actor B 需要向 LockActor 发送 LockRequestMessage
2.  LockActor 持有持有锁请求的队列
3.  如果锁定是可能的，LockActor 将 LockApprovalMessage 发送到队列中的第一个 Actor
4.  当参与者 B 收到 LockApprovalMessage（不一定立即）时，他需要执行发送 LockRequestMessage 时所需的特定操作（每个参与者可以有多个需要锁定的操作）

所以我的问题是 - 在不破坏演员系统设计但仍保持代码尽可能简单的情况下实现此类事情的最佳方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T09:59:03.883

与其使用单个actor来获取锁，为什么不使用单个actor来完成工作呢？这是actor模型中的首选方式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-26T12:54:21.000

我在这里看到两种解决方案。

首先，您可以使用[询问模式](http://doc.akka.io/docs/akka/snapshot/scala/actors.html#Ask__Send-And-Receive-Future)：

```
class MyActor extends Actor {

    def receive = {
        case Start: {
            val f = lockActor ? LockRequestMessage
            f onSuccess {
                case LockApprovalMessage => {
                    //todo: do your thing
                }
            }
        }
    }

} 
```

请注意，ask 方法将创建另一个接收请求消息并完成未来的参与者 - 请参阅文档以获取更多详细信息。

如果您不想使用 ask 模式，您可以很好地使用[become-unbecome 机制](http://doc.akka.io/docs/akka/snapshot/scala/actors.html#Become_Unbecome)，如下所示：

```
class MyActor extends Actor {
    import context._

    def receive = {
        case Start: {
            lockActor ! LockRequestMessage
            become(waitForApproval)
        }
    }    

    def waitForApproval = {
        case LockApprovalMessage => {
            //todo: do your thing
        }
    }

} 
```

您可以在同一个接收函数中很好地处理这两条消息，但是您必须记录参与者在某个时刻所处的状态。变得不成体的机制为你做了这个干净的分离。

请注意，如果您使用锁来防止参与者改变某些共享资源，Akka 为此提供了一些更复杂的机制：

*   代理 - [http://doc.akka.io/docs/akka/2.1.0-RC2/scala/agents.html](http://doc.akka.io/docs/akka/2.1.0-RC2/scala/agents.html)
*   交易者 - [http://doc.akka.io/docs/akka/2.1.0-RC2/scala/transactors.html](http://doc.akka.io/docs/akka/2.1.0-RC2/scala/transactors.html)

查看文档 - 它可能会显着简化您的实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T11:53:21.680

这是想法，我不知道细节，因为我是scala的新手：

*   创建自定义类 ActorExecutor，它是一个类型化的 Actor，它接受闭包作为消息，并通过调用该闭包来处理该消息。

*   为每个锁创建一个 ActorExecutor 的实例

*   每当一个actor想要在锁保持的情况下进行一些操作时，它都会向代表该锁的ActorExecutor发送一个闭包。

这样，发送到具体 ActorExecutor 实例的所有操作都按顺序执行。

# java - 将数据从数据库加载到每个字段的 Jcheckboxes

> ID：13562371
> 
> 赞同：1
> 
> 时间：2012-11-26T09:56:47.690
> 
> 标签：java, swing, jcombobox, jcheckbox, multipleselection

我正在使用 JFreechart 库创建一个分析系统，我希望拥有类似于 MS excel 中的数据透视表功能，我想汇集某个数据库字段，以便让 Jcheckboxes 具有数据库中每个不同值的名称。我已经使用 JCombobox 实现了这一点，例如：

```
Class.forName("oracle.jdbc.driver.OracleDriver");
        dbcon = DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:XE", "USERNAME", "PASSWORD");
        Statement st = dbcon.createStatement();
        String combo = "Select DORM_NAME from dormitory_master_table";
        ResultSet res = st.executeQuery(combo);
        Vector v = new Vector();
        while (res.next()) {
            String ids = res.getString("DORM_NAME");
            v.add(ids);

            cboDormitory = new JComboBox(v); 
```

这会将所有宿舍名称放入 Jcombobox，但这对于我想要做的事情是无效的，因为我需要能够选择多个对象。我该如何实施？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T10:44:51.577

澄清你是否想要多个`JCheckBox`s以允许在屏幕上`JComboBox`没有数百个 s 的情况下进行多项选择？`JCheckbox`

`JList`在这种情况下听起来像是工作。

看：

*   [如何使用列表](http://docs.oracle.com/javase/tutorial/uiswing/components/list.html)

A`JList`将允许从值列表中进行多项选择（直接从 orcale 截取的屏幕截图 - 如何使用列表教程来说明我的意思）：

![在此处输入图像描述](../Images/fde3ba03a5db7a251fd14b329de3a0ab.png)

这是我使用`JCheckBox`s 的自定义示例：

![在此处输入图像描述](../Images/79540627960bc6710ec05f6c90168330.png)

```
import java.awt.BorderLayout;
import java.awt.Component;
import java.awt.Rectangle;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import javax.swing.JCheckBox;
import javax.swing.JFrame;
import javax.swing.JList;
import javax.swing.JScrollPane;
import javax.swing.ListCellRenderer;
import javax.swing.ListSelectionModel;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;

public class JListTest {

    public JListTest() {
        JFrame frame = new JFrame();
        frame.setTitle("JList Test");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        initComponents(frame);

        frame.pack();
        frame.setVisible(true);
    }

    private void initComponents(JFrame frame) {
        String[] strs = {"swing", "home", "basic", "metal"};

        final JList checkBoxesJList = new JList(createData(strs));
        checkBoxesJList.setCellRenderer(new CheckListRenderer());
        checkBoxesJList.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);

        checkBoxesJList.addMouseListener(new MouseAdapter() {
            public void mouseClicked(MouseEvent e) {
                int index = checkBoxesJList.locationToIndex(e.getPoint());
                CheckableItem item = (CheckableItem) checkBoxesJList.getModel().getElementAt(index);
                item.setSelected(!item.isSelected());
                Rectangle rect = checkBoxesJList.getCellBounds(index, index);
                checkBoxesJList.repaint(rect);
            }
        });

        JScrollPane scrollPane = new JScrollPane(checkBoxesJList);
        frame.add(scrollPane, BorderLayout.CENTER);
    }

    private CheckableItem[] createData(String[] strs) {
        int n = strs.length;
        CheckableItem[] items = new CheckableItem[n];
        for (int i = 0; i < n; i++) {
            items[i] = new CheckableItem(strs[i]);
        }
        return items;
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new JListTest();
            }
        });
    }
}

class CheckListRenderer extends JCheckBox implements ListCellRenderer {

    public CheckListRenderer() {
        setBackground(UIManager.getColor("List.textBackground"));
        setForeground(UIManager.getColor("List.textForeground"));
    }

    @Override
    public Component getListCellRendererComponent(JList list, Object value,
            int index, boolean isSelected, boolean hasFocus) {
        setEnabled(list.isEnabled());
        setSelected(((CheckableItem) value).isSelected());
        setFont(list.getFont());
        setText(value.toString());
        return this;
    }
}

class CheckableItem {

    private String str;
    private boolean isSelected;

    public CheckableItem(String str) {
        this.str = str;
        isSelected = false;
    }

    public void setSelected(boolean b) {
        isSelected = b;
    }

    public boolean isSelected() {
        return isSelected;
    }

    @Override
    public String toString() {
        return str;
    }
} 
```

**更新**

根据您的评论：

1）替换：`Vector v = new Vector();`用`ArrayList<String> v=new ArrayList<>();`

2）现在编辑`createData(..)`类似于：

```
private CheckableItem[] createData(ArrayList<String> strs) {
    int n = strs.size();
    CheckableItem[] items = new CheckableItem[n];
    for (int i = 0; i < n; i++) {
        items[i] = new CheckableItem(strs.get(i));
    }
    return items;
} 
```

3）简单地调用`createData`参考`ArrayList`（我们称之为`v`）：

```
createData(v); 
```

# java - Java GUI，根据actionListener更改面板

> ID：13562372
> 
> 赞同：9
> 
> 时间：2012-11-26T09:56:53.337
> 
> 标签：java, swing, user-interface

我在两个不同的面板中添加了两个按钮，如果单击第一个按钮，则需要进入下一个面板，其中包含第二个按钮。但是当我单击第一个按钮时，该按钮没有被替换。

```
/*Java GUI*/

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.*;

public class TestFrame extends JFrame{

    private JPanel panel1, panel2;
    private JButton but,but2; 

    public TestFrame()
    {
        createPanel();
        addPanel();
    }

    private void createPanel()
    {
        panel1 = new JPanel();
        but = new JButton("TestButton");
        but.addActionListener(new addButtonListener());

        panel2 = new JPanel();
        but2 = new JButton("TestButton2");

    }

    private void addPanel()
    {
        panel1.add(but);
        panel2.add(but2);

        add(panel1);

    }

    class addButtonListener implements ActionListener
    {
        public void actionPerformed(ActionEvent ae) 
        {
            getContentPane().removeAll();
            add(panel2);

            repaint();
        }
    }

    public static void main(String args[])
    {
        JFrame frame = new TestFrame();
        frame.setTitle("Test Software");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(500,500);

        frame.setVisible(true);
    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T09:59:27.477

您需要进行验证，然后重新绘制。

```
validate();
repaint(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-26T10:28:02.690

从 contentPane 中删除所有内容后，尝试将面板添加到 ContentPane。第二件事是重新粉刷。如果您不更新面板内容，它将在调整大小后绘制。这是示例解决方案：

```
 import java.awt.event.ActionEvent;

    import java.awt.event.ActionListener;

    import javax.swing.*;

    public class Frame extends JFrame{
        private JPanel panel1, panel2;
        private JButton but,but2; 
        public Frame()
        {
           createPanel();
           addPanel();
        }
        private void createPanel()
        {
            panel1 = new JPanel();
            but = new JButton("TestButton");
            but.addActionListener(new addButtonListener());
            but.setBounds(50, 90, 190, 30);//There are example values but remember about setting size
            panel2 = new JPanel();
            but2 = new JButton("TestButton2");
            but2.setBounds(50, 50, 90, 30);//There are example values but remember about setting size
        }
        private void addPanel()
        {
            panel1.add(but);
            panel2.add(but2);
            add(panel1);
        }

        class addButtonListener implements ActionListener
        {
            public void actionPerformed(ActionEvent ae) 
            {
                getContentPane().removeAll();
                getContentPane().add(panel2);//Adding to content pane, not to Frame
                repaint();
                printAll(getGraphics());//Extort print all content
            }
        }

        public static void main(String args[])
        {
            Frame frame = new Frame();
            frame.setTitle("Test Software");
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            frame.setSize(500,500);
            frame.setVisible(true);
        }

    } 
```

Oracle 文档解释了添加到 contentPane 或直接添加到 Frame 的差异。
[http://docs.oracle.com/javase/tutorial/uiswing/components/toplevel.html](http://docs.oracle.com/javase/tutorial/uiswing/components/toplevel.html)

# mysql - MySQL基于公共关系从多个表中选择

> ID：13562376
> 
> 赞同：1
> 
> 时间：2012-11-26T09:57:11.043
> 
> 标签：mysql, sql, select, group-concat

我有3个表如下：

```
Table: sys_department
Columns:   dept_id   dept_name
row:       1         Support
row:       2         HR
row:       3         Billing

Table: sys_groups
Columns:   group_id   group_name
row:       1          Manager
row:       2          Intern
row:       3          Staff

Table: group_dept_access
Columns:   group_id   dept_id
row:       1          3
row:       2          1
row:       2          2 
row:       3          1
row:       3          2 
```

我想运行一个查询来获取组名列表以及他们有权访问的部门名称。

因此，由于 group_dept_access 中的 group_id 为 3，因此将 1 和 2 列为 dept_id，该组将返回它的 group_name 的 Billing 以及部门名称 Support 和 HR。

使用 JOIN 选择 group_dept_access 时，我能够运行查询以获取 group_name，但我不知道如何查询所有三个表并获取部门。

不幸的是，我无法更改表结构，因为如果说第三个表没有每个组的多个条目会很好，但它是一个现有系统，因此如果更改会中断。在当前服务器上也使用 MySQL 5.1.x，但将来将使用 5.5.x。如果这样的查询在版本之间以不同的方式完成，每个将如何完成？

感谢任何帮助，因为这将帮助我进行其他类似的查询，我将执行。关于它是如何完成的解释也很好，这样我就可以了解这个 3 表查询是如何完成的。先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T10:03:20.067

尝试这个：

```
SELECT sg.group_name, A.dept_name 
FROM sys_groups sg 
INNER JOIN (SELECT gda.group_id, GROUP_CONCAT(sd.dept_name SEPARATOR '|') dept_name
            FROM group_dept_access gda 
            INNER JOIN sys_department sd ON gda.dept_id = sd.dept_id 
            GROUP BY gda.group_id) AS A ON sg.group_id = A.group_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T10:03:56.233

```
SELECT g.group_id, g.group_name, d.dept_id, d.dept_name
FROM sys_department d,
sys_groups g,
group_dept_access gd
WHERE d.dept_id = gd.dept_id
AND g.group_id=gd.group_id 
```

# java - performItemClick 在另一个视图中

> ID：13562380
> 
> 赞同：1
> 
> 时间：2012-11-26T09:57:24.070
> 
> 标签：java, android

在我的应用程序中，我有两个具有不同适配器的 10x10 网格。当我单击第一个网格上的项目时，它应该更改第一个和第二个网格上的图形。

```
battleField = (GridView) findViewById(R.id.gridView1);
battleField2 = (GridView) findViewById(R.id.gridView2);
battleField.setAdapter(new ImageAdapter(getApplicationContext()));
battleField2.setAdapter(new ImageAdapter2(getApplicationContext()));
battleField2.setEnabled(false);
battleField.setOnItemClickListener(new OnItemClickListener() {
    public void onItemClick(AdapterView<?> parent, View view1, int position, long id) {
        Toast.makeText(SendobjectActivity.this, "" + position, Toast.LENGTH_SHORT).show();
        ImageView img = (ImageView)view1;
        img.setImageResource(R.drawable.trafiony1);                           
        //HERE IS THE PROBLEM
        battleField2.performItemClick(view2, position, id);

    }
});

battleField2.setOnItemClickListener(new OnItemClickListener() {
    public void onItemClick(AdapterView<?> parent, View view2, int position, long id) {
        Toast.makeText(SendobjectActivity.this, "" + position, Toast.LENGTH_SHORT).show();                       
        ImageView img2 = (ImageView)view2;
        img2.setImageResource(R.drawable.trafiony2);
    }
}); 
```

我为两个网格实现了 onItemClickListener。单击第一个网格上的项目时，它的图形会发生变化，并且 id 喜欢调用 performItemClick 方法在第二个网格上执行相同的操作。不幸的是，我不知道如何查看我的第二个网格。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T09:59:43.917

将工作委托给单独的方法，并在您`onClickListener`调用这些方法时，而不是直接完成工作。因此，例如，而不是：

```
battleField2.setOnItemClickListener(new OnItemClickListener() {
  public void onItemClick(AdapterView<?> parent, View view2, int position, long id) {
    Toast.makeText(SendobjectActivity.this, "" + position,
               Toast.LENGTH_SHORT).show();                       
    ImageView img2 = (ImageView)view2;
    img2.setImageResource(R.drawable.trafiony2);
  }
}); 
```

做类似的事情：

```
battleField2.setOnItemClickListener(new OnItemClickListener() {
  public void onItemClick(AdapterView<?> parent, View view2, int position, long id) {
    doTheJob( parent, view2, position, id );
  }
});

protected void doTheJob(AdapterView<?> parent, View view2, int position, long id) {
    Toast.makeText(SendobjectActivity.this, "" + position,
               Toast.LENGTH_SHORT).show();                       
    ImageView img2 = (ImageView)view2;
    img2.setImageResource(R.drawable.trafiony2);
} 
```

其他听众也一样。然后，如果您需要同时完成这两项工作，只需调用相应的方法即可。

或者（如果可能）将你的听众合二为一。

# android - SUB SELECT ORMLITE

> ID：13562390
> 
> 赞同：2
> 
> 时间：2012-11-26T09:58:00.343
> 
> 标签：android, ormlite

我想用另一个这样的选择做一个选择：
`Select code, (Select Top 1 nameCode from Items where itemCode = code order by nameCode) from names`

我已经在官方页面中查找了此信息，但找不到解决方案。

谢谢

# jqgrid - jquery grid：编辑后禁用重新加载网格

> ID：13562391
> 
> 赞同：0
> 
> 时间：2012-11-26T09:58:00.177
> 
> 标签：jqgrid

伙计们

目前我发现：jQGrid在编辑后自动重新加载，如何禁用编辑后自动重新加载网格？因为我只想重新加载我更新的字段。

谢谢，

林迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T12:09:05.653

你应该使用

```
reloadAfterSubmit: false 
```

[表单编辑选项](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:form_editing#properties)。

在添加新行的情况下，您应该小心使用该选项。在这种情况下，您必须从服务器返回 rowid 并使用`afterSubmit`它来解码并转发到 jqGrid。请参阅代码示例[的答案](https://stackoverflow.com/a/13191881/315935)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T10:06:49.480

它应该在保存按钮的单击事件上调用，并且您的页面将使用新值重新加载：

```
 $(document).ready(function(){
 var address=$(location).attr("href");
 window.location.reload(address);
}); 
```

# silverlight - 任何应用程序池设置是否会导致 Silverlight OOB CheckAndDownloadUpdateAsync 更新失败？

> ID：13562398
> 
> 赞同：2
> 
> 时间：2012-11-26T09:58:24.933
> 
> 标签：silverlight, iis-7, load-balancing, application-pool, auto-update

我们在负载均衡的生产环境中部署了 Silverlight 应用程序。此应用程序使用“CheckAndDownloadUpdateAsync”方法自动检查和下载更新。

此方法运行良好，并且下载了最新版本的应用程序，没有任何问题。

```
App.Current.CheckAndDownloadUpdateCompleted += new CheckAndDownloadUpdateCompletedEventHandler(App_CheckAndDownloadUpdateCompleted); 
```

但是，突然之间，该方法开始表现得很奇怪。即使在生产服务器上没有新的部署，它也会继续下载应用程序。即使它本身下载了最新的应用程序，我也会一直得到 e.UpdateAvailable = true 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T15:03:58.793

行。我们终于找到了问题（4 个月后 :( ），幸运的是它与任何 ISS 相关（应用程序池）设置无关。

原因：- 每个文件的创建日期和修改日期。所以，我们的 XAP 文件。我们曾经通过压缩应用程序并将此 ZIP 文件复制到我们的服务器上来部署应用程序，然后解压缩到所需的文件夹。

所有压缩软件的提取逻辑都存在问题（包括 WinZip、Windows 服务器默认的“全部提取...”、7 Zip 等...）。当 XAP 文件被提取时，它应该根据服务器的本地时间转换其修改日期。由于我们的服务器处于 CST 时间，因此它应该已将时间转换为 CST。但是，它没有，并将其保留为本地 IST 时间。例如，如果 IST 机器上的构建时间是 12.30 PM (IST)，则压缩并提取它以将时间显示为“12.30 PM (CST)”，它应该将其转换为 -6.00 UMT 并显示为“1.00 AM (CST)” '。

因此，每当 silverlight 发送“检查更新”请求时，该请求是在本地 IST 时间，该时间过去比 XAP 文件上的“修改开启”时间更早，因此它用于一次又一次地下载应用程序直到 IST 日期/时间匹配或超过 CST 时间意味着问题在接下来的 11.30 小时内发生。

如果您在使用上述 CheckAndUpdateAsync() 方法时也遇到“自动升级”问题，请不要忘记关注 XAP 文件的创建日期和修改日期。希望这可以帮助！谢谢。

# cocos2d-x - 果酱：更好地使用 Cocos2d-x v.2 或 Cocos2d-x v.1？

> ID：13562403
> 
> 赞同：1
> 
> 时间：2012-11-26T09:58:47.090
> 
> 标签：cocos2d-x, marmalade

我们正在使用 Marmalade SDK 和 Cocos2d-x 版本 1.0.1-x-0.13.0 beta (2012-03-29) 开发游戏。

在我们开始做游戏的时候，这个版本的 Cocos2d-x 是唯一包含 marmalade 平台支持的版本，所以这是一个被迫的选择，但目前看来 cocos2d-2.1beta3-x-2.1.0 也有添加了对果酱的支持。

现在我们正在尝试评估是否值得在我们的项目中将旧版本的 cocos2d-x 替换为较新的版本，我很欣赏以下问题的专家的观点：

*   cocos2d-x 2 是否会留下许多 Marmalade 支持的设备（例如 Bada、BlackBerry 等）不受支持？
*   我们是否应该期望在进行迁移的 API 中发生巨大变化？
*   我看到 cocos2d-x 有更好的方法来支持多分辨率（[见这里](http://www.cocos2d-x.org/projects/cocos2d-x/wiki/Multi_resolution_support)），还有哪些其他优点可以切换到 cocos2d-x 2？

此外，如果您对此事有任何其他有用的见解要分享，我们将不胜感激。先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T17:06:21.350

关于设备，最值得注意的信息是：Cocos2d-x 2.0 支持 OpenGL ES 2.0，不再支持 OpenGL ES 1.1。这可能是前一段时间的一个问题，但现在这不是一个大问题 - 新一代设备得到了很好的覆盖。我们查看了关于 OpenGL ES 的维基百科页面，并意识到我们想要支持的设备（通过 Marmalade）是兼容的。

我们还下载了 Cocos2d-x 2.1beta3（包括对 Marmalade 的支持），看起来已经非常完整并且可以继续使用了。

此外，Cocos2d-x 的迁移指南（在[此处](http://www.cocos2d-x.org/projects/cocos2d-x/wiki/Cocos2d-x_v20_migration_guide)找到）似乎是一个非常完整的指南，而且似乎也不是一项戏剧性的工作。

也就是说，我们的游戏处于足够先进的状态，足以阻止我们面对港口，因为在我们的案例中，最重要的优势应该是更好的多分辨率管理。事实上，我们不会实现利用 OpenGL ES 2.0 的功能，我们使用自制的解决方案解决了多分辨率问题，所以……我们将在下一个项目中使用 Cocos2d-x 2.1。

我希望此信息对其他人有用，请随时纠正我或添加其他知识 - 我们不是专家，这来自个人研究。

# java - 如何在 JTable 的一个特定列中呈现数字或标签中的所有逗号都在彼此下方的所有单元格？

> ID：13562404
> 
> 赞同：0
> 
> 时间：2012-11-26T09:58:48.680
> 
> 标签：java, swing, jtable, render, tablecellrenderer

我希望 JTable 中一个特定列的单元格中的所有逗号都在彼此下方，如下面的示例。有谁知道我应该在我的渲染中改变什么？

```
1000,00
   0,12
  12,14
 888,01
  45,123
1458,11 
```

**代码：**

```
TableColumn columnPrice = table.getColumnModel().getColumn(3);
TableCellRenderer priceRenderer = new TableCellRenderer() {
    public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
        String price = value.toString().replaceAll("\u20ac ","");
        DecimalFormat decimalFormat = new DecimalFormat("###0.00");
        String formatedValue = decimalFormat.format(Double.parseDouble(price));
        WebLabel label = new WebLabel(formatedValue,SwingConstants.CENTER);
        return label;
    }
};
columnPrice.setCellRenderer(priceRenderer); 
```

# java - 实现 Comparator 的比较方法超出定义行

> ID：13562408
> 
> 赞同：1
> 
> 时间：2012-11-26T09:59:03.697
> 
> 标签：java, compare, code-formatting, comparator

通常我定义`Comparator`为 -

```
Comparator<Obj> comparator= new Comparator<Obj>() {
    public int compare(Obj o1, Obj o2) { 
        //implementation...
    } 
}; 
```

当它`Comaprator`是类成员的一部分时，它在代码格式上看起来不太好。有什么方法可以定义`Comparator`as并在另一部分`Comparator<Obj> comparator= new Comparator<Obj>()`实现他的？`compare`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T10:02:29.470

只需定义一个`class`实现`Comparator`接口，并`compare`在该类中实现该方法，使用您的`comparison logic`： -

```
public class ObjComparator implements Comparator<Obj> {
    public int compare(Obj o1, Obj o2) { 
        //implementation
    }
} 
```

然后，无论你想在哪里使用你的`Comparator`，使用这个类的一个实例。例如，在`Arrays.sort`： -

```
Obj[] yourArray = new Obj[10];
Arrays.sort(yourArray, new ObjComparator()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T10:03:56.900

您可以有一个单独的类来实现`Comparator`：

```
public class MyComapartor implements Comparator{

    public int compare(Obj o1, Obj o2) 
        { //implementation...
        } 
} 
```

然后在你的课堂上使用它：

```
public class MyClass{

MyComapartor comp = new MyComapartor();

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-11T12:16:40.060

试试这个代码...

```
import java.util.ArrayList;
import java.util.Collections;
import java.util.Comparator;

class HDTV {
    private int size;
    private String brand;

    public HDTV(int size, String brand) {
        this.size = size;
        this.brand = brand;
    }

    public int getSize() {
        return size;
    }

    public void setSize(int size) {
        this.size = size;
    }

    public String getBrand() {
        return brand;
    }

    public void setBrand(String brand) {
        this.brand = brand;
    }
}

class SizeComparator implements Comparator<HDTV> {
    @Override
    public int compare(HDTV tv1, HDTV tv2) {
        int tv1Size = tv1.getSize();
        int tv2Size = tv2.getSize();

        if (tv1Size > tv2Size) {
            return 1;
        } else if (tv1Size < tv2Size) {
            return -1;
        } else {
            return 0;
        }
    }
}

public class Main {
    public static void main(String[] args) {
        HDTV tv1 = new HDTV(55, "Samsung");
        HDTV tv2 = new HDTV(60, "Sony");
        HDTV tv3 = new HDTV(42, "Panasonic");

        ArrayList<HDTV> al = new ArrayList<HDTV>();
        al.add(tv1);
        al.add(tv2);
        al.add(tv3);

        Collections.sort(al, new SizeComparator());
        for (HDTV a : al) {
            System.out.println(a.getBrand());
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T10:01:40.337

试试这个代码............

```
import java.util.ArrayList;
import java.util.Collections;
import java.util.Comparator;

class Car {

    private String name;
    private String brand;
    private double cost;

    public Car(String name, String brand, double cost) {

        this.name = name;
        this.brand = brand;
        this.cost = cost;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getBrand() {
        return brand;
    }

    public void setBrand(String brand) {
        this.brand = brand;
    }

    public double getCost() {
        return cost;
    }

    public void setCost(double cost) {
        this.cost = cost;
    }

    public String toString() {

        return getName();
    }

}

public class Hog {

    ArrayList<Car> cars = new ArrayList<Car>();

    public void setIt() {

        cars.add(new Car("Padmini", "Fiat", 100008.00));
        cars.add(new Car("XYlo", "Mahindra", 100000.00));
        cars.add(new Car("Swift", "Maruti", 200000.00));
    }

    public void sortIt() {

        Collections.sort(cars, new NameComparator());
        System.out.println(cars);
        Collections.sort(cars, new BrandComparator());
        System.out.println(cars);
        Collections.sort(cars, new CostComparator());
        System.out.println(cars);
    }

    class NameComparator implements Comparator<Car> {

        public int compare(Car c1, Car c2) {

            return c1.getName().compareTo(c2.getName());
        }
    }

    class BrandComparator implements Comparator<Car> {

        public int compare(Car c1, Car c2) {

            return c1.getBrand().compareTo(c2.getBrand());
        }
    }

    class CostComparator implements Comparator<Car> {

        public int compare(Car c1, Car c2) {

            return new Double(c1.getCost()).compareTo(new Double(c2.getCost()));
        }
    }

    public static void main(String[] args) {

        Hog h = new Hog();

        h.setIt();
        h.sortIt();
    }

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-26T10:03:19.730

您是否尝试过使用嵌套类，例如：

```
`public class Sample {
    public void method() {
        ObjComparator comparator = new ObjComparator();
    }
    public static class ObjComparator implements Comparator {
        public int compare(Obj o1, Obj o2) {
        }
    }
}` 
```

`这是您寻求的解决方案吗？`

# r - 相对于表名称，将表的特定行添加到 R 中的表数

> ID：13562411
> 
> 赞同：3
> 
> 时间：2012-11-26T09:59:06.457
> 
> 标签：r, row, add

我有许多包含温度变量的表。此外，我有一个包含坐标的表格。我想将坐标表的特定行分配给温度表。换句话说，结果将在每个温度表中创建一个新列，其中包含一行坐标表。此外，根据坐标表的id，表的对应值应添加到相关的温度表中，以表名。

```
Table1:Tab2:Tab3: Tab4:                       
-0.52|-0.93|-0.23|-0.32                           
-0.56|-0.33|-0.13|-0.37
-0.54|-0.13|-0.33|-0.64
-0.5 |-0.93|-0.53|-0.63
-0.54|-0.83|-0.63|-0.43
-0.56|-0.53|-0.38|-0.34
-0.62|-0.03|-0.13|-0.33

Coordinate:
id       E              N       
2     2579408.2431  1079721.1499
3     2579333.7158  1079729.1852
4     2579263.6502  1079770.1125
5     2579928.0358  1080028.4605
6     2579763.6471  1079868.9218
7     2579698.0756  1079767.9762
8     2579543.1019  1079640.6512

Results:
Table2:
Temperature  coordinate 
-0.52        2579408.2431  1079721.1499                    
-0.56        2579408.2431  1079721.1499   
-0.54        2579408.2431  1079721.1499
-0.5         2579408.2431  1079721.1499
-0.54        2579408.2431  1079721.1499
-0.56        2579408.2431  1079721.1499
-0.62        2579408.2431  1079721.1499 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T23:53:55.043

```
dat <- read.table(text="Table1|Table2|Table3|Table4
-0.52|-0.93|-0.23|-0.32
-0.56|-0.33|-0.13|-0.37
-0.54|-0.13|-0.33|-0.64
-0.5 |-0.93|-0.53|-0.63
-0.54|-0.83|-0.63|-0.43
-0.56|-0.53|-0.38|-0.34
-0.62|-0.03|-0.13|-0.33", sep="|", header=T)

coord <- read.table(text="id       E              N       
2     2579408.2431  1079721.1499
3     2579333.7158  1079729.1852
4     2579263.6502  1079770.1125
5     2579928.0358  1080028.4605
6     2579763.6471  1079868.9218
7     2579698.0756  1079767.9762
8     2579543.1019  1079640.6512", header=T) 
```

首先，让我们将列名转换为数字：

```
> names(dat) <- gsub("[^[:digit:]]", "", names(dat)) 
```

然后堆叠数据并更改名称：

```
> stacked <- stack(dat)
> names(stacked) <- c("Temperature, id") 
```

最后，我们合并数据：

```
> merge(stacked, coord)
   id Temperature       E       N
1   2       -0.93 2579408 1079721
2   2       -0.33 2579408 1079721
3   2       -0.13 2579408 1079721
4   2       -0.93 2579408 1079721
5   2       -0.83 2579408 1079721
6   2       -0.53 2579408 1079721
7   2       -0.03 2579408 1079721
8   3       -0.23 2579334 1079729
9   3       -0.13 2579334 1079729
10  3       -0.33 2579334 1079729
11  3       -0.53 2579334 1079729
12  3       -0.63 2579334 1079729
13  3       -0.38 2579334 1079729
14  3       -0.13 2579334 1079729
15  4       -0.32 2579264 1079770
16  4       -0.37 2579264 1079770
17  4       -0.64 2579264 1079770
18  4       -0.63 2579264 1079770
19  4       -0.43 2579264 1079770
20  4       -0.34 2579264 1079770
21  4       -0.33 2579264 1079770 
```

# c - 使用递归函数打印树

> ID：13562412
> 
> 赞同：-3
> 
> 时间：2012-11-26T09:59:15.937
> 
> 标签：c, recursion

我的目标是：当我输入“ecdgaf b”时，输出是

```
e

(\t) c                <- first left node

(\t)(\t) a            <- second left node

(\t)(\t)(\t) b        <- third right node

(\t)(\t) d            <- second right node

(\t) g                <- first right node

(\t)(\t) f            <- second left node 
```

但我无法让它按预期工作。

这是 Brian W. Kernighan 和 Dennis M. Ritchie 的“C 编程语言”中的一个示例。

我改变了我的功能，我如何在输出窗口中看到 \t。

我的尝试：

```
void prt(AW *p)
{
int j;
int temp;

if(p != NULL)
{   
          temp = judge;

    while(1)
    {   temp = temp / 2;
        count++;
        if(temp == 0)
            break;
    }

    for(j=1; j<count; j++)
        putchar('\t');
    printf("%-16s\n",p->word);

    count=0;

    if(p->left != NULL)judge++;
    prt(p->left);       

    if(p->right != NULL)judge++;
    prt(p->right);      } 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T10:13:49.150

假设你有下面这样的结构。

```
typedef struct
{
int data;
struct node * left;
struct node *right;
} node; 

 void printtreenode(node *root)
    {
    if(root == NULL)
      return;
    printtreenode(root -> left);
    printf("%d\n",root -> data);
    printtreenode(root ->right);
    } 
```

无需将 2 个参数传递给`printtreenode`并查看它也是递归的。这应该可以工作，您可以根据格式化的输出对其进行修改。

# c# - 如何维护大量的小查询

> ID：13562417
> 
> 赞同：0
> 
> 时间：2012-11-26T09:59:29.023
> 
> 标签：c#, sql-server

我有一个用 C# .NET 2.0 编写的小型控制台应用程序。应用程序查询数据库并获取一定数量的 id 编号，然后它通过这些编号寻址 Web 服务并根据 id 编号获取一些“状态”。然后将状态写回数据库。在整个过程中，我保持与数据库的开放连接，只要应用程序阻塞数据库引擎并且其他客户端无法正常工作，我不确定这是否是批处理的最佳方式。为每个操作打开和关闭连接似乎也不明智。

处理这些批处理过程的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T10:32:53.997

`If you have loads of ids and want to update them all in a one go (a batch)`，您可以形成两个 CSV 字符串并将它们作为参数传递给存储过程（sp）。

您还需要一个函数来拆分（[这里有一些](https://stackoverflow.com/questions/697519/split-function-equivalent-in-tsql)）sp 中的那些 CSV，然后更新您的表格。

前任;

```
//Make sure you have a relation between id and statusid here. i.e. same index
string csvIds = "101,2234,349,..."; //CSV for ids
string csvStatusIds = ="1,2,3,..."; //CSV for statusIds

//Pass above csv lists to the following stored procedure...

//Create a stored procedure to pass above ids.    
CREATE PROCEDURE [dbo].[updateStatuses] 

    @Ids VARCHAR(Max),
    @StatusIds VARCHAR(Max)

AS
BEGIN
     DECLARE @tblIds TABLE (key1 INT IDENTITY(1,1), myId INT)
     DECLARE @tblStatusIds TABLE (key2 INT IDENTITY(1,1), myStatusId INT)

     INSERT INTO @tblIds
        SELECT ITEMS FROM dbo.Split(@Ids,',')
     INSERT INTO @tblStatusIds
        SELECT ITEMS FROM dbo.Split(@StatusIds,',')

     --//Do your status update here
     UPDATE yt.statusId = s.myStatusId
     FROM [YourTable] yt JOIN @tblIds i 
                ON yt.id = i.myId JOIN @tblStatusIds s
                ON i.key1 = s.key2

END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T10:19:12.687

您可以尝试自己实现批量插入/读取，但令人惊讶的是，这正是 NIBerate 擅长的地方。我建议设置它并尝试一下，因为它的工作量相对较小，而且收益可能令人难以置信。

# c - 如何检查我的程序返回的值？

> ID：13562418
> 
> 赞同：4
> 
> 时间：2012-11-26T09:59:31.373
> 
> 标签：c, linux, shell

我用 C 创建了一个程序。我想知道，如何检查我的程序返回的值......我的意思是，在代码的末尾，如果没有发生错误，我的程序将返回零。如果发生错误，我的程序应该返回 1。这就是问题所在，如果出现问题，我想看看是否真的返回了 1。对于内存泄漏等，我在 Linux 上使用 valgrind。感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T10:01:55.527

您可以只打印特殊的 shell 变量`$?`，例如：

```
$ ./my_program ; echo "status = $?" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T10:02:06.510

我猜你在找`$?`

在脚本中调用您的程序并使用检查返回值`$?`

```
$?---it actually check the return code of the previously executed statement. 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-26T10:02:20.730

这很简单

`echo $?`在您的程序执行后在您的终端上使用。

它给出了先前执行的命令的返回值

例如

```
./my_program.out  // execution of program 
echo $?    // checking the return value , printing on terminal 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T12:17:19.583

通常你不必考虑具体的返回码，你可以使用 shell 逻辑来检测是否返回了非零的东西。

如果返回失败，只需打印一条消息
。/myprog || echo "出了点问题"

或者

仅当 myprog1 返回成功时才运行 myprog2
./myprog1 && ./myprog2

# javascript - 如何在 Web 应用程序中切换选项卡

> ID：13562419
> 
> 赞同：0
> 
> 时间：2012-11-26T09:59:38.087
> 
> 标签：javascript, jquery, html, events, keyboard

我正在开发一个 Web 应用程序，我需要使用键盘以下列方式打开/切换选项卡，

1.  当我按 ctrl + alt + 1 tab1 应该打开。
2.  但是如果我按 2 tab2 不释放 ctrl 和 alt 应该打开。

我能够实现 1 和 2，但释放 ctrl 和 alt 键。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T10:34:55.430

显然，当它具有 ctrl 和 alt 时，您用来查找按下的键的方式并不好。你可以像这样简单地听`ctrl+alt+1`，`ctrl+alt+2`

```
$(document).keydown(function (e) {
    if (e.ctrlKey && e.altKey) {
        // 97 for key "1"
        if (e.keyCode == 97) {
            // open first tab
            $("#Tab1").click();
        }
        else if (e.keyCode == 98) {
            // 98 for key "2"
            // open second tab
            $("#Tab2").click();
        }
    }
}); 
```

# java - 关于 liferay 中的请求处理程序的基础问题

> ID：13562424
> 
> 赞同：-1
> 
> 时间：2012-11-26T10:00:08.723
> 
> 标签：java, servlets, liferay, web.xml

从最近几周开始，我开始在 Liferay 工作。我有几个关于 liferay 插件开发的问题，它们是

1.  我们可以在插件中包含一个 servlet 吗？
2.  如果是，那么哪一个可以拥有插件？它是一个portlet 还是一个钩子，还是一个ext？
3.  如何`http://liferayhost:8090/url/callback`像在 web.xml 中那样将 servlet 映射到？
4.  我们可以为 portlet 或 hook 编写 web.xml 吗？

请帮助我理解这些主题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T11:55:00.357

*我们可以在插件中包含一个 servlet 吗？*

如果您正在创建`Liferay Hook`，您的`doRun`方法将获取`Request`和`Response`对象，您可以使用它们分别处理`Request`和`Response`。

例如，您可以通过 Request 对象获取 Session Id、Cookie 等。

`session=request.getSession(false);`

`Cookie[] cookies = request.getCookies();`

您可以使用`Response`对象进行重定向，

`response.sendRedirect("/PathToYourPage");`

因此，您可以获得几乎所有可以作为 Servlet 获得的东西。

如果您正在开发一个`Portlet`插件，那么请记住它是`Portlet`您正在开发的，而不是`Servlet`. 如果`Portlet`你想要`Request`和`Response`对象，你可以使用下面的代码

```
javax.servlet.http.HttpServletRequest request = (javax.servlet.http.HttpServletRequest) (FacesContext.getCurrentInstance().getExternalContext().getRequestMap().get("com.liferay.portal.kernel.servlet.PortletServletRequest")); 
javax.servlet.http.HttpServletResponse response = (javax.servlet.http.HttpServletResponse) (FacesContext.getCurrentInstance().getExternalContext().getRequestMap().get("com.liferay.portal.kernel.servlet.PortletServletResponse")); 
```

在同一行中，您可以尝试`Ext`s

如果你正在开发一个`Theme`插件，我真的不明白你想在那里实现什么`Servlet`。

但是您仍然可以做的是，在您的主题`vm`文件`templates`夹下的文件中包含一个 JSP 页面。

```
$theme.include($themeServletContext, "/myJSP.jsp") 
```

这个 JSP 页面可以放在`WebContent`文件夹下。在此`myJSP.jsp`，通过 JSTL/Scriplets 可以获取`Request/Response`对象

我希望这也能回答你的第二个问题。

*如何像在 web.xml 中那样将 servlet 映射到 http:/liferayhost:8090/url/callback？*

`8090`将是您通过提及索引在应用程序服务器中配置的端口号。

`url`值将是您在 Web 服务器（例如 Apache）中配置的 Web 应用程序名称（war 文件）名称`uriworkers.properties`。`callback`将是您在应用程序中`Servlet`配置的 URL 模式。`web.xml`

*我们可以为 portlet 或 hook 编写 web.xml 吗？*

你可以同时`web.xml`写`Portlet`和`Hook`。在 Hooks 的情况下，虽然如果你有基本配置不会抛出异常`web.xml`，但我不明白你想在那里做什么。

# java - keytool 如何将 keyUsage 与 -ext 一起使用

> ID：13562425
> 
> 赞同：0
> 
> 时间：2012-11-26T10:00:08.067
> 
> 标签：java, keytool

我正在尝试使用该`keytool`实用程序创建证书。我需要一些关于**keyUsage**的信息，我看过[javadoc](http://download.java.net/jdk8/docs/technotes/tools/solaris/keytool.html)。

但是我无法理解**各种关键用法之间的区别，**例如：

1.  它是什么`digitalSignature`以及何时应该使用。
2.  `keyCertSign`和和 什么时候使用有什么区别`cRLSign`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T10:18:53.813

*   广告 1\. 密钥将用于创建数据的数字签名。
*   广告 2\. 密钥将用于签署证书和证书撤销列表

如果您只想创建一个简单的证书，则无需定义其用途。

# java - 有多少种方法可以将位图转换为字符串，反之亦然？

> ID：13562429
> 
> 赞同：42
> 
> 时间：2012-11-26T10:00:19.193
> 
> 标签：java, android, bitmapdata

在我的应用程序中，我想以字符串的形式将位图图像发送到服务器，我想知道有多少种方法可以将位图转换为字符串。现在我使用 Base64 格式进行编码和解码，它需要更多的内存。是否有任何其他可能性以不同的方式做同样的事情，这需要更少的内存消耗。现在我正在使用这段代码。

```
Resources r = ShowFullImage.this.getResources();
Bitmap bm = BitmapFactory.decodeResource(r, R.drawable.col);
ByteArrayOutputStream baos = new ByteArrayOutputStream();  
bm.compress(Bitmap.CompressFormat.PNG, 100, baos); //bm is the bitmap object   
byte[] b = baos.toByteArray();

String encodedImage = Base64.encodeToString(b, Base64.DEFAULT); 
```

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-11-26T10:46:01.733

```
public String BitMapToString(Bitmap bitmap){
     ByteArrayOutputStream baos=new  ByteArrayOutputStream();
     bitmap.compress(Bitmap.CompressFormat.PNG,100, baos);
     byte [] b=baos.toByteArray();
     String temp=Base64.encodeToString(b, Base64.DEFAULT);
     return temp;
} 
```

这是将字符串转换为位图的相反过程，但字符串应使用 Base64 编码

```
/**
 * @param encodedString
 * @return bitmap (from given string)
 */
public Bitmap StringToBitMap(String encodedString){
   try {
      byte [] encodeByte=Base64.decode(encodedString,Base64.DEFAULT);
      Bitmap bitmap=BitmapFactory.decodeByteArray(encodeByte, 0, encodeByte.length);
      return bitmap;
   } catch(Exception e) {
      e.getMessage();
      return null;
   }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-05T07:02:07.683

是的，您可以通过实施以下代码来做到这一点：

字符串到位图：

```
 public Bitmap StringToBitMap(String encodedString) {
    try {
        byte[] encodeByte = Base64.decode(encodedString, Base64.DEFAULT);
        Bitmap bitmap = BitmapFactory.decodeByteArray(encodeByte, 0,
                encodeByte.length);
        return bitmap;
    } catch (Exception e) {
        e.getMessage();
        return null;
    }
} 
```

位图到字符串：

```
public String BitMapToString(Bitmap bitmap) {
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    bitmap.compress(Bitmap.CompressFormat.PNG, 100, baos);
    byte[] b = baos.toByteArray();
    String temp = Base64.encodeToString(b, Base64.DEFAULT);
    return temp;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-26T10:04:08.173

您可以使用 byteArray 发送图像或其他数据。没有编码和解码要求。并且您必须使用多部分正文将数据发送到服务器..

# php - 在 PHP 中创建 XML 文档

> ID：13562434
> 
> 赞同：3
> 
> 时间：2012-11-26T10:00:38.203
> 
> 标签：php, xml, arrays

我想从我拥有的这些数组中创建一个 XML 文档。数组如下所示：

```
Array
(
    [0] => Firstname1
    [1] => Firstname2
    [2] => Firstname3
)

Array
(
    [0] => Lastname1
    [1] => Lastname2
    [2] => Lastname3
)
........... 
```

我希望 XML 文档的结构如下：

```
<Member>
<Firstname>Firstname1</Firstname>
<Lastname>Lastname1 </Lastname>
</Member> 
```

我怎样才能做到这一点？感谢帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T10:12:26.373

使用这个： http: [//php.net/manual/en/book.simplexml.php](http://php.net/manual/en/book.simplexml.php)

和代码（例如如何构建这样的结构）：

```
$xml = new SimpleXMLElement('<xml></xml>');
foreach($first as $k=>$v){
    $member = $xml->addChild('Member');
    $member->addChild('Firstname',$v);
    $member->addChild('Lastname',$last[$k]);
} 
```

# regex - 使用正则表达式的无限循环

> ID：13562435
> 
> 赞同：2
> 
> 时间：2012-11-26T10:00:47.600
> 
> 标签：regex, roundhouse

我们在一个更面向 SQL 的项目中使用 RoundhouseE 迁移工具。我发现了一个非常奇怪的错误

某个 SQL 函数脚本（遗憾的是我无法提供该脚本，因为它是我客户的属性）使得 RegEx 的 Replace 方法永远不会返回

正则表达式看起来像这样

```
(?<KEEP1>^(?:[\s\t])*(?:-{2}).*$)|(?<KEEP1>/{1}\*{1}[\S\s]*?\*{1}/{1})|(?<KEEP1>'{1}(?:[^']|\n[^'])*?'{1})|(?<KEEP1>\s)(?<BATCHSPLITTER>GO)(?<KEEP2>\s)|(?<KEEP1>\s)(?<BATCHSPLITTER>GO)(?<KEEP2>$) 
```

RounhouseE 中永不返回的代码行

```
string sql_statement_scrubbed = regex_replace.Replace(sql_to_run, match => evaluate_and_replace_batch_split_items(match, regex_replace)); 
```

问题不在于`evaluate_and_replace_batch_split_items`实际的 regex.Replace 方法中的委托，我在一个简单的正则表达式工具中尝试了正则表达式，它也挂起。也许这里的 RegEx 专家可以看到问题所在？

编辑：如果我从这个sql注释中删除**'**`-- If no previous, don't report revised` （撇号） 它可以工作，但它不仅必须是脚本中其他文本的组合，因为该行独立工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T11:46:58.287

通常，当一个正则表达式需要永远匹配（或者更有可能发现它不匹配）时，这是因为灾难性的回溯。您的正则表达式中有几个实例可能容易出现这种情况，具体取决于您的输入内容。我已经使用了您的正则表达式并对其进行了一些清理，删除了许多不必要的量词和交替。这个正则表达式：

```
(?<KEEP1>^\s*--.*$)|(?<KEEP1>/\*[\S\s]*?\*/)|(?<KEEP1>'[^']*')|(?<KEEP1>\s)(?<BATCHSPLITTER>GO)(?<KEEP2>\s|$) 
```

将与您的旧正则表达式完全匹配，但它不那么复杂并且应该更稳定。请试一试。

要正确处理字符串 ( `'It\'s something else!'`) 中的转义撇号，您需要更改正则表达式：

```
(?<KEEP1>^\s*--.*$)|(?<KEEP1>/\*[\S\s]*?\*/)|(?<KEEP1>'(?:\\.|[^'\\])*')|(?<KEEP1>\s)(?<BATCHSPLITTER>GO)(?<KEEP2>\s|$) 
```

# javascript - jQuery .hide() 和 .css("display", "none") 的区别

> ID：13562439
> 
> 赞同：82
> 
> 时间：2012-11-26T10:01:07.137
> 
> 标签：javascript, jquery, css

有没有区别

```
jQuery('#id').show() and jQuery('#id').css("display","block") 
```

和

```
jQuery('#id').hide() and jQuery('#id').css("display","none") 
```

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2012-11-26T10:04:01.680

> jQuery('#id').css("display","block")

该属性可以有[许多](https://developer.mozilla.org/en-US/docs/CSS/display)`display`可能的值，其中有`block`、`inline`、`inline-block`等等。

该`.show()`方法不一定将其设置为`block`，而是将其重置为您定义的内容（如果有的话）。

在 jQuery 源代码中，您可以看到他们如何将`display`属性设置为 ""（一个空字符串）以检查在任何 jQuery 操作之前它是什么：[little link](https://github.com/jquery/jquery/blob/5904468b9c49d7d5a780010f44d7e76dd4c81706/src/css.js#L68)。

另一方面，隐藏是通过 完成的`display: none;`，因此您可以考虑`.hide()`并`.css("display", "none")`等效于某个点。

建议使用`.show()`并且`.hide()`无论如何避免任何陷阱（另外，它们更短）。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-11-26T10:17:10.760

**show() 和 css({'display':'block'}) 的区别**

假设你一开始就有这个：

```
<span id="thisElement" style="display: none;">Foo</span> 
```

你打电话时：

```
$('#thisElement').show(); 
```

你会得到：

```
<span id="thisElement" style="">Foo</span> 
```

尽管：

```
$('#thisElement').css({'display':'block'}); 
```

做：

```
<span id="thisElement" style="display: block;">Foo</span> 
```

**所以，是的，有区别。**

**hide() 和 css({'display':'none'}) 的区别**

与上面相同，但将它们更改为 hide() 和 display':'none'......

**另一个区别**是 当`.hide()`被调用时显示属性的值是保存在jQuery的数据缓存中的，所以当`.show()`被调用时，会恢复初始显示值！

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-28T21:56:56.857

是的，两者的性能有所不同： `jQuery('#id').show()`比`jQuery('#id').css("display","block")`以前的情况要慢一些额外的工作是为了从 jquery 缓存中检索初始状态，因为 display 不是二进制属性，它可以是`inline`, `block`, `none`,`table`等类似方法就是这样`hide()`。

请参阅：http: [//jsperf.com/show-vs-addclass](http://jsperf.com/show-vs-addclass)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-26T10:03:48.717

[没有不同](http://api.jquery.com/hide/)

> 在没有参数的情况下， .hide() 方法是隐藏元素的最简单方法：
> 
> $('.target').hide(); 匹配的元素将立即隐藏，没有动画。这大致相当于调用 .css('display', 'none')，只是 display 属性的值保存在 jQuery 的数据缓存中，以便稍后可以将 display 恢复为其初始值。如果一个元素的显示值为 inline，然后被隐藏并显示，它将再次被显示为 inline。

节目也一样

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-11-26T10:05:41.710

是，有一点不同。

`jQuery('#id').css("display","block")`将始终将要显示的元素设置为块。

`jQuery('#id').show()`will et 是它最初的显示类型，例如 display: inline 。

请参阅[Jquery 文档](http://api.jquery.com/show/)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-11-26T10:03:52.547

你可以看看[源代码](http://james.padolsey.com/jquery/#v=1.7.2&fn=jQuery.fn.show)（这里是v1.7.2）。

除了我们可以设置的动画外，这还保留了旧的显示样式（不是所有情况`block`，也可以是`inline`，，`table-cell`...）。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-26T10:06:58.107

见[http://api.jquery.com/show/](http://api.jquery.com/show/)

没有参数，.show() 方法是显示元素的最简单方法：

$('.target').show();

匹配的元素将立即显示，没有动画。这大致相当于调用 .css('display', 'block')，除了 display 属性恢复到最初的样子。如果一个元素的显示值为 inline，然后被隐藏并显示，它将再次被显示为 inline。

# c# - 网格视图分页不起作用

> ID：13562445
> 
> 赞同：0
> 
> 时间：2012-11-26T10:01:33.177
> 
> 标签：c#, asp.net, .net

Grid View 分页不起作用意味着它不能逐页显示记录

```
<data:EntityGridView ID="GridOpen" runat="server" AutoGenerateColumns="false" AllowMultiColumnSorting="false"
                                                        DefaultSortDirection="Ascending" AllowPaging="false" PageSize="10" OnPageIndexChanging="GridOpen_PageIndexChanging"
                                                        OnSelectedIndexChanged="GridOpen_SelectedIndexChanged" DataKeyNames="OrderNo" Width="100%"
                                                        OnRowDataBound="GridOpen_OnRowDataBound" ExcelExportFileName="Export_AccountTerms.xls">
                                                        <Columns>

  <asp:BoundField DataField="OrderNo" HeaderText="Order No" SortExpression="[OrderNo]" />

</Columns> 
```

这是我的数据源和绑定网格

```
_actOpen = _actOrdServices.GetPaged("StatusID=1 AND AssignedDispatchBoardID = " + DispatchBoard + " AND CompanyId=" + Session["CompanyId"].ToString(), "OrderNo Desc", GridOpen.PageIndex, GridOpen.PageSize, out count);

 GridOpen.DataSource = _actOpen; 
```

我也尝试过分页

```
GridOpen.AllowPaging = true; 
```

我的商店程序运行良好，但在这里我不知道这不是在网格中显示分页

任何指南都将受到热烈欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T11:03:32.033

首先在您的 aspx 代码中 AllowPaging="false" 使其为“true”。

然后在 PageIndexChanging 事件后面的代码中执行此操作，

```
 protected void GridOpen_PageIndexChanging(object sender, GridViewPageEventArgs e)
    {
        GridOpen.DataSource = _actOpen;
        GridOpen.PageIndex = e.NewPageIndex;
        GridOpen.DataBind();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T10:36:13.620

您的 gridview 的允许分页属性设置为 false (AllowPaging="false") 使其为 true 并再次检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T11:37:16.330

除了你必须做的，还有必要在aspx.cs中写分页事件：
1）确保你已经完成，在aspx.page（在gridview中）允许分页=“true”
。2）然后在代码中注册事件：

```
protected void GridOpen_PageIndexChanging(object sender, GridViewPageEventArgs e)
{
    GridOpen.DataSource = YourOBJ.Method_yourmethod();
    GridOpen.PageIndex = e.NewPageIndex;
    GridOpen.DataBind();
} 
```

# drupal - Drupal google api markermanager

> ID：13562451
> 
> 赞同：0
> 
> 时间：2012-11-26T10:01:41.077
> 
> 标签：drupal, google-maps-api-3, markermanager

One of the website i'm managing is getting in trouble...And as i didn't develop this one, i had real problems to do something on it.

It's based on Drupal 7 and use the Getlocations module to set-up some Gmaps with marker.

The problem is that from last week, for some page, the maps is showing an unknow location (somewhere in spain...). But, when you move the map with arrow, it's get to the good location. The problem is totally random, hard to reproduce in exact condition etc...

Here is the javascript console :

```
Uncaught TypeError: Cannot read property '20' of undefined markermanager.js:534 
```

This line is relative to the z parameter.

So, after looking on the net it appears that it could help to set up the version of maps in the call. Set the v variable to 3.9.

I opened the file : sites/all/modules/getlocations/getlocations.module and to this part :

```
$query = array();
if (! empty($key)) {
$query['key'] = $key;
}
$query['sensor'] = 'true';
$query['language'] = $language->language; 
```

add this line :

```
$query['v'] = '3.9'; 
```

uploaded the news file, empty drupal and chrome cache then...nothing. Drupal still calling

```
<script src="http://maps.googleapis.com/maps/api/js?
key=xxxxxxxx;sensor=false&amp;language=fr"></script> 
```

and does'nt specify the version...I look to other files in modules/getlocations and find nothing interesting.

So my question is : how can i specify the version number of gooleapis ? I'd like to call this :

```
<script src="http://maps.googleapis.com/maps/api/js?v=3.9&
key=xxxxxxxxxxxxxx;sensor=false&amp;language=fr"></script> 
```

I never use drupal and i'm dubitative on this point...

Thanks !

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T11:17:14.853

[标记管理器](http://google-maps-utility-library-v3.googlecode.com/svn/tags/markermanager/1.1/)的更新版本可与 API v3.10 一起使用。将 API 版本硬编码为可能会在 6 个月内停用的版本可能是一个更好的解决方案。

# highcharts - 如何反转highcharts中的条形图？

> ID：13562452
> 
> 赞同：4
> 
> 时间：2012-11-26T10:01:41.750
> 
> 标签：highcharts

那里有一些highcharts专业人士吗？

我想要的是，值 6（最低分）从左边开始，右边是最高分（1）

所以条形图指向 1（显示要标记 1 的空间）

像：

```
|------------------------(1.9)

|--------------------(2.3)

|----------------------------(1.4)

6..............3................1 
```

[http://jsfiddle.net/aCz2s/1/](http://jsfiddle.net/aCz2s/1/)

有什么帮助吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-26T18:15:32.697

你也可以设置`reversed`为`yAxis`，就像你在`xAxis`.

像这样：

```
xAxis: {
    reversed: true
},
yAxis: {
    reversed: true
} 
```

这是一个[**演示**](http://jsfiddle.net/aCz2s/4/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T18:28:56.370

我会做这样的[事情](http://jsfiddle.net/wergeld/aCz2s/5/)。这里重要的是有点笨重。是使您的值变为负值，然后使用 xAxis 上的标签格式化程序使它们显示为正值（调整后的最小值/最大值）：

```
 yAxis: {
        min: -6,
        max: 0,
        title: {
            text: 'Marks from  6 (very bad) to 1 (yery good)',
            align: 'high'
        },
        labels: {
            overflow: 'justify',
            formatter: function() {
            return this.value * -1;
        }
        }
    } 
```

还将 Xaxis 设置在另一侧：

```
 xAxis: {
        reversed:true,
        categories: ['John', 'Sandy', 'Carl', 'Maria'],
        title: {
            text: null
        },
        opposite: true
    } 
```

# mysql - 为什么 Node.js 中的 MySQL 这么慢？

> ID：13562455
> 
> 赞同：8
> 
> 时间：2012-11-26T10:01:50.497
> 
> 标签：mysql, node.js, node-mysql

我的 Node.js 代码如下

CODE1：下面

```
var http=require('http');
var MySQL = require('mysql');

mysql = MySQL.createConnection(...)

http.createServer(function(req, res){
    // the query will take several seconds
    mysql.query("SELECT SLEEP(1)", function....)
});
http.listen(...); 
```

问题是当我刷新页面太快时服务器会崩溃。我认为是 node-mysql 模块的问题，它处理队列中的查询。所以我尝试创建一个连接池。

CODE2: 下面

```
....
var pool = require('generic-pool');
var mp   = pool.Pool({
    ...
    create: function(cb){
        client = MySQL.createConnection(...);
        cb(null, client)
    },
    max: 10, // up to 10 connection
    min: 2,
    ...
});
....
    mp.acquire(function(err, mysql){

        // the query will take several seconds
        mysql.query("SELECT SLEEP(1)", function....)
        mp.release(mysql);
    });
.... 
```

但问题依然存在，为什么呢？我怎样才能解决这个问题。

编辑：我以 100 个并发启动 100 个请求，预计需要 10 秒。但这需要20秒。为什么？池是否只支持最多 5 个连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T05:11:32.070

连接池是处理多个并发请求的好方法。但是，我们为什么不能使用 mysql-specific 池而不是使用“通用资源池”呢？

此[链接](https://github.com/Kijewski/node-mysql-pool)讨论“ **node-mysql-pool** ”，它是 node.js 的 MySQL 连接池

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T22:16:53.743

免责声明：我编写模块来解决此类问题。

```
npm install mysql-simple-pool 
```

现在您可以配置连接池。我最多使用 100 个连接。

```
var Pool = require('mysql-simple-pool');
var pool = new Pool(100, {
    host: 'localhost',
    user: 'root',
    password: 'root',
    database: 'test'
}); 
```

现在您可以编写一个测试函数来对其进行测试。

```
function test() {
    var counter = 0;
    var start = new Date().getTime();
    for (var xa = 0; xa < 10; xa++) {
        pool.query('SELECT SLEEP(1)', function(err, results) {
            counter++;
            if (counter == 10) {
                var end = new Date().getTime();
                console.log('Time spend is ' + (end - start) + 'ms');
                test();
            }
        });
    }
}
test(); 
```

这是输出......

```
Time spend is 1044ms
Time spend is 1006ms
Time spend is 1005ms
Time spend is 1006ms
Time spend is 1007ms
Time spend is 1005ms
Time spend is 1005ms
Time spend is 1004ms
Time spend is 1005ms
Time spend is 1005ms 
```

第一次花费一些时间建立连接。希望这会有所帮助~

# c# - 如何防止一个程序的多个实例同时运行？

> ID：13562464
> 
> 赞同：1
> 
> 时间：2012-11-26T10:02:20.523
> 
> 标签：c#

所以我创建了一个程序（不使用表单），所以它是一个干净的类，而不是一个表单。所以，当程序启动时，我希望它检查进程，如果找到另一个进程，就杀死自己。我试过这个...

```
static void checkDupe()
{
    string RunningProcess = Process.GetCurrentProcess().ProcessName;
    Process[] processes = Process.GetProcessesByName(RunningProcess);

    if (processes.Length > 1)
    {
        Process.GetCurrentProcess().Kill();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T10:04:23.930

看看使用[Mutex](http://msdn.microsoft.com/en-us/library/system.threading.mutex.aspx)：

```
class Program
{
    static Mutex _m;

    static bool IsSingleInstance()
    {
    try
    {
        // Try to open existing mutex.
        Mutex.OpenExisting("PERL");
    }
    catch
    {
        // If exception occurred, there is no such mutex.
        Program._m = new Mutex(true, "PERL");

        // Only one instance.
        return true;
    }
    // More than one instance.
    return false;
    }

    static void Main()
    {
    if (!Program.IsSingleInstance())
    {
        Console.WriteLine("More than one instance"); // Exit program.
    }
    else
    {
        Console.WriteLine("One instance"); // Continue with program.
    }
    // Stay open.
    Console.ReadLine();
    }
} 
```

上面的例子取自：

[http://www.dotnetperls.com/mutex](http://www.dotnetperls.com/mutex)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-23T12:15:36.163

相同的互斥体想法，但更简单的代码：

```
 bool SingleInstance;
        var mut = new Mutex(true,"UniqueName", out SingleInstance);
        if (SingleInstance) {
           //Run
        } else {
           //Exit
        } 
```

当应用程序存在时，互斥锁被销毁，不需要释放它或处置它或任何东西。

（AFAIK）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T10:06:43.013

它按名称返回正在运行的程序的实例

```
private static Process RunningInstance()
{
    var current = Process.GetCurrentProcess();
    var procName = current.ProcessName.Replace(@".vshost", string.Empty);
    var processes = Process.GetProcessesByName(procName);

    return processes.FirstOrDefault(t => t.Id != current.Id && current.SessionId == t.SessionId);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T15:25:54.930

这是从我的另一个答案中复制的：[在同一程序的多个实例之间同步](https://stackoverflow.com/questions/10272302/syncing-between-multiple-instances-of-the-same-program/10280829#10280829)

在下面，您可以找到简化检查多个实例以及允许将起始参数从第二个实例传输到第一个实例的代码。

```
 /// <summary>
        /// Enforces single instance for an application.
        /// </summary>
        public class SingleInstance : IDisposable
        {
            #region Fields

            /// <summary>
            /// The synchronization context.
            /// </summary>
            private readonly SynchronizationContext synchronizationContext;

            /// <summary>
            /// The disposed.
            /// </summary>
            private bool disposed;

            /// <summary>
            /// The identifier.
            /// </summary>
            private Guid identifier = Guid.Empty;

            /// <summary>
            /// The mutex.
            /// </summary>
            private Mutex mutex;

            #endregion

            #region Constructors and Destructors

            /// <summary>
            /// Initializes a new instance of the <see cref="SingleInstance"/> class.
            /// </summary>
            /// <param name="identifier">
            /// An identifier unique to this application.
            /// </param>
            /// <param name="args">
            /// The command line arguments.
            /// </param>
            public SingleInstance(Guid identifier, IEnumerable<string> args)
            {
                this.identifier = identifier;

                bool ownsMutex;
                this.mutex = new Mutex(true, identifier.ToString(), out ownsMutex);

                this.synchronizationContext = SynchronizationContext.Current;

                this.FirstInstance = ownsMutex;

                if (this.FirstInstance)
                {
                    this.ListenAsync();
                }
                else
                {
                    this.NotifyFirstInstance(args);
                }
            }

            /// <summary>
            /// Initializes a new instance of the <see cref="SingleInstance"/> class.
            /// </summary>
            /// <param name="identifier">
            /// An identifier unique to this application.
            /// </param>
            public SingleInstance(Guid identifier)
                : this(identifier, null)
            {
            }

            #endregion

            #region Public Events

            /// <summary>
            /// Event raised when arguments are received from successive instances.
            /// </summary>
            public event EventHandler<OtherInstanceCreatedEventArgs> OtherInstanceCreated;

            #endregion

            #region Public Properties

            /// <summary>
            /// Gets a value indicating whether this is the first instance of this application.
            /// </summary>
            public bool FirstInstance { get; private set; }

            #endregion

            #region Implemented Interfaces

            #region IDisposable

            /// <summary>
            /// The dispose.
            /// </summary>
            public void Dispose()
            {
                this.Dispose(true);
                GC.SuppressFinalize(this);
            }

            #endregion

            #endregion

            #region Methods

            /// <summary>
            /// Clean up any resources being used.
            /// </summary>
            /// <param name="disposing">
            /// True if managed resources should be disposed; otherwise, false.
            /// </param>
            protected virtual void Dispose(bool disposing)
            {
                if (this.disposed)
                {
                    return;
                }

                if (disposing)
                {
                    if (this.mutex != null && this.FirstInstance)
                    {
                        this.mutex.WaitOne();
                        this.mutex.ReleaseMutex();
                        this.mutex = null;
                    }
                }

                this.disposed = true;
            }

            /// <summary>
            /// Fires the OtherInstanceCreated event.
            /// </summary>
            /// <param name="arguments">
            /// The arguments to pass with the <see cref="OtherInstanceCreatedEventArgs"/> class.
            /// </param>
            protected virtual void OnOtherInstanceCreated(OtherInstanceCreatedEventArgs arguments)
            {
                EventHandler<OtherInstanceCreatedEventArgs> handler = this.OtherInstanceCreated;

                if (handler != null)
                {
                    handler(this, arguments);
                }
            }

            /// <summary>
            /// Listens for arguments on a named pipe.
            /// </summary>
            private void Listen()
            {
                try
                {
                    using (var server = new NamedPipeServerStream(this.identifier.ToString()))
                    {
                        using (var reader = new StreamReader(server))
                        {
                            server.WaitForConnection();
                            var arguments = new List<string>();

                            while (server.IsConnected)
                            {
                                arguments.Add(reader.ReadLine());
                            }

                            this.synchronizationContext.Post(o => this.OnOtherInstanceCreated(new OtherInstanceCreatedEventArgs(arguments)), null);                        
                        }
                    }

                    // start listening again.
                    this.Listen();
                }
                catch (IOException)
                {
                    // Pipe was broken, listen again.
                    this.Listen();
                }          
            }

            /// <summary>
            /// Listens for arguments being passed from successive instances of the applicaiton.
            /// </summary>
            private void ListenAsync()
            {
                Task.Factory.StartNew(this.Listen, TaskCreationOptions.LongRunning);
            }

            /// <summary>
            /// Passes the given arguments to the first running instance of the application.
            /// </summary>
            /// <param name="arguments">
            /// The arguments to pass.
            /// </param>
            private void NotifyFirstInstance(IEnumerable<string> arguments)
            {
                try
                {
                    using (var client = new NamedPipeClientStream(this.identifier.ToString()))
                    {
                        using (var writer = new StreamWriter(client))
                        {
                            client.Connect(200);

                            if (arguments != null)
                            {
                                foreach (string argument in arguments)
                                {
                                    writer.WriteLine(argument);
                                }
                            }
                        }
                    }
                }
                catch (TimeoutException)
                {
                    // Couldn't connect to server
                }
                catch (IOException)
                {
                    // Pipe was broken
                }
            }

 #endregion
    }

/// <summary>
/// Holds a list of arguments given to an application at startup.
/// </summary>
public class OtherInstanceCreatedEventArgs : EventArgs
{
    #region Constructors and Destructors

    /// <summary>
    /// Initializes a new instance of the <see cref="OtherInstanceCreatedEventArgs"/> class.
    /// </summary>
    /// <param name="args">
    /// The command line arguments.
    /// </param>
    public OtherInstanceCreatedEventArgs(IEnumerable<string> args)
    {
        this.Args = args;
    }

    #endregion

    #region Public Properties

    /// <summary>
    /// Gets the startup arguments.
    /// </summary>
    public IEnumerable<string> Args { get; private set; }

    #endregion
} 
```

然后在您的主类中，您可以创建将一直保留到应用程序运行的类的实例。您可以检查其他实例是否由属性创建，并获得由事件`FirstInstance`创建的其他实例的通知。`OtherInstanceCreated`

# php - PHP跨域表单处理安全

> ID：13562467
> 
> 赞同：1
> 
> 时间：2012-11-26T10:02:50.617
> 
> 标签：php, forms, security, cross-domain, captcha

我有几个带有电子邮件注册表单的网站。我想在与这些网站不同的服务器上填充中央数据库。我正在考虑将表单的操作属性设置为中央数据库服务器上的 Web 服务。这个网络服务可以简单地将数据保存到数据库中。您可以推荐哪些安全解决方案来避免黑客攻击/淹没中央服务器？

解决方案之一是检查数据来自（我的网站）的 IP / 域，如果它是不同的，则阻止该 IP。

您还可以推荐哪些其他解决方案？我认为验证码不会在这里真正起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T10:13:34.643

如果您要编写一个简单的 Web 服务，您可以将操作设置为当前服务器，并让该服务器上的 PHP 脚本与中央数据库的 Web 服务通信。这样，您就可以进行身份​​验证*，并且*不会遇到任何安全问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T10:12:52.837

另一种更安全的解决方案是在每个网站上运行一个服务器端代理脚本，它将表单输入连同只有代理和接收者知道的应用程序机密一起转发到您的中央 Web 服务。

非常简单的实现（未经测试）：

**代理.php**

```
<?php
$secret = '[RANDOMSTRING]'
$webservice = 'https://www.yourhost.com/receiver.php'
$formData = serialize($_POST);
file_get_contents($webservice . '?secret=' . $secret . '&data=' . urlencode($formData));
?> 
```

**接收器.php**

```
<?php
if ($_GET['secret'] == '[RANDOMSTRING]') {
    $formData = unserialize($_GET['data']);
} else {
    // ignore
} 
```

*注意：*由于只涉及服务器到服务器的通信（通过使用 https 进行加固），窃听的风险可以忽略不计。

# apache - URL重写替换第一？和 ＆

> ID：13562468
> 
> 赞同：1
> 
> 时间：2012-11-26T10:02:51.857
> 
> 标签：apache, .htaccess, mod-rewrite, rewrite

所以我有一个有点大的 htaccess 文件，但这里是影响这个问题的重写代码：

```
RewriteCond %{REQUEST_URI} !^/(index|upload|gyazo|image|short)
RewriteRule ^admin/([^/]*)/? admin.php?p=$1 
```

我想知道的是，是否有办法以这样的方式重写 url，以便我的重写参数之后的第一个参数可以使用问号而不是 & 号。

这样我就可以写这样的网址

```
http://mydomain.com/admin/page?example=true&param2=false 
```

当真正请求的页面是这样的：

```
http://mydomain.com/admin.php?p=page&example=true&param2=false 
```

等等。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T10:51:09.927

你`RewriteRule`应该按原样工作。只需添加[QSA](http://httpd.apache.org/docs/current/rewrite/flags.html#flag_qsa)标志，查询字符串将附加到 admin.php?p=$1&...

```
RewriteRule ^admin/([^/]*)/? admin.php?p=$1 [QSA,L] 
```

# asp.net - asp.net 4.0 正则表达式验证器

> ID：13562470
> 
> 赞同：1
> 
> 时间：2012-11-26T10:03:11.350
> 
> 标签：asp.net, regex, reg-expressionvalidator

我需要修改我的正则表达式验证器代码以要求用户满足以下密码要求：

一种。至少包含 2 个大写字符：`A, B, C`等。

湾。至少包含 2 个小写字符：`a, b, c,`等。

C。至少包含 2 个数字：`1,2,3,4,5,6,7,8,9,0`

d。至少包含2个特殊字符，即

```
! @ # $ % ^ & * ( ) _ + | ~ - = \ ` { } [ ] : " ; ' < > ? , . / 
```

当前代码只需要 10 个字符的密码长度：

```
<asp:RegularExpressionValidator ID="valPassword" 
runat="server" ControlToValidate="txtPassword" 
ErrorMessage="Error: 10 character required password length"
ValidationExpression=".{10}.*" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T10:37:47.930

你可以使用这个正则表达式

```
^(?=^.{10}$)(?=^(.*?[A-Z]){2,}.*?$)(?=^(.*?[a-z]){2,}.*?$)(?=^(.*?\d){2,}.*?$)(?=^(.*?[!@#$%^&]){2,}.*?$).*?$
   --------  ---------------------  --------------------- ------------------- --------------------------
      |               |                       |                    |                      |->checks for 2 or more special characters
      |               |                       |                    |->checks for 2 or more digits 
      |               |                       |->checks for 2 or more small letters
      |               |->checks for 2 or more capital words
      |
      |->checks for 10 words.. 
```

# wpf - 单击 TextBlock 时如何添加事件？

> ID：13562474
> 
> 赞同：28
> 
> 时间：2012-11-26T10:03:14.803
> 
> 标签：wpf

我可以知道如何在单击 TextBlock 时添加事件吗？我在 TextBlock 上找不到 onClick。有谁知道活动的名称是什么？

代码：

```
<TextBlock Name="Title" Click="?" /> 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-11-26T10:04:39.483

只需使用“PreviewMouseDown”事件。祝你好运！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2020-04-30T09:51:30.727

您可以使用`InputBinding`：

```
<TextBlock Text="{Binding SomeText}">
    <TextBlock.InputBindings>
        <MouseBinding Command="{Binding SomeCommand}" MouseAction="LeftClick" />
    </TextBlock.InputBindings>
</TextBlock> 
```

来源：[https ://docs.microsoft.com/en-us/dotnet/api/system.windows.input.inputbinding](https://docs.microsoft.com/en-us/dotnet/api/system.windows.input.inputbinding)

# sublimetext2 - 更改当前构建系统快捷方式

> ID：13562476
> 
> 赞同：0
> 
> 时间：2012-11-26T10:03:18.500
> 
> 标签：sublimetext2

我可以使用快捷方式在构建系统之间切换吗？

我创建了一些构建系统来在不同的数据库上执行 sql - stagings、devs 等。我用谷歌搜索了它，但找不到如何使用快捷方式在构建系统之间切换，导致使用鼠标在它们之间切换（工具->构建系统-> 检查构建系统）非常慢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T07:59:58.613

不要让它们完全不同的构建系统，而是使用**变体**（[在此处记录](http://docs.sublimetext.info/en/latest/reference/build_systems.html#variants)）。例如，您可以有一个看起来有点像这样的自定义构建文件：

```
{
  "name": "sql dev"
  "cmd": [<command to execute on development server>]
  "selector": "source.sql",

  "variants":
    [
      {
    "name": "sql staging",
    "cmd": [<command to execute in staging area>]
      },
      {
    "name": "sql production",
    "cmd": [<command to execute on production server>]
      }
    ]
} 
```

当此构建文件处于活动/选择状态时，构建命令将执行`sql dev`。 `command`++ (Mac) 或++ `shift`( Windows/Linux) 将执行. 您可以通过命令面板访问所有三个；只需搜索“构建”。`B``control``shift``B``sql staging`

# android - 如何检测手指是否已经在开始新活动的按钮上

> ID：13562482
> 
> 赞同：1
> 
> 时间：2012-11-26T10:03:45.567
> 
> 标签：android, events, android-layout, touch

场景是例如用户长按**Activity A**。 lonkclick 上的活动**A**在用户不抬起手指时 启动**活动 B。****活动 B**应该检测到用户仍在触摸屏幕。

我试图通过......

在**活动 A**

```
ButtonA.setOnLongClickListener(new OnLongClickListener() {

        @Override
        public boolean onLongClick(View v) {
            startActivityForResult(new Intent(ActivityA.this, ActivityB.class), REQUEST_1);
            return true;
        }
    }); 
```

在**活动 B** ...

```
ButtonB.setOnTouchListener(new OnTouchListener() {
        int oldEvent = -1;

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            if (oldEvent != event.getAction()) {
                oldEvent = event.getAction();
                Toast.makeText(ActivityB.this, event.getAction() + "", Toast.LENGTH_SHORT).show();
            }
            return true;
        }
    }); 
```

例如，ButtonA 和 ButtonB 在屏幕上的相同位置。绝对地/

但是当**ActivityB**启动时， **ButtonB**没有发生**任何事件。**既不是 ACTION_DOWN，也不是 ACTION_UP，没有其他。通常我想在 ButtonB 上接收**ACTION_UP** :-)

 ***** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T10:06:27.137

如果在您开始活动时手指已经在屏幕上，您将不会获得 ACTION_DOWN。你也不会得到 ACTION_UP，因为还没有 ACTION_DOWN。也许你有自己的理由这样做，但一般用户应该能够取消操作，因此按钮应该在点击时做出反应（在同一个对象上向下然后向上）。如果动作发生在 DOWN 上，那么用户就无法取消它（即通过将手指移到对象外并抬起它）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T14:30:40.837

该任务是使用 FragmentActivity 解决的。****

# php - iPhone 4 OS 5.1 JQuery + 位置固定

> ID：13562492
> 
> 赞同：1
> 
> 时间：2012-11-26T10:04:08.127
> 
> 标签：php, jquery, viewport, iphone-4

我似乎遇到了一个奇怪的问题，只有 OS 5 上的 iPhone 4。这个问题不会发生在 4S 或 iPhone 5 上。

我在页面底部设置了一个导航栏，其背景为精灵。然后，我将 3 个单独的 div 放在该导航栏的顶部，以便我可以绑定单击操作并执行某种请求。

我正在像这样设置视口：

```
<meta name='viewport' id='viewport' content='width=device-width,user-scalable=no' /> 
```

可能值得注意的是，当页面加载时，它会像所有内容都被放大一样加载，但是一旦加载了所有内容，它就会正确缩小并且所有内容都适合一页。

HTML：

`<div id='footerNav' style='position: fixed; bottom: 0;'>`

```
<div id='cell1'></div>
<div id='cell2'><div>
<div id='cell3'></div> 
```

`</div>`

Javascript：

```
jQuery('#footerNav').delegate('#cell1', 'click', function() { alert('click'); });
jQuery('#footerNav').delegate('#cell2', ....);
jQuery('#footerNav').delegate('#cell3', ....); 
```

现在这会渲染带有背景图像的页脚和 3 个 div 以及页面底部的所有内容（我在 css 中放置了一个边框：1px 纯红色以确保它显示在预期的位置）。奇怪的问题是可点击区域现在位于页脚上方。

更奇怪的是，如果你旋转 iPhone 的风景然后再回来，可触摸区域会按预期工作。

我觉得它与 Safari 在缩小以适应内容时如何处理视口有关，但我无法真正证明这一点。我希望对这个问题有任何见解。

提前致谢！

# c++ - boost::variant 和 std::find_if

> ID：13562493
> 
> 赞同：2
> 
> 时间：2012-11-26T10:04:11.947
> 
> 标签：c++, c++98

如何通过 find_if 函数使用访问者？我猜我需要做一些神奇的绑定，因此这不起作用：

```
 typedef boost::variant<FileNode,DirectoryNode> Node;
    typedef std::vector<Node> Nodes;
    const Nodes& nodes;
    IsFileNodeVisitor isFileNodeVisitor;
    find_if (nodes.begin(), nodes.end(), isFileNodeVisitor);

    class IsFileNodeVisitor: public boost::static_visitor<bool>
    {
    public:
        bool operator()(const FileNode&) const {
            return true;
        }

        bool operator()(const DirectoryNode&) const {
            return false;
        }
    }; 
```

上面代码的想法是给我一个指向节点向量中第一个 FileNode 实例的迭代器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T10:47:44.520

我认为使用[boost bind](http://www.boost.org/doc/libs/1_52_0/libs/bind/bind.html)应该可以工作：

```
 std::find_if (nodes.begin(), nodes.end(),
               boost::bind(&boost::apply_visitor<IsFileNodeVisitor,Node>,
                           IsFileNodeVisitor(), _1 )
              ); 
```

# wpf - WPF Treeview Style EventSetter 不起作用

> ID：13562498
> 
> 赞同：1
> 
> 时间：2012-11-26T10:04:24.523
> 
> 标签：wpf, treeview, styles, eventsetter

你好，我的事件设置器有问题。
我的窗口：

```
<TreeView.Resources>
    <ResourceDictionary> 
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary 
                 Source="CrefoChartTreeViewItemStyle.xaml" />
        </ResourceDictionary.MergedDictionaries>
        <HierarchicalDataTemplate 
            DataType="{x:Type local:Node}" 
            ItemsSource="{Binding ChildNodes}">
        </HierarchicalDataTemplate>
    </ResourceDictionary>
</TreeView.Resources> 
```

我的 CrefoChartTreeViewItemStyle.xaml

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
xmlns:ed="http://schemas.microsoft.com/expression/2010/drawing"
mc:Ignorable="d"
>
    <Style TargetType="TreeViewItem">
        <Style.Resources>
            <LinearGradientBrush x:Key="ButtonBrush" EndPoint="0,1" StartPoint="0,0">
                <GradientStop Color="White" Offset="0.25"/>
                <GradientStop Color="#FFA5DBE9" Offset="1"/>
            </LinearGradientBrush>
            <Style x:Key="ButtonStyle" TargetType="{x:Type Button}">
                <Setter Property="Background" Value="{DynamicResource ButtonBrush}" />
                <EventSetter Event="Click" Handler="ButtonOnClick" />
            </Style>
        </Style.Resources> 
```

编译时收到错误消息：

```
The event 'click' can not be specified on a Target tag in a Style. Instead, use "EventSetter". 
```

我做错了什么？

有没有其他方法可以触发树视图中的这个按钮？所以我可以把代码放在后面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T10:12:27.063

这是行不通~~的，因为资源 xaml 不能有代码隐藏文件~~，它们通常被称为“松散 xaml”。您可以在有关 EventSetter 的 msdn 中阅读相关内容。您可以并且应该做的是使用将您的事件转换为命令的东西，例如[AttachedCommandBehavior](http://marlongrech.wordpress.com/2008/12/04/attachedcommandbehavior-aka-acb/)，它与 MVVM 一起工作得非常好。如果您想使用您要求的事件，您可以将 TreeView 放在 UserControl 中，然后您可以使用事件。

# python - 如果我的代码中没有 QTimer，为什么我会收到“QTimer 只能用于以 QThread 开头的线程”消息？

> ID：13562501
> 
> 赞同：11
> 
> 时间：2012-11-26T10:04:40.343
> 
> 标签：python, pyqt4, multiplatform, qtimer

当（并且仅当）我退出我的应用程序时，这些（并且只有这些）重复的消息会出现在命令提示符上：

```
QObject::startTimer: QTimer can only be used with threads started with QThread
QObject::startTimer: QTimer can only be used with threads started with QThread
QObject::startTimer: QTimer can only be used with threads started with QThread 
```

这对我来说很奇怪，因为我从不在我的代码（或 QThread）中使用 QTimer。事实上，使用该应用程序不会发生错误或崩溃，因此这实际上并不是真正的问题。这发生在 Windows 和 Linux 操作系统中。

我所有的进口：

```
from __future__ import print_function
from PyQt4.QtGui import (QApplication, QMainWindow,
                         QFileSystemModel, QTreeView, QTableView,
                         QAbstractItemView, QMenu, QAction, QKeyEvent)
from PyQt4.QtCore import QDir, Qt, SIGNAL, QString, QFileInfo, QCoreApplication
import sys 
```

主要功能：

```
def main():
    app = QApplication(sys.argv)
    app.setApplicationName("QFM")
    app.setStyle("plastique")
    gui = MainWindow()
    gui.show()
    app.exec_() 
```

也许它可能与 QFileSystemWatcher（由 QFileSystemModel 使用）有关，我猜......也许它使用了一些 QTimer 功能。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-29T18:38:20.523

我过去也遇到过类似的问题。

`QFileSystemModel`[文档页面](http://www.riverbankcomputing.com/static/Docs/PyQt4/html/qfilesystemmodel.html)说明如下：

> `QFileSystemModel.__init__ (self, QObject parent = None)`
> 
> parent 参数，如果不是 None，将导致 self 由 Qt 而不是 PyQt 拥有。
> 
> 构造具有给定父级的文件系统模型。

如果您不传递`parent`参数，那么 Python 垃圾收集器可能会在错误的时间删除该对象，并作为副作用引发您提到的错误。我的建议是确保你的对象有一个合适的父对象。我认为它应该可以解决问题。

PS：我没有检查您使用的每个课程的文档。也许`QFileSystemModel`不是发生这种事情的唯一班级。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T21:44:38.333

以我的经验，当我对 Qt 类进行子类化并且子类的成员之一不是 Qt 层次结构的一部分时，就会发生这种情况。例如：

```
class MainWindow(QMainWindow):
    def __init__(self, *args, **kwargs):
        super(MainWindow, self).__init__(*args, **kwargs)
        ...
        self.my_widget = MyWidget()
        ... 
```

如果我`MyWidget`以这种方式实现，它会`QTimer`在对象被销毁时给我错误：

```
class MyWidget(object):
    def __init__(self):
        # do stuff 
```

但是，如果`MyWidget`从 then 继承，`QObject`则不会发生错误：

```
class MyWidget(QObject):
    def __init__(self, parent):
        super(MyWidget, self).__init__(parent)
        #do stuff 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-05T08:36:35.320

如果您没有像 QFileSystemModel(self) 这样子类化它，则将 self 传递给它的实例化